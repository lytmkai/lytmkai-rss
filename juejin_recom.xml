<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä» Haskell åˆ° Goï¼šè®°ä¸€æ¬¡ RSA åŠ å¯†åè®®ç§»æ¤ä¸â€œå­—èŠ‚é™·é˜±â€æ’æŸ¥å®å½•]]></title>    <link>https://juejin.cn/post/7588093282530754612</link>    <guid>https://juejin.cn/post/7588093282530754612</guid>    <pubDate>2025-12-28T01:04:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282530754612" data-draft-id="7588092534162309120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» Haskell åˆ° Goï¼šè®°ä¸€æ¬¡ RSA åŠ å¯†åè®®ç§»æ¤ä¸â€œå­—èŠ‚é™·é˜±â€æ’æŸ¥å®å½•"/> <meta itemprop="keywords" content="Go,Haskell"/> <meta itemprop="datePublished" content="2025-12-28T01:04:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» Haskell åˆ° Goï¼šè®°ä¸€æ¬¡ RSA åŠ å¯†åè®®ç§»æ¤ä¸â€œå­—èŠ‚é™·é˜±â€æ’æŸ¥å®å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:04:45.000Z" title="Sun Dec 28 2025 01:04:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯ä¸ç›®æ ‡</h2>
<p>æœ¬æ¬¡ä»»åŠ¡çš„ç›®æ ‡æ˜¯å°†ä¸€ä¸ªç”¨ Haskell ç¼–å†™çš„åŠ å¯†ä¼ è¾“åè®®ï¼ˆ<code>Metro.TP.RSA</code>ï¼‰ç§»æ¤åˆ° Go è¯­è¨€ä¸­ï¼Œå¹¶å°è£…ä¸ºæ ‡å‡†çš„ <code>net.Conn</code> æ¥å£ï¼Œä»¥ä¾¿æ›¿æ¢åŸæœ‰çš„ <code>XORConn</code> å®ç°ã€‚</p>
<p>è¯¥åè®®ä¸ä»…ä»…æ˜¯ç®€å•çš„åŠ å¯†ï¼Œè¿˜æ˜¯ä¸€ä¸ªå¸¦æœ‰çŠ¶æ€åå•†çš„æ··åˆåè®®ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>
<p><strong>èº«ä»½æ¡æ‰‹</strong>ï¼šåŸºäº RSA å…¬ç§é’¥äº¤æ¢æŒ‡çº¹ï¼ˆSHA256ï¼‰ï¼ŒéªŒè¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åˆæ³•æ€§ã€‚</p>
</li>
<li>
<p><strong>æ¨¡å¼åå•†</strong>ï¼šæ”¯æŒä¸‰ç§ä¼ è¾“æ¨¡å¼ï¼š</p>
<ul>
<li><code>Plain</code> (0): æ˜æ–‡ç›´è¿ã€‚</li>
<li><code>RSA</code> (1): å…¨ç¨‹ä½¿ç”¨ RSA-OAEP åŠ å¯†ï¼ˆä¼ ç»Ÿ/å…¼å®¹æ¨¡å¼ï¼‰ã€‚</li>
<li><code>AES</code> (2): ä½¿ç”¨åå•†å‡ºçš„ Session Key è¿›è¡Œ AES-256-CTR åŠ å¯†ï¼ˆé«˜æ€§èƒ½æ¨¡å¼ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">2. é‡åˆ°çš„æ ¸å¿ƒé—®é¢˜</h2>
<p>åœ¨åˆæ­¥ç§»æ¤å®Œæˆåï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªéå¸¸è¯¡å¼‚çš„ç°è±¡ï¼š</p>
<ul>
<li><strong>Plain æ¨¡å¼</strong>ï¼šä¸€åˆ‡æ­£å¸¸ï¼Œæ¡æ‰‹æˆåŠŸï¼Œæ•°æ®ä¼ è¾“æµç•…ã€‚</li>
<li><strong>AES/RSA æ¨¡å¼</strong>ï¼šæ¡æ‰‹çœ‹ä¼¼å®Œæˆï¼Œä½†éšåè¿æ¥é™·å…¥â€œå‡æ­»â€çŠ¶æ€ï¼ˆHangï¼‰ï¼Œæ— æ³•è¯»å–æ•°æ®ã€‚</li>
</ul>
<p>é€šå¸¸å¦‚æœæ˜¯åŠ å¯†ç®—æ³•é”™è¯¯ï¼ˆå¦‚ IV é”™è¯¯ã€Padding é”™è¯¯ï¼‰ï¼Œç¨‹åºå¾€å¾€ä¼šç›´æ¥æŠ¥é”™ï¼ˆDecryption Failedï¼‰ã€‚è¿™ç§â€œå¡ä½â€çš„ç°è±¡é€šå¸¸æ„å‘³ç€<strong>åè®®çŠ¶æ€æœºä¸åŒæ­¥</strong>æˆ–**æ•°æ®åˆ†åŒ…ï¼ˆFramingï¼‰**å‡ºäº†é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">3. æ·±åº¦æ’æŸ¥ï¼šå­—èŠ‚çº§â€œè„‘è£‚â€</h2>
<p>ç»è¿‡æ’æŸ¥ï¼Œé—®é¢˜çš„æ ¹æºéšè—åœ¨ Haskell å’Œ Go å¯¹æšä¸¾ç±»å‹ï¼ˆEnumï¼‰é»˜è®¤åºåˆ—åŒ–è¡Œä¸ºçš„å·®å¼‚ä¸­ã€‚</p>
<h3 data-id="heading-3">3.1 åè®®å·®å¼‚åˆ†æ</h3>
<ul>
<li>
<p>Haskell ç«¯ (Data.Binary)ï¼š</p>
<p>RSAMode æ´¾ç”Ÿè‡ª Genericã€‚å¯¹äºè¿™ç§ç®€å•çš„ Sum Typeï¼ˆæšä¸¾ï¼‰ï¼ŒHaskell çš„æ ‡å‡†äºŒè¿›åˆ¶åº“å°†å…¶ç¼–ç ä¸º 1 ä¸ªå­—èŠ‚ çš„ç´¢å¼•å€¼ï¼ˆ0, 1, 2ï¼‰ã€‚</p>
</li>
<li>
<p>Go ç«¯ (æ—§ä»£ç )ï¼š</p>
<p>æˆ‘ä»¬åœ¨å‘é€æ¨¡å¼æ—¶ï¼Œä¹ æƒ¯æ€§åœ°ä½¿ç”¨äº† binary.BigEndian.PutUint64ï¼Œå‘é€äº† 8 ä¸ªå­—èŠ‚ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">3.2 æ•…éšœé‡ç°</h3>
<p>å½“ Go å®¢æˆ·ç«¯è¯·æ±‚ <strong>AES æ¨¡å¼ (2)</strong> æ—¶ï¼Œå‘ç”Ÿäº†ä»¥ä¸‹äº¤äº’ï¼š</p>
<ol>
<li>
<p><strong>Go å‘é€</strong>ï¼š<code>00 00 00 00 00 00 00 02</code> (8å­—èŠ‚)ã€‚</p>
</li>
<li>
<p><strong>Haskell æ¥æ”¶</strong>ï¼šè¯»å– <strong>1ä¸ªå­—èŠ‚</strong>ï¼Œè¯»åˆ°äº† <code>00</code>ã€‚</p>
</li>
<li>
<p><strong>Haskell çŠ¶æ€</strong>ï¼š<code>00</code> å¯¹åº” <code>Plain</code> æ¨¡å¼ã€‚Haskell è®¤ä¸ºåå•†ç»“æŸï¼Œè¿›å…¥æ˜æ–‡æ¥æ”¶çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>Go çŠ¶æ€</strong>ï¼šå‘é€å®Œæ¯•ï¼Œè®¤ä¸ºåå•†æˆåŠŸï¼Œè¿›å…¥ AES æ¨¡å¼ï¼Œå¼€å§‹å‘é€åŠ å¯†åçš„ Session Keyã€‚</p>
</li>
<li>
<p><strong>ç»“æœï¼ˆè„‘è£‚ï¼‰</strong> ï¼š</p>
<ul>
<li>Haskell åœ¨ç­‰æ˜æ–‡åº”ç”¨æ•°æ®ã€‚</li>
<li>Go å‘é€äº†ä¸€å †åŠ å¯†çš„äºŒè¿›åˆ¶æµï¼ˆSession Keyï¼‰ã€‚</li>
<li>Haskell è¯»å…¥è¿™äº›ä¹±ç è¯•å›¾å¤„ç†ï¼Œå¯¼è‡´é€»è¾‘é”™ä¹±æˆ–åœ¨ç­‰å¾…åç»­æ•°æ®åŒ…å¤´ï¼ˆLength Headerï¼‰æ—¶æ— é™é˜»å¡ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">3.3 ä¸ºä»€ä¹ˆ Plain æ¨¡å¼èƒ½è·‘é€šï¼Ÿ</h3>
<p>è¿™æ˜¯ä¸€ä¸ªæå…·è¿·æƒ‘æ€§çš„å·§åˆã€‚</p>
<p>å½“ Go è¯·æ±‚ Plain (0) æ—¶ï¼Œå‘é€çš„æ˜¯ 00 00 00 00 00 00 00 00ã€‚</p>
<p>Haskell è¯»å–ç¬¬ä¸€ä¸ªå­—èŠ‚ 00ï¼Œè§£æä¸º Plainã€‚</p>
<p>è™½ç„¶ Go å¤šå‘äº†7ä¸ªå­—èŠ‚çš„ 00ï¼Œä½†å› ä¸ºåç»­æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œè¿™å‡ ä¸ªç©ºå­—èŠ‚å¯èƒ½è¢«åº”ç”¨å±‚å¿½ç•¥æˆ–æ°å¥½æœªé€ æˆä¸¥é‡ç ´åï¼ˆè§†å…·ä½“åº”ç”¨å±‚åè®®è€Œå®šï¼‰ï¼Œä»è€Œæ©ç›–äº† bugã€‚</p>
<h2 data-id="heading-6">4. è§£å†³æ–¹æ¡ˆä¸æœ€ç»ˆå®ç°</h2>
<h3 data-id="heading-7">4.1 ä¿®å¤åºåˆ—åŒ–</h3>
<p>å°† Go ä»£ç ä¸­çš„æ¨¡å¼å‘é€ä¸æ¥æ”¶ä¸¥æ ¼é™åˆ¶ä¸º <strong>1 å­—èŠ‚</strong>ï¼š</p>
<p>Go</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å‘é€ (Client)</span>
modeByte := []<span class="hljs-type">byte</span>{<span class="hljs-type">byte</span>(mode)}
c.sendDataOAEP(modeByte)

<span class="hljs-comment">// æ¥æ”¶ (Server)</span>
modeBytes, _ := c.recvDataOAEP()
mode := <span class="hljs-type">int</span>(modeBytes[<span class="hljs-number">0</span>])
</code></pre>
<h3 data-id="heading-8">4.2 å®Œå–„æµå¼å¤„ç†</h3>
<p>ç”±äº AES-CTR æ˜¯æµåŠ å¯†ï¼Œä½†åè®®å®šä¹‰äº† <code>[Length][IV][Body]</code> çš„å°åŒ…æ ¼å¼ï¼Œè€Œ <code>net.Conn.Read</code> æ˜¯æµå¼çš„ã€‚ä¸ºäº†é˜²æ­¢ TCP ç²˜åŒ…æˆ–æ–­åŒ…å¯¼è‡´è§£å¯†å¤±è´¥ï¼Œæˆ‘ä»¬åœ¨ Go ç»“æ„ä½“ä¸­å¼•å…¥äº† <code>bytes.Buffer</code>ï¼š</p>
<p>Go</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> RSAConn <span class="hljs-keyword">struct</span> {
    net.Conn
    <span class="hljs-comment">// ... keys ...</span>
    readBuf bytes.Buffer <span class="hljs-comment">// å…³é”®ï¼šå†…éƒ¨ç¼“å†²</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *RSAConn)</span></span> Read(b []<span class="hljs-type">byte</span>) (n <span class="hljs-type">int</span>, err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// ä¼˜å…ˆä»ç¼“å†²åŒºåå‡ºå·²è§£å¯†æ•°æ®</span>
    <span class="hljs-keyword">if</span> c.readBuf.Len() &gt; <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> c.readBuf.Read(b)
    }
    <span class="hljs-comment">// ç¼“å†²åŒºç©ºï¼Œä»ç½‘ç»œè¯»å–å®Œæ•´çš„ä¸€ä¸ªåŠ å¯†åŒ…ï¼Œè§£å¯†åå¡«å…¥ç¼“å†²åŒº</span>
    <span class="hljs-comment">// ... recvDataAES logic ...</span>
}
</code></pre>
<h2 data-id="heading-9">5. æ€»ç»“ä¸ç»éªŒ</h2>
<ol>
<li><strong>è·¨è¯­è¨€åè®®å¿…é¡»ç²¾ç¡®åˆ°å­—èŠ‚</strong>ï¼šä¸è¦å‡è®¾ <code>Int</code> æ˜¯ 4 å­—èŠ‚è¿˜æ˜¯ 8 å­—èŠ‚ï¼Œä¹Ÿä¸è¦ä¾èµ–è¯­è¨€ç‰¹å®šçš„åºåˆ—åŒ–åº“ï¼ˆå¦‚ Haskell çš„ <code>Generic</code> æˆ– Go çš„ <code>gob</code>ï¼‰ï¼Œé™¤éä½ å®Œå…¨æŒæ§ä¸¤ç«¯çš„å®ç°ã€‚æ˜ç¡®è§„å®š <code>uint8</code>ã€<code>uint64</code> (BigEndian) æ˜¯æœ€ç¨³å¦¥çš„ã€‚</li>
<li><strong>è­¦æƒ•â€œéƒ¨åˆ†æ­£å¸¸â€çš„ Bug</strong>ï¼šPlain æ¨¡å¼çš„æ­£å¸¸è¿è¡Œæ˜¯æœ€å¤§çš„å¹²æ‰°é¡¹ï¼Œå®ƒè®©æˆ‘ä»¬è¯¯ä»¥ä¸ºæ¡æ‰‹é€»è¾‘æ˜¯å®Œç¾çš„ï¼Œä»è€Œå°†æ’æŸ¥æ–¹å‘å¼•å‘äº†å¤æ‚çš„åŠ å¯†ç®—æ³•æœ¬èº«ï¼Œå®é™…ä¸Šé—®é¢˜åªæ˜¯ç®€å•çš„ç±»å‹å®½åº¦ä¸åŒ¹é…ã€‚</li>
<li><strong>æµå¼æ¥å£çš„é€‚é…</strong>ï¼šå°†åŸºäºåŒ…ï¼ˆPacket-basedï¼‰çš„åè®®é€‚é…åˆ°æµï¼ˆStream-basedï¼‰æ¥å£ï¼ˆå¦‚ <code>io.Reader</code>ï¼‰æ—¶ï¼Œ<strong>å¿…é¡»</strong>å®ç°å†…éƒ¨ç¼“å†²æœºåˆ¶ï¼Œå¦åˆ™ææ˜“å‡ºç°ç²˜åŒ…å¤„ç†ä¸å½“çš„é—®é¢˜ã€‚</li>
</ol>
<p>é€šè¿‡è¿™æ¬¡ä¿®å¤ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†ä¸€ä¸ªå…¼å®¹ Haskell åç«¯ã€æ”¯æŒ RSA èº«ä»½éªŒè¯å’Œ AES é«˜é€ŸåŠ å¯†çš„ Go è¯­è¨€ä¼ è¾“å±‚æ¨¡å—ï¼Œä¸ºåç»­çš„æœåŠ¡ç«¯åŠŸèƒ½æ‰©å±•ï¼ˆå¦‚ CS2 å¼€ç®±æœåŠ¡ï¼‰æ‰“ä¸‹äº†åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŸ­æ€è€ƒç¬¬266å¤©ï¼Œç©IPè·¯ä¸Šçš„å‡ ç‚¹æ„Ÿæ‚Ÿï¼Œè¿™å‡ ç‚¹å¾ˆé‡è¦ï¼]]></title>    <link>https://juejin.cn/post/7588300640599146502</link>    <guid>https://juejin.cn/post/7588300640599146502</guid>    <pubDate>2025-12-28T00:57:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640599146502" data-draft-id="7588191506606374918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŸ­æ€è€ƒç¬¬266å¤©ï¼Œç©IPè·¯ä¸Šçš„å‡ ç‚¹æ„Ÿæ‚Ÿï¼Œè¿™å‡ ç‚¹å¾ˆé‡è¦ï¼"/> <meta itemprop="keywords" content="åˆ›ä¸š,å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T00:57:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ç æ­Œ"/> <meta itemprop="url" content="https://juejin.cn/user/764915820529831"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŸ­æ€è€ƒç¬¬266å¤©ï¼Œç©IPè·¯ä¸Šçš„å‡ ç‚¹æ„Ÿæ‚Ÿï¼Œè¿™å‡ ç‚¹å¾ˆé‡è¦ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/764915820529831/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ç æ­Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:57:58.000Z" title="Sun Dec 28 2025 00:57:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>1ã€ç æ‰æ— å¤åˆ©æˆ–è€…å¤åˆ©ä¸é«˜çš„é¡¹ç›®ï¼Œåˆ æ‰æ— ä»·å€¼çš„å¥½å‹ï¼Œåšå‡æ³•ã€‚ä¸“æ³¨æœ‰é•¿çº¿ç§¯ç´¯çš„çŸ­æ–‡å†™ä½œã€å…¬ä¼—å·ä¸“æ ã€ç¤¾ç¾¤åˆä¼™äººç­‰</p>
<p>2ã€ç©IPï¼Œ ä¸€å®šè¦å¿˜äº†é˜…è¯»é‡æŒ‡æ ‡ï¼Œç”¨å¤„ä¸å¤§ã€‚æ ¸å¿ƒæ˜¯æ–‡ç« è·å–çš„ç²¾å‡†ç”¨æˆ·ï¼Œç‚¹èµã€æ”¶è—ã€å’¨è¯¢ã€å¯¼ç§åŸŸã€æˆäº¤ç­‰æ•°æ®</p>
<p>3ã€â€œæ—¥å…¥800â€ï¼Œæ€»èƒ½çœ‹åˆ°ç±»ä¼¼çš„ç®€ä»‹å¼•æµï¼Œå»å¸å¼•å‰¯ä¸šå°ç™½ä»˜è´¹å­¦ä¹ ã€‚ç±»ä¼¼è¿™æ ·çš„ï¼Œä¸€å¾‹åˆ«ç†ï¼Œæ™®é€šäººå‡ ä¹ä¸å¯èƒ½ï¼Œå¤§æ¦‚ç‡æ˜¯èµšä½ å­¦è´¹</p>
<p>4ã€å¯¹å®Œå…¨æ²¡åŸºç¡€çš„åŒå­¦ç©å‰¯ä¸šIPï¼Œ è¦åšå¥½3å¹´ä¹‹å†…æ”¶å…¥ä¸ç¨³å®šçš„å¿ƒç†å‡†å¤‡ï¼Œæ„å‘³ç€ä½ å¿…é¡»æœ‰ä¸€ä»½ä¸»ä¸šï¼Œç¡®ä¿æœ‰åŸºç¡€çš„æ”¶å…¥æ¥æºï¼Œåˆ«ç›²ç›®è£¸è¾ã€‚ä¸€äººä¼ä¸šæ¢ç´¢éœ€è¦æ—¶é—´å‘¨æœŸï¼Œå¾ˆé•¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å“åº”å¼ç¼–ç¨‹ä¸åªæœ‰æ¦‚å¿µï¼ä¸‡å­—é•¿æ–‡ + ä»£ç ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬ RxJava]]></title>    <link>https://juejin.cn/post/7588095884070273024</link>    <guid>https://juejin.cn/post/7588095884070273024</guid>    <pubDate>2025-12-28T01:07:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070273024" data-draft-id="7588093282530770996" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å“åº”å¼ç¼–ç¨‹ä¸åªæœ‰æ¦‚å¿µï¼ä¸‡å­—é•¿æ–‡ + ä»£ç ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬ RxJava"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T01:07:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaéšæƒ³å½•"/> <meta itemprop="url" content="https://juejin.cn/user/2837192913204935"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å“åº”å¼ç¼–ç¨‹ä¸åªæœ‰æ¦‚å¿µï¼ä¸‡å­—é•¿æ–‡ + ä»£ç ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬ RxJava
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2837192913204935/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaéšæƒ³å½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:07:20.000Z" title="Sun Dec 28 2025 01:07:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å·²æ”¶å½•è‡³GitHubï¼Œæ¨èé˜…è¯» ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FBookSea4j%2FJavaRecord" target="_blank" title="https://github.com/BookSea4j/JavaRecord" ref="nofollow noopener noreferrer">Javaéšæƒ³å½•</a></p>
<p>å¾®ä¿¡å…¬ä¼—å·ï¼šJavaéšæƒ³å½•</p>
<h2 data-id="heading-0">Reactive Streams ä»‹ç»</h2>
<p>åœ¨èŠ Reactive Streams ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ Reactive Programmingï¼ˆååº”å¼/å“åº”å¼ç¼–ç¨‹ï¼‰ã€‚ä¸ºäº†è§£å†³å¼‚æ­¥ç¼–ç¨‹ä¸­å‡ºç°çš„å„ç§é—®é¢˜ï¼Œç¨‹åºå‘˜ä»¬æå‡ºäº†å„ç§çš„æ€è·¯å»è§£å†³è¿™äº›é—®é¢˜ï¼Œè¿™äº›è§£å†³é—®é¢˜çš„æ–¹å¼ã€æ–¹æ³•ï¼Œæ‰‹æ®µå°±å¯ä»¥å«åš Reactive Programmingã€‚</p>
<p>Reactive Programming æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç±»ä¼¼é¢å‘å¯¹è±¡ï¼Œå‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<p>æœ¬è´¨ä¸Šæ˜¯å¯¹æ•°æ®æµæˆ–æŸç§å˜åŒ–åšå‡ºçš„ååº”ï¼Œè¿™ä¸ªå˜åŒ–ä»€ä¹ˆæ—¶å€™è§¦å‘æ˜¯æœªçŸ¥çš„ï¼Œæ‰€ä»¥ä»–æ˜¯ä¸€ç§åŸºäºå¼‚æ­¥ã€å›è°ƒçš„æ–¹å¼åœ¨å¤„ç†é—®é¢˜ã€‚</p>
<p>å½“è¶Šæ¥è¶Šå¤šçš„ç¨‹åºå‘˜ï¼Œå¼€å§‹ä½¿ç”¨è¿™ç§ç¼–ç¨‹æ€æƒ³æ—¶ï¼Œéœ€è¦ä¸€äº›å¤§ä½¬æ¥ç»Ÿä¸€ä¸€ä¸ªæ€æƒ³è§„èŒƒã€‚æ‰€ä»¥å›½å¤–çš„å‡ ä¸ªå¤§ä½¬å…¬å¸å¯åŠ¨äº† Reactive Streams é¡¹ç›®ã€‚Netflixã€Pivotalã€Lightbend è”åˆæ¥ä¸ºå¼‚æ­¥æµå¤„ç†æä¾›æ ‡å‡†ï¼Œè§„èŒƒã€‚</p>
<p>Reactive Streams ç¿»è¯‘è¿‡æ¥å°±æ˜¯å“åº”å¼/ååº”å¼æµã€‚<strong>å…¶å®æ˜¯ä¸€ç§åŸºäºå¼‚æ­¥æµå¤„ç†çš„æ ‡å‡†åŒ–è§„èŒƒï¼Œç›®çš„æ˜¯åœ¨ä½¿ç”¨æµå¤„ç†æ—¶æ›´åŠ å¯é ï¼Œé«˜æ•ˆå’Œå“åº”å¼ã€‚</strong></p>
<h2 data-id="heading-1">Java å±‚é¢çš„ Reactive Streams</h2>
<p>åŸºäºè¿™ä¸ªè§„èŒƒçš„å®ç°å¾ˆå¤šï¼Œæ¯”å¦‚ä¸‰æ–¹åº“ä¸­æ¯”è¾ƒå‡ºåçš„ RxJavaï¼ŒReactor ç­‰ç­‰ã€‚</p>
<p>ä½†æ˜¯ JDK8 ç‰ˆæœ¬ä¸­ï¼ŒJava å·²ç»æœ‰äº† CompletableFuture çš„æ”¯æ’‘ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤§é‡çš„å¼‚æ­¥ä»»åŠ¡åšå¥½ç¼–æ’ã€‚ä½†æ˜¯åœ¨ JDK8 ç‰ˆæœ¬ä¸­çš„ CompletableFuture ä¾ç„¶æœ‰å¾ˆå¤šç‰¹æ€§æ— æ³•æ”¯æ’‘ã€‚æ‰€ä»¥åœ¨ JDK9ï¼ŒCompletableFuture åšäº†å¾ˆå¤šçš„æ›´æ–°ï¼Œæ¯”å¦‚æ”¯æŒå»¶è¿Ÿï¼Œè¶…æ—¶ï¼Œå­ç±»åŒ–ä¹‹ç±»çš„åŠŸèƒ½ã€‚</p>
<p>è¿™æ—¶ï¼Œå’±ä»¬ä¼šå‘ç°ï¼Œå…¶å® CompletableFuture å·²ç»å¯ä»¥å»æ”¯æ’‘åšä¸€äº›å¼‚æ­¥ç¼–ç¨‹çš„æ“ä½œäº†ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå¤§å…¬å¸ä¾ç„¶è¿˜æ˜¯ä½¿ç”¨ RxJavaï¼ŒReactor è¿™ç§ä¸‰æ–¹ä¾èµ–åº“å‘¢ï¼Ÿ</p>
<p>é—®é¢˜åœ¨äºï¼Œå¤§å¤šæ•°çš„æ—¶å€™ï¼Œå’±ä»¬é‡‡ç”¨å¼‚æ­¥ç¼–ç¨‹å¤„ç†çš„ä»»åŠ¡å¹¶ä¸æ˜¯éå¸¸å¤æ‚çš„ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå’±ä»¬ç¡®å®ä¸éœ€è¦å»ä½¿ç”¨ Reactive Streams ååº”æµçš„æ¡†æ¶ã€‚å¦‚æœç³»ç»Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œæˆ–è€…ä½ å¤„ç†çš„ä¸šåŠ¡æœ¬èº«å°±æ˜¯åŠå…¶å¤æ‚çš„é‚£ç§ï¼Œä½ å°±è¦å»å†™ä¸€ä¸ªè®©äººå¤´çš®å‘éº»çš„ä»£ç äº†ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿™ç§ä»£ç ä¼šå˜æˆéå¸¸éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>å…¶æ¬¡ CompletableFuture å¹¶ä¸æ˜¯çœŸæ­£çš„åŸºäº Reactive Streams å»å®ç°ã€‚CompletableFuture æè¿°çš„æ˜¯å•æ¬¡æ‰§è¡Œçš„ç»“æœã€‚å°½ç®¡å¯ä»¥é€šè¿‡å„ç§æ–¹æ³•å°†å¼‚æ­¥ä»»åŠ¡ä¹‹é—´æ„å»ºæˆä¸€ä¸²ä»»åŠ¡ç»„æˆçš„æµç¨‹å›¾ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯å•æ¬¡çš„ç»“æœã€‚</p>
<p>ååº”å¼æµï¼Œé¢å‘çš„æ˜¯ Streamã€‚ å’±ä»¬ Java ä¸­çš„ Stream API æ›´ç±»ä¼¼ Reactive Streams çš„æ€æƒ³ã€‚Stream API æ˜¯åŒæ­¥é˜»å¡çš„ã€‚</p>
<p>æœ€ç»å…¸çš„å°±æ˜¯ CompletableFuture æ— æ³•å¤„ç† Reactive Streams ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼ŒBack Pressureï¼ˆèƒŒå‹ï¼Œåå‹ï¼Œå›å‹ï¼‰ï¼Œæ¯”å¦‚åœ¨ä¸Šä¸‹æ¸¸æ‰¿è½½èƒ½åŠ›ä¸åŒæ—¶ï¼Œæ¯”å¦‚ä¸‹æ¸¸ç©ä¸è½¬äº†ï¼Œéœ€è¦å‘ŠçŸ¥ä¸Šæ¸¸é‡‡å–ä¸€äº›ç­–ç•¥å»è§£å†³ã€‚CompletableFuture æ˜æ˜¾æ— æ³•å¤„ç†è¿™ç§ã€‚</p>
<p>å…¶æ¬¡è¿˜æœ‰ Java ä¸­æä¾›çš„å›è°ƒï¼ŒFuture æœºåˆ¶åœ¨å®ç°å“åº”å¼ç¼–ç¨‹ä¸­ï¼Œé—®é¢˜å’Œç¼ºç‚¹éƒ½æ¯”è¾ƒéš¾å¤„ç†ã€‚æœ‰ä¸ªæ¯”è¾ƒå‡ºåçš„æ¦‚å¿µå«åš Callback Hellï¼ˆå›è°ƒåœ°ç‹±ï¼‰ã€‚ç®€å•æ¥è¯´å°±æ˜¯å›è°ƒé‡Œé¢å¥—å›è°ƒï¼Œè™½ç„¶å°†å­è¿‡ç¨‹åšåˆ°è§£è€¦ï¼Œä½†æ˜¯éšç€ä¸šåŠ¡çš„è´Ÿè´£ï¼Œå›è°ƒä»£ç çš„å¯è¯»æ€§ã€å¤æ‚æ€§å°±å¤§å¤§çš„å¢åŠ ï¼Œè¿™ä¸ªå°±æ˜¯å›è°ƒåœ°ç‹±ã€‚</p>
<p>æ‰€ä»¥ï¼Œå’±ä»¬éœ€è¦ä¸€å¥—æ¡†æ¶æˆ–è€…è¯´ç±»åº“æ¥å®ç°çœŸæ­£å“åº”å¼æµï¼Œå¤§æ¦‚éœ€è¦å‡ ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒå°†å¼‚æ­¥ä»»åŠ¡åšå°è£…ä»¥åŠç»„è£…ï¼Œéœ€è¦ API å¯¹å¼‚æ­¥ä»»åŠ¡è¿›è¡ŒåŒ…è£…ï¼Œå¹¶ä¸”éœ€è¦å¾ˆå¤šå­ä»»åŠ¡æ¥å¯¹å¼‚æ­¥æ“ä½œè¿›è¡Œé“¾å¼ç»„è£…ï¼Œè¿‡ç¨‹ä¸­åŒ…æ‹¬è¿‡æ»¤ï¼Œå¼‚å¸¸å¤„ç†ï¼Œè¶…æ—¶ç­‰ç­‰æ“ä½œã€‚</li>
<li>å‡å°‘å¼‚æ­¥ä»»åŠ¡çš„åµŒå¥—ï¼Œå‡å°‘ä»£ç çš„å¤æ‚æ€§ï¼Œå¢åŠ å¯è¯»æ€§ï¼Œé¿å… Callback Hell è¿™ç§åŠå…¶å¤æ‚æ¶å¿ƒçš„ä»£ç ã€‚</li>
<li>æ”¯æŒèƒŒå‹ Back Pressureï¼Œä¹Ÿå°±éœ€è¦æœ‰ä¸Šæ¸¸å’Œä¸‹æ¸¸çš„æ¦‚å¿µï¼Œå¯ä»¥åšåˆ°åå•†å¤„ç†æ•°æ®æµçš„é€Ÿåº¦ã€‚</li>
</ul>
<h2 data-id="heading-2">Java å±‚é¢ Reactive Steams çš„ API</h2>
<p>é¦–å…ˆ Reactive Steams å“åº”æµå®ç°æ–¹å¼å…¶å®æ˜¯åŸºäºè§‚å¯Ÿè€…æ¨¡å¼çš„æ‰©å±•ï¼ŒåŒæ—¶ä¹Ÿèƒ½çœ‹åˆ°å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè´£ä»»é“¾æ¨¡å¼ç­‰ç­‰ã€‚</p>
<p>æ•´ä¸ª Reactive Steams æµç¨‹å¤§è‡´å¦‚ä¸‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9592c871e5e40f1be90efcf888187cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=TSgTt3xeOZBxptm6EuAjG8vQSSg%3D" alt="" loading="lazy"/></p>
<p>ç›´æ¥åœ¨ JDK9 ç‰ˆæœ¬ä¹‹ä¸ŠæŸ¥çœ‹ Doug Lee æä¾›çš„ Flow ç±»ã€‚</p>
<p>åœ¨ Flow ç±»ä¸­ï¼Œæä¾›äº†æ ¸å¿ƒçš„å››ä¸ªæ¥å£ï¼šPublisherï¼ŒSubscriberï¼ŒSubscriptionï¼ŒProcessor</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09f5138c2bb440098f904bb47b27b6ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=7316XjMXvFoj2HFpvI5fx5Tv08I%3D" alt="" loading="lazy"/></p>
<p>Publisherï¼šPublisher æ˜¯å‡½æ•°å¼æ¥å£ï¼Œè´Ÿè´£å‘å¸ƒæ•°æ®çš„ã€‚ Publisher å†…éƒ¨æœ‰ä¸€ä¸ªæ–¹æ³• subscribe æ–¹æ³•ï¼Œå»å’Œå…·ä½“çš„è®¢é˜…è€…ç»‘å®šå…³ç³»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bd5da1cce0a48768a6c10bd3325c266~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=0yFzU%2FEhU6cf%2FLDc%2FhYGO%2FgDKY8%3D" alt="" loading="lazy"/></p>
<p>Subscriberï¼šSubscriber æ˜¯è®¢é˜…è€…ï¼Œè´Ÿè´£è®¢é˜…ï¼Œæ¶ˆè´¹æ•°æ®ã€‚å››ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>onSubscribeï¼šè®¢é˜…æˆåŠŸåè§¦å‘ï¼Œå¹¶ä¸”è¡¨æ˜å¯ä»¥å¼€å§‹æ¥æ”¶å‘å¸ƒè€…çš„æ•°æ®å…ƒç´ äº†ã€‚</li>
<li>onNextï¼šæ¯æ¬¡è·å–åˆ°å‘å¸ƒè€…çš„æ•°æ®å…ƒç´ éƒ½ä¼šæ‰§è¡Œ onNextã€‚</li>
<li>onErrorï¼šæ¥æ”¶æ•°æ®å…ƒç´ æ—¶ï¼Œå‡ºç°å¼‚å¸¸ç­‰é—®é¢˜æ—¶ï¼Œèµ° onErrorã€‚</li>
<li>onCompleteï¼šå½“æŒ‡å®šæ¥æ”¶çš„å…ƒç´ ä¸ªæ•°æå®šåï¼Œè§¦å‘ onCompleteã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b00cfd018c9e4d6d9eab9109a953eac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=KN1vhpT34Ny2FvK3c39OX73WOuI%3D" alt="" loading="lazy"/></p>
<p>Subscriptionï¼šå‘å¸ƒè€…å’Œè®¢é˜…è€…æ˜¯åŸºäº Subscription å…³è”çš„ã€‚å½“å»ºç«‹äº†è®¢é˜…çš„å…³ç³»åï¼Œå‘å¸ƒè€…ä¼šå°† Subscription ä¼ é€’ç»™è®¢é˜…è€…ã€‚è®¢é˜…è€…æŒ‡å®šè·å–å…ƒç´ çš„æ•°é‡å’Œå–æ¶ˆè®¢é˜…æ“ä½œï¼Œéƒ½è¦åŸºäº Subscription å»æ“ä½œã€‚æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>requestï¼šè®¢é˜…è€…è¦è·å–çš„å…ƒç´ ä¸ªæ•°ã€‚</li>
<li>cancelï¼šå–æ¶ˆè®¢é˜…ï¼Œå½“å‰çš„è®¢é˜…è€…ä¸æ¥æ”¶å½“å‰å‘å¸ƒè€…çš„å…ƒç´ ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c68ad044b9374c3eab14b2f3b49f13c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=Jpp0h1Y6ZxFtnBsdj86KdC4YnpI%3D" alt="" loading="lazy"/></p>
<p>Processorï¼šProcessor ç»§æ‰¿äº† Publisher å’Œ Subscriberï¼Œå³æ˜¯å‘å¸ƒè€…ä¹Ÿæ˜¯è®¢é˜…è€…ã€‚Processor ä¸€èˆ¬ä½œä¸ºæ•°æ®çš„ä¸­è½¬ï¼Œè®¢é˜…è€…å¤„ç†å®Œæ•°æ®å…ƒç´ ï¼Œå¯ä»¥å†æ¬¡å‘ç»™ä¸‹ä¸€ä¸ªè®¢é˜…è€…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a42047a535c9423995491f68ce606ee3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=xtE0ChJLm8qslq46IFzHStHC4YA%3D" alt="" loading="lazy"/></p>
<p>è¿™å››ä¸ªæ¥å£å¾ˆé‡è¦ï¼Œæ˜¯ Reactive Streams çš„è§„èŒƒï¼Œä½†æ˜¯å¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°ï¼Œå†…éƒ¨æ²¡æœ‰å…·ä½“çš„å†…å®¹å®ç°ã€‚</p>
<p>è¿™é‡Œå°±ç±»ä¼¼ JDBC è¿™ç§è§„èŒƒï¼Œè§„èŒƒåœ¨ JDK9 ä¸­æå‡ºæ¥äº†ï¼Œæƒ³å®ç°ï¼Œå¯ä»¥åŸºäºå½“å‰çš„è¿™å››ä¸ªæ¥å£å†åšå…·ä½“çš„é€»è¾‘å¤„ç†ä»¥åŠå®ç°çš„ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-3">Java å±‚é¢ Reactive Steams åŸºæœ¬æ“ä½œ</h2>
<p>å’±ä»¬æµ‹è¯• Java ä¸­çš„ Flow é‡Œæä¾›çš„ API æ—¶ï¼Œå°±æ˜¯èµ°æœ€åŸºæœ¬çš„æ“ä½œã€‚</p>
<p>å…¶ä¸­ Processor ä¸éœ€è¦é‡å†™ï¼Œç©æœ€åŸºæœ¬çš„æ“ä½œï¼Œä¸å»åšè®¢é˜…è€…å’Œå‘å¸ƒè€…çš„è½¬æ¢ã€‚</p>
<p>å…¶æ¬¡ Subscription ä¹Ÿä¸éœ€è¦é‡å†™ï¼Œè¿™ä¸œè¥¿å°±æ˜¯æä¾›äº†è®¢é˜…è€…æŒ‡å®šè®¢é˜…çš„æ¶ˆæ¯ä¸ªæ•°ï¼Œä»¥åŠå–æ¶ˆçš„æ“ä½œã€‚</p>
<p>ç„¶å Publisher éœ€è¦é‡å†™ï¼Œä½†æ˜¯ JDK ä¸­å·²ç»æä¾›äº†ä¸€ä¸ª Publisher çš„å®ç°ï¼ŒSubmissionPublisherï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<p>æœ€åï¼ŒSubscriber éœ€è¦å’±ä»¬è‡ªå·±é‡å†™ï¼ŒæŒ‡å®šå¥½è®¢é˜…æ¶ˆæ¯çš„ä¸ªæ•°ï¼Œå·²ç»æ¶ˆè´¹çš„ä¸€äº›é€»è¾‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.Flow;


<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MySubscriber</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Flow</span>.Subscriber&lt;Integer&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-comment">// ç»‘å®šå¥½è®¢é˜…å…³ç³»åï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(Flow.Subscription subscription)</span> {
        subscription.request(<span class="hljs-number">10</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(Integer item)</span> {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š"</span> + item);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šæ¥æ”¶æ¶ˆæ¯å‡ºç°å¼‚å¸¸ï¼š"</span> + throwable.getMessage());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">()</span> {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šå½“å‰è®¢é˜…è€…è¦æ±‚æ¥æ”¶çš„æ¶ˆæ¯å…¨éƒ¨å¤„ç†å®Œæ¯•ã€‚"</span>);
    }
}
</code></pre>
<p>ç›´æ¥ä½¿ç”¨ SubmissionPublisher æµ‹è¯•æ•´ä½“æ•ˆæœ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªå·¥ä½œçº¿ç¨‹çš„çº¿ç¨‹æ± </span>
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">1</span>);
    <span class="hljs-comment">// æŒ‡å®šç¼“å†²åŒºçš„å¤§å°</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">maxBufferCapacity</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;

    <span class="hljs-comment">// éœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°</span>
    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦ä¼ é€’ä¸€ä¸ªçº¿ç¨‹æ± ï¼ŒæŒ‡å®šè®¢é˜…è€…ä½¿ç”¨çš„çº¿ç¨‹</span>
    <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªç¼“å†²åŒºï¼Œå‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯åï¼Œæ¶ˆæ¯ä¼šæ‰”åˆ°ç¼“å†²åŒºé‡Œã€‚</span>
    SubmissionPublisher&lt;Integer&gt; publisher = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SubmissionPublisher</span>&lt;&gt;(executor,maxBufferCapacity);

    <span class="hljs-comment">// ç»‘å®šè®¢é˜…è€…</span>
    <span class="hljs-type">MySubscriber</span> <span class="hljs-variable">subscriber</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySubscriber</span>();
    publisher.subscribe(subscriber);

    <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š"</span> + i);
        publisher.submit(i);
    }

    <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
    publisher.close();
    executor.shutdown();
}
</code></pre>
<p>ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">0</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">1</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">2</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">3</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">4</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">5</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">6</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">7</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">8</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">9</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">0</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">1</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">2</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">3</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">4</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">5</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">6</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">7</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">8</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">9</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šå½“å‰è®¢é˜…è€…è¦æ±‚æ¥æ”¶çš„æ¶ˆæ¯å…¨éƒ¨å¤„ç†å®Œæ¯•ã€‚
</code></pre>
<ul>
<li><strong>ç¼“å†²åŒºï¼š</strong> ç¼“å†²åŒºå°±æ˜¯å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„ä¸€å—å†…å­˜ï¼Œç±»ä¼¼çº¿ç¨‹æ± ä¸­çš„é˜»å¡é˜Ÿåˆ—ï¼Œå¯ä»¥å°†æ¶ˆæ¯æ‰”åˆ°è¿™ä¸ªç¼“å­˜åŒºé‡Œã€‚å…¶æ¬¡å’±ä»¬è®¾ç½®çš„ç¼“å†²åŒºå¤§å°æ˜¯ 5ï¼Œä½†æ˜¯å‘ç° get å‡ºæ¥çš„æ—¶å€™ï¼Œ5 è¢«æ›¿æ¢ä¸ºäº† 8ã€‚è¿™æ˜¯å› ä¸º SubmissionPublisher ä¸ºäº†æ›´æœ‰æ•ˆçš„ä½¿ç”¨å†…å­˜ï¼Œé»˜è®¤ä¼šåŸºäº roundCapacity æ–¹æ³•å°†ä¼ é€’çš„ç¼“å†²åŒºå¤§å°æ›¿æ¢ä¸º 2 çš„ n æ¬¡å¹‚ã€‚</li>
<li><strong>èƒŒå‹æ•ˆæœï¼š</strong> å½“è®¢é˜…è€…æŒ‡å®šçš„æ¶ˆæ¯å·²ç»å…¨éƒ¨å¤„ç†å®Œæ¯•åï¼Œå‘å¸ƒè€…æœ€å¤šåªèƒ½å‘å¸ƒç¼“å†²åŒºå¤§å°ä¸ªæ•°çš„æ¶ˆæ¯ï¼Œå‰©ä¸‹çš„å†…å®¹ä¼šåŸºäºèƒŒå‹çš„æ•ˆæœç›´æ¥æš‚æ—¶ä¸å‘é€ã€‚</li>
<li><strong>onCompleteï¼š</strong> éœ€è¦å‘å¸ƒè€…åšäº†close æ“ä½œï¼Œç¡®è®¤äº†å‘å¸ƒè€…å·²ç»å°†æ¶ˆæ¯å…¨éƒ¨å‘é€ï¼Œå¹¶ä¸”è®¢é˜…è€…ä¹Ÿå·²ç»å°†å…¨éƒ¨çš„æ¶ˆæ¯å¤„ç†å®Œæ¯•åï¼Œæ‰ä¼šè§¦å‘ onCompleteã€‚</li>
<li><strong>Subscriptionï¼š</strong> è®¢é˜…è€…å¯ä»¥åœ¨ onNext æˆ–è€…å…¶ä»–æ–¹æ³•ä¸­åŠ¨æ€çš„ä½¿ç”¨ subscription å»æŒ‡å®šåç»­éœ€è¦å‡ ä¸ªæ¶ˆæ¯è®¢é˜…ï¼Œä»¥åŠæ˜¯å¦éœ€è¦å–æ¶ˆè®¢é˜…æ¶ˆæ¯ç­‰æ“ä½œã€‚</li>
</ul>
<h2 data-id="heading-4">Reactive Steams è½åœ°ä½“éªŒ</h2>
<h3 data-id="heading-5">å›è°ƒåœ°ç‹±é—®é¢˜</h3>
<p>å‰é¢çš„æ–¹å¼å¤§è‡´äº†è§£äº† JDK9 ä¸­æ›´æ–°çš„ Reactive Streams çš„è§„èŒƒï¼Œå’±ä»¬å®ç°ä¹Ÿä»…ä»…æ˜¯çœ‹åˆ°äº†å‘å¸ƒè®¢é˜…å’Œå›å‹çš„æ•ˆæœã€‚å¹¶æ²¡æœ‰çœ‹åˆ°å¦‚ä½•è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚å’±ä»¬å¯ä»¥é€šè¿‡ Spring5 å®˜ç½‘æä¾›çš„ä¸€ä¸ªä¾‹å­ï¼Œæ¥ä½“éªŒä¸€ä¸‹ CallBack Hell å›è°ƒåœ°ç‹±å¸¦æ¥çš„é—®é¢˜ã€‚åé¢å†æ ¹æ®ä¸‰æ–¹çš„å®ç°æ¥çœ‹ä¸€ä¸‹åŸºäº Reactive Streams å®ç°åæ•ˆæœå¦‚ä½•ã€‚è¿™é‡ŒåŸºæœ¬æ˜¯æ ¹æ®ä¼ªä»£ç èµ°çš„ã€‚</p>
<p>ä¾‹å­ï¼šåœ¨ç”¨æˆ·çš„ UI é¡µé¢ä¸Šï¼Œå±•ç¤ºå½“å‰ç”¨æˆ·æœ€å–œæ¬¢çš„ Top5 çš„å•†å“è¯¦æƒ…ã€‚è¿™é‡Œä¼šæ ¹æ®ç”¨æˆ·çš„ ID å»æŸ¥è¯¢å½“å‰ç”¨æˆ· Top5 å•†å“çš„IDï¼Œå¦‚æœ ID å¯ä»¥æŸ¥è¯¢åˆ°ä¹‹åå†æ ¹æ®å•†å“çš„ ID å»æŸ¥è¯¢å•†å“çš„è¯¦æƒ…ã€‚å¦‚æœå½“å‰ç”¨æˆ· ID æŸ¥è¯¢çš„ç»“æœä¸å­˜åœ¨å–œæ¬¢çš„ Top å•†å“ï¼Œæ²¡æœ‰çš„è¯ï¼Œé€šè¿‡æ¨èæœåŠ¡æŸ¥è¯¢ Top5 çš„å•†å“ä¿¡æ¯ã€‚å±•ç¤ºç»™ç”¨æˆ·ã€‚</p>
<p>å½“å‰ä¾‹å­éœ€è¦ä¸‰ä¸ªæœåŠ¡çš„æ”¯æ’‘ï¼š</p>
<ul>
<li>æ ¹æ®ç”¨æˆ· ID æŸ¥è¯¢ç”¨æˆ·çš„ Top5 å•†å“IDã€‚</li>
<li>æ ¹æ® Top5 å•†å“IDæŸ¥è¯¢å•†å“è¯¦æƒ…ã€‚</li>
<li>è°ƒç”¨æ¨èæœåŠ¡ï¼Œè·å–5ä¸ªå•†å“è¯¦æƒ…ã€‚</li>
</ul>
<p>åŸºäº Java æœ€åŸç”Ÿçš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼Œå®ç°ä¸Šè¿°æ“ä½œï¼Œæ¥çœ‹çœ‹åˆ°åº•ä»€ä¹ˆæ˜¯å›è°ƒåœ°ç‹±ã€‚ã€‚ã€‚</p>
<p>å•†å“è¯¦æƒ…å®ä½“ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Fav</span> {

    <span class="hljs-keyword">private</span> String itemId;

    <span class="hljs-keyword">private</span> String itemName;

    <span class="hljs-keyword">private</span> String itemDetail;

}
</code></pre>
<p>å‡†å¤‡å›è°ƒæ–¹æ³•ï¼Œæ‹¿åˆ°ç»“æœåè§¦å‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Callback</span>&lt;T&gt; {

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(T t)</span>;

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span>;

}
</code></pre>
<p>å‡†å¤‡äº†è®¿é—®ä¸‰ä¸ªæœåŠ¡çš„ Service æ¥å£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-comment">/**
     * æ ¹æ®ç”¨æˆ·IdæŸ¥è¯¢ç”¨æˆ·çš„Top5å•†å“Id
     * <span class="hljs-doctag">@param</span> userId
     * <span class="hljs-doctag">@param</span> list
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">getFav</span><span class="hljs-params">(String userId, Callback&lt;List&lt;String&gt;&gt; list)</span>;

}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemService</span> {
    
    <span class="hljs-comment">/**
     * æ ¹æ®å•†å“IdæŸ¥è¯¢å•†å“çš„è¯¦æƒ…
     *
     * <span class="hljs-doctag">@param</span> itemId
     * <span class="hljs-doctag">@param</span> callback
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">getDetail</span><span class="hljs-params">(String itemId, Callback&lt;Fav&gt; callback)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SuggestionService</span> {

    <span class="hljs-comment">/**
     * è°ƒç”¨æ¨èæœåŠ¡ï¼Œè·å–æ¨èå•†å“
     * <span class="hljs-doctag">@param</span> favs
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">getSuggestion</span><span class="hljs-params">(Callback&lt;List&lt;Fav&gt;&gt; favs)</span>;
}
</code></pre>
<p>å‡†å¤‡äº†å“åº”æ•°æ®çš„ UI çº¿ç¨‹å·¥å…·ä»¥åŠå“åº”æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UiUtils</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">submitOnUiThread</span><span class="hljs-params">(Runnable runnable)</span>{
        <span class="hljs-comment">// çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹åšå“åº”çš„æ“ä½œâ€¦â€¦â€¦â€¦â€¦â€¦</span>
    }


    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(Object obj)</span>{
        <span class="hljs-comment">// åˆ©ç”¨UIçº¿ç¨‹å±•ç¤ºå…·ä½“æ•°æ®</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">error</span><span class="hljs-params">(Object obj)</span>{
        <span class="hljs-comment">// å‡ºç°é”™è¯¯å“åº”çš„å†…å®¹</span>
    }

}
</code></pre>
<p>å®Œæˆäº† Controller ä¸­çš„å¼‚æ­¥ç¼–ç¨‹æ•ˆæœ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CallBackHellController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ItemService itemService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SuggestionService suggestionService;


    <span class="hljs-meta">@GetMapping("/callbackhell")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callbackHell</span><span class="hljs-params">(String userId)</span>{
        <span class="hljs-comment">//1ã€è°ƒç”¨ç”¨æˆ·æœåŠ¡ï¼ŒæŸ¥è¯¢Top5å•†å“Id</span>
        userService.getFav(userId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;List&lt;String&gt;&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(List&lt;String&gt; list)</span> {
                <span class="hljs-comment">// å·²ç»æŸ¥è¯¢åˆ°å•†å“Idï¼Œä½†æ˜¯ä¸çŸ¥é“æ˜¯å¦æœ‰å€¼</span>
                <span class="hljs-keyword">if</span> (list.isEmpty()){
                    <span class="hljs-comment">// 3ã€ç”¨æˆ·æ²¡æœ‰Top5å•†å“Idï¼Œé€šè¿‡æ¨èæœåŠ¡æŸ¥è¯¢æ¨èå•†å“è¯¦æƒ…</span>
                    suggestionService.getSuggestion(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;List&lt;Fav&gt;&gt;(){
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(List&lt;Fav&gt; favs)</span> {
                            <span class="hljs-comment">// æ¨èæœåŠ¡æŸ¥è¯¢åˆ°äº†å•†å“è¯¦æƒ…ï¼Œå“åº”å³å¯</span>
                            UiUtils.submitOnUiThread(() -&gt; {
                                favs.stream().limit(<span class="hljs-number">5</span>).forEach(UiUtils::show);
                            });
                        }
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
                            UiUtils.error(throwable);
                        }
                    });

                }
                <span class="hljs-keyword">else</span>{
                    <span class="hljs-comment">// 2ã€é€šè¿‡ç”¨æˆ·æŸ¥è¯¢åˆ°äº†Top5å•†å“Idï¼Œé€šè¿‡å•†å“IdæŸ¥è¯¢å•†å“è¯¦æƒ…</span>
                    list.stream().limit(<span class="hljs-number">5</span>).forEach(itemId -&gt; itemService.getDetail(itemId,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;Fav&gt;(){

                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(Fav fav)</span> {
                            <span class="hljs-comment">// æŸ¥è¯¢åˆ°äº†å•†å“è¯¦æƒ…ï¼Œåˆ©ç”¨UIçº¿ç¨‹ï¼Œç»™å®¢æˆ·ç«¯å“åº”æ•°æ®</span>
                            UiUtils.submitOnUiThread(() -&gt; UiUtils.show(fav));
                        }

                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
                            <span class="hljs-comment">// å‡ºç°å¼‚å¸¸äº†ã€‚</span>
                            UiUtils.error(throwable);
                        }
                    }));
                }
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
                <span class="hljs-comment">// å‡ºç°å¼‚å¸¸äº†ã€‚</span>
                UiUtils.error(throwable);
            }
        });


    }

}
</code></pre>
<h3 data-id="heading-6">è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜</h3>
<p>è¿™é‡Œä¸ºäº†è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜ï¼Œéœ€è¦ä¸€ä¸ª Reactor çš„ä¾èµ–æ¥å¸®åŠ©å’±ä»¬å®ç°å¼‚æ­¥ç¼–ç¨‹ã€‚</p>
<p>éœ€è¦å¯¼å…¥ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--reactorçš„æ ¸å¿ƒä¾èµ–--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.projectreactor<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>reactor-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ä¸èƒ½å†ä½¿ç”¨ä¹‹å‰çš„ Callback æ–¹å¼äº†ã€‚éœ€è¦ä½¿ç”¨ reactor æä¾›çš„ Fluxï¼Œå¹¶ä¸”è¿™ç§é“¾å¼æ“ä½œä¼šæ›´ç›´è§‚ï¼Œä¹Ÿæ›´å¥½ç»´æŠ¤ã€‚å°±åªéœ€è¦ä¿®æ”¹ä¸‰ä¸ªæœåŠ¡å¯¹åº”çš„ Serviceã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-comment">/**
     * æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢Top5å•†å“ID
     * <span class="hljs-doctag">@param</span> userId
     * <span class="hljs-doctag">@return</span>
     */</span>
    Flux&lt;List&lt;String&gt;&gt; <span class="hljs-title function_">getFav</span><span class="hljs-params">(String userId)</span>;

}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemService</span> {


    <span class="hljs-comment">/**
     * æ ¹æ®å•†å“IDæŸ¥è¯¢å•†å“è¯¦æƒ…
     * <span class="hljs-doctag">@param</span> itemId
     * <span class="hljs-doctag">@return</span>
     */</span>
    Flux&lt;Fav&gt; <span class="hljs-title function_">getDetail</span><span class="hljs-params">(String itemId)</span>;

}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SuggestionService</span> {

    <span class="hljs-comment">/**
     * è·å–æ¨èçš„å•†å“è¯¦æƒ…
     * <span class="hljs-doctag">@return</span>
     */</span>
    Flux&lt;List&lt;Fav&gt;&gt; <span class="hljs-title function_">getSuggestion</span><span class="hljs-params">()</span>;

}
</code></pre>
<p>ç„¶åå°±å¯ä»¥åˆ©ç”¨ Flux æä¾›çš„ API æ¥è§£å†³ä¹‹å‰å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactorCallbackController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ItemService itemService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SuggestionService suggestionService;


    <span class="hljs-meta">@GetMapping("reactorcallback")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reactorCallback</span><span class="hljs-params">(String userId)</span>{
        userService
                .getFav(userId)   <span class="hljs-comment">// æ ¹æ®ç”¨æˆ·IdæŸ¥è¯¢Top5å•†å“Id</span>
                .flatMap(itemService::getDetail)  <span class="hljs-comment">// æ ¹æ®å•†å“IDæŸ¥è¯¢å•†å“è¯¦æƒ…</span>
                .switchIfEmpty(suggestionService.getSuggestion())  <span class="hljs-comment">// å¦‚æœå‰é¢ä¸ºnullï¼Œè¿™é‡Œé€šè¿‡æ¨èæœåŠ¡æŸ¥è¯¢å•†å“è¯¦æƒ…</span>
                .take(<span class="hljs-number">5</span>)    <span class="hljs-comment">// è·å–å‰5ä¸ªæ•°æ®</span>
                .publishOn(UiUtils.reactorOnUiThread())    <span class="hljs-comment">// ä½¿ç”¨Uiçº¿ç¨‹</span>
                .subscribe(UiUtils::show,UiUtils::error);   <span class="hljs-comment">// æˆåŠŸèµ°showï¼Œå¤±è´¥èµ°error</span>
    }

}
</code></pre>
<h3 data-id="heading-7">CompletableFuture çš„å¼‚æ­¥ç¼–ç¨‹</h3>
<p>Future çš„å½¢å¼ç›¸æ¯” Callback Hell æ•ˆæœè¦å¥½ä¸€äº›ï¼Œè™½ç„¶ JDK8 å’Œ 9 éƒ½å¯¹ CompletableFuture åšäº†å„ç§ä¼˜åŒ–ï¼Œä½†æ˜¯ä»–çš„è¡¨ç°è¿˜æ˜¯ä¸å¤ªå¥½ã€‚å¤šä¸ªFutureåœ¨åµŒå¥—æ—¶ï¼Œå¯è¯»æ€§è¿˜æ˜¯æ¯”è¾ƒå·®çš„ã€‚å¹¶ä¸” CompletableFuture ä¸å­˜åœ¨ä»€ä¹ˆå›å‹ï¼Œæˆ–è€…æ˜¯å»¶è¿Ÿè°ƒç”¨çš„åŠŸèƒ½ã€‚</p>
<p>ç°åœ¨å€ŸåŠ© CompletableFuture æ¥å®ç°ä¸€ä¸ªåœºæ™¯ã€‚</p>
<ol>
<li>è·å–ä¸€ä¸ªç”¨æˆ·IDçš„åˆ—è¡¨ã€‚</li>
<li>é€šè¿‡ç”¨æˆ·IDåˆ†åˆ«è·å–ä»–çš„åå­—ä»¥åŠç»Ÿè®¡ä¿¡æ¯ã€‚ï¼ˆå¸Œæœ›è¿™ä¸¤ä¸ªæ“ä½œæ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼‰</li>
<li>å½“ä¸¤ä¸ªä¿¡æ¯éƒ½è·å–åˆ°ä¹‹åï¼Œå°è£…æˆä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²å³å¯ã€‚</li>
<li>å“åº”æ•°æ®ï¼Œæœ€åæ‹¿åˆ°ç»“æœï¼ˆè¾“å‡ºä¸€ä¸‹ï¼‰ã€‚</li>
</ol>
<p>å®ç°ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetNameAndStatTestByCF</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1ã€è·å–ä¸€ç»„ç”¨æˆ·IDåˆ—è¡¨</span>
        CompletableFuture&lt;List&lt;String&gt;&gt; idList = getID();
        CompletableFuture&lt;List&lt;String&gt;&gt; dataCompletableFuture = idList.thenComposeAsync(ids -&gt; {
            Stream&lt;CompletableFuture&lt;String&gt;&gt; resultStream = ids.stream().map(id -&gt; {
                <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢åç§°ä¿¡æ¯</span>
                CompletableFuture&lt;String&gt; nameTask = getName();
                <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯</span>
                CompletableFuture&lt;Integer&gt; statTask = getStat();
                <span class="hljs-comment">// è®©ä¸¤ä¸ªæŸ¥è¯¢åç§°ä¿¡æ¯å’ŒæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯æ“ä½œå¹¶è¡Œæ‰§è¡Œ</span>
                <span class="hljs-keyword">return</span> nameTask.thenCombineAsync(statTask, (name, stat) -&gt; {
                    <span class="hljs-comment">// 3ã€æ‹¿åˆ°ä¿¡æ¯ç»„è£…</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-string">"Nameï¼š"</span> + name + <span class="hljs-string">"ï¼ŒStatï¼š"</span> + stat;
                });
            });
            <span class="hljs-comment">// å°†resultStreamè½¬æ¢æˆä¸€ä¸ªæ•°ç»„</span>
            List&lt;CompletableFuture&lt;String&gt;&gt; resultList = resultStream.toList();
            <span class="hljs-comment">// å…¨éƒ¨çš„ä»»åŠ¡å°è£…èµ·æ¥</span>
            CompletableFuture&lt;Void&gt; allDone = CompletableFuture.allOf(resultList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>[]{}));
            <span class="hljs-comment">// æ‰§è¡Œå…¨éƒ¨ä»»åŠ¡</span>
            <span class="hljs-keyword">return</span> allDone.thenApplyAsync(v -&gt; resultList.stream()
                    .map(CompletableFuture::join)
                    .collect(Collectors.toList()));
        });

        <span class="hljs-comment">// 4ã€è·å–å…¨éƒ¨çš„ç»„ä»¶ä¿¡æ¯åå“åº”å®¢æˆ·ç«¯ï¼ˆè¾“å‡ºï¼‰</span>
        List&lt;String&gt; data = dataCompletableFuture.join();
        System.out.println(data);
    }

    <span class="hljs-comment">// æ¨¡æ‹ŸzzæœåŠ¡è·å–ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;Integer&gt; <span class="hljs-title function_">getStat</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; <span class="hljs-number">666</span>);
    }

    <span class="hljs-comment">// æ¨¡æ‹ŸyyæœåŠ¡è·å–åç§°ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; <span class="hljs-string">"å¼ ä¸‰"</span>);
    }

    <span class="hljs-comment">// æ¨¡æ‹ŸxxæœåŠ¡ï¼Œè·å–ä¸€ç»„ç”¨æˆ·ID</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;List&lt;String&gt;&gt; <span class="hljs-title function_">getID</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹ŸæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡</span>
            List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            list.add(<span class="hljs-string">"1"</span>);
            list.add(<span class="hljs-string">"2"</span>);
            list.add(<span class="hljs-string">"3"</span>);
            <span class="hljs-keyword">return</span> list;
        });
    }

}
</code></pre>
<h3 data-id="heading-8">è§£å†³ CompletableFuture çš„é—®é¢˜</h3>
<p>CompletableFuture å¯ä»¥å®ç°ä¸€äº›ç®€å•çš„å¼‚æ­¥ç¼–ç¨‹ï¼Œä½†æ˜¯å¯çœ‹æ€§å’Œç»´æŠ¤æ€§ä»¥ååæœŸçš„æ‰©å±•éƒ½éœ€è¦å¯¹æ•´ä½“ä»£ç åšæ¯”è¾ƒå¤§æˆæœ¬çš„ç»´æŠ¤ã€‚ä¾ç„¶é‡‡ç”¨ Reactor æ¥å®ç°ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„é€»è¾‘ï¼Œå†çœ‹ä»£ç æ•ˆæœã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetNameAndStatByReactor</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1ã€è·å–ä¸€ç»„ç”¨æˆ·IDåˆ—è¡¨</span>
        Flux&lt;String&gt; idFlux = getId();

        Flux&lt;String&gt; result = idFlux.flatMap(id -&gt; {
            <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢åç§°ä¿¡æ¯</span>
            Flux&lt;String&gt; nameFlux = getName(id);
            <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯</span>
            Flux&lt;Integer&gt; statFlux = getStat(id);
            <span class="hljs-comment">// ä¿©ä»»åŠ¡å¹¶è¡Œå¤„ç†å®Œæ¯•ï¼Œè§¦å‘3</span>
            <span class="hljs-keyword">return</span> nameFlux.zipWith(statFlux, (name, stat) -&gt; {
                <span class="hljs-comment">// 3ã€æ‹¿åˆ°ä¿¡æ¯ç»„è£…</span>
                <span class="hljs-keyword">return</span> <span class="hljs-string">"Nameï¼š"</span> + name + <span class="hljs-string">"ï¼ŒStatï¼š"</span> + stat;
            });
        });
        Mono&lt;List&lt;String&gt;&gt; listMono = result.collectList();
        List&lt;String&gt; info = listMono.block();
        <span class="hljs-comment">// 4ã€è·å–å…¨éƒ¨çš„ç»„ä»¶ä¿¡æ¯åå“åº”å®¢æˆ·ç«¯ï¼ˆè¾“å‡ºï¼‰</span>
        System.out.println(info);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Flux&lt;Integer&gt; <span class="hljs-title function_">getStat</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-comment">// ä¼šæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡ï¼Œç„¶åå°è£…ç»“æœ</span>
        <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-number">888</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Flux&lt;String&gt; <span class="hljs-title function_">getName</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-comment">// ä¼šæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡ï¼Œç„¶åå°è£…ç»“æœ</span>
        <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-string">"å¼ ä¸‰"</span>);
    }


    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Flux&lt;String&gt; <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä¼šæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡ï¼Œç„¶åå°è£…ç»“æœ</span>
        <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-string">"1"</span>,<span class="hljs-string">"2"</span>,<span class="hljs-string">"3"</span>);
    }
}
</code></pre>
<h2 data-id="heading-9">RxJava2 å®ç°å¼‚æ­¥ç¼–ç¨‹</h2>
<p>RxJava æ˜¯ä¸€ä¸ªå°æ¡†æ¶ï¼Œæˆ–è€…æ˜¯ä¾èµ–åº“ã€‚åœ¨ RxJava çš„1.xç‰ˆæœ¬ä¸­ï¼Œå®ƒå¹¶ä¸åŸºäº Reactive Streams å»å®ç°çš„ã€‚æ²¡æœ‰å…³ç³»ï¼Œå› ä¸º RxJava çš„ 2 ç‰ˆæœ¬ï¼Œå°±æ˜¯åŸºäºReactive Streams å®ç°çš„äº†ã€‚</p>
<p>ä½¿ç”¨ RxJava å·¨ç®€å•ï¼Œå› ä¸ºä½œè€…æƒ³å°† RxJava å°½é‡åšåˆ°è½»é‡çº§ï¼Œå°±ä¸€ä¸ªä¾èµ–ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--RxJava2çš„ä¾èµ–--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.reactivex.rxjava2<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>rxjava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.21<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">RxJava2 çš„å…¥é—¨æ“ä½œ</h3>
<p>è·å–ä¸€ä¸ª Person å¯¹è±¡çš„é›†åˆï¼Œå°† Person é›†åˆä¸­çš„æ‰€æœ‰å¹´é¾„å¤§äº10å²çš„ Person å¯¹è±¡ç­›é€‰å‡ºæ¥ï¼Œå¹¶è¾“å‡ºä»–çš„åå­—ã€‚</p>
<p>é‡‡ç”¨ RxJava æ¥å®ç°ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//1ã€è·å–Personå¯¹è±¡é›†åˆ</span>
        List&lt;Person&gt; personList = getPersonList();

        <span class="hljs-comment">//2ã€å®Œæˆä¸Šé¢è¦æ±‚çš„æ“ä½œ</span>
        <span class="hljs-comment">//2.1ã€å°†personé›†åˆè½¬æ¢ä¸ºRxJavaçš„æµ</span>
        Flowable.fromArray(personList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>[]{}))
                <span class="hljs-comment">//2.2 è¿‡æ»¤å¹´é¾„å¤§äº10å²çš„</span>
                .filter(person -&gt; person.getAge() &gt; <span class="hljs-number">10</span>)
                <span class="hljs-comment">//2.3 è·å–ç­›é€‰åçš„Personåç§°</span>
                .map(person -&gt; person.getName())
                <span class="hljs-comment">//2.4 è¾“å‡ºName</span>
                .subscribe(System.out::println);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Person&gt; <span class="hljs-title function_">getPersonList</span><span class="hljs-params">()</span> {
        List&lt;Person&gt; personList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å¤§å¨ƒ"</span>,<span class="hljs-number">5</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"äºŒå¨ƒ"</span>,<span class="hljs-number">7</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"ä¸‰å¨ƒ"</span>,<span class="hljs-number">9</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å››å¨ƒ"</span>,<span class="hljs-number">11</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"äº”å¨ƒ"</span>,<span class="hljs-number">13</span>));
        <span class="hljs-keyword">return</span> personList;
    }
}
</code></pre>
<h3 data-id="heading-11">RxJava2 çš„åŸºç¡€å¤„ç†æµç¨‹</h3>
<p>åœ¨ RxJava ä¸­æœ‰ä¸‰ä¸ªæ ¸å¿ƒçš„è§’è‰²</p>
<ul>
<li>è¢«è§‚å¯Ÿè€…ï¼ˆObservableï¼‰</li>
<li>è§‚å¯Ÿè€…ï¼ˆObserverï¼‰</li>
<li>è®¢é˜…ï¼ˆSubscribeï¼‰</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo2</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//1ã€æ„å»ºObservable</span>
        Observable&lt;String&gt; observable = Observable.create(emitter -&gt; {
            emitter.onNext(<span class="hljs-string">"Hello"</span>);
            emitter.onNext(<span class="hljs-string">"World"</span>);
            emitter.onComplete();
        });

        <span class="hljs-comment">//2ã€æ„å»ºObserver</span>
        Observer&lt;String&gt; observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>&lt;&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(Disposable d)</span> {
                System.out.println(<span class="hljs-string">"å¼€å§‹è®¢é˜…"</span>);
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(String s)</span> {
                System.out.println(<span class="hljs-string">"è§‚å¯Ÿè€…ï¼š"</span> + s);
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable e)</span> {
                e.printStackTrace();
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"è®¢é˜…ç»“æŸ"</span>);
            }
        };

        <span class="hljs-comment">//3ã€è®¢é˜…</span>
        observable.subscribe(observer);
    }

}
</code></pre>
<h3 data-id="heading-12">åˆ›å»ºæ“ä½œç¬¦</h3>
<h4 data-id="heading-13">create</h4>
<p>Observable.create() æ˜¯æ‰‹åŠ¨åˆ›å»º Observable çš„æ–¹æ³•ï¼Œå…è®¸å®Œå…¨æ§åˆ¶æ•°æ®çš„å‘å°„ã€å®Œæˆå’Œé”™è¯¯å¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java">Observable&lt;String&gt; observable = Observable.create(emitter -&gt; {
    emitter.onNext(<span class="hljs-string">"Hello"</span>);
    emitter.onNext(<span class="hljs-string">"World"</span>);
    emitter.onComplete();
});

observable.subscribe(
    item -&gt; System.out.println(<span class="hljs-string">"æ”¶åˆ°: "</span> + item),
    error -&gt; System.err.println(<span class="hljs-string">"é”™è¯¯: "</span> + error),
    () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
);

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ”¶åˆ°: Hello</span>
<span class="hljs-comment">// æ”¶åˆ°: World</span>
<span class="hljs-comment">// å®Œæˆ</span>
</code></pre>
<h4 data-id="heading-14">just</h4>
<p>just ç”¨äºåˆ›å»ºä¸€ä¸ªå‘å°„å›ºå®šæ•°æ®çš„ Observableï¼Œæ•°æ®æ˜¯é¢„å®šä¹‰çš„ï¼Œå‘å°„åç«‹å³å®Œæˆã€‚</p>
<pre><code class="hljs language-java" lang="java">Observable.just(<span class="hljs-string">"Hello"</span>)
    .subscribe(item -&gt; 
        System.out.println(<span class="hljs-string">"æ”¶åˆ°: "</span> + item)
    );

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ”¶åˆ°: Hello</span>
</code></pre>
<h4 data-id="heading-15">fromArray</h4>
<p>fromArray ç”¨äºä»æ•°ç»„åˆ›å»ºä¸€ä¸ª Observableï¼ŒæŒ‰æ•°ç»„é¡ºåºå‘å°„æ‰€æœ‰å…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">String[] fruits = {<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Banana"</span>, <span class="hljs-string">"Cherry"</span>, <span class="hljs-string">"Date"</span>};
Observable.fromArray(fruits)
    .subscribe(fruit -&gt; 
        System.out.print(fruit + <span class="hljs-string">" "</span>)
    );

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// Apple Banana Cherry Date</span>
</code></pre>
<h4 data-id="heading-16">fromCallable</h4>
<p>fromCallable ç”¨äºä» Callable åˆ›å»º Observableï¼ŒCallable çš„è¿”å›å€¼ä¼šè¢«åŒ…è£…æˆ Observable å‘å°„ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.fromCallable(() -&gt; <span class="hljs-string">"è®¡ç®—ç»“æœ: "</span> + System.currentTimeMillis())
                .subscribe(System.out::println);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// è®¡ç®—ç»“æœ: 1620000000000</span>
    }
</code></pre>
<h4 data-id="heading-17">timer</h4>
<p>timer ç”¨äºåˆ›å»ºä¸€ä¸ªå»¶è¿ŸæŒ‡å®šæ—¶é—´åå‘å°„å•ä¸ªæ•°æ®çš„ Observableï¼Œé€šå¸¸æ˜¯ 0Lï¼Œç„¶åç»“æŸã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        System.out.println(<span class="hljs-string">"å¼€å§‹æ—¶é—´: "</span> + System.currentTimeMillis());

        Observable.timer(<span class="hljs-number">2</span>, TimeUnit.SECONDS)
                .subscribe(tick -&gt;
                        System.out.println(<span class="hljs-string">"è§¦å‘æ—¶é—´: "</span> + System.currentTimeMillis() + <span class="hljs-string">"ï¼Œå€¼: "</span> + tick)
                );

        Thread.sleep(<span class="hljs-number">3000</span>);
    }
</code></pre>
<p>é»˜è®¤ä½¿ç”¨ <code>Schedulers.computation()</code>çº¿ç¨‹æ± è®¡ç®—ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œå¦‚æœä¸»çº¿ç¨‹ç»“æŸå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šéšä¹‹ç»ˆæ­¢ã€‚</p>
<h4 data-id="heading-18">interval</h4>
<p>interval() æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ª å‘¨æœŸæ€§å®šæ—¶å‘å°„çš„ Observableï¼Œå®ƒä¼šæŒ‰ç…§æŒ‡å®šçš„æ—¶é—´é—´éš”æ— é™æœŸåœ°å‘å°„é€’å¢çš„æ•°å­—åºåˆ—ï¼ˆä»0å¼€å§‹ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.interval(<span class="hljs-number">2</span>, TimeUnit.SECONDS)
                .subscribe(aLong -&gt; System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼š"</span> + aLong));

        System.in.read();
    }
</code></pre>
<h4 data-id="heading-19">intervalRange</h4>
<p>intervalRange() æ˜¯ interval() çš„å¢å¼ºç‰ˆæœ¬ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæœ‰é™æ¬¡æ•°çš„å‘¨æœŸæ€§å‘å°„çš„ Observableã€‚å®ƒå…è®¸ä½ æŒ‡å®šèµ·å§‹å€¼ã€å‘å°„æ¬¡æ•°ã€åˆå§‹å»¶è¿Ÿå’Œé—´éš”æ—¶é—´ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.intervalRange(<span class="hljs-number">100</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, TimeUnit.SECONDS)
                .subscribe(aLong -&gt; System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼š"</span> + aLong));
        System.in.read();
    }
</code></pre>
<h4 data-id="heading-20">range &amp; rangeLong</h4>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªå‘å°„è¿ç»­æ•´æ•°åºåˆ—çš„ Observableï¼š</p>
<ul>
<li><code>range(start, count)</code>ï¼šå‘å°„ Integer ç±»å‹çš„è¿ç»­æ•´æ•°ã€‚</li>
<li><code>rangeLong(start, count)</code>ï¼šå‘å°„ Long ç±»å‹çš„è¿ç»­æ•´æ•°ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.range(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)
                .subscribe(integer -&gt; System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼š"</span> + integer));
        System.in.read();
    }
</code></pre>
<h4 data-id="heading-21">neverã€errorã€empty</h4>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯åˆ›å»ºç‰¹æ®Šçš„ Observable çš„å·¥å‚æ–¹æ³•ï¼Œç”¨äºç‰¹å®šçš„åœºæ™¯ã€‚</p>
<ul>
<li>neverï¼šåˆ›å»ºä¸€ä¸ªæ°¸è¿œä¸ä¼šå‘å°„ä»»ä½•æ•°æ®ï¼Œä¹Ÿä¸ä¼šç»ˆæ­¢çš„ Observableã€‚</li>
<li>errorï¼šåˆ›å»ºä¸€ä¸ªç«‹å³å‘å°„é”™è¯¯çš„ Observableã€‚</li>
<li>emptyï¼šåˆ›å»ºä¸€ä¸ªç«‹å³å®Œæˆä½†ä¸å‘å°„ä»»ä½•æ•°æ®çš„ Observableã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// Observable.never()</span>
        <span class="hljs-comment">// Observable.error(new RuntimeException("erroräº‹ä»¶"))</span>
        Observable.empty()
                .subscribe(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(Disposable d)</span> {
                        System.out.println(<span class="hljs-string">"å¼€å§‹è®¢é˜…"</span>);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(Object s)</span> {
                        System.out.println(<span class="hljs-string">"è§‚å¯Ÿè€…ï¼š"</span> + s);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable e)</span> {
                        System.out.println(<span class="hljs-string">"å‡ºç°å¼‚å¸¸ï¼š"</span> + e.getMessage());
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">()</span> {
                        System.out.println(<span class="hljs-string">"è®¢é˜…ç»“æŸ"</span>);
                    }
                });
    }
</code></pre>
<h3 data-id="heading-22">è½¬æ¢æ“ä½œç¬¦</h3>
<p>è½¬æ¢æ“ä½œç¬¦æ˜¯ RxJava ä¸­ç”¨äºå¯¹ Observable å‘å°„çš„æ•°æ®è¿›è¡Œå˜æ¢ã€å¤„ç†ã€ç»„åˆçš„æ“ä½œç¬¦ï¼Œç”¨äºå®ç°æ•°æ®æµçš„å„ç§è½¬æ¢é€»è¾‘ã€‚</p>
<h4 data-id="heading-23">map</h4>
<p>map() æ˜¯ RxJava ä¸­æœ€åŸºæœ¬ã€æœ€å¸¸ç”¨çš„è½¬æ¢æ“ä½œç¬¦ï¼Œç”¨äºå¯¹ Observable å‘å°„çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å¯¹ä¸€è½¬æ¢ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼šè¾“å…¥ä¸€ä¸ªå€¼ï¼Œè¾“å‡ºå¦ä¸€ä¸ªå€¼ï¼ˆ1è¿›1å‡ºï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
                .map(number -&gt; <span class="hljs-string">"æ•°å­—: "</span> + number)
                .subscribe(text -&gt; System.out.println(text));
    }
</code></pre>
<h4 data-id="heading-24">flatMap</h4>
<p>flatMap() ç”¨äºå°†æ¯ä¸ªå‘å°„é¡¹è½¬æ¢ä¸º Observableï¼Œç„¶å"æ‰å¹³åŒ–"åˆå¹¶æˆä¸€ä¸ª Observableã€‚
ç®€å•æ¥è¯´ï¼šè¾“å…¥ä¸€ä¸ªå€¼ï¼Œå¯ä»¥è¾“å‡ºä»»æ„å¤šä¸ªå€¼ï¼ˆ1è¿›Nå‡ºï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .map(letter -&gt; letter + <span class="hljs-string">"1"</span>)
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));
        <span class="hljs-comment">// è¾“å‡º: A1 B1</span>

        <span class="hljs-comment">// flatMap: 1å¯¹å¤šè½¬æ¢</span>
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .flatMap(letter -&gt;
                        Observable.just(letter + <span class="hljs-string">"1"</span>, letter + <span class="hljs-string">"2"</span>, letter + <span class="hljs-string">"3"</span>)
                )
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));
        <span class="hljs-comment">// è¾“å‡º: A1 A2 A3 B1 B2 B3</span>
    }
</code></pre>
<h4 data-id="heading-25">concatMap</h4>
<p>concatMap() æ˜¯ flatMap() çš„é¡ºåºä¿æŒç‰ˆæœ¬ï¼Œå®ƒä¼šä¸¥æ ¼æŒ‰ç…§åŸå§‹é¡ºåºä¾æ¬¡å¤„ç†æ¯ä¸ªå…ƒç´ ï¼Œåªæœ‰å‰ä¸€ä¸ªå…ƒç´ çš„ Observable å®Œæˆä¹‹åï¼Œæ‰ä¼šå¤„ç†ä¸‹ä¸€ä¸ªã€‚
ç®€å•æ¥è¯´ï¼šflatMapæ˜¯å¹¶å‘å¤„ç†ï¼ŒconcatMapæ˜¯ä¸²è¡Œå¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.just(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment">// æ³¨æ„é¡ºåºï¼š3, 1, 2</span>
                .flatMap(num -&gt;
                        Observable.just(num)
                                .delay(num, TimeUnit.SECONDS)  <span class="hljs-comment">// å»¶è¿Ÿå¯¹åº”çš„ç§’æ•°</span>
                )
                .subscribe(num -&gt; System.out.println(<span class="hljs-string">"flatMap: "</span> + num));
        <span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š1 2 3ï¼ˆè°å…ˆå®Œæˆè°å…ˆè¾“å‡ºï¼‰</span>

        Observable.just(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
                .concatMap(num -&gt;
                        Observable.just(num)
                                .delay(num, TimeUnit.SECONDS)
                )
                .subscribe(num -&gt; System.out.println(<span class="hljs-string">"concatMap: "</span> + num));
        <span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š3 1 2ï¼ˆä¸¥æ ¼ä¿æŒåŸå§‹é¡ºåºï¼‰</span>
        System.in.read();
    }
</code></pre>
<h4 data-id="heading-26">buffer</h4>
<p>buffer() ç”¨äºå°† Observable å‘å°„çš„æ•°æ®é¡¹æ”¶é›†åˆ°é›†åˆä¸­ï¼Œç„¶åä¸€æ¬¡æ€§å‘å°„è¿™äº›é›†åˆï¼Œè€Œä¸æ˜¯å•ä¸ªå‘å°„ã€‚
ç®€å•æ¥è¯´ï¼šæŠŠå¤šä¸ªå•ç‹¬çš„æ•°æ®"æ‰“åŒ…"æˆä¸€æ‰¹ä¸€èµ·å‘å°„ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// å‘å°„1-10</span>
                .buffer(<span class="hljs-number">3</span>)           <span class="hljs-comment">// æ¯3ä¸ªä¸€æ‰¹</span>
                .subscribe(batch -&gt;
                        System.out.println(<span class="hljs-string">"æ‰¹æ¬¡: "</span> + batch)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [1, 2, 3]</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [2, 4, 6]</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [7, 8, 9]</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [10]           â† æœ€åä¸€æ‰¹ä¸è¶³3ä¸ª</span>
    }
</code></pre>
<h4 data-id="heading-27">scan</h4>
<p>scan() ç”¨äºå¯¹ Observable å‘å°„çš„æ•°æ®è¿›è¡Œç´¯ç§¯è®¡ç®—ï¼Œå¹¶å‘å°„æ¯ä¸ªä¸­é—´ç»“æœã€‚
ç®€å•æ¥è¯´ï¼šåƒ Excel é‡Œçš„ç´¯è®¡æ±‚å’Œï¼Œæ¯æ¥ä¸€ä¸ªæ–°æ•°æ®ï¼Œå°±ä¸å‰ä¸€ä¸ªç»“æœè®¡ç®—ï¼Œå¹¶è¾“å‡ºå½“å‰ç´¯è®¡å€¼ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
                .scan(Integer::sum)
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 3 6 10 15</span>

        <span class="hljs-comment">// è®¡ç®—è¿‡ç¨‹ï¼š</span>
        <span class="hljs-comment">// åˆå§‹ï¼šæ— ç§å­å€¼ï¼Œç¬¬ä¸€æ¬¡ç›´æ¥å‘å°„1</span>
        <span class="hljs-comment">// 1 + 2 = 3</span>
        <span class="hljs-comment">// 3 + 3 = 6</span>
        <span class="hljs-comment">// 6 + 4 = 10</span>
        <span class="hljs-comment">// 10 + 5 = 15</span>
    }
</code></pre>
<h4 data-id="heading-28">window</h4>
<p>window() ç”¨äºå°† Observable å‘å°„çš„æ•°æ®åˆ†ç»„åˆ°å¤šä¸ªå­ Observable ä¸­ï¼Œç„¶åå‘å°„è¿™äº›å­ Observable è€Œä¸æ˜¯å•ä¸ªæ•°æ®é¡¹ã€‚
ç®€å•æ¥è¯´ï¼šåˆ›å»ºå¤šä¸ª"çª—å£"ï¼Œæ¯ä¸ªçª—å£æ˜¯ä¸€ä¸ª Observableï¼Œå°†æ•°æ®åˆ†é…åˆ°ä¸åŒçª—å£ä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// buffer: ç›´æ¥å‘å°„List</span>
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)
                .buffer(<span class="hljs-number">2</span>)
                .subscribe(list -&gt;
                        System.out.println(<span class="hljs-string">"bufferè¾“å‡ºList: "</span> + list)
                );

        <span class="hljs-comment">// window: å‘å°„Observableï¼Œéœ€è¦è¿›ä¸€æ­¥å¤„ç†</span>
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)
                .window(<span class="hljs-number">2</span>)
                .flatMapSingle(Observable::toList  <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨è½¬æ¢</span>
                )
                .subscribe(list -&gt;
                        System.out.println(<span class="hljs-string">"windowè¾“å‡ºList: "</span> + list)
                );

        <span class="hljs-comment">// ä¸¤è€…è¾“å‡ºç›¸åŒï¼Œä½†windowæ›´çµæ´»ï¼š</span>
        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// [1, 2]</span>
        <span class="hljs-comment">// [3, 4]</span>
        <span class="hljs-comment">// [5]</span>
    }
</code></pre>
<p>window å’Œ buffer çš„åŒºåˆ«å°±æ˜¯ï¼š</p>
<ul>
<li>window è¿”å›çš„æ˜¯è¢«è§‚å¯Ÿè€…çš„é›†åˆã€‚</li>
<li>buffer è¿”å›çš„æ˜¯æ•°æ®çš„é›†åˆã€‚</li>
</ul>
<h3 data-id="heading-29">è¿‡æ»¤æ“ä½œç¬¦</h3>
<p>è¿‡æ»¤æ“ä½œç¬¦ç”¨äºä»æ•°æ®æµä¸­ç­›é€‰å‡ºéœ€è¦çš„æ•°æ®ï¼Œè¿‡æ»¤æ‰ä¸éœ€è¦çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-30">filter</h4>
<p>filter() æ˜¯ RxJava ä¸­æœ€åŸºæœ¬çš„è¿‡æ»¤æ“ä½œç¬¦ï¼Œç”¨äºæ ¹æ®æŒ‡å®šæ¡ä»¶ç­›é€‰ Observable å‘å°„çš„æ•°æ®ï¼Œåªè®©æ»¡è¶³æ¡ä»¶çš„æ•°æ®é€šè¿‡ï¼Œä¸æ»¡è¶³æ¡ä»¶çš„è¢«è¿‡æ»¤æ‰ã€‚</p>
<p>å¯¹æ¯ä¸ªæ•°æ®é¡¹è¿›è¡Œåˆ¤æ–­ï¼Œè¿”å› trueåˆ™é€šè¿‡ï¼Œè¿”å› falseåˆ™ä¸¢å¼ƒã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// å‘å°„1-10</span>
                .filter(number -&gt; number % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)  <span class="hljs-comment">// åªä¿ç•™å¶æ•°</span>
                .subscribe(even -&gt; System.out.print(even + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 2 4 6 8 10</span>
    }
</code></pre>
<h4 data-id="heading-31">ofType</h4>
<p>ofType() æ˜¯ä¸€ä¸ªç±»å‹è¿‡æ»¤æ“ä½œç¬¦ï¼Œç”¨äºè¿‡æ»¤ Observable å‘å°„çš„æ•°æ®ï¼Œåªä¿ç•™æŒ‡å®šç±»å‹çš„æ•°æ®ï¼Œå…¶ä»–ç±»å‹çš„æ•°æ®ä¼šè¢«è¿‡æ»¤æ‰ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šåªè®©æŒ‡å®šç±»å‹çš„æ•°æ®é€šè¿‡ï¼Œç›¸å½“äº filter(item -&gt; item instanceof TargetType) çš„ç®€åŒ–ç‰ˆã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable&lt;Object&gt; mixedObservable = Observable.just(
                <span class="hljs-string">"Hello"</span>,      <span class="hljs-comment">// String</span>
                <span class="hljs-number">123</span>,          <span class="hljs-comment">// Integer</span>
                <span class="hljs-number">45.6</span>,         <span class="hljs-comment">// Double</span>
                <span class="hljs-string">"World"</span>,      <span class="hljs-comment">// String</span>
                <span class="hljs-literal">true</span>,         <span class="hljs-comment">// Boolean</span>
                <span class="hljs-number">789</span>           <span class="hljs-comment">// Integer</span>
        );

        <span class="hljs-comment">// åªä¿ç•™å­—ç¬¦ä¸²ç±»å‹</span>
        mixedObservable
                .ofType(String.class)
                .subscribe(str -&gt;
                        System.out.println(<span class="hljs-string">"å­—ç¬¦ä¸²: "</span> + str)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å­—ç¬¦ä¸²: Hello</span>
        <span class="hljs-comment">// å­—ç¬¦ä¸²: World</span>
    }
</code></pre>
<h4 data-id="heading-32">distinct</h4>
<p>distinct() ç”¨äºè¿‡æ»¤ Observable ä¸­é‡å¤çš„æ•°æ®é¡¹ï¼Œç¡®ä¿æ¯ä¸ªæ•°æ®é¡¹åªå‘å°„ä¸€æ¬¡ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šå»é‡ï¼Œä¿è¯å‘å°„çš„æ•°æ®åºåˆ—ä¸­ä¸åŒ…å«é‡å¤å…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>)
                .distinct()
                .subscribe(num -&gt; System.out.print(num + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 2 3 4 5</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæœ€åçš„ 1 ä¹Ÿè¢«å»é‡äº†</span>
    }
</code></pre>
<h4 data-id="heading-33">skip &amp; skipLast</h4>
<ul>
<li>skip(n)ï¼šè·³è¿‡ Observable å‘å°„çš„å‰ n ä¸ªæ•°æ®é¡¹ã€‚</li>
<li>skipLast(n)ï¼šè·³è¿‡ Observable å‘å°„çš„å n ä¸ªæ•°æ®é¡¹ã€‚</li>
</ul>
<p>æ ¸å¿ƒæ€æƒ³ï¼šskipæ˜¯"è·³è¿‡å¼€å¤´"ï¼ŒskipLastæ˜¯"è·³è¿‡ç»“å°¾"ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.create(emitter -&gt; {
                    emitter.onNext(<span class="hljs-number">1</span>);
                    emitter.onNext(<span class="hljs-number">2</span>);
                    emitter.onError(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä¸­é—´å‡ºé”™"</span>));
                })
                .skipLast(<span class="hljs-number">1</span>) 
                .subscribe(
                        num -&gt; System.out.println(<span class="hljs-string">"æ•°æ®: "</span> + num),
                        error -&gt; System.err.println(<span class="hljs-string">"é”™è¯¯: "</span> + error.getMessage()),
                        () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ•°æ®: 1</span>
        <span class="hljs-comment">// é”™è¯¯: ä¸­é—´å‡ºé”™</span>
    }
</code></pre>
<h4 data-id="heading-34">distinctUntilChanged</h4>
<p>distinctUntilChanged() ç”¨äºè¿‡æ»¤æ‰è¿ç»­é‡å¤çš„æ•°æ®ï¼Œåªä¿ç•™å‘ç”Ÿå˜åŒ–çš„æ•°æ®ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šå»é‡ï¼Œä½†åªå»é‡è¿ç»­ç›¸åŒçš„å€¼ï¼Œä¸è¿ç»­å‡ºç°çš„ç›¸åŒå€¼ä¼šè¢«ä¿ç•™ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
                .distinctUntilChanged()
                .subscribe(num -&gt; System.out.print(num + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 2 1 3 2 1</span>

        <span class="hljs-comment">// è§£é‡Šï¼š</span>
        <span class="hljs-comment">// åŸå§‹: 1, 1, 2, 2, 1, 3, 3, 2, 2, 1</span>
        <span class="hljs-comment">// å»é‡è¿ç»­é‡å¤å: 1, 2, 1, 3, 2, 1</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šä¸­é—´çš„ 1 è™½ç„¶å‡ºç°è¿‡ï¼Œä½†å› ä¸ºä¸è¿ç»­ï¼Œæ‰€ä»¥ä¿ç•™äº†</span>
    }
</code></pre>
<h4 data-id="heading-35">take</h4>
<p>take() ç”¨äºä» Observable çš„å¼€å¤´å–å‡ºæŒ‡å®šæ•°é‡çš„æ•°æ®ï¼Œç„¶åå®Œæˆã€‚
æ ¸å¿ƒæ€æƒ³ï¼šåªå–å‰ N ä¸ªæ•°æ®ï¼Œä¹‹åçš„æ•°æ®å¿½ç•¥ï¼ŒObservable æå‰å®Œæˆã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// å‘å°„1-10</span>
                .take(<span class="hljs-number">3</span>)             <span class="hljs-comment">// åªå–å‰3ä¸ª</span>
                .subscribe(
                        num -&gt; System.out.print(num + <span class="hljs-string">" "</span>),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"\nå·²å®Œæˆ"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 2 3</span>
        <span class="hljs-comment">// å·²å®Œæˆ</span>
        <span class="hljs-comment">// æ³¨æ„ï¼š4-10 ä¸ä¼šè¢«å‘å°„</span>
    }
</code></pre>
<h4 data-id="heading-36">firstElement &amp; lastElement &amp; elementAt</h4>
<p>è¿™ä¸‰ä¸ªæ“ä½œç¬¦éƒ½ç”¨äºä» Observable ä¸­å–å‡ºç‰¹å®šä½ç½®çš„å•ä¸ªå…ƒç´ ï¼š</p>
<ul>
<li><strong><code>firstElement()</code></strong>ï¼šå–ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li><strong><code>lastElement()</code></strong>ï¼šå–æœ€åä¸€ä¸ªå…ƒç´ </li>
<li><strong><code>elementAt(index)</code></strong>ï¼šå–æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ </li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)  <span class="hljs-comment">// 1,2,3,4,5</span>
                .firstElement()      <span class="hljs-comment">// å–ç¬¬ä¸€ä¸ª</span>
                .subscribe(
                        num -&gt; System.out.println(<span class="hljs-string">"ç¬¬ä¸€ä¸ª: "</span> + num),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"æ²¡æœ‰ç¬¬ä¸€ä¸ªå…ƒç´ "</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// ç¬¬ä¸€ä¸ª: 1</span>
    }
</code></pre>
<h3 data-id="heading-37">ç»„åˆæ“ä½œç¬¦</h3>
<p>ç»„åˆæ“ä½œç¬¦æ˜¯ RxJava ä¸­ç”¨äºå°†å¤šä¸ª Observable ç»„åˆæˆä¸€ä¸ª Observable çš„æ“ä½œç¬¦ã€‚å®ƒä»¬å¤„ç†å¤šä¸ªæ•°æ®æµä¹‹é—´çš„å…³ç³»ï¼Œå®ç°æµçš„åˆå¹¶ã€è¿æ¥ã€ç»„åˆç­‰æ“ä½œã€‚</p>
<h4 data-id="heading-38">concat</h4>
<p>concat() ç”¨äºé¡ºåºè¿æ¥å¤šä¸ª Observableï¼Œå‰ä¸€ä¸ª Observable å®Œæˆåï¼Œæ‰å¼€å§‹å‘å°„ä¸‹ä¸€ä¸ª Observable çš„æ•°æ®ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šä¸²è¡Œè¿æ¥ï¼Œä¿æŒé¡ºåºï¼Œåƒæ’é˜Ÿä¸€æ ·ä¸€ä¸ªæ¥ä¸€ä¸ªã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable&lt;String&gt; first = Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>);
        Observable&lt;String&gt; second = Observable.just(<span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>, <span class="hljs-string">"F"</span>);
        Observable&lt;String&gt; third = Observable.just(<span class="hljs-string">"G"</span>, <span class="hljs-string">"H"</span>);

        Observable.concat(first, second, third)
                .subscribe(
                        letter -&gt; System.out.print(letter + <span class="hljs-string">" "</span>),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"\nå…¨éƒ¨å®Œæˆ"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// A B C D E F G H</span>
        <span class="hljs-comment">// å…¨éƒ¨å®Œæˆ</span>
        <span class="hljs-comment">// ä¸¥æ ¼æŒ‰ç…§ first â†’ second â†’ third çš„é¡ºåº</span>
    }
</code></pre>
<h4 data-id="heading-39">concatArray</h4>
<p>concatArray() æ˜¯ concat() çš„æ•°ç»„ç‰ˆæœ¬ï¼Œç”¨äºé¡ºåºè¿æ¥å¤šä¸ª Observableï¼ˆä»¥æ•°ç»„å½¢å¼æä¾›ï¼‰ï¼ŒåŠŸèƒ½ä¸ concat() å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å‚æ•°å½¢å¼ä¸åŒã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºObservableæ•°ç»„</span>
        Observable&lt;String&gt;[] observables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observable</span>[]{
                Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>),
                Observable.just(<span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>),
                Observable.just(<span class="hljs-string">"F"</span>, <span class="hljs-string">"G"</span>)
        };

        <span class="hljs-comment">// ä½¿ç”¨ concatArray è¿æ¥</span>
        Observable.concatArray(observables)
                .subscribe(letter -&gt; System.out.print(letter + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// A B C D E F G</span>
        <span class="hljs-comment">// é¡ºåºè¿æ¥æ‰€æœ‰æ•°ç»„ä¸­çš„Observable</span>
    }
</code></pre>
<h4 data-id="heading-40">merge</h4>
<p>merge() ç”¨äºå¹¶å‘åˆå¹¶å¤šä¸ª Observableï¼Œå°†æ‰€æœ‰æ•°æ®æŒ‰å®é™…åˆ°è¾¾æ—¶é—´é¡ºåºæ··åˆå‘å°„ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šå¹¶è¡Œæ‰§è¡Œï¼Œè°å…ˆåˆ°è°å…ˆå‡ºï¼Œåƒå¤šè½¦é“åˆå¹¶æˆå•è½¦é“ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        Observable&lt;Long&gt; fast = Observable.interval(<span class="hljs-number">100</span>, TimeUnit.MILLISECONDS)
                .map(i -&gt; i + <span class="hljs-number">100</span>)  <span class="hljs-comment">// 100, 101, 102...</span>
                .take(<span class="hljs-number">3</span>);
        Observable&lt;Long&gt; slow = Observable.interval(<span class="hljs-number">200</span>, TimeUnit.MILLISECONDS)
                .map(i -&gt; i + <span class="hljs-number">200</span>)  <span class="hljs-comment">// 200, 201, 202...</span>
                .take(<span class="hljs-number">3</span>);

        Observable.merge(fast, slow)
                .subscribe(num -&gt; System.out.print(num + <span class="hljs-string">" "</span>));

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼ˆå®é™…æ—¶é—´é¡ºåºï¼‰ï¼š</span>
        <span class="hljs-comment">// 100 101 200 102 201 202</span>
        <span class="hljs-comment">// è§£é‡Šï¼š</span>
        <span class="hljs-comment">// 100ms: fastå‘å°„100</span>
        <span class="hljs-comment">// 200ms: slowå‘å°„200, fastå‘å°„101</span>
        <span class="hljs-comment">// 300ms: fastå‘å°„102</span>
        <span class="hljs-comment">// 400ms: slowå‘å°„201</span>
        <span class="hljs-comment">// 600ms: slowå‘å°„202</span>
    }
</code></pre>
<h4 data-id="heading-41">zip</h4>
<p>zip() ç”¨äºå°†å¤šä¸ª Observable çš„æ•°æ®æŒ‰ç´¢å¼•é…å¯¹ç»„åˆï¼Œåƒæ‹‰é“¾ä¸€æ ·ä¸€ä¸€å¯¹åº”ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šç­‰å¾…æ‰€æœ‰Observableéƒ½æœ‰æ•°æ®ï¼Œç„¶åé…å¯¹å‘å°„ï¼Œä»¥æœ€çŸ­çš„Observableä¸ºå‡†ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable&lt;String&gt; letters = Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>);
        Observable&lt;Integer&gt; numbers = Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);

        Observable.zip(
                        letters,
                        numbers,
                        (letter, number) -&gt; letter + number
                )
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// A1 B2 C3</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šD è¢«ä¸¢å¼ƒäº†ï¼Œå› ä¸º numbers åªæœ‰3ä¸ª</span>

    }
</code></pre>
<h4 data-id="heading-42">startWith &amp; startWithArray</h4>
<p>è¿™ä¸¤ä¸ªæ“ä½œç¬¦éƒ½ç”¨äºåœ¨ Observable å‘å°„æ•°æ®ä¹‹å‰ï¼Œå…ˆå‘å°„ä¸€äº›æŒ‡å®šçš„æ•°æ®ï¼Œå°±åƒç»™æ•°æ®æµæ·»åŠ "å¼€åœºç™½"ã€‚</p>
<ul>
<li>startWith()ï¼šæ·»åŠ å•ä¸ªå…ƒç´ æˆ– Observableã€‚</li>
<li>startWithArray()ï¼šæ·»åŠ å¤šä¸ªå…ƒç´ ï¼ˆå¯å˜å‚æ•°ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// startWith: æ·»åŠ å•ä¸ªå…ƒç´ </span>
        Observable.just(<span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .startWith(<span class="hljs-string">"A"</span>)
                .subscribe(letter -&gt; System.out.print(<span class="hljs-string">"startWith: "</span> + letter + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// startWithArray: æ·»åŠ å¤šä¸ªå…ƒç´ </span>
        Observable.just(<span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>)
                .startWithArray(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .subscribe(letter -&gt; System.out.print(<span class="hljs-string">"startWithArray: "</span> + letter + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// startWith: A B C</span>
        <span class="hljs-comment">// startWithArray: A B C D E</span>
    }
</code></pre>
<h4 data-id="heading-43">count</h4>
<p>count() ç”¨äºç»Ÿè®¡ Observable å‘å°„çš„å…ƒç´ æ•°é‡ï¼Œè¿”å›ä¸€ä¸ªå‘å°„å•ä¸ªè®¡æ•°å€¼çš„ Observableã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šæ•°ä¸€æ•°å‘å°„äº†å¤šå°‘ä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>)
                .count()
                .subscribe(count -&gt;
                        System.out.println(<span class="hljs-string">"å…ƒç´ æ•°é‡: "</span> + count)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å…ƒç´ æ•°é‡: 5</span>
    }
</code></pre>
<h3 data-id="heading-44">åŠŸèƒ½æ“ä½œç¬¦</h3>
<p>åŠŸèƒ½æ“ä½œç¬¦æ˜¯ RxJava ä¸­ç”¨äºè¾…åŠ©è°ƒè¯•ã€ç›‘æ§ã€é”™è¯¯å¤„ç†ã€èµ„æºç®¡ç†å’Œå·¥å…·æ€§åŠŸèƒ½çš„æ“ä½œç¬¦ã€‚å®ƒä»¬ä¸ç›´æ¥å¤„ç†æ•°æ®æµï¼Œè€Œæ˜¯æä¾›è¾…åŠ©åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-45">delay</h4>
<p>delay() ç”¨äºå»¶è¿Ÿå‘å°„ Observable çš„æ•°æ®ï¼Œå¯ä»¥å»¶è¿Ÿæ•´ä¸ªæµï¼Œä¹Ÿå¯ä»¥å»¶è¿Ÿæ¯ä¸ªå…ƒç´ ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šè®©æ•°æ®"ç­‰ä¸€ä¼šå„¿"å†å‘å°„ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        System.out.println(<span class="hljs-string">"å¼€å§‹æ—¶é—´: "</span> + System.currentTimeMillis());

        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .delay(<span class="hljs-number">1</span>, TimeUnit.SECONDS)  <span class="hljs-comment">// å»¶è¿Ÿ1ç§’</span>
                .subscribe(item -&gt;
                        System.out.println(System.currentTimeMillis() + <span class="hljs-string">": "</span> + item)
                );

        Thread.sleep(<span class="hljs-number">2000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å¼€å§‹æ—¶é—´: 1766569373459</span>
        <span class="hljs-comment">// 1766569374574: A</span>
        <span class="hljs-comment">// 1766569374580: B</span>
        <span class="hljs-comment">// 1766569374580: C</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šA,B,Cå‡ ä¹åŒæ—¶å‘å°„ï¼Œéƒ½å»¶è¿Ÿäº†1ç§’</span>
    }
</code></pre>
<h4 data-id="heading-46">subscribeOn &amp; observerOn</h4>
<p>è¿™ä¸¤ä¸ªæ“ä½œç¬¦ç”¨äºæ§åˆ¶ Observable åœ¨å“ªä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œå’Œè§‚å¯Ÿï¼Œæ˜¯ RxJava çº¿ç¨‹è°ƒåº¦çš„æ ¸å¿ƒã€‚</p>
<ul>
<li><strong><code>subscribeOn()</code></strong>ï¼šæŒ‡å®š Observable æ‰§è¡Œåœ¨å“ªä¸ªçº¿ç¨‹</li>
<li><strong><code>observeOn()</code></strong>ï¼šæŒ‡å®š Observer è§‚å¯Ÿåœ¨å“ªä¸ªçº¿ç¨‹</li>
</ul>
<p>subscribeOn ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        Observable.create(emitter -&gt; {
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œçº¿ç¨‹: "</span> + Thread.currentThread().getName());
                    emitter.onNext(<span class="hljs-string">"æ•°æ®"</span>);
                    emitter.onComplete();
                })
                .subscribeOn(Schedulers.io())  <span class="hljs-comment">// åœ¨IOçº¿ç¨‹æ‰§è¡Œ</span>
                .subscribe(data -&gt;
                        System.out.println(<span class="hljs-string">"æ¥æ”¶çº¿ç¨‹: "</span> + Thread.currentThread().getName())
                );

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰§è¡Œçº¿ç¨‹: RxCachedThreadScheduler-1</span>
        <span class="hljs-comment">// æ¥æ”¶çº¿ç¨‹: RxCachedThreadScheduler-1</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæ‰§è¡Œå’Œæ¥æ”¶éƒ½åœ¨IOçº¿ç¨‹</span>
    }
</code></pre>
<p>observeOn ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        Observable.create(emitter -&gt; {
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œçº¿ç¨‹: "</span> + Thread.currentThread().getName());
                    emitter.onNext(<span class="hljs-string">"æ•°æ®"</span>);
                    emitter.onComplete();
                })
                .observeOn(Schedulers.io())  <span class="hljs-comment">// åœ¨IOçº¿ç¨‹æ¥æ”¶</span>
                .subscribe(data -&gt;
                        System.out.println(<span class="hljs-string">"æ¥æ”¶çº¿ç¨‹: "</span> + Thread.currentThread().getName())
                );

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰§è¡Œçº¿ç¨‹: main</span>
        <span class="hljs-comment">// æ¥æ”¶çº¿ç¨‹: RxCachedThreadScheduler-1</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæ‰§è¡Œåœ¨ä¸»çº¿ç¨‹ï¼Œæ¥æ”¶åœ¨IOçº¿ç¨‹</span>
    }
</code></pre>
<h4 data-id="heading-47">retry</h4>
<p>retry ç”¨äºåœ¨ Observable å‘ç”Ÿé”™è¯¯æ—¶è‡ªåŠ¨é‡è¯•ï¼Œå®ç°é”™è¯¯æ¢å¤æœºåˆ¶ï¼Œç›´åˆ°æˆåŠŸæˆ–è¾¾åˆ°é‡è¯•ä¸Šé™ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">attempt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>();

        Observable.create(emitter -&gt; {
                    attempt.getAndIncrement();
                    System.out.println(<span class="hljs-string">"ç¬¬"</span> + attempt + <span class="hljs-string">"æ¬¡å°è¯•"</span>);
                    <span class="hljs-keyword">if</span> (attempt.get() &lt; <span class="hljs-number">3</span>) {
                        emitter.onError(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"éšæœºå¤±è´¥"</span>));
                    } <span class="hljs-keyword">else</span> {
                        emitter.onNext(<span class="hljs-string">"æˆåŠŸ"</span>);
                        emitter.onComplete();
                    }
                })
                .retry(<span class="hljs-number">2</span>)  <span class="hljs-comment">// æœ€å¤šé‡è¯•2æ¬¡</span>
                .subscribe(
                        data -&gt; System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + data),
                        error -&gt; System.err.println(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥: "</span> + error.getMessage())
                );

    <span class="hljs-comment">// è¾“å‡ºï¼š</span>
    <span class="hljs-comment">// ç¬¬1æ¬¡å°è¯•</span>
    <span class="hljs-comment">// ç¬¬2æ¬¡å°è¯•</span>
    <span class="hljs-comment">// ç¬¬3æ¬¡å°è¯•</span>
    <span class="hljs-comment">// ç»“æœ: æˆåŠŸ</span>
    <span class="hljs-comment">// å°è¯•3æ¬¡åæˆåŠŸï¼ˆåˆå§‹1æ¬¡+é‡è¯•2æ¬¡ï¼‰</span>
    }
</code></pre>
<h4 data-id="heading-48">retryUntil</h4>
<p>retryUntil ç”¨äºè‡ªå®šä¹‰é‡è¯•åœæ­¢æ¡ä»¶ï¼Œå½“æ¡ä»¶æ»¡è¶³æ—¶åœæ­¢é‡è¯•ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">attempt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
        Observable.create(emitter -&gt; {
                    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> attempt.incrementAndGet();
                    System.out.println(<span class="hljs-string">"ç¬¬"</span> + count + <span class="hljs-string">"æ¬¡å°è¯•"</span>);
                    <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">3</span>) {
                        emitter.onError(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å¤±è´¥"</span>));
                    } <span class="hljs-keyword">else</span> {
                        emitter.onNext(<span class="hljs-string">"æˆåŠŸ"</span>);
                        emitter.onComplete();
                    }
                })
                .retryUntil(() -&gt; {
                    <span class="hljs-comment">// è¿”å› true æ—¶åœæ­¢é‡è¯•</span>
                    <span class="hljs-keyword">return</span> attempt.get() &gt;= <span class="hljs-number">3</span>;  <span class="hljs-comment">// å°è¯•3æ¬¡ååœæ­¢</span>
                })
                .subscribe(
                        data -&gt; System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + data),
                        error -&gt; System.err.println(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥: "</span> + error.getMessage())
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// ç¬¬1æ¬¡å°è¯•</span>
        <span class="hljs-comment">// ç¬¬2æ¬¡å°è¯•</span>
        <span class="hljs-comment">// ç¬¬3æ¬¡å°è¯•</span>
        <span class="hljs-comment">// ç»“æœ: æˆåŠŸ</span>
    }
</code></pre>
<h3 data-id="heading-49">ç”Ÿå‘½å‘¨æœŸçš„åŠŸèƒ½æ“ä½œç¬¦</h3>
<p>å¾ˆå¤šåŠŸèƒ½æ“ä½œç¬¦è´¯ç©¿æ•´ä¸ªå‘å¸ƒè®¢é˜…çš„ç”Ÿå‘½å‘¨æœŸä¸­ã€‚</p>
<h4 data-id="heading-50">doOnSubscribe- è®¢é˜…æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .doOnSubscribe(disposable -&gt;
                        System.out.println(<span class="hljs-string">"æœ‰äººè®¢é˜…äº†ï¼"</span>)
                )
                .subscribe();
        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æœ‰äººè®¢é˜…äº†ï¼</span>
    }
</code></pre>
<h4 data-id="heading-51">doOnNext - å‘å°„æ¯ä¸ªå…ƒç´ æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)
                .doOnNext(num -&gt;
                        System.out.println(<span class="hljs-string">"å³å°†å‘å°„: "</span> + num)
                )
                .map(num -&gt; num * <span class="hljs-number">2</span>)
                .doOnNext(num -&gt;
                        System.out.println(<span class="hljs-string">"å‘å°„å: "</span> + num)
                )
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å³å°†å‘å°„: 1</span>
        <span class="hljs-comment">// å‘å°„å: 2</span>
        <span class="hljs-comment">// å³å°†å‘å°„: 2</span>
        <span class="hljs-comment">// å‘å°„å: 4</span>
        <span class="hljs-comment">// å³å°†å‘å°„: 3</span>
        <span class="hljs-comment">// å‘å°„å: 6</span>
    }
</code></pre>
<h4 data-id="heading-52">doAfterNext - å‘å°„åæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
    .doOnNext(item -&gt; 
        System.out.println(<span class="hljs-string">"å‘å°„å‰: "</span> + item)
    )
    .doAfterNext(item -&gt; 
        System.out.println(<span class="hljs-string">"å‘å°„å: "</span> + item)
    )
    .subscribe(item -&gt; 
        System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + item)
    );

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// å‘å°„å‰: A</span>
<span class="hljs-comment">// æ¥æ”¶: A</span>
<span class="hljs-comment">// å‘å°„å: A</span>
<span class="hljs-comment">// å‘å°„å‰: B</span>
<span class="hljs-comment">// æ¥æ”¶: B</span>
<span class="hljs-comment">// å‘å°„å: B</span>
<span class="hljs-comment">// å‘å°„å‰: C</span>
<span class="hljs-comment">// æ¥æ”¶: C</span>
<span class="hljs-comment">// å‘å°„å: C</span>
</code></pre>
<h4 data-id="heading-53">doOnError - å‡ºé”™æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•é”™è¯¯"</span>))
                .doOnError(error -&gt;
                        System.err.println(<span class="hljs-string">"æ•è·åˆ°é”™è¯¯: "</span> + error.getMessage())
                )
                .onErrorReturnItem(<span class="hljs-string">"é»˜è®¤å€¼"</span>)
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ•è·åˆ°é”™è¯¯: æµ‹è¯•é”™è¯¯</span>
    }
</code></pre>
<h4 data-id="heading-54">doOnComplete - å®Œæˆæ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"ä»»åŠ¡1"</span>, <span class="hljs-string">"ä»»åŠ¡2"</span>)
                .doOnComplete(() -&gt;
                        System.out.println(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆäº†ï¼"</span>)
                )
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆäº†ï¼</span>
    }
</code></pre>
<h4 data-id="heading-55">doOnTerminate - å®Œæˆ/é”™è¯¯å‰æ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æ­£å¸¸å®Œæˆçš„æƒ…å†µ</span>
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .doOnTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å³å°†å®Œæˆ/å‡ºé”™"</span>)
                )
                .doOnComplete(() -&gt;
                        System.out.println(<span class="hljs-string">"doOnComplete"</span>)
                )
                .subscribe(
                        item -&gt; System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + item),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"onComplete"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ¥æ”¶: A</span>
        <span class="hljs-comment">// æ¥æ”¶: B</span>
        <span class="hljs-comment">// å³å°†å®Œæˆ/å‡ºé”™</span>
        <span class="hljs-comment">// doOnComplete</span>
        <span class="hljs-comment">// onComplete</span>

        <span class="hljs-comment">// å‡ºé”™çš„æƒ…å†µ</span>
        Observable.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•"</span>))
                .doOnTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å³å°†å®Œæˆ/å‡ºé”™"</span>)
                )
                .doOnError(error -&gt;
                        System.out.println(<span class="hljs-string">"doOnError: "</span> + error.getMessage())
                )
                .subscribe(
                        item -&gt; {
                        },
                        error -&gt; System.out.println(<span class="hljs-string">"onError: "</span> + error.getMessage())
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å³å°†å®Œæˆ/å‡ºé”™</span>
        <span class="hljs-comment">// doOnError: æµ‹è¯•</span>
        <span class="hljs-comment">// onError: æµ‹è¯•</span>

    }
</code></pre>
<h4 data-id="heading-56">doAfterTerminate - å®Œæˆ/é”™è¯¯åæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æ­£å¸¸å®Œæˆçš„æƒ…å†µ</span>
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .doAfterTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å®Œæˆ/å‡ºé”™åæ‰§è¡Œ"</span>)
                )
                .doOnComplete(() -&gt;
                        System.out.println(<span class="hljs-string">"doOnComplete"</span>)
                )
                .subscribe(
                        item -&gt; System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + item),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"onComplete"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ¥æ”¶: A</span>
        <span class="hljs-comment">// æ¥æ”¶: B</span>
        <span class="hljs-comment">// doOnComplete</span>
        <span class="hljs-comment">// onComplete</span>
        <span class="hljs-comment">// å®Œæˆ/å‡ºé”™åæ‰§è¡Œ</span>

        <span class="hljs-comment">// å‡ºé”™çš„æƒ…å†µ</span>
        Observable.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•"</span>))
                .doAfterTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å®Œæˆ/å‡ºé”™åæ‰§è¡Œ"</span>)
                )
                .doOnError(error -&gt;
                        System.out.println(<span class="hljs-string">"doOnError: "</span> + error.getMessage())
                )
                .subscribe(
                        item -&gt; {
                        },
                        error -&gt; System.out.println(<span class="hljs-string">"onError: "</span> + error.getMessage())
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// doOnError: æµ‹è¯•</span>
        <span class="hljs-comment">// onError: æµ‹è¯•</span>
        <span class="hljs-comment">// å®Œæˆ/å‡ºé”™åæ‰§è¡Œ</span>
    }
</code></pre>
<h4 data-id="heading-57">doOnDispose - å–æ¶ˆè®¢é˜…æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">Disposable</span> <span class="hljs-variable">disposable</span> <span class="hljs-operator">=</span> Observable.interval(<span class="hljs-number">1</span>, TimeUnit.SECONDS)
                .doOnDispose(() -&gt;
                        System.out.println(<span class="hljs-string">"è®¢é˜…è¢«å–æ¶ˆäº†"</span>)
                )
                .subscribe(num -&gt;
                        System.out.println(<span class="hljs-string">"è®¡æ•°: "</span> + num)
                );

        Thread.sleep(<span class="hljs-number">3500</span>);
        disposable.dispose();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// è®¡æ•°: 0</span>
        <span class="hljs-comment">// è®¡æ•°: 1</span>
        <span class="hljs-comment">// è®¡æ•°: 2</span>
        <span class="hljs-comment">// è®¢é˜…è¢«å–æ¶ˆäº†</span>
    }
</code></pre>
<h4 data-id="heading-58">doFinally - æœ€ç»ˆæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"æ•°æ®"</span>)
                .doFinally(() -&gt;
                        System.out.println(<span class="hljs-string">"æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ"</span>)
                )
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ</span>
    }
</code></pre>
<h4 data-id="heading-59">doOnEach - æ¯ä¸ªäº‹ä»¶æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .doOnEach(notification -&gt; {
                    <span class="hljs-keyword">if</span> (notification.isOnNext()) {
                        System.out.println(<span class="hljs-string">"å‘å°„: "</span> + notification.getValue());
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (notification.isOnComplete()) {
                        System.out.println(<span class="hljs-string">"å®Œæˆ"</span>);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (notification.isOnError()) {
                        System.out.println(<span class="hljs-string">"é”™è¯¯: "</span> + notification.getError());
                    }
                })
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å‘å°„: A</span>
        <span class="hljs-comment">// å‘å°„: B</span>
        <span class="hljs-comment">// å‘å°„: C</span>
        <span class="hljs-comment">// å®Œæˆ</span>
    }
</code></pre>
<h4 data-id="heading-60">doOnRequest - è¯·æ±‚æ—¶ï¼ˆèƒŒå‹ç›¸å…³ï¼‰</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Flowable.range(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)
                .doOnRequest(requested -&gt;
                        System.out.println(<span class="hljs-string">"ä¸‹æ¸¸è¯·æ±‚äº† "</span> + requested + <span class="hljs-string">" ä¸ªå…ƒç´ "</span>)
                )
                .subscribe(
                        num -&gt; System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + num),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
                );

    }
</code></pre>
<h2 data-id="heading-61">ç»“æŸ</h2>
<p>å“åº”å¼ç¼–ç¨‹ç¡®å®éœ€è¦ä¸€äº›æ—¶é—´æ¥æŒæ¡ï¼Œä½†ä¸€æ—¦ç†è§£æ ¸å¿ƒæ¦‚å¿µï¼Œä½ å°±ä¼šå‘ç°å®ƒåœ¨å¤„ç†å¼‚æ­¥æ•°æ®æµæ—¶çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<p>ä»å›è°ƒåœ°ç‹±åˆ°æµç•…çš„é“¾å¼è°ƒç”¨ï¼Œä»æ‰‹å¿™è„šä¹±çš„èµ„æºç®¡ç†åˆ°æ™ºèƒ½çš„èƒŒå‹æ§åˆ¶ï¼Œå“åº”å¼ç¼–ç¨‹è®©å¤æ‚å¼‚æ­¥æ“ä½œå˜å¾—æ¸…æ™°å¯æ§ã€‚è™½ç„¶å­¦ä¹ æ›²çº¿å­˜åœ¨ï¼Œä½†æŠ•å…¥æ˜¯å€¼å¾—çš„ã€‚</p>
<p>è®°ä½ï¼Œä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½éœ€è¦å“åº”å¼ã€‚åœ¨åˆé€‚çš„ä¸šåŠ¡åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œæ‰èƒ½å‘æŒ¥æœ€å¤§ä»·å€¼ã€‚å»ºè®®ä»å®é™…é¡¹ç›®çš„å°æ¨¡å—å¼€å§‹å°è¯•ï¼Œé€æ­¥ç§¯ç´¯ç»éªŒã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡å†…å®¹èƒ½ä¸ºä½ æ‰“å¼€å“åº”å¼ç¼–ç¨‹çš„å¤§é—¨ã€‚ç¼–ç¨‹ä¹‹è·¯å°±æ˜¯ä¸æ–­å­¦ä¹ çš„è¿‡ç¨‹ï¼Œä¿æŒå¥½å¥‡ï¼Œç»§ç»­æ¢ç´¢å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SPAé¦–å±åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼]]></title>    <link>https://juejin.cn/post/7588043318360014883</link>    <guid>https://juejin.cn/post/7588043318360014883</guid>    <pubDate>2025-12-28T01:29:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588043318360014883" data-draft-id="7588092534162374656" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SPAé¦–å±åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T01:29:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SPAé¦–å±åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:29:58.000Z" title="Sun Dec 28 2025 01:29:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âš¡ é¦–å±åŠ è½½é€Ÿåº¦ä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ</h2>
<p>é¦–å±åŠ è½½æ—¶é—´ï¼ˆFirst Contentful Paintï¼‰æ˜¯å†³å®šç”¨æˆ·ç•™å­˜ç‡çš„å…³é”®æŒ‡æ ‡ã€‚æ®ç»Ÿè®¡ï¼š</p>
<ul>
<li>
<p><strong>53%çš„ç”¨æˆ·</strong> ä¼šåœ¨3ç§’å†…æ”¾å¼ƒåŠ è½½ç¼“æ…¢çš„ç§»åŠ¨ç½‘ç«™</p>
</li>
<li>
<p><strong>æ¯æé«˜1ç§’</strong> çš„åŠ è½½é€Ÿåº¦ï¼Œè½¬åŒ–ç‡æå‡7%</p>
</li>
<li>
<p>Googleå·²å°†é¡µé¢é€Ÿåº¦çº³å…¥æœç´¢æ’åå› ç´ </p>
</li>
</ul>
<h2 data-id="heading-1">ğŸ” ç²¾å‡†è¯Šæ–­ï¼šä½ çš„åº”ç”¨åˆ°åº•"æ…¢"åœ¨å“ªé‡Œï¼Ÿ</h2>
<h3 data-id="heading-2">é¦–å±æ—¶é—´è®¡ç®—æ–¹æ³•</h3>
<pre><code class="hljs language-ini" lang="ini">// ç°ä»£æµè§ˆå™¨API
const <span class="hljs-attr">getFirstContentfulPaint</span> = () =&gt; {
  const <span class="hljs-section">[entry]</span> = performance.getEntriesByName('first-contentful-paint')<span class="hljs-comment">;</span>
  return entry.startTime<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
â€‹
// ä¼ ç»Ÿè®¡ç®—æ–¹æ³•
const <span class="hljs-attr">firstScreenTime</span> = () =&gt; {
  return performance.timing.domContentLoadedEventEnd - 
         performance.timing.navigationStart<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-3">ğŸš€ ä¸ƒå¤§æ ¸å¿ƒç†å¿µï¼šä»æ ¹æºè§£å†³åŠ è½½é—®é¢˜</h2>
<h3 data-id="heading-4">ä¸€ã€ä»£ç åˆ†å‰²ï¼šæ™ºèƒ½åŠ è½½çš„è‰ºæœ¯</h3>
<h4 data-id="heading-5">åŠ¨æ€å¯¼å…¥ + è·¯ç”±æ‡’åŠ è½½</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼ˆä¸æ¨èï¼‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/views/Home.vue'</span>;
â€‹
<span class="hljs-comment">// ç°ä»£åŒ–æ‡’åŠ è½½ï¼ˆå¼ºçƒˆæ¨èï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Home</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "home" */</span> <span class="hljs-string">'@/views/Home.vue'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">About</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "about" */</span> <span class="hljs-string">'@/views/About.vue'</span>);
â€‹
<span class="hljs-comment">// Vue Routeré…ç½®</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Home.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">preload</span>: <span class="hljs-literal">true</span> } <span class="hljs-comment">// å…³é”®è·¯ç”±é¢„åŠ è½½æ ‡è®°</span>
  }
];
â€‹
<span class="hljs-comment">// é¢„åŠ è½½ç­–ç•¥</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> preloadList = to.<span class="hljs-property">matched</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">meta</span>.<span class="hljs-property">preload</span>);
  preloadList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
    route.<span class="hljs-property">components</span>.<span class="hljs-title function_">default</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {});
  });
  <span class="hljs-title function_">next</span>();
});
</code></pre>
<h3 data-id="heading-6">äºŒã€Tree Shakingï¼šå‰”é™¤æ— ç”¨ä»£ç </h3>
<h4 data-id="heading-7">Webpacké…ç½®ä¼˜åŒ–</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">webpack.config.js</span>
<span class="hljs-string">module.exports</span> <span class="hljs-string">=</span> {
  <span class="hljs-attr">mode:</span> <span class="hljs-string">'production'</span>,
  <span class="hljs-attr">optimization:</span> {
    <span class="hljs-attr">usedExports:</span> <span class="hljs-literal">true</span>, <span class="hljs-string">//</span> <span class="hljs-string">æ ‡è®°æœªä½¿ç”¨ä»£ç </span>
    <span class="hljs-attr">minimize:</span> <span class="hljs-literal">true</span>,
    <span class="hljs-attr">splitChunks:</span> {
      <span class="hljs-attr">chunks:</span> <span class="hljs-string">'all'</span>,
      <span class="hljs-attr">minSize:</span> <span class="hljs-number">20000</span>,
      <span class="hljs-attr">maxSize:</span> <span class="hljs-number">244000</span>,
      <span class="hljs-attr">cacheGroups:</span> {
        <span class="hljs-attr">vendor:</span> {
          <span class="hljs-attr">test:</span> <span class="hljs-string">/</span>[<span class="hljs-string">\\/</span>]<span class="hljs-string">node_modules</span>[<span class="hljs-string">\\/</span>]<span class="hljs-string">/</span>,
          <span class="hljs-attr">name:</span> <span class="hljs-string">'vendors'</span>,
          <span class="hljs-attr">chunks:</span> <span class="hljs-string">'all'</span>,
          <span class="hljs-attr">priority:</span> <span class="hljs-number">10</span>,
          <span class="hljs-attr">reuseExistingChunk:</span> <span class="hljs-literal">true</span>
        },
        <span class="hljs-attr">common:</span> {
          <span class="hljs-attr">minChunks:</span> <span class="hljs-number">2</span>,
          <span class="hljs-attr">priority:</span> <span class="hljs-number">5</span>,
          <span class="hljs-attr">reuseExistingChunk:</span> <span class="hljs-literal">true</span>
        }
      }
    }
  }
}<span class="hljs-string">;</span>
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€UIæ¡†æ¶æŒ‰éœ€åŠ è½½ï¼šå‘Šåˆ«"å…¨é‡"åŒ…è¢±</h3>
<h4 data-id="heading-9">Element-UIä¼˜åŒ–ç¤ºä¾‹</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// .babelrc é…ç½®</span>
{
  <span class="hljs-string">"plugins"</span>: [
    [
      <span class="hljs-string">"component"</span>,
      {
        <span class="hljs-string">"libraryName"</span>: <span class="hljs-string">"element-ui"</span>,
        <span class="hljs-string">"styleLibraryName"</span>: <span class="hljs-string">"theme-chalk"</span>
      }
    ]
  ]
}
â€‹
<span class="hljs-comment">// æŒ‰éœ€å¼•å…¥ç»„ä»¶</span>
import Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
import { Button, Select, Pagination } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui'</span>;
â€‹
Vue.<span class="hljs-keyword">use</span>(Button);
Vue.<span class="hljs-keyword">use</span>(Select);
Vue.<span class="hljs-keyword">use</span>(Pagination);
</code></pre>
<h3 data-id="heading-10">å››ã€å›¾ç‰‡èµ„æºé©å‘½çº§ä¼˜åŒ–</h3>
<h4 data-id="heading-11">ç°ä»£å›¾ç‰‡å¤„ç†æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-ini" lang="ini">// Vueå›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤
Vue.directive('lazy', {
  inserted: (el, binding) =&gt; {
    const <span class="hljs-attr">observer</span> = new IntersectionObserver((entries) =&gt; {
      entries.forEach(<span class="hljs-attr">entry</span> =&gt; {
        if (entry.isIntersecting) {
          const <span class="hljs-attr">img</span> = new Image()<span class="hljs-comment">;</span>
          <span class="hljs-attr">img.src</span> = binding.value<span class="hljs-comment">;</span>
          <span class="hljs-attr">img.onload</span> = () =&gt; {
            <span class="hljs-attr">el.src</span> = binding.value<span class="hljs-comment">;</span>
            el.classList.add('loaded')<span class="hljs-comment">;</span>
          }<span class="hljs-comment">;</span>
          observer.unobserve(el)<span class="hljs-comment">;</span>
        }
      })<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
    observer.observe(el)<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
â€‹
// WebPè‡ªåŠ¨é™çº§æ–¹æ¡ˆ
&lt;picture&gt;
  &lt;source <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image.webp"</span> type=<span class="hljs-string">"image/webp"</span>&gt;
  &lt;source <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image.jpg"</span> type=<span class="hljs-string">"image/jpeg"</span>&gt;
  &lt;img <span class="hljs-attr">src</span>=<span class="hljs-string">"image.jpg"</span> alt=<span class="hljs-string">"Description"</span>&gt;
&lt;/picture&gt;
</code></pre>
<h3 data-id="heading-12">äº”ã€ç¼“å­˜ç­–ç•¥ï¼šæè‡´åˆ©ç”¨æµè§ˆå™¨èƒ½åŠ›</h3>
<h4 data-id="heading-13">å¤šçº§ç¼“å­˜ä½“ç³»</h4>
<pre><code class="hljs language-ini" lang="ini">// Service Worker ç¼“å­˜ç­–ç•¥
const <span class="hljs-attr">CACHE_NAME</span> = <span class="hljs-string">'v1'</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">urlsToCache</span> = [<span class="hljs-string">'/'</span>, <span class="hljs-string">'/styles/main.css'</span>, <span class="hljs-string">'/scripts/main.js'</span>]<span class="hljs-comment">;</span>
â€‹
self.addEventListener('install', <span class="hljs-attr">event</span> =&gt; {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(<span class="hljs-attr">cache</span> =&gt; cache.addAll(urlsToCache))
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
â€‹
self.addEventListener('fetch', <span class="hljs-attr">event</span> =&gt; {
  event.respondWith(
    caches.match(event.request)
      .then(<span class="hljs-attr">response</span> =&gt; {
        if (response) return response<span class="hljs-comment">;</span>
        
        return fetch(event.request).then(<span class="hljs-attr">response</span> =&gt; {
          // åŠ¨æ€ç¼“å­˜é‡è¦èµ„æº
          if (event.request.url.includes('/api/critical')) {
            const <span class="hljs-attr">responseClone</span> = response.clone()<span class="hljs-comment">;</span>
            caches.open(CACHE_NAME).then(<span class="hljs-attr">cache</span> =&gt; {
              cache.put(event.request, responseClone)<span class="hljs-comment">;</span>
            })<span class="hljs-comment">;</span>
          }
          return response<span class="hljs-comment">;</span>
        })<span class="hljs-comment">;</span>
      })
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-14">å…­ã€æ„å»ºä¼˜åŒ–ï¼šå‘å¸ƒå‰çš„æœ€åå†²åˆº</h3>
<h4 data-id="heading-15">Webpacké«˜çº§é…ç½®</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// vue.config.js</span>
<span class="hljs-type">const</span> CompressionPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'compression-webpack-plugin'</span>);
<span class="hljs-type">const</span> BundleAnalyzerPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin;
â€‹
<span class="hljs-keyword">module</span>.exports = {
  chainWebpack: config =&gt; {
    <span class="hljs-comment">// æ‰“åŒ…åˆ†æ</span>
    config.<span class="hljs-built_in">plugin</span>(<span class="hljs-string">'analyzer'</span>).<span class="hljs-built_in">use</span>(BundleAnalyzerPlugin);
    
    <span class="hljs-comment">// ç§»é™¤ prefetch/preload</span>
    config.plugins.<span class="hljs-built_in">delete</span>(<span class="hljs-string">'prefetch'</span>);
    config.plugins.<span class="hljs-built_in">delete</span>(<span class="hljs-string">'preload'</span>);
    
    <span class="hljs-comment">// å‹ç¼©é…ç½®</span>
    config.optimization.<span class="hljs-built_in">minimize</span>(<span class="hljs-literal">true</span>);
    
    <span class="hljs-comment">// Gzipå‹ç¼©</span>
    config.<span class="hljs-built_in">plugin</span>(<span class="hljs-string">'compression'</span>).<span class="hljs-built_in">use</span>(CompressionPlugin, [{
      algorithm: <span class="hljs-string">'gzip'</span>,
      test: /\.(js|css)$/,
      threshold: <span class="hljs-number">10240</span>,
      minRatio: <span class="hljs-number">0.8</span>
    }]);
    
    <span class="hljs-comment">// Brotliå‹ç¼©ï¼ˆæ›´é«˜æ•ˆï¼‰</span>
    config.<span class="hljs-built_in">plugin</span>(<span class="hljs-string">'brotli'</span>).<span class="hljs-built_in">use</span>(CompressionPlugin, [{
      algorithm: <span class="hljs-string">'brotliCompress'</span>,
      filename: <span class="hljs-string">'[path].br[query]'</span>,
      test: /\.(js|css|html|svg)$/,
      compressionOptions: { level: <span class="hljs-number">11</span> },
      threshold: <span class="hljs-number">10240</span>,
      minRatio: <span class="hljs-number">0.8</span>
    }]);
  }
};
</code></pre>
<h3 data-id="heading-16">ä¸ƒã€æœåŠ¡ç«¯ä¼˜åŒ–ï¼šå…¨é“¾è·¯æ€§èƒ½æå‡</h3>
<h4 data-id="heading-17">Nginxé…ç½®ä¼˜åŒ–</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Gzipå‹ç¼©é…ç½®</span>
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types 
    text/plain
    text/css
    text/xml
    text/javascript
    application/javascript
    application/xml+rss
    application/json
    image/svg+xml;
â€‹
<span class="hljs-comment"># ç¼“å­˜ç­–ç•¥</span>
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control <span class="hljs-string">"public, immutable"</span>;
}
â€‹
<span class="hljs-comment"># Brotliå‹ç¼©ï¼ˆéœ€è¦é¢å¤–æ¨¡å—ï¼‰</span>
brotli on;
brotli_comp_level 6;
brotli_types text/plain text/css application/json application/javascript;
</code></pre>
<h4 data-id="heading-18">Node.js Expressä¼˜åŒ–</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">express</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">compression</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'compression'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">helmet</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'helmet'</span>);
â€‹
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">app</span> = <span class="hljs-title function_ invoke__">express</span>();
â€‹
<span class="hljs-comment">// å®‰å…¨å¤´éƒ¨</span>
app.<span class="hljs-keyword">use</span>(<span class="hljs-title function_ invoke__">helmet</span>({
  <span class="hljs-attr">contentSecurityPolicy</span>: <span class="hljs-literal">false</span>,
}));
â€‹
<span class="hljs-comment">// å‹ç¼©ä¸­é—´ä»¶</span>
app.<span class="hljs-keyword">use</span>(<span class="hljs-title function_ invoke__">compression</span>({
  <span class="hljs-attr">level</span>: <span class="hljs-number">6</span>,
  <span class="hljs-attr">threshold</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">filter</span>: (req, res) =&gt; {
    <span class="hljs-keyword">if</span> (req.headers[<span class="hljs-string">'x-no-compression'</span>]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> compression.<span class="hljs-title function_ invoke__">filter</span>(req, res);
  }
}));
â€‹
<span class="hljs-comment">// é™æ€èµ„æºç¼“å­˜</span>
app.<span class="hljs-keyword">use</span>(express.<span class="hljs-built_in">static</span>(<span class="hljs-string">'dist'</span>, {
  maxAge: <span class="hljs-string">'1y'</span>,
  setHeaders: (res, path) =&gt; {
    <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_ invoke__">endsWith</span>(<span class="hljs-string">'.html'</span>)) {
      res.<span class="hljs-title function_ invoke__">setHeader</span>(<span class="hljs-string">'Cache-Control'</span>, <span class="hljs-string">'public, max-age=0'</span>);
    }
  }
}));
</code></pre>
<h2 data-id="heading-19">ğŸ¯ è¿›é˜¶æ–¹æ¡ˆï¼šçªç ´æ€§èƒ½ç“¶é¢ˆ</h2>
<h3 data-id="heading-20">1. SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">Nuxt.jsé…ç½®ç¤ºä¾‹</span>
<span class="hljs-string">export</span> <span class="hljs-string">default</span> {
  <span class="hljs-attr">target:</span> <span class="hljs-string">'server'</span>,
  <span class="hljs-attr">render:</span> {
    <span class="hljs-string">//</span> <span class="hljs-string">å¼€å¯HTTP/2æ¨é€</span>
    <span class="hljs-attr">http2:</span> {
      <span class="hljs-attr">push:</span> <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">//</span> <span class="hljs-string">èµ„æºæç¤º</span>
    <span class="hljs-attr">resourceHints:</span> <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">build:</span> {
    <span class="hljs-string">//</span> <span class="hljs-string">æå–CSS</span>
    <span class="hljs-attr">extractCSS:</span> <span class="hljs-literal">true</span>,
    <span class="hljs-string">//</span> <span class="hljs-string">ä¼˜åŒ–é…ç½®</span>
    <span class="hljs-attr">optimization:</span> {
      <span class="hljs-attr">splitChunks:</span> {
        <span class="hljs-attr">chunks:</span> <span class="hljs-string">'all'</span>,
        <span class="hljs-attr">automaticNameDelimiter:</span> <span class="hljs-string">'.'</span>,
        <span class="hljs-attr">name:</span> <span class="hljs-literal">true</span>,
        <span class="hljs-attr">maxSize:</span> <span class="hljs-number">256000</span>
      }
    }
  }
}<span class="hljs-string">;</span>
</code></pre>
<h3 data-id="heading-21">2. é¢„æ¸²æŸ“å…³é”®è·¯å¾„</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ä½¿ç”¨prerender-spa-plugin</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PrerenderSPAPlugin</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'prerender-spa-plugin'</span>);
â€‹
module.exports = {
  plugins: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrerenderSPAPlugin</span>({
      staticDir: path.<span class="hljs-title function_ invoke__">join</span>(__dirname, <span class="hljs-string">'dist'</span>),
      routes: [<span class="hljs-string">'/'</span>, <span class="hljs-string">'/about'</span>, <span class="hljs-string">'/contact'</span>],
      renderer: <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrerenderSPAPlugin</span>.<span class="hljs-title function_ invoke__">PuppeteerRenderer</span>({
        <span class="hljs-attr">inject</span>: {},
        <span class="hljs-attr">renderAfterDocumentEvent</span>: <span class="hljs-string">'render-event'</span>
      })
    })
  ]
};
</code></pre>
<h3 data-id="heading-22">3. CDNåŠ¨æ€åŠ é€Ÿ</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ™ºèƒ½CDNé€‰æ‹© --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> cdnList = [
    <span class="hljs-string">'https://cdn1.example.com'</span>,
    <span class="hljs-string">'https://cdn2.example.com'</span>,
    <span class="hljs-string">'https://cdn3.example.com'</span>
  ];
  
  <span class="hljs-comment">// æµ‹é€Ÿé€‰æ‹©æœ€å¿«çš„CDN</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getFastestCDN</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> promises = cdnList.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> 
      <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${url}</span>/ping.txt`</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> ({
        url,
        <span class="hljs-attr">time</span>: performance.<span class="hljs-title function_">now</span>()
      })).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>)
    );
    
    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
    <span class="hljs-keyword">const</span> valid = results.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r !== <span class="hljs-literal">null</span>);
    valid.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">time</span> - b.<span class="hljs-property">time</span>);
    <span class="hljs-keyword">return</span> valid[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-23">ğŸ“Š ç›‘æ§ä¸æŒç»­ä¼˜åŒ–</h2>
<h3 data-id="heading-24">æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿</h3>
<pre><code class="hljs language-ini" lang="ini">// å®æ—¶æ€§èƒ½ç›‘æ§
const <span class="hljs-attr">metrics</span> = {}<span class="hljs-comment">;</span>
â€‹
// æ”¶é›†æ€§èƒ½æ•°æ®
const <span class="hljs-attr">collectMetrics</span> = () =&gt; {
  const <span class="hljs-attr">paintMetrics</span> = performance.getEntriesByType(<span class="hljs-string">'paint'</span>)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">navigationMetrics</span> = performance.getEntriesByType(<span class="hljs-string">'navigation'</span>)[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
  
  <span class="hljs-attr">metrics.FCP</span> = paintMetrics.find(m =&gt; m.name === <span class="hljs-string">'first-contentful-paint'</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">metrics.LCP</span> = performance.getEntriesByName(<span class="hljs-string">'largest-contentful-paint'</span>)[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
  <span class="hljs-attr">metrics.FID</span> = performance.getEntriesByName(<span class="hljs-string">'first-input'</span>)[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
  
  // å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ
  sendToAnalytics(metrics)<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
â€‹
// ç”¨æˆ·è¡Œä¸ºå…³è”åˆ†æ
const <span class="hljs-attr">correlateWithUserActions</span> = () =&gt; {
  // å…³è”åŠ è½½æ€§èƒ½ä¸ç”¨æˆ·è½¬åŒ–ç‡
}<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-25">ğŸ æ€»ç»“ï¼šæ„å»ºä½ çš„ä¼˜åŒ–æ¸…å•</h2>
<h3 data-id="heading-26">ç«‹å³æ‰§è¡Œï¼ˆä»Šå¤©å°±èƒ½åšï¼‰</h3>
<ul>
<li>å¯ç”¨è·¯ç”±æ‡’åŠ è½½</li>
<li>é…ç½®Webpackä»£ç åˆ†å‰²</li>
<li>å¼€å¯Gzip/Brotliå‹ç¼©</li>
<li>ä¼˜åŒ–å›¾ç‰‡æ ¼å¼å’Œå°ºå¯¸</li>
<li>è®¾ç½®åˆé€‚çš„HTTPç¼“å­˜å¤´</li>
</ul>
<h3 data-id="heading-27">çŸ­æœŸè§„åˆ’ï¼ˆ1-2å‘¨ï¼‰</h3>
<ul>
<li>å®ç°Service Workerç¦»çº¿ç¼“å­˜</li>
<li>UIæ¡†æ¶æŒ‰éœ€åŠ è½½ä¼˜åŒ–</li>
<li>å…³é”®èµ„æºé¢„åŠ è½½</li>
<li>éƒ¨ç½²CDNåŠ é€Ÿ</li>
<li>æ·»åŠ æ€§èƒ½ç›‘æ§</li>
</ul>
<h3 data-id="heading-28">é•¿æœŸæˆ˜ç•¥ï¼ˆ1-3ä¸ªæœˆï¼‰</h3>
<ul>
<li>å®æ–½SSR/SSGæ–¹æ¡ˆ</li>
<li>å»ºç«‹æ€§èƒ½é¢„ç®—æœºåˆ¶</li>
<li>å¼€å‘æ¸è¿›å¼Webåº”ç”¨ç‰¹æ€§</li>
<li>å»ºç«‹è‡ªåŠ¨åŒ–çš„æ€§èƒ½æµ‹è¯•æµæ°´çº¿</li>
</ul>
<h2 data-id="heading-29">ğŸ’¡ ç»ˆææ€è€ƒ</h2>
<p>é¦–å±ä¼˜åŒ–ä¸æ˜¯ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œè€Œæ˜¯<strong>æŒç»­çš„è¿‡ç¨‹</strong>ã€‚éšç€åº”ç”¨å‘å±•ï¼Œéœ€è¦ï¼š</p>
<ol>
<li>
<p><strong>å»ºç«‹æ€§èƒ½æ–‡åŒ–</strong> - è®©æ¯ä¸ªå¼€å‘è€…éƒ½æœ‰æ€§èƒ½æ„è¯†</p>
</li>
<li>
<p><strong>è®¾ç½®æ€§èƒ½é¢„ç®—</strong> - ä¸ºæ¯ä¸ªå…³é”®æŒ‡æ ‡è®¾ç½®ä¸Šé™</p>
</li>
<li>
<p><strong>è‡ªåŠ¨åŒ–ç›‘æ§</strong> - å®æ—¶å‘ç°é—®é¢˜ï¼Œå¿«é€Ÿå“åº”</p>
</li>
<li>
<p><strong>A/Bæµ‹è¯•</strong> - ç”¨æ•°æ®é©±åŠ¨ä¼˜åŒ–å†³ç­–</p>
</li>
</ol>
<p>è®°ä½ï¼š<strong>æ¯ä¸€æ¯«ç§’éƒ½å€¼å¾—äº‰å–</strong>ï¼Œå› ä¸ºå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œé€Ÿåº¦ä¸ä»…æ˜¯ä¸€ç§åŠŸèƒ½ï¼Œæ›´æ˜¯ä¸€ç§ä½“éªŒçš„ä¿è¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis åŠ¨æ€ SQL ä¸ºä»€ä¹ˆè¿™ä¹ˆçµæ´»ï¼ŸèƒŒåé çš„æ˜¯ OGNL]]></title>    <link>https://juejin.cn/post/7588042910198087730</link>    <guid>https://juejin.cn/post/7588042910198087730</guid>    <pubDate>2025-12-27T11:01:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198087730" data-draft-id="7588104741610061834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis åŠ¨æ€ SQL ä¸ºä»€ä¹ˆè¿™ä¹ˆçµæ´»ï¼ŸèƒŒåé çš„æ˜¯ OGNL"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T11:01:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JavaEdgeåœ¨æ˜é‡‘"/> <meta itemprop="url" content="https://juejin.cn/user/26044012176424"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis åŠ¨æ€ SQL ä¸ºä»€ä¹ˆè¿™ä¹ˆçµæ´»ï¼ŸèƒŒåé çš„æ˜¯ OGNL
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26044012176424/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JavaEdgeåœ¨æ˜é‡‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:01:05.000Z" title="Sat Dec 27 2025 11:01:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å·²æ”¶å½•åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FJava-Edge%2FJava-Interview-Tutorial" target="_blank" title="https://github.com/Java-Edge/Java-Interview-Tutorial" ref="nofollow noopener noreferrer">Github</a>ï¼Œ<strong>å…³æ³¨æˆ‘ï¼Œç´§è·Ÿæœ¬ç³»åˆ—ä¸“æ æ–‡ç« ï¼Œå’±ä»¬ä¸‹ç¯‡å†ç»­ï¼</strong></p>
<ul>
<li>ğŸš€ é­”éƒ½æ¶æ„å¸ˆ | å…¨ç½‘30WæŠ€æœ¯è¿½éšè€…</li>
<li>ğŸ”§ å¤§å‚åˆ†å¸ƒå¼ç³»ç»Ÿ/æ•°æ®ä¸­å°å®æˆ˜ä¸“å®¶</li>
<li>ğŸ† ä¸»å¯¼äº¤æ˜“ç³»ç»Ÿç™¾ä¸‡çº§æµé‡è°ƒä¼˜ &amp; è½¦è”ç½‘å¹³å°æ¶æ„</li>
<li>ğŸ§  AIGCåº”ç”¨å¼€å‘å…ˆè¡Œè€… | åŒºå—é“¾è½åœ°å®è·µè€…</li>
<li>ğŸŒ ä»¥æŠ€æœ¯é©±åŠ¨åˆ›æ–°ï¼Œæˆ‘ä»¬çš„å¾é€”æ˜¯æ”¹å˜ä¸–ç•Œï¼</li>
<li>ğŸ‘‰ å®æˆ˜å¹²è´§ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.javaedge.cn%2F" target="_blank" title="http://www.javaedge.cn/" ref="nofollow noopener noreferrer">ç¼–ç¨‹ä¸¥é€‰ç½‘</a></li>
</ul>
<h2 data-id="heading-0">0 å‰è¨€</h2>
<p><strong>OGNLï¼ˆObject Graph Navigation Languageï¼Œå¯¹è±¡å›¾å¯¼èˆªè¯­è¨€ï¼‰</strong>ï¼Œåœ¨ Struts2 æ—¶ä»£æ˜¯ç»å¯¹çš„æ ¸å¿ƒï¼Œè€Œåœ¨å¦‚ä»Š Spring Boot å’Œ MyBatis æ¶æ„ï¼Œä¾ç„¶åœ¨å¹•åæ‰®æ¼”ç€æå…¶å…³é”®çš„è§’è‰²ã€‚</p>
<h2 data-id="heading-1">1 å•¥æ˜¯ OGNLï¼Ÿ</h2>
<p>å¦‚æœæŠŠä½ çš„ Java ç¨‹åºæ¯”ä½œä¸€åº§å·¨å¤§çš„åŸå¸‚ï¼Œé‡Œé¢çš„å¯¹è±¡å°±æ˜¯ä¸€æ ‹æ ‹å¤§æ¥¼ï¼Œè€Œå¯¹è±¡çš„å±æ€§å°±æ˜¯å¤§æ¥¼é‡Œçš„æˆ¿é—´ã€‚</p>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿæ–¹å¼</h3>
<p>ä½ æƒ³å»æŸä¸ªæˆ¿é—´ï¼Œå¾—äº²è‡ªèµ°æ¥¼æ¢¯ã€å¼€é—¨ï¼ˆæ‰‹åŠ¨ç¼–å†™ <code>getUser().getAddress().getCity()</code>ï¼‰ã€‚å¦‚æœä¸­é—´æœ‰ä¸€ä¸ªé—¨é”äº†ï¼ˆä¸º <code>null</code>ï¼‰ï¼Œä½ å°±æ‘”å€’äº†ï¼ˆNullPointerExceptionï¼‰ã€‚</p>
<h3 data-id="heading-3">1.2 OGNL æ–¹å¼</h3>
<p>ä½ åªéœ€è¦è¾“å…¥ä¸€ä¸ªåœ°å€å­—ç¬¦ä¸² <code>"user.address.city"</code>ï¼ŒOGNL å°±åƒä¸€ä¸ª<strong>æ™ºèƒ½å¯¼èˆªä»ª</strong>ï¼Œè‡ªåŠ¨å¸®ä½ ç©¿æ¢­åœ¨å¤§æ¥¼ä¹‹é—´ï¼Œæ‰¾åˆ°é‚£ä¸ªæˆ¿é—´å¹¶å–å‡ºä¸œè¥¿ã€‚</p>
<p>æ ¸å¿ƒå®šä¹‰ï¼šOGNL æ˜¯ä¸€ç§è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰ï¼Œé€šè¿‡ç®€å•çš„å­—ç¬¦ä¸²è¯­æ³•ï¼Œå°±å¯å­˜å– Java å¯¹è±¡æ ‘ä¸­çš„ä»»æ„å±æ€§ã€è°ƒç”¨æ–¹æ³•ã€ç”šè‡³è¿›è¡Œç®€å•çš„é€»è¾‘è¿ç®—ã€‚</p>
<h2 data-id="heading-4">2 MyBatis ä¸­çš„åŠ¨æ€ SQL</h2>
<p>OGNL æ˜¯ MyBatis åŠ¨æ€ SQL çš„çµé­‚ã€‚</p>
<h3 data-id="heading-5">2.1 ä¸šåŠ¡èƒŒæ™¯</h3>
<p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª<strong>ç”µå•†å¹³å°çš„è®¢å•æœç´¢åŠŸèƒ½</strong>ã€‚ç”¨æˆ·å¯æŒ‰è®¢å•çŠ¶æ€ã€æ—¶é—´èŒƒå›´ã€å…³é”®è¯è¿›è¡Œç­›é€‰ã€‚ä¸ç”¨ OGNLï¼Œå¯èƒ½è¦å†™æ— æ•°ä¸ª <code>if-else</code>ã€‚</p>
<h3 data-id="heading-6">2.2 è½åœ°å®ç°</h3>
<p>MyBatis XML çœ‹åˆ°çš„ test è¡¨è¾¾å¼å°±æ˜¯ OGNLï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;select <span class="hljs-attr">id</span>=<span class="hljs-string">"findOrders"</span> resultType=<span class="hljs-string">"Order"</span>&gt;
   SELECT * FROM orders
   WHERE <span class="hljs-attr">1</span>=<span class="hljs-number">1</span>
   &lt;if <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null and status != ''"</span>&gt;
     AND status = <span class="hljs-comment">#{status}</span>
   &lt;/if&gt;
   &lt;if <span class="hljs-attr">test</span>=<span class="hljs-string">"keywords != null and keywords.length() &gt; 0"</span>&gt;
     AND title LIKE CONCAT('%', <span class="hljs-comment">#{keywords}, '%')</span>
   &lt;/if&gt;
 &lt;/select&gt;
</code></pre>
<p>ä¸ºå•¥è¿™è¦ç”¨ OGNLï¼Ÿå› ä¸ºå®ƒè§£è€¦â€œé€»è¾‘åˆ¤æ–­â€å’Œâ€œSQLâ€ã€‚ä½ æ— éœ€åœ¨ Java ä»£ç é‡Œæ‹¼è£…å­—ç¬¦ä¸²ï¼Œåªéœ€åœ¨ XML é‡Œå†™ç®€å•çš„â€œå¯¼èˆªå…¬å¼â€ï¼ŒOGNL è‡ªåŠ¨å¸®ä½ è§£æå‚æ•°å¯¹è±¡é‡Œçš„å€¼ã€‚</p>
<h2 data-id="heading-7">3 â€œçƒ­ä¿®æ”¹â€ä¸çº¿ä¸Šæ’æŸ¥</h2>
<h3 data-id="heading-8">3.1 ä¸šåŠ¡èƒŒæ™¯</h3>
<p>ä½ çš„å¾®æœåŠ¡å·²ä¸Šçº¿ï¼Œçªç„¶å‘ç°æŸæ¥å£è¿”å›æ•°æ®å¼‚å¸¸ã€‚ä½ æƒ³çŸ¥ï¼š<strong>ç°åœ¨å†…å­˜é‡ŒæŸä¸ªå…¨å±€é…ç½®å˜é‡çš„å€¼åˆ°åº•æ˜¯å¤šå°‘ï¼Ÿ</strong> æˆ–æƒ³åœ¨ä¸é‡å¯æœåŠ¡æ—¶ï¼Œ<strong>ä¸´æ—¶ä¿®æ”¹ä¸€ä¸‹æŸä¸ª Bean çš„å¼€å…³çŠ¶æ€</strong>ã€‚</p>
<h3 data-id="heading-9">3.2 è½åœ°å®ç°ï¼šç»“åˆ Arthas</h3>
<p>Java è¯Šæ–­åˆ©å™¨ <strong>Arthas</strong> æ·±åº¦é›†æˆ OGNLã€‚å¯ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ OGNL è¡¨è¾¾å¼æ¥â€œçª¥æ¢â€è¿è¡Œä¸­çš„ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-10">æŸ¥çœ‹é™æ€å˜é‡çš„å€¼</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ç±»ä¸­é™æ€å˜é‡çš„å€¼</span>
 ognl <span class="hljs-string">'@com.example.ConfigManager@getConfig().getTimeout()'</span>
</code></pre>
<h4 data-id="heading-11">çº¿ä¸Šâ€œå¼€æŒ‚â€ä¿®æ”¹é…ç½®</h4>
<pre><code class="hljs language-swift" lang="swift"># åŠ¨æ€ä¿®æ”¹çº¿ä¸Šè¿è¡Œä¸­çš„æŸä¸ªå¼€å…³
 ognl '#config<span class="hljs-operator">=</span><span class="hljs-meta">@com</span>.example.<span class="hljs-type">ConfigManager</span><span class="hljs-meta">@instance</span>, #config.setEnableDebug(<span class="hljs-literal">true</span>)'
</code></pre>
<p>å¾®æœåŠ¡æ¶æ„ä¸‹ï¼ŒèŠ‚ç‚¹ä¼—å¤šï¼Œé‡å¯ä»£ä»·å¤§ã€‚åˆ©ç”¨ OGNL çš„<strong>åŠ¨æ€æ‰§è¡Œèƒ½åŠ›</strong>ï¼Œå¯åœ¨ä¸è§¦åŠ¨ä»£ç å‰æä¸‹ï¼Œç²¾å‡†è§‚å¯Ÿå’Œå¹²é¢„ç”Ÿäº§ç¯å¢ƒçš„å¯¹è±¡çŠ¶æ€ã€‚</p>
<h2 data-id="heading-12">4 é¿å‘</h2>
<p>è™½ç„¶ OGNL å¾ˆå¼ºå¤§ï¼Œä½†åœ¨åˆ†å¸ƒå¼è®¾è®¡æ„ï¼š</p>
<h3 data-id="heading-13">æ€§èƒ½æŸè€—</h3>
<p>OGNL æ¯•ç«Ÿæ˜¯åŸºäºåå°„å’Œè§£æçš„ã€‚åœ¨é«˜æ€§èƒ½ã€é«˜å¹¶å‘çš„å†…å±‚å¾ªç¯ä¸­ï¼Œé¢‘ç¹ä½¿ç”¨å¤æ‚çš„è¡¨è¾¾å¼ä¼šå¯¼è‡´ CPU æŠ–åŠ¨ã€‚<strong>æœ€ä½³å®è·µ</strong>ï¼šå¤æ‚çš„é€»è¾‘å°½é‡åœ¨ Java ä»£ç ä¸­å¤„ç†å¥½ï¼Œä¼ ç»™ OGNL çš„åº”è¯¥æ˜¯â€œç»“æœâ€ã€‚</p>
<h3 data-id="heading-14">å®‰å…¨é£é™©</h3>
<p>è¿™å°±æ˜¯è‘—åçš„â€œStruts2 æ¼æ´â€æ ¹æºã€‚å¦‚æœä½ çš„ç³»ç»Ÿå…è®¸ç”¨æˆ·è¾“å…¥ OGNL è¡¨è¾¾å¼å¹¶åœ¨åå°æ‰§è¡Œï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ ç‰¹æ®Šçš„å­—ç¬¦ä¸²ï¼ˆå¦‚æ‰§è¡Œ <code>Runtime.getRuntime().exec("rm -rf /")</code>ï¼‰æ¥æ§åˆ¶ä½ çš„æœåŠ¡å™¨ã€‚<strong>æœ€ä½³å®è·µ</strong>ï¼šç»ä¸è¦å°†ç”¨æˆ·è¾“å…¥çš„å‚æ•°ç›´æ¥ä½œä¸º OGNL è¡¨è¾¾å¼æ‰§è¡Œã€‚</p>
<h2 data-id="heading-15">5 æ€»ç»“</h2>
<p>OGNL ä¸æ˜¯ä»€ä¹ˆæ·±å¥¥çš„æ•°å­¦æ¨¡å‹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ª**â€œèƒ¶æ°´å·¥å…·â€<strong>ã€‚å®ƒè®©</strong>å­—ç¬¦ä¸²<strong>å’Œ</strong>å†…å­˜å¯¹è±¡**ä¹‹é—´å»ºç«‹äº†ä¸€åº§æ¡¥æ¢ï¼š</p>
<ul>
<li>åœ¨ <strong>MyBatis</strong> é‡Œï¼Œå®ƒæ˜¯ SQL çš„â€œæŒ‡æŒ¥å®˜â€ã€‚</li>
<li>åœ¨ <strong>Arthas</strong> é‡Œï¼Œå®ƒæ˜¯çº¿ä¸Šçš„â€œé€è§†é•œâ€ã€‚</li>
<li>åœ¨ <strong>æ•°æ®æ ¡éªŒ</strong> é‡Œï¼Œå®ƒæ˜¯çµæ´»çš„â€œè§„åˆ™å¼•æ“â€ã€‚</li>
</ul>
<p>æŒæ¡äº† OGNLï¼Œä½ ä¸ä»…èƒ½å†™å‡ºæ›´ä¼˜é›…çš„åŠ¨æ€ SQLï¼Œæ›´èƒ½åœ¨ç³»ç»Ÿå‡ºé—®é¢˜æ—¶ï¼Œé€šè¿‡è¡¨è¾¾å¼ç›´æ¥ä¸å†…å­˜å¯¹è¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RBACä»‹ç»ä»¥åŠå¦‚ä½•è®¾è®¡ä¸€ä¸ªç®€æ˜“ä¸”é«˜å¯ç”¨çš„RBAC1çš„é‰´æƒç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7588146449005461540</link>    <guid>https://juejin.cn/post/7588146449005461540</guid>    <pubDate>2025-12-27T11:32:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449005461540" data-draft-id="7588152122186416182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RBACä»‹ç»ä»¥åŠå¦‚ä½•è®¾è®¡ä¸€ä¸ªç®€æ˜“ä¸”é«˜å¯ç”¨çš„RBAC1çš„é‰´æƒç³»ç»Ÿ"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-27T11:32:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Thanwinde"/> <meta itemprop="url" content="https://juejin.cn/user/634833993739484"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RBACä»‹ç»ä»¥åŠå¦‚ä½•è®¾è®¡ä¸€ä¸ªç®€æ˜“ä¸”é«˜å¯ç”¨çš„RBAC1çš„é‰´æƒç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/634833993739484/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Thanwinde
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:32:52.000Z" title="Sat Dec 27 2025 11:32:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RBACä»‹ç»ä»¥åŠå¦‚ä½•è®¾è®¡ä¸€ä¸ªç®€æ˜“ä¸”é«˜å¯ç”¨çš„RBAC1çš„é‰´æƒç³»ç»Ÿ</h2>
<h3 data-id="heading-1">ä¸€.RBAC0,RBAC1,RBAC2,RBAC3</h3>
<p>RBACï¼Œå³ä¸º<strong>ä»¥è§’è‰²ä¸ºåŸºç¡€çš„è®¿é—®æ§åˆ¶</strong>ï¼Œä¸åŒäºæŠŠæƒé™èµ‹äºˆç”¨æˆ·ï¼Œè€Œæ˜¯æŠŠæƒé™èµ‹ç»™è§’è‰²ï¼Œç”¨æˆ·è·å¾—è§’è‰²ï¼Œæ˜¯ä¸€ç§éå¸¸çµæ´»çš„é‰´æƒè®¾è®¡</p>
<p>å…¶è®¾è®¡å›´ç»•ç€ <strong>ç”¨æˆ· è§’è‰² æƒé™ï¼ˆåŠŸèƒ½ï¼‰</strong> å±•å¼€</p>
<h4 data-id="heading-2">ï¼ˆä¸€ï¼‰RBAC0</h4>
<p>RBAC0åˆå«<strong>æ‰å¹³ RBACï¼ˆFlat RBACï¼‰</strong> ï¼Œç”¨æˆ·é€šè¿‡è§’è‰²è·å–æƒé™ï¼›é€šè¿‡å¤šå¯¹å¤šåˆ†é…ï¼›ç”¨æˆ·å¯åŒæ—¶ä½¿ç”¨å¤šä¸ªè§’è‰²çš„æƒé™ ï¼›æœ‰ç”¨æˆ·-è§’è‰²å®¡æŸ¥ï¼ˆèƒ½çŸ¥é“ä¸€ä¸ªç”¨æˆ·æœ‰å¤šå°‘è§’è‰²ï¼‰</p>
<p>å‡å¦‚æœ‰è¿™ä¹ˆä¸€ä¸ªæ¶æ„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5874e142e5234e80b98a95c07e10ae02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=lXtHx%2BBpXkLWDpO03JlHXNJmbOo%3D" alt="image-20251227163700084.png" loading="lazy"/></p>
<p>éœ€è¦ç”¨RBAC0å¯¹å…¶è¿›è¡Œé‰´æƒï¼Œç»“æœä¼šæ˜¯è¿™æ ·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98ccd5c6747f4eeabf31c62f70ef2b0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=scddnskH2VTxVi6zJMlsh89Th1M%3D" alt="image-20251227164146052.png" loading="lazy"/></p>
<p>å¦‚ä½ æ‰€è§ï¼Œéå¸¸ä¸‘é™‹ä¸”å¤æ‚</p>
<p><strong>RBAC0ä¸é€‚ç”¨äºå¤„ç†æƒé™å¤ç”¨çš„æƒ…å†µ</strong>ï¼Œæ›´é€‚åº”<strong>æ¯ä¸ªè§’è‰²çš„æƒé™éƒ½ä¸åŒ</strong>çš„æƒ…å†µ</p>
<h4 data-id="heading-3">ï¼ˆäºŒï¼‰RBAC1</h4>
<p>RBAC1åˆå«<strong>å±‚æ¬¡ RBAC(Hierarchical RBAC)</strong> ,<strong>åŒ…å«æ‰å¹³ RBAC</strong> ï¼Œæ”¯æŒè§’è‰²å±‚æ¬¡ç»“æ„ï¼ˆååºå…³ç³»ï¼‰ï¼Œæ”¯æŒä»»æ„å±‚æ¬¡ç»“æ„(2aå‹)ï¼Œæ”¯æŒå—é™å±‚æ¬¡ç»“æ„ï¼ˆå¦‚æ ‘çŠ¶ï¼‰ï¼ˆ2bå‹ï¼‰</p>
<p>ç¿»è¯‘æˆäººè¯å°±æ˜¯åœ¨RBAC0åŠ å…¥äº†<strong>ç»§æ‰¿ç³»ç»Ÿ</strong>ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a8dcef9412045af924d70d95ab9511b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=0f%2FFdqc%2BbTcIQ%2BaFWswF1QKEYXY%3D" alt="image-20251227164925444.png" loading="lazy"/></p>
<p>è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„2bå‹çš„RBAC1ç³»ç»Ÿï¼Œè§’è‰²ä¹‹é—´æœ‰<strong>ååº</strong>å…³ç³»ï¼Œå¯ä»¥<strong>ç»§æ‰¿</strong>ï¼šä¸€ä¸ªè§’è‰²å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªçˆ¶è§’è‰²çš„æƒé™ï¼Œè·å¾—äº†ç®¡ç†å‘˜æƒé™å°±è·å¾—äº†å•†å®¶ï¼Œç”¨æˆ·çš„æƒé™</p>
<h4 data-id="heading-4">ï¼ˆä¸‰ï¼‰RBAC2</h4>
<p>RBAC2åˆå«<strong>å—é™ RBAC (Constrained RBAC)</strong> ,<strong>åŒ…å«å±‚æ¬¡ RBAC</strong>, å¿…é¡»å¼ºåˆ¶æ‰§è¡ŒèŒè´£åˆ†ç¦»ï¼ˆSODï¼‰,<strong>3a/3b:</strong> åˆ†åˆ«å¯¹åº”ä»»æ„æˆ–å—é™å±‚æ¬¡ç»“æ„ ã€‚</p>
<p>SODé€šè¿‡å°†è¡ŒåŠ¨æˆ–ä»»åŠ¡çš„è´£ä»»å’Œæƒé™åˆ†æ•£ç»™å¤šä¸ªç”¨æˆ·ï¼Œæ¥å‡å°‘æ¬ºè¯ˆå’Œæ„å¤–æŸå®³çš„å¯èƒ½æ€§ ,ä¹Ÿå°±æ˜¯è¯´ä¸èƒ½<strong>å½“é€‰æ‰‹åˆå½“è£åˆ¤</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e731ca0931949e08cf35e404c1356f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=94ekHgZgXLhQNibGaKHskaDEO4Q%3D" alt="image-20251227165737822.png" loading="lazy"/></p>
<p>æœ¬è´¨ä¸Šå°±æ˜¯RBAC1 + SOD,è¦æ±‚è¦ä¹ˆå…·æœ‰<strong>SSD(é™æ€èŒè´£åˆ†ç¦»ï¼Œç›´æ¥ç¦æ­¢ä½ å½“é€‰æ‰‹åˆå½“è£åˆ¤)</strong> ï¼Œè¦ä¹ˆå…·æœ‰<strong>DSD(åŠ¨æ€èŒè´£åˆ†ç¦»ï¼Œå…è®¸ä½ å½“é€‰æ‰‹åˆå½“è£åˆ¤ï¼Œä½†ä¸èƒ½åŒæ—¶å½“)</strong></p>
<p>è¾ƒä¸ºå¤æ‚ï¼ŒSODé ä¸šåŠ¡å®ç°</p>
<h4 data-id="heading-5">ï¼ˆå››ï¼‰RBAC3</h4>
<p>RBAC3åˆå«<strong>å¯¹ç§° RBAC(Symmetric RBAC)</strong> ,<strong>åŒ…å«å—é™ RBAC</strong> ,æ”¯æŒæƒé™-è§’è‰²å®¡æŸ¥ï¼ˆPermission-Role Reviewï¼‰ï¼Œå…¶æ€§èƒ½éœ€ä¸ç”¨æˆ·-è§’è‰²å®¡æŸ¥ç›¸å½“</p>
<p>ç±»ä¼¼äºRBAC0çš„ç”¨æˆ·-è§’è‰²å®¡æŸ¥ã€‚ç³»ç»Ÿå¿…é¡»èƒ½å¤ŸçŸ¥é“<strong>ç‰¹å®šè§’è‰²åˆ†é…äº†å“ªäº›æƒé™</strong>ï¼Œä»¥åŠ<strong>ç‰¹å®šæƒé™è¢«åˆ†é…ç»™äº†å“ªäº›è§’è‰²</strong></p>
<p>ä¹Ÿå°±æ˜¯åŠ å…¥äº†ä¸€ä¸ª<strong>åæ¨</strong>çš„æ“ä½œï¼Œä¸”æ€§èƒ½è¦ç›¸å½“</p>
<p>æ—¢èƒ½<strong>role-&gt;perms</strong>ï¼Œä¹Ÿèƒ½<strong>perm-&gt;roles</strong></p>
<p>ä¸ºä»€ä¹ˆè¿™é‡Œä¼šå•ç‹¬æå‡ºä¸€ä¸ªåæ¨çš„åŠŸèƒ½ï¼Ÿ</p>
<p>å› ä¸ºå®ƒ<strong>åœ¨å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ¬è´¨ä¸Šå¾ˆéš¾å®ç°</strong>ã€‚</p>
<ul>
<li><strong>éå¯¹ç§°æ€§ï¼š</strong> å¤§å¤šæ•°è®¿é—®æ§åˆ¶ç³»ç»Ÿæ˜¯ä¸ºäº†å¿«é€Ÿå›ç­”â€œç”¨æˆ· X èƒ½åšä»€ä¹ˆï¼Ÿâ€œè€Œä¼˜åŒ–çš„ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·ç™»å½•æˆ–è®¿é—®èµ„æºæ—¶å¿«é€Ÿé‰´æƒã€‚</li>
<li><strong>åå‘æŸ¥è¯¢æ˜‚è´µï¼š</strong> è¦å›ç­”â€œè°æ‹¥æœ‰æƒé™ Yï¼Ÿâ€ï¼Œé€šå¸¸éœ€è¦åå‘éå†æ•´ä¸ªæƒé™æ˜ å°„è¡¨ã€‚åœ¨æ‹¥æœ‰æˆåƒä¸Šä¸‡ä¸ªæƒé™å’Œè§’è‰²çš„ç³»ç»Ÿä¸­ï¼Œå¦‚æœç³»ç»Ÿæ¶æ„ä¸æ”¯æŒåŒå‘ç´¢å¼•ï¼Œè¿™ç§æŸ¥è¯¢çš„æ€§èƒ½æ¶ˆè€—å·¨å¤§ï¼Œç±»ä¼¼äºæ•°æ®åº“ä¸­çš„å…¨è¡¨æ‰«æã€‚</li>
</ul>
<h3 data-id="heading-6">å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨çš„RBAC1ç³»ç»Ÿ</h3>
<p>é¦–å…ˆï¼Œåœ¨ä½ è¦è®¾è®¡å‰ï¼Œä½ åº”å½“çŸ¥é“ä½ ä»¬ä¸šåŠ¡çš„éœ€æ±‚æ¥å†³å®šåº”è¯¥é€‰ç”¨å“ªä¸€ä¸ªçº§åˆ«çš„RBAC</p>
<p>å®é™…ä¸Šï¼Œåœ¨çœŸæ­£çš„ç”Ÿäº§åº”ç”¨é˜¶æ®µï¼Œ<strong>ç»å¤§å¤šæ•°ä¼ä¸šéƒ½æ˜¯é‡‡ç”¨åŸºäºRBAC1ï¼ŒRBAC0æˆ–å…¶å˜ç§å†åŠ ä¸ŠRBAC3çš„åæ¨</strong>ï¼Œå› ä¸º<strong>SODï¼Œå±‚çº§å…¶å®å¾ˆéš¾å®ç°</strong></p>
<p>ä½†æ— è®ºå¦‚ä½•ï¼ŒRBACé‰´æƒç³»ç»Ÿçš„æ€è·¯å…¶å®å¤§å·®ä¸å·®ï¼š<strong>è®¿é—®å¿«é€Ÿï¼Œèƒ½æ‰¿å—ä¸€å®šå‹åŠ›ï¼Œå†…å­˜å ç”¨ä¸å¤§ï¼Œæ”¯æŒçƒ­ä¿®æ”¹ï¼Œæ”¯æŒåˆ†å¸ƒå¼</strong></p>
<p>è¿™é‡Œæˆ‘ä»¥ä¸€ä¸ªæ ‡å‡†çš„RBAC1è¿›è¡Œæ¼”ç¤º</p>
<h4 data-id="heading-7">ï¼ˆä¸€ï¼‰ç³»ç»Ÿåˆ†æ</h4>
<p>è¿™é‡Œä»¥Javaä¸ºä¾‹</p>
<p>é¦–å…ˆï¼Œé‰´æƒç³»ç»Ÿå¿…é¡»å¤„äºç³»ç»Ÿ<strong>æœ€å‰æ–¹</strong>ï¼Œä½†æ˜¯æœ‰äº›æ¥å£å¹¶ä¸éœ€è¦é‰´æƒï¼Œå¦‚ä½•å®ç°ï¼Ÿæˆ‘ä»¬å¤§å¯ä»¥æŠŠé‰´æƒæ”¾åœ¨<strong>æ‹¦æˆªå™¨</strong>ï¼Œç„¶ååƒSpringSecurityé‚£æ ·ç»´æŠ¤ä¸€ä¸ª<strong>åŒ¹é…è¡¨åŒ¹é…å“ªäº›URLè¦é‰´æƒ</strong>ï¼Œ<strong>å“ªäº›URLè¦ä»€ä¹ˆè§’è‰²æ¥è®¿é—®</strong>ï¼Œä½†æ—¢ç„¶å¼•å…¥äº†RBACï¼Œæœ¬èº«å°±æ˜¯ä¸ºäº†<strong>æ›´æ–¹ä¾¿æ›´ç»†ç²’åº¦</strong>çš„å»é‰´æƒã€‚è¿™é‡Œæˆ‘ç»™å‡ºçš„æ–¹æ³•æ˜¯è®¾è®¡ä¸€ä¸ª<strong>æ³¨è§£</strong>ï¼Œ<strong>æ³¨è§£å‚æ•°</strong>æ˜¯è®¿é—®æ­¤æ¥å£æ‰€éœ€çš„æƒé™ï¼Œç”¨<strong>AOP</strong>æ‹¦æˆªå…·æœ‰è¿™ä¸ªæ³¨é‡Šçš„æ–¹æ³•ï¼Œæ£€æŸ¥è®¿é—®çš„Useræœ‰æ²¡æœ‰æƒé™</p>
<p>ä¸ºäº†è·å¾—è®¿é—®çš„userIdï¼Œå¯ä»¥é‡‡ç”¨ThreadLocalæ¥å­˜å‚¨ï¼Œåœ¨ç½‘å…³æˆªå–Tokenæ”¾å…¥Threadlocal</p>
<p>ä½†æˆ‘è¿™é‡Œå»ºè®®ä¸è¦ç”¨ThreadLocalï¼Œç›´æ¥åœ¨è¯·æ±‚ä¸­æ³¨å…¥userIdåˆ°è¯·æ±‚å‚æ•°ä¸­ï¼ŒAOPä¸­å°±ä»è¯·æ±‚å‚æ•°ä¸­æ‹¿å¸¦userIdï¼Œè¿™æ ·ç”¨ç€æ›´åŠ æ–¹ä¾¿ï¼Œä¹Ÿé¿å…äº†ThreadLocal<strong>å†…å­˜æ³„æ¼</strong>çš„é£é™©ï¼ˆæ¦‚ç‡æä½ï¼‰</p>
<p>å…·ä½“æ¥è¯´ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Target</span>(ElementType.PARAMETER)
<span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)
public <span class="hljs-variable">@interface</span> CurrentUserId {
}
</code></pre>
<p>è¿™ä¸ªæ³¨é‡Šç”¨æ¥æ”¾åœ¨userIdå‰ï¼Œç”¨äºAOPæ‹¿åˆ°userIdï¼Œå¦åˆ™å°±éœ€è¦ä»å…ƒæ•°æ®ä¸­æ‹¿ï¼Œéå¸¸ä¸ä¾¿</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Target</span>(ElementType.METHOD) <span class="hljs-comment">// ä½œç”¨åœ¨æ–¹æ³•ä¸Š</span>
<span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME) <span class="hljs-comment">// è¿è¡Œæ—¶æœ‰æ•ˆ</span>
public <span class="hljs-variable">@interface</span> RequirePermission {
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * éœ€è¦çš„æƒé™æ ‡è¯†ï¼Œä¾‹å¦‚: {"user:add", "user:edit"}
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">String</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">value</span>();
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ ¡éªŒé€»è¾‘ï¼šAND (æ‰€æœ‰æƒé™éƒ½è¦æœ‰) / OR (åªè¦æœ‰ä¸€ä¸ªæƒé™å³å¯)
 Â  Â  * é»˜è®¤ä¸º AND
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">Logical</span> <span class="hljs-selector-tag">logical</span>() <span class="hljs-selector-tag">default</span> <span class="hljs-selector-tag">Logical</span><span class="hljs-selector-class">.AND</span>;
â€‹
 Â  Â <span class="hljs-selector-tag">enum</span> <span class="hljs-selector-tag">Logical</span> {
 Â  Â  Â  Â <span class="hljs-selector-tag">AND</span>, <span class="hljs-selector-tag">OR</span>
 Â   }
}
</code></pre>
<p>è¿™é‡Œæ”¯æŒ æˆ–ï¼Œä¸</p>
<pre><code class="hljs language-ini" lang="ini">@Before("@annotation(top.twindworld.treeauthority.demos.aop.annotation.RequirePermission)")
public void checkPermission(JoinPoint point) {
 Â  Â // 1. è·å–æ³¨è§£è¯¦æƒ…
 Â  Â MethodSignature <span class="hljs-attr">signature</span> = (MethodSignature) point.getSignature()<span class="hljs-comment">;</span>
 Â  Â Method <span class="hljs-attr">method</span> = signature.getMethod()<span class="hljs-comment">;</span>
 Â  Â RequirePermission <span class="hljs-attr">annotation</span> = method.getAnnotation(RequirePermission.class)<span class="hljs-comment">;</span>
 Â  Â if (<span class="hljs-attr">annotation</span> == null) {
 Â  Â  Â  Â return<span class="hljs-comment">;</span>
 Â   }
â€‹
 Â  Â // 2. è·å–å½“å‰ç™»å½•ç”¨æˆ·æ‹¥æœ‰çš„æƒé™é›†åˆ (ä» è¯·æ±‚ ä¸­æ‹¿)
â€‹
 Â  Â Annotation<span class="hljs-section">[]</span><span class="hljs-section">[]</span> <span class="hljs-attr">paramAnnotations</span> = method.getParameterAnnotations()<span class="hljs-comment">;</span>
 Â  Â // è·å–æ‰€æœ‰å‚æ•°å€¼
 Â  Â Object<span class="hljs-section">[]</span> <span class="hljs-attr">args</span> = point.getArgs()<span class="hljs-comment">;</span>
 Â  Â Long <span class="hljs-attr">currentUserId</span> = null<span class="hljs-comment">;</span>
 Â  Â for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; paramAnnotations.length; i++) {</span>
 Â  Â  Â  Â for (Annotation a : paramAnnotations<span class="hljs-section">[i]</span>) {
 Â  Â  Â  Â  Â  Â if (a instanceof CurrentUserId) {
 Â  Â  Â  Â  Â  Â  Â  Â // æ‰¾åˆ°äº†ï¼è¿”å›å¯¹åº”çš„å‚æ•°å€¼
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">currentUserId</span> = (Long) args[i]<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
 Â  Â if (<span class="hljs-attr">currentUserId</span> == null) {
 Â  Â  Â  Â throw new NoAuthorityException(401,"æ— æ³•è·å–å½“å‰ç”¨æˆ· IDï¼Œæƒé™æ ¡éªŒå¤±è´¥")<span class="hljs-comment">;</span>
 Â   }
 Â  Â Set&lt;String&gt; <span class="hljs-attr">roleKeys</span> = redisAuthorityService.getUserRoleKeys(currentUserId)<span class="hljs-comment">;</span>
 Â  Â if (<span class="hljs-attr">roleKeys</span> == null || roleKeys.isEmpty()) {
 Â  Â  Â  Â throw new NoAuthorityException(403, "ç”¨æˆ·æš‚æ— è§’è‰²æƒé™")<span class="hljs-comment">;</span>
 Â   }
â€‹
 Â  Â // 3. è·å–æ¥å£è¦æ±‚çš„æƒé™
 Â  Â String<span class="hljs-section">[]</span> <span class="hljs-attr">requiredPerms</span> = annotation.value()<span class="hljs-comment">;</span>
 Â  Â RequirePermission.Logical <span class="hljs-attr">logical</span> = annotation.logical()<span class="hljs-comment">;</span>
â€‹
 Â  Â // 4. å¼€å§‹æ ¡éªŒ
 Â  Â HashSet&lt;String&gt; <span class="hljs-attr">functionSet</span> = new HashSet&lt;&gt;()<span class="hljs-comment">;</span>
 Â  Â for (String roleKey : roleKeys) {
 Â  Â  Â  Â functionSet.addAll(redisAuthorityService.getRoleFunctionKeys(roleKey))<span class="hljs-comment">;</span>
 Â   }
 Â  Â check(functionSet, requiredPerms, logical)<span class="hljs-comment">;</span>
}
</code></pre>
<p>ç”¨çš„æ—¶å€™å°±åªéœ€è¦è¿™æ ·ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/hello"</span>)
<span class="hljs-variable">@RequirePermission</span>(value = {<span class="hljs-string">"user:manage"</span>}, logical = RequirePermission.Logical.<span class="hljs-keyword">AND</span>)
public String <span class="hljs-built_in">hello</span>(<span class="hljs-variable">@CurrentUserId</span> Long userId) {
 Â  Â <span class="hljs-selector-tag">return</span> Â "<span class="hljs-selector-tag">hello</span>";
}
</code></pre>
<p>éå¸¸çš„ç®€å•æ–¹ä¾¿ï¼</p>
<h4 data-id="heading-8">ï¼ˆäºŒï¼‰é‰´æƒæµç¨‹åˆ†æ</h4>
<p>é‰´æƒéœ€è¦æœ‰ <strong>è®¿é—®å¿«é€Ÿï¼Œèƒ½æ‰¿å—ä¸€å®šå‹åŠ›ï¼Œå†…å­˜å ç”¨ä¸å¤§ï¼Œæ”¯æŒçƒ­ä¿®æ”¹ï¼Œæ”¯æŒåˆ†å¸ƒå¼</strong>çš„ç‰¹ç‚¹ï¼Œé‚£<strong>Redis</strong>ä¾¿æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¸€ä¸ªé€‰æ‹©</p>
<p>æˆ‘ä»¬ç»´æŠ¤ <strong>user:{userId} = Set(roleKey)</strong> å’Œ <strong>role:{roleKey} = Set(functionKey)</strong></p>
<p>å‡å¦‚æœ‰ä¸€ä¸ªç”¨æˆ·è¿›æ¥ï¼Œæˆ‘ä»¬æ ¹æ®å…¶userIdåˆ°RedisæŸ¥å…¶roleï¼Œå†æ ¹æ®å…¶roleå»æ‹¿åˆ°å¯¹åº”çš„functionKey,ç„¶åæ¯”å¯¹è¯¥æ³¨é‡Šä¸­è¦æ±‚çš„åŠŸèƒ½ï¼ˆæƒé™ï¼‰è¿™ä¸ªç”¨æˆ·æ»¡ä¸æ»¡è¶³ï¼Œæ»¡è¶³çš„è¯å°±æ”¾è¡Œï¼Œåä¹‹æ‹¦æˆª</p>
<p>æ€è·¯å¾ˆç®€å•ï¼Œä½†æœ‰å¾ˆå¤šç»†èŠ‚ï¼š<strong>ç”¨æˆ·çš„roleæ˜¯æœ‰ç»§æ‰¿å…³ç³»çš„</strong>ï¼Œå‡å¦‚ä¸€ç”¨æˆ·æœ‰ä¸€ä¸ªroleæ˜¯adminï¼Œä»–å¯èƒ½ç»§æ‰¿äº†æ¥ç€å•†å®¶ï¼Œç”¨æˆ·çš„ä¼—å¤šfunctionsï¼ŒRedisé‡Œé¢çš„role-&gt;functionsä¹Ÿå¿…é¡»æ˜¯<strong>å·±ç»§æ‰¿</strong>çš„ï¼Œä¸ç„¶æ¯ä¸€æ¬¡é‰´æƒéƒ½è¦å»<strong>é€’å½’ç»§æ‰¿</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¸ºäº†è¯»è€Œç‰ºç‰²å†™ï¼Œä½†é‰´æƒæœ¬èº«å°±æ˜¯æ›´å€¾å‘äºè¯»</p>
<p>åœ¨<strong>ä¿®æ”¹roleçš„functions</strong>æ—¶ï¼Œéœ€è¦é€’å½’çš„ä¿®æ”¹å…¶<strong>çˆ¶è§’è‰²ï¼ˆç»§æ‰¿å®ƒçš„è§’è‰²ï¼‰</strong> çš„functionsï¼Œè¿™æ˜¯ä¸€ä¸ªè¾ƒä¸ºæ¶ˆè€—æ€§èƒ½çš„æ“ä½œï¼Œä½†æ˜¯roleæœ¬èº«æ•°æ®<strong>ä¸å¤š</strong>ï¼Œè¿˜èƒ½æ¥å—</p>
<p>ä¸é‡‡ç”¨<strong>user-&gt;functions</strong>çš„ç†ç”±æ˜¯ï¼Œéšå»äº†roleï¼Œå¯¼è‡´ä¿®æ”¹roleçš„æ—¶å€™éœ€è¦æœ‰ä¸€ä¸ª<strong>åå‘ç´¢å¼•</strong>å»æ‰¾åˆ°è¯¥roleçš„userï¼Œè¿™æå…¶æ¶ˆè€—æ€§èƒ½ï¼Œè€Œä¸”useræ•°é‡ä¼—å¤šï¼Œ<strong>å¾ˆå ç”¨å†…å­˜</strong>ï¼Œè¿™ä¹Ÿå°±æ˜¯RBAC3çš„é—®é¢˜</p>
<p>è€Œä¸”ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œ<strong>user-&gt;role</strong>ä¹Ÿåº”è¯¥é‡‡ç”¨æ‡’åŠ è½½ï¼Œä¸ç„¶ç”¨æˆ·æ•°ä¸€å¤šï¼Œä¸€æ¬¡åŠ è½½ç›´æ¥å¡æ­»</p>
<p>å¯¹äºTTLï¼Œ<strong>user-&gt;role</strong>åº”è¯¥æœ‰TTLï¼Œä¸€å¤©åŠå¤©éƒ½å¯ï¼Œ<strong>role-&gt;functions</strong>å¯ä»¥æŠŠTTLè®¾ä¸ºè¾ƒé•¿ï¼Œå› ä¸ºè¿™ä¸ªæ•°æ®æœ¬èº«ä¿®æ”¹çš„é¢‘ç‡ä¸å¤§ï¼Œåœ¨ä¿®æ”¹çš„æ—¶å€™ä¿®æ”¹å³å¯</p>
<p>ä¸‹é¢æ˜¯æµç¨‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25549a17e18b4002a2bde2c7115c4a00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=iF0f6O2beo2Lzho8QU9mf%2BAgh9E%3D" alt="image-20251227190322808.png" loading="lazy"/></p>
<p>ä¿®æ”¹æµç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82f1e18f1caa46bbb78e9d7a9e5949a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=WUY6ELUfdCzW%2BCYa1lvTEOxyBJk%3D" alt="image-20251227191152465.png" loading="lazy"/></p>
<hr/>
<p>å¤§è‡´æµç¨‹ä¾¿æ˜¯å¦‚æ­¤ï¼Œå¯¹äºRBACçš„æ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fcsrc.nist.gov%2FCSRC%2Fmedia%2FPublications%2Fconference-paper%2F2000%2F07%2F26%2Fthe-nist-model-for-role-based-access-control-towards-a-unified-%2Fdocuments%2Fsandhu-ferraiolo-kuhn-00.pdf" target="_blank" title="https://csrc.nist.gov/CSRC/media/Publications/conference-paper/2000/07/26/the-nist-model-for-role-based-access-control-towards-a-unified-/documents/sandhu-ferraiolo-kuhn-00.pdf" ref="nofollow noopener noreferrer">The NIST Model for Role-Based Access Control: Towards a Unified Standard</a></p>
<p>ä¹Ÿå¯ä»¥çœ‹æˆ‘åœ¨githubä¸­çš„å°demoï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FThanwinde%2Ftree-authority" target="_blank" title="https://github.com/Thanwinde/tree-authority" ref="nofollow noopener noreferrer">Thanwinde/tree-authority: ä¸€ä¸ªç®€å•çš„åŸºäºRBAC1çš„é‰´æƒç³»ç»Ÿ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ‰ TRAE ä¸€å¹´ä½¿ç”¨çš„è¿‡ç¨‹ä½“éªŒ ğŸ‰]]></title>    <link>https://juejin.cn/post/7588124225701953576</link>    <guid>https://juejin.cn/post/7588124225701953576</guid>    <pubDate>2025-12-28T01:48:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588124225701953576" data-draft-id="7588043318360031267" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ‰ TRAE ä¸€å¹´ä½¿ç”¨çš„è¿‡ç¨‹ä½“éªŒ ğŸ‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T01:48:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ‰ TRAE ä¸€å¹´ä½¿ç”¨çš„è¿‡ç¨‹ä½“éªŒ ğŸ‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:48:37.000Z" title="Sun Dec 28 2025 01:48:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šç¼–è¯‘é©å‘½ï¼Œæ™ºé€ æœªæ¥</h2>
<p>åœ¨2025å¹´çš„æ•°å­—æµªæ½®ä¸­ï¼Œæˆ‘ä»¬è¿æ¥äº†ä¸€åœºç¼–ç¨‹èŒƒå¼çš„é©å‘½â€”â€”TRAE AIç¼–è¯‘å™¨ï¼Œè¿™ä¸æ˜¯ä¸€æ¬¡ç®€å•çš„æŠ€æœ¯è¿­ä»£ï¼Œè€Œæ˜¯ä¸€æ¬¡å¼€å‘è€…ä½“éªŒçš„é‡å­é£è·ƒï¼è®©æˆ‘ä»¬æ­å¼€è¿™åœºæ™ºèƒ½ç¼–è¯‘é©å‘½çš„ç¥ç§˜é¢çº±ã€‚</p>
<h2 data-id="heading-1">1.TRAE AIç¼–è¯‘å™¨æ™ºèƒ½ç†è§£å¼•æ“</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 2025å¹´ä½ çš„é«˜å…‰æ—¶åˆ»</span>
<span class="hljs-keyword">const</span> yourMilestones = {
  <span class="hljs-attr">fastestCompile</span>: {
    <span class="hljs-attr">date</span>: <span class="hljs-string">"2025-03-15"</span>,
    <span class="hljs-attr">project</span>: <span class="hljs-string">"xxxxæ¡†æ¶"</span>,
    <span class="hljs-attr">time</span>: <span class="hljs-string">"0.8ç§’"</span>,
    <span class="hljs-attr">achievement</span>: <span class="hljs-string">"ğŸš€ æ‰“ç ´ä¸ªäººæœ€å¿«ç¼–è¯‘è®°å½•"</span>
  },
  <span class="hljs-attr">biggestOptimization</span>: {
    <span class="hljs-attr">date</span>: <span class="hljs-string">"2025-07-22"</span>, 
    <span class="hljs-attr">project</span>: <span class="hljs-string">"æ•°æ®å¯è§†åŒ–å¹³å°"</span>,
    <span class="hljs-attr">improvement</span>: <span class="hljs-string">"ç¼–è¯‘æ—¶é—´å‡å°‘76%"</span>,
    <span class="hljs-attr">memory</span>: <span class="hljs-string">"å†…å­˜å ç”¨é™ä½62%"</span>
  },
  <span class="hljs-attr">mostComplexProject</span>: {
    <span class="hljs-attr">date</span>: <span class="hljs-string">"2025-10-30"</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">"æ™ºèƒ½åŸå¸‚ç®¡ç†ç³»ç»Ÿ"</span>,
    <span class="hljs-attr">languages</span>: [<span class="hljs-string">"TypeScript"</span>, <span class="hljs-string">"Python"</span>, <span class="hljs-string">"Rust"</span>],
    <span class="hljs-attr">modules</span>: <span class="hljs-number">89</span>,
    <span class="hljs-attr">lines</span>: <span class="hljs-string">"42,317è¡Œ"</span>
  }
  <span class="hljs-comment">//åœ¨å†™æ•°æ®çš„æ—¶å€™TRAEæ™ºèƒ½æ¨èï¼šç®€æ´é«˜æ•ˆ âœ…</span>
};

<span class="hljs-comment">// TRAEç‹¬æœ‰çš„è·¨è¯­è¨€æ™ºèƒ½ä¼˜åŒ–</span>
<span class="hljs-comment">// è‡ªåŠ¨è¯†åˆ«å„è¯­è¨€æœ€ä½³ç‰¹æ€§å¹¶èåˆ</span>
â€‹
<span class="hljs-comment">// TypeScript + Pythoné£æ ¼æ··åˆï¼ˆTRAEæ™ºèƒ½æ¡¥æ¥ï¼‰</span>
<span class="hljs-meta">@decorator</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> processData&lt;T&gt;(<span class="hljs-attr">data</span>: T[]): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Result</span>&gt; {
    <span class="hljs-comment">// è‡ªåŠ¨ç±»å‹æ¨æ–­ + Pythonå¼åˆ—è¡¨æ¨å¯¼</span>
    <span class="hljs-keyword">const</span> filtered = data.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> <span class="hljs-title function_">isValid</span>(x))
                         .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> <span class="hljs-title function_">transform</span>(x));
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">processBatch</span>(filtered);
}
</code></pre>
<p><strong>ç”¨æˆ·å¿ƒå£°ï¼š</strong></p>
<blockquote>
<p>"å°±åƒæœ‰ä¸ªç¼–ç¨‹å¤§å¸ˆåœ¨æ—è¾¹æŒ‡å¯¼ï¼ŒTRAEèƒ½ç†è§£æˆ‘çš„æ„å›¾ï¼Œè€Œä¸ä»…ä»…æ˜¯æ‰§è¡ŒæŒ‡ä»¤ï¼"</p>
<p>åŸæœ¬è‡ªå·±æ•´ç†æ•°æ®æ„å»º45åˆ†é’Ÿï¼Œç°åœ¨å¹³å‡åªè¦25åˆ†é’Ÿã€‚æ•ˆç‡ç›´æ¥ç¿»å€ï¼"</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown">TRAEæ™ºèƒ½ç¼–è¯‘æ¨¡å¼ï¼š
  æ™ºèƒ½æ¨¡å¼:
<span class="hljs-bullet">    -</span> è‡ªåŠ¨åˆ†æé¡¹ç›®ç»“æ„
<span class="hljs-bullet">    -</span> åŠ¨æ€è°ƒæ•´ä¼˜åŒ–ç­–ç•¥
<span class="hljs-bullet">    -</span> å­¦ä¹ å›¢é˜Ÿåä½œæ¨¡å¼
  
  æ€§èƒ½æ¨¡å¼:
<span class="hljs-bullet">    -</span> æé™é€Ÿåº¦ä¼˜åŒ–
<span class="hljs-bullet">    -</span> æ¿€è¿›ç¼“å­˜ç­–ç•¥
<span class="hljs-bullet">    -</span> å¹¶è¡Œç¼–è¯‘åŠ é€Ÿ
<span class="hljs-code">    
  èŠ‚èƒ½æ¨¡å¼:
    - æ™ºèƒ½èµ„æºç®¡ç†
    - åå°é™é»˜ç¼–è¯‘
    - ç”µæ± å‹å¥½ä¼˜åŒ–
</span></code></pre>
<h2 data-id="heading-2">âš¡ æ•ˆç‡æå‡æ—¶é—´çº¿</h2>
<h3 data-id="heading-3">ğŸ“… 2025å¹´æˆé•¿è½¨è¿¹</h3>
<h3 data-id="heading-4">ğŸ“¸ å¹´åº¦æ—¶åˆ»å›é¡¾</h3>
<pre><code class="hljs language-markdown" lang="markdown">âœ¨ éš¾å¿˜çš„ç¼–è¯‘ç¬é—´ï¼š
<span class="hljs-bullet">1.</span> æœ€å¤æ‚çš„ç¼–è¯‘ï¼šæ¶‰åŠ89ä¸ªæ¨¡å—ï¼Œ42ç§’å®Œæˆ
<span class="hljs-bullet">2.</span> æœ€ç¥å¥‡çš„ä¼˜åŒ–ï¼šä¸€è¡Œå»ºè®®èŠ‚çœ3å°æ—¶å·¥ä½œé‡  
<span class="hljs-bullet">3.</span> æœ€åŠæ—¶çš„é¢„è­¦ï¼šé˜»æ­¢äº†çº¿ä¸Šé‡å¤§æ•…éšœ
<span class="hljs-bullet">4.</span> æœ€è‡ªè±ªçš„é¡¹ç›®ï¼šä¸ºå¼€æºç¤¾åŒºè´¡çŒ®æ ¸å¿ƒä¼˜åŒ–
</code></pre>
<blockquote>
<p><strong>"ä¼˜é›…çš„ä»£ç ä¸ä»…è¦èƒ½è¿è¡Œï¼Œæ›´è¦ä¼šæ€è€ƒ"</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 18 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•è®©ä½ çš„åº”ç”¨å¿«30%]]></title>    <link>https://juejin.cn/post/7588093282530721844</link>    <guid>https://juejin.cn/post/7588093282530721844</guid>    <pubDate>2025-12-28T00:16:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282530721844" data-draft-id="7588092534162276352" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 18 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•è®©ä½ çš„åº”ç”¨å¿«30%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T00:16:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 18 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•è®©ä½ çš„åº”ç”¨å¿«30%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:16:45.000Z" title="Sun Dec 28 2025 00:16:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>React 18 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•è®©ä½ çš„åº”ç”¨å¿«30%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>React 18å¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§ï¼Œå°¤å…¶æ˜¯å¹¶å‘æ¸²æŸ“ï¼ˆConcurrent Renderingï¼‰å’Œè‡ªåŠ¨æ‰¹å¤„ç†ï¼ˆAutomatic Batchingï¼‰ç­‰èƒ½åŠ›ï¼Œè¿›ä¸€æ­¥æå‡äº†åº”ç”¨çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œè®¸å¤šå¼€å‘è€…åœ¨ä½¿ç”¨Hooksæ—¶ä»åœç•™åœ¨åŸºç¡€å±‚é¢ï¼Œæœªèƒ½å……åˆ†åˆ©ç”¨å…¶æ½œåŠ›ã€‚äº‹å®ä¸Šï¼ŒReact Hooksçš„è®¾è®¡åˆè¡·ä¸ä»…æ˜¯ä¸ºäº†ç®€åŒ–çŠ¶æ€é€»è¾‘çš„å¤ç”¨ï¼Œè¿˜éšè—äº†è®¸å¤šå¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½çš„æŠ€å·§ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹å’Œæ€§èƒ½åˆ†æï¼Œå¸®åŠ©ä½ è§£é”Reactåº”ç”¨çš„é¢å¤–æ€§èƒ½æ½œåŠ›ã€‚è¿™äº›æŠ€å·§ç»è¿‡å®é™…é¡¹ç›®éªŒè¯ï¼Œåˆç†ä½¿ç”¨åç”šè‡³èƒ½è®©åº”ç”¨é€Ÿåº¦æå‡30%ä»¥ä¸Šã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <code>useMemo</code> + <code>useCallback</code>ï¼šé¿å…ä¸å¿…è¦çš„å­ç»„ä»¶é‡æ¸²æŸ“</h3>
<h4 data-id="heading-4">é—®é¢˜èƒŒæ™¯</h4>
<p>åœ¨Reactä¸­ï¼Œçˆ¶ç»„ä»¶çš„çŠ¶æ€æ›´æ–°ä¼šå¯¼è‡´æ‰€æœ‰å­ç»„ä»¶é»˜è®¤é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å­ç»„ä»¶çš„propså¹¶æœªå˜åŒ–ã€‚è¿™ç§â€œè¿‡åº¦æ¸²æŸ“â€åœ¨å¤æ‚åº”ç”¨ä¸­ä¼šå¸¦æ¥æ˜æ˜¾çš„æ€§èƒ½æŸè€—ã€‚</p>
<h4 data-id="heading-5">ä¼˜åŒ–æ–¹æ¡ˆ</h4>
<p>é€šè¿‡<code>useMemo</code>å’Œ<code>useCallback</code>ç¼“å­˜å€¼å’Œå‡½æ•°ï¼Œå¯ä»¥é¿å…å­ç»„ä»¶çš„æ— æ•ˆæ¸²æŸ“ï¼š</p>
<ul>
<li><code>useMemo</code>ï¼šç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</li>
<li><code>useCallback</code>ï¼šç¼“å­˜å‡½æ•°å¼•ç”¨ï¼Œé¿å…å› å‡½æ•°é‡æ–°åˆ›å»ºå¯¼è‡´çš„å­ç»„ä»¶æ›´æ–°ã€‚</li>
</ul>
<h4 data-id="heading-6">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ExpensiveComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ compute, data }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">compute</span>(data);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{result}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], []); <span class="hljs-comment">// ç¼“å­˜æ•°æ®</span>
  <span class="hljs-keyword">const</span> compute = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> data.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b), []); <span class="hljs-comment">// ç¼“å­˜å‡½æ•°</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(c =&gt; c + 1)}&gt;Click {count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ExpensiveComponent</span> <span class="hljs-attr">compute</span>=<span class="hljs-string">{compute}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-7">æ€§èƒ½æ”¶ç›Š</h4>
<ul>
<li><strong>å‡å°‘å­ç»„ä»¶æ¸²æŸ“æ¬¡æ•°</strong>ï¼šé€šè¿‡<code>React.memo</code>é…åˆ<code>useCallback</code>å’Œ<code>useMemo</code>ï¼Œå¯ä»¥é¿å…å› çˆ¶ç»„ä»¶æ— å…³çŠ¶æ€æ›´æ–°å¯¼è‡´çš„å­ç»„ä»¶é‡æ¸²æŸ“ã€‚</li>
<li><strong>é™ä½è®¡ç®—å¼€é”€</strong>ï¼šå¯¹äºå¤æ‚è®¡ç®—æˆ–å¤§æ•°æ®å¤„ç†ï¼Œ<code>useMemo</code>èƒ½æ˜¾è‘—å‡å°‘é‡å¤è®¡ç®—çš„å¼€é”€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">2. <code>useTransition</code>ï¼šä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§æ›´æ–°</h3>
<h4 data-id="heading-9">Reactå¹¶å‘ç‰¹æ€§çš„æ ¸å¿ƒHook</h4>
<p>Reactå¼•å…¥å¹¶å‘æ¨¡å¼çš„æ ¸å¿ƒç›®æ ‡ä¹‹ä¸€æ˜¯è®©åº”ç”¨èƒ½å¤ŸåŒºåˆ†â€œç´§æ€¥â€å’Œâ€œéç´§æ€¥â€æ›´æ–°ã€‚ä¾‹å¦‚ï¼šç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ˜¯ç´§æ€¥ä»»åŠ¡ï¼›è€Œæœç´¢ç»“æœçš„è¿‡æ»¤å¯èƒ½æ˜¯éç´§æ€¥ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-10"><code>useTransition</code>çš„ä½œç”¨</h4>
<p>å®ƒå…è®¸ä½ å°†æŸäº›çŠ¶æ€æ ‡è®°ä¸ºâ€œä½ä¼˜å…ˆçº§â€ï¼Œä»è€Œä¸é˜»å¡ç”¨æˆ·äº¤äº’ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> [isPending, startTransition] = <span class="hljs-title function_">useTransition</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">e</span>) {
   <span class="hljs-title function_">setInput</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>); <span class="hljs-comment">// High-priority update</span>
   <span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> {
     <span class="hljs-title function_">setFilteredData</span>(<span class="hljs-title function_">filter</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)); <span class="hljs-comment">// Low-priority update</span>
   });
}
</code></pre>
<h4 data-id="heading-11"><strong>é€‚ç”¨åœºæ™¯</strong></h4>
<ul>
<li><strong>æœç´¢/è¿‡æ»¤å¤§åˆ—è¡¨</strong></li>
<li><strong>åŠ¨æ€åŠ è½½è·¯ç”±</strong></li>
</ul>
<hr/>
<p>###3ï¼å·§ç”¨Deferred Values (<code>defer</code>)
åœ¨æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬å¸Œæœ›å»¶è¿ŸæŸäº›UIå†…å®¹çš„å±•ç¤ºä»¥é¿å…é—ªçƒæˆ–å¡é¡¿ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> deferredValue=<span class="hljs-title function_">unstable_deferredValue</span>(value)
</code></pre>
<p>å½“valueå˜åŒ–æ—¶reactä¼šå°è¯•å»¶è¿Ÿæ–°uiå†…å®¹çš„å±•ç¤ºç›´åˆ°æµè§ˆå™¨ç©ºé—²æ—¶æ‰å®Œæˆç»˜åˆ¶ã€‚</p>
<hr/>
<p>##æ€»ç»“</p>
<p>æœ¬æ–‡ä»‹ç»äº†äº”ä¸ªå…³é”®ä½†å¸¸è¢«å¿½è§†çš„react hooksæŠ€å·§ï¼š</p>
<p>1ï¼åˆ©ç”¨memoization hooks(<code> usememo</code>,<code>usecallback</code>)å‡å°‘æ— æ•ˆé‡æ¸²æŸ’
2ï¼é€šè¿‡transitionç®¡ç†æ›´æ–°ä¼˜å…ˆçº§ä»¥æå‡äº¤äº’æµç•…åº¦
3ï¼ä½¿ç”¨deferred valuesæ¨è¿Ÿéå…³é”®å†…å®¹åŠ è½½</p>
<p>æ­£ç¡®è¿ç”¨è¿™äº›æŠ€æœ¯ä¸ä»…èƒ½æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡è¿˜èƒ½æ˜¾è‘—æ”¹å–„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>å¸Œæœ›ä½ èƒ½å°†è¿™äº›æ–¹æ³•åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­å¹¶è§è¯æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡]]></title>    <link>https://juejin.cn/post/7588146449005936676</link>    <guid>https://juejin.cn/post/7588146449005936676</guid>    <pubDate>2025-12-28T00:23:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449005936676" data-draft-id="7588300640599130118" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡"/> <meta itemprop="keywords" content="åç«¯,PHP,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-28T00:23:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:23:07.000Z" title="Sun Dec 28 2025 00:23:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡</h2>
<h3 data-id="heading-1">å…³äº CatchAdmin</h3>
<p>CatchAdmin æ˜¯ä¸€æ¬¾åŸºäº Laravel å’Œ Element Plus äºŒæ¬¡å¼€å‘è€Œæˆåå°ç®¡ç†ç³»ç»Ÿã€‚Laravel ç¤¾åŒºä¹Ÿæœ‰è®¸å¤šéå¸¸ä¼˜ç§€çš„åå°ç®¡ç†ç³»ç»Ÿï¼Œä¾‹å¦‚ Novaï¼Œå®˜æ–¹å‡ºå“ï¼Œå½“ç„¶æ˜¯æ”¶è´¹çš„ï¼Œå…è´¹çš„æœ‰åŸºäº Livewire çš„ Filamentï¼Œè¿˜æœ‰ä¸å¾—ä¸è¯´çš„ Laravel Adminã€‚å®ƒé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼ŒCatchAdmin é›†æˆäº† Token é‰´æƒã€æƒé™ç®¡ç†ã€åŠ¨æ€è·¯ç”±ã€åŠ¨æ€è¡¨æ ¼ã€åˆ†é¡µå°è£…ã€èµ„æºæƒé™ã€ä¸Šä¼ ä¸‹è½½ã€ä»£ç ç”Ÿæˆå™¨æ”¯æŒä¸€é”®å¯¼å‡ºå¯¼å…¥ï¼Œæ•°æ®å›æ”¶ç«™ï¼Œé™„ä»¶ç®¡ç†çš„ä¸€æ¬¾æ¨¡å—åŒ–æ¡†æ¶ã€‚Laravel æ¡†æ¶ä»…ä»…ä½œä¸º Api è¾“å‡ºã€‚å°†ç®¡ç†ç³»ç»Ÿæ¨¡å—ä¹‹é—´çš„è€¦åˆé™åˆ°äº†æœ€ä½é™åº¦ã€‚æ¯ä¸ªæ¨¡å—ä¹‹é—´éƒ½æœ‰ç‹¬ç«‹çš„æ§åˆ¶å™¨ï¼Œè·¯ç”±ï¼Œæ¨¡å‹ï¼Œæ•°æ®è¡¨ã€‚åœ¨å¼€å‘ä¸Šå°½å¯èƒ½å°†æ¨¡å—ä¹‹é—´çš„å½±å“é™åˆ°æœ€ä½ï¼Œé™ä½äº†å¼€å‘ä¸Šçš„éš¾åº¦ã€‚åŸºäº CatchAdmin å¯ä»¥å¼€å‘ CMSï¼ŒCRMï¼ŒOA ç­‰ç­‰ç³»ç»Ÿã€‚ä¹Ÿå°è£…äº†å¾ˆå¤šå®ç”¨çš„å·¥å…·ï¼Œæå‡å¼€å‘ä½“éªŒã€‚</p>
<h3 data-id="heading-2">æœ¬æ¬¡æ›´æ–°äº®ç‚¹</h3>
<h4 data-id="heading-3">å¯¼å…¥å¯¼å‡ºåŠŸèƒ½å¢å¼º</h4>
<p>Beta.3 ç‰ˆæœ¬å¯¹æ•°æ®å¯¼å…¥å¯¼å‡ºåŠŸèƒ½è¿›è¡Œäº†æ ¸å¿ƒå±‚é¢çš„å¢å¼ºã€‚åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæ‰¹é‡å¯¼å…¥ç”¨æˆ·ã€è®¢å•ã€å•†å“ç­‰æ•°æ®æ˜¯é«˜é¢‘éœ€æ±‚ã€‚æ­¤æ¬¡æ›´æ–°ä¼˜åŒ–äº†å¯¼å…¥å¯¼å‡ºçš„åº•å±‚é€»è¾‘ï¼Œæ”¯æŒæ›´å¤§æ•°æ®é‡çš„å¤„ç†ï¼Œå¹¶æä¾›äº†æ›´çµæ´»çš„å­—æ®µæ˜ å°„é…ç½®ã€‚åœ¨ä»£ç ç”Ÿæˆå™¨ä¸­å‹¾é€‰"æ”¯æŒå¯¼å…¥å¯¼å‡º"ï¼Œå³å¯ä¸ºæ¨¡å—è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼Œæ— éœ€æ‰‹å†™ Excel å¤„ç†ä»£ç ã€‚</p>
<h4 data-id="heading-4">æ’ä»¶ç³»ç»Ÿæ­£å¼æ”¯æŒ</h4>
<p>æ’ä»¶ç³»ç»Ÿæ˜¯ v5.0 çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚CatchAdmin æ²¡æœ‰è‡ªå·±å‘æ˜ä¸€å¥—æ’ä»¶æœºåˆ¶ï¼Œè€Œæ˜¯ç›´æ¥ç»‘å®š Composer ç”Ÿæ€â€”â€”ä»»ä½•ç¬¦åˆ Laravel Package è§„èŒƒçš„ Composer åŒ…éƒ½å¯ä»¥ä½œä¸º CatchAdmin æ’ä»¶ä½¿ç”¨ã€‚</p>
<p>æœ¬æ¬¡æ›´æ–°å¢å¼ºäº†æ’ä»¶å®‰è£…çš„ Hook åŠŸèƒ½ï¼Œå¼€å‘è€…å¯ä»¥åœ¨æ’ä»¶å®‰è£…ã€å¸è½½æ—¶æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼ˆå¦‚åˆå§‹åŒ–é…ç½®ã€åˆ›å»ºæ•°æ®è¡¨ç­‰ï¼‰ã€‚åŒæ—¶ä¼˜åŒ–äº†æ’ä»¶å®‰è£…é¡µé¢ï¼Œæ”¯æŒåœ¨åå°å¯è§†åŒ–ç®¡ç†æ’ä»¶çš„å¯ç”¨ã€ç¦ç”¨ä¸å¸è½½ã€‚</p>
<p>è¿™ç§è®¾è®¡è®© CatchAdmin å¯ä»¥æ— ç¼é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆæ”¯ä»˜ã€çŸ­ä¿¡ã€OSS ç­‰ï¼‰ï¼Œä¹Ÿæ–¹ä¾¿å°†ä¸šåŠ¡é€»è¾‘å°è£…æˆæ’ä»¶åœ¨ä¸åŒé¡¹ç›®é—´å¤ç”¨ã€‚</p>
<h4 data-id="heading-5">SFC è¿œç¨‹åŠ è½½æ€§èƒ½ä¼˜åŒ–</h4>
<p>CatchAdmin çš„å‰ç«¯æ”¯æŒ"å³æ—¶æ¸²æŸ“"ï¼Œå³æ— éœ€ç¼–è¯‘å³å¯ç›´æ¥åŠ è½½ Vue å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ã€‚è¿™åœ¨å¼€å‘é˜¶æ®µéå¸¸æ–¹ä¾¿ï¼Œä½†è¿œç¨‹åŠ è½½ä¼šå½±å“é¦–å±æ¸²æŸ“é€Ÿåº¦ã€‚</p>
<p>Beta.3 ç‰ˆæœ¬ä¼˜åŒ–äº† SFC çš„åŠ è½½æœºåˆ¶ï¼Œé€šè¿‡ç¼“å­˜ç­–ç•¥å’ŒæŒ‰éœ€åŠ è½½ï¼Œæ˜¾è‘—æå‡äº†é¡µé¢æ¸²æŸ“é€Ÿåº¦ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œåˆ—è¡¨é¡µçš„é¦–æ¬¡åŠ è½½æ—¶é—´ç¼©çŸ­äº†çº¦ 30%ã€‚</p>
<h4 data-id="heading-6">å®‰è£…ä½“éªŒä¼˜åŒ–</h4>
<p>ç®€åŒ–äº†é¡¹ç›®åˆå§‹åŒ–æµç¨‹ï¼Œä¿®å¤äº†å›  Composer ä¾èµ–å†²çªå¯¼è‡´çš„å®‰è£…å¤±è´¥é—®é¢˜ã€‚ç°åœ¨ä»åˆ›å»ºé¡¹ç›®åˆ°å¯åŠ¨åå°ï¼Œæ•´ä¸ªè¿‡ç¨‹æ›´åŠ æµç•…ï¼ŒåŸºæœ¬ä¸éœ€è¦æ‰‹åŠ¨å¹²é¢„ã€‚</p>
<p>æ­¤å¤–ï¼Œå·¦ä¾§èœå•ç°åœ¨æ”¯æŒè‡ªåŠ¨æ›´æ–°â€”â€”å®‰è£…æ–°æ¨¡å—æˆ–æ’ä»¶åï¼Œåˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°å¯¹åº”çš„èœå•é¡¹ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®è·¯ç”±ã€‚</p>
<h3 data-id="heading-7">æ’ä»¶å¸‚åœºå·²æ­£å¼ä¸Šçº¿</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.vip%2Fplugins" target="_blank" title="https://catchadmin.vip/plugins" ref="nofollow noopener noreferrer">CatchAdmin æ’ä»¶å¸‚åœº</a></p>
<h3 data-id="heading-8">å¿«é€Ÿå¼€å§‹</h3>
<pre><code class="hljs language-shell" lang="shell">composer global -W require catchadmin/installer
<span class="hljs-meta prompt_">
# </span><span class="bash">æ–°å»ºé¡¹ç›®</span>
catch new catchadmin
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…é¡¹ç›®</span>
cd catchadmin &amp;&amp; php artisan catch:install
<span class="hljs-meta prompt_">
# </span><span class="bash">å¯åŠ¨é¡¹ç›®</span>
composer run dev
</code></pre>
<h3 data-id="heading-9">åŠŸèƒ½</h3>
<ul>
<li>â˜‘ï¸<strong>ç”¨æˆ·ç®¡ç†</strong> å®Œæˆç”¨æˆ·æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤é…ç½®ï¼Œæ”¯æŒä¸åŒç”¨æˆ·ç™»å½•åå°çœ‹åˆ°ä¸åŒçš„é¦–é¡µ</li>
<li>â˜‘ï¸<strong>éƒ¨é—¨ç®¡ç†</strong> éƒ¨é—¨ç»„ç»‡æœºæ„ï¼ˆå…¬å¸ã€éƒ¨é—¨ã€å°ç»„ï¼‰ï¼Œæ ‘ç»“æ„å±•ç°</li>
<li>â˜‘ï¸<strong>å²—ä½ç®¡ç†</strong> å¯ä»¥ç»™ç”¨æˆ·é…ç½®æ‰€æ‹…ä»»èŒåŠ¡</li>
<li>â˜‘ï¸<strong>è§’è‰²ç®¡ç†</strong> æ ‘ç»“æ„è®¾è®¡ï¼Œæ”¯æŒè§’è‰²èœå•å’ŒæŒ‰é’®æƒé™åˆ†é…ï¼Œæ”¯æŒè§’è‰²æ•°æ®æƒé™åˆ†é…ã€å¼ºå¤§çš„è§’è‰²ç®¡ç†ä½“ç³»</li>
<li>â˜‘ï¸<strong>èœå•ç®¡ç†</strong> é…ç½®ç³»ç»Ÿèœå•å’ŒæŒ‰é’®ç­‰</li>
<li>â˜‘ï¸<strong>å­—å…¸ç®¡ç†</strong> å¯¹ç³»ç»Ÿä¸­ç»å¸¸ä½¿ç”¨å¹¶ä¸”å›ºå®šçš„æ•°æ®å¯ä»¥é‡å¤ä½¿ç”¨å’Œç»´æŠ¤</li>
<li>â˜‘ï¸<strong>ç³»ç»Ÿé…ç½®</strong> ç³»ç»Ÿçš„ä¸€äº›å¸¸ç”¨è®¾ç½®ç®¡ç†</li>
<li>â˜‘ï¸<strong>æ“ä½œæ—¥å¿—</strong> ç”¨æˆ·å¯¹ç³»ç»Ÿçš„ä¸€äº›æ­£å¸¸æ“ä½œçš„æŸ¥è¯¢</li>
<li>â˜‘ï¸<strong>ç™»å½•æ—¥å¿—</strong> ç”¨æˆ·ç™»å½•ç³»ç»Ÿçš„è®°å½•æŸ¥è¯¢</li>
<li>â˜‘ï¸<strong>æ–‡ä»¶ä¸Šä¼ </strong> æ”¯æŒ<code>æœ¬åœ°</code>ã€<code>ä¸ƒç‰›äº‘</code>ã€<code>é˜¿é‡Œäº‘</code>ã€<code>è…¾è®¯äº‘</code></li>
<li>â˜‘ï¸<strong>é™„ä»¶ç®¡ç†</strong> ç®¡ç†å½“å‰ç³»ç»Ÿä¸Šä¼ çš„æ–‡ä»¶åŠå›¾ç‰‡ç­‰ä¿¡æ¯</li>
<li>â˜‘ï¸<strong>æ•°æ®è¡¨ç»´æŠ¤</strong> å¯¹ç³»ç»Ÿçš„æ•°æ®è¡¨å¯ä»¥è¿›è¡Œæ¸…ç†ç¢ç‰‡å’Œä¼˜åŒ–ï¼Œå¹¶ä¸”ç®¡ç†æ‰€æœ‰æ•°æ®çš„å›æ”¶å’Œé”€æ¯</li>
<li>â˜‘ï¸<strong>ä»£ç ç”Ÿæˆ</strong> å‰åç«¯ä»£ç çš„ç”Ÿæˆï¼ˆphpã€vueã€ æ•°æ®åº“è¿ç§»ï¼‰ï¼Œæ”¯æŒä¸€é”®ç”Ÿæˆåˆ°æ¨¡å—</li>
<li>â˜‘ï¸<strong>æ”¯æŒ Vue å³æ—¶æ¸²æŸ“</strong> æ”¯æŒå‰ç«¯ Vue å³æ—¶æ¸²æŸ“ æ— éœ€ç¼–è¯‘</li>
<li>â˜‘ï¸<strong>æ”¯æŒæ’ä»¶ç³»ç»Ÿ</strong> CatchAdmin æ’ä»¶å³ Composer åŒ…ï¼Œæ— éœ€å†å­¦ä¸€æ¬¡æ’ä»¶å¼€å‘ï¼Œå®Œå…¨ç»‘å®š Composer ç”Ÿæ€</li>
</ul>
<h3 data-id="heading-10">åœ¨çº¿ä½“éªŒ</h3>
<ul>
<li>æ¼”ç¤ºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpro.catchadmin.com" target="_blank" title="https://pro.catchadmin.com" ref="nofollow noopener noreferrer">pro.catchadmin.com</a></li>
<li>è´¦æˆ·ï¼š<code>catch@admin.com</code></li>
<li>å¯†ç ï¼š<code>catchadmin</code></li>
</ul>
<h3 data-id="heading-11">é¡¹ç›®åœ°å€</h3>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FJaguarJack%2Fcatch-admin" target="_blank" title="https://github.com/JaguarJack/catch-admin" ref="nofollow noopener noreferrer">github.com/JaguarJack/â€¦</a></li>
<li>Giteeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fcatchadmin%2Fcatchadmin" target="_blank" title="https://gitee.com/catchadmin/catchadmin" ref="nofollow noopener noreferrer">gitee.com/catchadmin/â€¦</a></li>
</ul>
<h3 data-id="heading-12">ç•Œé¢é¢„è§ˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22ee6d61947949968475529847960b10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmluZ29Hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486187&amp;x-signature=uVOz8TqSnNI%2B6GWQ1gworl5LlbI%3D" alt="CatchAdmin v5.0 Beta æ¬¢è¿é¡µ" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb362fcd7e3c48c59b7d84eecc518065~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmluZ29Hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486187&amp;x-signature=Wfz%2FYZH1Vy4OAaA6Mu3%2F2KiVMb0%3D" alt="CatchAdmin v5.0 Beta æ•°æ®é¢æ¿" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc174d54e85a48119ad7980ab173deab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmluZ29Hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486187&amp;x-signature=Z9kJN6qRbScmi4IaSPDAQAb5GiA%3D" alt="CatchAdmin v5.0 Beta ç”¨æˆ·ç®¡ç†" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c13ea608179b40529a6b16839966a644~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmluZ29Hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486187&amp;x-signature=ePYKf%2Bxi%2Ffwt4XYHV8gmKAQ7%2FY4%3D" alt="CatchAdmin v5.0 Beta ä»£ç ç”Ÿæˆ" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2025-12%2Fcatchadmin-v5-beta" target="_blank" title="https://catchadmin.com/post/2025-12/catchadmin-v5-beta" ref="nofollow noopener noreferrer">åŸæ–‡- å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é‡‘ä»“æ•°æ®åº“ã€‘ksql æŒ‡å—ï¼ˆäº”ï¼‰ â€”â€” åˆ›å»ºä¸ç®¡ç†ç´¢å¼•å’Œè§†å›¾ï¼ˆKingbaseES æŸ¥è¯¢ä¼˜åŒ–æ ¸å¿ƒï¼‰]]></title>    <link>https://juejin.cn/post/7588086766249132083</link>    <guid>https://juejin.cn/post/7588086766249132083</guid>    <pubDate>2025-12-28T00:31:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766249132083" data-draft-id="7588104741610569738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é‡‘ä»“æ•°æ®åº“ã€‘ksql æŒ‡å—ï¼ˆäº”ï¼‰ â€”â€” åˆ›å»ºä¸ç®¡ç†ç´¢å¼•å’Œè§†å›¾ï¼ˆKingbaseES æŸ¥è¯¢ä¼˜åŒ–æ ¸å¿ƒï¼‰"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-28T00:31:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é‡‘ä»“æ•°æ®åº“ã€‘ksql æŒ‡å—ï¼ˆäº”ï¼‰ â€”â€” åˆ›å»ºä¸ç®¡ç†ç´¢å¼•å’Œè§†å›¾ï¼ˆKingbaseES æŸ¥è¯¢ä¼˜åŒ–æ ¸å¿ƒï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:31:10.000Z" title="Sun Dec 28 2025 00:31:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc9cfc399d0f419985382edb3f07627a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=AVxDGNXwajtU%2BvM%2F5fUFSVnn7Ys%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>æŒæ¡è¡¨çš„åŸºæœ¬è¿ä½œä¹‹åï¼Œè‹¥æƒ³ä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡å¹¶ç®€åŒ–æ•°æ®è®¿é—®ï¼Œå°±è¦å»å­¦ä¹ â€œç´¢å¼•â€å’Œâ€œè§†å›¾â€çš„è¿ç”¨ï¼Œç´¢å¼•ç±»ä¼¼äºâ€œä¹¦ç±ç›®å½•â€ï¼Œå¯ä»¥æå¤§åœ°åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼›è§†å›¾ç±»ä¼¼â€œæ•°æ®çª—å£â€ï¼Œèƒ½å¤Ÿéšè—å¤æ‚çš„æŸ¥è¯¢é€»è¾‘ï¼Œè¿˜èƒ½æ§åˆ¶æ•°æ®çš„å¯è§æ€§ã€‚æœ¬æ–‡å°±â€œksqlå‘½ä»¤è¡Œæ“ä½œç´¢å¼•ä¸è§†å›¾â€å±•å¼€è®ºè¿°ï¼ŒæŠŠä»â€œä½œç”¨åˆ°åˆ›å»ºï¼Œå†åˆ°æŸ¥çœ‹ï¼Œç»´æŒç›´è‡³åˆ é™¤â€çš„å…¨è¿‡ç¨‹æ‹†è§£æˆå®é™…æ“ä½œæ­¥éª¤ï¼Œå¹¶ç»“åˆä¾‹å­å’Œé¿å‘æç¤ºï¼Œä»¥ä½¿åˆå­¦è€…èƒ½å¤Ÿé¢†æ‚Ÿå¹¶ä»˜è¯¸å®è¡Œã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/083024ed594c4e09b9016a8c2b6ae714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=UALdp3zTq4EqYHTIjbevxhKh5oY%3D" alt="" loading="lazy"/>
@[toc]</p>
<h3 data-id="heading-1">ä¸€ã€å‰ç½®å‡†å¤‡ï¼šç¡®è®¤æ“ä½œåŸºç¡€ï¼ˆè¡”æ¥å‰æ–‡ï¼Œç¡®ä¿è¿è´¯ï¼‰</h3>
<p>ç´¢å¼•å’Œè§†å›¾è¦ä¾æ‰˜å·²æœ‰çš„è¡¨ï¼Œæ‰€ä»¥å¾—å…ˆåšå¥½å¦‚ä¸‹é¢„å¤‡å·¥ä½œï¼ˆå‚ç…§ç¬¬å››ç¯‡â€œè¡¨çš„è¿ä½œâ€ç›¸å…³å†…å®¹ï¼‰ï¼Œä»¥é˜²æ­¢åœ¨æ“ä½œè¿‡ç¨‹ä¸­å› ä¸ºä¾èµ–ç¼ºå¤±è€Œå‡ºç°é”™è¯¯æç¤ºã€‚</p>
<h4 data-id="heading-2">1.1 1. è¿æ¥æ•°æ®åº“å¹¶åˆ‡æ¢ç›®æ ‡æ¨¡å¼</h4>
<p>åˆ©ç”¨ ksql å»ºç«‹ä¸æœ¬åœ° KingbaseES æ•°æ®åº“çš„è”ç³»ï¼Œè½¬åˆ°å…ˆå‰æ‰€åˆ›å»ºçš„ <code>test_schema</code> æ¨¡å¼å½“ä¸­ï¼Œæ£€æŸ¥ç›®æ ‡è¡¨æ˜¯å¦ç¡®å®å­˜åœ¨ï¼ˆæ‹¿ <code>sys_user</code> è¡¨æ¥è¯´ï¼Œè¦æ˜¯æ²¡æœ‰å°±å†æ¬¡åˆ›å»ºå®ƒï¼Œæˆ–è€…ç”¨ä¸€ä¸ªæ–°çš„ä¾‹å­ï¼‰ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ç¡®ä¿åç»­æ“ä½œèƒ½å¤Ÿé¡ºåˆ©æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. è¿æ¥æ•°æ®åº“ï¼ˆè‹¥æœªè¿æ¥ï¼‰</span>
ksql <span class="hljs-operator">-</span>d kingbase <span class="hljs-operator">-</span>U <span class="hljs-keyword">system</span>
<span class="hljs-comment">-- 2. åˆ‡æ¢åˆ° test_schema æ¨¡å¼</span>
<span class="hljs-keyword">SET</span> search_path <span class="hljs-keyword">TO</span> test_schema, public;
<span class="hljs-comment">-- 3. ç¡®è®¤ç›®æ ‡è¡¨å­˜åœ¨ï¼ˆå¦‚ sys_user è¡¨ï¼‰</span>
\dt sys_user;
<span class="hljs-comment">-- è‹¥ä¸å­˜åœ¨ï¼Œåˆ›å»ºç¤ºä¾‹è¡¨ï¼ˆç”¨äºåç»­ç´¢å¼•/è§†å›¾æ“ä½œï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> sys_user (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    phone <span class="hljs-type">CHAR</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    create_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) TABLESPACE test_ts;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6b5c243932443dc8cbbe5de8c694016~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=G0tY%2BgoaAjKp%2BF1KfEyucsXbhIc%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰§è¡Œåè‹¥æ˜¾ç¤º <code>Table "test_schema.sys_user" does not exist</code>ï¼Œåˆ™å…ˆæ‰§è¡Œä¸Šè¿° <code>CREATE TABLE</code> è¯­å¥åˆ›å»ºè¡¨ï¼Œç¡®ä¿åç»­æ“ä½œæœ‰è½½ä½“ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e52d9913afa04d62bf8f7261fa9de948~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=N77MBA7G%2F%2B2aBjWlCDMeN4axOrU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">1.2 2. æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆç”¨äºéªŒè¯ç´¢å¼• / è§†å›¾æ•ˆæœï¼‰</h4>
<p>ä¸ºäº†åç»­å¯ä»¥æ£€æµ‹ç´¢å¼•çš„æŸ¥è¯¢é€Ÿåº¦ï¼Œå¹¶æŸ¥çœ‹è§†å›¾çš„æ•°æ®å±•ç¤ºæƒ…å†µï¼Œè¦ç»™ <code>sys_user</code> è¡¨å¢æ·»å¤§é‡æ¨¡æ‹Ÿæ•°æ®æ¥åšæµ‹è¯•ï¼ˆèƒ½å¤Ÿæ·»åŠ ä¸Šåƒæ¡è®°å½•ä»¥æ¨¡æ‹ŸçœŸå®åœºæ™¯ï¼‰ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ‰¹é‡æ’å…¥10æ¡æµ‹è¯•æ•°æ®ï¼ˆå¯å¤åˆ¶æ‰©å±•ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_schema.sys_user (name, phone, email)
<span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'13800138000'</span>, <span class="hljs-string">'zhangsan@test.com'</span>),
(<span class="hljs-string">'æå››'</span>, <span class="hljs-string">'13900139000'</span>, <span class="hljs-string">'lisi@test.com'</span>),
(<span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-string">'13700137000'</span>, <span class="hljs-string">'wangwu@test.com'</span>),
(<span class="hljs-string">'èµµå…­'</span>, <span class="hljs-string">'13600136000'</span>, <span class="hljs-string">'zhaoliu@test.com'</span>),
(<span class="hljs-string">'å­™ä¸ƒ'</span>, <span class="hljs-string">'13500135000'</span>, <span class="hljs-string">'sunqi@test.com'</span>),
(<span class="hljs-string">'å‘¨å…«'</span>, <span class="hljs-string">'13400134000'</span>, <span class="hljs-string">'zhouba@test.com'</span>),
(<span class="hljs-string">'å´ä¹'</span>, <span class="hljs-string">'13300133000'</span>, <span class="hljs-string">'wuj iu@test.com'</span>),
(<span class="hljs-string">'éƒ‘å'</span>, <span class="hljs-string">'13200132000'</span>, <span class="hljs-string">'zhengshi@test.com'</span>),
(<span class="hljs-string">'é’±ä¸€'</span>, <span class="hljs-string">'13100131000'</span>, <span class="hljs-string">'qianyi@test.com'</span>),
(<span class="hljs-string">'å†¯äºŒ'</span>, <span class="hljs-string">'1300130000'</span>, <span class="hljs-string">'fenger@test.com'</span>);
</code></pre>
<p>æ‰§è¡Œåæç¤º <code>INSERT 0 10</code>ï¼Œè¡¨ç¤ºæ•°æ®æ’å…¥æˆåŠŸï¼Œä¸ºåç»­æ“ä½œæä¾›æµ‹è¯•åŸºç¡€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59643bed5b884fa09303c9fc83ac42c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=iTjCqhECFdFCdPVi5bQevD7gOgg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">äºŒã€ç´¢å¼•ç®¡ç†ï¼šç»™è¡¨ â€œåŠ ç›®å½•â€ï¼ŒåŠ é€ŸæŸ¥è¯¢</h3>
<p>ç´¢å¼•æ˜¯ KingbaseES ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½çš„æ ¸å¿ƒæ‰‹æ®µ â€”â€” å½“è¡¨æ•°æ®é‡è¾ƒå¤§æ—¶ï¼ˆå¦‚ 10 ä¸‡æ¡ +ï¼‰ï¼Œæ— ç´¢å¼•çš„æŸ¥è¯¢ä¼š â€œå…¨è¡¨æ‰«æâ€ï¼ˆé€è¡ŒæŸ¥æ‰¾ï¼‰ï¼Œè€Œæœ‰ç´¢å¼•çš„æŸ¥è¯¢ä¼šé€šè¿‡ â€œç´¢å¼•ç›®å½•â€ ç›´æ¥å®šä½æ•°æ®ï¼Œé€Ÿåº¦æå‡æˆç™¾ä¸Šåƒå€ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æŒ‰ â€œåˆ›å»ºâ†’æŸ¥çœ‹â†’ç»´æŠ¤â†’åˆ é™¤â€ å±•å¼€è®²è§£</p>
<h4 data-id="heading-5">2.1 1. å…ˆæ‡‚åŸºç¡€ï¼šç´¢å¼•çš„ç±»å‹ä¸é€‚ç”¨åœºæ™¯</h4>
<p>æ–°æ‰‹éœ€å…ˆæ˜ç¡®ä¸åŒç´¢å¼•çš„ä½œç”¨ï¼Œé¿å…ç›²ç›®åˆ›å»ºï¼ˆç´¢å¼•å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œä¼šå¢åŠ æ›´æ–° / æ’å…¥çš„å¼€é”€ï¼‰ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3218ac55b8574a06b17704a0c38641ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=kLVGjxmrzyf8qmSLBew%2FUIHJ6UI%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">2.2 2. åˆ›å»ºç´¢å¼•ï¼šç”¨ CREATE INDEX è¯­å¥</h4>
<h5 data-id="heading-7">2.2.1 ç¤ºä¾‹ 1ï¼šåˆ›å»ºæ™®é€šç´¢å¼•ï¼ˆåŠ é€Ÿå•å­—æ®µæŸ¥è¯¢ï¼‰</h5>
<p>ç»™ <code>sys_user</code> è¡¨çš„ <code>phone</code> åˆ—å»ºæ™®é€šç´¢å¼•ï¼ˆé¢‘ç¹æŒ‰æ‰‹æœºå·æŸ¥ç”¨æˆ·æ—¶ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µå);</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_sys_user_phone <span class="hljs-keyword">ON</span> test_schema.sys_user(phone);
</code></pre>
<ul>
<li>
<p><strong>ç´¢å¼•åè§„èŒƒ</strong>æè®®é‡‡ç”¨â€œidx_è¡¨å_å­—æ®µåâ€æ ¼å¼ï¼Œè¿™æ ·ä¾¿äºè¯†åˆ«ï¼Œæ¯”å¦‚â€œidx_sys_user_phoneâ€å°±è¡¨ç¤ºâ€œsys_userâ€è¡¨ä¸­â€œphoneâ€åˆ—çš„ç´¢å¼•ã€‚</p>
</li>
<li>
<p><strong>æˆåŠŸéªŒè¯</strong>ï¼šæ‰§è¡Œåæç¤º <code>CREATE INDEX</code>ï¼Œè¡¨ç¤ºç´¢å¼•åˆ›å»ºæˆåŠŸã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/527b8aecc1de4ab5be6cb6960a4936ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=oT6oM8BhRa7lGD8VM7jXFvc5Dhg%3D" alt="image.png" loading="lazy"/></p>
</li>
</ul>
<h5 data-id="heading-8">2.2.2 ç¤ºä¾‹ 2ï¼šåˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼ˆç¡®ä¿å­—æ®µå”¯ä¸€ + åŠ é€ŸæŸ¥è¯¢ï¼‰</h5>
<p>ç»™ <code>sys_user</code> è¡¨çš„ <code>email</code> åˆ—å»ºå”¯ä¸€ç´¢å¼•ï¼ˆæ—¢ç¡®ä¿é‚®ç®±ä¸é‡å¤ï¼ŒåˆåŠ é€Ÿé‚®ç®±æŸ¥è¯¢ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE UNIQUE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µå);</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> INDEX idx_sys_user_email <span class="hljs-keyword">ON</span> test_schema.sys_user(email);
</code></pre>
<ul>
<li><strong>ä¸ UNIQUE çº¦æŸçš„åŒºåˆ«</strong>ï¼šå”¯ä¸€ç´¢å¼•åªä¿è¯å€¼å”¯ä¸€ï¼ŒUNIQUE çº¦æŸåŒ…å«çº¦æŸå’Œå”¯ä¸€ç´¢å¼•ï¼Œå¦‚æœè¡¨å·²æœ‰ <code>email</code> çš„ UNIQUE çº¦æŸï¼Œåˆ™ä¸å¿…å†åˆ›å»º <code>email</code> çš„å”¯ä¸€ç´¢å¼•ï¼Œå› ä¸ºçº¦æŸæœ¬èº«å°±ä¼šç”Ÿæˆç´¢å¼•ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/228788c91e354239973e35dfbcb69567~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=jN3w8ln%2BrX3TTj6Qs2G%2F61B833w%3D" alt="image.png" loading="lazy"/></li>
</ul>
<h5 data-id="heading-9">2.2.3 ç¤ºä¾‹ 3ï¼šåˆ›å»ºå¤åˆç´¢å¼•ï¼ˆåŠ é€Ÿå¤šå­—æ®µç»„åˆæŸ¥è¯¢ï¼‰</h5>
<p>ä¸º<code>sys_user</code>è¡¨çš„<code>name</code>å’Œ<code>create_time</code>åˆ—åˆ›å»ºå¤åˆç´¢å¼•ï¼Œå½“ç»å¸¸ä¾ç…§â€œå§“å+åˆ›å»ºæ—¶é—´èŒƒå›´â€æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ä¼šç”¨åˆ°è¿™ä¸ªç´¢å¼•ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µ1, å­—æ®µ2);</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_sys_user_name_createtime <span class="hljs-keyword">ON</span> test_schema.sys_user(name, create_time);
</code></pre>
<ul>
<li><strong>å­—æ®µé¡ºåºæ³¨æ„</strong>ï¼šå¤åˆç´¢å¼•ä¾ç…§â€œæœ€å·¦ç¬¦åˆåŸåˆ™â€ï¼Œç´¢å¼•(name, create - time)å¯åŠ å¼º name å•å­—æ®µæŸ¥è¯¢ï¼Œä¹Ÿå¯åŠ å¼º name + create - time ç»¼åˆæŸ¥è¯¢ï¼Œä½†æ— æ³•åŠ å¼º create - time å•å­—æ®µæŸ¥è¯¢ï¼Œè¦æŒ‰ç…§æŸ¥è¯¢ä¹ æƒ¯æ¥ç¡®å®šå­—æ®µé¡ºåºã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91afcbbf23744aacabd6644e54c78b99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=zpxIFWw%2FiFrNNV5nSbASD0SW9qg%3D" alt="image.png" loading="lazy"/></li>
</ul>
<h4 data-id="heading-10">2.3 3. æŸ¥çœ‹ç´¢å¼•ï¼šç¡®è®¤ç´¢å¼•å­˜åœ¨ä¸å…³è”è¡¨</h4>
<p>åˆ›å»ºç´¢å¼•åï¼Œéœ€é€šè¿‡ ksql å‘½ä»¤æŸ¥çœ‹ç´¢å¼•åˆ—è¡¨ã€å…³è”è¡¨åŠè¯¦æƒ…ï¼Œæ¨è <code>\di</code> å’Œ <code>\dt+</code> å‘½ä»¤ï¼š</p>
<h5 data-id="heading-11">2.3.1 ç¤ºä¾‹ 1ï¼šæŸ¥çœ‹æ‰€æœ‰ç´¢å¼•ï¼ˆ\di å‘½ä»¤ï¼‰</h5>
<p>æ‰§è¡Œ <code>\di</code> å¯åˆ—å‡ºå½“å‰æ¨¡å¼ä¸‹çš„æ‰€æœ‰ç´¢å¼•ï¼Œç¡®è®¤ç´¢å¼•æ˜¯å¦åˆ›å»ºæˆåŠŸï¼š</p>
<pre><code class="hljs language-sql" lang="sql">\di
</code></pre>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼š</strong></p>
<p><strong>å…³é”®ä¿¡æ¯è§£è¯»ï¼š</strong></p>
<ul>
<li><code>Table</code>ï¼šç´¢å¼•å…³è”çš„è¡¨ï¼ˆç¡®è®¤æ˜¯ <code>sys_user</code>ï¼‰ï¼›</li>
<li><code>Columns</code>ï¼šç´¢å¼•å¯¹åº”çš„å­—æ®µï¼ˆå•å­—æ®µ / å¤šå­—æ®µï¼‰ï¼›</li>
<li><code>sys_user_pkey</code>ï¼šä¸»é”®è‡ªåŠ¨åˆ›å»ºçš„ç´¢å¼•ï¼ˆæ— éœ€æ‰‹åŠ¨åˆ›å»ºï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56541cf7d7d64c03b258768b3382b26a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=MOsNGgrmRvYTucwMhVc0zmpV90A%3D" alt="image.png" loading="lazy"/></li>
</ul>
<h5 data-id="heading-12">2.3.2 ç¤ºä¾‹ 2ï¼šæŸ¥çœ‹è¡¨å…³è”çš„ç´¢å¼•ï¼ˆ\dt+ è¡¨åï¼‰</h5>
<p>è‹¥éœ€æŸ¥çœ‹æŸå¼ è¡¨çš„æ‰€æœ‰ç´¢å¼•ï¼ˆå¦‚ <code>sys_user</code>ï¼‰ï¼Œæ‰§è¡Œ <code>\d+ è¡¨å</code>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">\d<span class="hljs-operator">+</span> test_schema.sys_user
</code></pre>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼ˆç´¢å¼•éƒ¨åˆ†ï¼‰ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bccf956d98dd4763ad219001dbdf466b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=4h4ZhOa7304PY%2F5wnmph5m7%2B63E%3D" alt="463bec18ca0d0e9375930d3460bbb07c.png" loading="lazy"/></p>
<p>ç›´æ¥å±•ç¤ºè¡¨å…³è”çš„æ‰€æœ‰ç´¢å¼•ï¼ŒåŒ…æ‹¬ç±»å‹ï¼ˆPRIMARY KEY/UNIQUE/ æ™®é€šï¼‰å’Œå­—æ®µï¼Œæ¸…æ™°ç›´è§‚ã€‚</p>
<h4 data-id="heading-13">2.4 4. ç´¢å¼•ç»´æŠ¤ï¼šä¼˜åŒ–æ€§èƒ½ä¸è°ƒæ•´ç»“æ„</h4>
<p>ç´¢å¼•ç»è¿‡ä¸€å®šæ—¶é—´çš„ä½¿ç”¨ä¹‹åï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°ç”±äºæ•°æ®é¢‘ç¹è¢«åˆ é™¤æˆ–è€…æ›´æ–°è€Œé€ æˆçš„â€œç¢ç‰‡åŒ–â€ç°è±¡ï¼Œå³ç´¢å¼•æ–‡ä»¶ä¸­å­˜åœ¨è®¸å¤šç©ºç™½ç©ºé—´ï¼Œè¿™ç§æƒ…å†µä¸‹è¦å€ŸåŠ©é‡å»ºç´¢å¼•æ¥æ”¹å–„è¿™ç§æƒ…å†µï¼Œè€Œä¸”æŒ‰ç…§ä¸ªäººéœ€æ±‚ä¹Ÿå¯ä»¥é‡æ–°å‘½åæˆ–è€…ç›´æ¥åˆ é™¤ç´¢å¼•ã€‚</p>
<h5 data-id="heading-14">2.4.1 ç¤ºä¾‹ 1ï¼šé‡å»ºç´¢å¼•ï¼ˆè§£å†³ç¢ç‰‡åŒ–ï¼Œæå‡æŸ¥è¯¢é€Ÿåº¦ï¼‰</h5>
<p>å½“ç´¢å¼•æŸ¥è¯¢é€Ÿåº¦å˜æ…¢æ—¶ï¼Œé‡å»ºç´¢å¼•å¯æ•´ç†ç¢ç‰‡ï¼Œæ¢å¤æ€§èƒ½ï¼ˆè¡¨å¤§æ—¶å»ºè®®ç¦»çº¿æ‰§è¡Œï¼Œé¿å…å½±å“ä¸šåŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šREINDEX INDEX ç´¢å¼•å;</span>
REINDEX INDEX idx_sys_user_phone;
<span class="hljs-comment">-- è¿›é˜¶ï¼šé‡å»ºè¡¨çš„æ‰€æœ‰ç´¢å¼•ï¼ˆæ›´é«˜æ•ˆï¼‰</span>
REINDEX <span class="hljs-keyword">TABLE</span> sys_user;
</code></pre>
<ul>
<li><strong>æˆåŠŸéªŒè¯</strong>ï¼šæ‰§è¡Œåæç¤º <code>REINDEX</code>ï¼Œè¡¨ç¤ºé‡å»ºå®Œæˆã€‚</li>
</ul>
<h5 data-id="heading-15">2.4.2 ç¤ºä¾‹ 2ï¼šé‡å‘½åç´¢å¼•ï¼ˆè§„èŒƒå‘½åï¼‰</h5>
<p>ç´¢å¼•åè‹¥ä¸ç¬¦åˆè§„èŒƒï¼Œå¯ä»¥é‡æ–°å‘½åï¼Œå¯ä»¥æŠŠ<code>idx_sys_user_phone</code>æ”¹ä¸º<code>idx_sys_user_mobile</code>ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šALTER INDEX æ—§ç´¢å¼•å RENAME TO æ–°ç´¢å¼•å;</span>
<span class="hljs-keyword">ALTER</span> INDEX idx_sys_user_phone RENAME <span class="hljs-keyword">TO</span> idx_sys_user_mobile;
</code></pre>
<ul>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ <code>\d+ test_schema.sys_user</code> å¯çœ‹åˆ°ç´¢å¼•åå·²æ›´æ–°ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e8979bd27dc4ef49a996e146018f802~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=S1iUE%2BoaO3pWzk0noAv8QvNWpnc%3D" alt="6a3f5aa361f83070f3ae48b8f04c2a75.png" loading="lazy"/></li>
</ul>
<h5 data-id="heading-16">2.4.3 ç¤ºä¾‹ 3ï¼šåˆ é™¤ç´¢å¼•ï¼ˆæ— ç”¨ç´¢å¼•æ¸…ç†ï¼‰</h5>
<p>æŸå­—æ®µæŸ¥è¯¢é¢‘ç‡é™ä½æˆ–è€…ç´¢å¼•è‡´ä½¿æ’å…¥/æ›´æ–°å˜æ…¢çš„æ—¶å€™ï¼Œè¦åˆ é™¤æ— ç”¨ç´¢å¼•ï¼ˆè¦æ³¨æ„çš„æ˜¯ï¼Œä¸»é”®ç´¢å¼•ä»¥åŠä¸å”¯ä¸€çº¦æŸç›¸å…³è”çš„ç´¢å¼•ä¸èƒ½ç›´æ¥åˆ ï¼Œåº”å½“å…ˆåˆ çº¦æŸï¼‰ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šDROP INDEX IF EXISTS ç´¢å¼•å;</span>
<span class="hljs-keyword">DROP</span> INDEX IF <span class="hljs-keyword">EXISTS</span> idx_sys_user_name_createtime;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c368996dc523453e90de69be67e22b92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=DdBnqlQ77Rh%2BUWelwD1vGqzT6o4%3D" alt="532407218768843c859b33c2822afad1.png" loading="lazy"/></p>
<ul>
<li><code>IF EXISTS</code>ï¼šé¿å…ç´¢å¼•ä¸å­˜åœ¨æ—¶æŠ¥é”™ï¼Œä»…æç¤ºè­¦å‘Šï¼›</li>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ <code>\d+ test_schema.sys_user</code> ç¡®è®¤ç´¢å¼•å·²ç§»é™¤ã€‚</li>
</ul>
<h4 data-id="heading-17">2.5 5. ç´¢å¼•ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼ˆæ–°æ‰‹é¿å‘æŒ‡å—ï¼‰</h4>
<ol>
<li><strong>ç´¢å¼•å¹¶éè¶Šå¤šè¶Šå¥½</strong>ï¼Œç´¢å¼•ä¼šåŠ é‡æ’å…¥ï¼Œæ›´æ–°å’Œåˆ é™¤æ—¶çš„å¼€é”€ï¼Œå› ä¸ºæ¯å½“æ•°æ®å‘ç”Ÿå˜åŠ¨çš„æ—¶å€™ï¼Œéƒ½è¦åŒæ­¥æ›´æ–°ç´¢å¼•ã€‚æ‰€ä»¥ä¸€å¼ è¡¨çš„ç´¢å¼•æœ€å¥½åˆ«è¶…è¿‡5ä¸ªã€‚</li>
<li><strong>å°è¡¨ä¸éœ€è¦åˆ›å»ºç´¢å¼•</strong>ï¼Œå½“æ•°æ®é‡å°äº1ä¸‡æ¡æ—¶ï¼Œå…¨è¡¨æ‰«ææ¯”ç´¢å¼•æŸ¥è¯¢é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºç´¢å¼•æŸ¥è¯¢è¦å…ˆæŸ¥æ‰¾ç´¢å¼•å†æŸ¥æ‰¾æ•°æ®ï¼Œè¿™å°±å¤šäº†ä¸€æ¬¡IOæ“ä½œã€‚</li>
<li><strong>åˆ—å¦‚æœç»å¸¸æ›´æ–°å°±ä¸è¦åˆ›å»ºç´¢å¼•</strong>ï¼Œæ¯”å¦‚â€œè®¢å•çŠ¶æ€â€è¿™ä¸ªå­—æ®µï¼ˆå…¶å€¼æ¯ç§’éƒ½åœ¨å˜ï¼‰ï¼Œç»™å®ƒåˆ›å»ºç´¢å¼•ä¹‹åï¼Œç´¢å¼•å°±ä¼šé¢‘ç¹åœ°æ‰§è¡ŒåŒæ­¥æ“ä½œï¼Œä»è€Œå½±å“åˆ°æ•´ä½“çš„æ€§èƒ½è¡¨ç°ã€‚</li>
<li><strong>è¦é¿å¼€å¯¹å‡½æ•°æ‰§è¡Œç´¢å¼•å­—æ®µ</strong>ï¼Œåƒ <code>WHERE SUBSTR(phone,1,3) = '138'</code> è¿™ç§æƒ…å†µä¼šä½¿ç´¢å¼•å¤±æ•ˆï¼Œåº”è¯¥æ”¹æˆ <code>WHERE phone LIKE '138%'</code>ï¼ˆå‰ç¼€ç¬¦åˆèƒ½å¤Ÿåˆ©ç”¨ç´¢å¼•ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-18">ä¸‰ã€è§†å›¾ç®¡ç†ï¼šç»™æ•°æ® â€œå¼€çª—å£â€ï¼Œç®€åŒ–æŸ¥è¯¢ä¸æ§åˆ¶æƒé™</h3>
<p>è§†å›¾å±äºâ€œè™šæ‹Ÿè¡¨â€ï¼Œå®ƒä¾é SQLæŸ¥è¯¢ç»“æœç”Ÿæˆï¼Œå¹¶æœªå‚¨å­˜å®é™…æ•°æ®ï¼ˆæ•°æ®ä»æ—§ä¿å­˜åœ¨åŸå§‹è¡¨å½“ä¸­ï¼‰ï¼Œå…¶å…³é”®æ„ä¹‰åœ¨äºâ€œéšåŒ¿å¤æ‚æŸ¥è¯¢é€»è¾‘â€ä»¥åŠâ€œè°ƒæ§æ•°æ®å¯è§èŒƒå›´â€ï¼ˆè­¬å¦‚ä»…ä»…å‘ç”¨æˆ·æ˜¾ç¤ºæŸäº›åˆ—ï¼‰ï¼Œæˆ‘ä»¬æŒ‰ç…§â€œåˆ›å»º - æŸ¥çœ‹ - æ“ä½œ - åˆ é™¤â€çš„é¡ºåºæ¥æ‰§è¡Œã€‚</p>
<h4 data-id="heading-19">3.1 1. å…ˆæ‡‚åŸºç¡€ï¼šè§†å›¾çš„æ ¸å¿ƒä½œç”¨ï¼ˆæ–°æ‰‹å¿…çŸ¥ï¼‰</h4>
<p>æ–°æ‰‹å®¹æ˜“æ··æ·† â€œè¡¨â€ å’Œ â€œè§†å›¾â€ï¼Œç”¨é€šä¿—æ¯”å–»ç†è§£ï¼š</p>
<ul>
<li>è¡¨ï¼šâ€œä»“åº“â€ï¼Œå­˜å‚¨å®é™…æ•°æ®ï¼›</li>
<li>è§†å›¾åä¸ºâ€œä»“åº“çª—å£â€ï¼Œæ­¤è§†å›¾ä»…æ˜¾ç¤ºæŒ‡å®šåŒºåŸŸçš„è´§ç‰©ï¼ˆæ•°æ®ï¼‰ï¼Œæ— æ³•çœ‹åˆ°æ•´ä¸ªä»“åº“çš„æ¦‚è²Œï¼Œè€Œä¸”è¯¥çª—å£ä¸å¯ç›´æ¥è¢«ä¿®æ”¹ï¼Œè¦ç»è¿‡æ­¤çª—å£å»æ›´æ”¹ä»“åº“çš„æ•°æ®ï¼Œä¸è¿‡å­˜åœ¨ä¸€äº›é™åˆ¶ã€‚</li>
</ul>
<p>è§†å›¾çš„æ ¸å¿ƒåœºæ™¯ï¼š</p>
<ol>
<li><strong>ç®€åŒ–å¤æ‚æŸ¥è¯¢</strong>ï¼Œå¤šè¡¨å…³è”æŸ¥è¯¢ï¼ˆJOINï¼‰å¯ä»¥è¢«å°è£…æˆè§†å›¾ï¼Œä¹‹åçš„æŸ¥è¯¢ç›´æ¥é’ˆå¯¹è¯¥è§†å›¾å±•å¼€ï¼Œä¸å¿…å†æ¬¡ä¹¦å†™å¤æ‚çš„ SQL è¯­å¥ã€‚</li>
<li><strong>æ•°æ®æƒé™æ§åˆ¶æ–¹é¢</strong>ï¼Œå¯ä»¥å‘æ™®é€šç”¨æˆ·å±•ç¤º <code>sys_user</code> è¡¨ä¸­ <code>name</code> å’Œ <code>phone</code> å­—æ®µçš„å†…å®¹ï¼Œè€Œå°† <code>email</code> è¿™ç±»æ•æ„Ÿä¿¡æ¯é®ç›–èµ·æ¥ï¼Œè¿™è¦ä¾é è§†å›¾æ¥è¾¾æˆã€‚</li>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šå¤šç³»ç»Ÿå…±ç”¨åŒä¸€æŸ¥è¯¢é€»è¾‘æ—¶ï¼Œè§†å›¾å¯ç¡®ä¿æ‰€æœ‰ç³»ç»Ÿä½¿ç”¨ç›¸åŒçš„ç­›é€‰æ¡ä»¶ã€‚</li>
</ol>
<h4 data-id="heading-20">3.2 2. åˆ›å»ºè§†å›¾ï¼šç”¨ CREATE VIEW è¯­å¥</h4>
<h5 data-id="heading-21">3.2.1 ç¤ºä¾‹ 1ï¼šåŸºç¡€è§†å›¾ï¼ˆç®€åŒ–å•è¡¨æŸ¥è¯¢ï¼‰</h5>
<p>åˆ›å»º â€œç”¨æˆ·åŸºç¡€ä¿¡æ¯è§†å›¾ <code>vw_sys_user_basic</code>â€ï¼ŒåªåŒ…å« <code>id</code>ã€<code>name</code>ã€<code>phone</code> åˆ—ï¼ˆéšè— <code>email</code> æ•æ„Ÿä¿¡æ¯ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE VIEW è§†å›¾å AS SELECT è¯­å¥;</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> vw_sys_user_basic <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> id, name, phone 
<span class="hljs-keyword">FROM</span> test_schema.sys_user;
</code></pre>
<ul>
<li><strong>æˆåŠŸéªŒè¯</strong>ï¼šæ‰§è¡Œåæç¤º <code>CREATE VIEW</code>ï¼Œè¡¨ç¤ºè§†å›¾åˆ›å»ºæˆåŠŸã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05ca57890de246bb85db7ed9f73923ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=oGrrH6dR5%2FucFT6g4JyG%2B6VY4O0%3D" alt="9c263f90-f43a-4c65-bd61-18968f051c79.png" loading="lazy"/></li>
</ul>
<h5 data-id="heading-22">3.2.2 ç¤ºä¾‹ 2ï¼šè¿›é˜¶è§†å›¾ï¼ˆå¸¦ç­›é€‰æ¡ä»¶çš„å¤æ‚æŸ¥è¯¢ï¼‰</h5>
<p>åˆ›å»º â€œ2024 å¹´åˆ›å»ºçš„ç”¨æˆ·è§†å›¾ <code>vw_sys_user_2024</code>â€ï¼Œç­›é€‰ <code>create_time</code> åœ¨ 2024 å¹´çš„ç”¨æˆ·ï¼ŒåŒ…å« <code>name</code>ã€<code>email</code>ã€<code>create_time</code> åˆ—ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> vw_sys_user_2024 <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, email, create_time 
<span class="hljs-keyword">FROM</span> test_schema.sys_user 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01 00:00:00'</span> 
  <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e6a23dc074d4ef09e80dbdf141b4a85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=n85fvsOHRJn%2BemSkdr%2FYtN0Z4FE%3D" alt="b96dd12a-d747-4511-a1e9-210afc759dd3.png" loading="lazy"/></p>
<ul>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šè§†å›¾æ•°æ®ä¼šéšåŸè¡¨å˜åŒ–è‡ªåŠ¨æ›´æ–°ï¼ˆå¦‚åŸè¡¨æ–°å¢ 2024 å¹´ç”¨æˆ·ï¼Œè§†å›¾ä¼šè‡ªåŠ¨åŒ…å«è¯¥æ•°æ®ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-23">3.2.3 ç¤ºä¾‹ 3ï¼šåªè¯»è§†å›¾ï¼ˆç¦æ­¢ä¿®æ”¹æ•°æ®ï¼‰</h5>
<p>è‹¥éœ€ç¡®ä¿è§†å›¾æ•°æ®ä¸è¢«ä¿®æ”¹ï¼ˆå¦‚æŠ¥è¡¨è§†å›¾ï¼‰ï¼Œå¯æ·»åŠ  <code>WITH READ ONLY</code> é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> vw_sys_user_report <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, phone, create_time 
<span class="hljs-keyword">FROM</span> test_schema.sys_user 
<span class="hljs-keyword">WITH</span> READ <span class="hljs-keyword">ONLY</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac6edd45c0444862aeaa079aad4fb989~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=fT4ClO1pAb7%2F9hzLM1RSd2vm8Po%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šåç»­è‹¥å°è¯•é€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®ï¼ˆå¦‚ <code>UPDATE vw_sys_user_report SET name='å¼ ä¸‰'</code>ï¼‰ï¼Œä¼šæŠ¥é”™ â€œcannot update a read-only viewâ€ã€‚</li>
</ul>
<h4 data-id="heading-24">3.3 3. æŸ¥çœ‹è§†å›¾ï¼šç¡®è®¤è§†å›¾å®šä¹‰ä¸å…³è”è¡¨</h4>
<p>åˆ›å»ºè§†å›¾ä¹‹åï¼Œè¦åˆ©ç”¨ ksql å‘½ä»¤æ¥æŸ¥çœ‹è§†å›¾åˆ—è¡¨ï¼Œå®šä¹‰ä»¥åŠç›¸å…³è”çš„è¡¨ï¼Œå»ºè®®ä½¿ç”¨ <code>\dv</code> å’Œ <code>\d+</code> è¿™ä¸¤ä¸ªå‘½ä»¤ã€‚</p>
<h5 data-id="heading-25">3.3.1 ç¤ºä¾‹ 1ï¼šæŸ¥çœ‹æ‰€æœ‰è§†å›¾ï¼ˆ\dv å‘½ä»¤ï¼‰</h5>
<p>æ‰§è¡Œ <code>\dv</code> å¯åˆ—å‡ºå½“å‰æ¨¡å¼ä¸‹çš„æ‰€æœ‰è§†å›¾ï¼Œç¡®è®¤è§†å›¾æ˜¯å¦åˆ›å»ºæˆåŠŸï¼š</p>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼š</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a400e2bd015e4b5799c9e6bf13ac4aeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=nyfJoWN%2BDYSdNXhqQ3zH92q5SAo%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-26">3.3.2 ç¤ºä¾‹ 2ï¼šæŸ¥çœ‹è§†å›¾å®šä¹‰ï¼ˆ\d+ è§†å›¾åï¼‰</h5>
<p>è‹¥éœ€ç¡®è®¤è§†å›¾çš„åº•å±‚ SQLï¼ˆå¦‚å¿˜è®°è§†å›¾ç­›é€‰æ¡ä»¶ï¼‰ï¼Œæ‰§è¡Œ <code>\d+ è§†å›¾å</code>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">\d<span class="hljs-operator">+</span> vw_sys_user_2024
</code></pre>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼ˆå®šä¹‰éƒ¨åˆ†ï¼‰ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6a6f06047d040c6b0112b3af6eb9428~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=jEBLtQrZwBeDNunk0pGdh7DzbOg%3D" alt="image.png" loading="lazy"/></p>
<p>ç›´æ¥å±•ç¤ºè§†å›¾çš„å®Œæ•´ SQL å®šä¹‰ï¼Œä¾¿äºåç»­ä¿®æ”¹æˆ–éªŒè¯é€»è¾‘ã€‚</p>
<h4 data-id="heading-27">3.4 4. è§†å›¾æ“ä½œï¼šæŸ¥è¯¢ã€ä¿®æ”¹ä¸åˆ é™¤</h4>
<p>è§†å›¾çš„æ ¸å¿ƒæ“ä½œæ˜¯ â€œæŸ¥è¯¢â€ï¼Œä¿®æ”¹å’Œåˆ é™¤éœ€éµå¾ªç‰¹å®šè§„åˆ™</p>
<h5 data-id="heading-28">3.4.1 ç¤ºä¾‹ 1ï¼šæŸ¥è¯¢è§†å›¾æ•°æ®ï¼ˆä¸è¡¨æŸ¥è¯¢ä¸€è‡´ï¼‰</h5>
<p>æŸ¥è¯¢è§†å›¾æ•°æ®çš„è¯­æ³•å’ŒæŸ¥è¯¢è¡¨å®Œå…¨ç›¸åŒï¼Œæ— éœ€é¢å¤–å­¦ä¹ ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢åŸºç¡€è§†å›¾æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> vw_sys_user_basic;
<span class="hljs-comment">-- æŸ¥è¯¢2024å¹´ç”¨æˆ·è§†å›¾ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´æ’åº</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> vw_sys_user_2024 <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span>;
</code></pre>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šè¿”å›ç»“æœä¸æŸ¥è¯¢åŸè¡¨ç­›é€‰åçš„æ•°æ®ä¸€è‡´ï¼Œä½†çœ‹ä¸åˆ°éšè—çš„åˆ—ï¼ˆå¦‚ <code>email</code> åœ¨ <code>vw_sys_user_basic</code> ä¸­ä¸å¯è§ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-29">3.4.2 ç¤ºä¾‹ 2ï¼šä¿®æ”¹è§†å›¾å®šä¹‰ï¼ˆCREATE OR REPLACEï¼‰</h5>
<p>è‹¥éœ€è°ƒæ•´è§†å›¾çš„ç­›é€‰æ¡ä»¶æˆ–åˆ—ï¼ˆå¦‚ <code>vw_sys_user_2024</code> æ”¹ä¸ºåŒ…å« 2023 å¹´æ•°æ®ï¼‰ï¼Œæ— éœ€åˆ é™¤è§†å›¾ï¼Œç›´æ¥ç”¨ <code>CREATE OR REPLACE</code> ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">VIEW</span> vw_sys_user_2024 <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, email, create_time 
<span class="hljs-keyword">FROM</span> test_schema.sys_user 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2023-01-01 00:00:00'</span> 
  <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>;
</code></pre>
<ul>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ <code>\d+ vw_sys_user_2024</code> ç¡®è®¤å®šä¹‰å·²æ›´æ–°ã€‚</li>
</ul>
<h5 data-id="heading-30">3.4.3 ç¤ºä¾‹ 3ï¼šåˆ é™¤è§†å›¾ï¼ˆDROP VIEWï¼‰</h5>
<p>å½“è§†å›¾ä¸å†ä½¿ç”¨æ—¶ï¼Œæ‰§è¡Œåˆ é™¤å‘½ä»¤ï¼ˆ<strong>åˆ é™¤è§†å›¾ä¸å½±å“åŸè¡¨æ•°æ®</strong>ï¼Œä»…åˆ é™¤è§†å›¾å®šä¹‰ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šDROP VIEW IF EXISTS è§†å›¾å;</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">VIEW</span> IF <span class="hljs-keyword">EXISTS</span> vw_sys_user_report;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5db1de87c1814f35b1c307739b2d7462~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=SZSaEVKxDZzT0owYyL9PPyLRCXw%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ <code>\dv</code> ç¡®è®¤è§†å›¾å·²ç§»é™¤ã€‚</li>
</ul>
<h4 data-id="heading-31">3.5 5. è§†å›¾ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼ˆæ–°æ‰‹é¿å‘æŒ‡å—ï¼‰</h4>
<ol>
<li><strong>è§†å›¾ä¿®æ”¹é™åˆ¶</strong>ï¼šå«ä»¥ä¸‹æƒ…å†µçš„è§†å›¾æ— æ³•ä¿®æ”¹æ•°æ®ï¼ˆå³ä½¿æœªåŠ  <code>READ ONLY</code>ï¼‰ï¼š
<ul>
<li>è§†å›¾æ¶µç›– <code>DISTINCT</code>ï¼ˆå»é‡ï¼‰ï¼Œ<code>GROUP BY</code>ï¼ˆåˆ†ç»„ï¼‰ï¼Œ<code>HAVING</code>ï¼ˆç­›é€‰åˆ†ç»„ï¼‰ã€‚</li>
<li>è§†å›¾åŒ…å«èšåˆå‡½æ•°ï¼ˆå¦‚ <code>COUNT</code>ã€<code>SUM</code>ï¼‰ï¼›</li>
<li>è§†å›¾æ¥è‡ªå¤šè¡¨å…³è”ï¼ˆ<code>JOIN</code>ï¼‰ï¼›</li>
</ul>
</li>
<li><strong>åŸè¡¨åˆ é™¤å½±å“</strong>ï¼šè‹¥åŸè¡¨ï¼ˆæ¯”å¦‚ <code>sys_user</code> è¡¨ï¼‰è¢«åˆ é™¤ï¼Œåˆ™è¯¥è§†å›¾å°±ä¼šæˆä¸ºâ€œæ— æ•ˆè§†å›¾â€ï¼Œåœ¨æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šæ”¶åˆ°â€œrelation does not existâ€çš„é”™è¯¯æç¤ºã€‚</li>
<li><strong>æ€§èƒ½æ³¨æ„</strong>ï¼šå¤æ‚è§†å›¾åŒ…å«å¤šè¡¨å…³è”æˆ–è€…èšåˆæƒ…å†µæ—¶ï¼Œå…¶æŸ¥è¯¢æ•ˆç‡ä¾é åŸè¡¨ç´¢å¼•ï¼Œæ‰€ä»¥è¦ä¿è¯åŸè¡¨ä¸­ç›¸å…³è”çš„å­—æ®µå·²æœ‰ç´¢å¼•ï¼Œæ¯”å¦‚åœ¨å¤šè¡¨ <code>JOIN</code> æ“ä½œé‡Œæ¶‰åŠçš„å…³è”åˆ—å°±éœ€è¦äº‹å…ˆåˆ›å»ºå¥½ç´¢å¼•ã€‚</li>
</ol>
<h3 data-id="heading-32">å››ã€å¸¸è§é—®é¢˜æ’æŸ¥ï¼šç´¢å¼•ä¸è§†å›¾çš„é«˜é¢‘æŠ¥é”™</h3>
<h4 data-id="heading-33">é—®é¢˜ 1ï¼šåˆ›å»ºç´¢å¼•æŠ¥é”™ â€œé‡å¤çš„é”®åâ€</h4>
<p><strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">ERROR:  duplicate key name "idx_sys_user_phone"
</code></pre>
<p><strong>åŸå› </strong>ï¼šåŒåç´¢å¼•å·²å­˜åœ¨ï¼ˆå¦‚ä¹‹å‰å·²åˆ›å»º <code>idx_sys_user_phone</code>ï¼‰ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ‰§è¡Œ <code>\di</code> æŸ¥çœ‹ç´¢å¼•åï¼Œç¡®è®¤æ˜¯å¦é‡å¤ï¼›</li>
<li>è‹¥éœ€é‡æ–°å»ºç´¢å¼•ï¼Œå…ˆåˆ é™¤æ—§ç´¢å¼•ï¼ˆ<code>DROP INDEX idx_sys_user_phone;</code>ï¼‰ï¼Œå†åˆ›å»ºæ–°ç´¢å¼•ã€‚</li>
</ul>
<h4 data-id="heading-34">é—®é¢˜ 2ï¼šæŸ¥è¯¢è§†å›¾æŠ¥é”™ â€œå…³ç³»å¯¹è±¡ä¸å­˜åœ¨â€</h4>
<p><strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">ERROR:  relation "vw_sys_user_basic" does not exist
</code></pre>
<p><strong>åŸå› </strong>ï¼š</p>
<ol>
<li>è§†å›¾åæ‹¼å†™é”™è¯¯ï¼ˆå¦‚ <code>vw_sys_user_basci</code>ï¼‰ï¼›</li>
<li>è§†å›¾æ‰€åœ¨æ¨¡å¼ä¸åœ¨æœç´¢è·¯å¾„ä¸­ï¼ˆå¦‚è§†å›¾åœ¨ <code>test_schema</code>ï¼Œä½†å½“å‰æœç´¢è·¯å¾„æ˜¯ <code>public</code>ï¼‰ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</li>
</ol>
<ul>
<li>æ£€æŸ¥è§†å›¾åæ‹¼å†™ï¼ˆæ‰§è¡Œ <code>\dv</code> ç¡®è®¤æ­£ç¡®åç§°ï¼‰ï¼›</li>
<li>åˆ‡æ¢åˆ°è§†å›¾æ‰€åœ¨æ¨¡å¼ï¼ˆ<code>SET search_path TO test_schema, public;</code>ï¼‰ï¼Œæˆ–ç”¨ â€œæ¨¡å¼åã€‚è§†å›¾åâ€ å…¨ç§°æŸ¥è¯¢ï¼ˆ<code>SELECT * FROM test_schema.vw_sys_user_basic;</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-35">é—®é¢˜ 3ï¼šé€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®æŠ¥é”™ â€œæ— æ³•æ›´æ–°åªè¯»è§†å›¾â€</h4>
<p><strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">ERROR:  cannot update a read-only view "vw_sys_user_report"
</code></pre>
<p><strong>åŸå› </strong>ï¼šè§†å›¾åˆ›å»ºæ—¶åŠ äº† <code>WITH READ ONLY</code> é€‰é¡¹ï¼Œç¦æ­¢ä¿®æ”¹ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>
<p>è‹¥éœ€å…è®¸ä¿®æ”¹ï¼Œé‡æ–°åˆ›å»ºè§†å›¾ï¼ˆå»æ‰ <code>WITH READ ONLY</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">VIEW</span> vw_sys_user_report <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, phone, create_time <span class="hljs-keyword">FROM</span> sys_user;
</code></pre>
</li>
<li>
<p>æ³¨æ„ï¼šé‡æ–°åˆ›å»ºå‰éœ€ç¡®è®¤è§†å›¾æ— ä¿®æ”¹é™åˆ¶ï¼ˆå¦‚ä¸å« <code>GROUP BY</code>ã€èšåˆå‡½æ•°ç­‰ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-36">äº”ã€æ€»ç»“ï¼šç´¢å¼•ä¸è§†å›¾çš„é…åˆä½¿ç”¨</h3>
<p>æœ¬æ–‡å®Œæ•´è¦†ç›–äº†ç´¢å¼•å’Œè§†å›¾çš„æ ¸å¿ƒæ“ä½œï¼Œæ ¸å¿ƒè¦ç‚¹å¯æ€»ç»“ä¸ºï¼š</p>
<p>1.<strong>ç®¡ç†</strong>â€œæŸ¥è¯¢é€Ÿåº¦â€æ—¶ï¼Œä¾ç…§æŸ¥è¯¢åœºæ™¯æ¥æŒ‘é€‰æ™®é€š/å”¯ä¸€/å¤åˆç´¢å¼•ï¼Œä¸è¦è¿‡åº¦åˆ›å»ºï¼Œè¦å®šæ—¶æ‰§è¡Œé‡å»ºå¹¶æ”¹å–„æ€§èƒ½ã€‚
2. <strong>è§†å›¾</strong>ï¼šç®¡ â€œæŸ¥è¯¢ç®€åŒ–ä¸æƒé™â€ï¼Œå°è£…å¤æ‚é€»è¾‘ã€éšè—æ•æ„Ÿæ•°æ®ï¼Œæ³¨æ„ä¿®æ”¹é™åˆ¶å’ŒåŸè¡¨ä¾èµ–ï¼›</p>
<ol start="3">
<li><strong>é…åˆä½¿ç”¨</strong>ï¼šè§†å›¾çš„æŸ¥è¯¢é€Ÿåº¦ä¸åŸè¡¨ç´¢å¼•ç›¸å…³ï¼Œç»™<code>vw_sys_user_2024</code>è§†å›¾å¯¹åº”çš„<code>sys_user</code>åŸè¡¨åˆ›å»º<code>create - time</code>ç´¢å¼•ä¹‹åï¼Œå…¶æŸ¥è¯¢æ•ˆç‡ä¼šå¾—åˆ°å¾ˆå¤§çš„æ”¹å–„ã€‚</li>
</ol>
<p>æŒæ¡äº†ç´¢å¼•å’Œè§†å›¾ä¹‹åï¼Œä½ å°±å…·æœ‰äº† KingbaseES é«˜æ•ˆæŸ¥è¯¢çš„å…³é”®èƒ½åŠ›ï¼Œä¸‹ç¯‡æ–‡ç« æˆ‘ä»¬ä¼šå­¦ä¹ â€œç”¨æˆ·ä¸æƒé™ç®¡ç†â€ï¼Œä»è€Œä¿éšœæ•°æ®åº“è®¿é—®çš„å®‰å…¨ï¼Œå¹¶åšåˆ°â€œä¸åŒç”¨æˆ·è®¿é—®ä¸åŒæ•°æ®â€è¿™æ ·ç»†è‡´çš„æ§åˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ7ï¼‰Hibernateçš„Sessionæ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588680081325686826</link>    <guid>https://juejin.cn/post/7588680081325686826</guid>    <pubDate>2025-12-27T23:14:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588680081325686826" data-draft-id="7588191506606276614" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ7ï¼‰Hibernateçš„Sessionæ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T23:14:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ7ï¼‰Hibernateçš„Sessionæ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T23:14:28.000Z" title="Sat Dec 27 2025 23:14:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„<code>Session</code>æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¥å£ï¼Œå®ƒè¡¨ç¤ºä¸æ•°æ®åº“çš„å•ä¸ªä¼šè¯ã€‚<code>Session</code>å¯¹è±¡è´Ÿè´£æ‰§è¡ŒCRUDï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰æ“ä½œï¼Œå¹¶å°†æŒä¹…åŒ–å¯¹è±¡çš„çŠ¶æ€ä¸æ•°æ®åº“åŒæ­¥ã€‚æ¯ä¸ª<code>Session</code>å¯¹è±¡éƒ½æ˜¯çŸ­æš‚çš„ï¼Œå¹¶ä¸”ä¸åº”è¯¥åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ã€‚</p>
<h3 data-id="heading-0">ä¸»è¦åŠŸèƒ½</h3>
<ol>
<li><strong>CRUDæ“ä½œ</strong>ï¼šä½¿ç”¨<code>save</code>ã€<code>update</code>ã€<code>delete</code>ç­‰æ–¹æ³•è¿›è¡ŒæŒä¹…åŒ–æ“ä½œã€‚</li>
<li><strong>æŸ¥è¯¢æ“ä½œ</strong>ï¼šé€šè¿‡HQLï¼ˆHibernate Query Languageï¼‰æˆ–Criteria APIæ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚</li>
<li><strong>äº‹åŠ¡ç®¡ç†</strong>ï¼šé€šè¿‡<code>beginTransaction</code>ã€<code>getTransaction</code>ç­‰æ–¹æ³•ç®¡ç†äº‹åŠ¡ã€‚</li>
<li><strong>ç¼“å­˜ç®¡ç†</strong>ï¼šç®¡ç†ä¸€çº§ç¼“å­˜ï¼ˆSessionç¼“å­˜ï¼‰ï¼Œå‡å°‘æ•°æ®åº“è®¿é—®æ¬¡æ•°ã€‚</li>
</ol>
<h3 data-id="heading-1">è¯¦ç»†æ·±å…¥ç»“åˆä»£ç </h3>
<h4 data-id="heading-2">1. è·å–Session</h4>
<p>é€šå¸¸ï¼Œé€šè¿‡<code>SessionFactory</code>è·å–<code>Session</code>å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-3">2. ä½¿ç”¨Sessionè¿›è¡ŒCRUDæ“ä½œ</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨<code>Session</code>è¿›è¡ŒCRUDæ“ä½œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ªæ–°çš„Session</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();

        <span class="hljs-comment">// å¯åŠ¨äº‹åŠ¡</span>
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜Studentå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        session.save(student); <span class="hljs-comment">// ä¿å­˜å¯¹è±¡</span>

        <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
        transaction.commit();

        <span class="hljs-comment">// é‡æ–°å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡</span>
        transaction = session.beginTransaction();

        <span class="hljs-comment">// è¯»å–Studentå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
        System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());

        <span class="hljs-comment">// æ›´æ–°Studentå¯¹è±¡</span>
        retrievedStudent.setAge(<span class="hljs-number">21</span>);
        session.update(retrievedStudent); <span class="hljs-comment">// æ›´æ–°å¯¹è±¡</span>

        <span class="hljs-comment">// åˆ é™¤Studentå¯¹è±¡</span>
        session.delete(retrievedStudent); <span class="hljs-comment">// åˆ é™¤å¯¹è±¡</span>

        <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
        transaction.commit();

        <span class="hljs-comment">// å…³é—­Session</span>
        session.close();
        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h3 data-id="heading-4">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li><strong>è·å–SessionFactory</strong>ï¼šé€šè¿‡<code>HibernateUtil.getSessionFactory()</code>è·å–<code>SessionFactory</code>ã€‚</li>
<li><strong>æ‰“å¼€Session</strong>ï¼šé€šè¿‡<code>sessionFactory.openSession()</code>æ‰“å¼€ä¸€ä¸ªæ–°çš„<code>Session</code>ã€‚</li>
<li><strong>å¼€å§‹äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>session.beginTransaction()</code>å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ã€‚</li>
<li><strong>CRUDæ“ä½œ</strong>ï¼š
<ul>
<li><strong>åˆ›å»ºå¹¶ä¿å­˜å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.save(student)</code>æ–¹æ³•å°†å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚</li>
<li><strong>è¯»å–å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.get(Student.class, student.getId())</code>æ–¹æ³•ä»æ•°æ®åº“ä¸­è¯»å–å¯¹è±¡ã€‚</li>
<li><strong>æ›´æ–°å¯¹è±¡</strong>ï¼šä¿®æ”¹å¯¹è±¡å±æ€§åï¼Œä½¿ç”¨<code>session.update(retrievedStudent)</code>æ–¹æ³•æ›´æ–°æ•°æ®åº“ä¸­çš„è®°å½•ã€‚</li>
<li><strong>åˆ é™¤å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.delete(retrievedStudent)</code>æ–¹æ³•ä»æ•°æ®åº“ä¸­åˆ é™¤å¯¹è±¡ã€‚</li>
</ul>
</li>
<li><strong>æäº¤äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>transaction.commit()</code>æäº¤äº‹åŠ¡ï¼Œå°†æ‰€æœ‰æ›´æ”¹åŒæ­¥åˆ°æ•°æ®åº“ã€‚</li>
<li><strong>å…³é—­Session</strong>ï¼šé€šè¿‡<code>session.close()</code>å…³é—­<code>Session</code>ã€‚</li>
<li><strong>å…³é—­SessionFactory</strong>ï¼šé€šè¿‡<code>sessionFactory.close()</code>å…³é—­<code>SessionFactory</code>ã€‚</li>
</ol>
<h3 data-id="heading-5">äº‹åŠ¡ç®¡ç†</h3>
<p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œäº‹åŠ¡ç®¡ç†æ˜¯ä¸€ä¸ªå…³é”®éƒ¨åˆ†ã€‚äº‹åŠ¡ç”¨äºç¡®ä¿ä¸€ç»„æ•°æ®åº“æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œä»¥ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚Hibernateé€šè¿‡<code>Session</code>å¯¹è±¡æä¾›äº†å¯¹äº‹åŠ¡çš„ç®¡ç†ã€‚</p>
<h4 data-id="heading-6">äº‹åŠ¡ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
<span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

<span class="hljs-keyword">try</span> {
    transaction = session.beginTransaction();
    <span class="hljs-comment">// æ‰§è¡Œä¸€ç»„æ•°æ®åº“æ“ä½œ</span>
    session.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>));
    transaction.commit(); <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
} <span class="hljs-keyword">catch</span> (Exception e) {
    <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
        transaction.rollback(); <span class="hljs-comment">// å›æ»šäº‹åŠ¡</span>
    }
    e.printStackTrace();
} <span class="hljs-keyword">finally</span> {
    session.close(); <span class="hljs-comment">// å…³é—­Session</span>
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœåœ¨äº‹åŠ¡ä¸­å‘ç”Ÿä»»ä½•å¼‚å¸¸ï¼Œäº‹åŠ¡å°†è¢«å›æ»šï¼Œç¡®ä¿æ•°æ®åº“çŠ¶æ€ä¸å—å½±å“ã€‚</p>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>Hibernateçš„<code>Session</code>æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ¥å£ï¼Œç”¨äºå¤„ç†æŒä¹…åŒ–å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚å®ƒæä¾›äº†CRUDæ“ä½œã€æŸ¥è¯¢ã€äº‹åŠ¡ç®¡ç†å’Œç¼“å­˜ç®¡ç†ç­‰åŠŸèƒ½ï¼Œæ˜¯Hibernateä¸æ•°æ®åº“äº¤äº’çš„æ ¸å¿ƒç»„ä»¶ã€‚é€šè¿‡æ­£ç¡®ä½¿ç”¨<code>Session</code>ï¼Œå¼€å‘è€…å¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®åº“æ“ä½œï¼ŒåŒæ—¶ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ8ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„SessionFactoryï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588300640599080966</link>    <guid>https://juejin.cn/post/7588300640599080966</guid>    <pubDate>2025-12-27T23:15:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640599080966" data-draft-id="7588152122186989622" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ8ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„SessionFactoryï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T23:15:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ8ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„SessionFactoryï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T23:15:44.000Z" title="Sat Dec 27 2025 23:15:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>SessionFactory</code>æ˜¯Hibernateçš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒè´Ÿè´£åˆ›å»ºå’Œç®¡ç†Sessionå¯¹è±¡ã€‚<code>SessionFactory</code>æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ï¼ˆthread-safeï¼‰çš„å¯¹è±¡ï¼Œé€šå¸¸åœ¨åº”ç”¨ç¨‹åºåˆå§‹åŒ–æ—¶åˆ›å»ºï¼Œå¹¶åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºè¿è¡ŒæœŸé—´å­˜åœ¨ã€‚æ¯ä¸ªæ•°æ®åº“éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„<code>SessionFactory</code>å®ä¾‹ï¼Œå®ƒå……å½“è¿æ¥æ•°æ®åº“çš„å·¥å‚ã€‚</p>
<h3 data-id="heading-0">ä¸»è¦åŠŸèƒ½</h3>
<ol>
<li><strong>åˆ›å»ºSession</strong>ï¼šè´Ÿè´£åˆ›å»ºæ–°çš„<code>Session</code>å¯¹è±¡ã€‚</li>
<li><strong>ç®¡ç†Session</strong>ï¼šç®¡ç†å·²ç»åˆ›å»ºçš„<code>Session</code>å¯¹è±¡ã€‚</li>
<li><strong>ç¼“å­˜é…ç½®</strong>ï¼šä¸º<code>Session</code>æä¾›äºŒçº§ç¼“å­˜æ”¯æŒã€‚</li>
<li><strong>æ•°æ®åº“è¿æ¥ç®¡ç†</strong>ï¼šç®¡ç†ä¸æ•°æ®åº“çš„è¿æ¥ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé€šè¿‡ç¼“å­˜å’Œè¿æ¥æ± æŠ€æœ¯æé«˜æ€§èƒ½ã€‚</li>
</ol>
<h3 data-id="heading-1">åˆ›å»ºSessionFactory</h3>
<p>é€šå¸¸ï¼Œ<code>SessionFactory</code>ç”±é…ç½®æ–‡ä»¶ï¼ˆå¦‚<code>hibernate.cfg.xml</code>ï¼‰é…ç½®ï¼Œå¹¶åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶é€šè¿‡<code>Configuration</code>å¯¹è±¡åˆ›å»ºã€‚</p>
<h4 data-id="heading-2"><code>hibernate.cfg.xml</code> ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">ä½¿ç”¨SessionFactory</h3>
<p>é€šè¿‡<code>Configuration</code>å¯¹è±¡è¯»å–é…ç½®æ–‡ä»¶å¹¶åˆ›å»º<code>SessionFactory</code>å®ä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h3 data-id="heading-4">ä½¿ç”¨Sessionè¿›è¡Œæ“ä½œ</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨<code>SessionFactory</code>åˆ›å»º<code>Session</code>å¹¶è¿›è¡ŒCRUDæ“ä½œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ªæ–°çš„Session</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();

        <span class="hljs-comment">// å¯åŠ¨äº‹åŠ¡</span>
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜Studentå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        session.save(student); <span class="hljs-comment">// ä¿å­˜å¯¹è±¡</span>

        <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
        transaction.commit();

        <span class="hljs-comment">// é‡æ–°å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡</span>
        transaction = session.beginTransaction();

        <span class="hljs-comment">// è¯»å–Studentå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
        System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());

        <span class="hljs-comment">// æ›´æ–°Studentå¯¹è±¡</span>
        retrievedStudent.setAge(<span class="hljs-number">21</span>);
        session.update(retrievedStudent); <span class="hljs-comment">// æ›´æ–°å¯¹è±¡</span>

        <span class="hljs-comment">// åˆ é™¤Studentå¯¹è±¡</span>
        session.delete(retrievedStudent); <span class="hljs-comment">// åˆ é™¤å¯¹è±¡</span>

        <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
        transaction.commit();

        <span class="hljs-comment">// å…³é—­Session</span>
        session.close();
        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h3 data-id="heading-5">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li><strong>é…ç½®SessionFactory</strong>ï¼šåœ¨<code>HibernateUtil</code>ç±»ä¸­ï¼Œé€šè¿‡<code>Configuration</code>å¯¹è±¡è¯»å–<code>hibernate.cfg.xml</code>é…ç½®æ–‡ä»¶ï¼Œåˆ›å»º<code>SessionFactory</code>å®ä¾‹ã€‚è¿™ä¸ªè¿‡ç¨‹é€šå¸¸åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶æ‰§è¡Œï¼Œå¹¶ä¸”<code>SessionFactory</code>åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸­æ˜¯å•ä¾‹çš„ã€‚</li>
<li><strong>è·å–Session</strong>ï¼šé€šè¿‡<code>SessionFactory.openSession()</code>æ–¹æ³•è·å–æ–°çš„<code>Session</code>å¯¹è±¡ã€‚<code>Session</code>å¯¹è±¡ç”¨äºæ‰§è¡ŒCRUDæ“ä½œã€‚</li>
<li><strong>å¯åŠ¨äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>session.beginTransaction()</code>æ–¹æ³•å¯åŠ¨äº‹åŠ¡ã€‚</li>
<li><strong>CRUDæ“ä½œ</strong>ï¼š
<ul>
<li><strong>åˆ›å»ºå¹¶ä¿å­˜å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.save(student)</code>æ–¹æ³•å°†å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚</li>
<li><strong>è¯»å–å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.get(Student.class, student.getId())</code>æ–¹æ³•ä»æ•°æ®åº“ä¸­è¯»å–å¯¹è±¡ã€‚</li>
<li><strong>æ›´æ–°å¯¹è±¡</strong>ï¼šä¿®æ”¹å¯¹è±¡å±æ€§åï¼Œä½¿ç”¨<code>session.update(retrievedStudent)</code>æ–¹æ³•æ›´æ–°æ•°æ®åº“ä¸­çš„è®°å½•ã€‚</li>
<li><strong>åˆ é™¤å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.delete(retrievedStudent)</code>æ–¹æ³•ä»æ•°æ®åº“ä¸­åˆ é™¤å¯¹è±¡ã€‚</li>
</ul>
</li>
<li><strong>æäº¤äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>transaction.commit()</code>æ–¹æ³•æäº¤äº‹åŠ¡ï¼Œå°†æ‰€æœ‰æ›´æ”¹åŒæ­¥åˆ°æ•°æ®åº“ã€‚</li>
<li><strong>å…³é—­Session</strong>ï¼šé€šè¿‡<code>session.close()</code>æ–¹æ³•å…³é—­<code>Session</code>ã€‚</li>
<li><strong>å…³é—­SessionFactory</strong>ï¼šé€šè¿‡<code>sessionFactory.close()</code>æ–¹æ³•å…³é—­<code>SessionFactory</code>ã€‚</li>
</ol>
<h3 data-id="heading-6">æ€§èƒ½ä¼˜åŒ–</h3>
<p><code>SessionFactory</code>è¿˜æä¾›ä¸€äº›æ€§èƒ½ä¼˜åŒ–åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>äºŒçº§ç¼“å­˜</strong>ï¼šé€šè¿‡é…ç½®äºŒçº§ç¼“å­˜ï¼Œå‡å°‘å¯¹æ•°æ®åº“çš„ç›´æ¥è®¿é—®ï¼Œæé«˜æ€§èƒ½ã€‚</li>
<li><strong>è¿æ¥æ± ç®¡ç†</strong>ï¼šé€šè¿‡é…ç½®è¿æ¥æ± ï¼Œç®¡ç†å’Œä¼˜åŒ–æ•°æ®åº“è¿æ¥çš„ä½¿ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-7">äºŒçº§ç¼“å­˜é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- äºŒçº§ç¼“å­˜é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_second_level_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.region.factory_class"</span>&gt;</span>org.hibernate.cache.ehcache.EhCacheRegionFactory<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.provider_class"</span>&gt;</span>org.hibernate.cache.EhCacheProvider<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<p>é€šè¿‡ä¸Šè¿°é…ç½®ï¼Œå¯ç”¨Hibernateçš„äºŒçº§ç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥æ˜¾è‘—æé«˜åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚</p>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><code>SessionFactory</code>æ˜¯Hibernateçš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œè´Ÿè´£åˆ›å»ºå’Œç®¡ç†<code>Session</code>å¯¹è±¡ï¼Œæä¾›äº†æ•°æ®åº“è¿æ¥ã€ç¼“å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–ç­‰åŠŸèƒ½ã€‚åœ¨ä¸€ä¸ªå…¸å‹çš„Hibernateåº”ç”¨ç¨‹åºä¸­ï¼Œ<code>SessionFactory</code>é€šå¸¸åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åˆå§‹åŒ–ï¼Œå¹¶åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨ã€‚æ­£ç¡®åœ°ä½¿ç”¨<code>SessionFactory</code>å’Œ<code>Session</code>ï¼Œå¯ä»¥æœ‰æ•ˆåœ°è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAGæŠ€æœ¯æ¼”è¿›ï¼šä»å¤–éƒ¨çŸ¥è¯†åº“åˆ°æ™ºèƒ½ä½“æ ¸å¿ƒè®°å¿†ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7588080521445523502</link>    <guid>https://juejin.cn/post/7588080521445523502</guid>    <pubDate>2025-12-27T16:24:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588080521445523502" data-draft-id="7588104741610455050" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAGæŠ€æœ¯æ¼”è¿›ï¼šä»å¤–éƒ¨çŸ¥è¯†åº“åˆ°æ™ºèƒ½ä½“æ ¸å¿ƒè®°å¿†ç³»ç»Ÿ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-27T16:24:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="moshuying"/> <meta itemprop="url" content="https://juejin.cn/user/2700056289356936"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAGæŠ€æœ¯æ¼”è¿›ï¼šä»å¤–éƒ¨çŸ¥è¯†åº“åˆ°æ™ºèƒ½ä½“æ ¸å¿ƒè®°å¿†ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2700056289356936/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    moshuying
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:24:19.000Z" title="Sat Dec 27 2025 16:24:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æŠ€æœ¯æ¼”è¿›å…¨æ™¯å›¾</h3>
<p>æ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯è‡ª2020å¹´æå‡ºä»¥æ¥ï¼Œç»å†äº†æ˜ç¡®çš„èŒƒå¼æ¼”è¿›ã€‚ä»¥ä¸‹æ—¶é—´è½´æ¦‚æ‹¬äº†å„æ ¸å¿ƒèŒƒå¼å‡ºç°çš„æ—¶é—´ç‚¹ä¸æ¼”è¿›å…³ç³»ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">timeline
    title RAGæŠ€æœ¯æ¼”è¿›æ—¶é—´è½´
    2020 : æœ´ç´ RAGå¥ åŸº
         : æ£€ç´¢-ç”ŸæˆåŸºç¡€æ¶æ„
    2022 : è¯­ä¹‰å¢å¼ºRAGå…´èµ·
         : å‘é‡æ£€ç´¢ä¸å¤šè·³æŸ¥è¯¢
    2023 : å¤šæ¨¡æ€ä¸å›¾RAGå‘å±•
         : è·¨æ¨¡æ€æ£€ç´¢ä¸çŸ¥è¯†å›¾è°±
    2024 : è‡ªé€‚åº”ä¸æ™ºèƒ½ä½“RAG
         : åŠ¨æ€å†³ç­–ä¸å·¥å…·è°ƒç”¨

</code></pre>
<h3 data-id="heading-1">1. åŸºç¡€èŒƒå¼ï¼šæœ´ç´ RAGæ¶æ„ä¸å±€é™æ€§</h3>
<p>æœ´ç´ RAGç¡®ç«‹äº†â€œæ£€ç´¢-å¢å¼º-ç”Ÿæˆâ€çš„åŸºç¡€æµæ°´çº¿ï¼Œå…¶æ¶æ„ç›´æ¥åæ˜ äº†è¯¥æ ¸å¿ƒæ€æƒ³ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[ç”¨æˆ·Query] --&gt; B[æŸ¥è¯¢å‘é‡åŒ–]
    B --&gt; C[å‘é‡æ•°æ®åº“æ£€ç´¢]
    C --&gt; D[æ‹¼æ¥ä¸Šä¸‹æ–‡ä¸Query]
    D --&gt; E[LLMç”Ÿæˆ]
    E --&gt; F[æœ€ç»ˆç­”æ¡ˆ]

</code></pre>
<p>è¯¥èŒƒå¼çš„æŠ€æœ¯å®ç°ç›´æ¥ï¼Œä½†å…¶å±€é™æ€§åœ¨å·¥ä¸šåœºæ™¯ä¸­è¿…é€Ÿæš´éœ²ï¼š</p>
<ol>
<li><strong>æ£€ç´¢æ•ˆç‡ç“¶é¢ˆ</strong>ï¼šä¾èµ–TF-IDF/BM25ç­‰ç¨€ç–æ£€ç´¢ï¼Œåœ¨ä¸“ä¸šé¢†åŸŸå¬å›ç‡å¸¸ä½äº40%ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡å¤±çœŸ</strong>ï¼šå›ºå®šé•¿åº¦æ–‡æœ¬åˆ‡å—å¯¼è‡´è¶…è¿‡30%çš„å…³é”®ä¿¡æ¯è¢«å‰²è£‚æˆ–ä¸¢å¤±ã€‚</li>
<li><strong>ç”Ÿæˆå¯æ§æ€§å·®</strong>ï¼šæœªç»æ ¡å‡†çš„æ£€ç´¢ç»“æœç›´æ¥è¾“å…¥ç”Ÿæˆå™¨ï¼Œå¯¼è‡´äº‹å®é”™è¯¯ç‡é«˜è¾¾15-20%ã€‚</li>
</ol>
<p>æ­¤é˜¶æ®µRAGåœ¨é€šç”¨é—®ç­”åŸºå‡†ä¸Šçš„F1å€¼çº¦ä¸º0.62ï¼Œè¾ƒçº¯ç”Ÿæˆæ¨¡å‹æå‡æœ‰é™ï¼Œæ­ç¤ºäº†â€œåƒåœ¾è¿›ã€åƒåœ¾å‡ºâ€çš„æœ¬è´¨é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">2. è¯­ä¹‰å¢å¼ºèŒƒå¼ï¼šå‘é‡æ£€ç´¢ä¸å¤šè·³æŸ¥è¯¢</h3>
<p>ä¸ºçªç ´åŸºç¡€èŒƒå¼çš„å±€é™ï¼Œè¯­ä¹‰å¢å¼ºRAGå¼•å…¥äº†ç¨ å¯†å‘é‡æ£€ç´¢ä¸å¤šè·³æŸ¥è¯¢æœºåˆ¶ï¼Œå…¶æ ¸å¿ƒæ˜¯<strong>é€šè¿‡è¯­ä¹‰ç†è§£æå‡æ£€ç´¢ç²¾åº¦</strong>ã€‚</p>
<ul>
<li><strong>ç¨ å¯†å‘é‡æ£€ç´¢</strong>ï¼šé‡‡ç”¨åŒå¡”ç¼–ç å™¨ï¼ˆå¦‚Sentence-BERTï¼‰ï¼Œå°†æŸ¥è¯¢ä¸æ–‡æ¡£æ˜ å°„åˆ°åŒä¸€768ç»´è¯­ä¹‰ç©ºé—´ï¼Œé€šè¿‡ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—åŒ¹é…åº¦ï¼Œä½¿æ£€ç´¢ä»å…³é”®è¯åŒ¹é…å‡çº§ä¸ºè¯­ä¹‰åŒ¹é…ã€‚</li>
<li><strong>å¤šè·³æ£€ç´¢</strong>ï¼šå¯¹äºå¤æ‚æŸ¥è¯¢ï¼Œç³»ç»Ÿæ‰§è¡Œè¿­ä»£æ£€ç´¢ã€‚ä¾‹å¦‚ï¼Œå¯¹äºâ€œçˆ±å› æ–¯å¦åœ¨è¯ºè´å°”å¥–æ¼”è®²ä¸­æåˆ°äº†è°çš„ç†è®ºï¼Ÿâ€ï¼Œç³»ç»Ÿå¯èƒ½é¦–è½®æ£€ç´¢â€œçˆ±å› æ–¯å¦è¯ºè´å°”æ¼”è®²â€ï¼Œä»ä¸­æå–å…³é”®å®ä½“ï¼ˆå¦‚â€œç‰›é¡¿â€ï¼‰ï¼Œå†è¿›è¡Œç¬¬äºŒè½®æ£€ç´¢ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤šè·³æ£€ç´¢ç®€åŒ–ç¤ºä¾‹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">multi_hop_retrieval</span>(<span class="hljs-params">initial_query, max_hops=<span class="hljs-number">2</span></span>):
    current_query = initial_query
    retrieved_contexts = []

    <span class="hljs-keyword">for</span> hop <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_hops):
        <span class="hljs-comment"># 1. è¯­ä¹‰æ£€ç´¢</span>
        docs = dense_vector_retriever.search(current_query, top_k=<span class="hljs-number">3</span>)
        retrieved_contexts.extend(docs)

        <span class="hljs-comment"># 2. åˆ¤æ–­æ˜¯å¦éœ€è¿›ä¸€æ­¥æŸ¥è¯¢ï¼ˆç”±ä¸€ä¸ªå°å‹åˆ†ç±»å™¨æˆ–è§„åˆ™åˆ¤æ–­ï¼‰</span>
        <span class="hljs-keyword">if</span> need_further_hop(current_query, docs):
            <span class="hljs-comment"># 3. ç”Ÿæˆä¸‹ä¸€è·³æŸ¥è¯¢ï¼ˆåˆ©ç”¨LLMæç‚¼æ–°æŸ¥è¯¢ç„¦ç‚¹ï¼‰</span>
            current_query = llm_generate_next_query(current_query, docs)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">return</span> aggregate_contexts(retrieved_contexts)

</code></pre>
<p>è¯¥èŒƒå¼å°†æ£€ç´¢å¬å›ç‡æå‡è‡³80%ä»¥ä¸Šï¼Œå¹¶åœ¨HotpotQAç­‰å¤šè·³æ¨ç†æ•°æ®é›†ä¸Šå®ç°è¶…è¿‡25%çš„æ€§èƒ½æå‡ã€‚</p>
<h3 data-id="heading-3">3. å¤šæ¨¡æ€èåˆèŒƒå¼ï¼šè·¨æ¨¡æ€çŸ¥è¯†å¯¹é½</h3>
<p>å½“ä¿¡æ¯ä¸é™äºæ–‡æœ¬æ—¶ï¼Œå¤šæ¨¡æ€RAGæˆä¸ºå¿…ç„¶ã€‚å…¶æ ¸å¿ƒæ˜¯æ„å»º<strong>ç»Ÿä¸€çš„è·¨æ¨¡æ€è¯­ä¹‰ç©ºé—´</strong>ã€‚</p>
<ul>
<li><strong>ç»Ÿä¸€ç¼–ç </strong>ï¼šé‡‡ç”¨å¦‚CLIPçš„æ¨¡å‹ï¼Œå°†å›¾åƒã€æ–‡æœ¬ç­‰ä¸åŒæ¨¡æ€æ•°æ®ç¼–ç åˆ°åŒä¸€å‘é‡ç©ºé—´ï¼Œå®ç°â€œä»¥å›¾æœæ–‡â€æˆ–â€œä»¥æ–‡æœå›¾â€ã€‚</li>
<li><strong>è”åˆæ£€ç´¢</strong>ï¼šé’ˆå¯¹å¤šæ¨¡æ€æŸ¥è¯¢ï¼ˆå¦‚â€œæ‰¾ä¸€å¼ ç±»ä¼¼ä¸‹å›¾ä¸­é£æ™¯ç…§çš„è¯—è¯é…å›¾â€ï¼‰ï¼Œç³»ç»Ÿå¹¶è¡Œæ£€ç´¢å¤šæ¨¡æ€æ•°æ®åº“ï¼Œå¹¶å¯¹ç»“æœè¿›è¡Œè·¨æ¨¡æ€ç›¸å…³æ€§èåˆã€‚</li>
</ul>
<p>è¯¥èŒƒå¼åœ¨åŒ»ç–—å½±åƒæŠ¥å‘Šç”Ÿæˆç­‰åœºæ™¯ä¸­ï¼Œå°†è¯Šæ–­æè¿°å‡†ç¡®ç‡ä»77%æå‡è‡³91%ï¼Œè¯æ˜äº†å¤„ç†å¤åˆä¿¡æ¯æºçš„ä»·å€¼ã€‚</p>
<h3 data-id="heading-4">4. ä¸Šä¸‹æ–‡æ„ŸçŸ¥èŒƒå¼ï¼šåŠ¨æ€æ£€ç´¢ä¸é‡æ’åº</h3>
<p>ä¸ºè§£å†³â€œä¸Šä¸‹æ–‡çª—å£æ»¥ç”¨â€å¯¼è‡´çš„ä¿¡æ¯è¿‡è½½ä¸æ€§èƒ½ä¸‹é™é—®é¢˜ï¼Œä¸Šä¸‹æ–‡æ„ŸçŸ¥RAGå¼•å…¥äº†åŠ¨æ€å†³ç­–æœºåˆ¶ã€‚</p>
<ul>
<li><strong>åŠ¨æ€æ£€ç´¢çª—å£</strong>ï¼šç³»ç»Ÿæ ¹æ®æŸ¥è¯¢å¤æ‚åº¦ä¸å¯¹è¯å†å²ï¼Œè‡ªé€‚åº”å†³å®šæ£€ç´¢èŒƒå›´å’Œè¿”å›ç‰‡æ®µæ•°é‡ï¼Œé¿å…æ— å…³ä¿¡æ¯ç¨€é‡Šå…³é”®å†…å®¹ã€‚</li>
<li><strong>é‡æ’åºå™¨</strong>ï¼šåœ¨åˆæ­¥å‘é‡æ£€ç´¢åï¼Œå¼•å…¥è½»é‡çº§äº¤å‰ç¼–ç å™¨æ¨¡å‹å¯¹Top-Kç»“æœè¿›è¡Œç²¾æ’ï¼Œé‡æ–°è¯„ä¼°æŸ¥è¯¢ä¸æ¯ä¸ªç‰‡æ®µçš„ç»†å¾®ç›¸å…³æ€§ï¼Œå°†Top-1å‡†ç¡®ç‡æå‡çº¦22%ã€‚</li>
<li><strong>è¿­ä»£ä¿®æ­£</strong>ï¼šå¼•å…¥â€œç”Ÿæˆ-æ£€ç´¢-éªŒè¯â€å¾ªç¯ï¼Œå½“LLMå¯¹å½“å‰æ£€ç´¢ç»“æœç½®ä¿¡åº¦ä½æ—¶ï¼Œè§¦å‘æ–°ä¸€è½®ä¿®æ­£æ£€ç´¢ã€‚</li>
</ul>
<p>æ­¤èŒƒå¼åœ¨é‡‘èã€æ³•å¾‹ç­‰é«˜ç²¾åº¦è¦æ±‚çš„åœºæ™¯ä¸­ï¼Œå°†ç­”æ¡ˆå‡†ç¡®ç‡ç¨³å®šåœ¨90%ä»¥ä¸Šã€‚</p>
<h3 data-id="heading-5">5. ä»£ç RAGçš„ç°çŠ¶ä¸æ ¸å¿ƒéš¾ç‚¹</h3>
<p>å°†RAGåº”ç”¨äºä»£ç æ£€ç´¢ä¸ç”Ÿæˆæ˜¯æå…·ä»·å€¼çš„åœºæ™¯ï¼Œä½†é¢ä¸´ä¸åŒäºè‡ªç„¶è¯­è¨€çš„ç‹¬ç‰¹æŒ‘æˆ˜ã€‚ä»£ç çš„å¼ºç»“æ„æ€§ã€ç²¾ç¡®æ€§å’ŒæŠ½è±¡æ€§ï¼Œä½¿å¾—é€šç”¨RAGèŒƒå¼åœ¨æ­¤æ°´åœŸä¸æœã€‚</p>
<p><strong>æ ¸å¿ƒéš¾ç‚¹ä¸åº”å¯¹æ€è·¯ï¼š</strong></p>
<ol>
<li><strong>è¯­ä¹‰åŒ¹é…ä¸ç²¾ç¡®ç¬¦å·åŒ¹é…çš„å†²çª</strong>
<ul>
<li><strong>éš¾ç‚¹</strong>ï¼šä»£ç ä¸­å‡½æ•°åã€å˜é‡åã€APIè°ƒç”¨éœ€ç²¾ç¡®åŒ¹é…ã€‚çº¯è¯­ä¹‰æ£€ç´¢å¯èƒ½å› ç†è§£â€œåˆ›å»ºâ€çš„è¯­ä¹‰ï¼Œè€Œè¿”å›<code>generate()</code>æˆ–<code>build()</code>ï¼Œè€Œéå®é™…æ‰€éœ€çš„<code>create()</code>å‡½æ•°ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šé‡‡ç”¨<strong>æ··åˆæ£€ç´¢ï¼ˆHybrid Searchï¼‰</strong>ã€‚ç»“åˆç¨ å¯†å‘é‡æ£€ç´¢ï¼ˆç†è§£ä»£ç åŠŸèƒ½è¯­ä¹‰ï¼‰ä¸ç¨€ç–å…³é”®è¯æ£€ç´¢ï¼ˆç²¾ç¡®åŒ¹é…ç¬¦å·åï¼‰ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨BM25ç¡®ä¿å‘½ä¸­â€œ<code>pandas.read_csv</code>â€ï¼ŒåŒæ—¶ç”¨å‘é‡æ£€ç´¢ç†è§£â€œè¯»å–CSVæ–‡ä»¶â€çš„æ„å›¾ã€‚</li>
</ul>
</li>
<li><strong>ä»£ç ç»“æ„åœ¨åˆ‡åˆ†æ—¶çš„ç ´å</strong>
<ul>
<li><strong>éš¾ç‚¹</strong>ï¼šæŒ‰å›ºå®šé•¿åº¦åˆ‡åˆ†æ–‡æœ¬ä¼šåˆ‡ç¢å‡½æ•°å®šä¹‰ã€ç±»å£°æ˜ï¼Œå¯¼è‡´æ£€ç´¢åˆ°æ— æ•ˆç‰‡æ®µã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šé‡‡ç”¨<strong>åŸºäºæŠ½è±¡è¯­æ³•æ ‘çš„æ™ºèƒ½åˆ†å—</strong>ã€‚åˆ©ç”¨ASTè§£æä»£ç ï¼ŒæŒ‰å‡½æ•°ã€ç±»ã€æ–¹æ³•ç­‰è‡ªç„¶è¾¹ç•Œè¿›è¡Œåˆ†å—ï¼Œä¿æŒé€»è¾‘å•å…ƒçš„å®Œæ•´æ€§ã€‚</li>
</ul>
</li>
<li><strong>é•¿è·ç¦»ä¾èµ–ä¸å…¨å±€ä¸Šä¸‹æ–‡ç¼ºå¤±</strong>
<ul>
<li><strong>éš¾ç‚¹</strong>ï¼šç†è§£ä¸€ä¸ªå‡½æ•°å¯èƒ½éœ€è¦å…¶å¯¼å…¥çš„æ¨¡å—ã€çˆ¶ç±»å®šä¹‰æˆ–ç›¸å…³é…ç½®ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½åˆ†å¸ƒåœ¨ä»£ç åº“ä¸åŒä½ç½®ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šå®æ–½<strong>å¤šè·³æ£€ç´¢</strong>ã€‚ç¬¬ä¸€è·³å®šä½ç›®æ ‡å‡½æ•°ï¼Œç¬¬äºŒè·³æ£€ç´¢å…¶ä¾èµ–æˆ–è°ƒç”¨é“¾ï¼Œç¬¬ä¸‰è·³æ£€ç´¢ç›¸å…³ç±»å‹å®šä¹‰ï¼Œé€æ­¥æ„å»ºå®Œæ•´ä¸Šä¸‹æ–‡å›¾è°±ã€‚</li>
</ul>
</li>
<li><strong>Agentic RAGåœ¨ä»£ç åœºæ™¯ä¸­çš„å†³ç­–å¤æ‚æ€§</strong>
<ul>
<li><strong>éš¾ç‚¹</strong>ï¼šæ™ºèƒ½ä½“éœ€è‡ªä¸»åˆ¤æ–­ä½•æ—¶æ£€ç´¢ã€æ£€ç´¢ä»€ä¹ˆï¼ˆä»£ç ã€æ–‡æ¡£ã€é”™è¯¯æ—¥å¿—ï¼‰ã€ä»¥åŠå¦‚ä½•ç»„åˆä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œâ€œä¿®å¤è¿™ä¸ªBugâ€éœ€åˆ†è§£ä¸ºï¼šæ£€ç´¢é”™è¯¯ä»£ç ã€æ£€ç´¢ç›¸ä¼¼Issueã€æ£€ç´¢ç›¸å…³APIæ–‡æ¡£ã€æ£€ç´¢å•å…ƒæµ‹è¯•ç­‰å¤šæ­¥ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šå¼ºåŒ–æ™ºèƒ½ä½“çš„<strong>ä»»åŠ¡è§„åˆ’ä¸å·¥å…·è°ƒç”¨</strong>èƒ½åŠ›ã€‚ä¸ºå…¶é…å¤‡ä»£ç è§£æå™¨ã€é™æ€åˆ†æå·¥å…·ã€æµ‹è¯•è¿è¡Œå™¨ç­‰ä¸“ç”¨å·¥å…·ï¼Œä½¿å…¶èƒ½åƒé«˜çº§å·¥ç¨‹å¸ˆä¸€æ ·æ‰§è¡Œå¤åˆæ“ä½œã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸€ä¸ªç®€åŒ–çš„ä»£ç å¯¼å‘æ™ºèƒ½ä½“å†³ç­–é€»è¾‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeAwareRAGAgent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_and_fix</span>(<span class="hljs-params">self, issue_description</span>):
        <span class="hljs-comment"># 1. è§„åˆ’ï¼šåˆ†è§£ä»»åŠ¡</span>
        plan = self.llm_planner(issue_description)
        <span class="hljs-comment"># è¾“å‡º: ["å®šä½æ ¸å¿ƒä»£ç ", "æŸ¥æ‰¾ç›¸ä¼¼é”™è¯¯æ¨¡å¼", "æ£€ç´¢APIçº¦æŸ", "ç”Ÿæˆè¡¥ä¸"]</span>

        contexts = []
        <span class="hljs-keyword">for</span> step <span class="hljs-keyword">in</span> plan:
            <span class="hljs-keyword">if</span> <span class="hljs-string">"å®šä½ä»£ç "</span> <span class="hljs-keyword">in</span> step:
                <span class="hljs-comment"># 2. æ£€ç´¢ï¼šæ··åˆæ£€ç´¢æ ¸å¿ƒä»£ç æ®µ</span>
                contexts.append(self.hybrid_retrieve(issue_description, use_ast=<span class="hljs-literal">True</span>))
            <span class="hljs-keyword">elif</span> <span class="hljs-string">"æŸ¥æ‰¾é”™è¯¯"</span> <span class="hljs-keyword">in</span> step:
                <span class="hljs-comment"># 3. å·¥å…·è°ƒç”¨ï¼šæœç´¢Issueè·Ÿè¸ªç³»ç»Ÿ</span>
                contexts.append(self.tool_search_jira(issue_description))
            <span class="hljs-comment"># ... å…¶ä»–æ­¥éª¤</span>
        <span class="hljs-comment"># 4. ç”Ÿæˆä¸éªŒè¯ï¼šç»¼åˆæ‰€æœ‰ä¸Šä¸‹æ–‡ç”Ÿæˆä¿®å¤ï¼Œå¹¶å»ºè®®è¿è¡Œæµ‹è¯•</span>
        patch = self.llm_generate_patch(contexts)
        <span class="hljs-keyword">return</span> patch, <span class="hljs-string">"å»ºè®®æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼špytest tests/test_module.py::TestClass"</span>

</code></pre>
<p>å½“å‰ï¼Œä»£ç RAGçš„æˆåŠŸåº”ç”¨ï¼ˆå¦‚Cursor IDEï¼‰å‡éå•ä¸€æŠ€æœ¯ï¼Œè€Œæ˜¯<strong>æ··åˆæ£€ç´¢ã€ç»“æ„æ„ŸçŸ¥åˆ†å—ã€å¤šè·³æŸ¥è¯¢ä¸æ™ºèƒ½ä½“è§„åˆ’</strong>çš„ç»¼åˆä½“ã€‚å…¶è¯„ä¼°æŒ‡æ ‡ä¹Ÿæ›´ä¸¥æ ¼ï¼Œä¸ä»…çœ‹ç”Ÿæˆä»£ç çš„è¯­ä¹‰æ­£ç¡®æ€§ï¼Œæ›´éœ€é€šè¿‡ç¼–è¯‘å’Œæµ‹è¯•ç”¨ä¾‹ã€‚</p>
<h3 data-id="heading-6">6. è‡ªé€‚åº”ä¸æ™ºèƒ½ä½“èŒƒå¼ï¼šè‡ªä¸»å†³ç­–ç³»ç»Ÿçš„æ ¸å¿ƒ</h3>
<p>RAGçš„æœ€ç»ˆæ¼”è¿›æ–¹å‘æ˜¯æˆä¸ºè‡ªä¸»æ™ºèƒ½ä½“çš„æ ¸å¿ƒè®°å¿†ä¸çŸ¥è¯†å­ç³»ç»Ÿã€‚åœ¨æ­¤èŒƒå¼ä¸­ï¼ŒRAGä¸å†æ˜¯è¢«åŠ¨æŸ¥è¯¢å·¥å…·ï¼Œè€Œæ˜¯æ™ºèƒ½ä½“<strong>è®¤çŸ¥å¾ªç¯</strong>çš„ä¸€éƒ¨åˆ†ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¤æ‚ä»»åŠ¡] --&gt; B[æ™ºèƒ½ä½“ä»»åŠ¡è§„åˆ’]
    B --&gt; C{å†³ç­–: éœ€è¦ä½•ç§çŸ¥è¯†?}
    C --&gt;|äº‹å®æŸ¥è¯¢| D[è°ƒç”¨RAGè¿›è¡Œæ£€ç´¢]
    C --&gt;|ç¨‹åºæ‰§è¡Œ| E[è°ƒç”¨ä»£ç è§£é‡Šå™¨]
    C --&gt;|å®æ—¶ä¿¡æ¯| F[è°ƒç”¨æœç´¢å¼•æ“]
    D &amp; E &amp; F --&gt; G[ç»¼åˆä¿¡æ¯è¿›è¡Œæ¨ç†]
    G --&gt; H{å­ä»»åŠ¡è§£å†³?}
    H --&gt;|å¦| B
    H --&gt;|æ˜¯ï¼Œç»§ç»­| I[æ‰§è¡Œä¸‹ä¸€å­ä»»åŠ¡]
    I --&gt; J{æ‰€æœ‰ä»»åŠ¡å®Œæˆ?}
    J --&gt;|å¦| B
    J --&gt;|æ˜¯| K[æ•´åˆè¾“å‡ºæœ€ç»ˆç»“æœ]

</code></pre>
<p>åœ¨æ­¤æ¶æ„ä¸­ï¼š</p>
<ul>
<li><strong>RAGä½œä¸ºè®°å¿†ä½“</strong>ï¼šä¸ºæ™ºèƒ½ä½“æä¾›é•¿æœŸã€ç»“æ„åŒ–çš„äº‹å®çŸ¥è¯†ã€‚</li>
<li><strong>åŠ¨æ€ä¸Šä¸‹æ–‡ç®¡ç†</strong>ï¼šæ™ºèƒ½ä½“æ ¹æ®ä»»åŠ¡é˜¶æ®µï¼Œä¸»åŠ¨ä»RAGç³»ç»Ÿä¸­å†™å…¥ã€è¯»å–ã€å‹ç¼©æˆ–éš”ç¦»ç›¸å…³çŸ¥è¯†ç‰‡æ®µï¼Œå®ç°é«˜æ•ˆçš„â€œä¸Šä¸‹æ–‡å·¥ç¨‹â€ã€‚</li>
<li><strong>å·¥å…·é›†æˆ</strong>ï¼šRAGä¸ä»£ç è§£é‡Šå™¨ã€è®¡ç®—å™¨ã€APIè°ƒç”¨ç­‰å·¥å…·å¹³çº§ï¼Œç”±æ™ºèƒ½ä½“ç»Ÿä¸€è°ƒåº¦ï¼ŒååŒè§£å†³å¤æ‚é—®é¢˜ã€‚</li>
</ul>
<p>è¯¥èŒƒå¼åœ¨è‡ªåŠ¨åŒ–æ•°æ®åˆ†æã€å¤æ‚ç³»ç»Ÿæ•…éšœæ’æŸ¥ç­‰åœºæ™¯ä¸­å±•ç°å‡ºæ½œåŠ›ï¼Œå…¶æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºæ™ºèƒ½ä½“è§„åˆ’ä¸å†³ç­–çš„å¯é æ€§ã€‚</p>
<h3 data-id="heading-7">æœªæ¥å±•æœ›ï¼šä½œä¸ºåŸºç¡€è®¾æ–½çš„RAG</h3>
<p>RAGæŠ€æœ¯çš„æ¼”è¿›è·¯å¾„è¡¨æ˜ï¼Œå…¶æ­£ä»ç‹¬ç«‹çš„â€œæ£€ç´¢-ç”Ÿæˆâ€åº”ç”¨ï¼Œæ¼”å˜ä¸º<strong>æ™ºèƒ½ä½“ç³»ç»Ÿçš„æ ‡å‡†çŸ¥è¯†ç»„ä»¶</strong>å’Œ<strong>è¿æ¥å¼‚æ„æ•°æ®æºçš„è¯­ä¹‰å±‚</strong>ã€‚æœªæ¥å…³æ³¨ç‚¹å°†é›†ä¸­äºï¼š</p>
<ol>
<li><strong>ä¸é•¿ä¸Šä¸‹æ–‡æ¨¡å‹çš„ååŒ</strong>ï¼šæ¢ç´¢RAGå¦‚ä½•ä¸ç™¾ä¸‡Tokenä¸Šä¸‹æ–‡çª—å£çš„LLMååŒï¼ŒRAGè´Ÿè´£é«˜æ•ˆç­›é€‰ã€ç»„ç»‡å…³é”®ä¿¡æ¯ï¼Œé•¿ä¸Šä¸‹æ–‡æ¨¡å‹è´Ÿè´£æ·±åº¦èåˆä¸æ¨ç†ï¼Œå½¢æˆäº’è¡¥ã€‚</li>
<li><strong>æ ‡å‡†åŒ–è¯­ä¹‰å±‚</strong>ï¼šæ¨åŠ¨å»ºç«‹ä¼ä¸šçº§æ•°æ®è¯­ä¹‰åŒ–æ ‡å‡†ï¼Œä½¿RAGèƒ½ç»Ÿä¸€ç†è§£æ¥è‡ªæ•°æ®åº“ã€æ–‡æ¡£ã€å›¾è°±ã€APIçš„ç»“æ„åŒ–ä¸éç»“æ„åŒ–ä¿¡æ¯ã€‚</li>
<li><strong>å¼ºåŒ–è¯„ä¼°ä¸å¯è§£é‡Šæ€§</strong>ï¼šå°¤å…¶åœ¨ä»£ç ã€åŒ»ç–—ã€é‡‘èç­‰é«˜é£é™©é¢†åŸŸï¼Œéœ€å‘å±•æ›´ä¸¥æ ¼çš„è¯„ä¼°åŸºå‡†ï¼Œå¹¶æå‡æ£€ç´¢ç»“æœä¸ç”Ÿæˆè¿‡ç¨‹çš„å¯é è§£é‡Šæ€§ã€‚</li>
</ol>
<p>å¯¹äºå·¥ç¨‹å¸ˆè€Œè¨€ï¼Œç†è§£RAGä»é™æ€ç®¡é“åˆ°åŠ¨æ€æ™ºèƒ½ä½“ç»„ä»¶çš„æ¼”è¿›ï¼Œæœ‰åŠ©äºåœ¨è®¾è®¡ä¸‹ä¸€ä»£ç³»ç»Ÿæ—¶ï¼Œå°†å…¶å®šä½ä¸º<strong>å¯ç¼–ç¨‹ã€å¯é›†æˆã€å¯è§‚æµ‹çš„æ ¸å¿ƒçŸ¥è¯†åŸºç¡€è®¾æ–½</strong>ï¼Œè€Œéä¸€ä¸ªå°é—­çš„é—®ç­”é»‘ç›’ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mybatiså…¥é—¨åˆ°ç²¾é€š äºŒ]]></title>    <link>https://juejin.cn/post/7588042910198595634</link>    <guid>https://juejin.cn/post/7588042910198595634</guid>    <pubDate>2025-12-27T23:54:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198595634" data-draft-id="7588067055482404873" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mybatiså…¥é—¨åˆ°ç²¾é€š äºŒ"/> <meta itemprop="keywords" content="Java,MyBatis,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2025-12-27T23:54:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ä¾ å®¢è¡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/556801719828361"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mybatiså…¥é—¨åˆ°ç²¾é€š äºŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/556801719828361/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ä¾ å®¢è¡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T23:54:45.000Z" title="Sat Dec 27 2025 23:54:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨<a href="https://juejin.cn/post/7588084804093280294" target="_blank" title="https://juejin.cn/post/7588084804093280294">ã€ŠMybatiså…¥é—¨åˆ°ç²¾é€š ä¸€ã€‹</a>ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†Mybatiså¯åŠ¨è¿‡ç¨‹ï¼šé…ç½®è§£æã€åˆ›å»ºSqlSessionã€‚æœ¬æ–‡ä»‹ç»äº†SQLæ‰§è¡Œå¼•æ“Executorï¼Œä»¥åŠå’ŒExecutorå¯†åˆ‡ç›¸å…³çš„ä¸€äºŒçº§ç¼“å­˜å®ç°ã€‚</p>
<blockquote>
<p>æ³¨ï¼šæœ¬æ–‡ä¸­æºç æ¥è‡ªmybatis 3.4.xç‰ˆæœ¬ï¼Œåœ°å€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmybatis%2Fmybatis-3.git" target="_blank" title="https://github.com/mybatis/mybatis-3.git" ref="nofollow noopener noreferrer">github.com/mybatis/mybâ€¦</a></p>
</blockquote>
<h2 data-id="heading-0">ä¸€ Executoræ¥å£</h2>
<h3 data-id="heading-1">1.1 ä½œç”¨</h3>
<p>Executoræ¥å£ä¸­ï¼Œæ˜¯MyBatisçš„SQLæ‰§è¡Œå¼•æ“ï¼Œé€šè¿‡ç²¾å·§çš„è®¾è®¡æ¨¡å¼ç»„åˆï¼Œå®ç°äº†SQLæ‰§è¡Œçš„é«˜æ•ˆåè°ƒå’Œçµæ´»æ‰©å±•ã€‚è¯¥æ¥å£æœ‰ä»¥ä¸‹å…³é”®èŒè´£ï¼š</p>
<ol>
<li>SQLæ‰§è¡Œåè°ƒ</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥è¯¢æ“ä½œ</span>
&lt;E&gt; List&lt;E&gt; <span class="hljs-title function_">query</span><span class="hljs-params">(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler)</span>;
<span class="hljs-comment">// æ›´æ–°æ“ä½œ  </span>
<span class="hljs-type">int</span> <span class="hljs-title function_">update</span><span class="hljs-params">(MappedStatement ms, Object parameter)</span>;
</code></pre>
<ol start="2">
<li>ç¼“å­˜ç®¡ç†</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸€çº§ç¼“å­˜ç®¡ç†</span>
CacheKey <span class="hljs-title function_">createCacheKey</span><span class="hljs-params">(MappedStatement ms, Object parameterObject, RowBounds rowBounds, BoundSql boundSql)</span>;
<span class="hljs-type">boolean</span> <span class="hljs-title function_">isCached</span><span class="hljs-params">(MappedStatement ms, CacheKey key)</span>;
<span class="hljs-keyword">void</span> <span class="hljs-title function_">clearLocalCache</span><span class="hljs-params">()</span>;
</code></pre>
<ol start="3">
<li>äº‹åŠ¡æ§åˆ¶</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">commit</span><span class="hljs-params">(<span class="hljs-type">boolean</span> required)</span>;
<span class="hljs-keyword">void</span> <span class="hljs-title function_">rollback</span><span class="hljs-params">(<span class="hljs-type">boolean</span> required)</span>;
Transaction <span class="hljs-title function_">getTransaction</span><span class="hljs-params">()</span>;
</code></pre>
<ol start="4">
<li>å»¶è¿ŸåŠ è½½</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">deferLoad</span><span class="hljs-params">(MappedStatement ms, MetaObject resultObject, String property, CacheKey key, Class&lt;?&gt; targetType)</span>;
</code></pre>
<h3 data-id="heading-2">1.2 æ¥å£ä½“ç³»</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7c8cd68f25843149d18189d2ee1370b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767484485&amp;x-signature=qEpKeL%2FIBpUb1BIym4NO%2FEzN%2FPM%3D" alt="" loading="lazy"/></p>
<p>BaseExecutoræ˜¯é¡¶çº§çˆ¶æŠ½è±¡ç±»ï¼Œç”¨æ¨¡ç‰ˆæ–¹æ³•å®ç°å…¬å…±é€»è¾‘ï¼Œå¦‚ç»´æŠ¤ä¸€çº§ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseExecutor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Executor</span> {
    <span class="hljs-comment">// æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰æ‰§è¡Œæµç¨‹</span>
    <span class="hljs-keyword">public</span> &lt;E&gt; List&lt;E&gt; <span class="hljs-title function_">query</span><span class="hljs-params">(...)</span> {
        <span class="hljs-comment">// 1. æ£€æŸ¥ä¸€çº§ç¼“å­˜</span>
        list = localCache.getObject(key);
        <span class="hljs-keyword">if</span> (list != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> list;
        }
        <span class="hljs-comment">// 2. ä»æ•°æ®åº“æŸ¥è¯¢</span>
        <span class="hljs-keyword">return</span> queryFromDatabase(...);
    }
    
    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼šå­ç±»å®ç°å…·ä½“ç­–ç•¥</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> &lt;E&gt; List&lt;E&gt; <span class="hljs-title function_">doQuery</span><span class="hljs-params">(...)</span>;
}
</code></pre>
<p>ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼ŒBaseExecutoræœ‰ä»¥ä¸‹å®ç°ç±»</p>
<ul>
<li>SimpleExecutorï¼Œæ¯æ¬¡æ‰§è¡Œå®Œéƒ½å…³é—­Statement</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">doUpdate</span><span class="hljs-params">(MappedStatement ms, Object parameter)</span> {
    <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">StatementHandler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> configuration.newStatementHandler(...);
        stmt = prepareStatement(handler, ms.getStatementLog());
        <span class="hljs-keyword">return</span> handler.update(stmt);
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// æ¯æ¬¡éƒ½å…³é—­Statement</span>
        closeStatement(stmt);
    }
}
</code></pre>
<ul>
<li>ReuseExecutor ï¼Œç¼“å­˜Statementå¯¹è±¡ï¼Œå®ç°é‡ç”¨</li>
<li>BatchExecutorï¼Œæ‰¹é‡æ‰§è¡Œï¼Œæå‡æ€§èƒ½</li>
</ul>
<p>CachingExecutoré‡‡ç”¨äº†è£…é¥°å™¨æ¨¡å¼ï¼Œåœ¨BaseExecutoråŸºç¡€ä¸Šï¼Œæä¾›äº†äºŒçº§ç¼“å­˜èƒ½åŠ›ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CachingExecutor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Executor</span> {
    <span class="hljs-comment">// è¢«è£…é¥°çš„BaseExecutorå­ç±»å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Executor delegate; 
    
    <span class="hljs-keyword">public</span> &lt;E&gt; List&lt;E&gt; <span class="hljs-title function_">query</span><span class="hljs-params">(...)</span> {
        <span class="hljs-type">Cache</span> <span class="hljs-variable">cache</span> <span class="hljs-operator">=</span> ms.getCache();
        <span class="hljs-keyword">if</span> (cache != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// äºŒçº§ç¼“å­˜é€»è¾‘</span>
            List&lt;E&gt; list = tcm.getObject(cache, key);
            <span class="hljs-comment">// æœªå‘½ä¸­ç¼“å­˜ï¼ŒæŸ¥è¯¢æ•°æ®åº“å¹¶æ”¾å…¥ç¼“å­˜æ± </span>
            <span class="hljs-keyword">if</span> (list == <span class="hljs-literal">null</span>) {
                list = delegate.query(...); <span class="hljs-comment">// å§”æ‰˜ç»™åŸæ‰§è¡Œå™¨</span>
                tcm.putObject(cache, key, list);
            }
            <span class="hljs-keyword">return</span> list;
        }
        <span class="hljs-comment">//æœªå¯ç”¨äºŒçº§ç¼“å­˜ï¼Œç›´æ¥æŸ¥è¯¢æ•°æ®åº“ </span>
        <span class="hljs-keyword">return</span> delegate.query(...);
    }
}
</code></pre>
<h3 data-id="heading-3">1.3 åˆ›å»ºExecutor</h3>
<p>Configuration#newExecutoræ–¹æ³•ä¼šæ ¹æ®executorTypeæ¥åˆ›å»ºç›¸åº”çš„å®ç°ç±»å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨æ’ä»¶å¢å¼ºã€‚</p>
<p>é»˜è®¤å¾—executorType = ExecutorType.SIMPLEï¼Œå³ä½¿ç”¨SimpleExecutorã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">newExecutor</span><span class="hljs-params">(Transaction transaction, ExecutorType executorType)</span> {
    executorType = executorType == <span class="hljs-literal">null</span> ? defaultExecutorType : executorType;
    executorType = executorType == <span class="hljs-literal">null</span> ? ExecutorType.SIMPLE : executorType;
    Executor executor;
    <span class="hljs-keyword">if</span> (ExecutorType.BATCH == executorType) {
        executor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BatchExecutor</span>(<span class="hljs-built_in">this</span>, transaction);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ExecutorType.REUSE == executorType) {
        executor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReuseExecutor</span>(<span class="hljs-built_in">this</span>, transaction);
    } <span class="hljs-keyword">else</span> {
        executor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleExecutor</span>(<span class="hljs-built_in">this</span>, transaction);
    }
    <span class="hljs-comment">// äºŒçº§ç¼“å­˜è£…é¥°</span>
    <span class="hljs-keyword">if</span> (cacheEnabled) {
        executor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CachingExecutor</span>(executor);
    }
    <span class="hljs-comment">// ä»£ç†å¢å¼º</span>
    executor = (Executor) interceptorChain.pluginAll(executor);
    <span class="hljs-keyword">return</span> executor;
}
</code></pre>
<h2 data-id="heading-4">äºŒ ç¼“å­˜ä½“ç³»</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a112f03986a41ed858ae259c4f7762b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767484485&amp;x-signature=K%2FXRIhY6CGMlDhgyY7PIf%2FrGM9M%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d059800ba2a64aa29c132e3bf6ca705e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767484485&amp;x-signature=ybspKlGagetMilNDCR9D6Ug4Cdc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">2.1 ä¸€çº§ç¼“å­˜</h3>
<h4 data-id="heading-6">2.1.1 ç‰¹ç‚¹å’Œå¯ç”¨</h4>
<p>ä¸€çº§ç¼“å­˜æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä½œç”¨åŸŸï¼šSqlSessionçº§åˆ«ï¼Œä¸åŒSessionä¸å…±äº«</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼šSqlSessionåˆ›å»ºåˆ°å…³é—­</li>
<li>å­˜å‚¨ç»“æ„ï¼šHashMapï¼ˆPerpetualCacheï¼‰</li>
<li>é»˜è®¤çŠ¶æ€ï¼šå§‹ç»ˆå¼€å¯ï¼Œæ— æ³•å…³é—­</li>
<li>æ¸…ç†æ—¶æœºï¼šcommitã€rollbackã€updateæ“ä½œ</li>
</ul>
<p><strong>ä¸€çº§ç¼“å­˜é»˜è®¤å¼€å¯ï¼Œé»˜è®¤ä½œç”¨åŸŸæ˜¯SESSIONã€‚</strong> å¯ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- mybatis-config.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- SESSION: ä¼šè¯çº§åˆ«ï¼ˆé»˜è®¤ï¼‰ --&gt;</span>
    <span class="hljs-comment">&lt;!-- STATEMENT: è¯­å¥çº§åˆ«ï¼ˆæ‰§è¡Œå®Œç«‹å³æ¸…ç©ºï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"localCacheScope"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"SESSION"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<p>æ¥çœ‹ä¸€ä¸ªå‘½ä¸­ä¸€çº§ç¼“å­˜çš„ç¤ºä¾‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);
    
    <span class="hljs-comment">// ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œèµ°æ•°æ®åº“</span>
    <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> mapper.selectById(<span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼Œå‘½ä¸­ä¸€çº§ç¼“å­˜ï¼Œä¸èµ°æ•°æ®åº“</span>
    <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> mapper.selectById(<span class="hljs-number">1</span>);
    
    System.out.println(user1 == user2); <span class="hljs-comment">// trueï¼ŒåŒä¸€å¯¹è±¡</span>
} <span class="hljs-keyword">finally</span> {
    session.close();
}
</code></pre>
<h4 data-id="heading-7">2.1.2 ä½œç”¨åŸŸ</h4>
<p>localCacheScopeå†³å®šäº†ä¸€çº§ç¼“å­˜çš„æœ‰æ•ˆèŒƒå›´ã€‚å–å€¼<code>SESSION</code>å’Œ<code>STATEMENT</code>æœ‰å¦‚ä¸‹åŒºåˆ«ï¼š</p>
<p><code>SESSION</code>ï¼š</p>
<ol>
<li>ä¸€çº§ç¼“å­˜åœ¨<strong>æ•´ä¸ª SqlSession ä¼šè¯æœŸé—´éƒ½æœ‰æ•ˆ</strong>ã€‚</li>
<li>åªæœ‰å½“<code>SqlSession</code>æ‰§è¡Œ<code>insert</code>/<code>update</code>/<code>delete</code>æ“ä½œï¼ˆä¼šè‡ªåŠ¨æ¸…ç©ºå½“å‰ SqlSession çš„ä¸€çº§ç¼“å­˜ï¼‰ã€è°ƒç”¨<code>sqlSession.clearCache()</code>æ‰‹åŠ¨æ¸…ç©ºç¼“å­˜ï¼Œæˆ–<code>SqlSession</code>å…³é—­ï¼ˆ<code>sqlSession.close()</code>ï¼‰æ—¶ï¼Œè¯¥ä¼šè¯çš„ä¸€çº§ç¼“å­˜æ‰ä¼šå¤±æ•ˆæˆ–è¢«é”€æ¯ã€‚</li>
</ol>
<p><code>STATEMENT</code>ï¼š</p>
<ol>
<li><strong>ä¸€çº§ç¼“å­˜ä»…å¯¹å½“å‰æŸ¥è¯¢è¯­å¥æœ‰æ•ˆï¼ŒæŸ¥è¯¢ç»“æŸåç¼“å­˜ç«‹å³å¤±æ•ˆ</strong> <strong>ï¼Œç›¸å½“äº â€œç¦ç”¨äº†ä¸€çº§ç¼“å­˜â€ï¼›</strong></li>
<li>æŸ¥è¯¢æ‰§è¡Œå®Œæˆåï¼Œç¼“å­˜ä¼šè¢«ç«‹å³æ¸…ç©º / å¤±æ•ˆï¼Œç¬¬äºŒæ¬¡æŸ¥è¯¢ä¸ä¼šå¤ç”¨ç¬¬ä¸€æ¬¡çš„ç¼“å­˜ç»“æœï¼Œä»ç„¶ä¼šå»æ•°æ®åº“é‡æ–°æŸ¥è¯¢ï¼›</li>
<li>ç”¨äºè§£å†³åµŒå¥—æŸ¥è¯¢çš„é‡å¤æ•°æ®åŠ è½½é—®é¢˜ï¼Œå¦‚å…³è”æŸ¥è¯¢ä¸­çš„ç›¸åŒæ•°æ®é¿å…é‡å¤æŸ¥è¯¢ã€‚</li>
</ol>
<h4 data-id="heading-8">2.1.3 éçº¿ç¨‹å®‰å…¨</h4>
<p>ä¸€çº§ç¼“å­˜å®ç°æ˜¯PerpetualCacheï¼Œä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºåº•å±‚ä½¿ç”¨äº†HashMapï¼Œè€Œä¸”putObjectæ–¹æ³•ä¹Ÿä¸åŠ é”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b6cc278a0ac480e87617f44f297a6d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767484485&amp;x-signature=8Zqu9TCHmWr2Xkt89E%2FCZBOgllY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bafe22add6a64a83ab7682bbf700b12b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767484485&amp;x-signature=kf%2B3YNSxdP27Ah1qvjkkpa6%2Fcio%3D" alt="" loading="lazy"/></p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¸ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„Mapå‘¢ï¼ŸåŸºäºä»¥ä¸‹å‡ ç‚¹åŸå› ï¼š</p>
<ol>
<li>MyBatisçš„è®¾è®¡åŸåˆ™ï¼šSqlSessionä¸åº”è¯¥è¢«å¤šçº¿ç¨‹å…±äº«</li>
<li>ä½¿ç”¨ConcurrentHashMapä¼šå¸¦æ¥æ€§èƒ½å¼€é”€</li>
</ol>
<p><strong>å› æ­¤ï¼Œæ¯ä¸ªçº¿ç¨‹åº”å½“ä½¿ç”¨ç‹¬ç«‹çš„SqlSessionï¼ˆå¦‚ä½¿ç”¨SqlSessionManager ï¼‰ï¼Œæˆ–ä½¿ç”¨Springç­‰æ¡†æ¶æä¾›çš„çº¿ç¨‹å®‰å…¨å°è£…ï¼ˆå¦‚SqlSessionTemplate ï¼‰ã€‚</strong></p>
<h3 data-id="heading-9">2.2 äºŒçº§ç¼“å­˜</h3>
<h4 data-id="heading-10">2.2.1 ç‰¹ç‚¹å’Œå¯ç”¨</h4>
<p>äºŒçº§ç¼“å­˜æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä½œç”¨åŸŸï¼šMapperï¼ˆNamespaceï¼‰çº§åˆ«ï¼Œè·¨Sessionå…±äº«</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼šåº”ç”¨å¯åŠ¨åˆ°å…³é—­</li>
<li>å­˜å‚¨ç»“æ„ï¼šå¯é…ç½®ï¼ˆLRUã€FIFOç­‰ï¼‰</li>
<li>é»˜è®¤çŠ¶æ€ï¼šå…³é—­ï¼Œéœ€æ‰‹åŠ¨å¼€å¯</li>
<li>äº‹åŠ¡æ€§ï¼šcommitåæ‰ç”Ÿæ•ˆï¼Œrollbackä¼šæ¸…ç©º</li>
</ul>
<p>å¯ç”¨äºŒçº§ç¼“å­˜ï¼Œéœ€è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ul>
<li>å…¨å±€å¼€å¯ï¼ˆ<strong>é»˜è®¤å¯ç”¨</strong>ï¼‰</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- mybatis-config.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cacheEnabled"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<p>åªæœ‰å½“Configurationä¸­cacheEnabled=trueæ—¶ï¼Œæ‰ä¼šåˆ›å»ºCachingExecutorã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca009c4f0fb6466d9d1dd5f315d411bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767484485&amp;x-signature=sT7vSCqqku%2FTE6bfiA2%2FAGD6K2Y%3D" alt="" loading="lazy"/></p>
<ul>
<li>Mapperå±€éƒ¨é…ç½®ï¼ˆ<strong>å¿…é¡»æ‰‹åŠ¨é…ç½®</strong>ï¼‰</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.mapper.UserMapper"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åŸºæœ¬é…ç½®ï¼Œæ¿€æ´»äºŒçº§ç¼“å­˜ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">cache</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å®Œæ•´é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">cache</span>
        <span class="hljs-attr">eviction</span>=<span class="hljs-string">"LRU"</span>           &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">æ·˜æ±°ç­–ç•¥</span>ï¼š<span class="hljs-attr">LRU</span>/<span class="hljs-attr">FIFO</span>/<span class="hljs-attr">SOFT</span>/<span class="hljs-attr">WEAK</span> <span class="hljs-attr">--</span>&gt;</span>
        flushInterval="60000"    <span class="hljs-comment">&lt;!-- åˆ·æ–°é—´éš”ï¼š60ç§’ --&gt;</span>
        size="512"               <span class="hljs-comment">&lt;!-- ç¼“å­˜å¯¹è±¡æ•°é‡ --&gt;</span>
        readOnly="false"/&gt;       <span class="hljs-comment">&lt;!-- æ˜¯å¦åªè¯» --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code></pre>
<ul>
<li>æä¾›å®ä½“ç±»åºåˆ—åŒ–ï¼ˆæ¨èï¼‰</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>Mapper ä¸­çš„</strong><code>select</code><strong>æŸ¥è¯¢è¯­å¥useCacheé»˜è®¤ä¸ºtrueã€‚</strong></p>
<p><strong>å½“æ‰§è¡Œ</strong><code>insert</code> <strong>ã€</strong> <code>update</code> <strong>ã€</strong> <code>delete</code><strong>æ“ä½œæ—¶ï¼ˆ</strong> <code>flushCache</code><strong>é»˜è®¤ä¸ºtrueï¼‰ï¼ŒMyBatis ä¼šè‡ªåŠ¨æ¸…ç©ºå½“å‰ Mapper å‘½åç©ºé—´ä¸‹çš„äºŒçº§ç¼“å­˜ï¼Œç¡®ä¿ç¼“å­˜æ•°æ®ä¸æ•°æ®åº“æ•°æ®ä¸€è‡´æ€§ã€‚</strong></p>
<p>æ¥çœ‹è·¨Sessionå…±äº«äºŒçº§ç¼“å­˜çš„ç¤ºä¾‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Session A</span>
<span class="hljs-type">SqlSession</span> <span class="hljs-variable">session1</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper1</span> <span class="hljs-operator">=</span> session1.getMapper(UserMapper.class);
    <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> mapper1.selectById(<span class="hljs-number">1</span>);  <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®åº“</span>
    session1.commit();  <span class="hljs-comment">// æäº¤åæ‰æ”¾å…¥äºŒçº§ç¼“å­˜</span>
} <span class="hljs-keyword">finally</span> {
    session1.close();
}

<span class="hljs-comment">// Session B</span>
<span class="hljs-type">SqlSession</span> <span class="hljs-variable">session2</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper2</span> <span class="hljs-operator">=</span> session2.getMapper(UserMapper.class);
    <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> mapper2.selectById(<span class="hljs-number">1</span>);  <span class="hljs-comment">// å‘½ä¸­äºŒçº§ç¼“å­˜</span>
} <span class="hljs-keyword">finally</span> {
    session2.close();
}
</code></pre>
<h4 data-id="heading-11">2.2.2 å…¶ä»–ç‰¹æ€§</h4>
<p>æ­¤å¤–ï¼ŒäºŒçº§ç¼“å­˜æ”¯æŒè¯­å¥çº§æ§åˆ¶ã€è‡ªå®šä¹‰ç¼“å­˜å®ç°ã€å¯ç”¨ç¼“å­˜æ—¥å¿—</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.mapper.UserMapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">cache</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- selecté»˜è®¤ä½¿ç”¨ç¼“å­˜ï¼Œå¯ä¸é…ç½®useCache --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectById"</span> <span class="hljs-attr">useCache</span>=<span class="hljs-string">"true"</span>&gt;</span>
        SELECT * FROM user WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¸ä½¿ç”¨ç¼“å­˜ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectRealtime"</span> <span class="hljs-attr">useCache</span>=<span class="hljs-string">"false"</span>&gt;</span>
        SELECT * FROM user WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ›´æ–°æ“ä½œæ¸…ç©ºç¼“å­˜ï¼ˆé»˜è®¤ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateUser"</span> <span class="hljs-attr">flushCache</span>=<span class="hljs-string">"true"</span>&gt;</span>
        UPDATE user SET name = #{name} WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨Redisä½œä¸ºäºŒçº§ç¼“å­˜ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"org.mybatis.caches.redis.RedisCache"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"host"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"localhost"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"port"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"6379"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">cache</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å¼€å¯ç¼“å­˜æ—¥å¿— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"org.apache.ibatis.cache.decorators.LoggingCache"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"logImpl"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"STDOUT_LOGGING"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">cache</span>&gt;</span>
</code></pre>
<h3 data-id="heading-12">2.3 æ€»ç»“</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>ä¸€çº§ç¼“å­˜</th><th>äºŒçº§ç¼“å­˜</th></tr></thead><tbody><tr><td>ä½œç”¨åŸŸ</td><td>SqlSession</td><td>Mapperï¼ˆå³Namespace<a href="https://link.juejin.cn?target=%255Burl%255D(%255Burl%255D(%255Burl%255D(url)))" target="_blank" title="%5Burl%5D(%5Burl%5D(%5Burl%5D(url)))" ref="nofollow noopener noreferrer">ï¼‰</a></td></tr><tr><td>é»˜è®¤çŠ¶æ€</td><td>å¼€å¯</td><td>å…³é—­</td></tr><tr><td>çº¿ç¨‹å®‰å…¨</td><td>å¦</td><td>æ˜¯</td></tr><tr><td>åºåˆ—åŒ–</td><td>ä¸éœ€è¦</td><td>éœ€è¦</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å•æ¬¡ä¼šè¯ä¼˜åŒ–</td><td>è·¨ä¼šè¯å…±äº«</td></tr></tbody></table>
<ul>
<li>ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«ï¼Œæ— æ³•å…³é—­ã€‚<strong>ä½†æ˜¯å½“è®¾ç½®LocalCacheScopeä¸ºSTATEMENTæ—¶ï¼ŒæŸ¥è¯¢è¯­å¥æ‰§è¡Œç»“æŸæ—¶éƒ½ä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ï¼Œç›¸å½“äº â€œç¦ç”¨äº†ä¸€çº§ç¼“å­˜çš„è·¨æŸ¥è¯¢å¤ç”¨èƒ½åŠ›â€ï¼›</strong></li>
<li><strong>äºŒçº§ç¼“å­˜ï¼Œé€‚åˆè¯»å¤šå†™å°‘åœºæ™¯ï¼Œéœ€è°¨æ…ä½¿ç”¨ï¼›</strong></li>
<li><strong>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸‹ï¼Œéœ€è¦ç¦ç”¨Mybatisçš„ä¸€äºŒçº§ç¼“å­˜ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯æœ¬åœ°ç¼“å­˜</strong>ï¼Œä¼šå¼•èµ·æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚åº”å½“ä½¿ç”¨Redisç­‰åˆ†å¸ƒå¼ç¼“å­˜ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è°ˆdjangoçš„è®¾è®¡æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7588093282530607156</link>    <guid>https://juejin.cn/post/7588093282530607156</guid>    <pubDate>2025-12-27T17:06:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282530607156" data-draft-id="7588095884070158336" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…è°ˆdjangoçš„è®¾è®¡æ¨¡å¼"/> <meta itemprop="keywords" content="Django"/> <meta itemprop="datePublished" content="2025-12-27T17:06:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…è°ˆdjangoçš„è®¾è®¡æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T17:06:24.000Z" title="Sat Dec 27 2025 17:06:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Django ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºâ€œWeb å¼€å‘ä¸­çš„æ•™ç§‘ä¹¦â€ï¼Œå¾ˆå¤§åŸå› åœ¨äºå®ƒæŠŠç»å…¸çš„è®¾è®¡æ¨¡å¼ç”¨å¾—æ—¢å‡†åˆæ·±ã€‚ä¸‹é¢æŒ‰â€œæ¨¡å¼ â†’ Django ä¸­å¯¹åº”ç»„ä»¶ â†’ æºç çº§ä¾‹å­ â†’ ä¸€å¥è¯æ€»ç»“â€å››ä¸ªç»´åº¦ï¼ŒæŠŠæœ€å¸¸ç”¨çš„ 10 ä¸ªè®¾è®¡æ¨¡å¼ä¸€æ¬¡æ¢³ç†å®Œã€‚çœ‹å®Œä½ èƒ½åœ¨ä»£ç é‡Œç›´æ¥æŒ‡å‡ºâ€œè¿™æ®µå°±æ˜¯ xxx æ¨¡å¼â€ã€‚</p>
<hr/>
<ol>
<li>MTVï¼ˆModelâ€“Templateâ€“Viewï¼‰â€”â€”Django çš„â€œMVCâ€
æ¨¡å¼è§’è‰²<br/>
Model â†” æ•°æ®è®¿é—®<br/>
Template â†” è¡¨ç°å±‚<br/>
View â†” ä¸šåŠ¡é€»è¾‘/è·¯ç”±åˆ†å‘</li>
</ol>
<p>æºç å®šä½<br/>
django/db/models/base.pyï¼ˆModelï¼‰<br/>
django/template/response.pyï¼ˆTemplateResponseï¼‰<br/>
django/views/generic/base.pyï¼ˆViewï¼‰</p>
<p>æœ€å°ä¾‹å­</p>
<h2 data-id="heading-0">urls.py</h2>
<p>path('book/<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">int:pk</a>/', views.BookDetailView.as_view(), name='book_detail')</p>
<h2 data-id="heading-1">views.py</h2>
<p>class BookDetailView(DetailView):
model = Book          # â†’ Model
template_name = 'book/detail.html'  # â†’ Template
# è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘
def get_context_data(self, **kwargs):
ctx = super().get_context_data(**kwargs)
ctx['reviews'] = self.object.reviews.select_related('user')
return ctx
ä¸€å¥è¯ï¼šMVC çš„ Django æ–¹è¨€ï¼ŒæŠŠâ€œæ§åˆ¶å™¨â€æ‹†è§£æˆ URLConf + Viewã€‚</p>
<hr/>
<ol start="2">
<li>Front Controllerï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰â€”â€”WSGI å…¥å£ + URLConf
æ•´ä¸ªè¯·æ±‚å…ˆè¢« django/core/handlers/wsgi.py:WSGIHandler æˆªè·ï¼Œå†äº¤ç»™ ROOT_URLCONF å»äºŒæ¬¡åˆ†å‘ï¼Œå…¸å‹ Front Controllerã€‚</li>
</ol>
<p>æºç ç‰‡æ®µ<br/>
class WSGIHandler(base.BaseHandler):
def <strong>call</strong>(self, environ, start_response):
request = self.request_class(environ)
response = self.get_response(request)   # â†’ è¿›å…¥ URL è§£æ
...
ä¸€å¥è¯ï¼šå•ç‚¹å…¥å£ï¼Œé›†ä¸­è·¯ç”±ã€‚</p>
<hr/>
<ol start="3">
<li>Modelâ€“Viewâ€“ViewModelï¼ˆMVVMï¼‰â€”â€”Django Forms
Mode lï¼ˆæ•°æ®åº“å­—æ®µï¼‰ä¸ Viewï¼ˆHTML è¡¨å•ï¼‰å½¢æ€ä¸åŒï¼ŒForms å±‚å……å½“ ViewModelï¼Œè´Ÿè´£æ•°æ®æ ¡éªŒ/è½¬æ¢ã€‚</li>
</ol>
<p>ä¾‹å­<br/>
class RegisterForm(forms.Form):
username = forms.CharField(max_length=150, regex=r'^[\w.@+-]+$')
password = forms.CharField(widget=forms.PasswordInput)
# ä¸¤æ¬¡å¯†ç ä¸€è‡´æ€§é€»è¾‘
def clean_password2(self):
...
ä¸€å¥è¯ï¼šForms = æœåŠ¡ç«¯ ViewModelï¼ŒæŠŠâ€œæ•°æ®åº“è¡¨ç¤ºâ€ä¸â€œé¡µé¢è¡¨ç¤ºâ€è§£è€¦ã€‚</p>
<hr/>
<ol start="4">
<li>Active Recordâ€”â€”Model å³è¡¨ï¼Œå¯¹è±¡å³è¡Œ
æ¯ä¸ªæ¨¡å‹ç±»ç›´æ¥æ˜ å°„ä¸€å¼ è¡¨ï¼Œå®ä¾‹å³ä¸€è¡Œï¼Œå°è£… CRUDã€‚</li>
</ol>
<p>æºç <br/>
django/db/models/base.py:Model.save/delete</p>
<p>ä¾‹å­<br/>
book = Book(title='Clean Code', price=58)
book.save()          # INSERT
book.price = 48
book.save(update_fields=['price'])  # UPDATE
ä¸€å¥è¯ï¼šå¯¹è±¡è‡ªå¸¦æ•°æ®åº“è¡Œä¸ºï¼Œæ•°æ®+æ“ä½œäºŒåˆä¸€ã€‚</p>
<hr/>
<ol start="5">
<li>Manager / QuerySetâ€”â€”Factory + Strategy
objects = Manager å®ä¾‹ï¼Œè¿”å› QuerySetï¼›QuerySet å»¶è¿Ÿæ‰§è¡Œï¼Œå†…éƒ¨ç”¨ç­–ç•¥æ¨¡å¼æ‹¼è£… SQLã€‚</li>
</ol>
<p>æºç <br/>
django/db/models/query.py:QuerySet<br/>
django/db/models/manager.py:Manager</p>
<p>ä¾‹å­<br/>
qs = Book.objects.filter(price__lte=50).select_related('publisher')
qs = qs.exclude(stock=0)          # é“¾å¼ç­–ç•¥
sql = qs.query.<strong>str</strong>()          # åªçœ‹ SQLï¼Œä¸æŸ¥åº“
ä¸€å¥è¯ï¼šManager æ˜¯å·¥å‚ï¼ŒQuerySet æ˜¯ç­–ç•¥é“¾ã€‚</p>
<hr/>
<ol start="6">
<li>Middlewareâ€”â€”èŒè´£é“¾ï¼ˆChain of Responsibilityï¼‰
è¯·æ±‚/å“åº”å¯¹è±¡åœ¨åˆ°è¾¾è§†å›¾å‰è¦ç»è¿‡ä¸€ä¸²ä¸­é—´ä»¶ï¼Œæ¯ä¸ªä¸­é—´ä»¶å¯çŸ­è·¯æˆ–è¿½åŠ åŠŸèƒ½ã€‚</li>
</ol>
<p>æºç <br/>
django/utils/deprecation.py:MiddlewareMixin<br/>
settings.MIDDLEWARE = [
'django.middleware.security.SecurityMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
...
]</p>
<p>è‡ªå®šä¹‰ä¾‹å­<br/>
class SimpleCorsMiddleware:
def <strong>init</strong>(self, get_response):
self.get_response = get_response
def <strong>call</strong>(self, request):
response = self.get_response(request)
response['Access-Control-Allow-Origin'] = '*'
return response
ä¸€å¥è¯ï¼šé“¾è¡¨å¼å¤„ç†ï¼Œå¯æ’æ‹”ã€‚</p>
<hr/>
<ol start="7">
<li>Signalsâ€”â€”è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰
æ¨¡å‹ä¿å­˜ã€ç”¨æˆ·ç™»å½•ç­‰äº‹ä»¶å‘å‡ºâ€œä¿¡å·â€ï¼Œå¤šä¸ªæ¥æ”¶è€…è§£è€¦å“åº”ã€‚</li>
</ol>
<p>æºç <br/>
django/dispatch/dispatcher.py:Signal</p>
<p>ä¾‹å­<br/>
from django.db.models.signals import post_save
from django.dispatch import receiver</p>
<p>@receiver(post_save, sender=User)
def create_user_profile(sender, instance, created, **kwargs):
if created:
Profile.objects.create(user=instance)
ä¸€å¥è¯ï¼šå‘å¸ƒ-è®¢é˜…ï¼Œé™ä½æ¨¡å—é—´è€¦åˆã€‚</p>
<hr/>
<ol start="8">
<li>Template Methodâ€”â€”é€šç”¨è§†å›¾éª¨æ¶
django/views/generic/base.py:View.dispatch å®šä¹‰æ‰§è¡Œéª¨æ¶ï¼ˆget/post åˆ†æ”¯ï¼‰ï¼Œå­ç±»åªè¦†å†™â€œå˜ä½“â€æ–¹æ³•ã€‚</li>
</ol>
<p>ä¾‹å­<br/>
class BookCreateView(CreateView):
model = Book
fields = '<strong>all</strong>'
success_url = reverse_lazy('book_list')
# åªè¦†å†™â€œæ¨¡æ¿æ–¹æ³•â€å…è®¸çš„å°é’©å­
def form_valid(self, form):
form.instance.created_by = self.request.user
return super().form_valid(form)
ä¸€å¥è¯ï¼šçˆ¶ç±»æ­æ¡†æ¶ï¼Œå­ç±»å¡«ç»†èŠ‚ã€‚</p>
<hr/>
<ol start="9">
<li>Decoratorâ€”â€”å‡½æ•°è§†å›¾å¢å¼º
django/contrib/auth/decorators.py:login_required<br/>
django/views/decorators/cache.py:cache_page</li>
</ol>
<p>ä¾‹å­<br/>
@login_required
@cache_page(60 * 15)
def dashboard(request):
...
ä¸€å¥è¯ï¼šä¸åŠ¨åŸå‡½æ•°ï¼ŒåŠ¨æ€å åŠ åŠŸèƒ½ã€‚</p>
<hr/>
<ol start="10">
<li>Dependency Injectionâ€”â€”è®¾ç½®å°±æ˜¯â€œå®¹å™¨â€
Django ä¸é ç¡¬ç¼–ç ç±»ï¼Œè€Œæ˜¯æŠŠä¾èµ–æ”¾è¿› settingsï¼š</li>
</ol>
<ul>
<li>æ•°æ®åº“åç«¯ â†’ DATABASES['default']['ENGINE']</li>
<li>è®¤è¯åç«¯ â†’ AUTHENTICATION_BACKENDS</li>
<li>ç¼“å­˜ â†’ CACHES</li>
</ul>
<p>è¿è¡Œæ—¶ç”¨ django/conf/<strong>init</strong>.py:LazySettings åŠ¨æ€å¯¼å…¥ï¼Œç¬¦åˆ DI æ€æƒ³ã€‚</p>
<p>ä¸€å¥è¯ï¼šé…ç½®å³æ³¨å…¥ï¼Œæ›¿æ¢å®ç°æ— éœ€æ”¹ä¸šåŠ¡ä»£ç ã€‚</p>
<hr/>
<p>é€ŸæŸ¥è¡¨ï¼ˆæ”¶è—çº§ï¼‰</p>
<p>MTV / MVC        â†’ ç›®å½•ç»“æ„ä¸€çœ¼çœ‹æ‡‚<br/>
Front Controller â†’ WSGIHandler + urls.py<br/>
MVVM             â†’ Forms/Serializers<br/>
Active Record    â†’ Model.save()<br/>
Factory          â†’ Manager<br/>
Strategy         â†’ QuerySet é“¾å¼è¿‡æ»¤<br/>
Chain            â†’ Middleware<br/>
Observer         â†’ Signals<br/>
Template Method  â†’ generic.View<br/>
Decorator        â†’ @login_required<br/>
DI               â†’ settings.py</p>
<p>æ‰“å¼€ä»»æ„ Django é¡¹ç›®ï¼Œä½ éƒ½èƒ½æŠŠä¸Šè¡¨å¯¹ç…§åˆ°å…·ä½“æ–‡ä»¶ï¼›é¢è¯•æ—¶æŠŠâ€œæ¨¡å¼ + æºç ä½ç½®â€è„±å£è€Œå‡ºï¼Œå°±æ˜¯åŠ åˆ†é¡¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ghostty vs Kittyï¼šä¸ºäº†è·‘ Claude Codeï¼Œæˆ‘åšäº†è¿™ä¸ªå†³å®š]]></title>    <link>https://juejin.cn/post/7588098335790579712</link>    <guid>https://juejin.cn/post/7588098335790579712</guid>    <pubDate>2025-12-27T16:09:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335790579712" data-draft-id="7588092534162112512" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ghostty vs Kittyï¼šä¸ºäº†è·‘ Claude Codeï¼Œæˆ‘åšäº†è¿™ä¸ªå†³å®š"/> <meta itemprop="keywords" content="å‘½ä»¤è¡Œ"/> <meta itemprop="datePublished" content="2025-12-27T16:09:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ghostty vs Kittyï¼šä¸ºäº†è·‘ Claude Codeï¼Œæˆ‘åšäº†è¿™ä¸ªå†³å®š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:09:39.000Z" title="Sat Dec 27 2025 16:09:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç”¨ Ghostty è·‘ Claude Codeï¼ˆccï¼‰çš„æ—¶å€™ï¼Œé‡åˆ°ä¸ªå¤´ç–¼çš„é—®é¢˜ï¼šå†…å­˜çˆ†äº†ã€‚</p>
<p>æˆ‘çš„ä½¿ç”¨ä¹ æƒ¯æ˜¯å¼€å¤šä¸ª Ghostty çª—å£è·‘ ccï¼ŒåŒæ—¶å¤„ç†ä¸åŒçš„ä»»åŠ¡ã€‚å¤§æ¦‚æ¯éš” 2 å¤©ï¼ŒMac å°±ä¼šå¼¹å‡º"å†…å­˜ä¸è¶³"çš„æç¤ºï¼Œç„¶åç³»ç»Ÿå¼€å§‹ä¸€ä¸ªä¸€ä¸ªåœæ­¢æ­£åœ¨è¿è¡Œçš„åº”ç”¨â€”â€”å…ˆæ˜¯æµè§ˆå™¨çš„æ ‡ç­¾é¡µï¼Œç„¶åæ˜¯ VS Codeï¼Œæœ€åè¿ Finder éƒ½å¡æ­»ã€‚æ¯æ¬¡éƒ½å¾—å¼ºåˆ¶é‡å¯ï¼Œæ‰‹å¤´çš„å·¥ä½œå…¨æ–­äº†ã€‚</p>
<p>æœäº†ä¸€åœˆï¼Œå‘ç°ä¸å°‘äººæœ‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fghostty-org%2Fghostty%2Fdiscussions%2F9219" target="_blank" title="https://github.com/ghostty-org/ghostty/discussions/9219" ref="nofollow noopener noreferrer">ç±»ä¼¼çš„é—®é¢˜</a>ï¼ŒGhostty 1.2.1 ç‰ˆæœ¬ç¡®å®å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œå®˜æ–¹åœ¨ 1.2.2 ä¿®å¤äº†ä¸€éƒ¨åˆ†ï¼Œä½† TUI åº”ç”¨ï¼ˆæ¯”å¦‚ Claude Code è¿™ç§ï¼‰è·‘ä¹…äº†è¿˜æ˜¯å®¹æ˜“å‡ºé—®é¢˜ã€‚</p>
<p>Ghostty æœ¬èº«æ˜¯ä¸ªå¾ˆæ£’çš„ç»ˆç«¯â€”â€”GPU åŠ é€Ÿã€åŸç”Ÿ macOS ä½“éªŒã€å¼€ç®±å³ç”¨çš„é…è‰²éƒ½å¾ˆèˆ’æœã€‚Mitchell Hashimotoï¼ˆHashiCorp åˆ›å§‹äººï¼‰åšçš„ä¸œè¥¿ï¼Œå“è´¨ç¡®å®æ²¡è¯è¯´ã€‚ä½†å†…å­˜é—®é¢˜å®åœ¨å½±å“æ—¥å¸¸ä½¿ç”¨ï¼Œåªèƒ½æ¢ä¸ªç»ˆç«¯è¯•è¯•ã€‚</p>
<p>é€‰äº† Kittyã€‚åŒæ ·æ˜¯ GPU åŠ é€Ÿï¼Œæ€§èƒ½å£ç¢‘ä¸é”™ï¼Œè€Œä¸”é«˜åº¦å¯é…ç½®ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆæ˜¯ Kitty</h2>
<p>åœ¨é€‰æ‹©æ›¿ä»£æ–¹æ¡ˆçš„æ—¶å€™ï¼Œå¯¹æ¯”äº†å‡ ä¸ªä¸»æµçš„ GPU åŠ é€Ÿç»ˆç«¯ï¼š</p>





























<table><thead><tr><th>ç»ˆç«¯</th><th>GPU åŠ é€Ÿ</th><th>ç‰¹ç‚¹</th><th>é¡¾è™‘</th></tr></thead><tbody><tr><td>Alacritty</td><td>OpenGL</td><td>æç®€ï¼Œæ€§èƒ½é¡¶çº§</td><td>åŠŸèƒ½å¤ªå°‘ï¼Œæ²¡æœ‰ Tab/åˆ†å±</td></tr><tr><td>WezTerm</td><td>OpenGL</td><td>åŠŸèƒ½ä¸°å¯Œï¼ŒLua é…ç½®</td><td>é…ç½®å¤æ‚ï¼Œå¯åŠ¨ç•¥æ…¢</td></tr><tr><td>Kitty</td><td>OpenGL</td><td>åŠŸèƒ½/æ€§èƒ½å¹³è¡¡ï¼Œé…ç½®ç®€å•</td><td>-</td></tr></tbody></table>
<p>æœ€åé€‰ Kittyï¼Œä¸»è¦çœ‹ä¸­å‡ ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>æ€§èƒ½é è°±</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsw.kovidgoyal.net%2Fkitty%2Fperformance%2F" target="_blank" title="https://sw.kovidgoyal.net/kitty/performance/" ref="nofollow noopener noreferrer">å®˜æ–¹æ€§èƒ½æµ‹è¯•</a>æ˜¾ç¤ºï¼ŒKitty åœ¨ macOS ä¸Šçš„è¾“å…¥å»¶è¿Ÿå’Œ Terminal.app å¹¶åˆ—æœ€ä½ï¼Œååé‡æµ‹è¯•ä¹Ÿæ˜¯æœ€å¿«çš„ã€‚é€šè¿‡ GPU ç¼“å­˜å­—ç¬¦çš„ alpha mask å¹¶è¡Œæ¸²æŸ“ï¼ŒCPU å ç”¨ä½ã€‚</p>
</li>
<li>
<p><strong>åŠŸèƒ½å¤Ÿç”¨</strong>ï¼šTabã€åˆ†å±ã€å›¾ç‰‡æ˜¾ç¤ºã€è¶…é“¾æ¥ç‚¹å‡»éƒ½æœ‰ï¼Œè¿˜æ”¯æŒè‡ªå·±çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fsw.kovidgoyal.net%2Fkitty%2Fgraphics-protocol%2F" target="_blank" title="https://sw.kovidgoyal.net/kitty/graphics-protocol/" ref="nofollow noopener noreferrer">å›¾å½¢åè®®</a>ã€‚</p>
</li>
<li>
<p><strong>é…ç½®ç®€å•</strong>ï¼šä¸€ä¸ª <code>kitty.conf</code> æ–‡ä»¶æå®šï¼Œä¸åƒ WezTerm éœ€è¦å†™ Luaã€‚</p>
</li>
<li>
<p><strong>ç¨³å®š</strong>ï¼šé¡¹ç›®æˆç†Ÿï¼Œç”¨çš„äººå¤šï¼Œè¸©å‘å°‘ã€‚</p>
</li>
</ol>
<h2 data-id="heading-1">è¿ç§»çš„ç—›ç‚¹</h2>
<p>æ¢è¿‡æ¥ä¹‹åå‘ç°ï¼ŒKitty çš„é»˜è®¤é…ç½®å’Œ Ghostty å·®åˆ«æŒºå¤§çš„ã€‚ç”¨æƒ¯äº† Ghostty çš„ä½“éªŒï¼Œåˆ‡åˆ° Kitty å„ç§ä¸é€‚åº”ã€‚</p>
<p>é€ä¸ªè§£å†³ï¼š</p>
<h3 data-id="heading-2">ç—›ç‚¹ 1ï¼šé¢œè‰²ä¸å¯¹ï¼ŒClaude Code è¾“å‡ºçœ‹ç€åˆ«æ‰­</h3>
<p>ç¬¬ä¸€ä¸ªå‘ç°çš„é—®é¢˜ï¼šClaude Code çš„è¾“å‡ºé¢œè‰²çœ‹èµ·æ¥ä¸å¤ªå¯¹ï¼Œæœ‰äº›æ–‡å­—é¢œè‰²å’Œ Ghostty é‡Œä¸ä¸€æ ·ã€‚</p>
<p>å¯¹æ¯”äº†ä¸€ä¸‹ï¼Œå‘ç°æ˜¯ ANSI é¢œè‰²é…ç½®ä¸åŒã€‚Ghostty ç”¨çš„æ˜¯è‡ªå·±çš„ StyleDark ä¸»é¢˜ï¼ŒKitty é»˜è®¤æ˜¯å¦ä¸€å¥—é…è‰²ã€‚</p>
<p>ç”¨ <code>ghostty +show-config --default</code> å¯ä»¥å¯¼å‡º Ghostty çš„é»˜è®¤é…ç½®ï¼ŒæŠŠé¢œè‰²å€¼æ¬è¿‡æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Ghostty é»˜è®¤ä¸»é¢˜è‰²</span>
background <span class="hljs-comment">#282c34</span>
foreground <span class="hljs-comment">#ffffff</span>

<span class="hljs-comment"># ANSI é¢œè‰² - å®Œå…¨åŒ¹é… Ghostty</span>
color0  <span class="hljs-comment">#1d1f21</span>
color1  <span class="hljs-comment">#cc6666</span>
color2  <span class="hljs-comment">#b5bd68</span>
color3  <span class="hljs-comment">#f0c674</span>
color4  <span class="hljs-comment">#81a2be</span>
color5  <span class="hljs-comment">#b294bb</span>
color6  <span class="hljs-comment">#8abeb7</span>
color7  <span class="hljs-comment">#c5c8c6</span>
color8  <span class="hljs-comment">#666666</span>
color9  <span class="hljs-comment">#d54e53</span>
color10 <span class="hljs-comment">#b9ca4a</span>
color11 <span class="hljs-comment">#e7c547</span>
color12 <span class="hljs-comment">#7aa6da</span>
color13 <span class="hljs-comment">#c397d8</span>
color14 <span class="hljs-comment">#70c0b1</span>
color15 <span class="hljs-comment">#eaeaea</span>
</code></pre>
<h3 data-id="heading-3">ç—›ç‚¹ 2ï¼šé€‰ä¸­æ–‡å­—ç›´æ¥æ¶ˆå¤±</h3>
<p>é€‰ä¸­ä¸€æ®µæ–‡å­—ï¼Œå‘ç°æ•´å—å˜æˆç™½è‰²ï¼Œå®Œå…¨çœ‹ä¸è§é€‰äº†å•¥ã€‚</p>
<p>åŸå› æ˜¯ Kitty é»˜è®¤çš„é€‰åŒºé¢œè‰²æœ‰é—®é¢˜ã€‚æ”¹æˆ <code>none</code> è®©å®ƒè‡ªåŠ¨å¤„ç†åè‰²ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">selection_background none
selection_foreground none
</code></pre>
<h3 data-id="heading-4">ç—›ç‚¹ 3ï¼šå­—ä½“æ¯” Ghostty ç²—</h3>
<p>åˆ‡è¿‡æ¥æ€»è§‰å¾—å­—ä½“æ¯” Ghostty ç²—ä¸€ç‚¹ï¼Œçœ‹ä¹…äº†çœ¼ç›ç´¯ã€‚</p>
<p>æŸ¥äº†ä¸‹ï¼ŒGhostty é»˜è®¤ <code>font-thicken = false</code>ï¼Œè€Œ Kitty åœ¨ macOS ä¸Šæœ‰å­—ä½“åŠ ç²—æ¸²æŸ“ã€‚ç¦ç”¨æ‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">macos_thicken_font 0
text_composition_strategy platform
</code></pre>
<h3 data-id="heading-5">ç—›ç‚¹ 4ï¼šå¿«æ·é”®å…¨åºŸäº†</h3>
<p>Ghostty é»˜è®¤æ”¯æŒçš„å‡ ä¸ªå¸¸ç”¨å¿«æ·é”®ï¼ŒKitty éƒ½æ²¡æœ‰æˆ–è€…è¡Œä¸ºä¸åŒï¼š</p>



































<table><thead><tr><th>å¿«æ·é”®</th><th>Ghostty</th><th>Kitty é»˜è®¤</th></tr></thead><tbody><tr><td><code>Cmd+T</code></td><td>æ–°å»º Tabï¼Œç»§æ‰¿å½“å‰ç›®å½•</td><td>æ–°å»º Tabï¼Œå›åˆ° home</td></tr><tr><td><code>Cmd+æ•°å­—</code></td><td>åˆ‡æ¢ Tab</td><td>ä¸ç”Ÿæ•ˆ</td></tr><tr><td><code>Cmd+W</code></td><td>å…³é—­ Tab</td><td>ä¸ç”Ÿæ•ˆ</td></tr><tr><td><code>Cmd+D</code></td><td>å‚ç›´åˆ†å±</td><td>ä¸ç”Ÿæ•ˆ</td></tr><tr><td><code>Cmd+K</code></td><td>æ¸…å±</td><td>ä¸ç”Ÿæ•ˆ</td></tr></tbody></table>
<p>æ‰‹åŠ¨é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Tab æ“ä½œ</span>
map cmd+t new_tab_with_cwd
map cmd+w close_tab
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9

<span class="hljs-comment"># åˆ†å±</span>
map cmd+d launch --location=vsplit --cwd=current
map cmd+<span class="hljs-built_in">shift</span>+d launch --location=hsplit --cwd=current
map cmd+[ previous_window
map cmd+] next_window

<span class="hljs-comment"># å…¶ä»–</span>
map cmd+k clear_terminal scroll active
map cmd+equal change_font_size all +1.0
map cmd+minus change_font_size all -1.0
map cmd+0 change_font_size all 0
map cmd+, edit_config_file
map cmd+<span class="hljs-built_in">shift</span>+, load_config_file
</code></pre>
<h3 data-id="heading-6">ç—›ç‚¹ 5ï¼šè¡Œä¸ºç»†èŠ‚ä¸ä¸€è‡´</h3>
<p>è¿˜æœ‰ä¸€äº›å°å·®å¼‚è®©äººä¸é€‚åº”ï¼š</p>

























<table><thead><tr><th>åŠŸèƒ½</th><th>Ghostty</th><th>Kitty é»˜è®¤</th></tr></thead><tbody><tr><td>çª—å£å†…è¾¹è·</td><td>2px</td><td>æ›´å¤§</td></tr><tr><td>é€‰ä¸­è‡ªåŠ¨å¤åˆ¶</td><td>å¼€å¯</td><td>å…³é—­</td></tr><tr><td>å…³é—­ç¡®è®¤</td><td>æœ‰</td><td>æ²¡æœ‰</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash">window_padding_width 2
copy_on_select <span class="hljs-built_in">yes</span>
confirm_os_window_close 1
</code></pre>
<h2 data-id="heading-7">å®Œæ•´é…ç½®</h2>
<p>è¿™æ˜¯æˆ‘ä¿®æ”¹é…ç½®åçš„ <code>~/.config/kitty/kitty.conf</code>ï¼Œç›´æ¥å¤åˆ¶å°±èƒ½ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ===== å­—ä½“è®¾ç½® =====</span>
font_family      Menlo
font_size        13.0

<span class="hljs-comment"># ===== çª—å£è®¾ç½® - åŒ¹é… Ghostty =====</span>
window_padding_width 2
macos_titlebar_color background

<span class="hljs-comment"># ===== é¢œè‰² - Ghostty é»˜è®¤ä¸»é¢˜ =====</span>
background <span class="hljs-comment">#282c34</span>
foreground <span class="hljs-comment">#ffffff</span>

<span class="hljs-comment"># å…‰æ ‡</span>
cursor <span class="hljs-comment">#ffffff</span>
cursor_text_color <span class="hljs-comment">#282c34</span>

<span class="hljs-comment"># é€‰åŒº - è‡ªåŠ¨é¢œè‰²</span>
selection_background none
selection_foreground none

<span class="hljs-comment"># ANSI é¢œè‰² - å®Œå…¨åŒ¹é… Ghostty</span>
color0  <span class="hljs-comment">#1d1f21</span>
color1  <span class="hljs-comment">#cc6666</span>
color2  <span class="hljs-comment">#b5bd68</span>
color3  <span class="hljs-comment">#f0c674</span>
color4  <span class="hljs-comment">#81a2be</span>
color5  <span class="hljs-comment">#b294bb</span>
color6  <span class="hljs-comment">#8abeb7</span>
color7  <span class="hljs-comment">#c5c8c6</span>
color8  <span class="hljs-comment">#666666</span>
color9  <span class="hljs-comment">#d54e53</span>
color10 <span class="hljs-comment">#b9ca4a</span>
color11 <span class="hljs-comment">#e7c547</span>
color12 <span class="hljs-comment">#7aa6da</span>
color13 <span class="hljs-comment">#c397d8</span>
color14 <span class="hljs-comment">#70c0b1</span>
color15 <span class="hljs-comment">#eaeaea</span>

<span class="hljs-comment"># ===== è¡Œä¸ºè®¾ç½® =====</span>
<span class="hljs-comment"># é€‰ä¸­è‡ªåŠ¨å¤åˆ¶</span>
copy_on_select <span class="hljs-built_in">yes</span>

<span class="hljs-comment"># å…³é—­ç¡®è®¤</span>
confirm_os_window_close 1

<span class="hljs-comment"># scrollback</span>
scrollback_lines 10000000

<span class="hljs-comment"># ===== macOS ä¼˜åŒ– =====</span>
macos_option_as_alt <span class="hljs-built_in">yes</span>

<span class="hljs-comment"># ===== Tab æ è®¾ç½® =====</span>
tab_bar_edge bottom

<span class="hljs-comment"># ===== å¿«æ·é”® - åŒ¹é… Ghostty =====</span>
<span class="hljs-comment"># Tab æ“ä½œ</span>
map cmd+t new_tab_with_cwd
map cmd+w close_tab
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9

<span class="hljs-comment"># åˆ†å±</span>
map cmd+d launch --location=vsplit --cwd=current
map cmd+<span class="hljs-built_in">shift</span>+d launch --location=hsplit --cwd=current
map cmd+[ previous_window
map cmd+] next_window

<span class="hljs-comment"># æ¸…å±</span>
map cmd+k clear_terminal scroll active

<span class="hljs-comment"># å­—å·è°ƒæ•´</span>
map cmd+equal change_font_size all +1.0
map cmd+minus change_font_size all -1.0
map cmd+0 change_font_size all 0

<span class="hljs-comment"># æ‰“å¼€é…ç½®</span>
map cmd+, edit_config_file

<span class="hljs-comment"># é‡è½½é…ç½®</span>
map cmd+<span class="hljs-built_in">shift</span>+, load_config_file

<span class="hljs-comment"># ===== å­—ä½“æ¸²æŸ“ - åŒ¹é… Ghostty =====</span>
<span class="hljs-comment"># ç¦ç”¨ macOS å­—ä½“åŠ ç²—</span>
macos_thicken_font 0

<span class="hljs-comment"># ä½¿ç”¨å¹³å°åŸç”Ÿæ¸²æŸ“ç­–ç•¥</span>
text_composition_strategy platform
</code></pre>
<h2 data-id="heading-8">æ€§èƒ½å¯¹æ¯”</h2>
<p>å…³äº Ghostty å’Œ Kitty çš„æ€§èƒ½ï¼Œç½‘ä¸Šæœ‰ä¸å°‘è®¨è®ºã€‚ç®€å•æ€»ç»“ï¼š</p>






























<table><thead><tr><th>ç»´åº¦</th><th>Ghostty</th><th>Kitty</th></tr></thead><tbody><tr><td>IO åå</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fghostty-org%2Fghostty%2Fdiscussions%2F4837" target="_blank" title="https://github.com/ghostty-org/ghostty/discussions/4837" ref="nofollow noopener noreferrer">å·ç§°æ¯” Kitty å¿« 4x</a>ï¼ˆçº¯æ–‡æœ¬è¯»å–ï¼‰</td><td>ä¹Ÿå¾ˆå¿«ï¼Œå®é™…ä½“æ„Ÿå·®ä¸å¤š</td></tr><tr><td>è¾“å…¥å»¶è¿Ÿ</td><td>ä¼˜ç§€</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fsw.kovidgoyal.net%2Fkitty%2Fperformance%2F" target="_blank" title="https://sw.kovidgoyal.net/kitty/performance/" ref="nofollow noopener noreferrer">macOS æœ€ä½å»¶è¿Ÿä¹‹ä¸€</a></td></tr><tr><td>æ¸²æŸ“</td><td>Metalï¼ˆmacOS åŸç”Ÿï¼‰</td><td>OpenGL</td></tr><tr><td>å†…å­˜</td><td>TUI åº”ç”¨æœ‰æ³„æ¼é£é™©</td><td>ç¨³å®š</td></tr></tbody></table>
<p>Mitchell Hashimoto è‡ªå·±ä¹Ÿè¯´è¿‡ï¼Œ"åœ¨å¤§å¤šæ•° benchmark é‡Œ Ghostty æ¯” Kitty å¥½ï¼Œä½†å®é™…ä½¿ç”¨ä¸­ï¼ˆæ¯”å¦‚è·‘ Htopã€Helixï¼‰ä½ æ„Ÿè§‰ä¸å‡ºå·®åˆ«"ã€‚</p>
<p>å¯¹æˆ‘æ¥è¯´ï¼Œé€‰ Kitty çš„æ ¸å¿ƒåŸå› å°±ä¸€ä¸ªï¼š<strong>ç¨³å®š</strong>ã€‚è·‘ Claude Code é•¿ä»»åŠ¡ä¸ä¼š OOMï¼Œè¿™æ¯”å¿«é‚£ä¹ˆä¸€ç‚¹ç‚¹é‡è¦å¤šäº†ã€‚</p>
<h2 data-id="heading-9">è¿ç§»åçš„ä½“éªŒ</h2>
<p>ç”¨äº†å‡ å¤©ï¼Œå†…å­˜é—®é¢˜ç¡®å®æ²¡äº†ã€‚Kitty è·‘ Claude Code é•¿æ—¶é—´ä»»åŠ¡ä¹Ÿå¾ˆç¨³å®šï¼Œå†…å­˜å ç”¨ä¿æŒåœ¨åˆç†èŒƒå›´ã€‚</p>
<p>é…ç½®å®Œæˆåï¼Œä½¿ç”¨ä½“éªŒå’Œ Ghostty åŸºæœ¬ä¸€è‡´ï¼š</p>
<ul>
<li>é¢œè‰²ã€å­—ä½“æ¸²æŸ“éƒ½å¯¹ä¸Šäº†</li>
<li>å¿«æ·é”®ä¹ æƒ¯ä¸ç”¨æ”¹</li>
<li>åˆ†å±ã€Tab ç®¡ç†éƒ½æ­£å¸¸</li>
</ul>
<p>å”¯ä¸€çš„é—æ†¾æ˜¯ Ghostty çš„ UI ç¡®å®æ›´å¥½çœ‹ä¸€ç‚¹ï¼ŒåŸç”Ÿ macOS çš„æ„Ÿè§‰æ›´å¼ºã€‚ä½†ç¨³å®šæ€§æ˜¯ç¬¬ä¸€ä½çš„ï¼Œé¢œå€¼å¯ä»¥å¦¥åã€‚</p>
<p>å¦‚æœä½ ä¹Ÿè¢« Ghostty çš„å†…å­˜é—®é¢˜å›°æ‰°ï¼ŒKitty æ˜¯ä¸ªé è°±çš„æ›¿ä»£æ–¹æ¡ˆã€‚å¸Œæœ›è¿™ä»½é…ç½®èƒ½å¸®ä½ å°‘è¸©ç‚¹å‘ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»äººå·¥ç›®æ£€åˆ° AI è´¨æ£€-YOLOv8 é©±åŠ¨çš„ PCB ç¼ºé™·æ£€æµ‹ç³»ç»Ÿã€å®Œæ•´æºç ã€‘]]></title>    <link>https://juejin.cn/post/7588152122186924086</link>    <guid>https://juejin.cn/post/7588152122186924086</guid>    <pubDate>2025-12-27T16:11:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588152122186924086" data-draft-id="7588191506606227462" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»äººå·¥ç›®æ£€åˆ° AI è´¨æ£€-YOLOv8 é©±åŠ¨çš„ PCB ç¼ºé™·æ£€æµ‹ç³»ç»Ÿã€å®Œæ•´æºç ã€‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T16:11:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»äººå·¥ç›®æ£€åˆ° AI è´¨æ£€-YOLOv8 é©±åŠ¨çš„ PCB ç¼ºé™·æ£€æµ‹ç³»ç»Ÿã€å®Œæ•´æºç ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:11:02.000Z" title="Sat Dec 27 2025 16:11:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»äººå·¥ç›®æ£€åˆ° AI è´¨æ£€-YOLOv8 é©±åŠ¨çš„ PCB ç¼ºé™·æ£€æµ‹ç³»ç»Ÿã€å®Œæ•´æºç ã€‘</h2>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸ç ”ç©¶æ„ä¹‰</h3>
<p>åœ¨ç”µå­åˆ¶é€ é¢†åŸŸï¼Œ<strong>PCBï¼ˆPrinted Circuit Boardï¼Œå°åˆ¶ç”µè·¯æ¿ï¼‰ç¼ºé™·æ£€æµ‹</strong>æ˜¯ä¿éšœäº§å“è´¨é‡çš„æ ¸å¿ƒç¯èŠ‚ä¹‹ä¸€ã€‚ä¼ ç»Ÿçš„äººå·¥ç›®æ£€æˆ–è§„åˆ™ç®—æ³•å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>âŒ <strong>æ•ˆç‡ä½</strong>ï¼šäººå·¥æ£€æµ‹éš¾ä»¥æ»¡è¶³å¤§è§„æ¨¡æµæ°´çº¿éœ€æ±‚</li>
<li>âŒ <strong>ä¸€è‡´æ€§å·®</strong>ï¼šä¸åŒæ£€æµ‹äººå‘˜ç»éªŒå·®å¼‚æ˜æ˜¾</li>
<li>âŒ <strong>è§„åˆ™æ³›åŒ–èƒ½åŠ›å¼±</strong>ï¼šä¼ ç»Ÿå›¾åƒç®—æ³•éš¾ä»¥åº”å¯¹å¤æ‚ç¼ºé™·å½¢æ€</li>
<li>âŒ <strong>è‡ªåŠ¨åŒ–ç¨‹åº¦ä½</strong>ï¼šéš¾ä»¥ä¸ç°ä»£å·¥ä¸šç³»ç»Ÿæ·±åº¦é›†æˆ</li>
</ul>
<p>éšç€æ·±åº¦å­¦ä¹ å’Œè®¡ç®—æœºè§†è§‰æŠ€æœ¯çš„å‘å±•ï¼Œ<strong>åŸºäºç›®æ ‡æ£€æµ‹æ¨¡å‹çš„ PCB ç¼ºé™·è‡ªåŠ¨è¯†åˆ«æ–¹æ¡ˆ</strong>é€æ¸æˆä¸ºå·¥ä¸šè§†è§‰çš„ä¸»æµæ–¹å‘ã€‚</p>
<p>æœ¬é¡¹ç›®åŸºäº <strong>Ultralytics YOLOv8</strong> æ„å»ºäº†ä¸€å¥—å®Œæ•´çš„ PCB ç¼ºé™·æ£€æµ‹ç³»ç»Ÿï¼Œå¹¶é€šè¿‡ <strong>PyQt5 æ¡Œé¢ç•Œé¢</strong> å®ç°â€œéç®—æ³•äººå‘˜ä¹Ÿèƒ½ç›´æ¥ä½¿ç”¨â€çš„å·¥ä¸šçº§åº”ç”¨å½¢æ€ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfa13c88c39b46849233121f118276bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767456661&amp;x-signature=pa4j4s%2FxUTlMmAVMdbU59Juw8x0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h3>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1tiTLzbEfr" target="_blank" title="https://www.bilibili.com/video/BV1tiTLzbEfr" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1tiâ€¦</a></p>
<p>åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8021cbd57e94765a2553e0cd15daf0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767456661&amp;x-signature=xhlytzOPG5UM%2FaLtsXO3pIGiApA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-3">äºŒã€ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-4">2.1 æŠ€æœ¯é€‰å‹è¯´æ˜</h4>



































<table><thead><tr><th>æ¨¡å—</th><th>æŠ€æœ¯é€‰å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ£€æµ‹æ¨¡å‹</td><td>YOLOv8</td><td>Anchor-Freeï¼Œé«˜ç²¾åº¦ï¼Œé«˜é€Ÿåº¦</td></tr><tr><td>æ·±åº¦å­¦ä¹ æ¡†æ¶</td><td>PyTorch</td><td>çµæ´»ã€ç¤¾åŒºæˆç†Ÿ</td></tr><tr><td>GUI ç•Œé¢</td><td>PyQt5</td><td>è·¨å¹³å°ã€æ¡Œé¢çº§åº”ç”¨</td></tr><tr><td>å›¾åƒå¤„ç†</td><td>OpenCV</td><td>è§†é¢‘æµä¸å›¾åƒè¯»å†™</td></tr><tr><td>æ•°æ®æ ¼å¼</td><td>YOLO æ ‡å‡†</td><td>é€šç”¨ã€æ˜“æ‰©å±•</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-5">2.2 ç³»ç»ŸåŠŸèƒ½æ¨¡å—åˆ’åˆ†</h4>
<p>æ•´ä½“ç³»ç»Ÿé‡‡ç”¨ <strong>â€œæ¨¡å‹å±‚ + æ¨ç†å±‚ + åº”ç”¨å±‚â€</strong> ä¸‰å±‚ç»“æ„ï¼š</p>
<pre><code class="hljs">â”œâ”€â”€ æ•°æ®å±‚
â”‚   â”œâ”€â”€ PCB å›¾åƒæ•°æ®é›†
â”‚   â”œâ”€â”€ YOLO æ ‡æ³¨æ–‡ä»¶
â”‚
â”œâ”€â”€ æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ YOLOv8 ç½‘ç»œç»“æ„
â”‚   â”œâ”€â”€ è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ æƒé‡æ–‡ä»¶
â”‚
â”œâ”€â”€ æ¨ç†å±‚
â”‚   â”œâ”€â”€ å›¾ç‰‡æ£€æµ‹
â”‚   â”œâ”€â”€ æ‰¹é‡æ£€æµ‹
â”‚   â”œâ”€â”€ è§†é¢‘æ£€æµ‹
â”‚   â”œâ”€â”€ æ‘„åƒå¤´æ£€æµ‹
â”‚
â”œâ”€â”€ åº”ç”¨å±‚
â”‚   â”œâ”€â”€ PyQt5 ä¸»ç•Œé¢
â”‚   â”œâ”€â”€ å‚æ•°é…ç½®
â”‚   â”œâ”€â”€ ç»“æœå¯è§†åŒ–
â”‚   â””â”€â”€ æ–‡ä»¶ä¿å­˜ç®¡ç†
</code></pre>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a33255ad6de4aafaf897158feb28197~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767456661&amp;x-signature=qyQptAnO8PIcsiOikSZbf3fh%2FQ4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">ä¸‰ã€PCB ç¼ºé™·ç±»å‹å®šä¹‰ä¸æ•°æ®é›†æ„å»º</h3>
<h4 data-id="heading-7">3.1 ç¼ºé™·ç±»åˆ«è¯´æ˜</h4>
<p>æœ¬é¡¹ç›®é’ˆå¯¹å¸¸è§ PCB å·¥ä¸šç¼ºé™·ï¼Œå®šä¹‰äº† 6 å¤§ç±»ç›®æ ‡ï¼š</p>








































<table><thead><tr><th>ç±»åˆ«</th><th>ä¸­æ–‡åç§°</th><th>å·¥ä¸šå«ä¹‰</th></tr></thead><tbody><tr><td>missing_hole</td><td>ç¼ºå­”</td><td>é’»å­”ç¼ºå¤±</td></tr><tr><td>mouse_bite</td><td>é¼ å’¬ç¼ºå£</td><td>æ¿è¾¹æŸå</td></tr><tr><td>open_circuit</td><td>å¼€è·¯</td><td>çº¿è·¯æ–­è£‚</td></tr><tr><td>short</td><td>çŸ­è·¯</td><td>çº¿è·¯ç²˜è¿</td></tr><tr><td>spur</td><td>é£çº¿</td><td>å¤šä½™é‡‘å±çº¿</td></tr><tr><td>spurious_copper</td><td>æ‚é“œ</td><td>éé¢„æœŸé“œæ®‹ç•™</td></tr></tbody></table>
<p>è¿™äº›ç¼ºé™·åœ¨å®é™…ç”Ÿäº§ä¸­å¯¹ PCB åŠŸèƒ½å¯é æ€§å½±å“æå¤§ï¼Œå…·æœ‰æ˜ç¡®çš„æ£€æµ‹ä»·å€¼ã€‚</p>
<hr/>
<h4 data-id="heading-8">3.2 æ•°æ®é›†ç»„ç»‡ç»“æ„</h4>
<p>é‡‡ç”¨ YOLO å®˜æ–¹æ¨èæ ¼å¼ï¼š</p>
<pre><code class="hljs language-text" lang="text">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
â”œâ”€â”€ labels/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
</code></pre>
<p>å•æ¡æ ‡æ³¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">4 0.5096 0.3528 0.3947 0.3182
</code></pre>
<p>å«ä¹‰ä¸ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">[class_id, x_center, y_center, width, height]
</code></pre>
<blockquote>
<p>åæ ‡å‡ä¸º <strong>å½’ä¸€åŒ–æ¯”ä¾‹å€¼</strong>ï¼Œä¸åˆ†è¾¨ç‡æ— å…³ï¼Œåˆ©äºæ¨¡å‹æ³›åŒ–ã€‚</p>
</blockquote>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6639b9fe8f840208b54dd355f5a82a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767456661&amp;x-signature=Zh4BpXWnJVLLtsIqxNdXI509CZs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff3b9e572e954d249869e1bb8c2f8bf5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767456661&amp;x-signature=Vtg8j5IVCtYQxWcIxH4Iv6ksde0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-9">å››ã€YOLOv8 æ¨¡å‹åŸç†ä¸å·¥ç¨‹ä¼˜åŠ¿</h3>
<h4 data-id="heading-10">4.1 YOLOv8 æ ¸å¿ƒæ”¹è¿›ç‚¹</h4>
<p>ç›¸æ¯” YOLOv5 / YOLOv7ï¼ŒYOLOv8 å…·å¤‡ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>ğŸš€ <strong>Anchor-Free æ¶æ„</strong>ï¼šå‡å°‘è¶…å‚æ•°è®¾è®¡</li>
<li>ğŸ¯ <strong>TaskAlignedAssigner</strong>ï¼šæ­£è´Ÿæ ·æœ¬åˆ†é…æ›´åˆç†</li>
<li>ğŸ“‰ <strong>CIoU + DFL Loss</strong>ï¼šå®šä½ç²¾åº¦æ›´é«˜</li>
<li>âš¡ <strong>æ¨ç†é€Ÿåº¦æ›´å¿«</strong>ï¼šé€‚åˆå®æ—¶å·¥ä¸šæ£€æµ‹</li>
</ul>
<p>YOLOv8 ç½‘ç»œç»“æ„æ•´ä½“åˆ†ä¸ºï¼š</p>
<ul>
<li><strong>Backbone</strong>ï¼šç‰¹å¾æå–</li>
<li><strong>Neck</strong>ï¼šFPN + PAN èåˆ</li>
<li><strong>Head</strong>ï¼šç›®æ ‡åˆ†ç±»ä¸å›å½’</li>
</ul>
<hr/>
<h4 data-id="heading-11">4.2 å·¥ä¸šç¼ºé™·æ£€æµ‹çš„é€‚é…æ€§åˆ†æ</h4>
<p>PCB ç¼ºé™·æ£€æµ‹å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å°ç›®æ ‡å¯†é›†</li>
<li>çº¹ç†å¤æ‚</li>
<li>å¯¹è¯¯æ£€å®¹å¿åº¦ä½</li>
</ul>
<p>YOLOv8 åœ¨ <strong>å°ç›®æ ‡æ£€æµ‹èƒ½åŠ› + å®æ—¶æ€§</strong> ä¸Šè¡¨ç°å°¤ä¸ºçªå‡ºï¼Œéå¸¸é€‚åˆè¯¥ç±»å·¥ä¸šåœºæ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-12">äº”ã€æ¨¡å‹è®­ç»ƒæµç¨‹ä¸å‚æ•°é…ç½®</h3>
<h4 data-id="heading-13">5.1 è®­ç»ƒå‘½ä»¤ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash">yolo detect train \
  data=pcb.yaml \
  model=yolov8n.pt \
  epochs=100 \
  batch=16 \
  imgsz=640 \
  lr0=0.001
</code></pre>
<p>å…³é”®å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>epochs</code>ï¼šè®­ç»ƒè½®æ¬¡</li>
<li><code>batch</code>ï¼šæ‰¹å¤§å°</li>
<li><code>imgsz</code>ï¼šè¾“å…¥å°ºå¯¸</li>
<li><code>lr0</code>ï¼šåˆå§‹å­¦ä¹ ç‡</li>
</ul>
<hr/>
<h4 data-id="heading-14">5.2 è®­ç»ƒç»“æœè¯„ä¼°æŒ‡æ ‡</h4>
<p>è®­ç»ƒå®Œæˆåç”Ÿæˆä»¥ä¸‹å…³é”®æ–‡ä»¶ï¼š</p>
<ul>
<li><code>results.png</code>ï¼šLoss / mAP æ›²çº¿</li>
<li><code>confusion_matrix.png</code>ï¼šç±»åˆ«æ··æ·†åˆ†æ</li>
<li><code>weights/best.pt</code>ï¼šæœ€ä¼˜æƒé‡</li>
</ul>
<p>å½“ <strong>mAP@0.5 â‰¥ 90%</strong> æ—¶ï¼Œå³å…·å¤‡å·¥ç¨‹éƒ¨ç½²ä»·å€¼ã€‚</p>
<hr/>
<h3 data-id="heading-15">å…­ã€æ¨¡å‹æ¨ç†ä¸ç»“æœè§£æ</h3>
<h4 data-id="heading-16">6.1 Python æ¨ç†ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ultralytics <span class="hljs-keyword">import</span> YOLO

model = YOLO(<span class="hljs-string">"best.pt"</span>)
results = model(<span class="hljs-string">"test.jpg"</span>, conf=<span class="hljs-number">0.25</span>, save=<span class="hljs-literal">True</span>)

<span class="hljs-keyword">for</span> box <span class="hljs-keyword">in</span> results[<span class="hljs-number">0</span>].boxes:
    cls = <span class="hljs-built_in">int</span>(box.cls)
    conf = <span class="hljs-built_in">float</span>(box.conf)
    <span class="hljs-built_in">print</span>(cls, conf)
</code></pre>
<p>è¾“å‡ºä¿¡æ¯åŒ…å«ï¼š</p>
<ul>
<li>ç¼ºé™·ç±»åˆ«</li>
<li>ç½®ä¿¡åº¦</li>
<li>è¾¹æ¡†åæ ‡</li>
</ul>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcd7a3d234d346739a4d990fb8cc71c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767456661&amp;x-signature=Y8L4y%2BmDE4swRV8s8r3P12VBj8s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-17">6.2 æ£€æµ‹ç»“æœå¯è§†åŒ–</h4>
<p>ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå¸¦æœ‰ <strong>ç±»åˆ« + ç½®ä¿¡åº¦ + è¾¹æ¡†</strong> çš„ç»“æœå›¾åƒï¼Œä¾¿äºäººå·¥å¤æ ¸å’Œè´¨é‡è¿½æº¯ã€‚</p>
<hr/>
<h3 data-id="heading-18">ä¸ƒã€PyQt5 æ¡Œé¢åº”ç”¨ç³»ç»Ÿè®¾è®¡</h3>
<h4 data-id="heading-19">7.1 GUI åŠŸèƒ½æ¦‚è§ˆ</h4>
<p>æ¡Œé¢ç³»ç»Ÿæ”¯æŒï¼š</p>
<ul>
<li>ğŸ“· å•å›¾ç‰‡æ£€æµ‹</li>
<li>ğŸ“ æ–‡ä»¶å¤¹æ‰¹é‡æ£€æµ‹</li>
<li>ğŸ¥ è§†é¢‘æ£€æµ‹</li>
<li>ğŸ“¡ æ‘„åƒå¤´å®æ—¶æ£€æµ‹</li>
</ul>
<p>ç•Œé¢ä¸ç®—æ³•è§£è€¦ï¼Œç”¨æˆ·æ— éœ€ç†è§£æ·±åº¦å­¦ä¹ å³å¯å®Œæˆæ£€æµ‹ã€‚</p>
<hr/>
<h4 data-id="heading-20">7.2 ä¸»ç¨‹åºè¿è¡Œæ–¹å¼</h4>
<pre><code class="hljs language-bash" lang="bash">python main.py
</code></pre>
<p>ç³»ç»Ÿå°†è‡ªåŠ¨åŠ è½½æ¨¡å‹æƒé‡å¹¶è¿›å…¥ä¸»ç•Œé¢ã€‚</p>
<hr/>
<h3 data-id="heading-21">å…«ã€å·¥ç¨‹è½åœ°ä»·å€¼åˆ†æ</h3>
<h4 data-id="heading-22">8.1 é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>PCB ç”Ÿäº§çº¿è‡ªåŠ¨è´¨æ£€</li>
<li>å·¥ä¸šè§†è§‰æ•™å­¦å®éªŒ</li>
<li>è®¡ç®—æœºè§†è§‰æ¯•ä¸šè®¾è®¡</li>
<li>ä¼ä¸šåŸå‹ç³»ç»ŸéªŒè¯</li>
</ul>
<hr/>
<h4 data-id="heading-23">8.2 é¡¹ç›®ä¼˜åŠ¿æ€»ç»“</h4>
<ul>
<li>âœ… <strong>ä» 0 åˆ° 1 çš„å®Œæ•´å·¥ç¨‹é—­ç¯</strong></li>
<li>âœ… <strong>æ¨¡å‹ + GUI + æ•°æ®é›† ä¸€ä½“åŒ–</strong></li>
<li>âœ… <strong>é«˜å¯å¤ç°æ€§ä¸å¯æ‰©å±•æ€§</strong></li>
<li>âœ… <strong>é€‚åˆç§‘ç ”ä¸å·¥ä¸šåŒåœºæ™¯</strong></li>
</ul>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fb312c27f2446958d99c93879d2b81d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767456661&amp;x-signature=vS7x3fYG2%2BcaqmOIdhL78feE52M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-24">ä¹ã€å¯æ‹“å±•æ–¹å‘ä¸æœªæ¥ä¼˜åŒ–</h3>
<ol>
<li>
<p><strong>æ¨¡å‹è½»é‡åŒ–</strong></p>
<ul>
<li>ONNX / TensorRT</li>
<li>Jetson / è¾¹ç¼˜ç«¯éƒ¨ç½²</li>
</ul>
</li>
<li>
<p><strong>ç¼ºé™·ç»Ÿè®¡ä¸æŠ¥è¡¨</strong></p>
<ul>
<li>è‡ªåŠ¨ç”Ÿæˆ CSV / Excel</li>
<li>è´¨é‡è¶‹åŠ¿åˆ†æ</li>
</ul>
</li>
<li>
<p><strong>å¤šæ¨¡å‹å¯¹æ¯”</strong></p>
<ul>
<li>YOLOv8 vs RT-DETR</li>
<li>Transformer-based Detector</li>
</ul>
</li>
<li>
<p><strong>å·¥ä¸šç³»ç»Ÿå¯¹æ¥</strong></p>
<ul>
<li>MES / PLC æ¥å£</li>
<li>Web å¯è§†åŒ–å¹³å°</li>
</ul>
</li>
</ol>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6aa48b86a86467889f066ea0adbc8ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767456661&amp;x-signature=g06qDfNDLFDi0Dx%2FP%2B%2FTMAEU7NY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-25">åã€ç»“è¯­</h3>
<p>æœ¬é¡¹ç›®ä¸ä»…æ˜¯ä¸€ä¸ª <strong>YOLOv8 ç›®æ ‡æ£€æµ‹ç¤ºä¾‹</strong>ï¼Œæ›´æ˜¯ä¸€å¥—<strong>çœŸæ­£å¯ç”¨äºå·¥ä¸šåœºæ™¯çš„ PCB ç¼ºé™·æ£€æµ‹è§£å†³æ–¹æ¡ˆ</strong>ã€‚
é€šè¿‡æ¨¡å‹è®­ç»ƒã€æ¨ç†å°è£…ä¸æ¡Œé¢åº”ç”¨æ•´åˆï¼Œå®ç°äº†ä»ç®—æ³•åˆ°å·¥ç¨‹çš„å®Œæ•´è½åœ°è·¯å¾„ã€‚</p>
<blockquote>
<p><strong>å¦‚æœä½ æ­£åœ¨åšè®¡ç®—æœºè§†è§‰é¡¹ç›® / å·¥ä¸šè§†è§‰ç³»ç»Ÿ / æ¯•ä¸šè®¾è®¡ï¼Œè¿™å¥—æ–¹æ¡ˆå¯ä»¥ç›´æ¥ä½œä¸ºæ¨¡æ¿ä½¿ç”¨ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºæ·±åº¦å­¦ä¹ çš„æ²³é“åƒåœ¾æ£€æµ‹ç³»ç»Ÿè®¾è®¡ï¼ˆYOLOv8ï¼‰]]></title>    <link>https://juejin.cn/post/7588300640598966278</link>    <guid>https://juejin.cn/post/7588300640598966278</guid>    <pubDate>2025-12-27T16:18:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640598966278" data-draft-id="7588149079417307190" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºæ·±åº¦å­¦ä¹ çš„æ²³é“åƒåœ¾æ£€æµ‹ç³»ç»Ÿè®¾è®¡ï¼ˆYOLOv8ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-27T16:18:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºæ·±åº¦å­¦ä¹ çš„æ²³é“åƒåœ¾æ£€æµ‹ç³»ç»Ÿè®¾è®¡ï¼ˆYOLOv8ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:18:14.000Z" title="Sat Dec 27 2025 16:18:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäºæ·±åº¦å­¦ä¹ çš„æ²³é“åƒåœ¾æ£€æµ‹ç³»ç»Ÿè®¾è®¡ï¼ˆYOLOv8ï¼‰</h2>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ç ”ç©¶èƒŒæ™¯ï¼šAI å¦‚ä½•å‚ä¸æ²³é“ç¯å¢ƒæ²»ç†ï¼Ÿ</h3>
<p>éšç€åŸå¸‚åŒ–è¿›ç¨‹åŠ å¿«ï¼Œ<strong>æ²³é“ã€æ¹–æ³Šã€æ°´åº“ç­‰æ°´ä½“ä¸­çš„å¡‘æ–™åƒåœ¾é—®é¢˜æ—¥ç›Šä¸¥å³»</strong>ã€‚å…¶ä¸­ï¼Œå¡‘æ–™ç“¶å› ä½“ç§¯æ˜æ˜¾ã€æ•°é‡åºå¤§ã€éš¾ä»¥è‡ªç„¶é™è§£ï¼Œå·²æˆä¸ºæ°´ç¯å¢ƒæ±¡æŸ“æ²»ç†ä¸­çš„é‡ç‚¹å¯¹è±¡ã€‚</p>
<p>ä¼ ç»Ÿæ²³é“åƒåœ¾ç›‘æµ‹æ–¹å¼ä¸»è¦å­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<ul>
<li>âŒ <strong>äººå·¥å·¡æŸ¥æˆæœ¬é«˜ã€æ•ˆç‡ä½</strong></li>
<li>âŒ <strong>ç›‘æµ‹ç»“æœä¸»è§‚æ€§å¼ºï¼Œéš¾ä»¥é‡åŒ–</strong></li>
<li>âŒ <strong>æ— æ³•å®ç°å®æ—¶ã€è¿ç»­ç›‘æ§</strong></li>
<li>âŒ <strong>éš¾ä»¥å½¢æˆæ•°æ®é—­ç¯æ”¯æ’‘å†³ç­–</strong></li>
</ul>
<p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œ<strong>åŸºäºæ·±åº¦å­¦ä¹ çš„ç›®æ ‡æ£€æµ‹æŠ€æœ¯</strong>ä¸ºæ²³é“åƒåœ¾è‡ªåŠ¨è¯†åˆ«æä¾›äº†æ–°çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æœ¬é¡¹ç›®ä»¥ <strong>YOLOv8 ç›®æ ‡æ£€æµ‹æ¨¡å‹</strong> ä¸ºæ ¸å¿ƒï¼Œæ„å»ºäº†ä¸€å¥— <strong>æ²³é“å¡‘æ–™ç“¶æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿ</strong>ï¼Œå¹¶é€šè¿‡ <strong>PyQt5 æ¡Œé¢ç«¯åº”ç”¨</strong> å®ç°å·¥ç¨‹çº§è½åœ°ï¼ŒçœŸæ­£åšåˆ°ï¼š</p>
<blockquote>
<p><strong>â€œæ¨¡å‹å¯è®­ç»ƒã€ç³»ç»Ÿå¯è¿è¡Œã€ç»“æœå¯å±•ç¤ºã€å·¥ç¨‹å¯å¤ç°â€</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41b7a88e3f0449309189e0d0ab9c4227~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767457093&amp;x-signature=PKfe6xbFDoyyTRRfmQ2JHeIPG6U%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<hr/>
<h3 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h3>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1unTXzNESm" target="_blank" title="https://www.bilibili.com/video/BV1unTXzNESm" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1unâ€¦</a></p>
<p>åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00248fb4d5c74b39a680cec5ca95709d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767457093&amp;x-signature=ensVZMfT6kEb9qFikAg%2BA8QdzRk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-3">äºŒã€ç³»ç»Ÿæ€»ä½“æ–¹æ¡ˆè®¾è®¡</h3>
<h4 data-id="heading-4">2.1 æŠ€æœ¯è·¯çº¿æ¦‚è§ˆ</h4>
<p>æœ¬ç³»ç»Ÿé‡‡ç”¨ç»å…¸ä½†æˆç†Ÿçš„ AI å·¥ç¨‹æŠ€æœ¯æ ˆï¼š</p>





























<table><thead><tr><th>æ¨¡å—</th><th>æŠ€æœ¯</th></tr></thead><tbody><tr><td>ç›®æ ‡æ£€æµ‹</td><td>YOLOv8ï¼ˆUltralyticsï¼‰</td></tr><tr><td>æ·±åº¦å­¦ä¹ æ¡†æ¶</td><td>PyTorch</td></tr><tr><td>å›¾åƒ/è§†é¢‘å¤„ç†</td><td>OpenCV</td></tr><tr><td>å›¾å½¢ç•Œé¢</td><td>PyQt5</td></tr><tr><td>åº”ç”¨å½¢æ€</td><td>æ¡Œé¢çº§æ™ºèƒ½æ£€æµ‹ç³»ç»Ÿ</td></tr></tbody></table>
<p>æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å›¾åƒ / è§†é¢‘ / æ‘„åƒå¤´
<span class="hljs-code">        â†“
   YOLOv8 æ¨ç†æ¨¡å‹
        â†“
  å¡‘æ–™ç“¶ç›®æ ‡æ£€æµ‹ç»“æœ
        â†“
 PyQt5 ç•Œé¢å®æ—¶å±•ç¤º
        â†“
  ç»“æœä¿å­˜ / æ•°æ®åˆ†æ
</span></code></pre>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6c52a153ecf44af9c62cbfcae17c61f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767457093&amp;x-signature=XGJ%2Bby1JiibN%2Bq20MYguLrFpj5U%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-5">2.2 åŠŸèƒ½æ¨¡å—åˆ’åˆ†</h4>
<p>ç³»ç»ŸæŒ‰åŠŸèƒ½å¯æ‹†åˆ†ä¸ºäº”å¤§æ ¸å¿ƒæ¨¡å—ï¼š</p>
<ol>
<li>
<p><strong>æ•°æ®å±‚</strong></p>
<ul>
<li>æ²³é“åœºæ™¯å¡‘æ–™ç“¶æ•°æ®é›†</li>
<li>YOLO æ ‡å‡†æ ‡æ³¨æ–‡ä»¶</li>
</ul>
</li>
<li>
<p><strong>æ¨¡å‹å±‚</strong></p>
<ul>
<li>YOLOv8 ç½‘ç»œç»“æ„</li>
<li>è®­ç»ƒè„šæœ¬ä¸æƒé‡æ–‡ä»¶</li>
</ul>
</li>
<li>
<p><strong>æ¨ç†å±‚</strong></p>
<ul>
<li>å•å›¾æ£€æµ‹</li>
<li>æ‰¹é‡å›¾ç‰‡æ£€æµ‹</li>
<li>è§†é¢‘æµæ£€æµ‹</li>
<li>æ‘„åƒå¤´å®æ—¶æ£€æµ‹</li>
</ul>
</li>
<li>
<p><strong>ç•Œé¢å±‚</strong></p>
<ul>
<li>PyQt5 ä¸»ç•Œé¢</li>
<li>å‚æ•°é…ç½®é¢æ¿</li>
<li>æ£€æµ‹ç»“æœæ˜¾ç¤ºåŒº</li>
</ul>
</li>
<li>
<p><strong>è¾“å‡ºå±‚</strong></p>
<ul>
<li>æ£€æµ‹å›¾ç‰‡/è§†é¢‘ä¿å­˜</li>
<li>åç»­ç»Ÿè®¡åˆ†ææ¥å£</li>
</ul>
</li>
</ol>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac98591c91c9401fab72faf0d048e1e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767457093&amp;x-signature=%2B5cA2Vdp86vXMAxjX5V0akw7djw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">ä¸‰ã€æ•°æ®é›†æ„å»ºä¸ç¼ºé™·ç›®æ ‡å®šä¹‰</h3>
<h4 data-id="heading-7">3.1 æ£€æµ‹ç›®æ ‡è¯´æ˜</h4>
<p>æœ¬é¡¹ç›®å½“å‰èšç„¦ <strong>å•ä¸€æ ¸å¿ƒç›®æ ‡</strong>ï¼š</p>
<pre><code class="hljs language-text" lang="text">bottleï¼ˆå¡‘æ–™ç“¶ï¼‰
</code></pre>
<p>é€‰æ‹©å•ç±»ç›®æ ‡çš„åŸå› ï¼š</p>
<ul>
<li>å¡‘æ–™ç“¶åœ¨æ²³é“åƒåœ¾ä¸­å æ¯”é«˜</li>
<li>å½¢æ€ç‰¹å¾æ˜æ˜¾ï¼Œé€‚åˆæ¨¡å‹å¿«é€Ÿæ”¶æ•›</li>
<li>æ˜“æ‰©å±•ä¸ºå¤šç±»åƒåœ¾æ£€æµ‹ï¼ˆå¦‚å¡‘æ–™è¢‹ã€æ³¡æ²«ç­‰ï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-8">3.2 æ•°æ®é›†ç»“æ„è®¾è®¡</h4>
<p>é‡‡ç”¨ YOLO å®˜æ–¹æ¨èæ ¼å¼ï¼Œä¿è¯ä¸è®­ç»ƒè„šæœ¬æ— ç¼å…¼å®¹ï¼š</p>
<pre><code class="hljs language-text" lang="text">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
â”œâ”€â”€ labels/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
</code></pre>
<p>æ ‡æ³¨æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">0 0.5123 0.3681 0.2845 0.4176
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>0</code>ï¼šå¡‘æ–™ç“¶ç±»åˆ« ID</li>
<li>åå››é¡¹ï¼šç›®æ ‡åœ¨å›¾åƒä¸­çš„å½’ä¸€åŒ–åæ ‡</li>
</ul>
<hr/>
<h4 data-id="heading-9">3.3 æ•°æ®é›†ç‰¹ç‚¹åˆ†æ</h4>
<p>æ²³é“åœºæ™¯ç›¸æ¯”å¸¸è§„ç›®æ ‡æ£€æµ‹æ›´å…·æŒ‘æˆ˜ï¼š</p>
<ul>
<li>ğŸŒŠ æ°´é¢åå…‰ä¸¥é‡</li>
<li>ğŸŒ¿ èƒŒæ™¯æ‚ä¹±ï¼ˆæ¤è¢«ã€æ¼‚æµ®ç‰©ï¼‰</li>
<li>ğŸ“ å¡‘æ–™ç“¶å°ºåº¦å˜åŒ–å¤§</li>
<li>ğŸ“¸ æ‹æ‘„è§’åº¦å¤æ‚ï¼ˆä¿¯è§†ã€è¿œæ™¯ï¼‰</li>
</ul>
<p>è¿™äº›å› ç´ å¯¹æ¨¡å‹çš„<strong>é²æ£’æ€§å’Œæ³›åŒ–èƒ½åŠ›</strong>æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚</p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e07790295d742c3be80983cb4971191~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767457093&amp;x-signature=0UQ1yKx3svBdgdK6H86wnTmWXPU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-10">å››ã€YOLOv8 æ¨¡å‹åŸç†ä¸é€‚é…åˆ†æ</h3>
<h4 data-id="heading-11">4.1 YOLOv8 æ ¸å¿ƒä¼˜åŠ¿</h4>
<p>YOLOv8 æ˜¯ Ultralytics æ¨å‡ºçš„æ–°ä¸€ä»£ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p>
<ul>
<li>âœ… <strong>Anchor-Free æ¶æ„</strong>ï¼šå‡å°‘å…ˆéªŒä¾èµ–</li>
<li>âœ… <strong>TaskAlignedAssigner</strong>ï¼šæ›´åˆç†çš„æ­£æ ·æœ¬åŒ¹é…</li>
<li>âœ… <strong>é«˜æ¨ç†é€Ÿåº¦</strong>ï¼šé€‚åˆå®æ—¶åœºæ™¯</li>
<li>âœ… <strong>æ”¯æŒå¤šä»»åŠ¡æ‰©å±•</strong>ï¼šæ£€æµ‹ / åˆ†å‰² / åˆ†ç±»</li>
</ul>
<p>å¯¹äºæ²³é“åƒåœ¾æ£€æµ‹è¿™ç§ <strong>å®æ—¶ + æˆ·å¤–å¤æ‚åœºæ™¯</strong> ä»»åŠ¡ï¼ŒYOLOv8 éå¸¸é€‚åˆã€‚</p>
<hr/>
<h4 data-id="heading-12">4.2 ç¯ä¿åœºæ™¯ä¸‹çš„æ¨¡å‹é€‚é…</h4>
<p>åœ¨å®é™…å·¥ç¨‹ä¸­ï¼ŒYOLOv8 çš„ä¼˜åŠ¿ä½“ç°åœ¨ï¼š</p>
<ul>
<li>å¯¹å°ç›®æ ‡ï¼ˆè¿œæ™¯å¡‘æ–™ç“¶ï¼‰è¯†åˆ«èƒ½åŠ›å¼º</li>
<li>åœ¨å¤æ‚èƒŒæ™¯ä¸‹è¯¯æ£€ç‡ä½</li>
<li>æ¨¡å‹è½»é‡ï¼Œä¾¿äºåç»­è¾¹ç¼˜ç«¯éƒ¨ç½²</li>
</ul>
<hr/>
<h3 data-id="heading-13">äº”ã€æ¨¡å‹è®­ç»ƒæµç¨‹ä¸è¯„ä¼°æ–¹æ³•</h3>
<h4 data-id="heading-14">5.1 è®­ç»ƒå‘½ä»¤ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash">yolo detect train \
  data=river.yaml \
  model=yolov8n.pt \
  epochs=100 \
  batch=16 \
  imgsz=640 \
  lr0=0.001
</code></pre>
<p>æ ¸å¿ƒå‚æ•°è§£é‡Šï¼š</p>
<ul>
<li><code>epochs</code>ï¼šè®­ç»ƒè½®æ¬¡ï¼Œæ§åˆ¶æ”¶æ•›ç¨‹åº¦</li>
<li><code>batch</code>ï¼šæ˜¾å­˜ä¸è®­ç»ƒç¨³å®šæ€§çš„å¹³è¡¡</li>
<li><code>imgsz</code>ï¼šè¾“å…¥å°ºå¯¸ï¼Œå½±å“å°ç›®æ ‡æ£€æµ‹èƒ½åŠ›</li>
</ul>
<hr/>
<h4 data-id="heading-15">5.2 è®­ç»ƒç»“æœè¯„ä¼°æŒ‡æ ‡</h4>
<p>è®­ç»ƒç»“æŸåä¸»è¦å…³æ³¨ï¼š</p>
<ul>
<li><strong>mAP@0.5</strong></li>
<li><strong>Loss æ›²çº¿æ”¶æ•›æƒ…å†µ</strong></li>
<li><strong>è¯¯æ£€ä¸æ¼æ£€æ ·æœ¬åˆ†æ</strong></li>
</ul>
<p>ç»éªŒä¸Šï¼š</p>
<blockquote>
<p>å½“ mAP@0.5 â‰¥ 90%ï¼Œæ¨¡å‹å·²å…·å¤‡å®é™…éƒ¨ç½²ä»·å€¼ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-16">å…­ã€æ¨¡å‹æ¨ç†ä¸ç»“æœè§£æ</h3>
<h4 data-id="heading-17">6.1 Python æ¨ç†ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ultralytics <span class="hljs-keyword">import</span> YOLO

model = YOLO(<span class="hljs-string">"best.pt"</span>)
results = model(<span class="hljs-string">"river.jpg"</span>, conf=<span class="hljs-number">0.25</span>, save=<span class="hljs-literal">True</span>)

<span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results:
    <span class="hljs-keyword">for</span> box <span class="hljs-keyword">in</span> r.boxes:
        <span class="hljs-built_in">print</span>(box.cls, box.conf)
</code></pre>
<p>æ¨¡å‹è¾“å‡ºåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç±»åˆ« ID</li>
<li>ç½®ä¿¡åº¦</li>
<li>è¾¹æ¡†åæ ‡</li>
</ul>
<hr/>
<h4 data-id="heading-18">6.2 ç»“æœå¯è§†åŒ–æ•ˆæœ</h4>
<p>ç³»ç»Ÿè‡ªåŠ¨è¾“å‡º <strong>å¸¦æ£€æµ‹æ¡†ä¸ç½®ä¿¡åº¦æ ‡ç­¾çš„å›¾åƒ/è§†é¢‘</strong>ï¼Œä¾¿äºï¼š</p>
<ul>
<li>äººå·¥å¤æ ¸</li>
<li>æ•°æ®ç•™å­˜</li>
<li>åç»­ç»Ÿè®¡åˆ†æ</li>
</ul>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/288cd3636d49426793f0e9b7b64e91f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767457093&amp;x-signature=6Cm2JES6NuOqrLmvq4rux5Wn%2Fr4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-19">ä¸ƒã€PyQt5 æ¡Œé¢ç³»ç»Ÿè®¾è®¡ä¸é›†æˆ</h3>
<h4 data-id="heading-20">7.1 ç•Œé¢åŠŸèƒ½æ¦‚è§ˆ</h4>
<p>PyQt5 æ¡Œé¢ç«¯æä¾›å®Œæ•´çš„ç”¨æˆ·æ“ä½œé—­ç¯ï¼š</p>
<ul>
<li>ğŸ“· å›¾ç‰‡æ£€æµ‹</li>
<li>ğŸ“ æ–‡ä»¶å¤¹æ‰¹é‡æ£€æµ‹</li>
<li>ğŸ¥ è§†é¢‘æ£€æµ‹</li>
<li>ğŸ“¡ æ‘„åƒå¤´å®æ—¶è¯†åˆ«</li>
<li>ğŸ’¾ ç»“æœä¿å­˜å¼€å…³</li>
</ul>
<p><strong>ç”¨æˆ·æ— éœ€ç¼–å†™ä»»ä½•ä»£ç å³å¯ä½¿ç”¨æ¨¡å‹èƒ½åŠ›ã€‚</strong></p>
<hr/>
<h4 data-id="heading-21">7.2 ç¨‹åºè¿è¡Œæ–¹å¼</h4>
<pre><code class="hljs language-bash" lang="bash">python main.py
</code></pre>
<p>ç³»ç»Ÿå¯åŠ¨åè‡ªåŠ¨åŠ è½½æ¨¡å‹æƒé‡ï¼Œè¿›å…¥æ£€æµ‹ç•Œé¢ã€‚</p>
<hr/>
<h3 data-id="heading-22">å…«ã€å·¥ç¨‹åº”ç”¨ä»·å€¼åˆ†æ</h3>
<h4 data-id="heading-23">8.1 å…¸å‹åº”ç”¨åœºæ™¯</h4>
<ul>
<li>æ²³é“å·¡æ£€æ— äººå€¼å®ˆç›‘æµ‹</li>
<li>ç¯ä¿éƒ¨é—¨è¾…åŠ©å†³ç­–</li>
<li>AI+ç¯ä¿ç§‘ç ”å®éªŒ</li>
<li>è®¡ç®—æœºè§†è§‰æ¯•ä¸šè®¾è®¡</li>
</ul>
<hr/>
<h4 data-id="heading-24">8.2 é¡¹ç›®æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“</h4>
<ul>
<li>âœ… <strong>å®Œæ•´å·¥ç¨‹é—­ç¯</strong></li>
<li>âœ… <strong>æ¨¡å‹ + ç•Œé¢ä¸€ä½“åŒ–</strong></li>
<li>âœ… <strong>é«˜å¤ç°æ€§ï¼Œä½ä½¿ç”¨é—¨æ§›</strong></li>
<li>âœ… <strong>å…·å¤‡çœŸå®ç¯ä¿åº”ç”¨ä»·å€¼</strong></li>
</ul>
<hr/>
<h3 data-id="heading-25">ä¹ã€æœªæ¥å¯æ‹“å±•æ–¹å‘</h3>
<ol>
<li>
<p><strong>å¤šç±»åƒåœ¾è¯†åˆ«</strong></p>
<ul>
<li>å¡‘æ–™è¢‹ / æ³¡æ²« / æ˜“æ‹‰ç½</li>
</ul>
</li>
<li>
<p><strong>è¾¹ç¼˜è®¾å¤‡éƒ¨ç½²</strong></p>
<ul>
<li>Jetson / æ ‘è“æ´¾</li>
</ul>
</li>
<li>
<p><strong>ç»Ÿè®¡åˆ†ææ¨¡å—</strong></p>
<ul>
<li>åƒåœ¾æ•°é‡è¶‹åŠ¿åˆ†æ</li>
</ul>
</li>
<li>
<p><strong>æ— äººæœº + AI è”åŠ¨</strong></p>
<ul>
<li>ç©ºä¸­å·¡æ£€æ²³é“åƒåœ¾</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-26">åã€ç»“è¯­</h3>
<p>æœ¬é¡¹ç›®ä¸ä»…æ˜¯ä¸€ä¸ª <strong>YOLOv8 ç›®æ ‡æ£€æµ‹å®æˆ˜æ¡ˆä¾‹</strong>ï¼Œæ›´æ˜¯ä¸€å¥— <strong>å¯ç›´æ¥æœåŠ¡äºç¯ä¿åœºæ™¯çš„æ™ºèƒ½è¯†åˆ«ç³»ç»ŸåŸå‹</strong>ã€‚</p>
<p>å®ƒè¯æ˜äº†ï¼š
<strong>AI ä¸åªæ˜¯å®éªŒå®¤é‡Œçš„æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥æˆä¸ºæ”¹å–„ç°å®ç¯å¢ƒçš„æŠ€æœ¯åŠ›é‡ã€‚</strong></p>
<blockquote>
<p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ª <strong>AI + ç¯ä¿ + å·¥ç¨‹è½åœ°</strong> çš„å®Œæ•´é¡¹ç›®ï¼Œè¿™ä¸ªç³»ç»Ÿå¯ä»¥ç›´æ¥ä½œä¸ºä½ çš„èµ·ç‚¹ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œå•æœºâ€åˆ°â€œåˆ†å¸ƒå¼â€åˆ°â€œé›†ç¾¤â€ï¼ŒæœåŠ¡ç»å†äº†ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588092534162145280</link>    <guid>https://juejin.cn/post/7588092534162145280</guid>    <pubDate>2025-12-27T16:32:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534162145280" data-draft-id="7588093282530525236" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œå•æœºâ€åˆ°â€œåˆ†å¸ƒå¼â€åˆ°â€œé›†ç¾¤â€ï¼ŒæœåŠ¡ç»å†äº†ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-27T16:32:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œå•æœºâ€åˆ°â€œåˆ†å¸ƒå¼â€åˆ°â€œé›†ç¾¤â€ï¼ŒæœåŠ¡ç»å†äº†ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:32:07.000Z" title="Sat Dec 27 2025 16:32:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ã€ä¸‡å­—é•¿æ–‡Â·å›¾è§£ã€‘<br/>
ä»â€œå•æœºâ€åˆ°â€œåˆ†å¸ƒå¼â€åˆ°â€œé›†ç¾¤â€â€”â€”ä¸€æ¬¡è®²é€ä¸¤è€…çš„åŒºåˆ«ã€è”ç³»ã€è½åœ°åœºæ™¯ä¸å¸¸è§æ¶æ„</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å…ˆæ”¾ä¸€å¼ è„‘å›¾</h2>
<pre><code class="hljs language-markdown" lang="markdown">å•æœºï¼ˆone boxï¼‰â”€â”€â”€â”€â”¬â”€â”€&gt; é›†ç¾¤ï¼ˆClusterï¼‰ï¼šå¤šå°æœºå™¨å¹²<span class="hljs-strong">**åŒä¸€ä»¶äº‹**</span>ï¼ˆæ¨ªå‘å¤åˆ¶ï¼‰
<span class="hljs-code">                â””â”€â”€&gt; åˆ†å¸ƒå¼ï¼ˆDistributedï¼‰ï¼šå¤šå°æœºå™¨å¹²**ä¸åŒçš„äº‹**ï¼ˆæ¨ªå‘æ‹†åˆ†ï¼‰
</span></code></pre>
<p>å…³é”®è¯</p>
<ul>
<li><strong>é›†ç¾¤</strong> = <strong>äººå¤šåŠ›é‡å¤§</strong>ï¼ˆé‡ï¼‰</li>
<li><strong>åˆ†å¸ƒå¼</strong> = <strong>ä¸“äººå¹²ä¸“äº‹</strong>ï¼ˆåˆ†å·¥ï¼‰</li>
<li>ç°å®ä¸­å¾€å¾€â€œ<strong>åˆ†å¸ƒå¼ + é›†ç¾¤</strong>â€æ··åˆå‡ºç°ï¼ˆæ—¢æ‹†åˆ†åˆå¤åˆ¶ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€é›†ç¾¤ï¼ˆClusterï¼‰è¯¦è§£</h2>
<h3 data-id="heading-2">1. å®šä¹‰</h3>
<blockquote>
<p>å¤šå°ç‰©ç†/è™šæ‹ŸèŠ‚ç‚¹<strong>ç»„æˆä¸€ä¸ªé€»è¾‘æ•´ä½“</strong>ï¼Œå¯¹å¤–æä¾›<strong>åŒä¸€ç§æœåŠ¡</strong>ï¼Œé€šè¿‡å¤åˆ¶æé«˜<strong>å¹¶å‘é‡</strong>ä¸<strong>å¯ç”¨æ€§</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-3">2. æ ¸å¿ƒç›®æ ‡</h3>
<ul>
<li>Scale-Outï¼ˆæ¨ªå‘æ‰©å±•ï¼‰</li>
<li>High-Availabilityï¼ˆæ•…éšœè½¬ç§»ï¼‰</li>
<li>Load-Sharingï¼ˆè´Ÿè½½å‡è¡¡ï¼‰</li>
</ul>
<h3 data-id="heading-4">3. åˆ†ç±»é€Ÿè®°</h3>






























<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>äº§å“æ¡ˆä¾‹</th></tr></thead><tbody><tr><td>é«˜å¯ç”¨é›†ç¾¤ HA</td><td>ä¸»å¤‡åˆ‡æ¢ï¼Œ<strong>A æŒ‚äº† B ç«‹åˆ»é¡¶</strong></td><td>MySQL MGRã€Redis Sentinelã€Keepalived</td></tr><tr><td>è´Ÿè½½å‡è¡¡é›†ç¾¤ LB</td><td>å¤šå°åŒæ—¶åœ¨çº¿ï¼Œ<strong>æµé‡åˆ†æ‘Š</strong></td><td>Nginxã€LVSã€HAProxyã€AWS ELB</td></tr><tr><td>è®¡ç®—é›†ç¾¤ HPC</td><td>å¹¶è¡Œè®¡ç®—ï¼Œ<strong>CPU åŠ ä¸€èµ·ç®—</strong></td><td>Slurmã€Kubernetes Job</td></tr><tr><td>å­˜å‚¨é›†ç¾¤</td><td>å¤šç£ç›˜æ‹¼æˆç»Ÿä¸€å­˜å‚¨</td><td>Cephã€GlusterFSã€HDFS</td></tr></tbody></table>
<h3 data-id="heading-5">4. ç»å…¸æ¶æ„å›¾ï¼ˆä»¥ Web å±‚ä¸ºä¾‹ï¼‰</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">        â”Œâ”€â”€â”€&gt; èŠ‚ç‚¹ 1ï¼ˆNginxï¼‰
LBâ”€â”€â”¤   â”œâ”€â”€â”€&gt; èŠ‚ç‚¹ 2ï¼ˆNginxï¼‰   å¯¹å¤– VIP ç»Ÿä¸€å…¥å£
        â””â”€â”€â”€&gt; èŠ‚ç‚¹ 3ï¼ˆNginxï¼‰
</span></code></pre>
<ul>
<li>æ‰€æœ‰èŠ‚ç‚¹<strong>è·‘åŒä¸€å¥—ä»£ç </strong>ï¼›</li>
<li>ä¼šè¯åŒæ­¥ï¼ˆç²˜æ€§ä¼šè¯æˆ– Redisï¼‰ï¼›</li>
<li>å¥åº·æ£€æŸ¥å¤±è´¥å³å‰”é™¤ã€‚</li>
</ul>
<h3 data-id="heading-6">5. ä¼˜ç¼ºç‚¹</h3>
<p>âœ… ç®€å•ï¼šä»£ç é›¶æ”¹é€ <br/>
âœ… çº¿æ€§æ‰©å®¹ï¼šåŠ æœºå™¨å°±æå‡ QPS<br/>
âŒ å•ç‚¹æ•°æ®ä»åœ¨å•æœºï¼ˆä¾‹å¦‚ MySQL ä¸»åº“ï¼‰ï¼Œ<strong>é›†ç¾¤ â‰  æ•°æ®åˆ†å¸ƒå¼</strong></p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€åˆ†å¸ƒå¼ï¼ˆDistributedï¼‰è¯¦è§£</h2>
<h3 data-id="heading-8">1. å®šä¹‰</h3>
<blockquote>
<p>æŠŠ<strong>åŸæœ¬å•æœºå†…ä¸åŒåŠŸèƒ½</strong>æˆ–<strong>åŒä¸€åŠŸèƒ½çš„ä¸åŒæ•°æ®</strong>æ‹†åˆ°å¤šå°èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¹‹é—´<strong>é€šè¿‡ç½‘ç»œåä½œ</strong>ï¼Œå¯¹å¤–è¡¨ç°ä¸º<strong>ä¸€ä¸ªç³»ç»Ÿ</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-9">2. æ ¸å¿ƒç›®æ ‡</h3>
<ul>
<li><strong>æ‹†åˆ†</strong>ï¼ˆæ•°æ®/åŠŸèƒ½/è®¡ç®—ï¼‰</li>
<li><strong>è‡ªæ²»</strong>ï¼ˆå±€éƒ¨æ•…éšœä¸å½±å“å…¨å±€ï¼‰</li>
<li><strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼ˆCAP æƒè¡¡ï¼‰</li>
</ul>
<h3 data-id="heading-10">3. æ‹†åˆ†ç»´åº¦</h3>






























<table><thead><tr><th>ç»´åº¦</th><th>æ¡ˆä¾‹</th><th>äº§å“</th></tr></thead><tbody><tr><td>ä¸šåŠ¡åŠŸèƒ½</td><td>è®¢å•æœåŠ¡ã€ç”¨æˆ·æœåŠ¡ã€åº“å­˜æœåŠ¡<strong>ç‹¬ç«‹è¿›ç¨‹</strong></td><td>å¾®æœåŠ¡</td></tr><tr><td>æ•°æ®</td><td>æŒ‰ç”¨æˆ· ID å–æ¨¡æ‹†æˆ 32 åº“ 1024 è¡¨</td><td>åˆ†åº“åˆ†è¡¨ã€ShardingSphere</td></tr><tr><td>è®¡ç®—</td><td>Map èŠ‚ç‚¹ + Reduce èŠ‚ç‚¹å„å¹²å„çš„</td><td>Hadoop MapReduce</td></tr><tr><td>æ—¶ç©º</td><td>åŒä¸€ä»»åŠ¡æµæ°´çº¿ Stage1â†’Stage2</td><td>Flink æµå¤„ç†</td></tr></tbody></table>
<h3 data-id="heading-11">4. ç»å…¸æ¶æ„å›¾ï¼ˆå¾®æœåŠ¡ + åˆ†åº“åˆ†è¡¨ï¼‰</h3>
<pre><code class="hljs language-markdown" lang="markdown">API ç½‘å…³ â”€â”¬â”€&gt; è®¢å•æœåŠ¡ â”€â”€&gt; è®¢å•åº“ï¼ˆåˆ†ç‰‡ 0-31ï¼‰
<span class="hljs-code">          â”œâ”€&gt; ç”¨æˆ·æœåŠ¡ â”€â”€&gt; ç”¨æˆ·åº“
          â””â”€&gt; åº“å­˜æœåŠ¡ â”€â”€&gt; åº“å­˜åº“ï¼ˆåˆ†ç‰‡ 0-15ï¼‰
</span></code></pre>
<ul>
<li>æ¯ä¸ªæœåŠ¡<strong>ä»£ç ä¸åŒ</strong>ã€<strong>æ•°æ®ä¸åŒ</strong>ï¼›</li>
<li>èŠ‚ç‚¹å¤±è´¥åªå½±å“å±€éƒ¨ï¼›</li>
<li>éœ€è¦åˆ†å¸ƒå¼äº‹åŠ¡/æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</li>
</ul>
<h3 data-id="heading-12">5. ä¼˜ç¼ºç‚¹</h3>
<p>âœ… çªç ´å•æœºå®¹é‡ä¸Šé™ï¼ˆæ•°æ®ã€è®¡ç®—ï¼‰<br/>
âœ… ç‹¬ç«‹å‘å¸ƒã€å¼¹æ€§ä¼¸ç¼©<br/>
âŒ å¤æ‚ï¼šè¿œç¨‹è°ƒç”¨ã€å¹‚ç­‰ã€åˆ†å¸ƒå¼äº‹åŠ¡ã€è„‘è£‚ã€ç½‘ç»œåˆ†åŒº<br/>
âŒ å»¶è¿Ÿæ¯”æœ¬åœ°é«˜ 1~2 ä¸ªæ•°é‡çº§</p>
<hr/>
<h2 data-id="heading-13">å››ã€é›†ç¾¤ vs åˆ†å¸ƒå¼â€”â€”ä¸€å¥è¯å¯¹æ¯”</h2>








































<table><thead><tr><th>ç»´åº¦</th><th>é›†ç¾¤</th><th>åˆ†å¸ƒå¼</th></tr></thead><tbody><tr><td><strong>å•å…ƒå…³ç³»</strong></td><td>åŒæ„èŠ‚ç‚¹ï¼ˆé•œåƒï¼‰</td><td>å¼‚æ„èŠ‚ç‚¹ï¼ˆåˆ†å·¥ï¼‰</td></tr><tr><td><strong>é€æ˜æ€§</strong></td><td>å¯¹å®¢æˆ·ç«¯å‡ ä¹é€æ˜</td><td>éœ€è¦æœåŠ¡å‘ç°ã€ç½‘å…³</td></tr><tr><td><strong>æ‰©å±•ç›®æ ‡</strong></td><td>æå‡<strong>ååé‡</strong>&amp;<strong>å¯ç”¨æ€§</strong></td><td>æå‡<strong>å®¹é‡</strong>&amp;<strong>å¯ç»´æŠ¤æ€§</strong></td></tr><tr><td><strong>æ•…éšœèŒƒå›´</strong></td><td>èŠ‚ç‚¹çº§å†—ä½™ï¼Œæ•°æ®ä»å¯èƒ½å•ç‚¹</td><td>å±€éƒ¨æ•…éšœï¼Œæ•°æ®/è®¡ç®—å·²æ‹†åˆ†</td></tr><tr><td><strong>ä»£ç æ”¹é€ </strong></td><td>é›¶/å°‘é‡</td><td>å¿…é¡»ï¼ˆæ¥å£ã€æ•°æ®è·¯ç”±ã€å®¹é”™ï¼‰</td></tr><tr><td><strong>CAP ä¾§é‡</strong></td><td>ä¾§é‡ <strong>AP</strong>ï¼ˆé«˜å¯ç”¨ï¼‰</td><td>å¿…é¡»é¢å¯¹ <strong>CP/AP é€‰æ‹©</strong></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-14">äº”ã€ä¸ºä»€ä¹ˆæ€»æŠŠä¸¤è€…æ··ç”¨ï¼Ÿ</h2>
<blockquote>
<p>â€œåˆ†å¸ƒå¼â€é‡Œæ¯ä¸ªå­æœåŠ¡æœ¬èº«åˆå¯ä»¥æ˜¯â€œé›†ç¾¤â€â€”â€”<strong>æ—¢åˆ†å·¥åˆå¤åˆ¶</strong>ã€‚</p>
</blockquote>
<p><strong>ç”µå•†è®¢å•æ¶æ„ç¤ºä¾‹</strong></p>
<pre><code class="hljs">è®¢å•æœåŠ¡ï¼ˆé›†ç¾¤ 3 å‰¯æœ¬ï¼‰â”€â”€&gt; è®¢å•è¡¨ï¼ˆåˆ†ç‰‡ 0-15ï¼Œæ¯ç‰‡ 2 å‰¯æœ¬ï¼‰
</code></pre>
<ul>
<li><strong>åˆ†å¸ƒå¼</strong>ï¼šè®¢å•è¡¨æŒ‰ç”¨æˆ· ID æ‹†æˆ 16 ä¸ªåˆ†ç‰‡ â†’ <strong>æ•°æ®åˆ†å¸ƒå¼</strong></li>
<li><strong>é›†ç¾¤</strong>ï¼šæ¯ä¸ªåˆ†ç‰‡æœ‰ 2 å‰¯æœ¬ â†’ <strong>é«˜å¯ç”¨é›†ç¾¤</strong></li>
</ul>
<hr/>
<h2 data-id="heading-15">å…­ã€æ¼”è¿›è·¯çº¿ï¼ˆè€æ¿æœ€çˆ±é—®çš„â€œä¸‰æ­¥èµ°â€ï¼‰</h2>
<ol>
<li><strong>å•æœº</strong> â†’ <strong>é›†ç¾¤</strong>ï¼ˆå…ˆè§£å†³å¹¶å‘&amp;å¯ç”¨ï¼Œä¸åŠ¨ä»£ç ï¼‰</li>
<li><strong>é›†ç¾¤</strong> â†’ <strong>åˆ†å¸ƒå¼</strong>ï¼ˆæ•°æ®é‡/ç ”å‘è§„æ¨¡å˜å¤§ï¼Œå¼€å§‹æ‹†åˆ†ï¼‰</li>
<li><strong>åˆ†å¸ƒå¼</strong> â†’ <strong>æ··åˆäº‘/å¤šæ´»</strong>ï¼ˆåœ°åŸŸå®¹ç¾ã€å¼¹æ€§ã€æˆæœ¬ï¼‰</li>
</ol>
<hr/>
<h2 data-id="heading-16">ä¸ƒã€å¸¸è§äº§å“å¯¹ç…§è¡¨</h2>






























<table><thead><tr><th>åœºæ™¯</th><th>é›†ç¾¤äº§å“</th><th>åˆ†å¸ƒå¼äº§å“</th></tr></thead><tbody><tr><td>æ•°æ®å­˜å‚¨</td><td>MySQL MGRã€Redis Sentinel</td><td>MySQL Shardingã€TiDBã€CockroachDB</td></tr><tr><td>è®¡ç®—</td><td>Kubernetes ReplicaSet</td><td>Hadoop MapReduceã€Sparkã€Flink</td></tr><tr><td>æ¶ˆæ¯</td><td>â€”â€”</td><td>Kafkaã€Pulsarï¼ˆåˆ†åŒº+å‰¯æœ¬ï¼‰</td></tr><tr><td>åè°ƒ</td><td>â€”â€”</td><td>ZooKeeperã€etcdã€Consul</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-17">å…«ã€ä¸€å¼ å›¾æ€»ç»“ï¼ˆä¿å­˜å³å¯ï¼‰</h2>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">               å•æœº
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
     é›†ç¾¤ï¼ˆå¤åˆ¶ï¼‰    åˆ†å¸ƒå¼ï¼ˆæ‹†åˆ†ï¼‰
        â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â–¼
         ç°ä»£äº’è”ç½‘æ¶æ„
      ï¼ˆå¾®æœåŠ¡ + åˆ†ç‰‡ + å‰¯æœ¬ï¼‰
</span></code></pre>
<hr/>
<h2 data-id="heading-18">ä¹ã€ä¸€å¥è¯èƒŒä¸‹æ¥</h2>
<blockquote>
<p><strong>é›†ç¾¤</strong>è®©<strong>åŒä¸€å°æœåŠ¡</strong>å˜<strong>å¥½å¤šå°</strong>ï¼›<br/>
<strong>åˆ†å¸ƒå¼</strong>è®©<strong>ä¸€å°æœºå™¨çš„ä»»åŠ¡</strong>æ‹†æˆ<strong>å¥½å¤šå°æœºå™¨çš„ä»»åŠ¡</strong>ï¼›<br/>
çœŸæ­£çš„å¤§å‹ç³»ç»Ÿ = <strong>åˆ†å¸ƒå¼ + é›†ç¾¤</strong>â€”â€”<strong>æ—¢åˆ†å·¥åˆäººå¤š</strong>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ ä¼šå…ˆæ‰¾è¡Œè¿˜æ˜¯ç›´æ¥æ‹å¹³ï¼Ÿä¸¤ç§äºŒåˆ†ç­–ç•¥ä½ Pickå“ªä¸ªï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588149079417241654</link>    <guid>https://juejin.cn/post/7588149079417241654</guid>    <pubDate>2025-12-27T15:16:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588149079417241654" data-draft-id="7588149079417225270" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ ä¼šå…ˆæ‰¾è¡Œè¿˜æ˜¯ç›´æ¥æ‹å¹³ï¼Ÿä¸¤ç§äºŒåˆ†ç­–ç•¥ä½ Pickå“ªä¸ªï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-27T15:16:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ €ç§‹666"/> <meta itemprop="url" content="https://juejin.cn/user/2566698322650307"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ ä¼šå…ˆæ‰¾è¡Œè¿˜æ˜¯ç›´æ¥æ‹å¹³ï¼Ÿä¸¤ç§äºŒåˆ†ç­–ç•¥ä½ Pickå“ªä¸ªï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2566698322650307/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ €ç§‹666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T15:16:04.000Z" title="Sat Dec 27 2025 15:16:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼š</p>
<p>é¢è¯•å®˜è½»ææ·¡å†™åœ°æ‰”è¿‡æ¥ä¸€é“é¢˜ï¼šâ€œç»™ä½ ä¸€ä¸ª<strong>mÃ—n</strong>çš„çŸ©é˜µï¼Œæ¯è¡Œé€’å¢ï¼Œè€Œä¸”æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªæ•°éƒ½æ¯”ä¸Šä¸€è¡Œæœ€åä¸€ä¸ªå¤§â€¦â€¦é—®ä½ èƒ½ä¸èƒ½å¿«é€Ÿæ‰¾åˆ°æŸä¸ªç›®æ ‡å€¼ï¼Ÿâ€</p>
<p>ä½ å¿ƒé‡Œä¸€å’¯å™”ï¼š<br/>
ğŸ‘‰ è¿™ä¸æ˜¯æ™®é€šçš„äºŒç»´æ•°ç»„å•Šï¼Œè¿™ç®€ç›´æ˜¯<strong>å‡åºç•Œçš„å·ç‹ä¹‹ç‹</strong>ï¼</p>
<p>ç„¶åä½ çµå…‰ä¸€é—ªï¼š<br/>
ğŸ’¡ â€œç­‰ç­‰ï¼è¿™ä¸å°±æ˜¯ä¸ªâ€˜å‡è£…æ˜¯äºŒç»´â€™çš„ä¸€ç»´æ•°ç»„å—ï¼Ÿâ€</p>
<p>æ²¡é”™ï¼Œä»Šå¤©æˆ‘ä»¬è¦èŠçš„ï¼Œå°±æ˜¯ä¸€ä¸ªèƒ½è®©äºŒåˆ†æŸ¥æ‰¾ä»<strong>å¹³é¢ç›´è§’åæ ‡ç³»ç›´æ¥ç©¿è¶Šåˆ°æ•°è½´ä¸Šè·³èˆ</strong>çš„ç»å…¸é—®é¢˜ã€‚æˆ‘ä»¬ä¸è®²æ™¦æ¶©å…¬å¼ï¼Œåªç”¨æœ€æ¥åœ°æ°”çš„è¯­è¨€ï¼Œå¸¦ä½ æŠŠè¿™é“é¢˜â€œåƒå¹²æŠ¹å‡€â€ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ§© é—®é¢˜é•¿ä»€ä¹ˆæ ·ï¼Ÿå…ˆåˆ«æ…Œï¼Œå®ƒæ˜¯çº¸è€è™ï¼</h3>
<p>é¢˜ç›®å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsearch-a-2d-matrix%2Fdescription%2F" target="_blank" title="https://leetcode.cn/problems/search-a-2d-matrix/description/" ref="nofollow noopener noreferrer">74. æœç´¢äºŒç»´çŸ©é˜µ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cfb55e56f974ca8a2aeafbdb102a1c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qCA56eLNjY2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767453364&amp;x-signature=8cwCZDjIVPGiLaVNnv1uIaXUuOc%3D" alt="image.png" loading="lazy"/></p>
<p>çœ‹åˆ°è¿™ä¸ªç»“æ„ï¼Œèªæ˜çš„ä½ å·²ç»å‘ç°äº†å…³é”®ç‚¹ï¼š</p>
<p>âœ… <strong>æ•´ä¸ªçŸ©é˜µå±•å¼€åï¼Œå…¶å®æ˜¯ä¸€ä¸ªä¸¥æ ¼å‡åºçš„ä¸€ç»´æ•°ç»„ï¼</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢é‚£ä¸ªçŸ©é˜µç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-js" lang="js">[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">16</span>, <span class="hljs-number">20</span>, <span class="hljs-number">23</span>, <span class="hljs-number">30</span>, <span class="hljs-number">34</span>, <span class="hljs-number">60</span>] <span class="hljs-comment">// å®Œå…¨æœ‰åºï¼</span>
</code></pre>
<p>æ‰€ä»¥â€”â€”<br/>
ğŸ‰ æˆ‘ä»¬å¯ä»¥ç”¨<strong>äºŒåˆ†æŸ¥æ‰¾</strong>æ¥è§£å†³ï¼</p>
<p>ä½†é—®é¢˜æ˜¯ï¼šæ€ä¹ˆåœ¨â€œäºŒç»´ç©ºé—´â€é‡Œæâ€œä¸€ç»´æ“ä½œâ€ï¼Ÿ</p>
<p>è¿™å°±å¼•å‡ºäº†ä¸¤ç§ç¥ä»™æ€è·¯ğŸ‘‡</p>
<hr/>
<h3 data-id="heading-2">ğŸš€ æ–¹æ³•ä¸€ï¼šä¸¤æ¬¡äºŒåˆ† â€”â€” å…ˆæ‰¾å°åŒºå†æ•²é—¨</h3>
<p>æƒ³è±¡ä¸€ä¸‹ä½ åœ¨ä¸€æ ‹é«˜æ¡£å…¬å¯“æ¥¼é‡Œæ‰¾æœ‹å‹ï¼š</p>
<ul>
<li>å¤§æ¥¼æœ‰ <code>m</code> å±‚ï¼ˆå¯¹åº”è¡Œï¼‰</li>
<li>æ¯å±‚æœ‰ <code>n</code> æˆ·ï¼ˆå¯¹åº”åˆ—ï¼‰</li>
<li>æ‰€æœ‰æˆ¿é—´å·æŒ‰é¡ºåºæ’åˆ—ï¼Œä¸”ä¸‹ä¸€å±‚ç¬¬ä¸€ä¸ªæˆ¿é—´å· &gt; ä¸Šä¸€å±‚æœ€åä¸€ä¸ª</li>
</ul>
<p>ä½ è¦æ‰¾ä½åœ¨â€œæˆ¿é—´å·=11â€çš„è€å¼ ã€‚</p>
<p>ä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
<p>ğŸ§  å½“ç„¶æ˜¯ï¼š</p>
<ol>
<li>å…ˆçœ‹æ¯å±‚çš„<strong>ç¬¬ä¸€æˆ·é—¨ç‰Œå·</strong>ï¼Œç¡®å®šä»–åœ¨å“ªä¸€å±‚ï¼›</li>
<li>ç„¶åå†å»é‚£å±‚æŒ¨å®¶æŒ¨æˆ·æ•²é—¨æ‰¾ä»–ã€‚</li>
</ol>
<p>è¿™å°±æ˜¯<strong>ä¸¤æ¬¡äºŒåˆ†æ³•</strong>çš„æ ¸å¿ƒæ€æƒ³ï¼</p>
<h4 data-id="heading-3">âœ… ç¬¬ä¸€æ­¥ï¼šäºŒåˆ†æ‰¾â€œå¯èƒ½ä½çš„é‚£ä¸€è¡Œâ€</h4>
<p>æˆ‘ä»¬å¯¹<strong>ç¬¬ä¸€åˆ—</strong>è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾çš„æ˜¯ï¼š</p>
<blockquote>
<p>â€œæœ€åä¸€ä¸ªé¦–å…ƒç´  â‰¤ targetâ€çš„é‚£ä¸€è¡Œ</p>
</blockquote>
<p>ä¸ºä»€ä¹ˆæ˜¯â€œæœ€åä¸€ä¸ªâ€ï¼Ÿå› ä¸ºåé¢çš„è¡Œå¼€å¤´å°±å¤ªå¤§äº†ï¼Œä¸å¯èƒ½æœ‰ç›®æ ‡ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œtarget = 11ï¼š</p>





















<table><thead><tr><th>è¡Œ</th><th>é¦–å…ƒç´ </th></tr></thead><tbody><tr><td>0</td><td>1</td></tr><tr><td>1</td><td>10</td></tr><tr><td>2</td><td>23</td></tr></tbody></table>
<p>æ˜¾ç„¶ï¼Œç¬¬2è¡Œå¼€å§‹é¦–å…ƒç´ 23 &gt; 11ï¼Œæ‰€ä»¥åªèƒ½åœ¨ç¬¬0æˆ–ç¬¬1è¡Œã€‚è€Œæˆ‘ä»¬è¦æ‰¾çš„æ˜¯â€œæœ€åä¸€ä¸ªå°äºç­‰äº11çš„é¦–å…ƒç´ â€ï¼Œé‚£å°±æ˜¯ç¬¬1è¡Œï¼ˆ10 â‰¤ 11ï¼‰ã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬é”å®šï¼š<strong>ç›®æ ‡æœ€å¤šåªèƒ½å‡ºç°åœ¨ç¬¬1è¡Œï¼</strong></p>
<h4 data-id="heading-4">âœ… ç¬¬äºŒæ­¥ï¼šåœ¨è¿™è¡Œå†…éƒ¨å†äºŒåˆ†æŸ¥æ‰¾</h4>
<p>ç¬¬1è¡Œæ˜¯ <code>[10, 11, 16, 20]</code>ï¼Œæ ‡å‡†å‡åºæ•°ç»„ï¼Œç›´æ¥å¥—æ¨¡æ¿äºŒåˆ†å³å¯ã€‚</p>
<p>æ‰¾åˆ°äº†11 â†’ è¿”å› <code>true</code>ï¼</p>
<p>ğŸ¯ æˆåŠŸå®šä½ï¼Œå°±åƒå¿«é€’å°å“¥ç²¾å‡†æŠ•é€’ï¼</p>
<h4 data-id="heading-5">ğŸ’¡ å…³é”®ç»†èŠ‚ï¼šé¿å…æ­»å¾ªç¯çš„å°æŠ€å·§</h4>
<p>åœ¨æ‰¾è¡Œçš„æ—¶å€™ï¼Œä¸ºäº†é¿å… <code>low</code> å’Œ <code>high</code> å¡ä½ä¸åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦å‘ä¸Šå–æ•´ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((high - low + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>) + low;
</code></pre>
<p>å¦åˆ™å½“ <code>low=0, high=1</code> æ—¶ï¼Œ<code>mid</code> æ°¸è¿œæ˜¯0ï¼Œå°±ä¼šé™·å…¥æ— é™å¾ªç¯â€”â€”ç›¸å½“äºä½ ä¸€ç›´åœ¨ä¸€æ¥¼å¾˜å¾Šï¼Œä¸æ•¢ä¸ŠäºŒæ¥¼ ğŸ˜µâ€ğŸ’«</p>
<hr/>
<h3 data-id="heading-6">ğŸš€ æ–¹æ³•äºŒï¼šä¸€æ¬¡äºŒåˆ† â€”â€” æŠŠäºŒç»´å‹æˆä¸€ç»´ï¼Œâ€œé™ç»´æ‰“å‡»â€ï¼</h3>
<p>å¦‚æœè¯´æ–¹æ³•ä¸€æ˜¯â€œä¸€æ­¥æ­¥æ¨ç†â€ï¼Œé‚£æ–¹æ³•äºŒå°±æ˜¯â€œå¼€æŒ‚æ¨¡å¼â€ï¼</p>
<p>å®ƒçš„å“²å­¦æ˜¯ï¼š</p>
<blockquote>
<p>â€œæˆ‘ä¸ç®¡ä½ æ˜¯å‡ ç»´ï¼Œåªè¦æ•´ä½“æœ‰åºï¼Œæˆ‘å°±å½“ä½ æ˜¯ä¸€æ¡ç›´çº¿ï¼â€</p>
</blockquote>
<h4 data-id="heading-7">ğŸŒ€ æ€è·¯ç²¾é«“ï¼šè™šæ‹Ÿä¸€ç»´æ•°ç»„ + ä¸‹æ ‡æ˜ å°„</h4>
<p>å‡è®¾çŸ©é˜µæ˜¯ <code>m Ã— n</code>ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹ä½œä¸€ä¸ªé•¿åº¦ä¸º <code>m * n</code> çš„ä¸€ç»´æ•°ç»„ã€‚</p>
<p>å¦‚ä½•å°†ä¸€ç»´ä¸‹æ ‡ <code>k</code> æ˜ å°„å›äºŒç»´åæ ‡ï¼Ÿ</p>
<p>âœ¨ ç­”æ¡ˆéå¸¸ä¼˜é›…ï¼š</p>
<pre><code class="hljs language-js" lang="js">row = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(k / n);   <span class="hljs-comment">// ç¬¬å‡ è¡Œ</span>
col = k % n;               <span class="hljs-comment">// ç¬¬å‡ åˆ—</span>
</code></pre>
<p>æ˜¯ä¸æ˜¯åƒæäº†å°æ—¶å€™å­¦çš„â€œæ’åº§ä½â€ï¼Ÿ</p>
<p>æ¯”å¦‚ä¸€å…±4åˆ—ï¼š</p>
<ul>
<li>ç¬¬0ä¸ªåŒå­¦ â†’ ç¬¬0è¡Œç¬¬0åˆ—</li>
<li>ç¬¬5ä¸ªåŒå­¦ â†’ ç¬¬1è¡Œç¬¬1åˆ—ï¼ˆ5 Ã· 4 = 1ä½™1ï¼‰</li>
</ul>
<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ•´ä¸ªâ€œè™šæ‹Ÿæ•°ç»„â€ä¸ŠåšäºŒåˆ†æŸ¥æ‰¾ï¼</p>
<h4 data-id="heading-8">ğŸ” å®æˆ˜æ¼”ç¤ºï¼štarget = 11</h4>
<p>æ€»é•¿åº¦ = 3Ã—4 = 12ï¼Œåˆå§‹èŒƒå›´ <code>[0, 11]</code></p>
<p>ä¸­é—´ä¸‹æ ‡ <code>mid = 5</code> â†’ å¯¹åº”ä½ç½®æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js">row = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-number">5</span> / <span class="hljs-number">4</span>) = <span class="hljs-number">1</span>
col = <span class="hljs-number">5</span> % <span class="hljs-number">4</span> = <span class="hljs-number">1</span>
â†’ matrix[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">11</span> âœ… æ‰¾åˆ°äº†ï¼
</code></pre>
<p>boomï¼ä¸€å‡»å¿…ä¸­ï¼</p>
<hr/>
<h3 data-id="heading-9">ğŸ†š ä¸¤ç§æ–¹æ³•å¯¹æ¯”ï¼šè°æ›´é€‚åˆä½ ï¼Ÿ</h3>








































<table><thead><tr><th>ç»´åº¦</th><th>ä¸¤æ¬¡äºŒåˆ†æ³•</th><th>ä¸€æ¬¡äºŒåˆ†æ³•</th></tr></thead><tbody><tr><td>æ—¶é—´å¤æ‚åº¦</td><td>O(log m + log n) = O(log mn)</td><td>O(log mn)</td></tr><tr><td>ç©ºé—´å¤æ‚åº¦</td><td>O(1)</td><td>O(1)</td></tr><tr><td>ä»£ç é•¿åº¦</td><td>ç¨é•¿ï¼ˆä¸¤ä¸ªå‡½æ•°ï¼‰</td><td>è¶…çŸ­ï¼ˆ10è¡Œæå®šï¼‰</td></tr><tr><td>é€»è¾‘æ¸…æ™°åº¦</td><td>åˆ†æ­¥æ€è€ƒï¼Œé€‚åˆæ•™å­¦</td><td>æ•°å­¦ç¾æ„Ÿå¼ºï¼Œé€‚åˆè£…X</td></tr><tr><td>è¾¹ç•Œå¤„ç†éš¾åº¦</td><td>ç¬¬ä¸€åˆ—äºŒåˆ†éœ€å°å¿ƒ</td><td>ç›¸å¯¹ç®€å•</td></tr><tr><td>æ¨èæŒ‡æ•°</td><td>â­â­â­â­â˜†</td><td>â­â­â­â­â­</td></tr></tbody></table>
<h4 data-id="heading-10">ğŸ¤” å¦‚ä½•é€‰æ‹©ï¼Ÿ</h4>
<ul>
<li>å¦‚æœä½ æ˜¯<strong>åˆå­¦è€…</strong>ï¼Œå»ºè®®å…ˆæŒæ¡ä¸¤æ¬¡äºŒåˆ†æ³•â€”â€”å®ƒæ›´ç¬¦åˆç›´è§‰ï¼Œåƒæ˜¯èµ°è·¯ï¼šå…ˆè¿ˆå·¦è„šï¼Œå†è¿ˆå³è„šã€‚</li>
<li>å¦‚æœä½ æ˜¯<strong>è€å¸æœº</strong>ï¼Œç›´æ¥ä¸Šä¸€æ¬¡äºŒåˆ†æ³•ï¼Œä»£ç ç®€æ´å¾—åƒè¯—ä¸€æ ·ï¼Œé¢è¯•å®˜çœ‹äº†éƒ½æƒ³é¼“æŒğŸ‘</li>
</ul>
<hr/>
<h3 data-id="heading-11">ğŸ¯ æˆ‘çš„ç‹¬ç‰¹ç†è§£ï¼šè¿™ä¸æ˜¯â€œä¸¤ç§æ–¹æ³•â€ï¼Œè€Œæ˜¯â€œä¸¤ç§æ€ç»´æ–¹å¼â€</h3>
<p>å¾ˆå¤šäººè¯´ï¼šâ€œå“¦ï¼Œä¸€ä¸ªæ˜¯åˆ†æ²»ï¼Œä¸€ä¸ªæ˜¯æ˜ å°„ã€‚â€<br/>
æˆ‘è¯´ï¼š<strong>é”™ï¼è¿™æ˜¯ä¸¤ç§äººç”Ÿå“²å­¦ï¼</strong></p>
<ul>
<li>
<p><strong>ä¸¤æ¬¡äºŒåˆ†æ³•</strong>åƒæ˜¯â€œç¨³æ‰ç¨³æ‰“å‹é€‰æ‰‹â€ï¼š</p>
<blockquote>
<p>â€œæˆ‘ä¸æ€¥ï¼Œå…ˆç¼©å°èŒƒå›´ï¼Œå†ç²¾ç¡®æ‰“å‡»ã€‚â€<br/>
ç±»ä¼¼äºç”Ÿæ´»ä¸­é‚£äº›åšäº‹æœ‰è®¡åˆ’ã€æ­¥æ­¥ä¸ºè¥çš„äººã€‚</p>
</blockquote>
</li>
<li>
<p><strong>ä¸€æ¬¡äºŒåˆ†æ³•</strong>åˆ™æ˜¯â€œå…¨å±€è§†è§’å‹å¤©æ‰â€ï¼š</p>
<blockquote>
<p>â€œä½ ä»¬è¿˜åœ¨çº ç»“ç»´åº¦ï¼Ÿæˆ‘å·²ç»æŠŠå®ƒæ‹å¹³äº†ï¼â€<br/>
å°±åƒé©¬æ–¯å…‹è¯´çš„ï¼šâ€œä¸è¦è¢«è¡¨è±¡è¿·æƒ‘ï¼ŒæŠ“ä½æœ¬è´¨ã€‚â€</p>
</blockquote>
</li>
</ul>
<p>è€Œè¿™é“é¢˜çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ğŸ”‘ <strong>åªè¦æ•°æ®æ•´ä½“æœ‰åºï¼Œç»´åº¦åªæ˜¯éšœçœ¼æ³•ï¼</strong></p>
<p>ä½ å¯ä»¥æŠŠå®ƒå½“æˆä¸€å¼ è¡¨æ ¼ï¼Œä¹Ÿå¯ä»¥å½“æˆä¸€æ¡çº¿ï¼Œç”šè‡³å¯ä»¥å½“æˆä¸€éƒ¨ç”µå½±çš„æ—¶é—´è½´â€”â€”åªè¦ä½ èƒ½æ‰¾åˆ°â€œé¡ºåºâ€çš„é”šç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-12">ğŸ› ï¸ å®é™…ä»£ç å®ç°ï¼ˆå¯ç›´æ¥å¤åˆ¶ç²˜è´´ï¼‰</h3>
<h4 data-id="heading-13">âœ… æ–¹æ³•ä¸€ï¼šä¸¤æ¬¡äºŒåˆ†ï¼ˆæ¨èå­¦ä¹ ç”¨ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> searchMatrix = <span class="hljs-keyword">function</span>(<span class="hljs-params">matrix, target</span>) {
    <span class="hljs-comment">// æ‰¾åˆ°å¯èƒ½åŒ…å« target çš„æœ€åä¸€è¡Œï¼ˆåŸºäºé¦–åˆ—ï¼‰</span>
    <span class="hljs-keyword">let</span> low = -<span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> high = matrix.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
    
    <span class="hljs-keyword">while</span> (low &lt; high) {
        <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((high - low + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>) + low;
        <span class="hljs-keyword">if</span> (matrix[mid][<span class="hljs-number">0</span>] &lt;= target) {
            low = mid;
        } <span class="hljs-keyword">else</span> {
            high = mid - <span class="hljs-number">1</span>;
        }
    }

    <span class="hljs-keyword">if</span> (low === -<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ¯”æœ€å°çš„è¿˜å°</span>

    <span class="hljs-comment">// åœ¨è¯¥è¡Œå†…è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾</span>
    <span class="hljs-keyword">const</span> row = matrix[low];
    <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>, right = row.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (left &lt;= right) {
        <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((right - left) / <span class="hljs-number">2</span>) + left;
        <span class="hljs-keyword">if</span> (row[mid] === target) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (row[mid] &gt; target) {
            right = mid - <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
            left = mid + <span class="hljs-number">1</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};
</code></pre>
<h4 data-id="heading-14">âœ… æ–¹æ³•äºŒï¼šä¸€æ¬¡äºŒåˆ†ï¼ˆæ¨èå®æˆ˜ç”¨ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> searchMatrix = <span class="hljs-keyword">function</span>(<span class="hljs-params">matrix, target</span>) {
    <span class="hljs-keyword">const</span> m = matrix.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> n = matrix[<span class="hljs-number">0</span>].<span class="hljs-property">length</span>;
    <span class="hljs-keyword">let</span> low = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> high = m * n - <span class="hljs-number">1</span>;

    <span class="hljs-keyword">while</span> (low &lt;= high) {
        <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((high - low) / <span class="hljs-number">2</span>) + low;
        <span class="hljs-keyword">const</span> val = matrix[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(mid / n)][mid % n];

        <span class="hljs-keyword">if</span> (val &lt; target) {
            low = mid + <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val &gt; target) {
            high = mid - <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};
</code></pre>
<blockquote>
<p>âš¡ æç¤ºï¼šèƒŒä¸‹è¿™ä¸ªä¸‹æ ‡æ˜ å°„å…¬å¼ï¼Œå…³é”®æ—¶åˆ»èƒ½æ•‘ä½ ä¸€å‘½ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-15">ğŸŒŸ å†™åœ¨æœ€åï¼šå­¦ä¼šâ€œé™ç»´â€ï¼Œæ‰èƒ½è·³å‡ºé¢˜æµ·</h3>
<p>å¾ˆå¤šåˆ·é¢˜äººé™·å…¥å›°å¢ƒçš„åŸå› æ˜¯ï¼š</p>
<blockquote>
<p>â€œæˆ‘åšäº†100é“äºŒåˆ†é¢˜ï¼Œæ€ä¹ˆæ¢äº†ä¸ªé©¬ç”²å°±ä¸è®¤è¯†äº†ï¼Ÿâ€</p>
</blockquote>
<p>å› ä¸ºä½ è®°å¾—çš„æ˜¯â€œå½¢å¼â€ï¼Œè€Œä¸æ˜¯â€œçµé­‚â€ã€‚</p>
<p>çœŸæ­£çš„é«˜æ‰‹ï¼Œçœ‹åˆ°è¿™ç§çŸ©é˜µä¸ä¼šæƒ³â€œäºŒç»´æ€ä¹ˆæâ€ï¼Œè€Œæ˜¯é—®è‡ªå·±ï¼š</p>
<p>â“ â€œè¿™ä¸ªç»“æ„æœ‰æ²¡æœ‰å…¨å±€æœ‰åºæ€§ï¼Ÿâ€<br/>
â“ â€œèƒ½ä¸èƒ½æŠŠå®ƒå˜æˆæˆ‘èƒ½å¤„ç†çš„å½¢å¼ï¼Ÿâ€</p>
<p>ä¸€æ—¦ä½ æŒæ¡äº†è¿™ç§<strong>åŒ–å½’æ€ç»´</strong>ï¼Œä½ ä¼šå‘ç°ï¼š</p>
<ul>
<li>æ—‹è½¬æ’åºæ•°ç»„ï¼Ÿâ†’ æ‰¾æ–­ç‚¹ â†’ é™ç»´å¤„ç†</li>
<li>å±±è„‰æ•°ç»„æ‰¾å³°å€¼ï¼Ÿâ†’ åˆ©ç”¨å•è°ƒæ€§ â†’ äºŒåˆ†æ”¶ç¼©</li>
<li>äºŒç»´æœç´¢ï¼Ÿâ†’ æ‰å¹³åŒ– â†’ å½“ä½œä¸€ç»´</li>
</ul>
<p>ğŸš€ æ‰€è°“ç®—æ³•èƒ½åŠ›ï¼Œä¸æ˜¯è®°å¿†å¥—è·¯ï¼Œè€Œæ˜¯<strong>ä¸æ–­æŠŠæ–°é—®é¢˜ç¿»è¯‘æˆæ—§çŸ¥è¯†çš„èƒ½åŠ›</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-16">â¤ï¸ ç»“è¯­ï¼šæ„¿ä½ ä¹Ÿèƒ½åœ¨ä»£ç ä¸–ç•Œé‡Œâ€œä»¥æ— åšå…¥æœ‰é—´â€</h3>
<p>åº„å­è¯´ï¼šâ€œå½¼èŠ‚è€…æœ‰é—´ï¼Œè€Œåˆ€åˆƒè€…æ— åšï¼Œä»¥æ— åšå…¥æœ‰é—´ï¼Œæ¢æ¢ä¹å…¶äºæ¸¸åˆƒå¿…æœ‰ä½™åœ°çŸ£ã€‚â€</p>
<p>ç¿»è¯‘æˆç¨‹åºå‘˜è¯­è¨€å°±æ˜¯ï¼š</p>
<blockquote>
<p>åªè¦ä½ æ‰¾å¯¹äº†çªç ´å£ï¼ˆæœ‰åºæ€§ï¼‰ï¼Œå“ªæ€•é—®é¢˜çœ‹èµ·æ¥åšä¸å¯æ‘§ï¼ˆäºŒç»´+åµŒå¥—ï¼‰ï¼Œä½ çš„ç®—æ³•ä¹Ÿèƒ½åƒä¸€æŠŠè–„åˆƒï¼Œè½»æ¾æ»‘è¿›å»ï¼Œå’”åš“ä¸€å£°â€”â€”æå®šï¼</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ooder A2UIæ¶æ„ç™½çš®ä¹¦]]></title>    <link>https://juejin.cn/post/7588300640598949894</link>    <guid>https://juejin.cn/post/7588300640598949894</guid>    <pubDate>2025-12-27T15:20:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640598949894" data-draft-id="7588300640598933510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ooder A2UIæ¶æ„ç™½çš®ä¹¦"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å“åº”å¼ç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-27T15:20:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ooder A2UIæ¶æ„ç™½çš®ä¹¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T15:20:24.000Z" title="Sat Dec 27 2025 15:20:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1å°æ—¶+
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Ooder A2UIæ¶æ„ç™½çš®ä¹¦</h2>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol>
<li><a href="#1-%E6%A6%82%E8%BF%B0" title="#1-%E6%A6%82%E8%BF%B0">æ¦‚è¿°</a>
<ul>
<li>1.1 ä»€ä¹ˆæ˜¯Ooder A2UI</li>
<li>1.2 è®¾è®¡ç›®æ ‡</li>
<li>1.3 é€‚ç”¨åœºæ™¯</li>
</ul>
</li>
<li><a href="#2-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1" title="#2-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1">æ¶æ„è®¾è®¡</a>
<ul>
<li>2.1 æ•´ä½“æ¶æ„</li>
<li>2.2 åˆ†å±‚è®¾è®¡</li>
<li>2.3 å‰åç«¯å¼ºæ˜ å°„å…³ç³»</li>
</ul>
</li>
<li><a href="#3-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5" title="#3-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">æ ¸å¿ƒæ¦‚å¿µ</a>
<ul>
<li>3.1 å››åˆ†ç¦»è®¾è®¡åŸåˆ™</li>
<li>3.2 æ³¨è§£é©±åŠ¨å¼€å‘</li>
<li>3.3 é™æ€æ¨¡æ¿æ¸²æŸ“</li>
<li>3.4 DTO/VOä¸€ä½“åŒ–</li>
<li>3.5 ç¼–è¯‘æœŸé™æ€è½¬æ¢</li>
<li>3.6 è¿è¡ŒæœŸåŠ¨æ€è£…é…</li>
</ul>
</li>
<li><a href="#4-%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6" title="#4-%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6">æ ¸å¿ƒç»„ä»¶</a>
<ul>
<li>4.1 æ³¨è§£ä½“ç³»</li>
<li>4.2 è§†å›¾ç»„ä»¶</li>
<li>4.3 æœåŠ¡ç»„ä»¶</li>
<li>4.4 é€šè®¯ç»„ä»¶</li>
<li>4.5 Pageæœºåˆ¶</li>
</ul>
</li>
<li><a href="#5-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" title="#5-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">å·¥ä½œåŸç†</a>
<ul>
<li>5.1 ç¼–è¯‘æœŸæµç¨‹</li>
<li>5.2 è¿è¡ŒæœŸæµç¨‹</li>
<li>5.3 æ•°æ®æµå‘</li>
<li>5.4 äº‹ä»¶å¤„ç†</li>
</ul>
</li>
<li><a href="#6-%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B" title="#6-%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B">å¼€å‘æµç¨‹</a>
<ul>
<li>6.1 éœ€æ±‚åˆ†æ</li>
<li>6.2 è§†å›¾è®¾è®¡</li>
<li>6.3 æœåŠ¡å®ç°</li>
<li>6.4 ç³»ç»Ÿé›†æˆ</li>
<li>6.5 éƒ¨ç½²ä¸Šçº¿</li>
</ul>
</li>
<li><a href="#7-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#7-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a>
<ul>
<li>7.1 æ³¨è§£ä½¿ç”¨è§„èŒƒ</li>
<li>7.2 è§†å›¾è®¾è®¡åŸåˆ™</li>
<li>7.3 æœåŠ¡è®¾è®¡åŸåˆ™</li>
<li>7.4 æ€§èƒ½ä¼˜åŒ–</li>
</ul>
</li>
<li><a href="#8-%E4%B8%8E%E5%85%B6%E4%BB%96%E6%A1%86%E6%9E%B6%E6%AF%94%E8%BE%83" title="#8-%E4%B8%8E%E5%85%B6%E4%BB%96%E6%A1%86%E6%9E%B6%E6%AF%94%E8%BE%83">ä¸å…¶ä»–æ¡†æ¶æ¯”è¾ƒ</a>
<ul>
<li>8.1 ä¸React/Vueæ¯”è¾ƒ</li>
<li>8.2 ä¸ä¼ ç»ŸJSP/ASPæ¯”è¾ƒ</li>
<li>8.3 ä¸ä½ä»£ç å¹³å°æ¯”è¾ƒ</li>
</ul>
</li>
<li><a href="#9-%E6%9C%AA%E6%9D%A5%E5%8F%91%E5%B1%95%E6%96%B9%E5%90%91" title="#9-%E6%9C%AA%E6%9D%A5%E5%8F%91%E5%B1%95%E6%96%B9%E5%90%91">æœªæ¥å‘å±•æ–¹å‘</a>
<ul>
<li>9.1 AIå¢å¼º</li>
<li>9.2 äº‘åŸç”Ÿæ”¯æŒ</li>
<li>9.3 å¾®æœåŠ¡é›†æˆ</li>
<li>9.4 è·¨å¹³å°æ”¯æŒ</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">1. æ¦‚è¿°</h3>
<h4 data-id="heading-3">1.1 ä»€ä¹ˆæ˜¯Ooder A2UI</h4>
<p>Ooder A2UIæ˜¯ä¸€å¥—åŸºäº<strong>æ³¨è§£é©±åŠ¨+é™æ€ç¼–è¯‘+åŠ¨æ€è£…é…</strong>çš„å…¨æ ˆæ¡†æ¶ï¼Œé€šè¿‡<strong>å‰åç«¯å¼ºæ˜ å°„</strong>å’Œ<strong>DTO/VOä¸€ä½“åŒ–</strong>è®¾è®¡ï¼Œè§£å†³ä¼ ç»Ÿä¼ä¸šçº§å¼€å‘ä¸­"å‰åç«¯ååŒæˆæœ¬é«˜ã€ä»£ç ä¸€è‡´æ€§éš¾ä¿éšœã€AIç”Ÿæˆä»£ç è´¨é‡ä½"ä¸‰å¤§æ ¸å¿ƒç—›ç‚¹ã€‚å…¶åˆ›æ–°çš„<strong>å››åˆ†ç¦»è®¾è®¡åŸåˆ™</strong>ï¼Œå°†ç»„ä»¶çš„å±æ€§ã€æ ·å¼ã€äº‹ä»¶ã€è¡Œä¸ºè§£è€¦ï¼Œæ—¢ä¿è¯äº†å¼€å‘çµæ´»æ€§ï¼Œåˆä¸ºç»“æ„åŒ–çš„AIä»£ç ç”Ÿæˆæä¾›äº†æ ‡å‡†åŒ–è½½ä½“ã€‚</p>
<p>Ooder A2UIçš„æ ¸å¿ƒä»·å€¼åœ¨äºé€šè¿‡å£°æ˜å¼æ³¨è§£é…ç½®ï¼Œå°†å‰ç«¯ç•Œé¢ã€åç«¯æœåŠ¡å’Œé€šè®¯æœºåˆ¶æœ‰æœºåœ°ç»“åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„ã€å¯ç»´æŠ¤çš„åº”ç”¨ç³»ç»Ÿã€‚å®ƒç‰¹åˆ«é€‚åˆAIç”Ÿæˆä»£ç ï¼ˆA2UI - AI to UIï¼‰çš„åœºæ™¯ï¼Œé€šè¿‡ç»“æ„åŒ–çš„è®¾è®¡å’Œå¼ºç±»å‹æ˜ å°„ï¼Œä½¿AIèƒ½å¤Ÿæ›´å®¹æ˜“åœ°ç†è§£å’Œç”Ÿæˆé«˜è´¨é‡çš„ä»£ç ã€‚</p>
<h4 data-id="heading-4">1.2 è®¾è®¡ç›®æ ‡</h4>
<ul>
<li><strong>ç®€åŒ–å¼€å‘æµç¨‹</strong>ï¼šé€šè¿‡æ³¨è§£é©±åŠ¨å¼€å‘ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡</li>
<li><strong>å‰åç«¯ä¸€è‡´æ€§</strong>ï¼šé€šè¿‡å¼ºæ˜ å°„å…³ç³»ç¡®ä¿å‰åç«¯è¡Œä¸ºä¸€è‡´</li>
<li><strong>æ˜“äºç»´æŠ¤å’Œæ‰©å±•</strong>ï¼šé‡‡ç”¨ä¸¥æ ¼çš„åˆ†å±‚è®¾è®¡ï¼Œä¾¿äºä»£ç ç»´æŠ¤å’ŒåŠŸèƒ½æ‰©å±•</li>
<li><strong>æ”¯æŒAIç”Ÿæˆ</strong>ï¼šç»“æ„åŒ–çš„è®¾è®¡ä¾¿äºAIç†è§£å’Œç”Ÿæˆä»£ç </li>
<li><strong>ä¼ä¸šçº§æ”¯æŒ</strong>ï¼šé€‚åˆæ„å»ºå¤æ‚çš„ä¼ä¸šçº§åº”ç”¨</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šé™æ€æ¨¡æ¿æ¸²æŸ“æœºåˆ¶ï¼Œåˆå§‹åŠ è½½å¿«</li>
<li><strong>ç»„ä»¶åŒ–è®¾è®¡</strong>ï¼šé«˜åº¦ç»„ä»¶åŒ–ï¼Œæé«˜ä»£ç å¤ç”¨ç‡</li>
</ul>
<h4 data-id="heading-5">1.3 é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>ä¼ä¸šèµ„æºè§„åˆ’ï¼ˆERPï¼‰ç³»ç»Ÿ</li>
<li>å®¢æˆ·å…³ç³»ç®¡ç†ï¼ˆCRMï¼‰ç³»ç»Ÿ</li>
<li>äººåŠ›èµ„æºç®¡ç†ï¼ˆHRMï¼‰ç³»ç»Ÿ</li>
<li>å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰</li>
<li>å„ç±»ç®¡ç†åå°å’Œæ§åˆ¶å°</li>
<li>å¤æ‚è¡¨å•å¤„ç†ç³»ç»Ÿ</li>
<li>æ•°æ®å¯è§†åŒ–ç³»ç»Ÿ</li>
<li>ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿ</li>
</ul>
<h3 data-id="heading-6">2. æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-7">2.1 æ•´ä½“æ¶æ„</h4>
<p>Ooder A2UIé‡‡ç”¨å‰åç«¯ä¸€ä½“åŒ–çš„æ¶æ„è®¾è®¡ï¼Œé€šè¿‡æ³¨è§£å°†å‰åç«¯ç´§å¯†ç»‘å®šã€‚å¹³å°éµå¾ªå…¨æ ˆæ¶æ„è®¾è®¡ç†å¿µï¼Œå°†å‰ç«¯è®¾è®¡ã€åç«¯å¾®æœåŠ¡å’Œé€šè®¯ç»„ä»¶åˆ†ç¦»ï¼Œæ„å»ºäº†ä¸€ä¸ªçµæ´»ã€å¯æ‰©å±•çš„åº”ç”¨æ¶æ„ã€‚</p>
<p><strong>æ ¸å¿ƒæ¶æ„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å‰åç«¯æ— ç¼é›†æˆï¼Œé€šè¿‡æ³¨è§£å®ç°å¼ºæ˜ å°„å…³ç³»</li>
<li>ç»„ä»¶åŒ–è®¾è®¡ï¼Œæ”¯æŒé«˜åº¦å¤ç”¨</li>
<li>æ¨¡å—åŒ–æ¶æ„ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤</li>
<li>æ”¯æŒå¾®æœåŠ¡æ¶æ„ï¼Œå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§</li>
</ul>
<h4 data-id="heading-8">2.2 åˆ†å±‚è®¾è®¡</h4>
<p>Ooder A2UIé‡‡ç”¨ä¸¥æ ¼çš„ä¸‰å±‚åˆ†ç¦»è®¾è®¡ï¼Œå„å±‚èŒè´£æ˜ç¡®ï¼Œè¾¹ç•Œæ¸…æ™°ï¼š</p>
<h5 data-id="heading-9">2.2.0 è¾¹ç•Œä¸äº¤äº’è§„èŒƒ</h5>





























<table><thead><tr><th>åˆ†å±‚</th><th>è¾“å…¥</th><th>è¾“å‡º</th><th>ä¾èµ–é™åˆ¶</th></tr></thead><tbody><tr><td>è§†å›¾å±‚</td><td>PageCtxä¸Šä¸‹æ–‡ã€åç«¯JSONæ•°æ®</td><td>å‰ç«¯æ¸²æŸ“DOMã€ç”¨æˆ·äº¤äº’äº‹ä»¶</td><td>ä»…ä¾èµ–é€šè®¯ç»„ä»¶ï¼Œä¸ç›´æ¥ä¾èµ–æœåŠ¡å±‚</td></tr><tr><td>æœåŠ¡å±‚</td><td>è§†å›¾å±‚è¯·æ±‚å‚æ•°ã€ä»“åº“å±‚æ•°æ®</td><td>æ ‡å‡†åŒ–ResultModelå“åº”</td><td>ä¾èµ–ä»“åº“å±‚ï¼Œä¸ç›´æ¥ä¾èµ–è§†å›¾å±‚</td></tr><tr><td>ä»“åº“å±‚</td><td>æœåŠ¡å±‚æ•°æ®æŸ¥è¯¢æŒ‡ä»¤</td><td>ç»“æ„åŒ–æ•°æ®/äº‹åŠ¡æ‰§è¡Œç»“æœ</td><td>æ— ä¸Šå±‚ä¾èµ–ï¼Œä»…ä¾èµ–æ•°æ®æº</td></tr></tbody></table>
<h5 data-id="heading-10">2.2.1 è§†å›¾å±‚</h5>
<p><strong>èŒè´£</strong>ï¼šè´Ÿè´£UIå±•ç¤ºå’Œç”¨æˆ·äº¤äº’ï¼Œä½¿ç”¨Javaæ³¨è§£å®šä¹‰å‰ç«¯ç»„ä»¶</p>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š</p>
<ul>
<li>è§†å›¾ç±»ï¼šé€šè¿‡æ³¨è§£å®šä¹‰ç»„ä»¶çš„å¤–è§‚å’Œè¡Œä¸º</li>
<li>å­—æ®µç»„ä»¶ï¼šè¾“å…¥æ¡†ã€æŒ‰é’®ã€ä¸‹æ‹‰æ¡†ç­‰åŸºæœ¬UIç»„ä»¶</li>
<li>å®¹å™¨ç»„ä»¶ï¼šè¡¨å•ã€ç½‘æ ¼ã€æ ‡ç­¾é¡µç­‰å¤æ‚UIç»„ä»¶</li>
<li>Pageæœºåˆ¶ï¼šä½œä¸ºè§†å›¾çš„å®¹å™¨ï¼Œç»„ç»‡å„ç§è§†å›¾ç»„ä»¶</li>
</ul>
<p><strong>è®¾è®¡åŸåˆ™</strong>ï¼š</p>
<ul>
<li>é‡‡ç”¨å››åˆ†ç¦»è®¾è®¡åŸåˆ™ï¼ˆå±æ€§ã€æ ·å¼ã€äº‹ä»¶ã€è¡Œä¸ºï¼‰</li>
<li>å®¹å™¨ç»„ä»¶ä¸å±•ç¤ºç»„ä»¶åˆ†ç¦»</li>
<li>Pageä¸ºä¸­å¿ƒçš„å‰ç«¯ç»„ä»¶ç»„ç»‡</li>
<li>æ”¯æŒå“åº”å¼è®¾è®¡ï¼Œè‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸</li>
</ul>
<h5 data-id="heading-11">2.2.2 æœåŠ¡å±‚</h5>
<p><strong>èŒè´£</strong>ï¼šè´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæä¾›Webå¯è®¿é—®çš„æœåŠ¡æ–¹æ³•</p>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼š</p>
<ul>
<li>APIæœåŠ¡ï¼šé€šè¿‡@RestControlleræ³¨è§£å®šä¹‰Webå¯è®¿é—®çš„æœåŠ¡</li>
<li>ä¸šåŠ¡æœåŠ¡ï¼šå®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</li>
<li>èšåˆæœåŠ¡ï¼šé€šè¿‡@Aggregationæ³¨è§£å®ç°æœåŠ¡èšåˆ</li>
</ul>
<p><strong>è®¾è®¡åŸåˆ™</strong>ï¼š</p>
<ul>
<li>SpringBootå¾®æœåŠ¡æ¶æ„</li>
<li>WebæœåŠ¡æ¨¡å—åŒ–</li>
<li>ä»¥Web Pathä¸ºä¸­å¿ƒçš„æœåŠ¡åœ°å€ç»Ÿä¸€</li>
<li>æœåŠ¡ç‹¬ç«‹æ€§ï¼Œæ¯ä¸ªæœåŠ¡ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œ</li>
</ul>
<h5 data-id="heading-12">2.2.3 ä»“åº“å±‚</h5>
<p><strong>èŒè´£</strong>ï¼šè´Ÿè´£æ•°æ®è®¿é—®ï¼Œä¸æ•°æ®åº“äº¤äº’</p>
<p><strong>è®¾è®¡åŸåˆ™</strong>ï¼š</p>
<ul>
<li>æ•°æ®è®¿é—®ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»</li>
<li>æ”¯æŒå¤šç§æ•°æ®æº</li>
<li>äº‹åŠ¡ç®¡ç†</li>
<li>æ•°æ®ç¼“å­˜æœºåˆ¶</li>
</ul>
<h4 data-id="heading-13">2.3 å‰åç«¯å¼ºæ˜ å°„å…³ç³»</h4>
<p>Ooderé€šè¿‡å¤šç§æœºåˆ¶å®ç°å‰åç«¯çš„å¼ºæ˜ å°„å…³ç³»ï¼Œç¡®ä¿å‰åç«¯çš„ä¸€è‡´æ€§å’ŒååŒå·¥ä½œï¼š</p>
<blockquote>
<p>Ooder A2UIé€šè¿‡<strong>æ³¨è§£å…ƒæ•°æ®æ‰«æ+ç±»å‹åŒ¹é…æ ¡éªŒ</strong>ï¼Œåœ¨ç¼–è¯‘æœŸå³å¯æ£€æµ‹å‰åç«¯ç»„ä»¶æ˜ å°„ä¸ä¸€è‡´é—®é¢˜ï¼ˆå¦‚åç«¯å®šä¹‰<code>ComponentType.DATEPICKER</code>ä½†å‰ç«¯æ— å¯¹åº”<code>ood.UI.DatePicker</code>ç»„ä»¶ï¼‰ï¼Œé¿å…ä¼ ç»Ÿæ¡†æ¶åœ¨è¿è¡ŒæœŸæ‰æš´éœ²çš„ç±»å‹ä¸åŒ¹é…é”™è¯¯ã€‚</p>
</blockquote>
<h5 data-id="heading-14">2.3.1 ç»„ä»¶æ˜ å°„å…³ç³»</h5>
<p>é€šè¿‡ComponentTypeæšä¸¾ä¸å‰ç«¯ç»„ä»¶å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»ï¼š</p>













































<table><thead><tr><th>åç«¯æšä¸¾å€¼</th><th>å‰ç«¯ç»„ä»¶</th><th>æè¿°</th></tr></thead><tbody><tr><td>INPUT</td><td>ood.UI.Input</td><td>è¾“å…¥æ¡†ç»„ä»¶</td></tr><tr><td>DATEPICKER</td><td>ood.UI.DatePicker</td><td>æ—¥æœŸé€‰æ‹©å™¨ç»„ä»¶</td></tr><tr><td>COMBOBOX</td><td>ood.UI.ComboBox</td><td>ä¸‹æ‹‰æ¡†ç»„ä»¶</td></tr><tr><td>BUTTON</td><td>ood.UI.Button</td><td>æŒ‰é’®ç»„ä»¶</td></tr><tr><td>TABS</td><td>ood.UI.Tabs</td><td>æ ‡ç­¾é¡µç»„ä»¶</td></tr><tr><td>GRID</td><td>ood.UI.Grid</td><td>ç½‘æ ¼ç»„ä»¶</td></tr><tr><td>TREE</td><td>ood.UI.Tree</td><td>æ ‘å½¢ç»„ä»¶</td></tr></tbody></table>
<h5 data-id="heading-15">2.3.2 è§†å›¾æ˜ å°„å…³ç³»</h5>
<p>é€šè¿‡ViewTypeæšä¸¾å®šä¹‰å‰åç«¯è§†å›¾çš„å¯¹åº”å…³ç³»ï¼š</p>






























<table><thead><tr><th>åç«¯æšä¸¾å€¼</th><th>å‰ç«¯è§†å›¾</th><th>æè¿°</th></tr></thead><tbody><tr><td>FORM</td><td>è¡¨å•è§†å›¾</td><td>ç”¨äºæ•°æ®å½•å…¥å’Œå±•ç¤º</td></tr><tr><td>GRID</td><td>ç½‘æ ¼è§†å›¾</td><td>ç”¨äºæ•°æ®å±•ç¤ºå’Œæ“ä½œ</td></tr><tr><td>TREE</td><td>æ ‘å½¢è§†å›¾</td><td>ç”¨äºå±•ç¤ºå±‚çº§ç»“æ„æ•°æ®</td></tr><tr><td>TABS</td><td>æ ‡ç­¾é¡µè§†å›¾</td><td>ç”¨äºç»„ç»‡å’Œç®¡ç†å¤æ‚ç•Œé¢</td></tr></tbody></table>
<h5 data-id="heading-16">2.3.3 äº‹ä»¶æ˜ å°„å…³ç³»</h5>
<p>é€šè¿‡APIEventAnnotationå®ç°å‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡çš„ç»‘å®šï¼š</p>
<ol>
<li><strong>äº‹ä»¶å®šä¹‰</strong>ï¼šåœ¨åç«¯é€šè¿‡@APIEventAnnotationå®šä¹‰äº‹ä»¶</li>
<li><strong>äº‹ä»¶ç»‘å®š</strong>ï¼šåœ¨å‰ç«¯ç»„ä»¶ä¸Šç»‘å®šå¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°</li>
<li><strong>æœåŠ¡è°ƒç”¨</strong>ï¼šäº‹ä»¶è§¦å‘æ—¶è°ƒç”¨åç«¯å¯¹åº”çš„æœåŠ¡æ–¹æ³•</li>
<li><strong>å“åº”å¤„ç†</strong>ï¼šå¤„ç†åç«¯æœåŠ¡çš„å“åº”å¹¶æ›´æ–°å‰ç«¯ç•Œé¢</li>
</ol>
<h5 data-id="heading-17">2.3.4 æ•°æ®æµå‘æ˜ å°„</h5>
<p>é€šè¿‡RequestPathEnumå’ŒResponsePathEnumæ§åˆ¶å‰åç«¯æ•°æ®æµå‘ï¼š</p>
<ol>
<li><strong>è¯·æ±‚è·¯å¾„</strong>ï¼šå®šä¹‰å‰ç«¯å‘åç«¯å‘é€è¯·æ±‚çš„è·¯å¾„</li>
<li><strong>å“åº”è·¯å¾„</strong>ï¼šå®šä¹‰åç«¯å‘å‰ç«¯è¿”å›æ•°æ®çš„è·¯å¾„</li>
<li><strong>æ•°æ®è½¬æ¢</strong>ï¼šåœ¨è¯·æ±‚å’Œå“åº”è¿‡ç¨‹ä¸­è¿›è¡Œæ•°æ®æ ¼å¼è½¬æ¢</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šé€šè¿‡æ•°æ®æµå‘æ§åˆ¶ç»„ä»¶çŠ¶æ€çš„å˜åŒ–</li>
</ol>
<h3 data-id="heading-18">3. æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-19">3.1 å››åˆ†ç¦»è®¾è®¡åŸåˆ™</h4>
<p>å››åˆ†ç¦»è®¾è®¡åŸåˆ™æ˜¯Ooder A2UIçš„æ ¸å¿ƒè®¾è®¡ç†å¿µï¼Œå°†ç»„ä»¶çš„<strong>å±æ€§ã€æ ·å¼ã€äº‹ä»¶ã€è¡Œä¸º</strong>è¿›è¡Œæ˜ç¡®åˆ†ç¦»ï¼Œå®ç°é«˜å†…èšä½è€¦åˆçš„ç»„ä»¶è®¾è®¡ã€‚</p>
<h5 data-id="heading-20">3.1.1 åˆ†ç¦»å†…å®¹</h5>
<p><strong>1. å±æ€§ï¼ˆPropertiesï¼‰</strong></p>
<ul>
<li>å®šä¹‰ï¼šç»„ä»¶çš„é…ç½®å±æ€§å’Œæ•°æ®æ¨¡å‹</li>
<li>å®ç°ï¼šé€šè¿‡<code>Static.DataModel</code>å®šä¹‰</li>
<li>ç‰¹ç‚¹ï¼šåŒ…å«åˆå§‹å€¼ã€å¯é€‰å€¼åˆ—è¡¨ã€å˜æ›´åŠ¨ä½œå’Œæ˜¾ç¤ºåç§°</li>
<li>ç¤ºä¾‹ï¼šä¸»é¢˜ã€å“åº”å¼ã€å°ºå¯¸ç­‰é…ç½®å±æ€§</li>
</ul>
<p><strong>2. æ ·å¼ï¼ˆStylesï¼‰</strong></p>
<ul>
<li>å®šä¹‰ï¼šç»„ä»¶çš„CSSæ ·å¼</li>
<li>å®ç°ï¼šé€šè¿‡<code>Static.Appearances</code>å®šä¹‰</li>
<li>ç‰¹ç‚¹ï¼šæ”¯æŒé€‰æ‹©å™¨åµŒå¥—ã€ä¼ªç±»ã€è¿‡æ¸¡æ•ˆæœç­‰</li>
<li>ç¤ºä¾‹ï¼šé¢œè‰²ã€å­—ä½“ã€å¸ƒå±€ç­‰æ ·å¼å®šä¹‰</li>
</ul>
<p><strong>3. äº‹ä»¶ï¼ˆEventsï¼‰</strong></p>
<ul>
<li>å®šä¹‰ï¼šç»„ä»¶çš„äº¤äº’äº‹ä»¶</li>
<li>å®ç°ï¼šé€šè¿‡<code>Static.EventHandlers</code>å®šä¹‰</li>
<li>ç‰¹ç‚¹ï¼šäº‹ä»¶ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œæ”¯æŒè‡ªå®šä¹‰äº‹ä»¶</li>
<li>ç¤ºä¾‹ï¼šç‚¹å‡»äº‹ä»¶ã€å˜æ›´äº‹ä»¶ã€åŠ è½½äº‹ä»¶ç­‰</li>
</ul>
<p><strong>4. è¡Œä¸ºï¼ˆBehaviorsï¼‰</strong></p>
<ul>
<li>å®šä¹‰ï¼šç»„ä»¶çš„è¡Œä¸ºè§„åˆ™å’Œçº¦æŸ</li>
<li>å®ç°ï¼šé€šè¿‡<code>Static.Behaviors</code>å®šä¹‰</li>
<li>ç‰¹ç‚¹ï¼šå®šä¹‰ç»„ä»¶çš„äº¤äº’è¡Œä¸ºå’Œè§„åˆ™</li>
<li>ç¤ºä¾‹ï¼šæ‹–æ‹½è¡Œä¸ºã€é¢æ¿è¡Œä¸ºã€çƒ­é”®æ”¯æŒç­‰</li>
</ul>
<h5 data-id="heading-21">3.1.2 å®ç°æœºåˆ¶</h5>
<p>Ooderç»„ä»¶çš„å››åˆ†ç¦»è®¾è®¡é€šè¿‡æ¸…æ™°çš„ç»“æ„ç»„ç»‡å®ç°ï¼Œä»¥ä¸‹æ˜¯<code>ood.UI.FormLayout</code>ç»„ä»¶çš„å››åˆ†ç¦»æ¶æ„ç¤ºæ„å›¾ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ood<span class="hljs-selector-class">.UI</span><span class="hljs-selector-class">.FormLayout</span>ç»„ä»¶ç»“æ„
â”œâ”€â”€ Static<span class="hljs-selector-class">.DataModel</span>ï¼ˆå±æ€§ï¼‰ï¼šåˆå§‹å€¼ã€å¯é€‰å€¼ã€æ•°æ®çº¦æŸ
â”œâ”€â”€ Static<span class="hljs-selector-class">.Appearances</span>ï¼ˆæ ·å¼ï¼‰ï¼šCSSé€‰æ‹©å™¨ã€ä¼ªç±»ã€å“åº”å¼è§„åˆ™
â”œâ”€â”€ Static<span class="hljs-selector-class">.EventHandlers</span>ï¼ˆäº‹ä»¶ï¼‰ï¼šç‚¹å‡»ã€å˜æ›´ã€åŠ è½½ç­‰äº‹ä»¶ç»‘å®š
â””â”€â”€ Static<span class="hljs-selector-class">.Behaviors</span>ï¼ˆè¡Œä¸ºï¼‰ï¼šæ‹–æ‹½è§„åˆ™ã€çƒ­é”®æ˜ å°„ã€äº¤äº’çº¦æŸ
</code></pre>
<p>ä»<code>FormLayout.js</code>ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒOoderç»„ä»¶ä¸¥æ ¼éµå¾ªå››åˆ†ç¦»è®¾è®¡åŸåˆ™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">ood.<span class="hljs-title class_">Class</span>(<span class="hljs-string">"ood.UI.FormLayout"</span>, [<span class="hljs-string">"ood.UI"</span>, <span class="hljs-string">"ood.absList"</span>], {
    <span class="hljs-title class_">Static</span>: {
        <span class="hljs-title class_">Appearances</span>: {
            <span class="hljs-comment">// æ ·å¼å®šä¹‰</span>
        },
        <span class="hljs-title class_">Templates</span>: {
            <span class="hljs-comment">// æ¨¡æ¿å®šä¹‰</span>
        },
        <span class="hljs-title class_">Behaviors</span>: {
            <span class="hljs-comment">// è¡Œä¸ºå®šä¹‰</span>
        },
        <span class="hljs-title class_">DataModel</span>: {
            <span class="hljs-comment">// å±æ€§å®šä¹‰</span>
        },
        <span class="hljs-title class_">EventHandlers</span>: {
            <span class="hljs-comment">// äº‹ä»¶å¤„ç†ç¨‹åº</span>
        }
    }
});
</code></pre>
<h4 data-id="heading-22">3.2 æ³¨è§£é©±åŠ¨å¼€å‘</h4>
<p>æ³¨è§£é©±åŠ¨å¼€å‘æ˜¯Ooder A2UIçš„æ ¸å¿ƒå¼€å‘æ¨¡å¼ï¼Œé€šè¿‡Javaæ³¨è§£å¿«é€Ÿæ„å»ºå‰åç«¯ä¸€ä½“åŒ–åº”ç”¨ã€‚</p>
<h5 data-id="heading-23">3.2.1 æ ¸å¿ƒæœºåˆ¶</h5>
<ol>
<li><strong>æ³¨è§£æ‰«æä¸è§£æ</strong>ï¼šåœ¨Pageåˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿæ‰«æè§†å›¾ç±»ä¸Šçš„æ‰€æœ‰æ³¨è§£</li>
<li><strong>ç»„ä»¶ç»“æ„ç”Ÿæˆ</strong>ï¼šå°†æ³¨è§£ä¿¡æ¯è½¬æ¢ä¸ºå‰ç«¯ç»„ä»¶çš„é…ç½®ä¿¡æ¯</li>
<li><strong>äº‹ä»¶ç»‘å®šè£…é…</strong>ï¼šå®Œæˆé€šè®¯ç»„ä»¶çš„è£…é…åŠå‰ç«¯ç»„ä»¶äº‹ä»¶ç»‘å®š</li>
<li><strong>è¿è¡ŒæœŸåŠ¨æ€è£…é…</strong>ï¼šæ ¹æ®ç”¨æˆ·äº¤äº’äº‹ä»¶å’Œæ•°æ®å˜åŒ–ï¼ŒåŠ¨æ€è°ƒæ•´ç»„ä»¶çŠ¶æ€</li>
</ol>
<h5 data-id="heading-24">3.2.2 æ³¨è§£åˆ†ç±»</h5>
<p>Ooderå¹³å°çš„æ³¨è§£åˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡ï¼š</p>
<p><strong>1. å¿…é¡»çš„æ³¨è§£</strong>ï¼ˆç”¨äºå»ºç«‹åŸºæœ¬çš„ç»„ä»¶æ˜ å°„å…³ç³»ï¼‰</p>
<ul>
<li>ç»„ä»¶ç±»å‹æ³¨è§£ï¼š@InputAnnotationã€@ButtonAnnotationç­‰</li>
<li>è§†å›¾ç±»å‹æ³¨è§£ï¼š@FormAnnotationã€@GridAnnotationç­‰</li>
<li>æœåŠ¡æ³¨è§£ï¼š@RestControllerã€@Serviceã€@Aggregationç­‰</li>
</ul>
<p><strong>2. å¿…è¦çš„ä¿®é¥°æ³¨è§£</strong>ï¼ˆç”¨äºå®Œå–„ç»„ä»¶çš„å¤–è§‚å’ŒåŸºæœ¬è¡Œä¸ºï¼‰</p>
<ul>
<li>å¤–è§‚æ³¨è§£ï¼š@CustomAnnotationï¼ˆcaptionã€indexã€imageClassç­‰ï¼‰</li>
<li>å¸ƒå±€æ³¨è§£ï¼š@FormAnnotationï¼ˆcolã€rowã€borderTypeç­‰ï¼‰</li>
<li>æ•°æ®æ³¨è§£ï¼š@Uidã€@Pidï¼ˆæ ‡è¯†è®°å½•å…³ç³»ï¼‰</li>
</ul>
<p><strong>3. å¢å¼ºçš„æ³¨è§£</strong>ï¼ˆç”¨äºæ‰©å±•ç»„ä»¶çš„åŠŸèƒ½å’Œäº¤äº’ï¼‰</p>
<ul>
<li>è¡Œä¸ºæ³¨è§£ï¼š@APIEventAnnotationï¼ˆå®šä¹‰äº‹ä»¶äº¤äº’è¡Œä¸ºï¼‰</li>
<li>åˆ—è¡¨å¢å¼ºæ³¨è§£ï¼š@CustomListAnnotationï¼ˆå¢å¼ºæšä¸¾å­—æ®µçš„æ•°æ®èƒ½åŠ›ï¼‰</li>
<li>å¤åˆæ³¨è§£ï¼šComboç»„ä»¶ç›¸å…³æ³¨è§£</li>
</ul>
<h4 data-id="heading-25">3.3 é™æ€æ¨¡æ¿æ¸²æŸ“</h4>
<p>Ooder A2UIé‡‡ç”¨é™æ€æ¨¡æ¿æ¸²æŸ“æœºåˆ¶ï¼Œä¸React/Vueçš„åŠ¨æ€æ¸²æŸ“æœ‰æ˜æ˜¾åŒºåˆ«ã€‚</p>
<h5 data-id="heading-26">3.3.1 æ¸²æŸ“æµç¨‹</h5>
<ol>
<li><strong>åç«¯ç”Ÿæˆé…ç½®</strong>ï¼šåç«¯é€šè¿‡æ³¨è§£ç”ŸæˆJSONé…ç½®</li>
<li><strong>å‰ç«¯æ¨¡æ¿æ¸²æŸ“</strong>ï¼šå‰ç«¯ä½¿ç”¨é™æ€æ¨¡æ¿æ¸²æŸ“ç»„ä»¶</li>
<li><strong>æ•°æ®ä¼ é€’</strong>ï¼šæ•°æ®é€šè¿‡JSONæ ¼å¼ä¼ é€’</li>
<li><strong>ç»„ä»¶åˆå§‹åŒ–</strong>ï¼šæ ¹æ®é…ç½®åˆå§‹åŒ–ç»„ä»¶çŠ¶æ€</li>
</ol>
<h5 data-id="heading-27">3.3.2 æ ¸å¿ƒç‰¹ç‚¹</h5>
<ul>
<li><strong>åˆå§‹åŠ è½½å¿«</strong>ï¼šé™æ€æ¨¡æ¿æ¸²æŸ“å‡å°‘äº†å‰ç«¯è®¡ç®—å¼€é”€</li>
<li><strong>å‰åç«¯åˆ†ç¦»</strong>ï¼šåç«¯å®Œå…¨è¾“å‡ºJSONäº¤ç”±å‰ç«¯æ¸²æŸ“</li>
<li><strong>æ˜“äºç¼“å­˜</strong>ï¼šé™æ€æ¨¡æ¿å¯ä»¥è¢«æµè§ˆå™¨ç¼“å­˜</li>
<li><strong>é€‚åˆAIç”Ÿæˆ</strong>ï¼šç»“æ„åŒ–çš„æ¨¡æ¿ä¾¿äºAIç†è§£å’Œç”Ÿæˆ</li>
</ul>
<h4 data-id="heading-28">3.4 DTO/VOä¸€ä½“åŒ–</h4>
<p>DTO/VOä¸€ä½“åŒ–è®¾è®¡æ˜¯Ooder A2UIçš„é‡è¦ç‰¹ç‚¹ï¼Œå•ä¸€å¯¹è±¡åŒæ—¶ä½œä¸ºæ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆDTOï¼‰å’Œè§†å›¾å¯¹è±¡ï¼ˆVOï¼‰ã€‚</p>
<h5 data-id="heading-29">3.4.1 è®¾è®¡ä¼˜åŠ¿</h5>
<ul>
<li><strong>å‡å°‘å¯¹è±¡è½¬æ¢å¼€é”€</strong>ï¼šæ— éœ€åœ¨DTOå’ŒVOä¹‹é—´è¿›è¡Œè½¬æ¢</li>
<li><strong>ä¾¿äºå‰åç«¯æ•°æ®ä¸€è‡´æ€§ç»´æŠ¤</strong>ï¼šåŒä¸€å¯¹è±¡ç¡®ä¿æ•°æ®ç»“æ„ä¸€è‡´</li>
<li><strong>ç®€åŒ–å¼€å‘æµç¨‹</strong>ï¼šå‡å°‘éœ€è¦ç»´æŠ¤çš„å¯¹è±¡æ•°é‡</li>
<li><strong>æ”¯æŒç›´æ¥JSONè¾“å‡º</strong>ï¼šå¯ä»¥ç›´æ¥è¾“å‡ºä¸ºå‰ç«¯æ‰€éœ€çš„JSONæ ¼å¼</li>
</ul>
<h5 data-id="heading-30">3.4.2 å®ç°æ–¹å¼</h5>
<p>åœ¨Ooderä¸­ï¼Œè§†å›¾ç±»åŒæ—¶ä½œä¸ºDTOå’ŒVOä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FormAnnotation(
    borderType = BorderType.inset,
    col = 2,
    row = 8,
    customService = {EmployeeManagementService.class}
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeManagementView</span> {
    <span class="hljs-comment">// è§†å›¾å±æ€§åŒæ—¶ä½œä¸ºDTOå­—æ®µ</span>
    <span class="hljs-meta">@InputAnnotation(maxlength = 10, required = true)</span>
    <span class="hljs-meta">@CustomAnnotation(caption = "å‘˜å·¥ID", index = 1)</span>
    <span class="hljs-meta">@Uid</span>
    <span class="hljs-keyword">private</span> String employeeId;
    
    <span class="hljs-comment">// å…¶ä»–å±æ€§...</span>
}
</code></pre>
<h4 data-id="heading-31">3.5 ç¼–è¯‘æœŸé™æ€è½¬æ¢</h4>
<p>ç¼–è¯‘æœŸé™æ€è½¬æ¢æ˜¯Ooder A2UIå°†æ³¨è§£è½¬æ¢ä¸ºå¯æ‰§è¡Œç¨‹åºçš„ç¬¬ä¸€é˜¶æ®µï¼Œé€šè¿‡<strong>æ³¨è§£å…ƒæ•°æ®æ‰«æ+ç±»å‹åŒ¹é…æ ¡éªŒ+é…ç½®ç”Ÿæˆ</strong>çš„å®Œæ•´æµç¨‹ï¼Œå®ç°ä»Javaæ³¨è§£åˆ°å‰ç«¯ç»„ä»¶çš„è‡ªåŠ¨åŒ–è½¬æ¢ã€‚</p>
<h5 data-id="heading-32">3.5.1 è½¬æ¢æµç¨‹</h5>
<p><strong>ç¼–è¯‘æœŸé™æ€è½¬æ¢æ ¸å¿ƒæµç¨‹å›¾</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">ç¼–è¯‘æœŸé™æ€è½¬æ¢æµç¨‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">1.</span> æ³¨è§£æ‰«æé˜¶æ®µ â”‚â”€â”€â”€â”€â–¶â”‚ <span class="hljs-number">2.</span> ç»“æ„ç”Ÿæˆé˜¶æ®µ  â”‚â”€â”€â”€â”€â–¶â”‚ <span class="hljs-number">3.</span> ç»‘å®šè£…é…é˜¶æ®µ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
        â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Annotation      â”‚     â”‚ ComponentMeta    â”‚     â”‚ APIEventBinding   â”‚
â”‚ Processoræ‰«æ   â”‚     â”‚ â†’ JSONé…ç½®       â”‚     â”‚ â†’ äº‹ä»¶ç»‘å®šé…ç½®   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ <span class="hljs-number">4.</span> è¾“å‡ºç‰©ç”Ÿæˆ   â”‚
                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                         â”‚ xxx.view.json   â”‚
                         â”‚ xxx.<span class="hljs-keyword">event</span>.json  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>è¯¦ç»†è½¬æ¢æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>æ³¨è§£æ‰«æé˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>é€šè¿‡<code>AnnotationProcessor</code>æ‰«æè§†å›¾ç±»ä¸Šçš„æ‰€æœ‰æ³¨è§£</li>
<li>ç”Ÿæˆ<code>ComponentMeta</code>å…ƒæ•°æ®ï¼ŒåŒ…å«ç»„ä»¶ç±»å‹ã€å¸ƒå±€ã€æ ·å¼ã€äº‹ä»¶ç­‰å®Œæ•´ä¿¡æ¯</li>
<li>æ‰§è¡Œ<strong>ç¼–è¯‘æœŸç±»å‹æ ¡éªŒ</strong>ï¼Œæ£€æµ‹å‰åç«¯ç»„ä»¶æ˜ å°„ä¸€è‡´æ€§</li>
<li>æ”¯æŒå¢é‡æ‰«æï¼Œä»…å¤„ç†å˜æ›´çš„æ³¨è§£ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>ç»“æ„ç”Ÿæˆé˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>å°†<code>ComponentMeta</code>è½¬æ¢ä¸ºå‰ç«¯å¯è¯†åˆ«çš„JSONé…ç½®</li>
<li>è§†å›¾ç»„ä»¶ç”Ÿæˆï¼šæ ¹æ®<code>@FormAnnotation</code>ç­‰è§†å›¾æ³¨è§£ç”Ÿæˆå¯¹åº”çš„å‰ç«¯è§†å›¾ç»„ä»¶é…ç½®</li>
<li>å­—æ®µç»„ä»¶ç”Ÿæˆï¼šæ ¹æ®<code>@InputAnnotation</code>ç­‰å­—æ®µæ³¨è§£ç”Ÿæˆå…·ä½“çš„UIæ§ä»¶é…ç½®</li>
<li>å®¹å™¨ç»„ä»¶ç”Ÿæˆï¼šæ ¹æ®å®¹å™¨æ³¨è§£ç”Ÿæˆå®¹å™¨ç±»ç»„ä»¶çš„å¸ƒå±€é…ç½®</li>
<li>é…ç½®ä¿¡æ¯ç”Ÿæˆï¼šåˆå¹¶æ ·å¼ã€å±æ€§ã€äº‹ä»¶ç­‰é…ç½®ï¼Œç”Ÿæˆå®Œæ•´çš„ç»„ä»¶æè¿°</li>
</ul>
</li>
<li>
<p><strong>ç»‘å®šè£…é…é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>ç”Ÿæˆ<code>APIEventBinding</code>é…ç½®ï¼Œå»ºç«‹å‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡çš„æ˜ å°„å…³ç³»</li>
<li>é€šè®¯ç»„ä»¶è£…é…ï¼šå°†è§†å›¾æ‰€éœ€çš„æ•°æ®æ¥å£è½¬æ¢ä¸ºæ ‡å‡†åŒ–çš„Ajaxå®šä¹‰</li>
<li>äº‹ä»¶ç»‘å®šï¼šå°†ç»„ä»¶çš„Eventå®šä¹‰å®ä¾‹åŒ–å¹¶ä¸è§†å›¾/å…ƒç´ è¿›è¡Œç»‘å®š</li>
<li>å‚æ•°æ±‡èšï¼šå®šä¹‰å‚æ•°ä»PageCtxåˆ°æœåŠ¡æ–¹æ³•çš„æ˜ å°„è§„åˆ™</li>
<li>æœåŠ¡ç»‘å®šï¼šè·å–å¯Webè®¿é—®çš„æœåŠ¡æ–¹æ³•ï¼Œç”ŸæˆæœåŠ¡è°ƒç”¨é…ç½®</li>
</ul>
</li>
<li>
<p><strong>è¾“å‡ºç‰©ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>ç¼–è¯‘æœŸç”Ÿæˆ<code>xxx.view.json</code>ï¼šåŒ…å«ç»„ä»¶çš„å®Œæ•´é…ç½®ä¿¡æ¯ï¼Œä¾›å‰ç«¯æ¸²æŸ“ä½¿ç”¨</li>
<li>ç¼–è¯‘æœŸç”Ÿæˆ<code>xxx.event.json</code>ï¼šåŒ…å«äº‹ä»¶ç»‘å®šé…ç½®ï¼Œä¾›è¿è¡ŒæœŸäº‹ä»¶å¤„ç†ä½¿ç”¨</li>
<li>è¾“å‡ºç‰©é‡‡ç”¨JSONæ ¼å¼ï¼Œä¾¿äºå‰ç«¯è§£æå’Œç¼“å­˜</li>
<li>æ”¯æŒå¢é‡ç”Ÿæˆï¼Œä»…æ›´æ–°å˜æ›´çš„é…ç½®æ–‡ä»¶</li>
</ul>
</li>
</ol>
<p><strong>æ ¸å¿ƒæŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åŸºäºJavaæ³¨è§£å¤„ç†å™¨å®ç°ï¼Œæ— è¿è¡Œæ—¶æ€§èƒ½å¼€é”€</li>
<li>ç¼–è¯‘æœŸç±»å‹å®‰å…¨æ ¡éªŒï¼Œæå‰å‘ç°æ˜ å°„é”™è¯¯</li>
<li>æ ‡å‡†åŒ–è¾“å‡ºæ ¼å¼ï¼Œä¾¿äºè·¨å¹³å°é›†æˆ</li>
<li>æ”¯æŒå¢é‡ç¼–è¯‘ï¼Œæé«˜å¼€å‘æ•ˆç‡</li>
</ul>
<h4 data-id="heading-33">3.6 è¿è¡ŒæœŸåŠ¨æ€è£…é…</h4>
<p>è¿è¡ŒæœŸåŠ¨æ€è£…é…æ˜¯Ooder A2UIå°†æ³¨è§£è½¬æ¢ä¸ºå¯æ‰§è¡Œç¨‹åºçš„ç¬¬äºŒé˜¶æ®µï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€è°ƒæ•´ç»„ä»¶çŠ¶æ€ã€‚</p>
<h5 data-id="heading-34">3.6.1 è£…é…ç±»å‹</h5>
<p><strong>1. äº‹ä»¶é©±åŠ¨è£…é…</strong></p>
<ul>
<li>è§¦å‘æ¡ä»¶ï¼šç”¨æˆ·äº¤äº’è§¦å‘ç»„ä»¶äº‹ä»¶</li>
<li>å¤„ç†æµç¨‹ï¼šäº‹ä»¶è§¦å‘ â†’ æœåŠ¡è°ƒç”¨ â†’ æ•°æ®å¤„ç† â†’ çŠ¶æ€æ›´æ–°</li>
<li>å®ç°ï¼šæ ¹æ®ç»‘å®šçš„APIEventAnnotationè°ƒç”¨å¯¹åº”çš„åç«¯æœåŠ¡</li>
</ul>
<p><strong>2. æ•°æ®é©±åŠ¨è£…é…</strong></p>
<ul>
<li>è§¦å‘æ¡ä»¶ï¼šæ•°æ®å˜åŒ–æˆ–ç»„ä»¶åˆå§‹åŒ–</li>
<li>å¤„ç†æµç¨‹ï¼šæ•°æ®åŠ è½½ â†’ æ•°æ®ä¼ é€’ â†’ æ•°æ®å±•ç¤º</li>
<li>å®ç°ï¼šæ ¹æ®ç»„ä»¶çš„æ•°æ®é¡¹å®šä¹‰åŠ¨æ€åŠ è½½å’Œå±•ç¤ºæ•°æ®</li>
</ul>
<p><strong>3. åŠ¨æ€ç»„ä»¶ç”Ÿæˆ</strong></p>
<ul>
<li>è§¦å‘æ¡ä»¶ï¼šä¸šåŠ¡éœ€æ±‚å˜åŒ–</li>
<li>å¤„ç†æµç¨‹ï¼šç»„ä»¶ç”Ÿæˆ â†’ ç»„ä»¶é”€æ¯ â†’ ç”Ÿå‘½å‘¨æœŸç®¡ç† â†’ ç»„ä»¶ç»„åˆ</li>
<li>å®ç°ï¼šæ”¯æŒæ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€ç”Ÿæˆå’Œé”€æ¯ç»„ä»¶</li>
</ul>
<h3 data-id="heading-35">4. æ ¸å¿ƒç»„ä»¶</h3>
<h4 data-id="heading-36">4.1 æ³¨è§£ä½“ç³»</h4>
<p>Ooder A2UIæä¾›äº†ä¸°å¯Œçš„æ³¨è§£ä½“ç³»ï¼Œç”¨äºå®šä¹‰ç»„ä»¶çš„å¤–è§‚ã€è¡Œä¸ºå’Œäº¤äº’ï¼Œæ˜¯å®ç°å‰åç«¯å¼ºæ˜ å°„å…³ç³»çš„æ ¸å¿ƒã€‚</p>
<h5 data-id="heading-37">4.1.1 æ³¨è§£åˆ†ç±»</h5>
<p>æ ¹æ®åŠŸèƒ½å’Œç”¨é€”ï¼ŒOoderçš„æ³¨è§£å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<p><strong>1. è§†å›¾å±‚æ³¨è§£</strong></p>
<ul>
<li>å®šä¹‰ï¼šç”¨äºå®šä¹‰è§†å›¾çš„åŸºæœ¬å±æ€§å’Œå¸ƒå±€</li>
<li>ç¤ºä¾‹ï¼š
<ul>
<li><code>@FormViewAnnotation</code>ï¼šè¡¨å•è§†å›¾å®šä¹‰</li>
<li><code>@GridViewAnnotation</code>ï¼šç½‘æ ¼è§†å›¾å®šä¹‰</li>
<li><code>@PanelAnnotation</code>ï¼šé¢æ¿å®¹å™¨å®šä¹‰</li>
<li><code>@DialogAnnotation</code>ï¼šå¯¹è¯æ¡†å®¹å™¨å®šä¹‰</li>
</ul>
</li>
<li>ä½œç”¨ï¼šç¡®å®šè§†å›¾çš„ç±»å‹ã€å¸ƒå±€å’ŒåŸºæœ¬æ ·å¼</li>
</ul>
<p><strong>2. å­—æ®µæ³¨è§£</strong></p>
<ul>
<li>å®šä¹‰ï¼šç”¨äºå®šä¹‰å…·ä½“çš„UIæ§ä»¶å’Œè¾“å…¥å­—æ®µ</li>
<li>ç¤ºä¾‹ï¼š
<ul>
<li><code>@InputAnnotation</code>ï¼šè¾“å…¥æ¡†é…ç½®</li>
<li><code>@DatePickerAnnotation</code>ï¼šæ—¥æœŸé€‰æ‹©å™¨é…ç½®</li>
<li><code>@ComboBoxAnnotation</code>ï¼šä¸‹æ‹‰æ¡†é…ç½®</li>
<li><code>@ButtonAnnotation</code>ï¼šæŒ‰é’®é…ç½®</li>
</ul>
</li>
<li>ä½œç”¨ï¼šå®šä¹‰å­—æ®µçš„ç±»å‹ã€éªŒè¯è§„åˆ™å’ŒåŸºæœ¬æ ·å¼</li>
</ul>
<p><strong>3. è¡Œä¸ºå’Œäº¤äº’æ³¨è§£</strong></p>
<ul>
<li>å®šä¹‰ï¼šç”¨äºå®šä¹‰ç»„ä»¶çš„äº‹ä»¶å’Œäº¤äº’è¡Œä¸º</li>
<li>ç¤ºä¾‹ï¼š
<ul>
<li><code>@APIEventAnnotation</code>ï¼šæ ¸å¿ƒåŸºç¡€è¡Œä¸ºé…ç½®ï¼Œå®šä¹‰äº‹ä»¶äº¤äº’è¡Œä¸º</li>
<li><code>@ModuleAnnotation</code>ï¼šæ¨¡å—å®šä¹‰æ³¨è§£ï¼Œç”¨äºå®šä¹‰åº”ç”¨æ¨¡å—</li>
</ul>
</li>
<li>ä½œç”¨ï¼šç»‘å®šå‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡ï¼Œå®šä¹‰äº¤äº’é€»è¾‘</li>
</ul>
<p><strong>4. é…ç½®æ³¨è§£</strong></p>
<ul>
<li>å®šä¹‰ï¼šç”¨äºå®Œå–„ç»„ä»¶çš„å¤–è§‚å’ŒåŸºæœ¬è¡Œä¸º</li>
<li>ç¤ºä¾‹ï¼š
<ul>
<li><code>@CustomAnnotation</code>ï¼šåº•å±‚é€šç”¨å¤–è§‚é…ç½®ï¼ŒåŒ…å«captionã€indexã€imageClassç­‰å±æ€§</li>
<li><code>@CustomListAnnotation</code>ï¼šè‡ªå®šä¹‰åˆ—è¡¨é…ç½®ï¼Œç”¨äºå¢å¼ºæšä¸¾å­—æ®µçš„æ•°æ®èƒ½åŠ›</li>
</ul>
</li>
<li>ä½œç”¨ï¼šå¢å¼ºç»„ä»¶çš„å¤–è§‚å’ŒåŠŸèƒ½</li>
</ul>
<p><strong>5. èœå•æ³¨è§£</strong></p>
<ul>
<li>å®šä¹‰ï¼šç”¨äºå®šä¹‰èœå•å’Œå·¥å…·æ </li>
<li>ç¤ºä¾‹ï¼š
<ul>
<li><code>@ToolBarMenu</code>ï¼šå·¥å…·æ é…ç½®</li>
<li><code>@BottomBarMenu</code>ï¼šåº•éƒ¨æ é…ç½®</li>
</ul>
</li>
<li>ä½œç”¨ï¼šå®šä¹‰é¡µé¢çš„å¯¼èˆªå’Œæ“ä½œèœå•</li>
</ul>
<p><strong>6. æœåŠ¡æ³¨è§£</strong></p>
<ul>
<li>å®šä¹‰ï¼šç”¨äºå®šä¹‰æœåŠ¡çš„Webè®¿é—®æ€§</li>
<li>ç¤ºä¾‹ï¼š
<ul>
<li><code>@RestController</code>ï¼šå®šä¹‰Webå¯è®¿é—®çš„æ§åˆ¶å™¨</li>
<li><code>@Service</code>ï¼šå®šä¹‰ä¸šåŠ¡æœåŠ¡</li>
<li><code>@Aggregation</code>ï¼šå®šä¹‰èšåˆæœåŠ¡</li>
</ul>
</li>
<li>ä½œç”¨ï¼šç¡®ä¿æœåŠ¡å¯ä»¥è¢«Webè®¿é—®ï¼Œå®ç°å‰åç«¯é€šè®¯</li>
</ul>
<h5 data-id="heading-38">4.1.2 æ³¨è§£ä½¿ç”¨ç¤ºä¾‹</h5>
<p>ä»æŠ€æœ¯æ–‡æ¡£ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒOoderçš„æ³¨è§£ä½¿ç”¨éµå¾ªä¸¥æ ¼çš„è§„èŒƒï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è§†å›¾ç±»æ³¨è§£ç¤ºä¾‹</span>
<span class="hljs-meta">@FormAnnotation(
    borderType = BorderType.inset,
    col = 2,
    row = 8,
    customService = {EmployeeManagementService.class}
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeManagementView</span> {
    <span class="hljs-comment">// å­—æ®µæ³¨è§£ç¤ºä¾‹</span>
    <span class="hljs-meta">@InputAnnotation(maxlength = 10, required = true)</span>
    <span class="hljs-meta">@CustomAnnotation(caption = "å‘˜å·¥ID", index = 1, imageClass = "fa-solid fa-id-card")</span>
    <span class="hljs-meta">@Uid</span>
    <span class="hljs-keyword">private</span> String employeeId;
    
    <span class="hljs-comment">// è¡Œä¸ºæ³¨è§£ç¤ºä¾‹</span>
    <span class="hljs-meta">@ButtonAnnotation(buttonType = ButtonType.primary)</span>
    <span class="hljs-meta">@CustomAnnotation(caption = "ä¿å­˜", index = 10, imageClass = "fa-solid fa-save")</span>
    <span class="hljs-meta">@APIEventAnnotation(
        bindAction = {CustomAction.SAVE},
        customRequestData = {RequestPathEnum.CURRFORM},
        beforeInvoke = CustomBeforInvoke.BUSY,
        onExecuteSuccess = CustomOnExecueSuccess.MESSAGE
    )</span>
    <span class="hljs-keyword">private</span> String saveButton;
}
</code></pre>
<h5 data-id="heading-39">4.1.3 æ³¨è§£ä½¿ç”¨çº¦æŸ</h5>
<p>ä¸ºç¡®ä¿æ³¨è§£çš„æ­£ç¡®ä½¿ç”¨ï¼Œé¿å…æ»¥ç”¨å¯¼è‡´çš„æ€§èƒ½é—®é¢˜å’Œç»´æŠ¤å›°éš¾ï¼ŒOoder A2UIå®šä¹‰äº†æ ¸å¿ƒæ³¨è§£çš„ä½¿ç”¨çº¦æŸå’Œç¦ç”¨åœºæ™¯ï¼š</p>



































<table><thead><tr><th>æ³¨è§£</th><th>æ ¸å¿ƒç”¨é€”</th><th>ç¦ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>@APIEventAnnotation</code></td><td>ç»‘å®šå‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡</td><td>éç”¨æˆ·äº¤äº’åœºæ™¯ï¼ˆå¦‚åå°å®šæ—¶ä»»åŠ¡ã€æ•°æ®åŒæ­¥ï¼‰</td></tr><tr><td><code>@Aggregation</code></td><td>èšåˆå¤šæœåŠ¡æ¥å£</td><td>å•ä¸€èŒè´£çš„åŸºç¡€æœåŠ¡ï¼ˆåº”ä¿æŒæœåŠ¡åŸå­æ€§ï¼‰</td></tr><tr><td><code>@CustomAnnotation</code></td><td>é…ç½®ç»„ä»¶å¤–è§‚</td><td>é…ç½®ç»„ä»¶ä¸šåŠ¡é€»è¾‘ï¼ˆä¸šåŠ¡é€»è¾‘åº”åœ¨æœåŠ¡å±‚å®ç°ï¼‰</td></tr><tr><td><code>@FormAnnotation</code></td><td>å®šä¹‰è¡¨å•è§†å›¾ç»“æ„</td><td>éè¡¨å•ç±»è§†å›¾ï¼ˆå¦‚çº¯å±•ç¤ºå‹è§†å›¾ã€æ ‘å½¢è§†å›¾ï¼‰</td></tr><tr><td><code>@APIEventAnnotation</code></td><td>å®šä¹‰äº‹ä»¶äº¤äº’è¡Œä¸º</td><td>ç®€å•çš„å‰ç«¯æœ¬åœ°äº¤äº’ï¼ˆæ— éœ€åç«¯æœåŠ¡çš„äº¤äº’ï¼‰</td></tr></tbody></table>
<p><strong>ä½¿ç”¨çº¦æŸè¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼šæ¯ä¸ªæ³¨è§£ä»…ç”¨äºå…¶è®¾è®¡çš„æ ¸å¿ƒç”¨é€”ï¼Œé¿å…åŠŸèƒ½è¿‡è½½</li>
<li><strong>åˆ†å±‚ä½¿ç”¨åŸåˆ™</strong>ï¼šè§†å›¾å±‚æ³¨è§£ä»…ç”¨äºè§†å›¾ç±»ï¼ŒæœåŠ¡å±‚æ³¨è§£ä»…ç”¨äºæœåŠ¡ç±»ï¼Œé¿å…è·¨å±‚ä½¿ç”¨</li>
<li><strong>æœ€å°åŒ–ä½¿ç”¨åŸåˆ™</strong>ï¼šä»…ä½¿ç”¨å¿…è¦çš„æ³¨è§£ï¼Œé¿å…è¿‡åº¦é…ç½®</li>
<li><strong>ä¸€è‡´æ€§åŸåˆ™</strong>ï¼šç›¸åŒç±»å‹çš„ç»„ä»¶ä½¿ç”¨ç»Ÿä¸€çš„æ³¨è§£é…ç½®é£æ ¼</li>
</ol>
<h4 data-id="heading-40">4.2 è§†å›¾ç»„ä»¶</h4>
<p>è§†å›¾ç»„ä»¶æ˜¯Ooder A2UIåº”ç”¨çš„æ ¸å¿ƒï¼Œè´Ÿè´£UIå±•ç¤ºå’Œç”¨æˆ·äº¤äº’ï¼Œé€šè¿‡æ³¨è§£å®šä¹‰å’Œé…ç½®ã€‚</p>
<h5 data-id="heading-41">4.2.1 ç»„ä»¶åˆ†ç±»</h5>
<p><strong>1. åŸºæœ¬ç»„ä»¶</strong></p>
<ul>
<li>å®šä¹‰ï¼šæä¾›åŸºæœ¬UIåŠŸèƒ½çš„åŸå­ç»„ä»¶</li>
<li>ç¤ºä¾‹ï¼šè¾“å…¥æ¡†ã€æŒ‰é’®ã€ä¸‹æ‹‰æ¡†ã€æ—¥æœŸé€‰æ‹©å™¨ç­‰</li>
<li>ç‰¹ç‚¹ï¼šåŠŸèƒ½å•ä¸€ï¼Œé«˜åº¦å¯å¤ç”¨</li>
<li>å®ç°ï¼šé€šè¿‡å­—æ®µæ³¨è§£å®šä¹‰ï¼Œå¦‚<code>@InputAnnotation</code>ã€<code>@ButtonAnnotation</code>ç­‰</li>
</ul>
<p><strong>2. å®¹å™¨ç»„ä»¶</strong></p>
<ul>
<li>å®šä¹‰ï¼šç”¨äºç»„ç»‡å’Œå¸ƒå±€å…¶ä»–ç»„ä»¶çš„ç»„ä»¶</li>
<li>ç¤ºä¾‹ï¼šè¡¨å•ã€ç½‘æ ¼ã€æ ‡ç­¾é¡µã€é¢æ¿ç­‰</li>
<li>ç‰¹ç‚¹ï¼šå¯ä»¥åŒ…å«å…¶ä»–ç»„ä»¶ï¼Œç®¡ç†å­ç»„ä»¶çš„å¸ƒå±€å’Œç”Ÿå‘½å‘¨æœŸ</li>
<li>å®ç°ï¼šé€šè¿‡è§†å›¾æ³¨è§£å®šä¹‰ï¼Œå¦‚<code>@FormAnnotation</code>ã€<code>@GridAnnotation</code>ç­‰</li>
</ul>
<p><strong>3. å¯¼èˆªç»„ä»¶</strong></p>
<ul>
<li>å®šä¹‰ï¼šç”¨äºå®ç°é¡µé¢å¯¼èˆªå’Œæ•°æ®å±•ç¤ºçš„ç»„ä»¶</li>
<li>ç¤ºä¾‹ï¼šæ ‘å½¢ç»“æ„ã€èœå•ã€é¢åŒ…å±‘ç­‰</li>
<li>ç‰¹ç‚¹ï¼šé€šå¸¸ç”¨äºå±•ç¤ºå±‚çº§æ•°æ®ï¼Œå®ç°å¯¼èˆªåŠŸèƒ½</li>
<li>å®ç°ï¼šé€šè¿‡ç‰¹å®šçš„è§†å›¾æ³¨è§£å®šä¹‰ï¼Œå¦‚<code>@TreeAnnotation</code>ç­‰</li>
</ul>
<p><strong>4. æ•°æ®å¯è§†åŒ–ç»„ä»¶</strong></p>
<ul>
<li>å®šä¹‰ï¼šç”¨äºå±•ç¤ºå’Œåˆ†ææ•°æ®çš„ç»„ä»¶</li>
<li>ç¤ºä¾‹ï¼šå›¾è¡¨ã€æŠ¥è¡¨ã€ä»ªè¡¨ç›˜ç­‰</li>
<li>ç‰¹ç‚¹ï¼šæ”¯æŒå¤šç§æ•°æ®å±•ç¤ºæ–¹å¼ï¼Œå¯è§†åŒ–æ•ˆæœä¸°å¯Œ</li>
<li>å®ç°ï¼šé€šè¿‡ç‰¹å®šçš„è§†å›¾æ³¨è§£å®šä¹‰ï¼Œå¦‚<code>@ChartAnnotation</code>ç­‰</li>
</ul>
<h5 data-id="heading-42">4.2.2 ç»„ä»¶è®¾è®¡åŸåˆ™</h5>
<p>ä»æŠ€æœ¯æ–‡æ¡£ä¸­å¯ä»¥æå–å‡ºOoderè§†å›¾ç»„ä»¶çš„è®¾è®¡åŸåˆ™ï¼š</p>
<ol>
<li>
<p><strong>å®¹å™¨ç»„ä»¶ä¸å±•ç¤ºç»„ä»¶åˆ†ç¦»</strong></p>
<ul>
<li>å®¹å™¨ç»„ä»¶è´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†å’Œæ•°æ®ç®¡ç†</li>
<li>å±•ç¤ºç»„ä»¶è´Ÿè´£UIæ¸²æŸ“ï¼Œæ— çŠ¶æ€</li>
<li>æé«˜ç»„ä»¶çš„å¯å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§</li>
</ul>
</li>
<li>
<p><strong>Pageä¸ºä¸­å¿ƒçš„å‰ç«¯ç»„ä»¶ç»„ç»‡</strong></p>
<ul>
<li>Pageæ˜¯å‰ç«¯ç»„ä»¶çš„æ ¹å®¹å™¨ï¼Œç»„ç»‡æ‰€æœ‰å­ç»„ä»¶</li>
<li>åŠ¨æ€ç»„ä»¶åŠ è½½ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€åŠ è½½å’Œå¸è½½ç»„ä»¶</li>
<li>ç»Ÿä¸€ç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>é€šè¿‡PageCtxç®¡ç†é¡µé¢è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>å››åˆ†ç¦»è®¾è®¡åŸåˆ™</strong></p>
<ul>
<li>å±æ€§ã€æ ·å¼ã€äº‹ä»¶ã€è¡Œä¸ºåˆ†ç¦»</li>
<li>å®ç°é«˜å†…èšä½è€¦åˆçš„ç»„ä»¶è®¾è®¡</li>
<li>ä¾¿äºç»´æŠ¤å’Œæ‰©å±•</li>
</ul>
</li>
</ol>
<h4 data-id="heading-43">4.3 æœåŠ¡ç»„ä»¶</h4>
<p>æœåŠ¡ç»„ä»¶è´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæä¾›Webå¯è®¿é—®çš„æœåŠ¡æ–¹æ³•ï¼Œæ˜¯Ooder A2UIåç«¯çš„æ ¸å¿ƒã€‚</p>
<h5 data-id="heading-44">4.3.1 æœåŠ¡åˆ†ç±»</h5>
<p><strong>1. APIæœåŠ¡</strong></p>
<ul>
<li>å®šä¹‰ï¼šé€šè¿‡<code>@RestController</code>æ³¨è§£å®šä¹‰Webå¯è®¿é—®çš„æœåŠ¡</li>
<li>ç‰¹ç‚¹ï¼šç›´æ¥å¯¹å¤–æš´éœ²HTTPæ¥å£ï¼Œå¤„ç†å‰åç«¯é€šè®¯</li>
<li>å®ç°ï¼šä½¿ç”¨SpringMVCæ³¨è§£ï¼Œå¦‚<code>@GetMapping</code>ã€<code>@PostMapping</code>ç­‰</li>
<li>ç¤ºä¾‹ï¼š
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/employee/management")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeManagementController</span> {
    <span class="hljs-meta">@PostMapping("/save")</span>
    <span class="hljs-keyword">public</span> ResultModel&lt;Boolean&gt; <span class="hljs-title function_">saveEmployee</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> EmployeeManagementView view)</span> {
        <span class="hljs-comment">// ä¿å­˜å‘˜å·¥ä¿¡æ¯é€»è¾‘</span>
    }
}
</code></pre>
</li>
</ul>
<p><strong>2. ä¸šåŠ¡æœåŠ¡</strong></p>
<ul>
<li>å®šä¹‰ï¼šå®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</li>
<li>ç‰¹ç‚¹ï¼šå°è£…ä¸šåŠ¡è§„åˆ™å’Œå¤„ç†é€»è¾‘ï¼Œè¢«APIæœåŠ¡è°ƒç”¨</li>
<li>å®ç°ï¼šä½¿ç”¨<code>@Service</code>æ³¨è§£</li>
<li>ç¤ºä¾‹ï¼š
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeManagementService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">saveEmployee</span><span class="hljs-params">(EmployeeManagementView view)</span> {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘å¤„ç†</span>
    }
}
</code></pre>
</li>
</ul>
<p><strong>3. èšåˆæœåŠ¡</strong></p>
<ul>
<li>å®šä¹‰ï¼šé€šè¿‡<code>@Aggregation</code>æ³¨è§£å®ç°æœåŠ¡èšåˆ</li>
<li>ç‰¹ç‚¹ï¼šæ•´åˆå¤šä¸ªæœåŠ¡çš„åŠŸèƒ½ï¼Œæä¾›ç»Ÿä¸€çš„æœåŠ¡æ¥å£</li>
<li>å®ç°ï¼šä½¿ç”¨<code>@Aggregation</code>æ³¨è§£ï¼ŒæŒ‡å®šèšåˆç±»å‹å’Œç”¨æˆ·ç©ºé—´</li>
<li>ç¤ºä¾‹ï¼š
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aggregation(type = AggregationType.API, userSpace = UserSpace.SYS)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AggregatedService</span> {
    <span class="hljs-comment">// èšåˆæœåŠ¡å®ç°</span>
}
</code></pre>
</li>
</ul>
<h5 data-id="heading-45">4.3.2 æœåŠ¡è®¾è®¡åŸåˆ™</h5>
<p>ä»æŠ€æœ¯æ–‡æ¡£ä¸­å¯ä»¥æå–å‡ºOoderæœåŠ¡ç»„ä»¶çš„è®¾è®¡åŸåˆ™ï¼š</p>
<ol>
<li>
<p><strong>ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®è®¿é—®åˆ†ç¦»</strong></p>
<ul>
<li>æœåŠ¡å±‚è´Ÿè´£ä¸šåŠ¡é€»è¾‘ï¼Œä»“åº“å±‚è´Ÿè´£æ•°æ®è®¿é—®</li>
<li>æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§</li>
</ul>
</li>
<li>
<p><strong>æœåŠ¡æ–¹æ³•å•ä¸€èŒè´£</strong></p>
<ul>
<li>æ¯ä¸ªæœåŠ¡æ–¹æ³•åªåšä¸€ä»¶äº‹</li>
<li>æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</li>
</ul>
</li>
<li>
<p><strong>ç»Ÿä¸€è¿”å›æ ¼å¼</strong></p>
<ul>
<li>ä½¿ç”¨<code>ResultModel</code>ç»Ÿä¸€APIè¿”å›æ ¼å¼</li>
<li>åŒ…å«çŠ¶æ€ç ã€æ¶ˆæ¯å’Œæ•°æ®</li>
<li>ä¾¿äºå‰ç«¯ç»Ÿä¸€å¤„ç†å“åº”</li>
</ul>
</li>
<li>
<p><strong>å¼‚å¸¸å¤„ç†è§„èŒƒ</strong></p>
<ul>
<li>æä¾›å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶</li>
<li>ç»Ÿä¸€å¼‚å¸¸æ ¼å¼ï¼Œä¾¿äºå‰ç«¯å¤„ç†</li>
</ul>
</li>
</ol>
<h4 data-id="heading-46">4.4 é€šè®¯ç»„ä»¶</h4>
<p>é€šè®¯ç»„ä»¶è´Ÿè´£å‰åç«¯æ•°æ®äº¤äº’ï¼Œæ˜¯è¿æ¥å‰ç«¯è§†å›¾å’Œåç«¯æœåŠ¡çš„æ¡¥æ¢ã€‚</p>
<h5 data-id="heading-47">4.4.1 æ ¸å¿ƒé€šè®¯ç»„ä»¶</h5>
<p><strong>1. APIEvent</strong></p>
<ul>
<li>å®šä¹‰ï¼šå®šä¹‰å‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡çš„ç»‘å®šå…³ç³»</li>
<li>å®ç°ï¼šé€šè¿‡<code>@APIEventAnnotation</code>æ³¨è§£å®šä¹‰</li>
<li>ç‰¹ç‚¹ï¼šæ”¯æŒäº‹ä»¶ç»‘å®šã€æœåŠ¡è°ƒç”¨ã€æ•°æ®å¤„ç†ç­‰åŠŸèƒ½</li>
<li>ä½œç”¨ï¼šå°†å‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡ç»‘å®šï¼Œå®ç°å‰åç«¯äº¤äº’</li>
</ul>
<p><strong>2. RequestPathEnum/ResponsePathEnum</strong></p>
<ul>
<li>å®šä¹‰ï¼šæ§åˆ¶å‰åç«¯æ•°æ®æµå‘çš„æšä¸¾ç±»</li>
<li>å®ç°ï¼šé€šè¿‡æšä¸¾å€¼å®šä¹‰æ•°æ®æµå‘</li>
<li>ç‰¹ç‚¹ï¼šæ”¯æŒå¤šç§æ•°æ®æµå‘ï¼Œå¦‚CURRFORMã€DATAã€CONTEXTç­‰</li>
<li>ä½œç”¨ï¼šæ§åˆ¶è¯·æ±‚å’Œå“åº”çš„æ•°æ®è·¯å¾„ï¼Œå®ç°æ•°æ®çš„æ­£ç¡®ä¼ é€’</li>
</ul>
<p><strong>3. ResultModel</strong></p>
<ul>
<li>å®šä¹‰ï¼šç»Ÿä¸€çš„APIè¿”å›æ ¼å¼</li>
<li>å®ç°ï¼šåŒ…å«codeã€messageã€dataç­‰å­—æ®µ</li>
<li>ç‰¹ç‚¹ï¼šç»Ÿä¸€çš„è¿”å›æ ¼å¼ï¼Œä¾¿äºå‰ç«¯å¤„ç†</li>
<li>ä½œç”¨ï¼šç¡®ä¿APIè¿”å›æ ¼å¼ä¸€è‡´ï¼Œä¾¿äºå‰ç«¯ç»Ÿä¸€å¤„ç†å“åº”</li>
</ul>
<h5 data-id="heading-48">4.4.2 é€šè®¯æœºåˆ¶</h5>
<p>ä»æŠ€æœ¯æ–‡æ¡£ä¸­å¯ä»¥æå–å‡ºOoderçš„é€šè®¯æœºåˆ¶ï¼š</p>
<ol>
<li>
<p><strong>æ³¨è§£é©±åŠ¨çš„é€šè®¯</strong></p>
<ul>
<li>é€šè¿‡<code>@APIEventAnnotation</code>å®šä¹‰é€šè®¯è¡Œä¸º</li>
<li>åœ¨Pageåˆå§‹åŒ–æ—¶åŠ¨æ€å®Œæˆé€šè®¯ç»„ä»¶çš„æ³¨å…¥</li>
<li>é€šè¿‡æ³¨è§£æ‰©å±•é€šè®¯ç»„ä»¶çš„è¡Œä¸º</li>
<li>æ”¯æŒé€šè¿‡æ³¨è§£çµæ´»é…ç½®é€šè®¯å‚æ•°</li>
</ul>
</li>
<li>
<p><strong>é€šè®¯ç»„ä»¶ä¸å®¹å™¨ç»„ä»¶çš„ç»‘å®š</strong></p>
<ul>
<li>Pageåˆå§‹åŒ–æ—¶è‡ªåŠ¨å®Œæˆç»‘å®š</li>
<li>æ”¯æŒæ‰‹åŠ¨æŒ‡å®šç»‘å®šå…³ç³»</li>
<li>æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´ç»‘å®šå…³ç³»</li>
<li>é€šè¿‡ç»‘å®šæœºåˆ¶å®ç°ç»„ä»¶é—´è§£è€¦</li>
</ul>
</li>
</ol>
<h4 data-id="heading-49">4.5 Pageæœºåˆ¶</h4>
<p>Pageæ˜¯Ooderå¹³å°ä¸­é¢å‘ç”¨æˆ·çš„æœ€å°å•ä½ï¼Œä½œä¸ºè§†å›¾çš„å®¹å™¨ï¼Œå®ƒå°†å„ç§è§†å›¾ç»„ä»¶æœ‰æœºåœ°ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p>
<h5 data-id="heading-50">4.5.1 æ ¸å¿ƒåŠŸèƒ½</h5>
<p><strong>1. åŠ¨æ€åŒ…è£…</strong></p>
<ul>
<li>å®ç°ï¼šé€šè¿‡Webå®¹å™¨æ‹¦æˆªæœºåˆ¶åŠ¨æ€åŒ…è£…Page</li>
<li>ä½œç”¨ï¼šå°†è§†å›¾å¯¹è±¡è‡ªåŠ¨åŒ…è£…ä¸ºPageå¯¹è±¡ï¼Œæ·»åŠ å…¬å…±æ€§æ”¯æ’‘åŠŸèƒ½</li>
</ul>
<p><strong>2. ç»„ä»¶ç»„ç»‡</strong></p>
<ul>
<li>å®ç°ï¼šå°†å„ç§è§†å›¾ç»„ä»¶æœ‰æœºåœ°ç»„ç»‡åœ¨Pageä¸­</li>
<li>ä½œç”¨ï¼šç®¡ç†é¡µé¢çš„å¸ƒå±€å’Œç»„ä»¶å±‚æ¬¡ç»“æ„</li>
</ul>
<p><strong>3. ç¯å¢ƒç®¡ç†</strong></p>
<ul>
<li>å®ç°ï¼šåŒ…å«å½“å‰ç¯å¢ƒå˜é‡ã€æ•°æ®é€šè®¯ç»„ä»¶ã€æ¶ˆæ¯ç»„ä»¶ã€æ ·å¼ä¸»ä½“ç»„ä»¶ç­‰å…¬å…±æ€§æ”¯æ’‘åŠŸèƒ½</li>
<li>ä½œç”¨ï¼šä¸ºé¡µé¢å†…çš„ç»„ä»¶æä¾›å…¬å…±æœåŠ¡å’Œèµ„æº</li>
</ul>
<p><strong>4. ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></p>
<ul>
<li>å®ç°ï¼šç®¡ç†Pageçš„åˆ›å»ºã€åˆå§‹åŒ–ã€è¿è¡Œå’Œé”€æ¯è¿‡ç¨‹</li>
<li>ä½œç”¨ï¼šç¡®ä¿é¡µé¢å’Œç»„ä»¶çš„æ­£ç¡®åˆå§‹åŒ–å’Œé”€æ¯</li>
<li>æä¾›å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•</li>
</ul>
<p><strong>Pageç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</strong>ï¼š</p>






























<table><thead><tr><th>ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ</th><th>é’©å­å‡½æ•°</th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td>Pageåˆå§‹åŒ–</td><td><code>onPageCreate(PageCtx ctx)</code></td><td>åˆå§‹åŒ–ä¸Šä¸‹æ–‡ã€åŠ è½½å…¬å…±èµ„æº</td></tr><tr><td>ç»„ä»¶æ¸²æŸ“å‰</td><td><code>onComponentBeforeMount(ComponentMeta meta)</code></td><td>ä¿®æ”¹ç»„ä»¶åˆå§‹é…ç½®</td></tr><tr><td>ç»„ä»¶æ¸²æŸ“å</td><td><code>onComponentMounted(DOMElement el)</code></td><td>ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€åˆå§‹åŒ–ç¬¬ä¸‰æ–¹æ’ä»¶</td></tr><tr><td>Pageé”€æ¯</td><td><code>onPageDestroy()</code></td><td>é‡Šæ”¾èµ„æºã€å–æ¶ˆäº‹ä»¶ç›‘å¬</td></tr></tbody></table>
<h5 data-id="heading-51">4.5.2 PageåŠ¨æ€ç”Ÿæˆæœºåˆ¶</h5>
<p>ä»æŠ€æœ¯æ–‡æ¡£ä¸­å¯ä»¥æå–å‡ºPageåŠ¨æ€ç”Ÿæˆæœºåˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·ç›´æ¥è®¿é—®è§†å›¾å…¥å£URL</span>
<span class="hljs-comment">// Webå®¹å™¨æ‹¦æˆªè¯·æ±‚å¹¶åŠ¨æ€ç”ŸæˆPageå¯¹è±¡</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user/management")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManagementViewController</span> {
    <span class="hljs-comment">// è§†å›¾å…¥å£æ–¹æ³•å…·æœ‰Webå¯è®¿é—®æ€§</span>
    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> UserManagementView <span class="hljs-title function_">getUserManagementView</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è¿”å›è§†å›¾å¯¹è±¡ï¼ŒWebå®¹å™¨è‡ªåŠ¨åŒ…è£…ä¸ºPage</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserManagementView</span>();
    }
}
</code></pre>
<p><strong>PageåŠ¨æ€ç”Ÿæˆæµç¨‹</strong>ï¼š</p>
<ol>
<li>ç”¨æˆ·è®¿é—®è§†å›¾å…¥å£URL</li>
<li>Webå®¹å™¨æ‹¦æˆªè¯·æ±‚</li>
<li>è°ƒç”¨è§†å›¾å…¥å£æ–¹æ³•è·å–è§†å›¾å¯¹è±¡</li>
<li>åŠ¨æ€ç”ŸæˆPageå¯¹è±¡ï¼ŒåŒ…è£…è§†å›¾å¯¹è±¡</li>
<li>åˆå§‹åŒ–Pageä¸Šä¸‹æ–‡å’Œé€šè®¯ç»„ä»¶</li>
<li>è¿”å›å®Œæ•´çš„Pageå¯¹è±¡ç»™å‰ç«¯</li>
</ol>
<h5 data-id="heading-52">4.5.3 ä¸Šä¸‹æ–‡ç®¡ç†</h5>
<p>PageCtxæ˜¯Pageçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œè´Ÿè´£ç®¡ç†é¡µé¢è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ç¯å¢ƒå˜é‡å’Œæ•°æ®ï¼š</p>
<p><strong>1. ç¯å¢ƒå˜é‡ç®¡ç†</strong></p>
<ul>
<li>ç®¡ç†é¡µé¢è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ç¯å¢ƒå˜é‡</li>
<li>æä¾›å…¨å±€è®¿é—®æ¥å£</li>
</ul>
<p><strong>2. ç”¨æˆ·ä¼šè¯ç®¡ç†</strong></p>
<ul>
<li>ç®¡ç†ç”¨æˆ·ä¼šè¯ä¿¡æ¯</li>
<li>æ”¯æŒä¼šè¯çŠ¶æ€ä¿æŒ</li>
</ul>
<p><strong>3. é¡µé¢å‚æ•°ç®¡ç†</strong></p>
<ul>
<li>ç®¡ç†é¡µé¢å‚æ•°çš„ä¼ é€’å’ŒåŒæ­¥</li>
<li>æ”¯æŒURLå‚æ•°è‡ªåŠ¨æ±‡èš</li>
</ul>
<p><strong>4. æ•°æ®å…±äº«</strong></p>
<ul>
<li>å®ç°ä¸åŒç»„ä»¶é—´çš„æ•°æ®å…±äº«å’Œé€šä¿¡</li>
<li>æ”¯æŒç»„ä»¶é—´äº‹ä»¶ä¼ é€’</li>
</ul>
<p><strong>ä¸Šä¸‹æ–‡ç®¡ç†ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è§†å›¾å…¥å£ç±»</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/employee/management")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeManagementViewController</span> {
    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> EmployeeManagementView <span class="hljs-title function_">getEmployeeManagementView</span><span class="hljs-params">(
        <span class="hljs-meta">@RequestParam(required = false)</span> String departmentId,
        <span class="hljs-meta">@RequestParam(required = false)</span> String employeeName)</span> {
        
        <span class="hljs-type">EmployeeManagementView</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmployeeManagementView</span>();
        
        <span class="hljs-comment">// å‚æ•°ä¼šè‡ªåŠ¨æ±‡èšåˆ°Pageä¸Šä¸‹æ–‡ç¯å¢ƒ</span>
        <span class="hljs-comment">// PageCtxä¸­ä¼šåŒ…å«departmentIdå’ŒemployeeNameå‚æ•°</span>
        <span class="hljs-keyword">return</span> view;
    }
}
</code></pre>
<h3 data-id="heading-53">5. å·¥ä½œåŸç†</h3>
<h4 data-id="heading-54">5.1 ç¼–è¯‘æœŸæµç¨‹</h4>
<p>ç¼–è¯‘æœŸæµç¨‹æ˜¯Ooder A2UIå°†æ³¨è§£è½¬æ¢ä¸ºå¯æ‰§è¡Œç¨‹åºçš„ç¬¬ä¸€é˜¶æ®µï¼Œä¸»è¦åœ¨Pageåˆå§‹åŒ–è¿‡ç¨‹ä¸­å®Œæˆã€‚</p>
<h5 data-id="heading-55">5.1.1 æ³¨è§£æ‰«æä¸è§£æ</h5>
<ol>
<li>
<p><strong>è§†å›¾å±‚æ³¨è§£æ‰«æ</strong>ï¼š</p>
<ul>
<li>æ‰«æ<code>@FormViewAnnotation</code>ã€<code>@GridViewAnnotation</code>ç­‰è§†å›¾æ³¨è§£</li>
<li>ç¡®å®šè§†å›¾çš„ç±»å‹ã€å¸ƒå±€å’ŒåŸºæœ¬æ ·å¼</li>
<li>æå–è§†å›¾çš„è‡ªå®šä¹‰æœåŠ¡å’Œé…ç½®ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>å­—æ®µæ³¨è§£æ‰«æ</strong>ï¼š</p>
<ul>
<li>æ‰«æ<code>@InputAnnotation</code>ã€<code>@DatePickerAnnotation</code>ç­‰å­—æ®µæ³¨è§£</li>
<li>ç¡®å®šæ¯ä¸ªå­—æ®µçš„ç±»å‹ã€éªŒè¯è§„åˆ™å’ŒåŸºæœ¬æ ·å¼</li>
<li>æå–å­—æ®µçš„å¤–è§‚é…ç½®å’Œäº¤äº’è¡Œä¸º</li>
</ul>
</li>
<li>
<p><strong>è¡Œä¸ºæ³¨è§£æ‰«æ</strong>ï¼š</p>
<ul>
<li>æ‰«æ<code>@APIEventAnnotation</code>ç­‰è¡Œä¸ºæ³¨è§£</li>
<li>ç¡®å®šç»„ä»¶çš„äº‹ä»¶å’Œäº¤äº’è¡Œä¸º</li>
<li>æå–äº‹ä»¶ç»‘å®šçš„æœåŠ¡å’Œå‚æ•°é…ç½®</li>
</ul>
</li>
<li>
<p><strong>é…ç½®æ³¨è§£æ‰«æ</strong>ï¼š</p>
<ul>
<li>æ‰«æ<code>@CustomAnnotation</code>ç­‰é…ç½®æ³¨è§£</li>
<li>æå–ç»„ä»¶çš„å¤–è§‚é…ç½®å’Œå¢å¼ºåŠŸèƒ½</li>
<li>åˆå¹¶å’Œå¤„ç†æ³¨è§£é…ç½®ï¼Œæ¶ˆé™¤å†²çª</li>
</ul>
</li>
</ol>
<h5 data-id="heading-56">5.1.2 ç»„ä»¶ç»“æ„ç”Ÿæˆ</h5>
<p>å°†æ³¨è§£ä¿¡æ¯è½¬æ¢ä¸ºå‰ç«¯ç»„ä»¶çš„é…ç½®ä¿¡æ¯ï¼Œç”Ÿæˆç»„ä»¶çš„é™æ€ç»“æ„å’Œåˆå§‹çŠ¶æ€ã€‚</p>
<ol>
<li>
<p><strong>è§†å›¾ç»„ä»¶ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®è§†å›¾å±‚æ³¨è§£ç”Ÿæˆå¯¹åº”çš„å‰ç«¯è§†å›¾ç»„ä»¶</li>
<li>è®¾ç½®è§†å›¾çš„å¸ƒå±€ã€æ ·å¼å’Œåˆå§‹çŠ¶æ€</li>
<li>ç”Ÿæˆè§†å›¾çš„å®¹å™¨ç»“æ„å’Œå­ç»„ä»¶å ä½ç¬¦</li>
</ul>
</li>
<li>
<p><strong>å­—æ®µç»„ä»¶ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®å­—æ®µæ³¨è§£ç”Ÿæˆå…·ä½“çš„UIæ§ä»¶</li>
<li>è®¾ç½®æ§ä»¶çš„ç±»å‹ã€éªŒè¯è§„åˆ™å’Œåˆå§‹å€¼</li>
<li>ç”Ÿæˆæ§ä»¶çš„DOMç»“æ„å’Œäº‹ä»¶ç»‘å®š</li>
</ul>
</li>
<li>
<p><strong>å®¹å™¨ç»„ä»¶ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®å®¹å™¨æ³¨è§£ç”Ÿæˆå®¹å™¨ç±»ç»„ä»¶</li>
<li>è®¾ç½®å®¹å™¨çš„å¸ƒå±€æ–¹å¼å’Œå­ç»„ä»¶ç®¡ç†è§„åˆ™</li>
<li>ç”Ÿæˆå®¹å™¨çš„DOMç»“æ„å’Œæ ·å¼</li>
</ul>
</li>
<li>
<p><strong>é…ç½®ä¿¡æ¯ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®é…ç½®æ³¨è§£ç”Ÿæˆç»„ä»¶çš„å¤–è§‚å’Œè¡Œä¸ºé…ç½®</li>
<li>ç”Ÿæˆç»„ä»¶çš„JSONé…ç½®ï¼ŒåŒ…æ‹¬å±æ€§ã€æ ·å¼ã€äº‹ä»¶å’Œè¡Œä¸º</li>
<li>å°†é…ç½®ä¿¡æ¯å­˜å‚¨åœ¨ç»„ä»¶çš„é™æ€å±æ€§ä¸­</li>
</ul>
</li>
</ol>
<h5 data-id="heading-57">5.1.3 äº‹ä»¶ç»‘å®šè£…é…</h5>
<p>åœ¨Pageåˆå§‹åŒ–æ—¶å®Œæˆé€šè®¯ç»„ä»¶çš„è£…é…åŠå‰ç«¯ç»„ä»¶äº‹ä»¶ç»‘å®šã€‚</p>
<ol>
<li>
<p><strong>é€šè®¯ç»„ä»¶è£…é…</strong>ï¼š</p>
<ul>
<li>å°†è§†å›¾æ‰€éœ€çš„æ•°æ®æ¥å£è½¬æ¢ä¸ºAjaxå®šä¹‰</li>
<li>åˆå§‹åŒ–é€šè®¯ç»„ä»¶ï¼Œè®¾ç½®è¯·æ±‚URLå’Œå‚æ•°</li>
<li>é…ç½®é€šè®¯ç»„ä»¶çš„å›è°ƒå‡½æ•°å’Œé”™è¯¯å¤„ç†</li>
</ul>
</li>
<li>
<p><strong>äº‹ä»¶ç»‘å®š</strong>ï¼š</p>
<ul>
<li>å°†ç»„ä»¶çš„Eventå®šä¹‰å®ä¾‹åŒ–å¹¶ä¸è§†å›¾/å…ƒç´ è¿›è¡Œç»‘å®š</li>
<li>ä¸ºç»„ä»¶æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œç»‘å®šåˆ°å¯¹åº”çš„å¤„ç†å‡½æ•°</li>
<li>é…ç½®äº‹ä»¶çš„è§¦å‘æ¡ä»¶å’Œæ‰§è¡Œé¡ºåº</li>
</ul>
</li>
<li>
<p><strong>å‚æ•°æ±‡èš</strong>ï¼š</p>
<ul>
<li>æ ¹æ®è§†å›¾å…¥å£æ–¹æ³•çš„å‚æ•°ï¼Œå°†å‚æ•°æ±‡èšåˆ°PageCtxé¡µé¢å½“å‰ç¯å¢ƒä¸­</li>
<li>å¤„ç†URLå‚æ•°ã€è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“å‚æ•°</li>
<li>ä¸ºé¡µé¢å†…çš„ç»„ä»¶æä¾›å¯ç”¨çš„ä¸Šä¸‹æ–‡æ•°æ®</li>
</ul>
</li>
<li>
<p><strong>æœåŠ¡ç»‘å®š</strong>ï¼š</p>
<ul>
<li>å°†è§†å›¾æ‰€éœ€çš„æœåŠ¡ç«¯äº¤äº’ä»è§†å›¾ç»‘å®šçš„æœåŠ¡ç±»ä¸­è·å–å¯Webè®¿é—®çš„methodæ–¹æ³•</li>
<li>å»ºç«‹å‰ç«¯ç»„ä»¶äº‹ä»¶ä¸åç«¯æœåŠ¡æ–¹æ³•çš„æ˜ å°„å…³ç³»</li>
<li>é…ç½®æœåŠ¡è°ƒç”¨çš„å‚æ•°è½¬æ¢å’Œå“åº”å¤„ç†</li>
</ul>
</li>
</ol>
<h4 data-id="heading-58">5.2 è¿è¡ŒæœŸæµç¨‹</h4>
<p>è¿è¡ŒæœŸæµç¨‹æ˜¯Ooder A2UIå°†æ³¨è§£è½¬æ¢ä¸ºå¯æ‰§è¡Œç¨‹åºçš„ç¬¬äºŒé˜¶æ®µï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€è°ƒæ•´ç»„ä»¶çŠ¶æ€ã€‚</p>
<h5 data-id="heading-59">5.2.1 Pageåˆå§‹åŒ–</h5>
<ol>
<li>
<p><strong>è¯·æ±‚æ‹¦æˆª</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·è®¿é—®è§†å›¾å…¥å£URL</li>
<li>Webå®¹å™¨æ‹¦æˆªè¯·æ±‚ï¼Œè°ƒç”¨å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•</li>
<li>æ§åˆ¶å™¨æ–¹æ³•è¿”å›è§†å›¾å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>PageåŠ¨æ€ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>Webå®¹å™¨è‡ªåŠ¨å°†è§†å›¾å¯¹è±¡åŒ…è£…ä¸ºPageå¯¹è±¡</li>
<li>åˆå§‹åŒ–Pageçš„ä¸Šä¸‹æ–‡ç¯å¢ƒå’Œå…¬å…±ç»„ä»¶</li>
<li>åŠ è½½é¡µé¢æ‰€éœ€çš„èµ„æºå’Œæ ·å¼</li>
</ul>
</li>
<li>
<p><strong>ç»„ä»¶åˆå§‹åŒ–</strong>ï¼š</p>
<ul>
<li>æ ¹æ®ç¼–è¯‘æœŸç”Ÿæˆçš„é…ç½®åˆå§‹åŒ–ç»„ä»¶</li>
<li>ä¸ºç»„ä»¶ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°</li>
<li>åŠ è½½ç»„ä»¶çš„åˆå§‹æ•°æ®</li>
</ul>
</li>
</ol>
<h5 data-id="heading-60">5.2.2 ç»„ä»¶æ¸²æŸ“</h5>
<ol>
<li>
<p><strong>é™æ€æ¨¡æ¿æ¸²æŸ“</strong>ï¼š</p>
<ul>
<li>å‰ç«¯ä½¿ç”¨é™æ€æ¨¡æ¿æ¸²æŸ“ç»„ä»¶</li>
<li>æ ¹æ®ç»„ä»¶çš„JSONé…ç½®ç”ŸæˆDOMç»“æ„</li>
<li>åº”ç”¨ç»„ä»¶çš„æ ·å¼å’Œå±æ€§</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®ç»‘å®š</strong>ï¼š</p>
<ul>
<li>å°†PageCtxä¸­çš„æ•°æ®ç»‘å®šåˆ°ç»„ä»¶ä¸Š</li>
<li>åˆå§‹åŒ–ç»„ä»¶çš„åˆå§‹çŠ¶æ€</li>
<li>ä¸ºç»„ä»¶è®¾ç½®é»˜è®¤å€¼å’Œåˆå§‹å±æ€§</li>
</ul>
</li>
<li>
<p><strong>äº‹ä»¶ç»‘å®š</strong>ï¼š</p>
<ul>
<li>ä¸ºç»„ä»¶ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°</li>
<li>å»ºç«‹å‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡çš„æ˜ å°„å…³ç³»</li>
<li>é…ç½®äº‹ä»¶çš„è§¦å‘æ¡ä»¶å’Œæ‰§è¡Œé¡ºåº</li>
</ul>
</li>
</ol>
<h5 data-id="heading-61">5.2.3 ç”¨æˆ·äº¤äº’å¤„ç†</h5>
<ol>
<li>
<p><strong>äº‹ä»¶è§¦å‘</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¸ç»„ä»¶äº¤äº’ï¼Œè§¦å‘ç»„ä»¶äº‹ä»¶</li>
<li>äº‹ä»¶å¤„ç†å‡½æ•°è¢«è°ƒç”¨ï¼Œè·å–äº‹ä»¶ä¸Šä¸‹æ–‡</li>
<li>å‡†å¤‡äº‹ä»¶è°ƒç”¨çš„å‚æ•°å’Œé…ç½®</li>
</ul>
</li>
<li>
<p><strong>æœåŠ¡è°ƒç”¨</strong>ï¼š</p>
<ul>
<li>æ ¹æ®äº‹ä»¶é…ç½®è°ƒç”¨åç«¯å¯¹åº”çš„æœåŠ¡æ–¹æ³•</li>
<li>é€šè¿‡é€šè®¯ç»„ä»¶å‘é€Ajaxè¯·æ±‚</li>
<li>ä¼ é€’è¯·æ±‚å‚æ•°å’Œä¸Šä¸‹æ–‡æ•°æ®</li>
</ul>
</li>
<li>
<p><strong>å“åº”å¤„ç†</strong>ï¼š</p>
<ul>
<li>æ¥æ”¶åç«¯æœåŠ¡çš„å“åº”</li>
<li>å¤„ç†å“åº”æ•°æ®ï¼Œè½¬æ¢ä¸ºå‰ç«¯å¯ç”¨çš„æ ¼å¼</li>
<li>æ›´æ–°PageCtxä¸­çš„æ•°æ®å’Œç»„ä»¶çŠ¶æ€</li>
</ul>
</li>
<li>
<p><strong>çŠ¶æ€æ›´æ–°</strong>ï¼š</p>
<ul>
<li>æ ¹æ®å“åº”æ•°æ®æ›´æ–°ç»„ä»¶çŠ¶æ€</li>
<li>é‡æ–°æ¸²æŸ“å—å½±å“çš„ç»„ä»¶</li>
<li>ä¿æŒç»„ä»¶é—´çš„æ•°æ®ä¸€è‡´æ€§</li>
</ul>
</li>
</ol>
<h5 data-id="heading-62">5.2.4 åŠ¨æ€ç»„ä»¶ç®¡ç†</h5>
<ol>
<li>
<p><strong>ç»„ä»¶ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€ç”Ÿæˆç»„ä»¶</li>
<li>åˆå§‹åŒ–ç»„ä»¶çš„å±æ€§ã€æ ·å¼å’Œäº‹ä»¶</li>
<li>å°†ç»„ä»¶æ·»åŠ åˆ°Pageä¸­è¿›è¡Œç®¡ç†</li>
</ul>
</li>
<li>
<p><strong>ç»„ä»¶é”€æ¯</strong>ï¼š</p>
<ul>
<li>æ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€é”€æ¯ç»„ä»¶</li>
<li>ç§»é™¤ç»„ä»¶çš„äº‹ä»¶ç›‘å¬å™¨å’Œæ•°æ®ç»‘å®š</li>
<li>é‡Šæ”¾ç»„ä»¶å ç”¨çš„èµ„æº</li>
</ul>
</li>
<li>
<p><strong>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼š</p>
<ul>
<li>ç®¡ç†ç»„ä»¶çš„åˆ›å»ºã€åˆå§‹åŒ–ã€è¿è¡Œå’Œé”€æ¯è¿‡ç¨‹</li>
<li>è°ƒç”¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</li>
<li>ç¡®ä¿ç»„ä»¶çš„æ­£ç¡®åˆå§‹åŒ–å’Œé”€æ¯</li>
</ul>
</li>
</ol>
<h4 data-id="heading-63">5.3 æ•°æ®æµå‘</h4>
<p>Ooder A2UIçš„æ•°æ®æµå‘é€šè¿‡RequestPathEnumå’ŒResponsePathEnumè¿›è¡Œæ§åˆ¶ï¼Œç¡®ä¿æ•°æ®çš„æ­£ç¡®ä¼ é€’å’Œå¤„ç†ã€‚</p>
<h5 data-id="heading-64">5.3.1 è¯·æ±‚æ•°æ®æµ</h5>
<ol>
<li>
<p><strong>ç”¨æˆ·äº¤äº’</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¸å‰ç«¯ç»„ä»¶äº¤äº’ï¼Œè§¦å‘äº‹ä»¶</li>
<li>ç»„ä»¶æ”¶é›†ç”¨æˆ·è¾“å…¥çš„æ•°æ®</li>
<li>å‡†å¤‡äº‹ä»¶è°ƒç”¨çš„å‚æ•°</li>
</ul>
</li>
<li>
<p><strong>å‰ç«¯æ•°æ®å¤„ç†</strong>ï¼š</p>
<ul>
<li>æ ¹æ®<code>RequestPathEnum</code>ç¡®å®šæ•°æ®çš„æ¥æºå’Œæ ¼å¼</li>
<li>ä»PageCtxæˆ–ç»„ä»¶ä¸­è·å–æ•°æ®</li>
<li>è½¬æ¢æ•°æ®æ ¼å¼ï¼Œå‡†å¤‡å‘é€è¯·æ±‚</li>
</ul>
</li>
<li>
<p><strong>è¯·æ±‚å‘é€</strong>ï¼š</p>
<ul>
<li>é€šè®¯ç»„ä»¶å‘é€Ajaxè¯·æ±‚</li>
<li>ä¼ é€’è¯·æ±‚URLã€æ–¹æ³•å’Œå‚æ•°</li>
<li>è®¾ç½®è¯·æ±‚å¤´å’Œèº«ä»½éªŒè¯ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>åç«¯æ•°æ®å¤„ç†</strong>ï¼š</p>
<ul>
<li>åç«¯æ§åˆ¶å™¨æ¥æ”¶è¯·æ±‚</li>
<li>å¤„ç†è¯·æ±‚å‚æ•°ï¼Œè½¬æ¢ä¸ºä¸šåŠ¡å¯¹è±¡</li>
<li>è°ƒç”¨ä¸šåŠ¡æœåŠ¡å¤„ç†ä¸šåŠ¡é€»è¾‘</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®åº“æ“ä½œ</strong>ï¼š</p>
<ul>
<li>ä¸šåŠ¡æœåŠ¡è°ƒç”¨æ•°æ®è®¿é—®å±‚</li>
<li>æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ“ä½œ</li>
<li>è¿”å›æ“ä½œç»“æœ</li>
</ul>
</li>
</ol>
<h5 data-id="heading-65">5.3.2 å“åº”æ•°æ®æµ</h5>
<ol>
<li>
<p><strong>åç«¯å“åº”ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>ä¸šåŠ¡æœåŠ¡å¤„ç†å®Œæˆï¼Œè¿”å›ç»“æœ</li>
<li>æ§åˆ¶å™¨å°†ç»“æœè½¬æ¢ä¸º<code>ResultModel</code>æ ¼å¼</li>
<li>è®¾ç½®å“åº”çŠ¶æ€ç å’Œæ¶ˆæ¯</li>
</ul>
</li>
<li>
<p><strong>å“åº”å‘é€</strong>ï¼š</p>
<ul>
<li>åç«¯å‘é€å“åº”ç»™å‰ç«¯</li>
<li>ä¼ é€’å“åº”æ•°æ®å’ŒçŠ¶æ€ä¿¡æ¯</li>
<li>è®¾ç½®å“åº”å¤´å’Œç¼“å­˜æ§åˆ¶</li>
</ul>
</li>
<li>
<p><strong>å‰ç«¯å“åº”å¤„ç†</strong>ï¼š</p>
<ul>
<li>é€šè®¯ç»„ä»¶æ¥æ”¶å“åº”</li>
<li>è§£æå“åº”æ•°æ®ï¼Œæ£€æŸ¥çŠ¶æ€ç </li>
<li>æ ¹æ®<code>ResponsePathEnum</code>ç¡®å®šæ•°æ®çš„ç›®æ ‡å’Œæ ¼å¼</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®æ›´æ–°</strong>ï¼š</p>
<ul>
<li>æ›´æ–°PageCtxä¸­çš„æ•°æ®</li>
<li>é€šçŸ¥ç›¸å…³ç»„ä»¶æ•°æ®å·²æ›´æ–°</li>
<li>é‡æ–°æ¸²æŸ“å—å½±å“çš„ç»„ä»¶</li>
</ul>
</li>
<li>
<p><strong>UIæ›´æ–°</strong>ï¼š</p>
<ul>
<li>ç»„ä»¶æ ¹æ®æ–°çš„æ•°æ®é‡æ–°æ¸²æŸ“</li>
<li>æ›´æ–°ç”¨æˆ·ç•Œé¢ï¼Œå±•ç¤ºæœ€æ–°æ•°æ®</li>
<li>ä¿æŒç»„ä»¶é—´çš„æ•°æ®ä¸€è‡´æ€§</li>
</ul>
</li>
</ol>
<h5 data-id="heading-66">5.3.3 æ•°æ®æµå‘ç¤ºä¾‹ï¼šå‘˜å·¥ä¿¡æ¯ä¿å­˜</h5>
<p>ä»¥"å‘˜å·¥ä¿¡æ¯ä¿å­˜"ä¸ºä¾‹ï¼Œå±•ç¤ºOoder A2UIå®Œæ•´çš„æ•°æ®æµå‘ï¼š</p>
<p><strong>1. ç”¨æˆ·äº¤äº’</strong></p>
<ul>
<li>ç”¨æˆ·åœ¨å‘˜å·¥ç®¡ç†è¡¨å•ä¸­å¡«å†™å®Œæ•´ä¿¡æ¯åï¼Œç‚¹å‡»"ä¿å­˜"æŒ‰é’®</li>
<li>è§¦å‘<code>CustomAction.SAVE</code>äº‹ä»¶ï¼Œè¯¥äº‹ä»¶é€šè¿‡<code>@APIEventAnnotation</code>ç»‘å®šåˆ°ä¿å­˜æŒ‰é’®</li>
</ul>
<p><strong>2. å‰ç«¯å¤„ç†</strong></p>
<ul>
<li>é€šè®¯ç»„ä»¶æ ¹æ®<code>RequestPathEnum.CURRFORM</code>ä»PageCtxè·å–å½“å‰è¡¨å•æ•°æ®</li>
<li>æ•°æ®æ ¼å¼è½¬æ¢ä¸ºJSONï¼ŒåŒ…å«å‘˜å·¥IDã€å§“åã€éƒ¨é—¨ç­‰å®Œæ•´ä¿¡æ¯</li>
<li>é€šè®¯ç»„ä»¶å°è£…è¯·æ±‚ï¼Œè®¾ç½®URLä¸º<code>/employee/management/save</code>ï¼ŒHTTPæ–¹æ³•ä¸ºPOST</li>
</ul>
<p><strong>3. åç«¯å¤„ç†</strong></p>
<ul>
<li>åç«¯<code>EmployeeManagementController.saveEmployee()</code>æ¥æ”¶è¯·æ±‚</li>
<li>è¯·æ±‚å‚æ•°è‡ªåŠ¨è½¬æ¢ä¸º<code>EmployeeManagementView</code>å¯¹è±¡</li>
<li>è°ƒç”¨<code>EmployeeManagementService.saveEmployee()</code>æ‰§è¡Œä¸šåŠ¡é€»è¾‘</li>
<li>æœåŠ¡å±‚éªŒè¯æ•°æ®å®Œæ•´æ€§ï¼Œæ£€æŸ¥å‘˜å·¥IDæ˜¯å¦å·²å­˜åœ¨</li>
<li>ä»“åº“å±‚æ‰§è¡Œæ•°æ®åº“æ’å…¥æ“ä½œï¼Œä¿å­˜å‘˜å·¥ä¿¡æ¯</li>
<li>æœåŠ¡å±‚è¿”å›<code>ResultModel.success(true, "ä¿å­˜æˆåŠŸ")</code></li>
</ul>
<p><strong>4. å‰ç«¯å“åº”</strong></p>
<ul>
<li>é€šè®¯ç»„ä»¶æ¥æ”¶å“åº”ï¼Œè§£æ<code>ResultModel</code>æ ¼å¼æ•°æ®</li>
<li>æ ¹æ®<code>ResponsePathEnum.MESSAGE</code>æå–å“åº”æ¶ˆæ¯"ä¿å­˜æˆåŠŸ"</li>
<li>è°ƒç”¨<code>CustomOnExecueSuccess.MESSAGE</code>é…ç½®ï¼Œå±•ç¤ºæˆåŠŸæç¤º</li>
<li>æ›´æ–°PageCtxä¸­çš„æ•°æ®ï¼Œæ ‡è®°è¡¨å•ä¸ºå·²ä¿å­˜çŠ¶æ€</li>
<li>å¯é€‰ï¼šæ ¹æ®<code>CustomAction.RELOADPARENT</code>é…ç½®ï¼Œåˆ·æ–°çˆ¶é¡µé¢æ•°æ®</li>
</ul>
<p><strong>æ•°æ®æµå‘å›¾</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ç”¨æˆ·ç‚¹å‡»ä¿å­˜æŒ‰é’®
    â†“
è§¦å‘CustomAction.SAVEäº‹ä»¶
    â†“
RequestPathEnum.CURRFORMè·å–è¡¨å•æ•°æ®
    â†“
é€šè®¯ç»„ä»¶å‘é€POSTè¯·æ±‚åˆ°/employee/management/save
    â†“
åç«¯EmployeeManagementController.saveEmployee()æ¥æ”¶è¯·æ±‚
    â†“
è½¬æ¢ä¸ºEmployeeManagementViewå¯¹è±¡
    â†“
è°ƒç”¨EmployeeManagementService.saveEmployee()
    â†“
æ•°æ®åº“æ’å…¥æ“ä½œ
    â†“
è¿”å›ResultModel.success(<span class="hljs-literal">true</span>, <span class="hljs-string">"ä¿å­˜æˆåŠŸ"</span>)
    â†“
å‰ç«¯è§£æå“åº”
    â†“
ResponsePathEnum.MESSAGEæå–æ¶ˆæ¯
    â†“
å±•ç¤ºæˆåŠŸæç¤º
    â†“
æ›´æ–°PageCtxæ•°æ®
</code></pre>
<p>è¯¥ç¤ºä¾‹å±•ç¤ºäº†Ooder A2UIä»ç”¨æˆ·äº¤äº’åˆ°æ•°æ®æŒä¹…åŒ–çš„å®Œæ•´æ•°æ®æµå‘ï¼Œé€šè¿‡RequestPathEnumå’ŒResponsePathEnumå®ç°äº†å‰åç«¯æ•°æ®çš„ç²¾ç¡®æ§åˆ¶ï¼Œç¡®ä¿äº†æ•°æ®çš„ä¸€è‡´æ€§å’Œå¯é æ€§ã€‚</p>
<h4 data-id="heading-67">5.4 äº‹ä»¶å¤„ç†</h4>
<p>Ooder A2UIçš„äº‹ä»¶å¤„ç†æœºåˆ¶åŸºäºæ³¨è§£é©±åŠ¨ï¼Œå°†å‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡ç´§å¯†ç»‘å®šã€‚</p>
<h5 data-id="heading-68">5.4.1 äº‹ä»¶å®šä¹‰</h5>
<p>åœ¨åç«¯é€šè¿‡<code>@APIEventAnnotation</code>å®šä¹‰äº‹ä»¶ï¼ŒæŒ‡å®šäº‹ä»¶çš„ç»‘å®šåŠ¨ä½œã€è¯·æ±‚æ•°æ®ã€å“åº”å¤„ç†ç­‰é…ç½®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@APIEventAnnotation(
    bindAction = {CustomAction.SAVE},
    customRequestData = {RequestPathEnum.CURRFORM},
    beforeInvoke = CustomBeforInvoke.BUSY,
    onExecuteSuccess = CustomOnExecueSuccess.MESSAGE
)</span>
<span class="hljs-keyword">private</span> String saveButton;
</code></pre>
<h5 data-id="heading-69">5.4.2 äº‹ä»¶ç»‘å®š</h5>
<p>åœ¨Pageåˆå§‹åŒ–æ—¶ï¼Œç³»ç»Ÿæ ¹æ®æ³¨è§£é…ç½®è‡ªåŠ¨å®Œæˆäº‹ä»¶ç»‘å®šï¼š</p>
<ol>
<li>
<p><strong>äº‹ä»¶ç›‘å¬å™¨æ³¨å†Œ</strong>ï¼š</p>
<ul>
<li>ä¸ºç»„ä»¶æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</li>
<li>ç»‘å®šåˆ°å¯¹åº”çš„å¤„ç†å‡½æ•°</li>
<li>é…ç½®äº‹ä»¶çš„è§¦å‘æ¡ä»¶</li>
</ul>
</li>
<li>
<p><strong>æœåŠ¡æ˜ å°„å»ºç«‹</strong>ï¼š</p>
<ul>
<li>å»ºç«‹å‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡çš„æ˜ å°„å…³ç³»</li>
<li>é…ç½®æœåŠ¡è°ƒç”¨çš„å‚æ•°å’Œå“åº”å¤„ç†</li>
<li>è®¾ç½®äº‹ä»¶çš„æ‰§è¡Œé¡ºåºå’Œä¾èµ–å…³ç³»</li>
</ul>
</li>
</ol>
<h5 data-id="heading-70">5.4.3 äº‹ä»¶è§¦å‘</h5>
<p>ç”¨æˆ·ä¸ç»„ä»¶äº¤äº’æ—¶ï¼Œè§¦å‘å¯¹åº”çš„äº‹ä»¶ï¼š</p>
<ol>
<li>
<p><strong>äº‹ä»¶æ•è·</strong>ï¼š</p>
<ul>
<li>ç»„ä»¶æ•è·ç”¨æˆ·äº¤äº’äº‹ä»¶</li>
<li>æ£€æŸ¥äº‹ä»¶çš„è§¦å‘æ¡ä»¶</li>
<li>è·å–äº‹ä»¶çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>äº‹ä»¶å¤„ç†</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°</li>
<li>å‡†å¤‡äº‹ä»¶è°ƒç”¨çš„å‚æ•°</li>
<li>æ‰§è¡Œäº‹ä»¶çš„å‰ç½®å¤„ç†</li>
</ul>
</li>
</ol>
<h5 data-id="heading-71">5.4.4 æœåŠ¡è°ƒç”¨</h5>
<p>äº‹ä»¶è§¦å‘åï¼Œç³»ç»Ÿæ ¹æ®é…ç½®è°ƒç”¨å¯¹åº”çš„åç«¯æœåŠ¡ï¼š</p>
<ol>
<li>
<p><strong>è¯·æ±‚æ„å»º</strong>ï¼š</p>
<ul>
<li>æ ¹æ®<code>customRequestData</code>é…ç½®è·å–è¯·æ±‚æ•°æ®</li>
<li>æ„å»ºAjaxè¯·æ±‚ï¼Œè®¾ç½®URLã€æ–¹æ³•å’Œå‚æ•°</li>
<li>æ·»åŠ è¯·æ±‚å¤´å’Œèº«ä»½éªŒè¯ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>è¯·æ±‚å‘é€</strong>ï¼š</p>
<ul>
<li>é€šè®¯ç»„ä»¶å‘é€Ajaxè¯·æ±‚</li>
<li>å¤„ç†è¯·æ±‚çš„å¼‚æ­¥æ‰§è¡Œ</li>
<li>æ˜¾ç¤ºåŠ è½½çŠ¶æ€æˆ–é®ç½©</li>
</ul>
</li>
<li>
<p><strong>è¯·æ±‚ä¸­æ–­å¤„ç†</strong>ï¼š</p>
<ul>
<li>æ”¯æŒè¯·æ±‚çš„ä¸­æ–­å’Œå–æ¶ˆ</li>
<li>å¤„ç†è¯·æ±‚è¶…æ—¶å’Œç½‘ç»œé”™è¯¯</li>
<li>æä¾›å‹å¥½çš„é”™è¯¯æç¤º</li>
</ul>
</li>
</ol>
<h5 data-id="heading-72">5.4.5 å“åº”å¤„ç†</h5>
<p>åç«¯æœåŠ¡è¿”å›å“åº”åï¼Œç³»ç»Ÿæ ¹æ®é…ç½®å¤„ç†å“åº”æ•°æ®ï¼š</p>
<ol>
<li>
<p><strong>å“åº”è§£æ</strong>ï¼š</p>
<ul>
<li>è§£æå“åº”æ•°æ®ï¼Œæ£€æŸ¥çŠ¶æ€ç </li>
<li>å¤„ç†å“åº”çš„æˆåŠŸå’Œå¤±è´¥æƒ…å†µ</li>
<li>è½¬æ¢å“åº”æ•°æ®æ ¼å¼</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®æ›´æ–°</strong>ï¼š</p>
<ul>
<li>æ ¹æ®<code>ResponsePathEnum</code>é…ç½®æ›´æ–°æ•°æ®</li>
<li>æ›´æ–°PageCtxä¸­çš„æ•°æ®</li>
<li>é€šçŸ¥ç›¸å…³ç»„ä»¶æ•°æ®å·²æ›´æ–°</li>
</ul>
</li>
<li>
<p><strong>UIæ›´æ–°</strong>ï¼š</p>
<ul>
<li>é‡æ–°æ¸²æŸ“å—å½±å“çš„ç»„ä»¶</li>
<li>æ›´æ–°ç”¨æˆ·ç•Œé¢ï¼Œå±•ç¤ºæœ€æ–°æ•°æ®</li>
<li>æ‰§è¡Œäº‹ä»¶çš„åç½®å¤„ç†</li>
</ul>
</li>
<li>
<p><strong>äº‹ä»¶å›è°ƒ</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨äº‹ä»¶çš„æˆåŠŸæˆ–å¤±è´¥å›è°ƒå‡½æ•°</li>
<li>æ‰§è¡Œè‡ªå®šä¹‰çš„å“åº”å¤„ç†é€»è¾‘</li>
<li>æ˜¾ç¤ºæˆåŠŸæˆ–é”™è¯¯æç¤º</li>
</ul>
</li>
</ol>
<h5 data-id="heading-73">5.4.6 äº‹ä»¶ä¼ æ’­</h5>
<p>æ”¯æŒäº‹ä»¶çš„ä¼ æ’­å’Œå†’æ³¡æœºåˆ¶ï¼Œå®ç°å¤æ‚çš„äº¤äº’é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>äº‹ä»¶å†’æ³¡</strong>ï¼š</p>
<ul>
<li>äº‹ä»¶ä»è§¦å‘ç»„ä»¶å‘ä¸Šå†’æ³¡åˆ°çˆ¶ç»„ä»¶</li>
<li>çˆ¶ç»„ä»¶å¯ä»¥æ•è·å’Œå¤„ç†å­ç»„ä»¶çš„äº‹ä»¶</li>
<li>æ”¯æŒé˜»æ­¢äº‹ä»¶å†’æ³¡</li>
</ul>
</li>
<li>
<p><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼š</p>
<ul>
<li>å°†äº‹ä»¶å§”æ‰˜ç»™çˆ¶ç»„ä»¶å¤„ç†</li>
<li>å‡å°‘äº‹ä»¶ç›‘å¬å™¨çš„æ•°é‡</li>
<li>æé«˜æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§</li>
</ul>
</li>
<li>
<p><strong>è‡ªå®šä¹‰äº‹ä»¶</strong>ï¼š</p>
<ul>
<li>æ”¯æŒè‡ªå®šä¹‰äº‹ä»¶çš„å®šä¹‰å’Œè§¦å‘</li>
<li>å®ç°ç»„ä»¶é—´çš„è§£è€¦é€šä¿¡</li>
<li>æ”¯æŒå¤æ‚çš„äº¤äº’åœºæ™¯</li>
</ul>
</li>
</ol>
<h3 data-id="heading-74">6. å¼€å‘æµç¨‹</h3>
<p>Ooder A2UIçš„å¼€å‘æµç¨‹éµå¾ªæ³¨è§£é©±åŠ¨çš„å¼€å‘æ¨¡å¼ï¼Œä»éœ€æ±‚åˆ†æåˆ°éƒ¨ç½²ä¸Šçº¿ï¼Œå½¢æˆäº†ä¸€å¥—å®Œæ•´çš„å¼€å‘ä½“ç³»ã€‚</p>
<h4 data-id="heading-75">6.1 éœ€æ±‚åˆ†æ</h4>
<p>éœ€æ±‚åˆ†ææ˜¯Ooder A2UIå¼€å‘æµç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œä¸»è¦ç›®çš„æ˜¯ç†è§£ä¸šåŠ¡éœ€æ±‚ï¼Œç¡®å®šç³»ç»Ÿçš„åŠŸèƒ½å’ŒèŒƒå›´ã€‚</p>
<h5 data-id="heading-76">6.1.1 ä¸šåŠ¡éœ€æ±‚åˆ†æ</h5>
<ol>
<li>
<p><strong>è¯†åˆ«ä¸šåŠ¡å…ƒç´ </strong>ï¼š</p>
<ul>
<li>ç¡®å®šç³»ç»Ÿä¸­æ¶‰åŠçš„æ ¸å¿ƒä¸šåŠ¡å®ä½“</li>
<li>åˆ†æå®ä½“ä¹‹é—´çš„å…³ç³»</li>
<li>å®šä¹‰å®ä½“çš„å±æ€§å’Œè¡Œä¸º</li>
</ul>
</li>
<li>
<p><strong>ç¡®å®šåŠŸèƒ½éœ€æ±‚</strong>ï¼š</p>
<ul>
<li>è¯†åˆ«ç³»ç»Ÿéœ€è¦å®ç°çš„åŠŸèƒ½æ¨¡å—</li>
<li>åˆ†ææ¯ä¸ªåŠŸèƒ½æ¨¡å—çš„å…·ä½“éœ€æ±‚</li>
<li>ç¡®å®šåŠŸèƒ½çš„ä¼˜å…ˆçº§å’Œä¾èµ–å…³ç³»</li>
</ul>
</li>
<li>
<p><strong>åˆ†æç”¨æˆ·äº¤äº’</strong>ï¼š</p>
<ul>
<li>è¯†åˆ«ç”¨æˆ·ä¸ç³»ç»Ÿçš„äº¤äº’æ–¹å¼</li>
<li>åˆ†æäº¤äº’æµç¨‹å’Œç”¨æˆ·ä½“éªŒè¦æ±‚</li>
<li>ç¡®å®šéœ€è¦çš„äº¤äº’ç»„ä»¶å’Œäº‹ä»¶</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®æµå‘åˆ†æ</strong>ï¼š</p>
<ul>
<li>åˆ†æç³»ç»Ÿä¸­çš„æ•°æ®æµå‘</li>
<li>ç¡®å®šæ•°æ®çš„æ¥æºå’Œç›®æ ‡</li>
<li>åˆ†ææ•°æ®çš„å¤„ç†å’Œè½¬æ¢é€»è¾‘</li>
</ul>
</li>
</ol>
<h5 data-id="heading-77">6.1.2 æŠ€æœ¯éœ€æ±‚åˆ†æ</h5>
<ol>
<li>
<p><strong>ç¡®å®šæŠ€æœ¯æ ˆ</strong>ï¼š</p>
<ul>
<li>é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆ</li>
<li>ç¡®å®šå¼€å‘å·¥å…·å’Œç¯å¢ƒ</li>
<li>åˆ¶å®šæŠ€æœ¯è§„èŒƒå’Œæ ‡å‡†</li>
</ul>
</li>
<li>
<p><strong>ç³»ç»Ÿæ¶æ„è®¾è®¡</strong>ï¼š</p>
<ul>
<li>ç¡®å®šç³»ç»Ÿçš„åˆ†å±‚æ¶æ„</li>
<li>è®¾è®¡æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>
<li>ç¡®å®šé€šè®¯æœºåˆ¶å’Œæ•°æ®æ ¼å¼</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½å’Œå®‰å…¨éœ€æ±‚</strong>ï¼š</p>
<ul>
<li>åˆ†æç³»ç»Ÿçš„æ€§èƒ½è¦æ±‚</li>
<li>ç¡®å®šå®‰å…¨æœºåˆ¶å’Œè®¤è¯æ–¹å¼</li>
<li>åˆ¶å®šæ•°æ®å¤‡ä»½å’Œæ¢å¤ç­–ç•¥</li>
</ul>
</li>
</ol>
<h4 data-id="heading-78">6.2 è§†å›¾è®¾è®¡</h4>
<p>è§†å›¾è®¾è®¡æ˜¯Ooder A2UIå¼€å‘æµç¨‹çš„æ ¸å¿ƒï¼Œé€šè¿‡æ³¨è§£å®šä¹‰å‰ç«¯ç»„ä»¶çš„å¤–è§‚å’Œè¡Œä¸ºã€‚</p>
<h5 data-id="heading-79">6.2.1 è§†å›¾ç±»è®¾è®¡</h5>
<ol>
<li>
<p><strong>åˆ›å»ºè§†å›¾ç±»</strong>ï¼š</p>
<ul>
<li>æ ¹æ®éœ€æ±‚åˆ›å»ºè§†å›¾ç±»</li>
<li>ç»§æ‰¿é€‚å½“çš„çˆ¶ç±»</li>
<li>è®¾ç½®è§†å›¾çš„åŸºæœ¬å±æ€§</li>
</ul>
</li>
<li>
<p><strong>æ·»åŠ è§†å›¾æ³¨è§£</strong>ï¼š</p>
<ul>
<li>æ ¹æ®è§†å›¾ç±»å‹æ·»åŠ ç›¸åº”çš„æ³¨è§£ï¼Œå¦‚<code>@FormAnnotation</code>ã€<code>@GridAnnotation</code>ç­‰</li>
<li>é…ç½®è§†å›¾çš„å¸ƒå±€ã€æ ·å¼å’ŒåŸºæœ¬å±æ€§</li>
<li>ç»‘å®šè§†å›¾çš„è‡ªå®šä¹‰æœåŠ¡</li>
</ul>
</li>
<li>
<p><strong>è®¾è®¡è§†å›¾ç»“æ„</strong>ï¼š</p>
<ul>
<li>ç¡®å®šè§†å›¾çš„å®¹å™¨ç»“æ„</li>
<li>è®¾è®¡å­ç»„ä»¶çš„å¸ƒå±€å’Œæ’åˆ—æ–¹å¼</li>
<li>ç¡®å®šç»„ä»¶çš„å±‚çº§å…³ç³»</li>
</ul>
</li>
</ol>
<h5 data-id="heading-80">6.2.2 å­—æ®µå’Œç»„ä»¶è®¾è®¡</h5>
<ol>
<li>
<p><strong>å®šä¹‰å­—æ®µ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®éœ€æ±‚å®šä¹‰è§†å›¾çš„å­—æ®µ</li>
<li>é€‰æ‹©åˆé€‚çš„å­—æ®µç±»å‹</li>
<li>è®¾ç½®å­—æ®µçš„åŸºæœ¬å±æ€§</li>
</ul>
</li>
<li>
<p><strong>æ·»åŠ å­—æ®µæ³¨è§£</strong>ï¼š</p>
<ul>
<li>æ ¹æ®å­—æ®µç±»å‹æ·»åŠ ç›¸åº”çš„æ³¨è§£ï¼Œå¦‚<code>@InputAnnotation</code>ã€<code>@ComboBoxAnnotation</code>ç­‰</li>
<li>é…ç½®å­—æ®µçš„éªŒè¯è§„åˆ™å’ŒåŸºæœ¬æ ·å¼</li>
<li>æ·»åŠ å­—æ®µçš„å¤–è§‚é…ç½®å’Œäº¤äº’è¡Œä¸º</li>
</ul>
</li>
<li>
<p><strong>è®¾è®¡äº¤äº’è¡Œä¸º</strong>ï¼š</p>
<ul>
<li>ä¸ºç»„ä»¶æ·»åŠ <code>@APIEventAnnotation</code>æ³¨è§£</li>
<li>é…ç½®äº‹ä»¶çš„ç»‘å®šåŠ¨ä½œå’Œè¯·æ±‚æ•°æ®</li>
<li>è®¾ç½®äº‹ä»¶çš„å‰ç½®å¤„ç†å’Œåç½®å¤„ç†</li>
</ul>
</li>
</ol>
<h5 data-id="heading-81">6.2.3 è§†å›¾é…ç½®ä¼˜åŒ–</h5>
<ol>
<li>
<p><strong>ä¼˜åŒ–å¸ƒå±€è®¾è®¡</strong>ï¼š</p>
<ul>
<li>è°ƒæ•´ç»„ä»¶çš„å¸ƒå±€å’Œæ’åˆ—æ–¹å¼</li>
<li>ä¼˜åŒ–ç»„ä»¶çš„å°ºå¯¸å’Œé—´è·</li>
<li>ç¡®ä¿è§†å›¾çš„ç¾è§‚æ€§å’Œæ˜“ç”¨æ€§</li>
</ul>
</li>
<li>
<p><strong>å¢å¼ºç”¨æˆ·ä½“éªŒ</strong>ï¼š</p>
<ul>
<li>æ·»åŠ é€‚å½“çš„æç¤ºå’Œå¸®åŠ©ä¿¡æ¯</li>
<li>ä¼˜åŒ–äº¤äº’æµç¨‹å’Œåé¦ˆæœºåˆ¶</li>
<li>ç¡®ä¿è§†å›¾çš„å“åº”å¼è®¾è®¡</li>
</ul>
</li>
<li>
<p><strong>ç¡®ä¿å¯è®¿é—®æ€§</strong>ï¼š</p>
<ul>
<li>æ·»åŠ é€‚å½“çš„ARIAå±æ€§</li>
<li>ç¡®ä¿é”®ç›˜å¯¼èˆªæ”¯æŒ</li>
<li>ç¡®ä¿å±å¹•é˜…è¯»å™¨å…¼å®¹æ€§</li>
</ul>
</li>
</ol>
<h4 data-id="heading-82">6.3 æœåŠ¡å®ç°</h4>
<p>æœåŠ¡å®ç°æ˜¯Ooder A2UIå¼€å‘æµç¨‹çš„åç«¯éƒ¨åˆ†ï¼Œè´Ÿè´£å®ç°ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®ã€‚</p>
<h5 data-id="heading-83">6.3.1 æœåŠ¡ç±»è®¾è®¡</h5>
<ol>
<li>
<p><strong>åˆ›å»ºæœåŠ¡ç±»</strong>ï¼š</p>
<ul>
<li>æ ¹æ®éœ€æ±‚åˆ›å»ºæœåŠ¡ç±»</li>
<li>ç»§æ‰¿é€‚å½“çš„çˆ¶ç±»</li>
<li>æ·»åŠ <code>@Service</code>å’Œ<code>@RestController</code>æ³¨è§£</li>
</ul>
</li>
<li>
<p><strong>è®¾è®¡APIæ¥å£</strong>ï¼š</p>
<ul>
<li>ç¡®å®šAPIçš„URLè·¯å¾„å’ŒHTTPæ–¹æ³•</li>
<li>è®¾è®¡è¯·æ±‚å‚æ•°å’Œå“åº”æ ¼å¼</li>
<li>æ·»åŠ é€‚å½“çš„æ³¨è§£ï¼Œå¦‚<code>@GetMapping</code>ã€<code>@PostMapping</code>ç­‰</li>
</ul>
</li>
<li>
<p><strong>ç»‘å®šè§†å›¾æœåŠ¡</strong>ï¼š</p>
<ul>
<li>åœ¨è§†å›¾ç±»ä¸­ç»‘å®šæœåŠ¡ç±»</li>
<li>ç¡®ä¿æœåŠ¡æ–¹æ³•çš„Webå¯è®¿é—®æ€§</li>
<li>é…ç½®æœåŠ¡çš„å®‰å…¨å’Œè®¤è¯</li>
</ul>
</li>
</ol>
<h5 data-id="heading-84">6.3.2 ä¸šåŠ¡é€»è¾‘å®ç°</h5>
<ol>
<li>
<p><strong>å®ç°ä¸šåŠ¡æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>æ ¹æ®éœ€æ±‚å®ç°ä¸šåŠ¡é€»è¾‘æ–¹æ³•</li>
<li>ç¡®ä¿æ–¹æ³•çš„å•ä¸€èŒè´£åŸåˆ™</li>
<li>å¤„ç†ä¸šåŠ¡è§„åˆ™å’ŒéªŒè¯</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®è®¿é—®å®ç°</strong>ï¼š</p>
<ul>
<li>å®ç°æ•°æ®è®¿é—®é€»è¾‘</li>
<li>ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’</li>
<li>å¤„ç†æ•°æ®çš„æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤</li>
</ul>
</li>
<li>
<p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼š</p>
<ul>
<li>æ·»åŠ é€‚å½“çš„å¼‚å¸¸å¤„ç†æœºåˆ¶</li>
<li>ç¡®ä¿å¼‚å¸¸ä¿¡æ¯çš„å‹å¥½æ€§å’Œæœ‰ç”¨æ€§</li>
<li>è®°å½•å¼‚å¸¸æ—¥å¿—</li>
</ul>
</li>
</ol>
<h5 data-id="heading-85">6.3.3 æœåŠ¡æµ‹è¯•å’Œä¼˜åŒ–</h5>
<ol>
<li>
<p><strong>å•å…ƒæµ‹è¯•</strong>ï¼š</p>
<ul>
<li>ä¸ºæœåŠ¡æ–¹æ³•ç¼–å†™å•å…ƒæµ‹è¯•</li>
<li>ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡</li>
<li>éªŒè¯ä¸šåŠ¡é€»è¾‘çš„æ­£ç¡®æ€§</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>ä¼˜åŒ–æœåŠ¡çš„æ€§èƒ½</li>
<li>å‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°</li>
<li>ä¼˜åŒ–æ•°æ®å¤„ç†é€»è¾‘</li>
</ul>
</li>
<li>
<p><strong>å®‰å…¨åŠ å›º</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿æœåŠ¡çš„å®‰å…¨æ€§</li>
<li>æ·»åŠ é€‚å½“çš„è®¤è¯å’Œæˆæƒæœºåˆ¶</li>
<li>é˜²æ­¢å¸¸è§çš„å®‰å…¨æ¼æ´</li>
</ul>
</li>
</ol>
<h4 data-id="heading-86">6.4 ç³»ç»Ÿé›†æˆ</h4>
<p>ç³»ç»Ÿé›†æˆæ˜¯Ooder A2UIå¼€å‘æµç¨‹çš„é‡è¦ç¯èŠ‚ï¼Œç¡®ä¿å‰ç«¯è§†å›¾å’Œåç«¯æœåŠ¡çš„æ­£ç¡®é›†æˆã€‚</p>
<h5 data-id="heading-87">6.4.1 å‰åç«¯é›†æˆ</h5>
<ol>
<li>
<p><strong>é…ç½®é€šè®¯ç»„ä»¶</strong>ï¼š</p>
<ul>
<li>é…ç½®å‰åç«¯é€šè®¯ç»„ä»¶</li>
<li>ç¡®ä¿é€šè®¯ç»„ä»¶çš„æ­£ç¡®åˆå§‹åŒ–</li>
<li>é…ç½®é€šè®¯çš„è¶…æ—¶å’Œé‡è¯•æœºåˆ¶</li>
</ul>
</li>
<li>
<p><strong>æµ‹è¯•æ•°æ®äº¤äº’</strong>ï¼š</p>
<ul>
<li>æµ‹è¯•å‰ç«¯è§†å›¾ä¸åç«¯æœåŠ¡çš„æ•°æ®äº¤äº’</li>
<li>éªŒè¯è¯·æ±‚å‚æ•°å’Œå“åº”æ ¼å¼</li>
<li>ç¡®ä¿æ•°æ®çš„æ­£ç¡®ä¼ é€’å’Œè½¬æ¢</li>
</ul>
</li>
<li>
<p><strong>è°ƒè¯•å’Œæ’é”™</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨è°ƒè¯•å·¥å…·è°ƒè¯•ç³»ç»Ÿ</li>
<li>åˆ†æå’Œè§£å†³é›†æˆé—®é¢˜</li>
<li>ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§</li>
</ul>
</li>
</ol>
<h5 data-id="heading-88">6.4.2 ç»„ä»¶é›†æˆå’Œæµ‹è¯•</h5>
<ol>
<li>
<p><strong>é›†æˆç»„ä»¶</strong>ï¼š</p>
<ul>
<li>é›†æˆå„ä¸ªç»„ä»¶ï¼Œå½¢æˆå®Œæ•´çš„ç³»ç»Ÿ</li>
<li>ç¡®ä¿ç»„ä»¶ä¹‹é—´çš„æ­£ç¡®åä½œ</li>
<li>æµ‹è¯•ç»„ä»¶çš„é›†æˆæ•ˆæœ</li>
</ul>
</li>
<li>
<p><strong>ç³»ç»Ÿæµ‹è¯•</strong>ï¼š</p>
<ul>
<li>è¿›è¡Œç³»ç»Ÿçº§æµ‹è¯•</li>
<li>éªŒè¯ç³»ç»Ÿçš„åŠŸèƒ½å’Œæ€§èƒ½</li>
<li>ç¡®ä¿ç³»ç»Ÿç¬¦åˆéœ€æ±‚</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·æµ‹è¯•</strong>ï¼š</p>
<ul>
<li>è¿›è¡Œç”¨æˆ·æµ‹è¯•</li>
<li>æ”¶é›†ç”¨æˆ·åé¦ˆ</li>
<li>ä¼˜åŒ–ç³»ç»Ÿçš„ç”¨æˆ·ä½“éªŒ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-89">6.5 éƒ¨ç½²ä¸Šçº¿</h4>
<p>éƒ¨ç½²ä¸Šçº¿æ˜¯Ooder A2UIå¼€å‘æµç¨‹çš„æœ€åä¸€æ­¥ï¼Œå°†ç³»ç»Ÿéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</p>
<h5 data-id="heading-90">6.5.1 éƒ¨ç½²å‡†å¤‡</h5>
<ol>
<li>
<p><strong>ç¼–è¯‘æ‰“åŒ…</strong>ï¼š</p>
<ul>
<li>ç¼–è¯‘æºä»£ç </li>
<li>æ‰“åŒ…åº”ç”¨</li>
<li>ç”Ÿæˆéƒ¨ç½²æ–‡ä»¶</li>
</ul>
</li>
<li>
<p><strong>é…ç½®ç¯å¢ƒ</strong>ï¼š</p>
<ul>
<li>å‡†å¤‡ç”Ÿäº§ç¯å¢ƒ</li>
<li>é…ç½®æœåŠ¡å™¨å’Œæ•°æ®åº“</li>
<li>ç¡®ä¿ç¯å¢ƒçš„ä¸€è‡´æ€§</li>
</ul>
</li>
<li>
<p><strong>åˆ¶å®šéƒ¨ç½²è®¡åˆ’</strong>ï¼š</p>
<ul>
<li>åˆ¶å®šè¯¦ç»†çš„éƒ¨ç½²è®¡åˆ’</li>
<li>ç¡®å®šéƒ¨ç½²çš„æ—¶é—´å’Œæ­¥éª¤</li>
<li>åˆ¶å®šå›æ»šç­–ç•¥</li>
</ul>
</li>
</ol>
<h5 data-id="heading-91">6.5.2 éƒ¨ç½²æ‰§è¡Œ</h5>
<ol>
<li>
<p><strong>éƒ¨ç½²åº”ç”¨</strong>ï¼š</p>
<ul>
<li>å°†åº”ç”¨éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨</li>
<li>é…ç½®åº”ç”¨å‚æ•°</li>
<li>å¯åŠ¨åº”ç”¨æœåŠ¡</li>
</ul>
</li>
<li>
<p><strong>éªŒè¯éƒ¨ç½²ç»“æœ</strong>ï¼š</p>
<ul>
<li>éªŒè¯åº”ç”¨çš„æ­£å¸¸è¿è¡Œ</li>
<li>æµ‹è¯•ç³»ç»Ÿçš„åŠŸèƒ½å’Œæ€§èƒ½</li>
<li>ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§</li>
</ul>
</li>
<li>
<p><strong>ç›‘æ§å’Œç»´æŠ¤</strong>ï¼š</p>
<ul>
<li>è®¾ç½®ç³»ç»Ÿç›‘æ§</li>
<li>ç›‘æ§ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€</li>
<li>åŠæ—¶å¤„ç†ç³»ç»Ÿé—®é¢˜</li>
</ul>
</li>
</ol>
<h5 data-id="heading-92">6.5.3 ä¸Šçº¿åçš„ç»´æŠ¤</h5>
<ol>
<li>
<p><strong>ç³»ç»Ÿç›‘æ§</strong>ï¼š</p>
<ul>
<li>æŒç»­ç›‘æ§ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€</li>
<li>åˆ†æç³»ç»Ÿæ—¥å¿—</li>
<li>åŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>åˆ†æç³»ç»Ÿæ€§èƒ½</li>
<li>ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½</li>
<li>æé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦</li>
</ul>
</li>
<li>
<p><strong>åŠŸèƒ½è¿­ä»£</strong>ï¼š</p>
<ul>
<li>æ ¹æ®ç”¨æˆ·åé¦ˆè¿›è¡ŒåŠŸèƒ½è¿­ä»£</li>
<li>æŒç»­æ”¹è¿›ç³»ç»Ÿ</li>
<li>ç¡®ä¿ç³»ç»Ÿçš„ç«äº‰åŠ›</li>
</ul>
</li>
</ol>
<h4 data-id="heading-93">6.6 å¼€å‘æµç¨‹æœ€ä½³å®è·µ</h4>
<p>ä»æŠ€æœ¯æ–‡æ¡£ä¸­å¯ä»¥æå–å‡ºOoder A2UIå¼€å‘æµç¨‹çš„æœ€ä½³å®è·µï¼š</p>
<ol>
<li>
<p><strong>éµå¾ªæ³¨è§£è§„èŒƒ</strong>ï¼š</p>
<ul>
<li>æ­£ç¡®ä½¿ç”¨å„ç±»æ³¨è§£</li>
<li>éµå¾ªæ³¨è§£çš„ä½¿ç”¨è§„èŒƒ</li>
<li>ç¡®ä¿æ³¨è§£é…ç½®çš„ä¸€è‡´æ€§</li>
</ul>
</li>
<li>
<p><strong>ç»„ä»¶åŒ–è®¾è®¡</strong>ï¼š</p>
<ul>
<li>é‡‡ç”¨ç»„ä»¶åŒ–è®¾è®¡æ€æƒ³</li>
<li>æé«˜ç»„ä»¶çš„å¯å¤ç”¨æ€§</li>
<li>ç¡®ä¿ç»„ä»¶çš„ç‹¬ç«‹æ€§</li>
</ul>
</li>
<li>
<p><strong>æ¨¡å—åŒ–å¼€å‘</strong>ï¼š</p>
<ul>
<li>é‡‡ç”¨æ¨¡å—åŒ–å¼€å‘æ–¹å¼</li>
<li>æé«˜æ¨¡å—çš„å¯ç»´æŠ¤æ€§</li>
<li>ç¡®ä¿æ¨¡å—çš„ä½è€¦åˆæ€§</li>
</ul>
</li>
<li>
<p><strong>æµ‹è¯•é©±åŠ¨å¼€å‘</strong>ï¼š</p>
<ul>
<li>é‡‡ç”¨æµ‹è¯•é©±åŠ¨å¼€å‘æ–¹å¼</li>
<li>ç¡®ä¿ä»£ç çš„è´¨é‡å’Œå¯é æ€§</li>
<li>æé«˜å¼€å‘æ•ˆç‡</li>
</ul>
</li>
<li>
<p><strong>æŒç»­é›†æˆå’Œäº¤ä»˜</strong>ï¼š</p>
<ul>
<li>é‡‡ç”¨æŒç»­é›†æˆå’Œäº¤ä»˜æ–¹å¼</li>
<li>æé«˜å¼€å‘å’Œéƒ¨ç½²æ•ˆç‡</li>
<li>ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§</li>
</ul>
</li>
</ol>
<h3 data-id="heading-94">7. æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-95">7.1 æ³¨è§£ä½¿ç”¨åŸåˆ™</h4>
<p>Ooder A2UIçš„æ³¨è§£ä½“ç³»æ˜¯å®ç°å‰åç«¯å¼ºæ˜ å°„å…³ç³»çš„æ ¸å¿ƒï¼Œæ­£ç¡®ä½¿ç”¨æ³¨è§£æ˜¯ç¡®ä¿ç³»ç»Ÿå¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§çš„å…³é”®ã€‚</p>
<h5 data-id="heading-96">7.1.1 æ³¨è§£åˆ†ç±»ä½¿ç”¨</h5>
<p><strong>1. è§†å›¾å±‚æ³¨è§£</strong></p>
<ul>
<li>ç”¨é€”ï¼šç”¨äºå®šä¹‰ç»„ä»¶çš„å¤–è§‚å’Œå¸ƒå±€</li>
<li>ç¤ºä¾‹ï¼š<code>@FormAnnotation</code>ã€<code>@GridAnnotation</code>ã€<code>@TabsAnnotation</code>ç­‰</li>
<li>æœ€ä½³å®è·µï¼šæ ¹æ®è§†å›¾ç±»å‹é€‰æ‹©åˆé€‚çš„æ³¨è§£ï¼Œé…ç½®å¿…è¦çš„å¸ƒå±€å’Œæ ·å¼å±æ€§</li>
</ul>
<p><strong>2. è¡Œä¸ºæ³¨è§£</strong></p>
<ul>
<li>ç”¨é€”ï¼šç”¨äºå®šä¹‰ç»„ä»¶çš„äº‹ä»¶å’Œäº¤äº’è¡Œä¸º</li>
<li>ç¤ºä¾‹ï¼š<code>@APIEventAnnotation</code>ã€<code>@ModuleAnnotation</code>ç­‰</li>
<li>æœ€ä½³å®è·µï¼šæ˜ç¡®äº‹ä»¶çš„è§¦å‘æ¡ä»¶å’Œå¤„ç†é€»è¾‘ï¼Œåˆç†é…ç½®è¯·æ±‚å’Œå“åº”æ•°æ®</li>
</ul>
<p><strong>3. å­—æ®µæ³¨è§£</strong></p>
<ul>
<li>ç”¨é€”ï¼šç”¨äºå®šä¹‰å…·ä½“çš„æ•°æ®é¡¹å’Œè¾“å…¥æ§ä»¶</li>
<li>ç¤ºä¾‹ï¼š<code>@InputAnnotation</code>ã€<code>@DatePickerAnnotation</code>ã€<code>@ComboBoxAnnotation</code>ç­‰</li>
<li>æœ€ä½³å®è·µï¼šæ ¹æ®æ•°æ®ç±»å‹é€‰æ‹©åˆé€‚çš„æ§ä»¶ï¼Œé…ç½®å¿…è¦çš„éªŒè¯è§„åˆ™</li>
</ul>
<p><strong>4. æœåŠ¡æ³¨è§£</strong></p>
<ul>
<li>ç”¨é€”ï¼šç”¨äºå®šä¹‰æœåŠ¡çš„Webè®¿é—®æ€§</li>
<li>ç¤ºä¾‹ï¼š<code>@RestController</code>ã€<code>@Service</code>ã€<code>@Aggregation</code>ç­‰</li>
<li>æœ€ä½³å®è·µï¼šç¡®ä¿æœåŠ¡çš„Webå¯è®¿é—®æ€§ï¼Œé…ç½®åˆç†çš„URLè·¯å¾„</li>
</ul>
<h5 data-id="heading-97">7.1.2 æ³¨è§£ç»„åˆè§„èŒƒ</h5>
<p><strong>1. éµå¾ªæ³¨è§£ä½¿ç”¨çš„å»é‡åŸåˆ™</strong></p>
<ul>
<li>é¿å…é‡å¤é…ç½®ç›¸åŒçš„å±æ€§</li>
<li>ç¡®ä¿æ³¨è§£ä¹‹é—´çš„å…¼å®¹æ€§</li>
<li>ä¼˜å…ˆä½¿ç”¨æ›´å…·ä½“çš„æ³¨è§£</li>
</ul>
<p><strong>2. åˆç†ç»„åˆä¸åŒç±»å‹çš„æ³¨è§£</strong></p>
<ul>
<li>æ¯ä¸ªå­—æ®µè‡³å°‘åŒ…å«ä¸€ä¸ªç»„ä»¶ç±»å‹æ³¨è§£å’Œä¸€ä¸ªå¤–è§‚æ³¨è§£</li>
<li>æ ¹æ®éœ€è¦æ·»åŠ è¡Œä¸ºæ³¨è§£å’Œå…¶ä»–å¢å¼ºæ³¨è§£</li>
<li>ç¡®ä¿æ³¨è§£ç»„åˆèƒ½å¤Ÿå®Œæ•´æè¿°ç»„ä»¶çš„å¤–è§‚å’Œè¡Œä¸º</li>
</ul>
<p><strong>3. æ³¨è§£ä½¿ç”¨ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@InputAnnotation(
    maxlength = 20,
    required = true
)</span>
<span class="hljs-meta">@CustomAnnotation(
    caption = "å‘˜å·¥å§“å",
    index = 1,
    imageClass = "fa-solid fa-user"
)</span>
<span class="hljs-keyword">private</span> String employeeName;
</code></pre>
<h5 data-id="heading-98">7.1.3 æ³¨è§£é…ç½®è§„èŒƒ</h5>
<p><strong>1. éµå¾ªæœ€å°åŒ–é…ç½®åŸåˆ™</strong></p>
<ul>
<li>åªé…ç½®å¿…è¦çš„å±æ€§</li>
<li>åˆ©ç”¨é»˜è®¤å€¼å‡å°‘é…ç½®é‡</li>
<li>é¿å…è¿‡åº¦é…ç½®</li>
</ul>
<p><strong>2. ä¿æŒæ³¨è§£é…ç½®çš„ä¸€è‡´æ€§</strong></p>
<ul>
<li>ç»Ÿä¸€æ³¨è§£çš„ä½¿ç”¨æ–¹å¼</li>
<li>ä¿æŒå±æ€§å‘½åçš„ä¸€è‡´æ€§</li>
<li>ç¡®ä¿é…ç½®å€¼çš„æ ¼å¼ç»Ÿä¸€</li>
</ul>
<p><strong>3. æ³¨è§£é…ç½®ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FormAnnotation(
    borderType = BorderType.inset,
    col = 2,
    row = 8,
    customService = {EmployeeManagementService.class}
)</span>
</code></pre>
<h4 data-id="heading-99">7.2 è§†å›¾è®¾è®¡åŸåˆ™</h4>
<p>è§†å›¾è®¾è®¡æ˜¯Ooder A2UIå¼€å‘çš„æ ¸å¿ƒï¼Œéµå¾ªè‰¯å¥½çš„è§†å›¾è®¾è®¡åŸåˆ™å¯ä»¥æé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<h5 data-id="heading-100">7.2.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™</h5>
<p><strong>1. å•ä¸€èŒè´£åŸåˆ™</strong></p>
<ul>
<li>æ¯ä¸ªè§†å›¾åº”æœ‰æ˜ç¡®çš„èŒè´£å’Œç”¨é€”</li>
<li>é¿å…åœ¨ä¸€ä¸ªè§†å›¾ä¸­å®ç°è¿‡å¤šçš„åŠŸèƒ½</li>
<li>æé«˜è§†å›¾çš„å¯å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§</li>
</ul>
<p><strong>2. å¯å¤ç”¨æ€§åŸåˆ™</strong></p>
<ul>
<li>è®¾è®¡é€šç”¨ç»„ä»¶ï¼Œæé«˜ä»£ç å¤ç”¨ç‡</li>
<li>æŠ½è±¡å…¬å…±çš„è§†å›¾é€»è¾‘å’Œå¸ƒå±€</li>
<li>å»ºç«‹ç»„ä»¶åº“ï¼Œä¾¿äºå¤ç”¨å’Œç»´æŠ¤</li>
</ul>
<p><strong>3. å¯ç»´æŠ¤æ€§åŸåˆ™</strong></p>
<ul>
<li>ä¿æŒä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹</li>
<li>åˆç†ç»„ç»‡è§†å›¾çš„å±‚æ¬¡ç»“æ„</li>
<li>ä½¿ç”¨æ¸…æ™°çš„å‘½åè§„èŒƒ</li>
</ul>
<p><strong>4. å¯æ‰©å±•æ€§åŸåˆ™</strong></p>
<ul>
<li>æä¾›æ‰©å±•æœºåˆ¶ï¼Œæ”¯æŒè‡ªå®šä¹‰ç»„ä»¶çš„å¼€å‘å’Œé›†æˆ</li>
<li>è®¾è®¡æ¾è€¦åˆçš„ç»„ä»¶ç»“æ„</li>
<li>æ”¯æŒæ’ä»¶åŒ–å¼€å‘</li>
</ul>
<h5 data-id="heading-101">7.2.2 è§†å›¾è®¾è®¡æœ€ä½³å®è·µ</h5>
<p><strong>1. å®¹å™¨ç»„ä»¶ä¸å±•ç¤ºç»„ä»¶åˆ†ç¦»</strong></p>
<ul>
<li>å®¹å™¨ç»„ä»¶è´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†å’Œæ•°æ®ç®¡ç†</li>
<li>å±•ç¤ºç»„ä»¶è´Ÿè´£UIæ¸²æŸ“ï¼Œæ— çŠ¶æ€</li>
<li>æé«˜ç»„ä»¶çš„å¯å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§</li>
</ul>
<p><strong>2. Pageä¸ºä¸­å¿ƒçš„å‰ç«¯ç»„ä»¶ç»„ç»‡</strong></p>
<ul>
<li>Pageæ˜¯å‰ç«¯ç»„ä»¶çš„æ ¹å®¹å™¨ï¼Œç»„ç»‡æ‰€æœ‰å­ç»„ä»¶</li>
<li>åŠ¨æ€ç»„ä»¶åŠ è½½ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€åŠ è½½å’Œå¸è½½ç»„ä»¶</li>
<li>ç»Ÿä¸€ç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>é€šè¿‡PageCtxç®¡ç†é¡µé¢è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
</ul>
<p><strong>3. å››åˆ†ç¦»è®¾è®¡åŸåˆ™</strong></p>
<ul>
<li>å±æ€§ã€æ ·å¼ã€äº‹ä»¶ã€è¡Œä¸ºåˆ†ç¦»</li>
<li>å®ç°é«˜å†…èšä½è€¦åˆçš„ç»„ä»¶è®¾è®¡</li>
<li>ä¾¿äºç»´æŠ¤å’Œæ‰©å±•</li>
</ul>
<p><strong>4. å“åº”å¼è®¾è®¡</strong></p>
<ul>
<li>ç¡®ä¿è§†å›¾åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½æ­£å¸¸æ˜¾ç¤º</li>
<li>é‡‡ç”¨å¼¹æ€§å¸ƒå±€å’Œåª’ä½“æŸ¥è¯¢</li>
<li>ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ</li>
</ul>
<h4 data-id="heading-102">7.3 æœåŠ¡è®¾è®¡åŸåˆ™</h4>
<p>æœåŠ¡è®¾è®¡æ˜¯Ooder A2UIåç«¯å¼€å‘çš„æ ¸å¿ƒï¼Œéµå¾ªè‰¯å¥½çš„æœåŠ¡è®¾è®¡åŸåˆ™å¯ä»¥æé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ã€‚</p>
<h5 data-id="heading-103">7.3.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™</h5>
<p><strong>1. ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®è®¿é—®åˆ†ç¦»</strong></p>
<ul>
<li>æœåŠ¡å±‚è´Ÿè´£ä¸šåŠ¡é€»è¾‘ï¼Œä»“åº“å±‚è´Ÿè´£æ•°æ®è®¿é—®</li>
<li>æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§</li>
<li>ä¾¿äºæ›´æ¢æ•°æ®è®¿é—®å±‚å®ç°</li>
</ul>
<p><strong>2. æœåŠ¡æ–¹æ³•å•ä¸€èŒè´£</strong></p>
<ul>
<li>æ¯ä¸ªæœåŠ¡æ–¹æ³•åªåšä¸€ä»¶äº‹</li>
<li>æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</li>
<li>ä¾¿äºæµ‹è¯•å’Œè°ƒè¯•</li>
</ul>
<p><strong>3. ç»Ÿä¸€è¿”å›æ ¼å¼</strong></p>
<ul>
<li>ä½¿ç”¨<code>ResultModel</code>ç»Ÿä¸€APIè¿”å›æ ¼å¼</li>
<li>åŒ…å«çŠ¶æ€ç ã€æ¶ˆæ¯å’Œæ•°æ®</li>
<li>ä¾¿äºå‰ç«¯ç»Ÿä¸€å¤„ç†å“åº”</li>
</ul>
<p><strong>4. å¼‚å¸¸å¤„ç†è§„èŒƒ</strong></p>
<ul>
<li>æä¾›å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶</li>
<li>ç»Ÿä¸€å¼‚å¸¸æ ¼å¼ï¼Œä¾¿äºå‰ç«¯å¤„ç†</li>
<li>è®°å½•å¼‚å¸¸æ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•å’Œç›‘æ§</li>
</ul>
<h5 data-id="heading-104">7.3.2 æœåŠ¡è®¾è®¡æœ€ä½³å®è·µ</h5>
<p><strong>1. è®¾è®¡RESTful API</strong></p>
<ul>
<li>éµå¾ªRESTfulè®¾è®¡åŸåˆ™</li>
<li>ä½¿ç”¨åˆé€‚çš„HTTPæ–¹æ³•</li>
<li>è®¾è®¡æ¸…æ™°çš„URLè·¯å¾„</li>
</ul>
<p><strong>2. æœåŠ¡å®ç°ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/employee/management")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeManagementService</span> {
    <span class="hljs-meta">@PostMapping("/save")</span>
    <span class="hljs-keyword">public</span> ResultModel&lt;Boolean&gt; <span class="hljs-title function_">saveEmployee</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> EmployeeManagementView view)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¿å­˜å‘˜å·¥ä¿¡æ¯é€»è¾‘</span>
            <span class="hljs-keyword">return</span> ResultModel.success(<span class="hljs-literal">true</span>, <span class="hljs-string">"ä¿å­˜æˆåŠŸ"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">return</span> ResultModel.error(<span class="hljs-string">"ä¿å­˜å¤±è´¥: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<p><strong>3. æœåŠ¡å®‰å…¨è®¾è®¡</strong></p>
<ul>
<li>æ·»åŠ é€‚å½“çš„è®¤è¯å’Œæˆæƒæœºåˆ¶</li>
<li>éªŒè¯è¯·æ±‚å‚æ•°ï¼Œé˜²æ­¢æ³¨å…¥æ”»å‡»</li>
<li>åŠ å¯†æ•æ„Ÿæ•°æ®</li>
</ul>
<h4 data-id="heading-105">7.4 æ€§èƒ½ä¼˜åŒ–</h4>
<p>æ€§èƒ½ä¼˜åŒ–æ˜¯Ooder A2UIå¼€å‘çš„é‡è¦ç¯èŠ‚ï¼Œè‰¯å¥½çš„æ€§èƒ½å¯ä»¥æé«˜ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚</p>
<h5 data-id="heading-106">7.4.1 ç»„ä»¶ä¼˜åŒ–</h5>
<p><strong>1. åˆç†è®¾è®¡ç»„ä»¶ç»“æ„</strong></p>
<ul>
<li>é¿å…è¿‡åº¦åµŒå¥—ç»„ä»¶</li>
<li>å‡å°‘ç»„ä»¶çš„å±‚çº§æ·±åº¦</li>
<li>ä¼˜åŒ–ç»„ä»¶çš„æ¸²æŸ“é€»è¾‘</li>
</ul>
<p><strong>2. ç»„ä»¶æ‡’åŠ è½½</strong></p>
<ul>
<li>æ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€åŠ è½½ç»„ä»¶</li>
<li>é¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šç»„ä»¶</li>
<li>æé«˜åˆå§‹åŠ è½½é€Ÿåº¦</li>
</ul>
<p><strong>3. ç»„ä»¶ç¼“å­˜</strong></p>
<ul>
<li>ç¼“å­˜ä¸ç»å¸¸å˜åŒ–çš„ç»„ä»¶</li>
<li>å‡å°‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“æ¬¡æ•°</li>
<li>æé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦</li>
</ul>
<h5 data-id="heading-107">7.4.2 é€šè®¯ä¼˜åŒ–</h5>
<p><strong>1. ä¼˜åŒ–é€šè®¯åè®®</strong></p>
<ul>
<li>ä½¿ç”¨é«˜æ•ˆçš„é€šè®¯åè®®</li>
<li>å‡å°‘æ•°æ®ä¼ è¾“é‡</li>
<li>å‹ç¼©å“åº”æ•°æ®</li>
</ul>
<p><strong>2. æ‰¹é‡è¯·æ±‚</strong></p>
<ul>
<li>å°†å¤šä¸ªå°è¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªå¤§è¯·æ±‚</li>
<li>å‡å°‘HTTPè¯·æ±‚æ¬¡æ•°</li>
<li>æé«˜é€šè®¯æ•ˆç‡</li>
</ul>
<p><strong>3. å¼‚æ­¥é€šè®¯</strong></p>
<ul>
<li>é‡‡ç”¨å¼‚æ­¥é€šè®¯æ–¹å¼</li>
<li>é¿å…é˜»å¡ä¸»çº¿ç¨‹</li>
<li>æé«˜ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›</li>
</ul>
<h5 data-id="heading-108">7.4.3 æ•°æ®ä¼˜åŒ–</h5>
<p><strong>1. åˆç†ä½¿ç”¨ç¼“å­˜</strong></p>
<ul>
<li>ç¼“å­˜å¸¸ç”¨æ•°æ®</li>
<li>å‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°</li>
<li>æé«˜æ•°æ®è®¿é—®é€Ÿåº¦</li>
</ul>
<p><strong>2. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢</strong></p>
<ul>
<li>ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢</li>
<li>é¿å…å…¨è¡¨æ‰«æ</li>
<li>ä¼˜åŒ–æŸ¥è¯¢è¯­å¥</li>
</ul>
<p><strong>3. æ•°æ®åˆ†é¡µ</strong></p>
<ul>
<li>å¯¹å¤§æ•°æ®é›†è¿›è¡Œåˆ†é¡µ</li>
<li>å‡å°‘å•æ¬¡è¿”å›çš„æ•°æ®é‡</li>
<li>æé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦</li>
</ul>
<h5 data-id="heading-109">7.4.4 ä¼ä¸šçº§é«˜å¹¶å‘ä¼˜åŒ–ç­–ç•¥</h5>
<p>é’ˆå¯¹ä¼ä¸šçº§é«˜å¹¶å‘åœºæ™¯ï¼ŒOoder A2UIæä¾›äº†ä»¥ä¸‹é«˜çº§ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<p><strong>1. ç»„ä»¶ç¼“å­˜ç­–ç•¥</strong></p>
<ul>
<li>å¯¹é«˜é¢‘è®¿é—®çš„é™æ€è§†å›¾ï¼ˆå¦‚èœå•ã€ä»ªè¡¨ç›˜ï¼‰å¯ç”¨<code>PageCache</code>ï¼Œç¼“å­˜æœ‰æ•ˆæœŸå†…ç›´æ¥è¿”å›ç¼–è¯‘åçš„JSONé…ç½®</li>
<li>æ”¯æŒåŸºäºç”¨æˆ·è§’è‰²çš„å·®å¼‚åŒ–ç¼“å­˜ï¼Œç¡®ä¿æ•°æ®å®‰å…¨æ€§</li>
<li>é…ç½®ç¤ºä¾‹ï¼š<code>@PageCache(expire = 3600, key = "menu_${user.role}")</code></li>
<li>æ€§èƒ½æ”¶ç›Šï¼šå‡å°‘80%ä»¥ä¸Šçš„ç¼–è¯‘æœŸè®¡ç®—å¼€é”€ï¼Œåˆå§‹åŠ è½½é€Ÿåº¦æå‡5-10å€</li>
</ul>
<p><strong>2. æ•°æ®åˆ†ç‰‡åŠ è½½</strong></p>
<ul>
<li>å¯¹å¤§æ•°æ®é‡ç½‘æ ¼ç»„ä»¶ï¼Œé€šè¿‡<code>@GridAnnotation(pageSize = 20)</code>é…ç½®åˆ†é¡µï¼Œç»“åˆåç«¯<code>PageHelper</code>å®ç°åˆ†ç‰‡æŸ¥è¯¢</li>
<li>æ”¯æŒè™šæ‹Ÿæ»šåŠ¨ï¼Œä»…æ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„æ•°æ®</li>
<li>é…ç½®ç¤ºä¾‹ï¼š
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GridAnnotation(
    pageSize = 20,
    virtualScroll = true,
    scrollHeight = "500px"
)</span>
<span class="hljs-keyword">private</span> String dataGrid;
</code></pre>
</li>
<li>æ€§èƒ½æ”¶ç›Šï¼šæ”¯æŒç™¾ä¸‡çº§æ•°æ®é‡å±•ç¤ºï¼Œåˆå§‹æ¸²æŸ“é€Ÿåº¦æå‡100å€ä»¥ä¸Š</li>
</ul>
<p><strong>3. é€šè®¯æ‰¹å¤„ç†</strong></p>
<ul>
<li>é€šè¿‡<code>@BatchAPIEventAnnotation</code>å°†å¤šä¸ªç‹¬ç«‹è¯·æ±‚åˆå¹¶ä¸ºä¸€æ¬¡æ‰¹é‡è¯·æ±‚ï¼Œå‡å°‘HTTPè¿æ¥æ•°</li>
<li>æ”¯æŒå¼‚æ­¥æ‰¹å¤„ç†ï¼Œæé«˜ç³»ç»Ÿå¹¶å‘èƒ½åŠ›</li>
<li>é…ç½®ç¤ºä¾‹ï¼š
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@BatchAPIEventAnnotation(
    batchSize = 5,
    delay = 100,
    bindActions = {CustomAction.UPDATE, CustomAction.DELETE}
)</span>
<span class="hljs-keyword">private</span> String batchButton;
</code></pre>
</li>
<li>æ€§èƒ½æ”¶ç›Šï¼šå‡å°‘HTTPè¯·æ±‚æ¬¡æ•°60%ä»¥ä¸Šï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹ç³»ç»Ÿååé‡æå‡3-5å€</li>
</ul>
<p><strong>4. æœåŠ¡å±‚å¼‚æ­¥å¤„ç†</strong></p>
<ul>
<li>å¯¹è€—æ—¶è¾ƒé•¿çš„æœåŠ¡æ–¹æ³•ï¼Œä½¿ç”¨<code>@Async</code>æ³¨è§£å®ç°å¼‚æ­¥å¤„ç†</li>
<li>é…ç½®çº¿ç¨‹æ± å‚æ•°ï¼Œä¼˜åŒ–å¹¶å‘å¤„ç†èƒ½åŠ›</li>
<li>ç»“åˆ<code>CompletableFuture</code>å®ç°å¤æ‚çš„å¼‚æ­¥ç¼–æ’</li>
<li>æ€§èƒ½æ”¶ç›Šï¼šæé«˜æœåŠ¡å±‚å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œå‡å°‘è¯·æ±‚ç­‰å¾…æ—¶é—´</li>
</ul>
<h5 data-id="heading-110">7.4.5 æ¸²æŸ“ä¼˜åŒ–</h5>
<p><strong>1. é™æ€æ¨¡æ¿æ¸²æŸ“</strong></p>
<ul>
<li>åˆ©ç”¨Ooderçš„é™æ€æ¨¡æ¿æ¸²æŸ“æœºåˆ¶</li>
<li>å‡å°‘å‰ç«¯çš„è®¡ç®—å¼€é”€</li>
<li>æé«˜åˆå§‹åŠ è½½é€Ÿåº¦</li>
</ul>
<p><strong>2. å‡å°‘DOMæ“ä½œ</strong></p>
<ul>
<li>æ‰¹é‡æ›´æ–°DOM</li>
<li>é¿å…é¢‘ç¹çš„DOMæ“ä½œ</li>
<li>ä½¿ç”¨è™šæ‹ŸDOMæŠ€æœ¯</li>
</ul>
<p><strong>3. ä¼˜åŒ–CSSå’ŒJavaScript</strong></p>
<ul>
<li>å‹ç¼©CSSå’ŒJavaScriptæ–‡ä»¶</li>
<li>å‡å°‘æ–‡ä»¶å¤§å°</li>
<li>æé«˜åŠ è½½é€Ÿåº¦</li>
</ul>
<h4 data-id="heading-111">7.5 æ ¸å¿ƒç†å¿µè§„èŒƒ</h4>
<p>ä»æŠ€æœ¯æ–‡æ¡£ä¸­å¯ä»¥æå–å‡ºOoder A2UIçš„æ ¸å¿ƒç†å¿µè§„èŒƒï¼š</p>
<p><strong>1. è§†å›¾å¯¹è±¡çš„åŒé‡è§’è‰²</strong></p>
<ul>
<li>æ•°æ®ä¼ è¾“å¯¹è±¡(DTO)ï¼šè§†å›¾å¯¹è±¡ä½œä¸ºæ•°æ®è½½ä½“ï¼Œç”¨äºå‰åç«¯æ•°æ®ä¼ è¾“</li>
<li>è§†å›¾é…ç½®è½½ä½“ï¼šé€šè¿‡æ³¨è§£å®šä¹‰è§†å›¾çš„å¤–è§‚ã€è¡Œä¸ºå’Œäº¤äº’</li>
</ul>
<p><strong>2. æ³¨è§£ä¸å‰ç«¯æ¡†æ¶çš„å¼ºæ˜ å°„å…³ç³»</strong></p>
<ul>
<li>ComponentType.INPUT â†’ ood.UI.Input</li>
<li>ViewType.FORM â†’ è¡¨å•è§†å›¾</li>
<li>APIEventAnnotation â†’ ç»‘å®šå‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡</li>
<li>RequestPathEnum/ResponsePathEnum â†’ æ§åˆ¶å‰åç«¯æ•°æ®æµå‘</li>
</ul>
<p><strong>3. æ³¨è§£é©±åŠ¨çš„è®¾è®¡åŸåˆ™</strong></p>
<ul>
<li>å£°æ˜å¼é…ç½®ï¼šé€šè¿‡æ³¨è§£å£°æ˜è§†å›¾ç»“æ„å’Œè¡Œä¸ºï¼Œè€Œéç¼–ç¨‹å¼å®šä¹‰</li>
<li>é…ç½®å³ä»£ç ï¼šæ³¨è§£é…ç½®ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œæé«˜å¯ç»´æŠ¤æ€§</li>
<li>å¼ºç±»å‹æ˜ å°„ï¼šæ³¨è§£ä¸å‰ç«¯ç»„ä»¶ä¸€ä¸€å¯¹åº”ï¼Œç¡®ä¿ç±»å‹å®‰å…¨</li>
</ul>
<p><strong>4. ç»„ä»¶ä½“ç³»è§„èŒƒ</strong></p>
<ul>
<li>éµå¾ª"å¹²-æ”¯-å¶"ç»“æ„åŒ–è®¾è®¡æ¨¡å¼</li>
<li>æ ¸å¿ƒæ³¨è§£ä½œä¸º"å¹²"ï¼Œå®šä¹‰ç»„ä»¶çš„åŸºæœ¬è¡Œä¸ºå’Œå±æ€§</li>
<li>å­ç±»ç»„ä»¶ä½œä¸º"æ”¯"ï¼Œæ‰©å±•æ ¸å¿ƒç»„ä»¶çš„åŠŸèƒ½</li>
<li>å…·ä½“åº”ç”¨åœºæ™¯ä½œä¸º"å¶"ï¼Œå®ç°å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚</li>
</ul>
<h3 data-id="heading-112">8. ä¸å…¶ä»–æ¡†æ¶æ¯”è¾ƒ</h3>
<h4 data-id="heading-113">8.1 ä¸React/Vueæ¯”è¾ƒ</h4>
<p>Ooder A2UIä¸React/Vueä½œä¸ºå½“å‰ä¸»æµçš„Webå¼€å‘æ¡†æ¶ï¼Œåœ¨è®¾è®¡ç†å¿µå’Œå®ç°æ–¹å¼ä¸Šæœ‰æ˜æ˜¾åŒºåˆ«ã€‚</p>






































































<table><thead><tr><th>ç‰¹æ€§</th><th>Ooder A2UI</th><th>React/Vue</th></tr></thead><tbody><tr><td><strong>æ¸²æŸ“æ–¹å¼</strong></td><td>é™æ€æ¨¡æ¿æ¸²æŸ“</td><td>åŠ¨æ€æ¸²æŸ“ï¼ˆè™šæ‹ŸDOMï¼‰</td></tr><tr><td><strong>å¼€å‘æ¨¡å¼</strong></td><td>æ³¨è§£é©±åŠ¨</td><td>æ¨¡æ¿/JSXé©±åŠ¨</td></tr><tr><td><strong>å‰åç«¯å…³ç³»</strong></td><td>å¼ºç»‘å®š</td><td>æ¾è€¦åˆ</td></tr><tr><td><strong>ç»„ä»¶è®¾è®¡</strong></td><td>å››åˆ†ç¦»è®¾è®¡ï¼ˆå±æ€§ã€æ ·å¼ã€äº‹ä»¶ã€è¡Œä¸ºåˆ†ç¦»ï¼‰</td><td>ç»„ä»¶åŒ–è®¾è®¡</td></tr><tr><td><strong>æ•°æ®ç®¡ç†</strong></td><td>åç«¯å®Œå…¨æ§åˆ¶</td><td>å‰ç«¯æ•°æ®ç®¡ç†ï¼ˆçŠ¶æ€ç®¡ç†åº“ï¼‰</td></tr><tr><td><strong>è®¾è®¡åŸåˆ™</strong></td><td>å£°æ˜å¼é…ç½®ï¼Œé…ç½®å³ä»£ç </td><td>å£°æ˜å¼ç¼–ç¨‹ï¼Œç»„ä»¶åŒ–å¼€å‘</td></tr><tr><td><strong>å‰åç«¯é€šè®¯</strong></td><td>æ³¨è§£é©±åŠ¨çš„é€šè®¯æœºåˆ¶</td><td>RESTful APIæˆ–GraphQL</td></tr><tr><td><strong>è§†å›¾ä¸æ•°æ®å…³ç³»</strong></td><td>DTO/VOä¸€ä½“åŒ–</td><td>æ•°æ®é©±åŠ¨è§†å›¾</td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>è¾ƒé™¡å³­ï¼Œéœ€è¦æŒæ¡Javaå’Œå‰ç«¯æŠ€æœ¯</td><td>è¾ƒå¹³ç¼“ï¼Œä¸»è¦å‰ç«¯æŠ€æœ¯</td></tr><tr><td><strong>é€‚åˆåœºæ™¯</strong></td><td>ä¼ä¸šçº§ç®¡ç†ç³»ç»Ÿï¼Œå¤æ‚è¡¨å•å¤„ç†</td><td>å„ç§Webåº”ç”¨ï¼ŒåŒ…æ‹¬å•é¡µåº”ç”¨</td></tr><tr><td><strong>æ€§èƒ½ç‰¹ç‚¹</strong></td><td>åˆå§‹åŠ è½½å¿«ï¼ŒåŠ¨æ€æ›´æ–°æ…¢</td><td>åˆå§‹åŠ è½½æ…¢ï¼ŒåŠ¨æ€æ›´æ–°å¿«</td></tr><tr><td><strong>AIå…¼å®¹æ€§</strong></td><td>ç»“æ„åŒ–è®¾è®¡ï¼Œä¾¿äºAIç”Ÿæˆä»£ç </td><td>åŠ¨æ€ç»“æ„ï¼ŒAIç”Ÿæˆä»£ç éš¾åº¦è¾ƒå¤§</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒåŒºåˆ«åˆ†æ</strong>ï¼š</p>
<ol>
<li><strong>æ¸²æŸ“æ–¹å¼</strong>ï¼šOoder A2UIé‡‡ç”¨é™æ€æ¨¡æ¿æ¸²æŸ“ï¼Œåç«¯å®Œå…¨è¾“å‡ºJSONäº¤ç”±å‰ç«¯æ¸²æŸ“ï¼›è€ŒReact/Vueé‡‡ç”¨åŠ¨æ€æ¸²æŸ“ï¼Œé€šè¿‡è™šæ‹ŸDOMå®ç°é«˜æ•ˆæ›´æ–°ã€‚</li>
<li><strong>å¼€å‘æ¨¡å¼</strong>ï¼šOoder A2UIåŸºäºJavaæ³¨è§£é©±åŠ¨å¼€å‘ï¼Œå°†å‰åç«¯ç´§å¯†ç»‘å®šï¼›è€ŒReact/VueåŸºäºæ¨¡æ¿/JSXé©±åŠ¨ï¼Œå‰åç«¯æ¾è€¦åˆã€‚</li>
<li><strong>ç»„ä»¶è®¾è®¡</strong>ï¼šOoder A2UIé‡‡ç”¨å››åˆ†ç¦»è®¾è®¡åŸåˆ™ï¼Œå°†å±æ€§ã€æ ·å¼ã€äº‹ä»¶ã€è¡Œä¸ºåˆ†ç¦»ï¼›è€ŒReact/Vueé‡‡ç”¨ç»„ä»¶åŒ–è®¾è®¡ï¼Œå°†HTMLã€CSSã€JavaScriptå°è£…åœ¨ç»„ä»¶ä¸­ã€‚</li>
<li><strong>æ•°æ®ç®¡ç†</strong>ï¼šOoder A2UIç”±åç«¯å®Œå…¨æ§åˆ¶æ•°æ®ï¼Œå‰ç«¯åªè´Ÿè´£å±•ç¤ºï¼›è€ŒReact/Vueç”±å‰ç«¯ç®¡ç†æ•°æ®ï¼Œé€šè¿‡çŠ¶æ€ç®¡ç†åº“å®ç°å¤æ‚æ•°æ®æµè½¬ã€‚</li>
<li><strong>AIå…¼å®¹æ€§</strong>ï¼šOoder A2UIçš„ç»“æ„åŒ–è®¾è®¡å’Œå¼ºç±»å‹æ˜ å°„ï¼Œä½¿å…¶æ›´é€‚åˆAIç”Ÿæˆä»£ç ï¼›è€ŒReact/Vueçš„åŠ¨æ€ç»“æ„å’Œçµæ´»è¯­æ³•ï¼Œå¢åŠ äº†AIç”Ÿæˆä»£ç çš„éš¾åº¦ã€‚</li>
</ol>
<p><strong>ä¼ä¸šçº§åœºæ™¯æ€§èƒ½å¯¹æ¯”</strong>ï¼š</p>



































<table><thead><tr><th>æµ‹è¯•åœºæ™¯</th><th>Ooder A2UI</th><th>React 18</th><th>Vue 3</th></tr></thead><tbody><tr><td>100å­—æ®µå¤æ‚è¡¨å•åˆå§‹åŠ è½½</td><td>200ms</td><td>350ms</td><td>320ms</td></tr><tr><td>1000è¡Œæ•°æ®ç½‘æ ¼æ¸²æŸ“</td><td>450ms</td><td>300ms</td><td>280ms</td></tr><tr><td>è¡¨å•æäº¤-æ•°æ®ä¿å­˜-UIåˆ·æ–°</td><td>150ms</td><td>120ms</td><td>110ms</td></tr><tr><td>ç¼–è¯‘æœŸç±»å‹æ ¡éªŒè¦†ç›–åº¦</td><td>100%</td><td>éœ€é¢å¤–TSæ ¡éªŒ</td><td>éœ€é¢å¤–TSæ ¡éªŒ</td></tr></tbody></table>
<p><strong>æ€§èƒ½æµ‹è¯•ç»“è®º</strong>ï¼š</p>
<ul>
<li><strong>åˆå§‹åŠ è½½æ€§èƒ½</strong>ï¼šOoder A2UIåœ¨<strong>å¤æ‚è¡¨å•åˆå§‹åŠ è½½</strong>åœºæ™¯ä¸‹è¡¨ç°ä¼˜å¼‚ï¼Œæ¯”Reactå¿«43%ï¼Œæ¯”Vueå¿«37.5%ï¼Œé€‚åˆå¤§å‹ä¼ä¸šçº§è¡¨å•åº”ç”¨</li>
<li><strong>åŠ¨æ€æ¸²æŸ“æ€§èƒ½</strong>ï¼šReact/Vueåœ¨<strong>1000è¡Œæ•°æ®ç½‘æ ¼æ¸²æŸ“</strong>åœºæ™¯ä¸‹æ›´ä¼˜ï¼Œåˆ©ç”¨è™šæ‹ŸDOMæŠ€æœ¯å®ç°é«˜æ•ˆæ›´æ–°ï¼Œé€‚åˆæ•°æ®é«˜é¢‘å˜åŒ–çš„åœºæ™¯</li>
<li><strong>ç«¯åˆ°ç«¯æ€§èƒ½</strong>ï¼šä¸‰è€…åœ¨<strong>è¡¨å•æäº¤-æ•°æ®ä¿å­˜-UIåˆ·æ–°</strong>åœºæ™¯ä¸‹æ€§èƒ½å·®å¼‚ä¸å¤§ï¼Œä¸»è¦å–å†³äºç½‘ç»œå»¶è¿Ÿå’Œåç«¯å¤„ç†é€Ÿåº¦</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šOoder A2UIé€šè¿‡<strong>ç¼–è¯‘æœŸç±»å‹æ ¡éªŒ</strong>å®ç°100%è¦†ç›–ï¼Œé¿å…äº†è¿è¡ŒæœŸç±»å‹é”™è¯¯ï¼Œè€ŒReact/Vueéœ€è¦é¢å¤–é…ç½®TypeScriptæ‰èƒ½å®ç°ç±»ä¼¼åŠŸèƒ½</li>
</ul>
<p><strong>é€‰æ‹©å»ºè®®</strong>ï¼š</p>
<ul>
<li>å¯¹äº<strong>ä¼ä¸šçº§ç®¡ç†ç³»ç»Ÿ</strong>ã€<strong>å¤æ‚è¡¨å•å¤„ç†</strong>å’Œ<strong>é‡è§†åˆå§‹åŠ è½½é€Ÿåº¦</strong>çš„åœºæ™¯ï¼ŒOoder A2UIæ˜¯æ›´ä¼˜é€‰æ‹©</li>
<li>å¯¹äº<strong>å•é¡µåº”ç”¨</strong>ã€<strong>é«˜äº¤äº’æ€§å‰ç«¯åº”ç”¨</strong>å’Œ<strong>æ•°æ®é«˜é¢‘å˜åŒ–</strong>çš„åœºæ™¯ï¼ŒReact/Vueå¯èƒ½æ›´é€‚åˆ</li>
</ul>
<h4 data-id="heading-114">8.2 ä¸ä¼ ç»ŸJSP/ASPæ¯”è¾ƒ</h4>
<p>Ooder A2UIä¸ä¼ ç»ŸJSP/ASPæŠ€æœ¯ç›¸æ¯”ï¼Œåœ¨å¼€å‘æ¨¡å¼ã€å‰åç«¯åˆ†ç¦»ã€ç»„ä»¶åŒ–ç¨‹åº¦ç­‰æ–¹é¢æœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚</p>




























































<table><thead><tr><th>ç‰¹æ€§</th><th>Ooder A2UI</th><th>ä¼ ç»ŸJSP/ASP</th></tr></thead><tbody><tr><td><strong>å¼€å‘æ¨¡å¼</strong></td><td>æ³¨è§£é©±åŠ¨</td><td>è„šæœ¬åµŒå…¥</td></tr><tr><td><strong>å‰åç«¯åˆ†ç¦»</strong></td><td>å‰åç«¯ä¸€ä½“åŒ–è®¾è®¡</td><td>å‰åç«¯æ··åˆ</td></tr><tr><td><strong>ç»„ä»¶åŒ–ç¨‹åº¦</strong></td><td>é«˜åº¦ç»„ä»¶åŒ–</td><td>ä½ç»„ä»¶åŒ–</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>é™æ€æ¨¡æ¿æ¸²æŸ“ï¼Œåˆå§‹åŠ è½½å¿«</td><td>åŠ¨æ€ç¼–è¯‘ï¼Œåˆå§‹åŠ è½½æ…¢</td></tr><tr><td><strong>ç»´æŠ¤æ€§</strong></td><td>æ˜“äºç»´æŠ¤å’Œæ‰©å±•</td><td>ç»´æŠ¤å›°éš¾ï¼Œæ‰©å±•æ€§å·®</td></tr><tr><td><strong>å¼€å‘æ•ˆç‡</strong></td><td>æ³¨è§£é©±åŠ¨ï¼Œå¼€å‘æ•ˆç‡é«˜</td><td>è„šæœ¬åµŒå…¥ï¼Œå¼€å‘æ•ˆç‡ä½</td></tr><tr><td><strong>ä»£ç å¤ç”¨</strong></td><td>é«˜åº¦ç»„ä»¶åŒ–ï¼Œä»£ç å¤ç”¨ç‡é«˜</td><td>ä½ç»„ä»¶åŒ–ï¼Œä»£ç å¤ç”¨ç‡ä½</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>å‰åç«¯å¼ºç»‘å®šï¼Œå®‰å…¨æ€§é«˜</td><td>å‰åç«¯æ··åˆï¼Œå®‰å…¨æ€§è¾ƒä½</td></tr><tr><td><strong>å“åº”å¼æ”¯æŒ</strong></td><td>å†…ç½®å“åº”å¼è®¾è®¡</td><td>éœ€æ‰‹åŠ¨å®ç°å“åº”å¼</td></tr><tr><td><strong>ç°ä»£åŒ–æ”¯æŒ</strong></td><td>æ”¯æŒç°ä»£æµè§ˆå™¨ï¼Œå“åº”å¼è®¾è®¡</td><td>å¯¹ç°ä»£æµè§ˆå™¨æ”¯æŒæœ‰é™</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒåŒºåˆ«åˆ†æ</strong>ï¼š</p>
<ol>
<li><strong>å¼€å‘æ¨¡å¼</strong>ï¼šOoder A2UIé‡‡ç”¨æ³¨è§£é©±åŠ¨å¼€å‘ï¼Œå°†ä¸šåŠ¡é€»è¾‘ä¸UIè®¾è®¡åˆ†ç¦»ï¼›è€Œä¼ ç»ŸJSP/ASPé‡‡ç”¨è„šæœ¬åµŒå…¥æ–¹å¼ï¼Œå°†HTMLå’Œä»£ç æ··åˆåœ¨ä¸€èµ·ã€‚</li>
<li><strong>å‰åç«¯åˆ†ç¦»</strong>ï¼šOoder A2UIè™½ç„¶é‡‡ç”¨å‰åç«¯ä¸€ä½“åŒ–è®¾è®¡ï¼Œä½†é€šè¿‡æ³¨è§£å®ç°äº†æ¸…æ™°çš„åˆ†å±‚ï¼›è€Œä¼ ç»ŸJSP/ASPå®Œå…¨æ··åˆï¼Œå‰åç«¯è¾¹ç•Œæ¨¡ç³Šã€‚</li>
<li><strong>ç»„ä»¶åŒ–ç¨‹åº¦</strong>ï¼šOoder A2UIé«˜åº¦ç»„ä»¶åŒ–ï¼Œæ”¯æŒç»„ä»¶å¤ç”¨å’Œæ‰©å±•ï¼›è€Œä¼ ç»ŸJSP/ASPç»„ä»¶åŒ–ç¨‹åº¦ä½ï¼Œä»£ç å¤ç”¨å›°éš¾ã€‚</li>
<li><strong>æ€§èƒ½</strong>ï¼šOoder A2UIé‡‡ç”¨é™æ€æ¨¡æ¿æ¸²æŸ“ï¼Œåˆå§‹åŠ è½½å¿«ï¼›è€Œä¼ ç»ŸJSP/ASPéœ€è¦åŠ¨æ€ç¼–è¯‘ï¼Œåˆå§‹åŠ è½½æ…¢ã€‚</li>
<li><strong>ç»´æŠ¤æ€§</strong>ï¼šOoder A2UIçš„ç»“æ„åŒ–è®¾è®¡å’Œæ¸…æ™°åˆ†å±‚ï¼Œä½¿å…¶æ˜“äºç»´æŠ¤å’Œæ‰©å±•ï¼›è€Œä¼ ç»ŸJSP/ASPçš„æ··åˆä»£ç ï¼Œç»´æŠ¤å›°éš¾ï¼Œæ‰©å±•æ€§å·®ã€‚</li>
</ol>
<h4 data-id="heading-115">8.3 ä¸ä½ä»£ç å¹³å°æ¯”è¾ƒ</h4>
<p>Ooder A2UIä¸ä½ä»£ç å¹³å°éƒ½æ˜¯ä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼Œä½†åœ¨å¼€å‘æ–¹å¼ã€çµæ´»æ€§ã€æ€§èƒ½ç­‰æ–¹é¢æœ‰æ˜æ˜¾åŒºåˆ«ã€‚</p>




























































<table><thead><tr><th>ç‰¹æ€§</th><th>Ooder A2UI</th><th>ä½ä»£ç å¹³å°</th></tr></thead><tbody><tr><td><strong>å¼€å‘æ–¹å¼</strong></td><td>ä»£ç é©±åŠ¨ + å¯è§†åŒ–ç¼–è¾‘</td><td>å¯è§†åŒ–ç¼–è¾‘ä¸ºä¸»</td></tr><tr><td><strong>çµæ´»æ€§</strong></td><td>é«˜åº¦çµæ´»ï¼Œæ”¯æŒå¤æ‚ä¸šåŠ¡é€»è¾‘</td><td>çµæ´»æ€§å—é™ï¼Œé€‚åˆç®€å•åº”ç”¨</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>é«˜æ€§èƒ½ï¼Œé€‚åˆå¤æ‚åº”ç”¨</td><td>æ€§èƒ½ä¸€èˆ¬ï¼Œé€‚åˆç®€å•åº”ç”¨</td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>è¾ƒé™¡å³­ï¼Œéœ€è¦æŒæ¡Javaå’Œå‰ç«¯æŠ€æœ¯</td><td>è¾ƒå¹³ç¼“ï¼Œæ˜“äºä¸Šæ‰‹</td></tr><tr><td><strong>å®šåˆ¶èƒ½åŠ›</strong></td><td>é«˜åº¦å¯å®šåˆ¶</td><td>å®šåˆ¶èƒ½åŠ›å—é™</td></tr><tr><td><strong>å¤æ‚ä¸šåŠ¡æ”¯æŒ</strong></td><td>æ”¯æŒå¤æ‚ä¸šåŠ¡é€»è¾‘</td><td>é€‚åˆç®€å•ä¸šåŠ¡é€»è¾‘</td></tr><tr><td><strong>ä»£ç å¯æ§æ€§</strong></td><td>å®Œå…¨å¯æ§ï¼Œå¯ç›´æ¥ä¿®æ”¹ä»£ç </td><td>ä»£ç ç”Ÿæˆåéš¾ä»¥ä¿®æ”¹</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>é«˜åº¦å¯æ‰©å±•ï¼Œæ”¯æŒè‡ªå®šä¹‰ç»„ä»¶</td><td>æ‰©å±•æ€§å—é™ï¼Œä¾èµ–å¹³å°èƒ½åŠ›</td></tr><tr><td><strong>é€‚åˆå›¢é˜Ÿ</strong></td><td>ä¸“ä¸šå¼€å‘å›¢é˜Ÿ</td><td>ä¸šåŠ¡äººå‘˜æˆ–ä½ä»£ç å¼€å‘è€…</td></tr><tr><td><strong>éƒ¨ç½²æ–¹å¼</strong></td><td>çµæ´»éƒ¨ç½²ï¼Œæ”¯æŒç§æœ‰éƒ¨ç½²</td><td>é€šå¸¸äº‘éƒ¨ç½²ï¼Œç§æœ‰éƒ¨ç½²æˆæœ¬é«˜</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒåŒºåˆ«åˆ†æ</strong>ï¼š</p>
<ol>
<li><strong>å¼€å‘æ–¹å¼</strong>ï¼šOoder A2UIä»¥ä»£ç é©±åŠ¨ä¸ºä¸»ï¼Œç»“åˆå¯è§†åŒ–ç¼–è¾‘ï¼›è€Œä½ä»£ç å¹³å°ä»¥å¯è§†åŒ–ç¼–è¾‘ä¸ºä¸»ï¼Œä»£ç ç¼–è¾‘ä¸ºè¾…ã€‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šOoder A2UIé«˜åº¦çµæ´»ï¼Œæ”¯æŒå¤æ‚ä¸šåŠ¡é€»è¾‘å’Œå®šåˆ¶éœ€æ±‚ï¼›è€Œä½ä»£ç å¹³å°çµæ´»æ€§å—é™ï¼Œé€‚åˆç®€å•åº”ç”¨ã€‚</li>
<li><strong>æ€§èƒ½</strong>ï¼šOoder A2UIæ€§èƒ½ä¼˜å¼‚ï¼Œé€‚åˆå¤æ‚åº”ç”¨å’Œé«˜å¹¶å‘åœºæ™¯ï¼›è€Œä½ä»£ç å¹³å°æ€§èƒ½ä¸€èˆ¬ï¼Œé€‚åˆç®€å•åº”ç”¨ã€‚</li>
<li><strong>ä»£ç å¯æ§æ€§</strong>ï¼šOoder A2UIç”Ÿæˆçš„ä»£ç å®Œå…¨å¯æ§ï¼Œå¯ç›´æ¥ä¿®æ”¹ï¼›è€Œä½ä»£ç å¹³å°ç”Ÿæˆçš„ä»£ç éš¾ä»¥ä¿®æ”¹ï¼Œä¾èµ–å¹³å°èƒ½åŠ›ã€‚</li>
<li><strong>é€‚åˆå›¢é˜Ÿ</strong>ï¼šOoder A2UIé€‚åˆä¸“ä¸šå¼€å‘å›¢é˜Ÿï¼Œå……åˆ†å‘æŒ¥å¼€å‘äººå‘˜çš„èƒ½åŠ›ï¼›è€Œä½ä»£ç å¹³å°é€‚åˆä¸šåŠ¡äººå‘˜æˆ–ä½ä»£ç å¼€å‘è€…ï¼Œé™ä½å¼€å‘é—¨æ§›ã€‚</li>
</ol>
<h4 data-id="heading-116">8.4 æ€»ç»“</h4>
<p>Ooder A2UIä½œä¸ºä¸€ç§æ–°å‹çš„å…¨æ ˆæ¡†æ¶ï¼Œåœ¨è®¾è®¡ç†å¿µå’Œå®ç°æ–¹å¼ä¸Šä¸ä¼ ç»Ÿæ¡†æ¶å’Œä½ä»£ç å¹³å°æœ‰æ˜æ˜¾åŒºåˆ«ã€‚å®ƒç»“åˆäº†æ³¨è§£é©±åŠ¨å¼€å‘ã€é™æ€æ¨¡æ¿æ¸²æŸ“ã€å‰åç«¯å¼ºæ˜ å°„ç­‰ç‰¹ç‚¹ï¼Œé€‚åˆå¼€å‘å¤æ‚çš„ä¼ä¸šçº§ç®¡ç†ç³»ç»Ÿã€‚</p>
<p><strong>é€‰æ‹©å»ºè®®</strong>ï¼š</p>
<ol>
<li>å¦‚æœéœ€è¦å¼€å‘å¤æ‚çš„ä¼ä¸šçº§ç®¡ç†ç³»ç»Ÿï¼ŒOoder A2UIæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</li>
<li>å¦‚æœéœ€è¦å¼€å‘å•é¡µåº”ç”¨æˆ–å¯¹å‰ç«¯äº¤äº’è¦æ±‚è¾ƒé«˜ï¼ŒReact/Vueå¯èƒ½æ›´é€‚åˆã€‚</li>
<li>å¦‚æœéœ€è¦å¿«é€Ÿå¼€å‘ç®€å•åº”ç”¨ï¼Œä½ä»£ç å¹³å°å¯èƒ½æ›´é€‚åˆã€‚</li>
<li>ä¼ ç»ŸJSP/ASPå·²ç»é€æ¸è¢«æ·˜æ±°ï¼Œä¸å»ºè®®æ–°é¡¹ç›®ä½¿ç”¨ã€‚</li>
</ol>
<p>Ooder A2UIçš„ä¼˜åŠ¿åœ¨äºå°†å‰åç«¯ç´§å¯†ç»‘å®šï¼Œå‡å°‘äº†å‰åç«¯æ²Ÿé€šæˆæœ¬ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚å®ƒçš„ç»“æ„åŒ–è®¾è®¡ä¹Ÿä½¿å…¶éå¸¸é€‚åˆAIç”Ÿæˆä»£ç ï¼Œç¬¦åˆæœªæ¥A2UIï¼ˆAI to UIï¼‰çš„å‘å±•æ–¹å‘ã€‚</p>
<h3 data-id="heading-117">9. æœªæ¥å‘å±•æ–¹å‘</h3>
<p>Ooder A2UIçš„æ ¸å¿ƒå®šä½æ˜¯<strong>å…¨æ ˆé€šç”¨æ¶æ„æ¨¡å‹</strong>ï¼Œæœªæ¥å°†æ›´å€¾å‘äºå‘AIé è¿‘ï¼Œæ ¸å¿ƒæœç€<strong>è½»é‡çº§A2UIå¼€æºå¼€æ”¾</strong>åŠªåŠ›ã€‚</p>
<h4 data-id="heading-118">9.1 æ ¸å¿ƒæ¶æ„æ¨¡å‹ä¼˜åŒ–</h4>
<p>èšç„¦äºå…¨æ ˆé€šç”¨æ¶æ„æ¨¡å‹çš„ä¼˜åŒ–ï¼Œæ‰“é€ æ›´è½»é‡ã€æ›´é«˜æ•ˆçš„A2UIå¼€å‘æ¡†æ¶ï¼š</p>






























<table><thead><tr><th>å‘å±•æ–¹å‘</th><th>çŸ­æœŸç›®æ ‡ï¼ˆ1å¹´å†…ï¼‰</th><th>é•¿æœŸç›®æ ‡ï¼ˆ2-3å¹´ï¼‰</th></tr></thead><tbody><tr><td>è½»é‡çº§æ¶æ„</td><td>ä¼˜åŒ–ç¼–è¯‘æœŸæµç¨‹ï¼Œå‡å°‘æ ¸å¿ƒä¾èµ–ï¼Œé™ä½æ¡†æ¶ä½“ç§¯</td><td>å®ç°æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½æ ¸å¿ƒç»„ä»¶</td></tr><tr><td>é€šç”¨æ¶æ„æ¨¡å‹</td><td>æç‚¼æ›´é€šç”¨çš„å…¨æ ˆæ¶æ„æ¨¡å‹ï¼Œé€‚é…æ›´å¤šä¸šåŠ¡åœºæ™¯</td><td>æ„å»ºå¯æ‰©å±•çš„æ¶æ„ä½“ç³»ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•å’Œæ’ä»¶å¼€å‘</td></tr><tr><td>æ€§èƒ½ä¼˜åŒ–</td><td>è¿›ä¸€æ­¥æå‡åˆå§‹åŠ è½½é€Ÿåº¦å’ŒåŠ¨æ€æ›´æ–°æ•ˆç‡</td><td>å®ç°è‡ªåŠ¨æ€§èƒ½ä¼˜åŒ–ï¼Œæ ¹æ®è¿è¡Œç¯å¢ƒè‡ªé€‚åº”è°ƒæ•´</td></tr><tr><td>å¼€å‘ä½“éªŒä¼˜åŒ–</td><td>ç®€åŒ–æ³¨è§£é…ç½®ï¼Œæä¾›æ›´å‹å¥½çš„å¼€å‘å·¥å…·æ”¯æŒ</td><td>é›†æˆIDEæ’ä»¶ï¼Œå®ç°æ™ºèƒ½åŒ–å¼€å‘è¾…åŠ©</td></tr></tbody></table>
<h4 data-id="heading-119">9.2 AIåŸç”Ÿèƒ½åŠ›å¢å¼º</h4>
<p>å¼ºåŒ–AIåŸç”Ÿè®¾è®¡ï¼Œæ‰“é€ æ›´é€‚åˆAIç”Ÿæˆä»£ç çš„æ¶æ„ä½“ç³»ï¼š</p>






























<table><thead><tr><th>å‘å±•æ–¹å‘</th><th>çŸ­æœŸç›®æ ‡ï¼ˆ1å¹´å†…ï¼‰</th><th>é•¿æœŸç›®æ ‡ï¼ˆ2-3å¹´ï¼‰</th></tr></thead><tbody><tr><td>A2UIæ ¸å¿ƒèƒ½åŠ›</td><td>ä¼˜åŒ–å››åˆ†ç¦»è®¾è®¡ï¼Œä½¿å…¶æ›´é€‚åˆAIç†è§£å’Œç”Ÿæˆ</td><td>å®ç°AIå‹å¥½çš„ç»„ä»¶æè¿°è¯­è¨€ï¼Œé™ä½AIç”Ÿæˆä»£ç çš„å¤æ‚åº¦</td></tr><tr><td>AIä»£ç ç”Ÿæˆæ”¯æŒ</td><td>æä¾›AIç”Ÿæˆä»£ç çš„æ ‡å‡†æ¨¡æ¿å’Œæœ€ä½³å®è·µ</td><td>æ„å»ºAIä»£ç ç”Ÿæˆçš„è¯„ä¼°ä½“ç³»ï¼Œç¡®ä¿ç”Ÿæˆä»£ç çš„è´¨é‡</td></tr><tr><td>æ™ºèƒ½åŒ–å¼€å‘å·¥å…·</td><td>é›†æˆAIè¾…åŠ©å¼€å‘å·¥å…·ï¼Œæ”¯æŒæ™ºèƒ½è¡¥å…¨ã€é”™è¯¯æç¤º</td><td>å®ç°AIé©±åŠ¨çš„ä»£ç é‡æ„å’Œä¼˜åŒ–å»ºè®®</td></tr><tr><td>ä½ä»£ç /æ— ä»£ç æ”¯æŒ</td><td>æä¾›å¯è§†åŒ–è®¾è®¡å™¨ï¼Œæ”¯æŒæ‹–æ‹½å¼å¼€å‘</td><td>å®ç°éœ€æ±‚æ–‡æ¡£åˆ°ä»£ç çš„è‡ªåŠ¨è½¬æ¢ï¼Œé™ä½å¼€å‘é—¨æ§›</td></tr></tbody></table>
<h4 data-id="heading-120">9.3 å¼€æºå¼€æ”¾ç”Ÿæ€å»ºè®¾</h4>
<p>æ¨åŠ¨Ooder A2UIçš„å¼€æºå¼€æ”¾ï¼Œæ„å»ºæ´»è·ƒçš„å¼€å‘è€…ç”Ÿæ€ï¼š</p>






























<table><thead><tr><th>å‘å±•æ–¹å‘</th><th>çŸ­æœŸç›®æ ‡ï¼ˆ1å¹´å†…ï¼‰</th><th>é•¿æœŸç›®æ ‡ï¼ˆ2-3å¹´ï¼‰</th></tr></thead><tbody><tr><td>å¼€æºç¤¾åŒºå»ºè®¾</td><td>å»ºç«‹GitHubå¼€æºä»“åº“ï¼Œå‘å¸ƒæ ¸å¿ƒä»£ç å’Œæ–‡æ¡£</td><td>æ„å»ºæ´»è·ƒçš„å¼€å‘è€…ç¤¾åŒºï¼Œå¸å¼•æ›´å¤šè´¡çŒ®è€…</td></tr><tr><td>ç»„ä»¶åº“æ‰©å±•</td><td>æä¾›åŸºç¡€ç»„ä»¶åº“ï¼Œæ”¯æŒè‡ªå®šä¹‰ç»„ä»¶å¼€å‘</td><td>å»ºç«‹ç»„ä»¶å¸‚åœºï¼Œæ”¯æŒç»„ä»¶çš„å…±äº«å’Œå¤ç”¨</td></tr><tr><td>æ–‡æ¡£å’Œæ•™ç¨‹</td><td>å®Œå–„å®˜æ–¹æ–‡æ¡£ï¼Œæä¾›å…¥é—¨æ•™ç¨‹å’Œæœ€ä½³å®è·µ</td><td>æ„å»ºä¸°å¯Œçš„å­¦ä¹ èµ„æºï¼ŒåŒ…æ‹¬è§†é¢‘æ•™ç¨‹ã€æ¡ˆä¾‹åˆ†æ</td></tr><tr><td>åˆä½œä¼™ä¼´ç”Ÿæ€</td><td>ä¸AIå¹³å°ã€äº‘æœåŠ¡æä¾›å•†å»ºç«‹åˆä½œå…³ç³»</td><td>æ„å»ºå®Œæ•´çš„A2UIç”Ÿæ€ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§åœºæ™¯åº”ç”¨</td></tr></tbody></table>
<h4 data-id="heading-121">9.4 ä¼ä¸šçº§æ”¯æŒä¸é€‚é…</h4>
<p>åœ¨ä¿æŒè½»é‡çº§æ ¸å¿ƒçš„åŒæ—¶ï¼Œæä¾›ä¼ä¸šçº§æ”¯æŒå’Œé€‚é…ï¼š</p>






























<table><thead><tr><th>å‘å±•æ–¹å‘</th><th>çŸ­æœŸç›®æ ‡ï¼ˆ1å¹´å†…ï¼‰</th><th>é•¿æœŸç›®æ ‡ï¼ˆ2-3å¹´ï¼‰</th></tr></thead><tbody><tr><td>ä¼ä¸šçº§éƒ¨ç½²æ–¹æ¡ˆ</td><td>æä¾›ç®€å•æ˜“ç”¨çš„éƒ¨ç½²å·¥å…·ï¼Œæ”¯æŒç§æœ‰éƒ¨ç½²</td><td>æ”¯æŒä¼ä¸šçº§å®‰å…¨è®¤è¯å’Œæƒé™ç®¡ç†</td></tr><tr><td>é›†æˆèƒ½åŠ›</td><td>æ”¯æŒä¸ä¸»æµä¼ä¸šç³»ç»Ÿçš„é›†æˆï¼Œå¦‚ERPã€CRM</td><td>æä¾›æ ‡å‡†åŒ–çš„é›†æˆæ¥å£ï¼Œæ”¯æŒè‡ªå®šä¹‰é›†æˆå¼€å‘</td></tr><tr><td>åˆè§„æ€§æ”¯æŒ</td><td>å®ç°æ•°æ®éšç§ä¿æŠ¤å’Œåˆè§„æ€§æ”¯æŒ</td><td>æ”¯æŒGDPRã€ç­‰ä¿2.0ç­‰åˆè§„æ€§è¦æ±‚</td></tr><tr><td>ä¼ä¸šçº§æœåŠ¡</td><td>æä¾›æŠ€æœ¯æ”¯æŒå’ŒåŸ¹è®­æœåŠ¡ï¼Œæ”¯æŒå®šåˆ¶åŒ–å¼€å‘</td><td>å»ºç«‹ä¼ä¸šçº§æœåŠ¡ä½“ç³»ï¼Œæ”¯æŒå¤§è§„æ¨¡åº”ç”¨éƒ¨ç½²</td></tr></tbody></table>
<h3 data-id="heading-122">é™„å½•</h3>
<h4 data-id="heading-123">æ ¸å¿ƒAPIå‚è€ƒ</h4>
<h5 data-id="heading-124">1. Pageç›¸å…³API</h5>



































<table><thead><tr><th>APIåç§°</th><th>åŠŸèƒ½æè¿°</th><th>ä½¿ç”¨ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>PageCtx.getContext()</code></td><td>è·å–å½“å‰Pageä¸Šä¸‹æ–‡</td><td><code>PageCtx.getContext().getUser()</code></td></tr><tr><td><code>PageCtx.setData(key, value)</code></td><td>è®¾ç½®Pageä¸Šä¸‹æ–‡æ•°æ®</td><td><code>PageCtx.setData("userInfo", userData)</code></td></tr><tr><td><code>PageCtx.getData(key)</code></td><td>è·å–Pageä¸Šä¸‹æ–‡æ•°æ®</td><td><code>const userInfo = PageCtx.getData("userInfo")</code></td></tr><tr><td><code>PageCtx.refreshComponent(componentId)</code></td><td>åˆ·æ–°æŒ‡å®šç»„ä»¶</td><td><code>PageCtx.refreshComponent("dataGrid")</code></td></tr><tr><td><code>PageCtx.showMessage(message, type)</code></td><td>æ˜¾ç¤ºæç¤ºæ¶ˆæ¯</td><td><code>PageCtx.showMessage("ä¿å­˜æˆåŠŸ", "success")</code></td></tr></tbody></table>
<h5 data-id="heading-125">2. é€šè®¯ç›¸å…³API</h5>

























<table><thead><tr><th>APIåç§°</th><th>åŠŸèƒ½æè¿°</th><th>ä½¿ç”¨ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>APIEvent.invoke(action, data)</code></td><td>è°ƒç”¨æŒ‡å®šäº‹ä»¶</td><td><code>APIEvent.invoke(CustomAction.SAVE, formData)</code></td></tr><tr><td><code>APIEvent.bind(action, callback)</code></td><td>ç»‘å®šäº‹ä»¶å›è°ƒ</td><td><code>APIEvent.bind(CustomAction.SAVE, onSaveSuccess)</code></td></tr><tr><td><code>APIEvent.unbind(action, callback)</code></td><td>è§£ç»‘äº‹ä»¶å›è°ƒ</td><td><code>APIEvent.unbind(CustomAction.SAVE, onSaveSuccess)</code></td></tr></tbody></table>
<h4 data-id="heading-126">æ³¨è§£åˆ—è¡¨</h4>
<h5 data-id="heading-127">æ ¸å¿ƒæ³¨è§£é€ŸæŸ¥è¡¨</h5>

























































































<table><thead><tr><th>æ³¨è§£ç±»å‹</th><th>æ ¸å¿ƒæ³¨è§£</th><th>ä¸»è¦ç”¨é€”</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>è§†å›¾æ³¨è§£</td><td><code>@FormAnnotation</code></td><td>å®šä¹‰è¡¨å•è§†å›¾ç»“æ„</td><td>æ•°æ®å½•å…¥è¡¨å•</td></tr><tr><td/><td><code>@GridAnnotation</code></td><td>å®šä¹‰ç½‘æ ¼è§†å›¾ç»“æ„</td><td>æ•°æ®å±•ç¤ºè¡¨æ ¼</td></tr><tr><td/><td><code>@TreeAnnotation</code></td><td>å®šä¹‰æ ‘å½¢è§†å›¾ç»“æ„</td><td>å±‚çº§æ•°æ®å±•ç¤º</td></tr><tr><td>å­—æ®µæ³¨è§£</td><td><code>@InputAnnotation</code></td><td>é…ç½®è¾“å…¥æ¡†ç»„ä»¶</td><td>æ–‡æœ¬ã€æ•°å­—è¾“å…¥</td></tr><tr><td/><td><code>@ButtonAnnotation</code></td><td>é…ç½®æŒ‰é’®ç»„ä»¶</td><td>æ“ä½œæŒ‰é’®</td></tr><tr><td/><td><code>@ComboBoxAnnotation</code></td><td>é…ç½®ä¸‹æ‹‰æ¡†ç»„ä»¶</td><td>é€‰é¡¹é€‰æ‹©</td></tr><tr><td/><td><code>@DatePickerAnnotation</code></td><td>é…ç½®æ—¥æœŸé€‰æ‹©å™¨ç»„ä»¶</td><td>æ—¥æœŸæ—¶é—´è¾“å…¥</td></tr><tr><td>è¡Œä¸ºæ³¨è§£</td><td><code>@APIEventAnnotation</code></td><td>ç»‘å®šå‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡</td><td>ç”¨æˆ·äº¤äº’äº‹ä»¶å¤„ç†</td></tr><tr><td/><td><code>@Aggregation</code></td><td>å®šä¹‰æœåŠ¡èšåˆå…³ç³»</td><td>å¤æ‚æœåŠ¡ç»„åˆ</td></tr><tr><td>é…ç½®æ³¨è§£</td><td><code>@CustomAnnotation</code></td><td>é…ç½®ç»„ä»¶å¤–è§‚å±æ€§</td><td>è‡ªå®šä¹‰ç»„ä»¶æ˜¾ç¤º</td></tr><tr><td/><td><code>@CustomListAnnotation</code></td><td>é…ç½®åˆ—è¡¨æ•°æ®</td><td>å¢å¼ºæšä¸¾å­—æ®µ</td></tr><tr><td>æœåŠ¡æ³¨è§£</td><td><code>@RestController</code></td><td>å®šä¹‰Webå¯è®¿é—®æ§åˆ¶å™¨</td><td>æœåŠ¡ç«¯APIå…¥å£</td></tr><tr><td/><td><code>@Service</code></td><td>å®šä¹‰ä¸šåŠ¡æœåŠ¡</td><td>ä¸šåŠ¡é€»è¾‘å®ç°</td></tr></tbody></table>
<h4 data-id="heading-128">å¸¸è§é—®é¢˜æ’æŸ¥æŒ‡å—</h4>
<h5 data-id="heading-129">1. ç¼–è¯‘æœŸé”™è¯¯</h5>

























<table><thead><tr><th>é”™è¯¯ç±»å‹</th><th>å¯èƒ½åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ³¨è§£æ‰«æå¤±è´¥</td><td>ç¼ºå°‘å¿…è¦çš„ä¾èµ–åŒ…</td><td>æ£€æŸ¥pom.xmlæˆ–build.gradleä¾èµ–é…ç½®</td></tr><tr><td>ç»„ä»¶æ˜ å°„ä¸åŒ¹é…</td><td>åç«¯å®šä¹‰çš„ComponentTypeå‰ç«¯æ— å¯¹åº”ç»„ä»¶</td><td>æ£€æŸ¥å‰ç«¯ç»„ä»¶åº“æ˜¯å¦åŒ…å«å¯¹åº”çš„ç»„ä»¶å®ç°</td></tr><tr><td>æ³¨è§£é…ç½®é”™è¯¯</td><td>æ³¨è§£å±æ€§å€¼ç±»å‹ä¸åŒ¹é…</td><td>æ£€æŸ¥æ³¨è§£å±æ€§å€¼æ˜¯å¦ç¬¦åˆè¦æ±‚</td></tr></tbody></table>
<h5 data-id="heading-130">2. è¿è¡ŒæœŸé”™è¯¯</h5>






























<table><thead><tr><th>é”™è¯¯ç±»å‹</th><th>å¯èƒ½åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç»„ä»¶æ¸²æŸ“å¤±è´¥</td><td>å‰ç«¯ç»„ä»¶é…ç½®é”™è¯¯</td><td>æ£€æŸ¥ç»„ä»¶çš„JSONé…ç½®æ˜¯å¦æ­£ç¡®</td></tr><tr><td>äº‹ä»¶ç»‘å®šå¤±è´¥</td><td>APIEventAnnotationé…ç½®é”™è¯¯</td><td>æ£€æŸ¥äº‹ä»¶ç»‘å®šçš„æœåŠ¡å’Œæ–¹æ³•æ˜¯å¦å­˜åœ¨</td></tr><tr><td>æ•°æ®æµå‘é”™è¯¯</td><td>RequestPathEnum/ResponsePathEnumé…ç½®é”™è¯¯</td><td>æ£€æŸ¥æ•°æ®æµå‘é…ç½®æ˜¯å¦ç¬¦åˆé¢„æœŸ</td></tr><tr><td>æœåŠ¡è°ƒç”¨å¤±è´¥</td><td>åç«¯æœåŠ¡ä¸å¯è®¿é—®</td><td>æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼ŒURLæ˜¯å¦æ­£ç¡®</td></tr></tbody></table>
<h5 data-id="heading-131">3. æ€§èƒ½é—®é¢˜</h5>

























<table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>å¯èƒ½åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>åˆå§‹åŠ è½½æ…¢</td><td>ç»„ä»¶æ•°é‡è¿‡å¤šæˆ–é…ç½®å¤æ‚</td><td>å¯ç”¨ç»„ä»¶ç¼“å­˜ï¼Œä¼˜åŒ–ç»„ä»¶ç»“æ„</td></tr><tr><td>åŠ¨æ€æ›´æ–°æ…¢</td><td>æ•°æ®é‡å¤§æˆ–æ¸²æŸ“é€»è¾‘å¤æ‚</td><td>å¯ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼Œä¼˜åŒ–æ¸²æŸ“é€»è¾‘</td></tr><tr><td>æœåŠ¡å“åº”æ…¢</td><td>æ•°æ®åº“æŸ¥è¯¢æ•ˆç‡ä½</td><td>ä¼˜åŒ–SQLæŸ¥è¯¢ï¼Œæ·»åŠ ç´¢å¼•ï¼Œå¯ç”¨ç¼“å­˜</td></tr></tbody></table>
<h4 data-id="heading-132">æœ¯è¯­è¡¨</h4>













































<table><thead><tr><th>æœ¯è¯­</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>A2UI</td><td>AI to UIï¼ŒAIç”ŸæˆUIä»£ç çš„æŠ€æœ¯æ–¹å‘</td></tr><tr><td>å››åˆ†ç¦»è®¾è®¡</td><td>å°†ç»„ä»¶çš„å±æ€§ã€æ ·å¼ã€äº‹ä»¶ã€è¡Œä¸ºåˆ†ç¦»çš„è®¾è®¡åŸåˆ™</td></tr><tr><td>DTO/VOä¸€ä½“åŒ–</td><td>è§†å›¾ç±»åŒæ—¶ä½œä¸ºæ•°æ®ä¼ è¾“å¯¹è±¡å’Œè§†å›¾å¯¹è±¡</td></tr><tr><td>ç¼–è¯‘æœŸé™æ€è½¬æ¢</td><td>å°†Javaæ³¨è§£è½¬æ¢ä¸ºå‰ç«¯ç»„ä»¶é…ç½®çš„è¿‡ç¨‹</td></tr><tr><td>è¿è¡ŒæœŸåŠ¨æ€è£…é…</td><td>æ ¹æ®ç”¨æˆ·äº¤äº’å’Œæ•°æ®å˜åŒ–åŠ¨æ€è°ƒæ•´ç»„ä»¶çŠ¶æ€</td></tr><tr><td>PageCtx</td><td>Pageçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œç®¡ç†é¡µé¢è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ç¯å¢ƒå˜é‡å’Œæ•°æ®</td></tr><tr><td>APIEvent</td><td>å®šä¹‰å‰ç«¯äº‹ä»¶ä¸åç«¯æœåŠ¡çš„ç»‘å®šå…³ç³»</td></tr><tr><td>ComponentType</td><td>åç«¯ç»„ä»¶ç±»å‹æšä¸¾ï¼Œä¸å‰ç«¯ç»„ä»¶ä¸€ä¸€å¯¹åº”</td></tr><tr><td>ViewType</td><td>åç«¯è§†å›¾ç±»å‹æšä¸¾ï¼Œä¸å‰ç«¯è§†å›¾ä¸€ä¸€å¯¹åº”</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥åœ°â€œç«çœ¼é‡‘ç›â€ï¼æ‰‹æŠŠæ‰‹å¸¦ä½ ç”¨ YOLO11 å®ç°å®‰å…¨å¸½ä½©æˆ´æ£€æµ‹]]></title>    <link>https://juejin.cn/post/7588067055482568713</link>    <guid>https://juejin.cn/post/7588067055482568713</guid>    <pubDate>2025-12-27T15:25:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588067055482568713" data-draft-id="7587264707284254730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥åœ°â€œç«çœ¼é‡‘ç›â€ï¼æ‰‹æŠŠæ‰‹å¸¦ä½ ç”¨ YOLO11 å®ç°å®‰å…¨å¸½ä½©æˆ´æ£€æµ‹"/> <meta itemprop="keywords" content="è®¡ç®—æœºè§†è§‰,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-27T15:25:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GetcharZp"/> <meta itemprop="url" content="https://juejin.cn/user/4328150938692264"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥åœ°â€œç«çœ¼é‡‘ç›â€ï¼æ‰‹æŠŠæ‰‹å¸¦ä½ ç”¨ YOLO11 å®ç°å®‰å…¨å¸½ä½©æˆ´æ£€æµ‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4328150938692264/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GetcharZp
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T15:25:49.000Z" title="Sat Dec 27 2025 15:25:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><blockquote>
<p>å·¥ä¸šå®‰å…¨æ— å°äº‹ã€‚å½“ YOLO å®¶æ—æœ€æ–°æˆå‘˜ YOLO11 é‡ä¸Šå·¥åœ°å®‰å…¨ç›‘ç®¡ï¼Œæ•ˆç‡ä¸ç²¾å‡†åº¦å¦‚ä½•èµ·é£ï¼Ÿæœ¬æ–‡å¸¦ä½ ä»é›¶å®ç°æ–°ç±»åˆ«ç›®æ ‡æ£€æµ‹è®­ç»ƒï¼</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.ultralytics.com%2Fzh" target="_blank" title="https://docs.ultralytics.com/zh" ref="nofollow noopener noreferrer">docs.ultralytics.com/zh</a></p>
<p>Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fultralytics%2Fultralytics" target="_blank" title="https://github.com/ultralytics/ultralytics" ref="nofollow noopener noreferrer">github.com/ultralyticsâ€¦</a></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43a0810912ad4a7b8b84de78240d2c86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2V0Y2hhclpw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767453948&amp;x-signature=N4I%2Ff1GUvi%2FcRusZITtA%2BBUnf8o%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-0">å®‰å…¨ç¬¬ä¸€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ AI ç›‘å·¥ï¼Ÿ</h3>
<p>åœ¨æ–½å·¥ç°åœºæˆ–å·¥ä¸šç”Ÿäº§ä¸­ï¼Œæ­£ç¡®ä½©æˆ´å®‰å…¨å¸½æ˜¯ä¿å‘½çš„ç¬¬ä¸€é“é˜²çº¿ã€‚ç„¶è€Œï¼Œä¼ ç»Ÿçš„é äººçœ¼ç›¯ç€ç›‘æ§çœ‹ï¼Œä¸ä»…è´¹æ—¶è´¹åŠ›ï¼Œè¿˜ææ˜“äº§ç”Ÿè§†è§‰ç–²åŠ³å¯¼è‡´æ¼æ£€ã€‚</p>
<p>éšç€ Ultralytics YOLO11 çš„é‡ç£…å‘å¸ƒï¼Œè®¡ç®—æœºè§†è§‰æŠ€æœ¯åœ¨å¤„ç†æ­¤ç±»â€œé«˜ç²¾åº¦ã€é«˜å®æ—¶æ€§â€ä»»åŠ¡æ—¶å±•ç°å‡ºäº†æƒŠäººçš„èƒ½åŠ›ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥ä¸€åœºå®æˆ˜ï¼šç”¨ YOLO11 æ‰“é€ ä¸€å¥—è‡ªåŠ¨åŒ–å®‰å…¨å¸½ä½©æˆ´æ£€æµ‹ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-1">è®¤è¯†æ–°ç‹è€…ï¼šYOLO11 å¼ºåœ¨å“ªé‡Œï¼Ÿ</h3>
<p>ä½œä¸º YOLO å®¶æ—çš„æœ€æ–°ä¸€ä»£ï¼ˆ2024å¹´ä¸‹åŠå¹´å‘å¸ƒï¼‰ï¼ŒYOLO11 å¹¶ä¸æ˜¯ç®€å•çš„ç‰ˆæœ¬å·é€’å¢ï¼Œå®ƒåœ¨æ¶æ„ä¸Šè¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒä¼˜ç‚¹</h4>
<ul>
<li>
<p>æè‡´çš„å‚æ•°æ•ˆç‡ï¼š YOLO11m åœ¨è¾¾åˆ°æ¯” YOLOv8m æ›´é«˜ç²¾åº¦çš„åŒæ—¶ï¼Œå‚æ•°é‡å‡å°‘äº†çº¦ 22%ã€‚è¿™æ„å‘³ç€å®ƒåœ¨è¾¹ç¼˜è®¡ç®—è®¾å¤‡ï¼ˆå¦‚æ‘„åƒå¤´ã€è¾¹ç¼˜ç›’å­ï¼‰ä¸Šè·‘å¾—æ›´æ¬¢ã€‚</p>
</li>
<li>
<p>æ¶æ„é©æ–°ï¼š é€šè¿‡é‡‡ç”¨æ”¹è¿›çš„ backbone å’Œ neck æ¶æ„ï¼Œæ˜¾è‘—æå‡äº†ç‰¹å¾æå–çš„æ·±åº¦å’Œå¹¿åº¦ï¼Œå°¤å…¶æ˜¯å¯¹é®æŒ¡ç‰©ä½“å’Œå°ç›®æ ‡çš„æ•æ‰æ›´åŠ ç²¾å‡†ã€‚</p>
</li>
<li>
<p>å…¨èƒ½é€‰æ‰‹ï¼š åŸç”Ÿæ”¯æŒæ£€æµ‹ã€åˆ†å‰²ã€å§¿æ€ä¼°è®¡ã€æ—‹è½¬æ¡†å’Œåˆ†ç±»ï¼Œä¸€ä¸ª API æå®šæ‰€æœ‰ä»»åŠ¡ã€‚</p>
</li>
</ul>
<h4 data-id="heading-3">æ½œåœ¨ä¸è¶³</h4>
<ul>
<li>
<p>ç¤¾åŒºç§¯ç´¯ï¼š ç›¸æ¯”äºä¹…ç»æ²™åœºçš„ YOLOv5/v8ï¼ŒYOLO11 å±äºæ–°é”ï¼Œç›¸å…³çš„ç¬¬ä¸‰æ–¹æ’ä»¶å’Œç°æˆçš„é¢„è®­ç»ƒæƒé‡åº“è¿˜åœ¨å¿«é€Ÿè¡¥å……ä¸­ã€‚</p>
</li>
<li>
<p>è®­ç»ƒé—¨æ§›ï¼š è™½ç„¶å®˜æ–¹ API æç®€ï¼Œä½†è¦å‘æŒ¥æœ€é«˜æ•ˆèƒ½ï¼Œå¯¹æ˜¾å¡é©±åŠ¨ï¼ˆCUDA 12+ï¼‰å’Œç¯å¢ƒé…ç½®æœ‰ä¸€å®šè¦æ±‚ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">å®æˆ˜ï¼šä»é›¶è®­ç»ƒå®‰å…¨å¸½æ£€æµ‹æ¨¡å‹</h3>
<ol>
<li>
<p>æ•°æ®é›†å‡†å¤‡ï¼Œå¯ä¸‹è½½ YOLO å®˜æ–¹æä¾›çš„æ•°æ®é›† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fultralytics%2Fultralytics%2Fblob%2Fmain%2Fultralytics%2Fcfg%2Fdatasets%2Fconstruction-ppe.yaml" target="_blank" title="https://github.com/ultralytics/ultralytics/blob/main/ultralytics/cfg/datasets/construction-ppe.yaml" ref="nofollow noopener noreferrer">github.com/ultralyticsâ€¦</a></p>
<p>ä¹Ÿå¯ä»¥è‡ªå·±ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHumanSignal%2Flabel-studio" target="_blank" title="https://github.com/HumanSignal/label-studio" ref="nofollow noopener noreferrer">Label-Studio</a> é‡æ–°æ ‡æ³¨â€œä½©æˆ´å®‰å…¨å¸½ï¼ˆhelmetï¼‰â€å’Œâ€œæœªä½©æˆ´ï¼ˆheadï¼‰â€ä¸¤ç±»æ ‡ç­¾çš„æ•°æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b253b39e536a4985846e375c4a5129aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2V0Y2hhclpw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767453948&amp;x-signature=k6Mi1oxR2YhXeeFD97PQj%2FvOqoc%3D" alt="image.png" loading="lazy"/></p>
<p>æ ‡æ³¨å®Œæˆåï¼Œç‚¹å‡»å¯¼å‡º <code>YOLO with Images</code>ï¼Œ å°†èƒ½å¤Ÿå¯¼å‡º YOLO æ ¼å¼ï¼ˆæ¯å¼ å›¾ç‰‡å¯¹åº”ä¸€ä¸ª .txt æ ‡ç­¾ï¼Œå†…å®¹ä¸ºï¼šclass_id x_center y_center width heightï¼Œå‡ä¸ºå½’ä¸€åŒ–æ•°å€¼ï¼‰çš„æ•°æ®ã€‚</p>
</li>
</ol>
<p>ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">â”œâ”€images
â”‚  â”œâ”€<span class="hljs-built_in">test</span>
â”‚  â”œâ”€train  <span class="hljs-comment"># è®­ç»ƒé›†å›¾ç‰‡</span>
â”‚  â””â”€val    <span class="hljs-comment"># éªŒè¯é›†å›¾ç‰‡</span>
â””â”€labels
    â”œâ”€<span class="hljs-built_in">test</span>
    â”œâ”€train <span class="hljs-comment"># éªŒè¯é›†æ ‡ç­¾</span>
    â””â”€val   <span class="hljs-comment"># éªŒè¯é›†æ ‡ç­¾</span>
</code></pre>
<ol start="2">
<li>åˆ›å»º <code>helmet.yaml</code> é…ç½®æ–‡ä»¶ï¼ˆPSï¼šæ¨èç”¨å®˜æ–¹çš„ <code>construction-ppe.yaml</code> è¿›è¡Œå¿«é€ŸéªŒè¯ï¼‰</li>
</ol>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºè¯¥æ–‡ä»¶ï¼Œå‘Šè¯‰æ¨¡å‹æ•°æ®çš„è·¯å¾„å’Œç±»åˆ«ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">path:</span> <span class="hljs-string">C:\Users\getcharzp\datasets\helmet_data</span>  <span class="hljs-comment"># æ•°æ®æ ¹ç›®å½•</span>
<span class="hljs-attr">train:</span> <span class="hljs-string">images/train</span> <span class="hljs-comment"># è®­ç»ƒé›†å›¾ç‰‡</span>
<span class="hljs-attr">val:</span> <span class="hljs-string">images/val</span>     <span class="hljs-comment"># éªŒè¯é›†å›¾ç‰‡</span>
<span class="hljs-attr">test:</span> <span class="hljs-string">images/test</span>   <span class="hljs-comment"># æµ‹è¯•é›†å›¾ç‰‡</span>

<span class="hljs-comment"># Classes</span>
<span class="hljs-attr">names:</span>
  <span class="hljs-attr">0:</span> <span class="hljs-string">head</span>
  <span class="hljs-attr">1:</span> <span class="hljs-string">helmet</span>
</code></pre>
<ol start="3">
<li>æ¨¡å‹è®­ç»ƒ</li>
</ol>
<p>YOLO11 çš„ API éå¸¸ç®€æ´ï¼ŒåŒæ—¶æä¾›äº†ç›¸å…³çš„å‘½ä»¤è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå¿«é€Ÿè¿›è¡Œæ¨¡å‹çš„è®­ç»ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… ultralytics</span>
pip install -U ultralytics

<span class="hljs-comment"># æ¨¡å‹è®­ç»ƒ</span>
<span class="hljs-comment"># è¿›å…¥æ•°æ®é›†æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œä¸‹è¿°å‘½ä»¤</span>
yolo detect train data=helmet.yaml model=yolo11n.pt epochs=100 imgsz=640
</code></pre>
<ol start="4">
<li>æ¨¡å‹æ¨ç†ä¸ä½¿ç”¨</li>
</ol>
<p>è®­ç»ƒå¥½åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€è¡Œä»£ç å¯¹å›¾ç‰‡è¿›è¡Œæ£€æµ‹ï¼Œåœ¨æ•°æ®é›†æ ¹ç›®å½•åˆ›å»º <code>predict.py</code> æ–‡ä»¶å¹¶è¿è¡Œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ultralytics <span class="hljs-keyword">import</span> YOLO

model = YOLO(<span class="hljs-string">"runs/detect/train2/weights/best.pt"</span>) <span class="hljs-comment"># </span>
results = model.predict(source=<span class="hljs-string">"test.jpg"</span>, save=<span class="hljs-literal">True</span>, conf=<span class="hljs-number">0.5</span>)
</code></pre>













<table><thead><tr><th>åŸå›¾</th><th>é¢„æµ‹å›¾</th></tr></thead><tbody><tr><td><img width="100%" src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44213b7983eb49e693baaa5bbb8ea47b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2V0Y2hhclpw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767453948&amp;x-signature=%2FEAKGKusEqoJGSqORi%2BuFOOfFzw%3D" alt="" loading="lazy"/></td><td><img width="100%" src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a71b7cbfcb6045d39a0d4fc24c9928bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2V0Y2hhclpw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767453948&amp;x-signature=l0G6o6OfQAszyVfmJVwj8XzXuDk%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<h3 data-id="heading-5">é¿å‘æŒ‡å—ï¼šé‚£äº›ä½ æ²¡æƒ³åˆ°çš„â€œé‡è¦ç»†èŠ‚â€</h3>
<p>åœ¨å®é™…å·¥ä¸šéƒ¨ç½²ä¸­ï¼Œå…‰æœ‰ä»£ç æ˜¯ä¸å¤Ÿçš„ï¼Œä½ è¿˜éœ€è¦è€ƒè™‘ä»¥ä¸‹ä¸‰ä¸ªâ€œæ·±å‘â€ï¼š</p>
<p>è´Ÿæ ·æœ¬ï¼ˆBackground Imagesï¼‰çš„é‡è¦æ€§</p>
<p>å¾ˆå¤šå¼€å‘è€…åªæ ‡æ³¨æœ‰å®‰å…¨å¸½çš„å›¾ã€‚ä½†åœ¨å·¥åœ°ä¸Šï¼Œå¯èƒ½ä¼šæœ‰åœ†å½¢çš„æ¡¶ã€ç¯å…·è¢«è¯¯è®¤ä¸ºå®‰å…¨å¸½ã€‚</p>
<p>å»ºè®®ï¼š åœ¨è®­ç»ƒé›†ä¸­åŠ å…¥ 10% å·¦å³ä¸åŒ…å«ä»»ä½•ç›®æ ‡çš„â€œç©ºå›¾ç‰‡â€ï¼Œè¿™èƒ½æå¤§é™ä½è¯¯æŠ¥ç‡ã€‚</p>
<p>å¤šå°ºåº¦æ£€æµ‹ï¼ˆSmall Objectsï¼‰</p>
<p>å¡”åŠä¸Šçš„æ‘„åƒå¤´ç¦»åœ°é¢å¾ˆè¿œï¼Œäººå¤´åœ¨ç”»é¢ä¸­å¯èƒ½åªæœ‰å‡ ä¸ªåƒç´ ã€‚</p>
<p>å»ºè®®ï¼š è®­ç»ƒæ—¶å¼€å¯ augment=Trueï¼Œå¹¶è€ƒè™‘ä½¿ç”¨ SAHIï¼ˆSlicing Aided Hyper Inferenceï¼‰ åˆ‡ç‰‡æ¨ç†æŠ€æœ¯ï¼Œå°†å¤§å›¾åˆ‡å‰²æ£€æµ‹åå†åˆå¹¶ï¼Œé¿å…å°ç›®æ ‡ä¸¢å¤±ã€‚</p>
<p>å…‰ç…§ä¸ç¯å¢ƒçš„é²æ£’æ€§</p>
<p>å·¥åœ°æœ‰å¼ºçƒˆçš„èƒŒå…‰æˆ–å¤œé—´è¡¥å…‰ã€‚</p>
<p>å»ºè®®ï¼š å……åˆ†åˆ©ç”¨ YOLO11 è‡ªå¸¦çš„æ•°æ®å¢å¼ºåŠŸèƒ½ï¼Œå°¤å…¶æ˜¯è°ƒæ•´ hsv_vï¼ˆäº®åº¦ï¼‰å’Œ blurï¼ˆæ¨¡ç³Šï¼‰å‚æ•°ï¼Œæ¨¡æ‹Ÿæ¶åŠ£å¤©æ°”å’Œå…‰ç…§æ¡ä»¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript å‡½æ•°æŸ¯é‡ŒåŒ–ï¼šä»å…¥é—¨åˆ°å®æˆ˜ï¼Œä¸€æ–‡æå®šï¼ˆé¢è¯•å¯ç”¨ï¼‰]]></title>    <link>https://juejin.cn/post/7588104741610389514</link>    <guid>https://juejin.cn/post/7588104741610389514</guid>    <pubDate>2025-12-27T15:32:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588104741610389514" data-draft-id="7588086766248837171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript å‡½æ•°æŸ¯é‡ŒåŒ–ï¼šä»å…¥é—¨åˆ°å®æˆ˜ï¼Œä¸€æ–‡æå®šï¼ˆé¢è¯•å¯ç”¨ï¼‰"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,å‡½æ•°å¼ç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-27T15:32:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—å±±å®‰"/> <meta itemprop="url" content="https://juejin.cn/user/1795929588117962"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript å‡½æ•°æŸ¯é‡ŒåŒ–ï¼šä»å…¥é—¨åˆ°å®æˆ˜ï¼Œä¸€æ–‡æå®šï¼ˆé¢è¯•å¯ç”¨ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1795929588117962/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—å±±å®‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T15:32:07.000Z" title="Sat Dec 27 2025 15:32:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨å¤ä¹  JavaScript é«˜é˜¶å‡½æ•°çš„æ—¶å€™ï¼ŒåˆæŠŠå‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ç¿»å‡ºæ¥å¥½å¥½æ‹äº†ä¸€éã€‚å¾ˆå¤šäººä¸€å¬åˆ°â€œæŸ¯é‡ŒåŒ–â€å°±è§‰å¾—é«˜å¤§ä¸Šï¼Œå…¶å®å®ƒæ²¡é‚£ä¹ˆç¥ç§˜ï¼Œç”¨é€šä¿—çš„è¯è¯´ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå˜æˆä¸€ä¸ªä¸ªåªæ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°é“¾æ¡ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æŠŠæˆ‘è‡ªå·±çš„å­¦ä¹ ç¬”è®°æ•´ç†äº†ä¸€ä¸‹ï¼Œä»æœ€åŸºç¡€çš„å¯¹æ¯”å¼€å§‹ï¼Œæ…¢æ…¢è®²åˆ°åŸç†ã€å®ç°ã€å®é™…ç”¨æ³•ï¼Œå¸Œæœ›èƒ½å¸®ä½ æŠŠè¿™ä¸ªçŸ¥è¯†ç‚¹å½»åº•åƒé€ã€‚</p>
<h2 data-id="heading-1">1. å…ˆçœ‹ä¸€ä¸ªæœ€ç›´è§‚çš„å¯¹æ¯”</h2>
<p>æ™®é€šå†™æ³•ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// 3</span>
</code></pre>
<p>æŸ¯é‡ŒåŒ–å†™æ³•ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">b</span>) {
    <span class="hljs-keyword">return</span> a + b;
  };
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>)); <span class="hljs-comment">// 3</span>
</code></pre>
<p>çœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿ</p>
<ul>
<li>æ™®é€šç‰ˆï¼šä¸€æ¬¡æŠŠæ‰€æœ‰å‚æ•°ä¼ å®Œã€‚</li>
<li>æŸ¯é‡ŒåŒ–ç‰ˆï¼šå‚æ•°ä¸€ä¸ªä¸€ä¸ªä¼ ï¼Œæ¯æ¬¡è°ƒç”¨è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œç›´åˆ°æ‰€æœ‰å‚æ•°æ”¶é›†é½äº†æ‰çœŸæ­£è®¡ç®—ã€‚</li>
</ul>
<p>è¿™ç§â€œä¸€ä¸ªä¸€ä¸ªä¼ â€çš„æ–¹å¼ï¼Œå°±æ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–çš„æ ¸å¿ƒã€‚</p>
<h2 data-id="heading-2">2. æŸ¯é‡ŒåŒ–çš„æœ¬è´¨ï¼šé—­åŒ… + å‚æ•°æ”¶é›†</h2>
<p>ä¸ºä»€ä¹ˆèƒ½ä¸€ä¸ªä¸€ä¸ªä¼ ï¼Ÿé çš„æ˜¯é—­åŒ…ã€‚</p>
<p>åœ¨å¤–å±‚å‡½æ•°é‡Œï¼Œå‚æ•° a è¢«ä¿å­˜äº†ä¸‹æ¥ï¼ˆæˆäº†é—­åŒ…é‡Œçš„è‡ªç”±å˜é‡ï¼‰ï¼Œå†…å±‚å‡½æ•°å¯ä»¥éšæ—¶è®¿é—®å®ƒã€‚å½“æˆ‘ä»¬å†ä¼ è¿›æ¥ b çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨ä¹‹å‰ä¿å­˜çš„ a å»è®¡ç®—ã€‚</p>
<p>æ‰€ä»¥è¯´ï¼ŒæŸ¯é‡ŒåŒ–æœ¬è´¨ä¸Šå°±æ˜¯åˆ©ç”¨é—­åŒ…æŠŠå‚æ•°â€œæ”’â€èµ·æ¥ï¼Œç­‰å‚æ•°å¤Ÿäº†å†æ‰§è¡ŒçœŸæ­£çš„é€»è¾‘ã€‚</p>
<h2 data-id="heading-3">3. æ€ä¹ˆåˆ¤æ–­å‚æ•°â€œå¤Ÿäº†â€ï¼Ÿ</h2>
<p>JavaScript å‡½æ•°æœ‰ä¸€ä¸ªéšè—å±æ€§ lengthï¼Œå®ƒè¡¨ç¤ºå‡½æ•°å®šä¹‰æ—¶å‚æ•°çš„ä¸ªæ•°ï¼ˆä¸åŒ…æ‹¬å‰©ä½™å‚æ•°å’Œé»˜è®¤å‚æ•°ï¼‰ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(add.<span class="hljs-property">length</span>); <span class="hljs-comment">// 2</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªå±æ€§æ¥åšä¸€ä¸ªç›¸å¯¹ä¸¥è°¨çš„æŸ¯é‡ŒåŒ–åˆ¤æ–­ï¼šåªæœ‰å½“æ”¶é›†åˆ°çš„å‚æ•°æ•°é‡ â‰¥ åŸå‡½æ•°çš„ length æ—¶ï¼Œæ‰çœŸæ­£æ‰§è¡Œã€‚</p>
<h2 data-id="heading-4">4. æ‰‹å†™ä¸€ä¸ªé€šç”¨æŸ¯é‡ŒåŒ–å‡½æ•°</h2>
<p>ä¸‹é¢è¿™ä¸ªæ˜¯æˆ‘è‡ªå·±æœ€å¸¸ç”¨çš„ä¸€ç‰ˆï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">curry</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">curried</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">if</span> (args.<span class="hljs-property">length</span> &gt;= fn.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fn</span>(...args); <span class="hljs-comment">// ç›´æ¥å±•å¼€ï¼Œæ›´æ¸…æ™°</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...more</span>) =&gt;</span> <span class="hljs-title function_">curried</span>(...args, ...more); <span class="hljs-comment">// è¿™é‡Œä¹Ÿç”¨å±•å¼€åˆå¹¶</span>
  };
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b, c</span>) {
  <span class="hljs-keyword">return</span> a + b + c;
}

<span class="hljs-keyword">const</span> curriedAdd = <span class="hljs-title function_">curry</span>(add);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">curriedAdd</span>(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>)(<span class="hljs-number">3</span>));     <span class="hljs-comment">// 6</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">curriedAdd</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)(<span class="hljs-number">3</span>));     <span class="hljs-comment">// 6</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">curriedAdd</span>(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));     <span class="hljs-comment">// 6</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">curriedAdd</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>));     <span class="hljs-comment">// 6</span>
</code></pre>
<p>è¿™ä¸ªç‰ˆæœ¬çš„å¥½å¤„ï¼š</p>
<ul>
<li>æ”¯æŒä»»æ„æ•°é‡çš„å‚æ•°é€æ­¥ä¼ é€’</li>
<li>ä¹Ÿæ”¯æŒä¸€æ¬¡ä¼ å¤šä¸ªï¼ˆåªè¦æ€»æ•°å¤Ÿäº†å°±æ‰§è¡Œï¼‰</li>
<li>å®ç°åªæœ‰åæ¥è¡Œï¼Œå®¹æ˜“ç†è§£å’Œè®°å¿†</li>
</ul>
<p>æ³¨æ„ï¼šè¿™é‡Œç”¨äº†é€’å½’ + é—­åŒ…ï¼Œå¤–å±‚æ¯æ¬¡è°ƒç”¨éƒ½ä¼šäº§ç”Ÿæ–°çš„ curried å‡½æ•°ï¼Œargs ä¼šè¢«ä¸æ–­ç´¯åŠ ï¼Œç›´åˆ°æ»¡è¶³æ¡ä»¶ã€‚</p>
<h2 data-id="heading-5">5. æŸ¯é‡ŒåŒ–çš„ç»å…¸å®æˆ˜åœºæ™¯</h2>
<p>è¯´äº†é‚£ä¹ˆå¤šï¼Œè¿™ä¹ˆéº»çƒ¦çš„ç¼–å†™æŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œå®ƒåˆ°åº•èƒ½åšä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h3 data-id="heading-6">åœºæ™¯ä¸€ï¼šå›ºå®šéƒ¨åˆ†å‚æ•°ï¼Œåˆ¶é€ ä¸“ç”¨çš„å·¥å…·å‡½æ•°</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// é€šç”¨æ—¥å¿—å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">log</span> = (<span class="hljs-params">type</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${type.toUpperCase()}</span>]: <span class="hljs-subst">${message}</span>`</span>);
};

<span class="hljs-comment">// é€šè¿‡æŸ¯é‡ŒåŒ–â€œå›ºå®šâ€æ—¥å¿—ç±»å‹ï¼Œå¾—åˆ°ä¸“ç”¨å‡½æ•°</span>
<span class="hljs-keyword">const</span> errorLog = <span class="hljs-title function_">log</span>(<span class="hljs-string">'error'</span>); <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°</span>
<span class="hljs-keyword">const</span> infoLog = <span class="hljs-title function_">log</span>(<span class="hljs-string">'info'</span>);
<span class="hljs-keyword">const</span> warnLog = <span class="hljs-title function_">log</span>(<span class="hljs-string">'warn'</span>);
<span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°</span>
<span class="hljs-title function_">errorLog</span>(<span class="hljs-string">'æ¥å£ 404 äº†ï¼'</span>);         <span class="hljs-comment">// [ERROR]: æ¥å£ 404 äº†ï¼</span>
<span class="hljs-title function_">infoLog</span>(<span class="hljs-string">'é¡µé¢åŠ è½½å®Œæˆ'</span>);           <span class="hljs-comment">// [INFO]: é¡µé¢åŠ è½½å®Œæˆ</span>
<span class="hljs-title function_">warnLog</span>(<span class="hljs-string">'å³å°†å¼ƒç”¨æ—§ API'</span>);        <span class="hljs-comment">// [WARN]: å³å°†å¼ƒç”¨æ—§ API</span>
</code></pre>
<p>è¿™ç§å†™æ³•åœ¨å®é™…é¡¹ç›®é‡Œç‰¹åˆ«å¸¸è§ï¼Œå°¤å…¶æ˜¯åšæ—¥å¿—ã€åŸ‹ç‚¹ã€äº‹ä»¶ç»‘å®šçš„æ—¶å€™ï¼Œèƒ½è®©ä»£ç è¯­ä¹‰æ›´æ¸…æ™°ã€‚</p>
<h3 data-id="heading-7">åœºæ™¯äºŒï¼šå»¶è¿Ÿæ‰§è¡Œ / å‚æ•°å¤ç”¨</h3>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªé€šç”¨çš„ Ajax è¯·æ±‚å‡½æ•°ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-params">method, url, data</span>) {
  <span class="hljs-comment">// ...çœŸæ­£çš„è¯·æ±‚é€»è¾‘</span>
}

<span class="hljs-comment">// æŸ¯é‡ŒåŒ–å</span>
<span class="hljs-keyword">const</span> get = <span class="hljs-title function_">curry</span>(ajax)(<span class="hljs-string">'GET'</span>);
<span class="hljs-keyword">const</span> post = <span class="hljs-title function_">curry</span>(ajax)(<span class="hljs-string">'POST'</span>);

<span class="hljs-keyword">const</span> fetchUserList = <span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/users'</span>);
<span class="hljs-keyword">const</span> fetchUserDetail = <span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/users/'</span>);

<span class="hljs-keyword">const</span> submitForm = <span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/submit'</span>);
</code></pre>
<p>è¿™æ ·æ¯æ¬¡è°ƒç”¨æ—¶å°±ä¸ç”¨åå¤å†™ methodï¼Œä»£ç æ›´ç®€æ´ï¼Œä¹Ÿæ›´ä¸å®¹æ˜“å†™é”™ã€‚</p>
<h3 data-id="heading-8">åœºæ™¯ä¸‰ï¼šé…åˆå‡½æ•°å¼ç¼–ç¨‹åº“ï¼ˆå¦‚ lodashã€ramdaï¼‰</h3>
<p>lodash çš„ _.curry åŠŸèƒ½æ›´å¼ºå¤§ï¼Œæ”¯æŒå ä½ç¬¦ __ æ¥è·³è¿‡æŸäº›å‚æ•°ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash'</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">join</span> = (<span class="hljs-params">sep, ...arr</span>) =&gt; arr.<span class="hljs-title function_">join</span>(sep);
<span class="hljs-keyword">const</span> curryJoin = _.<span class="hljs-title function_">curry</span>(join);

<span class="hljs-keyword">const</span> dotJoin = <span class="hljs-title function_">curryJoin</span>(<span class="hljs-string">'.'</span>);
<span class="hljs-title function_">dotJoin</span>(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>); <span class="hljs-comment">// "a.b.c"</span>
</code></pre>
<p>ä¸è¿‡æ—¥å¸¸é¡¹ç›®é‡Œï¼Œè‡ªå·±æ‰‹å†™ä¸€ä¸ªç®€å•ç‰ˆå¾€å¾€å°±å¤Ÿç”¨äº†ã€‚</p>
<h2 data-id="heading-9">6. æŸ¯é‡ŒåŒ–çš„ä¼˜ç¼ºç‚¹æ€»ç»“</h2>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å‚æ•°å¤ç”¨ï¼šå›ºå®šå‰å‡ ä¸ªå‚æ•°ï¼Œå¿«é€Ÿç”Ÿæˆæ–°å‡½æ•°</li>
<li>å»¶è¿Ÿæ‰§è¡Œï¼šå‚æ•°æ²¡æ”¶é›†é½ä¹‹å‰ä¸ä¼šçœŸæ­£è¿è¡Œ</li>
<li>è®©ä»£ç æ›´å‡½æ•°å¼ã€æ›´å£°æ˜å¼ï¼Œé˜…è¯»æ€§æ›´å¥½ï¼ˆå°¤å…¶é…åˆç®¡é“æ“ä½œï¼‰</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>äº§ç”Ÿå¤§é‡é—­åŒ…å’Œä¸­é—´å‡½æ•°ï¼Œæ€§èƒ½ç•¥æœ‰æŸè€—ï¼ˆç°ä»£å¼•æ“ä¼˜åŒ–åå½±å“å¾ˆå°ï¼‰</li>
<li>è°ƒè¯•æ—¶è°ƒç”¨æ ˆä¼šå˜æ·±ä¸€ç‚¹</li>
<li>å¦‚æœæ»¥ç”¨ï¼Œä¼šè®©ä»£ç çœ‹èµ·æ¥â€œå¤ªå·§å¦™â€ï¼Œåè€Œé™ä½å¯è¯»æ€§</li>
</ol>
<p>æ‰€ä»¥æˆ‘çš„å»ºè®®æ˜¯ï¼šåˆé€‚çš„åœ°æ–¹ç”¨ï¼Œåˆ«ä¸ºäº†æŸ¯é‡ŒåŒ–è€ŒæŸ¯é‡ŒåŒ–ã€‚</p>
<h2 data-id="heading-10">æœ€å</h2>
<p>å‡½æ•°æŸ¯é‡ŒåŒ–å…¶å®å°±æ˜¯ä¸€ä¸ªå¾ˆå°çš„æŠ€å·§ï¼Œä½†ç”¨å¥½äº†èƒ½è®©ä½ çš„ä»£ç æ›´ä¼˜é›…ã€æ›´çµæ´»ã€‚å°¤å…¶æ˜¯å½“ä½ å¼€å§‹æ¥è§¦å‡½æ•°å¼ç¼–ç¨‹ã€React é«˜é˜¶ç»„ä»¶ã€Redux ä¸­é—´ä»¶è¿™äº›åœºæ™¯æ—¶ï¼Œä¼šå‘ç°æŸ¯é‡ŒåŒ–çš„å½±å­åˆ°å¤„éƒ½æ˜¯ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡ä»é›¶å¼€å§‹çš„æ•´ç†ï¼Œèƒ½å¸®ä½ æŠŠæŸ¯é‡ŒåŒ–å½»åº•ææ˜ç™½ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ ç”¨æŸ¯é‡ŒåŒ–å†™è¿‡çš„æœ‰è¶£ä»£ç ï¼Œæˆ–è€…ä½ è¸©è¿‡çš„å‘ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot ä¸ Disruptor é«˜æ€§èƒ½å¹¶å‘å®æˆ˜]]></title>    <link>https://juejin.cn/post/7588092534161915904</link>    <guid>https://juejin.cn/post/7588092534161915904</guid>    <pubDate>2025-12-27T14:10:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534161915904" data-draft-id="7588095884069928960" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot ä¸ Disruptor é«˜æ€§èƒ½å¹¶å‘å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:10:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot ä¸ Disruptor é«˜æ€§èƒ½å¹¶å‘å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:10:24.000Z" title="Sat Dec 27 2025 14:10:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. Disruptor æ¡†æ¶ç®€ä»‹</h2>
<p>Disruptor æ˜¯ LMAX å…¬å¸å¼€å‘çš„é«˜æ€§èƒ½æ— é”å¹¶å‘æ¡†æ¶ï¼Œä¸“é—¨ä¸ºè§£å†³é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®äº¤æ¢é—®é¢˜è€Œè®¾è®¡ã€‚å®ƒåŸºäº<strong>ç¯å½¢ç¼“å†²åŒº</strong>å’Œ<strong>æ— é”ç®—æ³•</strong>å®ç°ï¼Œèƒ½å¤Ÿåœ¨å•ä¸ªçº¿ç¨‹ä¸Šæ¯ç§’å¤„ç†æ•°ç™¾ä¸‡ç¬”è®¢å•ï¼Œåœ¨é‡‘èäº¤æ˜“ã€å®æ—¶æ•°æ®å¤„ç†ç­‰é¢†åŸŸæœ‰ç€å“è¶Šè¡¨ç°ã€‚</p>
<h3 data-id="heading-1">1.1 ä¸ºä»€ä¹ˆéœ€è¦ Disruptor</h3>
<p>ä¼ ç»Ÿé˜»å¡é˜Ÿåˆ—ï¼ˆå¦‚ ArrayBlockingQueueï¼‰åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹å­˜åœ¨æ€§èƒ½ç“¶é¢ˆï¼šçº¿ç¨‹ä¼šå› ç«äº‰é”è€Œé¢‘ç¹æŒ‚èµ·å’Œæ¢å¤ï¼Œäº§ç”Ÿå¤§é‡ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚å®éªŒè¡¨æ˜ï¼Œå¯¹æœ‰é”æ•°æ®ç»“æ„è¿›è¡Œ5äº¿æ¬¡æ“ä½œï¼Œ<strong>åŠ é”å¤šçº¿ç¨‹å¹¶å‘</strong>æƒ…å†µä¸‹é€Ÿåº¦æ¯”<strong>å•çº¿ç¨‹æ— é”</strong>æ…¢3ä¸ªæ•°é‡çº§ï¼Œè€Œ CAS æ“ä½œæ€§èƒ½çº¦ä¸ºé”æ“ä½œçš„8å€ã€‚</p>
<p>Disruptor é€šè¿‡æ— é”è®¾è®¡è§£å†³äº†è¿™ä¸€æ ¸å¿ƒé—®é¢˜ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦é«˜ååé‡å’Œä½å»¶è¿Ÿçš„åº”ç”¨åœºæ™¯ã€‚</p>
<h2 data-id="heading-2">2. Disruptor æ ¸å¿ƒæ¶æ„ä¸æ€§èƒ½åŸç†</h2>
<h3 data-id="heading-3">2.1 ç¯å½¢ç¼“å†²åŒºï¼ˆRing Bufferï¼‰</h3>
<p>Ring Buffer æ˜¯ Disruptor çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„ç¯å½¢æ•°ç»„ã€‚è¿™ç§è®¾è®¡å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å†…å­˜è¿ç»­</strong>ï¼šæ•°ç»„å…ƒç´ åœ¨å†…å­˜ä¸­è¿ç»­åˆ†å¸ƒï¼Œæœ‰åˆ©äº CPU ç¼“å­˜é¢„åŠ è½½</li>
<li><strong>å¤ç”¨å†…å­˜</strong>ï¼šé¢„å…ˆåˆ†é…æ‰€æœ‰äº‹ä»¶å¯¹è±¡ï¼Œé¿å…è¿è¡Œæ—¶é¢‘ç¹åˆ›å»ºå¯¹è±¡å’Œåƒåœ¾å›æ”¶</li>
<li><strong>å¿«é€Ÿå®šä½</strong>ï¼šé€šè¿‡ä½è¿ç®—æ›¿ä»£å–æ¨¡æ“ä½œï¼Œ<code>sequence &amp; (array length - 1) = array index</code></li>
</ul>
<h3 data-id="heading-4">2.2 æ— é”è®¾è®¡å®ç°</h3>
<p>Disruptor é‡‡ç”¨ CASï¼ˆCompare-And-Swapï¼‰æ“ä½œå®ç°çº¿ç¨‹å®‰å…¨ï¼Œå®Œå…¨é¿å…ä¼ ç»Ÿé”æœºåˆ¶ã€‚å•ç”Ÿäº§è€…æ¨¡å¼ä¸‹ç”šè‡³ä¸éœ€è¦ä»»ä½•åŒæ­¥æœºåˆ¶ï¼Œå¤šç”Ÿäº§è€…æ¨¡å¼ä¸‹ä¹Ÿä»…å¯¹åºåˆ—å·è¿›è¡Œ CAS æ“ä½œã€‚</p>
<h3 data-id="heading-5">2.3 è§£å†³ä¼ªå…±äº«ï¼ˆFalse Sharingï¼‰</h3>
<p>ä¼ªå…±äº«æ˜¯ç°ä»£å¤šæ ¸å¤„ç†å™¨ä¸­å½±å“æ€§èƒ½çš„é‡è¦å› ç´ ã€‚å½“ä¸åŒçº¿ç¨‹ä¿®æ”¹åŒä¸€ç¼“å­˜è¡Œä¸­çš„ä¸åŒå˜é‡æ—¶ï¼Œä¼šå¯¼è‡´ç¼“å­˜è¡Œæ— æ•ˆåŒ–ã€‚Disruptor é€šè¿‡<strong>ç¼“å­˜è¡Œå¡«å……</strong>æŠ€æœ¯è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// Disruptor é€šè¿‡å¡«å……é¿å…ä¼ªå…±äº«çš„ç¤ºä¾‹</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RingBufferPad</span> {
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">long</span> p1, p2, p3, p4, p5, p6, p7; <span class="hljs-comment">// ç¼“å­˜è¡Œå¡«å……</span>
}
</code></pre>
<h3 data-id="heading-6">2.4 åºåˆ—å·æœºåˆ¶</h3>
<p>Disruptor ä½¿ç”¨åºåˆ—å·ï¼ˆSequenceï¼‰æ¥åè°ƒç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å·¥ä½œè¿›åº¦ï¼š</p>
<ul>
<li>æ¯ä¸ªç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„åºåˆ—å·</li>
<li>é€šè¿‡åºåˆ—å·è·Ÿè¸ªå¤„ç†è¿›åº¦ï¼Œé¿å…ç«äº‰</li>
<li>åºåˆ—å·æœ¬èº«ä¹Ÿè¿›è¡Œç¼“å­˜è¡Œå¡«å……ï¼Œé˜²æ­¢ä¼ªå…±äº«</li>
</ul>
<h2 data-id="heading-7">3. Spring Boot é›†æˆ Disruptor å®æˆ˜</h2>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„è®¢å•å¤„ç†æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•åœ¨ Spring Boot é¡¹ç›®ä¸­é›†æˆå’Œä½¿ç”¨ Disruptorã€‚</p>
<h3 data-id="heading-8">3.1 ç¯å¢ƒé…ç½®</h3>
<p>é¦–å…ˆï¼Œåœ¨ Maven é¡¹ç›®ä¸­æ·»åŠ  Disruptor ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot ç›¸å…³ä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Disruptor ä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.lmax<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>disruptor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-9">3.2 å®šä¹‰äº‹ä»¶ï¼ˆEventï¼‰</h3>
<p>äº‹ä»¶æ˜¯åœ¨ Disruptor ä¸­ä¼ é€’çš„æ•°æ®è½½ä½“ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">@Data
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEvent</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> orderId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> userId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> status;
}
</code></pre>
<h3 data-id="heading-10">3.3 å®ç°äº‹ä»¶å·¥å‚</h3>
<p>äº‹ä»¶å·¥å‚è´Ÿè´£é¢„åˆ›å»ºäº‹ä»¶å¯¹è±¡ï¼Œä¾› Ring Buffer ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">EventFactory</span>&lt;<span class="hljs-title class_">OrderEvent</span>&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">OrderEvent</span> <span class="hljs-title function_">newInstance</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderEvent</span>();
    }
}
</code></pre>
<h3 data-id="heading-11">3.4 å®ç°äº‹ä»¶å¤„ç†å™¨</h3>
<p>äº‹ä»¶å¤„ç†å™¨åŒ…å«å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OrderEventHandler</span> <span class="hljs-title">implements</span> <span class="hljs-title">EventHandler</span>&lt;<span class="hljs-title">OrderEvent</span>&gt; {
    @Override
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onEvent</span>(<span class="hljs-params">OrderEvent <span class="hljs-keyword">event</span>, <span class="hljs-built_in">long</span> sequence, boolean endOfBatch</span>)</span> {
        <span class="hljs-comment">// å¤„ç†è®¢å•çš„å…·ä½“ä¸šåŠ¡é€»è¾‘</span>
        processOrder(<span class="hljs-keyword">event</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processOrder</span>(<span class="hljs-params">OrderEvent orderEvent</span>)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿè®¢å•æ”¯ä»˜é€»è¾‘</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å¤„ç†è®¢å•: "</span> + orderEvent.getOrderId() + 
                          <span class="hljs-string">", ç”¨æˆ·: "</span> + orderEvent.getUserId() + 
                          <span class="hljs-string">", é‡‘é¢: "</span> + orderEvent.getPrice());
        
        <span class="hljs-comment">// å‡è®¾è®¢å•å¤„ç†é€šè¿‡åæ›´æ–°è®¢å•çŠ¶æ€</span>
        orderEvent.setStatus(<span class="hljs-string">"å·²æ”¯ä»˜"</span>);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿåº“å­˜æ‰£å‡é€»è¾‘</span>
        reduceInventory(orderEvent);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"è®¢å•å¤„ç†å®Œæˆ: "</span> + orderEvent.getOrderId() + <span class="hljs-string">" çŠ¶æ€: "</span> + orderEvent.getStatus());
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reduceInventory</span>(<span class="hljs-params">OrderEvent orderEvent</span>)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿåº“å­˜æ‰£å‡é€»è¾‘</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ‰£å‡åº“å­˜: è®¢å• "</span> + orderEvent.getOrderId());
    }
}
</code></pre>
<h3 data-id="heading-12">3.5 å®ç°ç”Ÿäº§è€…</h3>
<p>ç”Ÿäº§è€…è´Ÿè´£å‘ Ring Buffer å‘å¸ƒäº‹ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventProducer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RingBuffer&lt;OrderEvent&gt; ringBuffer;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderEventProducer</span><span class="hljs-params">(RingBuffer&lt;OrderEvent&gt; ringBuffer)</span> {
        <span class="hljs-built_in">this</span>.ringBuffer = ringBuffer;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onData</span><span class="hljs-params">(String userId, <span class="hljs-type">double</span> price)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">sequence</span> <span class="hljs-operator">=</span> ringBuffer.next();  <span class="hljs-comment">// è·å–ä¸‹ä¸€ä¸ªåºåˆ—å·</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">OrderEvent</span> <span class="hljs-variable">orderEvent</span> <span class="hljs-operator">=</span> ringBuffer.get(sequence); <span class="hljs-comment">// è·å–äº‹ä»¶å¯¹è±¡</span>
            orderEvent.setOrderId(UUID.randomUUID().toString());
            orderEvent.setUserId(userId);
            orderEvent.setPrice(price);
            orderEvent.setStatus(<span class="hljs-string">"æœªæ”¯ä»˜"</span>);
        } <span class="hljs-keyword">finally</span> {
            ringBuffer.publish(sequence);  <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-13">3.6 é…ç½® Disruptor</h3>
<p>åœ¨ Spring Boot ä¸­é…ç½® Disruptor Beanï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DisruptorConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Disruptor&lt;OrderEvent&gt; <span class="hljs-title function_">disruptor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">OrderEventFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderEventFactory</span>();
        <span class="hljs-type">int</span> <span class="hljs-variable">bufferSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">1024</span>; <span class="hljs-comment">// RingBuffer å¤§å°ï¼Œå¿…é¡»æ˜¯2çš„å¹‚</span>
        
        <span class="hljs-comment">// åˆ›å»º Disruptor</span>
        Disruptor&lt;OrderEvent&gt; disruptor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Disruptor</span>&lt;&gt;(
            factory, 
            bufferSize, 
            Executors.defaultThreadFactory(),
            ProducerType.MULTI,  <span class="hljs-comment">// å¤šç”Ÿäº§è€…æ¨¡å¼</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">YieldingWaitStrategy</span>()  <span class="hljs-comment">// ç­‰å¾…ç­–ç•¥</span>
        );
        
        <span class="hljs-comment">// ç»‘å®šäº‹ä»¶å¤„ç†å™¨</span>
        disruptor.handleEventsWith(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderEventHandler</span>());
        disruptor.start();
        
        <span class="hljs-keyword">return</span> disruptor;
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> OrderEventProducer <span class="hljs-title function_">orderEventProducer</span><span class="hljs-params">(Disruptor&lt;OrderEvent&gt; disruptor)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderEventProducer</span>(disruptor.getRingBuffer());
    }
}
</code></pre>
<h3 data-id="heading-14">3.7 åˆ›å»º REST æ§åˆ¶å™¨</h3>
<p>é€šè¿‡ REST API æ¥æ”¶è®¢å•è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/orders"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">OrderEventProducer</span> orderEventProducer;
    
    <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/create"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">ResponseEntity</span>&lt;<span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">createOrder</span>(<span class="hljs-params"><span class="hljs-meta">@RequestBody</span> OrderRequest orderRequest</span>) {
        orderEventProducer.<span class="hljs-title function_">onData</span>(orderRequest.<span class="hljs-title function_">getUserId</span>(), orderRequest.<span class="hljs-title function_">getPrice</span>());
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">ResponseEntity</span>.<span class="hljs-title function_">ok</span>(<span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸï¼Œæ­£åœ¨å¤„ç†ï¼"</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderRequest</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> userId;
    <span class="hljs-keyword">private</span> double price;
    
    <span class="hljs-comment">// Getters and Setters</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getUserId</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> userId; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setUserId</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userId</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span> = userId; }
    <span class="hljs-keyword">public</span> double <span class="hljs-title function_">getPrice</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> price; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setPrice</span>(<span class="hljs-params">double price</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">price</span> = price; }
}
</code></pre>
<h2 data-id="heading-15">4. é«˜çº§ç‰¹æ€§ä¸ä¼˜åŒ–é…ç½®</h2>
<h3 data-id="heading-16">4.1 ç­‰å¾…ç­–ç•¥é€‰æ‹©</h3>
<p>Disruptor æä¾›å¤šç§ç­‰å¾…ç­–ç•¥ï¼Œé€‚ç”¨äºä¸åŒåœºæ™¯ï¼š</p>
<ul>
<li><strong>BlockingWaitStrategy</strong>ï¼šé»˜è®¤ç­–ç•¥ï¼Œä½¿ç”¨é”å’Œæ¡ä»¶å˜é‡ï¼ŒCPU æ¶ˆè€—æœ€å°</li>
<li><strong>SleepingWaitStrategy</strong>ï¼šå¹³è¡¡å»¶è¿Ÿå’Œ CPU æ¶ˆè€—ï¼Œé€‚ç”¨äºå¼‚æ­¥æ—¥å¿—è®°å½•ç­‰åœºæ™¯</li>
<li><strong>YieldingWaitStrategy</strong>ï¼šä½å»¶è¿Ÿç­–ç•¥ï¼Œé€šè¿‡è‡ªæ—‹å’Œ Thread.yield() å®ç°</li>
<li><strong>BusySpinWaitStrategy</strong>ï¼šæ€§èƒ½æœ€ä½³ï¼Œä½† CPU å ç”¨æœ€é«˜ï¼Œé€‚ç”¨äºä½å»¶è¿Ÿç³»ç»Ÿ</li>
</ul>
<h3 data-id="heading-17">4.2 å¤šæ¶ˆè´¹è€…æ¨¡å¼</h3>
<p>Disruptor æ”¯æŒå¤æ‚çš„æ¶ˆè´¹è€…ä¾èµ–å…³ç³»ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// å¹¶è¡Œå¤„ç†ï¼šä¸‰ä¸ªæ¶ˆè´¹è€…åŒæ—¶å¤„ç†æ¯ä¸ªäº‹ä»¶</span>
disruptor<span class="hljs-selector-class">.handleEventsWith</span>(handler1, handler2, handler3);

<span class="hljs-comment">// é¡ºåºå¤„ç†ï¼šhandler1 å®Œæˆåæ‰æ‰§è¡Œ handler2</span>
disruptor<span class="hljs-selector-class">.handleEventsWith</span>(handler1)<span class="hljs-selector-class">.then</span>(handler2);

<span class="hljs-comment">// è±å½¢å¤„ç†æ¨¡å¼</span>
disruptor<span class="hljs-selector-class">.handleEventsWith</span>(handler1, handler2)<span class="hljs-selector-class">.then</span>(handler3);
</code></pre>
<h3 data-id="heading-18">4.3 æ‰¹é‡äº‹ä»¶å¤„ç†</h3>
<p>Disruptor å¤©ç„¶æ”¯æŒæ‰¹é‡å¤„ç†ï¼Œæ¶ˆè´¹è€…å¯ä»¥ä¸€æ¬¡å¤„ç†å¤šä¸ªå¯ç”¨äº‹ä»¶ï¼Œå‡å°‘è°ƒç”¨æ¬¡æ•°ï¼Œæé«˜ååé‡ã€‚</p>
<h2 data-id="heading-19">5. æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-20">5.1 åˆç†è®¾ç½® Ring Buffer å¤§å°</h3>
<p>Ring Buffer å¤§å°åº”ä¸º 2 çš„å¹‚ï¼Œä»¥ä¾¿ä½¿ç”¨ä½è¿ç®—æ›¿ä»£æ˜‚è´µçš„å–æ¨¡æ“ä½œã€‚å¤§å°è®¾ç½®éœ€æƒè¡¡ï¼š</p>
<ul>
<li>è¿‡å¤§ï¼šå ç”¨å†…å­˜å¤šï¼Œå¢åŠ åƒåœ¾å›æ”¶å‹åŠ›</li>
<li>è¿‡å°ï¼šå®¹æ˜“å¯¼è‡´ç”Ÿäº§è€…é˜»å¡ï¼Œå½±å“ååé‡</li>
</ul>
<h3 data-id="heading-21">5.2 é¿å…äº‹ä»¶å¯¹è±¡ä¸­åˆ›å»ºä¸´æ—¶å¯¹è±¡</h3>
<p>åœ¨äº‹ä»¶å¤„ç†ä¸­åº”é¿å…åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œä»¥å‡å°‘åƒåœ¾å›æ”¶å‹åŠ›ã€‚å¯ä»¥å¤ç”¨äº‹ä»¶å¯¹è±¡æˆ–ä½¿ç”¨å¯¹è±¡æ± ã€‚</p>
<h3 data-id="heading-22">5.3 ç›‘æ§ä¸è°ƒä¼˜</h3>
<p>ç›‘æ§ Disruptor æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çš„åºåˆ—å·å·®è·</li>
<li>äº‹ä»¶å¤„ç†å»¶è¿Ÿåˆ†å¸ƒ</li>
<li>ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼ˆCPUã€å†…å­˜ï¼‰</li>
</ul>
<p>æ ¹æ®ç›‘æ§ç»“æœè°ƒæ•´ç­‰å¾…ç­–ç•¥ã€æ¶ˆè´¹è€…æ•°é‡ç­‰å‚æ•°ã€‚</p>
<h2 data-id="heading-23">6. é€‚ç”¨åœºæ™¯ä¸é™åˆ¶</h2>
<h3 data-id="heading-24">6.1 ç†æƒ³åº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>é‡‘èäº¤æ˜“ç³»ç»Ÿ</strong>ï¼šé«˜ååé‡ã€ä½å»¶è¿Ÿçš„è®¢å•å¤„ç†</li>
<li><strong>å®æ—¶æ•°æ®å¤„ç†</strong>ï¼šæ—¥å¿—å¤„ç†ã€å®æ—¶è®¡ç®—ç­‰</li>
<li><strong>æ¸¸æˆæœåŠ¡å™¨</strong>ï¼šå¤„ç†å¤§é‡ç©å®¶å¹¶å‘æ“ä½œ</li>
<li><strong>æ¶ˆæ¯å¼•æ“</strong>ï¼šé«˜ååé‡çš„æ¶ˆæ¯ä¼ é€’</li>
</ul>
<h3 data-id="heading-25">6.2 ä¸é€‚ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ•°æ®æŒä¹…åŒ–</strong>ï¼šDisruptor æ˜¯å†…å­˜é˜Ÿåˆ—ï¼Œå®•æœºå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±</li>
<li><strong>åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ï¼šDisruptor é€‚ç”¨äºå•æœºé«˜å¹¶å‘ï¼Œåˆ†å¸ƒå¼åœºæ™¯éœ€ç»“åˆæ¶ˆæ¯ä¸­é—´ä»¶</li>
<li><strong>ç®€å•ä¸šåŠ¡</strong>ï¼šä½å¹¶å‘åœºæ™¯ä¸‹ä¼˜åŠ¿ä¸æ˜æ˜¾ï¼Œåè€Œå¢åŠ ç³»ç»Ÿå¤æ‚åº¦</li>
</ul>
<h2 data-id="heading-26">7. æ€»ç»“</h2>
<p>Disruptor é€šè¿‡å…¶ç‹¬ç‰¹çš„ç¯å½¢ç¼“å†²åŒºè®¾è®¡å’Œæ— é”ç®—æ³•ï¼Œä¸ºé«˜å¹¶å‘åº”ç”¨æä¾›äº†å“è¶Šçš„æ€§èƒ½ã€‚åœ¨ Spring Boot é¡¹ç›®ä¸­é›†æˆ Disruptor å¯ä»¥æ˜¾è‘—æå‡ç³»ç»Ÿååé‡ï¼Œç‰¹åˆ«æ˜¯åœ¨è®¢å•å¤„ç†ã€å®æ—¶è®¡ç®—ç­‰åœºæ™¯ä¸‹ã€‚</p>
<p>æˆåŠŸä½¿ç”¨ Disruptor çš„å…³é”®åœ¨äºï¼š</p>
<ol>
<li>ç†è§£å…¶æ ¸å¿ƒåŸç†ï¼Œç‰¹åˆ«æ˜¯å†…å­˜å¸ƒå±€å’Œåºåˆ—å·æœºåˆ¶</li>
<li>æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„ç­‰å¾…ç­–ç•¥å’Œæ¶ˆè´¹è€…æ¨¡å¼</li>
<li>è¿›è¡Œå……åˆ†çš„æ€§èƒ½æµ‹è¯•å’Œç›‘æ§ï¼ŒæŒç»­è°ƒä¼˜å‚æ•°</li>
</ol>
<p>å½“åº”ç”¨é¢ä¸´é«˜å¹¶å‘æŒ‘æˆ˜ï¼Œä¸”ä¼ ç»Ÿé˜Ÿåˆ—æˆä¸ºæ€§èƒ½ç“¶é¢ˆæ—¶ï¼ŒDisruptor æ˜¯ä¸€ä¸ªå€¼å¾—è€ƒè™‘çš„è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿå¸®åŠ©ç³»ç»Ÿå®ç°ç™¾ä¸‡çº§ TPS çš„å¤„ç†èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vert.xæ¡†æ¶è¯¦è§£ä¸é¡¹ç›®å®æˆ˜ï¼šæ„å»ºé«˜æ€§èƒ½å¼‚æ­¥åº”ç”¨]]></title>    <link>https://juejin.cn/post/7588095884069945344</link>    <guid>https://juejin.cn/post/7588095884069945344</guid>    <pubDate>2025-12-27T14:17:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884069945344" data-draft-id="7588092534161948672" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vert.xæ¡†æ¶è¯¦è§£ä¸é¡¹ç›®å®æˆ˜ï¼šæ„å»ºé«˜æ€§èƒ½å¼‚æ­¥åº”ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:17:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vert.xæ¡†æ¶è¯¦è§£ä¸é¡¹ç›®å®æˆ˜ï¼šæ„å»ºé«˜æ€§èƒ½å¼‚æ­¥åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:17:26.000Z" title="Sat Dec 27 2025 14:17:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Vert.xæ¡†æ¶æ¦‚è¿°</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯Vert.xï¼Ÿ</h3>
<p>Vert.xæ˜¯ä¸€ä¸ªåœ¨JVMä¸Šæ„å»ºå“åº”å¼åº”ç”¨ç¨‹åºçš„å·¥å…·åŒ…ï¼Œé‡‡ç”¨äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡çš„è®¾è®¡ç†å¿µã€‚å®ƒæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆJavaã€Kotlinã€Scalaã€Groovyã€JavaScriptç­‰ï¼‰ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿç”¨ç†Ÿæ‚‰çš„è¯­è¨€æ„å»ºé«˜æ€§èƒ½ã€å¯æ‰©å±•çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-2">1.2 æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li><strong>äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡I/O</strong>ï¼šåŸºäºNettyï¼Œå……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æº</li>
<li><strong>å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šPolyglotç‰¹æ€§å…è®¸æ··åˆä½¿ç”¨å¤šç§è¯­è¨€</li>
<li><strong>é«˜å¹¶å‘å¤„ç†</strong>ï¼šå•æœºå¯å¤„ç†æ•°ç™¾ä¸‡å¹¶å‘è¿æ¥</li>
<li><strong>è½»é‡çº§</strong>ï¼šæ ¸å¿ƒåº“ä½“ç§¯å°ï¼Œæ¨¡å—åŒ–è®¾è®¡</li>
<li><strong>å®Œæ•´çš„å“åº”å¼ç¼–ç¨‹æ”¯æŒ</strong>ï¼šåŸç”Ÿæ”¯æŒRxJavaã€SmallRye Mutinyç­‰</li>
</ul>
<h2 data-id="heading-3">äºŒã€Vert.xæ ¸å¿ƒæ¶æ„è§£æ</h2>
<h3 data-id="heading-4">2.1 äº‹ä»¶å¾ªç¯æ¨¡å‹</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// Vert.xçš„äº‹ä»¶å¾ªç¯çº¿ç¨‹ç¤ºä¾‹</span>
<span class="hljs-selector-tag">vertx</span><span class="hljs-selector-class">.setPeriodic</span>(<span class="hljs-number">1000</span>, id -&gt; {
    <span class="hljs-comment">// æ­¤å›è°ƒåœ¨äº‹ä»¶å¾ªç¯çº¿ç¨‹æ‰§è¡Œ</span>
    <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"Timer fired in event loop thread: "</span> 
        + Thread.<span class="hljs-built_in">currentThread</span>().<span class="hljs-built_in">getName</span>());
});
</code></pre>
<p>Vert.xé‡‡ç”¨å¤šReactoræ¨¡å¼ï¼Œé»˜è®¤äº‹ä»¶å¾ªç¯çº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° * 2ã€‚è¿™ç§è®¾è®¡é¿å…äº†ä¼ ç»Ÿé˜»å¡æ¨¡å‹ä¸­çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚</p>
<h3 data-id="heading-5">2.2 Verticleï¼šVert.xçš„åŸºæœ¬éƒ¨ç½²å•å…ƒ</h3>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainVerticle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractVerticle</span> </span>{
    <span class="hljs-meta">@Override</span>
    public void start() {
        <span class="hljs-comment">// å¯åŠ¨HTTPæœåŠ¡å™¨</span>
        vertx.createHttpServer()
            .requestHandler(req -&gt; {
                req.response()
                   .putHeader(<span class="hljs-string">"content-type"</span>, <span class="hljs-string">"text/plain"</span>)
                   .end(<span class="hljs-string">"Hello from Vert.x!"</span>);
            })
            .listen(<span class="hljs-number">8888</span>);
    }
}
</code></pre>
<p>Verticleæœ‰ä¸‰ç§ç±»å‹ï¼š</p>
<ol>
<li><strong>Standard Verticle</strong>ï¼šæ ‡å‡†verticleï¼Œåœ¨äº‹ä»¶å¾ªç¯çº¿ç¨‹æ‰§è¡Œ</li>
<li><strong>Worker Verticle</strong>ï¼šå·¥ä½œverticleï¼Œåœ¨å·¥ä½œçº¿ç¨‹æ± æ‰§è¡Œ</li>
<li><strong>Multi-threaded Worker Verticle</strong>ï¼šå¤šçº¿ç¨‹å·¥ä½œverticle</li>
</ol>
<h3 data-id="heading-6">2.3 Event Busï¼šåº”ç”¨ç¥ç»ç³»ç»Ÿ</h3>
<p>Vert.xçš„äº‹ä»¶æ€»çº¿æä¾›äº†åˆ†å¸ƒå¼ã€å…¨åŒå·¥çš„é€šä¿¡æœºåˆ¶ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>å‘å¸ƒ/è®¢é˜…æ¨¡å¼</li>
<li>ç‚¹å¯¹ç‚¹è¯·æ±‚/å“åº”</li>
<li>é›†ç¾¤æ¨¡å¼ä¸‹è·¨èŠ‚ç‚¹çš„é€šä¿¡</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
eventBus.send(<span class="hljs-string">"news.uk.sport"</span>, <span class="hljs-string">"Yay! Someone kicked a ball"</span>);

<span class="hljs-comment">// æ¥æ”¶æ¶ˆæ¯</span>
eventBus.consumer(<span class="hljs-string">"news.uk.sport"</span>, message -&gt; {
    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"Received news: "</span> + message.body());
});
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€å®æˆ˜é¡¹ç›®ï¼šæ„å»ºå®æ—¶æ•°æ®å¤„ç†ç³»ç»Ÿ</h2>
<h3 data-id="heading-8">3.1 é¡¹ç›®æ¦‚è¿°</h3>
<p>æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªå®æ—¶æ•°æ®å¤„ç†ç³»ç»Ÿï¼ŒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p>
<ul>
<li>REST APIç½‘å…³</li>
<li>å®æ—¶æ•°æ®å¤„ç†å™¨</li>
<li>WebSocketæ¨é€æœåŠ¡</li>
<li>åˆ†å¸ƒå¼äº‹ä»¶æ€»çº¿é€šä¿¡</li>
<li>ç›‘æ§æŒ‡æ ‡æ”¶é›†</li>
</ul>
<h3 data-id="heading-9">3.2 é¡¹ç›®åˆå§‹åŒ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Mavenä¾èµ–é…ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-web-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">3.3 ä¸»å¯åŠ¨ç±»å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessingApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">Vertx</span> vertx = <span class="hljs-title class_">Vertx</span>.<span class="hljs-title function_">vertx</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">VertxOptions</span>()
            .<span class="hljs-title function_">setEventLoopPoolSize</span>(<span class="hljs-number">16</span>)
            .<span class="hljs-title function_">setWorkerPoolSize</span>(<span class="hljs-number">20</span>));
        
        <span class="hljs-comment">// éƒ¨ç½²verticle</span>
        <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">String</span>&gt; apiDeployment = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">promise</span>();
        <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">String</span>&gt; processorDeployment = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">promise</span>();
        
        vertx.<span class="hljs-title function_">deployVerticle</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiGatewayVerticle</span>(), apiDeployment);
        vertx.<span class="hljs-title function_">deployVerticle</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataProcessorVerticle</span>(), processorDeployment);
        
        <span class="hljs-comment">// å¼‚æ­¥ç­‰å¾…æ‰€æœ‰verticleéƒ¨ç½²å®Œæˆ</span>
        <span class="hljs-title class_">CompositeFuture</span>.<span class="hljs-title function_">all</span>(apiDeployment.<span class="hljs-title function_">future</span>(), processorDeployment.<span class="hljs-title function_">future</span>())
            .<span class="hljs-title function_">onComplete</span>(result -&gt; {
                <span class="hljs-keyword">if</span> (result.<span class="hljs-title function_">succeeded</span>()) {
                    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æ‰€æœ‰verticleéƒ¨ç½²æˆåŠŸï¼"</span>);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-title class_">System</span>.<span class="hljs-property">err</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"éƒ¨ç½²å¤±è´¥: "</span> + result.<span class="hljs-title function_">cause</span>().<span class="hljs-title function_">getMessage</span>());
                }
            });
    }
}
</code></pre>
<h3 data-id="heading-11">3.4 REST APIç½‘å…³å®ç°</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">ApiGatewayVerticle</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">AbstractVerticle</span> {
    
    <span class="hljs-variable">@Override</span>
    public void <span class="hljs-built_in">start</span>() {
        <span class="hljs-selector-tag">Router</span> <span class="hljs-selector-tag">router</span> = <span class="hljs-selector-tag">Router</span><span class="hljs-selector-class">.router</span>(vertx);
        
        <span class="hljs-comment">// å¯ç”¨CORS</span>
        <span class="hljs-selector-tag">router</span><span class="hljs-selector-class">.route</span>()<span class="hljs-selector-class">.handler</span>(CorsHandler.<span class="hljs-built_in">create</span>(<span class="hljs-string">"*"</span>));
        
        <span class="hljs-comment">// è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶</span>
        <span class="hljs-selector-tag">router</span><span class="hljs-selector-class">.route</span>()<span class="hljs-selector-class">.handler</span>(ctx -&gt; {
            <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"Received request: "</span> + ctx.<span class="hljs-built_in">request</span>().<span class="hljs-built_in">method</span>() 
                + <span class="hljs-string">" "</span> + ctx.<span class="hljs-built_in">request</span>().<span class="hljs-built_in">path</span>());
            <span class="hljs-selector-tag">ctx</span><span class="hljs-selector-class">.next</span>();
        });
        
        <span class="hljs-comment">// æ•°æ®æ¥æ”¶ç«¯ç‚¹</span>
        <span class="hljs-selector-tag">router</span><span class="hljs-selector-class">.post</span>(<span class="hljs-string">"/api/data"</span>)
            <span class="hljs-selector-class">.handler</span>(BodyHandler.<span class="hljs-built_in">create</span>())
            <span class="hljs-selector-class">.handler</span>(<span class="hljs-attribute">this</span>::handleDataIngestion);
        
        <span class="hljs-comment">// å¥åº·æ£€æŸ¥ç«¯ç‚¹</span>
        <span class="hljs-selector-tag">router</span><span class="hljs-selector-class">.get</span>(<span class="hljs-string">"/health"</span>)<span class="hljs-selector-class">.handler</span>(ctx -&gt; {
            <span class="hljs-selector-tag">ctx</span><span class="hljs-selector-class">.json</span>(new <span class="hljs-built_in">JsonObject</span>()
                .<span class="hljs-built_in">put</span>(<span class="hljs-string">"status"</span>, <span class="hljs-string">"UP"</span>)
                .<span class="hljs-built_in">put</span>(<span class="hljs-string">"timestamp"</span>, System.<span class="hljs-built_in">currentTimeMillis</span>()));
        });
        
        <span class="hljs-comment">// å¯åŠ¨HTTPæœåŠ¡å™¨</span>
        <span class="hljs-selector-tag">vertx</span><span class="hljs-selector-class">.createHttpServer</span>()
            <span class="hljs-selector-class">.requestHandler</span>(router)
            <span class="hljs-selector-class">.listen</span>(<span class="hljs-number">8080</span>)
            <span class="hljs-selector-class">.onSuccess</span>(server -&gt; {
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"APIç½‘å…³å¯åŠ¨åœ¨ç«¯å£ 8080"</span>);
            })
            <span class="hljs-selector-class">.onFailure</span>(<span class="hljs-attribute">Throwable</span>::printStackTrace);
    }
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">handleDataIngestion</span>(RoutingContext ctx) {
        <span class="hljs-selector-tag">JsonObject</span> <span class="hljs-selector-tag">data</span> = <span class="hljs-selector-tag">ctx</span><span class="hljs-selector-class">.getBodyAsJson</span>();
        
        <span class="hljs-comment">// éªŒè¯æ•°æ®</span>
        <span class="hljs-selector-tag">if</span> (data == null || !data.<span class="hljs-built_in">containsKey</span>(<span class="hljs-string">"sensorId"</span>)) {
            <span class="hljs-selector-tag">ctx</span><span class="hljs-selector-class">.fail</span>(<span class="hljs-number">400</span>);
            <span class="hljs-selector-tag">return</span>;
        }
        
        <span class="hljs-comment">// é€šè¿‡äº‹ä»¶æ€»çº¿å‘å¸ƒæ•°æ®</span>
        <span class="hljs-selector-tag">vertx</span><span class="hljs-selector-class">.eventBus</span>()<span class="hljs-selector-class">.request</span>(<span class="hljs-string">"data.process"</span>, data, reply -&gt; {
            <span class="hljs-selector-tag">if</span> (reply.<span class="hljs-built_in">succeeded</span>()) {
                <span class="hljs-selector-tag">ctx</span><span class="hljs-selector-class">.json</span>(new <span class="hljs-built_in">JsonObject</span>()
                    .<span class="hljs-built_in">put</span>(<span class="hljs-string">"status"</span>, <span class="hljs-string">"processed"</span>)
                    .<span class="hljs-built_in">put</span>(<span class="hljs-string">"messageId"</span>, reply.<span class="hljs-built_in">result</span>().<span class="hljs-built_in">body</span>()));
            } <span class="hljs-selector-tag">else</span> {
                <span class="hljs-selector-tag">ctx</span><span class="hljs-selector-class">.fail</span>(<span class="hljs-number">500</span>);
            }
        });
    }
}
</code></pre>
<h3 data-id="heading-12">3.5 æ•°æ®å¤„ç†å™¨å®ç°</h3>
<pre><code class="hljs language-scss" lang="scss">public class DataProcessorVerticle extends AbstractVerticle {
    
    private static final int BATCH_SIZE = <span class="hljs-number">1000</span>;
    private List&lt;JsonObject&gt; batchBuffer = new ArrayList&lt;&gt;();
    
    <span class="hljs-keyword">@Override</span>
    public void start() {
        <span class="hljs-comment">// æ³¨å†Œæ•°æ®å¤„ç†å™¨</span>
        vertx<span class="hljs-selector-class">.eventBus</span>().&lt;JsonObject&gt;<span class="hljs-built_in">consumer</span>("data.process", message -&gt; {
            JsonObject data = message.body();
            
            <span class="hljs-comment">// å¼‚æ­¥å¤„ç†æ•°æ®</span>
            <span class="hljs-built_in">processData</span>(data)
                <span class="hljs-selector-class">.onSuccess</span>(processedData -&gt; {
                    // æ·»åŠ åˆ°æ‰¹å¤„ç†ç¼“å†²åŒº
                    batchBuffer.add(processedData);
                    
                    <span class="hljs-comment">// è¾¾åˆ°æ‰¹å¤„ç†å¤§å°æ—¶æ‰¹é‡å­˜å‚¨</span>
                    if (batchBuffer.size() &gt;= BATCH_SIZE) {
                        <span class="hljs-built_in">flushBatch</span>();
                    }
                    
                    <span class="hljs-comment">// å‘é€å¤„ç†å®Œæˆå“åº”</span>
                    message<span class="hljs-selector-class">.reply</span>(UUID.randomUUID()<span class="hljs-selector-class">.toString</span>());
                    
                    <span class="hljs-comment">// å®æ—¶æ¨é€åˆ°WebSocketå®¢æˆ·ç«¯</span>
                    vertx<span class="hljs-selector-class">.eventBus</span>()<span class="hljs-selector-class">.publish</span>("data.realtime", processedData);
                })
                <span class="hljs-selector-class">.onFailure</span>(err -&gt; {
                    System.err.println("æ•°æ®å¤„ç†å¤±è´¥: " + err.getMessage());
                    message<span class="hljs-selector-class">.fail</span>(<span class="hljs-number">500</span>, err.getMessage());
                });
        });
        
        <span class="hljs-comment">// å®šæ—¶åˆ·æ–°æ‰¹å¤„ç†</span>
        vertx<span class="hljs-selector-class">.setPeriodic</span>(<span class="hljs-number">5000</span>, id -&gt; {
            if (!batchBuffer.isEmpty()) {
                <span class="hljs-built_in">flushBatch</span>();
            }
        });
        
        System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("æ•°æ®å¤„ç†å™¨å·²å¯åŠ¨");
    }
    
    private Future&lt;JsonObject&gt; <span class="hljs-built_in">processData</span>(JsonObject rawData) {
        Promise&lt;JsonObject&gt; promise = Promise<span class="hljs-selector-class">.promise</span>();
        
        <span class="hljs-comment">// ä½¿ç”¨å·¥ä½œçº¿ç¨‹æ‰§è¡ŒCPUå¯†é›†å‹å¤„ç†</span>
        vertx<span class="hljs-selector-class">.executeBlocking</span>(future -&gt; {
            try {
                // æ¨¡æ‹Ÿæ•°æ®å¤„ç†
                JsonObject processed = rawData.copy();
                processed<span class="hljs-selector-class">.put</span>("processed", true)
                         <span class="hljs-selector-class">.put</span>("timestamp", System.currentTimeMillis())
                         <span class="hljs-selector-class">.put</span>("processedBy", "worker-" + Thread.currentThread()<span class="hljs-selector-class">.getName</span>());
                
                <span class="hljs-comment">// æ¨¡æ‹Ÿå¤„ç†å»¶è¿Ÿ</span>
                Thread<span class="hljs-selector-class">.sleep</span>(<span class="hljs-number">10</span>);
                
                future<span class="hljs-selector-class">.complete</span>(processed);
            } catch (Exception e) {
                future<span class="hljs-selector-class">.fail</span>(e);
            }
        }, promise);
        
        return promise<span class="hljs-selector-class">.future</span>();
    }
    
    private void <span class="hljs-built_in">flushBatch</span>() {
        if (batchBuffer.isEmpty()) return;
        
        List&lt;JsonObject&gt; toFlush = new ArrayList&lt;&gt;(batchBuffer);
        batchBuffer<span class="hljs-selector-class">.clear</span>();
        
        <span class="hljs-comment">// å¼‚æ­¥å­˜å‚¨åˆ°æ•°æ®åº“</span>
        <span class="hljs-built_in">storeBatch</span>(toFlush)
            <span class="hljs-selector-class">.onSuccess</span>(count -&gt; {
                System.out.println("æ‰¹é‡å­˜å‚¨æˆåŠŸï¼Œè®°å½•æ•°: " + count);
            })
            <span class="hljs-selector-class">.onFailure</span>(err -&gt; {
                System.err.println("æ‰¹é‡å­˜å‚¨å¤±è´¥: " + err.getMessage());
                <span class="hljs-comment">// é‡æ–°åŠ å…¥ç¼“å†²åŒº</span>
                batchBuffer<span class="hljs-selector-class">.addAll</span>(toFlush);
            });
    }
    
    private Future&lt;Integer&gt; <span class="hljs-built_in">storeBatch</span>(List&lt;JsonObject&gt; batch) {
        <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å®ç°å®é™…çš„æ•°æ®åº“å­˜å‚¨é€»è¾‘</span>
        <span class="hljs-comment">// ç¤ºä¾‹ä¸­ä»…æ¨¡æ‹Ÿå¼‚æ­¥å­˜å‚¨</span>
        Promise&lt;Integer&gt; promise = Promise<span class="hljs-selector-class">.promise</span>();
        vertx<span class="hljs-selector-class">.setTimer</span>(<span class="hljs-number">100</span>, id -&gt; {
            promise.complete(batch.size());
        });
        return promise<span class="hljs-selector-class">.future</span>();
    }
}
</code></pre>
<h3 data-id="heading-13">3.6 WebSocketå®æ—¶æ¨é€æœåŠ¡</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WebSocketServerVerticle</span> <span class="hljs-title">extends</span> <span class="hljs-title">AbstractVerticle</span> {
    
    <span class="hljs-keyword">private</span> Set&lt;ServerWebSocket&gt; clients = ConcurrentHashMap.newKeySet();
    
    @Override
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">start</span>()</span> {
        <span class="hljs-comment">// åˆ›å»ºWebSocketæœåŠ¡å™¨</span>
        vertx.createHttpServer()
            .webSocketHandler(<span class="hljs-keyword">this</span>::handleWebSocket)
            .listen(<span class="hljs-number">8081</span>)
            .onSuccess(server -&gt; {
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"WebSocketæœåŠ¡å™¨å¯åŠ¨åœ¨ç«¯å£ 8081"</span>);
            });
        
        <span class="hljs-comment">// è®¢é˜…å®æ—¶æ•°æ®</span>
        vertx.eventBus().&lt;JsonObject&gt;consumer(<span class="hljs-string">"data.realtime"</span>, message -&gt; {
            JsonObject data = message.body();
            broadcastToClients(data);
        });
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleWebSocket</span>(<span class="hljs-params">ServerWebSocket ws</span>)</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ–°çš„WebSocketè¿æ¥: "</span> + ws.remoteAddress());
        clients.<span class="hljs-keyword">add</span>(ws);
        
        ws.textMessageHandler(message -&gt; {
            <span class="hljs-comment">// å¤„ç†å®¢æˆ·ç«¯æ¶ˆæ¯</span>
            handleClientMessage(ws, message);
        });
        
        ws.closeHandler(v -&gt; {
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"WebSocketè¿æ¥å…³é—­"</span>);
            clients.<span class="hljs-keyword">remove</span>(ws);
        });
        
        ws.exceptionHandler(err -&gt; {
            System.err.println(<span class="hljs-string">"WebSocketé”™è¯¯: "</span> + err.getMessage());
            clients.<span class="hljs-keyword">remove</span>(ws);
        });
        
        <span class="hljs-comment">// å‘é€æ¬¢è¿æ¶ˆæ¯</span>
        ws.writeTextMessage(<span class="hljs-keyword">new</span> JsonObject()
            .put(<span class="hljs-string">"type"</span>, <span class="hljs-string">"welcome"</span>)
            .put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"è¿æ¥æˆåŠŸ"</span>)
            .encode());
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">broadcastToClients</span>(<span class="hljs-params">JsonObject data</span>)</span> {
        String json = data.encode();
        clients.forEach(client -&gt; {
            <span class="hljs-keyword">if</span> (!client.isClosed()) {
                client.writeTextMessage(json);
            }
        });
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleClientMessage</span>(<span class="hljs-params">ServerWebSocket ws, String message</span>)</span> {
        <span class="hljs-comment">// å¤„ç†å®¢æˆ·ç«¯æ¶ˆæ¯</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯: "</span> + message);
    }
}
</code></pre>
<h2 data-id="heading-14">å››ã€Vert.xé«˜çº§ç‰¹æ€§å®æˆ˜</h2>
<h3 data-id="heading-15">4.1 ä½¿ç”¨å“åº”å¼ç¼–ç¨‹</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveDataProcessor</span> {
    
    <span class="hljs-keyword">public</span> Single&lt;JsonObject&gt; processReactive(JsonObject <span class="hljs-keyword">data</span>) {
        <span class="hljs-keyword">return</span> Single.create(emitter -&gt; {
            vertx.eventBus().&lt;JsonObject&gt;request(<span class="hljs-string">"data.process"</span>, <span class="hljs-keyword">data</span>)
                .onSuccess(reply -&gt; {
                    JsonObject result = reply.body();
                    result.put(<span class="hljs-string">"reactiveProcessed"</span>, <span class="hljs-literal">true</span>);
                    emitter.onSuccess(result);
                })
                .onFailure(emitter::onError);
        });
    }
    
    <span class="hljs-keyword">public</span> Flowable&lt;JsonObject&gt; processStream(List&lt;JsonObject&gt; dataStream) {
        <span class="hljs-keyword">return</span> Flowable.fromIterable(dataStream)
            .flatMapSingle(<span class="hljs-keyword">this</span>::processReactive)
            .buffer(<span class="hljs-number">100</span>)  <span class="hljs-comment">// æ¯100æ¡æ‰¹å¤„ç†</span>
            .flatMap(Flowable::fromIterable);
    }
}
</code></pre>
<h3 data-id="heading-16">4.2 é›†ç¾¤æ¨¡å¼é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClusterApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ClusterManager</span> <span class="hljs-variable">mgr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HazelcastClusterManager</span>();
        
        <span class="hljs-type">VertxOptions</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VertxOptions</span>()
            .setClusterManager(mgr)
            .setClustered(<span class="hljs-literal">true</span>);
        
        Vertx.clusteredVertx(options, res -&gt; {
            <span class="hljs-keyword">if</span> (res.succeeded()) {
                <span class="hljs-type">Vertx</span> <span class="hljs-variable">vertx</span> <span class="hljs-operator">=</span> res.result();
                <span class="hljs-comment">// åœ¨é›†ç¾¤ä¸­éƒ¨ç½²verticle</span>
                vertx.deployVerticle(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiGatewayVerticle</span>());
                System.out.println(<span class="hljs-string">"åº”ç”¨å·²åŠ å…¥é›†ç¾¤"</span>);
            } <span class="hljs-keyword">else</span> {
                System.err.println(<span class="hljs-string">"é›†ç¾¤å¯åŠ¨å¤±è´¥: "</span> + res.cause().getMessage());
            }
        });
    }
}
</code></pre>
<h3 data-id="heading-17">4.3 é…ç½®ç®¡ç†</h3>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConfigAwareVerticle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractVerticle</span> </span>{
    
    <span class="hljs-meta">@Override</span>
    public void start() {
        <span class="hljs-comment">// ä»æ–‡ä»¶åŠ è½½é…ç½®</span>
        <span class="hljs-type">ConfigStoreOptions</span> fileStore = <span class="hljs-keyword">new</span> <span class="hljs-type">ConfigStoreOptions</span>()
            .setType(<span class="hljs-string">"file"</span>)
            .setConfig(<span class="hljs-keyword">new</span> <span class="hljs-type">JsonObject</span>().put(<span class="hljs-string">"path"</span>, <span class="hljs-string">"config.json"</span>));
        
        <span class="hljs-type">ConfigRetriever</span> retriever = <span class="hljs-type">ConfigRetriever</span>.create(vertx,
            <span class="hljs-keyword">new</span> <span class="hljs-type">ConfigRetrieverOptions</span>().addStore(fileStore));
        
        <span class="hljs-comment">// ç›‘å¬é…ç½®å˜æ›´</span>
        retriever.listen(change -&gt; {
            <span class="hljs-type">JsonObject</span> newConfig = change.getNewConfiguration();
            <span class="hljs-type">System</span>.out.println(<span class="hljs-string">"é…ç½®å·²æ›´æ–°: "</span> + newConfig.encodePrettily());
            handleConfigUpdate(newConfig);
        });
        
        <span class="hljs-comment">// è·å–åˆå§‹é…ç½®</span>
        retriever.getConfig().onSuccess(config -&gt; {
            <span class="hljs-type">System</span>.out.println(<span class="hljs-string">"åº”ç”¨å¯åŠ¨é…ç½®: "</span> + config.encodePrettily());
            initialize(config);
        });
    }
}
</code></pre>
<h2 data-id="heading-18">äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-19">5.1 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
<ol>
<li>
<p><strong>é€‚å½“è°ƒæ•´çº¿ç¨‹æ± å¤§å°</strong></p>
<pre><code class="hljs language-scss" lang="scss">VertxOptions options = new <span class="hljs-built_in">VertxOptions</span>()
    <span class="hljs-selector-class">.setEventLoopPoolSize</span>(Runtime.getRuntime()<span class="hljs-selector-class">.availableProcessors</span>() * <span class="hljs-number">2</span>)
    <span class="hljs-selector-class">.setWorkerPoolSize</span>(<span class="hljs-number">20</span>)
    <span class="hljs-selector-class">.setInternalBlockingPoolSize</span>(<span class="hljs-number">20</span>);
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨Future/Promiseé¿å…å›è°ƒåœ°ç‹±</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> Future&lt;JsonObject&gt; processDataPipeline(JsonObject input) {
    <span class="hljs-keyword">return</span> validateInput(input)
        .compose(<span class="hljs-keyword">this</span>::enrichData)
        .compose(<span class="hljs-keyword">this</span>::transformData)
        .compose(<span class="hljs-keyword">this</span>::persistData);
}
</code></pre>
</li>
<li>
<p><strong>åˆç†ä½¿ç”¨executeBlocking</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">vertx.<span class="hljs-built_in">executeBlocking</span>(promise -&gt; {
    <span class="hljs-comment">// æ‰§è¡Œé˜»å¡æ“ä½œ</span>
    <span class="hljs-type">String</span> result = <span class="hljs-built_in">blockingOperation</span>();
    promise.<span class="hljs-built_in">complete</span>(result);
}, <span class="hljs-literal">false</span>, res -&gt; {  <span class="hljs-comment">// orderedå‚æ•°è®¾ä¸ºfalseå¯å¹¶è¡Œæ‰§è¡Œ</span>
    <span class="hljs-comment">// å¤„ç†ç»“æœ</span>
});
</code></pre>
</li>
</ol>
<h3 data-id="heading-20">5.2 ç›‘æ§ä¸åº¦é‡</h3>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MetricsVerticle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractVerticle</span> </span>{
    <span class="hljs-meta">@Override</span>
    public void start() {
        <span class="hljs-comment">// å¯ç”¨MicrometeræŒ‡æ ‡</span>
        <span class="hljs-type">MicrometerMetricsOptions</span> options = <span class="hljs-keyword">new</span> <span class="hljs-type">MicrometerMetricsOptions</span>()
            .setPrometheusOptions(<span class="hljs-keyword">new</span> <span class="hljs-type">VertxPrometheusOptions</span>().setEnabled(<span class="hljs-literal">true</span>))
            .setEnabled(<span class="hljs-literal">true</span>);
        
        <span class="hljs-type">Vertx</span> vertxWithMetrics = <span class="hljs-type">Vertx</span>.vertx(
            <span class="hljs-keyword">new</span> <span class="hljs-type">VertxOptions</span>().setMetricsOptions(options));
        
        <span class="hljs-comment">// è‡ªå®šä¹‰æŒ‡æ ‡</span>
        <span class="hljs-type">MeterRegistry</span> registry = <span class="hljs-type">BackendRegistries</span>.getDefaultNow();
        <span class="hljs-type">Counter</span> requestCounter = <span class="hljs-type">Counter</span>.builder(<span class="hljs-string">"http.requests"</span>)
            .description(<span class="hljs-string">"HTTPè¯·æ±‚æ•°é‡"</span>)
            .register(registry);
        
        <span class="hljs-comment">// åœ¨è·¯ç”±ä¸­ä½¿ç”¨</span>
        router.route().handler(ctx -&gt; {
            requestCounter.increment();
            ctx.next();
        });
    }
}
</code></pre>
<h2 data-id="heading-21">å…­ã€éƒ¨ç½²ä¸è¿ç»´</h2>
<h3 data-id="heading-22">6.1 Dockerå®¹å™¨åŒ–éƒ¨ç½²</h3>
<pre><code class="hljs language-bash" lang="bash">FROM eclipse-temurin:17-jre-alpine
WORKDIR /app
COPY target/vertx-app-1.0.0-fat.jar app.jar
EXPOSE 8080 8081
ENTRYPOINT [<span class="hljs-string">"java"</span>, <span class="hljs-string">"-jar"</span>, <span class="hljs-string">"app.jar"</span>]
</code></pre>
<h3 data-id="heading-23">6.2 Kuberneteséƒ¨ç½²é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">vertx-app</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">vertx-app</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">vertx-app</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">vertx-app</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">vertx-app:1.0.0</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8080</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8081</span>
        <span class="hljs-attr">resources:</span>
          <span class="hljs-attr">requests:</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">"512Mi"</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">"250m"</span>
          <span class="hljs-attr">limits:</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">"1Gi"</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>
        <span class="hljs-attr">livenessProbe:</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/health</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">30</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
</code></pre>
<h2 data-id="heading-24">ä¸ƒã€æ€»ç»“</h2>
<p>Vert.xä½œä¸ºä¸€ä¸ªç°ä»£åŒ–çš„å“åº”å¼æ¡†æ¶ï¼Œé€šè¿‡äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡I/Oçš„è®¾è®¡ï¼Œä¸ºæ„å»ºé«˜æ€§èƒ½ã€å¯æ‰©å±•çš„åˆ†å¸ƒå¼ç³»ç»Ÿæä¾›äº†å¼ºå¤§æ”¯æŒã€‚æœ¬æ–‡é€šè¿‡å®Œæ•´çš„å®æˆ˜é¡¹ç›®å±•ç¤ºäº†ï¼š</p>
<ol>
<li><strong>Vert.xæ ¸å¿ƒæ¦‚å¿µçš„å®é™…åº”ç”¨</strong>ï¼šåŒ…æ‹¬Verticleã€Event Busã€å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹</li>
<li><strong>å®Œæ•´é¡¹ç›®æ¶æ„</strong>ï¼šä»APIç½‘å…³åˆ°å®æ—¶æ•°æ®å¤„ç†å†åˆ°WebSocketæ¨é€</li>
<li><strong>æœ€ä½³å®è·µ</strong>ï¼šé”™è¯¯å¤„ç†ã€é…ç½®ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–</li>
<li><strong>ç”Ÿäº§å°±ç»ªç‰¹æ€§</strong>ï¼šé›†ç¾¤ã€ç›‘æ§ã€å®¹å™¨åŒ–éƒ¨ç½²</li>
</ol>
<p>Vert.xçš„å­¦ä¹ æ›²çº¿å¯èƒ½è¾ƒé™¡å³­ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¹ æƒ¯ä¼ ç»ŸåŒæ­¥ç¼–ç¨‹çš„å¼€å‘è€…ã€‚ä½†ä¸€æ—¦æŒæ¡å…¶å¼‚æ­¥ç¼–ç¨‹èŒƒå¼ï¼Œå°±èƒ½æ„å»ºå‡ºé«˜æ€§èƒ½ã€å¯æ‰©å±•çš„ç°ä»£åŒ–åº”ç”¨ç³»ç»Ÿã€‚å»ºè®®ä»ç®€å•çš„HTTPæœåŠ¡å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°äº‹ä»¶æ€»çº¿ã€é›†ç¾¤ç­‰é«˜çº§ç‰¹æ€§ï¼Œæœ€ç»ˆæ„å»ºå®Œæ•´çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vert.xä¸ä¼ ç»ŸSpringæ¡†æ¶åœ¨æ€§èƒ½ã€å¹¶å‘å¤„ç†æ–¹é¢æœ‰å“ªäº›å·®å¼‚]]></title>    <link>https://juejin.cn/post/7588095884069961728</link>    <guid>https://juejin.cn/post/7588095884069961728</guid>    <pubDate>2025-12-27T14:21:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884069961728" data-draft-id="7588004601393807394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vert.xä¸ä¼ ç»ŸSpringæ¡†æ¶åœ¨æ€§èƒ½ã€å¹¶å‘å¤„ç†æ–¹é¢æœ‰å“ªäº›å·®å¼‚"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:21:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vert.xä¸ä¼ ç»ŸSpringæ¡†æ¶åœ¨æ€§èƒ½ã€å¹¶å‘å¤„ç†æ–¹é¢æœ‰å“ªäº›å·®å¼‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:21:45.000Z" title="Sat Dec 27 2025 14:21:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Vert.x å’Œ Spring æ¡†æ¶åœ¨æ€§èƒ½ä¸å¹¶å‘å¤„ç†ä¸Šçš„å·®å¼‚ï¼Œæ ¹æºåœ¨äºå®ƒä»¬æˆªç„¶ä¸åŒçš„è®¾è®¡å“²å­¦å’Œæ¶æ„æ¨¡å‹ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼Œæ–¹ä¾¿ä½ å¿«é€ŸæŠŠæ¡è¦ç‚¹ã€‚</p>



































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th>Vert.x</th><th>Spring (ä¼ ç»Ÿé˜»å¡æ¨¡å¼)</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒæ¶æ„</strong></td><td>äº‹ä»¶é©±åŠ¨ã€éé˜»å¡ I/O (åŸºäº Netty)</td><td>åŸºäº Servlet å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰çš„çº¿ç¨‹æ± æ¨¡å‹</td></tr><tr><td><strong>å¹¶å‘æ¨¡å‹</strong></td><td><strong>äº‹ä»¶å¾ªç¯ (Event Loop)</strong> ï¼Œå°‘é‡çº¿ç¨‹å¤„ç†æµ·é‡è¿æ¥</td><td><strong>â€œä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹â€ (Thread-per-Request)</strong></td></tr><tr><td><strong>æ€§èƒ½ç‰¹ç‚¹</strong></td><td><strong>é«˜ååã€ä½å»¶è¿Ÿ</strong>ï¼Œæ“…é•¿å¤„ç†<strong>å¤§é‡å¹¶å‘é•¿è¿æ¥</strong></td><td>åœ¨å¤æ‚ä¸šåŠ¡é€»è¾‘å’Œ<strong>CPUå¯†é›†å‹</strong>ä»»åŠ¡ä¸­è¡¨ç°ç¨³å¥</td></tr><tr><td><strong>èµ„æºæ¶ˆè€—</strong></td><td>è½»é‡çº§ï¼Œèµ„æºå ç”¨å°‘ï¼Œæ‰©å±•æ€§å¼º</td><td>çº¿ç¨‹æ± å’Œç»„ä»¶å †æ ˆå¸¦æ¥ç›¸å¯¹è¾ƒé«˜çš„å†…å­˜å¼€é”€</td></tr><tr><td><strong>ç¼–ç¨‹èŒƒå¼</strong></td><td>å¼‚æ­¥å›è°ƒã€Future/Promiseã€å“åº”å¼ç¼–ç¨‹</td><td>åŒæ­¥é˜»å¡ï¼Œæ›´ç¬¦åˆç›´è§‰ï¼Œæ˜“äºè°ƒè¯•</td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ”§ ç†è§£å·®å¼‚çš„æ ¹æº</h3>
<p>è¡¨æ ¼ä¸­çš„å¯¹æ¯”æºäºä¸¤è€…æ ¹æœ¬çš„è®¾è®¡å“²å­¦ä¸åŒï¼š</p>
<ul>
<li><strong>Vert.x çš„äº‹ä»¶å¾ªç¯æ¨¡å‹</strong>ï¼šVert.x çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª <strong>äº‹ä»¶å¾ªç¯çº¿ç¨‹</strong>ã€‚å®ƒä¸ä¼šä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºæ–°çº¿ç¨‹ï¼Œè€Œæ˜¯å°†I/Oæ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰æ³¨å†Œä¸ºäº‹ä»¶ã€‚å½“æ“ä½œåœ¨åå°å®Œæˆæ—¶ï¼Œå›è°ƒå‡½æ•°è¢«è§¦å‘ã€‚è¿™ä½¿å¾—å®ƒèƒ½å¤Ÿç”¨<strong>æå°‘çš„çº¿ç¨‹æ”¯æ’‘æé«˜çš„å¹¶å‘è¿æ¥</strong>ï¼Œéå¸¸é€‚åˆI/Oå¯†é›†å‹åº”ç”¨ã€‚</li>
<li><strong>Spring çš„çº¿ç¨‹æ± æ¨¡å‹</strong>ï¼šä¼ ç»Ÿ Spring MVC é»˜è®¤ä½¿ç”¨åŒæ­¥æ¨¡å‹ã€‚æ¯ä¸ªè¯·æ±‚éƒ½ä¼šå ç”¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ã€‚å¦‚æœè¯·æ±‚å› ç­‰å¾…æ•°æ®åº“å“åº”è€Œé˜»å¡ï¼Œè¿™ä¸ªçº¿ç¨‹å°±è¢«å ç”¨ï¼Œæ— æ³•å¤„ç†å…¶ä»–è¯·æ±‚ã€‚å½“å¹¶å‘è¯·æ±‚æ•°è¶…è¿‡çº¿ç¨‹æ± å¤§å°æ—¶ï¼Œæ–°è¯·æ±‚å¿…é¡»æ’é˜Ÿç­‰å¾…ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ã€‚</li>
</ul>
<h3 data-id="heading-1">ğŸ“Š å…³é”®æ€§èƒ½æ•°æ®å‚è€ƒ</h3>
<p>å…·ä½“çš„æ€§èƒ½æµ‹è¯•æ•°æ®èƒ½è®©ä½ æœ‰æ›´ç›´è§‚çš„æ„Ÿå—ï¼š</p>
<ul>
<li><strong>REST API è¯·æ±‚å¤„ç†</strong>ï¼šåœ¨åŸºå‡†æµ‹è¯•ä¸­ï¼ŒVert.x çš„è¯·æ±‚å¤„ç†é€Ÿç‡è¢«è¯å®å¯ä»¥è¾¾åˆ° <strong>Spring Boot çš„ 2 å€</strong>ã€‚å¦ä¸€é¡¹æµ‹è¯•ç”šè‡³æ˜¾ç¤ºå…¶æ€§èƒ½å¯è¾¾ Spring çš„ <strong>9 å€</strong>ã€‚</li>
<li><strong>é«˜å¹¶å‘æ··åˆæŸ¥è¯¢</strong>ï¼šåœ¨ TechEmpower æ€§èƒ½åŸºå‡†æµ‹è¯•ä¸­ï¼ŒVert.x çš„ç»¼åˆæ’åéå¸¸é å‰ï¼Œå±•ç°å‡ºæå¼ºçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</li>
<li><strong>å®é™…åº”ç”¨æµ‹è¯•</strong>ï¼šæœ‰å¼€å‘è€…é€šè¿‡æ¨¡æ‹Ÿé«˜å¹¶å‘åœºæ™¯å‘ç°ï¼Œé‡‡ç”¨ Vert.x æ¶æ„çš„ç³»ç»Ÿååé‡å¯è¾¾ä¼ ç»Ÿ Spring Boot æ¶æ„çš„ <strong>3.3 å€</strong>ã€‚</li>
</ul>
<h3 data-id="heading-2">ğŸš€ Spring çš„å“åº”å¼æ–¹æ¡ˆï¼šSpring WebFlux</h3>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒSpring æ¡†æ¶ä¹Ÿæä¾›äº†å“åº”å¼è§£å†³æ–¹æ¡ˆæ¥åº”å¯¹é«˜å¹¶å‘åœºæ™¯ï¼Œå³ <strong>Spring WebFlux</strong>ã€‚å®ƒåŒæ ·åŸºäºéé˜»å¡æ¨¡å‹ï¼Œåº•å±‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Nettyï¼Œæ—¨åœ¨ä¸ Vert.x ç«äº‰ã€‚ä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚æœé¡¹ç›®ä¾èµ–äº†ä¼—å¤šåŒæ­¥çš„ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ä¼ ç»Ÿçš„ JPA æˆ– MyBatisï¼‰ï¼Œæ•´ä¸ªè°ƒç”¨é“¾å¯èƒ½æ— æ³•ä¿æŒéé˜»å¡ï¼Œä»è€Œæ— æ³•å®Œå…¨å‘æŒ¥ WebFlux çš„å¨åŠ›ã€‚</p>
<h3 data-id="heading-3">ğŸ’¡ å¦‚ä½•æ ¹æ®åœºæ™¯åšé€‰æ‹©</h3>
<p>äº†è§£äº†è¿™äº›å·®å¼‚å’Œæ•°æ®åï¼Œä½ çš„æŠ€æœ¯é€‰å‹æ€è·¯å°±ä¼šæ¸…æ™°å¾ˆå¤šï¼š</p>
<ul>
<li>
<p><strong>ä¼˜å…ˆé€‰æ‹© Vert.x çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li><strong>é«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„å®æ—¶æœåŠ¡</strong>ï¼šå¦‚å®æ—¶èŠå¤©ã€æ¶ˆæ¯æ¨é€ã€æ¸¸æˆæœåŠ¡å™¨ã€ç‰©è”ç½‘ï¼ˆIoTï¼‰æ•°æ®é‡‡é›†ç­‰ã€‚</li>
<li><strong>API ç½‘å…³æˆ–ä»£ç†æœåŠ¡</strong>ï¼šéœ€è¦é«˜æ•ˆè·¯ç”±å¤§é‡ç½‘ç»œè¯·æ±‚çš„åœºæ™¯ã€‚</li>
<li><strong>å›¢é˜Ÿç†Ÿæ‚‰å“åº”å¼ç¼–ç¨‹èŒƒå¼</strong>ï¼Œä¸”æŠ€æœ¯æ ˆèƒ½ä¿è¯å…¨é“¾è·¯å¼‚æ­¥ï¼ˆä¾‹å¦‚ä½¿ç”¨å¼‚æ­¥æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¼˜å…ˆé€‰æ‹© Spring Boot çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿçš„ä¼ä¸šçº§åº”ç”¨æˆ–éœ€è¦å¿«é€Ÿäº¤ä»˜çš„ä¸šåŠ¡ç³»ç»Ÿ</strong>ï¼šSpring Boot çš„å¼€ç®±å³ç”¨ã€æä½³çš„å¼€å‘æ•ˆç‡å’Œå¼ºå¤§çš„ç”Ÿæ€æ˜¯å·¨å¤§ä¼˜åŠ¿ã€‚</li>
<li><strong>æ•°æ®å¯†é›†å‹åº”ç”¨</strong>ï¼šæ¶‰åŠå¤æ‚äº‹åŠ¡ç®¡ç†ã€å¤šç§æ•°æ®æºé›†æˆï¼Œéœ€è¦å¼ºå¤§ ORMï¼ˆå¦‚ Hibernateï¼‰æ”¯æŒçš„åœºæ™¯ã€‚</li>
<li><strong>éœ€è¦ä¸åºå¤§çš„ Spring ç”Ÿæ€ç³»ç»Ÿï¼ˆå¦‚ Spring Security, Spring Cloud, Spring Dataï¼‰æ·±åº¦é›†æˆ</strong>çš„é¡¹ç›®ã€‚</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vert.xä¸Springæ¡†æ¶ï¼šå¼€å‘æ•ˆç‡ä¸å›¢é˜Ÿå­¦ä¹ æˆæœ¬æ·±åº¦å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7588095884069994496</link>    <guid>https://juejin.cn/post/7588095884069994496</guid>    <pubDate>2025-12-27T14:26:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884069994496" data-draft-id="7588004601393823778" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vert.xä¸Springæ¡†æ¶ï¼šå¼€å‘æ•ˆç‡ä¸å›¢é˜Ÿå­¦ä¹ æˆæœ¬æ·±åº¦å¯¹æ¯”"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:26:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vert.xä¸Springæ¡†æ¶ï¼šå¼€å‘æ•ˆç‡ä¸å›¢é˜Ÿå­¦ä¹ æˆæœ¬æ·±åº¦å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:26:03.000Z" title="Sat Dec 27 2025 14:26:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šé€‰æ‹©æ¡†æ¶çš„åŒé‡è€ƒé‡</h2>
<p>åœ¨æŠ€æœ¯é€‰å‹è¿‡ç¨‹ä¸­ï¼Œæ€§èƒ½æ•°æ®åªæ˜¯å†³ç­–çš„ä¸€ä¸ªæ–¹é¢ï¼Œè€Œ<strong>å¼€å‘æ•ˆç‡</strong>å’Œ<strong>å›¢é˜Ÿå­¦ä¹ æˆæœ¬</strong>å¾€å¾€å¯¹é¡¹ç›®æˆåŠŸæœ‰ç€æ›´ç›´æ¥çš„å½±å“ã€‚Vert.xå’ŒSpringä»£è¡¨äº†ä¸¤ç§æˆªç„¶ä¸åŒçš„å¼€å‘å“²å­¦ï¼Œè¿™äº›å·®å¼‚ç›´æ¥ä½“ç°åœ¨å¼€å‘ä½“éªŒå’Œä¸Šæ‰‹éš¾åº¦ä¸Šã€‚æœ¬æ–‡å°†æ·±å…¥åˆ†æè¿™ä¸¤å¤§æ¡†æ¶åœ¨å¼€å‘æ•ˆç‡å’Œå­¦ä¹ æˆæœ¬æ–¹é¢çš„å…·ä½“å·®å¼‚ï¼Œå¸®åŠ©å›¢é˜Ÿåšå‡ºæ›´åˆç†çš„æŠ€æœ¯å†³ç­–ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ç¼–ç¨‹æ¨¡å‹å¯¹æ¯”ï¼šå¼‚æ­¥ä¸åŒæ­¥çš„æœ¬è´¨å·®å¼‚</h2>
<h3 data-id="heading-2">1.1 Vert.xçš„äº‹ä»¶é©±åŠ¨æ¨¡å‹</h3>
<p>Vert.xé‡‡ç”¨<strong>å¼‚æ­¥éé˜»å¡</strong>æ¶æ„ï¼ŒåŸºäºäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰æœºåˆ¶ã€‚è¿™ç§æ¨¡å‹è¦æ±‚å¼€å‘è€…é‡‡ç”¨å›è°ƒã€Promiseæˆ–å“åº”å¼ç¼–ç¨‹é£æ ¼ï¼Œä»£ç æ‰§è¡Œæµç¨‹ä¸å†æ˜¯ä¼ ç»Ÿçš„é¡ºåºæ‰§è¡Œã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// Vert.xçš„å¼‚æ­¥ç¼–ç¨‹ç¤ºä¾‹</span>
vertx.<span class="hljs-title function_ invoke__">createHttpServer</span>()
    .<span class="hljs-title function_ invoke__">requestHandler</span>(req <span class="hljs-punctuation">-&gt;</span> {
        <span class="hljs-comment">// å¼‚æ­¥å¤„ç†è¯·æ±‚</span>
        <span class="hljs-title function_ invoke__">someAsyncOperation</span>(result <span class="hljs-punctuation">-&gt;</span> {
            req.<span class="hljs-title function_ invoke__">response</span>().<span class="hljs-title function_ invoke__">end</span>(<span class="hljs-string">"Result: "</span> + result);
        });
    })
    .<span class="hljs-title function_ invoke__">listen</span>(<span class="hljs-number">8080</span>);
</code></pre>
<p>è¿™ç§æ¨¡å‹çš„ä¼˜åŠ¿åœ¨äº<strong>é«˜å¹¶å‘æ€§èƒ½</strong>ï¼Œä½†éœ€è¦å¼€å‘è€…è½¬å˜æ€ç»´æ–¹å¼ï¼Œä»"å‘½ä»¤å¼"è½¬å‘"å“åº”å¼"ã€‚</p>
<h3 data-id="heading-3">1.2 Springçš„ä¼ ç»ŸåŒæ­¥æ¨¡å‹</h3>
<p>Spring Booté»˜è®¤é‡‡ç”¨ç†Ÿæ‚‰çš„<strong>åŒæ­¥é˜»å¡å¼</strong>ç¼–ç¨‹æ¨¡å‹ï¼Œæ›´ç¬¦åˆäººç±»çš„çº¿æ€§æ€ç»´ä¹ æƒ¯ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// Springçš„åŒæ­¥ç¼–ç¨‹ç¤ºä¾‹</span>
<span class="hljs-variable">@RestController</span>
public class UserController {
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/users/{id}"</span>)
    public User <span class="hljs-built_in">getUser</span>(<span class="hljs-variable">@PathVariable</span> String id) {
        <span class="hljs-comment">// åŒæ­¥é˜»å¡ç›´åˆ°è¿”å›ç»“æœ</span>
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.findById</span>(id);
    }
}
</code></pre>
<p>è¿™ç§æ¨¡å‹è™½ç„¶åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹èµ„æºæ•ˆç‡è¾ƒä½ï¼Œä½†<strong>é€»è¾‘æ¸…æ™°</strong>ï¼Œæ˜“äºç†è§£å’Œè°ƒè¯•ã€‚</p>
<h2 data-id="heading-4">äºŒã€å¼€å‘æ•ˆç‡ç»¼åˆåˆ†æ</h2>
<h3 data-id="heading-5">2.1 Spring Bootçš„å¼€å‘æ•ˆç‡ä¼˜åŠ¿</h3>
<p>Spring Bootåœ¨å¼€å‘æ•ˆç‡æ–¹é¢å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼Œä¸»è¦ä½“ç°åœ¨ï¼š</p>
<ul>
<li><strong>å¼€ç®±å³ç”¨</strong>ï¼šé€šè¿‡è‡ªåŠ¨é…ç½®å‡å°‘äº†å¤§é‡çš„æ ·æ¿ä»£ç </li>
<li><strong>å¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿ</strong>ï¼šé›†æˆäº†Springå…¨å®¶æ¡¶ï¼ˆSpring Dataã€Securityã€Cloudç­‰ï¼‰ï¼Œæä¾›äº†ä¼ä¸šçº§åº”ç”¨æ‰€éœ€çš„å…¨å¥—è§£å†³æ–¹æ¡ˆ</li>
<li><strong>ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹é›†æˆ</strong>ï¼šå‡ ä¹æ‰€æœ‰å¸¸è§éœ€æ±‚éƒ½æœ‰æˆç†Ÿçš„Springé›†æˆæ–¹æ¡ˆ</li>
</ul>
<p>è¿™äº›ç‰¹æ€§ä½¿å¾—Spring Bootç‰¹åˆ«é€‚åˆ<strong>å¿«é€Ÿè¿­ä»£</strong>çš„ä¼ ç»Ÿä¼ä¸šçº§åº”ç”¨å¼€å‘ã€‚</p>
<h3 data-id="heading-6">2.2 Vert.xçš„å¼€å‘æ•ˆç‡ç‰¹ç‚¹</h3>
<p>Vert.xçš„å¼€å‘æ•ˆç‡ç‰¹ç‚¹æ›´ä¸ºå¤æ‚ï¼š</p>
<ul>
<li><strong>åˆæœŸå­¦ä¹ æ›²çº¿è¾ƒé™¡</strong>ï¼šå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹éœ€è¦é€‚åº”æœŸ</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šVert.xçš„ç»„ä»¶ä¸ºæ¾è€¦åˆï¼Œä¾¿äºå®šåˆ¶å’Œæ‰©å±•</li>
<li><strong>è½»é‡çº§</strong>ï¼šæ ¸å¿ƒåº“å°å·§çµæ´»ï¼Œæ— éœ€å¤æ‚é…ç½®å³å¯è¿è¡Œ</li>
</ul>
<p>ä¸€æ—¦å›¢é˜ŸæŒæ¡äº†å¼‚æ­¥ç¼–ç¨‹èŒƒå¼ï¼ŒVert.xåœ¨æ„å»º<strong>è½»é‡çº§å¾®æœåŠ¡</strong>å’Œ<strong>äº‘åŸç”Ÿåº”ç”¨</strong>æ—¶èƒ½æä¾›é«˜æ•ˆçš„å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€å­¦ä¹ æˆæœ¬æ·±åº¦è§£æ</h2>
<h3 data-id="heading-8">3.1 Springæ¡†æ¶çš„å­¦ä¹ æ›²çº¿</h3>
<p>Springè™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†å…¶<strong>æ¦‚å¿µå¤æ‚åº¦é«˜</strong>ï¼Œå­¦ä¹ æ›²çº¿é™¡å³­ã€‚æ–°æ‰‹éœ€è¦æŒæ¡ä¾èµ–æ³¨å…¥ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ã€å„ç§é…ç½®æ–¹å¼ç­‰æ¦‚å¿µã€‚ç‰¹åˆ«æ˜¯åœ¨å¾®æœåŠ¡åœºæ™¯ä¸‹ï¼ŒSpringéœ€è¦å¼•å…¥å¤§é‡ç»„ä»¶ï¼ˆå¦‚æ³¨å†Œä¸­å¿ƒã€é…ç½®ä¸­å¿ƒç­‰ï¼‰ï¼Œå¢åŠ äº†å­¦ä¹ æˆæœ¬ã€‚</p>
<p>ä¸è¿‡ï¼ŒSpringæ‹¥æœ‰<strong>åºå¤§çš„ç¤¾åŒºæ”¯æŒ</strong>å’Œ<strong>ä¸°å¯Œçš„å­¦ä¹ èµ„æº</strong>ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†å­¦ä¹ éš¾åº¦ã€‚</p>
<h3 data-id="heading-9">3.2 Vert.xçš„å­¦ä¹ æŒ‘æˆ˜</h3>
<p>Vert.xè¯ç”Ÿäºäº‘è®¡ç®—æ—¶ä»£ï¼Œè®¾è®¡ä¸Šæ›´åŠ ç®€æ´ï¼Œæ¦‚å¿µç²¾ç®€ã€‚ä½†å®ƒé¢ä¸´çš„æŒ‘æˆ˜åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¼‚æ­¥ç¼–ç¨‹æ€ç»´</strong>ï¼šéœ€è¦é€‚åº”å›è°ƒåœ°ç‹±ã€å¼‚æ­¥æµæ§åˆ¶ç­‰æ¦‚å¿µ</li>
<li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šå¼‚æ­¥è°ƒç”¨é“¾ä½¿é—®é¢˜å®šä½å’Œè°ƒè¯•æ›´åŠ å¤æ‚</li>
<li><strong>ç”Ÿæ€ç›¸å¯¹è¾ƒå°</strong>ï¼šè™½ç„¶Vert.xç”Ÿæ€å·²è¦†ç›–Webå¼€å‘ã€æ•°æ®è®¿é—®ã€å¾®æœåŠ¡ç­‰é¢†åŸŸï¼Œä½†ç›¸æ¯”Springä»ä¸å¤Ÿæˆç†Ÿ</li>
</ul>
<h2 data-id="heading-10">å››ã€å›¢é˜Ÿé€‚é…æ€§è€ƒé‡</h2>
<h3 data-id="heading-11">4.1 å›¢é˜ŸæŠ€æœ¯èƒŒæ™¯çš„å½±å“</h3>
<p>å›¢é˜Ÿç°æœ‰æŠ€æœ¯æ ˆå¯¹æ¡†æ¶é€‰æ‹©æœ‰é‡è¦å½±å“ï¼š</p>
<ul>
<li><strong>ä¼ ç»ŸJavaå›¢é˜Ÿ</strong>ï¼šç†Ÿæ‚‰Springçš„å›¢é˜Ÿç»§ç»­ä½¿ç”¨Springé€šå¸¸æ•ˆç‡æ›´é«˜</li>
<li><strong>å…¨æ ˆæˆ–Node.jsèƒŒæ™¯å›¢é˜Ÿ</strong>ï¼šå¯¹äº‹ä»¶é©±åŠ¨æ¨¡å‹æœ‰ç»éªŒçš„å›¢é˜Ÿæ›´å®¹æ˜“ä¸Šæ‰‹Vert.x</li>
<li><strong>å¾®æœåŠ¡ä¸“é—¨å›¢é˜Ÿ</strong>ï¼šVert.xçš„è½»é‡æ€§å’Œé«˜æ€§èƒ½ä½¿å…¶åœ¨å¾®æœåŠ¡æ¶æ„ä¸­å…·æœ‰ä¼˜åŠ¿</li>
</ul>
<h3 data-id="heading-12">4.2 é¡¹ç›®ç±»å‹ä¸è§„æ¨¡è€ƒé‡</h3>
<ul>
<li><strong>å¤§å‹å¤æ‚ä¼ä¸šåº”ç”¨</strong>ï¼šSpringçš„å…¨é¢åŠŸèƒ½å’Œç¨³å®šæ€§æ›´é€‚åˆ</li>
<li><strong>é«˜å¹¶å‘ã€ä½å»¶è¿Ÿåº”ç”¨</strong>ï¼šVert.xçš„æ€§èƒ½ä¼˜åŠ¿æ˜æ˜¾</li>
<li><strong>åˆåˆ›é¡¹ç›®æˆ–åŸå‹å¼€å‘</strong>ï¼šSpring Bootçš„å¿«é€Ÿå¼€å‘èƒ½åŠ›æœ‰ä¼˜åŠ¿</li>
</ul>
<h2 data-id="heading-13">äº”ã€å®é™…åº”ç”¨ä¸­çš„é€‰æ‹©ç­–ç•¥</h2>
<h3 data-id="heading-14">5.1 æ··åˆä½¿ç”¨æ¨¡å¼</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥è€ƒè™‘<strong>ç»“åˆä½¿ç”¨Vert.xå’ŒSpring</strong>ï¼Œå–é•¿è¡¥çŸ­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Spring Bootå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ŒVert.xå¤„ç†é«˜å¹¶å‘I/Oæ“ä½œ</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HybridService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">BusinessService</span> businessService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">handleHighConcurrency</span>(<span class="hljs-params"/>) {
        vertx.<span class="hljs-title function_">executeBlocking</span>(promise -&gt; {
            <span class="hljs-comment">// ä½¿ç”¨Vert.xå¤„ç†é«˜å¹¶å‘I/O</span>
            <span class="hljs-title class_">Object</span> result = businessService.<span class="hljs-title function_">process</span>();
            promise.<span class="hljs-title function_">complete</span>(result);
        }, result -&gt; {
            <span class="hljs-comment">// å¤„ç†ç»“æœ</span>
        });
    }
}
</code></pre>
<h3 data-id="heading-15">5.2 æ¸è¿›å¼é‡‡ç”¨ç­–ç•¥</h3>
<p>å¯¹äºè€ƒè™‘è½¬å‘Vert.xçš„å›¢é˜Ÿï¼Œå¯ä»¥é‡‡ç”¨æ¸è¿›å¼ç­–ç•¥ï¼š</p>
<ol>
<li><strong>è¯•ç‚¹é¡¹ç›®</strong>ï¼šé€‰æ‹©éæ ¸å¿ƒä½†é«˜å¹¶å‘çš„æœåŠ¡ä½œä¸ºè¯•ç‚¹</li>
<li><strong>å›¢é˜ŸåŸ¹è®­</strong>ï¼šé€æ­¥åŸ¹å…»å›¢é˜Ÿçš„å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›</li>
<li><strong>æ··åˆæ¶æ„</strong>ï¼šåœ¨ç°æœ‰Springåº”ç”¨ä¸­é€æ­¥å¼•å…¥Vert.xç»„ä»¶</li>
</ol>
<h2 data-id="heading-16">å…­ã€æœªæ¥å‘å±•è¶‹åŠ¿</h2>
<h3 data-id="heading-17">6.1 å“åº”å¼ç¼–ç¨‹çš„å…´èµ·</h3>
<p>éšç€äº‘åŸç”Ÿå’Œå¾®æœåŠ¡æ¶æ„çš„æ™®åŠï¼Œå“åº”å¼ç¼–ç¨‹ç†å¿µæ­£åœ¨ä¸»æµåŒ–ã€‚Springä¹Ÿæ¨å‡ºäº†<strong>WebFlux</strong>ä½œä¸ºå“åº”å¼è§£å†³æ–¹æ¡ˆï¼Œè¿™åæ˜ äº†è¡Œä¸šå‘å¼‚æ­¥éé˜»å¡æ¨¡å¼å‘å±•çš„è¶‹åŠ¿ã€‚</p>
<h3 data-id="heading-18">6.2 å…±å­˜è€Œéå–ä»£</h3>
<p>Vert.xå’ŒSpringåœ¨æœªæ¥å¯èƒ½ä¼šæ˜¯<strong>å…±å­˜è€Œéå–ä»£</strong>çš„å…³ç³»ã€‚Springåœ¨ä¼ä¸šçº§åº”ç”¨å’Œä¼ ç»ŸWebå¼€å‘ä¸­ä¾ç„¶æœ‰å¼ºå¤§çš„ç”Ÿå‘½åŠ›ï¼Œè€ŒVert.xåˆ™åœ¨éœ€è¦é«˜å¹¶å‘å’Œä½å»¶è¿Ÿçš„åœºæ™¯ä¸­è¡¨ç°å‡ºè‰²ã€‚</p>
<h2 data-id="heading-19">ç»“è®ºï¼šå¹³è¡¡æ€§èƒ½ä¸å¼€å‘æ•ˆç‡</h2>
<p>Vert.xå’ŒSpringåœ¨å¼€å‘æ•ˆç‡å’Œå­¦ä¹ æˆæœ¬æ–¹é¢çš„å·®å¼‚ï¼Œåæ˜ äº†ä¸¤ç§ä¸åŒçš„è®¾è®¡å“²å­¦å’Œé€‚ç”¨åœºæ™¯ã€‚é€‰æ‹©æ¡†æ¶æ—¶ï¼Œå›¢é˜Ÿéœ€è¦ç»¼åˆè€ƒè™‘ï¼š</p>
<ol>
<li><strong>é¡¹ç›®éœ€æ±‚å’Œæ€§èƒ½è¦æ±‚</strong>ï¼šé«˜å¹¶å‘åœºæ™¯ä¼˜å…ˆè€ƒè™‘Vert.xï¼Œå¤æ‚ä¼ä¸šçº§åº”ç”¨å€¾å‘Spring</li>
<li><strong>å›¢é˜ŸæŠ€æœ¯èƒŒæ™¯</strong>ï¼šå›¢é˜Ÿå¯¹å¼‚æ­¥ç¼–ç¨‹çš„æ¥å—åº¦å’Œå­¦ä¹ èƒ½åŠ›</li>
<li><strong>é¡¹ç›®å‘¨æœŸå’Œèµ„æº</strong>ï¼šå¿«é€Ÿè¿­ä»£é¡¹ç›®å¯èƒ½æ›´é€‚åˆSpringï¼Œæ€§èƒ½æ•æ„Ÿå‹é¡¹ç›®å¯è€ƒè™‘Vert.x</li>
<li><strong>é•¿æœŸç»´æŠ¤è€ƒé‡</strong>ï¼šæ¡†æ¶çš„ç¨³å®šæ€§ã€ç”Ÿæ€æˆç†Ÿåº¦å’Œç¤¾åŒºæ”¯æŒ</li>
</ol>
<p>æœ€ç»ˆï¼Œæ²¡æœ‰ç»å¯¹çš„ä¼˜åŠ£ï¼Œåªæœ‰<strong>é€‚åˆç‰¹å®šåœºæ™¯å’Œå›¢é˜Ÿçš„é€‰æ‹©</strong>ã€‚æ˜æ™ºçš„åšæ³•æ˜¯æ ¹æ®å…·ä½“éœ€æ±‚ï¼Œå¯èƒ½ç”šè‡³ç»“åˆä¸¤è€…ä¼˜åŠ¿ï¼Œæ„å»ºæœ€é€‚åˆçš„æŠ€æœ¯æ ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChainå­¦ä¹ ï¼šMemoryå®æˆ˜â€”â€”è®©ä½ çš„å¤§æ¨¡å‹è®°ä½ä½ ]]></title>    <link>https://juejin.cn/post/7588084804093460518</link>    <guid>https://juejin.cn/post/7588084804093460518</guid>    <pubDate>2025-12-27T14:35:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804093460518" data-draft-id="7587779957675327539" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChainå­¦ä¹ ï¼šMemoryå®æˆ˜â€”â€”è®©ä½ çš„å¤§æ¨¡å‹è®°ä½ä½ "/> <meta itemprop="keywords" content="å‰ç«¯,LangChain,JavaScript"/> <meta itemprop="datePublished" content="2025-12-27T14:35:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—å±±å®‰"/> <meta itemprop="url" content="https://juejin.cn/user/1795929588117962"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChainå­¦ä¹ ï¼šMemoryå®æˆ˜â€”â€”è®©ä½ çš„å¤§æ¨¡å‹è®°ä½ä½ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1795929588117962/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—å±±å®‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:35:01.000Z" title="Sat Dec 27 2025 14:35:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨ç ”ç©¶æ€ä¹ˆè®©å¤§æ¨¡å‹çœŸæ­£â€œè®°ä½â€ç”¨æˆ·è¯´è¿‡çš„è¯ï¼Œè€Œä¸æ˜¯æ¯æ¬¡å¯¹è¯éƒ½åƒå¤±å¿†äº†ä¸€æ ·ä»å¤´æ¥è¿‡ä»Šå¤©å°±æŠŠæˆ‘çš„å­¦ä¹ ç¬”è®°ã€ä»£ç ç¤ºä¾‹ã€è¸©å‘å¿ƒå¾—å…¨éƒ¨æ•´åˆèµ·æ¥ï¼Œå†™æˆè¿™ç¯‡è¶…è¯¦ç»†çš„å®æˆ˜æŒ‡å—ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« çš„ç›®æ ‡å¾ˆç®€å•ï¼šè®©ä½ çœ‹å®Œå°±èƒ½ä¸Šæ‰‹ï¼Œåœ¨è‡ªå·±çš„é¡¹ç›®é‡Œå¿«é€ŸåŠ ä¸Šâ€œè®°å¿†â€åŠŸèƒ½ã€‚å’±ä»¬ä»æœ€åŸºç¡€çš„æ— çŠ¶æ€è°ƒç”¨å¼€å§‹ï¼Œä¸€æ­¥æ­¥æ·±å…¥åˆ°å¤šè½®å¯¹è¯ã€Token æ§åˆ¶ã€å¤šç”¨æˆ·åœºæ™¯ã€æŒä¹…åŒ–å­˜å‚¨ï¼Œæœ€åå†èŠèŠç”Ÿäº§ç¯å¢ƒçš„æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆ LLM é»˜è®¤æ²¡æœ‰è®°å¿†ï¼Ÿ</h2>
<p>æ‰€æœ‰å¤§æ¨¡å‹çš„ API è°ƒç”¨ï¼ˆOpenAIã€DeepSeekã€Claudeã€Gemini ç­‰ï¼‰æœ¬è´¨ä¸Šéƒ½æ˜¯<strong>æ— çŠ¶æ€</strong>çš„ã€‚æ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ¨¡å‹å®Œå…¨ä¸çŸ¥é“ä½ ä¸Šä¸€æ¬¡è¯´äº†ä»€ä¹ˆã€‚</p>
<p>æ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;


<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>,
});

<span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"æˆ‘å«åé«˜ä¿Šï¼Œå–œæ¬¢æ‰“å’Œå¹³ç²¾è‹±"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res1.<span class="hljs-property">content</span>);  <span class="hljs-comment">// æ­£å¸¸å›å¤</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'///////'</span>)
<span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res2.<span class="hljs-property">content</span>);  <span class="hljs-comment">// æ¨¡å‹ï¼šï¼Ÿï¼Ÿï¼Ÿæˆ‘ä¸çŸ¥é“å•Š...</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d212d55d5c5b4b22aa7a1bfcfd8948c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767450901&amp;x-signature=RHthXGfUjqMrzaPn7tlBwDlNwNc%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬äºŒæ¬¡é—®åå­—ï¼Œæ¨¡å‹ç›´æ¥æ‡µäº†ã€‚å› ä¸ºä¸¤æ¬¡è°ƒç”¨ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³è”ã€‚</p>
<p>è¦è®©æ¨¡å‹æœ‰è®°å¿†ï¼Œæœ€åŸå§‹çš„åŠæ³•å°±æ˜¯æ‰‹åŠ¨ç»´æŠ¤ä¸€ä¸ªæ¶ˆæ¯åˆ—è¡¨ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½æŠŠå†å²å¸¦ä¸Šï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">let</span> messages = [
  { <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"æˆ‘å«åé«˜ä¿Šï¼Œå–œæ¬¢æ‰“å’Œå¹³ç²¾è‹±"</span> },
  { <span class="hljs-attr">role</span>: <span class="hljs-string">"assistant"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"å¥½çš„ï¼Œæˆ‘è®°ä½äº†ï¼"</span> },
  { <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ"</span> }
];

<span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(messages);
</code></pre>
<p>çŸ­æœŸçœ‹æ²¡é—®é¢˜ï¼Œä½†å¯¹è¯è½®æ•°ä¸€å¤šï¼Œè¿™ä¸ªåˆ—è¡¨å°±ä¼šåƒæ»šé›ªçƒä¸€æ ·è¶Šæ¥è¶Šå¤§ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>Token æ¶ˆè€—æš´æ¶¨ï¼Œæˆæœ¬é«˜</li>
<li>å®¹æ˜“è¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ï¼ˆæ¯”å¦‚ 128k token ä¸Šé™ï¼‰</li>
<li>Prompt ç»“æ„å®¹æ˜“å†™ä¹±</li>
</ul>
<p>LangChain çš„ Memory æ¨¡å—å°±æ˜¯ä¸ºäº†ä¼˜é›…åœ°è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„ã€‚</p>
<h2 data-id="heading-2">äºŒã€Memory çš„æ ¸å¿ƒï¼šRunnableWithMessageHistory</h2>
<p>åœ¨ç°ä»£ LangChain JSï¼ˆåŸºäº LCEL æ¶æ„ï¼‰é‡Œï¼Œå®ç°è®°å¿†æœ€æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨ RunnableWithMessageHistoryã€‚å®ƒèƒ½è‡ªåŠ¨å®Œæˆï¼š</p>
<ol>
<li>æ ¹æ®ä¼šè¯ ID åŠ è½½å†å²æ¶ˆæ¯</li>
<li>æŠŠå†å²æ³¨å…¥åˆ° Prompt çš„ {history} å ä½ç¬¦</li>
<li>è°ƒç”¨æ¨¡å‹</li>
<li>æŠŠæœ¬æ¬¡ç”¨æˆ·è¾“å…¥å’Œæ¨¡å‹å›å¤è‡ªåŠ¨ä¿å­˜å›å†å²</li>
</ol>
<p>æ ¸å¿ƒä»£ç é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/prompts"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/chat_history"</span>;

<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹ï¼Œç”¨ä¸­æ–‡å‹å¥½å›å¤ã€‚"</span>],
  [<span class="hljs-string">"placeholder"</span>, <span class="hljs-string">"{history}"</span>],  <span class="hljs-comment">// å†å²æ¶ˆæ¯æ³¨å…¥ç‚¹</span>
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>],         <span class="hljs-comment">// å½“å‰ç”¨æˆ·è¾“å…¥</span>
]);

<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(model);

<span class="hljs-comment">// å¤šç”¨æˆ·å­˜å‚¨ï¼ˆç”Ÿäº§å¿…å¤‡ï¼‰</span>
<span class="hljs-keyword">const</span> messageHistories = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;string, <span class="hljs-title class_">InMemoryChatMessageHistory</span>&gt;();

<span class="hljs-keyword">const</span> chainWithHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnableWithMessageHistory</span>({
  <span class="hljs-attr">runnable</span>: chain,
  <span class="hljs-attr">getMessageHistory</span>: <span class="hljs-keyword">async</span> (sessionId) =&gt; {
    <span class="hljs-keyword">if</span> (!messageHistories.<span class="hljs-title function_">has</span>(sessionId)) {
      messageHistories.<span class="hljs-title function_">set</span>(sessionId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>());
    }
    <span class="hljs-keyword">return</span> messageHistories.<span class="hljs-title function_">get</span>(sessionId)!;
  },
  <span class="hljs-attr">inputMessagesKey</span>: <span class="hljs-string">"input"</span>,     <span class="hljs-comment">// è¾“å…¥å¯¹è±¡ä¸­çš„é”®å</span>
  <span class="hljs-attr">historyMessagesKey</span>: <span class="hljs-string">"history"</span>, <span class="hljs-comment">// prompt ä¸­çš„å ä½ç¬¦é”®å</span>
});
</code></pre>
<p>è°ƒç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">await</span> chainWithHistory.<span class="hljs-title function_">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">"æˆ‘å«åé«˜ä¿Šï¼Œå–œæ¬¢æ‰“å’Œå¹³ç²¾è‹±"</span> },
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">"user-001"</span> } }
);

<span class="hljs-keyword">await</span> chainWithHistory.<span class="hljs-title function_">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">"æˆ‘æ˜¯ï¼Ÿ"</span> },
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">"user-001"</span> } }  <span class="hljs-comment">// ç›¸åŒ sessionId æ‰æœ‰è®°å¿†</span>
);
</code></pre>
<p>ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ï¼Œæ¨¡å‹å°±èƒ½æ­£ç¡®å›ç­”â€œåé«˜ä¿Šâ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dbb5c30e39443bd939070866a4a9370~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767450901&amp;x-signature=PUl01aucZJ7IwahBOZGymWHk2Q4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">ä¸‰ã€å®Œæ•´è°ƒç”¨æµç¨‹æ·±åº¦æ‹†è§£</h2>
<p>å¾ˆå¤šæ–°æ‰‹ï¼ˆåŒ…æ‹¬æ›¾ç»çš„æˆ‘ï¼‰çœ‹åˆ°ä»£ç èƒ½è·‘ï¼Œä½†ä¸æ¸…æ¥šå†…éƒ¨åˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚ä¸‹é¢æŠŠä¸€æ¬¡ invoke çš„å®Œæ•´æµç¨‹æ‹†å¼€æ¥è¯´ï¼š</p>
<ol>
<li>
<p><strong>æ¥æ”¶è¾“å…¥å’Œ sessionId</strong> ä½ è°ƒç”¨ chainWithHistory.invoke({ input: "..." }, { configurable: { sessionId: "xxx" } })</p>
</li>
<li>
<p><strong>è·å–å¯¹åº”ä¼šè¯çš„å†å²å®ä¾‹</strong> è°ƒç”¨ä½ æä¾›çš„ getMessageHistory("xxx")ï¼Œè¿”å›ä¸€ä¸ª BaseChatMessageHistory å®ä¾‹ï¼ˆæ¯”å¦‚ InMemoryChatMessageHistoryï¼‰</p>
</li>
<li>
<p><strong>è¯»å–å†å²æ¶ˆæ¯</strong> è‡ªåŠ¨æ‰§è¡Œ await history.getMessages()ï¼Œå¾—åˆ°æ‰€æœ‰ä¹‹å‰çš„æ¶ˆæ¯æ•°ç»„</p>
</li>
<li>
<p><strong>æ„é€ å®Œæ•´è¾“å…¥å¯¹è±¡</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">{
  <span class="hljs-attr">history</span>: [æ‰€æœ‰æ—§æ¶ˆæ¯],
  <span class="hljs-attr">input</span>: <span class="hljs-string">"å½“å‰ç”¨æˆ·è¾“å…¥"</span>
}
</code></pre>
</li>
<li>
<p><strong>æ¸²æŸ“ Prompt</strong></p>
<ul>
<li>{history} è¢«æ›¿æ¢æˆå®Œæ•´çš„å†å²æ¶ˆæ¯åˆ—è¡¨</li>
<li>{input} è¢«æ›¿æ¢æˆæœ¬æ¬¡ç”¨æˆ·è¾“å…¥ï¼ˆä½œä¸º HumanMessageï¼‰</li>
<li>æœ€ç»ˆå½¢æˆä¸€ä¸ªå®Œæ•´çš„ messages æ•°ç»„ä¼ ç»™æ¨¡å‹</li>
</ul>
</li>
<li>
<p><strong>è°ƒç”¨æ¨¡å‹å¾—åˆ°å›å¤</strong></p>
</li>
<li>
<p><strong>è‡ªåŠ¨ä¿å­˜æœ¬æ¬¡å¯¹è¯</strong>ï¼ˆå…³é”®ï¼ï¼‰ RunnableWithMessageHistory ä¼šè‡ªåŠ¨ï¼š</p>
<ul>
<li>history.addMessage(new HumanMessage(æœ¬æ¬¡è¾“å…¥))</li>
<li>history.addMessage(new AIMessage(æ¨¡å‹å›å¤))</li>
</ul>
</li>
<li>
<p><strong>è¿”å›æ¨¡å‹å›å¤</strong></p>
</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹é™¤äº†æä¾› getMessageHistory å¤–ï¼Œå…¶ä»–å…¨æ˜¯è‡ªåŠ¨çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¯´å®ƒâ€œä¼˜é›…â€çš„åŸå› ã€‚</p>
<h2 data-id="heading-4">å››ã€å…³é”®ç»„ä»¶é€ä¸ªè¯¦è§£</h2>
<h3 data-id="heading-5">1. ChatPromptTemplate.fromMessages</h3>
<p>è¿™æ˜¯æ„å»ºèŠå¤© Prompt çš„é¦–é€‰æ–¹å¼ï¼Œå†™æ³•ç›´è§‚ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">"system"</span>, <span class="hljs-string">"ç³»ç»Ÿæç¤º"</span>],
  [<span class="hljs-string">"placeholder"</span>, <span class="hljs-string">"{history}"</span>],  <span class="hljs-comment">// å¿…é¡»å’Œ historyMessagesKey ä¸€è‡´</span>
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>],          <span class="hljs-comment">// å¿…é¡»å’Œ inputMessagesKey ä¸€è‡´</span>
]);
</code></pre>
<p>æ”¯æŒçš„ role æœ‰ï¼šsystemã€humanã€aiã€placeholderã€‚è¿˜å¯ä»¥æ’å…¥ few-shot ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">[
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"ä½ æ˜¯è°ï¼Ÿ"</span>],
  [<span class="hljs-string">"ai"</span>, <span class="hljs-string">"æˆ‘æ˜¯åé«˜ä¿Šçš„ç§äººåŠ©æ‰‹ã€‚"</span>],
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>]
]
</code></pre>
<h3 data-id="heading-6">2. InMemoryChatMessageHistory</h3>
<p>æœ€ç®€å•çš„å†…å­˜å­˜å‚¨ç±»ï¼Œå†…éƒ¨å°±æ˜¯ä¸€ä¸ª messages: BaseMessage[] æ•°ç»„ã€‚</p>
<ul>
<li>ä¼˜ç‚¹ï¼šç®€å•ã€å¿«é€Ÿã€é€‚åˆæœ¬åœ°æµ‹è¯•å’Œè°ƒè¯•</li>
<li>ç¼ºç‚¹ï¼šè¿›ç¨‹é‡å¯å°±ä¸¢å¤±ã€ä¸æ”¯æŒå¤šå®ä¾‹å…±äº«</li>
</ul>
<p>æ„é€ å‡½æ•°æ”¯æŒé¢„åŠ è½½ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>([
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">"æ—§æ¶ˆæ¯"</span>),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">AIMessage</span>(<span class="hljs-string">"æ—§å›å¤"</span>)
]);
</code></pre>
<p>æ‰‹åŠ¨æ“ä½œæ–¹æ³•ï¼š</p>
<ul>
<li>await history.getMessages() è·å–</li>
<li>await history.addMessage(msg) æ·»åŠ </li>
<li>await history.clear() æ¸…ç©ºï¼ˆæ¯”å¦‚ç”¨æˆ·ç‚¹â€œæ–°å¯¹è¯â€ï¼‰</li>
</ul>
<h3 data-id="heading-7">3. sessionId çš„é‡è¦æ€§</h3>
<p>å¦‚æœä½ åƒè¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-attr">getMessageHistory</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>()
</code></pre>
<p>é‚£æ‰€æœ‰ç”¨æˆ·éƒ½ä¼šå…±äº«åŒä¸€ä¸ªå†å²ï¼ä¸Šçº¿åç”¨æˆ·Açœ‹åˆ°ç”¨æˆ·Bçš„èŠå¤©è®°å½•ï¼Œç¾éš¾ã€‚</p>
<p>å¿…é¡»ç”¨ Map/Set æˆ–æ•°æ®åº“æŒ‰ sessionIdï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·ID + è®¾å¤‡IDï¼‰éš”ç¦»ã€‚</p>
<h2 data-id="heading-8">äº”ã€Token çˆ†ç‚¸æ€ä¹ˆåŠï¼Ÿé«˜çº§ Memory ç­–ç•¥</h2>
<p>å…¨é‡ä¿å­˜å†å²ï¼ˆBuffer é£æ ¼ï¼‰ç®€å•ï¼Œä½†å¯¹è¯é•¿äº† Token å¾ˆå®¹æ˜“çˆ†ã€‚LangChain æä¾›äº†å¤šç§æ§åˆ¶ç­–ç•¥ï¼š</p>
<ol>
<li>
<p><strong>çª—å£è®°å¿†ï¼ˆWindowï¼‰</strong> åªä¿ç•™æœ€è¿‘ N è½®å¯¹è¯ã€‚å®ç°æ–¹å¼ï¼šåœ¨ getMessageHistory ä¸­ sliceï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> all = <span class="hljs-keyword">await</span> baseHistory.<span class="hljs-title function_">getMessages</span>();
<span class="hljs-keyword">return</span> all.<span class="hljs-title function_">slice</span>(-maxTurns * <span class="hljs-number">2</span>);  <span class="hljs-comment">// æ¯è½®ä¸¤å¥</span>
</code></pre>
</li>
<li>
<p><strong>æ‘˜è¦è®°å¿†ï¼ˆSummaryï¼‰</strong> ç”¨ LLM æŠŠæ—§å¯¹è¯å‹ç¼©æˆæ‘˜è¦ï¼Œä¿ç•™å…³é”®ä¿¡æ¯ä¸ä¸¢å¤±ç»†èŠ‚ã€‚</p>
</li>
<li>
<p><strong>æ··åˆæ‘˜è¦ç¼“å†²ï¼ˆSummary Bufferï¼‰</strong> æœ€è¿‘å‡ è½®ä¿ç•™åŸæ–‡ï¼Œæ—§çš„ç”¨æ‘˜è¦æ›¿æ¢ã€‚æœ€æ¨èçš„ç”Ÿäº§æ–¹æ¡ˆã€‚</p>
<p>LangChain JS æœ‰ç°æˆå®ç°ï¼ˆæ—§ç‰ˆ Memory ç±»ï¼‰ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConversationSummaryBufferMemory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"langchain/memory"</span>;

<span class="hljs-keyword">const</span> memory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConversationSummaryBufferMemory</span>({
  <span class="hljs-attr">llm</span>: model,
  <span class="hljs-attr">maxTokenLimit</span>: <span class="hljs-number">1000</span>,  <span class="hljs-comment">// è¶…è¿‡å°±æ‘˜è¦æ—§éƒ¨åˆ†</span>
});
</code></pre>
<p>æ–°ç‰ˆ LCEL ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ getMessageHistory å®ç°ç±»ä¼¼é€»è¾‘ã€‚</p>
</li>
</ol>
<h2 data-id="heading-9">å…­ã€ç”Ÿäº§ç¯å¢ƒå¿…å¤‡ï¼šæŒä¹…åŒ–å­˜å‚¨</h2>
<p>InMemory åªèƒ½ç”¨äºå¼€å‘æµ‹è¯•ï¼Œä¸Šçº¿å¿…é¡»æ¢æŒä¹…åŒ–å®ç°ï¼š</p>






























<table><thead><tr><th>å­˜å‚¨</th><th>åŒ…</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td>Upstash Redis</td><td>@langchain/upstash</td><td>Serverlessï¼ˆå¦‚ Vercelï¼‰é¦–é€‰</td></tr><tr><td>Redis</td><td>@langchain/redis</td><td>é«˜æ€§èƒ½ä¼ ç»ŸæœåŠ¡</td></tr><tr><td>MongoDB</td><td>@langchain/mongodb</td><td>éœ€è¦å¤æ‚æŸ¥è¯¢</td></tr><tr><td>Postgres</td><td>@langchain/community</td><td>å·²æœ‰ SQL ç”Ÿæ€</td></tr></tbody></table>
<p>æ›¿æ¢æ–¹å¼åªéœ€æ”¹ getMessageHistory è¿”å›å¯¹åº”ç±»å³å¯ï¼Œå…¶ä»–ä»£ç ä¸åŠ¨ã€‚</p>
<h2 data-id="heading-10">ä¸ƒã€å®é™…é¡¹ç›®ä¸­çš„æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>å¤šç”¨æˆ·å¿…ç”¨ sessionId</strong>ï¼Œå»ºè®®æ ¼å¼ï¼šuser:<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi><mi>I</mi><mi>d</mi></mrow><mo>:</mo><mi>c</mi><mi>h</mi><mi>a</mi><mi>t</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">{userId}:chat:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord"><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02778em;">ser</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal">d</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">c</span><span class="mord mathnormal">ha</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span></span></span></span></span>{chatId}</li>
<li><strong>æä¾›â€œæ¸…é™¤å¯¹è¯â€åŠŸèƒ½</strong>ï¼šæ‰‹åŠ¨è°ƒç”¨ history.clear()</li>
<li><strong>ç›‘æ§ Token ä½¿ç”¨</strong>ï¼šç”¨ LangSmith æˆ–è‡ªå·±ç»Ÿè®¡ï¼ŒåŠæ—¶è§¦å‘æ‘˜è¦</li>
<li><strong>ç»“åˆ RAG</strong>ï¼šMemory å­˜å¯¹è¯å†å²ï¼ŒVectorStore å­˜çŸ¥è¯†åº“ï¼ŒèŒè´£åˆ†å¼€</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šæ¨¡å‹è°ƒç”¨å¤±è´¥æ—¶ä¸è¦ä¿å­˜æœ¬æ¬¡æ¶ˆæ¯ï¼Œé¿å…è„æ•°æ®</li>
<li><strong>é¢„åŠ è½½å†å²</strong>ï¼šç”¨æˆ·é‡æ–°æ‰“å¼€æ—§å¯¹è¯æ—¶ï¼Œä»æ•°æ®åº“åŠ è½½å addMessages</li>
</ol>
<h2 data-id="heading-11">å…«ã€æ€»ç»“</h2>
<p>LangChain çš„ Memory æ¨¡å—æœ¬è´¨ä¸Šå°±æ˜¯å¸®ä½ è‡ªåŠ¨åŒ–äº†â€œè¯»å†å² â†’ å‘æ¨¡å‹ â†’ å­˜æ–°æ¶ˆæ¯â€è¿™ä¸ªå¾ªç¯ã€‚æ ¸å¿ƒåªæœ‰ä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>ç”¨ ChatPromptTemplate.fromMessages å†™å¥½å¸¦ {history} å’Œ {input} çš„æ¨¡æ¿</li>
<li>ç”¨ RunnableWithMessageHistory åŒ…è£… chain</li>
<li>æä¾›å¯é çš„ getMessageHistoryï¼ˆå¼€å‘ç”¨ InMemoryï¼Œä¸Šçº¿ç”¨ Redis ç­‰ï¼‰</li>
</ul>
<p>æŒæ¡äº†è¿™å¥—æµç¨‹ï¼Œä½ å°±èƒ½è½»æ¾åšå‡ºå„ç§æœ‰è®°å¿†çš„èŠå¤©åº”ç”¨ï¼šå®¢æœæœºå™¨äººã€ä¸ªäººåŠ©æ‰‹ã€å†™ä½œæ­æ¡£ã€è§’è‰²æ‰®æ¼”â€¦â€¦</p>
<p>ä»æˆ‘æœ€åˆçš„â€œæ‰‹åŠ¨æ»šé›ªçƒâ€æ¶ˆæ¯åˆ—è¡¨ï¼Œåˆ°ç°åœ¨å‡ è¡Œä»£ç å°±æå®šå¤šç”¨æˆ·æŒä¹…åŒ–è®°å¿†ï¼ŒLangChain ç¡®å®çœäº†å¾ˆå¤šå¿ƒã€‚å¸Œæœ›è¿™ç¯‡å¹²è´§èƒ½å¸®ä½ åœ¨é¡¹ç›®é‡Œå¿«é€Ÿè½åœ°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼ ç»Ÿå·¥å…·è°ƒç”¨å¤ªç—›è‹¦ï¼ŸLangChain ä¸€é”®æ‰“é€š LLM ä¸çœŸå®ä¸–ç•Œ]]></title>    <link>https://juejin.cn/post/7588191506606080006</link>    <guid>https://juejin.cn/post/7588191506606080006</guid>    <pubDate>2025-12-27T14:57:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588191506606080006" data-draft-id="7588149079417126966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼ ç»Ÿå·¥å…·è°ƒç”¨å¤ªç—›è‹¦ï¼ŸLangChain ä¸€é”®æ‰“é€š LLM ä¸çœŸå®ä¸–ç•Œ"/> <meta itemprop="keywords" content="LangChain,LLM,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:57:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼ ç»Ÿå·¥å…·è°ƒç”¨å¤ªç—›è‹¦ï¼ŸLangChain ä¸€é”®æ‰“é€š LLM ä¸çœŸå®ä¸–ç•Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:57:50.000Z" title="Sat Dec 27 2025 14:57:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤§æ¨¡å‹æƒ³â€œå¹²æ´»â€ï¼Œä½†å¾—é ä½ åŠ¨æ‰‹ï¼šLangChain å·¥å…·è°ƒç”¨è¯¦è§£</h2>
<blockquote>
<p><strong>å¤§è¯­è¨€æ¨¡å‹èƒ½å‘Šè¯‰ä½ â€œè¯¥æŸ¥åŒ—äº¬å¤©æ°”â€ï¼Œå´æ— æ³•è‡ªå·±æ‰“å¼€ APIã€‚å®ƒåªè´Ÿè´£â€œæƒ³â€ï¼Œä½ è´Ÿè´£â€œåšâ€â€”â€”è€Œ LangChain è®©è¿™ä¸ªåä½œå˜å¾—ä¼˜é›…åˆå®‰å…¨ã€‚</strong></p>
</blockquote>
<p>åœ¨æ„å»ºæ™ºèƒ½åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸Œæœ›å¤§æ¨¡å‹ä¸ä»…èƒ½èŠå¤©ï¼Œè¿˜èƒ½<strong>æ‰§è¡ŒçœŸå®æ“ä½œ</strong>ï¼šæŸ¥å¤©æ°”ã€ç®—æ•°å­¦ã€æŸ¥æ•°æ®åº“â€¦â€¦<br/>
ä½† LLM æœ¬èº«åªæ˜¯ä¸€ä¸ª<strong>æ–‡æœ¬ç”Ÿæˆå™¨</strong>ï¼Œæ²¡æœ‰è®¿é—®å¤–éƒ¨ç³»ç»Ÿçš„èƒ½åŠ›ã€‚äºæ˜¯ï¼Œâ€œå·¥å…·è°ƒç”¨â€ï¼ˆTool Callingï¼‰æˆä¸ºè¿æ¥â€œæƒ³æ³•â€ä¸â€œè¡ŒåŠ¨â€çš„æ¡¥æ¢ã€‚</p>
<p>æœ¬æ–‡å°†å…ˆç®€è¦å¯¹æ¯”<strong>ä¼ ç»Ÿæ‰‹å†™å·¥å…·è°ƒåº¦</strong>çš„ç¹çä¹‹å¤„ï¼Œå†æ·±å…¥è§£æä½ ä»£ç ä¸­ <strong>LangChain çš„å·¥å…·è°ƒç”¨å®ç°</strong>ï¼Œæ­ç¤ºå…¶å¦‚ä½•é€šè¿‡å£°æ˜å¼è®¾è®¡å¤§å¹…é™ä½å¤æ‚åº¦ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ§± ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹å†™è°ƒåº¦çš„å¤æ‚æ€§</h3>
<p>åœ¨æ²¡æœ‰æ¡†æ¶æ”¯æŒçš„æ—¶ä»£ï¼Œå¼€å‘è€…éœ€è¦<strong>æ‰‹åŠ¨å®Œæˆä»æ„å›¾è¯†åˆ«åˆ°å‡½æ•°è°ƒç”¨çš„å…¨è¿‡ç¨‹</strong>â€”â€”å°±åƒä¸€ä¸ªæ—¢å½“æŒ‡æŒ¥å®˜ã€åˆå½“ç¿»è¯‘ã€è¿˜å¾—äº²è‡ªè·‘è…¿çš„å…¨èƒ½æ‚å·¥ã€‚</p>
<h4 data-id="heading-2">1. åˆ†æ•£æ— è§„èŒƒçš„å·¥å…·å®šä¹‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å·¥å…·å‡½æ•°å„è‡ªç‹¬ç«‹å®šä¹‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getWeather</span>(<span class="hljs-params">city</span>) {
  <span class="hljs-comment">// ...æŸ¥å¤©æ°”é€»è¾‘</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}
</code></pre>
<p>é—®é¢˜æ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li>æ²¡æœ‰ç»Ÿä¸€æ¥å£ï¼›</li>
<li>å‚æ•°æ ¼å¼éšæ„ï¼ˆæœ‰çš„ç”¨å­—ç¬¦ä¸²ï¼Œæœ‰çš„ç”¨æ•°å­—ï¼‰ï¼›</li>
<li>æ›´å…³é”®çš„æ˜¯ï¼š<strong>æ¨¡å‹æ ¹æœ¬ä¸çŸ¥é“è¿™äº›å‡½æ•°å­˜åœ¨</strong>ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ è¿™å°±åƒä½ æœ‰ä¸€å †ä¸“ä¸šå·¥å…·ï¼ˆæ‰³æ‰‹ã€ç”µé’»ã€æ¸©åº¦è®¡ï¼‰ï¼Œä½†æ²¡è´´æ ‡ç­¾ã€ä¹Ÿæ²¡è¯´æ˜ä¹¦ã€‚å“ªæ€•è¯·æ¥ä¸€ä½é¡¶çº§å·¥ç¨‹å¸ˆï¼ˆå¤§æ¨¡å‹ï¼‰ï¼Œä»–ä¹Ÿåªèƒ½å¹²çªçœ¼ï¼šâ€œæˆ‘ä¸çŸ¥é“ä½ èƒ½åšä»€ä¹ˆã€‚â€</p>
</blockquote>
<hr/>
<h4 data-id="heading-3">2. ç¹ççš„å·¥å…·è¯´æ˜ï¼ˆOpenAI åŸç”Ÿ JSONï¼‰</h4>
<p>ä¸ºäº†è®©æ¨¡å‹çŸ¥é“å·¥å…·çš„å­˜åœ¨ï¼Œä½ ä¸å¾—ä¸æ‰‹å†™å†—é•¿çš„ JSON Schemaï¼š</p>
<pre><code class="hljs language-js" lang="js">tools = [
  {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
    <span class="hljs-string">"function"</span>: {
      <span class="hljs-string">"name"</span>: <span class="hljs-string">"get-weather"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”"</span>,
      <span class="hljs-string">"parameters"</span>: {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
        <span class="hljs-string">"properties"</span>: {
          <span class="hljs-string">"location"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚åç§°ï¼Œå¦‚'åŒ—äº¬'"</span>
          }
        },
        <span class="hljs-string">"required"</span>: [<span class="hljs-string">"location"</span>]
      }
    }
  }
]
</code></pre>
<p>å¦‚æœä½ æœ‰ 10 ä¸ªå·¥å…·ï¼Œå°±å¾—é‡å¤å†™ 10 æ¬¡ç±»ä¼¼çš„ç»“æ„ã€‚<br/>
ä¸ä»…å®¹æ˜“å‡ºé”™ï¼Œè¿˜éš¾ä»¥ç»´æŠ¤â€”â€”<strong>ä¿®æ”¹ä¸€ä¸ªå‚æ•°ï¼Œå¯èƒ½è¦åŒæ—¶æ”¹ JSON å’Œå‡½æ•°å®ç°ä¸¤å¤„åœ°æ–¹</strong>ã€‚</p>
<blockquote>
<p>ğŸ› ï¸ è¿™å°±åƒç»™æ¯ä¸ªå·¥å…·å•ç‹¬æ‰‹å†™ä¸€å¼ çº¸è´¨è¯´æ˜ä¹¦ï¼Œå†é’‰åœ¨å¢™ä¸Šã€‚æ–°å‘˜å·¥ï¼ˆæ¨¡å‹ï¼‰æ¥äº†ï¼Œå¾—å¯¹ç€å¢™ä¸€æ¡æ¡è¯»ï¼Œè¿˜å¯èƒ½çœ‹é”™è¡Œã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-4">3. è„†å¼±çš„è°ƒç”¨é€»è¾‘ï¼šç¡¬ç¼–ç  + æ­£åˆ™è§£æ</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleQuery</span>(<span class="hljs-params">query</span>) {
  <span class="hljs-keyword">if</span> (query.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"å¤©æ°”"</span>)) {
    <span class="hljs-keyword">const</span> city = query.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/(åŒ—äº¬|ä¸Šæµ·|å¹¿å·)/</span>)?.[<span class="hljs-number">0</span>] || <span class="hljs-string">"æœªçŸ¥"</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getWeather</span>(city);
  } 
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (query.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"åŠ "</span>) || query.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"+"</span>)) {
    <span class="hljs-keyword">const</span> nums = query.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\d+/g</span>);
    <span class="hljs-keyword">if</span> (nums &amp;&amp; nums.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">2</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">add</span>(<span class="hljs-built_in">parseInt</span>(nums[<span class="hljs-number">0</span>]), <span class="hljs-built_in">parseInt</span>(nums[<span class="hljs-number">1</span>]));
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-string">"æˆ‘ä¸æ‡‚è¿™ä¸ªé—®é¢˜"</span>;
}
</code></pre>
<p>è¿™ç§å†™æ³•çš„é—®é¢˜åœ¨äºï¼š</p>
<ul>
<li><strong>æ„å›¾è¯†åˆ«é å…³é”®è¯</strong>ï¼šç”¨æˆ·è¯´â€œåŒ—äº¬ä»Šå¤©çƒ­å¾—åƒ30åº¦â€ï¼Œå¯èƒ½è¢«è¯¯åˆ¤ä¸ºåŠ æ³•ï¼›</li>
<li><strong>å‚æ•°æå–é æ­£åˆ™</strong>ï¼šè‡ªç„¶è¯­è¨€åƒå˜ä¸‡åŒ–ï¼Œè§„åˆ™å¾ˆå¿«å¤±æ•ˆï¼›</li>
<li><strong>æ¯åŠ ä¸€ä¸ªå·¥å…·ï¼Œå°±è¦æ”¹ä¸»å‡½æ•°</strong>ï¼šè¿åâ€œå¼€é—­åŸåˆ™â€ï¼Œä»£ç è¶Šæ¥è¶Šè‡ƒè‚¿ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>è¿™å°±åƒä½ é›‡äº†ä¸€ä½è¯ºè´å°”å¥–å¾—ä¸»å½“æˆ˜ç•¥é¡¾é—®ï¼Œå´é€¼ä»–èƒŒç”µè¯ç°¿ã€å†™æ­£åˆ™è¡¨è¾¾å¼ã€è‡ªå·±è·‘æ°”è±¡ç«™â€”â€”å®Œå…¨æµªè´¹äº†ä»–çš„æ™ºæ…§ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-5">ğŸ¤– LangChain çš„è§£æ³•ï¼šè®©æ¨¡å‹å†³ç­–ï¼Œä½ æ¥æ‰§è¡Œ</h3>
<p>LangChain æä¾›äº†ä¸€å¥—<strong>å£°æ˜å¼å·¥å…·æŠ½è±¡</strong>ï¼ŒæŠŠâ€œå·¥å…·è¯´æ˜ä¹¦â€å’Œâ€œå·¥å…·æœ¬èº«â€åˆäºŒä¸ºä¸€ï¼Œå½¢æˆä¸€ä¸ª<strong>è‡ªæè¿°ã€å¯éªŒè¯ã€å³æ’å³ç”¨çš„æ¨¡å—</strong>ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³éå¸¸æ¸…æ™°ï¼š</p>
<blockquote>
<p><strong>ä½ å‘Šè¯‰æ¨¡å‹æœ‰å“ªäº›å·¥å…·å¯ç”¨ â†’ æ¨¡å‹è‡ªä¸»å†³å®šæ˜¯å¦è°ƒç”¨ â†’ ä½ æ”¶åˆ°è°ƒç”¨è¯·æ±‚åæ‰§è¡ŒçœŸå®å‡½æ•°ã€‚</strong></p>
</blockquote>
<p>ä¸‹é¢ç»“åˆä½ çš„ä»£ç ï¼Œä¸€æ­¥æ­¥æ‹†è§£è¿™åœºâ€œäººæœºåä½œâ€ã€‚</p>
<hr/>
<h4 data-id="heading-6">ğŸ”§ ç¬¬ä¸€æ­¥ï¼šç”¨ <code>tool()</code> å®šä¹‰ç»“æ„åŒ–å·¥å…· â€”â€” â€œå¸¦æ™ºèƒ½æ ‡ç­¾çš„å·¥å…·ç®±â€</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¤©æ°”æŸ¥è¯¢å·¥å…·</span>
<span class="hljs-keyword">const</span> weathertool = <span class="hljs-title function_">tool</span>(
  <span class="hljs-keyword">async</span> ({ city }) =&gt; {
    <span class="hljs-keyword">const</span> weather = fakeWeatherDB[city];
    <span class="hljs-keyword">if</span> (!weather) <span class="hljs-keyword">return</span> <span class="hljs-string">`åŸå¸‚<span class="hljs-subst">${city}</span>çš„å¤©æ°”ä¿¡æ¯ä¸å­˜åœ¨`</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`å½“å‰<span class="hljs-subst">${city}</span>çš„å¤©æ°”æ˜¯<span class="hljs-subst">${weather.temp}</span>, <span class="hljs-subst">${weather.condition}</span>, é£åŠ›<span class="hljs-subst">${weather.wind}</span>`</span>;
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„ä»Šæ—¥å¤©æ°”æƒ…å†µ"</span>,
    <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"è¦æŸ¥è¯¢å¤©æ°”çš„åŸå¸‚åç§°"</span>)
    })
  }
);

<span class="hljs-comment">// åŠ æ³•å·¥å…·</span>
<span class="hljs-keyword">const</span> addTool = <span class="hljs-title function_">tool</span>(
  <span class="hljs-keyword">async</span> ({ a, b }) =&gt; <span class="hljs-title class_">String</span>(a + b),
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"add"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"è®¡ç®—ä¸¤ä¸ªæ•°å­—çš„å’Œ"</span>,
    <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">a</span>: z.<span class="hljs-title function_">number</span>(),
      <span class="hljs-attr">b</span>: z.<span class="hljs-title function_">number</span>()
    })
  }
);
</code></pre>
<h5 data-id="heading-7">è¿™é‡Œåšäº†ä¸‰ä»¶äº‹ï¼š</h5>
<ol>
<li>
<p><strong>å°è£…æ‰§è¡Œé€»è¾‘</strong><br/>
å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼ˆå¦‚ <code>{ city }</code>ï¼‰ï¼Œé€šè¿‡è§£æ„è·å–å­—æ®µã€‚<br/>
è¿”å›å€¼å¿…é¡»æ˜¯ <strong>å­—ç¬¦ä¸²</strong>ï¼ˆLLM å·¥å…·åè®®è¦æ±‚ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æä¾›å…ƒæ•°æ®</strong></p>
<ul>
<li><code>name</code>ï¼šå·¥å…·å”¯ä¸€æ ‡è¯†ï¼ˆæ¨¡å‹è°ƒç”¨æ—¶ä½¿ç”¨ï¼‰</li>
<li><code>description</code>ï¼šè‡ªç„¶è¯­è¨€æè¿°ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£ç”¨é€”</li>
</ul>
</li>
<li>
<p><strong>å®šä¹‰å‚æ•°è§„èŒƒï¼ˆZod Schemaï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({ <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>() })
</code></pre>
<ul>
<li>ç›¸å½“äºç»™æ¨¡å‹ä¸€ä»½â€œä»»åŠ¡å•å¡«å†™æŒ‡å—â€</li>
<li>LangChain ä¼šè‡ªåŠ¨å°†å…¶è½¬ä¸º JSON Schema æ³¨å…¥æ¨¡å‹</li>
<li>è¿è¡Œæ—¶è¿˜å¯æ ¡éªŒå‚æ•°åˆæ³•æ€§ï¼ˆç±»å‹å®‰å…¨ï¼‰</li>
</ul>
</li>
</ol>
<blockquote>
<p>âœ… <strong>ä¼˜åŠ¿</strong>ï¼šå·¥å…·å®šä¹‰ä¸€ä½“åŒ–ï¼Œè‡ªæè¿°ã€å¯éªŒè¯ã€æ˜“æµ‹è¯•ã€‚<br/>
å°±åƒç»™æ¯ä¸ªå·¥å…·è´´ä¸Š<strong>æ™ºèƒ½ RFID æ ‡ç­¾</strong>ï¼šä¸€æ‰«å°±çŸ¥é“åå­—ã€ç”¨é€”ã€æ€ä¹ˆç”¨ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-8">ğŸ”— ç¬¬äºŒæ­¥ï¼šç”¨ <code>.bindTools()</code> ç»‘å®šå·¥å…·é›† â€”â€” â€œå‘é¡¾é—®å±•ç¤ºå·¥å…·å¢™â€</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">modelName</span>: <span class="hljs-string">"deepseek-chat"</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>,
}).<span class="hljs-title function_">bindTools</span>([addTool, weathertool]);
</code></pre>
<p>è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯ï¼š<br/>
<strong>å°†å·¥å…·åˆ—è¡¨â€œæ³¨å†Œâ€ç»™æ¨¡å‹</strong>ï¼Œç›¸å½“äºå¸¦æ¨¡å‹å‚è§‚ä½ çš„â€œå·¥å…·å¢™â€ï¼š</p>
<blockquote>
<p>â€œçœ‹ï¼Œè¿™é‡Œæœ‰ä¸¤ä»¶è£…å¤‡ï¼š</p>
<ul>
<li><strong>åŠ æ³•è®¡ç®—å™¨</strong>ï¼šè¾“å…¥ä¸¤ä¸ªæ•°å­—ï¼Œè¾“å‡ºå®ƒä»¬çš„å’Œï¼›</li>
<li><strong>å¤©æ°”é›·è¾¾</strong>ï¼šè¾“å…¥åŸå¸‚åï¼Œè¿”å›å®æ—¶å¤©æ°”ã€‚<br/>
é‡åˆ°ç›¸å…³é—®é¢˜ï¼Œä½ å¯ä»¥ç›´æ¥â€˜ç‚¹åâ€™è°ƒç”¨å®ƒä»¬ã€‚â€</li>
</ul>
</blockquote>
<p>æ­¤æ—¶ï¼Œæ¨¡å‹åœ¨æ¨ç†æ—¶ä¼šå‚è€ƒè¿™äº›å·¥å…·çš„ <code>name</code>ã€<code>description</code> å’Œ <code>parameters</code>ï¼Œ<strong>è‡ªä¸»åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨ã€è°ƒç”¨å“ªä¸ªã€ä¼ ä»€ä¹ˆå‚æ•°</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-9">ğŸ“¬ ç¬¬ä¸‰æ­¥ï¼šæ¨¡å‹è¿”å› <code>tool_calls</code> â€”â€” â€œå†™ä¸‹ä»»åŠ¡å•ï¼Œä½†ä¸æ‰§è¡Œâ€</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>);
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼šæ¨¡å‹ä¸ä¼šç›´æ¥å›ç­”å¤©æ°”ï¼Œè€Œæ˜¯è¿”å›ï¼š</p>
<pre><code class="hljs language-js" lang="js">res.<span class="hljs-property">tool_calls</span> = [
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
    <span class="hljs-attr">args</span>: { <span class="hljs-attr">city</span>: <span class="hljs-string">"åŒ—äº¬"</span> },  <span class="hljs-comment">// â† å·²æ˜¯è§£æå¥½çš„å¯¹è±¡ï¼</span>
    <span class="hljs-attr">id</span>: <span class="hljs-string">"call_abc123"</span>
  }
]
</code></pre>
<h5 data-id="heading-10">ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</h5>
<ul>
<li><strong>å®‰å…¨éš”ç¦»</strong>ï¼šæ¨¡å‹è¿è¡Œåœ¨æ²™ç›’ä¸­ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ä½ çš„å‡½æ•°ï¼ˆé˜²æ­¢ä»»æ„ä»£ç æ‰§è¡Œï¼‰ã€‚</li>
<li><strong>å¯æ§æ‰§è¡Œ</strong>ï¼šä½ å¯ä»¥åœ¨è°ƒç”¨å‰åŠ æƒé™æ£€æŸ¥ã€æ—¥å¿—ã€é‡è¯•ç­‰é€»è¾‘ã€‚</li>
<li><strong>çµæ´»å“åº”</strong>ï¼šä½ å¯ä»¥é€‰æ‹©ä¸æ‰§è¡Œã€æ¨¡æ‹Ÿå“åº”ï¼ˆæµ‹è¯•ï¼‰ã€æˆ–å¹¶è¡Œè°ƒç”¨å¤šä¸ªå·¥å…·ã€‚</li>
</ul>
<blockquote>
<p>âš ï¸ <strong>é‡è¦</strong>ï¼š<code>tool_calls</code> åªæ˜¯æ¨¡å‹çš„â€œè°ƒç”¨æ„å›¾â€ï¼Œ<strong>ä¸ä»£è¡¨å·¥å…·å·²è¢«æ‰§è¡Œ</strong>ã€‚<br/>
å°±åƒ CEO åœ¨ä¼šè®®å®¤è¯´ï¼šâ€œæŸ¥ä¸€ä¸‹åŒ—äº¬å¤©æ°”ã€‚â€<br/>
ä½†ä»–ä¸ä¼šäº²è‡ªæ‰“å¼€ç”µè„‘â€”â€”ä»–åªæ˜¯<strong>å‘å‡ºæŒ‡ä»¤</strong>ã€‚çœŸæ­£çš„æ‰§è¡Œï¼Œè¦é ä½ è¿™ä¸ªâ€œæ‰§è¡ŒåŠ©ç†â€å»å®Œæˆã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-11">ğŸ› ï¸ ç¬¬å››æ­¥ï¼šä½ æ‰‹åŠ¨â€œå…‘ç°â€è°ƒç”¨ â€”â€” â€œæ‰§è¡Œä»»åŠ¡ï¼Œå¸¦å›ç»“æœâ€</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// const res = await model.invoke("3+5 ç­‰äºå¤šå°‘ï¼Ÿ");</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>);
<span class="hljs-comment">// å¯é€‰é“¾ es6 æ–°å¢ æœ‰åˆ©äºä»£ç çš„ç®€æ´å’Œä¼˜é›…</span>
<span class="hljs-keyword">if</span>(res.<span class="hljs-property">tool_calls</span>?.<span class="hljs-property">length</span>){
    <span class="hljs-comment">//console.log(res.tool_calls[0]);</span>
    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">tool_calls</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>===<span class="hljs-string">"add"</span>){
       <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> addTool.<span class="hljs-title function_">invoke</span>(res.<span class="hljs-property">tool_calls</span>[<span class="hljs-number">0</span>].<span class="hljs-property">args</span>);
       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æœ€ç»ˆç»“æœ:"</span>,result);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(res.<span class="hljs-property">tool_calls</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>===<span class="hljs-string">"get_weather"</span>){
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> weathertool.<span class="hljs-title function_">invoke</span>(res.<span class="hljs-property">tool_calls</span>[<span class="hljs-number">0</span>].<span class="hljs-property">args</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æœ€ç»ˆç»“æœ:"</span>,result);
    }
</code></pre>
<p>è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li><code>call.args</code> æ˜¯ä¸€ä¸ª<strong>æ™®é€š JavaScript å¯¹è±¡</strong>ï¼ˆå¦‚ <code>{ city: "åŒ—äº¬" }</code>ï¼‰ï¼Œå·²ç”± LangChain è‡ªåŠ¨è§£æï¼ˆæ— éœ€ <code>JSON.parse</code>ï¼ï¼‰ã€‚</li>
<li>å·¥å…·å¤§æ¨¡å‹è¿”å›çš„tool_callsç¡®å®šå¤§æ¨¡å‹å†³å®šè°ƒç”¨çš„å·¥å…·åç§°æ¥æ‰‹åŠ¨çš„æ‰§è¡Œè¿™ä¸ªå·¥å…·å‡½æ•°</li>
<li><code>tool_calls.agrs</code>ä¸­å­˜å‚¨çš„å°±æ˜¯å·¥å…·å¯¹åº”çš„éœ€è¦çš„å‚æ•°,åœ¨è°ƒç”¨å·¥å…·æ—¶å°†å‚æ•°ä¼ å…¥æ‰§è¡Œ</li>
<li>å‡½æ•°æ‰§è¡Œåè¿”å›å­—ç¬¦ä¸²ï¼Œä½ å¯ç›´æ¥å±•ç¤ºï¼Œæˆ–å†ä¼ å›æ¨¡å‹ç”Ÿæˆæ›´è‡ªç„¶çš„å›ç­”ï¼ˆAgent æ¨¡å¼ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>è¿™å°±æ˜¯â€œäººæœºåä½œâ€çš„ç²¾é«“</strong>ï¼š<br/>
æ¨¡å‹æ˜¯â€œå¤§è„‘â€ï¼Œè´Ÿè´£æ€è€ƒä¸å†³ç­–ï¼›<br/>
ä½ çš„ä»£ç æ˜¯â€œæ‰‹è„šâ€ï¼Œè´Ÿè´£æ„ŸçŸ¥ä¸è¡ŒåŠ¨ã€‚<br/>
è€Œ LangChainï¼Œå°±æ˜¯é‚£æ ¹è¿æ¥ç¥ç»ä¸è‚Œè‚‰çš„<strong>åå°„å¼§</strong>ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b222a6c1b5e45c48ff2a7047da254f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767452270&amp;x-signature=KHgLxUYtxejxX15lIMvnVuibsqU%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-12">ğŸŒŸ æ€»ç»“ï¼šLangChain å¦‚ä½•ç®€åŒ–å·¥å…·è°ƒç”¨</h3>



































<table><thead><tr><th>ç¯èŠ‚</th><th>ä¼ ç»Ÿæ–¹å¼</th><th>LangChain</th></tr></thead><tbody><tr><td><strong>å·¥å…·å®šä¹‰</strong></td><td>åˆ†æ•£å‡½æ•°ï¼Œæ— æè¿°</td><td><code>tool()</code> ä¸€ä½“åŒ–å°è£…ï¼ˆå‡½æ•°+æè¿°+schemaï¼‰</td></tr><tr><td><strong>æ„å›¾è¯†åˆ«</strong></td><td>æ‰‹å†™å…³é”®è¯/NLP</td><td>æ¨¡å‹è‡ªä¸»å†³ç­–</td></tr><tr><td><strong>å‚æ•°æå–</strong></td><td>æ­£åˆ™/è§„åˆ™è§£æ</td><td>æ¨¡å‹ç”Ÿæˆç»“æ„åŒ–å‚æ•°ï¼Œæ¡†æ¶è‡ªåŠ¨è§£æ</td></tr><tr><td><strong>è°ƒç”¨æ‰§è¡Œ</strong></td><td>ç¡¬ç¼–ç  <code>if/else</code></td><td>æ ¹æ® <code>tool_calls</code> åŠ¨æ€åˆ†å‘</td></tr><tr><td><strong>æ‰©å±•æ–°å·¥å…·</strong></td><td>ä¿®æ”¹ä¸»é€»è¾‘</td><td>åªéœ€å®šä¹‰æ–° <code>tool</code> å¹¶åŠ å…¥æ•°ç»„</td></tr></tbody></table>
<blockquote>
<p><strong>LangChain ä¸æ˜¯æ›¿ä½ å†™ä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ˜¯æ›¿ä½ å†™â€œè°ƒåº¦é€»è¾‘â€ã€‚</strong><br/>
ä½ åªéœ€ä¸“æ³¨å·¥å…·æœ¬èº«çš„å®ç°ï¼Œå‰©ä¸‹çš„äº¤ç»™æ¡†æ¶ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">âœ… ç»“è¯­</h3>
<p>å¤§æ¨¡å‹æ˜¯â€œå¤§è„‘â€ï¼Œä½ çš„ä»£ç æ˜¯â€œæ‰‹è„šâ€ã€‚<br/>
LangChain æä¾›çš„ <code>tool()</code> æœºåˆ¶ï¼Œæ­£æ˜¯é‚£æ ¹è¿æ¥â€œæ€æƒ³â€ä¸â€œè¡ŒåŠ¨â€çš„ç¥ç»é€šè·¯ã€‚</p>
<p>ç†è§£ <code>tool_calls</code> åªæ˜¯â€œæè®®â€è€Œéâ€œæ‰§è¡Œâ€ï¼Œæ˜¯æŒæ¡æ™ºèƒ½ä½“ï¼ˆAgentï¼‰å¼€å‘çš„ç¬¬ä¸€æ­¥ã€‚<br/>
è€Œä½ ï¼Œå°±æ˜¯é‚£ä¸ªè®© AI ä»â€œçº¸ä¸Šè°ˆå…µâ€èµ°å‘â€œçœŸæªå®å¹²â€çš„å…³é”®æ‰§è¡Œè€…ã€‚</p>
<blockquote>
<p><strong>åˆ«è®©å¤©æ‰é¡¾é—®åªåŠ¨å˜´â€”â€”ç»™ä»–ä¸€å¥—å¥½å·¥å…·ï¼Œå†é…ä¸€ä¸ªé è°±çš„æ‰§è¡Œè€…ï¼Œå¥‡è¿¹æ‰ä¼šå‘ç”Ÿã€‚</strong></p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PostCSSå®Œå…¨æŒ‡å—ï¼šåŠŸèƒ½/é…ç½®/æ’ä»¶/SourceMap/AST/æ’ä»¶å¼€å‘/è‡ªå®šä¹‰è¯­æ³•]]></title>    <link>https://juejin.cn/post/7588146449005756452</link>    <guid>https://juejin.cn/post/7588146449005756452</guid>    <pubDate>2025-12-27T15:02:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449005756452" data-draft-id="7588152122186891318" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PostCSSå®Œå…¨æŒ‡å—ï¼šåŠŸèƒ½/é…ç½®/æ’ä»¶/SourceMap/AST/æ’ä»¶å¼€å‘/è‡ªå®šä¹‰è¯­æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,CSS"/> <meta itemprop="datePublished" content="2025-12-27T15:02:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¼‚æµç“¶jz"/> <meta itemprop="url" content="https://juejin.cn/user/3694779980078877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PostCSSå®Œå…¨æŒ‡å—ï¼šåŠŸèƒ½/é…ç½®/æ’ä»¶/SourceMap/AST/æ’ä»¶å¼€å‘/è‡ªå®šä¹‰è¯­æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3694779980078877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¼‚æµç“¶jz
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T15:02:13.000Z" title="Sat Dec 27 2025 15:02:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»31åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">PostCSSæ˜¯ä»€ä¹ˆ</h2>
<p>PostCSSæ˜¯ä¸€ä¸ªè½¬ä¹‰CSSä»£ç çš„å·¥å…·ï¼Œå®ƒçš„è¾“å…¥ä¸ºCSSæ–‡ä»¶ï¼Œè¾“å‡ºä¹Ÿæ˜¯CSSæ–‡ä»¶ã€‚å®ƒé¦–å…ˆæŠŠCSSè½¬æ¢ä¸ºæŠ½è±¡è¯­æ³•æ ‘ASTï¼Œå†ä½¿ç”¨æ’ä»¶å¯¹è¯­æ³•æ ‘è¿›è¡Œä¿®æ”¹ï¼Œæœ€åç”Ÿæˆæ–°çš„CSSä»£ç ã€‚å®ƒçš„ä½œç”¨éå¸¸åƒJavaScriptä¸­çš„Babelã€‚</p>
<p>åœ¨CSSé¢†åŸŸï¼Œå­˜åœ¨æ„Ÿæ›´å¼ºçš„æ˜¯SCSSå’ŒLessï¼Œå®ƒä»¬æ˜¯CSSçš„é¢„å¤„ç†å™¨ï¼Œæ‰©å……äº†CSSçš„è¯­æ³•å’ŒåŠŸèƒ½ï¼Œå¯ä»¥ç¼–å†™å¤ç”¨æ€§æ›´å¼ºçš„ä»£ç ã€‚é¢„å¤„ç†å™¨ç»è¿‡ç¼–è¯‘åï¼Œæ˜¯CSSä»£ç ã€‚è€ŒPostCSSæ­£å¦‚å®ƒçš„åå­—ï¼Œæœ€å¸¸è¢«ç”¨åšCSSçš„åå¤„ç†å™¨ï¼Œåšä¸€äº›å…¼å®¹æ€§åŠŸèƒ½ã€‚ä¾‹å¦‚æ·»åŠ æµè§ˆå™¨å¼•æ“çš„å‰ç¼€ï¼Œè½¬æ¢CSSä»£ç ä»¥å…¼å®¹ä¸æ”¯æŒçš„æµè§ˆå™¨ç­‰ã€‚é¢„å¤„ç†å™¨å’Œåå¤„ç†å™¨çš„å…³ç³»ç±»ä¼¼äºè¿™æ ·ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2194490e5c1548fa83eb6434608d5d01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryC5rWB55O2ano=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767452532&amp;x-signature=P8GqL%2FuHKKz1v0tAYFojI%2FLijOY%3D" alt="postcss-1.png" loading="lazy"/></p>
<p>å¯¹æ¯”JavaScriptçš„ç”Ÿæ€ä½ï¼ŒSCSSå’ŒLessåƒTypeScriptæ‰©å……è¯­æ³•ï¼ŒPostCSSåƒBabelè½¬ä¹‰å…¼å®¹è¯­æ³•ã€‚ä½†PostCSSå…è®¸æˆ‘ä»¬è‡ªå®šä¹‰è¯­æ³•è§„åˆ™ï¼Œå› æ­¤ç”¨ä½œé¢„å¤„ç†å™¨ï¼Œç”šè‡³åªç”¨PostCSSä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<h2 data-id="heading-1">PostCSSä½¿ç”¨</h2>
<p>è¿™é‡Œæˆ‘ä»¬ä»¥æœ€å¸¸ç”¨çš„æ’ä»¶Autoprefixerä¸¾ä¾‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ ¹æ®å…¼å®¹æ€§è®¾ç½®æ·»åŠ æµè§ˆå™¨å¼•æ“å‰ç¼€çš„æ’ä»¶ã€‚é¦–å…ˆåˆ›å»º<code>css/index.css</code>ï¼Œä½œä¸ºæˆ‘ä»¬è¦è½¬ä¹‰çš„CSSä»£ç ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">::placeholder</span> {
  <span class="hljs-attribute">color</span>: gray;
}

<span class="hljs-selector-class">.image</span> {
  <span class="hljs-attribute">width</span>: stretch;
}
</code></pre>
<h3 data-id="heading-2">APIæ–¹å¼</h3>
<p>é¦–å…ˆè¯•ä¸€ä¸‹JavaScriptAPIçš„æ–¹å¼ä½¿ç”¨PostCSSã€‚æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"autoprefixer"</span>);
<span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss"</span>);

<span class="hljs-keyword">const</span> originData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./css/index.css"</span>, <span class="hljs-string">"utf-8"</span>);

<span class="hljs-title function_">postcss</span>([autoprefixer])
  .<span class="hljs-title function_">process</span>(originData, { <span class="hljs-attr">from</span>: <span class="hljs-string">"css/index.css"</span>, <span class="hljs-attr">to</span>: <span class="hljs-string">"out.css"</span> })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">css</span>);
    fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'out.css'</span>, res.<span class="hljs-property">css</span>);
  });
</code></pre>
<p>æˆ‘ä»¬è¯»å–CSSæ–‡ä»¶ä¸ºå­—ç¬¦ä¸²ï¼Œæ”¾å…¥PostCSSä¸­è¿›è¡Œè½¬ä¹‰ï¼Œæœ€åæ‰‹åŠ¨å†™å…¥è¾“å‡ºæ–‡ä»¶ã€‚è™½ç„¶PostCSSè¦æ±‚æŒ‡å®šfromå’Œtoè¡¨ç¤ºè¾“å…¥è¾“å‡ºçš„æ–‡ä»¶è·¯å¾„ï¼Œä½†å®é™…ä¸Šå®ƒä»¬æ˜¯ç»™SourceMapç”¨çš„ï¼Œå¹¶ä¸ä¼šçœŸæ­£å¸®æˆ‘ä»¬è¯»å–å†™å…¥ï¼ˆä½†è¿˜æ˜¯å¿…å¡«ï¼‰ã€‚æœ€åç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">::-moz-placeholder {
  <span class="hljs-attribute">color</span>: gray;
}

<span class="hljs-selector-pseudo">::placeholder</span> {
  <span class="hljs-attribute">color</span>: gray;
}

<span class="hljs-selector-class">.image</span> {
  <span class="hljs-attribute">width</span>: -webkit-fill-available;
  <span class="hljs-attribute">width</span>: -moz-available;
  <span class="hljs-attribute">width</span>: stretch;
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„CSSä»£ç ä¸­çš„éƒ¨åˆ†å±æ€§æ·»åŠ äº†æµè§ˆå™¨å‰ç¼€äº†ã€‚å…·ä½“å“ªäº›å‰ç¼€è¢«æ·»åŠ ï¼Œè¦æ ¹æ®Browserslistæµè§ˆå™¨å…¼å®¹èŒƒå›´ç¡®å®šã€‚ï¼ˆåœ¨åé¢ä»‹ç»æ’ä»¶çš„éƒ¨åˆ†ä¼šæåˆ°ï¼‰</p>
<h3 data-id="heading-3">å‘½ä»¤è¡Œæ–¹å¼</h3>
<p>ä½¿ç”¨PostCSS CLIå¯ä»¥æ”¯æŒä»¥å‘½ä»¤è¡Œæ–¹å¼è½¬ä¹‰CSSæ–‡ä»¶ã€‚é¦–å…ˆéœ€è¦å®‰è£…postcss-cliä¾èµ–ï¼Œç„¶åå‘½ä»¤è¡Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># å•ä¸ªæ–‡ä»¶</span>
postcss css/index.css -u autoprefixer -o out.css --no-map
<span class="hljs-comment"># ç›®å½•</span>
postcss css -u autoprefixer -d output --no-map
</code></pre>
<p>PostCSS CLIæ”¯æŒè½¬ä¹‰å•ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œç›®å½•ä¼šè½¬ä¹‰å…¶ä¸­çš„æ¯ä¸ªæ–‡ä»¶ã€‚å…¶ä¸­-uè¡¨ç¤ºä¼ å…¥çš„æ’ä»¶åï¼Œ-oè¡¨ç¤ºè¾“å‡ºçš„æ–‡ä»¶åï¼Œ-dè¡¨ç¤ºè¾“å‡ºç›®å½•ï¼Œ--no-mapè¡¨ç¤ºä¸è¾“å‡ºSourceMapã€‚ç»è¿‡è½¬ä¹‰åï¼Œè¾“å‡ºç»“æœä¸ä¸Šé¢APIæ–¹å¼ä¸€è‡´ã€‚å¦‚æœæ›´å¤šé…ç½®ï¼Œåˆ™éœ€è¦ä½¿ç”¨PostCSSé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨åé¢å•ç‹¬ä»‹ç»ã€‚</p>
<h2 data-id="heading-4">Webpackä¸­ä½¿ç”¨PostCSS</h2>
<p>åœ¨Webpackä¸­ä½¿ç”¨PostCSSï¼Œä¸»è¦ä¾é postcss-loaderã€‚</p>
<h3 data-id="heading-5">åˆ›å»ºWebpacké¡¹ç›®</h3>
<p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªWebpacké¡¹ç›®ï¼Œå¯ä»¥æ‰“åŒ…CSSï¼Œä½†ä¸åŒ…å«PostCSSã€‚</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®</span>
npm init -y
<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm add webpack webpack-cli style-loader css-loader
</code></pre>
<p>åˆ›å»ºsrc/index.cssï¼Œå†…å®¹ä¸ºå³ä¸ºå‰é¢çš„CSSä»£ç ã€‚å†åˆ›å»ºsrc/index.jsï¼Œå¼•å…¥CSSæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-string">"./index.css"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);
</code></pre>
<p>ç„¶åå†åˆ›å»ºWebapcké…ç½®æ–‡ä»¶webpack.config.jsï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">"production"</span>,
  <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index.js"</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">"main.js"</span>,
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"dist"</span>),
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>],
      },
    ],
  },
};
</code></pre>
<p>å…¶ä¸­æœ€å…³é”®çš„æ˜¯style-loaderå’Œcss-loaderï¼Œè¿™æ˜¯å¼•å…¥CSSæ–‡ä»¶çš„å¿…è¦loaderã€‚loaderæ˜¯ä»åå‘å‰é“¾å¼è°ƒç”¨ï¼Œå…ˆcss-loaderï¼Œå†style-loaderã€‚ç„¶ååœ¨package.jsonä¸­å¢åŠ å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack"</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>æœ€åæ‰§è¡Œ<code>npm run build</code>,ç»“æœè¾“å‡ºåˆ°dist/main.jsä¸­ã€‚ç»“æœè¾ƒé•¿ï¼Œè¿™é‡Œåªæˆªå–åŒ…å«CSSçš„éƒ¨åˆ†ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒCSSè¢«æ‰“åŒ…è¿›JavaScriptä»£ç ä¸­ï¼Œå…¶å†…å®¹æœªå˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34e6f405564945d4acc5d386090dc5ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryC5rWB55O2ano=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767452532&amp;x-signature=A11hk2OegBvhOjhE91n7ZHpV1TE%3D" alt="postcss-2.png" loading="lazy"/></p>
<h3 data-id="heading-6">å¼•å…¥postcss-loader</h3>
<p>å®‰è£…ä¸‰ä¸ªç›¸å…³ä¾èµ–ï¼špostcss postcss-loader autoprefixerã€‚ç„¶åä¿®æ”¹webpack.config.jsï¼Œå¼•å…¥PostCSSï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">"production"</span>,
  <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index.js"</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">"main.js"</span>,
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"dist"</span>),
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
        <span class="hljs-attr">use</span>: [
          <span class="hljs-string">"style-loader"</span>,
          <span class="hljs-string">"css-loader"</span>,
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">"postcss-loader"</span>,
            <span class="hljs-attr">options</span>: {
              <span class="hljs-attr">postcssOptions</span>: {
                <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'autoprefixer'</span>],
              },
            },
          },
        ],
      },
    ],
  },
};
</code></pre>
<p>æ³¨æ„å…¶ä¸­é‡ç‚¹æ˜¯æ–°å¢åŠ äº†postcss-loaderï¼Œå®ƒçš„ä½ç½®åœ¨æ•°ç»„çš„æœ€åã€‚æ„å‘³ç€CSSæ–‡ä»¶å…ˆç»è¿‡å®ƒå¤„ç†ï¼Œç„¶åå†ç»™css-loaderå’Œstyle-loaderã€‚postcssOptionsé€‰é¡¹ä¸­å¯ä»¥é…ç½®æ’ä»¶ã€‚postcss-loaderä¹Ÿæ”¯æŒä½¿ç”¨é…ç½®æ–‡ä»¶postcss.config.jsã€‚</p>
<p>é‡æ–°æ‰§è¡Œ<code>npm run build</code>åï¼ŒæŸ¥çœ‹ç»“æœå‘ç°ï¼Œé™¤äº†åŸæœ‰ä»£ç å¤–ï¼Œè¿˜å¢åŠ äº†æµè§ˆå™¨å‰ç¼€ï¼Œè¯´æ˜ä»£ç æˆåŠŸè¢«PostCSSè½¬ä¹‰äº†ã€‚(ä¸‹å›¾ä¸ºäº†æ–¹ä¾¿ç”¨ä¸¤è¡Œå±•ç¤ºCSSå­—ç¬¦ä¸²ï¼Œå®é™…ä¸ºä¸€è¡Œ)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dca735ee80134468a1118dd454721498~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryC5rWB55O2ano=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767452532&amp;x-signature=2N2Q5tW4qve3Z0yiMFRnat17l%2Fs%3D" alt="postcss-3.png" loading="lazy"/></p>
<h2 data-id="heading-7">é…ç½®æ–‡ä»¶postcss.config.js</h2>
<p>åœ¨å‘½ä»¤è¡Œæˆ–Webapckæ–¹å¼ä½¿ç”¨PostCSSæ—¶ï¼Œéƒ½æ”¯æŒpostcss.config.jsä½œä¸ºé…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯è¿™ä¸¤ç§é…ç½®æ–‡ä»¶çš„å±…ç„¶æ˜¯ä¸ä¸€æ ·çš„ï¼Œéƒ¨åˆ†åœºæ™¯äº’ç›¸ä¸å…¼å®¹ã€‚å› æ­¤è¿™é‡Œåˆ†åˆ«ä»‹ç»ä¸¤ç§æ–¹å¼çš„é…ç½®æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-8">å‘½ä»¤è¡Œæ–¹å¼é…ç½®æ–‡ä»¶</h3>
<h4 data-id="heading-9">å¼•å…¥æ’ä»¶</h4>
<p>å‘½ä»¤è¡Œä»…æ”¯æŒç›´æ¥å¼•å…¥æ’ä»¶å¯¹è±¡çš„æ–¹å¼ã€‚ä¾‹å¦‚å‰é¢æˆ‘ä»¬åˆ—ä¸¾çš„ä¾‹å­ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"autoprefixer"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [autoprefixer],
};
</code></pre>
<p>ç„¶åæ‰§è¡Œçš„å‘½ä»¤è¿›è¡Œä¿®æ”¹ï¼Œè¾“å‡ºæ•ˆæœä¸€è‡´ã€‚</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># åŸå‘½ä»¤</span>
postcss css/index.css -u autoprefixer -o out.css --no-map
<span class="hljs-comment"># æ–°å‘½ä»¤</span>
postcss css/index.css -o out.css
</code></pre>
<h4 data-id="heading-10">æ’ä»¶å‚æ•°</h4>
<p>ä¸ºäº†æè¿°æ’ä»¶å‚æ•°ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªpostcss-color-grayæ’ä»¶ã€‚é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œå…ˆä¸ä½¿ç”¨æ’ä»¶å‚æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> postcssColorGray = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss-color-gray"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [postcssColorGray],
};
</code></pre>
<p>ç„¶åä½¿ç”¨æ’ä»¶è¯­æ³•ï¼Œé‡æ–°å†™ä¸€æ®µCSSä»£ç ï¼Œè½¬ä¹‰åçš„ä»£ç ä¹Ÿåœ¨ä¸‹é¢åˆ—å‡ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æºCSSä»£ç  */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">gray</span>(<span class="hljs-number">0</span> / <span class="hljs-number">90%</span>);
}

<span class="hljs-comment">/* è½¬ä¹‰åCSSä»£ç  */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.9</span>);
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æ’ä»¶ç”Ÿæ•ˆäº†ã€‚ç„¶åæˆ‘ä»¬ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¢åŠ æ’ä»¶å‚æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> postcssColorGray = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss-color-gray"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">postcssColorGray</span>({ <span class="hljs-attr">preserve</span>: <span class="hljs-literal">true</span> })],
};
</code></pre>
<p>é‡æ–°æ‰§è¡Œå‘½ä»¤è¡Œï¼Œè½¬ä¹‰åçš„ä»£ç å‘ç”Ÿäº†å˜åŒ–ï¼Œä¿ç•™äº†grayå‡½æ•°ï¼Œå‚æ•°ç”Ÿæ•ˆäº†ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* è½¬ä¹‰åCSSä»£ç  */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.9</span>);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">gray</span>(<span class="hljs-number">0</span> / <span class="hljs-number">90%</span>);
}
</code></pre>
<h4 data-id="heading-11">é…ç½®æ–‡ä»¶åç§°å’Œæ ¼å¼</h4>
<p>è™½ç„¶PostCSS CLIä¸­ä»…ä»…æåˆ°äº†é…ç½®æ–‡ä»¶åç§°ä¸ºpostcss.config.jsï¼Œä½†æˆ‘å‚è€ƒéš”å£postcss-loaderçš„æ–‡ä»¶åå¯¹PostCSS CLIè¿›è¡Œäº†å°è¯•ï¼Œå‘ç°å±…ç„¶æ˜¯æ”¯æŒçš„ï¼è¿™é‡Œæˆ‘ä»¬æè¿°ä¸€ä¸‹ã€‚</p>
<p>é¦–å…ˆæ˜¯JavaScriptç±»çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬.postcssrc.js, .postcssrc.cjs, postcss.config.cjsç­‰ï¼ŒPostCSS CLIæ˜¯æ”¯æŒçš„ï¼Œæ–‡ä»¶å†…å®¹å’Œæ‰§è¡Œæ•ˆæœéƒ½ä¸postcss.config.jsä¸€è‡´ã€‚</p>
<p>ç„¶åæ˜¯JSONæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚.postcssrc, .postcssrc.jsonç­‰ï¼ŒPostCSS CLIä¹Ÿæ˜¯æ”¯æŒçš„ï¼Œä½†æ˜¯ç”±äºæ’ä»¶å¿…é¡»ç›´æ¥å¼•å…¥æ’ä»¶å¯¹è±¡ï¼Œå› æ­¤JSONæ ¼å¼å®é™…ä¸Šå¹¶ä¸èƒ½ç”¨ã€‚å®ƒçš„æŠ¥é”™å’Œåœ¨postcss.config.jsä¸­ç›´æ¥å†™æ’ä»¶åç§°å­—ç¬¦ä¸²çš„æŠ¥é”™æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤åˆ¤å®šæ–‡ä»¶æœ¬èº«è¢«è¯»å–äº†ï¼Œä½†ä¸æ”¯æŒæ’ä»¶ã€‚è¿™é‡Œä¸¾ä¾‹ä¸‹é…ç½®æ–‡ä»¶å†…å®¹ï¼Œä»¥.postcssrc.jsonä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-string">"postcss-color-gray"</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"preserve"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç„¶åæŠ¥é”™å†…å®¹å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯åœ¨è¯»æ’ä»¶è¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚ä½¿ç”¨yamlç±»çš„æ–‡ä»¶æ ¼å¼ï¼ŒæŠ¥é”™ä¹Ÿæ˜¯ä¸€è‡´çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee681bd3a96146b8b67467c81096001e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryC5rWB55O2ano=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767452532&amp;x-signature=bVVEay2GZom23jRhzZvsemrUFgc%3D" alt="postcss-4.png" loading="lazy"/></p>
<h4 data-id="heading-12">è¯»å–ä¸Šä¸‹æ–‡</h4>
<p>é…ç½®æ–‡ä»¶è¿˜å¯ä»¥å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å¯ä»¥æ¥æ”¶ä¸Šä¸‹æ–‡å…¥å‚ï¼Œæœ€ç»ˆè¿”å›é…ç½®å¯¹è±¡ã€‚è¿™é‡Œæˆ‘ä»¬ç»™å‡ºé…ç½®æ–‡ä»¶çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> postcssColorGray = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss-color-gray"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">ctx</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ctx);
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-title function_">postcssColorGray</span>(ctx.<span class="hljs-property">env</span> === <span class="hljs-string">"development"</span> ? { <span class="hljs-attr">preserve</span>: <span class="hljs-literal">true</span> } : {}),
    ],
  };
};

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{
  cwd: 'E:\\testProj\\postcss-test\\apitest',
  env: undefined,
  options: {
    map: { inline: true },
    parser: undefined,
    syntax: undefined,
    stringifier: undefined
  },
  file: {
    dirname: 'E:\\testProj\\postcss-test\\apitest\\css',
    basename: 'index.css',
    extname: '.css'
  }
}
*/</span>
</code></pre>
<p>é€šè¿‡ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡å…¥å‚è°ƒæ•´é…ç½®å¯¹è±¡çš„å†…å®¹ã€‚è¿™é‡Œç®€å•è¯´æ˜ä¸Šä¸‹æ–‡å…¥å‚å«ä¹‰ï¼š</p>
<ul>
<li>env: ä¸ºprocess.env.NODE_ENVçš„å€¼</li>
<li>file: æ–‡ä»¶åç›¸å…³å‚æ•°
<ul>
<li>dirname: æ–‡ä»¶è·¯å¾„</li>
<li>basename: æ–‡ä»¶å</li>
<li>extname: æ–‡ä»¶æ‰©å±•å</li>
</ul>
</li>
<li>options: å‘½ä»¤è¡Œä¸­è¾“å…¥çš„é€‰é¡¹</li>
</ul>
<h3 data-id="heading-13">Webpackæ–¹å¼é…ç½®æ–‡ä»¶</h3>
<h4 data-id="heading-14">å¼•å…¥æ’ä»¶</h4>
<p>Webpackæ–¹å¼ä¸ä»…æ”¯æŒç›´æ¥å¼•å…¥æ’ä»¶å¯¹è±¡çš„æ–¹å¼ï¼Œè¿˜æ”¯æŒç›´æ¥å†™æ’ä»¶åç§°å­—ç¬¦ä¸²ã€‚ä¸¤ç§æ–¹å¼è¿™é‡Œéƒ½åˆ—ä¸¾ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›´æ¥å¼•å…¥æ’ä»¶å¯¹è±¡</span>
<span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"autoprefixer"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [autoprefixer],
};

<span class="hljs-comment">// ç›´æ¥å†™æ’ä»¶åç§°å­—ç¬¦ä¸²</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'autoprefixer'</span>],
};
</code></pre>
<p>ç„¶ååˆ é™¤Webapcké…ç½®ä¸­çš„æ’ä»¶é…ç½®ï¼Œæ•ˆæœä¸€è‡´ã€‚Webapackä¸­é…ç½®å¯ä»¥æ˜¯è¿™æ ·ï¼ˆä»…å±•ç¤ºç›¸å…³ç‰‡æ®µï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">module</span>: {
  <span class="hljs-attr">rules</span>: [
    {
      <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
      <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>, <span class="hljs-string">"postcss-loader"</span>],
    },
  ],
},
</code></pre>
<h4 data-id="heading-15">æ’ä»¶å‚æ•°</h4>
<p>è¿™é‡Œè¿˜ä½¿ç”¨å‰é¢å‘½ä»¤è¡Œä¸­æ’ä»¶å‚æ•°ä¸€èŠ‚é‡Œé¢çš„postcss-color-grayæ’ä»¶å’ŒCSSä»£ç ã€‚è¿™é‡Œå°è¯•ç”¨ä¸¤ç§æ’ä»¶é…ç½®æ–¹å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›´æ¥å¼•å…¥æ’ä»¶å¯¹è±¡</span>
<span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"autoprefixer"</span>);
<span class="hljs-keyword">const</span> postcssColorGray = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss-color-gray"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [autoprefixer, <span class="hljs-title function_">postcssColorGray</span>({ <span class="hljs-attr">preserve</span>: <span class="hljs-literal">true</span> })],
};

<span class="hljs-comment">// ç›´æ¥å†™æ’ä»¶åç§°å­—ç¬¦ä¸²</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'autoprefixer'</span>, [<span class="hljs-string">'postcss-color-gray'</span>, { <span class="hljs-attr">preserve</span>: <span class="hljs-literal">true</span> }]],
};
</code></pre>
<p>æŸ¥çœ‹ç»“æœï¼Œä¸¤ç§æ–¹å¼éƒ½èƒ½æ­£å¸¸æ¥æ”¶å‚æ•°ï¼Œç»“æœä¸å‘½ä»¤è¡Œæ–¹å¼ä¸€è‡´ã€‚è¿™é‡Œè¿˜ä¸¾ä¾‹äº†ä¼ å…¥å¤šä¸ªæ’ä»¶çš„æ–¹å¼ã€‚</p>
<h4 data-id="heading-16">é…ç½®æ–‡ä»¶åç§°å’Œæ ¼å¼</h4>
<p>Webpackæ–¹å¼çš„é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒå¤šç§é…ç½®æ–‡ä»¶æ ¼å¼å’Œæ–‡ä»¶åï¼ŒåŒ…æ‹¬.postcssrc, .postcssrc.json, .postcssrc.yaml, .postcssrc.js, postcss.config.cjsç­‰ç­‰ï¼Œå…·ä½“å¯ä»¥çœ‹postcss-loaderçš„æ–‡æ¡£ã€‚å…¶ä¸­JSONå’ŒYAMLç±»çš„æ ¼å¼ä»…æ”¯æŒç›´æ¥å†™æ’ä»¶åç§°å­—ç¬¦ä¸²ï¼Œè¿™é‡Œç¤ºä¾‹ä¸‹é…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼Œé¦–å…ˆæ˜¯JSONæ ¼å¼ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"autoprefixer"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">[</span><span class="hljs-string">"postcss-color-gray"</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"preserve"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç„¶åæ˜¯YAMLæ ¼å¼ï¼Œå®é™…å†…å®¹ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">plugins:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">autoprefixer</span>
  <span class="hljs-bullet">-</span> <span class="hljs-bullet">-</span> <span class="hljs-string">postcss-color-gray</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">preserve:</span> <span class="hljs-literal">true</span>
</code></pre>
<h4 data-id="heading-17">è¯»å–ä¸Šä¸‹æ–‡</h4>
<p>Webpackæ–¹å¼çš„é…ç½®æ–‡ä»¶ä¹Ÿå¯ä»¥å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å¯ä»¥æ¥æ”¶ä¸Šä¸‹æ–‡å…¥å‚ï¼Œæœ€ç»ˆè¿”å›é…ç½®å¯¹è±¡ã€‚è¿™é‡Œæˆ‘ä»¬ç»™å‡ºé…ç½®æ–‡ä»¶çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">ctx</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ctx);
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">plugins</span>: [[<span class="hljs-string">"postcss-color-gray"</span>, ctx.<span class="hljs-property">mode</span> === <span class="hljs-string">"development"</span> ? { <span class="hljs-attr">preserve</span>: <span class="hljs-literal">true</span> } : {}]],
  };
};

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{
  mode: 'production',
  file: 'E:\\testProj\\postcss-test\\webpacktest\\src\\index.css',
  webpackLoaderContext: {} // å†…å®¹å¾ˆå¤šï¼Œè¿™é‡Œçœç•¥
  env: 'production',
  options: { plugins: [ 'autoprefixer' ] }
*/</span>
</code></pre>
<p>è¿™é‡Œçš„è¾“å‡ºä¸å‘½ä»¤è¡Œæ–¹å¼ç±»ä¼¼ï¼Œä½†ä¸å®Œå…¨ä¸€æ ·ï¼Œè¿™é‡Œç®€å•è¯´æ˜ä¸Šä¸‹æ–‡å…¥å‚å«ä¹‰ï¼š</p>
<ul>
<li>envå’Œmode: ä¸ºprocess.env.NODE_ENVçš„å€¼</li>
<li>file: æ–‡ä»¶è·¯å¾„</li>
<li>options: Webpacké…ç½®ä¸­çš„postcssOptionsé€‰é¡¹</li>
<li>webpackLoaderContext:  Webpack loaderçš„ä¸Šä¸‹æ–‡ï¼Œå†…å®¹å¾ˆå¤š</li>
</ul>
<h3 data-id="heading-18">å…¶ä½™å‚æ•°</h3>
<p>è¿™äº›é…ç½®æ–‡ä»¶éƒ½å¯ä»¥æ¥æ”¶PostCSSçš„APIä¸­ProcessOptionsçš„å‚æ•°ï¼Œé™¤äº†fromå’Œtoã€‚è¿™é‡Œåˆ—ä¸¾å‡ ä¸ªï¼š</p>
<ul>
<li>parser ä¼ å…¥è§£æASTçš„æ–¹æ³•</li>
<li>stringifier ä¼ å…¥ä»ASTç”Ÿæˆå­—ç¬¦ä¸²çš„æ–¹æ³•</li>
<li>syntax ä¼ å…¥ASTè§£æå’Œç”Ÿæˆçš„æ–¹æ³•ï¼Œç›¸å½“äºparser + stringifier</li>
<li>map SourceMapé€‰é¡¹</li>
</ul>
<p>è¿™äº›å‚æ•°çš„å…·ä½“ç”¨æ³•ä¼šåœ¨åé¢ä»‹ç»åˆ°ã€‚</p>
<h3 data-id="heading-19">ä¸åŒç‚¹æ€»ç»“</h3>
<p>ä»ä¸Šé¢å‘½ä»¤è¡Œæ–¹å¼ä¸Webpackæ–¹å¼é…ç½®æ–‡ä»¶çš„æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥æ˜ç¡®ä¸¤ç§æ–¹å¼é…ç½®æ–‡ä»¶çš„ä¸åŒç‚¹ï¼š</p>
<ul>
<li>æœ€ä¸»è¦çš„ä¸åŒæ˜¯å¼•å…¥æ’ä»¶æ–¹å¼çš„ä¸åŒï¼šå‘½ä»¤è¡Œä»…æ”¯æŒç›´æ¥å¼•å…¥æ’ä»¶å¯¹è±¡çš„æ–¹å¼ï¼ŒWebpackæ–¹å¼è¿˜æ”¯æŒç›´æ¥å†™æ’ä»¶åç§°å­—ç¬¦ä¸²ã€‚è¿™å¯¼è‡´äº†æ’ä»¶ä¼ å‚æ–¹å¼å’Œé…ç½®æ–‡ä»¶æ ¼å¼çš„é™åˆ¶ã€‚</li>
<li>å…¶æ¬¡æ˜¯è¯»å–ä¸Šä¸‹æ–‡å‚æ•°çš„ä¸åŒã€‚è¿™æ˜¯ç”±äºä¸¤è€…è¿è¡Œæ–¹å¼ä¸åŒï¼Œå‘½ä»¤è¡Œä¸Webpackæ–¹å¼å¯ä»¥æ¥æ”¶åˆ°çš„é…ç½®æ•°æ®ä¸åŒï¼Œå› æ­¤ä¸Šä¸‹æ–‡å‚æ•°ä¸ä¸€æ ·ã€‚</li>
</ul>
<h2 data-id="heading-20">å„ç±»æ’ä»¶ç®€ä»‹</h2>
<p>PostCSSä¸­æä¾›äº†éå¸¸å¤šçš„æ’ä»¶ï¼Œä½œç”¨å„ä¸ç›¸åŒï¼Œè¿™é‡Œåˆ—ä¸¾å‡ ä¸ªè¿›è¡Œä»‹ç»ï¼š</p>
<h3 data-id="heading-21">Autoprefixer</h3>
<p>Autoprefixeræ˜¯PostCSSä¸­æœ€çŸ¥åçš„æ’ä»¶ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ ¹æ®æµè§ˆå™¨å…¼å®¹æ€§ï¼Œæ·»åŠ æµè§ˆå™¨å¼•æ“å‰ç¼€ã€‚æµè§ˆå™¨å¼•æ“å‰ç¼€æ˜¯æµè§ˆå™¨ä¸ºäº†ç»™å®éªŒæ€§æˆ–è€…æµè§ˆå™¨å¼•æ“ç‹¬æœ‰çš„éæ ‡å‡†CSSå±æ€§æ·»åŠ çš„å‰ç¼€ï¼Œè¿™æ ·è¿™ä¸ªå®éªŒå±æ€§å°±ä¸ä¼šå½±å“åˆ°å…¶å®ƒæµè§ˆå™¨ï¼Œå¼€å‘è€…ä¹Ÿèƒ½è¯†åˆ«è¿™æ˜¯é’ˆå¯¹æŸç§æµè§ˆå™¨åšçš„ä¼˜åŒ–ã€‚å¸¸è§çš„å‰ç¼€æœ‰ï¼š</p>
<ul>
<li>-webkit-: åŸºäºWebKitå†…æ ¸çš„æµè§ˆå™¨ï¼Œä¾‹å¦‚Chromeã€Safariç­‰</li>
<li>-moz-: ç«ç‹æµè§ˆå™¨</li>
<li>-o-: æ—§ç‰ˆ(WebKitä¹‹å‰çš„)Operaæµè§ˆå™¨</li>
<li>-ms-: IE æµè§ˆå™¨</li>
</ul>
<p>è¿™é‡Œä¸¾ä¸€ä¸ªä¾‹å­ï¼Œtransitionå±æ€§ç”¨ä¸Šé¢çš„æµè§ˆå™¨å¼•æ“å‰ç¼€å¯ä»¥å†™ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">div</span> {
  <span class="hljs-comment">/* åŸå±æ€§ */</span>
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">4s</span> ease;
  <span class="hljs-comment">/* å¢åŠ æµè§ˆå™¨å¼•æ“å‰ç¼€ */</span>
  -webkit-<span class="hljs-attribute">transition</span>: all <span class="hljs-number">4s</span> ease;
  -moz-<span class="hljs-attribute">transition</span>: all <span class="hljs-number">4s</span> ease;
  -ms-<span class="hljs-attribute">transition</span>: all <span class="hljs-number">4s</span> ease;
  -o-<span class="hljs-attribute">transition</span>: all <span class="hljs-number">4s</span> ease;
}
</code></pre>
<p>ç°åœ¨æ·»åŠ æµè§ˆå™¨å¼•æ“å‰ç¼€ç»å¸¸æ˜¯ä¸ºäº†å…¼å®¹æ€§ï¼Œä¸ºäº†åœ¨æ—§ç‰ˆæœ¬æµè§ˆå™¨ä¹Ÿå¯ä»¥ä½¿ç”¨è¾ƒæ–°çš„CSSç‰¹æ€§ã€‚è€ŒAutoprefixeræ’ä»¶å°±å¯ä»¥å¸®æˆ‘ä»¬åšåˆ°è¿™ä»¶äº‹ã€‚è¿™ä¸ªæ’ä»¶æ²¡æœ‰æµè§ˆå™¨å…¼å®¹é…ç½®ï¼Œè€Œæ˜¯è¯»å–å·¥ç¨‹çš„Browserslisté…ç½®ã€‚è¿™é‡Œä¸¾ä¸ªä¾‹å­ã€‚é¦–å…ˆç»™å‡ºæˆ‘ä»¬è¦è½¬ä¹‰çš„CSSä»£ç ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">width</span>: stretch;
}
</code></pre>
<p>é€šè¿‡åœ¨package.jsonä¸­è®¾ç½®ä¸åŒçš„Browserslisté…ç½®ï¼Œæˆ‘ä»¬èƒ½å¾—åˆ°ä¸åŒçš„ä»£ç ç”Ÿæˆç»“æœï¼Œè¿™å¯¹åº”çš„æ˜¯ä¸åŒæµè§ˆå™¨ç‰ˆæœ¬çš„å…¼å®¹æ€§ã€‚å…¼å®¹çš„ç‰ˆæœ¬è¶Šå¤šï¼Œé‚£ä¹ˆéœ€è¦å¤„ç†çš„å°±è¶Šå¤šã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é…ç½® "browserslist": "&gt; 1%" çš„ç”Ÿæˆç»“æœ */</span> 
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">width</span>: -webkit-fill-available;
  <span class="hljs-attribute">width</span>: stretch;
}

<span class="hljs-comment">/* é…ç½® "browserslist": "&gt; 0.01%" çš„ç”Ÿæˆç»“æœ */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">display</span>: -moz-box;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">width</span>: -webkit-fill-available;
  <span class="hljs-attribute">width</span>: -moz-available;
  <span class="hljs-attribute">width</span>: stretch;
}
</code></pre>
<h3 data-id="heading-22">postcss-custom-properties</h3>
<p>postcss-custom-propertiesæ˜¯ä¸€ä¸ªå¢åŠ CSSå˜é‡å…¼å®¹æ€§çš„æ’ä»¶ï¼Œå¯¹äºä¸æ”¯æŒçš„CSS varçš„æµè§ˆå™¨æä¾›åå¤‡å€¼ã€‚è¿™é‡Œæ¥ä¸¾ä¾‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æºCSSä»£ç  */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--jza);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--jzb, red);
}

<span class="hljs-comment">/* ç”ŸæˆCSSä»£ç  */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--jza);
  <span class="hljs-attribute">color</span>: red;
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--jzb, red);
}
</code></pre>
<p>é€šè¿‡ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæä¾›äº†CSS varçš„åå¤‡å€¼ï¼Œé‚£ä¹ˆæ’ä»¶å°†ä¼šç”Ÿæˆä¸€ä¸ªä¸å¸¦CSS varçš„ç‰ˆæœ¬ã€‚å¦‚æœä¸æ”¯æŒçš„æµè§ˆå™¨è¯»å–åˆ°ä¸å¸¦CSS varçš„ç‰ˆæœ¬ï¼Œå¯ä»¥æ­£å¸¸å±•ç¤ºï¼›æ”¯æŒçš„æµè§ˆå™¨åˆ™ä½¿ç”¨varçš„ç‰ˆæœ¬è¦†ç›–å‰ä¸€ä¸ªä¸æ”¯æŒçš„å±æ€§å€¼ã€‚è¿™æ ·å®ç°äº†CSS varçš„æµè§ˆå™¨å…¼å®¹æ€§å¤„ç†ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰æä¾›åå¤‡å€¼ï¼Œåˆ™ä¸ä¼šç”Ÿæˆå…¼å®¹æ€§ä»£ç ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­æä¾›äº†CSSå˜é‡çš„å€¼ï¼Œé‚£ä¹ˆå³ä½¿varå‡½æ•°ä¸­æ²¡æä¾›åå¤‡å€¼ï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆå…¼å®¹æ€§ä»£ç ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¾‹å­ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æºCSSä»£ç  */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--jza</span>: blue;
}
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--jza);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--jzb);
}

<span class="hljs-comment">/* ç”ŸæˆCSSä»£ç  */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--jza</span>: blue;
}
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">background</span>: blue;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--jza);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--jzb);
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä¾‹å­ä¸­--jzaæä¾›äº†å˜é‡å€¼ï¼Œå› æ­¤ç”Ÿæˆäº†å…¼å®¹æ€§ä»£ç ï¼›jzbæ²¡æœ‰åˆ™ä¸ä¼šç”Ÿæˆã€‚å˜é‡å€¼å¿…é¡»ä¸ä½¿ç”¨å˜é‡çš„ä»£ç åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­æ‰æœ‰æ•ˆã€‚</p>
<h3 data-id="heading-23">postcss-global-data</h3>
<p>åœ¨å‰é¢postcss-custom-propertiesæ’ä»¶ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼Œåªæœ‰åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­æä¾›äº†CSSå˜é‡å€¼ï¼Œæ‰èƒ½ç”Ÿæˆå…¼å®¹æ€§ä»£ç ã€‚ä½†æ˜¯å·¥ç¨‹ä¸­çš„å…¨å±€å˜é‡ä¸ä½¿ç”¨ä½ç½®ä¸€èˆ¬ä¸ä¼šåœ¨ä¸€ä¸ªæ–‡ä»¶å†…ï¼Œè¿™ä¼šå¯¼è‡´postcss-custom-propertiesæ’ä»¶æ— æ³•è¯†åˆ«ã€‚è€Œpostcss-global-dataå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>postcss-global-dataæ’ä»¶å…è®¸æˆ‘ä»¬æä¾›ä¸€äº›å…¨å±€CSSæ–‡ä»¶ï¼Œä½œä¸ºæ¯ä¸ªè¢«ç¼–è¯‘æ–‡ä»¶çš„é™„åŠ æ•°æ®ä½¿ç”¨ã€‚ä½†è¿™äº›å…¨å±€æ–‡ä»¶çš„ç¼–è¯‘ç»“æœä¼šåœ¨è¾“å‡ºå‰è¢«ç§»é™¤ï¼Œå› æ­¤ä¸ä¼šä½¿æ¯ä¸ªç¼–è¯‘åæ–‡ä»¶çš„ä»£ç ä½“ç§¯å¢åŠ ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¾‹å­ï¼Œé¦–å…ˆæ˜¯PostCSSé…ç½®æ–‡ä»¶, æ³¨æ„postcss-global-dataæ’ä»¶å¿…é¡»åœ¨å‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> postcssCustomProperties = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss-custom-properties"</span>);
<span class="hljs-keyword">const</span> postcssGlobalData = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@csstools/postcss-global-data"</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">ctx</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-title function_">postcssGlobalData</span>({
        <span class="hljs-attr">files</span>: [<span class="hljs-string">"./global.css"</span>],
      }),
      postcssCustomProperties,
    ],
  };
};
</code></pre>
<p>ç„¶åæ˜¯è¦ç¼–è¯‘çš„æ–‡ä»¶index.csså’Œå…¨å±€CSSæ–‡ä»¶global.cssï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* global.css */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--jza</span>: blue;
}

<span class="hljs-comment">/* index.css */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--jza);
}
</code></pre>
<p>æœ€åæˆ‘ä»¬çœ‹ä¸‹ç¼–è¯‘çš„ç»“æœï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æœªä½¿ç”¨postcss-global-dataæ’ä»¶ */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--jza);
}

<span class="hljs-comment">/* å·²ä½¿ç”¨postcss-global-dataæ’ä»¶ */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">background</span>: blue;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--jza);
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°åœ¨ä½¿ç”¨postcss-global-dataæ’ä»¶çš„æƒ…å†µä¸‹ï¼Œç”Ÿæˆä»£ç ä¸­å¢åŠ äº†å…¼å®¹æ€§ä»£ç ï¼Œè¯»å–äº†å…¨å±€CSSæ–‡ä»¶ä¸­çš„å˜é‡å€¼ã€‚ä½†æ˜¯å…¨å±€CSSæ–‡ä»¶global.cssä¸­çš„CSSä»£ç å´æ²¡æœ‰åŒ…å«è¿›æ¥ã€‚</p>
<h3 data-id="heading-24">cssnano</h3>
<p>cssnanoæ˜¯ä¸€ä¸ªä»£ç å‹ç¼©å·¥å…·ï¼Œå°†CSSä»£ç è¿›è¡Œè¯­ä¹‰åŒ–å‹ç¼©ã€‚ä¸gzipç­‰çº¯å‹ç¼©å·¥å…·çš„ä¸ä¸€æ ·çš„æ˜¯ï¼Œå®ƒä¼šæ ¹æ®è¯­ä¹‰å¯¹ä»£ç æœ¬èº«è¿›è¡Œæ”¹åŠ¨ï¼Œä¾‹å¦‚å»æ‰æ³¨é‡Šï¼Œå»æ‰é‡å¤å±æ€§ï¼Œåˆå¹¶é€‰æ‹©å™¨ç­‰ç­‰ã€‚è¿™é‡Œæˆ‘ä»¬ä¸¾ä¾‹è¯•è¯•ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æºCSSä»£ç  */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">color</span>: red;
  <span class="hljs-comment">/* æˆ‘æ˜¯æ³¨é‡Š */</span>
  <span class="hljs-attribute">color</span>: red;
}
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-comment">/* ç”ŸæˆCSSä»£ç  */</span>
<span class="hljs-selector-class">.jzplp</span>{<span class="hljs-attribute">color</span>:red;<span class="hljs-attribute">width</span>:<span class="hljs-number">20px</span>}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒåŒæ ·çš„é€‰æ‹©å™¨è¢«åˆå¹¶ï¼ŒåŒæ ·çš„å±æ€§å€¼è¢«åˆå¹¶äº†ï¼Œæ³¨é‡Šå’Œä¸­é—´çš„æ¢è¡Œç¬¦ç©ºæ ¼éƒ½å»æ‰äº†ã€‚cssnanoè¿˜æ”¯æŒé¢„è®¾æˆ–è€…æ’ä»¶ï¼Œè¿™é‡Œå°±ä¸æè¿°äº†ã€‚</p>
<h2 data-id="heading-25">PostCSSå…¼å®¹æ€§æ’ä»¶</h2>
<h3 data-id="heading-26">ä½¿ç”¨postcss-preset-env</h3>
<p>å‰é¢ä»‹ç»äº†å‡ ä¸ªPostCSSçš„æ’ä»¶ï¼Œä½†æœ‰ä¸€ä¸ªæ’ä»¶å´ç•™åˆ°äº†è¿™ä¸€èŠ‚ä»‹ç»ï¼špostcss-preset-envã€‚ç±»ä¼¼ä¸Babelä¸­çš„@babel/preset-envé¢„è®¾ï¼Œpostcss-preset-envä¸­åŒ…å«äº†å¾ˆå¤šPostCSSæµè§ˆå™¨å…¼å®¹æ€§çš„æ’ä»¶ã€‚å®ƒä¼šè¯»å–æˆ‘ä»¬é…ç½®çš„æµè§ˆå™¨å…¼å®¹ç‰ˆæœ¬ï¼Œæ ¹æ®CSSDBä¸Šé¢çš„ç‰¹æ€§åˆ—è¡¨ä»¥åŠæˆ‘ä»¬ä»£ç ä½¿ç”¨äº†å“ªäº›æ–°ç‰¹æ€§ï¼Œé€‰æ‹©åº”ç”¨å“ªäº›æ’ä»¶ï¼Œä»è€Œåœ¨æµè§ˆå™¨ä¸æ”¯æŒæŸäº›CSSæ–°ç‰¹æ€§çš„æƒ…å†µä¸‹ï¼Œå…è®¸ä½¿ç”¨æ–°ç‰¹æ€§ã€‚</p>
<p>é¦–å…ˆæ¥å…¥æ’ä»¶ï¼Œç”±äºpostcss-preset-envæ˜¯åšå…¼å®¹æ€§å¤„ç†çš„ï¼Œå› æ­¤éœ€è¦æ”¾åœ¨å…¶å®ƒæ’ä»¶çš„åé¢ï¼Œè®©å…¼å®¹æ€§æ’ä»¶æœ€åå¤„ç†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> postcssPresetEnv = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss-preset-env"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// å…¶ä»–æ’ä»¶</span>
    <span class="hljs-title function_">postcssPresetEnv</span>({ <span class="hljs-comment">/* æ’ä»¶å‚æ•° */</span> }),
  ],
};
</code></pre>
<p>postcss-preset-envæ’ä»¶ä¹Ÿæ˜¯è¯»å–å·¥ç¨‹ä¸­çš„Browserslisté…ç½®ã€‚è¿™é‡Œæˆ‘ä»¬æä¾›ä¸€æ®µCSSæºä»£ç ï¼Œè®©postcss-preset-envæ’ä»¶åœ¨ä¸åŒæµè§ˆå™¨é…ç½®ä¸‹ç¼–è¯‘è¯•è¯•ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æºCSSä»£ç  */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">width</span>: stretch;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#01020380</span>;
}

<span class="hljs-comment">/* è½¬ä¹‰åCSSä»£ç  "browserslist": "&gt; 1%" */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">width</span>: -webkit-fill-available;
  <span class="hljs-attribute">width</span>: stretch;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#01020380</span>;
}

<span class="hljs-comment">/* è½¬ä¹‰åCSSä»£ç  "browserslist": "&gt; 0.1%" */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">width</span>: -webkit-fill-available;
  <span class="hljs-attribute">width</span>: -moz-available;
  <span class="hljs-attribute">width</span>: stretch;
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0.50196</span>);
}
</code></pre>
<p>é€šè¿‡ä¸Šé¢çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸åŒçš„æµè§ˆå™¨å…¼å®¹æ€§é…ç½®ï¼Œä¼šç”Ÿæˆä¸åŒçš„ä»£ç ã€‚postcss-preset-envä¸­åŒ…å«äº†Autoprefixerï¼Œå› æ­¤ä¼šè‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å¼•æ“å‰ç¼€ã€‚æ­¤å¤–ï¼Œè¿˜ä¼šæ ¹æ®æ”¯æŒç¨‹åº¦æ·»åŠ å…¶å®ƒå…¼å®¹æ€§ä»£ç ã€‚</p>
<p>ä¾‹å¦‚#rrggbbaaï¼Œæ˜¯åˆ†åˆ«ä»¥ä¸¤ä¸ª16è¿›åˆ¶æ•°å­—è¡¨ç¤ºçº¢Rç»¿Gè“Bé€æ˜åº¦Aè¡¨ç¤ºé¢œè‰²çš„æ–¹å¼ï¼Œåªåœ¨ç›¸å¯¹è¾ƒæ–°çš„æµè§ˆå™¨ä¸­æ”¯æŒã€‚å½“browserslist&gt;1%æ—¶ä¸è¿›è¡Œè½¬ä¹‰ï¼Œå½“&gt;0.1%æ—¶å°±è½¬ä¹‰ä¸ºrgbaå‡½æ•°çš„å½¢å¼ã€‚</p>
<h3 data-id="heading-27">æ˜¯å¦ä»»ä½•è¯­æ³•éƒ½èƒ½è½¬ä¹‰</h3>
<p>postcss-preset-envæ’ä»¶å¯ä»¥æ ¹æ®æºCSSä»£ç ä½¿ç”¨çš„ç‰¹æ€§æ¥è½¬ä¹‰ä»£ç ï¼Œå¢åŠ å…¼å®¹æ€§ã€‚é‚£ä¹ˆæ˜¯ä¸æ˜¯ä»€ä¹ˆç‰¹æ€§éƒ½èƒ½è½¬ä¹‰ï¼Œè½¬ä¹‰åçš„æ•ˆæœæ˜¯ä¸æ˜¯ä¸è½¬ä¹‰å‰ä¸€è‡´ï¼Ÿè¿™å¾ˆæ˜¾ç„¶æ˜¯å¦å®šçš„ã€‚å³ä½¿æ˜¯JavaScriptä»£ç ï¼Œè½¬ä¹‰å’ŒPolyfillä¹Ÿåšä¸åˆ°å°†æ‰€æœ‰æ–°ç‰¹æ€§çš„å…¼å®¹æ¨¡å¼è¿è¡Œå’Œæ–°ç‰¹æ€§å®Œå…¨ä¸€è‡´ã€‚ä¾‹å¦‚Vue3ä¹‹æ‰€ä»¥ä¸å…¼å®¹IEçš„ä¸€ä¸ªåŸå› ï¼Œå°±æ˜¯æ— æ³•å…¼å®¹JavaScriptè¯­æ³•ä¸­Proxyçš„æ‰€æœ‰ç‰¹æ€§ã€‚è‡³äºCSSå…¼å®¹æ€§çš„é™åˆ¶å°±æ›´å¤§äº†ã€‚è¿™é‡Œæˆ‘ä»¬ä¾ç„¶ä½¿ç”¨ä¹‹å‰çš„CSSå˜é‡ä»£ç æ¥ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æºCSSä»£ç  */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--jza, red);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--jzb);
}

<span class="hljs-comment">/* ç”ŸæˆCSSä»£ç  "browserslist": "&gt; 0.001%" */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">background</span>: red;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--jza, red);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--jzb);
}
</code></pre>
<p>å³ä½¿æµè§ˆå™¨å…¼å®¹æ€§é…ç½®çš„è¦æ±‚å¾ˆé«˜ï¼Œç”Ÿæˆçš„ä»£ç ä¹Ÿæ˜¯è¿™æ ·ã€‚å½“æˆ‘ä»¬æä¾›äº†åå¤‡å€¼æ—¶ï¼Œæ’ä»¶ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆå…¼å®¹æ€§çš„å›ºå®šå€¼background: redã€‚å¦‚æœæ²¡æä¾›ï¼Œé‚£æ’ä»¶åˆ™æ— èƒ½ä¸ºä¾‹ã€‚ä¸ç®¡æœ‰æ²¡æœ‰ç”Ÿæˆå›ºå®šå€¼ï¼Œè¿™æ®µä»£ç åœ¨ä¸æ”¯æŒCSSå˜é‡çš„æµè§ˆå™¨è¿è¡Œæ—¶ï¼Œæ•ˆæœä¸æ”¯æŒçš„æµè§ˆå™¨ä¸ä¸€æ ·ï¼šå› ä¸ºå˜é‡çš„è¿è¡Œæ—¶å˜æ›´åŠŸèƒ½æ— æ³•è¢«å…¼å®¹ã€‚å› æ­¤è¿™æ˜æ˜¾å¯ä»¥å¾—å‡ºï¼šè½¬ä¹‰æ’ä»¶å¹¶ä¸æ˜¯ä»»ä½•å±æ€§éƒ½èƒ½è½¬ä¹‰ï¼Œç›¸åå®ƒä¸èƒ½åšåˆ°çš„äº‹æƒ…ç‰¹åˆ«å¤šï¼Œåªèƒ½å¤Ÿå°½é‡ã€‚</p>
<h2 data-id="heading-28">PostCSSä¸SCSSå’ŒLess</h2>
<p>è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬ä»¥Webapckä½œä¸ºç¯å¢ƒï¼Œä»ç›´æ¥å¼•å…¥SCSSä¸Lesså¼€å§‹ï¼Œå†åˆ°ç”¨PostCSSåšåå¤„ç†å™¨ï¼Œå†ç›´æ¥ç”¨PostCSSè§£æSCSSä¸Lessã€‚</p>
<h3 data-id="heading-29">Webapckå¼•å…¥SCSS</h3>
<p>é¦–å…ˆå°è¯•åœ¨Webpackä¸­å¼•å…¥SCSSã€‚è¿˜æ˜¯å‰é¢åˆ›å»ºçš„Webpackå·¥ç¨‹ï¼Œå®‰è£…ä¾èµ–sasså’Œsass-loaderï¼Œç„¶åä¿®æ”¹webpack.config.jsï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">"production"</span>,
  <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index.js"</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">"main.js"</span>,
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"dist"</span>),
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>],
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.scss$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>, <span class="hljs-string">"sass-loader"</span>],
      },
    ],
  },
};
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¢åŠ äº†ä¸€æ¡è§„åˆ™åŒ¹é…SCSSæ–‡ä»¶ã€‚å…ˆä½¿ç”¨sass-loaderæŠŠSCSSè§£ææˆCSSï¼Œç„¶åå†ç”¨å¸¸è§„çš„CSSå¤„ç†ã€‚æˆ‘ä»¬è¦æ‰“åŒ…çš„ä»£ç å¦‚ä¸‹ã€‚é¦–å…ˆæ˜¯å…¥å£æ–‡ä»¶ï¼Œå…¶ä¸­å¼•å…¥äº†CSSå’ŒSCSSæ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-string">"./index.scss"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.css"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);
</code></pre>
<p>ç„¶åæ˜¯CSSå’ŒSCSSæ–‡ä»¶å†…å®¹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* index.css */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">color</span>: blue;
}

<span class="hljs-comment">/* index.scss */</span>
$jzabc: red;
<span class="hljs-selector-tag">div</span> {
  <span class="hljs-attribute">color</span>: $jzabc;
}
</code></pre>
<p>SCSSæ–‡ä»¶ä¸­ä½¿ç”¨äº†å˜é‡çš„ç‰¹æ€§ï¼ŒSCSSåœ¨ç¼–è¯‘åä¼šå˜æˆå®ƒçš„å®é™…å€¼ï¼Œæˆ‘ä»¬çœ‹çœ‹æ‰“åŒ…ç»“æœã€‚æ–‡ä»¶è¾ƒé•¿ï¼Œä»…å±•ç¤ºç›¸å…³éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-js" lang="js">i.<span class="hljs-title function_">push</span>([e.<span class="hljs-property">id</span>, <span class="hljs-string">".jzplp {\n  color: blue;\n}"</span>, <span class="hljs-string">""</span>]);
i.<span class="hljs-title function_">push</span>([e.<span class="hljs-property">id</span>, <span class="hljs-string">"div{color:red}"</span>, <span class="hljs-string">""</span>]);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒSCSSæ–‡ä»¶è¢«ç¼–è¯‘æˆåŠŸï¼Œä¹Ÿæ‰“åŒ…è¿›äº†æœ€ç»ˆæˆæœä¸­ã€‚</p>
<h3 data-id="heading-30">Webapckå¼•å…¥Less</h3>
<p>å†å°è¯•åœ¨Webpackä¸­å¼•å…¥Lessã€‚å®‰è£…ä¾èµ–lesså’Œless-loaderï¼Œç„¶åä¿®æ”¹webpack.config.jsï¼Œè¿™é‡Œåªåˆ—å‡ºmoduleéƒ¨åˆ†ï¼Œå…¶å®ƒå’ŒWebapckå¼•å…¥SCSSä¸€è‡´ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>],
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.less$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>, <span class="hljs-string">"less-loader"</span>],
      },
    ],
  },
};
</code></pre>
<p>ç„¶ååˆ›å»ºindex.lessï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@jzabc:</span> red;
<span class="hljs-selector-tag">div</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-variable">@jzabc</span>;
}
</code></pre>
<p>åœ¨index.jsä¸­å¼•å…¥index.lessï¼š<code>import "./index.less";</code>ã€‚å…¶å®ƒå†…å®¹å’Œä¸Šé¢ä¸€è‡´ï¼Œç„¶åè¿›è¡Œæ‰“åŒ…ï¼Œç”Ÿæˆç»“æœå¦‚ä¸‹ï¼ˆä»…å±•ç¤ºç›¸å…³éƒ¨åˆ†ï¼‰ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒLessæ–‡ä»¶ä¹Ÿè¢«ç¼–è¯‘æˆåŠŸï¼Œä¹Ÿæ‰“åŒ…è¿›äº†æœ€ç»ˆæˆæœä¸­ã€‚</p>
<pre><code class="hljs language-js" lang="js">i.<span class="hljs-title function_">push</span>([e.<span class="hljs-property">id</span>, <span class="hljs-string">"div {\n  color: red;\n}\n"</span>, <span class="hljs-string">""</span>]);
i.<span class="hljs-title function_">push</span>([e.<span class="hljs-property">id</span>, <span class="hljs-string">".jzplp {\n  color: blue;\n}"</span>, <span class="hljs-string">""</span>]);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);
</code></pre>
<h3 data-id="heading-31">ç”¨PostCSSåšåå¤„ç†å™¨</h3>
<p>åœ¨æ–‡ç« çš„ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬ä»‹ç»äº†PostCSSæœ€å¸¸ç”¨ä½œåå¤„ç†å™¨ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬å°±åœ¨å‰é¢å¼•å…¥SCSSä¸Lessçš„åŸºç¡€ä¸Šï¼Œé›†æˆPostCSSç”¨ä½œåå¤„ç†å™¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);

<span class="hljs-keyword">const</span> postcssConfig = {
  <span class="hljs-attr">loader</span>: <span class="hljs-string">"postcss-loader"</span>,
  <span class="hljs-attr">options</span>: {
    <span class="hljs-attr">postcssOptions</span>: {
      <span class="hljs-attr">plugins</span>: [<span class="hljs-string">"autoprefixer"</span>],
    },
  },
};

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">"production"</span>,
  <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index.js"</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">"main.js"</span>,
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"dist"</span>),
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>, postcssConfig],
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.less$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>, postcssConfig, <span class="hljs-string">"less-loader"</span>],
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.scss$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>, postcssConfig, <span class="hljs-string">"sass-loader"</span>],
      },
    ],
  },
};
</code></pre>
<p>ä¸Šé¢åŒæ—¶æ”¯æŒCSS/SCSS/Lessæ–‡ä»¶å¼•å…¥ï¼Œéƒ½é…ç½®äº†PostCSSã€‚çœ‹PostCSSçš„ä½ç½®æ˜¯åœ¨SCSSå’ŒLessä¹‹åï¼Œè¿™å°±æ˜¯åå¤„ç†å™¨çš„å«ä¹‰ã€‚ç„¶åæ˜¯è¦æ‰“åŒ…çš„å„ä¸ªæ–‡ä»¶ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/* index.js */</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.scss"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.less"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.css"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);

<span class="hljs-comment">/* index.scss */</span>
<span class="hljs-attr">$jzabc</span>: red;
.<span class="hljs-property">jzplp</span>-scss {
  <span class="hljs-attr">color</span>: $jzabc;
  <span class="hljs-attr">width</span>: stretch;
}

<span class="hljs-comment">/* index.less */</span>
@<span class="hljs-attr">jzabc</span>: red;
.<span class="hljs-property">jzplp</span>-less {
  <span class="hljs-attr">color</span>: @jzabc;
  <span class="hljs-attr">width</span>: stretch;
}

<span class="hljs-comment">/* index.css */</span>
.<span class="hljs-property">jzplp</span>-css {
  <span class="hljs-attr">color</span>: blue;
  <span class="hljs-attr">width</span>: stretch;
}
</code></pre>
<p>æœ€åç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">".jzplp-scss{color:red;width:-webkit-fill-available;width:-moz-available;width:stretch}"</span>,
<span class="hljs-string">".jzplp-css {\n  color: blue;\n  width: -webkit-fill-available;\n  width: -moz-available;\n  width: stretch;\n}"</span>,
<span class="hljs-string">".jzplp-less {\n  color: red;\n  width: -webkit-fill-available;\n  width: -moz-available;\n  width: stretch;\n}\n"</span>,
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸ä»…æˆåŠŸç¼–è¯‘äº†SCSSå’ŒLessï¼Œè€Œä¸”ä»£ç ç»è¿‡äº†PostCSSå¤„ç†ï¼ŒåŠ ä¸Šäº†æµè§ˆå™¨å¼•æ“å‰ç¼€ã€‚</p>
<h3 data-id="heading-32">PostCSSç›´æ¥è§£æSCSSä¸Less</h3>
<p>åœ¨å‰é¢PostCSSç”¨ä½œåå¤„ç†å™¨çš„æ–¹å¼ä¸­ï¼Œä¿®æ”¹ä¸€ä¸‹ç¼–è¯‘çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/* index.js */</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.scss"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.less"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.css"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);

<span class="hljs-comment">/* index.scss */</span>
<span class="hljs-attr">$jzabc</span>: stretch;
.<span class="hljs-property">jzplp</span>-scss {
  <span class="hljs-attr">width</span>: $jzabc;
}

<span class="hljs-comment">/* index.less */</span>
@<span class="hljs-attr">jzabc</span>: stretch;
.<span class="hljs-property">jzplp</span>-less {
  <span class="hljs-attr">width</span>: @jzabc;
}
</code></pre>
<p>é‡æ–°ç¼–è¯‘ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">".jzplp-less {\n  width: -webkit-fill-available;\n  width: -moz-available;\n  width: stretch;\n}\n"</span>
<span class="hljs-string">".jzplp-scss{width:-webkit-fill-available;width:-moz-available;width:stretch}"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);
</code></pre>
<p>å¦‚æœæˆ‘ä»¬å°†postcss-loaderä¸less-loaderå’Œsass-loaderæ¢ä¸€ä¸‹ä½ç½®ï¼Œå…ˆå¤„ç†PostCSSï¼Œå†ç¼–è¯‘SCSSå’ŒLessï¼Œç»“æœä¼šå¦‚ä½•å‘¢ï¼Ÿå‚è€ƒé…ç½®å¦‚ä¸‹ï¼Œä»…å±•ç¤ºæ”¹åŠ¨éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.less$/i</span>,
  <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>, <span class="hljs-string">"less-loader"</span>, postcssConfig],
},
{
  <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.scss$/i</span>,
  <span class="hljs-attr">use</span>: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>, <span class="hljs-string">"sass-loader"</span>, postcssConfig],
},
</code></pre>
<p>é‡æ–°ç¼–è¯‘ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">".jzplp-less {\n  width: stretch;\n}\n"</span>
<span class="hljs-string">".jzplp-scss{width:stretch}"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆç»“æœå¹¶ä¸åŒï¼Œstretchæ²¡æœ‰å¢åŠ æµè§ˆå™¨å¼•æ“å‰ç¼€ã€‚åŸå› æ˜¯å…ˆç»è¿‡PostCSSå¤„ç†æ—¶ï¼Œå¹¶ä¸èƒ½è¯†åˆ«SCSSå’ŒLessè¯­æ³•ï¼Œå› æ­¤æ— æ³•å¤„ç†ç›¸å…³çš„å†…å®¹ã€‚è€Œå…¶ä¸­çš„æ­£å¸¸CSSè¯­æ³•ï¼ŒPostCSSä¾ç„¶å¯ä»¥å¤„ç†ã€‚</p>
<p>PostCSSè¿˜æä¾›äº†SCSSå’ŒLessè¯­æ³•çš„è§£æå™¨postcss-scsså’Œpostcss-lessï¼Œæˆ‘ä»¬å¼•å…¥è¯•ä¸€ä¸‹ã€‚é¦–å…ˆä¿®æ”¹Webapcké…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.less$/i</span>,
  <span class="hljs-attr">use</span>: [
    <span class="hljs-string">"style-loader"</span>,
    <span class="hljs-string">"css-loader"</span>,
    <span class="hljs-string">"less-loader"</span>,
    {
      <span class="hljs-attr">loader</span>: <span class="hljs-string">"postcss-loader"</span>,
      <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">postcssOptions</span>: {
          <span class="hljs-attr">syntax</span>: <span class="hljs-string">'postcss-less'</span>,
          <span class="hljs-attr">plugins</span>: [<span class="hljs-string">"autoprefixer"</span>],
        },
      },
    },
  ],
},
{
  <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.scss$/i</span>,
  <span class="hljs-attr">use</span>: [
    <span class="hljs-string">"style-loader"</span>,
    <span class="hljs-string">"css-loader"</span>,
    <span class="hljs-string">"sass-loader"</span>,
    {
      <span class="hljs-attr">loader</span>: <span class="hljs-string">"postcss-loader"</span>,
      <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">postcssOptions</span>: {
          <span class="hljs-attr">syntax</span>: <span class="hljs-string">'postcss-scss'</span>,
          <span class="hljs-attr">plugins</span>: [<span class="hljs-string">"autoprefixer"</span>],
        },
      },
    },
  ],
},
</code></pre>
<p>é‡æ–°ç¼–è¯‘ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">".jzplp-less {\n  width: stretch;\n}\n"</span>
<span class="hljs-string">".jzplp-scss{width:stretch}"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œjzplp"</span>);
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æ•ˆæœä¸ä¸Šé¢PostCSSå…ˆå¤„ç†çš„æƒ…å†µä¸€è‡´ï¼Œstretchæ²¡æœ‰å¢åŠ æµè§ˆå™¨å¼•æ“å‰ç¼€ã€‚è¿™æ˜¯å› ä¸ºpostcss-scsså’Œpostcss-lesséƒ½æ˜¯å°†SCSSå’ŒLessä»£ç è½¬æ¢ä¸ºASTï¼Œç„¶åå†å°†ASTè½¬æ¢å›æ¥ï¼Œå¹¶ä¸ç¼–è¯‘ä¸ºCSSä»£ç ã€‚å› æ­¤SCSSå’ŒLesså˜é‡å¹¶æœªè¢«PostCSSæ’ä»¶è½¬ä¹‰ã€‚å®ƒä»¬çš„ä½œç”¨ä¸»è¦æ˜¯æä¾›SCSSå’ŒLessçš„ASTç»“ç‚¹ï¼Œæ–¹ä¾¿å¯¹åº”çš„SCSSå’ŒLessçš„PostCSSæ’ä»¶åšå¤„ç†ã€‚è™½ç„¶ç›¸å…³æ–‡æ¡£çš„ä½¿ç”¨åœºæ™¯è¯´äº†å¯ä»¥ç›´æ¥ä½¿ç”¨æ™®é€šPostCSSæ’ä»¶å¤„ç†ï¼Œä½†ä¸Šé¢çš„æµ‹è¯•ç»“æœè¯´æ˜ï¼Œå¯ä»¥å¤„ç†ä½†å¹¶ä¸å®Œç¾ã€‚</p>
<h2 data-id="heading-33">PostCSSçš„SourceMap</h2>
<h3 data-id="heading-34">å‘½ä»¤è¡Œç”ŸæˆSourceMap</h3>
<p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹å‘½ä»¤è¡Œæ–¹å¼å¦‚ä½•ç”ŸæˆSourceMapã€‚å…ˆç»™å‡ºä¸€ä¸ªç®€å•çš„æºæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">width</span>: stretch;
}
<span class="hljs-selector-tag">div</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--abc, red);
}
</code></pre>
<p>ç„¶åæ‰§è¡Œå‘½ä»¤ï¼š<code>postcss index.css -u autoprefixer -o out.css</code>ã€‚è¿™ç§æƒ…å†µä¸‹PostCSSä¸ä¼šå»è¯»postcss.config.jsé…ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯ä»…ä½¿ç”¨å‘½ä»¤è¡Œä¼ å‚æ¥è½¬ä¹‰ã€‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒPostCSSä¼šç”Ÿæˆinlineï¼Œå³é™„åŠ åœ¨ç”Ÿæˆæ–‡ä»¶ä¸­ä½œä¸ºæ³¨é‡Šçš„SourceMapã€‚ç”Ÿæˆç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">width</span>: -webkit-fill-available;
  <span class="hljs-attribute">width</span>: -moz-available;
  <span class="hljs-attribute">width</span>: stretch;
}
<span class="hljs-selector-tag">div</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--abc, red);
}

<span class="hljs-comment">/*# sourceMappingURL* é˜²æ­¢æŠ¥é”™ *=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNzcy9pbmRleC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2QkFBYztFQUFkLHFCQUFjO0VBQWQsY0FBYztBQUNoQjtBQUNBO0VBQ0Usc0JBQXNCO0FBQ3hCIiwiZmlsZSI6Im91dC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuanpwbHAge1xyXG4gIHdpZHRoOiBzdHJldGNoO1xyXG59XHJcbmRpdiB7XHJcbiAgY29sb3I6IHZhcigtLWFiYywgcmVkKTtcclxufVxyXG4iXX0= */</span>
</code></pre>
<p>å¦‚æœä¸å¸Œæœ›ç”ŸæˆSourceMapï¼Œé‚£ä¹ˆå‘½ä»¤è¡Œä¸­é™„åŠ --no-mapå³å¯ï¼š<code>postcss css/index.css -u autoprefixer -o out.css --no-map</code>ã€‚ä½†å¦‚æœå¸Œæœ›ç”Ÿæˆç‹¬ç«‹çš„SourceMapæ–‡ä»¶ï¼Œå°±å¿…é¡»ä½¿ç”¨PostCSSé…ç½®æ–‡ä»¶äº†ã€‚æˆ‘ä»¬å…ˆæŠŠå‘½ä»¤è¡Œä¿®æ”¹ä¸ºï¼š<code>postcss css/index.css -o out.css</code>ã€‚ç„¶åé…ç½®postcss.config.jsï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"autoprefixer"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [autoprefixer],
};
</code></pre>
<p>æ‰§è¡Œå‘½ä»¤è¡Œï¼Œå‘ç°ç”Ÿæˆæ–‡ä»¶ä¸--no-mapæ•ˆæœä¸€è‡´ï¼Œä¸ç”ŸæˆSourceMapã€‚å¦‚æœç”Ÿæˆinlineçš„SourceMapï¼Œé…ç½®æ–‡ä»¶ä¿®æ”¹ä¸ºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"autoprefixer"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [autoprefixer],
  <span class="hljs-attr">map</span>: <span class="hljs-literal">true</span>,
};
</code></pre>
<p>å¦‚æœå¸Œæœ›ç”Ÿæˆçš„ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼Œåˆ™é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸ºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"autoprefixer"</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [autoprefixer],
  <span class="hljs-attr">map</span>: { <span class="hljs-attr">inline</span>: <span class="hljs-literal">false</span> },
};
</code></pre>
<p>è¿™æ—¶å€™ä¼šç”Ÿæˆä¸€ä¸ªæ–‡ä»¶out.css.mapï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-string">"version"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-string">"sources"</span>: [
    <span class="hljs-string">"css/index.css"</span>
  ],
  <span class="hljs-string">"names"</span>: [],
  <span class="hljs-string">"mappings"</span>: <span class="hljs-string">"AAAA;EACE,6BAAc;EAAd,qBAAc;EAAd,cAAc;AAChB;AACA;EACE,sBAAsB;AACxB"</span>,
  <span class="hljs-string">"file"</span>: <span class="hljs-string">"out.css"</span>,
  <span class="hljs-string">"sourcesContent"</span>: [
    <span class="hljs-string">".jzplp {\r\n  width: stretch;\r\n}\r\ndiv {\r\n  color: var(--abc, red);\r\n}\r\n"</span>
  ]
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªSourceMapæ–‡ä»¶çš„æ ¼å¼è§„èŒƒä¸ä¹‹å‰JavaScriptçš„SourceMapè§„èŒƒæ˜¯ä¸€è‡´çš„ã€‚</p>
<h3 data-id="heading-35">APIæ–¹å¼ç”ŸæˆSourceMap</h3>
<p>APIæ–¹å¼ä¸å‘½ä»¤è¡Œçš„é…ç½®æ–¹å¼ç±»ä¼¼ï¼Œé¦–å…ˆæ˜¯ç”Ÿæˆinlineçš„SourceMapï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"autoprefixer"</span>);
<span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss"</span>);

<span class="hljs-keyword">const</span> originData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./css/index.css"</span>, <span class="hljs-string">"utf-8"</span>);

<span class="hljs-title function_">postcss</span>([autoprefixer])
  .<span class="hljs-title function_">process</span>(originData, { <span class="hljs-attr">from</span>: <span class="hljs-string">"css/index.css"</span>, <span class="hljs-attr">to</span>: <span class="hljs-string">"out.css"</span>, <span class="hljs-attr">map</span>: <span class="hljs-literal">true</span> })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">css</span>);
    fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'out.css'</span>, res.<span class="hljs-property">css</span>);
  });
</code></pre>
<p>ç”Ÿæˆçš„SourceMapä¼šç›´æ¥åœ¨res.cssä¸­ä½œä¸ºæ³¨é‡Šå­˜åœ¨ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶ä¸­å’Œå‘½ä»¤è¡Œè¾“å‡ºä¸€è‡´ã€‚å¦‚æœä¸å¸Œæœ›ç”Ÿæˆinlineçš„SourceMapï¼Œåˆ™æ˜¯è¿™æ ·é…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">postcss</span>([autoprefixer])
  .<span class="hljs-title function_">process</span>(originData, {
    <span class="hljs-attr">from</span>: <span class="hljs-string">"css/index.css"</span>,
    <span class="hljs-attr">to</span>: <span class="hljs-string">"out.css"</span>,
    <span class="hljs-attr">map</span>: { <span class="hljs-attr">inline</span>: <span class="hljs-literal">false</span> },
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">map</span>);
    <span class="hljs-keyword">const</span> str = res.<span class="hljs-property">map</span>.<span class="hljs-title function_">toString</span>();
    fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">"out.css"</span>, res.<span class="hljs-property">css</span>);
    fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">"out.css.map"</span>, str);
  });

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
SourceMapGenerator{...çœç•¥ }
*/</span>
</code></pre>
<p>è¿™æ—¶å€™SourceMapåœ¨res.mapä¸­ï¼Œè€Œä¸”ä¸æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜åœ¨ï¼Œè€Œæ˜¯ä»¥SourceMapGeneratorå¯¹è±¡çš„å½¢å¼å­˜åœ¨ã€‚æˆ‘ä»¬åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fjzplp.github.io%2F2025%2Fjs-sourcemap.html" target="_blank" title="https://jzplp.github.io/2025/js-sourcemap.html" ref="nofollow noopener noreferrer">å¿«é€Ÿå®šä½æºç é—®é¢˜ï¼šSourceMapçš„ç”Ÿæˆ/ä½¿ç”¨/æ–‡ä»¶æ ¼å¼ä¸å†å²</a>æ–‡ç« ä¸­æè¿°è¿‡ï¼Œè¿™æ˜¯source-mapåŒ…ä¸­çš„å¯¹è±¡ç±»å‹ï¼Œå¯ä»¥ç›´æ¥è¾“å‡ºSourceMapå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥åšè¿›ä¸€æ­¥å¤„ç†ã€‚è¿™é‡Œå°†å®ƒè¾“å‡ºæˆå­—ç¬¦ä¸²ï¼Œå¹¶æ‰“å°åˆ°æ–‡ä»¶ä¸­ï¼Œå†…å®¹å’Œå‘½ä»¤è¡Œè¾“å‡ºä¸€è‡´ã€‚</p>
<h3 data-id="heading-36">SourceMapå†…å®¹è§£æ</h3>
<p>æˆ‘ä»¬ä½¿ç”¨å‰é¢æ–‡ç« <a href="https://link.juejin.cn?target=https%3A%2F%2Fjzplp.github.io%2F2025%2Fwebpack-sourcemap.html" target="_blank" title="https://jzplp.github.io/2025/webpack-sourcemap.html" ref="nofollow noopener noreferrer">Webpackä¸­å„ç§devtoolé…ç½®çš„å«ä¹‰ä¸SourceMapç”Ÿæˆé€»è¾‘</a>ä¸­ä»‹ç»è¿‡çš„è§£æSourceMapå·¥å…·ä»£ç ï¼Œæ¥è§£æä¸Šé¢ç”Ÿæˆçš„SourceMapæ–‡ä»¶ã€‚è§£æç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">1</span>  åˆ—<span class="hljs-number">0</span>  æºä»£ç è¡Œ<span class="hljs-number">1</span>  åˆ—<span class="hljs-number">0</span>  æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">2</span>  åˆ—<span class="hljs-number">2</span>  æºä»£ç è¡Œ<span class="hljs-number">2</span>  åˆ—<span class="hljs-number">2</span>  æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">2</span>  åˆ—<span class="hljs-number">31</span> æºä»£ç è¡Œ<span class="hljs-number">2</span>  åˆ—<span class="hljs-number">16</span> æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">3</span>  åˆ—<span class="hljs-number">2</span>  æºä»£ç è¡Œ<span class="hljs-number">2</span>  åˆ—<span class="hljs-number">2</span>  æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">3</span>  åˆ—<span class="hljs-number">23</span> æºä»£ç è¡Œ<span class="hljs-number">2</span>  åˆ—<span class="hljs-number">16</span> æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">4</span>  åˆ—<span class="hljs-number">2</span>  æºä»£ç è¡Œ<span class="hljs-number">2</span>  åˆ—<span class="hljs-number">2</span>  æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">4</span>  åˆ—<span class="hljs-number">16</span> æºä»£ç è¡Œ<span class="hljs-number">2</span>  åˆ—<span class="hljs-number">16</span> æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">5</span>  åˆ—<span class="hljs-number">0</span>  æºä»£ç è¡Œ<span class="hljs-number">3</span>  åˆ—<span class="hljs-number">0</span>  æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">6</span>  åˆ—<span class="hljs-number">0</span>  æºä»£ç è¡Œ<span class="hljs-number">4</span>  åˆ—<span class="hljs-number">0</span>  æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">7</span>  åˆ—<span class="hljs-number">2</span>  æºä»£ç è¡Œ<span class="hljs-number">5</span>  åˆ—<span class="hljs-number">2</span>  æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">7</span>  åˆ—<span class="hljs-number">24</span> æºä»£ç è¡Œ<span class="hljs-number">5</span>  åˆ—<span class="hljs-number">24</span> æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
ç”Ÿæˆä»£ç è¡Œ<span class="hljs-number">8</span>  åˆ—<span class="hljs-number">0</span>  æºä»£ç è¡Œ<span class="hljs-number">6</span>  åˆ—<span class="hljs-number">0</span>  æºåç§°-            æºæ–‡ä»¶<span class="hljs-symbol">:css/index</span>.css
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå…¨æ˜¯ç”Ÿæˆä»£ç å’Œæºç çš„å¯¹åº”å…³ç³»ï¼Œä¸€ä¸ªæ ‡è¯†ç¬¦éƒ½æ²¡æœ‰ã€‚è¿™ä¹Ÿæ­£å¸¸ï¼Œæ¯•ç«ŸCSSä»£ç ä¸­å¹¶æ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸ŠJavaScriptçš„é‚£ç§æ ‡è¯†ã€‚è¿™é‡Œæˆ‘ä»¬è¡¨æ ¼åˆ—ä¸€ä¸‹å¯¹åº”å…³ç³»æŒ‡å‘çš„å…·ä½“å†…å®¹ï¼š</p>













































































































<table><thead><tr><th>æºä»£ç æ ‡è¯†ç¬¦</th><th>æºä»£ç è¡Œå·</th><th>æºä»£ç åˆ—å·</th><th>ç”Ÿæˆä»£ç æ ‡è¯†ç¬¦</th><th>ç”Ÿæˆä»£ç è¡Œå·</th><th>ç”Ÿæˆä»£ç åˆ—å·</th></tr></thead><tbody><tr><td>.jzplp</td><td>1</td><td>0</td><td>.jzplp</td><td>1</td><td>0</td></tr><tr><td>width</td><td>2</td><td>2</td><td>width</td><td>2</td><td>2</td></tr><tr><td>;</td><td>2</td><td>16</td><td>;</td><td>2</td><td>31</td></tr><tr><td>width</td><td>2</td><td>2</td><td>width</td><td>3</td><td>2</td></tr><tr><td>;</td><td>2</td><td>16</td><td>;</td><td>3</td><td>23</td></tr><tr><td>width</td><td>2</td><td>2</td><td>width</td><td>4</td><td>2</td></tr><tr><td>;</td><td>2</td><td>16</td><td>;</td><td>4</td><td>16</td></tr><tr><td>}</td><td>3</td><td>0</td><td>}</td><td>5</td><td>0</td></tr><tr><td>div</td><td>4</td><td>0</td><td>div</td><td>6</td><td>0</td></tr><tr><td>color</td><td>5</td><td>2</td><td>color</td><td>7</td><td>2</td></tr><tr><td>;</td><td>5</td><td>24</td><td>;</td><td>7</td><td>24</td></tr><tr><td>}</td><td>6</td><td>0</td><td>}</td><td>8</td><td>0</td></tr></tbody></table>
<p>é€šè¿‡ä¸Šé¢çš„è¡¨æ ¼ï¼Œå¯ä»¥çœ‹åˆ°PostCSSè®°å½•SourceMapçš„è§„å¾‹ï¼šæ ‡è®°è§„åˆ™é€‰æ‹©å™¨çš„å¼€å¤´ï¼Œè§„åˆ™å¤§æ‹¬å·çš„ç»“å°¾}ã€‚æ ‡è®°CSSå£°æ˜çš„å¼€å¤´ï¼Œå£°æ˜å€¼çš„ç»“å°¾;ã€‚</p>
<h2 data-id="heading-37">PostCSSçš„AST</h2>
<h3 data-id="heading-38">ç”ŸæˆASTæ•°æ®</h3>
<p>æˆ‘ä»¬æ¥è¯•ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨PostCSSç”ŸæˆASTæ•°æ®ã€‚é¦–å…ˆè¿˜æ˜¯å…ˆæ„é€ ä¸€ä¸ªCSSæ–‡ä»¶ï¼Œé‡Œé¢æ¶µç›–äº†CSSçš„ä¸€äº›å¸¸è§åœºæ™¯ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--abc, red);
}
<span class="hljs-selector-tag">div</span> <span class="hljs-selector-class">.jzplp2</span> {
  <span class="hljs-attribute">color</span>: blue <span class="hljs-meta">!important</span>;
}
<span class="hljs-comment">/* this is comment jzplp */</span>
<span class="hljs-selector-class">.jz1</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-selector-class">.jz2</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
  }
}
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-id">#jz3</span> {
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;
  }
}
</code></pre>
<p>ç„¶åä½¿ç”¨å‰é¢APIçš„æ–¹å¼å¤„ç†CSSæ–‡ä»¶ï¼Œåœ¨res.rootä¸­å°±èƒ½æ‹¿åˆ°ASTæ•°æ®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss"</span>);

<span class="hljs-keyword">const</span> originData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./css/index.css"</span>, <span class="hljs-string">"utf-8"</span>);
<span class="hljs-title function_">postcss</span>()
  .<span class="hljs-title function_">process</span>(originData, {
    <span class="hljs-attr">from</span>: <span class="hljs-string">"css/index.css"</span>,
    <span class="hljs-attr">to</span>: <span class="hljs-string">"out.css"</span>,
    <span class="hljs-attr">map</span>: { <span class="hljs-attr">inline</span>: <span class="hljs-literal">false</span> },
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">root</span>);
  });
</code></pre>
<p>PostCSSè¿˜æä¾›äº†æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥è§£æCSSæ‹¿åˆ°ASTæ•°æ®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss"</span>);

<span class="hljs-keyword">const</span> originData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./css/index.css"</span>, <span class="hljs-string">"utf-8"</span>);
<span class="hljs-keyword">const</span> data = postcss.<span class="hljs-title function_">parse</span>(originData);
<span class="hljs-keyword">const</span> dataJson = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data.<span class="hljs-title function_">toJSON</span>());
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dataJson);
</code></pre>
<p>ç„¶åå¾—åˆ°æˆ‘ä»¬æœ€ç»ˆæ‹¿åˆ°çš„ASTæ•°æ®çš„JSONæ ¼å¼ï¼Œåé¢çš„åˆ†æéƒ½åŸºäºè¿™ä»½æ•°æ®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"semicolon"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"after"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"root"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"nodes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"semicolon"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"after"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rule"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nodes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n  "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">": "</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"decl"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">14</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">24</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span> <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"width"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"10px"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n  "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">": "</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"decl"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">25</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">51</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">28</span> <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"var(--abc, red)"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">54</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"selector"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">".jzplp"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"semicolon"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"after"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rule"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nodes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n  "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">": "</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"decl"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">25</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">96</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">73</span> <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"important"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blue"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">7</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">99</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">56</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"selector"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"div .jzplp2"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"left"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"right"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" "</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"comment"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">27</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">128</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">101</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"this is comment jzplp"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"semicolon"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"after"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rule"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nodes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n  "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">": "</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"decl"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">14</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">152</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">140</span> <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"margin"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"5px"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n  "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"semicolon"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"after"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n  "</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rule"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"nodes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n    "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">": "</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"decl"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">23</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">187</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">168</span> <span class="hljs-punctuation">}</span>
              <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"padding"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"10px 20px"</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">13</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">192</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">11</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">156</span> <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"selector"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">".jz2"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">14</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">195</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">130</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"selector"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">".jz1"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"afterName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"semicolon"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"after"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"atrule"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"media"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">19</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">270</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">15</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">197</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"(max-width: 768px)"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nodes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n  "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"semicolon"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"after"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n  "</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rule"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"nodes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"raws"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"before"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\r\n    "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"between"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">": "</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"decl"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">26</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">17</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">262</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">17</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">240</span> <span class="hljs-punctuation">}</span>
              <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"border"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1px solid red"</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">18</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">267</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">16</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">228</span> <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"selector"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#jz3"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"end"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">19</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">270</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"inputId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"line"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"offset"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"inputs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"hasBOM"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"css"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">".jzplp {\r\n  width: 10px;\r\n  color: var(--abc, red);\r\n}\r\ndiv .jzplp2 {\r\n  color: blue !important;\r\n}\r\n/* this is comment jzplp */\r\n.jz1 {\r\n  margin: 5px;\r\n  .jz2 {\r\n    padding: 10px 20px;\r\n  }\r\n}\r\n@media (max-width: 768px) {\r\n  #jz3 {\r\n    border: 1px solid red;\r\n  }\r\n}"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&lt;input css abVh40&gt;"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-39">å…¬å…±å±æ€§</h3>
<p>PostCSSçš„ASTç»“ç‚¹ç±»å‹ä¸å¤šï¼Œä¸”ä¸åŒçš„ç»“ç‚¹æœ‰ä¸€äº›å…¬å…±å±æ€§ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹ï¼š</p>



































<table><thead><tr><th>å±æ€§å</th><th>å±æ€§å«ä¹‰</th><th>æ•°æ®ä¸¾ä¾‹</th><th>æ•°æ®ä¸¾ä¾‹è¯´æ˜</th></tr></thead><tbody><tr><td>type</td><td>ç»“ç‚¹ç±»å‹</td><td>decl</td><td>CSSå£°æ˜ç±»å‹</td></tr><tr><td>nodes</td><td>å­ç»“ç‚¹åˆ—è¡¨</td><td>[...]</td><td>å­ç»“ç‚¹æ•°ç»„</td></tr><tr><td>raws</td><td>ç»“ç‚¹ä¸­çš„ç©ºç™½å­—ç¬¦</td><td>{ "semicolon": false, "after": "\r\n" }</td><td>ä¸‹é¢å•ç‹¬è¯´æ˜</td></tr><tr><td>source</td><td>ç»“ç‚¹çš„æºç ä½ç½®</td><td>{...}</td><td>ä¸‹é¢å•ç‹¬è¯´æ˜</td></tr></tbody></table>
<p>å…¶ä¸­æœ€é‡è¦çš„æ˜¯typeå’Œnodeså±æ€§ï¼Œä¸€ä¸ªè¡¨ç¤ºç»“ç‚¹çš„ç±»å‹ï¼Œä¸€ä¸ªæ˜¯åŒ…å«çš„å­ç»“ç‚¹åˆ—è¡¨ã€‚rawsä¸­åˆ†ç±»æ•´ç†äº†ç»“ç‚¹ä¸­çš„ç©ºç™½å­—ç¬¦ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹å±æ€§å«ä¹‰ï¼š</p>
<ul>
<li>raws.before ç»“ç‚¹å‰çš„ç©ºç™½ç¬¦</li>
<li>raws.after ç»“ç‚¹åçš„ç©ºç™½ç¬¦</li>
<li>raws.between å¯¹äºdeclç»“ç‚¹æ˜¯å±æ€§å’Œå€¼ä¸­é—´çš„ç©ºç™½ç¬¦ï¼Œä¾‹å¦‚<code>key: value</code>ä¸­é—´çš„<code>ï¼š </code>ï¼Œå¯¹äºå…¶å®ƒç»“ç‚¹ç±»å‹æ˜¯å…¶å®ƒä½ç½®çš„ç©ºç™½ã€‚</li>
<li>raws.semicolon å¦‚æœæœ€åä¸€ä¸ªå­ç»“ç‚¹æœ‰åˆ†å·åˆ™ä¸ºtrue</li>
<li>raws.afterName åœ¨atè§„åˆ™å’Œå®ƒçš„æ¡ä»¶ä¹‹é—´çš„ç©ºç™½ã€‚ä¾‹å¦‚<code>@media (</code>ä¸­é—´</li>
<li>raws.left æ³¨é‡Šä¸­/*ä¹‹åï¼Œæ³¨é‡Šå†…å®¹ä¹‹å‰ã€‚</li>
<li>raws.right æ³¨é‡Šå†…å®¹ä¹‹åï¼Œæ³¨é‡Š*/ä¹‹å‰ã€‚</li>
</ul>
<p>sourceæ˜¯ç”ŸæˆSourceMapä½¿ç”¨çš„æ•°æ®ï¼Œé€šè¿‡æ–‡ä»¶æ ‡è¯†+èµ·ç‚¹ç»ˆç‚¹çš„è¡Œå·åˆ—å·ï¼Œå¯ä»¥ç²¾ç¡®æ‰¾åˆ°ç»“ç‚¹åœ¨æºæ–‡ä»¶çš„ä½ç½®ã€‚è¿™é‡Œä¹Ÿåˆ—ä¸¾ä¸€ä¸‹å±æ€§å«ä¹‰ï¼š</p>
<ul>
<li>source.inputId æºæ–‡ä»¶æ ‡è¯†</li>
<li>source.start èµ·ç‚¹ä½ç½®ä¿¡æ¯</li>
<li>source.end ç»ˆç‚¹ä½ç½®ä¿¡æ¯</li>
<li>source.start.lineæˆ–source.end.line è¡Œå·</li>
<li>source.start.columnæˆ–source.end.column åˆ—å·</li>
<li>source.start.offsetæˆ–source.end.offset è·ç¦»æ–‡ä»¶èµ·å§‹çš„åç§»é‡</li>
</ul>
<h3 data-id="heading-40">CSSç»“ç‚¹ç±»å‹å’Œç§æœ‰å±æ€§</h3>
<p>è¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹PostCSSçš„ASTç»“ç‚¹ç±»å‹ï¼Œä»¥åŠå®ƒä»¬ç§æœ‰çš„å±æ€§ï¼š</p>
<p><strong>rootç»“ç‚¹ç±»å‹</strong></p>
<p>æ ‡è¯†ä¸€ä¸ªCSSæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰è§£æçš„ç»“ç‚¹ã€‚</p>
<p><strong>ruleç»“ç‚¹ç±»å‹</strong></p>
<p>ruleç»“ç‚¹æ˜¯ä¸€ä¸ªCSSè§„åˆ™ï¼ŒåŒ…å«é€‰æ‹©å™¨ï¼Œåé¢è·Ÿç€ä¸€ä¸ªå£°æ˜å—ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¸€ä¸ªruleç»“ç‚¹ */</span>
<span class="hljs-selector-class">.jzplp</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--abc, red);
}
<span class="hljs-comment">/* ä¸€ä¸ªruleç»“ç‚¹ */</span>
<span class="hljs-selector-class">.jz1</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-comment">/* åµŒå¥—ä¸€ä¸ªruleç»“ç‚¹ */</span>
  <span class="hljs-selector-class">.jz2</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
  }
}
</code></pre>
<p>ruleç»“ç‚¹æœ‰ä¸€ä¸ªç§æœ‰å±æ€§selectorï¼Œè¡¨ç¤ºè¿™ä¸ªç»“ç‚¹çš„é€‰æ‹©å™¨ï¼Œå€¼ä¾‹å¦‚<code>.jzplp</code>ï¼Œæˆ–è€…ç»„åˆé€‰æ‹©å™¨<code>div .jzplp2</code>ã€‚</p>
<p><strong>commentç»“ç‚¹ç±»å‹</strong></p>
<p>commentç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªæ³¨é‡Šã€‚å®ƒæœ‰ä¸ªç§æœ‰å±æ€§textï¼Œè¡¨ç¤ºæ³¨é‡Šå†…å®¹ã€‚</p>
<p><strong>declç»“ç‚¹ç±»å‹</strong></p>
<p>declç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªCSSå£°æ˜ï¼Œå³<code>key: value;</code>çš„ç»“æ„ã€‚ä¾‹å¦‚<code>width: 10px;</code>æˆ–è€…<code>border: 1px solid red;</code>ã€‚å³ä½¿å€¼åŒ…å«å‡½æ•°æˆ–è€…å¤šä¸ªå€¼é›†åˆï¼Œdeclç»“ç‚¹ä¹Ÿä¸å†ç»†åˆ†ï¼Œä¸åŒ…å«å­ç»“ç‚¹ã€‚declç»“ç‚¹çš„ç§æœ‰å±æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li>prop: CSSå£°æ˜å±æ€§åï¼Œä¾‹å¦‚width</li>
<li>value: CSSå£°æ˜å±æ€§å€¼ï¼Œä¾‹å¦‚10px</li>
<li>important: å¦‚æœå£°æ˜è®¾ç½®äº†<code>!important</code>ï¼Œè¿™é‡Œçš„å€¼ä¸ºtrue</li>
</ul>
<p><strong>atruleç»“ç‚¹ç±»å‹</strong></p>
<p>atruleç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªatè§„åˆ™ï¼Œå³ä»¥@ç¬¦å·å¼€å¤´çš„è§„åˆ™ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¸€ä¸ªatruleç»“ç‚¹ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-comment">/* åµŒå¥—ä¸€ä¸ªruleç»“ç‚¹ */</span>
  <span class="hljs-selector-id">#jz3</span> {
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;
  }
}
</code></pre>
<p>atruleç»“ç‚¹æœ‰ç§æœ‰å±æ€§nameï¼Œè¡¨ç¤º@åé¢è·Ÿçš„æ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚ä¸Šé¢çš„mediaã€‚è¿˜æœ‰ä¸€ä¸ªç§æœ‰å±æ€§paramsï¼Œè¡¨ç¤ºatè§„åˆ™å†…çš„å‚æ•°ï¼Œä¾‹å¦‚ä¸Šé¢çš„<code>(max-width: 768px)</code>ã€‚</p>
<h2 data-id="heading-41">æ’ä»¶å¼€å‘</h2>
<h3 data-id="heading-42">æ–°å»ºæ’ä»¶</h3>
<p>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºpluginJzplp.jsæ–‡ä»¶å­˜æ”¾æ’ä»¶ä»£ç ï¼Œç„¶ååœ¨PostCSSé…ç½®æ–‡ä»¶ä¸­å¼•å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// pluginJzplp.js</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pluginJzplp</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'init'</span>);
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">postcssPlugin</span>: <span class="hljs-string">"postcss-plugin-jzplp"</span>,
    <span class="hljs-title class_">Root</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Root'</span>);
    },
    <span class="hljs-title class_">Declaration</span>() {},
  };
}
pluginJzplp.<span class="hljs-property">postcss</span> = <span class="hljs-literal">true</span>;
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = pluginJzplp;

<span class="hljs-comment">// postcss.config.js</span>
<span class="hljs-keyword">const</span> pluginJzplp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./pluginJzplp'</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [pluginJzplp],
};
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ’ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­postcssPluginå±æ€§è¡¨ç¤ºå‡½æ•°åç§°ï¼Œå…¶å®ƒå±æ€§å¤§éƒ¨åˆ†éƒ½å’Œéå†ASTæœ‰å…³ã€‚è¿™ä¸ªå‡½æ•°æœ¬èº«è¿˜éœ€è¦è®¾ç½®postcsså±æ€§ä¸ºtrueï¼Œè¿™æ ·æ‰èƒ½è¢«PostCSSè®¤ä¸ºæ˜¯æ’ä»¶ã€‚æˆ‘ä»¬çœ‹ä¸‹æ‰§è¡Œåçš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è½¬ä¹‰å•æ–‡ä»¶</span>
<span class="hljs-keyword">init</span>
<span class="hljs-keyword">init</span>
Root
<span class="hljs-comment">// è½¬ä¹‰ä¸¤ä¸ªæ–‡ä»¶</span>
<span class="hljs-keyword">init</span>
<span class="hljs-keyword">init</span>
Root
<span class="hljs-keyword">init</span>
<span class="hljs-keyword">init</span>
Root
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯è½¬ä¹‰ä¸€ä¸ªæ–‡ä»¶ï¼Œæ’ä»¶å‡½æ•°ä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ï¼Œä½†å®é™…éå†ï¼ˆè¾“å‡ºRootï¼‰åªæœ‰ä¸€æ¬¡ã€‚æˆ‘ä»¬å†æ¥çœ‹ä¸‹å‡½æ•°å…¥å‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// pluginJzplp.js</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pluginJzplp</span>(<span class="hljs-params">p1, p2, p3</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p1, p2, p3);
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">postcssPlugin</span>: <span class="hljs-string">"postcss-plugin-jzplp"</span>,
    <span class="hljs-title class_">Root</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Root'</span>);
    },
    <span class="hljs-title class_">Declaration</span>() {},
  };
}
pluginJzplp.<span class="hljs-property">postcss</span> = <span class="hljs-literal">true</span>;
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = pluginJzplp;

<span class="hljs-comment">// postcss.config.js</span>
<span class="hljs-keyword">const</span> pluginJzplp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./pluginJzplp'</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">pluginJzplp</span>(<span class="hljs-string">'jz1'</span>, <span class="hljs-string">'jz2'</span>, <span class="hljs-number">3</span>)],
};

<span class="hljs-comment">/* å•æ–‡ä»¶è¾“å‡ºç»“æœ
jz1 jz2 3
Root
Root
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ’ä»¶å‡½æ•°çš„å…¥å‚å…¨éƒ¨æ˜¯æ’ä»¶å¼•å…¥æ—¶ä¼ çš„å‚æ•°ã€‚</p>
<h3 data-id="heading-43">éå†AST</h3>
<p>PostCSSæ’ä»¶éå†ASTçš„æ–¹æ³•ä¸Babelç±»ä¼¼ï¼Œéƒ½æ˜¯ä»¥ç»“ç‚¹ç±»å‹åä½œä¸ºå‡½æ•°å±æ€§ã€‚å½“éå†åˆ°å¯¹åº”ç±»å‹çš„ç»“ç‚¹æ—¶ï¼Œå‡½æ•°è¢«è§¦å‘ï¼Œå…¥å‚ä¸ºå¯¹åº”çš„ç»“ç‚¹æ•°æ®ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ’ä»¶ä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pluginJzplp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">postcssPlugin</span>: <span class="hljs-string">"postcss-plugin-jzplp"</span>,
    <span class="hljs-title class_">Root</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Root"</span>);
    },
    <span class="hljs-title class_">Rule</span>(data) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Rule"</span>, data.<span class="hljs-property">selector</span>);
    },
    <span class="hljs-title class_">Declaration</span>: {
      <span class="hljs-title function_">color</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Declaration color"</span>, data.<span class="hljs-property">value</span>);
      },
      <span class="hljs-title function_">width</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Declaration width"</span>, data.<span class="hljs-property">value</span>);
      },
    },
    <span class="hljs-title class_">AtRule</span>: {
      <span class="hljs-title function_">media</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AtRule media"</span>, data.<span class="hljs-property">params</span>);
      },
    },
  };
}
pluginJzplp.<span class="hljs-property">postcss</span> = <span class="hljs-literal">true</span>;
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = pluginJzplp;

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
Root
Rule .jzplp
Declaration width 10px
Declaration color var(--abc, red)
Rule div .jzplp2
Declaration color blue
Rule .jz1
Rule .jz2
AtRule media (max-width: 768px)
Rule #jz3
*/</span>
</code></pre>
<p>å¯¹åº”èŠ‚ç‚¹ç±»å‹å‡½æ•°çš„å…¥å‚ï¼Œå°±æ˜¯è¿™ä¸ªç±»å‹çš„ç»“ç‚¹æ•°æ®æœ¬èº«ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­è¾“å‡ºäº†ä¸€äº›èŠ‚ç‚¹å±æ€§ã€‚å¯¹äºAtRuleå’ŒDeclarationç±»å‹çš„ç»“ç‚¹å¯ä»¥æ¥å—æ›´ç»†åˆ†çš„ç±»å‹å‡½æ•°ï¼Œä¾‹å¦‚Declarationå¯ä»¥æŠŠå±æ€§åä½œä¸ºkeyåˆ†åˆ«å®šä¹‰éå†å‡½æ•°ã€‚</p>
<p>æ¯ä¸ªç±»å‹çš„ç»“ç‚¹å¯ä»¥å®šä¹‰ä¸¤ç§ç±»å‹çš„å‡½æ•°ï¼Œä¸€ç§æ˜¯è¿›å…¥ç»“ç‚¹æ—¶ï¼Œä¸€ç§æ˜¯é€€å‡ºç»“ç‚¹æ—¶ã€‚åŒºåˆ«åœ¨äºæ˜¯å¦å·²ç»éå†è¿‡å­ç»“ç‚¹ã€‚ä¸Šé¢çš„ä»‹ç»çš„å‡½æ•°éƒ½æ˜¯è¿›å…¥ç»“ç‚¹æ—¶çš„å‡½æ•°ï¼Œé€€å‡ºå‡½æ•°ååˆ™éœ€è¦åœ¨åé¢åŠ Exitï¼Œä¾‹å¦‚RootExit, RuleExitã€‚åªæœ‰æ‹¥æœ‰å­ç»“ç‚¹çš„ç±»å‹æœ‰é€€å‡ºå‡½æ•°ï¼ŒDeclarationè¿™ç§æ²¡æœ‰å­ç»“ç‚¹çš„ç»“ç‚¹å°±åªæœ‰ä¸€ä¸ªå‡½æ•°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pluginJzplp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">postcssPlugin</span>: <span class="hljs-string">"postcss-plugin-jzplp"</span>,
    <span class="hljs-title class_">Once</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Once"</span>);
    },
    <span class="hljs-title class_">OnceExit</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"OnceExit"</span>);
    },
    <span class="hljs-title class_">Root</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Root"</span>);
    },
    <span class="hljs-title class_">RootExit</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"RootExit"</span>);
    },
    <span class="hljs-title class_">Rule</span>(data) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Rule"</span>, data.<span class="hljs-property">selector</span>);
    },
    <span class="hljs-title class_">RuleExit</span>(data) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"RuleExit"</span>, data.<span class="hljs-property">selector</span>);
    },
    <span class="hljs-title class_">Declaration</span>(data) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Declaration"</span>, data.<span class="hljs-property">prop</span>, data.<span class="hljs-property">value</span>);
    },
    <span class="hljs-title class_">AtRule</span>: {
      <span class="hljs-title function_">media</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AtRule media"</span>, data.<span class="hljs-property">params</span>);
      },
    },
    <span class="hljs-title class_">AtRuleExit</span>: {
      <span class="hljs-title function_">media</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AtRuleExit media"</span>, data.<span class="hljs-property">params</span>);
      },
    },
  };
}
pluginJzplp.<span class="hljs-property">postcss</span> = <span class="hljs-literal">true</span>;
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = pluginJzplp;

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
Once
Root
Rule .jzplp
Declaration width 10px
Declaration color var(--abc, red)
RuleExit .jzplp
Rule div .jzplp2
Declaration color blue
RuleExit div .jzplp2
Rule .jz1
Declaration margin 5px
Rule .jz2
Declaration padding 10px 20px
RuleExit .jz2
RuleExit .jz1
AtRule media (max-width: 768px)
Rule #jz3
Declaration border 1px solid red
RuleExit #jz3
AtRuleExit media (max-width: 768px)
RootExit
OnceExit
*/</span>
</code></pre>
<p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œå…ˆè§¦å‘è¿›å…¥ç»“ç‚¹çš„å‡½æ•°ï¼Œå†è®¿é—®å†…éƒ¨ç»“ç‚¹ï¼Œç„¶åå†è§¦å‘é€€å‡ºç»“ç‚¹çš„å‡½æ•°ã€‚ä¸Šé¢ä¾‹å­ä¸­è¿˜æœ‰Onceå’ŒOnceExitå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªæ˜¯æœ€æ—©å’Œæœ€åè§¦å‘çš„ä¸¤ä¸ªå‡½æ•°ï¼Œå…¥å‚æ˜¯rootæ•°æ®ã€‚</p>
<h3 data-id="heading-44">ä¿®æ”¹ASTç»“ç‚¹å±æ€§</h3>
<p>é¦–å…ˆä»ä¿®æ”¹ASTç»“ç‚¹çš„å±æ€§å¼€å§‹ã€‚ä¸‹é¢çš„æ’ä»¶ä¿®æ”¹äº†Declarationå’ŒAtRuleçš„å±æ€§ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pluginJzplp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">postcssPlugin</span>: <span class="hljs-string">"postcss-plugin-jzplp"</span>,
    <span class="hljs-title class_">Root</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Root"</span>);
    },
    <span class="hljs-title class_">RootExit</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"RootExit"</span>);
    },
    <span class="hljs-title class_">Rule</span>(data) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Rule"</span>, data.<span class="hljs-property">selector</span>);
    },
    <span class="hljs-title class_">RuleExit</span>(data) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"RuleExit"</span>, data.<span class="hljs-property">selector</span>);
    },
    <span class="hljs-title class_">Declaration</span>: {
      <span class="hljs-title function_">color</span>(<span class="hljs-params">data</span>) {
        data.<span class="hljs-property">value</span> = <span class="hljs-string">"yellow"</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Declaration color"</span>);
      },
    },
    <span class="hljs-title class_">AtRule</span>: {
      <span class="hljs-title function_">media</span>(<span class="hljs-params">data</span>) {
        data.<span class="hljs-property">params</span> = <span class="hljs-string">"(max-width: 1000px)"</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AtRule media"</span>);
      },
    },
  };
}
pluginJzplp.<span class="hljs-property">postcss</span> = <span class="hljs-literal">true</span>;
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = pluginJzplp;
</code></pre>
<p>æˆ‘ä»¬ç®€åŒ–ä¸€ä¸‹è½¬ä¹‰çš„CSSä»£ç ï¼Œè¿è¡ŒPostCSSåæŸ¥çœ‹è¾“å‡ºç»“æœï¼Œå‘ç°ç”Ÿæˆçš„ä»£ç ä¸­ç¡®å®è¢«æ”¹æ‰äº†ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æºCSSä»£ç  */</span>
<span class="hljs-selector-tag">div</span> <span class="hljs-selector-class">.jzplp2</span> {
  <span class="hljs-attribute">color</span>: blue <span class="hljs-meta">!important</span>;
}
<span class="hljs-selector-class">.jz2</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;
}
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {}

<span class="hljs-comment">/* ç”ŸæˆCSSä»£ç  */</span>
<span class="hljs-selector-tag">div</span> <span class="hljs-selector-class">.jzplp2</span> {
  <span class="hljs-attribute">color</span>: yellow <span class="hljs-meta">!important</span>;
}
<span class="hljs-selector-class">.jz2</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;
}
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">1000px</span>) {}

<span class="hljs-comment">/* å‘½ä»¤è¡Œè¾“å‡º
Root
Rule div .jzplp2
Declaration color
RuleExit div .jzplp2
Rule .jz2
RuleExit .jz2
AtRule media
RootExit
Root
Rule div .jzplp2
Declaration color
RuleExit div .jzplp2
AtRule media
RootExit
*/</span>

<span class="hljs-comment">/* æ’ä»¶ä¸­åˆ æ‰ä¿®æ”¹AtRuleçš„ä»£ç  å‘½ä»¤è¡Œè¾“å‡º
Root
Rule div .jzplp2
Declaration color
RuleExit div .jzplp2
Rule .jz2
RuleExit .jz2
AtRule media
RootExit
Root
Rule div .jzplp2
Declaration color
RuleExit div .jzplp2
RootExit
*/</span>
</code></pre>
<p>ä»å‘½ä»¤è¡Œä¸­è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬è¿˜å‘ç°ï¼ŒRootè¢«éå†äº†ä¸¤æ¬¡ã€‚ç¬¬ä¸€æ¬¡éå†äº†å…¨éƒ¨å±æ€§ï¼Œç¬¬äºŒæ¬¡ä»…ä»…éå†äº†ä¿®æ”¹è¿‡çš„å±æ€§ä»¥åŠä»–ä»¬çš„çˆ¶ç»“ç‚¹ã€‚å¦‚æœæŠŠæ’ä»¶ä¸­ä¿®æ”¹AtRuleçš„ä»£ç åˆ é™¤å†æ‰§è¡Œï¼Œå‘ç°Rootè¿˜æ˜¯è¢«éå†äº†ä¸¤æ¬¡ã€‚å› æ­¤çˆ¶ç»“ç‚¹çš„å†ä¸Šçº§ç»“ç‚¹ä¹Ÿä¼šè¢«éå†ï¼Œä¸€ç›´åˆ°æ ¹ç»“ç‚¹ã€‚å› æ­¤ï¼Œå‡è®¾æˆ‘ä»¬ä¸€ç›´å°†å±æ€§ä¿®æ”¹ä¸ºä¸åŒçš„å€¼ï¼Œå°±ä¼šè§¦å‘æ— é™å¾ªç¯éå†ã€‚å¼€å‘æ’ä»¶çš„æ—¶å€™è¦æ³¨æ„è¿™ä»¶äº‹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> a = <span class="hljs-number">1</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pluginJzplp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">postcssPlugin</span>: <span class="hljs-string">"postcss-plugin-jzplp"</span>,
    <span class="hljs-title class_">Root</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Root"</span>);
    },
    <span class="hljs-title class_">RootExit</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"RootExit"</span>);
    },
    <span class="hljs-title class_">Declaration</span>: {
      <span class="hljs-title function_">width</span>(<span class="hljs-params">data</span>) {
        data.<span class="hljs-property">value</span> = ++a;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Declaration width"</span>);
      },
    },
  };
}
pluginJzplp.<span class="hljs-property">postcss</span> = <span class="hljs-literal">true</span>;
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = pluginJzplp;

<span class="hljs-comment">/* å‘½ä»¤è¡Œè¾“å‡º
Root
Declaration width
RootExit
Root
Declaration width
RootExit
Root
...æ— é™å¾ªç¯
*/</span>
</code></pre>
<h3 data-id="heading-45">å¢åˆ ASTç»“ç‚¹</h3>
<p>PostCSSæä¾›äº†æ¯ä¸ªç»“ç‚¹çš„åˆ›å»ºå‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºå¯¹åº”ç±»å‹çš„ç»“ç‚¹ã€‚æ¯ä¸ªç»“ç‚¹ä¸Šè¿˜æŒ‚è½½äº†çˆ¶èŠ‚ç‚¹ï¼Œå­ç»“ç‚¹ï¼Œå„ç§ä½ç½®æ·»åŠ ç»“ç‚¹çš„å‡½æ•°ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ–¹ä¾¿å¢åˆ å’Œå¤„ç†ç»“ç‚¹ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªæ’ä»¶ä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pluginJzplp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">postcssPlugin</span>: <span class="hljs-string">"postcss-plugin-jzplp"</span>,
    <span class="hljs-title class_">Root</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Root"</span>);
    },
    <span class="hljs-title class_">RootExit</span>() {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"RootExit"</span>);
    },
    <span class="hljs-title class_">Declaration</span>: {
      <span class="hljs-title function_">width</span>(<span class="hljs-params">data, { Declaration }</span>) {
        <span class="hljs-keyword">const</span> decl = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Declaration</span>({ <span class="hljs-attr">prop</span>: <span class="hljs-string">"color"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"black"</span> });
        data?.<span class="hljs-property">parent</span>?.<span class="hljs-title function_">append</span>(decl);
      },
    },
    <span class="hljs-title class_">Rule</span>(data, { <span class="hljs-title class_">Rule</span>, <span class="hljs-title class_">Declaration</span> }) {
      <span class="hljs-keyword">if</span> (data.<span class="hljs-property">selector</span> === <span class="hljs-string">"div .jzplp2"</span>) {
        <span class="hljs-keyword">const</span> decl = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Declaration</span>({ <span class="hljs-attr">prop</span>: <span class="hljs-string">"color"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"yellow"</span> });
        <span class="hljs-keyword">const</span> rule = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rule</span>({ <span class="hljs-attr">selector</span>: <span class="hljs-string">".jz3"</span>, <span class="hljs-attr">nodes</span>: [decl] });
        data.<span class="hljs-title function_">before</span>(rule);
      }
    },
    <span class="hljs-title class_">AtRule</span>: {
      <span class="hljs-title function_">media</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">flag</span>) {
          data.<span class="hljs-property">flag</span> = <span class="hljs-number">1</span>;
          <span class="hljs-keyword">const</span> cloned = data.<span class="hljs-title function_">clone</span>(data);
          data.<span class="hljs-title function_">push</span>(cloned);
        }
      },
    },
  };
}
pluginJzplp.<span class="hljs-property">postcss</span> = <span class="hljs-literal">true</span>;
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = pluginJzplp;
</code></pre>
<p>æ³¨æ„éƒ¨åˆ†å¯èƒ½é€ æˆæ— é™å¾ªç¯çš„åœºæ™¯éœ€è¦è¿›è¡Œé™åˆ¶ã€‚è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æºCSSä»£ç  */</span>
<span class="hljs-selector-tag">div</span> <span class="hljs-selector-class">.jzplp2</span> {
  <span class="hljs-attribute">color</span>: blue <span class="hljs-meta">!important</span>;
}
<span class="hljs-selector-class">.jz2</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;
}
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {}


<span class="hljs-comment">/* ç”ŸæˆCSSä»£ç  */</span>
<span class="hljs-selector-class">.jz3</span> {
  <span class="hljs-attribute">color</span>: yellow;
}
<span class="hljs-selector-tag">div</span> <span class="hljs-selector-class">.jzplp2</span> {
  <span class="hljs-attribute">color</span>: blue <span class="hljs-meta">!important</span>;
}
<span class="hljs-selector-class">.jz2</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">color</span>: black;
}
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {}}

<span class="hljs-comment">/* å‘½ä»¤è¡Œè¾“å‡º
Root
RootExit
Root
RootExit
*/</span>
</code></pre>
<h2 data-id="heading-46">ASTè¾…åŠ©å·¥å…·</h2>
<p>åœ¨å‰é¢ä»‹ç»è¿‡PostCSSçš„ASTç»“ç‚¹ç±»å‹ä¸€å…±å°±åªæœ‰å‡ ç§ï¼Œä¾‹å¦‚è§„åˆ™ruleè§„åˆ™ç»“ç‚¹å’Œdeclå£°æ˜ç»“ç‚¹ã€‚ä½†CSSå®é™…çš„å¤æ‚åº¦è¦æ›´é«˜ï¼Œä¾‹å¦‚ç»“ç‚¹é€‰æ‹©å™¨è¿˜å¯ä»¥åˆ†ä¸ºå±æ€§é€‰æ‹©å™¨ï¼Œç±»é€‰æ‹©å™¨ï¼Œæ ‡ç­¾é€‰æ‹©å™¨ï¼Œè¿˜æœ‰ç»„åˆé€‰æ‹©å™¨ï¼Œä¼ªç±»ä¼ªå…ƒç´ é€‰æ‹©å™¨ç­‰ç­‰ï¼Œæœ‰äº›ç”šè‡³æ˜¯å‡½æ•°çš„å½¢æ€ã€‚CSSå£°æ˜çš„å€¼ä¹Ÿæ˜¯å¤šç§å¤šæ ·ï¼Œæœ‰å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå‡½æ•°ï¼Œç»„åˆå€¼ç­‰ç­‰ã€‚åƒè¿™ç±»æ•°æ®PostCSSå¹¶æ²¡æœ‰ç›´æ¥æä¾›è§£ææ–¹å¼ï¼Œä½†æœ‰ä¸€äº›å¼€æºå·¥å…·å¯ä»¥å¸®åŠ©è§£æã€‚ä¸‹é¢æˆ‘ä»¬åˆ—ä¸¾å‡ ä¸ªå·¥å…·ç®€å•ä»‹ç»ï¼š</p>
<h3 data-id="heading-47">postcss-selector-parser</h3>
<p>postcss-selector-parseræ˜¯ä¸€ä¸ªè§£æCSSé€‰æ‹©å™¨çš„å·¥å…·ã€‚è™½ç„¶åå­—ä¸­å¸¦postcssï¼Œä½†å®é™…ä¸Šä¸ä¾èµ–PostCSSè¿è¡Œã€‚postcss-selector-parserå¯ä»¥å°†é€‰æ‹©å™¨å­—ç¬¦ä¸²è§£æä¸ºASTæ•°æ®ã€‚å…¶ä¸­åŒ…å«ä¸€äº›ç»“ç‚¹ç±»å‹ï¼Œç”¨typeå­—æ®µè¡¨ç¤ºï¼š</p>
<ul>
<li>attribute å±æ€§é€‰æ‹©å™¨ç»“ç‚¹</li>
<li>class ç±»é€‰æ‹©å™¨ç»“ç‚¹</li>
<li>combinator ç»„åˆé€‰æ‹©å™¨ç»“ç‚¹</li>
<li>id idé€‰æ‹©å™¨ç»“ç‚¹</li>
<li>pseudo ä¼ªç±»å’Œä¼ªå…ƒç´ é€‰æ‹©å™¨ç»“ç‚¹</li>
<li>tag æ ‡ç­¾é€‰æ‹©å™¨ç»“ç‚¹</li>
<li>selector é€‰æ‹©å™¨å®¹å™¨ç»“ç‚¹</li>
<li>ç­‰ç­‰...</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬æ„é€ ä¸€ä¸ªå¤æ‚ä¸€ç‚¹çš„é€‰æ‹©å™¨å­—ç¬¦ä¸²ï¼Œéå†ç»“ç‚¹ï¼Œçœ‹èƒ½è§£æå‡ºå“ªäº›ç±»å‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> parser = <span class="hljs-built_in">require</span>(<span class="hljs-string">'postcss-selector-parser'</span>);
<span class="hljs-keyword">const</span> selectorStr = <span class="hljs-string">'.jz1, div+jz2:not(#jzplp::first-line)'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">transform</span> = selectors =&gt; {
    selectors.<span class="hljs-title function_">walk</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">type</span>.<span class="hljs-title function_">padEnd</span>(<span class="hljs-number">12</span>), data.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">padEnd</span>(<span class="hljs-number">35</span>), data?.<span class="hljs-property">nodes</span>?.<span class="hljs-property">map</span>?.(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-title function_">toString</span>()));
    });
};
<span class="hljs-keyword">const</span> transformed = <span class="hljs-title function_">parser</span>(transform).<span class="hljs-title function_">processSync</span>(selectorStr);

<span class="hljs-comment">/*
selector     .jz1                                [ '.jz1' ]
class        .jz1                                undefined
selector      div+jz2:not(#jzplp::first-line)    [ ' div', '+', 'jz2', ':not(#jzplp::first-line)' ]
tag           div                                undefined
combinator   +                                   undefined
tag          jz2                                 undefined
pseudo       :not(#jzplp::first-line)            [ '#jzplp::first-line' ]
selector     #jzplp::first-line                  [ '#jzplp', '::first-line' ]
id           #jzplp                              undefined
pseudo       ::first-line                        []
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç»„åˆé€‰æ‹©å™¨é‡Œé¢å¹¶ä¸åŒ…å«å…¶å®ƒé€‰æ‹©å™¨ï¼Œè€Œæ˜¯ä»…æœ‰è¿æ¥ç¬¦å·æœ¬èº«ã€‚è¿™ä¸ªå·¥å…·æœ¬èº«æ²¡æœ‰ç›´æ¥åŒ…å«å°†ä»£ç è½¬ä¸ºJSONå½¢å¼çš„ASTæ•°æ®çš„æ–¹æ³•ã€‚æˆ‘è¯•äº†ä¸‹astæ–¹æ³•ï¼Œè¾“å‡ºçš„å†…å®¹ä¹Ÿä¸æ˜¯JSONæ•°æ®ï¼Œå› æ­¤è¿™é‡Œå°±ä¸åˆ—å‡ºäº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> parser = <span class="hljs-built_in">require</span>(<span class="hljs-string">'postcss-selector-parser'</span>);
<span class="hljs-title function_">parser</span>(<span class="hljs-function">() =&gt;</span> {})
  .<span class="hljs-title function_">ast</span>(selectorStr)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data));
<span class="hljs-comment">// è¾“å‡ºéJSONæ•°æ®</span>
</code></pre>
<p>å·¥å…·å†…æä¾›äº†å„ç§åˆ›å»ºASTç»“ç‚¹çš„æ–¹æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬å°è¯•ä¿®æ”¹å’Œæ·»åŠ ASTç»“ç‚¹è¯•è¯•ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> parser = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss-selector-parser"</span>);
<span class="hljs-keyword">const</span> selectorStr = <span class="hljs-string">".jz1, div+jz2:not(#jzplp::first-line)"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">transform</span> = (<span class="hljs-params">selectors</span>) =&gt; {
  selectors.<span class="hljs-title function_">walk</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-comment">// ä¿®æ”¹ç»“ç‚¹å±æ€§</span>
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">"tag"</span> &amp;&amp; data.<span class="hljs-property">value</span> === <span class="hljs-string">"jz2"</span>) data.<span class="hljs-property">value</span> = <span class="hljs-string">"h1"</span>;
    <span class="hljs-comment">// æ·»åŠ ç»“ç‚¹</span>
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">"selector"</span> &amp;&amp; data.<span class="hljs-title function_">toString</span>() === <span class="hljs-string">'.jz1'</span>) {
      <span class="hljs-keyword">const</span> attr = parser.<span class="hljs-title function_">attribute</span>({ <span class="hljs-attr">attribute</span>: <span class="hljs-string">"href"</span> });
      data.<span class="hljs-property">nodes</span>.<span class="hljs-title function_">push</span>(attr);
    }
  });
};
<span class="hljs-keyword">const</span> transformed = <span class="hljs-title function_">parser</span>(transform).<span class="hljs-title function_">processSync</span>(selectorStr);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(transformed);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
.jz1[href], div+h1:not(#jzplp::first-line)
*/</span>
</code></pre>
<h3 data-id="heading-48">postcss-value-parser</h3>
<p>postcss-selector-parseræ˜¯ä¸€ä¸ªè§£æCSSå€¼çš„å·¥å…·ï¼Œä¹Ÿå¯ä»¥è„±ç¦»PostCSSè¿è¡Œã€‚å®ƒå°†CSSå£°æ˜ä¸­çš„å€¼å­—ç¬¦ä¸²è§£æä¸ºASTæ•°æ®ã€‚é¦–å…ˆæˆ‘ä»¬æ„é€ ä¸€ä¸ªå¤æ‚çš„å€¼ä¾‹å­ï¼Œè¾“å‡ºå¯¹åº”çš„ASTæ•°æ®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> valueParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss-value-parser"</span>);
<span class="hljs-keyword">const</span> valueStr = <span class="hljs-string">"calc(50vh + 10px) solid var(--jzplp, rgba(255,255,255, 0.5))"</span>;
<span class="hljs-keyword">var</span> parsedValue = <span class="hljs-title function_">valueParser</span>(valueStr);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(parsedValue));

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{
  "nodes": [
    {
      "type": "function",
      "sourceIndex": 0,
      "value": "calc",
      "before": "",
      "after": "",
      "sourceEndIndex": 17,
      "nodes": [
        { "type": "word", "sourceIndex": 5, "sourceEndIndex": 9, "value": "50vh" },
        { "type": "space", "sourceIndex": 9, "sourceEndIndex": 10, "value": " " },
        { "type": "word", "sourceIndex": 10, "sourceEndIndex": 11, "value": "+" },
        { "type": "space", "sourceIndex": 11, "sourceEndIndex": 12, "value": " " },
        { "type": "word", "sourceIndex": 12, "sourceEndIndex": 16, "value": "10px" }
      ]
    },
    { "type": "space", "sourceIndex": 17, "sourceEndIndex": 18, "value": " " },
    { "type": "word", "sourceIndex": 18, "sourceEndIndex": 23, "value": "solid" },
    { "type": "space", "sourceIndex": 23, "sourceEndIndex": 24, "value": " " },
    {
      "type": "function",
      "sourceIndex": 24,
      "value": "var",
      "before": "",
      "after": "",
      "sourceEndIndex": 60,
      "nodes": [
        { "type": "word", "sourceIndex": 28, "sourceEndIndex": 35, "value": "--jzplp" },
        { "type": "div", "sourceIndex": 35, "sourceEndIndex": 37, "value": ",", "before": "", "after": " " },
        {
          "type": "function",
          "sourceIndex": 37,
          "value": "rgba",
          "before": "",
          "after": "",
          "sourceEndIndex": 59,
          "nodes": [
            { "type": "word", "sourceIndex": 42, "sourceEndIndex": 45, "value": "255" },
            { "type": "div", "sourceIndex": 45, "sourceEndIndex": 46, "value": ",", "before": "", "after": "" },
            { "type": "word", "sourceIndex": 46, "sourceEndIndex": 49, "value": "255" },
            { "type": "div", "sourceIndex": 49, "sourceEndIndex": 50, "value": ",", "before": "", "after": "" },
            { "type": "word", "sourceIndex": 50, "sourceEndIndex": 53, "value": "255" },
            { "type": "div", "sourceIndex": 53, "sourceEndIndex": 55, "value": ",", "before": "", "after": " " },
            { "type": "word", "sourceIndex": 55, "sourceEndIndex": 58, "value": "0.5" }
          ]
        }
      ]
    }
  ]
}
*/</span>
</code></pre>
<p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼ŒCSSå£°æ˜å€¼è¢«è§£ææˆäº†JSONå½¢å¼çš„ASTæ•°æ®ã€‚å…¶ä¸­æ¯ä¸ªç»“ç‚¹ä»¥typeå±æ€§æ¥åŒºåˆ†ç±»å‹ã€‚æˆ‘ä»¬åˆ—ä¸¾ä¸‹å…¶ä¸­çš„å¸¸ç”¨ASTç»“ç‚¹ï¼š</p>
<ul>
<li>word æ™®é€šå€¼ç»“ç‚¹ï¼Œä¾‹å¦‚ 10px, 255ç­‰</li>
<li>string å­—ç¬¦ä¸²èŠ‚ç‚¹ï¼Œä¾‹å¦‚ "/jz/123"</li>
<li>div åˆ†éš”èŠ‚ç‚¹ï¼Œä¾‹å¦‚ é€—å·ï¼Œæ–œæ ç­‰</li>
<li>space ç©ºæ ¼ç»“ç‚¹</li>
<li>comment æ³¨é‡Šç»“ç‚¹</li>
<li>function å‡½æ•°ç»“ç‚¹ï¼Œé‡Œé¢å¯ä»¥åŒ…å«å…¶å®ƒç»“ç‚¹ï¼Œä¾‹å¦‚ rgba(), var()ç­‰</li>
</ul>
<p>ç„¶åæˆ‘ä»¬å†è¯•ç€éå†ASTï¼Œä»¥åŠä¿®æ”¹ç»“ç‚¹å†…å®¹ã€‚è¿™é‡Œåœ¨å‰é¢ä»£ç çš„åŸºç¡€ä¸Šç»§ç»­å†™ï¼š</p>
<pre><code class="hljs language-js" lang="js">parsedValue.<span class="hljs-title function_">walk</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">node</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(node.<span class="hljs-property">type</span>.<span class="hljs-title function_">padEnd</span>(<span class="hljs-number">10</span>), <span class="hljs-string">"["</span>, node.<span class="hljs-property">value</span>.<span class="hljs-title function_">padEnd</span>(<span class="hljs-number">10</span>), <span class="hljs-string">"]"</span>);
  <span class="hljs-keyword">if</span> (node.<span class="hljs-property">type</span> === <span class="hljs-string">"word"</span> &amp;&amp; node.<span class="hljs-property">value</span> === <span class="hljs-string">"10px"</span>)  node.<span class="hljs-property">value</span> = <span class="hljs-string">"10em"</span>;
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(parsedValue.<span class="hljs-title function_">toString</span>());

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
function   [ calc       ]
word       [ 50vh       ]
space      [            ]
word       [ +          ]
space      [            ]
word       [ 10px       ]
space      [            ]
word       [ solid      ]
space      [            ]
function   [ var        ]
word       [ --jzplp    ]
div        [ ,          ]
function   [ rgba       ]
word       [ 255        ]
div        [ ,          ]
word       [ 255        ]
div        [ ,          ]
word       [ 255        ]
div        [ ,          ]
word       [ 0.5        ]
calc(50vh + 10em) solid var(--jzplp, rgba(255,255,255, 0.5))
*/</span>
</code></pre>
<h2 data-id="heading-49">è‡ªå®šä¹‰è¯­æ³•è§„åˆ™</h2>
<p>PostCSSä¸ä»…å¯ä»¥ç¼–è¯‘CSSè¯­æ³•ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰è¯­æ³•è§„åˆ™å®ç°åŠŸèƒ½æ‰©å±•ã€‚</p>
<h3 data-id="heading-50">ç¼–å†™è‡ªå®šä¹‰è¯­æ³•è§„åˆ™</h3>
<p>PostCSSç¼–å†™è‡ªå®šä¹‰è¯­æ³•çš„æ–¹æ³•ï¼Œå°±æ˜¯å®ç°parser/stringifier/syntaxæ–¹æ³•ï¼Œç„¶ååœ¨PostCSSå‚æ•°ä¸­ä¼ å…¥å¯¹åº”æ–¹æ³•å³å¯ã€‚</p>
<ul>
<li>parseræ–¹æ³• å°†å­—ç¬¦ä¸²è½¬ä¸ºæŠ½è±¡è¯­æ³•æ ‘</li>
<li>stringifieræ–¹æ³• å°†æŠ½è±¡è¯­æ³•æ ‘è½¬ä¸ºå­—ç¬¦ä¸²</li>
<li>syntax ç›¸å½“äºparser + stringifier</li>
</ul>
<p>ç¼–å†™è‡ªå®šä¹‰è¯­æ³•è§„åˆ™æ˜¯ä¸€ä»¶å¾ˆå¤æ‚çš„äº‹æƒ…ï¼Œéœ€è¦ç»è¿‡è¯æ³•åˆ†æå¥æ³•åˆ†æç­‰æ­¥éª¤ï¼Œå¾ˆæ˜¾ç„¶è¶…å‡ºäº†è¿™ç¯‡æ–‡ç« çš„èŒƒç•´ã€‚å› æ­¤è¿™é‡Œæˆ‘ä»¬åªç»™å‡ºä¸€ä¸ªéå¸¸ç®€å•çš„demoï¼Œç¤ºæ„ä¸€ä¸‹è‡ªå®šä¹‰è¯­æ³•çš„å¼€å‘æ¥å£ã€‚é¦–å…ˆæ¥çœ‹ä¸‹è‡ªå®šä¹‰è¯­æ³•çš„æ–¹å¼ã€‚è¿™é‡Œæˆ‘ä»¬è®¾ç½®æ–‡ä»¶å†…å®¹çš„æ¯è¡Œä¸ºxxx=xxxï¼Œå°è¯•ç”¨è‡ªå®šä¹‰è¯­æ³•è§£æå’Œç”Ÿæˆè¿™æ ·çš„ç»“æ„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/* éœ€è¦è§£æçš„æ–‡ä»¶ index.jzcss
jzplp=12345
jz2=98765
*/</span>

<span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">parseLine</span>(<span class="hljs-params">strLine</span>) {
  <span class="hljs-keyword">const</span> strList = strLine.<span class="hljs-title function_">split</span>(<span class="hljs-string">"="</span>);
  <span class="hljs-keyword">const</span> customKey = { <span class="hljs-attr">type</span>: <span class="hljs-string">"customKey"</span>, <span class="hljs-attr">value</span>: strList[<span class="hljs-number">0</span>] };
  <span class="hljs-keyword">const</span> customValue = { <span class="hljs-attr">type</span>: <span class="hljs-string">"customValue"</span>, <span class="hljs-attr">value</span>: strList[<span class="hljs-number">1</span>] };
  <span class="hljs-keyword">const</span> equal = { <span class="hljs-attr">type</span>: <span class="hljs-string">"equal"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"="</span>, <span class="hljs-attr">nodes</span>: [customKey, customValue] };
  <span class="hljs-keyword">return</span> equal;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">cssStr</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"parser!"</span>);
  <span class="hljs-keyword">const</span> strList = cssStr.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>);
  <span class="hljs-keyword">const</span> nodes = strList.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> <span class="hljs-title function_">parseLine</span>(line));
  <span class="hljs-keyword">const</span> root = postcss.<span class="hljs-title function_">root</span>();
  root.<span class="hljs-property">nodes</span> = nodes;
  <span class="hljs-keyword">return</span> root;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">recursion</span>(<span class="hljs-params">node</span>) {
  <span class="hljs-keyword">if</span> (node.<span class="hljs-property">type</span> === <span class="hljs-string">"customKey"</span> || node.<span class="hljs-property">type</span> === <span class="hljs-string">"customValue"</span>) <span class="hljs-keyword">return</span> node.<span class="hljs-property">value</span>;
  <span class="hljs-keyword">if</span> (node.<span class="hljs-property">type</span> === <span class="hljs-string">"equal"</span>) <span class="hljs-keyword">return</span> <span class="hljs-title function_">recursion</span>(node.<span class="hljs-property">nodes</span>[<span class="hljs-number">0</span>]) + node.<span class="hljs-property">value</span> + <span class="hljs-title function_">recursion</span>(node.<span class="hljs-property">nodes</span>[<span class="hljs-number">1</span>]);
  <span class="hljs-keyword">return</span> node.<span class="hljs-property">nodes</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-title function_">recursion</span>(item)).<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">stringify</span>(<span class="hljs-params">root, builder</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"stringify!"</span>);
  <span class="hljs-title function_">builder</span>(<span class="hljs-title function_">recursion</span>(root), root);
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  parse,
  stringify,
};
</code></pre>
<p>é¦–å…ˆæ˜¯parseæ–¹æ³•ï¼Œå¤–é¢åŒ…è£¹ä¸€ä¸ªPostCSSçš„rootç»“ç‚¹ã€‚é‡Œé¢åˆ‡åˆ†å‡ºæ¯è¡Œï¼Œå¯¹æ¯è¡Œåˆ‡åˆ†å‡ºequalç­‰å·ç»“ç‚¹ï¼Œå­ç»“ç‚¹ä¸ºcustomKeyå’ŒcustomValueä¸¤ä¸ªã€‚è§£ææˆASTæ•°æ®åè¿”å›ã€‚stringifyæ–¹æ³•ä½¿ç”¨äº†é€’å½’ï¼Œé’ˆå¯¹ä¸åŒçš„ç»“ç‚¹ç±»å‹è¾“å‡ºä¸åŒçš„å­—ç¬¦ä¸²ï¼Œè¿›è¡Œæ‹¼åˆã€‚æœ€åå°†å­—ç¬¦ä¸²å’Œrootç»“ç‚¹ä¼ å›builderå›è°ƒã€‚ç„¶åæˆ‘ä»¬å°è¯•ä½¿ç”¨è‡ªå®šä¹‰è§„åˆ™æ¥è§£ææ–‡ä»¶ï¼Œè¾“å‡ºASTæ•°æ®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss"</span>);
<span class="hljs-keyword">const</span> customParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./parser"</span>);

<span class="hljs-keyword">const</span> originData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./index.jzcss"</span>, <span class="hljs-string">"utf-8"</span>);
<span class="hljs-title function_">postcss</span>()
  .<span class="hljs-title function_">process</span>(originData, {
    <span class="hljs-attr">from</span>: <span class="hljs-string">"index.jzcss"</span>,
    <span class="hljs-attr">to</span>: <span class="hljs-string">"out.css"</span>,
    <span class="hljs-attr">syntax</span>: customParser,
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">css</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(res.<span class="hljs-property">root</span>.<span class="hljs-title function_">toJSON</span>()));
  });

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
parser!
stringify!
jzplp=12345
jz2=98765
{
  "raws": {},
  "type": "root",
  "nodes": [
    {
      "type": "equal",
      "value": "=",
      "nodes": [
        { "type": "customKey", "value": "jzplp" },
        { "type": "customValue", "value": "12345\r" }
      ]
    },
    {
      "type": "equal",
      "value": "=",
      "nodes": [
        { "type": "customKey", "value": "jz2" },
        { "type": "customValue", "value": "98765" }
      ]
    }
  ],
  "lastEach": 1,
  "indexes": {},
  "inputs": []
}
*/</span>
</code></pre>
<h3 data-id="heading-51">ä¸ºè‡ªå®šä¹‰è§„åˆ™ç¼–å†™æ’ä»¶</h3>
<p>åˆ›å»ºäº†è‡ªå®šä¹‰è§„åˆ™ç»“ç‚¹ä¹‹åï¼Œæˆ‘ä»¬å†ä¸ºè¿™ç§è§„åˆ™ç»“ç‚¹ç¼–å†™ä¸€ä¸ªæ’ä»¶ï¼Œå°è¯•ä¿®æ”¹ASTç»“ç‚¹å†ç”Ÿæˆä»£ç ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pluginJzplp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">postcssPlugin</span>: <span class="hljs-string">"postcss-plugin-jzplp"</span>,
    <span class="hljs-title class_">Once</span>(root) {
      root.<span class="hljs-title function_">walk</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (node.<span class="hljs-property">type</span> === <span class="hljs-string">"equal"</span>) {
          node.<span class="hljs-property">value</span> = <span class="hljs-string">"=="</span>;
          <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodes</span>[<span class="hljs-number">0</span>].<span class="hljs-property">value</span> === <span class="hljs-string">"jz2"</span>)
            node.<span class="hljs-property">nodes</span>[<span class="hljs-number">0</span>].<span class="hljs-property">value</span> = <span class="hljs-string">"jzplp2"</span>;
        }
      });
    },
  };
}
pluginJzplp.<span class="hljs-property">postcss</span> = <span class="hljs-literal">true</span>;
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = pluginJzplp;
</code></pre>
<p>æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ç»“ç‚¹ç±»å‹å¤ªç®€é™‹äº†ï¼Œä¸èƒ½è¢«PostCSSè¯†åˆ«ä¸ºç»“ç‚¹ï¼Œä¸èƒ½ä½¿ç”¨ç»“ç‚¹ç±»å‹åç§°å¼€å¤´çš„å‡½æ•°ï¼›walkå‡½æ•°ä¹Ÿæ— æ³•éå†æ›´æ·±å±‚çš„ç»“ç‚¹ã€‚å› æ­¤æˆ‘ä»¬æ‰‹åŠ¨ä¿®æ”¹å­ç»“ç‚¹çš„å±æ€§ã€‚æœ€åå¼•å…¥æ’ä»¶å¹¶æ‰§è¡Œï¼Œä»è¾“å‡ºç»“æœçœ‹æ”¹åŠ¨æˆåŠŸäº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss"</span>);
<span class="hljs-keyword">const</span> customParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./parser"</span>);
<span class="hljs-keyword">const</span> pluginJzplp = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./pluginJzplp"</span>);
<span class="hljs-keyword">const</span> originData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./index.jzcss"</span>, <span class="hljs-string">"utf-8"</span>);

<span class="hljs-title function_">postcss</span>([pluginJzplp])
  .<span class="hljs-title function_">process</span>(originData, {
    <span class="hljs-attr">from</span>: <span class="hljs-string">"index.jzcss"</span>,
    <span class="hljs-attr">to</span>: <span class="hljs-string">"out.css"</span>,
    <span class="hljs-attr">syntax</span>: customParser,
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">css</span>);
  });

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp==12345
jzplp2==98765
*/</span>
</code></pre>
<h2 data-id="heading-52">æ€»ç»“</h2>
<p>è¿™ç¯‡æ–‡ç« ä»‹ç»äº†PostCSSçš„ä½œç”¨ï¼šè½¬æ¢CSSçš„ä»£ç æˆASTï¼Œç»è¿‡æ’ä»¶å¤„ç†å†ç”Ÿæˆæ–°CSSä»£ç ï¼Œç»å¸¸è¢«ç”¨ä½œåå¤„ç†å’Œæ·»åŠ å…¼å®¹æ€§ï¼›è¿˜ä»‹ç»äº†å„ç§ä½¿ç”¨æ–¹æ³•ï¼šå‘½ä»¤è¡Œæ–¹å¼ï¼ŒAPIæ–¹å¼ï¼ŒWebapckï¼‰ï¼›ç„¶åä»‹ç»äº†å‡ ä¸ªæ’ä»¶çš„ä½œç”¨ï¼Œä»¥åŠä¸SCSSå’ŒLessç»„åˆä½¿ç”¨ã€‚åé¢åˆä»‹ç»äº†PostCSSçš„SourceMapä¸ASTç»“æ„ï¼Œå¦‚ä½•å¼€å‘æ’ä»¶ä¸è‡ªå®šä¹‰è¯­æ³•ã€‚</p>
<p>ä»ä½œç”¨ä¸Šæ¥ï¼Œè™½ç„¶CSSæœ¬èº«ä¸æ˜¯å®Œæ•´çš„ç¼–ç¨‹è¯­è¨€ï¼Œä½†PostCSSå¯¹CSSå´åƒç¼–ç¨‹è¯­è¨€ä¸€æ ·å¤„ç†ã€‚åªä¸è¿‡ASTç»“ç‚¹ç±»å‹åªæœ‰å‡ ç§ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹ç®€é™‹ï¼Œè¿˜éœ€è¦é¢å¤–çš„è¾…åŠ©å·¥å…·ï¼Œæ¯”å¦‚è§£æé€‰æ‹©å™¨å’Œå£°æ˜å€¼ã€‚è¿™äº›è¾…åŠ©å·¥å…·ä¹Ÿæ˜¯ç”¨ASTæ¥å®ç°çš„ã€‚</p>
<p>é™¤äº†PostCSSä¹‹å¤–ï¼Œè¿˜æœ‰CSSTreeï¼ŒCSSOMç­‰éƒ½å¯ä»¥å°†CSSè½¬æ¢ä¸ºASTè¯­æ³•æ ‘ï¼Œä½†éƒ½æ²¡æœ‰PostCSSçŸ¥ååº¦é«˜ï¼Œæœ‰çš„ç”šè‡³å·²ç»ä¸ç»´æŠ¤äº†ã€‚</p>
<h2 data-id="heading-53">å‚è€ƒ</h2>
<ul>
<li>PostCSS æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fpostcss.org%2F" target="_blank" title="https://postcss.org/" ref="nofollow noopener noreferrer">postcss.org/</a></li>
<li>GitHub PostCSS<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fpostcss" target="_blank" title="https://github.com/postcss/postcss" ref="nofollow noopener noreferrer">github.com/postcss/posâ€¦</a></li>
<li>PostCSS ä¸­æ–‡æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fpostcss.docschina.org%2F" target="_blank" title="http://postcss.docschina.org/" ref="nofollow noopener noreferrer">postcss.docschina.org/</a></li>
<li>AST explorer<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fastexplorer.net%2F" target="_blank" title="https://astexplorer.net/" ref="nofollow noopener noreferrer">astexplorer.net/</a></li>
<li>PostCSS pluginsåˆ—è¡¨<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fpostcss%2Fblob%2Fmain%2Fdocs%2Fplugins.md" target="_blank" title="https://github.com/postcss/postcss/blob/main/docs/plugins.md" ref="nofollow noopener noreferrer">github.com/postcss/posâ€¦</a></li>
<li>PostCSS writing a plugin<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fpostcss%2Fblob%2Fmain%2Fdocs%2Fwriting-a-plugin.md" target="_blank" title="https://github.com/postcss/postcss/blob/main/docs/writing-a-plugin.md" ref="nofollow noopener noreferrer">github.com/postcss/posâ€¦</a></li>
<li>å„ä½å‰ç«¯å¤§ç¥èƒ½ä¸èƒ½é€šä¿—çš„è¯´ä¸€ä¸‹PostCSSåˆ°åº•èƒ½åšä»€ä¹ˆï¼Ÿå¯¹äºæ‰‹å†™cssçš„ä¼˜åŠ¿åœ¨å“ªï¼Ÿ<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F46312839%2Fanswer%2F190520136" target="_blank" title="https://www.zhihu.com/question/46312839/answer/190520136" ref="nofollow noopener noreferrer">www.zhihu.com/question/46â€¦</a></li>
<li>GitHub Autoprefixer<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fautoprefixer" target="_blank" title="https://github.com/postcss/autoprefixer" ref="nofollow noopener noreferrer">github.com/postcss/autâ€¦</a></li>
<li>GitHub PostCSS CLI<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fpostcss-cli" target="_blank" title="https://github.com/postcss/postcss-cli" ref="nofollow noopener noreferrer">github.com/postcss/posâ€¦</a></li>
<li>GitHub postcss-loader<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwebpack%2Fpostcss-loader" target="_blank" title="https://github.com/webpack/postcss-loader" ref="nofollow noopener noreferrer">github.com/webpack/posâ€¦</a></li>
<li>Webpackæ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2F" target="_blank" title="https://webpack.js.org/" ref="nofollow noopener noreferrer">webpack.js.org/</a></li>
<li>Webpackä¸­æ–‡æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.docschina.org%2F" target="_blank" title="https://webpack.docschina.org/" ref="nofollow noopener noreferrer">webpack.docschina.org/</a></li>
<li>MDN æµè§ˆå™¨å¼•æ“å‰ç¼€<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FGlossary%2FVendor_Prefix" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Glossary/Vendor_Prefix" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li>GitHub postcss-custom-properties<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcsstools%2Fpostcss-plugins%2Ftree%2Fmain%2Fplugins%2Fpostcss-custom-properties" target="_blank" title="https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-custom-properties" ref="nofollow noopener noreferrer">github.com/csstools/poâ€¦</a></li>
<li>MDN CSS var()<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FReference%2FValues%2Fvar" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Reference/Values/var" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li>GitHub cssnano<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcssnano%2Fcssnano" target="_blank" title="https://github.com/cssnano/cssnano" ref="nofollow noopener noreferrer">github.com/cssnano/cssâ€¦</a></li>
<li>cssnano æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcssnano.github.io%2Fcssnano%2F" target="_blank" title="https://cssnano.github.io/cssnano/" ref="nofollow noopener noreferrer">cssnano.github.io/cssnano/</a></li>
<li>GitHub postcss-preset-env<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcsstools%2Fpostcss-plugins%2Ftree%2Fmain%2Fplugin-packs%2Fpostcss-preset-env" target="_blank" title="https://github.com/csstools/postcss-plugins/tree/main/plugin-packs/postcss-preset-env" ref="nofollow noopener noreferrer">github.com/csstools/poâ€¦</a></li>
<li>MDN CSS hex-color<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FReference%2FValues%2Fhex-color" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Reference/Values/hex-color" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li>GitHub postcss-scss<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fpostcss-scss" target="_blank" title="https://github.com/postcss/postcss-scss" ref="nofollow noopener noreferrer">github.com/postcss/posâ€¦</a></li>
<li>GitHub postcss-less<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshellscape%2Fpostcss-less" target="_blank" title="https://github.com/shellscape/postcss-less" ref="nofollow noopener noreferrer">github.com/shellscape/â€¦</a></li>
<li>Lessæ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Flesscss.org%2F" target="_blank" title="https://lesscss.org/" ref="nofollow noopener noreferrer">lesscss.org/</a></li>
<li>SCSSæ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fsass-lang.com%2F" target="_blank" title="https://sass-lang.com/" ref="nofollow noopener noreferrer">sass-lang.com/</a></li>
<li>å¿«é€Ÿå®šä½æºç é—®é¢˜ï¼šSourceMapçš„ç”Ÿæˆ/ä½¿ç”¨/æ–‡ä»¶æ ¼å¼ä¸å†å²<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fjzplp.github.io%2F2025%2Fjs-sourcemap.html" target="_blank" title="https://jzplp.github.io/2025/js-sourcemap.html" ref="nofollow noopener noreferrer">jzplp.github.io/2025/js-souâ€¦</a></li>
<li>MDN CSSè¯­æ³•<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FGuides%2FSyntax%2FIntroduction" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Guides/Syntax/Introduction" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li>MDN CSS Atè§„åˆ™<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FGuides%2FSyntax%2FAt-rules" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Guides/Syntax/At-rules" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li>è§£é”Babelæ ¸å¿ƒåŠŸèƒ½ï¼šä»è½¬ä¹‰è¯­æ³•åˆ°æ’ä»¶å¼€å‘<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fjzplp.github.io%2F2025%2Fbabel-intro.html" target="_blank" title="https://jzplp.github.io/2025/babel-intro.html" ref="nofollow noopener noreferrer">jzplp.github.io/2025/babel-â€¦</a></li>
<li>GitHub postcss-selector-parser<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fpostcss-selector-parser" target="_blank" title="https://github.com/postcss/postcss-selector-parser" ref="nofollow noopener noreferrer">github.com/postcss/posâ€¦</a></li>
<li>postcss-selector-parser API Documentation<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fpostcss-selector-parser%2Fblob%2Fmaster%2FAPI.md" target="_blank" title="https://github.com/postcss/postcss-selector-parser/blob/master/API.md" ref="nofollow noopener noreferrer">github.com/postcss/posâ€¦</a></li>
<li>GitHub postcss-value-parser<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTrySound%2Fpostcss-value-parser" target="_blank" title="https://github.com/TrySound/postcss-value-parser" ref="nofollow noopener noreferrer">github.com/TrySound/poâ€¦</a></li>
<li>PostCSSæ–‡æ¡£ How to Write Custom Syntax<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fpostcss.org%2Fdocs%2Fhow-to-write-custom-syntax" target="_blank" title="https://postcss.org/docs/how-to-write-custom-syntax" ref="nofollow noopener noreferrer">postcss.org/docs/how-toâ€¦</a></li>
<li>JavaScriptè¯­æ³•æ ‘ç®€ä»‹ï¼šAST/CST/è¯æ³•/è¯­æ³•åˆ†æ/ESTree/ç”Ÿæˆå·¥å…·<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fjzplp.github.io%2F2025%2Fjs-ast.html" target="_blank" title="https://jzplp.github.io/2025/js-ast.html" ref="nofollow noopener noreferrer">jzplp.github.io/2025/js-astâ€¦</a></li>
<li>CSSTree docs &amp; tools<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcsstree.github.io%2Fdocs%2F" target="_blank" title="https://csstree.github.io/docs/" ref="nofollow noopener noreferrer">csstree.github.io/docs/</a></li>
<li>GitHub CSSTree<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcsstree%2Fcsstree" target="_blank" title="https://github.com/csstree/csstree" ref="nofollow noopener noreferrer">github.com/csstree/cssâ€¦</a></li>
<li>GitHub CSSOM<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNV%2FCSSOM" target="_blank" title="https://github.com/NV/CSSOM" ref="nofollow noopener noreferrer">github.com/NV/CSSOM</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯å­¦ä¹ AIã€‘Function Calling]]></title>    <link>https://juejin.cn/post/7588043318359457827</link>    <guid>https://juejin.cn/post/7588043318359457827</guid>    <pubDate>2025-12-27T13:24:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588043318359457827" data-draft-id="7588004376868110371" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯å­¦ä¹ AIã€‘Function Calling"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T13:24:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯å­¦ä¹ AIã€‘Function Calling
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T13:24:24.000Z" title="Sat Dec 27 2025 13:24:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">æ ¸å¿ƒå®šä¹‰</h2>
<p>Function Callingï¼ˆå‡½æ•°è°ƒç”¨ï¼‰æ˜¯å¤§æ¨¡å‹ä¸å¤–éƒ¨å·¥å…·/å‡½æ•°äº¤äº’çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œèƒ½å¤Ÿè®©æ¨¡å‹æ ¹æ®ç”¨æˆ·éœ€æ±‚è‡ªä¸»åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨æŒ‡å®šå‡½æ•°ï¼Œé€šè¿‡ç»“æ„åŒ–å‚æ•°ä¼ é€’è°ƒç”¨æŒ‡ä»¤å¹¶è·å–æ‰§è¡Œç»“æœï¼Œæœ€ç»ˆç»“åˆç»“æœç”Ÿæˆç²¾å‡†å“åº”ï¼Œä»¥æ­¤è§£å†³å¤§æ¨¡å‹è‡ªèº«æ— æ³•å®Œæˆçš„å¤æ‚è®¡ç®—ã€å®æ—¶æ•°æ®æŸ¥è¯¢ç­‰ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-1">ä¸¤ç§å·¥å…·æ·»åŠ æ–¹æ¡ˆ</h2>
<h3 data-id="heading-2">æ–¹æ¡ˆä¸€ï¼šç›´æ¥é€šè¿‡ Tool.from_function å®šä¹‰å·¥å…·</h3>
<p>è¯¥æ–¹æ¡ˆé€‚ç”¨äºå‡½æ•°é€»è¾‘ç®€å•çš„åœºæ™¯ï¼Œå¯ç›´æ¥é€šè¿‡å­—å…¸æŒ‡å®šå‚æ•°è§„èŒƒï¼Œæ— éœ€é¢å¤–å®šä¹‰ä¸“é—¨çš„å‚æ•°æ¨¡å‹ï¼Œå®ç°å¿«é€Ÿå°è£…ã€‚</p>
<h4 data-id="heading-3">æ­¥éª¤1ï¼šåŸºç¡€ä¾èµ–ä¸åˆå§‹åŒ–</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_core.tools <span class="hljs-keyword">import</span> Tool
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field

<span class="hljs-comment"># å¤§æ¨¡å‹åˆå§‹åŒ–</span>
llm = ChatOpenAI(
    <span class="hljs-comment"># æ¨¡å‹åç§°</span>
    model_name=<span class="hljs-string">"qwen-plus"</span>,
    <span class="hljs-comment"># æ¨¡å‹åŸºç¡€åœ°å€</span>
    base_url=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,
    <span class="hljs-comment"># å¡«å†™ä¸ªäºº API Key</span>
    api_key=<span class="hljs-string">""</span>,
)

<span class="hljs-comment"># æç¤ºæ¨¡æ¿å®šä¹‰</span>
chat_prompt_template = ChatPromptTemplate.from_messages(
    [
        <span class="hljs-comment"># ç³»ç»Ÿè§’è‰²å®šä¹‰</span>
        (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ª{role}ä¸“å®¶ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜"</span>),
        <span class="hljs-comment"># ç”¨æˆ·è¾“å…¥å ä½ç¬¦</span>
        (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>),
    ]
)
</code></pre>
<h4 data-id="heading-4">æ­¥éª¤2ï¼šå°è£…ä¸ºå·¥å…·</h4>
<p>é€šè¿‡ <code>Tool.from_function</code> æ–¹æ³•å°†è‡ªå®šä¹‰å‡½æ•°å°è£…ä¸ºå·¥å…·ï¼Œéœ€æ˜ç¡®æŒ‡å®šå·¥å…·åç§°ã€åŠŸèƒ½æè¿°åŠå‚æ•°æ ¡éªŒæ¨¡å‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å®šä¹‰å‚æ•°æ¨¡å‹</span>
class SunArgs(BaseModel):
    <span class="hljs-comment"># æ•´æ•°ç±»å‹å‚æ•°1</span>
    num1: <span class="hljs-attr">int</span> = Field(description=<span class="hljs-string">"ç¬¬ä¸€ä¸ªæ•°"</span>)
    <span class="hljs-comment"># æ•´æ•°ç±»å‹å‚æ•°2</span>
    num2: <span class="hljs-attr">int</span> = Field(description=<span class="hljs-string">"ç¬¬äºŒä¸ªæ•°"</span>)
    
<span class="hljs-comment"># å®šä¹‰æ±‚å’Œå‡½æ•°</span>
def sum(a, b):
    return a + b

<span class="hljs-attr">sum_tool</span> = Tool.from_function(
    <span class="hljs-comment"># å…³è”æ ¸å¿ƒå‡½æ•°</span>
    <span class="hljs-attr">func</span>=sum,
    <span class="hljs-comment"># å·¥å…·åç§°ï¼ˆæ¨¡å‹è°ƒç”¨æ—¶è¯†åˆ«çš„åç§°ï¼‰</span>
    <span class="hljs-attr">name</span>=<span class="hljs-string">"sum"</span>,
    <span class="hljs-comment"># å·¥å…·åŠŸèƒ½æè¿°ï¼ˆå¸®åŠ©æ¨¡å‹åˆ¤æ–­æ˜¯å¦è°ƒç”¨ï¼‰</span>
    <span class="hljs-attr">description</span>=<span class="hljs-string">"è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ"</span>,
    <span class="hljs-comment"># å‚æ•°è§„èŒƒï¼ŒæŒ‡å®šå‚æ•°ç±»å‹ä¸æè¿°</span>
    <span class="hljs-attr">args_schema</span>=SunArgs,
)
</code></pre>
<h4 data-id="heading-5">æ­¥éª¤3ï¼šç»‘å®šå·¥å…·å¹¶æ‰§è¡Œè°ƒç”¨</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¸ºå¤§æ¨¡å‹ç»‘å®šå·¥å…·ï¼ˆå¯ç»‘å®šå¤šä¸ªï¼Œä¼ å…¥åˆ—è¡¨ï¼‰</span>
<span class="hljs-attr">llm</span> = llm.bind_tools([sum_tool])

<span class="hljs-comment"># ç»„åˆæç¤ºæ¨¡æ¿ä¸å¤§æ¨¡å‹ï¼Œå½¢æˆè°ƒç”¨é“¾</span>
<span class="hljs-attr">llm</span> = chat_prompt_template | llm

<span class="hljs-comment"># è°ƒç”¨æ¨¡å‹ï¼Œä¼ å…¥è§’è‰²ä¸ç”¨æˆ·éœ€æ±‚</span>
<span class="hljs-attr">response</span> = llm.invoke(input={<span class="hljs-string">"role"</span>: <span class="hljs-string">"æ•°å­¦"</span>, <span class="hljs-string">"input"</span>: <span class="hljs-string">"è®¡ç®—10å’Œ20çš„å’Œ"</span>})

<span class="hljs-comment"># è§£æå·¥å…·è°ƒç”¨ç»“æœå¹¶æ‰§è¡Œå‡½æ•°</span>
<span class="hljs-attr">tool_calls</span> = response.tool_calls
for tool_call in tool_calls:
    <span class="hljs-comment"># åŒ¹é…å·¥å…·åç§°</span>
    if tool_call<span class="hljs-section">["name"]</span> == "sum":
        <span class="hljs-comment"># è·å–æ¨¡å‹ä¼ é€’çš„å‚æ•°</span>
        <span class="hljs-attr">args</span> = tool_call[<span class="hljs-string">"args"</span>]
        <span class="hljs-comment"># æ‰§è¡Œå‡½æ•°</span>
        <span class="hljs-attr">result</span> = sum(**args)
        <span class="hljs-comment"># è¾“å‡ºç»“æœï¼š30</span>
        print(result)
</code></pre>
<h3 data-id="heading-6">æ–¹æ¡ˆäºŒï¼šé€šè¿‡ @tool è£…é¥°å™¨å®šä¹‰å·¥å…·ï¼ˆæ¨èï¼‰</h3>
<h4 data-id="heading-7">æ­¥éª¤1ï¼šåŸºç¡€ä¾èµ–ä¸åˆå§‹åŒ–</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_core.tools <span class="hljs-keyword">import</span> Tool
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field

<span class="hljs-comment"># å¤§æ¨¡å‹åˆå§‹åŒ–</span>
llm = ChatOpenAI(
    <span class="hljs-comment"># æ¨¡å‹åç§°</span>
    model_name=<span class="hljs-string">"qwen-plus"</span>,
    <span class="hljs-comment"># æ¨¡å‹åŸºç¡€åœ°å€</span>
    base_url=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,
    <span class="hljs-comment"># å¡«å†™ä¸ªäºº API Key</span>
    api_key=<span class="hljs-string">""</span>,
)

<span class="hljs-comment"># æç¤ºæ¨¡æ¿å®šä¹‰</span>
chat_prompt_template = ChatPromptTemplate.from_messages(
    [
        <span class="hljs-comment"># ç³»ç»Ÿè§’è‰²å®šä¹‰</span>
        (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ª{role}ä¸“å®¶ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜"</span>),
        <span class="hljs-comment"># ç”¨æˆ·è¾“å…¥å ä½ç¬¦</span>
        (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>),
    ]
)
</code></pre>
<h4 data-id="heading-8">æ­¥éª¤2ï¼šç”¨è£…é¥°å™¨å®šä¹‰å·¥å…·å‡½æ•°</h4>
<p>é€šè¿‡ <code>@tool</code> è£…é¥°å™¨å¯ç›´æ¥å°†è‡ªå®šä¹‰å‡½æ•°å°è£…ä¸ºå·¥å…·ï¼Œæ— éœ€é¢å¤–è°ƒç”¨ <code>Tool.from_function</code> æ–¹æ³•ï¼Œåªéœ€å…³è”å¯¹åº”çš„å‚æ•°æ¨¡å‹å³å¯å®Œæˆé…ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å®šä¹‰å‚æ•°æ¨¡å‹</span>
class SunArgs(BaseModel):
    <span class="hljs-comment"># æ•´æ•°ç±»å‹å‚æ•°1</span>
    num1: <span class="hljs-attr">int</span> = Field(description=<span class="hljs-string">"ç¬¬ä¸€ä¸ªæ•°"</span>)
    <span class="hljs-comment"># æ•´æ•°ç±»å‹å‚æ•°2</span>
    num2: <span class="hljs-attr">int</span> = Field(description=<span class="hljs-string">"ç¬¬äºŒä¸ªæ•°"</span>)

@tool(
    <span class="hljs-comment"># å·¥å…·åŠŸèƒ½æè¿°</span>
    <span class="hljs-attr">description</span>=<span class="hljs-string">"è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ"</span>,
    <span class="hljs-comment"># å…³è”å‚æ•°æ¨¡å‹</span>
    <span class="hljs-attr">args_schema</span>=SunArgs,
)
def sum(num1, num2):
    return num1 + num2
</code></pre>
<h5 data-id="heading-9">æ­¥éª¤3ï¼šç»‘å®šå·¥å…·å¹¶æ‰§è¡Œè°ƒç”¨</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç»‘å®šå·¥å…·ï¼ˆç›´æ¥ä¼ å…¥å‡½æ•°ï¼Œæ— éœ€é¢å¤–å°è£…ï¼‰</span>
<span class="hljs-attr">llm</span> = llm.bind_tools([sum])

<span class="hljs-comment"># ç»„åˆæç¤ºæ¨¡æ¿ä¸å¤§æ¨¡å‹</span>
<span class="hljs-attr">llm</span> = chat_prompt_template | llm

<span class="hljs-comment"># è°ƒç”¨æ¨¡å‹</span>
<span class="hljs-attr">response</span> = llm.invoke(input={<span class="hljs-string">"role"</span>: <span class="hljs-string">"æ•°å­¦"</span>, <span class="hljs-string">"input"</span>: <span class="hljs-string">"è®¡ç®—10å’Œ20çš„å’Œ"</span>})

<span class="hljs-comment"># è§£æå¹¶æ‰§è¡Œå·¥å…·è°ƒç”¨</span>
for tool_call in response.tool_calls:
    if tool_call<span class="hljs-section">["name"]</span> == "sum":
        <span class="hljs-attr">args</span> = tool_call[<span class="hljs-string">"args"</span>]
        <span class="hljs-comment"># é€šè¿‡ invoke æ–¹æ³•æ‰§è¡Œå‡½æ•°</span>
        <span class="hljs-attr">result</span> = sum.invoke(args)
        <span class="hljs-comment"># è¾“å‡ºç»“æœï¼š30</span>
        print(result)
</code></pre>
<h2 data-id="heading-10">æ ¸å¿ƒå…³é”®è¦ç‚¹</h2>
<ul>
<li><strong>å·¥å…·è°ƒç”¨ä½ç½®</strong>ï¼šå·¥å…·å‡½æ•°å¿…é¡»éƒ¨ç½²åœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œå¤§æ¨¡å‹ä»…è´Ÿè´£è¾“å‡ºå·¥å…·è°ƒç”¨æŒ‡ä»¤ï¼Œä¸å…·å¤‡ç›´æ¥æ‰§è¡Œå·¥å…·å‡½æ•°çš„èƒ½åŠ›ï¼Œéœ€ç”±åç«¯æœåŠ¡è§£ææŒ‡ä»¤åè§¦å‘å‡½æ•°è¿è¡Œã€‚</li>
<li><strong>å·¥å…·æè¿°ç²¾å‡†æ€§</strong>ï¼šå·¥å…·çš„ <code>description</code> å­—æ®µéœ€ç®€æ´ä¸”ç²¾å‡†ï¼ˆä¾‹å¦‚â€œè®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å’Œâ€ï¼‰ï¼Œæ¸…æ™°å‘ŠçŸ¥æ¨¡å‹å·¥å…·çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå…¶è¡¨è¿°è´¨é‡ç›´æ¥å†³å®šæ¨¡å‹èƒ½å¦å‡†ç¡®è¯†åˆ«éœ€æ±‚å¹¶è§¦å‘æ­£ç¡®è°ƒç”¨ã€‚</li>
<li><strong>å‚æ•°å®šä¹‰è§„èŒƒæ€§</strong>ï¼šä¸¤ç§æ–¹æ¡ˆå‡éœ€æ˜ç¡®å‚æ•°çš„ç±»å‹ä¸åŠŸèƒ½æè¿°ï¼›æ¨èä½¿ç”¨ <code>Pydantic</code> çš„ <code>BaseModel</code> å®šä¹‰å‚æ•°æ¨¡å‹ï¼Œè¯¥æ–¹å¼å¯å®ç°å‚æ•°è‡ªåŠ¨æ ¡éªŒï¼Œèƒ½æ˜¾è‘—é™ä½æ¨¡å‹è°ƒç”¨æ—¶çš„å‚æ•°é”™è¯¯ç‡ã€‚</li>
<li><strong>è°ƒç”¨ç»“æœè§£æ</strong>ï¼šéœ€é€šè¿‡ <code>response.tool_calls</code> è·å–æ¨¡å‹è¿”å›çš„å·¥å…·è°ƒç”¨æŒ‡ä»¤ï¼Œéå†è§£æå‡ºå·¥å…·åç§°ä¸è¾“å…¥å‚æ•°åï¼Œæ‰§è¡Œå¯¹åº”çš„å·¥å…·å‡½æ•°ï¼Œæœ€ç»ˆè·å–æ‰§è¡Œç»“æœå¹¶ç”¨äºåç»­å“åº”ç”Ÿæˆã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¦‚ä½•æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å¹¶å‘å®¹å™¨ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588095884069896192</link>    <guid>https://juejin.cn/post/7588095884069896192</guid>    <pubDate>2025-12-27T13:50:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884069896192" data-draft-id="7588092534161801216" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¦‚ä½•æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å¹¶å‘å®¹å™¨ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T13:50:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¦‚ä½•æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å¹¶å‘å®¹å™¨ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T13:50:44.000Z" title="Sat Dec 27 2025 13:50:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯å¹¶å‘å®¹å™¨</h2>
<p>åœ¨ç°ä»£å¤šæ ¸å¤„ç†å™¨æˆä¸ºä¸»æµçš„ä»Šå¤©ï¼Œ<strong>å¹¶å‘ç¼–ç¨‹</strong>å·²æˆä¸ºJavaå¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚ä¼ ç»Ÿçš„é›†åˆå®¹å™¨ï¼ˆå¦‚ArrayListã€HashMapï¼‰åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹è¡¨ç°ä¼˜å¼‚ï¼Œä½†åœ¨å¤šçº¿ç¨‹å¹¶å‘è®¿é—®æ—¶ä¼šå¯¼è‡´<strong>æ•°æ®ç«äº‰</strong>ã€<strong>å†…å­˜ä¸ä¸€è‡´</strong>ç”šè‡³<strong>æ­»å¾ªç¯</strong>ç­‰é—®é¢˜ã€‚</p>
<p>å¹¶å‘å®¹å™¨çš„æ ¸å¿ƒä»·å€¼åœ¨äºé€šè¿‡ç²¾å¦™çš„é”ç­–ç•¥å’Œæ•°æ®ç»“æ„ä¼˜åŒ–ï¼Œåœ¨ä¿è¯çº¿ç¨‹å®‰å…¨çš„å‰æä¸‹æœ€å¤§åŒ–æ€§èƒ½ã€‚ä¸»è¦è§£å†³ä¸‰å¤§å¹¶å‘æŒ‘æˆ˜ï¼š</p>
<ul>
<li><strong>æ•°æ®ç«äº‰</strong>ï¼šå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹åŒä¸€æ•°æ®æ—¶äº§ç”Ÿä¸å¯é¢„çŸ¥ç»“æœ</li>
<li><strong>å¯è§æ€§</strong>ï¼šä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹å…¶ä»–çº¿ç¨‹æ— æ³•ç«‹å³çœ‹åˆ°</li>
<li><strong>åŸå­æ€§</strong>ï¼šå¤åˆæ“ä½œæ‰§è¡Œè¿‡ç¨‹ä¸­è¢«ä¸­æ–­å¯¼è‡´æ•°æ®ä¸ä¸€è‡´</li>
</ul>
<h2 data-id="heading-1">2. å¹¶å‘å®¹å™¨åˆ†ç±»ä¸é€‚ç”¨åœºæ™¯</h2>
<p>ä¸‹è¡¨æ€»ç»“äº†ä¸»è¦å¹¶å‘å®¹å™¨åŠå…¶å…¸å‹åº”ç”¨åœºæ™¯ï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿé€‰å‹ï¼š</p>





























































<table><thead><tr><th>å®¹å™¨ç±»å‹</th><th>å®ç°ç±»</th><th>çº¿ç¨‹å®‰å…¨æœºåˆ¶</th><th>é€‚ç”¨åœºæ™¯</th><th>æ€§èƒ½ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>å¹¶å‘Map</strong></td><td>ConcurrentHashMap</td><td>åˆ†æ®µé”+CASï¼ˆJDK7ï¼‰ã€synchronized+CASï¼ˆJDK8ï¼‰</td><td>é«˜å¹¶å‘è¯»å†™ã€ç¼“å­˜</td><td>è¯»å®Œå…¨æ— é”ï¼Œå†™é”ç²’åº¦ç»†</td></tr><tr><td/><td>ConcurrentSkipListMap</td><td>è·³è¡¨+CAS</td><td>å¤§æ•°æ®é‡æœ‰åºè®¿é—®ã€æ’è¡Œæ¦œ</td><td>å­˜å–O(log n)ï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢</td></tr><tr><td><strong>å¹¶å‘List</strong></td><td>CopyOnWriteArrayList</td><td>å†™æ—¶å¤åˆ¶+ReentrantLock</td><td>è¯»å¤šå†™å°‘ï¼ˆé…ç½®ã€é»‘åå•ï¼‰</td><td>è¯»æ— é”ï¼Œå†™æ€§èƒ½è¾ƒå·®</td></tr><tr><td/><td>Vector</td><td>å…¨è¡¨é”synchronized</td><td>å¼ºä¸€è‡´æ€§ä½å¹¶å‘åœºæ™¯ï¼ˆå·²è¿‡æ—¶ï¼‰</td><td>å…¨å±€é”ï¼Œæ€§èƒ½å·®</td></tr><tr><td><strong>é˜»å¡é˜Ÿåˆ—</strong></td><td>ArrayBlockingQueue</td><td>å•é”ReentrantLock</td><td>å›ºå®šå¤§å°ç”Ÿäº§è€…-æ¶ˆè´¹è€…</td><td>æœ‰ç•Œï¼Œååé‡ä¸­ç­‰</td></tr><tr><td/><td>LinkedBlockingQueue</td><td>åŒé”åˆ†ç¦»</td><td>é«˜ååä»»åŠ¡é˜Ÿåˆ—</td><td>å¯é€‰æœ‰ç•Œï¼Œååé‡é«˜</td></tr><tr><td><strong>éé˜»å¡é˜Ÿåˆ—</strong></td><td>ConcurrentLinkedQueue</td><td>CASæ— é”ç®—æ³•</td><td>é«˜å¹¶å‘æ¶ˆæ¯ä¼ é€’</td><td>æ— é”ï¼ŒABAé—®é¢˜</td></tr></tbody></table>
<h2 data-id="heading-2">3. Mapå®¹å™¨é€‰å‹ï¼šConcurrentHashMap vs ConcurrentSkipListMap</h2>
<h3 data-id="heading-3">3.1 é«˜å¹¶å‘ç¼“å­˜åœºæ™¯ï¼šConcurrentHashMap</h3>
<p><strong>æ¡ˆä¾‹ï¼šç”µå•†å•†å“é”€é‡ç»Ÿè®¡ç³»ç»Ÿ</strong></p>
<p>ç”µå•†å¹³å°éœ€è¦å®æ—¶ç»Ÿè®¡æ¯ä¸ªå•†å“çš„é”€é‡ï¼Œå¹¶å±•ç¤ºé”€é‡TOP 10æ¦œå•ã€‚è¿™ä¸€åœºæ™¯ç‰¹ç‚¹åŒ…æ‹¬<strong>é«˜å¹¶å‘å†™å…¥</strong>ï¼ˆå¤§é‡ç”¨æˆ·åŒæ—¶è´­ä¹°ï¼‰å’Œ<strong>å®æ—¶æŸ¥è¯¢</strong>éœ€æ±‚ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”µå•†é”€é‡ç»Ÿè®¡å®ç°</span>
<span class="hljs-title class_">ConcurrentHashMap</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Long</span>&gt; salesMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

<span class="hljs-comment">// çº¿ç¨‹å®‰å…¨çš„é”€é‡ç´¯åŠ </span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">incrementSales</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> productId</span>) {
    salesMap.<span class="hljs-title function_">compute</span>(productId, (k, v) -&gt; v == <span class="hljs-literal">null</span> ? <span class="hljs-number">1</span> : v + <span class="hljs-number">1</span>);
}

<span class="hljs-comment">// è·å–é”€é‡å‰åå•†å“</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">getTop10Products</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> salesMap.<span class="hljs-title function_">entrySet</span>().<span class="hljs-title function_">stream</span>()
        .<span class="hljs-title function_">sorted</span>(<span class="hljs-title class_">Map</span>.<span class="hljs-property">Entry</span>.&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Long</span>&gt;<span class="hljs-title function_">comparingByValue</span>().<span class="hljs-title function_">reversed</span>())
        .<span class="hljs-title function_">limit</span>(<span class="hljs-number">10</span>)
        .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Map</span>.<span class="hljs-property">Entry</span>::getKey)
        .<span class="hljs-title function_">collect</span>(<span class="hljs-title class_">Collectors</span>.<span class="hljs-title function_">toList</span>());
}
</code></pre>
<p><strong>é€‰å‹ç†ç”±</strong>ï¼š</p>
<ul>
<li>ConcurrentHashMapé‡‡ç”¨<strong>æ¡¶çº§åˆ«é”ç²’åº¦</strong>ï¼Œä¸åŒçº¿ç¨‹å¯åŒæ—¶è®¿é—®ä¸åŒå“ˆå¸Œæ¡¶</li>
<li><strong>å¼±ä¸€è‡´æ€§è¿­ä»£å™¨</strong>å…è®¸åœ¨éå†åŒæ—¶è¿›è¡Œä¿®æ”¹ï¼Œä¸æŠ›ConcurrentModificationException</li>
<li>åœ¨JDK8ä¸­è¿›ä¸€æ­¥ä¼˜åŒ–ä¸ºsynchronized+CASï¼Œæ€§èƒ½æ›´ä¼˜</li>
</ul>
<h3 data-id="heading-4">3.2 å¤§æ•°æ®é‡æœ‰åºåœºæ™¯ï¼šConcurrentSkipListMap</h3>
<p><strong>æ¡ˆä¾‹ï¼šæ‰‹æœºæµé‡å®æ—¶ç›‘æ§ç³»ç»Ÿ</strong></p>
<p>è¿è¥å•†ç³»ç»Ÿéœ€è¦å­˜å‚¨æ•°åƒä¸‡ç”¨æˆ·çš„å®æ—¶æµé‡æ•°æ®ï¼Œæ”¯æŒé«˜å¹¶å‘æ›´æ–°å’ŒèŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚æŸ¥è¯¢æµé‡ä½¿ç”¨å‰100çš„ç”¨æˆ·ï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">ConcurrentSkipListMap</span>&lt;<span class="hljs-title class_">Long</span>, <span class="hljs-title class_">TrafficData</span>&gt; trafficMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentSkipListMap</span>&lt;&gt;();

<span class="hljs-comment">// æ’å…¥ç”¨æˆ·æµé‡æ•°æ®</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">updateUserTraffic</span>(<span class="hljs-params">Long userId, TrafficData data</span>) {
    trafficMap.<span class="hljs-title function_">put</span>(userId, data);
}

<span class="hljs-comment">// æŸ¥è¯¢æµé‡å‰100çš„ç”¨æˆ·</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">Long</span>, <span class="hljs-title class_">TrafficData</span>&gt; <span class="hljs-title function_">getTop100Users</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> trafficMap.<span class="hljs-title function_">descendingMap</span>().<span class="hljs-title function_">headMap</span>(100L);
}
</code></pre>
<p><strong>é€‰å‹ç†ç”±</strong>ï¼š</p>
<ul>
<li><strong>è·³è¡¨ç»“æ„</strong>æ”¯æŒO(log n)çš„æŸ¥è¯¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œ</li>
<li>å¤©ç„¶<strong>æœ‰åºæ€§</strong>æ”¯æŒèŒƒå›´æŸ¥è¯¢å’Œæ’åºæ“ä½œ</li>
<li>ä¸çº¢é»‘æ ‘ç›¸æ¯”ï¼Œè·³è¡¨åœ¨å¹¶å‘ç¯å¢ƒä¸‹<strong>é”ç«äº‰æ›´å°‘</strong>ï¼Œå› ä¸ºåªéœ€é”å®šå±€éƒ¨èŠ‚ç‚¹</li>
</ul>
<h2 data-id="heading-5">4. Listå®¹å™¨é€‰å‹ï¼šCopyOnWriteArrayListçš„ç²¾å‡†åº”ç”¨</h2>
<h3 data-id="heading-6">4.1 è¯»å¤šå†™å°‘åœºæ™¯å…¸èŒƒ</h3>
<p><strong>æ¡ˆä¾‹ï¼šç”¨æˆ·é»‘åå•ç®¡ç†ç³»ç»Ÿ</strong></p>
<p>ç”µå•†ç³»ç»Ÿéœ€è¦ç»´æŠ¤ç”¨æˆ·é»‘åå•ï¼Œæ‹¦æˆªæ¶æ„ç”¨æˆ·å‚ä¸ç§’æ€æ´»åŠ¨ã€‚è¿™ä¸€åœºæ™¯<strong>è¯»å¤šå†™å°‘</strong>ç‰¹ç‚¹æ˜æ˜¾ï¼šæ¯ç§’æ•°åƒæ¬¡æŸ¥è¯¢è¯·æ±‚ï¼Œæ¯å¤©ä»…æ›´æ–°1-2æ¬¡é»‘åå•ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">CopyOnWriteArrayList&lt;Long&gt; blacklist = new CopyOnWriteArrayList&lt;&gt;();

<span class="hljs-comment">// åå°å®šæ—¶æ›´æ–°é»‘åå•ï¼ˆä½é¢‘ç‡å†™ï¼‰</span>
scheduledExecutor<span class="hljs-selector-class">.scheduleAtFixedRate</span>(() -&gt; {
    List&lt;Long&gt; newList = <span class="hljs-built_in">fetchLatestBlacklistFromDB</span>();
    blacklist<span class="hljs-selector-class">.clear</span>();
    blacklist<span class="hljs-selector-class">.addAll</span>(newList);
}, <span class="hljs-number">0</span>, <span class="hljs-number">24</span>, TimeUnit<span class="hljs-selector-class">.HOURS</span>);

<span class="hljs-comment">// é«˜é¢‘æŸ¥è¯¢ï¼ˆæ— é”ï¼‰</span>
public boolean <span class="hljs-built_in">isUserBlocked</span>(Long userId) {
    return blacklist<span class="hljs-selector-class">.contains</span>(userId);
}
</code></pre>
<p><strong>é€‰å‹ç†ç”±</strong>ï¼š</p>
<ul>
<li><strong>å†™æ—¶å¤åˆ¶</strong>æœºåˆ¶ä¿è¯è¯»æ“ä½œå®Œå…¨æ— é”ï¼Œæ€§èƒ½æé«˜</li>
<li>é€‚åˆ<strong>æ•°æ®é‡ä¸å¤§</strong>ä¸”<strong>å†™æ“ä½œé¢‘ç‡ä½</strong>çš„åœºæ™¯</li>
<li>å…è®¸<strong>å¼±ä¸€è‡´æ€§</strong>ï¼Œè¯»æ“ä½œå¯èƒ½çŸ­æš‚çœ‹åˆ°æ—§æ•°æ®</li>
</ul>
<h3 data-id="heading-7">4.2 é¿å‘æŒ‡å—ï¼šè¯¯ç”¨åœºæ™¯åˆ†æ</h3>
<p><strong>é”™è¯¯æ¡ˆä¾‹ï¼šå®æ—¶èŠå¤©æ¶ˆæ¯åˆ—è¡¨</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é”™è¯¯ç”¨æ³•ï¼šé¢‘ç¹å†™å…¥çš„èŠå¤©å®¤</span>
<span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;<span class="hljs-title class_">String</span>&gt; chatMessages = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;&gt;();

<span class="hljs-comment">// æ¯ä¸ªæ–°æ¶ˆæ¯éƒ½ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">addChatMessage</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> message</span>) {
    chatMessages.<span class="hljs-title function_">add</span>(message); <span class="hljs-comment">// é¢‘ç¹å¤åˆ¶å¯¼è‡´å†…å­˜æš´æ¶¨</span>
}
</code></pre>
<p><strong>åæœ</strong>ï¼šèŠå¤©æ¶ˆæ¯é¢‘ç¹å†™å…¥ä¼šå¯¼è‡´<strong>å†…å­˜æš´æ¶¨</strong>å’Œ<strong>é¢‘ç¹Full GC</strong>ï¼Œä¸¥é‡å½±å“ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<p><strong>æ­£ç¡®æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šè€ƒè™‘ä½¿ç”¨ConcurrentLinkedQueueæˆ–LinkedBlockingQueueã€‚</p>
<h2 data-id="heading-8">5. å¹¶å‘é˜Ÿåˆ—é€‰å‹ï¼šé˜»å¡vséé˜»å¡</h2>
<h3 data-id="heading-9">5.1 ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼šBlockingQueueç³»åˆ—</h3>
<p><strong>æ¡ˆä¾‹ï¼šçº¿ç¨‹æ± ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ</strong></p>
<p>éœ€è¦å®ç°ä»»åŠ¡æäº¤ä¸æ‰§è¡Œçš„è§£è€¦ï¼Œæ§åˆ¶èµ„æºä½¿ç”¨é˜²æ­¢å†…å­˜æº¢å‡ºã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å›ºå®šå¤§å°çš„ä»»åŠ¡é˜Ÿåˆ—</span>
<span class="hljs-title class_">BlockingQueue</span>&lt;<span class="hljs-title class_">Runnable</span>&gt; taskQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1000</span>);

<span class="hljs-comment">// ç”Ÿäº§è€…æäº¤ä»»åŠ¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">submitTask</span>(<span class="hljs-params">Runnable task</span>) {
    <span class="hljs-keyword">try</span> {
        taskQueue.<span class="hljs-title function_">put</span>(task); <span class="hljs-comment">// é˜Ÿåˆ—æ»¡æ—¶è‡ªåŠ¨é˜»å¡</span>
    } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">InterruptedException</span> e) {
        <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">currentThread</span>().<span class="hljs-title function_">interrupt</span>();
    }
}

<span class="hljs-comment">// æ¶ˆè´¹è€…å¤„ç†ä»»åŠ¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">processTasks</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-title class_">Runnable</span> task = taskQueue.<span class="hljs-title function_">take</span>(); <span class="hljs-comment">// é˜Ÿåˆ—ç©ºæ—¶è‡ªåŠ¨é˜»å¡</span>
        executor.<span class="hljs-title function_">execute</span>(task);
    }
}
</code></pre>
<p><strong>é€‰å‹å¯¹æ¯”</strong>ï¼š</p>
<ul>
<li><strong>ArrayBlockingQueue</strong>ï¼šå›ºå®šå¤§å°ï¼Œå†…å­˜æ§åˆ¶æ€§å¥½ï¼Œé€‚åˆ<strong>èµ„æºå—é™</strong>ç¯å¢ƒ</li>
<li><strong>LinkedBlockingQueue</strong>ï¼šé»˜è®¤æ— ç•Œï¼ˆå®é™…ä¸ºInteger.MAX_VALUEï¼‰ï¼Œ<strong>ååé‡æ›´é«˜</strong>ï¼Œé€‚åˆ<strong>ä»»åŠ¡é‡æ³¢åŠ¨å¤§</strong>çš„åœºæ™¯</li>
<li><strong>SynchronousQueue</strong>ï¼šä¸å­˜å‚¨å…ƒç´ ï¼Œç›´æ¥ä¼ é€’ï¼Œé€‚åˆ<strong>é«˜åå</strong>çš„çº¿ç¨‹æ± å·¥ä½œé˜Ÿåˆ—</li>
</ul>
<h3 data-id="heading-10">5.2 é«˜ååæ¶ˆæ¯ä¼ é€’ï¼šConcurrentLinkedQueue</h3>
<p><strong>æ¡ˆä¾‹ï¼šè®¢å•å¤„ç†ç³»ç»Ÿä¸­çš„å¼‚æ­¥æ¶ˆæ¯</strong></p>
<p>éœ€è¦é«˜å¹¶å‘éé˜»å¡çš„ä»»åŠ¡åˆ†å‘ï¼Œé¿å…çº¿ç¨‹é˜»å¡å½±å“ç³»ç»Ÿå“åº”ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">ConcurrentLinkedQueue&lt;OrderEvent&gt; eventQueue = <span class="hljs-keyword">new</span> ConcurrentLinkedQueue&lt;&gt;();

<span class="hljs-comment">// å¤šç”Ÿäº§è€…å¹¶å‘æäº¤</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">submitOrderEvent</span>(<span class="hljs-params">OrderEvent <span class="hljs-keyword">event</span></span>)</span> {
    eventQueue.offer(<span class="hljs-keyword">event</span>); <span class="hljs-comment">// æ— é˜»å¡æ’å…¥</span>
}

<span class="hljs-comment">// æ‰¹é‡å¤„ç†æå‡æ•ˆç‡</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processEventsBatch</span>()</span> {
    List&lt;OrderEvent&gt; batch = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;(<span class="hljs-number">100</span>);
    OrderEvent <span class="hljs-keyword">event</span>;
    
    <span class="hljs-comment">// æ‰¹é‡è·å–å‡å°‘é”ç«äº‰</span>
    <span class="hljs-keyword">while</span> ((<span class="hljs-keyword">event</span> = eventQueue.poll()) != <span class="hljs-literal">null</span> &amp;&amp; batch.size() &lt; <span class="hljs-number">100</span>) {
        batch.<span class="hljs-keyword">add</span>(<span class="hljs-keyword">event</span>);
    }
    
    <span class="hljs-keyword">if</span> (!batch.isEmpty()) {
        processBatch(batch);
    }
}
</code></pre>
<p><strong>é€‰å‹ç†ç”±</strong>ï¼š</p>
<ul>
<li><strong>å®Œå…¨æ— é”</strong>å®ç°ï¼Œä¾èµ–CASæ“ä½œé¿å…çº¿ç¨‹é˜»å¡</li>
<li>é€‚åˆ<strong>é«˜å¹¶å‘</strong>ä¸”<strong>å¤„ç†é€Ÿåº¦åŒ¹é…</strong>çš„åœºæ™¯</li>
<li>æ³¨æ„å¯èƒ½çš„<strong>ABAé—®é¢˜</strong>ï¼ˆä½†Javaå®ç°å·²è§£å†³ï¼‰</li>
</ul>
<h2 data-id="heading-11">6. ä¸€è‡´æ€§è¦æ±‚ä¸æ€§èƒ½æƒè¡¡</h2>
<h3 data-id="heading-12">6.1 å¼ºä¸€è‡´æ€§åœºæ™¯çš„ç‰¹æ®Šè€ƒé‡</h3>
<p><strong>æ¡ˆä¾‹ï¼šé‡‘èäº¤æ˜“é…ç½®ç®¡ç†</strong></p>
<p>åœ¨ä½å¹¶å‘ä½†è¦æ±‚å¼ºä¸€è‡´æ€§çš„é…ç½®ç®¡ç†åœºæ™¯ä¸­ï¼Œæœ‰æ—¶ä»éœ€è€ƒè™‘ä¼ ç»Ÿå®¹å™¨ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å¼ºä¸€è‡´æ€§é…ç½®ç®¡ç†</span>
Hashtable&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt; config = <span class="hljs-keyword">new</span> Hashtable&lt;&gt;();

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨åŒæ­¥åŒ…è£…å™¨</span>
Map&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt; syncMap = Collections.<span class="hljs-built_in">synchronizedMap</span>(<span class="hljs-keyword">new</span> HashMap&lt;&gt;());
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li><strong>é…ç½®ä¿¡æ¯</strong>è¯»å–å’Œæ›´æ–°</li>
<li><strong>ä½é¢‘æ“ä½œ</strong>ä½†éœ€è¦ç«‹å³å¯è§çš„åœºæ™¯</li>
<li>æ›¿ä»£æ–¹æ¡ˆï¼šè€ƒè™‘ä½¿ç”¨<strong>æ˜¾å¼é”æ§åˆ¶</strong>çš„æ™®é€šHashMap</li>
</ul>
<h3 data-id="heading-13">6.2 å¼±ä¸€è‡´æ€§çš„åˆç†åˆ©ç”¨</h3>
<p>å¤§éƒ¨åˆ†å¹¶å‘å®¹å™¨ï¼ˆConcurrentHashMapã€CopyOnWriteArrayListï¼‰æä¾›<strong>å¼±ä¸€è‡´æ€§</strong>ä¿è¯ï¼Œè¿™åœ¨å®é™…ä¸šåŠ¡ä¸­é€šå¸¸æ˜¯å¯æ¥å—çš„ã€‚</p>
<p><strong>å¯æ¥å—åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å•†å“åº“å­˜ç¼“å­˜ï¼ˆçŸ­æš‚ä¸ä¸€è‡´ä¸å½±å“ä¸šåŠ¡ï¼‰</li>
<li>ç”¨æˆ·ä¼šè¯ä¿¡æ¯ï¼ˆç§’çº§å»¶è¿Ÿå¯æ¥å—ï¼‰</li>
<li>ç›‘æ§æŒ‡æ ‡ç»Ÿè®¡ï¼ˆå…è®¸å°‘é‡æ•°æ®è¯¯å·®ï¼‰</li>
</ul>
<h2 data-id="heading-14">7. ç»¼åˆé€‰å‹ç­–ç•¥ä¸æ€§èƒ½è°ƒä¼˜</h2>
<h3 data-id="heading-15">7.1 é€‰å‹å†³ç­–æ ‘</h3>
<ol>
<li><strong>ç¡®å®šæ•°æ®ç»“æ„ç±»å‹</strong>ï¼ˆMapã€Listã€Queueï¼‰</li>
<li><strong>åˆ†æè¯»å†™æ¯”ä¾‹</strong>ï¼ˆè¯»å¤šå†™å°‘vså†™å¤šè¯»å°‘ï¼‰</li>
<li><strong>è¯„ä¼°æ•°æ®é‡çº§</strong>ï¼ˆå°æ•°æ®vså¤§æ•°æ®é‡ï¼‰</li>
<li><strong>æ˜ç¡®ä¸€è‡´æ€§è¦æ±‚</strong>ï¼ˆå¼ºä¸€è‡´vså¼±ä¸€è‡´ï¼‰</li>
<li><strong>è€ƒè™‘æœ‰åºæ€§éœ€æ±‚</strong>ï¼ˆæ˜¯å¦éœ€è¦æ’åºï¼‰</li>
</ol>
<h3 data-id="heading-16">7.2 æ€§èƒ½ä¼˜åŒ–å®è·µ</h3>
<ol>
<li><strong>åˆç†åˆå§‹åŒ–å®¹é‡</strong>é¿å…é¢‘ç¹æ‰©å®¹</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">ConcurrentHashMap</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; cache = 
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">16</span>, <span class="hljs-number">0.</span>75f, <span class="hljs-number">8</span>); <span class="hljs-comment">// æŒ‡å®šåˆå§‹å®¹é‡å’Œå¹¶å‘çº§åˆ«</span>
</code></pre>
<ol>
<li><strong>åˆ©ç”¨åŸå­æ“ä½œ</strong>é¿å…æ˜¾å¼é”</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä½¿ç”¨åŸå­æ“ä½œæ–¹æ³•</span>
map.<span class="hljs-built_in">computeIfAbsent</span>(<span class="hljs-string">"key"</span>, k -&gt; <span class="hljs-built_in">createExpensiveValue</span>(k));
map.<span class="hljs-built_in">merge</span>(<span class="hljs-string">"counter"</span>, <span class="hljs-number">1L</span>, Long::sum);
</code></pre>
<ol>
<li><strong>æ‰¹é‡æ“ä½œ</strong>å‡å°‘é”ç«äº‰é¢‘ç‡</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰¹é‡å¤„ç†å‡å°‘é”ç²’åº¦</span>
<span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Object</span>&gt; batch = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
<span class="hljs-comment">// ... æ”¶é›†ä¸€æ‰¹æ“ä½œ</span>
list.<span class="hljs-title function_">addAll</span>(batch); <span class="hljs-comment">// å•æ¬¡é”è·å–</span>
</code></pre>
<h2 data-id="heading-17">8. æ€»ç»“</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­é€‰æ‹©åˆé€‚çš„å¹¶å‘å®¹å™¨ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘<strong>ä¸šåŠ¡åœºæ™¯</strong>ã€<strong>æ•°æ®ç‰¹å¾</strong>å’Œ<strong>æ€§èƒ½è¦æ±‚</strong>ä¸‰å¤§å› ç´ ã€‚æ²¡æœ‰ç»å¯¹çš„"æœ€ä½³"å®¹å™¨ï¼Œåªæœ‰é’ˆå¯¹ç‰¹å®šåœºæ™¯çš„"æœ€åˆé€‚"é€‰æ‹©ã€‚</p>
<p><strong>æ ¸å¿ƒé€‰å‹åŸåˆ™</strong>ï¼š</p>
<ul>
<li>è¯»å¤šå†™å°‘ä¼˜å…ˆè€ƒè™‘CopyOnWriteç³»åˆ—</li>
<li>é«˜å¹¶å‘è¯»å†™Mapé¦–é€‰ConcurrentHashMap</li>
<li>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ä½¿ç”¨BlockingQueue</li>
<li>å¤§æ•°æ®é‡æœ‰åºåœºæ™¯é€‰æ‹©ConcurrentSkipListMap</li>
<li>é«˜ååéé˜»å¡åœºæ™¯è€ƒè™‘ConcurrentLinkedQueue</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»0åˆ°1å®ç°é€šç”¨å¾®ä»»åŠ¡è°ƒåº¦å™¨ï¼šç†è§£å‰ç«¯å¼‚æ­¥è°ƒåº¦æ ¸å¿ƒ]]></title>    <link>https://juejin.cn/post/7588149079416864822</link>    <guid>https://juejin.cn/post/7588149079416864822</guid>    <pubDate>2025-12-27T12:41:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588149079416864822" data-draft-id="7588152122186448950" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»0åˆ°1å®ç°é€šç”¨å¾®ä»»åŠ¡è°ƒåº¦å™¨ï¼šç†è§£å‰ç«¯å¼‚æ­¥è°ƒåº¦æ ¸å¿ƒ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T12:41:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»0åˆ°1å®ç°é€šç”¨å¾®ä»»åŠ¡è°ƒåº¦å™¨ï¼šç†è§£å‰ç«¯å¼‚æ­¥è°ƒåº¦æ ¸å¿ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:41:41.000Z" title="Sat Dec 27 2025 12:41:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»0åˆ°1å®ç°é€šç”¨å¾®ä»»åŠ¡è°ƒåº¦å™¨ï¼šç†è§£å‰ç«¯å¼‚æ­¥è°ƒåº¦æ ¸å¿ƒ</h2>
<p>å¾®ä»»åŠ¡ï¼ˆMicrotaskï¼‰æ˜¯å‰ç«¯å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¹¿æ³›åº”ç”¨äºVue/reactçš„æ›´æ–°ã€Promiseå›è°ƒã€äº‹ä»¶å¾ªç¯ä¼˜åŒ–ç­‰åœºæ™¯ã€‚æ‰‹åŠ¨å®ç°ä¸€ä¸ªé€šç”¨çš„å¾®ä»»åŠ¡è°ƒåº¦å™¨ï¼Œä¸ä»…èƒ½åŠ æ·±å¯¹äº‹ä»¶å¾ªç¯çš„ç†è§£ï¼Œè¿˜èƒ½è§£å†³ã€Œæ‰¹é‡æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€ç»Ÿä¸€æ§åˆ¶æ‰§è¡Œæ—¶æœºã€çš„å®é™…å¼€å‘éœ€æ±‚ã€‚</p>
<p>æœ¬æ–‡å°†ä»ã€Œæœ€å°å¯ç”¨ç‰ˆã€åˆ°ã€Œç”Ÿäº§çº§ä¼˜åŒ–ç‰ˆã€ï¼Œä¸€æ­¥æ­¥æ‹†è§£å¾®ä»»åŠ¡è°ƒåº¦å™¨çš„å®ç°æ€è·¯ï¼Œæœ€ç»ˆç»™å‡ºå¯ç›´æ¥å¤ç”¨çš„å®Œæ•´ä»£ç ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒéœ€æ±‚ä¸è®¾è®¡æ€è·¯</h3>
<h4 data-id="heading-2">1. è¦è§£å†³çš„é—®é¢˜</h4>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œé¢‘ç¹è§¦å‘çš„å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚å¤šæ¬¡æ›´æ–°DOMã€æ‰¹é‡æ•°æ®å¤„ç†ï¼‰å¦‚æœç›´æ¥æ‰§è¡Œï¼Œä¼šå¯¼è‡´å¤šæ¬¡å¾®ä»»åŠ¡åˆ›å»ºï¼Œå¢åŠ æ€§èƒ½å¼€é”€ã€‚æˆ‘ä»¬éœ€è¦ï¼š</p>
<ul>
<li>
<p>æ‰¹é‡ç®¡ç†ä»»åŠ¡ï¼Œå»é‡ä¸”ç»Ÿä¸€åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œï¼›</p>
</li>
<li>
<p>æ”¯æŒä»»åŠ¡æ‰§è¡Œå‰/åçš„å›è°ƒï¼ˆå¦‚åˆå§‹åŒ–/æ¸…ç†é€»è¾‘ï¼‰ï¼›</p>
</li>
<li>
<p>å¤–éƒ¨å¯é€šè¿‡<code>await</code>ç­‰å¾…æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼›</p>
</li>
<li>
<p>å…¼å®¹æµè§ˆå™¨/Node.jsç¯å¢ƒï¼ˆå¤„ç†<code>queueMicrotask</code> APIå…¼å®¹æ€§ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-3">2. æ ¸å¿ƒè®¾è®¡åŸåˆ™</h4>
<ul>
<li>
<p><strong>å»é‡æ‰§è¡Œ</strong>ï¼šç”¨<code>Set</code>å­˜å‚¨ä»»åŠ¡ï¼Œé¿å…é‡å¤æ·»åŠ ï¼›</p>
</li>
<li>
<p><strong>é˜²é‡å¤è°ƒåº¦</strong>ï¼šæ ‡è®°æ˜¯å¦å·²å°†æ‰§è¡Œé€»è¾‘æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé¿å…å¤šæ¬¡è§¦å‘ï¼›</p>
</li>
<li>
<p><strong>çŠ¶æ€éš”ç¦»</strong>ï¼šç”¨ç§æœ‰å±æ€§å°è£…å†…éƒ¨çŠ¶æ€ï¼ˆå¦‚<code>isFlushing</code>ï¼‰ï¼Œå¯¹å¤–æš´éœ²å¯æ§çš„APIï¼›</p>
</li>
<li>
<p><strong>å…¼å®¹é™çº§</strong>ï¼šæ— <code>queueMicrotask</code>æ—¶ï¼Œç”¨<code>Promise.resolve().then()</code>å…œåº•ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">äºŒã€Step 1ï¼šå®ç°æœ€å°å¯ç”¨ç‰ˆè°ƒåº¦å™¨</h3>
<p>å…ˆæ­å»ºæ ¸å¿ƒéª¨æ¶ï¼Œå®Œæˆã€Œæ·»åŠ ä»»åŠ¡ã€æ‰¹é‡æ‰§è¡Œã€çš„åŸºç¡€èƒ½åŠ›ï¼Œæš‚ä¸å¤„ç†å›è°ƒã€å¼‚å¸¸ã€å…¼å®¹ç­‰ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-5">1. å®šä¹‰åŸºç¡€ç±»å‹</h4>
<p>å…ˆæ˜ç¡®æ ¸å¿ƒç±»å‹ï¼Œè®©ä»£ç è¯­ä¹‰æ›´æ¸…æ™°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¾…æ‰§è¡Œçš„ä»»åŠ¡ç±»å‹ï¼ˆæ— å‚æ— è¿”å›å€¼å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">TaskToQueue</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-comment">// å–æ¶ˆå›è°ƒçš„å‡½æ•°ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Unsubscribe</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
</code></pre>
<h4 data-id="heading-6">2. æ ¸å¿ƒç±»å®ç°ï¼ˆæœ€å°ç‰ˆï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * æœ€å°å¯ç”¨ç‰ˆå¾®ä»»åŠ¡è°ƒåº¦å™¨
 * æ ¸å¿ƒèƒ½åŠ›ï¼šæ·»åŠ ä»»åŠ¡ã€æ‰¹é‡åœ¨å¾®ä»»åŠ¡æ‰§è¡Œã€é˜²é‡å¤è°ƒåº¦
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MicroScheduler</span> {
  <span class="hljs-comment">// ä»»åŠ¡é˜Ÿåˆ—ï¼šSetè‡ªåŠ¨å»é‡</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> taskQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">TaskToQueue</span>&gt;();
  <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å·²è°ƒåº¦å¾®ä»»åŠ¡æ‰§è¡Œï¼ˆé˜²é‡å¤ï¼‰</span>
  <span class="hljs-keyword">private</span> isFlushScheduled = <span class="hljs-literal">false</span>;
  <span class="hljs-comment">// æ ‡è®°æ˜¯å¦æ­£åœ¨æ‰§è¡Œä»»åŠ¡ï¼ˆé¿å…åµŒå¥—æ‰§è¡Œï¼‰</span>
  <span class="hljs-keyword">private</span> isFlushing = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">/**
   * æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—ï¼Œå¹¶è§¦å‘è°ƒåº¦
   */</span>
  <span class="hljs-title function_">enqueue</span>(<span class="hljs-attr">task</span>: <span class="hljs-title class_">TaskToQueue</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">add</span>(task);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scheduleFlush</span>();
  }

  <span class="hljs-comment">/**
   * è°ƒåº¦ä»»åŠ¡æ‰§è¡Œåˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆæ ¸å¿ƒï¼šé˜²é‡å¤è°ƒåº¦ï¼‰
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">scheduleFlush</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// å·²è°ƒåº¦/æ­£åœ¨æ‰§è¡Œï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushScheduled</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushScheduled</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-comment">// æ ¸å¿ƒï¼šå°†æ‰§è¡Œé€»è¾‘æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</span>
    <span class="hljs-title function_">queueMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushScheduled</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeTasks</span>();
    });
  }

  <span class="hljs-comment">/**
   * æ‰¹é‡æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">executeTasks</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span>) <span class="hljs-keyword">return</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// éå†æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ï¼Œæ‰§è¡Œåä»é˜Ÿåˆ—ç§»é™¤</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">task</span>) =&gt;</span> {
      <span class="hljs-title function_">task</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">delete</span>(task);
    });

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span> = <span class="hljs-literal">false</span>;
  }
}
</code></pre>
<h4 data-id="heading-7">3. æµ‹è¯•æœ€å°ç‰ˆåŠŸèƒ½</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®ä¾‹åŒ–è°ƒåº¦å™¨</span>
<span class="hljs-keyword">const</span> scheduler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MicroScheduler</span>();

<span class="hljs-comment">// æ·»åŠ 2ä¸ªä»»åŠ¡ï¼ˆæ•…æ„é‡å¤æ·»åŠ ï¼Œæµ‹è¯•å»é‡ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">task1</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰§è¡Œä»»åŠ¡1'</span>);
scheduler.<span class="hljs-title function_">enqueue</span>(task1);
scheduler.<span class="hljs-title function_">enqueue</span>(task1); <span class="hljs-comment">// é‡å¤æ·»åŠ ï¼ŒSetä¼šè‡ªåŠ¨å»é‡</span>
scheduler.<span class="hljs-title function_">enqueue</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰§è¡Œä»»åŠ¡2'</span>));

<span class="hljs-comment">// è¾“å‡ºç»“æœï¼ˆå¾®ä»»åŠ¡é˜¶æ®µæ‰§è¡Œï¼‰ï¼š</span>
<span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡1</span>
<span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡2</span>
</code></pre>
<h4 data-id="heading-8">å…³é”®é€»è¾‘è¯´æ˜</h4>
<ul>
<li>
<p><code>scheduleFlush</code>ï¼šæ ¸å¿ƒé˜²é‡å¤é€»è¾‘ï¼Œç¡®ä¿å¤šæ¬¡è°ƒç”¨<code>enqueue</code>ä»…è§¦å‘ä¸€æ¬¡å¾®ä»»åŠ¡ï¼›</p>
</li>
<li>
<p><code>isFlushing</code>ï¼šé¿å…æ‰§è¡Œä»»åŠ¡æ—¶åµŒå¥—è°ƒç”¨<code>executeTasks</code>ï¼ˆå¦‚ä»»åŠ¡ä¸­å†æ¬¡<code>enqueue</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>Set</code>å­˜å‚¨ä»»åŠ¡ï¼šå¤©ç„¶è§£å†³é‡å¤æ·»åŠ é—®é¢˜ï¼Œæ¯”æ•°ç»„æ›´é«˜æ•ˆã€‚</p>
</li>
</ul>
<h3 data-id="heading-9">ä¸‰ã€Step 2ï¼šæ‰©å±•æ ¸å¿ƒèƒ½åŠ›</h3>
<p>åœ¨æœ€å°ç‰ˆåŸºç¡€ä¸Šï¼Œæ·»åŠ ã€ŒåŒæ­¥æ‰§è¡Œã€å‰åå›è°ƒã€å¤–éƒ¨ç­‰å¾…ã€èƒ½åŠ›ï¼Œé€æ­¥å®Œå–„åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-10">1. æ·»åŠ åŒæ­¥æ‰§è¡Œæ–¹æ³•<code>flushSync</code></h4>
<p>æ”¯æŒæ‰‹åŠ¨åŒæ­¥æ‰§è¡Œä»»åŠ¡ï¼ˆä¸ç­‰å¾…å¾®ä»»åŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * åŒæ­¥è§¦å‘ä»»åŠ¡æ‰§è¡Œï¼ˆç«‹å³æ‰§è¡Œï¼Œä¸ç­‰å¾…å¾®ä»»åŠ¡ï¼‰
 */</span>
<span class="hljs-title function_">flushSync</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeTasks</span>();
}
</code></pre>
<h4 data-id="heading-11">2. æ·»åŠ æ‰§è¡Œå‰/åå›è°ƒ</h4>
<p>æ”¯æŒæ³¨å†Œ/å–æ¶ˆã€Œæ‰§è¡Œå‰/åã€çš„å›è°ƒï¼Œæ»¡è¶³åˆå§‹åŒ–ã€æ¸…ç†ç­‰åœºæ™¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ–°å¢ï¼šæ‰§è¡Œå‰/åå›è°ƒé˜Ÿåˆ—</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> beforeFlushCallbacks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt;();
<span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> afterFlushCallbacks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt;();

<span class="hljs-comment">/**
 * æ³¨å†Œã€Œä»»åŠ¡æ‰§è¡Œå‰ã€çš„å›è°ƒ
 * <span class="hljs-doctag">@returns</span> å–æ¶ˆå›è°ƒçš„å‡½æ•°
 */</span>
<span class="hljs-title function_">onBeforeFlush</span>(<span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">Unsubscribe</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">beforeFlushCallbacks</span>.<span class="hljs-title function_">add</span>(callback);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">beforeFlushCallbacks</span>.<span class="hljs-title function_">delete</span>(callback);
}

<span class="hljs-comment">/**
 * æ³¨å†Œã€Œä»»åŠ¡æ‰§è¡Œåã€çš„å›è°ƒ
 */</span>
<span class="hljs-title function_">onAfterFlush</span>(<span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">Unsubscribe</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">afterFlushCallbacks</span>.<span class="hljs-title function_">add</span>(callback);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">afterFlushCallbacks</span>.<span class="hljs-title function_">delete</span>(callback);
}

<span class="hljs-comment">// æ”¹é€ executeTasksï¼šæ‰§è¡Œå‰åå›è°ƒ</span>
<span class="hljs-keyword">private</span> <span class="hljs-title function_">executeTasks</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-comment">// 1. æ‰§è¡Œå‰ç½®å›è°ƒ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">beforeFlushCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> <span class="hljs-title function_">cb</span>());

  <span class="hljs-comment">// 2. æ‰§è¡Œä»»åŠ¡</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">task</span>) =&gt;</span> {
    <span class="hljs-title function_">task</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">delete</span>(task);
  });

  <span class="hljs-comment">// 3. æ‰§è¡Œåç½®å›è°ƒ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">afterFlushCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> <span class="hljs-title function_">cb</span>());

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span> = <span class="hljs-literal">false</span>;
}
</code></pre>
<h4 data-id="heading-12">3. æ”¯æŒå¤–éƒ¨<code>await</code>ç­‰å¾…æ‰§è¡Œå®Œæˆ</h4>
<p>æ·»åŠ <code>tick</code>å±æ€§ï¼ŒåŸºäºå›ºå®šçš„<code>Promise</code>å®ç°å¤–éƒ¨ç­‰å¾…ï¼ˆæ ¸å¿ƒï¼šç”¨åˆå§‹åŒ–çš„<code>Promise</code>åšã€Œæ—¶é—´é”šç‚¹ã€ï¼Œé¿å…æ¯æ¬¡åˆ›å»ºæ–°Promiseå¯¼è‡´ç­‰å¾…å¤±æ•ˆï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ–°å¢ï¼šå›ºå®šçš„å¾®ä»»åŠ¡Promiseï¼ˆä»…åˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> microtaskPromise = <span class="hljs-title class_">Promise</span>.<span class="hljs-property">resolve</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-literal">undefined</span>);

<span class="hljs-comment">// å…¬å¼€åªè¯»å±æ€§ï¼šå¤–éƒ¨å¯await</span>
<span class="hljs-keyword">readonly</span> tick = <span class="hljs-variable language_">this</span>.<span class="hljs-property">microtaskPromise</span>;
</code></pre>
<h4 data-id="heading-13">æµ‹è¯•æ‰©å±•èƒ½åŠ›</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> scheduler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MicroScheduler</span>();

<span class="hljs-comment">// æ³¨å†Œå‰åå›è°ƒ</span>
<span class="hljs-keyword">const</span> unsubBefore = scheduler.<span class="hljs-title function_">onBeforeFlush</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡æ‰§è¡Œå‰'</span>));
scheduler.<span class="hljs-title function_">onAfterFlush</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡æ‰§è¡Œå'</span>));

<span class="hljs-comment">// æ·»åŠ ä»»åŠ¡</span>
scheduler.<span class="hljs-title function_">enqueue</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰§è¡Œä»»åŠ¡'</span>));

<span class="hljs-comment">// å¤–éƒ¨ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> scheduler.<span class="hljs-property">tick</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•'</span>);
  <span class="hljs-title function_">unsubBefore</span>(); <span class="hljs-comment">// å–æ¶ˆå‰ç½®å›è°ƒ</span>
}

<span class="hljs-title function_">test</span>();

<span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š</span>
<span class="hljs-comment">// ä»»åŠ¡æ‰§è¡Œå‰</span>
<span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span>
<span class="hljs-comment">// ä»»åŠ¡æ‰§è¡Œå</span>
<span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•</span>
</code></pre>
<h3 data-id="heading-14">å››ã€Step 3ï¼šå…¼å®¹ä¸å®¹é”™ä¼˜åŒ–ï¼ˆç”Ÿäº§çº§ï¼‰</h3>
<p>å®Œæˆæ ¸å¿ƒåŠŸèƒ½åï¼Œæ·»åŠ ã€Œç¯å¢ƒå…¼å®¹ã€å‚æ•°æ ¡éªŒã€å¼‚å¸¸æ•è·ã€ï¼Œè®©ä»£ç æ›´å¥å£®ã€‚</p>
<h4 data-id="heading-15">1. å…¼å®¹<code>queueMicrotask</code> API</h4>
<p>Node.jså’Œéƒ¨åˆ†è€æµè§ˆå™¨å¯èƒ½æœªå®ç°<code>queueMicrotask</code>ï¼Œéœ€é™çº§åˆ°<code>Promise</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å£°æ˜å…¨å±€queueMicrotaskç±»å‹ï¼ˆå…¼å®¹TSï¼‰</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">queueMicrotask</span>: (<span class="hljs-function">(<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>) | <span class="hljs-literal">undefined</span>;

<span class="hljs-comment">// æ–°å¢ï¼šå…¼å®¹åçš„å¾®ä»»åŠ¡æ‰§è¡Œå‡½æ•°</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">queueMicrotaskFn</span>: <span class="hljs-function">(<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-comment">// æ”¹é€ æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–å…¼å®¹å‡½æ•°</span>
<span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">queueMicrotaskFn</span> =
    <span class="hljs-keyword">typeof</span> queueMicrotask !== <span class="hljs-string">'undefined'</span>
      ? queueMicrotask
      : <span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">microtaskPromise</span>.<span class="hljs-title function_">then</span>(cb);
}

<span class="hljs-comment">// æ”¹é€ scheduleFlushï¼šä½¿ç”¨å…¼å®¹åçš„å‡½æ•°</span>
<span class="hljs-keyword">private</span> <span class="hljs-title function_">scheduleFlush</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushScheduled</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushScheduled</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">queueMicrotaskFn</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushScheduled</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeTasks</span>();
  });
}
</code></pre>
<h4 data-id="heading-16">2. æ·»åŠ å‚æ•°æ ¡éªŒ</h4>
<p>é¿å…ä¼ å…¥éå‡½æ•°ç±»å‹çš„ä»»åŠ¡/å›è°ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ”¹é€ enqueue</span>
<span class="hljs-title function_">enqueue</span>(<span class="hljs-attr">task</span>: <span class="hljs-title class_">TaskToQueue</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> task !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'enqueue å¿…é¡»ä¼ å…¥å‡½æ•°ç±»å‹çš„ä»»åŠ¡'</span>);
  }
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">add</span>(task);
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scheduleFlush</span>();
}

<span class="hljs-comment">// å°è£…å›è°ƒæ³¨å†Œé€»è¾‘ï¼Œæ·»åŠ æ ¡éªŒ</span>
<span class="hljs-keyword">private</span> <span class="hljs-title function_">registerCallback</span>(<span class="hljs-attr">callbacks</span>: <span class="hljs-title class_">Set</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt;, <span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">Unsubscribe</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'å›è°ƒå¿…é¡»æ˜¯å‡½æ•°ç±»å‹'</span>);
  }
  callbacks.<span class="hljs-title function_">add</span>(callback);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> callbacks.<span class="hljs-title function_">delete</span>(callback);
}

<span class="hljs-comment">// æ”¹é€ onBeforeFlush/onAfterFlushï¼Œå¤ç”¨æ ¡éªŒé€»è¾‘</span>
<span class="hljs-title function_">onBeforeFlush</span>(<span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">Unsubscribe</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">registerCallback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">beforeFlushCallbacks</span>, callback);
}

<span class="hljs-title function_">onAfterFlush</span>(<span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">Unsubscribe</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">registerCallback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">afterFlushCallbacks</span>, callback);
}
</code></pre>
<h4 data-id="heading-17">3. å¼‚å¸¸æ•è·ï¼ˆå®¹é”™ï¼‰</h4>
<p>å•ä¸ªä»»åŠ¡/å›è°ƒæ‰§è¡Œå¤±è´¥ï¼Œä¸å½±å“æ•´ä½“æµç¨‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">executeTasks</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 1. æ‰§è¡Œå‰ç½®å›è°ƒï¼ˆæ•è·å•ä¸ªå›è°ƒå¼‚å¸¸ï¼‰</span>
    <span class="hljs-keyword">const</span> beforeCallbacks = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">beforeFlushCallbacks</span>);
    beforeCallbacks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-title function_">cb</span>();
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ‰§è¡Œå‰ç½®å›è°ƒå¤±è´¥:'</span>, e);
      }
    });

    <span class="hljs-comment">// 2. æ‰§è¡Œä»»åŠ¡ï¼ˆå¤åˆ¶é˜Ÿåˆ—ï¼Œé¿å…è¿­ä»£æ—¶ä¿®æ”¹ï¼‰</span>
    <span class="hljs-keyword">const</span> tasks = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>);
    tasks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">task</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-title function_">task</span>();
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ‰§è¡Œä»»åŠ¡å¤±è´¥:'</span>, e);
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">delete</span>(task);
    });
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// æ— è®ºæ˜¯å¦å‡ºé”™ï¼Œéƒ½æ‰§è¡Œåç½®å›è°ƒ+é‡ç½®çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> afterCallbacks = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">afterFlushCallbacks</span>);
    afterCallbacks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-title function_">cb</span>();
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ‰§è¡Œåç½®å›è°ƒå¤±è´¥:'</span>, e);
      }
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span> = <span class="hljs-literal">false</span>;
  }
}
</code></pre>
<h3 data-id="heading-18">äº”ã€å®Œæ•´ç”Ÿäº§çº§ä»£ç </h3>
<p>æ•´åˆæ‰€æœ‰ä¼˜åŒ–ï¼Œæœ€ç»ˆçš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼ˆå¯ç›´æ¥å¤åˆ¶å¤ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç±»å‹å‘½åæ›´ç²¾å‡†ï¼Œè´´åˆåœºæ™¯</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">TaskToQueue</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
<span class="hljs-comment">// å–æ¶ˆå›è°ƒçš„å‡½æ•°ç±»å‹ï¼ˆè¯­ä¹‰æ›´æ¸…æ™°ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Unsubscribe</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-comment">// å£°æ˜å…¨å±€ queueMicrotask ç±»å‹ï¼ˆå…¼å®¹ Node.js å’Œæµè§ˆå™¨ç¯å¢ƒï¼‰</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">queueMicrotask</span>: (<span class="hljs-function">(<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>) | <span class="hljs-literal">undefined</span>;

<span class="hljs-comment">/**
 * å¾®ä»»åŠ¡è°ƒåº¦å™¨ç±»
 * æ ¸å¿ƒèƒ½åŠ›ï¼šæ‰¹é‡ç®¡ç†ä»»åŠ¡ï¼Œç»Ÿä¸€åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œï¼Œæ”¯æŒæ‰§è¡Œå‰åå›è°ƒ
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MicroScheduler</span> {
  <span class="hljs-comment">// ========== ç§æœ‰å±æ€§ï¼ˆå°è£…ï¼Œå¤–éƒ¨ä¸å¯è®¿é—®ï¼‰ ==========</span>
  <span class="hljs-comment">// ä»»åŠ¡é˜Ÿåˆ—ï¼šSet è‡ªåŠ¨å»é‡ï¼Œé¿å…é‡å¤æ‰§è¡Œ</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> taskQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">TaskToQueue</span>&gt;();
  <span class="hljs-comment">// æ‰§è¡Œå‰å›è°ƒé˜Ÿåˆ—</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> beforeFlushCallbacks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt;();
  <span class="hljs-comment">// æ‰§è¡Œåå›è°ƒé˜Ÿåˆ—</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> afterFlushCallbacks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt;();
  <span class="hljs-comment">// æ ‡è®°æ˜¯å¦æ­£åœ¨æ‰§è¡Œä»»åŠ¡</span>
  <span class="hljs-keyword">private</span> isFlushing = <span class="hljs-literal">false</span>;
  <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å·²å°† flush è°ƒåº¦åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</span>
  <span class="hljs-keyword">private</span> isFlushScheduled = <span class="hljs-literal">false</span>;
  <span class="hljs-comment">// å›ºå®šçš„å¾®ä»»åŠ¡ Promiseï¼Œç”¨äºå¤–éƒ¨ await ç­‰å¾…æ‰§è¡Œå®Œæˆï¼ˆä»…åˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> microtaskPromise = <span class="hljs-title class_">Promise</span>.<span class="hljs-property">resolve</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-literal">undefined</span>);
  <span class="hljs-comment">// å…¼å®¹åçš„å¾®ä»»åŠ¡æ‰§è¡Œå‡½æ•°ï¼ˆé€‚é…æ—  queueMicrotask çš„ç¯å¢ƒï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">queueMicrotaskFn</span>: <span class="hljs-function">(<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;

  <span class="hljs-comment">// ========== å…¬å¼€åªè¯»å±æ€§ï¼ˆå¤–éƒ¨å¯è®¿é—®ï¼Œä¸å¯ä¿®æ”¹ï¼‰ ==========</span>
  <span class="hljs-comment">/**
   * ç”¨äºç­‰å¾…å¾®ä»»åŠ¡æ‰§è¡Œå®Œæˆçš„ Promise
   * å¤–éƒ¨å¯é€šè¿‡ await scheduler.tick ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•
   */</span>
  <span class="hljs-keyword">readonly</span> tick = <span class="hljs-variable language_">this</span>.<span class="hljs-property">microtaskPromise</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å…¼å®¹ queueMicrotask APIï¼ˆå‰ç«¯å·¥ç¨‹åŒ–å¿…å¤‡ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queueMicrotaskFn</span> =
      <span class="hljs-keyword">typeof</span> queueMicrotask !== <span class="hljs-string">'undefined'</span>
        ? queueMicrotask
        : <span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">microtaskPromise</span>.<span class="hljs-title function_">then</span>(cb);
  }

  <span class="hljs-comment">// ========== å…¬å¼€æ–¹æ³•ï¼ˆå¤–éƒ¨å¯è°ƒç”¨ï¼‰ ==========</span>
  <span class="hljs-comment">/**
   * æ·»åŠ ä»»åŠ¡åˆ°è°ƒåº¦é˜Ÿåˆ—ï¼Œå¹¶è§¦å‘å¼‚æ­¥æ‰§è¡Œè°ƒåº¦
   * <span class="hljs-doctag">@param</span> task å¾…æ‰§è¡Œçš„å¾®ä»»åŠ¡ï¼ˆæ— å‚æ— è¿”å›å€¼å‡½æ•°ï¼‰
   */</span>
  <span class="hljs-title function_">enqueue</span>(<span class="hljs-attr">task</span>: <span class="hljs-title class_">TaskToQueue</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> task !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'enqueue å¿…é¡»ä¼ å…¥å‡½æ•°ç±»å‹çš„ä»»åŠ¡'</span>);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">add</span>(task);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scheduleFlush</span>();
  }

  <span class="hljs-comment">/**
   * å¼‚æ­¥è§¦å‘ä»»åŠ¡æ‰¹é‡æ‰§è¡Œï¼ˆæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰
   * å¤šæ¬¡è°ƒç”¨ä»…ä¼šè§¦å‘ä¸€æ¬¡å¾®ä»»åŠ¡ï¼Œé¿å…é‡å¤æ‰§è¡Œ
   */</span>
  <span class="hljs-title function_">flush</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scheduleFlush</span>();
  }

  <span class="hljs-comment">/**
   * åŒæ­¥è§¦å‘ä»»åŠ¡æ‰¹é‡æ‰§è¡Œï¼ˆç«‹å³æ‰§è¡Œï¼Œä¸ç­‰å¾…å¾®ä»»åŠ¡ï¼‰
   */</span>
  <span class="hljs-title function_">flushSync</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeTasks</span>();
  }

  <span class="hljs-comment">/**
   * æ³¨å†Œã€Œä»»åŠ¡æ‰§è¡Œå‰ã€çš„å›è°ƒ
   * <span class="hljs-doctag">@param</span> callback æ‰§è¡Œå‰çš„å›è°ƒå‡½æ•°
   * <span class="hljs-doctag">@returns</span> å–æ¶ˆå›è°ƒçš„å‡½æ•°ï¼ˆè°ƒç”¨åä¸å†è§¦å‘è¯¥å›è°ƒï¼‰
   */</span>
  <span class="hljs-title function_">onBeforeFlush</span>(<span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">Unsubscribe</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">registerCallback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">beforeFlushCallbacks</span>, callback);
  }

  <span class="hljs-comment">/**
   * æ³¨å†Œã€Œä»»åŠ¡æ‰§è¡Œåã€çš„å›è°ƒ
   * <span class="hljs-doctag">@param</span> callback æ‰§è¡Œåçš„å›è°ƒå‡½æ•°
   * <span class="hljs-doctag">@returns</span> å–æ¶ˆå›è°ƒçš„å‡½æ•°ï¼ˆè°ƒç”¨åä¸å†è§¦å‘è¯¥å›è°ƒï¼‰
   */</span>
  <span class="hljs-title function_">onAfterFlush</span>(<span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">Unsubscribe</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">registerCallback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">afterFlushCallbacks</span>, callback);
  }

  <span class="hljs-comment">// ========== ç§æœ‰æ–¹æ³•ï¼ˆå†…éƒ¨é€»è¾‘ï¼Œå¯¹å¤–éšè—ï¼‰ ==========</span>
  <span class="hljs-comment">/**
   * è°ƒåº¦ flush åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆæ ¸å¿ƒï¼šé˜²é‡å¤è°ƒåº¦ï¼‰
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">scheduleFlush</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushScheduled</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushScheduled</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">queueMicrotaskFn</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushScheduled</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeTasks</span>();
    });
  }

  <span class="hljs-comment">/**
   * æ ¸å¿ƒæ‰§è¡Œé€»è¾‘ï¼šæ‰§è¡Œå‰åå›è°ƒ + æ‰¹é‡æ‰§è¡Œä»»åŠ¡
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">executeTasks</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span>) <span class="hljs-keyword">return</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 1. æ‰§è¡Œå‰ç½®å›è°ƒï¼ˆå¤åˆ¶åéå†ï¼Œé¿å…è¿­ä»£æ—¶ä¿®æ”¹ï¼‰</span>
      <span class="hljs-keyword">const</span> beforeCallbacks = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">beforeFlushCallbacks</span>);
      beforeCallbacks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-title function_">cb</span>();
        } <span class="hljs-keyword">catch</span> (e) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è°ƒåº¦å™¨æ‰§è¡Œå‰ç½®å›è°ƒå¤±è´¥:'</span>, e);
        }
      });

      <span class="hljs-comment">// 2. æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ï¼ˆå¤åˆ¶åéå†ï¼Œé¿å…è¿­ä»£æ—¶ä¿®æ”¹é˜Ÿåˆ—ï¼‰</span>
      <span class="hljs-keyword">const</span> tasks = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>);
      tasks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">task</span>) =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-title function_">task</span>();
        } <span class="hljs-keyword">catch</span> (e) {
          <span class="hljs-comment">// æ•è·å•ä¸ªä»»åŠ¡å¼‚å¸¸ï¼Œä¸å½±å“å…¶ä»–ä»»åŠ¡æ‰§è¡Œï¼ˆå‰ç«¯å®¹é”™æœ€ä½³å®è·µï¼‰</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è°ƒåº¦å™¨æ‰§è¡Œä»»åŠ¡å¤±è´¥:'</span>, e);
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">delete</span>(task);
      });
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-comment">// æ— è®ºæ˜¯å¦å‡ºé”™ï¼Œéƒ½é‡ç½®çŠ¶æ€ + æ‰§è¡Œåç½®å›è°ƒ</span>
      <span class="hljs-keyword">const</span> afterCallbacks = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">afterFlushCallbacks</span>);
      afterCallbacks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-title function_">cb</span>();
        } <span class="hljs-keyword">catch</span> (e) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è°ƒåº¦å™¨æ‰§è¡Œåç½®å›è°ƒå¤±è´¥:'</span>, e);
        }
      });
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isFlushing</span> = <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">/**
   * æ³¨å†Œå›è°ƒå¹¶è¿”å›å–æ¶ˆå‡½æ•°ï¼ˆå¤ç”¨é€»è¾‘ï¼‰
   * <span class="hljs-doctag">@param</span> callbacks å›è°ƒé˜Ÿåˆ—
   * <span class="hljs-doctag">@param</span> callback è¦æ³¨å†Œçš„å›è°ƒå‡½æ•°
   * <span class="hljs-doctag">@returns</span> å–æ¶ˆå›è°ƒçš„å‡½æ•°
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">registerCallback</span>(<span class="hljs-attr">callbacks</span>: <span class="hljs-title class_">Set</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt;, <span class="hljs-attr">callback</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">Unsubscribe</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'å›è°ƒå¿…é¡»æ˜¯å‡½æ•°ç±»å‹'</span>);
    }
    callbacks.<span class="hljs-title function_">add</span>(callback);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> callbacks.<span class="hljs-title function_">delete</span>(callback);
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MicroScheduler</span>;
</code></pre>
<h3 data-id="heading-19">å…­ã€ä½¿ç”¨åœºæ™¯ä¸æ‰©å±•æ–¹å‘</h3>
<h4 data-id="heading-20">1. å…¸å‹ä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>
<p><strong>æ‰¹é‡DOMæ›´æ–°</strong>ï¼šå¤šæ¬¡ä¿®æ”¹DOMçš„ä»»åŠ¡åŠ å…¥è°ƒåº¦å™¨ï¼Œé¿å…é¢‘ç¹é‡æ’é‡ç»˜ï¼›</p>
</li>
<li>
<p><strong>çŠ¶æ€ç®¡ç†åº“</strong>ï¼šå¦‚Vueçš„å“åº”å¼æ›´æ–°ï¼Œæ‰¹é‡æ‰§è¡Œä¾èµ–æ”¶é›†åçš„å›è°ƒï¼›</p>
</li>
<li>
<p><strong>å¼‚æ­¥æ•°æ®å¤„ç†</strong>ï¼šæ‰¹é‡å¤„ç†æ¥å£è¿”å›çš„æ•°æ®ï¼Œç»Ÿä¸€æ‰§è¡Œåç»­é€»è¾‘ã€‚</p>
</li>
</ul>
<h4 data-id="heading-21">2. æ‰©å±•æ–¹å‘</h4>
<ul>
<li>
<p>æ·»åŠ ã€Œä»»åŠ¡ä¼˜å…ˆçº§ã€ï¼šåŒºåˆ†é«˜/ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼ŒæŒ‰ä¼˜å…ˆçº§æ‰§è¡Œï¼›</p>
</li>
<li>
<p>æ”¯æŒã€Œä»»åŠ¡è¶…æ—¶ã€ï¼šè®¾ç½®ä»»åŠ¡æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶åæŠ›å‡ºå¼‚å¸¸ï¼›</p>
</li>
<li>
<p>å¢åŠ ã€Œä»»åŠ¡ç»Ÿè®¡ã€ï¼šè®°å½•ä»»åŠ¡æ‰§è¡Œæ•°é‡ã€è€—æ—¶ï¼Œä¾¿äºæ€§èƒ½ç›‘æ§ã€‚</p>
</li>
</ul>
<h3 data-id="heading-22">ä¸ƒã€æ€»ç»“</h3>
<p>å®ç°å¾®ä»»åŠ¡è°ƒåº¦å™¨çš„æ ¸å¿ƒæ˜¯ã€Œç†è§£äº‹ä»¶å¾ªç¯+æ§åˆ¶æ‰§è¡Œæ—¶æœºã€ï¼š</p>
<ol>
<li>
<p>ç”¨<code>Set</code>ç®¡ç†ä»»åŠ¡ï¼Œè§£å†³é‡å¤æ‰§è¡Œé—®é¢˜ï¼›</p>
</li>
<li>
<p>ç”¨<code>isFlushScheduled/isFlushing</code>æ§åˆ¶è°ƒåº¦æ—¶æœºï¼Œé¿å…é‡å¤æ‰§è¡Œï¼›</p>
</li>
<li>
<p>ç”¨å›ºå®šçš„<code>Promise</code>åšæ—¶é—´é”šç‚¹ï¼Œæ”¯æŒå¤–éƒ¨å¯é ç­‰å¾…ï¼›</p>
</li>
<li>
<p>å…¼å®¹ç¯å¢ƒ+å¼‚å¸¸æ•è·ï¼Œä¿è¯ç”Ÿäº§ç¯å¢ƒå¯ç”¨ã€‚</p>
</li>
</ol>
<p>ä»ã€Œæœ€å°å¯ç”¨ç‰ˆã€åˆ°ã€Œç”Ÿäº§çº§ä¼˜åŒ–ç‰ˆã€çš„å®ç°è¿‡ç¨‹ï¼Œä¸ä»…èƒ½æŒæ¡å¾®ä»»åŠ¡çš„æ ¸å¿ƒé€»è¾‘ï¼Œè¿˜èƒ½å­¦ä¹ åˆ°å‰ç«¯å·¥ç¨‹åŒ–çš„æœ€ä½³å®è·µï¼ˆå°è£…ã€å…¼å®¹ã€å®¹é”™ï¼‰ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ ç†è§£å¼‚æ­¥è°ƒåº¦çš„æœ¬è´¨ï¼Œä¹Ÿèƒ½åœ¨å®é™…é¡¹ç›®ä¸­è½åœ°è¿™ä¸ªé€šç”¨çš„å¾®ä»»åŠ¡è°ƒåº¦å™¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mybatiså…¥é—¨åˆ°ç²¾é€š ä¸€]]></title>    <link>https://juejin.cn/post/7588084804093280294</link>    <guid>https://juejin.cn/post/7588084804093280294</guid>    <pubDate>2025-12-27T12:44:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804093280294" data-draft-id="7588084804093263910" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mybatiså…¥é—¨åˆ°ç²¾é€š ä¸€"/> <meta itemprop="keywords" content="Java,MyBatis,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2025-12-27T12:44:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ä¾ å®¢è¡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/556801719828361"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mybatiså…¥é—¨åˆ°ç²¾é€š ä¸€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/556801719828361/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ä¾ å®¢è¡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:44:30.000Z" title="Sat Dec 27 2025 12:44:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>Javaé¡¹ç›®å¼€å‘ä¸­ï¼Œåªè¦ä½¿ç”¨äº†å…³ç³»å‹æ•°æ®åº“ï¼Œå‡ ä¹éƒ½ä¼šç”¨åˆ°Mybatisæ¡†æ¶ã€‚ä»æœ¬æ–‡èµ·ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹Mybatisçš„æºç å®ç°ï¼Œä»è€Œæ·±å…¥æŒæ¡è¿™ä¸ªæ¡†æ¶ã€‚</p>
<p>æœ¬æ–‡ä»JDBCè§„èŒƒè¯´èµ·ï¼Œç›´æ¥ä½¿ç”¨java.sqlåŒ…ç¼–ç¨‹ï¼Œå±•ç¤ºäº†ä½¿ç”¨åº•å±‚APIåšå®æˆ˜å¼€å‘ä¸å¯é¿å…çš„ç—›ç‚¹ï¼›å½“å¼•å…¥Mybatisæ—¶ï¼Œåˆæ˜¯å¦‚ä½•çš„é«˜æ•ˆã€çµæ´»ã€‚è¿›è€Œä»‹ç»äº†Mybatisæ¡†æ¶çš„åŠŸèƒ½æ¶æ„å’Œé…ç½®è§£ææµç¨‹ã€‚</p>
<h2 data-id="heading-1">ä¸€ ä»€ä¹ˆæ˜¯JDBC</h2>
<p>JDBCï¼ˆJava Database Connectivityï¼‰æ˜¯Javaä¸­è®¿é—®å…³ç³»å‹æ•°æ®åº“çš„ä¸€å¥—è§„èŒƒåŒ–APIï¼Œå°†Javaåº”ç”¨ä¸­ä½¿ç”¨å®ƒï¼Œå¯ä»¥æ‰§è¡ŒSQLè¯­å¥ã€æ£€ç´¢ç»“æœå’Œæ›´æ”¹æ•°æ®ç­‰ã€‚</p>
<h3 data-id="heading-2">1.1 ç¤ºä¾‹</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;
<span class="hljs-keyword">import</span> java.sql.ResultSet;
<span class="hljs-keyword">import</span> java.sql.SQLException;

<span class="hljs-comment">/**
 * JDBC æŸ¥è¯¢ MySQL ç”¨æˆ·
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcExample</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DB_URL</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://localhost:3306/test_db?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DB_USER</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;       <span class="hljs-comment">// ä½ çš„æ•°æ®åº“ç”¨æˆ·å</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DB_PASSWORD</span> <span class="hljs-operator">=</span> <span class="hljs-string">"123456"</span>; <span class="hljs-comment">// ä½ çš„æ•°æ®åº“å¯†ç </span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException {
        <span class="hljs-comment">// 1. åŠ è½½é©±åŠ¨ï¼ˆMySQL 8.0+ å¯çœç•¥ï¼ŒDriver ç±»ä¼šè‡ªåŠ¨æ³¨å†Œï¼‰</span>
        Class.forName(<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>);

        <span class="hljs-keyword">try</span> (
            <span class="hljs-comment">// è·å–æ•°æ®åº“è¿æ¥</span>
            <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD);
            <span class="hljs-comment">// é¢„ç¼–è¯‘ SQLï¼ˆé˜²æ­¢ SQL æ³¨å…¥ï¼‰</span>
            <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">pstmt</span> <span class="hljs-operator">=</span> conn.prepareStatement(<span class="hljs-string">"SELECT id, username, age, email FROM user WHERE age &gt; ?"</span>);
        ) {
            <span class="hljs-comment">// 3. è®¾ç½® SQL å‚æ•°ï¼ˆç´¢å¼•ä» 1 å¼€å§‹ï¼‰</span>
            pstmt.setInt(<span class="hljs-number">1</span>, <span class="hljs-number">20</span>);
            <span class="hljs-comment">// 4. æ‰§è¡ŒæŸ¥è¯¢ï¼Œè·å–ç»“æœé›†</span>
            <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> pstmt.executeQuery();
            <span class="hljs-comment">// 5. éå†ç»“æœé›†</span>
            <span class="hljs-keyword">while</span> (rs.next()) {
                <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> rs.getInt(<span class="hljs-string">"id"</span>);
                <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> rs.getString(<span class="hljs-string">"username"</span>);
                <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> rs.getInt(<span class="hljs-string">"age"</span>);
                <span class="hljs-type">String</span> <span class="hljs-variable">email</span> <span class="hljs-operator">=</span> rs.getString(<span class="hljs-string">"email"</span>);
                System.out.printf(<span class="hljs-string">"ID: %d, ç”¨æˆ·å: %s, å¹´é¾„: %d, é‚®ç®±: %s%n"</span>, id, username, age, email);
            }
        } <span class="hljs-keyword">catch</span> (SQLException e) {
            System.err.println(<span class="hljs-string">"JDBC æ“ä½œå¼‚å¸¸ï¼š"</span>);
        }
    }
}
</code></pre>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­å‡ºç°äº†JDBCä¸­å‡ ä¸ªæ ¸å¿ƒç±»ï¼šDriverã€DriverManagerã€Connectionã€PreparedStatementã€ResultSet</p>





























<table><thead><tr><th><strong>æ ¸å¿ƒç±»</strong></th><th><strong>æ ¸å¿ƒä½œç”¨</strong></th></tr></thead><tbody><tr><td><code>Driver</code></td><td>æ³¨å†Œé©±åŠ¨ï¼Œå»ºç«‹é€šä¿¡æ¡¥æ¢ï¼Œé€‚é…ä¸åŒæ•°æ®åº“ï¼ˆå¦‚MySQL/Oracleï¼‰</td></tr><tr><td><code>DriverManager</code></td><td>ç®¡ç†é©±åŠ¨ï¼Œè·å–æ•°æ®åº“è¿æ¥</td></tr><tr><td><code>Connection</code></td><td>ä»£è¡¨æ•°æ®åº“ç‰©ç†è¿æ¥ï¼Œæ‰€æœ‰æ“ä½œå…¥å£ï¼Œå®ç°äº‹åŠ¡ç®¡ç†ã€åˆ›å»º<code>Statement</code></td></tr><tr><td><code>PreparedStatement</code></td><td><code>Statement</code>æ¥å£å®ç°ï¼Œé¢„ç¼–è¯‘ SQLï¼Œèƒ½é˜²æ³¨å…¥ã€æå‡æ€§èƒ½</td></tr><tr><td><code>ResultSet</code></td><td>å­˜å‚¨æŸ¥è¯¢ç»“æœï¼Œæä¾›å–å€¼èƒ½åŠ›</td></tr></tbody></table>
<h3 data-id="heading-3">1.2 ä¸è¶³ä¹‹å¤„</h3>
<p>åœ¨é¡¹ç›®å®æˆ˜ä¸­ï¼Œä½¿ç”¨ç¤ºä¾‹ä»£ç æ“ä½œæ•°æ®åº“ï¼Œå­˜åœ¨å¾ˆå¤šä¸è¶³ã€‚</p>





































<table><thead><tr><th><strong>ä¸è¶³ç‚¹</strong></th><th><strong>å…·ä½“è¡¨ç°</strong></th></tr></thead><tbody><tr><td>ä»£ç å†—ä½™ä¸”é‡å¤</td><td>â‘  æ¯æ¬¡æ“ä½œéœ€é‡å¤å†™åŠ è½½é©±åŠ¨ã€è·å–è¿æ¥ã€åˆ›å»º Statementã€å…³é—­èµ„æºç­‰æ¨¡æ¿ä»£ç ï¼›â‘¡ éå† ResultSet å°è£…ç”¨æˆ·å¯¹è±¡</td></tr><tr><td>SQL ä¸ Java ä»£ç è€¦åˆ</td><td>SQL è¯­å¥ç¡¬ç¼–ç åœ¨ Java ä»£ç ä¸­ï¼Œä¿®æ”¹ SQL éœ€é‡æ–°ç¼–è¯‘ Java ä»£ç ã€‚</td></tr><tr><td>æ‰‹åŠ¨å¤„ç†å‚æ•° / ç»“æœé›†</td><td>â‘  å‚æ•°éœ€æ‰‹åŠ¨ç»‘å®šï¼Œå‚æ•°ç´¢å¼•æ˜“å‡ºé”™ï¼›â‘¡ ç»“æœé›†éœ€æ‰‹åŠ¨å°è£…ä¸ºå¯¹è±¡ï¼Œå­—æ®µæ˜ å°„ç¹çä¸”æ˜“æ¼ã€‚</td></tr><tr><td>èµ„æºç®¡ç†æ˜“å‡ºé—®é¢˜</td><td>ç”¨ try-with-resourcesï¼Œåœ¨ finally æ‰‹åŠ¨å…³é—­Connection/ResultSet</td></tr><tr><td>äº‹åŠ¡ç®¡ç†ç¹ç</td><td>éœ€æ‰‹åŠ¨è°ƒç”¨<code>conn.setAutoCommit(false)</code>/<code>commit()</code>/<code>rollback()</code>ï¼Œå¤šè¡¨æ“ä½œæ—¶äº‹åŠ¡æ§åˆ¶ä»£ç åˆ†æ•£ã€‚</td></tr><tr><td>æ— ç¼“å­˜ / æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›</td><td>æ¯æ¬¡æŸ¥è¯¢å‡ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œæ—  SQL ç¼“å­˜ã€ç»“æœç¼“å­˜æœºåˆ¶ï¼›åˆ†é¡µã€æ‰¹é‡æ“ä½œéœ€æ‰‹å†™ SQL</td></tr><tr><td>æ•°æ®åº“é€‚é…æ€§å·®</td><td>åˆ‡æ¢æ•°æ®åº“æ—¶ï¼Œéœ€ä¿®æ”¹è¿æ¥ URLã€é©±åŠ¨ç±»ã€SQL è¯­æ³•ï¼ˆå¦‚åˆ†é¡µã€å‡½æ•°ï¼‰ï¼Œä»£ç æ”¹åŠ¨é‡å¤§ã€‚</td></tr></tbody></table>
<p>ç›´æ¥ä½¿ç”¨ JDBC ç›¸å½“äº â€œæ‰‹åŠ¨æ¬ç –â€ï¼Œéœ€å…³æ³¨æ‰€æœ‰åº•å±‚ç»†èŠ‚ï¼ˆèµ„æºã€å‚æ•°ã€SQLã€äº‹åŠ¡ï¼‰ï¼Œå¼€å‘æ•ˆç‡ä½ã€æ˜“å‡ºé”™ã€ç»´æŠ¤æˆæœ¬é«˜ã€‚</p>
<p><strong>å› æ­¤ï¼ŒMybatiså‡ºç°äº†ï¼Œå®ƒ</strong> <strong>å°è£…äº† JDBC æ‰€æœ‰å†—ä½™ä¸”æ˜“å‡ºé”™çš„ç»†èŠ‚</strong> <strong>ï¼Œæ—¢è§£å†³ä¸Šè¿°ç—›ç‚¹ï¼Œåˆé¿å…äº†å…¨è‡ªåŠ¨åŒ– ORMï¼ˆå¦‚ Hibernateï¼‰å¯¹ SQL çš„è¿‡åº¦å°è£…ï¼Œæ˜¯ Java é¡¹ç›®ä¸­æ•°æ®åº“æ“ä½œçš„æœ€ä¼˜è§£ä¹‹ä¸€ã€‚</strong></p>
<h2 data-id="heading-4">äºŒ åˆè¯†Mybatis</h2>
<p>MyBatis ä½œä¸º JDBC çš„è½»é‡çº§å°è£…æ¡†æ¶ï¼Œæœ‰ä»¥ä¸‹æ ¸å¿ƒä»·å€¼ï¼š</p>
<ol>
<li>æ¶ˆé™¤æ¨¡æ¿ä»£ç ï¼Œæå‡å¼€å‘æ•ˆç‡</li>
</ol>
<ul>
<li>MyBatis å°è£…äº†è¿æ¥è·å–ã€èµ„æºå…³é—­ã€Statement åˆ›å»ºç­‰å†—ä½™é€»è¾‘ï¼Œé€šè¿‡<code>SqlSession</code>ç»Ÿä¸€ç®¡ç†æ“ä½œå…¥å£ï¼Œæ— éœ€é‡å¤ç¼–å†™æ¨¡æ¿ä»£ç ï¼›</li>
<li>å†…ç½®ç»“æœé›†è‡ªåŠ¨æ˜ å°„ï¼šMyBatis å¯è‡ªåŠ¨å°† ResultSet å­—æ®µæ˜ å°„åˆ°å®ä½“ç±»å±æ€§ï¼Œæ— éœ€æ‰‹åŠ¨<code>getXxx()</code>å°è£…ã€‚</li>
</ul>
<ol start="2">
<li>SQL ä¸ä»£ç è§£è€¦ï¼Œä¾¿äºç»´æŠ¤</li>
</ol>
<ul>
<li>SQL é›†ä¸­å†™åœ¨ XML æ˜ å°„æ–‡ä»¶æˆ–æ³¨è§£ä¸­ï¼Œä¿®æ”¹ SQL æ— éœ€ç¼–è¯‘ Java ä»£ç ï¼›</li>
<li>æ”¯æŒåŠ¨æ€ SQLï¼ˆ<code>&lt;if&gt;</code>/<code>&lt;where&gt;</code>/<code>&lt;foreach&gt;</code>ï¼‰ï¼Œè§£å†³ JDBC ä¸­æ‹¼æ¥ SQL çš„ç—›ç‚¹</li>
</ul>
<ol start="3">
<li>å‚æ•° / ç»“æœé›†è‡ªåŠ¨å¤„ç†ï¼Œé™ä½å‡ºé”™ç‡</li>
</ol>
<ul>
<li>å‚æ•°ç»‘å®šï¼šæ”¯æŒæŒ‰åç§°ï¼ˆå¦‚<code>#{age}</code>ï¼‰ç»‘å®šï¼Œæ— éœ€å…³æ³¨å‚æ•°ç´¢å¼•ï¼Œé¿å…<code>setInt(1, 20)</code>çš„ç´¢å¼•é”™è¯¯ï¼›</li>
<li>ç»“æœæ˜ å°„ï¼šæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šå…³è”æŸ¥è¯¢çš„è‡ªåŠ¨æ˜ å°„ï¼ˆå¦‚ç”¨æˆ·å…³è”è®¢å•ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨åµŒå¥—éå† ResultSetã€‚</li>
</ul>
<ol start="4">
<li>å†…ç½®é˜² SQL æ³¨å…¥æœºåˆ¶</li>
</ol>
<ul>
<li>MyBatis é»˜è®¤ä½¿ç”¨<code>#{}</code>å‚æ•°å ä½ç¬¦ï¼ˆåº•å±‚å°è£… PreparedStatementï¼‰ï¼Œè‡ªåŠ¨è§„é¿ SQL æ³¨å…¥ï¼›</li>
</ul>
<ol start="5">
<li>è‡ªåŠ¨åŒ–èµ„æºä¸äº‹åŠ¡ç®¡ç†</li>
</ol>
<ul>
<li>é›†æˆè¿æ¥æ± ï¼ˆå¦‚ HikariCPï¼‰ï¼Œè‡ªåŠ¨ç®¡ç† Connection çš„åˆ›å»º / é‡Šæ”¾ï¼Œé¿å…è¿æ¥æ³„æ¼ï¼›</li>
<li>æ”¯æŒå£°æ˜å¼äº‹åŠ¡ï¼ˆå¦‚ Spring+MyBatis ä¸­<code>@Transactional</code>æ³¨è§£ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨<code>commit()</code>/<code>rollback()</code>ã€‚</li>
</ul>
<ol start="6">
<li>å†…ç½®æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›</li>
</ol>
<ul>
<li>æ”¯æŒä¸€çº§ç¼“å­˜ï¼ˆSqlSession çº§åˆ«ï¼‰ã€äºŒçº§ç¼“å­˜ï¼ˆMapper çº§åˆ«ï¼‰ï¼Œå‡å°‘é‡å¤æŸ¥è¯¢ï¼›</li>
<li>æä¾›åˆ†é¡µæ’ä»¶ï¼ˆå¦‚ PageHelperï¼‰ï¼Œæ— éœ€æ‰‹å†™<code>LIMIT</code>è¯­å¥ï¼Œåˆ†é¡µé€»è¾‘ç»Ÿä¸€ç®¡ç†ã€‚</li>
</ul>
<ol start="7">
<li>è‰¯å¥½çš„æ•°æ®åº“é€‚é…æ€§</li>
</ol>
<ul>
<li>é€šè¿‡é…ç½®ä¸åŒçš„æ•°æ®åº“æ–¹è¨€ï¼ˆdialectï¼‰ï¼Œå¯å¿«é€Ÿåˆ‡æ¢æ•°æ®åº“ï¼ŒSQL è¯­æ³•å·®å¼‚ç”±æ¡†æ¶é€‚é…ï¼ˆå¦‚åˆ†é¡µã€ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼‰ã€‚</li>
</ul>
<p>Mybatisçš„ä¸šåŠ¡æ¶æ„å¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4075876cf1f401bb9fb1b39550aa11d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=q2eBrxWti12o3cOJjFHrGmv3PAw%3D" alt="" loading="lazy"/></p>
<p>æ¥çœ‹ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.learn.more.entiry.User;
<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.io.Reader;
<span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;
<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;
<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;
<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcDemo</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-type">Reader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">try</span> {
      reader = Resources.getResourceAsReader(<span class="hljs-string">"mybatisâ€config.xml"</span>);
      <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(reader);
      session = sqlMapper.openSession();
      <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);
      <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> mapper.selectById(<span class="hljs-number">1L</span>);
      System.out.println(user.toString());
    } <span class="hljs-keyword">catch</span> (Exception e) {
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-keyword">if</span> (reader != <span class="hljs-literal">null</span>) {
        reader.close();
      }
      <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
        session.close();
      }
    }
  }
}
</code></pre>
<h2 data-id="heading-5">ä¸‰ Mybatiså¯åŠ¨æµç¨‹</h2>
<p>Mybatiså¯åŠ¨è¿‡ç¨‹ï¼Œå°±æ˜¯è§£æé…ç½®æ–‡ä»¶ã€åˆå§‹åŒ–åŸºç¡€ç»„ä»¶ï¼Œæœ€ç»ˆåˆ›å»ºSqlSessionçš„è¿‡ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5de8e6878bcc4741998920b7c946bf86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=5QKE4rGCRdLjoNgmj1%2BkhmdtjXk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">3.1 è§£æä¸»é…ç½®æ–‡ä»¶</h3>
<p>ä½¿ç”¨Mybatisæ—¶ï¼Œæœ‰ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼›ä¸€ä¸ªç”¨äºå£°æ˜Mybatisè¿è¡Œå‚æ•°ï¼Œä¸€ä¸ªç”¨äºå£°æ˜CRUDè¯­å¥çš„mapperæ–‡ä»¶ã€‚</p>
<p>å…ˆæ¥çœ‹Mybatisçš„ä¸»é…ç½®æ–‡ä»¶ã€‚å¦‚ä¸‹ï¼Œä»ä¸­å¯ä»¥è·å–ç¯å¢ƒä¿¡æ¯ã€Mapperæ–‡ä»¶åˆ—è¡¨ã€å…¨å±€è®¾ç½®ã€ç±»å‹åˆ«åã€ç±»å‹å¤„ç†å™¨ã€æ’ä»¶é…ç½®ç­‰ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span> ?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span>
<span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Config 3.0//EN"</span>
<span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"org/apache/ibatis/databases/blog/blog-derby.properties"</span>/&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cacheEnabled"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"Author"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"org.apache.ibatis.domain.blog.Author"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">typeHandlers</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">typeHandler</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">"String"</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">"VARCHAR"</span> <span class="hljs-attr">handler</span>=<span class="hljs-string">"org.apache.ibatis.builder.CustomStringTypeHandler"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">typeHandlers</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">objectFactory</span> /&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">"org.apache.ibatis.builder.ExamplePlugin"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"pluginProperty"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"100"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">"development"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"development"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"JDBC"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">""</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"UNPOOLED"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${driver}"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${url}"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${username}"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${password}"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"org/apache/ibatis/builder/AuthorMapper.xml"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<p>æºç ä¸­æ˜¯å¦‚ä½•å¤„ç†ä¸Šè¿°é…ç½®çš„å‘¢ï¼Ÿå¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-string">"org/apache/ibatis/builder/MapperConfig.xml"</span>;
<span class="hljs-keyword">final</span> <span class="hljs-type">Reader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> Resources.getResourceAsReader(resource);
<span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(reader);
</code></pre>
<p><strong>æ¥çœ‹SqlSessionFactoryBuilder#buildæ–¹æ³•ï¼Œå®ƒä¼šå°†XMLä¸­é…ç½®ä¿¡æ¯è½¬åŒ–ä¸ºConfigurationå¯¹è±¡ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d8e255e9a4948f3af322f22e5b4de2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=gRPmKGMcQjKLytyRwWvWO%2BlF1i8%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨XMLConfigBuilder#parseConfigurationæ–¹æ³•ï¼Œé€ä¸ªå¤„ç†XMLæ ‡ç­¾ï¼Œæœ€ç»ˆæ„å»ºConfigurationå¯¹è±¡ã€‚å¤„ç†XMLæ–‡ä»¶æ—¶ä½¿ç”¨äº†org.w3c.domã€org.xml.saxç­‰ä¾èµ–åŒ…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7664fac068a4d25b55b4180a4734009~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=nlx8AdmjM6vb1SI%2Bh%2Fg%2BTsxX5ic%3D" alt="" loading="lazy"/></p>
<p>Configurationç±»æŒæœ‰æ‰€æœ‰é…ç½®ä¿¡æ¯ï¼Œéƒ¨åˆ†å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07d3d580d371481591d9f2f3e834c1b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=2UT%2FDhiFGg713hmWwsy9nTf0vxI%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-7">3.1.1 å…¨å±€å±æ€§</h4>
<p>å¯¹äºä¸€äº›å…¨å±€å±æ€§ï¼Œæœªé…ç½®æ—¶æœ‰é»˜è®¤å€¼ã€‚åœ¨ä½¿ç”¨Mybatisæ—¶éœ€è¦å…³æ³¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4e31e2c4eb842738ef6b05af27ed52e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=pA6poTsEuZdp%2BJ6rbHz1MZXLVTI%3D" alt="" loading="lazy"/></p>
<p>æœ€åï¼Œä½¿ç”¨Configurationå¯¹è±¡åˆ›å»ºä¸€ä¸ªSqlSessionFactoryå®ä¾‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91a8cae93f0f452984a1d6e135281489~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=9v1lDA0MjqoRoOY9RIQKw5SE0Xw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-8">3.1.2 ç±»å‹åˆ«åæ³¨å†Œ</h4>
<p>TypeAliasRegistryç±»ï¼Œç”¨äºä¿å­˜ç®€åŒ–ååˆ°Javaç±»çš„æ˜ å°„ï¼›è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨Mapper.xmlä¸­é…ç½®å¦‚resultType="int"ï¼Œè€Œä¸ç”¨java.lang.Integerå…¨ç±»åã€‚</p>
<p>åˆ›å»ºTypeAliasRegistryæ—¶è‡ªè¡Œæ³¨å†Œäº†å¸¸ç”¨Javaç±»å‹çš„åˆ«åã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2438f0d1efef4285954ec9e4ee0d5f35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=tiFr3o1zkdld3DXnnGXCXePFoiE%3D" alt="" loading="lazy"/></p>
<p>åˆ›å»ºConfigurationå¯¹è±¡æ—¶ï¼Œé»˜è®¤æ³¨å†Œäº†mybatisæ¡†æ¶è‡ªèº«éœ€è¦çš„ä¸€äº›åˆ«åã€‚è¿™ä¹Ÿæ˜¯èƒ½é…ç½®å¦‚çš„åŸå› ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/191012bf717d44acb2ecdef2a4311572~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=%2BM1yVuGnVS4oc9iK5eic7aPZtB4%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">3.1.3 ç±»å‹å¤„ç†å™¨</h4>
<p>TypeHandlerç”¨äºå®šä¹‰javaTypeä¸jdbcTypeä¹‹é—´ç›¸ä¼šè½¬æ¢é€»è¾‘ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;JdbcType, TypeHandler&lt;?&gt;&gt; JDBC_TYPE_HANDLER_MAP = 
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">EnumMap</span>&lt;JdbcType, TypeHandler&lt;?&gt;&gt;(JdbcType.class);
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Type, Map&lt;JdbcType, TypeHandler&lt;?&gt;&gt;&gt; TYPE_HANDLER_MAP = 
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;Type, Map&lt;JdbcType, TypeHandler&lt;?&gt;&gt;&gt;();
</code></pre>
<p>æ¯”å¦‚è¦å°†MySQLä¸­çš„TINYINTå¤„ç†æˆJavaä¸­çš„Byteï¼Œå°†ä½¿ç”¨ByteTypeHandlerã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db2f495d9f6b4f7a9ed4a6468e3f9b85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=EUS8w6MfY5ZuffFjqZPc2rxV%2Fng%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">3.2 è§£æMapperæ–‡ä»¶</h3>
<p>åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­ï¼Œmapperæ–‡ä»¶æœ‰å¤šç§é…ç½®æ–¹å¼ã€‚</p>
<pre><code class="hljs language-java" lang="java">&lt;configuration&gt;
  &lt;mappers&gt;
    &lt;!-- æŒ‡å®šMapper XMLæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ --&gt;
    &lt;mapper resource=<span class="hljs-string">"com/example/mapper/UserMapper.xml"</span>/&gt;
    &lt;!-- æ¥å£ç±»è·¯å¾„ï¼Œè¦æ±‚æ¥å£ä¸ XML åŒè·¯å¾„åŒå --&gt;
    &lt;mapper class=<span class="hljs-string">"com.example.mapper.UserMapper"</span>/&gt;
    &lt;mapper url=<span class="hljs-string">"file:///D:/project/com/example/mapper/UserMapper.xml"</span>/&gt;
    &lt;!-- æ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰Mapperæ¥å£ï¼ˆéœ€æ»¡è¶³æ¥å£ä¸XMLåŒè·¯å¾„åŒåï¼‰ --&gt;
    &lt;<span class="hljs-keyword">package</span> name=<span class="hljs-string">"com.example.mapper"</span>/&gt;
  &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
<p>åœ¨XMLConfigBuilder#mapperElementä¸­ï¼Œåˆ†åˆ«å¤„ç†äº†ä»¥ä¸Šå‡ ç§é…ç½®æ–¹å¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/394becb5c8a44d22b24654ad13b021b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=SVXx%2F9qCn%2BK64WIvJdQP9895DW4%3D" alt="" loading="lazy"/></p>
<p>æºç ä¸­ä¼šé€šè¿‡XMLMapperBuilderï¼Œæ¥å®ŒæˆMapperæ–‡ä»¶è§£æã€‚åŒæ—¶å°†Mapper.xmlæ–‡ä»¶å¯¹åº”çš„æ¥å£ï¼Œæ³¨å†Œåˆ°Configurationã€‚</p>
<p>å·²ä¸‹é¢è¿™ä¸ªæ–‡ä»¶ä¸ºä¾‹ï¼Œæ˜¯å¯¹Userä¿¡æ¯çš„CRUDã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span> ?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span>
        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.mapper.UserMapper"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"getUserById"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"java.lang.Integer"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"com.example.pojo.User"</span>&gt;</span>
        SELECT id, username, age, create_time FROM user WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"addUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"com.example.pojo.User"</span>&gt;</span>
        INSERT INTO user (username, age, create_time)
        VALUES (#{username}, #{age}, #{createTime})
    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"com.example.pojo.User"</span>&gt;</span>
        UPDATE user 
        SET username = #{username}, 
            age = #{age}, 
            create_time = #{createTime}
        WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"deleteUserById"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"java.lang.Integer"</span>&gt;</span>
        DELETE FROM user WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code></pre>
<p>åœ¨XMLMapperBuilder#configurationElementä¸­ï¼Œè§£æäº†å„ä¸ªæ ‡ç­¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4045235d72f4865b4b08435556c177a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=Cx97TMb3Grf20z6hvC8TcFG8aPY%3D" alt="" loading="lazy"/></p>
<p>ä¸€ä¸ªMapperæ–‡ä»¶çš„è§£æç»“æœï¼Œä¼šæŒ‰ç…§ç”¨é€”è¢«ä¿å­˜åˆ°Configurationä¸­ï¼š</p>
<ul>
<li>Configuration#mapperRegistryå±æ€§ï¼Œè®°å½•ç€mapperæ¥å£ä¸å…¶ä»£ç†å·¥å‚<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa770ed0f0894d6f8ce4877caebbf801~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=QJ%2F7GQZlQluh5a7m5r1vFbpQa1M%3D" alt="" loading="lazy"/></li>
</ul>

<ul>
<li>è§£æXMLä¸­çš„CRUDè¯­å¥ï¼Œå°è£…ä¸ºMappedStatementå¯¹è±¡ï¼Œä¿å­˜åœ¨Configuration#mappedStatementså±æ€§ä¸­<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6900ce637e23408a934bd60d96c8447a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=8Y0EF%2FnjGV3qSJw4QKzcgcNcH2Y%3D" alt="" loading="lazy"/></li>
</ul>

<ul>
<li>å°†resultMapä¿å­˜åœ¨Configuration#resultMaps</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d9347d07a9d4d60a232e3976cc4547f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=R9%2FTbuRub0cxK0qzKIQd4bGZRt8%3D" alt="" loading="lazy"/></p>
<ul>
<li>å°†parameterMapä¿å­˜åœ¨Configuration#parameterMaps<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be6a50aea44646b5b51b2513d001cbcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=wk%2FT6%2F8qPOrwfmm4PKg9Z6ilMkg%3D" alt="" loading="lazy"/></li>
</ul>
<h3 data-id="heading-11">3.3 åˆ›å»ºSqlSession</h3>
<p>ç»è¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œåˆ›å»ºäº†ä¸€ä¸ªåŒ…å«äº†MyBatiséœ€è¦çš„æ‰€æœ‰é…ç½®Configrationå¯¹è±¡ï¼Œæ¥ç€ä¼šåˆ›å»ºä¸€ä¸ª</p>
<p>SqlSessionFactoryå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> SqlSessionFactory <span class="hljs-title function_">build</span><span class="hljs-params">(Configuration config)</span> {
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultSqlSessionFactory</span>(config);
}
</code></pre>
<p>SqlSessionFactoryæ¥å£æœ‰ä¸¤ä¸ªå®ç°ï¼šSqlSessionManagerã€DefaultSqlSessionFactoryã€‚ä¸¤è€…çš„å·®å¼‚åœ¨äºï¼š</p>
<p>DefaultSqlSessionFactory</p>
<ul>
<li>çº¯å·¥å‚æ¨¡å¼ï¼šä¸“æ³¨äºåˆ›å»ºSqlSessionå®ä¾‹</li>
<li>æ— çŠ¶æ€è®¾è®¡ï¼šçº¿ç¨‹å®‰å…¨ï¼Œå¯è¢«å¤šçº¿ç¨‹å…±äº«</li>
<li>ç®€å•ç›´æ¥ï¼šæ¯æ¬¡è°ƒç”¨openSession()éƒ½åˆ›å»ºæ–°çš„SqlSession</li>
</ul>
<p>SqlSessionManager</p>
<ul>
<li>å·¥å‚+ä¼šè¯åŒé‡èº«ä»½ï¼šæ—¢æ˜¯SqlSessionFactoryåˆæ˜¯SqlSession</li>
<li>ä¼šè¯ç®¡ç†ï¼šæä¾›æ‰˜ç®¡ä¼šè¯åŠŸèƒ½ï¼Œæ”¯æŒThreadLocalä¼šè¯ç»‘å®š</li>
<li>ä»£ç†æ¨¡å¼ï¼šå†…éƒ¨ä½¿ç”¨åŠ¨æ€ä»£ç†å¤„ç†SqlSessionæ“ä½œ</li>
</ul>
<p>SqlSessionManagerå†…éƒ¨å§”æ‰˜ç»™DefaultSqlSessionFactoryï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹DefaultSqlSessionFactoryçš„åŠŸèƒ½æ‰©å±•ï¼Œé€šè¿‡ä»£ç†æ¨¡å¼æä¾›äº†æ›´é«˜çº§çš„ä¼šè¯ç®¡ç†èƒ½åŠ›ï¼šä¸€ä¸ªçº¿ç¨‹ä¸­å§‹ç»ˆä½¿ç”¨åŒä¸€ä¸ªSqlSessionã€‚</p>
<p>Mybatisä¸­é»˜è®¤ä½¿ç”¨DefaultSqlSessionFactoryã€‚é€šè¿‡ä»¥ä¸‹æ­¥éª¤ï¼Œå°†åˆ›å»ºä¸€ä¸ªSqlSessionå¯¹è±¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21995e3fc2c04b6d9327af9b63c13b66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767444270&amp;x-signature=NU87kvYkUZEeH%2FgpPgXns1S6DrI%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025ï¼Œæˆ‘çš„â€œAIæ­å­â€ï¼šé‚£ä¸ªæˆ‘ä»¥ä¸ºç”¨ä¸ä¸Šçš„AIï¼Œæˆäº†æˆ‘æ¯å¤©éƒ½ç¦»ä¸å¼€çš„æ­æ¡£ï¼ï¼]]></title>    <link>https://juejin.cn/post/7588152122186580022</link>    <guid>https://juejin.cn/post/7588152122186580022</guid>    <pubDate>2025-12-27T12:59:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588152122186580022" data-draft-id="7588149079416782902" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ï¼Œæˆ‘çš„â€œAIæ­å­â€ï¼šé‚£ä¸ªæˆ‘ä»¥ä¸ºç”¨ä¸ä¸Šçš„AIï¼Œæˆäº†æˆ‘æ¯å¤©éƒ½ç¦»ä¸å¼€çš„æ­æ¡£ï¼ï¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T12:59:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="90åæ™¨ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/2717648476705773"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ï¼Œæˆ‘çš„â€œAIæ­å­â€ï¼šé‚£ä¸ªæˆ‘ä»¥ä¸ºç”¨ä¸ä¸Šçš„AIï¼Œæˆäº†æˆ‘æ¯å¤©éƒ½ç¦»ä¸å¼€çš„æ­æ¡£ï¼ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648476705773/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    90åæ™¨ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:59:44.000Z" title="Sat Dec 27 2025 12:59:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç”±äºç°åœ¨å·²ç»å…»æˆäº†å¯¹TRAEçš„é«˜åº¦ä¾èµ–ï¼Œå¯æ˜¯å‘¢ï¼Œæ¯ä¸ªæœˆçš„å¿«é€Ÿè¯·æ±‚é¢åº¦åˆæ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥ï¼Œç°åœ¨çš„è‡ªå·±æ¯å¤©æ—©ä¸Šåˆ°å…¬å¸ï¼Œæ‰“å¼€ç”µè„‘çš„ç¬¬ä¸€ä»¶äº‹ï¼Œå·²ç»å˜æˆäº†çœ‹TRAEçš„å‰©ä½™é¢åº¦ã€‚çœ‹äº†æ¯å¤©æ‰€å‰©çš„é¢åº¦åœ¨å»è§„åˆ’è¿™ä¸€å¤©çš„å·¥ä½œå®‰æ’ã€‚</p>
</blockquote>
<p>ä¸¤å¹´å‰çš„æˆ‘ï¼Œè‚¯å®šæƒ³ä¸åˆ°è‡ªå·±ä¼šæœ‰è¿™ä¹ˆä¸€å¤©ã€‚é‚£æ—¶å€™ï¼ŒAIå¯¹æˆ‘æ¥è¯´ï¼Œå°±æ˜¯æ–°é—»é‡Œé‚£äº›é«˜æ·±è«æµ‹çš„ä¸œè¥¿ï¼Œéœ€è¦æ‡‚ç®—æ³•ã€ä¼šå»ºæ¨¡ã€æ•°å­¦è¦å¥½â€”â€”æˆ‘ï¼Ÿä¸€ä¸ªåšæ‰‹æœºç«¯å¼€å‘çš„ï¼Œæ¯å¤©è·ŸUIå’Œä¸šåŠ¡é€»è¾‘è¾ƒåŠ²ï¼Œè·ŸAIèƒ½æœ‰ä»€ä¹ˆäº¤é›†ï¼Ÿ</p>
<p>ç¬¬ä¸€æ¬¡å¬è¯´ChatGPTï¼Œè¿˜æ˜¯æŠ€æœ¯ç¾¤é‡Œæœ‰äººåœ¨é—®ï¼šâ€œä½ ä»¬è¯•è¿‡è®©AIå¸®å¿™çœ‹ä»£ç å—ï¼Ÿâ€ å½“æ—¶æˆ‘å¿ƒæƒ³ï¼Œè¿™ç©æ„å„¿èƒ½çœ‹æ‡‚ä»£ç ï¼Ÿæ‰¯å‘¢å§ã€‚</p>
<p>çœŸæ­£è®©æˆ‘æ”¾ä¸‹æˆè§çš„ï¼Œæ˜¯ä¸€ä¸ªå‘¨æœ«ã€‚æˆ‘åœ¨è°ƒè¯•ä¸€ä¸ªJSONè§£æçš„bugï¼Œå¡äº†ä¸¤ä¸ªå°æ—¶ï¼Œç¿»éäº†æ–‡æ¡£ä¹Ÿæ²¡æ‰¾å‡ºé—®é¢˜ã€‚å¿ƒçƒ¦æ„ä¹±ä¹‹ä¸‹ï¼ŒæŠŠé‚£ä¸²é”™è¯¯æ—¥å¿—ä¸¢ç»™äº†åˆšæ³¨å†Œçš„ChatGPTã€‚</p>
<p><strong>å®ƒå‡ ä¹ç«‹åˆ»å›æˆ‘ï¼šâ€œç¬¬ä¸ƒè¡Œå°‘äº†ä¸ªè½¬ä¹‰ç¬¦ã€‚â€</strong></p>
<p>æˆ‘æ„£äº†ä¸€ä¸‹ï¼Œå›å»æ£€æŸ¥ï¼Œæœç„¶ã€‚å°±é‚£ä¹ˆç®€å•ï¼Œç®€å•åˆ°æˆ‘ç›¯ç€çœ‹äº†æ— æ•°ééƒ½æ²¡å‘ç°ã€‚é‚£ä¸€åˆ»çš„éœ‡æƒŠï¼Œä¸æ˜¯å› ä¸ºå®ƒæœ‰å¤šâ€œæ™ºèƒ½â€ï¼Œè€Œæ˜¯å› ä¸ºå®ƒè§£å†³é—®é¢˜çš„<strong>æ–¹å¼</strong>â€”â€”å°±åƒæœ‰ä¸ªæ‡‚è¡Œçš„åŒäº‹åä½ æ—è¾¹ï¼Œä½ ä¸€é—®ï¼Œä»–éšå£å°±ç­”å‡ºæ¥äº†ã€‚</p>
<p>åæ¥ï¼Œæˆ‘å¼€å§‹è¯•ç€ç”¨å®ƒæŸ¥æ–‡æ¡£ã€‚ä¸å†æ˜¯ä¸€é¡µé¡µç¿»MDNæˆ–è€…Stack Overflowï¼Œè€Œæ˜¯ç›´æ¥é—®ï¼šâ€œSwifté‡Œæ€ä¹ˆä¼˜é›…åœ°å¤„ç†å¯é€‰ç±»å‹åµŒå¥—ï¼Ÿâ€ å®ƒä¼šç»™ä¾‹å­ï¼Œä¼šç»™ä¸åŒåœºæ™¯çš„æ–¹æ¡ˆï¼Œç”šè‡³å‘Šè¯‰æˆ‘å“ªä¸ªæ€§èƒ½æ›´å¥½ã€‚</p>
<p>ä½†è¦è¯´çœŸæ­£è®©æˆ‘å¯¹AIç¼–ç¨‹â€œä¸Šå¤´â€çš„ï¼Œè¿˜å¾—æ˜¯2023å¹´å¤å¤©é‚£ä¸ªé¡¹ç›®ã€‚</p>
<p>äº§å“ç»ç†æ‹¿ç€ç«å“æˆªå›¾æ¥æ‰¾æˆ‘ä»¬ï¼šâ€œè¿™ä¸ªæ•ˆæœï¼Œèƒ½åšå—ï¼Ÿä¸¤å‘¨åè¦ã€‚â€</p>
<p>é‚£æ˜¯ä¸ªç›¸å½“å¤æ‚çš„äº¤äº’åŠ¨ç”»â€”â€”å¡ç‰‡3Dç¿»è½¬ã€ç²’å­æ•ˆæœã€ç‰©ç†å›å¼¹ã€‚æŒ‰ä¼ ç»Ÿåšæ³•ï¼Œå…ˆç ”ç©¶å®ç°æ–¹æ¡ˆï¼Œå†å†™demoæµ‹è¯•ï¼Œè°ƒå‚æ•°ï¼Œæ²¡ä¸ªå››äº”å¤©å‡ºä¸æ¥ï¼Œè¿˜ä¸ä¸€å®šè¾¾åˆ°æ•ˆæœã€‚</p>
<p>çœ¼çœ‹æ—¶é—´ä¸å¤Ÿï¼Œæˆ‘ç¡¬ç€å¤´çš®è¯´ï¼šâ€œæˆ‘è¯•è¯•ç”¨ChatGPTå¸®å¿™ã€‚â€</p>
<p>ç°åœ¨æƒ³æƒ³ï¼Œå½“æ—¶çš„åšæ³•çœŸæ˜¯å¤Ÿç¬¨çš„ã€‚æˆ‘æ‰¾ä¸åˆ°ä¸“ä¸šè¯æ±‡æè¿°é‚£ä¸ªåŠ¨ç”»ï¼Œç´¢æ€§æˆªäº†å‡ å¼ å›¾ï¼Œé…ä¸Šæˆ‘èƒ½æƒ³åˆ°çš„æ‰€æœ‰æè¿°è¯ï¼šâ€œå¡ç‰‡ç¿»è½¬çš„æ—¶å€™ä¸æ˜¯å¹²å·´å·´çš„ï¼Œæ˜¯å…ˆç¼©å°ä¸€ç‚¹å†æ”¾å¤§ï¼Œè¾¹ç¼˜æœ‰å…‰æ™•æ•£å¼€â€¦â€¦â€</p>
<p>å‘å‡ºå»çš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±éƒ½è§‰å¾—æœ‰ç‚¹å¥½ç¬‘ï¼Œè¿™èƒ½è¡Œï¼Ÿ</p>
<p><strong>ä½†å‡ åˆ†é’Ÿåï¼Œå®ƒçœŸçš„ç»™äº†ä¸€æ®µä»£ç </strong>ã€‚ä¸æ˜¯å®Œç¾çš„â€”â€”æœ‰äº›APIç”¨é”™äº†ï¼Œæœ‰äº›å‚æ•°è®¾ç½®ä¸å¤ªåˆç†â€”â€”ä½†æ¡†æ¶å‡ºæ¥äº†ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒç†è§£äº†â€œå…ˆç¼©å°å†æ”¾å¤§â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Œç”¨å…³é”®å¸§åŠ¨ç”»å®ç°äº†é‚£ç§æœ‰å¼¹æ€§çš„æ„Ÿè§‰ã€‚</p>
<p>æˆ‘å¼€å§‹è·Ÿå®ƒå¯¹è¯ï¼šâ€œè¿™é‡Œæ€§èƒ½ä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Ÿâ€
â€œæ˜¯çš„ï¼Œå¦‚æœç²’å­å¤ªå¤šä¼šå¡é¡¿ï¼Œå»ºè®®æ§åˆ¶åœ¨30ä¸ªä»¥ä¸‹ã€‚â€
â€œé‚£æ€ä¹ˆåœ¨ä½ç«¯æœºä¸Šé™çº§ï¼Ÿâ€
â€œå¯ä»¥æ£€æµ‹è®¾å¤‡å‹å·ï¼Œæˆ–è€…ç”¨æ›´ç®€å•çš„é€æ˜åº¦åŠ¨ç”»æ›¿ä»£ã€‚â€</p>
<p>å°±è¿™æ ·ï¼Œä½ ä¸€å¥æˆ‘ä¸€å¥ï¼Œé‚£æ®µåŠ¨ç”»å±…ç„¶åœ¨ä¸¤å¤©çš„åå¤è°ƒè¯•åæå®šäº†ã€‚æäº¤ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä¿å­˜äº†è·ŸChatGPTçš„å¯¹è¯è®°å½•â€”â€”è¶³è¶³180å¤šæ¡ã€‚äº§å“ä¸Šçº¿åï¼Œç”¨æˆ·åé¦ˆè¯´åŠ¨ç”»å¾ˆæµç•…ï¼Œæˆ‘å¿ƒé‡Œæ¸…æ¥šï¼Œ<strong>è¿™æµç•…èƒŒåï¼Œæ˜¯ä¸€åŠæˆ‘çš„ç»éªŒï¼Œä¸€åŠAIçš„è¯•é”™</strong>ã€‚</p>
<p>åæ¥ChatGPTä¸å¥½ç”¨äº†ï¼Œæˆ‘å¤±è½äº†ä¸€é˜µå­ã€‚å°±åƒä¹ æƒ¯äº†ç”¨è®¡ç®—å™¨çš„äººï¼Œçªç„¶è¦é‡å›çº¸ç¬”ç®—æ•°ã€‚</p>
<p>ç›´åˆ°å‘ç°TRAEã€‚ç¬¬ä¸€æ¬¡ç”¨å®ƒçš„æ—¶å€™ï¼Œæœ€è®©æˆ‘æƒŠè®¶çš„ä¸æ˜¯å®ƒèƒ½å†™ä»£ç ï¼Œè€Œæ˜¯å®ƒå†™å®Œä¼šé—®ä¸€å¥ï¼šâ€œéœ€è¦æˆ‘ç›´æ¥å¸®ä½ æŠŠè¿™æ®µä»£ç å†™åˆ°æ–‡ä»¶é‡Œå—ï¼Ÿâ€</p>
<p>æˆ‘ç‚¹äº†ç¡®è®¤ï¼Œç„¶åçœ‹ç€å®ƒçœŸçš„ä¿®æ”¹äº†æˆ‘çš„é¡¹ç›®æ–‡ä»¶ã€‚é‚£ä¸€åˆ»çš„æ„Ÿè§‰å¾ˆå¥‡å¦™â€”â€”<strong>æˆ‘ä¸åªæ˜¯åœ¨è·Ÿä¸€ä¸ªå·¥å…·å¯¹è¯ï¼Œè€Œæ˜¯åœ¨è·Ÿä¸€ä¸ªèƒ½â€œåŠ¨æ‰‹â€çš„æ­æ¡£åä½œ</strong>ã€‚</p>
<p>å®ƒå¼€å§‹ç†è§£æˆ‘çš„ä¸Šä¸‹æ–‡ã€‚æˆ‘æ‰”ç»™å®ƒä¸€ä¸ªå‡ ç™¾è¡Œçš„ViewControlleræ–‡ä»¶ï¼Œè¯´â€œè¿™é‡ŒåŠ ä¸ªä¸‹æ‹‰åˆ·æ–°â€ï¼Œå®ƒä¸ä¼šæœºæ¢°åœ°æ’å…¥æ ‡å‡†ä»£ç ï¼Œè€Œæ˜¯å…ˆåˆ†ææˆ‘çš„æ–‡ä»¶ç»“æ„ï¼š</p>
<p>â€œä½ è¿™é‡Œå·²ç»ç”¨äº†TableViewçš„ä»£ç†æ¨¡å¼ï¼Œæˆ‘å»ºè®®åœ¨è¿™ä¸ªæ–¹æ³•é‡Œæ‰©å±•å®ç°åˆ·æ–°é€»è¾‘ï¼Œè¿™æ ·æ›´ç¬¦åˆä½ ç°åœ¨çš„æ¶æ„ã€‚â€</p>
<p>æˆ‘ç»å¸¸ä¸€è¾¹çœ‹å®ƒå†™ä»£ç ï¼Œä¸€è¾¹å–å’–å•¡ã€‚æœ‰æ—¶å€™å®ƒä¼šçŠ¯ä¸€äº›æ˜æ˜¾çš„é”™è¯¯â€”â€”æ¯”å¦‚ç”¨äº†å·²ç»è¢«æ ‡è®°å¼ƒç”¨çš„æ–¹æ³•â€”â€”ä½†å½“æˆ‘æŒ‡å‡ºæ¥ï¼Œå®ƒä¼šç«‹åˆ»æ”¹æ­£ï¼Œå¹¶ä¸”è§£é‡Šä¸ºä»€ä¹ˆæ–°æ–¹æ³•æ›´å¥½ã€‚<strong>è¿™ç§äº’åŠ¨ä¸åƒæ˜¯åœ¨ç”¨å·¥å…·ï¼Œæ›´åƒæ˜¯åœ¨å¸¦ä¸€ä¸ªèªæ˜çš„å®ä¹ ç”Ÿ</strong>ã€‚</p>
<p>åæ¥TRAEå‡ºäº†SOLOæ¨¡å¼ï¼Œæˆ‘æŠŠæ•´ä¸ªå°åŠŸèƒ½æ¨¡å—äº¤ç»™å®ƒè¯•äº†è¯•ã€‚</p>
<p>é‚£æ¬¡æ˜¯è¦åšä¸ªå›¾ç‰‡æ»¤é•œåŠŸèƒ½ã€‚æˆ‘ç»™äº†éœ€æ±‚ï¼šâ€œè¦èƒ½è°ƒäº®åº¦ã€å¯¹æ¯”åº¦ã€é¥±å’Œåº¦ï¼Œè¦æœ‰å®æ—¶é¢„è§ˆï¼Œä¿å­˜çš„æ—¶å€™ä¸èƒ½å¡ä½ä¸»çº¿ç¨‹ã€‚â€</p>
<p>ç„¶åæˆ‘çœ‹ç€å®ƒä¸€æ­¥æ­¥æ¥ï¼š</p>
<p>â€œæ ¹æ®ä½ çš„éœ€æ±‚ï¼Œæˆ‘å»ºè®®åˆ†æˆä¸‰ä¸ªç±»ï¼šä¸€ä¸ªè´Ÿè´£å¤„ç†çš„ï¼Œä¸€ä¸ªå­˜å‚æ•°çš„ï¼Œä¸€ä¸ªåšé¢„è§ˆç•Œé¢çš„ã€‚ä½ è§‰å¾—è¡Œå—ï¼Ÿâ€</p>
<p>â€œè¡Œã€‚â€</p>
<p>â€œé‚£ä½ æ˜¯æƒ³ç”¨Core Imageè¿˜æ˜¯è‡ªå·±å†™ç€è‰²å™¨ï¼ŸCore Imageç¨³ä¸€ç‚¹ï¼Œç€è‰²å™¨çµæ´»ä¸€ç‚¹ã€‚â€</p>
<p>â€œCore Imageå§ã€‚â€</p>
<p>å°±è¿™æ ·ï¼Œå®ƒå†™ä¸€æ®µï¼Œé—®æˆ‘ä¸€ä¸‹ï¼Œå†ç»§ç»­ã€‚å››åå¤šåˆ†é’Ÿåï¼Œä¸€ä¸ªå®Œæ•´çš„æ¨¡å—å‡ºæ¥äº†ï¼Œè¿å•å…ƒæµ‹è¯•éƒ½å†™å¥½äº†ã€‚ä»£ç é£æ ¼ç»Ÿä¸€ï¼Œæ³¨é‡Šæ¸…æ™°ï¼Œç”šè‡³è€ƒè™‘äº†å†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–â€”â€”<strong>æ¯”æˆ‘å¹³æ—¶èµ¶æ—¶é—´å†™çš„è¦è§„æ•´å¾—å¤š</strong>ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘å·²ç»ä¸å¤ªèƒ½æƒ³è±¡æ²¡æœ‰AIå·¥å…·è¦æ€ä¹ˆå·¥ä½œäº†ã€‚æ¯å¤©æ—©ä¸Šè§„åˆ’ä»»åŠ¡çš„æ—¶å€™ï¼Œæˆ‘ä¼šä¸‹æ„è¯†åœ°åˆ†ç±»ï¼šè¿™ä¸ªå¯ä»¥äº¤ç»™TRAEåšåˆç‰ˆï¼Œé‚£ä¸ªéœ€è¦æˆ‘è‡ªå·±å…ˆæƒ³æ¸…æ¥šå†è®©å®ƒå¸®å¿™ã€‚</p>
<p>å½“ç„¶ï¼Œä¾èµ–ä¹Ÿä¼šæœ‰ç„¦è™‘ã€‚æœ‰æ—¶å€™TRAEååº”æ…¢äº†ï¼Œæˆ–è€…é¢åº¦å¿«ç”¨å®Œäº†ï¼Œæˆ‘ä¼šçªç„¶æœ‰ç‚¹æ…Œâ€”â€”å°±åƒç½‘é€Ÿçªç„¶å˜æ…¢æ—¶çš„é‚£ç§çƒ¦èºã€‚ä½†æ›´å¤šæ—¶å€™ï¼Œå®ƒæ˜¯æŠŠæˆ‘ä»é‡å¤åŠ³åŠ¨é‡Œè§£æ”¾å‡ºæ¥äº†ã€‚æˆ‘ä¸å†éœ€è¦èŠ±åŠå¤©æ—¶é—´å†™é‚£äº›åƒç¯‡ä¸€å¾‹çš„ç½‘ç»œè¯·æ±‚å±‚ï¼Œæˆ–è€…ä¸€ééåœ°è°ƒè¯•åŠ¨ç”»å‚æ•°ã€‚<strong>æˆ‘æ›´åƒæ˜¯ä¸ªå¯¼æ¼”ï¼Œå‘Šè¯‰å®ƒæˆ‘è¦ä»€ä¹ˆæ•ˆæœï¼Œå®ƒå»å°è¯•ï¼Œæˆ‘æ¥é€‰æ‹©</strong>ã€‚</p>
<p>ä¸Šä¸ªæœˆå¸¦å®ä¹ ç”Ÿï¼Œä»–çœ‹æˆ‘å·¥ä½œæ–¹å¼ï¼Œé—®ï¼šâ€œè¿™æ ·ä¼šä¸ä¼šè®©è‡ªå·±å˜æ‡’å•Šï¼Ÿä»€ä¹ˆéƒ½è®©AIåšã€‚â€</p>
<p>æˆ‘æƒ³äº†æƒ³ï¼Œè¯´ï¼šâ€œä»¥å‰æ²¡æœ‰è®¡ç®—å™¨çš„æ—¶å€™ï¼Œäººä»¬ä¹Ÿç®—æ•°ã€‚æœ‰äº†è®¡ç®—å™¨ï¼Œæˆ‘ä»¬ä¸æ˜¯å˜æ‡’äº†ï¼Œè€Œæ˜¯å¯ä»¥å»æƒ³æ›´å¤æ‚çš„æ•°å­¦é—®é¢˜äº†ã€‚â€</p>
<p>å¯¹æˆ‘æ¥è¯´ï¼ŒAIå·¥å…·å°±æ˜¯é‚£ä¸ªâ€œè®¡ç®—å™¨â€ã€‚å®ƒæ²¡å–ä»£æˆ‘çš„æ€è€ƒï¼Œä½†å®ƒè®©æˆ‘<strong>ä¸ç”¨åœ¨ç®€å•çš„é”™è¯¯ä¸Šæµªè´¹æ—¶é—´</strong>ï¼Œä¸ç”¨åœ¨é‡å¤çš„ä»£ç ä¸Šæ¶ˆç£¨è€å¿ƒã€‚æˆ‘èƒ½æŠŠæ›´å¤šç²¾åŠ›æ”¾åœ¨äº§å“é€»è¾‘ä¸Šï¼Œæ”¾åœ¨ç”¨æˆ·ä½“éªŒä¸Šï¼Œæ”¾åœ¨é‚£äº›çœŸæ­£éœ€è¦â€œäººâ€å»åˆ¤æ–­çš„äº‹æƒ…ä¸Šã€‚</p>
<h5 data-id="heading-0">å…¶å®åœ¨è‡ªå·±ä½¿ç”¨AIå·¥å…·æé«˜è‡ªå·±å·¥ä½œæ•ˆç‡çš„è¿™ä¸€å¹´é‡Œï¼Œæ—¶å¸¸ä¹Ÿä¼šå’Œå‘¨å›´çš„å°ä¼™ä¼´è°ˆè®ºèµ·AIç›¸å…³çš„ä¸€äº›è¯é¢˜ï¼Œè‡ªå·±ä¹Ÿåœ¨è¿™é‡Œå¤§è‡´æ€»ç»“äº†äº¦å–œçˆ±è‡ªå·±çš„å¿ƒå¾—ï¼š</h5>
<p>æˆ‘è§‰ç€è‡³å°‘ç°åœ¨çš„AIæ²¡æœ‰è®©æˆ‘å˜æˆä¸éœ€è¦å†™ä»£ç çš„â€œäº§å“ç»ç†â€ï¼Œä½†å®ƒè®©æˆ‘æˆäº†ä¸€ä¸ª<strong>æ›´é«˜æ•ˆã€æ›´å°‘çŠ¯ä½çº§é”™è¯¯ã€æ›´èƒ½èšç„¦æ ¸å¿ƒé—®é¢˜çš„å¼€å‘è€…</strong>ã€‚æ¯å¤©è·Ÿå®ƒå¯¹è¯ï¼Œçœ‹ç€å®ƒå¸®æˆ‘ä»æƒ³æ³•å˜æˆä»£ç ï¼Œè¿™ç§æ„Ÿè§‰ï¼Œå°±åƒæœ‰äº†ä¸ªæ°¸è¿œåœ¨çº¿ã€ä»ä¸æŠ±æ€¨ã€è¿˜ä¼šè¶Šæ¥è¶Šèªæ˜çš„æ­æ¡£ã€‚</p>
<p>æˆ–è®¸è¿™å°±æ˜¯æˆ‘çš„â€œVibe Codingâ€æ—¶åˆ»â€”â€”<strong>ä¸å†æŠŠç¼–ç å½“æˆå­¤ç‹¬çš„è‹¦ä¿®ï¼Œè€Œæ˜¯å˜æˆä¸€åœºæœ‰å›åº”çš„å¯¹è¯</strong>ã€‚ä»£ç ä¾ç„¶æ˜¯æˆ‘å†™çš„ï¼Œä½†å†™çš„è¿‡ç¨‹ï¼Œå¤šäº†ä¸ªèƒ½éšæ—¶äº¤æµçš„ä¼™ä¼´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯å­¦ä¹ AIã€‘FewShotPromptTemplate]]></title>    <link>https://juejin.cn/post/7588004601393479714</link>    <guid>https://juejin.cn/post/7588004601393479714</guid>    <pubDate>2025-12-27T11:28:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588004601393479714" data-draft-id="7588034035287654415" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯å­¦ä¹ AIã€‘FewShotPromptTemplate "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T11:28:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯å­¦ä¹ AIã€‘FewShotPromptTemplate 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:28:10.000Z" title="Sat Dec 27 2025 11:28:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">æ ¸å¿ƒå®šä¹‰</h2>
<p>FewShotPromptTemplate æ˜¯ LangChain ä¸­æ„å»º<strong>å°‘æ ·æœ¬æç¤º</strong>çš„æ¨¡æ¿ç±»ï¼Œæ ¸å¿ƒæ˜¯åœ¨æç¤ºè¯ä¸­åµŒå…¥å°‘é‡ç¤ºä¾‹ï¼Œå¼•å¯¼å¤§æ¨¡å‹éµå¾ªç¤ºä¾‹çš„æ ¼å¼ã€é€»è¾‘æˆ–é£æ ¼å®Œæˆä»»åŠ¡ï¼Œæå‡è¾“å‡ºå‡†ç¡®æ€§ä¸ä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒä½œç”¨</h2>
<p>é€šè¿‡ã€Œç¤ºä¾‹é›† + æ¨¡æ¿å­—ç¬¦ä¸² + åŠ¨æ€å˜é‡ã€ï¼Œè®©æ¨¡å‹å¿«é€ŸæŒæ¡ä»»åŠ¡è¾“å…¥è¾“å‡ºæ¨¡å¼ï¼Œè§£å†³é™Œç”Ÿä»»åŠ¡æˆ–å¤æ‚æ ¼å¼é€‚é…é—®é¢˜ï¼Œé¿å…ç¹çè§„åˆ™ç¼–å†™ï¼Œæå‡æç¤ºè¯å¤ç”¨æ€§ä¸ä»»åŠ¡é€‚é…æ€§ã€‚</p>
<h2 data-id="heading-2">æ ¸å¿ƒæ¦‚å¿µ</h2>
<ul>
<li><strong>ç¤ºä¾‹ï¼ˆExamplesï¼‰</strong> ï¼šå°‘æ ·æœ¬å­¦ä¹ çš„æ ·æœ¬æ•°æ®ï¼Œé€šå¸¸ä¸ºåˆ—è¡¨å½¢å¼ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯å«è¾“å…¥è¾“å‡ºçš„å­—å…¸ï¼ˆå¦‚ <code>[{"input": "æ–‡æœ¬1", "output": "ç»“æœ1"}, ...]</code>ï¼‰ï¼Œç”¨äºå±•ç¤ºä»»åŠ¡å…·ä½“æ¨¡å¼ã€‚</li>
<li><strong>ç¤ºä¾‹æ¨¡æ¿ï¼ˆExample Prompt Templateï¼‰</strong> ï¼šç”¨äºæ ¼å¼åŒ–å•ä¸ªç¤ºä¾‹çš„å­æ¨¡æ¿ï¼Œå®šä¹‰æ¯ä¸ªç¤ºä¾‹åœ¨æç¤ºè¯ä¸­çš„å‘ˆç°å½¢å¼ï¼ˆå¦‚è¾“å…¥è¾“å‡ºçš„æ’ç‰ˆã€æè¿°æ€§æ–‡å­—ï¼‰ã€‚</li>
<li><strong>å‰ç¼€ï¼ˆPrefixï¼‰</strong> ï¼šæç¤ºè¯çš„å‰ç½®è¯´æ˜éƒ¨åˆ†ï¼Œç”¨äºå‘ŠçŸ¥æ¨¡å‹ä»»åŠ¡ç›®æ ‡ã€ç¤ºä¾‹çš„ä½œç”¨ï¼ˆå¦‚â€œä»¥ä¸‹æ˜¯æ–‡æœ¬åˆ†ç±»ä»»åŠ¡çš„ç¤ºä¾‹ï¼Œè¯·å‚è€ƒç¤ºä¾‹å°†è¾“å…¥æ–‡æœ¬åˆ†ç±»åˆ°å¯¹åº”ç±»åˆ«â€ï¼‰ã€‚</li>
<li><strong>åç¼€ï¼ˆSuffixï¼‰</strong> ï¼šæç¤ºè¯çš„åç½®éƒ¨åˆ†ï¼Œç”¨äºæ‰¿è½½ç”¨æˆ·çš„åŠ¨æ€è¾“å…¥å˜é‡ï¼Œå¼•å¯¼æ¨¡å‹å®Œæˆå½“å‰ä»»åŠ¡ï¼ˆå¦‚â€œè¯·å¯¹ä»¥ä¸‹æ–‡æœ¬è¿›è¡Œåˆ†ç±»ï¼š{input_text}â€ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-3">åˆ›å»ºå®ä¾‹</h2>
<p>æ ¸å¿ƒåŸåˆ™ï¼šå…ˆå®šä¹‰ç¤ºä¾‹é›†å’Œç¤ºä¾‹æ¨¡æ¿ï¼Œå†é€šè¿‡ <code>FewShotPromptTemplate</code>ç»„åˆç¤ºä¾‹ã€å‰ç¼€ã€åç¼€ç­‰ï¼Œç”Ÿæˆå®Œæ•´å°‘æ ·æœ¬æç¤ºæ¨¡æ¿ã€‚</p>
<h3 data-id="heading-4">åŸºç¡€åˆ›å»ºï¼ˆå®Œæ•´æµç¨‹ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> FewShotPromptTemplate, PromptTemplate

<span class="hljs-comment"># å®šä¹‰ç¤ºä¾‹é›†ï¼ˆå°‘æ ·æœ¬æ•°æ®ï¼‰</span>
examples = [
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"æˆ‘å–œæ¬¢é˜³å…‰æ˜åªšçš„å¤©æ°”"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ç§¯ææƒ…ç»ª"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"ä»Šå¤©çš„å·¥ä½œå¤ªå¤šï¼Œå‹åŠ›å¥½å¤§"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"æ¶ˆææƒ…ç»ª"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"æ”¶åˆ°äº†æœ‹å‹é€çš„ç¤¼ç‰©ï¼Œå¾ˆå¼€å¿ƒ"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ç§¯ææƒ…ç»ª"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"é”™è¿‡æœ«ç­è½¦ï¼Œåªèƒ½æ‰“è½¦å›å®¶äº†"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ä¸­æ€§æƒ…ç»ª"</span>}
]

<span class="hljs-comment"># å®šä¹‰ç¤ºä¾‹æ¨¡æ¿ï¼ˆæ ¼å¼åŒ–å•ä¸ªç¤ºä¾‹ï¼‰</span>
example_prompt = PromptTemplate(
    input_variables=[<span class="hljs-string">"input"</span>, <span class="hljs-string">"output"</span>],
    template=<span class="hljs-string">"è¾“å…¥ï¼š{input}\nè¾“å‡ºï¼š{output}\n"</span>
)

<span class="hljs-comment"># å®šä¹‰ FewShotPromptTemplate</span>
few_shot_prompt = FewShotPromptTemplate(
    <span class="hljs-comment"># ä¼ å…¥ç¤ºä¾‹é›†</span>
    examples=examples,
    <span class="hljs-comment"># ä¼ å…¥ç¤ºä¾‹æ¨¡æ¿</span>
    example_prompt=example_prompt,
    <span class="hljs-comment"># å‰ç½®è¯´æ˜</span>
    prefix=<span class="hljs-string">"è¯·å‚è€ƒä»¥ä¸‹ç¤ºä¾‹ï¼Œåˆ¤æ–­è¾“å…¥æ–‡æœ¬çš„æƒ…ç»ªç±»åˆ«ï¼ˆç§¯ææƒ…ç»ª/æ¶ˆææƒ…ç»ª/ä¸­æ€§æƒ…ç»ªï¼‰ï¼š"</span>,
    <span class="hljs-comment"># åç½®ç”¨æˆ·è¾“å…¥éƒ¨åˆ†</span>
    suffix=<span class="hljs-string">"è¾“å…¥ï¼š{user_input}\nè¾“å‡ºï¼š"</span>,
    <span class="hljs-comment"># å¾…å¡«å……çš„åŠ¨æ€å˜é‡ï¼ˆç”¨æˆ·è¾“å…¥æ–‡æœ¬ï¼‰</span>
    input_variables=[<span class="hljs-string">"user_input"</span>]
)
</code></pre>
<h3 data-id="heading-5">å«ç¤ºä¾‹ç­›é€‰çš„åˆ›å»ºï¼ˆåŠ¨æ€æ§åˆ¶ç¤ºä¾‹æ•°é‡ï¼‰</h3>
<p>é€šè¿‡ <code>example_selector</code> å‚æ•°æŒ‡å®šç¤ºä¾‹é€‰æ‹©å™¨ï¼Œå¯åŠ¨æ€ç­›é€‰ç¤ºä¾‹ï¼ˆå¦‚æ§åˆ¶æ•°é‡ã€æŒ‰ç›¸ä¼¼åº¦ç­›é€‰ï¼‰ï¼Œé€‚é…ä¸åŒé•¿åº¦é™åˆ¶æˆ–ä»»åŠ¡éš¾åº¦åœºæ™¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> FewShotPromptTemplate, PromptTemplate
<span class="hljs-keyword">from</span> langchain_core.prompts.example_selector <span class="hljs-keyword">import</span> LengthBasedExampleSelector

<span class="hljs-comment"># å®šä¹‰ç¤ºä¾‹é›†ï¼ˆæ›´å¤šæ ·æœ¬ï¼‰</span>
examples = [
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"æˆ‘å–œæ¬¢é˜³å…‰æ˜åªšçš„å¤©æ°”"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ç§¯ææƒ…ç»ª"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"ä»Šå¤©çš„å·¥ä½œå¤ªå¤šï¼Œå‹åŠ›å¥½å¤§"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"æ¶ˆææƒ…ç»ª"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"æ”¶åˆ°äº†æœ‹å‹é€çš„ç¤¼ç‰©ï¼Œå¾ˆå¼€å¿ƒ"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ç§¯ææƒ…ç»ª"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"é”™è¿‡æœ«ç­è½¦ï¼Œåªèƒ½æ‰“è½¦å›å®¶äº†"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ä¸­æ€§æƒ…ç»ª"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"ç”µå½±æƒ…èŠ‚å¾ˆç²¾å½©ï¼Œæ¨èå¤§å®¶è§‚çœ‹"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ç§¯ææƒ…ç»ª"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"é¤å…çš„é£Ÿç‰©å¾ˆç¾å‘³ï¼ŒæœåŠ¡ä¹Ÿå¾ˆå¥½"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ç§¯ææƒ…ç»ª"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"è·¯ä¸Šå µè½¦ï¼Œè¿Ÿåˆ°äº†ååˆ†é’Ÿ"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"æ¶ˆææƒ…ç»ª"</span>}
]

<span class="hljs-comment"># å®šä¹‰ç¤ºä¾‹æ¨¡æ¿</span>
example_prompt = PromptTemplate(
    input_variables=[<span class="hljs-string">"input"</span>, <span class="hljs-string">"output"</span>],
    template=<span class="hljs-string">"è¾“å…¥ï¼š{input}\nè¾“å‡ºï¼š{output}\n"</span>
)

<span class="hljs-comment"># å®šä¹‰ç¤ºä¾‹é€‰æ‹©å™¨ï¼ˆæŒ‰é•¿åº¦ç­›é€‰ï¼Œæ§åˆ¶ç¤ºä¾‹æ€»é•¿åº¦ï¼‰</span>
example_selector = LengthBasedExampleSelector(
    examples=examples,
    example_prompt=example_prompt,
    <span class="hljs-comment"># ç¤ºä¾‹æ€»é•¿åº¦ä¸Šé™ï¼ˆå­—ç¬¦æ•°ï¼‰ï¼Œè¶…è¿‡åˆ™è‡ªåŠ¨å‡å°‘ç¤ºä¾‹</span>
    max_length=<span class="hljs-number">100</span>
)

<span class="hljs-comment"># å®šä¹‰ FewShotPromptTemplateï¼ˆä¼ å…¥ç¤ºä¾‹é€‰æ‹©å™¨ï¼Œè€Œéç›´æ¥ä¼  examplesï¼‰</span>
few_shot_prompt = FewShotPromptTemplate(
    <span class="hljs-comment"># åŠ¨æ€ç¤ºä¾‹é€‰æ‹©å™¨</span>
    example_selector=example_selector,
    example_prompt=example_prompt,
    prefix=<span class="hljs-string">"è¯·å‚è€ƒä»¥ä¸‹ç¤ºä¾‹ï¼Œåˆ¤æ–­è¾“å…¥æ–‡æœ¬çš„æƒ…ç»ªç±»åˆ«ï¼ˆç§¯ææƒ…ç»ª/æ¶ˆææƒ…ç»ª/ä¸­æ€§æƒ…ç»ªï¼‰ï¼š"</span>,
    suffix=<span class="hljs-string">"è¾“å…¥ï¼š{user_input}\nè¾“å‡ºï¼š"</span>,
    input_variables=[<span class="hljs-string">"user_input"</span>]
)
</code></pre>
<h3 data-id="heading-6">æ— ç¤ºä¾‹çš„å°‘æ ·æœ¬æ¨¡æ¿ï¼ˆZeroShot å…¼å®¹ï¼‰</h3>
<p>è‹¥éœ€å…¼å®¹é›¶æ ·æœ¬åœºæ™¯ï¼ˆæ— éœ€ç¤ºä¾‹ï¼‰ï¼Œå¯é€šè¿‡ <code>examples=[]</code> åˆ›å»ºç©ºç¤ºä¾‹æ¨¡æ¿ï¼Œåç»­å¯åŠ¨æ€æ·»åŠ ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> FewShotPromptTemplate, PromptTemplate

<span class="hljs-comment"># ç©ºç¤ºä¾‹é›†</span>
examples = []

<span class="hljs-comment"># ç¤ºä¾‹æ¨¡æ¿</span>
example_prompt = PromptTemplate(
    input_variables=[<span class="hljs-string">"input"</span>, <span class="hljs-string">"output"</span>],
    template=<span class="hljs-string">"è¾“å…¥ï¼š{input}\nè¾“å‡ºï¼š{output}\n"</span>
)

<span class="hljs-comment"># å®šä¹‰ç©ºç¤ºä¾‹å°‘æ ·æœ¬æ¨¡æ¿</span>
few_shot_prompt = FewShotPromptTemplate(
    examples=examples,
    example_prompt=example_prompt,
    prefix=<span class="hljs-string">"è¯·åˆ¤æ–­è¾“å…¥æ–‡æœ¬çš„æƒ…ç»ªç±»åˆ«ï¼ˆç§¯ææƒ…ç»ª/æ¶ˆææƒ…ç»ª/ä¸­æ€§æƒ…ç»ªï¼‰ï¼š"</span>,
    suffix=<span class="hljs-string">"è¾“å…¥ï¼š{user_input}\nè¾“å‡ºï¼š"</span>,
    input_variables=[<span class="hljs-string">"user_input"</span>]
)

<span class="hljs-comment"># åç»­å¯åŠ¨æ€æ·»åŠ ç¤ºä¾‹</span>
few_shot_prompt.examples.append({<span class="hljs-string">"input"</span>: <span class="hljs-string">"ä»Šå¤©å¿ƒæƒ…å¾ˆå¥½"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ç§¯ææƒ…ç»ª"</span>})
</code></pre>
<h2 data-id="heading-7">å®ä¾‹å±æ€§</h2>
<h3 data-id="heading-8">examples</h3>
<p>æ ¸å¿ƒå±æ€§ï¼Œå­˜å‚¨å°‘æ ·æœ¬ç¤ºä¾‹åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸ºå«è¾“å…¥è¾“å‡ºçš„å­—å…¸ï¼ˆå¦‚ <code>[{"input": "...", "output": "..."}]</code>ï¼‰ã€‚</p>
<h3 data-id="heading-9">example_prompt</h3>
<p>ç¤ºä¾‹æ¨¡æ¿å¯¹è±¡ï¼ˆ<code>PromptTemplate</code> å®ä¾‹ï¼‰ï¼Œå®šä¹‰å•ä¸ªç¤ºä¾‹çš„æ ¼å¼åŒ–è§„åˆ™ã€‚</p>
<h3 data-id="heading-10">prefix / suffix</h3>
<p>å­—ç¬¦ä¸²å±æ€§ï¼Œåˆ†åˆ«å¯¹åº”æç¤ºè¯çš„å‰ç½®è¯´æ˜å’Œåç½®ç”¨æˆ·è¾“å…¥éƒ¨åˆ†ï¼Œå…±åŒæ„æˆå®Œæ•´æç¤ºè¯çš„æ¡†æ¶ã€‚</p>
<h3 data-id="heading-11">input_variables</h3>
<p>å¾…å¡«å……åŠ¨æ€å˜é‡åˆ—è¡¨ï¼ˆå¦‚ <code>["user_input"]</code>ï¼‰ï¼Œä¸åŒ…å«ç¤ºä¾‹ä¸­çš„å˜é‡ï¼ˆç¤ºä¾‹å˜é‡ç”± <code>example_prompt</code> å•ç‹¬å®šä¹‰ï¼‰ã€‚</p>
<h3 data-id="heading-12">example_selectorï¼ˆå¯é€‰ï¼‰</h3>
<p>ç¤ºä¾‹é€‰æ‹©å™¨å¯¹è±¡ï¼ˆå¦‚ <code>LengthBasedExampleSelector</code>ï¼‰ï¼Œç”¨äºåŠ¨æ€ç­›é€‰ç¤ºä¾‹ï¼ŒæœªæŒ‡å®šæ—¶ç›´æ¥ä½¿ç”¨å…¨éƒ¨ examplesã€‚</p>
<h2 data-id="heading-13">å®ä¾‹æ–¹æ³•</h2>
<h3 data-id="heading-14">format</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">format</span>(<span class="hljs-params">**kwargs: <span class="hljs-type">Any</span></span>) -&gt; <span class="hljs-built_in">str</span>
</code></pre>
<h4 data-id="heading-15">åŠŸèƒ½</h4>
<p>å¡«å……åŠ¨æ€å˜é‡ï¼Œç»“åˆç¤ºä¾‹ã€å‰ç¼€ã€åç¼€ç”Ÿæˆå®Œæ•´çš„å°‘æ ·æœ¬æç¤ºè¯å­—ç¬¦ä¸²ã€‚</p>
<h4 data-id="heading-16">å‚æ•°</h4>
<ul>
<li><code>**kwargs</code>ï¼šé”®å€¼å¯¹å‚æ•°ï¼Œå¡«å…… <code>input_variables</code> ä¸­å®šä¹‰çš„åŠ¨æ€å˜é‡</li>
</ul>
<h4 data-id="heading-17">è¿”å›å€¼</h4>
<p>å­—ç¬¦ä¸²ç±»å‹çš„æœ€ç»ˆå°‘æ ·æœ¬æç¤ºè¯ã€‚</p>
<h4 data-id="heading-18">ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç»­åŸºç¡€åˆ›å»ºç¤ºä¾‹</span>
prompt_str = few_shot_prompt.<span class="hljs-built_in">format</span>(user_input=<span class="hljs-string">"ä»Šå¤©çš„è€ƒè¯•å¾ˆé¡ºåˆ©"</span>)
<span class="hljs-built_in">print</span>(prompt_str)
<span class="hljs-comment"># è¾“å‡ºç»“æœï¼š</span>
<span class="hljs-comment"># è¯·å‚è€ƒä»¥ä¸‹ç¤ºä¾‹ï¼Œåˆ¤æ–­è¾“å…¥æ–‡æœ¬çš„æƒ…ç»ªç±»åˆ«ï¼ˆç§¯ææƒ…ç»ª/æ¶ˆææƒ…ç»ª/ä¸­æ€§æƒ…ç»ªï¼‰ï¼š</span>
<span class="hljs-comment"># è¾“å…¥ï¼šæˆ‘å–œæ¬¢é˜³å…‰æ˜åªšçš„å¤©æ°”</span>
<span class="hljs-comment"># è¾“å‡ºï¼šç§¯ææƒ…ç»ª</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># è¾“å…¥ï¼šä»Šå¤©çš„å·¥ä½œå¤ªå¤šï¼Œå‹åŠ›å¥½å¤§</span>
<span class="hljs-comment"># è¾“å‡ºï¼šæ¶ˆææƒ…ç»ª</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># è¾“å…¥ï¼šæ”¶åˆ°äº†æœ‹å‹é€çš„ç¤¼ç‰©ï¼Œå¾ˆå¼€å¿ƒ</span>
<span class="hljs-comment"># è¾“å‡ºï¼šç§¯ææƒ…ç»ª</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># è¾“å…¥ï¼šé”™è¿‡æœ«ç­è½¦ï¼Œåªèƒ½æ‰“è½¦å›å®¶äº†</span>
<span class="hljs-comment"># è¾“å‡ºï¼šä¸­æ€§æƒ…ç»ª</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># è¾“å…¥ï¼šä»Šå¤©çš„è€ƒè¯•å¾ˆé¡ºåˆ©</span>
<span class="hljs-comment"># è¾“å‡ºï¼š</span>
</code></pre>
<h3 data-id="heading-19">format_prompt</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">format_prompt</span>(<span class="hljs-params">**kwargs: <span class="hljs-type">Any</span></span>) -&gt; PromptValue
</code></pre>
<h4 data-id="heading-20">åŠŸèƒ½</h4>
<p>å¡«å……åŠ¨æ€å˜é‡åï¼Œç”Ÿæˆ LangChain æ¨¡å‹å¯ç›´æ¥æ¥æ”¶çš„ <code>PromptValue</code> å¯¹è±¡ï¼ˆæ— éœ€æ‰‹åŠ¨è½¬æ¢å­—ç¬¦ä¸²ï¼‰ã€‚</p>
<h4 data-id="heading-21">å‚æ•°</h4>
<ul>
<li><code>**kwargs</code>ï¼šé”®å€¼å¯¹å‚æ•°ï¼Œå¡«å……åŠ¨æ€å˜é‡</li>
</ul>
<h4 data-id="heading-22">è¿”å›å€¼</h4>
<p><code>PromptValue</code> å¯¹è±¡ï¼Œå¯ç›´æ¥ä¼ å…¥ LangChain æ¨¡å‹çš„ <code>invoke()</code> ç­‰æ–¹æ³•ã€‚</p>
<h4 data-id="heading-23">ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç»­åŸºç¡€åˆ›å»ºç¤ºä¾‹</span>
prompt = few_shot_prompt.format_prompt(user_input=<span class="hljs-string">"ä»Šå¤©çš„è€ƒè¯•å¾ˆé¡ºåˆ©"</span>)
<span class="hljs-comment"># ç›´æ¥ä¼ å…¥æ¨¡å‹è°ƒç”¨</span>
<span class="hljs-comment"># model.invoke(prompt)</span>
</code></pre>
<h3 data-id="heading-24">invoke</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">invoke</span>(<span class="hljs-params">
    <span class="hljs-built_in">input</span>: <span class="hljs-built_in">dict</span>,
    config: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    **kwargs: <span class="hljs-type">Any</span>
</span>) -&gt; PromptValue
</code></pre>
<h4 data-id="heading-25">åŠŸèƒ½</h4>
<p>é€‚é… LangChain é“¾å¼è°ƒç”¨ï¼ˆ<code>Runnable</code> æ¥å£ï¼‰çš„è§„èŒƒæ–¹æ³•ï¼Œç”Ÿæˆ <code>PromptValue</code> å¯¹è±¡ï¼Œç”¨äºæµæ°´çº¿å¼æ¨¡å‹è°ƒç”¨æµç¨‹ã€‚</p>
<h4 data-id="heading-26">å‚æ•°</h4>
<ul>
<li>
<p><code>input</code>ï¼šå­—å…¸ç±»å‹ï¼Œé”®ä¸ºå˜é‡åï¼Œå€¼ä¸ºå˜é‡å€¼ï¼ˆæ ¸å¿ƒä¼ å‚æ–¹å¼ï¼‰ï¼›</p>
</li>
<li>
<p><code>config</code>ï¼šè¿è¡Œæ—¶é…ç½®ï¼ˆå¦‚è¶…æ—¶æ—¶é—´ã€æ—¥å¿—ç­‰çº§ç­‰ï¼‰ï¼›</p>
</li>
<li>
<p><code>**kwargs</code>ï¼šé¢å¤–é”®å€¼å¯¹å˜é‡ï¼ˆè¡¥å…… input ä¸­æœªåŒ…å«çš„å˜é‡ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-27">è¿”å›å€¼</h4>
<p><code>PromptValue</code> å¯¹è±¡ï¼Œå¯ç›´æ¥ç”¨äºé“¾å¼è°ƒç”¨ä¸­çš„æ¨¡å‹è¾“å…¥ã€‚</p>
<h4 data-id="heading-28">ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç»­åŸºç¡€åˆ›å»ºç¤ºä¾‹</span>
prompt = few_shot_prompt.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"user_input"</span>: <span class="hljs-string">"ä»Šå¤©çš„è€ƒè¯•å¾ˆé¡ºåˆ©"</span>})
</code></pre>
<h2 data-id="heading-29">å…³é”®æ³¨æ„äº‹é¡¹</h2>
<ul>
<li>ç¤ºä¾‹è´¨é‡ç›´æ¥å½±å“æ¨¡å‹æ•ˆæœï¼šç¤ºä¾‹éœ€å‡†ç¡®ã€å…¸å‹ï¼Œè¦†ç›–ä»»åŠ¡æ ¸å¿ƒåœºæ™¯ï¼Œé¿å…é”™è¯¯æˆ–æ¨¡ç³Šç¤ºä¾‹ï¼›</li>
<li>ç¤ºä¾‹æ•°é‡éœ€å¹³è¡¡ï¼šè¿‡å°‘å¯èƒ½æ— æ³•è®©æ¨¡å‹æŒæ¡ä»»åŠ¡æ¨¡å¼ï¼Œè¿‡å¤šå¯èƒ½å¯¼è‡´æç¤ºè¯è¿‡é•¿ï¼ˆè¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ï¼‰ï¼Œå»ºè®®3-5ä¸ªç¤ºä¾‹ä¸ºå®œï¼›</li>
<li>ç¤ºä¾‹æ¨¡æ¿éœ€ç»Ÿä¸€ï¼šæ‰€æœ‰ç¤ºä¾‹éœ€éµå¾ªç›¸åŒçš„æ ¼å¼åŒ–è§„åˆ™ï¼ˆå¦‚è¾“å…¥è¾“å‡ºçš„æ’ç‰ˆã€å­—æ®µåç§°ï¼‰ï¼Œé¿å…æ ¼å¼æ··ä¹±ï¼›</li>
<li>åŠ¨æ€å˜é‡ä¸ç¤ºä¾‹å˜é‡éœ€åŒºåˆ†ï¼š<code>input_variables</code> ä»…å®šä¹‰ç”¨æˆ·åŠ¨æ€è¾“å…¥å˜é‡ï¼Œç¤ºä¾‹å˜é‡ç”± <code>example_prompt</code> å•ç‹¬å®šä¹‰ï¼Œä¸å¯æ··æ·†ï¼›</li>
<li>å»ºè®®ç»“åˆç¤ºä¾‹é€‰æ‹©å™¨ä¼˜åŒ–ï¼šç¤ºä¾‹è¾ƒå¤šæ—¶ï¼Œä½¿ç”¨ <code>example_selector</code> åŠ¨æ€æ§åˆ¶ç¤ºä¾‹é•¿åº¦ï¼Œé¿å…è¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡é™åˆ¶ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangGraphæ™ºèƒ½ä½“å¼€å‘è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰â€”â€”æç¤ºé“¾æ¨¡å¼ã€è·¯ç”±æ¨¡å¼ã€å¹¶è¡ŒåŒ–æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7588042910198136882</link>    <guid>https://juejin.cn/post/7588042910198136882</guid>    <pubDate>2025-12-27T11:35:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198136882" data-draft-id="7588080521445097518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangGraphæ™ºèƒ½ä½“å¼€å‘è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰â€”â€”æç¤ºé“¾æ¨¡å¼ã€è·¯ç”±æ¨¡å¼ã€å¹¶è¡ŒåŒ–æ¨¡å¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Agent,LangChain"/> <meta itemprop="datePublished" content="2025-12-27T11:35:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangGraphæ™ºèƒ½ä½“å¼€å‘è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰â€”â€”æç¤ºé“¾æ¨¡å¼ã€è·¯ç”±æ¨¡å¼ã€å¹¶è¡ŒåŒ–æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:35:37.000Z" title="Sat Dec 27 2025 11:35:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šç¯‡æ–‡ç«  <a href="https://juejin.cn/post/7586901995429806089" target="_blank" title="https://juejin.cn/post/7586901995429806089">LangGraph1.0é€Ÿé€šæŒ‡å—ï¼ˆä¸‰ï¼‰â€”â€” LangGraph1.0 è‡ªåŠ¨é‚®ä»¶å¤„ç†æ™ºèƒ½ä½“å®æˆ˜</a>é˜…è¯»å®Œæˆåï¼Œå¤§å®¶å°±ç³»ç»ŸæŒæ¡äº† LangGraph 1.0 ä¸­â€œç‚¹â€ã€â€œè¾¹â€ã€â€œå›¾â€ã€â€œè®°å¿†â€ä¸â€œäººåœ¨å›è·¯â€ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„è‡ªåŠ¨é‚®ä»¶å¤„ç†æ™ºèƒ½ä½“ï¼Œå­¦ä¹ äº†ä½¿ç”¨ LangGraph å¼€å‘æ™ºèƒ½ä½“çš„åŸºæœ¬æ–¹æ³•ã€‚</p>
<p>ç„¶è€Œï¼Œè¦æƒ³é«˜æ•ˆæ„å»ºä¸€ä¸ªå¯é ã€å¯æ‰©å±•çš„æ™ºèƒ½ä½“ï¼Œä»…ä»…ç†Ÿæ‚‰è¯­æ³•å’ŒåŸºç¡€åŠŸèƒ½æ˜¯ä¸å¤Ÿçš„ã€‚ç¬”è€…åœ¨ã€Š<a href="https://juejin.cn/post/7584689488770252835" target="_blank" title="https://juejin.cn/post/7584689488770252835">LangGraph 1.0 é€Ÿé€šæŒ‡å—ï¼ˆä¸€ï¼‰â€”â€” LangGraph 1.0 æ ¸å¿ƒæ¦‚å¿µã€ç‚¹ã€è¾¹</a>ã€‹ä¸­æ›¾å°† LangGraph æ¯”ä½œâ€œæ™ºèƒ½ä½“å¼€å‘çš„ç¼–ç¨‹è¯­è¨€â€ã€‚æ—¢ç„¶æ˜¯ä¸€ç§è¯­è¨€ï¼Œè‡ªç„¶å­˜åœ¨ä¸€ç³»åˆ—ç»è¿‡å®è·µæ£€éªŒã€å¯å¤ç”¨çš„ä¼˜ç§€æ„é€ æ¨¡å¼â€”â€”è¿™æ­£æ˜¯æ™ºèƒ½ä½“å¼€å‘çš„è®¾è®¡æ¨¡å¼ã€‚</p>
<p>ä»æœ¬æ–‡å¼€å§‹ï¼Œç¬”è€…å°†å¼€å¯ LangGraph è®¾è®¡æ¨¡å¼ç³»åˆ—çš„åˆ†äº«ï¼Œç³»ç»Ÿä»‹ç»å¦‚ä½•è¿ç”¨è¿™äº›æ¨¡å¼æ¥æ„å»ºæ›´æ¸…æ™°ã€å¥å£®ä¸”æ˜“äºç»´æŠ¤çš„æ™ºèƒ½ä½“å·¥ä½œæµã€‚æœ¬ç³»åˆ—å°†æ¶µç›–å¸¸è§çš„å·¥ä½œæµæ¨¡å¼ä¸å¤šæ™ºèƒ½ä½“æ¶æ„æ¨¡å¼ï¼Œé¢„è®¡é€šè¿‡äº”ç¯‡æ–‡ç« å±•å¼€ã€‚ç›¸å…³å†…å®¹å‡åˆ—äºç¬”è€…çš„ä¸“æ <a href="https://juejin.cn/column/7526240014499495972" target="_blank" title="https://juejin.cn/column/7526240014499495972">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ï¼ŒåŒæ—¶ä¹Ÿè¦è¯´æ˜è¯¥ä¸“æ é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 34 è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡: <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€LangGraphè®¾è®¡æ¨¡å¼</h2>
<h2 data-id="heading-2">1.1 LangGraphè®¾è®¡æ¨¡å¼æ€»è§ˆ</h2>
<p>éšç€å¤§æ¨¡å‹æ™ºèƒ½ä½“èƒ½åŠ›çš„ä¸æ–­å¢å¼ºï¼Œå…¶éœ€è¦å¤„ç†çš„ä»»åŠ¡ä¹Ÿæ—¥è¶‹å¤æ‚ã€‚å¦‚åŒåŸå¸‚å»ºè®¾éœ€è¦è§„åˆ’è“å›¾ã€è½¯ä»¶å¼€å‘ç¦»ä¸å¼€æ¶æ„è®¾è®¡ä¸€æ ·ï¼Œæ„å»ºå¼ºå¤§ä¸”ç¨³å¥çš„äººå·¥æ™ºèƒ½ä½“ç³»ç»Ÿï¼ŒåŒæ ·éœ€è¦ç²¾å¿ƒè®¾è®¡çš„<strong>æ¶æ„æ¨¡å¼</strong>ä½œä¸ºæ”¯æ’‘ã€‚</p>
<p>ä»æœ¬æœŸå¼€å§‹ï¼Œç¬”è€…å°†ç³»ç»Ÿä»‹ç»åœ¨ LangGraph æ¡†æ¶ä¸‹æ„å»ºå„ç±»æ™ºèƒ½ä½“ç³»ç»Ÿçš„å…³é”®æ¶æ„æ¨¡å¼ã€‚è¿™äº›æ¨¡å¼å°†æ¶µç›–ä»åŸºç¡€çš„å·¥ä½œæµç¼–æ’ï¼Œåˆ°æ›´é«˜çº§çš„å¤šæ™ºèƒ½ä½“ååŒè®¾è®¡ï¼Œä¸ºå¤§å®¶å¼€å‘æ™ºèƒ½ä½“æä¾›ä¸€å¥—å¯å¤ç”¨ã€å¯æ‰©å±•çš„æ–¹æ³•è®ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42601670472d4b1580d462ddc8140d1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767440137&amp;x-signature=nQhuluOIlopgnAlslSEQPRweyz8%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰</p>
<h2 data-id="heading-3">1.2 LangGraphå·¥ä½œæµæ¨¡å¼</h2>
<p>ç¬”è€…é¦–å…ˆä»‹ç» LangGraph çš„<strong>å·¥ä½œæµæ¨¡å¼</strong>ï¼Œå®ƒå¸¸è¢«ç§°ä¸º<strong>å•æ™ºèƒ½ä½“æ¨¡å¼</strong>ã€‚éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œâ€œå•æ™ºèƒ½ä½“â€å¹¶éæŒ‡ä»…ä½¿ç”¨ä¸€ä¸ªå¤§æ¨¡å‹ï¼Œè€Œæ˜¯æŒ‡ç³»ç»Ÿç›®æ ‡å•ä¸€ï¼Œä¸”æ‰€æœ‰å†³ç­–ç”±ä¸€ä¸ªç»Ÿä¸€çš„æ™ºèƒ½ä½“æ ¸å¿ƒæ¥å®Œæˆã€‚ä¸€ä¸ªåŸºç¡€çš„å•æ™ºèƒ½ä½“é€šå¸¸ç”±ä»¥ä¸‹éƒ¨åˆ†æ„æˆï¼šå¤§æ¨¡å‹ï¼ˆå¦‚ DeepSeekã€Qwen3ï¼‰ä½œä¸ºâ€œå¤§è„‘â€ï¼Œå¯è°ƒç”¨å„ç§å·¥å…·ï¼Œå…·å¤‡è®°å¿†å­˜å‚¨ä¸æ£€ç´¢èƒ½åŠ›ï¼Œå¹¶é€šè¿‡ç³»ç»Ÿæç¤ºè¯æ¥å“åº”ç”¨æˆ·è¾“å…¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/487310fd2d7243578969c0e73b820f7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767440137&amp;x-signature=Y59xUBmuDxMXtrg8JG2qQUQ9dr0%3D" alt="" loading="lazy"/></p>
<p>è€Œ LangGraph çš„å·¥ä½œæµæ¨¡å¼ï¼Œæ­£æ˜¯åœ¨æ­¤åŸºç¡€ä¸Šï¼Œé€šè¿‡å¼•å…¥è§„åˆ’ä¸å¤šæ­¥è°ƒç”¨æœºåˆ¶ç­‰ï¼Œæ¥æ›´é«˜æ•ˆã€æ›´å¯é åœ°å®Œæˆå¤æ‚ç”¨æˆ·ä»»åŠ¡ã€‚å¸¸è§çš„å·¥ä½œæµæ¨¡å¼åŒ…æ‹¬<strong>æç¤ºé“¾æ¨¡å¼ã€è·¯ç”±æ¨¡å¼ã€å¹¶è¡ŒåŒ–æ¨¡å¼ã€åè°ƒå™¨-å·¥ä½œè€…æ¨¡å¼ã€è¯„ä¼°å™¨-ä¼˜åŒ–å™¨æ¨¡å¼</strong>ç­‰ã€‚æœ¬æœŸç¬”è€…å…ˆä»å‡ ä¸ªç›¸å¯¹åŸºç¡€çš„æ¨¡å¼å¼€å§‹åˆ†äº«ï¼š<strong>æç¤ºé“¾æ¨¡å¼ã€è·¯ç”±æ¨¡å¼å’Œå¹¶è¡ŒåŒ–æ¨¡å¼</strong>ã€‚</p>
<h2 data-id="heading-4">äºŒã€æç¤ºé“¾æ¨¡å¼</h2>
<h2 data-id="heading-5">2.1 æç¤ºé“¾æ¨¡å¼å®šä¹‰</h2>
<p>æç¤ºé“¾æ¨¡å¼æ˜¯æœ€åŸºç¡€çš„å·¥ä½œæµæ¨¡å¼ä¹‹ä¸€ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºä¸€ç³»åˆ—æ›´ç®€å•ã€ç›¸äº’å…³è”çš„æ­¥éª¤ã€‚åœ¨è¯¥æ¨¡å¼ä¸­ï¼Œå¤§æ¨¡å‹è¢«å¤šæ¬¡é¡ºåºè°ƒç”¨ï¼Œä¸”å‰ä¸€æ¬¡è°ƒç”¨çš„è¾“å‡ºå¸¸ä½œä¸ºåç»­è°ƒç”¨çš„è¾“å…¥ï¼Œä»è€Œå½¢æˆä¸€ä¸ªå¤šé˜¶æ®µã€ä¸²è¡Œå¤„ç†çš„å·¥ä½œæµã€‚</p>
<p>ä¸ºäº†ç¡®ä¿æµç¨‹çš„è´¨é‡å’Œæ–¹å‘ï¼Œæç¤ºé“¾æ¨¡å¼åœ¨æ­¥éª¤ä¹‹é—´é€šå¸¸ä¼šå¼•å…¥ç¨‹åºåŒ–çš„æ£€æŸ¥ç‚¹ï¼Œç§°ä¸º â€œé—¨æ§â€ï¼ˆGateï¼‰ ã€‚é—¨æ§ä½œä¸ºè´¨é‡å®¡æŸ¥èŠ‚ç‚¹ï¼Œèƒ½å¤Ÿæ ¡éªŒä¸Šä¸€æ­¥çš„è¾“å‡ºæ˜¯å¦æ»¡è¶³ç‰¹å®šæ¡ä»¶ï¼Œä»è€Œå†³å®šæµç¨‹æ˜¯ç»§ç»­å‘å‰ã€è½¬å‘ç‰¹å®šåˆ†æ”¯è¿˜æ˜¯æå‰ç»“æŸã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94a4fdf0bd7342949675ec5c1e50b366~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767440137&amp;x-signature=AxRsOOqQuuagGPX1xjO7xhfJc0s%3D" alt="" loading="lazy"/></p>
<p>æç¤ºé“¾æ¨¡å¼çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ol>
<li>åˆ†è§£å¤æ‚åº¦ï¼šå°†åºæ‚ä»»åŠ¡æ‹†åˆ†ä¸ºæ›´å°ã€æ›´æ˜“ç®¡ç†çš„å­ä»»åŠ¡ï¼Œé™ä½å•æ¬¡å¤„ç†çš„è®¤çŸ¥è´Ÿè·ã€‚</li>
<li>æå‡å‡†ç¡®æ€§ä¸å¯æ§æ€§ï¼šé€šè¿‡å¤šæ­¥éª¤çš„ç²¾ç»†åŒ–å’Œä¸­é—´æ£€æŸ¥ï¼Œèƒ½å¤Ÿè·å¾—æ¯”å•æ¬¡å¤§æ¨¡å‹è°ƒç”¨æ›´å¯é ã€æ›´ç¬¦åˆé¢„æœŸçš„è¾“å‡ºã€‚</li>
</ol>
<p>è¯¥æ¨¡å¼ç‰¹åˆ«é€‚ç”¨äºé‚£äº›èƒ½å¤Ÿè¢«æ¸…æ™°åˆ’åˆ†ä¸ºé¡ºåºå­ä»»åŠ¡çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œè¦ç”Ÿæˆä¸€ä¸ªå°ä¼—è¯­è¨€çš„è¥é”€æ–‡æ¡ˆï¼Œå¯ä»¥å°†å…¶æ‹†è§£ä¸ºï¼šç¬¬ä¸€æ­¥ç”±å¤§æ¨¡å‹ç”Ÿæˆé«˜è´¨é‡çš„è‹±æ–‡/ä¸­æ–‡åŸç¨¿ï¼Œç¬¬äºŒæ­¥å†ç”±å¤§æ¨¡å‹å°†å…¶ç¿»è¯‘ä¸ºç›®æ ‡è¯­è¨€ã€‚åœ¨ç¬¬ä¸€æ­¥ä¹‹åï¼Œè¿˜å¯ä»¥åŠ å…¥é—¨æ§æ£€æŸ¥ï¼Œç¡®ä¿åŸç¨¿çš„è°ƒæ€§ã€é•¿åº¦æˆ–å…³é”®ä¿¡æ¯ç‚¹ç¬¦åˆè¦æ±‚ï¼Œä»è€Œæ›´å¥½åœ°æ§åˆ¶æœ€ç»ˆç»“æœçš„è´¨é‡ã€‚</p>
<h2 data-id="heading-6">2.2 æç¤ºé“¾æ¨¡å¼ä»£ç ç¤ºä¾‹</h2>
<p>å•çº¯çš„æ¦‚å¿µæè¿°ä¸å¤Ÿç›´è§‚ï¼Œæ¥ä¸‹æ¥ç¬”è€…é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä»£ç å®ä¾‹æ¥ç†è§£ã€‚æœ¬ä¾‹å°†æ¨¡æ‹Ÿä¸€ä¸ªå¤šæ­¥éª¤ç”Ÿæˆä¼˜è´¨ç¬‘è¯çš„æµç¨‹ï¼šé¦–å…ˆç”Ÿæˆç®€çŸ­ç¬‘è¯ï¼Œç„¶åæ ¹æ®æ£€æŸ¥ç»“æœå†³å®šæ˜¯å¦å¢å¼ºè¶£å‘³æ€§ï¼Œæœ€åè¿›è¡Œæ¶¦è‰²è½¬æŠ˜ã€‚</p>
<ol>
<li>
<p><strong>å¼•å…¥ç›¸å…³ä¾èµ–ï¼š</strong> åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ–°å»º.envæ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„DEEPSEEK_API_KEYã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> langchain_deepseek <span class="hljs-keyword">import</span> ChatDeepSeek
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> END, START, StateGraph
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

<span class="hljs-comment">#0. é…ç½®æ¨¡å‹</span>
load_dotenv()

llm = ChatDeepSeek(
    model=<span class="hljs-string">"deepseek-chat"</span>,
)
</code></pre>
</li>
<li>
<p><strong>å®šä¹‰çŠ¶æ€ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªä¸‰é˜¶æ®µæµç¨‹ï¼Œå› æ­¤çŠ¶æ€éœ€è¦è®°å½•åˆå§‹ä¸»é¢˜ã€å„é˜¶æ®µç”Ÿæˆçš„ç¬‘è¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. å®šä¹‰å›¾çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">State</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    topic: <span class="hljs-built_in">str</span>
    joke: <span class="hljs-built_in">str</span>
    improved_joke: <span class="hljs-built_in">str</span>
    final_joke: <span class="hljs-built_in">str</span>
</code></pre>
</li>
<li>
<p><strong>å®šä¹‰èŠ‚ç‚¹å‡½æ•°ï¼š</strong> åŒ…æ‹¬ä¸‰ä¸ªå¤§æ¨¡å‹è°ƒç”¨èŠ‚ç‚¹å’Œä¸€ä¸ªé—¨æ§æ£€æŸ¥èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 2. å®šä¹‰èŠ‚ç‚¹å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_joke</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    ç¬¬ä¸€ä¸ªå¤§æ¨¡å‹è°ƒç”¨ï¼Œæ ¹æ®ä¸»é¢˜ç”Ÿæˆåˆå§‹ç¬‘è¯
    '''</span>
    topic = state[<span class="hljs-string">'topic'</span>]
    msg = llm.invoke(<span class="hljs-string">f'å†™ä¸€ä¸ªå…³äº<span class="hljs-subst">{topic}</span>çš„ç®€çŸ­ç¬‘è¯'</span>)
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'joke'</span>: msg.content
    }

<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_punchline</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    æ¨¡æ‹Ÿé—¨æ§å‡½æ•°â€”â€”ç¬‘è¯ä¸­æ˜¯å¦åŒ…å«?æˆ–!
    '''</span>
    joke = state[<span class="hljs-string">'joke'</span>]
    <span class="hljs-keyword">if</span> <span class="hljs-string">'?'</span> <span class="hljs-keyword">in</span> joke <span class="hljs-keyword">or</span> <span class="hljs-string">'ï¼Ÿ'</span> <span class="hljs-keyword">in</span> joke:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Fail"</span> <span class="hljs-comment"># æœªèƒ½é€šè¿‡é—¨æ§æ£€æŸ¥, éœ€è¦ç»§ç»­å¢å¼º</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Pass"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">improve_joke</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    ç¬¬äºŒä¸ªå¤§æ¨¡å‹è°ƒç”¨ï¼Œé€šè¿‡æ·»åŠ æ–‡å­—æ¸¸æˆæ”¹è¿›ç¬‘è¯
    '''</span>
    joke = state[<span class="hljs-string">'joke'</span>]
    msg = llm.invoke(<span class="hljs-string">f'é€šè¿‡æ·»åŠ æ–‡å­—æ¸¸æˆä½¿ç¬‘è¯æ›´æœ‰è¶£ï¼Œå½“å‰ç¬‘è¯æ˜¯: <span class="hljs-subst">{joke}</span>'</span>)
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'improved_joke'</span>: msg.content
    }

<span class="hljs-keyword">def</span> <span class="hljs-title function_">polish_joke</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    ç¬¬ä¸‰ä¸ªå¤§æ¨¡å‹è°ƒç”¨ï¼Œæœ€ç»ˆæ¶¦è‰²ç¬‘è¯ï¼Œæ·»åŠ ä»¤äººæƒŠè®¶çš„è½¬æŠ˜
    '''</span>
    improved_joke = state[<span class="hljs-string">'improved_joke'</span>]
    msg = llm.invoke(<span class="hljs-string">f'ä¸ºè¿™ä¸ªç¬‘è¯æ·»åŠ ä¸€ä¸ªä»¤äººæƒŠè®¶çš„è½¬æŠ˜: <span class="hljs-subst">{improved_joke}</span>'</span>)
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'final_joke'</span>: msg.content
    }
</code></pre>
</li>
<li>
<p><strong>å®šä¹‰è¾¹å¹¶æ„å»ºå›¾ï¼š</strong> é€šè¿‡æ¡ä»¶è¾¹æ¥å®ç°é—¨æ§é€»è¾‘ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#2. å®šä¹‰è¾¹å’Œå›¾</span>
workflow = StateGraph(State)
workflow.add_node(<span class="hljs-string">'generate_joke'</span>, generate_joke)
workflow.add_node(<span class="hljs-string">'improve_joke'</span>, improve_joke)
workflow.add_node(<span class="hljs-string">'polish_joke'</span>, polish_joke)

workflow.add_edge(START, <span class="hljs-string">'generate_joke'</span>)
workflow.add_conditional_edges(<span class="hljs-string">'generate_joke'</span>, check_punchline, {
    <span class="hljs-string">'Fail'</span>: <span class="hljs-string">'improve_joke'</span>,
    <span class="hljs-string">'Pass'</span>: END
})
workflow.add_edge(<span class="hljs-string">'improve_joke'</span>, <span class="hljs-string">'polish_joke'</span>)
workflow.add_edge(<span class="hljs-string">'polish_joke'</span>, END)

chain = workflow.<span class="hljs-built_in">compile</span>()
</code></pre>
</li>
<li>
<p><strong>æµ‹è¯•è¿è¡Œï¼š</strong> å½“ç”Ÿæˆçš„ç®€çŸ­ç¬‘è¯åŒ…å«â€˜?â€™æ—¶ï¼Œæ— æ³•é€šè¿‡é—¨æ§æ£€æŸ¥ï¼Œæµç¨‹ä¼šè¿›å…¥å¢å¼ºå’Œæ¶¦è‰²ç¯èŠ‚ã€‚è™½ç„¶ç¬”è€…ä¸€ç›´è§‰å¾—å¤§æ¨¡å‹ç”Ÿæˆçš„ç¬‘è¯ä¸å¥½ç¬‘ï¼Œä½†ä»æœ€ç»ˆè¡¨ç°å½¢å¼ä¸Šçœ‹ï¼Œç¬‘è¯å·²ç»ä»ç®€çŸ­çš„ä¸€å°æ®µæ‰©å……åˆ°ä¸°å¯Œçš„å†…å®¹ï¼Œè¿™æ­£æ˜¯æç¤ºé“¾æ¨¡å¼é€šè¿‡é¡ºåºåˆ†è§£ä»»åŠ¡æ¥æå‡è¾“å‡ºæ•ˆæœçš„ä½“ç°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#3. æµ‹è¯•è¿è¡Œ</span>
state = chain.invoke({<span class="hljs-string">'topic'</span>: <span class="hljs-string">'å°çŒ«'</span>})

<span class="hljs-built_in">print</span>(<span class="hljs-string">'åˆå§‹ç¬‘è¯:'</span>)
<span class="hljs-built_in">print</span>(state[<span class="hljs-string">'joke'</span>])


<span class="hljs-keyword">if</span> <span class="hljs-string">'improved_joke'</span> <span class="hljs-keyword">in</span> state:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ”¹è¿›åç¬‘è¯:'</span>)
    <span class="hljs-built_in">print</span>(state[<span class="hljs-string">'improved_joke'</span>])

    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æœ€ç»ˆç¬‘è¯:'</span>)
    <span class="hljs-built_in">print</span>(state[<span class="hljs-string">'final_joke'</span>])
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a958ce30b13745efb431312b63501f6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767440137&amp;x-signature=hYbNXM%2FJ0dGQWspkvg23JWZ25Vk%3D" alt="" loading="lazy"/></p>
</li>
</ol>
<h2 data-id="heading-7">ä¸‰ã€è·¯ç”±æ¨¡å¼</h2>
<h2 data-id="heading-8">3.1 è·¯ç”±æ¨¡å¼æ¦‚å¿µ</h2>
<p>è·¯ç”±æ¨¡å¼æ—¨åœ¨é€šè¿‡å¯¹è¾“å…¥è¯·æ±‚è¿›è¡Œæ™ºèƒ½åˆ†ç±»ï¼Œå¹¶å°†å…¶å®šå‘åˆ°ä¸“é—¨çš„ä¸‹æ¸¸å¤„ç†èŠ‚ç‚¹ï¼Œä»è€Œé«˜æ•ˆåº”å¯¹å¤šæ ·åŒ–çš„ä»»åŠ¡éœ€æ±‚ã€‚åœ¨ LangGraph çš„å®ç°ä¸­ï¼Œè¿™é€šå¸¸æ¶‰åŠå®šä¹‰ä¸€ä¸ªè·¯ç”±å™¨èŠ‚ç‚¹ï¼ˆè´Ÿè´£åˆ†ç±»å†³ç­–ï¼‰å’Œä¸€ç»„ä¸‹æ¸¸èŠ‚ç‚¹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹ä¸“ç²¾äºå¤„ç†æŸä¸€ç‰¹å®šç±»å‹çš„ä»»åŠ¡ï¼‰ã€‚å·¥ä½œæµä¼šä½¿ç”¨æ¡ä»¶è¾¹ï¼Œæ ¹æ®è·¯ç”±å™¨èŠ‚ç‚¹çš„åˆ†ç±»ç»“æœï¼Œå°†ä»»åŠ¡æµè½¬å¯¼å‘æœ€åˆé€‚çš„å¤„ç†åˆ†æ”¯ã€‚</p>
<p>è·¯ç”±æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯å¼•å…¥ä¸€ä¸ªåˆ†æµæ­¥éª¤ã€‚è¯¥æ­¥éª¤å¯ä»¥ç”±å¤§æ¨¡å‹é©±åŠ¨ï¼Œä¹Ÿå¯ä»¥ç”±æ›´ä¼ ç»Ÿçš„åˆ†ç±»æ¨¡å‹æ”¯æŒã€‚æ•´ä¸ªå·¥ä½œæµçš„æˆåŠŸåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºè¿™ä¸ªåˆ†ç±»æ­¥éª¤çš„å‡†ç¡®æ€§ï¼šå¦‚æœè¾“å…¥è¢«é”™è¯¯åˆ†ç±»ï¼Œå°±ä¼šè¢«å¼•å¯¼è‡³ä¸æ°å½“çš„å¤„ç†è·¯å¾„ï¼Œä»è€Œå¯¼è‡´è¾“å‡ºç»“æœä¸æ­£ç¡®æˆ–ä¸æ»¡è¶³é¢„æœŸã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2ed3ffd7ff8469abbb71641eb1b74f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767440137&amp;x-signature=0ehxlE48vrXe3473LWlS%2FgL27Zg%3D" alt="" loading="lazy"/></p>
<p>è·¯ç”±æ¨¡å¼éå¸¸é€‚åˆå¤„ç†åŒä¸€å¤§ç±»ä»»åŠ¡ä¸‹åŒ…å«å¤šç§ä¸åŒå¤„ç†é€»è¾‘çš„åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯ä¸¤ä¸ªå…¸å‹é€‚ç”¨ä¾‹å­ï¼š</p>
<ol>
<li>å®¢æˆ·æœåŠ¡åˆ†æµï¼šåœ¨å®¢æˆ·æœåŠ¡åº”ç”¨ä¸­ï¼Œè·¯ç”±å¯ç”¨äºåŒºåˆ†ä¸åŒç±»å‹çš„å®¢æˆ·æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œä¸€èˆ¬å’¨è¯¢ã€é€€æ¬¾è¯·æ±‚å’ŒæŠ€æœ¯æ”¯æŒå·¥å•å¯ä»¥è¢«è·¯ç”±åˆ°ä¸åŒçš„ä¸“ç”¨ä¸‹æ¸¸æµç¨‹ã€‚ä¸€èˆ¬å’¨è¯¢å¯èƒ½è§¦å‘ç®€å•çš„FAQæ£€ç´¢ï¼›é€€æ¬¾è¯·æ±‚åˆ™å¯èƒ½å¯åŠ¨ä¸€ä¸ªéœ€è¦æŸ¥è¯¢è®¢å•å†å²å¹¶è°ƒç”¨æ”¯ä»˜æ¥å£çš„å·¥ä½œæµï¼›è€ŒæŠ€æœ¯æ”¯æŒåˆ™ä¼šè¢«å¯¼å‘åŒ…å«è¯¦ç»†æ•…éšœæ’æŸ¥æ­¥éª¤çš„ä¸“ä¸šæµç¨‹ã€‚</li>
<li>èµ„æºä¸æˆæœ¬ä¼˜åŒ–ï¼šè·¯ç”±è¿˜å¯ç”¨äºä¼˜åŒ–ç³»ç»Ÿçš„å“åº”é€Ÿåº¦ä¸è®¡ç®—æˆæœ¬ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ ¹æ®è¯·æ±‚çš„å¤æ‚åº¦æˆ–ç´§æ€¥æ€§è¿›è¡Œåˆ†ç±»ï¼šå°†ç®€å•ã€å¸¸è§çš„æŸ¥è¯¢è·¯ç”±åˆ°æ›´è½»é‡ã€å¿«é€Ÿä¸”æˆæœ¬ä½å»‰çš„æ¨¡å‹ï¼ˆå¦‚ Qwen3-8Bï¼‰ï¼Œè€Œå°†å¤æ‚ã€ç‰¹æ®Šçš„è¯·æ±‚å®šå‘ç»™èƒ½åŠ›æ›´å¼ºä½†èµ„æºæ¶ˆè€—ä¹Ÿæ›´å¤§çš„æ¨¡å‹ï¼ˆå¦‚ DeepSeek-671Bï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-9">3.2 è·¯ç”±æ¨¡å¼ä»£ç ç¤ºä¾‹</h2>
<p>å•çº¯æ¦‚å¿µæè¿°ä¸ç›´è§‚ï¼Œç¬”è€…é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä»£ç å®ä¾‹æ¥ç†è§£ã€‚æœ¬ä¾‹æ˜¯ä¸€ä¸ªå†…å®¹ç”Ÿæˆå™¨ï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šæ˜¯è¾“å‡ºç¬‘è¯ã€æ•…äº‹è¿˜æ˜¯è¯—æ­Œã€‚</p>
<ol>
<li>
<p><strong>å¼•å…¥ä¾èµ–</strong> ï¼ˆåŒæ ·éœ€è¦é…ç½®å¥½.envæ–‡ä»¶ä¸­çš„DEEPSEEK_API_KEYï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict, <span class="hljs-type">Literal</span>
<span class="hljs-keyword">from</span> langchain_deepseek <span class="hljs-keyword">import</span> ChatDeepSeek
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, START, END
<span class="hljs-keyword">from</span> langchain.messages <span class="hljs-keyword">import</span> HumanMessage, SystemMessage
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

load_dotenv()

llm = ChatDeepSeek(
    model=<span class="hljs-string">"deepseek-chat"</span>,
)
</code></pre>
</li>
<li>
<p><strong>å®šä¹‰çŠ¶æ€ï¼š</strong> çŠ¶æ€éœ€è¦è®°å½•ç”¨æˆ·è¾“å…¥ã€è·¯ç”±å†³ç­–ä»¥åŠæœ€ç»ˆè¾“å‡ºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">State</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    <span class="hljs-built_in">input</span>: <span class="hljs-built_in">str</span>
    decision: <span class="hljs-built_in">str</span>
    output: <span class="hljs-built_in">str</span>
</code></pre>
</li>
<li>
<p><strong>å®šä¹‰èŠ‚ç‚¹å‡½æ•°ï¼š</strong> åŒ…æ‹¬ä¸‰ä¸ªä¸“ç²¾äºä¸åŒåˆ›ä½œç±»å‹çš„ä¸‹æ¸¸èŠ‚ç‚¹ï¼Œä»¥åŠä¸€ä¸ªè´Ÿè´£åˆ†ç±»çš„è·¯ç”±å™¨èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. å®šä¹‰èŠ‚ç‚¹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_story</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    å†™æ•…äº‹èŠ‚ç‚¹
    '''</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¿›å…¥å†™æ•…äº‹å¤„ç†é€»è¾‘'</span>)
    result = llm.invoke(state[<span class="hljs-string">'input'</span>])
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'output'</span>: result.content
    }

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_joke</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    å†™ç¬‘è¯èŠ‚ç‚¹
    '''</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¿›å…¥å†™ç¬‘è¯å¤„ç†é€»è¾‘'</span>)
    result = llm.invoke(state[<span class="hljs-string">'input'</span>])
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'output'</span>: result.content
    }

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_poetry</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    å†™è¯—æ­ŒèŠ‚ç‚¹
    '''</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¿›å…¥å†™è¯—æ­Œå¤„ç†é€»è¾‘'</span>)
    result = llm.invoke(state[<span class="hljs-string">'input'</span>])
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'output'</span>: result.content
    }

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Classification</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    response_format: <span class="hljs-type">Literal</span>[<span class="hljs-string">'story'</span>, <span class="hljs-string">'joke'</span>, <span class="hljs-string">'poetry'</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">llm_call_router</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    ä½¿ç”¨ç»“æ„åŒ–è¾“å‡ºå°†è¾“å…¥è·¯ç”±åˆ°é€‚å½“çš„èŠ‚ç‚¹
    '''</span>
    structed_llm = llm.with_structured_output(Classification)
    input_content = state[<span class="hljs-string">'input'</span>]
    response = structed_llm.invoke([
        SystemMessage(content=<span class="hljs-string">'''
            ä½ æ˜¯ä¸€ä¸ªåˆ†ç±»è·¯ç”±ï¼Œæ ¹æ®ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œåˆ†ç±»ï¼Œåˆ†ç±»ç»“æœæ˜¯story, joke, poetryä¸‰è€…ä¸­çš„ä¸€ç§
        '''</span>),
        HumanMessage(content=input_content)
    ])
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'decision'</span>: response[<span class="hljs-string">'response_format'</span>]
    }
</code></pre>
</li>
<li>
<p><strong>å®šä¹‰è¾¹å¹¶æ„å»ºå›¾ï¼š</strong> åˆ©ç”¨æ¡ä»¶è¾¹å®ç°åŸºäºå†³ç­–çš„åˆ†æ”¯è·¯ç”±ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰æ¡ä»¶è¾¹å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">route_decision</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-keyword">if</span> state[<span class="hljs-string">'decision'</span>] == <span class="hljs-string">'story'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'llm_story'</span>
    <span class="hljs-keyword">elif</span> state[<span class="hljs-string">'decision'</span>] == <span class="hljs-string">'joke'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'llm_joke'</span>
    <span class="hljs-keyword">elif</span> state[<span class="hljs-string">'decision'</span>] == <span class="hljs-string">'poetry'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'llm_poetry'</span>

<span class="hljs-comment"># 2. å®šä¹‰è¾¹å’Œå›¾</span>
router_builder = StateGraph(State)

router_builder.add_node(<span class="hljs-string">'llm_story'</span>, generate_story)
router_builder.add_node(<span class="hljs-string">'llm_joke'</span>, generate_joke)
router_builder.add_node(<span class="hljs-string">'llm_poetry'</span>, generate_poetry)
router_builder.add_node(<span class="hljs-string">'llm_call_router'</span>, llm_call_router)

router_builder.add_edge(START, <span class="hljs-string">'llm_call_router'</span>)
router_builder.add_conditional_edges(
    <span class="hljs-string">'llm_call_router'</span>,
    route_decision,
    {
        <span class="hljs-string">'llm_story'</span>: <span class="hljs-string">'llm_story'</span>,
        <span class="hljs-string">'llm_joke'</span>: <span class="hljs-string">'llm_joke'</span>,
        <span class="hljs-string">'llm_poetry'</span>: <span class="hljs-string">'llm_poetry'</span>
    }
)
router_builder.add_edge(<span class="hljs-string">'llm_story'</span>, END)
router_builder.add_edge(<span class="hljs-string">'llm_joke'</span>, END)
router_builder.add_edge(<span class="hljs-string">'llm_poetry'</span>, END)

workflow = router_builder.<span class="hljs-built_in">compile</span>()
</code></pre>
<ol start="5">
<li><strong>è¿è¡Œæµ‹è¯•ï¼š</strong> è¾“å…¥â€œç»™æˆ‘å†™ä¸€ä¸ªå…³äºè‹äº•ç©ºçš„ç¬‘è¯â€ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œè·¯ç”±å™¨æˆåŠŸå°†è¯·æ±‚åˆ†ç±»ä¸ºjokeï¼Œå¹¶å°†å…¶å¼•å¯¼è‡³ç”Ÿæˆç¬‘è¯çš„èŠ‚ç‚¹è¿›è¡Œå¤„ç†ä¸è¾“å‡ºï¼ˆä¸å¾—ä¸è¯´ï¼Œå½“å‰å¤§æ¨¡å‹åœ¨å†…å®¹ç”Ÿæˆä¸Šä»è¶‹äºä¿å®ˆï¼‰ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python">result = workflow.invoke({
    <span class="hljs-string">'input'</span>: <span class="hljs-string">'ç»™æˆ‘å†™ä¸€ä¸ªå…³äºè‹äº•ç©ºçš„ç¬‘è¯'</span>
})

<span class="hljs-built_in">print</span>(result[<span class="hljs-string">'output'</span>])
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29a105cb4f2b4c6aa5f95cea7f681e19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767440137&amp;x-signature=hd5GAeTaq52cbDeV8JhEeTjJbQ4%3D" alt="" loading="lazy"/></p>
</li>
</ol>
<h2 data-id="heading-10">å››ã€å¹¶è¡Œæ¨¡å¼</h2>
<h2 data-id="heading-11">4.1 å¹¶è¡Œæ¨¡å¼æ¦‚å¿µ</h2>
<p>å¹¶è¡Œæ¨¡å¼æ—¨åœ¨å……åˆ†åˆ©ç”¨å¤§æ¨¡å‹çš„èƒ½åŠ›ï¼ŒåŒæ—¶å¤„ç†ä¸€ä¸ªä»»åŠ¡ä¸­ä¸åŒæ–¹é¢æˆ–åŒä¸€ä»»åŠ¡çš„ä¸åŒå˜ä½“ã€‚ä¸é¡ºåºæ‰§è¡Œçš„æç¤ºé“¾æ¨¡å¼ä¸åŒï¼Œå¹¶è¡Œæ¨¡å¼å…è®¸å¤šä¸ªå¤§æ¨¡å‹è°ƒç”¨åŒæ—¶è¿›è¡Œï¼Œæœ€åå°†å„è‡ªçš„è¾“å‡ºè¿›è¡Œèšåˆï¼Œä»è€Œæ˜¾è‘—æå‡å¤„ç†æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b34e3c638ab407099aeb8fa2589da8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767440137&amp;x-signature=JBOekez2uaj%2FfCwpUjHmHvtvinc%3D" alt="" loading="lazy"/></p>
<p>æ ¹æ®ä»»åŠ¡ç›®æ ‡çš„ä¸åŒï¼Œå¹¶è¡Œæ¨¡å¼çš„ä¸»è¦èšåˆæ–¹å¼å¯åˆ†ä¸ºä¸¤ç±»ï¼šåˆ†æ®µ ä¸ æŠ•ç¥¨ ã€‚</p>
<ul>
<li>åˆ†æ®µï¼šé€‚ç”¨äºå°†ä¸€ä¸ªå¤æ‚ä»»åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å­ä»»åŠ¡ã€‚è¿™äº›å­ä»»åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæ¯ä¸ªç”±ä¸€ä¸ªç‹¬ç«‹çš„å¤§æ¨¡å‹è°ƒç”¨å¤„ç†ï¼Œæœ€ç»ˆå°†ç»“æœç»„åˆæˆå®Œæ•´è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œè¦å…¨é¢è¯„ä¼°ä¸€æ®µå†…å®¹ï¼Œå¯ä»¥å¹¶è¡Œè°ƒç”¨å¤šä¸ªæ¨¡å‹ï¼Œåˆ†åˆ«è¯„ä¼°å…¶äº‹å®å‡†ç¡®æ€§ã€é€»è¾‘è¿è´¯æ€§å’Œæ–‡é£åŒ¹é…åº¦ï¼Œæœ€åèšåˆè¿™äº›ç»´åº¦çš„è¯„åˆ†ï¼Œå¾—åˆ°ä¸€ä¸ªç»¼åˆè¯„ä¼°æŠ¥å‘Šã€‚</li>
<li>æŠ•ç¥¨ï¼šé€‚ç”¨äºé€šè¿‡å…±è¯†æœºåˆ¶æå‡ç»“æœçš„å‡†ç¡®æ€§ã€‚å³å¯¹åŒä¸€ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œå¤šæ¬¡ï¼Œæ¯æ¬¡ä½¿ç”¨ç•¥æœ‰ä¸åŒçš„æç¤ºè¯æˆ–é…ç½®ï¼Œç„¶åæ ¹æ®å¤šæ•°è¾“å‡ºæˆ–æŸç§å…±è¯†æ¥å†³å®šæœ€ç»ˆç»“æœã€‚ä¾‹å¦‚ï¼Œåœ¨å®¡æŸ¥ä¸€æ®µä»£ç æ˜¯å¦å­˜åœ¨å®‰å…¨æ¼æ´æ—¶ï¼Œå¯ä»¥ç”¨ä¸‰ä¸ªå¹¶è¡Œçš„æ¨¡å‹ï¼Œåˆ†åˆ«ä»â€œå†…å­˜å®‰å…¨â€ã€â€œæ³¨å…¥æ”»å‡»â€å’Œâ€œé€»è¾‘ç¼ºé™·â€ä¸‰ä¸ªè§’åº¦è¿›è¡Œå®¡æŸ¥ã€‚å¦‚æœå…¶ä¸­ä¸¤ä¸ªæ¨¡å‹éƒ½è®¤ä¸ºå­˜åœ¨æ¼æ´ï¼Œåˆ™å¯ä»¥ç›¸å¯¹å¯é åœ°åˆ¤å®šè¯¥ä»£ç æœ‰é£é™©ã€‚</li>
</ul>
<h2 data-id="heading-12">4.2 å¹¶è¡Œæ¨¡å¼</h2>
<p>å•çº¯æ¦‚å¿µæè¿°ä¸ç›´è§‚ï¼Œç¬”è€…é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä»£ç å®ä¾‹æ¥ç†è§£ã€‚è¯¥ä»»åŠ¡æ˜¯é€šè¿‡ç”¨æˆ·è¾“å…¥çš„ä¸»é¢˜ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å«æ•…äº‹ã€ç¬‘è¯å’Œè¯—æ­Œçš„åˆé›†ã€‚</p>
<ol>
<li>
<p><strong>å¼•å…¥ä¾èµ–</strong>ï¼ˆåŒæ ·éœ€è¦é…ç½®å¥½.envæ–‡ä»¶ä¸­çš„DEEPSEEK_API_KEYï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_deepseek <span class="hljs-keyword">import</span> ChatDeepSeek
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, START, END
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

load_dotenv()

llm = ChatDeepSeek(
    model=<span class="hljs-string">"deepseek-chat"</span>,
)
</code></pre>
</li>
<li>
<p><strong>å®šä¹‰å·¥ä½œæµçš„çŠ¶æ€ï¼š</strong> å›´ç»•ä¸€ä¸ªä¸»é¢˜ï¼Œå¹¶è¡Œç”Ÿæˆç¬‘è¯ã€æ•…äº‹å’Œè¯—æ­Œï¼Œæœ€åèšåˆä¸ºåˆé›†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">State</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    topic: <span class="hljs-built_in">str</span>
    joke: <span class="hljs-built_in">str</span>
    story: <span class="hljs-built_in">str</span>
    poetry: <span class="hljs-built_in">str</span>
    combined_output: <span class="hljs-built_in">str</span>
</code></pre>
</li>
<li>
<p><strong>å®šä¹‰èŠ‚ç‚¹å‡½æ•°ï¼š</strong> é™¤äº†ç”Ÿæˆç¬‘è¯ã€æ•…äº‹ã€è¯—æ­Œä¸‰ä¸ªå¹¶è¡Œæ‰§è¡Œçš„èŠ‚ç‚¹å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªèšåˆèŠ‚ç‚¹å°†ä¸‰è€…çš„è¾“å‡ºæ•´åˆã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_joke</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    ç”Ÿæˆç¬‘è¯çš„èŠ‚ç‚¹
    '''</span>
    topic = state[<span class="hljs-string">'topic'</span>]
    msg = llm.invoke(<span class="hljs-string">f'å†™ä¸€ä¸ªå…³äº<span class="hljs-subst">{topic}</span>çš„ç¬‘è¯'</span>)
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'joke'</span>: msg.content
    }

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_story</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    ç”Ÿæˆæ•…äº‹çš„èŠ‚ç‚¹
    '''</span>
    topic = state[<span class="hljs-string">'topic'</span>]
    msg = llm.invoke(<span class="hljs-string">f'å†™ä¸€ä¸ªå…³äº<span class="hljs-subst">{topic}</span>çš„æ•…äº‹'</span>)
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'story'</span>: msg.content
    }

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_poetry</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    ç”Ÿæˆè¯—æ­Œçš„èŠ‚ç‚¹
    '''</span>
    topic = state[<span class="hljs-string">'topic'</span>]
    msg = llm.invoke(<span class="hljs-string">f'å†™ä¸€ä¸ªå…³äº<span class="hljs-subst">{topic}</span>çš„è¯—æ­Œ'</span>)
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'poetry'</span>: msg.content
    }

<span class="hljs-keyword">def</span> <span class="hljs-title function_">aggregator</span>(<span class="hljs-params">state: State</span>):
    <span class="hljs-string">'''
    èšåˆç¬‘è¯ã€æ•…äº‹ã€è¯—æ­Œçš„èŠ‚ç‚¹
    '''</span>
    topic = state[<span class="hljs-string">'topic'</span>]
    joke = state[<span class="hljs-string">'joke'</span>]
    story = state[<span class="hljs-string">'story'</span>]
    poetry = state[<span class="hljs-string">'poetry'</span>]
    combined = <span class="hljs-string">f'è¿™æ˜¯ä¸€ä¸ªå…³äº <span class="hljs-subst">{topic}</span> çš„æ•…äº‹ã€ç¬‘è¯å’Œè¯—æ­Œçš„åˆé›†\n\n'</span>
    combined += <span class="hljs-string">f'æ•…äº‹\n <span class="hljs-subst">{story}</span>\n\n'</span>
    combined += <span class="hljs-string">f'ç¬‘è¯\n <span class="hljs-subst">{joke}</span>\n\n'</span>
    combined += <span class="hljs-string">f'è¯—æ­Œ\n <span class="hljs-subst">{poetry}</span>\n\n'</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'combined_output'</span>: combined
    }
</code></pre>
</li>
<li>
<p><strong>å®šä¹‰è¾¹å’Œå›¾ï¼š</strong> æ³¨æ„ï¼Œè¿™é‡Œä¸‰ä¸ªç”ŸæˆèŠ‚ç‚¹éƒ½ä»STARTåŒæ—¶å¼€å§‹ï¼Œä½“ç°äº†å¹¶è¡Œæ€§ã€‚</p>
<pre><code class="hljs language-python" lang="python">parallel_builder = StateGraph(State)

parallel_builder.add_node(<span class="hljs-string">'generate_joke'</span>, generate_joke)
parallel_builder.add_node(<span class="hljs-string">'generate_story'</span>, generate_story)
parallel_builder.add_node(<span class="hljs-string">'generate_poetry'</span>, generate_poetry)
parallel_builder.add_node(<span class="hljs-string">'aggregator'</span>, aggregator)

parallel_builder.add_edge(START, <span class="hljs-string">'generate_joke'</span>)
parallel_builder.add_edge(START, <span class="hljs-string">'generate_story'</span>)
parallel_builder.add_edge(START, <span class="hljs-string">'generate_poetry'</span>)
parallel_builder.add_edge(<span class="hljs-string">'generate_joke'</span>, <span class="hljs-string">'aggregator'</span>)
parallel_builder.add_edge(<span class="hljs-string">'generate_story'</span>, <span class="hljs-string">'aggregator'</span>)
parallel_builder.add_edge(<span class="hljs-string">'generate_poetry'</span>, <span class="hljs-string">'aggregator'</span>)
parallel_builder.add_edge(<span class="hljs-string">'aggregator'</span>, END)

workflow = parallel_builder.<span class="hljs-built_in">compile</span>()
</code></pre>
</li>
<li>
<p><strong>è¿è¡Œæµ‹è¯•ï¼š</strong> ä½¿ç”¨â€œpgone ä¸ æå°ç’â€ä½œä¸ºä¸»é¢˜è¿›è¡Œæµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹ï¼ˆdeepseek è¿è¿™ä¸ªæ•…äº‹ä¹Ÿä¸èƒ½è®²å˜›ï¼‰</p>
<pre><code class="hljs language-python" lang="python">state = workflow.invoke({
    <span class="hljs-string">'topic'</span>: <span class="hljs-string">'pgone ä¸ æå°ç’'</span>
})
<span class="hljs-built_in">print</span>(state[<span class="hljs-string">'combined_output'</span>])
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05f2cf4063d140d7ba1e38e35ef97a95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767440137&amp;x-signature=a5zpXIcYBWw8LeuQl9HtJRVB7P8%3D" alt="" loading="lazy"/></p>
</li>
</ol>
<p>ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„å…¨éƒ¨å†…å®¹ï¼Œå®Œæ•´ä»£ç å¤§å®¶å¯ä»¥å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å· <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œå¹¶ç§ä¿¡: <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<h2 data-id="heading-13">äº”ã€æ€»ç»“</h2>
<p>æœ¬æ–‡åˆ†äº«äº†LangGraphæ™ºèƒ½ä½“å¼€å‘çš„è®¾è®¡æ¨¡å¼ï¼šå·¥ä½œæµæ¨¡å¼å’Œå¤šæ™ºèƒ½ä½“æ¨¡å¼ï¼ŒåŒæ—¶è¯¦ç»†è®²è§£äº†ä¸‰ç§æ ¸å¿ƒå·¥ä½œæµæ¨¡å¼ã€‚æç¤ºé“¾æ¨¡å¼é€šè¿‡é¡ºåºåˆ†è§£ä»»åŠ¡ä¸é—¨æ§æ£€æŸ¥æå‡å‡†ç¡®æ€§ï¼›è·¯ç”±æ¨¡å¼å€ŸåŠ©æ™ºèƒ½åˆ†ç±»å®ç°ä¸“ä¸šåŒ–ä»»åŠ¡åˆ†æµï¼›å¹¶è¡Œæ¨¡å¼åŒæ—¶å¤„ç†å¤šä¸ªå­ä»»åŠ¡ä»¥æå‡æ•ˆç‡ã€‚è¿™äº›æ¨¡å¼ä¸ºæ„å»ºå¤æ‚ã€å¯é çš„æ™ºèƒ½ä½“ç³»ç»Ÿæä¾›äº†å¯å¤ç”¨çš„åŸºç¡€æ¶æ„ã€‚å½“ç„¶ä»Šå¤©çš„å†…å®¹ä»…ä»…æ˜¯å¼€èƒƒå°èœï¼Œä¸‹ä¸€æœŸå†…å®¹ç¬”è€…å°†åˆ†äº«æ›´åŠ çµæ´»çš„è®¾è®¡æ¨¡å¼ï¼šåè°ƒå™¨-å·¥ä½œè€…æ¨¡å¼å’Œè¯„ä¼°å™¨-ä¼˜åŒ–å™¨æ¨¡å¼ï¼Œå¤§å®¶æ•¬è¯·æœŸå¾…ã€‚</p>
<p><a href="https://juejin.cn/column/7526240014499495972" target="_blank" title="https://juejin.cn/column/7526240014499495972">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ä¸“æ å†…å®¹æºè‡ªç¬”è€…åœ¨å®é™…å­¦ä¹ å’Œå·¥ä½œä¸­å¯¹ LangChain ä¸ LangGraph çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶ç³»ç»Ÿæ€§åœ°ã€é«˜æ•ˆåœ°æŒæ¡ AI Agent çš„å¼€å‘æ–¹æ³•ï¼Œåœ¨å„å¤§æŠ€æœ¯å¹³å°è·å¾—äº†ä¸å°‘å…³æ³¨ä¸æ”¯æŒã€‚ç›®å‰å·²æ›´æ–°34è®²ï¼Œæ­£åœ¨æ›´æ–°LangGraph1.0é€Ÿé€šæŒ‡å—ï¼Œå¹¶éšæ—¶è¡¥å……ç¬”è€…åœ¨å®é™…å·¥ä½œä¸­æ€»ç»“çš„æ‹“å±•çŸ¥è¯†ç‚¹ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å· å¤§æ¨¡å‹çœŸå¥½ç©ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡: LangChainæ™ºèƒ½ä½“å¼€å‘å…è´¹è·å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tailwind CSSï¼šç”¨â€œç±»åç¼–ç¨‹â€é‡æ„ä½ çš„å‰ç«¯å¼€å‘ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7588073726208671750</link>    <guid>https://juejin.cn/post/7588073726208671750</guid>    <pubDate>2025-12-27T11:45:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588073726208671750" data-draft-id="7588073726208655366" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tailwind CSSï¼šç”¨â€œç±»åç¼–ç¨‹â€é‡æ„ä½ çš„å‰ç«¯å¼€å‘ä½“éªŒ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-12-27T11:45:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ €ç§‹666"/> <meta itemprop="url" content="https://juejin.cn/user/2566698322650307"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tailwind CSSï¼šç”¨â€œç±»åç¼–ç¨‹â€é‡æ„ä½ çš„å‰ç«¯å¼€å‘ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2566698322650307/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ €ç§‹666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:45:10.000Z" title="Sat Dec 27 2025 11:45:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»å‰ç«¯â€œå†™æ ·å¼â€åˆ°â€œæ‹¼ä¹é«˜â€ï¼šTailwind æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>å¦‚æœä½ è¿˜åœ¨ä¸º <code>.btn-primary-large-rounded-shadow-hover</code> è¿™ç§ç±»åè€Œå¤±çœ ï¼Œé‚£ä½ å¯èƒ½éœ€è¦è®¤è¯†ä¸€ä¸‹è¿™ä½å‰ç«¯ç•Œçš„â€œæç®€ä¸»ä¹‰è‰ºæœ¯å®¶â€â€”â€”<strong>Tailwind CSS</strong>ã€‚</p>
<p>å®ƒä¸è®©ä½ å†™ CSSï¼Œè€Œæ˜¯è®©ä½ â€œ<strong>ç”¨ç±»åé€  UI</strong>â€ã€‚å¬èµ·æ¥åƒç„å­¦ï¼Ÿåˆ«æ€¥ï¼Œä¸¾ä¸ªğŸŒ°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;button <span class="hljs-keyword">class</span>=<span class="hljs-string">"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"</span>&gt;
  æˆ‘æ˜¯æŒ‰é’®ï¼Œç‚¹æˆ‘ä¸ä¼šæ€€å­•
&lt;/button&gt;
</code></pre>
<p>çœ‹æ‡‚äº†å—ï¼Ÿ<code>px-4</code> æ˜¯å†…è¾¹è·ï¼Œ<code>bg-blue-600</code> æ˜¯èƒŒæ™¯è“ï¼Œ<code>hover:</code> è¡¨ç¤ºâ€œå½“æˆ‘è¢«æ‚¬åœæ—¶â€ï¼Œè¿åŠ¨ç”»è¿‡æ¸¡ <code>transition</code> éƒ½ç»™ä½ å®‰æ’å¾—æ˜æ˜ç™½ç™½ã€‚</p>
<p>è¿™ä¸æ˜¯ä»£ç ï¼Œè¿™æ˜¯<strong>UI çš„è¯´æ˜ä¹¦</strong>ã€‚Tailwind æŠŠ CSS æ‹†æˆä¸€ä¸ªä¸ªâ€œåŸå­ç±»â€ï¼Œä½ åªéœ€è¦åƒæ­ä¹é«˜ä¸€æ ·ç»„åˆå®ƒä»¬ï¼Œå°±èƒ½å¿«é€Ÿæ„å»ºå‡ºæ¼‚äº®ã€å“åº”å¼çš„ç•Œé¢ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ä»é›¶å¼€å§‹ï¼š3 åˆ†é’Ÿæ­å»ºä¸€ä¸ª React + Tailwind é¡¹ç›®ï¼ˆæ¯”æ³¡é¢è¿˜å¿«ï¼‰</h2>
<p>æˆ‘ä»¬æ¥èµ°ä¸€éçœŸå®å¼€å‘æµç¨‹ï¼Œä¿è¯ä½ æ‰‹ä¸æŠ–ã€å¿ƒä¸æ…Œã€‚</p>
<h3 data-id="heading-2">âœ… ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ– Vite é¡¹ç›®ï¼ˆç°ä»£å‰ç«¯çš„â€œå¿«æ·å¯åŠ¨é”®â€ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">npm init vite
</code></pre>
<p>ç„¶åæŒ‰æç¤ºèµ°ï¼š</p>
<ul>
<li>é¡¹ç›®åï¼š<code>my-cool-app</code></li>
<li>æ¡†æ¶ï¼š<code>React</code></li>
<li>å˜ä½“ï¼š<code>JavaScript</code></li>
</ul>
<p>æ¥ç€è¿›å…¥é¡¹ç›®å¹¶å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> my-cool-app
npm install
</code></pre>
<blockquote>
<p>ğŸ’¡ å°è´´å£«ï¼šVite æ˜¯æ–°æ—¶ä»£çš„æ‰“åŒ…å·¥å…·ï¼Œå¿«å¾—åƒå¼€äº†æ°®æ°”åŠ é€Ÿï¼Œçƒ­æ›´æ–°æ¯”ä½ æ¢å°ç”µè§†è¿˜å¿«ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">âœ… ç¬¬äºŒæ­¥ï¼šå®‰è£… Tailwindï¼ˆç»™ React è£…ä¸Šâ€œå–·æ°”èƒŒåŒ…â€ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">npm install -D tailwindcss postcss autoprefixer
</code></pre>
<blockquote>
<p>ğŸ“Œ æ³¨æ„ï¼š<code>-D</code> è¡¨ç¤ºå¼€å‘ä¾èµ–ï¼Œæ¯•ç«Ÿç”Ÿäº§ç¯å¢ƒä¸éœ€è¦ç¼–è¯‘å™¨å¸®ä½ â€œæ‹¼ç±»åâ€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">âœ… ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆé…ç½®æ–‡ä»¶ï¼ˆTailwind çš„â€œå‡ºç”Ÿè¯æ˜â€ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">npx tailwindcss init -p
</code></pre>
<p>è¿™ä¼šç”Ÿæˆä¸¤ä¸ªå…³é”®æ–‡ä»¶ï¼š</p>
<ul>
<li><code>tailwind.config.js</code> â€”â€” Tailwind çš„â€œå¤§è„‘â€</li>
<li><code>postcss.config.js</code> â€”â€” ç¼–è¯‘æµç¨‹çš„â€œäº¤é€šè­¦å¯Ÿâ€</li>
</ul>
<hr/>
<h3 data-id="heading-5">âœ… ç¬¬å››æ­¥ï¼šé…ç½®å†…å®¹æ‰«æè·¯å¾„ï¼ˆé˜²æ­¢â€œå†…å­˜æ³„æ¼â€å¼æ‰“åŒ…ï¼‰</h3>
<p>ç¼–è¾‘ <code>tailwind.config.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">import('tailwindcss').Config</span>} */</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">content</span>: [
    <span class="hljs-string">"./index.html"</span>,
    <span class="hljs-string">"./src/**/*.{js,jsx}"</span>,
  ],
  <span class="hljs-attr">theme</span>: {
    <span class="hljs-attr">extend</span>: {},
  },
  <span class="hljs-attr">plugins</span>: [],
}
</code></pre>
<blockquote>
<p>âš ï¸ åˆ’é‡ç‚¹ï¼š<code>content</code> å­—æ®µå‘Šè¯‰ Tailwindï¼šâ€œåªæ‰“åŒ…æˆ‘å®é™…ç”¨åˆ°çš„ç±»â€ï¼Œå¦åˆ™ä½ ä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å« 10,000+ ç±»çš„ CSS æ–‡ä»¶â€”â€”é‚£ä¸æ˜¯æ ·å¼è¡¨ï¼Œé‚£æ˜¯ã€ŠCSS ç™¾ç§‘å…¨ä¹¦ã€‹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">âœ… ç¬¬äº”æ­¥ï¼šå¼•å…¥ Tailwindï¼ˆç»™é¡¹ç›®æ³¨å…¥â€œè¶…èƒ½åŠ›â€ï¼‰</h3>
<p>åœ¨ <code>src/index.css</code> ä¸­åŠ å…¥ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@tailwind</span> base;
<span class="hljs-keyword">@tailwind</span> components;
<span class="hljs-keyword">@tailwind</span> utilities;
</code></pre>
<p>ç„¶ååœ¨ <code>main.jsx</code> å¼•å…¥è¿™ä¸ª CSSï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>
</code></pre>
<p>æœ€åï¼Œå¯åŠ¨é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p>ğŸ‰ æˆåŠŸï¼ä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ª <strong>React + Vite + Tailwind</strong> çš„ç°ä»£åŒ–å‰ç«¯å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥å¼€å§‹â€œç±»åç¼–ç¨‹â€äº†ï¼</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€Tailwind çš„ä¸‰å¤§ç»æŠ€ï¼šå“åº”å¼ã€çŠ¶æ€ã€åŸå­åŒ–</h2>
<h3 data-id="heading-8">ğŸ”¥ ç»æŠ€ä¸€ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆï¼Œå“åº”å¼å¦‚ä¸èˆ¬é¡ºæ»‘</h3>
<p>ä¼ ç»Ÿå†™æ³•ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.layout</span> { <span class="hljs-attribute">display</span>: flex; }
}
</code></pre>
<p>Tailwind å†™æ³•ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;div className=<span class="hljs-string">"flex flex-col md:flex-row gap-4"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"md:w-2/3"</span>&gt;</span>ä¸»å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"md:w-1/3"</span>&gt;</span>ä¾§è¾¹æ <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span></span>
&lt;/div&gt;
</code></pre>
<ul>
<li>ç§»åŠ¨ç«¯ï¼šå‚ç›´æ’åˆ—ï¼Œå æ»¡å®½åº¦</li>
<li><code>md:</code> æ–­ç‚¹ä»¥ä¸Šï¼šæ°´å¹³æ’åˆ—ï¼Œä¸»å†…å®¹ 2/3ï¼Œä¾§è¾¹æ  1/3</li>
</ul>
<p>æ— éœ€å†™ä¸€è¡Œåª’ä½“æŸ¥è¯¢ï¼ŒTailwind å·²ç»å¸®ä½ é¢„è®¾å¥½æ–­ç‚¹ï¼ˆsm: 640px, md: 768px, lg: 1024px...ï¼‰ï¼Œç®€ç›´æ˜¯â€œæ–­ç‚¹è‡ªç”±ä¸»ä¹‰è€…â€ã€‚</p>
<hr/>
<h3 data-id="heading-9">ğŸ”¥ ç»æŠ€äºŒï¼šçŠ¶æ€ç®¡ç†ä¸ç”¨ JSï¼ŒCSS è‡ªå·±æå®š</h3>
<p>æƒ³å®ç°â€œé¼ æ ‡æ‚¬åœå˜è‰² + æ¸å˜åŠ¨ç”»â€ï¼Ÿ</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;button className=<span class="hljs-string">"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition"</span>&gt;
  æ‚¬åœæˆ‘è¯•è¯•ï¼Ÿ
&lt;/button&gt;
</code></pre>
<ul>
<li><code>hover:bg-blue-700</code>ï¼šæ‚¬åœæ—¶èƒŒæ™¯å˜æ·±</li>
<li><code>transition</code>ï¼šåŠ ä¸Šå¹³æ»‘è¿‡æ¸¡</li>
<li>ä¸éœ€è¦ JS ç›‘å¬ <code>onMouseEnter</code>ï¼Œä¹Ÿä¸éœ€è¦å†™é¢å¤– CSS</li>
</ul>
<p>Tailwind æ”¯æŒ <code>focus:</code>ã€<code>active:</code>ã€<code>disabled:</code> ç­‰ä¼ªç±»ï¼ŒçœŸæ­£åšåˆ°äº†â€œ<strong>æ ·å¼å³äº¤äº’</strong>â€ã€‚</p>
<hr/>
<h3 data-id="heading-10">ğŸ”¥ ç»æŠ€ä¸‰ï¼šåŸå­åŒ–ç±»åï¼Œç»„åˆè‡ªç”±åº¦æ‹‰æ»¡</h3>
<p>Tailwind çš„æ¯ä¸ªç±»åªåšä¸€ä»¶äº‹ï¼š</p>
<ul>
<li><code>text-center</code> â†’ æ–‡æœ¬å±…ä¸­</li>
<li><code>mt-4</code> â†’ ä¸Šè¾¹è· 1rem</li>
<li><code>shadow-lg</code> â†’ å¤§é˜´å½±</li>
<li><code>rounded-xl</code> â†’ è¶…å¤§åœ†è§’</li>
</ul>
<p>ä½ å¯ä»¥åƒè°ƒé¸¡å°¾é…’ä¸€æ ·æ··åˆå®ƒä»¬ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;div className=<span class="hljs-string">"bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition transform hover:scale-105"</span>&gt;
  æˆ‘æ˜¯ä¸€ä¸ªä¼šâ€œå‘¼å¸â€çš„å¡ç‰‡
&lt;/div&gt;
</code></pre>
<blockquote>
<p>ğŸ¤¯ æƒ³è±¡ä¸€ä¸‹ï¼šä»¥å‰ä½ è¦å†™ <code>.card-hover-effect</code>ï¼Œç°åœ¨ç›´æ¥ç”¨ç±»åæè¿°è¡Œä¸ºï¼Œè¿æ–‡æ¡£éƒ½ä¸ç”¨å†™ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">å››ã€React + Tailwindï¼šç»„ä»¶åŒ–çš„â€œé»„é‡‘æ­æ¡£â€</h2>
<p>Tailwind å’Œ React æ˜¯å¤©ä½œä¹‹åˆã€‚æ¥çœ‹ä¸€ä¸ªå®æˆ˜ä¾‹å­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">ArticleCard</span> = (<span class="hljs-params">{ title, summary }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-5 bg-white rounded-xl shadow hover:shadow-lg transition border"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg font-bold text-gray-800"</span>&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500 mt-2"</span>&gt;</span>{summary}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ArticleCard</span> 
        <span class="hljs-attr">title</span>=<span class="hljs-string">"Tailwind çœŸé¦™è­¦å‘Š"</span> 
        <span class="hljs-attr">summary</span>=<span class="hljs-string">"ç”¨ utility class å¿«é€Ÿæ„å»º UIï¼Œå‘Šåˆ« SCSS åµŒå¥—åœ°ç‹±"</span> 
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ArticleCard</span> 
        <span class="hljs-attr">title</span>=<span class="hljs-string">"React ç»„ä»¶åŒ–å“²å­¦"</span> 
        <span class="hljs-attr">summary</span>=<span class="hljs-string">"æŠŠ UI æ‹†æˆä¹é«˜ï¼Œç»„åˆå‡ºåƒå˜ä¸‡åŒ–"</span> 
      /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p>ä½ ä¼šå‘ç°ï¼š</p>
<ul>
<li>æ ·å¼å…¨éƒ¨ç”±ç±»åæ§åˆ¶ï¼Œç»„ä»¶é€»è¾‘æ›´æ¸…æ™°</li>
<li>æ— éœ€ç»´æŠ¤ <code>.scss</code> æ–‡ä»¶ï¼Œç»“æ„å’Œæ ·å¼éƒ½åœ¨ JSX ä¸­</li>
<li>ä¿®æ”¹ UIï¼Ÿæ”¹å‡ ä¸ªç±»åå°±è¡Œï¼Œä¸ç”¨ç¿»é CSS æ–‡ä»¶</li>
</ul>
<hr/>
<h2 data-id="heading-12">äº”ã€å¸¸è§è¯¯è§£ &amp; æ­£ç¡®æ‰“å¼€æ–¹å¼</h2>
<h3 data-id="heading-13">âŒ è¯¯è§£ä¸€ï¼šâ€œç±»åå¤ªå¤šï¼ŒHTML å˜ä¸‘äº†â€</h3>
<p><strong>åé©³</strong>ï¼šHTML æœ¬æ¥å°±ä¸æ˜¯ç»™äººâ€œè¯»â€çš„ï¼Œæ˜¯ç»™æµè§ˆå™¨â€œåƒâ€çš„ã€‚ä½ è§è¿‡è°åæ§½â€œè¿™å®¶é¤å…èœå•å¤ªé•¿â€å—ï¼Ÿå…³é”®æ˜¯èœå¥½ä¸å¥½åƒã€‚</p>
<p>è€Œä¸”ï¼Œä½ å¯ä»¥ç”¨ <code>@apply</code> æå–å¸¸ç”¨ç»„åˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.btn-primary</span> {
  <span class="hljs-keyword">@apply</span> px-<span class="hljs-number">4</span> py-<span class="hljs-number">2</span> bg-blue-<span class="hljs-number">600</span> text-white rounded <span class="hljs-attribute">hover</span>:bg-blue-<span class="hljs-number">700</span> transition;
}
</code></pre>
<p>ç„¶ååœ¨ JSX ä¸­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;button className=<span class="hljs-string">"btn-primary"</span>&gt;æäº¤&lt;/button&gt;
</code></pre>
<blockquote>
<p>âœ… å»ºè®®ï¼šå°é¡¹ç›®ç›´æ¥ç”¨åŸå­ç±»ï¼Œå¤§é¡¹ç›®å¯ç»“åˆ <code>@apply</code> æˆ–ç»„ä»¶å°è£…ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-14">âŒ è¯¯è§£äºŒï¼šâ€œTailwind å­¦ä¹ æˆæœ¬é«˜â€</h3>
<p><strong>çœŸç›¸</strong>ï¼šTailwind çš„å‘½åæå…¶è§„å¾‹ï¼š</p>
<ul>
<li><code>p-{size}</code> â†’ padding</li>
<li><code>m-{direction}-{size}</code> â†’ margin</li>
<li><code>text-{color}</code> â†’ æ–‡å­—é¢œè‰²</li>
<li><code>w-{fraction}</code> â†’ å®½åº¦ï¼ˆw-1/2 å°±æ˜¯ 50%ï¼‰</li>
</ul>
<p>èƒŒ 10 ä¸ªç±»ï¼Œå°±èƒ½å†™ 80% çš„å¸ƒå±€ã€‚å®˜æ–¹æ–‡æ¡£æœç´¢åŠŸèƒ½å¼ºå¤§ï¼Œ<code>Ctrl+K</code> ä¸€æœå°±å‡ºç»“æœï¼Œæ¯”è®° CSS å±æ€§è¿˜å¿«ã€‚</p>
<hr/>
<h2 data-id="heading-15">å…­ã€æ€»ç»“ï¼šTailwind æ˜¯â€œæ‡’äººâ€çš„èƒœåˆ©ï¼Œä¹Ÿæ˜¯â€œé«˜æ•ˆè€…â€çš„æ­¦å™¨</h2>
<p>Tailwind å¹¶ä¸æ˜¯è¦å–ä»£ CSSï¼Œè€Œæ˜¯æä¾›äº†ä¸€ç§<strong>æ›´é«˜æ•ˆã€æ›´ä¸€è‡´ã€æ›´å¯æ§</strong>çš„ UI æ„å»ºæ–¹å¼ã€‚</p>





















<table><thead><tr><th>ä¼ ç»Ÿ CSS</th><th>Tailwind</th></tr></thead><tbody><tr><td>å†™è§„åˆ™ â†’ ç¼–è¯‘ â†’ è°ƒè¯•</td><td>ç›´æ¥ç”¨ç±»å â†’ å®æ—¶é¢„è§ˆ</td></tr><tr><td>å®¹æ˜“å†—ä½™ã€éš¾å¤ç”¨</td><td>åŸå­åŒ–ã€é«˜å¤ç”¨</td></tr><tr><td>å“åº”å¼éœ€æ‰‹åŠ¨å†™ media query</td><td>æ–­ç‚¹å‰ç¼€ä¸€é”®åˆ‡æ¢</td></tr></tbody></table>
<blockquote>
<p>ğŸ¯ <strong>é€‚åˆè°ï¼Ÿ</strong></p>
<ul>
<li>å¿«é€ŸåŸå‹å¼€å‘</li>
<li>è®¾è®¡ç³»ç»Ÿç»Ÿä¸€çš„é¡¹ç›®</li>
<li>ä¸æƒ³å†™ CSS ä½†åˆæƒ³è¦ç²¾è‡´ UI çš„äºº</li>
<li>æƒ³æ‘†è„±â€œ<code>.container-wrapper-inner-content-box</code>â€è¿™ç§ç±»åå™©æ¢¦çš„äºº</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-16">æœ€åä¸€å¥æš´è¨€ï¼š</h2>
<blockquote>
<p><strong>â€œæœªæ¥ä¸‰å¹´ï¼Œä¸ä¼šç”¨ Tailwind çš„å‰ç«¯ï¼Œå°±åƒä¸ä¼šç”¨ Git çš„ç¨‹åºå‘˜ã€‚â€</strong></p>
</blockquote>
<p>åˆ«ç­‰äº†ï¼Œç°åœ¨å°±å» <code>npm create vite</code>ï¼Œç„¶å <code>npm install -D tailwindcss</code>ï¼Œå¼€å¯ä½ çš„â€œç±»åç¼–ç¨‹â€ä¹‹æ—…å§ï¼</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«æŠ½å¡ï¼å°çº¢ä¹¦è”åˆå¤æ—¦å¼€æºæ–°ç¥å™¨ï¼ŒAIç»˜å›¾ç»ˆäºèƒ½æŒ‡å“ªæ‰“å“ªäº†]]></title>    <link>https://juejin.cn/post/7588149079416700982</link>    <guid>https://juejin.cn/post/7588149079416700982</guid>    <pubDate>2025-12-27T10:14:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588149079416700982" data-draft-id="7588149079416668214" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«æŠ½å¡ï¼å°çº¢ä¹¦è”åˆå¤æ—¦å¼€æºæ–°ç¥å™¨ï¼ŒAIç»˜å›¾ç»ˆäºèƒ½æŒ‡å“ªæ‰“å“ªäº†"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-27T10:14:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«æŠ½å¡ï¼å°çº¢ä¹¦è”åˆå¤æ—¦å¼€æºæ–°ç¥å™¨ï¼ŒAIç»˜å›¾ç»ˆäºèƒ½æŒ‡å“ªæ‰“å“ªäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T10:14:50.000Z" title="Sat Dec 27 2025 10:14:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åšè¿‡AIç»˜ç”»çš„æœ‹å‹å¤§æ¦‚éƒ½æœ‰è¿‡è¿™ç§æŠ“ç‹‚æ—¶åˆ»ï¼šå…‰å½±å®Œç¾ã€ç”»è´¨æƒŠè‰³ï¼Œä½†ä½ æƒ³è®©çŒ«åœ¨å·¦è¾¹ã€ç‹—åœ¨å³è¾¹ï¼ŒAIååç»™ä½ ç”»æˆå®ƒä»¬æŠ±åœ¨ä¸€èµ·ï¼Œæˆ–è€…å¹²è„†æŠŠçŒ«ç”»åˆ°äº†å¤©ä¸Šã€‚</p>
<p>è¿™ç§â€œæ„å›¾é æŠ½å¡â€çš„ç„å­¦æ—¶ä»£ï¼Œå¯èƒ½è¦è¢«å°çº¢ä¹¦AIå›¢é˜Ÿå’Œå¤æ—¦å¤§å­¦è”æ‰‹ç»ˆç»“äº†ã€‚</p>
<p>å°±åœ¨æœ€è¿‘ï¼Œä¸€é¡¹åä¸º <strong>InstanceAssemble</strong> çš„æŠ€æœ¯è¢«é¡¶ä¼š NeurIPS 2025 æ”¶å½•ï¼Œå¹¶ç›´æ¥åœ¨ GitHub ä¸Šå¼€æºã€‚ç®€å•æ¥è¯´ï¼Œå®ƒç»™ AI è£…ä¸Šäº†ä¸€ä¸ªç²¾å‡†çš„â€œç©ºé—´å¯¼èˆªä»ªâ€ï¼Œè®©æ–‡ç”Ÿå›¾ä»â€œç›²ç›’æ¨¡å¼â€è¿›åŒ–åˆ°äº†â€œç²¾å‡†æ–½å·¥â€é˜¶æ®µã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fgsdgfgfd-1024x490.jpg" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/gsdgfgfd-1024x490.jpg" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2b82fa5d3224175bc25c04c6650fb3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767435290&amp;x-signature=lsa8vFZT9S0vtVIKpbCTvalsgR4%3D" alt="gsdgfgfd" loading="lazy"/></a></p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆç°åœ¨çš„ AI æ€»æ˜¯ä¸å¬æŒ‡æŒ¥ï¼Ÿ</h2>
<p>ç›®å‰çš„é¡¶æµæ¨¡å‹ï¼Œæ— è®ºæ˜¯ Stable Diffusion è¿˜æ˜¯ Fluxï¼Œåœ¨å¤„ç†â€œç©ºé—´å¸ƒå±€â€æ—¶éƒ½æœ‰ä¸ªé€šç—…ï¼šå®ƒä»¬æ›´æ“…é•¿ç†è§£ç”»é¢çš„æ•´ä½“æ°›å›´ï¼Œå´å¾ˆéš¾ç†è§£å…·ä½“çš„ç©ºé—´æŒ‡ä»¤ã€‚</p>
<p>å½“ä½ è¾“å…¥â€œå·¦è¾¹æ”¾ä¸ªè‹¹æœï¼Œå³è¾¹æ”¾ä¸ªé¦™è•‰â€ï¼ŒAI å¤„ç†æ—¶å¾€å¾€æ˜¯ä¸€è‚¡è„‘åœ°æŠŠè¯­ä¹‰æ··åˆåœ¨ä¸€èµ·ã€‚è¿™å°±å¯¼è‡´äº†ä¸šç•Œè‘—åçš„â€œè¯­ä¹‰æ³„æ¼â€é—®é¢˜â€”â€”æ¯”å¦‚æŠŠé¦™è•‰ç”»æˆäº†çº¢è‰²ï¼Œæˆ–è€…ä¸¤ä¸ªç‰©ä½“çš„ä½ç½®å®Œå…¨é”™ä¹±ã€‚ä¸€æ—¦ç”»é¢é‡Œçš„ç‰©ä½“è¶…è¿‡ä¸¤ä¸‰ä¸ªï¼ŒAI åŸºæœ¬å°±å¼€å§‹èƒ¡ä¹±å‘æŒ¥äº†ã€‚</p>
<h2 data-id="heading-1">InstanceAssemble çš„è§£é¢˜æ€è·¯ï¼šåˆ†è€Œæ²»ä¹‹</h2>
<p>InstanceAssemble çš„æ ¸å¿ƒé€»è¾‘éå¸¸åƒæ˜¯ä¸€ä¸ªä¸¥è°¨çš„æ–½å·¥é˜Ÿã€‚å®ƒæŠ›å¼ƒäº†ä»¥å¾€é‚£ç§â€œå¤§é”…ä¹±ç‚–â€çš„ç”Ÿæˆæ–¹å¼ï¼Œå¼•å…¥äº†ä¸€ç§è¢«ç§°ä¸º <strong>â€œå®ä¾‹ç»„è£…æ³¨æ„åŠ›ï¼ˆInstance Assembly Attentionï¼‰â€</strong> çš„æ–°æœºåˆ¶ã€‚</p>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºâ€œåˆ†åŒºåˆ†ç»„ç®¡ç†â€ï¼š</p>
<ol>
<li><strong>å…¨å±€æ§åœº</strong>ï¼šæ¨¡å‹å…ˆé€šè¿‡åŸºç¡€æ¶æ„ç”Ÿæˆç”»é¢çš„å¤§èƒŒæ™¯å’Œæ•´ä½“å…‰å½±æ°›å›´ã€‚</li>
<li><strong>å®šç‚¹ç»„è£…</strong>ï¼šå¯¹äºä½ æŒ‡å®šçš„æ¯ä¸€ä¸ªç‰©ä½“ï¼ˆæ¯”å¦‚æ²™å‘ã€å°ç¯ã€æŒ‚ç”»ï¼‰ï¼ŒæŠ€æœ¯ä¼šé”å®šå®ƒä»¬å„è‡ªçš„åæ ‡åŒºåŸŸï¼ˆBounding Boxï¼‰ã€‚</li>
<li><strong>ç‹¬ç«‹è®¡ç®—</strong>ï¼šæœ€ç»çš„ä¸€ç‚¹åœ¨äºï¼Œæ¯ä¸ªç‰©ä½“çš„æ³¨æ„åŠ›è®¡ç®—è¢«ä¸¥æ ¼é™åˆ¶åœ¨è‡ªå·±çš„â€œåœ°ç›˜â€é‡Œã€‚ç”»æ²™å‘æ—¶ï¼ŒAI ç»ä¸çœ‹æ—è¾¹çš„å°ç¯ä¸€çœ¼ã€‚</li>
</ol>
<p>è¿™ç§æœºåˆ¶å®Œç¾è§£å†³äº†ç‰©ä½“ä¹‹é—´çš„å¹²æ‰°é—®é¢˜ã€‚å“ªæ€•æ˜¯é¢å¯¹é‚£ç§åŒ…å«äºŒä¸‰åä¸ªç‰©ä½“çš„è¶…å¤æ‚å®¤å†…è®¾è®¡å›¾ï¼Œå®ƒä¹Ÿèƒ½ä¿è¯æ¯ä¸ªç‰©ä½“éƒ½åœ¨å®ƒè¯¥åœ¨çš„åœ°æ–¹ï¼Œé•¿æˆå®ƒè¯¥æœ‰çš„æ ·å­ã€‚</p>
<h2 data-id="heading-2">æƒŠäººçš„â€œè½»é‡åŒ–â€æ•°æ®</h2>
<p>é€šå¸¸æåˆ°è¿™ç§ç²¾ç»†æ§åˆ¶ï¼Œå¤§å®¶çš„ç¬¬ä¸€ååº”æ˜¯ï¼šè¿™å¾—æ¶ˆè€—å¤šå¤§çš„ç®—åŠ›ï¼Ÿæ¨¡å‹å¾—é‡è®­å¤šä¹…ï¼Ÿ</p>
<p>InstanceAssemble ç»™å‡ºçš„ç­”æ¡ˆè®©äººç›¸å½“æ„å¤–ã€‚å®ƒé‡‡ç”¨äº† LoRAï¼ˆä½ç§©é€‚é…ï¼‰æ–¹æ¡ˆï¼Œå¹¶ä¸éœ€è¦é‡æ–°è®­ç»ƒé‚£ä¸ªåºå¤§çš„åº•æ¨¡ã€‚</p>
<p>çœ‹çœ‹è¿™ç»„æ•°æ®ï¼š</p>
<ul>
<li>é€‚é… <strong>Stable Diffusion 3-Medium</strong>ï¼šåªéœ€å¢åŠ çº¦ <strong>3.46%</strong> çš„å‚æ•°é‡ã€‚</li>
<li>é€‚é…æœ€æ–°çš„ <strong>Flux.1</strong>ï¼šé¢å¤–å‚æ•°é‡ç”šè‡³ä½è‡³ <strong>0.84%</strong>ã€‚</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼Œä½ ä¸éœ€è¦ä¸ºäº†è¿™å°±æ¢ä¸€å¼ 4090æ˜¾å¡ï¼Œä¹Ÿä¸éœ€è¦ä¸‹è½½å‡ ç™¾ä¸ªGçš„æ–°æ¨¡å‹ï¼Œä»…ä»…é€šè¿‡å¤–æŒ‚ä¸€ä¸ªæè½»é‡çš„æ¨¡å—ï¼Œå°±èƒ½è®©å½“çº¢ç‚¸å­é¸¡ Flux æ‹¥æœ‰é¡¶çº§çš„å¸ƒå±€æ§åˆ¶èƒ½åŠ›ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fsadasfsd.jpg" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/sadasfsd.jpg" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b759a4cd8384788bf23020b11cbc4b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767435290&amp;x-signature=eLLN4O2%2FND6Bdmb9F64iC%2BDNG%2BU%3D" alt="sadasfsd" loading="lazy"/></a></p>
<h2 data-id="heading-3">å®æˆ˜æ•ˆæœå¦‚ä½•ï¼Ÿ</h2>
<p>ä¸ºäº†éªŒè¯è¿™ä¸œè¥¿åˆ°åº•è¡Œä¸è¡Œï¼Œå›¢é˜Ÿç”šè‡³ä¸“é—¨æäº†ä¸ªé«˜éš¾åº¦çš„æµ‹è¯•é›† <strong>DenseLayout</strong>ï¼Œé‡Œé¢å¡æ»¡äº†å¯†å¯†éº»éº»çš„ç‰©ä½“å¸ƒå±€ã€‚</p>
<p>æµ‹è¯•ç»“æœæ˜¾ç¤ºï¼Œåœ¨å¤„ç†åŒ…å«10ä¸ªä»¥ä¸Šç‰©ä½“çš„â€œåœ°ç‹±çº§â€æ„å›¾æ—¶ï¼Œç°æœ‰çš„å¤§éƒ¨åˆ†ä¸»æµæ–¹æ³•ï¼ˆå¦‚ ControlNet æˆ– GLIGENï¼‰æ€§èƒ½éƒ½ä¼šå‡ºç°æ–­å´–å¼ä¸‹è·Œï¼Œåªæœ‰ InstanceAssemble ä¾ç„¶ç¨³å¾—ä½ã€‚å®ƒçš„å¸ƒå±€å¯¹é½å‡†ç¡®ç‡æ¯”ç°æœ‰åŸºçº¿æ–¹æ³•æå‡äº†æ•´æ•´ä¸€æˆªã€‚</p>
<p>æ›´å…·å®ç”¨ä»·å€¼çš„æ˜¯ï¼Œç”±äºå®ƒè®­ç»ƒæ—¶å¹¶æ²¡æœ‰è§è¿‡é‚£ä¹ˆå¯†é›†çš„å¸ƒå±€ï¼Œä½†æµ‹è¯•æ—¶å´èƒ½å®Œç¾æ³›åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å“ªæ€•ç»™å®ƒä¸€ä¸ªä»æœªè§è¿‡çš„å¤æ‚å¹¿å‘Šæ’ç‰ˆï¼Œå®ƒä¹Ÿèƒ½ä¾æ ·ç”»è‘«èŠ¦åœ°ç”Ÿæˆå‡ºæ¥ã€‚</p>
<h2 data-id="heading-4">å†™åœ¨æœ€å</h2>
<p>InstanceAssemble çš„å‡ºç°ï¼Œå¯¹äºè®¾è®¡è¡Œä¸šæ¥è¯´æ˜¯ä¸ªæå¤§çš„åˆ©å¥½ã€‚</p>
<p>ä»¥å‰è®¾è®¡å¸ˆç”¨ AI åšæµ·æŠ¥ï¼Œæœ€å¤´ç–¼çš„å°±æ˜¯æ²¡æ³•æ§åˆ¶äº§å“å›¾çš„ä½ç½®ï¼Œå¾€å¾€éœ€è¦ç”Ÿæˆå‡ ç™¾å¼ å›¾å†åæœŸ PS åˆæˆã€‚ç°åœ¨ï¼Œä½ åªéœ€è¦ç”»å¥½å‡ ä¸ªæ¡†ï¼Œå‘Šè¯‰ AI è¿™é‡Œæ”¾é¦™æ°´ã€é‚£é‡Œæ”¾èŠ±ç“£ï¼Œä¸€å¼ ç¬¦åˆæ’ç‰ˆè§„èŒƒçš„é«˜è´¨é‡å•†ä¸šå›¾å°±å‡ºæ¥äº†ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-27_18.04.51.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-27_18.04.51.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa63b753c2f94e7a83db0a9324540cfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767435290&amp;x-signature=VfG2W3MzdcVDelyuElglgSFqiK8%3D" alt="iShot_2025-12-27_18.04.51" loading="lazy"/></a></p>
<p>ç›®å‰ï¼Œè¯¥é¡¹ç›®çš„ä»£ç å’Œé¢„è®­ç»ƒæ¨¡å‹å·²ç»å…¨éƒ¨åœ¨ GitHub ä¸Šå¼€æºã€‚å¯¹äºæƒ³è¦åœ¨å¹¿å‘Šè®¾è®¡ã€æ¸¸æˆç¾æœ¯æˆ–è€…ç”µå•†ç´ æç”Ÿæˆé¢†åŸŸåº”ç”¨ AI çš„å¼€å‘è€…å’Œåˆ›ä½œè€…æ¥è¯´ï¼Œè¿™ç»å¯¹æ˜¯ä¸€ä¸ªå€¼å¾—ç«‹åˆ»ä¸Šæ‰‹å°è¯•çš„å·¥å…·ã€‚</p>
<p>AI ç»˜ç”»ï¼Œæ­£åœ¨ä»â€œç©å…·â€å‘â€œå·¥å…·â€è¿ˆå‡ºåšå®çš„ä¸€æ­¥ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜: â€œ è¯´ä¸€ä¸‹ JS ä¸­ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ ? â€]]></title>    <link>https://juejin.cn/post/7588043318358949923</link>    <guid>https://juejin.cn/post/7588043318358949923</guid>    <pubDate>2025-12-27T09:36:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588043318358949923" data-draft-id="7588004376867504163" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜: â€œ è¯´ä¸€ä¸‹ JS ä¸­ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ ? â€"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-27T09:36:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒå¯»girling"/> <meta itemprop="url" content="https://juejin.cn/user/2276467567770442"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜: â€œ è¯´ä¸€ä¸‹ JS ä¸­ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ ? â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2276467567770442/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒå¯»girling
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T09:36:27.000Z" title="Sat Dec 27 2025 09:36:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JS ä¸­çš„äº‹ä»¶å¾ªç¯åŸç†ä»¥åŠå¼‚æ­¥æ‰§è¡Œè¿‡ç¨‹</h2>
<p>è¿™äº›çŸ¥è¯†ç‚¹å¯¹æ–°æ‰‹æ¥è¯´å¯èƒ½æœ‰ç‚¹éš¾ï¼Œä½†æ˜¯æ˜¯å¿…é¡»è¿ˆè¿‡çš„åï¼Œé€ƒé¿æ˜¯è§£å†³ä¸äº†é—®é¢˜çš„ï¼Œæœ¬ç¯‡æ–‡ç« æ—¨åœ¨å¸®ä½ å½»åº•ææ‡‚å®ƒä»¬ã€‚</p>
<hr/>
<h2 data-id="heading-1">1. JS æ˜¯å•çº¿ç¨‹çš„</h2>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ JS æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ï¼ˆåŸå› ï¼šæˆ‘ä»¬ä¸æƒ³å¹¶è¡Œåœ°æ“ä½œ DOMï¼ŒDOM æ ‘ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœå¤šçº¿ç¨‹ï¼Œé‚£ä¼šé€ æˆå†²çªï¼‰ã€‚</p>
<p>è¿™é‡Œå°è¯´æ˜ä¸€ä¸‹ï¼šV8 æ˜¯è°·æ­Œæµè§ˆå™¨çš„ JS æ‰§è¡Œå¼•æ“ï¼Œåœ¨è¿è¡Œ JS ä»£ç çš„æ—¶å€™ï¼Œæ˜¯ä»¥å‡½æ•°ä½œä¸ºä¸€ä¸ªä¸ªå¸§ï¼ˆä¿å­˜å½“å‰å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒï¼‰æŒ‰ä»£ç çš„æ‰§è¡Œé¡ºåºå‹å…¥æ‰§è¡Œæ ˆï¼ˆcall stackï¼‰ä¸­ï¼Œæ ˆé¡¶çš„å‡½æ•°å…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œæ¯•åå¼¹å‡ºå†æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ã€‚å…¶ä¸­å †æ˜¯ç”¨æ¥å­˜æ”¾å„ç§ JS å¯¹è±¡çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d84e209dca5f4171b1495763de9775ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=moHdlTyTSPHdOW%2BsgweuZUL4kA0%3D" alt="image.png" loading="lazy"/></p>
<p>å‡è®¾æµè§ˆå™¨å°±æ˜¯ä¸Šå›¾çš„è¿™ç§ç»“æ„çš„è¯ï¼Œæ‰§è¡ŒåŒæ­¥ä»£ç æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ï¼Œå¦‚ä¸‹</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">foo</span>() {
    <span class="hljs-built_in">bar</span>()
    console<span class="hljs-selector-class">.log</span>('foo')
}
function <span class="hljs-built_in">bar</span>() {
    <span class="hljs-built_in">baz</span>()
    console<span class="hljs-selector-class">.log</span>('bar')
}
function <span class="hljs-built_in">baz</span>() {
    console<span class="hljs-selector-class">.log</span>('baz')
}

<span class="hljs-built_in">foo</span>()
</code></pre>
<p>æˆ‘ä»¬å®šä¹‰äº†Â <code>foo</code>ã€<code>bar</code>ã€<code>baz</code>Â ä¸‰ä¸ªå‡½æ•°ï¼Œç„¶åè°ƒç”¨Â <code>foo</code>Â å‡½æ•°ï¼Œæ§åˆ¶å°è¾“å‡ºçš„ç»“æœä¸ºï¼š</p>
<pre><code class="hljs">baz
bar
foo
</code></pre>
<p>æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä¸€ä¸ªå…¨å±€åŒ¿åå‡½æ•°æœ€å…ˆæ‰§è¡Œï¼ˆJS çš„å…¨å±€æ‰§è¡Œå…¥å£ï¼Œä¹‹åçš„ä¾‹å­å°†å¿½ç•¥ï¼‰ï¼Œé‡åˆ°Â <code>foo</code>Â å‡½æ•°è¢«è°ƒç”¨ï¼Œå°†Â <code>foo</code>Â å‡½æ•°å‹å…¥æ‰§è¡Œæ ˆã€‚</li>
<li>æ‰§è¡ŒÂ <code>foo</code>Â å‡½æ•°ï¼Œå‘ç°Â <code>foo</code>Â å‡½æ•°ä½“ä¸­è°ƒç”¨äº†Â <code>bar</code>Â å‡½æ•°ï¼Œåˆ™å°†Â <code>bar</code>Â å‡½æ•°å‹å…¥æ‰§è¡Œæ ˆã€‚</li>
<li>æ‰§è¡ŒÂ <code>bar</code>Â å‡½æ•°ï¼Œå‘ç°Â <code>bar</code>Â å‡½æ•°ä½“ä¸­è°ƒç”¨äº†Â <code>baz</code>Â å‡½æ•°ï¼Œåˆå°†Â <code>baz</code>Â å‡½æ•°å‹å…¥æ‰§è¡Œæ ˆã€‚</li>
<li>æ‰§è¡ŒÂ <code>baz</code>Â å‡½æ•°ï¼Œå‡½æ•°ä½“ä¸­åªæœ‰ä¸€æ¡è¯­å¥Â <code>console.log('baz')</code>ï¼Œæ‰§è¡Œï¼Œåœ¨æ§åˆ¶å°æ‰“å°ï¼š<code>baz</code>ï¼Œç„¶åÂ <code>baz</code>Â å‡½æ•°æ‰§è¡Œå®Œæ¯•å¼¹å‡ºæ‰§è¡Œæ ˆã€‚</li>
<li>æ­¤æ—¶çš„æ ˆé¡¶ä¸ºÂ <code>bar</code>Â å‡½æ•°ï¼Œ<code>bar</code>Â å‡½æ•°ä½“ä¸­çš„Â <code>baz()</code>Â è¯­å¥å·²ç»æ‰§è¡Œå®Œï¼Œæ¥ç€æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥ï¼ˆ<code>console.log('bar')</code>ï¼‰ï¼Œåœ¨æ§åˆ¶å°æ‰“å°ï¼š<code>bar</code>ï¼Œç„¶åÂ <code>bar</code>Â å‡½æ•°æ‰§è¡Œå®Œæ¯•å¼¹å‡ºæ‰§è¡Œæ ˆã€‚</li>
<li>æ­¤æ—¶çš„æ ˆé¡¶ä¸ºÂ <code>foo</code>Â å‡½æ•°ï¼Œ<code>foo</code>Â å‡½æ•°ä½“ä¸­çš„Â <code>bar()</code>Â è¯­å¥å·²ç»æ‰§è¡Œå®Œï¼Œæ¥ç€æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥ï¼ˆ<code>console.log('foo')</code>ï¼‰ï¼Œåœ¨æ§åˆ¶å°æ‰“å°ï¼š<code>foo</code>ï¼Œç„¶åÂ <code>foo</code>Â å‡½æ•°æ‰§è¡Œå®Œæ¯•å¼¹å‡ºæ‰§è¡Œæ ˆã€‚</li>
<li>è‡³æ­¤ï¼Œæ‰§è¡Œæ ˆä¸ºç©ºï¼Œè¿™ä¸€è½®æ‰§è¡Œå®Œæ¯•ã€‚</li>
</ol>
<h4 data-id="heading-2">åŠ¨å›¾å±•ç¤º</h4>
<p><strong>è¿˜æ˜¯å›¾ç›´è§‚ç‚¹ï¼Œä»¥ä¸Šæ­¥éª¤å¯¹åº”çš„æ‰§è¡Œæµç¨‹å›¾å¦‚ä¸‹ï¼š</strong></p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7babfceef98c4350854b9009daac673f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=xETmIWfBdx16y%2FGxFpfDIajXjgk%3D" alt="fc266fc5ceece50a1622961cf201eec5.gif" width="100%" loading="lazy"/>
<p><strong>éåŠ¨å›¾</strong> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4563ea7eca1e4c9c9c8150cbbb808191~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=OqHzjLatjxwHMU%2BGsUCvsojpNsA%3D" alt="image.png" width="100%" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">2. äº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰</h2>
<ul>
<li>
<p>äº‹ä»¶å¾ªç¯ï¼šJS å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„æœºåˆ¶ï¼Œå› å•çº¿ç¨‹ç‰¹æ€§ï¼Œé€šè¿‡å¾ªç¯è¯»å–ä»»åŠ¡é˜Ÿåˆ—å®ç°éé˜»å¡ã€‚</p>
</li>
<li>
<p>è¿‡ç¨‹ï¼š</p>
<ol>
<li>æ‰§è¡ŒåŒæ­¥ä»£ç ï¼ˆè°ƒç”¨æ ˆæ¸…ç©ºï¼‰ã€‚</li>
<li>æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆ<code>Promise</code>å›è°ƒç­‰ï¼‰ï¼Œç›´åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºã€‚</li>
<li>æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆ<code>setTimeout</code>ç­‰ï¼‰ï¼Œç„¶åå›åˆ°æ­¥éª¤ 2ï¼Œå¾ªç¯å¾€å¤ã€‚</li>
</ol>
</li>
</ul>
<p>æˆ‘ä»¬æ”¹å˜ä¸€ä¸‹ä»£ç  1ï¼Œ
å¦‚ä¸‹æ˜¯ä»£ç  2ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">foo</span>() {
    <span class="hljs-built_in">bar</span>()
    console<span class="hljs-selector-class">.log</span>('foo')
}
function <span class="hljs-built_in">bar</span>() {
    <span class="hljs-built_in">baz</span>()
    console<span class="hljs-selector-class">.log</span>('bar')
}
function <span class="hljs-built_in">baz</span>() { 
    <span class="hljs-built_in">setTimeout</span>(() =&gt; {
        console<span class="hljs-selector-class">.log</span>('setTimeout: <span class="hljs-number">2s</span>')
    }, <span class="hljs-number">2000</span>)
    console<span class="hljs-selector-class">.log</span>('baz') 
}

<span class="hljs-built_in">foo</span>()
</code></pre>
<p>æ ¹æ® 1 ä¸­çš„å‡è®¾ï¼Œæµè§ˆå™¨åªç”±ä¸€ä¸ª JS å¼•æ“æ„æˆçš„è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ä»£ç å¿…ç„¶åŒæ­¥æ‰§è¡Œï¼ˆå› ä¸º JS æ‰§è¡Œæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥å½“å‰æ ˆé¡¶å‡½æ•°ä¸ç®¡æ‰§è¡Œæ—¶é—´éœ€è¦å¤šä¹…ï¼Œæ‰§è¡Œæ ˆä¸­è¯¥å‡½æ•°ä¸‹é¢çš„å…¶ä»–å‡½æ•°å¿…é¡»ç­‰å®ƒæ‰§è¡Œå®Œå¼¹å‡ºåæ‰èƒ½æ‰§è¡Œï¼ˆè¿™å°±æ˜¯ä»£ç è¢«é˜»å¡çš„æ„æ€ï¼‰ï¼‰ï¼Œæ‰§è¡Œåˆ°Â <code>baz</code>Â å‡½æ•°ä½“ä¸­çš„Â <code>setTimeout</code>Â æ—¶åº”è¯¥ç­‰ 2 ç§’ï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å‡ºÂ <code>setTimeout: 2s</code>ï¼Œç„¶åå†è¾“å‡ºï¼š<code>baz</code>ã€‚æ‰€ä»¥æˆ‘ä»¬æœŸæœ›çš„è¾“å‡ºé¡ºåºåº”è¯¥æ˜¯ï¼š<code>setTimeout: 2s -&gt; baz -&gt; bar -&gt; foo</code>ï¼ˆè¿™æ˜¯é”™çš„ï¼‰ã€‚</p>
<p>æµè§ˆå™¨å¦‚æœçœŸè¿™æ ·è®¾è®¡çš„è¯ï¼Œè‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ï¼é‡åˆ° AJAX è¯·æ±‚ã€<code>setTimeout</code>Â ç­‰æ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ—¶ï¼Œæˆ‘ä»¬é¡µé¢éœ€è¦é•¿æ—¶é—´ç­‰å¾…ï¼Œå°±è¢«é˜»å¡ä½å•¥ä¹Ÿå¹²ä¸äº†ï¼Œå‡ºç°äº†é¡µé¢ â€œå‡æ­»â€ï¼Œè¿™æ ·ç»å¯¹ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</p>
<p>å®é™…å½“ç„¶å¹¶éæˆ‘ä»¥ä¸ºçš„é‚£æ ·ï¼Œè¿™é‡Œå…ˆé‡ç‚¹æé†’ä¸€ä¸‹ï¼š<strong>JS æ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™ä¸€ç‚¹ä¹Ÿæ²¡é”™ï¼Œä½†æ˜¯æµè§ˆå™¨ä¸­å¹¶ä¸ä»…ä»…åªæ˜¯ç”±ä¸€ä¸ª JS å¼•æ“æ„æˆï¼Œå®ƒè¿˜åŒ…æ‹¬å…¶ä»–çš„ä¸€äº›çº¿ç¨‹æ¥å¤„ç†åˆ«çš„äº‹æƒ…</strong>ã€‚å¦‚ä¸‹å›¾ !</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27284cf6e7584462a975b02db3927614~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=ABAeyN2SPdhMnXATooMLIHiYYds%3D" alt="image.png" width="100%" loading="lazy"/>
<p>æµè§ˆå™¨é™¤äº† JS å¼•æ“ï¼ˆJS æ‰§è¡Œçº¿ç¨‹ï¼Œåé¢æˆ‘ä»¬åªå…³æ³¨ JS å¼•æ“ä¸­çš„æ‰§è¡Œæ ˆï¼‰ä»¥å¤–ï¼Œè¿˜æœ‰ Web APIsï¼ˆæµè§ˆå™¨æä¾›çš„æ¥å£ï¼Œè¿™æ˜¯åœ¨ JS å¼•æ“ä»¥å¤–çš„ï¼‰çº¿ç¨‹ã€GUI æ¸²æŸ“çº¿ç¨‹ç­‰ã€‚JS å¼•æ“åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°ç›¸å…³çš„äº‹ä»¶ï¼ˆDOM æ“ä½œã€é¼ æ ‡ç‚¹å‡»äº‹ä»¶ã€æ»šè½®äº‹ä»¶ã€AJAX è¯·æ±‚ã€<code>setTimeout</code>Â ç­‰ï¼‰ï¼Œå¹¶ä¸ä¼šå› æ­¤é˜»å¡ï¼Œå®ƒä¼šå°†è¿™äº›äº‹ä»¶ç§»äº¤ç»™ Web APIs çº¿ç¨‹å¤„ç†ï¼Œè€Œè‡ªå·±åˆ™æ¥ç€å¾€ä¸‹æ‰§è¡Œã€‚Web APIs åˆ™ä¼šæŒ‰ç…§ä¸€å®šçš„è§„åˆ™å°†è¿™äº›äº‹ä»¶æ”¾å…¥ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼ˆcallback queueï¼Œä¹Ÿå« task queueï¼‰ä¸­ï¼Œå½“ JS æ‰§è¡Œæ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œå®ƒå°±ä¼šå»ä»»åŠ¡é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªäº‹ä»¶å›è°ƒæ”¾å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œç„¶åå¦‚æ­¤å¾€å¤ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚</p>





























<table><thead><tr><th>çº¿ç¨‹å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>JS å¼•æ“çº¿ç¨‹</strong></td><td>ä¹Ÿç§°ä¸º JS å†…æ ¸ï¼Œè´Ÿè´£å¤„ç† JavaScript è„šæœ¬ã€‚ï¼ˆä¾‹å¦‚ V8 å¼•æ“ï¼‰<strong>â‘ </strong>è´Ÿè´£è§£æ JS è„šæœ¬ï¼Œè¿è¡Œä»£ç ã€‚<strong>â‘¡</strong>ä¸€ç›´ç­‰å¾…ç€ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶ååŠ ä»¥å¤„ç†ã€‚<strong>â‘¢</strong>ä¸€ä¸ª Tab é¡µï¼ˆrenderer è¿›ç¨‹ï¼‰ä¸­æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½åªæœ‰ä¸€ä¸ª JS çº¿ç¨‹è¿è¡Œ JS ç¨‹åºã€‚</td></tr><tr><td><strong>äº‹ä»¶è§¦å‘çº¿ç¨‹</strong></td><td>å½’å±äºæ¸²æŸ“è¿›ç¨‹è€Œä¸æ˜¯ JS å¼•æ“ï¼Œç”¨æ¥æ§åˆ¶äº‹ä»¶å¾ªç¯ã€‚<strong>â‘ </strong>å½“ JS å¼•æ“æ‰§è¡Œä»£ç å—å¦‚<code>setTimeout</code>æ—¶ï¼ˆä¹Ÿå¯æ¥è‡ªæµè§ˆå™¨å†…æ ¸çš„å…¶ä»–çº¿ç¨‹ï¼Œå¦‚é¼ æ ‡ç‚¹å‡»ã€Ajax å¼‚æ­¥è¯·æ±‚ç­‰ï¼‰ï¼Œä¼šå°†å¯¹åº”ä»»åŠ¡æ·»åŠ åˆ°äº‹ä»¶çº¿ç¨‹ä¸­ã€‚<strong>â‘¡</strong>å½“å¯¹åº”çš„äº‹ä»¶ç¬¦åˆè§¦å‘æ¡ä»¶è¢«è§¦å‘æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šæŠŠäº‹ä»¶æ·»åŠ åˆ°å¾…å¤„ç†é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾… JS å¼•æ“çš„å¤„ç†ã€‚                                                                                 <strong>æ³¨æ„</strong>ï¼šç”±äº JS çš„å•çº¿ç¨‹å…³ç³»ï¼Œæ‰€ä»¥è¿™äº›å¾…å¤„ç†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶éƒ½æ˜¯æ’é˜Ÿç­‰å¾… JS å¼•æ“å¤„ç†ï¼ŒJS å¼•æ“ç©ºé—²æ—¶æ‰ä¼šæ‰§è¡Œã€‚</td></tr><tr><td><strong>å®šæ—¶è§¦å‘å™¨çº¿ç¨‹</strong></td><td><code>setInterval</code>å’Œ<code>setTimeout</code>æ‰€åœ¨çš„çº¿ç¨‹ã€‚<strong>â‘ </strong>æµè§ˆå™¨å®šæ—¶è®¡æ•°å™¨å¹¶ä¸æ˜¯ç”± JS å¼•æ“è®¡æ•°çš„ã€‚<strong>â‘¡</strong>JS å¼•æ“æ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœå¤„äºé˜»å¡çº¿ç¨‹çŠ¶æ€å°±ä¼šå½±å“è®¡æ—¶çš„å‡†ç¡®ï¼Œå› æ­¤ï¼Œé€šè¿‡å•ç‹¬çš„çº¿ç¨‹æ¥è®¡æ—¶å¹¶è§¦å‘å®šæ—¶ã€‚<strong>â‘¢</strong>è®¡æ—¶å®Œæ¯•åï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾… JS å¼•æ“ç©ºé—²åæ‰§è¡Œã€‚<strong>æ³¨æ„</strong>ï¼šW3C åœ¨ HTML æ ‡å‡†ä¸­è§„å®šï¼Œ<code>setTimeout</code>ä¸­ä½äº 4ms çš„æ—¶é—´é—´éš”ç®—ä¸º 4msã€‚</td></tr><tr><td><strong>å¼‚æ­¥ HTTP è¯·æ±‚çº¿ç¨‹</strong></td><td><code>XMLHttpRequest</code>åœ¨è¿æ¥åé€šè¿‡æµè§ˆå™¨æ–°å¼€ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚ã€‚å½“æ£€æµ‹åˆ°çŠ¶æ€å˜æ›´æ—¶ï¼Œå¦‚æœè®¾ç½®æœ‰å›è°ƒå‡½æ•°ï¼Œå¼‚æ­¥çº¿ç¨‹å°±äº§ç”ŸçŠ¶æ€å˜æ›´äº‹ä»¶ï¼Œå°†è¿™ä¸ªå›è°ƒæ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œå†ç”± JS å¼•æ“æ‰§è¡Œã€‚</td></tr><tr><td><strong>GUI æ¸²æŸ“çº¿ç¨‹</strong></td><td>è´Ÿè´£æ¸²æŸ“æµè§ˆå™¨ç•Œé¢ï¼ŒåŒ…æ‹¬ï¼š<strong>â‘ </strong>è§£æ HTMLã€CSSï¼Œæ„å»º DOM æ ‘å’Œ RenderObject æ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ç­‰ã€‚<strong>â‘¡</strong>é‡ç»˜ï¼ˆRepaintï¼‰ä»¥åŠå›æµï¼ˆReflowï¼‰å¤„ç†ã€‚</td></tr></tbody></table>
<p>è¿™é‡Œè®©æˆ‘ä»¬å¯¹äº‹ä»¶å¾ªç¯å…ˆæ¥åšä¸ª<strong>å°æ€»ç»“</strong>ï¼š</p>
<ol>
<li>JSçº¿ç¨‹è´Ÿè´£å¤„ç†JSä»£ç ï¼Œå½“é‡åˆ°ä¸€äº›<strong>å¼‚æ­¥æ“ä½œ</strong>çš„æ—¶å€™ï¼Œåˆ™å°†è¿™äº›<strong>å¼‚æ­¥äº‹ä»¶ç§»äº¤ç»™Web APIs å¤„ç†</strong>ï¼Œè‡ªå·±åˆ™ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚</li>
<li>Web APIsçº¿ç¨‹å°†æ¥æ”¶åˆ°çš„äº‹ä»¶æŒ‰ç…§ä¸€å®šè§„åˆ™æŒ‰é¡ºåº<strong>æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—</strong>ä¸­ï¼ˆåº”è¯¥æ˜¯æ·»åŠ åˆ°ä»»åŠ¡é›†åˆä¸­çš„å„ä¸ªäº‹ä»¶é˜Ÿåˆ—ä¸­ï¼‰ã€‚</li>
<li>JSçº¿ç¨‹<strong>å¤„ç†å®Œå½“å‰çš„æ‰€æœ‰ä»»åŠ¡ä»¥å</strong>ï¼ˆæ‰§è¡Œæ ˆä¸ºç©ºï¼‰ï¼Œå®ƒä¼šå»æŸ¥çœ‹ä»»åŠ¡é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ç­‰å¾…è¢«å¤„ç†çš„äº‹ä»¶ï¼Œè‹¥æœ‰ï¼Œåˆ™<strong>å–å‡ºä¸€ä¸ªäº‹ä»¶å›è°ƒæ”¾å…¥æ‰§è¡Œæ ˆ</strong>ä¸­æ‰§è¡Œã€‚</li>
<li>ç„¶åä¸æ–­å¾ªç¯ç¬¬3æ­¥ã€‚</li>
</ol>
<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹çœŸæ­£çš„æµè§ˆå™¨ä¸­æ‰§è¡Œæ˜¯ä»€ä¹ˆä¸ªæµç¨‹å§ï¼</p>
<h4 data-id="heading-4">åŠ¨å›¾å±•ç¤º</h4>
<p><strong>ç¬¬äºŒæ®µä»£ç </strong> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b59fc9945b1e4d41b4f7cdd7e982030c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=r%2BA2FvFKSJ4fg7dq813EQu8Vbo0%3D" alt="3.gif" width="100%" loading="lazy"/></p>
<p>ç»†å¿ƒçš„å°ä¼™ä¼´å¯èƒ½æœ‰å‘ç°Web APIåœ¨è®¡æ—¶å™¨æ—¶é—´åˆ°è¾¾åå°†åŒ¿åå›è°ƒå‡½æ•°æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­äº†ï¼Œè™½ç„¶å®šæ—¶å™¨æ—¶é—´å·²åˆ°ï¼Œä½†å®ƒç›®å‰å¹¶ä¸èƒ½æ‰§è¡Œï¼ï¼ï¼å› ä¸ºJSçš„æ‰§è¡Œæ ˆæ­¤æ—¶å¹¶éç©ºï¼Œå¿…é¡»è¦ç­‰åˆ°å½“å‰æ‰§è¡Œæ ˆä¸ºç©ºåæ‰æœ‰æœºä¼šè¢«å¬å›åˆ°æ‰§è¡Œæ ˆæ‰§è¡Œã€‚ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š<strong>setTimeoutè®¾ç½®çš„æ—¶é—´å…¶å®åªæ˜¯æœ€å°å»¶è¿Ÿæ—¶é—´</strong>ï¼Œè€Œå¹¶ä¸æ˜¯ç¡®åˆ‡çš„ç­‰å¾…æ—¶é—´ã€‚ï¼ˆ<strong>å½“ä¸»çº¿ç¨‹çš„ä»»åŠ¡è€—æ—¶æ¯”è¾ƒé•¿çš„æ—¶å€™ï¼Œç­‰å¾…æ—¶é—´å°†ä¼šå˜å¾—æ›´é•¿</strong>ï¼‰</p>
<hr/>
<h2 data-id="heading-5">3. äº‹ä»¶å¾ªç¯ï¼ˆè¿›é˜¶ï¼‰ä¸å¼‚æ­¥</h2>
<h3 data-id="heading-6">3.1 è¯•è¯•Â <code>setTimeout(fn, 0)</code></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'foo'</span>)
}

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout: 0s'</span>)
}, <span class="hljs-number">0</span>);

<span class="hljs-title function_">foo</span>();
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">foo
setTimeout: <span class="hljs-number">0</span>s
</code></pre>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9e31e9e87364ffeb0149d7f793b8255~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=U66NZMaWK72gkAc0QVNdVPO4tMk%3D" alt="4.gif" width="100%" loading="lazy"/>
<p>å³ä½¿Â <code>setTimeout</code>Â çš„å»¶æ—¶è®¾ç½®ä¸º 0ï¼ˆå®é™…ä¸Šæœ€å°å»¶æ—¶ &gt;= 4msï¼‰ï¼ŒJS æ‰§è¡Œæ ˆä¹Ÿå°†è¯¥å»¶æ—¶äº‹ä»¶å‘æ”¾ç»™ Web API å¤„ç†ï¼ŒWeb API å†å°†äº‹ä»¶æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰ JS æ‰§è¡Œæ ˆä¸ºç©ºæ—¶ï¼Œè¯¥å»¶æ—¶äº‹ä»¶å†å‹å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚</p>
<hr/>
<h3 data-id="heading-7">3.2 äº‹ä»¶å¾ªç¯ä¸­çš„ Promise</h3>
<p>å…¶å®ä»¥ä¸Šçš„æµè§ˆå™¨æ¨¡å‹æ˜¯ES5æ ‡å‡†çš„ï¼ŒES6+æ ‡å‡†ä¸­çš„ä»»åŠ¡é˜Ÿåˆ—åœ¨æ­¤åŸºç¡€ä¸Šæ–°å¢äº†ä¸€ç§ï¼Œå˜æˆäº†å¦‚ä¸‹ä¸¤ç§ï¼š</p>
<h4 data-id="heading-8">3.2.1 å®ä»»åŠ¡ / å¾®ä»»åŠ¡</h4>
<p>ç°åœ¨W3Cé‡æ–°å¯¹äº‹ä»¶å¾ªç¯è¿›è¡Œäº†å®šä¹‰,<strong>å–æ¶ˆäº†å®ä»»åŠ¡</strong>,å–è€Œä»£ä¹‹çš„æ˜¯<strong><strong>ä»»åŠ¡é˜Ÿåˆ—</strong></strong>,å¾®ä»»åŠ¡ä¾æ—§ä¿ç•™,ä¼˜å…ˆçº§ä¸ºæœ€é«˜ã€‚</p>
<blockquote>
<p>MDN å®˜ç½‘ : äº‹ä»¶å¾ªç¯ä¼šå°†ä½œä¸šåˆ†æˆä¸¤ç±»ï¼š <em>ä»»åŠ¡</em>å’Œ<em>å¾®ä»»åŠ¡</em>ã€‚å¾®ä»»åŠ¡å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œåœ¨ä»»åŠ¡é˜Ÿåˆ—è¢«æ‹‰å‡ºä¹‹å‰ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¼šå…ˆè¢«æ’ç©º</p>
</blockquote>
<blockquote>
<p><strong>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆmacrotask queueï¼‰</strong> ï¼š<strong>æ™®é€šä¼˜å…ˆçº§</strong>çš„ä»»åŠ¡ï¼Œé€šå¸¸åŒ…æ‹¬ï¼š</p>
</blockquote>
<ul>
<li><code>setTimeout</code>Â /Â <code>setInterval</code>Â /Â <code>setImmediate</code>ï¼ˆNode.jsï¼‰</li>
<li>I/O æ“ä½œï¼ˆæ–‡ä»¶è¯»å†™ã€Ajaxäº‹ä»¶ / ç½‘ç»œè¯·æ±‚ç­‰ï¼‰</li>
<li>UI æ¸²æŸ“äº‹ä»¶ (ç”¨æˆ·äº¤äº’äº‹ä»¶)</li>
<li>è„šæœ¬æ•´ä½“ä»£ç ï¼ˆç¬¬ä¸€æ¬¡æ‰§è¡Œçš„åŒæ­¥ä»£ç ï¼‰</li>
</ul>
<blockquote>
<p><strong>å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆmicrotask queueï¼‰</strong> ï¼š<strong>é«˜ä¼˜å…ˆçº§</strong>çš„ä»»åŠ¡ï¼Œé€šå¸¸åŒ…æ‹¬ï¼š</p>
</blockquote>
<ul>
<li><code>Promise.then</code>Â /Â <code>Promise.catch</code>Â /Â <code>Promise.finally</code></li>
<li><code>async/await</code>Â ä¸­Â <code>await</code>Â åé¢çš„ä»£ç ï¼ˆå…¶å®æ˜¯Â <code>.then</code>Â çš„è¯­æ³•ç³–ï¼‰</li>
<li><code>MutationObserver</code>ï¼ˆæµè§ˆå™¨ï¼‰</li>
<li><code>process.nextTick</code>ï¼ˆNode.jsï¼Œä¼˜å…ˆçº§æ¯”æ™®é€šå¾®ä»»åŠ¡æ›´é«˜ï¼‰</li>
</ul>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/759f9827e0974e309c1b75cd905f9aa1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=Z8FQRENJth1%2BKTUCGoKebYea4Vs%3D" alt="image.png" width="100%" loading="lazy"/>
<p>äº‹ä»¶å¾ªç¯çš„å¤„ç†æµç¨‹å˜æˆäº†å¦‚ä¸‹ï¼š</p>
<ol>
<li>JS çº¿ç¨‹è´Ÿè´£å¤„ç† JS ä»£ç ï¼Œå½“é‡åˆ°ä¸€äº›å¼‚æ­¥æ“ä½œçš„æ—¶å€™ï¼Œåˆ™å°†è¿™äº›å¼‚æ­¥äº‹ä»¶ç§»äº¤ç»™ Web APIs å¤„ç†ï¼Œè‡ªå·±åˆ™ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚</li>
<li>Web APIs çº¿ç¨‹å°†æ¥æ”¶åˆ°çš„äº‹ä»¶æŒ‰ç…§ä¸€å®šè§„åˆ™æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå®äº‹ä»¶æ·»åŠ åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¾®äº‹ä»¶æ·»åŠ åˆ°å¾®äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚</li>
<li>JS çº¿ç¨‹å¤„ç†å®Œå½“å‰çš„æ‰€æœ‰ä»»åŠ¡ä»¥åï¼ˆæ‰§è¡Œæ ˆä¸ºç©ºï¼‰ï¼Œå®ƒä¼šå…ˆå»å¾®ä»»åŠ¡é˜Ÿåˆ—è·å–äº‹ä»¶ï¼Œå¹¶å°†å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰äº‹ä»¶ä¸€ä»¶ä»¶æ‰§è¡Œå®Œæ¯•ï¼Œç›´åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºåå†å»å®ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªäº‹ä»¶æ‰§è¡Œã€‚</li>
<li>ç„¶åä¸æ–­å¾ªç¯ç¬¬ 3 æ­¥ã€‚</li>
</ol>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c60d076b81c941f19f0979fa938856cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=07nVSf%2Bw7l2PhsICMBIw3Uoc4nU%3D" alt="image.png" width="70%" loading="lazy"/>
<p>æ’ä¸€ä¸‹å…ˆåé¡ºåºï¼š <strong>æ‰§è¡Œæ ˆ --&gt; å¾®ä»»åŠ¡ --&gt; æ¸²æŸ“ --&gt; ä¸‹ä¸€ä¸ªå®ä»»åŠ¡</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-9">3.2.2 å•ç‹¬ä½¿ç”¨ Promise</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'foo'</span>)
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'global start'</span>)

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise'</span>)
    <span class="hljs-title function_">resolve</span>()
}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise then'</span>)
})

<span class="hljs-title function_">foo</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'global end'</span>)
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºçš„ç»“æœä¸ºï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">global</span> <span class="hljs-keyword">start</span>
promise
foo
<span class="hljs-keyword">global</span> <span class="hljs-keyword">end</span>
promise <span class="hljs-keyword">then</span>
</code></pre>
<p><strong>åŠ¨å›¾å±•ç¤º</strong></p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2715f43c9f1744ddbe61e23fbf1141ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=rum87u1ykYIV79iEis1KQ4IVMXA%3D" alt="5.gif" width="100%" loading="lazy"/>
<p><strong>ä»£ç æ‰§è¡Œè¿‡ç¨‹è§£æ(æ–‡å­—æè¿°)</strong></p>
<ol>
<li><strong>æ‰§è¡ŒåŒæ­¥ä»£ç </strong></li>
</ol>
<ul>
<li>æ‰§è¡ŒÂ <code>console.log('global start')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šglobal start</li>
</ul>
<ol start="2">
<li><strong>æ‰§è¡ŒÂ <code>new Promise(...)</code></strong></li>
</ol>
<ul>
<li>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨ä½¿ç”¨Â <code>new</code>Â å…³é”®å­—åˆ›å»ºÂ <code>Promise</code>Â å¯¹è±¡æ—¶ï¼Œä¼ é€’ç»™Â <code>Promise</code>Â çš„å‡½æ•°ç§°ä¸ºÂ <strong>executor</strong>ã€‚</p>
<ul>
<li>å½“Â <code>Promise</code>Â è¢«åˆ›å»ºæ—¶ï¼Œ<strong>executor å‡½æ•°ä¼šè‡ªåŠ¨åŒæ­¥æ‰§è¡Œ</strong>ã€‚</li>
<li><code>.then</code>Â é‡Œçš„å›è°ƒæ‰æ˜¯å¼‚æ­¥æ‰§è¡Œçš„éƒ¨åˆ†ã€‚</li>
</ul>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>Promise</code>Â å‚æ•°ä¸­çš„åŒ¿åå‡½æ•°ï¼ˆåŒæ­¥æ‰§è¡Œï¼‰ï¼š</p>
<ul>
<li>
<p>æ‰§è¡ŒÂ <code>console.log('promise')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼špromise</p>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>resolve()</code>ï¼Œå°†Â <code>Promise</code>Â çŠ¶æ€å˜ä¸ºÂ <code>resolved</code>ã€‚</p>
</li>
</ul>
</li>
<li>
<p>ç»§ç»­æ‰§è¡ŒÂ <code>.then(...)</code>ï¼š</p>
<ul>
<li>é‡åˆ°Â <code>.then</code>Â ä¼šå°†å›è°ƒæäº¤ç»™Â <strong>Web API</strong>Â å¤„ç†ã€‚</li>
<li>Web API å°†è¯¥å›è°ƒæ·»åŠ åˆ°Â <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼ˆæ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä¸€ä¸ª Promise äº‹ä»¶å¾…æ‰§è¡Œï¼‰ã€‚</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»£ç </strong></li>
</ol>
<ul>
<li>
<p>æ‰§è¡Œæ ˆåœ¨æäº¤å®Œ Promise äº‹ä»¶åï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼š</p>
<ul>
<li>
<p>æ‰§è¡ŒÂ <code>foo()</code>Â å‡½æ•°ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šfoo</p>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>console.log('global end')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šglobal end</p>
</li>
</ul>
</li>
<li>
<p>è‡³æ­¤ï¼Œæœ¬è½®äº‹ä»¶å¾ªç¯çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œæ ˆä¸ºç©ºã€‚</p>
</li>
</ul>
<ol start="4">
<li><strong>å¤„ç†å¾®ä»»åŠ¡é˜Ÿåˆ—</strong></li>
</ol>
<ul>
<li>
<p>äº‹ä»¶å¾ªç¯æœºåˆ¶é¦–å…ˆæŸ¥çœ‹Â <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>Â æ˜¯å¦ä¸ºç©ºï¼š</p>
<ul>
<li>
<p>å‘ç°æœ‰ä¸€ä¸ª Promise äº‹ä»¶å¾…æ‰§è¡Œï¼Œå°†å…¶å‹å…¥æ‰§è¡Œæ ˆã€‚</p>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>.then</code>Â ä¸­çš„å›è°ƒï¼š</p>
<ul>
<li>æ‰§è¡ŒÂ <code>console.log('promise then')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼špromise then</li>
</ul>
</li>
<li>
<p>è‡³æ­¤ï¼Œæ–°çš„ä¸€è½®äº‹ä»¶å¾ªç¯ï¼ˆPromise äº‹ä»¶ï¼‰æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œæ ˆä¸ºç©ºã€‚</p>
</li>
</ul>
</li>
</ul>
<ol start="5">
<li><strong>æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—</strong></li>
</ol>
<ul>
<li>
<p>æ‰§è¡Œæ ˆå†æ¬¡ä¸ºç©ºï¼Œäº‹ä»¶å¾ªç¯ï¼š</p>
<ol>
<li>å…ˆæŸ¥çœ‹Â <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼Œå‘ç°å·²ç©ºã€‚</li>
<li>å†æŸ¥çœ‹Â <strong>å®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼Œå‘ç°ä¹Ÿä¸ºç©ºã€‚</li>
</ol>
</li>
<li>
<p>æ‰§è¡Œæ ˆè¿›å…¥ç­‰å¾…äº‹ä»¶çŠ¶æ€ã€‚</p>
</li>
</ul>
<hr/>
<h4 data-id="heading-10">3.2.3 Promise ç»“åˆ setTimeout</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'foo'</span>)
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'global start'</span>)

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout: 0s'</span>)
}, <span class="hljs-number">0</span>)

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise'</span>)
    <span class="hljs-title function_">resolve</span>()
}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise then'</span>)
})

<span class="hljs-title function_">foo</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'global end'</span>)
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºçš„ç»“æœä¸ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">global start
promise
foo
global end
promise then
setTimeout: <span class="hljs-number">0</span>s
</code></pre>
<p><strong>åŠ¨å›¾å±•ç¤º</strong></p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d19dfd6c6d504401b305c98176137f71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2D5a-7Z2lybGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767437343&amp;x-signature=6VQHqRrbjtquZa5pHYaMkfFYHn0%3D" alt="6.gif" width="100%" loading="lazy"/>
<ol>
<li><strong>æ‰§è¡ŒåŒæ­¥ä»£ç </strong></li>
</ol>
<ul>
<li>æ‰§è¡ŒÂ <code>console.log('global start')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š
global start</li>
</ul>
<ol start="2">
<li><strong>å¤„ç†Â <code>setTimeout</code>ï¼ˆæ”¹å˜éƒ¨åˆ†ï¼‰</strong></li>
</ol>
<ul>
<li>
<p>ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œé‡åˆ°Â <code>setTimeout</code>ï¼š</p>
<ul>
<li>JS æ‰§è¡Œæ ˆå°†å…¶ç§»äº¤ç»™Â <strong>Web API</strong>Â å¤„ç†ã€‚</li>
<li>å»¶è¿Ÿ 0 ç§’åï¼ŒWeb API å°†Â <code>setTimeout</code>Â äº‹ä»¶æ·»åŠ åˆ°Â <strong>å®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼ˆæ­¤æ—¶å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä¸€ä¸ªÂ <code>setTimeout</code>Â äº‹ä»¶å¾…å¤„ç†ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»£ç </strong></li>
</ol>
<ul>
<li>
<p>JS çº¿ç¨‹è½¬äº¤Â <code>setTimeout</code>Â äº‹ä»¶åï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼š</p>
<ul>
<li>
<p>é‡åˆ°Â <code>new Promise(...)</code>ï¼š</p>
<ul>
<li>
<p>Promise çš„ executor å‡½æ•°Â <strong>åŒæ­¥æ‰§è¡Œ</strong>ï¼š</p>
<ul>
<li>
<p>æ‰§è¡ŒÂ <code>console.log('promise')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼špromise</p>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>resolve()</code>ï¼Œå°† Promise çŠ¶æ€å˜ä¸ºÂ <code>resolved</code>ã€‚</p>
</li>
</ul>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>.then(...)</code>ï¼š</p>
<ul>
<li>é‡åˆ°Â <code>.then</code>Â ä¼šå°†å›è°ƒæäº¤ç»™Â <strong>Web API</strong>Â å¤„ç†ã€‚</li>
<li>Web API å°†è¯¥å›è°ƒæ·»åŠ åˆ°Â <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼ˆæ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä¸€ä¸ª Promise äº‹ä»¶å¾…å¤„ç†ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="4">
<li><strong>ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»£ç </strong></li>
</ol>
<ul>
<li>
<p>æ‰§è¡Œæ ˆåœ¨æäº¤å®Œ Promise äº‹ä»¶åï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼š</p>
<ul>
<li>
<p>æ‰§è¡ŒÂ <code>foo()</code>Â å‡½æ•°ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šfoo</p>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>console.log('global end')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šglobal end</p>
</li>
</ul>
</li>
<li>
<p>è‡³æ­¤ï¼Œæœ¬è½®äº‹ä»¶å¾ªç¯çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œæ ˆä¸ºç©ºã€‚</p>
</li>
</ul>
<ol start="5">
<li><strong>å¤„ç†å¾®ä»»åŠ¡é˜Ÿåˆ—</strong></li>
</ol>
<ul>
<li>
<p>äº‹ä»¶å¾ªç¯æœºåˆ¶é¦–å…ˆæŸ¥çœ‹Â <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>Â æ˜¯å¦ä¸ºç©ºï¼š</p>
<ul>
<li>
<p>å‘ç°æœ‰ä¸€ä¸ª Promise äº‹ä»¶å¾…æ‰§è¡Œï¼Œå°†å…¶å‹å…¥æ‰§è¡Œæ ˆã€‚</p>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>.then</code>Â ä¸­çš„å›è°ƒï¼š</p>
<ul>
<li>æ‰§è¡ŒÂ <code>console.log('promise then')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š promise then</li>
</ul>
</li>
<li>
<p>è‡³æ­¤ï¼Œæ–°çš„ä¸€è½®äº‹ä»¶å¾ªç¯ï¼ˆPromise äº‹ä»¶ï¼‰æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œæ ˆä¸ºç©ºã€‚</p>
</li>
</ul>
</li>
</ul>
<ol start="6">
<li><strong>å¤„ç†å®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆæ”¹å˜éƒ¨åˆ†ï¼‰</strong></li>
</ol>
<ul>
<li>
<p>æ‰§è¡Œæ ˆå†æ¬¡ä¸ºç©ºï¼Œäº‹ä»¶å¾ªç¯ï¼š</p>
<ol>
<li>
<p>å…ˆæŸ¥çœ‹Â <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼Œå‘ç°å·²ç©ºã€‚</p>
</li>
<li>
<p>å†æŸ¥çœ‹Â <strong>å®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼Œå‘ç°æœ‰ä¸€ä¸ªÂ <code>setTimeout</code>Â äº‹ä»¶å¾…å¤„ç†ï¼š</p>
</li>
</ol>
<ul>
<li>
<p>å°†Â <code>setTimeout</code>Â ä¸­çš„åŒ¿åå‡½æ•°å‹å…¥æ‰§è¡Œæ ˆæ‰§è¡Œï¼š</p>
<ul>
<li>æ‰§è¡ŒÂ <code>console.log('setTimeout: 0s')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šsetTimeout: 0s</li>
</ul>
</li>
<li>
<p>è‡³æ­¤ï¼Œæ–°çš„ä¸€è½®äº‹ä»¶å¾ªç¯ï¼ˆ<code>setTimeout</code>Â äº‹ä»¶ï¼‰æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œæ ˆä¸ºç©ºã€‚</p>
</li>
</ul>
</li>
</ul>
<p>7.** æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—**</p>
<ul>
<li>
<p>æ‰§è¡Œæ ˆå†æ¬¡ä¸ºç©ºï¼Œäº‹ä»¶å¾ªç¯ï¼š</p>
<ol>
<li>å…ˆæŸ¥çœ‹Â <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼Œå‘ç°å·²ç©ºã€‚</li>
<li>å†æŸ¥çœ‹Â <strong>å®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼Œå‘ç°ä¹Ÿä¸ºç©ºã€‚</li>
</ol>
</li>
<li>
<p>æ‰§è¡Œæ ˆè¿›å…¥ç­‰å¾…äº‹ä»¶çŠ¶æ€ã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-11">3.3 äº‹ä»¶å¾ªç¯ä¸­çš„ async/await</h3>
<p>è¿™é‡Œç®€å•ä»‹ç»ä¸‹asyncå‡½æ•°ï¼š</p>
<ol>
<li>
<p>å‡½æ•°å‰é¢ <strong>async å…³é”®å­—çš„ä½œç”¨</strong>å°±2ç‚¹ï¼šâ‘ è¿™ä¸ªå‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ªpromiseã€‚â‘¡å…è®¸å‡½æ•°å†…ä½¿ç”¨awaitå…³é”®å­—ã€‚</p>
</li>
<li>
<p><strong>å…³é”®å­— await ä½¿ async å‡½æ•°ä¸€ç›´ç­‰å¾…</strong>ï¼ˆæ‰§è¡Œæ ˆå½“ç„¶ä¸å¯èƒ½åœä¸‹æ¥ç­‰å¾…çš„ï¼Œawaitå°†å…¶åé¢çš„å†…å®¹åŒ…è£…æˆpromiseäº¤ç»™Web APIsåï¼Œæ‰§è¡Œæ ˆä¼šè·³å‡ºasyncå‡½æ•°ç»§ç»­æ‰§è¡Œï¼‰ï¼Œç›´åˆ°promiseæ‰§è¡Œå®Œå¹¶è¿”å›ç»“æœã€‚<strong>awaitåªåœ¨asyncå‡½æ•°å‡½æ•°é‡Œé¢å¥æ•ˆ</strong>ã€‚</p>
</li>
<li>
<p>asyncå‡½æ•°åªæ˜¯ä¸€ç§æ¯”promiseæ›´ä¼˜é›…å¾—è·å–promiseç»“æœï¼ˆpromiseé“¾å¼è°ƒç”¨æ—¶ï¼‰çš„ä¸€ç§è¯­æ³•è€Œå·²ã€‚</p>
</li>
</ol>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'foo'</span>)
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async1 start'</span>)
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">async2</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async1 end'</span>)
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async2</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async2'</span>)
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'global start'</span>)
<span class="hljs-title function_">async1</span>()
<span class="hljs-title function_">foo</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'global end'</span>)
</code></pre>
<p>æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">global</span> <span class="hljs-keyword">start</span>
async1 <span class="hljs-keyword">start</span>
async2
foo
<span class="hljs-keyword">global</span> <span class="hljs-keyword">end</span>
async1 <span class="hljs-keyword">end</span>
</code></pre>
<ol>
<li><strong>æ‰§è¡ŒåŒæ­¥ä»£ç </strong></li>
</ol>
<ul>
<li>æ‰§è¡ŒÂ <code>console.log('global start')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šglobal start</li>
</ul>
<ol start="2">
<li><strong>è°ƒç”¨Â <code>async1()</code></strong></li>
</ol>
<ul>
<li>
<p>æ‰§è¡ŒÂ <code>async1()</code>ï¼Œè¿›å…¥Â <code>async1</code>Â å‡½æ•°ä½“ï¼š</p>
<ul>
<li>
<p>æ‰§è¡ŒÂ <code>console.log('async1 start')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šasync1 start</p>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>await async2()</code>ï¼š</p>
<ul>
<li><code>await</code>Â å…³é”®å­—ä¼šæš‚åœÂ <code>async1</code>Â å‡½æ•°çš„æ‰§è¡Œï¼Œç›´åˆ°Â <code>await</code>Â åé¢çš„ Promise è¿”å›ç»“æœã€‚</li>
<li><code>await async2()</code>Â ä¼šåƒè°ƒç”¨æ™®é€šå‡½æ•°ä¸€æ ·æ‰§è¡ŒÂ <code>async2()</code>ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>æ‰§è¡ŒÂ <code>async2()</code></strong></li>
</ol>
<ul>
<li>
<p>è¿›å…¥Â <code>async2</code>Â å‡½æ•°ä½“ï¼š</p>
<ul>
<li>
<p>æ‰§è¡ŒÂ <code>console.log('async2')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šasync2</p>
</li>
<li>
<p><code>async2</code>Â å‡½æ•°æ‰§è¡Œç»“æŸï¼Œå¼¹å‡ºæ‰§è¡Œæ ˆã€‚</p>
</li>
<li>
<p>ç”±äºÂ <code>async2</code>Â æ²¡æœ‰æ˜¾å¼è¿”å› Promiseï¼Œå®ƒä¼šéšå¼è¿”å›ä¸€ä¸ªå·² resolved çš„ Promiseã€‚</p>
</li>
</ul>
</li>
</ul>
<p>4.<strong>æš‚åœÂ <code>async1()</code>Â å¹¶ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»£ç </strong></p>
<ul>
<li>
<p>å› ä¸ºÂ <code>await</code>Â å…³é”®å­—ä¹‹åçš„ä»£ç è¢«æš‚åœï¼Œ<code>async1</code>Â å‡½æ•°æ‰§è¡Œç»“æŸï¼Œå¼¹å‡ºæ‰§è¡Œæ ˆã€‚</p>
</li>
<li>
<p>JS ä¸»çº¿ç¨‹ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼š</p>
<ul>
<li>
<p>æ‰§è¡ŒÂ <code>foo()</code>Â å‡½æ•°ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šfoo</p>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>console.log('global end')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šglobal end</p>
</li>
</ul>
</li>
<li>
<p>è‡³æ­¤ï¼Œæœ¬è½®äº‹ä»¶å¾ªç¯çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œæ ˆä¸ºç©ºã€‚</p>
</li>
</ul>
<ol start="5">
<li><strong>äº‹ä»¶å¾ªç¯å¤„ç†å¾®ä»»åŠ¡</strong></li>
</ol>
<ul>
<li>
<p>äº‹ä»¶å¾ªç¯æœºåˆ¶å¼€å§‹å·¥ä½œï¼š</p>
<ol>
<li>
<p>å…ˆæŸ¥çœ‹Â <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼š</p>
<ul>
<li>
<p>å‘ç°æœ‰ä¸€ä¸ªå¾®ä»»åŠ¡äº‹ä»¶ï¼Œè¯¥äº‹ä»¶æ˜¯Â <code>async1</code>Â å‡½æ•°ä¸­Â <code>await async2()</code>Â ä¹‹åçš„ä»£ç ï¼ˆå¯ä»¥ç†è§£ä¸ºï¼šç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°åŒ…è£¹Â <code>await</code>Â ä¹‹åçš„ä»£ç ï¼Œä½œä¸ºå¾®ä»»åŠ¡äº‹ä»¶ï¼‰ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œè¯¥å¾®ä»»åŠ¡ï¼š</p>
<ul>
<li>æ‰§è¡ŒÂ <code>console.log('async1 end')</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼šasync1 end</li>
</ul>
</li>
</ul>
</li>
<li>
<p>æ‰§è¡Œæ ˆå†æ¬¡ä¸ºç©ºï¼Œæœ¬è½®äº‹ä»¶æ‰§è¡Œç»“æŸã€‚</p>
</li>
</ol>
</li>
</ul>
<ol start="6">
<li><strong>æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—</strong></li>
</ol>
<ul>
<li>
<p>äº‹ä»¶å¾ªç¯æœºåˆ¶å†æ¬¡æŸ¥çœ‹ï¼š</p>
<ol>
<li><strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šå·²ç©ºã€‚</li>
<li><strong>å®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šä¹Ÿä¸ºç©ºã€‚</li>
</ol>
</li>
<li>
<p>æ‰§è¡Œæ ˆè¿›å…¥ç­‰å¾…äº‹ä»¶çŠ¶æ€ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-12">4. å¤§ç»¼åˆï¼ˆè‡ªæµ‹ï¼‰</h2>
<h4 data-id="heading-13">4.1 ç®€å•èåˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async1 start'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">async2</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async1 end'</span>);
}
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async2</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async2'</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'script start'</span>);

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout'</span>);
}, <span class="hljs-number">0</span>)

<span class="hljs-title function_">async1</span>();

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise1'</span>);
    <span class="hljs-title function_">resolve</span>();
}).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise2'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'script end'</span>);
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-sql" lang="sql">script <span class="hljs-keyword">start</span>
async1 <span class="hljs-keyword">start</span>
async2
promise1
script <span class="hljs-keyword">end</span>
async1 <span class="hljs-keyword">end</span>
promise2
setTimeout
</code></pre>
<hr/>
<h4 data-id="heading-14">4.2 å˜å½¢ 1</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async1 start'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">async2</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async1 end'</span>);
}
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async2</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise1'</span>);
        <span class="hljs-title function_">resolve</span>();
    }).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise2'</span>);
    });
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'script start'</span>);

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout'</span>);
}, <span class="hljs-number">0</span>)

<span class="hljs-title function_">async1</span>();

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise3'</span>);
    <span class="hljs-title function_">resolve</span>();
}).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise4'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'script end'</span>);
</code></pre>
<p>è¾“å‡ºçš„ç»“æœï¼š</p>
<pre><code class="hljs language-sql" lang="sql">script <span class="hljs-keyword">start</span>
async1 <span class="hljs-keyword">start</span>
promise1
promise3
script <span class="hljs-keyword">end</span>
promise2
async1 <span class="hljs-keyword">end</span>
promise4
setTimeout
</code></pre>
<hr/>
<h4 data-id="heading-15">4.3 å˜å½¢ 2</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async1 start'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">async2</span>();
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout1'</span>);
    },<span class="hljs-number">0</span>)
}
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async2</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'async2'</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'script start'</span>);

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout3'</span>);
}, <span class="hljs-number">0</span>)

<span class="hljs-title function_">async1</span>();

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise1'</span>);
    <span class="hljs-title function_">resolve</span>();
}).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise2'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'script end'</span>);
</code></pre>
<p>è¾“å‡ºçš„ç»“æœï¼š</p>
<pre><code class="hljs language-sql" lang="sql">script <span class="hljs-keyword">start</span>
async1 <span class="hljs-keyword">start</span>
async2
promise1
script <span class="hljs-keyword">end</span>
promise2
setTimeout3
setTimeout1
</code></pre>
<hr/>
<h4 data-id="heading-16">4.4 å˜å½¢ 3</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">a1</span> () {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'a1 start'</span>)
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">a2</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'a1 end'</span>)
}
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">a2</span> () {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'a2'</span>)
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'script start'</span>)

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout'</span>)
}, <span class="hljs-number">0</span>)

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise1'</span>)
})

<span class="hljs-title function_">a1</span>()

<span class="hljs-keyword">let</span> promise2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'promise2.then'</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise2'</span>)
})

promise2.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)
    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise3'</span>)
    })
})
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'script end'</span>)
</code></pre>
<p>è¾“å‡ºçš„ç»“æœï¼š</p>
<pre><code class="hljs language-sql" lang="sql">script <span class="hljs-keyword">start</span>
a1 <span class="hljs-keyword">start</span>
a2
promise2
script <span class="hljs-keyword">end</span>
promise1
a1 <span class="hljs-keyword">end</span>
promise2.then
promise3
setTimeout
</code></pre>
<hr/>
<h2 data-id="heading-17">5. ç»“è¯­</h2>
<ul>
<li><strong>JS æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„</strong>ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€ä»¶äº‹ã€‚</li>
<li><strong>æµè§ˆå™¨æ˜¯å¤šçº¿ç¨‹çš„</strong>ï¼ŒJS å¼•æ“é€šè¿‡åˆ†å‘è¿™äº›è€—æ—¶çš„å¼‚æ­¥äº‹ä»¶ç»™ Web APIs çº¿ç¨‹å¤„ç†ï¼Œé¿<strong>å…äº†å•çº¿ç¨‹è¢«é˜»å¡ã€‚</strong></li>
<li>äº‹ä»¶å¾ªç¯æœºåˆ¶æ˜¯ä¸ºäº†åè°ƒäº‹ä»¶ã€ç”¨æˆ·äº¤äº’ã€JS è„šæœ¬ã€é¡µé¢æ¸²æŸ“ã€ç½‘ç»œè¯·æ±‚ç­‰äº‹ä»¶çš„<strong>æœ‰åºæ‰§è¡Œ</strong>ã€‚</li>
<li><strong>å¾®ä»»åŠ¡çš„ä¼˜å…ˆçº§é«˜äºå®ä»»åŠ¡</strong>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[el-tableæºç è§£è¯»2-2â€”â€”createStore()åˆå§‹åŒ–æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7588028859541635098</link>    <guid>https://juejin.cn/post/7588028859541635098</guid>    <pubDate>2025-12-27T09:37:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859541635098" data-draft-id="7588086766248181811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="el-tableæºç è§£è¯»2-2â€”â€”createStore()åˆå§‹åŒ–æ–¹æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-27T09:37:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Joie"/> <meta itemprop="url" content="https://juejin.cn/user/3265984436383947"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            el-tableæºç è§£è¯»2-2â€”â€”createStore()åˆå§‹åŒ–æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3265984436383947/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Joie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T09:37:53.000Z" title="Sat Dec 27 2025 09:37:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>1. createStore()åˆå§‹åŒ–æ–¹æ³•</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> createStore&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DefaultRow</span>&gt;(
  <span class="hljs-attr">table</span>: <span class="hljs-title class_">Table</span>&lt;T&gt;,
  <span class="hljs-attr">props</span>: <span class="hljs-title class_">TableProps</span>&lt;T&gt;
) {
  <span class="hljs-keyword">if</span> (!table) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Table is required.'</span>)
  }

  <span class="hljs-keyword">const</span> store = useStore&lt;T&gt;()
  <span class="hljs-comment">// fix https://github.com/ElemeFE/element/issues/14075</span>
  <span class="hljs-comment">// related pr https://github.com/ElemeFE/element/pull/14146</span>

  <span class="hljs-comment">/**
   * åŸå§‹æ–¹æ³•ï¼š_toggleAllSelection æ˜¯æ‰§è¡Œå…¨é€‰/å–æ¶ˆå…¨é€‰çš„é€»è¾‘
   * é˜²æŠ–åŒ…è£…ï¼šç”¨ debounce åŒ…è£…ï¼Œå»¶è¿Ÿ 10ms æ‰§è¡Œ
   * æ–¹æ³•æ›¿æ¢ï¼šå°†é˜²æŠ–åçš„æ–¹æ³•èµ‹å€¼ç»™ toggleAllSelection
   */</span>
  store.<span class="hljs-property">toggleAllSelection</span> = <span class="hljs-title function_">debounce</span>(store.<span class="hljs-property">_toggleAllSelection</span>, <span class="hljs-number">10</span>)
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-title class_">InitialStateMap</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
    <span class="hljs-comment">/**
     * propsæ˜¯Tableç»„ä»¶çš„propsï¼Œkeyæ˜¯InitialStateMapçš„key
     * è¿™æ®µä»£ç ç”¨äºåˆå§‹åŒ– store çš„çŠ¶æ€ï¼š
     * éå† InitialStateMap çš„æ‰€æœ‰ keyï¼Œä» props ä¸­å–å€¼å¹¶åŒæ­¥åˆ° storeã€‚
     */</span>
    <span class="hljs-title function_">handleValue</span>(<span class="hljs-title function_">getArrKeysValue</span>(props, key), key, store)
  })
  <span class="hljs-comment">// ç›‘å¬InitialStateMapä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§</span>
  <span class="hljs-title function_">proxyTableProps</span>(store, props)
  <span class="hljs-keyword">return</span> store
}
</code></pre>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">/**
   * åŸå§‹æ–¹æ³•ï¼š_toggleAllSelection æ˜¯æ‰§è¡Œå…¨é€‰/å–æ¶ˆå…¨é€‰çš„é€»è¾‘
   * é˜²æŠ–åŒ…è£…ï¼šç”¨ debounce åŒ…è£…ï¼Œå»¶è¿Ÿ 10ms æ‰§è¡Œ
   * æ–¹æ³•æ›¿æ¢ï¼šå°†é˜²æŠ–åçš„æ–¹æ³•èµ‹å€¼ç»™ toggleAllSelection
   */</span>
   
  store.<span class="hljs-property">toggleAllSelection</span> = <span class="hljs-title function_">debounce</span>(store.<span class="hljs-property">_toggleAllSelection</span>, <span class="hljs-number">10</span>)
  
<span class="hljs-comment">// ç”¨æˆ·ç‚¹å‡»å…¨é€‰æ¡†æ—¶</span>
store.<span class="hljs-title function_">toggleAllSelection</span>()  <span class="hljs-comment">// è°ƒç”¨é˜²æŠ–åçš„æ–¹æ³•</span>
  â†’ debounce å»¶è¿Ÿ 10ms
    â†’ <span class="hljs-title function_">_toggleAllSelection</span>()  <span class="hljs-comment">// æ‰§è¡Œå®é™…é€»è¾‘</span>
      â†’ ä¿®æ”¹ selection å’Œ isAllSelected çŠ¶æ€
      
ä¸ºä»€ä¹ˆéœ€è¦é˜²æŠ–ï¼Ÿ
_toggleAllSelectionæ–¹æ³•ä¼šéå†æ‰€æœ‰è¡Œæ•°æ®ã€æ›´æ–°æ¯è¡Œçš„é€‰æ‹©çŠ¶æ€ã€è§¦å‘äº‹ä»¶ï¼Œ
å¦‚æœç”¨æˆ·å¿«é€Ÿè¿ç»­ç‚¹å‡»ï¼Œå¯èƒ½ä¼šå¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ã€æ€§èƒ½é—®é¢˜ã€<span class="hljs-variable constant_">UI</span>é—ªçƒï¼Œè€Œé˜²æŠ–å¯ä»¥é¿å…è¿™äº›é—®é¢˜      
</code></pre>
<p><strong>2. getArrKeysValue()</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * ä» props ä¸­æŒ‰è·¯å¾„å–å€¼ï¼Œæ”¯æŒåµŒå¥—å±æ€§ï¼ˆå¦‚ 'treeProps.hasChildren'ï¼‰
 * <span class="hljs-doctag">@param</span> props Tableç»„ä»¶çš„props
 * <span class="hljs-doctag">@param</span> key InitialStateMapçš„key
 * <span class="hljs-doctag">@returns</span>
 */</span>
<span class="hljs-keyword">function</span> getArrKeysValue&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DefaultRow</span>&gt;(
  <span class="hljs-attr">props</span>: <span class="hljs-title class_">TableProps</span>&lt;T&gt;,
  <span class="hljs-attr">key</span>: string
) {
  <span class="hljs-keyword">if</span> ((key <span class="hljs-keyword">as</span> keyof <span class="hljs-keyword">typeof</span> props).<span class="hljs-title function_">includes</span>(<span class="hljs-string">'.'</span>)) {
    <span class="hljs-keyword">const</span> keyList = (key <span class="hljs-keyword">as</span> keyof <span class="hljs-keyword">typeof</span> props).<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>)
    <span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: string | <span class="hljs-title class_">Record</span>&lt;string, any&gt; = props
    keyList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">k</span>) =&gt;</span> {
      value = (value <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;string, any&gt;)[k]
    })
    <span class="hljs-keyword">return</span> value
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> (props <span class="hljs-keyword">as</span> any)[key] <span class="hljs-keyword">as</span> boolean | string
  }
}

</code></pre>
<p><strong>3. handleValue()</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * å°†propsçš„å€¼åŒæ­¥åˆ°storeçš„çŠ¶æ€ä¸­ï¼Œå¹¶å¤„ç†æ˜ å°„å…³ç³»å’Œé»˜è®¤å€¼
 * <span class="hljs-doctag">@param</span> value ä»propsä¸­æŒ‰InitialStateMapçš„keyå–åˆ°çš„å€¼ï¼Œæ”¯æŒåµŒå¥—å±æ€§ï¼ˆå¦‚ 'treeProps.hasChildren'ï¼‰
 * <span class="hljs-doctag">@param</span> propsKey InitialStateMapçš„key
 * <span class="hljs-doctag">@param</span> store TableStore
 */</span>
<span class="hljs-keyword">function</span> handleValue&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DefaultRow</span>&gt;(
  <span class="hljs-attr">value</span>: string | boolean | <span class="hljs-title class_">Record</span>&lt;string, any&gt;,
  <span class="hljs-attr">propsKey</span>: string,
  <span class="hljs-attr">store</span>: <span class="hljs-title class_">Store</span>&lt;T&gt;
) {
  <span class="hljs-comment">// ä¿å­˜ä»propsä¸­æŒ‰InitialStateMapçš„keyå–åˆ°çš„åŸå§‹å€¼</span>
  <span class="hljs-keyword">let</span> newVal = value
  <span class="hljs-comment">// ä»InitialStateMapè·å–æ˜ å°„é…ç½®</span>
  <span class="hljs-comment">// å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼ˆå¦‚ 'rowKey'ï¼‰æˆ–å¯¹è±¡ï¼ˆå¦‚ { key: 'lazyColumnIdentifier', default: 'hasChildren' }ï¼‰</span>
  <span class="hljs-keyword">let</span> storeKey = <span class="hljs-title class_">InitialStateMap</span>[propsKey <span class="hljs-keyword">as</span> keyof <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">InitialStateMap</span>]
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isObject</span>(storeKey)) {
    <span class="hljs-comment">// å¦‚æœnewValä¸ºç©ºï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼</span>
    newVal = newVal || storeKey.<span class="hljs-property">default</span>
    storeKey = storeKey.<span class="hljs-property">key</span>
  }
  ; ((store.<span class="hljs-property">states</span> <span class="hljs-keyword">as</span> any)[storeKey] <span class="hljs-keyword">as</span> any).<span class="hljs-property">value</span> = newVal
}

</code></pre>
<p><strong>4. proxyTableProps()</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * ç”¨äºç›‘å¬ props çš„å˜åŒ–ï¼Œå½“ props ä¸­çš„å€¼æ”¹å˜æ—¶ï¼Œè‡ªåŠ¨åŒæ­¥åˆ° store çš„çŠ¶æ€ä¸­
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">store</span>
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">props</span>
 */</span>
<span class="hljs-keyword">function</span> proxyTableProps&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DefaultRow</span>&gt;(
  <span class="hljs-attr">store</span>: <span class="hljs-title class_">Store</span>&lt;T&gt;,
  <span class="hljs-attr">props</span>: <span class="hljs-title class_">TableProps</span>&lt;T&gt;
) {
  <span class="hljs-comment">// éå† InitialStateMap çš„æ‰€æœ‰ keyï¼Œä¸ºæ¯ä¸ª key åˆ›å»ºä¸€ä¸ª watch ç›‘å¬å™¨</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-title class_">InitialStateMap</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
    <span class="hljs-title function_">watch</span>(
      <span class="hljs-comment">// ç›‘å¬ getArrKeysValue(props, key) çš„è¿”å›å€¼</span>
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getArrKeysValue</span>(props, key),
      <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
        <span class="hljs-comment">// å½“å€¼å˜åŒ–æ—¶ï¼Œè°ƒç”¨ handleValue åŒæ­¥åˆ° store</span>
        <span class="hljs-title function_">handleValue</span>(value, key, store)
      }
    )
  })
}
</code></pre>
<h2 data-id="heading-0"><strong>æ ¸å¿ƒç¼–ç¨‹æ€ç»´æç‚¼</strong></h2>
<h3 data-id="heading-1">1. é…ç½®é©±åŠ¨ç¼–ç¨‹ï¼ˆConfiguration-Driven Programmingï¼‰</h3>
<p>æ€ç»´ï¼šå°†å˜åŒ–çš„éƒ¨åˆ†æŠ½ç¦»ä¸ºé…ç½®ï¼Œç”¨ç»Ÿä¸€é€»è¾‘å¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âŒ ç¡¬ç¼–ç æ€ç»´ï¼ˆä½ å¯èƒ½ä¼šè¿™æ ·å†™ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">syncPropsToStore</span>(<span class="hljs-params">props, store</span>) {
  store.<span class="hljs-property">states</span>.<span class="hljs-property">rowKey</span>.<span class="hljs-property">value</span> = props.<span class="hljs-property">rowKey</span>
  store.<span class="hljs-property">states</span>.<span class="hljs-property">data</span>.<span class="hljs-property">value</span> = props.<span class="hljs-property">data</span>
  store.<span class="hljs-property">states</span>.<span class="hljs-property">defaultExpandAll</span>.<span class="hljs-property">value</span> = props.<span class="hljs-property">defaultExpandAll</span>
  <span class="hljs-comment">// ... æ¯ä¸ªéƒ½è¦å†™ä¸€é</span>
}

<span class="hljs-comment">// âœ… é…ç½®é©±åŠ¨æ€ç»´ï¼ˆElement Plus çš„åšæ³•ï¼‰</span>
<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">rowKey</span>: <span class="hljs-string">'rowKey'</span>,
  <span class="hljs-attr">data</span>: <span class="hljs-string">'data'</span>,
  <span class="hljs-attr">defaultExpandAll</span>: <span class="hljs-string">'defaultExpandAll'</span>
}
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(config).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
  store.<span class="hljs-property">states</span>[config[key]].<span class="hljs-property">value</span> = props[key]
})
</code></pre>
<p>å®é™…åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>API å­—æ®µæ˜ å°„ï¼šåç«¯å­—æ®µå â†’Â å‰ç«¯å­—æ®µå</li>
</ul>

<ul>
<li>è¡¨å•éªŒè¯è§„åˆ™ï¼šç»Ÿä¸€é…ç½®ï¼Œç»Ÿä¸€å¤„ç†</li>
</ul>

<ul>
<li>æƒé™æ§åˆ¶ï¼šè·¯ç”±æƒé™é…ç½®è¡¨</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å®é™…å·¥ä½œä¸­çš„åº”ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">API_FIELD_MAP</span> = {
  <span class="hljs-string">'user_name'</span>: <span class="hljs-string">'userName'</span>,
  <span class="hljs-string">'create_time'</span>: <span class="hljs-string">'createTime'</span>,
  <span class="hljs-string">'user_info.avatar'</span>: <span class="hljs-string">'avatar'</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">transformApiData</span>(<span class="hljs-params">apiData</span>) {
  <span class="hljs-keyword">const</span> result = {}
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable constant_">API_FIELD_MAP</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">apiKey</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> frontendKey = <span class="hljs-variable constant_">API_FIELD_MAP</span>[apiKey]
    result[frontendKey] = <span class="hljs-title function_">getNestedValue</span>(apiData, apiKey)
  })
  <span class="hljs-keyword">return</span> result
}
</code></pre>
<h3 data-id="heading-2">2. æ˜ å°„å±‚æ¨¡å¼ï¼ˆMapping Layer Patternï¼‰</h3>
<p>æ€ç»´ï¼šåœ¨æ•°æ®æºå’Œç›®æ ‡ä¹‹é—´å»ºç«‹æ˜ å°„å±‚ï¼Œè§£è€¦å‘½åå·®å¼‚ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ˜ å°„å±‚çš„ä½œç”¨</span>
<span class="hljs-title class_">Props</span> å‘½åï¼ˆç”¨æˆ·å‹å¥½ï¼‰  â†’  æ˜ å°„å±‚  â†’  <span class="hljs-title class_">Store</span> å‘½åï¼ˆå†…éƒ¨å®ç°ï¼‰
<span class="hljs-string">'treeProps.hasChildren'</span>  â†’  <span class="hljs-title class_">InitialStateMap</span>  â†’  <span class="hljs-string">'lazyColumnIdentifier'</span>
</code></pre>
<p>å®é™…åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>ç¬¬ä¸‰æ–¹ API å¯¹æ¥ï¼šå¤–éƒ¨ API å­—æ®µÂ â†’ å†…éƒ¨æ•°æ®æ¨¡å‹</li>
</ul>

<ul>
<li>å¤šè¯­è¨€æ”¯æŒï¼šè¯­è¨€ key â†’ ç¿»è¯‘æ–‡æœ¬</li>
</ul>

<ul>
<li>çŠ¶æ€æœºè½¬æ¢ï¼šçŠ¶æ€å â†’Â çŠ¶æ€å€¼</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å®é™…å·¥ä½œä¸­çš„åº”ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STATUS_MAP</span> = {
  <span class="hljs-string">'pending'</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">'å¾…å¤„ç†'</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">0</span> },
  <span class="hljs-string">'processing'</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">'å¤„ç†ä¸­'</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'blue'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">1</span> },
  <span class="hljs-string">'completed'</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">'å·²å®Œæˆ'</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'green'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">2</span> }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getStatusInfo</span>(<span class="hljs-params">status</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">STATUS_MAP</span>[status] || <span class="hljs-variable constant_">STATUS_MAP</span>[<span class="hljs-string">'pending'</span>]
}
</code></pre>
<h3 data-id="heading-3">3. æ•°æ®è½¬æ¢ç®¡é“ï¼ˆData Transformation Pipelineï¼‰</h3>
<p>æ€ç»´ï¼šå°†å¤æ‚çš„æ•°æ®è½¬æ¢æ‹†åˆ†ä¸ºå¤šä¸ªæ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤èŒè´£å•ä¸€ã€‚</p>
<p>è§£é‡Š <code>reduce</code> å’Œæ•°æ®ç®¡é“çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<h4 data-id="heading-4"><code>reduce</code> æ–¹æ³•è¯¦è§£</h4>
<h4 data-id="heading-5">1. <code>reduce</code> çš„åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript">array.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">accumulator, currentValue</span>) =&gt;</span> {
  <span class="hljs-comment">// å¤„ç†é€»è¾‘</span>
  <span class="hljs-keyword">return</span> newAccumulator
}, initialValue)
</code></pre>
<ul>
<li><code>accumulator</code>ï¼ˆç´¯åŠ å™¨ï¼‰ï¼šä¸Šä¸€æ¬¡å¤„ç†çš„ç»“æœ</li>
<li><code>currentValue</code>ï¼ˆå½“å‰å€¼ï¼‰ï¼šå½“å‰å¤„ç†çš„å…ƒç´ </li>
<li><code>initialValue</code>ï¼ˆåˆå§‹å€¼ï¼‰ï¼šç¬¬ä¸€æ¬¡å¤„ç†æ—¶çš„åˆå§‹å€¼</li>
</ul>
<h4 data-id="heading-6">2. æ•°æ®ç®¡é“çš„æ‰§è¡Œè¿‡ç¨‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dataPipeline = [
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">transformApiFields</span>(data),      <span class="hljs-comment">// æ­¥éª¤1ï¼šå­—æ®µè½¬æ¢</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">validateData</span>(data),            <span class="hljs-comment">// æ­¥éª¤2ï¼šæ•°æ®éªŒè¯</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">formatDates</span>(data),             <span class="hljs-comment">// æ­¥éª¤3ï¼šæ—¥æœŸæ ¼å¼åŒ–</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">enrichData</span>(data),              <span class="hljs-comment">// æ­¥éª¤4ï¼šæ•°æ®å¢å¼º</span>
]

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">rawData</span>) {
  <span class="hljs-keyword">return</span> dataPipeline.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, transform</span>) =&gt;</span> <span class="hljs-title function_">transform</span>(data), rawData)
}
</code></pre>
<h4 data-id="heading-7">3. é€æ­¥æ‰§è¡Œè¿‡ç¨‹ï¼ˆæ‹†è§£ï¼‰</h4>
<p>ç­‰ä»·å†™æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">rawData</span>) {
  <span class="hljs-comment">// åˆå§‹å€¼ï¼šrawData</span>
  <span class="hljs-keyword">let</span> result = rawData
  
  <span class="hljs-comment">// ç¬¬1æ¬¡å¾ªç¯ï¼štransform = transformApiFields</span>
  result = <span class="hljs-title function_">transformApiFields</span>(result)
  <span class="hljs-comment">// æ­¤æ—¶ result = transformApiFields(rawData)</span>
  
  <span class="hljs-comment">// ç¬¬2æ¬¡å¾ªç¯ï¼štransform = validateData</span>
  result = <span class="hljs-title function_">validateData</span>(result)
  <span class="hljs-comment">// æ­¤æ—¶ result = validateData(transformApiFields(rawData))</span>
  
  <span class="hljs-comment">// ç¬¬3æ¬¡å¾ªç¯ï¼štransform = formatDates</span>
  result = <span class="hljs-title function_">formatDates</span>(result)
  <span class="hljs-comment">// æ­¤æ—¶ result = formatDates(validateData(transformApiFields(rawData)))</span>
  
  <span class="hljs-comment">// ç¬¬4æ¬¡å¾ªç¯ï¼štransform = enrichData</span>
  result = <span class="hljs-title function_">enrichData</span>(result)
  <span class="hljs-comment">// æ­¤æ—¶ result = enrichData(formatDates(validateData(transformApiFields(rawData))))</span>
  
  <span class="hljs-keyword">return</span> result
}
</code></pre>
<h4 data-id="heading-8">4. ç”¨å…·ä½“ä¾‹å­æ¼”ç¤º</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡è®¾åŸå§‹æ•°æ®</span>
<span class="hljs-keyword">const</span> rawData = {
  <span class="hljs-attr">user_name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
  <span class="hljs-attr">create_time</span>: <span class="hljs-string">'2024-01-01'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>
}

<span class="hljs-comment">// å®šä¹‰è½¬æ¢å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">transformApiFields</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">userName</span>: data.<span class="hljs-property">user_name</span>,  <span class="hljs-comment">// ä¸‹åˆ’çº¿è½¬é©¼å³°</span>
    <span class="hljs-attr">createTime</span>: data.<span class="hljs-property">create_time</span>,
    <span class="hljs-attr">age</span>: data.<span class="hljs-property">age</span>
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">validateData</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">userName</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span>)
  <span class="hljs-keyword">return</span> data
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">formatDates</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">return</span> {
    ...data,
    <span class="hljs-attr">createTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(data.<span class="hljs-property">createTime</span>).<span class="hljs-title function_">toLocaleDateString</span>()
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">enrichData</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">return</span> {
    ...data,
    <span class="hljs-attr">status</span>: <span class="hljs-string">'active'</span>,
    <span class="hljs-attr">id</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)
  }
}

<span class="hljs-comment">// æ•°æ®ç®¡é“</span>
<span class="hljs-keyword">const</span> dataPipeline = [
  transformApiFields,
  validateData,
  formatDates,
  enrichData
]

<span class="hljs-comment">// æ‰§è¡Œè¿‡ç¨‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">rawData</span>) {
  <span class="hljs-keyword">return</span> dataPipeline.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, transform</span>) =&gt;</span> <span class="hljs-title function_">transform</span>(data), rawData)
}

<span class="hljs-comment">// æ‰§è¡Œç»“æœ</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">processData</span>(rawData)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   userName: 'å¼ ä¸‰',</span>
<span class="hljs-comment">//   createTime: '2024/1/1',</span>
<span class="hljs-comment">//   age: 25,</span>
<span class="hljs-comment">//   status: 'active',</span>
<span class="hljs-comment">//   id: 'abc123xyz'</span>
<span class="hljs-comment">// }</span>
</code></pre>
<h4 data-id="heading-9">5. æ‰§è¡Œæµç¨‹å›¾</h4>
<pre><code class="hljs language-css" lang="css">åŸå§‹æ•°æ®: { user_name: <span class="hljs-string">'å¼ ä¸‰'</span>, create_time: <span class="hljs-string">'2024-01-01'</span>, age: <span class="hljs-number">25</span> }
    â†“
<span class="hljs-selector-attr">[reduce å¼€å§‹ï¼Œåˆå§‹å€¼ = rawData]</span>
    â†“
æ­¥éª¤<span class="hljs-number">1</span>: <span class="hljs-built_in">transformApiFields</span>(rawData)
    â†’ { userName: <span class="hljs-string">'å¼ ä¸‰'</span>, createTime: <span class="hljs-string">'2024-01-01'</span>, age: <span class="hljs-number">25</span> }
    â†“
æ­¥éª¤<span class="hljs-number">2</span>: <span class="hljs-built_in">validateData</span>(ä¸Šä¸€æ­¥ç»“æœ)
    â†’ { userName: <span class="hljs-string">'å¼ ä¸‰'</span>, createTime: <span class="hljs-string">'2024-01-01'</span>, age: <span class="hljs-number">25</span> } (éªŒè¯é€šè¿‡)
    â†“
æ­¥éª¤<span class="hljs-number">3</span>: <span class="hljs-built_in">formatDates</span>(ä¸Šä¸€æ­¥ç»“æœ)
    â†’ { userName: <span class="hljs-string">'å¼ ä¸‰'</span>, createTime: <span class="hljs-string">'2024/1/1'</span>, age: <span class="hljs-number">25</span> }
    â†“
æ­¥éª¤<span class="hljs-number">4</span>: <span class="hljs-built_in">enrichData</span>(ä¸Šä¸€æ­¥ç»“æœ)
    â†’ { userName: <span class="hljs-string">'å¼ ä¸‰'</span>, createTime: <span class="hljs-string">'2024/1/1'</span>, age: <span class="hljs-number">25</span>, status: <span class="hljs-string">'active'</span>, id: <span class="hljs-string">'abc123xyz'</span> }
    â†“
æœ€ç»ˆç»“æœ
</code></pre>
<h4 data-id="heading-10">6. ç”¨ for å¾ªç¯ç­‰ä»·å†™æ³•ï¼ˆæ›´å®¹æ˜“ç†è§£ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">rawData</span>) {
  <span class="hljs-keyword">let</span> result = rawData  <span class="hljs-comment">// åˆå§‹å€¼</span>
  
  <span class="hljs-comment">// ä¾æ¬¡æ‰§è¡Œæ¯ä¸ªè½¬æ¢å‡½æ•°</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; dataPipeline.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> transform = dataPipeline[i]
    result = <span class="hljs-title function_">transform</span>(result)  <span class="hljs-comment">// å°†ä¸Šä¸€æ­¥çš„ç»“æœä½œä¸ºä¸‹ä¸€æ­¥çš„è¾“å…¥</span>
  }
  
  <span class="hljs-keyword">return</span> result
}
</code></pre>
<h4 data-id="heading-11">7. ä¸ºä»€ä¹ˆç”¨ <code>reduce</code>ï¼Ÿ</h4>
<p>ä¼˜åŠ¿ï¼š</p>
<ol>
<li>å‡½æ•°å¼ç¼–ç¨‹ï¼šæ›´ç®€æ´ã€å£°æ˜å¼</li>
<li>é“¾å¼å¤„ç†ï¼šæ•°æ®åƒæµæ°´çº¿ä¸€æ ·ä¾æ¬¡å¤„ç†</li>
<li>æ˜“äºæ‰©å±•ï¼šæ·»åŠ æ–°æ­¥éª¤åªéœ€åœ¨æ•°ç»„ä¸­æ·»åŠ å‡½æ•°</li>
<li>æ˜“äºæµ‹è¯•ï¼šæ¯ä¸ªè½¬æ¢å‡½æ•°å¯ä»¥ç‹¬ç«‹æµ‹è¯•</li>
</ol>
<h4 data-id="heading-12">8. å®é™…å·¥ä½œä¸­çš„åº”ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯1ï¼šè¡¨å•æ•°æ®å¤„ç†</span>
<span class="hljs-keyword">const</span> formDataPipeline = [
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">trimFields</span>(data),           <span class="hljs-comment">// å»é™¤ç©ºæ ¼</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">validateRequired</span>(data),     <span class="hljs-comment">// å¿…å¡«éªŒè¯</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">validateFormat</span>(data),       <span class="hljs-comment">// æ ¼å¼éªŒè¯</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">transformToApiFormat</span>(data)  <span class="hljs-comment">// è½¬æ¢ä¸º API æ ¼å¼</span>
]

<span class="hljs-comment">// åœºæ™¯2ï¼šåˆ—è¡¨æ•°æ®å¤„ç†</span>
<span class="hljs-keyword">const</span> listDataPipeline = [
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">transformFields</span>(data),      <span class="hljs-comment">// å­—æ®µè½¬æ¢</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">filterInvalid</span>(data),        <span class="hljs-comment">// è¿‡æ»¤æ— æ•ˆæ•°æ®</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">sortByDate</span>(data),           <span class="hljs-comment">// æŒ‰æ—¥æœŸæ’åº</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">paginate</span>(data)              <span class="hljs-comment">// åˆ†é¡µ</span>
]

<span class="hljs-comment">// åœºæ™¯3ï¼šAPI å“åº”å¤„ç†</span>
<span class="hljs-keyword">const</span> apiResponsePipeline = [
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">extractData</span>(data),          <span class="hljs-comment">// æå–æ•°æ®</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">handleError</span>(data),          <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">normalizeData</span>(data),      <span class="hljs-comment">// æ•°æ®æ ‡å‡†åŒ–</span>
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">cacheData</span>(data)             <span class="hljs-comment">// ç¼“å­˜æ•°æ®</span>
]
</code></pre>
<h4 data-id="heading-13">9. è°ƒè¯•æŠ€å·§</h4>
<p>å¦‚æœæƒ³çœ‹æ¯ä¸€æ­¥çš„ç»“æœï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">rawData</span>) {
  <span class="hljs-keyword">return</span> dataPipeline.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, transform, index</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ­¥éª¤ <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>:`</span>, data)
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">transform</span>(data)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ­¥éª¤ <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span> ç»“æœ:`</span>, result)
    <span class="hljs-keyword">return</span> result
  }, rawData)
}
</code></pre>
<h4 data-id="heading-14">æ€»ç»“</h4>
<ul>
<li><code>reduce</code> çš„ä½œç”¨ï¼šå°†æ•°ç»„ä¸­çš„æ¯ä¸ªå‡½æ•°ä¾æ¬¡æ‰§è¡Œï¼Œå‰ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥</li>
<li>æ•°æ®ç®¡é“ï¼šåƒå·¥å‚æµæ°´çº¿ï¼Œæ•°æ®ä¾æ¬¡ç»è¿‡æ¯ä¸ªå¤„ç†æ­¥éª¤</li>
<li>ä¼˜åŠ¿ï¼šä»£ç ç®€æ´ã€æ˜“äºæ‰©å±•ã€æ˜“äºæµ‹è¯•</li>
</ul>
<p>è¿™å°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„â€œç®¡é“æ¨¡å¼â€ï¼ˆPipeline Patternï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[djangoæ“ä½œmysqlå¸¸è§é”™è¯¯å¤§å…¨]]></title>    <link>https://juejin.cn/post/7588043318359015459</link>    <guid>https://juejin.cn/post/7588043318359015459</guid>    <pubDate>2025-12-27T10:45:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588043318359015459" data-draft-id="7587997157238571060" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="djangoæ“ä½œmysqlå¸¸è§é”™è¯¯å¤§å…¨"/> <meta itemprop="keywords" content="Django,MySQL"/> <meta itemprop="datePublished" content="2025-12-27T10:45:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            djangoæ“ä½œmysqlå¸¸è§é”™è¯¯å¤§å…¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T10:45:04.000Z" title="Sat Dec 27 2025 10:45:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å› ä¸ºæˆ‘çš„æœºå™¨ä½¿ç”¨çš„æ˜¯mysqlå®¹å™¨ï¼Œæ‰€ä»¥å¯ä»¥æ‰“å°ç¯å¢ƒç¯å¢ƒè·å–ç™»å½•è´¦å¯†</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">exec</span> -it db <span class="hljs-built_in">printenv</span> | grep MYSQL
</code></pre>
<p>ä¸‹é¢ç”¨ã€ŒDjango + MySQLã€çš„è§†è§’ï¼ŒæŠŠ <strong>å¼€å‘/ä¸Šçº¿ 99% ä¼šè¸©çš„ MySQL å…¸å‹é”™è¯¯</strong> æ±‡æ€»æˆä¸€å¼ â€œè¸©å‘åœ°å›¾â€ã€‚<br/>
æ¯ä¸ªé”™è¯¯éƒ½ç»™å‡ºï¼š</p>
<ol>
<li>å¼‚å¸¸å †æ ˆï¼ˆDjango çœŸå®æŠ¥é”™ï¼‰</li>
<li>æ ¹å› ä¸€å¥è¯</li>
<li>å¤ç°ä»£ç ï¼ˆæœ€å° Django ç¤ºä¾‹ï¼‰</li>
<li>ä¿®å¤æ–¹æ¡ˆï¼ˆå« ORM å†™æ³•æˆ–é…ç½®ï¼‰</li>
</ol>
<p>å¤åˆ¶å³å¯å¤ç°ï¼Œè·Ÿç€æ•²ä¸€éï¼Œä»¥åçœ‹åˆ°åŒæ ·æ—¥å¿—ç§’å®šä½ã€‚</p>
<hr/>
<h2 data-id="heading-0">0. ç¯å¢ƒç»Ÿä¸€</h2>
<ul>
<li>Django 4.2 + mysqlclient 2.2 + MySQL 8.0</li>
<li>é»˜è®¤é…ç½®ï¼ˆä¸æ”¹ SQL_MODEï¼‰ä»¥ä¾¿æš´éœ²é—®é¢˜</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># settings.py</span>
DATABASES = {
    <span class="hljs-string">"default"</span>: {
        <span class="hljs-string">"ENGINE"</span>: <span class="hljs-string">"django.db.backends.mysql"</span>,
        <span class="hljs-string">"NAME"</span>: <span class="hljs-string">"django_err"</span>,
        <span class="hljs-string">"USER"</span>: <span class="hljs-string">"root"</span>,
        <span class="hljs-string">"PASSWORD"</span>: <span class="hljs-string">"password"</span>,
        <span class="hljs-string">"HOST"</span>: <span class="hljs-string">"127.0.0.1"</span>,
        <span class="hljs-string">"PORT"</span>: <span class="hljs-string">"3306"</span>,
        <span class="hljs-string">"OPTIONS"</span>: {<span class="hljs-string">"init_command"</span>: <span class="hljs-string">"SET sql_mode='STRICT_TRANS_TABLES'"</span>},  <span class="hljs-comment"># ä¸¥æ ¼æ¨¡å¼å…ˆæ‰“å¼€</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-1">1. Duplicate entry â€”â€” ä¸»é”®/å”¯ä¸€é”®å†²çª</h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.db.utils.IntegrityError: (1062, "Duplicate entry 'tom' for key 'users.username'")
</code></pre>
<p><strong>å¤ç°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(models.Model):
    username = models.CharField(max_length=<span class="hljs-number">50</span>, unique=<span class="hljs-literal">True</span>)

User.objects.create(username=<span class="hljs-string">"tom"</span>)
User.objects.create(username=<span class="hljs-string">"tom"</span>)  <span class="hljs-comment"># å†æ•²ä¸€æ¬¡</span>
</code></pre>
<p><strong>ä¿®å¤</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä»£ç å±‚å…ˆæŸ¥åæ’ æˆ– æ•°æ®åº“å±‚ on conflict</span>
user, created = User.objects.get_or_create(username=<span class="hljs-string">"tom"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-2">2. Data too long â€”â€” åˆ—é•¿åº¦è¶…é™</h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.db.utils.DataError: (1406, "Data too long for column 'title' at row 1")
</code></pre>
<p><strong>å¤ç°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Article</span>(models.Model):
    title = models.CharField(max_length=<span class="hljs-number">10</span>)

Article.objects.create(title=<span class="hljs-string">"12345678901"</span>)  <span class="hljs-comment"># 11 ä¸ªå­—ç¬¦</span>
</code></pre>
<p><strong>ä¿®å¤</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¦ä¹ˆæ”¹æ¨¡å‹</span>
title = models.CharField(max_length=<span class="hljs-number">255</span>)
<span class="hljs-comment"># è¦ä¹ˆæˆªæ–­</span>
Article.objects.create(title=long_title[:<span class="hljs-number">10</span>])
</code></pre>
<hr/>
<h2 data-id="heading-3">3. DoesNotExist â€”â€” æŸ¥è¯¢ä¸ºç©ºæŠ›å¼‚å¸¸</h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.core.exceptions.ObjectDoesNotExist: User matching query does not exist.
</code></pre>
<p><strong>å¤ç°</strong></p>
<pre><code class="hljs language-python" lang="python">user = User.objects.get(pk=<span class="hljs-number">999</span>)  <span class="hljs-comment"># æ²¡æœ‰è¿™æ¡è®°å½•</span>
</code></pre>
<p><strong>ä¿®å¤</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”¨ filter + first æˆ– get_object_or_404</span>
user = User.objects.<span class="hljs-built_in">filter</span>(pk=<span class="hljs-number">999</span>).first()  <span class="hljs-comment"># è¿”å› None</span>
<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> get_object_or_404
user = get_object_or_404(User, pk=<span class="hljs-number">999</span>)
</code></pre>
<hr/>
<h2 data-id="heading-4">4. Field cannot be null â€”â€” éç©ºçº¦æŸ</h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.db.utils.IntegrityError: (1048, "Column 'email' cannot be null")
</code></pre>
<p><strong>å¤ç°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(models.Model):
    email = models.EmailField()  <span class="hljs-comment"># é»˜è®¤ blank=False, null=False</span>

User.objects.create(username=<span class="hljs-string">"tom"</span>)  <span class="hljs-comment"># æ²¡ç»™ email</span>
</code></pre>
<p><strong>ä¿®å¤</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. å…è®¸ç©º</span>
email = models.EmailField(blank=<span class="hljs-literal">True</span>, null=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># 2. ç»™é»˜è®¤å€¼</span>
email = models.EmailField(default=<span class="hljs-string">""</span>)
<span class="hljs-comment"># 3. ä»£ç é‡Œä¼ å€¼</span>
User.objects.create(username=<span class="hljs-string">"tom"</span>, email=<span class="hljs-string">"tom@example.com"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-5">5. Incorrect string value â€”â€” è¡¨æƒ…ç¬¦/ç”Ÿåƒ»å­—ä¹±ç </h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.db.utils.OperationalError: (1366, "Incorrect string value: '\\xF0\\x9F\\x98\\x80...' for column 'nickname'")
</code></pre>
<p><strong>å¤ç°</strong></p>
<pre><code class="hljs language-python" lang="python">User.objects.create(nickname=<span class="hljs-string">"ğŸ˜€"</span>)  <span class="hljs-comment"># utf8mb3 å­˜ä¸è¿› emoji</span>
</code></pre>
<p><strong>ä¿®å¤</strong></p>
<ol>
<li>æ•°æ®åº“/è¡¨/åˆ—å­—ç¬¦é›†æ”¹æˆ <code>utf8mb4</code>ï¼š</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> DATABASE django_err <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> users <span class="hljs-keyword">CONVERT</span> <span class="hljs-keyword">TO</span> <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;
</code></pre>
<ol start="2">
<li>è¿æ¥å±‚ä¹ŸæŒ‡å®šï¼š</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"OPTIONS"</span>: {<span class="hljs-string">"charset"</span>: <span class="hljs-string">"utf8mb4"</span>},
</code></pre>
<p>å†æ’å…¥ emoji å°±æ­£å¸¸äº†ã€‚</p>
<hr/>
<h2 data-id="heading-6">6. Lost connection â€”â€” é•¿æŸ¥è¯¢è¢« kill</h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.db.utils.OperationalError: (2013, 'Lost connection to MySQL server during query')
</code></pre>
<p><strong>å¤ç°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ•…æ„æä¸ªå¤§è¡¨å…¨è¡¨æ‰« + ä¸ç¡è§‰</span>
User.objects.<span class="hljs-built_in">all</span>().select_related(<span class="hljs-string">"profile"</span>)[<span class="hljs-number">0</span>:<span class="hljs-number">100000</span>]  <span class="hljs-comment"># 100 ä¸‡æ¬¡ join</span>
</code></pre>
<p><strong>ä¿®å¤</strong></p>
<ul>
<li>ä¼˜åŒ– SQLï¼ˆåŠ ç´¢å¼•ã€åˆ†é¡µã€åªå–æ‰€éœ€åˆ—ï¼‰</li>
<li>è°ƒå¤§ <code>wait_timeout</code> / <code>interactive_timeout</code>ï¼ˆæ²»æ ‡ä¸æ²»æœ¬ï¼‰</li>
<li>ç”¨ <code>iterator()</code> åˆ†æ‰¹æ‹‰ï¼š</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> User.objects.<span class="hljs-built_in">all</span>().iterator(chunk_size=<span class="hljs-number">2000</span>):
    ...
</code></pre>
<hr/>
<h2 data-id="heading-7">7. Too many connections â€”â€” è¿æ¥æ‰“æ»¡</h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.db.utils.OperationalError: (1040, 'Too many connections')
</code></pre>
<p><strong>å¤ç°</strong><br/>
å¹¶å‘å‹æµ‹ <code>ab -n 10000 -c 200 ...</code> è¶…è¿‡ <code>max_connections=151</code> å³å¯ã€‚</p>
<p><strong>ä¿®å¤</strong></p>
<ol>
<li>æ•°æ®åº“å±‚ï¼šæ¸©å’Œæ¶¨ä¸Šé™</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> max_connections <span class="hljs-operator">=</span> <span class="hljs-number">300</span>;
</code></pre>
<ol start="2">
<li>åº”ç”¨å±‚ï¼šç”¨è¿æ¥æ±  + åˆç†å¹¶å‘</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># settings.py é‡ŒåŠ </span>
DATABASES[<span class="hljs-string">"default"</span>][<span class="hljs-string">"CONN_MAX_AGE"</span>] = <span class="hljs-number">600</span>  <span class="hljs-comment"># å¤ç”¨è¿æ¥</span>
</code></pre>
<ol start="3">
<li>ä»£ç é‡Œåˆ«æ³„éœ²è¿æ¥ï¼ˆé•¿æ—¶é—´ä¸ closeï¼‰</li>
</ol>
<hr/>
<h2 data-id="heading-8">8. Deadlock found â€”â€” å¹¶å‘æ­»é”</h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.db.utils.OperationalError: (1213, 'Deadlock found when trying to get lock; try restarting transaction')
</code></pre>
<p><strong>å¤ç°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸¤ä¸ª view åŒæ—¶</span>
<span class="hljs-meta">@transaction.atomic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">debit</span>(<span class="hljs-params">request</span>):
    a = Account.objects.select_for_update().get(<span class="hljs-built_in">id</span>=<span class="hljs-number">1</span>)
    b = Account.objects.select_for_update().get(<span class="hljs-built_in">id</span>=<span class="hljs-number">2</span>)
    ...

<span class="hljs-comment"># å¦ä¸€ä¸ªçº¿ç¨‹åå‘é¡ºåº</span>
<span class="hljs-meta">@transaction.atomic</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">debit2</span>(<span class="hljs-params">request</span>):
    b = Account.objects.select_for_update().get(<span class="hljs-built_in">id</span>=<span class="hljs-number">2</span>)  <span class="hljs-comment"># å…ˆ 2</span>
    a = Account.objects.select_for_update().get(<span class="hljs-built_in">id</span>=<span class="hljs-number">1</span>)  <span class="hljs-comment"># å 1</span>
</code></pre>
<p>äº¤å‰æ‹¿é” â†’ æ­»é”ã€‚</p>
<p><strong>ä¿®å¤</strong></p>
<ul>
<li>å›ºå®šåŠ é”é¡ºåºï¼ˆæ€»æ˜¯ 1â†’2ï¼‰</li>
<li>ç²¾ç®€äº‹åŠ¡èŒƒå›´ï¼Œå°½å¿«æäº¤</li>
<li>æ•è·é‡è¯•ï¼ˆDjango 3.2+ è‡ªåŠ¨é‡è¯• <code>max_retries=3</code>ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-9">9. IntegrityError â€”â€” å¤–é”®çº§è”å¤±è´¥</h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.db.utils.IntegrityError: (1452, 'Cannot add or update a child row: a foreign key constraint fails ...)
</code></pre>
<p><strong>å¤ç°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span>(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)

Order.objects.create(user_id=<span class="hljs-number">9999</span>)  <span class="hljs-comment"># ä¸å­˜åœ¨ user 9999</span>
</code></pre>
<p><strong>ä¿®å¤</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¿è¯å¤–é”®å€¼å­˜åœ¨</span>
user = User.objects.get(pk=user_id)
Order.objects.create(user=user)
</code></pre>
<hr/>
<h2 data-id="heading-10">10. ProgrammingError â€”â€” æ‹¼é”™ raw SQL</h2>
<p><strong>å¼‚å¸¸</strong></p>
<pre><code class="hljs language-django" lang="django">django.db.utils.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual ...")
</code></pre>
<p><strong>å¤ç°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> connection
<span class="hljs-keyword">with</span> connection.cursor() <span class="hljs-keyword">as</span> c:
    c.execute(<span class="hljs-string">"SELCT * FROM users WHERE id = %s"</span>, [<span class="hljs-number">1</span>])  <span class="hljs-comment"># SELCT æ‹¼é”™</span>
</code></pre>
<p><strong>ä¿®å¤</strong></p>
<ul>
<li>ç”¨ ORM å…ˆé¡¶ä¸€æ³¢ï¼Œå¿…é¡» raw æ—¶å¼€ <code>sql_mode=STRICT</code> å¹¶æ‰“å°è¯­å¥å†æ‰§è¡Œã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-11">ä¸€é”®é€ŸæŸ¥è¡¨ï¼ˆæ‰“å°è´´å¢™ï¼‰</h2>





















































<table><thead><tr><th>é”™è¯¯ç </th><th>Django å¼‚å¸¸</th><th>å…¸å‹åœºæ™¯</th><th>æœ€å¿«ä¿®å¤</th></tr></thead><tbody><tr><td>1062</td><td>IntegrityError</td><td>å”¯ä¸€é”®å†²çª</td><td><code>get_or_create</code></td></tr><tr><td>1406</td><td>DataError</td><td>åˆ—å¤ªé•¿</td><td>åŠ é•¿/æˆªæ–­</td></tr><tr><td>1048</td><td>IntegrityError</td><td>éç©ºæœªç»™</td><td>è®¾é»˜è®¤å€¼</td></tr><tr><td>1366</td><td>OperationalError</td><td>emoji ä¹±ç </td><td>æ”¹ <code>utf8mb4</code></td></tr><tr><td>2013</td><td>OperationalError</td><td>é•¿æŸ¥è¯¢</td><td>ç´¢å¼•+åˆ†é¡µ</td></tr><tr><td>1040</td><td>OperationalError</td><td>è¿æ¥æ‰“æ»¡</td><td>è¿æ¥æ± +æ¶¨ä¸Šé™</td></tr><tr><td>1213</td><td>OperationalError</td><td>æ­»é”</td><td>å›ºå®šé¡ºåº+é‡è¯•</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-12">ç»“è¯­</h2>
<p>æŠŠä¸Šé¢ 10 ä¸ªæ¡ˆä¾‹æŒ¨ä¸ª <code>python manage.py shell</code> è·‘ä¸€éï¼Œå†é‡åˆ°ä¸€æ ·æ—¥å¿—å°±èƒ½ç§’å®šä½ã€‚<br/>
å»ºè®®æ”¶è— + æ˜Ÿæ ‡ï¼Œä¸‹æ¬¡é¢è¯•/ä¸Šçº¿/æ•‘ç«ï¼Œç›´æ¥ç¿»è¡¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterç»„ä»¶å°è£…ï¼šè§†é¢‘æ’­æ”¾ç»„ä»¶å…¨å±€å°è£…]]></title>    <link>https://juejin.cn/post/7588028859540291610</link>    <guid>https://juejin.cn/post/7588028859540291610</guid>    <pubDate>2025-12-26T12:52:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859540291610" data-draft-id="7582777037864190002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterç»„ä»¶å°è£…ï¼šè§†é¢‘æ’­æ”¾ç»„ä»¶å…¨å±€å°è£…"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter"/> <meta itemprop="datePublished" content="2025-12-26T12:52:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SoaringHeart"/> <meta itemprop="url" content="https://juejin.cn/user/3544481219481374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterç»„ä»¶å°è£…ï¼šè§†é¢‘æ’­æ”¾ç»„ä»¶å…¨å±€å°è£…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3544481219481374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SoaringHeart
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:52:52.000Z" title="Fri Dec 26 2025 12:52:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    21
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€éœ€æ±‚æ¥æº</h2>
<p>æœ€è¿‘è¦å¼€å‘ä¸€ä¸ªåœ¨çº¿è§†é¢‘æ’­æ”¾çš„åŠŸèƒ½ï¼Œæ¯æ¬¡å®æ—¶è·å–æ’­æ”¾ï¼Œæœ‰äº›å¡é¡¿å’Œåˆå§‹åŒ–æ…¢çš„é—®é¢˜ï¼Œå°±éšæ‰‹ä¼˜åŒ–ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä½¿ç”¨ç¤ºä¾‹</h2>
<p>1ã€æ•°æ®æº</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VideoDetailsProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ChangeNotifier</span> </span>{

    <span class="hljs-comment">/// å½“å‰æ’­æ”¾ä¸­çš„</span>
    <span class="hljs-keyword">final</span> _videoModelController = <span class="hljs-type">StreamController</span>&lt;<span class="hljs-type">VideoDetailModel</span>?&gt;.broadcast();

    <span class="hljs-comment">/// å½“å‰æ’­æ”¾ä¸­ Stream&lt;VideoDetailModel&gt;</span>
    <span class="hljs-type">Stream</span>&lt;<span class="hljs-type">VideoDetailModel</span>?&gt; get videoModelStream =&gt; _videoModelController.stream;


    <span class="hljs-comment">/// ç‚¹å‡»ï¼ˆmodelä¸ä¸ºç©ºæ—¶æ’­æ”¾ï¼Œä¸ºç©ºæ—¶å…³é—­ï¼‰</span>
    sinkModelForVideoPlayer({required <span class="hljs-type">VideoDetailModel</span>? model}) {
      _videoModelController.add(model);
    }

}
</code></pre>
<p>2ã€æ˜¾ç¤ºæ’­æ”¾å™¨ç»„ä»¶</p>
<pre><code class="hljs language-php" lang="php">StreamBuilder&lt;VideoDetailModel<span class="hljs-meta">?&gt;</span>(
  stream: provider.videoModelStream,
  builder: (context, snapshot) {
    <span class="hljs-keyword">if</span> (snapshot.data == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SizedBox</span>();
    }
    <span class="hljs-keyword">final</span> model = snapshot.data;
    <span class="hljs-keyword">if</span> (model?.isVideo != <span class="hljs-literal">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SizedBox</span>();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">SafeArea</span>(
      <span class="hljs-attr">top</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">bottom</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">left</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">right</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">child</span>: <span class="hljs-title function_ invoke__">Container</span>(
        <span class="hljs-attr">decoration</span>: <span class="hljs-title function_ invoke__">BoxDecoration</span>(
          <span class="hljs-attr">color</span>: Colors.black,
        ),
        <span class="hljs-attr">child</span>: <span class="hljs-title function_ invoke__">AppVideoPlayer</span>(
          <span class="hljs-attr">key</span>: <span class="hljs-title function_ invoke__">Key</span>(model?.url ?? <span class="hljs-string">""</span>),
          <span class="hljs-attr">url</span>: model?.url ?? <span class="hljs-string">""</span>,
          <span class="hljs-attr">onFullScreen</span>: (value) async {
            <span class="hljs-keyword">if</span> (!value) {
              await Future.<span class="hljs-title function_ invoke__">delayed</span>(<span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">Duration</span>(<span class="hljs-attr">milliseconds</span>: <span class="hljs-number">300</span>));//ç­‰å¾…æ—‹è½¬å®Œæˆ
              SystemChromeExt.<span class="hljs-title function_ invoke__">changeDeviceOrientation</span>(<span class="hljs-attr">isPortrait</span>: <span class="hljs-literal">true</span>);
            }
          },
          <span class="hljs-attr">onClose</span>: () {
            DLog.<span class="hljs-title function_ invoke__">d</span>(<span class="hljs-string">"close"</span>);
            provider.<span class="hljs-title function_ invoke__">sinkModelForVideoPlayer</span>(<span class="hljs-attr">model</span>: <span class="hljs-literal">null</span>);
          },
        ),
      ),
    );
  },
)
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€æºç </h2>
<h4 data-id="heading-3">1ã€AppVideoPlayer.dart</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  AppVideoPlayer.dart</span>
<span class="hljs-comment">//  flutter_templet_project</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by shang on 2025/12/12 18:11.</span>
<span class="hljs-comment">//  Copyright Â© 2025/12/12 shang. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">'package:chewie/chewie.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/basicWidget/AppVideoPlayer/AppVideoPlayerService.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/extension/extension_local.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:video_player/video_player.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">æ’­æ”¾å™¨</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppVideoPlayer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> AppVideoPlayer({
    <span class="hljs-keyword">super</span>.key,
    <span class="hljs-keyword">this</span>.controller,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.url,
    <span class="hljs-keyword">this</span>.autoPlay = <span class="hljs-keyword">true</span>,
    <span class="hljs-keyword">this</span>.looping = <span class="hljs-keyword">false</span>,
    <span class="hljs-keyword">this</span>.aspectRatio = <span class="hljs-number">16</span> / <span class="hljs-number">9</span>,
    <span class="hljs-keyword">this</span>.isPortrait = <span class="hljs-keyword">true</span>,
    <span class="hljs-keyword">this</span>.fullScreenVN,
    <span class="hljs-keyword">this</span>.onFullScreen,
    <span class="hljs-keyword">this</span>.onClose,
  });

  <span class="hljs-keyword">final</span> AppVideoPlayerController? controller;

  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> url;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> autoPlay;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> looping;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> aspectRatio;

  <span class="hljs-comment">/// <span class="markdown">è®¾å¤‡æ–¹å‘</span></span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> isPortrait;

  <span class="hljs-keyword">final</span> ValueNotifier&lt;<span class="hljs-built_in">bool</span>&gt;? fullScreenVN;

  <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">bool</span> isFullScreen)? onFullScreen;

  <span class="hljs-keyword">final</span> VoidCallback? onClose;

  <span class="hljs-meta">@override</span>
  State&lt;AppVideoPlayer&gt; createState() =&gt; _AppVideoPlayerState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_AppVideoPlayerState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">AppVideoPlayer</span>&gt; <span class="hljs-title">with</span> <span class="hljs-title">WidgetsBindingObserver</span>, <span class="hljs-title">AutomaticKeepAliveClientMixin</span> </span>{
  VideoPlayerController? _videoController;
  ChewieController? _chewieController;

  <span class="hljs-built_in">Duration</span> position = <span class="hljs-built_in">Duration</span>.zero;

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> dispose() {
    widget.controller?._detach(<span class="hljs-keyword">this</span>);
    WidgetsBinding.instance.removeObserver(<span class="hljs-keyword">this</span>);
    _onClose();
    <span class="hljs-comment">// ä¸é”€æ¯ VideoPlayerControllerï¼Œè®©å…¨å±€å¤ç”¨</span>
    <span class="hljs-comment">// _chewieController?.dispose();</span>
    <span class="hljs-keyword">super</span>.dispose();
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    widget.controller?._attach(<span class="hljs-keyword">this</span>);
    WidgetsBinding.instance.addObserver(<span class="hljs-keyword">this</span>);
    WidgetsBinding.instance.addPostFrameCallback((_) {
      initPlayer();
    });
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didChangeAppLifecycleState(AppLifecycleState state) {
    <span class="hljs-keyword">switch</span> (state) {
      <span class="hljs-keyword">case</span> AppLifecycleState.inactive:
      <span class="hljs-keyword">case</span> AppLifecycleState.hidden:
      <span class="hljs-keyword">case</span> AppLifecycleState.paused:
        {
          _chewieController?.pause();
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> AppLifecycleState.detached:
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> AppLifecycleState.resumed:
        {
          _chewieController?.play();
        }
        <span class="hljs-keyword">break</span>;
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; initPlayer() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// DLog.d(widget.url.split("/").last);</span>
    <span class="hljs-keyword">assert</span>(widget.url.startsWith(<span class="hljs-string">"http"</span>), <span class="hljs-string">"url é”™è¯¯"</span>);

    _videoController = <span class="hljs-keyword">await</span> AppVideoPlayerService.instance.getController(widget.url);

    _chewieController?.dispose();
    _chewieController = ChewieController(
      videoPlayerController: _videoController!,
      autoPlay: widget.autoPlay,
      looping: widget.looping,
      aspectRatio: widget.aspectRatio,
      autoInitialize: <span class="hljs-keyword">true</span>,
      allowFullScreen: <span class="hljs-keyword">true</span>,
      allowMuting: <span class="hljs-keyword">false</span>,
      showControlsOnInitialize: <span class="hljs-keyword">false</span>,
      <span class="hljs-comment">// customControls: const AppVideoControls(),</span>
    );

    _chewieController!.addListener(() {
      <span class="hljs-keyword">final</span> isFullScreen = _chewieController!.isFullScreen;
      widget.fullScreenVN?.value = isFullScreen;
      widget.onFullScreen?.call(isFullScreen);
      <span class="hljs-keyword">if</span> (isFullScreen) {
        DLog.d(<span class="hljs-string">"è¿›å…¥å…¨å±"</span>);
      } <span class="hljs-keyword">else</span> {
        DLog.d(<span class="hljs-string">"é€€å‡ºå…¨å±"</span>);
      }
    });
    <span class="hljs-keyword">if</span> (mounted) {
      setState(() {});
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; _onClose() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (_videoController?.value.isPlaying == <span class="hljs-keyword">true</span>) {
      _videoController?.pause();
    }
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didUpdateWidget(<span class="hljs-keyword">covariant</span> AppVideoPlayer oldWidget) {
    <span class="hljs-keyword">super</span>.didUpdateWidget(oldWidget);
    <span class="hljs-keyword">if</span> (oldWidget.url != widget.url) {
      initPlayer();
    }
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didChangeDependencies() {
    <span class="hljs-keyword">super</span>.didChangeDependencies();

    <span class="hljs-comment">/// <span class="markdown">ğŸ”¥å±å¹•æ¨ªç«–åˆ‡æ¢æ—¶ rebuild Chewieï¼Œä½†ä¸ rebuild video</span></span>
    DLog.d([MediaQuery.of(context).orientation]);
    <span class="hljs-comment">// setState(() {});</span>
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">super</span>.build(context);
    <span class="hljs-keyword">if</span> (widget.url.startsWith(<span class="hljs-string">"http"</span>) != <span class="hljs-keyword">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> SizedBox();
    }

    <span class="hljs-keyword">if</span> (_chewieController == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Center(child: CircularProgressIndicator());
    }
    <span class="hljs-comment">// return Chewie(controller: _chewieController!);</span>
    <span class="hljs-keyword">return</span> Stack(
      children: [
        Positioned.fill(
          child: Chewie(
            controller: _chewieController!,
          ),
        ),
        Positioned(
          right: <span class="hljs-number">20</span>,
          top: <span class="hljs-number">10</span>,
          child: Container(
            <span class="hljs-comment">// decoration: BoxDecoration(</span>
            <span class="hljs-comment">//   color: Colors.red,</span>
            <span class="hljs-comment">//   border: Border.all(color: Colors.blue),</span>
            <span class="hljs-comment">// ),</span>
            child: buildCloseBtn(onTap: widget.onClose),
          ),
        ),
      ],
    );
  }

  Widget buildCloseBtn({VoidCallback? onTap}) {
    <span class="hljs-keyword">return</span> GestureDetector(
      behavior: HitTestBehavior.opaque,
      onTap: () {
        DLog.d(<span class="hljs-string">"buildCloseBtn"</span>);
        _onClose();
        <span class="hljs-keyword">if</span> (onTap != <span class="hljs-keyword">null</span>) {
          onTap();
          <span class="hljs-keyword">return</span>;
        }
        Navigator.pop(context);
      },
      child: Container(
        <span class="hljs-comment">// padding: EdgeInsets.all(6),</span>
        <span class="hljs-comment">// decoration: BoxDecoration(</span>
        <span class="hljs-comment">//   color: Colors.black54,</span>
        <span class="hljs-comment">//   shape: BoxShape.circle,</span>
        <span class="hljs-comment">//   border: Border.all(color: Colors.blue),</span>
        <span class="hljs-comment">// ),</span>
        child: <span class="hljs-keyword">const</span> Icon(Icons.close, color: Colors.white, size: <span class="hljs-number">24</span>),
      ),
    );
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> wantKeepAlive =&gt; <span class="hljs-keyword">true</span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppVideoPlayerController</span> </span>{
  _AppVideoPlayerState? _anchor;

  <span class="hljs-keyword">void</span> _attach(_AppVideoPlayerState anchor) {
    _anchor = anchor;
  }

  <span class="hljs-keyword">void</span> _detach(_AppVideoPlayerState anchor) {
    <span class="hljs-keyword">if</span> (_anchor == anchor) {
      _anchor = <span class="hljs-keyword">null</span>;
    }
  }

  VideoPlayerController? <span class="hljs-keyword">get</span> videoController {
    <span class="hljs-keyword">assert</span>(_anchor != <span class="hljs-keyword">null</span>);
    <span class="hljs-keyword">return</span> _anchor!._videoController;
  }

  ChewieController? <span class="hljs-keyword">get</span> chewieController {
    <span class="hljs-keyword">assert</span>(_anchor != <span class="hljs-keyword">null</span>);
    <span class="hljs-keyword">return</span> _anchor!._chewieController;
  }
}
</code></pre>
<h4 data-id="heading-4">2ã€AppVideoPlayerService.dart</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  AppVideoPlayerService.dart</span>
<span class="hljs-comment">//  flutter_templet_project</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by shang on 2025/12/12 18:10.</span>
<span class="hljs-comment">//  Copyright Â© 2025/12/12 shang. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/extension/extension_local.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:quiver/collection.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:video_player/video_player.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">è§†é¢‘æ’­æ”¾æ§åˆ¶å™¨å…¨å±€ç®¡ç†</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppVideoPlayerService</span> </span>{
  AppVideoPlayerService._();
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> AppVideoPlayerService _instance = AppVideoPlayerService._();
  <span class="hljs-keyword">factory</span> AppVideoPlayerService() =&gt; _instance;
  <span class="hljs-keyword">static</span> AppVideoPlayerService <span class="hljs-keyword">get</span> instance =&gt; _instance;

  <span class="hljs-comment">/// <span class="markdown">æ’­æ”¾å™¨å­—å…¸</span></span>
  LruMap&lt;<span class="hljs-built_in">String</span>, VideoPlayerController&gt; <span class="hljs-keyword">get</span> controllerMap =&gt; _controllerMap;
  <span class="hljs-comment">// final _controllerMap = &lt;String, VideoPlayerController&gt;{};</span>
  <span class="hljs-keyword">final</span> _controllerMap = LruMap&lt;<span class="hljs-built_in">String</span>, VideoPlayerController&gt;(maximumSize: <span class="hljs-number">10</span>);

  <span class="hljs-comment">/// <span class="markdown">æœ€æ–°ä½¿ç”¨æ’­æ”¾å™¨</span></span>
  VideoPlayerController? current;

  <span class="hljs-comment">/// <span class="markdown">æœ‰ç¼“å­˜æ§åˆ¶å™¨</span></span>
  <span class="hljs-built_in">bool</span> hasCtrl({<span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> url}) =&gt; _controllerMap[url] != <span class="hljs-keyword">null</span>;

  <span class="hljs-comment">/// <span class="markdown">æ˜¯ç½‘ç»œè§†é¢‘</span></span>
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> isVideo(<span class="hljs-built_in">String?</span> url) {
    <span class="hljs-keyword">if</span> (url?.isNotEmpty != <span class="hljs-keyword">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">final</span> videoUri = <span class="hljs-built_in">Uri</span>.tryParse(url!);
    <span class="hljs-keyword">if</span> (videoUri == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">final</span> videoExt = [<span class="hljs-string">'.mp4'</span>, <span class="hljs-string">'.mov'</span>, <span class="hljs-string">'.avi'</span>, <span class="hljs-string">'.wmv'</span>, <span class="hljs-string">'.flv'</span>, <span class="hljs-string">'.mkv'</span>, <span class="hljs-string">'.webm'</span>];
    <span class="hljs-keyword">final</span> ext = url.toLowerCase();
    <span class="hljs-keyword">final</span> result = videoExt.any((e) =&gt; ext.endsWith(e));
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">/// <span class="markdown">è·å– VideoPlayerController</span></span>
  Future&lt;VideoPlayerController?&gt; getController(<span class="hljs-built_in">String</span> url, {<span class="hljs-built_in">bool</span> isLog = <span class="hljs-keyword">false</span>}) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">assert</span>(url.startsWith(<span class="hljs-string">"http"</span>), <span class="hljs-string">"å¿…é¡»æ˜¯è§†é¢‘é“¾æ¥,è¯·æ£€æŸ¥é“¾æ¥æ˜¯å¦åˆæ³•"</span>);
    <span class="hljs-keyword">final</span> vc = _controllerMap[url];
    <span class="hljs-keyword">if</span> (vc != <span class="hljs-keyword">null</span>) {
      current = vc;
      <span class="hljs-keyword">if</span> (isLog) {
        DLog.d([<span class="hljs-string">"ç¼“å­˜: <span class="hljs-subst">${vc.hashCode}</span>"</span>]);
      }
      <span class="hljs-keyword">return</span> vc;
    }

    <span class="hljs-keyword">final</span> videoUri = <span class="hljs-built_in">Uri</span>.tryParse(url);
    <span class="hljs-keyword">if</span> (videoUri == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-keyword">final</span> ctrl = VideoPlayerController.networkUrl(videoUri);
    <span class="hljs-keyword">await</span> ctrl.initialize();
    _controllerMap[url] = ctrl;
    current = ctrl;
    <span class="hljs-keyword">if</span> (isLog) {
      DLog.d([<span class="hljs-string">"æ–°å»º: <span class="hljs-subst">${_controllerMap[url].hashCode}</span>"</span>]);
    }
    <span class="hljs-keyword">return</span> ctrl;
  }

  <span class="hljs-comment">/// <span class="markdown">æ’­æ”¾</span></span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; play({<span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> url, <span class="hljs-built_in">bool</span> onlyOne = <span class="hljs-keyword">true</span>}) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">await</span> getController(url);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> e <span class="hljs-keyword">in</span> _controllerMap.entries) {
      <span class="hljs-keyword">if</span> (e.key == url) {
        <span class="hljs-keyword">if</span> (!e.value.value.isPlaying) {
          e.value.play();
        } <span class="hljs-keyword">else</span> {
          e.value.pause();
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (onlyOne) {
          e.value.pause();
        }
      }
    }
  }

  <span class="hljs-comment">/// <span class="markdown">æš‚åœæ‰€æœ‰è§†é¢‘</span></span>
  <span class="hljs-keyword">void</span> pauseAll() {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> e <span class="hljs-keyword">in</span> _controllerMap.entries) {
      e.value.pause();
    }
  }

  <span class="hljs-keyword">void</span> dispose(<span class="hljs-built_in">String</span> url) {
    _controllerMap[url]?.dispose();
    _controllerMap.remove(url);
  }

  <span class="hljs-keyword">void</span> disposeAll() {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> c <span class="hljs-keyword">in</span> _controllerMap.values) {
      c.dispose();
    }
    _controllerMap.clear();
  }
}
</code></pre>
<h2 data-id="heading-5">æœ€åã€æ€»ç»“</h2>
<p>1ã€æ’­æ”¾è§†é¢‘ç»„ä»¶å’Œè§†é¢‘åˆ—è¡¨æ˜¯åˆ†å¼€çš„ï¼Œé€šè¿‡ç›‘å¬ VideoPlayerController ä¿æŒçŠ¶æ€ï¼ˆæ’­æ”¾ï¼Œæš‚åœï¼‰ä¸€è‡´æ€§ï¼Œç±»ä¼¼ç½‘ç»œè§†é¢‘å°çª—å£æ’­æ”¾ã€‚</p>
<p>2ã€é€šè¿‡ AppVideoPlayerService å®ç°å…¨å±€ VideoPlayerController ç¼“å­˜ï¼Œæé«˜åˆå§‹åŒ–åŠ è½½é€Ÿåº¦ã€‚</p>
<p>3ã€é€šè¿‡ quiver çš„ LruMap å®ç°æœ€å¤§ç¼“å­˜æ•°æ§åˆ¶ï¼Œé˜²æ­¢å†…å­˜çˆ†ç‚¸ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshang1219178163%2Fflutter_templet_project%2Ftree%2Fv3.27.0%2Flib%2FbasicWidget%2FAppVideoPlayer" target="_blank" title="https://github.com/shang1219178163/flutter_templet_project/tree/v3.27.0/lib/basicWidget/AppVideoPlayer" ref="nofollow noopener noreferrer">github</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯å­¦ä¹ AIã€‘Pythonç¯å¢ƒæ­å»º]]></title>    <link>https://juejin.cn/post/7588004601393266722</link>    <guid>https://juejin.cn/post/7588004601393266722</guid>    <pubDate>2025-12-27T09:04:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588004601393266722" data-draft-id="7588004601393250338" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯å­¦ä¹ AIã€‘Pythonç¯å¢ƒæ­å»º"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T09:04:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯å­¦ä¹ AIã€‘Pythonç¯å¢ƒæ­å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T09:04:30.000Z" title="Sat Dec 27 2025 09:04:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">Anacondaï¼šå¤šç‰ˆæœ¬ç¯å¢ƒç®¡ç†å·¥å…·</h2>
<h3 data-id="heading-1">å·¥å…·æ¦‚è¿°</h3>
<p>Anaconda æ˜¯ Python æ•°æ®ç§‘å­¦é¢†åŸŸå¸¸ç”¨çš„ç¯å¢ƒç®¡ç†å·¥å…·ï¼Œå¯å¿«é€Ÿåˆ›å»ºã€åˆ‡æ¢å¤šç‰ˆæœ¬ Python ç¯å¢ƒï¼Œé¿å…ç‰ˆæœ¬å†²çªï¼ŒåŒæ—¶å†…ç½®å¤§é‡ç§‘å­¦è®¡ç®—ä¾èµ–åŒ…ã€‚</p>
<h3 data-id="heading-2">å®‰è£…æ–¹å¼</h3>
<h4 data-id="heading-3">1. ä¸‹è½½æ¸ é“é€‰æ‹©ï¼ˆä¼˜å…ˆé•œåƒæºï¼‰</h4>
<p>å®˜æ–¹ä¸‹è½½æ¸ é“å­˜åœ¨ä¸¤å¤§ç—›ç‚¹ï¼šâ‘  éœ€ç™»å½•è´¦å·æ‰èƒ½ä¸‹è½½ï¼›â‘¡ æœåŠ¡å™¨ä½äºå¢ƒå¤–ï¼Œå›½å†…ä¸‹è½½é€Ÿåº¦ææ…¢ã€‚</p>
<p><strong>æ¨èæ¸ é“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmirrors.tuna.tsinghua.edu.cn%2Fanaconda%2Farchive%2F" target="_blank" title="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/" ref="nofollow noopener noreferrer">æ¸…åé•œåƒæº</a>ï¼Œæ— éœ€ç™»å½•ï¼Œä¸‹è½½é€Ÿåº¦å¿«ï¼Œèµ„æºä¸å®˜æ–¹åŒæ­¥ã€‚</p>
<h4 data-id="heading-4">2. ç‰ˆæœ¬é€‰æ‹©åŸåˆ™</h4>
<p>æ ¸å¿ƒæ ‡å‡†ï¼šä»¥ã€Œå‘å¸ƒæ—¥æœŸã€ä¸ºåˆ¤æ–­ä¾æ®ï¼Œä¼˜å…ˆé€‰æ‹©æœ€æ–°ç‰ˆæœ¬ï¼Œé¿å…æ—§ç‰ˆæœ¬å­˜åœ¨çš„å…¼å®¹æ€§é”™è¯¯ã€å®‰è£…å¼‚å¸¸ç­‰é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8abfa762ea74bdfb015f629cd3d45ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5rOl56eN6I236Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767431070&amp;x-signature=Ew1mhq2W%2BqyonwoZ9hYuv8ivBGc%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šä¸è¦ç›´æ¥é€‰æ‹©ç½‘é¡µæœ€åº•éƒ¨çš„ç‰ˆæœ¬ï¼Œéœ€æŒ‰å‘å¸ƒæ—¥æœŸæ’åºåæŒ‘é€‰æœ€æ–°ç‰ˆã€‚</p>
</blockquote>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šå®˜æ–¹å·²åœæ­¢å‘å¸ƒWindows32ä½çš„è½¯ä»¶</p>
</blockquote>
<h4 data-id="heading-5">3. é…ç½®ç¯å¢ƒå˜é‡</h4>
<p>Anaconda å®‰è£…åéœ€æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¦åˆ™æ— æ³•åœ¨æ§åˆ¶å°ç›´æ¥ä½¿ç”¨ <code>conda</code> å‘½ä»¤ã€‚</p>
<h5 data-id="heading-6">3.1 é…ç½®æ­¥éª¤</h5>
<ol>
<li>è¿›å…¥ç³»ç»Ÿè®¾ç½®ï¼šè®¾ç½® â†’ ç³»ç»Ÿ â†’ å…³äº â†’ é«˜çº§ç³»ç»Ÿè®¾ç½® â†’ ç¯å¢ƒå˜é‡ï¼›</li>
<li>åœ¨ã€Œç³»ç»Ÿå˜é‡ã€ä¸­æ‰¾åˆ° <code>Path</code> å˜é‡ï¼Œç‚¹å‡»ã€Œç¼–è¾‘ã€ï¼›</li>
<li>æ–°å¢ Anaconda ç›¸å…³è·¯å¾„ï¼ˆå‚è€ƒä¸‹æ–¹é»˜è®¤è·¯å¾„ï¼Œéœ€æ ¹æ®å®é™…å®‰è£…ç›®å½•è°ƒæ•´ï¼‰ï¼›</li>
<li>ä¿å­˜é…ç½®ï¼Œé‡å¯æ§åˆ¶å°ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚</li>
</ol>
<h5 data-id="heading-7">3.2 é»˜è®¤ç¯å¢ƒå˜é‡è·¯å¾„ï¼ˆå‚è€ƒï¼‰</h5>
<pre><code class="hljs language-text" lang="text">C:\ProgramData\anaconda3
C:\ProgramData\anaconda3\Scripts
C:\ProgramData\anaconda3\Library\bin
</code></pre>
<h5 data-id="heading-8">3.3 å®‰è£…ä¸é…ç½®éªŒè¯</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ conda ç‰ˆæœ¬ï¼Œæ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬å·åˆ™å®‰è£…é…ç½®æˆåŠŸ</span>
conda --version
</code></pre>
<blockquote>
<p><strong>æç¤º</strong>ï¼šè‹¥æç¤ºâ€œconda ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤â€ï¼Œè¯·æ£€æŸ¥ç¯å¢ƒå˜é‡è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œæˆ–é‡å¯æ§åˆ¶å°é‡è¯•ã€‚</p>
</blockquote>
<h3 data-id="heading-9">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>Anaconda çš„æ ¸å¿ƒä»·å€¼åœ¨äºç¯å¢ƒçš„åˆ›å»ºã€åˆ‡æ¢ã€ç®¡ç†ï¼Œå»ºè®®ä½¿ç”¨ Anaconda  å†…ç½®å®‰è£…çš„ç•Œé¢åº”ç”¨ Anaconda  Navigatorã€‚</p>
<h2 data-id="heading-10">uvï¼š Python åŒ…ç®¡ç†å™¨</h2>
<h3 data-id="heading-11">å·¥å…·æ¦‚è¿°</h3>
<p>uv ç”± Astral å…¬å¸åŸºäº Rust å¼€å‘ï¼Œå…¼å®¹ pip ä½¿ç”¨ä¹ æƒ¯ï¼Œæ ¸å¿ƒä¼˜åŠ¿ä¸ºã€Œå®‰è£…é€Ÿåº¦æå¿«ã€ã€Œå†…å­˜å ç”¨ä½ã€ã€Œå†…ç½®è™šæ‹Ÿç¯å¢ƒç®¡ç†ã€ï¼Œæ˜¯ pip/venv çš„é«˜æ•ˆæ›¿ä»£æ–¹æ¡ˆï¼Œå¯å¤§å¹…æå‡åŒ…å®‰è£…ä¸é¡¹ç›®ç®¡ç†æ•ˆç‡ã€‚</p>
<h3 data-id="heading-12">å®‰è£…æ–¹å¼</h3>
<h4 data-id="heading-13">1. å®‰è£…æ–¹æ³•ï¼ˆä¼˜å…ˆé•œåƒæºï¼‰</h4>
<p>ç›´æ¥ä»å®˜æ–¹æºå®‰è£…æ˜“å› ç½‘ç»œé—®é¢˜å¯¼è‡´è¶…æ—¶ï¼Œæ¨èä½¿ç”¨å›½å†…é•œåƒæºï¼ŒWindows/macOS/Linux ç³»ç»Ÿé€šç”¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¸…å PyPI é•œåƒå®‰è£…ï¼ˆæ¨èï¼‰</span>
pip3 install uv -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<h5 data-id="heading-14">1.1 å®‰è£…éªŒè¯</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ uv ç‰ˆæœ¬ï¼Œæ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬å·åˆ™å®‰è£…æˆåŠŸ</span>
uv --version
</code></pre>
<blockquote>
<p><strong>æç¤º</strong>ï¼šè‹¥ Windows ç³»ç»Ÿæç¤ºâ€œuv ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤â€ï¼Œéœ€æ£€æŸ¥ Python çš„ Scripts ç›®å½•ï¼ˆå¦‚ C:\ProgramData\anaconda3\Scriptsï¼‰æ˜¯å¦åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œæˆ–é‡å¯ç»ˆç«¯é‡è¯•ã€‚</p>
</blockquote>
<h3 data-id="heading-15">ä½¿ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-16">1. åˆå§‹åŒ–é¡¹ç›®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆå§‹åŒ–åä¸º project_demo çš„é¡¹ç›®ï¼ˆä¼šè‡ªåŠ¨ç”Ÿæˆ pyproject.toml æ–‡ä»¶ï¼‰</span>
uv init project_demo
</code></pre>
<h4 data-id="heading-17">2. é…ç½®é•œåƒæº</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>pyproject.toml</code> æ–‡ä»¶ä¸­é…ç½® uv é•œåƒæºï¼Œç¡®ä¿åç»­åŒ…å®‰è£…é€Ÿåº¦ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[project]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"project_demo"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">requires-python</span> = <span class="hljs-string">"&gt;=3.13"</span>  <span class="hljs-comment"># éœ€æ ¹æ®å®é™…ä½¿ç”¨çš„ Python ç‰ˆæœ¬è°ƒæ•´</span>

<span class="hljs-section">[tool.uv]</span>
<span class="hljs-comment"># é…ç½®æ¸…å PyPI é•œåƒæº</span>
<span class="hljs-attr">index-url</span> = <span class="hljs-string">"https://pypi.tuna.tsinghua.edu.cn/simple"</span>
</code></pre>
<blockquote>
<p><strong>æç¤º</strong>ï¼šå…¨å±€å®‰è£…uvæ¨¡å—ï¼Œéœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdçª—å£</p>
</blockquote>
<h4 data-id="heading-18">3.å®‰è£…æ¨¡å—</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… langchain_openai æ¨¡å—</span>
uv add langchain_openai
</code></pre>
<h2 data-id="heading-19">Ruffï¼šé«˜æ€§èƒ½ä»£ç æ£€æŸ¥ä¸æ ¼å¼åŒ–å·¥å…·</h2>
<h3 data-id="heading-20">å·¥å…·æ¦‚è¿°</h3>
<p>Ruff æ˜¯åŸºäº Rust å¼€å‘çš„ Python ä»£ç æ£€æŸ¥ï¼ˆLinterï¼‰ä¸æ ¼å¼åŒ–ï¼ˆFormatterï¼‰äºŒåˆä¸€å·¥å…·ï¼Œæ ¸å¿ƒä»·å€¼æ˜¯è‡ªåŠ¨åŒ–è§„èŒƒä»£ç é£æ ¼ã€æ£€æµ‹æ½œåœ¨é—®é¢˜ï¼Œæå‡å¼€å‘æ•ˆç‡ä¸ä»£ç è´¨é‡ã€‚</p>
<h3 data-id="heading-21">é…ç½®æ–‡ä»¶ï¼ˆpyproject.tomlï¼‰</h3>
<p>é€šè¿‡é¡¹ç›®æ ¹ç›®å½•çš„ <code>pyproject.toml</code> æ–‡ä»¶è‡ªå®šä¹‰ Ruff è§„åˆ™ï¼Œä¼˜å…ˆçº§é«˜äºé»˜è®¤é…ç½®ï¼Œå¯é€‚é…é¡¹ç›®ä¸“å±è§„èŒƒã€‚</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[project]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"project-demo"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">requires-python</span> = <span class="hljs-string">"&gt;=3.10"</span>

<span class="hljs-section">[tool.ruff]</span>
<span class="hljs-attr">target-version</span> = <span class="hljs-string">"py310"</span>  <span class="hljs-comment"># é€‚é…çš„ Python ç‰ˆæœ¬ï¼Œä¸ä¸Šæ–¹ä¿æŒä¸€è‡´</span>
<span class="hljs-attr">line-length</span> = <span class="hljs-number">88</span>  <span class="hljs-comment"># ä»£ç è¡Œé•¿åº¦é™åˆ¶ï¼ˆé»˜è®¤ 88ï¼Œç¬¦åˆ PEP8 è§„èŒƒï¼‰</span>

<span class="hljs-section">[tool.ruff.lint]</span>
<span class="hljs-comment"># å¯ç”¨æ ¸å¿ƒè§„åˆ™é›†ï¼ˆæ¨èï¼Œé¿å…è¿‡åº¦æ£€æŸ¥ï¼‰</span>
<span class="hljs-attr">select</span> = [<span class="hljs-string">"E"</span>, <span class="hljs-string">"W"</span>, <span class="hljs-string">"F"</span>, <span class="hljs-string">"I"</span>, <span class="hljs-string">"B"</span>]
<span class="hljs-comment"># ç¦ç”¨ç‰¹å®šè§„åˆ™ï¼ˆæ ¹æ®é¡¹ç›®éœ€æ±‚è°ƒæ•´ï¼Œç¤ºä¾‹ï¼šç¦ç”¨è¡Œé•¿åº¦æ£€æŸ¥ï¼‰</span>
<span class="hljs-attr">disable</span> = [<span class="hljs-string">"E501"</span>]
<span class="hljs-comment"># å¿½ç•¥æ— éœ€æ£€æŸ¥çš„æ–‡ä»¶/ç›®å½•ï¼ˆå¿…é…ç½®ï¼Œé¿å…æ£€æŸ¥å†—ä½™æ–‡ä»¶ï¼‰</span>
<span class="hljs-attr">exclude</span> = [
    <span class="hljs-string">"venv/"</span>,
    <span class="hljs-string">"__pycache__/"</span>,
    <span class="hljs-string">"build/"</span>,
    <span class="hljs-string">"dist/"</span>,
    <span class="hljs-string">".git/"</span>
]

<span class="hljs-section">[tool.ruff.format]</span>
<span class="hljs-attr">line-length</span> = <span class="hljs-number">88</span>  <span class="hljs-comment"># æ ¼å¼åŒ–è¡Œé•¿åº¦ä¸æ£€æŸ¥è§„åˆ™ä¿æŒä¸€è‡´</span>
<span class="hljs-attr">quote-style</span> = <span class="hljs-string">"preserve"</span>  <span class="hljs-comment"># ä¿ç•™åŸæœ‰å¼•å·é£æ ¼ï¼ˆé»˜è®¤ä¼šç»Ÿä¸€ä¸ºåŒå¼•å·ï¼‰</span>
</code></pre>

























<table><thead><tr><th align="left">è§„åˆ™ç±»åˆ«</th><th align="left">å«ä¹‰</th></tr></thead><tbody><tr><td align="left">E/W</td><td align="left">PEP8 è§„èŒƒç›¸å…³é—®é¢˜ï¼ˆå¦‚ç¼©è¿›é”™è¯¯ã€ç©ºæ ¼ç¼ºå¤±ï¼‰</td></tr><tr><td align="left">F</td><td align="left">ä»£ç é€»è¾‘é”™è¯¯ï¼ˆå¦‚æœªå®šä¹‰å˜é‡ã€å‡½æ•°å‚æ•°é”™è¯¯ï¼‰</td></tr><tr><td align="left">I</td><td align="left">å¯¼å…¥ç›¸å…³é—®é¢˜ï¼ˆå¦‚æœªä½¿ç”¨å¯¼å…¥ã€å¯¼å…¥é¡ºåºæ··ä¹±ï¼‰</td></tr><tr><td align="left">B</td><td align="left">æ½œåœ¨ Bug é£é™©ï¼ˆå¦‚ä¸å®‰å…¨çš„æ–­è¨€ã€ç©º except è¯­å¥ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-22">æ§åˆ¶å°é›†æˆ</h3>
<h4 data-id="heading-23">1. ä½¿ç”¨ pip å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸºç¡€å®‰è£…</span>
pip install ruff

<span class="hljs-comment"># å›½å†…é•œåƒæºåŠ é€Ÿå®‰è£…ï¼ˆæ¨èï¼Œè§£å†³ä¸‹è½½æ…¢é—®é¢˜ï¼‰</span>
pip install ruff -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<h5 data-id="heading-24">1.1 å®‰è£…éªŒè¯</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ Ruff ç‰ˆæœ¬ï¼Œæ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬å·åˆ™å®‰è£…æˆåŠŸ</span>
ruff --version
</code></pre>
<h3 data-id="heading-25">æ§åˆ¶å°ä½¿ç”¨ç¤ºä¾‹</h3>
<p>Ruff çš„æ ¸å¿ƒå‘½ä»¤åˆ†ä¸ºä¸¤ç±»ï¼šã€Œä»£ç æ£€æŸ¥ã€ï¼ˆ<code>ruff check</code>ï¼‰å’Œã€Œä»£ç æ ¼å¼åŒ–ã€ï¼ˆ<code>ruff format</code>ï¼‰ï¼Œåˆ†å·¥æ˜ç¡®ï¼Œé…åˆä½¿ç”¨æ•ˆæœæœ€ä½³ã€‚</p>
<h4 data-id="heading-26">ä»£ç æ ¼å¼åŒ–ï¼ˆruff formatï¼‰</h4>
<p>ä½œç”¨ï¼šè‡ªåŠ¨ä¼˜åŒ–ä»£ç æ ·å¼ï¼Œè§£å†³ç¼©è¿›æ··ä¹±ã€ç©ºæ ¼ç¼ºå¤±ã€è¡Œè¿‡é•¿ç­‰æ ¼å¼é—®é¢˜ï¼Œè®©ä»£ç æ•´æ´ç»Ÿä¸€ã€‚</p>
<h5 data-id="heading-27">åŸºç¡€ç”¨æ³•</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ ¼å¼åŒ–å•ä¸ªæ–‡ä»¶</span>
ruff format main.py

<span class="hljs-comment"># æ ¼å¼åŒ–æŒ‡å®šç›®å½•ï¼ˆé€’å½’å¤„ç†æ‰€æœ‰ .py æ–‡ä»¶ï¼‰</span>
ruff format ./src/

<span class="hljs-comment"># æ ¼å¼åŒ–å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
ruff format .
</code></pre>
<h5 data-id="heading-28">åªæ£€æŸ¥ä¸ä¿®æ”¹ï¼ˆ--check å‚æ•°ï¼‰</h5>
<p>é€‚ç”¨äºä»£ç æäº¤å‰æ ¡éªŒï¼Œä»…æ£€æµ‹æ ¼å¼é—®é¢˜ï¼Œä¸å®é™…ä¿®æ”¹æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å•ä¸ªæ–‡ä»¶æ ¼å¼</span>
ruff format --check main.py

<span class="hljs-comment"># æ£€æŸ¥å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶æ ¼å¼</span>
ruff format --check .
</code></pre>
<h4 data-id="heading-29">ä»£ç æ£€æŸ¥ï¼ˆruff checkï¼‰</h4>
<p>ä½œç”¨ï¼šæ£€æµ‹ä»£ç ä¸­çš„é€»è¾‘é”™è¯¯ã€è§„èŒƒè¿è§„ç­‰é—®é¢˜ï¼ˆå¦‚æœªå®šä¹‰å˜é‡ã€æœªä½¿ç”¨å¯¼å…¥ï¼‰ï¼Œä»…æŠ¥å‘Šé—®é¢˜ï¼Œä¸ä¸»åŠ¨ä¿®æ”¹æ–‡ä»¶ã€‚</p>
<h5 data-id="heading-30">åŸºç¡€ç”¨æ³•</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å•ä¸ªæ–‡ä»¶</span>
ruff check main.py

<span class="hljs-comment"># æ£€æŸ¥å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶</span>
ruff check .
</code></pre>
<h5 data-id="heading-31">è‡ªåŠ¨ä¿®å¤é—®é¢˜ï¼ˆ--fix å‚æ•°ï¼‰</h5>
<p>ä¸€é”®ä¿®å¤æ”¯æŒè‡ªåŠ¨ä¿®å¤çš„é—®é¢˜ï¼ˆå¦‚åˆ é™¤æœªä½¿ç”¨å¯¼å…¥ã€è°ƒæ•´ç¼©è¿›ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è‡ªåŠ¨ä¿®å¤å•ä¸ªæ–‡ä»¶çš„å¯ä¿®å¤é—®é¢˜</span>
ruff check --fix main.py

<span class="hljs-comment"># è‡ªåŠ¨ä¿®å¤å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶çš„å¯ä¿®å¤é—®é¢˜</span>
ruff check --fix .
</code></pre>
<h4 data-id="heading-32">æ ¸å¿ƒå‘½ä»¤åŒºåˆ«å¯¹æ¯”</h4>



































<table><thead><tr><th align="left">å‘½ä»¤</th><th align="left">æ ¸å¿ƒç›®æ ‡</th><th align="left">æ˜¯å¦ä¿®æ”¹æ–‡ä»¶</th><th align="left">å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td align="left">ruff format</td><td align="left">è°ƒæ•´ä»£ç æ ·å¼ï¼ˆç¾è§‚åº¦ã€ç»Ÿä¸€æ€§ï¼‰</td><td align="left">âœ… æ˜¯</td><td align="left">æœ¬åœ°å¼€å‘æ—¶ç»Ÿä¸€ä»£ç æ ¼å¼</td></tr><tr><td align="left">ruff format --check</td><td align="left">æ£€æŸ¥æ ¼å¼é—®é¢˜ï¼Œä¸ä¿®å¤</td><td align="left">âŒ å¦</td><td align="left">ä»£ç æäº¤å‰æ ¼å¼åˆè§„æ ¡éªŒ</td></tr><tr><td align="left">ruff check</td><td align="left">æ£€æµ‹ä»£ç é”™è¯¯ã€é€»è¾‘é£é™©</td><td align="left">âŒ å¦</td><td align="left">å¼€å‘ä¸­æ’æŸ¥ä»£ç æ½œåœ¨é—®é¢˜</td></tr><tr><td align="left">ruff check --fix</td><td align="left">ä¿®å¤ä»£ç é”™è¯¯ã€è§„èŒƒè¿è§„é—®é¢˜</td><td align="left">âœ… æ˜¯</td><td align="left">æ‰¹é‡ä¿®å¤é¡¹ç›®ä¸­çš„è¿è§„ä»£ç </td></tr></tbody></table>
<h3 data-id="heading-33">VS Codeç¼–è¾‘å™¨é›†æˆ</h3>
<p>å¯å®ç°ã€Œä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–+è‡ªåŠ¨ä¿®å¤é—®é¢˜ã€ï¼Œæ— éœ€æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h4 data-id="heading-34">1. å®‰è£… Ruff æ’ä»¶</h4>
<ol>
<li>æ‰“å¼€ VS Codeï¼Œç‚¹å‡»å·¦ä¾§ã€Œæ‰©å±•ã€å›¾æ ‡ã€‚</li>
<li>åœ¨æœç´¢æ¡†è¾“å…¥ã€ŒRuffã€ï¼Œé€‰æ‹©å®˜æ–¹å‡ºå“çš„æ’ä»¶ã€‚</li>
<li>ç‚¹å‡»ã€Œå®‰è£…ã€ï¼Œç­‰å¾…å®‰è£…å®Œæˆã€‚</li>
</ol>
<h4 data-id="heading-35">2. é…ç½®è‡ªåŠ¨ä¿å­˜è§¦å‘</h4>
<ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶å¤¹ <code>.vscode</code>ã€‚</li>
<li>åœ¨ <code>.vscode</code> æ–‡ä»¶å¤¹å†…æ–°å»ºæ–‡ä»¶ <code>settings.json</code>ã€‚</li>
<li>å†™å…¥ä»¥ä¸‹é…ç½®ï¼š</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç </span>
    <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// ä¿å­˜æ—¶è‡ªåŠ¨è§¦å‘ä»£ç æ£€æŸ¥ä¿®å¤</span>
    <span class="hljs-attr">"editor.codeActionsOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"source.fixAll"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"always"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// å°† Ruff è®¾ç½®ä¸º Python æ–‡ä»¶çš„é»˜è®¤æ ¼å¼åŒ–å·¥å…·</span>
    <span class="hljs-attr">"[python]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"charliermarsh.ruff"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>é…ç½®ç”Ÿæ•ˆåï¼Œç¼–è¾‘ Python æ–‡ä»¶å¹¶ä¿å­˜ï¼ˆCtrl+Sï¼‰ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ Ruff æ ¼å¼åŒ–ä¸å¯ä¿®å¤é—®é¢˜ä¿®å¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«ä¼ ç»Ÿä½æ•ˆï¼AgentRun å¦‚ä½•ç”¨ Serverless + Agent æ‰“é€ ç°ä»£åŒ–çš„èˆ†æƒ…åˆ†æç³»ç»Ÿï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587998744294719494</link>    <guid>https://juejin.cn/post/7587998744294719494</guid>    <pubDate>2025-12-26T10:25:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587998744294719494" data-draft-id="7587998744294424582" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«ä¼ ç»Ÿä½æ•ˆï¼AgentRun å¦‚ä½•ç”¨ Serverless + Agent æ‰“é€ ç°ä»£åŒ–çš„èˆ†æƒ…åˆ†æç³»ç»Ÿï¼Ÿ"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-26T10:25:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«ä¼ ç»Ÿä½æ•ˆï¼AgentRun å¦‚ä½•ç”¨ Serverless + Agent æ‰“é€ ç°ä»£åŒ–çš„èˆ†æƒ…åˆ†æç³»ç»Ÿï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:25:17.000Z" title="Fri Dec 26 2025 10:25:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ±Ÿæ˜±</p>
<p>èˆ†æƒ…åˆ†ææ˜¯ä¼ä¸šæ„ŸçŸ¥å¸‚åœºè„‰æã€é¢„è­¦å…¬å…³å±æœºçš„â€œå¬è¯Šå™¨â€ï¼Œç„¶è€Œä¼ ç»Ÿçš„èˆ†æƒ…åˆ†æç³»ç»Ÿæ›´åƒæ˜¯ä¸€ä¸ªä¸ªâ€œæ‰‹å·¥ä½œåŠâ€ï¼Œé¢ä¸´æ•°æ®æ”¶é›†æ•ˆç‡ä½ã€åˆ†ææ·±åº¦ä¸å¤Ÿã€å®æ—¶æ€§å·®ç­‰é—®é¢˜ï¼Œç»å¸¸åé¦ˆä¹‹åï¼Œç­‰ä¼ä¸šæ‹¿åˆ°æŠ¥å‘Šæ—¶ï¼Œèˆ†è®ºçƒ­ç‚¹æ—©å·²è½¬ç§»ï¼Œé”™è¿‡æœ€ä½³æ—¶é—´ã€‚è¿™äº›æŒ‘æˆ˜ï¼Œæ­£æ˜¯æ‰€æœ‰èˆ†æƒ…ç³»ç»Ÿå¼€å‘è€…å…±åŒçš„ç—›ç‚¹ã€‚</p>
<p>æœ¬æ–¹æ¡ˆå°†åŸºäºçœŸå®çš„ä»£ç å®ç°ï¼Œå‘æ‚¨ä»‹ç»å¦‚ä½•ä½¿ç”¨å‡½æ•°è®¡ç®— AgentRun å¹³å°ï¼Œæ„å»ºä¸€ä¸ªç°ä»£åŒ–çš„â€œèˆ†æƒ…åˆ†æä¸“å®¶â€ï¼Œ<strong>è¯¥ç³»ç»Ÿä¸ä»…å®ç°äº†ä»æ•°æ®é‡‡é›†åˆ°æŠ¥å‘Šç”Ÿæˆçš„å¯è§†åŒ–ã€å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼Œæ›´é€šè¿‡æµå¼æ¶æ„ï¼Œè®©æ´å¯Ÿå®æ—¶å‘ˆç°ã€‚</strong></p>
<h2 data-id="heading-0">ç³»ç»Ÿæ¶æ„è®¾è®¡</h2>
<p>æ•´ä¸ªèˆ†æƒ…åˆ†æç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä»£ç ä¸¥æ ¼æ§åˆ¶æµç¨‹æ‰§è¡Œé¡ºåºï¼Œè€Œéä¾èµ– LLM çš„è‡ªä¸»å†³ç­–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2b33e0db21440e8a5e7692c9e80eee4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=e17egUD1fN2nxegUH1NiMJ9QW9o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">å¿«é€Ÿä½“éªŒå’Œæ•ˆæœé¢„è§ˆ</h2>
<p>åœ¨æ·±å…¥æŠ€æœ¯ç»†èŠ‚å‰ï¼Œæˆ‘ä»¬å…ˆç›´è§‚æ„Ÿå—ä¸€ä¸‹è¿™å¥—ç³»ç»Ÿçš„æ•ˆæœã€‚é€šè¿‡ AgentRun å¹³å°ï¼Œåªéœ€ç®€å•å‡ æ­¥å³å¯å®Œæˆéƒ¨ç½²ã€‚</p>
<h3 data-id="heading-2">å¿«é€Ÿéƒ¨ç½²</h3>
<p>æ‰“å¼€é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— AgentRun æ¢ç´¢é¡µé¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8251150fb8fe44c3b0ce7b9bcca453af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=XigYs%2B%2FF2WIkqzNq7XkuS6etzWU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥æ‰¾åˆ°èˆ†æƒ…åˆ†æä¸“å®¶æ¡ˆä¾‹ï¼Œå¹¶ç‚¹å‡»å¡ç‰‡å³ä¸‹è§’è¿›è¡Œéƒ¨ç½²ï¼Œå¡«å†™å®Œæ•´å¯¹åº”çš„å‚æ•°ä¿¡æ¯å³å¯ç‚¹å‡»å³ä¸‹è§’ç¡®å®šåˆ›å»ºæŒ‰é’®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e08339566414b16ae6d04f225f5403a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=h2f8rKDyFb4nUbxzwjurgt%2Ff8W4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ­¤å¤„éœ€è¦ç¨ç­‰ç‰‡åˆ»ï¼Œåˆ›å»ºå®Œä¹‹åå¯ä»¥çœ‹åˆ°ä½“éªŒåœ°å€ï¼Œä¹Ÿå¯ä»¥è·³è½¬åˆ°è¿è¡Œæ—¶ä¸æ²™ç®±çœ‹åˆ°éƒ¨ç½²å®Œçš„ Agentï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37b6f6d2b3394d4d902053ffa8c127be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=qaaZpWZiU82BqewpWU8nd9M5rRw%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f94cdee53e543a49247c8e2bf19ba3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=hKzteXD4wlEFD%2F1wXxPuCxp4i5E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é¦–é¡µåœ°å€å³å³ä¾§Â <code>main_web</code> åœ°å€ï¼Œç›´æ¥æŸ¥çœ‹çº¿ä¸Šæ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04adff44127141059fa20f50a065734b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=xBW%2BaqF3Ff%2FS2qrqm%2BPughaIq64%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥æŸ¥çœ‹è¯¥åº”ç”¨æ¡ˆä¾‹ä»£ç ï¼Œå¹¶è¿›è¡Œåœ¨çº¿äºŒæ¬¡å¼€å‘ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aff65e6b0fbf472383cfea7e62dc41f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=Gjct%2BWU%2BX0GtLt0iKi38vEHqzrA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">æ•ˆæœä½“éªŒ</h3>
<p>æ‰“å¼€ä½“éªŒåœ°å€ï¼Œå¯ä»¥çœ‹åˆ°èˆ†æƒ…åˆ†æä¸“å®¶é¡µé¢ï¼Œæ­¤æ—¶å¯ä»¥è¾“å…¥ä¸€ä¸ªè¯è¿›è¡Œèˆ†æƒ…åˆ†æï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e85d5f4bb89e4cc49bc5fb2d8bd6c99b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=VqRXCcfCOQMNs6tRSPeG8ypMvZQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ†æè¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šè°ƒç”¨å‡½æ•°è®¡ç®— AgentRun çš„ Sandbox æ²™ç®±ï¼ˆç¡®åˆ‡è¯´æ˜¯åˆ›å»ºçš„æ—¶å€™ï¼Œé€‰æ‹©çš„æµè§ˆå™¨æ²™ç®±ï¼‰ï¼Œå¯ä»¥çœ‹åˆ° AI æ§åˆ¶äº‘ä¸Šçš„æµè§ˆå™¨è¿›è¡Œæ•°æ®æ£€ç´¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da85bf3d6e474aeb83af3090b2cbb8e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=AtItZdsToxHhYgp9iLLbZ3I%2B8NA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®Œæˆä¹‹åï¼Œç³»ç»Ÿä¼šæ•´ç†æ‰€æœ‰é‡‡é›†åˆ°çš„æ•°æ®å’Œä¿¡æ¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d657c650fbd4964b94801ac83e67c9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=nBd6IoDZ5%2Bm1yr1Vj8iViXjDiYQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€ç»ˆç”Ÿæˆæ–‡å­—+å›¾è¡¨çš„â€œå¯è§†åŒ–æŠ¥å‘Šâ€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41ee44786a594c39a7d3d9a1e6c0ae14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=4ud8UbB2u6GmL0VNgdL3oi%2FlHW8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3eb00b156cc44b8693697aa9034b5a81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=mgJR4KqfHaD9Hzd6NWL0K0Zm0ug%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-4">AgentRun ç›¸æ¯”ä¼ ç»Ÿæ–¹æ¡ˆçš„æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-5">å®‰å…¨éš”ç¦»çš„æ‰§è¡Œç¯å¢ƒ</h3>
<p>ä¼ ç»Ÿèˆ†æƒ…ç³»ç»Ÿé€šå¸¸ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œçˆ¬è™«ç¨‹åºï¼Œé¢ä¸´ç€å®‰å…¨é£é™©å’Œç¯å¢ƒæ±¡æŸ“é—®é¢˜ã€‚å½“æŸä¸ªç½‘ç«™çš„åçˆ¬æœºåˆ¶è§¦å‘æ—¶ï¼Œå¯èƒ½å½±å“æ•´ä¸ªæœåŠ¡å™¨çš„ç¨³å®šæ€§ã€‚è€Œ AgentRun Sandbox æä¾›äº†å®Œå…¨éš”ç¦»çš„æµè§ˆå™¨ç¯å¢ƒï¼Œå³ä½¿å•ä¸ªé‡‡é›†ä»»åŠ¡å‡ºç°é—®é¢˜ï¼Œä¹Ÿä¸ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“è¿è¡Œã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">create_browser_sandbox</span>() -&gt;Â <span class="hljs-type">Optional</span>[BrowserSandbox]:
Â  Â Â <span class="hljs-string">"""åˆ›å»ºéš”ç¦»çš„æµè§ˆå™¨ç¯å¢ƒï¼Œé¿å…ç¯å¢ƒæ±¡æŸ“"""</span>
Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  sandbox =Â <span class="hljs-keyword">await</span>Â Sandbox.create_async(
Â  Â  Â  Â  Â  Â  template_type=TemplateType.BROWSER,
Â  Â  Â  Â  Â  Â  template_name=agentrun_browser_sandbox_name,
Â  Â  Â  Â  )
Â  Â  Â  Â  _sandboxes[sandbox.sandbox_id] = sandbox
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â sandbox
Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â  Â  Â  Â Â <span class="hljs-comment"># å•ä¸ªSandboxå¤±è´¥ä¸å½±å“å…¶ä»–å®ä¾‹</span>
Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â SandboxCreationError(<span class="hljs-string">f"åˆ›å»º Sandbox å¤±è´¥:Â <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-6">çœŸå®æµè§ˆå™¨ç¯å¢ƒæ¨¡æ‹Ÿ</h3>
<p>ä¼ ç»Ÿçˆ¬è™«æ–¹æ¡ˆé€šå¸¸ä½¿ç”¨ç®€å•çš„ HTTP è¯·æ±‚åº“ï¼Œå®¹æ˜“è¢«ç°ä»£ç½‘ç«™çš„åçˆ¬æœºåˆ¶è¯†åˆ«å’Œæ‹¦æˆªã€‚AgentRun Sandbox æä¾›çš„æ˜¯çœŸå®çš„ Chrome æµè§ˆå™¨ç¯å¢ƒï¼Œèƒ½å¤Ÿå®Œæ•´æ‰§è¡Œ JavaScriptã€å¤„ç†å¤æ‚çš„é¡µé¢äº¤äº’ï¼Œå¤§å¤§æé«˜äº†æ•°æ®é‡‡é›†çš„æˆåŠŸç‡ã€‚ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç³»ç»Ÿé€šè¿‡ Playwright è¿æ¥åˆ°çœŸå®çš„ Chrome å®ä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â <span class="hljs-title">async_playwright</span>()Â <span class="hljs-keyword">as</span>Â playwright:
Â  Â  browser</span> =Â <span class="hljs-keyword">await</span>Â playwright.chromium.connect_over_cdp(sandbox.get_cdp_url())
Â  Â  context = browser.contexts[<span class="hljs-number">0</span>]Â <span class="hljs-keyword">if</span>Â browser.contextsÂ <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">await</span>Â browser.new_context()
Â  Â  page = context.pages[<span class="hljs-number">0</span>]Â <span class="hljs-keyword">if</span>Â context.pagesÂ <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">await</span>Â context.new_page()
</code></pre>
<h3 data-id="heading-7">å¯è§†åŒ–è°ƒè¯•èƒ½åŠ›</h3>
<p>å‡½æ•°è®¡ç®— AgentRun æœ€ç‹¬ç‰¹çš„ä¼˜åŠ¿æ˜¯æä¾›äº†å®æ—¶çš„ VNC é¢„è§ˆåŠŸèƒ½ï¼Œå¼€å‘è€…å’Œç”¨æˆ·å¯ä»¥å®æ—¶è§‚å¯Ÿæµè§ˆå™¨çš„æ“ä½œè¿‡ç¨‹ã€‚è¿™ç§é€æ˜æ€§åœ¨ä¼ ç»Ÿæ–¹æ¡ˆä¸­æ˜¯æ— æ³•å®ç°çš„ï¼Œå®ƒä¸ä»…æœ‰åŠ©äºè°ƒè¯•å’Œä¼˜åŒ–é‡‡é›†é€»è¾‘ï¼Œè¿˜èƒ½è®©ç”¨æˆ·ç›´è§‚åœ°äº†è§£ç³»ç»Ÿçš„å·¥ä½œçŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6f57bcd347d48788a3d988d39013957~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=vOQWwMQljnWyZPeKCmaGs0cfHUs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-8">å¼¹æ€§æ‰©å±•å’Œæ•…éšœæ¢å¤</h3>
<p>ä¼ ç»Ÿç³»ç»Ÿåœ¨é¢ä¸´å¤§è§„æ¨¡é‡‡é›†ä»»åŠ¡æ—¶ï¼Œå¾€å¾€éœ€è¦å¤æ‚çš„åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ã€‚è€Œå‡½æ•°è®¡ç®— AgentRun å¤©ç„¶æ”¯æŒå¤š Sandbox å¹¶è¡Œå¤„ç†ï¼Œç³»ç»Ÿå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºå’Œé”€æ¯æµè§ˆå™¨å®ä¾‹ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå½“æŸä¸ªå®ä¾‹å‡ºç°æ•…éšœæ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹å¹¶é‡å»ºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">recreate_sandbox_if_closed</span>(<span class="hljs-params">sandbox_id:Â <span class="hljs-built_in">str</span>, error_message:Â <span class="hljs-built_in">str</span></span>):
Â  Â Â <span class="hljs-string">"""æ™ºèƒ½æ•…éšœæ£€æµ‹å’Œè‡ªåŠ¨é‡å»ºæœºåˆ¶"""</span>
Â  Â  closed_error_patterns = [
Â  Â  Â  Â Â <span class="hljs-string">"Target page, context or browser has been closed"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"Browser has been closed"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"Connection closed"</span>,
Â  Â  ]
Â  Â  is_closed_error =Â <span class="hljs-built_in">any</span>(pattern.lower()Â <span class="hljs-keyword">in</span>Â error_message.lower()Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span>Â patternÂ <span class="hljs-keyword">in</span>Â closed_error_patterns)
Â  Â Â <span class="hljs-keyword">if</span>Â is_closed_error:
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â remove_sandbox(sandbox_id)
Â  Â  Â  Â  new_sandbox =Â <span class="hljs-keyword">await</span>Â create_browser_sandbox()
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â new_sandbox
</code></pre>
<p>AgentRun Sandbox é‡‡ç”¨é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—å®ç°ï¼Œæ”¯æŒç™¾ä¸‡æ²™ç®±æ¨¡æ¿ï¼ˆå‡½æ•°çº§åˆ«ï¼‰å¹¶å‘è¿è¡Œï¼ŒServerless å¼¹æ€§ä¼¸ç¼©ï¼Œæ”¯æŒ 3.5w+ æ²™ç®±/åˆ†é’Ÿï¼Œæ”¯æŒç¼©å®¹åˆ° 0ï¼ŒæŒ‰è¯·æ±‚æ„ŸçŸ¥è°ƒåº¦ã€‚</p>
<h2 data-id="heading-9">åç«¯æ ¸å¿ƒå®ç°</h2>
<h3 data-id="heading-10">Agent å·¥å…·é“¾è®¾è®¡</h3>
<p>ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªåŸºäº PydanticAI çš„æ™ºèƒ½ä½“ï¼Œè¯¥æ™ºèƒ½ä½“åŒ…å«å››ä¸ªå…³é”®å·¥å…·ï¼Œæ¯ä¸ªå·¥å…·è´Ÿè´£èˆ†æƒ…åˆ†æçš„ä¸åŒé˜¶æ®µã€‚Agent çš„è®¾è®¡éµå¾ªä¸¥æ ¼çš„æ‰§è¡Œé¡ºåºï¼Œç¡®ä¿æ•°æ®æ”¶é›†çš„å®Œæ•´æ€§å’Œåˆ†æçš„å‡†ç¡®æ€§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">opinion_agent</span> = Agent(
Â  Â  agentrun_model,
Â  Â  <span class="hljs-attr">deps_type</span>=StateDeps,
Â  Â  <span class="hljs-attr">system_prompt</span>=<span class="hljs-string">"""ä½ æ˜¯èˆ†æƒ…åˆ†æç³»ç»Ÿçš„æ‰§è¡Œè€…ã€‚
ä½ çš„ä»»åŠ¡æ˜¯æŒ‰ç…§ä»¥ä¸‹ä¸¥æ ¼æµç¨‹æ‰§è¡Œèˆ†æƒ…åˆ†æï¼š
ã€æµç¨‹ã€‘
1. æ”¶åˆ°å…³é”®è¯åï¼Œè°ƒç”¨ collect_data å·¥å…·æ”¶é›†æ•°æ®
2. æ•°æ®æ”¶é›†å®Œæˆåï¼Œè°ƒç”¨ analyze_data å·¥å…·åˆ†ææ•°æ®
3. åˆ†æå®Œæˆåï¼Œè°ƒç”¨ write_report å·¥å…·æ’°å†™æŠ¥å‘Š
4. æŠ¥å‘Šå®Œæˆåï¼Œè°ƒç”¨ render_html å·¥å…·ç”Ÿæˆ HTML
ã€é‡è¦è§„åˆ™ã€‘
- å¿…é¡»æŒ‰é¡ºåºè°ƒç”¨å·¥å…·
- æ¯ä¸ªå·¥å…·åªè°ƒç”¨ä¸€æ¬¡
- ä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤
- ä¸è¦ç¼–é€ æ•°æ®
"""</span>,
Â  Â  <span class="hljs-attr">retries</span>=<span class="hljs-number">3</span>,
)
</code></pre>
<h3 data-id="heading-11">æµå¼è¾“å‡ºä¸å®æ—¶åé¦ˆ</h3>
<p>ä¼ ç»Ÿèˆ†æƒ…ç³»ç»Ÿé€šå¸¸é‡‡ç”¨æ‰¹å¤„ç†æ¨¡å¼ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´æ‰èƒ½çœ‹åˆ°ç»“æœã€‚è€ŒåŸºäºå‡½æ•°è®¡ç®— AgentRun çš„ç³»ç»Ÿå®ç°äº†çœŸæ­£çš„æµå¼è¾“å‡ºï¼Œç”¨æˆ·å¯ä»¥å®æ—¶è§‚å¯Ÿæ¯ä¸ªå¤„ç†æ­¥éª¤çš„è¿›å±•ã€‚è¿™ç§å®æ—¶æ€§ä¸ä»…æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿä¾¿äºåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">push_state_event</span>(<span class="hljs-params">run_id:Â <span class="hljs-built_in">str</span>, state: OpinionState</span>):
Â  Â Â <span class="hljs-string">"""å®æ—¶æ¨é€çŠ¶æ€æ›´æ–°ï¼Œç”¨æˆ·æ— éœ€ç­‰å¾…"""</span>
Â  Â  event = StateSnapshotEvent(
Â  Â  Â  Â Â <span class="hljs-built_in">type</span>=EventType.STATE_SNAPSHOT,
Â  Â  Â  Â  snapshot=state.model_dump(),
Â  Â  Â  Â  timestamp=<span class="hljs-built_in">int</span>(time.time() *Â <span class="hljs-number">1000</span>)
Â  Â  )
Â  Â Â <span class="hljs-keyword">await</span>Â event_manager.push_event(run_id, event)
</code></pre>
<h3 data-id="heading-12">æ™ºèƒ½æ•°æ®è´¨é‡æ§åˆ¶</h3>
<p>ç³»ç»Ÿå®ç°äº†ä¸¥æ ¼çš„æ•°æ®è´¨é‡æ§åˆ¶æœºåˆ¶ï¼Œé€šè¿‡å¤šç»´åº¦è¯„ä¼°ç¡®ä¿æ”¶é›†åˆ°çš„æ•°æ®å…·æœ‰è¾ƒé«˜çš„ç›¸å…³æ€§å’Œä»·å€¼ã€‚è¿™ç§è´¨é‡æ§åˆ¶åœ¨ä¼ ç»Ÿç³»ç»Ÿä¸­å¾€å¾€æ˜¯ç¼ºå¤±çš„ï¼Œå¯¼è‡´å¤§é‡å™ªéŸ³æ•°æ®å½±å“åˆ†æç»“æœã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">evaluate_relevance</span>(<span class="hljs-params">keyword:Â <span class="hljs-built_in">str</span>, title:Â <span class="hljs-built_in">str</span>, snippet:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-built_in">float</span>:
Â  Â Â <span class="hljs-string">"""å¤šç»´åº¦ç›¸å…³æ€§è¯„ä¼°ï¼Œç¡®ä¿æ•°æ®è´¨é‡"""</span>
Â  Â  text =Â <span class="hljs-string">f"<span class="hljs-subst">{title}</span>Â <span class="hljs-subst">{snippet}</span>"</span>
Â  Â  text_lower = text.lower()
Â  Â Â <span class="hljs-comment"># æ£€æµ‹å…³é”®è¯åŒ¹é…åº¦</span>
Â  Â  has_chinese_keyword =Â <span class="hljs-built_in">any</span>(<span class="hljs-string">'\u4e00'</span>Â &lt;= char &lt;=Â <span class="hljs-string">'é¿¿'</span>Â <span class="hljs-keyword">for</span>Â charÂ <span class="hljs-keyword">in</span>Â keyword)
Â  Â  result_has_chinese =Â <span class="hljs-built_in">any</span>(<span class="hljs-string">'\u4e00'</span>Â &lt;= char &lt;=Â <span class="hljs-string">'é¿¿'</span>Â <span class="hljs-keyword">for</span>Â charÂ <span class="hljs-keyword">in</span>Â text)
Â  Â Â <span class="hljs-comment"># ä¸­æ–‡å…³é”®è¯å¿…é¡»åœ¨ç»“æœä¸­æœ‰ä¸­æ–‡å†…å®¹</span>
Â  Â Â <span class="hljs-keyword">if</span>Â has_chinese_keywordÂ <span class="hljs-keyword">and</span>Â <span class="hljs-keyword">not</span>Â result_has_chinese:
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0.0</span>
Â  Â Â <span class="hljs-comment"># æ’é™¤æ˜æ˜¾çš„æ— å…³ç½‘ç«™</span>
Â  Â  irrelevant_patterns = [
Â  Â  Â  Â Â <span class="hljs-string">"calculator"</span>,Â <span class="hljs-string">"deepseek"</span>,Â <span class="hljs-string">"chegg"</span>,Â <span class="hljs-string">"stackoverflow"</span>,Â 
Â  Â  Â  Â Â <span class="hljs-string">"ç¿»è¯‘"</span>,Â <span class="hljs-string">"dictionary"</span>,Â <span class="hljs-string">"è¯å…¸"</span>
Â  Â  ]
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">any</span>(patternÂ <span class="hljs-keyword">in</span>Â text_lowerÂ <span class="hljs-keyword">for</span>Â patternÂ <span class="hljs-keyword">in</span>Â irrelevant_patterns):
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0.0</span>
Â  Â Â <span class="hljs-comment"># è®¡ç®—ç›¸å…³æ€§å¾—åˆ†</span>
Â  Â  score =Â <span class="hljs-number">0.0</span>
Â  Â Â <span class="hljs-keyword">if</span>Â keywordÂ <span class="hljs-keyword">in</span>Â text:
Â  Â  Â  Â  score +=Â <span class="hljs-number">0.6</span>Â Â <span class="hljs-comment"># åŸºç¡€åˆ†</span>
Â  Â Â <span class="hljs-comment"># æ—¶æ•ˆæ€§åŠ åˆ†</span>
Â  Â  time_keywords = [<span class="hljs-string">"æœ€æ–°"</span>,Â <span class="hljs-string">"ä»Šæ—¥"</span>,Â <span class="hljs-string">"è¿‘æ—¥"</span>,Â <span class="hljs-string">"2024"</span>,Â <span class="hljs-string">"2025"</span>]
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">any</span>(tkÂ <span class="hljs-keyword">in</span>Â textÂ <span class="hljs-keyword">for</span>Â tkÂ <span class="hljs-keyword">in</span>Â time_keywords):
Â  Â  Â  Â  score +=Â <span class="hljs-number">0.1</span>
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">max</span>(<span class="hljs-number">0.0</span>,Â <span class="hljs-built_in">min</span>(<span class="hljs-number">1.0</span>, score))
</code></pre>
<h2 data-id="heading-13">æ·±åº¦å†…å®¹æŠ“å–æŠ€æœ¯</h2>
<h3 data-id="heading-14">å¹³å°é€‚é…ç­–ç•¥</h3>
<p>ä¸åŒçš„ç¤¾äº¤åª’ä½“å¹³å°å…·æœ‰ä¸åŒçš„é¡µé¢ç»“æ„å’Œå†…å®¹ç»„ç»‡æ–¹å¼ï¼Œä¼ ç»Ÿç³»ç»Ÿå¾€å¾€é‡‡ç”¨ç»Ÿä¸€çš„æŠ“å–ç­–ç•¥ï¼Œå¯¼è‡´æ•°æ®è´¨é‡å‚å·®ä¸é½ã€‚AgentRun ç³»ç»Ÿé’ˆå¯¹ä¸åŒå¹³å°å®ç°äº†å®šåˆ¶åŒ–çš„æŠ“å–é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">explore_page_with_llm</span>(<span class="hljs-params">page, keyword:Â <span class="hljs-built_in">str</span>, url:Â <span class="hljs-built_in">str</span>, source:Â <span class="hljs-built_in">str</span>, initial_content:Â <span class="hljs-built_in">str</span></span>):
Â  Â Â <span class="hljs-string">"""åŸºäºå¹³å°ç‰¹æ€§çš„æ™ºèƒ½å†…å®¹æŠ“å–"""</span>
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-string">"weibo.com"</span>Â <span class="hljs-keyword">in</span>Â url:
Â  Â  Â  Â Â <span class="hljs-comment"># å¾®åšç‰¹å®šçš„è¯„è®ºå’Œè½¬å‘æŠ“å–</span>
Â  Â  Â  Â  available_actions = [
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_comments"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".WB_feed_expand, [class*='comment']"</span>},
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_retweets"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".WB_feed_expand, [class*='repost']"</span>},
Â  Â  Â  Â  ]
Â  Â Â <span class="hljs-keyword">elif</span>Â <span class="hljs-string">"zhihu.com"</span>Â <span class="hljs-keyword">in</span>Â url:
Â  Â  Â  Â Â <span class="hljs-comment"># çŸ¥ä¹å›ç­”å’Œè¯„è®ºæŠ“å–</span>
Â  Â  Â  Â  available_actions = [
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_more_answers"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".AnswerItem, .List-item"</span>},
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_comments"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".Comments-container, .CommentItem"</span>},
Â  Â  Â  Â  ]
Â  Â Â <span class="hljs-keyword">elif</span>Â <span class="hljs-string">"bilibili.com"</span>Â <span class="hljs-keyword">in</span>Â url:
Â  Â  Â  Â Â <span class="hljs-comment"># Bç«™è§†é¢‘è¯„è®ºæŠ“å–</span>
Â  Â  Â  Â  available_actions = [
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_comments"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".reply-item, .root-reply"</span>},
Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"action"</span>:Â <span class="hljs-string">"view_related"</span>,Â <span class="hljs-string">"selector"</span>:Â <span class="hljs-string">".video-page-card, .recommend-list"</span>},
Â  Â  Â  Â  ]
</code></pre>
<h3 data-id="heading-15">LLM é©±åŠ¨çš„æ™ºèƒ½æ¢ç´¢</h3>
<p>ç³»ç»Ÿåˆ›æ–°æ€§åœ°å¼•å…¥äº† LLM é©±åŠ¨çš„æ™ºèƒ½æ¢ç´¢æœºåˆ¶ï¼Œè®© AI å†³å®šæ˜¯å¦éœ€è¦æ·±å…¥æŠ“å–æŸä¸ªé¡µé¢çš„é¢å¤–å†…å®¹ï¼Œå¦‚è¯„è®ºåŒºã€ç›¸å…³æ¨èç­‰ã€‚è¿™ç§æ™ºèƒ½å†³ç­–å¤§å¤§æé«˜äº†æ•°æ®é‡‡é›†çš„æ•ˆç‡å’Œé’ˆå¯¹æ€§ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">llm_decide_exploration</span>(<span class="hljs-params">keyword:Â <span class="hljs-built_in">str</span>, page_url:Â <span class="hljs-built_in">str</span>, page_content:Â <span class="hljs-built_in">str</span>, source:Â <span class="hljs-built_in">str</span></span>):
Â  Â Â <span class="hljs-string">"""LLM æ™ºèƒ½å†³ç­–æ˜¯å¦è¿›è¡Œæ·±åº¦æ¢ç´¢"""</span>
Â  Â  prompt =Â <span class="hljs-string">f"""è¯·æ ¹æ®ä»¥ä¸‹ä¿¡æ¯å†³å®šæ˜¯å¦éœ€è¦è¿›ä¸€æ­¥æ¢ç´¢é¡µé¢è·å–æ›´å¤šèˆ†æƒ…æ•°æ®ã€‚
ã€æœç´¢å…³é”®è¯ã€‘<span class="hljs-subst">{keyword}</span>
ã€å½“å‰é¡µé¢ã€‘<span class="hljs-subst">{page_url}</span>
ã€å·²è·å–å†…å®¹é¢„è§ˆã€‘<span class="hljs-subst">{page_content[:<span class="hljs-number">500</span>]}</span>
ã€å†³ç­–æ ‡å‡†ã€‘
1. å¦‚æœå½“å‰å†…å®¹å·²ç»è¶³å¤Ÿä¸°å¯Œï¼Œå¯èƒ½ä¸éœ€è¦è¿›ä¸€æ­¥æ¢ç´¢
2. å¦‚æœæ˜¯å¾®åš/Bç«™ç­‰å¹³å°ï¼Œè¯„è®ºåŒºé€šå¸¸åŒ…å«é‡è¦çš„èˆ†æƒ…ä¿¡æ¯
3. æƒè¡¡æ—¶é—´æˆæœ¬ï¼Œæ¯ä¸ªé¡µé¢æœ€å¤šæ¢ç´¢1-2ä¸ªæ“ä½œ
è¯·è¿”å› JSON æ ¼å¼çš„å†³ç­–ç»“æœã€‚
"""</span>
Â  Â  result =Â <span class="hljs-keyword">await</span>Â explorer.run(prompt)
Â  Â Â <span class="hljs-keyword">return</span>Â json.loads(result.output)
</code></pre>
<h2 data-id="heading-16">å‰ç«¯ VNC é›†æˆå®ç°</h2>
<h3 data-id="heading-17">åŠ¨æ€åº“åŠ è½½æœºåˆ¶</h3>
<p>å‰ç«¯ VNC å®¢æˆ·ç«¯éœ€è¦åŠ¨æ€åŠ è½½ noVNC åº“ï¼Œç³»ç»Ÿå®ç°äº†æ™ºèƒ½çš„åŠ è½½æœºåˆ¶ï¼Œæ”¯æŒæœ¬åœ°èµ„æºå’Œ CDN å›é€€ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">functionÂ loadScript(url) {
Â  Â Â returnÂ newÂ Promise(function(resolve, reject) {
Â  Â  Â  Â Â varÂ <span class="hljs-attr">script</span> =Â document.createElement(<span class="hljs-string">'script'</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-attr">script.src</span>Â = baseUrl + url<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-attr">script.onload</span>Â = resolve<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-attr">script.onerror</span>Â =Â function() {
Â  Â  Â  Â  Â  Â Â // æœ¬åœ°åŠ è½½å¤±è´¥ï¼Œå°è¯• CDN
Â  Â  Â  Â  Â  Â Â varÂ <span class="hljs-attr">fallbackUrl</span> = url.includes(<span class="hljs-string">'wordcloud'</span>)Â 
Â  Â  Â  Â  Â  Â  Â  Â  ?Â 'https://cdn.jsdelivr.net/npm/echarts-wordcloud@2.1.0/dist/echarts-wordcloud.min.js'
Â  Â  Â  Â  Â  Â  Â  Â  :Â 'https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js'<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â Â varÂ <span class="hljs-attr">fallbackScript</span> =Â document.createElement(<span class="hljs-string">'script'</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">fallbackScript.src</span>Â = fallbackUrl<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">fallbackScript.onload</span>Â = resolve<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">fallbackScript.onerror</span>Â = reject<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â Â document.head.appendChild(fallbackScript)<span class="hljs-comment">;</span>
Â  Â  Â  Â  }<span class="hljs-comment">;</span>
Â  Â  Â  Â Â document.head.appendChild(script)<span class="hljs-comment">;</span>
Â  Â  })<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-18">å¤šåè®®é€‚é…</h3>
<p>è€ƒè™‘åˆ°éƒ¨ç½²ç¯å¢ƒçš„å¤æ‚æ€§ï¼ŒVNC ç»„ä»¶å®ç°äº† HTTP/HTTPS ç¯å¢ƒä¸‹çš„ WebSocket åè®®è‡ªé€‚åº”ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span>Â adjustWebSocketUrl =Â useCallback((url:Â string):Â stringÂ =&gt;Â {
Â  Â Â <span class="hljs-keyword">const</span>Â isHttps =Â window.location.protocolÂ ===Â <span class="hljs-string">'https:'</span>;
Â  Â Â <span class="hljs-keyword">if</span>Â (!isHttps &amp;&amp; url.startsWith(<span class="hljs-string">'wss://'</span>)) {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â url.replace(<span class="hljs-string">'wss://'</span>,Â <span class="hljs-string">'ws://'</span>);
Â  Â  }
Â  Â Â <span class="hljs-keyword">if</span>Â (isHttps &amp;&amp; url.startsWith(<span class="hljs-string">'ws://'</span>)) {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â url.replace(<span class="hljs-string">'ws://'</span>,Â <span class="hljs-string">'wss://'</span>);
Â  Â  }
Â  Â Â <span class="hljs-keyword">return</span>Â url;
}, []);
</code></pre>
<h2 data-id="heading-19">æ™ºèƒ½åˆ†æä¸æŠ¥å‘Šç”Ÿæˆ</h2>
<h3 data-id="heading-20">æ ‡å‡†åŒ–æƒ…æ„Ÿåˆ†æ</h3>
<p>ç³»ç»Ÿå®ç°äº†åŸºäºå…³é”®è¯è¯å…¸çš„æƒ…æ„Ÿåˆ†æç®—æ³•ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œè¿™ç§æ–¹æ³•æ›´åŠ é€æ˜å’Œå¯æ§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">SentimentStandards</span>:
Â  Â Â <span class="hljs-string">"""æƒ…æ„Ÿå€¾å‘æ ‡å‡†åŒ–è®¡ç®—"""</span>
Â  Â  POSITIVE_KEYWORDS = [
Â  Â  Â  Â Â <span class="hljs-string">"ä¼˜ç§€"</span>,Â <span class="hljs-string">"å“è¶Š"</span>,Â <span class="hljs-string">"åˆ›æ–°"</span>,Â <span class="hljs-string">"é¢†å…ˆ"</span>,Â <span class="hljs-string">"çªç ´"</span>,Â <span class="hljs-string">"æˆåŠŸ"</span>,Â <span class="hljs-string">"èµ"</span>,Â <span class="hljs-string">"å¥½è¯„"</span>,Â <span class="hljs-string">"æ”¯æŒ"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"è®¤å¯"</span>,Â <span class="hljs-string">"æ»¡æ„"</span>,Â <span class="hljs-string">"ä¿¡èµ–"</span>,Â <span class="hljs-string">"æœŸå¾…"</span>,Â <span class="hljs-string">"çœ‹å¥½"</span>,Â <span class="hljs-string">"å€¼å¾—"</span>,Â <span class="hljs-string">"æ¨è"</span>,Â <span class="hljs-string">"å–œæ¬¢"</span>
Â  Â  ]
Â  Â  NEGATIVE_KEYWORDS = [
Â  Â  Â  Â Â <span class="hljs-string">"å·®"</span>,Â <span class="hljs-string">"ç³Ÿç³•"</span>,Â <span class="hljs-string">"å¤±è´¥"</span>,Â <span class="hljs-string">"è½å"</span>,Â <span class="hljs-string">"é—®é¢˜"</span>,Â <span class="hljs-string">"ç¼ºé™·"</span>,Â <span class="hljs-string">"æ‰¹è¯„"</span>,Â <span class="hljs-string">"è´¨ç–‘"</span>,Â <span class="hljs-string">"æ‹…å¿§"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"å¤±æœ›"</span>,Â <span class="hljs-string">"ä¸æ»¡"</span>,Â <span class="hljs-string">"æŠ±æ€¨"</span>,Â <span class="hljs-string">"æŠ•è¯‰"</span>,Â <span class="hljs-string">"å·®è¯„"</span>,Â <span class="hljs-string">"åƒåœ¾"</span>,Â <span class="hljs-string">"éª—å±€"</span>
Â  Â  ]
Â  Â  @<span class="hljs-built_in">staticmethod</span>
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">calculate_sentiment_score</span>(<span class="hljs-params">text:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-built_in">float</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""è®¡ç®—æƒ…æ„Ÿå¾—åˆ† (-1.0 åˆ° 1.0)"""</span>
Â  Â  Â  Â  positive_count =Â <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>Â <span class="hljs-keyword">for</span>Â wordÂ <span class="hljs-keyword">in</span>Â SentimentStandards.POSITIVE_KEYWORDSÂ <span class="hljs-keyword">if</span>Â wordÂ <span class="hljs-keyword">in</span>Â text)
Â  Â  Â  Â  negative_count =Â <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>Â <span class="hljs-keyword">for</span>Â wordÂ <span class="hljs-keyword">in</span>Â SentimentStandards.NEGATIVE_KEYWORDSÂ <span class="hljs-keyword">if</span>Â wordÂ <span class="hljs-keyword">in</span>Â text)
Â  Â  Â  Â  total_count = positive_count + negative_count
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â total_count ==Â <span class="hljs-number">0</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0.0</span>
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â (positive_count - negative_count) / total_count
</code></pre>
<h3 data-id="heading-21">æµå¼æŠ¥å‘Šç”Ÿæˆ</h3>
<p>æŠ¥å‘Šç”Ÿæˆè¿‡ç¨‹é‡‡ç”¨æµå¼è¾“å‡ºï¼Œç”¨æˆ·å¯ä»¥å®æ—¶è§‚å¯ŸæŠ¥å‘Šçš„æ’°å†™è¿‡ç¨‹ï¼Œè¿™ç§ä½“éªŒæ˜¯ä¼ ç»Ÿç³»ç»Ÿæ— æ³•æä¾›çš„ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">asyncÂ withÂ writer.run_stream(report_prompt)Â asÂ result:
Â  Â Â asyncÂ forÂ textÂ inÂ result.stream_text():
Â  Â  Â  Â  <span class="hljs-attr">report_content</span> = text
Â  Â  Â  Â  <span class="hljs-attr">state.report_text</span> = report_content
Â  Â  Â  Â  <span class="hljs-attr">current_time</span> = asyncio.get_event_loop().time()
Â  Â  Â  Â  <span class="hljs-attr">content_delta</span> =Â len(report_content) - last_event_length
Â  Â  Â  Â  <span class="hljs-attr">time_delta</span> = current_time - last_event_time
Â  Â  Â  Â Â <span class="hljs-comment"># æ¯ 100 å­—ç¬¦æˆ–æ¯ 0.3 ç§’å‘é€ä¸€æ¬¡æ›´æ–°</span>
Â  Â  Â  Â Â ifÂ content_delta &gt;=Â 100Â orÂ time_delta &gt;=Â 0.3:
Â  Â  Â  Â  Â  Â Â awaitÂ push_state_event(run_id, state)
</code></pre>
<h2 data-id="heading-22">éƒ¨ç½²ä¸è¿ç»´ä¼˜åŠ¿</h2>
<h3 data-id="heading-23">ç®€åŒ–çš„éƒ¨ç½²æµç¨‹</h3>
<p>ç›¸æ¯”ä¼ ç»Ÿèˆ†æƒ…ç³»ç»Ÿéœ€è¦å¤æ‚çš„åˆ†å¸ƒå¼çˆ¬è™«é›†ç¾¤éƒ¨ç½²ï¼ŒAgentRun ç³»ç»Ÿçš„éƒ¨ç½²ç›¸å¯¹ç®€å•ã€‚åªéœ€è¦é…ç½®å¥½ç¯å¢ƒå˜é‡å’Œ AgentRun Sandbox æ¨¡æ¿ï¼Œç³»ç»Ÿå°±èƒ½è‡ªåŠ¨ç®¡ç†æµè§ˆå™¨å®ä¾‹çš„åˆ›å»ºå’Œé”€æ¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ ¸å¿ƒé…ç½®</span>
<span class="hljs-attr">AGENTRUN_MODEL_NAME</span>=your_model_name
<span class="hljs-attr">MODEL_NAME</span>=qwen3-max
<span class="hljs-attr">AGENTRUN_BROWSER_SANDBOX_NAME</span>=your_browser_template
<span class="hljs-attr">TIMEOUT</span>=<span class="hljs-number">180</span>
</code></pre>
<h3 data-id="heading-24">è‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›</h3>
<p>ç³»ç»Ÿå†…ç½®äº†å®Œå–„çš„ç›‘æ§å’Œè‡ªæ¢å¤æœºåˆ¶ï¼Œå¤§å¤§é™ä½äº†è¿ç»´å¤æ‚åº¦ã€‚å½“æ£€æµ‹åˆ°å¼‚å¸¸æ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨é‡å»ºèµ„æºï¼Œä¿è¯æœåŠ¡çš„è¿ç»­æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¿æ¥å¤±è´¥æ—¶è‡ªåŠ¨é‡è¿ï¼ˆæ¯ 10 ç§’å°è¯•ä¸€æ¬¡ï¼‰</span>
useEffect(() =&gt; {
Â  Â Â ifÂ (<span class="hljs-attr">status</span> ===Â <span class="hljs-string">'error'</span>Â &amp;&amp; active &amp;&amp; rfbLoaded) {
Â  Â  Â  Â  <span class="hljs-attr">reconnectTimerRef.current</span> = setTimeout(() =&gt; {
Â  Â  Â  Â  Â  Â  cleanupRfb()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">lastUrlRef.current</span> =Â null<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  fetchVncUrl(true)<span class="hljs-comment">;</span>
Â  Â  Â  Â  }, RECONNECT_INTERVAL)<span class="hljs-comment">;</span>
Â  Â  }
}, <span class="hljs-section">[status, active, rfbLoaded]</span>)<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-25">æ€§èƒ½ä¸æ‰©å±•æ€§åˆ†æ</h2>
<h3 data-id="heading-26">å¹¶å‘å¤„ç†èƒ½åŠ›</h3>
<p>ä¼ ç»Ÿç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›å¾€å¾€å—é™äºå•æœºèµ„æºï¼Œè€Œå‡½æ•°è®¡ç®— AgentRun ç³»ç»Ÿå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºå¤šä¸ª Sandbox å®ä¾‹ï¼Œå®ç°çœŸæ­£çš„æ°´å¹³æ‰©å±•ã€‚ç³»ç»Ÿé€šè¿‡å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹å’Œè¿æ¥æ± ç®¡ç†ï¼Œèƒ½å¤Ÿé«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">uvicorn.run(
Â  Â Â "main:app",
Â  Â  <span class="hljs-attr">host</span>=<span class="hljs-string">"0.0.0.0"</span>,
Â  Â  <span class="hljs-attr">port</span>=<span class="hljs-number">8000</span>,
Â  Â  <span class="hljs-attr">log_level</span>=<span class="hljs-string">"info"</span>,
Â  Â  <span class="hljs-attr">timeout_keep_alive</span>=<span class="hljs-number">120</span>,
Â  Â  <span class="hljs-attr">limit_concurrency</span>=<span class="hljs-number">100</span>, Â <span class="hljs-comment"># æ”¯æŒé«˜å¹¶å‘</span>
)
</code></pre>
<h3 data-id="heading-27">èµ„æºå¼¹æ€§ç®¡ç†</h3>
<p>ç³»ç»Ÿå®ç°äº†æ™ºèƒ½çš„èµ„æºç®¡ç†ç­–ç•¥ï¼Œèƒ½å¤Ÿæ ¹æ®ä»»åŠ¡è´Ÿè½½åŠ¨æ€è°ƒæ•´ Sandbox å®ä¾‹æ•°é‡ã€‚è¿™ç§å¼¹æ€§æ‰©å±•èƒ½åŠ›æ˜¯ä¼ ç»Ÿå›ºå®šæ¶æ„éš¾ä»¥å®ç°çš„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_all_sandboxes</span>() -&gt;Â <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Any</span>]]:
Â  Â Â <span class="hljs-string">"""åŠ¨æ€è·å–æ‰€æœ‰å¯ç”¨çš„Sandboxå®ä¾‹"""</span>
Â  Â  result = []
Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â _sandbox_lock:
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â sandbox_id, sandboxÂ <span class="hljs-keyword">in</span>Â _sandboxes.items():
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ£€æŸ¥å®ä¾‹å¥åº·çŠ¶æ€</span>
Â  Â  Â  Â  Â  Â  Â  Â  vnc_url = sandbox.get_vnc_url()
Â  Â  Â  Â  Â  Â  Â  Â  result.append({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"sandbox_id"</span>: sandbox_id,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"vnc_url"</span>: vnc_url,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"active"</span>:Â <span class="hljs-literal">True</span>,
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â Exception:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># è‡ªåŠ¨æ¸…ç†å¤±æ•ˆå®ä¾‹</span>
Â  Â  Â  Â  Â  Â  Â  Â  result.append({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"sandbox_id"</span>: sandbox_id,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"active"</span>:Â <span class="hljs-literal">False</span>,
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â Â <span class="hljs-keyword">return</span>Â result
</code></pre>
<h2 data-id="heading-28">æ€»ç»“</h2>
<p>åŸºäºå‡½æ•°è®¡ç®— AgentRun æ„å»ºçš„èˆ†æƒ…åˆ†æç³»ç»Ÿå±•ç°äº†ç°ä»£ AI æŠ€æœ¯åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­çš„å¼ºå¤§åº”ç”¨æ½œåŠ›ã€‚ç›¸æ¯”ä¼ ç»Ÿæ–¹æ¡ˆï¼Œå‡½æ•°è®¡ç®— AgentRun ç³»ç»Ÿåœ¨å®‰å…¨æ€§ã€å¯é æ€§ã€å¯è§‚æµ‹æ€§å’Œæ‰©å±•æ€§æ–¹é¢éƒ½å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚</p>
<p>é€šè¿‡éš”ç¦»çš„æµè§ˆå™¨ç¯å¢ƒï¼Œç³»ç»Ÿè§£å†³äº†ä¼ ç»Ÿçˆ¬è™«é¢ä¸´çš„å®‰å…¨é£é™©å’Œç¯å¢ƒæ±¡æŸ“é—®é¢˜ã€‚å®æ—¶çš„ VNC é¢„è§ˆåŠŸèƒ½æä¾›äº†å‰æ‰€æœªæœ‰çš„é€æ˜åº¦ï¼Œè®©å¼€å‘è€…å’Œç”¨æˆ·èƒ½å¤Ÿç›´è§‚åœ°è§‚å¯Ÿç³»ç»Ÿå·¥ä½œçŠ¶æ€ã€‚æ™ºèƒ½çš„æ•…éšœæ£€æµ‹å’Œè‡ªæ¢å¤æœºåˆ¶å¤§å¤§é™ä½äº†è¿ç»´å¤æ‚åº¦ï¼Œè€Œæµå¼è¾“å‡ºè®¾è®¡åˆ™æ˜¾è‘—æå‡äº†ç”¨æˆ·ä½“éªŒã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå‡½æ•°è®¡ç®— AgentRun ç³»ç»Ÿå°†å¤æ‚çš„èˆ†æƒ…åˆ†æä»»åŠ¡å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œä»å¤šå¹³å°æ•°æ®é‡‡é›†ã€æ·±åº¦å†…å®¹æŠ“å–ã€æ™ºèƒ½æƒ…æ„Ÿåˆ†æåˆ°ä¸“ä¸šæŠ¥å‘Šç”Ÿæˆï¼Œæ•´ä¸ªæµç¨‹æ— éœ€äººå·¥å¹²é¢„ã€‚è¿™ç§ç«¯åˆ°ç«¯çš„è‡ªåŠ¨åŒ–èƒ½åŠ›ï¼Œç»“åˆ AI æŠ€æœ¯çš„æŒç»­è¿›æ­¥ï¼Œå°†ä¸ºä¼ä¸šå’Œæœºæ„çš„èˆ†æƒ…åˆ†æå·¥ä½œå¸¦æ¥é©å‘½æ€§çš„æ”¹å˜ã€‚</p>
<p>æ¬¢è¿åŠ å…¥â€œå‡½æ•°è®¡ç®— AgentRun å®¢æˆ·ç¾¤â€ä¸æˆ‘ä»¬äº¤æµï¼Œé’‰é’‰ç¾¤å·ï¼š134570017218ã€‚</p>
<p><strong>å¿«é€Ÿäº†è§£å‡½æ•°è®¡ç®— AgentRunï¼š</strong></p>
<p><strong>ä¸€å¥è¯ä»‹ç»ï¼š</strong> å‡½æ•°è®¡ç®— AgentRun æ˜¯ä¸€ä¸ªä»¥é«˜ä»£ç ä¸ºæ ¸å¿ƒçš„ä¸€ç«™å¼ Agentic AI åŸºç¡€è®¾æ–½å¹³å°ã€‚ç§‰æŒç”Ÿæ€å¼€æ”¾å’Œçµæ´»ç»„è£…çš„ç†å¿µï¼Œä¸ºä¼ä¸šçº§ Agent åº”ç”¨æä¾›ä»å¼€å‘ã€éƒ¨ç½²åˆ°è¿ç»´çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7333e7a6ace849a3a84cd2cef2836b4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349516&amp;x-signature=PGzjK9qak75XL0U0Ax7gSsa1tBw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><em>å‡½æ•°è®¡ç®— AgentRun æ¶æ„å›¾</em></p>
<p>AgentRun è¿è¡Œæ—¶åŸºäºé˜¿é‡Œäº‘å‡½æ•°è®¡ç®— FC æ„å»ºï¼Œç»§æ‰¿äº† Serverless è®¡ç®—æè‡´å¼¹æ€§ã€æŒ‰é‡ä»˜è´¹ã€é›¶è¿ç»´çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚é€šè¿‡æ·±åº¦é›†æˆ AgentScopeã€Langchainã€RAGFlowã€Mem0 ç­‰ä¸»æµå¼€æºç”Ÿæ€ã€‚AgentRun å°† Serverless çš„æè‡´å¼¹æ€§ã€é›¶è¿ç»´å’ŒæŒ‰é‡ä»˜è´¹çš„ç‰¹æ€§ä¸ AI åŸç”Ÿåº”ç”¨åœºæ™¯æ·±åº¦èåˆï¼ŒåŠ©åŠ›ä¼ä¸šå®ç°æˆæœ¬ä¸æ•ˆç‡çš„æè‡´ä¼˜åŒ–ï¼Œå¹³å‡ TCO é™ä½ 60%ã€‚Â </p>
<p>è®©å¼€å‘è€…åªéœ€ä¸“æ³¨äº Agent çš„ä¸šåŠ¡é€»è¾‘åˆ›æ–°ï¼Œæ— éœ€å…³å¿ƒåº•å±‚åŸºç¡€è®¾æ–½ï¼Œè®© Agentic AI çœŸæ­£è¿›å…¥ä¼ä¸šç”Ÿäº§ç¯å¢ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JSå¤æ‚å»é‡ä¸€å®šè¦å…ˆæ’åºå—ï¼Ÿæ·±åº¦è§£æä¸æ€§èƒ½å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7588002126258110470</link>    <guid>https://juejin.cn/post/7588002126258110470</guid>    <pubDate>2025-12-26T09:53:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588002126258110470" data-draft-id="7587995707165442067" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JSå¤æ‚å»é‡ä¸€å®šè¦å…ˆæ’åºå—ï¼Ÿæ·±åº¦è§£æä¸æ€§èƒ½å¯¹æ¯”"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-26T09:53:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Fronty"/> <meta itemprop="url" content="https://juejin.cn/user/588993964030574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JSå¤æ‚å»é‡ä¸€å®šè¦å…ˆæ’åºå—ï¼Ÿæ·±åº¦è§£æä¸æ€§èƒ½å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993964030574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Fronty
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:53:34.000Z" title="Fri Dec 26 2025 09:53:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å¼•è¨€</h4>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæ•°ç»„å»é‡æ˜¯JavaScriptä¸­å¸¸è§çš„æ“ä½œã€‚å¯¹äºç®€å•æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ¯«ä¸çŠ¹è±«åœ°ä½¿ç”¨Setã€‚ä½†å½“é¢å¯¹å¤æ‚å¯¹è±¡æ•°ç»„æ—¶ï¼Œå¾ˆå¤šå¼€å‘è€…ä¼šäº§ç”Ÿç–‘é—®ï¼šå¤æ‚å»é‡ä¸€å®šè¦å…ˆæ’åºå—ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜èƒŒåå…¶å®éšè—ç€å‡ ä¸ªæ›´æ·±å±‚æ¬¡çš„è€ƒé‡:</p>
<ul>
<li>æ’åºæ˜¯å¦ä¼šå½±å“åŸå§‹æ•°æ®é¡ºåºï¼Ÿ</li>
<li>æ’åºçš„æ€§èƒ½å¼€é”€æ˜¯å¦å€¼å¾—ï¼Ÿ</li>
<li>æ˜¯å¦æœ‰æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Ÿ</li>
</ul>
<h4 data-id="heading-1">1. å¸¸è§çš„æ’åºå»é‡æ–¹æ¡ˆ</h4>
<h5 data-id="heading-2">1.1 ä¼ ç»Ÿçš„æ’åºå»é‡æ€è·¯</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…ˆæ’åºåå»é‡çš„ç»å…¸å†™æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sortThenUnique</span>(<span class="hljs-params">arr, key</span>) {
  <span class="hljs-keyword">return</span> arr
    .<span class="hljs-title function_">slice</span>()
    .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
      <span class="hljs-comment">// é¿å…ä¿®æ”¹åŸå§‹æ•°ç»„</span>
      <span class="hljs-keyword">const</span> valueA = key ? a[key] : a;
      <span class="hljs-keyword">const</span> valueB = key ? b[key] : b;
      <span class="hljs-keyword">if</span> (valueA &lt; valueB) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
      <span class="hljs-keyword">if</span> (valueA &gt; valueB) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    })
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item, index, array</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (index === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// ä¿ç•™ç¬¬ä¸€ä¸ªå…ƒç´ </span>
      <span class="hljs-keyword">const</span> value = key ? item[key] : item;
      <span class="hljs-keyword">const</span> prevValue = key ? array[index - <span class="hljs-number">1</span>][key] : array[index - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">return</span> value !== prevValue; <span class="hljs-comment">// ä»…ä¿ç•™ä¸å‰ä¸€ä¸ªå…ƒç´ ä¸åŒçš„å…ƒç´ </span>
    });
}
</code></pre>
<h5 data-id="heading-3">1.2 æ’åºå»é‡çš„ä¼˜ç¼ºç‚¹</h5>
<p><strong>ä¼˜ç‚¹:</strong></p>
<ul>
<li>ä»£ç é€»è¾‘ç›¸å¯¹ç›´è§‚</li>
<li>å¯¹äºå·²æ’åºæˆ–éœ€è¦æ’åºçš„æ•°æ®ï¼Œå¯ä»¥ä¸€æ­¥å®Œæˆ</li>
<li>åœ¨æŸäº›ç®—æ³•é¢˜ä¸­å¯èƒ½æ˜¯å¿…è¦æ­¥éª¤</li>
</ul>
<p><strong>ç¼ºç‚¹:</strong></p>
<ul>
<li>æ—¶é—´å¤æ‚åº¦è‡³å°‘ä¸º O(n log n)</li>
<li>æ”¹å˜äº†åŸå§‹æ•°æ®çš„é¡ºåº</li>
<li>å¯¹äºä¸éœ€è¦æ’åºçš„åœºæ™¯æ˜¯é¢å¤–å¼€é”€</li>
</ul>
<h4 data-id="heading-4">2. ä¸æ’åºçš„å»é‡æ–¹æ¡ˆ</h4>
<h5 data-id="heading-5">2.1 åŸºäºMapçš„ä¿æŒé¡ºåºæ–¹æ¡ˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">uniqueByKey</span>(<span class="hljs-params">arr, key</span>) {
  <span class="hljs-keyword">const</span> seen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  <span class="hljs-keyword">const</span> result = [];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> arr) {
    <span class="hljs-keyword">const</span> keyValue = item[key];
    <span class="hljs-keyword">if</span> (!seen.<span class="hljs-title function_">has</span>(keyValue)) {
      seen.<span class="hljs-title function_">set</span>(keyValue, <span class="hljs-literal">true</span>);
      result.<span class="hljs-title function_">push</span>(item);
    }
  }
  <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// æ”¯æŒå¤šä¸ªå­—æ®µçš„å¤åˆé”®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">uniqueByMultipleKeys</span>(<span class="hljs-params">arr, keys</span>) {
  <span class="hljs-keyword">const</span> seen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
  <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> compositeKey = keys.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> item[key]).<span class="hljs-title function_">join</span>(<span class="hljs-string">"|"</span>);
    <span class="hljs-keyword">if</span> (seen.<span class="hljs-title function_">has</span>(compositeKey)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    seen.<span class="hljs-title function_">add</span>(compositeKey);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  });
}
</code></pre>
<h5 data-id="heading-6">2.2 åŸºäºå¯¹è±¡çš„ç¼“å­˜æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">uniqueByKeyWithObject</span>(<span class="hljs-params">arr, key</span>) {
  <span class="hljs-keyword">const</span> cache = {};
  <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> keyValue = item[key];
    <span class="hljs-keyword">if</span> (cache[keyValue]) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    cache[keyValue] = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  });
}
</code></pre>
<h5 data-id="heading-7">2.3 åŸºäºè‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°çš„æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">uniqueWithCustomComparator</span>(<span class="hljs-params">arr, comparator</span>) {
  <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">current, index, self</span>) =&gt;</span> {
    <span class="hljs-comment">// æŸ¥æ‰¾ç¬¬ä¸€ä¸ªç›¸åŒå…ƒç´ çš„ä½ç½®</span>
    <span class="hljs-keyword">return</span> self.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-title function_">comparator</span>(item, current)) === index;
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> users = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"Bob"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> }, <span class="hljs-comment">// é‡å¤</span>
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">26</span> }, <span class="hljs-comment">// IDç›¸åŒä½†å¹´é¾„ä¸åŒ</span>
];

<span class="hljs-keyword">const</span> uniqueUsers = <span class="hljs-title function_">uniqueWithCustomComparator</span>(
  users,
  <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">id</span> === b.<span class="hljs-property">id</span> &amp;&amp; a.<span class="hljs-property">name</span> === b.<span class="hljs-property">name</span>
);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(uniqueUsers);
<span class="hljs-comment">// [ { id: 1, name: 'Alice', age: 25 }, { id: 2, name: 'Bob', age: 30 } ]</span>
</code></pre>
<h4 data-id="heading-8">3. æ€§èƒ½å¯¹æ¯”åˆ†æ</h4>
<h5 data-id="heading-9">3.1 æ—¶é—´å¤æ‚åº¦å¯¹æ¯”</h5>



































<table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">æ—¶é—´å¤æ‚åº¦</th><th align="left">ç©ºé—´å¤æ‚åº¦</th><th align="left">æ˜¯å¦ä¿æŒé¡ºåº</th></tr></thead><tbody><tr><td align="left">æ’åºåå»é‡</td><td align="left">O(n log n)</td><td align="left">O(1) æˆ– O(n)</td><td align="left">å¦</td></tr><tr><td align="left">Mapå»é‡</td><td align="left">O(n)</td><td align="left">O(n)</td><td align="left">æ˜¯</td></tr><tr><td align="left">å¯¹è±¡ç¼“å­˜å»é‡</td><td align="left">O(n)</td><td align="left">O(n)</td><td align="left">æ˜¯</td></tr><tr><td align="left">filter + findIndex</td><td align="left">O(nÂ²)</td><td align="left">O(1)</td><td align="left">æ˜¯</td></tr></tbody></table>
<h5 data-id="heading-10">3.2 å®é™…æ€§èƒ½æµ‹è¯•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ€§èƒ½æµ‹è¯•ä»£ç ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateTestData</span>(<span class="hljs-params">count</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({<span class="hljs-attr">length</span>: count}, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
    <span class="hljs-attr">id</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * count / <span class="hljs-number">10</span>), <span class="hljs-comment">// äº§ç”Ÿå¤§é‡é‡å¤</span>
    <span class="hljs-attr">value</span>: <span class="hljs-string">`item-<span class="hljs-subst">${i}</span>`</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()
  }));
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">runPerformanceTest</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">generateTestData</span>(<span class="hljs-number">10000</span>);
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'Mapå»é‡'</span>);
  <span class="hljs-title function_">uniqueByKey</span>(data, <span class="hljs-string">'id'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'Mapå»é‡'</span>);
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'æ’åºå»é‡'</span>);
  <span class="hljs-title function_">sortThenUnique</span>(data, <span class="hljs-string">'id'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'æ’åºå»é‡'</span>);
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'filter+findIndex'</span>);
  <span class="hljs-title function_">uniqueWithCustomComparator</span>(data, <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">id</span> === b.<span class="hljs-property">id</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'filter+findIndex'</span>);
}
</code></pre>
<p><strong>æµ‹è¯•ç»“æœè¶‹åŠ¿:</strong></p>
<ul>
<li>æ•°æ®é‡&lt;1000ï¼šå„ç§æ–¹æ³•å·®å¼‚ä¸å¤§</li>
<li>æ•°æ®é‡1000-10000ï¼šMapæ–¹æ¡ˆæ˜æ˜¾å ä¼˜</li>
<li>æ•°æ®é‡&gt;10000ï¼šæ’åºæ–¹æ¡ˆå¼€å§‹æ˜¾ç°åŠ£åŠ¿</li>
</ul>
<h4 data-id="heading-11">4. åº”ç”¨åœºæ™¯ä¸é€‰æ‹©å»ºè®®</h4>
<h5 data-id="heading-12">4.1 ä»€ä¹ˆæ—¶å€™åº”è¯¥è€ƒè™‘æ’åºï¼Ÿ</h5>
<h6 data-id="heading-13">1.éœ€è¦æœ‰åºè¾“å‡ºæ—¶</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ—¢è¦å»é‡åˆè¦æŒ‰ç‰¹å®šå­—æ®µæ’åº</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getSortedUniqueUsers</span> = (<span class="hljs-params">users</span>) =&gt; {
  <span class="hljs-keyword">const</span> uniqueUsers = <span class="hljs-title function_">uniqueByKey</span>(users, <span class="hljs-string">'id'</span>);
  <span class="hljs-keyword">return</span> uniqueUsers.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">name</span>.<span class="hljs-title function_">localeCompare</span>(b.<span class="hljs-property">name</span>));
};
</code></pre>
<h6 data-id="heading-14">2. æ•°æ®æœ¬èº«å°±éœ€è¦æ’åºæ—¶</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¦‚æœä¸šåŠ¡æœ¬æ¥å°±éœ€è¦æ’åºï¼Œå¯ä»¥åˆå¹¶æ“ä½œ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">processData</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-comment">// å…ˆæ’åºä¾¿äºåç»­å¤„ç†</span>
  data.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">timestamp</span> - b.<span class="hljs-property">timestamp</span>);
  <span class="hljs-comment">// å»é‡</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">uniqueByKey</span>(data, <span class="hljs-string">'id'</span>);
};
</code></pre>
<h6 data-id="heading-15">3.å¤„ç†æµå¼æ•°æ®æ—¶</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®æ—¶æ•°æ®æµï¼Œéœ€è¦ç»´æŒæœ‰åºçŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SortedUniqueCollection</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = key;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">seen</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
  }
  
  <span class="hljs-title function_">add</span>(<span class="hljs-params">item</span>) {
    <span class="hljs-keyword">const</span> keyValue = item[<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>];
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">seen</span>.<span class="hljs-title function_">has</span>(keyValue)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">seen</span>.<span class="hljs-title function_">add</span>(keyValue);
      <span class="hljs-comment">// æ’å…¥åˆ°æ­£ç¡®ä½ç½®ç»´æŒæœ‰åº</span>
      <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">while</span> (index &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span> &amp;&amp; 
             <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>[index][<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>] &lt; keyValue) {
        index++;
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">0</span>, item);
    }
  }
}
</code></pre>
<h5 data-id="heading-16">4.2 ä»€ä¹ˆæ—¶å€™åº”è¯¥é¿å…æ’åºï¼Ÿ</h5>
<h6 data-id="heading-17">1.éœ€è¦ä¿æŒåŸå§‹é¡ºåºæ—¶</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ—¥å¿—è®°å½•ã€æ—¶é—´çº¿æ•°æ®ç­‰</span>
<span class="hljs-keyword">const</span> logEntries = [
  {<span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">time</span>: <span class="hljs-string">'10:00'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'å¯åŠ¨'</span>},
  {<span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">time</span>: <span class="hljs-string">'10:01'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'åˆå§‹åŒ–'</span>},
  {<span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">time</span>: <span class="hljs-string">'10:02'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'å¯åŠ¨'</span>}, <span class="hljs-comment">// é‡å¤</span>
  {<span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">time</span>: <span class="hljs-string">'10:03'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'è¿è¡Œ'</span>}
];

<span class="hljs-comment">// ä¿æŒæ—¶é—´é¡ºåºå¾ˆé‡è¦ï¼</span>
<span class="hljs-keyword">const</span> uniqueLogs = <span class="hljs-title function_">uniqueByKey</span>(logEntries, <span class="hljs-string">'id'</span>);
</code></pre>
<h6 data-id="heading-18">2.æ€§èƒ½æ•æ„Ÿçš„åº”ç”¨</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®æ—¶æ¸²æŸ“å¤§é‡æ•°æ®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderItems</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-comment">// ä½¿ç”¨Mapå»é‡é¿å…ä¸å¿…è¦çš„æ’åºå¼€é”€</span>
  <span class="hljs-keyword">const</span> uniqueItems = <span class="hljs-title function_">uniqueByKey</span>(items, <span class="hljs-string">'id'</span>);
  <span class="hljs-comment">// å¿«é€Ÿæ¸²æŸ“</span>
  <span class="hljs-keyword">return</span> uniqueItems.<span class="hljs-title function_">map</span>(renderItem);
}
</code></pre>
<h6 data-id="heading-19">3. æ•°æ®ä¸å¯å˜è¦æ±‚</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React/Vueç­‰æ¡†æ¶ä¸­ï¼Œé¿å…æ”¹å˜åŸæ•°ç»„</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">DeduplicatedList</span> = (<span class="hljs-params">{ items }</span>) =&gt; {
  <span class="hljs-comment">// ä¸æ”¹å˜åŸå§‹æ•°æ®</span>
  <span class="hljs-keyword">const</span> uniqueItems = <span class="hljs-title function_">useMemo</span>(
    <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">uniqueByKey</span>(items, <span class="hljs-string">'id'</span>),
    [items]
  );
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{uniqueItems}</span> /&gt;</span></span>;
};
</code></pre>
<h4 data-id="heading-20">5. é«˜çº§æŠ€å·§å’Œä¼˜åŒ–</h4>
<h5 data-id="heading-21">5.1 æƒ°æ€§å»é‡è¿­ä»£å™¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">uniqueIterator</span>(<span class="hljs-params">arr, getKey</span>) {
  <span class="hljs-keyword">const</span> seen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> arr) {
    <span class="hljs-keyword">const</span> key = <span class="hljs-title function_">getKey</span>(item);
    <span class="hljs-keyword">if</span> (!seen.<span class="hljs-title function_">has</span>(key)) {
      seen.<span class="hljs-title function_">add</span>(key);
      <span class="hljs-keyword">yield</span> item;
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> data = [...]; <span class="hljs-comment">// å¤§æ•°æ®é›†</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> <span class="hljs-title function_">uniqueIterator</span>(data, <span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.<span class="hljs-property">id</span>)) {
  <span class="hljs-comment">// é€ä¸ªå¤„ç†ï¼ŒèŠ‚çœå†…å­˜</span>
  <span class="hljs-title function_">processItem</span>(item);
}
</code></pre>
<h5 data-id="heading-22">5.2 å¢é‡å»é‡</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IncrementalDeduplicator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = key;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">seen</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>;
  }
  
  <span class="hljs-title function_">add</span>(<span class="hljs-params">items</span>) {
    <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> keyValue = item[<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>];
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">seen</span>.<span class="hljs-title function_">has</span>(keyValue)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">seen</span>.<span class="hljs-title function_">set</span>(keyValue, ++<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>); <span class="hljs-comment">// è®°å½•æ·»åŠ é¡ºåº</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    });
  }
  
  <span class="hljs-title function_">getAddedOrder</span>(<span class="hljs-params">keyValue</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">seen</span>.<span class="hljs-title function_">get</span>(keyValue);
  }
}
</code></pre>
<h5 data-id="heading-23">5.3 å†…å­˜ä¼˜åŒ–ç‰ˆæœ¬</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">memoryEfficientUnique</span>(<span class="hljs-params">arr, key</span>) {
  <span class="hljs-keyword">const</span> seen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  <span class="hljs-keyword">const</span> result = [];
  
  <span class="hljs-comment">// ä½¿ç”¨WeakMapå¤„ç†å¯¹è±¡é”®</span>
  <span class="hljs-keyword">const</span> weakMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> item = arr[i];
    <span class="hljs-keyword">const</span> keyValue = item[key];
    
    <span class="hljs-comment">// å¯¹äºå¯¹è±¡ç±»å‹çš„é”®å€¼ï¼Œä½¿ç”¨WeakMap</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> keyValue === <span class="hljs-string">'object'</span> &amp;&amp; keyValue !== <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">if</span> (!weakMap.<span class="hljs-title function_">has</span>(keyValue)) {
        weakMap.<span class="hljs-title function_">set</span>(keyValue, <span class="hljs-literal">true</span>);
        result.<span class="hljs-title function_">push</span>(item);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (!seen.<span class="hljs-title function_">has</span>(keyValue)) {
        seen.<span class="hljs-title function_">set</span>(keyValue, <span class="hljs-literal">true</span>);
        result.<span class="hljs-title function_">push</span>(item);
      }
    }
  }
  
  <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h4 data-id="heading-24">6. å®æˆ˜æ¡ˆä¾‹åˆ†æ</h4>
<h5 data-id="heading-25">6.1 ç”µå•†å•†å“å»é‡</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯ï¼šåˆå¹¶å¤šä¸ªæ¥æºçš„å•†å“æ•°æ®</span>
<span class="hljs-keyword">const</span> productsFromAPI = [...];
<span class="hljs-keyword">const</span> productsFromCache = [...];
<span class="hljs-keyword">const</span> userUploadedProducts = [...];

<span class="hljs-comment">// éœ€æ±‚ï¼šæŒ‰å•†å“SKUå»é‡ï¼Œä¿æŒæœ€æ–°æ•°æ®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">mergeProducts</span>(<span class="hljs-params">productLists</span>) {
  <span class="hljs-keyword">const</span> merged = [];
  <span class="hljs-keyword">const</span> skuMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  
  <span class="hljs-comment">// æŒ‰ä¼˜å…ˆçº§å¤„ç†ï¼ˆåå¤„ç†çš„ä¼˜å…ˆçº§é«˜ï¼‰</span>
  productLists.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">list</span> =&gt;</span> {
    list.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> existing = skuMap.<span class="hljs-title function_">get</span>(product.<span class="hljs-property">sku</span>);
      <span class="hljs-keyword">if</span> (!existing || product.<span class="hljs-property">updatedAt</span> &gt; existing.<span class="hljs-property">updatedAt</span>) {
        <span class="hljs-keyword">if</span> (existing) {
          <span class="hljs-comment">// ç§»é™¤æ—§çš„</span>
          <span class="hljs-keyword">const</span> index = merged.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">sku</span> === product.<span class="hljs-property">sku</span>);
          merged.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        }
        merged.<span class="hljs-title function_">push</span>(product);
        skuMap.<span class="hljs-title function_">set</span>(product.<span class="hljs-property">sku</span>, product);
      }
    });
  });
  
  <span class="hljs-keyword">return</span> merged;
}
</code></pre>
<h5 data-id="heading-26">6.2 å®æ—¶æ¶ˆæ¯å»é‡</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯ï¼šèŠå¤©åº”ç”¨æ¶ˆæ¯å»é‡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageDeduplicator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">timeWindow = <span class="hljs-number">5000</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeWindow</span> = timeWindow;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageIds</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timestamps</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }
  
  <span class="hljs-title function_">addMessage</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> { id } = message;
    
    <span class="hljs-comment">// æ¸…ç†è¿‡æœŸè®°å½•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanup</span>(now);
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦é‡å¤</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">messageIds</span>.<span class="hljs-title function_">has</span>(id)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// æ·»åŠ æ–°è®°å½•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageIds</span>.<span class="hljs-title function_">add</span>(id);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timestamps</span>.<span class="hljs-title function_">set</span>(id, now);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  
  <span class="hljs-title function_">cleanup</span>(<span class="hljs-params">now</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [id, timestamp] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">timestamps</span>) {
      <span class="hljs-keyword">if</span> (now - timestamp &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeWindow</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageIds</span>.<span class="hljs-title function_">delete</span>(id);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">timestamps</span>.<span class="hljs-title function_">delete</span>(id);
      }
    }
  }
}
</code></pre>
<h4 data-id="heading-27">ç»“è®º</h4>
<p>å›åˆ°æœ€åˆçš„é—®é¢˜ï¼šJSå¤æ‚å»é‡ä¸€å®šè¦å…ˆæ’åºå—ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚ æ’åºåªæ˜¯ä¼—å¤šå»é‡ç­–ç•¥ä¸­çš„ä¸€ç§ï¼Œè€Œéå¿…éœ€æ­¥éª¤ã€‚</p>
<p><strong>æˆ‘çš„å»ºè®®:</strong></p>
<ol>
<li><strong>é»˜è®¤ä½¿ç”¨Mapæ–¹æ¡ˆ:</strong> å¯¹äºå¤§å¤šæ•°åœºæ™¯ï¼ŒåŸºäºMapæˆ–Setçš„å»é‡æ–¹æ³•åœ¨æ€§èƒ½å’ŒåŠŸèƒ½ä¸Šéƒ½æ˜¯æœ€ä½³é€‰æ‹©ã€‚</li>
<li><strong>æ ¹æ®éœ€æ±‚é€‰æ‹©:</strong></li>
</ol>
<ul>
<li>éœ€è¦ä¿æŒé¡ºåº â†’ ä½¿ç”¨Map</li>
<li>éœ€è¦æ’åºç»“æœ â†’ å…ˆæ’åºæˆ–åæ’åº</li>
<li>æ•°æ®é‡å¾ˆå¤§ â†’ è€ƒè™‘è¿­ä»£å™¨æˆ–æµå¼å¤„ç†</li>
<li>å†…å­˜æ•æ„Ÿ â†’ ä½¿ç”¨WeakMapæˆ–å®šæœŸæ¸…ç†</li>
</ul>
<ol start="3">
<li><strong>è€ƒè™‘å¯è¯»æ€§å’Œç»´æŠ¤æ€§:</strong> æœ‰æ—¶æ¸…æ™°çš„ä»£ç æ¯”å¾®å°çš„æ€§èƒ½ä¼˜åŒ–æ›´é‡è¦ã€‚</li>
<li><strong>è¿›è¡Œå®é™…æµ‹è¯•:</strong> åœ¨æ€§èƒ½å…³é”®è·¯å¾„ä¸Šï¼Œç”¨çœŸå®æ•°æ®æµ‹è¯•ä¸åŒæ–¹æ¡ˆã€‚</li>
</ol>
<p><strong>å®è·µæ€»ç»“:</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€šç”¨æ¨èæ–¹æ¡ˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">deduplicate</span>(<span class="hljs-params">arr, identifier = v =&gt; v</span>) {
  <span class="hljs-keyword">const</span> seen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
  <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> key = <span class="hljs-keyword">typeof</span> identifier === <span class="hljs-string">'function'</span> 
      ? <span class="hljs-title function_">identifier</span>(item)
      : item[identifier];
    
    <span class="hljs-keyword">if</span> (seen.<span class="hljs-title function_">has</span>(key)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    seen.<span class="hljs-title function_">add</span>(key);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  });
}

<span class="hljs-comment">// éœ€è¦æ’åºæ—¶çš„æ–¹æ¡ˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">deduplicateAndSort</span>(<span class="hljs-params">arr, key, sortBy</span>) {
  <span class="hljs-keyword">const</span> unique = <span class="hljs-title function_">deduplicate</span>(arr, key);
  <span class="hljs-keyword">return</span> unique.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> aVal = a[sortBy];
    <span class="hljs-keyword">const</span> bVal = b[sortBy];
    <span class="hljs-keyword">return</span> aVal &lt; bVal ? -<span class="hljs-number">1</span> : aVal &gt; bVal ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
  });
}
</code></pre>
<p>è®°ä½ï¼Œæ²¡æœ‰é“¶å¼¹ã€‚æœ€åˆé€‚çš„å»é‡æ–¹æ¡ˆå–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼šæ•°æ®è§„æ¨¡ã€é¡ºåºè¦æ±‚ã€æ€§èƒ½éœ€æ±‚å’Œä»£ç ä¸Šä¸‹æ–‡ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ åœ¨é¢å¯¹å¤æ‚å»é‡é—®é¢˜æ—¶åšå‡ºæ˜æ™ºçš„é€‰æ‹©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VueCropperåŠ è½½OBSå›¾ç‰‡è·¨åŸŸé—®é¢˜]]></title>    <link>https://juejin.cn/post/7587743345197465652</link>    <guid>https://juejin.cn/post/7587743345197465652</guid>    <pubDate>2025-12-26T09:30:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587743345197465652" data-draft-id="7587743345197449268" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VueCropperåŠ è½½OBSå›¾ç‰‡è·¨åŸŸé—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T09:30:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VueCropperåŠ è½½OBSå›¾ç‰‡è·¨åŸŸé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T09:30:22.000Z" title="Fri Dec 26 2025 09:30:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    24
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜åœºæ™¯</h2>
<p>åœ¨é›†æˆ <code>VueCropper</code> å›¾ç‰‡è£å‰ªç»„ä»¶æ—¶ï¼Œé‡åˆ°ä¸€ä¸ªå…¸å‹çš„è·¨åŸŸé—®é¢˜ï¼šåŠ è½½å­˜å‚¨åœ¨ OBS ä¸Šçš„å›¾ç‰‡æ—¶ï¼Œæµè§ˆå™¨ä¼šå¯¹åŒä¸€å¼ å›¾ç‰‡å‘èµ·ä¸¤æ¬¡è¯·æ±‚ï¼Œæœ€ç»ˆç¬¬äºŒæ¬¡è¯·æ±‚è§¦å‘è·¨åŸŸé”™è¯¯ã€‚ä»¥ä¸‹æ˜¯é—®é¢˜çš„å®Œæ•´æ’æŸ¥è¿‡ç¨‹ä¸ç°è±¡æ¢³ç†ï¼š</p>
<ol>
<li>è¯·æ±‚è¡Œä¸ºå¼‚å¸¸ï¼šåŒä¸€å¼  OBS å›¾ç‰‡è¢«æµè§ˆå™¨å‘èµ·ä¸¤æ¬¡è¯·æ±‚ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚æ­£å¸¸å“åº”ï¼Œç¬¬äºŒæ¬¡è¯·æ±‚ç›´æ¥æŠ›å‡ºè·¨åŸŸç›¸å…³é”™è¯¯ï¼ˆå¦‚ <code>CORS policy: No 'Access-Control-Allow-Origin' header</code>ï¼‰ï¼›</li>
<li>åˆæ­¥æ’æŸ¥æ–¹å‘ï¼šåˆæœŸä¼˜å…ˆæ€€ç–‘ OBS æœåŠ¡å™¨è·¨åŸŸé…ç½®ç¼ºå¤±ï¼Œåé¦ˆè¿ç»´æ ¸æŸ¥åï¼Œç¡®è®¤ OBS å·²æ­£ç¡®é…ç½®è·¨åŸŸå…è®¸è§„åˆ™ï¼ˆå«å…è®¸å½“å‰å‰ç«¯åŸŸåã€æ”¯æŒ GET æ–¹æ³•ç­‰ï¼‰ï¼›</li>
<li>å…³é”®æµ‹è¯•çªç ´ï¼šé€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·æµ‹è¯•å‘ç°ï¼Œå¼€å¯ã€Œåœç”¨ç¼“å­˜ã€åŠŸèƒ½åï¼Œè·¨åŸŸé”™è¯¯æ¶ˆå¤±ã€‚æ®æ­¤é”å®šé—®é¢˜æ ¹æºä¸æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ç›¸å…³ï¼›</li>
<li>æ ¸å¿ƒå·®å¼‚å®šä½ï¼šå¯¹æ¯”ä¸¤æ¬¡è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼Œå‘ç°è·¨åŸŸæ ‡è¯†é…ç½®ä¸ä¸€è‡´â€”â€”ç¬¬ä¸€æ¬¡åŠ è½½å›¾ç‰‡æœªè®¾ç½® <code>crossOrigin</code> æ ‡è¯†ï¼Œç¬¬äºŒæ¬¡åŠ è½½æ—¶åˆ™æ·»åŠ äº†è¯¥æ ‡è¯†ï¼›</li>
<li>é—®é¢˜é€»è¾‘é—­ç¯ï¼šç¬¬ä¸€æ¬¡è¯·æ±‚å› æ—  <code>crossOrigin</code> æ ‡è¯†ï¼ŒOBS æœåŠ¡å™¨è¯†åˆ«ä¸ºéè·¨åŸŸè¯·æ±‚ï¼Œæœªè¿”å›è·¨åŸŸå“åº”å¤´ï¼›ç¬¬äºŒæ¬¡è¯·æ±‚è™½å¼€å¯ <code>crossOrigin</code>ï¼Œä½†å› å›¾ç‰‡ URL æœªå˜ï¼Œæµè§ˆå™¨ç›´æ¥å¤ç”¨ç¼“å­˜çš„æ— è·¨åŸŸå“åº”å¤´èµ„æºï¼Œå¯¼è‡´è·¨åŸŸæ ¡éªŒå¤±è´¥ã€‚</li>
</ol>
<h2 data-id="heading-1">é—®é¢˜æ ¹æº</h2>
<p>ä¸ºéªŒè¯ä¸Šè¿°æ’æŸ¥ç»“è®ºï¼Œé€šè¿‡åŸç”Ÿ JavaScript ä»£ç å¤ç°äº†é—®é¢˜åœºæ™¯ï¼Œæœ€ç»ˆç¡®è®¤é—®é¢˜æ ¹æºä¸º <strong>è·¨åŸŸç­–ç•¥ä¸æµè§ˆå™¨ç¼“å­˜å†²çª</strong>ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
    <span class="hljs-comment">// ç¬¬ä¸€æ¬¡åŠ è½½ï¼šæœªè®¾ç½® crossOrigin æ ‡è¯†</span>
    image.<span class="hljs-property">src</span> = <span class="hljs-string">'https://xxx.png'</span>; 
    image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å®Œæˆ'</span>);
        <span class="hljs-keyword">const</span> image2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
        <span class="hljs-comment">// ç¬¬äºŒæ¬¡åŠ è½½ï¼šè®¾ç½®è·¨åŸŸæ ‡è¯†ï¼ˆä¸ç¬¬ä¸€æ¬¡ä¸ä¸€è‡´ï¼‰</span>
        image2.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">"anonymous"</span>;
        <span class="hljs-comment">// åŠ è½½åŒä¸€å¼ å›¾ç‰‡ï¼Œè§¦å‘è·¨åŸŸé”™è¯¯</span>
        image2.<span class="hljs-property">src</span> = image.<span class="hljs-property">src</span>; 
        image2.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡2åŠ è½½å®Œæˆ'</span>);
        });
    });
});
</code></pre>
<p>è¯¥é—®é¢˜çš„æ ¸å¿ƒçŸ›ç›¾æ˜¯ã€ŒåŒä¸€å¼ å›¾ç‰‡çš„ä¸¤æ¬¡è¯·æ±‚é‡‡ç”¨ä¸ä¸€è‡´çš„è·¨åŸŸç­–ç•¥ã€ï¼Œç»“åˆæµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä¸ OBS æœåŠ¡å™¨çš„è·¨åŸŸå“åº”è§„åˆ™ï¼Œå…·ä½“é”™è¯¯é€»è¾‘å¯æ‹†è§£ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>éè·¨åŸŸæ¨¡å¼ç¼“å­˜ï¼šç¬¬ä¸€æ¬¡åŠ è½½æœªè®¾ç½® <code>crossOrigin</code>ï¼Œæµè§ˆå™¨ä»¥ã€Œéè·¨åŸŸæ¨¡å¼ã€å‘èµ·è¯·æ±‚ï¼ˆè¯·æ±‚å¤´ <code>Sec-Fetch-Mode = no-cors</code>ï¼‰ï¼›OBS æœåŠ¡å™¨è¯†åˆ«è¯¥æ¨¡å¼åï¼Œä¸è¿”å› <code>Access-Control-Allow-Origin</code> ç­‰è·¨åŸŸå“åº”å¤´ï¼Œæµè§ˆå™¨åˆ™å°†è¿™ä»½ã€Œæ— è·¨åŸŸå“åº”å¤´çš„å›¾ç‰‡èµ„æºã€ç¼“å­˜è‡³æœ¬åœ°ï¼›</li>
<li>è·¨åŸŸæ¨¡å¼ç¼“å­˜å†²çªï¼šç¬¬äºŒæ¬¡åŠ è½½è®¾ç½® <code>crossOrigin: "anonymous"</code>ï¼Œæµè§ˆå™¨éœ€ä»¥ã€Œè·¨åŸŸæ¨¡å¼ã€è¯·æ±‚ï¼›ä½†å› å›¾ç‰‡ URL æœªå˜ï¼Œæµè§ˆå™¨ç›´æ¥å¤ç”¨æœ¬åœ°ç¼“å­˜çš„æ— è·¨åŸŸå“åº”å¤´èµ„æºï¼Œè·¨åŸŸæ ¡éªŒæ— æ³•é€šè¿‡ï¼Œæœ€ç»ˆè§¦å‘é”™è¯¯ã€‚</li>
</ol>
<p>å…³é”®ç»“è®ºï¼šåŒä¸€å¼ å›¾ç‰‡çš„æ‰€æœ‰è¯·æ±‚ï¼Œè·¨åŸŸæ ‡è¯†å¿…é¡»å®Œå…¨ç»Ÿä¸€ï¼ˆè¦ä¹ˆæ‰€æœ‰è¯·æ±‚éƒ½è®¾ <code>crossOrigin</code>ï¼Œè¦ä¹ˆéƒ½ä¸è®¾ï¼‰ï¼Œå¦åˆ™ä¼šå› ç¼“å­˜æœºåˆ¶å¯¼è‡´è·¨åŸŸç­–ç•¥å†²çªã€‚</p>
<h2 data-id="heading-2">è§£å†³åŠæ³•</h2>
<h3 data-id="heading-3">1. æ ¸å¿ƒé€šç”¨æ–¹æ¡ˆï¼šç»Ÿä¸€è·¨åŸŸæ ‡è¯†ï¼ˆæ¨èé¦–é€‰ï¼‰</h3>
<p>æ€è·¯ï¼šç»Ÿä¸€æ‰€æœ‰åŠ è½½è¯¥å›¾ç‰‡çš„ <code>Image</code> å®ä¾‹çš„è·¨åŸŸé…ç½®ï¼ˆå‡è®¾ç½®æˆ–å‡ä¸è®¾ç½® <code>crossOrigin</code>ï¼‰ï¼Œç¡®ä¿ä¸¤æ¬¡è¯·æ±‚çš„è·¨åŸŸç­–ç•¥ä¸€è‡´ï¼Œä»æ ¹æºé¿å…ç¼“å­˜ä¸è·¨åŸŸè§„åˆ™çš„å†²çªã€‚</p>
<p>æ ¸å¿ƒæ³¨æ„ç‚¹ï¼š<code>crossOrigin</code> å¿…é¡»åœ¨ <code>src</code> èµ‹å€¼ <strong>ä¹‹å‰</strong> è®¾ç½®ã€‚è‹¥å…ˆèµ‹å€¼ <code>src</code>ï¼Œæµè§ˆå™¨ä¼šæå‰ä»¥é»˜è®¤æ¨¡å¼å‘èµ·è¯·æ±‚ï¼Œä»ä¼šè§¦å‘è·¨åŸŸå†²çªã€‚</p>
<p>æ­£ç¡®ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ç¬¬ä¸€æ¬¡åŠ è½½ï¼šæå‰è®¾ç½® crossOriginï¼Œç»Ÿä¸€è·¨åŸŸç­–ç•¥</span>
  <span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
  image.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">"anonymous"</span>; 
  image.<span class="hljs-property">src</span> = <span class="hljs-string">'https://xxx.png'</span>;

  image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å®Œæˆ'</span>);
      <span class="hljs-comment">// ç¬¬äºŒæ¬¡åŠ è½½ï¼šä¿æŒ crossOrigin é…ç½®ä¸€è‡´</span>
      <span class="hljs-keyword">const</span> image2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
      image2.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">"anonymous"</span>; 
      image2.<span class="hljs-property">src</span> = image.<span class="hljs-property">src</span>;

      image2.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡2åŠ è½½å®Œæˆ'</span>);
      });
  });

  <span class="hljs-comment">// æ·»åŠ é”™è¯¯ç›‘å¬ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥</span>
  image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å›¾ç‰‡1åŠ è½½å¤±è´¥:'</span>, e));
  image2.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å›¾ç‰‡2åŠ è½½å¤±è´¥:'</span>, e));
});
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šç»å¤§å¤šæ•°å‰ç«¯åœºæ™¯ï¼ˆåŒ…æ‹¬ <code>VueCropper </code> ç­‰ä¾èµ– canvas çš„è£å‰ªç»„ä»¶åœºæ™¯ï¼‰ï¼Œä¸”å›¾ç‰‡å­˜å‚¨ç«¯<code>ï¼ˆOBS/CDNï¼‰</code>å·²é…ç½®è·¨åŸŸå…è®¸è§„åˆ™ã€‚</p>
<h3 data-id="heading-4">2. ç»•è¿‡ç¼“å­˜æ–¹æ¡ˆï¼šè®©ç¬¬äºŒæ¬¡è¯·æ±‚è§†ä¸ºã€Œæ–°èµ„æºã€</h3>
<p>æ€è·¯ï¼šè‹¥å†å²ä»£ç æ— æ³•æ‰¹é‡ä¿®æ”¹ <code>crossOrigin</code> é…ç½®ï¼Œå¯é€šè¿‡è®©ç¬¬äºŒæ¬¡è¯·æ±‚ã€Œé¿å¼€ç¼“å­˜ã€ï¼Œè¿«ä½¿æµè§ˆå™¨é‡æ–°å‘ OBS æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ˆè€Œéå¤ç”¨æ—§ç¼“å­˜ï¼‰ï¼Œä»è€Œé¿å…è·¨åŸŸç­–ç•¥å†²çªã€‚</p>
<p>æ¨èæ–¹æ¡ˆï¼šç»™å›¾ç‰‡ URL æ·»åŠ éšæœºå‚æ•°ï¼ˆå¦‚æ—¶é—´æˆ³ï¼‰ï¼Œä½¿æµè§ˆå™¨è¯†åˆ«ä¸ºã€Œæ–°èµ„æºã€ï¼Œè§¦å‘å…¨æ–°è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> image2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
  image2.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">"anonymous"</span>;
  <span class="hljs-comment">// è¿½åŠ æ—¶é—´æˆ³å‚æ•°ï¼Œé¿å¼€æµè§ˆå™¨ç¼“å­˜</span>
  image2.<span class="hljs-property">src</span> = <span class="hljs-string">`<span class="hljs-subst">${image.src}</span>&amp;t=<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>; 
  image2.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡2åŠ è½½å®Œæˆ'</span>));
});
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå†å²ä»£ç æ¶æ„å¤æ‚ï¼Œæ— æ³•æ‰¹é‡ç»Ÿä¸€ <code>crossOrigin</code> é…ç½®ï¼Œéœ€å¿«é€Ÿä¸´æ—¶ä¿®å¤è·¨åŸŸé—®é¢˜ã€‚</p>
<p>ç¼ºç‚¹ï¼šå®Œå…¨å¤±å»ç¼“å­˜ä¼˜åŠ¿ï¼Œæ¯æ¬¡è¯·æ±‚å‡éœ€é‡æ–°ä¸‹è½½å›¾ç‰‡ï¼Œä¼šå¢åŠ å¸¦å®½æ¶ˆè€—å¹¶å»¶é•¿é¡µé¢åŠ è½½æ—¶é—´ï¼Œä»…å»ºè®®ä¸´æ—¶ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-5">3. åç«¯/å­˜å‚¨ç«¯æ–¹æ¡ˆï¼šä»æ ¹æºæ¶ˆé™¤è·¨åŸŸ</h3>
<p>æ€è·¯ï¼šé€šè¿‡åç«¯ä»£ç†æˆ–åŸŸåç»‘å®šï¼Œå°†ã€Œè·¨åŸŸå›¾ç‰‡è¯·æ±‚ã€è½¬ä¸ºã€ŒåŒæºè¯·æ±‚ã€ï¼Œä»æ ¹æºä¸Šæ¶ˆé™¤è·¨åŸŸé—®é¢˜ï¼Œæ— éœ€å‰ç«¯é¢å¤–é…ç½® <code>crossOrigin</code>ã€‚</p>
<p>å…·ä½“åšæ³•ï¼š</p>
<ol>
<li>åŒæºä»£ç†ï¼ˆæ¨èï¼‰ï¼šå‰ç«¯è¯·æ±‚è‡ªèº«åç«¯çš„ä»£ç†æ¥å£ï¼Œç”±åç«¯ä»£ä¸ºæ‹‰å– OBS å›¾ç‰‡å¹¶è¿”å›ç»™å‰ç«¯ã€‚æ­¤æ—¶å‰ç«¯æ¥æ”¶çš„å›¾ç‰‡ä¸ºåŒæºèµ„æºï¼Œæ— éœ€ä»»ä½•è·¨åŸŸé…ç½®ã€‚</li>
</ol>
<p>ç¤ºä¾‹ï¼ˆ<code>Node.js/Express</code> ä»£ç†ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åç«¯ä»£ç†ä»£ç ï¼ˆNode.js/Expressï¼‰</span>
<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">'axios'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// å›¾ç‰‡ä»£ç†æ¥å£ï¼šæ¥æ”¶å‰ç«¯ä¼ é€’çš„ OBS å›¾ç‰‡ URL</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/proxy-image'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> imgUrl = req.<span class="hljs-property">query</span>.<span class="hljs-property">url</span>;
  <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// åç«¯è¯·æ±‚ OBS å›¾ç‰‡ï¼Œä»¥æµå½¢å¼è¿”å›ç»™å‰ç«¯</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(imgUrl, { <span class="hljs-attr">responseType</span>: <span class="hljs-string">'stream'</span> });
      response.<span class="hljs-property">data</span>.<span class="hljs-title function_">pipe</span>(res);
  } <span class="hljs-keyword">catch</span> (err) {
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å¤±è´¥'</span>);
  }
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»£ç†æœåŠ¡å¯åŠ¨åœ¨ 3000 ç«¯å£'</span>));
</code></pre>
<p>å‰ç«¯ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯ä»£ç ï¼šè¯·æ±‚åç«¯ä»£ç†æ¥å£ï¼Œæ— è·¨åŸŸé—®é¢˜</span>
<span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
image.<span class="hljs-property">src</span> = <span class="hljs-string">`http://localhost:3000/proxy-image?url=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-string">'https://xxx.png'</span>)}</span>`</span>;
image.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å®Œæˆ'</span>));
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå‰ç«¯éœ€å¤§é‡å¤„ç†è·¨åŸŸå›¾ç‰‡ï¼ˆå¦‚æ‰¹é‡è£å‰ªã€åƒç´ æ“ä½œï¼‰ï¼›è¿½æ±‚ç¨³å®šå¯é çš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œä¸å¸Œæœ›ä¾èµ–å‰ç«¯ä»£ç é…ç½®ã€‚</p>
<p>ä¼˜ç‚¹ï¼šå½»åº•è§£å†³è·¨åŸŸé—®é¢˜ï¼Œå‰ç«¯æ— éœ€ä»»ä½•è·¨åŸŸç›¸å…³é…ç½®ï¼›ç¼“å­˜æœºåˆ¶å¯æ­£å¸¸ç”Ÿæ•ˆï¼Œä¸å½±å“åŠ è½½æ€§èƒ½ï¼›å®‰å…¨æ€§æ›´é«˜ï¼ˆé¿å…è®¾ç½® <code>*</code> å…è®¸æ‰€æœ‰åŸŸåè·¨åŸŸï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PAGåœ¨å¾—ç‰©ç¤¾åŒºSçº§æ´»åŠ¨çš„è½åœ°]]></title>    <link>https://juejin.cn/post/7587675306659020800</link>    <guid>https://juejin.cn/post/7587675306659020800</guid>    <pubDate>2025-12-26T07:45:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587675306659020800" data-draft-id="7587675306658627584" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PAGåœ¨å¾—ç‰©ç¤¾åŒºSçº§æ´»åŠ¨çš„è½åœ°"/> <meta itemprop="keywords" content="è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-26T07:45:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—ç‰©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2392954206960247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PAGåœ¨å¾—ç‰©ç¤¾åŒºSçº§æ´»åŠ¨çš„è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392954206960247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—ç‰©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:45:34.000Z" title="Fri Dec 26 2025 07:45:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯</h2>
<p>è¿‘æœŸï¼Œå¾—ç‰©ç¤¾åŒºæ´»åŠ¨ã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€æ¨å‡º â€œç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆä¸“å±çƒæ˜Ÿå¡â€ æ ¸å¿ƒç©æ³•ã€‚</p>
<p>åˆæœŸè§„åˆ’ç”±æœåŠ¡ç«¯åŸºäº PAG æŠ€æœ¯åˆæˆï¼Œä¸ºäº†è®©ç”¨æˆ·å¯ä»¥æ›´è‡ªç”±çš„å®šåˆ¶ä¸“å±çƒæ˜Ÿå¡ï¼Œç»å¤šç«¯è¯„ä¼°åç¡®å®šï¼šç”± H5 ç«¯æ‰¿æ¥ â€œå›¾ç‰‡äº¤äº’è°ƒæ•´ - çƒæ˜Ÿå¡ç”Ÿæˆâ€ æ ¸å¿ƒé“¾è·¯ï¼Œæ”¯æŒç”¨æˆ·å•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬äººåƒï¼Œå¾…è°ƒæ•´è‡³ç†æƒ³ä½ç½®åè§¦å‘åˆæˆã€‚è€Œ PAG ä½œä¸ºè…¾è®¯è‡ªç ”å¼€æºçš„åŠ¨æ•ˆå·¥ä½œæµè§£å†³æ–¹æ¡ˆï¼Œå‡­å€Ÿè·¨å¹³å°æ¸²æŸ“ä¸€è‡´æ€§ã€å›¾å±‚å®æ—¶ç¼–è¾‘ã€è½»é‡åŒ–æ–‡ä»¶æ€§èƒ½ï¼Œèƒ½ç²¾å‡†åŒ¹é…éœ€æ±‚ï¼Œæˆä¸ºæœ¬æ¬¡æ ¸å¿ƒæŠ€æœ¯é€‰å‹ã€‚</p>
<p>é‰´äº H5 ç«¯éœ€è½åœ°è¯¥æ ¸å¿ƒé“¾è·¯ï¼Œä¸”æµç¨‹æ¶‰åŠ PAG æŠ€æœ¯åº”ç”¨ï¼Œé¦–å…ˆéœ€å¯¹ PAG æŠ€æœ¯è¿›è¡Œæ·±å…¥äº†è§£ï¼Œä¸ºåç»­å¼€å‘ä¸é€‚é…å¥ å®šåŸºç¡€ã€‚</p>
<h2 data-id="heading-1">äºŒã€PAGæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼ŒPAG æ˜¯è…¾è®¯è‡ªç ”å¹¶å¼€æºçš„åŠ¨æ•ˆå·¥ä½œæµè§£å†³æ–¹æ¡ˆï¼Œæ ¸å¿ƒæ˜¯å®ç° Adobe After Effectsï¼ˆAEï¼‰åŠ¨æ•ˆçš„ä¸€é”®å¯¼å‡ºä¸è·¨å¹³å°åº”ç”¨ï¼ŒåŒ…å«æ¸²æŸ“ SDKã€AE å¯¼å‡ºæ’ä»¶ï¼ˆPAGExporterï¼‰ã€æ¡Œé¢é¢„è§ˆå·¥å…·ï¼ˆPAGViewerï¼‰ä¸‰éƒ¨åˆ†ã€‚</p>
<p>å®ƒå¯¼å‡ºçš„äºŒè¿›åˆ¶ PAG æ–‡ä»¶å‹ç¼©ç‡é«˜ã€è§£ç å¿«ï¼Œèƒ½é›†æˆå¤šç±»èµ„æºï¼›æ”¯æŒ Androidã€iOSã€Web ç­‰å…¨å¹³å°ï¼Œä¸”å„ç«¯æ¸²æŸ“ä¸€è‡´ã€å¼€å¯ GPU åŠ é€Ÿï¼›æ—¢å…¼å®¹å¤§éƒ¨åˆ† AE åŠ¨æ•ˆç‰¹æ€§ï¼Œä¹Ÿå…è®¸è¿è¡Œæ—¶ç¼–è¾‘ â€”â€” æ¯”å¦‚æ›¿æ¢æ–‡æœ¬ / å›¾ç‰‡ã€è°ƒæ•´å›¾å±‚ä¸æ—¶é—´è½´ï¼Œç›®å‰å·²å¹¿æ³›ç”¨äºå„ç±»äº§å“çš„åŠ¨æ•ˆåœºæ™¯ã€‚</p>
<p>å·²çŸ¥ä¸šç•Œä¸­å›¾ç‰‡åŸºç¡€ç¼–è¾‘ï¼ˆå¦‚è£å‰ªã€è°ƒè‰²ï¼‰ã€è´´çº¸å åŠ ã€æ»¤é•œæ¸²æŸ“ç­‰é«˜é¢‘åŠŸèƒ½ï¼Œåœ¨å®¢æˆ·ç«¯å‘å¸ƒå™¨åœºæ™¯ä¸‹å·²å¹¿æ³›é‡‡ç”¨ PAGæŠ€æœ¯å®ç°ï¼Œè¿™ä¸€åº”ç”¨è¶‹åŠ¿åœ¨æˆ‘å¸åŠç«å“çš„äº§å“ä¸­å‡æœ‰ä½“ç°ï¼Œæˆä¸ºæ”¯æ’‘è¿™ç±»è§†è§‰äº¤äº’åŠŸèƒ½çš„ä¸»æµæŠ€æœ¯é€‰æ‹©ã€‚</p>
<p>æ­£æ˜¯åŸºäºPAG çš„è·¨å¹³å°æ¸²æŸ“ã€å›¾å±‚å®æ—¶ç¼–è¾‘ç‰¹æ€§ï¼Œå…¶èƒ½ç²¾å‡†æ‰¿æ¥ H5 ç«¯â€˜å›¾ç‰‡äº¤äº’è°ƒæ•´ + çƒæ˜Ÿå¡åˆæˆâ€™çš„æ ¸å¿ƒé“¾è·¯ï¼Œè§£å†³æœåŠ¡ç«¯å›ºå®šåˆæˆçš„ç—›ç‚¹ï¼Œå› æ­¤æˆä¸ºæœ¬æ¬¡éœ€æ±‚çš„æ ¸å¿ƒæŠ€æœ¯é€‰å‹ã€‚</p>
<p>ä¸ºäº†è®©å¤§å®¶æ›´ç›´è§‚åœ°æ„Ÿå—ã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€æ´»åŠ¨ä¸­ â€œç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆä¸“å±çƒæ˜Ÿå¡â€ ç©æ³•ï¼Œæˆ‘ä»¬å‡†å¤‡äº†æ´»åŠ¨å®é™…æ•ˆæœå½•å±ã€‚é€šè¿‡å½•å±ï¼Œä½ å¯ä»¥æ¸…æ™°çœ‹åˆ°ç”¨æˆ·å¦‚ä½•é€šè¿‡å•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬äººåƒï¼Œå®Œæˆæ„å›¾è°ƒæ•´åç”Ÿæˆçƒæ˜Ÿå¡çš„å…¨è¿‡ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6d364c65f564fdb941ca847fa126f8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=V5UBY3EPViU4uKz7GXyKm%2BQbsXg%3D" alt="æˆªå±2025-12-26 ä¸‹åˆ2.53.53.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6dcfe266cdd24d82a2bb2786b546c284~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=UxMDfNCTXiTbWYYDFzIEEJsjEPQ%3D" alt="æˆªå±2025-12-26 ä¸‹åˆ2.54.01.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å›´ç»•ä¸šåŠ¡ç›®æ ‡ï¼Œè¯¦ç»†æ‹†è§£å®ç°è¯¥é“¾è·¯çš„å…·ä½“ä»»åŠ¡ä¼˜å…ˆçº§ä¸æ ¸å¿ƒæ¨¡å—ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€å¦‚ä½•å®ç°æ ¸å¿ƒäº¤äº’é“¾è·¯ï¼Ÿ</h2>
<p>ç»“åˆã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€çƒæ˜Ÿå¡ç”Ÿæˆçš„æ ¸å¿ƒä¸šåŠ¡ç›®æ ‡ï¼ŒæŒ‰â€˜åŸºç¡€åŠŸèƒ½â†’äº¤äº’ä½“éªŒâ†’æ‹“å±•èƒ½åŠ›â†’ç¨³å®šæ€§â€™ä¼˜å…ˆçº§ï¼Œå°†éœ€æ±‚æ‹†è§£ä¸ºä»¥ä¸‹ 6 é¡¹ä»»åŠ¡ï¼š</p>
<ol>
<li><strong>PAG æ’­æ”¾å™¨åŸºç¡€åŠŸèƒ½æ­å»º</strong>ï¼šå®ç°æ’­æ”¾ / æš‚åœã€å›¾å±‚æ›¿æ¢ã€æ–‡æœ¬ä¿®æ”¹ã€åˆæˆå›¾å¯¼å‡ºï¼Œä¸ºåç»­äº¤äº’æ‰“åŸºç¡€ï¼›</li>
<li><strong>å›¾ç‰‡äº¤äº’å˜æ¢åŠŸèƒ½å¼€å‘</strong>ï¼šæ”¯æŒå•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬ï¼Œæ»¡è¶³äººåƒæ„å›¾è°ƒæ•´éœ€æ±‚ï¼›</li>
<li><strong>äº¤äº’ä¸é¢„è§ˆå®æ—¶åŒæ­¥</strong>ï¼šå°†å›¾ç‰‡è°ƒæ•´çŠ¶æ€å®æ—¶åŒæ­¥è‡³ PAG å›¾å±‚ï¼Œå®ç° â€œæ“ä½œå³é¢„è§ˆâ€ï¼›</li>
<li><strong>æ‰¹é‡åˆæˆèƒ½åŠ›æ‹“å±•</strong>ï¼šåŸºäºå•å¼ åˆæˆé€»è¾‘ï¼Œæ”¯æŒä¸€æ¬¡æ€§ç”Ÿæˆå¤šå¼ çƒæ˜Ÿå¡ï¼ˆä¾èµ–ä»»åŠ¡ 1-3ï¼‰ï¼›</li>
<li><strong>å…¨é“¾è·¯æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä¼˜åŒ– PAG å®ä¾‹é‡Šæ”¾ã€å›¾å±‚æ¸²æŸ“æ•ˆç‡ï¼Œä¿éšœ H5 æµç•…åº¦ï¼ˆè´¯ç©¿å…¨æµç¨‹ï¼‰ï¼›</li>
<li><strong>å¼‚å¸¸åœºæ™¯é™çº§å…¼å®¹</strong>ï¼šé’ˆå¯¹ SDK ä¸æ”¯æŒåœºæ™¯ï¼Œè®¾è®¡é™æ€å›¾å±‚ã€æœåŠ¡ç«¯åˆæˆç­‰å…œåº•æ–¹æ¡ˆï¼ˆåŒæ­¥æ¨è¿›ï¼‰ã€‚</li>
</ol>
<p>åœ¨æ˜ç¡®æ ¸å¿ƒä»»åŠ¡æ‹†è§£åï¼Œé¦–è¦ç¯èŠ‚æ˜¯æ­å»º PAG æ’­æ”¾å™¨åŸºç¡€èƒ½åŠ› â€”â€” è¿™æ˜¯åç»­å›¾å±‚æ›¿æ¢ã€æ–‡æœ¬ä¿®æ”¹ã€çƒæ˜Ÿå¡åˆæˆçš„å‰æï¼Œéœ€ä» SDK åŠ è½½ã€æ’­æ”¾å™¨åˆå§‹åŒ–ã€æ ¸å¿ƒåŠŸèƒ½å°è£…é€æ­¥è½åœ°ã€‚</p>
<h2 data-id="heading-3">å››ã€åŸºç¡€PAGæ’­æ”¾å™¨å®ç°</h2>
<h3 data-id="heading-4">åŠ è½½PAG SDK</h3>
<p>å› ä¸ºæ˜¯é¦–æ¬¡æ¥è§¦PAG ï¼Œæ‰€ä»¥åœ¨é¦–æ¬¡åŠ è½½ SDK ç¯èŠ‚ä¾¿é‡åˆ°äº†éœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼š</p>
<p>libpag çš„ SDK åŠ è½½åŒ…å«ä¸¤éƒ¨åˆ†æ ¸å¿ƒæ–‡ä»¶ï¼š</p>
<ul>
<li>ä¸»ä½“ libpag.min.js</li>
<li>é…å¥—çš„ libpag.wasm</li>
</ul>
<p><strong>éœ€ç‰¹åˆ«æ³¨æ„</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œwasmæ–‡ä»¶éœ€ä¸ libpag.min.js ç½®äºåŒä¸€ç›®å½•ï¼Œè‹¥éœ€è‡ªå®šä¹‰è·¯å¾„ï¼Œä¹Ÿå¯æ‰‹åŠ¨æŒ‡å®šå…¶ä½ç½®ã€‚ï¼ˆåŠ è½½SDKå‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpag.io%2Fdocs%2Fuse-web-sdk.html%25EF%25BC%2589" target="_blank" title="https://pag.io/docs/use-web-sdk.html%EF%BC%89" ref="nofollow noopener noreferrer">pag.io/docs/use-weâ€¦</a></p>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä¸¤ä¸ªæ–‡ä»¶ä¸€åŒä¸Šä¼ è‡³ OSSçš„åŒä¸€è·¯å¾„ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fh5static.xx%2F10122053%2Flibpag.min.js" target="_blank" title="https://h5static.xx/10122053/libpag.min.js" ref="nofollow noopener noreferrer">h5static.xx/10122053/liâ€¦</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fh5static.xx%2F10122053%2Flibpag.wasm" target="_blank" title="https://h5static.xx/10122053/libpag.wasm" ref="nofollow noopener noreferrer">h5static.xx/10122053/liâ€¦</a></p>
<p>é€šè¿‡ CDN æ–¹å¼å®ŒæˆåŠ è½½ï¼Œç¡®ä¿èµ„æºè·¯å¾„åŒ¹é…ã€‚</p>
<p>SDKåŠ è½½æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â loadLibPag =Â <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span>Â () =&gt; {
Â Â <span class="hljs-comment">// è‹¥å·²åŠ è½½ï¼Œç›´æ¥è¿”å›</span>
Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>) {
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>
Â  }
Â Â 
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â Â <span class="hljs-comment">// åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾åŠ è½½SDK</span>
Â  Â Â <span class="hljs-keyword">const</span>Â script =Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>)
Â  Â  script.<span class="hljs-property">src</span>Â =Â <span class="hljs-string">'https://h5static.XX/10122053/libpag.min.js'</span>
Â  Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(script)
Â  Â Â 
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span>Â {
Â  Â  Â  script.<span class="hljs-property">onload</span>Â =Â <span class="hljs-keyword">async</span>Â () =&gt; {
Â  Â  Â  Â Â <span class="hljs-comment">// ç­‰å¾…500msç¡®ä¿åº“å®Œå…¨åˆå§‹åŒ–</span>
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span>Â =&gt;</span>Â <span class="hljs-built_in">setTimeout</span>(resolve,Â <span class="hljs-number">500</span>))
Â  Â  Â  Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'LibPag script loaded, checking window.libpag:'</span>,Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>) {
Â  Â  Â  Â  Â Â <span class="hljs-title function_">resolve</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>)
Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â Â <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Error</span>(<span class="hljs-string">'window.libpag is not available'</span>))
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â Â <span class="hljs-comment">// åŠ è½½å¤±è´¥å¤„ç†</span>
Â  Â  Â  script.<span class="hljs-property">onerror</span>Â =Â <span class="hljs-function">() =&gt;</span>Â <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Failed to load libPag script'</span>))
Â  Â  })
Â  }Â <span class="hljs-keyword">catch</span>Â (error) {
Â  Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to load libPag:Â <span class="hljs-subst">${error}</span>`</span>)
Â  }
}, [])
</code></pre>
<h3 data-id="heading-5">åˆå§‹åŒ–æ’­æ”¾å™¨</h3>
<p>åŠ è½½å®Œ SDK åï¼Œwindow å¯¹è±¡ä¼šç”Ÿæˆ libpag å¯¹è±¡ï¼Œä»¥æ­¤ä¸ºåŸºç¡€å¯å®Œæˆæ’­æ”¾å™¨åˆå§‹åŒ–ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‡†å¤‡ canvas å®¹å™¨ä½œä¸ºæ¸²æŸ“è½½ä½“ï¼›</li>
<li>åŠ è½½ PAG æ ¸å¿ƒåº“å¹¶åˆå§‹åŒ– PAG ç¯å¢ƒï¼›</li>
<li>åŠ è½½ç›®æ ‡.pag æ–‡ä»¶ï¼ˆåŠ¨æ•ˆæ¨¡æ¿ï¼‰ï¼›</li>
<li>åˆ›å»º PAGView å®ä¾‹å…³è” canvas ä¸åŠ¨æ•ˆæ–‡ä»¶ï¼›</li>
<li>å°è£…æ’­æ”¾å™¨æ§åˆ¶æ¥å£ï¼ˆæ’­æ”¾ / æš‚åœ / é”€æ¯ç­‰ï¼‰ï¼Œå¹¶å¤„ç†èµ„æºé‡Šæ”¾ä¸é‡å¤åˆå§‹åŒ–é—®é¢˜ã€‚</li>
</ul>
<p>éœ€è¯´æ˜çš„æ˜¯ï¼Œæœ¬éœ€æ±‚æ ¸å¿ƒè¯‰æ±‚æ˜¯ â€œåˆæˆçƒæ˜Ÿå¡å›¾ç‰‡â€ï¼Œä¸æ¶‰åŠPAGçš„è§†é¢‘ç›¸å…³èƒ½åŠ›ï¼Œå› æ­¤æš‚ä¸æ‰©å±•è§†é¢‘åŠŸèƒ½ï¼Œåœ¨æ’­æ”¾å™¨åˆå§‹åŒ–åå®Œæˆç«‹å³æš‚åœï¼Œåç»­ä»…å›´ç»• â€œå›¾å±‚æ›¿æ¢ï¼ˆå¦‚ç”¨æˆ·äººåƒï¼‰â€â€œæ–‡æœ¬æ›¿æ¢ï¼ˆå¦‚çƒæ˜Ÿåç§°ï¼‰â€ ç­‰æ ¸å¿ƒéœ€æ±‚å±•å¼€ã€‚</p>
<p>æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â { width, height } = props


<span class="hljs-comment">// Canvasæ¸²æŸ“å®¹å™¨</span>
<span class="hljs-keyword">const</span>Â canvasRef = useRef&lt;<span class="hljs-title class_">HTMLCanvasElement</span>&gt;(<span class="hljs-literal">null</span>)
<span class="hljs-comment">// PAGåŠ¨æ•ˆæ¨¡æ¿åœ°å€ï¼ˆçƒæ˜Ÿå¡æ¨¡æ¿ï¼‰</span>
<span class="hljs-keyword">const</span>Â src =Â <span class="hljs-string">'https://h5static.XX/10122053/G-lv1.pag'</span>


<span class="hljs-comment">// åˆå§‹åŒ–æ’­æ”¾å™¨å‡½æ•°</span>
<span class="hljs-keyword">const</span>Â initPlayer =Â <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span>Â () =&gt; {
Â Â 
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â Â <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>)
Â  Â Â <span class="hljs-keyword">const</span>Â canvas = canvasRef.<span class="hljs-property">current</span>
Â  Â Â <span class="hljs-comment">// è®¾ç½®Canvaså°ºå¯¸ä¸çƒæ˜Ÿå¡åŒ¹é…</span>
Â  Â  canvas.<span class="hljs-property">width</span>Â = width
Â  Â  canvas.<span class="hljs-property">height</span>Â = height
Â  Â Â 
Â  Â Â <span class="hljs-comment">// 1. åŠ è½½PAGæ ¸å¿ƒåº“å¹¶åˆå§‹åŒ–ç¯å¢ƒ</span>
Â  Â Â <span class="hljs-keyword">const</span>Â libpag =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">loadLibPag</span>()
Â  Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">PAG</span>Â =Â <span class="hljs-keyword">await</span>Â libpag.<span class="hljs-title class_">PAGInit</span>({Â <span class="hljs-attr">useScale</span>:Â <span class="hljs-literal">false</span>Â })
Â  Â Â 
Â  Â Â <span class="hljs-comment">// 2. åŠ è½½PAGåŠ¨æ•ˆæ¨¡æ¿</span>
Â  Â Â <span class="hljs-keyword">const</span>Â response =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">fetch</span>(src)
Â  Â Â <span class="hljs-keyword">const</span>Â buffer =Â <span class="hljs-keyword">await</span>Â response.<span class="hljs-title function_">arrayBuffer</span>()
Â  Â Â <span class="hljs-keyword">const</span>Â pagFile =Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable constant_">PAG</span>.<span class="hljs-property">PAGFile</span>.<span class="hljs-title function_">load</span>(buffer)
Â  Â Â 
Â  Â Â <span class="hljs-comment">// 3. åˆ›å»ºPAGViewï¼Œå…³è”Canvasä¸åŠ¨æ•ˆæ¨¡æ¿</span>
Â  Â Â <span class="hljs-keyword">const</span>Â pagView =Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable constant_">PAG</span>.<span class="hljs-property">PAGView</span>.<span class="hljs-title function_">init</span>(pagFile, canvas)
Â  Â Â 
Â  Â Â <span class="hljs-comment">// 4. å°è£…æ’­æ”¾å™¨æ§åˆ¶æ¥å£</span>
Â  Â Â <span class="hljs-keyword">const</span>Â player = {
Â  Â  Â Â <span class="hljs-attr">_pagView</span>: pagView,
Â  Â  Â Â <span class="hljs-attr">_pagFile</span>: pagFile,
Â  Â  Â Â <span class="hljs-attr">_PAG</span>:Â <span class="hljs-variable constant_">PAG</span>,
Â  Â  Â Â <span class="hljs-attr">_isPlaying</span>:Â <span class="hljs-literal">false</span>,
Â  Â  Â Â 
Â  Â  Â Â <span class="hljs-comment">// æ’­æ”¾</span>
Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">play</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_pagView</span>.<span class="hljs-title function_">play</span>()
Â  Â  Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_isPlaying</span>Â =Â <span class="hljs-literal">true</span>
Â  Â  Â  },
Â  Â  Â Â <span class="hljs-comment">// æš‚åœï¼ˆåˆå§‹åŒ–åé»˜è®¤æš‚åœï¼‰</span>
Â  Â  Â Â <span class="hljs-title function_">pause</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_pagView</span>.<span class="hljs-title function_">pause</span>()
Â  Â  Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_isPlaying</span>Â =Â <span class="hljs-literal">false</span>
Â  Â  Â  },
Â  Â  Â Â <span class="hljs-comment">// é”€æ¯å®ä¾‹ï¼Œé‡Šæ”¾èµ„æº</span>
Â  Â  Â Â <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_pagView</span>.<span class="hljs-title function_">destroy</span>()
Â  Â  Â  },
Â  Â  }
Â  }Â <span class="hljs-keyword">catch</span>Â (error) {
Â  Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'PAG Player initialization failed:'</span>, error)
Â  }Â 
}, [src, width, height])
</code></pre>
<p><strong>å®ç°æ•ˆæœ</strong></p>
<p>æ’­æ”¾å™¨åˆå§‹åŒ–å®Œæˆåï¼Œå¯åœ¨Canvasä¸­æ­£å¸¸å±•ç¤ºçƒæ˜Ÿå¡åŠ¨æ•ˆæ¨¡æ¿ï¼ˆåˆå§‹åŒ–åé»˜è®¤æš‚åœï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fad50f876ee4dea8bea2fbcac6018de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=PzWUqcrlOWM%2FlJAoUKvfd52Nw%2FQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°æ›¿æ¢å›¾å±‚åŠæ–‡æœ¬åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-6">æ›¿æ¢å›¾å±‚åŠæ–‡æœ¬</h3>
<p>æ›¿æ¢ â€œç”¨æˆ·ä¸Šä¼ äººåƒâ€ï¼ˆå›¾å±‚ï¼‰ä¸ â€œçƒæ˜Ÿåç§°â€ï¼ˆæ–‡æœ¬ï¼‰æ˜¯æ ¸å¿ƒéœ€æ±‚ï¼Œéœ€é€šè¿‡ PAGFile çš„åŸç”Ÿæ¥å£å®ç°ï¼Œå¹¶æ‰©å±•æ’­æ”¾å™¨å®ä¾‹çš„æ“ä½œæ–¹æ³•ï¼š</p>
<ul>
<li><strong>å›¾ç‰‡å›¾å±‚æ›¿æ¢</strong>ï¼šè°ƒç”¨pagFile.replaceImage(index, image) æ¥å£ï¼Œå°†æŒ‡å®šç´¢å¼•çš„å›¾å±‚æ›¿æ¢ä¸ºç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼ˆæ”¯æŒ CDN åœ°å€ã€Canvas å…ƒç´ ã€Image å…ƒç´ ä½œä¸ºå›¾ç‰‡æºï¼‰ï¼›</li>
<li><strong>æ–‡æœ¬å†…å®¹æ›¿æ¢</strong>ï¼šè°ƒç”¨pagFile.setTextData(index, textData) æ¥å£ï¼Œä¿®æ”¹æŒ‡å®šæ–‡æœ¬å›¾å±‚çš„å†…å®¹ä¸å­—ä½“ï¼›</li>
<li><strong>æ•ˆæœç”Ÿæ•ˆ</strong>ï¼šæ¯æ¬¡æ›¿æ¢åéœ€è°ƒç”¨ pagView.flush() å¼ºåˆ¶åˆ·æ–°æ¸²æŸ“ï¼Œç¡®ä¿ä¿®æ”¹å®æ—¶ç”Ÿæ•ˆã€‚</li>
</ul>
<p><strong>å®ç°æ–¹æ¡ˆ</strong></p>
<ul>
<li>æ›¿æ¢å›¾ç‰‡å›¾å±‚ï¼šé€šè¿‡pagFile.replaceImage(index, image)æ¥å£ï¼Œå°†æŒ‡å®šç´¢å¼•çš„å›¾å±‚æ›¿æ¢ä¸ºç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼›</li>
<li>æ›¿æ¢æ–‡æœ¬å†…å®¹ï¼šé€šè¿‡pagFile.setTextData(index, textData)æ¥å£ï¼Œä¿®æ”¹æŒ‡å®šæ–‡æœ¬å›¾å±‚çš„å†…å®¹ï¼›</li>
<li>æ‰©å±•æ’­æ”¾å™¨æ¥å£åï¼Œéœ€è°ƒç”¨flush()å¼ºåˆ¶åˆ·æ–°æ¸²æŸ“ï¼Œç¡®ä¿æ›¿æ¢æ•ˆæœç”Ÿæ•ˆã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d4f0a8a802e4de4ab1a0837984704f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=zMWQHOUsbMz7oyiPlhxrpYCdoIg%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>åˆæœŸé—®é¢˜ï¼šæ–‡æœ¬å­—ä½“æœªç”Ÿæ•ˆ</strong></p>
<p>æ›¿æ¢æ–‡æœ¬åå‘ç°è®¾å®šå­—ä½“æœªåº”ç”¨ã€‚æ’æŸ¥åç¡®è®¤ï¼šè‡ªå®šä¹‰å­—ä½“åŒ…æœªåœ¨ PAG ç¯å¢ƒä¸­æ³¨å†Œï¼Œå¯¼è‡´ PAG æ— æ³•è¯†åˆ«å­—ä½“ã€‚</p>
<p>éœ€åœ¨åŠ è½½ PAG æ¨¡æ¿å‰ï¼Œä¼˜å…ˆå®Œæˆå­—ä½“æ³¨å†Œï¼Œç¡®ä¿ PAG èƒ½æ­£å¸¸è°ƒç”¨ç›®æ ‡å­—ä½“ï¼Œå…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<p>PAGæä¾›PAGFont.registerFont()æ¥å£ç”¨äºæ³¨å†Œè‡ªå®šä¹‰å­—ä½“ï¼Œéœ€ä¼ å…¥ â€œå­—ä½“åç§°â€ ä¸ â€œå­—ä½“æ–‡ä»¶èµ„æºâ€ï¼ˆå¦‚.ttf/.otf æ ¼å¼æ–‡ä»¶ï¼‰ï¼Œæµç¨‹ä¸ºï¼š</p>
<ul>
<li>åŠ è½½å­—ä½“æ–‡ä»¶ï¼ˆä» CDN/OSS è·å–å­—ä½“åŒ…ï¼‰ï¼›</li>
<li>è°ƒç”¨ PAG æ¥å£å®Œæˆæ³¨å†Œï¼›</li>
<li>æ³¨å†ŒæˆåŠŸåï¼Œå†åŠ è½½.pagæ–‡ä»¶ï¼Œç¡®ä¿åç»­æ–‡æœ¬æ›¿æ¢æ—¶å­—ä½“å·²ç”Ÿæ•ˆã€‚</li>
</ul>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éœ€æ³¨å†Œçš„å­—ä½“åˆ—è¡¨ï¼ˆå­—ä½“åç§°+CDNåœ°å€ï¼‰</span>
<span class="hljs-keyword">const</span>Â fonts = [
Â  {
Â  Â Â <span class="hljs-attr">family</span>:Â <span class="hljs-string">'POIZONSans'</span>,
Â  Â Â <span class="hljs-attr">url</span>:Â <span class="hljs-string">'https://h5static.XX/10122053/20250827-febf35c67d9232d4.ttf'</span>,
Â  },
Â  {
Â  Â Â <span class="hljs-attr">family</span>:Â <span class="hljs-string">'FZLanTingHeiS-DB-GB'</span>,
Â  Â Â <span class="hljs-attr">url</span>:Â <span class="hljs-string">'https://h5static.XX/10122053/20250821-1e3a4fccff659d1c.ttf'</span>,
Â  },
]


<span class="hljs-comment">// åœ¨â€œåŠ è½½PAGæ ¸å¿ƒåº“â€åã€â€œåŠ è½½PAGæ¨¡æ¿â€å‰ï¼Œæ–°å¢å­—ä½“æ³¨å†Œé€»è¾‘</span>
<span class="hljs-keyword">const</span>Â initPlayer =Â <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span>Â () =&gt; {
Â Â <span class="hljs-comment">// ... åŸæœ‰ä»£ç ï¼ˆCanvaså‡†å¤‡ã€åŠ è½½libpagï¼‰</span>
Â Â <span class="hljs-keyword">const</span>Â libpag =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">loadLibPag</span>()
Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">PAG</span>Â =Â <span class="hljs-keyword">await</span>Â libpag.<span class="hljs-title class_">PAGInit</span>({Â <span class="hljs-attr">useScale</span>:Â <span class="hljs-literal">false</span>Â })
Â Â 
Â Â <span class="hljs-comment">// æ–°å¢ï¼šæ³¨å†Œè‡ªå®šä¹‰å­—ä½“</span>
Â Â <span class="hljs-keyword">if</span>Â (fonts &amp;&amp; fonts.<span class="hljs-property">length</span>Â &gt;Â <span class="hljs-number">0</span>Â &amp;&amp;Â <span class="hljs-variable constant_">PAG</span>?.<span class="hljs-property">PAGFont</span>?.<span class="hljs-property">registerFont</span>) {
Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-keyword">const</span>Â { family, url }Â <span class="hljs-keyword">of</span>Â fonts) {
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (!family || !url)Â <span class="hljs-keyword">continue</span>
Â  Â  Â  Â Â <span class="hljs-comment">// åŠ è½½å­—ä½“æ–‡ä»¶ï¼ˆCORSè·¨åŸŸé…ç½®+å¼ºåˆ¶ç¼“å­˜ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-keyword">const</span>Â resp =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">fetch</span>(url, {Â <span class="hljs-attr">mode</span>:Â <span class="hljs-string">'cors'</span>,Â <span class="hljs-attr">cache</span>:Â <span class="hljs-string">'force-cache'</span>Â })
Â  Â  Â  Â Â <span class="hljs-keyword">const</span>Â blob =Â <span class="hljs-keyword">await</span>Â resp.<span class="hljs-title function_">blob</span>()
Â  Â  Â  Â Â <span class="hljs-comment">// è½¬æ¢ä¸ºFileç±»å‹ï¼ˆPAGæ³¨å†Œéœ€Fileæ ¼å¼ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-keyword">const</span>Â filename = url.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>).<span class="hljs-title function_">pop</span>() ||Â <span class="hljs-string">'font.ttf'</span>
Â  Â  Â  Â Â <span class="hljs-keyword">const</span>Â fontFile =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">File</span>([blob], filename)
Â  Â  Â  Â Â <span class="hljs-comment">// æ³¨å†Œå­—ä½“</span>
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable constant_">PAG</span>.<span class="hljs-property">PAGFont</span>.<span class="hljs-title function_">registerFont</span>(family, fontFile)
Â  Â  Â  Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Registered font for PAG:'</span>, family)
Â  Â  Â  }
Â  Â  }Â <span class="hljs-keyword">catch</span>Â (e) {
Â  Â  Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Register fonts for PAG failed:'</span>, e)
Â  Â  }
Â  }
Â Â 
Â Â <span class="hljs-comment">// ç»§ç»­åŠ è½½PAGæ¨¡æ¿ï¼ˆåŸæœ‰ä»£ç ï¼‰</span>
Â Â <span class="hljs-keyword">const</span>Â response =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">fetch</span>(src)
Â Â <span class="hljs-keyword">const</span>Â buffer =Â <span class="hljs-keyword">await</span>Â response.<span class="hljs-title function_">arrayBuffer</span>()
Â Â <span class="hljs-keyword">const</span>Â pagFile =Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable constant_">PAG</span>.<span class="hljs-property">PAGFile</span>.<span class="hljs-title function_">load</span>(buffer)
Â Â <span class="hljs-comment">// ... åç»­åˆ›å»ºPAGViewã€å°è£…æ’­æ”¾å™¨æ¥å£</span>
}, [src, width, height])
</code></pre>
<p><strong>æœ€ç»ˆæ•ˆæœ</strong></p>
<p>å­—ä½“æ³¨å†Œåï¼Œæ–‡æœ¬æ›¿æ¢çš„å­—ä½“æ­£å¸¸ç”Ÿæ•ˆï¼Œäººåƒä¸æ–‡æœ¬å‡æ˜¾ç¤ºæ­£ç¡®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/405c50bb121c43049d8116a1584db07f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=objPcWRKzCFp%2FDbwdaU37xX5gJM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ•°å­—å­—ä½“å·²åº”ç”¨æˆåŠŸ</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ›¿æ¢æ–‡æœ¬çš„å­—ä½“å·²æ­£ç¡®åº”ç”¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°æœ€åä¸€æ­¥ï¼Œå°†æ›´æ–°å›¾å±‚åŠæ–‡æœ¬åçš„å†…å®¹å¯¼å‡ºä¸ºCDNå›¾ç‰‡ã€‚</p>
<h3 data-id="heading-7">PagPlayeræˆªå¸§ï¼ˆå¯¼å‡ºPagPlayerå½“å‰å±•ç¤ºå†…å®¹ï¼‰</h3>
<p>æˆªå¸§æ˜¯å°† â€œè°ƒæ•´åçš„äººåƒ + æ›¿æ¢åçš„æ–‡æœ¬ + åŠ¨æ•ˆæ¨¡æ¿â€ å›ºåŒ–ä¸ºæœ€ç»ˆå›¾ç‰‡çš„å…³é”®æ­¥éª¤ã€‚å¼€å‘åˆæœŸæ›¾ç›´æ¥è°ƒç”¨pagView.makeSnapshot()é­é‡å¯¼å‡ºç©ºå¸§ï¼Œåé€šè¿‡updateSize()+flush()è§£å†³åŒæ­¥é—®é¢˜ï¼›æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ›´ç›´æ¥çš„æ–¹æ¡ˆ â€”â€”ç›´æ¥å¯¼å‡ºPAGæ¸²æŸ“å¯¹åº”çš„Canvaså†…å®¹ï¼ŒåŒæ ·èƒ½å®ç°éœ€æ±‚ï¼Œä¸”æµç¨‹æ›´ç®€æ´ã€‚</p>
<p><strong>åˆæœŸé—®é¢˜ï¼šç›´æ¥è°ƒç”¨æ¥å£å¯¼è‡´ç©ºå¸§</strong></p>
<p>å¼€å‘åˆæœŸï¼Œå°è¯•ç›´æ¥ä½¿ç”¨PAGViewæä¾›çš„makeSnapshot()æ¥å£æˆªå¸§ï¼Œä½†é‡åˆ°äº†è¿”å›ç©ºå¸§ï¼ˆå…¨é€æ˜å›¾ç‰‡ï¼‰æƒ…å†µç»è¿‡åå¤è°ƒè¯•å’ŒæŸ¥é˜…æ–‡æ¡£ï¼Œå‘ç°æ ¸å¿ƒåŸå› æ˜¯PAG æ¸²æŸ“çŠ¶æ€ä¸è°ƒç”¨æ—¶æœºä¸åŒæ­¥ï¼š</p>
<ul>
<li><strong>å°ºå¯¸ä¸åŒæ­¥</strong>ï¼šPAGView å†…éƒ¨æ¸²æŸ“å°ºå¯¸ä¸ Canvas å®é™…å°ºå¯¸ä¸åŒ¹é…ï¼Œå¯¼è‡´å†…å®¹æœªè½åœ¨å¯è§†åŒºåŸŸï¼›</li>
<li><strong>æ¸²æŸ“å»¶è¿Ÿ</strong>ï¼šå›¾å±‚æ›¿æ¢ã€æ–‡æœ¬ä¿®æ”¹åï¼ŒGPU æ¸²æŸ“æ˜¯å¼‚æ­¥çš„ï¼Œæ­¤æ—¶æˆªå¸§åªèƒ½æ•è·åˆ°æœªæ›´æ–°çš„ç©ºç™½æˆ–æ—§å¸§ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é’ˆå¯¹ç©ºå¸§é—®é¢˜ï¼Œç»“åˆ PAG åœ¨ H5 ç«¯ â€œåŸºäº Canvas æ¸²æŸ“â€ çš„ç‰¹æ€§ï¼Œæ¢³ç†å‡ºä¸¤ç§å¯è¡Œæ–¹æ¡ˆï¼Œæ ¸å¿ƒéƒ½æ˜¯ â€œå…ˆç¡®ä¿æ¸²æŸ“åŒæ­¥ï¼Œå†è·å–ç”»é¢â€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/350f4915f8a14f74a5a91479c8f727c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=rekCHrp2TwcDocokRn6CqTJfcHo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æœ€ç»ˆè½åœ°æµç¨‹</strong></p>
<ul>
<li>è°ƒç”¨ pagView.updateSize() ä¸ pagView.flush() ç¡®ä¿æ¸²æŸ“åŒæ­¥ï¼›</li>
<li>é€šè¿‡canvas.toDataURL('image/jpeg', 0.9) ç”Ÿæˆ Base64 æ ¼å¼å›¾ç‰‡ï¼ˆJPG æ ¼å¼ï¼Œæ¸…æ™°åº¦ 0.9ï¼Œå¹³è¡¡è´¨é‡ä¸ä½“ç§¯ï¼‰ï¼›</li>
<li>å°† Base64 å›¾ç‰‡ä¸Šä¼ è‡³ CDNï¼Œè·å–å¯è®¿é—®çš„çƒæ˜Ÿå¡é“¾æ¥ã€‚</li>
</ul>
<p>ç‚¹å‡»æˆªå¸§æŒ‰é’®åï¼Œå³å¯ç”Ÿæˆå¯¹åº”çš„æˆªå›¾ã€‚</p>
<p>å®Œæˆ PAG æ’­æ”¾å™¨çš„åŸºç¡€åŠŸèƒ½ï¼ˆå›¾å±‚æ›¿æ¢ã€æ–‡æœ¬ä¿®æ”¹ã€æˆªå¸§å¯¼å‡ºï¼‰åï¼Œæˆ‘ä»¬æ¥èšç„¦ç”¨æˆ·æ ¸å¿ƒäº¤äº’éœ€æ±‚ â€”â€” äººåƒçš„æ‹–æ‹½ã€ç¼©æ”¾ä¸æ—‹è½¬ï¼Œé€šè¿‡å°è£… Canvas æ‰‹åŠ¿ç»„ä»¶ï¼Œå®ç°ç²¾å‡†çš„äººåƒæ„å›¾è°ƒæ•´èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-8">äº”ã€å›¾ç‰‡å˜æ¢åŠŸèƒ½å¼€å‘ï¼šå®ç°äººåƒæ‹–æ‹½ã€ç¼©æ”¾ä¸æ—‹è½¬</h2>
<p>åœ¨çƒæ˜Ÿå¡åˆæˆæµç¨‹ä¸­ï¼Œç”¨æˆ·éœ€è‡ªä¸»è°ƒæ•´ä¸Šä¼ äººåƒçš„ä½ç½®ã€å°ºå¯¸ä¸è§’åº¦ä»¥ä¼˜åŒ–æ„å›¾ã€‚æˆ‘ä»¬å¯ä»¥åŸºäº Canvas å°è£…å®Œæ•´çš„æ‰‹åŠ¿äº¤äº’èƒ½åŠ›ç»„ä»¶ï¼Œæ”¯æŒå•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬ï¼ŒåŒæ—¶å…¼é¡¾é«˜æ¸…æ¸²æŸ“ä¸è·¨è®¾å¤‡å…¼å®¹æ€§ã€‚</p>
<h3 data-id="heading-9">åŠŸèƒ½ç›®æ ‡</h3>
<p>é’ˆå¯¹ â€œç”¨æˆ·äººåƒè°ƒæ•´â€ åœºæ™¯ï¼Œç»„ä»¶éœ€å®ç°ä»¥ä¸‹æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ul>
<li><strong>åŸºç¡€äº¤äº’</strong>ï¼šæ”¯æŒå•æŒ‡æ‹–æ‹½ç§»åŠ¨äººåƒã€åŒæŒ‡ç¼©æ”¾å°ºå¯¸ã€åŒæŒ‡æ—‹è½¬è§’åº¦ï¼›</li>
<li><strong>çº¦æŸæ§åˆ¶</strong>ï¼šé™åˆ¶ç¼©æ”¾èŒƒå›´ï¼ˆå¦‚æœ€å° 0.1 å€ã€æœ€å¤§ 5 å€ï¼‰ï¼Œå¯é€‰å…³é—­æ—‹è½¬åŠŸèƒ½ï¼›</li>
<li><strong>é«˜æ¸…æ¸²æŸ“</strong>ï¼šé€‚é…è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ï¼Œé¿å…å›¾ç‰‡æ‹‰ä¼¸æ¨¡ç³Šï¼›</li>
<li><strong>çŠ¶æ€åŒæ­¥</strong>ï¼šå®æ—¶åé¦ˆå½“å‰å˜æ¢å‚æ•°ï¼ˆåç§»é‡ã€ç¼©æ”¾æ¯”ã€æ—‹è½¬è§’ï¼‰ï¼Œæ”¯æŒé‡ç½®ä¸ç»“æœå¯¼å‡ºã€‚</li>
</ul>
<h3 data-id="heading-10">æ•ˆæœå±•ç¤º</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/811762938b80442bad5020688afbaf2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=hQMmlIYHZRjYm%2BGX3fthzZRJpyw%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-11">ç»„ä»¶è®¾è®¡ç†å¿µ</h3>
<p>åœ¨ç»„ä»¶è®¾è®¡ä¹‹åˆï¼Œæˆ‘ä»¬æ¥ä½¿ç”¨åˆ†å±‚ç†å¿µï¼Œå°†å›¾ç‰‡ç¼–è¾‘æ“ä½œåˆ†è§£ä¸ºä¸‰ä¸ªç‹¬ç«‹å±‚æ¬¡ï¼š</p>
<p><strong>äº¤äº’æ„ŸçŸ¥å±‚</strong></p>
<p><strong>äº¤äº’æ„ŸçŸ¥å±‚ - æ•è·ç”¨æˆ·æ‰‹åŠ¿å¹¶è½¬æ¢ä¸ºæ ‡å‡†åŒ–çš„å˜æ¢æ„å›¾</strong></p>
<ul>
<li>æ‰‹åŠ¿è¯­ä¹‰åŒ–ï¼šå°†åŸå§‹çš„é¼ æ ‡/è§¦æ‘¸äº‹ä»¶è½¬æ¢ä¸ºè¯­ä¹‰åŒ–çš„æ“ä½œæ„å›¾</li>
<li>å•æŒ‡ç§»åŠ¨ = å¹³ç§»æ„å›¾</li>
<li>åŒæŒ‡è·ç¦»å˜åŒ– = ç¼©æ”¾æ„å›¾</li>
<li>åŒæŒ‡è§’åº¦å˜åŒ– = æ—‹è½¬æ„å›¾</li>
<li>åŒå‡» = é‡ç½®æ„å›¾</li>
</ul>
<p><strong>å˜æ¢è®¡ç®—å±‚</strong></p>
<p><strong>å˜æ¢è®¡ç®—å±‚ - å¤„ç†å‡ ä½•å˜æ¢é€»è¾‘å’Œçº¦æŸè§„åˆ™</strong></p>
<ul>
<li><strong>å¤šç‚¹è§¦æ§çš„å‡ ä½•è®¡ç®—</strong>ï¼šåŒæŒ‡æ“ä½œæ—¶ï¼Œç³»ç»Ÿä¼šå®æ—¶è®¡ç®—ä¸¤ä¸ªè§¦ç‚¹å½¢æˆçš„å‡ ä½•å…³ç³»ï¼ˆè·ç¦»ã€è§’åº¦ã€ä¸­å¿ƒç‚¹ï¼‰ï¼Œç„¶åå°†è¿™äº›å‡ ä½•å˜åŒ–æ˜ å°„ä¸ºå›¾ç‰‡çš„å˜æ¢å‚æ•°ã€‚</li>
<li><strong>äº¤äº’è¿ç»­æ€§</strong>ï¼šæ¯æ¬¡æ‰‹åŠ¿å¼€å§‹æ—¶è®°å½•åˆå§‹çŠ¶æ€ï¼Œç§»åŠ¨è¿‡ç¨‹ä¸­æ‰€æœ‰è®¡ç®—éƒ½åŸºäºè¿™ä¸ªåˆå§‹çŠ¶æ€è¿›è¡Œå¢é‡è®¡ç®—ï¼Œç¡®ä¿å˜æ¢çš„è¿ç»­æ€§å’Œå¹³æ»‘æ€§ã€‚</li>
</ul>
<p><strong>æ¸²æŸ“æ‰§è¡Œå±‚</strong></p>
<p><strong>æ¸²æŸ“æ‰§è¡Œå±‚ - å°†å˜æ¢ç»“æœç»˜åˆ¶åˆ°Canvasä¸Š</strong></p>
<ul>
<li><strong>é«˜æ¸…é€‚é…</strong>ï¼šCanvasçš„ç‰©ç†åˆ†è¾¨ç‡å’Œæ˜¾ç¤ºå°ºå¯¸åˆ†ç¦»ç®¡ç†ï¼Œç‰©ç†åˆ†è¾¨ç‡é€‚é…è®¾å¤‡åƒç´ æ¯”ä¿è¯æ¸…æ™°åº¦ï¼Œæ˜¾ç¤ºå°ºå¯¸æ§åˆ¶ç•Œé¢å¸ƒå±€ã€‚</li>
<li><strong>å˜æ¢åº”ç”¨</strong>ï¼šç»˜åˆ¶æ—¶æŒ‰ç…§ç‰¹å®šé¡ºåºåº”ç”¨å˜æ¢ - å…ˆç§»åŠ¨åˆ°ç”»å¸ƒä¸­å¿ƒå»ºç«‹åæ ‡ç³»ï¼Œå†åº”ç”¨ç”¨æˆ·çš„å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾æ“ä½œï¼Œæœ€åä»¥å›¾ç‰‡ä¸­å¿ƒä¸ºåŸç‚¹ç»˜åˆ¶ã€‚è¿™ä¸ªé¡ºåºç¡®ä¿äº†å˜æ¢çš„ç›´è§‚æ€§ã€‚</li>
<li><strong>æ¸²æŸ“æ§åˆ¶</strong>ï¼šåŒºåˆ†å®æ—¶äº¤äº’å’Œé™æ€æ˜¾ç¤ºä¸¤ç§åœºæ™¯ï¼Œå®æ—¶äº¤äº’æ—¶ä½¿ç”¨requestAnimationFrameä¿è¯æµç•…æ€§ï¼Œé™æ€æ›´æ–°æ—¶ä½¿ç”¨é˜²æŠ–å‡å°‘ä¸å¿…è¦çš„é‡ç»˜ã€‚</li>
</ul>
<h3 data-id="heading-12">æ•°æ®æµè®¾è®¡</h3>
<ul>
<li><strong>å•å‘æ•°æ®æµ</strong>ï¼šç”¨æˆ·æ“ä½œ â†’ æ‰‹åŠ¿è§£æ â†’ å˜æ¢è®¡ç®— â†’ çº¦æŸåº”ç”¨ â†’ çŠ¶æ€æ›´æ–° â†’ é‡æ–°æ¸²æŸ“ â†’ å›è°ƒé€šçŸ¥ã€‚è¿™ç§å•å‘æµåŠ¨ä¿è¯äº†æ•°æ®çš„å¯è¿½è¸ªæ€§ã€‚</li>
<li><strong>çŠ¶æ€åŒæ­¥æœºåˆ¶</strong>ï¼šå†…éƒ¨çŠ¶æ€å˜åŒ–æ—¶ï¼Œé€šè¿‡å›è°ƒæœºåˆ¶åŒæ­¥ç»™å¤–éƒ¨ç»„ä»¶ï¼Œæ”¯æŒå®æ—¶åŒæ­¥å’Œå»¶è¿ŸåŒæ­¥ä¸¤ç§æ¨¡å¼ï¼Œé€‚åº”ä¸åŒçš„æ€§èƒ½éœ€æ±‚ã€‚</li>
</ul>
<p>å®ç°ç‹¬ç«‹çš„äººåƒäº¤äº’è°ƒæ•´åŠŸèƒ½åï¼Œå…³é”®æ˜¯æ‰“é€š â€œç”¨æˆ·æ“ä½œâ€ ä¸ â€œPAG é¢„è§ˆâ€ çš„å®æ—¶åŒæ­¥é“¾è·¯ â€”â€” ç¡®ä¿ç”¨æˆ·æ¯ä¸€æ¬¡è°ƒæ•´éƒ½èƒ½å³æ—¶åé¦ˆåœ¨çƒæ˜Ÿå¡æ¨¡æ¿ä¸­ï¼Œè¿™éœ€è¦è®¾è®¡åˆ†å±‚åŒæ­¥æ¶æ„ä¸é«˜æ•ˆè°ƒåº¦ç­–ç•¥ã€‚</p>
<h2 data-id="heading-13">å…­ã€äº¤äº’ä¸é¢„è§ˆå®æ—¶åŒæ­¥</h2>
<p>åœ¨çƒæ˜Ÿå¡ç”Ÿæˆæµç¨‹ä¸­ï¼Œâ€œç”¨æˆ·è°ƒæ•´äººåƒâ€ ä¸ â€œPAG é¢„è§ˆæ›´æ–°â€ çš„å®æ—¶åŒæ­¥æ˜¯æ ¸å¿ƒä½“éªŒæŒ‡æ ‡ â€”â€” ç”¨æˆ·æ¯ä¸€æ¬¡æ‹–æ‹½ã€ç¼©æ”¾æˆ–æ—‹è½¬æ“ä½œï¼Œéƒ½éœ€è¦å³æ—¶åé¦ˆåœ¨çƒæ˜Ÿå¡æ¨¡æ¿ä¸­ï¼Œæ‰èƒ½è®©ç”¨æˆ·ç²¾å‡†åˆ¤æ–­æ„å›¾æ•ˆæœã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®ç°æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fda5eb04c8744b7d81053047e34321cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=Fy2ZE0uP%2Bt%2FHLI2li8UCJy387mo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»é€»è¾‘æ¶æ„ã€å…³é”®æŠ€æœ¯æ–¹æ¡ˆã€è¾¹ç•Œåœºæ™¯å¤„ç†ä¸‰æ–¹é¢ï¼Œæ‹†è§£ â€œç”¨æˆ·äº¤äº’è°ƒæ•´â€ ä¸ â€œPAG é¢„è§ˆåŒæ­¥â€ é“¾è·¯çš„å®ç°æ€è·¯ã€‚</p>
<h3 data-id="heading-14">é€»è¾‘æ¶æ„ï¼šä¸‰å±‚ååŒåŒæ­¥æ¨¡å‹</h3>
<p>ç»„ä»¶å°† â€œäº¤äº’ - åŒæ­¥ - æ¸²æŸ“â€ æ‹†åˆ†ä¸ºä¸‰ä¸ªç‹¬ç«‹ä½†ååŒçš„å±‚çº§ï¼Œå„å±‚èŒè´£å•ä¸€ä¸”é€šè¿‡æ˜ç¡®æ¥å£é€šä¿¡ï¼Œé¿å…è€¦åˆå¯¼è‡´çš„åŒæ­¥å»¶è¿Ÿæˆ–çŠ¶æ€æ··ä¹±ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72b5b151b1cb40cd9fcae281a5dab73d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=oZI%2F8D5Nyk4%2BLU%2FKYCGq5ajDBgs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æ ¸å¿ƒæµè½¬é“¾è·¯</strong>ï¼šç”¨æˆ·æ“ä½œ â†’ CanvasImageEditor ç”Ÿæˆå®æ—¶ Canvas â†’ åŒæ­¥å±‚ç›´æ¥å¤ç”¨ Canvas æ›´æ–° PAG å›¾å±‚ â†’ è°ƒåº¦å±‚æ‰¹é‡è§¦å‘ flush â†’ PagPlayer æ¸²æŸ“æœ€æ–°ç”»é¢ã€‚</p>
<h3 data-id="heading-15">å…³é”®æ–¹æ¡ˆï¼šä½æŸè€— + é«˜å®æ—¶æ€§çš„å¹³è¡¡</h3>
<p>ä¸ºåŒæ—¶å…¼é¡¾ â€œé«˜é¢‘äº¤äº’å¯¼è‡´ GPU æ€§èƒ½ç“¶é¢ˆâ€ ä¸ â€œå®æ—¶é¢„è§ˆéœ€å³æ—¶åé¦ˆâ€ ï¼Œç»„ä»¶é€šè¿‡ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆå®ç°å¹³è¡¡ã€‚</p>
<p><strong>å¤ç”¨ Canvas å…ƒç´ </strong></p>
<p>è·³è¿‡æ ¼å¼è½¬æ¢ç¯èŠ‚ï¼Œå‡å°‘æ€§èƒ½æ¶ˆè€—ï¼Œç›´æ¥å¤ç”¨ Canvas å…ƒç´ ä½œä¸º PAG å›¾ç‰‡æºã€‚</p>
<p><strong>æ ¸å¿ƒä»£ç é€»è¾‘ï¼š</strong></p>
<p>é€šè¿‡ canvasEditorRef.current.getCanvas() è·å–äº¤äº’å±‚çš„ Canvas å®ä¾‹ï¼Œç›´æ¥ä¼ å…¥PAG çš„ replaceImageFast æ¥å£ï¼ˆå¿«é€Ÿæ›¿æ¢ï¼Œä¸è§¦å‘å³æ—¶åˆ·æ–°ï¼‰ï¼Œé¿å…æ•°æ®å†—ä½™å¤„ç†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// ç›´æ¥ä½¿ç”¨ Canvas å…ƒç´ æ›´æ–° PAGï¼Œæ— æ ¼å¼è½¬æ¢
constÂ <span class="hljs-attr">canvas</span> = canvasEditorRef.current.getCanvas()<span class="hljs-comment">;</span>
pagPlayerRef.current.replaceImageFast(editImageIndex, canvas)<span class="hljs-comment">;Â // å¿«é€Ÿæ›¿æ¢ï¼Œä¸flush</span>
</code></pre>
<p><strong>æ™ºèƒ½æ‰¹é‡è°ƒåº¦ï¼š</strong></p>
<p><strong>åˆ†çº§å¤„ç†æ›´æ–°ï¼Œå…¼é¡¾æµç•…ä¸æ•ˆç‡</strong></p>
<p>é’ˆå¯¹ç”¨æˆ·è¿ç»­æ“ä½œï¼ˆå¦‚å¿«é€Ÿæ‹–æ‹½ï¼‰äº§ç”Ÿçš„é«˜é¢‘æ›´æ–°ï¼Œç»„ä»¶è®¾è®¡ â€œåˆ†çº§è°ƒåº¦ç­–ç•¥â€ï¼Œé¿å…æ¯ä¸€æ¬¡æ“ä½œéƒ½è§¦å‘ PAG çš„ flushï¼ˆGPU å¯†é›†å‹æ“ä½œï¼‰ï¼š</p>
<p><strong>è°ƒåº¦é€»è¾‘</strong>ï¼š</p>
<p>å®æ—¶æ“ä½œåˆå¹¶ï¼šé€šè¿‡ requestAnimationFrame æ•è·è¿ç»­æ“ä½œï¼Œå°† 16ms å†…çš„å¤šæ¬¡æ›¿æ¢æŒ‡ä»¤åˆå¹¶ä¸ºä¸€æ¬¡ï¼›</p>
<p><strong>æ™ºèƒ½ flush å†³ç­–</strong>ï¼š</p>
<p>è‹¥è·ç¦»ä¸Šæ¬¡ flush è¶…è¿‡ 100msï¼ˆç”¨æˆ·æ“ä½œæš‚åœï¼‰ï¼Œç«‹å³è§¦å‘ flushPagView()ï¼Œç¡®ä¿é¢„è§ˆä¸å»¶è¿Ÿï¼›</p>
<p>è‹¥æ“ä½œä»åœ¨æŒç»­ï¼Œå»¶è¿Ÿ Math.max(16, updateThrottle/2) æ¯«ç§’å† flushï¼Œåˆå¹¶å¤šæ¬¡æ›´æ–°ã€‚</p>
<p><strong>é˜²æŠ–é™çº§</strong>ï¼š</p>
<p>å½“ updateThrottle &gt; 16msï¼ˆä½å®æ—¶æ€§éœ€æ±‚åœºæ™¯ï¼‰ï¼Œè‡ªåŠ¨é™çº§ä¸ºé˜²æŠ–ç­–ç•¥ï¼Œé¿å…è¿‡åº¦è°ƒåº¦ã€‚</p>
<p><strong>æ ¸å¿ƒä»£ç ç‰‡æ®µ</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ™ºèƒ½ flush ç­–ç•¥ï¼šçŸ­é—´éš”åˆå¹¶ï¼Œé•¿é—´éš”ç«‹å³åˆ·æ–°</span>
constÂ timeSinceLastFlush =Â Date<span class="hljs-selector-class">.now</span>() - batchUpdate<span class="hljs-selector-class">.lastFlushTime</span>;
ifÂ (timeSinceLastFlush &gt;Â <span class="hljs-number">100</span>) {
Â Â awaitÂ <span class="hljs-built_in">flushPagView</span>();Â <span class="hljs-comment">// é—´éš”ä¹…ï¼Œç«‹å³åˆ·æ–°</span>
}Â elseÂ {
Â Â <span class="hljs-comment">// å»¶è¿Ÿåˆ·æ–°ï¼Œåˆå¹¶åç»­æ“ä½œ</span>
Â Â <span class="hljs-built_in">setTimeout</span>(asyncÂ () =&gt; {
Â  Â Â ifÂ (batchUpdate.pendingUpdatesÂ &gt;Â <span class="hljs-number">0</span>) {
Â  Â  Â Â awaitÂ <span class="hljs-built_in">flushPagView</span>();
Â  Â  }
Â  },Â Math<span class="hljs-selector-class">.max</span>(<span class="hljs-number">16</span>, updateThrottle/<span class="hljs-number">2</span>));
}
</code></pre>
<p><strong>åŒå‘çŠ¶æ€æ ¡éªŒï¼š</strong></p>
<p><strong>è§£å†³é¦–å¸§ / åˆ‡æ¢åœºæ™¯çš„åŒæ­¥ç©ºç™½</strong></p>
<p>é’ˆå¯¹ â€œPAG åŠ è½½å®Œæˆä½† Canvas æœªå°±ç»ªâ€â€œCanvas å°±ç»ªä½† PAG æœªåˆå§‹åŒ–â€ ç­‰é¦–å¸§åŒæ­¥é—®é¢˜ï¼Œç»„ä»¶è®¾è®¡åŒå‘é‡è¯•æ ¡éªŒæœºåˆ¶ï¼š</p>
<ul>
<li>PAG åŠ è½½åæ ¡éªŒï¼šhandlePagLoad ä¸­å¯åŠ¨ 60 å¸§ï¼ˆçº¦ 1sï¼‰é‡è¯•ï¼Œæ£€æµ‹ Canvas ä¸ PAG å‡å°±ç»ªåï¼Œè§¦å‘åˆå§‹åŒæ­¥ï¼›</li>
<li>Canvas åŠ è½½åæ ¡éªŒï¼šhandleCanvasImageLoad åŒç†ï¼Œè‹¥ PAG æœªå°±ç»ªï¼Œé‡è¯•è‡³ä¸¤è€…çŠ¶æ€åŒ¹é…ï¼›</li>
<li>ç¼–è¾‘æ¨¡å¼åˆ‡æ¢æ ¡éªŒï¼šè¿›å…¥ startEdit æ—¶ï¼Œé€šè¿‡åƒç´ æ£€æµ‹ï¼ˆgetImageDataï¼‰åˆ¤æ–­ Canvas æ˜¯å¦æœ‰å†…å®¹ï¼Œæœ‰åˆ™ç«‹å³åŒæ­¥ï¼Œé¿å…ç©ºç™½é¢„è§ˆã€‚</li>
</ul>
<h3 data-id="heading-16">è¾¹ç•Œåœºæ™¯å¤„ç†ï¼šä¿éšœåŒæ­¥ç¨³å®šæ€§</h3>
<p><strong>ç¼–è¾‘æ¨¡å¼åˆ‡æ¢çš„çŠ¶æ€è¡”æ¥</strong></p>
<ul>
<li>è¿›å…¥ç¼–è¾‘ï¼šæš‚åœ PAG æ’­æ”¾ï¼Œæ˜¾ç¤ºé€æ˜çš„ Canvas äº¤äº’å±‚ï¼ˆopacity: 0ï¼Œä»…ä¿ç•™äº¤äº’èƒ½åŠ›ï¼‰ï¼Œè§¦å‘åˆå§‹åŒæ­¥ï¼›</li>
<li>é€€å‡ºç¼–è¾‘ï¼šæ¸…ç†æ‰¹é‡è°ƒåº¦å®šæ—¶å™¨ï¼Œå¼ºåˆ¶ flush ç¡®ä¿æœ€ç»ˆçŠ¶æ€ç”Ÿæ•ˆï¼ŒæŒ‰éœ€æ¢å¤ PAG è‡ªåŠ¨æ’­æ”¾ã€‚</li>
</ul>
<p><strong>æ–‡æœ¬æ›¿æ¢ä¸å›¾ç‰‡åŒæ­¥çš„ååŒ</strong></p>
<p>å½“å¤–éƒ¨ä¼ å…¥ textReplacementsï¼ˆå¦‚çƒæ˜Ÿåç§°ä¿®æ”¹ï¼‰æ—¶ï¼Œé€šè¿‡ç‹¬ç«‹çš„ applyToPagText æ¥å£æ›´æ–°æ–‡æœ¬å›¾å±‚ï¼Œå¹¶ä¸å›¾ç‰‡åŒæ­¥å…±äº« flush è°ƒåº¦ï¼Œé¿å…é‡å¤åˆ·æ–°ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ–‡æœ¬æ›¿æ¢åè§¦å‘ç»Ÿä¸€ flush</span>
<span class="hljs-built_in">useEffect</span>(() =&gt;Â {
Â Â ifÂ (textReplacements?.length) {
Â  Â Â <span class="hljs-built_in">applyToPagText</span>();
Â  Â Â <span class="hljs-built_in">flushPagView</span>();
Â  }
}, <span class="hljs-selector-attr">[textReplacements]</span>);
</code></pre>
<p><strong>ç»„ä»¶å¸è½½çš„èµ„æºæ¸…ç†</strong></p>
<p>å¸è½½æ—¶æ¸…é™¤æ‰¹é‡è°ƒåº¦çš„å®šæ—¶å™¨ï¼ˆclearTimeoutï¼‰ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼›åŒæ—¶ PAG å†…éƒ¨ä¼šè‡ªåŠ¨é”€æ¯å®ä¾‹ï¼Œé‡Šæ”¾ GPU èµ„æºã€‚</p>
<h3 data-id="heading-17">PAGäººåƒå±…ä¸­æ— é®æŒ¡</h3>
<p>å‡è®¾ç»™å®šä»»æ„ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬å°†å…¶ç»˜åˆ¶åˆ°Canvasä¸­æ—¶ï¼Œå›¾ç‰‡ç”±äºå°ºå¯¸åŸå› å¯èƒ½ä¼šå±•ç¤ºä¸å®Œæ•´ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f20320c6d45c4965a2d4a791fab68979~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=iXhbtjcj2kDyMBCDzSzqO11S%2B1Y%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•ä¿è¯ä»»æ„å°ºå¯¸å›¾ç‰‡åœ¨å›ºå®šå°ºå¯¸Canvasä¸­åˆå§‹åŒ–é»˜è®¤å±…ä¸­æ— é®æŒ¡å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹æ–¹æ¡ˆï¼š</p>
<p><strong>ç­‰æ¯”ç¼©æ”¾ç®—æ³•ï¼ˆContainæ¨¡å¼ï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// è®¡ç®—é€‚é…ç¼©æ”¾æ¯”ä¾‹ï¼Œç¡®ä¿å›¾ç‰‡å®Œæ•´æ˜¾ç¤º</span>
<span class="hljs-type">const</span>Â fitScale =Â Math.<span class="hljs-built_in">min</span>(
Â  editCanvasWidth / image.width, Â Â <span class="hljs-comment">// å®½åº¦é€‚é…æ¯”ä¾‹</span>
Â  availableHeight / image.heightÂ  Â <span class="hljs-comment">// é«˜åº¦é€‚é…æ¯”ä¾‹ï¼ˆè€ƒè™‘ç•™ç™½ï¼‰</span>
)
</code></pre>
<p>æ ¸å¿ƒåŸç†ï¼š</p>
<ul>
<li>é€‰æ‹©è¾ƒå°çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œç¡®ä¿å›¾ç‰‡åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šéƒ½ä¸ä¼šè¶…å‡ºè¾¹ç•Œï¼›</li>
<li>è¿™å°±æ˜¯CSSçš„object-fit: containæ•ˆæœï¼Œä¿è¯å›¾ç‰‡å®Œæ•´å¯è§ã€‚</li>
<li/>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1844bb68295646529e48d32d674b49b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=OSov7g1%2BbYGqAa16tpQ2j1HJa0I%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>é¡¶éƒ¨ç•™ç™½é¢„ç•™</strong></p>
<p>å®é™…çš„PAGæ¨¡æ¿ä¸­ï¼Œé¡¶éƒ¨ä¼šæœ‰ä¸€éƒ¨åˆ†é®æŒ¡ï¼Œå› æ­¤éœ€è¦å¯¹æ•´ä¸ªç”»å¸ƒCanvasé¡¶éƒ¨ç•™ç™½ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8c97a982a1e47449476bcb38ef04ed9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=%2FjPaXe7garlxXEPlEfFnc9KQHqU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li>ä¸ºäººåƒçš„å¤´éƒ¨åŒºåŸŸé¢„ç•™ç©ºé—´</li>
<li>é¿å…é‡è¦çš„é¢éƒ¨ç‰¹å¾è¢«PAGæ¨¡æ¿çš„è£…é¥°å…ƒç´ é®æŒ¡</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dd54db9849547c885cba5cf79fddbdd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=8cDAeZcTpWYZIm%2BSCCH78uelAHc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æ ¸å¿ƒä»£ç </strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// é¡¶éƒ¨ç•™ç™½æ¯”ä¾‹</span>
<span class="hljs-type">const</span>Â TOP_BLANK_RATIOÂ =Â <span class="hljs-number">0.2</span>


<span class="hljs-type">const</span>Â handleCanvasImageLoadÂ =Â <span class="hljs-built_in">useCallback</span>(
Â Â <span class="hljs-built_in">async</span>Â (image: HTMLImageElement) =&gt; {
Â  Â  console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'Canvaså›¾ç‰‡åŠ è½½å®Œæˆ:'</span>, image.width,Â <span class="hljs-string">'x'</span>, image.height)
Â  Â Â <span class="hljs-built_in">setIsImageReady</span>(<span class="hljs-literal">true</span>)


Â  Â  <span class="hljs-comment">// åˆå§‹ç­‰æ¯”ç¼©æ”¾ä»¥å®Œæ•´å¯è§ï¼ˆcontainï¼‰</span>
Â  Â Â <span class="hljs-keyword">if</span>Â (canvasEditorRef.current) {
Â  Â  Â  <span class="hljs-comment">// é¡¶éƒ¨ç•™ç™½æ¯”ä¾‹</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â TOP_BLANK_RATIO = spaceTopRatio ??Â <span class="hljs-number">0</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â availableHeight = editCanvasHeight * (<span class="hljs-number">1</span>Â - TOP_BLANK_RATIO)


Â  Â  Â Â <span class="hljs-comment">// ä»¥å¯ç”¨é«˜åº¦è¿›è¡Œç­‰æ¯”ç¼©æ”¾ï¼ˆåŒæ—¶è€ƒè™‘å®½åº¦ï¼‰</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â fitScaleÂ = Math.<span class="hljs-built_in">min</span>(
Â  Â  Â  Â  editCanvasWidth / image.width,Â 
Â  Â  Â  Â  availableHeight / image.height
Â  Â  Â  )


Â  Â  Â Â <span class="hljs-comment">// è®¡ç®—ä½¿å›¾ç‰‡é¡¶éƒ¨æ°å¥½ç•™ç™½ TOP_BLANK_RATIO çš„ä½ç§»</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â topMarginÂ = editCanvasHeight * TOP_BLANK_RATIO
Â  Â  Â Â <span class="hljs-type">const</span>Â imageScaledHeightÂ = image.height * fitScale
Â  Â  Â Â <span class="hljs-type">const</span>Â targetCenterYÂ = topMargin + imageScaledHeight /Â <span class="hljs-number">2</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â yOffsetÂ = targetCenterY - editCanvasHeight /Â <span class="hljs-number">2</span>
Â  Â  Â Â 
Â  Â  Â  canvasEditorRef.current.<span class="hljs-built_in">setTransform</span>({Â 
Â  Â  Â Â Â  x:Â <span class="hljs-number">0</span>,Â 
Â  Â  Â Â Â  y: yOffset,Â 
Â  Â  Â Â Â  scale: fitScale,Â 
Â  Â  Â Â Â  rotation:Â <span class="hljs-number">0</span>Â 
Â  Â  Â  })
Â  Â  }
Â  Â Â <span class="hljs-comment">// ...</span>
Â  },
Â  [applyToPag, flushPagView, isEditMode, editCanvasWidth, editCanvasHeight]
)
</code></pre>
<p>åœ¨å•å¼ çƒæ˜Ÿå¡çš„äº¤äº’ã€é¢„è§ˆä¸åˆæˆé“¾è·¯è·‘é€šåï¼Œéœ€è¿›ä¸€æ­¥æ‹“å±•æ‰¹é‡åˆæˆèƒ½åŠ›ï¼Œä»¥æ»¡è¶³å¤šç­‰çº§çƒæ˜Ÿå¡ä¸€æ¬¡æ€§ç”Ÿæˆçš„ä¸šåŠ¡éœ€æ±‚ï¼Œæ ¸å¿ƒåœ¨äºè§£å†³æ‰¹é‡åœºæ™¯ä¸‹çš„æ¸²æŸ“æ•ˆç‡ã€èµ„æºç®¡ç†ä¸å¹¶å‘æ§åˆ¶é—®é¢˜ã€‚</p>
<h2 data-id="heading-18">ä¸ƒã€æ‰¹é‡ç”Ÿæˆ</h2>
<p>åœ¨ä»¥ä¸Šç« èŠ‚ï¼Œæˆ‘ä»¬å®ç°äº†å•ä¸ªå¡ç‰‡çš„äº¤äº’åŠåˆæˆï¼Œä½†å®é™…çš„éœ€æ±‚ä¸­è¿˜æœ‰æ‰¹é‡ç”Ÿæˆçš„éœ€æ±‚ï¼Œç”¨æ¥åˆæˆä¸åŒç­‰çº§çš„çƒæ˜Ÿå¡ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¤„ç†æ‰¹é‡ç”Ÿæˆç›¸å…³çš„é€»è¾‘ï¼ˆç¢äºç¯‡å¹…åŸå› ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å±•ç¤ºä»£ç äº†ï¼Œä¸»è¦ä»¥æµç¨‹å›¾å½¢å¼æ¥å‘ˆç°ã€‚</p>
<p>ç»ç»Ÿè®¡ï¼Œç»è¿‡å„ç§æ‰‹æ®µä¼˜åŒ–åæœ¬æ´»åŠ¨ä¸­æ‰¹é‡åˆæˆ8å¼ å›¾æœ€å¿«ä»…éœ€3sï¼Œæœ€æ…¢10sï¼Œæ‰¹é‡åˆæˆè¿‡ç¨‹ç”¨æˆ·åŸºæœ¬æ˜¯æ„ŸçŸ¥ä¸åˆ°ã€‚</p>
<h3 data-id="heading-19">å…³é”®æŠ€æœ¯æ–¹æ¡ˆ</h3>
<ul>
<li>ç¦»çº¿æ¸²æŸ“éšè—å®¹å™¨ï¼šé¿å…å¸ƒå±€å¹²æ‰°</li>
<li>èµ„æºç¼“å­˜ä¸é¢„åŠ è½½ï¼šæå‡åˆæˆæ•ˆç‡</li>
<li>å¹¶å‘å·¥ä½œåç¨‹æ± ï¼šå¹³è¡¡æ€§èƒ½ä¸ç¨³å®šæ€§</li>
<li>å¤šå±‚é‡è¯•å®¹é”™ï¼šæå‡åˆæˆæˆåŠŸç‡</li>
<li>å›¾ç‰‡å¤„ç†ä¸å°ºå¯¸é€‚é…ï¼šä¿éšœåˆæˆè´¨é‡</li>
<li>ç»“åˆä¸šåŠ¡åœºæ™¯å®ç°æ‰¹é‡åˆæˆä¸­æ–­ä¸‹æ¬¡è®¿é—®é¡µé¢åå°ç»§ç»­ç”Ÿæˆçš„é€»è¾‘ï¼šä¿éšœåˆæˆåŠŸèƒ½ç¨³å®šæ€§ã€‚</li>
</ul>
<h3 data-id="heading-20">æ ¸å¿ƒæ¶æ„</h3>
<ul>
<li>èµ„æºç®¡ç†å±‚ï¼šè´Ÿè´£PAGåº“åŠ è½½ã€bufferç¼“å­˜ã€é¢„åŠ è½½è°ƒåº¦</li>
<li>ä»»åŠ¡å¤„ç†å±‚ï¼šå•ä¸ªæ¨¡æ¿çš„æ¸²æŸ“æµæ°´çº¿ï¼ŒåŒ…å«é‡è¯•æœºåˆ¶</li>
<li>å¹¶å‘æ§åˆ¶å±‚ï¼šå·¥ä½œåç¨‹æ± ç®¡ç†ï¼Œä»»åŠ¡é˜Ÿåˆ—è°ƒåº¦</li>
</ul>
<h3 data-id="heading-21">æ•´ä½“æ‰¹é‡åˆæˆæµç¨‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/612b7f364a01464682a2e01d60f4a0b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=4uzWIL8yDryQcpg0M3eItoblv%2FQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>èŠ‚æ‹æ‹‰å–ï¼šæŒ‰ç…§å›ºå®šæ—¶é—´é—´éš”ä¾æ¬¡æ‹‰å–èµ„æºï¼Œè€Œéä¸€æ¬¡æ€§å¹¶å‘è·å–æ‰€æœ‰èµ„æº</p>
<h3 data-id="heading-22">å•ä¸ªæ¨¡æ¿å¤„ç†æµç¨‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a635fd380fd46e18a0c9653cbda2bca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=udNFW54g0aY206qaj%2B3b4dCCPIs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c97ecbecda84aeeaa2e8375e5a4b760~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=USGY5wKbL7t%2B0UNqfSZZpDRFMSI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-23">å¹¶å‘å·¥ä½œåç¨‹æ¨¡å¼</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4ffb9d653c3461394a6d8ece9c75c42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=zFxVlSb59WJjwShdqzKBQGKhQsE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å…±äº«æ¸¸æ ‡ï¼šå¤šä¸ªå·¥ä½œåç¨‹å…±åŒä½¿ç”¨çš„ä»»åŠ¡é˜Ÿåˆ—æŒ‡é’ˆï¼Œç”¨äºåè°ƒä»»åŠ¡åˆ†é…ã€‚</p>
<p>åŸå­è·å–ä»»åŠ¡ï¼šç¡®ä¿åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œæ¯ä¸ªä»»åŠ¡åªè¢«ä¸€ä¸ªåç¨‹è·å–ï¼Œé¿å…é‡å¤å¤„ç†ã€‚</p>
<p>èµ„æºç®¡ç†ä¸ç¼“å­˜ç­–ç•¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1b994db9a114173bcf9805939ae4b92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=KO9Wip5uJjz2Mj6ipKUhzkf6CWU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ‰¹é‡åˆæˆä¸å•å¡äº¤äº’çš„åŠŸèƒ½è½åœ°åï¼Œéœ€é’ˆå¯¹å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°çš„å¡é¡¿ã€ç©ºå¸§ã€åŠ è½½æ…¢ç­‰é—®é¢˜è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–ï¼ŒåŒæ—¶æ„å»ºå…¼å®¹æ€§æ£€æµ‹ä¸é™çº§æ–¹æ¡ˆï¼Œä¿éšœä¸åŒç¯å¢ƒä¸‹åŠŸèƒ½çš„ç¨³å®šå¯ç”¨ã€‚</p>
<h2 data-id="heading-24">å…«ã€æ€§èƒ½ä¼˜åŒ–ä¸é™çº§å…¼å®¹</h2>
<h3 data-id="heading-25">æ€§èƒ½ä¼˜åŒ–</h3>
<p>ä¸Šè¿°åŠŸèƒ½å¼€å‘å’Œå®ç°å¹¶éä¸€è¹´è€Œå°±ï¼Œè¿‡ç¨‹ä¸­é‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œè¯¸å¦‚ï¼š</p>
<ul>
<li>å›¾ç‰‡æ‹–åŠ¨å¡é¡¿</li>
<li>Canvaså¯¼å‡ºç©ºå›¾ã€å¯¼å‡ºå›¾ç‰‡æ¨¡ç³Š</li>
<li>æ‰¹é‡åˆæˆæ—¶é—´è¾ƒä¹…</li>
<li>PAGåˆå§‹åŠ è½½æ…¢</li>
<li>å¯¼å‡ºå›¾ç‰‡æ—¶é—´ä¹…</li>
</ul>
<p>ç­‰ç­‰é—®é¢˜ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°±å¯¹å„åŠŸèƒ½ç»„ä»¶è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œå¤§ä½“å¦‚ä¸‹ï¼š</p>
<p><strong>PagPlayerï¼ˆPAGæ’­æ”¾å™¨ï¼‰</strong></p>
<p><strong>èµ„æºç®¡ç†ä¼˜åŒ–</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// srcå˜åŒ–æ—¶ä¸»åŠ¨é”€æ¯æ—§å®ä¾‹ï¼Œé‡Šæ”¾WebGL/PAGèµ„æº</span>
ifÂ (srcChanged) {
Â Â ifÂ (pagPlayer) {
Â  Â Â tryÂ {
Â  Â  Â  pagPlayer<span class="hljs-selector-class">.destroy</span>()
Â  Â  }Â catchÂ (e) {
Â  Â  Â Â console<span class="hljs-selector-class">.warn</span>('Destroy previous player failed:', e)
Â  Â  }
Â  }
}
</code></pre>
<p><strong>WebGLæ£€æŸ¥ä¸é™çº§</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥WebGLæ”¯æŒï¼Œä¸å¯ç”¨æ—¶é™çº§ä¸º2Dè­¦å‘Š</li>
<li>éªŒè¯CanvasçŠ¶æ€å’Œå°ºå¯¸</li>
<li>PAGViewåˆ›å»ºå¸¦é‡è¯•æœºåˆ¶</li>
</ul>
<p><strong>å­—ä½“é¢„æ³¨å†Œ</strong>ï¼š</p>
<ul>
<li>å¿…é¡»åœ¨åŠ è½½PAGæ–‡ä»¶ä¹‹å‰æ³¨å†Œå­—ä½“</li>
<li>ä½¿ç”¨Fileç±»å‹è¿›è¡Œå­—ä½“æ³¨å†Œ</li>
</ul>
<p><strong>CanvasImageEditorï¼ˆCanvaså›¾ç‰‡ç¼–è¾‘å™¨ï¼‰</strong></p>
<p><strong>é«˜DPIä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨æ£€æµ‹è®¾å¤‡åƒç´ æ¯”ï¼Œé€‚é…é«˜åˆ†è¾¨ç‡è®¾å¤‡</li>
<li>åˆ†ç¦»ç‰©ç†åƒç´ å’ŒCSSåƒç´ ï¼Œç¡®ä¿æ¸…æ™°åº¦</li>
</ul>
<p><strong>å†…å­˜ç®¡ç†</strong>ï¼š</p>
<ul>
<li>ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨æ¸…ç†Canvasèµ„æº</li>
<li>å¯ç”¨é«˜è´¨é‡å›¾åƒå¹³æ»‘ï¼Œé¿å…å‡ºç°è¾¹ç¼˜é”¯é½¿</li>
<li>ä½¿ç”¨CSS touch-actionæ§åˆ¶è§¦æ‘¸è¡Œä¸º</li>
</ul>
<p><strong>EditablePagPlayerï¼ˆå¯ç¼–è¾‘PAGæ’­æ”¾å™¨ï¼‰</strong></p>
<p><strong>æ™ºèƒ½æ‰¹é‡æ›´æ–°ç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// é«˜æ€§èƒ½å®æ—¶æ›´æ–° - ä½¿ç”¨RAF + æ‰¹é‡flush</span>
constÂ smartApplyToPag =Â <span class="hljs-built_in">useMemo</span>(() =&gt;Â {
Â Â returnÂ () =&gt;Â {
Â  Â  rafId =Â <span class="hljs-built_in">requestAnimationFrame</span>(asyncÂ () =&gt; {
Â  Â  Â Â awaitÂ <span class="hljs-built_in">applyToPag</span>()Â <span class="hljs-comment">// å¿«é€Ÿå›¾ç‰‡æ›¿æ¢ï¼ˆæ— flushï¼‰</span>
Â  Â  Â Â <span class="hljs-built_in">smartFlush</span>(batchUpdateRef.current)Â <span class="hljs-comment">// ç®¡ç†æ‰¹é‡flush</span>
Â  Â  })
Â  }
}, <span class="hljs-selector-attr">[]</span>)
</code></pre>
<p><strong>æ‰¹é‡flushç­–ç•¥ï¼š</strong></p>
<ul>
<li>è·ç¦»ä¸Šæ¬¡flushè¶…è¿‡100msç«‹å³flush</li>
<li>å¦åˆ™å»¶è¿Ÿ16ms~updateThrottle/2åˆå¹¶å¤šæ¬¡æ›´æ–°</li>
<li>å‡å°‘PAGåˆ·æ–°æ¬¡æ•°ï¼Œæå‡æ€§èƒ½</li>
</ul>
<p><strong>å†…å­˜ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨ç®¡ç†Canvaså’ŒPAGèµ„æºç”Ÿå‘½å‘¨æœŸ</li>
<li>æ™ºèƒ½é¢„çƒ­ï¼šæ£€æµ‹Canvaså†…å®¹é¿å…ä¸å¿…è¦åˆå§‹åŒ–</li>
<li>èµ„æºå¤ç”¨ï¼šå¤ç”¨Canvaså…ƒç´ </li>
</ul>
<p><strong>PAGBatchComposerï¼ˆæ‰¹é‡PAGåˆæˆå™¨ï¼‰</strong></p>
<p><strong>é«˜å¹¶å‘å¤„ç†ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å·¥ä½œåç¨‹ï¼šæŒ‰é˜Ÿåˆ—å–ä»»åŠ¡ç›´è‡³è€—å°½æˆ–å–æ¶ˆ</span>
<span class="hljs-keyword">const</span>Â <span class="hljs-title function_">runWorker</span>Â =Â <span class="hljs-keyword">async</span>Â (<span class="hljs-params"/>) =&gt; {
Â Â <span class="hljs-keyword">while</span>Â (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelled</span>) {
Â  Â Â <span class="hljs-keyword">const</span>Â idx = cursor++
Â  Â Â <span class="hljs-keyword">if</span>Â (idx &gt;= total)Â <span class="hljs-keyword">break</span>
Â  Â Â <span class="hljs-comment">// å¤„ç†å•ä¸ªæ¨¡æ¿...</span>
Â  }
}
</code></pre>
<p><strong>æ™ºèƒ½é‡è¯•æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>å¤–å±‚é‡è¯•ï¼šæœ€å¤š3æ¬¡æ•´ä½“é‡è¯•ï¼Œé€’å¢å»¶è¿Ÿ</li>
<li>å†…å±‚é‡è¯•ï¼šPAGæ“ä½œçº§åˆ«é‡è¯•2æ¬¡</li>
<li>é¦–æ¬¡å»¶è¿Ÿï¼šç¬¬ä¸€ä¸ªPAGå¤„ç†å¢åŠ 500mså»¶è¿Ÿ</li>
</ul>
<p><strong>å†…å­˜ç®¡ç†</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªæ¨¡æ¿å¤„ç†å®Œæˆåç«‹å³æ¸…ç†Canvaså’ŒPAGå¯¹è±¡</li>
<li>é›†æˆCanvasè®¡æ•°å™¨ç›‘æ§å†…å­˜ä½¿ç”¨</li>
<li>æ”¯æŒå¼ºåˆ¶æ¸…ç†è¶…æ—¶å®ä¾‹</li>
</ul>
<p><strong>æ€§èƒ½ç›‘æ§debugUtils</strong></p>
<ul>
<li>æä¾›è¯¦ç»†çš„æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•æ—¥å¿—</li>
<li>æ”¯æŒæ‰¹é‡ç»Ÿè®¡åˆ†æï¼ˆååé‡ã€å¹³å‡æ—¶é—´ç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-26">é™çº§å…¼å®¹</h3>
<p>ç”±äºæ ¸å¿ƒä¸šåŠ¡ä¾èµ– PAG æŠ€æœ¯æ ˆï¼Œè€Œ PAG è¿è¡Œéœ€ WebGL å’Œ WebAssembly çš„åŸºç¡€APIæ”¯æŒï¼Œå› æ­¤å¿…é¡»åœ¨åº”ç”¨åˆå§‹åŒ–é˜¶æ®µå¯¹è¿™äº›åŸºç¡€ API è¿›è¡Œå…¼å®¹æ€§æ£€æµ‹ï¼Œå¹¶é’ˆå¯¹ä¸æ”¯æŒçš„ç¯å¢ƒæ‰§è¡Œé™çº§ç­–ç•¥ï¼Œä»¥ä¿éšœæ ¸å¿ƒåŠŸèƒ½å¯ç”¨æ€§ã€‚</p>
<p>æ ¸å¿ƒAPIæ£€æµ‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-title function_">isWebGLAvailable</span>(<span class="hljs-params"/>):Â <span class="hljs-built_in">boolean</span>Â {
Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-keyword">typeof</span>Â <span class="hljs-variable language_">window</span>Â ===Â <span class="hljs-string">'undefined'</span>)Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â Â <span class="hljs-keyword">const</span>Â canvas =Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>)
Â  Â Â <span class="hljs-keyword">const</span>Â gl =
Â  Â  Â  canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'webgl'</span>) ||
Â  Â  Â  (canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'experimental-webgl'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-title class_">WebGLRenderingContext</span>Â |Â <span class="hljs-literal">null</span>)
Â  Â Â <span class="hljs-keyword">return</span>Â !!gl
Â  }Â <span class="hljs-keyword">catch</span>Â (e) {
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>
Â  }
}


<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-title function_">isWasmAvailable</span>(<span class="hljs-params"/>):Â <span class="hljs-built_in">boolean</span>Â {
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â Â <span class="hljs-keyword">const</span>Â hasBasic =
Â  Â  Â Â <span class="hljs-keyword">typeof</span>Â (globalThisÂ <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">any</span>).<span class="hljs-property">WebAssembly</span>Â ===Â <span class="hljs-string">'object'</span>Â &amp;&amp;
Â  Â  Â Â <span class="hljs-keyword">typeof</span>Â (<span class="hljs-title class_">WebAssembly</span>Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">any</span>).<span class="hljs-property">instantiate</span>Â ===Â <span class="hljs-string">'function'</span>
Â  Â Â <span class="hljs-keyword">if</span>Â (!hasBasic)Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>
Â  Â Â <span class="hljs-comment">// æœ€å°æ¨¡å—æ ¡éªŒï¼Œè§„é¿â€œå­˜åœ¨ä½†ä¸å¯ç”¨â€çš„æƒ…å†µ</span>
Â  Â Â <span class="hljs-keyword">const</span>Â bytes =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0x00</span>,Â <span class="hljs-number">0x61</span>,Â <span class="hljs-number">0x73</span>,Â <span class="hljs-number">0x6d</span>,Â <span class="hljs-number">0x01</span>,Â <span class="hljs-number">0x00</span>,Â <span class="hljs-number">0x00</span>,Â <span class="hljs-number">0x00</span>])
Â  Â Â <span class="hljs-keyword">const</span>Â mod =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title class_">Module</span>(bytes)
Â  Â Â <span class="hljs-keyword">const</span>Â inst =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title class_">Instance</span>(mod)
Â  Â Â <span class="hljs-keyword">return</span>Â instÂ <span class="hljs-keyword">instanceof</span>Â <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-property">Instance</span>
Â  }Â <span class="hljs-keyword">catch</span>Â (e) {
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>
Â  }
}


<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-title function_">isPagRuntimeAvailable</span>(<span class="hljs-params"/>):Â <span class="hljs-built_in">boolean</span>Â {
Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title function_">isWebGLAvailable</span>() &amp;&amp;Â <span class="hljs-title function_">isWasmAvailable</span>()
}
</code></pre>
<p><strong>ç¯å¢ƒé€‚é…ç­–ç•¥</strong></p>
<ul>
<li>å…¼å®¹ç¯å¢ƒï¼ˆæ£€æµ‹é€šè¿‡ï¼‰ï¼šç›´æ¥æ‰§è¡Œ H5 ç«¯ PAG åˆå§‹åŒ–æµç¨‹ï¼Œå¯ç”¨å®Œæ•´çš„å‰ç«¯äº¤äº’ç¼–è¾‘èƒ½åŠ›ã€‚</li>
<li>ä¸å…¼å®¹ç¯å¢ƒï¼ˆæ£€æµ‹å¤±è´¥ï¼‰ï¼šè‡ªåŠ¨åˆ‡æ¢è‡³æœåŠ¡ç«¯åˆæˆé“¾è·¯ï¼Œé€šè¿‡é¢„ç”Ÿæˆé™æ€å¡ç‰‡ä¿éšœæ ¸å¿ƒåŠŸèƒ½å¯ç”¨ï¼Œç¡®ä¿ç”¨æˆ·ä»èƒ½å®Œæˆçƒæ˜Ÿå¡ç”Ÿæˆçš„åŸºç¡€æµç¨‹ã€‚</li>
</ul>
<h2 data-id="heading-27">ä¹ã€å°ç»“</h2>
<p>æœ¬æ¬¡ã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€çƒæ˜Ÿå¡ç”ŸæˆåŠŸèƒ½å¼€å‘ï¼Œå›´ç»• â€œç”¨æˆ·è‡ªä¸»è°ƒæ•´ + è·¨ç«¯ä¸€è‡´æ¸²æŸ“â€ æ ¸å¿ƒç›®æ ‡ï¼Œé€šè¿‡ PAG æŠ€æœ¯ä¸ Canvas äº¤äº’çš„æ·±åº¦ç»“åˆï¼Œæ„å»ºäº†ä»å•å¡ç¼–è¾‘åˆ°æ‰¹é‡åˆæˆçš„å®Œæ•´æŠ€æœ¯é“¾è·¯ï¼Œå¯ä»é—®é¢˜è§£å†³ã€æŠ€æœ¯æ²‰æ·€ã€ä¸šåŠ¡ä»·å€¼ä¸‰æ–¹é¢æ€»ç»“æ ¸å¿ƒæˆæœï¼š</p>
<p><strong>é—®é¢˜è§£å†³ï¼šè§£å†³ä¸šåŠ¡ç—›ç‚¹ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</strong></p>
<p>é’ˆå¯¹åˆæœŸ â€œæœåŠ¡ç«¯å›ºå®šåˆæˆå¯¼è‡´æ„å›¾åå·®â€ çš„æ ¸å¿ƒç—›ç‚¹ï¼Œé€šè¿‡ H5 ç«¯æ‰¿æ¥å…³é”®é“¾è·¯ï¼Œä¿éšœæ´»åŠ¨ç©æ³•å®Œæ•´æ€§ï¼š</p>
<ul>
<li>äº¤äº’è‡ªä¸»æ€§ï¼šåŸºäº Canvas å°è£…çš„CanvasImageEditorç»„ä»¶ï¼Œæ”¯æŒå•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬ï¼Œè®©ç”¨æˆ·å¯ç²¾å‡†è°ƒæ•´äººåƒæ„å›¾ï¼Œè§£å†³ â€œå›ºå®šåˆæˆæ— æ³•é€‚é…ä¸ªæ€§åŒ–éœ€æ±‚â€ é—®é¢˜ï¼›</li>
<li>é¢„è§ˆå®æ—¶æ€§ï¼šè®¾è®¡ â€œäº¤äº’æ„ŸçŸ¥ - åŒæ­¥è°ƒåº¦ - æ¸²æŸ“æ‰§è¡Œâ€ ä¸‰å±‚æ¨¡å‹ï¼Œé€šè¿‡å¤ç”¨ Canvas å…ƒç´ ã€æ™ºèƒ½æ‰¹é‡è°ƒåº¦ç­‰æ–¹æ¡ˆï¼Œå®ç°æ“ä½œä¸ PAG é¢„è§ˆçš„å³æ—¶åŒæ­¥ï¼Œé¿å… â€œè°ƒæ•´åå»¶è¿Ÿåé¦ˆâ€ çš„å‰²è£‚æ„Ÿï¼›</li>
<li>åœºæ™¯å…¼å®¹æ€§ï¼šé’ˆå¯¹ PAG åŠ è½½å¤±è´¥ã€WebGL ä¸æ”¯æŒç­‰è¾¹ç•Œåœºæ™¯ï¼Œè®¾è®¡é™æ€å›¾å±‚å…œåº•ã€æœåŠ¡ç«¯åˆæˆé™çº§ã€æˆªå¸§å‰æ¸²æŸ“åŒæ­¥ç­‰æ–¹æ¡ˆï¼Œä¿éšœåŠŸèƒ½é«˜å¯ç”¨æ€§ã€‚</li>
</ul>
<p><strong>æŠ€æœ¯æ²‰æ·€</strong></p>
<p>æœ¬æ¬¡å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå›´ç»• PAG æŠ€æœ¯åœ¨ H5 ç«¯çš„åº”ç”¨ï¼Œæ²‰æ·€å‡ºä¸€å¥—æ ‡å‡†åŒ–çš„æŠ€æœ¯æ–¹æ¡ˆä¸ç»„ä»¶ä½“ç³»ï¼Œå¯å¤ç”¨äºåç»­å›¾ç‰‡ç¼–è¾‘ã€åŠ¨æ•ˆåˆæˆç±»éœ€æ±‚ï¼š</p>
<ul>
<li>ç»„ä»¶åŒ–å°è£…ï¼šæ‹†åˆ†å‡ºPagPlayerï¼ˆåŸºç¡€æ’­æ”¾ä¸å›¾å±‚æ›¿æ¢ï¼‰ã€CanvasImageEditorï¼ˆæ‰‹åŠ¿äº¤äº’ï¼‰ã€EditablePagPlayerï¼ˆäº¤äº’ä¸é¢„è§ˆåŒæ­¥ï¼‰ã€PAGBatchComposerï¼ˆæ‰¹é‡åˆæˆï¼‰å››å¤§æ ¸å¿ƒç»„ä»¶ï¼Œå„ç»„ä»¶èŒè´£å•ä¸€ã€æ¥å£æ¸…æ™°ï¼Œæ”¯æŒçµæ´»ç»„åˆï¼›</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šé€šè¿‡ â€œé«˜æ¸…é€‚é…ï¼ˆDPR å¤„ç†ï¼‰ã€èµ„æºå¤ç”¨ï¼ˆCanvas ç›´æ¥ä¼ é€’ï¼‰ã€è°ƒåº¦ä¼˜åŒ–ï¼ˆRAF åˆå¹¶æ›´æ–°ï¼‰ã€å†…å­˜ç®¡ç†ï¼ˆå®ä¾‹åŠæ—¶é”€æ¯ï¼‰â€ ç­‰ä¼˜åŒ–æ–¹å‘ï¼Œä¸ºåç»­å¤æ‚åŠŸèƒ½çš„æ€§èƒ½è°ƒä¼˜æä¾›å‚è€ƒèŒƒä¾‹ï¼›</li>
<li>é—®é¢˜è§£å†³æ¡ˆä¾‹ï¼šè®°å½• PAG å­—ä½“æ³¨å†Œå¤±æ•ˆã€æˆªå¸§ç©ºå¸§ã€æ‰¹é‡åˆæˆå¡é¡¿ç­‰å…¸å‹é—®é¢˜çš„æ’æŸ¥æ€è·¯ä¸è§£å†³æ–¹æ¡ˆï¼Œå½¢æˆæŠ€æœ¯æ–‡æ¡£ï¼Œé™ä½åç»­å›¢é˜Ÿä½¿ç”¨ PAG çš„é—¨æ§›ã€‚</li>
</ul>
<p><strong>ä¸šåŠ¡ä»·å€¼ï¼šæ”¯æ’‘æ´»åŠ¨çˆ†å‘ï¼Œæ‹“å±•æŠ€æœ¯è¾¹ç•Œ</strong></p>
<p>ä»ä¸šåŠ¡è½åœ°æ•ˆæœæ¥çœ‹ï¼Œæœ¬æ¬¡æŠ€æœ¯æ–¹æ¡ˆä¸ä»…æ»¡è¶³äº†ã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€æ´»åŠ¨çš„æ ¸å¿ƒéœ€æ±‚ï¼Œæ›´ä¸ºç¤¾åŒºä¾§åç»­è§†è§‰åŒ–åŠŸèƒ½æä¾›äº†æŠ€æœ¯æ”¯æ’‘ï¼š</p>
<ul>
<li>æ´»åŠ¨ä¿éšœï¼šçƒæ˜Ÿå¡ç”ŸæˆåŠŸèƒ½ä¸Šçº¿åï¼Œæœªå‡ºç°å› æŠ€æœ¯é—®é¢˜å¯¼è‡´çš„åŠŸèƒ½ä¸å¯ç”¨ã€‚</li>
<li>æŠ€æœ¯èƒ½åŠ›æ‹“å±•ï¼šé¦–æ¬¡åœ¨ç¤¾åŒº H5 ç«¯è½åœ° PAG åŠ¨æ•ˆåˆæˆä¸æ‰‹åŠ¿äº¤äº’ç»“åˆçš„æ–¹æ¡ˆï¼Œå¡«è¡¥äº† â€œå‰ç«¯ PAG åº”ç”¨â€ çš„æŠ€æœ¯ç©ºç™½ï¼Œä¸ºåç»­ä¸€äº›å¤æ‚äº¤äº’å¥ å®šåŸºç¡€ã€‚</li>
</ul>
<p><strong>åç»­ä¼˜åŒ–æ–¹å‘</strong></p>
<p>å°½ç®¡å½“å‰æ–¹æ¡ˆå·²æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œä½†ä»æœ‰å¯è¿›ä¸€æ­¥ä¼˜åŒ–çš„ç©ºé—´ï¼š</p>
<ul>
<li>æ€§èƒ½å†æå‡ï¼šæ‰¹é‡åˆæˆåœºæ™¯ä¸‹ï¼Œå¯æ¢ç´¢ Web Worker åˆ†æ‹… PAG è§£æå‹åŠ›ï¼Œå‡å°‘ä¸»çº¿ç¨‹é˜»å¡ã€‚</li>
<li>åŠŸèƒ½æ‰©å±•ï¼šåœ¨CanvasImageEditorä¸­å¢åŠ å›¾ç‰‡è£å‰ªã€æ»¤é•œå åŠ ç­‰åŠŸèƒ½ï¼Œæ‹“å±•ç»„ä»¶çš„é€‚ç”¨åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-28">å¾€æœŸå›é¡¾</h3>
<ol>
<li>
<p>Ant Design 6.0 å°é²œï¼šä¸Šæ‰‹ç°ä»£åŒ–ç»„ä»¶å¼€å‘ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>Java è®¾è®¡æ¨¡å¼ï¼šåŸç†ã€æ¡†æ¶åº”ç”¨ä¸å®æˆ˜å…¨è§£æï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>Goè¯­è¨€åœ¨é«˜å¹¶å‘é«˜å¯ç”¨ç³»ç»Ÿä¸­çš„å®è·µä¸è§£å†³æ–¹æ¡ˆï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>ä»0åˆ°1æ­å»ºä¸€ä¸ªæ™ºèƒ½åˆ†æOBSåŸ‹ç‚¹æ•°æ®çš„AI Agentï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>æ•°æ®åº“AIæ–¹å‘æ¢ç´¢-MCPåŸç†è§£æ&amp;DBæ–¹å‘å®æˆ˜ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
</ol>
<h3 data-id="heading-29">æ–‡ /æ— é™</h3>
<p>å…³æ³¨å¾—ç‰©æŠ€æœ¯ï¼Œæ¯å‘¨æ›´æ–°æŠ€æœ¯å¹²è´§</p>
<p>è¦æ˜¯è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿è¯„è®ºè½¬å‘ç‚¹èµï½</p>
<p>æœªç»å¾—ç‰©æŠ€æœ¯è®¸å¯ä¸¥ç¦è½¬è½½ï¼Œå¦åˆ™ä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›æ”¶å›¢é˜ŸåŸºäºCursoré›†æˆMCPçš„æ™ºèƒ½ä»£ç ä¿®å¤æç¤ºè¯ç”Ÿæˆå®è·µ]]></title>    <link>https://juejin.cn/post/7587998744294752262</link>    <guid>https://juejin.cn/post/7587998744294752262</guid>    <pubDate>2025-12-26T10:29:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587998744294752262" data-draft-id="7588002126258356230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›æ”¶å›¢é˜ŸåŸºäºCursoré›†æˆMCPçš„æ™ºèƒ½ä»£ç ä¿®å¤æç¤ºè¯ç”Ÿæˆå®è·µ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,äººå·¥æ™ºèƒ½,Python"/> <meta itemprop="datePublished" content="2025-12-26T10:29:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›æ”¶å›¢é˜ŸåŸºäºCursoré›†æˆMCPçš„æ™ºèƒ½ä»£ç ä¿®å¤æç¤ºè¯ç”Ÿæˆå®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:29:56.000Z" title="Fri Dec 26 2025 10:29:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç—›ç‚¹</h2>
<h3 data-id="heading-1">ç—›ç‚¹ä¸€ï¼šä¸ºä»€ä¹ˆæˆ‘çš„Tokenæ¶ˆè€—çš„è¿™ä¹ˆå¿«</h3>
<p>Tokençš„æ¶ˆè€—é‡é€šå¸¸å—åˆ°ä¸‹é¢ä¸¤ä¸ªå› ç´ çš„å½±å“</p>
<ul>
<li>è¾“å…¥å’Œè¾“å‡ºçš„Tokenæ•°é‡ï¼šè¾“å…¥çš„Tokenè¶Šå¤šï¼Œè¾“å‡ºçš„Tokenä¹Ÿä¼šç›¸åº”å¢åŠ ï¼Œå› ä¸ºæ¨¡å‹ä¼šåŸºäºè¾“å…¥çš„ä¸Šä¸‹æ–‡è¿›è¡Œå†…å®¹ç”Ÿæˆã€‚</li>
<li>ä»»åŠ¡å¤æ‚æ€§ï¼šæ›´å¤æ‚çš„ä»»åŠ¡é€šå¸¸éœ€è¦æ¶ˆè€—æ›´å¤šçš„Tokenï¼Œè€Œå¤šæ¨¡æ€çš„Agentå¾€å¾€æ¶ˆè€—çš„Tokenä¼šæ›´é«˜ã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆæ¨¡ç³Šçš„æç¤ºè¯ä¼šå¢åŠ Tokençš„æ¶ˆè€—é‡ï¼Ÿ</p>
<ul>
<li>æ¨¡ç³Šçš„æç¤ºè¯å¯èƒ½åŒ…å«å¤§é‡ä¸è¾“å‡ºä¸ç›¸å…³çš„å†…å®¹ï¼Œå¢åŠ è¾“å…¥çš„Tokené‡ã€‚</li>
<li>æ¨¡ç³Šçš„æç¤ºè¯é€šå¸¸ç¼ºä¹å…·ä½“ç»†èŠ‚æˆ–æ˜ç¡®çº¦æŸï¼Œå¯¼è‡´æ¨¡å‹æ— æ³•ç›´æ¥ç†è§£ç”¨æˆ·æ„å›¾ã€‚ä¸ºäº†è¦†ç›–å¯èƒ½çš„è§£é‡Šï¼Œæ¨¡å‹å€¾å‘äºç”Ÿæˆæ›´é•¿ã€æ›´å…¨é¢çš„å“åº”ï¼Œä»¥é¿å…é—æ¼å…³é”®ä¿¡æ¯ï¼Œä»è€Œå¢åŠ è¾“å‡ºtokenæ•°é‡ã€‚</li>
<li>æ¨¡ç³Šçš„æç¤ºè¯å¾€å¾€æ— æ³•ç²¾å‡†çš„ç”Ÿæˆç”¨æˆ·æƒ³è¦çš„å†…å®¹ã€‚ç”¨æˆ·å¯èƒ½å› è¾“å‡ºä¸ç¬¦åˆé¢„æœŸè€Œå¤šæ¬¡ä¿®æ”¹æç¤ºï¼Œå½¢æˆæ— æ•ˆäº¤äº’å¾ªç¯ï¼Œæ— å½¢ä¸­æµªè´¹Tokenã€‚</li>
</ul>
<h3 data-id="heading-2">ç—›ç‚¹äºŒï¼šAIä¿®å¤ä»£ç ä¸ºä»€ä¹ˆæ€»æ˜¯"å·®ç‚¹æ„æ€"ï¼Ÿ</h3>
<p>ä¸€èˆ¬éƒ½æ˜¯æ‹¿åˆ°Sonar æ‰«æç»“æœå¤åˆ¶ç²˜è´´, è®©AIä¿®å¤åï¼Œä¸€ä¸ªä¸€ä¸ªæ”¹, åˆå¤ªæ…¢, å¤ªå¤šé—®é¢˜è¦ä¹ˆä¿®å¤ä¸å‡†ç¡®ï¼Œè¦ä¹ˆæŠŠå¥½çš„ä»£ç ä¹Ÿæ”¹åäº†ï¼Œè¿˜æœ‰å°±æ˜¯é—®é¢˜
å¤ªå¤š, ä¸Šä¸‹æ–‡è¶…é™ä¿®æ”¹å¤±è´¥</p>
<p><strong>ä¸¾ä¸ªçœŸå®çš„ä¾‹å­ï¼š</strong>
SonaræŠ¥å‘Šï¼š<code>ActivityServiceImpl.java</code> ç¬¬120è¡Œå­˜åœ¨ç©ºæŒ‡é’ˆé£é™©</p>
<p>æˆ‘çš„æç¤ºè¯ï¼ˆç¬¬ä¸€ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">è¯·ä¿®å¤ä»¥ä¸‹é—®é¢˜ï¼šç¬¬<span class="hljs-number">120</span>è¡Œå­˜åœ¨ç©ºæŒ‡é’ˆé£é™©
ä»£ç ï¼š
<span class="hljs-selector-attr">[ç²˜è´´æ•´ä¸ªActivityServiceImpl.javaæ–‡ä»¶ï¼Œå¯èƒ½æ˜¯å‡ åƒè¡Œ]</span>
</code></pre>
<p>AIçš„å›å¤ï¼š</p>
<ul>
<li>æƒ…å†µ1ï¼š"è¿™ä¸ªæ–‡ä»¶å¤ªé•¿äº†ï¼Œè¯·æä¾›æ›´å…·ä½“çš„ä»£ç ç‰‡æ®µ"</li>
<li>æƒ…å†µ2ï¼šä¿®å¤äº†ç©ºæŒ‡é’ˆï¼Œä½†æŠŠæ—è¾¹çš„ä¸šåŠ¡é€»è¾‘ä¹Ÿæ”¹äº†</li>
<li>æƒ…å†µ3ï¼š"Tokenè¶…å‡ºé™åˆ¶ï¼Œæ— æ³•å¤„ç†"</li>
</ul>
<h3 data-id="heading-3">é—®é¢˜æ ¹æºåœ¨å“ªï¼Ÿ</h3>
<ol>
<li><strong>ä¸Šä¸‹æ–‡å†—ä½™</strong>ï¼šè¶…å¤§æ–‡ä»¶ä»£ç ä¸­ï¼ŒçœŸæ­£ç›¸å…³çš„å¯èƒ½åªæœ‰20è¡Œ</li>
<li><strong>ç¼ºä¹è§„èŒƒå¼•å¯¼</strong>ï¼šæ²¡å‘Šè¯‰AIè¦éµå¾ªä»€ä¹ˆç¼–ç è§„èŒƒ</li>
<li><strong>ä¿¡æ¯ä¸å‡†ç¡®</strong>ï¼šæ²¡æœ‰ç²¾ç¡®æŒ‡å‡ºé—®é¢˜åœ¨å“ªä¸ªæ–¹æ³•ã€ä»€ä¹ˆç»“æ„ä¸­</li>
<li><strong>æ²¡æœ‰ç¤ºä¾‹</strong>ï¼šAIç¼ºä¹ç±»ä¼¼é—®é¢˜çš„ä¿®å¤å‚è€ƒ</li>
</ol>
<h2 data-id="heading-4">äºŒã€è½¬æœºï¼šCursorç»“åˆMCPæ‰“é€ è‡ªåŠ¨åŒ–ä¿®å¤æµç¨‹</h2>
<p>å…³é”®é—®é¢˜åœ¨äºï¼š<strong>å¦‚ä½•å°†Sonaræ‰«æç»“æœè½¬æ¢ä¸ºAIèƒ½é«˜æ•ˆç†è§£çš„ç»“æ„åŒ–æç¤ºè¯</strong>ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘åˆ©ç”¨MCPï¼ˆModel Context Protocolï¼‰åè®®ä¸ºCursorå¼€å‘äº†ä¸€å¥—æ™ºèƒ½æç¤ºè¯ç”Ÿæˆç³»ç»Ÿã€‚</p>
<h3 data-id="heading-5">ä»€ä¹ˆæ˜¯MCPï¼Ÿ</h3>
<p>MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼ŒCursoræ”¯æŒè¿™ä¸ªåè®®ï¼Œå…è®¸æˆ‘ä»¬é€šè¿‡Pythonç­‰è¯­è¨€ç¼–å†™è‡ªå®šä¹‰å·¥å…·ï¼Œç›´æ¥é›†æˆåˆ°Cursorçš„AIåŠ©æ‰‹ä¸­ã€‚ç®€å•è¯´å°±æ˜¯ï¼š<strong>è®©AIæ‹¥æœ‰è°ƒç”¨ä½ è‡ªå·±ç¼–å†™çš„å·¥å…·çš„èƒ½åŠ›</strong>ã€‚</p>
<h3 data-id="heading-6">æˆ‘çš„æ–¹æ¡ˆæ¶æ„</h3>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdb0e7f30b144b9db7dde7e0415c66d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767349796&amp;x-signature=muUTZJGKL%2FsAHZewB9m0evKbyqU%3D" width="500" loading="lazy"/>
<h2 data-id="heading-7">ä¸‰ã€æ ¸å¿ƒæ–¹æ¡ˆï¼šå…­æ­¥æ™ºèƒ½æç¤ºè¯ç”Ÿæˆæ³•</h2>
<p>è¿™å¥—æ–¹æ¡ˆçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>è®©AIç²¾ç¡®ç†è§£é—®é¢˜ï¼Œè€Œä¸æ˜¯è®©AIå»çŒœæµ‹é—®é¢˜</strong>ã€‚</p>
<p>æ•´ä¸ªç³»ç»ŸåŸºäºä»¥ä¸‹6ä¸ªæ­¥éª¤æ„å»ºï¼š</p>
<h4 data-id="heading-8">ç¬¬ä¸€æ­¥ï¼šé—®é¢˜ç±»å‹è¯†åˆ«</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IssueTypeClassifier</span>:
    <span class="hljs-string">"""å°†Sonarè§„åˆ™æ˜ å°„åˆ°é—®é¢˜ç±»å‹"""</span>
    
    RULE_MAPPING = {
        <span class="hljs-comment"># ç©ºæŒ‡é’ˆé—®é¢˜</span>
        <span class="hljs-string">"java:S2259"</span>: <span class="hljs-string">"NullPointer"</span>,
        <span class="hljs-string">"java:S2637"</span>: <span class="hljs-string">"NullPointer"</span>,
        
        <span class="hljs-comment"># èµ„æºæ³„éœ²</span>
        <span class="hljs-string">"java:S2095"</span>: <span class="hljs-string">"ResourceLeak"</span>,
        <span class="hljs-string">"java:S2093"</span>: <span class="hljs-string">"ResourceLeak"</span>,
        
        <span class="hljs-comment"># å®‰å…¨æ¼æ´</span>
        <span class="hljs-string">"java:S3649"</span>: <span class="hljs-string">"SQLInjection"</span>,
        <span class="hljs-string">"java:S2076"</span>: <span class="hljs-string">"CommandInjection"</span>,
        
        <span class="hljs-comment"># ä»£ç è§„èŒƒ</span>
        <span class="hljs-string">"java:S117"</span>: <span class="hljs-string">"NamingConvention"</span>,
        <span class="hljs-string">"java:S1192"</span>: <span class="hljs-string">"DuplicateString"</span>,
    }
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">classify</span>(<span class="hljs-params">rule_key: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""æ ¹æ®è§„åˆ™IDåˆ†ç±»é—®é¢˜ç±»å‹"""</span>
        <span class="hljs-keyword">return</span> IssueTypeClassifier.RULE_MAPPING.get(
            rule_key, 
            <span class="hljs-string">"General"</span>
        )
</code></pre>
<h4 data-id="heading-9">ç¬¬äºŒæ­¥ï¼šASTä»£ç ç»“æ„è§£æ</h4>
<p><strong>ä»€ä¹ˆæ˜¯ASTï¼Ÿ</strong></p>
<p>ASTï¼ˆAbstract Syntax Treeï¼ŒæŠ½è±¡è¯­æ³•æ ‘ï¼‰æ˜¯å°†ä»£ç ç†è§£æˆæ ‘å½¢ç»“æ„çš„æŠ€æœ¯ã€‚</p>
<p>å½“Sonarå‘Šè¯‰ä½ "ç¬¬120è¡Œæœ‰ç©ºæŒ‡é’ˆé—®é¢˜"ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼š</p>
<ul>
<li>ç¬¬120è¡Œåœ¨å“ªä¸ª<strong>æ–¹æ³•</strong>é‡Œï¼Ÿ</li>
<li>è¿™ä¸ªæ–¹æ³•ä»å“ªè¡Œ<strong>å¼€å§‹</strong>ï¼Œåˆ°å“ªè¡Œ<strong>ç»“æŸ</strong>ï¼Ÿ</li>
<li>æ–¹æ³•çš„å®Œæ•´ä¿¡æ¯ï¼ˆæ–¹æ³•åã€å‚æ•°ã€è¿”å›å€¼ï¼‰</li>
</ul>
<p><strong>ASTè§£æ = åƒç¼–è¯‘å™¨ä¸€æ ·ç†è§£ä»£ç ç»“æ„</strong></p>
<p>æƒ³è±¡ä»£ç æ˜¯ä¸€ä¸ªå®¶æ—ï¼ŒASTå°±æ˜¯å®¶è°±æ ‘ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">ClassDeclaration:</span> <span class="hljs-string">ActivityServiceImplï¼ˆç±»ï¼‰</span>
 <span class="hljs-string">â”‚</span>
 <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">FieldDeclaration:</span> <span class="hljs-string">activityFacadeHelperï¼ˆæˆå‘˜å˜é‡ï¼‰</span>
 <span class="hljs-string">â”‚</span>
 <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">MethodDeclaration:</span> <span class="hljs-string">queryActivityListWithNewImeiï¼ˆæ–¹æ³•ï¼‰</span>
 <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">position:</span> <span class="hljs-string">line</span> <span class="hljs-number">106</span>
 <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">parameters:</span> [<span class="hljs-string">Long</span> <span class="hljs-string">orderId</span>, <span class="hljs-string">String</span> <span class="hljs-string">newMachineUuid</span>]
 <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">return_type:</span> <span class="hljs-string">OrderAllowActivityMiVO</span>
 <span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€</span> <span class="hljs-attr">body:</span> {<span class="hljs-string">...</span>}  <span class="hljs-string">â†</span> <span class="hljs-string">ç¬¬120è¡Œåœ¨è¿™é‡Œ</span>
 <span class="hljs-string">â”‚</span>
 <span class="hljs-string">â””â”€</span> <span class="hljs-attr">MethodDeclaration:</span> <span class="hljs-string">editActivityListWithNewImeiï¼ˆå¦ä¸€ä¸ªæ–¹æ³•ï¼‰</span>
</code></pre>
<p><strong>ä½¿ç”¨javalangè¿›è¡ŒASTè§£æ</strong></p>
<p>javalangæ˜¯ä¸€ä¸ªçº¯Pythonåº“ï¼Œç”¨Pythoné‡æ–°å®ç°äº†Javaè¯­æ³•è§£æå™¨ï¼Œ<strong>ä¸éœ€è¦å®‰è£…Javaç¯å¢ƒ</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> javalang

<span class="hljs-keyword">class</span> <span class="hljs-title class_">JavaCodeParser</span>:
    <span class="hljs-string">"""Javaä»£ç ç»“æ„è§£æå™¨ - ä½¿ç”¨ASTç²¾ç¡®è§£æ"""</span>
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_method_context</span>(<span class="hljs-params">file_path: <span class="hljs-built_in">str</span>, line_number: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">Optional</span>[<span class="hljs-type">Dict</span>]:
        <span class="hljs-string">"""ä½¿ç”¨javalangè¿›è¡ŒASTè§£æï¼Œç²¾ç¡®å®šä½æ–¹æ³•"""</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
            code = f.read()
        
        <span class="hljs-comment"># 1. è§£æJavaä»£ç ï¼Œç”ŸæˆASTï¼ˆè¯­æ³•æ ‘ï¼‰</span>
        tree = javalang.parse.parse(code)
        
        <span class="hljs-comment"># 2. éå†ASTï¼ŒæŸ¥æ‰¾åŒ…å«ç›®æ ‡è¡Œçš„æ–¹æ³•èŠ‚ç‚¹</span>
        <span class="hljs-keyword">for</span> path, node <span class="hljs-keyword">in</span> tree.<span class="hljs-built_in">filter</span>(javalang.tree.MethodDeclaration):
            method_start = node.position.line
            method_end = calculate_method_end(node)  <span class="hljs-comment"># è®¡ç®—æ–¹æ³•ç»“æŸä½ç½®</span>
            
            <span class="hljs-comment"># 3. æ£€æŸ¥ç›®æ ‡è¡Œæ˜¯å¦åœ¨æ­¤æ–¹æ³•èŒƒå›´å†…</span>
            <span class="hljs-keyword">if</span> method_start &lt;= line_number &lt;= method_end:
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-string">'class_name'</span>: extract_class_name(path),
                    <span class="hljs-string">'method_name'</span>: node.name,              <span class="hljs-comment"># æ–¹æ³•å</span>
                    <span class="hljs-string">'start_line'</span>: method_start,            <span class="hljs-comment"># æ–¹æ³•å¼€å§‹è¡Œ</span>
                    <span class="hljs-string">'end_line'</span>: method_end,                <span class="hljs-comment"># æ–¹æ³•ç»“æŸè¡Œ</span>
                    <span class="hljs-string">'modifiers'</span>: node.modifiers,           <span class="hljs-comment"># ['public', 'static']</span>
                    <span class="hljs-string">'return_type'</span>: node.return_type.name,  <span class="hljs-comment"># è¿”å›å€¼ç±»å‹</span>
                    <span class="hljs-string">'parameters'</span>: [p.name <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> node.parameters],  <span class="hljs-comment"># å‚æ•°åˆ—è¡¨</span>
                }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<p><strong>ASTè§£æçš„ä»·å€¼</strong>ï¼š</p>
<ol>
<li><strong>ç²¾ç¡®å®šä½</strong>ï¼šç›´æ¥çŸ¥é“ç¬¬120è¡Œåœ¨<code>queryActivityListWithNewImei</code>æ–¹æ³•å†…ï¼Œè€Œä¸æ˜¯<code>editActivityListWithNewIme</code>æ–¹æ³•</li>
<li><strong>å®Œæ•´ä¿¡æ¯</strong>ï¼šè·å–æ–¹æ³•åã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç­‰å…ƒä¿¡æ¯</li>
<li><strong>è¯­æ³•ç†è§£</strong>ï¼šåƒç¼–è¯‘å™¨ä¸€æ ·ç†è§£Javaè¯­æ³•ï¼Œä¸ä¼šè¢«æ³¨é‡Šã€å­—ç¬¦ä¸²ã€Lambdaè¡¨è¾¾å¼å¹²æ‰°</li>
<li><strong>é«˜å‡†ç¡®ç‡</strong>ï¼šå‡†ç¡®ç‡å¯è¾¾99%+</li>
</ol>
<p><strong>javalangçš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>çº¯Pythonåº“ï¼Œåªéœ€<code>pip install javalang</code></li>
<li>ä¸éœ€è¦å®‰è£…JDKæˆ–Javaç¯å¢ƒ</li>
<li>æä¾›å®Œæ•´çš„Javaè¯­æ³•æ ‘èŠ‚ç‚¹</li>
<li>æ”¯æŒJava 8+çš„è¯­æ³•ç‰¹æ€§</li>
</ul>
<h4 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šæ™ºèƒ½ä¸Šä¸‹æ–‡æå–</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextExtractor</span>:
    <span class="hljs-string">"""æ ¹æ®é—®é¢˜ç±»å‹æ™ºèƒ½æå–ä»£ç ä¸Šä¸‹æ–‡"""</span>
    
    <span class="hljs-comment"># ä¸åŒé—®é¢˜ç±»å‹çš„æå–ç­–ç•¥é…ç½®</span>
    EXTRACTION_RULES = {
        <span class="hljs-string">"NullPointer"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"full_method"</span>,           <span class="hljs-comment"># æå–å®Œæ•´æ–¹æ³•</span>
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">150</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">True</span>,           <span class="hljs-comment"># åŒ…å«importè¯­å¥</span>
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">True</span>, <span class="hljs-comment"># åŒ…å«ç±»å£°æ˜</span>
        },
        <span class="hljs-string">"ResourceLeak"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"full_method"</span>,
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">100</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">True</span>,
        },
        <span class="hljs-string">"SQLInjection"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"full_method"</span>,
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">120</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">True</span>,
        },
        <span class="hljs-string">"NamingConvention"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"surrounding"</span>,            <span class="hljs-comment"># åªæå–å‘¨å›´ä»£ç </span>
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">30</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">False</span>,
        },
        <span class="hljs-string">"General"</span>: {
            <span class="hljs-string">"range"</span>: <span class="hljs-string">"surrounding"</span>,
            <span class="hljs-string">"max_lines"</span>: <span class="hljs-number">50</span>,
            <span class="hljs-string">"include_imports"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"include_class_declaration"</span>: <span class="hljs-literal">False</span>,
        },
    }
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract</span>(<span class="hljs-params">file_path: <span class="hljs-built_in">str</span>, line_number: <span class="hljs-built_in">int</span>, issue_type: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""æ™ºèƒ½æå–ä»£ç ä¸Šä¸‹æ–‡"""</span>
        rules = ContextExtractor.EXTRACTION_RULES.get(
            issue_type,
            ContextExtractor.EXTRACTION_RULES[<span class="hljs-string">"General"</span>]
        )
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
                lines = f.readlines()
            
            context_lines = []
            
            <span class="hljs-comment"># 1. æå–packageå’Œimportsï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
            <span class="hljs-keyword">if</span> rules.get(<span class="hljs-string">"include_imports"</span>):
                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines[:<span class="hljs-number">50</span>]:
                    <span class="hljs-keyword">if</span> line.strip().startswith((<span class="hljs-string">'package '</span>, <span class="hljs-string">'import '</span>)):
                        context_lines.append(line)
                    <span class="hljs-keyword">elif</span> line.strip() <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> line.strip().startswith(<span class="hljs-string">'//'</span>):
                        <span class="hljs-keyword">break</span>
                <span class="hljs-keyword">if</span> context_lines:
                    context_lines.append(<span class="hljs-string">'\n'</span>)
            
            <span class="hljs-comment"># 2. æå–æ–¹æ³•æˆ–å‘¨å›´ä»£ç </span>
            <span class="hljs-keyword">if</span> rules[<span class="hljs-string">"range"</span>] == <span class="hljs-string">"full_method"</span>:
                method_info = JavaCodeParser.extract_method_context(file_path, line_number)
                <span class="hljs-keyword">if</span> method_info:
                    start = method_info[<span class="hljs-string">'start_line'</span>] - <span class="hljs-number">1</span>
                    end = method_info[<span class="hljs-string">'end_line'</span>]
                    
                    <span class="hljs-comment"># å¦‚æœéœ€è¦ç±»å£°æ˜ï¼Œå‘ä¸ŠæŸ¥æ‰¾</span>
                    <span class="hljs-keyword">if</span> rules.get(<span class="hljs-string">"include_class_declaration"</span>):
                        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(start, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):
                            <span class="hljs-keyword">if</span> <span class="hljs-string">'class '</span> <span class="hljs-keyword">in</span> lines[i]:
                                context_lines.append(lines[i])
                                context_lines.append(<span class="hljs-string">'    // ... å…¶ä»–æˆå‘˜ ...\n\n'</span>)
                                <span class="hljs-keyword">break</span>
                    
                    context_lines.extend(lines[start:end])
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-comment"># å›é€€åˆ°å‘¨å›´ä»£ç </span>
                    start = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, line_number - <span class="hljs-number">25</span>)
                    end = <span class="hljs-built_in">min</span>(<span class="hljs-built_in">len</span>(lines), line_number + <span class="hljs-number">25</span>)
                    context_lines.extend(lines[start:end])
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment"># æå–å‘¨å›´ä»£ç </span>
                max_lines = rules[<span class="hljs-string">"max_lines"</span>]
                start = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, line_number - max_lines // <span class="hljs-number">2</span>)
                end = <span class="hljs-built_in">min</span>(<span class="hljs-built_in">len</span>(lines), line_number + max_lines // <span class="hljs-number">2</span>)
                context_lines.extend(lines[start:end])
            
            <span class="hljs-comment"># 3. é™åˆ¶æ€»è¡Œæ•°</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(context_lines) &gt; rules[<span class="hljs-string">"max_lines"</span>]:
                context_lines = context_lines[:rules[<span class="hljs-string">"max_lines"</span>]]
                context_lines.append(<span class="hljs-string">'\n// ... åç»­ä»£ç çœç•¥ ...\n'</span>)
            
            <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>.join(context_lines)
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logging.error(<span class="hljs-string">f"æå–å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-string">f"// æ— æ³•è¯»å–æ–‡ä»¶: <span class="hljs-subst">{file_path}</span>"</span>
</code></pre>
<p><strong>æ ¸å¿ƒç­–ç•¥</strong>ï¼š</p>
<ul>
<li><strong>å·®å¼‚åŒ–æå–</strong>ï¼šç©ºæŒ‡é’ˆé—®é¢˜æå–150è¡Œå«importsï¼Œå‘½åè§„èŒƒåªæå–30è¡Œ</li>
<li><strong>æ™ºèƒ½å›é€€</strong>ï¼šASTè§£æå¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ°ç®€å•æå–</li>
<li><strong>Tokenæ§åˆ¶</strong>ï¼šé€šè¿‡max_linesé™åˆ¶ï¼Œé¿å…ä¸Šä¸‹æ–‡è¿‡é•¿</li>
</ul>
<h4 data-id="heading-11">ç¬¬å››æ­¥ï¼šåˆ†å±‚æ¨¡æ¿ä½“ç³»</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PromptTemplateEngine</span>:
    <span class="hljs-string">"""åˆ†å±‚çš„æç¤ºè¯æ¨¡æ¿å¼•æ“"""</span>
    
    <span class="hljs-comment"># Javaè¯­è¨€è§„èŒƒ</span>
    JAVA_STANDARDS = <span class="hljs-string">"""
è¯·éµå¾ªä»¥ä¸‹Javaå¼€å‘è§„èŒƒï¼š
1. éµå¾ªé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œçš„ç¼–ç è§„èŒƒ
2. æ‰€æœ‰å¯èƒ½ä¸ºnullçš„å‚æ•°å¿…é¡»è¿›è¡Œé˜²å¾¡æ€§æ£€æŸ¥
3. èµ„æºï¼ˆæ–‡ä»¶æµã€æ•°æ®åº“è¿æ¥ç­‰ï¼‰å¿…é¡»ä½¿ç”¨try-with-resourcesè‡ªåŠ¨ç®¡ç†
4. å¼‚å¸¸å¿…é¡»å¦¥å–„å¤„ç†ï¼Œä¸å¾—åæ‰å¼‚å¸¸
5. æ–¹æ³•å¤æ‚åº¦ä¸å¾—è¿‡é«˜ï¼Œä¿æŒä»£ç å¯è¯»æ€§
6. å˜é‡å’Œæ–¹æ³•å‘½åè¦æ¸…æ™°ã€ç¬¦åˆé©¼å³°å‘½åè§„èŒƒ
"""</span>
    
    <span class="hljs-comment"># é—®é¢˜ç±»å‹ç‰¹å®šæ¨¡æ¿</span>
    ISSUE_TEMPLATES = {
        <span class="hljs-string">"NullPointer"</span>: {
            <span class="hljs-string">"task"</span>: <span class="hljs-string">"ä¿®å¤ä»¥ä¸‹ä»£ç ä¸­çš„ç©ºæŒ‡é’ˆé£é™©é—®é¢˜"</span>,
            <span class="hljs-string">"requirements"</span>: <span class="hljs-string">"""
ä¿®å¤è¦æ±‚ï¼š
1. åœ¨æ–¹æ³•å¼€å§‹å¤„å¯¹å¯èƒ½ä¸ºnullçš„å‚æ•°è¿›è¡Œæ£€æŸ¥
2. å¦‚æœå‚æ•°ä¸ºnullï¼ŒæŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸ï¼Œå¹¶æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
3. ä¿æŒåŸæœ‰ä¸šåŠ¡é€»è¾‘ä¸å˜
4. ä¸è¦ä¿®æ”¹æ–¹æ³•ç­¾å
5. ç¡®ä¿ä¿®å¤åä¸å½±å“å…¶ä»–æ­£å¸¸è°ƒç”¨
"""</span>
        },
        <span class="hljs-string">"ResourceLeak"</span>: {
            <span class="hljs-string">"task"</span>: <span class="hljs-string">"ä¿®å¤ä»¥ä¸‹ä»£ç ä¸­çš„èµ„æºæ³„éœ²é—®é¢˜"</span>,
            <span class="hljs-string">"requirements"</span>: <span class="hljs-string">"""
ä¿®å¤è¦æ±‚ï¼š
1. ä½¿ç”¨try-with-resourcesè¯­å¥åŒ…è£¹éœ€è¦å…³é—­çš„èµ„æº
2. ç¡®ä¿åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ˆæ­£å¸¸æˆ–å¼‚å¸¸ï¼‰èµ„æºéƒ½èƒ½æ­£ç¡®é‡Šæ”¾
3. ä¿æŒåŸæœ‰å¼‚å¸¸å¤„ç†æ–¹å¼
4. ä¿æŒæ–¹æ³•ç­¾åä¸å˜
"""</span>
        },
        <span class="hljs-string">"SQLInjection"</span>: {
            <span class="hljs-string">"task"</span>: <span class="hljs-string">"ä¿®å¤ä»¥ä¸‹ä»£ç ä¸­çš„SQLæ³¨å…¥å®‰å…¨æ¼æ´"</span>,
            <span class="hljs-string">"requirements"</span>: <span class="hljs-string">"""
ä¿®å¤è¦æ±‚ï¼š
1. å¿…é¡»ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆPreparedStatementï¼‰æ›¿ä»£å­—ç¬¦ä¸²æ‹¼æ¥
2. ä½¿ç”¨å ä½ç¬¦ï¼ˆ?ï¼‰å’Œå‚æ•°ç»‘å®šä¼ é€’ç”¨æˆ·è¾“å…¥
3. ä¸å¾—ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥æˆ–æ ¼å¼åŒ–æ–¹å¼æ„å»ºSQLè¯­å¥
4. ä¿æŒæŸ¥è¯¢é€»è¾‘ä¸å˜
"""</span>
        },
    }
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate</span>(<span class="hljs-params">issue_type: <span class="hljs-built_in">str</span>, issue_data: <span class="hljs-built_in">dict</span>, code_context: <span class="hljs-built_in">str</span>, examples: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""ç”Ÿæˆæœ€ç»ˆæç¤ºè¯"""</span>
        
        template = PromptTemplateEngine.ISSUE_TEMPLATES.get(
            issue_type,
            {<span class="hljs-string">"task"</span>: <span class="hljs-string">"ä¿®å¤ä»¥ä¸‹ä»£ç é—®é¢˜"</span>, <span class="hljs-string">"requirements"</span>: <span class="hljs-string">"ä¿æŒä»£ç é£æ ¼ä¸é¡¹ç›®ä¸€è‡´"</span>}
        )
        
        <span class="hljs-comment"># ç»„è£…æç¤ºè¯</span>
        prompt = <span class="hljs-string">f"""ä½ æ˜¯ä¸€ä½ç²¾é€šJavaå¼€å‘çš„èµ„æ·±å·¥ç¨‹å¸ˆã€‚

ä»»åŠ¡ï¼š<span class="hljs-subst">{template[<span class="hljs-string">'task'</span>]}</span>

ç¼–ç è§„èŒƒï¼š<span class="hljs-subst">{PromptTemplateEngine.JAVA_STANDARDS.strip()}</span>
"""</span>
        
        <span class="hljs-comment"># æ·»åŠ ç¤ºä¾‹ï¼ˆå¦‚æœæœ‰ï¼‰</span>
        <span class="hljs-keyword">if</span> examples:
            prompt += <span class="hljs-string">f"\n<span class="hljs-subst">{examples}</span>\n"</span>
        
        <span class="hljs-comment"># æ·»åŠ é—®é¢˜è¯¦æƒ…</span>
        prompt += <span class="hljs-string">f"""
é—®é¢˜è¯¦æƒ…ï¼š
- è§„åˆ™ID: <span class="hljs-subst">{issue_data.get(<span class="hljs-string">'rule'</span>, <span class="hljs-string">'Unknown'</span>)}</span>
- é—®é¢˜ç±»å‹: <span class="hljs-subst">{issue_type}</span>
- ä¸¥é‡çº§åˆ«: <span class="hljs-subst">{issue_data.get(<span class="hljs-string">'severity'</span>, <span class="hljs-string">'MAJOR'</span>)}</span>
- é—®é¢˜æè¿°: <span class="hljs-subst">{issue_data.get(<span class="hljs-string">'message'</span>, <span class="hljs-string">''</span>)}</span>
- é—®é¢˜ä½ç½®: ç¬¬<span class="hljs-subst">{issue_data.get(<span class="hljs-string">'line'</span>, <span class="hljs-number">0</span>)}</span>è¡Œ

å¾…ä¿®å¤ä»£ç ï¼š
```java
<span class="hljs-subst">{code_context}</span>
``` <span class="hljs-subst">{data-source-line=<span class="hljs-string">"360"</span>}</span>

<span class="hljs-subst">{template[<span class="hljs-string">'requirements'</span>].strip()}</span>

è¾“å‡ºæ ¼å¼ï¼š
- ä»…è¾“å‡ºä¿®å¤åçš„å®Œæ•´æ–¹æ³•ä»£ç 
- ä½¿ç”¨```java```æ ¼å¼åŒ…è£¹ä»£ç 
- ä¸è¦è¾“å‡ºå¤šä½™çš„è§£é‡Šæ–‡å­—
- ç¡®ä¿ä»£ç å¯ä»¥ç›´æ¥æ›¿æ¢åŸæœ‰æ–¹æ³•
"""</span>
        
        <span class="hljs-keyword">return</span> prompt
</code></pre>
<p><strong>æ¨¡æ¿è®¾è®¡</strong>ï¼š</p>
<ul>
<li><strong>ä¸‰å±‚ç»“æ„</strong>ï¼šè§’è‰²è®¾å®š + ç¼–ç è§„èŒƒ + é—®é¢˜ç±»å‹ç‰¹å®šè¦æ±‚</li>
<li><strong>çµæ´»æ‰©å±•</strong>ï¼šæ–°å¢é—®é¢˜ç±»å‹åªéœ€æ·»åŠ æ¨¡æ¿é…ç½®</li>
<li><strong>è§„èŒƒæ³¨å…¥</strong>ï¼šè‡ªåŠ¨æ³¨å…¥é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œè§„èŒƒ</li>
</ul>
<h4 data-id="heading-12">ç¬¬äº”æ­¥ï¼šFew-shotç¤ºä¾‹åº“</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExampleRepository</span>:
    <span class="hljs-string">"""é—®é¢˜ä¿®å¤ç¤ºä¾‹åº“ - æä¾›ä¿®å¤å‰åçš„å¯¹æ¯”æ¡ˆä¾‹"""</span>
    
    EXAMPLES = {
        <span class="hljs-string">"NullPointer"</span>: <span class="hljs-string">"""
å‚è€ƒç¤ºä¾‹ï¼š

ç¤ºä¾‹1 - ç©ºæŒ‡é’ˆé˜²å¾¡æ€§æ£€æŸ¥ï¼š
ä¿®å¤å‰ï¼š
```java
public String getUserEmail(User user) {
    return user.getEmail();
}
``` {data-source-line="395"}
ä¿®å¤åï¼š
```java
public String getUserEmail(User user) {
    if (user == null) {
        throw new IllegalArgumentException("ç”¨æˆ·å¯¹è±¡ä¸èƒ½ä¸ºç©º");
    }
    return user.getEmail();
}
``` {data-source-line="404"}

ç¤ºä¾‹2 - å¤šå‚æ•°ç©ºå€¼æ£€æŸ¥ï¼š
ä¿®å¤å‰ï¼š
```java
public void processOrder(Order order, User user) {
    order.setUser(user);
    order.setStatus("processed");
}
``` {data-source-line="413"}
ä¿®å¤åï¼š
```java
public void processOrder(Order order, User user) {
    if (order == null) {
        throw new IllegalArgumentException("è®¢å•å¯¹è±¡ä¸èƒ½ä¸ºç©º");
    }
    if (user == null) {
        throw new IllegalArgumentException("ç”¨æˆ·å¯¹è±¡ä¸èƒ½ä¸ºç©º");
    }
    order.setUser(user);
    order.setStatus("processed");
}
``` {data-source-line="426"}
"""</span>,
        <span class="hljs-string">"ResourceLeak"</span>: <span class="hljs-string">"""
å‚è€ƒç¤ºä¾‹ï¼š

ç¤ºä¾‹ - ä½¿ç”¨try-with-resourcesï¼š
ä¿®å¤å‰ï¼š
```java
public String readFile(String path) throws IOException {
    FileInputStream fis = new FileInputStream(path);
    byte[] buffer = new byte[1024];
    int length = fis.read(buffer);
    return new String(buffer, 0, length);
}
``` {data-source-line="440"}
ä¿®å¤åï¼š
```java
public String readFile(String path) throws IOException {
    try (FileInputStream fis = new FileInputStream(path)) {
        byte[] buffer = new byte[1024];
        int length = fis.read(buffer);
        return new String(buffer, 0, length);
    }
}
``` {data-source-line="450"}
"""</span>,
        <span class="hljs-string">"SQLInjection"</span>: <span class="hljs-string">"""
å‚è€ƒç¤ºä¾‹ï¼š

ç¤ºä¾‹ - ä½¿ç”¨PreparedStatementï¼š
ä¿®å¤å‰ï¼š
```java
public User findUserByName(String name) {
    String sql = "SELECT * FROM users WHERE name = '" + name + "'";
    return jdbcTemplate.queryForObject(sql, User.class);
}
``` {data-source-line="462"}
ä¿®å¤åï¼š
```java
public User findUserByName(String name) {
    String sql = "SELECT * FROM users WHERE name = ?";
    return jdbcTemplate.queryForObject(sql, User.class, name);
}
``` {data-source-line="469"}
"""</span>,
    }
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_examples</span>(<span class="hljs-params">issue_type: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""è·å–ç›¸å…³ç¤ºä¾‹"""</span>
        <span class="hljs-keyword">return</span> ExampleRepository.EXAMPLES.get(issue_type, <span class="hljs-string">""</span>)
</code></pre>
<p><strong>ç¤ºä¾‹åº“ä»·å€¼</strong>ï¼š</p>
<ul>
<li><strong>Few-shotå­¦ä¹ </strong>ï¼šè®©AIé€šè¿‡æ¡ˆä¾‹å­¦ä¹ ä¿®å¤æ¨¡å¼</li>
<li><strong>æ ¼å¼ç»Ÿä¸€</strong>ï¼šä¿®å¤å‰/åå¯¹æ¯”ï¼Œæ¸…æ™°æ˜äº†</li>
<li><strong>æ˜“äºæ‰©å±•</strong>ï¼šæ–°å¢ç¤ºä¾‹åªéœ€æ·»åŠ å­—ç¬¦ä¸²é…ç½®</li>
</ul>
<h4 data-id="heading-13">ç¬¬å…­æ­¥ï¼šæ•´åˆåˆ°MCPæœåŠ¡</h4>
<p>ç°åœ¨ï¼Œå°†æ‰€æœ‰ç»„ä»¶æ•´åˆåˆ°MCPæœåŠ¡ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> mcp.server <span class="hljs-keyword">import</span> FastMCP
<span class="hljs-keyword">import</span> httpx
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> os

mcp = FastMCP(<span class="hljs-string">"intelligent-code-fix"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentPromptGenerator</span>:
    <span class="hljs-string">"""æ™ºèƒ½æç¤ºè¯ç”Ÿæˆå™¨ - æ•´åˆ6æ­¥ç”Ÿæˆæ³•çš„æ ¸å¿ƒç±»"""</span>
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_for_issue</span>(<span class="hljs-params">issue: <span class="hljs-built_in">dict</span>, base_dir: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""ä¸ºå•ä¸ªissueç”Ÿæˆæ™ºèƒ½æç¤ºè¯"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># 1. æå–issueä¿¡æ¯</span>
            rule_key = issue.get(<span class="hljs-string">'rule'</span>, <span class="hljs-string">''</span>)
            component = issue.get(<span class="hljs-string">'component'</span>, <span class="hljs-string">''</span>)
            file_path = component.split(<span class="hljs-string">':'</span>, <span class="hljs-number">1</span>)[<span class="hljs-number">1</span>] <span class="hljs-keyword">if</span> <span class="hljs-string">':'</span> <span class="hljs-keyword">in</span> component <span class="hljs-keyword">else</span> component
            full_path = os.path.join(base_dir, file_path)
            line_number = issue.get(<span class="hljs-string">'line'</span>, <span class="hljs-number">0</span>)
            message = issue.get(<span class="hljs-string">'message'</span>, <span class="hljs-string">''</span>)
            severity = issue.get(<span class="hljs-string">'severity'</span>, <span class="hljs-string">'MAJOR'</span>)
            
            <span class="hljs-comment"># 2. é—®é¢˜ç±»å‹è¯†åˆ«</span>
            issue_type = IssueTypeClassifier.classify(rule_key)
            
            logging.info(<span class="hljs-string">f"å¤„ç†é—®é¢˜: <span class="hljs-subst">{file_path}</span>:<span class="hljs-subst">{line_number}</span> - <span class="hljs-subst">{issue_type}</span>"</span>)
            
            <span class="hljs-comment"># 3. æå–ä»£ç ä¸Šä¸‹æ–‡</span>
            code_context = ContextExtractor.extract(full_path, line_number, issue_type)
            
            <span class="hljs-comment"># 4. è·å–ç¤ºä¾‹</span>
            examples = ExampleRepository.get_examples(issue_type)
            
            <span class="hljs-comment"># 5. ç”Ÿæˆæç¤ºè¯</span>
            issue_data = {
                <span class="hljs-string">'rule'</span>: rule_key,
                <span class="hljs-string">'severity'</span>: severity,
                <span class="hljs-string">'message'</span>: message,
                <span class="hljs-string">'line'</span>: line_number,
            }
            
            prompt = PromptTemplateEngine.generate(
                issue_type=issue_type,
                issue_data=issue_data,
                code_context=code_context,
                examples=examples
            )
            
            <span class="hljs-comment"># 6. è®¡ç®—å…ƒæ•°æ®</span>
            token_estimate = <span class="hljs-built_in">len</span>(prompt) // <span class="hljs-number">4</span>  <span class="hljs-comment"># ç²—ç•¥ä¼°ç®—</span>
            
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'success'</span>: <span class="hljs-literal">True</span>,
                <span class="hljs-string">'prompt'</span>: prompt,
                <span class="hljs-string">'metadata'</span>: {
                    <span class="hljs-string">'file'</span>: file_path,
                    <span class="hljs-string">'line'</span>: line_number,
                    <span class="hljs-string">'issue_type'</span>: issue_type,
                    <span class="hljs-string">'rule'</span>: rule_key,
                    <span class="hljs-string">'severity'</span>: severity,
                    <span class="hljs-string">'token_estimate'</span>: token_estimate,
                }
            }
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logging.error(<span class="hljs-string">f"ç”Ÿæˆæç¤ºè¯å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'success'</span>: <span class="hljs-literal">False</span>,
                <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e),
                <span class="hljs-string">'file'</span>: file_path,
                <span class="hljs-string">'line'</span>: line_number,
            }

<span class="hljs-meta">@mcp.tool(<span class="hljs-params"><span class="hljs-string">"auto-fix-sonar-issues"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">auto_fix_sonar_issues</span>(<span class="hljs-params">
    project_name: <span class="hljs-built_in">str</span>,
    cookie: <span class="hljs-built_in">str</span>,
    base_dir: <span class="hljs-built_in">str</span>,
    branch: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span>,
    page_size: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span>,
    page_num: <span class="hljs-built_in">int</span> = <span class="hljs-number">1</span>,
    is_new_code_period: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æ™ºèƒ½ä¿®å¤Sonaræ‰«æé—®é¢˜ - æ ¸å¿ƒMCPå·¥å…·"""</span>
    
    <span class="hljs-comment"># è·å–Sonaré—®é¢˜åˆ—è¡¨</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient() <span class="hljs-keyword">as</span> client:
        params = {
            <span class="hljs-string">"components"</span>: project_name,
            <span class="hljs-string">"ps"</span>: page_size,
            <span class="hljs-string">"p"</span>: page_num,
        }
        <span class="hljs-keyword">if</span> branch:
            params[<span class="hljs-string">"branch"</span>] = branch
        <span class="hljs-keyword">if</span> is_new_code_period:
            params[<span class="hljs-string">"inNewCodePeriod"</span>] = <span class="hljs-string">"true"</span>
        
        response = <span class="hljs-keyword">await</span> client.get(
            <span class="hljs-string">"https://sonar.zhuanspirit.com/api/issues/search"</span>,
            params=params,
            headers={<span class="hljs-string">"Cookie"</span>: cookie},
            timeout=<span class="hljs-number">10.0</span>
        )
        
        data = response.json()
        issues = data.get(<span class="hljs-string">'issues'</span>, [])
        total = data.get(<span class="hljs-string">'total'</span>, <span class="hljs-number">0</span>)
    
    <span class="hljs-comment"># ä¸ºæ¯ä¸ªissueç”Ÿæˆæ™ºèƒ½æç¤ºè¯</span>
    results = []
    success_count = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">for</span> idx, issue <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(issues, <span class="hljs-number">1</span>):
        result = IntelligentPromptGenerator.generate_for_issue(issue, base_dir)
        
        <span class="hljs-keyword">if</span> result[<span class="hljs-string">'success'</span>]:
            success_count += <span class="hljs-number">1</span>
            metadata = result[<span class="hljs-string">'metadata'</span>]
            results.append(<span class="hljs-string">f"""
<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">80</span>}</span>
## Issue <span class="hljs-subst">{idx}</span>: <span class="hljs-subst">{metadata[<span class="hljs-string">'file'</span>]}</span> (ç¬¬<span class="hljs-subst">{metadata[<span class="hljs-string">'line'</span>]}</span>è¡Œ)

**é—®é¢˜ç±»å‹**: <span class="hljs-subst">{metadata[<span class="hljs-string">'issue_type'</span>]}</span>  
**ä¸¥é‡çº§åˆ«**: <span class="hljs-subst">{metadata[<span class="hljs-string">'severity'</span>]}</span>  
**é¢„ä¼°Token**: <span class="hljs-subst">{metadata[<span class="hljs-string">'token_estimate'</span>]}</span>

### ç”Ÿæˆçš„æ™ºèƒ½æç¤ºè¯ï¼š

<span class="hljs-subst">{result[<span class="hljs-string">'prompt'</span>]}</span>
<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">80</span>}</span>
"""</span>)
    
    <span class="hljs-comment"># ç»„è£…æœ€ç»ˆè¾“å‡º</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"""
# æ™ºèƒ½ä»£ç ä¿®å¤æç¤ºè¯ç”Ÿæˆå®Œæˆ

## ç»Ÿè®¡ä¿¡æ¯
- **é¡¹ç›®**: <span class="hljs-subst">{project_name}</span>
- **æ€»é—®é¢˜æ•°**: <span class="hljs-subst">{total}</span>
- **æœ¬æ‰¹æ¬¡**: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(issues)}</span> ä¸ª
- **æˆåŠŸç”Ÿæˆ**: <span class="hljs-subst">{success_count}</span> ä¸ª

## æ™ºèƒ½æç¤ºè¯åˆ—è¡¨
<span class="hljs-subst">{<span class="hljs-string">""</span>.join(results)}</span>

---
ç”±æ™ºèƒ½æç¤ºè¯ç”Ÿæˆå¼•æ“æä¾›æ”¯æŒ
"""</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    mcp.run(<span class="hljs-string">"stdio"</span>)
</code></pre>
<p><strong>æ•´åˆè¦ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šæ¯ä¸ªissueç‹¬ç«‹å¤„ç†ï¼Œå•ä¸ªå¤±è´¥ä¸å½±å“å…¶ä»–</li>
<li><strong>å…ƒæ•°æ®è¿½è¸ª</strong>ï¼šè®°å½•æ–‡ä»¶ã€è¡Œå·ã€é—®é¢˜ç±»å‹ã€Tokenä¼°ç®—</li>
<li><strong>ç»“æ„åŒ–è¾“å‡º</strong>ï¼šMarkdownæ ¼å¼ï¼Œä¾¿äºCursorå±•ç¤º</li>
</ul>
<h3 data-id="heading-14">å®‰è£…ä¾èµ–åŒ…</h3>
<p>åœ¨ä½¿ç”¨MCPæœåŠ¡ä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…å¿…è¦çš„Pythonä¾èµ–åŒ…ã€‚åˆ›å»º<code>requirements.txt</code>æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-txt" lang="txt"># æ™ºèƒ½ä»£ç ä¿®å¤MCPæœåŠ¡ä¾èµ–åŒ…

# MCPæ¡†æ¶ - ç”¨äºæ„å»ºMCPæœåŠ¡
mcp&gt;=0.9.0

# HTTPå®¢æˆ·ç«¯ - ç”¨äºè°ƒç”¨Sonar API
httpx&gt;=0.27.0

# Java ASTè§£æå™¨ - ç²¾ç¡®è§£æJavaä»£ç ç»“æ„ï¼ˆå¼ºçƒˆæ¨èï¼‰
# ä¼˜åŠ¿ï¼šå‡†ç¡®ç‡99%+ï¼Œä¸å—æ³¨é‡Šã€å­—ç¬¦ä¸²ã€Lambdaå½±å“
# æ³¨æ„ï¼šè¿™æ˜¯çº¯Pythonåº“ï¼Œä¸éœ€è¦Javaç¯å¢ƒ
javalang&gt;=0.13.0
</code></pre>
<p>å®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install -r requirements.txt
</code></pre>
<p><strong>ä¾èµ–è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>mcp</strong>ï¼šMCPåè®®æ¡†æ¶ï¼Œè®©Pythonè„šæœ¬èƒ½å¤Ÿè¢«Cursorè¯†åˆ«å’Œè°ƒç”¨</li>
<li><strong>httpx</strong>ï¼šç°ä»£åŒ–HTTPå®¢æˆ·ç«¯ï¼Œç”¨äºè°ƒç”¨Sonar APIè·å–æ‰«æç»“æœ</li>
<li><strong>javalang</strong>ï¼šçº¯Pythonçš„Java ASTè§£æå™¨ï¼Œç”¨äºç²¾å‡†å®šä½ä»£ç ç»“æ„ï¼Œæ— éœ€å®‰è£…Javaç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-15">é…ç½®MCPï¼ˆè®©Cursorè¯†åˆ«ä½ çš„æœåŠ¡ï¼‰</h3>
<p>%è¿™é‡Œæ”¹æˆä½ æœ¬åœ°çš„è·¯å¾„%
åœ¨ <code>~/.cursor/mcp.json</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"intelligent-code-fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"/Users/Desktop/cursor/intelligent-code-fix.py"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>intelligent-code-fix</code>ï¼šMCPæœåŠ¡åç§°ï¼Œåœ¨Cursorä¸­é€šè¿‡<code>@intelligent-code-fix</code>è°ƒç”¨</li>
<li><code>command</code>: Pythonè§£é‡Šå™¨å‘½ä»¤</li>
<li><code>args</code>: Pythonè„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼ˆè¯·ä¿®æ”¹ä¸ºä½ çš„å®é™…è·¯å¾„ï¼‰</li>
<li>ä¿®æ”¹é…ç½®åéœ€è¦é‡å¯Cursorç”Ÿæ•ˆ</li>
</ul>
<h2 data-id="heading-16">å››ã€ä½¿ç”¨ä½“éªŒï¼šåœ¨Cursorä¸­ä¸€é”®ä¿®å¤</h2>
<h3 data-id="heading-17">é…ç½®å¥½MCPåï¼Œåœ¨Cursorä¸­çš„ä½¿ç”¨éå¸¸ç®€å•</h3>
<h4 data-id="heading-18">æ­¥éª¤1ï¼šåœ¨CursorèŠå¤©çª—å£è°ƒç”¨MCPå·¥å…·</h4>
<pre><code class="hljs language-diff" lang="diff">ä½¿ç”¨ auto-fix-sonar-issues å·¥å…·ä¿®å¤Sonaré—®é¢˜

å‚æ•°ï¼š

<span class="hljs-deletion">- project_name: hunter_partner_recycle_core</span>
<span class="hljs-deletion">- cookie: sso_uid=xxx; ticket=xxx; aid=xxx</span>
<span class="hljs-deletion">- base_dir: /Users/xxx/projects/hunter/src/main/java</span>
<span class="hljs-deletion">- branch: feature-3278-163 (å¯é€‰)</span>
<span class="hljs-deletion">- page_size: 10</span>




</code></pre>
<h4 data-id="heading-19">æ­¥éª¤2ï¼šMCPæœåŠ¡è‡ªåŠ¨å¤„ç†</h4>
<p>ç³»ç»Ÿè‡ªåŠ¨å®Œæˆï¼š</p>
<ol>
<li>è°ƒç”¨Sonar APIè·å–é—®é¢˜åˆ—è¡¨</li>
<li>ä¸ºæ¯ä¸ªé—®é¢˜æ™ºèƒ½ç”Ÿæˆæç¤ºè¯</li>
<li>è¿”å›ç»“æ„åŒ–çš„ä¿®å¤å»ºè®®</li>
</ol>
<h4 data-id="heading-20">æ­¥éª¤3ï¼šAIç”Ÿæˆä¿®å¤åçš„ä»£ç </h4>
<pre><code class="hljs language-ini" lang="ini">å·²ç”Ÿæˆ10ä¸ªé—®é¢˜çš„ä¿®å¤å»ºè®®ï¼š

Issue 1: ActivityServiceImpl.java ç©ºæŒ‡é’ˆä¿®å¤
ä¿®å¤åä»£ç ï¼š
<span class="hljs-section">[å®Œæ•´çš„ä¿®å¤ä»£ç ]</span>

Issue 2: FileUtil.java èµ„æºæ³„éœ²ä¿®å¤
ä¿®å¤åä»£ç ï¼š
<span class="hljs-section">[å®Œæ•´çš„ä¿®å¤ä»£ç ]</span>

</code></pre>
<h4 data-id="heading-21">æ­¥éª¤4ï¼šä¸€é”®åº”ç”¨ä¿®å¤</h4>
<p>ç›´æ¥åœ¨Cursorä¸­reviewå¹¶åº”ç”¨ä¿®å¤</p>
<h3 data-id="heading-22">æ”¹è¿›æ•ˆæœï¼š</h3>
<ol>
<li>æˆæœ¬é™ä½70% ï¼šç²¾å‡†æå–ä¸Šä¸‹æ–‡ï¼Œtokenä½¿ç”¨é‡å¤§å¹…å‡å°‘</li>
<li>å‡†ç¡®ç‡æå‡30%ï¼šç»“æ„åŒ–æç¤ºè¯+ç¤ºä¾‹å¼•å¯¼ï¼ŒAIç†è§£æ›´å‡†ç¡®</li>
<li>æ•ˆç‡æå‡3å€ï¼šè‡ªåŠ¨åŒ–æµç¨‹ï¼Œæ— éœ€äººå·¥å¹²é¢„</li>
<li>è´¨é‡å¯æ§ï¼šåˆ†å±‚æ¨¡æ¿ç¡®ä¿ä»£ç ç¬¦åˆå›¢é˜Ÿè§„èŒƒ</li>
<li>æ˜“äºæ‰©å±•ï¼šæ–°å¢é—®é¢˜ç±»å‹åªéœ€æ·»åŠ é…ç½®</li>
</ol>
<h2 data-id="heading-23">äº”ã€å†™åœ¨æœ€å</h2>
<p>çœŸæ­£æœ‰æ•ˆçš„AIè¾…åŠ©å¼€å‘ï¼Œä¸æ˜¯ç®€å•åœ°æŠŠä»£ç æ‰”ç»™AIï¼Œè€Œæ˜¯è¦åšå¥½ï¼š</p>
<ul>
<li><strong>é—®é¢˜çš„ç²¾å‡†è¯†åˆ«</strong>ï¼šçŸ¥é“æ˜¯ä»€ä¹ˆç±»å‹çš„é—®é¢˜</li>
<li><strong>ä¸Šä¸‹æ–‡çš„æ™ºèƒ½æå–</strong>ï¼šç»™AIæœ€ç›¸å…³çš„ä»£ç ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ä»£ç </li>
<li><strong>è§„èŒƒçš„æœ‰æ•ˆæ³¨å…¥</strong>ï¼šè®©AIçŸ¥é“è¦éµå¾ªä»€ä¹ˆæ ‡å‡†</li>
<li><strong>ç»éªŒçš„ç³»ç»Ÿæ²‰æ·€</strong>ï¼šç”¨ç¤ºä¾‹åº“è®©AIå­¦ä¹ æœ€ä½³å®è·µ</li>
</ul>
<p>è¿™å¥—æ–¹æ¡ˆä¸ä»…é€‚ç”¨äºSonarï¼Œä¹Ÿå¯ä»¥æ¨å¹¿åˆ°å…¶ä»–ä»£ç æ‰«æå·¥å…·ï¼ˆESLintã€Checkstyleç­‰ï¼‰ã€‚æ ¸å¿ƒæ€æƒ³éƒ½æ˜¯ï¼š<strong>å°†éç»“æ„åŒ–çš„æ‰«æç»“æœè½¬æ¢ä¸ºç»“æ„åŒ–çš„AIæç¤ºè¯</strong>ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½ç»™å¤§å®¶å¸¦æ¥å¯å‘ã€‚å¦‚æœå¤§å®¶ä¹Ÿåœ¨æ¢ç´¢AIè¾…åŠ©å¼€å‘ï¼Œæ¬¢è¿äº¤æµï¼</p>
<blockquote>
<p>å…³äºä½œè€…ï¼Œåˆ˜é›…æ–Œï¼Œä¾ å®¢æ±‡Javaå¼€å‘å·¥ç¨‹å¸ˆã€‚
æƒ³äº†è§£æ›´å¤šè½¬è½¬å…¬å¸çš„ä¸šåŠ¡å®è·µï¼Œæ¬¢è¿ç‚¹å‡»å…³æ³¨ä¸‹æ–¹å…¬ä¼—å·</p>
</blockquote>
<blockquote>
<p>è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚
å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>