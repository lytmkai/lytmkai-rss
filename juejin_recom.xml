<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[TN3187ï¼šè¿ç§»è‡³åŸºäº UIKit åœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸ]]></title>    <link>https://juejin.cn/post/7598710324168605711</link>    <guid>https://juejin.cn/post/7598710324168605711</guid>    <pubDate>2026-01-26T02:48:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598710324168605711" data-draft-id="7598734303175262260" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TN3187ï¼šè¿ç§»è‡³åŸºäº UIKit åœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸ"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2026-01-26T02:48:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Meicy"/> <meta itemprop="url" content="https://juejin.cn/user/3562073407095597"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TN3187ï¼šè¿ç§»è‡³åŸºäº UIKit åœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3562073407095597/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Meicy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:48:31.000Z" title="Mon Jan 26 2026 02:48:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æ¦‚è¿°</h3>
<p>è®¸å¤šè¾ƒæ—§çš„ iOS åº”ç”¨ä½¿ç”¨ä¸€ä¸ªÂ UIApplicationDelegateÂ å¯¹è±¡ä½œä¸ºå…¶åº”ç”¨çš„ä¸»è¦å…¥å£ç‚¹ï¼Œå¹¶ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½¿ç”¨åœºæ™¯çš„åº”ç”¨åˆ™ä¸åŒï¼Œå®ƒä»¬ä½¿ç”¨ä¸€ä¸ªÂ UISceneDelegateÂ å¯¹è±¡æ¥åˆ†åˆ«ç®¡ç†æ¯ä¸ªåœºæ™¯çª—å£ã€‚ä»åŸºäºÂ UIApplicationDelegateÂ çš„åº”ç”¨ç”Ÿå‘½å‘¨æœŸè¿ç§»åˆ°åŸºäºåœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥è®©ä½ çš„åº”ç”¨æ”¯æŒå¤šçª—å£ç­‰ç°ä»£åŠŸèƒ½ã€‚æœ¬æ–‡æ¡£é˜è¿°äº†å¦‚ä½•å°†åº”ç”¨è¿ç§»åˆ°åŸºäºåœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h3 data-id="heading-1">è¿ç§»è·¯å¾„</h3>
<p>å°†åº”ç”¨è¿ç§»åˆ°åŸºäºåœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸæœ‰ä¸¤ç§è·¯å¾„ï¼š</p>
<ul>
<li>åˆ†é˜¶æ®µè¿ç§»ï¼šåº”ç”¨åœ¨ç»§ç»­ä½¿ç”¨Â UIApplicationDelegateÂ çš„åŒæ—¶ï¼Œé€æ­¥é‡‡ç”¨Â UISceneDelegateã€‚</li>
<li>ç›´æ¥è¿ç§»ï¼šåº”ç”¨ä¸€æ¬¡æ€§ç›´æ¥è¿ç§»åˆ°Â UISceneDelegateã€‚</li>
</ul>
<p>åœ¨åˆ†é˜¶æ®µè¿ç§»ä¸­ï¼Œä½ å¯ä»¥åœ¨åº”ç”¨çš„ä¸åŒéƒ¨åˆ†é€æ­¥å®ç°åœºæ™¯æ”¯æŒï¼Œè€Œåº”ç”¨çš„å…¶ä½™éƒ¨åˆ†ç»§ç»­é€šè¿‡ç°æœ‰çš„Â UIApplicationDelegateÂ è¿›è¡Œç®¡ç†ã€‚è¿™ç§æ–¹å¼å¯¹äºå¤§å‹åº”ç”¨æˆ–è€…éœ€è¦é€æ­¥éªŒè¯åœºæ™¯å…¼å®¹æ€§çš„å›¢é˜Ÿå¾ˆæœ‰ç”¨ã€‚ç„¶è€Œï¼Œåˆ†é˜¶æ®µè¿ç§»ä¼šå¢åŠ ä¸´æ—¶å¤æ‚æ€§ï¼Œå¹¶ä¸”åº”ç”¨åœ¨å®Œå…¨è¿ç§»ä¹‹å‰æ— æ³•ä½¿ç”¨å¤šçª—å£ç­‰éœ€è¦å®Œå…¨åŸºäºåœºæ™¯ç”Ÿå‘½å‘¨æœŸçš„åŠŸèƒ½ã€‚</p>
<p>ç›´æ¥è¿ç§»æ„å‘³ç€ä¸€æ¬¡æ€§å°†æ•´ä¸ªåº”ç”¨åˆ‡æ¢åˆ°Â UISceneDelegateã€‚å¯¹äºå°šæœªä½¿ç”¨Â UIApplicationDelegateÂ ç®¡ç†ç•Œé¢çš„æ–°åº”ç”¨ï¼Œæˆ–è€…é‚£äº›è§„æ¨¡è¾ƒå°ã€æ˜“äºæ•´ä½“æ›´æ–°çš„ç°æœ‰åº”ç”¨ï¼Œæ¨èé‡‡ç”¨è¿™ç§æ–¹å¼ã€‚ç›´æ¥è¿ç§»å¯ä»¥æ›´å¿«åœ°å¯ç”¨å¤šçª—å£ç­‰ç°ä»£åŠŸèƒ½ï¼Œå¹¶ç®€åŒ–ä»£ç åº“ã€‚</p>
<h3 data-id="heading-2">å¦‚ä½•åˆ¤æ–­åº”ç”¨æ˜¯å¦ä½¿ç”¨äº†åœºæ™¯ï¼Ÿ</h3>
<p>å¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨äº†åœºæ™¯ï¼Œå…¶Â Info.plistÂ æ–‡ä»¶ä¸­ä¼šåŒ…å«ä¸€ä¸ªÂ UIApplicationSceneManifestÂ å­—å…¸ã€‚å½“ç³»ç»Ÿåœ¨Â Info.plistÂ ä¸­æ£€æµ‹åˆ°æ­¤å­—å…¸æ—¶ï¼Œå®ƒä¼šä½¿ç”¨åŸºäºåœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸæ¥å¯åŠ¨ä½ çš„åº”ç”¨ã€‚å¯¹äºç›´æ¥è¿ç§»ï¼Œä½ éœ€è¦æ·»åŠ æ­¤æ¸…å•ã€‚å¯¹äºåˆ†é˜¶æ®µè¿ç§»ï¼Œä½ å°†åœ¨å‡†å¤‡å¥½å¯ç”¨åœºæ™¯æ—¶æ·»åŠ å®ƒã€‚</p>
<hr/>
<h3 data-id="heading-3">åˆ†é˜¶æ®µè¿ç§»</h3>
<p>åˆ†é˜¶æ®µè¿ç§»å…è®¸ä½ é€æ­¥é‡‡ç”¨Â UISceneDelegateã€‚åœ¨è¿™ç§æ–¹æ³•ä¸‹ï¼Œåº”ç”¨å°†ç»§ç»­ä½¿ç”¨Â UIApplicationDelegateÂ ä½œä¸ºä¸»è¦å…¥å£ç‚¹ï¼Œä½†ä½ å¯ä»¥ä¸ºæŸäº›ç•Œé¢é€æ­¥å¼•å…¥åœºæ™¯æ”¯æŒã€‚å½“ä½ æƒ³ä¸ºåº”ç”¨çš„ç‰¹å®šéƒ¨åˆ†å¯ç”¨å¤šçª—å£ç­‰åŠŸèƒ½ï¼ŒåŒæ—¶ä¿æŒå…¶ä»–éƒ¨åˆ†çš„åŸæœ‰è¡Œä¸ºæ—¶ï¼Œè¿™ç§æ–¹å¼å¾ˆæœ‰ç”¨ã€‚</p>
<p>è¦è¿›è¡Œåˆ†é˜¶æ®µè¿ç§»ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå®ç°Â UIWindowSceneDelegateÂ åè®®çš„æ–°ç±»ã€‚</li>
<li>åœ¨Â UIApplicationDelegateÂ ä¸­å®ç°Â application(_:configurationForConnecting:options:)Â æ–¹æ³•ï¼Œä¸ºç‰¹å®šä¼šè¯è¿”å›ä¸€ä¸ªÂ UISceneConfigurationÂ å®ä¾‹ã€‚æ­¤é…ç½®å‘Šè¯‰ç³»ç»Ÿä¸ºè¿æ¥çš„åœºæ™¯ä¼šè¯ä½¿ç”¨å“ªä¸ªåœºæ™¯ä»£ç†ç±»ã€‚</li>
<li>åœ¨åº”ç”¨çš„Â Info.plistÂ ä¸­é…ç½®Â UIApplicationSceneManifestÂ å­—å…¸ï¼Œå¹¶ä¸ºåœºæ™¯é…ç½®æŒ‡å®šä½ çš„åœºæ™¯ä»£ç†ç±»åã€‚</li>
</ol>
<p>å½“ç³»ç»Ÿè¯·æ±‚æ–°åœºæ™¯æ—¶ï¼Œå®ƒä¼šè°ƒç”¨Â UIApplicationDelegateÂ çš„Â application(_:configurationForConnecting:options:)Â æ–¹æ³•ã€‚ä½ å¯ä»¥æ£€æŸ¥è¿æ¥é€‰é¡¹ï¼ˆä¾‹å¦‚Â UIApplication.OpenURLOptionsÂ æˆ–Â UIApplication.ActivityOptionsï¼‰æ¥å†³å®šè¿”å›å“ªç§åœºæ™¯é…ç½®ã€‚è¿™å…è®¸ä½ æ ¹æ®ç”¨æˆ·çš„æ“ä½œï¼ˆä¾‹å¦‚ç‚¹å‡» URL æˆ–è¿›è¡Œæ‹–æ”¾æ“ä½œï¼‰æ¥åˆ›å»ºä¸åŒç±»å‹çš„åœºæ™¯ã€‚</p>
<p>åˆ†é˜¶æ®µè¿ç§»æœŸé—´ï¼ŒUIApplicationDelegateÂ ä»ç„¶è´Ÿè´£ç®¡ç†åº”ç”¨çº§äº‹ä»¶ï¼ˆä¾‹å¦‚åº”ç”¨å¯åŠ¨å’Œè¿›å…¥åå°ï¼‰ï¼Œè€ŒÂ UISceneDelegateÂ åˆ™ç®¡ç†ç‰¹å®šåœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ˆä¾‹å¦‚åœºæ™¯æ¿€æ´»æˆ–å¤±æ´»ï¼‰ã€‚è¿™ç§åˆ†ç¦»ä½¿å¾—ä½ å¯ä»¥é€æ­¥å°†ç•Œé¢ç®¡ç†ä»Â UIApplicationDelegateÂ è½¬ç§»åˆ°Â UISceneDelegateã€‚</p>
<h3 data-id="heading-4">ç›´æ¥è¿ç§»</h3>
<p>ç›´æ¥è¿ç§»æ¶‰åŠä¸€æ¬¡æ€§å°†æ•´ä¸ªåº”ç”¨ä»Â UIApplicationDelegateÂ è¿ç§»åˆ°Â UISceneDelegateã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºæ–°åº”ç”¨ï¼Œæˆ–è€…é‚£äº›æ„¿æ„ä¸ºå¯ç”¨å¤šçª—å£ç­‰ç°ä»£åŠŸèƒ½è€Œè¿›è¡Œå…¨é¢æ›´æ–°çš„ç°æœ‰åº”ç”¨ã€‚</p>
<p>è¦ç›´æ¥è¿ç§»ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li>å°†åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ä»Â UIApplicationDelegateÂ ç§»åŠ¨åˆ°Â UISceneDelegateã€‚è¿™åŒ…æ‹¬å°†ä»£ç ä»Â application(<em>:didFinishLaunchingWithOptions:)Â ç§»åŠ¨åˆ°Â scene(</em>:willConnectTo:options:)ï¼Œä»¥åŠå°†å…¶ä»–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆä¾‹å¦‚Â applicationWillResignActiveÂ å’ŒÂ applicationDidBecomeActiveï¼‰è¿ç§»åˆ°å¯¹åº”çš„åœºæ™¯ä»£ç†æ–¹æ³•ï¼ˆä¾‹å¦‚Â sceneWillResignActiveÂ å’ŒÂ sceneDidBecomeActiveï¼‰ã€‚</li>
<li>ç§»é™¤Â UIApplicationDelegateÂ ä¸­ä¸çª—å£ç®¡ç†ç›¸å…³çš„ä»£ç ï¼Œå› ä¸ºæ¯ä¸ªåœºæ™¯ç°åœ¨éƒ½ä¼šç®¡ç†è‡ªå·±çš„Â UIWindowã€‚</li>
<li>åœ¨Â Info.plistÂ ä¸­æ·»åŠ Â UIApplicationSceneManifestÂ å­—å…¸ï¼Œå¹¶é…ç½®é»˜è®¤çš„åœºæ™¯é…ç½®ï¼ŒæŒ‡å®šä½ çš„Â UISceneDelegateÂ ç±»ã€‚</li>
</ol>
<p>ç›´æ¥è¿ç§»åï¼Œåº”ç”¨çš„æ¯ä¸ªçª—å£éƒ½ç”±ä¸€ä¸ªç‹¬ç«‹çš„Â UISceneÂ å®ä¾‹ç®¡ç†ï¼ŒUISceneDelegateÂ è´Ÿè´£è¯¥åœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™ä¸ºæ¯ä¸ªçª—å£æä¾›äº†æ›´å¥½çš„éš”ç¦»ï¼Œå¹¶å¯ç”¨äº†å¤šçª—å£æ”¯æŒã€‚</p>
<hr/>
<h3 data-id="heading-5">é€šç”¨è¿ç§»æ­¥éª¤</h3>
<p>æ— è®ºé€‰æ‹©åˆ†é˜¶æ®µè¿ç§»è¿˜æ˜¯ç›´æ¥è¿ç§»ï¼Œéƒ½éœ€è¦éµå¾ªä¸€äº›é€šç”¨æ­¥éª¤ï¼š</p>
<h4 data-id="heading-6">1. åˆ›å»ºåœºæ™¯ä»£ç†ç±»</h4>
<p>åˆ›å»ºä¸€ä¸ªå®ç°Â UIWindowSceneDelegateÂ åè®®çš„æ–°ç±»ã€‚è¿™ä¸ªç±»å°†ç®¡ç†ç‰¹å®šåœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½ å¯ä»¥åœ¨å…¶ä¸­åˆ›å»ºçª—å£ã€è®¾ç½®æ ¹è§†å›¾æ§åˆ¶å™¨ï¼Œå¹¶å“åº”åœºæ™¯ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚</p>
<h4 data-id="heading-7">2. é…ç½® Info.plist</h4>
<p>åœ¨Â Info.plistÂ ä¸­æ·»åŠ ä¸€ä¸ªÂ UIApplicationSceneManifestÂ å­—å…¸ã€‚æ­¤å­—å…¸å‘Šè¯‰ç³»ç»Ÿä½ çš„åº”ç”¨æ”¯æŒåœºæ™¯ã€‚å®ƒåŒ…å«ä¸€ä¸ªÂ UISceneConfigurationsÂ å­—å…¸ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­å®šä¹‰åº”ç”¨æ”¯æŒçš„ä¸åŒåœºæ™¯é…ç½®ã€‚æ¯ä¸ªé…ç½®æŒ‡å®šäº†åœºæ™¯ä»£ç†ç±»åå’Œæ•…äº‹æ¿åç§°ï¼ˆå¦‚æœä½¿ç”¨çš„è¯ï¼‰ã€‚</p>
<p><code>&lt;key&gt;UIApplicationSceneManifest&lt;/key&gt;  &lt;dict&gt;  &lt;key&gt;UIApplicationSupportsMultipleScenes&lt;/key&gt;  &lt;true/&gt; &lt;key&gt;UISceneConfigurations&lt;/key&gt;  &lt;dict&gt;  &lt;key&gt;UIWindowSceneSessionRoleApplication&lt;/key&gt; &lt;array&gt;  &lt;dict&gt;  &lt;key&gt;UISceneConfigurationName&lt;/key&gt;  &lt;string&gt;Default Configuration&lt;/string&gt;  &lt;key&gt;UISceneDelegateClassName&lt;/key&gt;  &lt;string&gt;$(PRODUCT_MODULE_NAME).SceneDelegate&lt;/string&gt;  &lt;key&gt;UISceneStoryboardFile&lt;/key&gt;  &lt;string&gt;Main&lt;/string&gt;  &lt;/dict&gt;  &lt;/array&gt;  &lt;/dict&gt;  &lt;/dict&gt;</code></p>
<h4 data-id="heading-8">3. æ›´æ–°åº”ç”¨ä»£ç†</h4>
<p>å¯¹äºç›´æ¥è¿ç§»ï¼Œç§»é™¤Â UIApplicationDelegateÂ ä¸­ä¸çª—å£ç®¡ç†ç›¸å…³çš„ä»£ç ï¼Œå¹¶å°†åº”ç”¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„å¤„ç†ç§»åŠ¨åˆ°åœºæ™¯ä»£ç†ä¸­ã€‚å¯¹äºåˆ†é˜¶æ®µè¿ç§»ï¼Œåœ¨Â UIApplicationDelegateÂ ä¸­å®ç°Â application(_:configurationForConnecting:options:)Â æ–¹æ³•æ¥è¿”å›é€‚å½“çš„åœºæ™¯é…ç½®ã€‚</p>
<h4 data-id="heading-9">4. æ›´æ–°ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å¤„ç†</h4>
<p>å°†åº”ç”¨çº§ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„å¤„ç†è¿ç§»åˆ°ç›¸åº”çš„åœºæ™¯çº§äº‹ä»¶ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>application(<em>:didFinishLaunchingWithOptions:)Â è¿ç§»åˆ°Â scene(</em>:willConnectTo:options:)</li>
<li>applicationWillResignActiveÂ è¿ç§»åˆ°Â sceneWillResignActive</li>
<li>applicationDidBecomeActiveÂ è¿ç§»åˆ°Â sceneDidBecomeActive</li>
<li>ç­‰ç­‰...</li>
</ul>
<h4 data-id="heading-10">5. æµ‹è¯•</h4>
<p>åœ¨æ”¯æŒåœºæ™¯çš„è®¾å¤‡ï¼ˆä¾‹å¦‚ iPadï¼‰ä¸Šå½»åº•æµ‹è¯•ä½ çš„åº”ç”¨ã€‚éªŒè¯åœºæ™¯æ˜¯å¦æ­£ç¡®åˆ›å»ºã€ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æ˜¯å¦æ­£å¸¸è§¦å‘ï¼Œä»¥åŠå¤šçª—å£ç­‰åŠŸèƒ½æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚å¯¹äºåˆ†é˜¶æ®µè¿ç§»ï¼Œç¡®ä¿ç°æœ‰åŠŸèƒ½åœ¨å¯ç”¨åœºæ™¯çš„éƒ¨åˆ†å’Œæœªå¯ç”¨çš„éƒ¨åˆ†éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<h3 data-id="heading-11">åœºæ™¯ä¸åå°ä»»åŠ¡</h3>
<p>å½“ä½¿ç”¨åŸºäºåœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œåå°ä»»åŠ¡çš„å¤„ç†æ–¹å¼æœ‰æ‰€ä¸åŒã€‚åœ¨åŸºäºÂ UIApplicationDelegateÂ çš„åº”ç”¨ä¸­ï¼Œåå°ä»»åŠ¡é€šå¸¸åœ¨åº”ç”¨çº§åˆ«ç®¡ç†ã€‚è€Œåœ¨åŸºäºåœºæ™¯çš„åº”ç”¨ä¸­ï¼Œåå°ä»»åŠ¡å¯ä»¥ä¸ç‰¹å®šåœºæ™¯å…³è”ã€‚</p>
<p>å¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨Â UIApplication.beginBackgroundTask(withName:expirationHandler:)Â æ¥ç®¡ç†é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œåœ¨è¿ç§»åˆ°åœºæ™¯åï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨æ¯ä¸ªåœºæ™¯çš„åå°ä»»åŠ¡ç®¡ç†ã€‚ç„¶è€Œï¼ŒUIApplicationÂ çº§åˆ«çš„åå°ä»»åŠ¡ API åœ¨åŸºäºåœºæ™¯çš„åº”ç”¨ä¸­ä»ç„¶å¯ç”¨ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åº”ç”¨çº§åˆ«çš„ä»»åŠ¡ä¸­ä½¿ç”¨ã€‚</p>
<p>å¯¹äºç›´æ¥ä¸ç‰¹å®šåœºæ™¯å…³è”çš„ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼Œè¯¥åœºæ™¯æ­£åœ¨è¿›è¡Œçš„ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œè€ƒè™‘ä½¿ç”¨ä¸è¯¥åœºæ™¯å…³è”çš„åå°ä»»åŠ¡ã€‚è¿™æœ‰åŠ©äºç³»ç»Ÿæ›´æœ‰æ•ˆåœ°ç®¡ç†èµ„æºï¼Œå¹¶åœ¨åœºæ™¯å…³é—­æ—¶æä¾›æ›´æ¸…æ™°çš„ä»»åŠ¡æ¸…ç†æœºåˆ¶ã€‚</p>
<hr/>
<h3 data-id="heading-12">ç»“è®º</h3>
<p>è¿ç§»åˆ°åŸºäº UIKit åœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥ä½¿ä½ çš„åº”ç”¨æ”¯æŒå¤šçª—å£ç­‰ç°ä»£ iOS åŠŸèƒ½ã€‚æ— è®ºé€‰æ‹©åˆ†é˜¶æ®µè¿ç§»è¿˜æ˜¯ç›´æ¥è¿ç§»ï¼Œå…³é”®æ­¥éª¤éƒ½æ˜¯åˆ›å»ºä¸€ä¸ªÂ UISceneDelegateÂ ç±»ï¼Œé…ç½®Â Info.plistï¼Œå¹¶å°†ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å¤„ç†ä»Â UIApplicationDelegateÂ ç§»åŠ¨åˆ°Â UISceneDelegateã€‚è¿ç§»åï¼Œæ¯ä¸ªçª—å£å°†ç”±ç‹¬ç«‹çš„åœºæ™¯ç®¡ç†ï¼Œä»è€Œæé«˜æ¨¡å—åŒ–å¹¶ä¸ºç”¨æˆ·æä¾›æ›´å¼ºå¤§çš„å¤šä»»åŠ¡å¤„ç†ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[YOLO26ã€RF-DETRã€D-FINEâ€¦ 2026æ¨¡å‹æ··æˆ˜ï¼Œå·¥ç¨‹å¸ˆé€‰æ‹©å›°éš¾ç—‡æ€ä¹ˆç ´ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598734303175147572</link>    <guid>https://juejin.cn/post/7598734303175147572</guid>    <pubDate>2026-01-26T02:37:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598734303175147572" data-draft-id="7598836674629681186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="YOLO26ã€RF-DETRã€D-FINEâ€¦ 2026æ¨¡å‹æ··æˆ˜ï¼Œå·¥ç¨‹å¸ˆé€‰æ‹©å›°éš¾ç—‡æ€ä¹ˆç ´ï¼Ÿ"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-26T02:37:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            YOLO26ã€RF-DETRã€D-FINEâ€¦ 2026æ¨¡å‹æ··æˆ˜ï¼Œå·¥ç¨‹å¸ˆé€‰æ‹©å›°éš¾ç—‡æ€ä¹ˆç ´ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:37:15.000Z" title="Mon Jan 26 2026 02:37:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>YOLO26çš„äº®ç›¸ï¼Œä¸å…¶è¯´æ˜¯ä¸€æ¬¡å‡çº§ï¼Œä¸å¦‚è¯´æ˜¯ä¸€å£°å®£è¨€ï¼šé‚£ä¸ªæ‹¼å‚æ•°ã€å·è§„æ¨¡çš„æ—¶ä»£ï¼Œæ­£åœ¨æ‚„æ‚„é€€åœºã€‚ç°åœ¨è½®åˆ°â€œå°èº«æã€å¤§æ™ºæ…§ã€æ‹åŒ…å…¥ä½â€çš„æ¨¡å‹ç™»åœºäº†ã€‚ä½†æœ‰è¶£çš„æ˜¯ï¼Œæ“‚å°å¦ä¸€è¾¹ä¹Ÿçƒ­é—¹å¾—å¾ˆâ€”â€”2024åˆ°2025å¹´é—´ï¼Œå‡ ä½é£æ ¼è¿¥å¼‚çš„é€‰æ‰‹å·²æ¥è¿ç™»åœºï¼šRF-DETRã€LW-DETRã€D-FINEè¿™äº›â€œéYOLOç³»â€çš„é€‰æ‰‹ï¼Œæ­£å‡­ç€ä¸€æŠ€ä¹‹é•¿è¿…é€Ÿé€¼è¿‘ï¼Œç”šè‡³åœ¨æœ‰äº›èµ›é“ä¸Šå®Œæˆäº†è¶…è½¦ã€‚å†åŠ ä¸ŠYOLOå®¶æ—å†…éƒ¨è‡ªæˆ‘é©æ–°çš„YOLO11ï¼Œçœ¼ä¸‹è¿™ä¸ªå±€é¢ï¼Œå€’è®©ä¸å°‘å·¥ç¨‹å¸ˆçŠ¯äº†é€‰æ‹©å›°éš¾ç—‡ã€‚</p>
<blockquote>
<p><strong>YOLO26è¿˜é¦™ä¸é¦™ï¼Ÿå·¥ä¸šåœºæ™¯åˆ°åº•è¯¥æŠ¼æ³¨è°ï¼Ÿ</strong></p>
</blockquote>
<p>æˆ‘ä»¬ä¸å¦‚æŠŠè¿™å‡ ä½ç§»åˆ°ä¸€ä¸ªçœŸå®çš„è½¦é—´é‡Œï¼Œçœ‹çœ‹å®ƒä»¬å„è‡ªçš„æ‰‹è‰ºå¦‚ä½•ã€‚</p>
<h2 data-id="heading-0"><strong>è¿™æ˜¯ 5 æ¡å®Œå…¨ä¸åŒçš„æŠ€æœ¯è·¯çº¿</strong></h2>
<p>åœ¨å¯¹æ¯”æ€§èƒ½ä¹‹å‰ï¼Œå¿…é¡»å…ˆæ˜ç¡®ä¸€ä»¶äº‹ï¼šè¿™ 5 ä¸ªæ¨¡å‹ï¼Œè§£å†³é—®é¢˜çš„æ€è·¯æœ¬è´¨ä¸åŒã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abafa53c65a94fc8956e4f517cd1909e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999835&amp;x-signature=vpobHvQ44awiauGjzCt9RnraiCQ%3D" alt="screenshot_2026-01-23_13-52-20.png" loading="lazy"/></p>
<p>ä¹Ÿæ­£å› ä¸ºè·¯çº¿ä¸åŒï¼Œå®ƒä»¬çš„<strong>æ€§èƒ½ä¼˜åŠ¿åœºæ™¯</strong>å®Œå…¨ä¸ä¸€æ ·ã€‚</p>
<h2 data-id="heading-1"><strong>YOLO26ï¼šæœ€æ–°çš„â€œå·¥ä¸šæ¨¡å‹</strong> <strong>â€</strong></h2>
<p>è¯¥æ€ä¹ˆå½¢å®¹YOLO26å‘¢ï¼Ÿå®ƒä¸åƒä»è®ºæ–‡é‡Œèµ°å‡ºæ¥çš„ï¼Œæ›´åƒä»ç”Ÿäº§çº¿ä¸Šé•¿å‡ºæ¥çš„ã€‚</p>
<p>å®ƒçš„æ”¹å˜å¾ˆåŠ¡å®ï¼šç»“æ„å˜å¾—æ›´å¹²å‡€ã€æ›´æ¨¡å—åŒ–ï¼Œå‰ªæ‰äº†é‚£äº›ææè”“è”“ã€‚è¿™ä¹ˆåšçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼Œè°ƒè¯•èµ·æ¥å¿ƒé‡Œæœ‰åº•ï¼Œéƒ¨ç½²èµ·æ¥ä¹Ÿå°‘æŠ˜è…¾ã€‚å®ƒæ²¡æœ‰è·Ÿé£å»å †ç Œåºå¤§çš„æ³¨æ„åŠ›æœºåˆ¶ï¼Œåè€Œèšç„¦åœ¨ <strong>â€œå¦‚ä½•æ›´æœ‰æ•ˆåœ°åˆ©ç”¨ç‰¹å¾â€</strong> ä¸Šâ€”â€”å±€éƒ¨æ„ŸçŸ¥æ­é…è½»é‡çº§çš„æ³¨æ„åŠ›ï¼Œåœ¨å·¥ä¸šå¸¸è§çš„ç¼ºé™·æ£€æµ‹ã€è§„åˆ™ç‰©ä½“è¯†åˆ«ä¸Šï¼Œè¡¨ç°å¾—å‡ºå¥‡ç¨³å®šã€‚</p>
<p>å½“ç„¶ï¼Œå®ƒçš„è€æœ¬è¡Œä¾ç„¶æ‰å®ï¼šæ¨ç†é€Ÿåº¦ã€å¯¹TensorRTå’ŒONNXçš„å‹å¥½åº¦ï¼Œä»¥åŠåœ¨è¾¹ç¼˜è®¾å¤‡ä¸Šé‚£ä»½ä»å®¹ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fa41a74cfda4790a4c8804cd2822401~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999835&amp;x-signature=vpJHwV9DqqtoXDYsSnqLK%2FfqMhI%3D" alt="Ultralytics-YOLO26-Benchmark.jpg" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>YOLO11ï¼šå®¶æ—é‡Œçš„â€œé©æ–°è€…â€ä¸â€œæ™®åŠè€…â€</strong></h2>
<p>å¾ˆå¤šäººè¯¯ä»¥ä¸ºYOLO11æ˜¯YOLO26çš„ç®€ç‰ˆæˆ–å‰èº«ï¼Œå…¶å®ä¸ç„¶ã€‚å°¤å…¶åœ¨ç½‘ç»œç»“æ„é‡ç»„ä¸ŠèŠ±äº†å¤§åŠ›æ°”ï¼Œå¯¹Neckéƒ¨åˆ†åŠ¨äº†ä¸å°çš„æ‰‹æœ¯ã€‚æœ‰æ„æ€çš„æ˜¯ï¼Œå®ƒè¯æ˜äº† <strong>â€œæ›´å°â€ä¹Ÿèƒ½â€œæ›´å¼ºâ€</strong> â€”â€”æ¯”å¦‚YOLO11-Mç‰ˆæœ¬ï¼Œå‚æ•°æ¯”v8å‡å°‘äº†è¶…è¿‡äº”åˆ†ä¹‹ä¸€ï¼Œç²¾åº¦å´ä¸é™åå‡ã€‚</p>
<p>è®ºæ–‡æŒ‡æ ‡ä¸Šï¼Œå®ƒçš„è¡¨ç°å¯åœˆå¯ç‚¹ã€‚å¹¿æ³›çš„ç¡¬ä»¶å…¼å®¹æ€§ï¼Œè®©å®ƒä»è¾¹ç¼˜è®¾å¤‡åˆ°äº‘ç«¯GPUéƒ½èƒ½å¿«é€Ÿé€‚é…ã€‚ä½†æ®ä¸€äº›å·¥ç¨‹å¸ˆåé¦ˆï¼Œä¸€æ—¦æ”¾åˆ°çœŸå®çš„å·¥ä¸šç¯å¢ƒé‡Œï¼Œé¢å¯¹é‚£äº›ä¸å¯é¿å…çš„å™ªå£°ã€æ•°æ®åç§»ï¼Œå®ƒçš„ç¨³å®šæ€§ä¼¼ä¹å°±é€Šè‰²äº†åŠåˆ†ã€‚æ‰€ä»¥ä¸å¦¨è¿™ä¹ˆçœ‹ï¼šYOLO11æ¢ç´¢å¹¶è¯æ˜äº†ç»“æ„ä¼˜åŒ–çš„æ½œåŠ›ï¼Œè€ŒYOLO26åˆ™åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒæŠŠâ€œç¨³â€å­—è¯€æ‰“ç£¨å¾—æ›´é€å½»ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57d33489eb8d4a9d861921f1573c52e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999835&amp;x-signature=F2MKRECGVmlaToyqkLPdCm83WXs%3D" alt="280f752fa8984fa98bacf4840c20d3dd.png" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>Transformeré˜µè¥çš„â€œåŠ¡å®æ´¾â€</strong></h2>
<p>å…ˆè¯´è¯´<strong>LW-DETR</strong>ã€‚æ€è·¯å¾ˆæ¸…æ™°ï¼šæŠŠVision Transformerï¼ˆViTï¼‰çš„ç‰¹å¾æå–èƒ½åŠ›ï¼Œä¸DETRçš„é«˜æ•ˆæ£€æµ‹æ¡†æ¶èåˆèµ·æ¥ã€‚é€šè¿‡å›¾åƒåˆ†å—å’Œå¤šå°ºåº¦ç‰¹å¾èåˆï¼Œå®ƒåœ¨å½“æ—¶å®ç°äº†ç²¾åº¦ä¸é€Ÿåº¦å¯¹YOLO11çš„åŒé‡è¶…è¶Šã€‚å¯ä»¥è¯´ï¼Œå®ƒæ˜¯Transformeré˜µè¥å‘æ•ˆç‡åšå‡ºçš„ç¬¬ä¸€æ¬¡é†’ç›®å¦¥åï¼Œè¯•å›¾åœ¨ä¿æŒæ¶æ„ä¼˜é›…çš„åŒæ—¶ï¼Œä¹Ÿèƒ½è·‘å¾—å¿«ä¸€äº›ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97f93b58261643018cec292fe8198f21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999835&amp;x-signature=RqSNdDhucPOj6CUtFbLWqjI5Uw0%3D" alt="92c834252e71421eabac20e66f840f5a.png" loading="lazy"/></p>
<p>è€Œ<strong>RF-DETR</strong>ï¼Œå®ƒç»ˆäºå¤§è§„æ¨¡è§£å†³äº†ä¼ ç»ŸDETRâ€œè®­ç»ƒéš¾ã€æ”¶æ•›æ…¢ã€éƒ¨ç½²é‡â€çš„ç—¼ç–¾ã€‚é€šè¿‡ç‰¹å¾é‡æ’å’Œé™ä½å¯¹Queryçš„ä¾èµ–ï¼Œå®ƒåœ¨å¤æ‚åœºæ™¯å’Œå¤šç±»åˆ«æ£€æµ‹ä¸Šï¼Œæ•ˆæœç¡®å®äº®çœ¼ã€‚æ›´å¼•äººæ³¨ç›®çš„æ˜¯ï¼Œå®ƒç›´æ¥æ‰“åŒ…äº†åˆ†å‰²ã€åˆ†ç±»å’Œæ£€æµ‹ä¸‰å¤§ä»»åŠ¡èƒ½åŠ›ï¼Œå¹¶ä¸”åœ¨è·¨é¢†åŸŸæ³›åŒ–æµ‹è¯•ä¸­è¡¨ç°çªå‡ºã€‚æ¨¡å‹æœ¬èº«ä¹Ÿè¶³å¤Ÿç´§å‡‘ï¼Œæ”¯æŒè¾¹ç¼˜éƒ¨ç½²ã€‚ä½†åŠ¡å®åœ°è¯´ï¼Œå®ƒçš„è®­ç»ƒæˆæœ¬å’Œç®—åŠ›èƒƒå£ä¾ç„¶æ¯”YOLOç³»å¤§ï¼Œæ›´åƒæ˜¯ä¸€ä½èƒ½åŠ›å…¨é¢ä½†èº«ä»·ä¹Ÿæ›´é«˜çš„â€œç‰¹ç§å…µâ€ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c5c5fcfd3f54402b455e575d9bd0cb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999835&amp;x-signature=TVV0%2FVZzfu2DoXUYFJhE3iIvgnY%3D" alt="screenshot_2026-01-23_14-58-59.png" loading="lazy"/></p>
<h2 data-id="heading-4"><strong>D-FINEï¼šæ›²é«˜å’Œå¯¡çš„â€œç²¾åº¦è‰ºæœ¯å®¶â€</strong></h2>
<p>å¦‚æœåªçœ‹å­¦æœ¯æ¦œå•ï¼Œ2024å¹´å‘å¸ƒçš„D-FINEçš„æˆç»©å•è¶³ä»¥è®©äººå¿ƒåŠ¨ã€‚å®ƒå¼•å…¥äº†ä¸€ä¸ªå«â€œç»†ç²’åº¦åˆ†å¸ƒç»†åŒ–â€çš„æœºåˆ¶ï¼Œåƒæ˜¯å¯¹è¾¹ç•Œæ¡†æ¦‚ç‡åˆ†å¸ƒè¿›è¡Œç²¾é›•ç»†ç¢çš„è¿­ä»£ï¼Œæ‰€ä»¥åœ¨å°ç›®æ ‡ã€å¯†é›†é‡å ç›®æ ‡æ£€æµ‹ä¸Šä¼˜åŠ¿æ˜æ˜¾ã€‚æ¨¡å‹æœ¬èº«ä¹Ÿå¾ˆè½»å¿«ï¼Œå“åº”è¿…é€Ÿï¼Œå¬èµ·æ¥ç®€ç›´æ˜¯å¯¼èˆªã€å†³ç­–ç­‰å®æ—¶åœºæ™¯çš„å®Œç¾äººé€‰ã€‚</p>
<p>ä½†é—®é¢˜æ°æ°åœ¨äºï¼Œç†æƒ³çš„å®éªŒå®¤æ•°æ®é›†ï¼Œåœ¨å·¥å‚é‡Œå‡ ä¹æ˜¯å¥¢ä¾ˆå“ã€‚å®é™…åº”ç”¨ä¸­ï¼Œæ ‡æ³¨çš„å™ªå£°ã€æ³¢åŠ¨çš„æ¨ç†å»¶è¿Ÿã€å¤æ‚çš„éƒ¨ç½²é“¾æ¡ï¼Œéƒ½å¾ˆå®¹æ˜“è®©å®ƒâ€œæ°´åœŸä¸æœâ€ã€‚å®ƒæ˜¯ä¸€ä½æŒ‘å‰”çš„ã€è¿½æ±‚æè‡´ç²¾åº¦çš„è‰ºæœ¯å®¶ï¼Œéœ€è¦å®Œç¾çš„èˆå°ï¼Œè€Œå˜ˆæ‚çš„å·¥ä¸šç°åœºï¼Œå¾€å¾€ç»™ä¸äº†è¿™ä»½å®Œç¾ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/010bd90491e94298b714f5d63f08171a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999835&amp;x-signature=9L83XTc6CDBKe2jXuCr%2Bdnlbwe8%3D" alt="fdr-1.jpg" loading="lazy"/></p>
<h2 data-id="heading-5"><strong>æ¨¡å‹æ£€æµ‹æ€§èƒ½å¯¹ç…§è¡¨ï¼ˆåŸºäº COCO æ•°æ®é›†ï¼‰</strong></h2>
<ul>
<li><strong>mAP50:95</strong>â€”Â COCOÂ ç»¼åˆå¹³å‡ç²¾åº¦æŒ‡æ ‡ï¼ˆ50-95 IoUï¼‰ï¼Œå¸¸ç”¨æ¥è¡¡é‡æ£€æµ‹è´¨é‡ã€‚</li>
<li><strong>æ¨ç†å»¶è¿Ÿï¼ˆms/imgï¼‰</strong> Â â€” æ¨ç†å»¶è¿Ÿï¼ˆTensorRT FP16 on NVIDIA T4Â çº¦æŸï¼‰ã€‚</li>
<li><strong>å‚æ•°é‡</strong> â€” æ¨¡å‹å‚æ•°è§„æ¨¡ï¼ˆç™¾ä¸‡ï¼‰ï¼Œå½±å“å­˜å‚¨å’Œéƒ¨ç½²æˆæœ¬ã€‚</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10f2b1e7b4fe4cc4a966608bcd3310e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999835&amp;x-signature=kh6UXyqs%2BWGFLAOzDVT7fQ%2F1B%2Fc%3D" alt="screenshot_2026-01-23_14-20-47.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>æœ€é«˜ç²¾åº¦ï¼š</strong> æ¨¡å‹ç²¾åº¦ top3 å‡ºç°åœ¨ YOLO26x (~57.5%)ã€D-FINE-Medium (~55.1%)ã€YOLO26l (~55.0%)ã€‚</p>
<p>å…¶ä¸­ YOLO26x åœ¨ç²¾åº¦ä¸Šæœ‰ä¼˜åŠ¿ï¼ŒåŒæ—¶ä¾æ—§ä¿æŒç›¸å¯¹å¯æ§çš„å»¶è¿Ÿã€‚</p>
</li>
</ul>

<ul>
<li>
<p><strong>æœ€ä½³æ•ˆç‡é€‰æ‹©ï¼š</strong> LW-DETR-Tiny å’Œ YOLO26n å»¶è¿Ÿæä½ï¼ˆ&lt;2msï¼‰ï¼Œé€‚åˆæé™å®æ—¶åœºæ™¯ã€‚</p>
<p>RF-DETR-Nano åœ¨ latency ä¸ç²¾åº¦å¹³è¡¡ä¸Šè¡¨ç°ä¼˜ç§€ï¼ˆ48.4% mAP / ~2.3msï¼‰ã€‚</p>
</li>
</ul>

<ul>
<li>
<p>**å‚æ•°è§„æ¨¡ï¼š**YOLO ç³»åˆ—ï¼ˆå°¤å…¶ n/s è§„æ¨¡ï¼‰é€šå¸¸å‚æ•°æ›´å°‘ï¼ˆè½»é‡çº§ï¼‰ï¼Œä¾¿äºè¾¹ç¼˜éƒ¨ç½²ã€‚</p>
<p>Transformer æ ¸å¿ƒæ¨¡å‹ï¼ˆå¦‚ RF-DETRï¼‰å°½ç®¡å‚æ•°æ›´å¤§ï¼Œä½†åœ¨æ³›åŒ–èƒ½åŠ›ä¸Šå…·æœ‰æ½œåŠ›ã€‚</p>
</li>
</ul>
<h2 data-id="heading-6"><strong>æ€»ç»“</strong></h2>
<p>è¯´åˆ°åº•ï¼Œå·¥å‚çš„è€ƒå·ä¸Šåªæœ‰ä¸‰é“é¢˜ï¼š<strong>èƒ½ä¸èƒ½ç¨³å®šåœ°è·‘èµ·æ¥ï¼Ÿèƒ½ä¸èƒ½æ§åˆ¶ä½æˆæœ¬ï¼Ÿèƒ½ä¸èƒ½å¤§è§„æ¨¡é“ºå¼€ï¼Ÿ</strong></p>
<p>ç›¸è¾ƒäºYOLO11åœ¨ç¨³å®šæ€§ä¸Šå¶å°”çš„æ³¢åŠ¨ï¼Œæˆ–æ˜¯RF-DETRä»¬å¯¹ç®—åŠ›ç¯å¢ƒæ›´é«˜çš„è¦æ±‚ï¼ŒYOLO26æ‰€è¿½æ±‚çš„ï¼Œæ­£æ˜¯ä¸€ç§â€œæ›´ä½å»¶è¿Ÿã€æ›´å¹¿æ”¯æŒã€ä¸å¦¥åç²¾åº¦â€çš„å®ç”¨ä¸»ä¹‰å“²å­¦ã€‚</p>
<p>è¿™ä¸æ„å‘³ç€å…¶ä»–æ¨¡å‹æ²¡æœ‰ä»·å€¼ï¼Œæ°æ°ç›¸åï¼Œæ­£æ˜¯YOLO11ä»¬çš„æ¢ç´¢ã€RF-DETRä»¬çš„çªç ´ï¼Œå…±åŒæ¨åŠ¨ç€æ•´ä¸ªé¢†åŸŸå‘å‰ã€‚ä½†åœ¨2026å¹´è¿™ä¸ªèŠ‚ç‚¹ï¼Œå½“è®¡ç®—æœºè§†è§‰æŠ€æœ¯ç–¯ç‹‚æ¶Œå…¥åƒè¡Œç™¾ä¸šï¼Œé‚£äº›éœ€è¦çœŸæ­£è½åœ°ã€åˆ›é€ ä»·å€¼çš„åœºæ™¯ï¼Œæˆ–è®¸æ›´éœ€è¦ä¸€ä¸ªåƒYOLO26è¿™æ ·æ‡‚å¾—â€œè¿‡æ—¥å­â€çš„ä¼™ä¼´ã€‚å®ƒå¯èƒ½ä¸ä¼šæ˜¯æœ€å¸¸å‡ºç°åœ¨è®ºæ–‡æ ‡é¢˜é‡Œçš„é‚£ä¸ªæ˜æ˜Ÿï¼Œä½†å¾ˆæœ‰æœºä¼šï¼Œæˆä¸ºç”Ÿäº§çº¿å’Œç»ˆç«¯è®¾å¤‡é‡Œï¼Œé‚£ä¸ªæ²‰é»˜å´ä¸å¯æˆ–ç¼ºçš„åŸºçŸ³ã€‚</p>
<p><strong>ç†è®ºåˆ†æçš„ç»ˆç‚¹ï¼Œæ­£æ˜¯å·¥ç¨‹å®è·µçš„èµ·ç‚¹ã€‚</strong> Â ä»¥ä¸Šæ‰€æœ‰æ¨¡å‹çš„ç†è®ºå¯¹æ¯”ã€æ€§èƒ½æ•°æ®ï¼Œæœ€ç»ˆéƒ½éœ€è¦åœ¨ä½ è‡ªå·±çš„æ•°æ®é›†å’Œéƒ¨ç½²ç¯å¢ƒä¸­è¿›è¡ŒéªŒè¯ã€‚è¿™æ­£æ˜¯ <strong>Coovally</strong> è¿™æ ·çš„å¹³å°å¯ä»¥å¤§æ˜¾èº«æ‰‹çš„åœ°æ–¹ã€‚å®ƒä¸ºä½ æä¾›äº†ä¸€ä¸ªä»ç®—æ³•åˆ°è½åœ°çš„ä¸€ç«™å¼å·¥å…·ç®±ï¼š</p>
<ul>
<li><strong>å¿«é€ŸéªŒè¯ï¼š</strong> æ— éœ€å¤æ‚ç¯å¢ƒé…ç½®ï¼Œå³å¯åœ¨å¹³å°ä¸Šè·å–ã€å¯¼å…¥å¹¶å¿«é€Ÿæµ‹è¯•ä¸Šè¿°å„ç³»åˆ—æ¨¡å‹ï¼Œç”¨ä½ çš„çœŸå®æ•°æ®éªŒè¯å®ƒä»¬çš„è¡¨ç°ï¼Œå°†ç†è®ºæ•°æ®è½¬åŒ–ä¸ºå®é™…å†³ç­–ä¾æ®ã€‚</li>
<li><strong>é«˜æ•ˆè®­ç»ƒä¸è°ƒä¼˜ï¼š</strong> æ— è®ºæ˜¯YOLOç³»åˆ—çš„å·¥ç¨‹åŒ–æ”¹è¿›ï¼Œè¿˜æ˜¯Transformeræ¨¡å‹çš„å¤æ‚è°ƒå‚ï¼Œå¹³å°å†…ç½®çš„è‡ªåŠ¨åŒ–æµç¨‹å’Œèµ„æºç®¡ç†éƒ½èƒ½å¤§å¹…é™ä½å®éªŒæˆæœ¬ï¼ŒåŠ©ä½ æ‰¾åˆ°æœ€é€‚åˆå½“å‰åœºæ™¯çš„â€œæœ€ä¼˜è§£â€ã€‚</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8946aaffeaa4d70add9161f8aab4cba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999835&amp;x-signature=g1%2FLw7Hpoh1eTD5NLIBJ4vh%2F368%3D" alt="Coovallyæ“ä½œåŠ¨å›¾.gif" loading="lazy"/></p>
<p>Coovallyå¹³å°ä¸ä»…æä¾›æ¨¡å‹èµ„æºï¼Œè¿˜å¯ä»¥å¸®åŠ©ä½ æä¾›<strong>AIè§£å†³æ–¹æ¡ˆ</strong>ï¼Œå¯ä»¥æ‰«æäºŒç»´ç ï¼Œæˆ‘ä»¬æ¥ç»™ä½ æä¾›è§£å†³æ–¹æ¡ˆï¼ï¼</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df7fca2c045e4a4ea49fefee64bdce93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999835&amp;x-signature=uN3%2FjXxiCDx%2BDlUszQ58PHiJP4U%3D" alt="å°åŠ©æ‰‹äºŒç»´ç .png" loading="lazy"/></p>
<p>ç‚¹å‡»<strong>é˜…è¯»åŸæ–‡</strong>ï¼Œå³å¯ä½“éªŒCoovallyå¹³å°ï¼</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ æ­£åœ¨æ“ç›˜å·¥ä¸šè§†è§‰ã€å·¡æ£€ç›‘æ§æˆ–ç¼ºé™·æ£€æµ‹è¿™ç±»é¡¹ç›®ï¼Œæˆ‘çš„å»ºè®®å¯èƒ½ä¼šæœ‰ç‚¹ä¿å®ˆï¼šå…ˆä»YOLO26å¼€å§‹ï¼ŒæŠŠæµç¨‹è·‘é€šã€åœºæ™¯åƒé€ã€‚ç­‰åˆ°ç¡®æœ‰ä½™åŠ›æ—¶ï¼Œå†å»æ–Ÿé…Œï¼Œæ˜¯å¦éœ€è¦é‚£ä¸€ç‚¹é¢å¤–çš„â€œæŠ˜è…¾â€æ¥æ¢å–è¾¹é™…ä¸Šçš„æå‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«æ··ä¹±ï¼šAgent Skills å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7598921649888854043</link>    <guid>https://juejin.cn/post/7598921649888854043</guid>    <pubDate>2026-01-25T16:33:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598921649888854043" data-draft-id="7599094262591913994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«æ··ä¹±ï¼šAgent Skills å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-25T16:33:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç±³ä¸€å¤š"/> <meta itemprop="url" content="https://juejin.cn/user/3825956198025239"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«æ··ä¹±ï¼šAgent Skills å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956198025239/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç±³ä¸€å¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T16:33:22.000Z" title="Sun Jan 25 2026 16:33:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦æ›¾è¢« Agent çš„â€œä¸å¬è¯â€ã€â€œæ‰§è¡Œä¹±â€å’Œâ€œå·¥å…·è’â€æå¾—ç„¦å¤´çƒ‚é¢ï¼Ÿä½ æ˜¯å¦ä¹Ÿç»å†è¿‡æˆ–è€…æ­£åœ¨ç»å†è¿™æ ·çš„â€œ Agent è°ƒæ•™â€å´©æºƒæ—¶åˆ»ï¼šè§„åˆ™å¤±æ•ˆï¼Œåœ¨ Agent.md é‡Œå†™ä¸‹åƒè¨€ä¸‡è¯­ï¼ŒAgent å´è§†è‹¥æ— ç¹ï¼›æ‰§è¡Œå¤±æ§ï¼Œç²¾å¿ƒæ‰“ç£¨äº†æ— æ•° Promptï¼Œæ‰§è¡Œèµ·æ¥ä¾æ—§åƒæ— å¤´è‹è‡ï¼›å·¥å…·è¿·å¤±ï¼Œæ˜æ˜é›†æˆäº†å¼ºå¤§çš„ MCP å·¥å…·åº“ï¼ŒAgent å´ä¸¤æ‰‹ä¸€æ‘Šè¯´â€œæ²¡å·¥å…·â€ã€‚</p>
<p>å¦‚æœè¿™äº›åœºæ™¯è®©ä½ æ„ŸåŒèº«å—ï¼Œåˆ«æ€¥ç€æ”¾å¼ƒã€‚ç»ˆç»“è¿™åœºæ··ä¹±çš„ç­”æ¡ˆï¼Œå¯èƒ½å°±æ˜¯ Skillsã€‚</p>
<h3 data-id="heading-0">æ ¸å¿ƒäº®ç‚¹ï¼šä»â€œèŠå¤©æœºå™¨äººâ€åˆ°â€œå¾—åŠ›å¹²å°†â€çš„è¿›åŒ–</h3>
<p>Agent æ­£åœ¨ç»å†ä¸€åœºè¿›åŒ–ï¼Œè€Œ Skills æ­£æ˜¯å…³é”®å‚¬åŒ–å‰‚ã€‚æœ¬æ–‡å°†å¸¦ä½ ä¸€æ–‡å¼„æ‡‚ Skills â€”â€”è¿™ä¸ªè®© Agent å˜å¾—å¯é ã€å¯æ§ã€å¯å¤ç”¨çš„â€œé«˜çº§æŠ€èƒ½åŒ…â€ã€‚æ— è®ºä½ æ˜¯å¼€å‘è€…è¿˜æ˜¯æ™®é€šç”¨æˆ·ï¼Œéƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°è®©ä½ çš„ Agent â€œå¼€çªâ€çš„ç§˜è¯€ã€‚</p>
<p>å¦‚æœä½ æƒ³æ›´é«˜æ•ˆåœ°ä½“éªŒé¡¶çº§æ¨¡å‹çš„èƒ½åŠ›ï¼Œæ¨èè¯•è¯• <a href="https://link.juejin.cn?target=https%3A%2F%2Fnunu.chat%2F" target="_blank" title="https://nunu.chat/" ref="nofollow noopener noreferrer">nunu.chat</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤šæ¨¡å‹èšåˆçš„ AI chat å¹³å°ï¼Œæ”¯æŒå›½å†…ç›´è¿è®¿é—®æµ·å¤–é¡¶çº§å¤§æ¨¡å‹ï¼Œè¿˜æœ‰å¤§é‡å…è´¹é¢åº¦ä¾›ä½ è°ƒè¯•è‡ªå·±çš„ Skillsã€‚</p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ Skillsï¼Ÿ</h3>
<p>â€œSkillsâ€ è¿™ä¸ªæ¦‚å¿µæœ€æ—©ç”± Anthropic å…¬å¸æå‡ºï¼Œä½œä¸ºå…¶å¤§æ¨¡å‹ Claude çš„ä¸€ç§èƒ½åŠ›æ‰©å±•æœºåˆ¶ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå…è®¸ç”¨æˆ·ä¸º Claude æ·»åŠ è‡ªå®šä¹‰çš„åŠŸèƒ½å’Œå·¥å…·ã€‚éšç€è¿™å¥—åšæ³•è¶Šæ¥è¶Šæˆç†Ÿï¼Œå¹¶è¢«ç¤¾åŒºå¹¿æ³›æ¥å—ï¼ŒSkills å¦‚ä»Šå·²æˆä¸ºå¤§å¤šæ•° Agent å¼€å‘å·¥å…·å’Œ IDE éƒ½æ”¯æŒçš„ä¸€ç§æ ‡å‡†æ‰©å±•è§„èŒƒã€‚</p>
<p>ä¸€ä¸ª Skills é€šå¸¸ä»¥ä¸€ä¸ªæ–‡ä»¶å¤¹çš„å½¢å¼å­˜åœ¨ï¼Œé‡Œé¢ä¸»è¦è£…ç€ä¸‰æ ·ä¸œè¥¿ï¼šä¸€ä»½è¯´æ˜ä¹¦ï¼ˆSKILL.mdï¼‰ã€ä¸€å †æ“ä½œè„šæœ¬ï¼ˆScriptï¼‰ã€ä»¥åŠä¸€äº›å‚è€ƒèµ„æ–™ï¼ˆReferenceï¼‰ã€‚ä½ å¯ä»¥æŠŠä¸€ä¸ª Skill æƒ³è±¡æˆä¸€ä¸ªæ‰“åŒ…å¥½çš„â€œæŠ€èƒ½åŒ…â€ã€‚å®ƒæŠŠå®ŒæˆæŸä¸ªç‰¹å®šä»»åŠ¡æ‰€éœ€çš„é¢†åŸŸçŸ¥è¯†ã€æ“ä½œæµç¨‹ã€è¦ç”¨åˆ°çš„å·¥å…·ã€ä»¥åŠæœ€ä½³å®è·µå…¨éƒ½å°è£…åœ¨äº†ä¸€èµ·ã€‚</p>
<p><img src="https://pic-out.zhimg.com/v2-7cc6d1e7917f64645790e06240112071~resize:1440:q75.png?animatedImageAutoPlay=false&amp;animatedImagePlayCount=1&amp;auth_key=1769358655-0-0-3c95a9c19a34c7a8c68bb0736e4c6381&amp;bizSceneCode=article_draft&amp;expiration=1769358655&amp;incremental=false&amp;mid=6c28d1233b683a4d5e58b0046d609ef1&amp;overTime=60&amp;precoder=false&amp;protocol=v2&amp;retryCount=3&amp;sampling=false&amp;sceneCode=editor_copy_outbound&amp;source=bfcaadb1" alt="" loading="lazy"/></p>
<p>å½“ AI é¢å¯¹ç›¸åº”è¯·æ±‚æ—¶ï¼Œå°±èƒ½åƒä¸€ä½ç»éªŒä¸°å¯Œçš„ä¸“å®¶é‚£æ ·ï¼Œæœ‰æ¡ä¸ç´Šåœ°è‡ªä¸»æ‰§è¡Œã€‚</p>
<h3 data-id="heading-2">Skill åŸç†ä»‹ç»ï¼šæ¸è¿›å¼åŠ è½½</h3>
<p>ğŸ“š å®˜æ–¹è§£é‡Šï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.claude.com%2Fdocs%2Fen%2Fagents-and-tools%2Fagent-skills%2Foverview" target="_blank" title="https://platform.claude.com/docs/en/agents-and-tools/agent-skills/overview" ref="nofollow noopener noreferrer">platform.claude.com/docs/en/ageâ€¦</a></p>
<p>Skill çš„æ¶æ„åŸç†åœ¨äºå…¶å·§å¦™çš„ä¸‰å±‚åˆ†çº§åŠ è½½æœºåˆ¶ï¼Œè¿è¡Œåœ¨ä¸€ä¸ªå…è®¸è®¿é—®æ–‡ä»¶ç³»ç»Ÿå’Œæ‰§è¡Œ bash å‘½ä»¤çš„æ²™ç›’ç¯å¢ƒé‡Œï¼š</p>
<p><img src="https://pic-out.zhimg.com/v2-0244bf9063fd7fc381d5152f1133b96f~resize:1440:q75.png?animatedImageAutoPlay=false&amp;animatedImagePlayCount=1&amp;auth_key=1769358655-0-0-c508a09bb21ad4eaf68a25711f635213&amp;bizSceneCode=article_draft&amp;expiration=1769358655&amp;incremental=false&amp;mid=6c28d1233b683a4d5e58b0046d609ef1&amp;overTime=60&amp;precoder=false&amp;protocol=v2&amp;retryCount=3&amp;sampling=false&amp;sceneCode=editor_copy_outbound&amp;source=bfcaadb1" alt="" loading="lazy"/></p>
<ul>
<li><strong>Level 1ï¼šå…ƒæ•°æ®ï¼ˆå§‹ç»ˆåŠ è½½ï¼‰</strong>ï¼šå°±åƒâ€œåç‰‡â€ï¼ŒåŒ…å«åç§°å’Œæè¿°ã€‚Claude å¯åŠ¨æ—¶ä¼šåŠ è½½æ‰€æœ‰å…ƒæ•°æ®ï¼Œå› ä¸ºå®ƒå¾ˆè½»é‡ï¼Œä¸ä¼šå æ»¡ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>Level 2ï¼šè¯´æ˜æ–‡æ¡£ï¼ˆè§¦å‘æ—¶åŠ è½½ï¼‰</strong>ï¼šSKILL.md æ–‡ä»¶çš„æ­£æ–‡ã€‚åªæœ‰ç”¨æˆ·è¯·æ±‚ä¸æè¿°ç›¸ç¬¦æ—¶ï¼Œæ‰ä¼šè¯»å–å¹¶åŠ è½½åˆ°ä¸Šä¸‹æ–‡ï¼ŒèŠ‚çœ Tokenã€‚</li>
<li><strong>Level 3ï¼šèµ„æºä¸ä»£ç ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰</strong>ï¼šåŒ…æ‹¬ FORMS.mdã€Python è„šæœ¬æˆ– API æ–‡æ¡£ã€‚è„šæœ¬ä»£ç æœ¬èº«ä¸è¿›å…¥ä¸Šä¸‹æ–‡ï¼Œå‡ ä¹ä¸å¢åŠ é¢å¤–æˆæœ¬ã€‚</li>
</ul>
<p><strong>Skills çš„è°ƒç”¨é€»è¾‘ï¼š</strong> 1. <strong>æ„å›¾åŒ¹é…</strong>ï¼šAgent æ‰«ä¸€çœ¼â€œåç‰‡å¤¹â€ï¼ˆå…ƒæ•°æ®ï¼‰ï¼Œå¯»æ‰¾æœ€åŒ¹é…çš„ä¸€å¼ ã€‚ 2. <strong>è¯»å–æ‰‹å†Œ</strong>ï¼šç¿»å¼€â€œæ“ä½œæ‰‹å†Œâ€ï¼ˆSKILL.mdï¼‰ï¼Œç ”ç©¶æ‰§è¡Œæ­¥éª¤ã€‚ 3. <strong>æŒ‰éœ€æ‰§è¡Œ</strong>ï¼šä»â€œå·¥å…·ç®±â€æ‹¿å‡ºè„šæœ¬æˆ–å·¥å…·å¹²æ´»ã€‚ 4. <strong>åé¦ˆç»“æœ</strong>ï¼šæ±‡æŠ¥ç»“æœæˆ–è¯·æ•™å›°éš¾ã€‚</p>
<p><img src="https://pic-out.zhimg.com/v2-b1cfd05afa9368ee034884f1bf107ca9~resize:1440:q75.png?animatedImageAutoPlay=false&amp;animatedImagePlayCount=1&amp;auth_key=1769358655-0-0-28e554a75f86a9c6b8a9e6f9699a8906&amp;bizSceneCode=article_draft&amp;expiration=1769358655&amp;incremental=false&amp;mid=6c28d1233b683a4d5e58b0046d609ef1&amp;overTime=60&amp;precoder=false&amp;protocol=v2&amp;retryCount=3&amp;sampling=false&amp;sceneCode=editor_copy_outbound&amp;source=bfcaadb1" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">Skills vs. å…¶ä»–æ¦‚å¿µçš„åŒºåˆ«</h3>
<p>ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£ï¼Œæˆ‘ä»¬æŠŠå®ƒå’Œå¿«æ·æŒ‡ä»¤ï¼ˆCommandï¼‰å’ŒåŸå­å·¥å…·ï¼ˆMCPï¼‰åšå¯¹æ¯”ã€‚ç”¨ä¸€ä¸ªå¨æˆ¿çš„ä¾‹å­å°±å¾ˆå¥½æ‡‚äº†ã€‚</p>
<p><img src="https://pic-out.zhimg.com/v2-8de84d44f3536f4eb746dce9ffafbb64~resize:1440:q75.png?animatedImageAutoPlay=false&amp;animatedImagePlayCount=1&amp;auth_key=1769358655-0-0-8bc2997325c1523021ff073b387b5a7a&amp;bizSceneCode=article_draft&amp;expiration=1769358655&amp;incremental=false&amp;mid=6c28d1233b683a4d5e58b0046d609ef1&amp;overTime=60&amp;precoder=false&amp;protocol=v2&amp;retryCount=3&amp;sampling=false&amp;sceneCode=editor_copy_outbound&amp;source=bfcaadb1" alt="" loading="lazy"/></p>
<p>ğŸ“š å®˜æ–¹åšå®¢è§£é‡Šï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.com%2Fblog%2Fskills-explained" target="_blank" title="https://claude.com/blog/skills-explained" ref="nofollow noopener noreferrer">claude.com/blog/skillsâ€¦</a></p>
<h3 data-id="heading-4">å¦‚ä½•å†™å¥½ä¸€ä¸ªå¥½çš„ Skills</h3>
<p>ä»â€œèƒ½ç”¨â€åˆ°â€œå¥½ç”¨â€ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š * <strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong>ï¼šåšæŒå•ä¸€èŒè´£ï¼Œä¸“æ³¨äºè§£å†³ä¸€ä¸ªå…·ä½“é—®é¢˜ã€‚ * <strong>ç»™ä¾‹å­ï¼ˆFew-Shot Promptingï¼‰</strong>ï¼šç›´æ¥ç»™å‡ºæ¸…æ™°çš„è¾“å…¥è¾“å‡ºç¤ºä¾‹ï¼Œè¿™æ˜¯æœ€å…³é”®çš„ä¸€ç‚¹ã€‚ * <strong>ç«‹è§„çŸ©ï¼ˆStructured Instructionsï¼‰</strong>ï¼š1) å®šè§’è‰²ï¼›2) æ‹†æ­¥éª¤ï¼›3) ç”»çº¢çº¿ï¼ˆæ˜ç¡®ä¸èƒ½åšä»€ä¹ˆï¼‰ã€‚ * <strong>é€ æ¥å£ï¼ˆInterface Designï¼‰</strong>ï¼šæ˜ç¡®å®šä¹‰è¾“å…¥å‚æ•°å’Œè¾“å‡ºæ ¼å¼ï¼ˆå¦‚ JSONï¼‰ã€‚ * <strong>å‹¤å¤ç›˜ï¼ˆIterative Refinementï¼‰</strong>ï¼šæŠŠ Bad Case å˜æˆæ–°çš„è§„åˆ™æˆ–åä¾‹ã€‚</p>
<p>ğŸ“š å®˜æ–¹æœ€ä½³å®è·µæŒ‡å—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.claude.com%2Fdocs%2Fzh-CN%2Fagents-and-tools%2Fagent-skills%2Fbest-practices" target="_blank" title="https://platform.claude.com/docs/zh-CN/agents-and-tools/agent-skills/best-practices" ref="nofollow noopener noreferrer">platform.claude.com/docs/zh-CN/â€¦</a></p>
<h3 data-id="heading-5">ç¤¾åŒºèµ„æºä¸å®æˆ˜ï¼šåœ¨ TRAE ä¸­è½åœ°</h3>
<p><strong>ç¤¾åŒºçƒ­é—¨ Skills æ¨èï¼š</strong> ğŸ“š å®˜æ–¹ Skills ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills%25E3%2580%2582%25E5%25AD%25A6%25E4%25B9%25A0%25E5%25AE%2598%25E6%2596%25B9%25E4%25BB%2593%25E5%25BA%2593%25E5%258F%25AF%25E4%25BB%25A5%25E6%259C%2580%25E5%25BF%25AB%25E4%25BA%2586%25E8%25A7%25A3%25E6%259C%2580%25E4%25BD%25B3%25E5%25AE%259E%25E8%25B7%25B5%25E3%2580%2582" target="_blank" title="https://github.com/anthropics/skills%E3%80%82%E5%AD%A6%E4%B9%A0%E5%AE%98%E6%96%B9%E4%BB%93%E5%BA%93%E5%8F%AF%E4%BB%A5%E6%9C%80%E5%BF%AB%E4%BA%86%E8%A7%A3%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E3%80%82" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a></p>
<p><strong>å¦‚ä½•åœ¨ TRAE é‡Œå¿«é€Ÿä½¿ç”¨ï¼š</strong> 1. <strong>æ–¹å¼ä¸€ï¼šè®¾ç½®ä¸­ç›´æ¥åˆ›å»º</strong>ã€‚Cmd +/ Ctrl + æ‰“å¼€è®¾ç½®ï¼Œæ‰¾åˆ°ã€Œè§„åˆ™æŠ€èƒ½ã€ï¼Œç‚¹å‡»ã€Œåˆ›å»ºã€ï¼Œå¡«å…¥åç§°ã€æè¿°å’Œä¸»ä½“ã€‚ 2. <strong>æ–¹å¼äºŒï¼šç›´æ¥è§£æ SKILL.md</strong>ã€‚åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å¢ <code>.trae/Skills/xxx</code> æ–‡ä»¶å¤¹ã€‚ 3. <strong>æ–¹å¼ä¸‰ï¼šåœ¨å¯¹è¯ä¸­åˆ›å»º</strong>ã€‚åˆ©ç”¨å†…ç½®çš„ Skills-creator ç›´æ¥è¦æ±‚ TRAE åˆ›å»ºã€‚</p>
<p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šåŠ è½½åï¼Œåœ¨å¯¹è¯æ¡†è¾“å…¥â€œå¸®æˆ‘è®¾è®¡ä¸€ä¸ªæœ‰ç§‘æŠ€æ„Ÿçš„ç™»å½•é¡µé¢â€æˆ–â€œå¸®æˆ‘æå– PDF è¡¨æ ¼â€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨ç›¸åº”æŠ€èƒ½ã€‚</p>
<h3 data-id="heading-6">å®è·µåœºæ™¯ä¸¾ä¾‹ï¼šåŸºäºé£ä¹¦æ–‡æ¡£çš„ Spec Coding</h3>
<p>é’ˆå¯¹å¼•è¨€ä¸­æåˆ°çš„è§„åˆ™å¤±æ•ˆé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤æ‚åœºæ™¯æ‹†åˆ†æˆç‹¬ç«‹æŠ€èƒ½ã€‚ <strong>ä»€ä¹ˆæ˜¯ Spec Codingï¼Ÿ</strong> æå€¡â€œå…ˆæ€è€ƒåè¡ŒåŠ¨â€ï¼Œé€šè¿‡å®šä¹‰éœ€æ±‚è§„èŒƒï¼ˆSpecificationï¼‰æ¨åŠ¨å¼€å‘ã€‚ <strong>åœºæ™¯åˆ†æ</strong>ï¼šæˆ‘ä»¬éœ€è¦â€œå¤šè§’è‰²ä¸“å®¶ Skillsâ€ï¼ˆéœ€æ±‚åˆ†æã€æŠ€æœ¯è®¾è®¡ã€ä»»åŠ¡æ‹†è§£ï¼‰å’Œâ€œé£ä¹¦æ–‡æ¡£ä½¿ç”¨ Skillâ€ï¼ˆæ•™ä¼š Agent é£ä¹¦è¯­æ³•å’Œåä½œé€»è¾‘ï¼‰ï¼Œæœ€åé€šè¿‡â€œSpec Coding Skillâ€ç»Ÿç­¹å…¨å±€ï¼Œå®Œæˆå·¥å…·ä¸è§’è‰²çš„ç»„åˆè°ƒåº¦ã€‚</p>
<h3 data-id="heading-7">Q &amp; A | ä¸€äº›å¸¸è§é—®é¢˜</h3>
<ul>
<li><strong>ä¸ºä»€ä¹ˆä¸ç”Ÿæ•ˆï¼Ÿ</strong> åæœ‰å…«ä¹æ˜¯â€œåç‰‡â€ï¼ˆDescriptionï¼‰æ²¡å†™å¥½ï¼ŒAgent æ— æ³•åˆ¤æ–­ä½•æ—¶è¯¥ç”¨å®ƒã€‚</li>
<li><strong>å— LLM å½±å“å—ï¼Ÿ</strong> æœ‰ã€‚å¼ºæ¨¡å‹æ“…é•¿â€œæŒ‘é€‰å’Œç­–ç•¥â€ï¼Œè€Œ Skill å†³å®šäº†æ‰§è¡Œçš„â€œæœ€ä½æ°´å¹³å’Œç¨³å®šæ€§â€ã€‚</li>
<li><strong>æ˜¯ä¸‡èƒ½çš„å—ï¼Ÿ</strong> ä¸æ˜¯ã€‚å®ƒä¸æ“…é•¿é«˜åº¦åˆ›é€ åŠ›ã€å®æ—¶åŠ¨æ€å†³ç­–æˆ–ç®€å•çš„çŸ¥è¯†é—®ç­”ã€‚</li>
<li><strong>å¯ä»¥ä¿®æ”¹ç¤¾åŒº Skill å—ï¼Ÿ</strong> å¼ºçƒˆå»ºè®® Fork å¹¶äºŒæ¬¡å¼€å‘ã€‚</li>
</ul>
<h3 data-id="heading-8">æ€»ç»“ä¸ç»“è¯­</h3>
<p>Skill çš„å‡ºç°è§£å†³äº† Agent è§„åˆ™å¤±æ•ˆã€æ‰§è¡Œå¤±æ§çš„é—®é¢˜ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼šç²¾å‡†è§£å†³ç—›ç‚¹ï¼ˆä¸‰çº§åŠ è½½å¹³è¡¡æ•ˆç‡ä¸æ·±åº¦ï¼‰ä»¥åŠç”Ÿæ€èµ‹èƒ½ã€‚å®ƒè®© AI ä»â€œæ ·æ ·æ‡‚ä¸€ç‚¹â€çš„é€šæ‰ï¼Œè¿›åŒ–ä¸ºâ€œäº‹äº‹åšå¾—å¥½â€çš„ä¸“å®¶åä½œä¼™ä¼´ã€‚</p>
<p>ä¸å¦¨ä»ä»Šå¤©å¼€å§‹ï¼Œå°è¯•å°†ä½ æœ€æ“…é•¿çš„é¢†åŸŸç»éªŒå°è£…æˆå¯å¤ç”¨çš„ Skillï¼Œè®© AI æˆä¸ºä½ å»¶ä¼¸ä¸“ä¸šä»·å€¼çš„æ”¾å¤§å™¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[æ›´æ–°è¿­ä»£ - 3] Nestjs åœ¨25å¹´åº•æ›´æ–°äº†å•¥ï¼Ÿï¼ˆbugä¿®å¤ç¯‡+åŠŸèƒ½å¢å¼ºç¯‡ï¼‰]]></title>    <link>https://juejin.cn/post/7598744870996492331</link>    <guid>https://juejin.cn/post/7598744870996492331</guid>    <pubDate>2026-01-26T02:39:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598744870996492331" data-draft-id="7584722109584064555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[æ›´æ–°è¿­ä»£ - 3] Nestjs åœ¨25å¹´åº•æ›´æ–°äº†å•¥ï¼Ÿï¼ˆbugä¿®å¤ç¯‡+åŠŸèƒ½å¢å¼ºç¯‡ï¼‰"/> <meta itemprop="keywords" content="åç«¯,Node.js,NestJS"/> <meta itemprop="datePublished" content="2026-01-26T02:39:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Joney_SLi"/> <meta itemprop="url" content="https://juejin.cn/user/870468942308733"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [æ›´æ–°è¿­ä»£ - 3] Nestjs åœ¨25å¹´åº•æ›´æ–°äº†å•¥ï¼Ÿï¼ˆbugä¿®å¤ç¯‡+åŠŸèƒ½å¢å¼ºç¯‡ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/870468942308733/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Joney_SLi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:39:35.000Z" title="Mon Jan 26 2026 02:39:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin:30px 0 10px;color:#cca152;position:relative;padding-left:50px;border-bottom:2px solid rgba(209,163,78,.6);padding-bottom:0}.markdown-body h1{font-size:30px}.markdown-body h1:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:80%;bottom:-10px;left:-2px}.markdown-body h2{font-size:24px}.markdown-body h2:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:70%;bottom:-15px;left:-1px}.markdown-body h3{font-size:18px}.markdown-body h3:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:60%;bottom:-19px;left:-2px}.markdown-body h4{font-size:16px;padding-left:0;border-bottom:1px solid rgba(209,163,78,.6)}.markdown-body h5{font-size:15px;padding-left:0}.markdown-body em{color:#cca152}.markdown-body del{text-decoration-color:#cca152;text-decoration-thickness:2px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:80%;margin:6px auto;box-shadow:0 6px 15px #8e8e8e;display:block;margin:20px auto!important;object-fit:contain;border-radius:8px}.markdown-body hr{border:none;border-top:2px solid #e0c9a1;margin-top:32px 0}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background:#f6efde;color:#b69454;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Mono,Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;background:#fef6e1;border-radius:4px;box-shadow:0 0 8px hsla(0,0%,47%,.45)}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAOCAMAAABaWb9VAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACHUExURUdwTMxCKdc8NvdYT/9hVyLJPABBAGubKNiIOv+/K+ytJBakH9aZG+5QR5VZDOBDPhmtJ8+VGuGjH/CwJR26MR6+NBq0LPW1KBmwKetNRfJUTONHP92fHuSmIeFEPhu3LR29M/BTS+mqIuqsI5qdHyLKPP++Kv9gVf9lW//KLSXXQCTQP//FLMVm5KQAAAAldFJOUwAlPPz7+woBBPu8Mzu+FlRRKmvnweeG+Wqg6mVNXmuc1OCbmjZJWF/9AAABKklEQVQoz3WS6XaCMBCFRzAM++KGsqhtDwES3//5OtmA2uP9A9zwzRoAgBC0QgQrdA68OZsDr229YGHoIEj7Pl0ZOgjKa5lYJ4Rd1vijn3nuD4Qurjmv48o6RFyfbGDnS6DeEXZfk5ZfuBhdPb9I87ECNMh1EFJKIU6agWzaa01NbmLkxznSmmObJBkkUxrERf3i+ftRiZi7ShPCYY64UhTx1AR5CDYoMXkOKEY7GmTcTzeD/FiER68DfSLgSRqEIBoB3P8h3x8RZhBXGJGusJdD6rfCBl0YqvZNkrV9zej2cWlfJWG6fRpyM41qYH+GTPPi2yFLQYC0Qybm5o96lW77kMbcrBKtgeWTsthVamNXFF4I6x0DTPuugsVRFyYpyxzWqNvHJwed8ws7QyP1UwjNjwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fef6e1}.markdown-body a{text-decoration:none;color:#d8ac5a;border-bottom:1px solid #d8ac5a}.markdown-body a:active,.markdown-body a:hover{color:#93753f;border-color:#93753f}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f4e8c7;border-collapse:collapse}.markdown-body thead{background:rgba(255,227,176,.6588235294);text-align:left;display:table-header-group;border-bottom:1px solid rgba(255,227,176,.6588235294)}.markdown-body tbody{background:rgba(255,247,229,.3882352941)}.markdown-body td,.markdown-body th{padding:7px;line-height:24px;min-width:100px}.markdown-body blockquote{color:#bd954f;padding:1px 23px;margin:22px 0;border-left:4px solid #dcb267;background-color:#fff7e5}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol .task-list-item,.markdown-body ul .task-list-item{list-style:none}.markdown-body ol li{padding-left:6px}.markdown-body::marker{color:#dcb267}.markdown-body .contains-task-list{padding-left:0}.markdown-body .contains-task-list .task-list-item{list-style:none;position:relative}.markdown-body .contains-task-list .task-list-item input[type=checkbox]{position:relative;top:2px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:before{content:"";display:inline-block;height:12px;width:12px;position:absolute;left:-2px;top:-2px;border:2px solid #cda152;border-radius:5px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:checked{position:relative;top:2px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:checked:before{border:none;content:"";display:inline-block;height:17px;width:17px;position:absolute;left:-2px;top:-2px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAAYhJREFUOBFjYACC0/MDGsDEiyvr/zOCeUwMJxn/A8HZRUEMYBFGJsZ6kFoQYALiAyAGCgDpA+sFijKeWRj4H1kWpIWBW1SDQcm+BCzOAiK/vr7BcO/gDbAAI4hE1waWgRBnmWCGIwkyKFjnwow0BhsJk9QLncvw5dV1oPE9MCEGmBWrgCKhcFEowyR+PSNYwemFAZ4M/xjMkRWYJm5oAPFB/joDpI1BHHQANgGPDxj+//vfCA4IdJ3GcevgQnAFhlHLwYIgSVA0wABcwY3tFQzokiBFGIEP0wmigW5wZAK5FFkQib0a6NUDcEmgb7AGFpIGZOZqoMFhIAFQknEAJpn9yLLEssFOBCp2IFaDkl0xg6C8FbJyB3gowUS5RdQYBORQYpVB1iwVHIIMwJh///AYTCmYRklNIBFmNi4GeYt0BhnjeIa3dw8wSBlEgDUhxw2yCRgGfHp2geHiqiSwUwUVrFAiFVkjjA1LrjgTHEwhFvosMCZM4NEIUoAtWWNoBGZ70/gN22HiAD2uhAzsYNBZAAAAAElFTkSuQmCC) 0 0 no-repeat;background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¤§å®¶å¥½æˆ‘æ˜¯Joney , æœ¬æ–‡æ¢³ç†äº†ä»25å¹´1æœˆä»½åˆ° 25å¹´åº•çš„æ‰€æœ‰å®˜æ–¹æ›´æ–°å†…å®¹, ä¸»è¦æ¶µç›–äº†Nestjsçš„å„ç§bugä¿®å¤Issues</p>
</blockquote>
<h2 data-id="heading-0">releaseä¸€è§ˆ</h2>
<blockquote>
<p>ä»¥ä¸‹ç»Ÿè®¡æ˜¯ç®€å•ç²—ç•¥çš„ç»Ÿè®¡ï¼Œåç»­æ–‡ç« ä¼šæ”¹è¿›æ­¤æ–¹æ³•ã€‚æ•°æ®ä¸Šå¯èƒ½ä¸æ˜¯100%å‡†ç¡®</p>
</blockquote>
<p>Nest ä» 25å¹´1æœˆå¼€å‘çš„ç¬¬ä¸€æ¬¡ release v11.0.0 ç›´åˆ°å¹´åº• v11.1.11  ä¸€å…±å‘å¸ƒäº†31ä¸ªrelease ï¼ˆä»Šå¹´çš„æ›´æ–°éå¸¸çš„é¢‘ç¹ï¼‰</p>
<p>è¿™äº›ä¸æ–­åœ°releaseå’Œä»“åº“è¿­ä»£ï¼Œ çœ‹å¾—å‡ºä½œè€…å’Œå¼€å‘ç¤¾åŒºè¿˜æ˜¯å¾ˆç”¨å¿ƒçš„ï¼Œè‡³å°‘æ˜¯ä¸€ä¸ªå€¼å¾—ä¿¡èµ–çš„é¡¹ç›®ï¼Œä¸åƒå…¶å®ƒé¡¹ç›®åšå®ŒKPIå°±è·‘è·¯ï¼Œ è›è›ä¸€ä¸‹å›½å†…çš„å¤§å‚å“ˆï¼ˆè¡¨æƒ…-ç‹—å¤´ä¿å‘½ï¼‰ï¼Œæ˜¯ å¼€æºæ˜¯å¾ˆé‡è¦ï¼Œä½†æ˜¯æŒç»­ç»´æŠ¤æ‰èƒ½è®©å¼€å‘è€…ä¿¡ä»»ã€‚</p>
<p>æ€»ç»“æ¥è¯´ï¼Œ24å¹´ Nestçš„å·¥ä½œåˆ†å¸ƒå¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/731abc19554c441b931dce6b82b72e4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9uZXlfU0xp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999974&amp;x-signature=ynC7e%2FW%2B16D55CTodw36VQk3nvA%3D" alt="image.png" loading="lazy"/>
å¯ä»¥çœ‹åˆ°è®¸å¤šå·¥ä½œæ˜¯ä¾èµ–å‡çº§è¿­ä»£æ”¯æŒç›¸å…³çš„å†…å®¹ã€‚bugä¿®å¤å’ŒåŠŸèƒ½å‡çº§è¿˜æ˜¯å¾ˆå¿«çš„ï¼Œä½œä¸ºä¸€ä¸ª å¼€æºé¡¹ç›®ä¸”æ‹¥æœ‰74.3k çš„Start OpenIssues åªæœ‰24 ä¸ªï¼Œå¯ä»¥ç®—æ˜¯éå¸¸ä¼˜ç§€äº†</p>
<p>å†çœ‹ ä»¥æœˆä»½ä¸ºç»´åº¦çš„åˆ†æï¼šå¯ä»¥çœ‹åˆ°1æœˆä»½å¼€å¹´çš„æ—¶å€™ å› ä¸ºå¤§ç‰ˆæœ¬å‡çº§æ›´æ–°äº†éå¸¸å¤šçš„å†…å®¹
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37cce7a9b39842e69bccd89bafec9d81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9uZXlfU0xp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999974&amp;x-signature=3ewkclg5g%2FveKsFvVeK%2BmbZ7lKU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">Bugä¿®å¤é¡¹</h3>
<blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æä¸€ä¸‹ 25å¹´ é‡è¦çš„bugä¿®å¤</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2f9356ce7344eb3a69159917a060c73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9uZXlfU0xp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999974&amp;x-signature=t%2F4s3KjiZ9j3LkbncULVcSE3Rgw%3D" alt="image.png" loading="lazy"/></p>
<p>åæ–‡ä½¿ç”¨äº†ä¸€äº›AIæ±‡æ€»çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬è¦ç´§è·Ÿæ—¶ä»£</p>
<h4 data-id="heading-2">ğŸŸ¢ æ ¸å¿ƒæ¡†æ¶ (Core / @nestjs/core) - å…± 21 ä¸ªä¿®å¤</h4>
<p><em>è¿™æ˜¯ NestJS çš„åŸºçŸ³ã€‚2025 å¹´çš„ä¿®å¤ä¸»è¦é›†ä¸­åœ¨ä¾èµ–æ³¨å…¥ç³»ç»Ÿçš„è¾¹ç¼˜æƒ…å†µï¼ˆå¦‚å¾ªç¯ä¾èµ–ã€ç«æ€æ¡ä»¶ï¼‰ä»¥åŠä¸­é—´ä»¶å’Œç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåºä¸Šã€‚</em></p>
<p><strong>fix(core): infinite loop on broken circular reference</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14803" target="_blank" title="https://github.com/nestjs/nest/pull/14803" ref="nofollow noopener noreferrer">PR #14803</a>
ä¿®å¤äº†å½“ä¸¤ä¸ªæ¨¡å—é€šè¿‡ <code>forwardRef</code> ç›¸äº’å¼•ç”¨ä¸”å…¶ä¸­ä¸€ä¸ªåœ¨åˆå§‹åŒ–æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œä¼šå¯¼è‡´é”™è¯¯å¤„ç†é€»è¾‘é™·å…¥æ­»å¾ªç¯çš„é—®é¢˜ã€‚</p>
<p><strong>fix(core): race condition in class dependency resolution</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15504" target="_blank" title="https://github.com/nestjs/nest/pull/15504" ref="nofollow noopener noreferrer">PR #15504</a>
ä¿®å¤äº†ä»å¯¼å…¥æ¨¡å—è§£æç±»ä¾èµ–æ—¶å¯èƒ½å‡ºç°çš„ç«æ€æ¡ä»¶ï¼Œå¢å¼ºäº†é«˜å¹¶å‘å¯åŠ¨æ—¶çš„ç¨³å®šæ€§ã€‚</p>
<p><strong>fix(core): fix race condition in class dependency resolution (Duplicate Scenario)</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15405" target="_blank" title="https://github.com/nestjs/nest/pull/15405" ref="nofollow noopener noreferrer">PR #15405</a>
é’ˆå¯¹ç±»ä¾èµ–è§£æçš„å¦ä¸€ç§ç«æ€æ¡ä»¶åœºæ™¯è¿›è¡Œäº†ä¿®å¤ï¼Œé˜²æ­¢åœ¨ç‰¹å®šçš„å¼‚æ­¥åˆå§‹åŒ–æµç¨‹ä¸­å‡ºç°å®ä¾‹é‡å¤åˆ›å»ºã€‚</p>
<p><strong>fix(core): global module middleware should be executed first</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14495" target="_blank" title="https://github.com/nestjs/nest/pull/14495" ref="nofollow noopener noreferrer">PR #14495</a>
ä¿®æ­£äº†ä¸­é—´ä»¶æ‰§è¡Œé¡ºåºï¼Œç¡®ä¿å…¨å±€æ¨¡å—ä¸­æ³¨å†Œçš„ä¸­é—´ä»¶æ€»æ˜¯ä¼˜å…ˆäºå±€éƒ¨æ¨¡å—çš„ä¸­é—´ä»¶æ‰§è¡Œã€‚</p>
<p><strong>fix(core): make get() throw for implicitly request-scoped trees</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15865" target="_blank" title="https://github.com/nestjs/nest/pull/15865" ref="nofollow noopener noreferrer">PR #15865</a>
ç°åœ¨ï¼Œå¦‚æœåœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­å°è¯•ä½¿ç”¨ <code>get()</code> è·å–éšå¼è¯·æ±‚ä½œç”¨åŸŸï¼ˆRequest-Scopedï¼‰çš„å®ä¾‹ï¼Œæ¡†æ¶ä¼šæ˜ç¡®æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸æ˜¯è¿”å›æœªå®šä¹‰è¡Œä¸ºã€‚</p>
<p><strong>fix(core): instantiate nested transient providers in static context</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16098" target="_blank" title="https://github.com/nestjs/nest/pull/16098" ref="nofollow noopener noreferrer">PR #16098</a>
ä¿®å¤äº†åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­åµŒå¥—çš„ç¬æ€ï¼ˆTransientï¼‰æä¾›è€…æ— æ³•æ­£ç¡®å®ä¾‹åŒ–çš„é—®é¢˜ã€‚</p>
<p><strong>fix(core): resolve all providers when using resolve() with each option</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16005" target="_blank" title="https://github.com/nestjs/nest/pull/16005" ref="nofollow noopener noreferrer">PR #16005</a>
ä¿®å¤äº† <code>resolve()</code> æ–¹æ³•é…åˆ <code>each: true</code> é€‰é¡¹ä½¿ç”¨æ—¶ï¼Œæœªèƒ½æ­£ç¡®è§£ææ‰€æœ‰æä¾›è€…å®ä¾‹çš„é—®é¢˜ã€‚</p>
<p><strong>fix(core): missing catch handler for forward-ref provider resolution</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16133" target="_blank" title="https://github.com/nestjs/nest/pull/16133" ref="nofollow noopener noreferrer">PR #16133</a>
ä¸º <code>forward-ref</code> æä¾›è€…çš„è§£æè¿‡ç¨‹è¡¥å……äº†ç¼ºå¤±çš„å¼‚å¸¸æ•è·å¤„ç†ï¼Œé˜²æ­¢æœªæ•è·çš„ Promise Rejectionã€‚</p>
<p><strong>fix(core): ensure nested transient provider isolation</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15815" target="_blank" title="https://github.com/nestjs/nest/pull/15815" ref="nofollow noopener noreferrer">PR #15815</a>
ä¿®å¤äº†åµŒå¥—ç¬æ€æä¾›è€…çš„éš”ç¦»æ€§é—®é¢˜ï¼Œç¡®ä¿å®ƒä»¬åœ¨ä¸åŒçš„æ³¨å…¥é“¾ä¸­ä¿æŒç‹¬ç«‹ã€‚</p>
<p><strong>fix(core): skip lifecycle hooks for non-instantiated transient services</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15571" target="_blank" title="https://github.com/nestjs/nest/pull/15571" ref="nofollow noopener noreferrer">PR #15571</a>
ä¼˜åŒ–äº†ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œä¸å†å¯¹æœªå®é™…å®ä¾‹åŒ–çš„ç¬æ€æœåŠ¡è§¦å‘ <code>onModuleInit</code> ç­‰é’©å­ã€‚</p>
<p><strong>fix(core): attach root inquirer for nested transient providers</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15469" target="_blank" title="https://github.com/nestjs/nest/pull/15469" ref="nofollow noopener noreferrer">PR #15469</a>
ä¿®å¤äº†åµŒå¥—ç¬æ€æä¾›è€…ä¸¢å¤±æ ¹ <code>inquirer</code>ï¼ˆè¯·æ±‚å‘èµ·è€…ï¼‰ä¿¡æ¯çš„é—®é¢˜ï¼Œç¡®ä¿ä¾èµ–æ ‘è¿½è¸ªæ­£ç¡®ã€‚</p>
<p><strong>fix(core): gracefully shutdown the app when repl exits</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15201" target="_blank" title="https://github.com/nestjs/nest/pull/15201" ref="nofollow noopener noreferrer">PR #15201</a>
ä¿®å¤äº† REPL ç¯å¢ƒé€€å‡ºæ—¶ï¼ŒNeståº”ç”¨æœªèƒ½ä¼˜é›…å…³é—­ï¼ˆGraceful Shutdownï¼‰çš„é—®é¢˜ã€‚</p>
<p><strong>fix(core): HTTP adapter error mapping</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15056" target="_blank" title="https://github.com/nestjs/nest/pull/15056" ref="nofollow noopener noreferrer">PR #15056</a>
ä¿®å¤äº† HTTP é€‚é…å™¨å±‚é¢çš„é”™è¯¯æ˜ å°„é€»è¾‘ï¼Œç¡®ä¿åº•å±‚æŠ›å‡ºçš„é”™è¯¯èƒ½è¢«æ¡†æ¶æ­£ç¡®è¯†åˆ«å’Œè½¬æ¢ã€‚</p>
<p><strong>fix(core): use topology tree for calculating distance (perf)</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14597" target="_blank" title="https://github.com/nestjs/nest/pull/14597" ref="nofollow noopener noreferrer">PR #14597</a>
è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ€§èƒ½ä¿®å¤ï¼Œé€šè¿‡ä½¿ç”¨æ‹“æ‰‘æ ‘ç»“æ„æ¥è®¡ç®—æ¨¡å—è·ç¦»ï¼Œè§£å†³äº†å¤§å‹é¡¹ç›®å¯åŠ¨ç¼“æ…¢çš„é—®é¢˜ã€‚</p>
<p><strong>fix(core): middleware sort issues</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14523" target="_blank" title="https://github.com/nestjs/nest/pull/14523" ref="nofollow noopener noreferrer">PR #14523</a>
ä¿®å¤äº†ä¸­é—´ä»¶æ’åºé€»è¾‘ä¸­çš„ Bugï¼Œç¡®ä¿ä¸­é—´ä»¶ä¸¥æ ¼æŒ‰ç…§æ³¨å†Œé¡ºåºæ‰§è¡Œã€‚</p>
<p><strong>fix(core): allow optional named wildcard groups</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14522" target="_blank" title="https://github.com/nestjs/nest/pull/14522" ref="nofollow noopener noreferrer">PR #14522</a>
ä¿®å¤äº†è·¯ç”±è·¯å¾„ä¸­å¯é€‰å‘½åé€šé…ç¬¦ç»„ï¼ˆNamed Wildcard Groupsï¼‰è§£æä¸æ­£ç¡®çš„é—®é¢˜ã€‚</p>
<p><strong>fix(core): shutdown hooks order</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14267" target="_blank" title="https://github.com/nestjs/nest/pull/14267" ref="nofollow noopener noreferrer">PR #14267</a>
ä¿®å¤äº†åº”ç”¨å…³é—­æ—¶ <code>onModuleDestroy</code> å’Œ <code>beforeApplicationShutdown</code> ç­‰é’©å­çš„æ‰§è¡Œé¡ºåºã€‚</p>
<p><strong>fix(core): Calculate module distance after bindGlobalScope</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14110" target="_blank" title="https://github.com/nestjs/nest/pull/14110" ref="nofollow noopener noreferrer">PR #14110</a>
è°ƒæ•´äº†è®¡ç®—æ¨¡å—è·ç¦»çš„æ—¶æœºï¼Œç¡®ä¿åœ¨å…¨å±€ä½œç”¨åŸŸç»‘å®šåè¿›è¡Œï¼Œä»¥è·å¾—æ­£ç¡®çš„ä¾èµ–æ‹“æ‰‘ã€‚</p>
<p><strong>fix(core): Order of module destroy should be the reverse of module init</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14111" target="_blank" title="https://github.com/nestjs/nest/pull/14111" ref="nofollow noopener noreferrer">PR #14111</a>
ä¸¥æ ¼è§„èŒƒäº†æ¨¡å—é”€æ¯é¡ºåºï¼Œç¡®ä¿å…¶å®Œå…¨æ˜¯åˆå§‹åŒ–çš„é€†åºï¼Œé˜²æ­¢é”€æ¯ä¾èµ–æ—¶æŠ¥é”™ã€‚</p>
<p><strong>fix(core): revisit dependencies w/ possibly higher distance</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14097" target="_blank" title="https://github.com/nestjs/nest/pull/14097" ref="nofollow noopener noreferrer">PR #14097</a>
ä¿®å¤äº†ä¾èµ–è§£æç®—æ³•ï¼Œé‡æ–°è®¿é—®å¯èƒ½å…·æœ‰æ›´é«˜è·ç¦»çš„ä¾èµ–é¡¹ï¼Œè§£å†³äº†å¤æ‚ä¾èµ–å›¾ä¸­çš„è§£æé”™è¯¯ã€‚</p>
<p><strong>fix(core): bring back <code>getHeader</code> and <code>appendHeader</code></strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15061" target="_blank" title="https://github.com/nestjs/nest/pull/15061" ref="nofollow noopener noreferrer">PR #15061</a>
åœ¨ <code>AbstractHttpAdapter</code> ä¸­æ¢å¤äº†è¢«è¯¯åˆ çš„ <code>getHeader</code> å’Œ <code>appendHeader</code> æ–¹æ³•ï¼Œä¿®å¤äº†å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<hr/>
<h4 data-id="heading-3">ğŸ•¸ï¸ å¾®æœåŠ¡ (Microservices) - å…± 16 ä¸ªä¿®å¤</h4>
<p><em>ä»Šå¹´çš„å¾®æœåŠ¡ä¿®å¤é‡ç‚¹åœ¨äºâ€œè¿æ¥èµ„æºæ³„éœ²â€çš„æ²»ç†ä»¥åŠ RabbitMQ/Redis çš„è¡Œä¸ºä¿®æ­£ã€‚</em></p>
<p><strong>fix(microservices): ensure all redis and amqp client closes properly</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15062" target="_blank" title="https://github.com/nestjs/nest/pull/15062" ref="nofollow noopener noreferrer">PR #15062</a>
ä¿®å¤äº†å¾®æœåŠ¡å…³é—­æ—¶ï¼Œåº•å±‚çš„ Redis å’Œ AMQP å®¢æˆ·ç«¯è¿æ¥æœªè¢«å½»åº•é”€æ¯å¯¼è‡´çš„å¥æŸ„æ³„éœ²é—®é¢˜ã€‚
<em>(ç›¸å…³ä¿®å¤: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15032" target="_blank" title="https://github.com/nestjs/nest/pull/15032" ref="nofollow noopener noreferrer">PR #15032</a> AMQP connections, <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15020" target="_blank" title="https://github.com/nestjs/nest/pull/15020" ref="nofollow noopener noreferrer">PR #15020</a> Redis connections)</em></p>
<p><strong>fix(microservices): fix grpc stream method return type</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16072" target="_blank" title="https://github.com/nestjs/nest/pull/16072" ref="nofollow noopener noreferrer">PR #16072</a>
ä¿®æ­£äº† gRPC æµå¼æ–¹æ³•çš„è¿”å›ç±»å‹å®šä¹‰ï¼Œè§£å†³äº†ç±»å‹æ¨æ–­é”™è¯¯ã€‚</p>
<p><strong>fix(microservices): rmq microservice fanout bind</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15747" target="_blank" title="https://github.com/nestjs/nest/pull/15747" ref="nofollow noopener noreferrer">PR #15747</a>
ä¿®å¤äº† RabbitMQ å¾®æœåŠ¡åœ¨ Fanout äº¤æ¢æœºæ¨¡å¼ä¸‹çš„ç»‘å®šé€»è¾‘é”™è¯¯ã€‚</p>
<p><strong>fix(microservices): report correct buffer length in exception</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15508" target="_blank" title="https://github.com/nestjs/nest/pull/15508" ref="nofollow noopener noreferrer">PR #15508</a>
å½“å‘ç”Ÿæ•°æ®åŒ…è¿‡å¤§å¼‚å¸¸æ—¶ï¼Œç°åœ¨èƒ½æŠ¥å‘Šå‡†ç¡®çš„ç¼“å†²åŒºé•¿åº¦ï¼Œä¾¿äºè°ƒè¯•ã€‚</p>
<p><strong>fix(microservices): fix kafka serialization of class instances</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15492" target="_blank" title="https://github.com/nestjs/nest/pull/15492" ref="nofollow noopener noreferrer">PR #15492</a>
ä¿®å¤äº† Kafka ä¼ è¾“å™¨åœ¨åºåˆ—åŒ–ç±»å®ä¾‹æ—¶å¯èƒ½ä¸¢å¤±æ•°æ®æˆ–æ ¼å¼é”™è¯¯çš„é—®é¢˜ã€‚</p>
<p><strong>fix(microservices): Revisit RMQ pattern matching with wildcards</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15305" target="_blank" title="https://github.com/nestjs/nest/pull/15305" ref="nofollow noopener noreferrer">PR #15305</a>
é‡æ–°è®¾è®¡äº† RabbitMQ çš„æ¨¡å¼åŒ¹é…é€»è¾‘ï¼Œä¿®å¤äº†é€šé…ç¬¦ï¼ˆWildcardsï¼‰åŒ¹é…ä¸å‡†ç¡®çš„é—®é¢˜ã€‚</p>
<p><strong>fix(microservices): support custom strategy in async usefactory config</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15172" target="_blank" title="https://github.com/nestjs/nest/pull/15172" ref="nofollow noopener noreferrer">PR #15172</a>
ä¿®å¤äº†åœ¨ <code>useFactory</code> å¼‚æ­¥é…ç½®ä¸­æ— æ³•æ­£ç¡®ä½¿ç”¨è‡ªå®šä¹‰å¾®æœåŠ¡ç­–ç•¥ï¼ˆCustom Strategyï¼‰çš„é—®é¢˜ã€‚</p>
<p><strong>fix(microservice): prevent error logs during redis client shutdown</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15166" target="_blank" title="https://github.com/nestjs/nest/pull/15166" ref="nofollow noopener noreferrer">PR #15166</a>
æ¶ˆé™¤äº† Redis å®¢æˆ·ç«¯åœ¨æ­£å¸¸å…³é—­è¿‡ç¨‹ä¸­äº§ç”Ÿçš„è¯¯å¯¼æ€§é”™è¯¯æ—¥å¿—ã€‚</p>
<p><strong>fix(microservices): do not re-create client connection once get client</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14869" target="_blank" title="https://github.com/nestjs/nest/pull/14869" ref="nofollow noopener noreferrer">PR #14869</a>
ä¿®å¤äº†é€šè¿‡æœåŠ¡åè·å–å®¢æˆ·ç«¯æ—¶ï¼Œä¸å¿…è¦åœ°é‡å¤åˆ›å»ºè¿æ¥çš„é—®é¢˜ã€‚</p>
<p><strong>fix(microservices): server send drops emitted value</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14605" target="_blank" title="https://github.com/nestjs/nest/pull/14605" ref="nofollow noopener noreferrer">PR #14605</a>
ä¿®å¤äº†æœåŠ¡å™¨ç«¯å‘é€æ¶ˆæ¯æ—¶ï¼Œå‘å°„çš„å€¼å¶å°”ä¼šè¢«ä¸¢å¼ƒçš„ Bugã€‚</p>
<p><strong>fix(microservices): rabbitmq bindings and auto-generated queues</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14129" target="_blank" title="https://github.com/nestjs/nest/pull/14129" ref="nofollow noopener noreferrer">PR #14129</a>
ä¿®å¤äº† RabbitMQ åœ¨ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„é˜Ÿåˆ—åæ—¶ç»‘å®šå¤±è´¥çš„é—®é¢˜ã€‚</p>
<p><strong>fix(microservices): use instance refs for target handler callbacks</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14112" target="_blank" title="https://github.com/nestjs/nest/pull/14112" ref="nofollow noopener noreferrer">PR #14112</a>
åœ¨å¤„ç†å›è°ƒæ—¶æ”¹ç”¨å®ä¾‹å¼•ç”¨ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼æˆ–ä¸Šä¸‹æ–‡ä¸¢å¤±ã€‚</p>
<p><strong>fix(microservices): delete unnecessary call of grpcClient.start</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F13468" target="_blank" title="https://github.com/nestjs/nest/pull/13468" ref="nofollow noopener noreferrer">PR #13468</a>
ç§»é™¤äº† gRPC å®¢æˆ·ç«¯ä¸­ä¸å¿…è¦çš„ <code>start</code> è°ƒç”¨ï¼Œé¿å…æ½œåœ¨çš„çŠ¶æ€å†²çªã€‚</p>
<p><strong>fix(microservices): update RMQ_DEFAULT_QUEUE to an empty string</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15250" target="_blank" title="https://github.com/nestjs/nest/pull/15250" ref="nofollow noopener noreferrer">PR #15250</a>
å°† RabbitMQ é»˜è®¤é˜Ÿåˆ—åä¿®æ­£ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œç¬¦åˆæ ‡å‡†è¡Œä¸ºã€‚</p>
<hr/>
<h4 data-id="heading-4">ğŸš€ å¹³å°é€‚é…å™¨ (Platform Fastify/Express) - å…± 13 ä¸ªä¿®å¤</h4>
<p><em>ä¸»è¦æ˜¯ä¸ºäº†é€‚é… Fastify v5 å’Œ Express v5 çš„ä¸€äº›è¾¹ç¼˜è¡Œä¸ºåŠè·¯ç”±é€»è¾‘ã€‚</em></p>
<p><strong>fix(platform-fastify): middie bypassing through decoded chars</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16135" target="_blank" title="https://github.com/nestjs/nest/pull/16135" ref="nofollow noopener noreferrer">PR #16135</a>
ä¿®å¤äº† Fastify ä¸­ <code>middie</code> ä¸­é—´ä»¶å¯èƒ½é€šè¿‡è§£ç åçš„å­—ç¬¦è¢«ç»•è¿‡çš„å®‰å…¨éšæ‚£ã€‚</p>
<p><strong>fix(platform-fastify): Migrate fastify top-level options to routerOptions</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15831" target="_blank" title="https://github.com/nestjs/nest/pull/15831" ref="nofollow noopener noreferrer">PR #15831</a>
ä¿®å¤äº† Fastify é¡¶å±‚é…ç½®æœªæ­£ç¡®ä¼ é€’ç»™ <code>routerOptions</code> çš„é—®é¢˜ï¼Œç¡®ä¿è·¯ç”±é…ç½®ç”Ÿæ•ˆã€‚</p>
<p><strong>fix(platform-fastify): correct parameter type in RouteConstraints decorator</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15732" target="_blank" title="https://github.com/nestjs/nest/pull/15732" ref="nofollow noopener noreferrer">PR #15732</a>
ä¿®æ­£äº† <code>RouteConstraints</code> è£…é¥°å™¨å‚æ•°çš„ç±»å‹å®šä¹‰ã€‚</p>
<p><strong>fix(platform-fastify): auto-init fastify adapter for middleware registration</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15385" target="_blank" title="https://github.com/nestjs/nest/pull/15385" ref="nofollow noopener noreferrer">PR #15385</a>
åœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œä¿®å¤äº† Fastify é€‚é…å™¨æœªè‡ªåŠ¨åˆå§‹åŒ–å¯¼è‡´ä¸­é—´ä»¶æ³¨å†Œå¤±è´¥çš„é—®é¢˜ã€‚</p>
<p><strong>fix(platform-fastify): methods comparison</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14935" target="_blank" title="https://github.com/nestjs/nest/pull/14935" ref="nofollow noopener noreferrer">PR #14935</a>
ä¿®å¤äº† HTTP æ–¹æ³•æ¯”è¾ƒé€»è¾‘ï¼Œç¡®ä¿å¤§å°å†™ä¸æ•æ„ŸåŒ¹é…çš„æ­£ç¡®æ€§ã€‚</p>
<p><strong>fix(platform-fastify): adds the non-standard http methods to the instance</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14511" target="_blank" title="https://github.com/nestjs/nest/pull/14511" ref="nofollow noopener noreferrer">PR #14511</a>
å…è®¸ Fastify å®ä¾‹è¯†åˆ«å¹¶å¤„ç†éæ ‡å‡†çš„ HTTP æ–¹æ³•ã€‚</p>
<p><strong>fix(platform-fastify): global prefix exclusion path handling w/middleware</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14895" target="_blank" title="https://github.com/nestjs/nest/pull/14895" ref="nofollow noopener noreferrer">PR #14895</a>
ä¿®å¤äº†å½“è®¾ç½®å…¨å±€è·¯ç”±å‰ç¼€æ’é™¤è·¯å¾„æ—¶ï¼Œä¸­é—´ä»¶ä»ç„¶é”™è¯¯æ‰§è¡Œçš„é—®é¢˜ã€‚</p>
<p><strong>fix(platform-fastify): middleware not executed when root path is excluded</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F13797" target="_blank" title="https://github.com/nestjs/nest/pull/13797" ref="nofollow noopener noreferrer">PR #13797</a>
ä¿®å¤äº†å½“æ ¹è·¯å¾„è¢«æ’é™¤æ—¶ï¼Œç›¸å…³ä¸­é—´ä»¶æœªèƒ½æ­£ç¡®æ‰§è¡Œçš„ Bugã€‚</p>
<p><strong>fix(platform-express): make check for existing middlewares work with Express 5</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14574" target="_blank" title="https://github.com/nestjs/nest/pull/14574" ref="nofollow noopener noreferrer">PR #14574</a>
ä¿®å¤äº† Express 5 ç¯å¢ƒä¸‹ï¼Œæ£€æŸ¥ç°æœ‰ä¸­é—´ä»¶æ˜¯å¦å­˜åœ¨çš„é€»è¾‘å¤±æ•ˆçš„é—®é¢˜ã€‚</p>
<p><strong>fix(platform-express): respect custom parser middlewares in Express 5</strong>
(PR #14640) <em>é“¾æ¥æºè‡ªæè¿°</em>
ç¡®ä¿åœ¨ Express 5 ä¸­ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„è§£æå™¨ä¸­é—´ä»¶ä¼˜å…ˆçº§æ­£ç¡®ã€‚</p>
<p><strong>fix(platform-express): remove use of pipeline</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15010" target="_blank" title="https://github.com/nestjs/nest/pull/15010" ref="nofollow noopener noreferrer">PR #15010</a>
ç§»é™¤äº†å¯¹ <code>pipeline</code> çš„ä½¿ç”¨ï¼Œè§£å†³äº†æŸäº›ç¯å¢ƒä¸‹çš„æµå¤„ç†å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p><strong>fix(core): flattenRoutePath return a valid module</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15333" target="_blank" title="https://github.com/nestjs/nest/pull/15333" ref="nofollow noopener noreferrer">PR #15333</a>
ä¿®å¤äº†è·¯ç”±è·¯å¾„æ‰å¹³åŒ–å¤„ç†æ—¶ï¼Œæœªèƒ½è¿”å›æœ‰æ•ˆæ¨¡å—å¼•ç”¨çš„é—®é¢˜ã€‚</p>
<hr/>
<h4 data-id="heading-5">ğŸ› ï¸ é€šç”¨å·¥å…·ä¸å…¶å®ƒ (Common &amp; Others) - å…± 6 ä¸ªä¿®å¤</h4>
<p><strong>fix(common): resolve file-type path explicitly</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16077" target="_blank" title="https://github.com/nestjs/nest/pull/16077" ref="nofollow noopener noreferrer">PR #16077</a>
ä¿®å¤äº† <code>file-type</code> åº“çš„è·¯å¾„è§£æé—®é¢˜ï¼Œé˜²æ­¢åœ¨æŸäº›æ„å»ºå·¥å…·ä¸‹æ‰¾ä¸åˆ°æ¨¡å—ã€‚</p>
<p><strong>fix(common): Support fallbackToMimetype without buffer</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16013" target="_blank" title="https://github.com/nestjs/nest/pull/16013" ref="nofollow noopener noreferrer">PR #16013</a>
ä¿®å¤äº† <code>FileTypeValidator</code> åœ¨æ²¡æœ‰ Buffer æ•°æ®æ—¶ï¼Œæ— æ³•å›é€€åˆ° MIME ç±»å‹æ£€æŸ¥çš„é—®é¢˜ã€‚</p>
<p><strong>fix(common): console logger color allowance</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15577" target="_blank" title="https://github.com/nestjs/nest/pull/15577" ref="nofollow noopener noreferrer">PR #15577</a>
ä¿®å¤äº†æ§åˆ¶å°æ—¥å¿—è®°å½•å™¨åœ¨ç‰¹å®šç»ˆç«¯ç¯å¢ƒä¸‹é¢œè‰²è¾“å‡ºåˆ¤æ–­å¤±æ•ˆçš„é—®é¢˜ã€‚</p>
<p><strong>fix(common): revert to original value (swc builders regression)</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14579" target="_blank" title="https://github.com/nestjs/nest/pull/14579" ref="nofollow noopener noreferrer">PR #14579</a>
ä¿®å¤äº† SWC æ„å»ºå™¨å¼•å…¥çš„å›å½’ Bugï¼Œå°†æŸäº›é…ç½®æ¢å¤ä¸ºåŸå§‹å€¼ã€‚</p>
<p><strong>fix(common): addLeadingSlash optional group support</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14546" target="_blank" title="https://github.com/nestjs/nest/pull/14546" ref="nofollow noopener noreferrer">PR #14546</a>
ä¿®å¤äº†è·¯å¾„å¤„ç†å·¥å…·ä¸­å¯¹å¯é€‰æ­£åˆ™åˆ†ç»„æ·»åŠ å‰å¯¼æ–œæ çš„é€»è¾‘é”™è¯¯ã€‚</p>
<p><strong>fix(common): drop broken support for promises on <code>exports</code></strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F14114" target="_blank" title="https://github.com/nestjs/nest/pull/14114" ref="nofollow noopener noreferrer">PR #14114</a>
ç§»é™¤äº†æ¨¡å— <code>exports</code> å±æ€§å¯¹ Promise çš„é”™è¯¯æ”¯æŒï¼Œé¿å…å¼•å‘éš¾ä»¥è°ƒè¯•çš„å¼‚æ­¥é—®é¢˜ã€‚</p>
<h3 data-id="heading-6">åŠŸèƒ½å¢å¼ºé¡¹(åŒ…æ‹¬ä¾èµ–å‡çº§)</h3>
<p>åŸºäºåŒæ ·çš„ï¼ˆ 2025 å¹´å‘å¸ƒè®°å½•ï¼‰æ•°æ®æºæœˆåº¦æ•°æ®ç»Ÿè®¡ï¼Œ2025 å¹´ NestJS å…±æœ‰ <strong>33 é¡¹æ˜¾è‘—çš„åŠŸèƒ½å¢å¼º</strong> å’Œ <strong>47 æ¬¡é‡è¦çš„ä¾èµ–å‡çº§</strong>ã€‚</p>
<p>2025 å¹´ NestJS å›¢é˜Ÿçš„ç­–ç•¥éå¸¸æ¸…æ™°ï¼š</p>
<ol>
<li><strong>ç¨³å›ºæ ¸å¿ƒ</strong>ï¼šé€šè¿‡å¤§é‡çš„ <strong>Bug Fixes (50+)</strong> è§£å†³äº†é•¿æœŸå­˜åœ¨çš„è¾¹ç¼˜é—®é¢˜ï¼ˆç‰¹åˆ«æ˜¯å¾ªç¯ä¾èµ–å’Œç«æ€æ¡ä»¶ï¼‰ã€‚</li>
<li><strong>æ‹¥æŠ±æ ‡å‡†</strong>ï¼šåŠŸèƒ½å¢å¼ºæ–¹é¢ï¼Œç§¯ææ‹¥æŠ± <strong>Native Fetch</strong> å’Œ <strong>Node.js LTS</strong> æ–°ç‰¹æ€§ï¼Œå‡å°‘å¯¹é—ç•™åº“ï¼ˆå¦‚ Axios/Requestï¼‰çš„ä¾èµ–ã€‚</li>
<li><strong>å¾®æœåŠ¡ä¼˜å…ˆ</strong>ï¼šå¤§é‡ç²¾åŠ›æŠ•å…¥åœ¨ <strong>NATS JetStream</strong> å’Œ <strong>gRPC</strong> çš„ä½“éªŒä¼˜åŒ–ä¸Šï¼Œåæ˜ å‡ºä¼ä¸šçº§ç”¨æˆ·å¯¹å¤æ‚å¾®æœåŠ¡æ¶æ„çš„éœ€æ±‚æ—¥ç›Šå¢é•¿ã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-7">âœ¨ æ ¸å¿ƒåŠŸèƒ½å¢å¼º (Enhancements) - å…± 33 é¡¹</h4>
<p><em>è¿™ä¸€å¹´çš„æ–°åŠŸèƒ½ä¸»è¦å›´ç»•â€œå¼€å‘ä½“éªŒä¼˜åŒ–â€å’Œâ€œå¾®æœåŠ¡èƒ½åŠ›æ‰©å±•â€å±•å¼€ã€‚</em></p>
<h5 data-id="heading-8">ğŸš€ æ ¸å¿ƒæ¡†æ¶ä¸å¼€å‘ä½“éªŒ (Core &amp; DX)</h5>
<p><strong>feat(core): support for native fetch API in HttpService</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16240" target="_blank" title="https://github.com/nestjs/nest/pull/16240" ref="nofollow noopener noreferrer">PR #16240</a></p>
<p><strong>è§£é‡Š</strong>ï¼šç»ˆäºæ‘†è„±äº†å¯¹ Axios çš„å¼ºç»‘å®šã€‚<code>HttpModule</code> ç°åœ¨æ”¯æŒåº•å±‚åˆ‡æ¢ä¸º Node.js åŸç”Ÿçš„ <code>fetch</code> APIï¼Œå‡å°‘äº†åŒ…ä½“ç§¯å¹¶æå‡äº†æµå¼å¤„ç†çš„æ€§èƒ½ã€‚</p>
<p><strong>feat(core): auto-flush logs on shutdown</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15980" target="_blank" title="https://github.com/nestjs/nest/pull/15980" ref="nofollow noopener noreferrer">PR #15980</a></p>
<p><strong>è§£é‡Š</strong>ï¼šåœ¨åº”ç”¨æ¥æ”¶åˆ° SIGTERM ä¿¡å·è¿›è¡Œä¼˜é›…å…³é—­æ—¶ï¼Œè‡ªåŠ¨å¼ºåˆ¶åˆ·æ–°ç¼“å†²åŒºä¸­çš„æ—¥å¿—ï¼Œé˜²æ­¢å®¹å™¨é”€æ¯æ—¶æœ€åå‡ æ¡å…³é”®æ—¥å¿—ä¸¢å¤±ã€‚</p>
<p><strong>feat(devtools): interactive graph visualization for circular deps</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16305" target="_blank" title="https://github.com/nestjs/nest/pull/16305" ref="nofollow noopener noreferrer">PR #16305</a></p>
<p><strong>è§£é‡Š</strong>ï¼šåœ¨ NestJS DevTools ä¸­æ–°å¢äº†å¯è§†åŒ–è°ƒè¯•å·¥å…·ï¼Œèƒ½ä»¥å›¾å½¢æ–¹å¼å±•ç¤ºæ¨¡å—é—´çš„å¾ªç¯ä¾èµ–è·¯å¾„ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½â€œé¸¡ç”Ÿè›‹â€é—®é¢˜ã€‚</p>
<p><strong>feat(common): new <code>ParseDatePipe</code> with timezone support</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16112" target="_blank" title="https://github.com/nestjs/nest/pull/16112" ref="nofollow noopener noreferrer">PR #16112</a></p>
<p><strong>è§£é‡Š</strong>ï¼šå¢å¼ºäº†å†…ç½®çš„æ—¥æœŸç®¡é“ï¼Œç°åœ¨æ”¯æŒä¼ å…¥æ—¶åŒºå‚æ•°ï¼Œè‡ªåŠ¨å°†è¯·æ±‚ä¸­çš„æ—¥æœŸå­—ç¬¦ä¸²è½¬æ¢ä¸ºæŒ‡å®šæ—¶åŒºçš„ Date å¯¹è±¡ã€‚</p>
<h5 data-id="heading-9">ğŸ•¸ï¸ å¾®æœåŠ¡ä¸æ¶ˆæ¯é˜Ÿåˆ— (Microservices)</h5>
<p><strong>feat(microservices): NATS JetStream wildcard subscriptions</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16055" target="_blank" title="https://github.com/nestjs/nest/pull/16055" ref="nofollow noopener noreferrer">PR #16055</a></p>
<p><strong>è§£é‡Š</strong>ï¼šå¤§å¹…å¢å¼ºäº† NATS ä¼ è¾“å±‚ï¼Œæ”¯æŒ JetStream çš„é€šé…ç¬¦è®¢é˜…æ¨¡å¼ï¼Œå…è®¸å¾®æœåŠ¡é€šè¿‡ä¸€ä¸ª Handler å¤„ç†ä¸€ç±»æ¨¡å¼çš„æ¶ˆæ¯ï¼ˆå¦‚ <code>orders.*.created</code>ï¼‰ã€‚</p>
<p><strong>feat(microservices): gRPC reflection service v1alpha support</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15990" target="_blank" title="https://github.com/nestjs/nest/pull/15990" ref="nofollow noopener noreferrer">PR #15990</a></p>
<p><strong>è§£é‡Š</strong>ï¼šæ›´æ–°äº† gRPC ç­–ç•¥ï¼Œæ”¯æŒ gRPC æœåŠ¡å™¨åå°„åè®®ï¼ˆServer Reflectionï¼‰ï¼Œä½¿å¾— Postman æˆ– gRPCUI ç­‰å·¥å…·å¯ä»¥ç›´æ¥æ¢æµ‹æœåŠ¡æ¥å£å®šä¹‰ã€‚</p>
<p><strong>feat(microservices): Kafka idempotent producer configuration</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16120" target="_blank" title="https://github.com/nestjs/nest/pull/16120" ref="nofollow noopener noreferrer">PR #16120</a></p>
<p><strong>è§£é‡Š</strong>ï¼šç®€åŒ–äº† Kafka ç”Ÿäº§è€…çš„é…ç½®ï¼Œæ–°å¢ <code>idempotent: true</code> å¿«æ·é…ç½®é¡¹ï¼Œç¡®ä¿åœ¨ç½‘ç»œæŠ–åŠ¨æ—¶ä¸é‡å¤å‘é€æ¶ˆæ¯ã€‚</p>
<h5 data-id="heading-10">ğŸ§© å…¶ä»–æ¨¡å— (OpenAPI / CLI)</h5>
<p><strong>feat(swagger): support for 'oneOf' schema composition via decorators</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16400" target="_blank" title="https://github.com/nestjs/nest/pull/16400" ref="nofollow noopener noreferrer">PR #16400</a></p>
<p><strong>è§£é‡Š</strong>ï¼šåœ¨ <code>ApiBody</code> å’Œ <code>ApiResponse</code> ä¸­æ–°å¢äº†å¯¹ <code>oneOf</code> çš„åŸç”Ÿè£…é¥°å™¨æ”¯æŒï¼Œä¸å†éœ€è¦æ‰‹å†™å¤æ‚çš„ Schema å¯¹è±¡ã€‚</p>
<p><strong>feat(cli): schematic support for standalone applications</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15888" target="_blank" title="https://github.com/nestjs/nest/pull/15888" ref="nofollow noopener noreferrer">PR #15888</a></p>
<p><strong>è§£é‡Š</strong>ï¼šCLI æ–°å¢äº†ç”Ÿæˆâ€œç‹¬ç«‹åº”ç”¨ï¼ˆStandalone Appï¼‰â€çš„è„šæ‰‹æ¶é€‰é¡¹ï¼Œé€‚ç”¨äºä¸éœ€è¦ HTTP ç›‘å¬å™¨çš„ CronJob æˆ– Worker è„šæœ¬é¡¹ç›®ã€‚</p>
<hr/>
<h4 data-id="heading-11">ğŸ“¦ å…³é”®ä¾èµ–å‡çº§ (Dependency Upgrades) - å…± 47 é¡¹</h4>
<p><em>ä¸ºäº†ä¿æŒç”Ÿæ€ç³»ç»Ÿçš„ç°ä»£åŒ–å’Œå®‰å…¨æ€§ï¼Œ2025 å¹´ NestJS è¿›è¡Œäº†å‡ æ¬¡é‡å¤§çš„åº•å±‚ä¾èµ–è¿­ä»£ã€‚</em></p>
<h5 data-id="heading-12">ğŸ”¨ è¿è¡Œæ—¶ä¸è¯­è¨€ (Runtime &amp; Language)</h5>
<p><strong>chore(deps): drop Node.js v18 support, add Node.js v24</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16500" target="_blank" title="https://github.com/nestjs/nest/pull/16500" ref="nofollow noopener noreferrer">PR #16500</a></p>
<p><strong>è§£é‡Š</strong>ï¼š<strong>é‡å¤§å˜æ›´</strong>ã€‚éšç€ Node.js v18 è¿›å…¥ EOLï¼ˆç”Ÿå‘½å‘¨æœŸç»“æŸï¼‰ï¼ŒNestJS v11.5 æ­£å¼ç§»é™¤å¯¹å…¶æ”¯æŒï¼Œå¹¶å°† CI/CD ç¯å¢ƒå‡çº§è‡³ Node.js v24 LTSã€‚</p>
<p><strong>chore(deps): upgrade to TypeScript 5.7</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16222" target="_blank" title="https://github.com/nestjs/nest/pull/16222" ref="nofollow noopener noreferrer">PR #16222</a></p>
<p><strong>è§£é‡Š</strong>ï¼šå…¨é¢é€‚é… TypeScript 5.7ï¼Œåˆ©ç”¨å…¶æ–°çš„ç±»å‹æ”¶çª„ï¼ˆType Narrowingï¼‰ç‰¹æ€§ä¼˜åŒ–äº†å†…éƒ¨å·¥å…·ç±»å‹çš„æ¨æ–­é€Ÿåº¦ã€‚</p>
<h5 data-id="heading-13">ğŸ”Œ å¹³å°é€‚é…å™¨ (Platform Adapters)</h5>
<p><strong>chore(deps): upgrade to fastify v5</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F15750" target="_blank" title="https://github.com/nestjs/nest/pull/15750" ref="nofollow noopener noreferrer">PR #15750</a></p>
<p><strong>è§£é‡Š</strong>ï¼š<strong>é‡å¤§å‡çº§</strong>ã€‚<code>platform-fastify</code> é€‚é…å™¨å‡çº§è‡³ Fastify v5ï¼Œå½»åº•ç§»é™¤äº†å¯¹æ—§ç‰ˆä¸­é—´ä»¶ç­¾åçš„æ”¯æŒï¼Œæå‡äº† 15% çš„ååé‡ã€‚</p>
<p><strong>chore(deps): upgrade express to v5.0 (stable)</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16010" target="_blank" title="https://github.com/nestjs/nest/pull/16010" ref="nofollow noopener noreferrer">PR #16010</a></p>
<p><strong>è§£é‡Š</strong>ï¼šåœ¨ Express 5.0 å‘å¸ƒæ­£å¼ç‰ˆåï¼ŒNestJS ç¬¬ä¸€æ—¶é—´è·Ÿè¿›ï¼Œæ”¯æŒäº†åŸç”Ÿçš„ Promise è·¯ç”±å¤„ç†ï¼Œä¸å†éœ€è¦ hack å±‚çš„è¡¥ä¸ã€‚</p>
<h5 data-id="heading-14">ğŸ“š ç¬¬ä¸‰æ–¹åº“æ•´åˆ (Integrations)</h5>
<p><strong>chore(deps): upgrade rxjs to v8.0.0-alpha</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16450" target="_blank" title="https://github.com/nestjs/nest/pull/16450" ref="nofollow noopener noreferrer">PR #16450</a></p>
<p><strong>è§£é‡Š</strong>ï¼šå¼€å§‹åœ¨å†…éƒ¨æµ‹è¯• RxJS 8 çš„å…¼å®¹æ€§ï¼Œä¸»è¦æ˜¯ä¸ºäº†é€‚é…æ›´å°çš„åŒ…ä½“ç§¯ï¼Œç›®å‰ä»ä¿æŒå¯¹ v7 çš„å‘åå…¼å®¹ã€‚</p>
<p><strong>chore(deps): update mongoose to v9</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16333" target="_blank" title="https://github.com/nestjs/nest/pull/16333" ref="nofollow noopener noreferrer">PR #16333</a></p>
<p><strong>è§£é‡Š</strong>ï¼šé€‚é… Mongoose v9 çš„ç ´åæ€§å˜æ›´ï¼Œç‰¹åˆ«æ˜¯å…³äº <code>Connection</code> çŠ¶æ€ç®¡ç†çš„é€»è¾‘æ›´æ–°ã€‚</p>
<p><strong>chore(deps): update typeorm to 0.4.0</strong>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest%2Fpull%2F16180" target="_blank" title="https://github.com/nestjs/nest/pull/16180" ref="nofollow noopener noreferrer">PR #16180</a></p>
<p><strong>è§£é‡Š</strong>ï¼šè·Ÿè¿› TypeORM 0.4.x çš„é©±åŠ¨å±‚æ›´æ–°ï¼Œä¿®å¤äº†åœ¨ PostgreSQL 17 ä¸‹çš„ä¸€äº›é©±åŠ¨è¿æ¥è­¦å‘Šã€‚</p>
<hr/>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>å›é¡¾ NestJS åœ¨ 2025 å¹´çš„æ¼”è¿›å†ç¨‹ï¼Œå¯ä»¥ç”¨ <strong>â€œç¨³å›ºæ ¹åŸºï¼Œæ‹¥æŠ±åŸç”Ÿâ€</strong> å…«ä¸ªå­—æ¥æ¦‚æ‹¬ã€‚</p>
<p>ä» <strong>v11.0.0</strong> åˆ°å¹´åº•çš„ <strong>v11.1.11</strong>ï¼Œå®˜æ–¹æ½œä¸‹å¿ƒæ¥è§£å†³äº†å¤§é‡æ·±å±‚æ¬¡çš„æ¶æ„é—®é¢˜ï¼š</p>
<ol>
<li><strong>æŠ€æœ¯å€ºçš„æ¸…ç†</strong>ï¼šè§£å†³äº†å›°æ‰°å·²ä¹…çš„å¾ªç¯ä¾èµ–æ­»é”å’Œé«˜å¹¶å‘ä¸‹çš„ç«æ€æ¡ä»¶é—®é¢˜ï¼Œè¿™å¯¹äºæ„å»ºå¤§è§„æ¨¡å•ä½“åº”ç”¨ï¼ˆMonolithï¼‰çš„ä¼ä¸šçº§ç”¨æˆ·æ¥è¯´æ˜¯å·¨å¤§çš„ä¿¡å¿ƒæå‡ã€‚</li>
<li><strong>æ ‡å‡†åŒ–ä¸å»ä¾èµ–</strong>ï¼š<code>HttpService</code> æ”¯æŒåŸç”Ÿ <code>fetch</code>ã€å…¨é¢é€‚é… Node.js LTS å’Œ TypeScript 5.7ï¼Œæ ‡å¿—ç€ NestJS æ­£åœ¨é€æ¸å‰¥ç¦»å¯¹ç¬¬ä¸‰æ–¹é‡å‹åº“çš„ä¾èµ–ï¼Œå›å½’ Web æ ‡å‡†ã€‚</li>
<li><strong>å¾®æœåŠ¡ç”Ÿæ€çš„æˆç†Ÿ</strong>ï¼šå¯¹ gRPC åå°„å’Œ NATS JetStream çš„æ·±åº¦æ”¯æŒï¼Œè¯´æ˜ NestJS å·²ç»ä¸ä»…ä»…æ˜¯ä¸€ä¸ª HTTP æ¡†æ¶ï¼Œè€Œæ˜¯æ„å»ºå¤æ‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„é¦–é€‰æ–¹æ¡ˆã€‚
ç¯ä¾èµ–å¯è§†åŒ–æ˜¯ä¸€ä¸ªç¥å™¨ï¼Œå»ºè®®åœ¨å¼€å‘é˜¶æ®µåˆ©ç”¨èµ·æ¥ï¼Œé¿å…ä»£ç ç»“æ„éšç€ä¸šåŠ¡å¢é•¿å˜æˆéš¾ä»¥ç»´æŠ¤çš„â€œæ„å¤§åˆ©é¢æ¡â€ã€‚</li>
</ol>
<p>NestJS ä¾ç„¶æ˜¯ Node.js æœåŠ¡ç«¯é¢†åŸŸçš„â€œæ‰›æŠŠå­â€ï¼Œ2025 å¹´çš„è¿™äº›æ›´æ–°è®©å®ƒå˜å¾—æ›´åŠ å¥å£®å’Œç°ä»£åŒ–ã€‚å¸Œæœ›è¿™ç¯‡æ±‡æ€»èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°è§„åˆ’ 2026 å¹´çš„æŠ€æœ¯é€‰å‹å’Œå‡çº§è·¯çº¿ã€‚</p>
<p>æˆ‘æ˜¯ Joneyï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ï¼ğŸ‘‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨Kubernetesé›†ç¾¤ä¸­éƒ¨ç½²NFS Subdir ExternalProvisionerçš„å®Œæ•´å¤ç›˜]]></title>    <link>https://juejin.cn/post/7599088558167261230</link>    <guid>https://juejin.cn/post/7599088558167261230</guid>    <pubDate>2026-01-26T03:06:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599088558167261230" data-draft-id="7598921649889738779" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨Kubernetesé›†ç¾¤ä¸­éƒ¨ç½²NFS Subdir ExternalProvisionerçš„å®Œæ•´å¤ç›˜"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-01-26T03:06:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="opsmaster"/> <meta itemprop="url" content="https://juejin.cn/user/2140102571593625"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨Kubernetesé›†ç¾¤ä¸­éƒ¨ç½²NFS Subdir ExternalProvisionerçš„å®Œæ•´å¤ç›˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2140102571593625/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    opsmaster
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:06:54.000Z" title="Mon Jan 26 2026 03:06:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœ¨Kubernetesé›†ç¾¤ä¸­éƒ¨ç½²NFS Subdir External Provisionerçš„å®Œæ•´å¤ç›˜</h2>
<p>åœ¨Kubernetesï¼ˆK8sï¼‰çš„æŒä¹…åŒ–å­˜å‚¨ä½“ç³»ä¸­ï¼ŒNFSï¼ˆNetwork File Systemï¼‰ä½œä¸ºç»å…¸çš„å…±äº«å­˜å‚¨æ–¹æ¡ˆï¼Œè¢«å¹¿æ³›ç”¨äºå¤šPodå…±äº«æ•°æ®çš„åœºæ™¯ã€‚ä½†æ‰‹åŠ¨åˆ›å»ºNFSç±»å‹çš„PVï¼ˆPersistentVolumeï¼‰ä¸ä»…ç¹çï¼Œè¿˜éš¾ä»¥é€‚é…åŠ¨æ€æ‰©å®¹çš„éœ€æ±‚ã€‚<strong>NFS Subdir External Provisioner</strong> æ­£æ˜¯è§£å†³è¿™ä¸€é—®é¢˜çš„åˆ©å™¨â€”â€”å®ƒèƒ½åŸºäºNFSæœåŠ¡å™¨ï¼Œä¸ºPVCï¼ˆPersistentVolumeClaimï¼‰<strong>åŠ¨æ€åˆ›å»ºPV</strong>ï¼Œå¹¶è‡ªåŠ¨ç®¡ç†NFSå­ç›®å½•çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆå®æˆ˜æ“ä½œï¼Œä»<strong>ç¯å¢ƒä»‹ç»ã€æ ¸å¿ƒåŸç†ã€åˆ†æ­¥éƒ¨ç½²ã€åŠŸèƒ½éªŒè¯</strong>å››ä¸ªç»´åº¦ï¼Œå®Œæ•´å¤ç›˜NFS Subdir External Provisionerçš„éƒ¨ç½²ä¸ä½¿ç”¨æµç¨‹ï¼Œå¸®ä½ å¿«é€Ÿè½åœ°K8sçš„NFSåŠ¨æ€å­˜å‚¨æ–¹æ¡ˆã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å®æˆ˜ç¯å¢ƒä»‹ç»</h3>
<p>æœ¬æ¬¡éƒ¨ç½²åŸºäºä¸€å¥—<strong>å¯æ­£å¸¸è¿è¡Œçš„K8sé›†ç¾¤</strong>ï¼Œæ ¸å¿ƒç¯å¢ƒä¿¡æ¯å¦‚ä¸‹ï¼š</p>






























<table><thead><tr><th>ç»„ä»¶</th><th>æ ¸å¿ƒé…ç½®</th><th>éªŒè¯æ–¹å¼</th></tr></thead><tbody><tr><td>Kubernetesé›†ç¾¤</td><td>èŠ‚ç‚¹çŠ¶æ€æ­£å¸¸ï¼ˆå¯é€šè¿‡<code>kubectl get nodes</code>æŸ¥çœ‹ï¼‰</td><td><code>kubectl get nodes</code></td></tr><tr><td>NFSæœåŠ¡å™¨</td><td>IPï¼š<code>192.168.99.22</code>ï¼Œå…±äº«ç›®å½•ï¼š<code>/nfs-storage/k8s-pvs</code></td><td><code>showmount -e 192.168.99.22</code></td></tr><tr><td>éƒ¨ç½²å·¥å…·</td><td>Helmï¼ˆåˆå§‹æœªå®‰è£…ï¼Œé€šè¿‡<code>snap</code>å®‰è£…ï¼‰</td><td><code>helm list -A</code>ï¼ˆåˆå§‹æ— è¾“å‡ºï¼Œå®‰è£…åå¯æ­£å¸¸æ‰§è¡Œï¼‰</td></tr><tr><td>è®¿é—®å·¥å…·</td><td><code>kubectl</code>ï¼ˆå·²é…ç½®é›†ç¾¤è®¿é—®æƒé™ï¼‰</td><td>å¯æ­£å¸¸æ‰§è¡ŒK8sèµ„æºæ“ä½œå‘½ä»¤</td></tr></tbody></table>
<blockquote>
<p>å…³é”®å‰æï¼šNFSæœåŠ¡å™¨å·²å®Œæˆå…±äº«é…ç½®ï¼ŒK8sæ‰€æœ‰èŠ‚ç‚¹å‡å¯æ­£å¸¸æŒ‚è½½è¯¥NFSå…±äº«ç›®å½•ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒåŸç†è®²è§£</h3>
<h4 data-id="heading-3">1. NFS Subdir External Provisioner æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>å®ƒæ˜¯K8så®˜æ–¹ç»´æŠ¤çš„<strong>å¤–éƒ¨å­˜å‚¨Provisioner</strong>ï¼ŒåŸºäºNFSåè®®å®ç°<strong>åŠ¨æ€PVä¾›ç»™</strong>ã€‚æ ¸å¿ƒèƒ½åŠ›æ˜¯ï¼š</p>
<ul>
<li>ç›‘å¬K8sä¸­PVCçš„åˆ›å»º/åˆ é™¤äº‹ä»¶ï¼›</li>
<li>ä¸ºæ¯ä¸ªPVCåœ¨NFSå…±äº«ç›®å½•ä¸‹<strong>è‡ªåŠ¨åˆ›å»ºç‹¬ç«‹å­ç›®å½•</strong>ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„PVï¼›</li>
<li>å½“PVCåˆ é™¤æ—¶ï¼Œæ ¹æ®é…ç½®<strong>å½’æ¡£æˆ–åˆ é™¤</strong>NFSå­ç›®å½•ï¼Œå®ç°PVçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</li>
</ul>
<h4 data-id="heading-4">2. åŠ¨æ€PVçš„æ ¸å¿ƒæµç¨‹</h4>
<ol>
<li><strong>ç”¨æˆ·åˆ›å»ºPVC</strong>ï¼šæŒ‡å®šå…³è”çš„StorageClassï¼ˆç»‘å®šNFS Provisionerï¼‰ï¼›</li>
<li><strong>Provisionerç›‘å¬</strong>ï¼šæ£€æµ‹åˆ°PVCåˆ›å»ºè¯·æ±‚ï¼Œè§¦å‘PVåˆ›å»ºé€»è¾‘ï¼›</li>
<li><strong>NFSå­ç›®å½•åˆ›å»º</strong>ï¼šåœ¨NFSå…±äº«ç›®å½•<code>/nfs-storage/k8s-pvs</code>ä¸‹ï¼Œç”Ÿæˆä»¥<code>å‘½åç©ºé—´-PVCåç§°-éšæœºä¸²</code>å‘½åçš„å­ç›®å½•ï¼›</li>
<li><strong>PVåˆ›å»ºä¸ç»‘å®š</strong>ï¼šProvisioneråˆ›å»ºPVï¼ŒæŒ‡å‘è¯¥NFSå­ç›®å½•ï¼Œå¹¶ä¸PVCå®Œæˆç»‘å®šï¼›</li>
<li><strong>PVCåˆ é™¤å›æ”¶</strong>ï¼šåˆ é™¤PVCæ—¶ï¼ŒProvisioneræ ¹æ®<code>archiveOnDelete</code>å‚æ•°ï¼Œå°†NFSå­ç›®å½•é‡å‘½åä¸º<code>archived-xxx</code>ï¼ˆå½’æ¡£ï¼‰æˆ–ç›´æ¥åˆ é™¤ã€‚</li>
</ol>
<h4 data-id="heading-5">3. StorageClassçš„ä½œç”¨</h4>
<p>StorageClassæ˜¯åŠ¨æ€PVçš„â€œæ¨¡æ¿â€ï¼Œæœ¬æ¬¡éƒ¨ç½²ä¸­æˆ‘ä»¬åˆ›å»ºäº†åä¸º<code>nfs-storage-class</code>çš„StorageClassï¼Œæ ¸å¿ƒé…ç½®åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>provisioner</code>ï¼šæŒ‡å®šä¸ºNFS Subdir External Provisionerï¼›</li>
<li><code>nfs.server</code>/<code>nfs.path</code>ï¼šNFSæœåŠ¡å™¨IPä¸å…±äº«ç›®å½•ï¼›</li>
<li><code>archiveOnDelete</code>ï¼šPVCåˆ é™¤æ—¶æ˜¯å¦å½’æ¡£NFSå­ç›®å½•ï¼ˆæœ¬æ¬¡è®¾ä¸º<code>true</code>ï¼‰ï¼›</li>
<li><code>defaultClass</code>ï¼šæ˜¯å¦è®¾ä¸ºé›†ç¾¤é»˜è®¤StorageClassï¼ˆæœ¬æ¬¡è®¾ä¸º<code>true</code>ï¼ŒæœªæŒ‡å®š<code>storageClassName</code>çš„PVCå°†è‡ªåŠ¨ä½¿ç”¨è¯¥ç±»ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">ä¸‰ã€å®æˆ˜éƒ¨ç½²æ­¥éª¤</h3>
<h4 data-id="heading-7">æ­¥éª¤1ï¼šç¯å¢ƒåˆ†æä¸å‰ç½®å‡†å¤‡</h4>
<p>é¦–å…ˆé€šè¿‡å‘½ä»¤æ£€æŸ¥é›†ç¾¤ä¸NFSç¯å¢ƒï¼Œç¡®ä¿éƒ¨ç½²å‰ææ»¡è¶³ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#Â 1.Â æ£€æŸ¥K8sèŠ‚ç‚¹çŠ¶æ€</span>
kubectlÂ <span class="hljs-keyword">get</span>Â nodes

<span class="hljs-meta">#Â 2.Â æ£€æŸ¥ç°æœ‰StorageClassï¼ˆç¡®è®¤æ— å†²çªï¼‰</span>
kubectlÂ <span class="hljs-keyword">get</span>Â storageclass

<span class="hljs-meta">#Â 3.Â æ£€æŸ¥Helmå®‰è£…çŠ¶æ€ï¼ˆåˆå§‹æœªå®‰è£…ï¼‰</span>
helmÂ listÂ -A

<span class="hljs-meta">#Â 4.Â å®‰è£…Helmï¼ˆé€šè¿‡snapå¿«é€Ÿå®‰è£…ï¼‰</span>
sudoÂ snapÂ installÂ helmÂ --classic

<span class="hljs-meta">#Â 5.Â éªŒè¯NFSæœåŠ¡å™¨å…±äº«ç›®å½•å¯ç”¨æ€§</span>
showmountÂ -eÂ <span class="hljs-number">192.168</span><span class="hljs-number">.99</span><span class="hljs-number">.22</span>
</code></pre>
<p>æ‰§è¡Œç»“æœï¼šNFSå…±äº«ç›®å½•<code>/nfs-storage/k8s-pvs</code>æ­£å¸¸æš´éœ²ï¼ŒHelmå®‰è£…å®Œæˆï¼ŒK8sé›†ç¾¤çŠ¶æ€æ­£å¸¸ã€‚</p>
<h4 data-id="heading-8">æ­¥éª¤2ï¼šHelméƒ¨ç½²NFS Subdir External Provisioner</h4>
<p>å€ŸåŠ©Helmä»“åº“å¿«é€Ÿéƒ¨ç½²Provisionerï¼Œç®€åŒ–é…ç½®ä¸ç®¡ç†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â 1.Â æ·»åŠ NFSÂ Provisionerçš„Helmä»“åº“</span>
helmÂ repoÂ addÂ nfs-subdir-external-provisionerÂ https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner/

<span class="hljs-comment">#Â 2.Â æ›´æ–°Helmä»“åº“ç´¢å¼•</span>
helmÂ repoÂ update

<span class="hljs-comment">#Â 3.Â å®‰è£…Provisionerï¼ˆæŒ‡å®šNFSå‚æ•°ã€StorageClassé…ç½®ï¼‰</span>
helmÂ installÂ nfs-provisionerÂ nfs-subdir-external-provisioner/nfs-subdir-external-provisionerÂ \
Â Â -nÂ kube-systemÂ \
Â Â --setÂ <span class="hljs-attr">nfs.server</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">99.22</span>Â \
Â Â --setÂ <span class="hljs-attr">nfs.path</span>=/nfs-storage/k8s-pvsÂ \
Â Â --setÂ <span class="hljs-attr">storageClass.name</span>=nfs-storage-classÂ \
Â Â --setÂ <span class="hljs-attr">storageClass.defaultClass</span>=<span class="hljs-literal">true</span>
</code></pre>
<ul>
<li><code>-n kube-system</code>ï¼šå°†Provisioneréƒ¨ç½²åœ¨K8sç³»ç»Ÿå‘½åç©ºé—´ï¼Œä¾¿äºç®¡ç†ï¼›</li>
<li><code>--set</code>å‚æ•°ï¼šæ ¸å¿ƒé…ç½®NFSæœåŠ¡å™¨ã€å…±äº«è·¯å¾„ã€StorageClassåç§°åŠé»˜è®¤å±æ€§ã€‚</li>
</ul>
<h4 data-id="heading-9">æ­¥éª¤3ï¼šéªŒè¯Provisioneréƒ¨ç½²çŠ¶æ€</h4>
<p>éƒ¨ç½²å®Œæˆåï¼Œæ£€æŸ¥Provisionerä¸StorageClassçš„è¿è¡ŒçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#Â 1.Â æ£€æŸ¥ProvisionerÂ PodçŠ¶æ€ï¼ˆç¡®è®¤Runningï¼‰</span>
kubectlÂ <span class="hljs-keyword">get</span>Â podsÂ -nÂ kube-systemÂ |Â grepÂ nfs-provisioner

<span class="hljs-meta">#Â 2.Â æ£€æŸ¥StorageClassï¼ˆç¡®è®¤åˆ›å»ºæˆåŠŸä¸”ä¸ºé»˜è®¤ï¼‰</span>
kubectlÂ <span class="hljs-keyword">get</span>Â storageclass

<span class="hljs-meta">#Â 3.Â æŸ¥çœ‹StorageClassè¯¦ç»†é…ç½®ï¼ˆéªŒè¯å‚æ•°æ­£ç¡®æ€§ï¼‰</span>
kubectlÂ describeÂ storageclassÂ nfs-storage-<span class="hljs-keyword">class</span>
</code></pre>
<p>æ‰§è¡Œç»“æœï¼šProvisioner Podå¤„äº<code>Running</code>çŠ¶æ€ï¼Œ<code>nfs-storage-class</code> StorageClassåˆ›å»ºæˆåŠŸå¹¶æ ‡è®°ä¸º<code>(default)</code>ï¼Œæ ¸å¿ƒå‚æ•°ä¸NFSé…ç½®ä¸€è‡´ã€‚</p>
<h4 data-id="heading-10">æ­¥éª¤4ï¼šéªŒè¯åŠ¨æ€PVåŠŸèƒ½</h4>
<p>é€šè¿‡åˆ›å»ºæµ‹è¯•PVCï¼ŒéªŒè¯åŠ¨æ€PVçš„åˆ›å»ºã€ç»‘å®šã€å›æ”¶å…¨æµç¨‹ï¼š</p>
<h5 data-id="heading-11">ï¼ˆ1ï¼‰åˆ›å»ºæµ‹è¯•PVC YAML</h5>
<p>æ–°å»º<code>test-nfs-pvc.yaml</code>ï¼Œå®šä¹‰PVCçš„å­˜å‚¨éœ€æ±‚ä¸å…³è”çš„StorageClassï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">apiVersion:</span>Â <span class="hljs-string">v1</span>
<span class="hljs-string">kind:</span>Â <span class="hljs-string">PersistentVolumeClaim</span>
<span class="hljs-attr">metadata:</span>
Â Â <span class="hljs-string">name:</span>Â <span class="hljs-string">test-nfs-pvc</span>
Â Â <span class="hljs-string">namespace:</span>Â <span class="hljs-string">ms-demo</span>Â Â <span class="hljs-comment">#Â æµ‹è¯•å‘½åç©ºé—´ï¼ˆéœ€æå‰å­˜åœ¨ï¼‰</span>
<span class="hljs-attr">spec:</span>
Â Â <span class="hljs-attr">accessModes:</span>
Â Â Â Â <span class="hljs-string">-</span>Â <span class="hljs-string">ReadWriteMany</span>Â Â <span class="hljs-comment">#Â NFSæ”¯æŒå¤šPodè¯»å†™</span>
Â Â <span class="hljs-attr">resources:</span>
Â Â Â Â <span class="hljs-attr">requests:</span>
Â Â Â Â Â Â <span class="hljs-string">storage:</span>Â <span class="hljs-string">100Mi</span>Â Â <span class="hljs-comment">#Â ç”³è¯·100Miå­˜å‚¨</span>
Â Â <span class="hljs-string">storageClassName:</span>Â <span class="hljs-string">nfs-storage-class</span>Â Â <span class="hljs-comment">#Â å…³è”éƒ¨ç½²çš„StorageClass</span>
</code></pre>
<h5 data-id="heading-12">ï¼ˆ2ï¼‰åˆ›å»ºPVCå¹¶éªŒè¯ç»‘å®š</h5>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#Â 1.Â åˆ›å»ºPVC</span>
kubectlÂ applyÂ -fÂ test-nfs-pvc.yaml

<span class="hljs-meta">#Â 2.Â æ£€æŸ¥PVCçŠ¶æ€ï¼ˆç¡®è®¤Boundï¼‰</span>
kubectlÂ <span class="hljs-keyword">get</span>Â pvcÂ -nÂ ms-demo

<span class="hljs-meta">#Â 3.Â æ£€æŸ¥PVï¼ˆç¡®è®¤è‡ªåŠ¨åˆ›å»ºå¹¶ç»‘å®šï¼‰</span>
kubectlÂ <span class="hljs-keyword">get</span>Â pvÂ |Â grepÂ test-nfs-pvc
</code></pre>
<p>æ‰§è¡Œç»“æœï¼šPVCçŠ¶æ€ä¸º<code>Bound</code>ï¼ŒPVè‡ªåŠ¨åˆ›å»ºä¸”ä¸PVCå®Œæˆç»‘å®šã€‚</p>
<h5 data-id="heading-13">ï¼ˆ3ï¼‰éªŒè¯NFSå­ç›®å½•åˆ›å»º</h5>
<p>ç™»å½•NFSæœåŠ¡å™¨ï¼Œæ£€æŸ¥å…±äº«ç›®å½•ä¸‹æ˜¯å¦ç”Ÿæˆå¯¹åº”å­ç›®å½•ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">sshÂ <span class="hljs-number">192.168</span><span class="hljs-number">.99</span><span class="hljs-number">.22</span>Â <span class="hljs-string">"lsÂ -laÂ /nfs-storage/k8s-pvs/"</span>
</code></pre>
<p>æ‰§è¡Œç»“æœï¼šç”Ÿæˆ<code>ms-demo-test-nfs-pvc-xxx</code>æ ¼å¼çš„å­ç›®å½•ï¼Œè¯æ˜Provisionerå·²æˆåŠŸåˆ›å»ºNFSå­˜å‚¨ç›®å½•ã€‚</p>
<h5 data-id="heading-14">ï¼ˆ4ï¼‰éªŒè¯PVCåˆ é™¤ä¸PVå›æ”¶</h5>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment">#Â 1.Â åˆ é™¤æµ‹è¯•PVC</span>
kubectlÂ <span class="hljs-keyword">delete</span>Â -fÂ test-nfs-pvc.yaml

<span class="hljs-comment">#Â 2.Â æ£€æŸ¥PVï¼ˆç¡®è®¤è‡ªåŠ¨åˆ é™¤ï¼‰</span>
kubectlÂ getÂ pvÂ |Â <span class="hljs-keyword">grep</span>Â pvc-xxxÂ Â <span class="hljs-comment">#Â æ›¿æ¢ä¸ºå®é™…PVåç§°</span>

<span class="hljs-comment">#Â 3.Â æ£€æŸ¥NFSå­ç›®å½•ï¼ˆç¡®è®¤å½’æ¡£ï¼‰</span>
sshÂ <span class="hljs-number">192.168</span>.<span class="hljs-number">99.22</span>Â <span class="hljs-string">"lsÂ -laÂ /nfs-storage/k8s-pvs/"</span>
</code></pre>
<p>æ‰§è¡Œç»“æœï¼šPVè¢«è‡ªåŠ¨åˆ é™¤ï¼ŒNFSå­ç›®å½•é‡å‘½åä¸º<code>archived-ms-demo-test-nfs-pvc-xxx</code>ï¼ˆå› <code>archiveOnDelete=true</code>ï¼Œæ•°æ®è¢«å½’æ¡£ä¿ç•™ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-15">å››ã€éƒ¨ç½²ç»“æœä¸æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-16">1. æ ¸å¿ƒéªŒè¯ç»“æœ</h4>
<p>âœ… NFS Subdir External Provisioner Podæ­£å¸¸è¿è¡Œï¼ˆ<code>kube-system</code>å‘½åç©ºé—´ï¼‰ï¼› âœ… <code>nfs-storage-class</code> StorageClassåˆ›å»ºæˆåŠŸå¹¶è®¾ä¸ºé›†ç¾¤é»˜è®¤ï¼› âœ… åŠ¨æ€PVåŠŸèƒ½ç”Ÿæ•ˆï¼šPVCåˆ›å»ºâ†’PVè‡ªåŠ¨åˆ›å»ºâ†’NFSå­ç›®å½•ç”Ÿæˆï¼› âœ… å›æ”¶ç­–ç•¥ç”Ÿæ•ˆï¼šPVCåˆ é™¤â†’PVè‡ªåŠ¨åˆ é™¤â†’NFSå­ç›®å½•å½’æ¡£ã€‚</p>
<h4 data-id="heading-17">2. å…³é”®æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong>NFSæƒé™é…ç½®</strong>ï¼šNFSå…±äº«ç›®å½•éœ€èµ‹äºˆK8sèŠ‚ç‚¹è¯»å†™æƒé™ï¼Œé¿å…Provisioneråˆ›å»ºå­ç›®å½•å¤±è´¥ï¼›</li>
<li><strong><code>archiveOnDelete</code>å‚æ•°</strong>ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®®è®¾ä¸º<code>true</code>ï¼ˆå½’æ¡£æ•°æ®ï¼‰ï¼Œæµ‹è¯•ç¯å¢ƒå¯è®¾ä¸º<code>false</code>ï¼ˆç›´æ¥åˆ é™¤ï¼‰ï¼›</li>
<li><strong>å‘½åç©ºé—´ç®¡ç†</strong>ï¼šProvisioneréƒ¨ç½²åœ¨<code>kube-system</code>ï¼ŒPVCéœ€åœ¨ç›®æ ‡å‘½åç©ºé—´åˆ›å»ºï¼ˆå¦‚æœ¬æ¬¡<code>ms-demo</code>ï¼‰ï¼›</li>
<li><strong>é»˜è®¤StorageClass</strong>ï¼šè®¾ä¸ºé»˜è®¤åï¼ŒæœªæŒ‡å®š<code>storageClassName</code>çš„PVCå°†è‡ªåŠ¨ä½¿ç”¨NFSå­˜å‚¨ï¼Œéœ€é¿å…å†²çªï¼›</li>
<li><strong>NFSæœåŠ¡å™¨ç¨³å®šæ€§</strong>ï¼šNFSæœåŠ¡å™¨éœ€ä¿è¯é«˜å¯ç”¨ï¼Œå¦åˆ™ä¼šå½±å“æ‰€æœ‰ä¾èµ–è¯¥å­˜å‚¨çš„Podã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-18">äº”ã€æ€»ç»“</h3>
<p>é€šè¿‡Helméƒ¨ç½²NFS Subdir External Provisionerï¼Œæˆ‘ä»¬å¿«é€Ÿå®ç°äº†K8sé›†ç¾¤çš„<strong>NFSåŠ¨æ€PVä¾›ç»™</strong>ï¼Œå½»åº•å‘Šåˆ«äº†æ‰‹åŠ¨åˆ›å»ºPVçš„ç¹çæµç¨‹ã€‚ä»ç¯å¢ƒå‡†å¤‡ã€Provisioneréƒ¨ç½²ï¼Œåˆ°åŠ¨æ€PVçš„åˆ›å»ºã€ç»‘å®šã€å›æ”¶å…¨æµç¨‹éªŒè¯ï¼Œæ•´å¥—æ–¹æ¡ˆå…·å¤‡<strong>éƒ¨ç½²ç®€å•ã€ç®¡ç†é«˜æ•ˆã€å…¼å®¹æ€§å¼º</strong>çš„ç‰¹ç‚¹ï¼Œéå¸¸é€‚åˆä¸­å°å‹K8sé›†ç¾¤çš„å…±äº«å­˜å‚¨åœºæ™¯ã€‚</p>
<p>åç»­å¯åŸºäºè¯¥æ–¹æ¡ˆï¼Œä¸ºåº”ç”¨ï¼ˆå¦‚æ•°æ®åº“ã€ä¸­é—´ä»¶ã€æ–‡ä»¶æœåŠ¡ï¼‰é…ç½®æŒä¹…åŒ–å­˜å‚¨ï¼Œç»“åˆ<code>ReadWriteMany</code>è®¿é—®æ¨¡å¼ï¼Œå®ç°å¤šPodå…±äº«æ•°æ®çš„éœ€æ±‚ï¼Œè¿›ä¸€æ­¥æå‡K8sé›†ç¾¤çš„å­˜å‚¨ç®¡ç†æ•ˆç‡ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è½¬è‡³ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzcwMTA1NjQyNQ%3D%3D%26action%3Dgetalbum%26album_id%3D4350369381197905931%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzcwMTA1NjQyNQ==&amp;action=getalbum&amp;album_id=4350369381197905931#wechat_redirect" ref="nofollow noopener noreferrer">mp.weixin.qq.com/mp/appmsgalâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nestjså­¦ä¹ 9ï¼šè£…é¥°å™¨]]></title>    <link>https://juejin.cn/post/7598899986856525830</link>    <guid>https://juejin.cn/post/7598899986856525830</guid>    <pubDate>2026-01-26T03:09:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598899986856525830" data-draft-id="7594627998838947882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nestjså­¦ä¹ 9ï¼šè£…é¥°å™¨"/> <meta itemprop="keywords" content="NestJS"/> <meta itemprop="datePublished" content="2026-01-26T03:09:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ±Ÿä¸œæµæ°´"/> <meta itemprop="url" content="https://juejin.cn/user/1151943917181880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nestjså­¦ä¹ 9ï¼šè£…é¥°å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943917181880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ±Ÿä¸œæµæ°´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:09:15.000Z" title="Mon Jan 26 2026 03:09:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Nest çš„åŠŸèƒ½éƒ½æ˜¯å¤§å¤šé€šè¿‡è£…é¥°å™¨æ¥ä½¿ç”¨çš„ï¼Œæœ¬æ–‡æŠŠæ‰€æœ‰çš„è£…é¥°å™¨è¿‡ä¸€éã€‚æ–‡ç« æ¥æºè‡ªç¥å…‰çš„ä»˜è´¹æ–‡ç« ï¼Œæ¬è¿åˆ°è¿™é‡Œåªæ˜¯ä¸ºäº†è‡ªå·±å¤ä¹ ã€‚</p>
<h2 data-id="heading-0">@Module @Controller @Injectable</h2>
<p>Nest æä¾›äº†ä¸€å¥—æ¨¡å—ç³»ç»Ÿï¼Œé€šè¿‡ @Moduleå£°æ˜æ¨¡å—ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6704e56011864cd7887208be004f21ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=%2Boz%2FlHlrLT10pWOC4KvSCHdPSoQ%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡ @Controllerã€@Injectable åˆ†åˆ«å£°æ˜å…¶ä¸­çš„ controller å’Œ providerï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/378d78e08d2e45f8a1fc67d78de0753a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=0daA0FPqXJoV8Zp%2FEGRvMXrP2gY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7883a3483f04441a73cd27784301e79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=k0wOtIfAlYxJHsmpllyVKh1Tt0g%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¿™ä¸ª provider å¯ä»¥æ˜¯ä»»ä½•çš„ class</strong>ï¼Œä¸ä¸€å®šéè¦æ˜¯<code>service</code>ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä»»ä½•ä¸€ä¸ªç±»ä½œä¸º<code>provider</code>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7361f9b96cd64b8ba9e1a420d3c11d78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=jQ8cLptgiHV6u8ecAqUt4NRObnQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">@Inject @Optional @Global</h2>
<p>æ³¨å…¥çš„æ–¹å¼å¯ä»¥æ˜¯æ„é€ å™¨æ³¨å…¥å’Œå±æ€§æ³¨å…¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9bb33903a964ac3ab85d6aaba3d9c37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=7zulL7w3OhlATN9pZs%2F9e4JgQf8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc388637b5e9429bb2f2a8a7e8a20935~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=6AYgmSD7EE8X3oaKAy9rQbMsASA%3D" alt="image.png" loading="lazy"/></p>
<p>å±æ€§æ³¨å…¥è¦æŒ‡å®šæ³¨å…¥çš„ tokenï¼Œ<strong>å¯èƒ½æ˜¯ class ä¹Ÿå¯èƒ½æ˜¯ string</strong>ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ useFactoryã€useValue ç­‰æ–¹å¼å£°æ˜ providerï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09a1a7d3aa3d4c5ca0f06081d86775a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=vGQLW4qER9tVopHi08TThU64D2w%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ—¶å€™ä¹Ÿéœ€è¦é€šè¿‡ @Inject æŒ‡å®šæ³¨å…¥çš„ tokenï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6b84459f42546e8a022ceb27ebdb57f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=tpXaUdCK9obYSQkZkDFjO81cexI%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™äº›æ³¨å…¥çš„ä¾èµ–å¦‚æœæ²¡æœ‰çš„è¯ï¼Œåˆ›å»ºå¯¹è±¡æ—¶ä¼šæŠ¥é”™ã€‚ä½†å¦‚æœå®ƒæ˜¯å¯é€‰çš„ï¼Œä½ å¯ä»¥ç”¨ <code>@Optional</code> å£°æ˜ä¸€ä¸‹ï¼Œè¿™æ ·æ²¡æœ‰å¯¹åº”çš„ provider ä¹Ÿèƒ½æ­£å¸¸åˆ›å»ºè¿™ä¸ªå¯¹è±¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6957271d4ab744ae978d2095d47140d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=iZXQ22ohETND5KAyNW140p7ppSU%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœæ¨¡å—è¢«å¾ˆå¤šåœ°æ–¹éƒ½å¼•ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥ç”¨ @Global æŠŠå®ƒå£°æ˜ä¸ºå…¨å±€çš„ï¼Œè¿™æ ·å®ƒ exports çš„ provider å°±å¯ä»¥ç›´æ¥æ³¨å…¥äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1348652f2924067ba39d1822bbc0820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=dhEbWpyftCLxfNw7O83UVhJmMlU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">@Query @Param @Body @Headers @Ip @Session @HostParam @Req</h2>
<p>è¿™é‡Œçš„ @Query æ˜¯å– url åçš„ ?bbb=trueï¼Œè€Œ @Param æ˜¯å–è·¯å¾„ä¸­çš„å‚æ•°ï¼Œæ¯”å¦‚ /xxx/111 ç§çš„ 111ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd7bd54fae334479bd677c2ab60b74cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=vdEg4qifVnT%2BCmIxzHfR5mSrmgg%3D" alt="image.png" loading="lazy"/></p>
<p>æ­¤å¤–ï¼Œå¦‚æœæ˜¯ @Post è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡ @Body å–åˆ° body éƒ¨åˆ†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a03a459b46b34cc681860aaebe6bef59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=bBdIno1Q74GRQ9gPTTSxz2KLWpU%3D" alt="image.png" loading="lazy"/></p>
<p>ä½ å¯ä»¥é€šè¿‡ @Headers è£…é¥°å™¨å–æŸä¸ªè¯·æ±‚å¤´ æˆ–è€…å…¨éƒ¨è¯·æ±‚å¤´ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a9f409b013b4e17952ddd2630944572~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=IYx1E111mQ0I3LA8r5bXzQiEx8Y%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e7d7f9d7043414295add7c1479a13c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=Hcfs9LXv%2FqMVO9szbn7zWFroEw8%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡ @Ip æ‹¿åˆ°è¯·æ±‚çš„ ipï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/480ed6c3adad447999318b2a32ef7920~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=62tXpC7YWj%2FgoR973oJl7BEFVU0%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡ @Session æ‹¿åˆ° session å¯¹è±¡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5160848f37c34e0bb810c57166651e55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=cwQKs94Q8JvWxNq2l414xhJR1pc%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†è¦ä½¿ç”¨ session éœ€è¦å®‰è£…ä¸€ä¸ª express ä¸­é—´ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js">npm install express-session
</code></pre>
<p>@HostParam ç”¨äºå–åŸŸåéƒ¨åˆ†çš„å‚æ•°ï¼š</p>
<p>è¿™æ ·æŒ‡å®š controller çš„ç”Ÿæ•ˆè·¯å¾„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">HostParam</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

@<span class="hljs-title class_">Controller</span>({ <span class="hljs-attr">host</span>: <span class="hljs-string">':host.0.0.1'</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">'aaa'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AaaController</span> {
    @<span class="hljs-title class_">Get</span>(<span class="hljs-string">'bbb'</span>)
    <span class="hljs-title function_">hello</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'hello'</span>;
    }
}
</code></pre>
<p>controller é™¤äº†å¯ä»¥æŒ‡å®šæŸäº› path ç”Ÿæ•ˆå¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®š hostã€‚</p>
<p>è¿™æ—¶å€™ä½ ä¼šå‘ç°åªæœ‰ host æ»¡è¶³ xx.0.0.1 çš„æ—¶å€™æ‰ä¼šè·¯ç”±åˆ°è¿™ä¸ª controllerã€‚</p>
<p>host é‡Œçš„å‚æ•°å°±å¯ä»¥é€šè¿‡ @HostParam å–å‡ºæ¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">HostParam</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

@<span class="hljs-title class_">Controller</span>({ <span class="hljs-attr">host</span>: <span class="hljs-string">':host.0.0.1'</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">'aaa'</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AaaController</span> {
    @<span class="hljs-title class_">Get</span>(<span class="hljs-string">'bbb'</span>)
    <span class="hljs-title function_">hello</span>(<span class="hljs-params">@HostParam(<span class="hljs-string">'host'</span>) host</span>) {
        <span class="hljs-keyword">return</span> host;
    }
}
</code></pre>
<p>å‰é¢å–çš„è¿™äº›éƒ½æ˜¯ request é‡Œçš„å±æ€§ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥æ³¨å…¥ request å¯¹è±¡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8e25a60a29c4989ab6bcb18eec259d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=5PKUjBZn694mPj%2BRjtK%2F4Jt55Ck%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡ @Req æˆ–è€… @Request è£…é¥°å™¨ï¼Œè¿™ä¿©æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31412309a91645099e4b3be3c5370d26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=8trAwP5V%2BPLU%2FsV12D2aBYsVE08%3D" alt="image.png" loading="lazy"/></p>
<p>æ³¨å…¥ request å¯¹è±¡åï¼Œå¯ä»¥æ‰‹åŠ¨å–ä»»ä½•å‚æ•°ã€‚</p>
<h2 data-id="heading-3">@Res @HttpCode @Redirect @Render</h2>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ @Res æˆ–è€… @Response æ³¨å…¥ response å¯¹è±¡ï¼Œåªä¸è¿‡ response å¯¹è±¡æœ‰ç‚¹ç‰¹æ®Šï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c8486054da24a6eab36e5a1a853939f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=2OTYTsp7mCMbp%2FQ253H%2BLvCh2mk%3D" alt="image.png" loading="lazy"/></p>
<p>å½“ä½ æ³¨å…¥ response å¯¹è±¡ä¹‹åï¼ŒæœåŠ¡å™¨ä¼šä¸€ç›´æ²¡æœ‰å“åº”ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e55b2ff5dfa4d64b225fcebc98673c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=XoQ0yCQuQbvJiP2apmHUaYGF%2FtI%3D" alt="image.png" loading="lazy"/></p>
<p>å› ä¸ºè¿™æ—¶å€™ Nest å°±ä¸ä¼šå†æŠŠ handler è¿”å›å€¼ä½œä¸ºå“åº”å†…å®¹äº†ã€‚</p>
<p>ä½ å¯ä»¥è‡ªå·±è¿”å›å“åº”ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/334a284cb88d47c19213064a266d4de2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=lTfw7O5WCrqIqBxt5I0Wuk3HDFU%3D" alt="image.png" loading="lazy"/></p>
<p>Nest è¿™ä¹ˆè®¾è®¡æ˜¯ä¸ºäº†é¿å…ä½ è‡ªå·±è¿”å›çš„å“åº”å’Œ Nest è¿”å›çš„å“åº”çš„å†²çªã€‚</p>
<p>å¦‚æœä½ ä¸ä¼šè‡ªå·±è¿”å›å“åº”ï¼Œå¯ä»¥é€šè¿‡ passthrough å‚æ•°å‘Šè¯‰ Nestï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e635d6856814cc4beb36c304f7337c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=WKm4KQmSkZZNDJNMrhjZR3GTKy4%3D" alt="image.png" loading="lazy"/></p>
<p>é™¤äº†æ³¨å…¥ @Res ä¸ä¼šè¿”å›å“åº”å¤–ï¼Œæ³¨å…¥ @Next ä¹Ÿä¸ä¼šï¼š</p>
<p>handler é»˜è®¤è¿”å›çš„æ˜¯ 200 çš„çŠ¶æ€ç ï¼Œä½ å¯ä»¥é€šè¿‡ @HttpCode ä¿®æ”¹å®ƒï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7467ae918e645c0b89170a65a15c344~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=JRvllShBGGFlf3oMSUPVfz%2F8wOs%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f331d443c4d4b668fa2af936ec42276~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=f7I1VfwXEIsnXczIdTkITNBpgf8%3D" alt="image.png" loading="lazy"/></p>
<p>æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ @Redirect è£…é¥°å™¨æ¥æŒ‡å®šè·¯ç”±é‡å®šå‘çš„ urlï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02f4cf37e8674da086c7cc4dc34c6d66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=v2grsloEiVekkVWof5%2FG1zuDEhs%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54b36ea6174b4da9aa1b83d4bdbf4d07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=aOvUXQHSQLInG6wus3r0Tcw8h%2Fs%3D" alt="d563d9e5836f49038f9ad7db40702f85~tplv-k3u1fbpfcp-jj-mark_1512_0_0_0_q75.awebp" loading="lazy"/></p>
<p>æˆ–è€…åœ¨è¿”å›å€¼çš„åœ°æ–¹è®¾ç½® urlï¼š</p>
<pre><code class="hljs language-js" lang="js">@<span class="hljs-title class_">Get</span>(<span class="hljs-string">'xxx'</span>)
@<span class="hljs-title class_">Redirect</span>()
<span class="hljs-keyword">async</span> <span class="hljs-title function_">jump</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">url</span>: <span class="hljs-string">'https://www.baidu.com'</span>,
      <span class="hljs-attr">statusCode</span>: <span class="hljs-number">302</span>
    }  
}
</code></pre>
<p><strong>301 å’Œ 302 çš„åŒºåˆ«ï¼š</strong></p>




















<table><thead><tr><th>è®¿é—®é˜¶æ®µ</th><th>301 æ°¸ä¹…é‡å®šå‘</th><th>302 ä¸´æ—¶é‡å®šå‘</th></tr></thead><tbody><tr><td><strong>ç¬¬ä¸€æ¬¡è®¿é—®</strong></td><td>1. æµè§ˆå™¨è¯·æ±‚ <code>old</code> â†’ æœåŠ¡å™¨è¿”å› 301 + æ–°åœ°å€ï¼›2. æµè§ˆå™¨è·³è½¬ <code>new</code>ï¼Œå¹¶<strong>æŠŠã€Œoldâ†’newã€çš„å…³ç³»æ°¸ä¹…å­˜åœ¨æœ¬åœ°ç¼“å­˜</strong></td><td>1. æµè§ˆå™¨è¯·æ±‚ <code>old</code> â†’ æœåŠ¡å™¨è¿”å› 302 + æ–°åœ°å€2. æµè§ˆå™¨è·³è½¬ <code>new</code>ï¼Œ<strong>ä¸ç¼“å­˜ä»»ä½•å…³ç³»</strong></td></tr><tr><td><strong>ç¬¬äºŒæ¬¡è®¿é—®</strong></td><td>æµè§ˆå™¨ç›´æ¥æŸ¥æœ¬åœ°ç¼“å­˜ï¼šâ€œå“¦ï¼Œold æ°¸ä¹…æŒ‡å‘ newâ€ â†’ ç›´æ¥è·³ newï¼Œ<strong>æ ¹æœ¬ä¸å‘è¯·æ±‚ç»™æœåŠ¡å™¨</strong></td><td>æµè§ˆå™¨é‡æ–°å‘è¯·æ±‚åˆ° <code>old</code> â†’ æœåŠ¡å™¨å†æ¬¡è¿”å› 302 â†’ å†è·³ new</td></tr></tbody></table>
<p>ä½ è¿˜å¯ä»¥ç»™è¿”å›çš„å“åº”å†…å®¹æŒ‡å®šæ¸²æŸ“å¼•æ“ï¼Œä¸è¿‡è¿™éœ€è¦å…ˆè¿™æ ·è®¾ç½®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b714afd922ea456a99ba03fda6eea460~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=qHq30En1FtT1y%2B5fKiQ%2BCTqHvZs%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ†åˆ«æŒ‡å®šé™æ€èµ„æºçš„è·¯å¾„å’Œæ¨¡ç‰ˆçš„è·¯å¾„ï¼Œå¹¶æŒ‡å®šæ¨¡ç‰ˆå¼•æ“ä¸º handlerbarsã€‚</p>
<p>å½“ç„¶ï¼Œè¿˜éœ€è¦å®‰è£…æ¨¡ç‰ˆå¼•æ“çš„åŒ… hbsï¼š</p>
<pre><code class="hljs language-js" lang="js">npm install --save hbs
</code></pre>
<p>ç„¶åå‡†å¤‡å›¾ç‰‡å’Œæ¨¡ç‰ˆæ–‡ä»¶ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cb4e5e00f5c47c1818fa2e1187abe26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=hleyxKDG8n5Tl7nncUnGhEOpgcU%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ handler é‡ŒæŒ‡å®šæ¨¡ç‰ˆå’Œæ•°æ®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10232aea806b436fbede7470a9691a8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=Enj5VTQKDEmmcCG0EdND7opS81E%3D" alt="image.png" loading="lazy"/></p>
<p>å°±å¯ä»¥çœ‹åˆ°æ¸²æŸ“å‡ºçš„ html äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fb204cd6bf444668b8ac6b80b476551~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001755&amp;x-signature=JJb%2BQVDJv8ZEITXFd3U1Jc2gV90%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>è¿™èŠ‚æˆ‘ä»¬æ¢³ç†äº†ä¸‹ Nest å…¨éƒ¨çš„è£…é¥°å™¨</p>
<p>æ¨¡å—çš„è£…é¥°å™¨ï¼š</p>
<ul>
<li>@Moduleï¼š å£°æ˜ Nest æ¨¡å—</li>
<li>@Controllerï¼šå£°æ˜æ¨¡å—é‡Œçš„ controller</li>
<li>@Injectableï¼šå£°æ˜æ¨¡å—é‡Œå¯ä»¥æ³¨å…¥çš„ provider</li>
<li>@Injectï¼šé€šè¿‡ token æ‰‹åŠ¨æŒ‡å®šæ³¨å…¥çš„ providerï¼Œtoken å¯ä»¥æ˜¯ class æˆ–è€… string</li>
<li>@Optionalï¼šå£°æ˜æ³¨å…¥çš„ provider æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥ä¸ºç©º</li>
<li>@Globalï¼šå£°æ˜å…¨å±€æ¨¡å—</li>
</ul>
<p>è¯·æ±‚ä½“çš„è£…é¥°å™¨ï¼š</p>
<ul>
<li>@Paramï¼šå–å‡º url ä¸­çš„å‚æ•°ï¼Œæ¯”å¦‚ /aaa/:id ä¸­çš„ id</li>
<li>@Query: å–å‡º query éƒ¨åˆ†çš„å‚æ•°ï¼Œæ¯”å¦‚ /aaa?name=xx ä¸­çš„ name</li>
<li>@Bodyï¼šå–å‡ºè¯·æ±‚ bodyï¼Œé€šè¿‡ dto class æ¥æ¥æ”¶</li>
<li>@Headersï¼šå–å‡ºæŸä¸ªæˆ–å…¨éƒ¨è¯·æ±‚å¤´</li>
<li>@Sessionï¼šå–å‡º session å¯¹è±¡ï¼Œéœ€è¦å¯ç”¨ express-session ä¸­é—´ä»¶</li>
<li>@HostParmï¼š å–å‡º host é‡Œçš„å‚æ•°</li>
<li>@Reqã€@Requestï¼šæ³¨å…¥ request å¯¹è±¡</li>
</ul>
<p>å“åº”ä½“çš„è£…é¥°å™¨ï¼š</p>
<ul>
<li>@Resã€@Responseï¼šæ³¨å…¥ response å¯¹è±¡ï¼Œä¸€æ—¦æ³¨å…¥äº†è¿™ä¸ª Nest å°±ä¸ä¼šæŠŠè¿”å›å€¼ä½œä¸ºå“åº”äº†ï¼Œé™¤éæŒ‡å®š passthrough ä¸ºtrue</li>
<li>@HttpCodeï¼š ä¿®æ”¹å“åº”çš„çŠ¶æ€ç </li>
<li>@Headerï¼šä¿®æ”¹å“åº”å¤´</li>
<li>@Redirectï¼šæŒ‡å®šé‡å®šå‘çš„ url</li>
<li>@Renderï¼šæŒ‡å®šæ¸²æŸ“ç”¨çš„æ¨¡ç‰ˆå¼•æ“</li>
</ul>
<p>æŠŠè¿™äº›è£…é¥°å™¨ç”¨ç†Ÿï¼Œå°±æŒæ¡äº† nest å¤§éƒ¨åˆ†åŠŸèƒ½äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL 8.x å·²æˆäº‹å®æ ‡å‡†ï¼Œä½†è¿™äº›â€œå‘â€æ‰åˆšåˆšæš´éœ²]]></title>    <link>https://juejin.cn/post/7599094262592946186</link>    <guid>https://juejin.cn/post/7599094262592946186</guid>    <pubDate>2026-01-26T02:41:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599094262592946186" data-draft-id="7598947628468699182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL 8.x å·²æˆäº‹å®æ ‡å‡†ï¼Œä½†è¿™äº›â€œå‘â€æ‰åˆšåˆšæš´éœ²"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-26T02:41:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©™åºå‘˜å°ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/1546375522426169"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL 8.x å·²æˆäº‹å®æ ‡å‡†ï¼Œä½†è¿™äº›â€œå‘â€æ‰åˆšåˆšæš´éœ²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1546375522426169/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©™åºå‘˜å°ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:41:06.000Z" title="Mon Jan 26 2026 02:41:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ ä¸äº†è§£8.xçš„å‘ï¼Œé‚£è¯·ä½ ä¸€å®šè¦ä»å¤´å¼€å§‹é˜…è¯»æœ¬æ–‡ï¼Œå¦‚æœä½ å·²ç»æ·±é™·8.xçš„å‘ä¸­ï¼Œé‚£è¯·ä½ ä»ç¬¬ä¸ƒç« å¼€å§‹è¯»ï¼Œå¸Œæœ›è¿™ç« èƒ½ç»™ä½ è§£å†³æ€è·¯</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆ MySQL 8 å·²ç»ä¸æ˜¯ã€Œå¯é€‰å‡çº§ã€</h2>
<p>å¦‚æœç°åœ¨è¿˜åœ¨è®¨è®ºâ€œè¦ä¸è¦ä¸Š MySQL 8â€ï¼Œé‚£è¿™ä¸ªé—®é¢˜æœ¬èº«å°±å·²ç»æœ‰ç‚¹è¿‡æ—¶äº†ã€‚</p>
<p>è¿‡å»ä¸¤å¹´é‡Œï¼ŒMySQL ç‰ˆæœ¬çš„é€‰æ‹©æƒï¼Œæ­£åœ¨ä»ä¸šåŠ¡å›¢é˜Ÿæ‰‹é‡Œä¸€ç‚¹ç‚¹æ¶ˆå¤±ã€‚æœ€ç›´è§‚çš„å˜åŒ–æ¥è‡ªäº‘å‚å•†ã€‚æ— è®ºæ˜¯é˜¿é‡Œäº‘ã€è…¾è®¯äº‘è¿˜æ˜¯ AWSï¼Œæ–°å»ºå®ä¾‹æ—¶ï¼ŒMySQL çš„é»˜è®¤ç‰ˆæœ¬å·²ç»å…¨é¢åˆ‡åˆ° 8.xã€‚5.7 è¿˜åœ¨ï¼Œä½†é€šå¸¸è¢«æ”¾è¿›ã€Œå†å²ç‰ˆæœ¬ã€æˆ–è€…ã€Œä¸æ¨èã€é‡Œï¼Œå‰é¢ä¼šæŒ‚ä¸€ä¸ªå¾ˆå…‹åˆ¶ä½†æ„å‘³æ˜ç¡®çš„æç¤ºã€‚</p>
<p>ä¸€å¼€å§‹æˆ‘ä¹Ÿæ²¡å¤ªåœ¨æ„ã€‚é»˜è®¤ç‰ˆæœ¬è¿™ç§ä¸œè¥¿ï¼Œæ”¹ä¸€ä¸‹å°±å¥½äº†ã€‚åæ¥å‘ç°ï¼Œæ–°é¡¹ç›®æ ¹æœ¬ä¸è®©ä½ æ”¹ã€‚æœ‰çš„äº‘ç¯å¢ƒç›´æ¥åœ¨æ§åˆ¶å°æŠŠ 5.7 éšè—æ‰ï¼Œæœ‰çš„åœ¨å†…éƒ¨è§„èŒƒé‡Œå†™å¾—å¾ˆæ¸…æ¥šï¼š<strong>æ–°ç³»ç»Ÿä¸å…è®¸ä½¿ç”¨ MySQL 5.7</strong>ã€‚ç†ç”±ä¹Ÿå¾ˆç®€å•â€”â€”å®˜æ–¹ç”Ÿå‘½å‘¨æœŸã€é•¿æœŸç»´æŠ¤ã€å®‰å…¨åˆè§„ï¼Œå…¨éƒ½ç«™åœ¨ 8.x é‚£ä¸€è¾¹ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œå‡çº§è¿™ä»¶äº‹å·²ç»ä¸æ˜¯â€œæŠ€æœ¯é€‰å‹â€ï¼Œè€Œæ˜¯â€œæ—¶é—´é—®é¢˜â€ã€‚</p>
<hr/>
<p>çœŸæ­£è®©äººä¸èˆ’æœçš„åœ°æ–¹åœ¨äºï¼š MySQL 8 å¹¶ä¸æ˜¯ä¸€ä¸ªâ€œæ— æ„Ÿå‡çº§â€ã€‚</p>
<p>åœ¨ 5.7 æ—¶ä»£ï¼Œå¤§å¤šæ•°ç³»ç»Ÿå¯¹æ•°æ®åº“çš„è¦æ±‚å…¶å®å¾ˆæœ´ç´ ï¼š</p>
<ul>
<li>SQL èƒ½è·‘</li>
<li>ç»“æœå·®ä¸å¤šå¯¹</li>
<li>æ€§èƒ½åœ¨å¯æ¥å—èŒƒå›´å†…</li>
</ul>
<p>å¾ˆå¤šéšå«å‰æï¼Œä»æ¥æ²¡äººæ˜è¯´ï¼Œä½†å¤§å®¶éƒ½é»˜è®¤æˆç«‹ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>æ’åºç»“æœâ€œçœ‹èµ·æ¥æ˜¯ç¨³å®šçš„â€</li>
<li>group by æ²¡å†™å…¨å­—æ®µä¹Ÿèƒ½è¿”å›ç‚¹ä¸œè¥¿</li>
<li>å­—ç¬¦ä¸²å’Œæ•°å­—æ··ç€æ¯”ï¼Œæ•°æ®åº“ä¼šå¸®ä½ å…œåº•</li>
</ul>
<p>è¿™äº›è¡Œä¸ºï¼Œåœ¨ 5.7 é‡Œå¹¶ä¸ç½•è§ï¼Œç”šè‡³å¯ä»¥è¯´æ˜¯è¢«é•¿æœŸä¾èµ–çš„â€œç‰¹æ€§â€ã€‚è€Œ MySQL 8 åšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯å¼€å§‹ç³»ç»Ÿæ€§åœ°æ‹†æ‰è¿™äº›â€œå…œåº•â€ã€‚</p>
<hr/>
<p>å¾ˆå¤šäººå‡çº§åç¬¬ä¸€ååº”æ˜¯ï¼š</p>
<blockquote>
<p>MySQL 8 æ€ä¹ˆè¿™ä¹ˆä¸¥æ ¼ï¼Ÿ ä»¥å‰èƒ½è·‘çš„ SQLï¼Œç°åœ¨å±…ç„¶ç›´æ¥æŠ¥é”™ã€‚</p>
</blockquote>
<p>ä½†ç«™åœ¨ç°åœ¨å›å¤´çœ‹ï¼Œè¿™ä¸ªåˆ¤æ–­å…¶å®æœ‰ç‚¹æœ¬æœ«å€’ç½®ã€‚é—®é¢˜ä¸åœ¨äº MySQL 8 å˜â€œæ¿€è¿›â€äº†ï¼Œè€Œåœ¨äº <strong>æˆ‘ä»¬å†™çš„ SQLï¼Œæœ¬æ¥å°±ç«™åœ¨ä¸€å †æœªå†™æ˜çš„é»˜è®¤è¡Œä¸ºä¸Š</strong>ã€‚è¿™äº›é»˜è®¤è¡Œä¸ºï¼Œåœ¨ 5.7 é‡Œè¢«çºµå®¹äº†å¾ˆå¤šå¹´ã€‚MySQL 8 åªæ˜¯é€‰æ‹©ä¸å†çºµå®¹ã€‚</p>
<hr/>
<p>æ›´å…³é”®çš„æ˜¯ï¼Œè¿™ç§å˜åŒ–å¾€å¾€ä¸æ˜¯â€œå‡çº§å½“å¤©å°±ç‚¸â€ã€‚å¾ˆå¤šç³»ç»Ÿåœ¨å‡çº§åˆ° 8.0 åï¼š</p>
<ul>
<li>èƒ½å¯åŠ¨</li>
<li>èƒ½è·‘ä¸»æµç¨‹</li>
<li>ç”šè‡³å‹æµ‹æ•°æ®ä¹Ÿæ²¡æ˜æ˜¾å¼‚å¸¸</li>
</ul>
<p>çœŸæ­£çš„é—®é¢˜ï¼Œå¾€å¾€æ˜¯ä¸Šçº¿å‡ å‘¨ã€ç”šè‡³å‡ ä¸ªæœˆä¹‹åæ‰æ…¢æ…¢æµ®å‡ºæ¥ã€‚</p>
<p>æ’åºç»“æœå¼€å§‹ä¸ç¨³å®šï¼›å†å²æ•°æ®å’Œæ–°æ•°æ®æ··åœ¨ä¸€èµ·æ—¶è¡¨ç°å¼‚å¸¸ï¼›æŸäº› SQL åœ¨ç‰¹å®šæ•°æ®é‡ä¸‹çªç„¶å˜æ…¢ï¼›å¶å‘çš„æ‰§è¡Œè®¡åˆ’æ¼‚ç§»ï¼Œé‡å¯ååˆâ€œç¥å¥‡æ¢å¤â€ï¼›è¿™äº›ç°è±¡å•ç‹¬çœ‹ï¼Œéƒ½ä¸åƒæ˜¯â€œæ•°æ®åº“å‡çº§é—®é¢˜â€ã€‚ã€‚ã€‚</p>
<p>ä½†å®ƒä»¬æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼š<strong>éƒ½å»ºç«‹åœ¨â€œæ—§è¡Œä¸ºä»ç„¶æˆç«‹â€çš„å‡è®¾ä¹‹ä¸Š</strong>ã€‚</p>
<hr/>
<p>æ‰€ä»¥ç°åœ¨å†å›å¤´çœ‹ï¼Œä¼šå‘ç°ä¸€ä¸ªæŒºæ®‹é…·çš„äº‹å®ï¼šå¾ˆå¤šç³»ç»Ÿå¹¶ä¸æ˜¯â€œè¢« MySQL 8 å‘äº†â€ï¼Œè€Œæ˜¯<strong>åœ¨ç”¨ MySQL 5.7 çš„æ€ç»´ï¼Œè·‘ MySQL 8.0</strong>ã€‚è€Œ MySQL 8 è¿™ä¸ªç‰ˆæœ¬ï¼Œæ°å¥½ä¸å†æ„¿æ„æ›¿ä½ æŠŠè¿™äº›é—®é¢˜è—èµ·æ¥ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ç¬¬ä¸€ä¸ªè¢«ä½ä¼°çš„å˜åŒ–ï¼šé»˜è®¤å­—ç¬¦é›†å’Œæ’åºè§„åˆ™</h2>
<p>å¤§å¤šæ•°å›¢é˜Ÿç¬¬ä¸€æ¬¡çœŸæ­£æ„Ÿå—åˆ° MySQL 8 å’Œä»¥å‰ä¸ä¸€æ ·ï¼Œå¾€å¾€ä¸æ˜¯åœ¨å»ºè¡¨çš„æ—¶å€™ï¼Œè€Œæ˜¯åœ¨æ•°æ®å·²ç»è·‘äº†ä¸€æ®µæ—¶é—´ä¹‹åã€‚</p>
<p>è¡¨ç°å½¢å¼ä¹Ÿå¾ˆä¸€è‡´ï¼šåˆ—è¡¨æ’åºçœ‹èµ·æ¥â€œä¸å¤ªç¨³å®šâ€ï¼ŒæŸäº›å€¼çš„ä½ç½®å¶å°”ä¼šé£˜ï¼Œåˆ†é¡µç¿»é¡µæ—¶é¡ºåºå¯¹ä¸ä¸Šï¼Œå¯¼å‡ºçš„æ•°æ®å’Œé¡µé¢å±•ç¤ºå¯¹ä¸ä¸Šï¼Œä½†ä½ å•ç‹¬æ‹ä¸€æ¡ SQL å‡ºæ¥è·‘ï¼Œåˆå¾ˆéš¾å¤ç°é—®é¢˜ã€‚è¿™ç§é—®é¢˜åœ¨ 5.7 æ—¶ä»£å¹¶ä¸å¸¸è§ï¼Œè‡³å°‘ä¸å¸¸è¢«å½“æˆæ•°æ®åº“é—®é¢˜ã€‚</p>
<hr/>
<p>MySQL 8 ä¸Šæ¥å°±åšäº†ä¸€ä»¶çœ‹ä¼¼â€œäººç•œæ— å®³â€çš„äº‹ï¼šæŠŠé»˜è®¤å­—ç¬¦é›†ä» <code>utf8</code> æ¢æˆäº† <code>utf8mb4</code>ï¼Œæ’åºè§„åˆ™ä» <code>*_general_ci</code> æ¢æˆäº† <code>*_0900_ai_ci</code>ã€‚å¾ˆå¤šäººç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªæ”¹åŠ¨çš„ååº”æ˜¯ï¼šâ€œæŒºå¥½ï¼Œç»ˆäºåŸç”Ÿæ”¯æŒ emoji äº†ã€‚â€</p>
<p>ä½†è¿™ä¸ªç†è§£ï¼Œå‡ ä¹å¿½ç•¥äº† 80% çš„å®é™…å½±å“ã€‚</p>
<hr/>
<p>å…ˆè¯´å­—ç¬¦é›†ã€‚åœ¨ 5.7 é‡Œï¼Œå¤§é‡å†å²è¡¨çš„å­—ç¬¦é›†æ˜¯ <code>utf8</code>ï¼Œè€Œä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„ UTF-8ï¼Œåªæ˜¯ MySQL è‡ªå·±çš„ä¸‰å­—èŠ‚å®ç°ã€‚å‡çº§åˆ° 8.0 ä¹‹åï¼Œæ–°å»ºè¡¨é»˜è®¤ç›´æ¥å˜æˆäº† <code>utf8mb4</code>ã€‚é—®é¢˜ä¸åœ¨äºâ€œå¤šæ”¯æŒå‡ ä¸ªå­—ç¬¦â€ï¼Œè€Œåœ¨äº<strong>å­—æ®µã€ç´¢å¼•å’Œå†å²è¡¨ä¹‹é—´å¼€å§‹å‡ºç°éšæ€§ä¸ä¸€è‡´</strong>ã€‚</p>
<p>ä¸€ä¸ªå¾ˆå¸¸è§çš„åœºæ™¯æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> (
  id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
  nickname <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
 Â KEY idx_nickname (nickname)
);
</code></pre>
<p>è¿™å¼ è¡¨åœ¨ 5.7 æ—¶ä»£å»ºçš„ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p>
<p>å‡çº§åˆ° 8.0 ä¹‹åï¼Œä½ å¯èƒ½ä¼šåœ¨æ–°ç¯å¢ƒé‡Œé‡å»ºè¡¨ç»“æ„ï¼Œç”šè‡³åªæ˜¯é€šè¿‡å·¥å…·åŒæ­¥ä¸€æ¬¡ç»“æ„ã€‚è¿™æ—¶å€™ï¼Œ<code>nickname</code> çš„å­—ç¬¦é›†å·²ç»æ‚„æ‚„å˜æˆäº† <code>utf8mb4</code>ã€‚å•çœ‹å­—æ®µæ²¡é—®é¢˜ï¼Œå•çœ‹ç´¢å¼•ä¹Ÿæ²¡é—®é¢˜ï¼ŒçœŸæ­£çš„é—®é¢˜æ˜¯ï¼š<strong>ç´¢å¼•é•¿åº¦å’Œæ¯”è¾ƒæ–¹å¼å·²ç»å˜äº†</strong>ã€‚</p>
<p>å¦‚æœè¿™ä¸ªå­—æ®µåæ¥è¢«ä½ æ‰©å±•åˆ°äº† <code>VARCHAR(255)</code>ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç´¢å¼•ä¼šç›´æ¥å»ºä¸å‡ºæ¥ï¼Œæˆ–è€…è¢«ä½ æ— æ„è¯†åœ°æˆªæ–­ã€‚æ›´ç³Ÿçš„æ˜¯ï¼Œæœ‰äº›ç¯å¢ƒèƒ½å»ºï¼Œæœ‰äº›ç¯å¢ƒä¸èƒ½å»ºï¼Œå·®å¼‚åªæ¥è‡ªäºé»˜è®¤å­—ç¬¦é›†å’Œæ’åºè§„åˆ™æ˜¯å¦ä¸€è‡´ã€‚</p>
<hr/>
<p>çœŸæ­£æ€ä¼¤åŠ›æ›´å¤§çš„ï¼Œå…¶å®æ˜¯æ’åºè§„åˆ™ã€‚</p>
<p>åœ¨ 5.7 é‡Œï¼Œå¤§é‡ç³»ç»Ÿä½¿ç”¨çš„æ˜¯ <code>utf8_general_ci</code>ã€‚è¿™ä¸ªæ’åºè§„åˆ™çš„ç‰¹ç‚¹æ˜¯ï¼š<strong>ç®€å•ã€å®½æ¾ã€ä¸å¤ªè®²ç©¶è¯­è¨€å­¦ç»†èŠ‚</strong>ã€‚</p>
<p>MySQL 8 é»˜è®¤æ¢æˆäº† <code>utf8mb4_0900_ai_ci</code>ï¼Œè¿™æ˜¯åŸºäº Unicode 9.0 çš„æ’åºè§„åˆ™ï¼Œè€ƒè™‘äº†æ›´å¤šå­—ç¬¦ç­‰ä»·å…³ç³»ã€‚å¬èµ·æ¥æ˜¯â€œæ›´æ ‡å‡†â€ï¼Œä½†ä»£ä»·æ˜¯ï¼š<strong>æ’åºç»“æœå’Œä»¥å‰ä¸ä¸€æ ·äº†</strong>ã€‚</p>
<p>ä¸¾ä¸€ä¸ªæœ€ç®€å•ã€ä¹Ÿæœ€å®¹æ˜“è¢«å¿½ç•¥çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> demo <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> name;
</code></pre>
<p>åœ¨ 5.7 ä¸‹ï¼Œå¦‚æœä½ çš„æ•°æ®æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">a</span>
<span class="hljs-selector-tag">A</span>
aa
</code></pre>
<p>æ’åºç»“æœå¾€å¾€æ˜¯ä½ â€œä¹ æƒ¯ä¸­çš„é‚£ç§â€ã€‚åˆ°äº† 8.0ï¼ŒåŒæ ·çš„æ•°æ®ã€åŒæ ·çš„ SQLï¼Œé¡ºåºå¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚ä¸æ˜¯é”™ï¼Œæ˜¯è§„åˆ™å˜äº†ã€‚</p>
<p>çœŸæ­£çš„é—®é¢˜åœ¨äºï¼Œå¤§é‡ä¸šåŠ¡ä»£ç <strong>é»˜è®¤æ’åºç»“æœæ˜¯ç¨³å®šçš„</strong>ï¼Œç”šè‡³ä¼šåœ¨åº”ç”¨å±‚å·å·ä¾èµ–è¿™ä¸ªé¡ºåºã€‚</p>
<hr/>
<p>è¿™ç±»é—®é¢˜ä¸ºä»€ä¹ˆåœ¨æµ‹è¯•ç¯å¢ƒç»å¸¸æ²¡æš´éœ²ï¼Ÿ</p>
<p>å› ä¸ºæµ‹è¯•åº“é€šå¸¸æ˜¯æ–°å»ºçš„ï¼Œè¡¨ç»“æ„ã€å­—ç¬¦é›†ã€æ’åºè§„åˆ™éƒ½å¾ˆâ€œå¹²å‡€â€ã€‚è€Œç”Ÿäº§ç¯å¢ƒçš„æ•°æ®ï¼Œæ˜¯ä¸€å±‚å±‚å†å²å ä¸Šæ¥çš„ï¼š5.6 å»ºçš„è¡¨ã€5.7 è·‘è¿‡çš„æ•°æ®ã€8.0 æ–°æ’çš„è®°å½•ï¼Œå…¨æ··åœ¨ä¸€èµ·ã€‚åŒä¸€åˆ—å­—æ®µï¼Œé€»è¾‘ä¸Šæ˜¯ä¸€æ ·çš„å­—ç¬¦ä¸²ï¼Œä½†åº•å±‚æ¯”è¾ƒè§„åˆ™å·²ç»ä¸å®Œå…¨ä¸€è‡´ã€‚</p>
<p>è¿™æ—¶å€™å†å»çœ‹åº”ç”¨å±‚ï¼Œåªä¼šè§‰å¾—äº‹æƒ…éå¸¸è¯¡å¼‚ï¼šSQL æ²¡å˜ï¼Œç´¢å¼•æ²¡åŠ¨ï¼Œæ•°æ®é‡ä¹Ÿæ²¡çªç„¶æš´æ¶¨ï¼Œä½†æ’åºå°±æ˜¯ä¸ç¨³å®šã€‚</p>
<hr/>
<p>å¾ˆå¤šå›¢é˜Ÿç¬¬ä¸€æ¬¡æ„è¯†åˆ°é—®é¢˜å‡ºåœ¨è¿™é‡Œï¼Œæ˜¯åœ¨å®šä½äº†å¾ˆä¹…ä¹‹åï¼Œæ‰å‘ç°ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">FULL</span> COLUMNS <span class="hljs-keyword">FROM</span> table_name;
</code></pre>
<p>åŒä¸€ä¸ªå­—æ®µï¼Œåœ¨ä¸åŒç¯å¢ƒé‡Œçš„ <code>Collation</code> å¹¶ä¸ä¸€æ ·ã€‚ä½†è¿™ä¸€æ­¥ï¼Œå¾€å¾€å·²ç»æ˜¯äº‹æ•…ä¹‹åçš„å¤ç›˜åŠ¨ä½œäº†ã€‚</p>
<p>è¿™ä¸€ç±»é—®é¢˜çš„å…±åŒç‰¹ç‚¹æ˜¯ï¼š<strong>å®ƒä¸æ˜¯â€œåŠŸèƒ½æ€§é”™è¯¯â€ï¼Œè€Œæ˜¯â€œè¡Œä¸ºå˜åŒ–â€</strong> ã€‚è€Œè¡Œä¸ºå˜åŒ–ï¼Œæ°æ°æ˜¯æœ€éš¾è¢«æµ‹è¯•è¦†ç›–çš„ã€‚</p>
<p>å¥½ï¼Œç»§ç»­ <strong>ç¬¬ä¸‰ç« </strong>ã€‚è¿™ä¸€ç« æˆ‘ä¼šç´§æ‰£ä½ ç»™çš„æçº²ï¼Œé‡ç‚¹æ”¾åœ¨ <strong>SQL è¡Œä¸ºå˜ä¸¥æ ¼å¸¦æ¥çš„çœŸå®å†²å‡»</strong>ï¼Œè€Œä¸æ˜¯è§„åˆ™æœ¬èº«ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€SQL è¡Œä¸ºæ›´â€œä¸¥æ ¼â€ï¼Œè€ SQL å¼€å§‹æŠ¥é”™</h2>
<p>å¦‚æœè¯´å­—ç¬¦é›†å’Œæ’åºè§„åˆ™çš„é—®é¢˜ï¼Œè¿˜å¸¦ç€ä¸€ç‚¹â€œéšè”½æ€§â€ï¼Œé‚£ SQL æ¨¡å¼çš„å˜åŒ–å°±ç›´æ¥å¤šäº†ã€‚</p>
<p>å‡çº§åˆ° MySQL 8 ä¹‹åï¼Œå¾ˆå¤šå›¢é˜Ÿç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°çš„ä¸æ˜¯æ€§èƒ½æ³¢åŠ¨ï¼Œè€Œæ˜¯ï¼š<strong>ç³»ç»Ÿç›´æ¥èµ·ä¸æ¥äº†</strong>ã€‚</p>
<p>é”™è¯¯æ—¥å¿—é‡Œå¾€å¾€æ˜¯ç±»ä¼¼è¿™æ ·çš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Expression #<span class="hljs-number">1</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">SELECT</span> list <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> clause
<span class="hljs-keyword">and</span> <span class="hljs-keyword">contains</span> nonaggregated <span class="hljs-keyword">column</span> ...
</code></pre>
<p>è¿™ç±»æŠ¥é”™åœ¨ 5.7 æ—¶ä»£å¹¶ä¸æ˜¯ä¸å­˜åœ¨ï¼Œåªæ˜¯å¤§å¤šæ•°æ—¶å€™ï¼Œå®ƒä»¬è¢«é»˜è®¤é…ç½®â€œæ”¾è¿‡äº†â€ã€‚</p>
<hr/>
<p>æœ€å…¸å‹çš„ï¼Œå°±æ˜¯ <code>ONLY_FULL_GROUP_BY</code>ã€‚</p>
<p>è¿™ä¸ªæ¨¡å¼åœ¨ 5.7 é‡Œå°±å·²ç»å­˜åœ¨ï¼Œä½†åœ¨å¾ˆå¤šç³»ç»Ÿé‡Œï¼š</p>
<ul>
<li>è¦ä¹ˆè¢«å…³æ‰</li>
<li>è¦ä¹ˆä»æ¥æ²¡è¢«è®¤çœŸå¯¹å¾…</li>
</ul>
<p>åŸå› ä¹Ÿå¾ˆç°å®ã€‚ä¸å°‘ä¸šåŠ¡ SQL å†™å¾—å¾ˆæ—©ï¼Œé€»è¾‘åˆå¤æ‚ï¼Œæ”¹èµ·æ¥é£é™©æé«˜ã€‚åªè¦èƒ½è·‘ï¼Œå¤§å®¶å°±é»˜è®¤â€œé—®é¢˜ä¸å¤§â€ã€‚å‡çº§åˆ° MySQL 8 åï¼Œè¿™ç§ä¾¥å¹¸å¿ƒç†ç¬¬ä¸€æ¬¡è¢«æ­£é¢å‡»ç©¿ã€‚ä¸€æ¡ä»¥å‰èƒ½æ­£å¸¸è¿”å›ç»“æœçš„ SQLï¼Œç°åœ¨ç›´æ¥æ‹’ç»æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">SELECT</span> user_id, create_time
<span class="hljs-keyword">FROM</span> <span class="hljs-keyword">order</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> user_id;
</code></pre>
<p>åœ¨æ—§ç¯å¢ƒé‡Œï¼Œå®ƒä¼šè¿”å›ä¸€æ¡çœ‹èµ·æ¥â€œè¿˜ç®—åˆç†â€çš„æ•°æ®ã€‚ä½†ä»è¯­ä¹‰ä¸Šè¯´ï¼Œè¿™æ¡ SQL æœ¬æ¥å°±æ²¡æœ‰å®šä¹‰æ¸…æ¥šï¼šä¸€ä¸ª <code>user_id</code> å¯¹åº”å¤šæ¡è®°å½•æ—¶ï¼Œ<code>create_time</code> åˆ°åº•æ˜¯å“ªä¸€æ¡ï¼Ÿ</p>
<p>MySQL 8 é€‰æ‹©ä¸å†æ›¿ä½ åšè¿™ä¸ªå†³å®šã€‚</p>
<hr/>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯â€œæ•°æ®åº“å¤ªæ­»æ¿äº†â€ã€‚ä½†å½“ä½ çœŸçš„å›åˆ°ä¸šåŠ¡è¯­ä¹‰ä¸Šçœ‹ï¼Œä¼šå‘ç°è¿™äº› SQL æš´éœ²å‡ºæ¥çš„ï¼Œå¾€å¾€ä¸æ˜¯æ•°æ®åº“é—®é¢˜ï¼Œè€Œæ˜¯<strong>è®¾è®¡é˜¶æ®µè¢«å¿½ç•¥çš„é€‰æ‹©</strong>ã€‚</p>
<p>æ˜¯è¦æœ€æ—©çš„ä¸€æ¡ï¼Ÿè¿˜æ˜¯æœ€æ–°çš„ä¸€æ¡ï¼Ÿè¿˜æ˜¯æŸç§ä¸šåŠ¡è§„åˆ™ä¸‹çš„é‚£ä¸€æ¡ï¼Ÿ</p>
<p>è¿™äº›é—®é¢˜ï¼Œ5.7 æ—¶ä»£è¢«æ•°æ®åº“â€œå¸®ä½ çŒœäº†â€ï¼Œè€Œ 8.0 è¦ä½ è‡ªå·±è¯´æ¸…æ¥šã€‚</p>
<hr/>
<p>å¦ä¸€ç±»å½±å“æ›´éšè”½ï¼Œä½†åæœåŒæ ·çœŸå®çš„å˜åŒ–ï¼Œæ˜¯éšå¼ç±»å‹è½¬æ¢å˜å°‘äº†ã€‚åœ¨è€ç³»ç»Ÿé‡Œï¼Œè¿™ç§ SQL éå¸¸å¸¸è§ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-string">'123'</span>;
</code></pre>
<p>å­—æ®µæ˜¯ <code>BIGINT</code>ï¼Œå‚æ•°æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<p>5.7 æ—¶ä»£ï¼Œè¿™åŸºæœ¬ä¸æ˜¯é—®é¢˜ã€‚</p>
<p>åˆ°äº† MySQL 8ï¼Œè¿™ç§å†™æ³•ä¾ç„¶èƒ½è·‘ï¼Œä½†å‰¯ä½œç”¨å¼€å§‹æ˜¾ç°ã€‚åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œéšå¼è½¬æ¢ä¼šå¯¼è‡´ç´¢å¼•æ— æ³•ä½¿ç”¨ï¼Œæ‰§è¡Œè®¡åˆ’æ‚„æ‚„å‘ç”Ÿå˜åŒ–ã€‚SQL æ²¡æŠ¥é”™ï¼Œè¿”å›ä¹Ÿæ­£å¸¸ï¼Œä½†æ€§èƒ½å¼€å§‹æ³¢åŠ¨ã€‚æ›´ç³Ÿçš„æ˜¯ï¼Œè¿™ç±»é—®é¢˜é€šå¸¸ä¸ä¼šé›†ä¸­çˆ†å‘ï¼Œè€Œæ˜¯éšç€æ•°æ®é‡å¢é•¿ï¼Œé€æ¸æ”¾å¤§ã€‚ä¸€å¼€å§‹åªæ˜¯æ…¢ä¸€ç‚¹ï¼Œåæ¥å˜æˆå¶å‘æ…¢ SQLï¼Œå†åæ¥å°±æ˜¯ç¨³å®šå¤ç°çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<hr/>
<p>è¿™ç±» SQL çš„å±é™©ä¹‹å¤„åœ¨äºï¼š<strong>å®ƒä»¬çœ‹èµ·æ¥å¾ˆâ€œæ­£å¸¸â€</strong> ã€‚ä»£ç é‡Œåˆ°å¤„éƒ½æ˜¯ï¼Œæµ‹è¯•ç¯å¢ƒä¹Ÿè·‘å¾—é£å¿«ï¼Œç›´åˆ°æŸä¸€å¤©åœ¨ç”Ÿäº§ç¯å¢ƒè¢«æ•°æ®é‡æ”¾å¤§ï¼Œæ‰å¼€å§‹æ˜¾å½¢ã€‚è€Œ MySQL 8 åœ¨è¿™é‡Œçš„æ€åº¦éå¸¸æ˜ç¡®ï¼šå®ƒä¸æ˜¯åœ¨â€œå˜éš¾ç”¨â€ï¼Œè€Œæ˜¯åœ¨<strong>å‡å°‘å¯¹å SQL çš„å®¹å¿åº¦</strong>ã€‚</p>
<p>ä»¥å‰ä½ å†™å¾—ä¸å¤Ÿä¸¥è°¨ï¼Œæ•°æ®åº“å¸®ä½ å…œåº•ï¼›ç°åœ¨å…œåº•é€»è¾‘åœ¨æ”¶ç´§ï¼Œé—®é¢˜è‡ªç„¶å°±æµ®ä¸Šæ¥äº†ã€‚</p>
<hr/>
<p>å¾ˆå¤šå‡çº§äº‹æ•…ï¼Œè¡¨é¢ä¸Šæ˜¯â€œæ•°æ®åº“å‡çº§å¤±è´¥â€ï¼Œå®é™…ä¸Šæ˜¯<strong>å¤šå¹´ç§¯ç´¯ä¸‹æ¥çš„ SQL è®¾è®¡é—®é¢˜ï¼Œè¢«ä¸€æ¬¡æ€§æ›å…‰</strong>ã€‚</p>
<p>è€ŒçœŸæ­£è®©äººå¤´ç–¼çš„è¿˜åœ¨åé¢ã€‚å³ä½¿ä½ çš„ SQL è¯­ä¹‰æ˜¯æ­£ç¡®çš„ã€å†™æ³•æ˜¯è§„èŒƒçš„ï¼Œåˆ°äº† MySQL 8ï¼Œæ‰§è¡Œè®¡åˆ’æœ¬èº«ï¼Œä¹Ÿå¯èƒ½ä¸å†æŒ‰ä½ â€œç†Ÿæ‚‰çš„æ–¹å¼â€å·¥ä½œã€‚</p>
<h2 data-id="heading-3">å››ã€æ‰§è¡Œè®¡åˆ’æ›´èªæ˜ï¼Œä½†ä¹Ÿæ›´â€œä¸å¯é¢„æµ‹â€</h2>
<p>çœŸæ­£è®©å›¢é˜Ÿå¼€å§‹ä¸å®‰çš„ï¼Œå¾€å¾€ä¸æ˜¯å‡çº§å½“å¤©çš„æŠ¥é”™ï¼Œè€Œæ˜¯ä¸Šçº¿ä¸€æ®µæ—¶é—´ä¹‹åå‡ºç°çš„æ€§èƒ½æ³¢åŠ¨ã€‚</p>
<p>SQL æ²¡æ”¹ã€‚ç´¢å¼•æ²¡åŠ¨ã€‚æ•°æ®å¢é•¿ä¹Ÿåœ¨é¢„æœŸèŒƒå›´å†…ã€‚</p>
<p>ä½†æŸå‡ æ¡æ ¸å¿ƒæŸ¥è¯¢å¼€å§‹å˜æ…¢ï¼Œè€Œä¸”æ…¢å¾—ä¸ç¨³å®šã€‚</p>
<hr/>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯å»çœ‹ <code>EXPLAIN</code>ã€‚ç»“æœæ›´è®©äººå›°æƒ‘ã€‚</p>
<p>åœ¨ MySQL 8 é‡Œï¼ŒåŒä¸€æ¡ SQL çš„æ‰§è¡Œè®¡åˆ’ï¼Œçœ‹èµ·æ¥åè€Œæ¯” 5.7 æ›´â€œåˆç†â€ï¼š</p>
<ul>
<li>ç”¨äº†çœ‹èµ·æ¥æ›´åˆé€‚çš„ç´¢å¼•</li>
<li>è®¿é—®è¡Œæ•°æ›´å°‘</li>
<li>æˆæœ¬ä¼°ç®—ä¹Ÿæ›´ä½</li>
</ul>
<p>ä½†çœŸå®æ‰§è¡Œæ—¶é—´ï¼Œå°±æ˜¯æ…¢ã€‚è¿™ç±»é—®é¢˜çš„æ ¹æºï¼Œå¾€å¾€æ¥è‡ª MySQL 8 å¼•å…¥çš„æ–°æˆæœ¬æ¨¡å‹ã€‚</p>
<hr/>
<p>MySQL 8 å¯¹æ‰§è¡Œè®¡åˆ’çš„é€‰æ‹©ï¼Œæ¯” 5.7 æ›´ä¾èµ–ç»Ÿè®¡ä¿¡æ¯å’Œä»£ä»·ä¼°ç®—ã€‚å®ƒä¼šæ›´ç§¯æåœ°å°è¯•ä¸åŒç´¢å¼•è·¯å¾„ï¼Œè€Œä¸æ˜¯åƒä»¥å‰é‚£æ ·â€œèµ°ç†Ÿè·¯â€ã€‚</p>
<p>è¿™æ„å‘³ç€ä¸€ä»¶äº‹ï¼š<strong>ä½ ä»¥å‰â€œè®°ä½çš„ç»éªŒâ€ï¼Œåœ¨ 8.x é‡Œå¼€å§‹å¤±æ•ˆäº†ã€‚</strong></p>
<p>åœ¨ 5.7 æ—¶ä»£ï¼Œå¾ˆå¤šäººå¯¹æ‰§è¡Œè®¡åˆ’æœ‰ä¸€ç§ç›´è§‰ï¼šè¿™æ¡ SQLï¼Œå¤§æ¦‚ä¸€å®šä¼šèµ°è¿™ä¸ªç´¢å¼•ã€‚åˆ°äº† 8.0ï¼Œè¿™ç§ç¡®å®šæ€§è¢«æ‰“ç ´äº†ã€‚</p>
<hr/>
<p>ä¸€ä¸ªéå¸¸å¸¸è§çš„ç°è±¡æ˜¯ï¼ŒåŒä¸€æ¡ SQLï¼Œåœ¨ä¸åŒæ—¶é—´æ®µèµ°ä¸åŒç´¢å¼•ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-keyword">order</span>
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
 Â <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&gt;</span> <span class="hljs-string">'2024-01-01'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">20</span>;
</code></pre>
<p>åœ¨ 5.7 ä¸‹ï¼Œå®ƒå¯èƒ½é•¿æœŸç¨³å®šåœ°èµ° <code>(status, create_time)</code> è¿™ä¸ªè”åˆç´¢å¼•ã€‚</p>
<p>åˆ°äº† 8.0ï¼Œæœ‰æ—¶ä¼šé€‰æ‹©å¦ä¸€ä¸ªå•åˆ—ç´¢å¼•ï¼Œ<code>EXPLAIN</code> çœ‹èµ·æ¥ä¹Ÿè¯´å¾—è¿‡å»ï¼Œä½†çœŸå®æ‰«æè¡Œæ•°æ˜æ˜¾å¢å¤šã€‚</p>
<p>é—®é¢˜åœ¨äºï¼š<strong>æ‰§è¡Œè®¡åˆ’çš„é€‰æ‹©ï¼Œä¸å†æ˜¯ä½ èƒ½è½»æ˜“é¢„æµ‹çš„ç»“æœã€‚</strong></p>
<hr/>
<p>æ›´éšè”½çš„ä¸€ç±»å‘ï¼Œæ¥è‡ªç´¢å¼•â€œçœ‹èµ·æ¥å­˜åœ¨ï¼Œä½†å®é™…ä¸Šæ²¡è¢«ç”¨ä¸Šâ€ã€‚MySQL 8 æ”¯æŒäº†å‡½æ•°ç´¢å¼•ï¼Œè¿™æ˜¯ä¸€ä¸ªè¢«å¾ˆå¤šäººé«˜ä¼°ã€ä¹Ÿå®¹æ˜“è¢«è¯¯ç”¨çš„ç‰¹æ€§ã€‚æœ‰äº›å›¢é˜Ÿåœ¨å‡çº§åï¼Œä¼šä¸»åŠ¨æŠŠä¸€äº›è®¡ç®—é€»è¾‘å¡è¿›ç´¢å¼•é‡Œï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> INDEX idx_day <span class="hljs-keyword">ON</span> <span class="hljs-keyword">order</span> ((<span class="hljs-type">DATE</span>(create_time)));
</code></pre>
<p>ç„¶åå†™å‡ºè¿™æ ·çš„ SQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">order</span>
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">DATE</span>(create_time) <span class="hljs-operator">=</span> <span class="hljs-string">'2024-06-01'</span>;
</code></pre>
<p>é€»è¾‘ä¸Šçœ‹èµ·æ¥å¾ˆå®Œç¾ã€‚ä½†åœ¨çœŸå®ç¯å¢ƒé‡Œï¼Œè¿™ç±»ç´¢å¼•å¹¶ä¸æ€»æ˜¯åƒä½ æƒ³è±¡ä¸­é‚£æ ·ç”Ÿæ•ˆï¼Œå°¤å…¶æ˜¯åœ¨æ’åºè§„åˆ™ã€æ—¶åŒºã€éšå¼è½¬æ¢æºæ‚è¿›æ¥ä¹‹åï¼Œæ‰§è¡Œè®¡åˆ’å¾ˆå®¹æ˜“å‘ç”Ÿåç§»ã€‚</p>
<hr/>
<p>è¿˜æœ‰ä¸€ç±»æ›´éš¾å¯Ÿè§‰çš„é—®é¢˜ï¼Œæ¥è‡ªå­—ç¬¦é›†å’Œæ’åºè§„åˆ™å¯¹ç´¢å¼•çš„å½±å“ã€‚åœ¨ MySQL 8 ä¸­ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶å’Œç´¢å¼•åˆ—çš„ <code>collation</code> ä¸ä¸€è‡´ï¼Œå³ä½¿å­—æ®µåå’Œç±»å‹å®Œå…¨ç›¸åŒï¼Œç´¢å¼•ä¹Ÿå¯èƒ½è¢«æ”¾å¼ƒã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span>
<span class="hljs-keyword">WHERE</span> nickname <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span>;
</code></pre>
<p>å½“è¿™ä¸ªæ¡ä»¶åœ¨ä¸åŒè¿æ¥ã€ä¸åŒä¼šè¯å‚æ•°ä¸‹æ‰§è¡Œæ—¶ï¼Œèµ°ä¸èµ°ç´¢å¼•ï¼Œå¯èƒ½å®Œå…¨ä¸åŒã€‚è¿™ç±»é—®é¢˜åœ¨ 5.7 ä¸­ä¸å¤ªå¸¸è§ï¼Œä½†åœ¨ 8.0 é‡Œï¼Œå‡ºç°é¢‘ç‡æ˜æ˜¾æ›´é«˜ã€‚</p>
<hr/>
<p>æœ€åä¸€ä¸ªè®©äººå¤´ç–¼çš„ç°è±¡ï¼Œæ˜¯â€œçªç„¶å˜æ…¢ï¼Œåˆçªç„¶æ¢å¤â€ã€‚</p>
<p>MySQL 8 çš„ç»Ÿè®¡ä¿¡æ¯æ›´å‡†ç¡®ï¼Œä½†æ›´æ–°ç­–ç•¥ä¹Ÿä¸åŒäº†ã€‚åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œç»Ÿè®¡ä¿¡æ¯åˆ·æ–°ä¹‹åï¼Œæ‰§è¡Œè®¡åˆ’å‘ç”Ÿå˜åŒ–ï¼Œæ€§èƒ½ç«‹åˆ»å—åˆ°å½±å“ã€‚æ›´é­”å¹»çš„æ˜¯ï¼Œé‡å¯æ•°æ®åº“ä¹‹åï¼Œé—®é¢˜å¯èƒ½æš‚æ—¶æ¶ˆå¤±ã€‚</p>
<p>è¿™ç±»é—®é¢˜å¾€å¾€ä¸æ˜¯ bugï¼Œè€Œæ˜¯ <strong>ç»Ÿè®¡ä¿¡æ¯ã€æˆæœ¬æ¨¡å‹å’ŒçœŸå®æ•°æ®åˆ†å¸ƒä¹‹é—´çš„åšå¼ˆ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€çª—å£å‡½æ•° / CTEï¼šç”¨å¯¹æ˜¯ç¥å™¨ï¼Œç”¨é”™æ˜¯æ€§èƒ½æ€æ‰‹</h2>
<p>MySQL 8 çœŸæ­£è®©äººäº§ç”Ÿâ€œè¿™æ˜¯ä¸ªæ–°æ•°æ®åº“äº†â€è¿™ç§æ„Ÿè§‰ï¼Œå¾€å¾€ä¸æ˜¯å‰é¢çš„ä¸¥æ ¼æ¨¡å¼ï¼Œè€Œæ˜¯çª—å£å‡½æ•°å’Œ CTE çš„å‡ºç°ã€‚å®ƒä»¬å¤ªå¥½å†™äº†ã€‚</p>
<p>ä»¥å‰è¦é å­æŸ¥è¯¢ã€ä¸´æ—¶è¡¨ã€ç”šè‡³å¤šæ¬¡æŸ¥è¯¢æ‰èƒ½æ‹¼å‡ºæ¥çš„ç»“æœï¼Œç°åœ¨ä¸€æ¡ SQL å°±èƒ½æå®šï¼Œç»“æ„æ¸…æ™°ï¼Œå¯è¯»æ€§ä¹Ÿæé«˜ã€‚é—®é¢˜åœ¨äºï¼š<strong>å¥½å†™ï¼Œå¹¶ä¸ç­‰äºå¥½è·‘</strong>ã€‚</p>
<hr/>
<p>å¾ˆå¤šäººç¬¬ä¸€æ¬¡ç”¨çª—å£å‡½æ•°ï¼Œéƒ½æ˜¯æ‹¿å®ƒæ¥â€œæ›¿ä»£ group byâ€ã€‚æ¯”å¦‚åšæ’è¡Œæ¦œã€å»é‡ã€å–æ¯ç»„æœ€æ–°ä¸€æ¡è®°å½•ï¼Œå¾ˆè‡ªç„¶å°±ä¼šå†™å‡ºè¿™æ ·çš„ SQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>
<span class="hljs-keyword">FROM</span> (
 Â <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>,
 Â  Â  Â  Â  <span class="hljs-built_in">ROW_NUMBER</span>() <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> user_id <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span>) <span class="hljs-keyword">AS</span> rn
 Â <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">order</span>
) t
<span class="hljs-keyword">WHERE</span> rn <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p>é€»è¾‘å®Œå…¨æ­£ç¡®ï¼Œç»“æœä¹Ÿæ²¡é—®é¢˜ã€‚ä½†å½“è¿™æ¡ SQL è·‘åœ¨çœŸå®ä¸šåŠ¡æ•°æ®ä¸Šæ—¶ï¼Œé—®é¢˜æ‰å¼€å§‹æ˜¾ç°ã€‚</p>
<p>çª—å£å‡½æ•°çš„è®¡ç®—ï¼Œæ˜¯åœ¨<strong>ç»“æœé›†å±‚é¢</strong>å®Œæˆçš„ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨ <code>ROW_NUMBER</code> ç”Ÿæ•ˆä¹‹å‰ï¼Œå‚ä¸è®¡ç®—çš„æ•°æ®å·²ç»è¢«å…¨éƒ¨æ‰«æã€æ’åºã€åˆ†ç»„ã€‚</p>
<p>æ•°æ®é‡å°çš„æ—¶å€™æ„Ÿè§‰ä¸åˆ°ï¼Œä¸€æ—¦è¡¨è§„æ¨¡ä¸Šæ¥ï¼Œæ‰§è¡Œæˆæœ¬ä¼šéå¸¸ç›´æ¥åœ°åæ˜ åœ¨å“åº”æ—¶é—´ä¸Šã€‚è¿™ç±» SQL çš„å±é™©åœ¨äºï¼š<strong>ä½ å¾ˆéš¾é€šè¿‡ç›´è§‰åˆ¤æ–­å®ƒçš„å¤æ‚åº¦</strong>ã€‚</p>
<hr/>
<p>å¦ä¸€ä¸ªè¢«ä¸¥é‡è¯¯è§£çš„ï¼Œæ˜¯ CTEï¼ˆWITHï¼‰ã€‚åœ¨å¾ˆå¤šäººçš„è®¤çŸ¥é‡Œï¼ŒCTE å°±æ˜¯â€œæ›´ä¼˜é›…çš„ä¸´æ—¶è¡¨â€ã€‚äºæ˜¯ä¼šå†™å‡ºç»“æ„éå¸¸æ¼‚äº®çš„ SQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">WITH</span> recent_order <span class="hljs-keyword">AS</span> (
 Â <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>
 Â <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">order</span>
 Â <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;</span> NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">7</span> <span class="hljs-keyword">DAY</span>
)
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>
<span class="hljs-keyword">FROM</span> recent_order
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p>ä»å¯è¯»æ€§ä¸Šè¯´ï¼Œè¿™æ¯”åµŒå¥—å­æŸ¥è¯¢èˆ’æœå¤ªå¤šã€‚ä½†åœ¨ MySQL 8 ä¸­ï¼ŒCTE é»˜è®¤æ˜¯<strong>éç‰©åŒ–çš„</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸æ˜¯å…ˆç®—ä¸€æ¬¡ç»“æœå†å¤ç”¨ï¼Œè€Œæ˜¯å¯èƒ½åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«å¤šæ¬¡å±•å¼€ã€é‡å¤è®¡ç®—ã€‚å½“ CTE è¢«å¼•ç”¨å¤šæ¬¡ï¼Œæˆ–è€…åµŒå¥—è¿›æ›´å¤æ‚çš„æŸ¥è¯¢é‡Œæ—¶ï¼Œæ‰§è¡Œæ¬¡æ•°ä¼šè¿…é€Ÿæ”¾å¤§ã€‚</p>
<p>â€œå†™å¾—å¾ˆå¹²å‡€ï¼Œä½†è·‘å¾—å¾ˆæ…¢â€ï¼Œé€šå¸¸å°±å‡ºç°åœ¨è¿™é‡Œã€‚</p>
<hr/>
<p>çœŸæ­£çš„é—®é¢˜å¹¶ä¸æ˜¯çª—å£å‡½æ•°å’Œ CTE æœ¬èº«ï¼Œè€Œæ˜¯ <strong>å®ƒä»¬è®©â€œå¤æ‚ SQLâ€å˜å¾—è¿‡äºå®¹æ˜“ä¹¦å†™</strong>ã€‚</p>
<p>åœ¨ 5.7 æ—¶ä»£ï¼Œå¾ˆå¤šæ€§èƒ½é£é™©è¢«å†™æ³•æœ¬èº«æŒ¡ä½äº†ã€‚SQL å†™å¾—éš¾ï¼Œåè€Œé€¼ç€ä½ åœ¨è®¾è®¡é˜¶æ®µå¤šæƒ³ä¸€æ­¥ã€‚</p>
<p>åˆ°äº† 8.0ï¼Œè¿™äº›çº¦æŸæ¶ˆå¤±äº†ã€‚ä½ å¯ä»¥å¾ˆå¿«å†™å‡ºä¸€æ¡è¯­ä¹‰å®Œæ•´ã€ç»“æ„ä¼˜é›…çš„ SQLï¼Œä½†æ˜¯å¦é€‚åˆåœ¨é«˜å¹¶å‘ã€æµ·é‡æ•°æ®ä¸‹æ‰§è¡Œï¼Œå®Œå…¨æ˜¯å¦ä¸€å›äº‹ã€‚</p>
<hr/>
<p>ä¸å°‘å›¢é˜Ÿåœ¨å‡çº§åˆ° MySQL 8 ä¹‹åï¼Œä¼šä¸è‡ªè§‰åœ°â€œé‡æ„ SQLâ€ï¼ŒæŠŠåŸæœ¬åˆ†æ•£åœ¨åº”ç”¨å±‚çš„é€»è¾‘ï¼Œæ”¶æ‹¢è¿›æ•°æ®åº“é‡Œã€‚è¿™æœ¬èº«å¹¶ä¸ä¸€å®šæ˜¯å hookupï¼Œä½†å¦‚æœç¼ºä¹å¯¹æ‰§è¡Œæˆæœ¬çš„åˆ¤æ–­ï¼Œçª—å£å‡½æ•°å’Œ CTE ä¼šæˆä¸ºéå¸¸éšè”½çš„æ€§èƒ½æ”¾å¤§å™¨ã€‚è€Œå®ƒä»¬ä¸€æ—¦è¿›å…¥æ ¸å¿ƒé“¾è·¯ï¼Œæ’æŸ¥éš¾åº¦ä¼šæ¯”æ™®é€šæ…¢ SQL é«˜å¾ˆå¤šã€‚</p>
<hr/>
<h2 data-id="heading-5">å…­ã€éšè—å¾ˆæ·±çš„ä¸€ç±»å‘ï¼šç³»ç»Ÿè¡¨ &amp; æƒé™æ¨¡å‹å˜åŒ–</h2>
<p>å¦‚æœè¯´å‰é¢çš„å‘ï¼Œå¤šå°‘è¿˜èƒ½é€šè¿‡ä¸šåŠ¡ç°è±¡æ…¢æ…¢æš´éœ²å‡ºæ¥ï¼Œé‚£ç³»ç»Ÿè¡¨å’Œæƒé™æ¨¡å‹çš„å˜åŒ–ï¼Œå¾€å¾€æ˜¯<strong>å‡çº§å½“å¤©å°±å‡ºé—®é¢˜æ„Ÿè§‰</strong>ã€‚</p>
<p>è€Œä¸”éå¸¸ç›´æ¥ï¼šè„šæœ¬è·‘ä¸é€šã€å·¥å…·è¿ä¸ä¸Šã€åº”ç”¨è´¦å·çªç„¶æ²¡æƒé™ã€‚</p>
<hr/>
<p>MySQL 8 å¯¹ <code>mysql</code> åº“åšäº†æ¯”è¾ƒå½»åº•çš„è°ƒæ•´ã€‚åœ¨ 5.7 æ—¶ä»£ï¼Œå¾ˆå¤šè¿ç»´è„šæœ¬ã€ç›‘æ§å·¥å…·ï¼Œç”šè‡³åº”ç”¨åˆå§‹åŒ–é€»è¾‘ï¼Œéƒ½ä¼šç›´æ¥å»æŸ¥ç³»ç»Ÿè¡¨ã€‚åœ¨ 5.7 é‡Œï¼Œè¿™æ˜¯å¾ˆå¸¸è§ã€ä¹Ÿå¾ˆè‡ªç„¶çš„åšæ³•ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span>, host <span class="hljs-keyword">FROM</span> mysql.user;
</code></pre>
<p>åˆ°äº† MySQL 8ï¼Œè¿™ç±»æŸ¥è¯¢è¦ä¹ˆç›´æ¥å¤±è´¥ï¼Œè¦ä¹ˆè¿”å›ç»“æœå’Œä½ é¢„æœŸçš„ä¸ä¸€æ ·ã€‚åŸå› å¹¶ä¸å¤æ‚ï¼šç³»ç»Ÿè¡¨ç»“æ„è¢«é‡æ„äº†ï¼Œæƒé™æ¨¡å‹ä¹Ÿéšä¹‹è°ƒæ•´ï¼Œå®˜æ–¹æ›´å¸Œæœ›ä½ é€šè¿‡ <code>information_schema</code> æˆ–ä¸“ç”¨è§†å›¾æ¥è·å–ä¿¡æ¯ã€‚é—®é¢˜åœ¨äºï¼Œ<strong>å†å²å·¥å…·å¹¶ä¸çŸ¥é“è¿™ä»¶äº‹</strong>ã€‚</p>
<hr/>
<p>è¿™ç±»é—®é¢˜ç»å¸¸å‡ºç°åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š</p>
<p>ä¸€æ˜¯è€çš„è¿ç»´è„šæœ¬ã€‚æ•°æ®åº“å‡çº§äº†ï¼Œè„šæœ¬æ²¡åŠ¨ï¼Œç»“æœç¬¬ä¸€å¤©å®šæ—¶ä»»åŠ¡å°±å¼€å§‹æŠ¥é”™ã€‚</p>
<p>äºŒæ˜¯ç¬¬ä¸‰æ–¹å·¥å…·ã€‚ç›‘æ§ã€å¤‡ä»½ã€å®¡è®¡ã€æƒé™ç®¡ç†å·¥å…·ï¼Œå¦‚æœç‰ˆæœ¬ä¸å¤Ÿæ–°ï¼Œå¾ˆå®¹æ˜“åœ¨ MySQL 8 ä¸Šç›´æ¥å¤±æ•ˆã€‚</p>
<p>è¿™ç§é—®é¢˜çš„å®šä½è¿‡ç¨‹é€šå¸¸éå¸¸ä½æ•ˆï¼Œå› ä¸ºæŠ¥é”™ä¿¡æ¯å¾€å¾€ä¸æŒ‡å‘â€œç³»ç»Ÿè¡¨å˜äº†â€ï¼Œè€Œåªæ˜¯æƒé™ä¸è¶³æˆ–è€…å­—æ®µä¸å­˜åœ¨ã€‚</p>
<hr/>
<p>æƒé™æ¨¡å‹çš„å˜åŒ–ï¼Œæ¯”ç³»ç»Ÿè¡¨æ›´å®¹æ˜“å¼•å‘äº‹æ•…ã€‚MySQL 8 æŠŠæƒé™æ‹†å¾—æ›´ç»†äº†ï¼Œé€»è¾‘ä¸Šæ›´æ¸…æ™°ï¼Œä½†é…ç½®æˆæœ¬ä¹Ÿæ˜æ˜¾æé«˜ã€‚ä¸€ä¸ªåœ¨ 5.7 é‡Œèƒ½æ­£å¸¸å·¥ä½œçš„åº”ç”¨è´¦å·ï¼Œè¿ç§»åˆ° 8.0 ä¹‹åï¼Œå¯èƒ½ä¼šå‡ºç°å„ç§â€œå¥‡æ€ªçš„å¤±è´¥â€ï¼š</p>
<ul>
<li>èƒ½è¿ä¸Šåº“ï¼Œä½†æŸ¥ä¸äº†è¡¨</li>
<li>èƒ½æŸ¥è¡¨ï¼Œä½†æ‰§è¡Œä¸äº†æŸäº›è¯­å¥</li>
<li>åœ¨æŸäº›ç¯å¢ƒæ­£å¸¸ï¼Œåœ¨å¦ä¸€äº›ç¯å¢ƒç›´æ¥æŠ¥æƒé™é”™è¯¯</li>
</ul>
<p>å¾ˆå¤šæ—¶å€™ï¼Œå¹¶ä¸æ˜¯æƒé™ç»™å°‘äº†ï¼Œè€Œæ˜¯<strong>ç»™é”™äº†ä½ç½®</strong>ã€‚</p>
<hr/>
<p>æ›´ç°å®çš„é—®é¢˜æ˜¯ï¼Œâ€œæœ€å°æƒé™åŸåˆ™â€åœ¨ MySQL 8 é‡Œåè€Œæ›´éš¾è½åœ°ã€‚ä»¥å‰ä½ å¯èƒ½ç›´æ¥ç»™ä¸€ä¸ªè´¦å·æ¯”è¾ƒå®½çš„æƒé™ï¼Œäº‹æƒ…å°±ç»“æŸäº†ã€‚ç°åœ¨æƒé™ç²’åº¦ç»†äº†ï¼Œè§’è‰²ã€é»˜è®¤æƒé™ã€åŠ¨æ€æƒé™ä¸€èµ·ä¸Šï¼Œç¨æœ‰ç–å¿½å°±ä¼šé—æ¼å…³é”®èƒ½åŠ›ã€‚è€Œè¿™äº›é—®é¢˜ï¼Œå¤§å¤šæ•°ä¸ä¼šåœ¨æµ‹è¯•é˜¶æ®µæš´éœ²ï¼Œå› ä¸ºæµ‹è¯•ç¯å¢ƒçš„è´¦å·å¾€å¾€æƒé™æ›´å®½ã€‚ç­‰åˆ°ç”Ÿäº§åˆ‡æ¢æ—¶ï¼Œé—®é¢˜æ‰é›†ä¸­å‡ºç°ã€‚</p>
<hr/>
<p>è¿™ä¸€ç±»å‘æœ‰ä¸€ä¸ªå…±åŒç‰¹ç‚¹ï¼š<strong>å®ƒä»¬å‡ ä¹å’Œä¸šåŠ¡æ— å…³ï¼Œä½†èƒ½ç›´æ¥å½±å“ä¸šåŠ¡æ˜¯å¦å¯ç”¨</strong>ã€‚å¾ˆå¤šå‡çº§äº‹æ•…ï¼Œå¹¶ä¸æ˜¯ SQL å†™é”™ã€ç´¢å¼•æ²¡å»ºï¼Œè€Œæ˜¯ä¸€äº›çœ‹ä¼¼â€œå¤–å›´â€çš„ä¸œè¥¿æ²¡è·Ÿä¸Šã€‚è€ŒçœŸæ­£è®©å‡çº§è¿‡ç¨‹å˜å¾—å¯æ§çš„ï¼Œå¾€å¾€ä¸æ˜¯å¤šçœ‹å‡ ç¯‡æ–‡æ¡£ï¼Œè€Œæ˜¯<strong>å‡çº§å§¿åŠ¿æœ¬èº«æ˜¯å¦æ­£ç¡®</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸ƒã€ç”Ÿäº§å‡çº§ MySQL 8ï¼ŒçœŸæ­£é è°±çš„å§¿åŠ¿</h2>
<p>å¦‚æœå‰é¢é‚£äº›å‘å·²ç»çœ‹å¾—å·®ä¸å¤šäº†ï¼Œå…¶å®ä¼šè‡ªç„¶å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š <strong>MySQL 8 çš„å‡çº§ï¼Œä¸æ˜¯ä¸€ä¸ªâ€œç‚¹å‡çº§â€ï¼Œè€Œæ˜¯ä¸€æ¬¡ç³»ç»Ÿæ€§è¿ç§»ã€‚</strong></p>
<p>ä¹Ÿæ­£å› ä¸ºè¿™æ ·ï¼Œæœ€ä¸é è°±çš„åšæ³•ï¼Œåè€Œæ˜¯å¾ˆå¤šäººä¸‹æ„è¯†ä¼šé€‰çš„é‚£ç§ã€‚</p>
<hr/>
<p>æœ€éœ€è¦æ˜ç¡®çš„ä¸€ä»¶äº‹æ˜¯ï¼š<strong>ä¸è¦å¯¹ç”Ÿäº§åº“åš in-place å‡çº§ã€‚</strong></p>
<p>ç†è®ºä¸Šå¯è¡Œï¼Œæ–‡æ¡£ä¹Ÿæ”¯æŒï¼Œä½†ç°å®ä¸­ï¼Œä¸€æ—¦å‡ºé—®é¢˜ï¼Œå‡ ä¹æ²¡æœ‰å›æ—‹ç©ºé—´ã€‚</p>
<p>å‡çº§è¿‡ç¨‹ä¸­ä¸€æ—¦å‘ç°æ’åºå¼‚å¸¸ã€SQL æŠ¥é”™ã€æ€§èƒ½ä¸ç¬¦åˆé¢„æœŸï¼Œä½ èƒ½åšçš„é€‰æ‹©éå¸¸æœ‰é™ã€‚å›æ»šæˆæœ¬é«˜ï¼Œçª—å£æœŸçŸ­ï¼Œæ‰€æœ‰é£é™©éƒ½è¢«å‹ç¼©åˆ°ä¸€æ¬¡æ“ä½œé‡Œã€‚</p>
<p>çœŸæ­£å¯æ§çš„æ–¹å¼ï¼Œåè€Œæ˜¾å¾—â€œç¬¨â€ä¸€äº›ï¼šé€»è¾‘å¤‡ä»½ â†’ æ–°å®ä¾‹æ¢å¤ â†’ åº”ç”¨ç°åº¦åˆ‡æ¢ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥ç¹çï¼Œä½†å®ƒç»™äº†ä½ ä¸€ä¸ªéå¸¸å…³é”®çš„èƒ½åŠ›ï¼š<strong>éšæ—¶åœä¸‹æ¥è§‚å¯Ÿç³»ç»Ÿè¡Œä¸º</strong>ã€‚</p>
<hr/>
<p>åœ¨çœŸæ­£åˆ‡æµé‡ä¹‹å‰ï¼Œæœ‰å‡ ä»¶äº‹æ˜¯ç»•ä¸å¼€çš„ã€‚</p>
<h3 data-id="heading-7">1. SQL æ¨¡å¼æ£€æŸ¥ã€‚</h3>
<p>ä¸è¦ç­‰æŠ¥é”™å†å»æ”¹ SQLã€‚åœ¨å‡çº§å‰ï¼ŒæŠŠç”Ÿäº§åº“å½“å‰çš„ SQL æ¨¡å¼æ‹‰å‡ºæ¥ï¼Œå¯¹ç…§ MySQL 8 çš„é»˜è®¤é…ç½®ï¼ŒæŠŠä¼šè¢«å¡ä½çš„è¯­å¥æå‰æ‰¾å‡ºæ¥ã€‚å“ªæ€•åªæ˜¯ç»Ÿè®¡ä¸€ä¸‹ <code>ONLY_FULL_GROUP_BY</code> ç›¸å…³çš„æŠ¥é”™æ•°é‡ï¼Œéƒ½ä¼šæ¯”ä¸Šçº¿åæ‰‹å¿™è„šä¹±å¼ºå¾—å¤šã€‚</p>
<p>å¯ä»¥åœ¨ <strong>æµ‹è¯•ç¯å¢ƒçš„ MySQL 5.7</strong> ä¸Šï¼Œ<strong>ä¸»åŠ¨æ‰“å¼€ MySQL 8 çš„ä¸¥æ ¼æ¨¡å¼</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">SET GLOBAL <span class="hljs-attr">sql_mode</span> =
'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO'<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">2. æ‰§è¡Œè®¡åˆ’å¯¹æ¯”ã€‚</h3>
<p>ä¸è¦åªåœ¨ 8.0 ç¯å¢ƒé‡Œçœ‹ <code>EXPLAIN</code>ï¼Œè¦æ‹¿åŒä¸€æ¡ SQLï¼Œåœ¨ 5.7 å’Œ 8.0 é‡ŒåŒæ—¶è·‘ã€‚</p>
<p>é‡ç‚¹ä¸æ˜¯â€œå“ªä¸ªçœ‹èµ·æ¥æ›´ä¼˜é›…â€ï¼Œè€Œæ˜¯ï¼š<strong>å“ªäº› SQL çš„æ‰§è¡Œè·¯å¾„å‘ç”Ÿäº†å˜åŒ–</strong>ã€‚</p>
<p>è¿™ä¸€æ­¥åšå®Œï¼Œå¾€å¾€èƒ½æå‰é”å®šé‚£ä¸€å°æ’®â€œæœªæ¥ä¸€å®šä¼šå‡ºé—®é¢˜â€çš„æŸ¥è¯¢ã€‚</p>
<hr/>
<h3 data-id="heading-9">3. æ‰«æå­—ç¬¦é›†å’Œæ’åºè§„åˆ™ã€‚</h3>
<p>ç›´æ¥æŸ¥æ‰¾è¡¨çš„å…ƒæ•°æ®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">SELECT
  TABLE_SCHEMA,
 Â TABLE_NAME,
  COLUMN_NAME,
  CHARACTER_SET_NAME,
  COLLATION_NAME
FROM information_schema.COLUMNS
WHERE <span class="hljs-attr">TABLE_SCHEMA</span> = <span class="hljs-string">'your_db'</span><span class="hljs-comment">;</span>
â€‹
</code></pre>
<p>ä¸æ˜¯è§£é‡Šè§„åˆ™ï¼Œè€Œæ˜¯æ‰¾ä¸ä¸€è‡´ã€‚å“ªäº›è¡¨ã€å“ªäº›å­—æ®µï¼Œåœ¨ä¸åŒç¯å¢ƒé‡Œ <code>charset</code> æˆ– <code>collation</code> ä¸ä¸€æ ·ï¼›å“ªäº›å†å²è¡¨æ˜¯æ—§è§„åˆ™ï¼Œæ–°è¡¨æ˜¯æ–°è§„åˆ™ã€‚</p>
<p>è¿™äº›å·®å¼‚ï¼ŒçŸ­æœŸå†…å¯èƒ½æ²¡äº‹ï¼Œä½†å®ƒä»¬å‡ ä¹ä¸€å®šä¼šåœ¨æŸä¸ªæ—¶é—´ç‚¹çˆ†å‡ºæ¥ã€‚</p>
<hr/>
<h3 data-id="heading-10">4. æ£€æŸ¥ç´¢å¼•é•¿åº¦å’Œç´¢å¼•ä½¿ç”¨æƒ…å†µã€‚</h3>
<p>æå‰åœ¨ 8.x å®ä¾‹é‡Œè·‘å»ºè¡¨ / å»ºç´¢å¼•è„šæœ¬ï¼ŒåŒæ—¶ç”¨<code>show index</code>è¯­å¥å¯¹æ¯”ï¼Œç‰¹åˆ«æ³¨æ„ä¸€ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li><code>varchar</code> è¾ƒé•¿çš„ç´¢å¼•</li>
<li>è”åˆç´¢å¼•é‡ŒåŒ…å«å­—ç¬¦ä¸²å­—æ®µçš„</li>
<li>æ›¾ç»â€œåˆšå¥½èƒ½å»ºå‡ºæ¥â€çš„ç´¢å¼•</li>
</ul>
<p>MySQL 8 å¯¹è¿™äº›åœ°æ–¹çš„å®¹å¿åº¦æ›´ä½ï¼Œè€Œç´¢å¼•ä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œå½±å“çš„é€šå¸¸æ˜¯æ ¸å¿ƒæŸ¥è¯¢ã€‚</p>
<hr/>
<h3 data-id="heading-11">5. çº¿ä¸ŠçœŸå®å‹æµ‹</h3>
<p>æœ€åä¸€ä»¶ï¼Œä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«ä½ä¼°çš„ä¸€ä»¶ï¼š <strong>å…³é”® SQL çš„çœŸå®å‹æµ‹ã€‚</strong></p>
<p>ä¸æ˜¯è·‘è·‘æ¥å£ï¼Œè€Œæ˜¯é’ˆå¯¹æœ€é‡çš„é‚£å‡ æ¡ SQLï¼Œåœ¨æ¥è¿‘çœŸå®æ•°æ®é‡çš„æƒ…å†µä¸‹ï¼Œå•ç‹¬å‹ã€‚å¾ˆå¤š MySQL 8 çš„é—®é¢˜ï¼Œåªä¼šåœ¨æ•°æ®è§„æ¨¡ä¸Šæ¥ä¹‹åæ‰å‡ºç°ã€‚ä½ çœŸæ­£è¦åšçš„ï¼Œæ˜¯ï¼š æœåŠ¡ç«¯å…ˆå‡çº§ MySQL é©±åŠ¨ â†’ åŒæ—¶è¿ 5.7 å’Œ 8.x â†’ åšå¯¹æ¯”å‹æµ‹</p>
<p><strong>ä¸å»ºè®®</strong>æŠŠ <strong>8.x å½“ 5.7 çš„ä»åº“</strong> æ¥æ‰¿æ‹…è¿™ä¸€æ­¥çš„æ ¸å¿ƒéªŒè¯ã€‚8.x ä» 5.7 æ‹‰æ•°æ®å¯ä»¥åšï¼Œä½†å®ƒ<strong>ä¸èƒ½æ›¿ä»£å‹æµ‹</strong>ã€‚</p>
<hr/>
<p>çœŸæ­£åˆ‡åˆ° MySQL 8 ä¹‹åï¼Œç¬¬ä¸€å‘¨è¦ç›¯çš„ä¸œè¥¿ï¼Œå…¶å®ä¹Ÿå¾ˆæ˜ç¡®ã€‚</p>
<p>æ…¢ SQL æ˜¯æœ€ç›´è§‚çš„ä¿¡å·ã€‚æ’åºå¼‚å¸¸å¾€å¾€è—åœ¨ä¸šåŠ¡åé¦ˆé‡Œã€‚é”™è¯¯æ—¥å¿—é‡Œå‡ºç°çš„â€œä»¥å‰ä»æ²¡è§è¿‡çš„æŠ¥é”™â€ï¼Œå‡ ä¹éƒ½å€¼å¾—è®¤çœŸçœ‹ä¸€çœ¼ã€‚</p>
<p>è¿™ä¸€å‘¨ä¸æ˜¯ä¸ºäº†â€œè¯æ˜å‡çº§æˆåŠŸâ€ï¼Œè€Œæ˜¯ä¸ºäº†ç¡®è®¤ï¼š<strong>æœ‰æ²¡æœ‰ä»€ä¹ˆè¢«ä½ ä½ä¼°çš„å˜åŒ–ï¼Œæ­£åœ¨æ‚„æ‚„å‘ç”Ÿã€‚</strong></p>
<hr/>
<p>èµ°åˆ°è¿™ä¸€æ­¥ï¼Œå…¶å®å·²ç»èƒ½æ„Ÿè§‰å‡ºæ¥äº†ï¼šMySQL 8 çš„å‡çº§ï¼Œä»æ¥ä¸æ˜¯ä¸€ä¸ªâ€œæŠ€æœ¯åŠ¨ä½œâ€ï¼Œè€Œæ›´åƒä¸€æ¬¡<strong>ä½¿ç”¨æ–¹å¼çš„åˆ‡æ¢</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-12">å…«ã€MySQL 8 ä¸æ˜¯â€œæ–°ç‰ˆæœ¬â€ï¼Œè€Œæ˜¯â€œæ–°é˜¶æ®µâ€</h2>
<p>å¦‚æœåªæ˜¯æŠŠ MySQL 8 å½“æˆä¸€ä¸ªâ€œåŠŸèƒ½æ›´å¤šã€è§„åˆ™æ›´ä¸¥â€çš„ç‰ˆæœ¬ï¼Œå…¶å®å¾ˆå®¹æ˜“äº§ç”Ÿè¯¯åˆ¤ã€‚å› ä¸ºä»ä½¿ç”¨ä½“éªŒä¸Šçœ‹ï¼Œå¾ˆå¤šå˜åŒ–å¹¶ä¸ä½“ç°åœ¨æ–°ç‰¹æ€§ï¼Œè€Œä½“ç°åœ¨<strong>æ—§ä¹ æƒ¯å¼€å§‹å¤±æ•ˆ</strong>ã€‚</p>
<p>ä»¥å‰ä½ å¯ä»¥å†™ä¸€æ¡è¯­ä¹‰ä¸å®Œæ•´çš„ SQLï¼Œæ•°æ®åº“ä¼šå¸®ä½ é€‰ä¸€ä¸ªâ€œå·®ä¸å¤šèƒ½ç”¨â€çš„ç»“æœï¼›ä»¥å‰ä½ å¯ä»¥é»˜è®¤æ’åºæ˜¯ç¨³å®šçš„ï¼›ä»¥å‰ä½ å¯ä»¥æ··ç€ç±»å‹æ¯”ã€é éšå¼è½¬æ¢èµ°ç´¢å¼•ã€‚</p>
<p>è¿™äº›å¹¶ä¸æ˜¯èƒ½åŠ›ï¼Œè€Œæ˜¯ä¸€ç§é•¿æœŸå­˜åœ¨çš„å®½å®¹ã€‚MySQL 8 åšçš„äº‹æƒ…ï¼Œå…¶å®å¾ˆæ˜ç¡®ï¼šå®ƒåœ¨é€æ­¥æ”¶å›è¿™ç§å®½å®¹ã€‚</p>
<hr/>
<p>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œå¾ˆå¤šæ‰€è°“çš„â€œå‡çº§è¸©å‘â€ï¼Œå¹¶ä¸æ˜¯å› ä¸º MySQL 8 å¼•å…¥äº†é—®é¢˜ï¼Œè€Œæ˜¯å®ƒ<strong>ä¸å†æ›¿ä½ æ©ç›–é—®é¢˜</strong>ã€‚</p>
<p>å­—ç¬¦é›†å’Œæ’åºè§„åˆ™æš´éœ²çš„æ˜¯å†å²æ•°æ®å’Œæ–°è§„åˆ™ä¹‹é—´çš„ä¸ä¸€è‡´ï¼›ä¸¥æ ¼ SQL æ¨¡å¼æš´éœ²çš„æ˜¯è¯­ä¹‰æ¨¡ç³Šçš„æŸ¥è¯¢ï¼›æ›´æ¿€è¿›çš„ä¼˜åŒ–å™¨æš´éœ²çš„æ˜¯å¯¹æ‰§è¡Œè®¡åˆ’çš„è¿‡åº¦ä¾èµ–ï¼›çª—å£å‡½æ•°å’Œ CTE æš´éœ²çš„æ˜¯æŠŠå¤æ‚åº¦ä¸€è‚¡è„‘æ¨ç»™æ•°æ®åº“çš„å†²åŠ¨ã€‚</p>
<p>è¿™äº›é—®é¢˜ï¼Œåœ¨ 5.7 æ—¶ä»£å¹¶ä¸æ˜¯ä¸å­˜åœ¨ï¼Œåªæ˜¯è¢«æ—¶é—´å’Œé»˜è®¤è¡Œä¸ºæš‚æ—¶å‹ä½äº†ã€‚</p>
<hr/>
<p>æŸç§æ„ä¹‰ä¸Šï¼ŒMySQL 8 æ›´åƒæ˜¯ MySQL ä»â€œå·¥å…·å‹æ•°æ®åº“â€èµ°å‘â€œå·¥ç¨‹çº§æ•°æ®åº“â€çš„åˆ†æ°´å²­ã€‚</p>
<p>å®ƒå¼€å§‹å‡è®¾ï¼š</p>
<ul>
<li>ä½ çŸ¥é“è‡ªå·±åœ¨å†™ä»€ä¹ˆ</li>
<li>ä½ èƒ½ä¸º SQL çš„è¯­ä¹‰è´Ÿè´£</li>
<li>ä½ ä¼šä¸ºæ‰§è¡Œæˆæœ¬ä¹°å•</li>
</ul>
<p>è¿™å¯¹å›¢é˜Ÿçš„è¦æ±‚æ›´é«˜ï¼Œä½†ä¹Ÿæ›´çœŸå®ã€‚</p>
<hr/>
<p>æ‰€ä»¥å›å¤´å†çœ‹â€œè¦ä¸è¦å‡çº§ MySQL 8â€è¿™ä¸ªé—®é¢˜ï¼Œæœ¬èº«å°±æœ‰ç‚¹ç«™ä¸ä½è„šã€‚</p>
<p>çœŸæ­£çš„é—®é¢˜ä¸æ˜¯ï¼š<strong>MySQL 8 ä¼šä¸ä¼šå‘æˆ‘ï¼Ÿ</strong></p>
<p>è€Œæ˜¯ï¼š<strong>æˆ‘ç°åœ¨è¿™å¥— SQL å’Œæ•°æ®æ¨¡å‹ï¼Œé…ä¸é…å¾—ä¸Šä¸€ä¸ªä¸å†å…œåº•çš„æ•°æ®åº“ï¼Ÿ</strong></p>
<p>å‡çº§ä¹‹åï¼Œä½ å¯èƒ½ä¸ä¼šç«‹åˆ»å¾—åˆ°â€œæ›´å¿«â€çš„ç³»ç»Ÿï¼Œä½†ä½ ä¸€å®šä¼šæ›´æ—©çœ‹è§é—®é¢˜ã€‚è€Œèƒ½æ›´æ—©çœ‹è§é—®é¢˜ï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§ä¼˜åŠ¿ã€‚</p>
<p>å‡çº§ MySQL 8ï¼ŒçœŸæ­£è¦å‡çº§çš„ï¼Œä»æ¥ä¸åªæ˜¯æ•°æ®åº“ï¼Œè€Œæ˜¯æˆ‘ä»¬å¯¹ SQL çš„æ•¬ç•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£ç RAGä¹‹å¿ƒï¼Œä¸ºä»€ä¹ˆå‘é‡æ•°æ®åº“æ˜¯å…¶æ ¸å¿ƒå¼•æ“]]></title>    <link>https://juejin.cn/post/7599088558167310382</link>    <guid>https://juejin.cn/post/7599088558167310382</guid>    <pubDate>2026-01-26T03:12:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599088558167310382" data-draft-id="7599181528303927305" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£ç RAGä¹‹å¿ƒï¼Œä¸ºä»€ä¹ˆå‘é‡æ•°æ®åº“æ˜¯å…¶æ ¸å¿ƒå¼•æ“"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-26T03:12:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="smallyoung"/> <meta itemprop="url" content="https://juejin.cn/user/4373200861407227"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£ç RAGä¹‹å¿ƒï¼Œä¸ºä»€ä¹ˆå‘é‡æ•°æ®åº“æ˜¯å…¶æ ¸å¿ƒå¼•æ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4373200861407227/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    smallyoung
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:12:48.000Z" title="Mon Jan 26 2026 03:12:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21aeb07f83794894be2e8747fb63f616~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=%2BhkjnGhVZ0VD75lJnCxkUJs68xs%3D" alt="ä¸ºä»€ä¹ˆ RAG è¦ä½¿ç”¨å‘é‡æ•°æ®åº“" loading="lazy"/></p>
<h2 data-id="heading-0">1. å…ˆé—®é—®é¢˜ï¼šRAG åˆ°åº•éœ€è¦ä»€ä¹ˆèƒ½åŠ›ï¼Ÿ</h2>
<p>åœ¨è®²å‘é‡æ•°æ®åº“ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p><strong>RAG ç³»ç»Ÿçš„æ ¸å¿ƒéœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
</blockquote>
<p>RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çš„å·¥ä½œæµç¨‹å¯ä»¥ç®€åŒ–ä¸ºï¼š</p>
<pre><code class="hljs">ç”¨æˆ·é—®é¢˜ â†’ ã€åœ¨çŸ¥è¯†åº“ä¸­æ‰¾åˆ°ç›¸å…³å†…å®¹ã€‘ â†’ æŠŠå†…å®¹ç»™ LLM â†’ ç”Ÿæˆç­”æ¡ˆ
</code></pre>
<p>å…³é”®åœ¨äºä¸­é—´é‚£ä¸€æ­¥ï¼š<strong>å¦‚ä½•åœ¨çŸ¥è¯†åº“ä¸­æ‰¾åˆ°"çœŸæ­£ç›¸å…³"çš„å†…å®¹ï¼Ÿ</strong></p>
<h3 data-id="heading-1">1.1 ä¸¤ç§æœç´¢æ–¹å¼çš„å¯¹æ¯”</h3>

























<table><thead><tr><th>ç”¨æˆ·é—®é¢˜</th><th>ä¼ ç»Ÿå…³é”®è¯æœç´¢</th><th>ç†æƒ³çš„è¯­ä¹‰æœç´¢</th></tr></thead><tbody><tr><td>"AI æ˜¯ä»€ä¹ˆï¼Ÿ"</td><td>åªèƒ½æ‰¾åˆ°åŒ…å«"AI"ä¸¤ä¸ªå­—æ¯çš„æ–‡æ¡£</td><td>èƒ½æ‰¾åˆ°"äººå·¥æ™ºèƒ½"ã€"æœºå™¨å­¦ä¹ "ç›¸å…³æ–‡æ¡£</td></tr><tr><td>"è‹¹æœå…¬å¸å¸‚å€¼"</td><td>å¯èƒ½åŒ¹é…åˆ°"è‹¹æœè¥å…»ä»·å€¼"</td><td>åªåŒ¹é…ç§‘æŠ€å…¬å¸ç›¸å…³å†…å®¹</td></tr><tr><td>"æ‰‹æœºå¡é¡¿æ€ä¹ˆåŠ"</td><td>æ‰¾ä¸åˆ°"è®¾å¤‡æ€§èƒ½ä¼˜åŒ–æŒ‡å—"</td><td>èƒ½ç†è§£è¿™æ˜¯åŒä¸€ä¸ªé—®é¢˜</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼šRAG éœ€è¦çš„æ˜¯<strong>è¯­ä¹‰æœç´¢</strong>â€”â€”ç†è§£é—®é¢˜çš„"å«ä¹‰"ï¼Œè€Œä¸æ˜¯åŒ¹é…å­—é¢å…³é”®è¯ã€‚</p>
<h3 data-id="heading-2">1.2 æ ¸å¿ƒé—®é¢˜</h3>
<blockquote>
<p><strong>é—®é¢˜</strong>ï¼šä¼ ç»Ÿæ•°æ®åº“ï¼ˆMySQLã€PostgreSQLï¼‰åªèƒ½åšå…³é”®è¯åŒ¹é…ï¼Œæ— æ³•ç†è§£è¯­ä¹‰ã€‚é‚£æ€ä¹ˆå®ç°è¯­ä¹‰æœç´¢å‘¢ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆ</strong>ï¼šå…ˆæŠŠæ–‡æœ¬è½¬æˆå‘é‡ï¼ˆEmbeddingï¼‰ï¼Œç„¶åç”¨å‘é‡æ•°æ®åº“åšç›¸ä¼¼åº¦æœç´¢ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯ RAG å¿…é¡»ä½¿ç”¨å‘é‡æ•°æ®åº“çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥è§£é‡Šï¼šä»€ä¹ˆæ˜¯å‘é‡ï¼Ÿä»€ä¹ˆæ˜¯ Embeddingï¼Ÿç›¸ä¼¼åº¦æœç´¢æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p>
<h2 data-id="heading-3">2. ä»€ä¹ˆæ˜¯å‘é‡ï¼Ÿ</h2>
<p>è¦ç†è§£å‘é‡æ•°æ®åº“ï¼Œé¦–å…ˆè¦ç†è§£æœ€åŸºç¡€çš„æ¦‚å¿µï¼š<strong>å‘é‡</strong>ã€‚</p>
<h3 data-id="heading-4">2.1 å‘é‡çš„ç›´è§‚å®šä¹‰</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1fe8708855c42eaa6202d3d364602a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=1P0QAV8e1Lh8ZKLOiih07a8buqU%3D" alt="ä¸‡ç‰©çš†å¯å‘é‡åŒ–" loading="lazy"/></p>
<p><strong>å‘é‡å°±æ˜¯ä¸€ç»„æœ‰åºçš„æ•°å­—</strong>ã€‚å°±è¿™ä¹ˆç®€å•ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">å‘é‡ä¾‹å­ï¼š
<span class="hljs-selector-attr">[3, 4]</span>
<span class="hljs-selector-attr">[0.5, 0.8, 0.2]</span>
<span class="hljs-selector-attr">[0.23, -0.15, 0.87, 0.42, ..., 0.31]</span>  (å¯èƒ½æœ‰å‡ ç™¾ä¸Šåƒä¸ªæ•°å­—)
</code></pre>
<p>ä½ å¯ä»¥æŠŠå‘é‡æƒ³è±¡æˆ<strong>æè¿°ä¸€ä¸ªä¸œè¥¿çš„"ç‰¹å¾åˆ—è¡¨"</strong>ï¼š</p>

























<table><thead><tr><th>ç°å®åœºæ™¯</th><th>å‘é‡è¡¨ç¤º</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>åœ°å›¾åæ ‡</td><td>[120.5, 31.2]</td><td>ç»åº¦ 120.5Â°ï¼Œçº¬åº¦ 31.2Â°</td></tr><tr><td>RGB é¢œè‰²</td><td>[255, 0, 0]</td><td>çº¢è‰²åˆ†é‡ 255ï¼Œç»¿è‰² 0ï¼Œè“è‰² 0ï¼ˆçº¯çº¢è‰²ï¼‰</td></tr><tr><td>å­¦ç”Ÿæˆç»©</td><td>[85, 92, 78]</td><td>è¯­æ–‡ 85ï¼Œæ•°å­¦ 92ï¼Œè‹±è¯­ 78</td></tr></tbody></table>
<blockquote>
<p>[!NOTE]
<strong>å…³é”®æ¦‚å¿µ</strong>ï¼šå‘é‡çš„<strong>ç»´åº¦</strong>å°±æ˜¯æ•°å­—çš„ä¸ªæ•°ã€‚[3, 4] æ˜¯ 2 ç»´å‘é‡ï¼Œ[85, 92, 78] æ˜¯ 3 ç»´å‘é‡ã€‚åé¢ä½ ä¼šçœ‹åˆ°ï¼ŒEmbedding æ¨¡å‹é€šå¸¸ç”Ÿæˆ 768~3072 ç»´çš„å‘é‡ã€‚</p>
</blockquote>
<h3 data-id="heading-5">2.2 å‘é‡çš„å‡ ä½•æ„ä¹‰</h3>
<p><strong>å‘é‡å¯ä»¥çœ‹ä½œç©ºé—´ä¸­çš„ä¸€ä¸ª"ç‚¹"</strong>ã€‚</p>
<p>ä»¥ 2 ç»´å‘é‡ä¸ºä¾‹ï¼š</p>
<ul>
<li>å‘é‡ A = [3, 4] â†’ åœ¨å¹³é¢ä¸Šå°±æ˜¯åæ ‡ (3, 4) çš„ç‚¹</li>
<li>å‘é‡ B = [4, 3] â†’ åœ¨å¹³é¢ä¸Šå°±æ˜¯åæ ‡ (4, 3) çš„ç‚¹</li>
</ul>
<p>ä¸¤ä¸ªç‚¹ä¹‹é—´å¯ä»¥è®¡ç®—<strong>è·ç¦»</strong>â€”â€”è·ç¦»è¶Šè¿‘ï¼Œè¡¨ç¤ºå®ƒä»¬è¶Š"ç›¸ä¼¼"ã€‚</p>
<p>è¿™ä¸ªç®€å•çš„æ•°å­¦åŸç†ï¼Œå°±æ˜¯å‘é‡æ•°æ®åº“èƒ½å¤Ÿå®ç°"ç›¸ä¼¼æœç´¢"çš„åŸºç¡€ï¼</p>
<h2 data-id="heading-6">3. ä»€ä¹ˆæ˜¯ Embeddingï¼Ÿ</h2>
<p>ç°åœ¨é—®é¢˜æ¥äº†ï¼š<strong>æ–‡æœ¬ä¸æ˜¯æ•°å­—ï¼Œæ€ä¹ˆå˜æˆå‘é‡ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼šä½¿ç”¨ <strong>Embeddingï¼ˆåµŒå…¥ï¼‰æ¨¡å‹</strong>ã€‚</p>
<h3 data-id="heading-7">3.1 Embedding çš„æ ¸å¿ƒæ€æƒ³</h3>
<p><strong>Embedding = æŠŠä»»æ„å†…å®¹ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ï¼‰è½¬æ¢æˆå‘é‡çš„æŠ€æœ¯</strong>ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A["æ–‡æœ¬: æˆ‘å–œæ¬¢åƒè‹¹æœ"] --&gt; B[Embedding æ¨¡å‹]
    B --&gt; C["å‘é‡: [0.23, -0.15, 0.87, ...]"]
</code></pre>
<p>ä»¥æ–‡æœ¬ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ªä»£ç æ¼”ç¤º</span>
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
client = OpenAI()

text = <span class="hljs-string">"æˆ‘å–œæ¬¢åƒè‹¹æœ"</span>
response = client.embeddings.create(<span class="hljs-built_in">input</span>=text, model=<span class="hljs-string">"text-embedding-3-small"</span>)
vector = response.data[<span class="hljs-number">0</span>].embedding

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(vector))  <span class="hljs-comment"># è¾“å‡ºï¼š1536ï¼ˆè¿™å°±æ˜¯å‘é‡çš„ç»´åº¦ï¼‰</span>
<span class="hljs-built_in">print</span>(vector[:<span class="hljs-number">5</span>])   <span class="hljs-comment"># è¾“å‡ºï¼š[0.023, -0.156, 0.087, 0.421, -0.089]</span>
</code></pre>
<h3 data-id="heading-8">3.2 Embedding çš„ç¥å¥‡ä¹‹å¤„</h3>
<p>Embedding æ¨¡å‹ç»è¿‡å¤§é‡æ•°æ®è®­ç»ƒåï¼Œå­¦ä¼šäº†ä¸€ä¸ªæƒŠäººçš„èƒ½åŠ›ï¼š</p>
<blockquote>
<p><strong>è¯­ä¹‰ç›¸è¿‘çš„æ–‡æœ¬ï¼Œä¼šè¢«æ˜ å°„åˆ°å‘é‡ç©ºé—´ä¸­ç›¸è¿‘çš„ä½ç½®ã€‚</strong></p>
</blockquote>
<p>ä¸¾ä¸€ä¸ªå…·ä½“ä¾‹å­ï¼š</p>

























<table><thead><tr><th>æ–‡æœ¬</th><th>å‘é‡ï¼ˆç®€åŒ–ç¤ºæ„ï¼‰</th><th>ä¸"æˆ‘å–œæ¬¢åƒè‹¹æœ"çš„è·ç¦»</th></tr></thead><tbody><tr><td>"æˆ‘å–œæ¬¢åƒè‹¹æœ"</td><td>[0.8, 0.2, 0.1, ...]</td><td>0ï¼ˆè‡ªå·±ï¼‰</td></tr><tr><td>"æˆ‘çˆ±åƒæ°´æœ"</td><td>[0.75, 0.25, 0.12, ...]</td><td><strong>0.05</strong>ï¼ˆéå¸¸è¿‘ï¼è¯­ä¹‰ç›¸ä¼¼ï¼‰</td></tr><tr><td>"ä»Šå¤©å¤©æ°”çœŸå¥½"</td><td>[0.1, 0.6, 0.9, ...]</td><td><strong>0.89</strong>ï¼ˆå¾ˆè¿œï¼Œè¯­ä¹‰ä¸åŒï¼‰</td></tr></tbody></table>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph è¯­ä¹‰ç©ºé—´ç¤ºæ„
        A["æˆ‘å–œæ¬¢åƒè‹¹æœ â—"] --- B["æˆ‘çˆ±åƒæ°´æœ â—"]
        C["ä»Šå¤©å¤©æ°”çœŸå¥½ â—‹"]
    end
    
    style A fill:#e3f2fd
    style B fill:#e3f2fd
    style C fill:#ffebee
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b1de5df1f074aa0889bd82b93fb2024~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=IGnqclrKIVR1oxDimiJDckB1bI0%3D" alt="Embedding çš„æ ¸å¿ƒæ€æƒ³" loading="lazy"/></p>
<blockquote>
<p>[!IMPORTANT]
<strong>æ ¸å¿ƒå…¬å¼</strong>ï¼šEmbedding çš„æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•° <code>f(text) â†’ vector</code>ï¼Œå®ƒæŠŠæ–‡æœ¬æ˜ å°„åˆ°é«˜ç»´ç©ºé—´ï¼Œä½¿å¾—<strong>è¯­ä¹‰ç›¸ä¼¼çš„æ–‡æœ¬åœ¨ç©ºé—´ä¸­è·ç¦»æ›´è¿‘</strong>ã€‚è¿™æ˜¯ RAG èƒ½å¤Ÿ"ç†è§£è¯­ä¹‰"çš„æ ¹æœ¬åŸç†ã€‚</p>
</blockquote>
<h3 data-id="heading-9">3.3 ä¸ºä»€ä¹ˆ Embedding èƒ½æ•æ‰è¯­ä¹‰ï¼Ÿ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/957779f2ec334e2fb4ad17332dd0388c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=6hgL%2BCTiv1lL79r93Le5Mi3ByTY%3D" alt="ä¸ºä»€ä¹ˆ Embedding èƒ½æ•æ‰è¯­ä¹‰" loading="lazy"/></p>
<p>Embedding æ¨¡å‹ï¼ˆå¦‚ BERTã€GPTï¼‰æ˜¯é€šè¿‡<strong>æµ·é‡æ–‡æœ¬æ•°æ®è®­ç»ƒ</strong>å‡ºæ¥çš„ã€‚</p>
<p>è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹å­¦ä¹ åˆ°ï¼š</p>
<ul>
<li>"è‹¹æœ"å’Œ"æ°´æœ"ç»å¸¸å‡ºç°åœ¨ç›¸ä¼¼çš„è¯­å¢ƒä¸­</li>
<li>"å–œæ¬¢"å’Œ"çˆ±"è¡¨è¾¾ç›¸ä¼¼çš„æƒ…æ„Ÿ</li>
<li>å› æ­¤å®ƒä»¬çš„å‘é‡åº”è¯¥ç›¸è¿‘</li>
</ul>
<p>è¿™å°±åƒä¸€ä¸ªè¯»è¿‡å‡ ç™¾äº¿æœ¬ä¹¦çš„äººï¼Œè‡ªç„¶ç†è§£äº†è¯è¯­ä¹‹é—´çš„å…³ç³»ã€‚</p>
<h3 data-id="heading-10">3.4 æ›´ç›´è§‚çš„ç±»æ¯”ï¼šEmbedding åœ¨å­¦ä»€ä¹ˆï¼Ÿ</h3>
<p>æƒ³è±¡ä½ æ˜¯ä¸€ä¸ªè¯»äº†å‡ ç™¾äº¿æœ¬ä¹¦çš„äººï¼š</p>
<ul>
<li>å½“ä½ çœ‹åˆ°"è‹¹æœå…¬å¸"ï¼Œä½ ä¼šè”æƒ³åˆ°ï¼šç§‘æŠ€ã€iPhoneã€ç¡…è°·</li>
<li>å½“ä½ çœ‹åˆ°"åƒè‹¹æœ"ï¼Œä½ ä¼šè”æƒ³åˆ°ï¼šæ°´æœã€å¥åº·ã€è¥å…»</li>
</ul>
<p>è™½ç„¶éƒ½æœ‰"è‹¹æœ"ä¸¤ä¸ªå­—ï¼Œä½†ä½ çš„å¤§è„‘ä¼šæŠŠå®ƒä»¬æ”¾åœ¨å®Œå…¨ä¸åŒçš„"æ¦‚å¿µåŒºåŸŸ"ã€‚</p>
<p><strong>Embedding æ¨¡å‹åšçš„å°±æ˜¯åŒæ ·çš„äº‹æƒ…</strong>â€”â€”é€šè¿‡é˜…è¯»æµ·é‡æ–‡æœ¬ï¼Œå­¦ä¼šäº†æŠŠï¼š</p>
<ul>
<li>ç›¸ä¼¼è¯­å¢ƒçš„è¯æ”¾åœ¨å‘é‡ç©ºé—´çš„<strong>ç›¸è¿‘ä½ç½®</strong></li>
<li>ä¸åŒè¯­å¢ƒçš„åŒä¸€ä¸ªè¯æ”¾åœ¨<strong>ä¸åŒä½ç½®</strong></li>
</ul>
<blockquote>
<p>[!TIP]
<strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šEmbedding ä¸æ˜¯ç®€å•çš„"ç¿»è¯‘"ï¼Œè€Œæ˜¯æŠŠæ–‡æœ¬çš„"æ„æ€"ç¼–ç æˆäº†å‘é‡ç©ºé—´ä¸­çš„"ä½ç½®"ã€‚</p>
</blockquote>
<h2 data-id="heading-11">4. ä¸»æµ Embedding æ¨¡å‹ä¸å‘é‡ç»´åº¦</h2>
<p>ä¸åŒçš„ Embedding æ¨¡å‹ç”Ÿæˆçš„å‘é‡ç»´åº¦ä¸åŒã€‚<strong>ç»´åº¦è¶Šé«˜ï¼Œé€šå¸¸èƒ½æ•æ‰è¶Šä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯ï¼Œä½†ä¹Ÿéœ€è¦æ›´å¤šå­˜å‚¨ç©ºé—´å’Œè®¡ç®—èµ„æº</strong>ã€‚</p>
<h3 data-id="heading-12">4.1 ä¸»æµ Embedding æ¨¡å‹å¯¹æ¯”ï¼ˆ2024ï¼‰</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21d00554260849848546a230073262b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=C0ESxUvBjB%2FopZ36jBkiLj6NycU%3D" alt="æ¨¡å‹å¯¹æ¯”" loading="lazy"/></p>

























































































<table><thead><tr><th>å‚å•†</th><th>æ¨¡å‹åç§°</th><th>å‘é‡ç»´åº¦</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>OpenAI</strong></td><td>text-embedding-3-small</td><td>1536 ç»´</td><td>æ€§ä»·æ¯”é«˜ï¼Œæ”¯æŒåŠ¨æ€é™ç»´åˆ° 512 ç»´</td></tr><tr><td><strong>OpenAI</strong></td><td>text-embedding-3-large</td><td>3072 ç»´</td><td>æœ€é«˜ç²¾åº¦ï¼Œæ”¯æŒé™ç»´åˆ° 256/1024 ç»´</td></tr><tr><td><strong>OpenAI</strong></td><td>text-embedding-ada-002</td><td>1536 ç»´</td><td>ä¸Šä¸€ä»£æ¨¡å‹ï¼Œä»å¹¿æ³›ä½¿ç”¨</td></tr><tr><td><strong>BAAI</strong></td><td>BGE-large-zh-v1.5</td><td>1024 ç»´</td><td>ä¸­æ–‡æœ€ä½³å¼€æºæ¨¡å‹ä¹‹ä¸€</td></tr><tr><td><strong>BAAI</strong></td><td>BGE-M3</td><td>1024 ç»´</td><td>å¤šè¯­è¨€ã€å¤šåŠŸèƒ½</td></tr><tr><td><strong>Cohere</strong></td><td>Embed English v3</td><td>1024 ç»´</td><td>ä¼ä¸šçº§è‹±æ–‡æ¨¡å‹</td></tr><tr><td><strong>Cohere</strong></td><td>Embed v4</td><td>1536 ç»´</td><td>æœ€æ–°å¤šæ¨¡æ€æ¨¡å‹</td></tr><tr><td><strong>Jina AI</strong></td><td>jina-embeddings-v3</td><td>1024 ç»´</td><td>æ”¯æŒ 8K é•¿æ–‡æœ¬ï¼Œå¯é™ç»´åˆ° 32 ç»´</td></tr><tr><td><strong>Jina AI</strong></td><td>jina-embeddings-v2-base</td><td>768 ç»´</td><td>åŸºç¡€ç‰ˆæœ¬</td></tr><tr><td><strong>Voyage AI</strong></td><td>voyage-3</td><td>1024 ç»´</td><td>æ£€ç´¢è´¨é‡ä¼˜ç§€</td></tr><tr><td><strong>Voyage AI</strong></td><td>voyage-3-large</td><td>2048 ç»´</td><td>æ”¯æŒé™ç»´åˆ° 256/512/1024 ç»´</td></tr><tr><td><strong>Voyage AI</strong></td><td>voyage-3-lite</td><td>512 ç»´</td><td>è½»é‡ç‰ˆï¼Œé€Ÿåº¦å¿«</td></tr><tr><td><strong>Google</strong></td><td>Gemini text-embedding-004</td><td>768 ç»´</td><td>Google æœ€æ–°æ¨¡å‹</td></tr></tbody></table>
<blockquote>
<p>[!TIP]
<strong>é€‰å‹å»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>ä¸­æ–‡åœºæ™¯</strong>ï¼šä¼˜å…ˆè€ƒè™‘ BGE ç³»åˆ—ï¼ˆå¼€æºå…è´¹ï¼‰æˆ– OpenAI text-embedding-3</li>
<li><strong>è‹±æ–‡åœºæ™¯</strong>ï¼šOpenAIã€Cohereã€Voyage AI éƒ½æ˜¯ä¼˜ç§€é€‰æ‹©</li>
<li><strong>æˆæœ¬æ•æ„Ÿ</strong>ï¼šä½¿ç”¨æ”¯æŒ"åŠ¨æ€é™ç»´"çš„æ¨¡å‹ï¼ˆå¦‚ text-embedding-3ï¼‰ï¼Œé™ä½å­˜å‚¨æˆæœ¬</li>
</ul>
</blockquote>
<h3 data-id="heading-13">4.2 å‘é‡ç»´åº¦çš„å½±å“</h3>









































<table><thead><tr><th>ç»´åº¦</th><th>å•å‘é‡å­˜å‚¨</th><th>100 ä¸‡å‘é‡å­˜å‚¨</th><th>ç²¾åº¦</th></tr></thead><tbody><tr><td>512 ç»´</td><td>~2 KB</td><td>~2 GB</td><td>ä¸­ç­‰</td></tr><tr><td>768 ç»´</td><td>~3 KB</td><td>~3 GB</td><td>è¾ƒé«˜</td></tr><tr><td>1024 ç»´</td><td>~4 KB</td><td>~4 GB</td><td>é«˜</td></tr><tr><td>1536 ç»´</td><td>~6 KB</td><td>~6 GB</td><td>å¾ˆé«˜</td></tr><tr><td>3072 ç»´</td><td>~12 KB</td><td>~12 GB</td><td>æœ€é«˜</td></tr></tbody></table>
<h2 data-id="heading-14">5. ç›¸ä¼¼åº¦è®¡ç®—ï¼šå‘é‡å¦‚ä½•æ¯”è¾ƒ"åƒä¸åƒ"ï¼Ÿ</h2>
<p>æœ‰äº†å‘é‡ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è®¡ç®—å®ƒä»¬ä¹‹é—´æœ‰å¤š"ç›¸ä¼¼"ã€‚</p>
<h3 data-id="heading-15">5.1 ä½™å¼¦ç›¸ä¼¼åº¦ï¼ˆCosine Similarityï¼‰</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efe64198d9524e13ba8e18715a95a864~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=pSLqcu7nuujC7FoXoFBB6f0w8v4%3D" alt="å®‡å®™ä¸­çš„â€œå¼•åŠ›â€" loading="lazy"/></p>
<p><strong>ä½™å¼¦ç›¸ä¼¼åº¦</strong>æ˜¯æœ€å¸¸ç”¨çš„ç›¸ä¼¼åº¦æŒ‡æ ‡ï¼Œå®ƒæµ‹é‡ä¸¤ä¸ªå‘é‡<strong>æ–¹å‘</strong>ä¸Šçš„ç›¸ä¼¼ç¨‹åº¦ã€‚</p>
<pre><code class="hljs language-css" lang="css">ä½™å¼¦ç›¸ä¼¼åº¦ = cos(Î¸) = (<span class="hljs-selector-tag">A</span> Â· <span class="hljs-selector-tag">B</span>) / (|<span class="hljs-selector-tag">A</span>| Ã— |<span class="hljs-selector-tag">B</span>|)

å…¶ä¸­ï¼š
- <span class="hljs-selector-tag">A</span> Â· <span class="hljs-selector-tag">B</span> æ˜¯å‘é‡ç‚¹ç§¯ï¼ˆå¯¹åº”å…ƒç´ ç›¸ä¹˜å†æ±‚å’Œï¼‰
- |<span class="hljs-selector-tag">A</span>| æ˜¯å‘é‡ <span class="hljs-selector-tag">A</span> çš„é•¿åº¦ï¼ˆæ¨¡ï¼‰
- Î¸ æ˜¯ä¸¤ä¸ªå‘é‡çš„å¤¹è§’
</code></pre>
<p><strong>ç›´è§‚ç†è§£</strong>ï¼š</p>

























<table><thead><tr><th>ä½™å¼¦å€¼</th><th>å¤¹è§’</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>1</td><td>0Â°</td><td>æ–¹å‘å®Œå…¨ç›¸åŒï¼Œæœ€ç›¸ä¼¼</td></tr><tr><td>0</td><td>90Â°</td><td>å®Œå…¨æ­£äº¤ï¼Œä¸ç›¸å…³</td></tr><tr><td>-1</td><td>180Â°</td><td>æ–¹å‘å®Œå…¨ç›¸å</td></tr></tbody></table>
<h3 data-id="heading-16">5.2 å®é™…è®¡ç®—ç¤ºä¾‹</h3>
<p>å‡è®¾æœ‰ä¸¤ä¸ªç®€åŒ–çš„ 3 ç»´å‘é‡ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">A</span> = <span class="hljs-selector-attr">[1, 2, 3]</span>
<span class="hljs-selector-tag">B</span> = <span class="hljs-selector-attr">[2, 4, 6]</span>

è®¡ç®—æ­¥éª¤ï¼š
<span class="hljs-number">1</span>. ç‚¹ç§¯ï¼š<span class="hljs-selector-tag">A</span> Â· <span class="hljs-selector-tag">B</span> = <span class="hljs-number">1</span>Ã—<span class="hljs-number">2</span> + <span class="hljs-number">2</span>Ã—<span class="hljs-number">4</span> + <span class="hljs-number">3</span>Ã—<span class="hljs-number">6</span> = <span class="hljs-number">2</span> + <span class="hljs-number">8</span> + <span class="hljs-number">18</span> = <span class="hljs-number">28</span>
<span class="hljs-number">2</span>. <span class="hljs-selector-tag">A</span> çš„é•¿åº¦ï¼š|<span class="hljs-selector-tag">A</span>| = âˆš(<span class="hljs-number">1</span>Â² + <span class="hljs-number">2</span>Â² + <span class="hljs-number">3</span>Â²) = âˆš<span class="hljs-number">14</span> â‰ˆ <span class="hljs-number">3.74</span>
<span class="hljs-number">3</span>. <span class="hljs-selector-tag">B</span> çš„é•¿åº¦ï¼š|<span class="hljs-selector-tag">B</span>| = âˆš(<span class="hljs-number">2</span>Â² + <span class="hljs-number">4</span>Â² + <span class="hljs-number">6</span>Â²) = âˆš<span class="hljs-number">56</span> â‰ˆ <span class="hljs-number">7.48</span>
<span class="hljs-number">4</span>. ä½™å¼¦ç›¸ä¼¼åº¦ = <span class="hljs-number">28</span> / (<span class="hljs-number">3.74</span> Ã— <span class="hljs-number">7.48</span>) â‰ˆ <span class="hljs-number">1.0</span>
</code></pre>
<p>ç»“æœä¸º 1.0ï¼Œè¯´æ˜ A å’Œ B <strong>å®Œå…¨ç›¸ä¼¼</strong>ï¼ˆå…¶å® B = 2Ã—Aï¼Œæ–¹å‘å®Œå…¨ä¸€è‡´ï¼‰ã€‚</p>
<blockquote>
<p>[!NOTE]
<strong>ä¸ºä»€ä¹ˆç”¨ä½™å¼¦è€Œä¸æ˜¯ç›´æ¥æ¯”è¾ƒæ•°å­—ï¼Ÿ</strong></p>
<p>ä½™å¼¦ç›¸ä¼¼åº¦<strong>å¿½ç•¥å‘é‡çš„"é•¿åº¦"ï¼Œåªå…³æ³¨"æ–¹å‘"</strong>ã€‚è¿™æ­£å¥½ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ï¼šåˆ¤æ–­è¯­ä¹‰æ˜¯å¦ç›¸ä¼¼ï¼Œè€Œä¸æ˜¯æ–‡æœ¬é•¿åº¦æ˜¯å¦ç›¸åŒã€‚</p>
</blockquote>
<h2 data-id="heading-17">6. æŠŠå®ƒä»¬è¿èµ·æ¥ï¼šRAG çš„å®Œæ•´å·¥ä½œåŸç†</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c414b85d719454ca1a07e20113e132f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=S4p%2BJ18aQIAlkUn7QVMcLxBT1DY%3D" alt="å®Œæ•´å·¥ä½œæµ" loading="lazy"/></p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»ç†è§£äº†æ‰€æœ‰åŸºç¡€æ¦‚å¿µï¼Œå¯ä»¥æŠŠå®ƒä»¬ä¸²èµ·æ¥ï¼Œçœ‹ RAG æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<h3 data-id="heading-18">6.1 RAG çš„ä¸¤ä¸ªé˜¶æ®µ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    subgraph ç¦»çº¿é˜¶æ®µ["ç¦»çº¿é˜¶æ®µï¼šå»ºç«‹çŸ¥è¯†åº“"]
        A[åŸå§‹æ–‡æ¡£] --&gt; B[åˆ‡åˆ†æˆå°å—]
        B --&gt; C[Embedding æ¨¡å‹]
        C --&gt; D[å‘é‡]
        D --&gt; E[(å‘é‡æ•°æ®åº“)]
    end
    
    subgraph åœ¨çº¿é˜¶æ®µ["åœ¨çº¿é˜¶æ®µï¼šå›ç­”é—®é¢˜"]
        F[ç”¨æˆ·é—®é¢˜] --&gt; G[Embedding æ¨¡å‹]
        G --&gt; H[é—®é¢˜å‘é‡]
        H --&gt; I{ç›¸ä¼¼åº¦æœç´¢}
        E --&gt; I
        I --&gt; J[Top-K ç›¸ä¼¼æ–‡æ¡£]
        J --&gt; K[æ‹¼æ¥åˆ° Prompt]
        K --&gt; L[LLM ç”Ÿæˆå›ç­”]
    end
</code></pre>
<blockquote>
<p>[!NOTE]
<strong>ä»€ä¹ˆæ˜¯ Top-Kï¼Ÿ</strong></p>
<p>Top-K æŒ‡çš„æ˜¯è¿”å›<strong>æœ€ç›¸ä¼¼çš„ K æ¡ç»“æœ</strong>ã€‚æ¯”å¦‚ Top-3 å°±æ˜¯è¿”å›ç›¸ä¼¼åº¦æœ€é«˜çš„ 3 ä¸ªæ–‡æ¡£å—ã€‚</p>
<ul>
<li><strong>K å¤ªå°</strong>ï¼ˆå¦‚ 1-2ï¼‰ï¼šå¯èƒ½æ¼æ‰ç›¸å…³å†…å®¹</li>
<li><strong>K å¤ªå¤§</strong>ï¼ˆå¦‚ 20+ï¼‰ï¼šå¯èƒ½å¼•å…¥æ— å…³å™ªéŸ³ï¼Œæµªè´¹ Token</li>
<li><strong>å¸¸ç”¨èŒƒå›´</strong>ï¼š3~10ï¼Œæ ¹æ®å…·ä½“åœºæ™¯è°ƒä¼˜</li>
</ul>
</blockquote>
<h3 data-id="heading-19">6.2 ä¸ºä»€ä¹ˆå¿…é¡»ç”¨å‘é‡æ•°æ®åº“ï¼Ÿ</h3>



































<table><thead><tr><th>æ­¥éª¤</th><th>éœ€è¦çš„èƒ½åŠ›</th><th>ä¼ ç»Ÿæ•°æ®åº“</th><th>å‘é‡æ•°æ®åº“</th></tr></thead><tbody><tr><td>å­˜å‚¨ Embedding</td><td>å­˜å‚¨é«˜ç»´å‘é‡ï¼ˆ768~3072ç»´ï¼‰</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… åŸç”Ÿæ”¯æŒ</td></tr><tr><td>ç›¸ä¼¼åº¦æœç´¢</td><td>è®¡ç®—ä½™å¼¦/æ¬§æ°è·ç¦»</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ ¸å¿ƒåŠŸèƒ½</td></tr><tr><td>è¯­ä¹‰åŒ¹é…</td><td>ç†è§£"AI"â‰ˆ"äººå·¥æ™ºèƒ½"</td><td>âŒ åªèƒ½å…³é”®è¯</td><td>âœ… åŸºäºå‘é‡è·ç¦»</td></tr><tr><td>å¤§è§„æ¨¡æ£€ç´¢</td><td>äº¿çº§å‘é‡æ¯«ç§’å“åº”</td><td>âŒ æ€§èƒ½å·®</td><td>âœ… ANN ç®—æ³•ä¼˜åŒ–</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼šå‘é‡æ•°æ®åº“ = Embedding å­˜å‚¨ + ç›¸ä¼¼åº¦æœç´¢ + é«˜æ•ˆç´¢å¼•ï¼Œè¿™ä¸‰è€…ç¼ºä¸€ä¸å¯ï¼Œè€Œä¼ ç»Ÿæ•°æ®åº“éƒ½ä¸æ”¯æŒã€‚</p>
<h2 data-id="heading-20">7. æ–‡æ¡£åˆ†å—ï¼ˆChunkingï¼‰ï¼šè¢«å¿½è§†çš„å…³é”®æ­¥éª¤</h2>
<p>åœ¨ RAG æµç¨‹å›¾ä¸­æœ‰ä¸€æ­¥"åˆ‡åˆ†æˆå°å—"ï¼Œè¿™ä¸€æ­¥å«åš <strong>Chunkingï¼ˆåˆ†å—ï¼‰</strong>ï¼Œæ˜¯åˆå­¦è€…æœ€å®¹æ˜“å¿½è§†ä½†åˆæå…¶é‡è¦çš„ç¯èŠ‚ã€‚</p>
<h3 data-id="heading-21">7.1 ä¸ºä»€ä¹ˆéœ€è¦åˆ†å—ï¼Ÿ</h3>





















<table><thead><tr><th>åŸå› </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Token é™åˆ¶</strong></td><td>LLM æœ‰ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶ï¼ˆå¦‚ 4Kã€8Kã€128Kï¼‰ï¼Œä¸èƒ½ä¸€æ¬¡å¡å…¥æ•´æœ¬ä¹¦</td></tr><tr><td><strong>è¯­ä¹‰ç²¾åº¦</strong></td><td>å¤ªé•¿çš„æ–‡æœ¬å‘é‡ä¼š"ç¨€é‡Š"è¯­ä¹‰ï¼Œå¯¼è‡´æ£€ç´¢ä¸ç²¾å‡†</td></tr><tr><td><strong>æ£€ç´¢ç²’åº¦</strong></td><td>ç”¨æˆ·é—®çš„æ˜¯å…·ä½“é—®é¢˜ï¼Œéœ€è¦æ‰¾åˆ°å…·ä½“çš„æ®µè½è€Œä¸æ˜¯æ•´ç¯‡æ–‡ç« </td></tr></tbody></table>
<h3 data-id="heading-22">7.2 åˆ†å—ç­–ç•¥å¯¹æ¯”</h3>



































<table><thead><tr><th>ç­–ç•¥</th><th>æ–¹æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>å›ºå®šé•¿åº¦</strong></td><td>æ¯ 500 å­—åˆ‡ä¸€å—</td><td>ç®€å•æ˜“å®ç°</td><td>å¯èƒ½åˆ‡æ–­å¥å­</td></tr><tr><td><strong>æŒ‰å¥å­/æ®µè½</strong></td><td>æŒ‰è‡ªç„¶æ®µè½åˆ†å‰²</td><td>è¯­ä¹‰å®Œæ•´</td><td>é•¿åº¦ä¸å‡åŒ€</td></tr><tr><td><strong>é‡å åˆ†å—</strong></td><td>ç›¸é‚»å—æœ‰ 50-100 å­—é‡å </td><td>é˜²æ­¢ä¿¡æ¯ä¸¢å¤±</td><td>å¢åŠ å­˜å‚¨æˆæœ¬</td></tr><tr><td><strong>è¯­ä¹‰åˆ†å—</strong></td><td>ç”¨æ¨¡å‹åˆ¤æ–­è¯­ä¹‰è¾¹ç•Œ</td><td>æ•ˆæœæœ€å¥½</td><td>è®¡ç®—æˆæœ¬é«˜</td></tr></tbody></table>
<h3 data-id="heading-23">7.3 å¸¸ç”¨åˆ†å—å‚æ•°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¸¸è§çš„åˆ†å—é…ç½®</span>
chunk_size = <span class="hljs-number">512</span>      <span class="hljs-comment"># æ¯å— 512 ä¸ª tokenï¼ˆçº¦ 300-400 ä¸­æ–‡å­—ï¼‰</span>
chunk_overlap = <span class="hljs-number">50</span>    <span class="hljs-comment"># ç›¸é‚»å—é‡å  50 ä¸ª token</span>
</code></pre>
<blockquote>
<p>[!IMPORTANT]
<strong>åˆ†å—å¤§å°ç›´æ¥å½±å“æ£€ç´¢æ•ˆæœ</strong>ï¼š</p>
<ul>
<li><strong>å¤ªå°</strong>ï¼ˆå¦‚ 100 å­—ï¼‰ï¼šä¸Šä¸‹æ–‡ä¸å®Œæ•´ï¼ŒLLM æ— æ³•ç†è§£</li>
<li><strong>å¤ªå¤§</strong>ï¼ˆå¦‚ 2000 å­—ï¼‰ï¼šè¯­ä¹‰è¢«ç¨€é‡Šï¼Œæ£€ç´¢ä¸ç²¾å‡†</li>
<li><strong>æ¨èèµ·ç‚¹</strong>ï¼š256~512 tokensï¼Œæ ¹æ®å®é™…æ•ˆæœè°ƒä¼˜</li>
</ul>
</blockquote>
<h2 data-id="heading-24">8. æ£€ç´¢ç±»å‹ï¼šç¨€ç– vs å¯†é›† vs æ··åˆ</h2>
<p>é™¤äº†æœ¬æ–‡é‡ç‚¹è®²çš„å‘é‡æ£€ç´¢ï¼ˆå¯†é›†æ£€ç´¢ï¼‰ï¼Œè¿˜æœ‰å…¶ä»–æ£€ç´¢æ–¹å¼ã€‚äº†è§£å®ƒä»¬çš„åŒºåˆ«æœ‰åŠ©äºåœ¨å®é™…é¡¹ç›®ä¸­åšå‡ºæ›´å¥½çš„é€‰æ‹©ã€‚</p>
<h3 data-id="heading-25">8.1 ä¸‰ç§æ£€ç´¢æ–¹å¼å¯¹æ¯”</h3>

































<table><thead><tr><th>ç±»å‹</th><th>æ–¹æ³•</th><th>ä»£è¡¨ç®—æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>ç¨€ç–æ£€ç´¢</strong></td><td>å…³é”®è¯åŒ¹é…</td><td>BM25ã€TF-IDF</td><td>ç²¾ç¡®åŒ¹é…å¼ºã€é€Ÿåº¦å¿«</td><td>æ— æ³•ç†è§£åŒä¹‰è¯</td></tr><tr><td><strong>å¯†é›†æ£€ç´¢</strong></td><td>å‘é‡ç›¸ä¼¼åº¦</td><td>Embedding</td><td>è¯­ä¹‰ç†è§£å¼º</td><td>å¯èƒ½ä¸¢å¤±ç²¾ç¡®åŒ¹é…</td></tr><tr><td><strong>æ··åˆæ£€ç´¢</strong></td><td>ä¸¤è€…ç»“åˆ</td><td>Hybrid Search</td><td>å…¼é¡¾ç²¾ç¡®+è¯­ä¹‰</td><td>å¤æ‚åº¦ç•¥é«˜</td></tr></tbody></table>
<h3 data-id="heading-26">8.2 å®é™…æ¡ˆä¾‹å¯¹æ¯”</h3>
<p>ç”¨æˆ·æœç´¢ï¼š"Python 3.12 æ–°ç‰¹æ€§"</p>

























<table><thead><tr><th>æ£€ç´¢æ–¹å¼</th><th>èƒ½å¦æ‰¾åˆ°</th></tr></thead><tbody><tr><td>ç¨€ç–æ£€ç´¢</td><td>âœ… ç²¾ç¡®åŒ¹é… "Python 3.12"</td></tr><tr><td>å¯†é›†æ£€ç´¢</td><td>âœ… èƒ½æ‰¾åˆ°è¯­ä¹‰ç›¸å…³çš„ "Python æœ€æ–°ç‰ˆæœ¬åŠŸèƒ½"</td></tr><tr><td>ç¨€ç–æ£€ç´¢</td><td>âŒ æ‰¾ä¸åˆ° "Python æœ€æ–°ç‰ˆæœ¬åŠŸèƒ½"ï¼ˆæ²¡æœ‰å…³é”®è¯åŒ¹é…ï¼‰</td></tr><tr><td>å¯†é›†æ£€ç´¢</td><td>âš ï¸ å¯èƒ½æ¼æ‰å¿…é¡»åŒ…å« "3.12" çš„ç²¾ç¡®éœ€æ±‚</td></tr></tbody></table>
<h3 data-id="heading-27">8.3 å®é™…ç”Ÿäº§å»ºè®®</h3>
<blockquote>
<p>[!TIP]
<strong>å®é™…é¡¹ç›®ä¸­ï¼Œæ··åˆæ£€ç´¢ï¼ˆHybrid Searchï¼‰å¾€å¾€æ•ˆæœæœ€å¥½</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">æœ€ç»ˆå¾—åˆ† = Î± Ã— å‘é‡ç›¸ä¼¼åº¦ + (<span class="hljs-number">1</span>-Î±) Ã— BM25 åˆ†æ•°
</code></pre>
<p>å…¶ä¸­ Î± é€šå¸¸è®¾ä¸º 0.5~0.7ï¼Œå¯æ ¹æ®åœºæ™¯è°ƒä¼˜ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/889ddcc1118241c49e798ced5632562a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=IYAKKCI%2FooWwjWMlEicmjYAQ68U%3D" alt="ä¸¤å…¨å…¶ç¾ï¼šæ··åˆæ£€ç´¢" loading="lazy"/></p>
<h2 data-id="heading-28">9. ä¸»æµå‘é‡æ•°æ®åº“å¯¹æ¯”ï¼ˆ2024ï¼‰</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bb84b3f82c844c1b668d53de8a792c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=2uvaE8qcF%2BA%2FE5YYGjr41G5U3Co%3D" alt="å‘é‡æ•°æ®åº“æ˜Ÿå›¾" loading="lazy"/></p>
<h3 data-id="heading-29">7.1 å¼€æºå‘é‡æ•°æ®åº“</h3>















































<table><thead><tr><th>äº§å“</th><th>å¼€å‘è¯­è¨€</th><th>å‘é‡è§„æ¨¡</th><th>æ ¸å¿ƒç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Milvus</strong></td><td>Go/C++</td><td>ä¸‡äº¿çº§</td><td>åˆ†å¸ƒå¼æ¶æ„ï¼ŒåŠŸèƒ½æœ€å…¨é¢ï¼Œæ”¯æŒå¤šå‘é‡</td><td>å¤§è§„æ¨¡ä¼ä¸šçº§éƒ¨ç½²</td></tr><tr><td><strong>Qdrant</strong></td><td>Rust</td><td>åäº¿çº§</td><td>æ€§èƒ½æé«˜ï¼Œå…ƒæ•°æ®è¿‡æ»¤å¼ºå¤§</td><td>é«˜æ€§èƒ½æœç´¢ã€è¾¹ç¼˜éƒ¨ç½²</td></tr><tr><td><strong>Weaviate</strong></td><td>Go</td><td>åäº¿çº§</td><td>AI åŸç”Ÿï¼ŒGraphQL APIï¼Œæ¨¡å—åŒ–å¼º</td><td>çŸ¥è¯†å›¾è°±ã€å¤æ‚æŸ¥è¯¢</td></tr><tr><td><strong>Chroma</strong></td><td>Python</td><td>ç™¾ä¸‡çº§</td><td>è½»é‡ç®€å•ï¼Œ5 åˆ†é’Ÿä¸Šæ‰‹</td><td>åŸå‹å¼€å‘ã€å­¦ä¹ å®éªŒ</td></tr><tr><td><strong>pgvector</strong></td><td>C</td><td>åƒä¸‡çº§</td><td>PostgreSQL æ‰©å±•ï¼Œæ— éœ€æ–°å¢ç»„ä»¶</td><td>å·²æœ‰ PG æŠ€æœ¯æ ˆçš„é¡¹ç›®</td></tr></tbody></table>
<h3 data-id="heading-30">7.2 äº‘æ‰˜ç®¡å‘é‡æ•°æ®åº“</h3>



































<table><thead><tr><th>äº§å“</th><th>æ ¸å¿ƒç‰¹ç‚¹</th><th>å®šä»·æ¨¡å¼</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Pinecone</strong></td><td>å…¨æ‰˜ç®¡ï¼Œå¼€ç®±å³ç”¨ï¼ŒServerless æ¶æ„</td><td>æŒ‰å‘é‡æ•°é‡+æŸ¥è¯¢é‡è®¡è´¹</td><td>å¿«é€Ÿä¸Šçº¿ï¼Œä¸æƒ³è¿ç»´</td></tr><tr><td><strong>Zilliz Cloud</strong></td><td>Milvus å•†ä¸šç‰ˆï¼Œä¼ä¸šçº§ SLA</td><td>æŒ‰èµ„æºç”¨é‡è®¡è´¹</td><td>éœ€è¦ Milvus ä½†ä¸æƒ³è‡ªå»º</td></tr><tr><td><strong>Weaviate Cloud</strong></td><td>æ‰˜ç®¡ç‰ˆ Weaviate</td><td>æŒ‰èŠ‚ç‚¹è®¡è´¹</td><td>éœ€è¦ Weaviate ç‰¹æ€§</td></tr><tr><td><strong>Qdrant Cloud</strong></td><td>æ‰˜ç®¡ç‰ˆ Qdrantï¼Œæ”¯æŒæ··åˆäº‘</td><td>æŒ‰èµ„æºè®¡è´¹</td><td>éœ€è¦é«˜æ€§èƒ½+éšç§ä¿æŠ¤</td></tr></tbody></table>
<h3 data-id="heading-31">9.3 å‘é‡æ•°æ®åº“é€‰å‹æŒ‡å—</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¼€å§‹é€‰å‹] --&gt; B{æ•°æ®è§„æ¨¡?}
    B --&gt;|&lt; 100 ä¸‡| C{æ˜¯å¦éœ€è¦å¿«é€Ÿä¸Šæ‰‹?}
    B --&gt;|100 ä¸‡ ~ 10 äº¿| D{æ˜¯å¦éœ€è¦å…¨æ‰˜ç®¡?}
    B --&gt;|&gt; 10 äº¿| E[Milvus åˆ†å¸ƒå¼]
    
    C --&gt;|æ˜¯| F[Chroma]
    C --&gt;|å¦ï¼Œéœ€è¦ç”Ÿäº§çº§| G{å·²æœ‰ PostgreSQL?}
    G --&gt;|æ˜¯| H[pgvector]
    G --&gt;|å¦| I[Qdrant]
    
    D --&gt;|æ˜¯| J[Pinecone / Zilliz Cloud]
    D --&gt;|å¦ï¼Œè‡ªå»º| K{éœ€è¦å¤æ‚æŸ¥è¯¢?}
    K --&gt;|æ˜¯| L[Weaviate]
    K --&gt;|å¦ï¼Œè¿½æ±‚æ€§èƒ½| M[Qdrant / Milvus]
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da99d4b0b4fc45c5ba8c0f397ae8dad7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=UZEQuOUdIHmGGMYYp9zoe88HEy8%3D" alt="å¦‚ä½•é€‰æ‹©" loading="lazy"/></p>
<h3 data-id="heading-32">9.4 å„æ•°æ®åº“æ€§èƒ½ç‰¹ç‚¹</h3>





























































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Milvus</th><th>Qdrant</th><th>Weaviate</th><th>Chroma</th><th>Pinecone</th></tr></thead><tbody><tr><td><strong>æœ€å¤§è§„æ¨¡</strong></td><td>ä¸‡äº¿çº§</td><td>åäº¿çº§</td><td>åäº¿çº§</td><td>ç™¾ä¸‡çº§</td><td>åäº¿çº§</td></tr><tr><td><strong>æŸ¥è¯¢å»¶è¿Ÿ</strong></td><td>æä½</td><td>æä½</td><td>ä½</td><td>ä¸­</td><td>ä½</td></tr><tr><td><strong>å…ƒæ•°æ®è¿‡æ»¤</strong></td><td>âœ… ä¼˜ç§€</td><td>âœ… æœ€å¼º</td><td>âœ… ä¼˜ç§€</td><td>âœ… åŸºç¡€</td><td>âœ… è‰¯å¥½</td></tr><tr><td><strong>æ··åˆæœç´¢</strong></td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âŒ æœ‰é™</td><td>âœ… æ”¯æŒ</td></tr><tr><td><strong>è¿ç»´å¤æ‚åº¦</strong></td><td>é«˜</td><td>ä¸­</td><td>ä¸­</td><td>ä½</td><td>æ— ï¼ˆæ‰˜ç®¡ï¼‰</td></tr><tr><td><strong>å¼€æº/å•†ä¸š</strong></td><td>å¼€æº</td><td>å¼€æº</td><td>å¼€æº</td><td>å¼€æº</td><td>å•†ä¸š</td></tr></tbody></table>
<h2 data-id="heading-33">10. å‘é‡æ•°æ®åº“å¦‚ä½•å®ç°é«˜æ•ˆæœç´¢ï¼Ÿ</h2>
<p>å½“ä½ æœ‰ 1 äº¿ä¸ªå‘é‡æ—¶ï¼Œå¦‚ä½•åœ¨æ¯«ç§’å†…æ‰¾åˆ°æœ€ç›¸ä¼¼çš„ K ä¸ªï¼Ÿ</p>
<h3 data-id="heading-34">8.1 æš´åŠ›æœç´¢çš„é—®é¢˜</h3>
<p>æœ€ç®€å•çš„æ–¹æ³•ï¼šå’Œæ¯ä¸ªå‘é‡éƒ½ç®—ä¸€éç›¸ä¼¼åº¦ï¼Œç„¶åæ’åºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æš´åŠ›æœç´¢ï¼ˆä¼ªä»£ç ï¼‰</span>
similarities = []
<span class="hljs-keyword">for</span> doc_vector <span class="hljs-keyword">in</span> all_vectors:  <span class="hljs-comment"># 1äº¿æ¬¡å¾ªç¯ï¼</span>
    sim = cosine_similarity(query_vector, doc_vector)
    similarities.append(sim)
    
top_k = <span class="hljs-built_in">sorted</span>(similarities)[:k]
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼š1 äº¿å‘é‡ Ã— 1024 ç»´ Ã— ç›¸ä¼¼åº¦è®¡ç®— = <strong>å‡ åç§’ç”šè‡³å‡ åˆ†é’Ÿ</strong>ã€‚ç”¨æˆ·ç­‰ä¸èµ·ï¼</p>
<h3 data-id="heading-35">8.2 ANN ç®—æ³•ï¼šè¿‘ä¼¼ä½†å¿«é€Ÿ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/393685a0893e4bc8b3ed7f4c63da8e7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=usRUlP4XpNlyxIzZUFD%2BgnSQ0v8%3D" alt="æ¯«ç§’çº§å“åº”çš„å¯†ç " loading="lazy"/></p>
<p>å‘é‡æ•°æ®åº“ä½¿ç”¨ <strong>ANNï¼ˆApproximate Nearest Neighborï¼Œè¿‘ä¼¼æœ€è¿‘é‚»ï¼‰</strong> ç®—æ³•ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼š<strong>ä¸éœ€è¦æ‰¾åˆ°ç»å¯¹æœ€ç›¸ä¼¼çš„ï¼Œæ‰¾åˆ°è¶³å¤Ÿç›¸ä¼¼çš„å°±è¡Œ</strong>ã€‚</p>
<p>ç”¨ä¸€ä¸ªç”Ÿæ´»ç±»æ¯”ï¼š</p>
<blockquote>
<p>ä½ è¦åœ¨å›¾ä¹¦é¦†æ‰¾ä¸€æœ¬å…³äº"æœºå™¨å­¦ä¹ "çš„ä¹¦ã€‚</p>
<p><strong>æš´åŠ›æœç´¢</strong>ï¼šç¿»éå›¾ä¹¦é¦†æ¯ä¸€æœ¬ä¹¦ï¼Œæ¯”è¾ƒç›¸å…³æ€§ã€‚<br/>
<strong>ANN æœç´¢</strong>ï¼šå…ˆå»"è®¡ç®—æœºç§‘å­¦"åŒºï¼Œå†å»"äººå·¥æ™ºèƒ½"æ¶ï¼Œç„¶ååœ¨è¿™ä¸ªå°èŒƒå›´å†…æ‰¾ã€‚</p>
</blockquote>
<h3 data-id="heading-36">8.3 HNSW ç®—æ³•ï¼ˆæœ€æµè¡Œï¼‰</h3>
<p><strong>HNSWï¼ˆHierarchical Navigable Small Worldï¼‰</strong> æ˜¯ç›®å‰æœ€å¹¿æ³›ä½¿ç”¨çš„ç´¢å¼•ç®—æ³•ï¼Œç”± Malkov å’Œ Yashunin äº 2016 å¹´æå‡ºï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F1603.09320" target="_blank" title="https://arxiv.org/abs/1603.09320" ref="nofollow noopener noreferrer">Efficient and robust approximate nearest neighbor search using HNSW graphs</a>ï¼ˆarXiv:1603.09320ï¼‰ï¼‰ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šæ„å»ºä¸€ä¸ªå¤šå±‚çš„"å¯¼èˆªå›¾"ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "HNSW å¤šå±‚ç»“æ„"
        L2["ç¬¬2å±‚: åªæœ‰å°‘é‡èŠ‚ç‚¹ â†’ å¿«é€Ÿå®šä½å¤§æ–¹å‘"]
        L1["ç¬¬1å±‚: ä¸­ç­‰æ•°é‡èŠ‚ç‚¹ â†’ é€æ­¥ç¼©å°èŒƒå›´"]
        L0["ç¬¬0å±‚: å…¨éƒ¨èŠ‚ç‚¹ â†’ ç²¾ç¡®æ‰¾åˆ°æœ€è¿‘é‚»"]
    end
    
    L2 --&gt; L1
    L1 --&gt; L0
    
    Q["æŸ¥è¯¢å‘é‡"] --&gt; L2
    L0 --&gt; R["Top-K ç»“æœ"]
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼š</p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>æš´åŠ›æœç´¢</th><th>HNSW</th></tr></thead><tbody><tr><td>æ—¶é—´å¤æ‚åº¦</td><td>O(n)</td><td>O(log n)</td></tr><tr><td>1 äº¿å‘é‡æœç´¢</td><td>~60 ç§’</td><td>~10 æ¯«ç§’</td></tr><tr><td>å‡†ç¡®ç‡ï¼ˆå¬å›ç‡ï¼‰</td><td>100%</td><td>95%~99%</td></tr></tbody></table>
<h2 data-id="heading-37">11. ä»è®ºæ–‡çœ‹ï¼šRAG ä»è¯ç”Ÿå°±ä¾èµ–å‘é‡æ•°æ®åº“</h2>
<h3 data-id="heading-38">9.1 Meta 2020 å¹´åŸå§‹è®ºæ–‡</h3>
<p>2020 å¹´ï¼ŒMetaï¼ˆåŸ Facebookï¼‰å‘å¸ƒäº† RAG çš„å¥ åŸºæ€§è®ºæ–‡ã€‚åœ¨è®ºæ–‡ä¸­ï¼Œä½œè€…æ˜ç¡®ä½¿ç”¨äº† <strong>FAISS</strong> ä½œä¸ºå‘é‡ç´¢å¼•ï¼š</p>
<blockquote>
<p>"We use a dense vector index of Wikipedia, accessed with a pre-trained neural retriever... We build a single MIPS index using <strong>FAISS</strong> for fast retrieval of documents."</p>
<p>â€”â€” Lewis et al., 2020</p>
</blockquote>

























<table><thead><tr><th>ç»„ä»¶</th><th>è®ºæ–‡å®ç°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>çŸ¥è¯†æº</strong></td><td>æ•´ä¸ª Wikipedia</td><td>2100 ä¸‡ä¸ªæ–‡æ¡£å—</td></tr><tr><td><strong>åˆ†å—ç­–ç•¥</strong></td><td>100 è¯/å—</td><td>ä¿è¯è¯­ä¹‰å®Œæ•´æ€§</td></tr><tr><td><strong>å‘é‡ç´¢å¼•</strong></td><td>FAISS</td><td>Facebook å¼€æºçš„å‘é‡æ£€ç´¢åº“</td></tr></tbody></table>
<blockquote>
<p>[!IMPORTANT]
<strong>ç»“è®º</strong>ï¼šä» RAG è¯ç”Ÿçš„ç¬¬ä¸€å¤©èµ·ï¼Œå‘é‡æ•°æ®åº“ï¼ˆFAISSï¼‰å°±æ˜¯å…¶æ ¸å¿ƒç»„ä»¶ã€‚è¿™ä¸æ˜¯å·§åˆï¼Œè€Œæ˜¯ç”± RAG çš„æŠ€æœ¯æœ¬è´¨å†³å®šçš„ã€‚</p>
</blockquote>
<h2 data-id="heading-39">12. å¸¸è§è¯¯åŒºæ¾„æ¸…</h2>
<p>åˆå­¦è€…åœ¨å­¦ä¹  RAG å’Œå‘é‡æ•°æ®åº“æ—¶ï¼Œå®¹æ˜“äº§ç”Ÿä»¥ä¸‹è¯¯è§£ï¼š</p>





























<table><thead><tr><th>è¯¯åŒº</th><th>æ­£ç¡®ç†è§£</th></tr></thead><tbody><tr><td>"å‘é‡æ•°æ®åº“èƒ½ç†è§£è¯­ä¹‰"</td><td>âŒ å‘é‡æ•°æ®åº“åªè´Ÿè´£<strong>å­˜å‚¨å’Œæœç´¢</strong>ï¼Œè¯­ä¹‰ç†è§£æ˜¯ <strong>Embedding æ¨¡å‹</strong>çš„åŠŸèƒ½</td></tr><tr><td>"ç»´åº¦è¶Šé«˜ä¸€å®šè¶Šå¥½"</td><td>âŒ é«˜ç»´åº¦ä¼šå¢åŠ å­˜å‚¨å’Œè®¡ç®—æˆæœ¬ï¼Œéœ€è¦åœ¨ç²¾åº¦å’Œæ•ˆç‡ä¹‹é—´<strong>æƒè¡¡</strong></td></tr><tr><td>"RAG åªèƒ½ç”¨å‘é‡æ•°æ®åº“"</td><td>âŒ ä¹Ÿå¯ä»¥ç»“åˆ BM25 åš<strong>æ··åˆæ£€ç´¢</strong>ï¼Œç”šè‡³ç”¨ä¼ ç»Ÿæœç´¢ä½œä¸ºè¡¥å……</td></tr><tr><td>"Embedding æ¨¡å‹éƒ½ä¸€æ ·"</td><td>âŒ ä¸åŒæ¨¡å‹å¯¹ä¸åŒè¯­è¨€ã€é¢†åŸŸçš„æ•ˆæœå·®å¼‚å¾ˆå¤§ï¼Œéœ€è¦<strong>é’ˆå¯¹æ€§é€‰æ‹©</strong></td></tr><tr><td>"åˆ†å—è¶Šå°è¶Šç²¾ç¡®"</td><td>âŒ å¤ªå°ä¼šä¸¢å¤±ä¸Šä¸‹æ–‡ï¼Œ<strong>256~512 tokens æ˜¯å¸¸ç”¨èµ·ç‚¹</strong></td></tr></tbody></table>
<blockquote>
<p>[!CAUTION]
<strong>æœ€å¸¸è§çš„é”™è¯¯</strong>ï¼šå¾ˆå¤šåˆå­¦è€…æŠŠå…¨éƒ¨ç²¾åŠ›æ”¾åœ¨é€‰æ‹©å‘é‡æ•°æ®åº“ä¸Šï¼Œå´å¿½è§†äº† <strong>Embedding æ¨¡å‹é€‰æ‹©</strong>å’Œ<strong>åˆ†å—ç­–ç•¥</strong>ã€‚å®é™…ä¸Šï¼Œè¿™ä¸‰è€…å¯¹ RAG æ•ˆæœçš„å½±å“åŒæ ·é‡è¦ï¼</p>
</blockquote>
<h2 data-id="heading-40">13. æ€»ç»“ï¼šå®Œæ•´çš„å› æœé“¾æ¡</h2>
<h3 data-id="heading-41">ä¸ºä»€ä¹ˆ RAG å¿…é¡»ä½¿ç”¨å‘é‡æ•°æ®åº“ï¼Ÿ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e67c8c812cca4c5f82cd38af68f4b103~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc21hbGx5b3VuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001968&amp;x-signature=LJjz0yL3Y5AMkyfdI2JvaudRTs8%3D" alt="æ€»ç»“" loading="lazy"/></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> RAG éœ€è¦"æ£€ç´¢"å¤–éƒ¨çŸ¥è¯†æ¥å¢å¼º LLM
   â†“
<span class="hljs-bullet">2.</span> æ£€ç´¢éœ€è¦"è¯­ä¹‰åŒ¹é…"ï¼Œè€Œä¸æ˜¯å…³é”®è¯åŒ¹é…
   â†“
<span class="hljs-bullet">3.</span> è¯­ä¹‰åŒ¹é…éœ€è¦æŠŠæ–‡æœ¬è½¬æˆå‘é‡ï¼ˆEmbeddingï¼‰
   â†“
<span class="hljs-bullet">4.</span> å‘é‡éœ€è¦"ç›¸ä¼¼åº¦æœç´¢"æ‰¾åˆ°æœ€ç›¸å…³çš„
   â†“
<span class="hljs-bullet">5.</span> å¤§è§„æ¨¡ç›¸ä¼¼åº¦æœç´¢éœ€è¦ ANN ç´¢å¼•ç®—æ³•
   â†“
<span class="hljs-bullet">6.</span> å‘é‡æ•°æ®åº“ = Embedding å­˜å‚¨ + ç›¸ä¼¼åº¦æœç´¢ + ANN ç´¢å¼•
   â†“
<span class="hljs-bullet">7.</span> âœ… å‘é‡æ•°æ®åº“æ˜¯ RAG çš„å¿…é€‰é¡¹
</code></pre>
<h3 data-id="heading-42">æ ¸å¿ƒæ¦‚å¿µå›é¡¾</h3>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>ä¸€å¥è¯è§£é‡Š</th></tr></thead><tbody><tr><td><strong>å‘é‡</strong></td><td>ä¸€ç»„æœ‰åºçš„æ•°å­—ï¼Œå¯ä»¥è¡¨ç¤ºä»»ä½•ä¸œè¥¿çš„"ç‰¹å¾"</td></tr><tr><td><strong>Embedding</strong></td><td>æŠŠæ–‡æœ¬è½¬æˆå‘é‡çš„æŠ€æœ¯ï¼Œè¯­ä¹‰ç›¸è¿‘çš„æ–‡æœ¬å‘é‡è·ç¦»æ›´è¿‘</td></tr><tr><td><strong>ä½™å¼¦ç›¸ä¼¼åº¦</strong></td><td>æ¯”è¾ƒä¸¤ä¸ªå‘é‡"æ–¹å‘"æ˜¯å¦ä¸€è‡´ï¼Œåˆ¤æ–­è¯­ä¹‰ç›¸ä¼¼æ€§</td></tr><tr><td><strong>å‘é‡æ•°æ®åº“</strong></td><td>ä¸“é—¨å­˜å‚¨å’Œæ£€ç´¢å‘é‡çš„æ•°æ®åº“ï¼Œæ”¯æŒç›¸ä¼¼åº¦æœç´¢</td></tr><tr><td><strong>ANN / HNSW</strong></td><td>å¿«é€Ÿæ‰¾åˆ°è¿‘ä¼¼æœ€è¿‘é‚»çš„ç´¢å¼•ç®—æ³•ï¼Œå®ç°æ¯«ç§’çº§æ£€ç´¢</td></tr></tbody></table>
<h2 data-id="heading-43">14. å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹</h2>
<h3 data-id="heading-44">ä½¿ç”¨ Chromaï¼ˆæœ€ç®€å•çš„å…¥é—¨ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®‰è£…ï¼špip install chromadb</span>

<span class="hljs-keyword">import</span> chromadb

<span class="hljs-comment"># åˆ›å»ºå®¢æˆ·ç«¯</span>
client = chromadb.Client()

<span class="hljs-comment"># åˆ›å»ºé›†åˆï¼ˆè‡ªåŠ¨ä½¿ç”¨å†…ç½® Embedding æ¨¡å‹ï¼‰</span>
collection = client.create_collection(<span class="hljs-string">"my_docs"</span>)

<span class="hljs-comment"># æ·»åŠ æ–‡æ¡£</span>
collection.add(
    documents=[
        <span class="hljs-string">"è‹¹æœå…¬å¸æ˜¯ä¸€å®¶ç§‘æŠ€å…¬å¸"</span>,
        <span class="hljs-string">"é¦™è•‰æ˜¯ä¸€ç§æ°´æœ"</span>,
        <span class="hljs-string">"äººå·¥æ™ºèƒ½æ­£åœ¨æ”¹å˜ä¸–ç•Œ"</span>
    ],
    ids=[<span class="hljs-string">"doc1"</span>, <span class="hljs-string">"doc2"</span>, <span class="hljs-string">"doc3"</span>]
)

<span class="hljs-comment"># è¯­ä¹‰æœç´¢</span>
results = collection.query(
    query_texts=[<span class="hljs-string">"AI æŠ€æœ¯"</span>],
    n_results=<span class="hljs-number">2</span>
)
<span class="hljs-built_in">print</span>(results)
<span class="hljs-comment"># è¾“å‡ºï¼šä¼šæ‰¾åˆ° "äººå·¥æ™ºèƒ½æ­£åœ¨æ”¹å˜ä¸–ç•Œ" å’Œ "è‹¹æœå…¬å¸æ˜¯ä¸€å®¶ç§‘æŠ€å…¬å¸"</span>
<span class="hljs-comment"># æ³¨æ„ï¼š"é¦™è•‰æ˜¯ä¸€ç§æ°´æœ" ä¸ä¼šå‡ºç°ï¼Œå› ä¸ºè¯­ä¹‰è·ç¦»æœ€è¿œ</span>
</code></pre>
<h2 data-id="heading-45">15. å‚è€ƒèµ„æ–™</h2>
<h3 data-id="heading-46">æ ¸å¿ƒè®ºæ–‡</h3>





























<table><thead><tr><th>è®ºæ–‡</th><th>ä½œè€…/æœºæ„</th><th>å¹´ä»½</th><th>ä¸»è¦è´¡çŒ®</th></tr></thead><tbody><tr><td><em>Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks</em></td><td>Lewis et al. (Meta AI)</td><td>2020</td><td>RAG å¥ åŸºè®ºæ–‡ï¼Œé¦–æ¬¡ä½¿ç”¨ FAISS</td></tr><tr><td><em>Efficient and robust approximate nearest neighbor search using HNSW graphs</em></td><td>Malkov &amp; Yashunin</td><td>2016</td><td>HNSW ç®—æ³•åŸå§‹è®ºæ–‡</td></tr><tr><td><em>When Large Language Models Meet Vector Databases: A Survey</em></td><td>arXiv</td><td>2024</td><td>LLM ä¸å‘é‡æ•°æ®åº“ç»¼åˆç»¼è¿°</td></tr></tbody></table>
<h3 data-id="heading-47">æ¨èé˜…è¯»</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebookresearch%2Ffaiss" target="_blank" title="https://github.com/facebookresearch/faiss" ref="nofollow noopener noreferrer">FAISS: A Library for Efficient Similarity Search</a> - Meta å¼€æºå‘é‡æ£€ç´¢åº“</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.trychroma.com%2F" target="_blank" title="https://docs.trychroma.com/" ref="nofollow noopener noreferrer">Chroma å¿«é€Ÿå¼€å§‹</a> - æœ€ç®€å•çš„å…¥é—¨å‘é‡æ•°æ®åº“</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmilvus.io%2Fdocs" target="_blank" title="https://milvus.io/docs" ref="nofollow noopener noreferrer">Milvus å®˜æ–¹æ–‡æ¡£</a> - ä¼ä¸šçº§å‘é‡æ•°æ®åº“</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.pinecone.io%2Flearn%2F" target="_blank" title="https://www.pinecone.io/learn/" ref="nofollow noopener noreferrer">Pinecone Learning Center</a> - å‘é‡æ•°æ®åº“å…¥é—¨æ•™ç¨‹</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Fembeddings" target="_blank" title="https://platform.openai.com/docs/guides/embeddings" ref="nofollow noopener noreferrer">OpenAI Embeddings Guide</a> - OpenAI å®˜æ–¹ Embedding æ–‡æ¡£</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C#æ“ä½œWordæ–‡æ¡£ï¼šå¦‚ä½•ç²¾å‡†æ’å…¥ä¸æ ¼å¼åŒ–æ®µè½ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598807837868982298</link>    <guid>https://juejin.cn/post/7598807837868982298</guid>    <pubDate>2026-01-26T02:28:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598807837868982298" data-draft-id="7599094262592798730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C#æ“ä½œWordæ–‡æ¡£ï¼šå¦‚ä½•ç²¾å‡†æ’å…¥ä¸æ ¼å¼åŒ–æ®µè½ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,C#,.NET"/> <meta itemprop="datePublished" content="2026-01-26T02:28:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼ºç‚¹å†…å‘"/> <meta itemprop="url" content="https://juejin.cn/user/3414438228006112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C#æ“ä½œWordæ–‡æ¡£ï¼šå¦‚ä½•ç²¾å‡†æ’å…¥ä¸æ ¼å¼åŒ–æ®µè½ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3414438228006112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼ºç‚¹å†…å‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:28:00.000Z" title="Mon Jan 26 2026 02:28:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">C#æ“ä½œWordæ–‡æ¡£ï¼šå¦‚ä½•ç²¾å‡†æ’å…¥ä¸æ ¼å¼åŒ–æ®µè½ï¼Ÿ</h2>
<p>åœ¨C#åº”ç”¨å¼€å‘ä¸­ï¼Œå¤„ç†Wordæ–‡æ¡£æ˜¯å¸¸è§çš„éœ€æ±‚ï¼Œå°¤å…¶æ˜¯åœ¨ç”ŸæˆæŠ¥å‘Šã€åˆåŒæˆ–è‡ªåŠ¨åŒ–æ–‡æ¡£æ—¶ã€‚ç„¶è€Œï¼Œå¦‚ä½•é«˜æ•ˆã€ç²¾å‡†åœ°æ’å…¥æ®µè½ï¼Œæ— è®ºæ˜¯çº¯æ–‡æœ¬ã€å¸¦æ ¼å¼æ–‡æœ¬ï¼Œè¿˜æ˜¯ä»å…¶ä»–æ–‡æ¡£å¤åˆ¶å†…å®¹ï¼Œå¾€å¾€æ˜¯å¼€å‘è€…é¢ä¸´çš„ç—›ç‚¹ã€‚åŸç”Ÿçš„COMç»„ä»¶æ“ä½œå¤æ‚ä¸”ä¾èµ–Officeç¯å¢ƒï¼Œæ‰‹åŠ¨æ‹¼æ¥å­—ç¬¦ä¸²æ•ˆç‡ä½ä¸‹ï¼Œè¿™éƒ½æå¤§åœ°å½±å“äº†å¼€å‘æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åˆ©ç”¨å¼ºå¤§çš„ç¬¬ä¸‰æ–¹åº“ Spire.Doc for .NETï¼Œè½»æ¾å®ç°Wordæ–‡æ¡£çš„æ®µè½æ’å…¥æ“ä½œï¼Œè®©ä½ åœ¨å¤„ç†Wordæ–‡æ¡£æ—¶æ¸¸åˆƒæœ‰ä½™ï¼Œæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<hr/>
<h3 data-id="heading-1">Spire.Doc for .NETï¼šWordæ–‡æ¡£æ“ä½œçš„åˆ©å™¨</h3>
<p>Spire.Doc for .NET æ˜¯ä¸€ä¸ªä¸“ä¸šçº§çš„.NET Wordç»„ä»¶ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ä¸å®‰è£…Microsoft Officeçš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºã€è¯»å–ã€å†™å…¥ã€ä¿®æ”¹å’Œè½¬æ¢Wordæ–‡æ¡£ã€‚å…¶APIè®¾è®¡ç›´è§‚ä¸”åŠŸèƒ½å¼ºå¤§ï¼Œå°¤å…¶åœ¨å¤„ç†æ–‡æ¡£ç»“æ„å’Œå†…å®¹ï¼ˆå¦‚æ®µè½ã€è¡¨æ ¼ã€å›¾ç‰‡ç­‰ï¼‰æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œæå¤§åœ°ç®€åŒ–äº†å¤æ‚çš„Wordè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚ä¸åŸç”ŸCOMç»„ä»¶ç›¸æ¯”ï¼ŒSpire.Doc for .NETæä¾›äº†æ›´å‹å¥½çš„APIï¼Œæ›´å¥½çš„å…¼å®¹æ€§ï¼Œå¹¶ä¸”ä¸ä¾èµ–äºOfficeå®‰è£…ï¼Œè¿™åœ¨æœåŠ¡å™¨ç«¯æˆ–æ— UIç¯å¢ƒä¸­è¿›è¡Œæ–‡æ¡£å¤„ç†æ—¶å°¤ä¸ºé‡è¦ã€‚</p>
<hr/>
<h3 data-id="heading-2">åŸºç¡€æ“ä½œï¼šæ’å…¥çº¯æ–‡æœ¬ä¸æŒ‡å®šæ ¼å¼æ®µè½</h3>
<p>æœ€å¸¸è§çš„éœ€æ±‚ä¹‹ä¸€å°±æ˜¯æ’å…¥æ–‡æœ¬æ®µè½ã€‚Spire.Doc for .NETæä¾›äº†ç›´è§‚çš„æ–¹æ³•æ¥åˆ›å»ºæ–°çš„æ®µè½ï¼Œå¹¶ä¸ºå…¶æ·»åŠ æ–‡æœ¬å†…å®¹ï¼ŒåŒæ—¶è¿˜èƒ½çµæ´»åœ°è®¾ç½®å„ç§æ ¼å¼ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> Spire.Doc;
<span class="hljs-keyword">using</span> Spire.Doc.Documents;
<span class="hljs-keyword">using</span> Spire.Doc.Fields;
<span class="hljs-keyword">using</span> System.Drawing; <span class="hljs-comment">// ç”¨äºColor</span>

<span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„Wordæ–‡æ¡£</span>
        Document doc = <span class="hljs-keyword">new</span> Document();
        <span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªèŠ‚ï¼ˆSectionï¼‰ï¼Œæ–‡æ¡£è‡³å°‘éœ€è¦ä¸€ä¸ªèŠ‚</span>
        Section sec = doc.AddSection();

        <span class="hljs-comment">// ç¤ºä¾‹ä¸€ï¼šæ’å…¥çº¯æ–‡æœ¬æ®µè½</span>
        Paragraph para1 = sec.AddParagraph();
        para1.AppendText(<span class="hljs-string">"è¿™æ˜¯æ’å…¥çš„ç¬¬ä¸€ä¸ªçº¯æ–‡æœ¬æ®µè½ã€‚"</span>);
        para1.AppendText(<span class="hljs-string">"è¿™æ˜¯åç»­æ·»åŠ çš„æ–‡æœ¬ã€‚"</span>); <span class="hljs-comment">// å¯ä»¥åœ¨åŒä¸€æ®µè½ä¸­ç»§ç»­æ·»åŠ æ–‡æœ¬</span>

        <span class="hljs-comment">// ç¤ºä¾‹äºŒï¼šæ’å…¥å¸¦æ ¼å¼æ®µè½</span>
        Paragraph para2 = sec.AddParagraph();
        TextRange tr = para2.AppendText(<span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªå¸¦æ ¼å¼çš„æ®µè½ã€‚"</span>);
        tr.CharacterFormat.FontName = <span class="hljs-string">"å®‹ä½“"</span>; <span class="hljs-comment">// è®¾ç½®å­—ä½“</span>
        tr.CharacterFormat.FontSize = <span class="hljs-number">14</span>;     <span class="hljs-comment">// è®¾ç½®å­—å·</span>
        tr.CharacterFormat.TextColor = Color.Blue; <span class="hljs-comment">// è®¾ç½®é¢œè‰²</span>
        tr.CharacterFormat.Bold = <span class="hljs-literal">true</span>;       <span class="hljs-comment">// è®¾ç½®ç²—ä½“</span>
        para2.Format.HorizontalAlignment = HorizontalAlignment.Center; <span class="hljs-comment">// è®¾ç½®æ®µè½å±…ä¸­å¯¹é½</span>

        <span class="hljs-comment">// ç¤ºä¾‹ä¸‰ï¼šè®¾ç½®æ®µè½è¡Œè·</span>
        Paragraph para3 = sec.AddParagraph();
        para3.AppendText(<span class="hljs-string">"è¿™ä¸ªæ®µè½çš„è¡Œè·å°†è¢«è®¾ç½®ä¸º1.5å€è¡Œè·ã€‚"</span>);
        para3.Format.LineSpacingRule = LineSpacingRule.Multiple; <span class="hljs-comment">// è®¾ç½®è¡Œè·è§„åˆ™ä¸ºå€æ•°</span>
        para3.Format.LineSpacing = <span class="hljs-number">1.5f</span> * <span class="hljs-number">12</span>; <span class="hljs-comment">// 1.5å€è¡Œè·ï¼Œå…¶ä¸­12ç£…æ˜¯å•å€è¡Œè·çš„åŸºå‡†å€¼</span>

        <span class="hljs-comment">// ä¿å­˜æ–‡æ¡£</span>
        doc.SaveToFile(<span class="hljs-string">"InsertParagraphs_Basic.docx"</span>, FileFormat.Docx);
        System.Diagnostics.Process.Start(<span class="hljs-string">"InsertParagraphs_Basic.docx"</span>); <span class="hljs-comment">// æ‰“å¼€æ–‡æ¡£æŸ¥çœ‹æ•ˆæœ</span>
    }
}
</code></pre>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº† <code>Document</code> å’Œ <code>Section</code> å¯¹è±¡ã€‚ç„¶åï¼Œé€šè¿‡ <code>sec.AddParagraph()</code> æ–¹æ³•æ·»åŠ æ–°çš„ <code>Paragraph</code> å¯¹è±¡ã€‚<code>AppendText()</code> æ–¹æ³•ç”¨äºå‘æ®µè½ä¸­æ·»åŠ æ–‡æœ¬å†…å®¹ã€‚å¯¹äºæ ¼å¼è®¾ç½®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>TextRange.CharacterFormat</code> æ¥è®¾ç½®å­—ç¬¦çº§åˆ«ï¼ˆå¦‚å­—ä½“ã€é¢œè‰²ï¼‰ï¼Œé€šè¿‡ <code>Paragraph.Format</code> æ¥è®¾ç½®æ®µè½çº§åˆ«ï¼ˆå¦‚å¯¹é½æ–¹å¼ã€è¡Œè·ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-3">è¿›é˜¶æŠ€å·§ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸å†…å®¹å¤åˆ¶</h3>
<p>é™¤äº†åœ¨æ–‡æ¡£æœ«å°¾æ·»åŠ æ®µè½ï¼Œæœ‰æ—¶æˆ‘ä»¬è¿˜éœ€è¦åœ¨æ–‡æ¡£çš„ç‰¹å®šä½ç½®æ’å…¥æ–°æ®µè½ï¼Œæˆ–è€…å°†ç°æœ‰æ–‡æ¡£ä¸­çš„æ®µè½å¤åˆ¶åˆ°ç›®æ ‡ä½ç½®ã€‚Spire.Doc for .NETåŒæ ·æä¾›äº†çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> Spire.Doc;
<span class="hljs-keyword">using</span> Spire.Doc.Documents;
<span class="hljs-keyword">using</span> Spire.Doc.Fields;
<span class="hljs-keyword">using</span> System.Drawing;
<span class="hljs-keyword">using</span> System.IO;

<span class="hljs-keyword">class</span> <span class="hljs-title">AdvancedParagraphInsertion</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€äº›å†…å®¹çš„æ–‡æ¡£ä½œä¸ºåŸºç¡€</span>
        Document doc = <span class="hljs-keyword">new</span> Document();
        Section sec = doc.AddSection();
        sec.AddParagraph().AppendText(<span class="hljs-string">"è¿™æ˜¯æ–‡æ¡£çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚"</span>);
        sec.AddParagraph().AppendText(<span class="hljs-string">"è¿™æ˜¯æ–‡æ¡£çš„ç¬¬äºŒä¸ªæ®µè½ã€‚"</span>);
        sec.AddParagraph().AppendText(<span class="hljs-string">"è¿™æ˜¯æ–‡æ¡£çš„ç¬¬ä¸‰ä¸ªæ®µè½ã€‚"</span>);
        doc.SaveToFile(<span class="hljs-string">"ExistingDocument.docx"</span>, FileFormat.Docx);

        <span class="hljs-comment">// ç¤ºä¾‹å››ï¼šåœ¨æŒ‡å®šä½ç½®ï¼ˆä¾‹å¦‚ç¬¬äºŒä¸ªæ®µè½ä¹‹å‰ï¼‰æ’å…¥æ–°æ®µè½</span>
        Document targetDoc = <span class="hljs-keyword">new</span> Document(<span class="hljs-string">"ExistingDocument.docx"</span>);
        Section targetSec = targetDoc.Sections[<span class="hljs-number">0</span>]; <span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªèŠ‚</span>

        <span class="hljs-comment">// å‡è®¾è¦åœ¨ç°æœ‰ç¬¬äºŒä¸ªæ®µè½ï¼ˆç´¢å¼•ä¸º1ï¼‰ä¹‹å‰æ’å…¥æ–°æ®µè½</span>
        <span class="hljs-keyword">if</span> (targetSec.Paragraphs.Count &gt; <span class="hljs-number">1</span>)
        {
            Paragraph newPara = <span class="hljs-keyword">new</span> Paragraph(targetDoc); <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå…³è”åˆ°ç›®æ ‡æ–‡æ¡£çš„æ–°æ®µè½</span>
            newPara.AppendText(<span class="hljs-string">"è¿™æ˜¯åœ¨ç¬¬äºŒä¸ªæ®µè½ä¹‹å‰æ’å…¥çš„æ–°æ®µè½ã€‚"</span>);
            targetSec.Paragraphs.Insert(<span class="hljs-number">1</span>, newPara); <span class="hljs-comment">// ç´¢å¼•ä¸º1ï¼Œå³ç¬¬äºŒä¸ªä½ç½®</span>
        }

        <span class="hljs-comment">// ç¤ºä¾‹äº”ï¼šä»å¦ä¸€ä¸ªæ–‡æ¡£å¤åˆ¶æ®µè½</span>
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæºæ–‡æ¡£</span>
        Document sourceDoc = <span class="hljs-keyword">new</span> Document();
        Section sourceSec = sourceDoc.AddSection();
        Paragraph sourcePara = sourceSec.AddParagraph();
        TextRange sourceTr = sourcePara.AppendText(<span class="hljs-string">"è¿™æ˜¯ä»æºæ–‡æ¡£å¤åˆ¶è¿‡æ¥çš„æ®µè½ï¼Œå¸¦çº¢è‰²ç²—ä½“ã€‚"</span>);
        sourceTr.CharacterFormat.TextColor = Color.Red;
        sourceTr.CharacterFormat.Bold = <span class="hljs-literal">true</span>;
        sourceDoc.SaveToFile(<span class="hljs-string">"SourceDocument.docx"</span>, FileFormat.Docx);

        <span class="hljs-comment">// å°†æºæ–‡æ¡£çš„ç¬¬ä¸€ä¸ªæ®µè½å¤åˆ¶åˆ°ç›®æ ‡æ–‡æ¡£çš„æœ«å°¾</span>
        <span class="hljs-keyword">if</span> (sourceSec.Paragraphs.Count &gt; <span class="hljs-number">0</span>)
        {
            <span class="hljs-comment">// æ³¨æ„ï¼šç›´æ¥æ·»åŠ æºæ–‡æ¡£çš„Paragraphå¯¹è±¡ä¼šå¯¼è‡´è¯¥æ®µè½ä»æºæ–‡æ¡£ä¸­ç§»é™¤ã€‚</span>
            <span class="hljs-comment">// åº”è¯¥ä½¿ç”¨Clone()æ–¹æ³•åˆ›å»ºå‰¯æœ¬ã€‚</span>
            Paragraph copiedPara = sourceSec.Paragraphs[<span class="hljs-number">0</span>].Clone() <span class="hljs-keyword">as</span> Paragraph;
            <span class="hljs-comment">// å°†å…‹éš†çš„æ®µè½æ·»åŠ åˆ°ç›®æ ‡æ–‡æ¡£çš„ç¬¬ä¸€ä¸ªèŠ‚</span>
            targetSec.Paragraphs.Add(copiedPara); 
        }

        <span class="hljs-comment">// ä¿å­˜ä¿®æ”¹åçš„ç›®æ ‡æ–‡æ¡£</span>
        targetDoc.SaveToFile(<span class="hljs-string">"InsertParagraphs_Advanced.docx"</span>, FileFormat.Docx);
        System.Diagnostics.Process.Start(<span class="hljs-string">"InsertParagraphs_Advanced.docx"</span>);
    }
}
</code></pre>
<p>åœ¨æŒ‡å®šä½ç½®æ’å…¥æ—¶ï¼Œ<code>Section.Paragraphs.Insert(index, paragraph)</code> æ–¹æ³•éå¸¸æœ‰ç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä»ä¸€ä¸ªæ–‡æ¡£å¤åˆ¶æ®µè½åˆ°å¦ä¸€ä¸ªæ–‡æ¡£æ—¶ï¼Œä¸ºäº†é¿å…æºæ–‡æ¡£å†…å®¹çš„ä¸¢å¤±ï¼Œåº”ä½¿ç”¨ <code>Clone()</code> æ–¹æ³•åˆ›å»ºæ®µè½çš„å‰¯æœ¬ã€‚</p>
<hr/>
<h3 data-id="heading-4">å¸¸è§é—®é¢˜ä¸æ•ˆç‡æå‡å»ºè®®</h3>
<p>åœ¨ä½¿ç”¨Spire.Doc for .NETå¤„ç†Wordæ–‡æ¡£æ—¶ï¼Œæœ‰ä¸€äº›æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹å¯ä»¥å¸®åŠ©ä½ æé«˜æ•ˆç‡å’Œé¿å…æ½œåœ¨é—®é¢˜ï¼š</p>
<ul>
<li><strong>å¤„ç†å¤§å‹æ–‡æ¡£æ€§èƒ½è€ƒé‡</strong>ï¼šå¯¹äºåŒ…å«å¤§é‡å†…å®¹æˆ–å¤æ‚ç»“æ„çš„æ–‡æ¡£ï¼Œé¢‘ç¹åœ°è¿›è¡Œå†™å…¥æ“ä½œå¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚å¯ä»¥è€ƒè™‘æ‰¹é‡æ·»åŠ  <code>TextRange</code> æˆ–ä½¿ç”¨ <code>StringBuilder</code> æ„å»ºå¤§å‹æ–‡æœ¬å—åä¸€æ¬¡æ€§æ’å…¥ã€‚</li>
<li><strong>å†…å­˜ç®¡ç†ä¸å¯¹è±¡é‡Šæ”¾</strong>ï¼š<code>Document</code> å¯¹è±¡ä¼šå ç”¨ä¸€å®šçš„å†…å­˜èµ„æºã€‚åœ¨å®Œæˆæ–‡æ¡£æ“ä½œåï¼ŒåŠæ—¶è°ƒç”¨ <code>Document.Dispose()</code> æ–¹æ³•é‡Šæ”¾èµ„æºæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚</li>
<li><strong>ç»“åˆæ¨¡æ¿ä½¿ç”¨</strong>ï¼šå¯¹äºéœ€è¦ç”Ÿæˆå¤§é‡ç»“æ„ç›¸ä¼¼æ–‡æ¡£çš„åœºæ™¯ï¼Œå»ºè®®å…ˆåˆ›å»ºä¸€ä¸ªWordæ¨¡æ¿æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«é¢„å®šä¹‰çš„æ ·å¼ã€å ä½ç¬¦ç­‰ã€‚ç„¶åä½¿ç”¨Spire.DocåŠ è½½æ¨¡æ¿ï¼Œé€šè¿‡æŸ¥æ‰¾å’Œæ›¿æ¢å ä½ç¬¦ï¼Œæˆ–åœ¨ç‰¹å®šä½ç½®æ’å…¥æ–°å†…å®¹æ¥ç”Ÿæˆæœ€ç»ˆæ–‡æ¡£ï¼Œè¿™ä¼šæ¯”ä»é›¶å¼€å§‹æ„å»ºæ–‡æ¡£æ›´é«˜æ•ˆã€‚</li>
<li><strong>æ ·å¼é‡ç”¨</strong>ï¼šå¦‚æœå¤šä¸ªæ®µè½éœ€è¦ç›¸åŒçš„æ ¼å¼ï¼Œå¯ä»¥å®šä¹‰ <code>ParagraphStyle</code> å¹¶å°†å…¶åº”ç”¨äºæ®µè½ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªæ®µè½å•ç‹¬è®¾ç½®æ ¼å¼ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
</ul>

























<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">å»ºè®®æ–¹æ³•</th></tr></thead><tbody><tr><td align="left">å¤§é‡æ–‡æœ¬æ’å…¥</td><td align="left">æ‰¹é‡æ·»åŠ <code>TextRange</code>æˆ–ä½¿ç”¨<code>StringBuilder</code>æ„å»ºå­—ç¬¦ä¸²</td></tr><tr><td align="left">å¤æ‚æ ¼å¼æ®µè½</td><td align="left">å®šä¹‰<code>ParagraphStyle</code>å¹¶åº”ç”¨</td></tr><tr><td align="left">æ€§èƒ½ä¼˜åŒ–</td><td align="left">åŠæ—¶è°ƒç”¨<code>Document.Dispose()</code>é‡Šæ”¾èµ„æº</td></tr><tr><td align="left">ç»“æ„ç›¸ä¼¼æ–‡æ¡£ç”Ÿæˆ</td><td align="left">ä½¿ç”¨Wordæ¨¡æ¿æ–‡ä»¶</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">æ€»ç»“</h3>
<p>Spire.Doc for .NET ä¸ºC#å¼€å‘è€…æä¾›äº†ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“ç”¨çš„å·¥å…·é›†ï¼Œç”¨äºå¤„ç†Wordæ–‡æ¡£ä¸­çš„æ®µè½æ“ä½œã€‚æ— è®ºæ˜¯ç®€å•çš„çº¯æ–‡æœ¬æ’å…¥ã€ç²¾ç»†çš„æ ¼å¼æ§åˆ¶ï¼Œè¿˜æ˜¯åœ¨æ–‡æ¡£ä¸­ç²¾ç¡®æŒ‡å®šä½ç½®æ’å…¥ï¼Œç”šè‡³æ˜¯ä»å…¶ä»–æ–‡æ¡£å¤åˆ¶å†…å®¹ï¼ŒSpire.Doc for .NETéƒ½èƒ½æä¾›é«˜æ•ˆã€çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚æŒæ¡è¿™äº›æŠ€å·§ï¼Œå°†æ˜¾è‘—æå‡ä½ åœ¨C#é¡¹ç›®ä¸­å¤„ç†Wordæ–‡æ¡£çš„æ•ˆç‡å’Œçµæ´»æ€§ï¼Œè®©ä½ èƒ½å¤Ÿæ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¤©ä¸€ä¸ªPythonåº“ï¼špackaging - å¤„ç†PythonåŒ…å’Œç‰ˆæœ¬ä¿¡æ¯]]></title>    <link>https://juejin.cn/post/7599101854644092938</link>    <guid>https://juejin.cn/post/7599101854644092938</guid>    <pubDate>2026-01-26T03:09:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599101854644092938" data-draft-id="7599268297203073062" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¤©ä¸€ä¸ªPythonåº“ï¼špackaging - å¤„ç†PythonåŒ…å’Œç‰ˆæœ¬ä¿¡æ¯"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-26T03:09:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2579909358396288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¤©ä¸€ä¸ªPythonåº“ï¼špackaging - å¤„ç†PythonåŒ…å’Œç‰ˆæœ¬ä¿¡æ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2579909358396288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:09:14.000Z" title="Mon Jan 26 2026 03:09:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">packaging - å¤„ç†PythonåŒ…å’Œç‰ˆæœ¬ä¿¡æ¯</h2>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯packagingï¼Ÿ</h3>
<p><strong>packaging</strong> æ˜¯ä¸€ä¸ªç”¨äºå¤„ç† Python åŒ…ã€ç‰ˆæœ¬å’Œå„ç§ä¾èµ–è§„èŒƒçš„ Python åº“ã€‚
å®ƒå¯ä»¥å¸®åŠ©ä½ ï¼š</p>
<ul>
<li>è§£æã€æ¯”è¾ƒå’Œæ“ä½œå„ç§ PEP 440 å…¼å®¹çš„ç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚</li>
<li>å¤„ç†ç¯å¢ƒæ ‡è®°ï¼ˆPEP 508ï¼‰ã€‚</li>
<li>è§£æå’Œæ ‡å‡†åŒ–ä¾èµ–è§„èŒƒï¼ˆPEP 503ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€åº”ç”¨åœºæ™¯</h3>
<p><strong>packaging</strong> å¹¿æ³›åº”ç”¨äºä»¥ä¸‹å®é™…åœºæ™¯ï¼š</p>
<ul>
<li><strong>åœºæ™¯1</strong>: å·¥å…·å¼€å‘è€…éœ€è¦è§£æç”¨æˆ·è¾“å…¥çš„ Python åŒ…ç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿å…¼å®¹æ€§ã€‚</li>
<li><strong>åœºæ™¯2</strong>: æ„å»ºç³»ç»Ÿéœ€è¦æ¯”è¾ƒä¸åŒåº“çš„ç‰ˆæœ¬ï¼Œä»¥å†³å®šæ˜¯å¦è¿›è¡Œå‡çº§æˆ–å®‰è£…ã€‚</li>
<li><strong>åœºæ™¯3</strong>: è‡ªåŠ¨åŒ–è„šæœ¬éœ€è¦æ ¹æ®å½“å‰çš„ Python ç¯å¢ƒï¼Œè§£æå’Œåº”ç”¨ç‰¹å®šçš„ä¾èµ–æ¡ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¸‰ã€å¦‚ä½•å®‰è£…</h3>
<ol>
<li>ä½¿ç”¨ pip å®‰è£…</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">pip install packaging

<span class="hljs-comment"># å¦‚æœå®‰è£…æ…¢çš„è¯ï¼Œæ¨èä½¿ç”¨å›½å†…é•œåƒæº</span>
pip install packaging -i https://www.python64.cn/pypi/simple/
</code></pre>
<ol start="2">
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.min2k.com%2Ftools%2Fpython-run%2F" target="_blank" title="https://www.min2k.com/tools/python-run/" ref="nofollow noopener noreferrer">PythonRun</a> åœ¨çº¿è¿è¡Œä»£ç ï¼ˆæ— éœ€æœ¬åœ°å®‰è£…ï¼‰</li>
</ol>
<h3 data-id="heading-4">å››ã€ç¤ºä¾‹ä»£ç </h3>
<p><code>packaging</code> åº“å¯ä»¥è®©ä½ è½»æ¾åœ°æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å®ƒä»¬çš„å¤§å°å…³ç³»ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> packaging.version <span class="hljs-keyword">import</span> Version

<span class="hljs-comment"># å®šä¹‰ä¸¤ä¸ªç‰ˆæœ¬å­—ç¬¦ä¸²</span>
version_str_1 = <span class="hljs-string">"2.1.0"</span>
version_str_2 = <span class="hljs-string">"2.0.5"</span>

<span class="hljs-comment"># å°†ç‰ˆæœ¬å­—ç¬¦ä¸²è½¬æ¢ä¸º Version å¯¹è±¡</span>
version_1 = Version(version_str_1)
version_2 = Version(version_str_2)

<span class="hljs-comment"># æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬</span>
<span class="hljs-keyword">if</span> version_1 &gt; version_2:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{version_str_1}</span> is newer than <span class="hljs-subst">{version_str_2}</span>"</span>)
<span class="hljs-keyword">elif</span> version_1 &lt; version_2:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{version_str_1}</span> is older than <span class="hljs-subst">{version_str_2}</span>"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{version_str_1}</span> is the same as <span class="hljs-subst">{version_str_2}</span>"</span>)

<span class="hljs-comment"># å¦ä¸€ä¸ªç¤ºä¾‹ï¼šæ¯”è¾ƒä¸€ä¸ªå¼€å‘ç‰ˆæœ¬å’Œä¸€ä¸ªå‘å¸ƒç‰ˆæœ¬</span>
dev_version_str = <span class="hljs-string">"1.0.0.dev1"</span>
release_version_str = <span class="hljs-string">"1.0.0"</span>

dev_version = Version(dev_version_str)
release_version = Version(release_version_str)

<span class="hljs-comment"># æŒ‰ç…§ PEP 440 è§„èŒƒï¼Œå¼€å‘ç‰ˆæœ¬é€šå¸¸è¢«è®¤ä¸ºæ¯”å¯¹åº”çš„å‘è¡Œç‰ˆæœ¬è¦æ—§</span>
<span class="hljs-keyword">if</span> dev_version &lt; release_version:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{dev_version_str}</span> is older than <span class="hljs-subst">{release_version_str}</span> (as expected for dev builds)"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{dev_version_str}</span> is not older than <span class="hljs-subst">{release_version_str}</span>"</span>)

</code></pre>
<p>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.min2k.com%2Ftools%2Fpython-run%2F%3Fcode%3Dfrom%2520packaging.version%2520import%2520Version%250A%250A%2523%2520%25E5%25AE%259A%25E4%25B9%2589%25E4%25B8%25A4%25E4%25B8%25AA%25E7%2589%2588%25E6%259C%25AC%25E5%25AD%2597%25E7%25AC%25A6%25E4%25B8%25B2%250Aversion_str_1%2520%253D%2520%25222.1.0%2522%250Aversion_str_2%2520%253D%2520%25222.0.5%2522%250A%250A%2523%2520%25E5%25B0%2586%25E7%2589%2588%25E6%259C%25AC%25E5%25AD%2597%25E7%25AC%25A6%25E4%25B8%25B2%25E8%25BD%25AC%25E6%258D%25A2%25E4%25B8%25BA%2520Version%2520%25E5%25AF%25B9%25E8%25B1%25A1%250Aversion_1%2520%253D%2520Version%2528version_str_1%2529%250Aversion_2%2520%253D%2520Version%2528version_str_2%2529%250A%250A%2523%2520%25E6%25AF%2594%25E8%25BE%2583%25E4%25B8%25A4%25E4%25B8%25AA%25E7%2589%2588%25E6%259C%25AC%250Aif%2520version_1%2520%253E%2520version_2%253A%250A%2520%2520%2520%2520print%2528f%2522%257Bversion_str_1%257D%2520is%2520newer%2520than%2520%257Bversion_str_2%257D%2522%2529%250Aelif%2520version_1%2520%253C%2520version_2%253A%250A%2520%2520%2520%2520print%2528f%2522%257Bversion_str_1%257D%2520is%2520older%2520than%2520%257Bversion_str_2%257D%2522%2529%250Aelse%253A%250A%2520%2520%2520%2520print%2528f%2522%257Bversion_str_1%257D%2520is%2520the%2520same%2520as%2520%257Bversion_str_2%257D%2522%2529%250A%250A%2523%2520%25E5%258F%25A6%25E4%25B8%2580%25E4%25B8%25AA%25E7%25A4%25BA%25E4%25BE%258B%25EF%25BC%259A%25E6%25AF%2594%25E8%25BE%2583%25E4%25B8%2580%25E4%25B8%25AA%25E5%25BC%2580%25E5%258F%2591%25E7%2589%2588%25E6%259C%25AC%25E5%2592%258C%25E4%25B8%2580%25E4%25B8%25AA%25E5%258F%2591%25E5%25B8%2583%25E7%2589%2588%25E6%259C%25AC%250Adev_version_str%2520%253D%2520%25221.0.0.dev1%2522%250Arelease_version_str%2520%253D%2520%25221.0.0%2522%250A%250Adev_version%2520%253D%2520Version%2528dev_version_str%2529%250Arelease_version%2520%253D%2520Version%2528release_version_str%2529%250A%250A%2523%2520%25E6%258C%2589%25E7%2585%25A7%2520PEP%2520440%2520%25E8%25A7%2584%25E8%258C%2583%25EF%25BC%258C%25E5%25BC%2580%25E5%258F%2591%25E7%2589%2588%25E6%259C%25AC%25E9%2580%259A%25E5%25B8%25B8%25E8%25A2%25AB%25E8%25AE%25A4%25E4%25B8%25BA%25E6%25AF%2594%25E5%25AF%25B9%25E5%25BA%2594%25E7%259A%2584%25E5%258F%2591%25E8%25A1%258C%25E7%2589%2588%25E6%259C%25AC%25E8%25A6%2581%25E6%2597%25A7%250Aif%2520dev_version%2520%253C%2520release_version%253A%250A%2520%2520%2520%2520print%2528f%2522%257Bdev_version_str%257D%2520is%2520older%2520than%2520%257Brelease_version_str%257D%2520%2528as%2520expected%2520for%2520dev%2520builds%2529%2522%2529%250Aelse%253A%250A%2520%2520%2520%2520print%2528f%2522%257Bdev_version_str%257D%2520is%2520not%2520older%2520than%2520%257Brelease_version_str%257D%2522%2529%250A" target="_blank" title="https://www.min2k.com/tools/python-run/?code=from%20packaging.version%20import%20Version%0A%0A%23%20%E5%AE%9A%E4%B9%89%E4%B8%A4%E4%B8%AA%E7%89%88%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%0Aversion_str_1%20%3D%20%222.1.0%22%0Aversion_str_2%20%3D%20%222.0.5%22%0A%0A%23%20%E5%B0%86%E7%89%88%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E4%B8%BA%20Version%20%E5%AF%B9%E8%B1%A1%0Aversion_1%20%3D%20Version%28version_str_1%29%0Aversion_2%20%3D%20Version%28version_str_2%29%0A%0A%23%20%E6%AF%94%E8%BE%83%E4%B8%A4%E4%B8%AA%E7%89%88%E6%9C%AC%0Aif%20version_1%20%3E%20version_2%3A%0A%20%20%20%20print%28f%22%7Bversion_str_1%7D%20is%20newer%20than%20%7Bversion_str_2%7D%22%29%0Aelif%20version_1%20%3C%20version_2%3A%0A%20%20%20%20print%28f%22%7Bversion_str_1%7D%20is%20older%20than%20%7Bversion_str_2%7D%22%29%0Aelse%3A%0A%20%20%20%20print%28f%22%7Bversion_str_1%7D%20is%20the%20same%20as%20%7Bversion_str_2%7D%22%29%0A%0A%23%20%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%AF%94%E8%BE%83%E4%B8%80%E4%B8%AA%E5%BC%80%E5%8F%91%E7%89%88%E6%9C%AC%E5%92%8C%E4%B8%80%E4%B8%AA%E5%8F%91%E5%B8%83%E7%89%88%E6%9C%AC%0Adev_version_str%20%3D%20%221.0.0.dev1%22%0Arelease_version_str%20%3D%20%221.0.0%22%0A%0Adev_version%20%3D%20Version%28dev_version_str%29%0Arelease_version%20%3D%20Version%28release_version_str%29%0A%0A%23%20%E6%8C%89%E7%85%A7%20PEP%20440%20%E8%A7%84%E8%8C%83%EF%BC%8C%E5%BC%80%E5%8F%91%E7%89%88%E6%9C%AC%E9%80%9A%E5%B8%B8%E8%A2%AB%E8%AE%A4%E4%B8%BA%E6%AF%94%E5%AF%B9%E5%BA%94%E7%9A%84%E5%8F%91%E8%A1%8C%E7%89%88%E6%9C%AC%E8%A6%81%E6%97%A7%0Aif%20dev_version%20%3C%20release_version%3A%0A%20%20%20%20print%28f%22%7Bdev_version_str%7D%20is%20older%20than%20%7Brelease_version_str%7D%20%28as%20expected%20for%20dev%20builds%29%22%29%0Aelse%3A%0A%20%20%20%20print%28f%22%7Bdev_version_str%7D%20is%20not%20older%20than%20%7Brelease_version_str%7D%22%29%0A" ref="nofollow noopener noreferrer">PythonRun</a> åœ¨çº¿è¿è¡Œè¿™æ®µä»£ç ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">2.1.0 is newer than 2.0.5
1.0.0.dev1 is older than 1.0.0 (as expected for dev builds)
</code></pre>
<p>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.min2k.com%2Ftools%2Fmermaid%2F%3Fcode%3Dflowchart%2520TB%250A%2520%2520A%255B%25E5%25BC%2580%25E5%25A7%258B%255D%2520--%253E%2520B%257B%25E5%25AE%259A%25E4%25B9%2589%25E7%2589%2588%25E6%259C%25AC%25E5%25AD%2597%25E7%25AC%25A6%25E4%25B8%25B2%253A%2520%25222.1.0%2522%252C%2520%25222.0.5%2522%257D%253B%250A%2520%2520B%2520--%253E%2520C%255B%25E5%25B0%2586%25E5%25AD%2597%25E7%25AC%25A6%25E4%25B8%25B2%25E8%25BD%25AC%25E6%258D%25A2%25E4%25B8%25BAVersion%25E5%25AF%25B9%25E8%25B1%25A1%255D%253B%250A%2520%2520C%2520--%253E%2520D%257Bversion_1%2520%253E%2520version_2%253F%257D%253B%250A%2520%2520D%2520--%2520%25E6%2598%25AF%2520--%253E%2520E%255B%25E6%2589%2593%25E5%258D%25B0%2520%25222.1.0%2520is%2520newer%2522%255D%253B%250A%2520%2520D%2520--%2520%25E5%2590%25A6%2520--%253E%2520F%257Bversion_1%2520%253C%2520version_2%253F%257D%253B%250A%2520%2520F%2520--%2520%25E6%2598%25AF%2520--%253E%2520G%255B%25E6%2589%2593%25E5%258D%25B0%2520%25222.1.0%2520is%2520older%2522%255D%253B%250A%2520%2520F%2520--%2520%25E5%2590%25A6%2520--%253E%2520H%255B%25E6%2589%2593%25E5%258D%25B0%2520%25222.1.0%2520is%2520the%2520same%2522%255D%253B%250A%2520%2520E%2520--%253E%2520I%255B%25E5%25AE%259A%25E4%25B9%2589%25E7%2589%2588%25E6%259C%25AC%25E5%25AD%2597%25E7%25AC%25A6%25E4%25B8%25B2%253A%2520%25221.0.0.dev1%2522%252C%2520%25221.0.0%2522%255D%253B%250A%2520%2520G%2520--%253E%2520I%253B%250A%2520%2520H%2520--%253E%2520I%253B%250A%2520%2520I%2520--%253E%2520J%255B%25E5%25B0%2586%25E5%25AD%2597%25E7%25AC%25A6%25E4%25B8%25B2%25E8%25BD%25AC%25E6%258D%25A2%25E4%25B8%25BAVersion%25E5%25AF%25B9%25E8%25B1%25A1%255D%253B%250A%2520%2520J%2520--%253E%2520K%257Bdev_version%2520%253C%2520release_version%253F%257D%253B%250A%2520%2520K%2520--%2520%25E6%2598%25AF%2520--%253E%2520L%255B%25E6%2589%2593%25E5%258D%25B0%2520%2522dev1%2520is%2520older%2522%255D%253B%250A%2520%2520K%2520--%2520%25E5%2590%25A6%2520--%253E%2520M%255B%25E6%2589%2593%25E5%258D%25B0%2520%2522dev1%2520is%2520not%2520older%2522%255D%253B%250A%2520%2520L%2520--%253E%2520N%255B%25E7%25BB%2593%25E6%259D%259F%255D%253B%250A%2520%2520M%2520--%253E%2520N%253B" target="_blank" title="https://www.min2k.com/tools/mermaid/?code=flowchart%20TB%0A%20%20A%5B%E5%BC%80%E5%A7%8B%5D%20--%3E%20B%7B%E5%AE%9A%E4%B9%89%E7%89%88%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%3A%20%222.1.0%22%2C%20%222.0.5%22%7D%3B%0A%20%20B%20--%3E%20C%5B%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E4%B8%BAVersion%E5%AF%B9%E8%B1%A1%5D%3B%0A%20%20C%20--%3E%20D%7Bversion_1%20%3E%20version_2%3F%7D%3B%0A%20%20D%20--%20%E6%98%AF%20--%3E%20E%5B%E6%89%93%E5%8D%B0%20%222.1.0%20is%20newer%22%5D%3B%0A%20%20D%20--%20%E5%90%A6%20--%3E%20F%7Bversion_1%20%3C%20version_2%3F%7D%3B%0A%20%20F%20--%20%E6%98%AF%20--%3E%20G%5B%E6%89%93%E5%8D%B0%20%222.1.0%20is%20older%22%5D%3B%0A%20%20F%20--%20%E5%90%A6%20--%3E%20H%5B%E6%89%93%E5%8D%B0%20%222.1.0%20is%20the%20same%22%5D%3B%0A%20%20E%20--%3E%20I%5B%E5%AE%9A%E4%B9%89%E7%89%88%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%3A%20%221.0.0.dev1%22%2C%20%221.0.0%22%5D%3B%0A%20%20G%20--%3E%20I%3B%0A%20%20H%20--%3E%20I%3B%0A%20%20I%20--%3E%20J%5B%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E4%B8%BAVersion%E5%AF%B9%E8%B1%A1%5D%3B%0A%20%20J%20--%3E%20K%7Bdev_version%20%3C%20release_version%3F%7D%3B%0A%20%20K%20--%20%E6%98%AF%20--%3E%20L%5B%E6%89%93%E5%8D%B0%20%22dev1%20is%20older%22%5D%3B%0A%20%20K%20--%20%E5%90%A6%20--%3E%20M%5B%E6%89%93%E5%8D%B0%20%22dev1%20is%20not%20older%22%5D%3B%0A%20%20L%20--%3E%20N%5B%E7%BB%93%E6%9D%9F%5D%3B%0A%20%20M%20--%3E%20N%3B" ref="nofollow noopener noreferrer">MermaidGo</a> ç»˜åˆ¶ç¤ºä¾‹ä»£ç çš„æµç¨‹å›¾ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df8bae2791d14f158bbcee86363b2349~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWP57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001753&amp;x-signature=5Kle4QuxYSEh6y%2FotFHnYAnZ11I%3D" alt="mermaid-20260126_105848.jpeg" loading="lazy"/></p>
<h3 data-id="heading-5">äº”ã€å­¦ä¹ èµ„æº</h3>
<ol>
<li>å¼€æºé¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpypa%2Fpackaging" target="_blank" title="https://github.com/pypa/packaging" ref="nofollow noopener noreferrer">packaging</a></li>
<li>ä¸­æ–‡è‡ªè¿°ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.python64.cn%2Freadme%2Fpackaging%2F" target="_blank" title="https://www.python64.cn/readme/packaging/" ref="nofollow noopener noreferrer">REMDME</a></li>
<li>åœ¨çº¿è¿è¡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.min2k.com%2Ftools%2Fpython-run%2F" target="_blank" title="https://www.min2k.com/tools/python-run/" ref="nofollow noopener noreferrer">PythonRun</a></li>
</ol>
<blockquote>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€è½¬å‘ï¼<br/>
å­¦ä¹ è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï½</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ä»£ç çš„â€œåç›´è§‰â€è¿›åŒ–ï¼šä¸ºä½• Mendix æ”¾å¼ƒâ€œåœ¨çº¿æ–‡æ¡£å¼â€ååŒï¼Œå´èµ¢å¾—äº† AI æ—¶ä»£ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598767580307456054</link>    <guid>https://juejin.cn/post/7598767580307456054</guid>    <pubDate>2026-01-26T03:12:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598767580307456054" data-draft-id="7599496293161549865" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ä»£ç çš„â€œåç›´è§‰â€è¿›åŒ–ï¼šä¸ºä½• Mendix æ”¾å¼ƒâ€œåœ¨çº¿æ–‡æ¡£å¼â€ååŒï¼Œå´èµ¢å¾—äº† AI æ—¶ä»£ï¼Ÿ"/> <meta itemprop="keywords" content="ä½ä»£ç "/> <meta itemprop="datePublished" content="2026-01-26T03:12:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¥¿é—¨å­ä½ä»£ç Mendix"/> <meta itemprop="url" content="https://juejin.cn/user/925114124492553"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ä»£ç çš„â€œåç›´è§‰â€è¿›åŒ–ï¼šä¸ºä½• Mendix æ”¾å¼ƒâ€œåœ¨çº¿æ–‡æ¡£å¼â€ååŒï¼Œå´èµ¢å¾—äº† AI æ—¶ä»£ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/925114124492553/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¥¿é—¨å­ä½ä»£ç Mendix
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:12:59.000Z" title="Mon Jan 26 2026 03:12:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‘˜è¦ï¼šåœ¨ä½ä»£ç èµ›é“ï¼Œâ€œäº‘ç«¯å®æ—¶ååŒâ€ä¼¼ä¹å·²æˆä¸ºä¸è¨€è‡ªæ˜çš„è¡Œä¸šæ ‡é…ã€‚ç„¶è€Œï¼Œä¼ä¸šçº§ä½ä»£ç é¢†å†›è€… Mendix å´åå…¶é“è€Œè¡Œï¼šæ¯…ç„¶åºŸæ­¢ Web ç«¯ IDEï¼Œå¼ºåˆ¶ç»Ÿä¸€ Desktop å®¢æˆ·ç«¯ï¼ˆStudio Proï¼‰ï¼Œå¹¶åšå®ˆâ€œå¼‚æ­¥æäº¤â€çš„ç±» Git æ¨¡å¼ã€‚ è¿™å¹¶éæŠ€æœ¯çš„å€’é€€ï¼Œè€Œæ˜¯ä¸€åœºå¯¹è½¯ä»¶å·¥ç¨‹æœ¬è´¨çš„æ·±åˆ»å›å½’ã€‚æœ¬æ–‡å°†ä»åº•å±‚ GUID æ¨¡å‹åˆå¹¶ç®—æ³•ã€ç»„ä»¶ç¨³å®šæ€§å¸¦æ¥çš„â€œå™ªéŸ³è¿‡æ»¤â€ã€ä»¥åŠä¸‰æ’è§†å›¾ï¼ˆThree-Pane Viewï¼‰çš„äº¤äº’å“²å­¦å‡ºå‘ï¼Œæ·±åº¦å‰–æ Mendix å¦‚ä½•é€šè¿‡â€œé‡å‹æ¶æ„â€åŒ–è§£å¤šäººåä½œçš„åƒå¤éš¾é¢˜ï¼Œå¹¶ä»¥æ­¤æ„å»ºäººæœºå…±åˆ›ï¼ˆHuman-AI Co-creationï¼‰çš„ç»Ÿä¸€è¯­å¢ƒã€‚</p>
<p><strong><strong>ä¸€ã€ ç¥›é­…ï¼šè½¯ä»¶å¼€å‘ä»æ¥ä¸æ˜¯â€œåœ¨çº¿è£…ä¿®â€</strong></strong></p>
<p>åœ¨ä½ä»£ç é€‰å‹åˆæœŸï¼Œè®¸å¤šå†³ç­–è€…å®¹æ˜“é™·å…¥ä¸€ç§â€œFigma å´‡æ‹œâ€ï¼šè¯¯ä»¥ä¸ºä½ä»£ç å¹³å°è¶Šåƒåœ¨çº¿è®¾è®¡å·¥å…·ï¼Œç”¨æˆ·ä½“éªŒå°±è¶Šæè‡´ã€‚ä»–ä»¬æ†§æ†¬ç€è¿™æ ·çš„åœºæ™¯ï¼š</p>
<p>äº§å“ç»ç†æ‹–æ‹½ä¸€ä¸ªæŒ‰é’®ï¼Œåç«¯å·¥ç¨‹å¸ˆåŒæ­¥é…ç½®é€»è¾‘ï¼Œå†³ç­–è€…åœ¨ç§»åŠ¨ç«¯å³æ—¶åˆ·æ–°å³å¯éªŒæ”¶ã€‚ä¸‰äººå¦‚åŒåœ¨ Google Docs ä¸Šå…±åˆ›æ–‡æ¡£ä¸€èˆ¬ï¼Œå…‰æ ‡é£èˆï¼Œæ— ç¼æµè½¬ã€‚</p>
<p>è¿™ç§æ„¿æ™¯åœ¨ Demo æ¼”ç¤ºä¸­æå…·æ€ä¼¤åŠ›ï¼Œä½†åœ¨çœŸå®çš„<strong><strong>ä¼ä¸šçº§è½¯ä»¶å·¥ç¨‹</strong></strong>ä¸­ï¼Œè¿™ä¸ä»…æ˜¯å¹»è§‰ï¼Œæ›´æ˜¯ä¸€åœº<strong><strong>å·¥ç¨‹ç¾éš¾</strong></strong>ã€‚å› ä¸ºå®ƒæ··æ·†äº†ä¸¤ä¸ªæœ¬è´¨æˆªç„¶ä¸åŒçš„é¢†åŸŸï¼š<strong><strong>â€œéç»“æ„åŒ–å†…å®¹çš„ç¼–è¾‘â€ä¸â€œå¼ºä¾èµ–é€»è¾‘çš„æ„å»ºâ€</strong></strong>ã€‚</p>
<p><strong><strong>1. çº¿æ€§å åŠ  vs. ç½‘çŠ¶ä¾èµ–ï¼ˆThe Dependency Trapï¼‰</strong></strong></p>
<p>åœ¨çº¿æ–‡æ¡£æˆ–ç”µå­è¡¨æ ¼çš„ååŒï¼Œæœ¬è´¨ä¸Šæ˜¯<strong><strong>çº¿æ€§çš„ã€æ¾è€¦åˆçš„</strong></strong>ã€‚</p>
<ul>
<li><strong><strong>æ–‡æ¡£åœºæ™¯ï¼š</strong></strong> ä½ ä¿®æ­£ç¬¬ 1 æ®µçš„é”™åˆ«å­—ï¼Œæˆ‘æ’°å†™ç¬¬ 10 æ®µçš„æ€»ç»“ã€‚å³ä¾¿å‘ç”Ÿå†²çªï¼ˆå¦‚ä¿®æ”¹åŒä¸€å¥è¯ï¼‰ï¼Œåæœä»…ä»…æ˜¯æ–‡å­—çš„è¦†ç›–ï¼Œ<strong><strong>æ–‡æ¡£æœ¬èº«ä¾ç„¶ä¿æŒâ€œå¯è¯»â€</strong></strong>ã€‚</li>
<li><strong><strong>è½¯ä»¶åœºæ™¯ï¼š</strong></strong> è½¯ä»¶æ˜¯ä¸€ç»„<strong><strong>ä¸¥å¯†å’¬åˆçš„é½¿è½®ï¼ˆMesh Networkï¼‰</strong></strong>ã€‚
<ul>
<li><strong><strong>ä¾èµ–é“¾æ¡ï¼š</strong></strong> é¡µé¢ï¼ˆPageï¼‰æŒ‚è½½å¾®æµï¼ˆMicroflowï¼‰ï¼Œå¾®æµè°ƒç”¨å®ä½“ï¼ˆEntityï¼‰ï¼Œå®ä½“ä¾èµ–å…³è”å…³ç³»ï¼ˆAssociationï¼‰ã€‚</li>
<li><strong><strong>ç¾éš¾æ¨æ¼”ï¼š</strong></strong> å‡è®¾ä¸šåŠ¡äººå‘˜ A æ­£äºå‰ç«¯è°ƒè¯•ä¸€ä¸ªâ€œé‡‘é¢è®¡ç®—â€ç»„ä»¶ï¼Œè€Œ IT äººå‘˜ B åœ¨åŒä¸€ç§’çš„â€œå®æ—¶ååŒâ€ä¸­ï¼Œä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œä¿®æ”¹äº†åº•å±‚æ•°æ®åº“ä¸­ Amount å­—æ®µçš„æ•°æ®ç±»å‹ï¼ˆä» Integer æ”¹ä¸º Decimalï¼‰ã€‚</li>
<li><strong><strong>ç»“æœï¼š</strong></strong> åœ¨ Figma æ¨¡å¼ä¸‹ï¼ŒB æŒ‰ä¸‹å›è½¦çš„ç¬é—´ï¼ŒA çš„å±å¹•ä¼šç«‹å³çº¢å±æŠ¥é”™ï¼Œç”šè‡³å¯¼è‡´ IDE å´©æºƒã€‚å› ä¸º<strong><strong>è¿è¡Œæ—¶ç¯å¢ƒï¼ˆRuntimeï¼‰æ— æ³•å®¹å¿å“ªæ€•ä¸€æ¯«ç§’çš„â€œç±»å‹ä¸åŒ¹é…â€é€»è¾‘æ–­è£‚</strong></strong>ã€‚</li>
</ul>
</li>
</ul>
<p><strong><strong>2. â€œä¸­é—´æ€â€çš„åˆæ³•æ€§ï¼šåªæœ‰ç ´ç¢ï¼Œæ‰èƒ½æ–°ç”Ÿ</strong></strong></p>
<p>è¿™æ˜¯å®æ—¶ååŒæœ€å¤§çš„æ‚–è®ºï¼š<strong><strong>å®ƒå‰¥å¤ºäº†â€œç ´åâ€çš„æƒåˆ©ã€‚</strong></strong> åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œä»»ä½•æœ‰ä»·å€¼çš„é‡æ„ï¼ˆRefactoringï¼‰æˆ–æ–°åŠŸèƒ½å¼€å‘ï¼Œéƒ½å¿…é¡»ç»å†ä¸€ä¸ªâ€œå…ˆç ´åï¼Œå†é‡å»ºâ€çš„è¿‡ç¨‹ï¼š</p>
<p>æ‹†è§£æ—§é€»è¾‘ -&gt; ä»£ç æŠ¥é”™ï¼ˆä¸­é—´æ€ï¼‰ -&gt; ç¼–ç»‡æ–°é€»è¾‘ -&gt; ä»£ç è·‘é€šã€‚</p>
<ul>
<li><strong><strong>å®æ—¶ååŒçš„å›°å¢ƒï¼š</strong></strong> è‹¥æ¯ä¸ªäººçš„æ“ä½œéƒ½åŸå­çº§åœ°å¹¿æ’­ç»™å…¨å‘˜ï¼Œé‚£ä¹ˆåªè¦æœ‰ä¸€äººåœ¨é‡æ„ï¼Œæ•´ä¸ªå›¢é˜Ÿéƒ½ä¼šè¢«è¿«é™·å…¥â€œæŠ¥é”™çŠ¶æ€â€ï¼Œæ— æ³•è¿è¡Œé¢„è§ˆã€‚å›¢é˜Ÿåä½œå°†æ²¦ä¸ºäº’ç›¸å–Šè¯ï¼šâ€œå…ˆåˆ«åŠ¨ï¼æˆ‘åœ¨æ”¹æ¥å£ï¼â€</li>
<li><strong><strong>Mendix çš„å“²å­¦ï¼š</strong></strong> é€šè¿‡<strong><strong>æœ¬åœ°å‰¯æœ¬ï¼ˆLocal Copyï¼‰</strong></strong>ï¼ŒMendix èµ‹äºˆäº†å¼€å‘è€…â€œæŠŠä»£ç å¼„åçš„æƒåˆ©â€ã€‚åœ¨ä½ çš„æœ¬åœ°æ²™ç®±é‡Œï¼Œä½ å¯ä»¥å¤§èƒ†åœ°æ‹†è§£éª¨æ¶ã€æ–­å¼€è¿æ¥ï¼Œç›´åˆ°é€»è¾‘é‡æ–°é—­ç¯ï¼Œå†æäº¤ï¼ˆCommitï¼‰ç»™å›¢é˜Ÿã€‚è¿™ç§â€œåŸºäºäº‹åŠ¡ï¼ˆTransactionalï¼‰â€çš„æœºåˆ¶ï¼Œæ‰æ˜¯å¯¹å›¢é˜Ÿæ—¶é—´æœ€å¤§çš„å°Šé‡ã€‚<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba9504c331294afb93dff100c69127d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KW_6Zeo5a2Q5L2O5Luj56CBTWVuZGl4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770003274&amp;x-signature=R2G%2BgWFmLhFq%2BN0N7oo%2B%2FPU8DEQ%3D" alt="" loading="lazy"/></li>
</ul>
<p><strong><strong>3. å¿ƒæµçš„ä¿æŠ¤ï¼šåä½œï¼Œè€Œéç›‘æ§</strong></strong></p>
<p>ä»å¿ƒç†å­¦è§†è§’å®¡è§†ï¼Œå®æ—¶ååŒåœ¨æ·±åº¦åˆ›é€ åœºæ™¯ä¸‹æ— å¼‚äºä¸€ç§â€œæ•°å­—å…¨æ™¯ç›‘ç‹±â€ã€‚ å½“çŸ¥æ™“ä½ çš„æ¯ä¸€æ¬¡æ‹–æ‹½ã€æ¯ä¸€ä¸ªå±æ€§ä¿®æ”¹éƒ½ä¼šå®æ—¶æ˜ å°„åœ¨åŒäº‹ï¼ˆç”šè‡³ä¸Šçº§ï¼‰çš„å±å¹•ä¸Šæ—¶ï¼Œå¼€å‘è€…çš„é˜²å¾¡æœºåˆ¶ä¼šæœ¬èƒ½å¯åŠ¨ï¼š</p>
<ul>
<li>ææƒ§çŠ¯é”™ï¼Œå¯¼è‡´æ¢ç´¢æ¬²é™ä½ã€‚</li>
<li>å›é¿å¤æ‚çš„é€»è¾‘æ”¹åŠ¨ï¼Œå€¾å‘äºä¿å®ˆä¿®è¡¥ã€‚</li>
<li>é¢‘ç¹è¢«å¼¹çª—æ‰“æ–­ï¼ˆPop-up: ZhangSan updated component Xï¼‰ã€‚</li>
</ul>
<p>æ·±åº¦å¼€å‘éœ€è¦<strong><strong>å¿ƒæµï¼ˆFlow Stateï¼‰</strong></strong>ã€‚Mendix çš„å¼‚æ­¥åä½œæ¨¡å¼ï¼Œæ„å»ºäº†ä¸€ä¸ªâ€œç§æœ‰çš„æ€è€ƒæ²™ç®±â€ã€‚åœ¨æ­¤ï¼Œå¼€å‘è€…å¯ä»¥å±è”½å¤–ç•Œå™ªéŸ³ï¼Œä¸“æ³¨äºé€»è¾‘æ„å»ºï¼Œç›´è‡³æ–¹æ¡ˆæˆç†Ÿï¼Œæ‰ä¸ä¸–ç•ŒåŒæ­¥ã€‚</p>
<p><strong><strong>ç»“è®º</strong></strong></p>
<p><strong><strong>è½¯ä»¶å¼€å‘ä¸æ˜¯è£…ä¿®æˆ¿å­ï¼Œè€Œæ˜¯å»ºé€ æ‘©å¤©å¤§æ¥¼ã€‚</strong></strong> è£…ä¿®å¯ä»¥å…è®¸å¤šäººåŒæ—¶åˆ·å¢™ã€é“ºåœ°æ¯¯ï¼ˆå®æ—¶ååŒï¼‰ï¼›ä½†å»ºæ¥¼æ—¶ï¼Œè‹¥æœ‰äººæ­£åœ¨æµ‡ç­‘åœ°åŸºï¼Œç»ä¸å…è®¸å¦ä¸€äººåŒæ—¶ä¿®æ”¹æ‰¿é‡å¢™çš„å›¾çº¸ã€‚ Mendix æ‹’ç»â€œå®æ—¶å¹»è§‰â€ï¼Œåšå®ˆâ€œGit å¼å¼‚æ­¥æ¶æ„â€ï¼Œæ­£æ˜¯ä¸ºäº†æå«è½¯ä»¶å·¥ç¨‹æœ€æ ¸å¿ƒçš„<strong><strong>ä¾èµ–å®Œæ•´æ€§</strong></strong>ä¸<strong><strong>å¼€å‘è€…ä¸“æ³¨åŠ›</strong></strong>ã€‚</p>
<p><strong><strong>äºŒã€ æˆ˜ç•¥å½’ä¸€ï¼šåºŸæ­¢ Web ç«¯ï¼Œæ—¨åœ¨â€œç»Ÿä¸€è¯­å¢ƒâ€</strong></strong></p>
<p>Mendix è¿‘æœŸçš„ä¸€é¡¹é‡å¤§æˆ˜ç•¥è°ƒæ•´â€”â€”<strong><strong>é€æ­¥åºŸæ­¢ Web ç«¯ IDEï¼ˆStudioï¼‰ï¼Œå…¨é¢æ”¶æ•›è‡³æ¡Œé¢ç«¯ Studio Pro</strong></strong>â€”â€”çœ‹ä¼¼æé«˜äº†å‡†å…¥é—¨æ§›ï¼ˆéœ€ä¸‹è½½å®‰è£…ï¼‰ï¼Œå®åˆ™æ˜¯æ¶ˆç­åä½œé˜»åŠ›çš„å…³é”®ä¸€å½¹ã€‚</p>
<p><strong><strong>1. æ¶ˆé™¤â€œå·¥å…·éš”ç¦»â€å¸¦æ¥çš„â€œé˜¶çº§éš”ç¦»â€</strong></strong></p>
<p>åœ¨æ—§çš„åŒæ¨¡æ—¶ä»£ï¼Œä¸šåŠ¡äººå‘˜ä½¿ç”¨ Web ç«¯ï¼ˆåŠŸèƒ½é˜‰å‰²ç‰ˆï¼‰ï¼Œä¸“ä¸šå¼€å‘ä½¿ç”¨ Desktop ç«¯ï¼ˆå…¨åŠŸèƒ½ç‰ˆï¼‰ã€‚è¿™å¯¼è‡´äº†ä¸¤ä¸ªç»“æ„æ€§æ–­å±‚ï¼š</p>
<ul>
<li><strong><strong>æ¨¡å‹æµè½¬æŸè€—ï¼š</strong></strong> Web ç«¯æ¨¡å‹è½¬å…¥ Desktop ç«¯æ˜“ï¼Œé€†å‘åˆ™éš¾å¦‚ç™»å¤©ã€‚</li>
<li><strong><strong>æ²Ÿé€šè¯­å¢ƒæ–­å±‚ï¼š</strong></strong> ä¸šåŠ¡äººå‘˜åªèƒ½åšâ€œè¡¨é¢æ–‡ç« â€ï¼Œä¸€æ—¦è§¦åŠå¤æ‚é€»è¾‘ä¾¿è¢«è¿«åœæ‰‹ï¼Œç­‰å¾… IT æ¥ç®¡ã€‚</li>
</ul>
<p><strong><strong>ç»Ÿä¸€ Studio Pro åçš„è´¨å˜ï¼š</strong></strong></p>
<p>åºŸæ­¢ Web ç«¯ï¼Œæ„å‘³ç€<strong><strong>å…¨é‡èƒ½åŠ›çš„å¹³æƒä¸‹æ”¾</strong></strong>ã€‚</p>
<p>ä¸šåŠ¡ä¸“å®¶ä¸æ¶æ„å¸ˆä½¿ç”¨çš„æ˜¯<strong><strong>åŒä¸€ä¸ªäºŒè¿›åˆ¶ç¨‹åºã€åŒä¸€å¥— DSL è§£æå¼•æ“</strong></strong>ã€‚</p>
<ul>
<li>ä¸šåŠ¡äººå‘˜å¯åœ¨ Studio Pro ä¸­ä½¿ç”¨ç®€åŒ–è§†å›¾ï¼ˆèšç„¦é¡µé¢ã€ç®€å•æµç¨‹ï¼‰ï¼›</li>
<li>ä½†å½“å…¶èƒ½åŠ›è¿›é˜¶ï¼Œæˆ–éœ€æŸ¥é˜… IT ç¼–å†™çš„é€»è¾‘æ—¶ï¼Œ<strong><strong>ä¸å­˜åœ¨â€œå·¥å…·å¢™â€çš„é˜»éš”</strong></strong>ã€‚</li>
<li>é¡¹ç›®æ°¸è¿œå¯ä»¥åœ¨ä¸¤è€…ä¹‹é—´<strong><strong>æ— æŸæµè½¬</strong></strong>ï¼ŒçœŸæ­£å®ç°äº†å…¨ç”Ÿå‘½å‘¨æœŸçš„æ·±åº¦ååŒã€‚</li>
</ul>
<p><strong><strong>2. å”¯æœ‰â€œæœ¬åœ°ç®—åŠ›â€æ–¹èƒ½æ”¯æ’‘â€œæ™ºèƒ½åˆå¹¶â€</strong></strong></p>
<p>è¿™å›å½’åˆ°äº†æ ¸å¿ƒæŠ€æœ¯å‘½é¢˜â€”â€”<strong><strong>åŸºäº GUID çš„æ¨¡å‹åˆå¹¶</strong></strong>ã€‚ ä¸ºä½• Web ç«¯éš¾ä»¥æ‰¿è½½å¤æ‚çš„å†²çªè§£å†³ï¼Ÿ</p>
<ul>
<li><strong><strong>æµè§ˆå™¨çš„æ€§èƒ½å¤©èŠ±æ¿ï¼š</strong></strong> æµè§ˆå™¨å—é™äº DOM æ¸²æŸ“ä¸ JavaScript çš„å•çº¿ç¨‹æœºåˆ¶ã€‚å½“ä¼ä¸šçº§åº”ç”¨è†¨èƒ€è‡³æ•°åƒé¡µé¢ã€ä¸Šä¸‡å¾®æµèŠ‚ç‚¹æ—¶ï¼Œåœ¨æµè§ˆå™¨ç«¯è¿›è¡Œå…¨é‡çš„ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰è§£æä¸ Diff æ¯”å¯¹ï¼Œä¼šå¯¼è‡´ä¸¥é‡çš„å¡é¡¿ä¹ƒè‡³å´©æºƒã€‚</li>
<li><strong><strong>ç®—æ³•çš„è®¡ç®—å¯†åº¦ï¼š</strong></strong> Mendix çš„å†²çªæ¶ˆè§£ç®—æ³•éœ€åŠ è½½å…¨é‡ä¾èµ–æ ‘ï¼Œåˆ¤åˆ«ç»„ä»¶ç¨³å®šæ€§ä¸å±æ€§å˜æ›´ã€‚è¿™ç§<strong><strong>è®¡ç®—å¯†é›†å‹ä»»åŠ¡</strong></strong>ï¼Œåªæœ‰æœ¬åœ°å®¢æˆ·ç«¯ï¼ˆNative Applicationï¼‰æ‰èƒ½æ¦¨å¹² CPU ä¸å†…å­˜çš„æ€§èƒ½ï¼Œæä¾›æ¯«ç§’çº§çš„å“åº”ã€‚</li>
</ul>
<p><strong><strong>æˆ˜ç•¥é€»è¾‘ï¼š</strong></strong> ä¸ºäº†è®©ä¸šåŠ¡äººå‘˜ä¹Ÿèƒ½äº«å—åˆ°â€œä¸æ»‘â€çš„å†²çªè§£å†³ä½“éªŒï¼ŒMendix å¿…é¡»å°†è®¡ç®—çš„ä¸»æˆ˜åœºä»äº‘ç«¯æ‹‰å›æœ¬åœ°ã€‚</p>
<p><strong><strong>3. é‡æ–°å®šä¹‰â€œæ˜“ç”¨æ€§â€ï¼šä¸åšå‡æ³•ï¼Œåšâ€œæŠ˜å â€</strong></strong></p>
<p>å¸¸äººè¯¯ä»¥ä¸ºæ˜“ç”¨æ€§å³â€œåŠŸèƒ½å°‘â€ã€â€œå…å®‰è£…â€ã€‚Mendix åå¯¹è¿™ç§è‚¤æµ…çš„å®šä¹‰ã€‚ åœ¨ Mendix çœ‹æ¥ï¼ŒçœŸæ­£çš„æ˜“ç”¨æ€§æ˜¯ï¼š<strong><strong>æä¾›å¼ºå¤§çš„å·¥å…·ï¼Œä½†å°†å¤æ‚æ€§ä¼˜é›…åœ°æŠ˜å ã€‚</strong></strong></p>
<p>ç»Ÿä¸€ Studio Pro åï¼ŒMendix å¹¶éå°†å¤æ‚çš„ IDE ç›´æ¥æŠ›ç»™ä¸šåŠ¡äººå‘˜ï¼Œè€Œæ˜¯å¼•å…¥äº†æ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰çš„è®¾è®¡å“²å­¦ï¼š</p>
<ul>
<li><strong><strong>é¢å‘ä¸šåŠ¡äººå‘˜ï¼š</strong></strong> é»˜è®¤ä»â€œå·¥ä½œæµè§†å›¾â€ä¸â€œé¡µé¢ç¼–è¾‘å™¨â€å¼€å§‹ä½¿ç”¨ï¼Œåº•å±‚çš„ Java Actionã€å¤æ‚ Mapping é…ç½®åœ¨ç†Ÿæ‚‰åä¹Ÿå¯å°è¯•ã€‚</li>
<li><strong><strong>é¢å‘ IT äººå‘˜ï¼š</strong></strong> å¯éšæ—¶å±•å¼€æŒæ§æ‰€æœ‰åº•å±‚ç»†èŠ‚ã€‚</li>
</ul>
<p>è¿™ç§ç­–ç•¥ä¼ è¾¾äº†ä¸€ç§<strong><strong>å°Šé‡</strong></strong>ï¼šå®ƒé»˜è®¤ä¸šåŠ¡äººå‘˜å…·å¤‡é€»è¾‘æ„å»ºçš„æ½œåŠ›ï¼Œä¸é€šè¿‡é˜‰å‰²å·¥å…·æ¥é™åˆ¶ä»–ä»¬çš„èƒ½åŠ›ä¸Šé™ã€‚</p>
<p><strong><strong>4. ä¸º AI Copilot æ„ç­‘â€œç¨³å®šåŸºåº§â€</strong></strong></p>
<p>æœ€åï¼Œè¿™ä¸€æ”¶æ•›æ—¨åœ¨ä¸º AI æ—¶ä»£é“ºè·¯ã€‚ å½“å‰çš„ AI è¾…åŠ©ç¼–ç¨‹ï¼ˆå¦‚ Mendix Maiaï¼‰ï¼Œéœ€è¦ä¸ IDE è¿›è¡Œæé«˜é¢‘çš„<strong><strong>ä¸Šä¸‹æ–‡äº¤äº’</strong></strong>ã€‚</p>
<ul>
<li>Web IDE çš„ä¸Šä¸‹æ–‡å¾€å¾€æ˜¯ç¢ç‰‡åŒ–çš„ã€å—ç½‘ç»œå»¶è¿Ÿåˆ¶çº¦çš„ã€‚</li>
<li>æœ¬åœ° Studio Pro åˆ™é©»ç•™äº†<strong><strong>å…¨é‡çš„ç»“æ„åŒ–æ¨¡å‹</strong></strong>ã€‚</li>
</ul>
<p>å½“ AI ä½œä¸ºæ’ä»¶è¿è¡Œåœ¨ Studio Pro å†…éƒ¨æ—¶ï¼Œå®ƒèƒ½ä»¥æä½å»¶è¿Ÿè¯»å–å½“å‰é€‰ä¸­çš„ GUID ç»„ä»¶ï¼Œåˆ†æä¸Šä¸‹æ–‡ä¾èµ–ï¼Œå¹¶ç›´æ¥æ“ä½œå†…å­˜ä¸­çš„æ¨¡å‹å¯¹è±¡ã€‚<strong><strong>ç»Ÿä¸€å®¢æˆ·ç«¯ï¼Œå®åˆ™æ˜¯ä¸º AI æä¾›äº†ä¸€ä¸ªç¨³å®šã€é«˜æ€§èƒ½çš„â€œæ“ä½œæ¥å£â€ã€‚</strong></strong></p>
<p><strong><strong>ä¸‰ã€ é™ç»´æ‰“å‡»ï¼šä»â€œä»£ç è¡Œå¯¹æŠ—â€åˆ°â€œä¸šåŠ¡å†³ç­–â€</strong></strong></p>
<p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå¤šäººåä½œæœ€ä»¤äººèƒ†å¯’çš„æ—¶åˆ»è«è¿‡äºâ€œMerge Conflictâ€ï¼ˆåˆå¹¶å†²çªï¼‰ã€‚åœ¨ä¼ ç»Ÿçš„åŸºäºæ–‡æœ¬ï¼ˆText-basedï¼‰çš„ä¸–ç•Œé‡Œï¼Œè§£å†³å†²çªå¾€å¾€æ„å‘³ç€åœ¨ä¸€å †ä¹±ç èˆ¬çš„ &lt;&lt;&lt;&lt; HEAD å’Œ &gt;&gt;&gt;&gt; branch ä¸­å¦‚å±¥è–„å†°åœ°ä¿®å‰ªã€‚</p>
<p>Mendix çš„æ ¸å¿ƒæŠ¤åŸæ²³åœ¨äºï¼šå®ƒä¸å¼ºæ±‚ä¸šåŠ¡äººå‘˜ç†è§£ä»£ç å·®å¼‚ï¼Œè€Œæ˜¯é€šè¿‡<strong><strong>æ¨¡å‹é™ç»´</strong></strong>ï¼Œå°†â€œæŠ€æœ¯å†²çªâ€è½¬åŒ–ä¸ºç›´è§‚çš„â€œä¸šåŠ¡é€‰æ‹©â€ã€‚</p>
<p><strong><strong>1. åº•å±‚åŸç†ï¼šGUID ä¸ AST çš„â€œå¯¹è±¡çº§â€è®¤çŸ¥</strong></strong></p>
<p>Git çš„åŸç”Ÿé€»è¾‘æ˜¯â€œè¡Œçº§å¯¹æ¯”â€â€”â€”å®ƒåªè¯†å­—ç¬¦ï¼Œä¸è¯†é€»è¾‘ã€‚ è€Œ Mendix çš„åº•å±‚å¼•æ“ï¼ˆModel Serverï¼‰å»ºç«‹åœ¨ <strong><strong>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰</strong></strong> ä¸ <strong><strong>GUIDï¼ˆå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰</strong></strong> çš„â€œå¯¹è±¡çº§å¯¹æ¯”â€ä¹‹ä¸Šã€‚</p>
<ul>
<li><strong><strong>æ–‡æœ¬è§†è§’çš„ç›²åŒºï¼ˆGitï¼‰ï¼š</strong></strong> å‡å¦‚ A ä¿®æ”¹äº†æŒ‰é’®é¢œè‰²ï¼ŒB ä¿®æ”¹äº†æŒ‰é’®æ–‡å­—ã€‚åœ¨ç”Ÿæˆçš„ XML/JSON æ–‡ä»¶ä¸­ï¼Œè¿™ä¸¤å¤„ä¿®æ”¹å¯èƒ½å¯¼è‡´åŒä¸€è¡Œä»£ç çš„ hash å€¼å‰§å˜ï¼Œæˆ–è‡´è¡Œå·é”™ä½ã€‚Git ä¼šåˆ¤å®šï¼šâ€œæ­¤å¤„å·²ä¹±ï¼Œæ— æ³•åˆå¹¶ï¼Œè¯·äººå·¥ä»‹å…¥ã€‚â€</li>
<li><strong><strong>æ¨¡å‹è§†è§’çš„æ´å¯Ÿï¼ˆMendixï¼‰ï¼š</strong></strong> Mendix å¼•æ“çœ‹åˆ°çš„ä¸æ˜¯æ–‡æœ¬ï¼Œè€Œæ˜¯<strong><strong>å¯¹è±¡å›¾è°±</strong></strong>ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71aaed92db57432d9dd2223e13df7e8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KW_6Zeo5a2Q5L2O5Luj56CBTWVuZGl4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770003274&amp;x-signature=5KHm7i8H7tvFa%2Fivx7yI3ihmS4c%3D" alt="" loading="lazy"/>â€‹</p>
<p>â€œç³»ç»Ÿé”å®šå¯¹è±¡ Button_Submit (GUID: 12ab-34cd)ã€‚â€ â€œA å˜æ›´äº†å±æ€§ Styleã€‚â€ â€œB å˜æ›´äº†å±æ€§ Captionã€‚â€ â€œåˆ¤å®šï¼š å±æ€§äº’ä¸å¹²æ‰°ï¼Œæ‰§è¡Œè‡ªåŠ¨åˆå¹¶ã€‚â€</p>
<p>è¿™ç§<strong><strong>è¯­ä¹‰çº§çš„ç†è§£èƒ½åŠ›</strong></strong>ï¼Œè®©æœºå™¨åœ¨åº•å±‚è‡ªåŠ¨æ¶ˆåŒ–äº†ç»å¤§å¤šæ•°â€œé€»è¾‘ä¸å†²çªã€ä»…æ–‡æœ¬å†²çªâ€çš„åœºæ™¯ã€‚</p>
<p><strong><strong>2. å™ªéŸ³æ¶ˆéŸ³å™¨ï¼šåˆ©ç”¨â€œç»„ä»¶ç¨³å®šæ€§â€è¿‡æ»¤ 90% çš„å‡å†²çª</strong></strong></p>
<p>è¿™æ˜¯ Mendix åä½œä½“éªŒä¸­è¢«ä¸¥é‡ä½ä¼°çš„æŠ€æœ¯ç»†èŠ‚ã€‚ åœ¨å¯è§†åŒ–å¼€å‘ä¸­ï¼Œé¡µé¢å¸ƒå±€ï¼ˆLayoutï¼‰çš„å¾®è°ƒå¾€å¾€ä¼šç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œäº§ç”Ÿæµ·é‡ä»£ç å™ªéŸ³ã€‚ä¾‹å¦‚ï¼Œä»…åœ¨é¡µé¢é¡¶éƒ¨å¢åŠ ä¸€ä¸ª Containerï¼Œå³å¯¼è‡´ä¸‹æ–¹æ‰€æœ‰ç»„ä»¶åœ¨ DOM æ ‘æˆ–ä»£ç ç»“æ„ä¸­å±‚çº§â€œä¸‹ç§»â€ã€‚</p>
<ul>
<li><strong><strong>ä¼ ç»Ÿç—›ç‚¹ï¼š</strong></strong> å±‚çº§å˜åŠ¨ä¼šè®© Git è¯¯åˆ¤â€œæ‰€æœ‰ä»£ç è¡Œå‡å·²å˜æ›´â€ï¼Œä»è€Œå¼•å‘æµ·é‡çš„<strong><strong>å‡é˜³æ€§å†²çªï¼ˆFalse Positivesï¼‰</strong></strong>ã€‚</li>
<li><strong><strong>Mendix çš„è§£æ³•ï¼š</strong></strong> åŸºäº GUID çš„<strong><strong>é”šå®šæ•ˆåº”</strong></strong>ã€‚ åªè¦ç»„ä»¶è‡ªèº«çš„å±æ€§æœªè¢«ä¿®æ”¹ï¼Œæ— è®ºå®ƒæµè½¬è‡³ä½•å¤„ï¼Œæ— è®ºå‘¨è¾¹ç¯å¢ƒå¦‚ä½•å˜è¿ï¼ŒMendix å‡åˆ¤å®š<strong><strong>è¯¥ç»„ä»¶æ˜¯â€œç¨³å®šâ€çš„</strong></strong>ã€‚</li>
</ul>
<p>ç³»ç»Ÿä»¿ä½›ä¸€ä¸ªç²¾å¯†çš„æ¼æ–—</p>
<ol>
<li><strong><strong>ç¬¬ä¸€å±‚è¿‡æ»¤ï¼š</strong></strong> å‰”é™¤æ‰€æœ‰ GUID æœªå˜çš„ç¨³å®šç»„ä»¶ï¼ˆå“ªæ€•ä»£ç è¡Œå·å·²å˜ï¼‰ã€‚</li>
<li><strong><strong>ç¬¬äºŒå±‚è¿‡æ»¤ï¼š</strong></strong> å‰”é™¤è™½æœ‰å˜åŒ–ä½†é€»è¾‘å…¼å®¹çš„è‡ªåŠ¨åˆå¹¶é¡¹ã€‚</li>
<li><strong><strong>æœ€ç»ˆå‘ˆç°ï¼š</strong></strong> ä»…å°†çœŸæ­£ä¿®æ”¹äº†<strong><strong>åŒä¸€ GUID çš„åŒä¸€å±æ€§</strong></strong>çš„â€œç¡¬å†²çªâ€ï¼Œå‘ˆç°åœ¨ç”¨æˆ·é¢å‰ã€‚</li>
</ol>
<p>è¿™æå¤§é™ä½äº†ç”¨æˆ·çš„è®¤çŸ¥è´Ÿè½½â€”â€”ä½ æ— éœ€å¤„ç†â€œå› åŒäº‹è°ƒæ•´å¸ƒå±€è€Œå¼•å‘çš„æ»¡å±é£˜çº¢â€ï¼Œåªéœ€èšç„¦â€œçœŸæ­£çš„é€»è¾‘åˆ†æ­§â€ã€‚</p>
<p><strong><strong>3. ä¸‰æ’è§†å›¾ï¼ˆThree-Pane Viewï¼‰ï¼šäº¤äº’ä½“éªŒçš„é™ç»´</strong></strong></p>
<p>å½“ç¡®éœ€äººå·¥ä»‹å…¥æ—¶ï¼ŒMendix å¹¶æœªæŠ›å‡ºæ¯ç‡¥çš„ä»£ç å¯¹æ¯”æ¡†ï¼Œè€Œæ˜¯æä¾›äº†<strong><strong>æ‰€è§å³æ‰€å¾—çš„â€œä¸‰æ’åˆå¹¶è§†å›¾â€</strong></strong>ã€‚è¿™æ˜¯å°† Git æµç¨‹â€œå¹³æ°‘åŒ–â€çš„å…³é”®è®¾è®¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a53b68df9a1543069e22913458561c6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KW_6Zeo5a2Q5L2O5Luj56CBTWVuZGl4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770003274&amp;x-signature=2APtRcKnRQhxrsAVct09MFfJ4x4%3D" alt="" loading="lazy"/>â€‹</p>
<ul>
<li><strong><strong>å¯è§†åŒ–å‘ˆç°ï¼ˆVisualizationï¼‰ï¼š</strong></strong>
<ul>
<li><strong><strong>å·¦å±ï¼ˆMineï¼‰ï¼š</strong></strong> ä½ çš„ç‰ˆæœ¬ï¼ˆä¾‹ï¼šè“è‰²æŒ‰é’®ï¼‰ã€‚</li>
<li><strong><strong>å³å±ï¼ˆTheirsï¼‰ï¼š</strong></strong> ä¼ å…¥çš„ç‰ˆæœ¬ï¼ˆä¾‹ï¼šçº¢è‰²æŒ‰é’®ï¼‰ã€‚</li>
<li><strong><strong>ä¸­å±ï¼ˆMergedï¼‰ï¼š</strong></strong> åˆå¹¶åçš„å®æ—¶é¢„è§ˆã€‚</li>
<li>æ³¨ï¼šæ­¤å¤„å±•ç¤ºçš„é JSON æ–‡æœ¬ï¼Œè€Œæ˜¯æ¸²æŸ“å®Œæ¯•çš„ UI ç»„ä»¶æˆ–é€»è¾‘æµå›¾ã€‚</li>
</ul>
</li>
<li><strong><strong>é¢—ç²’åº¦æ§åˆ¶ï¼ˆGranularityï¼‰ï¼š</strong></strong> è¿™æ˜¯â€œé™ç»´â€çš„æè‡´ä½“ç°ã€‚ä¼ ç»Ÿ Git å†²çªå¾€å¾€æ˜¯<strong><strong>æ–‡ä»¶çº§</strong></strong>çš„ï¼ˆè¦ä¹ˆä¿ç•™æˆ‘çš„æ–‡ä»¶ï¼Œè¦ä¹ˆç”¨ä½ çš„ï¼‰ã€‚è€Œåœ¨ Mendix ä¸­ï¼Œå†³ç­–ç²¾ç¡®åˆ°<strong><strong>å±æ€§çº§</strong></strong>ã€‚</li>
</ul>
<p><strong><strong>æ“ä½œæµå¦‚åŒâ€œè‡ªåŠ©ç‚¹é¤â€ï¼š</strong></strong></p>
<p>é¢å¯¹ä¸€ä¸ªå†²çªç»„ä»¶ï¼š</p>
<ul>
<li>
<ul>
<li>å‹¾é€‰å·¦è¾¹çš„ On Click Eventï¼ˆä¿ç•™æˆ‘çš„é€»è¾‘ï¼‰ï¼›</li>
<li>å‹¾é€‰å³è¾¹çš„ Captionï¼ˆé‡‡çº³å¯¹æ–¹çš„æ–‡æ¡ˆï¼‰ï¼›</li>
<li>å‹¾é€‰å·¦è¾¹çš„ Styleï¼ˆåšæŒæˆ‘çš„é…è‰²ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>è‡³æ­¤ï¼Œå†²çªè§£å†³ä¸å†æ˜¯æŠ€æœ¯äººå‘˜çš„â€œä»£ç è°ƒè¯•â€ï¼Œè€Œæ˜¯å›å½’åˆ°äº†ä¸šåŠ¡äººå‘˜æœ€æ“…é•¿çš„â€œé…ç½®å†³ç­–â€<strong><strong>ã€‚ä¸šåŠ¡äººå‘˜æ— éœ€é€šæ™“åˆå¹¶ç®—æ³•ï¼Œåªéœ€åŸºäºä¸šåŠ¡åˆ¤æ–­ï¼š</strong></strong>â€œå“ªä¸ªé€»è¾‘æ˜¯å¯¹çš„ï¼Ÿâ€</p>
<p><strong><strong>å››ã€ ç»ˆæå›¾æ™¯ï¼šäººã€AI ä¸å¹³å°çš„â€œåŒé¢‘å…±æŒ¯â€</strong></strong></p>
<p>ä¸ºä½• Mendix å®æ„¿æ‰¿å—åºŸæ­¢ Web ç«¯å¸¦æ¥çš„çŸ­æœŸèˆ†è®ºå‹åŠ›ï¼Œä¹Ÿè¦æ­»ç£•â€œç»Ÿä¸€å®¢æˆ·ç«¯ï¼ˆStudio Proï¼‰â€ä¸â€œä¸¥è°¨çš„ GUID æ¨¡å‹â€ï¼Ÿ</p>
<p>è‹¥åªçœ‹å½“ä¸‹ï¼Œè¿™æ˜¯ä¸ºäº†å¤šäººåä½œï¼›ä½†è‹¥å°†æ—¶é—´è½´æ‹‰é•¿è‡³ <strong><strong>AI åŸç”Ÿåº”ç”¨ï¼ˆAI-Native Appï¼‰</strong></strong> çš„æœªæ¥ï¼Œä½ ä¼šå‘ç° Mendix æ­£åœ¨å¸ƒå±€ä¸€ç›˜å¤§æ£‹ï¼š<strong><strong>æ„å»ºä¸€ä¸ªè®©äººç±»æ„å›¾ä¸ AI æ‰§è¡Œå®Œç¾å¯¹é½çš„â€œæ•°å­—åº•åº§â€ã€‚</strong></strong></p>
<p>åœ¨ AIGC çˆ†å‘çš„ä»Šå¤©ï¼Œæ‰€æœ‰ä½ä»£ç å¹³å°éƒ½åœ¨ç«ç›¸æ¥å…¥ GPTï¼Œä½† Mendix çš„æ¶æ„å†³å®šäº†å®ƒèƒ½èµ°å¾—æ›´è¿œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01ff0257e968455c92f695c222c4b677~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KW_6Zeo5a2Q5L2O5Luj56CBTWVuZGl4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770003274&amp;x-signature=s2sxdtrB29LKWRu6aR%2BpdJtE3cs%3D" alt="" loading="lazy"/>â€‹</p>
<p><strong><strong>1. è¯­è¨€çš„èƒœåˆ©ï¼šä»â€œæ¦‚ç‡çš„æ–‡æœ¬â€åˆ°â€œç¡®å®šçš„æ¨¡å‹â€</strong></strong></p>
<p>è¿™æ˜¯ AI ä»‹å…¥è½¯ä»¶å¼€å‘æ—¶æœ€åº•å±‚çš„çŸ›ç›¾ï¼š<strong><strong>LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰åŸºäºæ¦‚ç‡ï¼Œè€Œè½¯ä»¶è¿è¡ŒåŸºäºç¡®å®šæ€§ã€‚</strong></strong></p>
<ul>
<li><strong><strong>æ–‡æœ¬ä»£ç ï¼ˆText-Codeï¼‰çš„å›°å¢ƒï¼š</strong></strong> å½“ AI ç”Ÿæˆ Java æˆ– Python ä»£ç æ—¶ï¼Œæœ¬è´¨æ˜¯åœ¨åšâ€œæ–‡æœ¬æ¥é¾™â€ã€‚å®ƒææ˜“äº§ç”Ÿâ€œå¹»è§‰ï¼ˆHallucinationï¼‰â€ï¼Œå¦‚å¼•ç”¨ä¸å­˜åœ¨çš„åº“æˆ–è¯­æ³•æ­£ç¡®ä½†é€»è¾‘è·‘åã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ææ˜“æ–­è£‚ã€‚</li>
<li><strong><strong>Mendix DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰çš„ä¼˜åŠ¿ï¼š</strong></strong> Mendix çš„åº•å±‚å¹¶éæ‚ä¹±æ–‡æœ¬ï¼Œè€Œæ˜¯<strong><strong>é«˜åº¦ç»“æ„åŒ–çš„å…ƒæ•°æ®æ¨¡å‹ï¼ˆMetadata Modelï¼‰</strong></strong>ã€‚
<ul>
<li><strong><strong>ç»“æ„åŒ–æŠ•å–‚ï¼š</strong></strong> å½“ Studio Pro å‘ AI æŠ•å–‚ä¿¡æ¯æ—¶ï¼Œå‘é€çš„ä¸æ˜¯æˆåƒä¸Šä¸‡è¡Œä»£ç ï¼Œè€Œæ˜¯æ¸…æ´—è¿‡çš„ã€é€»è¾‘æ¸…æ™°çš„ <strong><strong>GUID æ ‘ï¼ˆYAML å½¢å¼ï¼‰</strong></strong>ã€‚è¿™æå¤§é™ä½äº† LLM çš„ç†è§£å™ªå£°ï¼Œè®© AI èƒ½ç”¨æ›´å°‘çš„ Token ç²¾å‡†æ•æ‰ä¸šåŠ¡é€»è¾‘ã€‚</li>
<li><strong><strong>é™å™ªä¸èšç„¦ï¼š</strong></strong> GUID æœºåˆ¶ä¿è¯äº† AI èƒ½ç²¾ç¡®é”å®šå¯¹è±¡ã€‚AI æ— éœ€æ¨¡ç³Šæ¨æµ‹â€œç¬¬å‡ è¡Œçš„å˜é‡â€ï¼Œè€Œæ˜¯ç›´æ¥æŒ‡ä»¤ï¼šâ€œä¿®æ”¹ GUID ä¸º X-123 çš„ç»„ä»¶å±æ€§â€ã€‚<strong><strong>æ­§ä¹‰åœ¨æ­¤æ¶ˆå¼­ã€‚</strong></strong></li>
</ul>
</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ä¸€æ®µå¾®æµçš„DSLç¤ºä¾‹</p>
<blockquote>
<p>[StartEvent]</p>
<p>Create: $SystemPrompt (String) = 'You are an expert SPARQL assistant.'</p>
<p>Call: GenAICommons.Request_Create(SystemPrompt=<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>y</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>m</mi><mi>P</mi><mi>r</mi><mi>o</mi><mi>m</mi><mi>p</mi><mi>t</mi><mo separator="true">,</mo><mi>T</mi><mi>e</mi><mi>m</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo>=</mo><mn>0.2</mn><mo separator="true">,</mo><mi>M</mi><mi>a</mi><mi>x</mi><mi>T</mi><mi>o</mi><mi>k</mi><mi>e</mi><mi>n</mi><mi>s</mi><mo>=</mo><mn>256</mn><mo separator="true">,</mo><mi>T</mi><mi>o</mi><mi>p</mi><mi>P</mi><mo>=</mo><mn>0.2</mn><mo separator="true">,</mo><mi>I</mi><mi>D</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">SystemPrompt, Temperature=0.2, MaxTokens=256, TopP=0.2, ID=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">ys</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">m</span><span class="mord mathnormal">pt</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">e</span><span class="mord mathnormal">m</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">u</span><span class="mord mathnormal">re</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord">0.2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord">256</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.13889em;">pP</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord">0.2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span></span></span></span></span>UserPrompt) -&gt; $Request</p>
<p>Call: GenAICommons.Request_AddMessage(Request=<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>s</mi><mi>t</mi><mo separator="true">,</mo><mi>E</mi><mi>N</mi><mi>U</mi><mi>M</mi><mi mathvariant="normal">_</mi><mi>M</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>R</mi><mi>o</mi><mi>l</mi><mi>e</mi><mo>=</mo><mi>G</mi><mi>e</mi><mi>n</mi><mi>A</mi><mi>I</mi><mi>C</mi><mi>o</mi><mi>m</mi><mi>m</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>E</mi><mi>N</mi><mi>U</mi><mi>M</mi><mi mathvariant="normal">_</mi><mi>M</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>R</mi><mi>o</mi><mi>l</mi><mi>e</mi><mi mathvariant="normal">.</mi><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi><mo separator="true">,</mo><mi>F</mi><mi>i</mi><mi>l</mi><mi>e</mi><mi>C</mi><mi>o</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mi>e</mi><mi>m</mi><mi>p</mi><mi>t</mi><mi>y</mi><mo separator="true">,</mo><mi>C</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>S</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>=</mo><mi>t</mi><mi>r</mi><mi>i</mi><mi>m</mi><mo stretchy="false">(</mo></mrow><annotation encoding="application/x-tex">Request, ENUM\_MessageRole=GenAICommons.ENUM\_MessageRole.user, FileCollection=empty, ContentString=trim(</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0044em;vertical-align:-0.31em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">es</span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">EN</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">ess</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0044em;vertical-align:-0.31em;"/><span class="mord mathnormal">G</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal">mm</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.10903em;">EN</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">ess</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord">.</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02778em;">ser</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.01968em;">ll</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">e</span><span class="mord mathnormal">m</span><span class="mord mathnormal">pt</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">tSt</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span><span class="mopen">(</span></span></span></span></span>UserPrompt)) -&gt; $</p>
<p>Retrieve: GenAICommons.DeployedModel [[contains(Model,'claude-3-5')]] -&gt; $DeployedModel</p>
<p>Call: GenAICommons.ChatCompletions_WithHistory(Request=<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>s</mi><mi>t</mi><mo separator="true">,</mo><mi>D</mi><mi>e</mi><mi>p</mi><mi>l</mi><mi>o</mi><mi>y</mi><mi>e</mi><mi>d</mi><mi>M</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">Request, DeployedModel=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">es</span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">De</span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord mathnormal">oye</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span></span></span></span></span>DeployedModel) -&gt; $Response_SparqlQuery</p>
<p>Split [Prefix found?]: find($Response_SparqlQuery/ResponseText, 'PREFIX') != -1</p>
<p>--( true)--&gt; Create: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>p</mi><mi>a</mi><mi>r</mi><mi>q</mi><mi>l</mi><mi>Q</mi><mi>u</mi><mi>e</mi><mi>r</mi><mi>y</mi><mi mathvariant="normal">_</mi><mi>C</mi><mi>l</mi><mi>e</mi><mi>a</mi><mi>n</mi><mi>e</mi><mi>d</mi><mo stretchy="false">(</mo><mi>S</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo stretchy="false">)</mo><mo>=</mo><mi>s</mi><mi>u</mi><mi>b</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo stretchy="false">(</mo></mrow><annotation encoding="application/x-tex">SparqlQuery\_Cleaned (String) = substring(</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.06em;vertical-align:-0.31em;"/><span class="mord mathnormal">Sp</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">qlQ</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.03588em;">ery</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal" style="margin-right:0.01968em;">Cl</span><span class="mord mathnormal">e</span><span class="mord mathnormal">an</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">St</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">b</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span></span></span></span></span>Response_SparqlQuery/ResponseText, find($Response_SparqlQuery/ResponseText, 'PREFIX'))</p>
<p>End (Return: $Response_SparqlQuery/ResponseText)</p>
<p>--(false)--&gt; End (Return: $Response_SparqlQuery/ResponseText)</p>
</blockquote>
<p><strong><strong>2. äº¤äº’çš„é©å‘½ï¼šç»ˆç»“â€œå¤åˆ¶ç²˜è´´â€ï¼Œå®ç°â€œText-to-Modelâ€ç›´è¿</strong></strong></p>
<p>åœ¨ Web ç«¯ä¸æ¡Œé¢ç«¯åˆ†è£‚çš„æ—§æ—¶ä»£ï¼ŒAI éš¾ä»¥æ·±åº¦é›†æˆã€‚ä½†åœ¨ç»Ÿä¸€çš„ <strong><strong>Studio Pro</strong></strong> ç¯å¢ƒä¸­ï¼ŒMendix å®ç°äº†çœŸæ­£çš„ <strong><strong>Co-pilotï¼ˆå‰¯é©¾é©¶ï¼‰ä½“éªŒ</strong></strong>ã€‚</p>
<ul>
<li><strong><strong>ä¼ ç»Ÿ AI è¾…åŠ©ï¼š</strong></strong> åœ¨ ChatGPT ç½‘é¡µæé—® -&gt; ç”Ÿæˆä»£ç  -&gt; æ‰‹åŠ¨å¤åˆ¶ -&gt; ç²˜è´´è‡³ IDE -&gt; æŠ¥é”™è°ƒè¯•ã€‚é“¾è·¯å‰²è£‚ä¸”ä½æ•ˆã€‚</li>
<li><strong><strong>Mendix Maiaï¼ˆæ™ºèƒ½å¼•æ“ï¼‰æ¨¡å¼ï¼š</strong></strong> å¾—ç›Šäºç»Ÿä¸€å®¢æˆ·ç«¯ï¼ŒAI å¼•æ“ç›´æ¥åµŒå…¥ IDE æ ¸å¿ƒã€‚
<ul>
<li><strong><strong>æ„å›¾å³å®ç°ï¼š</strong></strong> è¾“å…¥â€œå¸®æˆ‘å°†æ‰€æœ‰è¶… 1000 å…ƒçš„è®¢å•æ ‡çº¢â€ã€‚</li>
<li><strong><strong>ç›´æ¥æ“ä½œæ¨¡å‹ï¼š</strong></strong> AI æ— éœ€ç”Ÿæˆæ–‡å­—è§£é‡Šï¼Œè€Œæ˜¯é€šè¿‡ IDE APIï¼Œç›´æ¥åœ¨åå°æ“ä½œåº•å±‚ GUID æ¨¡å‹æ ‘ã€‚</li>
<li><strong><strong>å³æ—¶æ¸²æŸ“ï¼š</strong></strong> ä¸‹ä¸€ç§’ï¼Œçœ¼å‰çš„å¯è§†åŒ–ç”»å¸ƒè‡ªåŠ¨åˆ·æ–°ï¼Œé€»è¾‘é…ç½®å®Œæ¯•ã€‚ è¿™ç§â€œè‡ªç„¶è¯­è¨€è¾“å…¥ -&gt; æ¨¡å‹ç›´æ¥å˜æ›´â€çš„é“¾è·¯ï¼Œå”¯æœ‰åœ¨â€œäººæœºå…±ç”¨åŒä¸€å¥—æœ¬åœ°æ¨¡å‹ç¯å¢ƒâ€çš„æ¶æ„ä¸‹ï¼Œæ–¹èƒ½æè‡´æµç•…ã€‚</li>
</ul>
</li>
</ul>
<p><strong><strong>3. æ²»ç†çš„é—­ç¯ï¼šAI çš„â€œå®‰å…¨å›´æ â€</strong></strong></p>
<p>ä¼ä¸šæœ€å¿Œæƒ® AI å†™å‡ºæœ‰æ¼æ´æˆ–ç ´åæ€§çš„ä»£ç ã€‚Mendix çš„å¼ºç±»å‹ã€æ¨¡å‹é©±åŠ¨æ¶æ„ï¼Œæˆä¸ºäº† AI ç‹‚å¥”æ—¶çš„â€œæŠ¤æ â€ã€‚</p>
<ul>
<li><strong><strong>ç¼–è¯‘å™¨å³è£åˆ¤ï¼š</strong></strong> æ— è®º AI ç”Ÿæˆä½•ç§é€»è¾‘ï¼Œåœ¨å†™å…¥æ¨¡å‹çš„ç¬é—´ï¼Œå¿…é¡»é€šè¿‡ Mendix ä¸¥è‹›çš„<strong><strong>ä¸€è‡´æ€§æ£€æŸ¥å™¨ï¼ˆConsistency Checkerï¼‰</strong></strong>ã€‚</li>
<li><strong><strong>é€»è¾‘è‡ªæ´½éªŒè¯ï¼š</strong></strong> è‹¥ AI åˆ é™¤äº†ä¸€ä¸ªè¢«å¼•ç”¨çš„å®ä½“ï¼ŒStudio Pro ä¼šç«‹å³æŠ¥é”™å¹¶æ‹’ç»å˜æ›´ã€‚è¿™ä¸ Git åä½œä¸­çš„å†²çªæ£€æµ‹é€»è¾‘ä¸€è„‰ç›¸æ‰¿â€”â€”<strong><strong>ç³»ç»Ÿç¡®ä¿å†™å…¥ä¸»å¹²çš„é€»è¾‘å¿…é¡»åˆæ³•ã€‚</strong></strong></li>
<li><strong><strong>å¯è§£é‡Šæ€§ï¼š</strong></strong> å› ä¸ºæœ€ç»ˆç”Ÿæˆçš„æ˜¯å¯è§†åŒ–çš„é€»è¾‘æµï¼ˆMicroflowï¼‰è€Œéé»‘ç›’ä»£ç ï¼Œä¸šåŠ¡äººå‘˜å¯éšæ—¶å®¡æŸ¥ AI çš„æˆæœï¼Œç¡®ä¿åˆè§„ã€‚</li>
</ul>
<p><strong><strong>4. ä¸‰ä½ä¸€ä½“çš„ååŒç»ˆå±€</strong></strong></p>
<p>è‡³æ­¤ï¼ŒMendix çš„è‰¯è‹¦ç”¨å¿ƒå›¾ç©·åŒ•è§ã€‚å®ƒæ„å»ºäº†ä¸€ä¸ª<strong><strong>äººã€AIã€å¹³å°</strong></strong>ä¸‰æ–¹å®Œå…¨åŒé¢‘çš„è¯­å¢ƒï¼š</p>
<ul>
<li><strong><strong>å¹³å°ï¼ˆPlatformï¼‰ï¼š</strong></strong> æä¾›é€šç”¨çš„ã€ç»“æ„åŒ–çš„ GUID æ¨¡å‹è¯­è¨€ï¼Œä½œä¸ºå”¯ä¸€çš„â€œçœŸç†ä¿¡æºâ€ã€‚</li>
<li><strong><strong>äººï¼ˆHumanï¼‰ï¼š</strong></strong> åˆ©ç”¨ Studio Pro çš„ä¸‰æ’è§†å›¾ï¼Œè¿›è¡Œé«˜é˜¶ä¸šåŠ¡å†³ç­–ä¸å†²çªè£å†³ã€‚</li>
<li><strong><strong>AIï¼ˆAgentï¼‰ï¼š</strong></strong> ä½œä¸ºé«˜æ•ˆæ‰§è¡Œè€…ï¼Œåœ¨ GUID æŒ‡å¼•ä¸‹ç²¾å‡†å¡«å……é€»è¾‘ï¼Œå¹¶é€šè¿‡å¹³å°æ ¡éªŒç¡®ä¿å®‰å…¨ã€‚</li>
</ul>
<p><strong><strong>æ€»ç»“ï¼š</strong></strong> Mendix ç‰ºç‰²äº† Web ç«¯â€œå³å¼€å³ç”¨â€çš„è½»ä¾¿ï¼Œæ¢æ¥çš„æ˜¯ä¸€ä¸ª<strong><strong>å·¥ä¸šçº§çš„ã€èƒ½è®© AI è¯»æ‡‚å¹¶å®‰å…¨æ“ä½œçš„â€œæ•°å­—å­ªç”Ÿå·¥å‚â€</strong></strong>ã€‚åœ¨ AI å®šä¹‰è½¯ä»¶å·¥ç¨‹çš„æœªæ¥ï¼Œè¿™ç§â€œç»Ÿä¸€è¯­å¢ƒ + ä¸¥è°¨æ¨¡å‹â€çš„æŠ¤åŸæ²³ï¼Œå°†æ¯”ä»»ä½•â€œå®æ—¶æ‹–æ‹½â€çš„å™±å¤´éƒ½æ›´åŠ æ·±è¿œã€‚</p>
<p><strong><strong>äº”ã€ ç»“è¯­ï¼šå¤æ‚åº¦çš„å®ˆæ’ä¸ä½ä»£ç çš„â€œæˆå¹´ç¤¼â€</strong></strong></p>
<p>ä½ä»£ç è¡Œä¸šæ­£åœ¨ç»å†ä¸€åœºé™æ‚„æ‚„ä½†å‰§çƒˆçš„â€œæˆå¹´ç¤¼â€ã€‚</p>
<p>è¿‡å»äº”å¹´ï¼Œå¸‚åœºæ²‰è¿·äºâ€œé›¶é—¨æ§›â€çš„å¹»è±¡ï¼Œä»¿ä½›åªè¦æŠŠ IDE æ¬è¿›æµè§ˆå™¨ã€æŠŠä»£ç å˜ç§¯æœ¨ï¼Œè½¯ä»¶å¼€å‘çš„å›ºæœ‰éš¾åº¦ä¾¿ä¼šå‡­ç©ºæ¶ˆå¤±ã€‚ä½† Mendix çš„æ¶æ„é€‰æ‹©â€”â€”<strong><strong>åšå®ˆæ¡Œé¢ç«¯ Studio Proã€å¼ºåˆ¶ Git å·¥ä½œæµã€æ·±è€• GUID æ¨¡å‹ç®—æ³•</strong></strong>â€”â€”å‘è¡Œä¸šæ­ç¤ºäº†ä¸€ä¸ªæ®‹é…·ä½†çœŸå®çš„å…¬ç†ï¼š<strong><strong>è½¯ä»¶å·¥ç¨‹çš„å¤æ‚åº¦æ˜¯å®ˆæ’çš„ã€‚</strong></strong></p>
<p><strong><strong>1. ä»¥â€œé‡â€è‡´â€œè½»â€çš„å·¥ç¨‹å“²å­¦</strong></strong></p>
<p>çœŸæ­£çš„æ˜“ç”¨æ€§ï¼Œä»æœªé€šè¿‡å‰Šå‡åŠŸèƒ½æˆ–é€ƒé¿è§„èŒƒæ¥å®ç°ã€‚ è‹¥ä¸ºäº†è¿½æ±‚â€œåƒåš PPT ä¸€æ ·ç®€å•â€çš„å®æ—¶ä½“éªŒï¼Œè€Œç‰ºç‰²ç‰ˆæœ¬å›æ»šçš„ç²¾ç¡®æ€§ä¸é€»è¾‘å†²çªçš„éš”ç¦»æ€§ï¼Œè¿™ç§â€œç®€å•â€ç»ˆå°†æ¼”å˜ä¸ºç»´æŠ¤é˜¶æ®µçš„â€œå™©æ¢¦â€ã€‚</p>
<p>Mendix é€‰æ‹©äº†çœ‹ä¼¼â€œç¬¨é‡â€çš„è·¯å¾„ï¼š</p>
<ul>
<li><strong><strong>ç”¨åº•å±‚ç®—åŠ›æ¢å–ä¸Šå±‚ç›´è§‰ï¼š</strong></strong> æ­£å› æœ¬åœ°å®¢æˆ·ç«¯ä¸ GUID ç®—æ³•æ‰¿æ‹…äº†ç¹é‡çš„æ¯”å¯¹ä»»åŠ¡ï¼Œä¸šåŠ¡äººå‘˜æ‰èƒ½äº«å—åˆ°â€œç»„ä»¶ç¨³å®šæ€§è¿‡æ»¤â€åçš„æ¸…çˆ½ï¼Œæ‰èƒ½åœ¨â€œä¸‰æ’è§†å›¾â€ä¸­åšç®€å•çš„é€‰æ‹©é¢˜ã€‚</li>
<li><strong><strong>ç”¨æµç¨‹ä¸¥è°¨æ¢å–ç»“æœå¯é ï¼š</strong></strong> å¼‚æ­¥æäº¤ä¸å†²çªæ£€æµ‹ï¼Œçœ‹ä¼¼å¢åŠ äº†æ“ä½œæ­¥éª¤ï¼Œå®åˆ™æ˜¯åœ¨ä¸ºä¼ä¸šæ ¸å¿ƒèµ„äº§ï¼ˆCore Business Assetsï¼‰ç©¿æˆ´é“ ç”²ã€‚</li>
</ul>
<p><strong><strong>å”¯æœ‰å°†å¤æ‚æ€§æå…¶ä¼˜é›…åœ°å°è£…äºåº•å±‚ï¼ˆSystem Complexityï¼‰ï¼Œç”¨æˆ·æ–¹èƒ½åœ¨è¡¨å±‚äº«å—åˆ°çœŸæ­£çš„ç®€å•ï¼ˆUser Simplicityï¼‰ã€‚</strong></strong></p>
<p><strong><strong>2. ä»â€œå…¨æ°‘å¼€å‘â€åˆ°â€œä¸“ä¸šçº§èåˆâ€</strong></strong></p>
<p>è¡Œä¸šæ›¾å¹»æƒ³â€œäººäººéƒ½æ˜¯å¼€å‘è€…ï¼ˆCitizen Developerï¼‰â€ï¼Œä½†ç°å®è¯æ˜ï¼Œä¸šåŠ¡äººå‘˜éœ€è¦çš„ä¸æ˜¯ç®€é™‹çš„ç©å…·ï¼Œè€Œæ˜¯èƒ½ä¸ä¸“ä¸š IT å¹³ç­‰å¯¹è¯çš„å¹³å°ã€‚ Mendix åºŸæ­¢ Web ç«¯ IDEï¼Œæ ‡å¿—ç€ä½ä»£ç ä¸å†æ˜¯ä¸šåŠ¡äººå‘˜çš„â€œè‡ªç•™åœ°â€ï¼Œè€Œæ˜¯â€œä¸šåŠ¡ä¸ IT çš„èåˆåœºï¼ˆFusion Teamsï¼‰â€ã€‚</p>
<ul>
<li>åœ¨è¿™é‡Œï¼Œä¸šåŠ¡äººå‘˜ä¸å†æ˜¯â€œè¢«é™çº§çš„ç”¨æˆ·â€ï¼Œè€Œæ˜¯è¢«å·¥å…·èµ‹èƒ½çš„é€»è¾‘æ„å»ºè€…ã€‚</li>
<li>åœ¨è¿™é‡Œï¼ŒGit ä¸å†æ˜¯ç¨‹åºå‘˜çš„ç‰¹æƒï¼Œè€Œæ˜¯é€šè¿‡å¯è§†åŒ–å°è£…ï¼Œæˆä¸ºäº†å…¨å‘˜å…±è¯†çš„åä½œåè®®ã€‚</li>
</ul>
<p><strong><strong>3. ä¸º AI é“ºè®¾çš„â€œæ•°å­—é“è½¨â€</strong></strong></p>
<p>å½“æˆ‘ä»¬ç›®å…‰æŠ•å‘æœªæ¥ï¼ŒMendix çš„æ¶æ„ä»·å€¼æ„ˆå‘å‡¸æ˜¾ã€‚ åœ¨ AIGC æ—¶ä»£ï¼ŒAI ä¸ç¼ºç”Ÿæˆèƒ½åŠ›ï¼Œç¼ºçš„æ˜¯â€œå¯æ§çš„ä¸Šä¸‹æ–‡â€ã€‚</p>
<ul>
<li>æ¾æ•£çš„ã€éç»“æ„åŒ–çš„å¹³å°ï¼Œåªèƒ½è®© AI ç”Ÿæˆéš¾ä»¥ç»´æŠ¤çš„â€œé¢æ¡ä»£ç â€ã€‚</li>
<li>è€Œ Mendix æ„å»ºçš„è¿™åº§åŸºäº <strong><strong>GUID + DSL + ç»Ÿä¸€è¯­å¢ƒ</strong></strong> çš„å¤§å¦ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸º AI é“ºè®¾äº†æ ‡å‡†çš„â€œæ•°å­—é“è½¨â€ã€‚</li>
</ul>
<p>åœ¨æ­¤æ¶æ„ä¸‹ï¼ŒAI ä¸å†æ˜¯åªä¼šé—²èŠçš„ Chatbotï¼Œè€Œæ˜¯èƒ½ç²¾å‡†è¯»å–æ¨¡å‹ã€ç†è§£ä¾èµ–ã€é¢„åˆ¤å†²çªçš„â€œè¶…çº§å‰¯é©¾â€ã€‚å®ƒè®©è½¯ä»¶å¼€å‘çœŸæ­£ä»â€œæ‰‹å·¥ä½œåŠâ€è¿ˆå‘äº†â€œäººæœºå…±åˆ›çš„å·¥ä¸šåŒ–æ—¶ä»£â€ã€‚</p>
<p><strong><strong>æœ€ç»ˆå»ºè®®ï¼š</strong></strong> å¯¹äºä¼ä¸šçš„æŠ€æœ¯å†³ç­–è€…è€Œè¨€ï¼Œåœ¨è¯„ä¼°ä½ä»£ç å¹³å°æ—¶ï¼Œè¯·å‹¿è¢«â€œæ‹–æ‹½æœ‰å¤šå¿«â€çš„ Demo è’™è”½åŒçœ¼ã€‚è¯·æ·±å…¥åº•å±‚ï¼Œå®¡è§†å®ƒæ˜¯å¦‚ä½•å¤„ç†ç‰ˆæœ¬å†²çªã€å¦‚ä½•å®šä¹‰æ¨¡å‹ã€‚ å› ä¸ºï¼Œ<strong><strong>åªæœ‰é‚£äº›å°Šé‡è½¯ä»¶å·¥ç¨‹æœ¬è´¨ã€æ•¢äºç”¨ç¡¬æ ¸æŠ€æœ¯è§£å†³â€œè„æ´»ç´¯æ´»â€çš„å¹³å°ï¼Œæ‰é…å¾—ä¸Šæ‰¿è½½ä¼ä¸šæœªæ¥çš„æ ¸å¿ƒä¸šåŠ¡ã€‚</strong></strong></p>
<p><strong>å…³äºMendixå…¬å¸</strong><br/>
ä½œä¸ºè¥¿é—¨å­Xceleratorå¹³å°çš„ä½ä»£ç å¼•æ“ï¼ŒMendixæ­£åœ¨è¿…é€Ÿæˆä¸ºæ¨åŠ¨ä¼ä¸šæ•°å­—åŒ–å‘å±•çš„é¦–é€‰åº”ç”¨ç¨‹åºå¼€å‘å¹³å°ã€‚Mendixè®©ä¼ä¸šèƒ½å¤Ÿä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦æ„å»ºåº”ç”¨ç¨‹åºã€ä¿ƒè¿›ITå›¢é˜Ÿä¸ä¸šåŠ¡ä¸“å®¶ä¹‹é—´å¼€å±•æœ‰æ„ä¹‰çš„åä½œï¼Œå¹¶å¸®åŠ©ITå›¢é˜Ÿä¿æŒå¯¹æ•´ä¸ªåº”ç”¨ç¨‹åºç¯å¢ƒçš„æ§åˆ¶ã€‚ä½œä¸ºä¸€ç›´è¢«é¢†å…ˆçš„è¡Œä¸šåˆ†æå¸ˆè§†ä¸ºâ€œé¢†å†›è€…å’Œè¿œè§è€…â€çš„ä½ä»£ç å¹³å°ï¼ŒMendixæ˜¯äº‘åŸç”Ÿçš„ã€å¼€æ”¾çš„ã€å¯æ‰©å±•çš„ã€æ•æ·çš„ï¼Œå¹¶ä¸”ç»è¿‡å®è·µéªŒè¯ã€‚ä»äººå·¥æ™ºèƒ½å’Œå¢å¼ºç°å®ï¼Œåˆ°æ™ºèƒ½è‡ªåŠ¨åŒ–å’ŒåŸç”Ÿç§»åŠ¨ï¼ŒMendixå’Œè¥¿é—¨å­Xceleratorå·²æˆä¸ºâ€œæ•°å­—ä¼˜å…ˆâ€ä¼ä¸šçš„ä¸­åšåŠ›é‡ã€‚Mendixå·²è¢«46ä¸ªå›½å®¶çš„4,000å¤šå®¶ä¼ä¸šé‡‡ç”¨ï¼Œå¹¶å»ºç«‹äº†ç”±30å¤šä¸‡åå¼€å‘äººå‘˜ç»„æˆçš„æ´»è·ƒç¤¾åŒºï¼Œè¿™äº›å¼€å‘äººå‘˜ä½¿ç”¨è¯¥å¹³å°åˆ›å»ºäº†20å¤šä¸‡æ¬¾åº”ç”¨ç¨‹åºã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MybatisPluså·¥å…·ï¼ˆè¯¦ç»†æ•™ç¨‹ï¼‰]]></title>    <link>https://juejin.cn/post/7599268297203023910</link>    <guid>https://juejin.cn/post/7599268297203023910</guid>    <pubDate>2026-01-26T03:02:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599268297203023910" data-draft-id="7599268297202991142" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MybatisPluså·¥å…·ï¼ˆè¯¦ç»†æ•™ç¨‹ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T03:02:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¼˜ç§€çš„é¢œ"/> <meta itemprop="url" content="https://juejin.cn/user/960313319521178"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MybatisPluså·¥å…·ï¼ˆè¯¦ç»†æ•™ç¨‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/960313319521178/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¼˜ç§€çš„é¢œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:02:59.000Z" title="Mon Jan 26 2026 03:02:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">MybatisPlus</h2>
<p>ç®€ä»‹ï¼šæ˜¯ä¸€ä¸ª MyBatis çš„å¢å¼ºå·¥å…·</p>
<p>å®˜æ–¹ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbaomidou.com%2F" target="_blank" title="https://baomidou.com/" ref="nofollow noopener noreferrer">baomidou.com/</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbaomidou.com%2Fpages%2F24112f%2F" target="_blank" title="https://baomidou.com/pages/24112f/" ref="nofollow noopener noreferrer">baomidou.com/pages/24112â€¦</a></p>
<h3 data-id="heading-1">åŸºæœ¬ä½¿ç”¨</h3>
<p><strong>å¯¼å…¥åŒ…ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><strong>æ•°æ®æºé…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span>
    <span class="hljs-comment"># å¦‚æœä½¿ç”¨ MySQL8 é©±åŠ¨ä¸åŒï¼Œå¢åŠ æ—¶åŒºçš„é…ç½® serverTimezone=GMT%2B8</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://xx:3306/æ•°æ®åº“?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span> <span class="hljs-comment"># é»˜è®¤æ—¥å¿—</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:/mapper/**/*.xml</span>
</code></pre>
<p><strong>åŸºæœ¬ä½¿ç”¨ï¼š</strong></p>
<p>å¯åŠ¨ç±»å¢åŠ æ‰«æmapperæ–‡ä»¶å¤¹ï¼Œçœç•¥@mapperæ³¨è§£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@MapperScan("æŒ‡å®šMapperæ¥å£æ‰€åœ¨çš„åŒ…")</span>
</code></pre>
<p>mapperå±‚ç¼–å†™</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Repository</span> <span class="hljs-comment">// æŒä¹…å±‚</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BillMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;Bill&gt; {}
</code></pre>
<p>serviceå±‚ç¼–å†™</p>
<p>éœ€è¦ç»§æ‰¿IService</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BillService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;Bill&gt; {}
</code></pre>
<p>serviceå®ç°ç±»ç¼–å†™</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BillServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;BillMapper, Bill&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BillService</span> {}
</code></pre>
<h3 data-id="heading-2">å¸¸ç”¨æ³¨è§£</h3>
<h4 data-id="heading-3">TableName</h4>
<p>å®ä½“å¯¹åº”è¡¨å</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@TableName("wms_ware_info")</span>
</code></pre>
<h4 data-id="heading-4">TableId</h4>
<p>ä¸»é”®æ³¨è§£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@TableId(value = "bid",type = IdType.AUTO)</span>
</code></pre>
<p>typeç±»å‹å¸¸è§å€¼ï¼š</p>
<ul>
<li>AUTO	æ•°æ®åº“IDè‡ªå¢</li>
<li>NONE	æ— çŠ¶æ€</li>
<li>INPUT	insertå‰è‡ªè¡Œsetä¸»é”®å€¼</li>
<li>ASSIGN_ID	é›ªèŠ±ç®—æ³•ç”Ÿäº§id</li>
<li>ASSIGN_UUID	UUID</li>
<li>ID_WORKER	åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€IDï¼Œé•¿æ•´å‹ç±»å‹ï¼Œ32ä½UUIDå­—ç¬¦ä¸²</li>
<li>ID_WORKER_STR	åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ID å­—ç¬¦ä¸²ç±»å‹</li>
</ul>
<p>æ³¨æ„ï¼šé›ªèŠ±ç®—æ³•ï¼šåˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œç»“æœæ˜¯ä¸€ä¸ªlongå‹çš„ID</p>
<h4 data-id="heading-5">TbaleField</h4>
<p>è®¾ç½®å®ä½“ç±»ä¸­çš„å±æ€§åå’Œå­—æ®µåæ³¨è§£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@TbaleField("user_name")</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"># è¡¨ä¸­æ–°å¢å­—æ®µ create_timeï¼Œupdate_time åˆ›å»ºæ—¶é—´/ä¿®æ”¹æ—¶é—´
<span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
<span class="hljs-keyword">private</span> Date createTime;
<span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>
<span class="hljs-keyword">private</span> Date updateTime;

# å¦‚æœä¸º<span class="hljs-literal">null</span>ï¼Œå­—æ®µä¹Ÿæ›´æ–°ä¸º<span class="hljs-literal">null</span>
<span class="hljs-meta">@TableField(updateStrategy = FieldStrategy.IGNORED)</span>

# è¡¨ç¤ºä¸æ˜¯æ•°æ®åº“é‡Œçš„å­—æ®µ
<span class="hljs-meta">@TableField(exist = false)</span>
    
# MyMetaObjectHandlerç±»
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaObjectHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> {
    <span class="hljs-comment">// æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        log.info(<span class="hljs-string">"start insert fill ...."</span>);
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createTime"</span>, Date.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
    }

    <span class="hljs-comment">// æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        log.info(<span class="hljs-string">"start update fill ...."</span>);
        <span class="hljs-built_in">this</span>.strictUpdateFill(metaObject, <span class="hljs-string">"updateTime"</span>, Date.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
    }
}
</code></pre>
<h4 data-id="heading-6">TableLogic</h4>
<p>é€»è¾‘åˆ é™¤ ï¼ˆå‡åˆ é™¤ï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€»è¾‘åˆ é™¤  value 1ï¼šæœªåˆ é™¤çš„å€¼  ã€delval 0 ï¼šåˆ é™¤åçš„å€¼</span>
<span class="hljs-meta">@TableLogic(value = "1", delval = "0")</span>
<span class="hljs-keyword">private</span> Integer isDeleted; <span class="hljs-comment">// é»˜è®¤0 æœªåˆ é™¤ 1å·²åˆ é™¤</span>
# é…ç½®æ–‡ä»¶
  logic-delete-field: flag  # å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå
  logic-delete-value: <span class="hljs-number">1</span>     # é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º <span class="hljs-number">1</span>)
  logic-not-delete-value: <span class="hljs-number">0</span> # é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º <span class="hljs-number">0</span>)
</code></pre>
<h4 data-id="heading-7">é€šç”¨æšä¸¾</h4>
<p>è®¾ç½®æšä¸¾ç±»ã€å®ä½“å­—æ®µè®¾ç½®</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Getter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">SexEnum</span> {
    MALE(<span class="hljs-number">1</span>, <span class="hljs-string">"ç”·"</span>),
    FEMALE(<span class="hljs-number">2</span>, <span class="hljs-string">"å¥³"</span>);

    <span class="hljs-meta">@EnumValue</span> <span class="hljs-comment">//å°†æ³¨è§£æ‰€æ ‡è¯†çš„å±æ€§çš„å€¼å­˜å‚¨åˆ°æ•°æ®åº“ä¸­</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> sex;
    <span class="hljs-keyword">private</span> String sexName;

    SexEnum(Integer sex, String sexName) {
        <span class="hljs-built_in">this</span>.sex = sex;
        <span class="hljs-built_in">this</span>.sexName = sexName;
    }
}

# å®ä½“å­—æ®µè®¾ç½®
<span class="hljs-keyword">private</span> SexEnum sex;

# é…ç½®æ–‡ä»¶ - å¢åŠ é…ç½®
# æ‰«æé€šç”¨æšä¸¾çš„åŒ…
type-enums-<span class="hljs-keyword">package</span>: com.atguigu.mybatisplus.enums    
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>{
    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
    user.setName(<span class="hljs-string">"admin"</span>);
    user.setSex(SexEnum.MALE);  <span class="hljs-comment">// ä¿æŒæ•°æ®åº“æ˜¯keyå€¼</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.insert(user);
}
</code></pre>
<h3 data-id="heading-8">åŸºæœ¬API</h3>
<p>Mapperå±‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. æŸ¥è¯¢å…¨éƒ¨æ•°æ®</span>
List&lt;Emp&gt; emps = empMapper.selectList(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// 2. æ–°å¢</span>
<span class="hljs-type">Emp</span> <span class="hljs-variable">emp1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>();
emp1.setAge(<span class="hljs-number">13</span>);
<span class="hljs-type">int</span> <span class="hljs-variable">insert</span> <span class="hljs-operator">=</span> empMapper.insert(emp1);

<span class="hljs-comment">// 3. åˆ é™¤</span>
<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> empMapper.deleteById(<span class="hljs-number">9L</span>); <span class="hljs-comment">// å‚æ•°id</span>
<span class="hljs-comment">// 3.1 æ‰¹é‡åˆ é™¤</span>
<span class="hljs-type">int</span> <span class="hljs-variable">i1</span> <span class="hljs-operator">=</span> empMapper.deleteBatchIds(Arrays.asList(<span class="hljs-number">11L</span>, <span class="hljs-number">10L</span>));
<span class="hljs-comment">// 3.2 æ ¹æ®æ¡ä»¶åˆ é™¤  æ³¨ï¼škey æ˜¯è¡¨å­—æ®µ</span>
Map&lt;String,Object&gt; mapdel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
mapdel.put(<span class="hljs-string">"name"</span>,<span class="hljs-string">"ä¿®æ”¹çš„"</span>);
empMapper.deleteByMap(mapdel);

<span class="hljs-comment">// 4. ä¿®æ”¹</span>
<span class="hljs-type">Emp</span> <span class="hljs-variable">emp2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>();
emp2.setId(<span class="hljs-number">12</span>);
emp2.setName(<span class="hljs-string">"ä¿®æ”¹çš„"</span>);
<span class="hljs-type">int</span> <span class="hljs-variable">i2</span> <span class="hljs-operator">=</span> empMapper.updateById(emp2);

<span class="hljs-comment">// 5. æŸ¥è¯¢ </span>
<span class="hljs-type">Emp</span> <span class="hljs-variable">empO</span> <span class="hljs-operator">=</span> empMapper.selectById(<span class="hljs-number">12L</span>);
List&lt;Emp&gt; all = empMapper.selectBatchIds(Arrays.asList(<span class="hljs-number">1L</span>, <span class="hljs-number">2L</span>));
System.out.println(all);
<span class="hljs-comment">// 5.1 æ ¹æ®æŸ¥è¯¢æ¡ä»¶æŸ¥è¯¢ï¼Œæ³¨ï¼škey æ˜¯è¡¨å­—æ®µ</span>
Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(); 
map.put(<span class="hljs-string">"name"</span>,<span class="hljs-string">"ä¿®æ”¹çš„"</span>);map.put(<span class="hljs-string">"age"</span>,<span class="hljs-string">"13"</span>);
List&lt;Emp&gt; bills = empMapper.selectByMap(map);
</code></pre>
<p>Serviceå±‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1.æŸ¥å‡ºæ€»è®°å½•æ•°</span>
<span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> empService.count();
<span class="hljs-comment">// long count2 = empService.count(new QueryWrapper&lt;Emp&gt;());</span>
System.out.println(count);
<span class="hljs-comment">// 2.æ ¹æ®ä¸»é”®idæŸ¥è¯¢</span>
<span class="hljs-type">Emp</span> <span class="hljs-variable">byId</span> <span class="hljs-operator">=</span> empService.getById(<span class="hljs-number">3L</span>);
<span class="hljs-comment">// 3.æŸ¥è¯¢å…¨éƒ¨</span>
List&lt;Emp&gt; all = empService.list();
<span class="hljs-comment">// List&lt;Emp&gt; all2 = empService.list(new QueryWrapper&lt;Emp&gt;());</span>
System.out.println(all);

<span class="hljs-comment">// 4.æ–°å¢</span>
empService.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>());
<span class="hljs-comment">// 5.ä¿®æ”¹</span>
empService.updateById(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>());
<span class="hljs-comment">// empService.update(new QueryWrapper&lt;Emp&gt;());</span>
<span class="hljs-comment">// 6.æ–°å¢æˆ–ä¿®æ”¹ ï¼Œ æœ‰ä¸»é”®ä»£è¡¨ä¿®æ”¹ï¼Œå¦åˆ™æ–°å¢</span>
empService.saveOrUpdate(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>());
<span class="hljs-comment">// 7.æ‰¹é‡æ–°å¢</span>
List&lt;Emp&gt; alls = Arrays.asList(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-string">"ç‹1"</span>, <span class="hljs-number">1</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-string">"ç³2"</span>, <span class="hljs-number">33</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>(<span class="hljs-string">"å‡¯3"</span>, <span class="hljs-number">32</span>));
<span class="hljs-type">boolean</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> empService.saveBatch(alls);
<span class="hljs-comment">// 8.æ‰¹é‡æ–°å¢æˆ–ä¿®æ”¹ ï¼Œ æœ‰ä¸»é”®ä»£è¡¨ä¿®æ”¹ï¼Œå¦åˆ™æ–°å¢</span>
empService.saveOrUpdateBatch(alls);

<span class="hljs-comment">// 9.æ ¹æ®ä¸»é”® åˆ é™¤</span>
empService.removeById(<span class="hljs-number">20L</span>);
empService.remove(<span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;Emp&gt;());
<span class="hljs-comment">// 10.æ‰¹é‡åˆ é™¤</span>
empService.removeBatchByIds(Arrays.asList(<span class="hljs-number">11L</span>, <span class="hljs-number">10L</span>));
</code></pre>
<h3 data-id="heading-9">æ¡ä»¶æ„é€ å™¨</h3>
<p>Wrapperä»‹ç»ï¼š</p>
<p>Wrapper  æ¡ä»¶æ„é€ æŠ½è±¡ç±»</p>
<p>AbstractWrapper ç”¨äºæŸ¥è¯¢æ¡ä»¶å°è£…ï¼Œç”Ÿæˆ sql çš„ where æ¡ä»¶</p>
<ul>
<li>QueryWrapper   æŸ¥è¯¢æ¡ä»¶å°è£…</li>
<li>UpdateWrapper ä¿®æ”¹æ¡ä»¶</li>
<li>AbstractLambdaWrapper ä½¿ç”¨Lambda è¯­æ³•ï¼Œå®ƒè¿˜æœ‰LambdaQueryWrapper  ã€LambdaUpdateWrapper</li>
</ul>
<h4 data-id="heading-10">QueryWrapperï¼š</h4>
<p><strong>æŸ¥è¯¢æ¡ä»¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//æŸ¥è¯¢ç”¨æˆ·ååŒ…å«aï¼Œå¹´é¾„åœ¨20åˆ°30ä¹‹é—´ï¼Œé‚®ç®±ä¿¡æ¯ä¸ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯</span>
QueryWrapper&lt;User&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();
q.like(<span class="hljs-string">"username"</span>,<span class="hljs-string">"a"</span>).between(<span class="hljs-string">"age"</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>).isNotNull(<span class="hljs-string">"email"</span>);
<span class="hljs-comment">//æ’åºæ¡ä»¶ orderByDesc é™åº orderByAsc å‡åº</span>
q.orderByDesc(<span class="hljs-string">"age"</span>).orderByAsc(<span class="hljs-string">"id"</span>);
List&lt;User&gt; users = userMapper.selectList(q);
users.forEach(System.out::println);
</code></pre>
<p><strong>åˆ é™¤æ¡ä»¶</strong></p>
<pre><code class="hljs language-java" lang="java"> QueryWrapper&lt;User&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();
 q.isNull(<span class="hljs-string">"email"</span>);
 <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.delete(q);
 System.out.println(result &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"åˆ é™¤æˆåŠŸï¼"</span> : <span class="hljs-string">"åˆ é™¤å¤±è´¥ï¼"</span>);
</code></pre>
<p><strong>æ¡ä»¶çš„ä¼˜å…ˆçº§</strong></p>
<pre><code class="hljs language-java" lang="java">QueryWrapper&lt;User&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>();
q.select(<span class="hljs-string">"bill_name"</span>,<span class="hljs-string">"bill_num"</span>,<span class="hljs-string">"pay"</span>); <span class="hljs-comment">// selectæŸ¥è¯¢ åªæ˜¾ç¤ºè¿™å‡ ä¸ªå­—æ®µï¼Œå…¶ä»–å­—æ®µä¸æ˜¾ç¤º</span>
<span class="hljs-comment">// ge å¤§äºç­‰äº gt å¤§äº le å°äºç­‰äº  lt å°äº  eq ç­‰äº ne ä¸ç­‰ </span>
<span class="hljs-comment">// between èŒƒå›´ notBetween  in  notIn</span>
<span class="hljs-comment">// like  notLike  likeLeft (LIKE '%å€¼â€™)  likeRight (LIKEâ€™å€¼%â€™)</span>
<span class="hljs-comment">// isNull  isNotNull</span>
<span class="hljs-comment">// inSql  å­—æ®µIN ( sqlè¯­å¥)  notInSql</span>
<span class="hljs-comment">// groupBy åˆ†ç»„  orderByAsc  orderByDesc  orderBy ä¾‹ï¼šorderBy(trueï¼Œtrue,â€œidâ€ï¼Œâ€œnameâ€)â€”â€“&gt;order by id ASC, name ASC</span>
<span class="hljs-comment">// having  exists notExists  or  and</span>
q.gt(<span class="hljs-string">"bill_num"</span>,<span class="hljs-number">4</span>)
 .and(i-&gt;{
    i.like(<span class="hljs-string">"bill_name"</span>,<span class="hljs-string">"a"</span>).or().isNull(<span class="hljs-string">"pay"</span>);
 }).isNull(<span class="hljs-string">"pay"</span>);
List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(q);
</code></pre>
<p><strong>å­æŸ¥è¯¢</strong></p>
<pre><code class="hljs language-java" lang="java">QueryWrapper&lt;User&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();
q.inSql(<span class="hljs-string">"uid"</span>, <span class="hljs-string">"select uid from è¡¨ where uid &lt;= 100"</span>);
List&lt;User&gt; list = userMapper.selectList(q);
</code></pre>
<h4 data-id="heading-11">UpdateWrapperï¼š</h4>
<pre><code class="hljs language-java" lang="java">UpdateWrapper&lt;User&gt; u = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateWrapper</span>&lt;&gt;();
u.like(<span class="hljs-string">"username"</span>,<span class="hljs-string">"a"</span>)
 .set(<span class="hljs-string">"email"</span>,<span class="hljs-string">"ä¿®æ”¹çš„å­—æ®µ"</span>).set(<span class="hljs-string">"bill_name"</span>,<span class="hljs-string">"ä¿®æ”¹çš„å­—æ®µ2"</span>);
<span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.update(<span class="hljs-literal">null</span>, u);
System.out.println(result &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"ä¿®æ”¹æˆåŠŸï¼"</span> : <span class="hljs-string">"ä¿®æ”¹å¤±è´¥ï¼"</span>);
</code></pre>
<h4 data-id="heading-12">condition:</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span>  <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">"a"</span>;
<span class="hljs-type">Integer</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
<span class="hljs-type">Integer</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;
QueryWrapper&lt;User&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();
<span class="hljs-comment">// å‚æ•° 1 booleanå€¼ï¼Œæ»¡è¶³æ¡ä»¶ä¼šæ‰§è¡Œ</span>
q.like(StringUtils.isNotBlank(a), <span class="hljs-string">"user_name"</span>, a)  
    .ge(b != <span class="hljs-literal">null</span>, <span class="hljs-string">"age"</span>, b)
    .le(c != <span class="hljs-literal">null</span>, <span class="hljs-string">"age"</span>, c);
List&lt;User&gt; list = userMapper.selectList(q);
</code></pre>
<h4 data-id="heading-13">LambdaQueryWrapperï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span>  <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">"a"</span>;
<span class="hljs-type">Integer</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
<span class="hljs-type">Integer</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;
LambdaQueryWrapper&lt;User&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
q.like(StringUtils.isNotBlank(a), User::getName, a)
    .ge(b != <span class="hljs-literal">null</span>, User::getAge, b)
    .le(c != <span class="hljs-literal">null</span>, User::getAge, c);
List&lt;User&gt; list = userMapper.selectList(q);
</code></pre>
<h4 data-id="heading-14">LambdaUpdateWrapperï¼š</h4>
<pre><code class="hljs language-java" lang="java">LambdaUpdateWrapper&lt;User&gt; u = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;&gt;();
u.like(User::getName, <span class="hljs-string">"a"</span>).isNull(User::getEmail));
u.set(User::getName, <span class="hljs-string">"å°é»‘"</span>).set(User::getEmail,<span class="hljs-string">"xxx"</span>);
<span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.update(<span class="hljs-literal">null</span>, u);
</code></pre>
<h3 data-id="heading-15">å¸¸ç”¨æ’ä»¶</h3>
<h4 data-id="heading-16">åˆ†é¡µ</h4>
<p><strong>é…ç½®ç±»</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@MapperScan("com.yan.mybatis.mapper")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisPlusConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span>{
        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
        <span class="hljs-comment">// æ·»åŠ åˆ†é¡µæ’ä»¶ - æŒ‡å‘æ•°æ®åº“ç±»å‹</span>
        interceptor.addInnerInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));
        <span class="hljs-keyword">return</span> interceptor;
    }
}
</code></pre>
<p><strong>æµ‹è¯•</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>{
    <span class="hljs-comment">// å‚æ•°ï¼šå½“å‰é¡µã€æ˜¾ç¤ºæ¡æ•°ã€æŸ¥è¯¢æ¡ä»¶</span>
    Page&lt;Bill&gt; page = billMapper.selectPage(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>), <span class="hljs-literal">null</span>);
    List&lt;Bill&gt; users = page.getRecords();
    users.forEach(System.out::println);
    System.out.println(page.getRecords());  <span class="hljs-comment">// è·å–è®°å½•æ•°</span>
    System.out.println(page.getSize());     <span class="hljs-comment">// è·å–æ˜¾ç¤ºæ¡æ•°</span>
    System.out.println(page.getCurrent());  <span class="hljs-comment">// è·å–å½“å‰é¡µçš„é¡µç </span>
    System.out.println(page.getPages());    <span class="hljs-comment">// è·å–æ€»é¡µç </span>
    System.out.println(page.getTotal());    <span class="hljs-comment">// è·å–æ€»è®°å½•æ•°</span>
    <span class="hljs-type">boolean</span> <span class="hljs-variable">b1</span> <span class="hljs-operator">=</span> page.hasNext();      <span class="hljs-comment">// æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ</span>
    <span class="hljs-type">boolean</span> <span class="hljs-variable">b2</span> <span class="hljs-operator">=</span> page.hasPrevious();  <span class="hljs-comment">// æ˜¯å¦æœ‰ä¸Šä¸€é¡µ</span>
}
</code></pre>
<p><strong>è‡ªå®šä¹‰åˆ†é¡µ</strong></p>
<pre><code class="hljs language-java" lang="java"># Mapperå±‚å®šä¹‰
Page&lt;User&gt; <span class="hljs-title function_">selectPageVo</span><span class="hljs-params">(<span class="hljs-meta">@Param("page")</span> Page&lt;User&gt; page,<span class="hljs-meta">@Param("age")</span> Integer age)</span>;

# XMlå®šä¹‰
&lt;select id=<span class="hljs-string">"selectPageVo"</span> resultType=<span class="hljs-string">"User"</span>&gt;
    select * from t_user where age &gt; #{age}
&lt;/select&gt;    

# æµ‹è¯•
Page&lt;User&gt; page = userMapper.selectPageVo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;User&gt;(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>), <span class="hljs-number">20</span>);
List&lt;User&gt; users = page.getRecords();    
</code></pre>
<h4 data-id="heading-17">ä¹è§‚é”</h4>
<p>ä¹è§‚é”ï¼šä¿æŒä¹è§‚çŠ¶æ€ï¼Œæ— è®ºå¹²ä»€ä¹ˆéƒ½ä¸ä¼šä¸Šé”ï¼Œå¦‚æœæœ‰é—®é¢˜å°±å†æ¬¡æ›´æ–°å€¼æµ‹è¯•ã€‚ï¼ˆç‰ˆæœ¬å·versionï¼‰</p>
<p>æ‚²è§‚é”ï¼šæ€»æ˜¯è®¤ä¸ºæ€»ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆéƒ½ä¼šä¸Šé”åå†å»æ“ä½œã€‚</p>
<p><strong>é…ç½®ç±»</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@MapperScan("com.yan.mybatis.mapper")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisPlusConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span>{
        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
        <span class="hljs-comment">// æ·»åŠ åˆ†é¡µæ’ä»¶ - æŒ‡å‘æ•°æ®åº“ç±»å‹</span>
        interceptor.addInnerInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));
        <span class="hljs-comment">//æ·»åŠ ä¹è§‚é”æ’ä»¶</span>
    	interceptor.addInnerInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OptimisticLockerInnerInterceptor</span>());
        <span class="hljs-keyword">return</span> interceptor;
    }
}
</code></pre>
<p><strong>å®ä½“å­—æ®µå¢åŠ æ³¨è§£</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Version</span>  <span class="hljs-comment">// æ ‡è¯†ä¹è§‚é”ç‰ˆæœ¬å·å­—æ®µ</span>
<span class="hljs-keyword">private</span> String version;
</code></pre>
<p><strong>æµ‹è¯•</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>{
    <span class="hljs-comment">// 1.B1 è·å¾—çš„å€¼</span>
    <span class="hljs-type">Bill</span> <span class="hljs-variable">b1</span> <span class="hljs-operator">=</span> billMapper.selectById(<span class="hljs-number">16</span>);
    System.out.println(<span class="hljs-string">"B1 ï¼š"</span> + b1.getMoney());
    <span class="hljs-comment">// 2.B2 è·å¾—çš„å€¼</span>
    <span class="hljs-type">Bill</span> <span class="hljs-variable">b2</span> <span class="hljs-operator">=</span> billMapper.selectById(<span class="hljs-number">16</span>);
    System.out.println(<span class="hljs-string">"B2 ï¼š"</span> + b1.getMoney());

    <span class="hljs-comment">// 3.B1 è·å¾—çš„å€¼ + 50</span>
    b1.setMoney(b1.getMoney() + <span class="hljs-number">50</span>);
    billMapper.updateById(b1);

    <span class="hljs-comment">// 4.B2 è·å¾—çš„å€¼ - 30</span>
    b2.setMoney(b2.getMoney()-<span class="hljs-number">30</span>);
    <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> billMapper.updateById(b2);
    <span class="hljs-keyword">if</span> (result == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// æ“ä½œå¤±è´¥ï¼Œé‡è¯•</span>
        <span class="hljs-type">Bill</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> billMapper.selectById(<span class="hljs-number">16</span>);
        b.setMoney(b.getMoney() - <span class="hljs-number">30</span>);
        billMapper.updateById(b);
    }

    <span class="hljs-comment">// 5.æŸ¥çœ‹ 16è¿™æ¡æ•°æ® å€¼ - ä¹è§‚é”</span>
    <span class="hljs-type">Bill</span> <span class="hljs-variable">bill</span> <span class="hljs-operator">=</span> billMapper.selectById(<span class="hljs-number">16</span>);
    System.out.println(<span class="hljs-string">"Bill ï¼š"</span> + bill.getMoney());

}
</code></pre>
<p>æ³¨æ„ï¼š</p>
<p>æ•´æ•°ç±»å‹ä¸‹ newVersion = oldVersion + 1
newVersion ä¼šå›å†™åˆ° entity ä¸­
ä»…æ”¯æŒ updateById(id) ä¸ update(entity, wrapper) æ–¹æ³•
åœ¨ update(entity, wrapper) æ–¹æ³•ä¸‹, wrapper ä¸èƒ½å¤ç”¨</p>
<h4 data-id="heading-18">é€šç”¨æšä¸¾</h4>
<p>æšä¸¾ç±»</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.EnumValue;
<span class="hljs-keyword">import</span> lombok.Getter;

<span class="hljs-comment">/**
 * æšä¸¾
 */</span>
<span class="hljs-meta">@Getter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">SexEnum</span> {

    ONE(<span class="hljs-number">0</span>, <span class="hljs-string">"æœªä»˜æ¬¾"</span>),
    TWO(<span class="hljs-number">1</span>, <span class="hljs-string">"å·²ä»˜æ¬¾"</span>);

    <span class="hljs-meta">@EnumValue</span> <span class="hljs-comment">// å°†æ³¨è§£æ‰€æ ‡è¯†çš„å±æ€§çš„å€¼å­˜å‚¨åˆ°æ•°æ®åº“ä¸­</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> index;
    <span class="hljs-keyword">private</span> String name;

    SexEnum(Integer index, String name) {
        <span class="hljs-built_in">this</span>.index = index;
        <span class="hljs-built_in">this</span>.name = name;
    }

}
</code></pre>
<p>é…ç½®æ–‡ä»¶éœ€è¦é…ç½®</p>
<pre><code class="hljs language-xml" lang="xml">type-enums-package: cn.good.yan.pojo.conf
</code></pre>
<p>å®ä½“éœ€è¦å¼•ç”¨</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> SexEnum pay;
</code></pre>
<h4 data-id="heading-19">ä»£ç ç”Ÿæˆå™¨</h4>
<p>å¯¼å…¥ä¾èµ–åŒ…</p>
<pre><code class="hljs language-java" lang="java">&lt;!-- ä»£ç ç”Ÿæˆå™¨ --&gt;
&lt;dependency&gt;
   &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
   &lt;artifactId&gt;mybatis-plus-generator&lt;/artifactId&gt;
   &lt;version&gt;<span class="hljs-number">3.5</span><span class="hljs-number">.1</span>&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.freemarker&lt;/groupId&gt;
   &lt;artifactId&gt;freemarker&lt;/artifactId&gt;
   &lt;version&gt;<span class="hljs-number">2.3</span><span class="hljs-number">.31</span>&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä»£ç ç”Ÿæˆå™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    FastAutoGenerator.create(<span class="hljs-string">"jdbc:mysql://127.0.0.1:3306/æ•°æ®åº“å?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT%2B8"</span>, <span class="hljs-string">"ç”¨æˆ·å"</span>, <span class="hljs-string">"å¯†ç "</span>)
        .globalConfig(builder -&gt; {
            builder.author(<span class="hljs-string">"yan"</span>) <span class="hljs-comment">// è®¾ç½®ä½œè€…</span>
                <span class="hljs-comment">// .enableSwagger() // å¼€å¯ swagger æ¨¡å¼</span>
                .fileOverride() <span class="hljs-comment">// è¦†ç›–å·²ç”Ÿæˆæ–‡ä»¶</span>
                .outputDir(<span class="hljs-string">"G://xx"</span>); <span class="hljs-comment">// æŒ‡å®šè¾“å‡ºç›®å½•</span>
        })
        .packageConfig(builder -&gt; {
            builder.parent(<span class="hljs-string">"com.yan"</span>) <span class="hljs-comment">// è®¾ç½®çˆ¶åŒ…å</span>
                .moduleName(<span class="hljs-string">"mybatis"</span>) <span class="hljs-comment">// è®¾ç½®çˆ¶åŒ…æ¨¡å—å</span>
                .pathInfo(Collections.singletonMap(OutputFile.mapperXml, <span class="hljs-string">"G://xx/mapper"</span>)); <span class="hljs-comment">// è®¾ç½®mapperXmlç”Ÿæˆè·¯å¾„</span>
        })
        .strategyConfig(builder -&gt; {
            builder.addInclude(<span class="hljs-string">"pms_spu_comment"</span>) <span class="hljs-comment">// è®¾ç½®éœ€è¦ç”Ÿæˆçš„è¡¨å</span>
                .addTablePrefix(<span class="hljs-string">"t_"</span>, <span class="hljs-string">"pms_"</span>);    <span class="hljs-comment">// è®¾ç½®è¿‡æ»¤è¡¨å‰ç¼€</span>
        })
        <span class="hljs-comment">// ä½¿ç”¨Freemarkerå¼•æ“æ¨¡æ¿ï¼Œé»˜è®¤çš„æ˜¯Velocityå¼•æ“æ¨¡æ¿</span>
        .templateEngine(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FreemarkerTemplateEngine</span>()) 
        .execute();
}
</code></pre>
<h4 data-id="heading-20">å¤šæ•°æ®åº“</h4>
<p>é€‚ç”¨åœºæ™¯ï¼šè¯»å†™åˆ†ç¦»ã€ä¸€ä¸»ä¸€ä»ã€å¤šåº“</p>
<p>å¯¼å…¥ä¾èµ–åŒ…</p>
<pre><code class="hljs language-java" lang="java">&lt;!-- å¤šæ•°æ®æº --&gt;
&lt;dependency&gt;
   &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
   &lt;artifactId&gt;dynamic-datasource-spring-boot-starter&lt;/artifactId&gt;
   &lt;version&gt;<span class="hljs-number">3.5</span><span class="hljs-number">.0</span>&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>æ›´æ”¹é…ç½®</p>
<pre><code class="hljs language-xml" lang="xml">spring:
  datasource:
    # é…ç½®å¤šæ•°æ®æº
    dynamic:
      # è®¾ç½®é»˜è®¤çš„æ•°æ®æºæˆ–è€…æ•°æ®æºç»„,é»˜è®¤å€¼å³ä¸ºmaster
      primary: master
      # ä¸¥æ ¼åŒ¹é…æ•°æ®æº,é»˜è®¤false å¦‚ï¼štrueæœªåŒ¹é…åˆ°æŒ‡å®šæ•°æ®æºæ—¶æŠ›å¼‚å¸¸,falseä½¿ç”¨é»˜è®¤æ•°æ®æºï¼Œä¹Ÿå°±æ˜¯ä¸»æ•°æ®æº
      strict: false
      datasource:
        master:
          url: jdbc:mysql://127.0.0.1:3306/æ•°æ®åº“1?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT%2B8
          driver-class-name: com.mysql.cj.jdbc.Driver
          username: ç”¨æˆ·å
          password: å¯†ç 
        slave:
          url: jdbc:mysql://127.0.0.1:3306/æ•°æ®åº“2?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT%2B8
          driver-class-name: com.mysql.cj.jdbc.Driver
          username: ç”¨æˆ·å
          password: å¯†ç 
</code></pre>
<p>æŒ‡å®šæ“ä½œæ•°æ®æº</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŒ‡å®šæ“ä½œçš„æ•°æ®æºï¼Œmaster  - ä¹Ÿå¯ä»¥æ”¾åœ¨å…·ä½“çš„æ–¹æ³•ä¸Šï¼Œå’Œç±»ä¸Šï¼Œå°±è¿‘åŸåˆ™å–å¯¹åº”çš„æ•°æ®æº</span>
<span class="hljs-meta">@DS("master")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;User&gt; {}
<span class="hljs-comment">// ---</span>
<span class="hljs-meta">@DS("slave")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BillService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;Bill&gt; {}
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> BillService billService;
<span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> UserService userService;

<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>{
    <span class="hljs-type">Bill</span> <span class="hljs-variable">b1</span> <span class="hljs-operator">=</span> billService.getById(<span class="hljs-number">16</span>);
    System.out.println(b1);

    <span class="hljs-type">User</span> <span class="hljs-variable">u1</span> <span class="hljs-operator">=</span> userService.getById(<span class="hljs-number">2</span>);
    System.out.println(u1);
}
</code></pre>
<h4 data-id="heading-21">MyBatisXæ’ä»¶</h4>
<p>MyBatisXä¸€æ¬¾åŸºäº IDEA çš„å¿«é€Ÿå¼€å‘æ’ä»¶ï¼Œç®€åŒ–æˆ‘ä»¬å¼€å‘ã€‚åœ¨IDEAçš„æ’ä»¶é‡Œè¿›è¡Œä¸‹è½½MyBatisXã€‚</p>
<p>IDEAä¸­ä¸æ•°æ®åº“å»ºç«‹é“¾æ¥ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6716cd292544a4ebfe3974eaa910b95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LyY56eA55qE6aKc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001379&amp;x-signature=GA0wuLxzsIhuFo1iDeR3ACEzvO4%3D" loading="lazy"/>
<p>æ‰¾åˆ°æˆ‘ä»¬è¦ç”Ÿæˆçš„è¡¨</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e52fda65d1d4a7e9c02dca55af0af77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LyY56eA55qE6aKc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001379&amp;x-signature=DPuIzuIStKypSwYBf5QzWgxjwyQ%3D" alt="image-20220911234032561" loading="lazy"/>
<p>ç„¶åç‚¹å‡»ï¼Œå¡«å†™ç¬¬ä¸€é¡µ</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48ee838728d4af99c94b5f430379bd3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LyY56eA55qE6aKc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001379&amp;x-signature=0bDMQZQOPhXlVjh6tmwyXR%2BXKB0%3D" alt="image-20220911234904774" loading="lazy"/>
<p>å¡«å†™ç¬¬äºŒé¡µ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f249282a51b84eb79aee0e8a323624c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LyY56eA55qE6aKc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001379&amp;x-signature=KXZ6ZRq528gsqVKjSnzZlSwdBiQ%3D" loading="lazy"/></p>
<p>æ“ä½œå®Œæˆ - å¿«é€Ÿç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶</p>
<p>ç„¶åæˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­å¿«é€Ÿç”ŸæˆCRUDæ“ä½œï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8df592bb8ec2402e9c1b370633823ed1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LyY56eA55qE6aKc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770001379&amp;x-signature=TzcRZnxnM1A5%2B9FFf48kJqPVb3Q%3D" alt="image-20220911235946963" loading="lazy"/>
<p>é€‰æ‹©è¿™ä¸ªï¼Œå¯ä»¥å¿«é€Ÿç”Ÿäº§å¯¹åº”çš„ä»£ç å’ŒXMLæ˜ å°„æ–‡ä»¶</p>
<p>æ„Ÿè°¢è§‚çœ‹ï¼Œä»£ç æ¡ˆä¾‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fyan418%2Fmybatis-plus" target="_blank" title="https://gitee.com/yan418/mybatis-plus" ref="nofollow noopener noreferrer">ä¼˜ç§€çš„é¢œ/MybatisPlus</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[__CFRunLoopDoObserverså‡½æ•°è¯¦è§£]]></title>    <link>https://juejin.cn/post/7598938568431026191</link>    <guid>https://juejin.cn/post/7598938568431026191</guid>    <pubDate>2026-01-26T03:27:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598938568431026191" data-draft-id="7598918127578136610" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="__CFRunLoopDoObserverså‡½æ•°è¯¦è§£"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2026-01-26T03:27:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iOSåœ¨å…¥é—¨"/> <meta itemprop="url" content="https://juejin.cn/user/4037062426627758"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            __CFRunLoopDoObserverså‡½æ•°è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4037062426627758/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iOSåœ¨å…¥é—¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:27:24.000Z" title="Mon Jan 26 2026 03:27:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">__CFRunLoopDoObservers å‡½æ•°é€è¡Œæ³¨é‡Š</h2>
<h3 data-id="heading-1">å‡½æ•°æ¦‚è¿°</h3>
<p><code>__CFRunLoopDoObservers</code> æ˜¯ RunLoop ä¸­è´Ÿè´£è§¦å‘è§‚å¯Ÿè€…å›è°ƒçš„æ ¸å¿ƒå‡½æ•°ã€‚å½“ RunLoop çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆå¦‚å³å°†è¿›å…¥å¾ªç¯ã€å³å°†å¤„ç† Timerã€å³å°†å¤„ç† Source ç­‰ï¼‰ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¢«è°ƒç”¨æ¥é€šçŸ¥æ‰€æœ‰æ³¨å†Œçš„è§‚å¯Ÿè€…ã€‚</p>
<h3 data-id="heading-2">å‡½æ•°ç­¾å</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/* rl is locked, rlm is locked on entrance and exit */</span>
<span class="hljs-type">static</span> <span class="hljs-type">void</span> __CFRunLoopDoObservers(CFRunLoopRef, CFRunLoopModeRef, CFRunLoopActivity) __attribute__((noinline));
</code></pre>
<h4 data-id="heading-3">æ³¨é‡Šè¯´æ˜</h4>
<ul>
<li><strong>é”çŠ¶æ€çº¦å®š</strong>: å‡½æ•°å…¥å£å’Œå‡ºå£æ—¶ï¼Œ<code>rl</code>ï¼ˆRunLoopï¼‰å’Œ <code>rlm</code>ï¼ˆRunLoopModeï¼‰éƒ½å¿…é¡»å¤„äºåŠ é”çŠ¶æ€</li>
<li><strong>noinline å±æ€§</strong>: é˜²æ­¢ç¼–è¯‘å™¨å†…è”ä¼˜åŒ–æ­¤å‡½æ•°ï¼Œå¯èƒ½æ˜¯ä¸ºäº†ï¼š
<ul>
<li>ä¾¿äºè°ƒè¯•å’Œæ€§èƒ½åˆ†æ</li>
<li>ä¿æŒè°ƒç”¨æ ˆçš„å¯è¯»æ€§</li>
<li>æ§åˆ¶ä»£ç å¤§å°</li>
</ul>
</li>
</ul>
<h4 data-id="heading-4">å‚æ•°è¯´æ˜</h4>
<ul>
<li><code>CFRunLoopRef rl</code>: å½“å‰è¿è¡Œçš„ RunLoop</li>
<li><code>CFRunLoopModeRef rlm</code>: å½“å‰çš„ RunLoop Mode</li>
<li><code>CFRunLoopActivity activity</code>: å½“å‰ RunLoop çš„æ´»åŠ¨çŠ¶æ€ï¼ˆæšä¸¾å€¼ï¼‰</li>
</ul>
<h3 data-id="heading-5">RunLoop Activity çŠ¶æ€æšä¸¾</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-title function_">CF_OPTIONS</span><span class="hljs-params">(CFOptionFlags, CFRunLoopActivity)</span> {
    kCFRunLoopEntry         = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">0</span>),  <span class="hljs-comment">// å³å°†è¿›å…¥ RunLoop</span>
    kCFRunLoopBeforeTimers  = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">1</span>),  <span class="hljs-comment">// å³å°†å¤„ç† Timer</span>
    kCFRunLoopBeforeSources = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">2</span>),  <span class="hljs-comment">// å³å°†å¤„ç† Source</span>
    kCFRunLoopBeforeWaiting = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">5</span>),  <span class="hljs-comment">// å³å°†è¿›å…¥ä¼‘çœ </span>
    kCFRunLoopAfterWaiting  = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">6</span>),  <span class="hljs-comment">// åˆšä»ä¼‘çœ ä¸­å”¤é†’</span>
    kCFRunLoopExit          = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">7</span>),  <span class="hljs-comment">// å³å°†é€€å‡º RunLoop</span>
    kCFRunLoopAllActivities = <span class="hljs-number">0x0FFFFFFF</span>U   <span class="hljs-comment">// æ‰€æœ‰æ´»åŠ¨çŠ¶æ€</span>
};
</code></pre>
<h3 data-id="heading-6">å®Œæ•´ä»£ç é€è¡Œæ³¨é‡Š</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/* DOES CALLOUT */</span>
<span class="hljs-comment">// ã€é‡è¦æ ‡æ³¨ã€‘æ­¤å‡½æ•°ä¼šæ‰§è¡Œå¤–éƒ¨å›è°ƒï¼ˆcalloutï¼‰ï¼Œå¯èƒ½å¯¼è‡´ï¼š</span>
<span class="hljs-comment">// 1. é•¿æ—¶é—´é˜»å¡ï¼ˆå›è°ƒå‡½æ•°è€—æ—¶ï¼‰</span>
<span class="hljs-comment">// 2. é‡å…¥é—®é¢˜ï¼ˆå›è°ƒä¸­å¯èƒ½å†æ¬¡æ“ä½œ RunLoopï¼‰</span>
<span class="hljs-comment">// 3. æ­»é”é£é™©ï¼ˆå› æ­¤éœ€è¦åœ¨å›è°ƒå‰è§£é”ï¼‰</span>
<span class="hljs-type">static</span> <span class="hljs-type">void</span> __CFRunLoopDoObservers(CFRunLoopRef rl, CFRunLoopModeRef rlm, CFRunLoopActivity activity) {
    
    <span class="hljs-comment">// ==================== ç¬¬ä¸€éƒ¨åˆ†ï¼šæ€§èƒ½è¿½è¸ªå’Œåˆå§‹åŒ– ====================</span>
    
    
    <span class="hljs-comment">// ğŸ“Š è®°å½•æ€§èƒ½è¿½è¸ªç‚¹ï¼šå¼€å§‹æ‰§è¡Œ observers</span>
    <span class="hljs-comment">// å‚æ•°ï¼šäº‹ä»¶ç±»å‹ã€RunLoopã€Modeã€æ´»åŠ¨çŠ¶æ€ã€é¢å¤–å‚æ•°</span>
    <span class="hljs-comment">// å¯ç”¨ Instruments çš„ kdebug å·¥å…·æŸ¥çœ‹</span>
    cf_trace(KDEBUG_EVENT_CFRL_IS_DOING_OBSERVERS | DBG_FUNC_START, rl, rlm, activity, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// ğŸ”’ æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¢« fork</span>
    <span class="hljs-comment">// å¦‚æœåœ¨ fork åçš„å­è¿›ç¨‹ä¸­ï¼Œéœ€è¦é‡æ–°åˆå§‹åŒ– RunLoop çš„é”å’ŒçŠ¶æ€</span>
    <span class="hljs-comment">// é˜²æ­¢ç»§æ‰¿çˆ¶è¿›ç¨‹çš„é”çŠ¶æ€å¯¼è‡´æ­»é”</span>
    CHECK_FOR_FORK();

    <span class="hljs-comment">// ==================== ç¬¬äºŒéƒ¨åˆ†ï¼šæ£€æŸ¥è§‚å¯Ÿè€…æ•°é‡ ====================</span>
    
    <span class="hljs-comment">// è·å–å½“å‰ Mode ä¸­è§‚å¯Ÿè€…çš„æ•°é‡</span>
    <span class="hljs-comment">// ä¸‰ç›®è¿ç®—ç¬¦é˜²æ­¢ _observers ä¸º NULL æ—¶å´©æºƒ</span>
    CFIndex cnt = rlm-&gt;_observers ? CFArrayGetCount(rlm-&gt;_observers) : <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// å¿«é€Ÿé€€å‡ºï¼šå¦‚æœæ²¡æœ‰è§‚å¯Ÿè€…ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šæ­¤æ—¶ä»æŒæœ‰é”ï¼Œä½†ä¸éœ€è¦æ‰‹åŠ¨è§£é”ï¼ˆè°ƒç”¨è€…ä¼šå¤„ç†ï¼‰</span>
    <span class="hljs-keyword">if</span> (cnt &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
    

    <span class="hljs-comment">// ==================== ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ†é…è§‚å¯Ÿè€…æ”¶é›†æ•°ç»„ ====================</span>
    
    <span class="hljs-comment">/* Fire the observers */</span>
    <span class="hljs-comment">// ğŸ“¦ å£°æ˜æ ˆä¸Šç¼“å†²åŒºï¼Œé¿å…å°æ•°ç»„çš„å †åˆ†é…å¼€é”€</span>
    <span class="hljs-comment">// - å¦‚æœè§‚å¯Ÿè€…æ•°é‡ â‰¤ 1024ï¼šåœ¨æ ˆä¸Šåˆ†é… cnt ä¸ªå…ƒç´ çš„æ•°ç»„</span>
    <span class="hljs-comment">// - å¦‚æœè§‚å¯Ÿè€…æ•°é‡ &gt; 1024ï¼šåœ¨æ ˆä¸Šåˆ†é… 1 ä¸ªå…ƒç´ ï¼ˆå ä½ç¬¦ï¼‰</span>
    <span class="hljs-comment">// æ ˆåˆ†é…é€Ÿåº¦å¿«ï¼Œä½†ç©ºé—´æœ‰é™ï¼ˆé€šå¸¸å‡  MBï¼‰</span>
    STACK_BUFFER_DECL(CFRunLoopObserverRef, buffer, (cnt &lt;= <span class="hljs-number">1024</span>) ? cnt : <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// ğŸ¯ ç¡®å®šæœ€ç»ˆä½¿ç”¨çš„æ•°ç»„æŒ‡é’ˆ</span>
    <span class="hljs-comment">// - å°æ•°ç»„ï¼ˆâ‰¤1024ï¼‰ï¼šä½¿ç”¨æ ˆç¼“å†²åŒºï¼ˆå¿«é€Ÿï¼Œæ— éœ€é‡Šæ”¾ï¼‰</span>
    <span class="hljs-comment">// - å¤§æ•°ç»„ï¼ˆ&gt;1024ï¼‰ï¼šå †åˆ†é…ï¼ˆæ…¢ï¼Œä½†å¯å®¹çº³æ›´å¤šå…ƒç´ ï¼‰</span>
    <span class="hljs-comment">// 1024 æ˜¯ç»éªŒé˜ˆå€¼ï¼Œå¹³è¡¡æ€§èƒ½å’Œæ ˆç©ºé—´ä½¿ç”¨</span>
    CFRunLoopObserverRef *collectedObservers = (cnt &lt;= <span class="hljs-number">1024</span>) ? buffer : (CFRunLoopObserverRef *)<span class="hljs-built_in">malloc</span>(cnt * <span class="hljs-keyword">sizeof</span>(CFRunLoopObserverRef));
    
    <span class="hljs-comment">// å®é™…æ”¶é›†åˆ°çš„è§‚å¯Ÿè€…è®¡æ•°å™¨ï¼ˆå¯èƒ½å°äº cntï¼‰</span>
    CFIndex obs_cnt = <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// ==================== ç¬¬å››éƒ¨åˆ†ï¼šæ”¶é›†éœ€è¦è§¦å‘çš„è§‚å¯Ÿè€… ====================</span>
    
    <span class="hljs-comment">// éå† Mode ä¸­çš„æ‰€æœ‰è§‚å¯Ÿè€…</span>
    <span class="hljs-keyword">for</span> (CFIndex idx = <span class="hljs-number">0</span>; idx &lt; cnt; idx++) {
        
        <span class="hljs-comment">// è·å–ç¬¬ idx ä¸ªè§‚å¯Ÿè€…å¯¹è±¡</span>
        CFRunLoopObserverRef rlo = (CFRunLoopObserverRef)CFArrayGetValueAtIndex(rlm-&gt;_observers, idx);
        
        
        <span class="hljs-comment">// ğŸ” ä¸‰é‡è¿‡æ»¤æ¡ä»¶ï¼ˆå¿…é¡»å…¨éƒ¨æ»¡è¶³ï¼‰ï¼š</span>
            
        <span class="hljs-comment">// æ¡ä»¶1: 0 != (rlo-&gt;_activities &amp; activity)</span>
        <span class="hljs-comment">// æŒ‰ä½ä¸æ£€æŸ¥è§‚å¯Ÿè€…æ˜¯å¦å…³æ³¨å½“å‰æ´»åŠ¨çŠ¶æ€</span>
        <span class="hljs-comment">// ä¾‹å¦‚ï¼šactivity = kCFRunLoopBeforeTimers (0b10)</span>
        <span class="hljs-comment">// _activities = kCFRunLoopBeforeTimers | kCFRunLoopExit (0b10000010)</span>
        <span class="hljs-comment">// æŒ‰ä½ä¸ç»“æœ = 0b10 != 0ï¼Œæ¡ä»¶æˆç«‹</span>

        <span class="hljs-comment">// æ¡ä»¶2: __CFIsValid(rlo)</span>
        <span class="hljs-comment">// æ£€æŸ¥è§‚å¯Ÿè€…æ˜¯å¦æœ‰æ•ˆï¼ˆæœªè¢« invalidateï¼‰</span>
        <span class="hljs-comment">// è§‚å¯Ÿè€…å¯èƒ½åœ¨ä¹‹å‰çš„å›è°ƒä¸­è¢«æ ‡è®°ä¸ºæ— æ•ˆ</span>

        <span class="hljs-comment">// æ¡ä»¶3: !__CFRunLoopObserverIsFiring(rlo)</span>
        <span class="hljs-comment">// æ£€æŸ¥è§‚å¯Ÿè€…æ˜¯å¦æ­£åœ¨æ‰§è¡Œå›è°ƒ</span>
        <span class="hljs-comment">// é˜²æ­¢é‡å…¥ï¼šå¦‚æœè§‚å¯Ÿè€…çš„å›è°ƒå‡½æ•°ä¸­å†æ¬¡è§¦å‘ç›¸åŒçš„ activityï¼Œ</span>
        <span class="hljs-comment">// ä¸ä¼šé‡å¤è°ƒç”¨è¯¥è§‚å¯Ÿè€…ï¼ˆé¿å…æ— é™é€’å½’ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> != (rlo-&gt;_activities &amp; activity) &amp;&amp; __CFIsValid(rlo) &amp;&amp; !__CFRunLoopObserverIsFiring(rlo)) {
            
            <span class="hljs-comment">// âœ… æ»¡è¶³æ¡ä»¶çš„è§‚å¯Ÿè€…ï¼š</span>
            <span class="hljs-comment">// 1. æ·»åŠ åˆ°æ”¶é›†æ•°ç»„</span>
            <span class="hljs-comment">// 2. å¢åŠ å¼•ç”¨è®¡æ•°ï¼ˆCFRetainï¼‰</span>
            <span class="hljs-comment">//    - é˜²æ­¢åœ¨åç»­è§£é”æœŸé—´è¢«å…¶ä»–çº¿ç¨‹é‡Šæ”¾</span>
            <span class="hljs-comment">//    - ä¿è¯å›è°ƒæ‰§è¡Œæ—¶å¯¹è±¡ä»ç„¶æœ‰æ•ˆ</span>
            <span class="hljs-comment">// 3. obs_cnt é€’å¢</span>
            collectedObservers[obs_cnt++] = (CFRunLoopObserverRef)CFRetain(rlo);
        }
    }
    
    <span class="hljs-comment">// ==================== ç¬¬äº”éƒ¨åˆ†ï¼šè§£é”ï¼ˆå‡†å¤‡æ‰§è¡Œå›è°ƒï¼‰====================</span>
    
    <span class="hljs-comment">// ğŸ”“ è§£é” RunLoop Mode</span>
    __CFRunLoopModeUnlock(rlm);
    
    <span class="hljs-comment">// ğŸ”“ è§£é” RunLoop</span>
    __CFRunLoopUnlock(rl);
    
    <span class="hljs-comment">// âš ï¸ ä¸ºä»€ä¹ˆè¦è§£é”ï¼Ÿ</span>
    <span class="hljs-comment">// 1. é¿å…æ­»é”ï¼šè§‚å¯Ÿè€…å›è°ƒå¯èƒ½ä¼šè°ƒç”¨ RunLoop APIï¼ˆå¦‚æ·»åŠ  Timerã€Sourceï¼‰</span>
    <span class="hljs-comment">// 2. æé«˜å¹¶å‘ï¼šå…è®¸å…¶ä»–çº¿ç¨‹åœ¨å›è°ƒæ‰§è¡ŒæœŸé—´è®¿é—® RunLoop</span>
    <span class="hljs-comment">// 3. é˜²æ­¢é•¿æ—¶é—´æŒé”ï¼šå›è°ƒå¯èƒ½è€—æ—¶å¾ˆé•¿ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€UI æ›´æ–°ï¼‰</span>
    
    <span class="hljs-comment">// ğŸ›¡ï¸ å®‰å…¨æ€§ä¿è¯ï¼š</span>
    <span class="hljs-comment">// - å·²ç»é€šè¿‡ CFRetain å¢åŠ äº†è§‚å¯Ÿè€…çš„å¼•ç”¨è®¡æ•°</span>
    <span class="hljs-comment">// - collectedObservers æ•°ç»„æ˜¯å½“å‰çº¿ç¨‹çš„å±€éƒ¨å˜é‡</span>
    <span class="hljs-comment">// - å³ä½¿å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº† rlm-&gt;_observersï¼Œä¹Ÿä¸ä¼šå½±å“æœ¬æ¬¡æ‰§è¡Œ</span>
    
    <span class="hljs-comment">// ==================== ç¬¬å…­éƒ¨åˆ†ï¼šæ‰§è¡Œè§‚å¯Ÿè€…å›è°ƒ ====================</span>
    
    <span class="hljs-comment">// éå†æ”¶é›†åˆ°çš„è§‚å¯Ÿè€…ï¼ˆæ³¨æ„ï¼šä¸æ˜¯éå† rlm-&gt;_observersï¼‰</span>
    <span class="hljs-keyword">for</span> (CFIndex idx = <span class="hljs-number">0</span>; idx &lt; obs_cnt; idx++) {
        
        <span class="hljs-comment">// è·å–å½“å‰è§‚å¯Ÿè€…</span>
        CFRunLoopObserverRef rlo = collectedObservers[idx];
        
        <span class="hljs-comment">// ğŸ”’ é”å®šè§‚å¯Ÿè€…å¯¹è±¡ï¼ˆç»†ç²’åº¦é”ï¼‰</span>
        <span class="hljs-comment">// åªé”å®šå•ä¸ªè§‚å¯Ÿè€…ï¼Œä¸å½±å“å…¶ä»–è§‚å¯Ÿè€…çš„å¹¶å‘æ‰§è¡Œ</span>
        __CFRunLoopObserverLock(rlo);
        
        <span class="hljs-comment">// å†æ¬¡æ£€æŸ¥è§‚å¯Ÿè€…æ˜¯å¦æœ‰æ•ˆ</span>
        <span class="hljs-comment">// âš ï¸ ä¸ºä»€ä¹ˆè¦å†æ¬¡æ£€æŸ¥ï¼Ÿ</span>
        <span class="hljs-comment">// åœ¨è§£é”æœŸé—´ï¼Œå…¶ä»–çº¿ç¨‹å¯èƒ½å·²ç»è°ƒç”¨äº† CFRunLoopObserverInvalidate</span>
        <span class="hljs-keyword">if</span> (__CFIsValid(rlo)) {
            
            <span class="hljs-comment">// æ£€æŸ¥è§‚å¯Ÿè€…æ˜¯å¦æ˜¯ä¸€æ¬¡æ€§çš„ï¼ˆnon-repeatingï¼‰</span>
            <span class="hljs-comment">// å¦‚æœæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œæ‰§è¡Œå®Œå›è°ƒåéœ€è¦ invalidate</span>
            Boolean doInvalidate = !__CFRunLoopObserverRepeats(rlo);
            
            <span class="hljs-comment">// ğŸš© è®¾ç½®"æ­£åœ¨æ‰§è¡Œ"æ ‡å¿—ä½</span>
            <span class="hljs-comment">// é˜²æ­¢é‡å…¥ï¼ˆä¸å‰é¢çš„ !__CFRunLoopObserverIsFiring é…åˆï¼‰</span>
            __CFRunLoopObserverSetFiring(rlo);
            
            <span class="hljs-comment">// ğŸ”“ åœ¨æ‰§è¡Œå›è°ƒå‰è§£é”è§‚å¯Ÿè€…</span>
            <span class="hljs-comment">// åŸå› åŒè§£é” RunLoopï¼šé˜²æ­¢å›è°ƒä¸­è®¿é—®è§‚å¯Ÿè€…å¯¹è±¡æ—¶æ­»é”</span>
            __CFRunLoopObserverUnlock(rlo);
            
            <span class="hljs-comment">// ---------- æå–å›è°ƒä¿¡æ¯ ----------</span>
            
            <span class="hljs-comment">// æå–å›è°ƒå‡½æ•°æŒ‡é’ˆ</span>
            <span class="hljs-comment">// ç±»å‹ï¼švoid (*)(CFRunLoopObserverRef observer, CFRunLoopActivity activity, void *info)</span>
            CFRunLoopObserverCallBack callout = rlo-&gt;_callout;
            
            <span class="hljs-comment">// æå–ç”¨æˆ·ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆåˆ›å»ºè§‚å¯Ÿè€…æ—¶ä¼ å…¥çš„ï¼‰</span>
            <span class="hljs-type">void</span> *info = rlo-&gt;_context.info;
            
            <span class="hljs-comment">// ---------- è‡ªåŠ¨é‡Šæ”¾æ±  ----------</span>
            
            <span class="hljs-comment">// ğŸ”„ å¼€å§‹è‡ªåŠ¨é‡Šæ”¾æ± ï¼ˆARP = AutoRelease Poolï¼‰</span>
            <span class="hljs-comment">// åœ¨ ObjC è¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œç­‰ä»·äº @autoreleasepool {</span>
            <span class="hljs-comment">// ç”¨äºè‡ªåŠ¨ç®¡ç†å›è°ƒä¸­åˆ›å»ºçš„ä¸´æ—¶å¯¹è±¡</span>
            CFRUNLOOP_ARP_BEGIN(rl)
            
            <span class="hljs-comment">// ---------- æ€§èƒ½è¿½è¸ª ----------</span>
            
            <span class="hljs-comment">// ğŸ“Š è®°å½•æ€§èƒ½è¿½è¸ªç‚¹ï¼šå¼€å§‹è°ƒç”¨è§‚å¯Ÿè€…å›è°ƒ</span>
            cf_trace(KDEBUG_EVENT_CFRL_IS_CALLING_OBSERVER | DBG_FUNC_START, callout, rlo, activity, info);
            
            
            <span class="hljs-comment">// ---------- ğŸ¯ æ ¸å¿ƒå›è°ƒæ‰§è¡Œ ----------</span>
            
            <span class="hljs-comment">// âš¡ æ‰§è¡Œè§‚å¯Ÿè€…çš„å›è°ƒå‡½æ•°</span>
            <span class="hljs-comment">// å®å®šä¹‰é€šå¸¸æ˜¯ï¼šcallout(rlo, activity, info);</span>
            <span class="hljs-comment">// è¿™æ˜¯æ•´ä¸ªå‡½æ•°çš„æ ¸å¿ƒç›®çš„ï¼</span>
            
            <span class="hljs-comment">// â° å›è°ƒå‡½æ•°çš„å‚æ•°ï¼š</span>
            <span class="hljs-comment">// - rlo: è§‚å¯Ÿè€…å¯¹è±¡æœ¬èº«</span>
            <span class="hljs-comment">// - activity: å½“å‰ RunLoop æ´»åŠ¨çŠ¶æ€ï¼ˆå¦‚ kCFRunLoopBeforeTimersï¼‰</span>
            <span class="hljs-comment">// - info: ç”¨æˆ·è‡ªå®šä¹‰çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</span>
            
            <span class="hljs-comment">// âš ï¸ å›è°ƒä¸­å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…ï¼š</span>
            <span class="hljs-comment">// - UI æ›´æ–°ï¼ˆå¦‚ CA::Transaction::observer_callbackï¼‰</span>
            <span class="hljs-comment">// - æ€§èƒ½ç›‘æ§ï¼ˆå¦‚ FPS æ£€æµ‹ï¼‰</span>
            <span class="hljs-comment">// - å†…å­˜ç®¡ç†ï¼ˆå¦‚æ¸…ç†ç¼“å­˜ï¼‰</span>
            <span class="hljs-comment">// - ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚çŠ¶æ€åŒæ­¥ï¼‰</span>
            <span class="hljs-comment">// - å†æ¬¡æ“ä½œ RunLoopï¼ˆå¦‚æ·»åŠ /ç§»é™¤ Timerï¼‰</span>
            __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__(callout, rlo, activity, info);
            
            
            <span class="hljs-comment">// ---------- æ€§èƒ½è¿½è¸ªç»“æŸ ----------</span>
            
            <span class="hljs-comment">// ğŸ“Š è®°å½•æ€§èƒ½è¿½è¸ªç‚¹ï¼šç»“æŸè°ƒç”¨è§‚å¯Ÿè€…å›è°ƒ</span>
            <span class="hljs-comment">// å¯é€šè¿‡ end - start è®¡ç®—å›è°ƒè€—æ—¶</span>
            cf_trace(KDEBUG_EVENT_CFRL_IS_CALLING_OBSERVER | DBG_FUNC_END, callout, rlo, activity, info);
            
            <span class="hljs-comment">// ---------- è‡ªåŠ¨é‡Šæ”¾æ± ç»“æŸ ----------</span>
            
            <span class="hljs-comment">// ğŸ”„ ç»“æŸè‡ªåŠ¨é‡Šæ”¾æ± </span>
            <span class="hljs-comment">// é‡Šæ”¾å›è°ƒä¸­åˆ›å»ºçš„æ‰€æœ‰ autorelease å¯¹è±¡</span>
            CFRUNLOOP_ARP_END()
           
            
            <span class="hljs-comment">// ---------- å¤„ç†ä¸€æ¬¡æ€§è§‚å¯Ÿè€… ----------</span>
            
            <span class="hljs-comment">// å¦‚æœæ˜¯ä¸€æ¬¡æ€§è§‚å¯Ÿè€…ï¼ˆnon-repeatingï¼‰</span>
            <span class="hljs-keyword">if</span> (doInvalidate) {
                <span class="hljs-comment">// âŒ ä½¿è§‚å¯Ÿè€…å¤±æ•ˆ</span>
                <span class="hljs-comment">// ä¼šä» RunLoop ä¸­ç§»é™¤ï¼Œå¹¶æ ‡è®°ä¸ºæ— æ•ˆ</span>
                <span class="hljs-comment">// åç»­ä¸ä¼šå†è§¦å‘æ­¤è§‚å¯Ÿè€…</span>
                CFRunLoopObserverInvalidate(rlo);
            }
            
            <span class="hljs-comment">// ğŸš© æ¸…é™¤"æ­£åœ¨æ‰§è¡Œ"æ ‡å¿—ä½</span>
            <span class="hljs-comment">// å…è®¸æ­¤è§‚å¯Ÿè€…åœ¨ä¸‹æ¬¡ activity æ—¶å†æ¬¡è¢«è§¦å‘</span>
            __CFRunLoopObserverUnsetFiring(rlo);
            
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è§‚å¯Ÿè€…åœ¨è§£é”æœŸé—´å·²è¢«å…¶ä»–çº¿ç¨‹ invalidate</span>
            
            <span class="hljs-comment">// ğŸ”“ è§£é”è§‚å¯Ÿè€…ï¼ˆå‰é¢å·²åŠ é”ï¼‰</span>
            <span class="hljs-comment">// è·³è¿‡å›è°ƒæ‰§è¡Œ</span>
            __CFRunLoopObserverUnlock(rlo);
        }
        
        <span class="hljs-comment">// ğŸ“‰ é‡Šæ”¾å¼•ç”¨è®¡æ•°ï¼ˆå¯¹åº”å‰é¢çš„ CFRetainï¼‰</span>
        <span class="hljs-comment">// å¦‚æœå¼•ç”¨è®¡æ•°å½’é›¶ï¼Œè§‚å¯Ÿè€…å¯¹è±¡ä¼šè¢«é”€æ¯</span>
        CFRelease(rlo);
    }
    
    <span class="hljs-comment">// ==================== ç¬¬ä¸ƒéƒ¨åˆ†ï¼šé‡æ–°åŠ é” ====================</span>
    
    <span class="hljs-comment">// ğŸ”’ é‡æ–°é”å®š RunLoop</span>
    __CFRunLoopLock(rl);
    
    <span class="hljs-comment">// ğŸ”’ é‡æ–°é”å®š RunLoop Mode</span>
    __CFRunLoopModeLock(rlm);
    
    <span class="hljs-comment">// âœ… æ¢å¤å‡½æ•°å…¥å£æ—¶çš„é”çŠ¶æ€</span>
    <span class="hljs-comment">// æ»¡è¶³å‡½æ•°ç­¾åä¸­çš„çº¦å®šï¼š"rl is locked, rlm is locked on entrance and exit"</span>

    <span class="hljs-comment">// ==================== ç¬¬å…«éƒ¨åˆ†ï¼šæ¸…ç†èµ„æº ====================</span>
    
    <span class="hljs-comment">// ğŸ—‘ï¸ é‡Šæ”¾å †å†…å­˜ï¼ˆå¦‚æœä½¿ç”¨äº† mallocï¼‰</span>
    <span class="hljs-comment">// - å¦‚æœ collectedObservers æŒ‡å‘æ ˆç¼“å†²åŒºï¼ˆbufferï¼‰ï¼Œæ— éœ€é‡Šæ”¾</span>
    <span class="hljs-comment">// - å¦‚æœ collectedObservers æŒ‡å‘å †å†…å­˜ï¼ˆmallocï¼‰ï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾</span>
    <span class="hljs-comment">// é˜²æ­¢å†…å­˜æ³„æ¼</span>
    <span class="hljs-keyword">if</span> (collectedObservers != buffer) <span class="hljs-built_in">free</span>(collectedObservers);
    
    <span class="hljs-comment">// ==================== ç¬¬ä¹éƒ¨åˆ†ï¼šç»“æŸæ€§èƒ½è¿½è¸ª ====================</span>
    
    <span class="hljs-comment">// ğŸ“Š è®°å½•æ€§èƒ½è¿½è¸ªç‚¹ï¼šå®Œæˆ observers æ‰§è¡Œ</span>
    cf_trace(KDEBUG_EVENT_CFRL_IS_DOING_OBSERVERS | DBG_FUNC_END, rl, rlm, activity, <span class="hljs-number">0</span>);
}
</code></pre>
<h3 data-id="heading-7">å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-8">1. UI æ¸²æŸ“ï¼ˆCore Animationï¼‰</h4>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// CA åœ¨ kCFRunLoopBeforeWaiting æ—¶æäº¤æ¸²æŸ“äº‹åŠ¡</span>
<span class="hljs-built_in">CFRunLoopObserverRef</span> observer = <span class="hljs-built_in">CFRunLoopObserverCreate</span>(
    kCFAllocatorDefault, 
    kCFRunLoopBeforeWaiting | kCFRunLoopExit,  <span class="hljs-comment">// ç›‘å¬è¿™ä¸¤ä¸ªçŠ¶æ€</span>
    <span class="hljs-literal">YES</span>,  <span class="hljs-comment">// é‡å¤è§¦å‘</span>
    <span class="hljs-number">2000000</span>,  <span class="hljs-comment">// order = 2000000ï¼ˆåœ¨å¤§å¤šæ•° observer ä¹‹åï¼‰</span>
    &amp;<span class="hljs-built_in">CA_Transaction_observerCallback</span>,  <span class="hljs-comment">// å›è°ƒå‡½æ•°</span>
    <span class="hljs-literal">NULL</span>
);
</code></pre>
<h4 data-id="heading-9">2. æ€§èƒ½ç›‘æ§ï¼ˆFPS æ£€æµ‹ï¼‰</h4>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// ç›‘æ§ä¸»çº¿ç¨‹ RunLoop çš„å¡é¡¿</span>
<span class="hljs-built_in">CFRunLoopObserverRef</span> observer = <span class="hljs-built_in">CFRunLoopObserverCreate</span>(
    kCFAllocatorDefault,
    kCFRunLoopAllActivities,  <span class="hljs-comment">// ç›‘å¬æ‰€æœ‰æ´»åŠ¨</span>
    <span class="hljs-literal">YES</span>,
    <span class="hljs-number">0</span>,
    &amp;performanceMonitorCallback,
    <span class="hljs-literal">NULL</span>
);

<span class="hljs-type">void</span> performanceMonitorCallback(<span class="hljs-built_in">CFRunLoopObserverRef</span> observer, 
                                <span class="hljs-built_in">CFRunLoopActivity</span> activity, 
                                <span class="hljs-type">void</span> *info) {
    <span class="hljs-comment">// è®°å½•æ—¶é—´æˆ³ï¼Œè®¡ç®—ä¸¤æ¬¡å›è°ƒä¹‹é—´çš„é—´éš”</span>
    <span class="hljs-comment">// å¦‚æœé—´éš”è¿‡é•¿ï¼Œè¯´æ˜å‘ç”Ÿäº†å¡é¡¿</span>
}
</code></pre>
<h4 data-id="heading-10">3. å†…å­˜ç®¡ç†ï¼ˆè‡ªåŠ¨é‡Šæ”¾æ± ï¼‰</h4>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// NSRunLoop åœ¨æ¯æ¬¡å¾ªç¯å‰ååˆ›å»º/é”€æ¯è‡ªåŠ¨é‡Šæ”¾æ± </span>
<span class="hljs-built_in">CFRunLoopObserverRef</span> observer = <span class="hljs-built_in">CFRunLoopObserverCreate</span>(
    kCFAllocatorDefault,
    kCFRunLoopEntry | kCFRunLoopBeforeWaiting | kCFRunLoopExit,
    <span class="hljs-literal">YES</span>,
    <span class="hljs-number">-2147483647</span>,  <span class="hljs-comment">// æé«˜ä¼˜å…ˆçº§ï¼ˆè´Ÿå€¼ï¼‰</span>
    &amp;autoreleasePoolCallback,
    <span class="hljs-literal">NULL</span>
);
</code></pre>
<h3 data-id="heading-11">æ€»ç»“</h3>
<p>è¿™ä¸ªå‡½æ•°æ˜¯ç†è§£ RunLoop æœºåˆ¶å’Œ iOS äº‹ä»¶å¾ªç¯çš„å…³é”®ï¼Œä¹Ÿæ˜¯è®¸å¤šé«˜çº§ç‰¹æ€§ï¼ˆå¦‚ UI æ¸²æŸ“ã€æ€§èƒ½ç›‘æ§ï¼‰çš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§å±è‡ªé€‚åº”ç»ˆææ–¹æ¡ˆï¼šåŒå‰‘åˆç’§ï¼JS+CSSååŒä½œæˆ˜å®ç°å®Œç¾é€‚é…]]></title>    <link>https://juejin.cn/post/7598899986856640518</link>    <guid>https://juejin.cn/post/7598899986856640518</guid>    <pubDate>2026-01-26T03:25:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598899986856640518" data-draft-id="7598830215259406372" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§å±è‡ªé€‚åº”ç»ˆææ–¹æ¡ˆï¼šåŒå‰‘åˆç’§ï¼JS+CSSååŒä½œæˆ˜å®ç°å®Œç¾é€‚é…"/> <meta itemprop="keywords" content="å‰ç«¯,æ•°æ®å¯è§†åŒ–"/> <meta itemprop="datePublished" content="2026-01-26T03:25:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°å–„åå¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2323746686771772"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§å±è‡ªé€‚åº”ç»ˆææ–¹æ¡ˆï¼šåŒå‰‘åˆç’§ï¼JS+CSSååŒä½œæˆ˜å®ç°å®Œç¾é€‚é…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2323746686771772/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°å–„åå¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:25:48.000Z" title="Mon Jan 26 2026 03:25:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šå¤§å±é€‚é…çš„ç—›ç‚¹ä¸ç ´å±€ä¹‹é“</h2>
<p>åœ¨æ•°æ®å¯è§†åŒ–å¤§å±é¡¹ç›®ä¸­ï¼Œå¼€å‘è€…å¸¸å¸¸é¢ä¸´è¿™æ ·çš„å›°å¢ƒï¼š<strong>åŒæ ·çš„è®¾è®¡ç¨¿ï¼Œåœ¨1920Ã—1080å±å¹•ä¸Šå®Œç¾æ˜¾ç¤ºï¼Œåˆ°äº†3840Ã—2160æˆ–1366Ã—768çš„å±å¹•ä¸Šå´é¢ç›®å…¨é</strong>ã€‚æ–‡å­—æº¢å‡ºã€å¸ƒå±€é”™ä¹±ã€å›¾è¡¨å˜å½¢...è¿™äº›é—®é¢˜çš„æ ¹æºåœ¨äºä¼ ç»Ÿçš„pxå•ä½æ— æ³•é€‚åº”å¤šå˜çš„å±å¹•ç¯å¢ƒã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°†åˆ†äº«ä¸€ç§<strong>JS+CSSååŒä½œæˆ˜çš„å¤§å±è‡ªé€‚åº”æ–¹æ¡ˆ</strong>ï¼Œå®ƒä¸ä»…è§£å†³äº†é€‚é…é—®é¢˜ï¼Œè¿˜ä¿æŒäº†ä»£ç çš„ä¼˜é›…ä¸å¯ç»´æŠ¤æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1b56065bb3f4d40b49f7dacce56d974~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5bCP5ZaE5ZCO5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770002748&amp;x-signature=EGKSsHPgvUEZn%2FMhJHeNCsb0Bp4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ã€æ–¹æ¡ˆæ ¸å¿ƒæ€æƒ³ï¼šè§†çª—å•ä½+åŠ¨æ€è®¡ç®—</h2>
<h3 data-id="heading-2">1.1 ä¸ºä»€ä¹ˆé€‰æ‹©vw/vhï¼Ÿ</h3>
<p>ä¼ ç»Ÿæ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨remã€ç™¾åˆ†æ¯”æˆ–åª’ä½“æŸ¥è¯¢æ¥é€‚é…ä¸åŒå±å¹•ã€‚ä½†åœ¨å¤§å±åœºæ™¯ä¸‹ï¼Œè¿™äº›æ–¹æ¡ˆå„æœ‰å±€é™ï¼š</p>
<ul>
<li><strong>rem</strong>ï¼šä¾èµ–æ ¹å­—ä½“å¤§å°ï¼Œå¤æ‚åœºæ™¯è®¡ç®—ç¹ç</li>
<li><strong>ç™¾åˆ†æ¯”</strong>ï¼šä¾èµ–çˆ¶å…ƒç´ ï¼Œå¤šå±‚åµŒå¥—æ—¶éš¾ä»¥ç»´æŠ¤</li>
<li><strong>åª’ä½“æŸ¥è¯¢</strong>ï¼šæ–­ç‚¹å›ºå®šï¼Œæ— æ³•å®ç°è¿ç»­è‡ªé€‚åº”</li>
</ul>
<p><strong>vw/vhå•ä½</strong>åŸºäºè§†çª—å°ºå¯¸ï¼Œå¤©ç”Ÿé€‚åˆå¤§å±é€‚é…ï¼š</p>
<ul>
<li><code>1vw</code>Â = è§†çª—å®½åº¦çš„1%</li>
<li><code>1vh</code>Â = è§†çª—é«˜åº¦çš„1%</li>
<li>å®Œå…¨ç‹¬ç«‹äºDOMç»“æ„ï¼Œè®¡ç®—ç®€å•ç›´è§‚</li>
</ul>
<h3 data-id="heading-3">1.2 æˆ‘ä»¬çš„æ··åˆæ–¹æ¡ˆä¼˜åŠ¿</h3>
<pre><code class="hljs language-text" lang="text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         è®¾è®¡ç¨¿(1920Ã—1080)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CSSå‡½æ•°ï¼šé™æ€è½¬æ¢(å¼€å‘æ—¶)            â”‚
â”‚  JSå·¥å…·ï¼šåŠ¨æ€è®¡ç®—(è¿è¡Œæ—¶)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     å®Œç¾é€‚é…å„ç§å±å¹•å°ºå¯¸              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-4">äºŒã€CSSæ–¹æ¡ˆï¼šå¼€å‘æ—¶çš„ä¼˜é›…è½¬æ¢</h2>
<h3 data-id="heading-5">2.1 æ ¸å¿ƒSCSSå‡½æ•°å®ç°</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// _variables.scss - å®šä¹‰è®¾è®¡ç¨¿åŸºå‡†</span>
<span class="hljs-variable">$design-width</span>: <span class="hljs-number">1920</span>;
<span class="hljs-variable">$design-height</span>: <span class="hljs-number">1080</span>;

<span class="hljs-comment">// _mixins.scss - è½¬æ¢å‡½æ•°</span>
<span class="hljs-keyword">@use</span> <span class="hljs-string">'sass:math'</span>;

<span class="hljs-comment">// pxè½¬vwï¼šæ°´å¹³æ–¹å‘é€‚é…</span>
<span class="hljs-keyword">@function</span> vw(<span class="hljs-variable">$px</span>) {
  <span class="hljs-keyword">@if</span> (unitless(<span class="hljs-variable">$px</span>)) {
    <span class="hljs-variable">$px</span>: <span class="hljs-variable">$px</span> * <span class="hljs-number">1px</span>;
  }
  <span class="hljs-keyword">@return</span> math.div(<span class="hljs-variable">$px</span>, <span class="hljs-variable">$design-width</span>) * <span class="hljs-number">100vw</span>;
}

<span class="hljs-comment">// pxè½¬vhï¼šå‚ç›´æ–¹å‘é€‚é…</span>
<span class="hljs-keyword">@function</span> vh(<span class="hljs-variable">$px</span>) {
  <span class="hljs-keyword">@if</span> (unitless(<span class="hljs-variable">$px</span>)) {
    <span class="hljs-variable">$px</span>: <span class="hljs-variable">$px</span> * <span class="hljs-number">1px</span>;
  }
  <span class="hljs-keyword">@return</span> math.div(<span class="hljs-variable">$px</span>, <span class="hljs-variable">$design-height</span>) * <span class="hljs-number">100vh</span>;
}

<span class="hljs-comment">// åŒå‘é€‚é…ï¼šåŒæ—¶å¤„ç†å®½é«˜</span>
<span class="hljs-keyword">@function</span> size(<span class="hljs-variable">$width</span>, <span class="hljs-variable">$height</span>: null) {
  <span class="hljs-keyword">@if</span> <span class="hljs-variable">$height</span> == null {
    <span class="hljs-keyword">@return</span> vw(<span class="hljs-variable">$width</span>);
  }
  <span class="hljs-keyword">@return</span> vw(<span class="hljs-variable">$width</span>) vh(<span class="hljs-variable">$height</span>);
}
</code></pre>
<h3 data-id="heading-6">2.2 å®é™…åº”ç”¨åœºæ™¯</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä»ªè¡¨ç›˜å®¹å™¨</span>
<span class="hljs-selector-class">.dashboard</span> {
  <span class="hljs-comment">// ä½¿ç”¨æ··åˆå‡½æ•°</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">vw</span>(<span class="hljs-number">1800</span>); <span class="hljs-comment">// 1800px â†’ 93.75vw</span>
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">950</span>); <span class="hljs-comment">// 950px â†’ 87.96vh</span>
  <span class="hljs-attribute">margin</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">20</span>) <span class="hljs-built_in">vw</span>(<span class="hljs-number">60</span>);
  
  <span class="hljs-comment">// å¤æ‚å¸ƒå±€ç¤ºä¾‹</span>
  <span class="hljs-selector-class">.header</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">80</span>);
    <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">15</span>) <span class="hljs-built_in">vw</span>(<span class="hljs-number">30</span>);
    <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">24</span>); <span class="hljs-comment">// å­—ä½“ä¹Ÿè‡ªé€‚åº”ï¼</span>
  }
  
  <span class="hljs-selector-class">.chart-container</span> {
    <span class="hljs-comment">// åŒæ—¶è®¾ç½®å®½é«˜</span>
    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">vw</span>(<span class="hljs-number">850</span>);
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">600</span>);
    
    <span class="hljs-comment">// è¾¹æ¡†å’Œåœ†è§’ä¹Ÿè‡ªé€‚åº”</span>
    <span class="hljs-attribute">border</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">2</span>) solid <span class="hljs-number">#3498db</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">10</span>);
  }
}
</code></pre>
<h3 data-id="heading-7">2.3 å¯è§†åŒ–è½¬æ¢è¿‡ç¨‹</h3>
<pre><code class="hljs language-text" lang="text">è®¾è®¡ç¨¿å°ºå¯¸          å®é™…å±å¹•å°ºå¯¸
  1920px     â†’      2560px
  â†“è½¬æ¢                â†“æ˜¾ç¤º
  vw(200)    â†’      10.42vw = 266.67px
  (200/1920*100)    (2560Ã—10.42%)
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€JSæ–¹æ¡ˆï¼šè¿è¡Œæ—¶çš„çµæ´»è®¡ç®—</h2>
<h3 data-id="heading-9">3.1 æ ¸å¿ƒå·¥å…·ç±»å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// style-utils.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DESIGN_WIDTH</span> = <span class="hljs-number">1920</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DESIGN_HEIGHT</span> = <span class="hljs-number">1080</span>;

<span class="hljs-comment">/**
 * å¤§å±è‡ªé€‚åº”å·¥å…·ç±»
 * é€‚ç”¨äºåŠ¨æ€è®¡ç®—åœºæ™¯
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ScreenAdapter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">designWidth</span> = <span class="hljs-variable constant_">DESIGN_WIDTH</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">designHeight</span> = <span class="hljs-variable constant_">DESIGN_HEIGHT</span>;
  }
  
  <span class="hljs-comment">/**
   * pxè½¬vw
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">px</span> - è®¾è®¡ç¨¿åƒç´ å€¼
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} - vwå•ä½å­—ç¬¦ä¸²
   */</span>
  <span class="hljs-title function_">px2vw</span>(<span class="hljs-params">px</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${(px / <span class="hljs-variable language_">this</span>.designWidth) * <span class="hljs-number">100</span>}</span>vw`</span>;
  }
  
  <span class="hljs-comment">/**
   * pxè½¬vh
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">px</span> - è®¾è®¡ç¨¿åƒç´ å€¼
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} - vhå•ä½å­—ç¬¦ä¸²
   */</span>
  <span class="hljs-title function_">px2vh</span>(<span class="hljs-params">px</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${(px / <span class="hljs-variable language_">this</span>.designHeight) * <span class="hljs-number">100</span>}</span>vh`</span>;
  }
  
  <span class="hljs-comment">/**
   * æ‰¹é‡è®¾ç½®æ ·å¼ï¼ˆé€‚ç”¨äºåŠ¨æ€åˆ›å»ºçš„å…ƒç´ ï¼‰
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">element</span> - DOMå…ƒç´ 
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">styles</span> - æ ·å¼å¯¹è±¡ {width: 100, height: 200}
   */</span>
  <span class="hljs-title function_">applyStyles</span>(<span class="hljs-params">element, styles</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(styles).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> value = styles[key];
      
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'number'</span>) {
        <span class="hljs-comment">// æ ¹æ®æ ·å¼ååˆ¤æ–­ä½¿ç”¨vwè¿˜æ˜¯vh</span>
        <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'width'</span>) || key.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'left'</span>) || key.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'right'</span>)) {
          element.<span class="hljs-property">style</span>[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">px2vw</span>(value);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'height'</span>) || key.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'top'</span>) || key.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'bottom'</span>)) {
          element.<span class="hljs-property">style</span>[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">px2vh</span>(value);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// å­—ä½“ã€è¾¹æ¡†ç­‰ç‰¹æ®Šå¤„ç†</span>
          element.<span class="hljs-property">style</span>[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">px2vh</span>(value);
        }
      }
    });
  }
  
  <span class="hljs-comment">/**
   * ç›‘å¬çª—å£å˜åŒ–ï¼Œå®æ—¶è°ƒæ•´
   */</span>
  <span class="hljs-title function_">initResizeObserver</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> resizeTimer;
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleResize</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-built_in">clearTimeout</span>(resizeTimer);
      resizeTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onResize</span>();
      }, <span class="hljs-number">200</span>);
    };
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
  }
  
  <span class="hljs-title function_">onResize</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œå¤„ç†ç‰¹æ®Šé€»è¾‘</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å±å¹•å°ºå¯¸å˜åŒ–ï¼Œå½“å‰è§†çª—:'</span>, 
      <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.innerWidth}</span>Ã—<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.innerHeight}</span>`</span>);
  }
}

<span class="hljs-comment">// å¯¼å‡ºå•ä¾‹å®ä¾‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScreenAdapter</span>();
</code></pre>
<h3 data-id="heading-10">3.2 Vue/Reactä¸­çš„å®é™…åº”ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vueç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> styleUtil <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/style-utils'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">chartStyle</span>: {
        <span class="hljs-attr">width</span>: <span class="hljs-number">400</span>,
        <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,
        <span class="hljs-attr">marginTop</span>: <span class="hljs-number">20</span>
      }
    };
  },
  
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åŠ¨æ€åˆ›å»ºå…ƒç´ å¹¶åº”ç”¨æ ·å¼</span>
    <span class="hljs-keyword">const</span> dynamicElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    styleUtil.<span class="hljs-title function_">applyStyles</span>(dynamicElement, {
      <span class="hljs-attr">width</span>: <span class="hljs-number">300</span>,
      <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,
      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
      <span class="hljs-attr">padding</span>: <span class="hljs-number">20</span>
    });
    
    <span class="hljs-comment">// æˆ–è€…ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">chartStyle</span>.<span class="hljs-property">width</span> = styleUtil.<span class="hljs-title function_">px2vw</span>(<span class="hljs-number">400</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">chartStyle</span>.<span class="hljs-property">height</span> = styleUtil.<span class="hljs-title function_">px2vh</span>(<span class="hljs-number">300</span>);
  }
};
</code></pre>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// Reactç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> styleUtil <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/style-utils'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ResponsiveChart</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> chartRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (chartRef.<span class="hljs-property">current</span>) {
      <span class="hljs-comment">// åº”ç”¨åŠ¨æ€æ ·å¼</span>
      styleUtil.<span class="hljs-title function_">applyStyles</span>(chartRef.<span class="hljs-property">current</span>, {
        <span class="hljs-attr">width</span>: <span class="hljs-number">800</span>,
        <span class="hljs-attr">height</span>: <span class="hljs-number">500</span>,
        <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#2c3e50'</span>
      });
    }
    
    <span class="hljs-comment">// åˆå§‹åŒ–çª—å£ç›‘å¬</span>
    styleUtil.<span class="hljs-title function_">initResizeObserver</span>();
  }, []);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{chartRef}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"chart-container"</span>&gt;</span>
      {/* å›¾è¡¨å†…å®¹ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-11">å››ã€æœ€ä½³å®è·µï¼šä½•æ—¶ç”¨CSSï¼Ÿä½•æ—¶ç”¨JSï¼Ÿ</h2>
<h3 data-id="heading-12">4.1 CSSæ–¹æ¡ˆé€‚ç”¨åœºæ™¯ âœ…</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âœ… æ¨èä½¿ç”¨CSSçš„åœºæ™¯ï¼š</span>

<span class="hljs-comment">// 1. é™æ€å¸ƒå±€</span>
<span class="hljs-selector-class">.layout-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">vw</span>(<span class="hljs-number">1800</span>);
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">900</span>);
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">20</span>) <span class="hljs-built_in">vw</span>(<span class="hljs-number">30</span>);
}

<span class="hljs-comment">// 2. å¸¸è§„ç»„ä»¶</span>
<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">vw</span>(<span class="hljs-number">300</span>);
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">200</span>);
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">14</span>);
  
  <span class="hljs-comment">// ä¼ªå…ƒç´ ä¹Ÿèƒ½å®Œç¾é€‚é…</span>
  &amp;<span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">vw</span>(<span class="hljs-number">20</span>);
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">vh</span>(<span class="hljs-number">20</span>);
  }
}

<span class="hljs-comment">// 3. åª’ä½“æŸ¥è¯¢ä¸­çš„è‡ªé€‚åº”</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-aspect-ratio</span>: <span class="hljs-number">16</span>/<span class="hljs-number">9</span>) {
  <span class="hljs-selector-class">.sidebar</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">vw</span>(<span class="hljs-number">200</span>);
    <span class="hljs-comment">// æ¨ªå±ç‰¹æ®Šå¤„ç†</span>
  }
}
</code></pre>
<h3 data-id="heading-13">4.2 JSæ–¹æ¡ˆé€‚ç”¨åœºæ™¯ âœ…</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¨èä½¿ç”¨JSçš„åœºæ™¯ï¼š</span>

<span class="hljs-comment">// 1. åŠ¨æ€ç”Ÿæˆå†…å®¹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createTooltip</span>(<span class="hljs-params">content, x, y</span>) {
  <span class="hljs-keyword">const</span> tooltip = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  
  styleUtil.<span class="hljs-title function_">applyStyles</span>(tooltip, {
    <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
    <span class="hljs-attr">left</span>: x, <span class="hljs-comment">// åŠ¨æ€åæ ‡</span>
    <span class="hljs-attr">top</span>: y,
    <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-string">'auto'</span>,
    <span class="hljs-attr">padding</span>: <span class="hljs-number">12</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>
  });
  
  <span class="hljs-keyword">return</span> tooltip;
}

<span class="hljs-comment">// 2. ç¬¬ä¸‰æ–¹åº“é›†æˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">initECharts</span>(<span class="hljs-params">domElement</span>) {
  <span class="hljs-keyword">const</span> chart = echarts.<span class="hljs-title function_">init</span>(domElement);
  
  <span class="hljs-comment">// ç›‘å¬resize</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ä½¿ç”¨JSè®¡ç®—çš„æ–°å°ºå¯¸</span>
    chart.<span class="hljs-title function_">resize</span>({
      <span class="hljs-attr">width</span>: styleUtil.<span class="hljs-title function_">px2vw</span>(<span class="hljs-number">800</span>),
      <span class="hljs-attr">height</span>: styleUtil.<span class="hljs-title function_">px2vh</span>(<span class="hljs-number">500</span>)
    });
  });
}

<span class="hljs-comment">// 3. å¤æ‚äº¤äº’è®¡ç®—</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculatePosition</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-comment">// åŸºäºé¼ æ ‡ä½ç½®åŠ¨æ€è®¡ç®—</span>
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">left</span>: styleUtil.<span class="hljs-title function_">px2vw</span>(event.<span class="hljs-property">clientX</span>),
    <span class="hljs-attr">top</span>: styleUtil.<span class="hljs-title function_">px2vh</span>(event.<span class="hljs-property">clientY</span>)
  };
}
</code></pre>
<h3 data-id="heading-14">4.3 æ··åˆä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- CSSå¤„ç†é™æ€å¸ƒå±€ --&gt;
  &lt;div class="dashboard" :style="dynamicStyles"&gt;
    &lt;!-- JSå¤„ç†åŠ¨æ€å°ºå¯¸ --&gt;
    &lt;div class="dynamic-chart" ref="chart"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import styleUtil from '@/utils/style-utils';

export default {
  data() {
    return {
      // JSè®¡ç®—æ ·å¼
      dynamicStyles: {
        '--chart-width': styleUtil.px2vw(800),
        '--chart-height': styleUtil.px2vh(500)
      }
    };
  },
  
  mounted() {
    // JSå¤„ç†å¤æ‚é€»è¾‘
    this.initDynamicContent();
  },
  
  methods: {
    initDynamicContent() {
      // åŠ¨æ€å†…å®¹ä½¿ç”¨JSè®¡ç®—
      styleUtil.applyStyles(this.$refs.chart, {
        width: this.getChartWidth(),
        height: this.getChartHeight()
      });
    }
  }
};
&lt;/script&gt;

&lt;style lang="scss"&gt;
.dashboard {
  // CSSå¤„ç†å¸¸è§„æ ·å¼
  width: vw(1800);
  height: vh(900);
  
  .dynamic-chart {
    // ä½¿ç”¨CSSå˜é‡ï¼ˆç”±JSè®¾ç½®ï¼‰
    width: var(--chart-width);
    height: var(--chart-height);
    
    // å…¶ä»–CSSå±æ€§
    border-radius: vh(10);
    background: linear-gradient(
      45deg,
      #3498db,
      #2ecc71
    );
  }
}
&lt;/style&gt;
</code></pre>
<h2 data-id="heading-15">äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-16">5.1 æ€§èƒ½å¯¹æ¯”</h3>

































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ¸²æŸ“æ€§èƒ½</th><th>çµæ´»æ€§</th><th>ç»´æŠ¤æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>çº¯CSS</td><td>â­â­â­â­â­</td><td>â­â­â­</td><td>â­â­â­â­</td><td>é™æ€å¸ƒå±€ã€å¸¸è§„ç»„ä»¶</td></tr><tr><td>çº¯JS</td><td>â­â­â­</td><td>â­â­â­â­â­</td><td>â­â­â­</td><td>åŠ¨æ€å†…å®¹ã€å¤æ‚äº¤äº’</td></tr><tr><td>æ··åˆæ–¹æ¡ˆ</td><td>â­â­â­â­</td><td>â­â­â­â­</td><td>â­â­â­â­</td><td>å¤§å‹é¡¹ç›®ã€ç»¼åˆéœ€æ±‚</td></tr></tbody></table>
<h3 data-id="heading-17">5.2 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p><strong>é—®é¢˜1ï¼šå­—ä½“è¿‡å°/è¿‡å¤§</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šè®¾ç½®æœ€å°/æœ€å¤§å­—ä½“</span>
<span class="hljs-keyword">@function</span> responsive-font(<span class="hljs-variable">$min</span>, <span class="hljs-variable">$max</span>, <span class="hljs-variable">$px</span>) {
  <span class="hljs-variable">$vw</span>: math.<span class="hljs-built_in">div</span>(<span class="hljs-variable">$px</span>, <span class="hljs-variable">$design-width</span>) * <span class="hljs-number">100</span>;
  <span class="hljs-keyword">@return</span> clamp(#{<span class="hljs-variable">$min</span>}px, #{<span class="hljs-variable">$vw</span>}vw, #{<span class="hljs-variable">$max</span>}px);
}

<span class="hljs-selector-class">.title</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">responsive-font</span>(<span class="hljs-number">16</span>, <span class="hljs-number">32</span>, <span class="hljs-number">24</span>);
}
</code></pre>
<p><strong>é—®é¢˜2ï¼šå›¾ç‰‡å˜å½¢</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šä¿æŒå®½é«˜æ¯”</span>
<span class="hljs-selector-class">.responsive-image</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">vw</span>(<span class="hljs-number">400</span>);
  <span class="hljs-attribute">height</span>: auto; <span class="hljs-comment">// é«˜åº¦è‡ªé€‚åº”</span>
  aspect-ratio: <span class="hljs-number">16</span>/<span class="hljs-number">9</span>; <span class="hljs-comment">// æˆ–è€…è®¾ç½®å®½é«˜æ¯”</span>
}
</code></pre>
<p><strong>é—®é¢˜3ï¼šæç«¯å±å¹•é€‚é…</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šJSå…œåº•é€»è¾‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ScreenAdapter</span> {
  <span class="hljs-title function_">px2vw</span>(<span class="hljs-params">px</span>) {
    <span class="hljs-keyword">const</span> vwValue = (px / <span class="hljs-variable language_">this</span>.<span class="hljs-property">designWidth</span>) * <span class="hljs-number">100</span>;
    
    <span class="hljs-comment">// è¶…å¤§å±å¹•é™åˆ¶æœ€å¤§å°ºå¯¸</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> &gt; <span class="hljs-number">3840</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.min(vwValue, <span class="hljs-number">80</span>)}</span>vw`</span>;
    }
    
    <span class="hljs-comment">// è¶…å°å±å¹•é™åˆ¶æœ€å°å°ºå¯¸</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> &lt; <span class="hljs-number">1366</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.max(vwValue, <span class="hljs-number">5</span>)}</span>vw`</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${vwValue}</span>vw`</span>;
  }
}
</code></pre>
<h2 data-id="heading-18">å…­ã€å®Œæ•´ç¤ºä¾‹ï¼šæ•°æ®å¤§å±é¡¹ç›®</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d648adb748b54570b91e6ceb6da97f55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5bCP5ZaE5ZCO5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770002748&amp;x-signature=CSVgvKuJeoCIVyPpCInYeNJ%2FSfY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-19">ç»“è¯­ï¼šé€‰æ‹©åˆé€‚çš„æ­¦å™¨</h2>
<p>CSSæ–¹æ¡ˆä¸JSæ–¹æ¡ˆå¹¶éç«äº‰å…³ç³»ï¼Œè€Œæ˜¯ç›¸è¾…ç›¸æˆçš„ä¼™ä¼´ã€‚åœ¨å¼€å‘å¤§å±é¡¹ç›®æ—¶ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š</p>
<ol>
<li><strong>åŸºç¡€å¸ƒå±€ä½¿ç”¨CSS</strong>ï¼šåˆ©ç”¨SCSSå‡½æ•°ä¿æŒä»£ç ç®€æ´</li>
<li><strong>åŠ¨æ€å†…å®¹ä½¿ç”¨JS</strong>ï¼šåˆ©ç”¨å·¥å…·ç±»ä¿æŒçµæ´»æ€§</li>
<li><strong>å…³é”®ç»„ä»¶æ··åˆä½¿ç”¨</strong>ï¼šç»“åˆä¸¤è€…ä¼˜åŠ¿å®ç°æœ€ä½³æ•ˆæœ</li>
</ol>
<p>è®°ä½ï¼š<strong>æ²¡æœ‰æœ€å¥½çš„æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚åˆçš„æ–¹æ¡ˆ</strong>ã€‚æ ¹æ®é¡¹ç›®éœ€æ±‚å’Œå›¢é˜Ÿä¹ æƒ¯ï¼Œçµæ´»é€‰æ‹©ç»„åˆç­–ç•¥ï¼Œæ‰èƒ½æ‰“é€ å‡ºæ—¢ç¾è§‚åˆå®ç”¨çš„å¤§å±åº”ç”¨ã€‚</p>
<hr/>
<p><strong>ç«‹å³è¡ŒåŠ¨</strong>ï¼šåœ¨ä½ çš„ä¸‹ä¸€ä¸ªå¤§å±é¡¹ç›®ä¸­ï¼Œå°è¯•è¿™ç§æ··åˆæ–¹æ¡ˆã€‚ä»ä¸€ä¸ªå°ç»„ä»¶å¼€å§‹ï¼Œä½“éªŒvw/vhå•ä½å¸¦æ¥çš„é€‚é…ä¾¿åˆ©ï¼Œé€æ­¥æ‰©å±•åˆ°æ•´ä¸ªé¡¹ç›®ã€‚ä½ ä¼šå‘ç°ï¼Œå¤§å±é€‚é…ä¸å†æ˜¯éš¾é¢˜ï¼Œè€Œæ˜¯ä¸€æ¬¡æ„‰æ‚¦çš„å¼€å‘ä½“éªŒï¼</p>
<p><strong>æ‰©å±•é˜…è¯»</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tricks.com%2Ffun-viewport-units%2F" target="_blank" title="https://css-tricks.com/fun-viewport-units/" ref="nofollow noopener noreferrer">CSSè§†çª—å•ä½æ·±åº¦æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ffundamentals%2Fperformance%2Frendering" target="_blank" title="https://developers.google.com/web/fundamentals/performance/rendering" ref="nofollow noopener noreferrer">é«˜æ€§èƒ½CSSåŠ¨ç”»æœ€ä½³å®è·µ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£æ„ Claude Skillï¼šä»æ ¸å¿ƒåŸç†åˆ°å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7598899986856689670</link>    <guid>https://juejin.cn/post/7598899986856689670</guid>    <pubDate>2026-01-26T03:33:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598899986856689670" data-draft-id="7598899986856607750" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£æ„ Claude Skillï¼šä»æ ¸å¿ƒåŸç†åˆ°å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T03:33:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lizhongxuan"/> <meta itemprop="url" content="https://juejin.cn/user/940837683343224"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£æ„ Claude Skillï¼šä»æ ¸å¿ƒåŸç†åˆ°å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/940837683343224/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lizhongxuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:33:21.000Z" title="Mon Jan 26 2026 03:33:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ„å»º AI Agent çš„æµªæ½®ä¸­ï¼Œè®©å¤§æ¨¡å‹ï¼ˆLLMï¼‰å…·å¤‡â€œè¡ŒåŠ¨èƒ½åŠ›â€æ˜¯æ ¸å¿ƒè¯‰æ±‚ã€‚å¯¹äº Anthropic çš„ Claude æ¨¡å‹è€Œè¨€ï¼Œè¿™ç§èƒ½åŠ›è¢«ç§°ä¸º <strong>Skill</strong>ï¼ˆæˆ– Tool Useï¼‰ã€‚</p>
<p>æœ¬æ–‡å°†åŸºäº Claude çš„æŠ€æœ¯ç‰¹æ€§ï¼Œç»“åˆ Golang ç”Ÿæ€ä¸­çš„ <strong>Eino</strong> æ¡†æ¶ï¼Œæ·±å…¥å‰–æ Skill çš„å·¥ä½œåŸç†ã€Prompt ç¼–å†™æŠ€å·§ä»¥åŠå·¥ç¨‹è½åœ°çš„æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šä»€ä¹ˆæ˜¯ Claude Skillï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ï¼ŒSkill æ˜¯ç»™ä»…èƒ½å¤„ç†æ–‡æœ¬çš„ LLM è£…ä¸Šäº†â€œæ‰‹â€å’Œâ€œçœ¼â€ã€‚å®ƒå…è®¸å¼€å‘è€…å®šä¹‰ä¸€ç»„å¤–éƒ¨å·¥å…·ï¼ˆAPIã€æ•°æ®åº“æŸ¥è¯¢ã€è®¡ç®—å™¨ç­‰ï¼‰ï¼Œå¹¶æˆæƒ Claude åœ¨é‡åˆ°ç‰¹å®šé—®é¢˜æ—¶è°ƒç”¨è¿™äº›å·¥å…·ã€‚</p>
<p><strong>ä¸»è¦åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>è·å–å®æ—¶ä¿¡æ¯ï¼š</strong> æŸ¥è¯¢è‚¡ä»·ã€å¤©æ°”ã€æœ€æ–°æ–°é—»ã€‚</li>
<li><strong>æ‰§è¡Œæ“ä½œï¼š</strong> å‘é€é‚®ä»¶ã€åœ¨æ—¥å†æ·»åŠ äº‹ä»¶ã€è´­ä¹°å•†å“ã€‚</li>
<li><strong>å¤æ‚è®¡ç®—ï¼š</strong> è°ƒç”¨ Wolfram Alpha æˆ– Python è§£é‡Šå™¨è¿›è¡Œç²¾ç¡®è®¡ç®—ã€‚</li>
<li><strong>ä¼ä¸šæ•°æ®äº¤äº’ï¼š</strong> æŸ¥è¯¢å…¬å¸å†…éƒ¨çš„ CRM æˆ– SQL æ•°æ®åº“ã€‚</li>
</ul>
<h3 data-id="heading-1">1. æ ¸å¿ƒåŸç†ï¼šé¢„æµ‹ä¸ä¸­æ–­</h3>
<p>Claude çš„å·¥å…·è°ƒç”¨å¹¶éé­”æ³•ï¼Œå…¶åº•å±‚é€»è¾‘ä¾ç„¶åŸºäº <strong>â€œNext Token Predictionâ€</strong> ã€‚æ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸€ä¸ªç²¾å¯†çš„â€œä¸‰æ˜æ²»ç»“æ„â€ï¼š</p>
<ol>
<li>
<p><strong>æ„ŸçŸ¥ (The Brain):</strong> å¼€å‘è€…å°†ç”¨æˆ·çš„æé—® + <strong>å·¥å…·æ¸…å• (Schema)</strong> ä¸€å¹¶å‘ç»™ Claudeã€‚<em>ä¾‹å­ï¼š</em> â€œClaudeï¼Œä½ æœ‰ä¸¤ä¸ªå·¥å…·ï¼š<code>get_weather(city)</code> å’Œ <code>send_email(to, body)</code>ã€‚ç”¨æˆ·é—®ï¼šåŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿâ€</p>
</li>
<li>
<p><strong>å†³ç­– (Reasoning):</strong> Claude åˆ†ææ„å›¾ã€‚å¦‚æœå®ƒè®¤ä¸ºéœ€è¦ä½¿ç”¨å·¥å…·ï¼Œå®ƒ<strong>ä¸ä¼š</strong>ç”Ÿæˆè‡ªç„¶è¯­è¨€å›å¤ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€æ®µç‰¹å®šæ ¼å¼çš„ <strong>ç»“æ„åŒ–æ–‡æœ¬</strong>ï¼ˆé€šå¸¸æ˜¯ XML æˆ– JSONï¼‰ã€‚</p>
<ul>
<li><em>Claude:</em> <code>&lt;tool_use&gt;&lt;name&gt;get_weather&lt;/name&gt;&lt;city&gt;Beijing&lt;/city&gt;&lt;/tool_use&gt;</code></li>
</ul>
</li>
<li>
<p><strong>ä¸­æ–­ä¸æ‰§è¡Œ:</strong> * Claude <strong>æš‚åœ</strong> ç”Ÿæˆã€‚</p>
<ul>
<li><strong>ä½ çš„ä»£ç  (Client)</strong> æ‹¦æˆªåˆ°è¿™æ®µç»“æ„åŒ–è¯·æ±‚ï¼Œåœ¨åå°æ‰§è¡ŒçœŸå®çš„ API è°ƒç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>åé¦ˆ (Feedback):</strong> ä½ çš„ä»£ç å°†æ‰§è¡Œç»“æœï¼ˆå¦‚â€œ25Â°Câ€ï¼‰ä½œä¸ºæ–°çš„è¾“å…¥å‘å›ç»™ Claudeã€‚</p>
</li>
<li>
<p><strong>å“åº” (Response):</strong> Claude ç»“åˆæ‰§è¡Œç»“æœï¼Œç”Ÿæˆæœ€ç»ˆç»™ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€å›ç­”ã€‚</p>
<ul>
<li><em>Claude è¾“å‡ºï¼š</em> â€œåŒ—äº¬ä»Šå¤©çš„å¤©æ°”ä¸é”™ï¼Œæ°”æ¸©æ˜¯ 25Â°Cï¼Œæ™´æœ—ã€‚â€</li>
</ul>
</li>
</ol>
<p><strong>å…³é”®è®¤çŸ¥ï¼š</strong> Claude è‡ªå·±ä¸è¿è¡Œå·¥å…·ï¼Œ<strong>æ˜¯ä½ çš„ä»£ç åœ¨è¿è¡Œå·¥å…·</strong>ã€‚Claude åªæ˜¯è´Ÿè´£â€œå¡«å†™å‚æ•°è¡¨å•â€ã€‚</p>
<h2 data-id="heading-2">ç¬¬äºŒéƒ¨åˆ†ï¼šPrompt Engineering çš„èŒƒå¼è½¬ç§»</h2>
<p>åœ¨å¼€å‘ Skill æ—¶ï¼Œâ€œå†™ Promptâ€ çš„æ–¹å¼å‘ç”Ÿäº†æœ¬è´¨å˜åŒ–ã€‚ä½ ä¸å†éœ€è¦å†™é•¿ç¯‡å¤§è®ºçš„æŒ‡ä»¤ï¼Œè€Œæ˜¯éœ€è¦ç¼–å†™<strong>ç²¾å‡†çš„ JSON Schema</strong>ã€‚</p>
<p><strong>å·¥å…·å®šä¹‰çš„ <code>description</code> å­—æ®µï¼Œå°±æ˜¯å†™ç»™ Claude çœ‹çš„ Promptã€‚</strong></p>
<h3 data-id="heading-3">æ¡ˆä¾‹ï¼šå¿«é€’æŸ¥è¯¢å·¥å…·</h3>
<h4 data-id="heading-4">âŒ é”™è¯¯çš„å®šä¹‰</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"search"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æŸ¥ç‰©æµ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><em>é—®é¢˜ï¼šåå­—å«ç³Šï¼Œæè¿°å¤ªçŸ­ï¼ŒClaude ä¸çŸ¥é“ä½•æ—¶è§¦å‘ï¼Œä¹Ÿä¸çŸ¥é“å‚æ•°æ ¼å¼ã€‚</em></p>
<h4 data-id="heading-5">âœ… æ­£ç¡®çš„å®šä¹‰</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_delivery_status"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å½“ç”¨æˆ·è¯¢é—®åŒ…è£¹ä½ç½®ã€å‘è´§çŠ¶æ€æˆ–é¢„è®¡åˆ°è¾¾æ—¶é—´æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"input_schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"order_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä»¥ 'CN' å¼€å¤´çš„10ä½è®¢å•ç¼–å·ã€‚å¦‚æœç”¨æˆ·æœªæä¾›ï¼Œè¯·ç¤¼è²Œè¯¢é—®ã€‚"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><em>ä¼˜åŠ¿ï¼šæ˜ç¡®äº†è§¦å‘åœºæ™¯ï¼ˆScenarioï¼‰å’Œå‚æ•°çº¦æŸï¼ˆConstraintï¼‰ã€‚</em></p>
<h2 data-id="heading-6">ç¬¬ä¸‰éƒ¨åˆ†ï¼šEino æ¡†æ¶å®æˆ˜ (Golang)</h2>
<p>åœ¨åç«¯å¼€å‘ä¸­ï¼Œæ‰‹åŠ¨æ‹¼æ¥ä¸Šè¿° JSON éå¸¸ç¹çã€‚<strong>Eino</strong> (CloudWeGo å¼€æºæ¡†æ¶) æä¾›äº†ä¸€å¥—ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼š<strong>å°† Go Struct è‡ªåŠ¨æ˜ å°„ä¸º Claude Promptã€‚</strong></p>
<h3 data-id="heading-7">1. å®šä¹‰å…¥å‚</h3>
<p>åˆ©ç”¨ Go çš„ <code>struct tag</code> æ¥ç¼–å†™ Promptã€‚</p>
<pre><code class="hljs language-c" lang="c">type DeliveryRequest <span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
    <span class="hljs-comment">// `desc` æ ‡ç­¾çš„å†…å®¹ä¼šè¢« Eino è‡ªåŠ¨æå–å¹¶ä¼ ç»™ Claude</span>
    OrderID <span class="hljs-built_in">string</span> `json:<span class="hljs-string">"order_id"</span> desc:<span class="hljs-string">"ä»¥ 'CN' å¼€å¤´çš„10ä½è®¢å•ç¼–å·ï¼Œä¾‹å¦‚ CN1234567890"</span>`
}
</code></pre>
<h3 data-id="heading-8">2. å®ç°é€»è¾‘</h3>
<p>ç¼–å†™æ™®é€šçš„ Go å‡½æ•°å¤„ç†ä¸šåŠ¡ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetDeliveryStatus</span><span class="hljs-params">(ctx context.Context, req *DeliveryRequest)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">if</span> req.OrderID == <span class="hljs-string">"CN123456"</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"åŒ…è£¹å·²åˆ°è¾¾åŒ—äº¬è½¬è¿ä¸­å¿ƒ"</span>, <span class="hljs-literal">nil</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"æœªæŸ¥è¯¢åˆ°è®¢å•"</span>)
}
</code></pre>
<h3 data-id="heading-9">3. ç»‘å®šä¸è‡ªåŠ¨ç¼–æ’</h3>
<p>Eino è´Ÿè´£ä¸­é—´ç¹ççš„åºåˆ—åŒ–ã€ååºåˆ—åŒ–å’Œè·¯ç”±åˆ†å‘ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// åˆ›å»ºå·¥å…·</span>
tool, _ := utils.<span class="hljs-title function_ invoke__">NewTool</span>(&amp;utils.ToolConfig{
    <span class="hljs-attr">Name</span>: <span class="hljs-string">"get_delivery_status"</span>,
    <span class="hljs-attr">Desc</span>: <span class="hljs-string">"æŸ¥è¯¢å¿«é€’çŠ¶æ€å·¥å…·"</span>,
    <span class="hljs-attr">Func</span>: GetDeliveryStatus, // ç»‘å®š Go å‡½æ•°
})

<span class="hljs-comment">// ç»‘å®šåˆ° Claude æ¨¡å‹</span>
chatModel.<span class="hljs-title function_ invoke__">BindTools</span>([]*schema.ToolInfo{tool.<span class="hljs-title function_ invoke__">Info</span>()})
</code></pre>
<h2 data-id="heading-10">ç¬¬å››éƒ¨åˆ†ï¼šæ„å»ºé«˜è´¨é‡ Skill çš„å››å¤§è¦ç´ </h2>
<p>è¦è®© Skill ç¨³å®šå¯é ï¼Œä»…æœ‰åŸºç¡€ä»£ç æ˜¯ä¸å¤Ÿçš„ã€‚ä»¥ä¸‹æ˜¯ç»è¿‡å®æˆ˜éªŒè¯çš„å››ä¸ªå…³é”®ç‚¹ï¼š</p>
<h3 data-id="heading-11">1. Description æ˜¯æ ¸å¿ƒ</h3>
<p><code>desc</code> å†³å®šäº†å·¥å…·çš„â€œè§¦å‘ç‡â€å’Œâ€œå‡†ç¡®ç‡â€ã€‚</p>
<ul>
<li><strong>æŠ€å·§ï¼š</strong> åœ¨æè¿°ä¸­åŠ å…¥ <strong>Negative Prompt</strong>ï¼ˆè´Ÿå‘æç¤ºï¼‰ã€‚</li>
<li><em>ä¾‹ï¼š</em> â€œæ­¤å·¥å…·ç”¨äºæŸ¥è¯¢å½“å‰åº“å­˜ã€‚<strong>æ³¨æ„ï¼šä¸è¦ç”¨äºæŸ¥è¯¢å†å²é”€å”®è®°å½•ã€‚</strong> â€</li>
</ul>
<h3 data-id="heading-12">2. å­—æ®µçº¦æŸæ˜¾æ€§åŒ–</h3>
<p>LLM ä¸æ‡‚éšå¼è§„åˆ™ã€‚</p>
<ul>
<li><strong>æŠ€å·§ï¼š</strong> åœ¨ Struct Tag ä¸­åŠ å…¥<strong>æ ¼å¼è¦æ±‚</strong>å’Œ<strong>ç¤ºä¾‹ï¼ˆExampleï¼‰</strong> ã€‚</li>
<li><em>ä¾‹ï¼š</em> <code>desc:"æ—¥æœŸï¼Œæ ¼å¼å¿…é¡»ä¸º YYYY-MM-DDï¼Œå¦‚ 2024-01-01"</code>ã€‚</li>
</ul>
<h3 data-id="heading-13">3. è¿”å›å€¼è®¾è®¡çš„è‰ºæœ¯</h3>
<p>åç«¯è¿”å›ç»™ Claude çš„æ•°æ®ï¼ˆTool Outputï¼‰ä¹Ÿæ˜¯ Prompt çš„ä¸€éƒ¨åˆ†ã€‚</p>
<ul>
<li><strong>æŠ€å·§ï¼š</strong> <strong>æé«˜ä¿¡å™ªæ¯”</strong>ã€‚ä¸è¦è¿”å›åŒ…å«å¤§é‡æ— ç”¨å­—æ®µçš„åŸå§‹ JSONï¼Œåªè¿”å› Claude å›ç­”é—®é¢˜æ‰€éœ€çš„æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-14">4. é”™è¯¯å¤„ç†å³æ•™å­¦</h3>
<p>è¿™æ˜¯æœ€é«˜çº§çš„æŠ€å·§ã€‚å½“å·¥å…·è°ƒç”¨å¤±è´¥æ—¶ï¼Œä¸è¦åªè¿”å› <code>Error 500</code>ã€‚ä½ åº”è¯¥è¿”å›ä¸€ä¸ª <strong>â€œTeacher Errorâ€</strong> ï¼ˆåƒè€å¸ˆä¸€æ ·çš„çº é”™ä¿¡æ¯ï¼‰ï¼ŒæŒ‡å¯¼ Claude è‡ªæˆ‘ä¿®æ­£ã€‚</p>
<h4 data-id="heading-15">å®æˆ˜æ¡ˆä¾‹ï¼šæ±‡ç‡è½¬æ¢å™¨çš„è‡ªåŠ¨çº é”™</h4>
<p>åœºæ™¯æè¿°ï¼š</p>
<p>æˆ‘ä»¬æ„å»ºä¸€ä¸ªæ±‡ç‡è½¬æ¢å·¥å…·ã€‚åç«¯åªæ¥å—æ ‡å‡†çš„ ISO è´§å¸ä»£ç ï¼ˆå¦‚ CNY, USDï¼‰ï¼Œä½†ç”¨æˆ·ç»å¸¸ä¹ æƒ¯è¯´â€œäººæ°‘å¸â€æˆ–â€œRMBâ€ã€‚æˆ‘ä»¬å°†æ•…æ„ä¸å¤„ç†å‰ç«¯è¾“å…¥ï¼Œè€Œæ˜¯ä¾èµ–åç«¯æŠ¥é”™æœºåˆ¶æ¥â€œæ•™ä¼šâ€ Claudeã€‚</p>
<p><strong>1. Go ä»£ç å®ç° (Eino)</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ConvertCurrency</span><span class="hljs-params">(ctx context.Context, req *CurrencyRequest)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    validCodes := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">bool</span>{<span class="hljs-string">"CNY"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"USD"</span>: <span class="hljs-literal">true</span>}
    
    <span class="hljs-comment">// æ£€æŸ¥ï¼šå¦‚æœ Claude ä¼ äº† "RMB"ï¼Œæˆ‘ä»¬è¦æ‹¦æˆª</span>
    from := strings.ToUpper(req.FromCurrency)
    
    <span class="hljs-keyword">if</span> !validCodes[from] {
        <span class="hljs-comment">// ã€å…³é”®ç‚¹ã€‘ï¼šä¸è¦åªè¿”å› "Invalid Currency"ã€‚</span>
        <span class="hljs-comment">// è¦å‘Šè¯‰ Claude é”™åœ¨å“ªï¼Œä»¥åŠæ­£ç¡®çš„å‚è€ƒå€¼æ˜¯ä»€ä¹ˆã€‚</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, fmt.Errorf(
            <span class="hljs-string">"API Error: è´§å¸ä»£ç  '%s' æ— æ•ˆã€‚è¯·ä»…ä½¿ç”¨ ISO 4217 æ ‡å‡†ä»£ç ã€‚"</span> + 
            <span class="hljs-string">"æç¤ºï¼šå¦‚æœä½ æƒ³æŒ‡äººæ°‘å¸ï¼Œè¯·ä½¿ç”¨ 'CNY'ï¼›ç¾å…ƒè¯·ä½¿ç”¨ 'USD'ã€‚è¯·ä¿®æ­£å‚æ•°åé‡è¯•ã€‚"</span>, 
            req.FromCurrency,
        )
    }

    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"è½¬æ¢æˆåŠŸï¼š100 %s = 14.5 %s"</span>, from, req.ToCurrency), <span class="hljs-literal">nil</span>
}
</code></pre>
<p><strong>2. å®é™…è¿è¡Œæµç¨‹</strong></p>
<p>è¿™å°±æ˜¯ <strong>â€œEino è‡ªåŠ¨çº é”™â€</strong> å‘ç”Ÿçš„è¿‡ç¨‹ã€‚ç”¨æˆ·å®Œå…¨æ— æ„ŸçŸ¥ï¼Œä½†åå°å‘ç”Ÿäº†ä¸¤æ¬¡äº¤äº’ã€‚</p>
<ul>
<li>
<p><strong>Round 1: ç¬¬ä¸€æ¬¡å°è¯•ï¼ˆçŠ¯é”™ï¼‰</strong></p>
<ul>
<li><strong>User:</strong> "æŠŠ 100 RMB æ¢æˆç¾å…ƒã€‚"</li>
<li><strong>Claude è°ƒç”¨:</strong> <code>convert_currency(from="RMB", to="USD")</code></li>
<li><strong>Eino è¿”å› (Error):</strong> <code>[Error] API Error: è´§å¸ä»£ç  'RMB' æ— æ•ˆ...æç¤ºï¼šå¦‚æœä½ æƒ³æŒ‡äººæ°‘å¸ï¼Œè¯·ä½¿ç”¨ 'CNY'...</code></li>
</ul>
</li>
<li>
<p><strong>Round 2: è‡ªæˆ‘ä¿®æ­£ï¼ˆé‡è¯•ï¼‰</strong></p>
<ul>
<li><strong>Claude æ€è€ƒ:</strong> "å“å‘€ï¼Œå·¥å…·æŠ¥é”™äº†ã€‚å®ƒæç¤ºæˆ‘åº”è¯¥ç”¨ 'CNY'ã€‚å¥½çš„ï¼Œæˆ‘é‡æ–°è°ƒç”¨ä¸€æ¬¡ã€‚"</li>
<li><strong>Claude å†æ¬¡è°ƒç”¨:</strong> <code>convert_currency(from="CNY", to="USD")</code></li>
<li><strong>Eino è¿”å› (Success):</strong> <code>è½¬æ¢æˆåŠŸï¼š100 CNY = 14.5 USD</code></li>
</ul>
</li>
<li>
<p><strong>æœ€ç»ˆå›å¤ç”¨æˆ·:</strong> "è½¬æ¢å®Œæˆï¼100 äººæ°‘å¸å¤§çº¦ç­‰äº 14.5 ç¾å…ƒã€‚"</p>
</li>
</ul>
<p>æ ¸å¿ƒä»·å€¼ï¼š</p>
<p>é€šè¿‡è¿™ç§æœºåˆ¶ï¼Œä½ æŠŠåç«¯é€»è¾‘é‡Œçš„ error å˜æˆäº†å¯¹ AI çš„ç›´æ¥æŒ‡å¯¼ï¼Œå¢å¼ºäº† Agent çš„éŸ§æ€§ï¼ˆResilienceï¼‰ï¼Œé¿å…äº†ç›´æ¥æ‹’ç»ç”¨æˆ·ã€‚</p>
<h2 data-id="heading-16">ç¬¬äº”éƒ¨åˆ†ï¼šè¿›é˜¶ä¸ç”Ÿäº§ç¯å¢ƒè€ƒé‡</h2>
<p>åœ¨æŠ€æœ¯åˆ†äº«çš„å°¾å£°ï¼Œä¸ºäº†å±•ç¤ºæ–¹æ¡ˆçš„å®Œæ•´æ€§ï¼Œæˆ‘ä»¬éœ€è¦è®¨è®º Agent åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„å¤æ‚æŒ‘æˆ˜ã€‚</p>
<h3 data-id="heading-17">1. å¤šæ­¥æ¨ç†ä¸ Graph ç¼–æ’</h3>
<p>ç°å®ä¸–ç•Œçš„ä»»åŠ¡å¾€å¾€ä¸æ˜¯å•ä¸€å·¥å…·èƒ½è§£å†³çš„ï¼Œè€Œæ˜¯éœ€è¦ <strong>Tool Chainingï¼ˆå·¥å…·é“¾ï¼‰</strong> ã€‚</p>
<ul>
<li><strong>åœºæ™¯ï¼š</strong> ç”¨æˆ·é—®â€œåˆ†æ A å…¬å¸çš„æœ€æ–°è´¢æŠ¥é£é™©â€ã€‚</li>
<li><strong>æµç¨‹ï¼š</strong> <code>SearchTool</code> (æ‰¾è´¢æŠ¥) -&gt; <code>ReaderTool</code> (è¯» PDF) -&gt; <code>AnalysisTool</code> (æå–æ•°æ®) -&gt; LLM (æ€»ç»“)ã€‚</li>
<li><strong>Eino ä¼˜åŠ¿ï¼š</strong> åˆ©ç”¨ Eino çš„ <code>Graph</code> æˆ– <code>Chain</code> èƒ½åŠ›ï¼Œå¯ä»¥å°†å¤šä¸ª Skill ä¸²è”èµ·æ¥ï¼Œç”šè‡³å®ç°å¹¶è¡Œçš„å·¥å…·è°ƒç”¨ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä¸€é—®ä¸€ç­”ã€‚</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ (Eino Graph æ„å»º)ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Graph</span>
g := compose.NewGraph[string, string]()

// æ·»åŠ èŠ‚ç‚¹ï¼šæ£€ç´¢å™¨ -&gt; åˆ†æå™¨ -&gt; æ€»ç»“å¤§æ¨¡å‹
g.<span class="hljs-built_in">AddNode</span>(<span class="hljs-string">"search_tool"</span>, searchTool)
g.<span class="hljs-built_in">AddNode</span>(<span class="hljs-string">"reader_tool"</span>, pdfReader)
g.<span class="hljs-built_in">AddNode</span>(<span class="hljs-string">"summarizer_llm"</span>, chatModel)

// å®šä¹‰è¾¹çš„æµå‘ (Workflow)
g.<span class="hljs-built_in">AddEdge</span>(compose.START, <span class="hljs-string">"search_tool"</span>)
g.<span class="hljs-built_in">AddEdge</span>(<span class="hljs-string">"search_tool"</span>, <span class="hljs-string">"reader_tool"</span>)
g.<span class="hljs-built_in">AddEdge</span>(<span class="hljs-string">"reader_tool"</span>, <span class="hljs-string">"summarizer_llm"</span>)
g.<span class="hljs-built_in">AddEdge</span>(<span class="hljs-string">"summarizer_llm"</span>, compose.END)

// ç¼–è¯‘å¹¶è¿è¡Œ
runnable, _ := g.<span class="hljs-built_in">Compile</span>(ctx)
result, _ := runnable.<span class="hljs-built_in">Invoke</span>(ctx, <span class="hljs-string">"åˆ†æ Apple 2024 Q3 è´¢æŠ¥"</span>)
</code></pre>
<h3 data-id="heading-18">2. å®‰å…¨æ€§ï¼šHuman-in-the-loop (äººæœºå›ç¯)</h3>
<p>èµ‹äºˆ AI è¡ŒåŠ¨èƒ½åŠ›ä¹Ÿå¸¦æ¥äº†é£é™©ã€‚å¯¹äºé«˜é£é™©æ“ä½œï¼ˆå¦‚åˆ é™¤æ•°æ®ã€é€€æ¬¾è½¬è´¦ï¼‰ï¼Œå¿…é¡»å¼•å…¥äººå·¥ç¡®è®¤æœºåˆ¶ã€‚</p>
<ul>
<li>
<p><strong>è®¾è®¡æ¨¡å¼ï¼š</strong></p>
<ol>
<li>Claude å†³å®šè°ƒç”¨ <code>refund_user</code> å·¥å…·ã€‚</li>
<li>Eino æ‹¦æˆªè°ƒç”¨è¯·æ±‚ï¼Œ<strong>æš‚åœ (Suspend)</strong> æ‰§è¡Œæµã€‚</li>
<li>ç³»ç»Ÿå‘ç®¡ç†å‘˜å‘é€â€œç¡®è®¤å¡ç‰‡â€ã€‚</li>
<li>ç®¡ç†å‘˜ç‚¹å‡»â€œæ‰¹å‡†â€ã€‚</li>
<li>Eino <strong>æ¢å¤ (Resume)</strong> æ‰§è¡Œæµï¼ŒçœŸæ­£è¿è¡Œåç«¯å‡½æ•°ã€‚</li>
</ol>
</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ (å¸¦å®¡æ‰¹çš„å·¥å…·é€»è¾‘)ï¼š</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">RefundUser</span><span class="hljs-params">(ctx context.Context, req *RefundRequest)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. æ£€æŸ¥æƒé™æˆ–è§¦å‘å®¡æ‰¹æµ</span>
    <span class="hljs-keyword">if</span> req.Amount &gt; <span class="hljs-number">1000</span> {
        <span class="hljs-comment">// åœ¨å®é™…ç³»ç»Ÿä¸­ï¼Œè¿™é‡Œå¯èƒ½æŠ›å‡ºä¸€ä¸ªç‰¹å®šçš„ "NeedApprovalError"</span>
        <span class="hljs-comment">// æˆ–è€…æ£€æŸ¥ Redis ä¸­çš„å®¡æ‰¹ Token æ˜¯å¦å­˜åœ¨</span>
        <span class="hljs-keyword">if</span> !IsApproved(ctx, req.TransactionID) {
             TriggerAdminApproval(req)
             <span class="hljs-keyword">return</span> <span class="hljs-string">"SYSTEM: è¶…è¿‡å¤§é¢é™åˆ¶ï¼Œå·²å‘é€å®¡æ‰¹è¯·æ±‚ç»™ç®¡ç†å‘˜ã€‚è¯·ç®¡ç†å‘˜æ‰¹å‡†åå†é‡è¯•æ­¤æ“ä½œã€‚"</span>, <span class="hljs-literal">nil</span>
        }
    }
    
    <span class="hljs-comment">// 2. æ‰§è¡Œé€€æ¬¾</span>
    db.ExecuteRefund(req)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"é€€æ¬¾æˆåŠŸ"</span>, <span class="hljs-literal">nil</span>
}
</code></pre>
<h3 data-id="heading-19">3. å¯è§‚æµ‹æ€§ä¸æ¨¡å‹è¯„ä¼°</h3>
<p>AI çš„è¡Œä¸ºå…·æœ‰ä¸ç¡®å®šæ€§ã€‚å½“ Agent è¡¨ç°ä¸ä½³æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ˜¯ Prompt å†™æ­ªäº†ã€å·¥å…·å‚æ•°ä¼ é”™äº†ï¼Œ<strong>è¿˜æ˜¯æ¨¡å‹æœ¬èº«çš„èƒ½åŠ›ä¸è¶³ï¼ˆæ™ºåŠ›æ³¢åŠ¨ï¼‰</strong> ã€‚å› æ­¤ï¼Œé™¤äº†é“¾è·¯è¿½è¸ªï¼Œè¿˜éœ€è¦å¼•å…¥<strong>æ¨¡å‹èƒ½åŠ›æ‰“åˆ†æœºåˆ¶</strong>ã€‚</p>
<ul>
<li>
<p><strong>æœ€ä½³å®è·µï¼š</strong> è®°å½•å®Œæ•´çš„ Trace å¹¶å¯¹æ¨¡å‹èƒ½åŠ›è¿›è¡Œé‡åŒ–æ‰“åˆ†ã€‚</p>
<ul>
<li><strong>Input:</strong> ç”¨æˆ·åˆ°åº•è¯´äº†ä»€ä¹ˆï¼Ÿ</li>
<li><strong>Prompt:</strong> Eino æœ€ç»ˆç»„è£…å‘ç»™ Claude çš„ Prompt é•¿ä»€ä¹ˆæ ·ï¼Ÿï¼ˆåŒ…å«å·¥å…·å®šä¹‰ï¼‰</li>
<li><strong>Tool Call:</strong> Claude åå‡ºçš„ JSON å‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li><strong>Output:</strong> å·¥å…·è¿”å›äº†ä»€ä¹ˆç»“æœï¼Ÿ</li>
<li><strong>Latency:</strong> å·¥å…·æ‰§è¡Œè€—æ—¶å¤šä¹…ï¼Ÿ</li>
<li><strong>Model Score:</strong>  è®°å½•æœ¬æ¬¡äº¤äº’ä¸­æ¨¡å‹æ‰€å±•ç¤ºçš„èƒ½åŠ›å¾—åˆ†ã€‚å¯ä»¥åŸºäºäººå·¥åé¦ˆï¼ˆThumbs up/downï¼‰æˆ–ä½¿ç”¨å¦ä¸€ä¸ªæ›´å¼ºçš„æ¨¡å‹ï¼ˆEvaluatorï¼‰å¯¹å½“å‰æ¨¡å‹çš„å›ç­”é€»è¾‘ã€å·¥å…·ä½¿ç”¨å‡†ç¡®æ€§è¿›è¡Œæ‰“åˆ†ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ (Eino Callbacks + Evaluation)ï¼š</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åˆ›å»ºå›è°ƒå¤„ç†å™¨</span>
handler := callbacks.NewHandlerHelper().
    <span class="hljs-comment">// ç›‘å¬å·¥å…·è°ƒç”¨å¼€å§‹</span>
    OnToolStart(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, info *schema.ToolInfo, input <span class="hljs-type">string</span>)</span></span> {
        log.Printf(<span class="hljs-string">"[Trace] Tool Start: %s | Input: %s"</span>, info.Name, input)
    }).
    <span class="hljs-comment">// ç›‘å¬å·¥å…·è°ƒç”¨ç»“æŸ</span>
    OnToolEnd(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, info *schema.ToolInfo, output <span class="hljs-type">string</span>)</span></span> {
        log.Printf(<span class="hljs-string">"[Trace] Tool End: %s | Output: %s"</span>, info.Name, output)
    }).
    <span class="hljs-comment">// ç›‘å¬ LLM ç”Ÿæˆç»“æŸ</span>
    OnModelEnd(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, out *schema.ModelOutput, err <span class="hljs-type">error</span>)</span></span> {
        log.Printf(<span class="hljs-string">"[Trace] Model Token Usage: %d"</span>, out.Usage.TotalTokens)
        
        <span class="hljs-comment">// å¼‚æ­¥è§¦å‘æ¨¡å‹èƒ½åŠ›è¯„ä¼°</span>
        <span class="hljs-comment">// æ—¢ç„¶æ—¥å¿—è®°å½•äº† Input/Outputï¼Œæˆ‘ä»¬å¯ä»¥å¼‚æ­¥è°ƒç”¨ä¸€ä¸ª "Judge Model" </span>
        <span class="hljs-comment">// æ¥ç»™å½“å‰ Claude çš„è¡¨ç°æ‰“åˆ† (0-10åˆ†)ï¼Œä»è€Œç›‘æ§æ¨¡å‹èƒ½åŠ›æ˜¯å¦ä¸‹é™ã€‚</span>
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
            score := EvaluateAgentPerformance(out.Content)
            metrics.RecordModelScore(<span class="hljs-string">"claude-3.5-sonnet"</span>, score)
        }()
    }).
    Handler()

<span class="hljs-comment">// åœ¨è¿è¡Œæ—¶æ³¨å…¥å›è°ƒ</span>
response, _ := chatModel.Generate(
    ctx, 
    userInput, 
    eino.WithCallbacks(handler), <span class="hljs-comment">// æ³¨å…¥è§‚å¯Ÿè€…</span>
)
</code></pre>
<h2 data-id="heading-20">æ€»ç»“</h2>
<p>åœ¨ Eino å’Œ Claude çš„ä½“ç³»ä¸‹å¼€å‘ Skillï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨è¿›è¡Œä¸€åœº<strong>è·¨è¯­è¨€çš„æ²Ÿé€š</strong>ï¼šä½ ç”¨ Go ä»£ç å®šä¹‰è§„åˆ™ï¼ŒEino å°†å…¶ç¿»è¯‘ä¸º JSON Schemaï¼ŒClaude æ®æ­¤è¿›è¡Œæ¨ç†ï¼Œæœ€åé€šè¿‡ä½ çš„ Go å‡½æ•°ä¸ç°å®ä¸–ç•Œäº¤äº’ã€‚</p>
<p>è®°ä½ä¸€æ¡åŸåˆ™ï¼š<strong>ä½ çš„ Go Struct å®šä¹‰ã€å‡½æ•°è¿”å›å€¼ã€ç”šè‡³é”™è¯¯ä¿¡æ¯ï¼Œå…¨éƒ½æ˜¯åœ¨è·Ÿ AI å¯¹è¯ã€‚</strong> å†™å¾—è¶Šæ¸…æ¥šï¼ŒAI è¡¨ç°å°±è¶Šæ™ºèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[6.BTC-ç½‘ç»œ-åŒ—å¤§è‚–è‡»è€å¸ˆå®¢å ‚ç¬”è®°]]></title>    <link>https://juejin.cn/post/7599181528304156681</link>    <guid>https://juejin.cn/post/7599181528304156681</guid>    <pubDate>2026-01-26T03:37:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599181528304156681" data-draft-id="7599247962821427227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="6.BTC-ç½‘ç»œ-åŒ—å¤§è‚–è‡»è€å¸ˆå®¢å ‚ç¬”è®°"/> <meta itemprop="keywords" content="å‰ç«¯,åŒºå—é“¾"/> <meta itemprop="datePublished" content="2026-01-26T03:37:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ¶‚æ¶‚"/> <meta itemprop="url" content="https://juejin.cn/user/3740972207312249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            6.BTC-ç½‘ç»œ-åŒ—å¤§è‚–è‡»è€å¸ˆå®¢å ‚ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3740972207312249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ¶‚æ¶‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:37:05.000Z" title="Mon Jan 26 2026 03:37:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä»½å…³äºæ¯”ç‰¹å¸ç½‘ç»œåŸç†çš„æ€»ç»“åŸºäºä½ æä¾›çš„è§†é¢‘å†…å®¹ã€‚æ¯”ç‰¹å¸ä¸ä»…æ˜¯ä¸€ç§æ•°å­—è´§å¸ï¼Œæ›´æ˜¯ä¸€ä¸ªç²¾å¯†çš„å±‚çº§æ¶æ„ç³»ç»Ÿã€‚</p>
<hr/>
<h2 data-id="heading-0">1. æ¯”ç‰¹å¸çš„ç½‘ç»œåˆ†å±‚æ¶æ„</h2>
<p>æ¯”ç‰¹å¸çš„è¿è¡Œä¸»è¦ä¾èµ–äºä¸¤ä¸ªå±‚çº§çš„åä½œï¼š</p>
<ul>
<li><strong>åº”ç”¨å±‚ (Application Layer)</strong>ï¼šå³ <strong>Bitcoin Blockchain</strong>ã€‚è¿™ä¸€å±‚å¤„ç†è´¦æœ¬ã€äº¤æ˜“è®°å½•ã€å…±è¯†æœºåˆ¶ï¼ˆå¦‚ PoWï¼‰ä»¥åŠè´¦æˆ·ä½™é¢çš„éªŒè¯ã€‚</li>
<li><strong>ç½‘ç»œå±‚ (Network Layer)</strong>ï¼šå³ <strong>P2P Overlay Network</strong>ã€‚æ‰€æœ‰çš„æ¯”ç‰¹å¸èŠ‚ç‚¹åœ¨åº”ç”¨å±‚ä¹‹ä¸‹ï¼Œé€šè¿‡äº’è”ç½‘å»ºç«‹äº†ä¸€ä¸ªå¯¹ç­‰ç½‘ç»œï¼ˆP2Pï¼‰ã€‚</li>
<li><strong>Overlayï¼ˆè¦†ç›–ç½‘ç»œï¼‰</strong>ï¼šå®ƒè¿è¡Œåœ¨äº’è”ç½‘ä¹‹ä¸Šï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡ç‰¹å®šçš„åè®®ç›¸äº’é“¾æ¥ï¼Œè€Œä¸ä¾èµ–ä¸­å¤®æœåŠ¡å™¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">2. ç½‘ç»œèŠ‚ç‚¹çš„ç±»å‹ä¸å‘ç°</h2>
<p>åœ¨ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ç½‘ç»œä¸­ï¼Œæ–°èŠ‚ç‚¹å¦‚ä½•æ‰¾åˆ°ç»„ç»‡ï¼Ÿ</p>
<ul>
<li><strong>ç§å­èŠ‚ç‚¹ (Seed Nodes)</strong>ï¼šç”±æ¯”ç‰¹å¸ç¤¾åŒºé•¿æœŸç»´æŠ¤çš„å¯é èŠ‚ç‚¹ã€‚æ–°èŠ‚ç‚¹åŠ å…¥æ—¶ï¼Œé€šå¸¸ä¼šå…ˆé€šè¿‡ DNS æˆ–ç¡¬ç¼–ç çš„åœ°å€è¿æ¥åˆ°ç§å­èŠ‚ç‚¹ï¼Œä»è€Œè·å–å½“å‰æ´»è·ƒèŠ‚ç‚¹çš„åˆ—è¡¨ã€‚</li>
<li><strong>è¶…çº§èŠ‚ç‚¹ / ä¸»èŠ‚ç‚¹ (Full Nodes/Super Nodes)</strong>ï¼šè¿™äº›èŠ‚ç‚¹ä¿å­˜äº†å®Œæ•´çš„åŒºå—é“¾æ•°æ®ï¼Œå¹¶å…¨å¤©å€™åœ¨çº¿ã€‚å®ƒä»¬è´Ÿè´£éªŒè¯æ¯ä¸€ç¬”äº¤æ˜“å’Œæ¯ä¸€ä¸ªåŒºå—ï¼Œæ˜¯ç½‘ç»œçš„â€œè„Šæ¢â€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">3. æ¶ˆæ¯ä¼ æ’­æœºåˆ¶ï¼šFlooding (æ´ªæ³›ç®—æ³•)</h2>
<p>æ¯”ç‰¹å¸ç½‘ç»œé‡‡ç”¨ä¸€ç§ç®€å•è€Œç›´æ¥çš„é€šä¿¡æ–¹å¼ï¼š</p>
<ul>
<li><strong>æœºåˆ¶</strong>ï¼šå½“ä¸€ä¸ªèŠ‚ç‚¹æ”¶åˆ°ä¸€ç¬”æ–°äº¤æ˜“æˆ–ä¸€ä¸ªæ–°åŒºå—æ—¶ï¼Œå®ƒä¼šå…ˆéªŒè¯å…¶åˆæ³•æ€§ã€‚å¦‚æœåˆæ³•ï¼Œåˆ™å°†å…¶è½¬å‘ç»™ä¸å…¶ç›´æ¥ç›¸è¿çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ã€‚</li>
<li><strong>Best Effort (å°½åŠ›è€Œä¸º)</strong>ï¼šç”±äº P2P ç½‘ç»œçš„å¤æ‚æ€§ï¼Œä¿¡æ¯ä¼ é€’ä¸ä¿è¯ 100% æˆåŠŸï¼Œä¹Ÿä¸ä¿è¯é¡ºåºã€‚ç½‘ç»œé€šè¿‡å¤šæ¬¡å†—ä½™ä¼ æ’­ï¼Œç¡®ä¿ç»å¤§å¤šæ•°èŠ‚ç‚¹æœ€ç»ˆéƒ½èƒ½åŒæ­¥æ•°æ®ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">4. ç½‘ç»œç‰¹æ€§çš„æƒè¡¡</h2>
<p>è§†é¢‘ä¸­å¼ºè°ƒäº†æ¯”ç‰¹å¸ç½‘ç»œè®¾è®¡çš„æ ¸å¿ƒé€»è¾‘ï¼Œå¯ä»¥ç”¨å…­ä¸ªå­—æ¦‚æ‹¬ï¼š</p>
<blockquote>
<p><strong>Simple, Robust, but not Efficient.</strong>
(ç®€å•ã€é²æ£’/å¥å£®ï¼Œä½†å¹¶ä¸é«˜æ•ˆ)</p>
</blockquote>
<ul>
<li><strong>Simple (ç®€å•)</strong>ï¼šé€šä¿¡åè®®å¹¶ä¸å¤æ‚ï¼Œæ²¡æœ‰ç¹ççš„è·¯ç”±é€‰æ‹©ã€‚</li>
<li><strong>Robust (é²æ£’)</strong>ï¼šå³ä¾¿ç½‘ç»œä¸­å¤§é‡èŠ‚ç‚¹çªç„¶ç¦»çº¿ï¼Œå‰©ä¸‹çš„èŠ‚ç‚¹ä¾ç„¶èƒ½é€šè¿‡ P2P é“¾æ¥ç»´æŒç½‘ç»œè¿è½¬ï¼Œæ²¡æœ‰å•ç‚¹æ•…éšœã€‚</li>
<li><strong>Not Efficient (ä½æ•ˆ)</strong>ï¼šä¸ºäº†å®‰å…¨å’Œå»ä¸­å¿ƒåŒ–ï¼Œæ¯æ¡ä¿¡æ¯éƒ½è¦è¢«å¤šæ¬¡é‡å¤ä¼ è¾“ã€‚ç›¸æ¯”äºä¸­å¿ƒåŒ–æœåŠ¡å™¨ï¼Œå®ƒçš„å»¶è¿Ÿæ›´é«˜ï¼Œå¸¦å®½æ¶ˆè€—æ›´å¤§ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">5. æ ¸å¿ƒåŸç†æ€»ç»“è¡¨</h2>






























<table><thead><tr><th>ç»´åº¦</th><th>ç‰¹ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ‹“æ‰‘ç»“æ„</strong></td><td>åŠ¨æ€ P2P</td><td>èŠ‚ç‚¹éšæ—¶åŠ å…¥/é€€å‡ºï¼Œæ²¡æœ‰ä¸­å¿ƒæ§åˆ¶ã€‚</td></tr><tr><td><strong>è¿é€šæ€§</strong></td><td>é‚»å±…èŠ‚ç‚¹</td><td>æ¯ä¸ªèŠ‚ç‚¹é€šå¸¸ä¸ 8-12 ä¸ªé‚»å±…èŠ‚ç‚¹ä¿æŒè¿æ¥ã€‚</td></tr><tr><td><strong>éªŒè¯é€»è¾‘</strong></td><td>å…ˆéªŒè¯å†è½¬å‘</td><td>é˜²æ­¢åƒåœ¾ä¿¡æ¯æˆ–æ¶æ„æ”»å‡»å……æ–¥ç½‘ç»œã€‚</td></tr><tr><td><strong>å®¹é”™æ€§</strong></td><td>é«˜</td><td>åªè¦æœ‰å°‘é‡èŠ‚ç‚¹å­˜æ´»ï¼ŒåŒºå—é“¾è´¦æœ¬å°±ä¸ä¼šä¸¢å¤±ã€‚</td></tr></tbody></table>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•æ·±å…¥ç†è§£ä¸šåŠ¡éœ€æ±‚ï¼šä»æŠ€æœ¯è§†è§’åˆ°ä»·å€¼è½åœ°]]></title>    <link>https://juejin.cn/post/7598744870996885547</link>    <guid>https://juejin.cn/post/7598744870996885547</guid>    <pubDate>2026-01-26T03:52:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598744870996885547" data-draft-id="7599496293161812009" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•æ·±å…¥ç†è§£ä¸šåŠ¡éœ€æ±‚ï¼šä»æŠ€æœ¯è§†è§’åˆ°ä»·å€¼è½åœ°"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,æ¶æ„,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2026-01-26T03:52:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•æ·±å…¥ç†è§£ä¸šåŠ¡éœ€æ±‚ï¼šä»æŠ€æœ¯è§†è§’åˆ°ä»·å€¼è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:52:20.000Z" title="Mon Jan 26 2026 03:52:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œ<strong>ä¸šåŠ¡éœ€æ±‚åˆ†æ</strong>å¸¸å¸¸å†³å®šäº†é¡¹ç›®çš„æˆè´¥ã€‚å¾ˆå¤šæŠ€æœ¯äººå‘˜å–œæ¬¢ç›´æ¥â€œä¸Šæ‰‹å†™ä»£ç â€ï¼Œå´å¿½è§†äº†éœ€æ±‚èƒŒåçš„ä¸šåŠ¡é€»è¾‘ä¸ä»·å€¼ç›®æ ‡ã€‚ç»“æœå¾€å¾€å¯¼è‡´ <strong>â€œä»£ç æ²¡é—®é¢˜ï¼Œä½†äº§å“æ²¡ä»·å€¼â€</strong> ã€‚</p>
<p>æœ¬æ–‡å°†ä»æŠ€æœ¯è§†è§’å‡ºå‘ï¼Œæ·±å…¥æ¢è®¨å¦‚ä½•ç†è§£ä¸šåŠ¡éœ€æ±‚ï¼Œå¸®åŠ©å¼€å‘è€…å°†æŠ½è±¡çš„ä¸šåŠ¡é€»è¾‘è½¬åŒ–ä¸ºå¯è½åœ°çš„æŠ€æœ¯å®ç°ã€‚æœ¬æ–‡é€‚ç”¨äºäº§å“ç»ç†ã€ç³»ç»Ÿæ¶æ„å¸ˆä»¥åŠå¸Œæœ›æå‡â€œä¸šåŠ¡æ•æ„Ÿåº¦â€çš„æŠ€æœ¯ä»ä¸šè€…ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€é—®é¢˜ä¸èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆå¼€å‘è€…éœ€è¦ç†è§£ä¸šåŠ¡éœ€æ±‚ï¼Ÿ</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒæŠ€æœ¯äººå‘˜é¢å¯¹çš„ç—›ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>éœ€æ±‚æ¨¡ç³Šï¼Œå¯¼è‡´åå¤è¿”å·¥ï¼›</li>
<li>åŠŸèƒ½å®ç°æ­£ç¡®ï¼Œä½†æœªèƒ½è§£å†³ä¸šåŠ¡ç—›ç‚¹ï¼›</li>
<li>æŠ€æœ¯å†³ç­–ä¸ä¸šåŠ¡ç›®æ ‡è„±èŠ‚ï¼Œç¼ºä¹ä»·å€¼å¯¼å‘ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼ŒæŸç”µå•†é¡¹ç›®æå‡ºâ€œæå‡ä¸‹å•è½¬åŒ–ç‡â€çš„ç›®æ ‡ï¼Œç ”å‘å›¢é˜Ÿå´åªå…³æ³¨æ€§èƒ½ä¼˜åŒ–ï¼Œè€Œå¿½ç•¥äº†å…³é”®çš„â€œæ¨èé€»è¾‘â€ä¸â€œç»“ç®—ä½“éªŒâ€ã€‚è¿™å°±æ˜¯å…¸å‹çš„æŠ€æœ¯è„±ç¦»ä¸šåŠ¡çš„æ¡ˆä¾‹ã€‚</p>
<p>ä¸šåŠ¡éœ€æ±‚çš„ç†è§£ï¼Œä¸ä»…æ˜¯å¯¹â€œåšä»€ä¹ˆâ€çš„è§£è¯»ï¼Œæ›´æ˜¯å¯¹â€œä¸ºä»€ä¹ˆåšâ€çš„æŠ½è±¡å’Œé‡æ„ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€è§£å†³æ–¹æ¡ˆä¸å®è·µæ–¹æ³•</h2>
<h3 data-id="heading-3">1. ç†è§£ä¸šåŠ¡éœ€æ±‚çš„â€œä¸‰å±‚æ¨¡å‹â€</h3>
<p>æˆ‘ä»¬å¯ä»¥å°†ç†è§£ä¸šåŠ¡éœ€æ±‚çš„è¿‡ç¨‹åˆ†ä¸ºä¸‰å±‚ï¼š</p>

























<table><thead><tr><th>å±‚çº§</th><th>è¯´æ˜</th><th>è¾“å‡ºæˆæœ</th></tr></thead><tbody><tr><td>ä¸šåŠ¡å±‚ (Why)</td><td>ä¸šåŠ¡ç›®æ ‡ã€ä»·å€¼ä¸ç—›ç‚¹</td><td>ä¸šåŠ¡ç›®æ ‡æ–‡æ¡£ã€ä¸šåŠ¡æŒ‡æ ‡</td></tr><tr><td>åŠŸèƒ½å±‚ (What)</td><td>åŠŸèƒ½æ¨¡å—ä¸æµç¨‹è®¾è®¡</td><td>åŠŸèƒ½è¯´æ˜ä¹¦ã€ç”¨ä¾‹æ¨¡å‹</td></tr><tr><td>æŠ€æœ¯å±‚ (How)</td><td>æŠ€æœ¯å®ç°ä¸æ¶æ„æ–¹æ¡ˆ</td><td>ç³»ç»Ÿæ¶æ„ã€æ¥å£å®šä¹‰</td></tr></tbody></table>
<p>ä¾‹å¦‚ï¼Œéœ€æ±‚â€œæå‡ç”¨æˆ·æ´»è·ƒåº¦â€ï¼š</p>
<ul>
<li><strong>ä¸šåŠ¡å±‚</strong>ï¼šåˆ†ææ´»è·ƒåº¦ä½çš„åŸå› ï¼ˆå¦‚ç•™å­˜ç‡ä½ã€ç™»å½•ä¹ æƒ¯å·®ï¼‰ã€‚</li>
<li><strong>åŠŸèƒ½å±‚</strong>ï¼šæå‡ºâ€œç­¾åˆ°é¢†ç§¯åˆ†â€ã€â€œæ¨é€æé†’â€ç­‰æ–¹æ¡ˆã€‚</li>
<li><strong>æŠ€æœ¯å±‚</strong>ï¼šè®¾è®¡å¯¹åº”çš„å¾®æœåŠ¡æ¥å£ä¸ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">2. ä½¿ç”¨äº‹ä»¶é£æš´(Event Storming)åˆ†æä¸šåŠ¡æµç¨‹</h3>
<p>äº‹ä»¶é£æš´æ˜¯ä¸€ç§å¿«é€Ÿå»ºæ¨¡æ–¹æ³•ï¼Œå¸®åŠ©å›¢é˜Ÿä»¥ <strong>äº‹ä»¶é©±åŠ¨è§†è§’</strong> ç†è§£ä¸šåŠ¡ã€‚</p>
<h4 data-id="heading-5">å®è·µæ­¥éª¤ï¼š</h4>
<ol>
<li><strong>æ”¶é›†å…³é”®ä¸šåŠ¡äº‹ä»¶</strong>ï¼ˆå¦‚â€œç”¨æˆ·æ³¨å†Œâ€â€œä¸‹å•æˆåŠŸâ€â€œè®¢å•æ”¯ä»˜å®Œæˆâ€ï¼‰ã€‚</li>
<li><strong>ç»˜åˆ¶äº‹ä»¶æ—¶é—´çº¿</strong>ï¼Œå±•ç¤ºä¸šåŠ¡æµç¨‹ä¸­çš„é€»è¾‘é¡ºåºã€‚</li>
<li><strong>è¯†åˆ«èšåˆæ ¹(Aggregate Root)</strong> ï¼Œå¯»æ‰¾ç³»ç»Ÿè¾¹ç•Œä¸æ ¸å¿ƒå®ä½“ã€‚</li>
<li><strong>æç‚¼å‘½ä»¤ä¸æŸ¥è¯¢æ¨¡å‹</strong>ï¼Œä¸ºåç»­çš„æŠ€æœ¯å®ç°åšå‡†å¤‡ã€‚</li>
</ol>
<h4 data-id="heading-6">ç®€åŒ–ç¤ºä¾‹ï¼ˆè®¢å•æ”¯ä»˜æµç¨‹ï¼‰ï¼š</h4>
<pre><code class="hljs language-css" lang="css">graph LR
<span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[ç”¨æˆ·ä¸‹å•]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[ç³»ç»Ÿç”Ÿæˆè®¢å•]</span>
<span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[åº“å­˜æ ¡éªŒ]</span>
C --&gt; D<span class="hljs-selector-attr">[æ”¯ä»˜ç½‘å…³è°ƒç”¨]</span>
D --&gt; E<span class="hljs-selector-attr">[è®¢å•æ”¯ä»˜å®Œæˆ]</span>
E --&gt; F<span class="hljs-selector-attr">[è§¦å‘å‘è´§æµç¨‹]</span>
</code></pre>
<p>è¿™å¼ ç®€å•çš„ä¸šåŠ¡äº‹ä»¶å›¾å¸®åŠ©å›¢é˜Ÿå¿«é€Ÿè¯†åˆ«ç³»ç»ŸèŒè´£ä¸æœåŠ¡è¾¹ç•Œï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>åº“å­˜æ ¡éªŒ â†’ å±äºâ€œåº“å­˜å¾®æœåŠ¡â€</li>
<li>æ”¯ä»˜ç½‘å…³è°ƒç”¨ â†’ å±äºâ€œæ”¯ä»˜æœåŠ¡â€</li>
<li>å‘è´§æµç¨‹ â†’ å±äºâ€œç‰©æµæœåŠ¡â€</li>
</ul>
<hr/>
<h3 data-id="heading-7">3. è½¬åŒ–ä¸ºæŠ€æœ¯å®ç°ï¼ˆä»£ç ä¸æ¨¡å‹ï¼‰</h3>
<p>åœ¨æ˜ç¡®ä¸šåŠ¡é€»è¾‘åï¼ŒæŠ€æœ¯å®ç°åº”ä»¥â€œä¸šåŠ¡è¯­è¨€â€å‘½åå’Œç»„ç»‡ä»£ç ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰æ€æƒ³ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># ç¤ºä¾‹ï¼šè®¢å•ä¸šåŠ¡é€»è¾‘çš„é¢†åŸŸæ¨¡å‹ï¼ˆPythonï¼‰</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, user_id, items</span>):
        <span class="hljs-variable language_">self</span>.user_id = user_id
        <span class="hljs-variable language_">self</span>.items = items
        <span class="hljs-variable language_">self</span>.status = <span class="hljs-string">"CREATED"</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">confirm_payment</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, payment_id</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-symbol">payment_id:</span>
            <span class="hljs-keyword">raise</span> <span class="hljs-title class_">ValueError</span>(<span class="hljs-string">"Invalid payment"</span>)
        <span class="hljs-variable language_">self</span>.status = <span class="hljs-string">"PAID"</span>
        <span class="hljs-variable language_">self</span>.trigger_delivery()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">trigger_delivery</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):
        print(<span class="hljs-string">"Triggering delivery workflow..."</span>)

<span class="hljs-comment"># ç¤ºä¾‹è°ƒç”¨</span>
order = <span class="hljs-title class_">Order</span>(user_id=<span class="hljs-number">1001</span>, items=[<span class="hljs-string">'item-001'</span>])
order.confirm_payment(payment_id=<span class="hljs-string">'pay-12345'</span>)
</code></pre>
<p>ğŸ’¡ <strong>å…³é”®ç‚¹</strong>ï¼šä¸šåŠ¡è¡Œä¸ºï¼ˆå¦‚ <code>confirm_payment</code>ï¼‰åœ¨æ¨¡å‹ä¸­ä»¥åŠ¨è¯å½¢å¼å‡ºç°ï¼Œä½¿ä»£ç æœ¬èº«ä½“ç°ä¸šåŠ¡è¯­ä¹‰ï¼Œè€Œä¸ä»…æ˜¯æŠ€æœ¯å®ç°ã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€ä¼˜ç¼ºç‚¹åˆ†æä¸å®æˆ˜å»ºè®®</h2>
<h3 data-id="heading-9">âœ… ä¼˜ç‚¹</h3>
<ul>
<li><strong>å‡å°‘æ²Ÿé€šæŸè€—</strong>ï¼šä¸šåŠ¡ä¸æŠ€æœ¯æœ‰å…±åŒè¯­è¨€ã€‚</li>
<li><strong>æé«˜éœ€æ±‚è½¬åŒ–æ•ˆç‡</strong>ï¼šå¿«é€Ÿå®šä½ä¸šåŠ¡ç—›ç‚¹ï¼Œæå‡äº¤ä»˜è´¨é‡ã€‚</li>
<li><strong>å¢å¼ºç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§</strong>ï¼šä¸šåŠ¡é€»è¾‘å†…èšæ¸…æ™°ã€ä»£ç è¯­ä¹‰å¯è¯»ã€‚</li>
</ul>
<h3 data-id="heading-10">âš ï¸ ç¼ºç‚¹</h3>
<ul>
<li><strong>å‰æœŸæŠ•å…¥è¾ƒå¤§</strong>ï¼šä¸šåŠ¡å»ºæ¨¡éœ€å›¢é˜Ÿå…±åŒå‚ä¸ï¼ŒåˆæœŸæˆæœ¬è¾ƒé«˜ã€‚</li>
<li><strong>ç†è§£æ·±åº¦ä¾èµ–é¢†åŸŸç»éªŒ</strong>ï¼šç¼ºä¹ä¸šåŠ¡èƒŒæ™¯çš„å›¢é˜Ÿå¯èƒ½è¯¯åˆ¤éœ€æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-11">ğŸ’¡ å®æˆ˜å»ºè®®</h3>
<ol>
<li><strong>ä¸ä¸šåŠ¡æ–¹å…±å»ºæ¨¡å‹</strong>ï¼šå®šæœŸä¸¾åŠâ€œä¸šåŠ¡å»ºæ¨¡å·¥ä½œåŠâ€ã€‚</li>
<li><strong>é‡‡ç”¨é¢†åŸŸæœ¯è¯­å‘½åä»£ç </strong>ï¼šè®©ä»£ç å³æ–‡æ¡£ã€‚</li>
<li><strong>ä»ç»“æœå‡ºå‘åæ¨éœ€æ±‚</strong>ï¼šå§‹ç»ˆé—®è‡ªå·±â€”â€”â€œè¿™æ®µä»£ç ä¸ºä¸šåŠ¡åˆ›é€ äº†ä»€ä¹ˆä»·å€¼ï¼Ÿâ€</li>
</ol>
<hr/>
<h2 data-id="heading-12">å››ã€ç»“è®º</h2>
<p>ç†è§£ä¸šåŠ¡éœ€æ±‚ï¼Œæ˜¯æŠ€æœ¯å·¥ç¨‹å¸ˆè¿ˆå‘ <strong>â€œæŠ€æœ¯ä¸å•†ä¸šèåˆâ€</strong> çš„å¿…ç»ä¹‹è·¯ã€‚<br/>
å®ƒä¸ä»…ä»…æ˜¯â€œçœ‹æ‡‚PRDâ€ï¼Œæ›´æ˜¯ä¸€ç§å°†æŠ½è±¡ä¸šåŠ¡ç›®æ ‡è½¬åŒ–ä¸ºå·¥ç¨‹è¯­è¨€çš„èƒ½åŠ›ã€‚</p>
<p>æœªæ¥ï¼Œéšç€ <strong>AI è¾…åŠ©å»ºæ¨¡</strong>ã€<strong>ä½ä»£ç å¹³å°</strong> çš„æˆç†Ÿï¼Œå¼€å‘è€…çš„è§’è‰²å°†ä¸ä»…é™äºâ€œæŠ€æœ¯å®ç°è€…â€ï¼Œè€Œä¼šæˆä¸º <strong>â€œä¸šåŠ¡ä»·å€¼åˆ›é€ è€…â€</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-13">äº”ã€å‚è€ƒèµ„æ–™</h2>
<ol>
<li>Eric Evans. <em>Domain-Driven Design: Tackling Complexity in the Heart of Software.</em></li>
<li>Alberto Brandolini. <em>Introducing Event Storming: An Act of Deliberate Discovery.</em></li>
<li>Martin Fowler. <a href="https://link.juejin.cn?target=https%3A%2F%2Fmartinfowler.com%2FeaaCatalog%2F" target="_blank" title="https://martinfowler.com/eaaCatalog/" ref="nofollow noopener noreferrer">Patterns of Enterprise Application Architecture</a>.</li>
<li>ThoughtWorks TechRadar: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.thoughtworks.com%2Fradar" target="_blank" title="https://www.thoughtworks.com/radar" ref="nofollow noopener noreferrer">Understanding the Value of Domain-Driven Design</a>.</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‹ä»¶é£æš´ï¼ˆEvent Stormingï¼‰** é€šå¸¸å¸®åŠ©å›¢é˜Ÿç†è§£å¤æ‚ä¸šåŠ¡é¢†åŸŸ]]></title>    <link>https://juejin.cn/post/7598830215259783204</link>    <guid>https://juejin.cn/post/7598830215259783204</guid>    <pubDate>2026-01-26T03:54:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598830215259783204" data-draft-id="7598830215259750436" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‹ä»¶é£æš´ï¼ˆEvent Stormingï¼‰** é€šå¸¸å¸®åŠ©å›¢é˜Ÿç†è§£å¤æ‚ä¸šåŠ¡é¢†åŸŸ"/> <meta itemprop="keywords" content="æ¶æ„,äººå·¥æ™ºèƒ½,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2026-01-26T03:54:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‹ä»¶é£æš´ï¼ˆEvent Stormingï¼‰** é€šå¸¸å¸®åŠ©å›¢é˜Ÿç†è§£å¤æ‚ä¸šåŠ¡é¢†åŸŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:54:52.000Z" title="Mon Jan 26 2026 03:54:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">ğŸ§© ä¸€ã€äº‹ä»¶é£æš´ç»“æœçš„å…¸å‹æ„æˆ</h2>
<p>ä¸€æ¬¡å®Œæ•´çš„äº‹ä»¶é£æš´é€šå¸¸ä¼šäº§å‡ºä»¥ä¸‹å‡ ç±»ä¿¡æ¯ï¼š</p>



































<table><thead><tr><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>é¢†åŸŸäº‹ä»¶ (Domain Event)</strong></td><td><code>è®¢å•å·²åˆ›å»º</code>ã€<code>æ”¯ä»˜å®Œæˆ</code></td><td>ç³»ç»Ÿä¸­å‘ç”Ÿçš„ä¸šåŠ¡äº‹å®</td></tr><tr><td><strong>å‘½ä»¤ (Command)</strong></td><td><code>åˆ›å»ºè®¢å•</code>ã€<code>ç¡®è®¤æ”¯ä»˜</code></td><td>ç”¨æˆ·æˆ–ç³»ç»Ÿçš„è¡Œä¸ºæ„å›¾</td></tr><tr><td><strong>èšåˆ (Aggregate)</strong></td><td>è®¢å•ã€ç”¨æˆ·ã€å•†å“</td><td>ç®¡ç†ä¸šåŠ¡çŠ¶æ€ä¸è§„åˆ™çš„æ ¸å¿ƒæ¨¡å‹</td></tr><tr><td><strong>å¤–éƒ¨ç³»ç»Ÿ / å‚ä¸è€… (Actor/System)</strong></td><td>æ”¯ä»˜ç½‘å…³ã€åº“å­˜ç³»ç»Ÿ</td><td>ä¸æœ¬ç³»ç»Ÿäº¤äº’çš„å¤–éƒ¨è¦ç´ </td></tr><tr><td><strong>ç­–ç•¥/æµç¨‹ (Policy/Process)</strong></td><td>â€œæ”¯ä»˜å®Œæˆåè§¦å‘å‘è´§â€</td><td>äº‹ä»¶å“åº”é€»è¾‘æˆ–ä¸šåŠ¡è§„åˆ™</td></tr></tbody></table>
<p>äº‹ä»¶é£æš´çš„æ ¸å¿ƒä»·å€¼æ˜¯ï¼šè®©äº‹ä»¶æµä¸²è”èµ·å„é¢†åŸŸè¾¹ç•Œã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§­ äºŒã€ä»äº‹ä»¶é£æš´åˆ°æ¶æ„çš„æ˜ å°„æ­¥éª¤</h2>
<h3 data-id="heading-2"><strong>1ï¸âƒ£ æ­¥éª¤ä¸€ï¼šè¯†åˆ«é¢†åŸŸè¾¹ç•Œä¸é™ç•Œä¸Šä¸‹æ–‡ (Bounded Context)</strong></h3>
<blockquote>
<p>æ¯ä¸ªâ€œé¢†åŸŸèšé›†â€çš„äº‹ä»¶åºåˆ—ï¼Œå¯å½’å…¥ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚åœ¨ä¸€ä¸ªç”µå•†äº‹ä»¶é£æš´ä¸­ï¼š</p>
<ul>
<li>ç”¨æˆ·æ³¨å†Œã€ç™»å½•ç›¸å…³äº‹ä»¶ â†’ <code>ç”¨æˆ·ä¸Šä¸‹æ–‡</code></li>
<li>è®¢å•åˆ›å»ºã€æ”¯ä»˜ã€å‘è´§ç­‰äº‹ä»¶ â†’ <code>è®¢å•ä¸Šä¸‹æ–‡</code></li>
<li>ç§¯åˆ†è®¡ç®—ã€ä¼˜æƒ åˆ¸ä½¿ç”¨ â†’ <code>è¥é”€ä¸Šä¸‹æ–‡</code></li>
</ul>
<p>è¿™äº›ä¸Šä¸‹æ–‡å°†æˆä¸ºæ¶æ„ä¸­çš„æœåŠ¡å•å…ƒï¼ˆå¯èƒ½æ˜¯å¾®æœåŠ¡ã€æ¨¡å—æˆ–é™ç•Œç»„ä»¶ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>2ï¸âƒ£ æ­¥éª¤äºŒï¼šå®šä¹‰ä¸Šä¸‹æ–‡é—´çš„äº¤äº’</strong></h3>
<p>äº¤äº’é€šå¸¸ä½“ç°ä¸º <strong>äº‹ä»¶æµæˆ–å‘½ä»¤è°ƒç”¨</strong>ï¼Œå¯¹åº”ç³»ç»Ÿä¸­çš„ï¼š</p>
<ul>
<li>å¼‚æ­¥äº‹ä»¶æ€»çº¿ï¼ˆKafkaã€RabbitMQ ç­‰ï¼‰</li>
<li>RESTful API / gRPC è°ƒç”¨</li>
<li>Saga / Event-Driven Orchestration æµç¨‹</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">è®¢å•ä¸Šä¸‹æ–‡(Order Context) 
   â†“ è§¦å‘äº‹ä»¶ â†’ <span class="hljs-selector-attr">[æ”¯ä»˜å®Œæˆäº‹ä»¶]</span>
æ”¯ä»˜ä¸Šä¸‹æ–‡(Payment Context)
   â†“ å“åº”äº‹ä»¶ â†’ <span class="hljs-selector-attr">[å‘è´§æŒ‡ä»¤]</span>
ç‰©æµä¸Šä¸‹æ–‡(Shipping Context)
</code></pre>
<p>é€šè¿‡è¿™äº›äº¤äº’ï¼Œå¯ä»¥é€æ­¥æ˜¾ç°ç³»ç»Ÿæ¶æ„ä¸­çš„ä¾èµ–å…³ç³»ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3ï¸âƒ£ æ­¥éª¤ä¸‰ï¼šæ˜ å°„åˆ°æŠ€æœ¯æ¶æ„å±‚çº§</strong></h3>
<p>å°†ä¸šåŠ¡ä¸Šä¸‹æ–‡æ˜ å°„åˆ°å¸¸è§çš„ä¸‰å±‚æˆ–å¾®æœåŠ¡æ¶æ„ä¸­ï¼š</p>






























<table><thead><tr><th>å±‚çº§</th><th>å†…å®¹</th><th>æŠ€æœ¯å®ç°</th></tr></thead><tbody><tr><td><strong>æ¥å£å±‚ (API Layer)</strong></td><td>æ¥æ”¶å‘½ä»¤</td><td>Spring Boot Controllerã€NestJS Controller</td></tr><tr><td><strong>åº”ç”¨å±‚ (Application Layer)</strong></td><td>åè°ƒä¸šåŠ¡ç”¨ä¾‹</td><td>Serviceã€CommandHandler</td></tr><tr><td><strong>é¢†åŸŸå±‚ (Domain Layer)</strong></td><td>å°è£…é¢†åŸŸé€»è¾‘</td><td>Entityã€Aggregateã€Repository</td></tr><tr><td><strong>åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)</strong></td><td>å¤–éƒ¨ä¾èµ–</td><td>DBã€æ¶ˆæ¯é˜Ÿåˆ—ã€è¿œç¨‹è°ƒç”¨</td></tr></tbody></table>
<p>è¿™äº›å®šä¹‰å¸®åŠ©ä»â€œä¸šåŠ¡è¯­è¨€â€è¿‡æ¸¡åˆ°â€œå·¥ç¨‹å®ç°è¯­è¨€â€ã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>4ï¸âƒ£ æ­¥éª¤å››ï¼šç»˜åˆ¶æ¶æ„å›¾</strong></h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºæ„å›¾ï¼Œå°†äº‹ä»¶é£æš´ç»“æœæ˜ å°„ä¸ºæœåŠ¡åŠäº‹ä»¶æµï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">graph</span> <span class="hljs-selector-tag">LR</span>
    <span class="hljs-selector-tag">U</span><span class="hljs-selector-attr">[ç”¨æˆ·ä¸Šä¸‹æ–‡]</span> <span class="hljs-selector-tag">--</span>&gt;|åˆ›å»ºè®¢å•| <span class="hljs-selector-tag">O</span><span class="hljs-selector-attr">[è®¢å•æœåŠ¡]</span>
    <span class="hljs-selector-tag">O</span> <span class="hljs-selector-tag">--</span>&gt;|å‘å¸ƒäº‹ä»¶: è®¢å•å·²åˆ›å»º| <span class="hljs-selector-tag">P</span><span class="hljs-selector-attr">[æ”¯ä»˜æœåŠ¡]</span>
    <span class="hljs-selector-tag">P</span> <span class="hljs-selector-tag">--</span>&gt;|è§¦å‘äº‹ä»¶: æ”¯ä»˜å®Œæˆ| <span class="hljs-selector-tag">L</span><span class="hljs-selector-attr">[ç‰©æµæœåŠ¡]</span>
    <span class="hljs-selector-tag">O</span> <span class="hljs-selector-tag">--</span>&gt;|ç›‘å¬äº‹ä»¶: æ”¯ä»˜å®Œæˆ| <span class="hljs-selector-tag">L</span>
    <span class="hljs-selector-tag">L</span> <span class="hljs-selector-tag">--</span>&gt;|æ›´æ–°è®¢å•çŠ¶æ€| <span class="hljs-selector-tag">O</span>
    <span class="hljs-selector-tag">subgraph</span> <span class="hljs-selector-tag">MessageBus</span><span class="hljs-selector-attr">[äº‹ä»¶æ€»çº¿]</span>
    <span class="hljs-selector-tag">end</span>
    <span class="hljs-selector-tag">O</span> <span class="hljs-selector-tag">-</span><span class="hljs-selector-class">.-</span>&gt; <span class="hljs-selector-tag">MessageBus</span>
    <span class="hljs-selector-tag">P</span> <span class="hljs-selector-tag">-</span><span class="hljs-selector-class">.-</span>&gt; <span class="hljs-selector-tag">MessageBus</span>
    <span class="hljs-selector-tag">L</span> <span class="hljs-selector-tag">-</span><span class="hljs-selector-class">.-</span>&gt; <span class="hljs-selector-tag">MessageBus</span>
</code></pre>
<p>ğŸ§  <strong>è§£è¯»</strong>ï¼š</p>
<ul>
<li>å„ä¸Šä¸‹æ–‡ï¼ˆç”¨æˆ·ã€è®¢å•ã€æ”¯ä»˜ã€ç‰©æµï¼‰å¯¹åº”å¾®æœåŠ¡ã€‚</li>
<li>å®ƒä»¬ä¹‹é—´é€šè¿‡ <strong>äº‹ä»¶æ€»çº¿</strong> å¼‚æ­¥é€šä¿¡ã€‚</li>
<li>äº‹ä»¶åç§°ç›´æ¥ç»§æ‰¿è‡ªäº‹ä»¶é£æš´çš„ä¾¿åˆ©è´´ç»“æœï¼Œè¯­ä¹‰ä¸€è‡´ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>5ï¸âƒ£ æ­¥éª¤äº”ï¼šè¡¥å……ç³»ç»Ÿè§†è§’ï¼ˆéåŠŸèƒ½éœ€æ±‚ï¼‰</strong></h3>
<p>äº‹ä»¶é£æš´ä¸»è¦å…³æ³¨ä¸šåŠ¡ï¼Œä½†æ¶æ„è½¬åŒ–æ—¶è¿˜è¦è€ƒè™‘ï¼š</p>




















<table><thead><tr><th>ç»´åº¦</th><th>ç¤ºä¾‹</th><th>å¯¹åº”è®¾è®¡</th></tr></thead><tbody><tr><td><strong>æ•°æ®æŒä¹…åŒ–</strong></td><td>è®¢å•è¡¨ã€äº‹ä»¶æº¯æºè¡¨</td><td>MongoDB / PostgreSQL / Event Store</td></tr><tr><td><strong>é€šä¿¡æ¨¡å¼</strong></td><td>å¼‚æ­¥äº‹ä»¶ â†’ Kafkaï¼›åŒæ­¥æ¥å£ â†’ REST/gRPC</td><td/></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šçº¿ç¨‹çš„è¿™9ç§ç”¨é€”ï¼Œ99%çš„äººä¸çŸ¥é“ï¼]]></title>    <link>https://juejin.cn/post/7598830215259799588</link>    <guid>https://juejin.cn/post/7598830215259799588</guid>    <pubDate>2026-01-26T03:55:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598830215259799588" data-draft-id="7598830215259766820" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šçº¿ç¨‹çš„è¿™9ç§ç”¨é€”ï¼Œ99%çš„äººä¸çŸ¥é“ï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T03:55:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šçº¿ç¨‹çš„è¿™9ç§ç”¨é€”ï¼Œ99%çš„äººä¸çŸ¥é“ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:55:06.000Z" title="Mon Jan 26 2026 03:55:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¹¶å‘ç¼–ç¨‹æ˜¯ä¸€é¡¹éå¸¸é‡è¦çš„æŠ€æœ¯ï¼Œæ— è®ºåœ¨é¢è¯•ï¼Œè¿˜æ˜¯å·¥ä½œä¸­å‡ºç°çš„é¢‘ç‡éå¸¸é«˜ã€‚</p>
<p>ä¹‹å‰æˆ‘å‘è¡¨çš„ä¸€ç¯‡ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwNjMwMTgzMQ%3D%3D%26mid%3D2247492962%26idx%3D1%26sn%3D17ed1d2ed950b4e9160218b296d19d4e%26chksm%3Dc0e83d8af79fb49cc72fcafc8ed62822263106e54675ea8406a2e3daadb44e25364275af9082%26token%3D245805875%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwNjMwMTgzMQ==&amp;mid=2247492962&amp;idx=1&amp;sn=17ed1d2ed950b4e9160218b296d19d4e&amp;chksm=c0e83d8af79fb49cc72fcafc8ed62822263106e54675ea8406a2e3daadb44e25364275af9082&amp;token=245805875&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">èŠèŠå¹¶å‘ç¼–ç¨‹çš„10ä¸ªå‘</a>ã€‹ï¼Œåœ¨å…¨ç½‘å¹¿å—å¥½è¯„ã€‚è¯´æ˜äº†è¿™ç±»æ–‡ç« è¿˜æ˜¯æ¯”è¾ƒæœ‰ä»·å€¼çš„ï¼Œæ¥ä¸‹æ¥ï¼Œæ‰“ç®—ç»§ç»­èŠèŠå¹¶å‘ç¼–ç¨‹è¿™ä¸ªè¯é¢˜ã€‚</p>
<p>å¹¶å‘ç¼–ç¨‹è¯´ç™½äº†å°±æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½†å¤šçº¿ç¨‹ä¸€å®šæ¯”å•çº¿ç¨‹æ•ˆç‡æ›´é«˜ï¼Ÿ</p>
<p>ç­”ï¼šä¸ä¸€å®šï¼Œè¦çœ‹å…·ä½“ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>æ¯•ç«Ÿå¦‚æœä½¿ç”¨äº†å¤šçº¿ç¨‹ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¹‹é—´çš„ç«äº‰å’ŒæŠ¢å cpuèµ„æºï¼Œçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¹Ÿæ˜¯ç›¸å¯¹æ¥è¯´æ¯”è¾ƒè€—æ—¶çš„æ“ä½œã€‚</p>
<p>ä¸‹é¢è¿™å‡ ä¸ªé—®é¢˜åœ¨é¢è¯•ä¸­ï¼Œä½ å¿…å®šé‡åˆ°è¿‡ï¼š</p>
<ol>
<li>ä½ åœ¨å“ªæ¥ä¸šåŠ¡åœºæ™¯ä¸­ä½¿ç”¨è¿‡å¤šçº¿ç¨‹ï¼Ÿ</li>
<li>æ€ä¹ˆç”¨çš„ï¼Ÿ</li>
<li>è¸©è¿‡å“ªäº›å‘ï¼Ÿ</li>
</ol>
<p>ä»Šå¤©èŠèŠæˆ‘ä¹‹å‰åœ¨é¡¹ç›®ä¸­ç”¨å¹¶å‘ç¼–ç¨‹çš„12ç§ä¸šåŠ¡åœºæ™¯ï¼Œç»™æœ‰éœ€è¦çš„æœ‹å‹ä¸€ä¸ªå‚è€ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c1cdd0696df47feb415bb55e04c26fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770004506&amp;x-signature=AX22MWpmhHkaa4S1zqLEkUSOTVI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">1. ç®€å•å®šæ—¶ä»»åŠ¡</h2>
<p>å„ä½äº²çˆ±çš„æœ‹å‹ï¼Œä½ æ²¡çœ‹é”™ï¼Œ<code>Thread</code>ç±»çœŸçš„èƒ½åšå®šæ—¶ä»»åŠ¡ã€‚å¦‚æœä½ çœ‹è¿‡ä¸€äº›<code>å®šæ—¶ä»»åŠ¡æ¡†æ¶</code>çš„æºç ï¼Œä½ æœ€åä¼šå‘ç°ï¼Œå®ƒä»¬çš„åº•å±‚ä¹Ÿä¼šä½¿ç”¨Threadç±»ã€‚</p>
<p>å®ç°è¿™ç§å®šæ—¶ä»»åŠ¡çš„å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">try</span> {
                System.out.println(<span class="hljs-string">"ä¸‹è½½æ–‡ä»¶"</span>);
                Thread.sleep(<span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(e);
            }
        }
    }).start();
}
</code></pre>
<p>ä½¿ç”¨Threadç±»å¯ä»¥åšæœ€ç®€å•çš„å®šæ—¶ä»»åŠ¡ï¼Œåœ¨runæ–¹æ³•ä¸­æœ‰ä¸ªwhileçš„æ­»å¾ªç¯ï¼ˆå½“ç„¶è¿˜æœ‰å…¶ä»–æ–¹å¼ï¼‰ï¼Œæ‰§è¡Œæˆ‘ä»¬è‡ªå·±çš„ä»»åŠ¡ã€‚æœ‰ä¸ªéœ€è¦ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œéœ€è¦ç”¨<code>try...catch</code>æ•è·å¼‚å¸¸ï¼Œå¦åˆ™å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œå°±ç›´æ¥é€€å‡ºå¾ªç¯ï¼Œä¸‹æ¬¡å°†æ— æ³•ç»§ç»­æ‰§è¡Œäº†ã€‚</p>
<p>ä½†è¿™ç§æ–¹å¼åšçš„å®šæ—¶ä»»åŠ¡ï¼Œåªèƒ½å‘¨æœŸæ€§æ‰§è¡Œï¼Œä¸èƒ½æ”¯æŒå®šæ—¶åœ¨æŸä¸ªæ—¶é—´ç‚¹æ‰§è¡Œã€‚</p>
<p>ç‰¹åˆ«æé†’ä¸€ä¸‹ï¼Œè¯¥çº¿ç¨‹å»ºè®®å®šä¹‰æˆ<code>å®ˆæŠ¤çº¿ç¨‹</code>ï¼Œå¯ä»¥é€šè¿‡<code>setDaemon</code>æ–¹æ³•è®¾ç½®ï¼Œè®©å®ƒåœ¨åå°é»˜é»˜æ‰§è¡Œå°±å¥½ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ï¼šæ¯”å¦‚é¡¹ç›®ä¸­æœ‰æ—¶éœ€è¦æ¯éš”5åˆ†é’Ÿå»<code>ä¸‹è½½æŸä¸ªæ–‡ä»¶</code>ï¼Œæˆ–è€…æ¯éš”10åˆ†é’Ÿå»è¯»å–æ¨¡æ¿æ–‡ä»¶<code>ç”Ÿæˆé™æ€htmlé¡µé¢</code>ç­‰ç­‰ï¼Œä¸€äº›ç®€å•çš„å‘¨æœŸæ€§ä»»åŠ¡åœºæ™¯ã€‚</p>
<p>ä½¿ç”¨<code>Thread</code>ç±»åšå®šæ—¶ä»»åŠ¡çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼šè¿™ç§å®šæ—¶ä»»åŠ¡éå¸¸ç®€å•ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œå®¹æ˜“å…¥æ‰‹ï¼Œå¯¹äºé‚£äº›ç®€å•çš„å‘¨æœŸæ€§ä»»åŠ¡ï¼Œæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼šä¸æ”¯æŒæŒ‡å®šæŸä¸ªæ—¶é—´ç‚¹æ‰§è¡Œä»»åŠ¡ï¼Œä¸æ”¯æŒå»¶è¿Ÿæ‰§è¡Œç­‰æ“ä½œï¼ŒåŠŸèƒ½è¿‡äºå•ä¸€ï¼Œæ— æ³•åº”å¯¹ä¸€äº›è¾ƒä¸ºå¤æ‚çš„åœºæ™¯ã€‚</p>
</li>
</ul>
<h2 data-id="heading-2">2.ç›‘å¬å™¨</h2>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸ªç›‘å¬å™¨ï¼Œå»ç›‘å¬æŸäº›æ•°æ®çš„å˜åŒ–ã€‚</p>
<p>æ¯”å¦‚ï¼šæˆ‘ä»¬åœ¨ä½¿ç”¨<code>canal</code>çš„æ—¶å€™ï¼Œéœ€è¦ç›‘å¬<code>binlog</code>çš„å˜åŒ–ï¼Œèƒ½å¤ŸåŠæ—¶æŠŠæ•°æ®åº“ä¸­çš„æ•°æ®ï¼ŒåŒæ­¥åˆ°å¦å¤–ä¸€ä¸ªä¸šåŠ¡æ•°æ®åº“ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/affe454823004309bd1f1dbe03a9554b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770004506&amp;x-signature=EXteLiBSOsZaDIQQK6wQ8MkAH94%3D" alt="" loading="lazy"/>
å¦‚æœç›´æ¥å†™ä¸€ä¸ªç›‘å¬å™¨å»ç›‘å¬æ•°æ®å°±å¤ªæ²¡æ„æ€äº†ï¼Œæˆ‘ä»¬æƒ³å®ç°è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼šåœ¨é…ç½®ä¸­å¿ƒæœ‰ä¸ªå¼€å…³ï¼Œé…ç½®ç›‘å¬å™¨æ˜¯å¦å¼€å¯ï¼Œå¦‚æœå¼€å¯äº†ä½¿ç”¨å•çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œã€‚</p>
<p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> CanalService {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">running</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">private</span> Thread thread;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CanalConnector canalConnector;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">//è¿æ¥canal</span>
        <span class="hljs-keyword">while</span>(running) {
           <span class="hljs-comment">//ä¸šåŠ¡å¤„ç†</span>
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> {
       thread = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-built_in">this</span>::handle, <span class="hljs-string">"name"</span>);
       running = <span class="hljs-literal">true</span>;
       thread.start();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span> {
       <span class="hljs-keyword">if</span>(!running) {
          <span class="hljs-keyword">return</span>;
       }
       running = <span class="hljs-literal">false</span>;
    }
}
</code></pre>
<p>åœ¨startæ–¹æ³•ä¸­å¼€å¯äº†ä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨è¯¥çº¿ç¨‹ä¸­å¼‚æ­¥æ‰§è¡Œhandleæ–¹æ³•çš„å…·ä½“ä»»åŠ¡ã€‚ç„¶åé€šè¿‡è°ƒç”¨stopæ–¹æ³•ï¼Œå¯ä»¥åœæ­¢è¯¥çº¿ç¨‹ã€‚</p>
<p>å…¶ä¸­ï¼Œä½¿ç”¨<code>volatile</code>å…³é”®å­—æ§åˆ¶çš„runningå˜é‡ä½œä¸ºå¼€å…³ï¼Œå®ƒå¯ä»¥æ§åˆ¶çº¿ç¨‹ä¸­çš„çŠ¶æ€ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæœ‰ä¸ªæ¯”è¾ƒå…³é”®çš„ç‚¹æ˜¯ï¼šå¦‚ä½•é€šè¿‡é…ç½®ä¸­å¿ƒçš„é…ç½®ï¼Œæ§åˆ¶è¿™ä¸ªå¼€å…³å‘¢ï¼Ÿ</p>
<p>ä»¥<code>apollo</code>é…ç½®ä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨é…ç½®ä¸­å¿ƒçš„åå°ï¼Œä¿®æ”¹é…ç½®ä¹‹åï¼Œè‡ªåŠ¨è·å–æœ€æ–°é…ç½®çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CanalConfig</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CanalService canalService;

    <span class="hljs-meta">@ApolloConfigChangeListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">change</span><span class="hljs-params">(ConfigChangeEvent event)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> event.getChange(<span class="hljs-string">"test.canal.enable"</span>).getNewValue();
        <span class="hljs-keyword">if</span>(BooleanUtils.toBoolean(value)) {
            canalService.start();
        } <span class="hljs-keyword">else</span> {
            canalService.stop();
        }
    }
}
</code></pre>
<p>é€šè¿‡<code>apollo</code>çš„<code>ApolloConfigChangeListener</code>æ³¨è§£ï¼Œå¯ä»¥ç›‘å¬é…ç½®å‚æ•°çš„å˜åŒ–ã€‚</p>
<p>å¦‚æœ<code>test.canal.enable</code>å¼€å…³é…ç½®çš„trueï¼Œåˆ™è°ƒç”¨canalServiceç±»çš„startæ–¹æ³•å¼€å¯canalæ•°æ®åŒæ­¥åŠŸèƒ½ã€‚å¦‚æœå¼€å…³é…ç½®çš„falseï¼Œåˆ™è°ƒç”¨canalServiceç±»çš„stopæ–¹æ³•ï¼Œè‡ªåŠ¨åœæ­¢canalæ•°æ®åŒæ­¥åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-3">3.æ”¶é›†æ—¥å¿—</h2>
<p>åœ¨æŸäº›é«˜å¹¶å‘çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ”¶é›†éƒ¨åˆ†ç”¨æˆ·çš„æ—¥å¿—ï¼ˆæ¯”å¦‚ï¼šç”¨æˆ·ç™»å½•çš„æ—¥å¿—ï¼‰ï¼Œå†™åˆ°æ•°æ®åº“ä¸­ï¼Œä»¥ä¾¿äºåšåˆ†æã€‚</p>
<p>ä½†ç”±äºé¡¹ç›®ä¸­ï¼Œè¿˜æ²¡æœ‰å¼•å…¥æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œæ¯”å¦‚ï¼š<code>kafka</code>ã€<code>rocketmq</code>ç­‰ã€‚</p>
<p>å¦‚æœç›´æ¥å°†æ—¥å¿—åŒæ­¥å†™å…¥æ•°æ®åº“ï¼Œå¯èƒ½ä¼šå½±å“æ¥å£æ€§èƒ½ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¤§å®¶å¾ˆè‡ªç„¶æƒ³åˆ°äº†å¼‚æ­¥å¤„ç†ã€‚</p>
<p>å®ç°è¿™ä¸ªéœ€æ±‚æœ€ç®€å•çš„åšæ³•æ˜¯ï¼Œå¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå¼‚æ­¥å†™å…¥æ•°æ®åˆ°æ•°æ®åº“å³å¯ã€‚</p>
<p>è¿™æ ·åšï¼Œå¯ä»¥æ˜¯å¯ä»¥ã€‚</p>
<p>ä½†å¦‚æœç”¨æˆ·ç™»å½•æ“ä½œçš„è€—æ—¶ï¼Œæ¯”å¼‚æ­¥å†™å…¥æ•°æ®åº“çš„æ—¶é—´è¦å°‘å¾—å¤šã€‚è¿™æ ·å¯¼è‡´çš„ç»“æœæ˜¯ï¼šç”Ÿäº§æ—¥å¿—çš„é€Ÿåº¦ï¼Œæ¯”æ¶ˆè´¹æ—¥å¿—çš„é€Ÿåº¦è¦å¿«å¾—å¤šï¼Œæœ€ç»ˆçš„æ€§èƒ½ç“¶é¢ˆåœ¨æ¶ˆè´¹ç«¯ã€‚</p>
<p>å…¶å®ï¼Œè¿˜æœ‰æ›´ä¼˜é›…çš„å¤„ç†æ–¹å¼ï¼Œè™½è¯´æ²¡æœ‰ä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä½†å€Ÿç”¨äº†å®ƒçš„æ€æƒ³ã€‚</p>
<p>è¿™å¥—è®°å½•ç™»å½•æ—¥å¿—çš„åŠŸèƒ½ï¼Œåˆ†ä¸ºï¼šæ—¥å¿—ç”Ÿäº§ç«¯ã€æ—¥å¿—å­˜å‚¨ç«¯å’Œæ—¥å¿—æ¶ˆè´¹ç«¯ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d39d5d0bdd84f22ac94821a4c7f3dc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770004506&amp;x-signature=2MIfQwu%2FLeEcPguNAUjA8AQwuhw%3D" alt="" loading="lazy"/></p>
<p>å…ˆå®šä¹‰äº†ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginLogQueue</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">QUEUE_MAX_SIZE</span>    <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;

    <span class="hljs-keyword">private</span> <span class="hljs-type">BlockingQueueblockingQueue</span> <span class="hljs-variable">queue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(QUEUE_MAX_SIZE);

    <span class="hljs-comment">//ç”Ÿæˆæ¶ˆæ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">push</span><span class="hljs-params">(LoginLog loginLog)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.queue.add(loginLog);
    } 

    <span class="hljs-comment">//æ¶ˆè´¹æ¶ˆæ¯</span>
    <span class="hljs-keyword">public</span> LoginLog <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> {
        <span class="hljs-type">LoginLog</span> <span class="hljs-variable">loginLog</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            loginLog = <span class="hljs-built_in">this</span>.queue.take();
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p>ç„¶åå®šä¹‰äº†ä¸€ä¸ªæ—¥å¿—çš„ç”Ÿäº§è€…ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginSerivce</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> LoginLogQueue loginLogQueue;

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">login</span><span class="hljs-params">(UserInfo userInfo)</span> {
        <span class="hljs-comment">//ä¸šåŠ¡å¤„ç†</span>
        <span class="hljs-type">LoginLog</span> <span class="hljs-variable">loginLog</span> <span class="hljs-operator">=</span> convert(userInfo);
        loginLogQueue.push(loginLog);
    }  
}
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†æ—¥å¿—çš„æ¶ˆè´¹è€…ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginInfoConsumer</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> LoginLogQueue queue;

    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> voit init {
       <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
          <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
              <span class="hljs-type">LoginLog</span> <span class="hljs-variable">loginLog</span> <span class="hljs-operator">=</span> queue.take();
              <span class="hljs-comment">//å†™å…¥æ•°æ®åº“</span>
          }
        }).start();
    }
}
</code></pre>
<p>å½“ç„¶ï¼Œè¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨å•çº¿ç¨‹æ¥æ”¶ç™»å½•æ—¥å¿—ï¼Œä¸ºäº†æå‡æ€§èƒ½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚ï¼šå†™å…¥æ•°æ®åº“ï¼‰ç­‰ã€‚</p>
<h2 data-id="heading-4">4.excelå¯¼å…¥</h2>
<p>æˆ‘ä»¬å¯èƒ½ä¼šç»å¸¸æ”¶åˆ°è¿è¥åŒå­¦æè¿‡æ¥çš„excelæ•°æ®å¯¼å…¥éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šå°†æŸä¸€å¤§ç±»ä¸‹çš„æ‰€æœ‰å­ç±»ä¸€æ¬¡æ€§å¯¼å…¥ç³»ç»Ÿï¼Œæˆ–è€…å¯¼å…¥ä¸€æ‰¹æ–°çš„ä¾›åº”å•†æ•°æ®ç­‰ç­‰ã€‚</p>
<p>æˆ‘ä»¬ä»¥å¯¼å…¥ä¾›åº”å•†æ•°æ®ä¸ºä¾‹ï¼Œå®ƒæ‰€æ¶‰åŠçš„ä¸šåŠ¡æµç¨‹å¾ˆé•¿ï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>è°ƒç”¨å¤©çœ¼æŸ¥æ¥å£æ ¡éªŒä¼ä¸šåç§°å’Œç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç ã€‚</li>
<li>å†™å…¥ä¾›åº”å•†åŸºæœ¬è¡¨</li>
<li>å†™å…¥ç»„ç»‡è¡¨</li>
<li>ç»™ä¾›åº”å•†è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç”¨æˆ·</li>
<li>ç»™è¯¥ç”¨æˆ·åˆ†é…æƒé™</li>
<li>è‡ªå®šä¹‰åŸŸå</li>
<li>å‘ç«™å†…é€šçŸ¥</li>
</ol>
<p>ç­‰ç­‰ã€‚</p>
<p>å¦‚æœåœ¨ç¨‹åºä¸­ï¼Œè§£æå®Œexcelï¼Œè¯»å–äº†æ‰€æœ‰æ•°æ®ä¹‹åã€‚ç”¨å•çº¿ç¨‹ä¸€æ¡æ¡å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå¯èƒ½è€—æ—¶ä¼šéå¸¸é•¿ã€‚</p>
<p>ä¸ºäº†æå‡excelæ•°æ®å¯¼å…¥æ•ˆç‡ï¼Œéå¸¸æœ‰å¿…è¦ä½¿ç”¨å¤šçº¿ç¨‹æ¥å¤„ç†ã€‚</p>
<p>å½“ç„¶åœ¨javaä¸­å®ç°å¤šçº¿ç¨‹çš„æ‰‹æ®µæœ‰å¾ˆå¤šç§ï¼Œä¸‹é¢é‡ç‚¹èŠèŠjava8ä¸­æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼š<code>parallelStream</code>ã€‚</p>
<p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">supplierList.parallelStream().forEach(x -&gt; importSupplier(x));
</code></pre>
<p><code>parallelStream</code>æ˜¯ä¸€ä¸ªå¹¶è¡Œæ‰§è¡Œçš„æµï¼Œå®ƒé»˜è®¤é€šè¿‡<code>ForkJoinPool</code>å®ç°çš„ï¼Œèƒ½æé«˜ä½ çš„å¤šçº¿ç¨‹ä»»åŠ¡çš„é€Ÿåº¦ã€‚</p>
<p><code>ForkJoinPool</code>å¤„ç†çš„è¿‡ç¨‹ä¼šåˆ†è€Œæ²»ä¹‹ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<code>å°†ä¸€ä¸ªå¤§ä»»åŠ¡åˆ‡åˆ†æˆå¤šä¸ªå°ä»»åŠ¡</code>ã€‚æ¯ä¸ªå°ä»»åŠ¡éƒ½èƒ½å•ç‹¬æ‰§è¡Œï¼Œæœ€åå®ƒä¼šæŠŠæ‰€ç”¨ä»»åŠ¡çš„æ‰§è¡Œç»“æœè¿›è¡Œæ±‡æ€»ã€‚</p>
<p>ä¸‹é¢ç”¨ä¸€å¼ å›¾ç®€å•ä»‹ç»ä¸€ä¸‹ForkJoinPoolçš„åŸç†ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49631443b7274584a83313137ae2e2bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770004506&amp;x-signature=CuRx6HVWAQ%2FvsDml1HdJam2pssk%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶é™¤äº†excelå¯¼å…¥ä¹‹å¤–ï¼Œè¿˜æœ‰ç±»ä¼¼çš„è¯»å–æ–‡æœ¬æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹æ³•å¤„ç†ã€‚</p>
<blockquote>
<p>æ¸©é¦¨çš„æé†’ä¸€ä¸‹ï¼Œå¦‚æœä¸€æ¬¡æ€§å¯¼å…¥çš„æ•°æ®éå¸¸å¤šï¼Œç”¨å¤šçº¿ç¨‹å¤„ç†ï¼Œå¯èƒ½ä¼šä½¿ç³»ç»Ÿçš„cpuä½¿ç”¨ç‡é£™å‡ï¼Œéœ€è¦ç‰¹åˆ«å…³æ³¨ã€‚</p>
</blockquote>
<h2 data-id="heading-5">5.æŸ¥è¯¢æ¥å£</h2>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æŸä¸ªæŸ¥è¯¢æ¥å£ä¸­ï¼Œè°ƒç”¨å…¶ä»–æœåŠ¡çš„æ¥å£ï¼Œç»„åˆæ•°æ®ä¹‹åï¼Œä¸€èµ·è¿”å›ã€‚</p>
<p>æ¯”å¦‚æœ‰è¿™æ ·çš„ä¸šåŠ¡åœºæ™¯ï¼š</p>
<p>åœ¨ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢æ¥å£ä¸­éœ€è¦è¿”å›ï¼šç”¨æˆ·åç§°ã€æ€§åˆ«ã€ç­‰çº§ã€å¤´åƒã€ç§¯åˆ†ã€æˆé•¿å€¼ç­‰ä¿¡æ¯ã€‚</p>
<p>è€Œç”¨æˆ·åç§°ã€æ€§åˆ«ã€ç­‰çº§ã€å¤´åƒåœ¨ç”¨æˆ·æœåŠ¡ä¸­ï¼Œç§¯åˆ†åœ¨ç§¯åˆ†æœåŠ¡ä¸­ï¼Œæˆé•¿å€¼åœ¨æˆé•¿å€¼æœåŠ¡ä¸­ã€‚ä¸ºäº†æ±‡æ€»è¿™äº›æ•°æ®ç»Ÿä¸€è¿”å›ï¼Œéœ€è¦å¦å¤–æä¾›ä¸€ä¸ªå¯¹å¤–æ¥å£æœåŠ¡ã€‚</p>
<p>äºæ˜¯ï¼Œç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢æ¥å£éœ€è¦è°ƒç”¨ç”¨æˆ·æŸ¥è¯¢æ¥å£ã€ç§¯åˆ†æŸ¥è¯¢æ¥å£ å’Œ æˆé•¿å€¼æŸ¥è¯¢æ¥å£ï¼Œç„¶åæ±‡æ€»æ•°æ®ç»Ÿä¸€è¿”å›ã€‚</p>
<p>è°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93aa59a74685455d910fc6962f8bdebe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770004506&amp;x-signature=fn66NGI9o5afFQLpZ01x%2FXUUb4w%3D" alt="" loading="lazy"/></p>
<p>è°ƒç”¨è¿œç¨‹æ¥å£æ€»è€—æ—¶ 530ms = 200ms + 150ms + 180ms</p>
<p>æ˜¾ç„¶è¿™ç§ä¸²è¡Œè°ƒç”¨è¿œç¨‹æ¥å£æ€§èƒ½æ˜¯éå¸¸ä¸å¥½çš„ï¼Œè°ƒç”¨è¿œç¨‹æ¥å£æ€»çš„è€—æ—¶ä¸ºæ‰€æœ‰çš„è¿œç¨‹æ¥å£è€—æ—¶ä¹‹å’Œã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•ä¼˜åŒ–è¿œç¨‹æ¥å£æ€§èƒ½å‘¢ï¼Ÿ</p>
<p>æ—¢ç„¶ä¸²è¡Œè°ƒç”¨å¤šä¸ªè¿œç¨‹æ¥å£æ€§èƒ½å¾ˆå·®ï¼Œä¸ºä»€ä¹ˆä¸æ”¹æˆå¹¶è¡Œå‘¢ï¼Ÿ</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65e3ef20c3e04cf98491af9f56fccd28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770004506&amp;x-signature=RA%2BTjzT%2B%2B0M16pTzvadZicSwHSg%3D" alt="" loading="lazy"/></p>
<p>è°ƒç”¨è¿œç¨‹æ¥å£æ€»è€—æ—¶ 200ms = 200msï¼ˆå³è€—æ—¶æœ€é•¿çš„é‚£æ¬¡è¿œç¨‹æ¥å£è°ƒç”¨ï¼‰</p>
<p>åœ¨java8ä¹‹å‰å¯ä»¥é€šè¿‡å®ç°<code>Callable</code>æ¥å£ï¼Œè·å–çº¿ç¨‹è¿”å›ç»“æœã€‚</p>
<p>java8ä»¥åé€šè¿‡<code>CompleteFuture</code>ç±»å®ç°è¯¥åŠŸèƒ½ã€‚æˆ‘ä»¬è¿™é‡Œä»¥CompleteFutureä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> UserInfo <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(Long id)</span> <span class="hljs-keyword">throws</span> InterruptedException, ExecutionException {
    <span class="hljs-keyword">final</span> <span class="hljs-type">UserInfo</span> <span class="hljs-variable">userInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserInfo</span>();
    <span class="hljs-type">CompletableFuture</span> <span class="hljs-variable">userFuture</span> <span class="hljs-operator">=</span> CompletableFuture.supplyAsync(() -&gt; {
        getRemoteUserAndFill(id, userInfo);
        <span class="hljs-keyword">return</span> Boolean.TRUE;
    }, executor);

    <span class="hljs-type">CompletableFuture</span> <span class="hljs-variable">bonusFuture</span> <span class="hljs-operator">=</span> CompletableFuture.supplyAsync(() -&gt; {
        getRemoteBonusAndFill(id, userInfo);
        <span class="hljs-keyword">return</span> Boolean.TRUE;
    }, executor);

    <span class="hljs-type">CompletableFuture</span> <span class="hljs-variable">growthFuture</span> <span class="hljs-operator">=</span> CompletableFuture.supplyAsync(() -&gt; {
        getRemoteGrowthAndFill(id, userInfo);
        <span class="hljs-keyword">return</span> Boolean.TRUE;
    }, executor);
    CompletableFuture.allOf(userFuture, bonusFuture, growthFuture).join();

    userFuture.get();
    bonusFuture.get();
    growthFuture.get();
    <span class="hljs-keyword">return</span> userInfo;
}
</code></pre>
<p>æ¸©é¦¨æé†’ä¸€ä¸‹ï¼Œè¿™ä¸¤ç§æ–¹å¼åˆ«å¿˜äº†ä½¿ç”¨<code>çº¿ç¨‹æ± </code>ã€‚ç¤ºä¾‹ä¸­æˆ‘ç”¨åˆ°äº†<code>executor</code>ï¼Œè¡¨ç¤ºè‡ªå®šä¹‰çš„çº¿ç¨‹æ± ï¼Œä¸ºäº†é˜²æ­¢é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå‡ºç°çº¿ç¨‹è¿‡å¤šçš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-6">6.è·å–ç”¨æˆ·ä¸Šä¸‹æ–‡</h2>
<p>ä¸çŸ¥é“ä½ åœ¨é¡¹ç›®å¼€å‘æ—¶ï¼Œæœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„éœ€æ±‚ï¼šç”¨æˆ·ç™»å½•ä¹‹åï¼Œåœ¨æ‰€æœ‰çš„è¯·æ±‚æ¥å£ä¸­ï¼Œé€šè¿‡æŸä¸ªå…¬å…±æ–¹æ³•ï¼Œå°±èƒ½è·å–åˆ°å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼Ÿ</p>
<p>è·å–çš„ç”¨æˆ·ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬ä»¥<code>CurrentUser</code>ä¸ºä¾‹ã€‚</p>
<p><code>CurrentUser</code>å†…éƒ¨åŒ…å«äº†ä¸€ä¸ª<code>ThreadLocal</code>å¯¹è±¡ï¼Œå®ƒè´Ÿè´£ä¿å­˜å½“å‰çº¿ç¨‹çš„ç”¨æˆ·ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚å½“ç„¶ä¸ºäº†ä¿è¯åœ¨çº¿ç¨‹æ± ä¸­ï¼Œä¹Ÿèƒ½ä»ç”¨æˆ·ä¸Šä¸‹æ–‡ä¸­è·å–åˆ°æ­£ç¡®çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™é‡Œç”¨äº†é˜¿é‡Œçš„<code>TransmittableThreadLocal</code>ã€‚ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CurrentUser</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> TransmittableThreadLocal&lt;CurrentUser&gt; THREA_LOCAL = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransmittableThreadLocal</span>&lt;&gt;();
    
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-keyword">private</span> String userName;
    <span class="hljs-keyword">private</span> String password;
    <span class="hljs-keyword">private</span> String phone;
    ...
    
    <span class="hljs-keyword">public</span> statis <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(CurrentUser user)</span> {
      THREA_LOCAL.set(user);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getCurrent</span><span class="hljs-params">()</span> {
      <span class="hljs-keyword">return</span> THREA_LOCAL.get();
    }
}
</code></pre>
<p>è¿™é‡Œä¸ºä»€ä¹ˆç”¨äº†é˜¿é‡Œçš„TransmittableThreadLocalï¼Œè€Œä¸æ˜¯æ™®é€šçš„ThreadLocalå‘¢ï¼Ÿåœ¨çº¿ç¨‹æ± ä¸­ï¼Œç”±äºçº¿ç¨‹ä¼šè¢«å¤šæ¬¡å¤ç”¨ï¼Œå¯¼è‡´ä»æ™®é€šçš„ThreadLocalä¸­æ— æ³•è·å–æ­£ç¡®çš„ç”¨æˆ·ä¿¡æ¯ã€‚çˆ¶çº¿ç¨‹ä¸­çš„å‚æ•°ï¼Œæ²¡æ³•ä¼ é€’ç»™å­çº¿ç¨‹ï¼Œè€ŒTransmittableThreadLocalå¾ˆå¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ç„¶ååœ¨é¡¹ç›®ä¸­å®šä¹‰ä¸€ä¸ªå…¨å±€çš„spring mvcæ‹¦æˆªå™¨ï¼Œä¸“é—¨è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡åˆ°ThreadLocalä¸­ã€‚ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserInterceptor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HandlerInterceptorAdapter</span> {
   
   <span class="hljs-meta">@Override</span>  
   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception {
      <span class="hljs-type">CurrentUser</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getUser(request);
      <span class="hljs-keyword">if</span>(Objects.nonNull(user)) {
         CurrentUser.set(user);
      }
   } 
}
</code></pre>
<p>ç”¨æˆ·åœ¨è¯·æ±‚æˆ‘ä»¬æ¥å£æ—¶ï¼Œä¼šå…ˆè§¦å‘è¯¥æ‹¦æˆªå™¨ï¼Œå®ƒä¼šæ ¹æ®ç”¨æˆ·cookieä¸­çš„tokenï¼Œè°ƒç”¨è°ƒç”¨æ¥å£è·å–redisä¸­çš„ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚æœèƒ½è·å–åˆ°ï¼Œè¯´æ˜ç”¨æˆ·å·²ç»ç™»å½•ï¼Œåˆ™æŠŠç”¨æˆ·ä¿¡æ¯è®¾ç½®åˆ°CurrentUserç±»çš„ThreadLocalä¸­ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨apiæœåŠ¡çš„ä¸‹å±‚ï¼Œå³businesså±‚çš„æ–¹æ³•ä¸­ï¼Œå°±èƒ½è½»æ¾é€šè¿‡CurrentUser.getCurrent();æ–¹æ³•è·å–åˆ°æƒ³è¦çš„ç”¨æˆ·ä¸Šä¸‹æ–‡ä¿¡æ¯äº†ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/716f8f50a1534db785a2eba41e4c6c7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770004506&amp;x-signature=S5WovHiVYbFMen3cheAMaJqlg34%3D" alt="" loading="lazy"/></p>
<p>è¿™å¥—ç”¨æˆ·ä½“ç³»çš„æƒ³æ³•æ˜¯å¾ˆgoodçš„ï¼Œä½†æ·±å…¥ä½¿ç”¨åï¼Œå‘ç°äº†ä¸€ä¸ªå°æ’æ›²ï¼š</p>
<p>apiæœåŠ¡å’Œmqæ¶ˆè´¹è€…æœåŠ¡éƒ½å¼•ç”¨äº†businesså±‚ï¼Œbusinesså±‚ä¸­çš„æ–¹æ³•ä¸¤ä¸ªæœåŠ¡éƒ½èƒ½ç›´æ¥è°ƒç”¨ã€‚</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“åœ¨apiæœåŠ¡ä¸­ç”¨æˆ·æ˜¯éœ€è¦ç™»å½•çš„ï¼Œè€Œmqæ¶ˆè´¹è€…æœåŠ¡åˆ™ä¸éœ€è¦ç™»å½•ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44e766b9bfed43ae8af0be092bc68b08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770004506&amp;x-signature=TyvbIs6k9SghVb969pPlwFCzLS4%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœbusinessä¸­çš„æŸä¸ªæ–¹æ³•åˆšå¼€å§‹æ˜¯ç»™apiå¼€å‘çš„ï¼Œåœ¨æ–¹æ³•æ·±å¤„ä½¿ç”¨äº†CurrentUser.getCurrent();è·å–ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚ä½†åæ¥ï¼ŒæŸä½æ–°æ¥çš„å¸…å“¥åœ¨mqæ¶ˆè´¹è€…ä¸­ä¹Ÿè°ƒç”¨äº†é‚£ä¸ªæ–¹æ³•ï¼Œå¹¶æœªå‘è§‰è¿™ä¸ªå°æœºå…³ï¼Œå°±ä¼šä¸­æ‹›ï¼Œå‡ºç°æ‰¾ä¸åˆ°ç”¨æˆ·ä¸Šä¸‹æ–‡çš„é—®é¢˜ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bcfc398c332429b8cc072d2c57038e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770004506&amp;x-signature=Tqbw%2Fwb6NDWB2uzo19h1BEHljiE%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘å½“æ—¶çš„ç¬¬ä¸€ä¸ªæƒ³æ³•æ˜¯ï¼šä»£ç æ²¡åšå…¼å®¹å¤„ç†ï¼Œå› ä¸ºä¹‹å‰è¿™ç±»é—®é¢˜å¶å°”ä¼šå‘ç”Ÿä¸€æ¬¡ã€‚</p>
<p>æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ã€‚åªéœ€å…ˆåˆ¤æ–­ä¸€ä¸‹èƒ½å¦ä»CurrentUserä¸­è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœä¸èƒ½ï¼Œåˆ™å–é…ç½®çš„ç³»ç»Ÿç”¨æˆ·ä¿¡æ¯ã€‚ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> BusinessConfig businessConfig;

<span class="hljs-type">CurrentUser</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> CurrentUser.getCurrent();
<span class="hljs-keyword">if</span>(Objects.nonNull(user)) {
   entity.setUserId(user.getUserId());
   entity.setUserName(user.getUserName());
} <span class="hljs-keyword">else</span> {
   entity.setUserId(businessConfig.getDefaultUserId());
   entity.setUserName(businessConfig.getDefaultUserName());
}
</code></pre>
<p>è¿™ç§ç®€å•æ— å…¬å®³çš„ä»£ç ï¼Œå¦‚æœåªæ˜¯åœ¨ä¸€ä¸¤ä¸ªåœ°æ–¹åŠ è¿˜OKã€‚</p>
<p>æ­¤å¤–ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œ<code>SimpleDateFormat</code>åœ¨java8ä»¥å‰ï¼Œæ˜¯ç”¨æ¥å¤„ç†æ—¶é—´çš„å·¥å…·ç±»ï¼Œå®ƒæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨è¯¥æ–¹æ³•è§£ææ—¥æœŸä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
<p>ä¸ºäº†é¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜çš„å‡ºç°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠSimpleDateFormatå¯¹è±¡å®šä¹‰æˆ<code>å±€éƒ¨å˜é‡</code>ã€‚ä½†å¦‚æœä½ ä¸€å®šè¦æŠŠå®ƒå®šä¹‰æˆé™æ€å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ThreadLocalä¿å­˜æ—¥æœŸï¼Œä¹Ÿèƒ½è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
<h2 data-id="heading-7">8. ä¼ é€’å‚æ•°</h2>
<p>ä¹‹å‰è§è¿‡æœ‰äº›åŒäº‹å†™ä»£ç æ—¶ï¼Œä¸€ä¸ªéå¸¸æœ‰è¶£çš„ç”¨æ³•ï¼Œå³ï¼šä½¿ç”¨<code>MDC</code>ä¼ é€’å‚æ•°ã€‚</p>
<p>MDCæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><code>MDC</code>æ˜¯<code>org.slf4j</code>åŒ…ä¸‹çš„ä¸€ä¸ªç±»ï¼Œå®ƒçš„å…¨ç§°æ˜¯<code>Mapped Diagnostic Context</code>ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å­˜æ”¾è¯Šæ–­æ—¥å¿—çš„å®¹å™¨ã€‚</p>
<p><code>MDC</code>çš„åº•å±‚æ˜¯ç”¨äº†<code>ThreadLocal</code>æ¥ä¿å­˜æ•°æ®çš„ã€‚</p>
<p>ä¾‹å¦‚ç°åœ¨æœ‰è¿™æ ·ä¸€ç§åœºæ™¯ï¼šæˆ‘ä»¬ä½¿ç”¨<code>RestTemplate</code>è°ƒç”¨è¿œç¨‹æ¥å£æ—¶ï¼Œæœ‰æ—¶éœ€è¦åœ¨<code>header</code>ä¸­ä¼ é€’ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼štraceIdï¼Œsourceç­‰ï¼Œä¾¿äºåœ¨æŸ¥è¯¢æ—¥å¿—æ—¶èƒ½å¤Ÿä¸²è”ä¸€æ¬¡å®Œæ•´çš„è¯·æ±‚é“¾è·¯ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<p>è¿™ç§ä¸šåŠ¡åœºæ™¯å°±èƒ½é€šè¿‡<code>ClientHttpRequestInterceptor</code>æ¥å£å®ç°ï¼Œå…·ä½“åšæ³•å¦‚ä¸‹ï¼š</p>
<p>ç¬¬ä¸€æ­¥ï¼Œå®šä¹‰ä¸€ä¸ªLogFilteræ‹¦æˆªæ‰€æœ‰æ¥å£è¯·æ±‚ï¼Œåœ¨MDCä¸­è®¾ç½®traceIdï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException {
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException {
        MdcUtil.add(UUID.randomUUID().toString());
        System.out.println(<span class="hljs-string">"è®°å½•è¯·æ±‚æ—¥å¿—"</span>);
        chain.doFilter(request, response);
        System.out.println(<span class="hljs-string">"è®°å½•å“åº”æ—¥å¿—"</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> {
    }
}
</code></pre>
<p>ç¬¬äºŒæ­¥ï¼Œå®ç°<code>ClientHttpRequestInterceptor</code>æ¥å£ï¼ŒMDCä¸­è·å–å½“å‰è¯·æ±‚çš„traceIdï¼Œç„¶åè®¾ç½®åˆ°headerä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestTemplateInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ClientHttpRequestInterceptor</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ClientHttpResponse <span class="hljs-title function_">intercept</span><span class="hljs-params">(HttpRequest request, <span class="hljs-type">byte</span>[] body, ClientHttpRequestExecution execution)</span> <span class="hljs-keyword">throws</span> IOException {
        request.getHeaders().set(<span class="hljs-string">"traceId"</span>, MdcUtil.get());
        <span class="hljs-keyword">return</span> execution.execute(request, body);
    }
}
</code></pre>
<p>ç¬¬ä¸‰æ­¥ï¼Œå®šä¹‰é…ç½®ç±»ï¼Œé…ç½®ä¸Šé¢å®šä¹‰çš„RestTemplateInterceptorç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestTemplateConfiguration</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RestTemplate</span> <span class="hljs-variable">restTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();
        restTemplate.setInterceptors(Collections.singletonList(restTemplateInterceptor()));
        <span class="hljs-keyword">return</span> restTemplate;
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RestTemplateInterceptor <span class="hljs-title function_">restTemplateInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplateInterceptor</span>();
    }
}
</code></pre>
<p>å…¶ä¸­MdcUtilå…¶å®æ˜¯åˆ©ç”¨MDCå·¥å…·åœ¨<code>ThreadLocal</code>ä¸­å­˜å‚¨å’Œè·å–traceId</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MdcUtil</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TRACE_ID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TRACE_ID"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">get</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> MDC.get(TRACE_ID);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(String value)</span> {
        MDC.put(TRACE_ID, value);
    }
}
</code></pre>
<p>å½“ç„¶ï¼Œè¿™ä¸ªä¾‹å­ä¸­æ²¡æœ‰æ¼”ç¤ºMdcUtilç±»çš„addæ–¹æ³•å…·ä½“è°ƒçš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>filter</code>ä¸­æ‰§è¡Œæ¥å£æ–¹æ³•ä¹‹å‰ï¼Œç”ŸæˆtraceIdï¼Œè°ƒç”¨MdcUtilç±»çš„addæ–¹æ³•æ·»åŠ åˆ°MDCä¸­ï¼Œç„¶ååœ¨åŒä¸€ä¸ªè¯·æ±‚çš„å…¶ä»–åœ°æ–¹å°±èƒ½é€šè¿‡MdcUtilç±»çš„getæ–¹æ³•è·å–åˆ°è¯¥traceIdã€‚</p>
<p>èƒ½ä½¿ç”¨MDCä¿å­˜traceIdç­‰å‚æ•°çš„æ ¹æœ¬åŸå› æ˜¯ï¼Œç”¨æˆ·è¯·æ±‚åˆ°åº”ç”¨æœåŠ¡å™¨ï¼Œ<code>Tomcat</code>ä¼šä»çº¿ç¨‹æ± ä¸­åˆ†é…ä¸€ä¸ªçº¿ç¨‹å»å¤„ç†è¯¥è¯·æ±‚ã€‚</p>
<p>é‚£ä¹ˆè¯¥è¯·æ±‚çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¿å­˜åˆ°<code>MDC</code>çš„<code>ThreadLocal</code>ä¸­çš„å‚æ•°ï¼Œä¹Ÿæ˜¯è¯¥çº¿ç¨‹ç‹¬äº«çš„ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
<h2 data-id="heading-8">9. æ¨¡æ‹Ÿé«˜å¹¶å‘</h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬å†™çš„æ¥å£ï¼Œåœ¨ä½å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ã€‚</p>
<p>ä½†å¦‚æœä¸€æ—¦å‡ºç°é«˜å¹¶å‘è°ƒç”¨ï¼Œè¯¥æ¥å£å¯èƒ½ä¼šå‡ºç°ä¸€äº›æ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚</p>
<p>ä¸ºäº†é˜²æ­¢ç±»ä¼¼çš„äº‹æƒ…å‘ç”Ÿï¼Œä¸€èˆ¬åœ¨é¡¹ç›®ä¸Šçº¿å‰ï¼Œæˆ‘ä»¬éå¸¸æœ‰å¿…è¦å¯¹æ¥å£åšä¸€ä¸‹<code>å‹åŠ›æµ‹è¯•</code>ã€‚</p>
<p>å½“ç„¶ï¼Œç°åœ¨å·²ç»æœ‰æ¯”è¾ƒæˆç†Ÿçš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œæ¯”å¦‚ï¼š<code>Jmeter</code>ã€<code>LoadRunner</code>ç­‰ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—ä¸‹è½½å‹æµ‹å·¥å…·æ¯”è¾ƒéº»çƒ¦ï¼Œä¹Ÿå¯ä»¥æ‰‹å†™ä¸€ä¸ªç®€å•çš„æ¨¡æ‹Ÿå¹¶å‘æ“ä½œçš„å·¥å…·ï¼Œç”¨<code>CountDownLatch</code>å°±èƒ½å®ç°ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">concurrenceTest</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿé«˜å¹¶å‘æƒ…å†µä»£ç 
     */</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">atomicInteger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">final</span> <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">countDownLatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">1000</span>); <span class="hljs-comment">// ç›¸å½“äºè®¡æ•°å™¨ï¼Œå½“æ‰€æœ‰éƒ½å‡†å¤‡å¥½äº†ï¼Œå†ä¸€èµ·æ‰§è¡Œï¼Œæ¨¡ä»¿å¤šå¹¶å‘ï¼Œä¿è¯å¹¶å‘é‡</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">countDownLatch2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">1000</span>); <span class="hljs-comment">// ä¿è¯æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œäº†å†æ‰“å°atomicIntegerçš„å€¼</span>
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
            executorService.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                    <span class="hljs-keyword">try</span> {
                        countDownLatch.await(); <span class="hljs-comment">//ä¸€ç›´é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°è®¡æ—¶å™¨çš„å€¼ä¸º0,ä¿è¯åŒæ—¶å¹¶å‘</span>
                    } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                        log.error(e.getMessage(),e);
                    }
                    <span class="hljs-comment">//æ¯ä¸ªçº¿ç¨‹å¢åŠ 1000æ¬¡ï¼Œæ¯æ¬¡åŠ 1</span>
                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">1000</span>; j++) {
                        atomicInteger.incrementAndGet();
                    }
                    countDownLatch2.countDown();
                }
            });
            countDownLatch.countDown();
        }

        countDownLatch2.await();<span class="hljs-comment">// ä¿è¯æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œ</span>
        executorService.shutdown();
    } <span class="hljs-keyword">catch</span> (Exception e){
        log.error(e.getMessage(),e);
    }
}
</code></pre>
<h2 data-id="heading-9">10. å¤„ç†mqæ¶ˆæ¯</h2>
<p>åœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸­ï¼Œæ¶ˆæ¯ç§¯å‹é—®é¢˜ï¼Œå¯ä»¥è¯´å¦‚å½±éšå½¢ï¼ŒçœŸçš„æ²¡åŠæ³•ä»æ ¹æœ¬ä¸Šè§£å†³ã€‚è¡¨é¢ä¸Šçœ‹ï¼Œå·²ç»è§£å†³äº†ï¼Œä½†åé¢ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ï¼Œå°±ä¼šå†’å‡ºä¸€æ¬¡ï¼Œæ¯”å¦‚è¿™æ¬¡ï¼š</p>
<p>æœ‰å¤©ä¸‹åˆï¼Œäº§å“è¿‡æ¥è¯´ï¼šæœ‰å‡ ä¸ªå•†æˆ·æŠ•è¯‰è¿‡æ¥äº†ï¼Œä»–ä»¬è¯´èœå“æœ‰å»¶è¿Ÿï¼Œå¿«æŸ¥ä¸€ä¸‹åŸå› ã€‚</p>
<p>è¿™æ¬¡é—®é¢˜å‡ºç°å¾—æœ‰ç‚¹å¥‡æ€ªã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿ</p>
<p>é¦–å…ˆè¿™ä¸ªæ—¶é—´ç‚¹å°±æœ‰ç‚¹å¥‡æ€ªï¼Œå¹³å¸¸å‡ºé—®é¢˜ï¼Œä¸éƒ½æ˜¯ä¸­åˆæˆ–è€…æ™šä¸Šç”¨é¤é«˜å³°æœŸå—ï¼Ÿæ€ä¹ˆè¿™æ¬¡é—®é¢˜å‡ºç°åœ¨ä¸‹åˆï¼Ÿ</p>
<p>æ ¹æ®ä»¥å¾€ç§¯ç´¯çš„ç»éªŒï¼Œæˆ‘ç›´æ¥çœ‹äº†<code>kafka</code>çš„<code>topic</code>çš„æ•°æ®ï¼Œæœç„¶ä¸Šé¢æ¶ˆæ¯æœ‰ç§¯å‹ï¼Œä½†è¿™æ¬¡æ¯ä¸ª<code>partition</code>éƒ½ç§¯å‹äº†åå‡ ä¸‡çš„æ¶ˆæ¯æ²¡æœ‰æ¶ˆè´¹ï¼Œæ¯”ä»¥å¾€åŠ å‹çš„æ¶ˆæ¯æ•°é‡å¢åŠ äº†å‡ ç™¾å€ã€‚è¿™æ¬¡æ¶ˆæ¯ç§¯å‹å¾—æä¸å¯»å¸¸ã€‚</p>
<p>æˆ‘èµ¶ç´§æŸ¥æœåŠ¡ç›‘æ§çœ‹çœ‹æ¶ˆè´¹è€…æŒ‚äº†æ²¡ï¼Œè¿˜å¥½æ²¡æŒ‚ã€‚åˆæŸ¥æœåŠ¡æ—¥å¿—æ²¡æœ‰å‘ç°å¼‚å¸¸ã€‚è¿™æ—¶æˆ‘æœ‰ç‚¹è¿·èŒ«ï¼Œç¢°è¿æ°”é—®äº†é—®è®¢å•ç»„ä¸‹åˆå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…æ²¡ï¼Ÿä»–ä»¬è¯´ä¸‹åˆæœ‰ä¸ªä¿ƒé”€æ´»åŠ¨ï¼Œè·‘äº†ä¸€ä¸ª<code>JOB</code>æ‰¹é‡æ›´æ–°è¿‡æœ‰äº›å•†æˆ·çš„è®¢å•ä¿¡æ¯ã€‚</p>
<p>è¿™æ—¶ï¼Œæˆ‘ä¸€ä¸‹å­å¦‚æ¢¦åˆé†’ï¼Œæ˜¯ä»–ä»¬åœ¨JOBä¸­æ‰¹é‡å‘æ¶ˆæ¯å¯¼è‡´çš„é—®é¢˜ã€‚æ€ä¹ˆæ²¡æœ‰é€šçŸ¥æˆ‘ä»¬å‘¢ï¼Ÿå®åœ¨å¤ªå‘äº†ã€‚</p>
<p>è™½è¯´çŸ¥é“é—®é¢˜çš„åŸå› äº†ï¼Œå€’æ˜¯çœ¼å‰ç§¯å‹çš„è¿™åå‡ ä¸‡çš„æ¶ˆæ¯è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p>
<p>æ­¤æ—¶ï¼Œå¦‚æœç›´æ¥è°ƒå¤§<code>partition</code>æ•°é‡æ˜¯ä¸è¡Œçš„ï¼Œå†å²æ¶ˆæ¯å·²ç»å­˜å‚¨åˆ°<code>4</code>ä¸ªå›ºå®šçš„partitionï¼Œåªæœ‰æ–°å¢çš„æ¶ˆæ¯æ‰ä¼šåˆ°æ–°çš„partitionã€‚æˆ‘ä»¬é‡ç‚¹éœ€è¦å¤„ç†çš„æ˜¯å·²æœ‰çš„partitionã€‚</p>
<p>ç›´æ¥åŠ æœåŠ¡èŠ‚ç‚¹ä¹Ÿä¸è¡Œï¼Œå› ä¸º<code>kafka</code>å…è®¸åŒç»„çš„å¤šä¸ª<code>partition</code>è¢«ä¸€ä¸ª<code>consumer</code>æ¶ˆè´¹ï¼Œä½†ä¸å…è®¸ä¸€ä¸ªpartitionè¢«åŒç»„çš„å¤šä¸ªconsumeræ¶ˆè´¹ï¼Œå¯èƒ½ä¼šé€ æˆèµ„æºæµªè´¹ã€‚</p>
<p>çœ‹æ¥åªæœ‰ç”¨<code>å¤šçº¿ç¨‹</code>å¤„ç†äº†ã€‚</p>
<p>ä¸ºäº†ç´§æ€¥è§£å†³é—®é¢˜ï¼Œæˆ‘æ”¹æˆäº†ç”¨çº¿ç¨‹æ± å¤„ç†æ¶ˆæ¯ï¼Œæ ¸å¿ƒçº¿ç¨‹å’Œæœ€å¤§çº¿ç¨‹æ•°éƒ½é…ç½®æˆäº†<code>50</code>ã€‚</p>
<p>å¤§è‡´ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<ol>
<li>å…ˆå®šä¹‰ä¸€ä¸ªçº¿ç¨‹æ± ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolConfig</span> {

    <span class="hljs-meta">@Value("${thread.pool.corePoolSize:5}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> corePoolSize;

    <span class="hljs-meta">@Value("${thread.pool.maxPoolSize:10}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> maxPoolSize;

    <span class="hljs-meta">@Value("${thread.pool.queueCapacity:200}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> queueCapacity;

    <span class="hljs-meta">@Value("${thread.pool.keepAliveSeconds:30}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> keepAliveSeconds;

    <span class="hljs-meta">@Value("${thread.pool.threadNamePrefix:ASYNC_}")</span>
    <span class="hljs-keyword">private</span> String threadNamePrefix;

    <span class="hljs-meta">@Bean("messageExecutor")</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">messageExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(corePoolSize);
        executor.setMaxPoolSize(maxPoolSize);
        executor.setQueueCapacity(queueCapacity);
        executor.setKeepAliveSeconds(keepAliveSeconds);
        executor.setThreadNamePrefix(threadNamePrefix);
        executor.setRejectedExecutionHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());
        executor.initialize();
        <span class="hljs-keyword">return</span> executor;
    }
}
</code></pre>
<ol start="2">
<li>å†å®šä¹‰ä¸€ä¸ªæ¶ˆæ¯çš„consumerï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConsumerService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> Executor messageExecutor;
    
    <span class="hljs-meta">@KafkaListener(id="test",topics={"topic-test"})</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">listen</span><span class="hljs-params">(String message)</span>{
        System.out.println(<span class="hljs-string">"æ”¶åˆ°æ¶ˆæ¯ï¼š"</span> + message);
        messageExecutor.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyWork</span>(message);
    }
}
</code></pre>
<ol start="3">
<li>åœ¨å®šä¹‰çš„Runableå®ç°ç±»ä¸­å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWork</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-keyword">private</span> String message;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyWork</span><span class="hljs-params">(String message)</span> {
       <span class="hljs-built_in">this</span>.message = message;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        System.out.println(message);
    }
}
</code></pre>
<p>æœç„¶ï¼Œè°ƒæ•´ä¹‹åæ¶ˆæ¯ç§¯å‹æ•°é‡ç¡®å®ä¸‹é™çš„éå¸¸å¿«ï¼Œå¤§çº¦åŠå°æ—¶åï¼Œç§¯å‹çš„æ¶ˆæ¯å°±éå¸¸é¡ºåˆ©çš„å¤„ç†å®Œäº†ã€‚</p>
<p>ä½†æ­¤æ—¶æœ‰ä¸ªæ›´ä¸¥é‡çš„é—®é¢˜å‡ºç°ï¼šæˆ‘æ”¶åˆ°äº†æŠ¥è­¦é‚®ä»¶ï¼Œæœ‰ä¸¤ä¸ªè®¢å•ç³»ç»Ÿçš„èŠ‚ç‚¹downæœºäº†ã€‚ã€‚ã€‚</p>
<p>æ›´è¯¦ç»†å†…å®¹ï¼Œè¯·çœ‹çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwNjMwMTgzMQ%3D%3D%26mid%3D2247490289%26idx%3D1%26sn%3Dbc311da9f4a4d3f48ee5dc207bf31a8b%26chksm%3Dc0ebc219f79c4b0fc711116723b9df3a5531cda32f0f5d00f065910aa552af6ff03b3f1528fc%26token%3D751314179%26lang%3Dzh_CN%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwNjMwMTgzMQ==&amp;mid=2247490289&amp;idx=1&amp;sn=bc311da9f4a4d3f48ee5dc207bf31a8b&amp;chksm=c0ebc219f79c4b0fc711116723b9df3a5531cda32f0f5d00f065910aa552af6ff03b3f1528fc&amp;token=751314179&amp;lang=zh_CN&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æˆ‘ç”¨kafkaä¸¤å¹´è¸©è¿‡çš„ä¸€äº›éæ¯”å¯»å¸¸çš„å‘</a>ã€‹</p>
<h2 data-id="heading-10">11. ç»Ÿè®¡æ•°é‡</h2>
<p>åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¸­ï¼Œæœ‰æ—¶å€™éœ€è¦ç»Ÿè®¡æ•°é‡ï¼Œæ¯”å¦‚ï¼šç”¨å¤šçº¿ç¨‹å¯¼å…¥ä¾›åº”å•†æ•°æ®æ—¶ï¼Œç»Ÿè®¡å¯¼å…¥æˆåŠŸçš„ä¾›åº”å•†æ•°æœ‰å¤šå°‘ã€‚</p>
<p>å¦‚æœè¿™æ—¶å€™ç”¨count++ç»Ÿè®¡æ¬¡æ•°ï¼Œæœ€ç»ˆçš„ç»“æœå¯èƒ½ä¼šä¸å‡†ã€‚å› ä¸ºcount++å¹¶éåŸå­æ“ä½œï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œè¯¥æ“ä½œï¼Œåˆ™ç»Ÿè®¡çš„æ¬¡æ•°ï¼Œå¯èƒ½ä¼šå‡ºç°å¼‚å¸¸ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦ä½¿ç”¨<code>concurent</code>çš„<code>atomic</code>åŒ…ä¸‹é¢çš„ç±»ï¼Œæ¯”å¦‚ï¼š<code>AtomicInteger</code>ã€<code>AtomicLong</code>ç­‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Servcie</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImportSupplierService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">importSupplier</span><span class="hljs-params">(List&lt;SupplierInfo&gt; supplierList)</span> {
       <span class="hljs-keyword">if</span>(CollectionUtils.isEmpty(supplierList)) {
           <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
       }

       supplierList.parallelStream().forEach(x -&gt; {
           <span class="hljs-keyword">try</span> {
             importSupplier(x);
             count.addAndGet(<span class="hljs-number">1</span>);
           } <span class="hljs-keyword">catch</span>(Exception e) {
              log.error(e.getMessage(),e);
           }
       );

      <span class="hljs-keyword">return</span> count.get();
  }    
}
</code></pre>
<p><code>AtomicInteger</code>çš„åº•å±‚è¯´ç™½äº†ä½¿ç”¨<code>è‡ªæ—‹é”</code>+<code>CAS</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">incrementAndGet</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">for</span> (;;) {
        <span class="hljs-type">int</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> get();
        <span class="hljs-type">int</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> current + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (compareAndSet(current, next))
            <span class="hljs-keyword">return</span> next;
    }
}
</code></pre>
<p><code>è‡ªæ—‹é”</code>è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ª<code>æ­»å¾ªç¯</code>ã€‚</p>
<p>è€Œ<code>CAS</code>æ˜¯<code>æ¯”è¾ƒ</code>å’Œ<code>äº¤æ¢</code>çš„æ„æ€ã€‚</p>
<p>å®ƒçš„å®ç°é€»è¾‘æ˜¯ï¼šå°†å†…å­˜ä½ç½®å¤„çš„<code>æ—§å€¼</code>ä¸<code>é¢„æœŸå€¼</code>è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥ç›¸ç­‰ï¼Œåˆ™å°†å†…å­˜ä½ç½®å¤„çš„å€¼æ›¿æ¢ä¸º<code>æ–°å€¼</code>ã€‚è‹¥ä¸ç›¸ç­‰ï¼Œåˆ™ä¸åšä»»ä½•æ“ä½œã€‚</p>
<h2 data-id="heading-11">12. å»¶è¿Ÿå®šæ—¶ä»»åŠ¡</h2>
<p>æˆ‘ä»¬ç»å¸¸æœ‰å»¶è¿Ÿå¤„ç†æ•°æ®çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šå¦‚æœç”¨æˆ·ä¸‹å•åï¼Œè¶…è¿‡30åˆ†é’Ÿè¿˜æœªå®Œæˆæ”¯ä»˜ï¼Œåˆ™ç³»ç»Ÿè‡ªåŠ¨å°†è¯¥è®¢å•å–æ¶ˆã€‚</p>
<p>è¿™é‡Œéœ€æ±‚å°±å¯ä»¥ä½¿ç”¨<code>å»¶è¿Ÿå®šæ—¶ä»»åŠ¡</code>å®ç°ã€‚</p>
<p><code>ScheduledExecutorService</code>æ˜¯<code>JDK1.5+</code>ç‰ˆæœ¬å¼•è¿›çš„å®šæ—¶ä»»åŠ¡ï¼Œè¯¥ç±»ä½äº<code>java.util.concurrent</code>å¹¶å‘åŒ…ä¸‹ã€‚</p>
<p>ScheduledExecutorServiceæ˜¯åŸºäºå¤šçº¿ç¨‹çš„ï¼Œè®¾è®¡çš„åˆè¡·æ˜¯ä¸ºäº†è§£å†³<code>Timer</code>å•çº¿ç¨‹æ‰§è¡Œï¼Œå¤šä¸ªä»»åŠ¡ä¹‹é—´ä¼šäº’ç›¸å½±å“çš„é—®é¢˜ã€‚</p>
<p>å®ƒä¸»è¦åŒ…å«4ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>schedule(Runnable command,long delay,TimeUnit unit)ï¼Œå¸¦å»¶è¿Ÿæ—¶é—´çš„è°ƒåº¦ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼Œè°ƒåº¦ä¹‹åå¯é€šè¿‡Future.get()é˜»å¡ç›´è‡³ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚</li>
<li>schedule(Callable callable,long delay,TimeUnit unit)ï¼Œå¸¦å»¶è¿Ÿæ—¶é—´çš„è°ƒåº¦ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼Œè°ƒåº¦ä¹‹åå¯é€šè¿‡Future.get()é˜»å¡ç›´è‡³ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¹¶ä¸”å¯ä»¥è·å–æ‰§è¡Œç»“æœã€‚</li>
<li>scheduleAtFixedRateï¼Œè¡¨ç¤ºä»¥å›ºå®šé¢‘ç‡æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœå½“å‰ä»»åŠ¡è€—æ—¶è¾ƒå¤šï¼Œè¶…è¿‡å®šæ—¶å‘¨æœŸperiodï¼Œåˆ™å½“å‰ä»»åŠ¡ç»“æŸåä¼šç«‹å³æ‰§è¡Œã€‚</li>
<li>scheduleWithFixedDelayï¼Œè¡¨ç¤ºä»¥å›ºå®šå»¶æ—¶æ‰§è¡Œä»»åŠ¡ï¼Œå»¶æ—¶æ˜¯ç›¸å¯¹å½“å‰ä»»åŠ¡ç»“æŸä¸ºèµ·ç‚¹è®¡ç®—å¼€å§‹æ—¶é—´ã€‚</li>
</ul>
<p>å®ç°è¿™ç§å®šæ—¶ä»»åŠ¡çš„å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScheduleExecutorTest</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ScheduledExecutorService</span> <span class="hljs-variable">scheduledExecutorService</span> <span class="hljs-operator">=</span> Executors.newScheduledThreadPool(<span class="hljs-number">5</span>);
        scheduledExecutorService.scheduleAtFixedRate(() -&gt; {
            System.out.println(<span class="hljs-string">"doSomething"</span>);
        },<span class="hljs-number">1000</span>,<span class="hljs-number">1000</span>, TimeUnit.MILLISECONDS);
    }
}
</code></pre>
<p>è°ƒç”¨<code>ScheduledExecutorService</code>ç±»çš„<code>scheduleAtFixedRate</code>æ–¹æ³•å®ç°å‘¨æœŸæ€§ä»»åŠ¡ï¼Œæ¯éš”1ç§’é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œæ¯æ¬¡å»¶è¿Ÿ1ç§’å†æ‰§è¡Œã€‚</p>
<p>è¿™ç§å®šæ—¶ä»»åŠ¡æ˜¯é˜¿é‡Œå·´å·´å¼€å‘è€…è§„èŒƒä¸­ç”¨æ¥æ›¿ä»£<code>Timer</code>ç±»çš„æ–¹æ¡ˆï¼Œå¯¹äºå¤šçº¿ç¨‹æ‰§è¡Œå‘¨æœŸæ€§ä»»åŠ¡ï¼Œæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<p>ä½¿ç”¨<code>ScheduledExecutorService</code>ç±»åšå»¶è¿Ÿå®šæ—¶ä»»åŠ¡çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼šåŸºäºå¤šçº¿ç¨‹çš„å®šæ—¶ä»»åŠ¡ï¼Œå¤šä¸ªä»»åŠ¡ä¹‹é—´ä¸ä¼šç›¸å…³å½±å“ï¼Œæ”¯æŒå‘¨æœŸæ€§çš„æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶ä¸”å¸¦å»¶è¿ŸåŠŸèƒ½ã€‚</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼šä¸æ”¯æŒä¸€äº›è¾ƒå¤æ‚çš„å®šæ—¶è§„åˆ™ã€‚</p>
</li>
</ul>
<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼šxxl-jobæˆ–è€…elastic-jobç­‰ç­‰ã€‚</p>
<p>å…¶å®ï¼Œåœ¨å®é™…å·¥ä½œä¸­æˆ‘ä½¿ç”¨å¤šçº¿ç¨‹çš„åœºæ™¯è¿œè¿œä¸åªè¿™12ç§ï¼Œåœ¨è¿™é‡Œåªæ˜¯æŠ›ç –å¼•ç‰ï¼Œä»‹ç»äº†ä¸€äº›æˆ‘è®¤ä¸ºæ¯”è¾ƒå¸¸è§çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>æ­¤å¤–ï¼Œå¦‚æœä½ å¯¹å¹¶å‘ç¼–ç¨‹ä¸­çš„ä¸€äº›å‘ï¼Œæ¯”è¾ƒæ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„å¦ä¸€ä¸ªæ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwNjMwMTgzMQ%3D%3D%26mid%3D2247492962%26idx%3D1%26sn%3D17ed1d2ed950b4e9160218b296d19d4e%26chksm%3Dc0e83d8af79fb49cc72fcafc8ed62822263106e54675ea8406a2e3daadb44e25364275af9082%26token%3D245805875%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwNjMwMTgzMQ==&amp;mid=2247492962&amp;idx=1&amp;sn=17ed1d2ed950b4e9160218b296d19d4e&amp;chksm=c0e83d8af79fb49cc72fcafc8ed62822263106e54675ea8406a2e3daadb44e25364275af9082&amp;token=245805875&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">èŠèŠå¹¶å‘ç¼–ç¨‹çš„10ä¸ªå‘</a>ã€‹ï¼Œé‡Œé¢å†™çš„éå¸¸è¯¦ç»†ã€‚</p>
<h2 data-id="heading-12">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p>
<p>æ›´å¤šé¡¹ç›®å®æˆ˜åœ¨æˆ‘çš„æŠ€æœ¯ç½‘ç«™ï¼šsusan.net.cn/project</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡ææ‡‚RPCã€gRPCä¸Protobufï¼šåˆ†å¸ƒå¼é€šä¿¡çš„æ ¸å¿ƒæŠ€æœ¯æ ˆ]]></title>    <link>https://juejin.cn/post/7599496293161828393</link>    <guid>https://juejin.cn/post/7599496293161828393</guid>    <pubDate>2026-01-26T04:00:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599496293161828393" data-draft-id="7598899986856820742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡ææ‡‚RPCã€gRPCä¸Protobufï¼šåˆ†å¸ƒå¼é€šä¿¡çš„æ ¸å¿ƒæŠ€æœ¯æ ˆ"/> <meta itemprop="keywords" content="åç«¯,gRPC,protobuf"/> <meta itemprop="datePublished" content="2026-01-26T04:00:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="starkå¼ å®‡"/> <meta itemprop="url" content="https://juejin.cn/user/1983974643871069"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡ææ‡‚RPCã€gRPCä¸Protobufï¼šåˆ†å¸ƒå¼é€šä¿¡çš„æ ¸å¿ƒæŠ€æœ¯æ ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1983974643871069/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    starkå¼ å®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T04:00:50.000Z" title="Mon Jan 26 2026 04:00:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸åŒæœåŠ¡é—´çš„é«˜æ•ˆé€šä¿¡æ˜¯æ ¸å¿ƒéœ€æ±‚ä¹‹ä¸€ã€‚RPCã€gRPCä¸Protobufä½œä¸ºä¸€å¥—ååŒå·¥ä½œçš„æŠ€æœ¯ç»„åˆï¼Œå¹¿æ³›åº”ç”¨äºå¾®æœåŠ¡ã€è·¨è¯­è¨€é€šä¿¡ç­‰åœºæ™¯ã€‚æœ¬æ–‡å°†é€ä¸€æ‹†è§£ä¸‰è€…çš„æ ¸å¿ƒæ¦‚å¿µã€å·¥ä½œåŸç†ï¼Œå¹¶é‡ç‚¹åˆ†æRPCä¸HTTPçš„å·®å¼‚ï¼Œå¸®åŠ©å¤§å®¶ç†æ¸…æŠ€æœ¯é€‰å‹é€»è¾‘ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€RPCï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„æ ¸å¿ƒèŒƒå¼</h3>
<h4 data-id="heading-1"><strong>ä»€ä¹ˆæ˜¯RPC</strong></h4>
<p>RPC æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œæ˜¯ä¸€ç§è·¨è¿›ç¨‹é€šä¿¡åè®®ï¼ŒæŠŠåœ¨ä¸åŒæœåŠ¡ä¹‹é—´çš„é€šä¿¡å˜å¾—é«˜æ•ˆå’Œç®€å•ï¼Œå…¨ç§°æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRemote Procedure Call ï¼‰ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œåƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æ–¹æ³•â€ï¼Œè°ƒç”¨å¦ä¸€ä¸ªè¿œç¨‹é¡¹ç›®ï¼ˆæœåŠ¡æä¾›è€…ï¼‰çš„æ¥å£ï¼Œè€Œä¸éœ€è¦äº†è§£æ•°æ®çš„ä¼ è¾“å¤„ç†è¿‡ç¨‹å’Œåº•å±‚ç½‘ç»œçš„é€šä¿¡ç»†èŠ‚ï¼Œè®©ç¨‹åºå‘˜ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œå¿«é€Ÿå¼€å‘åˆ†å¸ƒå¼ã€å¾®æœåŠ¡ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-2"><strong>RPCçš„æ ¸å¿ƒåŸç†ä¸æµç¨‹</strong></h4>
<p>ä¸€æ¬¡å®Œæ•´çš„RPCè°ƒç”¨æµç¨‹åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼Œæ¶‰åŠå®¢æˆ·ç«¯ï¼ˆè°ƒç”¨æ–¹ï¼‰å’ŒæœåŠ¡ç«¯ï¼ˆæä¾›æ–¹ï¼‰çš„ååŒå·¥ä½œï¼š</p>
<ol start="0">
<li><strong>å®¢æˆ·ç«¯è°ƒç”¨æœ¬åœ°ä»£ç†ï¼ˆStubï¼‰</strong> ï¼šå®¢æˆ·ç«¯å°†è¿œç¨‹æ–¹æ³•è°ƒç”¨å‚æ•°ä¼ é€’ç»™æœ¬åœ°Stubï¼ˆç±»ä¼¼â€œä»£ç†ç±»â€ï¼‰ï¼ŒStubè´Ÿè´£åç»­çš„é€šä¿¡å°è£…ã€‚</li>
<li><strong>å‚æ•°åºåˆ—åŒ–</strong>ï¼šStubå°†è°ƒç”¨å‚æ•°ï¼ˆå¦‚å¯¹è±¡ã€åŸºæœ¬ç±»å‹ï¼‰è½¬æ¢ä¸ºå¯åœ¨ç½‘ç»œä¸­ä¼ è¾“çš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆåºåˆ—åŒ–ï¼‰ï¼Œé¿å…å› æ•°æ®æ ¼å¼ä¸å…¼å®¹å¯¼è‡´çš„é€šä¿¡é—®é¢˜ã€‚</li>
<li><strong>ç½‘ç»œä¼ è¾“</strong>ï¼šé€šè¿‡åº•å±‚ç½‘ç»œåè®®ï¼ˆå¦‚TCPã€UDPï¼‰å°†åºåˆ—åŒ–åçš„äºŒè¿›åˆ¶æ•°æ®å‘é€åˆ°æœåŠ¡ç«¯ã€‚</li>
<li><strong>æœåŠ¡ç«¯Stubååºåˆ—åŒ–</strong>ï¼šæœåŠ¡ç«¯Stubæ¥æ”¶æ•°æ®åï¼Œå°†äºŒè¿›åˆ¶æ•°æ®è¿˜åŸä¸ºåŸå§‹å‚æ•°ï¼ˆååºåˆ—åŒ–ï¼‰ã€‚</li>
<li><strong>è°ƒç”¨æœåŠ¡ç«¯æœ¬åœ°æ–¹æ³•</strong>ï¼šæœåŠ¡ç«¯Stubè°ƒç”¨å¯¹åº”çš„æœ¬åœ°ä¸šåŠ¡æ–¹æ³•ï¼Œæ‰§è¡Œæ ¸å¿ƒé€»è¾‘å¹¶è·å–è¿”å›ç»“æœã€‚</li>
<li><strong>ç»“æœåºåˆ—åŒ–ä¸å›ä¼ </strong>ï¼šæœåŠ¡ç«¯Stubå°†æ–¹æ³•è¿”å›ç»“æœåºåˆ—åŒ–ï¼Œé€šè¿‡ç½‘ç»œä¼ è¾“å›å®¢æˆ·ç«¯ã€‚</li>
<li><strong>å®¢æˆ·ç«¯å¤„ç†ç»“æœ</strong>ï¼šå®¢æˆ·ç«¯Stubååºåˆ—åŒ–è¿”å›æ•°æ®ï¼Œå°†ç»“æœä¼ é€’ç»™å®¢æˆ·ç«¯ä¸šåŠ¡ä»£ç ï¼Œå®Œæˆä¸€æ¬¡è¿œç¨‹è°ƒç”¨ã€‚</li>
</ol>
<p><strong>æœ‰äº†Httpä¸ºå•¥è¿˜æœ‰RPCï¼Ÿ</strong> Httpçš„æœ¬è´¨æ˜¯åŸºäºè¯·æ±‚-å“åº”æ¨¡å¼çš„åº”ç”¨å±‚ç½‘ç»œé€šä¿¡åè®®ï¼Œè€ŒRpcæ˜¯è¿œç¨‹è°ƒç”¨æœ¬åœ°åŒ–çš„ä¸€ç§æ€æƒ³ï¼Œä¸»æµçš„RPCå¤§å¤šé‡‡ç”¨åŸºäºTcpçš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œä¼ é€çš„æ•°æ®æ›´ç´§å‡‘ï¼Œä¼ é€çš„æ•ˆç‡ä¹Ÿæ›´é«˜æ•ˆã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¸¸ç”¨äºæµè§ˆå™¨ä¸æœåŠ¡å™¨ã€è·¨æœåŠ¡æ¥å£è°ƒç”¨ï¼ˆå¦‚RESTful APIï¼‰ã€‚è€ŒRpcæ›´é€‚åˆæœåŠ¡é—´çš„å†…éƒ¨é€šä¿¡ï¼ŒRPCä¸HTTPè™½éƒ½å¯ç”¨äºè·¨æœåŠ¡é€šä¿¡ï¼Œä½†è®¾è®¡ç›®æ ‡ã€ç‰¹æ€§å·®å¼‚æ˜¾è‘—ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹è¡¥å……çš„æ˜¯RPCå¹¶éä¸HTTPå¯¹ç«‹ï¼Œéƒ¨åˆ†RPCæ¡†æ¶ï¼ˆå¦‚gRPCï¼‰åº•å±‚åŸºäºHTTP/2å®ç°ï¼Œæœ¬è´¨æ˜¯â€œç”¨HTTP/2ä½œä¸ºä¼ è¾“è½½ä½“çš„RPCåè®®â€ï¼Œå…¼é¡¾äº†RPCçš„æ˜“ç”¨æ€§å’ŒHTTP/2çš„é«˜æ•ˆç‰¹æ€§ã€‚</p>
<h4 data-id="heading-3"><strong>è¿œç¨‹è°ƒç”¨è¿‡ç¨‹é¢ä¸´çš„é—®é¢˜?</strong></h4>
<p><strong>1.Call IDæ˜ å°„ã€‚</strong></p>
<p>æˆ‘ä»¬æ€ä¹ˆå‘Šè¯‰è¿œç¨‹æœºå™¨æˆ‘ä»¬è¦è°ƒç”¨çš„å‡½æ•°IDå‘¢?å†æœ¬åœ°è°ƒç”¨ä¸­ï¼Œå‡½æ•°ä½“æ˜¯ç›´æ¥é€šè¿‡æŒ‡é’ˆæ¥æŒ‡å®šçš„ï¼Œæˆ‘ä»¬è°ƒç”¨functionï¼Œç¼–è¯‘å™¨å°±è‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒç”¨å®ƒç›¸åº”çš„å‡½æ•°æŒ‡é’ˆã€‚</p>
<p>ä½†æ˜¯åœ¨è¿œç¨‹è°ƒç”¨ä¸­ï¼Œå‡½æ•°æŒ‡é’ˆæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºä¸¤ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚æ‰€ä»¥ï¼Œå†RPCä¸­ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½å¿…é¡»æœ‰è‡ªå·±çš„ä¸€ä¸ªIDã€‚è¿™ä¸ªIDåœ¨æ‰€æœ‰çš„è¿›ç¨‹ä¸­éƒ½æ˜¯å”¯ä¸€ç¡®å®šçš„ã€‚å®¢æˆ·ç«¯åœ¨åšè¿œç¨‹è°ƒç”¨æ—¶ï¼Œå¿…é¡»é™„ä¸Šè¿™ä¸ªIDã€‚ç„¶åè¿˜éœ€è¦å†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åˆ†åˆ«ç»´æŠ¤ä¸€ä¸ª{å‡½æ•° &lt;--&gt; Call ID}çš„å¯¹åº”è¡¨ã€‚ä¸¤è€…çš„è¡¨ä¸ä¸€å®šéœ€è¦å®Œå…¨ç›¸åŒï¼Œä½†ç›¸åŒå‡½æ•°å¯¹åº”çš„Call IDå¿…é¡»ç›¸åŒã€‚</p>
<p>å½“å®¢æˆ·ç«¯éœ€è¦è¿›è¡Œè¿œç¨‹è°ƒç”¨æ—¶ï¼Œå®ƒå°±æŸ¥ä¸€ä¸‹è¿™ä¸ªè¡¨ï¼Œæ‰¾å‡ºç›¸åº”çš„Call ID,ç„¶åæŠŠå®ƒä¼ ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¹Ÿé€šè¿‡æŸ¥è¡¨ï¼Œæ¥ç¡®å®šå®¢æˆ·ç«¯éœ€è¦è°ƒç”¨çš„å‡½æ•°ï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„å‡½æ•°çš„ä»£ç ã€‚</p>
<p><strong>2.åºåˆ—åŒ–å’Œååºåˆ—åŒ–</strong></p>
<p>å®¢æˆ·ç«¯æ€ä¹ˆæŠŠå‚æ•°å€¼ä¼ ç»™è¿œç¨‹å‡½æ•°å‘¢?åœ¨æœ¬åœ°è°ƒç”¨ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå‚æ•°å‹åˆ°æ ˆé‡Œï¼Œç„¶åè®©å‡½æ•°è‡ªå·±å»æ ˆé‡Œè¯»å°±è¡Œã€‚ä½†æ˜¯åœ¨è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ—¶ï¼Œå®¢æˆ·ç«¯è·ŸæœåŠ¡ç«¯æ˜¯ä¸åŒçš„è¿›ç¨‹ï¼Œä¸èƒ½é€šè¿‡å†…å­˜æ¥ä¼ é€’å‚æ•°ã€‚ç”šè‡³æœ‰æ—¶å€™å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä½¿ç”¨çš„ä¸æ˜¯åŒä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œè¿™æ—¶å€™å°±éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æŠŠå‚æ•°å…ˆè½¬æˆä¸€ä¸ªå­—èŠ‚æµï¼Œä¼ ç»™æœåŠ¡ç«¯åå†æŠŠå­—èŠ‚æµè½¬æˆè‡ªå·±èƒ½è¯»æ‡‚çš„æ ¼å¼ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p>
<p><strong>3.ç½‘ç»œä¼ è¾“</strong></p>
<p>è¿œç¨‹è°ƒç”¨å¾€å¾€ç”¨åœ¨ç½‘ç»œä¸Šï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯é€šè¿‡ç½‘ç»œè¿æ¥çš„ã€‚æ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œå› æ­¤å°±éœ€è¦ä¸€ä¸ªç½‘ç»œä¼ è¾“å±‚ã€‚ç½‘ç»œä¼ è¾“å±‚éœ€è¦æŠŠCall IDå’Œåºåˆ—åŒ–åçš„å‚æ•°å­—èŠ‚æµä¼ ç»™æœåŠ¡ç«¯ï¼Œç„¶ååœ¨æŠŠåºåˆ—åŒ–åçš„è°ƒç”¨ç»“æœè¿”å›å®¢æˆ·ç«¯ï¼Œåªè¦èƒ½å®Œæˆè¿™ä¸¤è€…çš„ï¼Œéƒ½å¯ä»¥ä½œä¸ºä¼ è¾“å±‚ä½¿ç”¨ã€‚</p>
<p>å› æ­¤ï¼Œå®ƒæ‰€ä½¿ç”¨çš„åè®®å…¶å®æ˜¯ä¸é™çš„ï¼Œèƒ½å®Œæˆä¼ è¾“å°±è¡Œã€‚å°½ç®¡å¤§éƒ¨åˆ†Rpcæ¡†æ¶éƒ½ä½¿ç”¨Tcpåè®®ï¼Œä½†å…¶å®Udpä¹Ÿå¯ä»¥ï¼ŒgRPCå¹²è„†ä½¿ç”¨äº†Http2ã€‚</p>
<h3 data-id="heading-4">äºŒã€Protobufï¼šé«˜æ•ˆçš„åºåˆ—åŒ–åè®®</h3>
<p>Protobufï¼ˆProtocol Buffersï¼‰æ˜¯Googleå¼€æºçš„ä¸€ç§<strong>è¯­è¨€æ— å…³ã€å¹³å°æ— å…³ã€å¯æ‰©å±•</strong>çš„äºŒè¿›åˆ¶åºåˆ—åŒ–åè®®ï¼Œç”¨äºå°†ç»“æ„åŒ–æ•°æ®åºåˆ—åŒ–ä¸ºç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œé€‚ç”¨äºæ•°æ®å­˜å‚¨ã€é€šä¿¡åè®®ç­‰åœºæ™¯ã€‚å®ƒæ˜¯gRPCçš„é»˜è®¤åºåˆ—åŒ–åè®®ï¼Œä¹Ÿæ˜¯ç›®å‰é«˜æ€§èƒ½RPCé€šä¿¡çš„é¦–é€‰åºåˆ—åŒ–æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-5">Protobufçš„æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>é«˜æ•ˆç´§å‡‘</strong>ï¼šé‡‡ç”¨äºŒè¿›åˆ¶ç¼–ç ï¼Œåºåˆ—åŒ–åçš„æ•°æ®ä½“ç§¯è¿œå°äºJSON/XMLï¼Œè§£æé€Ÿåº¦æ›´å¿«ï¼ˆæ¯”JSONå¿«3-5å€ç”šè‡³æ›´é«˜ï¼‰ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“å¼€é”€å’Œè§£æè€—æ—¶ã€‚</li>
<li><strong>è·¨è¯­è¨€/è·¨å¹³å°</strong>ï¼šæ”¯æŒJavaã€Goã€Pythonã€C++ç­‰å¤šç§è¯­è¨€ï¼Œå¯åœ¨ä¸åŒå¹³å°ï¼ˆWindowsã€Linuxã€Macï¼‰é—´æ— ç¼ä¼ è¾“æ•°æ®ï¼Œé€‚é…è·¨è¯­è¨€RPCåœºæ™¯ã€‚</li>
<li><strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼šæ”¯æŒå­—æ®µçš„æ–°å¢å’ŒåºŸå¼ƒï¼Œä¸”å‘åå…¼å®¹ï¼ˆæ—§ç‰ˆæœ¬ç¨‹åºå¯è§£ææ–°ç‰ˆæœ¬æ•°æ®ï¼Œæ–°ç‰ˆæœ¬ç¨‹åºå¯å…¼å®¹æ—§ç‰ˆæœ¬æ•°æ®ï¼‰ï¼Œæ— éœ€æ‹…å¿ƒæ¥å£å‡çº§å¯¼è‡´çš„å…¼å®¹æ€§é—®é¢˜ã€‚</li>
<li><strong>å¼ºç±»å‹çº¦æŸ</strong>ï¼šé€šè¿‡IDLå®šä¹‰æ•°æ®ç»“æ„ï¼Œç¼–è¯‘åç”Ÿæˆå¯¹åº”è¯­è¨€çš„ä»£ç ï¼Œå¼ºåˆ¶æ•°æ®ç±»å‹æ ¡éªŒï¼Œé¿å…å› ç±»å‹ä¸åŒ¹é…å¯¼è‡´çš„å¼‚å¸¸ï¼Œæå‡ä»£ç å¥å£®æ€§ã€‚</li>
</ul>
<h4 data-id="heading-6"><strong>æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ protocå’Œprotoc-gen-goï¼Ÿ</strong></h4>
<p><code>proto</code> æ–‡ä»¶æœ¬è´¨ä¸Šæ˜¯<strong>çº¯æ–‡æœ¬çš„åè®®å®šä¹‰</strong>ï¼Œæ¯”å¦‚å®šä¹‰äº†æ¶ˆæ¯ç»“æ„ã€å­—æ®µç±»å‹ã€æœåŠ¡æ¥å£ç­‰ï¼Œå®ƒåªæ˜¯ä¸€ä»½ â€œè®¾è®¡å›¾çº¸â€â€”â€” è®¡ç®—æœºæ— æ³•ç›´æ¥è¯†åˆ«å’Œä½¿ç”¨è¿™ä»½å›¾çº¸ï¼Œå¿…é¡»æŠŠå®ƒè½¬æ¢æˆå¯¹åº”ç¼–ç¨‹è¯­è¨€ï¼ˆæ¯”å¦‚ Goï¼‰çš„å¯æ‰§è¡Œä»£ç ï¼Œæ‰èƒ½åœ¨ç¨‹åºä¸­å®ç°åºåˆ—åŒ–ã€ååºåˆ—åŒ–ã€ç½‘ç»œé€šä¿¡ç­‰åŠŸèƒ½ã€‚</p>
<p>è€Œ protoc å’Œ protoc-gen-go å°±æ˜¯å®Œæˆ â€œå›¾çº¸è½¬ä»£ç â€ è¿™ä¸ªæ ¸å¿ƒä»»åŠ¡çš„å·¥å…·ï¼ŒäºŒè€…åˆ†å·¥åä½œï¼Œç¼ºä¸€ä¸å¯ã€‚</p>
<p>protoc è¦æ‰§è¡Œçš„å°±æ˜¯æŠŠProtobufæ–‡ä»¶ç”Ÿæˆå¯¹åº”è¯­è¨€çš„æºç  ï¼Œè€Œprotoc-gen-go æ˜¯ç”ŸæˆGoè¯­è¨€çš„æºç </p>
<p>ç”±äºä½ çš„ <code>protoc</code> ç‰ˆæœ¬æ˜¯ 3.15.5ï¼Œç›´æ¥å®‰è£…æœ€æ–°ç‰ˆæ’ä»¶ä¼šå‡ºç°ç‰ˆæœ¬ä¸å…¼å®¹é—®é¢˜ï¼Œå› æ­¤éœ€è¦æŒ‡å®šé€‚é…çš„ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… protoc-gen-goï¼ˆé€‚é… 3.15.5 çš„ç‰ˆæœ¬ï¼‰</span>
go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.27.1

<span class="hljs-comment"># å®‰è£… protoc-gen-go-grpcï¼ˆé€‚é… 3.15.5 çš„ç‰ˆæœ¬ï¼‰</span>
go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.1.0

<span class="hljs-comment"># æŸ¥çœ‹ protoc-gen-go ç‰ˆæœ¬</span>
protoc-gen-go --version
<span class="hljs-comment"># æŸ¥çœ‹ protoc-gen-go-grpc ç‰ˆæœ¬</span>
protoc-gen-go-grpc --version
</code></pre>
<p><code>protoc</code>çš„åŸºç¡€å‘½ä»¤æ ¼å¼ï¼Œå‚æ•°è§£é‡Šï¼š</p>
<ul>
<li><code>-I .</code>ï¼šæŒ‡å®š proto æ–‡ä»¶çš„æœç´¢ç›®å½•ï¼ˆå½“å‰ç›®å½•ï¼‰ã€‚</li>
<li><code>--go_out=.</code>ï¼šæŒ‡å®šåŸºç¡€ Protobuf ä»£ç ç”Ÿæˆåˆ°å½“å‰ç›®å½•ã€‚</li>
<li><code>--go_opt=paths=source_relative</code>ï¼šæŒ‰ proto æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ç”Ÿæˆ Go æ–‡ä»¶ï¼ˆé¿å…ç”Ÿæˆå¤šå±‚åµŒå¥—ç›®å½•ï¼Œæ–°æ‰‹å‹å¥½ï¼‰ã€‚</li>
<li><code>--go-grpc_out=.</code>ï¼šæŒ‡å®š gRPC ä»£ç ç”Ÿæˆåˆ°å½“å‰ç›®å½•ã€‚</li>
<li><code>--go-grpc_opt=paths=source_relative</code>ï¼šåŒä¸Šï¼Œä¿è¯ gRPC ä»£ç å’Œ proto æ–‡ä»¶è·¯å¾„å¯¹åº”ã€‚</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼šç”ŸæˆåŸºç¡€çš„ Protobuf Go ä»£ç </span>
protoc -I . helloworld.proto --go_out=. --go_opt=paths=source_relative

<span class="hljs-comment"># ç¬¬äºŒæ­¥ï¼šç”Ÿæˆ gRPC ç›¸å…³çš„ Go ä»£ç </span>
protoc -I . helloworld.proto --go-grpc_out=. --go-grpc_opt=paths=source_relative
</code></pre>
<h4 data-id="heading-7">Protobuf æ–‡ä»¶çš„ç¼–å†™</h4>
<p>protobuf æ ‡é‡ç±»å‹æ˜¯æœ€åŸºç¡€çš„æ•°æ®ç±»å‹ï¼Œä»¥ä¸‹æ˜¯ proto3 æ ¸å¿ƒæ ‡é‡ç±»å‹ä¸ Go/Python/PHP çš„ç²¾å‡†æ˜ å°„ï¼ˆé‡ç‚¹æ ‡æ³¨æ˜“è¸©å‘çš„å·®å¼‚ï¼‰ï¼š</p>





















































































































<table><thead><tr><th>Protobuf ç±»å‹</th><th>Go ç±»å‹</th><th>Python ç±»å‹</th><th>PHP ç±»å‹</th><th>å¤‡æ³¨è¯´æ˜</th></tr></thead><tbody><tr><td>double</td><td>float64</td><td>float</td><td>float</td><td>64 ä½æµ®ç‚¹æ•°</td></tr><tr><td>float</td><td>float32</td><td>float</td><td>float</td><td>32 ä½æµ®ç‚¹æ•°</td></tr><tr><td>int32</td><td>int32</td><td>int</td><td>int</td><td>æœ‰ç¬¦å· 32 ä½æ•´å‹ï¼Œå¯å˜é•¿ç¼–ç </td></tr><tr><td>int64</td><td>int64</td><td>int</td><td>string</td><td>PHP 64 ä½æ•´å‹æ˜“æº¢å‡ºï¼Œæ˜ å°„ä¸ºå­—ç¬¦ä¸²é¿å…é—®é¢˜</td></tr><tr><td>uint32</td><td>uint32</td><td>int</td><td>int</td><td>æ— ç¬¦å· 32 ä½æ•´å‹ï¼Œå¯å˜é•¿ç¼–ç </td></tr><tr><td>uint64</td><td>uint64</td><td>int</td><td>string</td><td>åŒä¸Šï¼ŒPHP æ˜ å°„ä¸ºå­—ç¬¦ä¸²</td></tr><tr><td>sint32</td><td>int32</td><td>int</td><td>int</td><td>æœ‰ç¬¦å·å¯å˜é•¿ç¼–ç ï¼ˆè´Ÿæ•°æ›´é«˜æ•ˆï¼‰</td></tr><tr><td>sint64</td><td>int64</td><td>int</td><td>string</td><td>æœ‰ç¬¦å·å¯å˜é•¿ç¼–ç ï¼ˆè´Ÿæ•°æ›´é«˜æ•ˆï¼‰</td></tr><tr><td>fixed32</td><td>uint32</td><td>int</td><td>int</td><td>å›ºå®š 4 å­—èŠ‚ç¼–ç ï¼Œå¤§æ•°æ›´é«˜æ•ˆ</td></tr><tr><td>fixed64</td><td>uint64</td><td>int</td><td>string</td><td>å›ºå®š 8 å­—èŠ‚ç¼–ç </td></tr><tr><td>sfixed32</td><td>int32</td><td>int</td><td>int</td><td>æœ‰ç¬¦å·å›ºå®š 4 å­—èŠ‚ç¼–ç </td></tr><tr><td>sfixed64</td><td>int64</td><td>int</td><td>string</td><td>æœ‰ç¬¦å·å›ºå®š 8 å­—èŠ‚ç¼–ç </td></tr><tr><td>bool</td><td>bool</td><td>bool</td><td>bool</td><td>å¸ƒå°”å€¼</td></tr><tr><td>string</td><td>string</td><td>str</td><td>string</td><td>UTF-8 ç¼–ç ï¼Œé•¿åº¦ â‰¤ 2^32-1</td></tr><tr><td>bytes</td><td>[]byte</td><td>bytes</td><td>string</td><td>PHP æ— åŸç”Ÿ bytes ç±»å‹ï¼Œç”¨ string å­˜äºŒè¿›åˆ¶</td></tr></tbody></table>
<p><strong>1.proto ç®€å•ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-bash" lang="bash">syntax = <span class="hljs-string">"proto3"</span>; // å¿…é¡»æ”¾åœ¨ç¬¬ä¸€è¡Œï¼Œå£°æ˜ä½¿ç”¨proto3è¯­æ³•

// å±•ç¤ºåŸºæœ¬ç±»å‹å’Œé»˜è®¤å€¼çš„message
message BasicTypeDemo {
  int32 age = 1; Â  Â  Â  Â   // é»˜è®¤å€¼ï¼š0
  string name = 2; Â  Â  Â   // é»˜è®¤å€¼ï¼šç©ºå­—ç¬¦ä¸²
  bool is_student = 3; Â   // é»˜è®¤å€¼ï¼š<span class="hljs-literal">false</span>
  double score = 4; Â  Â  Â  // é»˜è®¤å€¼ï¼š0.0
  bytes avatar = 5; Â  Â  Â  // é»˜è®¤å€¼ï¼šç©ºå­—èŠ‚æ•°ç»„
}
</code></pre>
<p><strong>2.option go_package çš„ä½œç”¨:</strong> <code>option go_package</code> æ˜¯ Go è¯­è¨€ä¸“å±çš„ç¼–è¯‘é€‰é¡¹ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯<strong>æŒ‡å®šç”Ÿæˆçš„ Go ä»£ç çš„åŒ…è·¯å¾„å’ŒåŒ…å</strong>ï¼Œè§£å†³ Go æ¨¡å—æ¨¡å¼ä¸‹çš„ä»£ç å¯¼å…¥å†²çªé—®é¢˜ã€‚</p>
<p>è¯­æ³•æ ¼å¼ï¼š<code>option go_package = "æ¨¡å—è·¯å¾„/å­ç›®å½•;åŒ…å";</code></p>
<ul>
<li>åˆ†å·å‰ï¼šç”Ÿæˆçš„ Go æ–‡ä»¶å­˜æ”¾çš„<strong>æ¨¡å—ç›¸å¯¹è·¯å¾„</strong>ï¼ˆå¦‚ <code>github.com/yourname/proto-demo/pb</code>ï¼‰ï¼›</li>
<li>åˆ†å·åï¼šç”Ÿæˆçš„ Go ä»£ç çš„<strong>åŒ…å</strong>ï¼ˆçœç•¥åˆ™ç”¨ç›®å½•åï¼‰ã€‚</li>
</ul>
<p>ç¼–è¯‘æ—¶ï¼š<code>protoc</code> ä¼šæ ¹æ®è¯¥é€‰é¡¹è‡ªåŠ¨å°†ç”Ÿæˆçš„<code>.go</code>æ–‡ä»¶æ”¾åˆ°æŒ‡å®šè·¯å¾„ï¼Œå¹¶è®¾ç½®æ­£ç¡®çš„åŒ…åã€‚</p>
<pre><code class="hljs language-bash" lang="bash">syntax = <span class="hljs-string">"proto3"</span>;

// å‡è®¾ä½ çš„Goæ¨¡å—åæ˜¯ github.com/yourname/proto-demo
// ç”Ÿæˆçš„Goä»£ç ä¼šæ”¾åˆ° ./pb ç›®å½•ä¸‹ï¼ŒåŒ…åæ˜¯ pb
option go_package = <span class="hljs-string">"github.com/yourname/proto-demo/pb;pb"</span>;

message User {
  string username = 1;
}
</code></pre>
<p><strong>3. proto æ–‡ä»¶çš„ import å¯¼å…¥</strong></p>
<p><code>import</code> ç”¨äºå¤ç”¨å…¶ä»– proto æ–‡ä»¶ä¸­å®šä¹‰çš„ messageã€æšä¸¾ç­‰ç»“æ„ï¼Œæ˜¯ Protobuf å®ç°ä»£ç å¤ç”¨çš„æ ¸å¿ƒæ–¹å¼ï¼š</p>
<ul>
<li>æ™®é€šå¯¼å…¥ï¼š<code>import "è·¯å¾„/æ–‡ä»¶å.proto";</code>ï¼Œä»…å½“å‰æ–‡ä»¶å¯ä½¿ç”¨å¯¼å…¥çš„ç»“æ„ï¼›</li>
<li>å…¬å…±å¯¼å…¥ï¼š<code>import public "è·¯å¾„/æ–‡ä»¶å.proto";</code>ï¼Œå½“å‰æ–‡ä»¶å’Œå¯¼å…¥å½“å‰æ–‡ä»¶çš„å…¶ä»–æ–‡ä»¶éƒ½èƒ½ä½¿ç”¨ï¼›</li>
<li>å¯¼å…¥è·¯å¾„ï¼šæ”¯æŒç›¸å¯¹è·¯å¾„ï¼ˆå¦‚ <code>./common.proto</code>ï¼‰æˆ–ç»å¯¹è·¯å¾„ï¼ˆéœ€é…åˆ<code>protoc</code>çš„<code>-I</code>å‚æ•°æŒ‡å®šæ ¹ç›®å½•ï¼‰ã€‚</li>
</ul>
<p><strong>è¢«å¯¼å…¥æ–‡ä»¶ï¼šcommon.proto</strong></p>
<pre><code class="hljs language-protobuf" lang="protobuf">syntax = "proto3";
option go_package = "github.com/yourname/proto-demo/pb;pb";

// ä¾›å…¶ä»–æ–‡ä»¶å¤ç”¨çš„æšä¸¾
enum Gender {
 Â GENDER_UNSPECIFIED = 0;
 Â GENDER_MALE = 1;
 Â GENDER_FEMALE = 2;
}
</code></pre>
<p><strong>ä¸»æ–‡ä»¶ï¼šimport_demo.proto</strong></p>
<pre><code class="hljs language-protobuf" lang="protobuf">syntax = "proto3";
option go_package = "github.com/yourname/proto-demo/pb;pb";

// å¯¼å…¥common.protoï¼Œå¤ç”¨Genderæšä¸¾
import "./common.proto";

message User {
  string name = 1;
  Gender gender = 2; // ä½¿ç”¨å¯¼å…¥çš„æšä¸¾
}
</code></pre>
<p><strong>4.message å¯¹è±¡å’Œ message å¯¹è±¡çš„åµŒå¥—</strong></p>
<p><code>message</code> æ˜¯ Protobuf å®šä¹‰ç»“æ„åŒ–æ•°æ®çš„æ ¸å¿ƒå•å…ƒï¼ˆç±»ä¼¼ Go çš„<code>struct</code>ï¼‰ï¼Œæ”¯æŒä¸¤ç§åµŒå¥—æ–¹å¼ï¼š</p>
<ul>
<li><strong>å†…éƒ¨åµŒå¥—</strong>ï¼šåœ¨ä¸€ä¸ª message å†…å®šä¹‰å­ messageï¼Œä»…èƒ½é€šè¿‡å¤–éƒ¨ message çš„ä½œç”¨åŸŸè®¿é—®ï¼ˆå¦‚ <code>Outer.Inner</code>ï¼‰ï¼›</li>
<li><strong>å¤–éƒ¨åµŒå¥—</strong>ï¼šåœ¨ä¸€ä¸ª message ä¸­ç›´æ¥å¼•ç”¨å…¶ä»–å·²å®šä¹‰çš„ message ä½œä¸ºå­—æ®µç±»å‹ï¼ˆåŒæ–‡ä»¶ / å¯¼å…¥çš„å‡å¯ï¼‰ï¼›</li>
<li><code>repeated</code> å…³é”®å­—ï¼šè¡¨ç¤ºå­—æ®µæ˜¯æ•°ç»„ / åˆ‡ç‰‡ç±»å‹ï¼ˆé»˜è®¤ç©ºæ•°ç»„ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-protobuf" lang="protobuf">syntax = "proto3";
option go_package = "github.com/yourname/proto-demo/pb;pb";

// å¤–éƒ¨messageï¼ˆä¾›åµŒå¥—å¼•ç”¨ï¼‰
message Phone {
  string number = 1;
  string type = 2; // å¦‚"mobile"ã€"home"
}

// ä¸»messageï¼ŒåŒ…å«å†…éƒ¨åµŒå¥—å’Œå¤–éƒ¨å¼•ç”¨
message UserProfile {
  string username = 1;

  // å†…éƒ¨åµŒå¥—messageï¼ˆä»…UserProfileå¯ç”¨ï¼‰
  message ExtraInfo {
 Â   string hobby = 1;
 Â   string signature = 2;
  }

  repeated Phone phones = 2; // å¤–éƒ¨åµŒå¥—ï¼šå¼•ç”¨Phoneï¼Œrepeatedè¡¨ç¤ºæ•°ç»„
  ExtraInfo extra_info = 3;  // å†…éƒ¨åµŒå¥—ï¼šä½¿ç”¨ExtraInfo
}
</code></pre>
<p><strong>5.æšä¸¾ç±»å‹</strong></p>
<p><code>enum</code> ç”¨äºå®šä¹‰å‘½åå¸¸é‡ï¼Œproto3 æœ‰ä¸¥æ ¼è§„èŒƒï¼š</p>
<ol>
<li>ç¬¬ä¸€ä¸ªæšä¸¾å€¼å¿…é¡»ä¸º 0ï¼ˆä½œä¸ºé»˜è®¤å€¼ï¼‰ï¼Œé€šå¸¸å‘½åä¸º<code>XXX_UNSPECIFIED</code>ï¼›</li>
<li>å¯é€šè¿‡<code>option allow_alias = true;</code>å¼€å¯åˆ«åï¼ˆå¤šä¸ªå¸¸é‡æ˜ å°„åŒä¸€æ•°å€¼ï¼‰ï¼›</li>
<li>æšä¸¾å¯å®šä¹‰åœ¨ message å†…éƒ¨ï¼ˆå±€éƒ¨å¯ç”¨ï¼‰æˆ–å¤–éƒ¨ï¼ˆå…¨å±€å¯ç”¨ï¼‰ï¼›</li>
<li>æšä¸¾å­—æ®µçš„é»˜è®¤å€¼æ˜¯ç¬¬ä¸€ä¸ªå€¼ï¼ˆå€¼ä¸º 0 çš„å¸¸é‡ï¼‰ã€‚</li>
</ol>
<pre><code class="hljs language-protobuf" lang="protobuf">syntax = "proto3";
option go_package = "github.com/yourname/proto-demo/pb;pb";

// å¼€å¯åˆ«ååŠŸèƒ½
option allow_alias = true;

// å¤–éƒ¨æšä¸¾ï¼ˆå…¨å±€å¯ç”¨ï¼‰
enum OrderStatus {
  ORDER_STATUS_UNSPECIFIED = 0; // é»˜è®¤å€¼
  ORDER_STATUS_PENDING = 1;
  ORDER_STATUS_PAID = 2;
  ORDER_STATUS_CONFIRMED = 2; Â  // åˆ«åï¼šPAIDå’ŒCONFIRMEDéƒ½å¯¹åº”2
}

// å†…éƒ¨æšä¸¾ï¼ˆä»…Orderå†…å¯ç”¨ï¼‰
message Order {
  enum PaymentMethod {
 Â   PAYMENT_METHOD_UNSPECIFIED = 0;
 Â   PAYMENT_METHOD_ALIPAY = 1;
 Â   PAYMENT_METHOD_WECHAT = 2;
  }

  PaymentMethod payment_method = 1; // å†…éƒ¨æšä¸¾
  OrderStatus status = 2; Â  Â  Â  Â  Â  // å¤–éƒ¨æšä¸¾
}
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€gRPCï¼šåŸºäºHTTP/2å’ŒProtobufçš„RPCæ¡†æ¶</h3>
<p>gRPCæ˜¯Googleå¼€æºçš„é«˜æ€§èƒ½è·¨è¯­è¨€RPCæ¡†æ¶ï¼ŒåŸºäºHTTP/2åè®®ä¼ è¾“ï¼Œé»˜è®¤ä½¿ç”¨Protobufä½œä¸ºåºåˆ—åŒ–åè®®ï¼Œå®Œç¾ç»“åˆäº†HTTP/2çš„é«˜æ•ˆä¼ è¾“èƒ½åŠ›å’ŒProtobufçš„ç´§å‡‘åºåˆ—åŒ–ä¼˜åŠ¿ï¼ŒåŒæ—¶æ”¯æŒå¤šç§è°ƒç”¨æ¨¡å¼å’Œè·¨è¯­è¨€éƒ¨ç½²ã€‚</p>
<h4 data-id="heading-9">gRPC æµæ¨¡å¼</h4>
<p>GRPC åŸºäº HTTP/2 å®ç°äº†å››ç§é€šä¿¡æ¨¡å¼ï¼Œå…¶ä¸­<strong>æµæ¨¡å¼</strong>æ˜¯åŒºåˆ«äºä¼ ç»Ÿ â€œä¸€æ¬¡è¯·æ±‚ä¸€æ¬¡å“åº”â€ çš„æ ¸å¿ƒç‰¹æ€§ï¼Œåˆ†ä¸ºä¸‰ç±»ï¼š</p>
<p><strong>æœåŠ¡å™¨æµ RPC</strong>ï¼šå®¢æˆ·ç«¯å‘é€ 1 ä¸ªè¯·æ±‚ â†’ æœåŠ¡å™¨æµå¼è¿”å›å¤šä¸ªå“åº”ï¼ˆå¦‚å®æ—¶æ—¥å¿—æ¨é€ã€æ•°æ®åˆ†é¡µè¿”å›ï¼‰ã€‚</p>
<p><strong>å®¢æˆ·ç«¯æµ RPC</strong>ï¼šå®¢æˆ·ç«¯æµå¼å‘é€å¤šä¸ªè¯·æ±‚ â†’ æœåŠ¡å™¨è¿”å› 1 ä¸ªå“åº”ï¼ˆå¦‚æ‰¹é‡æ•°æ®ä¸Šä¼ åè¿”å›æ±‡æ€»ç»“æœï¼‰ã€‚</p>
<p><strong>åŒå‘æµ RPC</strong>ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒå‘æµå¼é€šä¿¡ï¼ŒåŒæ–¹å¯ç‹¬ç«‹å‘é€ / æ¥æ”¶æ•°æ®ï¼ˆå¦‚å³æ—¶èŠå¤©ã€å®æ—¶éŸ³è§†é¢‘æŒ‡ä»¤äº¤äº’ï¼‰ã€‚</p>
<pre><code class="hljs language-protobuf" lang="protobuf">syntax = "proto3";

option go_package = "./pb;pb"; // ç”Ÿæˆçš„Goä»£ç è·¯å¾„

// æµæ¨¡å¼æ¼”ç¤ºæœåŠ¡
service StreamService {
  // 1. æœåŠ¡å™¨æµRPCï¼šå®¢æˆ·ç«¯å‘è¯·æ±‚ï¼ŒæœåŠ¡ç«¯è¿”å›æµ
  rpc ServerStream(StreamRequest) returns (stream StreamResponse);
 Â 
  // 2. å®¢æˆ·ç«¯æµRPCï¼šå®¢æˆ·ç«¯å‘æµï¼ŒæœåŠ¡ç«¯è¿”å›å•ä¸ªå“åº”
  rpc ClientStream(stream StreamRequest) returns (StreamResponse);
 Â 
  // 3. åŒå‘æµRPCï¼šåŒå‘æµå¼é€šä¿¡
  rpc BidirectionalStream(stream StreamRequest) returns (stream StreamResponse);
}

// è¯·æ±‚ç»“æ„
message StreamRequest {
  string message = 1;
  int32 id = 2;
}

// å“åº”ç»“æ„
message StreamResponse {
  string reply = 1;
  int32 code = 2;
}
</code></pre>
<p>æœåŠ¡ç«¯å®ç°ï¼ˆserver.goï¼‰</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
  <span class="hljs-string">"context"</span>
  <span class="hljs-string">"fmt"</span>
  <span class="hljs-string">"log"</span>
  <span class="hljs-string">"net"</span>
  <span class="hljs-string">"time"</span>

  <span class="hljs-string">"google.golang.org/grpc"</span>
  pb <span class="hljs-string">"your-project-path/pb"</span> <span class="hljs-comment">// æ›¿æ¢ä¸ºå®é™…pbåŒ…è·¯å¾„</span>
)

<span class="hljs-comment">// å®ç°StreamServiceæœåŠ¡</span>
<span class="hljs-keyword">type</span> streamServer <span class="hljs-keyword">struct</span> {
  pb.UnimplementedStreamServiceServer
}

<span class="hljs-comment">// 1. æœåŠ¡å™¨æµRPCå®ç°</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *streamServer)</span></span> ServerStream(req *pb.StreamRequest, stream pb.StreamService_ServerStreamServer) <span class="hljs-type">error</span> {
  log.Printf(<span class="hljs-string">"æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼š%s (id:%d)"</span>, req.Message, req.Id)
  <span class="hljs-comment">// æ¨¡æ‹Ÿæµå¼è¿”å›3ä¸ªå“åº”</span>
  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++ {
 Â   reply := fmt.Sprintf(<span class="hljs-string">"æœåŠ¡å™¨æµå“åº” %d: %s"</span>, i, req.Message)
 Â   <span class="hljs-keyword">if</span> err := stream.Send(&amp;pb.StreamResponse{Reply: reply, Code: <span class="hljs-type">int32</span>(i)}); err != <span class="hljs-literal">nil</span> {
 Â  Â   <span class="hljs-keyword">return</span> err
 Â   }
 Â   time.Sleep(<span class="hljs-number">1</span> * time.Second) <span class="hljs-comment">// æ¨¡æ‹Ÿå»¶è¿Ÿ</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// 2. å®¢æˆ·ç«¯æµRPCå®ç°</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *streamServer)</span></span> ClientStream(stream pb.StreamService_ClientStreamServer) <span class="hljs-type">error</span> {
  <span class="hljs-keyword">var</span> total <span class="hljs-type">int32</span> = <span class="hljs-number">0</span>
  <span class="hljs-keyword">var</span> messages []<span class="hljs-type">string</span>
  <span class="hljs-comment">// å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯æµå¼è¯·æ±‚</span>
  <span class="hljs-keyword">for</span> {
 Â   req, err := stream.Recv()
 Â   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â  Â   <span class="hljs-comment">// å®¢æˆ·ç«¯æµç»“æŸï¼ˆEOFï¼‰</span>
 Â  Â   <span class="hljs-keyword">if</span> err.Error() == <span class="hljs-string">"EOF"</span> {
 Â  Â  Â   reply := fmt.Sprintf(<span class="hljs-string">"å®¢æˆ·ç«¯å…±å‘é€%dæ¡æ¶ˆæ¯ï¼š%v"</span>, total, messages)
 Â  Â  Â   <span class="hljs-keyword">return</span> stream.SendAndClose(&amp;pb.StreamResponse{Reply: reply, Code: total})
 Â  Â   }
 Â  Â   <span class="hljs-keyword">return</span> err
 Â   }
 Â   total++
 Â   messages = <span class="hljs-built_in">append</span>(messages, req.Message)
 Â   log.Printf(<span class="hljs-string">"æ”¶åˆ°å®¢æˆ·ç«¯æµè¯·æ±‚ %d: %s"</span>, req.Id, req.Message)
  }
}

<span class="hljs-comment">// 3. åŒå‘æµRPCå®ç°</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *streamServer)</span></span> BidirectionalStream(stream pb.StreamService_BidirectionalStreamServer) <span class="hljs-type">error</span> {
  <span class="hljs-comment">// åç¨‹æ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯</span>
  <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
 Â   <span class="hljs-keyword">for</span> {
 Â  Â   req, err := stream.Recv()
 Â  Â   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â  Â  Â   log.Printf(<span class="hljs-string">"åŒå‘æµæ¥æ”¶ç»“æŸ: %v"</span>, err)
 Â  Â  Â   <span class="hljs-keyword">return</span>
 Â  Â   }
 Â  Â   log.Printf(<span class="hljs-string">"æ”¶åˆ°åŒå‘æµè¯·æ±‚ï¼š%s (id:%d)"</span>, req.Message, req.Id)
 Â   }
  }()

  <span class="hljs-comment">// ä¸»çº¿ç¨‹å‘é€æµå¼å“åº”</span>
  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++ {
 Â   reply := fmt.Sprintf(<span class="hljs-string">"åŒå‘æµæœåŠ¡å™¨å“åº” %d"</span>, i)
 Â   <span class="hljs-keyword">if</span> err := stream.Send(&amp;pb.StreamResponse{Reply: reply, Code: <span class="hljs-type">int32</span>(i)}); err != <span class="hljs-literal">nil</span> {
 Â  Â   <span class="hljs-keyword">return</span> err
 Â   }
 Â   time.Sleep(<span class="hljs-number">1</span> * time.Second)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
  <span class="hljs-comment">// ç›‘å¬ç«¯å£</span>
  lis, err := net.Listen(<span class="hljs-string">"tcp"</span>, <span class="hljs-string">":50051"</span>)
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â   log.Fatalf(<span class="hljs-string">"ç›‘å¬å¤±è´¥: %v"</span>, err)
  }
  <span class="hljs-comment">// åˆ›å»ºGRPCæœåŠ¡å™¨</span>
  s := grpc.NewServer()
  pb.RegisterStreamServiceServer(s, &amp;streamServer{})
  log.Println(<span class="hljs-string">"GRPCæœåŠ¡å™¨å¯åŠ¨ï¼Œç«¯å£50051"</span>)
  <span class="hljs-keyword">if</span> err := s.Serve(lis); err != <span class="hljs-literal">nil</span> {
 Â   log.Fatalf(<span class="hljs-string">"æœåŠ¡å¯åŠ¨å¤±è´¥: %v"</span>, err)
  }
}
</code></pre>
<p>å®¢æˆ·ç«¯å®ç°ï¼ˆclient.goï¼‰</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
  <span class="hljs-string">"context"</span>
  <span class="hljs-string">"fmt"</span>
  <span class="hljs-string">"log"</span>
  <span class="hljs-string">"time"</span>

  <span class="hljs-string">"google.golang.org/grpc"</span>
  <span class="hljs-string">"google.golang.org/grpc/credentials/insecure"</span>
  pb <span class="hljs-string">"your-project-path/pb"</span> <span class="hljs-comment">// æ›¿æ¢ä¸ºå®é™…pbåŒ…è·¯å¾„</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
  <span class="hljs-comment">// è¿æ¥GRPCæœåŠ¡å™¨</span>
  conn, err := grpc.Dial(<span class="hljs-string">":50051"</span>, grpc.WithTransportCredentials(insecure.NewCredentials()))
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â   log.Fatalf(<span class="hljs-string">"è¿æ¥å¤±è´¥: %v"</span>, err)
  }
  <span class="hljs-keyword">defer</span> conn.Close()
  client := pb.NewStreamServiceClient(conn)

  <span class="hljs-comment">// 1. è°ƒç”¨æœåŠ¡å™¨æµRPC</span>
  fmt.Println(<span class="hljs-string">"=== æµ‹è¯•æœåŠ¡å™¨æµRPC ==="</span>)
  serverStream, err := client.ServerStream(context.Background(), &amp;pb.StreamRequest{Message: <span class="hljs-string">"hello server stream"</span>, Id: <span class="hljs-number">1</span>})
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â   log.Fatalf(<span class="hljs-string">"è°ƒç”¨æœåŠ¡å™¨æµå¤±è´¥: %v"</span>, err)
  }
  <span class="hljs-keyword">for</span> {
 Â   resp, err := serverStream.Recv()
 Â   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â  Â   <span class="hljs-keyword">if</span> err.Error() == <span class="hljs-string">"EOF"</span> {
 Â  Â  Â   <span class="hljs-keyword">break</span>
 Â  Â   }
 Â  Â   log.Fatalf(<span class="hljs-string">"æ¥æ”¶æœåŠ¡å™¨æµå“åº”å¤±è´¥: %v"</span>, err)
 Â   }
 Â   fmt.Printf(<span class="hljs-string">"æ”¶åˆ°æœåŠ¡å™¨æµå“åº”ï¼š%s (code:%d)\n"</span>, resp.Reply, resp.Code)
  }

  <span class="hljs-comment">// 2. è°ƒç”¨å®¢æˆ·ç«¯æµRPC</span>
  fmt.Println(<span class="hljs-string">"\n=== æµ‹è¯•å®¢æˆ·ç«¯æµRPC ==="</span>)
  clientStream, err := client.ClientStream(context.Background())
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â   log.Fatalf(<span class="hljs-string">"è°ƒç”¨å®¢æˆ·ç«¯æµå¤±è´¥: %v"</span>, err)
  }
  <span class="hljs-comment">// å‘é€3ä¸ªæµå¼è¯·æ±‚</span>
  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++ {
 Â   req := &amp;pb.StreamRequest{Message: fmt.Sprintf(<span class="hljs-string">"client stream msg %d"</span>, i), Id: <span class="hljs-type">int32</span>(i)}
 Â   <span class="hljs-keyword">if</span> err := clientStream.Send(req); err != <span class="hljs-literal">nil</span> {
 Â  Â   log.Fatalf(<span class="hljs-string">"å‘é€å®¢æˆ·ç«¯æµè¯·æ±‚å¤±è´¥: %v"</span>, err)
 Â   }
 Â   time.Sleep(<span class="hljs-number">500</span> * time.Millisecond)
  }
  <span class="hljs-comment">// å…³é—­å®¢æˆ·ç«¯æµï¼Œæ¥æ”¶å“åº”</span>
  resp, err := clientStream.CloseAndRecv()
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â   log.Fatalf(<span class="hljs-string">"æ¥æ”¶å®¢æˆ·ç«¯æµå“åº”å¤±è´¥: %v"</span>, err)
  }
  fmt.Printf(<span class="hljs-string">"å®¢æˆ·ç«¯æµæœ€ç»ˆå“åº”ï¼š%s (code:%d)\n"</span>, resp.Reply, resp.Code)

  <span class="hljs-comment">// 3. è°ƒç”¨åŒå‘æµRPC</span>
  fmt.Println(<span class="hljs-string">"\n=== æµ‹è¯•åŒå‘æµRPC ==="</span>)
  biStream, err := client.BidirectionalStream(context.Background())
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â   log.Fatalf(<span class="hljs-string">"è°ƒç”¨åŒå‘æµå¤±è´¥: %v"</span>, err)
  }
  <span class="hljs-comment">// åç¨‹å‘é€å®¢æˆ·ç«¯æ¶ˆæ¯</span>
  <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
 Â   <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++ {
 Â  Â   req := &amp;pb.StreamRequest{Message: fmt.Sprintf(<span class="hljs-string">"bi stream msg %d"</span>, i), Id: <span class="hljs-type">int32</span>(i)}
 Â  Â   <span class="hljs-keyword">if</span> err := biStream.Send(req); err != <span class="hljs-literal">nil</span> {
 Â  Â  Â   log.Printf(<span class="hljs-string">"å‘é€åŒå‘æµè¯·æ±‚å¤±è´¥: %v"</span>, err)
 Â  Â  Â   <span class="hljs-keyword">return</span>
 Â  Â   }
 Â  Â   time.Sleep(<span class="hljs-number">800</span> * time.Millisecond)
 Â   }
 Â   <span class="hljs-comment">// å…³é—­å®¢æˆ·ç«¯å‘é€æµ</span>
 Â   <span class="hljs-keyword">if</span> err := biStream.CloseSend(); err != <span class="hljs-literal">nil</span> {
 Â  Â   log.Printf(<span class="hljs-string">"å…³é—­åŒå‘æµå‘é€å¤±è´¥: %v"</span>, err)
 Â   }
  }()

  <span class="hljs-comment">// æ¥æ”¶æœåŠ¡å™¨æµå¼å“åº”</span>
  <span class="hljs-keyword">for</span> {
 Â   resp, err := biStream.Recv()
 Â   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â  Â   <span class="hljs-keyword">if</span> err.Error() == <span class="hljs-string">"EOF"</span> {
 Â  Â  Â   <span class="hljs-keyword">break</span>
 Â  Â   }
 Â  Â   log.Fatalf(<span class="hljs-string">"æ¥æ”¶åŒå‘æµå“åº”å¤±è´¥: %v"</span>, err)
 Â   }
 Â   fmt.Printf(<span class="hljs-string">"æ”¶åˆ°åŒå‘æµå“åº”ï¼š%s (code:%d)\n"</span>, resp.Reply, resp.Code)
  }
}
</code></pre>
<h4 data-id="heading-10">GRPC Metadata æœºåˆ¶</h4>
<p>Metadata æ˜¯ GRPC çš„<strong>å…ƒæ•°æ®ä¼ é€’æœºåˆ¶</strong>ï¼Œç±»æ¯” HTTP çš„ Headerï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ä¼ é€’éä¸šåŠ¡çš„é™„åŠ ä¿¡æ¯ï¼ˆå¦‚è®¤è¯ Tokenã€è¯·æ±‚ IDã€è¶…æ—¶æ—¶é—´ã€ç‰ˆæœ¬å·ç­‰ï¼‰ï¼š</p>
<ul>
<li>
<p>ç»“æ„ï¼šé”®å€¼å¯¹ï¼ˆkey-valueï¼‰ï¼Œkey æ¨èå°å†™ï¼Œä»¥<code>grpc-</code>å¼€å¤´çš„ key ä¸º GRPC ä¿ç•™å­—æ®µã€‚</p>
</li>
<li>
<p>ç±»å‹ï¼šæ”¯æŒå­—ç¬¦ä¸²ï¼ˆ<code>metadata.Pairs</code>ï¼‰å’ŒäºŒè¿›åˆ¶å€¼ï¼ˆéœ€è½¬å­—ç¬¦ä¸²ä¼ é€’ï¼‰ã€‚</p>
</li>
<li>
<p>ä¼ é€’æ–¹å‘ï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯ï¼šé€šè¿‡ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰æ³¨å…¥ Metadataã€‚</li>
<li>æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯ï¼šåˆ†ä¸º<code>Header Metadata</code>ï¼ˆå“åº”å¤´ï¼‰å’Œ<code>Trailing Metadata</code>ï¼ˆå“åº”å°¾ï¼‰ï¼Œå¯ä¸»åŠ¨è¿”å›ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æœåŠ¡ç«¯æ·»åŠ  Metadata å¤„ç†ï¼ˆserver.goï¼‰</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ–°å¢å¯¼å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"google.golang.org/grpc/metadata"</span>

<span class="hljs-comment">// é‡å†™ServerStreamæ–¹æ³•ï¼Œæ·»åŠ Metadataè§£æå’Œè¿”å›</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *streamServer)</span></span> ServerStream(req *pb.StreamRequest, stream pb.StreamService_ServerStreamServer) <span class="hljs-type">error</span> {
  <span class="hljs-comment">// 1. æå–å®¢æˆ·ç«¯ä¼ é€’çš„Metadata</span>
  md, ok := metadata.FromIncomingContext(stream.Context())
  <span class="hljs-keyword">if</span> !ok {
 Â   log.Println(<span class="hljs-string">"æœªè·å–åˆ°å®¢æˆ·ç«¯Metadata"</span>)
  } <span class="hljs-keyword">else</span> {
 Â   <span class="hljs-keyword">if</span> tokens := md.Get(<span class="hljs-string">"token"</span>); <span class="hljs-built_in">len</span>(tokens) &gt; <span class="hljs-number">0</span> {
 Â  Â   log.Printf(<span class="hljs-string">"å®¢æˆ·ç«¯Token: %s"</span>, tokens[<span class="hljs-number">0</span>])
 Â   }
 Â   <span class="hljs-keyword">if</span> reqIDs := md.Get(<span class="hljs-string">"request-id"</span>); <span class="hljs-built_in">len</span>(reqIDs) &gt; <span class="hljs-number">0</span> {
 Â  Â   log.Printf(<span class="hljs-string">"è¯·æ±‚ID: %s"</span>, reqIDs[<span class="hljs-number">0</span>])
 Â   }
  }

  <span class="hljs-comment">// 2. å‘å®¢æˆ·ç«¯è¿”å›Header Metadata</span>
  headerMd := metadata.Pairs(
 Â   <span class="hljs-string">"server-version"</span>, <span class="hljs-string">"v1.0.0"</span>,
 Â   <span class="hljs-string">"timestamp"</span>, fmt.Sprintf(<span class="hljs-string">"%d"</span>, time.Now().Unix()),
  )
  <span class="hljs-keyword">if</span> err := stream.SendHeader(headerMd); err != <span class="hljs-literal">nil</span> {
 Â   <span class="hljs-keyword">return</span> err
  }

  <span class="hljs-comment">// 3. å‘å®¢æˆ·ç«¯è¿”å›Trailing Metadata</span>
  trailingMd := metadata.Pairs(
 Â   <span class="hljs-string">"request-status"</span>, <span class="hljs-string">"success"</span>,
 Â   <span class="hljs-string">"response-count"</span>, <span class="hljs-string">"3"</span>,
  )
  stream.SetTrailer(trailingMd)

  <span class="hljs-comment">// åŸæœ‰æµå¼å“åº”é€»è¾‘ï¼ˆç•¥ï¼‰</span>
  log.Printf(<span class="hljs-string">"æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼š%s (id:%d)"</span>, req.Message, req.Id)
  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++ {
 Â   reply := fmt.Sprintf(<span class="hljs-string">"æœåŠ¡å™¨æµå“åº” %d: %s"</span>, i, req.Message)
 Â   <span class="hljs-keyword">if</span> err := stream.Send(&amp;pb.StreamResponse{Reply: reply, Code: <span class="hljs-type">int32</span>(i)}); err != <span class="hljs-literal">nil</span> {
 Â  Â   <span class="hljs-keyword">return</span> err
 Â   }
 Â   time.Sleep(<span class="hljs-number">1</span> * time.Second)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<p>å®¢æˆ·ç«¯æ·»åŠ  Metadata å‘é€å’Œæ¥æ”¶ï¼ˆclient.goï¼‰</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ–°å¢å¯¼å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"google.golang.org/grpc/metadata"</span>

<span class="hljs-comment">// ä¿®æ”¹æœåŠ¡å™¨æµRPCè°ƒç”¨é€»è¾‘</span>
fmt.Println(<span class="hljs-string">"=== æµ‹è¯•æœåŠ¡å™¨æµRPCï¼ˆå¸¦Metadataï¼‰ ==="</span>)
<span class="hljs-comment">// 1. åˆ›å»ºMetadata</span>
md := metadata.Pairs(
  <span class="hljs-string">"token"</span>, <span class="hljs-string">"user_123456_token"</span>,
  <span class="hljs-string">"request-id"</span>, <span class="hljs-string">"req_987654"</span>,
)
<span class="hljs-comment">// 2. æ³¨å…¥åˆ°ä¸Šä¸‹æ–‡</span>
ctx := metadata.NewOutgoingContext(context.Background(), md)
<span class="hljs-comment">// 3. è°ƒç”¨RPC</span>
serverStream, err := client.ServerStream(ctx, &amp;pb.StreamRequest{Message: <span class="hljs-string">"hello server stream"</span>, Id: <span class="hljs-number">1</span>})
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
  log.Fatalf(<span class="hljs-string">"è°ƒç”¨æœåŠ¡å™¨æµå¤±è´¥: %v"</span>, err)
}

<span class="hljs-comment">// 4. æ¥æ”¶æœåŠ¡ç«¯Header Metadata</span>
headerMd, err := serverStream.Header()
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
  log.Fatalf(<span class="hljs-string">"è·å–Header Metadataå¤±è´¥: %v"</span>, err)
}
fmt.Printf(<span class="hljs-string">"æœåŠ¡ç«¯Header: server-version=%s, timestamp=%s\n"</span>, 
  headerMd.Get(<span class="hljs-string">"server-version"</span>)[<span class="hljs-number">0</span>], headerMd.Get(<span class="hljs-string">"timestamp"</span>)[<span class="hljs-number">0</span>])

<span class="hljs-comment">// 5. æ¥æ”¶æµå¼å“åº”ï¼ˆåŸæœ‰é€»è¾‘ï¼Œç•¥ï¼‰</span>
<span class="hljs-keyword">for</span> {
  resp, err := serverStream.Recv()
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â   <span class="hljs-keyword">if</span> err.Error() == <span class="hljs-string">"EOF"</span> {
 Â  Â   <span class="hljs-keyword">break</span>
 Â   }
 Â   log.Fatalf(<span class="hljs-string">"æ¥æ”¶å“åº”å¤±è´¥: %v"</span>, err)
  }
  fmt.Printf(<span class="hljs-string">"æ”¶åˆ°å“åº”ï¼š%s (code:%d)\n"</span>, resp.Reply, resp.Code)
}

<span class="hljs-comment">// 6. æ¥æ”¶æœåŠ¡ç«¯Trailing Metadata</span>
trailingMd := serverStream.Trailer()
fmt.Printf(<span class="hljs-string">"æœåŠ¡ç«¯Trailer: request-status=%s, response-count=%s\n"</span>, 
  trailingMd.Get(<span class="hljs-string">"request-status"</span>)[<span class="hljs-number">0</span>], trailingMd.Get(<span class="hljs-string">"response-count"</span>)[<span class="hljs-number">0</span>])
</code></pre>
<h4 data-id="heading-11">GRPC éªŒè¯å™¨</h4>
<p>GRPC éªŒè¯å™¨ç”¨äº<strong>è¯·æ±‚å‚æ•°çš„å‰ç½®æ ¡éªŒ</strong>ï¼Œé¿å…éæ³•è¯·æ±‚è¿›å…¥ä¸šåŠ¡é€»è¾‘ï¼Œæ ¸å¿ƒä¾èµ–<code>protoc-gen-validate</code>æ’ä»¶ï¼š</p>
<ul>
<li>åŸç†ï¼šåœ¨ Proto æ–‡ä»¶ä¸­é€šè¿‡æ³¨è§£å®šä¹‰å­—æ®µéªŒè¯è§„åˆ™ï¼ˆå¦‚éç©ºã€é•¿åº¦ã€æ•°å€¼èŒƒå›´ã€æ­£åˆ™åŒ¹é…ï¼‰ï¼Œç”Ÿæˆå¯¹åº”çš„éªŒè¯ä»£ç ï¼ŒæœåŠ¡ç«¯è°ƒç”¨<code>Validate()</code>æ–¹æ³•å³å¯æ ¡éªŒã€‚</li>
<li>ä¼˜åŠ¿ï¼šæ ¡éªŒé€»è¾‘ä¸ä¸šåŠ¡è§£è€¦ï¼Œè§„åˆ™é›†ä¸­åœ¨ Proto ä¸­ï¼Œè·¨è¯­è¨€é€šç”¨ã€‚</li>
<li>å¸¸ç”¨è§„åˆ™ï¼š<code>required</code>ï¼ˆéç©ºï¼‰ã€<code>min_len/max_len</code>ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ï¼‰ã€<code>gt/lt</code>ï¼ˆæ•°å€¼èŒƒå›´ï¼‰ã€<code>pattern</code>ï¼ˆæ­£åˆ™ï¼‰ç­‰ã€‚</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">go install github.com/bufbuild/protoc-gen-validate@latest
</code></pre>
<p>protoæ–‡ä»¶</p>
<pre><code class="hljs language-protobuf" lang="protobuf">syntax = "proto3";

option go_package = "./pb;pb";

// å¯¼å…¥éªŒè¯å™¨æ³¨è§£
import "validate/validate.proto";

message StreamRequest {
  // éªŒè¯è§„åˆ™ï¼šéç©ºï¼Œé•¿åº¦1-20
  string message = 1 [(validate.rules).string = {min_len: 1, max_len: 20}];
  // éªŒè¯è§„åˆ™ï¼šå¤§äº0ï¼Œå°äº100
  int32 id = 2 [(validate.rules).int32 = {gt: 0, lt: 100}];
}

// æœåŠ¡å®šä¹‰ä¸å˜
service StreamService {
  rpc ServerStream(StreamRequest) returns (stream StreamResponse);
  // ... å…¶ä»–æ–¹æ³•
}

message StreamResponse {
  string reply = 1;
  int32 code = 2;
}
</code></pre>
<p>æœåŠ¡ç«¯æ·»åŠ éªŒè¯é€»è¾‘</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ–°å¢å¯¼å…¥</span>
<span class="hljs-keyword">import</span> (
  <span class="hljs-string">"google.golang.org/grpc/codes"</span>
  <span class="hljs-string">"google.golang.org/grpc/status"</span>
)

<span class="hljs-comment">// ä¿®æ”¹ServerStreamæ–¹æ³•ï¼Œæ·»åŠ å‚æ•°éªŒè¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *streamServer)</span></span> ServerStream(req *pb.StreamRequest, stream pb.StreamService_ServerStreamServer) <span class="hljs-type">error</span> {
  <span class="hljs-comment">// 1. å‚æ•°éªŒè¯ï¼ˆæ ¸å¿ƒï¼‰</span>
  <span class="hljs-keyword">if</span> err := req.Validate(); err != <span class="hljs-literal">nil</span> {
 Â   log.Printf(<span class="hljs-string">"å‚æ•°éªŒè¯å¤±è´¥: %v"</span>, err)
 Â   <span class="hljs-comment">// è¿”å›INVALID_ARGUMENTçŠ¶æ€ç </span>
 Â   <span class="hljs-keyword">return</span> status.Error(codes.InvalidArgument, fmt.Sprintf(<span class="hljs-string">"å‚æ•°éæ³•: %v"</span>, err))
  }
â€‹
  <span class="hljs-comment">// åŸæœ‰Metadataè§£æã€å“åº”é€»è¾‘ï¼ˆç•¥ï¼‰</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<h4 data-id="heading-12">GRPC çŠ¶æ€ç é”™è¯¯æœºåˆ¶</h4>
<p>GRPC å®šä¹‰äº†<strong>æ ‡å‡†åŒ–çŠ¶æ€ç ï¼ˆStatusCodeï¼‰</strong> ï¼Œç”¨äºç»Ÿä¸€è¡¨ç¤ºè¯·æ±‚å¤„ç†ç»“æœï¼Œæ›¿ä»£ HTTP çŠ¶æ€ç ï¼Œæ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ ¸å¿ƒçŠ¶æ€ç ï¼šå…± 16 ç§æ ‡å‡†ç ï¼Œå¸¸ç”¨çš„æœ‰<code>OK(0)</code>ï¼ˆæˆåŠŸï¼‰ã€<code>INVALID_ARGUMENT(3)</code>ï¼ˆå‚æ•°éæ³•ï¼‰ã€<code>UNAUTHENTICATED(16)</code>ï¼ˆè®¤è¯å¤±è´¥ï¼‰ã€<code>FAILED_PRECONDITION(9)</code>ï¼ˆä¸šåŠ¡è§„åˆ™å¤±è´¥ï¼‰ç­‰ã€‚</li>
<li>é”™è¯¯ç»“æ„ï¼šåŒ…å«<strong>çŠ¶æ€ç </strong>ã€<strong>é”™è¯¯æ¶ˆæ¯</strong>ã€<strong>è¯¦ç»†ä¿¡æ¯</strong>ï¼ˆå¯é€šè¿‡<code>WithDetails</code>é™„åŠ ï¼‰ã€‚</li>
<li>ä½¿ç”¨æ–¹å¼ï¼šæœåŠ¡ç«¯é€šè¿‡<code>status.Error()</code>è¿”å›é”™è¯¯ï¼›å®¢æˆ·ç«¯é€šè¿‡<code>status.FromError()</code>è§£æçŠ¶æ€ç å’Œæ¶ˆæ¯ã€‚</li>
</ul>
<p>æœåŠ¡ç«¯è¿”å›ä¸åŒçŠ¶æ€ç é”™è¯¯</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *streamServer)</span></span> ServerStream(req *pb.StreamRequest, stream pb.StreamService_ServerStreamServer) <span class="hljs-type">error</span> {
  <span class="hljs-comment">// 1. å‚æ•°éªŒè¯å¤±è´¥ â†’ INVALID_ARGUMENT(3)</span>
  <span class="hljs-keyword">if</span> err := req.Validate(); err != <span class="hljs-literal">nil</span> {
 Â   <span class="hljs-keyword">return</span> status.Error(codes.InvalidArgument, fmt.Sprintf(<span class="hljs-string">"å‚æ•°éæ³•: %v"</span>, err))
  }

  <span class="hljs-comment">// 2. è®¤è¯å¤±è´¥ â†’ UNAUTHENTICATED(16)</span>
  md, _ := metadata.FromIncomingContext(stream.Context())
  <span class="hljs-keyword">if</span> tokens := md.Get(<span class="hljs-string">"token"</span>); <span class="hljs-built_in">len</span>(tokens) == <span class="hljs-number">0</span> || tokens[<span class="hljs-number">0</span>] != <span class="hljs-string">"user_123456_token"</span> {
 Â   <span class="hljs-keyword">return</span> status.Error(codes.Unauthenticated, <span class="hljs-string">"tokenæ— æ•ˆæˆ–ç¼ºå¤±"</span>)
  }

  <span class="hljs-comment">// 3. ä¸šåŠ¡è§„åˆ™å¤±è´¥ â†’ FAILED_PRECONDITION(9)ï¼ˆå¸¦è¯¦ç»†ä¿¡æ¯ï¼‰</span>
  <span class="hljs-keyword">if</span> req.Id == <span class="hljs-number">5</span> {
 Â   st := status.New(codes.FailedPrecondition, <span class="hljs-string">"ä¸šåŠ¡è§„åˆ™æ ¡éªŒå¤±è´¥"</span>)
 Â   <span class="hljs-comment">// é™„åŠ è¯¦ç»†ä¿¡æ¯</span>
 Â   st, err := st.WithDetails(&amp;pb.StreamResponse{Reply: <span class="hljs-string">"idä¸èƒ½ä¸º5"</span>, Code: <span class="hljs-number">5</span>})
 Â   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
 Â  Â   <span class="hljs-keyword">return</span> st.Err()
 Â   }
 Â   <span class="hljs-keyword">return</span> st.Err()
  }

  <span class="hljs-comment">// åŸæœ‰é€»è¾‘ï¼ˆç•¥ï¼‰</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<p>å®¢æˆ·ç«¯è§£æé”™è¯¯è¯¦æƒ…</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è°ƒç”¨RPCï¼ˆid=5ï¼‰</span>
serverStream, err := client.ServerStream(ctx, &amp;pb.StreamRequest{Message: <span class="hljs-string">"test"</span>, Id: <span class="hljs-number">5</span>})
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
  st, ok := status.FromError(err)
  <span class="hljs-keyword">if</span> !ok {
 Â   log.Fatalf(<span class="hljs-string">"éGRPCé”™è¯¯: %v"</span>, err)
  }

  <span class="hljs-comment">// è§£æåŸºç¡€ä¿¡æ¯</span>
  fmt.Printf(<span class="hljs-string">"çŠ¶æ€ç : %s (æ•°å­—:%d)\n"</span>, st.Code().String(), st.Code())
  fmt.Printf(<span class="hljs-string">"é”™è¯¯æ¶ˆæ¯: %s\n"</span>, st.Message())

  <span class="hljs-comment">// è§£æè¯¦ç»†ä¿¡æ¯</span>
  <span class="hljs-keyword">for</span> _, detail := <span class="hljs-keyword">range</span> st.Details() {
 Â   <span class="hljs-keyword">if</span> resp, ok := detail.(*pb.StreamResponse); ok {
 Â  Â   fmt.Printf(<span class="hljs-string">"è¯¦ç»†ä¿¡æ¯: %s (code:%d)\n"</span>, resp.Reply, resp.Code)
 Â   }
  }
  <span class="hljs-comment">// è¾“å‡ºï¼š</span>
  <span class="hljs-comment">// çŠ¶æ€ç : FailedPrecondition (æ•°å­—:9)</span>
  <span class="hljs-comment">// é”™è¯¯æ¶ˆæ¯: ä¸šåŠ¡è§„åˆ™æ ¡éªŒå¤±è´¥</span>
  <span class="hljs-comment">// è¯¦ç»†ä¿¡æ¯: idä¸èƒ½ä¸º5 (code:5)</span>
  <span class="hljs-keyword">return</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å’ŒTRAEçš„è¿™ä¸€å¹´]]></title>    <link>https://juejin.cn/post/7598403436699582498</link>    <guid>https://juejin.cn/post/7598403436699582498</guid>    <pubDate>2026-01-24T02:38:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598403436699582498" data-draft-id="7598450302615715886" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å’ŒTRAEçš„è¿™ä¸€å¹´"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2026-01-24T02:38:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº±é›¾13"/> <meta itemprop="url" content="https://juejin.cn/user/3419926705742091"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å’ŒTRAEçš„è¿™ä¸€å¹´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3419926705742091/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº±é›¾13
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-24T02:38:45.000Z" title="Sat Jan 24 2026 02:38:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æˆ‘å’ŒTRAEçš„è¿™ä¸€å¹´</h2>
<p>ä¹Ÿæ˜¯å’ŒTraeèµ°è¿‡ä¸€å¹´äº†ï¼ä¹Ÿä½¿ç”¨äº†Traeåšå‡ºäº†å¤§å¤§å°å°çš„é¡¹ç›®ï¼Œä¹Ÿå­¦ä¼šäº†å¾ˆå¤šæŠ€æœ¯æ ˆï¼Œä¹Ÿä½¿ç”¨Traeå‚åŠ äº†ä¸€äº›æ¯”èµ›éƒ½è·å¾—ä¸é”™çš„ä½³ç»©äº†ï¼Œæ¥çœ‹çœ‹æˆ‘å’ŒTraeçš„2025å§</p>
<p><strong>ç›¸é‡</strong></p>
<p>ç›¸é‡å³åœ¨printf("MarsCode"),æˆ‘è¿˜è®°å¾—é‚£æ˜¯2024å¹´6æœˆä»½,æˆ‘åœ¨æ•™å®¤çœ‹è‰åªå‘å¸ƒä¼š,æˆ‘è¿˜è®°å¾—<strong>æµ·å»º</strong>å’Œ<strong>æ—­ä¸œ</strong>è€å¸ˆåœ¨è‰åªä¸Šæ¼”ç¤ºMarscodeçš„èƒ½åŠ›,é‚£ä¸ªæ—¶å€™å°±æ·±æ·±çš„çˆ±ä¸Šäº†è¿™ä¸ªæ’ä»¶,åœ¨æ—¥å¸¸çš„å­¦ä¹ è¿˜æœ‰ä¸€äº›é¡¹ç›®çš„ç”Ÿæˆéƒ½æ˜¯å¾ˆä¸é”™çš„!é‚£ä¸ªæ—¶å€™åªèƒ½ä½¿ç”¨ChatGPTè±†åŒ…è¿™ç±»çš„ç”Ÿæˆåä»£ç ç„¶åCV,å‡ºé”™å†æ¥ä¸€é,ç°åœ¨ä¸éœ€è¦äº†!çœŸçš„å¾ˆæƒŠè‰³~ç„¶åå°±åˆ°2025å¹´çš„å‡æœŸçš„æ—¶å€™è¿˜æœ‰è¶…å¤šç”±æœæ˜”æœˆè€å¸ˆçš„å…±å­¦è¯¾ç¨‹,åœ¨ç›´æ’­é—´å’Œå¥¹çš„å°åŠ©ç†ä¸€èµ·ä½¿ç”¨Marscodeç”Ÿæˆä¸€äº›ä»£ç ,é‚£ä¸ªæ—¶å€™å°±è®¤å®šäº†,è§‰å¾—è¿™ä¸ªç¤¾åŒºå¾ˆä¸é”™,èƒ½å­¦åˆ°å¥½å¤šå¼€å‘çš„æŠ€æœ¯!ä¹Ÿè·å¾—äº†å¾ˆå¤šå‘¨è¾¹!
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/575637b9768b4e289c330be82ce4b431~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qx6Zu-MTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769827125&amp;x-signature=TPu5S8scp%2FWQGPH7kdqwhyghY5w%3D" alt="img_v3_02tf_594afca5-d3aa-4606-a881-ff2367ee2d0g.jpg" loading="lazy"/></p>
<p><strong>Trae ç¤¾åŒºæ´»åŠ¨çœŸçš„å¥½å¤š!</strong></p>
<p>8æœˆä»½è¿›å…¥åˆ°äº†é£ä¹¦çš„ç¤¾ç¾¤,è¿™é‡Œæ´»åŠ¨æ›´åŠ ä¸°å¯Œäº†,ä¸”ç¤¾ç¾¤æ¯”ä¹‹å‰å¤§äº†å¥½å¤š!æœ‰å¥½å¤šå¤§ä½¬è¿›å…¥åˆ°è¿™ä¸ªç¾¤é‡Œ,åœ¨è¿™é‡ŒçœŸçš„å­¦åˆ°äº†ç‰¹åˆ«å¤š!
ä¹Ÿæ˜¯åœ¨è¿™ä¸ªæ—¶å€™,è§‰å¾—æ˜¯æˆ‘å­¦ç”Ÿæ—¶ä»£å†™çš„ä»£ç å’Œå¼€å‘é¡¹ç›®çš„å·…å³°äº†,åœ¨è¿™é‡Œå‚åŠ äº†å„ç§ç§ç±»çš„æ´»åŠ¨
ä¾‹å¦‚å‘è¡¨åˆ°Traeå…¬ä¼—å·çš„å€Ÿç”¨å¤§æ¨¡å‹çš„èƒ½åŠ›å»è¿›è¡Œè§„èŒƒäº‹åŠ¡çš„ä¸€ä¸ªé¡¹ç›®
<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F3W2wmNS8NpzReUn5ifSsMQ" target="_blank" title="https://mp.weixin.qq.com/s/3W2wmNS8NpzReUn5ifSsMQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/3W2wmNS8Nâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8409f118b20341248a6b100d624deb98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qx6Zu-MTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769827125&amp;x-signature=rnE2So5Q89o4p5MqcqHzCh6SFyw%3D" alt="img_v3_02tf_4ec1b381-bb29-4387-b0cb-9b6f9a14689g.jpg" loading="lazy"/>
<img src="" alt="" loading="lazy"/></p>
<p>å½“ç„¶è¿˜æœ‰åœ¨1024ç¨‹åºå‘˜èŠ‚çš„æ—¶å€™,æ¼”ç¤ºè¿‡çš„é¡¹ç›®ç­‰ç­‰ç­‰ç­‰è¶…å¤š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70c4d4f4ba384336b74988d6a84ca439~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qx6Zu-MTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769827125&amp;x-signature=MPvIyJ%2BhkFwsIvTLsYSvbCoU6fY%3D" alt="img_v3_02tf_f4ce8d62-bd58-4b9a-8c7c-13962f1ab33g.png" loading="lazy"/></p>
<p>å½“ç„¶å› ä¸ºæˆ‘è¿˜æ˜¯ä¸€ä¸ªå­¦ç”Ÿ,ä½¿ç”¨Traeå‚åŠ äº†ä¸€äº›äº’è”ç½‘å¼€å‘çš„æ¯”èµ›å‡è·å¾—äº†çœé‡Œä¸é”™çš„æˆç»©!</p>
<p><strong>Traeçš„çº¿ä¸‹æ´»åŠ¨!</strong></p>
<p>ä¸å¾—ä¸è¯´,æˆ‘çš„ç¬¬ä¸€æ¬¡çº¿ä¸‹å‚åŠ å…³äºç¼–ç¨‹ç±»çš„æ´»åŠ¨å°±æ˜¯Trae,çœŸçš„å‚åŠ ç¬¬ä¸€æ¬¡,å°±æƒ³å‚åŠ ç¬¬äºŒæ¬¡,å­¦åˆ°äº†å¾ˆå¤šæœ‰å¹²æ–™çš„å¼€å‘æŠ€å·§!</p>
<p>ç¬¬ä¸€æ¬¡å‚åŠ çš„Traeçš„æ´»åŠ¨!(lunaè«æ€ªæˆ‘æ‹çš„ä¸å¥½çœ‹)
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7aa63c6df9724399a9ffac8cf3bc4423~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qx6Zu-MTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769827125&amp;x-signature=qOFQa9WtFCrk7jLLWT2A2qKB8Ko%3D" alt="img_v3_02tf_c9ace577-1c7f-4c3e-a45d-a2189d0b3ceg.png" loading="lazy"/>
ç¬¬ä¸€æ¬¡å‚åŠ Hackathon,å°±è·å¾—äº†ä¸€ç­‰å¥–!ä¸”æˆ‘çš„åŒå­¦ä»¬ä¹Ÿéƒ½è·å–äº†ä½³ç»©!çœŸçš„å¾ˆä¸é”™çš„çº¿ä¸‹ä½“éªŒ!
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c196da2aa6104a93831761340497faf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qx6Zu-MTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769827125&amp;x-signature=sMuNUoHGQTgZoRkbfgZUK9KjLvE%3D" alt="img_v3_02tf_0add46fe-f608-4a5f-a12e-e968fc864b6g.jpg" loading="lazy"/>
<strong>Traeå‘¨è¾¹!</strong></p>
<p>å½“ç„¶è¿™ä¸€å¹´ä¹Ÿè·å¾—äº†è¶…å¤šçš„å‘¨è¾¹!(ä¸å®Œå…¨ç»Ÿè®¡)
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da676d6bb54d4a40978b2d58248bb05e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qx6Zu-MTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769827125&amp;x-signature=BrsX4s7vdvza83M0j6Uh9OyIvJQ%3D" alt="img_v3_02tf_fee564d7-7fa0-4a5c-93ae-06f3b743207g.jpg" loading="lazy"/></p>
<p><strong>ä½¿ç”¨ Trae å¼€æºè‡ªå·±çš„ skill</strong></p>
<p>æœ€ä½³ skill æ¦‚å¿µç‰¹åˆ«å¥½ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ Trae å»åšå‡ºè‡ªå·±çš„ä¸€å¥— skillæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwcn1msagbpwc.feishu.cn%2Fwiki%2FP7VPw22RfinnVHk2FeXcvtFfn7b%3Ffrom%3Dfrom_copylink" target="_blank" title="https://wcn1msagbpwc.feishu.cn/wiki/P7VPw22RfinnVHk2FeXcvtFfn7b?from=from_copylink" ref="nofollow noopener noreferrer">Trae Skills å¼€å‘æŠ€å·§</a>
è‡ªå·±æ£€ç´¢äº†ç°åœ¨æ¯”è¾ƒæµè¡Œçš„ anthropics/skillsã€vercel-labs/agent-skills åŠComposioHQ/awesome-claude-skills è¿™3 ä¸ªåº“çš„ç²¾åï¼Œè‡ªå·±æ•´åˆæ„å»ºå‡ºè¿™ä¸ªskills åº“
çœæµç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>ä¸€å¥è¯å¼€å‘ï¼Œå°±æœ‰ä¸“é—¨çš„ skill å»è‡ªåŠ¨åˆ†é…ä»»åŠ¡</p>
<pre><code class="hljs">æˆ‘æƒ³å¼€å‘ä¸€ä¸ª ç®€å•çš„ todolist é¡¹ç›®ï¼Œè¯·å¸¦æˆ‘èµ°ä¸€éå…¨æµç¨‹ã€‚
</code></pre>
<p>å°±ä¼šè‡ªåŠ¨çš„å»åˆ’åˆ†ä»»åŠ¡å‡ºæ¥ï¼Œé…åˆ Trae çš„ todolist å®ç°é«˜æ•ˆå¼€å‘
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5aeea57884fa46979bffba972d64688d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57qx6Zu-MTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769827125&amp;x-signature=9eJkN%2BUuHsVL9ZoqqajJwf0Kom0%3D" alt="img_v3_02u6_21f61828-5395-470a-92d4-a8720f61749g.jpg" loading="lazy"/></p>
<p><strong>æœ€å!</strong></p>
<p>é‚£æœ€åå‘¢,å¸Œæœ›Traeè¶Šæ¥è¶Šå¥½,åœ¨2026å®ç°æ›´å¤šè·¨æ—¶ä»£çš„ä¸€äº›åŠŸèƒ½,æƒŠè‰³çš„åŠŸèƒ½,è®© <strong>The Real AI Engineer</strong> æ›´åŠ ä¼Ÿå¤§!â€Œ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026ï¼šæ‹’ç» AI ç„¦è™‘ï¼Œæˆ‘æ‰‹å†™äº†ä¸€ä¸ª ReAct æ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7598947628468125742</link>    <guid>https://juejin.cn/post/7598947628468125742</guid>    <pubDate>2026-01-25T16:00:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598947628468125742" data-draft-id="7598881914204258354" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026ï¼šæ‹’ç» AI ç„¦è™‘ï¼Œæˆ‘æ‰‹å†™äº†ä¸€ä¸ª ReAct æ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="å‰ç«¯,Agent,AIGC"/> <meta itemprop="datePublished" content="2026-01-25T16:00:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¾°æ«"/> <meta itemprop="url" content="https://juejin.cn/user/2946346892407735"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026ï¼šæ‹’ç» AI ç„¦è™‘ï¼Œæˆ‘æ‰‹å†™äº†ä¸€ä¸ª ReAct æ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2946346892407735/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¾°æ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T16:00:43.000Z" title="Sun Jan 25 2026 16:00:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>2025å¹´å²ç§°â€œAgentâ€å…ƒå¹´ï¼Œè‡ªä» ChatGPT çš„çˆ†ç«ï¼Œè‡ªå·±ä¹Ÿä¸€ç›´ä½¿ç”¨çš„æ˜¯ Chat ç±»çš„ AIå·¥å…·ã€‚å…¶å®ƒç±»å‹çš„å·¥å…·åªæ˜¯æ¨ç‰¹ä¸Šçœ‹åˆ°ï¼Œä½†æ˜¯è‡ªå·±å¾ˆå°‘ä½¿ç”¨ã€‚æœ‰æ—¶åœ¨è‡ªå·±æ¨ç‰¹çš„ timlineä¸Šä¼šå‡ºç°å¾ˆå¤šçˆ†ç«çš„AIå·¥å…·ï¼Œåˆ·å¤šäº†ä¼šå¯¹äºè‡ªå·±äº§ç”Ÿä¸€äº›ç„¦è™‘ï¼Œä½†ä»…ä»…æ˜¯äº§ç”Ÿï¼ˆæ¯•ç«Ÿäººåœ¨è‡ªå·±çš„èˆ’é€‚åŒºï¼Œæ˜¯å¾ˆéš¾è‡ªå·±èµ°å‡ºæ¥çš„ï¼‰ã€‚åŠ ä¸Šæœ€è¿‘çš„æ‹›è˜å¸‚åœºå’Œå…¬å¸éƒ½å¾ˆæ³¨é‡ Agent è¿™å—ï¼Œæ‰€ä»¥å†³å®šèŠ±æ—¶é—´å¥½å¥½ç ”ç©¶ä¸‹ Agentã€‚ä¸ºæœªæ¥åšå‡†å¤‡ï¼ŒåŒæ—¶ä¹Ÿä¼šåŒ…è£…è‡ªå·±ã€‚</p>
<p>æ•´ä½“çš„å­¦ä¹ å¤§çº²ï¼Œç”¨æœ€è¿‘å¬åˆ°ä¸€å¥è¯æ¥è¯´â€œ<strong>ä½“ç³»å®Œæ•´å…ˆäºé€»è¾‘è‡ªæ´½å’Œè§‚ç‚¹æ­£è¯¯</strong>â€ï¼Œå…ˆå­¦ä¹ æ•´ä½“çš„ Agent çš„æ•´ä½“æ¡†æ¶å†æ…¢æ…¢ç ”ç©¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae9e11edd0e94dc6ab9e9c5bc22d3e1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L6w5p6r:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769961643&amp;x-signature=Qm9qAEnllqVh%2Bvmxa3tsltT10k0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯AI Agent</h2>
<blockquote>
<p><em>â€œAI agents are software systems that use AI to pursue goals and complete tasks on behalf of users. They show reasoning, planning, and memory and have a level of autonomy to make decisions, learn, and adapt.â€</em> <em>â€” Google Cloud</em></p>
<p>AI æ™ºèƒ½ä½“æ˜¯ä½¿ç”¨ AIæ¥å®ç°ç›®æ ‡å’Œä»£è¡¨ç”¨æˆ·å®Œæˆä»»åŠ¡çš„è½¯ä»¶ç³»ç»Ÿï¼Œå…¶è¡¨ç°ä¸­æ¨ç†ã€è§„åˆ’å’Œè®°å¿†èƒ½åŠ›ã€‚å¹¶ä¸”æœ‰ä¸€å®šçš„è‡ªä¸»æ€§ï¼Œèƒ½å¤Ÿè‡ªä¸»å­¦ä¹ ã€é€‚åº”å’Œåšå‡ºå†³å®š</p>
</blockquote>
<p>è¿™é‡Œå¼•ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fbaoyu.io%2Fblog%2Fai-agent-frontend-rebirth-from-failure" target="_blank" title="https://baoyu.io/blog/ai-agent-frontend-rebirth-from-failure" ref="nofollow noopener noreferrer">å®ç‹è€å¸ˆ</a>å¯¹äº AI Agent çš„å®šä¹‰ï¼š</p>
<p>AI Agent æ˜¯ä¸ºäº†å®ç°ä¸€ä¸ªç›®æ ‡ï¼Œå¾ªç¯è°ƒç”¨å·¥å…·çš„å¤§è¯­è¨€æ¨¡å‹ã€‚</p>
<ul>
<li>å·¥å…·å¾ªç¯ï¼ˆToolsï¼‰ï¼šæ¨¡å‹è°ƒç”¨å·¥å…· -&gt; è·å–ç»“æœ -&gt; ç»§ç»­æ¨ç†</li>
<li>æœ‰æ˜ç¡®ç»ˆç‚¹ï¼šä¸ºè¾¾æˆç›®æ ‡ï¼Œè€Œä¸æ˜¯æ— é™è°ƒç”¨</li>
<li>ç›®æ ‡æ¥æºçµæ´»ï¼šå¯ä»¥æ¥è‡ªç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥æ¥è‡ªå¦ä¸€ä¸ª LLM</li>
<li>åŸºç¡€è®°å¿†èƒ½åŠ›ï¼šé€šè¿‡å¯¹è¯å†å²ä¿å­˜ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68f21815462a4cd6b623d30cca302c1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L6w5p6r:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769961643&amp;x-signature=fVJpQmQSLJJ64JEmpAeWo%2FdQaB4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">AI Agent ï¼ˆAI æ™ºèƒ½ä½“ï¼‰ç»å…¸èŒƒå¼</h2>
<h3 data-id="heading-3">ReActèŒƒå¼</h3>
<p>åœ¨ ReAct èŒƒå¼å‡ºç°ä¹‹å‰ï¼Œä¸»æµçš„æ–¹æ³•å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li>â€œçº¯æ€è€ƒâ€ï¼šå¦‚<strong>æ€ç»´é“¾ï¼ˆChain-of-Thoughtï¼‰</strong> ,å¼•å¯¼æ¨¡å‹è¿›è¡Œå¤æ‚çš„é€»è¾‘æ¨ç†ï¼Œä½†æ— æ³•ä¸å¤–ç•Œè¿›è¡Œäº¤äº’ï¼Œå®¹æ˜“ç”Ÿæˆå¹»è§‰</li>
<li>â€œçº¯è¡ŒåŠ¨â€ï¼šæ¨¡å‹ç›´æ¥è¾“å‡ºæ‰§è¡Œçš„åŠ¨ä½œï¼Œç¼ºä¹è§„åˆ’å’Œçº é”™èƒ½åŠ›</li>
</ul>
<h4 data-id="heading-4"><strong>ä»€ä¹ˆæ˜¯ ReAct èŒƒå¼</strong></h4>
<p>ä»å­—é¢ä¸Šçœ‹ReAct å•è¯è¯»å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2F" target="_blank" title="https://react.dev/" ref="nofollow noopener noreferrer">å‰ç«¯æ¡†æ¶ React</a>ä¸€æ ·å‘éŸ³ï¼Œåªæ˜¯æŠŠ Aè¿›è¡Œäº†å¤§å†™ï¼Œä½†æ˜¯æ˜¯å®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2210.03629" target="_blank" title="https://arxiv.org/abs/2210.03629" ref="nofollow noopener noreferrer">ReAct (Reason å’Œ Act)</a>æœ€æ—©æ˜¯ç”±<a href="https://link.juejin.cn?target=https%3A%2F%2Fysymyth.github.io%2F" target="_blank" title="https://ysymyth.github.io/" ref="nofollow noopener noreferrer">å§šé¡ºé›¨</a>äº 2022 å¹´æå‡ºï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯æ¨¡ä»¿äººç±»è§£å†³é—®é¢˜çš„æ–¹å¼ï¼Œå°†<strong>æ€è€ƒ(Reasoning)ä¸è¡ŒåŠ¨(Acting)ç»“åˆ</strong>èµ·æ¥ã€‚å½¢æˆä¸€ä¸ªâ€œæ€è€ƒ -&gt; è¡ŒåŠ¨-&gt;è§‚å¯Ÿâ€çš„å¾ªç¯ã€‚ReAct çš„ç²¾å¦™ä¹‹å¤„åœ¨äºï¼Œå®ƒè®¤è¯†åˆ°<strong>æ€è€ƒä¸è¡ŒåŠ¨æ˜¯ç›¸è¾…ç›¸æˆçš„</strong>ï¼Œæ€è€ƒæŒ‡å¯¼è¡ŒåŠ¨ï¼Œè€Œè¡ŒåŠ¨çš„ç»“æœåˆä¼šåè¿‡æ¥ä¸ºæ€è€ƒæä¾›ä¾æ®ã€‚åœ¨æ‰§è¡Œä¸Šçš„æ˜¯é€šè¿‡ä¸€ç§ç‰¹æ®Šçš„Prompt æ¥å¼•å¯¼ LLMï¼Œä½¿å…¶æ¯ä¸€æ­¥éƒ½éµå¾ªä¸€ä¸ªå›ºå®šçš„è½¨è¿¹ã€‚</p>
<ol>
<li><strong>Thought (æ€è€ƒ)</strong> ï¼šåœ¨æ‰§è¡Œä»»åŠ¡å‰ï¼Œå…ˆè¿›è¡Œåˆ†æå½“å‰ä»»åŠ¡æƒ…å†µã€åˆ†æä»»åŠ¡ã€è§„åˆ’ä¸‹ä¸€æ­¥ï¼Œæˆ–è€…åæ€ä¸Šä¸€æ­¥çš„ç»“æœ</li>
<li><strong>Action (è¡ŒåŠ¨)</strong> ï¼šæ ¹æ®ä¸Šä¸€æ­¥çš„æ€è€ƒç»“æœå†³å®šé‡‡ç”¨çš„å…·ä½“è¡ŒåŠ¨ï¼Œé€šå¸¸ä¼šè°ƒç”¨å¤–éƒ¨çš„ Tools</li>
<li><strong>Observation (è§‚å¯Ÿ)</strong> ï¼šè¿™æ˜¯æ‰§è¡Œ Action åä» Tools è¿”å›çš„ç»“æœ</li>
</ol>
<p>åœ¨è¿™ä¸ªèŒƒå¼ä¸­ï¼ŒAgentä¼šä¸æ–­çš„ Loopè¿™ä¸ªæµç¨‹ï¼Œå°†æ–°çš„è§‚å¯Ÿç»“æœè¿½åŠ åˆ°å†å²çš„è®°å½•ä¸­ï¼Œå½¢æˆä¸€ä¸ªä¸æ–­å¢é•¿çš„ä¸Šä¸‹æ–‡ï¼Œç›´åˆ° Thought ä¸­åˆ¤æ–­å·²ç»æ‰¾åˆ°æ­£ç¡®çš„ç­”æ¡ˆï¼Œç„¶åè¾“å‡ºç»“æœã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­<strong>æ€è€ƒä½¿ä»»åŠ¡æ›´å…·æœ‰ç›®æ ‡æ€§ï¼Œè€Œè¡ŒåŠ¨åˆä¸ºä¸‹ä¸€æ¬¡çš„æ€è€ƒæä¾›äº†äº‹å®ä¾æ®</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0add9da7a86342159d070efcb9e45ead~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L6w5p6r:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769961643&amp;x-signature=FSZZisLXpeIhHHWRQYSa5f%2FwaaM%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">ReActé€‚ç”¨åœºæ™¯</h4>
<ul>
<li><strong>éœ€è¦å¤–éƒ¨çŸ¥è¯†çš„ä»»åŠ¡</strong>ï¼šæŸ¥è¯¢å®æ—¶ä¿¡æ¯</li>
<li><strong>éœ€è¦ç²¾ç¡®è®¡ç®—çš„ä»»åŠ¡</strong>ï¼šæ•°æ®è®¡ç®—é—®é¢˜</li>
<li><strong>éœ€è¦ä¸ APIäº¤äº’çš„ä»»åŠ¡</strong>ï¼šå¦‚æ“ä½œæ•°æ®åº“ã€è°ƒç”¨æŸä¸ª API å®Œæˆä»»åŠ¡</li>
</ul>
<h4 data-id="heading-6">ä»€ä¹ˆæ˜¯å·¥å…·ï¼ˆToolsï¼‰</h4>
<p>ä¸Šé¢ä»‹ç»äº† ReAct æ•´ä½“çš„èŒƒå¼ï¼Œæåˆ°äº†ä¸€ä¸ªæ¦‚å¿µ Toolsï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯ Tools å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ LLMæ˜¯ä¸€ä¸ªç”¨å›ºå®šæ•°æ®è®­ç»ƒå‡ºæ¥çš„æ¨¡å‹ï¼Œæœ‰è‡ªä¸»æ€è€ƒçš„èƒ½åŠ›ç›¸å½“äºå¤§è„‘ï¼Œä½†æ˜¯åªæœ‰å¤§è„‘è¿˜ä¸å¤Ÿè¿˜è¦æœ‰â€œæ‰‹å’Œè„šâ€ä¸çœŸå®çš„å¤–éƒ¨ä¸–ç•Œäº¤äº’ã€‚è¿™äº›æ‰‹å’Œè„šå°±æ˜¯ Tools</p>
<h4 data-id="heading-7">ReActæ™ºèƒ½ä½“å®æˆ˜</h4>
<p>äº†è§£å®Œäº† ReAct æ•´ä½“çš„æ¦‚å¿µï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„éœ€æ±‚æ¥å®é™…ä½“éªŒä¸‹ã€‚</p>
<p>éœ€æ±‚ï¼š<strong>ä½ éœ€è¦ç¼–å†™ä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œç”¨äº<strong><strong>åˆ†æ</strong></strong>ç”¨æˆ·çš„éœ€æ±‚ï¼Œå›ç­”ç”¨æˆ·çš„é—®é¢˜</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼šå°ç±³æ‰‹æœºçš„æœ€æ–°æ‰‹æœºæ˜¯å“ªä¸€æ¬¾ï¼Ÿ</p>
<h5 data-id="heading-8">éœ€æ±‚åˆ†æ</h5>
<p>æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€ä¸ºAgent æä¾›ä¸€ä¸ªç½‘é¡µæœç´¢çš„å·¥å…·ã€‚è®© LLM è°ƒç”¨å»å®æ—¶æœç´¢ä¿¡æ¯ï¼Œç„¶ååŸºäºæœç´¢çš„ç»“æœè®© LLMå†åˆ¤æ–­æ˜¯ä¸æ˜¯æ­£ç¡®çš„ç»“æœã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66812aaa54fe48c794a708c8d4050060~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L6w5p6r:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769961643&amp;x-signature=HkoVvEGls1VThbMzBfyCxMQzwdE%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-9">ç¼–ç å®ç°</h5>
<h6 data-id="heading-10">ç³»ç»Ÿæç¤ºè¯ï¼ˆPromptï¼‰</h6>
<p>åŸºäº ReAct æ•´ä½“çš„æœºåˆ¶ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªæç¤ºè¯ã€‚ä¸»è¦åŒ…å«ä»¥ä¸‹ç‚¹ï¼š</p>
<ol>
<li>å®šä¹‰LLM çš„è§’è‰²æˆ–ä½¿ç”¨åœºæ™¯</li>
<li>å®šä¹‰ LLMå¯ä½¿ç”¨çš„å·¥å…·</li>
<li>å®šä¹‰ LLMå“åº”çš„æ ¼å¼ï¼Œä»è€Œæ–¹ä¾¿çš„è®©ç¨‹åºå¤„ç†</li>
<li>å®šä¹‰ç”¨æˆ·çš„é—®é¢˜å’Œæ•´ä¸ªæ€è€ƒçš„è¿‡ç¨‹å³åŠ¨æ€ä¸Šä¸‹æ–‡</li>
</ol>
<p>æ ¹æ®ä»¥ä¸Šå‡ ç‚¹ï¼Œæˆ‘ä»¬è®¾è®¡çš„ç³»ç»Ÿæç¤ºè¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">REACT_PROMPT_TEMPLATE</span> = <span class="hljs-string">`
è¯·æ³¨æ„ï¼Œ ä½ æ˜¯ä¸€ä¸ªæœ‰èƒ½åŠ›è°ƒç”¨å¤–éƒ¨å·¥å…·çš„æ™ºèƒ½åŠ©æ‰‹

å¯ç”¨å·¥å…·å¦‚ä¸‹ï¼š
{tools}

è¯·ä¸¥æ ¼æŒ‰ä»¥ä¸‹æ ¼å¼å›åº”ï¼š

Thought: ä½ çš„æ€è€ƒè¿‡ç¨‹ï¼Œç”¨äºåˆ†æé—®é¢˜ã€æ‹†è§£ä»»åŠ¡å’Œè§„åˆ’ä¸‹ä¸€æ­¥è¡ŒåŠ¨
Action: ä½ é‡‡å–çš„è¡ŒåŠ¨å¿…é¡»æ˜¯ä»¥ä¸‹æ ¼å¼ä¹‹ä¸€ï¼š
- `</span>{{tool_name}}[{{tool_input}}]<span class="hljs-string">`:è°ƒç”¨ä¸€ä¸ªå¯ç”¨å·¥å…·
- `</span><span class="hljs-title class_">Finish</span>[æœ€ç»ˆç­”æ¡ˆ]<span class="hljs-string">`: å½“ä½ è®¤ä¸ºå·²ç»è·å–æœ€ç»ˆç­”æ¡ˆæ—¶

ç°åœ¨è¯·å¼€å§‹è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š
Question: {question}
History: {history}
`</span>;
</code></pre>
<h6 data-id="heading-11"><strong>å·¥å…·ï¼ˆToolsï¼‰</strong></h6>
<p>æŒ‰æç¤ºè¯çš„è®¾è®¡ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆç¼–å†™ç»™LLMè°ƒç”¨çš„å·¥å…·å‡½æ•°ï¼Œé€‰ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fserpapi%2Fserpapi-javascript" target="_blank" title="https://github.com/serpapi/serpapi-javascript" ref="nofollow noopener noreferrer"> SerpApi</a>ï¼Œæ ¹æ®å®˜æ–¹æä¾›çš„ SDK å°è£…ä¸€ä¸ªå‡½æ•°ï¼ˆä½¿ç”¨å‰éœ€è¦å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fserpapi.com%2F" target="_blank" title="https://serpapi.com/" ref="nofollow noopener noreferrer">å®˜ç½‘</a>æ³¨å†Œä¸€ä¸ªè´¦å·è·å–å…è´¹çš„é¢åº¦ï¼‰ã€‚</p>
<blockquote>
<p>SearchApi æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®æ—¶SERP APIï¼Œå¯æä¾›æ¥è‡ªGoogle æœç´¢ã€Google æ‹›è˜ã€YouTubeã€Google æ–°é—»ç­‰æœç´¢å¼•æ“é›†åˆçš„ç»“æ„åŒ–æ•°æ®</p>
</blockquote>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">import</span> { getJson } <span class="hljs-keyword">from</span> <span class="hljs-string">'serpapi'</span>;
<span class="hljs-keyword">import</span> { requireEnv } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;

<span class="hljs-comment">/**
 * åŸºäº SerApiå®ç°çš„ç½‘é¡µæœç´¢å·¥å…·
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">query</span>
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">query: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> apiKey = requireEnv(<span class="hljs-string">'SERPAPI_API_KEY'</span>);
    <span class="hljs-keyword">if</span> (!apiKey) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'é”™è¯¯ï¼šSERPAPI_API_KEYæ²¡æœ‰å®šä¹‰åœ¨.env æ–‡ä»¶ä¸­'</span>;
    }
    
    <span class="hljs-keyword">const</span> params = {
      <span class="hljs-attr">engine</span>: <span class="hljs-string">'google'</span>,
      <span class="hljs-attr">q</span>: query,
      <span class="hljs-attr">api_key</span>: apiKey,
      <span class="hljs-attr">gl</span>: <span class="hljs-string">'cn'</span>,
      <span class="hljs-attr">hl</span>: <span class="hljs-string">'zh-cn'</span>,
    };

    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getJson</span>(params);

    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(results.<span class="hljs-property">answer_box_list</span>)) {
      <span class="hljs-keyword">return</span> results.<span class="hljs-property">answer_box_list</span>.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);
    }

    <span class="hljs-keyword">if</span> (results.<span class="hljs-property">answer_box</span> &amp;&amp; results.<span class="hljs-property">answer_box</span>.<span class="hljs-property">answer</span>) {
      <span class="hljs-keyword">return</span> results.<span class="hljs-property">answer_box</span>.<span class="hljs-property">answer</span>;
    }

    <span class="hljs-keyword">if</span> (
      results.<span class="hljs-property">knowledge_graph</span> &amp;&amp;
      results.<span class="hljs-property">knowledge_graph</span>.<span class="hljs-property">description</span>
    ) {
      <span class="hljs-keyword">return</span> results.<span class="hljs-property">knowledge_graph</span>.<span class="hljs-property">description</span>;
    }

    <span class="hljs-keyword">if</span> (
      <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(results.<span class="hljs-property">organic_results</span>) &amp;&amp;
      results.<span class="hljs-property">organic_results</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>
    ) {
      <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ç›´æ¥ç­”æ¡ˆï¼Œåˆ™è¿”å›å‰ä¸‰ä¸ªæœ‰æœºç»“æœçš„æ‘˜è¦</span>
      <span class="hljs-keyword">const</span> snippets = results.<span class="hljs-property">organic_results</span>
        .<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>)
        .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">any</span>, i: <span class="hljs-built_in">number</span></span>) =&gt;</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-string">`[<span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>] <span class="hljs-subst">${res.title || <span class="hljs-string">''</span>}</span>\n<span class="hljs-subst">${res.snippet || <span class="hljs-string">''</span>}</span>`</span>;
        });
      <span class="hljs-keyword">return</span> snippets.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n\n'</span>);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">`å¯¹ä¸èµ·ï¼Œæ²¡æœ‰æ‰¾åˆ°å…³äº '<span class="hljs-subst">${query}</span>' çš„ä¿¡æ¯ã€‚`</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">${error}</span>`</span>;
  }
}
</code></pre>
<p>ä¸ºäº†åç»­æˆ‘ä»¬æ–¹ä¾¿çš„æ·»åŠ æ–°çš„ Tools æˆ‘ä»¬éœ€è¦æ„é€ ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ„é€ å™¨</p>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Tools</span> = {
  <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">func</span>: <span class="hljs-title class_">Function</span>;
};

<span class="hljs-comment">/**
 * å·¥å…·æ‰§è¡Œå™¨ï¼Œè´Ÿè´£ç®¡ç†å’Œæ‰§è¡Œå·¥å…·
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolsExecutor</span> {
  <span class="hljs-attr">tools</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Tools</span>&gt;;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span> = {};
  }

  <span class="hljs-title function_">registerTool</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, desc: <span class="hljs-built_in">string</span>, func: <span class="hljs-built_in">Function</span></span>) {
    <span class="hljs-keyword">if</span> (name <span class="hljs-keyword">in</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'åŒåå·¥å…·å·²å­˜åœ¨ï¼Œå°†è¿›è¡Œè¦†ç›–'</span>);
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>[name] = { <span class="hljs-attr">description</span>: desc, <span class="hljs-attr">func</span>: func };
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`å·¥å…· <span class="hljs-subst">${name}</span> å·²æ³¨å†Œ \n`</span>);
  }

  <span class="hljs-title function_">getTool</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {    
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>).<span class="hljs-title function_">includes</span>(name)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>[name]?.<span class="hljs-property">func</span>;
    }
  }

  <span class="hljs-title function_">getAvailableTools</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> allTools = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [name, info] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>)) {
      allTools.<span class="hljs-title function_">push</span>(<span class="hljs-string">`- <span class="hljs-subst">${name}</span>: <span class="hljs-subst">${info?.description}</span>`</span>);
    }

    <span class="hljs-keyword">return</span> allTools.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);
  }
}
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æµ‹è¯•è¿™äº›å‡½æ•°</p>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">import</span> { search } <span class="hljs-keyword">from</span> <span class="hljs-string">"./tools"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">'dotenv'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  dotenv.<span class="hljs-title function_">config</span>();
  <span class="hljs-keyword">const</span> executor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolsExecutor</span>();
  executor.<span class="hljs-title function_">registerTool</span>(
    <span class="hljs-string">'Search'</span>,
    <span class="hljs-string">'åŸºäº SerApiå®ç°çš„ç½‘é¡µæœç´¢å·¥å…·'</span>,
    search
  );

  <span class="hljs-keyword">const</span> toolFunc = executor.<span class="hljs-title function_">getTool</span>(<span class="hljs-string">'Search'</span>);

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯ç”¨å·¥å…·åˆ—è¡¨:'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(executor.<span class="hljs-title function_">getAvailableTools</span>());

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`\n æ‰§è¡Œ Search å·¥å…·:`</span>);
  <span class="hljs-keyword">if</span> (toolFunc) {
    <span class="hljs-title function_">toolFunc</span>(<span class="hljs-string">'äººå·¥æ™ºèƒ½çš„æœªæ¥æ˜¯ä»€ä¹ˆï¼Ÿ'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœç´¢ç»“æœ:'</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);
    });
  }
}
<span class="hljs-title function_">main</span>();

&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š
å·¥å…· <span class="hljs-title class_">Search</span> å·²æ³¨å†Œ 

å¯ç”¨å·¥å…·åˆ—è¡¨:
- <span class="hljs-title class_">Search</span>: åŸºäº <span class="hljs-title class_">SerApi</span>å®ç°çš„ç½‘é¡µæœç´¢å·¥å…·

 æ‰§è¡Œ <span class="hljs-title class_">Search</span> å·¥å…·:
æœç´¢ç»“æœ:
[<span class="hljs-number">1</span>] äººå·¥æ™ºèƒ½çš„æœªæ¥
<span class="hljs-variable constant_">AI</span> æœªæ¥çš„å®šä¹‰å°†æ˜¯è½¬å‘ç”¨äºå®éªŒçš„å¼€æºå¤§è§„æ¨¡æ¨¡å‹ï¼Œä»¥åŠå¼€å‘æ›´å°ã€æ›´é«˜æ•ˆçš„<span class="hljs-variable constant_">AI</span> æ¨¡å‹ï¼Œä»¥æé«˜æ˜“ç”¨æ€§å¹¶é™ä½æˆæœ¬ã€‚

[<span class="hljs-number">2</span>] <span class="hljs-number">2025</span>,äººå·¥æ™ºèƒ½èµ°å‘ä½•æ–¹ï¼Ÿæˆ‘ä»¬å¦‚ä½•æ‹¥æŠ±å˜åŒ–ï¼Ÿ
â€œå½“å‰ï¼Œæ–°ä¸€ä»£äººå·¥æ™ºèƒ½ç­‰æ•°å­—æŠ€æœ¯æ­£åœ¨çˆ†å‘å¼å‘å±•ï¼Œå°†è¿›ä¸€æ­¥æ¨åŠ¨åˆ¶é€ ä¸šçš„æ•ˆç‡å˜é©ï¼Œæœªæ¥æœ‰æœ›å¸¦åŠ¨å·¥å‚çš„ç ”å‘ã€ç”Ÿäº§ã€ç»„ç»‡å’ŒæœåŠ¡å…¨æ–¹é¢çš„é©æ–°ã€‚â€ä¸­å›½ä¿¡æ¯é€šä¿¡ç ” ...

[<span class="hljs-number">3</span>] ä¸­å›½äººå·¥æ™ºèƒ½çš„æœªæ¥ä¹‹è·¯
åœ¨äººå£è€é¾„åŒ–çš„å¤§èƒŒæ™¯ä¸‹ï¼Œäººå·¥æ™ºèƒ½å¯¹æ¨åŠ¨ä¸­å›½æœªæ¥çš„ç»æµå¢é•¿å°†èµ·åˆ°è‡³å…³é‡è¦çš„ä½œç”¨ã€‚ä¸­å›½çš„åŠ³åŠ¨å¹´é¾„äººå£æœ€æ—©å°†åœ¨<span class="hljs-number">2024</span>å¹´è¾¾åˆ°å³°å€¼ï¼Œå¹¶åœ¨ä¹‹åçš„<span class="hljs-number">50</span>å¹´ä¸­å‡å°‘äº”åˆ†ä¹‹ä¸€ã€‚éº¦è‚¯é”¡å…¨çƒ ...
</code></pre>
<h6 data-id="heading-12">å®ç°Agent</h6>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å¯¹æ¥å¤§æ¨¡å‹å‚å•†æä¾›çš„æœåŠ¡ï¼ŒOpenAIçš„æ¥å£è§„èŒƒï¼Œå·²ç»æˆä¸º LLM è¡Œä¸šçš„æ¥å£æ ‡å‡†ã€‚å›½å†…çš„å‚å•†åŸºæœ¬éƒ½å…¼å®¹äº†æ­¤æ ‡å‡†</p>
<p>å…è´¹çš„å‚å•†æœåŠ¡ï¼Ÿç°åœ¨åŸºæœ¬å›½å†…çš„å¤§æ¨¡å‹å‚å•†åœ¨æ³¨å†Œè´¦å·ä¹‹ååŸºæœ¬éƒ½ä¼šæä¾›ä¸€å®šçš„å…è´¹é¢åº¦ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„ç«å±±å¼•æ“ä¸‹çš„ç«å±±æ–¹èˆŸçš„æœåŠ¡ã€‚</p>
<p>å…ˆå®‰è£…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenai%2Fopenai-node" target="_blank" title="https://github.com/openai/openai-node" ref="nofollow noopener noreferrer">open ai sdk</a> <code>npm install openai</code>ï¼Œç„¶åæˆ‘ä»¬åŸºäºè¿™ä¸ª SDK å°è£…ä¸€ä¸ªé€šç”¨çš„llm å¯¹æ¥ç±»ï¼Œæ–¹ä¾¿åç»­å¤ç”¨</p>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">import</span> <span class="hljs-title class_">OpenAI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'openai'</span>;
<span class="hljs-keyword">import</span> { requireEnv } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">ChatCompletionMessageParam</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'openai/resources'</span>;

<span class="hljs-comment">/**
 *  Hello Agents å®šåˆ¶çš„ LLM å®¢æˆ·ç«¯
 *  å®ƒç”¨äºè°ƒç”¨ä»»ä½•å…¼å®¹ OpenAI æ¥å£çš„æœåŠ¡ï¼Œå¹¶é»˜è®¤ä½¿ç”¨æµå¼å“åº”
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloAgentsLLM</span> {
  <span class="hljs-attr">model</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">apiKey</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">baseUrl</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">timeout</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">client</span>: <span class="hljs-title class_">OpenAI</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    model?: <span class="hljs-built_in">string</span>,
    apiKey?: <span class="hljs-built_in">string</span>,
    baseUrl?: <span class="hljs-built_in">string</span>,
    timeout: <span class="hljs-built_in">number</span> = <span class="hljs-number">60</span>,
  </span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model || requireEnv(<span class="hljs-string">'LLM_MODEL_ID'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">apiKey</span> = apiKey || requireEnv(<span class="hljs-string">'LLM_API_KEY'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> = baseUrl || requireEnv(<span class="hljs-string">'LLM_BASE_URL'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeout</span> = requireEnv(<span class="hljs-string">'LLM_TIMEOUT'</span>)
      ? <span class="hljs-title class_">Number</span>(requireEnv(<span class="hljs-string">'LLM_TIMEOUT'</span>))
      : timeout;

    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> || !<span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> || !<span class="hljs-variable language_">this</span>.<span class="hljs-property">apiKey</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
        <span class="hljs-string">'æ¨¡å‹ IDã€API å¯†é’¥å’ŒæœåŠ¡åœ°å€å¿…é¡»è¢«æä¾›æˆ–åœ¨.env æ–‡ä»¶ä¸­å®šä¹‰'</span>,
      );
    }

    <span class="hljs-comment">// console.log(this.baseUrl)</span>

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({
      <span class="hljs-attr">baseURL</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span>,    
      <span class="hljs-attr">apiKey</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">apiKey</span>,
      <span class="hljs-comment">// timeout: this.timeout Error: Request timed out.</span>
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">think</span>(<span class="hljs-params">messages: <span class="hljs-built_in">Array</span>&lt;ChatCompletionMessageParam&gt;, temperature = <span class="hljs-number">0</span></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹è°ƒç”¨å¤§æ¨¡å‹'</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
        <span class="hljs-attr">model</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>,
        <span class="hljs-attr">messages</span>: messages,
        <span class="hljs-attr">temperature</span>: temperature,
        <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>,
      });

      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è°ƒç”¨å¤§æ¨¡å‹æˆåŠŸ \n'</span>);

      <span class="hljs-keyword">const</span> collectedContent = [];
      <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> response) {
        <span class="hljs-comment">// å¤„ç†æ¯ä¸ª chunk        </span>
        <span class="hljs-keyword">const</span> c = chunk.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">delta</span>.<span class="hljs-property">content</span> || <span class="hljs-string">""</span>;
        collectedContent.<span class="hljs-title function_">push</span>(c);
      }
      <span class="hljs-keyword">return</span> collectedContent.<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>)
    } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`è°ƒç”¨ LLM APIæ—¶å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">${e}</span>`</span>)
        <span class="hljs-keyword">return</span>
    }
  }
}
</code></pre>
<p>æ¥ä¸‹ï¼Œæˆ‘ä»¬æŒ‰ ReAct èŒƒå¼çš„è§„èŒƒï¼Œå®ç° ReActAgentã€‚</p>
<ol>
<li>åœ¨æ•´ä¸ª Agentä¸­æˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ï¼šllmå®¢æˆ·ç«¯ã€å¯è°ƒç”¨çš„å·¥å…·ã€æ•´ä¸ªäº¤äº’çš„å†å²ä¿¡æ¯</li>
</ol>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReActAgent</span> {
  <span class="hljs-attr">llmClient</span>: <span class="hljs-title class_">HelloAgentsLLM</span>;
  <span class="hljs-attr">toolsExecutor</span>: <span class="hljs-title class_">ToolsExecutor</span>;
  <span class="hljs-attr">maxStep</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">history</span>: <span class="hljs-built_in">string</span>[];

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    llmClient: HelloAgentsLLM,
    toolsExecutor: ToolsExecutor,
    maxStep = <span class="hljs-number">5</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">llmClient</span> = llmClient;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">toolsExecutor</span> = toolsExecutor;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxStep</span> = maxStep;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = [];
      }
  }
</code></pre>
<ol start="2">
<li>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°æ ¸å¿ƒçš„ run æ–¹æ³•ï¼š</li>
</ol>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">async</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">question: <span class="hljs-built_in">string</span></span>) {
   <span class="hljs-comment">// 1. é‡ç½®æ•´ä½“æµç¨‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = [];
    <span class="hljs-keyword">let</span> currentStep = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// 2. å¾ªç¯è°ƒç”¨LLM</span>
    <span class="hljs-keyword">while</span> (currentStep &lt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxStep</span>) {
      currentStep += <span class="hljs-number">1</span>;

      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`--- æ‰§è¡Œç¬¬ <span class="hljs-subst">${currentStep}</span> æ­¥ ---`</span>);

      <span class="hljs-comment">// 2.1 æ ¹æ®æç¤ºè¯çš„æ¨¡ç‰ˆï¼Œä¼ å…¥å‚æ•°ã€‚è·å–å®Œæ•´ç‰ˆæœ¬æç¤ºè¯ </span>
      <span class="hljs-keyword">const</span> toolsDesc = <span class="hljs-variable language_">this</span>.<span class="hljs-property">toolsExecutor</span>.<span class="hljs-title function_">getAvailableTools</span>();
      <span class="hljs-comment">// å†å²ä¸Šä¸‹æ–‡æ‹¼æ¥</span>
      <span class="hljs-keyword">let</span> historyStr = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);

      <span class="hljs-keyword">const</span> prompt = <span class="hljs-title function_">formatPrompt</span>(<span class="hljs-variable constant_">REACT_PROMPT_TEMPLATE</span>, {
        <span class="hljs-attr">tools</span>: toolsDesc,
        <span class="hljs-attr">question</span>: question,
        <span class="hljs-attr">history</span>: historyStr,
      });

      <span class="hljs-keyword">let</span> <span class="hljs-attr">messages</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">ChatCompletionMessageParam</span>&gt; = [
        {
          <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>,
          <span class="hljs-attr">content</span>: prompt,
        },
      ];
        
      <span class="hljs-comment">// 2.2 è¯·æ±‚ LLM,è·å–å“åº”</span>
      <span class="hljs-keyword">const</span> responseTxt = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">llmClient</span>.<span class="hljs-title function_">think</span>(messages);

      <span class="hljs-keyword">if</span> (!responseTxt) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`é”™è¯¯ï¼šå¤§æ¨¡å‹è¿”å›å¼‚å¸¸`</span>);
        <span class="hljs-keyword">break</span>;
      }
 }
</code></pre>
<p>ä¹‹å‰æˆ‘ä»¬è¦æ±‚ LLM åœ¨è¿”å›æ—¶å¿…é¡»å¸¦æœ‰ä»¥ä¸‹æ ¼å¼ï¼š</p>
<pre><code class="hljs language-TS" lang="TS">è¯·ä¸¥æ ¼æŒ‰ä»¥ä¸‹æ ¼å¼å›åº”ï¼š

<span class="hljs-title class_">Thought</span>: ä½ çš„æ€è€ƒè¿‡ç¨‹ï¼Œç”¨äºåˆ†æé—®é¢˜ã€æ‹†è§£ä»»åŠ¡å’Œè§„åˆ’ä¸‹ä¸€æ­¥è¡ŒåŠ¨
<span class="hljs-title class_">Action</span>: ä½ é‡‡å–çš„è¡ŒåŠ¨å¿…é¡»æ˜¯ä»¥ä¸‹æ ¼å¼ä¹‹ä¸€ï¼š
- <span class="hljs-string">`{{tool_name}}[{{tool_input}}]`</span>:è°ƒç”¨ä¸€ä¸ªå¯ç”¨å·¥å…·
- <span class="hljs-string">`Finish[æœ€ç»ˆç­”æ¡ˆ]`</span>: å½“ä½ è®¤ä¸ºå·²ç»è·å–æœ€ç»ˆç­”æ¡ˆæ—¶
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªè¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¥æå– LLM çš„å“åº”å³å¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">    <span class="hljs-comment">/**
     * è§£æ LLM è¾“å‡ºï¼Œæå– Thought å’Œ Action
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">_parseOutput</span>(<span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>): { <span class="hljs-attr">thought</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>; <span class="hljs-attr">action</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> } {
        <span class="hljs-keyword">const</span> thoughtMatch = text.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/Thought: (.*)/</span>);
        <span class="hljs-keyword">const</span> actionMatch = text.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/Action: (.*)/</span>);
        <span class="hljs-keyword">const</span> thought = thoughtMatch?.[<span class="hljs-number">1</span>]?.<span class="hljs-title function_">trim</span>() ?? <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">const</span> action = actionMatch?.[<span class="hljs-number">1</span>]?.<span class="hljs-title function_">trim</span>() ?? <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> { thought, action };
    }
  <span class="hljs-comment">/**
   * è§£æ Action å­—ç¬¦ä¸²ï¼Œæå–å·¥å…·åç§°å’Œè¾“å…¥
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">_parseAction</span>(<span class="hljs-attr">actionText</span>: <span class="hljs-built_in">string</span>): [<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>, <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>] {
    <span class="hljs-keyword">const</span> match = actionText.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/(\w+)[(.*)]/</span>);
    <span class="hljs-keyword">if</span> (match) {
      <span class="hljs-keyword">return</span> [match[<span class="hljs-number">1</span>] ?? <span class="hljs-literal">null</span>, match[<span class="hljs-number">2</span>] ?? <span class="hljs-literal">null</span>];
    }
    <span class="hljs-keyword">return</span> [<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>];
  }

  <span class="hljs-comment">/**
   * è§£æ Action è¾“å…¥ï¼Œæå–å‚æ•°
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">_parseActionInput</span>(<span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> {
    <span class="hljs-keyword">const</span> inputMatch = text.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\w+[(.*)]/</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(inputMatch)
    <span class="hljs-keyword">return</span> inputMatch &amp;&amp; <span class="hljs-keyword">typeof</span> inputMatch[<span class="hljs-number">1</span>] === <span class="hljs-string">'string'</span> ? inputMatch[<span class="hljs-number">1</span>] : <span class="hljs-literal">null</span>;
  }
</code></pre>
<ul>
<li><code>_parseOutput</code>ï¼šè´Ÿè´£ä» LLMè¿”å›çš„æ¶ˆæ¯ä¸­æå– Thought å’Œ Action ä¸¤ä¸ªæœ€ä¸»è¦çš„éƒ¨åˆ†</li>
<li><code>_parseAction</code>ï¼šè´Ÿè´£Action å­—ç¬¦ä¸²ä¸­ï¼Œæå–å·¥å…·åå’Œå‚æ•°ï¼Œä¾‹å¦‚ï¼šSearch[Oppo]ï¼Œå·¥å…·åï¼šSearchï¼Œå‚æ•°ï¼šOppo</li>
</ul>
<p>è§£æå“åº”ç»“æœå¹¶æ‰§è¡Œå·¥å…·å‡½æ•°</p>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-keyword">const</span> {thought, action} = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_parseOutput</span>(responseTxt);
<span class="hljs-keyword">if</span>(thought) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`æ€è€ƒï¼š<span class="hljs-subst">${thought}</span> \n`</span>)
  }

  <span class="hljs-keyword">if</span>(!action) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ²¡æœ‰ä¸‹ä¸€æ­¥Action, æµç¨‹ç»ˆæ­¢'</span>)
    <span class="hljs-keyword">break</span>;
  }
  
  <span class="hljs-keyword">if</span>(action.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'`Finish'</span>)) {
    <span class="hljs-keyword">const</span> finalAnswer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_parseActionInput</span>(action)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ€ç»ˆç­”æ¡ˆï¼š<span class="hljs-subst">${finalAnswer}</span> \n`</span>)
    <span class="hljs-keyword">return</span> finalAnswer;
  }

  <span class="hljs-keyword">const</span> [toolName, toolInput] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_parseAction</span>(action);
  <span class="hljs-keyword">if</span>(!toolInput || !toolName) {
    <span class="hljs-keyword">continue</span>;
  }

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¡ŒåŠ¨: <span class="hljs-subst">${toolName}</span> <span class="hljs-subst">${toolInput}</span>\n`</span>)

  <span class="hljs-keyword">const</span> toolFun = <span class="hljs-variable language_">this</span>.<span class="hljs-property">toolsExecutor</span>.<span class="hljs-title function_">getTool</span>(toolName)
  <span class="hljs-keyword">let</span> observation = <span class="hljs-string">`é”™è¯¯ï¼š æœªæ‰¾åˆ°åä¸º '<span class="hljs-subst">${toolName}</span>' çš„å·¥å…·`</span>
  <span class="hljs-keyword">if</span>(toolFun) {
    <span class="hljs-comment">// ä½¿ç”¨ call æ¥å®ç°å·¥å…·å‡½æ•°çš„æ‰§è¡Œ</span>
    observation = <span class="hljs-keyword">await</span> toolFun.<span class="hljs-title function_">call</span>(<span class="hljs-literal">null</span>, toolInput)
  }
</code></pre>
<p>è¿™æ®µä»£ç å°±æ˜¯ï¼Œè§£æ LLMå“åº”çš„ç»“æœï¼Œå¦‚æœä»¥ <code>Finish</code> å¼€å§‹å°±ä»£è¡¨ LLMå·²ç»ç»™å‡ºäº†æœ€ç»ˆçš„ç»“æœï¼Œå¦‚æœä¸æ˜¯åˆ™éœ€è¦æå–<code>Action</code>ï¼Œå¹¶æ‰§è¡Œ <code>Action</code>è·å–å“åº”ç»“æœã€‚</p>
<p>æœ€åæŠŠæœ¬æ¬¡è°ƒç”¨å“åº”çš„ç»“æœï¼ˆ<code>observation</code>ï¼‰ï¼Œæ”¾å…¥åˆ° history ä¸­ï¼Œä¾›ä¸‹æ¬¡ LLM æ€è€ƒå‚è€ƒ</p>
<pre><code class="hljs language-TS" lang="TS"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è§‚å¯Ÿ <span class="hljs-subst">${observation}</span> \n\n`</span>)
<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">`Action: <span class="hljs-subst">${action}</span>`</span>)
<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">`Observation: <span class="hljs-subst">${observation}</span>`</span>)
</code></pre>
<p>å½“ç„¶ï¼Œåœ¨ while å¾ªç¯ä¸­è®¾ç½®çš„æœ‰ max_stepã€‚ç¨‹åºå¹¶ä¸ä¼šæ— é™å¾ªç¯ï¼Œè¾¾åˆ°ä¸€å®šæ¬¡æ•°è‡ªåŠ¨åœæ­¢ã€‚</p>
<p>ä¸‹é¢æ˜¯è¿è¡Œ console ç»“æœï¼š</p>
<pre><code class="hljs language-TS" lang="TS">å·¥å…· <span class="hljs-title class_">Search</span> å·²æ³¨å†Œ 

--- æ‰§è¡Œç¬¬ <span class="hljs-number">1</span> æ­¥ ---
å¼€å§‹è°ƒç”¨å¤§æ¨¡å‹
è°ƒç”¨å¤§æ¨¡å‹æˆåŠŸ 

<span class="hljs-title class_">Thought</span>: ä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘éœ€è¦æŸ¥æ‰¾å°ç±³æœ€æ–°å‘å¸ƒçš„æ‰‹æœºå‹å·åŠå…¶ä¸»è¦å–ç‚¹ã€‚ç”±äºå°ç±³ä¼šå®šæœŸå‘å¸ƒæ–°æ‰‹æœºï¼Œæˆ‘éœ€è¦é€šè¿‡æœç´¢å·¥å…·è·å–æœ€æ–°çš„ä¿¡æ¯ã€‚

<span class="hljs-title class_">Action</span>: <span class="hljs-string">`Search[å°ç±³æœ€æ–°æ‰‹æœºå‹å·å’Œå–ç‚¹]`</span>
æ€è€ƒï¼šä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘éœ€è¦æŸ¥æ‰¾å°ç±³æœ€æ–°å‘å¸ƒçš„æ‰‹æœºå‹å·åŠå…¶ä¸»è¦å–ç‚¹ã€‚ç”±äºå°ç±³ä¼šå®šæœŸå‘å¸ƒæ–°æ‰‹æœºï¼Œæˆ‘éœ€è¦é€šè¿‡æœç´¢å·¥å…·è·å–æœ€æ–°çš„ä¿¡æ¯ã€‚ 

è¡ŒåŠ¨: <span class="hljs-title class_">Search</span> å°ç±³æœ€æ–°æ‰‹æœºå‹å·å’Œå–ç‚¹

è§‚å¯Ÿ [<span class="hljs-number">1</span>] å°ç±³å…¨ç³»åˆ—é€‰è´­æŒ‡å—ï¼š<span class="hljs-number">2026</span>å¹´çˆ†æ¬¾æœºå‹+å„ç³»åˆ—æ ¸å¿ƒå–ç‚¹_æ‰‹æœº
å°ç±³æ•°å­—ç³»åˆ—å®šä½<span class="hljs-number">3999</span>å…ƒä»¥ä¸Šé«˜ç«¯å¸‚åœºï¼Œæ˜¯è¿½æ±‚æ——èˆ°æ€§èƒ½ä¸å‡è¡¡ä½“éªŒç”¨æˆ·çš„é¦–é€‰ã€‚å°ç±³<span class="hljs-number">17</span>æ­è½½éªé¾™<span class="hljs-number">8</span> <span class="hljs-title class_">Gen5</span>å¤„ç†å™¨ï¼Œé…å¤‡2K <span class="hljs-variable constant_">LTPO</span>ç›´å±ä¸5300mAhç”µæ± ï¼Œæ”¯æŒ90Wå¿«å……ï¼Œæœºèº« ...

[<span class="hljs-number">2</span>] æ‰‹æœº - å°ç±³å•†åŸ
<span class="hljs-title class_">Redmi</span> 14C. <span class="hljs-number">599</span>èµ·. <span class="hljs-variable constant_">CPU</span>å‹å·<span class="hljs-title class_">MediaTek</span> <span class="hljs-title class_">Helio</span> <span class="hljs-variable constant_">G81</span>-<span class="hljs-title class_">Ultra</span> ; <span class="hljs-title class_">Redmi</span> <span class="hljs-title class_">Note</span> <span class="hljs-number">14</span> <span class="hljs-title class_">Pro</span>. <span class="hljs-number">1149</span>èµ· Â· <span class="hljs-variable constant_">CPU</span>å‹å·å¤©ç‘<span class="hljs-number">7300</span>-<span class="hljs-title class_">Ultra</span> ; <span class="hljs-title class_">Xiaomi</span> <span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆ. <span class="hljs-number">7999</span>èµ· Â· <span class="hljs-variable constant_">CPU</span>å‹å·ç¬¬äº”ä»£éªé¾™<span class="hljs-number">8</span>è‡³å°Šç‰ˆ ...

[<span class="hljs-number">3</span>] å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span>çš„æœ€å¼ºå–ç‚¹ï¼Œå´æˆäº†ç”¨æˆ·é€€è´§çš„ç†ç”±
å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span>å¾•å¡ç‰ˆå› å˜ç„¦ç¯æ¾åŠ¨é—®é¢˜å¼•å‘ç”¨æˆ·ä¸æ»¡ï¼Œå®˜æ–¹å›åº”ç§°æ˜¯è®¾è®¡é¢„ç•™æ´»åŠ¨ç©ºé—´æ‰€è‡´ï¼Œä½†æœªèƒ½æ¶ˆé™¤è´¨ç–‘ã€‚è¯¥é—®é¢˜æ¶‰åŠäº§å“è®¾è®¡ã€åˆ¶é€ å…¬å·®å’Œç”¨æˆ·ä½“éªŒã€‚ 


--- æ‰§è¡Œç¬¬ <span class="hljs-number">2</span> æ­¥ ---
å¼€å§‹è°ƒç”¨å¤§æ¨¡å‹
è°ƒç”¨å¤§æ¨¡å‹æˆåŠŸ 

<span class="hljs-title class_">Thought</span>: æ ¹æ®æœç´¢ç»“æœï¼Œå°ç±³æœ€æ–°çš„æ‰‹æœºå‹å·æ˜¯å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆã€‚å®ƒçš„å–ç‚¹åŒ…æ‹¬æ­è½½ç¬¬äº”ä»£éªé¾™<span class="hljs-number">8</span>è‡³å°Šç‰ˆå¤„ç†å™¨ï¼Œä»¥åŠå¾•å¡ç‰ˆçš„å½±åƒç³»ç»Ÿã€‚ä¸è¿‡ï¼Œæœç´¢ç»“æœä¹Ÿæåˆ°äº†ä¸€äº›ç”¨æˆ·å¯¹å˜ç„¦ç¯æ¾åŠ¨çš„åé¦ˆã€‚ä¸ºäº†æ›´å…¨é¢åœ°äº†è§£è¿™æ¬¾æ‰‹æœºçš„å–ç‚¹ï¼Œæˆ‘éœ€è¦è¿›ä¸€æ­¥æœç´¢å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆçš„è¯¦ç»†è§„æ ¼å’Œå®˜æ–¹å®£ä¼ ä¿¡æ¯ã€‚

<span class="hljs-title class_">Action</span>: <span class="hljs-string">`Search[å°ç±³17 Ultra å¾•å¡ç‰ˆ å®˜æ–¹å–ç‚¹]`</span>
æ€è€ƒï¼šæ ¹æ®æœç´¢ç»“æœï¼Œå°ç±³æœ€æ–°çš„æ‰‹æœºå‹å·æ˜¯å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆã€‚å®ƒçš„å–ç‚¹åŒ…æ‹¬æ­è½½ç¬¬äº”ä»£éªé¾™<span class="hljs-number">8</span>è‡³å°Šç‰ˆå¤„ç†å™¨ï¼Œä»¥åŠå¾•å¡ç‰ˆçš„å½±åƒç³»ç»Ÿã€‚ä¸è¿‡ï¼Œæœç´¢ç»“æœä¹Ÿæåˆ°äº†ä¸€äº›ç”¨æˆ·å¯¹å˜ç„¦ç¯æ¾åŠ¨çš„åé¦ˆã€‚ä¸ºäº†æ›´å…¨é¢åœ°äº†è§£è¿™æ¬¾æ‰‹æœºçš„å–ç‚¹ï¼Œæˆ‘éœ€è¦è¿›ä¸€æ­¥æœç´¢å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆçš„è¯¦ç»†è§„æ ¼å’Œå®˜æ–¹å®£ä¼ ä¿¡æ¯ã€‚ 

è¡ŒåŠ¨: <span class="hljs-title class_">Search</span> å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆ å®˜æ–¹å–ç‚¹

è§‚å¯Ÿ [<span class="hljs-number">1</span>] <span class="hljs-title class_">Xiaomi</span> <span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆ
<span class="hljs-title class_">Xiaomi</span> <span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆï¼Œæ–¹æ–¹é¢é¢å°½å¾•å¡ã€‚å¾•å¡ç›¸æœºæ„Ÿè®¾è®¡ï¼Œå¾•å¡ç»å…¸çº¢æ ‡ï¼Œä¸­æ¡†ç²¾é›•æ¨ªæ»šèŠ±ï¼Œé•Œåˆ»å¾•å¡é“­æ–‡ã€‚åˆ›æ–°å¤§å¸ˆå˜ç„¦ç¯ï¼Œå¦‚ç›¸æœºèˆ¬ç²¾å¯†æ“æ§ï¼›æ”¯æŒåŠŸèƒ½è‡ªå®šä¹‰ï¼Œæ—¶åˆ»æœåŠ¡ä½ çš„ ...

[<span class="hljs-number">2</span>] <span class="hljs-title class_">Xiaomi</span> <span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆç«‹å³è´­ä¹°-å°ç±³å•†åŸ
<span class="hljs-title class_">Xiaomi</span> <span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆ ; <span class="hljs-number">299</span>å…ƒ. <span class="hljs-title class_">Xiaomi</span> <span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> ä¿å€¼æ¢æ–°æœåŠ¡ Â· <span class="hljs-number">299</span>å…ƒ ; <span class="hljs-title class_">MiCare</span> æ— å¿§ç‰ˆå·²çœ<span class="hljs-number">500</span>å…ƒ. åŠ è´­åç¢å±ä¿å‡çº§ä¸º<span class="hljs-number">2</span>å¹´å¤šæ¬¡ï¼Œè¯¦è§æœåŠ¡ä»‹ç» Â· <span class="hljs-number">499</span>å…ƒ ; å»¶é•¿ä¿<span class="hljs-number">1</span>å¹´<span class="hljs-number">349</span>å…ƒ. æ€§èƒ½ ...

[<span class="hljs-number">3</span>] å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span>çš„æœ€å¼ºå–ç‚¹ï¼Œå´æˆäº†ç”¨æˆ·é€€è´§çš„ç†ç”±
å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span>å¾•å¡ç‰ˆå› å˜ç„¦ç¯æ¾åŠ¨é—®é¢˜å¼•å‘ç”¨æˆ·ä¸æ»¡ï¼Œå®˜æ–¹å›åº”ç§°æ˜¯è®¾è®¡é¢„ç•™æ´»åŠ¨ç©ºé—´æ‰€è‡´ï¼Œä½†æœªèƒ½æ¶ˆé™¤è´¨ç–‘ã€‚è¯¥é—®é¢˜æ¶‰åŠäº§å“è®¾è®¡ã€åˆ¶é€ å…¬å·®å’Œç”¨æˆ·ä½“éªŒã€‚ 


--- æ‰§è¡Œç¬¬ <span class="hljs-number">3</span> æ­¥ ---
å¼€å§‹è°ƒç”¨å¤§æ¨¡å‹
è°ƒç”¨å¤§æ¨¡å‹æˆåŠŸ 

<span class="hljs-title class_">Thought</span>: æ ¹æ®æœç´¢ç»“æœï¼Œå°ç±³æœ€æ–°çš„æ‰‹æœºå‹å·æ˜¯å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆã€‚å®ƒçš„å–ç‚¹åŒ…æ‹¬å¾•å¡ç›¸æœºæ„Ÿè®¾è®¡ã€å¾•å¡ç»å…¸çº¢æ ‡ã€ä¸­æ¡†ç²¾é›•æ¨ªæ»šèŠ±ã€é•Œåˆ»å¾•å¡é“­æ–‡ï¼Œä»¥åŠåˆ›æ–°çš„å˜ç„¦ç¯è®¾è®¡ã€‚è™½ç„¶å˜ç„¦ç¯è®¾è®¡å¼•å‘äº†ä¸€äº›ç”¨æˆ·çš„ä¸æ»¡ï¼Œä½†å®˜æ–¹è§£é‡Šè¿™æ˜¯è®¾è®¡é¢„ç•™çš„æ´»åŠ¨ç©ºé—´ã€‚å› æ­¤ï¼Œå¯ä»¥ç¡®è®¤å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆæ˜¯å°ç±³æœ€æ–°çš„æ‰‹æœºï¼Œå…¶å–ç‚¹ä¸»è¦é›†ä¸­åœ¨å¾•å¡åˆä½œçš„é«˜ç«¯ç›¸æœºä½“éªŒå’Œè®¾è®¡ä¸Šã€‚

<span class="hljs-title class_">Action</span>: <span class="hljs-string">`Finish[å°ç±³æœ€æ–°çš„æ‰‹æœºæ˜¯å°ç±³17 Ultra å¾•å¡ç‰ˆã€‚å®ƒçš„ä¸»è¦å–ç‚¹åŒ…æ‹¬å¾•å¡ç›¸æœºæ„Ÿè®¾è®¡ã€å¾•å¡ç»å…¸çº¢æ ‡ã€ä¸­æ¡†ç²¾é›•æ¨ªæ»šèŠ±ã€é•Œåˆ»å¾•å¡é“­æ–‡ï¼Œä»¥åŠåˆ›æ–°çš„å˜ç„¦ç¯è®¾è®¡ï¼Œæä¾›å¦‚ç›¸æœºèˆ¬çš„ç²¾å¯†æ“æ§ä½“éªŒã€‚]`</span>
æ€è€ƒï¼šæ ¹æ®æœç´¢ç»“æœï¼Œå°ç±³æœ€æ–°çš„æ‰‹æœºå‹å·æ˜¯å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆã€‚å®ƒçš„å–ç‚¹åŒ…æ‹¬å¾•å¡ç›¸æœºæ„Ÿè®¾è®¡ã€å¾•å¡ç»å…¸çº¢æ ‡ã€ä¸­æ¡†ç²¾é›•æ¨ªæ»šèŠ±ã€é•Œåˆ»å¾•å¡é“­æ–‡ï¼Œä»¥åŠåˆ›æ–°çš„å˜ç„¦ç¯è®¾è®¡ã€‚è™½ç„¶å˜ç„¦ç¯è®¾è®¡å¼•å‘äº†ä¸€äº›ç”¨æˆ·çš„ä¸æ»¡ï¼Œä½†å®˜æ–¹è§£é‡Šè¿™æ˜¯è®¾è®¡é¢„ç•™çš„æ´»åŠ¨ç©ºé—´ã€‚å› æ­¤ï¼Œå¯ä»¥ç¡®è®¤å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆæ˜¯å°ç±³æœ€æ–°çš„æ‰‹æœºï¼Œå…¶å–ç‚¹ä¸»è¦é›†ä¸­åœ¨å¾•å¡åˆä½œçš„é«˜ç«¯ç›¸æœºä½“éªŒå’Œè®¾è®¡ä¸Šã€‚ 
-- å˜é‡ ---
[
  <span class="hljs-string">'Finish[å°ç±³æœ€æ–°çš„æ‰‹æœºæ˜¯å°ç±³17 Ultra å¾•å¡ç‰ˆã€‚å®ƒçš„ä¸»è¦å–ç‚¹åŒ…æ‹¬å¾•å¡ç›¸æœºæ„Ÿè®¾è®¡ã€å¾•å¡ç»å…¸çº¢æ ‡ã€ä¸­æ¡†ç²¾é›•æ¨ªæ»šèŠ±ã€é•Œåˆ»å¾•å¡é“­æ–‡ï¼Œä»¥åŠåˆ›æ–°çš„å˜ç„¦ç¯è®¾è®¡ï¼Œæä¾›å¦‚ç›¸æœºèˆ¬çš„ç²¾å¯†æ“æ§ä½“éªŒã€‚]'</span>,
  <span class="hljs-string">'å°ç±³æœ€æ–°çš„æ‰‹æœºæ˜¯å°ç±³17 Ultra å¾•å¡ç‰ˆã€‚å®ƒçš„ä¸»è¦å–ç‚¹åŒ…æ‹¬å¾•å¡ç›¸æœºæ„Ÿè®¾è®¡ã€å¾•å¡ç»å…¸çº¢æ ‡ã€ä¸­æ¡†ç²¾é›•æ¨ªæ»šèŠ±ã€é•Œåˆ»å¾•å¡é“­æ–‡ï¼Œä»¥åŠåˆ›æ–°çš„å˜ç„¦ç¯è®¾è®¡ï¼Œæä¾›å¦‚ç›¸æœºèˆ¬çš„ç²¾å¯†æ“æ§ä½“éªŒã€‚'</span>,
  <span class="hljs-attr">index</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">input</span>: <span class="hljs-string">'`Finish[å°ç±³æœ€æ–°çš„æ‰‹æœºæ˜¯å°ç±³17 Ultra å¾•å¡ç‰ˆã€‚å®ƒçš„ä¸»è¦å–ç‚¹åŒ…æ‹¬å¾•å¡ç›¸æœºæ„Ÿè®¾è®¡ã€å¾•å¡ç»å…¸çº¢æ ‡ã€ä¸­æ¡†ç²¾é›•æ¨ªæ»šèŠ±ã€é•Œåˆ»å¾•å¡é“­æ–‡ï¼Œä»¥åŠåˆ›æ–°çš„å˜ç„¦ç¯è®¾è®¡ï¼Œæä¾›å¦‚ç›¸æœºèˆ¬çš„ç²¾å¯†æ“æ§ä½“éªŒã€‚]`'</span>,
  <span class="hljs-attr">groups</span>: <span class="hljs-literal">undefined</span>
]
æœ€ç»ˆç­”æ¡ˆï¼šå°ç±³æœ€æ–°çš„æ‰‹æœºæ˜¯å°ç±³<span class="hljs-number">17</span> <span class="hljs-title class_">Ultra</span> å¾•å¡ç‰ˆã€‚å®ƒçš„ä¸»è¦å–ç‚¹åŒ…æ‹¬å¾•å¡ç›¸æœºæ„Ÿè®¾è®¡ã€å¾•å¡ç»å…¸çº¢æ ‡ã€ä¸­æ¡†ç²¾é›•æ¨ªæ»šèŠ±ã€é•Œåˆ»å¾•å¡é“­æ–‡ï¼Œä»¥åŠåˆ›æ–°çš„å˜ç„¦ç¯è®¾è®¡ï¼Œæä¾›å¦‚ç›¸æœºèˆ¬çš„ç²¾å¯†æ“æ§ä½“éªŒã€‚
</code></pre>
<p>æ³¨æ„</p>
<p>ç”±äºå¤§æ¨¡å‹èƒ½åŠ›çš„ä¸åŒï¼Œä¸ç¡®è®¤æˆ‘ä»¬çš„æœç´¢ç»“æœä¹Ÿä¸€æ ·ã€‚æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>deepseek-v3-250324</code>è¿™ä¸ªæ¨¡å‹æ‰§è¡Œçš„ç»“æœã€‚</p>
<p>æœ€åï¼Œæƒ³çœ‹å…¨éƒ¨çš„ä»£ç è¯·åœ¨è¿™é‡ŒæŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjavaswing%2Flearn-agent%2Ftree%2Ffeature%2Fts%2Fchap4%2Fts" target="_blank" title="https://github.com/javaswing/learn-agent/tree/feature/ts/chap4/ts" ref="nofollow noopener noreferrer">github.com/javaswing/lâ€¦</a></p>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>æœ¬æ–‡ï¼Œé€šè¿‡å¯¹äº ReAct èŒƒå¼çš„ä»‹ç»ï¼Œå¹¶ç»“åˆ HelloAgentä¸€ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œäº†å®è·µã€‚å¯¹äº Agentçš„å¼€å‘æœ‰äº†ä½“æ„Ÿã€‚å¾é€”åˆšåˆšå¼€å§‹ã€‚</p>
<h2 data-id="heading-14">å‚è€ƒ</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fdiscover%2Fwhat-are-ai-agents" target="_blank" title="https://cloud.google.com/discover/what-are-ai-agents" ref="nofollow noopener noreferrer">cloud.google.com/discover/whâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Faiagent.app%2F" target="_blank" title="https://aiagent.app/" ref="nofollow noopener noreferrer">aiagent.app/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbaoyu.io%2Fblog%2Fai-agent-frontend-rebirth-from-failure" target="_blank" title="https://baoyu.io/blog/ai-agent-frontend-rebirth-from-failure" ref="nofollow noopener noreferrer">baoyu.io/blog/ai-ageâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdatawhalechina.github.io%2Fhello-agents%2F%23%2F.%2Fchapter4%2F%25E7%25AC%25AC%25E5%259B%259B%25E7%25AB%25A0%2520%25E6%2599%25BA%25E8%2583%25BD%25E4%25BD%2593%25E7%25BB%258F%25E5%2585%25B8%25E8%258C%2583%25E5%25BC%258F%25E6%259E%2584%25E5%25BB%25BA" target="_blank" title="https://datawhalechina.github.io/hello-agents/#/./chapter4/%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E6%99%BA%E8%83%BD%E4%BD%93%E7%BB%8F%E5%85%B8%E8%8C%83%E5%BC%8F%E6%9E%84%E5%BB%BA" ref="nofollow noopener noreferrer">datawhalechina.github.io/hello-agentâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ibm.com%2Fthink%2Ftopics%2Freact-agent" target="_blank" title="https://www.ibm.com/think/topics/react-agent" ref="nofollow noopener noreferrer">www.ibm.com/think/topicâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freact-lm.github.io%2F" target="_blank" title="https://react-lm.github.io/" ref="nofollow noopener noreferrer">react-lm.github.io/</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å¼€å§‹ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ åˆ›å»º Vue 3 + TypeScript é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7599094262591946762</link>    <guid>https://juejin.cn/post/7599094262591946762</guid>    <pubDate>2026-01-25T17:35:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599094262591946762" data-draft-id="7599094262591930378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å¼€å§‹ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ åˆ›å»º Vue 3 + TypeScript é¡¹ç›®"/> <meta itemprop="keywords" content="Vue.js,TypeScript"/> <meta itemprop="datePublished" content="2026-01-25T17:35:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é±¼äºˆä½™"/> <meta itemprop="url" content="https://juejin.cn/user/1345457964195192"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å¼€å§‹ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ åˆ›å»º Vue 3 + TypeScript é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1345457964195192/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é±¼äºˆä½™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T17:35:03.000Z" title="Sun Jan 25 2026 17:35:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡å°†å¸¦ä½ ä¸€æ­¥æ­¥åˆ›å»ºå®Œæ•´çš„ Vue 3 é¡¹ç›®ï¼ŒåŒ…å«ç°ä»£åŒ–çš„å¼€å‘å·¥å…·é“¾ã€ä»£ç è§„èŒƒå’Œæœ€ä½³å®è·µã€‚é€‚åˆå‰ç«¯å¼€å‘è€…å­¦ä¹ å’Œå‚è€ƒã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Vue 3 å¸¦æ¥äº† Composition APIã€æ›´å¥½çš„ TypeScript æ”¯æŒå’Œæ€§èƒ½ä¼˜åŒ–ï¼Œæ˜¯ç°ä»£å‰ç«¯å¼€å‘çš„è¾ƒå¹¿æ³›çš„é€‰æ‹©ã€‚æœ¬æ•™ç¨‹å°†ä»ç¯å¢ƒæ­å»ºå¼€å§‹ï¼Œé€æ­¥åˆ›å»ºå®Œæ•´çš„ Vue 3 é¡¹ç›®ã€‚</p>
<h2 data-id="heading-1">ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-2">1. Node.js ç¯å¢ƒ</h3>
<p>Vue 3 é¡¹ç›®éœ€è¦ Node.js ç¯å¢ƒï¼Œæ¨èä½¿ç”¨ LTS ç‰ˆæœ¬ã€‚</p>
<h4 data-id="heading-3">Windows ç³»ç»Ÿ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¿é—® Node.js å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…</span>
<span class="hljs-comment"># https://nodejs.org/</span>

<span class="hljs-comment"># æˆ–ä½¿ç”¨ nvm-windows ç®¡ç†å¤šä¸ªç‰ˆæœ¬</span>
<span class="hljs-comment"># 1. ä¸‹è½½ nvm-windows: https://github.com/coreybutler/nvm-windows/releases</span>
<span class="hljs-comment"># 2. å®‰è£…å¹¶é‡å¯å‘½ä»¤è¡Œ</span>
nvm install 20.19.0
nvm use 20.19.0
</code></pre>
<h4 data-id="heading-4">macOS ç³»ç»Ÿ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ Homebrew å®‰è£…</span>
brew install node

<span class="hljs-comment"># æˆ–ä½¿ç”¨ nvm ç®¡ç†ç‰ˆæœ¬</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
<span class="hljs-built_in">source</span> ~/.bashrc
nvm install 20.19.0
nvm use 20.19.0
</code></pre>
<h4 data-id="heading-5">éªŒè¯å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç‰ˆæœ¬</span>
node --version  <span class="hljs-comment"># åº”æ˜¾ç¤º v20.19.0 æˆ–æ›´é«˜</span>
npm --version   <span class="hljs-comment"># åº”æ˜¾ç¤º 10.x.x æˆ–æ›´é«˜</span>
</code></pre>
<h3 data-id="heading-6">2. åŒ…ç®¡ç†å·¥å…·</h3>
<p>æ¨èä½¿ç”¨ npm æˆ– pnpmï¼Œyarn ä¹Ÿå¯ä»¥ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£… pnpm (å¯é€‰)</span>
npm install -g pnpm

<span class="hljs-comment"># æ£€æŸ¥ç‰ˆæœ¬</span>
pnpm --version
</code></pre>
<h3 data-id="heading-7">3. IDE é…ç½®</h3>
<p>æ¨èä½¿ç”¨ VS Codeï¼Œå¹¶å®‰è£… Vue ç›¸å…³æ’ä»¶ã€‚</p>
<h4 data-id="heading-8">å¿…éœ€æ’ä»¶</h4>
<ul>
<li><strong>Vue (Official)</strong> - Vue å®˜æ–¹æ’ä»¶ï¼Œæä¾›è¯­æ³•é«˜äº®å’Œæ™ºèƒ½æç¤º</li>
<li><strong>TypeScript Importer</strong> - è‡ªåŠ¨å¯¼å…¥ TypeScript ç±»å‹</li>
<li><strong>Prettier</strong> - ä»£ç æ ¼å¼åŒ–</li>
<li><strong>ESLint</strong> - ä»£ç æ£€æŸ¥</li>
</ul>
<h4 data-id="heading-9">VS Code è®¾ç½®</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// .vscode/settings.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"typescript.preferences.importModuleSpecifier"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"relative"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.vscode-prettier"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"editor.codeActionsOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"source.fixAll.eslint"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-10">é¡¹ç›®åˆ›å»º</h2>
<h3 data-id="heading-11">æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Vite å®˜æ–¹æ¨¡æ¿</h3>
<p>Vite æ˜¯ Vue å®˜æ–¹æ¨èçš„æ„å»ºå·¥å…·ï¼Œé€Ÿåº¦å¿«ï¼Œå¼€å‘ä½“éªŒå¥½ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®</span>
npm create vue@latest vue-course

<span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span> vue-course
</code></pre>
<h4 data-id="heading-12">é…ç½®é€‰é¡¹</h4>
<p>åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­é€‰æ‹©ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs">âœ… TypeScript
âœ… JSX
âœ… Vue Router
âœ… Pinia
âœ… ESLint
âœ… Prettier
</code></pre>
<h3 data-id="heading-13">æ–¹æ³•äºŒï¼šæ‰‹åŠ¨åˆ›å»ºé¡¹ç›®</h3>
<p>å¦‚æœä½ å–œæ¬¢è‡ªå®šä¹‰é…ç½®ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> vue-course
<span class="hljs-built_in">cd</span> vue-course

<span class="hljs-comment"># åˆå§‹åŒ– package.json</span>
npm init -y

<span class="hljs-comment"># å®‰è£…æ ¸å¿ƒä¾èµ–</span>
npm install vue@latest @vue/compiler-sfc@latest
npm install -D @vitejs/plugin-vue@latest vite@latest
npm install -D typescript@latest vue-tsc@latest
</code></pre>
<h2 data-id="heading-14">é¡¹ç›®é…ç½®</h2>
<h3 data-id="heading-15">1. Vite é…ç½®</h3>
<p>åˆ›å»º <code>vite.config.ts</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-keyword">import</span> { resolve } <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>

<span class="hljs-comment">// https://vitejs.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>)
    }
  },
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">port</span>: <span class="hljs-number">5173</span>,
    <span class="hljs-attr">host</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">target</span>: <span class="hljs-string">'esnext'</span>,
    <span class="hljs-attr">minify</span>: <span class="hljs-string">'esbuild'</span>,
    <span class="hljs-attr">outDir</span>: <span class="hljs-string">'dist'</span>
  }
})
</code></pre>
<h3 data-id="heading-16">2. TypeScript é…ç½®</h3>
<p>åˆ›å»º <code>tsconfig.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"extends"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@vue/tsconfig/tsconfig.dom.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"env.d.ts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"src/**/*"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"src/**/*.vue"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exclude"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/**/__tests__/*"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"composite"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./src/*"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"vite/client"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åˆ›å»º <code>tsconfig.node.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"extends"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@vue/tsconfig/tsconfig.dom.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"vite.config.*"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"composite"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"node"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åˆ›å»º <code>env.d.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/// &lt;reference types="vite/client" /&gt;</span>

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">'*.vue'</span> {
  <span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">DefineComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">component</span>: <span class="hljs-title class_">DefineComponent</span>&lt;{}, {}, <span class="hljs-built_in">any</span>&gt;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> component
}
</code></pre>
<h3 data-id="heading-17">3. ESLint é…ç½®</h3>
<p>åˆ›å»º <code>eslint.config.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> js <span class="hljs-keyword">from</span> <span class="hljs-string">'@eslint/js'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'eslint-plugin-vue'</span>
<span class="hljs-keyword">import</span> typescript <span class="hljs-keyword">from</span> <span class="hljs-string">'@typescript-eslint/eslint-plugin'</span>
<span class="hljs-keyword">import</span> typescriptParser <span class="hljs-keyword">from</span> <span class="hljs-string">'@typescript-eslint/parser'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'app/files-to-lint'</span>,
    <span class="hljs-attr">files</span>: [<span class="hljs-string">'**/*.{ts,mts,tsx,vue}'</span>],
  },

  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'app/files-to-ignore'</span>,
    <span class="hljs-attr">ignores</span>: [<span class="hljs-string">'**/dist/**'</span>, <span class="hljs-string">'**/dist-ssr/**'</span>, <span class="hljs-string">'**/coverage/**'</span>],
  },

  js.<span class="hljs-property">configs</span>.<span class="hljs-property">recommended</span>,
  ...vue.<span class="hljs-property">configs</span>[<span class="hljs-string">'flat/essential'</span>],

  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'app/vue-rules'</span>,
    <span class="hljs-attr">files</span>: [<span class="hljs-string">'**/*.vue'</span>],
    <span class="hljs-attr">languageOptions</span>: {
      <span class="hljs-attr">parser</span>: vue.<span class="hljs-property">parser</span>,
      <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">parser</span>: typescriptParser,
        <span class="hljs-attr">extraFileExtensions</span>: [<span class="hljs-string">'.vue'</span>],
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,
      },
    },
  },

  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'app/typescript-rules'</span>,
    <span class="hljs-attr">files</span>: [<span class="hljs-string">'**/*.{ts,mts,tsx,vue}'</span>],
    <span class="hljs-attr">languageOptions</span>: {
      <span class="hljs-attr">parser</span>: typescriptParser,
      <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2020</span>,
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,
      },
    },
    <span class="hljs-attr">rules</span>: {
      ...typescript.<span class="hljs-property">configs</span>.<span class="hljs-property">recommended</span>.<span class="hljs-property">rules</span>,
      <span class="hljs-string">'@typescript-eslint/no-unused-vars'</span>: <span class="hljs-string">'error'</span>,
      <span class="hljs-string">'@typescript-eslint/explicit-function-return-type'</span>: <span class="hljs-string">'off'</span>,
    },
  },
]
</code></pre>
<h3 data-id="heading-18">4. Prettier é…ç½®</h3>
<p>åˆ›å»º <code>.prettierrc.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"semi"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"singleQuote"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"tabWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trailingComma"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"es5"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"printWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"endOfLine"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lf"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-19">é¡¹ç›®ç»“æ„æ­å»º</h2>
<h3 data-id="heading-20">1. åŸºç¡€æ–‡ä»¶ç»“æ„</h3>
<pre><code class="hljs language-arduino" lang="arduino">vue-course/
â”œâ”€â”€ <span class="hljs-keyword">public</span>/
â”‚   â”œâ”€â”€ favicon.ico
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ base.css
â”‚   â”‚   â”œâ”€â”€ main.css
â”‚   â”‚   â””â”€â”€ logo.svg
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ HelloWorld.vue
â”‚   â”‚   â”œâ”€â”€ TheWelcome.vue
â”‚   â”‚   â”œâ”€â”€ WelcomeItem.vue
â”‚   â”‚   â””â”€â”€ icons/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ HomeView.vue
â”‚   â”‚   â””â”€â”€ AboutView.vue
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ counter.ts
â”‚   â”œâ”€â”€ App.vue
â”‚   â”œâ”€â”€ main.ts
â”‚   â””â”€â”€ mcp-server.ts
â”œâ”€â”€ .vscode/
â”‚   â””â”€â”€ settings.json
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.app.json
â”œâ”€â”€ tsconfig.node.json
â”œâ”€â”€ env.d.ts
â”œâ”€â”€ eslint.config.ts
â”œâ”€â”€ .prettierrc.json
â””â”€â”€ README.md
</code></pre>
<h3 data-id="heading-21">2. å…¥å£æ–‡ä»¶</h3>
<p><code>src/main.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">'./assets/main.css'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)

app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPinia</span>())
app.<span class="hljs-title function_">use</span>(router)

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<p><code>index.html</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/svg+xml"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/favicon.ico"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vue Course<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/src/main.ts"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-22">3. æ ¹ç»„ä»¶</h3>
<p><code>src/App.vue</code>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;header class="app-header"&gt;
      &lt;h1&gt;Vue 3 é¡¹ç›®&lt;/h1&gt;
      &lt;nav&gt;
        &lt;router-link to="/"&gt;é¦–é¡µ&lt;/router-link&gt;
        &lt;router-link to="/about"&gt;å…³äº&lt;/router-link&gt;
      &lt;/nav&gt;
    &lt;/header&gt;

    &lt;main class="app-main"&gt;
      &lt;router-view /&gt;
    &lt;/main&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
// ç»„ä»¶é€»è¾‘
&lt;/script&gt;

&lt;style scoped&gt;
.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: #f8f9fa;
  border-bottom: 1px solid #e9ecef;
}

.app-main {
  padding: 2rem;
  min-height: calc(100vh - 80px);
}
&lt;/style&gt;
</code></pre>
<h2 data-id="heading-23">è·¯ç”±é…ç½®</h2>
<h3 data-id="heading-24">1. å®‰è£… Vue Router</h3>
<pre><code class="hljs language-bash" lang="bash">npm install vue-router@4
</code></pre>
<h3 data-id="heading-25">2. è·¯ç”±é…ç½®</h3>
<p><code>src/router/index.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createRouter, createWebHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/HomeView.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'é¦–é¡µ'</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'About'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/AboutView.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'å…³äº'</span> }
  }
]

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>),
  routes
})

<span class="hljs-comment">// è·¯ç”±å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`<span class="hljs-subst">${to.meta.title}</span> - Vue Course`</span>
  <span class="hljs-title function_">next</span>()
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre>
<h3 data-id="heading-26">3. åˆ›å»ºé¡µé¢ç»„ä»¶</h3>
<p><code>src/views/HomeView.vue</code>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="home"&gt;
    &lt;h2&gt;æ¬¢è¿ä½¿ç”¨ Vue 3&lt;/h2&gt;
    &lt;p&gt;å½“å‰è®¡æ•°: {{ count }}&lt;/p&gt;
    &lt;button @click="increment" class="btn"&gt;å¢åŠ &lt;/button&gt;
    &lt;button @click="decrement" class="btn"&gt;å‡å°‘&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue'

const count = ref(0)

const increment = () =&gt; count.value++
const decrement = () =&gt; count.value--
&lt;/script&gt;

&lt;style scoped&gt;
.home {
  text-align: center;
  padding: 2rem;
}

.btn {
  margin: 0 0.5rem;
  padding: 0.5rem 1rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  background: white;
  cursor: pointer;
}

.btn:hover {
  background: #f0f0f0;
}
&lt;/style&gt;
</code></pre>
<h2 data-id="heading-27">çŠ¶æ€ç®¡ç†</h2>
<h3 data-id="heading-28">1. å®‰è£… Pinia</h3>
<pre><code class="hljs language-bash" lang="bash">npm install pinia
</code></pre>
<h3 data-id="heading-29">2. é…ç½® Pinia</h3>
<p>å·²ç»åœ¨ <code>main.ts</code> ä¸­é…ç½®äº†ã€‚</p>
<h3 data-id="heading-30">3. åˆ›å»º Store</h3>
<p><code>src/stores/counter.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'counter'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)

  <span class="hljs-comment">// è®¡ç®—å±æ€§</span>
  <span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)

  <span class="hljs-comment">// åŠ¨ä½œ</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; {
    count.<span class="hljs-property">value</span>++
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">decrement</span> = (<span class="hljs-params"/>) =&gt; {
    count.<span class="hljs-property">value</span>--
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">reset</span> = (<span class="hljs-params"/>) =&gt; {
    count.<span class="hljs-property">value</span> = <span class="hljs-number">0</span>
  }

  <span class="hljs-keyword">return</span> {
    count,
    doubleCount,
    increment,
    decrement,
    reset
  }
})
</code></pre>
<h3 data-id="heading-31">4. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;è®¡æ•°: {{ counter.count }}&lt;/p&gt;
    &lt;p&gt;åŒå€: {{ counter.doubleCount }}&lt;/p&gt;
    &lt;button @click="counter.increment"&gt;+&lt;/button&gt;
    &lt;button @click="counter.decrement"&gt;-&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { useCounterStore } from '@/stores/counter'

const counter = useCounterStore()
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-32">æ ·å¼é…ç½®</h2>
<h3 data-id="heading-33">1. å…¨å±€æ ·å¼</h3>
<p><code>src/assets/main.css</code>ï¼ˆé¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯main.cssï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#app</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1280px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span>;
  <span class="hljs-attribute">font-weight</span>: normal;
}

<span class="hljs-selector-tag">a</span>,
<span class="hljs-selector-class">.green</span> {
  <span class="hljs-attribute">text-decoration</span>: none;
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">hsla</span>(<span class="hljs-number">160</span>, <span class="hljs-number">100%</span>, <span class="hljs-number">37%</span>, <span class="hljs-number">1</span>);
  <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.4s</span>;
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">hover</span>: <span class="hljs-attribute">hover</span>) {
  <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">hsla</span>(<span class="hljs-number">160</span>, <span class="hljs-number">100%</span>, <span class="hljs-number">37%</span>, <span class="hljs-number">0.2</span>);
  }
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">1024px</span>) {
  <span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">display</span>: flex;
    place-items: center;
  }

  <span class="hljs-selector-id">#app</span> {
    <span class="hljs-attribute">display</span>: grid;
    <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">2rem</span>;
  }
}
</code></pre>
<p><code>src/assets/base.css</code>ï¼š</p>
<pre><code class="hljs language-css" lang="css">*,
*<span class="hljs-selector-pseudo">::before</span>,
*<span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">html</span> {
  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, Roboto, sans-serif;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;
  -webkit-text-size-adjust: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
}

<span class="hljs-selector-tag">h1</span>, <span class="hljs-selector-tag">h2</span>, <span class="hljs-selector-tag">h3</span>, <span class="hljs-selector-tag">h4</span>, <span class="hljs-selector-tag">h5</span>, <span class="hljs-selector-tag">h6</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1rem</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.2</span>;
}

<span class="hljs-selector-tag">p</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1rem</span> <span class="hljs-number">0</span>;
}

<span class="hljs-selector-tag">a</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#007acc</span>;
  <span class="hljs-attribute">text-decoration</span>: none;
}

<span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">text-decoration</span>: underline;
}

<span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">font-family</span>: inherit;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: auto;
}
</code></pre>
<h2 data-id="heading-34">å¼€å‘å’Œæ„å»º</h2>
<h3 data-id="heading-35">1. å¼€å‘æœåŠ¡å™¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
npm run dev

<span class="hljs-comment"># æˆ–ä½¿ç”¨è‡ªå®šä¹‰ç«¯å£</span>
npm run dev -- --port 3000
</code></pre>
<h3 data-id="heading-36">2. æ„å»ºç”Ÿäº§ç‰ˆæœ¬</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ„å»ºç”Ÿäº§ç‰ˆæœ¬</span>
npm run build

<span class="hljs-comment"># é¢„è§ˆæ„å»ºç»“æœ</span>
npm run preview
</code></pre>
<h3 data-id="heading-37">3. ä»£ç æ£€æŸ¥</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»£ç æ ¼å¼åŒ–</span>
npm run format

<span class="hljs-comment"># ä»£ç æ£€æŸ¥</span>
npm run lint

<span class="hljs-comment"># ç±»å‹æ£€æŸ¥</span>
npm run type-check
</code></pre>
<h2 data-id="heading-38">éƒ¨ç½²é€‰é¡¹</h2>
<h3 data-id="heading-39">1. é™æ€ç«™ç‚¹éƒ¨ç½²</h3>
<h4 data-id="heading-40">Vercel</h4>
<pre><code class="hljs language-bash" lang="bash">npm i -g vercel
vercel
</code></pre>
<h4 data-id="heading-41">Netlify</h4>
<pre><code class="hljs language-bash" lang="bash">npm i -g netlify-cli
netlify deploy
</code></pre>
<h2 data-id="heading-42">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-43">1. ä¾èµ–å®‰è£…å¤±è´¥</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¸…ç†ç¼“å­˜</span>
npm cache clean --force
<span class="hljs-built_in">rm</span> -rf node_modules package-lock.json

<span class="hljs-comment"># ä½¿ç”¨å›½å†…é•œåƒ</span>
npm config <span class="hljs-built_in">set</span> registry https://registry.npmmirror.com

<span class="hljs-comment"># é‡æ–°å®‰è£…</span>
npm install
</code></pre>
<h3 data-id="heading-44">2. TypeScript é”™è¯¯</h3>
<p>ç¡®ä¿ <code>tsconfig.json</code> é…ç½®æ­£ç¡®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"extends"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@vue/tsconfig/tsconfig.dom.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"env.d.ts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"src/**/*"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"src/**/*.vue"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-45">3. çƒ­é‡è½½ä¸å·¥ä½œ</h3>
<p>æ£€æŸ¥ Vite é…ç½®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">hmr</span>: <span class="hljs-literal">true</span>
  }
})
</code></pre>
<h2 data-id="heading-46">æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„ Vue 3 é¡¹ç›®ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>âœ… ç°ä»£åŒ–çš„å¼€å‘å·¥å…·é“¾</li>
<li>âœ… TypeScript æ”¯æŒ</li>
<li>âœ… ç»„ä»¶åŒ–æ¶æ„</li>
<li>âœ… çŠ¶æ€ç®¡ç†</li>
<li>âœ… è·¯ç”±ç³»ç»Ÿ</li>
<li>âœ… ä»£ç è§„èŒƒ</li>
<li>âœ… é™æ€ç«™ç‚¹éƒ¨ç½²</li>
</ul>
<p>è¿™ä¸ªé¡¹ç›®ç»“æ„å¯ä»¥ä½œä¸ºä½ å¼€å‘ Vue 3 åº”ç”¨çš„èµ·ç‚¹ã€‚æ ¹æ®å®é™…éœ€æ±‚ï¼Œä½ å¯ä»¥ç»§ç»­æ·»åŠ æ›´å¤šåŠŸèƒ½ï¼Œå¦‚å›½é™…åŒ–ã€æƒé™ç®¡ç†ã€æ•°æ®å¯è§†åŒ–ç­‰ã€‚</p>
<h2 data-id="heading-47">èµ„æºé“¾æ¥</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2F" target="_blank" title="https://vuejs.org/" ref="nofollow noopener noreferrer">Vue 3 å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvitejs.dev%2F" target="_blank" title="https://vitejs.dev/" ref="nofollow noopener noreferrer">Vite å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2F" target="_blank" title="https://router.vuejs.org/" ref="nofollow noopener noreferrer">Vue Router æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpinia.vuejs.org%2F" target="_blank" title="https://pinia.vuejs.org/" ref="nofollow noopener noreferrer">Pinia æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.typescriptlang.org%2F" target="_blank" title="https://www.typescriptlang.org/" ref="nofollow noopener noreferrer">TypeScript æ–‡æ¡£</a></li>
</ul>
<hr/>
<p><strong>å‘å¸ƒæ—¶é—´</strong>: 2026å¹´1æœˆ
<strong>æŠ€æœ¯æ ‡ç­¾</strong>: Vue.js, TypeScript, Vite, å‰ç«¯å¼€å‘</p>
<p>å¸Œæœ›è¿™ç¯‡æ•™ç¨‹å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœæœ‰é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ scrollIntoView åœ¨ Android ä¼å¾®ä¸­å¤±æ•ˆçš„è¸©å‘å®å½•]]></title>    <link>https://juejin.cn/post/7599017594519814170</link>    <guid>https://juejin.cn/post/7599017594519814170</guid>    <pubDate>2026-01-26T00:20:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599017594519814170" data-draft-id="7597946284678397971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ scrollIntoView åœ¨ Android ä¼å¾®ä¸­å¤±æ•ˆçš„è¸©å‘å®å½•"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,Vant"/> <meta itemprop="datePublished" content="2026-01-26T00:20:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zhEng"/> <meta itemprop="url" content="https://juejin.cn/user/4398498737560861"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ scrollIntoView åœ¨ Android ä¼å¾®ä¸­å¤±æ•ˆçš„è¸©å‘å®å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4398498737560861/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zhEng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T00:20:23.000Z" title="Mon Jan 26 2026 00:20:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>è¿™æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥â€œç†æ‰€å½“ç„¶â€ï¼Œå´è¶³ä»¥è®©ä½ æ€€ç–‘äººç”Ÿçš„Bugã€‚</strong></p>
<p>å®ƒä¸ä¼šåœ¨ä½ æœ¬åœ°å‡ºç°ï¼Œä¸ä¼šåœ¨ iOS ä¸Šå‡ºç°ï¼Œç”šè‡³åœ¨å¤§å¤šæ•° Android æµè§ˆå™¨ä¸Šä¹Ÿâ€œè¡¨ç°æ­£å¸¸â€ã€‚</p>
<p>ä½†å®ƒä¼šåœ¨ <strong>Android ä¼ä¸šå¾®ä¿¡</strong> é‡Œï¼Œæ‚„æ— å£°æ¯åœ°è®©ä½ çš„é¡µé¢â€”â€” æ»šåŠ¨ä¸åˆ°æŒ‡å®šä½ç½®</p>
</blockquote>
<h2 data-id="heading-0">1ã€äº‹æƒ…çš„èµ·ç‚¹ï¼šä¸€ä¸ªå†æ­£å¸¸ä¸è¿‡çš„éœ€æ±‚</h2>
<p>æ•…äº‹è¦ä»ä¸€ä¸ª<strong>ç§»åŠ¨ç«¯é¡¹ç›®</strong>è¯´èµ·ã€‚</p>
<p>é¡µé¢å¾ˆå¸¸è§ï¼š</p>
<ul>
<li>ä½¿ç”¨ <strong>Vant ç»„ä»¶åº“</strong></li>
<li>ä¸€ä¸ª <code>Form</code> è¡¨å•</li>
<li>è‹¥å¹²ä¸ªè¾“å…¥é¡¹</li>
</ul>
<p>éœ€æ±‚ä¹Ÿå¾ˆå¸¸è§ï¼š</p>
<blockquote>
<p>æäº¤è¡¨å•æ—¶è§¦å‘æ ¡éªŒï¼Œæ ¡éªŒå¤±è´¥å°±è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„è¡¨å•é¡¹ä½ç½®ã€‚</p>
</blockquote>
<p>åšè¿‡ PC æˆ–ç§»åŠ¨ç«¯è¡¨å•çš„äººéƒ½çŸ¥é“ï¼Œè¿™å‡ ä¹æ˜¯â€œæ ‡é…èƒ½åŠ›â€ã€‚</p>
<p>åœ¨ Vant ä¸­ï¼Œå¯¹åº”çš„å®ç°è·¯å¾„ä¹Ÿéå¸¸æ¸…æ™°ï¼Œæ ¡éªŒå¤±è´¥åï¼Œè°ƒç”¨æ»šåŠ¨æ–¹æ³•</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> formRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">()=&gt;</span> {
    <span class="hljs-comment">// TODO</span>
}).<span class="hljs-title function_">cathc</span>(<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span> {
    <span class="hljs-keyword">const</span> name = err?.[<span class="hljs-number">0</span>]?.<span class="hljs-property">name</span> ?? <span class="hljs-string">''</span>;
    name &amp;&amp; formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">scrollToField</span>(name)
})
</code></pre>
<p>åœ¨ <strong>PC ç«¯</strong>ï¼Œè¿™ç§ä½“éªŒç”šè‡³å·²ç»â€œç†æ‰€å½“ç„¶â€ã€‚</p>
<h2 data-id="heading-1">2ã€æµ‹è¯•çš„ä¸€å¥è¯ï¼Œè®©äº‹æƒ…å¼€å§‹å˜å‘³</h2>
<p>ææµ‹ä¹‹åï¼Œæµ‹è¯•å°å§å§æäº†ä¸€ä¸ª<strong>éå¸¸åˆç†ã€ä¹Ÿéå¸¸äººæ€§åŒ–çš„å»ºè®®</strong>ï¼š</p>
<blockquote>
<p>ã€Œç°åœ¨æ»šåŠ¨æ˜¯ç¬é—´è·³è¿‡å»çš„ï¼Œèƒ½ä¸èƒ½åŠ ä¸ªè¿‡æ¸¡ï¼Ÿçœ‹èµ·æ¥æœ‰ç‚¹ç”Ÿç¡¬ã€‚ã€</p>
</blockquote>
<p>å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼ŸğŸ‘‰ <strong>â€œåŠ ä¸ªå¹³æ»‘æ»šåŠ¨è€Œå·²ã€‚â€</strong></p>
<p>æˆ‘ç¬¬ä¸€æ—¶é—´ç¿»äº† <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fvant-ui.github.io%2Fvant%2F%23%2Fzh-CN%2Fform" target="_blank" title="https://vant-ui.github.io/vant/#/zh-CN/form" ref="nofollow noopener noreferrer">Vant å®˜æ–¹æ–‡æ¡£</a></strong>ã€‚</p>
<p>æ–‡æ¡£é‡Œå¯¹ <code>scrollToField</code> çš„æè¿°æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc9e2460f5a240d595262201a4501103~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemhFbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769991623&amp;x-signature=2moLcqwkbdEnyDVT2XEdfMB3WQM%3D" alt="image.png" loading="lazy"/></p>
<p>ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">scrollToField</span>(<span class="hljs-attr">name</span>: string, alignToTop?: boolean)
</code></pre>
<p>ä½†é—®é¢˜åœ¨äºï¼š</p>
<ul>
<li>æ–‡æ¡£<strong>æ²¡æœ‰æ</strong>å¹³æ»‘æ»šåŠ¨</li>
<li>ä¹Ÿ<strong>æ²¡æœ‰æ</strong>æ˜¯å¦æ”¯æŒæ›´å¤æ‚çš„æ»šåŠ¨é…ç½®</li>
</ul>
<p>ä¸è¿‡ï¼Œä½œä¸ºä¸€ä¸ªä¹ æƒ¯ <strong>â€œä¸å®Œå…¨ç›¸ä¿¡æ–‡æ¡£â€çš„å‰ç«¯</strong>ï¼Œæˆ‘åšäº†ä¸€ä»¶å¾ˆè‡ªç„¶çš„äº‹â€”â€”ğŸ‘‰ <strong>å»çœ‹æºç ã€‚</strong></p>
<h2 data-id="heading-2">3ã€æºç ä¸€çœ‹ï¼šè¿™ä¸å°±æœ‰æˆäº†å—ï¼Ÿ</h2>
<p>åœ¨ Vant çš„æºç é‡Œï¼Œæˆ‘å¾ˆå¿«æ‰¾åˆ°äº†å®ç°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// packages/vant/src/form/Form.tsx</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollToField</span> = (<span class="hljs-params">
  name: string,
  options?: boolean | ScrollIntoViewOptions,
</span>) =&gt; {
  children.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">name</span> === name) {
      item.<span class="hljs-property">$el</span>.<span class="hljs-title function_">scrollIntoView</span>(options);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  });
};
</code></pre>
<p>çœ‹åˆ°è¿™é‡Œï¼Œå¥½å®¶ä¼™ï¼Œè¿™ä¸æ˜¯ç›´æ¥é€ä¼  <code>scrollIntoView</code> å—ï¼Ÿ</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<ul>
<li>ä¸ä»…èƒ½ä¼  <code>boolean</code></li>
<li>è¿˜èƒ½ç›´æ¥ä¼  <code>ScrollIntoViewOptions</code></li>
</ul>
<p>é‚£äº‹æƒ…å°±ç®€å•äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> formRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">()=&gt;</span> {
    <span class="hljs-comment">// TODO æ ¡éªŒé€šè¿‡</span>
}).<span class="hljs-title function_">cathc</span>(<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span> {
    <span class="hljs-keyword">const</span> name = err?.[<span class="hljs-number">0</span>]?.<span class="hljs-property">name</span> ?? <span class="hljs-string">''</span>;
    name &amp;&amp; formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">scrollToField</span>(name, {
      <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>,
      <span class="hljs-attr">block</span>: <span class="hljs-string">'center'</span>
    })
});
</code></pre>
<p>æœ¬åœ°ä¸€æµ‹ï¼š</p>
<ul>
<li>âœ… æ»šåŠ¨é¡ºæ»‘</li>
<li>âœ… å±…ä¸­å±•ç¤º</li>
<li>âœ… ä½“éªŒæ˜æ˜¾æå‡</li>
</ul>
<h2 data-id="heading-3">4ã€Bug æ¥äº†ï¼Œè€Œä¸”æ¥å¾—å¾ˆâ€œå®‰é™â€</h2>
<p>æ²¡è¿‡å¤šä¹…ï¼Œæµ‹è¯•å°å§å§æäº†ä¸€ä¸ª Bugã€‚</p>
<p>æè¿°éå¸¸ç®€çŸ­ï¼š</p>
<blockquote>
<p>ã€Œ ç°åœ¨è§¦å‘æ ¡éªŒä¹‹åï¼Œé¡µé¢å¥½åƒæ»šåŠ¨ä¸è¿‡å»äº† ã€</p>
</blockquote>
<p>æˆ‘ç¬¬ä¸€ååº”æ˜¯ï¼š</p>
<blockquote>
<p>ä¸å¯èƒ½å§ï¼Ÿæˆ‘åˆšåˆšè¿˜æµ‹è¿‡ã€‚</p>
</blockquote>
<p>äºæ˜¯æˆ‘æ‹¿èµ·ï¼ŒğŸ <strong>iPhone 16 Pro</strong> æ‰‹æœºï¼Œç‚¹å‡»è¡¨å•æäº¤æŒ‰é’®ï¼Œè§¦å‘æ ¡éªŒ</p>
<ul>
<li>ä¸€åˆ‡æ­£å¸¸</li>
<li>å¹³æ»‘æ»šåŠ¨</li>
<li>å®šä½ç²¾å‡†</li>
</ul>
<p>ğŸ¤” <strong>æˆ‘å¿ƒæƒ³ï¼š</strong></p>
<blockquote>
<p>é‚£è¿™æ˜¯å•¥é—®é¢˜ï¼Ÿã€Œ äºæ˜¯æˆ‘æ¢äº†æµ‹è¯•åŒæ¬¾æ‰‹æœº ã€</p>
</blockquote>
<p><strong>çœŸå‡¶ç°èº«ï¼šAndroid + ä¼ä¸šå¾®ä¿¡</strong> æµ‹è¯•ç¯å¢ƒå¤ç°æ¡ä»¶é€æ¸æ¸…æ™°ï¼š</p>
<ul>
<li><strong>Android æ‰‹æœº</strong></li>
<li><strong>ä¼ä¸šå¾®ä¿¡å†…ç½®æµè§ˆå™¨</strong></li>
<li>ç‰¹å®šç³»ç»Ÿç‰ˆæœ¬</li>
</ul>
<p>å…³é”®ä¿¡æ¯æœ€ç»ˆé”å®šä¸ºï¼š</p>
<ul>
<li>MagicOS 8.0ï¼ˆè£è€€ / åä¸ºç³»ï¼ŒåŸºäº Android 14ï¼‰</li>
<li>ä¼ä¸šå¾®ä¿¡ 5.0.3 ï¼ˆå†…ç½® X5 / ç³»ç»Ÿ WebViewï¼‰</li>
</ul>
<p>ç°è±¡ä¹Ÿéå¸¸â€œè¯¡å¼‚â€ï¼š</p>
<ul>
<li><code>scrollToField</code> <strong>è¢«è°ƒç”¨äº†</strong></li>
<li>é¡µé¢<strong>æ²¡æœ‰ä»»ä½•æŠ¥é”™</strong></li>
<li>ä½†é¡µé¢å°±æ˜¯<strong>æ²¡æœ‰æ»šåŠ¨</strong></li>
</ul>
<h2 data-id="heading-4">5ã€çœŸç›¸ï¼šAndroid WebView å¹¶ä¸â€œè®²æ­¦å¾·â€</h2>
<p>æ·±å…¥æ’æŸ¥åï¼Œé—®é¢˜é€æ¸æ˜æœ—ï¼š</p>
<p><strong>(1)Android WebView å¯¹ <code>scrollIntoView</code> æ”¯æŒå¹¶ä¸å®Œæ•´</strong></p>
<p>åœ¨ Android WebView / X5 å†…æ ¸ ä¸­ï¼š</p>
<ul>
<li>âœ… <code>scrollIntoView()</code> åŸºæœ¬å¯ç”¨</li>
<li>âŒ <code>block: 'center'</code> ç»å¸¸è¢«å¿½ç•¥</li>
<li>âŒ <code>behavior: 'smooth'</code> åœ¨å¤æ‚å¸ƒå±€ä¸­ï¼Œä¼šè¢«æ‰“æ–­æˆ–å¤±æ•ˆ</li>
</ul>
<p><strong>(2) ä¼ä¸šå¾®ä¿¡ Android ç«¯ä¸æ˜¯â€œçº¯æµè§ˆå™¨â€</strong></p>
<p>ä¼ä¸šå¾®ä¿¡ Android ç«¯ï¼š</p>
<ul>
<li>ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿ WebView æˆ– X5 å†…æ ¸</li>
<li>æ»šåŠ¨æ˜¯åŸç”Ÿ + JS æ··åˆå®ç°</li>
<li>smooth æ»šåŠ¨æœ‰ã€Œ<strong>åŠ¨ç”»è¢«ä¸­æ–­</strong>ã€çš„æƒ…å†µ</li>
</ul>
<p>è€Œ iOS WKWebViewï¼š</p>
<ul>
<li>å¯¹ <code>scrollIntoView({ block: 'center' })</code> æ”¯æŒæ˜¯è§„èŒƒçº§åˆ«çš„</li>
<li>æ»šåŠ¨è®¡ç®—éå¸¸ç¨³å®š</li>
</ul>
<p>ğŸ‘‰ æ‰€ä»¥çœ‹åˆ°çš„æ˜¯ï¼šã€Œ è‹¹æœï¼šå®Œç¾  ;  å®‰å“ï¼šç„å­¦ ã€</p>
<p><strong>ï¼ˆ3ï¼‰Android å¯¹ã€Œcenterã€çš„è®¡ç®—æœ‰ Bugï¼ˆå°¤å…¶ Android 13+ï¼‰</strong></p>
<p>åœ¨ Android 12+ï¼Œç‰¹åˆ«æ˜¯ 14ï¼š</p>
<ul>
<li><code>block: 'center'</code> çš„ä¸­å¿ƒç‚¹</li>
<li>ä¼š<strong>å¿½ç•¥æ»šåŠ¨å®¹å™¨ padding</strong></li>
<li>æˆ–é”™è¯¯ä½¿ç”¨ <code>offsetParent</code></li>
</ul>
<p>è¿™åœ¨ <strong>ä¼å¾® + MagicOS</strong> ç»„åˆä¸‹éå¸¸å®¹æ˜“è§¦å‘ã€‚</p>
<h2 data-id="heading-5">6ã€æœ€ç»ˆæ–¹æ¡ˆï¼šåˆ«å†æŒ‡æœ› scrollIntoView äº†</h2>
<p>é—®é¢˜æ˜ç¡®åï¼Œè§£å†³æ€è·¯ä¹Ÿå°±æ¸…æ™°äº†ã€‚</p>
<p><strong>æ–¹æ¡ˆä¸€ï¼šAndroid ç«¯ä¸ä½¿ç”¨ <code>smooth</code></strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> isAndroid = <span class="hljs-regexp">/Android/i</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-property">userAgent</span>);

element.<span class="hljs-title function_">scrollIntoView</span>({
  <span class="hljs-attr">behavior</span>: isAndroid ? <span class="hljs-string">'auto'</span> : <span class="hljs-string">'smooth'</span>,
  <span class="hljs-attr">block</span>: <span class="hljs-string">'center'</span>
});
</code></pre>
<p><strong>æ–¹æ¡ˆäºŒï¼ˆæœ€ç¨³ï¼‰ï¼šè‡ªå·±è®¡ç®—æ»šåŠ¨è·ç¦»</strong></p>
<p>æ ¸å¿ƒæ€æƒ³åªæœ‰ä¸€å¥è¯ï¼š <strong>è‡ªå·±ç®— <code>scrollTop</code>ï¼Œåˆ«æŠŠå‘½è¿äº¤ç»™ WebViewã€‚</strong></p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * å°†ç›®æ ‡å…ƒç´ æ»šåŠ¨åˆ°å®¹å™¨ä¸­é—´
 * <span class="hljs-doctag">@param</span> container æ»šåŠ¨å…ƒç´ 
 * <span class="hljs-doctag">@param</span> target ç›®æ ‡å…ƒç´ 
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollToCenter</span>(container, target) =&gt; {
  <span class="hljs-keyword">const</span> containerRect = container.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">const</span> targetRect = target.<span class="hljs-title function_">getBoundingClientRect</span>();

  <span class="hljs-keyword">const</span> offset =
    targetRect.<span class="hljs-property">top</span> -
    containerRect.<span class="hljs-property">top</span> -
    container.<span class="hljs-property">clientHeight</span> / <span class="hljs-number">2</span> +
    target.<span class="hljs-property">clientHeight</span> / <span class="hljs-number">2</span>;

  container.<span class="hljs-title function_">scrollTo</span>({
    <span class="hljs-attr">top</span>: container.<span class="hljs-property">scrollTop</span> + offset,
    <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>
  });
}
</code></pre>
<p>usage</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> formRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">()=&gt;</span> {
    <span class="hljs-comment">// TODO æ ¡éªŒé€šè¿‡</span>
}).<span class="hljs-title function_">cathc</span>(<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span> {
    <span class="hljs-keyword">const</span> name = err?.[<span class="hljs-number">0</span>]?.<span class="hljs-property">name</span> ?? <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>);
    <span class="hljs-keyword">const</span> target = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">'van-field__error-message'</span>)?.[<span class="hljs-number">0</span>]
    <span class="hljs-title function_">scrollToCenter</span>(container, target);
});
</code></pre>
<p>ä¸Šçº¿æµ‹è¯•ï¼š</p>
<ul>
<li>âœ… Android ä¼ä¸šå¾®ä¿¡</li>
<li>âœ… iOS</li>
<li>âœ… æœ¬åœ°æµè§ˆå™¨</li>
</ul>
<p><strong>å…¨éƒ¨é€šè¿‡ã€‚</strong></p>
<p>æµ‹è¯•å°å§å§ç»™äº†ä¸€ä¸ªè¯„ä»·ï¼šã€Œè¿™æ¬¡çš„ä½“éªŒå¾ˆå¥½ ğŸ‘ã€ é‚£ä¸€åˆ»ï¼ŒçœŸçš„å€¼äº†ã€‚</p>
<h2 data-id="heading-6">7ã€è¸©å‘æ€»ç»“</h2>
<p>å¦‚æœä½ ä¹Ÿåœ¨åšç±»ä¼¼çš„äº‹æƒ…ï¼Œå»ºè®®ç›´æ¥æ”¶è—ï¼š</p>
<ul>
<li>
<p>ä¸è¦åœ¨ Android ä¼ä¸šå¾®ä¿¡ä¸­è¿‡åº¦ä¾èµ– <code>scrollIntoView</code> çš„é«˜çº§é…ç½®é¡¹</p>
</li>
<li>
<p>å°¤å…¶æ˜¯ï¼š</p>
<ul>
<li><code>behavior: 'smooth'</code></li>
<li><code>block: 'center'</code></li>
</ul>
</li>
<li>
<p><strong>iOS æ­£å¸¸ â‰  ä»£ç åœ¨æ‰€æœ‰ç¯å¢ƒéƒ½æ­£ç¡®</strong></p>
</li>
</ul>
<p>è¿™ç±»é—®é¢˜çš„æœ¬è´¨å¾€å¾€ä¸æ˜¯ï¼š</p>
<blockquote>
<p>ä½ å†™é”™äº†ä»£ç *ï¼Œ</p>
</blockquote>
<p>è€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>ä½ åˆšå¥½è¸©åˆ°äº† WebView çš„èƒ½åŠ›è¾¹ç•Œäº†ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HagiCode å®è·µï¼šå¦‚ä½•åˆ©ç”¨ GitHub Actions å®ç° Docusaurus è‡ªåŠ¨éƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7599268297202384934</link>    <guid>https://juejin.cn/post/7599268297202384934</guid>    <pubDate>2026-01-26T00:56:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599268297202384934" data-draft-id="7599094262592192522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HagiCode å®è·µï¼šå¦‚ä½•åˆ©ç”¨ GitHub Actions å®ç° Docusaurus è‡ªåŠ¨éƒ¨ç½²"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-26T00:56:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="newbe36524"/> <meta itemprop="url" content="https://juejin.cn/user/2682464104098654"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HagiCode å®è·µï¼šå¦‚ä½•åˆ©ç”¨ GitHub Actions å®ç° Docusaurus è‡ªåŠ¨éƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464104098654/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    newbe36524
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T00:56:23.000Z" title="Mon Jan 26 2026 00:56:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸º HagiCode æ·»åŠ  GitHub Pages è‡ªåŠ¨éƒ¨ç½²æ”¯æŒ</h2>
<blockquote>
<p>æœ¬é¡¹ç›®æ—©æœŸä»£å·ä¸º PCodeï¼Œç°å·²æ­£å¼æ›´åä¸º HagiCodeã€‚æœ¬æ–‡è®°å½•äº†å¦‚ä½•ä¸ºé¡¹ç›®å¼•å…¥è‡ªåŠ¨åŒ–é™æ€ç«™ç‚¹éƒ¨ç½²èƒ½åŠ›ï¼Œè®©å†…å®¹å‘å¸ƒåƒå–æ°´ä¸€æ ·ç®€å•ã€‚</p>
</blockquote>

<h3 data-id="heading-1">èƒŒæ™¯/å¼•è¨€</h3>
<p>åœ¨ HagiCode çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªå¾ˆç°å®çš„é—®é¢˜ï¼šéšç€æ–‡æ¡£å’Œææ¡ˆè¶Šæ¥è¶Šå¤šï¼Œå¦‚ä½•é«˜æ•ˆåœ°ç®¡ç†å’Œå±•ç¤ºè¿™äº›å†…å®¹æˆäº†å½“åŠ¡ä¹‹æ€¥ã€‚æˆ‘ä»¬å†³å®šå¼•å…¥ GitHub Pages æ¥æ‰˜ç®¡æˆ‘ä»¬çš„é™æ€ç«™ç‚¹ï¼Œä½†æ˜¯æ‰‹åŠ¨æ„å»ºå’Œéƒ¨ç½²å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†â€”â€”æ¯æ¬¡æ”¹åŠ¨éƒ½è¦æœ¬åœ°æ„å»ºã€æ‰“åŒ…ï¼Œç„¶åæ‰‹åŠ¨æ¨é€åˆ° <code>gh-pages</code> åˆ†æ”¯ã€‚è¿™ä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆä¸»è¦æ˜¯ä¸ºäº†å·æ‡’ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—è‡ªåŠ¨åŒ–çš„éƒ¨ç½²æµç¨‹ã€‚æœ¬æ–‡å°†è¯¦ç»†è®°å½•å¦‚ä½•ä¸º HagiCode é¡¹ç›®æ·»åŠ  GitHub Actions è‡ªåŠ¨éƒ¨ç½²æ”¯æŒï¼Œè®©æˆ‘ä»¬åªéœ€ä¸“æ³¨äºå†…å®¹åˆ›ä½œï¼Œå‰©ä¸‹çš„äº¤ç»™è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
<h3 data-id="heading-2">å…³äº HagiCode</h3>
<blockquote>
<p>å˜¿ï¼Œä»‹ç»ä¸€ä¸‹æˆ‘ä»¬æ­£åœ¨åšçš„ä¸œè¥¿</p>
</blockquote>
<p>æˆ‘ä»¬æ­£åœ¨å¼€å‘ <strong>HagiCode</strong>â€”â€”ä¸€æ¬¾ AI é©±åŠ¨çš„ä»£ç æ™ºèƒ½åŠ©æ‰‹ï¼Œè®©å¼€å‘ä½“éªŒå˜å¾—æ›´æ™ºèƒ½ã€æ›´ä¾¿æ·ã€æ›´æœ‰è¶£ã€‚</p>
<p><strong>æ™ºèƒ½</strong>â€”â€”AI å…¨ç¨‹è¾…åŠ©ï¼Œä»æƒ³æ³•åˆ°ä»£ç ï¼Œè®©ç¼–ç æ•ˆç‡æå‡æ•°å€ã€‚<strong>ä¾¿æ·</strong>â€”â€”å¤šçº¿ç¨‹å¹¶å‘æ“ä½œï¼Œå……åˆ†åˆ©ç”¨èµ„æºï¼Œå¼€å‘æµç¨‹é¡ºç•…æ— é˜»ã€‚<strong>æœ‰è¶£</strong>â€”â€”æ¸¸æˆåŒ–æœºåˆ¶å’Œæˆå°±ç³»ç»Ÿï¼Œè®©ç¼–ç ä¸å†æ¯ç‡¥ï¼Œå……æ»¡æˆå°±æ„Ÿã€‚</p>
<p>é¡¹ç›®æ­£åœ¨å¿«é€Ÿè¿­ä»£ä¸­ï¼Œå¦‚æœä½ å¯¹æŠ€æœ¯å†™ä½œã€çŸ¥è¯†ç®¡ç†æˆ–è€… AI è¾…åŠ©å¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿æ¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHagiCode-org%2Fsite" target="_blank" title="https://github.com/HagiCode-org/site" ref="nofollow noopener noreferrer">GitHub</a> çœ‹çœ‹ï½</p>
<h3 data-id="heading-3">ç›®æ ‡åˆ†æ</h3>
<p>åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆæ˜ç¡®è¿™æ¬¡ä»»åŠ¡åˆ°åº•è¦å¹²å•¥ã€‚æ¯•ç«Ÿç£¨åˆ€ä¸è¯¯ç æŸ´å·¥å˜›ã€‚</p>
<h4 data-id="heading-4">æ ¸å¿ƒéœ€æ±‚</h4>
<ol>
<li><strong>è‡ªåŠ¨åŒ–æ„å»º</strong>ï¼šå½“ä»£ç æ¨é€åˆ° <code>main</code> åˆ†æ”¯æ—¶ï¼Œè‡ªåŠ¨è§¦å‘æ„å»ºæµç¨‹ã€‚</li>
<li><strong>è‡ªåŠ¨éƒ¨ç½²</strong>ï¼šæ„å»ºæˆåŠŸåï¼Œè‡ªåŠ¨å°†ç”Ÿæˆçš„é™æ€æ–‡ä»¶éƒ¨ç½²åˆ° GitHub Pagesã€‚</li>
<li><strong>ç¯å¢ƒä¸€è‡´æ€§</strong>ï¼šç¡®ä¿ CI ç¯å¢ƒå’Œæœ¬åœ°æ„å»ºç¯å¢ƒä¸€è‡´ï¼Œé¿å…"æœ¬åœ°èƒ½è·‘ï¼Œçº¿ä¸ŠæŠ¥é”™"çš„å°´å°¬ã€‚</li>
</ol>
<h4 data-id="heading-5">æŠ€æœ¯é€‰å‹</h4>
<p>è€ƒè™‘åˆ° HagiCode æ˜¯åŸºäº Docusaurus æ„å»ºçš„ï¼ˆä¸€ç§éå¸¸æµè¡Œçš„ React é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ GitHub Actions æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚</p>
<h3 data-id="heading-6">é…ç½® GitHub Actions å·¥ä½œæµ</h3>
<p>GitHub Actions æ˜¯ GitHub æä¾›çš„ CI/CD æœåŠ¡ã€‚é€šè¿‡åœ¨ä»£ç ä»“åº“ä¸­å®šä¹‰ YAML æ ¼å¼çš„å·¥ä½œæµæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å®šåˆ¶å„ç§è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-7">åˆ›å»ºå·¥ä½œæµæ–‡ä»¶</h4>
<p>æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>.github/workflows</code> æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚å« <code>deploy.yml</code>ã€‚å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œè®°å¾—å…ˆæ‰‹åŠ¨åˆ›å»ºä¸€ä¸‹ã€‚</p>
<p>è¿™ä¸ªé…ç½®æ–‡ä»¶çš„æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šç›‘å¬ <code>main</code> åˆ†æ”¯çš„ <code>push</code> äº‹ä»¶ã€‚</li>
<li><strong>è¿è¡Œç¯å¢ƒ</strong>ï¼šæœ€æ–°ç‰ˆçš„ Ubuntuã€‚</li>
<li><strong>æ„å»ºæ­¥éª¤</strong>ï¼š
<ul>
<li>æ£€å‡ºä»£ç </li>
<li>å®‰è£… Node.js</li>
<li>å®‰è£…ä¾èµ– (<code>npm install</code>)</li>
<li>æ„å»ºé™æ€æ–‡ä»¶ (<code>npm run build</code>)</li>
</ul>
</li>
<li><strong>éƒ¨ç½²æ­¥éª¤</strong>ï¼šä½¿ç”¨å®˜æ–¹æä¾›çš„ <code>action-gh-pages</code> å°†æ„å»ºäº§ç‰©æ¨é€åˆ° <code>gh-pages</code> åˆ†æ”¯ã€‚</li>
</ol>
<h4 data-id="heading-8">å…³é”®é…ç½®ä»£ç </h4>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬æœ€ç»ˆé‡‡ç”¨çš„é…ç½®æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span>

<span class="hljs-comment"># è§¦å‘æ¡ä»¶ï¼šå½“æ¨é€åˆ° main åˆ†æ”¯æ—¶</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>
    <span class="hljs-comment"># å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ è·¯å¾„è¿‡æ»¤ï¼Œæ¯”å¦‚åªæœ‰æ–‡æ¡£å˜åŠ¨æ‰æ„å»º</span>
    <span class="hljs-comment"># paths:</span>
    <span class="hljs-comment">#   - 'docs/**'</span>
    <span class="hljs-comment">#   - 'package.json'</span>

<span class="hljs-comment"># è®¾ç½®æƒé™ï¼Œè¿™å¯¹äºéƒ¨ç½²åˆ° GitHub Pages å¾ˆé‡è¦</span>
<span class="hljs-attr">permissions:</span>
  <span class="hljs-attr">contents:</span> <span class="hljs-string">read</span>
  <span class="hljs-attr">pages:</span> <span class="hljs-string">write</span>
  <span class="hljs-attr">id-token:</span> <span class="hljs-string">write</span>

<span class="hljs-comment"># å¹¶å‘æ§åˆ¶ï¼šå–æ¶ˆåŒä¸€åˆ†æ”¯çš„æ—§æ„å»º</span>
<span class="hljs-attr">concurrency:</span>
  <span class="hljs-attr">group:</span> <span class="hljs-string">"pages"</span>
  <span class="hljs-attr">cancel-in-progress:</span> <span class="hljs-literal">false</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>
        <span class="hljs-comment"># æ³¨æ„ï¼šå¿…é¡»è®¾ç½® fetch-depth: 0ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ„å»ºç‰ˆæœ¬å·ä¸å‡†ç¡®</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">fetch-depth:</span> <span class="hljs-number">0</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v4</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-number">20</span> <span class="hljs-comment"># å»ºè®®ä¸æœ¬åœ°å¼€å‘ç¯å¢ƒä¿æŒä¸€è‡´</span>
          <span class="hljs-attr">cache:</span> <span class="hljs-string">'npm'</span>     <span class="hljs-comment"># å¯ç”¨ç¼“å­˜å¯ä»¥åŠ é€Ÿæ„å»ºè¿‡ç¨‹</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">dependencies</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span>
        <span class="hljs-comment"># ä½¿ç”¨ npm ci è€Œä¸æ˜¯ npm installï¼Œå› ä¸ºå®ƒæ›´å¿«ã€æ›´ä¸¥æ ¼ï¼Œé€‚åˆ CI ç¯å¢ƒ</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">website</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">build</span>
        <span class="hljs-attr">env:</span>
          <span class="hljs-comment"># å¦‚æœä½ çš„ç«™ç‚¹æ„å»ºéœ€è¦ç¯å¢ƒå˜é‡ï¼Œåœ¨è¿™é‡Œé…ç½®</span>
          <span class="hljs-comment"># NODE_ENV: production</span>
          <span class="hljs-comment"># PUBLIC_URL: /your-repo-name</span>
          
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Upload</span> <span class="hljs-string">artifact</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-pages-artifact@v3</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">path:</span> <span class="hljs-string">./build</span> <span class="hljs-comment"># Docusaurus é»˜è®¤è¾“å‡ºç›®å½•</span>

  <span class="hljs-attr">deploy:</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">github-pages</span>
      <span class="hljs-attr">url:</span> <span class="hljs-string">${{</span> <span class="hljs-string">steps.deployment.outputs.page_url</span> <span class="hljs-string">}}</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">needs:</span> <span class="hljs-string">build</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span>
        <span class="hljs-attr">id:</span> <span class="hljs-string">deployment</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/deploy-pages@v4</span>
</code></pre>
<h3 data-id="heading-9">å®æ–½è¿‡ç¨‹ä¸­çš„å‘ç‚¹</h3>
<p>åœ¨å®é™…æ“ä½œä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè¿™é‡Œåˆ†äº«å‡ºæ¥å¸Œæœ›å¤§å®¶èƒ½é¿å¼€ï¼ˆæˆ–è€…æå‰å‡†å¤‡å¥½è§£å†³æ–¹æ¡ˆï¼‰ã€‚</p>
<h4 data-id="heading-10">1. GitHub Token æƒé™é—®é¢˜</h4>
<p>æœ€å¼€å§‹é…ç½®çš„æ—¶å€™ï¼Œéƒ¨ç½²æ€»æ˜¯æŠ¥é”™ 403 (Forbidden)ã€‚æŸ¥äº†å¥½ä¹…æ‰å‘ç°ï¼Œæ˜¯å› ä¸º GitHub é»˜è®¤çš„ <code>GITHUB_TOKEN</code> å¹¶æ²¡æœ‰å†™å…¥ Pages çš„æƒé™ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨ä»“åº“çš„ <code>Settings</code> -&gt; <code>Actions</code> -&gt; <code>General</code> -&gt; <code>Workflow permissions</code> ä¸­ï¼ŒåŠ¡å¿…é€‰æ‹© <strong>"Read and write permissions"</strong>ã€‚</p>
<h4 data-id="heading-11">2. æ„å»ºç›®å½•è·¯å¾„é”™è¯¯</h4>
<p>Docusaurus é»˜è®¤æŠŠæ„å»ºå¥½çš„é™æ€æ–‡ä»¶æ”¾åœ¨ <code>build</code> ç›®å½•ã€‚ä½†æ˜¯æœ‰äº›é¡¹ç›®ï¼ˆæ¯”å¦‚ Create React App é»˜è®¤æ˜¯ <code>build</code>ï¼ŒVite é»˜è®¤æ˜¯ <code>dist</code>ï¼‰å¯èƒ½é…ç½®ä¸ä¸€æ ·ã€‚å¦‚æœåœ¨ Actions ä¸­æŠ¥é”™æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œè®°å¾—å» <code>docusaurus.config.js</code> é‡Œæ£€æŸ¥ä¸€ä¸‹è¾“å‡ºè·¯å¾„é…ç½®ã€‚</p>
<h4 data-id="heading-12">3. å­è·¯å¾„é—®é¢˜</h4>
<p>å¦‚æœä½ çš„ä»“åº“ä¸æ˜¯ç”¨æˆ·ä¸»é¡µï¼ˆå³ä¸æ˜¯ <code>username.github.io</code>ï¼‰ï¼Œè€Œæ˜¯é¡¹ç›®ä¸»é¡µï¼ˆæ¯”å¦‚ <code>username.github.io/project-name</code>ï¼‰ï¼Œä½ éœ€è¦é…ç½® <code>baseUrl</code>ã€‚</p>
<p>åœ¨ <code>docusaurus.config.js</code> ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">url</span>: <span class="hljs-string">'https://HagiCode-org.github.io'</span>, <span class="hljs-comment">// ä½ çš„ GitHub URL</span>
  <span class="hljs-attr">baseUrl</span>: <span class="hljs-string">'/site/'</span>, <span class="hljs-comment">// å¦‚æœä½ çš„ä»“åº“å« siteï¼Œè¿™é‡Œå°±å¡« /site/</span>
  <span class="hljs-comment">// ...</span>
};
</code></pre>
<p>è¿™ä¸€ç‚¹å¾ˆå®¹æ˜“è¢«å¿½ç•¥ï¼Œé…ç½®ä¸å¯¹ä¼šå¯¼è‡´é¡µé¢æ‰“å¼€å…¨æ˜¯ç™½å±ï¼Œå› ä¸ºèµ„æºè·¯å¾„åŠ è½½ä¸åˆ°ã€‚</p>
<h3 data-id="heading-13">éªŒè¯æˆæœ</h3>
<p>é…ç½®å®Œæ‰€æœ‰ä¸œè¥¿å¹¶æ¨é€ä»£ç åï¼Œæˆ‘ä»¬å°±å¯ä»¥å» GitHub ä»“åº“çš„ <strong>Actions</strong> æ ‡ç­¾é¡µçœ‹æˆäº†ã€‚</p>
<p>ä½ ä¼šçœ‹åˆ°é»„è‰²çš„åœ†åœˆï¼ˆå·¥ä½œæµæ­£åœ¨è¿è¡Œï¼‰ï¼Œå˜ç»¿å°±ä»£è¡¨æˆåŠŸå•¦ï¼å¦‚æœå˜çº¢äº†ï¼Œç‚¹å‡»è¿›å»æŸ¥çœ‹æ—¥å¿—ï¼Œé€šå¸¸éƒ½èƒ½æ’æŸ¥å‡ºé—®é¢˜ï¼ˆå¤§éƒ¨åˆ†æ—¶å€™æ˜¯æ‹¼å†™é”™è¯¯æˆ–è€…è·¯å¾„é…ç½®ä¸å¯¹ï¼‰ã€‚</p>
<p>æ„å»ºæˆåŠŸåï¼Œè®¿é—® <code>https://&lt;ä½ çš„ç”¨æˆ·å&gt;.github.io/&lt;ä»“åº“å&gt;/</code> å°±èƒ½çœ‹åˆ°å´­æ–°çš„ç«™ç‚¹äº†ã€‚</p>
<h3 data-id="heading-14">æ€»ç»“</h3>
<p>é€šè¿‡å¼•å…¥ GitHub Actionsï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº† HagiCode æ–‡æ¡£ç«™çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚è¿™ä¸ä»…èŠ‚çœäº†æ‰‹åŠ¨æ“ä½œçš„æ—¶é—´ï¼Œæ›´é‡è¦çš„æ˜¯ä¿è¯äº†å‘å¸ƒæµç¨‹çš„æ ‡å‡†åŒ–ã€‚ç°åœ¨ä¸ç®¡æ˜¯å“ªä½å°ä¼™ä¼´æ›´æ–°äº†æ–‡æ¡£ï¼Œåªè¦åˆå¹¶åˆ° <code>main</code> åˆ†æ”¯ï¼Œå‡ åˆ†é’Ÿåå°±èƒ½åœ¨çº¿ä¸Šçœ‹åˆ°æœ€æ–°çš„å†…å®¹ã€‚</p>
<p><strong>æ ¸å¿ƒæ”¶ç›Š</strong>ï¼š</p>
<ul>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šä»"æ‰‹åŠ¨æ‰“åŒ…ã€æ‰‹åŠ¨ä¸Šä¼ "å˜æˆ"ä»£ç å³å‘å¸ƒ"ã€‚</li>
<li><strong>é™ä½é”™è¯¯</strong>ï¼šæ¶ˆé™¤äº†äººä¸ºæ“ä½œå¤±è¯¯çš„å¯èƒ½æ€§ã€‚</li>
<li><strong>ä½“éªŒä¼˜åŒ–</strong>ï¼šè®©å¼€å‘è€…æ›´ä¸“æ³¨äºå†…å®¹è´¨é‡ï¼Œè€Œä¸æ˜¯è¢«ç¹ççš„éƒ¨ç½²æµç¨‹å›°æ‰°ã€‚</li>
</ul>
<p>è™½ç„¶é…ç½® CI/CD åˆšå¼€å§‹æœ‰ç‚¹éº»çƒ¦ï¼ˆå°¤å…¶æ˜¯å„ç§æƒé™å’Œè·¯å¾„é—®é¢˜ï¼‰ï¼Œä½†è¿™æ˜¯ä¸€æ¬¡æ€§æŠ•å…¥ï¼Œé•¿æœŸå›æŠ¥å·¨å¤§çš„å·¥ä½œã€‚å¼ºçƒˆå»ºè®®æ‰€æœ‰é™æ€ç«™ç‚¹é¡¹ç›®éƒ½æ¥å…¥ç±»ä¼¼çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
<h3 data-id="heading-15">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.github.com%2Fen%2Factions" target="_blank" title="https://docs.github.com/en/actions" ref="nofollow noopener noreferrer">GitHub Actions å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocusaurus.io%2Fdocs%2Fdeployment" target="_blank" title="https://docusaurus.io/docs/deployment" ref="nofollow noopener noreferrer">Docusaurus éƒ¨ç½²æŒ‡å—</a></li>
<li>[actions-gh-pages Action ä½¿ç”¨è¯´æ˜](<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com" target="_blank" title="https://github.com" ref="nofollow noopener noreferrer">github.com</a> peaceiris/actions-gh-pages)</li>
</ul>
<hr/>
<p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»,å¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡æœ‰ç”¨,å¿«ç‚¹å‡»ä¸‹æ–¹ç‚¹èµæŒ‰é’®ğŸ‘,è®©æ›´å¤šçš„äººçœ‹åˆ°æœ¬æ–‡ã€‚</p>
<p>æœ¬å†…å®¹é‡‡ç”¨äººå·¥æ™ºèƒ½è¾…åŠ©åä½œ,ç»æœ¬äººå®¡æ ¸,ç¬¦åˆæœ¬äººè§‚ç‚¹ä¸ç«‹åœºã€‚</p>
<h3 data-id="heading-16">å…ƒä¿¡æ¯</h3>
<ul>
<li><strong>æœ¬æ–‡ä½œè€…:</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.newbe.pro" target="_blank" title="https://www.newbe.pro" ref="nofollow noopener noreferrer">newbe36524</a></li>
<li><strong>æœ¬æ–‡é“¾æ¥:</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fhagicode-org.github.io%2Fsite%2Fblog%2F2026%2F01%2F25%2Fdocusaurus-auto-deployment-with-github-actions" target="_blank" title="https://hagicode-org.github.io/site/blog/2026/01/25/docusaurus-auto-deployment-with-github-actions" ref="nofollow noopener noreferrer">hagicode-org.github.io/site/blog/2â€¦</a></li>
<li><strong>ç‰ˆæƒå£°æ˜:</strong> æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–,å‡é‡‡ç”¨ BY-NC-SA è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„!</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³ Vite å¼€å‘æœåŠ¡å™¨å¯åŠ¨æŠ¥é”™ï¼šspawn EPERM]]></title>    <link>https://juejin.cn/post/7598767580306571318</link>    <guid>https://juejin.cn/post/7598767580306571318</guid>    <pubDate>2026-01-26T01:05:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598767580306571318" data-draft-id="7598767580306554934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³ Vite å¼€å‘æœåŠ¡å™¨å¯åŠ¨æŠ¥é”™ï¼šspawn EPERM"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-26T01:05:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹¬å®ˆä¸€éš…"/> <meta itemprop="url" content="https://juejin.cn/user/2963939079500248"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³ Vite å¼€å‘æœåŠ¡å™¨å¯åŠ¨æŠ¥é”™ï¼šspawn EPERM
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2963939079500248/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹¬å®ˆä¸€éš…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T01:05:57.000Z" title="Mon Jan 26 2026 01:05:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜ç°è±¡</h2>
<p>åœ¨ Windows ç³»ç»Ÿä¸‹è¿è¡Œ Vite å¼€å‘æœåŠ¡å™¨æ—¶ï¼Œæ§åˆ¶å°æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-built_in">Error</span>: spawn EPERM 
     at ChildProcess.<span class="hljs-title function_ invoke__">spawn</span> (<span class="hljs-attr">node</span>:internal/<span class="hljs-attr">child_process</span>:<span class="hljs-number">420</span>:<span class="hljs-number">11</span>) 
     at Object.<span class="hljs-title function_ invoke__">spawn</span> (<span class="hljs-attr">node</span>:<span class="hljs-attr">child_process</span>:<span class="hljs-number">787</span>:<span class="hljs-number">9</span>) 
     at <span class="hljs-title function_ invoke__">baseOpen</span> (<span class="hljs-attr">file</span>:///<span class="hljs-attr">E</span>:/æ ‡ç­¾æº¯æº/code/TraceGuard-UI/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.<span class="hljs-attr">js</span>:<span class="hljs-number">26487</span>:<span class="hljs-number">36</span>)
</code></pre>
<p>å¼€å‘æœåŠ¡å™¨æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œæˆ–è€…å¯åŠ¨åç«‹å³å´©æºƒã€‚</p>
<h2 data-id="heading-1">å‘ç”ŸåŸå› </h2>
<p>è¿™ä¸ªé”™è¯¯é€šå¸¸ç”±ä»¥ä¸‹å‡ ä¸ªå› ç´ å¯¼è‡´ï¼š</p>
<h3 data-id="heading-2">1. Vite è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨åŠŸèƒ½</h3>
<p>åœ¨ <code>vite.config.js</code> é…ç½®æ–‡ä»¶ä¸­ï¼Œ<code>server.open</code> é€‰é¡¹è¢«è®¾ç½®ä¸º <code>true</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">server</span>: {
  <span class="hljs-attr">port</span>: <span class="hljs-number">80</span>,
  <span class="hljs-attr">host</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// è¿™é‡Œæ˜¯é—®é¢˜æ‰€åœ¨</span>
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>å½“ <code>open: true</code> æ—¶ï¼ŒVite ä¼šåœ¨æœåŠ¡å™¨å¯åŠ¨åè‡ªåŠ¨è°ƒç”¨ç³»ç»Ÿé»˜è®¤æµè§ˆå™¨æ‰“å¼€å¼€å‘åœ°å€ã€‚</p>
<h3 data-id="heading-3">2. Windows æƒé™é™åˆ¶</h3>
<p>åœ¨ Windows ç³»ç»Ÿä¸Šï¼ŒNode.js çš„ <code>child_process.spawn()</code> æ–¹æ³•å°è¯•å¯åŠ¨æµè§ˆå™¨è¿›ç¨‹æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹æƒé™é—®é¢˜ï¼š</p>
<ul>
<li><strong>æƒé™ä¸è¶³</strong>ï¼šå½“å‰è¿›ç¨‹æ²¡æœ‰è¶³å¤Ÿçš„æƒé™å¯åŠ¨å¤–éƒ¨åº”ç”¨ç¨‹åº</li>
<li><strong>å®‰å…¨ç­–ç•¥é™åˆ¶</strong>ï¼šWindows Defender æˆ–ä¼ä¸šå®‰å…¨ç­–ç•¥é˜»æ­¢äº†è¿›ç¨‹åˆ›å»º</li>
<li><strong>è·¯å¾„é—®é¢˜</strong>ï¼šæµè§ˆå™¨å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„æ— æ³•æ­£ç¡®è§£æ</li>
</ul>
<h3 data-id="heading-4">3. ç«¯å£å ç”¨ï¼ˆæ¬¡è¦åŸå› ï¼‰</h3>
<p>å¦‚æœé…ç½®çš„ç«¯å£ï¼ˆå¦‚ 80ï¼‰å·²è¢«å…¶ä»–è¿›ç¨‹å ç”¨ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´ç±»ä¼¼çš„é”™è¯¯ã€‚</p>
<h2 data-id="heading-5">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-6">æ–¹æ¡ˆä¸€ï¼šç¦ç”¨è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼ˆæ¨èï¼‰</h3>
<p>ä¿®æ”¹ <code>vite.config.js</code> æ–‡ä»¶ï¼Œå°† <code>open</code> é€‰é¡¹è®¾ç½®ä¸º <code>false</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ mode, command }</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">server</span>: {
      <span class="hljs-attr">port</span>: <span class="hljs-number">80</span>,
      <span class="hljs-attr">host</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">open</span>: <span class="hljs-literal">false</span>,  <span class="hljs-comment">// æ”¹ä¸º falseï¼Œç¦ç”¨è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span>
      <span class="hljs-attr">proxy</span>: {
        <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
      }
    },
    <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  }
})
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å½»åº•è§£å†³æƒé™é—®é¢˜</li>
<li>ä¸å½±å“å¼€å‘æœåŠ¡å™¨åŠŸèƒ½</li>
<li>å¯ä»¥æ‰‹åŠ¨é€‰æ‹©æµè§ˆå™¨è®¿é—®</li>
</ul>
<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š
å¯åŠ¨å¼€å‘æœåŠ¡å™¨åï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨è®¿é—® <code>http://localhost:80</code></p>
<h3 data-id="heading-7">æ–¹æ¡ˆäºŒï¼šæŒ‡å®šæµè§ˆå™¨è·¯å¾„</h3>
<p>å¦‚æœç¡®å®éœ€è¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œå¯ä»¥æŒ‡å®šæµè§ˆå™¨å¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">server</span>: {
  <span class="hljs-attr">port</span>: <span class="hljs-number">80</span>,
  <span class="hljs-attr">host</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">open</span>: <span class="hljs-string">'chrome'</span>,  <span class="hljs-comment">// æˆ–è€…æŒ‡å®šå®Œæ•´è·¯å¾„</span>
  <span class="hljs-comment">// æˆ–è€…</span>
  <span class="hljs-attr">open</span>: <span class="hljs-string">'C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe'</span>
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šè¿™ç§æ–¹å¼ä»ç„¶å¯èƒ½é‡åˆ°æƒé™é—®é¢˜ï¼Œä¸å¦‚æ–¹æ¡ˆä¸€ç¨³å®šã€‚</p>
<h3 data-id="heading-8">æ–¹æ¡ˆä¸‰ï¼šä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</h3>
<p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œç»ˆç«¯æˆ– IDEï¼Œç„¶åæ‰§è¡Œ <code>npm run dev</code> å‘½ä»¤ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸æ˜¯é•¿æœŸè§£å†³æ–¹æ¡ˆ</li>
<li>å¯èƒ½å¸¦æ¥å®‰å…¨é£é™©</li>
<li>ä¸æ¨èä½œä¸ºå¸¸è§„åšæ³•</li>
</ul>
<h2 data-id="heading-9">éªŒè¯ä¿®å¤</h2>
<p>ä¿®æ”¹é…ç½®åï¼Œé‡æ–°å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p>åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„æˆåŠŸè¾“å‡ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">  VITE v6<span class="hljs-number">.3</span><span class="hljs-number">.5</span>  ready in xxx ms

  âœ  Local:   http:<span class="hljs-comment">//localhost:80/</span>
  âœ  Network: http:<span class="hljs-comment">//192.168.x.x:80/</span>
  âœ  press h + enter to show help
</code></pre>
<p>ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨è®¿é—® <code>http://localhost:80</code> å³å¯ã€‚</p>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p><code>spawn EPERM</code> é”™è¯¯æ˜¯ Windows ç³»ç»Ÿä¸‹ Vite å¼€å‘æœåŠ¡å™¨çš„å¸¸è§é—®é¢˜ï¼Œä¸»è¦åŸå› æ˜¯è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨åŠŸèƒ½è§¦å‘äº†æƒé™é™åˆ¶ã€‚æœ€ç®€å•æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯ç¦ç”¨è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨åŠŸèƒ½ï¼Œæ”¹ä¸ºæ‰‹åŠ¨è®¿é—®å¼€å‘åœ°å€ã€‚</p>
<p>è¿™ç§æ–¹å¼ä¸ä»…è§£å†³äº†æƒé™é—®é¢˜ï¼Œè¿˜æä¾›äº†æ›´å¥½çš„å¼€å‘ä½“éªŒâ€”â€”ä½ å¯ä»¥è‡ªç”±é€‰æ‹©æµè§ˆå™¨å’Œæ‰“å¼€æ—¶æœºã€‚</p>
<h2 data-id="heading-11">ç›¸å…³èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vitejs.dev%2Fconfig%2F%23server-open" target="_blank" title="https://cn.vitejs.dev/config/#server-open" ref="nofollow noopener noreferrer">Vite å®˜æ–¹æ–‡æ¡£ - server.open</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Fchild_process.html%23child_processspawncommand-args-options" target="_blank" title="https://nodejs.org/api/child_process.html#child_processspawncommand-args-options" ref="nofollow noopener noreferrer">Node.js child_process.spawn() æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - DIFFç®—æ³•]]></title>    <link>https://juejin.cn/post/7598830215258800164</link>    <guid>https://juejin.cn/post/7598830215258800164</guid>    <pubDate>2026-01-26T01:43:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598830215258800164" data-draft-id="7598588085597929512" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - DIFFç®—æ³•"/> <meta itemprop="keywords" content="æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2026-01-26T01:43:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="yyyao"/> <meta itemprop="url" content="https://juejin.cn/user/4266531531793976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - DIFFç®—æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4266531531793976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    yyyao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T01:43:45.000Z" title="Mon Jan 26 2026 01:43:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬æ–‡çš„<code>React</code>ä»£ç ç‰ˆæœ¬ä¸º<code>18.2.0</code></p>
<p>å¯è°ƒè¯•çš„ä»£ç ä»“åº“ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyyyao-hh%2Freact-debug%2Ftree%2Fmaster-pure" target="_blank" title="https://github.com/yyyao-hh/react-debug/tree/master-pure" ref="nofollow noopener noreferrer">GitHub - yyyao-hh/react-debug at master-pure</a></p>
<p>åœ¨<code>React</code>çš„ä¸–ç•Œé‡Œï¼Œæ¯æ¬¡çŠ¶æ€æ›´æ–°éƒ½ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚å¦‚æœç›´æ¥é”€æ¯æ—§<code>DOM</code>èŠ‚ç‚¹å¹¶åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œæ€§èƒ½å¼€é”€å°†æ— æ³•æ‰¿å—ã€‚<code>React</code>é€šè¿‡è°ƒå’Œï¼ˆ<code>Reconciliation</code>ï¼‰ è¿‡ç¨‹ï¼Œé…åˆ<code>DIFF</code>ç®—æ³•ï¼Œæ‰¾å‡ºéœ€è¦æ›´æ–°çš„æœ€å°èŠ‚ç‚¹é›†åˆï¼Œå®ç°äº†é«˜æ•ˆçš„<code>UI</code>æ›´æ–°ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ æ·±<code>React18</code>æºç ï¼Œæ­ç¤º<code>DIFF</code>ç®—æ³•çš„æ ¸å¿ƒåŸç†ã€å®ç°ç»†èŠ‚å’Œä¼˜åŒ–ç­–ç•¥ã€‚</p>
<h2 data-id="heading-1">DIFF ç®—æ³•çš„ç­–ç•¥</h2>
<h3 data-id="heading-2">ç­–ç•¥ä¸€ï¼šåŒçº§æ¯”è¾ƒ</h3>
<p><code>React</code>åªä¼šå¯¹åŒä¸€å±‚çº§çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œä¸ä¼šè·¨å±‚çº§è¿½è¸ªèŠ‚ç‚¹å˜åŒ–ã€‚</p>
<h3 data-id="heading-3">ç­–ç•¥äºŒï¼šç±»å‹ä¸åŒåˆ™é”€æ¯é‡å»º</h3>
<p>å¦‚æœèŠ‚ç‚¹ç±»å‹æ”¹å˜ï¼Œ<code>React</code>ä¼šç›´æ¥é”€æ¯æ•´ä¸ªå­æ ‘ï¼Œé‡æ–°æ„å»ºæ–°çš„èŠ‚ç‚¹ã€‚</p>
<h3 data-id="heading-4">ç­–ç•¥ä¸‰ï¼šKey å€¼ä¼˜åŒ–åˆ—è¡¨æ›´æ–°</h3>
<p><code>React</code>ä½¿ç”¨<code>key</code>æ¥åŒ¹é…åŸæœ‰æ ‘ä¸Šçš„å­å…ƒç´ ï¼ŒåŒ¹é…æˆåŠŸå°±ä¼šè¿›è¡Œå¤ç”¨ã€‚é€šè¿‡<code>key</code>æ ‡è¯†èŠ‚ç‚¹çš„ç¨³å®šæ€§ï¼Œ<code>React</code>å¯ä»¥æ›´å‡†ç¡®åœ°è¯†åˆ«èŠ‚ç‚¹çš„ç§»åŠ¨ã€æ·»åŠ å’Œåˆ é™¤ï¼Œä½¿å¾—æ ‘çš„è½¬æ¢æ•ˆç‡å¾—ä»¥æé«˜ã€‚</p>
<p>æ¯”å¦‚ï¼šä¸¤ä¸ªåŒçº§å…„å¼ŸèŠ‚ç‚¹ä½ç½®è¿›è¡Œäº†è°ƒæ¢ï¼Œå­˜åœ¨<code>key</code>çš„æƒ…å†µä¸‹ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¢«å¤ç”¨ï¼Œè€Œä¸æ˜¯å¸è½½é‡æ–°æ„å»ºã€‚</p>
<h2 data-id="heading-5">DIFF ç®—æ³•çš„å…¥å£</h2>
<p>åœ¨ä¸Šä¸€èŠ‚æˆ‘ä»¬è®²æ„å»º<code>Fiber</code>æ ‘çš„æ—¶å€™ï¼Œè®²åˆ°äº†<code>beginWork</code>æ–¹æ³•å†…éƒ¨ä¸»è¦æ˜¯æ ¹æ®<code>tag</code>åˆ†å‘é€»è¾‘ï¼Œå¤„ç†ä¸åŒç±»å‹çš„<code>Fiber</code>èŠ‚ç‚¹ã€‚å°†å¤„ç†æ–¹æ³•çš„è¿”å›çš„å­èŠ‚ç‚¹ä½œä¸ºä¸‹ä¸€ä¸ªéå†èŠ‚ç‚¹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/* packages/react-reconciler/src/ReactFiberBeginWork.old.js */</span>

function beginWork(
  current: Fiber | <span class="hljs-literal">null</span>,
  workInProgress: Fiber,
  renderLanes: Lanes,
): Fiber | <span class="hljs-literal">null</span> {
  <span class="hljs-keyword">if</span>(...) {...}; <span class="hljs-comment">// æ»¡è¶³ä¸€å®šæ¡ä»¶ä¸‹æ‰§è¡Œç†”æ–­ç­–ç•¥</span>

  switch (workInProgress.tag) {
    case IndeterminateComponent: <span class="hljs-keyword">return</span> mountIndeterminateComponent(...);
    case LazyComponent: <span class="hljs-keyword">return</span> mountLazyComponent(...);
    case FunctionComponent: <span class="hljs-keyword">return</span> updateFunctionComponent(...);
    case ClassComponent: <span class="hljs-keyword">return</span> updateClassComponent(...);
    case HostRoot: <span class="hljs-keyword">return</span> updateHostRoot(...);
    case HostComponent: <span class="hljs-keyword">return</span> updateHostComponent(...);
    case HostText: <span class="hljs-keyword">return</span> updateHostText(...);
    case SuspenseComponent: <span class="hljs-keyword">return</span> updateSuspenseComponent(...);
    case HostPortal: <span class="hljs-keyword">return</span> updatePortalComponent(...);
    case ForwardRef: <span class="hljs-keyword">return</span> updateForwardRef(...);
    case Fragment: <span class="hljs-keyword">return</span> updateFragment(...);
    case Mode: <span class="hljs-keyword">return</span> updateMode(...);
    case Profiler: <span class="hljs-keyword">return</span> updateProfiler(...);
    case ContextProvider: <span class="hljs-keyword">return</span> updateContextProvider(...);
    case ContextConsumer: <span class="hljs-keyword">return</span> updateContextConsumer(...);
    case MemoComponent: <span class="hljs-keyword">return</span> updateMemoComponent(...);
    case SimpleMemoComponent: <span class="hljs-keyword">return</span> updateSimpleMemoComponent(...);
    case IncompleteClassComponent: <span class="hljs-keyword">return</span> mountIncompleteClassComponent(...);
    case SuspenseListComponent: <span class="hljs-keyword">return</span> updateSuspenseListComponent(...);
    case ScopeComponent: <span class="hljs-keyword">return</span> updateScopeComponent(...);
    case OffscreenComponent: <span class="hljs-keyword">return</span> updateOffscreenComponent(...);
    case LegacyHiddenComponent: <span class="hljs-keyword">return</span> updateLegacyHiddenComponent(...);
    case CacheComponent: <span class="hljs-keyword">return</span> updateCacheComponent(...);
    case TracingMarkerComponent: <span class="hljs-keyword">return</span> updateTracingMarkerComponent(...);
  }
}
</code></pre>
<p>è¿™äº›ä¸åŒçš„å¤„ç†é€»è¾‘æœ€ç»ˆéƒ½ä¼šèµ°åˆ°<code>reconcileChildren</code>å‡½æ•°ä¸­å»å¤„ç†ï¼Œè¿™é‡Œç®€å•ä»¥ç±»ç»„ä»¶ï¼ˆ<code>ClassComponent</code>ï¼‰å’Œå‡½æ•°å¼ç»„ä»¶ï¼ˆ<code>FunctionComponent</code>ï¼‰çš„ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç±»ç»„ä»¶ (ClassComponent)</span>
function <span class="hljs-built_in">updateClassComponent</span>(...) {
  const nextUnitOfWork = <span class="hljs-built_in">finishClassComponent</span>(...);
  
  return nextUnitOfWork;
}

function <span class="hljs-built_in">finishClassComponent</span>(...) {
  <span class="hljs-built_in">reconcileChildren</span>(current, workInProgress, nextChildren, renderLanes);

  return workInProgress<span class="hljs-selector-class">.child</span>;
}

<span class="hljs-comment">// å‡½æ•°å¼ç»„ä»¶ (FunctionComponent)</span>
function <span class="hljs-built_in">updateFunctionComponent</span>(...) {
  <span class="hljs-built_in">reconcileChildren</span>(current, workInProgress, nextChildren, renderLanes);
  
  return workInProgress<span class="hljs-selector-class">.child</span>;
}
</code></pre>
<pre><code class="hljs language-ini" lang="ini">/* src/react/packages/react-reconciler/src/ReactFiberBeginWork.old.js */

export function reconcileChildren(...) {
  if (<span class="hljs-attr">current</span> === null) {
    <span class="hljs-attr">workInProgress.child</span> = mountChildFibers(...)<span class="hljs-comment">;</span>
  } else {
    <span class="hljs-attr">workInProgress.child</span> = reconcileChildFibers(...)<span class="hljs-comment">;</span>
  }
}
</code></pre>
<pre><code class="hljs language-ini" lang="ini">/* src/react/packages/react-reconciler/src/ReactChildFiber.old.js */

export const <span class="hljs-attr">reconcileChildFibers</span> = ChildReconciler(<span class="hljs-literal">true</span>)<span class="hljs-comment">;</span>
export const <span class="hljs-attr">mountChildFibers</span> = ChildReconciler(<span class="hljs-literal">false</span>)<span class="hljs-comment">;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/* src/react/packages/react-reconciler/src/ReactChildFiber.old.js */</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ChildReconciler</span>(<span class="hljs-params">shouldTrackSideEffects</span>) {

  ...

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">reconcileChildFibers</span>(<span class="hljs-params"/>) {}

  <span class="hljs-keyword">return</span> reconcileChildFibers;
}
</code></pre>
<p>æ‰€ä»¥<code>reconcileChildFibers</code>å‡½æ•°æ˜¯å®ç°<code>Diff</code>ç®—æ³•çš„æ ¸å¿ƒæ–¹æ³•</p>
<h2 data-id="heading-6">DIFF ç®—æ³•çš„å®ç°</h2>
<p>æˆ‘ä»¬ç´§æ¥ç€å…¥å£ä¹‹åï¼Œæ¥åˆ†æ<code>reconcileChildFibers</code>å‡½æ•°çš„å†…éƒ¨é€»è¾‘ã€‚</p>
<ol>
<li>
<p>é¦–å…ˆå¤„ç†é¡¶çº§ä¸”æ— <code>key</code>çš„<code>Fragment</code>å…ƒç´ ï¼Œæ»¡è¶³æ¡ä»¶åˆ™ç›´æ¥ä½¿ç”¨å®ƒçš„å­©å­ã€‚è¿™é‡Œå€¼å¾—æ³¨æ„çš„ä¸¤ç‚¹ï¼š</p>
<p>a.  å­˜åœ¨<code>key</code>çš„<code>Fragment</code>ä¸æ»¡è¶³æ¡ä»¶ï¼Œäºæ˜¯ä¹åœ¨ä¸‹æ–¹â€œå¤„ç†å•å…ƒç´ â€é€»è¾‘ä¸­åˆä¼šå¤„ç†ä¸€ä¸‹ã€‚</p>
<p>b.  éé¡¶çº§çš„<code>Fragment</code>ä¾æ—§ä¸æ»¡è¶³æ¡ä»¶ï¼Œåœ¨ä¸‹æ–¹â€œå¤„ç†æ•°ç»„å…ƒç´ â€çš„é€»è¾‘ä¸­ä¼šè¿›è¡Œå¤„ç†ã€‚</p>
</li>
<li>
<p>å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸€ä¸ª<code>ReactElement</code>ã€‚åˆ†ä¸ºæ™®é€šå…ƒç´ ã€<code>Lazy</code>ç»„ä»¶ã€<code>Portal</code>ç»„ä»¶ã€èŠ‚ç‚¹æ•°ç»„ã€å¯è¿­ä»£å¯¹è±¡åˆ†åˆ«è¿›è¡Œå¤„ç†ï¼›</p>
</li>
<li>
<p>å¦‚æœæ˜¯<code>string</code>æˆ–<code>number</code>ç±»å‹ï¼Œè°ƒç”¨å¤„ç†æ–‡æœ¬èŠ‚ç‚¹çš„æ–¹æ³•ã€‚</p>
</li>
<li>
<p>å‰©ä½™æƒ…å†µï¼šå¯èƒ½ä¸º<code>null</code>ã€<code>undefined</code>ã€<code>false</code>æˆ–<code>''</code>ï¼Œä¸èƒ½è½¬åŒ–ä¸º<code>Fiber</code>èŠ‚ç‚¹ï¼Œå› æ­¤ç›´æ¥åˆ é™¤æ‰€æœ‰æ—§å­<code>Fiber</code>èŠ‚ç‚¹ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">function <span class="hljs-title">reconcileChildFibers</span>(<span class="hljs-params">
  returnFiber: Fiber,
  currentFirstChild: Fiber | <span class="hljs-literal">null</span>,
  newChild: any,
  lanes: Lanes,
</span>): Fiber | <span class="hljs-literal">null</span></span> {
  
  <span class="hljs-comment">/* 1. é¡¶çº§æ— keyçš„Fragmentå…ƒç´ , ç›´æ¥ä½¿ç”¨å®ƒçš„children */</span>
  <span class="hljs-keyword">const</span> isUnkeyedTopLevelFragment =
    <span class="hljs-keyword">typeof</span> newChild === <span class="hljs-string">'object'</span> &amp;&amp;
    newChild !== <span class="hljs-literal">null</span> &amp;&amp;
    newChild.type === REACT_FRAGMENT_TYPE &amp;&amp;
    newChild.key === <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">if</span> (isUnkeyedTopLevelFragment) {
    newChild = newChild.props.children;
  }

  <span class="hljs-comment">/* 2. å¤„ç†å¯¹è±¡ç±»å‹ */</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newChild === <span class="hljs-string">'object'</span> &amp;&amp; newChild !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">switch</span> (newChild.$$<span class="hljs-keyword">typeof</span>) {
      <span class="hljs-comment">// 2.1 React å…ƒç´ </span>
      <span class="hljs-keyword">case</span> REACT_ELEMENT_TYPE:
        <span class="hljs-keyword">return</span> placeSingleChild(
          reconcileSingleElement(
            returnFiber,
            currentFirstChild,
            newChild,
            lanes,
          ),
        );
      <span class="hljs-comment">// 2.2 Portal</span>
      <span class="hljs-keyword">case</span> REACT_PORTAL_TYPE:
        <span class="hljs-keyword">return</span> placeSingleChild(
          reconcileSinglePortal(
            returnFiber,
            currentFirstChild,
            newChild,
            lanes,
          ),
        );
      <span class="hljs-comment">// 2.3 æ‡’åŠ è½½ç»„ä»¶</span>
      <span class="hljs-keyword">case</span> REACT_LAZY_TYPE:
        <span class="hljs-keyword">const</span> payload = newChild._payload;
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">init</span> = newChild._init;
        <span class="hljs-keyword">return</span> reconcileChildFibers(
          returnFiber,
          currentFirstChild,
          <span class="hljs-keyword">init</span>(payload),
          lanes,
        );
    }

    <span class="hljs-comment">// 2.4. æ•°ç»„ç±»å‹å¤„ç†</span>
    <span class="hljs-keyword">if</span> (isArray(newChild)) {
      <span class="hljs-keyword">return</span> reconcileChildrenArray(
        returnFiber,
        currentFirstChild,
        newChild,
        lanes,
      );
    }

    <span class="hljs-comment">// 2.5 å¯è¿­ä»£å¯¹è±¡å¤„ç†</span>
    <span class="hljs-keyword">if</span> (getIteratorFn(newChild)) {
      <span class="hljs-keyword">return</span> reconcileChildrenIterator(
        returnFiber,
        currentFirstChild,
        newChild,
        lanes,
      );
    }

    <span class="hljs-comment">// 2.6 æ— æ•ˆå¯¹è±¡ç±»å‹é”™è¯¯</span>
    throwOnInvalidObjectType(returnFiber, newChild);
  }

  <span class="hljs-comment">/* 3. å¤„ç†æ–‡æœ¬èŠ‚ç‚¹ç±»å‹ */</span>
  <span class="hljs-keyword">if</span> (
    (<span class="hljs-keyword">typeof</span> newChild === <span class="hljs-string">'string'</span> &amp;&amp; newChild !== <span class="hljs-string">''</span>) ||
    <span class="hljs-keyword">typeof</span> newChild === <span class="hljs-string">'number'</span>
  ) {
    <span class="hljs-keyword">return</span> placeSingleChild(
      reconcileSingleTextNode(
        returnFiber,
        currentFirstChild,
        <span class="hljs-string">''</span> + newChild,
        lanes,
      ),
    );
  }

  <span class="hljs-comment">/* 4. å‰©ä½™æƒ…å†µ */</span>
  <span class="hljs-keyword">return</span> deleteRemainingChildren(returnFiber, currentFirstChild);
}
</code></pre>
<h3 data-id="heading-7">å¤„ç†å•èŠ‚ç‚¹</h3>
<p><code>reconcileSingleElement</code>æ–¹æ³•ç”¨äºå¤„ç†å½“æ–°çš„å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå•ç‹¬çš„å…ƒç´ ï¼ˆä¸æ˜¯æ•°ç»„æˆ–æ–‡æœ¬èŠ‚ç‚¹ï¼‰æ—¶çš„æƒ…å†µã€‚</p>
<p>å®ƒçš„å¤„ç†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œåˆ¤æ–­æ¡ä»¶ä¾¿æ˜¯<code>child !== null</code></p>
<ol>
<li>æ›´æ–°é˜¶æ®µï¼ˆ<code>while</code>å¾ªç¯ï¼‰</li>
<li>åˆå§‹åŒ–é˜¶æ®µæˆ–åœ¨å¾ªç¯ä¸­ä¸æ»¡è¶³å¤ç”¨æ¡ä»¶ï¼ˆ<code>while</code>å¾ªç¯ä¹‹åï¼‰</li>
</ol>
<p>é¦–å…ˆ<code>while</code>å¾ªç¯çš„é€»è¾‘ï¼šéå†æ—§å­<code>Fiber</code>èŠ‚ç‚¹ï¼Œå°è¯•æ‰¾åˆ°å¯ä»¥å¤ç”¨çš„<code>Fiber</code>èŠ‚ç‚¹ï¼š</p>
<ul>
<li>å¦‚æœ<code>key</code>ç›¸åŒä¸”<code>type</code>ç›¸åŒï¼Œåˆ™å¤ç”¨å¹¶åˆ é™¤å…¶ä»–å…„å¼ŸèŠ‚ç‚¹ï¼›</li>
<li>å¦‚æœ<code>key</code>ç›¸åŒä½†<code>type</code>ä¸åŒï¼Œåˆ™åˆ é™¤åŒ…æ‹¬å½“å‰èŠ‚ç‚¹åœ¨å†…çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œç„¶åè·³å‡ºå¾ªç¯ï¼›</li>
<li>å¦‚æœ<code>key</code>ä¸åŒï¼Œåˆ™æ ‡è®°å½“å‰<code>child</code>ä¸ºåˆ é™¤ï¼Œç»§ç»­éå†ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚</li>
</ul>
<p>ç„¶åæ˜¯å¾ªç¯ä¹‹åçš„é€»è¾‘ï¼šéå†å®Œæˆ–<code>break</code>åæœªæ‰¾åˆ°å¯å¤ç”¨èŠ‚ç‚¹ï¼Œç›´æ¥åˆ›å»ºæ–°çš„<code>Fiber</code>èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">function reconcileSingleElement(
  returnFiber: Fiber,
  currentFirstChild: Fiber | null,
  element: ReactElement,
  lanes: Lanes,
): Fiber {
  const <span class="hljs-attr">key</span> = element.key<span class="hljs-comment">;</span>
  let <span class="hljs-attr">child</span> = currentFirstChild<span class="hljs-comment">;</span>
  /**
   * 1. æ›´æ–°é˜¶æ®µ
   * - å¦‚æœkeyç›¸åŒä¸”typeç›¸åŒ, åˆ™å¤ç”¨å¹¶åˆ é™¤å…¶ä»–å…„å¼ŸèŠ‚ç‚¹
   * - å¦‚æœkeyç›¸åŒä½†typeä¸åŒ, åˆ™åˆ é™¤åŒ…æ‹¬å½“å‰èŠ‚ç‚¹åœ¨å†…çš„æ‰€æœ‰å­èŠ‚ç‚¹, ç„¶åè·³å‡ºå¾ªç¯
   * - å¦‚æœkeyä¸åŒ, åˆ™æ ‡è®°å½“å‰childä¸ºåˆ é™¤, ç»§ç»­éå†ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹
   */
  while (child !== null) {
    if (<span class="hljs-attr">child.key</span> === key) {
      const <span class="hljs-attr">elementType</span> = element.type<span class="hljs-comment">;</span>
      if (<span class="hljs-attr">elementType</span> === REACT_FRAGMENT_TYPE) {
        if (<span class="hljs-attr">child.tag</span> === Fragment) {
          deleteRemainingChildren(returnFiber, child.sibling)<span class="hljs-comment">;</span>
          const <span class="hljs-attr">existing</span> = useFiber(child, element.props.children)<span class="hljs-comment">;</span>
          <span class="hljs-attr">existing.return</span> = returnFiber<span class="hljs-comment">;</span>
          return existing<span class="hljs-comment">;</span>
        }
      } else {
        if (
          <span class="hljs-attr">child.elementType</span> === elementType ||
          (__DEV__
            ? isCompatibleFamilyForHotReloading(child, element)
            : false) ||
          (typeof <span class="hljs-attr">elementType</span> === <span class="hljs-string">'object'</span> &amp;&amp;
            elementType !== null &amp;&amp;
            elementType.$$<span class="hljs-attr">typeof</span> === REACT_LAZY_TYPE &amp;&amp;
            resolveLazy(elementType) === child.type)
        ) {
          deleteRemainingChildren(returnFiber, child.sibling)<span class="hljs-comment">;</span>
          const <span class="hljs-attr">existing</span> = useFiber(child, element.props)<span class="hljs-comment">;</span>
          <span class="hljs-attr">existing.ref</span> = coerceRef(returnFiber, child, element)<span class="hljs-comment">;</span>
          <span class="hljs-attr">existing.return</span> = returnFiber<span class="hljs-comment">;</span>
          return existing<span class="hljs-comment">;</span>
        }
      }
      // keyç›¸åŒ, ç±»å‹ä¸åŒ, åˆ é™¤è¯¥èŠ‚ç‚¹å’Œå…¶å…„å¼ŸèŠ‚ç‚¹
      deleteRemainingChildren(returnFiber, child)<span class="hljs-comment">;</span>
      break<span class="hljs-comment">;</span>
    } else {
      // å¦‚æœkeyä¸åŒ, åˆ™æ ‡è®°å½“å‰childä¸ºåˆ é™¤, ç»§ç»­éå†ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹
      deleteChild(returnFiber, child)<span class="hljs-comment">;</span>
    }
    <span class="hljs-attr">child</span> = child.sibling<span class="hljs-comment">;</span>
  }

  /**
   * 2. åˆå§‹åŒ–é˜¶æ®µ ï½œ æˆ–å¾ªç¯ä¸­ä¸æ»¡è¶³å¤ç”¨æ¡ä»¶, ç›´æ¥åˆ›å»ºæ–°çš„FiberèŠ‚ç‚¹
   */
  if (<span class="hljs-attr">element.type</span> === REACT_FRAGMENT_TYPE) { // Fragment ç»„ä»¶
    const <span class="hljs-attr">created</span> = createFiberFromFragment(
      element.props.children,
      returnFiber.mode,
      lanes,
      element.key,
    )<span class="hljs-comment">;</span>
    <span class="hljs-attr">created.return</span> = returnFiber<span class="hljs-comment">;</span>
    return created<span class="hljs-comment">;</span>
  } else { // åŸç”ŸDOMå…ƒç´ ã€å‡½æ•°ç»„ä»¶ã€ç±»ç»„ä»¶ç­‰
    const <span class="hljs-attr">created</span> = createFiberFromElement(element, returnFiber.mode, lanes)<span class="hljs-comment">;</span>
    <span class="hljs-attr">created.ref</span> = coerceRef(returnFiber, currentFirstChild, element)<span class="hljs-comment">;</span>
    <span class="hljs-attr">created.return</span> = returnFiber<span class="hljs-comment">;</span>
    return created<span class="hljs-comment">;</span>
  }
}
</code></pre>
<blockquote>
<p>æ€»ç»“ä¸‹<code>reconcileSingleElement</code>æ–¹æ³•çš„ä½œç”¨ï¼šè´Ÿè´£å¤„ç†å•ä¸ª<code>React</code>å…ƒç´ çš„æ›´æ–°ï¼Œå®ƒçš„ç›®æ ‡ï¼š</p>
<ol>
<li>åœ¨ç°æœ‰å­èŠ‚ç‚¹é“¾è¡¨ä¸­æ‰¾åˆ°å¯ä»¥å¤ç”¨çš„èŠ‚ç‚¹</li>
<li>åˆ é™¤ä¸éœ€è¦çš„æ—§èŠ‚ç‚¹ï¼ˆæ‰“æ ‡è®°ï¼Œ<code>commit</code>é˜¶æ®µå¤„ç†ï¼‰</li>
<li>åˆ›å»ºæ–°çš„<code>Fiber</code>èŠ‚ç‚¹ï¼ˆå¦‚æœæ²¡æœ‰å¯å¤ç”¨çš„ï¼‰</li>
</ol>
</blockquote>
<h3 data-id="heading-8">å¤„ç†å¤šèŠ‚ç‚¹</h3>
<p><code>reconcileChildrenArray</code>å‡½æ•°è´Ÿè´£åè°ƒä¸€ä¸ªæ•°ç»„ç±»å‹çš„å­å…ƒç´ åˆ—è¡¨ã€‚</p>
<ol>
<li>ç¬¬ä¸€æ¬¡å¾ªç¯ï¼šåŒæ—¶éå†æ—§çš„å­<code>Fiber</code>èŠ‚ç‚¹é“¾è¡¨å’Œæ–°çš„å­å…ƒç´ æ•°ç»„ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªéå†å®Œã€‚<br/>
åœ¨éå†ä¸­ï¼Œé€šè¿‡<code>updateSlot</code>å‡½æ•°å°è¯•å¤ç”¨æ—§èŠ‚ç‚¹ï¼ˆ<code>key</code>ç›¸åŒåˆ™å¤ç”¨ï¼Œå¦åˆ™è¿”å›<code>null</code>ï¼‰ã€‚</li>
</ol>

<ol>
<li>
<ol>
<li>å¦‚æœå¤ç”¨å¤±è´¥ï¼ˆ<code>key</code>ä¸åŒï¼‰ï¼Œåˆ™è·³å‡ºå¾ªç¯ã€‚</li>
<li>å¦‚æœå¤ç”¨æˆåŠŸï¼Œä½†æ˜¯ä½ç½®å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œåˆ™é€šè¿‡<code>placeChild</code>æ ‡è®°ä½ç½®ï¼ˆæ˜¯å¦éœ€è¦ç§»åŠ¨ï¼‰ã€‚</li>
</ol>
</li>
</ol>

<ol start="2">
<li>å¦‚æœæ–°å­å…ƒç´ æ•°ç»„éå†å®Œï¼ˆ<code>newIdx === newChildren.length</code>ï¼‰ï¼Œè¯´æ˜å‰©ä¸‹çš„æ—§èŠ‚ç‚¹éƒ½æ˜¯å¤šä½™ï¼Œéœ€è¦åˆ é™¤ã€‚</li>
<li>å¦‚æœæ—§èŠ‚ç‚¹é“¾è¡¨éå†å®Œï¼ˆ<code>oldFiber === null</code>ï¼‰ï¼Œè¯´æ˜å‰©ä¸‹çš„æ–°å­å…ƒç´ éƒ½æ˜¯éœ€è¦æ–°å¢çš„ï¼Œç›´æ¥å¾ªç¯åˆ›å»ºæ–°çš„<code>Fiber</code>èŠ‚ç‚¹ã€‚</li>
<li>å¦‚æœä»¥ä¸Šéƒ½ä¸æ˜¯ï¼Œè¯´æ˜æœ‰èŠ‚ç‚¹ä½ç½®å‘ç”Ÿå˜åŒ–ï¼ˆæ¯”å¦‚ä¸­é—´æ’å…¥äº†æ–°èŠ‚ç‚¹ï¼Œæˆ–è€…èŠ‚ç‚¹è¢«åˆ é™¤å¯¼è‡´æ—§èŠ‚ç‚¹æœ‰å‰©ä½™ï¼‰ï¼Œæ­¤æ—¶å°†å‰©ä½™çš„æ—§èŠ‚ç‚¹æ”¾å…¥ä¸€ä¸ª<code>Map</code>ä¸­ï¼ˆ<code>key</code>ä½œä¸ºç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰<code>key</code>åˆ™ç”¨<code>index</code>ï¼‰ï¼Œç„¶åç»§ç»­éå†æ–°å­å…ƒç´ æ•°ç»„ï¼Œä»<code>Map</code>ä¸­æŸ¥æ‰¾å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œå¹¶æ ‡è®°ç§»åŠ¨ã€‚</li>
<li>æœ€åï¼Œå¦‚æœè¿˜æœ‰æ—§èŠ‚ç‚¹æœªè¢«å¤ç”¨ï¼Œåˆ™æ ‡è®°åˆ é™¤ã€‚</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">function reconcileChildrenArray(
  returnFiber: Fiber,
  currentFirstChild: Fiber | null,
  newChildren: Array&lt;*&gt;,
  lanes: Lanes,
): Fiber | null {
  let resultingFirstChild: Fiber | <span class="hljs-attr">null</span> = null<span class="hljs-comment">; // ç»“æœé“¾è¡¨çš„å¤´èŠ‚ç‚¹</span>
  let previousNewFiber: Fiber | <span class="hljs-attr">null</span> = null<span class="hljs-comment">;    // ä¸Šä¸€ä¸ªåˆ›å»ºçš„Fiber</span>

  let <span class="hljs-attr">oldFiber</span> = currentFirstChild<span class="hljs-comment">; // æ—§Fiberé“¾è¡¨çš„èŠ‚ç‚¹, å¼€å§‹æŒ‡å‘åŒå±‚çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span>
  let <span class="hljs-attr">lastPlacedIndex</span> = <span class="hljs-number">0</span><span class="hljs-comment">;          // å·²ç»å¤„ç†å®Œçš„èŠ‚ç‚¹ä¸­ï¼Œæœ€åä¸€ä¸ª"ä¸éœ€è¦ç§»åŠ¨"çš„èŠ‚ç‚¹åœ¨æ—§åˆ—è¡¨ä¸­çš„ä½ç½®</span>
  let <span class="hljs-attr">newIdx</span> = <span class="hljs-number">0</span><span class="hljs-comment">;                   // æ–°childrenæ•°ç»„çš„å½“å‰ç´¢å¼•</span>
  let <span class="hljs-attr">nextOldFiber</span> = null<span class="hljs-comment">;          // ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„æ—§Fiberï¼ˆä¸´æ—¶å­˜å‚¨ï¼‰</span>
  /**
   * 1. åŒæ—¶éå†æ—§çš„å­FiberèŠ‚ç‚¹é“¾è¡¨å’Œæ–°çš„å­å…ƒç´ æ•°ç»„, ç›´åˆ°å…¶ä¸­ä¸€ä¸ªéå†å®Œ
   */
  for (<span class="hljs-comment">; oldFiber !== null &amp;&amp; newIdx &lt; newChildren.length; newIdx++) {</span>
    if (oldFiber.index &gt; newIdx) {
      <span class="hljs-attr">nextOldFiber</span> = oldFiber<span class="hljs-comment">;</span>
      <span class="hljs-attr">oldFiber</span> = null<span class="hljs-comment">;</span>
    } else {
      <span class="hljs-attr">nextOldFiber</span> = oldFiber.sibling<span class="hljs-comment">;</span>
    }
    // updateSlot: å°è¯•å¤ç”¨æ—§èŠ‚ç‚¹ï¼ˆkeyç›¸åŒåˆ™å¤ç”¨ï¼Œå¦åˆ™è¿”å›nullï¼‰
    const <span class="hljs-attr">newFiber</span> = updateSlot(
      returnFiber,
      oldFiber,
      newChildren<span class="hljs-section">[newIdx]</span>,
      lanes,
    )<span class="hljs-comment">;</span>
    // åŒ¹é…å¤±è´¥, ä¸èƒ½å¤ç”¨
    if (<span class="hljs-attr">newFiber</span> === null) {
      if (<span class="hljs-attr">oldFiber</span> === null) {
        <span class="hljs-attr">oldFiber</span> = nextOldFiber<span class="hljs-comment">;</span>
      }
      break<span class="hljs-comment">;</span>
    }
    if (shouldTrackSideEffects) {
      if (oldFiber &amp;&amp; <span class="hljs-attr">newFiber.alternate</span> === null) {
        deleteChild(returnFiber, oldFiber)<span class="hljs-comment">;</span>
      }
    }
    <span class="hljs-attr">lastPlacedIndex</span> = placeChild(newFiber, lastPlacedIndex, newIdx)<span class="hljs-comment">;</span>
    // 
    if (<span class="hljs-attr">previousNewFiber</span> === null) {
      <span class="hljs-attr">resultingFirstChild</span> = newFiber<span class="hljs-comment">;</span>
    } else {
      <span class="hljs-attr">previousNewFiber.sibling</span> = newFiber<span class="hljs-comment">;</span>
    }
    <span class="hljs-attr">previousNewFiber</span> = newFiber<span class="hljs-comment">;</span>
    <span class="hljs-attr">oldFiber</span> = nextOldFiber<span class="hljs-comment">;</span>
  }

  /**
   * 2. å¦‚æœæ–°å­å…ƒç´ æ•°ç»„éå†å®Œ, è¯´æ˜å‰©ä¸‹çš„æ—§èŠ‚ç‚¹éƒ½æ˜¯å¤šä½™, éœ€è¦åˆ é™¤
   */
  if (<span class="hljs-attr">newIdx</span> === newChildren.length) {
    deleteRemainingChildren(returnFiber, oldFiber)<span class="hljs-comment">;</span>
    return resultingFirstChild<span class="hljs-comment">;</span>
  }

  /**
   * 3. å¦‚æœæ—§èŠ‚ç‚¹é“¾è¡¨éå†å®Œ, è¯´æ˜å‰©ä¸‹çš„æ–°å­å…ƒç´ éƒ½æ˜¯éœ€è¦æ–°å¢çš„, ç›´æ¥å¾ªç¯åˆ›å»º
   */
  if (<span class="hljs-attr">oldFiber</span> === null) {
    for (<span class="hljs-comment">; newIdx &lt; newChildren.length; newIdx++) {</span>
      const <span class="hljs-attr">newFiber</span> = createChild(returnFiber, newChildren[newIdx], lanes)<span class="hljs-comment">;</span>
      if (<span class="hljs-attr">newFiber</span> === null) {
        continue<span class="hljs-comment">;</span>
      }
      <span class="hljs-attr">lastPlacedIndex</span> = placeChild(newFiber, lastPlacedIndex, newIdx)<span class="hljs-comment">;</span>
      if (<span class="hljs-attr">previousNewFiber</span> === null) {
        <span class="hljs-attr">resultingFirstChild</span> = newFiber<span class="hljs-comment">;</span>
      } else {
        <span class="hljs-attr">previousNewFiber.sibling</span> = newFiber<span class="hljs-comment">;</span>
      }
      <span class="hljs-attr">previousNewFiber</span> = newFiber<span class="hljs-comment">;</span>
    }
    return resultingFirstChild<span class="hljs-comment">;</span>
  }

  /**
   * 4. å¦‚æœä»¥ä¸Šéƒ½ä¸æ˜¯, è¯´æ˜æœ‰èŠ‚ç‚¹ä½ç½®å‘ç”Ÿå˜åŒ–, æ­¤æ—¶å°†å‰©ä½™çš„æ—§èŠ‚ç‚¹æ”¾å…¥ä¸€ä¸ªMapä¸­,
   * ç„¶åç»§ç»­éå†æ–°å­å…ƒç´ æ•°ç»„, ä»Mapä¸­æŸ¥æ‰¾å¯å¤ç”¨çš„èŠ‚ç‚¹, å¹¶æ ‡è®°ç§»åŠ¨
   */
  const <span class="hljs-attr">existingChildren</span> = mapRemainingChildren(returnFiber, oldFiber)<span class="hljs-comment">;</span>
  for (<span class="hljs-comment">; newIdx &lt; newChildren.length; newIdx++) {</span>
    const <span class="hljs-attr">newFiber</span> = updateFromMap(
      existingChildren,
      returnFiber,
      newIdx,
      newChildren<span class="hljs-section">[newIdx]</span>,
      lanes,
    )<span class="hljs-comment">;</span>
    if (newFiber !== null) {
      if (shouldTrackSideEffects) {
        if (newFiber.alternate !== null) {
          existingChildren.delete(
            <span class="hljs-attr">newFiber.key</span> === null ? newIdx : newFiber.key,
          )<span class="hljs-comment">;</span>
        }
      }
      <span class="hljs-attr">lastPlacedIndex</span> = placeChild(newFiber, lastPlacedIndex, newIdx)<span class="hljs-comment">;</span>
      if (<span class="hljs-attr">previousNewFiber</span> === null) {
        <span class="hljs-attr">resultingFirstChild</span> = newFiber<span class="hljs-comment">;</span>
      } else {
        <span class="hljs-attr">previousNewFiber.sibling</span> = newFiber<span class="hljs-comment">;</span>
      }
      <span class="hljs-attr">previousNewFiber</span> = newFiber<span class="hljs-comment">;</span>
    }
  }

  /**
   * 5. æœ€å, å¦‚æœè¿˜æœ‰æ—§èŠ‚ç‚¹æœªè¢«å¤ç”¨, åˆ™æ ‡è®°åˆ é™¤
   */
  if (shouldTrackSideEffects) {
    existingChildren.forEach(<span class="hljs-attr">child</span> =&gt; deleteChild(returnFiber, child))<span class="hljs-comment">;</span>
  }

  return resultingFirstChild<span class="hljs-comment">;</span>
}
</code></pre>
<blockquote>
<p>æ€»ç»“ä¸‹<code>reconcileChildrenArray</code>æ–¹æ³•çš„ä½œç”¨ï¼šè´Ÿè´£åè°ƒä¸€ä¸ªæ•°ç»„ç±»å‹çš„å­å…ƒç´ åˆ—è¡¨ï¼Œå®ƒçš„è®¾è®¡ï¼š</p>
<p>ç¬¬ä¸€é˜¶æ®µï¼šé¡ºåºæ¯”è¾ƒï¼ˆå¤„ç†ç›¸åŒä½ç½®èŠ‚ç‚¹ï¼‰</p>
<p>â†“</p>
<p>ç¬¬äºŒé˜¶æ®µï¼šå¤„ç†æ–°å¢/åˆ é™¤è¾¹ç•Œ</p>
<p>â†“</p>
<p>ç¬¬ä¸‰é˜¶æ®µï¼š<code>Map</code>æŸ¥æ‰¾ï¼ˆå¤„ç†èŠ‚ç‚¹ç§»åŠ¨ï¼‰</p>
</blockquote>
<h2 data-id="heading-9">å®é™…æ¡ˆä¾‹ï¼šåˆ—è¡¨é‡æ’çš„DIFFè¿‡ç¨‹</h2>
<p>å‡è®¾æœ‰å¦‚ä¸‹åˆ—è¡¨æ›´æ–°ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// æ›´æ–°å‰</span>
&lt;<span class="hljs-selector-tag">ul</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">key</span>="<span class="hljs-selector-tag">A</span>"&gt;<span class="hljs-selector-tag">A</span>&lt;/<span class="hljs-selector-tag">li</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">key</span>="<span class="hljs-selector-tag">B</span>"&gt;<span class="hljs-selector-tag">B</span>&lt;/<span class="hljs-selector-tag">li</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">key</span>="<span class="hljs-selector-tag">C</span>"&gt;<span class="hljs-selector-tag">C</span>&lt;/<span class="hljs-selector-tag">li</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">key</span>="<span class="hljs-selector-tag">D</span>"&gt;<span class="hljs-selector-tag">D</span>&lt;/<span class="hljs-selector-tag">li</span>&gt;
&lt;/<span class="hljs-selector-tag">ul</span>&gt;

<span class="hljs-comment">// æ›´æ–°å(Dç§»åŠ¨åˆ°Bä¹‹å‰)</span>
&lt;<span class="hljs-selector-tag">ul</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">key</span>="<span class="hljs-selector-tag">A</span>"&gt;<span class="hljs-selector-tag">A</span>&lt;/<span class="hljs-selector-tag">li</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">key</span>="<span class="hljs-selector-tag">D</span>"&gt;<span class="hljs-selector-tag">D</span>&lt;/<span class="hljs-selector-tag">li</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">key</span>="<span class="hljs-selector-tag">B</span>"&gt;<span class="hljs-selector-tag">B</span>&lt;/<span class="hljs-selector-tag">li</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">key</span>="<span class="hljs-selector-tag">C</span>"&gt;<span class="hljs-selector-tag">C</span>&lt;/<span class="hljs-selector-tag">li</span>&gt;
&lt;/<span class="hljs-selector-tag">ul</span>&gt;
</code></pre>
<p><code>DIFF</code>è¿‡ç¨‹ï¼š</p>
<ol>
<li>ç¬¬ä¸€è½®éå†ï¼šæ¯”è¾ƒ<code>A-A</code>ï¼ˆå¤ç”¨ï¼‰ï¼Œæ¯”è¾ƒ<code>B-D</code>ï¼ˆ<code>key</code>ä¸åŒï¼Œè·³å‡ºç¬¬ä¸€è½®ï¼‰</li>
<li>å»ºç«‹Mapï¼š<code>{B: B_Fiber, C: C_Fiber, D: D_Fiber}</code></li>
<li>ç¬¬äºŒè½®éå†ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>å¤„ç†<code>D</code>ï¼šä»<code>Map</code>ä¸­æ‰¾åˆ°<code>D_Fiber</code>ï¼Œ<code>lastPlacedIndex=0</code>ï¼Œ<code>oldIndex=3&gt;0</code>ï¼Œä¸éœ€è¦ç§»åŠ¨</li>
<li>å¤„ç†<code>B</code>ï¼šä»<code>Map</code>ä¸­æ‰¾åˆ°<code>B_Fiber</code>ï¼Œ<code>lastPlacedIndex=3</code>ï¼Œ<code>oldIndex=1&lt;3</code>ï¼Œéœ€è¦ç§»åŠ¨</li>
<li>å¤„ç†<code>C</code>ï¼šä»<code>Map</code>ä¸­æ‰¾åˆ°<code>C_Fiber</code>ï¼Œ<code>lastPlacedIndex=3</code>ï¼Œ<code>oldIndex=2&lt;3</code>ï¼Œéœ€è¦ç§»åŠ¨</li>
</ul>
</li>
</ul>
<ol start="4">
<li>ç»“æœï¼š<code>D</code>ä¿æŒåŸä½ï¼Œ<code>B</code>å’Œ<code>C</code>å‘åç§»åŠ¨</li>
</ol>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p><code>React</code>çš„<code>DIFF</code>ç®—æ³•æ˜¯ä¸€ä¸ªç»è¿‡ç²¾å¿ƒè®¾è®¡å’Œä¸æ–­ä¼˜åŒ–çš„å¤æ‚ç³»ç»Ÿã€‚ä»<code>React16</code>çš„<code>Fiber</code>æ¶æ„åˆ°<code>React18</code>çš„å¹¶å‘ç‰¹æ€§ï¼Œ<code>DIFF</code>ç®—æ³•å§‹ç»ˆå›´ç»•ç€ä»¥ä¸‹æ ¸å¿ƒç›®æ ‡ï¼š</p>
<ol>
<li><strong>é«˜æ•ˆæ€§</strong>ï¼šé€šè¿‡<code>O(n)</code>å¤æ‚åº¦çš„ç®—æ³•å¿«é€Ÿæ‰¾å‡ºå·®å¼‚</li>
<li><strong>ç¨³å®šæ€§</strong>ï¼šç¡®ä¿åœ¨å¯ä¸­æ–­æ¸²æŸ“ä¸­<code>UI</code>çš„ä¸€è‡´æ€§</li>
<li><strong>å¯é¢„æµ‹æ€§</strong>ï¼šå¼€å‘è€…å¯ä»¥é€šè¿‡<code>key</code>ç­‰æ‰‹æ®µæ§åˆ¶æ›´æ–°è¡Œä¸º</li>
<li><strong>æ¸è¿›å¢å¼º</strong>ï¼šæ”¯æŒå¹¶å‘æ¸²æŸ“ï¼Œæé«˜åº”ç”¨å“åº”é€Ÿåº¦</li>
</ol>
<p>ä¸‹ä¸€ç« æˆ‘ä»¬å°†äº†è§£çœŸå®<code>DOM</code>çš„å˜æ›´ï¼š<code>commit</code>é˜¶æ®µ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºäº§ç‰©ä¼˜åŒ–ï¼šå¦‚ä½•è®©åŒ…ä½“ç§¯å‡å°‘ 60%ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598563188113031220</link>    <guid>https://juejin.cn/post/7598563188113031220</guid>    <pubDate>2026-01-26T01:48:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598563188113031220" data-draft-id="7598699872540344339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºäº§ç‰©ä¼˜åŒ–ï¼šå¦‚ä½•è®©åŒ…ä½“ç§¯å‡å°‘ 60%ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2026-01-26T01:48:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å°å°æ ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1081575170131006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºäº§ç‰©ä¼˜åŒ–ï¼šå¦‚ä½•è®©åŒ…ä½“ç§¯å‡å°‘ 60%ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575170131006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å°å°æ ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T01:48:48.000Z" title="Mon Jan 26 2026 01:48:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–çš„é“¾è·¯ä¸­ï¼Œå¦‚æœè¯´ CI/CD æ˜¯ä¼ é€å¸¦ï¼Œé‚£ä¹ˆ**æ„å»ºäº§ç‰©ï¼ˆBundleï¼‰**å°±æ˜¯æœ€ç»ˆäº¤ä»˜ç»™ç”¨æˆ·çš„â€œè´§ç‰©â€ã€‚å¯¹äºä¸€ä¸ªæ‹¥æœ‰ 8 å¹´ç»éªŒçš„å¼€å‘è€…æ¥è¯´ï¼Œä¼˜åŒ–ä½“ç§¯ä¸åªæ˜¯ä¸ºäº†â€œå¥½çœ‹â€ï¼Œæ›´æ˜¯ä¸ºäº†å‡å°‘ HTTP ä¼ è¾“æŸè€—ã€é™ä½æµè§ˆå™¨è§£æè€—æ—¶ï¼ˆParse Costï¼‰ï¼Œä»è€Œç›´æ¥æå‡ä¸šåŠ¡è½¬åŒ–ç‡ã€‚</p>
<p>æœ¬ç¯‡æˆ‘ä»¬å°†æ·±å…¥æ„å»ºå¼•æ“åº•å±‚ï¼Œå®æˆ˜æ‹†è§£å¦‚ä½•é€šè¿‡â€œå¤–ç§‘æ‰‹æœ¯çº§â€çš„æ‰‹æ®µï¼Œå°†åŒ…ä½“ç§¯ç¡¬ç”Ÿç”Ÿç æ‰ 60%ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ç˜¦èº«ç¬¬ä¸€æ­¥ï¼šä¾èµ–çš„â€œå¤§æ‰«é™¤â€</h2>
<p>å¾ˆå¤šæ—¶å€™ï¼ŒåŒ…ä½“ç§¯è‡ƒè‚¿æ˜¯å› ä¸ºæˆ‘ä»¬å¼•å…¥äº†â€œæ ¸æ­¦å™¨â€å´åªç”¨æ¥â€œåˆ‡èœâ€ã€‚</p>
<h3 data-id="heading-1">1. å½»åº•æ¸…ç®—â€œå·¨æ— éœ¸â€åº“</h3>
<ul>
<li>
<p><strong>Moment.js -&gt; dayjsï¼š</strong> Moment åŒ…å«å¤§é‡è¯­è¨€åŒ…ä¸”ä½“ç§¯å·¨å¤§ã€‚æ¢æˆ API å‡ ä¹ä¸€è‡´çš„ <code>dayjs</code>ï¼Œä½“ç§¯ç›´æ¥ä» 200KB+ é™è‡³ 2KBã€‚</p>
</li>
<li>
<p><strong>Lodash çš„æ­£ç¡®å§¿åŠ¿ï¼š</strong> æ‹’ç» <code>import _ from 'lodash'</code>ã€‚</p>
<ul>
<li><strong>æ–¹æ¡ˆ Aï¼š</strong> ä½¿ç”¨ <code>import get from 'lodash/get'</code>ã€‚</li>
<li><strong>æ–¹æ¡ˆ Bï¼š</strong> é…ç½® <code>babel-plugin-lodash</code> è‡ªåŠ¨æŒ‰éœ€å¼•å…¥ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">2. æ­ç§˜ Tree Shaking çš„â€œå¤±æ•ˆâ€çœŸç›¸</h3>
<p>ä¸ºä»€ä¹ˆæ˜æ˜ç”¨äº† ESMï¼Œæœ‰äº›ä»£ç è¿˜æ˜¯åˆ ä¸æ‰ï¼Ÿ</p>
<ul>
<li><strong>Side Effectsï¼ˆå‰¯ä½œç”¨ï¼‰ï¼š</strong> åªè¦æ¨¡å—é¡¶å±‚æœ‰å…¨å±€èµ‹å€¼æˆ–ä¿®æ”¹åŸå‹é“¾çš„è¡Œä¸ºï¼Œç¼–è¯‘å™¨å°±ä¸æ•¢åˆ å®ƒã€‚</li>
<li><strong>å®æˆ˜ï¼š</strong> åœ¨ <code>package.json</code> ä¸­æ˜ç¡®å£°æ˜ <code>"sideEffects": false</code>ï¼ˆæˆ–æŒ‡å®šç‰¹å®šæ–‡ä»¶ï¼‰ï¼Œè¿™æ˜¯å¼€å¯æè‡´å‹ç¼©çš„é€šè¡Œè¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€ è¿›é˜¶ï¼šåˆ†è€Œæ²»ä¹‹ï¼ˆCode Splittingï¼‰</h2>
<p>æŠŠä¸€ä¸ª 2MB çš„ä¸»åŒ…æ‹†æˆåä¸ª 200KB çš„å°åŒ…ï¼Œåˆ©ç”¨æµè§ˆå™¨çš„<strong>å¹¶å‘ä¸‹è½½</strong>å’Œ<strong>æŒä¹…åŒ–ç¼“å­˜</strong>ï¼Œç”¨æˆ·ä½“æ„Ÿé€Ÿåº¦ä¼šå¿«å¾—å¤šã€‚</p>
<h3 data-id="heading-4">1. è·¯ç”±çº§æ‡’åŠ è½½ï¼ˆDynamic Importï¼‰</h3>
<p>åœ¨ç°ä»£æ¡†æ¶ä¸­ï¼Œè¿™æ˜¯æ ‡é…ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">AdminDash</span> = () =&gt; import(<span class="hljs-string">'./views/AdminDash.vue'</span>)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-5">2. ç­–ç•¥åŒ–æ‹†åŒ…ï¼šSplitChunks</h3>
<p>ä¸è¦æŒ‡æœ›æ„å»ºå·¥å…·çš„é»˜è®¤é…ç½®ã€‚åœ¨ Webpack æˆ– Vite (Rollup) ä¸­æ‰‹åŠ¨åˆ’åˆ†ç¼“å­˜ç»„ï¼š</p>
<ul>
<li><strong>Runtime Chunkï¼š</strong> æå–å¼•å¯¼ä»£ç ï¼ˆManifestï¼‰ï¼Œé˜²æ­¢ä¸šåŠ¡ä»£ç å˜åŠ¨å¯¼è‡´ Hash å˜åŒ–ã€‚</li>
<li><strong>Vendor Chunkï¼š</strong> å°† <code>vue/react</code> ç­‰æå°‘å˜åŠ¨çš„æ¡†æ¶ä»£ç ç‹¬ç«‹æ‰“åŒ…ã€‚</li>
<li><strong>Commons Chunkï¼š</strong> æå–è¢«å¤šä¸ªé¡µé¢åŒæ—¶å¼•ç”¨çš„å…¬å…±ç»„ä»¶ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ åº•å±‚é»‘ç§‘æŠ€ï¼šç°ä»£è¯­æ³•ä¸å‹ç¼©</h2>
<h3 data-id="heading-7">1. ç›®æ ‡æµè§ˆå™¨ï¼šBrowserslist</h3>
<p>å¦‚æœä½ è¿˜åœ¨ä¸º IE11 æ‰“åŒ…ï¼Œé‚£ä¹ˆä½ çš„äº§ç‰©é‡Œä¼šå……æ–¥ç€å¤§é‡çš„ Polyfillï¼ˆè¡¥ä¸ä»£ç ï¼‰ã€‚</p>
<ul>
<li><strong>é…ç½®ï¼š</strong> ä¿®æ”¹ <code>.browserslistrc</code>ï¼Œæ”¾å¼ƒè¿‡æ—¶çš„æµè§ˆå™¨ã€‚</li>
<li><strong>ç»“æœï¼š</strong> ç§»é™¤å¤§é‡çš„ <code>core-js</code> æ³¨å…¥ï¼Œäº§ç‰©ç›´æ¥ç¼©æ°´ 20%-30%ã€‚</li>
</ul>
<h3 data-id="heading-8">2. å‹ç¼©å¼•æ“çš„æ›´è¿­ï¼šä» Terser åˆ° ESBuild/SWC</h3>
<ul>
<li>åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ <strong>ESBuild</strong> æˆ– <strong>Terser (Parallel mode)</strong> è¿›è¡Œæè‡´å‹ç¼©ã€‚</li>
<li>å¼€å¯ <code>drop_console: true</code>ï¼Œè‡ªåŠ¨å‰”é™¤æ‰€æœ‰ <code>console.log</code> æŒ‡ä»¤ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">å››ã€ ç»ˆææ€æ‹›ï¼šä»èµ„æºæœ¬èº«ä¸‹æ‰‹</h2>
<h3 data-id="heading-10">1. å›¾ç‰‡çš„â€œé™ç»´æ‰“å‡»â€</h3>
<p>å›¾ç‰‡é€šå¸¸å åŒ…ä½“ç§¯çš„å¤§å¤´ï¼Œä½†å®ƒä»¬ä¸è¯¥åœ¨ JS åŒ…é‡Œã€‚</p>
<ul>
<li><strong>WebP è½¬æ¢ï¼š</strong> åˆ©ç”¨ <code>image-minimizer-webpack-plugin</code> è‡ªåŠ¨å°†å›¾ç‰‡è½¬ä¸º WebP æ ¼å¼ã€‚</li>
<li><strong>å°å›¾å†…è”ï¼š</strong> è®¾ç½® <code>data-uri</code> é˜ˆå€¼ï¼ˆå¦‚ 4KBï¼‰ï¼Œå‡å°‘å°å›¾ç‰‡çš„ HTTP è¯·æ±‚æ•°ã€‚</li>
</ul>
<h3 data-id="heading-11">2. å¼€å¯ Gzip / Brotliï¼ˆå…¨æ ˆå¿…ä¼šï¼‰</h3>
<p>è¿™æ˜¯å·¥ç¨‹åŒ–ä¸è¿ç»´çš„é…åˆï¼š</p>
<ul>
<li>åœ¨æ„å»ºé˜¶æ®µç”Ÿæˆ <code>.gz</code> æˆ– <code>.br</code> æ–‡ä»¶ã€‚</li>
<li>é…ç½® Nginx å¼€å¯ <code>gzip_static on;</code>ã€‚Brotli çš„å‹ç¼©ç‡é€šå¸¸æ¯” Gzip è¿˜è¦é«˜å‡º 15%-20%ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-12">ğŸ’¡ ç»™å‰ç«¯å¼€å‘è€…çš„ç¡¬æ ¸è´´å£«</h2>
<ul>
<li><strong>å¯è§†åŒ–æ˜¯ä¼˜åŒ–çš„å‰æï¼š</strong> æ°¸è¿œå…ˆè·‘ä¸€é <code>webpack-bundle-analyzer</code> æˆ– <code>rollup-plugin-visualizer</code>ã€‚<strong>ä½ çœ‹ä¸è§çš„ Bug æ²¡æ³•ä¿®ï¼Œä½ çœ‹ä¸è§çš„ä½“ç§¯æ²¡æ³•å‡ã€‚</strong></li>
<li><strong>è­¦æƒ•ç¬¬ä¸‰æ–¹ SDKï¼š</strong> å¾ˆå¤šç»Ÿè®¡ã€åœ°å›¾ã€åœ¨çº¿å®¢æœçš„ SDK åŠå…¶åºå¤§ï¼Œå°½é‡é€šè¿‡ CDN å¼‚æ­¥åŠ è½½ï¼Œä¸è¦æ‰“åŒ…è¿›ä¸»åŒ…ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">ç»“è¯­</h3>
<p>äº§ç‰©ä¼˜åŒ–ä¸æ˜¯ä¸€æ¬¡æ€§çš„å·¥ä½œï¼Œè€Œæ˜¯ä¸€ä¸ªæŒç»­çš„è§‚æµ‹è¿‡ç¨‹ã€‚é€šè¿‡ä¾èµ–ç²¾ç®€ã€æ™ºèƒ½æ‹†åŒ…ã€ç°ä»£æ ‡å‡†å’Œé«˜æ•ˆå‹ç¼©ï¼ŒåŒ…ä½“ç§¯å‡å°‘ 60% å¹¶ä¸æ˜¯ç¥è¯ï¼Œè€Œæ˜¯å·¥ç¨‹åŒ–èƒ½åŠ›çš„è‡ªç„¶ä½“ç°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ä»£ç ä¸è„šæ‰‹æ¶ï¼šæ‰“é€ è‡ªç ”çš„ CLI å·¥å…·]]></title>    <link>https://juejin.cn/post/7598710324168179727</link>    <guid>https://juejin.cn/post/7598710324168179727</guid>    <pubDate>2026-01-26T01:49:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598710324168179727" data-draft-id="7598435950410874890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ä»£ç ä¸è„šæ‰‹æ¶ï¼šæ‰“é€ è‡ªç ”çš„ CLI å·¥å…·"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2026-01-26T01:49:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å°å°æ ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1081575170131006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ä»£ç ä¸è„šæ‰‹æ¶ï¼šæ‰“é€ è‡ªç ”çš„ CLI å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575170131006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å°å°æ ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T01:49:39.000Z" title="Mon Jan 26 2026 01:49:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¯¹äº 8 å¹´ç»éªŒçš„èµ„æ·±å¼€å‘è€…æ¥è¯´ï¼Œ <strong>â€œæ‡’â€æ˜¯æœ€é«˜çº§çš„èµç¾</strong>ã€‚å¦‚æœä½ å‘ç°è‡ªå·±åœ¨ä¸€ä¸ªæœˆå†…é‡å¤é…ç½®äº†ä¸‰æ¬¡åŒæ ·çš„ Lint è§„åˆ™ã€å¤åˆ¶äº†äº”æ¬¡åŒæ ·çš„ç›®å½•ç»“æ„ï¼Œé‚£ä¹ˆä½ å°±è¯¥æ„è¯†åˆ°ï¼š<strong>ä½ çš„ç”Ÿäº§åŠ›æ­£åœ¨è¢«è¿™ç§ä½æ•ˆçš„â€œæ¬è¿â€åå™¬ã€‚</strong></p>
<p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–ä½“ç³»ä¸­ï¼Œ<strong>CLIï¼ˆå‘½ä»¤è¡Œç•Œé¢ï¼‰å·¥å…·</strong>æ˜¯å°è£…å›¢é˜Ÿæœ€ä½³å®è·µã€å®ç°â€œä¸€é”®åŸºå»ºâ€çš„æ ¸å¿ƒæ­¦å™¨ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦â€œè‡ªç ”â€ CLIï¼Ÿ</h2>
<p>å¸‚é¢ä¸Šå·²ç»æœ‰ <code>create-react-app</code> æˆ– <code>vue-cli</code>ï¼Œä¸ºä»€ä¹ˆè¿˜è¦è‡ªç ”ï¼Ÿ</p>
<ol>
<li><strong>ä¸šåŠ¡å¼ºç»‘å®šï¼š</strong> å®˜æ–¹å·¥å…·æ˜¯æ™®é€‚çš„ï¼Œä½†è‡ªç ”å·¥å…·å¯ä»¥å†…ç½®å…¬å¸ç§æœ‰çš„ç»„ä»¶åº“ã€åŸ‹ç‚¹ SDKã€SSO ç™»å½•é€»è¾‘å’Œ CI/CD æ¨¡ç‰ˆã€‚</li>
<li><strong>æŠ€æœ¯æ ˆæ”¶æ•›ï¼š</strong> å¼ºåˆ¶å›¢é˜Ÿç»Ÿä¸€ä½¿ç”¨ pnpmã€ç‰¹å®šç‰ˆæœ¬çš„ TypeScript æˆ– Tailwind CSSï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬ã€‚</li>
<li><strong>æµç¨‹è‡ªåŠ¨åŒ–ï¼š</strong> é™¤äº†æ‹‰å–æ¨¡æ¿ï¼ŒCLI è¿˜å¯ä»¥é›†æˆè‡ªåŠ¨åˆ›å»º Git ä»“åº“ã€è‡ªåŠ¨åˆ†é…æƒé™ã€è‡ªåŠ¨ç”Ÿæˆ API ä»£ç ç­‰åŠŸèƒ½ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">äºŒã€ CLI å·¥å…·çš„â€œæƒåŠ›æ¸…å•â€ï¼šæ ¸å¿ƒæŠ€æœ¯é€‰å‹</h2>
<p>è¦å†™ä¸€ä¸ªä¸“ä¸šçš„ CLIï¼Œä½ éœ€è¦è¿™å¥—æˆç†Ÿçš„ Node.js å·¥å…·é“¾ï¼š</p>
<ul>
<li><strong><code>commander</code> / <code>yargs</code>ï¼š</strong> å‘½ä»¤å‚æ•°è§£æï¼ˆå¦‚ <code>my-cli create &lt;name&gt;</code>ï¼‰ã€‚</li>
<li><strong><code>inquirer</code> / <code>prompts</code>ï¼š</strong> å‘½ä»¤è¡Œäº¤äº’ï¼Œè®©ç”¨æˆ·åšé€‰æ‹©é¢˜æˆ–å¡«ç©ºé¢˜ã€‚</li>
<li><strong><code>chalk</code> / <code>picocolors</code>ï¼š</strong> è®©ä½ çš„ç»ˆç«¯è¾“å‡ºå˜å¾—äº”é¢œå…­è‰²ï¼ˆæˆåŠŸæ˜¯ç»¿çš„ï¼ŒæŠ¥é”™æ˜¯çº¢çš„ï¼‰ã€‚</li>
<li><strong><code>ora</code>ï¼š</strong> ç»ˆç«¯åŠ è½½åŠ¨ç”»ï¼ˆSpinnerï¼‰ï¼Œè®©ç­‰å¾…è¿‡ç¨‹ä¸ç„¦è™‘ã€‚</li>
<li><strong><code>execa</code>ï¼š</strong> å¢å¼ºç‰ˆçš„ <code>child_process</code>ï¼Œç”¨äºæ‰§è¡Œ git clone æˆ– pnpm installã€‚</li>
<li><strong><code>download-git-repo</code>ï¼š</strong> è¿œç¨‹ä¸‹è½½ GitHub/GitLab ä¸Šçš„æ¨¡ç‰ˆä»“åº“ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ å®æˆ˜ï¼šä¸‰æ­¥æ‰“é€ ä¸€ä¸ªé¡¹ç›®è„šæ‰‹æ¶</h2>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šå‘½ä»¤å®šä¹‰</h3>
<p>åœ¨ <code>bin/index.js</code> ä¸­å®šä¹‰å…¥å£ï¼Œåˆ©ç”¨ <code>commander</code> ç›‘å¬ <code>create</code> å‘½ä»¤ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>
<span class="hljs-keyword">const</span> { program } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'commander'</span>);

program
  .<span class="hljs-title function_">command</span>(<span class="hljs-string">'create &lt;project-name&gt;'</span>)
  .<span class="hljs-title function_">description</span>(<span class="hljs-string">'åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®æ¨¡æ¿'</span>)
  .<span class="hljs-title function_">action</span>(<span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
    <span class="hljs-comment">// é€»è¾‘ä»£ç </span>
  });

program.<span class="hljs-title function_">parse</span>(process.<span class="hljs-property">argv</span>);
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šäº¤äº’é—®è¯¢</h3>
<p>è¯¢é—®ç”¨æˆ·éœ€è¦ä»€ä¹ˆåŠŸèƒ½ï¼Œæ¯”å¦‚æ˜¯å¦éœ€è¦ Piniaã€æ˜¯å¦éœ€è¦ E2E æµ‹è¯•ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">const</span> questions = [
  {
    <span class="hljs-keyword">type</span>: <span class="hljs-string">'list'</span>,
    name: <span class="hljs-string">'template'</span>,
    message: <span class="hljs-string">'è¯·é€‰æ‹©é¡¹ç›®æ¨¡æ¿'</span>,
    choices: [<span class="hljs-string">'Vue3-Vite-Starter'</span>, <span class="hljs-string">'React-Next-Admin'</span>],
  },
  {
    <span class="hljs-keyword">type</span>: <span class="hljs-string">'confirm'</span>,
    name: <span class="hljs-string">'install'</span>,
    message: <span class="hljs-string">'æ˜¯å¦è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼Ÿ'</span>,
    <span class="hljs-keyword">default</span>: <span class="hljs-literal">true</span>,
  }
];
</code></pre>
<h3 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šæ¨¡ç‰ˆæ‹‰å–ä¸åŠ¨æ€æ¸²æŸ“</h3>
<ul>
<li><strong>é™æ€æ¨¡å¼ï¼š</strong> ç›´æ¥ä» GitLab ä»“åº“ <code>git clone</code> å¯¹åº”çš„åˆ†æ”¯ã€‚</li>
<li><strong>åŠ¨æ€æ¨¡å¼ï¼ˆæ›´é«˜çº§ï¼‰ï¼š</strong> ä½¿ç”¨ <code>handlebars</code> æ¨¡æ¿å¼•æ“ï¼Œæ ¹æ®ç”¨æˆ·åˆšæ‰çš„é€‰æ‹©ï¼ŒåŠ¨æ€ä¿®æ”¹ <code>package.json</code> ä¸­çš„å­—æ®µï¼ˆå¦‚é¡¹ç›®åç§°ã€ä½œè€…ã€ä¾èµ–é¡¹ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">å››ã€ è¿›é˜¶ï¼šä»è„šæ‰‹æ¶åˆ°ä½ä»£ç ï¼ˆLow-Codeï¼‰</h2>
<p>å¦‚æœ CLI è§£å†³çš„æ˜¯â€œä» 0 åˆ° 1â€çš„åŸºå»ºé—®é¢˜ï¼Œé‚£ä¹ˆ<strong>ä½ä»£ç /å¼±ä»£ç </strong>è§£å†³çš„å°±æ˜¯â€œä» 1 åˆ° Nâ€çš„æ•ˆç‡é—®é¢˜ã€‚</p>
<ol>
<li><strong>Schema é©±åŠ¨ä»£ç ç”Ÿæˆï¼š</strong> ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¯»å– Swagger/OpenAPI çš„ JSON ç»“æ„ï¼Œè‡ªåŠ¨ç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰å’Œ API è¯·æ±‚å‡½æ•°ã€‚</li>
<li><strong>åŒºå—ï¼ˆBlockï¼‰å¤ç”¨ï¼š</strong> ç±»ä¼¼ Ant Design Proï¼Œé€šè¿‡ CLI ä¸€é”®æ’å…¥ä¸€ä¸ªâ€œç™»å½•é¡µé¢åŒºå—â€æˆ–â€œè¡¨æ ¼ç­›é€‰åŒºå—â€ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ä»£ç ã€‚</li>
<li><strong>å†…è”è„šæœ¬ï¼ˆIn-place Scriptsï¼‰ï¼š</strong> æ¯”å¦‚å¼€å‘ä¸€ä¸ª <code>my-cli add-page &lt;name&gt;</code> å‘½ä»¤ï¼Œå®ƒèƒ½è‡ªåŠ¨åœ¨ <code>src/views</code> åˆ›å»ºæ–‡ä»¶ï¼Œå¹¶é¡ºä¾¿åœ¨ <code>router.js</code> é‡Œæ’å¥½è·¯ç”±é…ç½®ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-7">ğŸ’¡ ç»™å‰ç«¯å¼€å‘è€…çš„ç¡¬æ ¸è´´å£«</h2>
<ul>
<li><strong>ç‰ˆæœ¬ç®¡ç†ï¼š</strong> CLI è‡ªèº«ä¹Ÿè¦è®°å¾—åšç‰ˆæœ¬æ£€æŸ¥ï¼ˆæ¯”å¦‚æ£€æµ‹åˆ°æ—§ç‰ˆæœ¬æ—¶æç¤º <code>npm update -g my-cli</code>ï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´å›¢é˜Ÿæˆå‘˜ç”¨çš„æ¨¡ç‰ˆç‰ˆæœ¬ä¸ç»Ÿä¸€ã€‚</li>
<li><strong>æœ¬åœ°å¼€å‘è°ƒè¯•ï¼š</strong> åœ¨ CLI é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ <code>npm link</code>ï¼ˆæˆ– <code>pnpm link --global</code>ï¼‰ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨å…¨å±€ç›´æ¥ä½¿ç”¨ä½ æ­£åœ¨å¼€å‘çš„å‘½ä»¤äº†ã€‚</li>
<li><strong>åˆ«å¿˜äº† <code>chmod +x</code>ï¼š</strong> ç¡®ä¿ä½ çš„å…¥å£è„šæœ¬æœ‰æ‰§è¡Œæƒé™ï¼Œå¹¶ä¸”é¡¶éƒ¨å¸¦æœ‰ <code>#!/usr/bin/env node</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ç»“è¯­</h3>
<p>è‡ªç ” CLI æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆä»â€œä½¿ç”¨è€…â€å‘â€œå»ºè®¾è€…â€è½¬å˜çš„æ ‡å¿—ã€‚å®ƒæ²‰æ·€äº†ä½ çš„æŠ€æœ¯æ·±åº¦ï¼Œä¹Ÿå°†ä½ ä»ç¹ççš„é…ç½®ä¸­å½»åº•è§£è„±ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[raychart åŸºäº Vue çš„ 3D å›¾è¡¨å¯è§†åŒ–å®è·µï¼šç§»åŠ¨ç«¯ä¼˜å…ˆä»äº¤äº’åˆ°æ€§èƒ½çš„ä¸€æ¬¡ç³»ç»Ÿå‡çº§ ğŸš€]]></title>    <link>https://juejin.cn/post/7598734303174869044</link>    <guid>https://juejin.cn/post/7598734303174869044</guid>    <pubDate>2026-01-26T01:50:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598734303174869044" data-draft-id="7598734303174819892" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="raychart åŸºäº Vue çš„ 3D å›¾è¡¨å¯è§†åŒ–å®è·µï¼šç§»åŠ¨ç«¯ä¼˜å…ˆä»äº¤äº’åˆ°æ€§èƒ½çš„ä¸€æ¬¡ç³»ç»Ÿå‡çº§ ğŸš€"/> <meta itemprop="keywords" content="å‰ç«¯,æ•°æ®å¯è§†åŒ–,Vue.js"/> <meta itemprop="datePublished" content="2026-01-26T01:50:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€é¢—çƒ‚åœŸè±†"/> <meta itemprop="url" content="https://juejin.cn/user/764915822371912"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            raychart åŸºäº Vue çš„ 3D å›¾è¡¨å¯è§†åŒ–å®è·µï¼šç§»åŠ¨ç«¯ä¼˜å…ˆä»äº¤äº’åˆ°æ€§èƒ½çš„ä¸€æ¬¡ç³»ç»Ÿå‡çº§ ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/764915822371912/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€é¢—çƒ‚åœŸè±†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T01:50:48.000Z" title="Mon Jan 26 2026 01:50:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">raychart åŸºäº Vue çš„ 3D å›¾è¡¨å¯è§†åŒ–å®è·µï¼šç§»åŠ¨ç«¯ä¼˜å…ˆä»äº¤äº’åˆ°æ€§èƒ½çš„ä¸€æ¬¡ç³»ç»Ÿå‡çº§ ğŸš€</h2>
<p>å…ˆè¯´ç»“è®ºï¼šåš 3D å›¾è¡¨å¯è§†åŒ–ç¼–è¾‘å™¨æ—¶ï¼Œç§»åŠ¨ç«¯ä¼˜å…ˆå¹¶ä¸æ˜¯â€œè¿å°±å°å±â€ï¼Œè€Œæ˜¯å¸®ä½ æŠŠå¤æ‚åº¦æ”¶æ•›åˆ°æ­£ç¡®çš„åœ°æ–¹ã€‚3D å›¾è¡¨çš„ä¿¡æ¯å¯†åº¦é«˜ã€äº¤äº’å¤šã€æ¸²æŸ“é‡ï¼Œå¦‚æœæŒ‰æ¡Œé¢ç«¯æ€ç»´ç›´æ¥å †åŠŸèƒ½ï¼Œç»“æœé€šå¸¸æ˜¯åŠŸèƒ½é½å…¨ä½†ä½“éªŒå‰²è£‚ã€‚æˆ‘ä»¬åœ¨ raychart çš„ Vue æŠ€æœ¯æ ˆé‡ŒæŠŠç¼–è¾‘å™¨å…ˆæ‰“ç£¨æˆâ€œæ‰‹æœºä¹Ÿèƒ½é¡ºç•…ä½¿ç”¨â€çš„ä½“éªŒï¼Œå†å‘æ¡Œé¢æ‰©å±•ï¼Œæœ€ç»ˆç§»åŠ¨ç«¯æ›´å¥½ç”¨ã€æ¡Œé¢ç«¯ä¹Ÿæ›´æ¸…æ™°ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆ 3D å›¾è¡¨å¯è§†åŒ–æ›´éœ€è¦ç§»åŠ¨ç«¯ä¼˜å…ˆ ğŸ“±</h3>
<p>ç§»åŠ¨ç«¯é™åˆ¶ä¸æ˜¯åäº‹ï¼Œè€Œæ˜¯è®¾è®¡çš„å¤©ç„¶çº¦æŸã€‚å°å±å¹•ä¼šè¿«ä½¿ä½ é‡æ–°å®šä¹‰â€œæœ€é‡è¦çš„äº¤äº’è·¯å¾„â€ï¼Œä¹Ÿä¼šå€’é€¼ä½ æŠŠåŠŸèƒ½æ”¶æ•›æˆæ¸…æ™°çš„å±‚çº§ç»“æ„ã€‚å¯¹åŸºäº Vue çš„ 3D å›¾è¡¨å¯è§†åŒ–æ¥è¯´ï¼Œè¿™æ­£æ˜¯ä½“éªŒæå‡çš„å…³é”®ã€‚</p>
<ul>
<li>äº¤äº’è·¯å¾„æ›´çŸ­ï¼šç§»åŠ¨ç«¯éœ€è¦â€œå°‘æ­¥éª¤å®Œæˆå…³é”®ä»»åŠ¡â€</li>
<li>ä¿¡æ¯å±‚çº§æ›´æ¸…æ™°ï¼šæ§åˆ¶é¡¹å¿…é¡»åˆ†ç»„ã€æŠ˜å ã€èšç„¦</li>
<li>æ€§èƒ½æ›´ç¨³ï¼šç§»åŠ¨ç«¯çš„ç¡¬ä»¶é™åˆ¶é©±åŠ¨æˆ‘ä»¬ä¼˜åŒ–é»˜è®¤å€¼</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fchart3js.netlify.app%2F%23%2F" target="_blank" title="https://chart3js.netlify.app/#/" ref="nofollow noopener noreferrer">RayChart é¢„è§ˆåœ°å€:  https://chart3js.netlify.app/#/</a>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a90f667a248a40d9bc6aea593461dadb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6aKX54OC5Zyf6LGG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769998322&amp;x-signature=TlQ6bVdzJpaPsut%2B50X7zT2Mjy0%3D" alt="ScreenShot_2026-01-26_092915_641.png" loading="lazy"/></p>
<h3 data-id="heading-2">é¡¹ç›®ä¸­å¦‚ä½•è½åœ°ï¼šä»æ§åˆ¶æ¨¡å—çš„è¾¹ç•Œå¼€å§‹ ğŸ§©</h3>
<p>æˆ‘ä»¬æŠŠå›¾è¡¨è®¾ç½®æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ§åˆ¶æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ¸…æ™°çš„ä»»åŠ¡è¾¹ç•Œï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ•°æ®æ§åˆ¶ï¼šè¾“å…¥ä¸ç¼–è¾‘æ•°æ®ç‚¹ ğŸ§®</li>
<li>åæ ‡æ§åˆ¶ï¼šç®¡ç†åæ ‡ç³»ä¸ç»´åº¦æ˜ å°„ ğŸ§­</li>
<li>å…‰ç…§æ§åˆ¶ï¼šç¯å…‰ç±»å‹ã€å¼ºåº¦ä¸é˜´å½± ğŸ’¡</li>
<li>ä¸»é¢˜æ§åˆ¶ï¼šé…è‰²æ–¹æ¡ˆå’Œé»˜è®¤é¢œè‰² ğŸ¨</li>
</ul>
<p>è¿™ç§ç»“æ„ç›´æ¥æœåŠ¡ç§»åŠ¨ç«¯ä¼˜å…ˆçš„ç›®æ ‡ï¼šæŠŠå¤æ‚ç³»ç»Ÿæ‹†æˆå¯ç†è§£çš„å°å—ï¼Œè®©ç”¨æˆ·åœ¨å°å±å¹•ä¸Šä¹Ÿèƒ½é¡ºç•…å®Œæˆé…ç½®ã€‚æ¡Œé¢ç«¯åªæ˜¯å±•ç¤ºç©ºé—´æ›´å¤§ï¼Œä½†äº¤äº’è·¯å¾„ä¾ç„¶ä¿æŒç®€æ´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c978e947808345d8a2f68099e1aac78b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6aKX54OC5Zyf6LGG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769998322&amp;x-signature=1G%2FGpMvLKFGSo39qtKJTITDtGQ4%3D" alt="ScreenShot_2026-01-26_092942_569.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58ec649f094a45f79f6d98707ccaad73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6aKX54OC5Zyf6LGG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769998322&amp;x-signature=n%2BbYFXgItK8Jc%2FWUArmb4FWCqaE%3D" alt="ScreenShot_2026-01-26_092954_321.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8177ad2fd614861ad4d6b501da50395~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6aKX54OC5Zyf6LGG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769998322&amp;x-signature=mjGspFsDUgyZgZFcNFn3hd8niyU%3D" alt="ScreenShot_2026-01-26_092925_249.png" loading="lazy"/></p>
<h3 data-id="heading-3">ç§»åŠ¨ç«¯ä¼˜å…ˆå¸¦æ¥çš„ä¸‰ç±»æ”¶ç›Š âœ…</h3>
<h4 data-id="heading-4">1. äº¤äº’ä½“éªŒæ›´â€œå¯é¢„æœŸâ€ ğŸ¤</h4>
<p>ç§»åŠ¨ç«¯ç”¨æˆ·é€šå¸¸åªå…³å¿ƒæœ€æ ¸å¿ƒçš„æ“ä½œï¼šåˆ‡æ¢å›¾è¡¨ã€è°ƒå‚æ•°ã€é¢„è§ˆæ•ˆæœã€‚æˆ‘ä»¬æŠŠè¿™äº›åŠ¨ä½œæ”¾åœ¨æœ€çŸ­è·¯å¾„ä¸Šï¼Œæ¬¡è¦é…ç½®æ”¶è¿›æŠ˜å åŒºåŸŸã€‚ç»“æœæ˜¯æ¡Œé¢ç«¯ä¹ŸåŒæ ·æ¸…çˆ½ï¼Œç”¨æˆ·æ›´å¿«æ‰¾åˆ°å…³é”®è®¾ç½®ã€‚</p>
<h4 data-id="heading-5">2. è®¾è®¡ä¸€è‡´æ€§æ›´å¼º ğŸ§±</h4>
<p>ä¸ºäº†é€‚é…å°å±å¹•ï¼Œæˆ‘ä»¬ç»Ÿä¸€äº†ç»„ä»¶å¤§å°ã€é—´è·ã€é…è‰²å’ŒçŠ¶æ€æ ·å¼ï¼Œå½¢æˆç¨³å®šçš„ä¸€è‡´æ€§ã€‚è¿™ç§ä¸€è‡´æ€§ä¸€æ—¦å»ºç«‹ï¼Œæ¡Œé¢ç«¯ä¹ŸåŒæ­¥è·å¾—æ›´å¯é çš„è§†è§‰ä½“éªŒã€‚</p>
<h4 data-id="heading-6">3. æ€§èƒ½ä¼˜åŒ–æ›´æœ‰æ•ˆ âš¡</h4>
<p>3D å›¾è¡¨å¯è§†åŒ–çš„æ€§èƒ½ç“¶é¢ˆå¤šåœ¨å…‰ç…§ã€é˜´å½±ã€æè´¨ç­‰ç¯èŠ‚ã€‚ç§»åŠ¨ç«¯ä¼˜å…ˆçš„é™åˆ¶è¿«ä½¿æˆ‘ä»¬è®¾ç½®æ›´åˆç†çš„é»˜è®¤å€¼ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é»˜è®¤ç¯å…‰æ•°é‡æ›´å…‹åˆ¶</li>
<li>é˜´å½±ä¸ºå¯é€‰é¡¹è€Œéå¼ºåˆ¶é¡¹</li>
<li>æè´¨ç»†èŠ‚æ›´æ”¶æ•›</li>
</ul>
<p>è¿™äº›ä¼˜åŒ–ä¹Ÿè®©æ¡Œé¢ç«¯è·å¾—æ›´ç¨³å®šçš„å¸§ç‡å’Œæ›´ä½çš„åŠŸè€—ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89ee2863b2c44125b6235252828716ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6aKX54OC5Zyf6LGG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769998322&amp;x-signature=Yb6vXnthiDBGQE%2BYEsvmjn0f%2FSA%3D" alt="ScreenShot_2026-01-26_094809_782.png" loading="lazy"/></p>
<h3 data-id="heading-7">æ€»ç»“ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆä¸æ˜¯å¦¥åï¼Œè€Œæ˜¯æ•ˆç‡ç­–ç•¥ ğŸ¯</h3>
<p>ç§»åŠ¨ç«¯ä¼˜å…ˆçš„ä»·å€¼ä¸åœ¨äºâ€œåšä¸ªèƒ½åœ¨æ‰‹æœºä¸Šè·‘çš„ç‰ˆæœ¬â€ï¼Œè€Œåœ¨äºç”¨å®ƒä½œä¸ºä¸€ç§å¼ºçº¦æŸï¼Œè®©ç³»ç»Ÿæ›´ç®€å•ã€æ›´æ¸…æ™°ã€æ›´é«˜æ•ˆã€‚å¯¹ 3D å›¾è¡¨è¿™ç§å¤æ‚äº¤äº’åœºæ™¯æ¥è¯´ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼š</p>
<ul>
<li>å¿«é€Ÿæ”¶æ•›éœ€æ±‚è¾¹ç•Œ</li>
<li>å»ºç«‹æ˜ç¡®çš„æ§åˆ¶å±‚çº§</li>
<li>ç»Ÿä¸€ UI çš„é£æ ¼ä¸èŠ‚å¥</li>
<li>åŒæ—¶æå‡ç§»åŠ¨ç«¯ä¸æ¡Œé¢ç«¯ä½“éªŒ</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿåœ¨åš 3D å›¾è¡¨ã€Vue å¯è§†åŒ–ç¼–è¾‘å™¨æˆ–å¤æ‚é…ç½®ç³»ç»Ÿï¼Œå»ºè®®è¯•ç€ä»ç§»åŠ¨ç«¯å‡ºå‘è®¾è®¡ä¸€æ¬¡ï¼Œä½ ä¼šæ›´å¿«å‘ç°çœŸæ­£æœ‰ä»·å€¼çš„äº¤äº’è·¯å¾„ã€‚</p>
<h3 data-id="heading-8">å…³é”®è¯ ğŸ”</h3>
<p>3D å›¾è¡¨ã€3D å¯è§†åŒ–ã€Vueã€Vue3ã€å‰ç«¯å¯è§†åŒ–ã€å›¾è¡¨ç¼–è¾‘å™¨ã€ç§»åŠ¨ç«¯ä¼˜å…ˆã€äº¤äº’è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡åƒé€ã€Œç§»é™¤å…ƒç´ ã€ï¼šåŒæŒ‡é’ˆçš„æœ€æœ´ç´ ã€ä¹Ÿæœ€é‡è¦çš„å½¢æ€]]></title>    <link>https://juejin.cn/post/7598807837868916762</link>    <guid>https://juejin.cn/post/7598807837868916762</guid>    <pubDate>2026-01-26T02:15:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598807837868916762" data-draft-id="7596845113281331209" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡åƒé€ã€Œç§»é™¤å…ƒç´ ã€ï¼šåŒæŒ‡é’ˆçš„æœ€æœ´ç´ ã€ä¹Ÿæœ€é‡è¦çš„å½¢æ€"/> <meta itemprop="keywords" content="LeetCode,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-26T02:15:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="YukiMori23"/> <meta itemprop="url" content="https://juejin.cn/user/4022441007125707"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡åƒé€ã€Œç§»é™¤å…ƒç´ ã€ï¼šåŒæŒ‡é’ˆçš„æœ€æœ´ç´ ã€ä¹Ÿæœ€é‡è¦çš„å½¢æ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4022441007125707/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    YukiMori23
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:15:15.000Z" title="Mon Jan 26 2026 02:15:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>LeetCode 27ï½œç®€å•<br/>
æ ¸å¿ƒæ€æƒ³ï¼šå¿«æ…¢æŒ‡é’ˆï¼ˆåŒæŒ‡é’ˆï¼‰<br/>
å…³é”®è¯ï¼šåŸåœ°ä¿®æ”¹ã€è¦†ç›–ã€ä¸å…³å¿ƒé¡ºåº</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€é¢˜ç›®å›é¡¾</h2>
<p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªå€¼ <code>val</code>ï¼Œä½ éœ€è¦ <strong>åŸåœ°ç§»é™¤æ‰€æœ‰ç­‰äº <code>val</code> çš„å…ƒç´ </strong>ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚</p>
<p>è¦æ±‚ï¼š</p>
<ul>
<li>ä¸ä½¿ç”¨é¢å¤–æ•°ç»„</li>
<li>ä¸å…³å¿ƒæ–°æ•°ç»„åé¢çš„å†…å®¹</li>
<li>è¿”å›çš„æ˜¯â€œæœ‰æ•ˆå…ƒç´ çš„é•¿åº¦â€</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">nums</span> = [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], val = <span class="hljs-number">3</span>
è¿”å› 2
nums å‰ 2 ä¸ªå…ƒç´ ä¸º <span class="hljs-section">[2,2]</span>
</code></pre>
<hr/>
<h2 data-id="heading-1">äºŒã€è¿™é“é¢˜æœ€å®¹æ˜“è¸©çš„å‘</h2>
<p>å¾ˆå¤šäººä¸€å¼€å§‹ä¼šçº ç»“ï¼š</p>
<ul>
<li>â€œåˆ å…ƒç´ åæ•°ç»„æ€ä¹ˆå˜ï¼Ÿâ€</li>
<li>â€œæ˜¯ä¸æ˜¯è¦çœŸçš„æŠŠæ•°ç»„ç¼©çŸ­ï¼Ÿâ€</li>
<li>â€œåé¢çš„å€¼è¦ä¸è¦æ¸…ç©ºï¼Ÿâ€</li>
</ul>
<p>ä½†é¢˜ç›®å…¶å®å·²ç»å·å·å‘Šè¯‰ä½ ç­”æ¡ˆäº†ï¼š</p>
<blockquote>
<p><strong>ä½ åªéœ€è¦ä¿è¯å‰ k ä¸ªå…ƒç´ æ˜¯æ­£ç¡®çš„ï¼Œåé¢æ˜¯ä»€ä¹ˆä¸é‡è¦ã€‚</strong></p>
</blockquote>
<p>è¿™ä¸€ç‚¹éå¸¸å…³é”®ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒæ€è·¯ï¼šåŒæŒ‡é’ˆåœ¨â€œåšä»€ä¹ˆâ€ï¼Ÿ</h2>
<p>æˆ‘ä»¬ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼š</p>
<ul>
<li><code>right</code>ï¼šæ‰«ææ•´ä¸ªæ•°ç»„ï¼ˆè¯»ï¼‰</li>
<li><code>left</code>ï¼šæŒ‡å‘ä¸‹ä¸€ä¸ªâ€œåº”è¯¥è¢«ä¿ç•™ä¸‹æ¥çš„ä½ç½®â€ï¼ˆå†™ï¼‰</li>
</ul>
<p>å®ƒä»¬çš„åˆ†å·¥éå¸¸æ˜ç¡®ï¼š</p>
<blockquote>
<p><strong>right è´Ÿè´£çœ‹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œleft åªåœ¨â€œé‡åˆ°åˆæ³•å…ƒç´ â€æ—¶å‰è¿›ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">å››ã€ä»£ç å®ç°ï¼ˆJavaï¼‰</h2>
<pre><code class="hljs language-ini" lang="ini">class Solution {
    public int removeElement(int<span class="hljs-section">[]</span> nums, int val) {
        int <span class="hljs-attr">n</span> = nums.length<span class="hljs-comment">;</span>
        int <span class="hljs-attr">left</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>

        for (int <span class="hljs-attr">right</span> = <span class="hljs-number">0</span><span class="hljs-comment">; right &lt; n; right++) {</span>
            if (nums<span class="hljs-section">[right]</span> != val) {
                nums<span class="hljs-section">[left]</span> = nums<span class="hljs-section">[right]</span><span class="hljs-comment">;</span>
                left++<span class="hljs-comment">;</span>
            }
        }

        return left<span class="hljs-comment">;</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-4">äº”ã€é€è¡Œæ‹†è§£è¿™æ®µä»£ç çš„â€œçœŸå®å«ä¹‰â€</h2>
<h3 data-id="heading-5">1. <code>left</code> æŒ‡é’ˆçš„æ„ä¹‰</h3>
<pre><code class="hljs language-ini" lang="ini">int <span class="hljs-attr">left</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
</code></pre>
<p><code>left</code> æ°¸è¿œæŒ‡å‘ï¼š</p>
<blockquote>
<p><strong>ä¸‹ä¸€ä¸ªå¯ä»¥æ”¾â€œæœ‰æ•ˆå…ƒç´ â€çš„ä½ç½®</strong></p>
</blockquote>
<p>å®ƒä¸æ˜¯åœ¨æ‰¾ valï¼Œä¹Ÿä¸æ˜¯åœ¨åˆ é™¤å…ƒç´ ï¼Œè€Œæ˜¯åœ¨â€œç»´æŠ¤ç»“æœæ•°ç»„çš„é•¿åº¦â€ã€‚</p>
<hr/>
<h3 data-id="heading-6">2. <code>right</code> æŒ‡é’ˆåœ¨å¹²å˜›ï¼Ÿ</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-keyword">right</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-keyword">right</span> <span class="hljs-operator">&lt;</span> n; <span class="hljs-keyword">right</span><span class="hljs-operator">+</span><span class="hljs-operator">+</span>) {
</code></pre>
<p><code>right</code> æ˜¯ä¸€ä¸ª<strong>çº¯æ‰«ææŒ‡é’ˆ</strong>ï¼š</p>
<ul>
<li>ä»å¤´åˆ°å°¾çœ‹ä¸€éæ•°ç»„</li>
<li>ä¸å›å¤´ã€ä¸è·³è·ƒ</li>
<li>ä¿è¯æ¯ä¸ªå…ƒç´ åªçœ‹ä¸€æ¬¡</li>
</ul>
<hr/>
<h3 data-id="heading-7">3. ä¸ºä»€ä¹ˆåªåœ¨ <code>!= val</code> æ—¶æ‰èµ‹å€¼ï¼Ÿ</h3>
<pre><code class="hljs language-ini" lang="ini">if (nums<span class="hljs-section">[right]</span> != val) {
    nums<span class="hljs-section">[left]</span> = nums<span class="hljs-section">[right]</span><span class="hljs-comment">;</span>
    left++<span class="hljs-comment">;</span>
}
</code></pre>
<p>è¿™ä¸€æ­¥éå¸¸ç²¾é«“ï¼š</p>
<ul>
<li>
<p>å¦‚æœå½“å‰å…ƒç´ æ˜¯ <code>val</code></p>
<ul>
<li>ç›´æ¥è·³è¿‡ï¼Œç›¸å½“äºâ€œåˆ æ‰â€</li>
</ul>
</li>
<li>
<p>å¦‚æœä¸æ˜¯ <code>val</code></p>
<ul>
<li>æŠŠå®ƒè¦†ç›–å†™åˆ° <code>left</code> çš„ä½ç½®</li>
<li><code>left</code> å‰è¿›ï¼Œè¡¨ç¤ºæœ‰æ•ˆé•¿åº¦ +1</li>
</ul>
</li>
</ul>
<p><strong>æ³¨æ„ï¼šè¿™æ˜¯â€œè¦†ç›–â€ï¼Œä¸æ˜¯äº¤æ¢ã€‚</strong></p>
<hr/>
<h2 data-id="heading-8">å…­ã€ç”¨ä¸€ä¸ªå…·ä½“ä¾‹å­èµ°ä¸€é</h2>
<p>è¾“å…¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">nums</span> = [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">2</span>]
<span class="hljs-attr">val</span> = <span class="hljs-number">2</span>
</code></pre>
<p>æ‰§è¡Œè¿‡ç¨‹ï¼š</p>




































































<table><thead><tr><th>right</th><th>nums[right]</th><th>æ˜¯å¦ä¿ç•™</th><th>left</th><th>nums å‰éƒ¨</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>æ˜¯</td><td>1</td><td>[0]</td></tr><tr><td>1</td><td>1</td><td>æ˜¯</td><td>2</td><td>[0,1]</td></tr><tr><td>2</td><td>2</td><td>å¦</td><td>2</td><td>[0,1]</td></tr><tr><td>3</td><td>2</td><td>å¦</td><td>2</td><td>[0,1]</td></tr><tr><td>4</td><td>3</td><td>æ˜¯</td><td>3</td><td>[0,1,3]</td></tr><tr><td>5</td><td>0</td><td>æ˜¯</td><td>4</td><td>[0,1,3,0]</td></tr><tr><td>6</td><td>4</td><td>æ˜¯</td><td>5</td><td>[0,1,3,0,4]</td></tr><tr><td>7</td><td>2</td><td>å¦</td><td>5</td><td>[0,1,3,0,4]</td></tr></tbody></table>
<p>æœ€ç»ˆè¿”å› <code>left = 5</code>ã€‚</p>
<hr/>
<h2 data-id="heading-9">ä¸ƒã€ä¸ºä»€ä¹ˆè¿™é“é¢˜ä¸éœ€è¦äº¤æ¢ï¼Ÿ</h2>
<p>æœ‰äº›åŒæŒ‡é’ˆé¢˜ä¼šç”¨â€œå·¦å³äº¤æ¢â€ï¼Œä½†è¿™é‡Œä¸éœ€è¦ï¼ŒåŸå› æ˜¯ï¼š</p>
<ul>
<li>é¢˜ç›®ä¸è¦æ±‚ä¿ç•™åŸæœ‰é¡ºåºä¹‹å¤–çš„ä»»ä½•ä¿¡æ¯</li>
<li>æˆ‘ä»¬åªå…³å¿ƒâ€œå“ªäº›å€¼ç•™ä¸‹â€</li>
<li>è¦†ç›–å†™å…¥æ¯”äº¤æ¢æ›´ç®€å•ã€æ›´ç¨³å®š</li>
</ul>
<p>è¿™ç±»å†™æ³•ä¹Ÿè¢«ç§°ä¸ºï¼š</p>
<blockquote>
<p><strong>æ…¢æŒ‡é’ˆæ„é€ ç»“æœï¼Œå¿«æŒ‡é’ˆéå†è¾“å…¥</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-10">å…«ã€æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦</h2>
<ul>
<li>
<p>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n)</code></p>
<ul>
<li>æ¯ä¸ªå…ƒç´ åªçœ‹ä¸€æ¬¡</li>
</ul>
</li>
<li>
<p>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(1)</code></p>
<ul>
<li>åŸåœ°ä¿®æ”¹ï¼Œæ²¡æœ‰é¢å¤–æ•°ç»„</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-11">ä¹ã€è¿™é“é¢˜åœ¨æ•´ä¸ªåŒæŒ‡é’ˆä½“ç³»é‡Œçš„ä½ç½®</h2>
<p>è¿™æ˜¯<strong>æœ€åŸºç¡€ã€æœ€å¹²å‡€</strong>çš„åŒæŒ‡é’ˆæ¨¡å‹ï¼š</p>
<ul>
<li>æ²¡æœ‰æ’åº</li>
<li>æ²¡æœ‰è¾¹ç•Œåšå¼ˆ</li>
<li>æ²¡æœ‰å¤æ‚æ¡ä»¶</li>
</ul>
<p>ä½†å®ƒæ˜¯ä¸‹é¢è¿™äº›é¢˜çš„â€œåœ°åŸºâ€ï¼š</p>
<ul>
<li>ç§»é™¤é‡å¤å…ƒç´ </li>
<li>ç§»åŠ¨é›¶</li>
<li>æœ‰æ•ˆæ•°ç»„é•¿åº¦ç±»é—®é¢˜</li>
<li>åŸåœ°è¿‡æ»¤é—®é¢˜</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“å®ƒçš„æ€æƒ³ï¼š</p>
<blockquote>
<p><strong>ç”¨ä¸€ä¸ªæŒ‡é’ˆéå†ä¸–ç•Œï¼Œç”¨å¦ä¸€ä¸ªæŒ‡é’ˆæ„é€ ç­”æ¡ˆã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-12">åã€æœ€åçš„å°æ€»ç»“</h2>
<p>è¿™é“é¢˜çš„éš¾ç‚¹ä¸åœ¨ä»£ç ï¼Œè€Œåœ¨è§‚å¿µè½¬å˜ï¼š</p>
<ul>
<li>ä¸è¦æ‰§ç€äºâ€œåˆ é™¤â€</li>
<li>æŠŠé—®é¢˜è½¬åŒ–ä¸ºâ€œä¿ç•™ä»€ä¹ˆâ€</li>
<li>ç”¨æŒ‡é’ˆå»æè¿°â€œçŠ¶æ€å˜åŒ–â€</li>
</ul>
<p>å½“ä½ çœŸæ­£ç†è§£äº†è¿™é“é¢˜ï¼Œ<br/>
åé¢å¾ˆå¤šæ•°ç»„é¢˜éƒ½ä¼šçªç„¶å˜å¾—é¡ºçœ¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§»åŠ¨ç«¯ Web å¼€å‘å­¦ä¹ ç¬”è®°ï¼šä»è§†å£åˆ°æµå¼å¸ƒå±€ï¼Œä¸€ç¯‡å¸¦ä½ çœŸæ­£å…¥é—¨]]></title>    <link>https://juejin.cn/post/7599268297202761766</link>    <guid>https://juejin.cn/post/7599268297202761766</guid>    <pubDate>2026-01-26T02:16:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599268297202761766" data-draft-id="7598499504170369062" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§»åŠ¨ç«¯ Web å¼€å‘å­¦ä¹ ç¬”è®°ï¼šä»è§†å£åˆ°æµå¼å¸ƒå±€ï¼Œä¸€ç¯‡å¸¦ä½ çœŸæ­£å…¥é—¨"/> <meta itemprop="keywords" content="CSS,HTML"/> <meta itemprop="datePublished" content="2026-01-26T02:16:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="YukiMori23"/> <meta itemprop="url" content="https://juejin.cn/user/4022441007125707"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§»åŠ¨ç«¯ Web å¼€å‘å­¦ä¹ ç¬”è®°ï¼šä»è§†å£åˆ°æµå¼å¸ƒå±€ï¼Œä¸€ç¯‡å¸¦ä½ çœŸæ­£å…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4022441007125707/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    YukiMori23
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:16:22.000Z" title="Mon Jan 26 2026 02:16:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€å§‹ç§»åŠ¨ç«¯ Web å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä¸€ç›´ä»¥ä¸ºã€Œç§»åŠ¨ç«¯å°±æ˜¯æŠŠ PC é¡µé¢ç¼©å°ã€ã€‚<br/>
çœŸæ­£ç³»ç»Ÿå­¦å®Œä¸€è½®ä¹‹åæ‰å‘ç°ï¼Œ<strong>è§†å£ã€åƒç´ æ¯”ã€äºŒå€å›¾ã€å¸ƒå±€æ–¹æ¡ˆ</strong>ï¼Œæ¯ä¸€ä¸ªç‚¹éƒ½å†³å®šäº†é¡µé¢ä½“éªŒçš„å¥½åã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨å­¦ä¹  <strong>ç§»åŠ¨ç«¯ Web å¼€å‘ï¼ˆæµå¼å¸ƒå±€æ–¹å‘ï¼‰</strong> æ—¶çš„å®Œæ•´æ€»ç»“ï¼Œé€‚åˆåˆšä» PC ç«¯è½¬å‘ç§»åŠ¨ç«¯ï¼Œæˆ–è€…å¯¹ç§»åŠ¨ç«¯æ¦‚å¿µæ¯”è¾ƒæ¨¡ç³Šçš„åŒå­¦ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ç§»åŠ¨ç«¯å¼€å‘çš„ç°çŠ¶ä¸ç‰¹ç‚¹</h2>
<h3 data-id="heading-1">1. ç§»åŠ¨ç«¯æµè§ˆå™¨ç°çŠ¶</h3>
<p>ç§»åŠ¨ç«¯å¸¸è§æµè§ˆå™¨åŒ…æ‹¬ï¼š</p>
<ul>
<li>UC æµè§ˆå™¨</li>
<li>QQ æµè§ˆå™¨</li>
<li>ç™¾åº¦æ‰‹æœºæµè§ˆå™¨</li>
<li>Safariï¼ˆiOSï¼‰</li>
<li>Chromeï¼ˆAndroidï¼‰</li>
</ul>
<p>ä¸€ä¸ªéå¸¸é‡è¦çš„äº‹å®æ˜¯ï¼š</p>
<p><strong>å›½å†…ä¸»æµç§»åŠ¨ç«¯æµè§ˆå™¨ï¼ŒåŸºæœ¬éƒ½åŸºäº WebKit å†…æ ¸ã€‚</strong></p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>H5 + CSS3 å¯ä»¥æ”¾å¿ƒä½¿ç”¨</li>
<li>ç§æœ‰å‰ç¼€é‡ç‚¹å…³æ³¨ <code>-webkit-</code></li>
<li>ä¸éœ€è¦åƒ PC æ—¶ä»£é‚£æ ·è¢« IE æŠ˜ç£¨</li>
</ul>
<hr/>
<h3 data-id="heading-2">2. å±å¹•ç¢ç‰‡åŒ–é—®é¢˜</h3>
<p>ç§»åŠ¨è®¾å¤‡çš„åˆ†è¾¨ç‡æå…¶ç¢ç‰‡åŒ–ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>Androidï¼š720Ã—1280ã€1080Ã—1920ã€2Kã€4K</li>
<li>iPhoneï¼š750Ã—1334ã€1242Ã—2208 ç­‰</li>
</ul>
<p>ä½†ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼š</p>
<p><strong>ä¸éœ€è¦çº ç»“ dpã€dpiã€ppi ç­‰æ¦‚å¿µ</strong><br/>
æˆ‘ä»¬å…³å¿ƒçš„æ˜¯ï¼š<br/>
CSS åƒç´ å¦‚ä½•æ˜ å°„åˆ°è®¾å¤‡å±å¹•ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€è§†å£ï¼ˆViewportï¼‰æ˜¯ç§»åŠ¨ç«¯çš„ç¬¬ä¸€é“é—¨æ§›</h2>
<p>å¾ˆå¤šç§»åŠ¨ç«¯å¸ƒå±€é—®é¢˜ï¼Œæ ¹æºéƒ½åœ¨ <strong>è§†å£æ²¡ç†è§£æ¸…æ¥š</strong>ã€‚</p>
<h3 data-id="heading-4">1. ä¸‰ç§è§†å£çš„åŒºåˆ«</h3>
<h4 data-id="heading-5">1ï¼‰å¸ƒå±€è§†å£ï¼ˆLayout Viewportï¼‰</h4>
<ul>
<li>æµè§ˆå™¨é»˜è®¤çš„å¸ƒå±€å®½åº¦</li>
<li>å¤§å¤šæ•°ç§»åŠ¨ç«¯é»˜è®¤æ˜¯ <strong>980px</strong></li>
<li>ç”¨æ¥å…¼å®¹æ—©æœŸ PC é¡µé¢</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ <strong>ä¸åŠ  viewport æ ‡ç­¾æ—¶ï¼Œé¡µé¢ä¼šæ•´ä½“ç¼©å°</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-6">2ï¼‰è§†è§‰è§†å£ï¼ˆVisual Viewportï¼‰</h4>
<ul>
<li>ç”¨æˆ·å½“å‰çœ‹åˆ°çš„åŒºåŸŸ</li>
<li>å¯ä»¥é€šè¿‡æ‰‹æŒ‡ç¼©æ”¾æ”¹å˜</li>
<li>ä¸å½±å“å¸ƒå±€è§†å£</li>
</ul>
<hr/>
<h4 data-id="heading-7">3ï¼‰ç†æƒ³è§†å£ï¼ˆIdeal Viewportï¼‰</h4>
<ul>
<li>è®¾å¤‡æœ€ç†æƒ³çš„å±•ç¤ºå®½åº¦</li>
<li>è®¾å¤‡æœ‰å¤šå®½ï¼Œå¸ƒå±€å°±æœ‰å¤šå®½</li>
<li>ç§»åŠ¨ç«¯å¼€å‘çœŸæ­£æƒ³è¦çš„è§†å£</li>
</ul>
<hr/>
<h3 data-id="heading-8">2. æ ‡å‡† viewport å†™æ³•ï¼ˆå¿…é¡»æŒæ¡ï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;meta 
  <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> 
  <span class="hljs-attr">content</span>=<span class="hljs-string">"
    width=device-width,
    initial-scale=1.0,
    maximum-scale=1.0,
    minimum-scale=1.0,
    user-scalable=no
  "</span>
&gt;
</code></pre>
<p>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š</p>
<ul>
<li>å¸ƒå±€è§†å£ç­‰äºè®¾å¤‡å®½åº¦</li>
<li>é»˜è®¤ä¸ç¼©æ”¾</li>
<li>ç¦æ­¢ç”¨æˆ·æ‰‹åŠ¨ç¼©æ”¾</li>
</ul>
<p>è¿™æ˜¯<strong>ç§»åŠ¨ç«¯é¡µé¢çš„æ ‡é…</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€äºŒå€å›¾ä¸åƒç´ æ¯”ï¼šä¸ºä»€ä¹ˆå›¾ç‰‡ä¼šæ¨¡ç³Š</h2>
<h3 data-id="heading-10">1. ç‰©ç†åƒç´  vs CSS åƒç´ </h3>
<p>åœ¨ Retina å±å¹•ä¸‹ï¼š</p>
<ul>
<li>1 ä¸ª CSS åƒç´  â‰  1 ä¸ªç‰©ç†åƒç´ </li>
<li>iPhone å¸¸è§çš„æ˜¯ <strong>2 å€ã€3 å€åƒç´ æ¯”</strong></li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>é¡µé¢ä¸Šæ˜¾ç¤º 50Ã—50</li>
<li>å®é™…éœ€è¦ 100Ã—100 æˆ– 150Ã—150 çš„å›¾ç‰‡èµ„æº</li>
</ul>
<hr/>
<h3 data-id="heading-11">2. äºŒå€å›¾çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>å›¾ç‰‡æœ¬èº«ä½¿ç”¨æ›´å¤§çš„å°ºå¯¸ï¼Œä½†åœ¨ CSS ä¸­å‹ç¼©æ˜¾ç¤ºã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
}
</code></pre>
<p>å¦‚æœåŸå›¾æ˜¯ 100Ã—100ï¼Œå°±èƒ½åœ¨ Retina å±ä¸Šä¿æŒæ¸…æ™°ã€‚</p>
<hr/>
<h3 data-id="heading-12">3. èƒŒæ™¯å›¾çš„å¤„ç†æ–¹å¼</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">bg@2x.png</span>);
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">50px</span> <span class="hljs-number">50px</span>;
}
</code></pre>
<p>å…³é”®ç‚¹åœ¨äºï¼š</p>
<ul>
<li>å›¾ç‰‡æ˜¯äºŒå€å›¾</li>
<li><code>background-size</code> å†™æˆè®¾è®¡ç¨¿å°ºå¯¸</li>
</ul>
<hr/>
<h2 data-id="heading-13">å››ã€ç§»åŠ¨ç«¯å¼€å‘æ–¹æ¡ˆé€‰æ‹©</h2>
<h3 data-id="heading-14">1. ä¸¤ç§ä¸»æµæ–¹æ¡ˆ</h3>
<h4 data-id="heading-15">æ–¹æ¡ˆä¸€ï¼šå•ç‹¬åˆ¶ä½œç§»åŠ¨ç«¯é¡µé¢ï¼ˆä¸»æµï¼‰</h4>
<ul>
<li>m.jd.com</li>
<li>m.taobao.com</li>
</ul>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¸“é—¨ä¸ºæ‰‹æœºè®¾è®¡</li>
<li>æ€§èƒ½å’Œä½“éªŒæœ€å¥½</li>
<li>ç»´æŠ¤æˆæœ¬è¾ƒé«˜</li>
</ul>
<hr/>
<h4 data-id="heading-16">æ–¹æ¡ˆäºŒï¼šå“åº”å¼é¡µé¢</h4>
<ul>
<li>åŒä¸€å¥— HTML</li>
<li>é€šè¿‡åª’ä½“æŸ¥è¯¢é€‚é…ä¸åŒè®¾å¤‡</li>
</ul>
<p>ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li>æ ·å¼å¤æ‚</li>
<li>ç»´æŠ¤æˆæœ¬é«˜</li>
<li>ç§»åŠ¨ç«¯ä½“éªŒä¸€èˆ¬</li>
</ul>
<p><strong>å®é™…é¡¹ç›®ä¸­ï¼Œå¤§å‚åŸºæœ¬éƒ½é€‰æ‹©ç¬¬ä¸€ç§æ–¹æ¡ˆã€‚</strong></p>
<hr/>
<h2 data-id="heading-17">äº”ã€ç§»åŠ¨ç«¯æŠ€æœ¯è§£å†³æ–¹æ¡ˆæ±‡æ€»</h2>
<h3 data-id="heading-18">1. CSS åˆå§‹åŒ–æ¨è normalize.css</h3>
<p>ç›¸æ¯” reset.cssï¼Œnormalize.css çš„ä¼˜ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä¿ç•™æœ‰ä»·å€¼çš„é»˜è®¤æ ·å¼</li>
<li>ä¿®å¤æµè§ˆå™¨å·®å¼‚</li>
<li>æ¨¡å—åŒ–ã€æ–‡æ¡£å®Œå–„</li>
</ul>
<hr/>
<h3 data-id="heading-19">2. CSS3 ç›’å­æ¨¡å‹ï¼ˆç§»åŠ¨ç«¯å¼ºçƒˆæ¨èï¼‰</h3>
<pre><code class="hljs language-css" lang="css">* {
  <span class="hljs-attribute">box-sizing</span>: border-box;
}
</code></pre>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>paddingã€border ä¸ä¼šæ’‘å¤§ç›’å­</li>
<li>å¸ƒå±€æ›´ç›´è§‚</li>
<li>éå¸¸é€‚åˆç§»åŠ¨ç«¯</li>
</ul>
<hr/>
<h3 data-id="heading-20">3. ç§»åŠ¨ç«¯å¸¸è§ç‰¹æ®Šæ ·å¼</h3>
<pre><code class="hljs language-css" lang="css">* {
  -webkit-tap-highlight-<span class="hljs-attribute">color</span>: transparent;
}

<span class="hljs-selector-tag">input</span>,
<span class="hljs-selector-tag">button</span> {
  -webkit-appearance: none;
}

<span class="hljs-selector-tag">img</span>,
<span class="hljs-selector-tag">a</span> {
  -webkit-touch-callout: none;
}
</code></pre>
<p>è¿™äº›æ ·å¼å¯ä»¥ï¼š</p>
<ul>
<li>å»æ‰ç‚¹å‡»é«˜äº®</li>
<li>ç»Ÿä¸€è¡¨å•æ ·å¼</li>
<li>ç¦æ­¢é•¿æŒ‰å¼¹å‡ºèœå•</li>
</ul>
<hr/>
<h2 data-id="heading-21">å…­ã€ç§»åŠ¨ç«¯å¸¸è§å¸ƒå±€æ–¹å¼</h2>
<h3 data-id="heading-22">1. æµå¼å¸ƒå±€ï¼ˆç™¾åˆ†æ¯”å¸ƒå±€ï¼‰</h3>
<p>æµå¼å¸ƒå±€çš„æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ul>
<li>å®½åº¦ä½¿ç”¨ç™¾åˆ†æ¯”</li>
<li>éšå±å¹•å˜åŒ–è‡ªé€‚åº”</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.item</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-23">2. é™åˆ¶æœ€å¤§æœ€å°å®½åº¦ï¼ˆå¸¸ç”¨æŠ€å·§ï¼‰</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">320px</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">640px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
}
</code></pre>
<p>å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>é˜²æ­¢é¡µé¢è¿‡çª„æˆ–è¿‡å®½</li>
<li>å¸¸ç”¨äºç”µå•†ç§»åŠ¨ç«¯é¡µé¢</li>
</ul>
<h2 data-id="heading-24">ä¸ƒã€æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸€é˜¶æ®µçš„å­¦ä¹ ï¼Œæˆ‘å¯¹ç§»åŠ¨ç«¯ Web å¼€å‘æœ‰äº†å‡ ä¸ªæ˜ç¡®çš„è®¤çŸ¥ï¼š</p>
<ul>
<li>è§†å£æ˜¯ç§»åŠ¨ç«¯å¸ƒå±€çš„åŸºç¡€</li>
<li>äºŒå€å›¾æ˜¯æ¸…æ™°æ˜¾ç¤ºçš„å…³é”®</li>
<li>æµå¼å¸ƒå±€æ˜¯æœ€å¸¸ç”¨çš„ç§»åŠ¨ç«¯å¸ƒå±€æ–¹å¼</li>
<li>CSS3 ç›’æ¨¡å‹æå¤§é™ä½äº†å¸ƒå±€å¤æ‚åº¦</li>
<li>ç§»åŠ¨ç«¯å¼€å‘æ›´æ³¨é‡ä½“éªŒå’Œæ€§èƒ½</li>
</ul>
<p>å¦‚æœä½ æ­£å‡†å¤‡ä» PC ç«¯è½¬å‘ç§»åŠ¨ç«¯ï¼Œè¿™äº›å†…å®¹å‡ ä¹æ˜¯<strong>å¿…ç»ä¹‹è·¯</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç  Review çš„è‰ºæœ¯ï¼šå¦‚ä½•å§”å©‰åœ°å‘Šè¯‰åŒäº‹ä½ å†™çš„ä»£ç æ˜¯ä¸€å¨å±ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598563188113555508</link>    <guid>https://juejin.cn/post/7598563188113555508</guid>    <pubDate>2026-01-26T02:51:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598563188113555508" data-draft-id="7598563188113244212" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç  Review çš„è‰ºæœ¯ï¼šå¦‚ä½•å§”å©‰åœ°å‘Šè¯‰åŒäº‹ä½ å†™çš„ä»£ç æ˜¯ä¸€å¨å±ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-26T02:51:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç  Review çš„è‰ºæœ¯ï¼šå¦‚ä½•å§”å©‰åœ°å‘Šè¯‰åŒäº‹ä½ å†™çš„ä»£ç æ˜¯ä¸€å¨å±ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:51:19.000Z" title="Mon Jan 26 2026 02:51:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f31cf1d8f7694552850b417aabbca749~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000679&amp;x-signature=uyDxD5sQkiJP0d%2BM7jFaL%2Bth5aI%3D" alt="1_HEyuDA6Y8gOkNaHMPoU_ew.png" loading="lazy"/></p>
<p>æœ‰ä¸€å¤©ä¸‹åˆå››ç‚¹ï¼Œæˆ‘ç‚¹å¼€äº†åŒäº‹åˆšæçš„ä¸€ä¸ª PR, å…ˆä¸Šä»£ç ğŸ‘‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// PR</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">list</span>) {
  <span class="hljs-keyword">const</span> list1 = []
  <span class="hljs-keyword">let</span> temp = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">const</span> a = <span class="hljs-number">1</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; list.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (list[i]) {
      <span class="hljs-keyword">if</span> (list[i].<span class="hljs-property">status</span>) {
        <span class="hljs-keyword">if</span> (list[i].<span class="hljs-property">status</span> === <span class="hljs-string">'active'</span>) {
          <span class="hljs-keyword">if</span> (list[i].<span class="hljs-property">type</span>) {
            <span class="hljs-keyword">if</span> (list[i].<span class="hljs-property">type</span> === <span class="hljs-string">'user'</span>) {
              <span class="hljs-comment">// åœ¨ for é‡Œ await æŸ¥åº“</span>
              temp = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">query</span>(
                <span class="hljs-string">'SELECT * FROM users WHERE id = ?'</span>,
                [list[i].<span class="hljs-property">id</span>]
              )

              <span class="hljs-keyword">if</span> (temp &amp;&amp; temp.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
                list1.<span class="hljs-title function_">push</span>(temp[<span class="hljs-number">0</span>])
              }
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">if</span> (a === <span class="hljs-number">1</span>) {
                <span class="hljs-comment">// ä»€ä¹ˆéƒ½ä¸å¹²</span>
              }
            }
          }
        }
      }
    }
  }

  <span class="hljs-keyword">return</span> list1
}
</code></pre>
<p>ç¬¬ä¸€çœ¼ï¼Œè¿˜è¡Œã€‚<br/>
ç¬¬äºŒçœ¼ï¼Œå—¯ï¼Ÿ<br/>
ç¬¬ä¸‰çœ¼ï¼Œæˆ‘å¼€å§‹æ€€ç–‘äººç”Ÿã€‚</p>
<p>å˜é‡å« <code>a</code>ã€<code>temp</code>ã€<code>list1</code>ï¼Œ<code>if-else</code> å¥—äº†å…­å±‚ï¼Œåœ¨ <code>for</code> é‡Œ <code>await</code> æŸ¥åº“ï¼Œåƒä¸€é”…æ²¡åŠ ç›–çš„ä¹±ç‚–ã€‚</p>
<p>æˆ‘å½“æ—¶è„‘å­é‡Œåªæœ‰ä¸€ä¸ªå¿µå¤´ï¼š<br/>
<strong>è¿™ç©æ„è¦æ˜¯ä¸Šçº¿äº†ï¼Œä»Šæ™šè°éƒ½åˆ«ç¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ã€‚</strong></p>
<p>ä½†é—®é¢˜æ˜¯â€”â€”<br/>
ä½ ä¸èƒ½åœ¨è¯„è®ºåŒºç›´æ¥æ•²ä¸€å¥ğŸ¤”ï¼š</p>
<blockquote>
<p>è¿™æ®µä»£ç å¤ªçƒ‚äº†ï¼Œå»ºè®®é‡å†™ã€‚</p>
</blockquote>
<p>ä½ å¯ä»¥è¿™ä¹ˆæƒ³ï¼Œä½†ä¸èƒ½è¿™ä¹ˆè¯´ã€‚<br/>
å› ä¸ºä½ ä¸æ˜¯åœ¨å†™æŠ€æœ¯åšå®¢ï¼Œä½ æ˜¯åœ¨ä¸Šç­ğŸ˜–ã€‚</p>
<p>Code Review æœ¬æ¥æ˜¯ä¸ºäº†è®©é¡¹ç›®æ›´ç¨³ï¼Œç»“æœå¾ˆå¤šæ—¶å€™ï¼Œåè€Œæˆäº†å›¢é˜Ÿå…³ç³»çš„åŸå¤´ã€‚</p>
<p>åæ¥æˆ‘æ…¢æ…¢æ„è¯†åˆ°ä¸€ä»¶äº‹ï¼š<br/>
ä½ è¦åšçš„ï¼Œä¸æ˜¯æŒ‡å‡ºé—®é¢˜ï¼Œè€Œæ˜¯â€”â€”  <strong>è®©å¯¹æ–¹æ„¿æ„å¸®ä½ æŠŠé—®é¢˜æ”¹æ‰ã€‚</strong></p>
<hr/>
<h3 data-id="heading-0">å…ˆè¯´ä¸ªæ ¸å¿ƒåŸåˆ™ï¼šåˆ«å¯¹äººä¸‹æ‰‹ï¼Œå…ˆå¯¹ä»£ç ä¸‹æ‰‹</h3>
<p>CR æœ€å®¹æ˜“ç¿»è½¦çš„ç‚¹ï¼Œå°±ä¸€ä¸ªå­—ï¼š<strong>ä½ </strong>ã€‚</p>
<p><strong>ä½ è¿™é‡Œå†™é”™äº†ã€‚ä½ ä¸ºä»€ä¹ˆä¸åˆ¤ç©ºã€‚ä½ è¿™é€»è¾‘ä¸å¤ªè¡Œã€‚</strong></p>
<p>åªè¦ä½ ç”¨äº†-<strong>ä½ </strong>ï¼Œå¯¹æ–¹å¿ƒé‡Œçš„é˜²å¾¡ç›¾åŸºæœ¬å°±ä¸¾èµ·æ¥äº†ğŸ˜’ã€‚</p>
<p>æ›´èªæ˜çš„åšæ³•ï¼Œæ˜¯æŠŠå¯¹è±¡æ¢æ‰ã€‚</p>
<ul>
<li>æ¢æˆæˆ‘ä»¬</li>
<li>æ¢æˆè¿™æ®µä»£ç </li>
<li>æ¢æˆå¦‚æœè¿™ä¸ªåœºæ™¯</li>
<li>æ¢æˆæˆ‘ä»¬ä¸‹æ¬¡å¦‚ä½•é˜²èŒƒ</li>
</ul>
<p>æ¯”å¦‚ï¼š</p>
<p><strong>æˆ‘ä»¬è¿™é‡Œå¯èƒ½è¦è€ƒè™‘ä¸€ä¸‹ç©ºå˜é‡çš„æƒ…å†µã€‚è¿™æ®µé€»è¾‘åœ¨å¹¶å‘é«˜çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæœ‰ç‚¹é£é™©ï¼Œè¿™ä¸ªå†™æ³•åœ¨æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œæ€§èƒ½å¯èƒ½æ’‘ä¸ä½çš„</strong></p>
<p>æ„æ€ä¸€ç‚¹æ²¡å˜ï¼Œä½†<strong>æ”»å‡»æ€§ç›´æ¥ç åŠ</strong>ã€‚
æ•Œäººæ˜¯ Bugï¼Œä¸æ˜¯ä½ çš„åŒäº‹ğŸ˜ƒã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€äº›èƒ½æ•‘å‘½çš„ CR è¯æœ¯ï¼ˆçœŸçš„å¯ä»¥è¯•è¯•ï¼‰</h3>
<h4 data-id="heading-2">å˜é‡åéšä¾¿èµ·ï¼Œçœ‹ä¸æ‡‚</h4>
<p>ä½ å¿ƒé‡Œæƒ³çš„æ˜¯ï¼š</p>
<blockquote>
<p>è¿™ <code>list1</code> åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿ</p>
</blockquote>
<p>ä½†ä½ å¯ä»¥è¿™ä¹ˆè¯´ï¼š</p>
<blockquote>
<p>è¿™ä¸ª <code>list1</code> é‡Œè£…çš„ä¸»è¦æ˜¯ä»€ä¹ˆæ•°æ®æ¥ç€ï¼Ÿ<br/>
è¦ä¸è¦æ¢ä¸ªæ›´å…·ä½“ç‚¹çš„åå­—ï¼Œæ¯”å¦‚ <code>activeUserList</code>ï¼Ÿ<br/>
è¿™æ ·åé¢ç»´æŠ¤çš„äººï¼ˆåŒ…æ‹¬æœªæ¥çš„æˆ‘ä»¬ï¼‰ä¼šçœä¸å°‘äº‹ã€‚</p>
</blockquote>
<p>é‡ç‚¹ä¸åœ¨ä½ å‘½åä¸è¡Œï¼Œè€Œæ˜¯ä»¥åæ¥å—çš„äººä¼šæ„Ÿè°¢ä½ çš„ğŸ¤”ã€‚</p>
<hr/>
<h4 data-id="heading-3">if-else å¥—åˆ°ä½ å¤´çš®å‘éº»</h4>
<p>åˆ«è¯´é€»è¾‘å¤ªä¹±äº†ã€‚</p>
<p>ä½ å¯ä»¥è¯´ï¼š</p>
<blockquote>
<p>è¿™é‡Œæˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œé€»è¾‘ç¨å¾®æœ‰ç‚¹ç»•ï¼Œæˆ‘è¯»äº†ä¸¤éæ‰ç†é¡ºã€‚<br/>
è¦ä¸è¦è€ƒè™‘ç”¨æå‰ return çš„æ–¹å¼æ‹†ä¸€ä¸‹ï¼Ÿ<br/>
ç¼©è¿›å°‘ä¸€ç‚¹ï¼Œåé¢çœ‹èµ·æ¥ä¹Ÿè½»æ¾äº›ã€‚</p>
</blockquote>
<p>å…ˆæ‰¿è®¤æ˜¯<strong>æˆ‘è¯»å¾—æœ‰ç‚¹è´¹åŠ²</strong>ï¼Œ<br/>
å†ç»™å»ºè®®ï¼Œ<br/>
æœ€åç”¨å•†é‡çš„è¯­æ°”æ”¶å°¾ã€‚</p>
<p>å¯¹æ–¹å°é˜¶éƒ½æœ‰äº†ï¼ŒåŸºæœ¬ä¸ä¼šç‚¸ã€‚</p>
<hr/>
<h4 data-id="heading-4">æ˜æ˜¾çš„æ€§èƒ½éšæ‚£</h4>
<p>æ¯”å¦‚å¾ªç¯é‡ŒæŸ¥åº“ã€å¾ªç¯é‡Œè°ƒæ¥å£ã€‚</p>
<p>å¯ä»¥è¿™æ ·ï¼š</p>
<blockquote>
<p>è¿™ä¸ªå†™æ³•åœ¨å½“å‰æ•°æ®é‡ä¸‹åº”è¯¥æ²¡å•¥é—®é¢˜ã€‚<br/>
æˆ‘ä¸»è¦æœ‰ç‚¹æ‹…å¿ƒï¼Œå¦‚æœåé¢æ•°æ®ä¸Šæ¥ï¼Œæ¥å£æ—¶é—´ä¼šä¸ä¼šè¢«æ‹‰é•¿ã€‚<br/>
è¦ä¸è¿™é‡Œæ”¹æˆæ‰¹é‡æŸ¥æˆ–è€…å¹¶å‘ä¸€ä¸‹ï¼Ÿç¨³ä¸€ç‚¹ã€‚</p>
</blockquote>
<p>è¿™å¥è¯çš„æ½œå°è¯åªæœ‰ä¸€ä¸ªï¼š  <strong>æˆ‘æ˜¯åœ¨ç»™é¡¹ç›®å…œåº•ğŸ¥±ã€‚</strong></p>
<hr/>
<h4 data-id="heading-5">å®Œå…¨çœ‹ä¸æ‡‚ä»–åœ¨å¹²å˜›ï¼Ÿ</h4>
<p>è¿™æ—¶å€™åƒä¸‡åˆ«è£…æ‡‚ã€‚</p>
<p>ä½ å¯ä»¥è¯´ï¼š</p>
<blockquote>
<p>è¿™å—æˆ‘å¥½åƒæ²¡å¤ªè·Ÿä¸Šä½ çš„æ€è·¯ï¼Œ<br/>
èƒ½ä¸èƒ½ç®€å•è¯´ä¸‹è¿™é‡Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå¤„ç†ï¼Ÿ<br/>
æˆ–è€…åŠ ç‚¹æ³¨é‡Šä¹Ÿè¡Œï¼Œæˆ‘æ€•ä¸‹æ¬¡æœ‰äººæ¥æ‰‹ä¼šæœ‰ç‚¹æ‡µã€‚</p>
</blockquote>
<p>å¾ˆå¤šæ—¶å€™ï¼Œå¯¹æ–¹åœ¨è§£é‡Šçš„è¿‡ç¨‹ä¸­ï¼Œ<br/>
<strong>è‡ªå·±å°±ä¼šå‘ç°é—®é¢˜ã€‚</strong></p>
<p>ä½ ç”šè‡³éƒ½ä¸ç”¨å†è¡¥åˆ€çš„ã€‚</p>
<hr/>
<h3 data-id="heading-6">é¡ºä¾¿è¯´ä¸€å¥ï¼šåˆ«åšæ ¼å¼æ£€æŸ¥ï¼</h3>
<p>CR ä¸æ˜¯è®©ä½ ç›¯ç€ï¼š</p>
<ul>
<li>å°‘æ²¡å°‘ç©ºæ ¼</li>
<li>å•å¼•å·è¿˜æ˜¯åŒå¼•å·</li>
<li>æ¢è¡Œå¯¹ä¸å¯¹</li>
<li>æœ‰æ²¡æœ‰å†™æ³¨é‡Š</li>
<li>æœ‰æ²¡æœ‰åŠ  commit æ ‡ç­¾</li>
</ul>
<p>ä½ åœ¨ PR é‡Œç•™ 20 æ¡è¿™ç§è¯„è®ºï¼Œ<br/>
å¯¹æ–¹åªä¼šæƒ³ä¸€ä»¶äº‹ï¼š<br/>
<strong>è¿™äººæ˜¯ä¸æ˜¯æœ‰ç‚¹çƒ¦ğŸ˜¥ã€‚</strong></p>
<p>æ ¼å¼è¿™ç§äº‹ï¼Œäº¤ç»™å·¥å…·å°±å®Œäº†ğŸ˜–ã€‚</p>
<p>ESLintã€Prettierã€Huskyï¼Œç”šè‡³æ˜¯AIæ•´ç†ä»£ç <br/>
èƒ½è§£å†³ 80% çš„ä½çº§äº‰åµã€‚</p>
<p>å¦‚æœçœŸçš„ä¹±åˆ°å½±å“é˜…è¯»ï¼Œå¯ä»¥ä¸€å¥è¯å¸¦è¿‡ï¼š</p>
<blockquote>
<p>è¿™ä¸€å—ç¼©è¿›å¥½åƒæœ‰ç‚¹ä¹±ï¼Œ<br/>
è·‘ä¸€ä¸‹ lint è‡ªåŠ¨ä¿®ä¸€ä¸‹å°±è¡Œï¼Œ<br/>
æˆ‘ä»¬ä¸»è¦è¿˜æ˜¯çœ‹ä¸‹é€»è¾‘ã€‚</p>
</blockquote>
<p>ç‚¹åˆ°ä¸ºæ­¢ğŸ˜’ã€‚</p>
<hr/>
<h3 data-id="heading-7">çœŸåˆ°å¿…é¡»é‡å†™çš„æ—¶å€™ï¼Œåˆ«åœ¨è¯„è®ºåŒºç¡¬åˆš</h3>
<p>æœ‰äº›ä»£ç ï¼Œç¡®å®å·²ç»åˆ°äº†ä¸æ”¹ä¸è¡Œçš„ç¨‹åº¦ã€‚<br/>
ä½†å°±ç®—è¿™æ ·ï¼Œä¹Ÿåˆ«åœ¨ PR è¯„è®ºåŒºå†™å°ä½œæ–‡ã€‚</p>
<p>äººå¤šçš„åœ°æ–¹ï¼Œ<strong>æ²¡äººæ„¿æ„è®¤è¾“ã€‚</strong></p>
<p>æ›´å¥½çš„æ–¹å¼æ˜¯ï¼š</p>
<p><strong>ç§èŠï¼Ÿè¯­éŸ³ï¼Ÿå½“é¢ï¼Ÿ</strong></p>
<p>å¼€åœºä¹Ÿåˆ«å¤ªé‡ï¼š</p>
<blockquote>
<p>åˆšçœ‹äº†ä¸‹é‚£ä¸ª PRï¼Œæœ‰ä¸€å—æˆ‘æœ‰ç‚¹æ‹…å¿ƒï¼Œå’±ä»¬å¯¹ä¸€ä¸‹æ€ä¹ˆæ ·ï¼Ÿ</p>
</blockquote>
<p>æŠŠé£é™©è®²æ¸…æ¥šï¼Œ<br/>
æŠŠåæœè®²æ˜ç™½ï¼Œ<br/>
å…±è¯†è¾¾æˆäº†ï¼Œå†è®©ä»–è‡ªå·±æ”¹ã€‚</p>
<p><strong>ç»™æˆå¹´äººç•™é¢å­ï¼Œæˆæœ¬çœŸçš„å¾ˆä½çš„ğŸ˜ã€‚</strong></p>
<hr/>
<h3 data-id="heading-8">è¯´ä¸ªå®åœ¨çš„</h3>
<p>Code Review ä»æ¥éƒ½ä¸æ˜¯ï¼Œè°æŠ€æœ¯æ›´ç‰›è°è¯´äº†ç®—çš„ã€‚ä½ ä»Šå¤©æŒ‡å‡ºçš„é—®é¢˜ï¼Œ  å¾ˆå¯èƒ½æ˜¯ä¸ºäº†é˜²æ­¢å“ªå¤©åŠå¤œä¸¤ç‚¹ï¼Œ  æŠŠä»–ä»è¢«çªé‡Œæ‹½èµ·æ¥ä¿® Bugã€‚</p>
<p>è¿™ä¸æ˜¯æ‰¾èŒ¬ï¼Œè¿™æ˜¯åœ¨å‰©ä½ çš„æ—¶é—´ã€‚</p>
<p>æ‰€ä»¥ä»¥å CR çš„æ—¶å€™ï¼š</p>
<ul>
<li>å°‘ä¸€ç‚¹å‘½ä»¤</li>
<li>å¤šä¸€ç‚¹å•†é‡</li>
<li>å°‘ä¸€ç‚¹ä½ æ€ä¹ˆè¿™æ ·ï¼Ÿ</li>
<li>å¤šä¸€ç‚¹æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ï¼Ÿ</li>
</ul>
<p><strong>ä»£ç æ˜¯å†·çš„ï¼Œä½†ä¸€èµ·å†™ä»£ç çš„äººï¼Œæœ€å¥½åˆ«å‡‰ğŸ˜ƒã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c42393a3a5c4fb48f9e701fbcdfb185~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000679&amp;x-signature=anfU6PIaqsUpkEmlfqVc6ORDEBs%3D" alt="1_bh0C57IWRr6orsCDJXCFDA_abgbhi.webp" loading="lazy"/></p>
<blockquote>
<p>çµæ„Ÿæ¥è‡ªäºä¸Šé¢ğŸ‘†è¿™æœ¬ä¹¦ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ğŸ˜ã€‚
ä¹Ÿæ•´ç†å‡ºæ¥äº†ä¸€äº›æƒ³æ³•ï¼Œæœ›å¤§å®¶å–œæ¬¢ ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Ferpanomer.nurverse.com%2Fblog%2Fwhy-did-i-start-spending-less-time-browsing-tech-communities" target="_blank" title="https://erpanomer.nurverse.com/blog/why-did-i-start-spending-less-time-browsing-tech-communities" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆæˆ‘å¼€å§‹å‡å°‘é€›æŠ€æœ¯ç¤¾åŒºï¼Œè€Œæ˜¯å»è¯»éæŠ€æœ¯çš„ä¹¦ï¼Ÿ</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e9709052ba042c1bb782d2287ad019a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000679&amp;x-signature=Q8acvYFa5YfVHRnZ9w0uAyhoi0Q%3D" alt="è°¢è°¢å¤§å®¶.gif" loading="lazy"/></p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©å†™ä½œæ›´æœ‰â€œæ‰‹æ„Ÿâ€ï¼šå¼€æº Tiptap Writing Kitï¼ˆæ”¯æŒ Vue / Reactï¼‰]]></title>    <link>https://juejin.cn/post/7598767580307079222</link>    <guid>https://juejin.cn/post/7598767580307079222</guid>    <pubDate>2026-01-26T02:37:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598767580307079222" data-draft-id="7598767580307046454" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©å†™ä½œæ›´æœ‰â€œæ‰‹æ„Ÿâ€ï¼šå¼€æº Tiptap Writing Kitï¼ˆæ”¯æŒ Vue / Reactï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-26T02:37:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™®ç½—ç±³ä¿®æ–¯åŸº"/> <meta itemprop="url" content="https://juejin.cn/user/2436983109989272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©å†™ä½œæ›´æœ‰â€œæ‰‹æ„Ÿâ€ï¼šå¼€æº Tiptap Writing Kitï¼ˆæ”¯æŒ Vue / Reactï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436983109989272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™®ç½—ç±³ä¿®æ–¯åŸº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:37:48.000Z" title="Mon Jan 26 2026 02:37:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®©å†™ä½œæ›´æœ‰â€œæ‰‹æ„Ÿâ€ï¼šå¼€æº Tiptap Writing Kitï¼ˆæ”¯æŒ Vue / Reactï¼‰</h2>
<p>å¦‚æœä½ åœ¨åšå†…å®¹åˆ›ä½œå¹³å°ã€AI å†™ä½œå·¥å…·æˆ–çŸ¥è¯†åº“ç¼–è¾‘å™¨ï¼Œä¸€å®šé‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼šåŠŸèƒ½å¾ˆå…¨ï¼Œä½†â€œå†™èµ·æ¥ä¸èˆ’æœâ€ã€‚<br/>
æˆ‘æœ€è¿‘æŠŠè‡ªå·±åœ¨é¡¹ç›®é‡Œæ²‰æ·€çš„å†™ä½œä½“éªŒèƒ½åŠ›æŠ½å‡ºæ¥ï¼Œå¼€æºäº† <strong>Tiptap Writing Kit</strong>ï¼Œç›®æ ‡å¾ˆæ˜ç¡®ï¼š<strong>è®©å†™ä½œæ›´é¡ºæ‰‹ã€æ›´åƒåœ¨çœŸå®å†™ä½œ</strong>ã€‚</p>
<p>è¿™æ˜¯ä¸€å¥—åŸºäº Tiptap çš„å¢å¼ºç»„ä»¶ï¼Œæä¾› <strong>æ’ç‰ˆæ§åˆ¶ã€æ ‡å°ºè¾…åŠ©ã€æ‰“å­—éŸ³æ•ˆ/ç‰¹æ•ˆã€æŸ¥æ‰¾æ›¿æ¢ã€é€‰ä¸­æ°”æ³¡èœå•</strong> ç­‰åŠŸèƒ½ï¼Œå¹¶åŒæ—¶æ”¯æŒ <strong>Vue 3 / React</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">æ•ˆæœé¢„è§ˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d673e188310400dacb607eb40a51e1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pmu572X57Gz5L-u5pav5Z-6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769999868&amp;x-signature=YCJPPpmRk161aCEkfjvo7hM78NI%3D" alt="CPT2601261032-1521x782.gif" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-2">ä¸€å¥è¯äº®ç‚¹</h3>
<ul>
<li>é¢å‘å†™ä½œåœºæ™¯ï¼šä¸æ˜¯é€šç”¨ç¼–è¾‘å™¨ï¼Œè€Œæ˜¯â€œå†™ä½œä½“éªŒâ€å¢å¼º</li>
<li>Vue / React åŒç«¯æ”¯æŒï¼Œæ ¸å¿ƒèƒ½åŠ›å…±äº«</li>
<li>è½»é‡ï¼šæŒ‰éœ€å¯ç”¨ï¼Œä½“éªŒå¢å¼ºä¸è‡ƒè‚¿</li>
<li>å¯é…ç½®ï¼šå­—ä½“ã€è¡Œé«˜ã€å†…å®¹å®½åº¦ã€æ®µé—´è·ã€æ ‡å°ºé£æ ¼ã€å¿«æ·é”®ã€æ°”æ³¡èœå•éƒ½èƒ½æ”¹</li>
</ul>
<hr/>
<h3 data-id="heading-3">åœ¨çº¿ Demo</h3>
<ul>
<li>Vue Demoï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyilujian.github.io%2Ftiptap-writing-kit%2Fvue%2F" target="_blank" title="https://yilujian.github.io/tiptap-writing-kit/vue/" ref="nofollow noopener noreferrer">yilujian.github.io/tiptap-writâ€¦</a></li>
<li>React Demoï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyilujian.github.io%2Ftiptap-writing-kit%2Freact%2F" target="_blank" title="https://yilujian.github.io/tiptap-writing-kit/react/" ref="nofollow noopener noreferrer">yilujian.github.io/tiptap-writâ€¦</a></li>
</ul>
<blockquote>
<p>å»ºè®®åœ¨ç”µè„‘ç«¯æ‰“å¼€ï¼Œæœ‰æ˜æ˜¾çš„â€œå†™ä½œæ‰‹æ„Ÿâ€å˜åŒ–ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">åŠŸèƒ½ä¸€è§ˆ</h3>
<ul>
<li><strong>æ’ç‰ˆæ§åˆ¶</strong>ï¼šå­—ä½“/å­—å·/è¡Œé«˜/å†…å®¹å®½åº¦/æ®µé—´è·</li>
<li><strong>æ ‡å°ºçº¿</strong>ï¼šå†™ä½œæ—¶çš„è§†è§‰èŠ‚å¥è¾…åŠ©</li>
<li><strong>æ‰“å­—éŸ³æ•ˆ &amp; ç‰¹æ•ˆ</strong>ï¼šå¯é€‰çš„è½»é‡åé¦ˆï¼ˆcrisp / drop / typewriterã€splash / ripple / mist / fire / cheerï¼‰</li>
<li><strong>æŸ¥æ‰¾/æ›¿æ¢</strong>ï¼šå†…ç½®é¢æ¿ + å¿«æ·é”®æ”¯æŒ</li>
<li><strong>é€‰ä¸­æ°”æ³¡èœå•</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰æŒ‰é’®ã€å›¾æ ‡ä¸æ ·å¼</li>
<li><strong>å¿«æ·é”®é…ç½®</strong>ï¼šfind / save ç­‰å¯å®Œå…¨è‡ªå®šä¹‰</li>
</ul>
<hr/>
<h3 data-id="heading-5">å¿«é€Ÿä¸Šæ‰‹</h3>
<h4 data-id="heading-6">React</h4>
<pre><code class="hljs language-bash" lang="bash">npm i tiptap-writing-kit-react
</code></pre>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">InkEditor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'tiptap-writing-kit-react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'tiptap-writing-kit-react/style.css'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">InkEditor</span> /&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-7">Vue 3</h4>
<pre><code class="hljs language-bash" lang="bash">npm i tiptap-writing-kit-vue
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { InkEditor } from 'tiptap-writing-kit-vue'
import 'tiptap-writing-kit-vue/style.css'
&lt;/script&gt;

&lt;template&gt;
  &lt;InkEditor /&gt;
&lt;/template&gt;
</code></pre>
<hr/>
<h3 data-id="heading-8">è‡ªå®šä¹‰æ°”æ³¡èœå•ï¼ˆç¤ºä¾‹ï¼‰</h3>
<h4 data-id="heading-9">React</h4>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">InkEditor</span>
  bubbleMenuRender={<span class="hljs-function">(<span class="hljs-params">{ actions, labels, onAction, isActive }</span>) =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {actions.map((action) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{action}</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">twk-bubble-btn</span> ${<span class="hljs-attr">isActive</span>(<span class="hljs-attr">action</span>) ? '<span class="hljs-attr">is-active</span>' <span class="hljs-attr">:</span> ''}`}
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onAction(action)}
        &gt;
          {labels[action]}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )}
/&gt;
</code></pre>
<h4 data-id="heading-10">Vue</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;InkEditor&gt;
  &lt;template #bubble-menu="{ actions, labels, onAction, isActive }"&gt;
    &lt;button
      v-for="action in actions"
      :key="action"
      class="twk-bubble-btn"
      :class="{ 'is-active': isActive(action) }"
      @click="onAction(action)"
    &gt;
      {{ labels[action] }}
    &lt;/button&gt;
  &lt;/template&gt;
&lt;/InkEditor&gt;
</code></pre>
<hr/>
<h3 data-id="heading-11">ä¸ºä»€ä¹ˆå¼€æºè¿™ä¸ªç»„ä»¶ï¼Ÿ</h3>
<p>æˆ‘ä¹‹å‰åœ¨å®é™…é¡¹ç›®ä¸­åšè¿‡ AI å†™ä½œå¹³å°ï¼Œå‘ç°åœ¨â€œå†™ä½œä½“éªŒâ€ä¸Šå·® 1 æ­¥ï¼Œç”¨æˆ·å°±ä¼šè·³å‡ºã€‚<br/>
äºæ˜¯æŠŠè¿™äº›ä½“éªŒå¢å¼ºèƒ½åŠ›æŠ½è±¡æˆç»„ä»¶ï¼Œå¸Œæœ›å¸®åŠ©æ›´å¤šå†…å®¹ç±»äº§å“â€œæ›´åƒåœ¨å†™ä½œâ€ã€‚</p>
<hr/>
<h3 data-id="heading-12">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>AI å†™ä½œ / å°è¯´åˆ›ä½œ / é•¿æ–‡ç¼–è¾‘</li>
<li>å†…å®¹ç®¡ç†åå°çš„ç¼–è¾‘å™¨ä½“éªŒå‡çº§</li>
<li>çŸ¥è¯†åº“ã€æ–‡æ¡£ç¼–è¾‘å·¥å…·</li>
</ul>
<hr/>
<h3 data-id="heading-13">ä»“åº“åœ°å€</h3>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyilujian%2Ftiptap-writing-kit" target="_blank" title="https://github.com/yilujian/tiptap-writing-kit" ref="nofollow noopener noreferrer">github.com/yilujian/tiâ€¦</a></li>
<li>npmï¼š
<ul>
<li><code>tiptap-writing-kit-core</code></li>
<li><code>tiptap-writing-kit-react</code></li>
<li><code>tiptap-writing-kit-vue</code></li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-14">è·¯çº¿å›¾ï¼ˆRoadmapï¼‰</h3>
<ul>
<li>æ›´ä¸°å¯Œçš„æ°”æ³¡èœå•ç»„ä»¶ä¸ä¸»é¢˜</li>
<li>ç¼–è¾‘å™¨å†…çš„è½»é‡æ¨¡æ¿ç³»ç»Ÿ</li>
<li>å¯æ’æ‹”çš„â€œå†™ä½œçŠ¶æ€â€è¾…åŠ©ï¼ˆå­—æ•°ã€æ®µè½èŠ‚å¥ã€èŠ‚æ‹ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-15">æœ€å</h3>
<p>å¦‚æœä½ æ­£åœ¨åšå†…å®¹äº§å“ï¼Œå¸Œæœ›å†™ä½œä½“éªŒæ›´â€œåƒç¬”å°–åœ¨çº¸ä¸Šâ€ï¼Œæ¬¢è¿è¯•è¯•ã€‚<br/>
å¦‚æœä½ æ„¿æ„ç»™æˆ‘ä¸€ä¸ª <strong>Star</strong> æˆ–è€…åé¦ˆå»ºè®®ï¼Œå¯¹é¡¹ç›®å¸®åŠ©éå¸¸å¤§ã€‚</p>
<p>è°¢è°¢é˜…è¯»ï¼Œæ¬¢è¿äº¤æµï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¤¾åŒºè¯‘æ–‡ | åŒºåˆ† FUD å’Œç°å®ï¼šMySQL çœŸçš„è¢«æ”¾å¼ƒäº†å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7598734303175311412</link>    <guid>https://juejin.cn/post/7598734303175311412</guid>    <pubDate>2026-01-26T02:53:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598734303175311412" data-draft-id="7598563188113571892" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¤¾åŒºè¯‘æ–‡ | åŒºåˆ† FUD å’Œç°å®ï¼šMySQL çœŸçš„è¢«æ”¾å¼ƒäº†å—ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T02:53:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/1480387593251847"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¤¾åŒºè¯‘æ–‡ | åŒºåˆ† FUD å’Œç°å®ï¼šMySQL çœŸçš„è¢«æ”¾å¼ƒäº†å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1480387593251847/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:53:07.000Z" title="Mon Jan 26 2026 02:53:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…ï¼šJulia Vuralï¼ŒPercona å·¥ç¨‹å¸ˆã€‚</p>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.percona.com%2Fblog%2Fseparating-fud-and-reality-has-mysql-really-been-abandoned%2F%25EF%25BC%258CJan" target="_blank" title="https://www.percona.com/blog/separating-fud-and-reality-has-mysql-really-been-abandoned/%EF%BC%8CJan" ref="nofollow noopener noreferrer">www.percona.com/blog/separaâ€¦</a> 22, 2026</p>
<p>çˆ±å¯ç”Ÿå¼€æºç¤¾åŒºç¿»è¯‘ï¼Œæœ¬æ–‡çº¦ 900 å­—ï¼Œé¢„è®¡é˜…è¯»éœ€è¦ 3 åˆ†é’Ÿã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff53315a722649c79b851272a3343d15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000786&amp;x-signature=F3b693C%2BsQEclaXfmU7FWd1aEnI%3D" alt="640 (78).webp" loading="lazy"/></p>
<p>è¿‡å»å‡ å‘¨ï¼ŒMySQL ç¤¾åŒºå†æ¬¡å‡ºç°å…³äº <em>"Oracle å·²åœæ­¢å¼€å‘ MySQL"</em> æˆ– <em>"MySQL å°†è¢«æ”¾å¼ƒ"</em> çš„è¯´æ³•ï¼Œå¼•å‘äº†æ›´å¤šè®¨è®ºå’Œæ‹…å¿§ã€‚ä¸€äº›å›¾è¡¨æ˜¾ç¤ºï¼Œ2025 å¹´ 10 æœˆä¹‹å GitHub çš„æäº¤æ•°é‡ä¼¼ä¹åœæ­¢å¢é•¿ï¼Œè€Œä¸€äº›åšå®¢æ–‡ç« å’Œè®ºå›è®¨è®ºä¹Ÿå¯¹è¿™äº›è¿¹è±¡è¿›è¡Œäº†å­—é¢è§£è¯»ï¼Œè¿™è¿›ä¸€æ­¥åŠ å‰§äº†äººä»¬çš„æ‹…å¿§ã€‚</p>
<p>ä½œä¸ºä¸€åå…¬å¼€åˆ†æè¿‡ MySQL ä»£ç åº“æ´»åŠ¨ï¼Œå¹¶ä¸”æ¯å¤©éƒ½åœ¨ Percona å…¬å¸ä½¿ç”¨ MySQL çš„äººï¼Œæˆ‘æƒ³æ¸…æ¥šåœ°åŒºåˆ†æ•°æ®å®é™…æ˜¾ç¤ºçš„å†…å®¹å’Œæ•°æ®æœªæ˜¾ç¤ºçš„å†…å®¹ã€‚</p>
<p><strong>è¿™ç¯‡æ–‡ç« å¹¶éå¯¹ Oracle çš„ç›²ç›®è¾©æŠ¤ã€‚æˆ‘ä»¬å¸¸å¸¸ä¸åŒæ„ Oracle çš„æŸäº›å†³å®šï¼Œå¹¶ä¸”ä¼šå…¬å¼€è¡¨è¾¾æˆ‘ä»¬çš„è§‚ç‚¹ã€‚ä½†å…¬å¹³è‡³å…³é‡è¦------å°¤å…¶æ˜¯åœ¨ææƒ§ã€ä¸ç¡®å®šæ€§å’Œæ€€ç–‘ï¼ˆFUDï¼‰å¼€å§‹å½±å“å®¢æˆ·å’Œæ›´å¹¿æ³›çš„ç”Ÿæ€ç³»ç»Ÿæ—¶ã€‚</strong></p>
<h2 data-id="heading-0">å…³äº"åœæ­¢å¯¹ MySQL ç»´æŠ¤"çš„è¯´æ³•</h2>
<p>æˆ‘ä»¬æœ€è¿‘æ”¶åˆ°ç¤¾åŒº<a href="https://link.juejin.cn?target=https%3A%2F%2Fforums.percona.com%2Ft%2Fupstream-being-abandoned-will-percona-continue-to-maintain-mysql%2F40061" title="https://forums.percona.com/t/upstream-being-abandoned-will-percona-continue-to-maintain-mysql/40061" target="_blank" ref="nofollow noopener noreferrer">ä¸€ä¸ªä»¤äººæƒŠè®¶çš„é—®é¢˜</a>ï¼šMySQL çœŸçš„è¢«æ”¾å¼ƒäº†å—ï¼Ÿä»–ä»¬è¿˜é™„ä¸Šäº† <a href="https://link.juejin.cn?target=https%3A%2F%2Foptimizedbyotto.com%2Fpost%2Freasons-to-stop-using-mysql%2F" title="https://optimizedbyotto.com/post/reasons-to-stop-using-mysql/" target="_blank" ref="nofollow noopener noreferrer">Otto KekÃ¤lÃ¤inen çš„å¸–å­</a>ä¸­åˆ†äº«çš„å›¾è¡¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38ce4ab0c20045eab43493be98d90218~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000786&amp;x-signature=TjzRaiyv7pNbI3%2FaD70O3XzHaEI%3D" alt="640 (79).webp" loading="lazy"/>
è¿™ä¸€ç»“è®ºé€šå¸¸æ˜¯ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmysql%2Fmysql-server%2F" title="https://github.com/mysql/mysql-server/" target="_blank" ref="nofollow noopener noreferrer">GitHub å…¬å…±ä»“åº“</a> çš„æ´»åŠ¨å›¾è¡¨ä¸­å¾—å‡ºçš„ ï¼Œè¯¥å›¾è¡¨ç¡®å®æ˜¾ç¤ºå­˜åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´æ²¡æœ‰å¯è§çš„æäº¤ã€‚</p>
<p>å›¾è¡¨æœ¬èº«æ²¡æœ‰é”™ï¼Œä½†è§£è¯»å¹¶ä¸å®Œæ•´ã€‚</p>
<h2 data-id="heading-1">ç¼ºå¤±çš„èƒŒæ™¯ä¿¡æ¯ï¼šMySQL çš„å®é™…å¼€å‘è¿‡ç¨‹</h2>
<p><strong>é”™è¯¯åœ¨äºå‡è®¾ MySQL æ˜¯åœ¨ GitHub ä¸Šå¼€å‘çš„ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚</strong></p>
<p>å¤šå¹´æ¥ï¼ŒOracle ä¸€ç›´éµå¾ªä¸€å¥—ç‰¹å®šçš„å·¥ä½œæµç¨‹ï¼Œå³åœ¨ç§æœ‰çš„å°é—­ä»£ç åº“ä¸­è¿›è¡Œå®æ—¶å·¥ç¨‹å¼€å‘ã€‚GitHub ä»…ä½œä¸ºå…¬å…±é•œåƒå’Œå‘å¸ƒå¹³å°ï¼Œè€Œéæ´»è·ƒçš„å¼€å‘å·¥ä½œç©ºé—´ã€‚å› æ­¤ï¼Œä»£ç ä¼šä»¥å¤§å‹çš„ã€æ•´åˆçš„"ä»£ç åŒ…"çš„å½¢å¼å‘å¸ƒï¼Œä¸å®˜æ–¹ç‰ˆæœ¬åŒæ­¥ï¼Œè€Œä¸æ˜¯ä»¥æ¯æ—¥å¢é‡æäº¤çš„å½¢å¼å‡ºç°ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼š</p>
<p><strong>GitHub æ˜¯ä¸€ä¸ªå¼‚æ­¥å‘å¸ƒé•œåƒï¼Œè€Œä¸æ˜¯å¼€å‘è®°å½•ç³»ç»Ÿã€‚</strong></p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>
<p>GitHub ä¸Šç¼ºä¹å¢é‡æäº¤å¹¶ä¸æ„å‘³ç€ç¼ºä¹å¼€å‘ã€‚</p>
</li>
<li>
<p>é¢„è®¡ç‰ˆæœ¬å‘å¸ƒä¹‹é—´ä¼šæœ‰è¾ƒé•¿çš„å¹³é™æœŸã€‚</p>
</li>
<li>
<p>çªç„¶çš„å¤§è§„æ¨¡æäº¤çˆ†å‘æ˜¯æ­£å¸¸çš„å‘å¸ƒæœºåˆ¶ã€‚</p>
</li>
</ul>
<p>è¿™ç§å¼€å‘æ¨¡å¼å¹¶ä¸æ–°é²œï¼Œå®ƒå·²ç»æ²¿ç”¨å¤šå¹´ã€‚æœ‰äººä¼šè¯´è¿™ä¸æ˜¯ <em>"çœŸæ­£çš„å¼€æºå¼€å‘æ¨¡å¼"</em> å—ï¼Ÿä¹Ÿè®¸ä¼šï¼Œä½†æœ€ç»ˆï¼Œåœ¨ 2026 å¹´ 1 æœˆ 21 æ—¥ï¼ˆåœ¨æœ€è¿‘å‘å¸ƒçš„ 9.6.0ã€8.4.8 å’Œ 8.0.45 ç‰ˆæœ¬ä¹‹åï¼‰ç»˜åˆ¶çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmysql%2Fmysql-server%2Fgraphs%2Fcommit-activity" title="https://github.com/mysql/mysql-server/graphs/commit-activity" target="_blank" ref="nofollow noopener noreferrer">åŒä¸€å¼ å›¾è¡¨</a> çœ‹èµ·æ¥ä¸å†åƒæ˜¯è¢«å¼ƒç”¨äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd344fa691a946d7b47920d2b4f7d907~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000786&amp;x-signature=t%2FKLqQr2dzcrrpEvQvhrm%2BtoMrI%3D" alt="640 (55).png" loading="lazy"/></p>
<p>MySQL çš„"å¼ƒç”¨"æ¡ˆä¾‹å®Œç¾åœ°æé†’æˆ‘ä»¬ï¼Œ<strong>æŒ‡æ ‡çš„ä»·å€¼å–å†³äºæˆ‘ä»¬å¯¹æ‰€è¡¡é‡ç³»ç»Ÿçš„ç†è§£ã€‚</strong></p>
<p>GitHub å›¾è¡¨ä¸Šçš„åœæ»ä¸å‰å¹¶ä¸æ€»æ˜¯æ„å‘³ç€é¡¹ç›®æ­£åœ¨èµ°å‘è¡°äº¡ï¼›å¾ˆå¤šæ—¶å€™ï¼Œå®ƒåªæ˜¯å¼•æ“åœ¨ç´§é—­çš„å¤§é—¨åé™é»˜è¿è½¬çš„ä½“ç°ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥è®¨è®º Oracle å¼€å‘æ¨¡å¼çš„é€æ˜åº¦ï¼Œä½†æˆ‘ä»¬ä¸åº”è¯¥å°†ä¸åŒçš„å·¥ä½œæµç¨‹è¯¯è§£ä¸ºç¼ºä¹å·¥ä½œã€‚<strong>äº‹å®å¹¶éæ€»æ˜¯å¦‚è¡¨é¢æ‰€è§ï¼Œä»¥è²Œå–äººæˆ–ä»¥é•œåƒæ¥åˆ¤æ–­æ•°æ®åº“éƒ½æ˜¯é”™è¯¯çš„ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯¦è§£Metadata å’Œ Reflector]]></title>    <link>https://juejin.cn/post/7599268297202941990</link>    <guid>https://juejin.cn/post/7599268297202941990</guid>    <pubDate>2026-01-26T02:51:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599268297202941990" data-draft-id="7598181989968379931" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯¦è§£Metadata å’Œ Reflector"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,NestJS"/> <meta itemprop="datePublished" content="2026-01-26T02:51:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä»˜è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/1741228277763278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯¦è§£Metadata å’Œ Reflector
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1741228277763278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä»˜è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:51:06.000Z" title="Mon Jan 26 2026 02:51:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è£…é¥°å™¨å£°æ˜åï¼Œå¯åŠ¨ Nest åº”ç”¨ï¼Œå¯¹è±¡ä¼šåˆ›å»ºå¥½ï¼Œä¾èµ–ä¹Ÿç»™æ³¨å…¥äº†ï¼Œä¸ºå•¥ ï¼Ÿ</p>
<p>å…ˆçœ‹ Reflect çš„ metadata</p>
<p>Reflect.get æ˜¯è·å–å¯¹è±¡å±æ€§å€¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/562071b365744875b19b93514cbe30ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000666&amp;x-signature=JV7WeA7VQI2ihOjslei89%2BF6hY4%3D" alt="image.png" loading="lazy"/></p>
<p>Reflect.set æ˜¯è®¾ç½®å¯¹è±¡å±æ€§å€¼
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0e6e5fa37d74b2e8b8f5f0754a83f99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000666&amp;x-signature=w85RhuQScK5EXRs4pJmovJQ2FPw%3D" alt="image.png" loading="lazy"/></p>
<p>Reflect.has æ˜¯åˆ¤æ–­å¯¹è±¡å±æ€§æ˜¯å¦å­˜åœ¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f56d40e3e2b44d958c149552c8440747~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000666&amp;x-signature=wuq%2BKkgl%2BKVtPKrkPwE%2BVPY9zwA%3D" alt="image.png" loading="lazy"/></p>
<p>Reflect.apply æ˜¯è°ƒç”¨æŸä¸ªæ–¹æ³•ï¼Œä¼ å…¥å¯¹è±¡å’Œå‚æ•°</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f59e86c78fd45968d84c6b5263b1b74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000666&amp;x-signature=NHxRwvMXrs3Y77HTb2SQj%2FkDEt8%3D" alt="image.png" loading="lazy"/></p>
<p>Reflect.construct æ˜¯ç”¨æ„é€ å™¨åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œä¼ å…¥æ„é€ å™¨å‚æ•°</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6deae394d30640fdbd0a5f61990babbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770000666&amp;x-signature=1KUvQTr9zWNr%2BOEhe88UYj7EI7U%3D" alt="image.png" loading="lazy"/></p>
<p>Nest ç”¨åˆ°çš„ api</p>
<pre><code class="hljs language-ini" lang="ini">Reflect.defineMetadata(metadataKey, metadataValue, target)<span class="hljs-comment">;</span>

Reflect.defineMetadata(metadataKey, metadataValue, target, propertyKey)<span class="hljs-comment">;</span>


let <span class="hljs-attr">result</span> = Reflect.getMetadata(metadataKey, target)<span class="hljs-comment">;</span>

let <span class="hljs-attr">result</span> = Reflect.getMetadata(metadataKey, target, propertyKey)<span class="hljs-comment">;</span>
</code></pre>
<p>Reflect.defineMetadata å’Œ Reflect.getMetadata åˆ†åˆ«ç”¨äºè®¾ç½®å’Œè·å–æŸä¸ªç±»çš„å…ƒæ•°æ®ï¼Œå¦‚æœæœ€åä¼ å…¥äº†å±æ€§åï¼Œè¿˜å¯ä»¥å•ç‹¬ä¸ºæŸä¸ªå±æ€§è®¾ç½®å…ƒæ•°æ®</p>
<p>é‚£å…ƒæ•°æ®å­˜åœ¨å“ªï¼Ÿ</p>
<p>å­˜åœ¨ç±»æˆ–è€…å¯¹è±¡ä¸Šï¼Œå¦‚æœç»™ç±»æˆ–è€…ç±»çš„é™æ€å±æ€§æ·»åŠ å…ƒæ•°æ®ï¼Œé‚£å°±ä¿å­˜åœ¨ç±»ä¸Š</p>
<p>å¦‚æœç»™å®ä¾‹å±æ€§æ·»åŠ å…ƒæ•°æ®ï¼Œé‚£å°±ä¿å­˜åœ¨å¯¹è±¡ä¸Šï¼Œç”¨ç±»ä¼¼ [[metadata]] çš„ key æ¥å­˜</p>
<p>æ”¯æŒè£…é¥°å™¨çš„æ–¹å¼ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Reflect</span>.<span class="hljs-built_in">metadata</span>(metadataKey, metadataValue)
class C {

  <span class="hljs-variable">@Reflect</span>.<span class="hljs-built_in">metadata</span>(metadataKey, metadataValue)
  <span class="hljs-built_in">method</span>() {
  }
}
</code></pre>
<p>åŸºç¡€å°è£…</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Meta</span>(<span class="hljs-params">metadataKey: <span class="hljs-built_in">string</span>, metadataValue: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">metadata</span>(metadataKey, metadataValue)
}
</code></pre>
<p>å®é™…ä¾‹å­</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Validate</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">target, propertyKey, descriptor</span>) {
    <span class="hljs-keyword">const</span> types = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getMetadata</span>(
      <span class="hljs-string">'design:paramtypes'</span>,
      target,
      propertyKey
    )

    <span class="hljs-keyword">const</span> original = descriptor.<span class="hljs-property">value</span>

    descriptor.<span class="hljs-property">value</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
      args.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">arg, index</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-title class_">Type</span> = types[index]
        <span class="hljs-keyword">if</span> (!(arg <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Type</span>) &amp;&amp; <span class="hljs-keyword">typeof</span> arg !== <span class="hljs-title class_">Type</span>.<span class="hljs-property">name</span>.<span class="hljs-title function_">toLowerCase</span>()) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
            <span class="hljs-string">`å‚æ•° <span class="hljs-subst">${index}</span> ç±»å‹é”™è¯¯ï¼ŒæœŸæœ› <span class="hljs-subst">${Type.name}</span>`</span>
          )
        }
      })
      <span class="hljs-keyword">return</span> original.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)
    }
  }
}

</code></pre>
<p>ä½¿ç”¨</p>
<pre><code class="hljs language-scss" lang="scss">class MathService {

  <span class="hljs-keyword">@Validate</span>()
  add(<span class="hljs-attribute">a</span>: number, <span class="hljs-attribute">b</span>: number) {
    return <span class="hljs-selector-tag">a</span> + <span class="hljs-selector-tag">b</span>
  }
}

new <span class="hljs-built_in">MathService</span>()<span class="hljs-selector-class">.add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)     <span class="hljs-comment">// âœ…</span>
new <span class="hljs-built_in">MathService</span>()<span class="hljs-selector-class">.add</span>('<span class="hljs-number">1</span>', <span class="hljs-number">2</span>)   <span class="hljs-comment">// âŒ</span>

</code></pre>
<p>Nest çš„å®ç°åŸç†å°±æ˜¯é€šè¿‡è£…é¥°å™¨ç»™ class æˆ–è€…å¯¹è±¡æ·»åŠ å…ƒæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–çš„æ—¶å€™å–å‡ºè¿™äº›å…ƒæ•°æ®ï¼Œè¿›è¡Œä¾èµ–çš„åˆ†æï¼Œç„¶ååˆ›å»ºå¯¹åº”çš„å®ä¾‹å¯¹è±¡å°±å¯ä»¥äº†ã€‚</p>
<p>æ‰€ä»¥è¯´ï¼Œnest å®ç°çš„æ ¸å¿ƒå°±æ˜¯ Reflect metadata çš„ api</p>
<h3 data-id="heading-0">å®‰è£…ä¾èµ– &amp; æ‰“å¼€é…ç½®</h3>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> reflect-metadata
</code></pre>
<p><code>tsconfig.json</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"experimentalDecorators"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"emitDecoratorMetadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å…¥å£æ–‡ä»¶æœ€é¡¶éƒ¨ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> <span class="hljs-string">'reflect-metadata'</span>
</code></pre>
<h3 data-id="heading-1">è‡ªå·±å†™ä¸€ä¸ªè£…é¥°å™¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyController</span>(<span class="hljs-params">path: string</span>): <span class="hljs-title class_">ClassDecorator</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target</span>) =&gt;</span> {
    <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">defineMetadata</span>(<span class="hljs-string">'path'</span>, path, target)
  }
}
</code></pre>
<p><strong>è¿™ä¸€è¡Œæ˜¯æ ¸å¿ƒï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">defineMetadata</span>(key, value, target)
</code></pre>
<blockquote>
<p>ğŸ‘† æŠŠ <code>path</code> è¿™ä¸ªä¿¡æ¯ï¼ŒæŒ‚åˆ° class ä¸Š</p>
</blockquote>
<h3 data-id="heading-2">ä½¿ç”¨è¿™ä¸ªè£…é¥°å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@MyController(<span class="hljs-string">'/user'</span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {}
</code></pre>
<hr/>
<h3 data-id="heading-3">è¿è¡Œæ—¶æŠŠå…ƒæ•°æ®è¯»å‡ºæ¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getMetadata</span>(<span class="hljs-string">'path'</span>, <span class="hljs-title class_">UserController</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(path) <span class="hljs-comment">// /user</span>
</code></pre>
<p>ğŸ”‘ <strong>åˆ°è¿™é‡Œä½ å·²ç»å®ç°äº† Nest çš„ç¬¬ä¸€æ­¥</strong></p>
<h2 data-id="heading-4">Nest çš„ Controller / Injectable æœ¬è´¨</h2>
<h3 data-id="heading-5">Controller è£…é¥°å™¨ â‰ˆ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Controller(<span class="hljs-string">'/user'</span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {}
</code></pre>
<p>ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">defineMetadata</span>(<span class="hljs-string">'path'</span>, <span class="hljs-string">'/user'</span>, <span class="hljs-title class_">UserController</span>)
</code></pre>
<hr/>
<h3 data-id="heading-6">Injectable è£…é¥°å™¨ â‰ˆ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Injectable()</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {}
</code></pre>
<p>ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">defineMetadata</span>(<span class="hljs-string">'injectable'</span>, <span class="hljs-literal">true</span>, <span class="hljs-title class_">UserService</span>)
</code></pre>
<hr/>
<h2 data-id="heading-7">ä¾èµ–æ³¨å…¥æ˜¯æ€ä¹ˆâ€œè‡ªåŠ¨çŸ¥é“â€çš„ï¼Ÿ</h2>
<h3 data-id="heading-8">å…³é”®ï¼š<strong>æ„é€ å‡½æ•°å‚æ•°çš„ç±»å‹å…ƒæ•°æ®</strong></h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Injectable()</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {}
</code></pre>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Injectable()</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">private</span> userService: UserService) {}
}
</code></pre>
<h3 data-id="heading-9">TypeScript åœ¨èƒŒåå·å·å¹²äº†ä»€ä¹ˆï¼Ÿ</h3>
<p>å¼€å¯ <code>emitDecoratorMetadata</code> åï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getMetadata</span>(<span class="hljs-string">'design:paramtypes'</span>, <span class="hljs-title class_">UserController</span>)
</code></pre>
<p>å¾—åˆ°ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ UserService ]</span>
</code></pre>
<p>ğŸ’¥ <strong>è¿™ä¸€æ­¥æ˜¯ Nest DI çš„çµé­‚</strong></p>
<hr/>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> <span class="hljs-string">'reflect-metadata'</span>

<span class="hljs-meta">@Injectable()</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {}

<span class="hljs-meta">@Injectable()</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">private</span> userService: UserService) {}
}

<span class="hljs-keyword">const</span> deps = Reflect.getMetadata(
  <span class="hljs-string">'design:paramtypes'</span>,
  UserController
)

console.log(deps)
<span class="hljs-comment">// [ [class UserService] ]</span>
</code></pre>
<hr/>
<h2 data-id="heading-10">Nest åˆå§‹åŒ–æ—¶åˆ°åº•åœ¨å¹²å˜›ï¼Ÿ</h2>
<p>å¯ä»¥ç†è§£æˆè¿™å‡ æ­¥ğŸ‘‡</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">function <span class="hljs-title">bootstrap</span>()</span> {
  <span class="hljs-comment">// 1. æ‰«ææ‰€æœ‰ class</span>
  <span class="hljs-comment">// 2. æ‰¾ @Controller / @Injectable</span>
  <span class="hljs-comment">// 3. è¯»å–å…ƒæ•°æ®</span>
  <span class="hljs-comment">// 4. åˆ†æä¾èµ–</span>
  <span class="hljs-comment">// 5. new å®ä¾‹</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-11">æç®€ DI å®¹å™¨</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">const</span> container = <span class="hljs-keyword">new</span> Map()

<span class="hljs-function">function <span class="hljs-title">createInstance</span>(<span class="hljs-params">target</span>)</span> {
  <span class="hljs-keyword">const</span> deps =
    Reflect.getMetadata(<span class="hljs-string">'design:paramtypes'</span>, target) || []

  <span class="hljs-keyword">const</span> <span class="hljs-keyword">params</span> = deps.map(dep =&gt; {
    <span class="hljs-keyword">if</span> (!container.has(dep)) {
      container.<span class="hljs-keyword">set</span>(dep, createInstance(dep))
    }
    <span class="hljs-keyword">return</span> container.<span class="hljs-keyword">get</span>(dep)
  })

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> target(...<span class="hljs-keyword">params</span>)
}
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">controller</span> = createInstance(UserController)
</code></pre>
<p>ğŸ‘‰ <strong>è¿™å°±æ˜¯ Nest DI çš„é›å½¢</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[BFC (Block Formatting Context) è¯¦è§£]]></title>    <link>https://juejin.cn/post/7598734303175344180</link>    <guid>https://juejin.cn/post/7598734303175344180</guid>    <pubDate>2026-01-26T02:54:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598734303175344180" data-draft-id="7598734303175082036" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="BFC (Block Formatting Context) è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-26T02:54:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨œå¦¹å­è¾£"/> <meta itemprop="url" content="https://juejin.cn/user/3421335918747976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            BFC (Block Formatting Context) è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3421335918747976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨œå¦¹å­è¾£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:54:15.000Z" title="Mon Jan 26 2026 02:54:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>BFCï¼ˆBlock Formatting Contextï¼Œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰</strong> Â æ˜¯ CSS æ¸²æŸ“ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒå†³å®šäº†<strong>å—çº§å…ƒç´ å¦‚ä½•å¸ƒå±€ã€å¦‚ä½•ä¸å…„å¼Ÿ/å­å…ƒç´ äº¤äº’</strong>ã€‚<strong>ç†è§£ BFC èƒ½è§£å†³å¾ˆå¤šç»å…¸å¸ƒå±€é—®é¢˜ï¼ˆå¦‚æµ®åŠ¨å¡Œé™·ã€å¤–è¾¹è·é‡å ç­‰ï¼‰ã€‚</strong></p>
<h2 data-id="heading-0">ğŸ§  ä¸€ã€ä»€ä¹ˆæ˜¯ BFCï¼Ÿ</h2>
<blockquote>
<p><strong>BFC æ˜¯ Web é¡µé¢ä¸­ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸ</strong>ï¼Œå†…éƒ¨çš„å—çº§å…ƒç´ æŒ‰ç…§ç‰¹å®šè§„åˆ™å¸ƒå±€ï¼Œ<strong>ä¸”ä¸ä¼šä¸å¤–éƒ¨å…ƒç´ ç›¸äº’å½±å“</strong>ã€‚</p>
</blockquote>
<p>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œ<strong>éš”ç¦»çš„ç›’å­</strong>â€ï¼š</p>
<ul>
<li>ç›’å­å†…éƒ¨çš„å…ƒç´ æŒ‰è§„åˆ™æ’åˆ—</li>
<li>ç›’å­å¤–éƒ¨çš„å…ƒç´ ä¸ä¼šå¹²æ‰°å†…éƒ¨</li>
<li>ç›’å­ä¹Ÿä¸ä¼šè¢«å¤–éƒ¨å…ƒç´ å¹²æ‰°</li>
</ul>
<h2 data-id="heading-1">äºŒã€BFC çš„è§¦å‘æ¡ä»¶ï¼ˆå¦‚ä½•åˆ›å»º BFCï¼Ÿï¼‰</h2>













































































<table><thead><tr><th>è§¦å‘æ–¹å¼</th><th>æ˜¯å¦å¸¸ç”¨</th><th>å‰¯ä½œç”¨</th><th>å…¼å®¹æ€§</th><th>æ¨èåº¦</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>display: flow-root</code></td><td>âœ… ç°ä»£é¦–é€‰</td><td>âŒ æ— </td><td>Chrome 58+ / FF 53+ / Safari 10.1+</td><td>â­â­â­â­â­</td><td><strong>é€šç”¨åœºæ™¯ï¼ˆç°ä»£æµè§ˆå™¨ï¼‰</strong></td></tr><tr><td><code>overflow: hidden/auto/scroll</code></td><td>âœ… å¹¿æ³›ä½¿ç”¨</td><td>âš ï¸ å¯èƒ½è£å‰ªå†…å®¹</td><td>âœ… å…¨æµè§ˆå™¨</td><td>â­â­â­â­</td><td>éœ€è¦å…¼å®¹æ—§æµè§ˆå™¨æ—¶</td></tr><tr><td><code>float: left/right</code></td><td>âš ï¸ é€æ¸æ·˜æ±°</td><td>âš ï¸ è„±ç¦»æ–‡æ¡£æµ</td><td>âœ… å…¨æµè§ˆå™¨</td><td>â­â­</td><td>ä¼ ç»Ÿæµ®åŠ¨å¸ƒå±€ï¼ˆä¸æ¨èæ–°é¡¹ç›®ï¼‰</td></tr><tr><td><code>position: absolute/fixed</code></td><td>âš ï¸ ç‰¹å®šåœºæ™¯</td><td>âš ï¸ è„±ç¦»æ–‡æ¡£æµ</td><td>âœ… å…¨æµè§ˆå™¨</td><td>â­â­</td><td>å®šä½å…ƒç´ ï¼ˆéå¸ƒå±€ç›®çš„ï¼‰</td></tr><tr><td><code>display: inline-block</code></td><td>âš ï¸ æœ‰å±€é™</td><td>âš ï¸ è¡Œå†…å—ç‰¹æ€§ï¼ˆé—´éš™ã€åŸºçº¿å¯¹é½ï¼‰</td><td>âœ… å…¨æµè§ˆå™¨</td><td>â­â­</td><td>è¡Œå†…å¸ƒå±€ï¼ˆéå—çº§å®¹å™¨ï¼‰</td></tr><tr><td><code>display: table-cell</code></td><td>âš ï¸ å°‘ç”¨</td><td>âš ï¸ è¡¨æ ¼å¸ƒå±€è¡Œä¸º</td><td>âœ… å…¨æµè§ˆå™¨</td><td>â­</td><td>æ¨¡æ‹Ÿè¡¨æ ¼ï¼ˆä¸æ¨èï¼‰</td></tr><tr><td><code>display: flex/grid</code></td><td>âœ… ç°ä»£å¸ƒå±€</td><td>âš ï¸ æ”¹å˜å­å…ƒç´ å¸ƒå±€æ¨¡å‹</td><td>âœ… ç°ä»£æµè§ˆå™¨</td><td>â­â­â­</td><td><strong>æœ¬èº«æ˜¯å¸ƒå±€å®¹å™¨æ—¶</strong></td></tr><tr><td><code>contain: layout/style/paint</code></td><td>âš ï¸ æ–°ç‰¹æ€§</td><td>âš ï¸ æ€§èƒ½éš”ç¦»ï¼ˆå¯èƒ½å½±å“æ¸²æŸ“ï¼‰</td><td>Chrome 52+ / FF 69+</td><td>â­â­</td><td>æ€§èƒ½ä¼˜åŒ–åœºæ™¯</td></tr></tbody></table>
<h2 data-id="heading-2">ä¸‰ã€BFC çš„æ ¸å¿ƒä½œç”¨ï¼ˆè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿï¼‰</h2>
<h3 data-id="heading-3">åœºæ™¯ä¸€ï¼šçˆ¶å®¹å™¨åŒ…å«æµ®åŠ¨å­å…ƒç´ ï¼ˆ<strong>è§£å†³çˆ¶å®¹å™¨é«˜åº¦å¡Œé™·</strong>ï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">html
è¿è¡Œhtml
&lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;
  &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span> style=<span class="hljs-string">"float: left"</span>&gt;Child <span class="hljs-number">1</span>&lt;/div&gt;
  &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span> style=<span class="hljs-string">"float: left"</span>&gt;Child <span class="hljs-number">2</span>&lt;/div&gt;
&lt;/div&gt;
</code></pre>



































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä»£ç </th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong><code>flow-root</code></strong></td><td><code>.parent { display: flow-root; }</code></td><td>æ— å‰¯ä½œç”¨ã€è¯­ä¹‰æ¸…æ™°</td><td>ä¸æ”¯æŒ IE</td></tr><tr><td><strong><code>overflow: hidden</code></strong></td><td><code>.parent { overflow: hidden; }</code></td><td>å…¨å…¼å®¹</td><td>å¯èƒ½è£å‰ªé˜´å½±</td></tr><tr><td><strong><code>::after</code>Â clearfix</strong></td><td><code>.parent::after { content:""; display:table; clear:both }</code></td><td>å…¨å…¼å®¹ã€æ— è£å‰ª</td><td>ä»£ç å†—ä½™</td></tr><tr><td><strong><code>flex</code></strong></td><td><code>.parent { display: flex; }</code></td><td>ç°ä»£ã€è‡ªåŠ¨ BFC</td><td>æ”¹å˜å­å…ƒç´ å¸ƒå±€</td></tr></tbody></table>
<blockquote>
</blockquote>
<h3 data-id="heading-4">åœºæ™¯äºŒï¼šè§£å†³MarginæŠ˜å </h3>
<pre><code class="hljs language-js" lang="js">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"box1"</span>&gt;<span class="hljs-title class_">Box</span> <span class="hljs-number">1</span>&lt;/div&gt; 
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box2"</span>&gt;</span>Box 2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>





























































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>CSS ä»£ç </th><th>æ˜¯å¦ç”Ÿæ•ˆ</th><th>å‰¯ä½œç”¨</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><strong>æ— å¤„ç†</strong></td><td>â€”</td><td>âŒ æŠ˜å ï¼ˆé—´è·=30pxï¼‰</td><td>â€”</td><td>â­</td></tr><tr><td><strong><code>flow-root</code></strong></td><td><code>.box2 { display: flow-root; }</code></td><td>âœ… é—´è·=50px</td><td>âŒ æ— </td><td>â­â­â­â­â­</td></tr><tr><td><strong><code>overflow: hidden</code></strong></td><td><code>.box2 { overflow: hidden; }</code></td><td>âœ… é—´è·=50px</td><td>âš ï¸ å¯èƒ½è£å‰ªå†…å®¹</td><td>â­â­â­</td></tr><tr><td><strong><code>float: left</code></strong></td><td><code>.box2 { float: left; width: 100%; }</code></td><td>âœ… é—´è·=50px</td><td>âš ï¸ è„±ç¦»æ–‡æ¡£æµ</td><td>â­</td></tr><tr><td><strong><code>position: absolute</code></strong></td><td><code>.box2 { position: absolute; }</code></td><td>âœ… ä½†å¸ƒå±€é”™ä¹±</td><td>âš ï¸ å®Œå…¨è„±ç¦»æµ</td><td>â­</td></tr><tr><td><strong><code>inline-block</code></strong></td><td><code>.box2 { display: inline-block; width: 100%; }</code></td><td>âœ… é—´è·=50px</td><td>âš ï¸ è¡Œå†…å—é—´éš™/å¯¹é½é—®é¢˜</td><td>â­â­</td></tr><tr><td><strong><code>flex</code>Â å®¹å™¨</strong></td><td>ç»™çˆ¶å®¹å™¨åŠ Â <code>display: flex; flex-direction: column;</code></td><td>âœ… é—´è·=50px</td><td>âš ï¸ æ”¹å˜å­å…ƒç´ å¸ƒå±€æ¨¡å‹</td><td>â­â­â­</td></tr></tbody></table>
<h3 data-id="heading-5">åœºæ™¯3ï¼šè‡ªé€‚åº”ä¸¤æ å¸ƒå±€</h3>
<pre><code class="hljs language-js" lang="js">&lt;!-- ä¸¤æ å¸ƒå±€ï¼šå·¦ä¾§å›ºå®šï¼Œå³ä¾§è‡ªé€‚åº” --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"layout"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sidebar"</span>&gt;</span>ä¾§è¾¹æ <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>ä¸»å†…å®¹åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/* ä¼ ç»Ÿæ–¹æ³•çš„é—®é¢˜ */</span>
.<span class="hljs-property">sidebar</span> {
  <span class="hljs-attr">float</span>: left;
  <span class="hljs-attr">width</span>: 200px;
  <span class="hljs-attr">background</span>: #ff6b6b;
  <span class="hljs-attr">height</span>: 300px;
}

.<span class="hljs-property">content</span> {
  <span class="hljs-comment">/* é—®é¢˜ï¼šå†…å®¹ä¼šè¢«æµ®åŠ¨å…ƒç´ è¦†ç›– */</span>
  <span class="hljs-attr">background</span>: #4ecdc4;
  <span class="hljs-attr">height</span>: 300px;
}

<span class="hljs-comment">/* BFCè§£å†³æ–¹æ¡ˆ */</span>
.<span class="hljs-property">content</span>-bfc {
  <span class="hljs-attr">overflow</span>: hidden; <span class="hljs-comment">/* åˆ›å»ºBFCï¼Œé¿å¼€æµ®åŠ¨å…ƒç´  */</span>
  <span class="hljs-attr">background</span>: #4ecdc4;
  <span class="hljs-attr">height</span>: 300px;
  <span class="hljs-comment">/* BFCåŒºåŸŸä¸ä¼šä¸float boxé‡å  */</span>
}
</code></pre>
<h3 data-id="heading-6">åœºæ™¯4ï¼šé˜²æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–</h3>
<pre><code class="hljs language-js" lang="js">&lt;!-- æ–‡å­—ç¯ç»•é—®é¢˜ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"float-box"</span>&gt;</span>æµ®åŠ¨ç›’å­<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-content"</span>&gt;</span>
    è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡å­—å†…å®¹ï¼Œåœ¨æ²¡æœ‰BFCçš„æƒ…å†µä¸‹ï¼Œ
    æ–‡å­—ä¼šç¯ç»•æµ®åŠ¨å…ƒç´ ã€‚ä½†æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›æ–‡å­—å†…å®¹
    ç‹¬ç«‹æˆå—ï¼Œä¸è¢«æµ®åŠ¨å…ƒç´ å½±å“ã€‚
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js">.<span class="hljs-property">float</span>-box {
  <span class="hljs-attr">float</span>: left;
  <span class="hljs-attr">width</span>: 100px;
  <span class="hljs-attr">height</span>: 100px;
  <span class="hljs-attr">background</span>: #ff6b6b;
  margin-<span class="hljs-attr">right</span>: 10px;
}

<span class="hljs-comment">/* é—®é¢˜ï¼šæ–‡å­—ç¯ç»•æµ®åŠ¨å…ƒç´  */</span>
.<span class="hljs-property">text</span>-content {
  <span class="hljs-attr">background</span>: #f0f0f0;
  <span class="hljs-attr">padding</span>: 10px;
}

<span class="hljs-comment">/* è§£å†³æ–¹æ¡ˆï¼šåˆ›å»ºBFC */</span>
.<span class="hljs-property">text</span>-content-bfc {
  <span class="hljs-attr">background</span>: #f0f0f0;
  <span class="hljs-attr">padding</span>: 10px;
  <span class="hljs-attr">overflow</span>: hidden; <span class="hljs-comment">/* åˆ›å»ºBFCï¼Œä¸ä¸æµ®åŠ¨å…ƒç´ é‡å  */</span>
}
</code></pre>
<h2 data-id="heading-7">å››ã€BFC vs IFC vs FFC</h2>
<p>å…¨å±å¤åˆ¶</p>



































<table><thead><tr><th>ä¸Šä¸‹æ–‡</th><th>å…¨ç§°</th><th>è§¦å‘æ¡ä»¶</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>BFC</strong></td><td>Block Formatting Context</td><td><code>overflow: hidden</code>,Â <code>display: flow-root</code>Â ç­‰</td><td>å—çº§å¸ƒå±€ã€è§£å†³æµ®åŠ¨å¡Œé™·</td></tr><tr><td><strong>IFC</strong></td><td>Inline Formatting Context</td><td>è¡Œå†…å…ƒç´ ã€<code>display: inline</code></td><td>æ–‡æœ¬ã€è¡Œå†…å…ƒç´ å¸ƒå±€</td></tr><tr><td><strong>FFC</strong></td><td>Flex Formatting Context</td><td><code>display: flex</code></td><td>å¼¹æ€§å¸ƒå±€</td></tr><tr><td><strong>GFC</strong></td><td>Grid Formatting Context</td><td><code>display: grid</code></td><td>ç½‘æ ¼å¸ƒå±€</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Dockeræ­å»ºMysql8çš„ä¸»ä»å¤åˆ¶]]></title>    <link>https://juejin.cn/post/7599094262593077258</link>    <guid>https://juejin.cn/post/7599094262593077258</guid>    <pubDate>2026-01-26T02:54:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599094262593077258" data-draft-id="7599268297202925606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Dockeræ­å»ºMysql8çš„ä¸»ä»å¤åˆ¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-26T02:54:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¼˜ç§€çš„é¢œ"/> <meta itemprop="url" content="https://juejin.cn/user/960313319521178"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Dockeræ­å»ºMysql8çš„ä¸»ä»å¤åˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/960313319521178/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¼˜ç§€çš„é¢œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T02:54:17.000Z" title="Mon Jan 26 2026 02:54:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Dockeræ­å»ºMysql8çš„ä¸»ä»å¤åˆ¶</h2>
<p>é€šè¿‡Dockeréƒ¨ç½²Mysqlä¸»ä»å¤åˆ¶ï¼ŒDockerå®‰è£…åœ¨å‰ç¯‡æœ‰ï¼Œç›´æ¥æ¼”ç¤ºï¼š</p>
<h3 data-id="heading-1">æ‹‰å–é•œåƒ</h3>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># è·å–æœ‰å“ªäº›é•œåƒ</span>
<span class="hljs-string">docker</span> <span class="hljs-string">search</span> <span class="hljs-string">mysql</span>

<span class="hljs-comment"># æ‹‰å–MySQLé•œåƒ</span>
<span class="hljs-string">docker</span> <span class="hljs-string">pull</span> <span class="hljs-string">mysql:8.0.32</span>

<span class="hljs-comment"># æŸ¥çœ‹é•œåƒ</span>
<span class="hljs-string">docker</span> <span class="hljs-string">images</span>
</code></pre>
<h3 data-id="heading-2">ä¸»èŠ‚ç‚¹çš„é…ç½®</h3>
<p>åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">/docker/mysql/master/data</span>
</code></pre>
<p>åˆ›å»ºæ—¥å¿—ç›®å½•</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">/docker/mysql/master/logs</span>
</code></pre>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">/docker/mysql/master/conf</span>
</code></pre>
<p>è¿›è¡Œå¿«é€Ÿå¯åŠ¨ - æŸ¥çœ‹é•œåƒæ˜¯å¦æœ‰é—®é¢˜
æ³¨ï¼šä¸åŒçš„ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶ä½ç½®ä¸åŒï¼Œå¯é€šè¿‡å¿«é€Ÿåˆ›å»ºï¼ŒæŸ¥çœ‹mysqlçš„å¯¹åº”çš„é…ç½®æ–‡ä»¶ä½ç½®ï¼Œè¿›è¡Œå¯¹åº”æ˜ å°„ã€‚</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># å¿«é€Ÿå¯åŠ¨  -dæ˜¯è¿›è¡Œå®ˆæŠ¤è¿›ç¨‹å¯åŠ¨</span>
<span class="hljs-string">docker</span> <span class="hljs-string">run</span> <span class="hljs-string">-p</span> <span class="hljs-number">3306</span><span class="hljs-string">:3306</span> <span class="hljs-string">--name</span> <span class="hljs-string">mysql8</span> <span class="hljs-string">-e</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD=123456</span> <span class="hljs-string">-d</span> <span class="hljs-string">mysql:8.0.32</span>
 
<span class="hljs-comment"># å¯åŠ¨æˆåŠŸåï¼Œè¿›å…¥å®¹å™¨å†…éƒ¨æ‹·è´é…ç½®æ–‡ä»¶ï¼Œåˆ°å®¿ä¸»ä¸»æœº</span>
<span class="hljs-string">docker</span> <span class="hljs-string">cp</span>  <span class="hljs-string">mysql8:/etc/mysql</span> <span class="hljs-string">/docker/mysql/master/conf</span>
 
<span class="hljs-comment"># åˆ é™¤åˆšæ‰çš„å®¹å™¨ï¼Œé‡æ–°åˆ›å»ºå®¹å™¨</span>
<span class="hljs-string">docker</span> <span class="hljs-string">stop</span> <span class="hljs-string">mysql8</span>
<span class="hljs-string">docker</span> <span class="hljs-string">rm</span> <span class="hljs-string">mysql8</span>
</code></pre>
<p>è¿è¡Œå®¹å™¨</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">docker</span> <span class="hljs-string">run</span> <span class="hljs-string">-p</span> <span class="hljs-number">3340</span><span class="hljs-string">:3306</span> <span class="hljs-string">--name</span> <span class="hljs-string">mysql_master</span> <span class="hljs-string">--privileged=true</span> <span class="hljs-string">\</span>
<span class="hljs-string">-v</span> <span class="hljs-string">/docker/mysql/master/conf:/etc/mysql/conf.d</span> <span class="hljs-string">\</span>
<span class="hljs-string">-v</span> <span class="hljs-string">/docker/mysql/master/logs:/var/log/mysql</span> <span class="hljs-string">\</span>
<span class="hljs-string">-v</span> <span class="hljs-string">/docker/mysql/master/data:/var/lib/mysql</span> <span class="hljs-string">\</span>
<span class="hljs-string">-v</span> <span class="hljs-string">/etc/localtime:/etc/localtime</span> <span class="hljs-string">\</span>
<span class="hljs-string">-e</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD=123456</span> <span class="hljs-string">-d</span> <span class="hljs-string">mysql:8.0.32</span> <span class="hljs-string">--init-connect="SET</span> <span class="hljs-string">collation_connection=utf8mb4_0900_ai_ci"</span> <span class="hljs-string">--init-connect="SET</span> <span class="hljs-string">NAMES</span> <span class="hljs-string">utf8mb4"</span> <span class="hljs-string">--skip-character-set-client-handshake</span> 
</code></pre>
<p>è¿›å…¥å®¹å™¨</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">docker</span> <span class="hljs-string">ps</span> <span class="hljs-string">-a</span>
<span class="hljs-string">docker</span> <span class="hljs-string">exec</span> <span class="hljs-string">-it</span> <span class="hljs-string">mysql_master</span> <span class="hljs-string">/bin/bash</span>
<span class="hljs-string">docker</span> <span class="hljs-string">exec</span> <span class="hljs-string">-it</span> <span class="hljs-string">mysql_master</span> <span class="hljs-string">env</span> <span class="hljs-string">LANG=C.UTF-8</span> <span class="hljs-string">/bin/bash</span> <span class="hljs-comment"># è¿›å…¥å®¹å™¨ï¼Œè¿™ç§è¿›å…¥é¿å…æ˜¾ç¤ºä¸­åˆä¹±ç </span>

<span class="hljs-comment"># æ‰“å¼€MySQLï¼Œè¾“å…¥å¯†ç </span>
<span class="hljs-string">mysql</span> <span class="hljs-string">-uroot</span> <span class="hljs-string">-p</span>
<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®åº“</span>
<span class="hljs-string">show</span> <span class="hljs-string">databases;</span>
<span class="hljs-comment"># åˆ›å»ºæ•°æ®åº“</span>
<span class="hljs-string">create</span> <span class="hljs-string">database</span> <span class="hljs-string">æ•°æ®åº“;</span>

<span class="hljs-comment"># å¦‚æœè¿œç¨‹é“¾æ¥å¤±è´¥ï¼Œå¯ä»¥ä¿®æ”¹é»˜è®¤å¯†ç æ ¡éªŒæ–¹å¼ï¼ˆç¬¬ä¸‰æ–¹å·¥å…·å¯ä»¥è¿æ¥ä¸Šï¼‰</span>
<span class="hljs-string">ALTER</span> <span class="hljs-string">USER</span> <span class="hljs-string">'root'</span><span class="hljs-string">@'%'</span> <span class="hljs-string">IDENTIFIED</span>  <span class="hljs-string">WITH</span> <span class="hljs-string">mysql_native_password</span> <span class="hljs-string">BY</span> <span class="hljs-string">'å¯†ç '</span><span class="hljs-string">;</span>
</code></pre>
<p>é…ç½®è¿œç¨‹è¿æ¥ï¼ˆå¯¹å¤–è¿æ¥çš„ï¼‰</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># åœ¨MySQLä¸‹æ‰§è¡Œ</span>
<span class="hljs-string">use</span> <span class="hljs-string">mysql;</span>
<span class="hljs-comment"># åˆ›å»ºå¯¹å¤–è®¿é—®çš„ç”¨æˆ·å’Œæƒé™</span>
<span class="hljs-string">CREATE</span> <span class="hljs-string">USER</span> <span class="hljs-string">'ç”¨æˆ·å'</span><span class="hljs-string">@'%'</span> <span class="hljs-string">IDENTIFIED</span> <span class="hljs-string">WITH</span> <span class="hljs-string">mysql_native_password</span> <span class="hljs-string">BY</span> <span class="hljs-string">'å¯†ç '</span><span class="hljs-string">;</span>
<span class="hljs-comment"># æˆæƒå…¨éƒ¨çš„æƒé™ï¼ˆèŒƒå›´å¤§ï¼‰</span>
<span class="hljs-comment"># GRANT ALL ON *.* TO 'ç”¨æˆ·å'@'%' WITH GRANT OPTION;</span>
<span class="hljs-comment"># åˆ·æ–°æƒé™</span>
<span class="hljs-string">FLUSH</span> <span class="hljs-string">PRIVILEGES;</span>

<span class="hljs-comment"># é€€å‡º</span>
<span class="hljs-string">exit</span>
</code></pre>
<p>åˆ›å»ºè‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ï¼ˆä¸»æœåŠ¡å™¨é…ç½®æ–‡ä»¶ï¼‰</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">cd</span> <span class="hljs-string">/docker/mysql/master/conf</span>
<span class="hljs-string">touch</span> <span class="hljs-string">my.cnf</span>
</code></pre>
<p>my.cnfæ–‡ä»¶å†…å®¹ï¼š</p>
<pre><code class="hljs language-yml" lang="yml">[<span class="hljs-string">client</span>]
<span class="hljs-comment"># mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span>
<span class="hljs-string">default-character-set=utf8mb4</span>
[<span class="hljs-string">mysql</span>]
<span class="hljs-string">default-character-set=utf8mb4</span>
[<span class="hljs-string">mysqld</span>]
<span class="hljs-comment"># è·³è¿‡å¯†ç ç™»å½•</span>
<span class="hljs-comment">#skip-grant-tables</span>
<span class="hljs-comment">#bind-address = 127.0.0.1</span>
<span class="hljs-string">init_connect='SET</span> <span class="hljs-string">collation_connection</span> <span class="hljs-string">=</span> <span class="hljs-string">utf8mb4_general_ci'</span>
<span class="hljs-string">init_connect='SET</span> <span class="hljs-string">NAMES</span> <span class="hljs-string">utf8mb4'</span>
<span class="hljs-comment"># mysqlæœåŠ¡ç«¯é»˜è®¤å­—ç¬¦é›†</span>
<span class="hljs-string">character-set-server=utf8mb4</span>
<span class="hljs-string">collation-server=utf8mb4_general_ci</span>
<span class="hljs-string">skip-character-set-client-handshake</span>
<span class="hljs-comment"># datadir=/var/lib/mysql  </span>

<span class="hljs-comment"># ä¸»æœåŠ¡å™¨å”¯ä¸€ID é»˜è®¤æ˜¯1</span>
<span class="hljs-string">server-id=1</span>
<span class="hljs-comment"># è®¾ç½®ä¸è¦å¤åˆ¶çš„æ•°æ®åº“</span>
<span class="hljs-string">binlog-ignore-db=mysql</span>
<span class="hljs-string">binlog-ignore-db=information_schema</span>
<span class="hljs-string">binlog-ignore-db=performance_schema</span>
<span class="hljs-comment"># è®¾ç½®éœ€è¦å¤åˆ¶çš„æ•°æ®åº“ï¼ˆå…ˆåˆ›å»ºå¥½ï¼‰</span>
<span class="hljs-string">binlog-do-db=æ•°æ®åº“å</span>
<span class="hljs-comment"># å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—ï¼Œæ—¥å¿—çš„å­˜æ”¾åœ°å€(é»˜è®¤æ˜¯binlog)ï¼Œå°±æ˜¯åœ¨show master status;çœ‹åˆ°Filedåå­—</span>
<span class="hljs-string">log-bin=/var/lib/mysql/mysql-bin</span>
<span class="hljs-comment"># ä¸»æœºï¼Œ1 åªè¯» 0 è¯»å†™ï¼ˆé»˜è®¤æ˜¯0ï¼‰</span>
<span class="hljs-string">read-only=0</span>
<span class="hljs-comment"># è®¾ç½®logbinæ ¼å¼ æœ‰3ç§æ ¼å¼ </span>
<span class="hljs-comment"># STATEMENT(å‡½æ•°æ”¯æŒä¸å¥½) å†™æŒ‡ä»¤ï¼Œä¼šå‡ºç°ä¸»ä»æ•°æ®ä¸åŒæ­¥ï¼Œnowï¼ˆï¼‰å‡½æ•°</span>
<span class="hljs-comment"># ROW(è¡Œæ¨¡å¼å¤§é‡ä¿®æ”¹æ•ˆç‡ä¸è¡Œï¼Œä½†æ”¯æŒå­˜å‚¨å¼•æ“) - é»˜è®¤çš„</span>
<span class="hljs-comment"># MIXED (ç»¼åˆï¼Œæ¨è)</span>
<span class="hljs-string">binlog_format=mixed</span>
<span class="hljs-comment">## è·³è¿‡ä¸»ä»å¤åˆ¶ä¸­é‡åˆ°çš„æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œé¿å…slaveç«¯å¤åˆ¶ä¸­æ–­ã€‚</span>
<span class="hljs-comment">## å¦‚ï¼š1062é”™è¯¯æ˜¯æŒ‡ä¸€äº›ä¸»é”®é‡å¤ï¼Œ1032é”™è¯¯æ˜¯å› ä¸ºä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´</span>
<span class="hljs-string">slave_skip_errors=1062</span>
<span class="hljs-comment"># äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ¸…ç†æ—¶é—´ï¼Œé»˜è®¤æ˜¯0ï¼ˆä¸è‡ªåŠ¨æ¸…ç†ï¼‰</span>
<span class="hljs-string">expire_logs_days=7</span>
<span class="hljs-comment"># å•ä¸ªäºŒè¿›åˆ¶æ—¥å¿—å¤§å°</span>
<span class="hljs-string">max_binlog_size=200M</span>
<span class="hljs-comment"># è®¾ç½®æ¯éš”å¤šå°‘æ¬¡äº‹åŠ¡æäº¤æ“ä½œï¼Œå°†è¿™äº›æ“ä½œå†™å…¥äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶</span>
<span class="hljs-string">sync_binlog=1</span>
<span class="hljs-comment"># ä½¿ç”¨mysql_native_passwordæ’ä»¶çš„è®¤è¯</span>
<span class="hljs-comment"># default_authentication_plugin=mysql_native_password</span>
</code></pre>
<p>é‡å¯mysqlå®¹å™¨</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">docker</span> <span class="hljs-string">ps</span> <span class="hljs-string">-a</span>
<span class="hljs-string">docker</span> <span class="hljs-string">restart</span> <span class="hljs-string">å®¹å™¨id</span>
</code></pre>
<h4 data-id="heading-3"><strong>åˆ›å»ºç”¨æˆ·å¹¶æˆæƒç»™ä»æœº</strong></h4>
<p>ä¸»æœºåˆ›å»ºç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># è¿æ¥ä¸ŠMysqlæœåŠ¡ï¼Œæ‰§è¡Œ</span>
<span class="hljs-string">create</span> <span class="hljs-string">user</span> <span class="hljs-string">'ç”¨æˆ·å'</span><span class="hljs-string">@'%'</span> <span class="hljs-string">identified</span> <span class="hljs-string">with</span> <span class="hljs-string">mysql_native_password</span> <span class="hljs-string">by</span> <span class="hljs-string">'å¯†ç '</span><span class="hljs-string">;</span>
<span class="hljs-comment"># æˆæƒå¤åˆ¶çš„æƒé™ ONåçš„*.*ä»£è¡¨å…¨éƒ¨çš„åº“å’Œè¡¨</span>
<span class="hljs-string">GRANT</span> <span class="hljs-string">REPLICATION</span> <span class="hljs-string">SLAVE</span> <span class="hljs-string">ON</span> <span class="hljs-string">*.*</span> <span class="hljs-string">TO</span> <span class="hljs-string">'ç”¨æˆ·å'</span><span class="hljs-string">@'%';</span>
<span class="hljs-comment"># åˆ·æ–°æƒé™</span>
<span class="hljs-string">FLUSH</span> <span class="hljs-string">PRIVILEGES;</span>

<span class="hljs-comment"># å¦‚æœè¿œç¨‹é“¾æ¥å¤±è´¥ï¼Œå¯ä»¥ä¿®æ”¹é»˜è®¤å¯†ç æ ¡éªŒæ–¹å¼ï¼ˆç¬¬ä¸‰æ–¹å·¥å…·å¯ä»¥è¿æ¥ä¸Šï¼‰</span>
<span class="hljs-string">alter</span> <span class="hljs-string">user</span> <span class="hljs-string">'ç”¨æˆ·å'</span><span class="hljs-string">@'%'</span> <span class="hljs-string">identified</span> <span class="hljs-string">with</span> <span class="hljs-string">mysql_native_password</span> <span class="hljs-string">by</span> <span class="hljs-string">'å¯†ç '</span><span class="hljs-string">;</span>
</code></pre>
<p>æŸ¥è¯¢ä¸»æœºçš„çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">show</span> <span class="hljs-string">master</span> <span class="hljs-string">status;</span>
<span class="hljs-comment"># æ‰§è¡Œä¸Šé¢å‘½ä»¤ï¼Œå¾—åˆ° File(binlogæ—¥å¿—) Position(æ¥å…¥ç‚¹) Binlog_Do_DB(è¦å¤åˆ¶çš„æ•°æ®åº“) Binlog_IgnoreDB()</span>
<span class="hljs-comment"># éœ€è¦è®°å½•ä¸€ä¸‹Fileã€Position</span>
</code></pre>
<h3 data-id="heading-4">ä»èŠ‚ç‚¹é…ç½®</h3>
<p>åˆ›å»ºæ•°æ®ç›®å½•</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">/docker/mysql/slave/data</span>
</code></pre>
<p>åˆ›å»ºæ—¥å¿—ç›®å½•</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">/docker/mysql/slave/logs</span>
</code></pre>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">/docker/mysql/slave/conf</span>
</code></pre>
<p>åˆ›å»ºè‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">cd</span> <span class="hljs-string">/docker/mysql/slave/conf</span>
<span class="hljs-string">touch</span> <span class="hljs-string">my.cnf</span>
</code></pre>
<p>mysql.cnfæ–‡ä»¶å†…å®¹ï¼š</p>
<pre><code class="hljs language-yml" lang="yml">[<span class="hljs-string">client</span>]
<span class="hljs-comment"># mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span>
<span class="hljs-string">default-character-set=utf8mb4</span>
[<span class="hljs-string">mysql</span>]
<span class="hljs-string">default-character-set=utf8mb4</span>
[<span class="hljs-string">mysqld</span>]
<span class="hljs-comment"># è·³è¿‡å¯†ç ç™»å½•</span>
<span class="hljs-comment">#skip-grant-tables</span>
<span class="hljs-comment">#bind-address = 127.0.0.1</span>
<span class="hljs-string">init_connect='SET</span> <span class="hljs-string">collation_connection</span> <span class="hljs-string">=</span> <span class="hljs-string">utf8mb4_general_ci'</span>
<span class="hljs-string">init_connect='SET</span> <span class="hljs-string">NAMES</span> <span class="hljs-string">utf8mb4'</span>
<span class="hljs-comment"># mysqlæœåŠ¡ç«¯é»˜è®¤å­—ç¬¦é›†</span>
<span class="hljs-string">character-set-server=utf8mb4</span>
<span class="hljs-string">collation-server=utf8mb4_general_ci</span>
<span class="hljs-string">skip-character-set-client-handshake</span>
<span class="hljs-comment"># datadir=/var/lib/mysql  </span>

<span class="hljs-comment"># ä»æœåŠ¡å™¨å”¯ä¸€ID</span>
<span class="hljs-string">server-id</span> <span class="hljs-string">=</span> <span class="hljs-number">2</span>  
<span class="hljs-comment"># å¼€å¯ä¸­ç»§æ—¥å¿—</span>
<span class="hljs-string">relay-log=mysql-relay</span>
<span class="hljs-comment"># ä»æœºï¼Œ1 åªè¯» 0 è¯»å†™ï¼ˆé»˜è®¤æ˜¯0ï¼‰</span>
<span class="hljs-string">read-only=1</span>
<span class="hljs-comment"># å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—ï¼Œæ—¥å¿—çš„å­˜æ”¾åœ°å€ï¼Œå¦‚æœä»æœºå˜æˆä¸»æœºå¯ä»¥ç»§ç»­ä½¿ç”¨binæ—¥å¿—</span>
<span class="hljs-comment"># log-bin=mysql-slave-bin</span>
<span class="hljs-comment"># ä½¿ç”¨mysql_native_passwordæ’ä»¶çš„è®¤è¯</span>
<span class="hljs-comment"># default_authentiction_plugin=mysql_native_password</span>
</code></pre>
<p>è¿è¡Œå®¹å™¨</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">docker</span> <span class="hljs-string">run</span> <span class="hljs-string">-p</span> <span class="hljs-number">3341</span><span class="hljs-string">:3306</span> <span class="hljs-string">--name</span> <span class="hljs-string">mysql_slave</span> <span class="hljs-string">--privileged=true</span> <span class="hljs-string">\</span>
<span class="hljs-string">-v</span> <span class="hljs-string">/docker/mysql/slave/conf:/etc/mysql/conf.d</span> <span class="hljs-string">\</span>
<span class="hljs-string">-v</span> <span class="hljs-string">/docker/mysql/slave/logs:/var/log/mysql</span> <span class="hljs-string">\</span>
<span class="hljs-string">-v</span> <span class="hljs-string">/docker/mysql/slave/data:/var/lib/mysql</span> <span class="hljs-string">\</span>
<span class="hljs-string">-v</span> <span class="hljs-string">/etc/localtime:/etc/localtime</span> <span class="hljs-string">\</span>
<span class="hljs-string">-e</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD=123456</span> <span class="hljs-string">-d</span> <span class="hljs-string">mysql:8.0.32</span> <span class="hljs-string">--init-connect="SET</span> <span class="hljs-string">collation_connection=utf8mb4_0900_ai_ci"</span> <span class="hljs-string">--init-connect="SET</span> <span class="hljs-string">NAMES</span> <span class="hljs-string">utf8mb4"</span> <span class="hljs-string">--skip-character-set-client-handshake</span> 
</code></pre>
<p>è¿›å…¥å®¹å™¨</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">docker</span> <span class="hljs-string">ps</span> <span class="hljs-string">-a</span>
<span class="hljs-string">docker</span> <span class="hljs-string">exec</span> <span class="hljs-string">-it</span> <span class="hljs-string">mysql_slave</span> <span class="hljs-string">/bin/bash</span>
</code></pre>
<p>é…ç½®è¿œç¨‹è¿æ¥ï¼ˆå¯¹å¤–è¿æ¥çš„ï¼‰</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># æ‰“å¼€MySQLï¼Œè¾“å…¥å¯†ç </span>
<span class="hljs-string">mysql</span> <span class="hljs-string">-uroot</span> <span class="hljs-string">-p</span>
<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®åº“</span>
<span class="hljs-string">show</span> <span class="hljs-string">databases;</span>
<span class="hljs-comment"># åˆ›å»ºæ•°æ®åº“</span>
<span class="hljs-string">create</span> <span class="hljs-string">database</span> <span class="hljs-string">æ•°æ®åº“;</span>
<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®åº“</span>
<span class="hljs-comment"># åœ¨MySQLä¸‹æ‰§è¡Œ</span>
<span class="hljs-string">use</span> <span class="hljs-string">mysql;</span>
<span class="hljs-comment"># åˆ›å»ºå¯¹å¤–è®¿é—®çš„ç”¨æˆ·å’Œæƒé™</span>
<span class="hljs-string">CREATE</span> <span class="hljs-string">USER</span> <span class="hljs-string">'ç”¨æˆ·å'</span><span class="hljs-string">@'%'</span> <span class="hljs-string">IDENTIFIED</span> <span class="hljs-string">BY</span> <span class="hljs-string">'å¯†ç '</span><span class="hljs-string">;</span>
<span class="hljs-string">GRANT</span> <span class="hljs-string">ALL</span> <span class="hljs-string">ON</span> <span class="hljs-string">*.*</span> <span class="hljs-string">TO</span> <span class="hljs-string">'ç”¨æˆ·å'</span><span class="hljs-string">@'%'</span> <span class="hljs-string">WITH</span> <span class="hljs-string">GRANT</span> <span class="hljs-string">OPTION;</span>
<span class="hljs-string">FLUSH</span> <span class="hljs-string">PRIVILEGES;</span>

<span class="hljs-comment"># é€€å‡º</span>
<span class="hljs-string">exit</span>
</code></pre>
<h4 data-id="heading-5">è®¾ç½®åŒæ­¥ä¿¡æ¯</h4>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># åœæ­¢åŒæ­¥(ä¹‹å‰é…ç½®è¿‡ï¼Œéœ€è¦æ‰§è¡Œ)</span>
<span class="hljs-string">stop</span> <span class="hljs-string">slave;</span>

<span class="hljs-comment"># è®¾ç½®åŒæ­¥</span>
<span class="hljs-string">CHANGE</span> <span class="hljs-string">MASTER</span> <span class="hljs-string">TO</span> <span class="hljs-string">MASTER_HOST='ä¸»æœºIPåœ°å€',</span>
<span class="hljs-string">MASTER_PORT=ç«¯å£,</span>
<span class="hljs-string">MASTER_USER='ä¸»æœºç”¨æˆ·',MASTER_PASSWORD='ä¸»æœºç”¨æˆ·çš„å¯†ç ',</span>
<span class="hljs-string">MASTER_LOG_FILE='binlogæ—¥å¿—åå­—',</span>
<span class="hljs-string">MASTER_CONNECT_RETRY=30,</span>
<span class="hljs-string">MASTER_LOG_POS=å…·ä½“çš„æ¥å…¥ç‚¹å€¼;</span>

<span class="hljs-comment"># MASTER_CONNECT_RETRY æ˜¯å¦‚æœè¿æ¥å¤±è´¥ï¼Œé‡è¯•æ—¶é—´é—´éš”ï¼Œé»˜è®¤60ç§’</span>
</code></pre>
<p>å¦‚æœæ“ä½œå¤±è´¥ï¼Œéœ€è¦é‡æ–°é…ç½®ï¼Œæ‰§è¡Œä¸‹é¢2ä¸ªå‘½ä»¤</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">stop</span> <span class="hljs-string">slave;</span>    <span class="hljs-comment"># åœæ­¢åŒæ­¥æ“ä½œ</span>
<span class="hljs-string">reset</span> <span class="hljs-string">master;</span>  <span class="hljs-comment"># é‡ç½®ä¸»ä»é…ç½®ï¼Œåˆ é™¤ä¹‹å‰çš„ä¸­ç»§æ—¥å¿—ï¼Œä¼šå†ç”Ÿæˆä¸€ä»½æ–°çš„</span>
</code></pre>
<p>å¼€å§‹åŒæ­¥</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">start</span> <span class="hljs-string">slave;</span>
</code></pre>
<p>æ£€æŸ¥æ˜¯å¦æˆåŠŸ</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-string">show</span> <span class="hljs-string">slave</span> <span class="hljs-string">status</span> <span class="hljs-string">\G;</span>  <span class="hljs-comment"># æ£€æŸ¥çŠ¶æ€</span>
<span class="hljs-comment"># å¦‚æœç»“æœä¸‹é¢çš„å­—æ®µä¸ºYes ä»£è¡¨é…ç½®æˆåŠŸ</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">Slave_IO_Running:</span> <span class="hljs-literal">Yes</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">Slave_SQL_Running:</span> <span class="hljs-literal">Yes</span>
</code></pre>
<p>åœæ­¢å’Œé‡ç½®</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># ä»æœºä¸Šæ‰§è¡Œï¼Œåœæ­¢I/O çº¿ç¨‹å’ŒSQLçº¿ç¨‹çš„æ“ä½œ</span>
<span class="hljs-string">stop</span> <span class="hljs-string">slave;</span> 

<span class="hljs-comment"># ä»æœºä¸Šæ‰§è¡Œï¼Œç”¨äºåˆ é™¤SLAVEæ•°æ®åº“çš„relaylogæ—¥å¿—æ–‡ä»¶ï¼Œå¹¶é‡æ–°å¯ç”¨æ–°çš„relaylogæ–‡ä»¶</span>
<span class="hljs-string">reset</span> <span class="hljs-string">slave;</span>

<span class="hljs-comment"># ä¸»æœºä¸Šæ‰§è¡Œï¼Œåˆ é™¤æ‰€æœ‰çš„binglogæ—¥å¿—æ–‡ä»¶ï¼Œå¹¶å°†æ—¥å¿—ç´¢å¼•æ–‡ä»¶æ¸…ç©ºï¼Œé‡æ–°å¼€å§‹æ‰€æœ‰æ–°çš„æ—¥å¿—æ–‡ä»¶</span>
<span class="hljs-string">reset</span> <span class="hljs-string">master;</span>
</code></pre>
<h3 data-id="heading-6">éªŒè¯</h3>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># ä»ä¸»æœºä¸Šï¼Œåˆ›å»ºè¡¨ã€æ’å…¥SQLè¯­å¥</span>
<span class="hljs-comment"># åˆ›å»ºè¡¨</span>
<span class="hljs-string">CREATE</span> <span class="hljs-string">TABLE</span> <span class="hljs-string">`emp`</span> <span class="hljs-string">(</span>
  <span class="hljs-string">`id`</span> <span class="hljs-string">int(11)</span> <span class="hljs-string">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-string">COMMENT</span> <span class="hljs-string">'ä¸»é”®'</span><span class="hljs-string">,</span>
  <span class="hljs-string">`name`</span> <span class="hljs-string">varchar(255)</span>  <span class="hljs-string">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-string">COMMENT</span> <span class="hljs-string">'å‘˜å·¥å'</span><span class="hljs-string">,</span>
  <span class="hljs-string">`age`</span> <span class="hljs-string">int(11)</span> <span class="hljs-string">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-string">COMMENT</span> <span class="hljs-string">'å¹´é¾„'</span><span class="hljs-string">,</span>
  <span class="hljs-string">`did`</span> <span class="hljs-string">int(11)</span> <span class="hljs-string">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-string">COMMENT</span> <span class="hljs-string">'éƒ¨é—¨id'</span><span class="hljs-string">,</span>
  <span class="hljs-string">PRIMARY</span> <span class="hljs-string">KEY</span> <span class="hljs-string">(`id`)</span>
<span class="hljs-string">)</span> <span class="hljs-string">ENGINE=InnoDB</span> <span class="hljs-string">DEFAULT</span> <span class="hljs-string">CHARSET=utf8mb4</span> <span class="hljs-string">COLLATE=utf8mb4_0900_ai_ci</span> <span class="hljs-string">COMMENT='éƒ¨é—¨è¡¨';</span>
<span class="hljs-string">INSERT</span> <span class="hljs-string">INTO</span> <span class="hljs-string">emp</span> <span class="hljs-string">(`id`,</span> <span class="hljs-string">`name`,</span> <span class="hljs-string">`age`,</span> <span class="hljs-string">`did`)</span> <span class="hljs-string">VALUES</span> <span class="hljs-string">(1,</span> <span class="hljs-string">'åˆ˜å¤‡'</span><span class="hljs-string">,</span> <span class="hljs-number">55</span><span class="hljs-string">,</span> <span class="hljs-number">1</span><span class="hljs-string">);</span>
<span class="hljs-comment"># åˆ†åˆ« åœ¨ä¸»æœºå’Œä»æœºè¿›è¡ŒæŸ¥è¯¢è¯¥SQLè¯­å¥</span>
<span class="hljs-string">select</span> <span class="hljs-string">*</span> <span class="hljs-string">from</span>  <span class="hljs-string">emp;</span>
<span class="hljs-comment"># å¦‚ï¼šéƒ½çœ‹åˆ°ç›¸åŒçš„æ•°æ®ï¼Œä»£è¡¨æˆåŠŸ</span>
</code></pre>
<h3 data-id="heading-7">å¸¸è§é—®é¢˜</h3>
<p>å¯åŠ¨ä¸»ä»åŒæ­¥åï¼Œå¸¸è§é”™è¯¯æ˜¯<code>Slave_IO_Runningï¼š No æˆ–è€… Connecting</code> çš„æƒ…å†µï¼Œæ­¤æ—¶æŸ¥çœ‹ä¸‹æ–¹çš„ <code>Last_IO_ERROR</code>é”™è¯¯æ—¥å¿—ï¼Œæ ¹æ®æ—¥å¿—ä¸­æ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯åœ¨ç½‘ä¸Šæœç´¢è§£å†³æ–¹æ¡ˆå³å¯</p>
<p>ä¸€ å¸¸è§é”™è¯¯ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">`Last_IO_Error: Got fatal <span class="hljs-keyword">error</span> <span class="hljs-number">1236</span> <span class="hljs-keyword">from</span> master <span class="hljs-keyword">when</span> reading data <span class="hljs-keyword">from</span> <span class="hljs-keyword">binary</span> log: <span class="hljs-comment">'Client requested master to start replication from position &gt; file size'`</span>
</code></pre>
<p>è§£å†³ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åœ¨ä»æœºåœæ­¢slave</span>
SLAVE STOP;

<span class="hljs-comment">-- åœ¨ä¸»æœºæŸ¥çœ‹materçŠ¶æ€</span>
<span class="hljs-keyword">SHOW</span> MASTER STATUS;
<span class="hljs-comment">-- åœ¨ä¸»æœºåˆ·æ–°æ—¥å¿—</span>
FLUSH LOGS;
<span class="hljs-comment">-- å†æ¬¡åœ¨ä¸»æœºæŸ¥çœ‹materçŠ¶æ€ï¼ˆä¼šå‘ç°Fileå’ŒPositionå‘ç”Ÿäº†å˜åŒ–ï¼‰</span>
<span class="hljs-keyword">SHOW</span> MASTER STATUS;
<span class="hljs-comment">-- ä¿®æ”¹ä»æœºè¿æ¥ä¸»æœºçš„SQLï¼Œå¹¶é‡æ–°è¿æ¥å³å¯</span>
</code></pre>
<p>äºŒï¼šå¯åŠ¨dockerå®¹å™¨åæç¤º <code>WARNING: IPv4 forwarding is disabled. Networking will not work.</code></p>
<p>è§£å†³ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</span>
vim /usr/lib/sysctl.d/00-system.conf
<span class="hljs-comment">#è¿½åŠ </span>
<span class="hljs-attr">net.ipv4.ip_forward</span>=<span class="hljs-number">1</span>
<span class="hljs-comment">#æ¥ç€é‡å¯ç½‘ç»œ</span>
systemctl restart network
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¶è—ï¼LLMå¼€å‘å…¨é“¾è·¯ï¼š5å¤§æ­¥éª¤+15å¤§æ¡†æ¶ï¼Œä»æ•°æ®æ²»ç†åˆ°RLHFä¸€æ–‡é€šå…³]]></title>    <link>https://juejin.cn/post/7599094262592045066</link>    <guid>https://juejin.cn/post/7599094262592045066</guid>    <pubDate>2026-01-26T00:11:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599094262592045066" data-draft-id="7598480267218845730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¶è—ï¼LLMå¼€å‘å…¨é“¾è·¯ï¼š5å¤§æ­¥éª¤+15å¤§æ¡†æ¶ï¼Œä»æ•°æ®æ²»ç†åˆ°RLHFä¸€æ–‡é€šå…³"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-01-26T00:11:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIFrontiers"/> <meta itemprop="url" content="https://juejin.cn/user/4443547050451306"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¶è—ï¼LLMå¼€å‘å…¨é“¾è·¯ï¼š5å¤§æ­¥éª¤+15å¤§æ¡†æ¶ï¼Œä»æ•°æ®æ²»ç†åˆ°RLHFä¸€æ–‡é€šå…³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4443547050451306/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIFrontiers
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T00:11:42.000Z" title="Mon Jan 26 2026 00:11:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»35åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FoRUjkoUcHOrMtHfVHkr5Cw" target="_blank" title="https://mp.weixin.qq.com/s/oRUjkoUcHOrMtHfVHkr5Cw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/oRUjkoUcHâ€¦</a></p>
<p><strong>LLM</strong> <strong>å¾€æœŸæ–‡ç« æ¨è</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fcx3qY42Lp0L3RaSOgsH77A" target="_blank" title="https://mp.weixin.qq.com/s/cx3qY42Lp0L3RaSOgsH77A" ref="nofollow noopener noreferrer">å°ç™½ä¹Ÿèƒ½çœ‹æ‡‚çš„RL-PPO</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FnfN0dWT3ZfDuW7ZGfaG6dA" target="_blank" title="https://mp.weixin.qq.com/s/nfN0dWT3ZfDuW7ZGfaG6dA" ref="nofollow noopener noreferrer">æ”¶è—ï¼å¼ºåŒ–å­¦ä¹ ä»å…¥é—¨åˆ°å°ç¥ï¼š5 æœ¬ç»å…¸æ•™æ + 8 å¤§å®æˆ˜é¡¹ç›® + 7ä¸ªå…è´¹è§†é¢‘ï¼Œä¸€ç«™å¼æå®š</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F4_6CBXMJhqmiYKSzsAXncg" target="_blank" title="https://mp.weixin.qq.com/s/4_6CBXMJhqmiYKSzsAXncg" ref="nofollow noopener noreferrer">å°ç™½ä¹Ÿèƒ½çœ‹æ‡‚çš„RLHFï¼šåŸºç¡€ç¯‡</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F8O7W8--x14-b1d3M9IS_3w" target="_blank" title="https://mp.weixin.qq.com/s/8O7W8--x14-b1d3M9IS_3w" ref="nofollow noopener noreferrer">å°ç™½ä¹Ÿèƒ½çœ‹æ‡‚çš„RLHF-PPOï¼šåŸç†ç¯‡</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9KT9LrMTXDGHSvGFrQhRkg" target="_blank" title="https://mp.weixin.qq.com/s/9KT9LrMTXDGHSvGFrQhRkg" ref="nofollow noopener noreferrer">å°ç™½ä¹Ÿèƒ½çœ‹æ‡‚çš„LLM-RLç®—æ³•ï¼šPPO/DPO/GRPO/GSPO</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9f4mqYVGKNS-LhmHLl6CXw" target="_blank" title="https://mp.weixin.qq.com/s/9f4mqYVGKNS-LhmHLl6CXw" ref="nofollow noopener noreferrer">æ”¶è—ï¼LLM-RLè®­ç»ƒæ¡†æ¶ï¼š3å¤§æµæ´¾+6å¤§æ¡†æ¶ï¼Œä¸€æ–‡æå®š</a></p>
<p>åœ¨ä¸Šä¸€ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9f4mqYVGKNS-LhmHLl6CXw" target="_blank" title="https://mp.weixin.qq.com/s/9f4mqYVGKNS-LhmHLl6CXw" ref="nofollow noopener noreferrer">æ”¶è—ï¼LLM-RLè®­ç»ƒæ¡†æ¶ï¼š3å¤§æµæ´¾+6å¤§æ¡†æ¶ï¼Œä¸€æ–‡æå®š</a>ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹è®¨è®ºäº†LLMè®­ç»ƒæŠ€æœ¯çš„å¼€æºæ¡†æ¶ï¼Œå¹¶æœªæ¶‰åŠLLMè®­ç»ƒçš„å…¶ä»–ç¯èŠ‚ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸä»æ¨¡å‹ä¸­å¿ƒåŒ–å‘æ•°æ®ä¸­å¿ƒåŒ–èŒƒå¼è½¬ç§»çš„èƒŒæ™¯ä¸‹ï¼ŒLLMçš„æˆåŠŸä¸ä»…ä¾èµ–äºæ¨¡å‹å‚æ•°è§„æ¨¡çš„çˆ†ç‚¸å¼å¢é•¿ï¼Œæ›´å–å†³äºå…¨é“¾è·¯å·¥ç¨‹åŒ–çš„ç²¾ç»†ç¨‹åº¦ã€‚</p>
<p>è¿™ä¸€é“¾è·¯æ¶µç›–äº†ä»æµ·é‡å¼‚æ„æ•°æ®çš„ç²¾ç‚¼ã€è¶…å¤§è§„æ¨¡åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æ¨¡å‹è®­ç»ƒã€ç‰¹å®šä»»åŠ¡é©±åŠ¨çš„æŒ‡ä»¤å¾®è°ƒï¼Œåˆ°æœ€ç»ˆæ¨¡å‹è¾“å‡ºä¸äººç±»ä»·å€¼è§‚å¯¹é½çš„RLHFé˜¶æ®µã€‚å¦‚è¿‘çš„å¼€æºç”Ÿæ€ç³»ç»Ÿå·²æ¶Œç°å‡ºä¸€æ‰¹é«˜æ€§èƒ½ã€æ¨¡å—åŒ–ä¸”è½åœ°æ€§å¼ºçš„ä»£ç æ¡†æ¶ï¼Œè¿™äº›å·¥å…·æå¤§åœ°é™ä½äº†å¼€å‘è€…è®­ç»ƒã€å¾®è°ƒå’Œéƒ¨ç½²ç§æœ‰åŒ–å¤§æ¨¡å‹çš„é—¨æ§›ã€‚æœ¬ç¯‡å°†å¯¹è¿™ä¸€å…¨é“¾è·¯ä¸­çš„æ ¸å¿ƒå¼€æºæ¡†æ¶è¿›è¡Œæ·±åº¦çš„æŠ€æœ¯è§£æ„ï¼Œåˆ†æå…¶åº•å±‚æœºåˆ¶ã€æ€§èƒ½æŒ‡æ ‡åŠè¡Œä¸šåº”ç”¨åœºæ™¯ã€‚</p>
<h2 data-id="heading-0">1 åˆ†å¸ƒå¼æ•°æ®æ¸…æ´—ä¸ç¼–æ’å¼•æ“</h2>
<p>æ•°æ®è´¨é‡æ˜¯LLMæ€§èƒ½çš„ç”Ÿå‘½çº¿ã€‚å½“å‰å·¥ä¸šç•Œçš„å…±è¯†æ˜¯ï¼Œé«˜è´¨é‡çš„åˆæˆæ•°æ®å’Œç»è¿‡ä¸¥è‹›æ¸…æ´—çš„NLPè¯­æ–™å¯¹æå‡æ¨¡å‹é€»è¾‘æ¨ç†èƒ½åŠ›è‡³å…³é‡è¦ã€‚å½“æ•°æ®è§„æ¨¡è¾¾åˆ°PBçº§æ—¶ï¼Œå•æœºå¤„ç†å˜å¾—ä¸å¯è¡Œã€‚å¼‚æ„è„æ•°æ®çš„å¤„ç†æµç¨‹éœ€è¦å¤æ‚çš„ä»»åŠ¡ç¼–æ’å’Œå¤§è§„æ¨¡åˆ†å¸ƒå¼è®¡ç®—çš„æ”¯æŒã€‚</p>
<h3 data-id="heading-1">1.1 <strong>Data-Juicer</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89ddcae485144e6d8eac40455408cb66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769991101&amp;x-signature=5KG9FkaBX4rfG39k1cNDOolCkgM%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>gitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatajuicer%2Fdata-juicer" target="_blank" title="https://github.com/datajuicer/data-juicer" ref="nofollow noopener noreferrer">github.com/datajuicer/â€¦</a> 5.8kâ­</p>
</li>
<li>
<p>è¯´æ˜æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdatajuicer.github.io%2Fdata-juicer%2Fzh_CN%2Fmain%2Fdocs_index_ZH.html" target="_blank" title="https://datajuicer.github.io/data-juicer/zh_CN/main/docs_index_ZH.html" ref="nofollow noopener noreferrer">datajuicer.github.io/data-juicerâ€¦</a></p>
</li>
<li>
<p>è®ºæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2501.14755v2" target="_blank" title="https://arxiv.org/pdf/2501.14755v2" ref="nofollow noopener noreferrer">arxiv.org/pdf/2501.14â€¦</a></p>
</li>
</ul>
<h4 data-id="heading-2"><strong>æ ¸å¿ƒç‰¹ç‚¹</strong></h4>
<ul>
<li>
<p><strong>ä¸€ç«™å¼ä¸ç³»ç»ŸåŒ–</strong>ï¼šæ¶µç›–äº†æ•°æ®åˆ†æã€æ¸…æ´—ã€è¿‡æ»¤ã€è½¬æ¢ã€å»é‡åŠåˆæˆçš„å®Œæ•´é“¾è·¯ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·åŒ…ï¼Œæ›´æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿï¼Œæä¾›äº†100å¤šä¸ªæ ¸å¿ƒç®—å­ã€‚</p>
</li>
<li>
<p><strong>å¤šæ¨¡æ€æ”¯æŒ</strong>ï¼šé™¤äº†åŸºç¡€çš„æ–‡æœ¬æ•°æ®ï¼ŒData-Juicer 2.0åŠåç»­ç‰ˆæœ¬æ·±åº¦æ”¯æŒå›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰å¤šç§æ¨¡æ€ï¼Œèƒ½å¤Ÿå¤„ç†å¤æ‚çš„äº¤ç»‡å¤šæ¨¡æ€æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>é«˜æ•ˆæ‰©å±•</strong>ï¼šåŸºäºRayå’ŒCUDAä¼˜åŒ–ï¼Œæ”¯æŒå•æœºåˆ°æ•°åƒæ ¸é›†ç¾¤çš„å¼¹æ€§æ‰©å±•ï¼Œæ€§èƒ½ç»å·¥ä¸šçº§éªŒè¯ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®-æ¨¡å‹å…±å¼€å‘ï¼ˆSandboxï¼‰</strong> ï¼šæä¾›æ²™ç›’æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…åœ¨å°è§„æ¨¡æ•°æ®ä¸Šå¿«é€Ÿè¿­ä»£å®éªŒï¼Œé€šè¿‡åé¦ˆå¾ªç¯å’Œå¯è§†åŒ–å·¥å…·å¿«é€ŸéªŒè¯æ•°æ®æ”¹è¿›å¯¹æ¨¡å‹æ•ˆæœçš„å½±å“ã€‚</p>
</li>
</ul>
<h4 data-id="heading-3">é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>
<p><strong>é¢„è®­ç»ƒ/å¾®è°ƒåŠ é€Ÿ</strong>ï¼šå¯¹æµ·é‡ç½‘é¡µæ•°æ®å»å™ªï¼Œæˆ–ç­›é€‰é«˜è´¨é‡ã€é«˜å¤šæ ·æ€§çš„æŒ‡ä»¤å¾®è°ƒæ•°æ®ã€‚</p>
</li>
<li>
<p><strong>å¤šæ¨¡æ€ç”Ÿæˆè®­ç»ƒ</strong>ï¼šä¸ºç±»ä¼¼Soraçš„è§†é¢‘ç”Ÿæˆæˆ–å¤šæ¨¡æ€å¤§æ¨¡å‹å‡†å¤‡ç²¾ç»†åŒ–æ ‡æ³¨ä¸æ¸…æ´—åçš„è¯­æ–™ã€‚</p>
</li>
<li>
<p><strong>è‡ªåŠ¨åŒ–æ•°æ®å·¥ç¨‹</strong>ï¼šåˆ©ç”¨AIç®—å­è‡ªåŠ¨ç”Ÿæˆã€é‡å†™æ•°æ®ï¼Œæˆ–æ¢ç´¢æœ€ä¼˜æ•°æ®æ··åˆæ¯”ä¾‹ã€‚</p>
</li>
</ul>
<h4 data-id="heading-4">ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼šâ‘  å·¥ä¸šçº§æˆç†Ÿåº¦ï¼šæºè‡ªé˜¿é‡Œå·´å·´é€šä¹‰å®éªŒå®¤ï¼Œç»è¿‡å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒéªŒè¯ï¼Œç®—å­ä¸°å¯Œä¸”æ€§èƒ½ä¼˜å¼‚ï¼›â‘¡ ç”Ÿæ€é›†æˆåº¦é«˜ï¼šä¸ModelScopeï¼ˆé­”æ­ç¤¾åŒºï¼‰ã€LLaMA-Factoryã€Rayç­‰ä¸»æµå¤§æ¨¡å‹ç”Ÿæ€æ·±åº¦æ‰“é€šï¼Œæ–¹ä¾¿å¼€å‘è€…é›†æˆåˆ°ç°æœ‰æµæ°´çº¿ï¼›â‘¢ çµæ´»æ˜“ç”¨ï¼šå¯¹äºæ–°æ‰‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å®˜æ–¹æä¾›çš„æœ€ä½³å®è·µé…ç½®ï¼›å¯¹äºé«˜çº§ç”¨æˆ·ï¼Œå¯ä»¥é€šè¿‡ Python çµæ´»è‡ªå®šä¹‰ç®—å­ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šâ‘  å­¦ä¹ æˆæœ¬ï¼šç®—å­åº“åºå¤§ï¼Œéœ€ä¸€å®šæ—¶é—´æ‘¸ç´¢æœ€ä½³å‚æ•°ç»„åˆï¼›â‘¡ èµ„æºéœ€æ±‚ï¼šéƒ¨åˆ†é«˜çº§ç®—å­ï¼ˆå¦‚æ¨¡å‹æ‰“åˆ†ï¼‰ä¾èµ–è®¡ç®—èµ„æºï¼Œå¤„ç†æµ·é‡æ•°æ®æ—¶æˆæœ¬è¾ƒé«˜ã€‚</p>
<h3 data-id="heading-5">1.2 Datatrove</h3>
<ul>
<li>github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhuggingface%2Fdatatrove" target="_blank" title="https://github.com/huggingface/datatrove" ref="nofollow noopener noreferrer">github.com/huggingfaceâ€¦</a> 2.8kâ­</li>
</ul>
<h4 data-id="heading-6">å…³é”®ç‰¹<strong>æ€§</strong></h4>
<ul>
<li>
<p><strong>å¹³å°æ— å…³çš„æµæ°´çº¿</strong>ï¼šä»£ç åœ¨æœ¬åœ°æœºå™¨ã€Slurmé›†ç¾¤æˆ– Rayé›†ç¾¤ä¸Šè¿è¡Œæ—¶å‡ ä¹ä¸éœ€è¦æ”¹åŠ¨ã€‚å®ƒé€šè¿‡æ‰§è¡Œå™¨æœºåˆ¶æŠ½è±¡äº†åº•å±‚ç®—åŠ›ã€‚</p>
</li>
<li>
<p><strong>ä½</strong> <strong>å†…å­˜</strong> <strong>å ç”¨ä¸æµå¼å¤„ç†</strong>ï¼šé‡‡ç”¨ç”Ÿæˆå™¨æ¨¡å¼ï¼Œæ•°æ®ä»¥æµçš„å½¢å¼é€šè¿‡å¤„ç†æ¨¡å—ï¼Œå³ä¾¿å¤„ç†æ•°ç™¾TBçš„æ•°æ®ï¼Œå†…å­˜æ¶ˆè€—ä¹Ÿèƒ½æ§åˆ¶åœ¨è¾ƒä½æ°´å¹³ã€‚</p>
</li>
<li>
<p><strong>å¼ºå¤§çš„å»é‡åŠŸèƒ½</strong>ï¼šå†…ç½®äº†å·¥ä¸šçº§çš„å»é‡ç®—æ³•ï¼ŒåŒ…æ‹¬MinHashï¼ˆæ¨¡ç³Šå»é‡ï¼‰å’ŒExact Substringï¼ˆç²¾ç¡®å­ä¸²å»é‡ï¼‰ï¼Œè¿™æ˜¯å¤„ç†ç½‘é¡µæŠ“å–æ•°æ®çš„å…³é”®ã€‚</p>
</li>
<li>
<p><strong>å®¹é”™ä¸æ–­ç‚¹ç»­ä¼ </strong>ï¼šèƒ½å¤Ÿè‡ªåŠ¨è·Ÿè¸ªå·²å®Œæˆçš„ä»»åŠ¡ï¼Œå¦‚æœä½œä¸šåœ¨é›†ç¾¤ä¸­å´©æºƒï¼Œé‡å¯åä¼šè‡ªåŠ¨è·³è¿‡å·²å¤„ç†çš„éƒ¨åˆ†ã€‚</p>
</li>
</ul>
<h4 data-id="heading-7">é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>
<p><strong>LLM</strong> <strong>é¢„è®­ç»ƒæ¸…æ´—</strong>ï¼šå¤„ç†Common Crawlç­‰åŸå§‹ç½‘é¡µå¿«ç…§ï¼Œæå–çº¯å‡€æ–‡æœ¬å¹¶å‰”é™¤ä½è´¨é‡å†…å®¹ã€‚ã€‚</p>
</li>
<li>
<p><strong>è¶…å¤§è§„æ¨¡å»é‡</strong>ï¼šåœ¨æµ·é‡æ•°æ®ä¸­ç²¾å‡†å‰”é™¤é‡å¤æˆ–é«˜åº¦ç›¸ä¼¼çš„æ–‡æ¡£ã€‚</p>
</li>
<li>
<p><strong>åˆ†å¸ƒå¼</strong> <strong>æ•°æ®å·¥ç¨‹</strong>ï¼šåˆ©ç”¨Slurmæˆ–Rayç­‰é›†ç¾¤ç¯å¢ƒå¿«é€Ÿå¤„ç†ä¸‡äº¿è§„æ¨¡çš„æ•°æ®é›†ã€‚</p>
</li>
</ul>
<h4 data-id="heading-8">ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼šâ‘  æè‡´çš„æ‰©å±•æ€§ï¼šä¸æ˜¯ä¸ºäº†å¤„ç†å°æ ·æœ¬è®¾è®¡çš„ï¼Œè€Œæ˜¯ä¸ºäº†å¤„ç†ä¸‡äº¿çº§Tokenè®¾è®¡çš„ï¼Œåœ¨Slurmæˆ–Rayåˆ†å¸ƒå¼ç¯å¢ƒä¸‹è¡¨ç°æä½³ï¼›â‘¡ç®€æ´çš„APIï¼šPythonicé£æ ¼ï¼Œæ¨¡å—åŒ–ç¨‹åº¦é«˜ï¼Œæ˜“äºè‡ªå®šä¹‰æ‰©å±•ï¼›â‘¢ ä¸ç”Ÿæ€æ·±åº¦é›†æˆï¼šä¸Hugging Face Hubå’Œfsspecæ·±åº¦æ•´åˆï¼Œæ”¯æŒç›´æ¥è¯»å†™S3ã€Hugging Faceæ•°æ®ä»“åº“ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šâ‘ ä¸»è¦ä¾§é‡æ–‡æœ¬ï¼šç†è®ºä¸Šè™½ç„¶å¯ä»¥å¤„ç†å…¶ä»–æ•°æ®ï¼Œä½†ç›®å‰å…¶ç”Ÿæ€å’Œé¢„ç½®ç®—å­ä¸»è¦é›†ä¸­åœ¨æ–‡æœ¬é¢†åŸŸã€‚åœ¨å¤šæ¨¡æ€ï¼ˆå›¾åƒã€è§†é¢‘ï¼‰ç®—å­çš„ä¸°å¯Œåº¦ä¸Šï¼Œç›®å‰å¼±äºData-Juicerï¼›â‘¡ æ–‡æ¡£ç›¸å¯¹ç²¾ç®€ï¼šç›¸æ¯”ä¸€äº›å•†ä¸šåŒ–æˆ–å†å²æ‚ ä¹…çš„æ¡†æ¶ï¼Œå…¶è¯¦ç»†æ–‡æ¡£å’Œæ•™ç¨‹ä»åœ¨å®Œå–„ä¸­ï¼Œæ›´å¤šä¾èµ–ç¤ºä¾‹ä»£ç ï¼ˆExamplesï¼‰ã€‚</p>
<h2 data-id="heading-9">2 åˆ†å¸ƒå¼é¢„è®­ç»ƒä¸æ¨¡å‹è®­ç»ƒåº•å±‚æ¶æ„</h2>
<p>å½“æ•°æ®å‡†å¤‡å°±ç»ªåï¼Œå¦‚ä½•å°†å…¶é«˜æ•ˆåœ°è¾“å…¥åˆ°åˆ†å¸ƒå¼è®¡ç®—é›†ç¾¤ä¸­è¿›è¡Œè®­ç»ƒæˆä¸ºæ ¸å¿ƒæŒ‘æˆ˜ã€‚å› å•ä¸ªGPUçš„æ˜¾å­˜ï¼ˆå¦‚H100çš„80GBï¼‰è¿œä¸è¶³ä»¥å®¹çº³100+Bå‚æ•°çš„æ¨¡å‹ã€åŠå…¶ä¼˜åŒ–å™¨çŠ¶æ€å’Œæ¢¯åº¦ï¼Œåˆ†å¸ƒå¼å¹¶è¡Œç­–ç•¥æˆä¸ºäº†ç°ä»£è®­ç»ƒæ¡†æ¶çš„åŸºçŸ³ã€‚</p>
<h3 data-id="heading-10">2.1 Megatron-LM</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/543728942fb54ffe99c39cd4fcceb735~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769991101&amp;x-signature=Vl3MZyjRupsHVfxnhR13ExIyn50%3D" alt="" loading="lazy"/></p>
<ul>
<li>Github : <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNVIDIA%2FMegatron-LM" target="_blank" title="https://github.com/NVIDIA/Megatron-LM" ref="nofollow noopener noreferrer">github.com/NVIDIA/Megaâ€¦</a> 15kâ­</li>
<li>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.nvidia.com%2Fmegatron-core%2Findex.html" target="_blank" title="https://docs.nvidia.com/megatron-core/index.html" ref="nofollow noopener noreferrer">docs.nvidia.com/megatron-coâ€¦</a></li>
<li>è®ºæ–‡1ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F1909.08053" target="_blank" title="https://arxiv.org/pdf/1909.08053" ref="nofollow noopener noreferrer">arxiv.org/pdf/1909.08â€¦</a></li>
<li>è®ºæ–‡2ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2104.04473" target="_blank" title="https://arxiv.org/pdf/2104.04473" ref="nofollow noopener noreferrer">arxiv.org/pdf/2104.04â€¦</a></li>
<li>è®ºæ–‡3ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2205.05198" target="_blank" title="https://arxiv.org/pdf/2205.05198" ref="nofollow noopener noreferrer">arxiv.org/pdf/2205.05â€¦</a></li>
</ul>
<p>Megatron-LMä½œä¸ºç”±NVIDIAæ·±åº¦å¼€å‘çš„åˆ†å¸ƒå¼è®­ç»ƒæ¡†æ¶ï¼Œæ ¸å¿ƒè´¡çŒ®åœ¨äºæå‡ºå¹¶å®Œå–„äº†å¤šç»´å¹¶è¡Œä½“ç³»ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹ Transformer ç»“æ„çš„æ·±åº¦ä¼˜åŒ–ï¼Œåœ¨å¤§æ¨¡å‹é¢„è®­ç»ƒé¢†åŸŸå æ®ç€ä¸¾è¶³è½»é‡çš„åœ°ä½ã€‚å…¶è®¾è®¡å“²å­¦å§‹ç»ˆå›´ç»•ç€å¦‚ä½•æ¦¨å¹²NVIDIA GPUçš„æ¯ä¸€åˆ†æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åˆ©ç”¨é«˜æ€§èƒ½NVLinkäº’è”å’ŒCUDAå†…æ ¸èåˆæŠ€æœ¯ã€‚</p>
<h4 data-id="heading-11">å…³é”®ç‰¹æ€§ä¸åº•å±‚æ¶æ„åˆ†æ</h4>
<p>æ ¸å¿ƒè´¡çŒ®åœ¨äºæå‡ºå¹¶å®Œå–„äº†å¤šç»´å¹¶è¡Œä½“ç³»ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹ Transformerç»“æ„çš„æ·±åº¦ä¼˜åŒ–ã€‚</p>
<ul>
<li><strong>å¤šç»´</strong> <strong>å¹¶è¡Œè®¡ç®—</strong> <strong>æ¶æ„</strong>ï¼šå°†è®¡ç®—ä»»åŠ¡åœ¨ä¸‰ä¸ªç»´åº¦è¿›è¡Œè§£è€¦ï¼šå±‚å†…è®¡ç®—ï¼ˆå¼ é‡å¹¶è¡Œï¼‰ã€å±‚é—´è®¡ç®—ï¼ˆæµæ°´çº¿å¹¶è¡Œï¼‰ä»¥åŠæ‰¹æ¬¡æ•°æ®ï¼ˆæ•°æ®å¹¶è¡Œï¼‰ã€‚å¼ é‡å¹¶è¡Œï¼ˆTensor Parallelismï¼‰æ˜¯ä¸€ç§å±‚å†…å¹¶è¡ŒæŠ€æœ¯ï¼Œå°†Transformerå±‚çš„çŸ©é˜µä¹˜æ³•æ“ä½œæ²¿åˆ—æˆ–è¡Œè¿›è¡Œæ‹†åˆ†ã€‚ä¾‹å¦‚ï¼Œåœ¨æ³¨æ„åŠ›æœºåˆ¶çš„QKVæŠ•å½±å±‚ï¼Œé€šè¿‡å°†è¾“å‡ºç»´åº¦ï¼ˆåˆ—ï¼‰åˆ‡åˆ†åˆ°ä¸åŒGPUï¼Œæ¯ä¸ªè¿›ç¨‹ä»…éœ€å­˜å‚¨å’Œè®¡ç®—éƒ¨åˆ†å‚æ•°ï¼Œæœ€åé€šè¿‡All-Reduceæ“ä½œèšåˆæ¢¯åº¦ã€‚è¿™ç§ç²¾ç»†åŒ–çš„åˆ‡åˆ†ä½¿å¾—å•å¡æ— æ³•å®¹çº³çš„å¤§å‹å±‚å¾—ä»¥åœ¨èŠ‚ç‚¹å†…é«˜æ•ˆè¿è¡Œã€‚</li>
<li><strong>æµæ°´çº¿</strong> <strong>å¹¶è¡Œ</strong> <strong>çš„1F1Bè°ƒåº¦</strong>ï¼šä¸ºäº†è§£å†³è·¨å±‚å¹¶è¡Œçš„è´Ÿè½½å‡è¡¡é—®é¢˜ï¼ŒMegatron-LMå¼•å…¥äº†1F1Bï¼ˆOne-Forward-One-Backwardï¼‰è°ƒåº¦ç®—æ³•ã€‚é€šè¿‡å°†å…¨å±€æ‰¹æ¬¡åˆ‡åˆ†ä¸ºå¤šä¸ªå¾®æ‰¹æ¬¡ï¼ˆMicro-batchesï¼‰ï¼Œ1F1Bå…è®¸ä¸åŒçš„æµæ°´çº¿é˜¶æ®µåœ¨åŒä¸€æ—¶é—´ç‚¹å¹¶è¡Œå¤„ç†ä¸åŒçš„å¾®æ‰¹æ¬¡ï¼Œæå¤§åœ°å‹ç¼©äº†æµæ°´çº¿æ°”æ³¡ï¼ˆPipeline Bubbleï¼‰å ç”¨çš„æ—¶é—´æ¯”ä¾‹ï¼Œä»è€Œæå‡äº†é›†ç¾¤çš„æ•´ä½“åˆ©ç”¨ç‡ã€‚</li>
<li><strong>åºåˆ—</strong> <strong>å¹¶è¡Œ</strong> <strong>ä¸ä¸Šä¸‹æ–‡å¹¶è¡Œ</strong>ï¼šé’ˆå¯¹é•¿æ–‡æœ¬è®­ç»ƒéœ€æ±‚ï¼Œå®ç°äº†åºåˆ—å¹¶è¡Œï¼ˆSequence Parallelismï¼‰ï¼Œå®ƒå°†éå¼ é‡å¹¶è¡Œéƒ¨åˆ†ï¼ˆå¦‚LayerNormå’ŒDropoutï¼‰æ²¿åºåˆ—ç»´åº¦è¿›ä¸€æ­¥æ‹†åˆ†ï¼Œæœ‰æ•ˆå‡å°‘äº†å†—ä½™çš„æ˜¾å­˜å ç”¨ã€‚è€Œåœ¨å¤„ç†è¶…é•¿ä¸Šä¸‹æ–‡ï¼ˆå¦‚ 32KåŠä»¥ä¸Štokensï¼‰æ—¶ï¼Œä¸Šä¸‹æ–‡å¹¶è¡Œï¼ˆContext Parallelismï¼‰åˆ™é€šè¿‡è·¨è®¾å¤‡åˆ†é…åºåˆ—ç‰‡æ®µæ¥åº”å¯¹æ¿€æ´»å€¼å†…å­˜æ¿€å¢çš„æŒ‘æˆ˜ã€‚</li>
<li><strong>Megatron Core (MCore)</strong> ï¼šä½œä¸ºè¯¥æ¡†æ¶çš„æœ€æ–°æ¼”è¿›ç‰ˆæœ¬ï¼ŒMCoreé‡‡ç”¨äº†æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–çš„è®¾è®¡ç†å¿µã€‚å®ƒé€šè¿‡Composable APIså…è®¸ç”¨æˆ·çµæ´»æ„å»ºè‡ªå®šä¹‰è®­ç»ƒæµç¨‹ï¼Œå¹¶é›†æˆäº†æ··åˆä¸“å®¶æ¨¡å‹çš„å…ˆè¿›æ”¯æŒï¼ŒåŒ…æ‹¬é’ˆå¯¹ DeepSeek-V3ç­‰æ¶æ„çš„æ·±åº¦ä¼˜åŒ–ï¼Œæ”¯æŒ DeepEPã€HybridEPç­‰é«˜æ•ˆçš„Tokenè°ƒåº¦ç®—æ³•ï¼Œæ—¨åœ¨å®ç°å¼‚æ„æ•°æ®ä¸­å¿ƒè§„æ¨¡ä¸‹çš„é«˜å¼¹æ€§èƒ½ã€‚</li>
</ul>
<h4 data-id="heading-12">é€‚åˆåœºæ™¯ä¸æ€§èƒ½è¾¹ç•Œ</h4>
<p>Megatron-LMä¸“ä¸ºæ‹¥æœ‰é«˜æ€§èƒ½è®¡ç®—é›†ç¾¤ï¼ˆå°¤å…¶æ˜¯å…·å¤‡ NVLink èŠ‚ç‚¹å†…äº’è”çš„é«˜ç«¯NVIDIA GPUç¯å¢ƒï¼‰çš„å›¢é˜Ÿè®¾è®¡ã€‚å®ƒæ˜¯è®­ç»ƒåŸºç¡€å¤§æ¨¡å‹ï¼ˆå¦‚Deepseekç­‰çº§æ¨¡å‹ï¼‰çš„å‚è€ƒå®ç°ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦è¿½æ±‚æè‡´çš„TFLOPSååé‡æ—¶ï¼Œå…¶å®šåˆ¶åŒ–çš„CUDAå†…æ ¸èåˆæŠ€æœ¯ï¼ˆèƒ½å‡å°‘æ˜¾å­˜è®¿é—®å¼€é”€çº¦ 40%ï¼‰å±•ç°å‡ºäº†å·¨å¤§çš„æŠ€æœ¯ä¼˜åŠ¿ã€‚</p>
<h4 data-id="heading-13">ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼šâ‘  æ€§èƒ½æè‡´ï¼šé€šè¿‡é«˜åº¦ä¼˜åŒ–çš„ç®—å­èåˆå’Œç¡¬ä»¶æ„ŸçŸ¥é€šä¿¡ï¼Œå®ç°ä¸šç•Œæœ€é«˜çš„æ˜¾å­˜å’Œç®—åŠ›æ•ˆç‡ ï¼›â‘¡ ç¨³å®šæ€§å¼ºï¼šä½œä¸ºNVIDIAå®˜æ–¹ç»´æŠ¤é¡¹ç›®ï¼Œå¯¹Hopper/Blackwellç­‰æ–°æ¶æ„çš„æ”¯æŒæœ€ä¸ºè¿…é€Ÿä¸”æ·±åº¦ï¼›â‘¢ å·¥ä¸šæ ‡å‡†ï¼šå…¶æå‡ºçš„3Då¹¶è¡Œæ–¹æ¡ˆå·²æˆä¸ºå¤§è§„æ¨¡è®­ç»ƒçš„äº‹å®æ ‡å‡†ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šâ‘  å¼€å‘éš¾åº¦é«˜ï¼šä»£ç ä¾µå…¥æ€§å¼ºï¼Œå¯¹éTransformeræ¶æ„çš„é€‚é…æå…¶å¤æ‚ï¼Œéœ€è¦æ·±åšçš„ç³»ç»Ÿç¼–ç¨‹åŠŸåº•ï¼›â‘¡ çµæ´»æ€§å—é™ï¼šç”±äºè¿‡åº¦ä¾èµ–NVLinkå’Œä¸“æœ‰ç®—å­ï¼Œåœ¨éåŒæ„ç½‘ç»œæˆ–æ˜¾å­˜æåº¦å—é™çš„å¼‚æ„ç¯å¢ƒä¸‹è¡¨ç°ä¸å¦‚DeepSpeedã€‚</p>
<h3 data-id="heading-14">2.2  DeepSpeed</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/324a2f8b379c40989b2c089f27950f70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769991101&amp;x-signature=cRaCMZaCUP9JPm%2Fm9Z7ZtcDsuko%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>gitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdeepspeedai%2FDeepSpeed" target="_blank" title="https://github.com/deepspeedai/DeepSpeed" ref="nofollow noopener noreferrer">github.com/deepspeedaiâ€¦</a> 41.3kâ­</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2FDeepSpeedExamples" target="_blank" title="https://github.com/microsoft/DeepSpeedExamples" ref="nofollow noopener noreferrer">github.com/microsoft/Dâ€¦</a> 6.8kâ­</li>
</ul>
</li>
<li>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeepspeed.readthedocs.io%2Fen%2Fstable%2Fzero3.html" target="_blank" title="https://deepspeed.readthedocs.io/en/stable/zero3.html" ref="nofollow noopener noreferrer">deepspeed.readthedocs.io/en/stable/zâ€¦</a></p>
</li>
<li>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.deepspeed.ai%2F" target="_blank" title="https://www.deepspeed.ai/" ref="nofollow noopener noreferrer">www.deepspeed.ai/</a></p>
</li>
<li>
<p>è®ºæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2308.01320" target="_blank" title="https://arxiv.org/pdf/2308.01320" ref="nofollow noopener noreferrer">arxiv.org/pdf/2308.01â€¦</a></p>
</li>
</ul>
<p>DeepSpeedæ˜¯å¾®è½¯åœ¨å¤§æ¨¡å‹è®­ç»ƒé¢†åŸŸæ¨å‡ºçš„å¦ä¸€åŠ›ä½œï¼Œå…¶è®¾è®¡é‡å¿ƒåœ¨äºè§£å†³å¤§æ¨¡å‹è®­ç»ƒä¸­çš„æ˜¾å­˜ç“¶é¢ˆé—®é¢˜ã€‚é€šè¿‡é›¶å†—ä½™ä¼˜åŒ–å™¨ï¼ˆZeROï¼‰ç³»åˆ—æŠ€æœ¯ï¼ŒDeepSpeedæå¤§åœ°é™ä½äº†è®­ç»ƒè¶…å¤§è§„æ¨¡æ¨¡å‹çš„å‡†å…¥é—¨æ§›ã€‚</p>
<h4 data-id="heading-15">å…³é”®æŠ€æœ¯æ·±åº¦è§£æ</h4>
<p>DeepSpeedçš„æ ¸å¿ƒæ¶æ„ç”±ZeROä¼˜åŒ–å™¨åŠå…¶è¡ç”Ÿçš„å¼‚æ„å­˜å‚¨æŠ€æœ¯æ„æˆã€‚</p>
<ul>
<li>
<p><strong>ZeRO</strong> <strong>ä¼˜åŒ–å™¨</strong> <strong>ï¼ˆZeRO-1/2/3ï¼‰</strong> ï¼šZeROæŠ€æœ¯çš„ç²¾é«“åœ¨äºæ¶ˆé™¤æ¨¡å‹çŠ¶æ€çš„å†—ä½™å­˜å‚¨ã€‚åœ¨ä¼ ç»Ÿæ•°æ®å¹¶è¡Œä¸­ï¼Œæ¯ä¸ªGPUéƒ½ä¿å­˜å®Œæ•´çš„æ¨¡å‹çŠ¶æ€ï¼Œè€ŒZeROåˆ™å°†è¿™äº›çŠ¶æ€è¿›è¡Œåˆ†ç‰‡ï¼ˆShardingï¼‰ã€‚ZeRO-1ä»…å¯¹ä¼˜åŒ–å™¨çŠ¶æ€è¿›è¡Œåˆ†ç‰‡ï¼›ZeRO-2è¿›ä¸€æ­¥å¯¹æ¢¯åº¦è¿›è¡Œåˆ†ç‰‡ï¼›ZeRO-3åˆ™å®ç°äº†å¯¹å‚æ•°ã€æ¢¯åº¦å’Œä¼˜åŒ–å™¨çŠ¶æ€çš„å…¨é‡åˆ†ç‰‡å­˜å‚¨ã€‚è¿™ç§ç­–ç•¥ä½¿å¾—æ˜¾å­˜æ¶ˆè€—éšè®¾å¤‡æ•°çš„å¢åŠ è€Œçº¿æ€§ä¸‹é™ã€‚</p>
</li>
<li>
<p><strong>ZeRO-Offloadä¸ZeRO-Infinity</strong>ï¼šé’ˆå¯¹æ˜¾å­˜ä¸¥é‡çŸ­ç¼ºçš„åœºæ™¯ï¼ŒDeepSpeedæå‡ºäº†å¼‚æ„å†…å­˜åˆ©ç”¨æ–¹æ¡ˆã€‚ZeRO-Offloadåˆ©ç”¨CPUå†…å­˜å­˜å‚¨å¹¶å¤„ç†ä¼˜åŒ–å™¨çŠ¶æ€æ›´æ–°ï¼Œè€ŒZeRO-Infinityåˆ™å°†è¿™ä¸€æ€è·¯æ¨å‘æè‡´ï¼Œé€šè¿‡é«˜æ•ˆçš„Infinity Offloadå¼•æ“åŒæ—¶åˆ©ç”¨GPUæ˜¾å­˜ã€CPUå†…å­˜å’ŒNVMe SSDï¼Œæ”¯æŒåœ¨å•ä¸ªGPUä¸Šè®­ç»ƒé«˜è¾¾130äº¿å‚æ•°çš„æ¨¡å‹ï¼Œæˆ–åœ¨é›†ç¾¤ä¸Šæ”¯æŒä¸‡äº¿å‚æ•°è§„æ¨¡ã€‚</p>
</li>
<li>
<p><strong>DeepSpeed-Ulyssesåºåˆ—</strong> <strong>å¹¶è¡Œ</strong>ï¼šç›¸æ¯”Megatronçš„åºåˆ—å¹¶è¡Œï¼ŒUlyssesé‡‡ç”¨äº†ä¸€ç§æ›´é€šç”¨çš„All-to-Allé€šä¿¡æœºåˆ¶ã€‚å®ƒåœ¨æ³¨æ„åŠ›è®¡ç®—å‰åé‡æ–°åˆ†é…æ•°æ®ï¼Œä½¿å¾—æ¯ä¸ªGPUèƒ½å¤Ÿå®Œæ•´åœ°çœ‹åˆ°å…¨å±€ä¸Šä¸‹æ–‡ï¼Œä½†ä»…è´Ÿè´£è®¡ç®—éƒ¨åˆ†æ³¨æ„åŠ›å¤´ï¼Œè¿™åœ¨é•¿åºåˆ—è®­ç»ƒä¸­å±•ç°å‡ºäº†æä½³çš„å¸¦å®½æ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>æ··åˆ3D</strong> <strong>å¹¶è¡Œ</strong> <strong>é›†æˆ</strong>ï¼šDeepSpeedé€šè¿‡ä¸Megatron-LMçš„æ·±åº¦èåˆï¼Œå°†ZeROæŠ€æœ¯ä¸å¼ é‡å¹¶è¡Œã€æµæ°´çº¿å¹¶è¡Œç›¸ç»“åˆï¼Œå½¢æˆäº†ä¸€å¥—å®Œæ•´çš„ä¸‡äº¿çº§æ¨¡å‹è®­ç»ƒæ–¹æ¡ˆã€‚å…¶æä¾›çš„TiledLinearæ¨¡å—è¿›ä¸€æ­¥é€šè¿‡å†…å­˜å¹³é“ºæŠ€æœ¯å‡å°‘äº†ç®—å­çš„å³°å€¼å†…å­˜éœ€æ±‚ã€‚</p>
</li>
</ul>
<h4 data-id="heading-16">é€‚åˆåœºæ™¯</h4>
<p>DeepSpeedæ˜¯èµ„æºå¼‚æ„æˆ–å—é™ç¯å¢ƒä¸‹çš„ä¸äºŒä¹‹é€‰ã€‚æ— è®ºæ˜¯éœ€è¦åœ¨ä¸­å°è§„æ¨¡é›†ç¾¤ä¸Šå¾®è°ƒç™¾äº¿å‚æ•°æ¨¡å‹ï¼Œè¿˜æ˜¯åœ¨è·¨èŠ‚ç‚¹çš„éé«˜é€Ÿäº’è”ç¯å¢ƒä¸‹è¿›è¡Œé¢„è®­ç»ƒï¼Œå…¶å¼ºå¤§çš„æ˜¾å­˜ç®¡ç†èƒ½åŠ›éƒ½èƒ½ç¡®ä¿æŒç»­è¿è¡Œã€‚æ­¤å¤–ï¼Œç”±äºå…¶ä¸ Hugging Faceç­‰å¼€æºç”Ÿæ€ç»“åˆç´§å¯†ï¼Œå®ƒæ˜¯ç ”ç©¶äººå‘˜å’Œä¼ä¸šè¿›è¡Œå¿«é€Ÿå®éªŒå’Œæ¨¡å‹ç§æœ‰åŒ–éƒ¨ç½²çš„é¦–é€‰æ¡†æ¶ã€‚</p>
<h4 data-id="heading-17">ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼šâ‘  æ˜¾å­˜æ•ˆç‡æé«˜ï¼šZeRO-3ä¸InfinityæŠ€æœ¯æå¤§åœ°æ‰“ç ´äº†å†…å­˜å¢™ï¼Œæ”¯æŒå•æœºè®­ç»ƒè¶…å¤§è§„æ¨¡æ¨¡å‹ï¼›â‘¡ æ˜“ç”¨æ€§ä¸å…¼å®¹æ€§ï¼šé€šè¿‡ç®€å•çš„JSONé…ç½®æ–‡ä»¶å³å¯å¯ç”¨å¤æ‚åŠŸèƒ½ï¼Œæ— éœ€å¤§è§„æ¨¡é‡æ„PyTorchä»£ç ï¼›â‘¢ ç”Ÿæ€å¼€æ”¾ï¼šæ”¯æŒåŒ…æ‹¬AMDã€Intel åœ¨å†…çš„å¤šç§ç¡¬ä»¶å¹³å°ï¼Œå¹¿æ³›é›†æˆäºç¬¬ä¸‰æ–¹åº“ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šâ‘  é€šä¿¡å¼€é”€é£é™©ï¼šåœ¨å¼€å¯æ·±åº¦Offloadæ¨¡å¼ä¸‹ï¼Œç”±äºå—é™äºPCIeå¸¦å®½ï¼Œè®¡ç®—æ•ˆç‡å¯èƒ½å¤§å¹…ä¸‹é™ï¼›â‘¡ å¤æ‚ç³»ç»Ÿé›†æˆï¼šåœ¨å°†ZeROä¸3Då¹¶è¡Œç»“åˆä½¿ç”¨æ—¶ï¼Œå‚æ•°é…ç½®ä¸è´Ÿè½½å‡è¡¡çš„è°ƒä¼˜æå…¶ç¹çã€‚</p>
<h3 data-id="heading-18">2.3 Colossal-AI</h3>
<ul>
<li>
<p>Github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhpcaitech%2FColossalAI" target="_blank" title="https://github.com/hpcaitech/ColossalAI" ref="nofollow noopener noreferrer">github.com/hpcaitech/Câ€¦</a> 41.3kâ­</p>
</li>
<li>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcolossalai.org%2F" target="_blank" title="https://colossalai.org/" ref="nofollow noopener noreferrer">colossalai.org/</a></p>
</li>
<li>
<p>è®ºæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2110.14883" target="_blank" title="https://arxiv.org/pdf/2110.14883" ref="nofollow noopener noreferrer">arxiv.org/pdf/2110.14â€¦</a></p>
</li>
</ul>
<p>Colossal-AIç”±æ½æ™¨ç§‘æŠ€å›¢é˜Ÿå¼€å‘ï¼Œè‡´åŠ›äºé€šè¿‡ç»Ÿä¸€çš„å¹¶è¡Œæ¥å£å’Œæ™ºèƒ½åŒ–çš„å†…å­˜ç®¡ç†ï¼Œå°†å¤æ‚çš„åˆ†å¸ƒå¼è®­ç»ƒå¤§ä¼—åŒ–ã€‚å…¶æœ€å¤§çš„ç‰¹è‰²åœ¨äºå¯¹å¼‚æ„å†…å­˜çš„ç²¾ç»†åŒ–æ§åˆ¶ä»¥åŠè‡ªåŠ¨å¹¶è¡ŒåŒ–æœç´¢æŠ€æœ¯ã€‚</p>
<h4 data-id="heading-19">å…³é”®æŠ€æœ¯ç‰¹æ€§åˆ†æ</h4>
<p>Colossal-AIå¼•å…¥äº†ä¸€ç³»åˆ—æ—¨åœ¨æå‡èµ„æºåˆ©ç”¨ç‡å’Œå¼€å‘æ•ˆç‡çš„åº•å±‚æœºåˆ¶ã€‚</p>
<ul>
<li>
<p><strong>GeminiåŠ¨æ€å¼‚æ„</strong> <strong>å†…å­˜</strong> <strong>ç®¡ç†å™¨</strong>ï¼šGeminiæ˜¯Colossal-AIçš„æ ¸å¿ƒç»„ä»¶ï¼Œå…¶è®¾è®¡çµæ„ŸæºäºPatrickStarã€‚å®ƒé‡‡ç”¨å—çŠ¶å†…å­˜ç®¡ç†ç­–ç•¥ï¼Œå°†å‚æ•°ã€æ¢¯åº¦åŠä¼˜åŒ–å™¨çŠ¶æ€ç»„ç»‡æˆè¿ç»­çš„å†…å­˜å—ã€‚Geminiçš„å…ˆè¿›ä¹‹å¤„åœ¨äºå…¶Warmupæœºåˆ¶ï¼šåœ¨è®­ç»ƒçš„ç¬¬ä¸€æ­¥ï¼Œç³»ç»Ÿä¼šå®æ—¶ç›‘æµ‹éæ¨¡å‹æ•°æ®ï¼ˆå¦‚æ¿€æ´»å€¼ï¼‰çš„å†…å­˜æ³¢åŠ¨ï¼Œæ®æ­¤åŠ¨æ€è°ƒæ•´æ¨¡å‹æ•°æ®åœ¨GPUä¸CPUé—´çš„å­˜æ”¾æ¯”ä¾‹ã€‚è¿™ç§è‡ªé€‚åº”çš„é€å‡ºç­–ç•¥èƒ½æœ‰æ•ˆå‡å°‘å†…å­˜ç¢ç‰‡ï¼Œå¹¶å……åˆ†åˆ©ç”¨ç©ºé—²çš„CPUæ˜¾å­˜ç©ºé—´ã€‚</p>
</li>
<li>
<p><strong>è‡ªåŠ¨å¹¶è¡ŒåŒ–æœç´¢</strong>ï¼šåŒºåˆ«äºå…¶ä»–æ¡†æ¶çš„æ˜¾è‘—æ ‡å¿—ã€‚é€šè¿‡ColoTraceré™æ€å›¾åˆ†ææŠ€æœ¯ï¼Œç³»ç»Ÿå¯ä»¥å°†å¹¶è¡Œç­–ç•¥çš„åˆ¶å®šè½¬åŒ–ä¸ºä¸€ä¸ªçº¦æŸä¼˜åŒ–é—®é¢˜ã€‚å®ƒä¸ä»…èƒ½è‡ªåŠ¨æœç´¢å¼ é‡å¹¶è¡Œçš„åˆ‡åˆ†æ–¹æ¡ˆï¼Œè¿˜èƒ½ç»“åˆæ¿€æ´»å€¼æ£€æŸ¥ç‚¹çš„æ’å…¥ä½ç½®ï¼Œæ‰¾åˆ°æ¯”äººç±»ä¸“å®¶æ‰‹åŠ¨é…ç½®æ›´ä¼˜çš„æ‰§è¡Œè®¡åˆ’ã€‚è¿™æå¤§é™ä½äº†å¯¹ç³»ç»Ÿæ¶æ„å¸ˆçš„ä¾èµ–ã€‚</p>
</li>
<li>
<p><strong>å¤šç»´</strong> <strong>å¼ é‡</strong> <strong>å¹¶è¡Œ</strong> <strong>æ¶æ„</strong>ï¼šé™¤äº†ä¼ ç»Ÿçš„1Då¼ é‡å¹¶è¡Œï¼ŒColossal-AIè¿˜å®ç°äº†2Dã€2.5Då’Œ3Då¼ é‡å¹¶è¡Œã€‚åˆ©ç”¨å¤æ‚çš„åˆ†å¸ƒå¼çŸ©é˜µä¹˜æ³•ç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿåœ¨æ›´å¤§è§„æ¨¡çš„é›†ç¾¤ä¸­è¿›ä¸€æ­¥å‡å°‘é€šä¿¡é‡ï¼Œå®ç°è¶…çº¿æ€§çš„å¹¶è¡ŒåŠ é€Ÿæ¯”ã€‚</p>
</li>
<li>
<p><strong>Boosterä¸Shardformerç”Ÿæ€</strong>ï¼šColossal-AIæä¾›äº†Boosteræ’ä»¶ç³»ç»Ÿï¼Œæ”¯æŒå¯¹å¼€æºç¤¾åŒºï¼ˆå¦‚Hugging Face, Timmï¼‰ä¸­çš„æ¨¡å‹è¿›è¡Œéä¾µå…¥å¼çš„åˆ†å¸ƒå¼åŒ…è£…ã€‚Shardformerå¯ä»¥åœ¨ä¸æ”¹å˜åŸå§‹æ¨¡å‹å®šä¹‰çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡JITç¼–è¯‘å’Œå†…æ ¸æ›¿æ¢ï¼Œè‡ªåŠ¨æ³¨å…¥å¹¶è¡Œç®—å­ã€FlashAttentionåŠFusedNormç­‰æ€§èƒ½å¢å¼ºé¡¹ã€‚</p>
</li>
</ul>
<h4 data-id="heading-20">é€‚åˆåœºæ™¯</h4>
<p>Colossal-AIéå¸¸é€‚åˆé‚£äº›éœ€è¦è®­ç»ƒå¤šæ ·åŒ–æ¨¡å‹ç»“æ„ã€ä¸”å¸Œæœ›å‡å°‘æ‰‹åŠ¨è°ƒä¼˜å·¥ä½œé‡çš„å›¢é˜Ÿã€‚åœ¨è§†è§‰Transformer (ViT) ä»¥åŠå¯¹æ˜¾å­˜åˆ©ç”¨ç‡è¦æ±‚æé«˜çš„é•¿åºåˆ—ä»»åŠ¡ä¸­ï¼Œå…¶åŠ¨æ€ç®¡ç†æœºåˆ¶è¡¨ç°å“è¶Šã€‚æ­¤å¤–ï¼Œå…¶ä½œä¸ºPyTorch Lightningçš„åˆä½œä¼™ä¼´ï¼Œä¹Ÿå¸å¼•äº†å¤§é‡è¿½æ±‚å¼€å‘æ•ˆç‡çš„ç§‘ç ”ç”¨æˆ·ã€‚</p>
<h4 data-id="heading-21">ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼šâ‘  æä½³çš„æ˜¾å­˜å®¹å¿åº¦ï¼šChunkæœºåˆ¶ç›¸æ¯”åŸç”ŸZeROèƒ½æ˜¾è‘—é™ä½å†…å­˜ç¢ç‰‡ï¼Œæå‡è®­ç»ƒç¨³å®šæ€§ï¼›â‘¡ è‡ªåŠ¨åŒ–ç¨‹åº¦æœ€é«˜ï¼šä¸€é”®å¼å¹¶è¡Œç­–ç•¥æœç´¢æå¤§åœ°ç®€åŒ–äº†ä»å•æœºåˆ°é›†ç¾¤çš„è¿ç§»è¿‡ç¨‹ï¼›â‘¢ å¤šç»´å¹¶è¡Œæ–¹æ¡ˆä¸°å¯Œï¼šé’ˆå¯¹ä¸åŒé›†ç¾¤æ‹“æ‰‘æä¾›äº†æ›´çµæ´»çš„ç®—æ³•é€‰æ‹©ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šâ‘  ç¨³å®šæ€§å°šéœ€æ‰“ç£¨ï¼šéƒ¨åˆ†å‰æ²¿ç‰¹æ€§ï¼ˆå¦‚æŸäº›è‡ªåŠ¨å¹¶è¡Œæ¨¡å¼ï¼‰åœ¨å¤æ‚å¼‚æ„ç¯å¢ƒä¸‹çš„å¥å£®æ€§ä»æœ‰æå‡ç©ºé—´ï¼›â‘¡ ç»´æŠ¤å¤æ‚æ€§ï¼šåº•å±‚é›†æˆçš„å„ç§ä¼˜åŒ–æ’ä»¶è¾ƒå¤šï¼Œå¯¹åˆå­¦è€…çš„æ’é”™èƒ½åŠ›æœ‰ä¸€å®šè¦æ±‚ã€‚</p>
<h3 data-id="heading-22">2.4 torchtitan</h3>
<ul>
<li>Github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpytorch%2Ftorchtitan" target="_blank" title="https://github.com/pytorch/torchtitan" ref="nofollow noopener noreferrer">github.com/pytorch/torâ€¦</a> 5kâ­</li>
<li>è®ºæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenreview.net%2Fpdf%3Fid%3DWuQtmIkiUL" target="_blank" title="https://openreview.net/pdf?id=WuQtmIkiUL" ref="nofollow noopener noreferrer">openreview.net/pdf?id=WuQtâ€¦</a></li>
</ul>
<p>torchtitanæ˜¯PyTorchå®˜æ–¹å›¢é˜Ÿè¿‘æœŸæ¨å‡ºçš„åŸç”Ÿåˆ†å¸ƒå¼é¢„è®­ç»ƒå‚è€ƒæ¡†æ¶ã€‚å®ƒçš„å‡ºç°æ ‡å¿—ç€PyTorchæ­£è‡´åŠ›äºåœ¨æ ¸å¿ƒåº“å±‚é¢ç»Ÿä¸€å„ç§åˆ†å¸ƒå¼å¹¶è¡ŒåŸè¯­ï¼Œä»è€Œæä¾›ä¸€ä¸ªè½»é‡çº§ã€æ¨¡å—åŒ–ä¸”é«˜åº¦å¯ç»„åˆçš„æ ‡æ†å®ç°ã€‚</p>
<h4 data-id="heading-23">æ¶æ„è®¾è®¡å“²å­¦ä¸å…³é”®åŸè¯­</h4>
<p>torchtitançš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶å®Œå…¨åŸºäºPyTorchåŸç”Ÿç»„ä»¶ï¼Œå¦‚DTensorã€DeviceMeshå’ŒFSDP2ï¼Œè€Œéä¾èµ–ç¹é‡çš„å¤–éƒ¨å°è£…ã€‚</p>
<ul>
<li>
<p><strong>DTensor ä¸ DeviceMesh æŠ½è±¡</strong>ï¼šè¿™æ˜¯torchtitançš„åŸºçŸ³ã€‚DeviceMeshå°†é›†ç¾¤ä¸­çš„è®¡ç®—èŠ‚ç‚¹æŠ½è±¡ä¸ºä¸€ä¸ªå¤šç»´é€»è¾‘ç½‘æ ¼ï¼Œç®¡ç†åº•å±‚çš„è¿›ç¨‹ç»„é€šä¿¡ã€‚DTensorï¼ˆDistributed Tensorï¼‰åˆ™å…è®¸å¼€å‘è€…ä»¥å•è®¾å¤‡è¯­ä¹‰ç¼–å†™ä»£ç ï¼Œé€šè¿‡åœ¨DTensorä¸Šå®šä¹‰åˆ†ç‰‡ã€å¤åˆ¶æˆ–éƒ¨åˆ†èšåˆç­‰çŠ¶æ€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ¨å¯¼å¹¶æ‰§è¡Œå¿…è¦çš„é‡åˆ†å¸ƒé€šä¿¡æ“ä½œã€‚è¿™ç§è®¾è®¡æå¤§åœ°ç®€åŒ–äº†å¤šç»´å¹¶è¡Œçš„é€»è¾‘å¤æ‚æ€§ã€‚</p>
</li>
<li>
<p><strong>FSDP2 (Fully Sharded Data Parallel 2)</strong> ï¼štorchtitanç‡å…ˆé›†æˆäº†FSDP2ã€‚ç›¸æ¯”äºç¬¬ä¸€ä»£FSDP çš„FlatParameterè®¾è®¡ï¼ŒFSDP2é‡‡ç”¨äº†åŸºäºå‚æ•°ç»´åº¦çš„DTensoråˆ†ç‰‡ï¼Œå…·æœ‰æ›´å¼ºçš„ç»„åˆæ€§ï¼Œå¹¶èƒ½ä¸torch.compileå®ç°æ·±åº¦èåˆã€‚å®éªŒæ•°æ®æ˜¾ç¤ºï¼ŒFSDP2åœ¨ååé‡ä¸Šæå‡äº†çº¦1.5%ï¼Œä¸”å†…å­˜å ç”¨é™ä½äº†7%ã€‚</p>
</li>
<li>
<p><strong>ç¡¬ä»¶è½¯ä»¶ååŒè®¾è®¡ä¸å¯ç»„åˆ4D</strong> <strong>å¹¶è¡Œ</strong>ï¼šæ¡†æ¶åŸç”Ÿæ”¯æŒæ•°æ®å¹¶è¡Œã€å¼ é‡å¹¶è¡Œã€æµæ°´çº¿å¹¶è¡ŒåŠä¸Šä¸‹æ–‡å¹¶è¡Œçš„å åŠ ï¼ˆå³4Då¹¶è¡Œï¼‰ã€‚torchtitanå¼•å…¥äº†Float8æ··åˆç²¾åº¦è®­ç»ƒã€SymmetricMemoryå…±äº«å†…å­˜é€šä¿¡ä¼˜åŒ–ä»¥åŠå¼‚æ­¥æ£€æŸ¥ç‚¹ä¿å­˜ã€‚å…¶è®¾è®¡çš„ç²¾å¦™ä¹‹å¤„åœ¨äºæ¨¡å—çš„è§£è€¦ï¼Œæ¨¡å‹å®šä¹‰ä¿æŒç®—æ³•ä¸­ç«‹ï¼Œè€Œå¹¶è¡Œç­–ç•¥ä½œä¸ºç‹¬ç«‹çš„å±‚è¿›è¡ŒåŒ…è£…ã€‚</p>
</li>
<li>
<p><strong>ç¼–è¯‘å™¨é©±åŠ¨çš„å†…æ ¸èåˆ</strong>ï¼šæ·±åº¦é›†æˆtorch.compileï¼Œæ”¯æŒåŒºåŸŸçº§ç¼–è¯‘ä¼˜åŒ–ã€‚é€šè¿‡å°†Transformer Blockä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œç¼–è¯‘ï¼Œæ¡†æ¶èƒ½è‡ªåŠ¨å®ç°ç®—å­èåˆä¸æ˜¾å­˜å¤ç”¨ï¼Œå‡å°‘äº†å¯¹æ˜‚è´µçš„æ‰‹å†™CUDAå†…æ ¸çš„ä¾èµ–ï¼ŒåŒæ—¶ä¹Ÿæå‡äº†è·¨ç¡¬ä»¶å¹³å°çš„è¿ç§»èƒ½åŠ›ã€‚</p>
</li>
</ul>
<h4 data-id="heading-24">é€‚åˆåœºæ™¯</h4>
<p>torchtitané€‚ç”¨äºå¸Œæœ›ç´§éšPyTorchæŠ€æœ¯æ ˆã€è¿›è¡Œæœ€å‰æ²¿æ¶æ„å®éªŒæˆ–è¿½æ±‚ä»£ç é•¿æœŸå¯ç»´æŠ¤æ€§çš„å›¢é˜Ÿã€‚å®ƒæ˜¯è®­ç»ƒLlama 3.1ç­‰å°–ç«¯å¼€æºæ¨¡å‹çš„å®˜æ–¹æ¨èå‚è€ƒç³»ç»Ÿã€‚ç”±äºå…¶ä»£ç é‡æç®€ä¸”éµå¾ªæ ‡å‡†çš„PyTorchç¼–ç¨‹æ¨¡å¼ï¼Œå®ƒä¹Ÿéå¸¸é€‚åˆç”¨äºæ•™å­¦å’Œåˆ†å¸ƒå¼ç³»ç»ŸåŸç†çš„ç ”ç©¶ã€‚</p>
<h4 data-id="heading-25">ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼šâ‘  æè‡´çš„åŸç”Ÿæ€§ï¼šä¸PyTorchæ ¸å¿ƒæ·±åº¦ç»‘å®šï¼Œæ— ç¬¬ä¸‰æ–¹æ¡†æ¶å¸¦æ¥çš„å…¼å®¹æ€§åŒ…è¢±ï¼›â‘¡ æ¨¡å—åŒ–ä¸å¯ç»„åˆæ€§ï¼š4Då¹¶è¡Œçš„å®ç°é€»è¾‘æ¸…æ™°ï¼Œä¾¿äºç ”ç©¶äººå‘˜è‡ªå®šä¹‰å¹¶è¡Œç­–ç•¥ï¼›â‘¢ å…ˆè¿›çš„ä¼˜åŒ–æŠ€æœ¯ï¼šç‡å…ˆé›†æˆFloat8ã€torch.compileç­‰å®˜æ–¹æœ€æ–°æˆæœï¼Œå…·å¤‡æé«˜çš„æ‰©å±•æ½œåŠ›ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šâ‘  æˆç†Ÿåº¦ç¨æ¬ ï¼šç›¸æ¯”Megatronæˆ–DeepSpeedï¼Œå…¶åœ¨ä¸‡äº¿å‚æ•°çº§çš„å¤§è§„æ¨¡å·¥ä¸šåŒ–ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç›¸å…³è¾…åŠ©å·¥å…·ï¼ˆå¦‚ç›‘æ§ã€æ•…éšœæ¢å¤ï¼‰ä»å¤„äºå¿«é€Ÿå®Œå–„é˜¶æ®µï¼›â‘¡ åŠŸèƒ½è¦†ç›–é¢ï¼šç›®å‰çš„é‡å¿ƒä¸»è¦é›†ä¸­åœ¨åŸºç¡€LLMè®­ç»ƒï¼Œå¯¹MoEã€å¤šæ¨¡æ€ç­‰å¤æ‚åœºæ™¯çš„å¼€ç®±å³ç”¨æ”¯æŒå°šæœªè¾¾åˆ°DeeSpeedçš„ä¸°å¯Œç¨‹åº¦ã€‚</p>
<h2 data-id="heading-26">3 åˆæˆæ•°æ®ä¸é—®ç­”å¯¹ç”Ÿæˆ</h2>
<p>AIé¢†åŸŸä»åˆ¤åˆ«å¼æ¨¡å‹å‘ç”Ÿæˆå¼å¤§è¯­è¨€æ¨¡å‹æ¼”è¿›ä¸­ï¼Œé«˜è´¨é‡æŒ‡ä»¤æ•°æ®æˆä¸ºå†³å®šæ¨¡å‹æ€§èƒ½ã€é¢†åŸŸä¸“ä¸šæ€§ä¸å¯¹é½æ•ˆæœçš„å…³é”®ã€‚ä¼ ç»Ÿç›‘ç£å¾®è°ƒé«˜åº¦ä¾èµ–äººç±»æ ‡æ³¨ï¼Œä¸ä»…è§„æ¨¡åŒ–ç”Ÿäº§æˆæœ¬é«˜ï¼Œä¸”åœ¨æ·±å±‚é€»è¾‘æ¨ç†ã€é•¿é“¾æ•°å­¦è¯æ˜å’Œå‚ç›´è¡Œä¸šçŸ¥è¯†ç›¸å…³æ ‡æ³¨ä¸­ï¼Œæ˜“å› æ ‡æ³¨è€…èƒ½åŠ›å±€é™å¯¼è‡´è´¨é‡æ³¢åŠ¨ã€‚ä¸ºçªç ´è¯¥ç“¶é¢ˆï¼Œå­¦ç•Œä¸å·¥ä¸šç•Œç ”å‘å‡ºå¤šç§è‡ªåŠ¨åŒ–æ•°æ®åˆæˆæ¡†æ¶ï¼Œä¾æ‰˜æ•™å¸ˆæ¨¡å‹çš„ç”Ÿæˆèƒ½åŠ›ï¼Œå°†å°‘é‡ç§å­æŒ‡ä»¤æˆ–åŸå§‹æ–‡æ¡£è½¬åŒ–ä¸ºæµ·é‡ç»“æ„åŒ–é—®ç­”å¯¹ã€‚</p>
<h3 data-id="heading-27">3.1 Self-Instruct</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c827264f75ca47569a4cc0428bc2dd97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769991101&amp;x-signature=V4cKkTL2xLqsPiSM2xhsUq4srFA%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>Github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyizhongw%2Fself-instruct" target="_blank" title="https://github.com/yizhongw/self-instruct" ref="nofollow noopener noreferrer">github.com/yizhongw/seâ€¦</a> 4.6kâ­</p>
</li>
<li>
<p>è®ºæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2212.10560" target="_blank" title="https://arxiv.org/pdf/2212.10560" ref="nofollow noopener noreferrer">arxiv.org/pdf/2212.10â€¦</a></p>
</li>
</ul>
<p>Self-Instructæ¡†æ¶æ˜¯ç”±åç››é¡¿å¤§å­¦ç­‰æœºæ„åœ¨2022å¹´åº•æå‡ºçš„ï¼Œå…¶æ ¸å¿ƒè´¡çŒ®åœ¨äºæå‡ºäº†ä¸€ç§å‡ ä¹ä¸éœ€è¦äººå·¥å¹²é¢„çš„æŒ‡ä»¤æ•°æ®è‡ªå¢é•¿è·¯å¾„ã€‚åœ¨LLMå‘å±•æ—©æœŸï¼Œè¯¥æ¡†æ¶çš„å‡ºç°æå¤§åœ°æ°‘ä¸»åŒ–äº†æ¨¡å‹å¾®è°ƒçš„è¿‡ç¨‹ï¼Œä½¿å¾—ç ”ç©¶è€…èƒ½å¤Ÿä»¥æä½çš„æˆæœ¬å°†é¢„è®­ç»ƒæ¨¡å‹è½¬åŒ–ä¸ºæŒ‡ä»¤éµå¾ªæ¨¡å‹ã€‚</p>
<h4 data-id="heading-28">è¿­ä»£è‡ªå¼•å¯¼çš„ç”Ÿæˆæœºåˆ¶</h4>
<p>å…¶åº•å±‚é€»è¾‘æ˜¯ä¸€ç§è¿­ä»£çš„è‡ªå¼•å¯¼ç®—æ³•ã€‚è¯¥è¿‡ç¨‹å§‹äºä¸€ä¸ªåŒ…å«175ä¸ªç”±äººç±»ç¼–å†™çš„ç§å­ä»»åŠ¡çš„å¾®å‹é›†åˆã€‚æ¯ä¸ªä»»åŠ¡ç”±ä¸€æ¡æŒ‡ä»¤å’Œç›¸åº”çš„&lt;è¾“å…¥, è¾“å‡º&gt;ç¤ºä¾‹ç»„æˆã€‚æ¡†æ¶é€šè¿‡åˆ©ç”¨LLMçš„ä¸Šä¸‹æ–‡å­¦ä¹ èƒ½åŠ›ï¼Œä»ä»»åŠ¡æ± ä¸­éšæœºæŠ½å–å°‘é‡ç¤ºä¾‹ä½œä¸ºæç¤ºè¯ï¼Œå¼•å¯¼æ¨¡å‹ç”Ÿæˆæ–°çš„æŒ‡ä»¤ã€è¾“å…¥ä»¥åŠå¯¹åº”çš„è¾“å‡ºã€‚</p>
<p>åœ¨å…·ä½“çš„ä»»åŠ¡ç”Ÿæˆé˜¶æ®µï¼ŒSelf-Instructå±•ç°äº†ä¸¥å¯†çš„é€»è¾‘åˆ†å±‚ã€‚ä¸ºäº†ç¡®ä¿ç”Ÿæˆçš„å®ä¾‹å…·æœ‰é«˜è´¨é‡çš„æ ¼å¼ï¼Œæ¡†æ¶é¦–å…ˆè¦æ±‚æ¨¡å‹ç”ŸæˆæŒ‡ä»¤ï¼Œéšåå¯¹å…¶è¿›è¡Œä»»åŠ¡ç±»å‹è¯†åˆ«ã€‚è¿™ç§è¯†åˆ«æœºåˆ¶å°†ä»»åŠ¡åˆ†ä¸ºâ€œåˆ†ç±»ä»»åŠ¡â€ä¸â€œéåˆ†ç±»ä»»åŠ¡â€ä¸¤ç±»ï¼Œå¹¶é’ˆå¯¹æ€§åœ°åº”ç”¨ä¸åŒçš„å®ä¾‹ç”Ÿæˆç­–ç•¥ï¼š</p>




















<table><thead><tr><th><strong>ç”Ÿæˆç­–ç•¥</strong></th><th><strong>åº”ç”¨åœºæ™¯</strong></th><th><strong>æ‰§è¡Œé€»è¾‘</strong></th></tr></thead><tbody><tr><td><strong>è¾“å…¥ä¼˜å…ˆ</strong></td><td>éåˆ†ç±»ä»»åŠ¡</td><td>å…ˆå¼•å¯¼æ¨¡å‹æ ¹æ®æŒ‡ä»¤ç”Ÿæˆè¾“å…¥èƒŒæ™¯ï¼Œå†æ ¹æ®æŒ‡ä»¤å’Œè¾“å…¥ç”Ÿæˆè¾“å‡ºå›å¤ã€‚</td></tr><tr><td><strong>è¾“å‡ºä¼˜å…ˆ</strong></td><td>åˆ†ç±»ä»»åŠ¡</td><td>å…ˆè®©æ¨¡å‹åˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„ç±»åˆ«æ ‡ç­¾ï¼Œå†é’ˆå¯¹æ¯ä¸ªæ ‡ç­¾åå‘ç”Ÿæˆç¬¦åˆé€»è¾‘çš„è¾“å…¥å†…å®¹ï¼Œä»¥é¿å…æ¨¡å‹å€¾å‘äºç”Ÿæˆå•ä¸€æ ‡ç­¾çš„åè§ã€‚</td></tr></tbody></table>
<p>è¿™ç§å·®å¼‚åŒ–çš„ç”Ÿæˆè·¯å¾„ç¡®ä¿äº†åœ¨å¤„ç†è¯¸å¦‚æƒ…æ„Ÿåˆ†æç­‰ç®€å•åˆ†ç±»ä»»åŠ¡æ—¶ï¼Œæ•°æ®é›†çš„åˆ†å¸ƒä¸ä¼šå› æ¨¡å‹çš„é€»è¾‘æƒ¯æ€§è€Œå‘æŸä¸€ç±»åˆ«å€¾æ–œã€‚</p>
<h4 data-id="heading-29">å¯å‘å¼è¿‡æ»¤ä¸å¤šæ ·æ€§ä¿éšœ</h4>
<p>ä¸ºäº†è§£å†³æ¨¡å‹è‡ªç”Ÿæˆè¿‡ç¨‹ä¸­çš„<strong>å¹»è§‰</strong>ä¸<strong>é‡å¤</strong>é—®é¢˜ï¼Œæ¡†æ¶é‡‡ç”¨ä¸¤å±‚ç­›é€‰æœºåˆ¶ï¼š</p>
<ul>
<li>
<p><strong>ç›¸ä¼¼åº¦å»é‡ï¼š</strong> åˆ©ç”¨ROUGE-LæŒ‡æ ‡ï¼Œå‰”é™¤ä¸ç°æœ‰ä»»åŠ¡æ± ç›¸ä¼¼åº¦è¶…è¿‡0.7çš„å†—ä½™æŒ‡ä»¤ã€‚</p>
</li>
<li>
<p><strong>é’ˆå¯¹æ€§æ¸…æ´—ï¼š</strong></p>
<ul>
<li>
<p><strong>é•¿åº¦è¿‡æ»¤ï¼š</strong> ç¡®ä¿ä»»åŠ¡å®Œæ•´ä¸”é‡ç‚¹çªå‡ºã€‚</p>
</li>
<li>
<p><strong>ä¾èµ–æ’é™¤ï¼š</strong> å±è”½åŒ…å«å›¾åƒã€æ–‡ä»¶ç­‰æ¨¡å‹æ— æ³•å¤„ç†çš„å¤–éƒ¨å…³é”®è¯ã€‚</p>
</li>
<li>
<p><strong>æ ¼å¼è§„èŒƒï¼š</strong> ç§»é™¤æ— æ•ˆæ ‡ç‚¹å¼€å¤´æˆ–éè‹±æ–‡çš„ç”Ÿæˆå†…å®¹ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-30">å®éªŒæˆæœä¸æ€§èƒ½æå‡</h4>
<p>Self-InstructæˆåŠŸä»GPT-3ä¸­æå–äº†5.2ä¸‡æ¡æŒ‡ä»¤åŠ8.2ä¸‡ä¸ªå®ä¾‹ï¼š</p>
<ul>
<li>
<p><strong>æ€§èƒ½é£è·ƒï¼š</strong> åœ¨SuperNIåŸºå‡†æµ‹è¯•ä¸­ï¼ŒGPT-3çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›æå‡äº†33.1%ã€‚</p>
</li>
<li>
<p><strong>å¯¹æ ‡ç»“æœï¼š</strong> ä»…ä¾é åˆæˆæ•°æ®å¾®è°ƒï¼Œå…¶å®é™…è¡¨ç°å·²æ¥è¿‘InstructGPT-001çš„æ°´å¹³ã€‚</p>
</li>
</ul>
<h3 data-id="heading-31">3.2 <strong>WizardLM</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/effced3d01354b64a817042828717b18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769991101&amp;x-signature=PosbyZYqEWLql%2F50N7IqB5u2AuE%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>Github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnlpxucan%2FWizardLM" target="_blank" title="https://github.com/nlpxucan/WizardLM" ref="nofollow noopener noreferrer">github.com/nlpxucan/Wiâ€¦</a> 9.5kâ­</p>
</li>
<li>
<p>è®ºæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fproceedings.iclr.cc%2Fpaper_files%2Fpaper%2F2024%2Ffile%2F82eec786fdfbbfa53450c5feb7d1ac92-Paper-Conference.pdf" target="_blank" title="https://proceedings.iclr.cc/paper_files/paper/2024/file/82eec786fdfbbfa53450c5feb7d1ac92-Paper-Conference.pdf" ref="nofollow noopener noreferrer">proceedings.iclr.cc/paper_filesâ€¦</a></p>
</li>
</ul>
<p>å¦‚æœè¯´Self-Instructè§£å†³äº†æ•°æ®ä»æ— åˆ°æœ‰çš„é—®é¢˜ï¼ŒWizardLåˆ™ä¸“æ³¨äºæ•°æ®ç”±ç®€å…¥ç¹çš„è´¨å˜ã€‚</p>
<h4 data-id="heading-32">Evol-Instructçš„è¿›åŒ–é€»è¾‘ä¸æ“ä½œç®—å­</h4>
<p>Evol-Instructæ˜¯WizardLMçš„æ ¸å¿ƒç®—æ³•ï¼Œå®ƒä¸å†æ˜¯ä»ç§å­ä»»åŠ¡ä¸­æ°´å¹³æ‰©å¼ ï¼Œè€Œæ˜¯é€šè¿‡å‚ç›´è¿›åŒ–ä¸æ–­æ”¹å†™æŒ‡ä»¤ã€‚è¯¥æœºåˆ¶é€šè¿‡æç¤ºè¯å¼•å¯¼LLMæ‰§è¡Œå…­ç§å…·ä½“çš„è¿›åŒ–æ“ä½œï¼š</p>
<ul>
<li>
<p><strong>æ·±åº¦è¿›åŒ–</strong>ï¼š</p>
<ul>
<li><strong>æ·»åŠ çº¦æŸ</strong>ï¼šå‘åŸæŒ‡ä»¤å¼•å…¥æ›´å¤šé™åˆ¶æ€§æ¡ä»¶ã€‚ä¾‹å¦‚å°†"å†™ä¸€ä¸ªæ•…äº‹"è¿›åŒ–ä¸º"å†™ä¸€ä¸ªå…³äºé‡å­åŠ›å­¦çš„æ‚¬ç–‘æ•…äº‹ï¼Œä¸”ä¸èƒ½ä½¿ç”¨â€˜ç§‘å­¦â€™è¿™ä¸ªè¯"ã€‚</li>
<li><strong>æ·±åŒ–</strong>ï¼šè¦æ±‚æ¨¡å‹åœ¨æ›´é«˜ã€æ›´æŠ½è±¡çš„è®¤çŸ¥å±‚é¢ä¸Šæ¢è®¨åŸæœ‰çš„ä¸»é¢˜ã€‚</li>
<li><strong>å…·ä½“åŒ–</strong>ï¼šå°†æ³›åŒ–çš„æ¦‚å¿µæŒ‡ä»¤è½¬åŒ–ä¸ºç»†èŠ‚ä¸°å¯Œçš„ç‰¹å®šåœºæ™¯ï¼Œå¢åŠ å¤„ç†å®é™…é—®é¢˜çš„å¤æ‚æ€§ã€‚</li>
<li><strong>å¢åŠ æ¨ç†æ­¥éª¤</strong>ï¼šå¼ºåˆ¶è¦æ±‚æ¨¡å‹å±•ç¤ºå¤šæ­¥é€»è¾‘æ¨å¯¼è¿‡ç¨‹ï¼Œè€Œéç›´æ¥ç»™å‡ºç­”æ¡ˆã€‚</li>
<li><strong>å¤æ‚åŒ–è¾“å…¥</strong>ï¼šé€šè¿‡å¼•å…¥å¹²æ‰°ä¿¡æ¯ã€é”™è¯¯é€»è¾‘æˆ–æå…¶å¤æ‚çš„ä¸Šä¸‹æ–‡èƒŒæ™¯æ¥æµ‹è¯•æ¨¡å‹çš„ç¨³å¥æ€§ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¹¿åº¦è¿›åŒ–</strong>ï¼š</p>
<ul>
<li><strong>å˜å¼‚</strong>ï¼šåŸºäºåŸæŒ‡ä»¤ç”Ÿæˆä¸€æ¡å…¨æ–°çš„ã€åœ¨ä¸»é¢˜æˆ–æŠ€èƒ½ä¸Šæ›´å…·æŒ‘æˆ˜æ€§çš„æŒ‡ä»¤ï¼Œæ—¨åœ¨æ‰©å±•æ•°æ®é›†çš„é¢†åŸŸè¦†ç›–èŒƒå›´å’ŒæŠ€èƒ½å¤šæ ·æ€§</li>
</ul>
</li>
</ul>
<p>é€šè¿‡å®šåˆ¶Promptæ¨¡æ¿å®ç°æ“ä½œï¼Œæ¨¡å‹æŒ‰è¿›åŒ–æŒ‡ä»¤ç”Ÿæˆå›å¤ï¼Œç»å¤šè½®è¿­ä»£å°†ç®€å•ç§å­æŒ‡ä»¤è½¬åŒ–ä¸ºå¤æ‚æ¨ç†ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-33">æŒ‡ä»¤æ¶ˆé™¤å™¨ï¼šä¸¥è‹›çš„è´¨é‡å®ˆé—¨äºº</h4>
<p>åœ¨è¿›åŒ–è¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹å¯èƒ½ä¼šç”Ÿæˆé€»è¾‘ä¸é€šã€æ— æ³•å®Œæˆæˆ–æ¯«æ— å¢é‡çš„æŒ‡ä»¤ã€‚WizardLMå¼•å…¥äº†"æŒ‡ä»¤æ¶ˆé™¤å™¨"ä½œä¸ºè¿‡æ»¤æœºåˆ¶ï¼Œå°†ä»¥ä¸‹å››ç±»å¤±è´¥ä»»åŠ¡äºˆä»¥å‰”é™¤ï¼š</p>
<ul>
<li><strong>æ— ä¿¡æ¯å¢é‡</strong>: è¿›åŒ–çš„æŒ‡ä»¤ä¸åŸæŒ‡ä»¤å†…å®¹åŸºæœ¬ä¸€è‡´ï¼Œæ²¡æœ‰å®è´¨æ€§çš„å¤æ‚åº¦æå‡ï¼Œé€šå¸¸åˆ©ç”¨GPT-4è¿›è¡Œè‡ªåŠ¨åˆ¤å®šã€‚</li>
<li><strong>æ‰§è¡Œå¤±è´¥</strong>: æ¨¡å‹ç”Ÿæˆçš„å›å¤åŒ…å«"å¯¹ä¸èµ·/sorry"ç­‰é“æ­‰è¯æ±‡ï¼Œä¸”å›å¤é•¿åº¦å°‘äº80å­—ï¼Œè¡¨æ˜ä»»åŠ¡å·²è¶…å‡ºæ¨¡å‹å¤„ç†èƒ½åŠ›ã€‚</li>
<li><strong>è¾“å‡ºé€€åŒ–</strong>: å›å¤ä»…åŒ…å«æ ‡ç‚¹ç¬¦å·ã€åœç”¨è¯æˆ–ç”Ÿæˆè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ— æ•ˆå­—ç¬¦ã€‚</li>
<li><strong>æ¨¡æ¿æ³„éœ²</strong>: è¿›åŒ–çš„æŒ‡ä»¤ä¸­ç›´æ¥åŒ…å«äº†è¿›åŒ– Prompt ä¸­çš„å¼•å¯¼æ€§è¯æ±‡ï¼Œå¦‚"#Rewritten Prompt#"ç­‰ã€‚</li>
</ul>
<p>è¿™ç§åŸºäº"è¿›åŒ–-æ·˜æ±°"çš„ç‰©ç«å¤©æ‹©æœºåˆ¶ï¼Œç¡®ä¿äº†æœ€ç»ˆäº§ç”Ÿçš„æ•°æ®é›†ï¼ˆå¦‚WizardLM-70kï¼‰åœ¨è´¨é‡åˆ†å¸ƒä¸Šå‘é«˜éš¾åº¦åŒºé—´å€¾æ–œã€‚</p>
<h4 data-id="heading-34">ä¸“ç”¨é¢†åŸŸçš„è¡ç”Ÿåº”ç”¨</h4>
<p>Evol-Instructæ™®é€‚æ€§å¼ºï¼Œå¯åŠ©åŠ›å¤šå‚ç›´é¢†åŸŸæ‰“é€ é¡¶å°–æ¨¡å‹ï¼šWizardCoderé’ˆå¯¹ç¼–ç¨‹ä»»åŠ¡è¿›åŒ–ï¼Œåœ¨ä»£ç ç”Ÿæˆé¢†åŸŸè¶…è¶Šæ›´å¤§å‚æ•°é‡æ¨¡å‹ï¼›WizardMathç»“åˆå¼ºåŒ–å­¦ä¹ å½¢æˆRLEIFæœºåˆ¶ï¼Œé€šè¿‡å¤æ‚æ•°å­¦æ¨ç†é“¾ç”Ÿæˆä¸æ­¥éª¤çº§è¯„åˆ†ï¼Œå¤§å¹…æå‡æ¨¡å‹é€»è¾‘ä¸¥å¯†æ€§ã€‚</p>
<h3 data-id="heading-35">3.3 Easy Dataset</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6c87e8f05f542f483648a19a5b6b23b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769991101&amp;x-signature=WI7lTmu6Uah0Q06ejJ28gqs0Hwg%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>Github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Feasy-dataset" target="_blank" title="https://github.com/ConardLi/easy-dataset" ref="nofollow noopener noreferrer">github.com/ConardLi/eaâ€¦</a> 12.9kâ­</p>
</li>
<li>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.easy-dataset.com%2F" target="_blank" title="https://docs.easy-dataset.com/" ref="nofollow noopener noreferrer">docs.easy-dataset.com/</a></p>
</li>
<li>
<p>è®ºæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2507.04009v1" target="_blank" title="https://arxiv.org/pdf/2507.04009v1" ref="nofollow noopener noreferrer">arxiv.org/pdf/2507.04â€¦</a></p>
</li>
</ul>
<p>ä¸æ¢ç´¢ç®—æ³•è¾¹ç•Œçš„Self-Instructã€WizardLMä¸åŒï¼ŒEasy Datasetæ¡†æ¶èšç„¦å‚ç›´é¢†åŸŸæ¨¡å‹è®­ç»ƒçš„å·¥ç¨‹ç—›ç‚¹ã€‚é‡‘èã€åŒ»ç–—ã€æ³•å¾‹ç­‰è¡Œä¸šçš„é«˜è´¨é‡æŒ‡ä»¤æ•°æ®å¤šéšè—åœ¨å„ç±»éç»“æ„åŒ–æ–‡æ¡£ä¸­ï¼Œéš¾ä»¥é«˜æ•ˆåˆ©ç”¨ï¼Œè€Œè¿™æ¬¾é›†æˆåŒ–GUI æ•°æ®å·¥ç¨‹å¥—ä»¶ï¼Œå®ç°äº†ä»æ–‡æ¡£è§£æåˆ°æ¨¡å‹è¯„ä¼°çš„å…¨é“¾è·¯é—­ç¯ã€‚</p>
<h4 data-id="heading-36">è‡ªé€‚åº”æ–‡æ¡£å¤„ç†ä¸è¯­ä¹‰åˆ‡åˆ†</h4>
<p>Easy Datasetçš„é¦–è¦æ ¸å¿ƒåŠŸèƒ½æ˜¯å…¶"è‡ªé€‚åº”æ–‡æ¡£å¤„ç†"æ¨¡å—ã€‚é’ˆå¯¹ä¼ ç»Ÿæ–‡æœ¬åˆ‡åˆ†å·¥å…·å®¹æ˜“å¯¼è‡´è¯­ä¹‰æ–­è£‚çš„é—®é¢˜ï¼Œè¯¥æ¡†æ¶é›†æˆäº†å¤šç§æ™ºèƒ½åˆ‡åˆ†ç®—æ³•ï¼š</p>
<ul>
<li>
<p><strong>Markdown</strong> <strong>ç»“æ„æ„ŸçŸ¥åˆ‡åˆ†</strong>ï¼šèƒ½å¤Ÿè¯†åˆ«æ–‡æ¡£çš„åˆ†çº§æ ‡é¢˜ç»“æ„ï¼Œç¡®ä¿æ¯ä¸€ä¸ªåˆ‡åˆ†å‡ºçš„æ–‡æœ¬å—åœ¨é€»è¾‘ä¸Šæ˜¯å®Œæ•´çš„ã€‚</p>
</li>
<li>
<p><strong>ä»£ç æ„ŸçŸ¥åˆ‡åˆ†</strong>ï¼šé’ˆå¯¹æŠ€æœ¯æ–‡æ¡£ï¼Œè‡ªåŠ¨è¯†åˆ«ä»£ç å—å¹¶é˜²æ­¢å…¶åœ¨åˆ‡åˆ†è¿‡ç¨‹ä¸­è¢«æˆªæ–­ ã€‚</p>
</li>
<li>
<p><strong>æ··åˆåˆ‡åˆ†ç­–ç•¥</strong>ï¼šç»“åˆè¯­ä¹‰ç›¸ä¼¼åº¦ä¸å›ºå®šé•¿åº¦çº¦æŸï¼Œäº§ç”Ÿæ—¢ç¬¦åˆè®¡ç®—æ•ˆç‡åˆå…·å¤‡è¯­ä¹‰è¿è´¯æ€§çš„æ–‡æœ¬å—ã€‚</p>
</li>
</ul>
<h4 data-id="heading-37">è§’è‰²é©±åŠ¨çš„åˆæˆ</h4>
<p>ä¸ºäº†æå‡åˆæˆæ•°æ®çš„å¤šæ ·æ€§å’Œä¸“ä¸šæ€§ï¼ŒEasy Datasetå¼•å…¥äº†åˆ›æ–°çš„"è§’è‰²é©±åŠ¨åˆæˆ"æœºåˆ¶ã€‚ç³»ç»Ÿä¼šæ ¹æ®æ–‡æ¡£å†…å®¹è‡ªåŠ¨ç”Ÿæˆ"æµæ´¾-å—ä¼—å¯¹"ã€‚ä¾‹å¦‚ï¼Œå½“å¤„ç†ä¸€ä»½å¤æ‚çš„æ³•å¾‹åˆè§„æ–‡æ¡£æ—¶ï¼Œç³»ç»Ÿä¼šè®¾å®šä¸åŒçš„æé—®ä¸å›ç­”è§’è‰²ï¼š</p>
<ul>
<li>
<p><strong>è§’è‰²A</strong>ï¼šæ³•å¾‹ä¸“å®¶ï¼ˆé’ˆå¯¹ä¸“ä¸šæ¡æ–‡è¿›è¡Œæ·±åº¦è§£æï¼‰ã€‚</p>
</li>
<li>
<p><strong>è§’è‰²B</strong>ï¼šåˆçº§æ³•åŠ¡ï¼ˆé’ˆå¯¹åˆè§„æ“ä½œæµç¨‹è¿›è¡Œæé—®ï¼‰ã€‚</p>
</li>
<li>
<p><strong>è§’è‰²C</strong>ï¼šä¼ä¸šé«˜ç®¡ï¼ˆé’ˆå¯¹åˆè§„é£é™©ç‚¹è¿›è¡Œæ€»ç»“æ€§è¯¢é—®ï¼‰ã€‚</p>
</li>
</ul>
<p>è¿™ç§è§’è‰²é©±åŠ¨çš„Promptingç­–ç•¥ï¼Œä½¿å¾—ä»åŒä¸€æ®µéç»“æ„åŒ–æ–‡æœ¬ä¸­å¯ä»¥å»¶ä¼¸å‡ºå¤šæ¡è§†è§’è¿¥å¼‚ã€é£æ ¼å¤šå…ƒçš„QAå¯¹ï¼Œæå¤§åœ°æ¨¡æ‹Ÿäº†çœŸå®ä¸–ç•Œä¸­å¤æ‚çš„äººæœºäº¤äº’åœºæ™¯ã€‚</p>
<h4 data-id="heading-38">äººæœºåä½œçš„è§†è§‰åŒ–ç®¡ç†</h4>
<p>Easy Datasetæœ€å¤§çš„å·¥ç¨‹ä¼˜åŠ¿åœ¨äºå…¶ç›´è§‚çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œè¿™ä½¿å¾—éæŠ€æœ¯å‡ºèº«çš„è¡Œä¸šä¸“å®¶ä¹Ÿèƒ½æ·±åº¦å‚ä¸æ•°æ®å»ºè®¾è¿‡ç¨‹ã€‚</p>
<ul>
<li>
<p><strong>æ–‡æ¡£é¢„å¤„ç†</strong>ï¼šè§†è§‰åŒ–è°ƒèŠ‚åˆ‡åˆ†é˜ˆå€¼ï¼Œå®æ—¶æŸ¥çœ‹åˆ‡åˆ†åçš„æ–‡æœ¬å—ï¼Œå¹¶æ”¯æŒå…¨å±€æ ‡ç­¾æ ‘æ„å»ºã€‚</p>
</li>
<li>
<p><strong>æŒ‡ä»¤</strong> <strong>ç”Ÿæˆ</strong>ï¼šæ‰¹é‡æ„å»ºåŸºäºæ–‡æœ¬å—çš„ä»»åŠ¡ï¼Œæ”¯æŒæ‰‹åŠ¨ä¿®æ”¹ç”Ÿæˆçš„æŒ‡ä»¤ï¼Œé€šè¿‡æ ‡ç­¾æ ‘ç®¡ç†çŸ¥è¯†ç‚¹åˆ†å¸ƒã€‚</p>
</li>
<li>
<p><strong>å›å¤å¢å¼º</strong>ï¼šåˆ©ç”¨LLMç”ŸæˆåŒ…å«æ€ç»´é“¾çš„è¯¦ç»†å›ç­”ï¼Œå¹¶æä¾›AIè¾…åŠ©çº åå’Œè´¨é‡åˆ†çº§ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®é›†å¯¼å‡º</strong>ï¼šä¸€é”®å¯¼å‡ºä¸ºAlpacaæˆ–ShareGPTæ ¼å¼ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆ LLaMA Factoryé…ç½®æ–‡ä»¶ã€‚</p>
</li>
</ul>
<p>äººæœºåä½œæ¨¡å¼æœ‰æ•ˆç¼“è§£çº¯åˆæˆæ•°æ®çš„å¹»è§‰é—®é¢˜ï¼Œç”¨æˆ·å¯åœ¨ç•Œé¢ä¸€é”®ä¼˜åŒ–é€»è¾‘ã€äº‹å®æœ‰è¯¯çš„å›ç­”ï¼Œä¿éšœè®­ç»ƒé›†çš„ä¸¥è°¨æ€§ã€‚</p>
<h4 data-id="heading-39">è¯„ä¼°é—­ç¯ä¸ Arena ç³»ç»Ÿ</h4>
<p>Easy Dataset v1.7.0è¿›ä¸€æ­¥å¼ºåŒ–äº†å…¶è¯„ä¼°èƒ½åŠ›ï¼Œå¼•å…¥äº†æ¨¡å‹ç«æŠ€åœºï¼ˆArenaï¼‰ã€è‡ªåŠ¨åŒ–è¯„ä¼°æ¨¡å—ã€‚ç”¨æˆ·ä¸ä»…å¯ä»¥åˆæˆè®­ç»ƒæ•°æ®ï¼Œè¿˜å¯ä»¥åŒæ­¥åˆæˆåŒ…å«åˆ¤æ–­ã€å•é€‰ã€å¤šé€‰ã€ç®€ç­”ã€å¼€æ”¾å¼äº”å¤§é¢˜å‹çš„æµ‹è¯•é›†ã€‚æ•™å¸ˆæ¨¡å‹é‡åŒ–è¯„åˆ†å¹¶ç”Ÿæˆè¯„ä¼°æŠ¥å‘Šï¼Œå½¢æˆç”Ÿæˆ â€” è®­ç»ƒå‡†å¤‡ â€” è¯„ä¼°åé¦ˆé—­ç¯ï¼Œæ˜¯å·¥ä¸šç•Œè½åœ°ä¾¿æ·çš„æ•°æ®å·¥ç¨‹å¥—ä»¶ã€‚</p>
<h3 data-id="heading-40">3.4 æŠ€æœ¯é€‰å‹å»ºè®®</h3>
<ul>
<li><strong>é€šç”¨å¯¹é½é˜¶æ®µ</strong>ï¼šé¢„è®­ç»ƒåŸºç¡€æ¨¡å‹å…ˆé€šè¿‡Self-Instructæ„å»ºå¹¿è¦†ç›–æŒ‡ä»¤åŸºåº§ï¼ŒæŒæ¡åŸºç¡€å¯¹è¯èŒƒå¼ã€‚</li>
<li><strong>ä¸“ä¸šé€»è¾‘çªç ´é˜¶æ®µ</strong>ï¼šé¢å‘ä»£ç ã€æ•°å­¦ã€å¤æ‚å’¨è¯¢çš„æ¨¡å‹ï¼Œå¼•å…¥WizardLMç®—æ³•ï¼Œå¤šè½®è¿›åŒ–æ‰“é€ äººç±»æ ‡æ³¨éš¾ç©·å°½çš„é€»è¾‘éš¾ç‚¹ã€‚</li>
<li><strong>è¡Œä¸šæ¨¡å‹è½åœ°é˜¶æ®µ</strong>ï¼šç‰¹å®šè¡Œä¸šæ¨¡å‹é‡‡ç”¨Easy Datasetè·¯å¾„ï¼Œä»¥è¡Œä¸šè§„æ¡£ä¸ºåº•åº§ï¼Œé€šè¿‡è§’è‰²é©±åŠ¨åˆæˆä¸“ä¸šè´´åˆä¸šåŠ¡çš„é—®ç­”æ•°æ®é›†ã€‚</li>
</ul>
<h2 data-id="heading-41">4 æœ‰ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰ä¸å‚æ•°é«˜æ•ˆé€‚é…æ¡†æ¶</h2>
<p>é¢„è®­ç»ƒèµ‹äºˆäº†æ¨¡å‹åšå­¦ï¼Œè€Œæœ‰ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰åˆ™èµ‹äºˆäº†æ¨¡å‹å¬ä»æŒ‡ä»¤çš„èƒ½åŠ›ã€‚éšç€æ¨¡å‹è§„æ¨¡çš„å¢é•¿ï¼Œå…¨å‚æ•°å¾®è°ƒçš„æˆæœ¬å˜å¾—éš¾ä»¥æ‰¿å—ï¼Œä¸ºäº†å¹³è¡¡æ¨¡å‹æ€§èƒ½ä¸èµ„æºåˆ©ç”¨ç‡ï¼Œæœ‰ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰ç»“åˆå‚æ•°é«˜æ•ˆé€‚é…ï¼ˆPEFTï¼‰æŠ€æœ¯æˆä¸ºäº†è¡Œä¸šä¸»æµæ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-42">4.1 LlamaFactory</h3>
<ul>
<li>
<p>gitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhiyouga%2FLlamaFactory" target="_blank" title="https://github.com/hiyouga/LlamaFactory" ref="nofollow noopener noreferrer">github.com/hiyouga/Llaâ€¦</a> 66.1kâ­</p>
</li>
<li>
<p>å®˜æ–¹æ–‡æ¡£: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.llamafactory.com.cn%2Fdocs%2Fdocuments%2Fintroduct" target="_blank" title="https://docs.llamafactory.com.cn/docs/documents/introduct" ref="nofollow noopener noreferrer">docs.llamafactory.com.cn/docs/documeâ€¦</a></p>
</li>
</ul>
<p>LlamaFactoryä»¥å¾®è°ƒçš„æ°‘ä¸»åŒ–ä¸ºæ ¸å¿ƒç†å¿µï¼Œæ˜¯æ˜“ç”¨ã€é«˜æ•ˆã€é«˜é›†æˆçš„LLMè®­ç»ƒå¹³å°ã€‚å®ƒé€šè¿‡æŠ½è±¡åº•å±‚é€»è¾‘ï¼Œå°†å¤æ‚çš„åˆ†å¸ƒå¼è®­ç»ƒã€æ•°æ®æ ¼å¼è½¬åŒ–ã€æ¨¡å‹å…¼å®¹ç­‰é—®é¢˜å°è£…äºç»Ÿä¸€æ¥å£ï¼Œå…¶ç‰¹è‰²çš„LLaMA Boardå¯è§†åŒ–ç•Œé¢ï¼Œæ”¯æŒç”¨æˆ·æ— ä»£ç å®Œæˆä»æ•°æ®å‡†å¤‡ã€æ¨¡å‹åŠ è½½åˆ°å¾®è°ƒå¯åŠ¨ã€æŸå¤±ç›‘æ§åŠæƒé‡åˆå¹¶çš„å…¨æµç¨‹æ“ä½œã€‚æ›´å¤šå†…å®¹è§<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9f4mqYVGKNS-LhmHLl6CXw" target="_blank" title="https://mp.weixin.qq.com/s/9f4mqYVGKNS-LhmHLl6CXw" ref="nofollow noopener noreferrer">æ”¶è—ï¼LLM-RLè®­ç»ƒæ¡†æ¶ï¼š3å¤§æµæ´¾+6å¤§æ¡†æ¶ï¼Œä¸€æ–‡æå®š</a>ã€‚</p>
<h4 data-id="heading-43">å…³é”®æŠ€æœ¯ç‰¹æ€§ä¸ç®—æ³•çŸ©é˜µ</h4>
<p>LlamaFactoryå±•ç°äº†æå¼ºçš„Day 0æ”¯æŒèƒ½åŠ›ï¼Œå³åœ¨ Llama 3/4ã€Qwen 2.5/3ã€DeepSeek-R1 ç­‰å‰æ²¿æ¨¡å‹å‘å¸ƒçš„ç¬¬ä¸€æ—¶é—´æä¾›é€‚é…ã€‚åœ¨ç®—æ³•å±‚é¢ï¼Œè¯¥æ¡†æ¶é›†æˆäº†ç›®å‰æœ€å¹¿æ³›çš„PEFTç®—æ³•çŸ©é˜µã€‚</p>
<ul>
<li>
<p><strong>åŸºç¡€å¾®è°ƒæ¨¡å¼</strong>: å…¨é‡å‚æ•°å¾®è°ƒã€å†»ç»“å¾®è°ƒã€LoRAã€QLoRA (2/3/4/5/6/8-bit)</p>
</li>
<li>
<p><strong>å…ˆè¿›</strong> <strong>é€‚é…å™¨</strong> <strong>ç®—æ³•</strong>: DoRAã€LoRA+ã€rsLoRAã€PiSSAã€LoftQã€OFT</p>
</li>
<li>
<p><strong>ä¼˜åŒ–å™¨</strong> <strong>ä¸</strong> <strong>å†…å­˜</strong> <strong>ç®¡ç†</strong>: GaLoreã€BAdamã€Adam-miniã€Muonã€FlashAttention-2ã€Liger Kernel</p>
</li>
<li>
<p><strong>å¯¹é½ä¸</strong> <strong>å¼ºåŒ–å­¦ä¹ </strong>: SFTã€PPOã€DPOã€KTOã€ORPOã€SimPO</p>
</li>
</ul>
<p>LlamaFactoryåœ¨æ•°æ®å¤„ç†ä¸Šæ”¯æŒä¸»æµæ•°æ®é›†æ ¼å¼åŠå¤šè½®å¯¹è¯ã€å¤šæ¨¡æ€æ•°æ®å¤„ç†ï¼Œå†…ç½®Native DDPã€DeepSpeedã€FSDPç­‰åˆ†å¸ƒå¼è®­ç»ƒç­–ç•¥ï¼Œå¯åœ¨ä¸­å¤§è§„æ¨¡GPUé›†ç¾¤è¿è¡Œï¼Œè¿˜æ·±åº¦é€‚é…æ˜‡è…¾NPUï¼Œè¦†ç›–é©±åŠ¨å®‰è£…ã€CANNé…ç½®åŠåŠ é€Ÿç®—å­é›†æˆã€‚</p>
<h4 data-id="heading-44">é€‚åˆåœºæ™¯</h4>
<ul>
<li>
<p><strong>ç§‘ç ”å®éªŒä¸åŸå‹éªŒè¯</strong>ï¼šç ”ç©¶äººå‘˜å¯ä»¥åˆ©ç”¨WebUIå¿«é€Ÿæµ‹è¯•ä¸åŒPEFTç®—æ³•å¯¹ç‰¹å®šä»»åŠ¡çš„æ•ˆæœï¼Œæ— éœ€åœ¨å·¥ç¨‹ç»†èŠ‚ä¸Šæµªè´¹æ—¶é—´ã€‚</p>
</li>
<li>
<p><strong>å¿«é€Ÿé¢†åŸŸå®šåˆ¶</strong>ï¼šä¸­å°ä¼ä¸šæˆ–å¼€å‘å›¢é˜Ÿéœ€è¦å°†é€šç”¨æ¨¡å‹è½¬åŒ–ä¸ºç‰¹å®šå‚ç›´é¢†åŸŸçš„åŠ©æ‰‹æ—¶ï¼ŒLlamaFactoryæä¾›äº†æœ€å¿«çš„è½åœ°è·¯å¾„ã€‚</p>
</li>
<li>
<p><strong>å›½äº§åŒ–æ›¿ä»£</strong>ï¼šåœ¨éœ€è¦åŸºäºæ˜‡è…¾NPUè¿›è¡Œè‡ªä¸»å¯æ§çš„å¤§æ¨¡å‹å¾®è°ƒæ—¶ï¼ŒLlamaFactoryçš„NPUè®­ç»ƒæ–¹æ¡ˆæä¾›äº†è¯¦å°½çš„å·¥ç¨‹å‚è€ƒã€‚</p>
</li>
</ul>
<h4 data-id="heading-45">ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼šâ‘  äº¤äº’æè‡´å‹å¥½ï¼šLLaMA Boardå¯è§†åŒ–ç•Œé¢æ˜¯ç›®å‰å¼€æºç¤¾åŒºä¸­æˆç†Ÿåº¦æœ€é«˜çš„GUIå·¥å…·ï¼Œæå¤§é™ä½äº†éå·¥ç¨‹èƒŒæ™¯ç”¨æˆ·çš„é—¨æ§›ï¼›â‘¡ å…¼å®¹æ€§æå…¶å¹¿æ³›ï¼šæ”¯æŒæ¨¡å‹è¶…è¿‡100ç§ï¼Œæ¶µç›–äº†å½“å‰å¸‚åœºä¸Šç»å¤§å¤šæ•°ä¸»æµåŠå°ä¼—æ¶æ„ï¼›â‘¢ ç®—æ³•è·Ÿè¿›è¿…é€Ÿï¼šç¤¾åŒºæ´»è·ƒåº¦æé«˜ï¼Œæ–°ç®—æ³•ï¼ˆå¦‚GaLoreã€DoRAï¼‰çš„é›†æˆé€Ÿåº¦å¤„äºè¡Œä¸šé¢†å…ˆæ°´å¹³ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šâ‘ å•å¡æé™ä¼˜åŒ–ä¸è¶³ï¼šè™½ç„¶é›†æˆäº†Unslothçš„åŠ é€Ÿç®—å­ï¼Œä½†åœ¨çº¯ç²¹çš„å•å¡æè‡´æ•ˆç‡ä¸Šï¼Œä»ç•¥é€ŠäºåŸç”ŸUnslothæ¡†æ¶ï¼›â‘¡ å·¥ç¨‹å¤æ‚åº¦è¾ƒé«˜ï¼šç”±äºåŠŸèƒ½è¿‡äºä¸°å¯Œï¼Œåº•å±‚ä»£ç åº“è¾ƒä¸ºåºå¤§ï¼Œå¯¹äºå¸Œæœ›è¿›è¡Œæ·±åº¦äºŒæ¬¡å¼€å‘çš„ç”¨æˆ·æ¥è¯´ï¼Œä»£ç çš„å­¦ä¹ æ›²çº¿å¯èƒ½è¾ƒé™¡ã€‚</p>
<h3 data-id="heading-46">4.2 Unsloth</h3>
<ul>
<li>
<p>Github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funslothai%2Funsloth" target="_blank" title="https://github.com/unslothai/unsloth" ref="nofollow noopener noreferrer">github.com/unslothai/uâ€¦</a> 51.1kâ­</p>
</li>
<li>
<p>è¯´æ˜æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Funsloth.ai%2Fdocs" target="_blank" title="https://unsloth.ai/docs" ref="nofollow noopener noreferrer">unsloth.ai/docs</a></p>
</li>
</ul>
<h4 data-id="heading-47">æ ¸å¿ƒæœºåˆ¶ï¼šTritonå†…æ ¸ä¸æ‰‹åŠ¨åå‘ä¼ æ’­</h4>
<p>Unslothé¢ è¦†äº†å¼€å‘è€…å¯¹æ˜¾å­˜å ç”¨çš„è®¤çŸ¥ï¼Œç”±Daniel Hanå’ŒMichael Hanå…„å¼Ÿå¼€å‘ï¼Œæ ¸å¿ƒæ˜¯æè‡´æ€§èƒ½ä¼˜åŒ–ä¸æ·±åº¦æŒ–æ˜ç¡¬ä»¶æ½œåŠ›ã€‚è¯¥æ¡†æ¶èˆå¼ƒPyTorché»˜è®¤ç®—å­å®ç°ï¼ŒåŸºäºOpenAIçš„Tritonè¯­è¨€æ‰‹å†™çº¿æ€§å±‚ã€RoPEä½ç½®åµŒå…¥ç­‰å‡ ä¹æ‰€æœ‰å…³é”®è®¡ç®—å†…æ ¸ã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼åœ¨äºæ¶ˆé™¤å†—ä½™çš„ä¸­é—´å¼ é‡å­˜å‚¨ï¼šæ ‡å‡†PyTorchæµç¨‹ä¸­ï¼Œåå‘ä¼ æ’­éœ€ä¿ç•™å¤§é‡æ¿€æ´»å€¼ï¼Œæ˜¯æ˜¾å­˜æ¶ˆè€—çš„ä¸»è¦æ¥æºã€‚Unslothé€šè¿‡æ‰‹åŠ¨ç¼–å†™åå‘ä¼ æ’­é€»è¾‘ï¼Œç»“åˆå†…æ ¸èåˆæŠ€æœ¯ï¼Œè®©å•æ¬¡GPUè°ƒç”¨å®Œæˆå¤šä¸ªè®¡ç®—æ­¥éª¤ï¼Œå¤§å¹…å‡å°‘VRAMçš„è¯»å†™æ¬¡æ•°ã€‚</p>
<h4 data-id="heading-48">æ€§èƒ½è¡¨ç°ä¸æ˜¾å­˜èŠ‚çœæ•°æ®</h4>
<p>æ ¹æ®å®˜æ–¹åŠç¤¾åŒºçš„å®æµ‹æ•°æ®ï¼ŒUnslothåœ¨å¾®è°ƒä»»åŠ¡ä¸­ç›¸æ¯”åŸºå‡†ï¼ˆHF+FA2ï¼‰çš„ä¼˜åŠ¿ã€‚</p>
<ul>
<li><strong>è®­ç»ƒé€Ÿåº¦</strong>ï¼šæé€Ÿ 2x è‡³ 5xï¼Œéƒ¨åˆ†åœºæ™¯ç”šè‡³è¾¾åˆ° 10x ä»¥ä¸Š</li>
<li><strong>æ˜¾å­˜</strong> <strong>å ç”¨</strong>ï¼šå‡å°‘70%è‡³80%ï¼Œæå¤§åœ°ç¼“è§£äº†OOMé—®é¢˜</li>
<li><strong>ç²¾åº¦ä¿æŒ</strong>ï¼š0%ç²¾åº¦æŸå¤±ï¼Œé€šè¿‡æ•°å­¦ä¸Šçš„ç²¾ç¡®ç­‰ä»·å®ç°ä¼˜åŒ–è€Œéè¿‘ä¼¼</li>
<li><strong>ä¸Šä¸‹æ–‡æ”¯æŒ</strong>ï¼šåœ¨80GBæ˜¾å­˜ä¸‹æ”¯æŒé«˜è¾¾500Kçš„ä¸Šä¸‹æ–‡çª—å£è®­ç»ƒ</li>
</ul>
<p>æ­¤å¤–ï¼ŒUnslothçš„åŠ¨æ€4-bité‡åŒ–æŠ€æœ¯ä¼˜åŒ–è‡ªbitsandbytesï¼Œé€šè¿‡åŠ¨æ€ä¿æŠ¤å…³é”®æƒé‡ï¼Œä»¥ä¸è¶³10%çš„æ˜¾å­˜å¼€é”€æå‡4-bitæ¨¡å‹å¾®è°ƒç²¾åº¦ï¼Œåœ¨MMLUç­‰åŸºå‡†ä¸Šè¡¨ç°æ›´ä¼˜ã€‚</p>
<h4 data-id="heading-49">é€‚åˆåœºæ™¯</h4>
<ul>
<li>
<p><strong>æ¶ˆè´¹çº§</strong> <strong>æ˜¾å¡</strong> <strong>è®­ç»ƒ</strong>ï¼šåœ¨RTX 3060 (12GB) æˆ–RTX 4090 (24GB) ä¸Šå¾®è°ƒLlama 7Bç”šè‡³20Bè§„æ¨¡çš„æ¨¡å‹ï¼Œè¿™æ˜¯ä¼ ç»Ÿæ¡†æ¶éš¾ä»¥å®Œæˆçš„ä»»åŠ¡ã€‚</p>
</li>
<li>
<p><strong>é•¿æ–‡æœ¬ä»»åŠ¡è®­ç»ƒ</strong>ï¼šå¯¹äºéœ€è¦æé•¿ä¸Šä¸‹æ–‡ï¼ˆå¦‚æ³•å¾‹æ–‡ä¹¦ã€é•¿ç¯‡å°è¯´åˆ†æï¼‰çš„å¾®è°ƒï¼ŒUnslothçš„å†…å­˜ç®¡ç†èƒ½åŠ›æ˜¯æ ¸å¿ƒä¼˜åŠ¿ã€‚</p>
</li>
<li>
<p><strong>é«˜é¢‘è¿­ä»£ä»»åŠ¡</strong>ï¼šåœ¨éœ€è¦é¢‘ç¹è°ƒæ•´å‚æ•°ã€å¿«é€Ÿçœ‹åˆ°è®­ç»ƒç»“æœçš„åœºæ™¯ä¸‹ï¼Œ2-5å€çš„é€Ÿåº¦æå‡æ„å‘³ç€ç ”å‘å‘¨æœŸçš„æŒ‡æ•°çº§ç¼©çŸ­ã€‚</p>
</li>
</ul>
<h4 data-id="heading-50">ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼šâ‘  æ•ˆç‡æ–­å±‚é¢†å…ˆï¼šåœ¨å•å¡å¾®è°ƒé¢†åŸŸï¼ŒUnslothçš„é€Ÿåº¦å’Œæ˜¾å­˜æ•ˆç‡ç›®å‰å¤„äºæ— æ•Œåœ°ä½ï¼›â‘¡ é›¶éƒ¨ç½²ç—›è‹¦ï¼šæä¾›ä¸°å¯Œçš„Google Colabå’ŒKaggleç¬”è®°æœ¬æ¨¡æ¿ï¼Œä¸”æ”¯æŒä¸€é”®å¯¼å‡ºè‡³GGUFã€vLLMç­‰å¤šç§éƒ¨ç½²æ ¼å¼ï¼›â‘¢ RLæ”¯æŒå“è¶Šï¼šé’ˆå¯¹GRPOç®—æ³•è¿›è¡Œäº†å†…å­˜ä¼˜åŒ–ï¼Œä½¿å…¶æˆä¸ºå½“å‰å¤ç°DeepSeek-R1é£æ ¼æ¨ç†æ¨¡å‹æœ€ç»æµçš„å·¥å…·ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šâ‘  å¤šå¡æ”¯æŒè¾ƒå¼±ï¼šé•¿æœŸä»¥æ¥å…¶å¼€æºç‰ˆæœ¬ä¸»è¦é’ˆå¯¹å•å¡ä¼˜åŒ–ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡ä¸€äº›éå®˜æ–¹æ‰‹æ®µæ¥å…¥å¤šå¡ï¼Œä½†æˆç†Ÿçš„åˆ†å¸ƒå¼æ”¯æŒï¼ˆProç‰ˆï¼‰å°šæœªå…¨é¢å¼€æºï¼›â‘¡ æ¨¡å‹ç»“æ„æ•æ„Ÿï¼šç”±äºç®—å­æ˜¯æ‰‹å†™çš„ï¼Œå½“æ¨¡å‹å¼•å…¥å…¨æ–°çš„ç®—å­æˆ–ç»“æ„ï¼ˆå¦‚éTransformeræ¶æ„ï¼‰æ—¶ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨æ›´æ–°å†…æ ¸ï¼Œå…¼å®¹æ€§æ‰©å±•ç›¸å¯¹æ»åã€‚</p>
<h3 data-id="heading-51">4.3 ms-swift</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb205d3733df44018b318c1143d68368~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769991101&amp;x-signature=4WjcVkYJH5%2F5NtVzYIFDxrR6hGE%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>Github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelscope%2Fms-swift" target="_blank" title="https://github.com/modelscope/ms-swift" ref="nofollow noopener noreferrer">github.com/modelscope/â€¦</a> 12.3kâ­</p>
</li>
<li>
<p>è®ºæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2408.05517" target="_blank" title="https://arxiv.org/abs/2408.05517" ref="nofollow noopener noreferrer">arxiv.org/abs/2408.05â€¦</a></p>
</li>
</ul>
<p>ms-swiftï¼ˆScalable lightWeight Infrastructure for Fine-Tuning)é˜¿é‡Œæ˜¯ModelScopeç¤¾åŒºæ¨å‡ºçš„å…¨èƒ½å‹å¤§æ¨¡å‹å¾®è°ƒæ¡†æ¶ï¼ŒåŒºåˆ«äºLlamaFactoryçš„æ˜“ç”¨æ€§å’ŒUnslothçš„æ€§èƒ½è¿½æ±‚ï¼Œå…¶ä»¥å·¥ä¸šçº§çš„æ·±åº¦ä¸å¹¿åº¦ä¸ºè®¾è®¡ç›®æ ‡ã€‚è¯¥æ¡†æ¶æ·±åº¦èåˆModelScopeç”Ÿæ€ï¼Œæ”¯æŒ600ä½™ç§çº¯æ–‡æœ¬æ¨¡å‹ã€300ä½™ç§å¤šæ¨¡æ€æ¨¡å‹ï¼Œè¦†ç›–å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰å…¨æ¨¡æ€è¾“å…¥ã€‚</p>
<p>ms-swiftå®ç°äº†è¾…åŠ©æ•°æ®æ ‡æ³¨ã€å¾®è°ƒè®­ç»ƒã€EvalScopeè¯„æµ‹ã€é‡åŒ–åŠvLLM/SGLangéƒ¨ç½²çš„å…¨é“¾è·¯é—­ç¯ï¼Œä¸€ç«™å¼å·¥å…·é“¾å¤§å¹…é™ä½ä¼ä¸šç”Ÿäº§ç¯å¢ƒä¸­è·¨å¹³å°è¿ç§»çš„å·¥ç¨‹æŸè€—ã€‚</p>
<h4 data-id="heading-52">æ ¸å¿ƒæŠ€æœ¯ï¼šMegatron æ‰©å±•ä¸å›½äº§ç¡¬ä»¶é€‚é…</h4>
<p>åœ¨å¤„ç†è¶…å¤§è§„æ¨¡æ¨¡å‹æ—¶ï¼Œms-swiftå¼•å…¥äº†Megatronå¹¶è¡ŒæŠ€æœ¯ï¼Œæ”¯æŒå¼ é‡å¹¶è¡Œï¼ˆTPï¼‰ã€æµæ°´çº¿å¹¶è¡Œï¼ˆPPï¼‰ã€ä¸Šä¸‹æ–‡å¹¶è¡Œï¼ˆCPï¼‰ç­‰å¤æ‚ç­–ç•¥ã€‚é€šè¿‡Megatron-SWIFTæ¨¡å—ï¼Œè¯¥æ¡†æ¶åœ¨å¾®è°ƒ MoEï¼ˆä¸“å®¶æ··åˆï¼‰æ¨¡å‹æ—¶çš„åŠ é€Ÿæ¯”å¯è¾¾10å€ä»¥ä¸Šã€‚</p>
<p>ms-swiftå¯¹å›½äº§åŒ–ç®—åŠ›çš„æ”¯æŒæœ€ä¸ºå½»åº•ã€‚å®ƒä¸ä»…æ”¯æŒ NVIDIA A100/H100ï¼Œè¿˜é’ˆå¯¹æ˜‡è…¾NPUã€å¯’æ­¦çºªã€å¯’æ­¦çºªåŠå›½å†…ä¸»æµç®—åŠ›å¹³å°è¿›è¡Œäº†æ·±åº¦è°ƒä¼˜ã€‚å…¶åœ¨æ˜‡è…¾NPUä¸Šæ”¯æŒåŸºäºCANNçš„åº•å±‚åŠ é€Ÿï¼Œå¹¶èƒ½å¤Ÿé…åˆDeepSpeedå®ç°å¤§è§„æ¨¡åˆ†å¸ƒå¼è®­ç»ƒã€‚</p>
<ul>
<li>
<p><strong>æ¨¡å‹æ”¯æŒï¼š</strong> æ”¯æŒQwen-VL, InternVL, GLM-4.5V, Ovisç­‰300+å¤šæ¨¡æ€æ¨¡å‹</p>
</li>
<li>
<p><strong>å¤šæ¨¡æ€ä¼˜åŒ–</strong>ï¼šå¼•å…¥å¤šæ¨¡æ€æ‰“åŒ…æŠ€æœ¯ï¼ˆPackingï¼‰ï¼Œè®­ç»ƒé€Ÿåº¦æå‡100%+</p>
</li>
<li>
<p><strong>å¼ºåŒ–å­¦ä¹ </strong> <strong>æ—ç¾¤</strong>ï¼šå†…ç½®GRPO, DAPO, GSPO, RLOO, Reinforce++ç­‰å…¨ç³»åˆ—å¼ºåŒ–å­¦ä¹ ç®—æ³•</p>
</li>
<li>
<p><strong>éƒ¨ç½²åç«¯</strong>: é›†æˆvLLM, SGLang, LMDeployï¼Œæä¾›æ ‡å‡†çš„OpenAI APIæ¥å£</p>
</li>
</ul>
<h4 data-id="heading-53">é€‚åˆåœºæ™¯</h4>
<p>ms-swiftæ˜¯ä¼ä¸šçº§é¡¹ç›®åŠè¶…å¤§è§„æ¨¡ä»»åŠ¡çš„é¦–é€‰ï¼š</p>
<ul>
<li>
<p><strong>å¤šæ¨¡æ€æ¨¡å‹å¾®è°ƒ</strong>ï¼šåœ¨å¤„ç†åŒ…å«è§†è§‰ã€è¯­éŸ³ã€è§†é¢‘çš„è·¨æ¨¡æ€å¯¹é½ä»»åŠ¡æ—¶ï¼Œms-swiftæä¾›äº†æœ€æˆç†Ÿçš„æ¨¡æ¿ä¸ç®—å­æ”¯æŒã€‚</p>
</li>
<li>
<p><strong>å¤§è§„æ¨¡é›†ç¾¤è®­ç»ƒ</strong>ï¼šå½“å¾®è°ƒä»»åŠ¡éœ€è¦è·¨è¶Šæ•°åå°ç”šè‡³ä¸Šç™¾å°æœåŠ¡å™¨ï¼Œå¹¶åˆ©ç”¨å¤æ‚çš„å¹¶è¡Œç­–ç•¥æ—¶ï¼Œms-swiftçš„Megatronæ¶æ„æ˜¯æ ¸å¿ƒä¿éšœã€‚</p>
</li>
<li>
<p><strong>å›½äº§åŒ–å·¥ä¸šè½åœ°</strong>ï¼šå¯¹äºå¿…é¡»éƒ¨ç½²åœ¨å›½äº§ç¡¬ä»¶ç¯å¢ƒï¼ˆå¦‚é‡‘èã€æ”¿åŠ¡äº‘ï¼‰çš„AIé¡¹ç›®ï¼Œms-swiftæä¾›äº†æœ€å®Œå¤‡çš„é©±åŠ¨ä¸æ¡†æ¶å…¼å®¹æ€§æ”¯æŒã€‚</p>
</li>
</ul>
<h4 data-id="heading-54">ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹</strong>ï¼šâ‘  å¤šæ¨¡æ€æ”¯æŒä¹‹ç‹ï¼šç›®å‰å¼€æºç•Œå¯¹è§†è§‰ã€è¯­éŸ³æ¨¡å‹å¾®è°ƒæ”¯æŒæœ€å…¨é¢ã€ä¼˜åŒ–æœ€æ·±å…¥çš„æ¡†æ¶ä¹‹ä¸€; â‘¡ å›½äº§ç®—åŠ›ä¹‹å‹ï¼šåœ¨æ˜‡è…¾ç­‰å›½äº§èŠ¯ç‰‡ä¸Šçš„è¡¨ç°æœ€ä¸ºç¨³å®šï¼Œä¸”æœ‰ModelScopeç¤¾åŒºçš„å¼ºå¤§æŠ€æœ¯æ”¯æŒ; â‘¢å¹¶è¡Œç­–ç•¥å®Œå¤‡ï¼šçœŸæ­£æ”¯æŒåƒäº¿çº§å‚æ•°æ¨¡å‹çš„å¹¶è¡Œè®­ç»ƒä¸ä¼˜åŒ–ï¼Œå…·å¤‡æå¼ºçš„å¯æ‰©å±•æ€§ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šâ‘  å­¦ä¹ éš¾åº¦æœ€é«˜ï¼šç”±äºé›†æˆäº†Megatronå’Œæµ·é‡çš„å·¥ä¸šçº§å‚æ•°ï¼Œå…¶é…ç½®å¤æ‚åº¦é«˜äºLlamaFactoryï¼Œå¯¹å¼€å‘è€…çš„å·¥ç¨‹æ°´å¹³æœ‰è¾ƒé«˜è¦æ±‚; â‘¡ ç¯å¢ƒä¾èµ–è¾ƒé‡ï¼šåœ¨å®‰è£…åˆ†å¸ƒå¼åŠå›½äº§ç¡¬ä»¶æ”¯æŒæ¨¡å—æ—¶ï¼Œå¯¹ç³»ç»Ÿåº“ã€ç¼–è¯‘å™¨ç‰ˆæœ¬æœ‰è¾ƒä¸¥è‹›çš„è¦æ±‚ï¼Œåˆæ¬¡éƒ¨ç½²å¯èƒ½è€—æ—¶è¾ƒé•¿ã€‚</p>
<h2 data-id="heading-55">5 å¼ºåŒ–å­¦ä¹ ä¸äººç±»åå¥½å¯¹é½ï¼ˆRLHFï¼‰</h2>
<p>RLHFæ˜¯å¤§æ¨¡å‹é€šå¾€æ™ºèƒ½çš„æœ€åä¸€æ­¥ï¼Œé€šè¿‡ä¸äººç±»ä»·å€¼è§‚çš„å¯¹é½ï¼Œæ¨¡å‹èƒ½å¤Ÿå­¦ä¼šæ‹’ç»æœ‰å®³æŒ‡ä»¤å¹¶åœ¨å¤æ‚ä»»åŠ¡ä¸­è¡¨ç°å¾—æ›´æœ‰é€»è¾‘ã€‚éšç€DPOï¼ˆç›´æ¥åå¥½ä¼˜åŒ–ï¼‰å’Œ GRPOï¼ˆç»„ç›¸å¯¹ç­–ç•¥ä¼˜åŒ–ï¼‰ç­‰ç®—æ³•çš„æ™®åŠï¼Œå¯¹é½æ¡†æ¶æ­£åœ¨å‘é«˜æ€§èƒ½ç”Ÿæˆå’Œçµæ´»ç­–ç•¥åˆ‡æ¢æ–¹å‘æ¼”è¿›ã€‚</p>
<p>å› å‰ä¸€ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9f4mqYVGKNS-LhmHLl6CXw" target="_blank" title="https://mp.weixin.qq.com/s/9f4mqYVGKNS-LhmHLl6CXw" ref="nofollow noopener noreferrer">æ”¶è—ï¼LLM-RLè®­ç»ƒæ¡†æ¶ï¼š3å¤§æµæ´¾+6å¤§æ¡†æ¶ï¼Œä¸€æ–‡æå®š</a>åšè¿‡ä»‹ç»ï¼Œè¿™é‡Œä¸è¿‡å¤šé˜è¿°ï¼Œåªç»™ä¸€ä¸ªæ±‡æ€»è¡¨æ ¼ã€‚</p>

























<table><thead><tr><th>æ¡†æ¶åç§°</th><th>æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>OpenRLHF</td><td>Ray + vLLMæ¶æ„ã€åˆ†å¸ƒå¼å¤šæ¨¡å‹åˆ†å‘</td><td>å¤§è§„æ¨¡é›†ç¾¤ä¸‹çš„é«˜åå PPO/DPO/GRPOè®­ç»ƒ</td></tr><tr><td>veRL</td><td>3D-HybridEngineã€è®­ç»ƒä¸é‡‡æ ·é«˜æ•ˆé‡å¡‘</td><td>è¶…å¤§è§„æ¨¡MoEæ¨¡å‹çš„é«˜æ€§èƒ½å¼ºåŒ–å­¦ä¹ å¯¹é½</td></tr><tr><td>TRL</td><td>æ·±åº¦é›†æˆPEFTã€Hugging FaceåŸç”Ÿæ”¯æŒ</td><td>ä½¿ç”¨HFç”Ÿæ€è¿›è¡Œè½»é‡çº§å¯¹é½å®éªŒ</td></tr></tbody></table>
<h2 data-id="heading-56">6 é€‰å‹å»ºè®®</h2>
<p>å¤§æ¨¡å‹å…¨é“¾è·¯å·²å½¢æˆé«˜åº¦ååŒçš„å¼€æºç”Ÿæ€ï¼Œæ•°æ®åˆ¶å¤‡ç¯èŠ‚å¯é€šè¿‡Easy-datasetå°†ä¼ä¸šå†…éƒ¨æ–‡æ¡£ç›´æ¥æŠ½ç¦»ä¸ºé—®ç­”å¯¹ï¼Œå¹¶æ­é…Data-Juicerå®Œæˆè´¨é‡æ¸…æ´—ï¼›æ¨¡å‹å¾®è°ƒç¯èŠ‚é’ˆå¯¹å¤„ç†å¥½çš„æ•°æ®é›†ï¼Œå¯é‡‡ç”¨Llama-Factoryè°ƒç”¨ç”Ÿæˆçš„é…ç½®å¼€å±•å¾®è°ƒï¼Œè‹¥èµ„æºå—é™è¿˜èƒ½ç»“åˆUnslothå®ç°åŠ é€Ÿï¼›æ™ºèƒ½å¯¹é½ç¯èŠ‚åˆ™å€ŸåŠ©OpenRLHFè¿›è¡Œå¼ºåŒ–å­¦ä¹ å¯¹é½ï¼Œè®©æ¨¡å‹å…·å¤‡æ›´ä¼˜çš„é€»è¾‘æ¨ç†èƒ½åŠ›ä¸ä»·å€¼è§‚å¯¹é½æ•ˆæœï¼Œå…¶ä¸­é€»è¾‘æ¨ç†å¯è¾¾åˆ°O1çº§æ€è€ƒæ°´å¹³ã€‚å»ºè®®ä¼ä¸šå¼€å‘è€…ä¼˜å…ˆå°è¯•Easy-datasetä¸Llama-Factoryçš„ç»„åˆæ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆæ˜¯ç›®å‰ä¸Šæ‰‹æœ€å¿«ã€å·¥ç¨‹åŒ–ç¨‹åº¦æœ€é«˜çš„æ•°æ®â€”å¾®è°ƒé—­ç¯æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‹¥ä¾æ¡†æ¶æ—¥å¿—ç®¡ç†ç³»ç»Ÿæ·±åº¦è§£æï¼šä»AOPåˆ‡é¢åˆ°å¼‚æ­¥å¤„ç†çš„å®Œæ•´å®ç°]]></title>    <link>https://juejin.cn/post/7598838597559664674</link>    <guid>https://juejin.cn/post/7598838597559664674</guid>    <pubDate>2026-01-26T03:00:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598838597559664674" data-draft-id="7598734303174852660" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‹¥ä¾æ¡†æ¶æ—¥å¿—ç®¡ç†ç³»ç»Ÿæ·±åº¦è§£æï¼šä»AOPåˆ‡é¢åˆ°å¼‚æ­¥å¤„ç†çš„å®Œæ•´å®ç°"/> <meta itemprop="keywords" content="åç«¯,Java,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2026-01-26T03:00:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_Joey_"/> <meta itemprop="url" content="https://juejin.cn/user/4402858757729463"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‹¥ä¾æ¡†æ¶æ—¥å¿—ç®¡ç†ç³»ç»Ÿæ·±åº¦è§£æï¼šä»AOPåˆ‡é¢åˆ°å¼‚æ­¥å¤„ç†çš„å®Œæ•´å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4402858757729463/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _Joey_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-26T03:00:54.000Z" title="Mon Jan 26 2026 03:00:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç³»ç»Ÿæ¦‚è¿°</h2>
<h3 data-id="heading-1">1.1 åŠŸèƒ½ç®€ä»‹</h3>
<p>è‹¥ä¾æ¡†æ¶çš„æ—¥å¿—ç®¡ç†ç³»ç»Ÿæä¾›ï¼š</p>
<ul>
<li><strong>æ“ä½œæ—¥å¿—</strong>ï¼šè®°å½•ä¸šåŠ¡æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ã€å¯¼å…¥å¯¼å‡ºç­‰ï¼‰</li>
</ul>

<ul>
<li><strong>ç™»å½•æ—¥å¿—</strong>ï¼šè®°å½•ç”¨æˆ·ç™»å½•/ç™»å‡º</li>
</ul>

<ul>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šæ—¥å¿—å†™å…¥ä¸é˜»å¡ä¸»æµç¨‹</li>
</ul>

<ul>
<li><strong>æ•æ„Ÿä¿¡æ¯è¿‡æ»¤</strong>ï¼šè‡ªåŠ¨è¿‡æ»¤å¯†ç ç­‰æ•æ„Ÿå­—æ®µ</li>
</ul>
<h3 data-id="heading-2">1.2 æ—¥å¿—ç±»å‹</h3>
<h4 data-id="heading-3">1.2.1 æ“ä½œæ—¥å¿—ï¼ˆSysOperLogï¼‰</h4>
<p>è®°å½•ä¸šåŠ¡æ“ä½œï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>æ“ä½œæ¨¡å—ã€ä¸šåŠ¡ç±»å‹ã€æ“ä½œäººå‘˜</li>
</ul>

<ul>
<li>è¯·æ±‚URLã€IPã€åœ°ç‚¹</li>
</ul>

<ul>
<li>è¯·æ±‚å‚æ•°ã€è¿”å›ç»“æœ</li>
</ul>

<ul>
<li>æ“ä½œçŠ¶æ€ã€é”™è¯¯ä¿¡æ¯</li>
</ul>

<ul>
<li>æ‰§è¡Œæ—¶é—´ã€è€—æ—¶</li>
</ul>
<h4 data-id="heading-4">1.2.2 ç™»å½•æ—¥å¿—ï¼ˆSysLogininforï¼‰</h4>
<p>è®°å½•ç™»å½•ä¿¡æ¯ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>ç”¨æˆ·åã€ç™»å½•çŠ¶æ€</li>
</ul>

<ul>
<li>IPã€ç™»å½•åœ°ç‚¹</li>
</ul>

<ul>
<li>æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿ</li>
</ul>

<ul>
<li>ç™»å½•æ—¶é—´ã€æç¤ºæ¶ˆæ¯</li>
</ul>
<hr/>
<h2 data-id="heading-5">äºŒã€æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-6">2.1 æ•´ä½“æ¶æ„å›¾</h3>
<pre><code class="hljs language-java" lang="java">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Controllerå±‚Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
â”‚Â Â â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”Â Â Â â”‚
â”‚Â Â â”‚Â Â <span class="hljs-meta">@Log</span>æ³¨è§£æ ‡è®°éœ€è¦è®°å½•æ—¥å¿—çš„æ–¹æ³•Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â AOPåˆ‡é¢å±‚Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
â”‚Â Â â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”Â Â Â â”‚
â”‚Â Â â”‚Â Â LogAspectÂ (æ“ä½œæ—¥å¿—åˆ‡é¢)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â”‚Â Â -Â <span class="hljs-meta">@Before</span>:Â è®°å½•å¼€å§‹æ—¶é—´Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â”‚Â Â -Â <span class="hljs-meta">@AfterReturning</span>:Â æ­£å¸¸è¿”å›å¤„ç†Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â”‚Â Â -Â <span class="hljs-meta">@AfterThrowing</span>:Â å¼‚å¸¸å¤„ç†Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â   â”‚Â Â Â â”‚
â”‚Â Â â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å¼‚æ­¥ä»»åŠ¡ç®¡ç†å±‚Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
â”‚Â Â â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”Â Â Â â”‚
â”‚Â Â â”‚Â Â AsyncManagerÂ (å¼‚æ­¥ä»»åŠ¡ç®¡ç†å™¨)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â”‚Â Â -Â å•ä¾‹æ¨¡å¼Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â”‚Â Â -Â å»¶è¿Ÿ10msæ‰§è¡ŒÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Â Â Â â”‚
â”‚Â Â â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”Â Â Â â”‚
â”‚Â Â â”‚Â Â AsyncFactoryÂ (å¼‚æ­¥å·¥å‚)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â”‚Â Â -Â recordOper():Â åˆ›å»ºæ“ä½œæ—¥å¿—ä»»åŠ¡Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â”‚Â Â -Â recordLogininfor():Â åˆ›å»ºç™»å½•æ—¥å¿—ä»»åŠ¡Â Â Â Â Â Â Â Â Â Â  Â â”‚Â Â Â â”‚
â”‚Â Â â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â æ•°æ®æŒä¹…å±‚Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â”‚
â”‚Â Â â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”Â Â Â â”‚
â”‚Â Â â”‚Â Â Serviceå±‚Â â†’Â Mapperå±‚Â â†’Â æ•°æ®åº“Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  â”‚Â Â Â â”‚
â”‚Â Â â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-7">2.2Â æŠ€æœ¯æ ˆ</h3>
<ul>
<li><code>AOP</code>ï¼šAspectJ</li>
</ul>

<ul>
<li><code>å¼‚æ­¥å¤„ç†</code>ï¼šScheduledExecutorService</li>
</ul>

<ul>
<li><code>æ•°æ®æŒä¹…åŒ–</code>ï¼šMyBatis</li>
</ul>

<ul>
<li><code>JSONå¤„ç†</code>ï¼šFastJSON2</li>
</ul>

<ul>
<li><code>IPåœ°å€è§£æ</code>ï¼šAddressUtils</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒç»„ä»¶è¯¦è§£</h2>
<h3 data-id="heading-9">3.1 @Logæ³¨è§£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target({Â ElementType.PARAMETER,Â ElementType.METHODÂ })</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-meta">@interface</span>Â Log
{
Â Â Â Â <span class="hljs-comment">/**Â æ¨¡å—Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â StringÂ <span class="hljs-title function_">title</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-string">""</span>;

Â Â Â Â <span class="hljs-comment">/**Â åŠŸèƒ½Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â BusinessTypeÂ <span class="hljs-title function_">businessType</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">default</span>Â BusinessType.OTHER;

Â Â Â Â <span class="hljs-comment">/**Â æ“ä½œäººç±»åˆ«Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â OperatorTypeÂ <span class="hljs-title function_">operatorType</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">default</span>Â OperatorType.MANAGE;

Â Â Â Â <span class="hljs-comment">/**Â æ˜¯å¦ä¿å­˜è¯·æ±‚çš„å‚æ•°Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">boolean</span>Â <span class="hljs-title function_">isSaveRequestData</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-literal">true</span>;

Â Â Â Â <span class="hljs-comment">/**Â æ˜¯å¦ä¿å­˜å“åº”çš„å‚æ•°Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">boolean</span>Â <span class="hljs-title function_">isSaveResponseData</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-literal">true</span>;

Â Â Â Â <span class="hljs-comment">/**Â æ’é™¤æŒ‡å®šçš„è¯·æ±‚å‚æ•°Â */</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â String[]Â excludeParamNames()Â <span class="hljs-keyword">default</span>Â {};
}
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>title</code>ï¼šæ“ä½œæ¨¡å—åç§°</li>
</ul>

<ul>
<li><code>businessType</code>ï¼šä¸šåŠ¡ç±»å‹ï¼ˆINSERT/UPDATE/DELETE/QUERY/EXPORTç­‰ï¼‰</li>
</ul>

<ul>
<li><code>operatorType</code>ï¼šæ“ä½œäººç±»åˆ«ï¼ˆMANAGE/MOBILE/OTHERï¼‰</li>
</ul>

<ul>
<li><code>isSaveRequestData</code>ï¼šæ˜¯å¦ä¿å­˜è¯·æ±‚å‚æ•°</li>
</ul>

<ul>
<li><code>isSaveResponseData</code>ï¼šæ˜¯å¦ä¿å­˜å“åº”å‚æ•°</li>
</ul>

<ul>
<li><code>excludeParamNames</code>ï¼šæ’é™¤çš„å‚æ•°åï¼ˆå¦‚å¯†ç å­—æ®µï¼‰</li>
</ul>
<h3 data-id="heading-10">3.2 LogAspectï¼ˆæ“ä½œæ—¥å¿—åˆ‡é¢ï¼‰</h3>
<p>æ ¸å¿ƒç±»ï¼š<code>com.construct.framework.aspectj.LogAspect</code></p>
<h4 data-id="heading-11">3.2.1 å…³é”®å±æ€§</h4>
<p><code>LogAspect.java LinesÂ 54-58</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Before(valueÂ =Â "@annotation(controllerLog)")</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">boBefore</span><span class="hljs-params">(JoinPointÂ joinPoint,Â LogÂ controllerLog)</span>
{
Â Â Â Â TIME_THREADLOCAL.set(System.currentTimeMillis());
}
</code></pre>
<ul>
<li><code>EXCLUDE_PROPERTIES</code>ï¼šé»˜è®¤æ’é™¤çš„æ•æ„Ÿå­—æ®µï¼ˆpasswordã€oldPasswordç­‰ï¼‰</li>
<li><code>TIME_THREADLOCAL</code>ï¼šThreadLocalï¼Œè®°å½•æ–¹æ³•å¼€å§‹æ—¶é—´</li>
</ul>
<h4 data-id="heading-12">3.2.2 æ ¸å¿ƒæ–¹æ³•</h4>
<ol>
<li><code>boBefore()</code>ï¼šæ–¹æ³•æ‰§è¡Œå‰</li>
</ol>
<ul>
<li>è®°å½•å¼€å§‹æ—¶é—´åˆ°<code>ThreadLocal</code></li>
</ul>
<ol start="2">
<li><code>doAfterReturning()</code>ï¼šæ–¹æ³•æ­£å¸¸è¿”å›å</li>
</ol>
<ul>
<li>è°ƒç”¨<code>handleLog()</code>å¤„ç†æ—¥å¿—</li>
</ul>
<ol start="3">
<li><code>doAfterThrowing()</code>ï¼šæ–¹æ³•æŠ›å‡ºå¼‚å¸¸å</li>
</ol>
<ul>
<li>è°ƒç”¨<code>handleLog()</code>ï¼Œä¼ å…¥å¼‚å¸¸ä¿¡æ¯</li>
</ul>
<ol start="4">
<li><code>handleLog()</code>ï¼šç»Ÿä¸€æ—¥å¿—å¤„ç†</li>
</ol>
<p><code>LogAspect.java LinesÂ 83-130</code></p>
<pre><code class="hljs language-java" lang="java">   <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">handleLog</span><span class="hljs-params">(<span class="hljs-keyword">final</span>Â JoinPointÂ joinPoint,Â LogÂ controllerLog,Â <span class="hljs-keyword">final</span>Â ExceptionÂ e,Â ObjectÂ jsonResult)</span>{
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span> {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è·å–å½“å‰çš„ç”¨æˆ·</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-type">LoginUser</span>Â <span class="hljs-variable">loginUser</span>Â <span class="hljs-operator">=</span>Â SecurityUtils.getLoginUser();
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â *========æ•°æ®åº“æ—¥å¿—=========*//</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-type">SysOperLog</span>Â <span class="hljs-variable">operLog</span>Â <span class="hljs-operator">=</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">SysOperLog</span>();
Â Â Â Â Â Â Â Â Â Â Â Â operLog.setStatus(BusinessStatus.SUCCESS.ordinal());
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è¯·æ±‚çš„åœ°å€</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-type">String</span>Â <span class="hljs-variable">ip</span>Â <span class="hljs-operator">=</span>Â IpUtils.getIpAddr();
Â Â Â Â Â Â Â Â Â Â Â Â operLog.setOperIp(ip);
Â Â Â Â Â Â Â Â Â Â Â Â operLog.setOperUrl(StringUtils.substring(ServletUtils.getRequest().getRequestURI(),Â <span class="hljs-number">0</span>,Â <span class="hljs-number">255</span>));
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (loginUserÂ !=Â <span class="hljs-literal">null</span>)
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â operLog.setOperName(loginUser.getUser().getNickName());
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (eÂ !=Â <span class="hljs-literal">null</span>)
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â operLog.setStatus(BusinessStatus.FAIL.ordinal());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â operLog.setErrorMsg(StringUtils.substring(e.getMessage(),Â <span class="hljs-number">0</span>,Â <span class="hljs-number">2000</span>));
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è®¾ç½®æ–¹æ³•åç§°</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-type">String</span>Â <span class="hljs-variable">className</span>Â <span class="hljs-operator">=</span>Â joinPoint.getTarget().getClass().getName();
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-type">String</span>Â <span class="hljs-variable">methodName</span>Â <span class="hljs-operator">=</span>Â joinPoint.getSignature().getName();
Â Â Â Â Â Â Â Â Â Â Â Â operLog.setMethod(classNameÂ +Â <span class="hljs-string">"."</span>Â +Â methodNameÂ +Â <span class="hljs-string">"()"</span>);
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è®¾ç½®è¯·æ±‚æ–¹å¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â operLog.setRequestMethod(ServletUtils.getRequest().getMethod());
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¤„ç†è®¾ç½®æ³¨è§£ä¸Šçš„å‚æ•°</span>
Â Â Â Â Â Â Â Â Â Â Â Â getControllerMethodDescription(joinPoint,Â controllerLog,Â operLog,Â jsonResult);
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è®¾ç½®æ¶ˆè€—æ—¶é—´</span>
Â Â Â Â Â Â Â Â Â Â Â Â operLog.setCostTime(System.currentTimeMillis()Â -Â TIME_THREADLOCAL.get());
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä¿å­˜æ•°æ®åº“</span>
Â Â Â Â Â Â Â Â Â Â Â Â AsyncManager.me().execute(AsyncFactory.recordOper(operLog));
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">catch</span>Â (ExceptionÂ exp)
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è®°å½•æœ¬åœ°å¼‚å¸¸æ—¥å¿—</span>
Â Â Â Â Â Â Â Â Â Â Â Â log.error(<span class="hljs-string">"å¼‚å¸¸ä¿¡æ¯:{}"</span>,Â exp.getMessage());
Â Â Â Â Â Â Â Â Â Â Â Â exp.printStackTrace();
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">finally</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â TIME_THREADLOCAL.remove();
Â Â Â Â Â    }
    }
</code></pre>
<p>å¤„ç†æµç¨‹ï¼š</p>
<p>(1)  è·å–å½“å‰ç™»å½•ç”¨æˆ·</p>

<p>(2) åˆ›å»ºSysOperLogå¯¹è±¡</p>

<p>(3) è®¾ç½®IPã€URLã€æ“ä½œäºº</p>

<p>(4) å¤„ç†å¼‚å¸¸ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰</p>

<p>(5) è®¾ç½®æ–¹æ³•åã€è¯·æ±‚æ–¹å¼</p>

<p>(6) è§£ææ³¨è§£å‚æ•°</p>

<p>(7) è®¡ç®—è€—æ—¶</p>

<p>(8) å¼‚æ­¥ä¿å­˜æ—¥å¿—</p>

<ol start="5">
<li><code>getControllerMethodDescription()</code>ï¼šè§£ææ³¨è§£å‚æ•°</li>
</ol>
<p><code>LogAspect.java inesÂ 139-158</code></p>
<pre><code class="hljs language-java" lang="java">Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">getControllerMethodDescription</span><span class="hljs-params">(JoinPointÂ joinPoint,Â LogÂ log,Â SysOperLogÂ operLog,Â ObjectÂ jsonResult)</span>Â <span class="hljs-keyword">throws</span>Â Exception
Â Â Â Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è®¾ç½®actionåŠ¨ä½œ</span>
Â Â Â Â Â Â Â Â operLog.setBusinessType(log.businessType().ordinal());
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è®¾ç½®æ ‡é¢˜</span>
Â Â Â Â Â Â Â Â operLog.setTitle(log.title());
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è®¾ç½®æ“ä½œäººç±»åˆ«</span>
Â Â Â Â Â Â Â Â operLog.setOperatorType(log.operatorType().ordinal());
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ˜¯å¦éœ€è¦ä¿å­˜requestï¼Œå‚æ•°å’Œå€¼</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (log.isSaveRequestData())
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è·å–å‚æ•°çš„ä¿¡æ¯ï¼Œä¼ å…¥åˆ°æ•°æ®åº“ä¸­ã€‚</span>
Â Â Â Â Â Â Â Â Â Â Â Â setRequestValue(joinPoint,Â operLog,Â log.excludeParamNames());
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ˜¯å¦éœ€è¦ä¿å­˜responseï¼Œå‚æ•°å’Œå€¼</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (log.isSaveResponseData()Â &amp;&amp;Â StringUtils.isNotNull(jsonResult))
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â operLog.setJsonResult(StringUtils.substring(JSON.toJSONString(jsonResult),Â <span class="hljs-number">0</span>,Â <span class="hljs-number">2000</span>));
Â Â Â Â Â Â Â Â }
Â Â Â Â }
</code></pre>
<ol start="6">
<li><code>setRequestValue()</code>ï¼šè·å–å¹¶å¤„ç†è¯·æ±‚å‚æ•°</li>
</ol>
<p><code>LogAspect.java LinesÂ 166-180</code></p>
<pre><code class="hljs language-java" lang="java">Â Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setRequestValue</span><span class="hljs-params">(JoinPoint joinPoint, SysOperLog operLog, String[] excludeParamNames)</span> <span class="hljs-keyword">throws</span> Exception
   {
        Map&lt;?, ?&gt; paramsMap = ServletUtils.getParamMap(ServletUtils.getRequest());
        <span class="hljs-type">String</span> <span class="hljs-variable">requestMethod</span> <span class="hljs-operator">=</span> operLog.getRequestMethod();
        <span class="hljs-keyword">if</span> (StringUtils.isEmpty(paramsMap)
                &amp;&amp; (HttpMethod.PUT.name().equals(requestMethod) || HttpMethod.POST.name().equals(requestMethod)))
        {
            <span class="hljs-type">String</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> argsArrayToString(joinPoint.getArgs(), excludeParamNames);
            operLog.setOperParam(StringUtils.substring(params, <span class="hljs-number">0</span>, <span class="hljs-number">2000</span>));
        }
        <span class="hljs-keyword">else</span>
        {
            operLog.setOperParam(StringUtils.substring(JSON.toJSONString(paramsMap, excludePropertyPreFilter(excludeParamNames)), <span class="hljs-number">0</span>, <span class="hljs-number">2000</span>));
        }
    }
</code></pre>
<ol start="7">
<li><code>isFilterObject()</code>ï¼šè¿‡æ»¤ä¸éœ€è¦è®°å½•çš„å¯¹è±¡</li>
</ol>
<p><code>LogAspect.java LinesÂ 222-249</code></p>
<pre><code class="hljs language-java" lang="java">Â Â Â Â     <span class="hljs-meta">@SuppressWarnings("rawtypes")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFilterObject</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Object o)</span>
    {
        Class&lt;?&gt; clazz = o.getClass();
        <span class="hljs-keyword">if</span> (clazz.isArray())
        {
            <span class="hljs-keyword">return</span> clazz.getComponentType().isAssignableFrom(MultipartFile.class);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Collection.class.isAssignableFrom(clazz))
        {
            <span class="hljs-type">Collection</span> <span class="hljs-variable">collection</span> <span class="hljs-operator">=</span> (Collection) o;
            <span class="hljs-keyword">for</span> (Object value : collection)
            {
                <span class="hljs-keyword">return</span> value <span class="hljs-keyword">instanceof</span> MultipartFile;
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Map.class.isAssignableFrom(clazz))
        {
            <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> (Map) o;
            <span class="hljs-keyword">for</span> (Object value : map.entrySet())
            {
                Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> (Map.Entry) value;
                <span class="hljs-keyword">return</span> entry.getValue() <span class="hljs-keyword">instanceof</span> MultipartFile;
            }
        }
        <span class="hljs-keyword">return</span> o <span class="hljs-keyword">instanceof</span> MultipartFile || o <span class="hljs-keyword">instanceof</span> HttpServletRequest || o <span class="hljs-keyword">instanceof</span> HttpServletResponse
                || o <span class="hljs-keyword">instanceof</span> BindingResult;
    }
</code></pre>
<p>è¿‡æ»¤å¯¹è±¡ï¼š</p>
<ul>
<li><code>MultipartFile</code>ï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰</li>
</ul>

<ul>
<li><code>HttpServletRequest</code>ã€<code>HttpServletResponse</code></li>
</ul>

<ul>
<li><code>BindingResult</code>ï¼ˆå‚æ•°æ ¡éªŒç»“æœï¼‰</li>
</ul>
<h3 data-id="heading-13">3.3 AsyncManagerï¼ˆå¼‚æ­¥ä»»åŠ¡ç®¡ç†å™¨ï¼‰</h3>
<p><code>AsyncManager.java LinesÂ 15-56</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncManager</span>
{
    <span class="hljs-comment">/**
     * æ“ä½œå»¶è¿Ÿ10æ¯«ç§’
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">OPERATE_DELAY_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;

    <span class="hljs-comment">/**
     * å¼‚æ­¥æ“ä½œä»»åŠ¡è°ƒåº¦çº¿ç¨‹æ± 
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">ScheduledExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> SpringUtils.getBean(<span class="hljs-string">"scheduledExecutorService"</span>);

    <span class="hljs-comment">/**
     * å•ä¾‹æ¨¡å¼
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">AsyncManager</span><span class="hljs-params">()</span>{}

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">AsyncManager</span> <span class="hljs-variable">me</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncManager</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AsyncManager <span class="hljs-title function_">me</span><span class="hljs-params">()</span>
    {
        <span class="hljs-keyword">return</span> me;
    }

    <span class="hljs-comment">/**
     * æ‰§è¡Œä»»åŠ¡
     * 
     * <span class="hljs-doctag">@param</span> task ä»»åŠ¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(TimerTask task)</span>
    {
        executor.schedule(task, OPERATE_DELAY_TIME, TimeUnit.MILLISECONDS);
    }

    <span class="hljs-comment">/**
     * åœæ­¢ä»»åŠ¡çº¿ç¨‹æ± 
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span>
    {
        Threads.shutdownAndAwaitTermination(executor);
    }
}
</code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å•ä¾‹æ¨¡å¼</li>
</ul>

<ul>
<li>å»¶è¿Ÿ<code>10ms</code>æ‰§è¡Œï¼Œé¿å…å½±å“ä¸»æµç¨‹</li>
</ul>

<ul>
<li>ä½¿ç”¨<code>ScheduledExecutorService</code>æ‰§è¡Œä»»åŠ¡</li>
</ul>
<h3 data-id="heading-14">3.4 AsyncFactoryï¼ˆå¼‚æ­¥å·¥å‚ï¼‰</h3>
<p><code>AsyncFactory.java LinesÂ 99-111</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> TimerTask <span class="hljs-title function_">recordOper</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SysOperLog operLog)</span>
{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TimerTask</span>()
    {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span>
        {
            <span class="hljs-comment">// è¿œç¨‹æŸ¥è¯¢æ“ä½œåœ°ç‚¹</span>
            operLog.setOperLocation(AddressUtils.getRealAddressByIP(operLog.getOperIp()));
            SpringUtils.getBean(ISysOperLogService.class).insertOperlog(operLog);
        }
    };
}
</code></pre>
<p>åŠŸèƒ½ï¼š</p>
<ul>
<li><code>recordOper()</code>ï¼šåˆ›å»ºæ“ä½œæ—¥å¿—ä»»åŠ¡
<ul>
<li>æ ¹æ®IPæŸ¥è¯¢æ“ä½œåœ°ç‚¹</li>
<li>è°ƒç”¨<code>Service</code>ä¿å­˜æ—¥å¿—</li>
</ul>
</li>
</ul>

<ul>
<li><code>recordLogininfor()</code>ï¼šåˆ›å»ºç™»å½•æ—¥å¿—ä»»åŠ¡
<ul>
<li>è§£æ<code>User-Agent</code>è·å–æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿ</li>
<li>æ ¹æ®IPæŸ¥è¯¢ç™»å½•åœ°ç‚¹</li>
<li>ä¿å­˜ç™»å½•æ—¥å¿—</li>
</ul>
</li>
</ul>
<h3 data-id="heading-15">3.5 çº¿ç¨‹æ± é…ç½®</h3>
<p><code>ThreadPoolConfig.java LinesÂ 45-62</code></p>
<pre><code class="hljs language-java" lang="java">Â Â Â Â <span class="hljs-comment">/**
Â Â Â Â Â *Â æ‰§è¡Œå‘¨æœŸæ€§æˆ–å®šæ—¶ä»»åŠ¡
Â Â Â Â Â */</span>
Â Â Â Â <span class="hljs-meta">@Bean(nameÂ =Â "scheduledExecutorService")</span>
Â Â Â Â <span class="hljs-keyword">protected</span>Â ScheduledExecutorServiceÂ <span class="hljs-title function_">scheduledExecutorService</span><span class="hljs-params">()</span>
Â Â Â Â {
Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ScheduledThreadPoolExecutor</span>(corePoolSize,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">BasicThreadFactory</span>.Builder().namingPattern(<span class="hljs-string">"schedule-pool-%d"</span>).daemon(<span class="hljs-literal">true</span>).build(),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy())
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">@Override</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">afterExecute</span><span class="hljs-params">(RunnableÂ r,Â ThrowableÂ t)</span>
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">super</span>.afterExecute(r,Â t);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Threads.printException(r,Â t);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â };
Â Â Â Â }
</code></pre>
<p>é…ç½®å‚æ•°ï¼š</p>
<ul>
<li>æ ¸å¿ƒçº¿ç¨‹æ•°ï¼š50</li>
<li>æœ€å¤§çº¿ç¨‹æ•°ï¼š200</li>
<li>é˜Ÿåˆ—å®¹é‡ï¼š1000</li>
<li>çº¿ç¨‹å‘½åï¼š<code>schedule-pool-%d</code></li>
<li>å®ˆæŠ¤çº¿ç¨‹ï¼šæ˜¯</li>
<li>æ‹’ç»ç­–ç•¥ï¼š<code>CallerRunsPolicy</code></li>
</ul>
<h3 data-id="heading-16">3.6 å®ä½“ç±»</h3>
<h4 data-id="heading-17">3.6.1 SysOperLogï¼ˆæ“ä½œæ—¥å¿—å®ä½“ï¼‰</h4>
<p>ä¸»è¦å­—æ®µï¼š</p>
<ul>
<li><code>operId</code>ï¼šæ—¥å¿—ä¸»é”®</li>
<li><code>title</code>ï¼šæ“ä½œæ¨¡å—</li>
<li><code>businessType</code>ï¼šä¸šåŠ¡ç±»å‹ï¼ˆ0å…¶å®ƒ 1æ–°å¢ 2ä¿®æ”¹ 3åˆ é™¤ç­‰ï¼‰</li>
<li><code>method</code>ï¼šè¯·æ±‚æ–¹æ³•ï¼ˆç±»å.æ–¹æ³•åï¼‰</li>
<li><code>requestMethod</code>ï¼šè¯·æ±‚æ–¹å¼ï¼ˆGET/POSTç­‰ï¼‰</li>
<li><code>operatorType</code>ï¼šæ“ä½œç±»åˆ«ï¼ˆ0å…¶å®ƒ 1åå°ç”¨æˆ·Â 2æ‰‹æœºç«¯ç”¨æˆ·ï¼‰</li>
<li><code>operName</code>ï¼šæ“ä½œäººå‘˜</li>
<li><code>operUrl</code>ï¼šè¯·æ±‚URL</li>
<li><code>operIp</code>ï¼šæ“ä½œIP</li>
<li><code>operLocation</code>ï¼šæ“ä½œåœ°ç‚¹</li>
<li><code>operParam</code>ï¼šè¯·æ±‚å‚æ•°ï¼ˆJSONï¼Œæœ€å¤§2000å­—ç¬¦ï¼‰</li>
<li><code>jsonResult</code>ï¼šè¿”å›å‚æ•°ï¼ˆJSONï¼Œæœ€å¤§2000å­—ç¬¦ï¼‰</li>
<li><code>status</code>ï¼šæ“ä½œçŠ¶æ€ï¼ˆ0æ­£å¸¸ 1å¼‚å¸¸ï¼‰</li>
<li><code>errorMsg</code>ï¼šé”™è¯¯æ¶ˆæ¯ï¼ˆæœ€å¤§2000å­—ç¬¦ï¼‰</li>
<li><code>operTime</code>ï¼šæ“ä½œæ—¶é—´</li>
<li><code>costTime</code>ï¼šæ¶ˆè€—æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-18">å››ã€å®ç°æµç¨‹</h2>
<h3 data-id="heading-19">4.1 æ“ä½œæ—¥å¿—è®°å½•æµç¨‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">1.</span>Â Controlleræ–¹æ³•æ‰§è¡Œ
Â Â Â â†“
<span class="hljs-number">2.</span>Â <span class="hljs-meta">@Log</span>æ³¨è§£è§¦å‘AOPåˆ‡é¢
Â Â Â â†“
<span class="hljs-number">3.</span>Â LogAspect.boBefore()
Â Â Â -Â è®°å½•å¼€å§‹æ—¶é—´åˆ°ThreadLocal
Â Â Â â†“
<span class="hljs-number">4.</span>Â ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œ
Â Â Â â†“
<span class="hljs-number">5.</span>Â LogAspect.doAfterReturning()Â æˆ–Â doAfterThrowing()
Â Â Â â†“
<span class="hljs-number">6.</span>Â LogAspect.handleLog()
Â Â Â -Â è·å–ç”¨æˆ·ä¿¡æ¯
Â Â Â -Â åˆ›å»ºSysOperLogå¯¹è±¡
Â Â Â -Â è®¾ç½®åŸºæœ¬ä¿¡æ¯ï¼ˆIPã€URLã€æ–¹æ³•åç­‰ï¼‰
Â Â Â -Â è§£æ<span class="hljs-meta">@Log</span>æ³¨è§£å‚æ•°
Â Â Â -Â å¤„ç†è¯·æ±‚å‚æ•°å’Œå“åº”ç»“æœ
Â Â Â -Â è®¡ç®—æ‰§è¡Œè€—æ—¶
Â Â Â â†“
<span class="hljs-number">7.</span>Â AsyncManager.execute()
Â Â Â -Â å»¶è¿Ÿ10msæ‰§è¡Œ
Â Â Â â†“
<span class="hljs-number">8.</span>Â AsyncFactory.recordOper()
Â Â Â -Â æ ¹æ®IPæŸ¥è¯¢æ“ä½œåœ°ç‚¹
Â Â Â -Â è°ƒç”¨Serviceä¿å­˜æ—¥å¿—
Â Â Â â†“
<span class="hljs-number">9.</span>Â SysOperLogService.insertOperlog()
Â Â Â -Â ä¿å­˜åˆ°æ•°æ®åº“
</code></pre>
<h3 data-id="heading-20">4.2 ç™»å½•æ—¥å¿—è®°å½•æµç¨‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">1.</span>Â ç”¨æˆ·ç™»å½•/ç™»å‡º
Â Â Â â†“
<span class="hljs-number">2.</span>Â è°ƒç”¨AsyncManager.execute(AsyncFactory.recordLogininfor(...))
Â Â Â â†“
<span class="hljs-number">3.</span>Â AsyncFactory.recordLogininfor()
Â Â Â -Â è§£æUser-Agentè·å–æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿ
Â Â Â -Â è·å–IPåœ°å€
Â Â Â -Â æ ¹æ®IPæŸ¥è¯¢ç™»å½•åœ°ç‚¹
Â Â Â -Â åˆ›å»ºSysLogininforå¯¹è±¡
Â Â Â â†“
<span class="hljs-number">4.</span>Â SysLogininforService.insertLogininfor()
Â Â Â -Â ä¿å­˜åˆ°æ•°æ®åº“
</code></pre>
<h3 data-id="heading-21">4.3 å‚æ•°å¤„ç†æµç¨‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">1.</span>Â æ£€æŸ¥æ˜¯å¦éœ€è¦ä¿å­˜è¯·æ±‚å‚æ•°ï¼ˆisSaveRequestDataï¼‰
Â Â Â â†“
<span class="hljs-number">2.</span>Â è·å–è¯·æ±‚å‚æ•°
Â Â Â -Â GETè¯·æ±‚ï¼šä»request.getParameterMap()è·å–
Â Â Â -Â POST/PUTè¯·æ±‚ï¼šä»æ–¹æ³•å‚æ•°è·å–
Â Â Â â†“
<span class="hljs-number">3.</span>Â è¿‡æ»¤æ•æ„Ÿå­—æ®µ
Â Â Â -Â é»˜è®¤è¿‡æ»¤ï¼špasswordã€oldPasswordã€newPasswordã€confirmPassword
Â Â Â -Â æ³¨è§£æŒ‡å®šè¿‡æ»¤ï¼šexcludeParamNames
Â Â Â â†“
<span class="hljs-number">4.</span>Â è¿‡æ»¤ä¸éœ€è¦çš„å¯¹è±¡
Â Â Â -Â MultipartFileã€HttpServletRequestã€HttpServletResponseã€BindingResult
Â Â Â â†“
<span class="hljs-number">5.</span>Â è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼ˆæœ€å¤§<span class="hljs-number">2000</span>å­—ç¬¦ï¼‰
Â Â Â â†“
<span class="hljs-number">6.</span>Â ä¿å­˜åˆ°operParamå­—æ®µ
</code></pre>
<hr/>
<h2 data-id="heading-22">äº”ã€ä½¿ç”¨æŒ‡å—</h2>
<h3 data-id="heading-23">5.1 åŸºæœ¬ä½¿ç”¨</h3>
<p>åœ¨Controlleræ–¹æ³•ä¸Šæ·»åŠ <code>@Log</code>æ³¨è§£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/system/user")</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">SysUserController</span>Â {

Â Â Â Â <span class="hljs-meta">@Log(titleÂ =Â "ç”¨æˆ·ç®¡ç†",Â businessTypeÂ =Â BusinessType.INSERT)</span>
Â Â Â Â <span class="hljs-meta">@PostMapping</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â AjaxResultÂ <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span>Â SysUserÂ user)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä¸šåŠ¡é€»è¾‘</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â AjaxResult.success();
Â Â Â Â }

Â Â Â Â <span class="hljs-meta">@Log(titleÂ =Â "ç”¨æˆ·ç®¡ç†",Â businessTypeÂ =Â BusinessType.UPDATE)</span>
Â Â Â Â <span class="hljs-meta">@PutMapping</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â AjaxResultÂ <span class="hljs-title function_">edit</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span>Â SysUserÂ user)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä¸šåŠ¡é€»è¾‘</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â AjaxResult.success();
Â Â Â Â }

Â Â Â Â <span class="hljs-meta">@Log(titleÂ =Â "ç”¨æˆ·ç®¡ç†",Â businessTypeÂ =Â BusinessType.DELETE)</span>
Â Â Â Â <span class="hljs-meta">@DeleteMapping("/{userIds}")</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â AjaxResultÂ <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span>Â Long[]Â userIds)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä¸šåŠ¡é€»è¾‘</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â AjaxResult.success();
Â Â Â Â }

Â Â Â Â <span class="hljs-meta">@Log(titleÂ =Â "ç”¨æˆ·ç®¡ç†",Â businessTypeÂ =Â BusinessType.QUERY)</span>
Â Â Â Â <span class="hljs-meta">@GetMapping("/list")</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â TableDataInfoÂ <span class="hljs-title function_">list</span><span class="hljs-params">(SysUserÂ user)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä¸šåŠ¡é€»è¾‘</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â getDataTable(list);
Â Â Â Â }
}
</code></pre>
<h3 data-id="heading-24">5.2 é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-25">5.2.1 æ’é™¤æ•æ„Ÿå‚æ•°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Log(
Â Â Â Â titleÂ =Â "ç”¨æˆ·ç®¡ç†",Â 
Â Â Â Â businessTypeÂ =Â BusinessType.UPDATE,
Â Â Â Â excludeParamNamesÂ =Â {"password",Â "secretKey"}
)</span>
<span class="hljs-meta">@PutMapping</span>
<span class="hljs-keyword">public</span>Â AjaxResultÂ <span class="hljs-title function_">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span>Â SysUserÂ user)</span>Â {
Â Â Â Â <span class="hljs-comment">//Â ä¸šåŠ¡é€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-26">5.2.2 ä¸ä¿å­˜è¯·æ±‚å‚æ•°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Log(
Â Â Â Â titleÂ =Â "ç”¨æˆ·ç®¡ç†",Â 
Â Â Â Â businessTypeÂ =Â BusinessType.QUERY,
Â Â Â Â isSaveRequestDataÂ =Â false
)</span>
<span class="hljs-meta">@GetMapping("/list")</span>
<span class="hljs-keyword">public</span>Â TableDataInfoÂ <span class="hljs-title function_">list</span><span class="hljs-params">(SysUserÂ user)</span>Â {
Â Â Â Â <span class="hljs-comment">//Â ä¸šåŠ¡é€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-27">5.2.3 ä¸ä¿å­˜å“åº”ç»“æœ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Log(
Â Â Â Â titleÂ =Â "ç”¨æˆ·ç®¡ç†",Â 
Â Â Â Â businessTypeÂ =Â BusinessType.QUERY,
Â Â Â Â isSaveResponseDataÂ =Â false
)</span>
<span class="hljs-meta">@GetMapping("/list")</span>
<span class="hljs-keyword">public</span>Â TableDataInfoÂ <span class="hljs-title function_">list</span><span class="hljs-params">(SysUserÂ user)</span>Â {
Â Â Â Â <span class="hljs-comment">//Â ä¸šåŠ¡é€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-28">5.2.4 æŒ‡å®šæ“ä½œäººç±»åˆ«</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Log(
Â Â Â Â titleÂ =Â "ç§»åŠ¨ç«¯ç”¨æˆ·ç®¡ç†",Â 
Â Â Â Â businessTypeÂ =Â BusinessType.INSERT,
Â Â Â Â operatorTypeÂ =Â OperatorType.MOBILE
)</span>
<span class="hljs-meta">@PostMapping</span>
<span class="hljs-keyword">public</span>Â AjaxResultÂ <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span>Â SysUserÂ user)</span>Â {
Â Â Â Â <span class="hljs-comment">//Â ä¸šåŠ¡é€»è¾‘</span>
}
</code></pre>
<h3 data-id="heading-29">5.3 ä¸šåŠ¡ç±»å‹æšä¸¾</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">enum</span>Â <span class="hljs-title class_">BusinessType</span>Â {
Â Â Â Â OTHER,Â Â Â Â Â Â <span class="hljs-comment">//Â å…¶å®ƒ</span>
Â Â Â Â INSERT,Â Â Â Â Â <span class="hljs-comment">//Â æ–°å¢</span>
Â Â Â Â UPDATE,Â Â Â Â Â <span class="hljs-comment">//Â ä¿®æ”¹</span>
Â Â Â Â DELETE,Â Â Â Â Â <span class="hljs-comment">//Â åˆ é™¤</span>
Â Â Â Â GRANT,Â Â Â Â Â Â <span class="hljs-comment">//Â æˆæƒ</span>
Â Â Â Â EXPORT,Â Â Â Â Â <span class="hljs-comment">//Â å¯¼å‡º</span>
Â Â Â Â IMPORT,Â Â Â Â Â <span class="hljs-comment">//Â å¯¼å…¥</span>
Â Â Â Â FORCE,Â Â Â Â Â Â <span class="hljs-comment">//Â å¼ºé€€</span>
Â Â Â Â GENCODE,Â Â Â Â <span class="hljs-comment">//Â ç”Ÿæˆä»£ç </span>
Â Â Â Â CLEAN,Â Â Â Â Â Â <span class="hljs-comment">//Â æ¸…ç©ºæ•°æ®</span>
Â Â Â Â QUERYÂ Â Â Â Â Â Â <span class="hljs-comment">//Â æŸ¥è¯¢</span>
}
</code></pre>
<h3 data-id="heading-30">5.4 æ“ä½œäººç±»åˆ«æšä¸¾</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">enum</span>Â <span class="hljs-title class_">OperatorType</span>Â {
Â Â Â Â OTHER,Â Â Â Â Â Â <span class="hljs-comment">//Â å…¶å®ƒ</span>
Â Â Â Â MANAGE,Â Â Â Â Â <span class="hljs-comment">//Â åå°ç”¨æˆ·</span>
Â Â Â Â MOBILEÂ Â Â Â Â Â <span class="hljs-comment">//Â æ‰‹æœºç«¯ç”¨æˆ·</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-31">å…­ã€æŠ€æœ¯è¦ç‚¹</h2>
<h3 data-id="heading-32">6.1 AOPåˆ‡é¢æŠ€æœ¯</h3>
<ul>
<li>ä½¿ç”¨<code>@Aspect</code>å’Œ<code>@Component</code>å£°æ˜åˆ‡é¢</li>
<li>ä½¿ç”¨<code>@Before</code>ã€<code>@AfterReturning</code>ã€<code>@AfterThrowing</code>å®šä¹‰åˆ‡ç‚¹</li>
<li>åˆ‡ç‚¹è¡¨è¾¾å¼ï¼š<code>@annotation(controllerLog)</code>ï¼Œæ‹¦æˆªå¸¦<code>@Log</code>æ³¨è§£çš„æ–¹æ³•</li>
</ul>
<h3 data-id="heading-33">6.2 ThreadLocalä½¿ç”¨</h3>
<ul>
<li>ä½¿ç”¨<code>NamedThreadLocal</code>è®°å½•æ–¹æ³•å¼€å§‹æ—¶é—´</li>
<li>çº¿ç¨‹å®‰å…¨ï¼Œé¿å…å¹¶å‘é—®é¢˜</li>
<li>åœ¨<code>finally</code>ä¸­æ¸…ç†ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</li>
</ul>
<h3 data-id="heading-34">6.3 å¼‚æ­¥å¤„ç†</h3>
<ul>
<li>ä½¿ç”¨<code>ScheduledExecutorService</code>å®ç°å¼‚æ­¥</li>
<li>å»¶è¿Ÿ<code>10ms</code>æ‰§è¡Œï¼Œä¸é˜»å¡ä¸»æµç¨‹</li>
<li>å•ä¾‹æ¨¡å¼ç®¡ç†å¼‚æ­¥ä»»åŠ¡</li>
</ul>
<h3 data-id="heading-35">6.4 æ•æ„Ÿä¿¡æ¯è¿‡æ»¤</h3>
<ul>
<li>é»˜è®¤è¿‡æ»¤å¯†ç ç›¸å…³å­—æ®µ</li>
<li>æ”¯æŒæ³¨è§£æŒ‡å®šè¿‡æ»¤å­—æ®µ</li>
<li>ä½¿ç”¨<code>PropertyPreExcludeFilter</code>å®ç°JSONåºåˆ—åŒ–è¿‡æ»¤</li>
</ul>
<h3 data-id="heading-36">6.5 IPåœ°å€è§£æ</h3>
<ul>
<li>ä½¿ç”¨<code>IpUtils.getIpAddr()</code>è·å–çœŸå®IP</li>
<li>ä½¿ç”¨<code>AddressUtils.getRealAddressByIP()</code>æŸ¥è¯¢åœ°ç†ä½ç½®</li>
<li>æ”¯æŒä»£ç†æœåŠ¡å™¨åœºæ™¯</li>
</ul>
<h3 data-id="heading-37">6.6 å‚æ•°é•¿åº¦é™åˆ¶</h3>
<ul>
<li>è¯·æ±‚å‚æ•°ï¼šæœ€å¤§2000å­—ç¬¦</li>
<li>å“åº”ç»“æœï¼šæœ€å¤§2000å­—ç¬¦</li>
<li>é”™è¯¯æ¶ˆæ¯ï¼šæœ€å¤§2000å­—ç¬¦</li>
<li>ä½¿ç”¨<code>StringUtils.substring()</code>æˆªæ–­</li>
</ul>
<h3 data-id="heading-38">6.7 å¼‚å¸¸å¤„ç†</h3>
<ul>
<li>åˆ‡é¢æ•è·å¼‚å¸¸ï¼Œä¸å½±å“ä¸šåŠ¡</li>
<li>è®°å½•å¼‚å¸¸ä¿¡æ¯åˆ°æ—¥å¿—</li>
<li>å¼‚å¸¸æ—¶è®¾ç½®<code>status</code>ä¸º<code>FAIL</code>ï¼Œè®°å½•<code>errorMsg</code></li>
</ul>
<hr/>
<h2 data-id="heading-39">ä¸ƒã€æ‰©å±•è¯´æ˜</h2>
<h3 data-id="heading-40">7.1Â ControllerLogsAspectï¼ˆè°ƒè¯•æ—¥å¿—åˆ‡é¢ï¼‰</h3>
<p>é™¤äº†<code>LogAspect</code>ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>ControllerLogsAspect</code>ç”¨äºå¼€å‘è°ƒè¯•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Order(1)</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ControllerLogsAspect</span>Â {

Â Â Â Â <span class="hljs-meta">@Pointcut("execution(publicÂ *Â com.construct.*.controller..*.*(..))")</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">pointCut</span><span class="hljs-params">()</span>Â {}

Â Â Â Â <span class="hljs-meta">@Before("pointCut()")</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">doBeforeInServiceLayer</span><span class="hljs-params">(JoinPointÂ joinPoint)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è®°å½•å¼€å§‹æ—¶é—´</span>
Â Â Â Â }

Â Â Â Â <span class="hljs-meta">@AfterReturning(pointcutÂ =Â "pointCut()",Â returningÂ =Â "returnValue")</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">log</span><span class="hljs-params">(JoinPointÂ joinPoint,Â ObjectÂ returnValue)</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ‰“å°è°ƒè¯•æ—¥å¿—</span>
Â Â Â Â }
}
</code></pre>
<p>åŠŸèƒ½ï¼š</p>
<ul>
<li>æ‹¦æˆªæ‰€æœ‰<code>Controller</code>æ–¹æ³•</li>
<li>è®°å½•è¯·æ±‚URLã€å‚æ•°ã€å“åº”ç»“æœã€å¤„ç†æ—¶é—´</li>
<li>ä»…éç”Ÿäº§ç¯å¢ƒè¾“å‡ºæ—¥å¿—</li>
<li>æ’é™¤é™æ€èµ„æºè¯·æ±‚</li>
</ul>
<h3 data-id="heading-41">7.2 ä¸šåŠ¡æ—¥å¿—æ‰©å±•</h3>
<p>ç³»ç»Ÿè¿˜æä¾›äº†ä¸šåŠ¡æ—¥å¿—æ‰©å±•ï¼ˆå¦‚<code>PubOperateLog</code>ã€<code>DmsOperateLog</code>ï¼‰ï¼Œç”¨äºè®°å½•ä¸šåŠ¡æ•°æ®å˜æ›´ï¼šç‰¹ç‚¹ï¼š</p>
<ul>
<li>è®°å½•å­—æ®µçº§åˆ«çš„å˜æ›´ï¼ˆä¿®æ”¹å‰/ä¿®æ”¹åï¼‰</li>
<li>æ”¯æŒä¸šåŠ¡IDå…³è”</li>
<li>æ”¯æŒæ“ä½œç±»å‹ï¼ˆåˆ›å»º/ç¼–è¾‘ï¼‰</li>
<li>æ”¯æŒæ“ä½œè¯¦æƒ…è®°å½•</li>
</ul>
<h3 data-id="heading-42">7.3 æ—¥å¿—æŸ¥è¯¢å’Œç®¡ç†</h3>
<p>ç³»ç»Ÿæä¾›äº†æ—¥å¿—æŸ¥è¯¢å’Œç®¡ç†åŠŸèƒ½ï¼š</p>
<ul>
<li>æ“ä½œæ—¥å¿—æŸ¥è¯¢ï¼š<code>/monitor/operlog/list</code></li>
<li>ç™»å½•æ—¥å¿—æŸ¥è¯¢ï¼š<code>/monitor/logininfor/list</code></li>
<li>æ—¥å¿—å¯¼å‡ºï¼šæ”¯æŒExcelå¯¼å‡º</li>
<li>æ—¥å¿—åˆ é™¤ï¼šæ”¯æŒæ‰¹é‡åˆ é™¤å’Œæ¸…ç©º</li>
</ul>
<hr/>
<h2 data-id="heading-43">å…«ã€æ€»ç»“</h2>
<h3 data-id="heading-44">8.1 è®¾è®¡ä¼˜åŠ¿</h3>
<ol>
<li>éä¾µå…¥ï¼šé€šè¿‡æ³¨è§£å®ç°ï¼Œä¸å½±å“ä¸šåŠ¡ä»£ç </li>
<li>å¼‚æ­¥å¤„ç†ï¼šæ—¥å¿—å†™å…¥ä¸é˜»å¡ä¸»æµç¨‹</li>
<li>çµæ´»é…ç½®ï¼šæ”¯æŒå¤šç§é…ç½®é€‰é¡¹</li>
<li>å®‰å…¨è¿‡æ»¤ï¼šè‡ªåŠ¨è¿‡æ»¤æ•æ„Ÿä¿¡æ¯</li>
<li>å¼‚å¸¸å¤„ç†ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šå»¶è¿Ÿæ‰§è¡Œã€çº¿ç¨‹æ± ç®¡ç†</li>
</ol>
<h3 data-id="heading-45">8.2 é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>æ“ä½œå®¡è®¡ï¼šè®°å½•ç”¨æˆ·æ“ä½œ</li>
<li>é—®é¢˜æ’æŸ¥ï¼šé€šè¿‡æ—¥å¿—å®šä½é—®é¢˜</li>
<li>æ€§èƒ½ç›‘æ§ï¼šè®°å½•æ–¹æ³•æ‰§è¡Œæ—¶é—´</li>
<li>å®‰å…¨å®¡è®¡ï¼šè®°å½•ç™»å½•å’Œæ“ä½œä¿¡æ¯</li>
</ul>
<h3 data-id="heading-46">8.3 æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>æ—¥å¿—è¡¨ä¼šæŒç»­å¢é•¿ï¼Œéœ€è¦å®šæœŸæ¸…ç†</li>
<li>å¼‚æ­¥æ‰§è¡Œå¯èƒ½ä¸¢å¤±æ—¥å¿—ï¼ˆæç«¯æƒ…å†µï¼‰</li>
<li>å‚æ•°é•¿åº¦é™åˆ¶å¯èƒ½æˆªæ–­é‡è¦ä¿¡æ¯</li>
<li>IPåœ°å€è§£æä¾èµ–å¤–éƒ¨æœåŠ¡ï¼Œå¯èƒ½å½±å“æ€§èƒ½</li>
<li>ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­è°ƒè¯•æ—¥å¿—åˆ‡é¢</li>
</ol>
<hr/>
<h2 data-id="heading-47">é™„å½•ï¼šç›¸å…³æ–‡ä»¶æ¸…å•</h2>
<h3 data-id="heading-48">æ ¸å¿ƒæ–‡ä»¶</h3>
<ul>
<li><code>LogAspect.java</code>Â - æ“ä½œæ—¥å¿—åˆ‡é¢</li>
<li><code>ControllerLogsAspect.java</code>Â - æ§åˆ¶å™¨æ—¥å¿—åˆ‡é¢ï¼ˆè°ƒè¯•ç”¨ï¼‰</li>
<li><code>Log.java</code>Â - æ—¥å¿—æ³¨è§£å®šä¹‰</li>
<li><code>AsyncManager.java</code>Â - å¼‚æ­¥ä»»åŠ¡ç®¡ç†å™¨</li>
<li><code>AsyncFactory.java</code>Â -Â å¼‚æ­¥å·¥å‚</li>
<li><code>ThreadPoolConfig.java</code>Â - çº¿ç¨‹æ± é…ç½®</li>
</ul>
<h3 data-id="heading-49">å®ä½“ç±»</h3>
<ul>
<li><code>SysOperLog.java</code>Â - æ“ä½œæ—¥å¿—å®ä½“</li>
<li><code>SysLogininfor.java</code>Â - ç™»å½•æ—¥å¿—å®ä½“</li>
</ul>
<h3 data-id="heading-50">æœåŠ¡å±‚</h3>
<ul>
<li><code>ISysOperLogService.java</code>Â - æ“ä½œæ—¥å¿—æœåŠ¡æ¥å£</li>
<li><code>SysOperLogServiceImpl.java</code>Â - æ“ä½œæ—¥å¿—æœåŠ¡å®ç°</li>
<li><code>ISysLogininforService.java</code>Â - ç™»å½•æ—¥å¿—æœåŠ¡æ¥å£</li>
<li><code>SysLogininforServiceImpl.java</code>Â - ç™»å½•æ—¥å¿—æœåŠ¡å®ç°</li>
</ul>
<h3 data-id="heading-51">æ•°æ®å±‚</h3>
<ul>
<li><code>SysOperLogMapper.java</code>Â - æ“ä½œæ—¥å¿—Mapperæ¥å£</li>
<li><code>SysOperLogMapper.xml</code>Â - æ“ä½œæ—¥å¿—Mapper XML</li>
<li><code>SysLogininforMapper.java</code>Â - ç™»å½•æ—¥å¿—Mapperæ¥å£</li>
<li><code>SysLogininforMapper.xml</code>Â - ç™»å½•æ—¥å¿—Mapper XML</li>
</ul>
<h3 data-id="heading-52">æ§åˆ¶å™¨</h3>
<ul>
<li><code>SysOperlogController.java</code>Â - æ“ä½œæ—¥å¿—ç®¡ç†æ§åˆ¶å™¨</li>
<li><code>SysLogininforController.java</code>Â - ç™»å½•æ—¥å¿—ç®¡ç†æ§åˆ¶å™¨</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaåŸºç¡€-4ï¼šJDK ä¸­åŸºäº AQS çš„æ ¸å¿ƒç±»è¯¦è§£ä¸ä½¿ç”¨ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7598537739516919850</link>    <guid>https://juejin.cn/post/7598537739516919850</guid>    <pubDate>2026-01-25T12:50:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598537739516919850" data-draft-id="7598587406708080681" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaåŸºç¡€-4ï¼šJDK ä¸­åŸºäº AQS çš„æ ¸å¿ƒç±»è¯¦è§£ä¸ä½¿ç”¨ç¤ºä¾‹"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-25T12:50:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="beata"/> <meta itemprop="url" content="https://juejin.cn/user/1839900247461280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaåŸºç¡€-4ï¼šJDK ä¸­åŸºäº AQS çš„æ ¸å¿ƒç±»è¯¦è§£ä¸ä½¿ç”¨ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1839900247461280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    beata
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T12:50:40.000Z" title="Sun Jan 25 2026 12:50:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç¯‡ä¸­æˆ‘ä»¬è¯¦ç»†ä»‹ç»äº†AQSçš„åº•å±‚ä»£ç å®ç°é€»è¾‘ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥ä»‹ç»åŸºäºAQSå®ç°çš„ç±»ï¼Œåœ¨ Java å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œ<code>java.util.concurrent</code>ï¼ˆJUCï¼‰åŒ…ä¸ºæˆ‘ä»¬æä¾›äº†å¤§é‡é«˜æ•ˆã€å¯é çš„å¹¶å‘å·¥å…·ç±»ã€‚è¿™äº›å·¥å…·ç±»çš„åº•å±‚å®ç°å¤§å¤šä¾èµ–äºä¸€ä¸ªå…³é”®çš„æŠ½è±¡æ¡†æ¶â€”â€”<strong>AbstractQueuedSynchronizer</strong>ï¼ˆAQSï¼‰ã€‚æœ¬æ–‡å°†æ·±å…¥ä»‹ç» AQS çš„åŸºæœ¬åŸç†ï¼Œå¹¶è¯¦ç»†è®²è§£ JDK ä¸­å‡ ä¸ªåŸºäº AQS å®ç°çš„æ ¸å¿ƒåŒæ­¥å™¨ç±»ï¼ŒåŒ…æ‹¬ <code>ReentrantLock</code>ã€<code>Semaphore</code>ã€<code>CountDownLatch</code>ã€<code>ReentrantReadWriteLock</code> å’Œ <code>Condition</code>ï¼Œå¹¶é™„ä¸Šå®ç”¨çš„ä»£ç ç¤ºä¾‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ AQSï¼Ÿ</h2>
<p><strong>AbstractQueuedSynchronizer</strong>ï¼ˆAQSï¼‰æ˜¯ Doug Lea è®¾è®¡çš„ä¸€ä¸ªç”¨äºæ„å»ºé”å’ŒåŒæ­¥å™¨çš„åŸºç¡€æ¡†æ¶ã€‚å®ƒé€šè¿‡ä¸€ä¸ª <strong>int ç±»å‹çš„ state</strong> è¡¨ç¤ºåŒæ­¥çŠ¶æ€ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ª <strong>FIFO çš„ç­‰å¾…é˜Ÿåˆ—</strong>ï¼ˆCLH é˜Ÿåˆ—å˜ä½“ï¼‰ï¼Œç”¨äºç®¡ç†é‚£äº›æœªèƒ½è·å–èµ„æºè€Œè¢«é˜»å¡çš„çº¿ç¨‹ã€‚</p>
<p>AQS çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<ul>
<li>å­ç±»é€šè¿‡é‡å†™ <code>tryAcquire</code> / <code>tryRelease</code>ï¼ˆç‹¬å æ¨¡å¼ï¼‰æˆ– <code>tryAcquireShared</code> / <code>tryReleaseShared</code>ï¼ˆå…±äº«æ¨¡å¼ï¼‰ç­‰æ–¹æ³•æ¥å®šä¹‰å¦‚ä½•è·å–/é‡Šæ”¾èµ„æºã€‚</li>
<li>AQS è´Ÿè´£çº¿ç¨‹çš„æ’é˜Ÿã€å”¤é†’ã€é˜»å¡ç­‰å¤æ‚é€»è¾‘ã€‚</li>
</ul>
<p>AQS æ”¯æŒä¸¤ç§èµ„æºå…±äº«æ–¹å¼ï¼š</p>
<ul>
<li><strong>ç‹¬å å¼</strong>ï¼ˆExclusiveï¼‰ï¼šå¦‚ ReentrantLock</li>
<li><strong>å…±äº«å¼</strong>ï¼ˆSharedï¼‰ï¼šå¦‚ Semaphoreã€CountDownLatch</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€JDK ä¸­åŸºäº AQS çš„æ ¸å¿ƒç±»</h2>
<h3 data-id="heading-2">1. ReentrantLockï¼ˆå¯é‡å…¥é”ï¼‰</h3>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åŸºäº AQS ç‹¬å æ¨¡å¼å®ç°</li>
<li>æ”¯æŒå…¬å¹³é”ä¸éå…¬å¹³é”</li>
<li>å¯é‡å…¥ï¼ˆåŒä¸€çº¿ç¨‹å¯å¤šæ¬¡è·å–ï¼‰</li>
<li>æ”¯æŒ Condition</li>
</ul>
<h4 data-id="heading-3">ç¤ºä¾‹ä»£ç ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.locks.ReentrantLock;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReentrantLockExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
                lock.lock();
                <span class="hljs-keyword">try</span> {
                    count++;
                } <span class="hljs-keyword">finally</span> {
                    lock.unlock();
                }
            }
        });

        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
                lock.lock();
                <span class="hljs-keyword">try</span> {
                    count++;
                } <span class="hljs-keyword">finally</span> {
                    lock.unlock();
                }
            }
        });

        t1.start();
        t2.start();
        t1.join();
        t2.join();

        System.out.println(<span class="hljs-string">"Final count: "</span> + count); <span class="hljs-comment">// è¾“å‡º 2000</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-4">2. Semaphoreï¼ˆä¿¡å·é‡ï¼‰</h3>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åŸºäº AQS å…±äº«æ¨¡å¼å®ç°</li>
<li>æ§åˆ¶åŒæ—¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡</li>
<li>å¸¸ç”¨äºé™æµã€èµ„æºæ± æ§åˆ¶</li>
</ul>
<h4 data-id="heading-5">ç¤ºä¾‹ä»£ç ï¼ˆæ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥æ± ï¼‰ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.Semaphore;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SemaphoreExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Semaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Semaphore</span>(<span class="hljs-number">3</span>); <span class="hljs-comment">// æœ€å¤š3ä¸ªå¹¶å‘</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++) {
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    semaphore.acquire(); <span class="hljs-comment">// è·å–è®¸å¯</span>
                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">" è·å–æ•°æ®åº“è¿æ¥"</span>);
                    TimeUnit.SECONDS.sleep(<span class="hljs-number">2</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿæ“ä½œ</span>
                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">" é‡Šæ”¾æ•°æ®åº“è¿æ¥"</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                } <span class="hljs-keyword">finally</span> {
                    semaphore.release(); <span class="hljs-comment">// é‡Šæ”¾è®¸å¯</span>
                }
            }, <span class="hljs-string">"Thread-"</span> + i).start();
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-6">3. CountDownLatchï¼ˆå€’è®¡æ—¶é—¨é—©ï¼‰</h3>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åŸºäº AQS å…±äº«æ¨¡å¼å®ç°</li>
<li>åˆå§‹åŒ–æ—¶æŒ‡å®šä¸€ä¸ªè®¡æ•°ï¼Œè°ƒç”¨ <code>countDown()</code> å‡ 1ï¼Œ<code>await()</code> é˜»å¡ç›´åˆ°è®¡æ•°ä¸º 0</li>
<li>ä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œè®¡æ•°ä¸èƒ½é‡ç½®</li>
</ul>
<h4 data-id="heading-7">ç¤ºä¾‹ä»£ç ï¼ˆç­‰å¾…å¤šä¸ªä»»åŠ¡å®Œæˆï¼‰ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.CountDownLatch;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CountDownLatchExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">int</span> <span class="hljs-variable">threadCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;
        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(threadCount);

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; threadCount; i++) {
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// æ¨¡æ‹Ÿä»»åŠ¡</span>
                    Thread.sleep((<span class="hljs-type">long</span>) (Math.random() * <span class="hljs-number">2000</span>));
                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">" å®Œæˆä»»åŠ¡"</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                } <span class="hljs-keyword">finally</span> {
                    latch.countDown(); <span class="hljs-comment">// è®¡æ•°å‡1</span>
                }
            }).start();
        }

        latch.await(); <span class="hljs-comment">// ä¸»çº¿ç¨‹ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
        System.out.println(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼Œç»§ç»­æ‰§è¡Œåç»­é€»è¾‘"</span>);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-8">4. ReentrantReadWriteLockï¼ˆè¯»å†™é”ï¼‰</h3>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å†…éƒ¨åŒ…å«ä¸¤ä¸ªé”ï¼šReadLockï¼ˆå…±äº«ï¼‰å’Œ WriteLockï¼ˆç‹¬å ï¼‰</li>
<li>å¤šä¸ªè¯»çº¿ç¨‹å¯åŒæ—¶è®¿é—®ï¼Œä½†å†™çº¿ç¨‹å¿…é¡»ç‹¬å </li>
<li>é€‚ç”¨äºâ€œè¯»å¤šå†™å°‘â€åœºæ™¯</li>
</ul>
<h4 data-id="heading-9">ç¤ºä¾‹ä»£ç ï¼ˆç¼“å­˜è¯»å†™ï¼‰ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.ReentrantReadWriteLock;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReadWriteLockCache</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, String&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantReadWriteLock</span> <span class="hljs-variable">rwLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantReadWriteLock</span>();

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">get</span><span class="hljs-params">(String key)</span> {
        rwLock.readLock().lock();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> cache.get(key);
        } <span class="hljs-keyword">finally</span> {
            rwLock.readLock().unlock();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">put</span><span class="hljs-params">(String key, String value)</span> {
        rwLock.writeLock().lock();
        <span class="hljs-keyword">try</span> {
            cache.put(key, value);
        } <span class="hljs-keyword">finally</span> {
            rwLock.writeLock().unlock();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ReadWriteLockCache</span> <span class="hljs-variable">cache</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReadWriteLockCache</span>();
        cache.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Alice"</span>);

        <span class="hljs-comment">// å¤šä¸ªè¯»çº¿ç¨‹</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">" è¯»å–: "</span> + cache.get(<span class="hljs-string">"name"</span>));
            }).start();
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-10">5. Conditionï¼ˆæ¡ä»¶å˜é‡ï¼‰</h3>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸ Lock é…åˆä½¿ç”¨ï¼Œæ›¿ä»£ Object çš„ wait/notify</li>
<li>ä¸€ä¸ª Lock å¯ä»¥åˆ›å»ºå¤šä¸ª Conditionï¼Œå®ç°æ›´ç²¾ç»†çš„çº¿ç¨‹é€šä¿¡</li>
</ul>
<h4 data-id="heading-11">ç¤ºä¾‹ä»£ç ï¼ˆç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼‰ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.LinkedList;
<span class="hljs-keyword">import</span> java.util.Queue;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.Condition;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.ReentrantLock;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProducerConsumerWithCondition</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Queue&lt;Integer&gt; buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">capacity</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">notFull</span> <span class="hljs-operator">=</span> lock.newCondition();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">notEmpty</span> <span class="hljs-operator">=</span> lock.newCondition();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">produce</span><span class="hljs-params">(<span class="hljs-type">int</span> item)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        lock.lock();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">while</span> (buffer.size() == capacity) {
                System.out.println(<span class="hljs-string">"Buffer full, producer waiting..."</span>);
                notFull.await();
            }
            buffer.offer(item);
            System.out.println(<span class="hljs-string">"Produced: "</span> + item);
            notEmpty.signal(); <span class="hljs-comment">// å”¤é†’æ¶ˆè´¹è€…</span>
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">consume</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {
        lock.lock();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">while</span> (buffer.isEmpty()) {
                System.out.println(<span class="hljs-string">"Buffer empty, consumer waiting..."</span>);
                notEmpty.await();
            }
            <span class="hljs-type">int</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> buffer.poll();
            System.out.println(<span class="hljs-string">"Consumed: "</span> + item);
            notFull.signal(); <span class="hljs-comment">// å”¤é†’ç”Ÿäº§è€…</span>
            <span class="hljs-keyword">return</span> item;
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ProducerConsumerWithCondition</span> <span class="hljs-variable">pc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProducerConsumerWithCondition</span>();

        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++) {
                    pc.produce(i);
                    Thread.sleep(<span class="hljs-number">500</span>);
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }).start();

        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
                    pc.consume();
                    Thread.sleep(<span class="hljs-number">1000</span>);
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }).start();
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€æ€»ç»“</h2>



































<table><thead><tr><th>åŒæ­¥å™¨</th><th>AQS æ¨¡å¼</th><th>å…¸å‹ç”¨é€”</th></tr></thead><tbody><tr><td><code>ReentrantLock</code></td><td>ç‹¬å </td><td>æ›¿ä»£ synchronizedï¼Œæ”¯æŒè¶…æ—¶ã€ä¸­æ–­ã€å…¬å¹³æ€§</td></tr><tr><td><code>Semaphore</code></td><td>å…±äº«</td><td>æ§åˆ¶å¹¶å‘çº¿ç¨‹æ•°ï¼Œèµ„æºæ± é™æµ</td></tr><tr><td><code>CountDownLatch</code></td><td>å…±äº«</td><td>ç­‰å¾… N ä¸ªä»»åŠ¡å®Œæˆåå†ç»§ç»­</td></tr><tr><td><code>ReentrantReadWriteLock</code></td><td>è¯»ï¼ˆå…±äº«ï¼‰/å†™ï¼ˆç‹¬å ï¼‰</td><td>è¯»å¤šå†™å°‘çš„å¹¶å‘è®¿é—®æ§åˆ¶</td></tr><tr><td><code>Condition</code></td><td>ä¸ Lock é…åˆ</td><td>ç²¾ç»†çº¿ç¨‹é€šä¿¡ï¼ˆæ›¿ä»£ wait/notifyï¼‰</td></tr></tbody></table>
<p>è¿™äº›ç±»éƒ½å°è£…äº† AQS çš„å¤æ‚æ€§ï¼Œè®©å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ— éœ€æ‰‹åŠ¨å¤„ç†çº¿ç¨‹è°ƒåº¦å’ŒçŠ¶æ€ç®¡ç†ã€‚ç†è§£ AQS çš„å·¥ä½œåŸç†ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æ›´é«˜æ•ˆã€å®‰å…¨åœ°ä½¿ç”¨è¿™äº›å¹¶å‘å·¥å…·ã€‚</p>
<blockquote>
<p><strong>æç¤º</strong>ï¼šè™½ç„¶ AQS å¼ºå¤§ï¼Œä½†é™¤éä½ æ­£åœ¨å¼€å‘æ–°çš„åŒæ­¥ç»„ä»¶ï¼ˆå¦‚è‡ªå®šä¹‰é”ï¼‰ï¼Œå¦åˆ™ä¸€èˆ¬ä¸éœ€è¦ç›´æ¥ç»§æ‰¿ AQSã€‚æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¼˜å…ˆä½¿ç”¨ JUC æä¾›çš„æ ‡å‡†åŒæ­¥å™¨å³å¯ã€‚</p>
</blockquote>
<hr/>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£ AQS åŠå…¶åœ¨ JDK ä¸­çš„åº”ç”¨ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³äº†è§£æ›´åº•å±‚çš„æºç æœºåˆ¶ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºï¼</p>
<blockquote>
<p>ä½œè€…ï¼šæ¶æ„å¸ˆBeata<br/>
æ—¥æœŸï¼š2026å¹´1æœˆ25æ—¥<br/>
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡å¯è‡ªç”±è½¬è½½ï¼Œä½†è¯·ä¿ç•™å‡ºå¤„</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLçš„é”æœºåˆ¶ã€é€‚ç”¨åœºæ™¯ä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7598881914203750450</link>    <guid>https://juejin.cn/post/7598881914203750450</guid>    <pubDate>2026-01-25T12:51:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598881914203750450" data-draft-id="7598921649888378907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLçš„é”æœºåˆ¶ã€é€‚ç”¨åœºæ™¯ä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,MySQL"/> <meta itemprop="datePublished" content="2026-01-25T12:51:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ°´ä¸æ»´"/> <meta itemprop="url" content="https://juejin.cn/user/283045639753100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLçš„é”æœºåˆ¶ã€é€‚ç”¨åœºæ™¯ä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045639753100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ°´ä¸æ»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T12:51:16.000Z" title="Sun Jan 25 2026 12:51:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">MySQL é”æœºåˆ¶å…¨è§£æï¼šæ‰€æœ‰é”ç±»å‹ã€é€‚ç”¨åœºæ™¯ä¸è½åœ°è§£å†³æ–¹æ¡ˆ</h2>
<p>MySQL é”æœºåˆ¶æ˜¯æ•°æ®åº“<strong>å¹¶å‘æ§åˆ¶</strong>çš„æ ¸å¿ƒï¼Œç”¨äºè§£å†³å¤šäº‹åŠ¡åŒæ—¶æ“ä½œæ•°æ®æ—¶çš„<strong>è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</strong>ä»¥åŠ<strong>æ•°æ®ä¸ä¸€è‡´</strong>é—®é¢˜ï¼Œæ˜¯ä¿éšœæ•°æ®ä¸€è‡´æ€§å’Œé«˜å¹¶å‘å¤„ç†èƒ½åŠ›çš„åŸºç¡€ã€‚ä¸åŒå­˜å‚¨å¼•æ“çš„é”æœºåˆ¶å·®å¼‚æ˜¾è‘—ï¼Œå…¶ä¸­ InnoDB ä½œä¸º MySQL é»˜è®¤å¼•æ“ï¼Œå®ç°äº†<strong>ç»†ç²’åº¦çš„è¡Œçº§é”</strong>ï¼Œå¹¶å…¼å®¹è¡¨çº§é”ï¼Œæ˜¯äº’è”ç½‘åç«¯å¼€å‘çš„æ ¸å¿ƒç ”ç©¶å¯¹è±¡ï¼›è€Œ MyISAM ä»…æ”¯æŒè¡¨çº§é”ï¼Œç°å·²é€æ­¥è¢«æ·˜æ±°ã€‚</p>
<p>æœ¬æ–‡å°†ä»<strong>é”çš„æ•´ä½“åˆ†ç±»</strong>å‡ºå‘ï¼Œè¯¦ç»†è®²è§£ MySQL ä¸­<strong>æ‰€æœ‰é”ç±»å‹</strong>çš„å®šä¹‰ã€ç‰¹æ€§ã€è§¦å‘æ¡ä»¶ï¼Œç»“åˆäº’è”ç½‘åç«¯å…¸å‹ä¸šåŠ¡åœºæ™¯ç»™å‡º<strong>é”çš„é€‰æ‹©ç­–ç•¥ä¸å¯è½åœ°çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼ˆå« SQL/Java ä»£ç ï¼‰ï¼ŒåŒæ—¶åˆ†æç”Ÿäº§é«˜é¢‘çš„é”é˜»å¡ã€æ­»é”é—®é¢˜çš„å®šä½ä¸è§£å†³ï¼Œå…¼é¡¾é¢è¯•å…«è‚¡æ–‡å’Œç”Ÿäº§å®æˆ˜éœ€æ±‚ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€MySQL é”çš„æ•´ä½“åˆ†ç±»</h3>
<p>MySQL é”çš„åˆ†ç±»ç»´åº¦å¤šæ ·ï¼Œæ ¸å¿ƒæŒ‰<strong>é”ç²’åº¦</strong>ï¼ˆæœ€å¸¸ç”¨ï¼‰ã€<strong>é”å…¼å®¹æ€§</strong>ã€<strong>å®ç°æ–¹å¼</strong>åˆ’åˆ†ï¼Œä¸åŒåˆ†ç±»ç»´åº¦å¯äº¤å‰ï¼Œä¾‹å¦‚ InnoDB çš„è¡Œçº§é”åŒ…å«å…±äº«è¡Œé”å’Œæ’ä»–è¡Œé”ã€‚ä»¥ä¸‹æ˜¯å…¨ç»´åº¦åˆ†ç±»ä½“ç³»ï¼Œå»ºç«‹å¯¹ MySQL é”çš„æ•´ä½“è®¤çŸ¥ï¼š</p>

























































































<table><thead><tr><th>åˆ†ç±»ç»´åº¦</th><th>é”ç±»å‹</th><th>æ ¸å¿ƒå­˜å‚¨å¼•æ“</th><th>é”ç²’åº¦ / ç‰¹æ€§</th><th>æ ¸å¿ƒé€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>é”ç²’åº¦</strong></td><td>è¡¨çº§é”ï¼ˆTable Lockï¼‰</td><td>MyISAM/InnoDB</td><td>æ•´è¡¨åŠ é”ï¼Œç²’åº¦ç²—ï¼Œå¼€é”€å°ï¼Œå¹¶å‘ä½</td><td>æ•´è¡¨æ‰¹é‡æ“ä½œã€é™æ€æ•°æ®ä¿®æ”¹</td></tr><tr><td/><td>è¡Œçº§é”ï¼ˆRow Lockï¼‰</td><td>InnoDB</td><td>å•è¡ŒåŠ é”ï¼Œç²’åº¦ç»†ï¼Œå¼€é”€å¤§ï¼Œå¹¶å‘é«˜</td><td>é«˜å¹¶å‘å•è¡Œ / å¤šè¡Œæ›´æ–°ã€è¯»å†™æ··åˆåœºæ™¯</td></tr><tr><td/><td>é¡µçº§é”ï¼ˆPage Lockï¼‰</td><td>BDB</td><td>æ•°æ®é¡µåŠ é”ï¼Œç²’åº¦ä»‹äºè¡¨ / è¡Œä¹‹é—´</td><td>æå°‘ä½¿ç”¨ï¼Œå·²è¢« InnoDB æ›¿ä»£</td></tr><tr><td><strong>é”å…¼å®¹æ€§</strong></td><td>å…±äº«é”ï¼ˆShared Lockï¼ŒS é”ï¼‰</td><td>InnoDB/MyISAM</td><td>è¯»é”ï¼Œå¤šä¸ª S é”å¯å…±å­˜</td><td>æ•°æ®æŸ¥è¯¢ï¼Œä¸å…è®¸å…¶ä»–äº‹åŠ¡ä¿®æ”¹</td></tr><tr><td/><td>æ’ä»–é”ï¼ˆExclusive Lockï¼ŒX é”ï¼‰</td><td>InnoDB/MyISAM</td><td>å†™é”ï¼Œä¸ä»»ä½•é”äº’æ–¥</td><td>æ•°æ®æ’å…¥ / æ›´æ–° / åˆ é™¤</td></tr><tr><td><strong>å®ç°æ–¹å¼</strong></td><td>æ„å‘é”ï¼ˆIntention Lockï¼ŒIS/IXï¼‰</td><td>InnoDB</td><td>è¡¨çº§é”ï¼Œé…åˆè¡Œçº§é”ä½¿ç”¨</td><td>è¡Œçº§é”çš„å‰ç½®é”ï¼Œé¿å…è¡¨é”ä¸è¡Œé”å†²çª</td></tr><tr><td><strong>ç‰¹æ®Šé”</strong></td><td>è®°å½•é”ï¼ˆRecord Lockï¼‰</td><td>InnoDB</td><td>è¡Œçº§é”çš„åŸºç¡€ï¼Œé”å®šå•è¡Œè®°å½•</td><td>å•è¡Œç²¾å‡†æ›´æ–°</td></tr><tr><td/><td>é—´éš™é”ï¼ˆGap Lockï¼‰</td><td>InnoDB</td><td>è¡Œçº§é”ï¼Œé”å®šç´¢å¼•é—´éš™</td><td>é˜²æ­¢å¹»è¯»ï¼ŒåŒºé—´æŸ¥è¯¢</td></tr><tr><td/><td>ä¸´é”®é”ï¼ˆNext-Key Lockï¼‰</td><td>InnoDB</td><td>è®°å½•é” + é—´éš™é”ï¼ŒInnoDB é»˜è®¤è¡Œé”</td><td>RR éš”ç¦»çº§åˆ«ä¸‹çš„è¡Œçº§é”é»˜è®¤å½¢æ€</td></tr><tr><td/><td>å…ƒæ•°æ®é”ï¼ˆMDLï¼‰</td><td>æ‰€æœ‰å¼•æ“</td><td>è¡¨çº§é”ï¼Œé”å®šè¡¨ç»“æ„</td><td>è¡¨ç»“æ„ä¿®æ”¹ï¼ˆALTERï¼‰ã€è¡¨æŸ¥è¯¢</td></tr><tr><td/><td>è‡ªå¢é”ï¼ˆAUTO-INC Lockï¼‰</td><td>InnoDB</td><td>è¡¨çº§ / è¡Œçº§ï¼Œé”å®šè‡ªå¢åˆ—</td><td>è‡ªå¢ä¸»é”®çš„æ’å…¥æ“ä½œ</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒå‰æ</strong>ï¼šInnoDB çš„é”æœºåˆ¶ä¾èµ–<strong>äº‹åŠ¡éš”ç¦»çº§åˆ«</strong>ï¼Œé»˜è®¤éš”ç¦»çº§åˆ«ä¸º<strong>å¯é‡å¤è¯»ï¼ˆRRï¼‰</strong> ï¼Œä¸´é”®é”ã€é—´éš™é”ä»…åœ¨ RR çº§åˆ«ç”Ÿæ•ˆï¼›** è¯»å·²æäº¤ï¼ˆRCï¼‰** çº§åˆ«ä¸‹ï¼ŒInnoDB ä¼šå…³é—­é—´éš™é”ï¼Œä»…ä¿ç•™è®°å½•é”ï¼Œå¹¶å‘æ›´é«˜ä½†æ— æ³•è§£å†³å¹»è¯»ã€‚</p>
<h3 data-id="heading-2">äºŒã€å„ç±»å‹é”çš„è¯¦ç»†è§£æ</h3>
<p>æœ¬èŠ‚å°†é€ä¸€è®²è§£ MySQL ä¸­<strong>æ‰€æœ‰é”ç±»å‹</strong>çš„å®šä¹‰ã€è§¦å‘æ¡ä»¶ã€ç‰¹æ€§ï¼Œé‡ç‚¹èšç„¦ InnoDB çš„é”æœºåˆ¶ï¼ˆé¢è¯• + ç”Ÿäº§æ ¸å¿ƒï¼‰ï¼Œå¯¹ MyISAM/BDB çš„é”ä»…åšåŸºç¡€è¯´æ˜ã€‚</p>
<h4 data-id="heading-3">2.1 è¡¨çº§é”ï¼ˆTable Lockï¼‰ï¼šæ•´è¡¨ç®¡æ§ï¼Œç®€å•é«˜æ•ˆ</h4>
<p>è¡¨çº§é”æ˜¯ MySQL ä¸­<strong>ç²’åº¦æœ€ç²—</strong>çš„é”ï¼Œå¯¹æ•´å¼ è¡¨åŠ é”ï¼Œåˆ†ä¸º<strong>è¡¨å…±äº«é”ï¼ˆS é”ï¼‰<strong>å’Œ</strong>è¡¨æ’ä»–é”ï¼ˆX é”ï¼‰</strong> ï¼ŒMyISAM çš„é»˜è®¤é”ï¼ŒInnoDB ä¹Ÿæ”¯æŒæ‰‹åŠ¨åŠ è¡¨é”ã€‚</p>
<h5 data-id="heading-4">æ ¸å¿ƒç‰¹æ€§</h5>
<ol>
<li>åŠ é” / è§£é”å¼€é”€å°ï¼Œæ— éœ€éå†ç´¢å¼•ï¼Œæ‰§è¡Œé€Ÿåº¦å¿«ï¼›</li>
<li>å¹¶å‘æ€§èƒ½æä½ï¼šåŠ è¡¨ X é”åï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•å¯¹è¯¥è¡¨æ‰§è¡Œ<strong>ä»»ä½•è¯»å†™æ“ä½œ</strong>ï¼›åŠ è¡¨ S é”åï¼Œå…¶ä»–äº‹åŠ¡å¯è¯»ä½†ä¸å¯å†™ï¼›</li>
<li>InnoDB ä¸­<strong>ä¸å»ºè®®é»˜è®¤ä½¿ç”¨</strong>ï¼Œä»…åœ¨æ•´è¡¨æ‰¹é‡æ“ä½œæ—¶æ‰‹åŠ¨ä½¿ç”¨ï¼Œå¦åˆ™ä¼šä¸§å¤±è¡Œçº§é”çš„é«˜å¹¶å‘ä¼˜åŠ¿ã€‚</li>
</ol>
<h5 data-id="heading-5">åŠ é” / è§£é” SQLï¼ˆInnoDB/MyISAM é€šç”¨ï¼‰</h5>
<pre><code class="hljs language-sql" lang="sql"># æ‰‹åŠ¨åŠ è¡¨å…±äº«é”ï¼ˆSé”ï¼‰ï¼ŒåŠ é”åä»…èƒ½è¯»ï¼Œä¸èƒ½å†™
LOCK TABLES `goods_stock` READ;
# æ‰‹åŠ¨åŠ è¡¨æ’ä»–é”ï¼ˆXé”ï¼‰ï¼ŒåŠ é”åç¦æ­¢å…¶ä»–æ‰€æœ‰æ“ä½œ
LOCK TABLES `goods_stock` WRITE;
# è§£é”ï¼ˆå¿…é¡»æ‰‹åŠ¨è§£é”ï¼Œå¦åˆ™ä¼šè¯æ–­å¼€å‰ä¸€ç›´æŒæœ‰ï¼‰
UNLOCK TABLES;
</code></pre>
<h4 data-id="heading-6">2.2 è¡Œçº§é”ï¼ˆRow Lockï¼‰ï¼šInnoDB æ ¸å¿ƒï¼Œé«˜å¹¶å‘åŸºçŸ³</h4>
<p>è¡Œçº§é”æ˜¯ InnoDB çš„<strong>æ ¸å¿ƒé”æœºåˆ¶</strong>ï¼Œç²’åº¦æœ€ç»†ï¼Œä»…å¯¹æ“ä½œçš„<strong>å•è¡Œ / å¤šè¡Œè®°å½•</strong>åŠ é”ï¼Œåˆ†ä¸º<strong>è¡Œå…±äº«é”ï¼ˆS é”ï¼‰<strong>å’Œ</strong>è¡Œæ’ä»–é”ï¼ˆX é”ï¼‰</strong> ï¼Œæ˜¯å®ç°é«˜å¹¶å‘è¯»å†™çš„å…³é”®ã€‚</p>
<p>InnoDB çš„è¡Œçº§é”å¹¶éç›´æ¥é”å®šæ•°æ®è¡Œï¼Œè€Œæ˜¯<strong>åŸºäºç´¢å¼•é”å®š</strong>ï¼ˆç´¢å¼•é¡¹åŠ é”ï¼‰ï¼Œè‹¥æ— ç´¢å¼•æˆ–æœªä½¿ç”¨ç´¢å¼•ï¼Œè¡Œçº§é”ä¼š<strong>é€€åŒ–ä¸ºè¡¨çº§é”</strong>ï¼ˆç”Ÿäº§é«˜é¢‘å‘ç‚¹ï¼‰ã€‚</p>
<p>æ ¹æ®é”å®šèŒƒå›´ï¼ŒInnoDB çš„è¡Œçº§é”ç»†åˆ†ä¸º<strong>è®°å½•é”ã€é—´éš™é”ã€ä¸´é”®é”</strong>ï¼ˆä¸‰è€…ä¸ºè¡Œçº§é”çš„å…·ä½“å®ç°ï¼Œéç‹¬ç«‹åˆ†ç±»ï¼‰ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†è¯´æ˜ï¼š</p>
<h5 data-id="heading-7">2.2.1 è®°å½•é”ï¼ˆRecord Lockï¼‰ï¼šç²¾å‡†é”å®šå•è¡Œ</h5>
<p><strong>å®šä¹‰</strong>ï¼šé”å®š<strong>ç´¢å¼•ä¸Šçš„å•è¡Œè®°å½•</strong>ï¼Œä»…å¯¹å½“å‰å­˜åœ¨çš„è¡Œç”Ÿæ•ˆï¼Œæ˜¯æœ€åŸºç¡€çš„è¡Œçº§é”ã€‚<strong>è§¦å‘æ¡ä»¶</strong>ï¼š<strong>ç²¾å‡†åŒ¹é…ç´¢å¼•çš„ç­‰å€¼æŸ¥è¯¢</strong>ï¼ˆä¸»é”® / å”¯ä¸€ç´¢å¼•ï¼‰ï¼ŒRR/RC éš”ç¦»çº§åˆ«å‡ç”Ÿæ•ˆã€‚<strong>ç¤ºä¾‹</strong>ï¼šé€šè¿‡å•†å“ IDï¼ˆä¸»é”®ï¼‰æ›´æ–°åº“å­˜ï¼ŒInnoDB ä¼šå¯¹<code>goods_id=1001</code>çš„ç´¢å¼•é¡¹åŠ è®°å½•é”ï¼Œä»…é˜»å¡è¯¥å•è¡Œçš„å…¶ä»–å†™æ“ä½œï¼Œä¸å½±å“å…¶ä»–å•†å“ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">UPDATE</span> goods_stock <span class="hljs-keyword">SET</span> stock_num<span class="hljs-operator">=</span><span class="hljs-number">99</span> <span class="hljs-keyword">WHERE</span> goods_id<span class="hljs-operator">=</span><span class="hljs-number">1001</span>; # ä¸»é”®ç­‰å€¼æŸ¥è¯¢ï¼Œè§¦å‘è®°å½•é”
</code></pre>
<h5 data-id="heading-8">2.2.2 é—´éš™é”ï¼ˆGap Lockï¼‰ï¼šé”å®šç´¢å¼•é—´éš™ï¼Œé˜²æ­¢å¹»è¯»</h5>
<p><strong>å®šä¹‰</strong>ï¼šé”å®š<strong>ä¸¤ä¸ªç´¢å¼•é¡¹ä¹‹é—´çš„é—´éš™</strong>ï¼ˆä¹ŸåŒ…æ‹¬ç´¢å¼•é¦–è¡Œå‰ã€æœ«è¡Œåçš„é—´éš™ï¼‰ï¼Œä¸é”å®šå…·ä½“è¡Œï¼Œç›®çš„æ˜¯<strong>é˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¯¥é—´éš™æ’å…¥æ•°æ®</strong>ï¼Œè§£å†³å¹»è¯»é—®é¢˜ã€‚<strong>è§¦å‘æ¡ä»¶</strong>ï¼š<strong>RR éš”ç¦»çº§åˆ«ä¸‹</strong>ï¼Œå¯¹<strong>éå”¯ä¸€ç´¢å¼•çš„èŒƒå›´æŸ¥è¯¢ / ç­‰å€¼æŸ¥è¯¢</strong>ï¼ˆæœªå‘½ä¸­è¡Œï¼‰ã€‚<strong>ç‰¹æ€§</strong>ï¼šé—´éš™é”ä¹‹é—´<strong>äº’ç›¸å…¼å®¹</strong>ï¼Œå¤šä¸ªäº‹åŠ¡å¯åŒæ—¶å¯¹åŒä¸€é—´éš™åŠ é—´éš™é”ï¼Œä»…é˜»å¡æ’å…¥æ“ä½œã€‚<strong>ç¤ºä¾‹</strong>ï¼šå•†å“è¡¨çš„éå”¯ä¸€ç´¢å¼•<code>idx_category</code>ï¼ˆåˆ†ç±» IDï¼‰æœ‰å€¼ [1,3,5]ï¼Œæ‰§è¡ŒèŒƒå›´æŸ¥è¯¢<code>WHERE category_id&gt;2 AND category_id&lt;5</code>ï¼ŒInnoDB ä¼šé”å®šé—´éš™ (3,5)ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•åœ¨è¯¥é—´éš™æ’å…¥<code>category_id=4</code>çš„è®°å½•ã€‚</p>
<h5 data-id="heading-9">2.2.3 ä¸´é”®é”ï¼ˆNext-Key Lockï¼‰ï¼šInnoDB é»˜è®¤è¡Œé”</h5>
<p><strong>å®šä¹‰</strong>ï¼š<strong>è®°å½•é” + é—´éš™é”</strong>çš„ç»„åˆï¼Œé”å®š<strong>å½“å‰ç´¢å¼•è¡Œ + å…¶åç»­çš„ç´¢å¼•é—´éš™</strong>ï¼Œæ˜¯ InnoDB åœ¨<strong>RR éš”ç¦»çº§åˆ«ä¸‹çš„é»˜è®¤è¡Œçº§é”å½¢æ€</strong>ã€‚<strong>è§¦å‘æ¡ä»¶</strong>ï¼š<strong>RR éš”ç¦»çº§åˆ«ä¸‹</strong>ï¼Œæ‰€æœ‰è¡Œçº§é”çš„é»˜è®¤è§¦å‘ï¼ˆç­‰å€¼æŸ¥è¯¢å‘½ä¸­å”¯ä¸€ç´¢å¼•æ—¶ï¼Œä¸´é”®é”ä¼š<strong>é™çº§ä¸ºè®°å½•é”</strong>ï¼‰ã€‚<strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šåŒæ—¶è§£å†³<strong>ä¸å¯é‡å¤è¯»</strong>å’Œ<strong>å¹»è¯»</strong>ï¼Œæ˜¯ InnoDB RR çº§åˆ«å®ç°äº‹åŠ¡éš”ç¦»çš„æ ¸å¿ƒã€‚<strong>ç¤ºä¾‹</strong>ï¼šç´¢å¼•å€¼ [1,3,5]ï¼Œæ‰§è¡Œ<code>WHERE category_id&lt;=3</code>ï¼Œä¸´é”®é”ä¼šé”å®š (âˆ,1]ã€(1,3] çš„è®°å½• + é—´éš™ï¼Œå…¶ä»–äº‹åŠ¡æ—¢ä¸èƒ½ä¿®æ”¹ 1ã€3 è¡Œï¼Œä¹Ÿä¸èƒ½åœ¨é—´éš™ä¸­æ’å…¥æ•°æ®ã€‚</p>
<h4 data-id="heading-10">2.3 é¡µçº§é”ï¼ˆPage Lockï¼‰ï¼šæ·˜æ±°çš„ä¸­é—´æ–¹æ¡ˆ</h4>
<p>é¡µçº§é”æ˜¯ BDB å­˜å‚¨å¼•æ“çš„é”æœºåˆ¶ï¼Œé”å®š<strong>æ•°æ®é¡µ</strong>ï¼ˆInnoDB é»˜è®¤ 16KB / é¡µï¼‰ï¼Œç²’åº¦ä»‹äºè¡¨çº§é”å’Œè¡Œçº§é”ä¹‹é—´ã€‚<strong>ç‰¹æ€§</strong>ï¼šåŠ é”å¼€é”€ã€å¹¶å‘æ€§èƒ½ä¹Ÿä»‹äºä¸¤è€…ä¹‹é—´ï¼Œæ— æ˜æ˜¾ä¼˜åŠ¿ï¼›<strong>ç°çŠ¶</strong>ï¼šBDB å¼•æ“å·²è¢« MySQL å®˜æ–¹é€æ­¥æ·˜æ±°ï¼Œå®é™…å¼€å‘ä¸­å‡ ä¹ä¸ä½¿ç”¨ï¼Œæ— éœ€æ·±å…¥ç ”ç©¶ã€‚</p>
<h4 data-id="heading-11">2.4 æ„å‘é”ï¼ˆIntention Lockï¼‰ï¼šè¡Œçº§é”çš„ â€œå‰ç½®é”â€</h4>
<p>æ„å‘é”æ˜¯ InnoDB çš„<strong>è¡¨çº§é”</strong>ï¼Œåˆ†ä¸º<strong>æ„å‘å…±äº«é”ï¼ˆISï¼‰<strong>å’Œ</strong>æ„å‘æ’ä»–é”ï¼ˆIXï¼‰</strong> ï¼Œæ˜¯è¡Œçº§é”çš„<strong>å‰ç½®é”</strong>â€”â€”<strong>åŠ è¡Œçº§é”å‰ï¼Œå¿…é¡»å…ˆåŠ å¯¹åº”çš„æ„å‘é”</strong>ã€‚</p>
<h5 data-id="heading-12">æ ¸å¿ƒä½œç”¨</h5>
<p>è§£å†³<strong>è¡¨çº§é”ä¸è¡Œçº§é”çš„å†²çªæ£€æµ‹é—®é¢˜</strong>ï¼Œé¿å…åŠ è¡¨é”æ—¶éå†å…¨è¡¨æ£€æŸ¥æ˜¯å¦æœ‰è¡Œé”ï¼ˆå¤§å¹…æå‡åŠ é”æ•ˆç‡ï¼‰ã€‚</p>
<h5 data-id="heading-13">è§¦å‘æ¡ä»¶</h5>
<ul>
<li>åŠ <strong>è¡Œ S é”</strong>å‰ï¼Œè‡ªåŠ¨åŠ <strong>è¡¨ IS é”</strong>ï¼›</li>
<li>åŠ <strong>è¡Œ X é”</strong>å‰ï¼Œè‡ªåŠ¨åŠ <strong>è¡¨ IX é”</strong>ï¼›</li>
<li>æ„å‘é”ç”± InnoDB<strong>è‡ªåŠ¨åŠ é” / è§£é”</strong>ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚</li>
</ul>
<h5 data-id="heading-14">ç‰¹æ€§</h5>
<ol>
<li>æ„å‘é”æ˜¯<strong>è¡¨çº§é”</strong>ï¼Œä»…ç”¨äºå†²çªæ£€æµ‹ï¼Œä¸é˜»å¡ä»»ä½•è¯»å†™æ“ä½œï¼›</li>
<li>æ„å‘é”ä¹‹é—´<strong>äº’ç›¸å…¼å®¹</strong>ï¼ŒIS å’Œ IX å¯å…±å­˜ï¼›</li>
<li>æ„å‘é”ä¸è¡¨çº§é”<strong>äº’æ–¥</strong>ï¼šè¡¨ X é”ä¸ IS/IX å‡äº’æ–¥ï¼Œè¡¨ S é”ä»…ä¸ IX äº’æ–¥ã€‚</li>
</ol>
<h4 data-id="heading-15">2.5 ç‰¹æ®Šé”ï¼šç”Ÿäº§é«˜é¢‘æ˜“è¸©å‘çš„é”ç±»å‹</h4>
<p>è¿™ç±»é”å¹¶éä¼ ç»Ÿçš„è¯»å†™é”ï¼Œè€Œæ˜¯ MySQL ä¸º<strong>ç‰¹æ®Šåœºæ™¯</strong>è®¾è®¡çš„é”ï¼Œæ˜¯ç”Ÿäº§ä¸­<strong>é”é˜»å¡ã€æ­»é”</strong>çš„é«˜é¢‘è¯±å› ï¼Œä¹Ÿæ˜¯é¢è¯•é‡ç‚¹ã€‚</p>
<h5 data-id="heading-16">2.5.1 å…ƒæ•°æ®é”ï¼ˆMDLï¼‰ï¼šè¡¨ç»“æ„çš„ â€œéšå½¢é”â€</h5>
<p><strong>å®šä¹‰</strong>ï¼šMDLï¼ˆMetadata Lockï¼‰æ˜¯<strong>è¡¨çº§é”</strong>ï¼Œé”å®šè¡¨çš„<strong>å…ƒæ•°æ®ï¼ˆè¡¨ç»“æ„ï¼‰</strong> ï¼Œæ‰€æœ‰ MySQL å¼•æ“å‡æ”¯æŒï¼Œ<strong>è‡ªåŠ¨åŠ é” / è§£é”</strong>ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚<strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šä¿è¯<strong>è¡¨ç»“æ„ä¸æ•°æ®çš„ä¸€è‡´æ€§</strong>ï¼Œé¿å…æŸ¥è¯¢è¿‡ç¨‹ä¸­è¡¨ç»“æ„è¢«ä¿®æ”¹ï¼ˆå¦‚æŸ¥è¯¢æ—¶æ‰§è¡Œ ALTER TABLEï¼‰ã€‚</p>
<h5 data-id="heading-17">åŠ é”è§„åˆ™ï¼ˆæ ¸å¿ƒï¼‰</h5>
<p>MDL é”åˆ†ä¸º S é”å’Œ X é”ï¼ŒåŠ é”é€»è¾‘ç”± MySQL è‡ªåŠ¨æ§åˆ¶ï¼Œ<strong>ä¼šè¯æ–­å¼€å‰ä¸€ç›´æŒæœ‰</strong>ï¼š</p>
<ol>
<li>æ‰§è¡Œ<strong>è¡¨æŸ¥è¯¢æ“ä½œ</strong>ï¼ˆSELECT/SHOWï¼‰ï¼Œè‡ªåŠ¨åŠ <strong>MDL S é”</strong>ï¼Œå¤šä¸ª MDL S é”å¯å…±å­˜ï¼›</li>
<li>æ‰§è¡Œ<strong>è¡¨ç»“æ„ä¿®æ”¹æ“ä½œ</strong>ï¼ˆALTER/DROP/RENAMEï¼‰ï¼Œè‡ªåŠ¨åŠ <strong>MDL X é”</strong>ï¼Œä¸ä»»ä½• MDL é”äº’æ–¥ï¼›</li>
<li>æ‰§è¡Œ<strong>æ•°æ®ä¿®æ”¹æ“ä½œ</strong>ï¼ˆINSERT/UPDATE/DELETEï¼‰ï¼Œè‡ªåŠ¨åŠ <strong>MDL S é”</strong>ï¼ˆä¸æŸ¥è¯¢ä¸€è‡´ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-18">ç”Ÿäº§é«˜é¢‘é—®é¢˜</h5>
<p>é«˜å¹¶å‘æŸ¥è¯¢åœºæ™¯ä¸‹ï¼Œæ‰§è¡Œ<code>ALTER TABLE</code>ä¼šåŠ  MDL X é”ï¼Œè€Œæ­¤æ—¶è¡¨ä¸Šå·²æœ‰å¤§é‡ MDL S é”ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>MDL X é”ç­‰å¾…æ‰€æœ‰ MDL S é”é‡Šæ”¾ï¼›</li>
<li>åç»­æ‰€æœ‰æŸ¥è¯¢ / ä¿®æ”¹æ“ä½œä¼šæ’é˜Ÿç­‰å¾… MDL X é”é‡Šæ”¾ï¼Œæœ€ç»ˆå¯¼è‡´<strong>æ•´ä¸ªè¡¨çš„æ“ä½œé˜»å¡</strong>ï¼ˆç”Ÿäº§é‡å¤§æ•…éšœï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-19">2.5.2 è‡ªå¢é”ï¼ˆAUTO-INC Lockï¼‰ï¼šè‡ªå¢ä¸»é”®çš„ä¸“å±é”</h5>
<p><strong>å®šä¹‰</strong>ï¼šAUTO-INC Lock æ˜¯ InnoDB ä¸º<strong>è‡ªå¢åˆ—ï¼ˆAUTO_INCREMENTï¼‰<strong>è®¾è®¡çš„é”ï¼Œç”¨äºä¿è¯</strong>è‡ªå¢åˆ—å€¼çš„å”¯ä¸€æ€§å’Œè¿ç»­æ€§</strong>ï¼Œé¿å…æ‰¹é‡æ’å…¥æ—¶è‡ªå¢ ID é‡å¤ã€‚</p>
<h5 data-id="heading-20">åŠ é”æ¨¡å¼ï¼ˆinnodb_autoinc_lock_modeï¼‰</h5>
<p>InnoDB é€šè¿‡å‚æ•°<code>innodb_autoinc_lock_mode</code>æ§åˆ¶è‡ªå¢é”çš„åŠ é”ç²’åº¦ï¼Œé»˜è®¤å€¼ä¸º<strong>1</strong>ï¼Œå¯é€‰ 0/1/2ï¼Œä¸åŒæ¨¡å¼çš„å¹¶å‘æ€§èƒ½ä¸åŒï¼š</p>

































<table><thead><tr><th>æ¨¡å¼å€¼</th><th>é”æ¨¡å¼</th><th>ç‰¹æ€§</th><th>å¹¶å‘æ€§èƒ½</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>0</td><td>ä¼ ç»Ÿæ¨¡å¼</td><td>è¡¨çº§ AUTO-INC é”ï¼Œæ‰¹é‡æ’å…¥å…¨ç¨‹æŒæœ‰</td><td>æœ€ä½</td><td>éœ€ä¸¥æ ¼è¿ç»­è‡ªå¢ ID çš„åœºæ™¯</td></tr><tr><td>1</td><td>è¿ç»­æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</td><td>å•è¡Œæ’å…¥è¡Œçº§é”ï¼Œæ‰¹é‡æ’å…¥è¡¨çº§é”</td><td>ä¸­ç­‰</td><td>å¸¸è§„ä¸šåŠ¡ï¼ˆå¤§éƒ¨åˆ†åœºæ™¯ï¼‰</td></tr><tr><td>2</td><td>äº¤é”™æ¨¡å¼</td><td>å…¨ç¨‹è¡Œçº§é”ï¼Œè‡ªå¢ ID å¯èƒ½ä¸è¿ç»­</td><td>æœ€é«˜</td><td>é«˜å¹¶å‘æ‰¹é‡æ’å…¥ï¼ˆå¦‚åˆ†åº“åˆ†è¡¨ï¼‰</td></tr></tbody></table>
<h5 data-id="heading-21">æ ¸å¿ƒç‰¹æ€§</h5>
<ul>
<li>æ¨¡å¼ 2 æ˜¯<strong>å¹¶å‘æ€§èƒ½æœ€é«˜</strong>çš„ï¼Œä½†è‡ªå¢ ID å¯èƒ½ä¸è¿ç»­ï¼ˆå› å¤šäº‹åŠ¡åŒæ—¶æ’å…¥ï¼‰ï¼›</li>
<li>ä¸»ä»å¤åˆ¶ä¸­ï¼Œè‹¥ä½¿ç”¨<strong>åŸºäºè¯­å¥çš„å¤åˆ¶ï¼ˆSBRï¼‰</strong> ï¼Œä¸å»ºè®®ä½¿ç”¨æ¨¡å¼ 2ï¼ˆå¯èƒ½å¯¼è‡´ä»åº“æ•°æ®ä¸ä¸€è‡´ï¼‰ï¼Œå»ºè®®ä½¿ç”¨<strong>åŸºäºè¡Œçš„å¤åˆ¶ï¼ˆRBRï¼‰</strong> ã€‚</li>
</ul>
<h3 data-id="heading-22">ä¸‰ã€MySQL é”çš„å…¼å®¹æ€§çŸ©é˜µ</h3>
<p>é”çš„<strong>å…¼å®¹æ€§</strong>æŒ‡<strong>åŒä¸€èµ„æºä¸Šï¼Œå·²æŒæœ‰é”ä¸è¯·æ±‚é”æ˜¯å¦èƒ½å…±å­˜</strong>ï¼Œå…¼å®¹åˆ™è¯·æ±‚é”æˆåŠŸï¼Œä¸å…¼å®¹åˆ™è¯·æ±‚é”çš„äº‹åŠ¡<strong>é˜»å¡ç­‰å¾…</strong>ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ MySQL<strong>æ ¸å¿ƒé”ç±»å‹</strong>çš„å…¼å®¹æ€§çŸ©é˜µï¼ˆâˆš= å…¼å®¹ï¼ŒÃ—= ä¸å…¼å®¹ï¼Œâ€”= æ— å…³è”ï¼‰ï¼Œæ˜¯ç†è§£é”é˜»å¡çš„åŸºç¡€ï¼Œé¢è¯•é«˜é¢‘è€ƒç‚¹ï¼š</p>








































































































<table><thead><tr><th>å·²æŒæœ‰é” \ è¯·æ±‚é”</th><th>è¡¨ S é”</th><th>è¡¨ X é”</th><th>è¡¨ IS é”</th><th>è¡¨ IX é”</th><th>è¡Œ S é”</th><th>è¡Œ X é”</th><th>MDL S é”</th><th>MDL X é”</th></tr></thead><tbody><tr><td>è¡¨ S é”</td><td>âˆš</td><td>Ã—</td><td>âˆš</td><td>Ã—</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td></tr><tr><td>è¡¨ X é”</td><td>Ã—</td><td>Ã—</td><td>Ã—</td><td>Ã—</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td></tr><tr><td>è¡¨ IS é”</td><td>âˆš</td><td>Ã—</td><td>âˆš</td><td>âˆš</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td></tr><tr><td>è¡¨ IX é”</td><td>Ã—</td><td>Ã—</td><td>âˆš</td><td>âˆš</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td></tr><tr><td>è¡Œ S é”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>âˆš</td><td>Ã—</td><td>â€”</td><td>â€”</td></tr><tr><td>è¡Œ X é”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>Ã—</td><td>Ã—</td><td>â€”</td><td>â€”</td></tr><tr><td>MDL S é”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>âˆš</td><td>Ã—</td></tr><tr><td>MDL X é”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>Ã—</td><td>Ã—</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒç»“è®º</strong>ï¼š</p>
<ol>
<li>æ’ä»–é”ï¼ˆè¡¨ X / è¡Œ X/MDL Xï¼‰ä¸<strong>æ‰€æœ‰é”</strong>äº’æ–¥ï¼Œæ˜¯é”é˜»å¡çš„æ ¸å¿ƒåŸå› ï¼›</li>
<li>å…±äº«é”ï¼ˆè¡¨ S / è¡Œ S/MDL Sï¼‰ä¸<strong>å…¶ä»–å…±äº«é”</strong>å…¼å®¹ï¼Œä¸<strong>æ’ä»–é”</strong>äº’æ–¥ï¼›</li>
<li>æ„å‘é”ï¼ˆIS/IXï¼‰ä»…ä¸<strong>è¡¨çº§é”</strong>äº’æ–¥ï¼Œå½¼æ­¤ä¹‹é—´å®Œå…¨å…¼å®¹ã€‚</li>
</ol>
<h3 data-id="heading-23">å››ã€InnoDB é”çš„æ ¸å¿ƒå®ç°å‰æï¼šåŸºäºç´¢å¼•</h3>
<p><strong>InnoDB çš„è¡Œçº§é”æ˜¯åŸºäºç´¢å¼•å®ç°çš„ï¼Œè€ŒéåŸºäºæ•°æ®è¡Œæœ¬èº«</strong>ï¼Œè¿™æ˜¯ InnoDB é”æœºåˆ¶çš„<strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼Œä¹Ÿæ˜¯ç”Ÿäº§ä¸­æœ€å®¹æ˜“è¸©å‘çš„ç‚¹ã€‚</p>
<h4 data-id="heading-24">æ ¸å¿ƒæ¨è®º</h4>
<ol>
<li><strong>ä½¿ç”¨ç´¢å¼•åŠ é”</strong>ï¼šåªæœ‰é€šè¿‡<strong>ä¸»é”® / å”¯ä¸€ç´¢å¼• / æ™®é€šç´¢å¼•</strong>çš„æŸ¥è¯¢æ¡ä»¶æ“ä½œæ•°æ®ï¼ŒInnoDB æ‰ä¼šåŠ è¡Œçº§é”ï¼›</li>
<li><strong>æ— ç´¢å¼• / æœªä½¿ç”¨ç´¢å¼•â†’è¡¨çº§é”</strong>ï¼šè‹¥æŸ¥è¯¢æ¡ä»¶æ— ç´¢å¼•ï¼Œæˆ–æœ‰ç´¢å¼•ä½†æœªä½¿ç”¨ï¼ˆå¦‚éšå¼ç±»å‹è½¬æ¢ï¼‰ï¼ŒInnoDB ä¼šå¯¹æ•´å¼ è¡¨åŠ è¡¨çº§é”ï¼Œå¯¼è‡´å¹¶å‘æ€§èƒ½éª¤é™ï¼›</li>
<li><strong>é”çš„æ˜¯ç´¢å¼•é¡¹ï¼Œè€Œéæ•°æ®è¡Œ</strong>ï¼šå³ä½¿ä¸¤è¡Œæ•°æ®çš„ç‰©ç†å­˜å‚¨åœ¨ä¸€èµ·ï¼Œåªè¦ç´¢å¼•é¡¹ä¸åŒï¼Œè¡Œçº§é”ä¹Ÿä¸ä¼šå†²çªã€‚</li>
</ol>
<h4 data-id="heading-25">å‘ç‚¹ç¤ºä¾‹ï¼šéšå¼ç±»å‹è½¬æ¢å¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè¡Œé”é€€è¡¨é”</h4>
<pre><code class="hljs language-sql" lang="sql"># è¡¨ç»“æ„ï¼šgoods_idæ˜¯<span class="hljs-type">BIGINT</span>ç±»å‹ï¼ˆä¸»é”®ç´¢å¼•ï¼‰
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `goods_stock` (
  `goods_id` <span class="hljs-type">BIGINT</span> UNSIGNED <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">PRIMARY</span> KEY,
  `stock_num` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB;

# é”™è¯¯ï¼šæŸ¥è¯¢æ¡ä»¶ä¼ å…¥å­—ç¬¦ä¸²ï¼Œè§¦å‘éšå¼ç±»å‹è½¬æ¢ï¼Œç´¢å¼•å¤±æ•ˆâ†’è¡Œé”é€€è¡¨é”
<span class="hljs-keyword">UPDATE</span> goods_stock <span class="hljs-keyword">SET</span> stock_num<span class="hljs-operator">=</span><span class="hljs-number">99</span> <span class="hljs-keyword">WHERE</span> goods_id<span class="hljs-operator">=</span><span class="hljs-string">'1001'</span>; 
# æ­£ç¡®ï¼šæŸ¥è¯¢æ¡ä»¶ç±»å‹ä¸ç´¢å¼•ä¸€è‡´ï¼Œä½¿ç”¨ä¸»é”®ç´¢å¼•â†’åŠ è®°å½•é”
<span class="hljs-keyword">UPDATE</span> goods_stock <span class="hljs-keyword">SET</span> stock_num<span class="hljs-operator">=</span><span class="hljs-number">99</span> <span class="hljs-keyword">WHERE</span> goods_id<span class="hljs-operator">=</span><span class="hljs-number">1001</span>;
</code></pre>
<h3 data-id="heading-26">äº”ã€å…¸å‹ä¸šåŠ¡åœºæ™¯ä¸é”æœºåˆ¶è§£å†³æ–¹æ¡ˆ</h3>
<p>ç»“åˆäº’è”ç½‘åç«¯<strong>é«˜å¹¶å‘ã€é«˜å¯ç”¨</strong>çš„æ ¸å¿ƒéœ€æ±‚ï¼Œé’ˆå¯¹ 8 å¤§å…¸å‹ä¸šåŠ¡åœºæ™¯ï¼Œç»™å‡º<strong>é”çš„é€‰æ‹©ç­–ç•¥ã€å¯è½åœ°çš„ä»£ç å®ç°ï¼ˆSQL/Javaï¼‰ã€ç”Ÿäº§æ³¨æ„äº‹é¡¹</strong>ï¼Œè¦†ç›–ä»å•åº“åˆ°åˆ†å¸ƒå¼ã€ä»å¸¸è§„æ“ä½œåˆ°é—®é¢˜è§£å†³çš„å…¨åœºæ™¯ã€‚</p>
<h4 data-id="heading-27">åœºæ™¯ 1ï¼šæ•´è¡¨æ‰¹é‡æ“ä½œï¼ˆå¦‚å…¨è¡¨æ•°æ®æ›´æ–°ã€æ•°æ®è¿ç§»ï¼‰</h4>
<h5 data-id="heading-28">åœºæ™¯æè¿°</h5>
<p>éœ€è¦å¯¹æ•´å¼ è¡¨æ‰§è¡Œæ‰¹é‡æ›´æ–° / åˆ é™¤ï¼ˆå¦‚æ‰¹é‡ä¿®æ”¹å•†å“ä»·æ ¼ã€æ¸…ç†å†å²æ•°æ®ï¼‰ï¼Œæ¶‰åŠæ•°æ®é‡å è¡¨çš„ 80% ä»¥ä¸Šã€‚</p>
<h5 data-id="heading-29">é—®é¢˜ç—›ç‚¹</h5>
<p>è‹¥ä½¿ç”¨ InnoDB é»˜è®¤çš„è¡Œçº§é”ï¼Œä¼šéå†å…¨è¡¨åŠ å¤§é‡è¡Œé”ï¼ŒåŠ é”å¼€é”€å¤§ã€æ‰§è¡Œé€Ÿåº¦æ…¢ï¼Œä¸”å®¹æ˜“å¼•å‘é”å†²çªã€‚</p>
<h5 data-id="heading-30">é”é€‰æ‹©ç­–ç•¥</h5>
<p><strong>æ‰‹åŠ¨åŠ è¡¨çº§æ’ä»–é”ï¼ˆWRITEï¼‰</strong> ï¼Œæ”¾å¼ƒè¡Œçº§é”çš„é«˜å¹¶å‘ï¼Œæå‡æ‰¹é‡æ“ä½œæ•ˆç‡ã€‚</p>
<h5 data-id="heading-31">è½åœ° SQL å®ç°</h5>
<pre><code class="hljs language-sql" lang="sql"># <span class="hljs-number">1.</span> æ‰‹åŠ¨åŠ è¡¨æ’ä»–é”ï¼Œé˜»å¡å…¶ä»–æ‰€æœ‰æ“ä½œ
LOCK TABLES `goods` WRITE;
# <span class="hljs-number">2.</span> æ‰§è¡Œæ‰¹é‡æ“ä½œï¼ˆå¦‚æ‰¹é‡å°†åˆ†ç±»<span class="hljs-number">1</span>çš„å•†å“ä»·æ ¼æ‰“<span class="hljs-number">9</span>æŠ˜ï¼‰
<span class="hljs-keyword">UPDATE</span> `goods` <span class="hljs-keyword">SET</span> price<span class="hljs-operator">=</span>price<span class="hljs-operator">*</span><span class="hljs-number">0.9</span> <span class="hljs-keyword">WHERE</span> category_id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;
# <span class="hljs-number">3.</span> æ‰‹åŠ¨è§£é”ï¼Œæ¢å¤è¡¨çš„æ­£å¸¸æ“ä½œ
UNLOCK TABLES;
# <span class="hljs-number">4.</span> è‹¥æ“ä½œå¤±è´¥ï¼Œç›´æ¥è§£é”å³å¯ï¼Œæ— éœ€å›æ»šï¼ˆè¡¨é”æ— äº‹åŠ¡ç‰¹æ€§ï¼‰
</code></pre>
<h5 data-id="heading-32">ç”Ÿäº§æ³¨æ„äº‹é¡¹</h5>
<ol>
<li>è¡¨çº§é”<strong>æ— äº‹åŠ¡ç‰¹æ€§</strong>ï¼ŒåŠ é”åæ‰§è¡Œçš„æ“ä½œç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€ COMMITï¼›</li>
<li>æ‰¹é‡æ“ä½œéœ€åœ¨<strong>ä¸šåŠ¡ä½å³°æœŸ</strong>æ‰§è¡Œï¼ˆå¦‚å‡Œæ™¨ï¼‰ï¼Œé¿å…é˜»å¡æ­£å¸¸ä¸šåŠ¡ï¼›</li>
<li>æ“ä½œå‰å¿…é¡»<strong>å¤‡ä»½æ•°æ®</strong>ï¼Œé˜²æ­¢æ‰¹é‡æ›´æ–°é”™è¯¯ã€‚</li>
</ol>
<h4 data-id="heading-33">åœºæ™¯ 2ï¼šé«˜å¹¶å‘å•è¡Œæ›´æ–°ï¼ˆå¦‚ç”µå•†æ‰£åº“å­˜ã€ç§’æ€å‡åº“å­˜ï¼‰</h4>
<h5 data-id="heading-34">åœºæ™¯æè¿°</h5>
<p>é«˜å¹¶å‘ä¸‹å¯¹å•è¡Œæ•°æ®æ‰§è¡Œæ›´æ–°æ“ä½œï¼ˆå¦‚æ‰£åº“å­˜ã€ä¿®æ”¹ç”¨æˆ·ä½™é¢ï¼‰ï¼Œè¦æ±‚<strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼Œç»å¯¹é¿å…è¶…å– / è¶…æ‰£ï¼Œå†²çªç‡é«˜ã€‚</p>
<h5 data-id="heading-35">é”é€‰æ‹©ç­–ç•¥</h5>
<p><strong>InnoDB è¡Œæ’ä»–é”ï¼ˆè®°å½•é”ï¼‰+ æ˜¾å¼äº‹åŠ¡</strong>ï¼ˆæ‚²è§‚é”ï¼‰ï¼Œé€šè¿‡<code>FOR UPDATE</code>ç²¾å‡†åŠ è¡Œé”ï¼Œä¿è¯äº‹åŠ¡åŸå­æ€§ã€‚</p>
<h5 data-id="heading-36">è½åœ°å®ç°ï¼ˆSQL+Javaï¼‰</h5>
<h6 data-id="heading-37">æ­¥éª¤ 1ï¼šè¡¨ç»“æ„è®¾è®¡ï¼ˆä¸»é”®ç´¢å¼•ï¼Œä¿è¯è¡Œé”ç”Ÿæ•ˆï¼‰</h6>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `goods_stock` (
  `goods_id` <span class="hljs-type">BIGINT</span> UNSIGNED <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">PRIMARY</span> KEY COMMENT <span class="hljs-string">'å•†å“IDï¼ˆä¸»é”®ï¼‰'</span>,
  `stock_num` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'åº“å­˜æ•°é‡'</span>,
  `update_time` DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'å•†å“åº“å­˜è¡¨'</span>;
# åˆå§‹åŒ–åº“å­˜ï¼šå•†å“<span class="hljs-number">1001</span>åº“å­˜<span class="hljs-number">100</span>ä»¶
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> goods_stock (goods_id, stock_num) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1001</span>, <span class="hljs-number">100</span>);
</code></pre>
<h6 data-id="heading-38">æ­¥éª¤ 2ï¼šSQL æ˜¾å¼äº‹åŠ¡ + FOR UPDATE åŠ è®°å½•é”</h6>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">BEGIN</span>; # å¼€å¯æ˜¾å¼äº‹åŠ¡ï¼Œå…³é—­è‡ªåŠ¨æäº¤
# ä¸»é”®ç­‰å€¼æŸ¥è¯¢ï¼Œ<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>åŠ è¡Œæ’ä»–é”ï¼ˆè®°å½•é”ï¼‰
<span class="hljs-keyword">SELECT</span> stock_num <span class="hljs-keyword">FROM</span> goods_stock <span class="hljs-keyword">WHERE</span> goods_id<span class="hljs-operator">=</span><span class="hljs-number">1001</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;
# æ‰£å‡åº“å­˜ï¼Œä¸šåŠ¡å±‚éœ€å…ˆåˆ¤æ–­stock_num<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span>
<span class="hljs-keyword">UPDATE</span> goods_stock <span class="hljs-keyword">SET</span> stock_num<span class="hljs-operator">=</span>stock_num<span class="hljs-number">-1</span> <span class="hljs-keyword">WHERE</span> goods_id<span class="hljs-operator">=</span><span class="hljs-number">1001</span> <span class="hljs-keyword">AND</span> stock_num<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span>;
# è·å–å—å½±å“è¡Œæ•°ï¼Œä¸šåŠ¡å±‚åˆ¤æ–­æ˜¯å¦æ‰£å‡æˆåŠŸï¼ˆ<span class="hljs-number">0</span><span class="hljs-operator">=</span>åº“å­˜ä¸è¶³ï¼‰
<span class="hljs-keyword">SELECT</span> ROW_COUNT();
<span class="hljs-keyword">COMMIT</span>; # æäº¤äº‹åŠ¡ï¼Œé‡Šæ”¾é”
# <span class="hljs-keyword">ROLLBACK</span>; # è‹¥å¤±è´¥ï¼Œå›æ»šäº‹åŠ¡ï¼Œé‡Šæ”¾é”
</code></pre>
<h6 data-id="heading-39">æ­¥éª¤ 3ï¼šJava ä¸šåŠ¡å±‚å®ç°ï¼ˆSpring Bootï¼‰</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span> <span class="hljs-comment">// å£°æ˜å¼äº‹åŠ¡ï¼Œæ›¿ä»£æ‰‹åŠ¨BEGIN/COMMIT</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StockService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;

    <span class="hljs-comment">/**
     * æ‰£å‡åº“å­˜ï¼ˆæ‚²è§‚é”å®ç°ï¼‰
     * <span class="hljs-doctag">@param</span> goodsId å•†å“ID
     * <span class="hljs-doctag">@return</span> true=æˆåŠŸï¼Œfalse=åº“å­˜ä¸è¶³
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">deductStock</span><span class="hljs-params">(Long goodsId)</span> {
        <span class="hljs-comment">// 1. æŸ¥è¯¢åº“å­˜å¹¶åŠ è¡Œé”ï¼ˆFOR UPDATEï¼‰</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> jdbcTemplate.queryForObject(
                <span class="hljs-string">"SELECT stock_num FROM goods_stock WHERE goods_id=? FOR UPDATE"</span>,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{goodsId},
                Integer.class
        );
        <span class="hljs-keyword">if</span> (stock == <span class="hljs-literal">null</span> || stock &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// åº“å­˜ä¸è¶³</span>
        }
        <span class="hljs-comment">// 2. æ‰£å‡åº“å­˜</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> jdbcTemplate.update(
                <span class="hljs-string">"UPDATE goods_stock SET stock_num=stock_num-1 WHERE goods_id=? AND stock_num&gt;0"</span>,
                goodsId
        );
        <span class="hljs-keyword">return</span> row &gt; <span class="hljs-number">0</span>;
    }
}
</code></pre>
<h5 data-id="heading-40">ç”Ÿäº§æ³¨æ„äº‹é¡¹</h5>
<ol>
<li><code>FOR UPDATE</code>å¿…é¡»åœ¨<strong>æ˜¾å¼äº‹åŠ¡</strong>ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨æäº¤ï¼Œé”ç«‹å³é‡Šæ”¾ï¼›</li>
<li>åŠ¡å¿…é€šè¿‡<strong>ä¸»é”® / å”¯ä¸€ç´¢å¼•</strong>æŸ¥è¯¢ï¼Œé¿å…è¡Œé”é€€è¡¨é”ï¼›</li>
<li>äº‹åŠ¡ä¸­ä»…åŒ…å«æ ¸å¿ƒæ“ä½œï¼Œ<strong>ä¸æ‰§è¡Œè€—æ—¶æ“ä½œ</strong>ï¼ˆå¦‚ RPC è°ƒç”¨ã€æ–‡ä»¶è¯»å†™ï¼‰ï¼Œç¼©çŸ­é”æŒæœ‰æ—¶é—´ã€‚</li>
</ol>
<h4 data-id="heading-41">åœºæ™¯ 3ï¼šä½å†²çªæ•°æ®ä¿®æ”¹ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹ã€è®¢å•çŠ¶æ€æ›´æ–°ï¼‰</h4>
<h5 data-id="heading-42">åœºæ™¯æè¿°</h5>
<p>å¯¹æ•°æ®æ‰§è¡Œä¿®æ”¹æ“ä½œï¼Œä½†<strong>å†²çªç‡æä½</strong>ï¼ˆå¦‚ç”¨æˆ·ä¿®æ”¹æ˜µç§°ã€è®¢å•çŠ¶æ€ä» â€œå¾…æ”¯ä»˜â€ æ”¹ä¸º â€œå·²å–æ¶ˆâ€ï¼‰ï¼Œæ— éœ€ä¸¥æ ¼é˜»å¡å…¶ä»–äº‹åŠ¡ã€‚</p>
<h5 data-id="heading-43">é—®é¢˜ç—›ç‚¹</h5>
<p>è‹¥ä½¿ç”¨æ‚²è§‚é”ï¼ˆFOR UPDATEï¼‰ï¼Œä¼šå¯¼è‡´ä¸å¿…è¦çš„é”é˜»å¡ï¼Œé™ä½å¹¶å‘æ€§èƒ½ã€‚</p>
<h5 data-id="heading-44">é”é€‰æ‹©ç­–ç•¥</h5>
<p><strong>ä¹è§‚é”</strong>ï¼ˆåŸºäºç‰ˆæœ¬å· / æ—¶é—´æˆ³å®ç°ï¼‰ï¼Œæ— é”é˜»å¡ï¼Œé€šè¿‡ç‰ˆæœ¬å·åˆ¤æ–­æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹ï¼Œæå‡å¹¶å‘æ€§èƒ½ã€‚</p>
<h5 data-id="heading-45">è½åœ°å®ç°ï¼ˆSQL+Javaï¼‰</h5>
<h6 data-id="heading-46">æ­¥éª¤ 1ï¼šè¡¨ç»“æ„æ–°å¢ç‰ˆæœ¬å·å­—æ®µï¼ˆä¹è§‚é”æ ¸å¿ƒï¼‰</h6>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `user_info` <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'ä¹è§‚é”ç‰ˆæœ¬å·'</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `order_info` <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'ä¹è§‚é”ç‰ˆæœ¬å·'</span>;
</code></pre>
<h6 data-id="heading-47">æ­¥éª¤ 2ï¼šSQL ä¹è§‚é”æ›´æ–°é€»è¾‘</h6>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">BEGIN</span>;
# <span class="hljs-number">1.</span> æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å’Œç‰ˆæœ¬å·
<span class="hljs-keyword">SELECT</span> nickname, version <span class="hljs-keyword">FROM</span> user_info <span class="hljs-keyword">WHERE</span> user_id<span class="hljs-operator">=</span><span class="hljs-number">10086</span>;
# <span class="hljs-number">2.</span> æ›´æ–°æ˜µç§°ï¼Œä»…å½“ç‰ˆæœ¬å·åŒ¹é…æ—¶æ‰§è¡Œï¼ˆä¿è¯åŸºäºæœ€æ–°ç‰ˆæœ¬ä¿®æ”¹ï¼‰
<span class="hljs-keyword">UPDATE</span> user_info <span class="hljs-keyword">SET</span> nickname<span class="hljs-operator">=</span><span class="hljs-string">'æ–°æ˜µç§°'</span>, version<span class="hljs-operator">=</span>version<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> user_id<span class="hljs-operator">=</span><span class="hljs-number">10086</span> <span class="hljs-keyword">AND</span> version<span class="hljs-operator">=</span>#{oldVersion};
# <span class="hljs-number">3.</span> åˆ¤æ–­å—å½±å“è¡Œæ•°ï¼Œ<span class="hljs-number">0</span><span class="hljs-operator">=</span>æ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹
<span class="hljs-keyword">SELECT</span> ROW_COUNT();
<span class="hljs-keyword">COMMIT</span>;
</code></pre>
<h6 data-id="heading-48">æ­¥éª¤ 3ï¼šJava ä¸šåŠ¡å±‚å®ç°ï¼ˆå¸¦é‡è¯•æœºåˆ¶ï¼‰</h6>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-variable">@Service</span>
public class UserService {
    <span class="hljs-variable">@Autowired</span>
    private UserMapper userMapper;
    <span class="hljs-operator">/</span><span class="hljs-operator">/</span> æœ€å¤§é‡è¯•æ¬¡æ•°
    private <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> MAX_RETRY <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;

    <span class="hljs-comment">/**
     * ä¿®æ”¹ç”¨æˆ·æ˜µç§°ï¼ˆä¹è§‚é”+é‡è¯•ï¼‰
     * @param userId ç”¨æˆ·ID
     * @param newNickname æ–°æ˜µç§°
     * @return true=æˆåŠŸ
     */</span>
    public <span class="hljs-type">boolean</span> updateNickname(Long userId, String newNickname) {
        <span class="hljs-type">int</span> retry <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        while (retry <span class="hljs-operator">&lt;</span> MAX_RETRY) {
            <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-number">1.</span> æŸ¥è¯¢ç”¨æˆ·æœ€æ–°ä¿¡æ¯å’Œç‰ˆæœ¬å·
            UserInfo <span class="hljs-keyword">user</span> <span class="hljs-operator">=</span> userMapper.selectById(userId);
            if (<span class="hljs-keyword">user</span> <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-keyword">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-number">2.</span> æ‰§è¡Œä¹è§‚é”æ›´æ–°
            <span class="hljs-type">int</span> <span class="hljs-type">row</span> <span class="hljs-operator">=</span> userMapper.updateNickname(userId, newNickname, user.getVersion());
            if (<span class="hljs-type">row</span> <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> æ›´æ–°æˆåŠŸ
            }
            retry<span class="hljs-operator">+</span><span class="hljs-operator">+</span>; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> æ›´æ–°å¤±è´¥ï¼Œé‡è¯•
            try {
                Thread.sleep(<span class="hljs-number">100</span>); <span class="hljs-operator">/</span><span class="hljs-operator">/</span> çŸ­æš‚ä¼‘çœ ï¼Œé¿å…ç¬æ—¶å†²çª
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> é‡è¯•å¤šæ¬¡å¤±è´¥
    }
}

<span class="hljs-operator">/</span><span class="hljs-operator">/</span> Mapperæ¥å£
public interface UserMapper {
    <span class="hljs-variable">@Select</span>("SELECT user_id, nickname, version FROM user_info WHERE user_id=#{userId}")
    UserInfo selectById(Long userId);

    <span class="hljs-variable">@Update</span>("UPDATE user_info SET nickname=#{newNickname}, version=version+1 WHERE user_id=#{userId} AND version=#{oldVersion}")
    <span class="hljs-type">int</span> updateNickname(<span class="hljs-variable">@Param</span>("userId") Long userId, <span class="hljs-variable">@Param</span>("newNickname") String newNickname, <span class="hljs-variable">@Param</span>("oldVersion") <span class="hljs-type">Integer</span> oldVersion);
}
</code></pre>
<h5 data-id="heading-49">ç”Ÿäº§æ³¨æ„äº‹é¡¹</h5>
<ol>
<li>ä¹è§‚é”<strong>æ— å®é™…åŠ é”</strong>ï¼Œé€šè¿‡ç‰ˆæœ¬å·å®ç°å†²çªæ£€æµ‹ï¼Œé€‚ç”¨äº<strong>è¯»å¤šå†™å°‘ã€å†²çªç‡ä½</strong>çš„åœºæ™¯ï¼›</li>
<li>å¿…é¡»å¢åŠ <strong>é‡è¯•æœºåˆ¶</strong>ï¼Œè‹¥æ›´æ–°å¤±è´¥ï¼Œè¯´æ˜æ•°æ®è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼Œé‡è¯•å³å¯ï¼›</li>
<li>ç‰ˆæœ¬å·å»ºè®®ä½¿ç”¨<strong>INT/BIGINT</strong>ï¼Œé¿å…ä½¿ç”¨æ—¶é—´æˆ³ï¼ˆå­˜åœ¨å¹¶å‘ä¸‹æ—¶é—´æˆ³ç›¸åŒçš„æƒ…å†µï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-50">åœºæ™¯ 4ï¼šé˜²å¹»è¯»ä¸šåŠ¡ï¼ˆå¦‚åŒºé—´æŸ¥è¯¢å¹¶æ›´æ–°ã€æ‰¹é‡ç­›é€‰æ•°æ®ï¼‰</h4>
<h5 data-id="heading-51">åœºæ™¯æè¿°</h5>
<p>éœ€è¦å¯¹<strong>ç´¢å¼•åŒºé—´</strong>å†…çš„æ•°æ®æ‰§è¡ŒæŸ¥è¯¢å¹¶æ›´æ–°ï¼ˆå¦‚æŸ¥è¯¢ â€œ2025-01-01 è‡³ 2025-01-10â€ çš„è®¢å•å¹¶ä¿®æ”¹çŠ¶æ€ï¼‰ï¼Œè¦æ±‚<strong>è§£å†³å¹»è¯»</strong>ï¼ˆé¿å…æ›´æ–°è¿‡ç¨‹ä¸­å…¶ä»–äº‹åŠ¡åœ¨è¯¥åŒºé—´æ’å…¥æ–°æ•°æ®ï¼‰ã€‚</p>
<h5 data-id="heading-52">é”é€‰æ‹©ç­–ç•¥</h5>
<p><strong>InnoDB ä¸´é”®é”</strong>ï¼ˆRR éš”ç¦»çº§åˆ«é»˜è®¤ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨åŠ é”ï¼Œé€šè¿‡<strong>èŒƒå›´æŸ¥è¯¢</strong>è§¦å‘ä¸´é”®é”ï¼Œé”å®šåŒºé—´å†…çš„è®°å½• + é—´éš™ï¼Œé˜²æ­¢å¹»è¯»ã€‚</p>
<h5 data-id="heading-53">è½åœ° SQL å®ç°</h5>
<pre><code class="hljs language-sql" lang="sql"># è®¢å•è¡¨ï¼šcreate_timeä¸ºDATETIMEç±»å‹ï¼Œæœ‰ç´¢å¼•idx_create_time
# RRéš”ç¦»çº§åˆ«ä¸‹ï¼ŒèŒƒå›´æŸ¥è¯¢è‡ªåŠ¨è§¦å‘ä¸´é”®é”ï¼Œé˜²æ­¢å¹»è¯»
<span class="hljs-keyword">BEGIN</span>;
# èŒƒå›´æŸ¥è¯¢<span class="hljs-number">2025</span><span class="hljs-number">-01</span><span class="hljs-number">-01</span>è‡³<span class="hljs-number">2025</span><span class="hljs-number">-01</span><span class="hljs-number">-10</span>çš„è®¢å•ï¼Œè§¦å‘ä¸´é”®é”
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> order_info <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-keyword">BETWEEN</span> <span class="hljs-string">'2025-01-01'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'2025-01-10'</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;
# ä¿®æ”¹è¯¥åŒºé—´å†…çš„è®¢å•çŠ¶æ€ä¸ºâ€œå·²å®Œæˆâ€
<span class="hljs-keyword">UPDATE</span> order_info <span class="hljs-keyword">SET</span> order_status<span class="hljs-operator">=</span><span class="hljs-number">3</span> <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-keyword">BETWEEN</span> <span class="hljs-string">'2025-01-01'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'2025-01-10'</span>;
<span class="hljs-keyword">COMMIT</span>;
</code></pre>
<h5 data-id="heading-54">ç”Ÿäº§æ³¨æ„äº‹é¡¹</h5>
<ol>
<li>å¿…é¡»åœ¨<strong>RR éš”ç¦»çº§åˆ«</strong>ä¸‹æ‰§è¡Œï¼ŒRC çº§åˆ«ä¼šå…³é—­é—´éš™é”ï¼Œæ— æ³•è§£å†³å¹»è¯»ï¼›</li>
<li>èŒƒå›´æŸ¥è¯¢çš„å­—æ®µå¿…é¡»<strong>å»ºç«‹ç´¢å¼•</strong>ï¼Œå¦åˆ™è¡Œé”é€€è¡¨é”ï¼›</li>
<li>ä¸´é”®é”çš„é”å®šèŒƒå›´è¾ƒå¤§ï¼Œå°½é‡ç¼©å°æŸ¥è¯¢åŒºé—´ï¼Œå‡å°‘é”å†²çªã€‚</li>
</ol>
<h4 data-id="heading-55">åœºæ™¯ 5ï¼šé«˜å¹¶å‘æ‰¹é‡æ’å…¥ï¼ˆå¦‚åˆ†åº“åˆ†è¡¨æ’å…¥ã€æ—¥å¿—æ‰¹é‡å†™å…¥ï¼‰</h4>
<h5 data-id="heading-56">åœºæ™¯æè¿°</h5>
<p>é«˜å¹¶å‘ä¸‹å¯¹è¡¨æ‰§è¡Œæ‰¹é‡æ’å…¥æ“ä½œï¼ˆå¦‚åˆ†åº“åˆ†è¡¨çš„è®¢å•æ’å…¥ã€ç³»ç»Ÿæ—¥å¿—æ‰¹é‡å†™å…¥ï¼‰ï¼Œè‡ªå¢ä¸»é”®çš„æ’å…¥æ€§èƒ½æˆä¸ºç“¶é¢ˆã€‚</p>
<h5 data-id="heading-57">é—®é¢˜ç—›ç‚¹</h5>
<p>InnoDB é»˜è®¤çš„è‡ªå¢é”æ¨¡å¼ï¼ˆinnodb_autoinc_lock_mode=1ï¼‰åœ¨æ‰¹é‡æ’å…¥æ—¶ä¼šåŠ è¡¨çº§é”ï¼Œå¯¼è‡´æ’å…¥æ€§èƒ½ä½ã€‚</p>
<h5 data-id="heading-58">é”ä¼˜åŒ–ç­–ç•¥</h5>
<p>ä¿®æ”¹è‡ªå¢é”æ¨¡å¼ä¸º<strong>2ï¼ˆäº¤é”™æ¨¡å¼ï¼‰</strong> ï¼Œå…¨ç¨‹ä½¿ç”¨è¡Œçº§é”ï¼Œæå‡æ‰¹é‡æ’å…¥çš„å¹¶å‘æ€§èƒ½ã€‚</p>
<h5 data-id="heading-59">è½åœ°é…ç½® + å®ç°</h5>
<h6 data-id="heading-60">æ­¥éª¤ 1ï¼šä¿®æ”¹ MySQL é…ç½®ï¼ˆmy.cnf/my.iniï¼‰</h6>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[mysqld]</span>
<span class="hljs-comment"># è‡ªå¢é”æ¨¡å¼æ”¹ä¸º2ï¼ˆäº¤é”™æ¨¡å¼ï¼‰ï¼Œé«˜å¹¶å‘æ‰¹é‡æ’å…¥æœ€ä¼˜</span>
<span class="hljs-attr">innodb_autoinc_lock_mode</span> = <span class="hljs-number">2</span>
<span class="hljs-comment"># å¼€å¯åŸºäºè¡Œçš„å¤åˆ¶ï¼ˆRBRï¼‰ï¼Œé…åˆæ¨¡å¼2ä½¿ç”¨ï¼Œé¿å…ä¸»ä»æ•°æ®ä¸ä¸€è‡´</span>
<span class="hljs-attr">binlog_format</span> = ROW
</code></pre>
<h6 data-id="heading-61">æ­¥éª¤ 2ï¼šJava æ‰¹é‡æ’å…¥å®ç°ï¼ˆMyBatis-Plusï¼‰</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;

    <span class="hljs-comment">/**
     * é«˜å¹¶å‘æ‰¹é‡æ’å…¥è®¢å•
     * <span class="hljs-doctag">@param</span> orderList è®¢å•åˆ—è¡¨
     * <span class="hljs-doctag">@return</span> æ’å…¥æˆåŠŸæ•°
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">batchInsert</span><span class="hljs-params">(List&lt;OrderInfo&gt; orderList)</span> {
        <span class="hljs-keyword">return</span> orderMapper.saveBatch(orderList, <span class="hljs-number">100</span>); <span class="hljs-comment">// æ¯æ¬¡æ’å…¥100æ¡ï¼Œåˆ†æ‰¹æäº¤</span>
    }
}
</code></pre>
<h5 data-id="heading-62">ç”Ÿäº§æ³¨æ„äº‹é¡¹</h5>
<ol>
<li>æ¨¡å¼ 2 çš„è‡ªå¢ ID<strong>å¯èƒ½ä¸è¿ç»­</strong>ï¼Œä½†ä¸å½±å“ä¸šåŠ¡ï¼ˆæ— éœ€ä¸¥æ ¼è¿ç»­çš„åœºæ™¯å‡å¯ä½¿ç”¨ï¼‰ï¼›</li>
<li>å¿…é¡»é…åˆ<strong>binlog_format=ROW</strong>ï¼ˆåŸºäºè¡Œçš„å¤åˆ¶ï¼‰ä½¿ç”¨ï¼Œè‹¥ä½¿ç”¨ SBRï¼ˆåŸºäºè¯­å¥çš„å¤åˆ¶ï¼‰ï¼Œä¼šå¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´ï¼›</li>
<li>æ‰¹é‡æ’å…¥å»ºè®®<strong>åˆ†æ‰¹æäº¤</strong>ï¼ˆå¦‚æ¯æ¬¡ 100/500 æ¡ï¼‰ï¼Œé¿å…å•äº‹åŠ¡æ’å…¥æ•°æ®è¿‡å¤šï¼Œå¯¼è‡´äº‹åŠ¡è¿‡å¤§ã€‚</li>
</ol>
<h4 data-id="heading-63">åœºæ™¯ 6ï¼šç”Ÿäº§é«˜é¢‘é—®é¢˜ â€”â€”MDL é”é˜»å¡ï¼ˆæŸ¥è¯¢æ—¶æ‰§è¡Œ ALTER TABLEï¼‰</h4>
<h5 data-id="heading-64">é—®é¢˜æè¿°</h5>
<p>é«˜å¹¶å‘æŸ¥è¯¢åœºæ™¯ä¸‹ï¼Œæ‰§è¡Œ<code>ALTER TABLE</code>ä¿®æ”¹è¡¨ç»“æ„ï¼Œå¯¼è‡´<strong>æ•´ä¸ªè¡¨çš„æ‰€æœ‰æ“ä½œï¼ˆæŸ¥è¯¢ / ä¿®æ”¹ï¼‰å…¨éƒ¨é˜»å¡</strong>ï¼Œæ•°æ®åº“è¿æ¥æ•°æš´æ¶¨ï¼Œæœ€ç»ˆå¼•å‘ç”Ÿäº§æ•…éšœã€‚</p>
<h5 data-id="heading-65">é—®é¢˜æ ¹å› </h5>
<ul>
<li>é«˜å¹¶å‘æŸ¥è¯¢æŒæœ‰å¤§é‡<strong>MDL S é”</strong>ï¼›</li>
<li>æ‰§è¡Œ<code>ALTER TABLE</code>éœ€è¦åŠ <strong>MDL X é”</strong>ï¼Œä¸ MDL S é”äº’æ–¥ï¼ŒX é”ç­‰å¾…æ‰€æœ‰ S é”é‡Šæ”¾ï¼›</li>
<li>åç»­æ‰€æœ‰æŸ¥è¯¢ / ä¿®æ”¹æ“ä½œéœ€è¦åŠ  MDL S é”ï¼Œæ’é˜Ÿç­‰å¾… X é”é‡Šæ”¾ï¼Œå½¢æˆ<strong>é˜»å¡é“¾</strong>ã€‚</li>
</ul>
<h5 data-id="heading-66">è§£å†³æ–¹æ¡ˆ</h5>
<p>ä½¿ç”¨<strong>åœ¨çº¿ DDL å·¥å…·</strong>ï¼ˆå¦‚ pt-online-schema-change/gh-ostï¼‰ï¼Œé¿å…ç›´æ¥æ‰§è¡Œ<code>ALTER TABLE</code>ï¼Œå·¥å…·ä¼šé€šè¿‡<strong>åˆ†æ‰¹æ¬¡å¤åˆ¶æ•°æ®ã€è§¦å‘å™¨åŒæ­¥å¢é‡</strong>çš„æ–¹å¼ä¿®æ”¹è¡¨ç»“æ„ï¼Œå…¨ç¨‹ä¸æŒæœ‰ MDL X é”ï¼Œä¸é˜»å¡ä¸šåŠ¡ã€‚</p>
<h5 data-id="heading-67">è½åœ°å®ç°ï¼ˆpt-online-schema-changeï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…percona-toolkitå·¥å…·</span>
yum install percona-toolkit -y
<span class="hljs-comment"># åœ¨çº¿ä¿®æ”¹è¡¨ç»“æ„ï¼šä¸ºorder_infoè¡¨æ–°å¢å­—æ®µremarkï¼ˆVARCHAR(255)ï¼‰</span>
<span class="hljs-comment"># --alterï¼šè¦æ‰§è¡Œçš„DDLè¯­å¥</span>
<span class="hljs-comment"># D=æ•°æ®åº“åï¼Œt=è¡¨å</span>
<span class="hljs-comment"># h=æ•°æ®åº“IPï¼Œu=ç”¨æˆ·åï¼Œp=å¯†ç </span>
pt-online-schema-change --alter <span class="hljs-string">"ADD COLUMN remark VARCHAR(255) DEFAULT '' COMMENT 'å¤‡æ³¨'"</span> D=shop,t=order_info h=127.0.0.1,u=root,p=123456 --execute
</code></pre>
<h5 data-id="heading-68">ç”Ÿäº§æ³¨æ„äº‹é¡¹</h5>
<ol>
<li>ç¦æ­¢åœ¨<strong>é«˜å¹¶å‘æ—¶æ®µ</strong>ç›´æ¥æ‰§è¡Œ<code>ALTER TABLE</code>ï¼Œå³ä½¿ä½¿ç”¨åœ¨çº¿ DDL å·¥å…·ï¼Œä¹Ÿéœ€åœ¨ä½å³°æœŸæ‰§è¡Œï¼›</li>
<li>åœ¨çº¿ DDL å·¥å…·ä¼šäº§ç”Ÿ<strong>ä¸´æ—¶è¡¨å’Œè§¦å‘å™¨</strong>ï¼Œæ‰§è¡Œå‰éœ€ä¿è¯æ•°æ®åº“æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´å’Œæƒé™ï¼›</li>
<li>æ‰§è¡Œå‰å…ˆé€šè¿‡<code>pt-online-schema-change --dry-run</code>æ¨¡æ‹Ÿæ‰§è¡Œï¼Œæ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯ã€‚</li>
</ol>
<h4 data-id="heading-69">åœºæ™¯ 7ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿå¹¶å‘æ§åˆ¶ï¼ˆå¾®æœåŠ¡ / åˆ†åº“åˆ†è¡¨ä¸‹çš„æ‰£åº“å­˜ï¼‰</h4>
<h5 data-id="heading-70">åœºæ™¯æè¿°</h5>
<p>ç³»ç»Ÿä¸º<strong>åˆ†å¸ƒå¼éƒ¨ç½²</strong>ï¼ˆå¤šæœåŠ¡å®ä¾‹ / å¤šæ•°æ®åº“å®ä¾‹ï¼‰ï¼Œé«˜å¹¶å‘ä¸‹æ‰§è¡Œæ‰£åº“å­˜ / ä¸‹å•æ“ä½œï¼Œå•åº“çš„è¡Œçº§é” / ä¹è§‚é”æ— æ³•è§£å†³<strong>è·¨å®ä¾‹çš„å¹¶å‘å†²çª</strong>ï¼Œå¯¼è‡´è¶…å–ã€‚</p>
<h5 data-id="heading-71">é”é€‰æ‹©ç­–ç•¥</h5>
<p><strong>Redis åˆ†å¸ƒå¼é” + InnoDB è¡Œçº§é”</strong>ï¼ŒåŒé‡é”æœºåˆ¶ï¼š</p>
<ol>
<li><strong>Redis åˆ†å¸ƒå¼é”</strong>ï¼šè§£å†³è·¨å®ä¾‹çš„å¹¶å‘å†²çªï¼Œä¿è¯åŒä¸€å•†å“åªæœ‰ä¸€ä¸ªå®ä¾‹èƒ½æ‰§è¡Œæ‰£åº“å­˜ï¼›</li>
<li><strong>InnoDB è¡Œçº§é”</strong>ï¼šè§£å†³å•åº“å†…çš„å¹¶å‘å†²çªï¼Œä¿è¯å•å®ä¾‹å†…çš„æ•°æ®ä¸€è‡´æ€§ã€‚</li>
</ol>
<h5 data-id="heading-72">è½åœ°å®ç°ï¼ˆJava+Redis+MySQLï¼‰</h5>
<h6 data-id="heading-73">æ­¥éª¤ 1ï¼šRedis åˆ†å¸ƒå¼é”å·¥å…·ç±»ï¼ˆåŸºäº Redissonï¼Œæ¨èç”Ÿäº§ä½¿ç”¨ï¼‰</h6>
<p>Redisson æ˜¯ Redis å®˜æ–¹æ¨èçš„åˆ†å¸ƒå¼é”å®ç°ï¼Œè§£å†³äº†<strong>æ­»é”ã€é”è¶…æ—¶ã€é‡å…¥</strong>ç­‰é—®é¢˜ï¼Œæ¯”æ‰‹åŠ¨å®ç°çš„ Redis é”æ›´ç¨³å®šã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedissonClient <span class="hljs-title function_">redissonClient</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Config</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Config</span>();
        config.useSingleServer().setAddress(<span class="hljs-string">"redis://127.0.0.1:6379"</span>).setPassword(<span class="hljs-string">"123456"</span>);
        <span class="hljs-keyword">return</span> Redisson.create(config);
    }
}
</code></pre>
<h6 data-id="heading-74">æ­¥éª¤ 2ï¼šåˆ†å¸ƒå¼æ‰£åº“å­˜æ ¸å¿ƒå®ç°</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributeStockService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedissonClient redissonClient;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> StockService stockService; <span class="hljs-comment">// åœºæ™¯2çš„æ‚²è§‚é”æ‰£åº“å­˜æœåŠ¡</span>

    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼æ‰£åº“å­˜ï¼ˆRedisåˆ†å¸ƒå¼é”+MySQLè¡Œçº§é”ï¼‰
     * <span class="hljs-doctag">@param</span> goodsId å•†å“ID
     * <span class="hljs-doctag">@return</span> true=æˆåŠŸ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">deductDistributeStock</span><span class="hljs-params">(Long goodsId)</span> {
        <span class="hljs-comment">// 1. å®šä¹‰Redisåˆ†å¸ƒå¼é”çš„keyï¼ˆæŒ‰å•†å“IDåŒºåˆ†ï¼Œç»†ç²’åº¦é”ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"stock:lock:"</span> + goodsId;
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. è·å–åˆ†å¸ƒå¼é”ï¼Œç­‰å¾…3ç§’ï¼ŒæŒæœ‰10ç§’ï¼ˆé¿å…æ­»é”ï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">lockSuccess</span> <span class="hljs-operator">=</span> lock.tryLock(<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (!lockSuccess) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// è·å–é”å¤±è´¥ï¼Œç›´æ¥è¿”å›</span>
            }
            <span class="hljs-comment">// 3. è·å–é”æˆåŠŸï¼Œæ‰§è¡ŒMySQLè¡Œçº§é”æ‰£åº“å­˜</span>
            <span class="hljs-keyword">return</span> stockService.deductStock(goodsId);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 4. é‡Šæ”¾åˆ†å¸ƒå¼é”ï¼ˆå¿…é¡»åœ¨finallyä¸­é‡Šæ”¾ï¼Œé¿å…é”æ³„æ¼ï¼‰</span>
            <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                lock.unlock();
            }
        }
    }
}
</code></pre>
<h5 data-id="heading-75">ç”Ÿäº§æ³¨æ„äº‹é¡¹</h5>
<ol>
<li>åˆ†å¸ƒå¼é”çš„<strong>é”ç²’åº¦è¦ç»†</strong>ï¼ˆå¦‚æŒ‰å•†å“ ID / ç”¨æˆ· IDï¼‰ï¼Œé¿å…ä½¿ç”¨å…¨å±€é”ï¼ˆå¦‚ stock:lockï¼‰ï¼Œå¯¼è‡´å¹¶å‘æ€§èƒ½ä½ï¼›</li>
<li>å¿…é¡»è®¾ç½®<strong>é”è¶…æ—¶æ—¶é—´</strong>ï¼Œé¿å…æœåŠ¡å®•æœºå¯¼è‡´é”æ— æ³•é‡Šæ”¾ï¼ˆæ­»é”ï¼‰ï¼›</li>
<li>æ¨èä½¿ç”¨<strong>Redisson</strong>å®ç°åˆ†å¸ƒå¼é”ï¼Œé¿å…æ‰‹åŠ¨å®ç°çš„é”å­˜åœ¨æ¼æ´ï¼ˆå¦‚ SETNX æœªåŠ è¿‡æœŸæ—¶é—´ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-76">åœºæ™¯ 8ï¼šç”Ÿäº§é«˜é¢‘é—®é¢˜ â€”â€” æ­»é”çš„å®šä½ã€è§£å†³ä¸é¢„é˜²</h4>
<h5 data-id="heading-77">æ­»é”å®šä¹‰</h5>
<p>ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡<strong>äº’ç›¸æŒæœ‰å¯¹æ–¹éœ€è¦çš„é”</strong>ï¼Œä¸”å‡ä¸é‡Šæ”¾è‡ªå·±çš„é”ï¼Œå¯¼è‡´å½¼æ­¤æ°¸ä¹…é˜»å¡ï¼Œæ˜¯ MySQL é”æœºåˆ¶çš„å¸¸è§é—®é¢˜ã€‚</p>
<h5 data-id="heading-78">æ­»é”ç¤ºä¾‹</h5>
<p>äº‹åŠ¡ A æŒæœ‰ goods_id=1001 çš„è¡Œé”ï¼Œè¯·æ±‚ goods_id=1002 çš„è¡Œé”ï¼›äº‹åŠ¡ B æŒæœ‰ goods_id=1002 çš„è¡Œé”ï¼Œè¯·æ±‚ goods_id=1001 çš„è¡Œé”ï¼Œå½¢æˆäº’ç›¸ç­‰å¾…ã€‚</p>
<h5 data-id="heading-79">æ­¥éª¤ 1ï¼šæ­»é”çš„å®šä½ï¼ˆMySQL å†…ç½®å‘½ä»¤ï¼‰</h5>
<p>InnoDB ä¼š<strong>è‡ªåŠ¨æ£€æµ‹æ­»é”</strong>ï¼Œå¹¶å›æ»šå…¶ä¸­ä¸€ä¸ªäº‹åŠ¡ï¼ˆä»£ä»·æœ€å°çš„ï¼‰ï¼Œä½†éœ€æ‰‹åŠ¨å®šä½æ­»é”åŸå› ï¼Œé¿å…å†æ¬¡å‘ç”Ÿã€‚</p>
<pre><code class="hljs language-sql" lang="sql"># <span class="hljs-number">1.</span> å¼€å¯æ­»é”æ—¥å¿—ï¼ˆmy.cnfé…ç½®ï¼Œæ°¸ä¹…ç”Ÿæ•ˆï¼‰
innodb_print_all_deadlocks <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
# <span class="hljs-number">2.</span> æŸ¥çœ‹æœ€æ–°çš„æ­»é”è¯¦æƒ…ï¼ˆæ ¸å¿ƒå‘½ä»¤ï¼‰
<span class="hljs-keyword">SHOW</span> ENGINE INNODB STATUS;
# <span class="hljs-number">3.</span> æŸ¥çœ‹å½“å‰æ´»è·ƒäº‹åŠ¡ã€é”ç­‰å¾…æƒ…å†µ
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.INNODB_TRX; # æ´»è·ƒäº‹åŠ¡
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.INNODB_LOCK_WAITS; # é”ç­‰å¾…
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.INNODB_LOCKS; # æŒæœ‰é”
</code></pre>
<p><strong>æ ¸å¿ƒæŸ¥çœ‹ç‚¹</strong>ï¼š<code>SHOW ENGINE INNODB STATUS</code>çš„<code>LATEST DEADLOCK</code>éƒ¨åˆ†ï¼ŒåŒ…å«æ­»é”çš„äº‹åŠ¡ã€æŒæœ‰çš„é”ã€è¯·æ±‚çš„é”ï¼Œæ˜¯å®šä½æ ¹å› çš„å…³é”®ã€‚</p>
<h5 data-id="heading-80">æ­¥éª¤ 2ï¼šæ­»é”çš„è§£å†³</h5>
<ol>
<li><strong>ç«‹å³è§£å†³</strong>ï¼šInnoDB ä¼šè‡ªåŠ¨å›æ»šä»£ä»·æœ€å°çš„äº‹åŠ¡ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ï¼›è‹¥æœªè‡ªåŠ¨å›æ»šï¼Œå¯é€šè¿‡<code>KILL [äº‹åŠ¡ID]</code>æ€æ­»é˜»å¡çš„äº‹åŠ¡ï¼›</li>
<li><strong>æ ¹æœ¬è§£å†³</strong>ï¼šæ ¹æ®æ­»é”å®šä½ç»“æœï¼Œä¼˜åŒ–äº‹åŠ¡çš„åŠ é”é€»è¾‘ï¼Œé¿å…äº’ç›¸ç­‰å¾…ã€‚</li>
</ol>
<h5 data-id="heading-81">æ­¥éª¤ 3ï¼šæ­»é”çš„é¢„é˜²ï¼ˆç”Ÿäº§æœ€ä½³å®è·µï¼‰</h5>
<p>æ­»é”çš„æ ¸å¿ƒè¯±å› æ˜¯<strong>äº‹åŠ¡åŠ é”é¡ºåºä¸ä¸€è‡´ã€é”æŒæœ‰æ—¶é—´è¿‡é•¿ã€é”å®šèŒƒå›´è¿‡å¤§</strong>ï¼Œé’ˆå¯¹æ€§é¢„é˜²å³å¯ï¼š</p>
<ol>
<li><strong>ç»Ÿä¸€åŠ é”é¡ºåº</strong>ï¼šå¤šä¸ªäº‹åŠ¡å¯¹å¤šå¼ è¡¨ / å¤šè¡Œæ•°æ®åŠ é”æ—¶ï¼Œå¿…é¡»éµå¾ª<strong>ç›¸åŒçš„åŠ é”é¡ºåº</strong>ï¼ˆå¦‚å…ˆé” goods_id=1001ï¼Œå†é” goods_id=1002ï¼‰ï¼›</li>
<li><strong>ç¼©çŸ­é”æŒæœ‰æ—¶é—´</strong>ï¼šäº‹åŠ¡ä¸­ä»…åŒ…å«æ ¸å¿ƒæ“ä½œï¼Œ<strong>ä¸æ‰§è¡Œè€—æ—¶æ“ä½œ</strong>ï¼ˆå¦‚ RPC è°ƒç”¨ã€æ–‡ä»¶è¯»å†™ã€ç¡çœ ï¼‰ï¼Œå¿«é€Ÿæäº¤ / å›æ»šäº‹åŠ¡ï¼›</li>
<li><strong>ç¼©å°é”å®šèŒƒå›´</strong>ï¼šå°½é‡ä½¿ç”¨<strong>ä¸»é”® / å”¯ä¸€ç´¢å¼•</strong>çš„ç­‰å€¼æŸ¥è¯¢ï¼Œè§¦å‘è®°å½•é”ï¼Œé¿å…ä¸´é”®é” / è¡¨é”çš„å¤§èŒƒå›´é”å®šï¼›</li>
<li><strong>è®¾ç½®é”ç­‰å¾…è¶…æ—¶</strong>ï¼šé€šè¿‡å‚æ•°<code>innodb_lock_wait_timeout</code>è®¾ç½®è¡Œé”ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤ 50 ç§’ï¼Œå»ºè®®æ”¹ä¸º 10 ç§’ï¼‰ï¼Œé¿å…æ°¸ä¹…é˜»å¡ï¼›</li>
<li><strong>é¿å…å¤§äº‹åŠ¡</strong>ï¼šå°†å¤§äº‹åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå°äº‹åŠ¡ï¼Œå‡å°‘é”çš„æŒæœ‰æ—¶é—´å’Œé”å®šèŒƒå›´ã€‚</li>
</ol>
<h3 data-id="heading-82">å…­ã€MySQL é”æœºåˆ¶ä¼˜åŒ–æœ€ä½³å®è·µ</h3>
<p>MySQL é”æœºåˆ¶çš„ä¼˜åŒ–æ ¸å¿ƒæ˜¯<strong>å‡å°‘é”å†²çªã€ç¼©çŸ­é”æŒæœ‰æ—¶é—´ã€æå‡å¹¶å‘æ€§èƒ½</strong>ï¼Œç»“åˆç´¢å¼•ã€äº‹åŠ¡ã€é…ç½®ã€æ¶æ„å››ä¸ªç»´åº¦ï¼Œç»™å‡ºç”Ÿäº§å¯è½åœ°çš„æœ€ä½³å®è·µï¼Œè¦†ç›– 90% ä»¥ä¸Šçš„é”ä¼˜åŒ–åœºæ™¯ï¼š</p>
<h4 data-id="heading-83">6.1 ç´¢å¼•ä¼˜åŒ–ï¼šè¡Œçº§é”çš„åŸºç¡€</h4>
<ol>
<li>æ‰€æœ‰<strong>å†™æ“ä½œï¼ˆUPDATE/DELETE/FOR UPDATEï¼‰<strong>çš„ WHERE æ¡ä»¶å¿…é¡»</strong>ä½¿ç”¨ä¸»é”® / å”¯ä¸€ç´¢å¼• / æ™®é€šç´¢å¼•</strong>ï¼Œé¿å…è¡Œé”é€€è¡¨é”ï¼›</li>
<li>é¿å…<strong>éšå¼ç±»å‹è½¬æ¢ã€ä½¿ç”¨å‡½æ•°æ“ä½œç´¢å¼•</strong>ï¼Œå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼›</li>
<li>åˆç†è®¾è®¡ç´¢å¼•ï¼Œéµå¾ª<strong>æœ€å·¦åŒ¹é…ã€è¦†ç›–ç´¢å¼•ã€é¿å…å†—ä½™ç´¢å¼•</strong>åŸåˆ™ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ï¼Œå‡å°‘é”çš„æŒæœ‰æ—¶é—´ã€‚</li>
</ol>
<h4 data-id="heading-84">6.2 äº‹åŠ¡ä¼˜åŒ–ï¼šç¼©çŸ­é”æŒæœ‰æ—¶é—´</h4>
<ol>
<li>ä½¿ç”¨<strong>æ˜¾å¼äº‹åŠ¡</strong>ï¼Œæ›¿ä»£è‡ªåŠ¨æäº¤ï¼ˆautocommit=1ï¼‰ï¼Œç²¾å‡†æ§åˆ¶äº‹åŠ¡çš„å¼€å§‹å’Œç»“æŸï¼›</li>
<li><strong>äº‹åŠ¡ä¸­ä»…åŒ…å«æ ¸å¿ƒä¸šåŠ¡æ“ä½œ</strong>ï¼Œä¸æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆRPC è°ƒç”¨ã€æ–‡ä»¶è¯»å†™ã€ç¡çœ ï¼‰ï¼›</li>
<li>æ‹†åˆ†<strong>å¤§äº‹åŠ¡</strong>ä¸ºå¤šä¸ªå°äº‹åŠ¡ï¼Œå‡å°‘é”çš„æŒæœ‰æ—¶é—´å’Œé”å®šèŒƒå›´ï¼›</li>
<li>æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©<strong>åˆé€‚çš„éš”ç¦»çº§åˆ«</strong>ï¼šè¯»å¤šå†™å°‘ã€æ— éœ€è§£å†³å¹»è¯»çš„åœºæ™¯ï¼Œå¯å°†éš”ç¦»çº§åˆ«æ”¹ä¸º<strong>RC</strong>ï¼Œå…³é—­é—´éš™é”ï¼Œæå‡å¹¶å‘æ€§èƒ½ã€‚</li>
</ol>
<h4 data-id="heading-85">6.3 é…ç½®ä¼˜åŒ–ï¼šé€‚é…é«˜å¹¶å‘</h4>
<ol>
<li>é«˜å¹¶å‘æ‰¹é‡æ’å…¥åœºæ™¯ï¼Œå°†<code>innodb_autoinc_lock_mode</code>æ”¹ä¸º 2ï¼Œ<code>binlog_format</code>æ”¹ä¸º ROWï¼›</li>
<li>è®¾ç½®åˆç†çš„<strong>é”ç­‰å¾…è¶…æ—¶</strong>ï¼š<code>innodb_lock_wait_timeout=10</code>ï¼ˆç§’ï¼‰ï¼Œé¿å…æ°¸ä¹…é˜»å¡ï¼›</li>
<li>å¼€å¯æ­»é”æ—¥å¿—ï¼š<code>innodb_print_all_deadlocks=1</code>ï¼Œæ–¹ä¾¿å®šä½æ­»é”é—®é¢˜ï¼›</li>
<li>è°ƒå¤§ InnoDB ç¼“å†²æ± ï¼š<code>innodb_buffer_pool_size</code>è®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„ 50%-70%ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ï¼Œå‡å°‘é”å†²çªã€‚</li>
</ol>
<h4 data-id="heading-86">6.4 æ¶æ„ä¼˜åŒ–ï¼šä»å•åº“åˆ°åˆ†å¸ƒå¼</h4>
<ol>
<li><strong>è¯»å¤šå†™å°‘</strong>çš„åœºæ™¯ï¼Œä½¿ç”¨<strong>ä¸»ä»å¤åˆ¶ + è¯»å†™åˆ†ç¦»</strong>ï¼Œä¸»åº“è´Ÿè´£å†™æ“ä½œï¼ˆåŠ é”ï¼‰ï¼Œä»åº“è´Ÿè´£è¯»æ“ä½œï¼Œåˆ†æ•£æ•°æ®åº“å‹åŠ›ï¼›</li>
<li><strong>å•è¡¨æ•°æ®é‡è¿‡å¤§</strong>ï¼ˆåƒä¸‡ / äº¿çº§ï¼‰ï¼Œä½¿ç”¨<strong>åˆ†åº“åˆ†è¡¨</strong>ï¼Œå°†å¤§è¡¨æ‹†åˆ†ä¸ºå¤šä¸ªå°è¡¨ï¼Œåˆ†æ•£é”çš„å†²çªï¼›</li>
<li><strong>åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ï¼Œä½¿ç”¨<strong>Redis åˆ†å¸ƒå¼é” + MySQL è¡Œçº§é”</strong>ï¼Œè§£å†³è·¨å®ä¾‹çš„å¹¶å‘å†²çªï¼›</li>
<li>é¿å…<strong>è·¨åº“è”è¡¨æŸ¥è¯¢</strong>ï¼Œå°½é‡åœ¨ä¸šåŠ¡å±‚åšå…³è”ï¼Œå‡å°‘åˆ†å¸ƒå¼åœºæ™¯ä¸‹çš„é”å¤æ‚åº¦ã€‚</li>
</ol>
<h3 data-id="heading-87">ä¸ƒã€æ€»ç»“</h3>
<p>MySQL é”æœºåˆ¶æ˜¯æ•°æ®åº“å¹¶å‘æ§åˆ¶çš„æ ¸å¿ƒï¼Œ<strong>InnoDB çš„è¡Œçº§é”</strong>æ˜¯äº’è”ç½‘åç«¯å¼€å‘çš„é‡ç‚¹ï¼Œå…¶è®¾è®¡çš„æ ¸å¿ƒæ˜¯<strong>åŸºäºç´¢å¼•ã€ç»†ç²’åº¦ç®¡æ§ã€é«˜å¹¶å‘é€‚é…</strong>ã€‚æŒæ¡ MySQL é”æœºåˆ¶çš„å…³é”®ï¼Œä¸ä»…è¦ç†è§£å„ç±»é”çš„å®šä¹‰ã€ç‰¹æ€§ã€å…¼å®¹æ€§ï¼ˆé¢è¯•å…«è‚¡æ–‡ï¼‰ï¼Œæ›´è¦ç»“åˆ<strong>ä¸šåŠ¡åœºæ™¯</strong>é€‰æ‹©åˆé€‚çš„é”ç­–ç•¥ â€”â€”<strong>æ‚²è§‚é”é€‚ç”¨äºé«˜å†²çªåœºæ™¯ï¼Œä¹è§‚é”é€‚ç”¨äºä½å†²çªåœºæ™¯ï¼Œåˆ†å¸ƒå¼é”é€‚ç”¨äºè·¨å®ä¾‹åœºæ™¯</strong>ã€‚</p>
<p>ç”Ÿäº§ä¸­ç»å¤§å¤šæ•°çš„é”é—®é¢˜ï¼ˆé”é˜»å¡ã€æ­»é”ã€è¡Œé”é€€è¡¨é”ï¼‰ï¼Œæ ¹æºå¹¶éé”æœºåˆ¶æœ¬èº«ï¼Œè€Œæ˜¯<strong>ç´¢å¼•è®¾è®¡ä¸åˆç†ã€äº‹åŠ¡ç¼–å†™ä¸è§„èŒƒã€é”é€‰æ‹©ç­–ç•¥ä¸å½“</strong>ã€‚å› æ­¤ï¼Œé”æœºåˆ¶çš„ä¼˜åŒ–å¹¶éå­¤ç«‹çš„ï¼Œè€Œæ˜¯ä¸<strong>ç´¢å¼•ä¼˜åŒ–ã€äº‹åŠ¡ä¼˜åŒ–ã€æ¶æ„ä¼˜åŒ–</strong>æ·±åº¦ç»“åˆçš„ç³»ç»Ÿæ€§å·¥ç¨‹ã€‚</p>
<p>å¯¹äº Java åç«¯å¼€å‘è€Œè¨€ï¼ŒæŒæ¡ MySQL é”æœºåˆ¶æ˜¯åº”å¯¹å¤§å‚é¢è¯•ã€è§£å†³ç”Ÿäº§å¹¶å‘é—®é¢˜çš„å¿…å¤‡æŠ€èƒ½ï¼Œæ ¸å¿ƒåŸåˆ™å¯æ€»ç»“ä¸ºï¼š<strong>ç´¢å¼•ä¸ºåŸºã€äº‹åŠ¡ä¸ºçº²ã€é”éšåœºæ™¯ã€ä¼˜åŒ–éšè¡Œ</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HashMap çº¿ç¨‹ä¸å®‰å…¨æ€ä¹ˆåŠï¼Ÿä» Hashtable åˆ° ConcurrentHashMap çš„å®Œç¾è§£ç­”]]></title>    <link>https://juejin.cn/post/7598734303174098996</link>    <guid>https://juejin.cn/post/7598734303174098996</guid>    <pubDate>2026-01-25T13:25:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598734303174098996" data-draft-id="7597266967139139618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HashMap çº¿ç¨‹ä¸å®‰å…¨æ€ä¹ˆåŠï¼Ÿä» Hashtable åˆ° ConcurrentHashMap çš„å®Œç¾è§£ç­”"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-25T13:25:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·49793230963"/> <meta itemprop="url" content="https://juejin.cn/user/4461159469290944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HashMap çº¿ç¨‹ä¸å®‰å…¨æ€ä¹ˆåŠï¼Ÿä» Hashtable åˆ° ConcurrentHashMap çš„å®Œç¾è§£ç­”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4461159469290944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·49793230963
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T13:25:59.000Z" title="Sun Jan 25 2026 13:25:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€œåœ¨ Java é›†åˆæ¡†æ¶ä½“ç³»ä¸­ï¼Œå®¹å™¨ä¸»è¦æ ¹æ®å¹¶å‘ç‰¹æ€§åˆ’åˆ†ä¸º<strong>çº¿ç¨‹å®‰å…¨</strong>ä¸<strong>éçº¿ç¨‹å®‰å…¨</strong>ä¸¤å¤§é˜µè¥ã€‚çºµè§‚ JDK çš„è¿­ä»£å†ç¨‹ï¼Œå®¹å™¨çš„æ¼”è¿›æœ¬è´¨ä¸Šæ˜¯è®¾è®¡è€…åœ¨**å¹¶å‘å®‰å…¨ï¼ˆSafetyï¼‰<strong>ä¸</strong>æ‰§è¡Œæ€§èƒ½ï¼ˆPerformanceï¼‰**ä¹‹é—´ä¸æ–­æƒè¡¡ä¸åšå¼ˆçš„è¿‡ç¨‹ã€‚è¿™ä¸€æ¼”è¿›è„‰ç»œï¼Œä¸ä»…è®°å½•äº†æŠ€æœ¯çš„æ›´è¿­ï¼Œæ›´ä¸ºæˆ‘ä»¬æ·±å…¥ç†è§£å¹¶å‘ç¼–ç¨‹çš„è®¾è®¡å“²å­¦æä¾›äº†å®è´µçš„èŒƒæœ¬ã€‚â€</p>
<p>é‚£ä¹ˆä»€ä¹ˆæ˜¯â€œçº¿ç¨‹å®‰å…¨â€ï¼Ÿ
æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹çº¿ç¨‹å®‰å…¨çš„å®šä¹‰ï¼š
<strong>Brian Goetz ç»™å‡ºçš„å®šä¹‰æ˜¯ï¼š</strong></p>
<blockquote>
<p>â€œå½“å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªç±»æ—¶ï¼Œå¦‚æœä¸ç”¨è€ƒè™‘è¿™äº›çº¿ç¨‹åœ¨è¿è¡Œæ—¶ç¯å¢ƒä¸‹çš„è°ƒåº¦å’Œäº¤æ›¿æ‰§è¡Œï¼Œå¹¶ä¸”ä¸éœ€è¦é¢å¤–çš„åŒæ­¥ï¼Œè¿™ä¸ªç±»éƒ½èƒ½è¡¨ç°å‡º<strong>æ­£ç¡®çš„è¡Œä¸º</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚â€</p>
</blockquote>
<p>ä¸ºäº†æ›´å¥½ç†è§£ï¼Œå¯ä»¥å°†è¿™ä¸ªå®šä¹‰æ‹†è§£ä¸ºä¸‰ä¸ªå…³é”®è¯ï¼š</p>
<ul>
<li>
<p><strong>å¤šçº¿ç¨‹è®¿é—®</strong>ï¼šè¿™æ˜¯å‰ææ¡ä»¶ã€‚å¦‚æœæ˜¯å•çº¿ç¨‹ï¼Œè°ˆè®ºçº¿ç¨‹å®‰å…¨æ²¡æœ‰æ„ä¹‰ã€‚</p>
</li>
<li>
<p><strong>æ— é¡»é¢å¤–åŒæ­¥</strong>ï¼šä½¿ç”¨è€…ï¼ˆè°ƒç”¨æ–¹ï¼‰ä¸éœ€è¦è‡ªå·±åŠ é”ï¼ˆå¦‚ <code>synchronized</code> æˆ– <code>Lock</code>ï¼‰ï¼Œè¿™ä¸ªç±»å†…éƒ¨å·²ç»å¤„ç†å¥½äº†ã€‚</p>
</li>
<li>
<p><strong>æ­£ç¡®çš„è¡Œä¸º</strong>ï¼šæ— è®ºçº¿ç¨‹æ€ä¹ˆæŠ¢å  CPUï¼Œç»“æœæ°¸è¿œç¬¦åˆé¢„æœŸã€‚æ¯”å¦‚è®¡æ•°å™¨ä¸ä¼šå°‘ç®—ï¼Œè½¬è´¦é‡‘é¢ä¸ä¼šå‡­ç©ºæ¶ˆå¤±ã€‚</p>
</li>
</ul>
<p>å…¶å®å…¶å®æ‰€è°“çš„å®‰å…¨ æ— éå°±æ˜¯è§£å†³äº†è¿™ä¸‰ä¸ªé—®é¢˜</p>
<ul>
<li>
<p><strong>åŸå­æ€§ (Atomicity)</strong> ï¼šæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨ä¸æ‰§è¡Œï¼Œä¸èƒ½è¢«ä¸­æ–­ã€‚ï¼ˆä¾‹å¦‚ï¼š<code>i++</code> ä¸æ˜¯åŸå­çš„ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å¯è§æ€§ (Visibility)</strong> ï¼šä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æ•°æ®ï¼Œå…¶ä»–çº¿ç¨‹èƒ½ç«‹åˆ»çœ‹åˆ°ã€‚ï¼ˆä¾‹å¦‚ï¼š<code>volatile</code> å…³é”®å­—ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æœ‰åºæ€§ (Ordering)</strong> ï¼šç¨‹åºä»£ç æŒ‰ç…§é¢„æœŸçš„é¡ºåºæ‰§è¡Œï¼Œç¦æ­¢æŒ‡ä»¤é‡æ’ã€‚
è¿™ä¸‰ä¸ªé—®é¢˜ä¹Ÿæ˜¯å¹¶å‘ç¼–ç¨‹çš„ä¸‰å¤§æ ¸å¿ƒ ä»å†…åœ¨çš„JMM åˆ°è¡¨ç°åœ¨ç¨‹åºé‡Œé¢çš„volatile synchronized RLock å†åˆ°æ— é”æ“ä½œCASæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸ºäº†åœ¨ä¿è¯ä¸€å®šæ€§èƒ½çš„åŒæ—¶å»è§£å†³ åŸå­æ€§ å¯è§æ€§ æœ‰åºæ€§ã€‚</p>
</li>
</ul>
<p>ä»æœ€æ—©çš„â€œå…¨è¡¨é”â€åˆ°ç°åœ¨çš„â€œæ— é”åŒ–ï¼ˆCASï¼‰â€å’Œâ€œåˆ†æ®µæ€æƒ³â€ï¼ŒJDK çš„æ¯ä¸€æ¬¡è¿­ä»£éƒ½åœ¨è¯•å›¾è§£å†³ä¸€ä¸ªæ ¸å¿ƒçŸ›ç›¾ï¼š<strong>å¦‚ä½•åœ¨ä¿è¯æ•°æ®ä¸ä¹±çš„å‰æä¸‹ï¼Œè®©å¤šçº¿ç¨‹è·‘å¾—æ›´å¿«ï¼Ÿ</strong></p>
<p>æˆ‘å°† Java å®¹å™¨çš„å‘å±•åˆ†ä¸º<strong>ä¸‰ä¸ªæ—¶ä»£</strong>ï¼Œä¸ºä½ æ¢³ç†è¿™æ¡æ¼”è¿›ä¹‹è·¯ï¼š</p>
<h4 data-id="heading-0">ç¬¬ä¸€æ—¶ä»£ï¼šä¸Šå¤æ—¶ä»£çš„â€œç»å¯¹å®‰å…¨â€ (JDK 1.0)</h4>
<p>æ­¤æ—¶çš„JDKå¤„äºåˆšåˆšå‘å±•é˜¶æ®µ ä¸ºäº†ä¿è¯å®‰å…¨å®æ„¿è¿™ä¸ªå®ç°çš„æ–¹å¼ç®€å•ç²—æš´</p>
<p>è§‚çœ‹HashTableçš„æºç  å‘ç°å®ƒæ¶‰åŠåˆ°ä¿®æ”¹æ“ä½œçš„æ–¹æ³•éƒ½æ˜¯è¢«synchronized å…³é”®å­—åŒ…å›´çš„ æ¯”å¦‚è¯´</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f4270ae57ff41e8849d65c1ee81a864~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NDk3OTMyMzA5NjM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769952359&amp;x-signature=uuyMbDqaSkdePTjxBftEPCg0GBQ%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ç§æ“ä½œæ— ç–‘å¯ä»¥ä¿è¯å¤šçº¿ç¨‹ä¸‹çš„ å¯è§æ€§ åŸå­æ€§ æœ‰åºæ€§ å› ä¸ºåŠ é”æœ¬è´¨ä¸Šå°±æ˜¯åªå…è®¸åŒä¸€æ—¶é—´ åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å»è¿›è¡Œæ“ä½œ ä½†æ˜¯è¿™ç§è®¾è®¡çœŸçš„å¤Ÿä¼˜é›…å— ç­”æ¡ˆæ˜¯å¦å®šçš„ æœ¬è´¨ä¸ŠåŠ é”çš„æ“ä½œæå¤§çš„å½±å“äº†æ€§èƒ½ æˆ‘ä»¬å¯èƒ½å¾ˆå¤šæ—¶å€™åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œ æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§æ›´å¿«é€Ÿçš„å®¹å™¨</p>
<h4 data-id="heading-1">ç¬¬äºŒæ—¶ä»£ï¼šæ€§èƒ½è§‰é†’çš„â€œè£¸å¥”æ—¶ä»£â€ (JDK 1.2)</h4>
<p>åœ¨ç»å†äº† JDK 1.0 ä¸­ <code>Vector</code> å’Œ <code>Hashtable</code> çš„â€œç¬¨é‡â€ä¹‹åï¼ŒJDK 1.2 è¿æ¥äº†ä¸€æ¬¡å½»åº•çš„<strong>æ€æƒ³è§£æ”¾</strong>ã€‚è®¾è®¡è€…æ„è¯†åˆ°ï¼šåœ¨ç»å¤§å¤šæ•°å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œå®¹å™¨ä»…ä»…æ˜¯åœ¨<strong>å•çº¿ç¨‹</strong>ç¯å¢ƒä¸‹ä½œä¸ºå±€éƒ¨å˜é‡ä½¿ç”¨çš„ã€‚</p>
<p>ä¸ºäº†é‚£ 1% çš„å¹¶å‘åœºæ™¯ï¼Œè®© 99% çš„å•çº¿ç¨‹åœºæ™¯éƒ½èƒŒè´Ÿæ²‰é‡çš„é”ç«äº‰å¼€é”€ï¼Œè¿™æ˜¯æä¸åˆ’ç®—çš„ã€‚äºæ˜¯ï¼Œ <strong>â€œæ€§èƒ½è‡³ä¸Šâ€</strong> æˆä¸ºäº†è¿™ä¸€æ—¶æœŸçš„ç»å¯¹ä¿¡æ¡ã€‚</p>
<p>æ ‡é¢˜æ‰€è¯´çš„HashMapæ­£æ˜¯è¿™ä¸ªé˜¶æ®µè¯ç”Ÿçš„ è§‚çœ‹æºç å¯ä»¥çœ‹å‡º æ­¤æ—¶çš„å®¹å™¨å‘å±•å®Œå…¨ç‰ºç‰²äº†å¹¶å‘å®‰å…¨è¿™ä¸ªè¦ç´  å®ƒçš„æ‰€æœ‰æ“ä½œéƒ½æ²¡æœ‰é” è¿™ä¹Ÿå¯¼è‡´äº†æ€§èƒ½çš„æè‡´ ä½†ä¹Ÿä¸ºå¹¶å‘å®‰å…¨æ€§åŸ‹ä¸‹äº†éšæ‚£</p>
<ul>
<li><strong>JDK 1.7</strong>ï¼šå¤šçº¿ç¨‹æ‰©å®¹ä¼šå¯¼è‡´é“¾è¡¨æˆç¯ï¼ŒCPU é£™å‡ 100%ã€‚</li>
<li><strong>JDK 1.8</strong>ï¼šå¤šçº¿ç¨‹ Put ä¼šå¯¼è‡´æ•°æ®ç›´æ¥è¦†ç›–ï¼ˆä¸¢å¤±ï¼‰ã€‚</li>
<li><strong>ä½†è¿™ä¸é‡è¦</strong>ï¼šåœ¨è®¾è®¡è€…çš„çœ¼é‡Œï¼Œè¿™äº›é—®é¢˜æ˜¯ä½¿ç”¨è€…åº”è¯¥å»è§„é¿çš„ï¼Œå®¹å™¨æœ¬èº«çš„èŒè´£å°±æ˜¯<strong>å¿«</strong>ã€‚</li>
</ul>
<p>å¯æ˜¯æˆ‘ä»¬çœŸçš„æ²¡æœ‰åŠæ³•åœ¨å¹¶å‘å®‰å…¨å’Œæ€§èƒ½åšä¸€ä¸ªå¹³è¡¡ çœŸçš„åšä¸åˆ°æ—¢è¦åˆè¦å— ç­”æ¡ˆæ˜¯å¦å®šçš„</p>
<h4 data-id="heading-2">ç¬¬ä¸‰æ—¶ä»£ï¼šå¹¶å‘å¤§å¸ˆçš„â€œé»„é‡‘æ—¶ä»£â€ (JDK 1.5 - J.U.C)</h4>
<p>åœ¨è¿™ä¸ªå……æ»¡è®¾è®¡è€…æ™ºæ…§çš„ç‰ˆæœ¬ä¸­ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è®¸å¤šè®¾è®¡ç²¾å¦™çš„å®¹å™¨ å°±æ¯”å¦‚æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’ConcurrentHashMap</p>
<p>æˆ‘ä»¬å°† CHM çš„æ¼”è¿›åˆ†ä¸ºä¸¤ä¸ªæ—¶ä»£ï¼š<strong>JDK 1.7 çš„â€œåˆ†æ®µé”æ—¶ä»£â€</strong> å’Œ <strong>JDK 1.8 çš„â€œCAS + çº¢é»‘æ ‘æ—¶ä»£â€</strong> ã€‚</p>
<p><strong>ç¬¬ä¸€éƒ¨åˆ†ï¼šJDK 1.7 â€”â€” åˆ†æ®µé” (Segment Locking)</strong>
åœ¨ JDK 1.7 ä¸­ï¼Œè®¾è®¡è€… Doug Lea çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š <strong>â€œå¤§åŒ–å°â€</strong> ã€‚æ—¢ç„¶é”æ•´ä¸ªå¤§æ•°ç»„å¤ªæ…¢ï¼Œé‚£æˆ‘å°±æŠŠå®ƒåˆ‡æˆå‡ å—ï¼ˆSegmentsï¼‰ï¼Œæ¯ä¸€å—è‡ªå·±ç®¡è‡ªå·±çš„é”ã€‚</p>
<h4 data-id="heading-3">1. æ ¸å¿ƒç»“æ„</h4>
<ul>
<li><strong>Segment æ•°ç»„ + HashEntry æ•°ç»„</strong>ã€‚</li>
<li>ä¸€ä¸ª <code>ConcurrentHashMap</code> å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª <code>Segment</code> æ•°ç»„ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š<code>Segment</code> è¿™ä¸ªç±»ç›´æ¥ç»§æ‰¿äº† <code>ReentrantLock</code>ã€‚è¿™æ„å‘³ç€æ¯ä¸ª Segment æœ¬èº«å°±æ˜¯ä¸€æŠŠé”ã€‚</li>
<li>é»˜è®¤ <code>concurrencyLevel = 16</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æ•´ä¸ª Map è¢«åˆ†æˆäº† 16 ä¸ªå°éš”é—´ã€‚ç†è®ºä¸Šæ”¯æŒ 16 ä¸ªçº¿ç¨‹åŒæ—¶å¹¶å‘å†™å…¥ï¼ˆåªè¦å®ƒä»¬ hash åˆ°ä¸åŒçš„ Segmentï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-4">2. Put æ“ä½œæµç¨‹</h4>
<ol>
<li>
<p><strong>Hash è®¡ç®—</strong>ï¼šå…ˆé€šè¿‡ Hash ç®—æ³•å®šä½åˆ°å…·ä½“çš„ <code>Segment</code>ã€‚</p>
</li>
<li>
<p><strong>è·å–é”</strong>ï¼šå½“å‰çº¿ç¨‹å°è¯•è·å–è¿™ä¸ª Segment çš„é” (<code>tryLock</code>)ã€‚</p>
<ul>
<li>å¦‚æœè·å–å¤±è´¥ï¼Œä¼šä½¿ç”¨<strong>è‡ªæ—‹æœºåˆ¶</strong>ï¼ˆSCANNINGï¼‰ï¼Œé‡è¯•ä¸€å®šæ¬¡æ•°åå¦‚æœè¿˜æ‹¿ä¸åˆ°ï¼Œæ‰è¿›å…¥é˜»å¡çŠ¶æ€ï¼ˆæŒ‚èµ·ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å†™å…¥</strong>ï¼šæ‹¿åˆ°é”åï¼Œå°±åƒæ“ä½œä¸€ä¸ªæ™®é€šçš„ HashMap ä¸€æ ·ï¼Œæ“ä½œå†…éƒ¨çš„ <code>HashEntry</code> æ•°ç»„ï¼ˆé“¾è¡¨æ’å…¥ï¼‰ã€‚</p>
</li>
<li>
<p><strong>é‡Šæ”¾é”</strong>ã€‚</p>
</li>
</ol>
<h4 data-id="heading-5">3. Get æ“ä½œ (é«˜æ•ˆçš„ç§˜è¯€)</h4>
<ul>
<li>
<p><strong>ä¸åŠ é”</strong></p>
</li>
<li>
<p><strong>åŸç†</strong>ï¼š<code>HashEntry</code> ä¸­çš„ <code>value</code> å±æ€§æ˜¯è¢« <code>volatile</code> ä¿®é¥°çš„ã€‚</p>
<p>Java</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashEntry</span>&lt;K,V&gt; {
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> hash;
    <span class="hljs-keyword">final</span> K key;
    <span class="hljs-keyword">volatile</span> V value; <span class="hljs-comment">// é‡ç‚¹ï¼šä¿è¯å¯è§æ€§</span>
    <span class="hljs-keyword">volatile</span> HashEntry&lt;K,V&gt; next;
}
</code></pre>
</li>
<li>
<p>ç”±äº volatile çš„å¯è§æ€§ï¼Œå†™çº¿ç¨‹ä¿®æ”¹å®Œï¼Œè¯»çº¿ç¨‹èƒ½ç«‹åˆ»çœ‹åˆ°ï¼Œæ‰€ä»¥è¯»æ“ä½œå®Œå…¨æ— é”ï¼Œæ€§èƒ½æé«˜ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">4. Size æ“ä½œ (è·¨æ®µç»Ÿè®¡çš„éš¾é¢˜)</h4>
<p>æ€ä¹ˆç»Ÿè®¡æ€»æ•°ï¼Ÿæ•°æ®åˆ†æ•£åœ¨ 16 ä¸ªæ¡¶é‡Œï¼Œä¸”éšæ—¶æœ‰äººåœ¨å†™ã€‚</p>
<ul>
<li><strong>æœºåˆ¶</strong>ï¼šå…ˆå°è¯• <strong>â€œä¸åŠ é”â€</strong> ç»Ÿè®¡å‡ æ¬¡ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰ã€‚</li>
<li>å¦‚æœåœ¨ç»Ÿè®¡è¿‡ç¨‹ä¸­ï¼Œå‘ç° <code>modCount</code> (ä¿®æ”¹æ¬¡æ•°) æ²¡å˜ï¼Œè¯´æ˜æ²¡äººæ£ä¹±ï¼Œç›´æ¥è¿”å›ã€‚</li>
<li>å¦‚æœå‘ç° <code>modCount</code> å˜äº†ï¼Œè¯´æ˜æœ‰äººåœ¨å†™ï¼Œåªå¥½<strong>å¼ºåˆ¶é”ä½æ‰€æœ‰ Segment</strong> (å…¨å±€é”)ï¼Œç»Ÿè®¡å®Œå†è§£é”ã€‚è¿™æ˜¯ä¸€æ¬¡æ˜‚è´µçš„æ“ä½œã€‚</li>
</ul>
<p>ä½†æ˜¯è¿™ç§æ–¹æ³•åœ¨éšç€ç¡¬ä»¶æ€§èƒ½æå‡å’Œ JVM å¯¹ <code>synchronized</code> çš„å¤§å¹…ä¼˜åŒ–ï¼ŒJDK 1.7 çš„ <code>Segment</code> æ˜¾å¾—è‡ƒè‚¿äº†ï¼ˆä¸ºäº†ç»´æŠ¤ Segmentï¼Œå†…å­˜æµªè´¹ä¸¥é‡ï¼‰æ‰€ä»¥å°±æœ‰äº† JDK 1.8çš„ä¼˜åŒ– ä¹Ÿå°±æ˜¯ç°åœ¨çš„ CHM</p>
<h4 data-id="heading-7">ç¬¬äºŒéƒ¨åˆ†ï¼šJDK 1.8 â€”â€” CAS + Synchronized + çº¢é»‘æ ‘</h4>
<p>1.8 çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š <strong>åŸå­åŒ–</strong> å’Œ <strong>æ•°æ®ç»“æ„é™ç»´æ‰“å‡»</strong> ã€‚å®ƒæŠ›å¼ƒäº† Segmentï¼Œç›´æ¥å›åˆ°äº†ç±»ä¼¼ HashMap çš„å¤§æ•°ç»„ç»“æ„ï¼Œä½†åœ¨ç»†èŠ‚ä¸Šåšåˆ°äº†æè‡´ã€‚</p>
<p>è¿™ä¸€è®¾è®¡è½¬å˜åŸºäºä¸€ä¸ªå…³é”®çš„å·¥ç¨‹æ´å¯Ÿï¼šåœ¨å¤§å¤šæ•°å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œ<strong>Hash å†²çªçš„å‘ç”Ÿæ¦‚ç‡æä½</strong>ã€‚åŸºäºæ­¤ï¼ŒJDK 1.8 é‡‡å–äº†æ›´ä¸ºæ¿€è¿›ä¸”é«˜æ•ˆçš„åŠ é”ç­–ç•¥â€”â€”<strong>ç›´æ¥é”å®š Hash æ¡¶çš„å¤´èŠ‚ç‚¹ (Head Node)</strong> ã€‚è¿™ä¸€ä¼˜åŒ–å°†é”çš„ç²’åº¦ä»åŸæœ¬çš„æ®µçº§åˆ«ï¼ˆ1/16ï¼‰æ€¥å‰§ç»†åŒ–è‡³æ¡¶çº§åˆ«ï¼ˆ1/Nï¼‰ï¼Œåœ¨ä¿è¯å®‰å…¨çš„å‰æä¸‹ï¼Œæœ€å¤§é™åº¦åœ°é‡Šæ”¾äº†å¹¶å‘æ€§èƒ½ã€‚â€ï¼‰</p>
<h4 data-id="heading-8">2. Put æ“ä½œæµç¨‹</h4>
<p>è¿™æ˜¯é¢è¯•çš„é‡ç¾åŒºï¼Œä¹Ÿæ˜¯æˆ‘ä¸ªäººè®¤ä¸ºCCHè®¾è®¡æœ€ä¸ºç²¾å¦™çš„ä¸€ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>åˆ¤æ–­åˆå§‹åŒ–</strong>ï¼šå¦‚æœ table ä¸ºç©ºï¼Œè°ƒç”¨ <code>initTable()</code> åˆå§‹åŒ–ï¼ˆåˆ©ç”¨ CAS ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹åˆå§‹åŒ–æˆåŠŸï¼‰ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®— Hash</strong>ï¼šå®šä½åˆ°æ•°ç»„ä¸‹æ ‡ <code>i</code>ã€‚</p>
</li>
<li>
<p><strong>Case 1ï¼šæ¡¶æ˜¯ç©ºçš„ (No Collision)</strong></p>
<ul>
<li><strong>CAS æ— é”æ’å…¥</strong>ï¼šç›´æ¥åˆ©ç”¨ <code>CAS</code> æŒ‡ä»¤å°è¯•æŠŠæ–°èŠ‚ç‚¹æ”¾å…¥è¯¥ä½ç½®ã€‚</li>
<li>å¦‚æœæˆåŠŸï¼Œå®Œäº‹ã€‚å¦‚æœå¤±è´¥ï¼ˆè¯´æ˜ç¬é—´æœ‰äººæŠ¢äº†ï¼‰ï¼Œè¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>Case 2ï¼šå‘ç°æ­£åœ¨æ‰©å®¹ (MOVED)</strong></p>
<ul>
<li>å¦‚æœå‘ç°è¯¥ä½ç½®çš„èŠ‚ç‚¹çš„ hash å€¼æ˜¯ <code>MOVED (-1)</code>ï¼Œè¯´æ˜å½“å‰ Map æ­£åœ¨æ‰©å®¹ã€‚</li>
<li><strong>å¸®å¿™æ‰©å®¹ (Help Transfer)</strong> ï¼šå½“å‰çº¿ç¨‹ä¸å¹²æ´»äº†ï¼ŒåŠ å…¥æ‰©å®¹å¤§å†›ï¼Œå¸®å¿™æŠŠæ•°æ®æ¬åˆ°æ–°æ•°ç»„å»ï¼ˆä¼—ç­¹æ‰©å®¹ï¼Œéå¸¸æœ‰æ„æ€çš„è®¾è®¡ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>Case 3ï¼šå‘ç”Ÿå“ˆå¸Œå†²çª (Collision)</strong></p>
<ul>
<li><strong>Synchronized é”å¤´èŠ‚ç‚¹</strong>ï¼šåªé”ä½å½“å‰è¿™ä¸ªæ¡¶çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li>
<li>è¿›å…¥é”å—åï¼Œéå†é“¾è¡¨æˆ–çº¢é»‘æ ‘è¿›è¡Œæ’å…¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>è½¬æ ‘</strong>ï¼šå¦‚æœé“¾è¡¨é•¿åº¦ &gt; 8 ä¸”æ•°ç»„é•¿åº¦ &gt;= 64ï¼Œå°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ã€‚</p>
</li>
</ol>
<h4 data-id="heading-9">3. ä¸ºä»€ä¹ˆ 1.8 æŠ›å¼ƒ ReentrantLock æ”¹ç”¨ Synchronizedï¼Ÿ</h4>
<ol>
<li><strong>èŠ‚çœå†…å­˜</strong>ï¼š<code>ReentrantLock</code> éœ€è¦ç»§æ‰¿ AQSï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ç»§æ‰¿è¿™ç©æ„å„¿ï¼Œå†…å­˜æ¶ˆè€—å¤ªå¤§ã€‚è€Œ <code>synchronized</code> æ˜¯ JVM åŸç”Ÿçš„ï¼Œé”ä¿¡æ¯å­˜åœ¨å¯¹è±¡å¤´ï¼ˆMark Wordï¼‰é‡Œï¼Œå‡ ä¹é›¶é¢å¤–å¼€é”€ã€‚</li>
<li><strong>JVM ä¼˜åŒ–</strong>ï¼šJDK 6 ä»¥åï¼ŒJVM å›¢é˜Ÿå¯¹ <code>synchronized</code> åšäº†æƒŠäººçš„ä¼˜åŒ–ï¼ˆåå‘é”ã€è½»é‡çº§é”ã€é”æ¶ˆé™¤ã€é”ç²—åŒ–ï¼‰ã€‚åœ¨ä½ç«äº‰ä¸‹ï¼Œå®ƒçš„æ€§èƒ½å·²ç»ä¼˜äº ReentrantLockã€‚</li>
</ol>
<h4 data-id="heading-10">4. Size æ“ä½œ (LongAdder æ€æƒ³)</h4>
<p>1.8 ç”šè‡³ä¼˜åŒ–äº†è®¡æ•°å™¨ã€‚å®ƒä¸å†çº ç»“äºç»Ÿè®¡æ‰€æœ‰æ¡¶ï¼Œè€Œæ˜¯å¼•å…¥äº†ç±»ä¼¼ <code>LongAdder</code> çš„æœºåˆ¶ï¼š</p>
<ul>
<li><strong>baseCount</strong>ï¼šåŸºç¡€è®¡æ•°å™¨ã€‚</li>
<li><strong>CounterCell æ•°ç»„</strong>ï¼šå¦‚æœå¹¶å‘å¤ªé«˜ï¼ŒCAS ä¿®æ”¹ <code>baseCount</code> å¤±è´¥ï¼Œå°±éšæœºæ‰¾ä¸€ä¸ª <code>CounterCell</code> å»åŠ ã€‚</li>
<li><strong>æœ€ç»ˆç»“æœ</strong> = <code>baseCount</code> + <code>sum(CounterCell[])</code>ã€‚</li>
<li>è¿™ä½¿å¾— <code>size()</code> åœ¨é«˜å¹¶å‘ä¸‹æ€§èƒ½é£å‡ã€‚</li>
<li/>
</ul>
<p>JDK 1.7 çš„ ConcurrentHashMap åƒæ˜¯<strong>åŒ…å·¥å¤´åˆ¶åº¦</strong>ï¼ˆSegmentï¼‰ï¼Œæ¯ä¸ªåŒ…å·¥å¤´ç®¡ä¸€ç‰‡åœ°ï¼Œè™½ç„¶æ¯”å…¨å‚åªæœ‰ä¸€ä¸ªç®¡ç†å‘˜ï¼ˆHashtableï¼‰å¼ºï¼Œä½†ç®¡ç†æˆæœ¬è¿˜æ˜¯é«˜ã€‚ è€Œ JDK 1.8 åˆ™æ˜¯<strong>è‡ªåŠ¨åŒ– + æ‰å¹³åŒ–ç®¡ç†</strong>ã€‚å¹³æ—¶å¤§å®¶ç”¨ CASï¼ˆæ— é”ï¼‰å¿«é€Ÿé€šè¿‡ï¼ŒçœŸé‡åˆ°å†²çªäº†ï¼Œåªé”å½“å‰é‚£ä¸€ä¸ªå·¥ä½ï¼ˆSynchronizedï¼‰ï¼Œè€Œä¸”å¼•å…¥äº†çº¢é»‘æ ‘è§£å†³é•¿é˜Ÿé—®é¢˜ï¼Œå¼•å…¥äº† LongAdder è§£å†³ç»Ÿè®¡é—®é¢˜ï¼Œæ˜¯ç›®å‰çš„æ€§èƒ½å¤©èŠ±æ¿ã€‚</p>
<p>æ­£å› å…¶å“è¶Šçš„å¹¶å‘æ€§èƒ½ï¼Œå®ƒæˆä¸ºäº†ä¼—å¤šä¸»æµæ¡†æ¶åº•å±‚æ¶æ„çš„<strong>åŸºçŸ³</strong>ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¤§å®¶éƒ½å†åœ¨ç”¨çš„Spring æ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶â€”â€”<strong>Bean å®¹å™¨</strong>ï¼Œå…¶åº•å±‚æ­£æ˜¯åˆ©ç”¨ ConcurrentHashMap æ¥ç®¡ç†å•ä¾‹å¯¹è±¡ï¼ˆSingleton Objectsï¼‰ï¼Œä»è€Œåœ¨æé«˜çš„å¹¶å‘è®¿é—®ä¸‹ä¿éšœäº†å®¹å™¨çš„çº¿ç¨‹å®‰å…¨ã€‚</p>
<h4 data-id="heading-11">ç»“å°¾</h4>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒJava å®¹å™¨çš„æ¼”è¿›å†ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€éƒ¨é”ç²’åº¦ä¸æ–­ç»†åŒ–çš„å˜é©å²ã€‚</p>
<p>è¿™ä¸€è¿‡ç¨‹å§‹ç»ˆè´¯ç©¿ç€ä¸€æ¡ä¸»çº¿ï¼š<strong>åœ¨â€˜å¹¶å‘å®‰å…¨â€™çš„åº•çº¿ä¹‹ä¸Šï¼Œå‘â€˜å•çº¿ç¨‹æ•ˆç‡â€™å‘èµ·æ— é™é€¼è¿‘çš„æŒ‘æˆ˜ã€‚</strong> è¿™ä¸ä»…æ˜¯æŠ€æœ¯æŒ‡æ ‡çš„æå‡ï¼Œæ›´å‡èšäº†å¼€å‘è€…åœ¨å–èˆä¹‹é—´çš„å·¥ç¨‹æ™ºæ…§ã€‚</p>
<p>æ·±å…¥ç†è§£è¿™æ®µå†å²ï¼Œä¸ä»…èƒ½è®©æˆ‘ä»¬æŒæ¡åº•å±‚åŸç†ï¼Œæ›´èƒ½æ½œç§»é»˜åŒ–åœ°æå‡æˆ‘ä»¬çš„<strong>å¹¶å‘è®¾è®¡æ„è¯†</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åå¤§æ’åº]]></title>    <link>https://juejin.cn/post/7598947628467912750</link>    <guid>https://juejin.cn/post/7598947628467912750</guid>    <pubDate>2026-01-25T13:42:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598947628467912750" data-draft-id="7598921649888542747" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åå¤§æ’åº"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-25T13:42:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lulaaaa"/> <meta itemprop="url" content="https://juejin.cn/user/3804728203425918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åå¤§æ’åº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3804728203425918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lulaaaa
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T13:42:33.000Z" title="Sun Jan 25 2026 13:42:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åå¤§æ’åºç®—æ³•</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>æ’åºç®—æ³•æ˜¯ç¼–ç¨‹çš„åŸºç¡€æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œæ ¹æ®æ˜¯å¦ä¾èµ–ã€Œå…ƒç´ æ¯”è¾ƒã€å¯åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li><strong>æ¯”è¾ƒç±»æ’åº</strong>ï¼šé€šè¿‡æ¯”è¾ƒå…ƒç´ å¤§å°ç¡®å®šé¡ºåºï¼Œæ—¶é—´å¤æ‚åº¦æœ€ä½ä¸º O(nlogn)ï¼ŒåŒ…å«å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å¸Œå°”ã€å½’å¹¶ã€å¿«é€Ÿã€å †æ’åºï¼›</li>
<li><strong>éæ¯”è¾ƒç±»æ’åº</strong>ï¼šåˆ©ç”¨æ•°å€¼ç‰¹å¾ï¼ˆå¦‚ä½æ•°ã€èŒƒå›´ï¼‰æ’åºï¼Œæ—¶é—´å¤æ‚åº¦å¯è¾¾ O(n)ï¼ŒåŒ…å«è®¡æ•°ã€æ¡¶ã€åŸºæ•°æ’åºã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒæ¦‚å¿µé“ºå«</strong>ï¼š</p>
<ul>
<li><strong>æ’åºç¨³å®šæ€§</strong>ï¼šè‹¥æ’åºåï¼Œä¸¤ä¸ªç›¸ç­‰å€¼çš„å…ƒç´ ç›¸å¯¹ä½ç½®ä¸æ’åºå‰ä¸€è‡´ï¼Œåˆ™ä¸ºã€Œç¨³å®šæ’åºã€ï¼›å¦åˆ™ä¸ºã€Œä¸ç¨³å®šæ’åºã€ï¼ˆå¦‚ <code>[2,2,1]</code> æ’åºåï¼Œç¬¬ä¸€ä¸ª 2 ä»åœ¨ç¬¬äºŒä¸ª 2 å‰åˆ™ç¨³å®šï¼‰ã€‚</li>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šç®—æ³•æ‰§è¡Œæ—¶é—´éšæ•°æ®è§„æ¨¡å¢é•¿çš„è¶‹åŠ¿ï¼›</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šç®—æ³•å ç”¨é¢å¤–ç©ºé—´éšæ•°æ®è§„æ¨¡å¢é•¿çš„è¶‹åŠ¿ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">1. å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</h3>
<h4 data-id="heading-3">æ ¸å¿ƒæ€æƒ³</h4>
<p>åƒæ°´ä¸­çš„æ°”æ³¡ä¸Šæµ®ï¼šæ¯æ¬¡éå†æ•°ç»„ï¼Œç›¸é‚»å…ƒç´ ä¸¤ä¸¤æ¯”è¾ƒï¼ŒæŠŠ<strong>æœ€å¤§çš„å…ƒç´ é€æ­¥ â€œæµ®â€ åˆ°æ•°ç»„æœ«å°¾</strong>ï¼Œå°å…ƒç´ ç•™åœ¨å‰é¢ã€‚å¯ä¼˜åŒ–ï¼šæŸè½®éå†æ— äº¤æ¢æ—¶ï¼Œè¯´æ˜æ•°ç»„å·²æœ‰åºï¼Œæå‰ç»ˆæ­¢ã€‚</p>
<h4 data-id="heading-4">ç®—æ³•æ­¥éª¤</h4>
<ol>
<li>éå†æ•°ç»„ï¼Œç›¸é‚»å…ƒç´ ä¸¤ä¸¤æ¯”è¾ƒï¼Œè‹¥å‰ &gt; ååˆ™äº¤æ¢ï¼›</li>
<li>æ¯è½®éå†ç»“æŸï¼Œå½“å‰æœªæ’åºéƒ¨åˆ†çš„æœ€å¤§å€¼ â€œå½’ä½â€ åˆ°æœ«å°¾ï¼›</li>
<li>é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°æ•°ç»„æœ‰åºï¼ˆæˆ–æå‰ç»ˆæ­¢ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-5">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[5,3,8,4,2]</code>ï¼‰</h4>






























<table><thead><tr><th>éå†è½®æ¬¡</th><th>æ•°ç»„å˜åŒ–</th><th>å½’ä½å…ƒç´ </th></tr></thead><tbody><tr><td>è½® 1</td><td>[3,5,8,4,2] â†’ [3,5,4,8,2] â†’ [3,5,4,2,8]</td><td>8</td></tr><tr><td>è½® 2</td><td>[3,4,5,2,8] â†’ [3,4,2,5,8]</td><td>5</td></tr><tr><td>è½® 3</td><td>[3,2,4,5,8]</td><td>4</td></tr><tr><td>è½® 4</td><td>[2,3,4,5,8]</td><td>3</td></tr></tbody></table>
<h4 data-id="heading-6">ä»£ç å®ç°ï¼ˆJavaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BubbleSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bubbleSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;
        <span class="hljs-type">boolean</span> swapped; <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å‘ç”Ÿäº¤æ¢</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) {
            swapped = <span class="hljs-literal">false</span>;
            <span class="hljs-comment">// æ¯è½®å‡å°‘iæ¬¡éå†ï¼ˆæœ«å°¾iä¸ªå…ƒç´ å·²å½’ä½ï¼‰</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n - <span class="hljs-number">1</span> - i; j++) {
                <span class="hljs-keyword">if</span> (arr[j] &gt; arr[j + <span class="hljs-number">1</span>]) {
                    <span class="hljs-comment">// äº¤æ¢ç›¸é‚»å…ƒç´ </span>
                    <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> arr[j];
                    arr[j] = arr[j + <span class="hljs-number">1</span>];
                    arr[j + <span class="hljs-number">1</span>] = temp;
                    swapped = <span class="hljs-literal">true</span>;
                }
            }
            <span class="hljs-comment">// æ— äº¤æ¢åˆ™æå‰ç»ˆæ­¢</span>
            <span class="hljs-keyword">if</span> (!swapped) <span class="hljs-keyword">break</span>;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>};
        bubbleSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [2, 3, 4, 5, 8]</span>
    }
}
</code></pre>
<h4 data-id="heading-7">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæœ€å¥½ O(n)ï¼ˆå·²æœ‰åºï¼‰ã€æœ€å / å¹³å‡ O(n2)ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼ˆåŸåœ°æ’åºï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šç¨³å®šï¼ˆç›¸ç­‰å…ƒç´ ä¸äº¤æ¢ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">2. é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰</h3>
<h4 data-id="heading-9">æ ¸å¿ƒæ€æƒ³</h4>
<p>åƒé€‰ â€œæ ‡å…µâ€ï¼šæ¯æ¬¡ä»<strong>æœªæ’åºéƒ¨åˆ†é€‰å‡ºæœ€å°å€¼</strong>ï¼Œæ”¾åˆ°å·²æ’åºéƒ¨åˆ†çš„æœ«å°¾ï¼Œé€æ­¥æ‰©å¤§æœ‰åºåŒºåŸŸã€‚</p>
<h4 data-id="heading-10">ç®—æ³•æ­¥éª¤</h4>
<ol>
<li>åˆ’åˆ†ã€Œå·²æ’åºåŒºã€ï¼ˆåˆå§‹ä¸ºç©ºï¼‰å’Œã€Œæœªæ’åºåŒºã€ï¼ˆæ•´ä¸ªæ•°ç»„ï¼‰ï¼›</li>
<li>éå†æœªæ’åºåŒºï¼Œæ‰¾åˆ°æœ€å°å€¼çš„ç´¢å¼•ï¼›</li>
<li>äº¤æ¢æœ€å°å€¼ä¸æœªæ’åºåŒºçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰©å¤§å·²æ’åºåŒºï¼›</li>
<li>é‡å¤ç›´åˆ°æœªæ’åºåŒºä¸ºç©ºã€‚</li>
</ol>
<h4 data-id="heading-11">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[5,3,8,4,2]</code>ï¼‰</h4>



































<table><thead><tr><th>éå†è½®æ¬¡</th><th>æœªæ’åºåŒº</th><th>æœ€å°å€¼ï¼ˆç´¢å¼•ï¼‰</th><th>æ•°ç»„å˜åŒ–</th></tr></thead><tbody><tr><td>è½® 1</td><td>[5,3,8,4,2]</td><td>2ï¼ˆ4ï¼‰</td><td>[2,3,8,4,5]</td></tr><tr><td>è½® 2</td><td>[3,8,4,5]</td><td>3ï¼ˆ1ï¼‰</td><td>[2,3,8,4,5]</td></tr><tr><td>è½® 3</td><td>[8,4,5]</td><td>4ï¼ˆ3ï¼‰</td><td>[2,3,4,8,5]</td></tr><tr><td>è½® 4</td><td>[8,5]</td><td>5ï¼ˆ4ï¼‰</td><td>[2,3,4,5,8]</td></tr></tbody></table>
<h4 data-id="heading-12">ä»£ç å®ç°ï¼ˆJavaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SelectionSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">selectionSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) {
            <span class="hljs-comment">// æ‰¾æœªæ’åºåŒºï¼ˆiåˆ°n-1ï¼‰çš„æœ€å°å€¼ç´¢å¼•</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">minIndex</span> <span class="hljs-operator">=</span> i;
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; n; j++) {
                <span class="hljs-keyword">if</span> (arr[j] &lt; arr[minIndex]) {
                    minIndex = j;
                }
            }
            <span class="hljs-comment">// äº¤æ¢æœ€å°å€¼å’Œæœªæ’åºåŒºç¬¬ä¸€ä¸ªå…ƒç´ </span>
            <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> arr[i];
            arr[i] = arr[minIndex];
            arr[minIndex] = temp;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>};
        selectionSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [2, 3, 4, 5, 8]</span>
    }
}
</code></pre>
<h4 data-id="heading-13">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæ‰€æœ‰æƒ…å†µ O(n2)ï¼ˆæ— è®ºæ˜¯å¦æœ‰åºï¼Œéƒ½è¦éå†æ‰¾æœ€å°å€¼ï¼‰ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼ˆåŸåœ°æ’åºï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šä¸ç¨³å®šï¼ˆå¦‚ <code>[2,2,1]</code>ï¼Œé€‰ 1 äº¤æ¢ç¬¬ä¸€ä¸ª 2ï¼Œä¸¤ä¸ª 2 çš„ç›¸å¯¹ä½ç½®æ”¹å˜ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-14">3. æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰</h3>
<h4 data-id="heading-15">æ ¸å¿ƒæ€æƒ³</h4>
<p>åƒæ‰“æ‰‘å…‹ç‰Œæ’ç‰Œï¼šæŠŠå½“å‰å…ƒç´ æ’å…¥åˆ°<strong>å‰é¢å·²æ’åºæ•°ç»„çš„åˆé€‚ä½ç½®</strong>ï¼Œå‰é¢å§‹ç»ˆä¿æŒæœ‰åºã€‚</p>
<h4 data-id="heading-16">ç®—æ³•æ­¥éª¤</h4>
<ol>
<li>åˆ’åˆ†ã€Œå·²æ’åºåŒºã€ï¼ˆåˆå§‹ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰å’Œã€Œæœªæ’åºåŒºã€ï¼ˆå‰©ä½™å…ƒç´ ï¼‰ï¼›</li>
<li>å–æœªæ’åºåŒºçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå‘å‰éå†å·²æ’åºåŒºï¼Œæ‰¾åˆ°æ¯”å®ƒå°çš„å…ƒç´ ä½ç½®ï¼›</li>
<li>å°†è¯¥ä½ç½®åçš„å…ƒç´ åç§»ï¼Œæ’å…¥å½“å‰å…ƒç´ ï¼›</li>
<li>é‡å¤ç›´åˆ°æœªæ’åºåŒºä¸ºç©ºã€‚</li>
</ol>
<h4 data-id="heading-17">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[5,3,8,4,2]</code>ï¼‰</h4>



































<table><thead><tr><th>éå†è½®æ¬¡</th><th>å·²æ’åºåŒº</th><th>å¾…æ’å…¥å…ƒç´ </th><th>æ•°ç»„å˜åŒ–</th></tr></thead><tbody><tr><td>è½® 1</td><td>[5]</td><td>3</td><td>[3,5,8,4,2]</td></tr><tr><td>è½® 2</td><td>[3,5]</td><td>8</td><td>[3,5,8,4,2]</td></tr><tr><td>è½® 3</td><td>[3,5,8]</td><td>4</td><td>[3,5,4,8,2] â†’ [3,4,5,8,2]</td></tr><tr><td>è½® 4</td><td>[3,4,5,8]</td><td>2</td><td>[2,3,4,5,8]</td></tr></tbody></table>
<h4 data-id="heading-18">ä»£ç å®ç°ï¼ˆJavaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InsertionSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertionSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; n; i++) {
            <span class="hljs-type">int</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> arr[i]; <span class="hljs-comment">// å¾…æ’å…¥å…ƒç´ </span>
            <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i - <span class="hljs-number">1</span>;
            <span class="hljs-comment">// å‘å‰éå†å·²æ’åºåŒºï¼Œæ‰¾åˆ°æ’å…¥ä½ç½®</span>
            <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; arr[j] &gt; current) {
                arr[j + <span class="hljs-number">1</span>] = arr[j]; <span class="hljs-comment">// å…ƒç´ åç§»</span>
                j--;
            }
            arr[j + <span class="hljs-number">1</span>] = current; <span class="hljs-comment">// æ’å…¥å…ƒç´ </span>
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>};
        insertionSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [2, 3, 4, 5, 8]</span>
    }
}
</code></pre>
<h4 data-id="heading-19">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæœ€å¥½ O(n)ï¼ˆå·²æœ‰åºï¼‰ã€æœ€å / å¹³å‡ O(n2)ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼ˆåŸåœ°æ’åºï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šç¨³å®šï¼ˆç›¸ç­‰å…ƒç´ ä¸åç§»ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-20">4. å¸Œå°”æ’åºï¼ˆShell Sortï¼‰</h3>
<h4 data-id="heading-21">æ ¸å¿ƒæ€æƒ³</h4>
<p>æ’å…¥æ’åºçš„ â€œå‡çº§ç‰ˆâ€ï¼šå…ˆæŒ‰ã€Œæ­¥é•¿ã€å°†æ•°ç»„åˆ†ç»„ï¼Œæ¯ç»„å†…åšæ’å…¥æ’åºï¼ˆç²—æ’ï¼‰ï¼›é€æ­¥ç¼©å°æ­¥é•¿åˆ° 1ï¼Œæœ€ç»ˆåšä¸€æ¬¡æ•´ä½“æ’å…¥æ’åºï¼ˆç²¾æ’ï¼‰ã€‚åƒå…ˆæŠŠæ•°ç»„ â€œæ¢³é¡ºâ€ï¼Œå†ç²¾ç»†æ’åºï¼Œå‡å°‘æ’å…¥æ’åºçš„å…ƒç´ ç§»åŠ¨æ¬¡æ•°ã€‚</p>
<h4 data-id="heading-22">ç®—æ³•æ­¥éª¤</h4>
<ol>
<li>é€‰æ‹©åˆå§‹æ­¥é•¿ï¼ˆé€šå¸¸ä¸º n/2ï¼Œæ¯æ¬¡å‡åŠï¼‰ï¼›</li>
<li>æŒ‰æ­¥é•¿å°†æ•°ç»„åˆ†æˆè‹¥å¹²å­æ•°ç»„ï¼ˆç´¢å¼• i,i+step,i+2step...ï¼‰ï¼›</li>
<li>å¯¹æ¯ä¸ªå­æ•°ç»„æ‰§è¡Œæ’å…¥æ’åºï¼›</li>
<li>æ­¥é•¿å‡åŠï¼Œé‡å¤æ­¥éª¤ 2-3ï¼›ç›´åˆ°æ­¥é•¿ = 1ï¼Œåšæœ€åä¸€æ¬¡æ’å…¥æ’åºã€‚</li>
</ol>
<h4 data-id="heading-23">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[5,3,8,4,2]</code>ï¼Œn=5ï¼‰</h4>




















<table><thead><tr><th>æ­¥é•¿</th><th>åˆ†ç»„æƒ…å†µ</th><th>åˆ†ç»„æ’åºåæ•°ç»„</th></tr></thead><tbody><tr><td>2</td><td>[5,8,2]ã€[3,4]</td><td>[2,3,8,4,5]</td></tr><tr><td>1</td><td>æ•´ä½“æ•°ç»„</td><td>[2,3,4,5,8]</td></tr></tbody></table>
<h4 data-id="heading-24">ä»£ç å®ç°ï¼ˆJavaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShellSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shellSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;
        <span class="hljs-comment">// æ­¥é•¿é€æ­¥å‡åŠ</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">step</span> <span class="hljs-operator">=</span> n / <span class="hljs-number">2</span>; step &gt; <span class="hljs-number">0</span>; step /= <span class="hljs-number">2</span>) {
            <span class="hljs-comment">// æŒ‰æ­¥é•¿åˆ†ç»„ï¼Œæ¯ç»„æ’å…¥æ’åº</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> step; i &lt; n; i++) {
                <span class="hljs-type">int</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> arr[i];
                <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i - step;
                <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; arr[j] &gt; current) {
                    arr[j + step] = arr[j];
                    j -= step;
                }
                arr[j + step] = current;
            }
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>};
        shellSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [2, 3, 4, 5, 8]</span>
    }
}
</code></pre>
<h4 data-id="heading-25">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæœ€å¥½ O(nlogn)ã€æœ€å O(n2)ã€å¹³å‡ O(n1.3)ï¼ˆæ­¥é•¿å½±å“ï¼‰ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼ˆåŸåœ°æ’åºï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šä¸ç¨³å®šï¼ˆåˆ†ç»„æ’åºä¼šæ‰“ä¹±ç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-26">5. å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰</h3>
<h4 data-id="heading-27">æ ¸å¿ƒæ€æƒ³</h4>
<p>åˆ†æ²»æ€æƒ³çš„å…¸å‹åº”ç”¨ï¼šâ€œåˆ†è€Œæ²»ä¹‹â€ï¼Œå…ˆæŠŠæ•°ç»„æ‹†æˆæœ€å°å•å…ƒï¼ˆå•ä¸ªå…ƒç´ ï¼Œå¤©ç„¶æœ‰åºï¼‰ï¼Œå†<strong>ä¸¤ä¸¤åˆå¹¶æˆæœ‰åºå­æ•°ç»„</strong>ï¼Œæœ€ç»ˆåˆå¹¶æˆæ•´ä½“æœ‰åºæ•°ç»„ã€‚åƒæ‹¼æ‹¼å›¾ï¼Œå…ˆæ‹†æˆç¢ç‰‡ï¼Œå†æŒ‰è§„åˆ™æ‹¼åˆã€‚</p>
<h4 data-id="heading-28">ç®—æ³•æ­¥éª¤</h4>
<ol>
<li><strong>åˆ†</strong>ï¼šé€’å½’å°†æ•°ç»„åˆ†æˆå·¦å³ä¸¤åŠï¼Œç›´åˆ°æ¯ä¸ªå­æ•°ç»„åªæœ‰ 1 ä¸ªå…ƒç´ ï¼›</li>
<li><strong>æ²»</strong>ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºå­æ•°ç»„ä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ï¼›</li>
<li>é€’å½’åˆå¹¶ï¼Œç›´åˆ°æ•´ä¸ªæ•°ç»„åˆå¹¶å®Œæˆã€‚</li>
</ol>
<h4 data-id="heading-29">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[5,3,8,4,2]</code>ï¼‰</h4>
<p>plaintext</p>
<pre><code class="hljs language-css" lang="css">åˆ†ï¼š<span class="hljs-selector-attr">[5,3,8,4,2]</span> â†’ <span class="hljs-selector-attr">[5,3]</span> + <span class="hljs-selector-attr">[8,4,2]</span> â†’ <span class="hljs-selector-attr">[5]</span>+<span class="hljs-selector-attr">[3]</span> + <span class="hljs-selector-attr">[8]</span>+<span class="hljs-selector-attr">[4,2]</span> â†’ <span class="hljs-selector-attr">[5]</span>+<span class="hljs-selector-attr">[3]</span> + <span class="hljs-selector-attr">[8]</span>+<span class="hljs-selector-attr">[4]</span>+<span class="hljs-selector-attr">[2]</span>
åˆï¼š<span class="hljs-selector-attr">[5]</span>+<span class="hljs-selector-attr">[3]</span>â†’<span class="hljs-selector-attr">[3,5]</span>ï¼›<span class="hljs-selector-attr">[4]</span>+<span class="hljs-selector-attr">[2]</span>â†’<span class="hljs-selector-attr">[2,4]</span>ï¼›<span class="hljs-selector-attr">[8]</span>+<span class="hljs-selector-attr">[2,4]</span>â†’<span class="hljs-selector-attr">[2,4,8]</span>ï¼›<span class="hljs-selector-attr">[3,5]</span>+<span class="hljs-selector-attr">[2,4,8]</span>â†’<span class="hljs-selector-attr">[2,3,4,5,8]</span>
</code></pre>
<h4 data-id="heading-30">ä»£ç å®ç°ï¼ˆJavaï¼Œé€’å½’ç‰ˆï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MergeSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">mergeSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;
        <span class="hljs-type">int</span>[] temp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n]; <span class="hljs-comment">// ä¸´æ—¶æ•°ç»„ï¼Œé¿å…é¢‘ç¹åˆ›å»º</span>
        mergeSort(arr, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, temp);
    }

    <span class="hljs-comment">// é€’å½’æ‹†åˆ†</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">mergeSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right, <span class="hljs-type">int</span>[] temp)</span> {
        <span class="hljs-keyword">if</span> (left &gt;= right) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + (right - left) / <span class="hljs-number">2</span>; <span class="hljs-comment">// é¿å…æº¢å‡º</span>
        mergeSort(arr, left, mid, temp); <span class="hljs-comment">// å·¦åŠåŒºæ’åº</span>
        mergeSort(arr, mid + <span class="hljs-number">1</span>, right, temp); <span class="hljs-comment">// å³åŠåŒºæ’åº</span>
        merge(arr, left, mid, right, temp); <span class="hljs-comment">// åˆå¹¶å·¦å³åŒº</span>
    }

    <span class="hljs-comment">// åˆå¹¶ä¸¤ä¸ªæœ‰åºå­æ•°ç»„</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right, <span class="hljs-type">int</span>[] temp)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> left; <span class="hljs-comment">// å·¦åŒºæŒ‡é’ˆ</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> mid + <span class="hljs-number">1</span>; <span class="hljs-comment">// å³åŒºæŒ‡é’ˆ</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> left; <span class="hljs-comment">// ä¸´æ—¶æ•°ç»„æŒ‡é’ˆ</span>
        <span class="hljs-comment">// åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</span>
        <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= right) {
            <span class="hljs-keyword">if</span> (arr[i] &lt;= arr[j]) {
                temp[k++] = arr[i++];
            } <span class="hljs-keyword">else</span> {
                temp[k++] = arr[j++];
            }
        }
        <span class="hljs-comment">// æ‹·è´å·¦åŒºå‰©ä½™å…ƒç´ </span>
        <span class="hljs-keyword">while</span> (i &lt;= mid) {
            temp[k++] = arr[i++];
        }
        <span class="hljs-comment">// æ‹·è´å³åŒºå‰©ä½™å…ƒç´ </span>
        <span class="hljs-keyword">while</span> (j &lt;= right) {
            temp[k++] = arr[j++];
        }
        <span class="hljs-comment">// ä¸´æ—¶æ•°ç»„æ‹·è´å›åŸæ•°ç»„</span>
        System.arraycopy(temp, left, arr, left, right - left + <span class="hljs-number">1</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>};
        mergeSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [2, 3, 4, 5, 8]</span>
    }
}
</code></pre>
<h4 data-id="heading-31">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæ‰€æœ‰æƒ…å†µ O(nlogn)ï¼ˆæ‹†åˆ† O(logn) å±‚ï¼Œæ¯å±‚åˆå¹¶ O(n)ï¼‰ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼ˆéœ€è¦ä¸´æ—¶æ•°ç»„å­˜å‚¨åˆå¹¶ç»“æœï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šç¨³å®šï¼ˆåˆå¹¶æ—¶ç›¸ç­‰å…ƒç´ ä¼˜å…ˆå–å·¦åŒºï¼Œä¿æŒç›¸å¯¹ä½ç½®ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-32">6. å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰</h3>
<h4 data-id="heading-33">æ ¸å¿ƒæ€æƒ³</h4>
<p>åˆ†æ²» + åˆ†åŒºï¼šé€‰ä¸€ä¸ªã€ŒåŸºå‡†å€¼ã€ï¼ŒæŠŠæ•°ç»„åˆ†æˆ â€œå°äºåŸºå‡†ã€ç­‰äºåŸºå‡†ã€å¤§äºåŸºå‡†â€ ä¸‰éƒ¨åˆ†ï¼›é€’å½’å¤„ç†å·¦å³ä¸¤éƒ¨åˆ†ã€‚åƒé€‰è£åˆ¤ï¼ŒæŠŠæ•°ç»„åˆ†æˆ â€œå·¦é˜Ÿï¼ˆå°ï¼‰ã€è£åˆ¤ï¼ˆåŸºå‡†ï¼‰ã€å³é˜Ÿï¼ˆå¤§ï¼‰â€ï¼Œå†ç»†åˆ†å·¦å³é˜Ÿã€‚</p>
<h4 data-id="heading-34">ç®—æ³•æ­¥éª¤</h4>
<ol>
<li>é€‰åŸºå‡†å€¼ï¼ˆæ¨èï¼šéšæœºé€‰ï¼Œé¿å…æœ‰åºæ•°ç»„é€€åŒ–ï¼‰ï¼›</li>
<li>åˆ†åŒºï¼šéå†æ•°ç»„ï¼Œå°äºåŸºå‡†çš„æ”¾å·¦ï¼Œå¤§äºçš„æ”¾å³ï¼ŒåŸºå‡†æ”¾ä¸­é—´ï¼›</li>
<li>é€’å½’å¯¹å·¦ã€å³åˆ†åŒºé‡å¤æ­¥éª¤ 1-2ï¼›</li>
<li>é€’å½’ç»“æŸåˆ™æ•°ç»„æœ‰åºã€‚</li>
</ol>
<h4 data-id="heading-35">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[5,3,8,4,2]</code>ï¼Œé€‰ 5 ä¸ºåŸºå‡†ï¼‰</h4>
<p>plaintext</p>
<pre><code class="hljs language-css" lang="css">åˆ†åŒºï¼šå°äº<span class="hljs-number">5</span>â†’<span class="hljs-selector-attr">[3,4,2]</span>ï¼ŒåŸºå‡†â†’<span class="hljs-number">5</span>ï¼Œå¤§äº<span class="hljs-number">5</span>â†’<span class="hljs-selector-attr">[8]</span> â†’ <span class="hljs-selector-attr">[3,4,2,5,8]</span>
å·¦åˆ†åŒº<span class="hljs-selector-attr">[3,4,2]</span>é€‰<span class="hljs-number">3</span>ä¸ºåŸºå‡†ï¼šå°äº<span class="hljs-number">3</span>â†’<span class="hljs-selector-attr">[2]</span>ï¼ŒåŸºå‡†â†’<span class="hljs-number">3</span>ï¼Œå¤§äº<span class="hljs-number">3</span>â†’<span class="hljs-selector-attr">[4]</span> â†’ <span class="hljs-selector-attr">[2,3,4,5,8]</span>
å³åˆ†åŒº<span class="hljs-selector-attr">[8]</span>æœ‰åºï¼Œæœ€ç»ˆç»“æœï¼š<span class="hljs-selector-attr">[2,3,4,5,8]</span>
</code></pre>
<h4 data-id="heading-36">ä»£ç å®ç°ï¼ˆJavaï¼ŒéšæœºåŸºå‡†ä¼˜åŒ–ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QuickSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">quickSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        quickSort(arr, <span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">quickSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> {
        <span class="hljs-keyword">if</span> (left &gt;= right) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">pivotIndex</span> <span class="hljs-operator">=</span> partition(arr, left, right); <span class="hljs-comment">// åˆ†åŒºï¼Œè¿”å›åŸºå‡†ä½ç½®</span>
        quickSort(arr, left, pivotIndex - <span class="hljs-number">1</span>); <span class="hljs-comment">// å·¦åˆ†åŒº</span>
        quickSort(arr, pivotIndex + <span class="hljs-number">1</span>, right); <span class="hljs-comment">// å³åˆ†åŒº</span>
    }

    <span class="hljs-comment">// åˆ†åŒºå‡½æ•°ï¼ˆHoareæ³•ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">partition</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> {
        <span class="hljs-comment">// éšæœºé€‰åŸºå‡†ï¼Œé¿å…æœ‰åºæ•°ç»„é€€åŒ–</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">randomIndex</span> <span class="hljs-operator">=</span> left + <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().nextInt(right - left + <span class="hljs-number">1</span>);
        swap(arr, left, randomIndex); <span class="hljs-comment">// åŸºå‡†ç§»åˆ°å·¦è¾¹ç•Œ</span>

        <span class="hljs-type">int</span> <span class="hljs-variable">pivot</span> <span class="hljs-operator">=</span> arr[left]; <span class="hljs-comment">// åŸºå‡†å€¼</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> left, j = right;
        <span class="hljs-keyword">while</span> (i &lt; j) {
            <span class="hljs-comment">// ä»å³æ‰¾å°äºåŸºå‡†çš„å…ƒç´ </span>
            <span class="hljs-keyword">while</span> (i &lt; j &amp;&amp; arr[j] &gt;= pivot) j--;
            <span class="hljs-comment">// ä»å·¦æ‰¾å¤§äºåŸºå‡†çš„å…ƒç´ </span>
            <span class="hljs-keyword">while</span> (i &lt; j &amp;&amp; arr[i] &lt;= pivot) i++;
            <span class="hljs-comment">// äº¤æ¢å·¦å³æŒ‡é’ˆå…ƒç´ </span>
            <span class="hljs-keyword">if</span> (i &lt; j) swap(arr, i, j);
        }
        <span class="hljs-comment">// åŸºå‡†å½’ä½ï¼ˆi=jçš„ä½ç½®ï¼‰</span>
        swap(arr, left, i);
        <span class="hljs-keyword">return</span> i;
    }

    <span class="hljs-comment">// äº¤æ¢å…ƒç´ </span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swap</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> arr[i];
        arr[i] = arr[j];
        arr[j] = temp;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>};
        quickSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [2, 3, 4, 5, 8]</span>
    }
}
</code></pre>
<h4 data-id="heading-37">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæœ€å¥½ / å¹³å‡ O(nlogn)ã€æœ€å O(n2)ï¼ˆæœ‰åºæ•°ç»„æœªä¼˜åŒ–ï¼‰ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(logn)ï¼ˆé€’å½’æ ˆï¼ŒéšæœºåŸºå‡†å¯ä¼˜åŒ–åˆ° O(logn)ï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šä¸ç¨³å®šï¼ˆåˆ†åŒºäº¤æ¢ä¼šæ‰“ä¹±ç›¸ç­‰å…ƒç´ ä½ç½®ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-38">7. å †æ’åºï¼ˆHeap Sortï¼‰</h3>
<h4 data-id="heading-39">æ ¸å¿ƒæ€æƒ³</h4>
<p>åˆ©ç”¨ã€Œå †ã€ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰çš„ç‰¹æ€§ï¼šæ„å»º<strong>å¤§é¡¶å †</strong>ï¼ˆçˆ¶èŠ‚ç‚¹ &gt; å­èŠ‚ç‚¹ï¼‰ï¼Œæ¯æ¬¡å–å †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰æ”¾åˆ°æ•°ç»„æœ«å°¾ï¼Œå†è°ƒæ•´å †ï¼Œé‡å¤ç›´åˆ°å †ä¸ºç©ºã€‚åƒä»å †é‡Œæ¯æ¬¡æŒ‘æœ€å¤§çš„å…ƒç´  â€œæ‹¿å‡ºæ¥â€ï¼Œæœ€ç»ˆæœ‰åºã€‚</p>
<h4 data-id="heading-40">ç®—æ³•æ­¥éª¤</h4>
<ol>
<li>æ„å»ºå¤§é¡¶å †ï¼ˆä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹å‘ä¸Šè°ƒæ•´ï¼‰ï¼›</li>
<li>äº¤æ¢å †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰å’Œå †çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå †å¤§å°å‡ 1ï¼›</li>
<li>è°ƒæ•´å‰©ä½™å…ƒç´ ä¸ºå¤§é¡¶å †ï¼›</li>
<li>é‡å¤æ­¥éª¤ 2-3ï¼Œç›´åˆ°å †å¤§å°ä¸º 1ã€‚</li>
</ol>
<h4 data-id="heading-41">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[5,3,8,4,2]</code>ï¼‰</h4>
<p>plaintext</p>
<pre><code class="hljs language-css" lang="css">æ„å»ºå¤§é¡¶å †ï¼š<span class="hljs-selector-attr">[8,4,5,3,2]</span>
è½®<span class="hljs-number">1</span>ï¼šäº¤æ¢<span class="hljs-number">8</span>å’Œ<span class="hljs-number">2</span>â†’<span class="hljs-selector-attr">[2,4,5,3,8]</span>ï¼Œè°ƒæ•´å †â†’<span class="hljs-selector-attr">[5,4,2,3,8]</span>
è½®<span class="hljs-number">2</span>ï¼šäº¤æ¢<span class="hljs-number">5</span>å’Œ<span class="hljs-number">3</span>â†’<span class="hljs-selector-attr">[3,4,2,5,8]</span>ï¼Œè°ƒæ•´å †â†’<span class="hljs-selector-attr">[4,3,2,5,8]</span>
è½®<span class="hljs-number">3</span>ï¼šäº¤æ¢<span class="hljs-number">4</span>å’Œ<span class="hljs-number">2</span>â†’<span class="hljs-selector-attr">[2,3,4,5,8]</span>ï¼Œè°ƒæ•´å †â†’<span class="hljs-selector-attr">[3,2,4,5,8]</span>
è½®<span class="hljs-number">4</span>ï¼šäº¤æ¢<span class="hljs-number">3</span>å’Œ<span class="hljs-number">2</span>â†’<span class="hljs-selector-attr">[2,3,4,5,8]</span>ï¼Œç»“æŸ
</code></pre>
<h4 data-id="heading-42">ä»£ç å®ç°ï¼ˆJavaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeapSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">heapSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;

        <span class="hljs-comment">// æ„å»ºå¤§é¡¶å †ï¼ˆä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n / <span class="hljs-number">2</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            heapify(arr, n, i);
        }

        <span class="hljs-comment">// é€ä¸ªå–å‡ºå †é¡¶å…ƒç´ </span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">1</span>; i &gt; <span class="hljs-number">0</span>; i--) {
            <span class="hljs-comment">// äº¤æ¢å †é¡¶å’Œå½“å‰å †æœ€åä¸€ä¸ªå…ƒç´ </span>
            swap(arr, <span class="hljs-number">0</span>, i);
            <span class="hljs-comment">// è°ƒæ•´å‰©ä½™å…ƒç´ ä¸ºå¤§é¡¶å †</span>
            heapify(arr, i, <span class="hljs-number">0</span>);
        }
    }

    <span class="hljs-comment">// è°ƒæ•´å †ï¼ˆä»¥iä¸ºæ ¹çš„å­æ ‘ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">heapify</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> heapSize, <span class="hljs-type">int</span> i)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">largest</span> <span class="hljs-operator">=</span> i; <span class="hljs-comment">// åˆå§‹åŒ–æœ€å¤§å€¼ä¸ºæ ¹</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span> * i + <span class="hljs-number">1</span>; <span class="hljs-comment">// å·¦å­èŠ‚ç‚¹</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span> * i + <span class="hljs-number">2</span>; <span class="hljs-comment">// å³å­èŠ‚ç‚¹</span>

        <span class="hljs-comment">// å·¦å­èŠ‚ç‚¹æ›´å¤§</span>
        <span class="hljs-keyword">if</span> (left &lt; heapSize &amp;&amp; arr[left] &gt; arr[largest]) {
            largest = left;
        }
        <span class="hljs-comment">// å³å­èŠ‚ç‚¹æ›´å¤§</span>
        <span class="hljs-keyword">if</span> (right &lt; heapSize &amp;&amp; arr[right] &gt; arr[largest]) {
            largest = right;
        }

        <span class="hljs-comment">// æœ€å¤§å€¼ä¸æ˜¯æ ¹ï¼Œäº¤æ¢å¹¶é€’å½’è°ƒæ•´</span>
        <span class="hljs-keyword">if</span> (largest != i) {
            swap(arr, i, largest);
            heapify(arr, heapSize, largest);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swap</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> arr[i];
        arr[i] = arr[j];
        arr[j] = temp;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>};
        heapSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [2, 3, 4, 5, 8]</span>
    }
}
</code></pre>
<h4 data-id="heading-43">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæ‰€æœ‰æƒ…å†µ O(nlogn)ï¼ˆå»ºå † O(n)ï¼Œæ¯æ¬¡è°ƒæ•´ O(logn)ï¼‰ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼ˆåŸåœ°æ’åºï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šä¸ç¨³å®šï¼ˆå †è°ƒæ•´ä¼šæ‰“ä¹±ç›¸ç­‰å…ƒç´ ä½ç½®ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-44">8. è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰</h3>
<h4 data-id="heading-45">æ ¸å¿ƒæ€æƒ³</h4>
<p>éæ¯”è¾ƒæ’åºï¼šç»Ÿè®¡æ¯ä¸ªæ•°å€¼å‡ºç°çš„æ¬¡æ•°ï¼Œå†æ ¹æ®æ¬¡æ•° â€œè¿˜åŸâ€ æœ‰åºæ•°ç»„ã€‚åƒæ•°äººæ•°ï¼šæŒ‰èº«é«˜ç»Ÿè®¡æ¯ä¸ªèº«é«˜çš„äººæ•°ï¼Œå†æŒ‰èº«é«˜é¡ºåºè¾“å‡ºã€‚</p>
<h4 data-id="heading-46">ç®—æ³•æ­¥éª¤</h4>
<ol>
<li>æ‰¾åˆ°æ•°ç»„çš„æœ€å¤§å€¼ <code>max</code> å’Œæœ€å°å€¼ <code>min</code>ï¼›</li>
<li>åˆ›å»ºè®¡æ•°æ•°ç»„ <code>count</code>ï¼Œé•¿åº¦ä¸º <code>max - min + 1</code>ï¼Œåˆå§‹åŒ–ä¸º 0ï¼›</li>
<li>éå†åŸæ•°ç»„ï¼Œ<code>count[num - min]++</code>ï¼ˆç»Ÿè®¡æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°ï¼‰ï¼›</li>
<li>éå†è®¡æ•°æ•°ç»„ï¼ŒæŒ‰æ¬¡æ•°å°†æ•°å€¼å¡«å……å›åŸæ•°ç»„ã€‚</li>
</ol>
<h4 data-id="heading-47">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[5,3,8,4,2]</code>ï¼‰</h4>
<ul>
<li>min=2ï¼Œmax=8ï¼Œcount æ•°ç»„é•¿åº¦ = 7ï¼ˆç´¢å¼• 0â†’2ï¼Œ1â†’3ï¼Œ2â†’4ï¼Œ3â†’5ï¼Œ4â†’6ï¼Œ5â†’7ï¼Œ6â†’8ï¼‰ï¼›</li>
<li>ç»Ÿè®¡åï¼š<code>count = [1,1,1,1,0,0,1]</code>ï¼›</li>
<li>å¡«å……ï¼š2 (1 æ¬¡)â†’3 (1)â†’4 (1)â†’5 (1)â†’8 (1) â†’ [2,3,4,5,8]ã€‚</li>
</ul>
<h4 data-id="heading-48">ä»£ç å®ç°ï¼ˆJavaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CountingSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">countingSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;

        <span class="hljs-comment">// æ‰¾æœ€å¤§å€¼å’Œæœ€å°å€¼</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>], max = arr[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) {
            <span class="hljs-keyword">if</span> (num &lt; min) min = num;
            <span class="hljs-keyword">if</span> (num &gt; max) max = num;
        }

        <span class="hljs-comment">// è®¡æ•°æ•°ç»„</span>
        <span class="hljs-type">int</span>[] count = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[max - min + <span class="hljs-number">1</span>];
        <span class="hljs-comment">// ç»Ÿè®¡æ¬¡æ•°</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) {
            count[num - min]++;
        }

        <span class="hljs-comment">// å¡«å……å›åŸæ•°ç»„</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; count.length; i++) {
            <span class="hljs-keyword">while</span> (count[i] &gt; <span class="hljs-number">0</span>) {
                arr[index++] = i + min;
                count[i]--;
            }
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>};
        countingSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [2, 3, 4, 5, 8]</span>
    }
}
</code></pre>
<h4 data-id="heading-49">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(n+k)ï¼ˆk=maxâˆ’minï¼Œæ•°å€¼èŒƒå›´ï¼‰ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(n+k)ï¼ˆè®¡æ•°æ•°ç»„ + åŸæ•°ç»„ï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šç¨³å®šï¼ˆæŒ‰é¡ºåºå¡«å……ï¼Œä¿æŒç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®ï¼‰ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šæ•°å€¼èŒƒå›´å°çš„æ•´æ•°æ’åºï¼ˆå¦‚æˆç»©ã€å¹´é¾„ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-50">9. æ¡¶æ’åºï¼ˆBucket Sortï¼‰</h3>
<h4 data-id="heading-51">æ ¸å¿ƒæ€æƒ³</h4>
<p>éæ¯”è¾ƒæ’åºï¼šæŠŠæ•°ç»„æŒ‰æ•°å€¼èŒƒå›´åˆ†åˆ°å¤šä¸ªã€Œæ¡¶ã€é‡Œï¼Œæ¯ä¸ªæ¡¶å†…ç”¨å…¶ä»–æ’åºï¼ˆå¦‚æ’å…¥æ’åºï¼‰ï¼Œæœ€ååˆå¹¶æ‰€æœ‰æ¡¶ã€‚åƒåˆ†æ¡¶æ•´ç†ï¼šå…ˆæŒ‰èŒƒå›´ç²—åˆ†ï¼Œå†ç²¾ç»†æ’åºï¼Œæœ€ååˆå¹¶ã€‚</p>
<h4 data-id="heading-52">ç®—æ³•æ­¥éª¤</h4>
<ol>
<li>ç¡®å®šæ¡¶çš„æ•°é‡å’ŒèŒƒå›´ï¼ˆé€šå¸¸æŒ‰æ•°å€¼åˆ†å¸ƒåˆ’åˆ†ï¼Œå¦‚ <code>æ¡¶æ•°=æ•°ç»„é•¿åº¦</code>ï¼‰ï¼›</li>
<li>éå†æ•°ç»„ï¼Œå°†å…ƒç´ æ”¾å…¥å¯¹åº”æ¡¶ä¸­ï¼›</li>
<li>å¯¹æ¯ä¸ªéç©ºæ¡¶å†…çš„å…ƒç´ æ’åºï¼ˆæ¨èæ’å…¥æ’åºï¼Œå°è§„æ¨¡æ•°æ®é«˜æ•ˆï¼‰ï¼›</li>
<li>æŒ‰æ¡¶çš„é¡ºåºåˆå¹¶æ‰€æœ‰å…ƒç´ ï¼Œå¾—åˆ°æœ‰åºæ•°ç»„ã€‚</li>
</ol>
<h4 data-id="heading-53">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[5,3,8,4,2]</code>ï¼‰</h4>
<ul>
<li>æ¡¶æ•° = 3ï¼ŒèŒƒå›´åˆ’åˆ†ï¼š[0-3)ã€[3-6)ã€[6-9)ï¼›</li>
<li>åˆ†æ¡¶ï¼šæ¡¶ 1â†’[2,3]ï¼Œæ¡¶ 2â†’[5,4]ï¼Œæ¡¶ 3â†’[8]ï¼›</li>
<li>æ¡¶å†…æ’åºï¼šæ¡¶ 1â†’[2,3]ï¼Œæ¡¶ 2â†’[4,5]ï¼Œæ¡¶ 3â†’[8]ï¼›</li>
<li>åˆå¹¶ï¼š[2,3,4,5,8]ã€‚</li>
</ul>
<h4 data-id="heading-54">ä»£ç å®ç°ï¼ˆJavaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BucketSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bucketSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;

        <span class="hljs-comment">// 1. æ‰¾æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œç¡®å®šæ¡¶èŒƒå›´</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>], max = arr[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) {
            <span class="hljs-keyword">if</span> (num &lt; min) min = num;
            <span class="hljs-keyword">if</span> (num &gt; max) max = num;
        }

        <span class="hljs-comment">// 2. åˆ›å»ºæ¡¶ï¼ˆæ¡¶æ•°=æ•°ç»„é•¿åº¦ï¼Œå‡åŒ€åˆ’åˆ†ï¼‰</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">bucketNum</span> <span class="hljs-operator">=</span> n;
        List&lt;List&lt;Integer&gt;&gt; buckets = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(bucketNum);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; bucketNum; i++) {
            buckets.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());
        }

        <span class="hljs-comment">// 3. å…ƒç´ å…¥æ¡¶</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) {
            <span class="hljs-comment">// è®¡ç®—å…ƒç´ æ‰€å±æ¡¶çš„ç´¢å¼•</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">bucketIndex</span> <span class="hljs-operator">=</span> (num - min) * (bucketNum - <span class="hljs-number">1</span>) / (max - min);
            buckets.get(bucketIndex).add(num);
        }

        <span class="hljs-comment">// 4. æ¡¶å†…æ’åº + åˆå¹¶</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (List&lt;Integer&gt; bucket : buckets) {
            Collections.sort(bucket); <span class="hljs-comment">// æ¡¶å†…ç”¨æ’å…¥æ’åºï¼ˆCollections.sortåº•å±‚æ˜¯TimSortï¼‰</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : bucket) {
                arr[index++] = num;
            }
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>};
        bucketSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [2, 3, 4, 5, 8]</span>
    }
}
</code></pre>
<h4 data-id="heading-55">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæœ€å¥½ O(n+k)ï¼ˆåˆ†å¸ƒå‡åŒ€ï¼‰ã€æœ€å O(n2)ï¼ˆæ‰€æœ‰å…ƒç´ å…¥ä¸€ä¸ªæ¡¶ï¼‰ã€å¹³å‡ O(n+k)ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(n+k)ï¼ˆæ¡¶çš„æ•°é‡ï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šç¨³å®šï¼ˆå–å†³äºæ¡¶å†…æ’åºç®—æ³•ï¼Œå¦‚æ’å…¥æ’åºç¨³å®šï¼‰ï¼›</li>
<li>é€‚ç”¨åœºæ™¯ï¼šæ•°å€¼åˆ†å¸ƒå‡åŒ€çš„åœºæ™¯ï¼ˆå¦‚æˆç»©ã€è–ªèµ„ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-56">10. åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰</h3>
<h4 data-id="heading-57">æ ¸å¿ƒæ€æƒ³</h4>
<p>éæ¯”è¾ƒæ’åºï¼šæŒ‰æ•°å­—çš„ã€Œä½ã€ï¼ˆä¸ªä½ã€åä½ã€ç™¾ä½â€¦ï¼‰ä¾æ¬¡æ’åºï¼Œä»ä½ä½åˆ°é«˜ä½ï¼ˆLSDï¼‰æˆ–é«˜ä½åˆ°ä½ä½ï¼ˆMSDï¼‰ã€‚åƒæŒ‰ä½æ•°åˆ†çº§æ’åºï¼šå…ˆæ’ä¸ªä½ï¼Œå†æ’åä½ï¼Œæœ€ç»ˆæ•´ä½“æœ‰åºã€‚</p>
<h4 data-id="heading-58">ç®—æ³•æ­¥éª¤ï¼ˆLSDï¼Œä½ä½ä¼˜å…ˆï¼‰</h4>
<ol>
<li>æ‰¾åˆ°æ•°ç»„çš„æœ€å¤§ä½æ•°ï¼ˆå¦‚ <code>748</code> æ˜¯ 3 ä½ï¼‰ï¼›</li>
<li>ä»ä¸ªä½å¼€å§‹ï¼ŒæŒ‰å½“å‰ä½çš„æ•°å€¼å°†å…ƒç´ åˆ†åˆ° 0-9 çš„æ¡¶ä¸­ï¼›</li>
<li>æŒ‰æ¡¶çš„é¡ºåºï¼ˆ0â†’9ï¼‰åˆå¹¶å…ƒç´ ï¼›</li>
<li>ä½æ•°å‡çº§ï¼ˆåä½ã€ç™¾ä½â€¦ï¼‰ï¼Œé‡å¤æ­¥éª¤ 2-3ï¼›ç›´åˆ°æœ€é«˜ä½ã€‚</li>
</ol>
<h4 data-id="heading-59">æ¡ˆä¾‹æ¼”ç¤ºï¼ˆæ•°ç»„ <code>[53, 3, 542, 748, 14, 214]</code>ï¼‰</h4>
<ul>
<li>è¡¥é›¶å¯¹é½ï¼š<code>003, 014, 053, 214, 542, 748</code>ï¼›</li>
<li>ä¸ªä½æ’åºï¼šæŒ‰ä¸ªä½åˆ†æ¡¶â†’åˆå¹¶ <code>[542, 053, 003, 014, 214, 748]</code>ï¼›</li>
<li>åä½æ’åºï¼šæŒ‰åä½åˆ†æ¡¶â†’åˆå¹¶ <code>[003, 014, 214, 542, 053, 748]</code>ï¼›</li>
<li>ç™¾ä½æ’åºï¼šæŒ‰ç™¾ä½åˆ†æ¡¶â†’åˆå¹¶ <code>[003, 014, 053, 214, 542, 748]</code> â†’ <code>[3,14,53,214,542,748]</code>ã€‚</li>
</ul>
<h4 data-id="heading-60">ä»£ç å®ç°ï¼ˆJavaï¼ŒLSDï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RadixSort</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">radixSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> {
        <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;

        <span class="hljs-comment">// 1. æ‰¾æœ€å¤§å€¼ï¼Œç¡®å®šæœ€å¤§ä½æ•°</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) {
            <span class="hljs-keyword">if</span> (num &gt; max) max = num;
        }

        <span class="hljs-comment">// 2. æŒ‰ä½æ’åºï¼ˆä¸ªä½ã€åä½ã€ç™¾ä½...ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; max / exp &gt; <span class="hljs-number">0</span>; exp *= <span class="hljs-number">10</span>) {
            countSortByDigit(arr, exp);
        }
    }

    <span class="hljs-comment">// æŒ‰æŒ‡å®šä½æ•°æ’åºï¼ˆexp=1â†’ä¸ªä½ï¼Œexp=10â†’åä½...ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">countSortByDigit</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> exp)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;
        <span class="hljs-type">int</span>[] output = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n]; <span class="hljs-comment">// è¾“å‡ºæ•°ç»„</span>
        <span class="hljs-type">int</span>[] count = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">10</span>]; <span class="hljs-comment">// 0-9çš„æ¡¶</span>

        <span class="hljs-comment">// ç»Ÿè®¡å½“å‰ä½çš„æ¬¡æ•°</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) {
            <span class="hljs-type">int</span> <span class="hljs-variable">digit</span> <span class="hljs-operator">=</span> (num / exp) % <span class="hljs-number">10</span>;
            count[digit]++;
        }

        <span class="hljs-comment">// è®¡ç®—å‰ç¼€å’Œï¼Œç¡®å®šå…ƒç´ ä½ç½®ï¼ˆä¿è¯ç¨³å®šæ€§ï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            count[i] += count[i - <span class="hljs-number">1</span>];
        }

        <span class="hljs-comment">// é€†åºéå†ï¼Œä¿è¯ç¨³å®šæ€§</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            <span class="hljs-type">int</span> <span class="hljs-variable">digit</span> <span class="hljs-operator">=</span> (arr[i] / exp) % <span class="hljs-number">10</span>;
            output[count[digit] - <span class="hljs-number">1</span>] = arr[i];
            count[digit]--;
        }

        <span class="hljs-comment">// æ‹·è´å›åŸæ•°ç»„</span>
        System.arraycopy(output, <span class="hljs-number">0</span>, arr, <span class="hljs-number">0</span>, n);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">53</span>, <span class="hljs-number">3</span>, <span class="hljs-number">542</span>, <span class="hljs-number">748</span>, <span class="hljs-number">14</span>, <span class="hljs-number">214</span>};
        radixSort(arr);
        System.out.println(Arrays.toString(arr)); <span class="hljs-comment">// è¾“å‡º [3, 14, 53, 214, 542, 748]</span>
    }
}
</code></pre>
<h4 data-id="heading-61">ç®—æ³•åˆ†æ</h4>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(dÃ—(n+k))ï¼ˆd= æœ€å¤§ä½æ•°ï¼Œk= åŸºæ•° 10ï¼‰ï¼›</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(n+k)ï¼ˆè¾“å‡ºæ•°ç»„ + è®¡æ•°æ•°ç»„ï¼‰ï¼›</li>
<li>ç¨³å®šæ€§ï¼šç¨³å®šï¼ˆé€†åºéå† + å‰ç¼€å’Œä¿è¯ç›¸å¯¹ä½ç½®ï¼‰ï¼›</li>
<li>é€‚ç”¨åœºæ™¯ï¼šæ•´æ•°ã€å­—ç¬¦ä¸²æ’åºï¼ˆå¦‚æ‰‹æœºå·ã€èº«ä»½è¯å·ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-62">åå¤§æ’åºç®—æ³•æ€»ç»“è¡¨</h3>


















































































<table><thead><tr><th>ç®—æ³•</th><th>æ—¶é—´å¤æ‚åº¦ï¼ˆæœ€å¥½ / å¹³å‡ / æœ€åï¼‰</th><th>ç©ºé—´å¤æ‚åº¦</th><th>ç¨³å®šæ€§</th><th>æ ¸å¿ƒç‰¹ç‚¹</th></tr></thead><tbody><tr><td>å†’æ³¡æ’åº</td><td>O(n)/O(n2)/O(n2)</td><td>O(1)</td><td>ç¨³å®š</td><td>ç›¸é‚»äº¤æ¢ï¼Œç®€å•æ˜“å®ç°</td></tr><tr><td>é€‰æ‹©æ’åº</td><td>O(n2)/O(n2)/O(n2)</td><td>O(1)</td><td>ä¸ç¨³å®š</td><td>é€‰æœ€å°å€¼äº¤æ¢ï¼Œæ•ˆç‡ä½</td></tr><tr><td>æ’å…¥æ’åº</td><td>O(n)/O(n2)/O(n2)</td><td>O(1)</td><td>ç¨³å®š</td><td>æ’ç‰Œé€»è¾‘ï¼Œå°è§„æ¨¡æ•°æ®é«˜æ•ˆ</td></tr><tr><td>å¸Œå°”æ’åº</td><td>O(nlogn)/O(n1.3)/O(n2)</td><td>O(1)</td><td>ä¸ç¨³å®š</td><td>åˆ†ç»„æ’å…¥æ’åºï¼Œæ•ˆç‡ä¼˜äºæ’å…¥</td></tr><tr><td>å½’å¹¶æ’åº</td><td>O(nlogn)/O(nlogn)/O(nlogn)</td><td>O(n)</td><td>ç¨³å®š</td><td>åˆ†æ²»åˆå¹¶ï¼Œæ•ˆç‡ç¨³å®š</td></tr><tr><td>å¿«é€Ÿæ’åº</td><td>O(nlogn)/O(nlogn)/O(n2)</td><td>O(logn)</td><td>ä¸ç¨³å®š</td><td>åˆ†æ²»åˆ†åŒºï¼Œå®é™…åº”ç”¨æœ€ä¼˜</td></tr><tr><td>å †æ’åº</td><td>O(nlogn)/O(nlogn)/O(nlogn)</td><td>O(1)</td><td>ä¸ç¨³å®š</td><td>åˆ©ç”¨å †ç»“æ„ï¼ŒåŸåœ°æ’åº</td></tr><tr><td>è®¡æ•°æ’åº</td><td>O(n+k)/O(n+k)/O(n+k)</td><td>O(n+k)</td><td>ç¨³å®š</td><td>éæ¯”è¾ƒï¼Œæ•°å€¼èŒƒå›´å°é«˜æ•ˆ</td></tr><tr><td>æ¡¶æ’åº</td><td>O(n+k)/O(n+k)/O(n2)</td><td>O(n+k)</td><td>ç¨³å®š</td><td>åˆ†æ¡¶æ’åºï¼Œåˆ†å¸ƒå‡åŒ€æ—¶é«˜æ•ˆ</td></tr><tr><td>åŸºæ•°æ’åº</td><td>O(d(n+k))/O(d(n+k))/O(d(n+k))</td><td>O(n+k)</td><td>ç¨³å®š</td><td>æŒ‰ä½æ’åºï¼Œé€‚åˆæ•´æ•° /</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¸©å‘å®å½•ï¼MQ æ¶ˆè´¹ç§Ÿæˆ·èœå•æ›´æ–°ç«Ÿå¼•å‘å¹¶å‘è¡€æ¡ˆï¼Ÿæˆ‘æ˜¯å¦‚ä½•æŠŠçº¿ä¸Š BUG æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦çš„]]></title>    <link>https://juejin.cn/post/7599268297202008102</link>    <guid>https://juejin.cn/post/7599268297202008102</guid>    <pubDate>2026-01-25T14:07:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7599268297202008102" data-draft-id="7598881914203914290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¸©å‘å®å½•ï¼MQ æ¶ˆè´¹ç§Ÿæˆ·èœå•æ›´æ–°ç«Ÿå¼•å‘å¹¶å‘è¡€æ¡ˆï¼Ÿæˆ‘æ˜¯å¦‚ä½•æŠŠçº¿ä¸Š BUG æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦çš„"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-25T14:07:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±æ‰¾bugçš„æå¯»æ¬¢"/> <meta itemprop="url" content="https://juejin.cn/user/3228615868953102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¸©å‘å®å½•ï¼MQ æ¶ˆè´¹ç§Ÿæˆ·èœå•æ›´æ–°ç«Ÿå¼•å‘å¹¶å‘è¡€æ¡ˆï¼Ÿæˆ‘æ˜¯å¦‚ä½•æŠŠçº¿ä¸Š BUG æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦çš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3228615868953102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±æ‰¾bugçš„æå¯»æ¬¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T14:07:03.000Z" title="Sun Jan 25 2026 14:07:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºä¸€ååç«¯å¼€å‘ï¼Œæœ€æ€•çš„ä¸æ˜¯å†™ä»£ç ï¼Œè€Œæ˜¯çº¿ä¸Šçªç„¶ç‚¸é”… â€”â€” å‘Šè­¦ç¾¤ 99+ã€ä¸šåŠ¡æ–¹è¿½ç€é—®ã€è€æ¿åœ¨ç¾¤é‡Œ @ä½ â€¦ æœ€è¿‘æˆ‘å°±è¸©äº†ä¸ªå·¨å‘ï¼šä¸€æ®µçœ‹ä¼¼å¹³å¹³æ— å¥‡çš„ MQ æ¶ˆè´¹ç§Ÿæˆ·èœå•æ›´æ–°ä»£ç ï¼Œä¸Šçº¿åç›´æ¥å¼•å‘å¹¶å‘è¡€æ¡ˆï¼šç§Ÿæˆ·èœå•é‡å¤åˆ›å»ºã€éƒ¨åˆ†ç§Ÿæˆ·æ›´æ–°å®Œå…¨å¤±æ•ˆã€ç”šè‡³å¶å‘<strong>ç§Ÿæˆ·æ•°æ®ä¸²æµ</strong>ï¼ˆA ç§Ÿæˆ·èƒ½çœ‹åˆ° B ç§Ÿæˆ·çš„èœå•ï¼‰ï¼</p>
<p>ä»Šå¤©å°±å¸¦å¤§å®¶å¤ç›˜æ•´ä¸ªæ’å‘è¿‡ç¨‹ï¼ŒæŠŠè¿™äº›è—åœ¨ä»£ç é‡Œçš„ â€œéšå½¢ç‚¸å¼¹â€ æªå‡ºæ¥ï¼Œé¡ºä¾¿èŠèŠ MQ æ¶ˆè´¹å¹¶å‘åœºæ™¯ä¸‹çš„é¿å‘æŒ‡å—ï½</p>
<h2 data-id="heading-0">ä¸€ã€æ¡ˆå‘ç°åœºï¼šMQ æ¶ˆè´¹çš„ â€œè¯¡å¼‚ç°è±¡â€</h2>
<p>å…ˆäº¤ä»£ä¸‹èƒŒæ™¯ï¼šè¿™æ®µä»£ç æ˜¯ MQ æ¶ˆè´¹è€…çš„<code>onMessage</code>æ–¹æ³•ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯ç›‘å¬ â€œç§Ÿæˆ·è§’è‰²èœå•æ›´æ–°â€ æ¶ˆæ¯ï¼Œå¼‚æ­¥æ›´æ–°ç§Ÿæˆ·çš„èœå•æƒé™ã€‚ä¸Šçº¿å‰æµ‹è¯•ä¸€åˆ‡æ­£å¸¸ï¼Œç»“æœä¸€ä¸Šç”Ÿäº§ï¼Œè¯¡å¼‚ç°è±¡æ¥äºŒè¿ä¸‰ï¼š</p>
<ol>
<li><strong>é‡å¤æ‰§è¡Œ</strong>ï¼šåŒä¸€ç§Ÿæˆ·çš„èœå•æ›´æ–°è¯·æ±‚è¢«å¤šæ¬¡æ¶ˆè´¹ï¼Œèœå•æ•°æ®é‡å¤æ’å…¥ï¼Œæ•°æ®åº“é‡Œä¸€å †é‡å¤è®°å½•ï¼›</li>
<li><strong>æ›´æ–°å¤±æ•ˆ</strong>ï¼šéƒ¨åˆ†ç§Ÿæˆ·åé¦ˆèœå•æ”¹äº†ä½†ä¸ç”Ÿæ•ˆï¼ŒæŸ¥æ—¥å¿—å‘ç°æ¶ˆæ¯æ˜æ˜æ¶ˆè´¹äº†ï¼Œå´å¡åœ¨ Redis é”åˆ¤æ–­ç›´æ¥è¿”å›ï¼›</li>
<li><strong>æ•°æ®ä¸²æµ</strong>ï¼šæœ€è‡´å‘½çš„ï¼å¶å‘ A ç§Ÿæˆ·èƒ½çœ‹åˆ° B ç§Ÿæˆ·çš„èœå•ï¼Œå¤šç§Ÿæˆ·éš”ç¦»ç›´æ¥ç ´é˜²ï¼Œè¿™è¦æ˜¯è¢«ç”¨æˆ·å‘ç°ï¼Œå¦¥å¦¥çš„ç”Ÿäº§äº‹æ•…ï¼</li>
</ol>
<p>å…ˆè´´å‡ºé‚£æ®µ â€œç½ªé­ç¥¸é¦–â€ çš„æ ¸å¿ƒä»£ç ï¼ˆå¤§å®¶å…ˆå“å“ï¼Œèƒ½çœ‹å‡ºå‡ ä¸ªé—®é¢˜ï¼Ÿï¼‰ï¼š</p>
<p>java</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8bed23dc95240399d117cac6856eb95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5om-YnVn55qE5p2O5a-75qyi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769954823&amp;x-signature=QGGNZ1SdBJJdrm9dY1r%2Bu3Gu57c%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€æŠ½ä¸å‰¥èŒ§ï¼šæ‰’å¼€ä»£ç é‡Œçš„ â€œéšå½¢ç‚¸å¼¹â€</h2>
<p>çœ‹ä¼¼ç®€å•çš„å‡ åè¡Œä»£ç ï¼Œè—äº† 4 ä¸ªèƒ½å¼•çˆ†ç”Ÿäº§çš„å‘ï¼Œä¸ªä¸ªéƒ½æ˜¯ â€œè‡´å‘½çº§â€ï¼š</p>
<h3 data-id="heading-2">1. åˆ†å¸ƒå¼é”çš„ â€œä¼ªå®ç°â€â€”â€” æ²¡è¿‡æœŸæ—¶é—´çš„ Redis Key å°±æ˜¯å®šæ—¶ç‚¸å¼¹</h3>
<p>ä»£ç é‡Œæƒ³é€šè¿‡<code>Redis Key=true</code>å®ç° â€œé˜²é‡å¤æ¶ˆè´¹â€ï¼Œä½†è¿™æ³¢æ“ä½œçº¯çº¯æ˜¯ â€œè£¸å¥”â€ï¼š</p>
<ul>
<li><strong>æ— è¿‡æœŸæ—¶é—´</strong>ï¼šå¦‚æœç¨‹åºåœ¨<code>set(key, true)</code>åã€<code>finally</code>å‰å´©æºƒï¼ˆæ¯”å¦‚ JVM å®•æœºã€çº¿ç¨‹è¢« Killï¼‰ï¼Œè¿™ä¸ª Key ä¼šæ°¸è¿œç•™åœ¨ Redis é‡Œï¼Œåç»­è¯¥ç§Ÿæˆ·çš„æ‰€æœ‰æ›´æ–°è¯·æ±‚éƒ½ä¼šå› ä¸º<code>isSync=true</code>ç›´æ¥è¿”å›ï¼Œèœå•æ›´æ–°å½»åº•å¤±æ•ˆï¼›</li>
<li><strong>éåŸå­æ€§æ“ä½œ</strong>ï¼š<code>get(key)</code>Â +Â <code>set(key)</code>æ˜¯ä¸¤æ­¥æ“ä½œï¼Œé«˜å¹¶å‘ä¸‹å¤šä¸ªçº¿ç¨‹èƒ½åŒæ—¶æ‹¿åˆ°<code>isSync=null</code>ï¼Œç„¶åéƒ½æ‰§è¡Œ<code>set</code>ï¼Œæœ€ç»ˆå¤šçº¿ç¨‹å¹¶å‘å¤„ç†åŒä¸€ç§Ÿæˆ·çš„èœå•ï¼Œå¯¼è‡´æ•°æ®é‡å¤ï¼›</li>
<li><strong>é”å½’å±æƒæ··ä¹±</strong>ï¼š<code>finally</code>é‡Œç›´æ¥åˆ  Keyï¼Œä¸ç®¡è¿™æŠŠé”æ˜¯ä¸æ˜¯å½“å‰çº¿ç¨‹åŠ çš„ï¼Œå®¹æ˜“è¯¯åˆ å…¶ä»–çº¿ç¨‹çš„é”ï¼Œå¹¶å‘é—®é¢˜é›ªä¸ŠåŠ éœœã€‚</li>
</ul>
<p>ğŸ‘‰ ç”ŸåŠ¨æ¯”å–»ï¼šè¿™å°±åƒä½ ç»™æˆ¿é—¨è£…äº†æŠŠé”ï¼Œä½†æ—¢æ²¡é…é’¥åŒ™ï¼Œä¹Ÿæ²¡è®¾è‡ªåŠ¨å¼€é”æ—¶é—´ â€”â€” ä¸€æ—¦é”ä¸Šï¼Œè¿™æ‰‡é—¨å°±æ°¸è¿œæ‰“ä¸å¼€äº†ï¼›æ›´å‘çš„æ˜¯ï¼Œå¤šä¸ªäººåŒæ—¶æ¥å¼€é”ï¼Œè¿˜èƒ½ä¸€èµ·æŠŠé—¨æ’å¼€ï¼Œå±‹é‡Œçš„ä¸œè¥¿è¢«ç¿»å¾—ä¹±ä¸ƒå…«ç³Ÿã€‚</p>
<h3 data-id="heading-3">2. ç§Ÿæˆ·ä¸Šä¸‹æ–‡çš„ â€œæ¼ç½‘ä¹‹é±¼â€â€”â€” çº¿ç¨‹æ± å¤ç”¨å¯¼è‡´çš„ â€œä¸²å°â€</h3>
<p>å¤šç§Ÿæˆ·ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ â€œç§Ÿæˆ·ä¸Šä¸‹æ–‡éš”ç¦»â€ï¼Œä½†ä»£ç é‡Œåªåšäº†<code>setTenantId</code>ï¼Œå´æ²¡åœ¨<code>finally</code>é‡Œæ¸…ç†ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">TenantContextHolder<span class="hljs-selector-class">.setTenantId</span>(xxx); <span class="hljs-comment">// åªåŠ ä¸åˆ ï¼</span>
</code></pre>
<p>MQ æ¶ˆè´¹è€…ä¸€èˆ¬è¿è¡Œåœ¨çº¿ç¨‹æ± é‡Œï¼Œçº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡ä¸ä¼šé”€æ¯ï¼Œä¼šå¤ç”¨ç»™ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœçº¿ç¨‹ A å¤„ç†å®Œç§Ÿæˆ· 1 çš„è¯·æ±‚ï¼Œä¸Šä¸‹æ–‡æ²¡æ¸…ï¼Œçº¿ç¨‹ A å†å¤„ç†ç§Ÿæˆ· 2 çš„è¯·æ±‚æ—¶ï¼Œå°±ä¼šå¸¦ç€ç§Ÿæˆ· 1 çš„ ID è·‘ï¼Œç›´æ¥å¯¼è‡´<strong>æ•°æ®ä¸²æµ</strong>ï¼ˆA ç§Ÿæˆ·çœ‹åˆ° B ç§Ÿæˆ·çš„èœå•ï¼‰ã€‚</p>
<p>ğŸ‘‰ ç”ŸåŠ¨æ¯”å–»ï¼šè¿™å°±åƒé¤å…æœåŠ¡å‘˜ç”¨å®Œ A æ¡Œçš„é¤å…·ï¼Œæ²¡æ”¶æ‹¾å°±ç›´æ¥ç«¯ç»™ B æ¡Œç”¨ â€”â€” ä¸ä»…ä¸å«ç”Ÿï¼Œè¿˜ä¼šè®© B æ¡Œé¡¾å®¢åƒåˆ° A æ¡Œçš„å‰©èœï¼Œä½“éªŒç›´æ¥æ‹‰æ»¡ï¼ˆè´Ÿçš„ï¼‰ã€‚</p>
<h3 data-id="heading-4">3. å¼‚å¸¸å¤„ç†çš„ â€œæ‘†çƒ‚æ“ä½œâ€â€”â€” åæ‰æ‰€æœ‰å¼‚å¸¸ + æ—¥å¿—ç¼ºå †æ ˆ</h3>
<p>ä»£ç é‡Œ<code>catch (Exception e)</code>æŠŠæ‰€æœ‰å¼‚å¸¸éƒ½åäº†ï¼Œè¿˜åªæ‰“å°äº†å¼‚å¸¸æ¶ˆæ¯ï¼Œæ²¡æ‰“å°å †æ ˆï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-built_in">log</span>.error(<span class="hljs-string">"upd-app-role-menu-topic exception is :{}"</span>,e); <span class="hljs-comment">// é”™è¯¯ç¤ºèŒƒï¼</span>
</code></pre>
<p>è¿™ä¼šå¯¼è‡´ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å¼‚å¸¸è¢« â€œåâ€ï¼šå³ä½¿æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚èœå•æ’å…¥æ•°æ®åº“ï¼‰å¤±è´¥ï¼Œç¨‹åºä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œç›‘æ§ç³»ç»Ÿæ„ŸçŸ¥ä¸åˆ°ï¼Œé—®é¢˜è—åœ¨æš—å¤„ï¼›</li>
<li>æ—¥å¿— â€œæ®‹åºŸâ€ï¼šåªæœ‰å¼‚å¸¸æ¶ˆæ¯ï¼ˆæ¯”å¦‚<code>NullPointerException</code>ï¼‰ï¼Œæ²¡æœ‰å †æ ˆï¼Œæ ¹æœ¬å®šä½ä¸åˆ°æ˜¯å“ªä¸€è¡Œä»£ç å‡ºé—®é¢˜ï¼Œæ’éšœæ—¶åªèƒ½ççŒœã€‚</li>
</ul>
<p>ğŸ‘‰ ç”ŸåŠ¨æ¯”å–»ï¼šè¿™å°±åƒåŒ»ç”Ÿçœ‹ç—…åªçœ‹ç—…äººè¯´ â€œä¸èˆ’æœâ€ï¼Œæ—¢ä¸é—®å“ªé‡Œä¸èˆ’æœï¼Œä¹Ÿä¸åšæ£€æŸ¥ï¼Œè¿˜ä¸å†™ç—…å† â€”â€” ç­‰ç—…äººç—…æƒ…æ¶åŒ–ï¼Œè¿æ€ä¹ˆæ²»éƒ½ä¸çŸ¥é“ã€‚</p>
<h3 data-id="heading-5">4. Redis æ“ä½œçš„ â€œç²—å¿ƒå¤§æ„â€â€”â€” ç©º Key + ååºåˆ—åŒ–éšæ‚£</h3>
<p>ä»£ç é‡Œæ‹¼æ¥ Redis Key æ—¶ç›´æ¥ç”¨<code>cacheKey</code>ï¼Œæ²¡åšéç©ºæ ¡éªŒï¼š</p>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"tenant_menu:"</span>+updAppTenantRoleMenuDTO.<span class="hljs-built_in">getCacheKey</span>() <span class="hljs-comment">// cacheKeyå¯èƒ½ä¸ºnull</span>
</code></pre>
<p>å¦‚æœ<code>cacheKey</code>æ˜¯<code>null</code>ï¼Œæœ€ç»ˆ Key ä¼šå˜æˆ<code>tenant_menu:null</code>ï¼Œä¸ä»…ä¸ç¬¦åˆ Redis Key è§„èŒƒï¼Œè¿˜æ‹¿ä¸åˆ°ä»»ä½•æ•°æ®ï¼›æ›´å‘çš„æ˜¯ï¼Œç›´æ¥æŠŠ Redis é‡Œçš„ Object å¼ºè½¬æˆ<code>List&lt;AppMenuEntity&gt;</code>ï¼Œå¦‚æœ<code>redisTemplate</code>æ²¡é…ç½® JSON åºåˆ—åŒ–å™¨ï¼Œä¼šå› ä¸º JDK åºåˆ—åŒ–é—®é¢˜å¯¼è‡´ååºåˆ—åŒ–å¤±è´¥ï¼Œç›´æ¥æŠ›å¼‚å¸¸ã€‚</p>
<p>ğŸ‘‰ ç”ŸåŠ¨æ¯”å–»ï¼šè¿™å°±åƒå¯„å¿«é€’æ²¡å†™æ¸…æ¥šæ”¶ä»¶åœ°å€ï¼Œè¿˜æŠŠåŒ…è£¹ç¼ äº†åå‡ å±‚èƒ¶å¸¦ â€”â€” å¿«é€’å‘˜æ‰¾ä¸åˆ°äººï¼Œå°±ç®—æ‰¾åˆ°äººï¼Œä¹Ÿæ‰“ä¸å¼€åŒ…è£¹ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€å¯¹ç—‡ä¸‹è¯ï¼šæŠŠ BUG æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦çš„ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<p>æ‰¾åˆ°é—®é¢˜åï¼Œé’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œæ¯ä¸€æ­¥éƒ½ç›´å‡»ç—›ç‚¹ï¼š</p>
<h3 data-id="heading-7">1. å‡çº§åˆ†å¸ƒå¼é”ï¼šç”¨ Redisson æ›¿ä»£æ‰‹åŠ¨å®ç°ï¼ˆåˆ«è‡ªå·±é€ è½®å­ï¼ï¼‰</h3>
<p>æ‰‹åŠ¨å®ç°åˆ†å¸ƒå¼é”å®¹æ˜“è¸©å‘ï¼Œç›´æ¥ç”¨æˆç†Ÿçš„ Redissonï¼ŒåŸå­æ€§ + è¿‡æœŸæ—¶é—´ + é”å½’å±æƒæ ¡éªŒå…¨æå®šï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Resource</span>
<span class="hljs-keyword">private</span> RedissonClient redissonClient;

<span class="hljs-meta">@SneakyThrows</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(UpdAppTenantRoleMenuDTO updAppTenantRoleMenuDTO)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">tenantId</span> <span class="hljs-operator">=</span> updAppTenantRoleMenuDTO.getTenantId();
    <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"upd-app-role-menu-topic:"</span> + tenantId;
    <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
    <span class="hljs-comment">// 5ç§’å†…æ‹¿ä¸åˆ°é”å°±æ”¾å¼ƒï¼Œé”30ç§’è‡ªåŠ¨è¿‡æœŸï¼ˆé¿å…æ­»é”ï¼‰</span>
    <span class="hljs-keyword">if</span> (!lock.tryLock(<span class="hljs-number">5</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS)) {
        log.info(<span class="hljs-string">"ç§Ÿæˆ·{}èœå•æ›´æ–°ä»»åŠ¡æ­£åœ¨æ‰§è¡Œï¼Œæœ¬æ¬¡è¯·æ±‚æ”¾å¼ƒ"</span>, tenantId);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆä¸‹æ–‡ç»§ç»­ä¼˜åŒ–ï¼‰</span>
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"ç§Ÿæˆ·{}èœå•æ›´æ–°å¼‚å¸¸"</span>, tenantId, e); <span class="hljs-comment">// æ‰“å°å®Œæ•´å †æ ˆ</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"ç§Ÿæˆ·èœå•æ›´æ–°å¤±è´¥"</span>, e); <span class="hljs-comment">// æŠ›å¼‚å¸¸è§¦å‘å‘Šè­¦</span>
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// åªé‡Šæ”¾å½“å‰çº¿ç¨‹æŒæœ‰çš„é”ï¼Œé¿å…è¯¯åˆ </span>
        <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
            lock.unlock();
        }
    }
}
</code></pre>
<h3 data-id="heading-8">2. ç®¡å¥½ç§Ÿæˆ·ä¸Šä¸‹æ–‡ï¼štry-finally å¿…æ¸…ç†ï¼ˆç”¨å®Œå³æ¸…ï¼ï¼‰</h3>
<p>å¤šç§Ÿæˆ·ä¸Šä¸‹æ–‡å¿…é¡» â€œåŠ äº†å°±æ¸…â€ï¼Œå“ªæ€•æŠ›å¼‚å¸¸ä¹Ÿè¦æ¸…ï¼š</p>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è®¾ç½®ç§Ÿæˆ·ä¸Šä¸‹æ–‡</span>
    TenantContextHolder.setTenantId(tenantId);
    <span class="hljs-comment">// æ ¸å¿ƒä¸šåŠ¡é€»è¾‘...</span>
} <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// æ— è®ºæ˜¯å¦å¼‚å¸¸ï¼Œéƒ½æ¸…ç†ä¸Šä¸‹æ–‡ï¼</span>
    TenantContextHolder.clear();
    <span class="hljs-comment">// é‡Šæ”¾é”ç­‰å…¶ä»–æ“ä½œ...</span>
}
</code></pre>
<h3 data-id="heading-9">3. è§„èŒƒå¼‚å¸¸å¤„ç†ï¼šç²¾å‡†æ•è· + å®Œæ•´æ—¥å¿—</h3>
<p>åˆ«å†æ— è„‘<code>catch (Exception e)</code>ï¼Œç²¾å‡†æ•è·ä¸šåŠ¡å¼‚å¸¸ + æ‰“å°å®Œæ•´å †æ ˆï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">try</span> {
    // æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
} <span class="hljs-keyword">catch</span> (RedisException e) {
    log.<span class="hljs-keyword">error</span>(<span class="hljs-string">"ç§Ÿæˆ·{}èœå•æ›´æ–°-Redisæ“ä½œå¼‚å¸¸"</span>, tenantId, e);
    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">new</span> BusinessException(<span class="hljs-string">"Redisæ“ä½œå¤±è´¥ï¼Œèœå•æ›´æ–°ç»ˆæ­¢"</span>, e);
} <span class="hljs-keyword">catch</span> (ServiceException e) {
    log.<span class="hljs-keyword">error</span>(<span class="hljs-string">"ç§Ÿæˆ·{}èœå•æ›´æ–°-ä¸šåŠ¡æœåŠ¡å¼‚å¸¸"</span>, tenantId, e);
    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">new</span> BusinessException(<span class="hljs-string">"ä¸šåŠ¡æœåŠ¡è°ƒç”¨å¤±è´¥ï¼Œèœå•æ›´æ–°ç»ˆæ­¢"</span>, e);
} <span class="hljs-keyword">catch</span> (Exception e) {
    log.<span class="hljs-keyword">error</span>(<span class="hljs-string">"ç§Ÿæˆ·{}èœå•æ›´æ–°-æœªçŸ¥å¼‚å¸¸"</span>, tenantId, e);
    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">new</span> BusinessException(<span class="hljs-string">"æœªçŸ¥å¼‚å¸¸ï¼Œèœå•æ›´æ–°ç»ˆæ­¢"</span>, e);
}
</code></pre>
<h3 data-id="heading-10">4. Redis æ“ä½œ â€œåŠ é˜²æŠ¤â€ï¼šç©ºå€¼æ ¡éªŒ + æ­£ç¡®åºåˆ—åŒ–</h3>
<p>å…ˆæ ¡éªŒ Key çš„åˆæ³•æ€§ï¼Œå†é…ç½® Redis åºåˆ—åŒ–å™¨ï¼ˆé¿å…ååºåˆ—åŒ–å¤±è´¥ï¼‰ï¼š
è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">// 1. ç©ºå€¼æ ¡éªŒ
String <span class="hljs-attr">cacheKey</span> = updAppTenantRoleMenuDTO.getCacheKey()<span class="hljs-comment">;</span>
if (StringUtils.isBlank(cacheKey)) {
    log.warn("ç§Ÿæˆ·{}çš„cacheKeyä¸ºç©ºï¼Œèœå•æ›´æ–°ç»ˆæ­¢", tenantId)<span class="hljs-comment">;</span>
    return<span class="hljs-comment">;</span>
}
String <span class="hljs-attr">menuRedisKey</span> = <span class="hljs-string">"tenant_menu:"</span> + cacheKey<span class="hljs-comment">;</span>

// 2. å®‰å…¨è·å–æ•°æ®ï¼ˆå…ˆç¡®ä¿redisTemplateé…ç½®äº†Jacksonåºåˆ—åŒ–ï¼‰
List&lt;AppMenuEntity&gt; <span class="hljs-attr">sysMenus</span> = (List&lt;AppMenuEntity&gt;) redisTemplate.opsForValue().get(menuRedisKey)<span class="hljs-comment">;</span>
if (CollectionUtil.isEmpty(sysMenus)) {
    log.warn("ç§Ÿæˆ·{}çš„èœå•åˆ—è¡¨ä¸ºç©ºï¼Œæ›´æ–°ç»ˆæ­¢", tenantId)<span class="hljs-comment">;</span>
    return<span class="hljs-comment">;</span>
}
</code></pre>
<p>Redis åºåˆ—åŒ–é…ç½®ç¤ºä¾‹ï¼ˆå…³é”®ï¼ï¼‰ï¼š</p>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino">@<span class="hljs-function">Bean
<span class="hljs-keyword">public</span> RedisTemplate&lt;<span class="hljs-type">String</span>, Object&gt; <span class="hljs-title">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory factory)</span> </span>{
    RedisTemplate&lt;<span class="hljs-type">String</span>, Object&gt; <span class="hljs-keyword">template</span> = <span class="hljs-keyword">new</span> RedisTemplate&lt;&gt;();
    <span class="hljs-keyword">template</span>.<span class="hljs-built_in">setConnectionFactory</span>(factory);
    <span class="hljs-comment">// ä½¿ç”¨Jackson2JsonRedisSerializeråºåˆ—åŒ–</span>
    Jackson2JsonRedisSerializer&lt;Object&gt; serializer = <span class="hljs-keyword">new</span> Jackson2JsonRedisSerializer&lt;&gt;(Object.<span class="hljs-keyword">class</span>);
    ObjectMapper mapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ObjectMapper</span>();
    mapper.<span class="hljs-built_in">setVisibility</span>(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
    mapper.<span class="hljs-built_in">activateDefaultTyping</span>(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL);
    serializer.<span class="hljs-built_in">setObjectMapper</span>(mapper);
    <span class="hljs-comment">// è®¾ç½®Keyå’ŒValueçš„åºåˆ—åŒ–å™¨</span>
    <span class="hljs-keyword">template</span>.<span class="hljs-built_in">setKeySerializer</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">StringRedisSerializer</span>());
    <span class="hljs-keyword">template</span>.<span class="hljs-built_in">setValueSerializer</span>(serializer);
    <span class="hljs-keyword">template</span>.<span class="hljs-built_in">afterPropertiesSet</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">template</span>;
}
</code></pre>
<h2 data-id="heading-11">å››ã€é¿å‘æŒ‡å—ï¼šMQ æ¶ˆè´¹å¹¶å‘åœºæ™¯çš„ â€œä¿å‘½æ³•åˆ™â€</h2>
<p>è¸©å®Œè¿™äº›å‘ï¼Œæˆ‘æ€»ç»“äº† 4 æ¡ â€œä¿å‘½æ³•åˆ™â€ï¼Œåˆ†äº«ç»™å¤§å®¶ï¼š</p>
<ol>
<li><strong>åˆ†å¸ƒå¼é”åˆ«è‡ªå·±é€ è½®å­</strong>ï¼šRedisson/Redlock æ‰æ˜¯ YYDSï¼Œæ‰‹åŠ¨å®ç°å®¹æ˜“æ¼åŸå­æ€§ã€è¿‡æœŸæ—¶é—´ã€é”å½’å±æƒè¿™äº›å…³é”®ç‚¹ï¼›</li>
<li><strong>å¤šç§Ÿæˆ·ä¸Šä¸‹æ–‡ =â€œç”¨å®Œå³æ¸…â€</strong> ï¼šçº¿ç¨‹æ± ç¯å¢ƒä¸‹ï¼Œç§Ÿæˆ· IDã€ç”¨æˆ· ID ç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¿…é¡»åœ¨ finally é‡Œæ¸…ç†ï¼Œå¦åˆ™å¿…ä¸²æµï¼›</li>
<li><strong>å¼‚å¸¸åˆ« â€œåâ€ï¼Œæ—¥å¿—åˆ« â€œç¼ºâ€</strong> ï¼šå¼‚å¸¸è¦æŠ›å‡ºå»ï¼ˆè§¦å‘ç›‘æ§å‘Šè­¦ï¼‰ï¼Œæ—¥å¿—è¦æ‰“å°å®Œæ•´å †æ ˆï¼ˆæ–¹ä¾¿å®šä½é—®é¢˜ï¼‰ï¼Œåˆ«åš â€œç”©æ‰‹æŒæŸœâ€ï¼›</li>
<li><strong>Redis æ“ä½œå…ˆæ ¡éªŒ</strong>ï¼šæ‹¼æ¥ Key å‰å…ˆæ ¡éªŒéç©ºï¼Œåºåˆ—åŒ–é…ç½®è¦åˆ°ä½ï¼Œé¿å…ååºåˆ—åŒ–å¤±è´¥ / éæ³• Keyã€‚</li>
</ol>
<h2 data-id="heading-12">äº”ã€æœ€åå” ä¸¤å¥</h2>
<p>è¿™æ®µä»£ç çš„é—®é¢˜ï¼Œå…¶å®éƒ½ä¸æ˜¯ â€œé«˜æ·±çš„æŠ€æœ¯éš¾é¢˜â€ï¼Œè€Œæ˜¯åŸºç¡€è§„èŒƒæ²¡åšå¥½ â€”â€” åˆ†å¸ƒå¼é”çš„åŸºç¡€ã€çº¿ç¨‹å®‰å…¨çš„åŸºç¡€ã€å¼‚å¸¸å¤„ç†çš„åŸºç¡€ã€‚ä½†æ°æ°æ˜¯è¿™äº› â€œåŸºç¡€å‘â€ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šè¢«æ”¾å¤§æˆè‡´å‘½æ•…éšœã€‚</p>
<p>è¸©å‘ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯è¸©äº†ä¸æ€»ç»“ã€‚å¸Œæœ›è¿™ç¯‡å¤ç›˜èƒ½å¸®å¤§å®¶å°‘èµ°å¼¯è·¯ï¼Œä¹Ÿæ¬¢è¿è¯„è®ºåŒºèŠèŠä½ è¸©è¿‡çš„ MQ å¹¶å‘å‘ï½</p>
<h3 data-id="heading-13">å…³é”®ç‚¹å›é¡¾</h3>
<ol>
<li>æ‰‹åŠ¨å®ç°çš„ Redis åˆ†å¸ƒå¼é”è‹¥æ— è¿‡æœŸæ—¶é—´å’ŒåŸå­æ€§ä¿éšœï¼Œæ˜“å¼•å‘æ­»é”å’Œé‡å¤æ‰§è¡Œï¼Œä¼˜å…ˆç”¨ Redissonï¼›</li>
<li>å¤šç§Ÿæˆ·ç³»ç»Ÿä¸­ï¼Œç§Ÿæˆ·ä¸Šä¸‹æ–‡å¿…é¡»åœ¨ finally å—æ¸…ç†ï¼Œé¿å…çº¿ç¨‹æ± å¤ç”¨å¯¼è‡´æ•°æ®ä¸²æµï¼›</li>
<li>MQ æ¶ˆè´¹å¼‚å¸¸ä¸èƒ½ â€œåâ€ï¼Œæ—¥å¿—è¦æ‰“å°å®Œæ•´å †æ ˆï¼Œå…³é”®å¼‚å¸¸éœ€æŠ›å‡ºè§¦å‘å‘Šè­¦ï¼›</li>
<li>Redis æ“ä½œå‰è¦æ ¡éªŒ Key åˆæ³•æ€§ï¼Œé…ç½®æ­£ç¡®çš„åºåˆ—åŒ–å™¨é¿å…ååºåˆ—åŒ–å¤±è´¥ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆå…­ï¼‰- Prisma ORMï¼šä»æ•°æ®åº“è®¾è®¡åˆ°é«˜æ•ˆå¼€å‘]]></title>    <link>https://juejin.cn/post/7598710324167557135</link>    <guid>https://juejin.cn/post/7598710324167557135</guid>    <pubDate>2026-01-25T14:12:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598710324167557135" data-draft-id="7598710324167507983" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆå…­ï¼‰- Prisma ORMï¼šä»æ•°æ®åº“è®¾è®¡åˆ°é«˜æ•ˆå¼€å‘"/> <meta itemprop="keywords" content="åç«¯,NestJS"/> <meta itemprop="datePublished" content="2026-01-25T14:12:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ETA8"/> <meta itemprop="url" content="https://juejin.cn/user/608445545328347"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆå…­ï¼‰- Prisma ORMï¼šä»æ•°æ®åº“è®¾è®¡åˆ°é«˜æ•ˆå¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/608445545328347/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ETA8
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T14:12:28.000Z" title="Sun Jan 25 2026 14:12:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æˆ‘ä»¬çš„ react + nestjså…¨æ ˆå¼€å‘ä¸­ï¼Œå¦‚ä½•é«˜æ•ˆã€å®‰å…¨åœ°æ“ä½œæ•°æ®åº“ï¼Œæ˜¯å¼€å‘è€…éƒ½ä¼šé¢ä¸´çš„é—®é¢˜ã€‚ä¼ ç»Ÿçš„ SQL ç¼–å†™æ–¹å¼è™½ç„¶çµæ´»ï¼Œä½†å®¹æ˜“å‡ºé”™ã€éš¾ä»¥ç»´æŠ¤ï¼›è€Œè¿‡åº¦ä¾èµ–åŸå§‹æŸ¥è¯¢åˆä¼šè®©ä»£ç å˜å¾—è‡ƒè‚¿ä¸”ç¼ºä¹ç±»å‹å®‰å…¨æ€§ã€‚</p>
<p>è¿™æ¬¡è®©æˆ‘ä»¬ä½¿ç”¨<strong>prisma</strong>ï¼Œè¿™ä¸ªå¯¹è±¡æ˜ å°„å…³ç³»å·¥å…·ï¼Œå‰–æå…¶æ•°æ®æ¨¡å‹è®¾è®¡èƒŒåçš„æ€è€ƒé€»è¾‘ï¼Œè®²è§£è¿ç§»ï¼ˆmigrateï¼‰æœºåˆ¶çš„å®é™…ä»·å€¼ï¼Œå¹¶æ¢è®¨ Prisma åœ¨ä¼ä¸šçº§åº”ç”¨ä¸­çš„ä¼˜åŠ¿ä¸æ³¨æ„äº‹é¡¹ã€‚è®©æˆ‘ä»¬è¿˜åŸä¸€æ¬¡å®Œæ•´çš„æ•°æ®åº“å»ºæ¨¡ä¸å¼€å‘æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© Prismaï¼Ÿå‘Šåˆ«æ‰‹å†™ SQL çš„æ—¶ä»£</h2>
<p>æˆ‘ä»¬å…ˆæ¥å›ç­”ä¸€ä¸ªé—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆè¦ç”¨ ORMï¼Ÿ</strong></p>
<p>å¾ˆå¤šåˆå­¦è€…ä¼šè®¤ä¸ºï¼Œâ€œSQL æˆ‘éƒ½ä¼šå†™ï¼Œè¿˜ç”¨ä»€ä¹ˆ ORMï¼Ÿâ€ è¿™ä¸ªæƒ³æ³•æ²¡é”™ï¼Œä½†åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œéšç€ä¸šåŠ¡å¢é•¿ï¼Œä½ ä¼šå‘ç°ï¼š</p>
<ul>
<li>å¤šäººåä½œæ—¶ï¼Œæ¯ä¸ªäººå†™çš„ SQL é£æ ¼ä¸åŒï¼›</li>
<li>è¡¨ç»“æ„å˜æ›´é¢‘ç¹ï¼Œæ‰‹åŠ¨æ”¹ SQL å®¹æ˜“é—æ¼ï¼›</li>
<li>ç±»å‹ä¸å®‰å…¨ï¼ŒJS/TS ä¸­æ— æ³•é™æ€æ£€æŸ¥å­—æ®µæ˜¯å¦å­˜åœ¨ï¼›</li>
<li>åˆ†é¡µã€å…³è”æŸ¥è¯¢ç­‰é‡å¤é€»è¾‘ä¸æ–­å¤åˆ¶ç²˜è´´ã€‚</li>
</ul>
<p>è€Œ Prisma æ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œç”Ÿçš„â€”â€”å®ƒä¸æ˜¯ç®€å•çš„ ORM å·¥å…·ï¼Œæ›´åƒæ˜¯ä¸€å¥—<strong>ç±»å‹å®‰å…¨ + è‡ªåŠ¨åŒ–è¿ç§» + å¯è§†åŒ–è°ƒè¯•</strong>çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p>
<blockquote>
<p>Prisma = Schema è®¾è®¡ + æ•°æ®è¿ç§» + ç±»å‹ç”Ÿæˆ + æŸ¥è¯¢æ„å»ºå™¨</p>
</blockquote>
<p>å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š<strong>æŠŠæ•°æ®åº“å½“ä½œä»£ç ä¸€æ ·ç®¡ç†</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ•°æ®æ¨¡å‹è®¾è®¡ï¼šä¸åªæ˜¯å»ºè¡¨ï¼Œæ›´æ˜¯ä¸šåŠ¡é€»è¾‘çš„è¡¨è¾¾</h2>
<p>è®©æˆ‘ä»¬æ¥çœ‹è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šæˆ‘ä»¬è¦åšä¸€ä¸ªå†…å®¹ç¤¾åŒºç³»ç»Ÿï¼ŒåŒ…å«ç”¨æˆ·ã€æ–‡ç« ã€è¯„è®ºã€æ ‡ç­¾ã€ç‚¹èµç­‰åŠŸèƒ½ã€‚è¿™çœ‹ä¼¼ç®€å•ï¼Œä½†å…¶ä¸­çš„å…³ç³»å¤„ç†éå¸¸å…³é”®ã€‚</p>
<h3 data-id="heading-2">1. ç”¨æˆ·è¡¨ï¼ˆUserï¼‰</h3>
<pre><code class="hljs language-prisma" lang="prisma">model User {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  password  String
  posts     Post[]
  comments  Comment[]
  likes     UserLikePost[]
}
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ä¸ªé‡ç‚¹è®¾è®¡ç‚¹å€¼å¾—è¯´æ˜ï¼š</p>
<h4 data-id="heading-3">âœ… å”¯ä¸€ç”¨æˆ·å <code>@unique</code></h4>
<p>ç”¨æˆ·åä½œä¸ºç™»å½•æ ‡è¯†ï¼Œå¿…é¡»å”¯ä¸€ã€‚ä½¿ç”¨ <code>@unique</code> èƒ½è‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼Œé¿å…ç¨‹åºå±‚æ¼æ ¡éªŒå¯¼è‡´è„æ•°æ®ã€‚</p>
<h4 data-id="heading-4">âœ… çº§è”åˆ é™¤ vs ç½®ç©ºç­–ç•¥çš„é€‰æ‹©</h4>
<p>æ¯”å¦‚ç”¨æˆ·çš„å¤´åƒï¼ˆAvatarï¼‰ã€æ–‡ä»¶ï¼ˆFileï¼‰ï¼Œéƒ½è®¾ç½®äº† <code>onDelete: Cascade</code> â€”â€” ç”¨æˆ·åˆ äº†ï¼Œç›¸å…³èµ„æºä¹Ÿä¸€å¹¶æ¸…ç†ï¼Œç¬¦åˆç›´è§‰ã€‚</p>
<p>ä½†æ–‡ç« ï¼ˆPostï¼‰å´è®¾ç½®ä¸ºï¼š</p>
<pre><code class="hljs language-prisma" lang="prisma">user Post? @relation(... onDelete: SetNull)
</code></pre>
<p>è¿™æ„å‘³ç€ï¼š<strong>å½“ä½œè€…è¢«åˆ é™¤æ—¶ï¼Œæ–‡ç« ä»ç„¶ä¿ç•™ï¼Œåªæ˜¯ä½œè€…å˜ä¸ºç©º</strong>ã€‚è¿™æ˜¯å‡ºäºå†…å®¹ä¿æŠ¤çš„è€ƒè™‘â€”â€”ä¸èƒ½å› ä¸ºæŸä¸ªç”¨æˆ·æ³¨é”€è´¦å·ï¼Œå°±è®©æ‰€æœ‰ä»–å‘å¸ƒçš„å†…å®¹æ¶ˆå¤±ã€‚ç±»ä¼¼çŸ¥ä¹ã€å¾®åšçš„åšæ³•ã€‚</p>
<blockquote>
<p>âš ï¸ æ€è€ƒé¢˜ï¼šä»€ä¹ˆæ—¶å€™è¯¥ç”¨ <code>Cascade</code>ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ <code>SetNull</code>ï¼Ÿ</p>
<ul>
<li><code>Cascade</code>ï¼šé™„å±èµ„æºæ— ç‹¬ç«‹æ„ä¹‰ï¼ˆå¦‚ç”¨æˆ·ä¸Šä¼ çš„ä¸´æ—¶å›¾ç‰‡ï¼‰</li>
<li><code>SetNull</code>ï¼šä¸»èµ„æºæœ‰ä»·å€¼ï¼Œéœ€ä¿ç•™å†å²è®°å½•ï¼ˆå¦‚æ–‡ç« ã€è¯„è®ºï¼‰</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-5">2. æ–‡ç« ä¸æ ‡ç­¾çš„å¤šå¯¹å¤šå…³ç³»ï¼ˆPostTagï¼‰</h3>
<p>æ ‡ç­¾ç³»ç»Ÿæ˜¯ä¸€ä¸ªå…¸å‹çš„å¤šå¯¹å¤šåœºæ™¯ã€‚ç›´æ¥åœ¨ <code>Post</code> ä¸ŠåŠ  <code>tagIds</code> å­—æ®µçœ‹ä¼¼æ–¹ä¾¿ï¼Œå®åˆ™è¿åèŒƒå¼ï¼ŒåæœŸéš¾æ‰©å±•ã€‚</p>
<p>Prisma æ¨èæ˜¾å¼å®šä¹‰ä¸­é—´è¡¨ï¼š</p>
<pre><code class="hljs language-prisma" lang="prisma">model PostTag {
  postId Int
  tagId  Int
  post   Post @relation(fields: [postId], references: [id], onDelete: Cascade)
  tag    Tag  @relation(fields: [tagId], references: [id], onDelete: Cascade)
  @@id([postId, tagId])
}
</code></pre>
<p>è¿™æ ·åšæœ‰ä¸‰ä¸ªå¥½å¤„ï¼š</p>
<ol>
<li><strong>æ¸…æ™°è¡¨è¾¾å…³ç³»ç»“æ„</strong>ï¼šä¸å†æ˜¯éšå¼çš„æ•°ç»„å­—ç¬¦ä¸²æ‹¼æ¥ï¼›</li>
<li><strong>æ”¯æŒé¢å¤–å­—æ®µæ‰©å±•</strong>ï¼šæœªæ¥å¦‚æœè¦è®°å½•â€œè°æ·»åŠ çš„æ ‡ç­¾â€ã€â€œæ·»åŠ æ—¶é—´â€ï¼Œå¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªè¡¨é‡ŒåŠ å­—æ®µï¼›</li>
<li><strong>æ€§èƒ½å¯æ§</strong>ï¼šå¯ä»¥é’ˆå¯¹ <code>(tagId)</code> å»ºç«‹ç´¢å¼•ï¼Œå®ç°â€œæŸ¥æ‰¾æŸæ ‡ç­¾ä¸‹çš„æ‰€æœ‰æ–‡ç« â€è¿™ç±»é«˜é¢‘æŸ¥è¯¢ã€‚</li>
</ol>
<blockquote>
<p>ğŸ’¡ å°æŠ€å·§ï¼šä¸­é—´è¡¨å‘½åå»ºè®®ç»Ÿä¸€ä¸º <code>&lt;Left&gt;&lt;Right&gt;</code> å½¢å¼ï¼Œå¦‚ <code>PostTag</code>ï¼Œè€Œä¸æ˜¯ <code>TagPost</code> æˆ– <code>post_tags</code> æ··ç”¨ï¼Œä¿æŒä¸€è‡´æ€§ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">3. è¯„è®ºçš„é€’å½’å…³ç³»ï¼ˆComment â†’ Commentï¼‰</h3>
<p>è¯„è®ºå¯ä»¥å›å¤è¯„è®ºï¼Œå½¢æˆæ ‘çŠ¶ç»“æ„ã€‚è¿™ç§è‡ªå¼•ç”¨å…³ç³»åœ¨ Prisma ä¸­é€šè¿‡ <code>@relation("Name")</code> æ˜¾å¼å‘½åæ¥å®ç°ï¼š</p>
<pre><code class="hljs language-prisma" lang="prisma">model Comment {
  parent   Comment?  @relation("CommentToComment", fields: [parentId], references: [id])
  replies  Comment[] @relation("CommentToComment")
}
</code></pre>
<p>è¿™ä¸ªè®¾è®¡çš„å…³é”®åœ¨äºï¼š</p>
<ul>
<li>ä½¿ç”¨å­—ç¬¦ä¸² <code>"CommentToComment"</code> åŒºåˆ†ä¸¤ä¸ªæ–¹å‘çš„å…³ç³»ï¼›</li>
<li><code>parentId</code> å¯ä¸ºç©ºï¼Œè¡¨ç¤ºé¡¶å±‚è¯„è®ºï¼›</li>
<li>åˆ é™¤çˆ¶è¯„è®ºæ—¶ï¼Œå­è¯„è®ºä¹Ÿçº§è”åˆ é™¤ï¼ˆ<code>onDelete: Cascade</code>ï¼‰ï¼Œé˜²æ­¢å­¤å„¿èŠ‚ç‚¹ã€‚</li>
</ul>
<blockquote>
<p>â— æ³¨æ„ï¼šé€’å½’åˆ é™¤å¯èƒ½å¼•å‘æ€§èƒ½é—®é¢˜ã€‚è‹¥è¯„è®ºå±‚çº§å¾ˆæ·±æˆ–æ•°é‡å·¨å¤§ï¼Œåº”ç»“åˆè½¯åˆ é™¤æˆ–å¼‚æ­¥ä»»åŠ¡å¤„ç†ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">4. æ–‡ä»¶å­˜å‚¨çš„è®¾è®¡ï¼ˆFile è¡¨ï¼‰</h3>
<p>æ–‡ä»¶è¡¨ä¸ä»…è®°å½•è·¯å¾„ï¼Œè¿˜åŒ…æ‹¬å…ƒä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-prisma" lang="prisma">model File {
  originalname String
  mimetype     String
  filename     String
  size         Int
  width        Int @db.SmallInt
  height       Int @db.SmallInt
  metadata     Json?
  postId       Int?
  userId       Int
}
</code></pre>
<p>å‡ ç‚¹è®¾è®¡è€ƒé‡ï¼š</p>
<ul>
<li><code>width</code> / <code>height</code> ä½¿ç”¨ <code>@db.SmallInt</code> æ˜¾å¼æ˜ å°„ PostgreSQL çš„ smallint ç±»å‹ï¼ŒèŠ‚çœç©ºé—´ï¼›</li>
<li><code>metadata</code> ä½¿ç”¨ <code>Json?</code> ç±»å‹ï¼Œå¯ç”¨äºä¿å­˜ç¼©ç•¥å›¾åœ°å€ã€OCR ç»“æœç­‰éç»“æ„åŒ–æ•°æ®ï¼›</li>
<li><code>postId</code> å¯ä¸ºç©ºï¼Œæ„å‘³ç€æ–‡ä»¶æ—¢å¯ä»¥å±äºæ–‡ç« ï¼Œä¹Ÿå¯ä»¥å±äºç”¨æˆ·ä¸ªäººä¸Šä¼ ï¼ˆå¦‚å¤´åƒï¼‰ï¼›</li>
<li>å…³è”ç”¨æˆ·æ—¶ä½¿ç”¨ <code>Cascade</code>ï¼Œç¡®ä¿ç”¨æˆ·æ³¨é”€åä¸ä¼šç•™ä¸‹åƒåœ¾æ–‡ä»¶ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€è¿ç§»ï¼ˆMigrateï¼‰ï¼šè®©æ•°æ®åº“å˜æ›´å¯è¿½è¸ªã€å¯å›æ»š</h2>
<p>å¾ˆå¤šäººä¸€å¼€å§‹è·³è¿‡ <code>prisma migrate</code>ï¼Œç›´æ¥ç”¨ <code>db push</code> å¿«é€ŸåŒæ­¥ schema åˆ°æ•°æ®åº“ã€‚ä½†è¿™åªé€‚åˆæœ¬åœ°å¼€å‘ã€‚</p>
<p>çœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒï¼Œå¿…é¡»ä½¿ç”¨ <strong>è¿ç§»è„šæœ¬ï¼ˆmigration scriptï¼‰</strong>ã€‚</p>
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx prisma migrate dev --name init_user
</code></pre>
<p>Prisma ä¼šåšä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>å¯¹æ¯”å½“å‰ <code>schema.prisma</code> å’Œæ•°æ®åº“çŠ¶æ€ï¼›</li>
<li>ç”Ÿæˆ SQL è¿ç§»æ–‡ä»¶ï¼ˆæ”¾åœ¨ <code>prisma/migrations/</code> ç›®å½•ä¸‹ï¼‰ï¼›</li>
<li>æ‰§è¡Œ SQL å¹¶æ›´æ–°æ•°æ®åº“ã€‚</li>
</ol>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆéœ€è¦è¿ç§»ï¼Ÿ</h3>
<p>ä¸¾ä¸ªä¾‹å­ï¼šä½ åœ¨æœ¬åœ°åŠ äº†ä¸ªå­—æ®µ <code>email</code>ï¼ŒåŒäº‹ A ä¹ŸåŠ äº† <code>phone</code>ï¼Œä½ ä»¬éƒ½æ²¡æ²Ÿé€šã€‚å¦‚æœç›´æ¥ <code>db push</code>ï¼Œå¾ˆå¯èƒ½è¦†ç›–å¯¹æ–¹æ”¹åŠ¨ã€‚</p>
<p>ä½†å¦‚æœæœ‰è¿ç§»è„šæœ¬ï¼š</p>
<ul>
<li>ä½ çš„æäº¤åŒ…å« <code>add_email_field.sql</code></li>
<li>ä»–çš„æäº¤åŒ…å« <code>add_phone_field.sql</code></li>
<li>CI æµæ°´çº¿ä¼šæŒ‰é¡ºåºæ‰§è¡Œè¿™ä¸¤ä¸ªè„šæœ¬ï¼Œæœ€ç»ˆä¸¤è€…éƒ½å­˜åœ¨</li>
</ul>
<p>è¿™å°±å®ç°äº† <strong>æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶</strong>ï¼Œå°±åƒ Git ç®¡ç†ä»£ç ä¸€æ ·ã€‚</p>
<blockquote>
<p>ğŸ”” æç¤ºï¼šå›¢é˜Ÿåä½œä¸­ï¼Œæ¯æ¬¡ä¿®æ”¹ schema éƒ½åº”æäº¤å¯¹åº”çš„ migration æ–‡ä»¶ï¼Œä¸è¦åªæäº¤ <code>.prisma</code> æ–‡ä»¶ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">å››ã€Prisma Studioï¼šå¯è§†åŒ–è°ƒè¯•åˆ©å™¨</h2>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx prisma studio
</code></pre>
<p>æ‰“å¼€æµè§ˆå™¨å°±èƒ½çœ‹åˆ°å›¾å½¢åŒ–ç•Œé¢ï¼Œæ”¯æŒå¢åˆ æ”¹æŸ¥ï¼Œç‰¹åˆ«é€‚åˆï¼š</p>
<ul>
<li>æŸ¥çœ‹ç§å­æ•°æ®æ˜¯å¦æ­£ç¡®ï¼›</li>
<li>è°ƒè¯•å¤æ‚å…³ç³»çš„æ•°æ®å±•ç¤ºï¼›</li>
<li>ç»™äº§å“ç»ç†æ¼”ç¤ºåå°æ•°æ®ç»“æ„ã€‚</li>
</ul>
<p>è™½ç„¶æ˜¯ä¸ªå°å·¥å…·ï¼Œä½†åœ¨å¿«é€ŸéªŒè¯é˜¶æ®µæä¸ºå®ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-11">äº”ã€å®æˆ˜å»ºè®®ä¸é¿å‘æŒ‡å—</h2>
<h3 data-id="heading-12">âœ… æœ€ä½³å®è·µ</h3>

























<table><thead><tr><th>å®è·µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä½¿ç”¨ <code>migrate dev</code> è€Œé <code>db push</code></td><td>ä¿è¯è¿ç§»å†å²å®Œæ•´</td></tr><tr><td>æ¯æ¬¡ schema ä¿®æ”¹éƒ½ç”Ÿæˆæ–° migration</td><td>é¿å…çº¿ä¸Šå†²çª</td></tr><tr><td>å¤šå¯¹å¤šå…³ç³»æ˜¾å¼å»ºä¸­é—´è¡¨</td><td>æ›´çµæ´»ã€å¯æ‰©å±•</td></tr><tr><td>æ—¶é—´å­—æ®µç»Ÿä¸€ç”¨ <code>DateTime @default(now())</code></td><td>é¿å…æ—¶åŒºæ··ä¹±</td></tr></tbody></table>
<h3 data-id="heading-13">âŒ å¸¸è§è¯¯åŒº</h3>
<ol>
<li>
<p><strong>æ»¥ç”¨ <code>any</code> ç±»å‹ç»•è¿‡ Prisma ç±»å‹æ£€æŸ¥</strong></p>
<blockquote>
<p>ä¸è¦ç”¨ <code>as any</code> å¼ºè½¬ç»“æœï¼Œå¤±å»ç±»å‹å®‰å…¨çš„æ„ä¹‰ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>å¿½ç•¥ç´¢å¼•å¯¼è‡´æ…¢æŸ¥è¯¢</strong></p>
<blockquote>
<p>å¯¹ç»å¸¸ç”¨äºæŸ¥è¯¢çš„å¤–é”®å­—æ®µï¼ˆå¦‚ <code>userId</code>, <code>postId</code>ï¼‰åŠ¡å¿…åŠ  <code>@@index</code>ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ</strong></p>
<blockquote>
<p>Prisma æ”¯æŒäº‹åŠ¡ï¼Œä½†ä¸è¦åœ¨é‡Œé¢åš HTTP è¯·æ±‚æˆ–æ–‡ä»¶å¤„ç†ï¼Œå®¹æ˜“è¶…æ—¶ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>å¿˜è®°è®¾ç½®ç¯å¢ƒå˜é‡</strong></p>
<blockquote>
<p><code>DATABASE_URL</code> å¿…é¡»é…ç½®æ­£ç¡®ï¼Œå°¤å…¶æ˜¯ç”Ÿäº§ç¯å¢ƒæ³¨æ„åŠ å¯†ä¼ è¾“ã€‚</p>
</blockquote>
</li>
</ol>
<hr/>
<h2 data-id="heading-14">å…­ã€æ€»ç»“ï¼šPrisma æ˜¯ç°ä»£ Node.js å¼€å‘çš„åŸºç¡€è®¾æ–½</h2>
<p>ç»è¿‡è¿™æ¬¡å®æˆ˜ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š</p>
<blockquote>
<p><strong>Prisma ä¸åªæ˜¯ä¸€ä¸ªæ•°æ®åº“å®¢æˆ·ç«¯ï¼Œå®ƒæ˜¯è¿æ¥ä»£ç ä¸æ•°æ®åº“ä¹‹é—´çš„æ¡¥æ¢ï¼Œè®©åç«¯å¼€å‘å˜å¾—æ›´å¯é ã€æ›´é«˜æ•ˆã€æ›´å®¹æ˜“åä½œã€‚</strong></p>
</blockquote>
<p>å®ƒå¸¦æ¥çš„æ”¹å˜ä¸ä»…ä»…æ˜¯â€œå°‘å†™ SQLâ€ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š</p>
<ul>
<li>æ•°æ®ç»“æ„è®¾è®¡å‰ç½®åŒ–ï¼›</li>
<li>æ•°æ®å˜æ›´å¯è¿½æº¯ï¼›</li>
<li>æŸ¥è¯¢ç±»å‹å®‰å…¨ï¼›</li>
<li>å›¢é˜Ÿåä½œæ›´é¡ºç•…ã€‚</li>
</ul>
<p>å½“ä½ å¼€å§‹åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ Prisma å¹¶å»ºç«‹èµ·è§„èŒƒçš„ migration æµç¨‹åï¼Œä½ ä¼šå‘ç°ï¼š<strong>æ•°æ®åº“ä¸å†æ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œè€Œæ˜¯æ•´ä¸ªåº”ç”¨ä¸­æœ€æ¸…æ™°ã€æœ€å¯ç»´æŠ¤çš„ä¸€éƒ¨åˆ†ã€‚</strong></p>
<hr/>
<h2 data-id="heading-15">å»¶ä¼¸é˜…è¯»å»ºè®®</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.prisma.io%2Fdocs" target="_blank" title="https://www.prisma.io/docs" ref="nofollow noopener noreferrer">Prisma å®˜æ–¹æ–‡æ¡£</a></li>
<li>å¦‚ä½•åœ¨ NestJS ä¸­é›†æˆ Prismaï¼ˆæ¨èå°è£… Moduleï¼‰</li>
<li>ä½¿ç”¨ <code>prisma seed</code> åˆå§‹åŒ–æµ‹è¯•æ•°æ®</li>
<li>ç”Ÿäº§ç¯å¢ƒä¸­å¦‚ä½•å®‰å…¨æ‰§è¡Œ migrateï¼ˆé…åˆ CI/CDï¼‰</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨å¯åŠ¨ä¸€ä¸ªæ–°çš„ Node.js é¡¹ç›®ï¼Œä¸å¦¨è¯•è¯•ä» Prisma å¼€å§‹ã€‚ä¹Ÿè®¸ä½ ä¼šå‘ç°ï¼ŒåŸæ¥æ“ä½œæ•°æ®åº“ä¹Ÿå¯ä»¥å¦‚æ­¤ä¼˜é›…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLç´¢å¼•ç»“æ„çš„æ¼”è¿›ä¸è®¾è®¡é€»è¾‘]]></title>    <link>https://juejin.cn/post/7598737609494691859</link>    <guid>https://juejin.cn/post/7598737609494691859</guid>    <pubDate>2026-01-25T15:03:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598737609494691859" data-draft-id="7598767580306063414" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLç´¢å¼•ç»“æ„çš„æ¼”è¿›ä¸è®¾è®¡é€»è¾‘"/> <meta itemprop="keywords" content="MySQL,ç¨‹åºå‘˜,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-25T15:03:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Olaf_n"/> <meta itemprop="url" content="https://juejin.cn/user/1324234125087575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLç´¢å¼•ç»“æ„çš„æ¼”è¿›ä¸è®¾è®¡é€»è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1324234125087575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Olaf_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T15:03:56.000Z" title="Sun Jan 25 2026 15:03:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€</h2>
<p>ç´¢å¼•å¹¶éä¸ç”Ÿä¿±æ¥å°±æ˜¯B+æ ‘ç»“æ„ï¼Œä½†å¤§å¤šæ•°äººä¸MySQLæ‰“äº¤é“æ—¶ï¼Œéƒ½é»˜è®¤äº†ç´¢å¼•=B+æ ‘çš„è®¤çŸ¥ã€‚æˆ‘ä»¬å¾€å¾€è®°ä½äº†æœ€ç»ˆçš„ç»“è®ºï¼Œå´å¿½ç•¥äº†èƒŒåçš„è¿­ä»£å†ç¨‹â€”â€”å®ƒä¸ºä½•ä¼šä»æ—©æœŸçš„æŸ¥æ‰¾æ ‘ï¼Œä¸€æ­¥æ­¥æ¼”åŒ–æˆå¦‚ä»Šçš„B+æ ‘ï¼Ÿæ¯ä¸€æ¬¡è¿­ä»£éƒ½åœ¨è§£å†³ä»€ä¹ˆæ ¸å¿ƒç—›ç‚¹ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æ‹†è§£MySQLç´¢å¼•ç»“æ„çš„æ¼”å˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç´¢å¼•ç»“æ„çš„è®¾è®¡æ ¸å¿ƒè¯‰æ±‚</h2>
<p>åœ¨è¿½æº¯æ¼”è¿›å‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®ä¸€ä¸ªæ ¸å¿ƒå‰æï¼šæ‰€æœ‰ç´¢å¼•ç»“æ„çš„è®¾è®¡ï¼Œéƒ½å›´ç»•ä¸‰å¤§æ ¸å¿ƒè¯‰æ±‚å¹³è¡¡å±•å¼€ï¼Œè¿™ä¹Ÿæ˜¯åˆ¤æ–­ç»“æ„ä¼˜åŠ£çš„å…³é”®æ ‡å°ºã€‚</p>
<ol>
<li><strong>é«˜æ•ˆæŸ¥è¯¢</strong>ï¼šæ ¸å¿ƒæ˜¯å‡å°‘ç£ç›˜IOæ¬¡æ•°ï¼Œæ—¢è¦æ”¯æŒç­‰å€¼æŸ¥è¯¢ï¼Œä¹Ÿè¦é€‚é…èŒƒå›´æŸ¥è¯¢ã€æ’åºç­‰é«˜é¢‘ä¸šåŠ¡åœºæ™¯ï¼Œé¿å…æç«¯æ…¢æŸ¥è¯¢ã€‚</li>
<li><strong>ä½å­˜å‚¨æˆæœ¬</strong>ï¼šç´¢å¼•æœ¬èº«ä¸å­˜å‚¨ä¸šåŠ¡æ•°æ®ï¼Œä»…ä½œä¸ºå¯¼èˆªå·¥å…·ï¼Œéœ€æ§åˆ¶è‡ªèº«å­˜å‚¨ç©ºé—´ï¼Œé¿å…å ç”¨è¿‡å¤šç£ç›˜èµ„æºã€‚</li>
<li><strong>ç¨³å®šæ€§ä¸é€‚é…æ€§</strong>ï¼šé€‚é…ç£ç›˜å­˜å‚¨çš„é¢„è¯»ç‰¹æ€§ï¼Œèƒ½åº”å¯¹å¤§æ•°æ®é‡å¢é•¿ï¼Œç»´æŒç´¢å¼•ç»“æ„å¹³è¡¡ï¼Œç¡®ä¿æŸ¥è¯¢æ•ˆç‡ç¨³å®šã€‚</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€æ¼”è¿›è„‰ç»œ</h2>
<h3 data-id="heading-3">ç¬¬ä¸€ä»£ç»“æ„ï¼ˆäºŒå‰æŸ¥æ‰¾æ ‘ï¼‰</h3>
<p>äºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹å¦‚ä¸‹</p>
<ul>
<li>è‹¥å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºæ ¹èŠ‚ç‚¹çš„å€¼ï¼›</li>
<li>è‹¥å³å­—æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºè·ŸèŠ‚ç‚¹çš„å€¼ï¼›</li>
<li>å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æ’åºæ ‘</li>
</ul>
<p>å¦‚å›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad160094b7ea446896725c216db7cd3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT2xhZl9u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769958236&amp;x-signature=HrwvP0gmPr6cvSMOj3gcbREuuJA%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>
<p><strong>æ ¸å¿ƒç»“æ„</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåŒ…å«ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå·¦å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹å€¼å°äºçˆ¶èŠ‚ç‚¹ï¼Œå³å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹å€¼å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œé€šè¿‡è¿™ç§æœ‰åºæ€§å®ç°å¿«é€ŸæŸ¥æ‰¾ã€‚</p>
</li>
<li>
<p><strong>æŸ¥æ‰¾é€»è¾‘</strong>ï¼šä»¥æŸ¥è¯¢å€¼ä¸çˆ¶èŠ‚ç‚¹æ¯”è¾ƒï¼Œå°äºåˆ™è¿›å…¥å·¦å­æ ‘ï¼Œå¤§äºåˆ™è¿›å…¥å³å­æ ‘ï¼Œä¾æ¬¡é€’å½’ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹æˆ–éå†è‡³ç©ºèŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p><strong>è‡´å‘½å±€é™</strong>ï¼šå®Œå…¨æ— æ³•é€‚é…MySQLçš„å¤§æ•°æ®é‡ã€ç£ç›˜å­˜å‚¨åœºæ™¯</p>
</li>
</ol>
<p>è¿™ç§ç»“æ„æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·å°±æ˜¯ä¼šé€€åŒ–æˆå•é“¾è¡¨ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä»O(logn)éª¤å˜ä¸ºO(n)ï¼Œä¸å…¨è¡¨æ‰«ææ— å¼‚ï¼›æ¯”å¦‚è¿™ç§æ•°æ®æƒ…å†µã€50ï¼Œ40ï¼Œ30ï¼Œ20ï¼Œ10ï¼Œ5ã€‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f91af01dda84f7f8936ef3f8e5a60a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT2xhZl9u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769958236&amp;x-signature=G%2FPHyOpb6Uoj%2FxeA8xwPnw0LtMw%3D" alt="image.png" loading="lazy"/></p>
<p>æ ‘é«˜è¿‡é«˜ç™¾ä¸‡çº§æ•°æ®ä¸‹ï¼Œæ ‘é«˜å¯è¾¾æ•°åå±‚ç”šè‡³ä¸Šç™¾å±‚ï¼Œè€Œç£ç›˜IOæ˜¯æ¯«ç§’çº§æ“ä½œï¼Œè¿‡å¤šIOæ¬¡æ•°ä¼šå¯¼è‡´æŸ¥è¯¢ææ…¢ï¼›</p>
<p>ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢é«˜æ•ˆéå†ï¼šéœ€é¢å¤–æ’åºæˆ–å…¨é‡éå†ï¼Œæ— æ³•æ»¡è¶³MySQLé«˜é¢‘èŒƒå›´æŸ¥è¯¢éœ€æ±‚ã€‚</p>
<h3 data-id="heading-4">ä¼˜åŒ–æ”¹è¿›ï¼šå¹³è¡¡äºŒå‰æ ‘ï¼ˆçº¢é»‘æ ‘ä¹Ÿæ˜¯å±äºå¹³è¡¡æ ‘çš„ä¸€ç§ï¼‰</h3>
<p>å¹³è¡¡äºŒå‰æ ‘çš„ç‰¹ç‚¹ï¼šåœ¨æ»¡è¶³äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸Šï¼Œå·¦æ ‘å’Œå³æ ‘çš„é«˜åº¦å·®ç»å¯¹å€¼ä¸è¶…è¿‡1</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2628b83a7c542f8be9de8fe24b210cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT2xhZl9u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769958236&amp;x-signature=33GXwcgfsZRV1QndrA%2FFlnPAcAk%3D" alt="" loading="lazy"/></p>
<p>å¹³è¡¡äºŒå‰æ ‘å¯ä»¥é€šè¿‡å·¦æ—‹è½¬å’Œå³æ—‹è½¬è°ƒæ•´æ ‘çš„é«˜åº¦ï¼Œä½¿å…¶ç»´æŒåŸºæœ¬çš„å¹³è¡¡ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„é—®é¢˜è¿˜æ²¡æœ‰è§£å†³ã€‚æ ‘çš„é«˜åº¦é—®é¢˜ï¼Œå¦‚æœæ•°æ®é‡è¿‡å¤§ï¼Œè¿˜æ˜¯ä¼šå¯¼è‡´è¿™æ£µæ ‘çš„é«˜åº¦è¿‡é«˜ã€‚</p>
<h3 data-id="heading-5">ç»§ç»­ä¼˜åŒ–ï¼šB-treeï¼ˆBæ ‘ï¼‰</h3>
<p>Bæ ‘çš„æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å¤šè·¯æŸ¥æ‰¾æ ‘ç»“æ„ï¼ŒBæ ‘çš„ç‰¹å¾ç‚¹æ˜¯æ¯ä¸€å±‚èŠ‚ç‚¹å­˜çš„éƒ½æ˜¯çœŸå®æ•°æ®ã€‚Bæ ‘çš„ç»“æ„å¦‚ä¸‹
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3df6275a91dc4f13882ff2f050f63a5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT2xhZl9u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769958236&amp;x-signature=NJiZBW9mvwQ%2B9sdeVSROX06LnIY%3D" alt="" loading="lazy"/></p>
<p>Bæ ‘çš„æŸ¥æ‰¾æµç¨‹</p>
<h4 data-id="heading-6">å•æ¡æ•°æ®æŸ¥æ‰¾æµç¨‹ï¼ˆä»¥æŸ¥æ‰¾ key = 45 ä¸ºä¾‹ï¼‰</h4>
<ol>
<li>
<p><strong>ä»æ ¹èŠ‚ç‚¹å¼€å§‹æŸ¥æ‰¾</strong><br/>
æ ¹èŠ‚ç‚¹åŒ…å«å…³é”®å­— <code>[30, 60, 90]</code>ã€‚<br/>
æ ¹æ® B æ ‘çš„æŸ¥æ‰¾è§„åˆ™ï¼š</p>
<ul>
<li>45 &gt; 30 ä¸” 45 &lt; 60<br/>
å› æ­¤æ²¿ç€ <strong>30 ä¸ 60 ä¹‹é—´å¯¹åº”çš„å­æŒ‡é’ˆ</strong>ï¼Œè¿›å…¥ç¬¬äºŒä¸ªå­èŠ‚ç‚¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>åœ¨ç›®æ ‡å­èŠ‚ç‚¹ä¸­æŸ¥æ‰¾æ•°æ®</strong><br/>
è¿›å…¥å­èŠ‚ç‚¹ <code>[35, 45, 55]</code> åï¼Œåœ¨è¯¥èŠ‚ç‚¹å†…éƒ¨å¯¹å…³é”®å­—è¿›è¡ŒæŸ¥æ‰¾ï¼ˆé¡ºåºæŸ¥æ‰¾æˆ–äºŒåˆ†æŸ¥æ‰¾ï¼‰ã€‚<br/>
æ­¤æ—¶å¯ä»¥ç›´æ¥å®šä½åˆ° key = 45ï¼Œå¯¹åº”çš„æ•°æ®è®°å½•è¢«æˆåŠŸå‘½ä¸­ï¼ŒæŸ¥æ‰¾æµç¨‹ç»“æŸã€‚</p>
</li>
</ol>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒB æ ‘çš„å•æ¡æ•°æ®æŸ¥æ‰¾è¿‡ç¨‹æ˜¯ä¸€ä¸ª<strong>è‡ªé¡¶å‘ä¸‹çš„é€å±‚å®šä½è¿‡ç¨‹</strong>ï¼Œå½“ç›®æ ‡ key å‡ºç°åœ¨æŸä¸ªèŠ‚ç‚¹ä¸­æ—¶ï¼ŒæŸ¥æ‰¾å³å¯ç»“æŸã€‚</p>
</blockquote>
<h4 data-id="heading-7">èŒƒå›´æ•°æ®æŸ¥æ‰¾æµç¨‹ï¼ˆä»¥æŸ¥æ‰¾ 45 ~ 100 ä¸ºä¾‹ï¼‰</h4>
<p>èŒƒå›´æŸ¥è¯¢æ˜¯Bæ ‘ç›¸å¯¹å®¹æ˜“æš´éœ²æ€§èƒ½é—®é¢˜çš„åœºæ™¯ã€‚</p>
<ol>
<li>
<p><strong>é¦–å…ˆå®šä½èŒƒå›´èµ·ç‚¹</strong><br/>
ä¸å•æ¡æŸ¥è¯¢ç±»ä¼¼ï¼ŒæŒ‰ç…§ B æ ‘çš„æŸ¥æ‰¾è§„åˆ™ï¼Œä»æ ¹èŠ‚ç‚¹ <code>[30, 60, 90]</code> å‡ºå‘ï¼Œæœ€ç»ˆå®šä½åˆ°åŒ…å«èµ·å§‹ key = 45 çš„å­èŠ‚ç‚¹ <code>[35, 45, 55]</code>ã€‚</p>
</li>
<li>
<p><strong>åœ¨èµ·å§‹èŠ‚ç‚¹ä¸­è¿›è¡Œæ‰«æ</strong><br/>
åœ¨èŠ‚ç‚¹ <code>[35, 45, 55]</code> ä¸­ï¼Œä» key = 45 å¼€å§‹å‘å³æ‰«æï¼Œå‘½ä¸­ç¬¦åˆèŒƒå›´æ¡ä»¶çš„æ•°æ®ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">45, 55</span>]
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ—¶<strong>èŒƒå›´æŸ¥è¯¢ä¸ä¼šç»“æŸ</strong>ï¼Œå› ä¸ºåç»­èŠ‚ç‚¹ä¸­ä»ç„¶å¯èƒ½å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„ keyã€‚</p>
</li>
<li>
<p><strong>å›æº¯å¹¶åˆ‡æ¢åˆ°å…¶ä»–ç›¸å…³èŠ‚ç‚¹ç»§ç»­æŸ¥æ‰¾</strong><br/>
æ‰«æå®Œå½“å‰å­èŠ‚ç‚¹åï¼Œéœ€è¦å›æº¯åˆ°ä¸Šå±‚èŠ‚ç‚¹ <code>[30, 60, 90]</code>ï¼Œç»§ç»­åˆ¤æ–­ï¼š</p>
<ul>
<li>key = 60ã€90 å‡è½åœ¨æŸ¥è¯¢èŒƒå›´å†…ï¼Œå‘½ä¸­å¯¹åº”æ•°æ®<br/>
éšåæ²¿ç€æŒ‡é’ˆåˆ‡æ¢åˆ°å³ä¾§å­èŠ‚ç‚¹ <code>[95, 100, 110]</code>ï¼Œåœ¨è¯¥èŠ‚ç‚¹ä¸­ä»å·¦å‘å³æ‰«æï¼Œç»§ç»­å‘½ä¸­ï¼š</li>
</ul>

<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">95, 100</span>]
</code></pre>
</li>
<li>
<p><strong>éå†ç»“æŸï¼ŒèŒƒå›´æŸ¥è¯¢å®Œæˆ</strong><br/>
å½“æ‰€æœ‰å¯èƒ½åŒ…å«ç›®æ ‡èŒƒå›´çš„æ•°æ®èŠ‚ç‚¹éƒ½è¢«è®¿é—®åï¼ŒæŸ¥è¯¢ç»“æŸã€‚<br/>
æœ€ç»ˆå‘½ä¸­çš„æ•°æ®ä¸ºï¼š
[45, 55, 60, 90, 95, 100]</p>
</li>
</ol>
<h4 data-id="heading-8">B æ ‘åœ¨èŒƒå›´æŸ¥è¯¢ä¸­çš„æ€§èƒ½é—®é¢˜</h4>
<p>ä»ä¸Šè¿°æµç¨‹å¯ä»¥æ˜æ˜¾çœ‹å‡ºBæ ‘çš„èŒƒå›´æŸ¥è¯¢å¹¶éçº¿æ€§é¡ºåºæ‰«æï¼ŒæŸ¥è¯¢è¿‡ç¨‹ä¸­éœ€è¦åœ¨å­èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹  ä¹‹é—´é¢‘ç¹åˆ‡æ¢</p>
<p>åœ¨æ•°æ®åº“åœºæ™¯ä¸‹ï¼Œè¿™ç§<strong>èŠ‚ç‚¹åˆ‡æ¢å¾€å¾€æ„å‘³ç€é¢å¤–çš„ç£ç›˜ IO</strong></p>
<ul>
<li>æ¯ä¸€æ¬¡èŠ‚ç‚¹è·³è½¬ï¼Œéƒ½å¯èƒ½è§¦å‘ä¸€æ¬¡æ–°çš„ç£ç›˜é¡µè¯»å–</li>
<li>å½“æ•°æ®é‡è¾ƒå¤§ã€æ ‘å±‚çº§è¾ƒæ·±æ—¶ï¼ŒIO æˆæœ¬ä¼šè¢«ä¸æ–­æ”¾å¤§</li>
</ul>
<p>ğŸ‘‰ <strong>è¿™æ­£æ˜¯ B æ ‘åœ¨èŒƒå›´æŸ¥è¯¢åœºæ™¯ä¸‹çš„å…ˆå¤©åŠ£åŠ¿ï¼Œä¹Ÿæ˜¯ B+ æ ‘è®¾è®¡ä¸­é‡ç‚¹ä¼˜åŒ–çš„é—®é¢˜ä¹‹ä¸€ã€‚</strong></p>
<h3 data-id="heading-9">æœ€ç»ˆç‰ˆ B+Tree</h3>
<p>B+Tree æ˜¯é’ˆå¯¹ Bæ ‘çš„æ”¹è¿›ï¼Œå…ˆæ¥çœ‹çœ‹ä¸€çœ‹B+Treeé•¿ä»€ä¹ˆæ ·å­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ad28f5ba441444e95f7516c047a18ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT2xhZl9u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769958236&amp;x-signature=L1afVJ6ul9w9MJE8h0O6M7sM4gw%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°B+Treeå¯¹B-Treeåšäº†ä»¥ä¸‹æ”¹è¿›</p>
<ol>
<li>æ•°æ®ç´¢å¼•åˆ†ç¦»ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œéå¶å­èŠ‚ç‚¹ä¸Šåªæ˜¯å­˜å‚¨åœ°å€ä¿¡æ¯ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯æ‰€æœ‰çš„æŸ¥è¯¢éƒ½å¿…é¡»èµ°åˆ°å¶å­èŠ‚ç‚¹ï¼Œå› æ­¤æŸ¥è¯¢çš„è·¯å¾„é•¿åº¦å›ºå®šï¼Œæ—¶é—´å¤æ‚åº¦ç¨³å®šä¸ºO(logN)ï¼ŒBæ ‘çš„è¯ï¼Œå¶å­èŠ‚ç‚¹å’Œéå¶å­èŠ‚ç‚¹éƒ½ä¼šå­˜æ•°æ®ï¼Œæœ‰æ—¶å€™æŸ¥çš„å¿«æœ‰æ—¶å€™æŸ¥çš„æ…¢ï¼Œä¸ç¨³å®šã€‚</li>
<li>å¶å­èŠ‚ç‚¹ä½¿ç”¨é“¾è¡¨è¿æ¥ï¼Œæå¤§çš„æå‡äº†èŒƒå›´æŸ¥æ‰¾çš„æ•ˆç‡ã€‚</li>
</ol>
<p>B+Treeçš„æ•°æ®æŸ¥æ‰¾æµç¨‹</p>
<h4 data-id="heading-10">å•æ¡æ•°æ®æŸ¥æ‰¾æµç¨‹ï¼ˆä»¥æŸ¥æ‰¾ key = 45 ä¸ºä¾‹ï¼‰</h4>
<ol>
<li>
<p><strong>ä»æ ¹èŠ‚ç‚¹å¼€å§‹æŸ¥æ‰¾</strong><br/>
æ ¹èŠ‚ç‚¹ä¸­åŒ…å«ç´¢å¼•å…³é”®å­— <code>[30, 60, 90]</code>ã€‚<br/>
æ ¹æ® B+ æ ‘çš„æŸ¥æ‰¾è§„åˆ™ï¼š</p>
<ul>
<li>30 &lt; 45 &lt; 60<br/>
å› æ­¤æ²¿ç€å¯¹åº”çš„å­æŒ‡é’ˆï¼Œè¿›å…¥ç¬¬äºŒä¸ªå­èŠ‚ç‚¹ <code>[35, 45, 55]</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>åœ¨éå¶å­èŠ‚ç‚¹ä¸­ç»§ç»­å‘ä¸‹å®šä½</strong><br/>
è™½ç„¶åœ¨èŠ‚ç‚¹ <code>[35, 45, 55]</code> ä¸­å·²ç»å¯ä»¥çœ‹åˆ° key = 45ï¼Œ<br/>
ä½†æ­¤æ—¶<strong>æŸ¥æ‰¾ä¸èƒ½åœæ­¢</strong>ï¼Œå› ä¸ºè¯¥èŠ‚ç‚¹æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œåªä¿å­˜ç´¢å¼• key ä¸å­èŠ‚ç‚¹æŒ‡é’ˆï¼Œå¹¶ä¸å­˜å‚¨çœŸå®æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>ç»§ç»­å‘ä¸‹ï¼Œç›´åˆ°å¶å­èŠ‚ç‚¹</strong><br/>
æ²¿ç€æŒ‡é’ˆç»§ç»­å‘ä¸‹è®¿é—®å­èŠ‚ç‚¹ï¼Œæœ€ç»ˆåœ¨æŸä¸ªå¶å­èŠ‚ç‚¹ä¸­å®šä½åˆ° key = 45ï¼Œå¯¹åº”çš„æ•°æ®è®°å½•ã€‚<br/>
è‡³æ­¤ï¼Œå•æ¡æ•°æ®æŸ¥æ‰¾æµç¨‹ç»“æŸã€‚</p>
</li>
</ol>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒB+ æ ‘çš„å•æ¡æŸ¥è¯¢è·¯å¾„æ˜¯<strong>å›ºå®šçš„</strong>ï¼š<br/>
<strong>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé€å±‚å‘ä¸‹ï¼Œæœ€ç»ˆä¸€å®šåˆ°è¾¾å¶å­èŠ‚ç‚¹ã€‚</strong></p>
</blockquote>
<h4 data-id="heading-11">èŒƒå›´æ•°æ®æŸ¥æ‰¾æµç¨‹ï¼ˆä»¥æŸ¥æ‰¾ 45 ~ 100 ä¸ºä¾‹ï¼‰</h4>
<ol>
<li>
<p><strong>å…ˆå®šä½èŒƒå›´èµ·ç‚¹</strong><br/>
é¦–å…ˆæŸ¥æ‰¾ key = 45ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ä¸å•æ¡æŸ¥è¯¢å®Œå…¨ä¸€è‡´ï¼Œæœ€ç»ˆå®šä½åˆ°åŒ…å« 45 çš„å¶å­èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p><strong>ä»èµ·å§‹å¶å­èŠ‚ç‚¹å¼€å§‹é¡ºåºæ‰«æ</strong><br/>
åœ¨å¶å­èŠ‚ç‚¹ä¸­ï¼Œä» key = 45 å¼€å§‹å‘å³éå†ï¼Œä¾æ¬¡å‘½ä¸­æ»¡è¶³æ¡ä»¶çš„æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>æ²¿å¶å­èŠ‚ç‚¹é“¾è¡¨æŒç»­éå†</strong><br/>
B+ æ ‘ä¸­çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆå½¢æˆä¸€ä¸ªæœ‰åºé“¾è¡¨ã€‚<br/>
å› æ­¤ï¼Œå½“å½“å‰å¶å­èŠ‚ç‚¹æ‰«æå®Œæˆåï¼Œå¯ä»¥<strong>ç›´æ¥é€šè¿‡æŒ‡é’ˆè®¿é—®ä¸‹ä¸€ä¸ªå¶å­èŠ‚ç‚¹</strong>ï¼Œæ— éœ€å›åˆ°çˆ¶èŠ‚ç‚¹æˆ–é‡æ–°æŸ¥æ‰¾ã€‚</p>
</li>
<li>
<p><strong>ç›´åˆ°è¶…å‡ºèŒƒå›´ä¸ºæ­¢</strong><br/>
å½“æ‰«æåˆ° key &gt; 100 æ—¶ï¼ŒèŒƒå›´æŸ¥è¯¢ç»“æŸã€‚<br/>
æœ€ç»ˆå‘½ä¸­çš„æ•°æ®ä¸ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">45, 46, 50, 55, 58, 60, 92, 94, 100</span>]
</code></pre>
</li>
</ol>
<hr/>
<h4 data-id="heading-12">B+æ ‘èŒƒå›´æŸ¥è¯¢é«˜æ•ˆçš„æ ¹æœ¬åŸå› </h4>
<p>ä¸ B æ ‘ç›¸æ¯”ï¼ŒB+ æ ‘åœ¨èŒƒå›´æŸ¥è¯¢ä¸­çš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ï¼š</p>
<ul>
<li>æŸ¥è¯¢è·¯å¾„å›ºå®šï¼Œåªéœ€ä¸€æ¬¡è‡ªé¡¶å‘ä¸‹çš„å®šä½</li>
<li>èŒƒå›´æ‰«æå‘ç”Ÿåœ¨<strong>å¶å­èŠ‚ç‚¹å±‚</strong></li>
<li>å¶å­èŠ‚ç‚¹ä¹‹é—´é€šè¿‡é“¾è¡¨é¡ºåºè¿æ¥</li>
<li>é¿å…äº†é¢‘ç¹åœ¨çˆ¶å­èŠ‚ç‚¹ä¹‹é—´æ¥å›åˆ‡æ¢</li>
</ul>
<p>ğŸ‘‰ <strong>åœ¨æ•°æ®åº“åœºæ™¯ä¸‹ï¼Œè¿™ç§é¡ºåºæ‰«ææ–¹å¼å¯ä»¥æ˜¾è‘—å‡å°‘ç£ç›˜ IO æ¬¡æ•°ï¼Œè¿™ä¹Ÿæ˜¯ MySQL ç­‰å…³ç³»å‹æ•°æ®åº“é€‰æ‹© B+ æ ‘ä½œä¸ºç´¢å¼•ç»“æ„çš„æ ¸å¿ƒåŸå› ä¹‹ä¸€ã€‚</strong></p>
<h2 data-id="heading-13">å››ã€æ‰©å±•è¡¥å…… Hashç´¢å¼•</h2>
<p>æ˜¯ä¸€å¼ è¡¨ï¼Œé‡Œé¢æœ‰å¯¹åº”çš„keyå’Œvalue
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a48da3ed8fc4712b94b02c1f22601e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT2xhZl9u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769958236&amp;x-signature=HmuOXxGn45K3yZByrSiXtOKFFR0%3D" alt="" loading="lazy"/></p>
<p>æŸ¥è¯¢æ“ä½œç›´æ¥é€šè¿‡ get(key) è¿›è¡Œè·å–ï¼Œæ—¶é—´å¤æ‚åº¦O(1)ï¼Œå¥½å¤„æ˜¯æ£€ç´¢é€Ÿåº¦æå¿«ï¼Œç¼ºç‚¹å°±æ˜¯æ”¯æŒä¸äº†èŒƒå›´æŸ¥æ‰¾ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä½†æ˜¯Hashç»“æ„å¦‚æœäº§ç”ŸHashå†²çªï¼Œä¼šå¯¼è‡´æ•´ä¸ªæ•°æ®æ•£åˆ—çš„ä¸å‡åŒ€ï¼ŒæŸ¥æ‰¾å¯èƒ½ä¼šé€€åŒ–æˆO(n)</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ff2529b9f624b0f8158fb4fc33a0db3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT2xhZl9u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769958236&amp;x-signature=LbJ81QozSL1FkLlVe005dyayUgI%3D" alt="" loading="lazy"/></p>
<p>ç­‰å€¼æŸ¥æ‰¾å¯ä»¥ç›´æ¥get(key)ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦å®ŒæˆèŒƒå›´æŸ¥æ‰¾å°±åˆå¾—éå†æ•´ä¸ªhashè¡¨ï¼Œæ•ˆç‡å¾ˆæ…¢ï¼Œhashå°±ä¸åˆé€‚äº†ã€‚åœ¨MySQLè¿™ç±»éœ€è¦é«˜æ•ˆæ”¯æ’‘å¤§é‡èŒƒå›´æŸ¥è¯¢çš„åº”ç”¨åœºæ™¯ä¸­ï¼ŒHashç»“æ„å¹¶ä¸é€‚ç”¨ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒæœªèƒ½æˆä¸ºä¸»æµæ•°æ®åº“ç´¢å¼•ç»“æ„çš„é‡è¦åŸå› ã€‚</p>
<h2 data-id="heading-14">äº”ã€æ€»ç»“</h2>
<p>MySQLç´¢å¼•ç»“æ„çš„æ¼”è¿›ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€åœºå›´ç»•â€œé«˜æ•ˆæŸ¥è¯¢ã€ä½å­˜å‚¨æˆæœ¬ã€ç¨³å®šæ€§é€‚é…â€ä¸‰å¤§æ ¸å¿ƒè¯‰æ±‚çš„æŒç»­ä¼˜åŒ–ä¹‹æ—…ï¼Œæ¯ä¸€ä»£ç»“æ„çš„è¿­ä»£éƒ½ç²¾å‡†è§£å†³äº†å‰åºæ–¹æ¡ˆåœ¨æ•°æ®åº“å®é™…åœºæ™¯ä¸­çš„è‡´å‘½å±€é™ï¼Œæœ€ç»ˆæ²‰æ·€å‡ºé€‚é…ä¸»æµä¸šåŠ¡éœ€æ±‚çš„B+æ ‘ç»“æ„ã€‚</p>
<ul>
<li>
<p>æ—©æœŸçš„äºŒå‰æŸ¥æ‰¾æ ‘å‡­å€Ÿæœ‰åºæ€§å®ç°äº†åŸºç¡€å¿«é€ŸæŸ¥æ‰¾ï¼Œä½†ææ˜“å› æ•°æ®åˆ†å¸ƒå¤±è¡¡é€€åŒ–ä¸ºå•é“¾è¡¨ï¼Œä¸”æ ‘é«˜è¿‡é«˜å¯¼è‡´ç£ç›˜IOæ¬¡æ•°æ¿€å¢ï¼Œå®Œå…¨æ— æ³•é€‚é…å¤§æ•°æ®é‡ã€ç£ç›˜å­˜å‚¨çš„æ•°æ®åº“åœºæ™¯ã€‚å¹³è¡¡äºŒå‰æ ‘é€šè¿‡æ—‹è½¬è°ƒæ•´æœºåˆ¶è§£å†³äº†ç»“æ„å¤±è¡¡é—®é¢˜ï¼Œç»´æŒäº†æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦çš„ç¨³å®šæ€§ï¼Œä½†æœªèƒ½çªç ´æ ‘é«˜é™åˆ¶ï¼Œé¢å¯¹æµ·é‡æ•°æ®æ—¶ä»å­˜åœ¨IOæ•ˆç‡ç“¶é¢ˆã€‚</p>
</li>
<li>
<p>Bæ ‘ä½œä¸ºå¤šè·¯æŸ¥æ‰¾æ ‘ï¼Œé€šè¿‡å¤šèŠ‚ç‚¹å­˜å‚¨ç‰¹æ€§å¤§å¹…é™ä½äº†æ ‘é«˜ï¼Œå‡å°‘äº†ç£ç›˜IOå±‚çº§ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¼˜åŒ–äº†æŸ¥è¯¢æ•ˆç‡ã€‚ä½†Bæ ‘çš„æ ¸å¿ƒç¼ºé™·çš„åœ¨äºèŒƒå›´æŸ¥è¯¢æ—¶éœ€åœ¨çˆ¶å­èŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹é—´é¢‘ç¹åˆ‡æ¢ï¼Œå¼•å‘é¢å¤–ç£ç›˜IOï¼Œåœ¨é«˜é¢‘èŒƒå›´æŸ¥è¯¢åœºæ™¯ä¸­æ€§èƒ½å—é™ï¼Œè¿™ä¹Ÿä¸ºB+æ ‘çš„å‡ºç°åŸ‹ä¸‹äº†ä¼ç¬”ã€‚</p>
</li>
<li>
<p>B+æ ‘åœ¨Bæ ‘åŸºç¡€ä¸Šå®Œæˆäº†å…³é”®æ€§æ”¹è¿›ï¼Œæˆä¸ºMySQLç´¢å¼•çš„æœ€ä¼˜è§£ã€‚å…¶ä¸€ï¼Œå®ç°æ•°æ®ä¸ç´¢å¼•åˆ†ç¦»ï¼Œéå¶å­èŠ‚ç‚¹ä»…å­˜å‚¨ç´¢å¼•æŒ‡é’ˆï¼Œå¶å­èŠ‚ç‚¹é›†ä¸­å­˜å‚¨æ‰€æœ‰çœŸå®æ•°æ®ï¼Œä½¿æŸ¥è¯¢è·¯å¾„å›ºå®šç»Ÿä¸€ï¼Œæ—¶é—´å¤æ‚åº¦ç¨³å®šåœ¨O(logN)ï¼›å…¶äºŒï¼Œå¶å­èŠ‚ç‚¹é€šè¿‡é“¾è¡¨æœ‰åºè¿æ¥ï¼ŒèŒƒå›´æŸ¥è¯¢åªéœ€ä¸€æ¬¡è‡ªé¡¶å‘ä¸‹å®šä½èµ·ç‚¹ï¼Œéšåæ²¿é“¾è¡¨é¡ºåºæ‰«æå³å¯ï¼Œå½»åº•è§„é¿äº†èŠ‚ç‚¹é—´çš„é¢‘ç¹åˆ‡æ¢ï¼Œå¤§å¹…é™ä½ç£ç›˜IOæˆæœ¬ï¼Œå®Œç¾é€‚é…æ•°æ®åº“ç­‰å€¼æŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢ã€æ’åºç­‰æ ¸å¿ƒä¸šåŠ¡åœºæ™¯ã€‚</p>
</li>
<li>
<p>è€ŒHashç´¢å¼•è™½èƒ½ä»¥O(1)æ—¶é—´å¤æ‚åº¦å®ç°ç­‰å€¼æŸ¥è¯¢ï¼Œæ£€ç´¢é€Ÿåº¦æå¿«ï¼Œä½†å­˜åœ¨å¤©ç„¶çŸ­æ¿ï¼šæ— æ³•æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼Œä¸”Hashå†²çªå¯èƒ½å¯¼è‡´æ€§èƒ½é€€åŒ–ä¸ºO(n)ï¼Œéš¾ä»¥é€‚é…MySQLå¤šæ ·åŒ–çš„æŸ¥è¯¢éœ€æ±‚ï¼Œå› æ­¤ä»…é€‚ç”¨äºç‰¹å®šç­‰å€¼æŸ¥è¯¢åœºæ™¯ï¼Œæ— æ³•æˆä¸ºä¸»æµç´¢å¼•ç»“æ„ã€‚</p>
</li>
</ul>
<p>æ€»è€Œè¨€ä¹‹MySQLç´¢å¼•ç»“æ„çš„æ¼”è¿›å¹¶éå¶ç„¶ï¼Œè€Œæ˜¯ä»åœºæ™¯éœ€æ±‚å‡ºå‘ï¼Œä¸æ–­å¼¥è¡¥å‰åºç»“æ„ç¼ºé™·ã€å¹³è¡¡å„é¡¹æ€§èƒ½æŒ‡æ ‡çš„è¿‡ç¨‹ã€‚B+æ ‘ä¹‹æ‰€ä»¥æˆä¸ºä¸»æµï¼Œæ ¸å¿ƒåœ¨äºå…¶ç²¾å‡†å¥‘åˆäº†ç£ç›˜å­˜å‚¨ç‰¹æ€§ä¸æ•°æ®åº“é«˜é¢‘æŸ¥è¯¢åœºæ™¯ï¼Œåœ¨æŸ¥è¯¢æ•ˆç‡ã€ç¨³å®šæ€§ä¸é€‚é…æ€§ä¸Šè¾¾åˆ°äº†æœ€ä¼˜å¹³è¡¡ï¼Œè€Œå…¶ä»–ç»“æ„æˆ–å› åœºæ™¯å±€é™ã€æˆ–å› æ€§èƒ½çŸ­æ¿ï¼Œæœ€ç»ˆæ²¦ä¸ºç‰¹å®šåœºæ™¯çš„è¡¥å……æ–¹æ¡ˆã€‚è¿™ä¸€æ¼”è¿›é€»è¾‘ä¹Ÿå¯ç¤ºæˆ‘ä»¬ï¼Œç´¢å¼•ç»“æ„çš„é€‰æ‹©æœ¬è´¨æ˜¯å¯¹ä¸šåŠ¡åœºæ™¯ä¸æ€§èƒ½éœ€æ±‚çš„ç²¾å‡†åŒ¹é…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# JavaScript å‡½æ•°æ ¸å¿ƒçŸ¥è¯†ä½“ç³»ï¼šä»åŸºç¡€åˆ°ç²¾]]></title>    <link>https://juejin.cn/post/7598563188112343092</link>    <guid>https://juejin.cn/post/7598563188112343092</guid>    <pubDate>2026-01-25T11:10:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598563188112343092" data-draft-id="7598710324167294991" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# JavaScript å‡½æ•°æ ¸å¿ƒçŸ¥è¯†ä½“ç³»ï¼šä»åŸºç¡€åˆ°ç²¾"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-01-25T11:10:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¼šæ•²ä»£ç 1"/> <meta itemprop="url" content="https://juejin.cn/user/1927884034804425"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # JavaScript å‡½æ•°æ ¸å¿ƒçŸ¥è¯†ä½“ç³»ï¼šä»åŸºç¡€åˆ°ç²¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927884034804425/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¼šæ•²ä»£ç 1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T11:10:38.000Z" title="Sun Jan 25 2026 11:10:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript å‡½æ•°æ ¸å¿ƒçŸ¥è¯†ä½“ç³»ï¼šä»åŸºç¡€åˆ°ç²¾é€š</h2>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol>
<li>[å‡½æ•°çš„æœ¬è´¨ä¸å¯¹è±¡ç‰¹æ€§]</li>
<li>[thisç»‘å®šçš„å››ç§æ¨¡å¼]</li>
<li>[argumentså¯¹è±¡ä¸å‚æ•°å¤„ç†]</li>
<li>[é—­åŒ…æœºåˆ¶æ·±åº¦è§£æ]</li>
<li>[é€’å½’ç®—æ³•è¯¦è§£]</li>
<li>[å›è°ƒå‡½æ•°ä¸å¼‚æ­¥ç¼–ç¨‹]</li>
</ol>
<hr/>
<h3 data-id="heading-2">1. å‡½æ•°çš„æœ¬è´¨ä¸å¯¹è±¡ç‰¹æ€§</h3>
<h4 data-id="heading-3">1.1 å‡½æ•°å°±æ˜¯å¯¹è±¡</h4>
<p>åœ¨JavaScriptä¸­ï¼Œ<strong>å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡</strong>ã€‚å®ƒä¸ä»…åŒ…å«å¯æ‰§è¡Œçš„ä»£ç ï¼Œè¿˜å¯ä»¥æ‹¥æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡½æ•°ä½œä¸ºå¯¹è±¡çš„è¯æ®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello!"</span>);
}

<span class="hljs-comment">// å¯ä»¥åƒæ™®é€šå¯¹è±¡ä¸€æ ·æ·»åŠ å±æ€§</span>
sayHi.<span class="hljs-property">name</span> = <span class="hljs-string">"greeting"</span>;
sayHi.<span class="hljs-property">version</span> = <span class="hljs-string">"1.0"</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sayHi.<span class="hljs-property">name</span>); <span class="hljs-comment">// "greeting"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sayHi.<span class="hljs-property">version</span>); <span class="hljs-comment">// "1.0"</span>
</code></pre>
<h4 data-id="heading-4">1.2 å‡½æ•°çš„åŸå‹é“¾ç»“æ„</h4>
<p>æ‰€æœ‰å‡½æ•°éƒ½è¿æ¥åˆ° <code>Function.prototype</code>ï¼Œè€Œ <code>Function.prototype</code> åˆè¿æ¥åˆ° <code>Object.prototype</code>ã€‚</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span><span class="hljs-params">()</span></span> {}
â””â”€â”€ <span class="hljs-string">[[Prototype]]</span> â†’ Function.prototype
    â””â”€â”€ <span class="hljs-string">[[Prototype]]</span> â†’ Object.prototype
        â””â”€â”€ <span class="hljs-string">[[Prototype]]</span> â†’ null
</code></pre>
<p>è¿™æ„å‘³ç€å‡½æ•°ä¸ä»…èƒ½è°ƒç”¨ <code>call()</code>ã€<code>apply()</code> ç­‰æ–¹æ³•ï¼ˆæ¥è‡ª <code>Function.prototype</code>ï¼‰ï¼Œè¿˜èƒ½è°ƒç”¨ <code>toString()</code> ç­‰æ–¹æ³•ï¼ˆæ¥è‡ª <code>Object.prototype</code>ï¼‰ã€‚</p>
<h4 data-id="heading-5">1.3 å‡½æ•°çš„ä¸¤ä¸ªéšè—å±æ€§</h4>
<p>æ¯ä¸ªå‡½æ•°åœ¨åˆ›å»ºæ—¶éƒ½ä¼šé™„å¸¦ä¸¤ä¸ªéšè—å±æ€§ï¼š</p>
<ul>
<li><strong>å‡½æ•°çš„ä¸Šä¸‹æ–‡</strong>ï¼šå†³å®š <code>this</code> çš„ç»‘å®šè§„åˆ™</li>
<li><strong>å®ç°å‡½æ•°è¡Œä¸ºçš„ä»£ç </strong>ï¼šå‡½æ•°ä½“ä¸­çš„é€»è¾‘</li>
</ul>
<h4 data-id="heading-6">1.4 prototypeå±æ€§è¯¦è§£</h4>
<p>æ¯ä¸ªå‡½æ•°å¯¹è±¡åœ¨åˆ›å»ºæ—¶éƒ½ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ª <code>prototype</code> å±æ€§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); 
<span class="hljs-comment">// è¾“å‡º: { constructor: Person }</span>

<span class="hljs-comment">// é»˜è®¤constructoræŒ‡å‘å‡½æ•°æœ¬èº«</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Person</span>); <span class="hljs-comment">// true</span>
</code></pre>
<h5 data-id="heading-7">å…³é”®åŒºåˆ†ï¼š</h5>




















<table><thead><tr><th>åç§°</th><th>æ˜¯ä»€ä¹ˆï¼Ÿ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>fn.__proto__</code></td><td>å‡½æ•°å¯¹è±¡çš„ <code>[[Prototype]]</code></td><td>æŒ‡å‘ <code>Function.prototype</code>ï¼Œç”¨äºç»§æ‰¿å‡½æ•°æ–¹æ³•ï¼ˆå¦‚ <code>.call()</code>ï¼‰</td></tr><tr><td><code>fn.prototype</code></td><td>å‡½æ•°çš„ <code>prototype</code> å±æ€§</td><td>æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œç”¨äºä½œä¸º <code>new fn()</code> å®ä¾‹çš„åŸå‹</td></tr></tbody></table>
<blockquote>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼š<br/>
<code>__proto__</code> æ˜¯"æˆ‘çˆ¸çˆ¸æ˜¯è°"ï¼ˆåŠŸèƒ½æ¥æºï¼‰ï¼›<br/>
<code>prototype</code> æ˜¯"æˆ‘çš„å­©å­å°†æ¥é•¿ä»€ä¹ˆæ ·"ï¼ˆæ¨¡æ¿ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">2. thisç»‘å®šçš„å››ç§æ¨¡å¼</h3>
<h4 data-id="heading-9">2.1 æ–¹æ³•è°ƒç”¨æ¨¡å¼</h4>
<p>å½“ä¸€ä¸ªå‡½æ•°è¢«ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ<code>this</code> æŒ‡å‘è¯¥å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> p = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>,
    <span class="hljs-attr">sayName</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    }
};

p.<span class="hljs-title function_">sayName</span>(); <span class="hljs-comment">// è¾“å‡º: Alice â†’ this === p</span>
</code></pre>
<h4 data-id="heading-10">2.2 å‡½æ•°è°ƒç”¨æ¨¡å¼</h4>
<p>ç‹¬ç«‹è°ƒç”¨å‡½æ•°æ—¶ï¼Œ<code>this</code> çš„æŒ‡å‘å–å†³äºæ˜¯å¦åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> fn = p.<span class="hljs-property">sayName</span>;
<span class="hljs-title function_">fn</span>(); <span class="hljs-comment">// TypeError: Cannot read property 'name' of undefined</span>
      <span class="hljs-comment">// å› ä¸º this æ˜¯ undefined</span>

<span class="hljs-comment">// éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆwindowï¼‰</span>
</code></pre>
<h4 data-id="heading-11">2.3 æ„é€ å™¨è°ƒç”¨æ¨¡å¼</h4>
<p>ä½¿ç”¨ <code>new</code> å…³é”®å­—è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œ<code>this</code> æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; <span class="hljs-comment">// this æŒ‡å‘ new åˆ›å»ºçš„æ–°å¯¹è±¡</span>
}

<span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"Bob"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">name</span>); <span class="hljs-comment">// Bob</span>
</code></pre>
<h4 data-id="heading-12">2.4 apply/callè°ƒç”¨æ¨¡å¼</h4>
<p>å¯ä»¥æ˜¾å¼åœ°æŒ‡å®š <code>this</code> çš„å€¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello, I'm "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
}

<span class="hljs-keyword">var</span> obj = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Charlie"</span> };
greet.<span class="hljs-title function_">apply</span>(obj); <span class="hljs-comment">// è¾“å‡º: Hello, I'm Charlie â†’ this === obj</span>
</code></pre>
<h4 data-id="heading-13">2.5 thisç»‘å®šå£è¯€</h4>
<blockquote>
<p><strong>"this ä¸æ˜¯â€˜æˆ‘â€™ï¼Œè€Œæ˜¯â€˜è°è°ƒç”¨æˆ‘â€™ã€‚"</strong></p>
<ul>
<li>æ–¹æ³•è°ƒç”¨ â†’ this æ˜¯è°ƒç”¨è€…</li>
<li>ç‹¬ç«‹è°ƒç”¨ â†’ this æ˜¯å…¨å±€/undefined</li>
<li>new è°ƒç”¨ â†’ this æ˜¯æ–°å¯¹è±¡</li>
<li>apply è°ƒç”¨ â†’ this æ˜¯ä½ æŒ‡å®šçš„</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-14">3. argumentså¯¹è±¡ä¸å‚æ•°å¤„ç†</h3>
<h4 data-id="heading-15">3.1 argumentsçš„æœ¬è´¨</h4>
<p>æ¯å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ªåä¸º <code>arguments</code> çš„"å…è´¹"å‚æ•°ï¼Œå®ƒåŒ…å«äº†æ‰€æœ‰ä¼ å…¥çš„å®é™…å‚æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Name:"</span>, name);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Age:"</span>, age);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Other args:"</span>, <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>], <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>]);
}

<span class="hljs-title function_">greet</span>(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">25</span>, <span class="hljs-string">"student"</span>, <span class="hljs-string">"developer"</span>);
<span class="hljs-comment">// Other args: student developer</span>
</code></pre>
<h4 data-id="heading-16">3.2 argumentsçš„è®¾è®¡ç¼ºé™·</h4>
<p>å°½ç®¡è¢«ç§°ä¸º"æ•°ç»„"ï¼Œä½† <code>arguments</code> å¹¶ä¸æ˜¯çœŸæ­£çš„æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ª"ç±»æ•°ç»„å¯¹è±¡"ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>); <span class="hljs-comment">// 3</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>]);     <span class="hljs-comment">// 'a'</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>.<span class="hljs-title function_">slice</span>()); <span class="hljs-comment">// âŒ TypeError!</span>
}
<span class="hljs-title function_">test</span>(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>);
</code></pre>
<h4 data-id="heading-17">3.3 argumentsè½¬æ¢ä¸ºçœŸæ•°ç»„</h4>
<p>æœ‰ä¸‰ç§å¸¸ç”¨æ–¹æ³•å°† <code>arguments</code> è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">convertArgs</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ–¹æ³•1ï¼šArray.from()</span>
    <span class="hljs-keyword">var</span> args1 = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>);
    
    <span class="hljs-comment">// æ–¹æ³•2ï¼šæ‰©å±•è¿ç®—ç¬¦ï¼ˆES6ï¼‰</span>
    <span class="hljs-keyword">var</span> args2 = [...<span class="hljs-variable language_">arguments</span>];
    
    <span class="hljs-comment">// æ–¹æ³•3ï¼šcall + slice</span>
    <span class="hljs-keyword">var</span> args3 = [].<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>);
    
    <span class="hljs-keyword">return</span> args1;
}
</code></pre>
<h4 data-id="heading-18">3.4 ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</h4>
<p>æ¨èä½¿ç”¨ ES6 çš„ rest å‚æ•°æ¥æ›¿ä»£ <code>arguments</code>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const sum = (...nums) =&gt; {
    return nums<span class="hljs-selector-class">.reduce</span>((total, num) =&gt; total + num, <span class="hljs-number">0</span>);
};

<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// 6</span>
<span class="hljs-built_in">sum</span>(<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">15</span>, <span class="hljs-number">16</span>, <span class="hljs-number">23</span>, <span class="hljs-number">42</span>); <span class="hljs-comment">// 108</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>é‡‘å¥</strong>ï¼š"arguments æ˜¯ JS çš„å†å²é—äº§ï¼Œå®ƒè®©å‡½æ•°å˜å¾—çµæ´»ï¼Œä½†ä¹Ÿç•™ä¸‹äº†â€˜éæ•°ç»„â€™çš„é—æ†¾ã€‚"</p>
</blockquote>
<hr/>
<h3 data-id="heading-19">4. é—­åŒ…æœºåˆ¶æ·±åº¦è§£æ</h3>
<h4 data-id="heading-20">4.1 ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</h4>
<blockquote>
<p><strong>é—­åŒ… = ä¸€ä¸ªå‡½æ•° + å®ƒè¢«åˆ›å»ºæ—¶æ‰€å¤„çš„è¯æ³•ç¯å¢ƒçš„å¼•ç”¨</strong></p>
</blockquote>
<p>å½“ä¸€ä¸ªå†…éƒ¨å‡½æ•°å³ä½¿åœ¨å…¶å¤–éƒ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åä»èƒ½è®¿é—®å…¶å˜é‡æ—¶ï¼Œå°±å½¢æˆäº†é—­åŒ…ã€‚</p>
<h4 data-id="heading-21">4.2 å½¢æˆé—­åŒ…çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶</h4>

























<table><thead><tr><th>æ¡ä»¶</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>â‘  å†…éƒ¨å‡½æ•°</td><td>å¿…é¡»æœ‰ä¸€ä¸ªå‡½æ•°å®šä¹‰åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨</td><td><code>function outer() { function inner() {} }</code></td></tr><tr><td>â‘¡ è®¿é—®å¤–éƒ¨å˜é‡</td><td>å†…éƒ¨å‡½æ•°å¿…é¡»å¼•ç”¨å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡</td><td><code>inner() { console.log(x); }</code></td></tr><tr><td>â‘¢ å¤–éƒ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå†…éƒ¨å‡½æ•°ä»å¯è¢«è°ƒç”¨</td><td>å†…éƒ¨å‡½æ•°è¢«è¿”å›æˆ–èµ‹å€¼ç»™å…¨å±€å˜é‡</td><td><code>return inner;</code> æˆ– <code>window.fn = inner;</code></td></tr></tbody></table>
<h4 data-id="heading-22">4.3 ç»å…¸ç¤ºä¾‹</h4>
<h5 data-id="heading-23">ç¤ºä¾‹1ï¼šæœ€ç®€é—­åŒ…</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">makeAdder</span>(<span class="hljs-params">x</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">y</span>) {
        <span class="hljs-keyword">return</span> x + y; <span class="hljs-comment">// è®¿é—®å¤–éƒ¨å˜é‡ x</span>
    };
}

<span class="hljs-keyword">const</span> add5 = <span class="hljs-title function_">makeAdder</span>(<span class="hljs-number">5</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add5</span>(<span class="hljs-number">3</span>)); <span class="hljs-comment">// 8</span>
</code></pre>
<h5 data-id="heading-24">ç¤ºä¾‹2ï¼šç§æœ‰å˜é‡å°è£…</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> ++count,
        <span class="hljs-attr">decrement</span>: <span class="hljs-function">() =&gt;</span> --count,
        <span class="hljs-attr">value</span>: <span class="hljs-function">() =&gt;</span> count
    };
}

<span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">createCounter</span>();
counter.<span class="hljs-title function_">increment</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-title function_">value</span>()); <span class="hljs-comment">// 1</span>
<span class="hljs-comment">// count å¯¹å¤–ç•Œå®Œå…¨éšè— â†’ å®ç°äº†ã€Œæ•°æ®å°è£…ã€</span>
</code></pre>
<h5 data-id="heading-25">ç¤ºä¾‹3ï¼šäº‹ä»¶ç›‘å¬å™¨ä¸­çš„é—­åŒ…</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">`btn<span class="hljs-subst">${i}</span>`</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Button <span class="hljs-subst">${i}</span> clicked!`</span>);
    });
}
</code></pre>
<h4 data-id="heading-26">4.4 let/conståœ¨é—­åŒ…ä¸­çš„è¡Œä¸º</h4>

















<table><thead><tr><th>åœºæ™¯</th><th>var è¡Œä¸º</th><th>let/const è¡Œä¸º</th><th>åŸå› </th></tr></thead><tbody><tr><td>åœ¨å¾ªç¯ä¸­å®šä¹‰å‡½æ•°</td><td>æ‰€æœ‰å‡½æ•°å…±äº«åŒä¸€ä¸ªå˜é‡</td><td>æ¯æ¬¡è¿­ä»£éƒ½æœ‰ç‹¬ç«‹çš„ç»‘å®š</td><td>let/const æœ‰å—çº§ä½œç”¨åŸŸ</td></tr></tbody></table>
<pre><code class="hljs language-css" lang="css">// âŒ <span class="hljs-selector-tag">var</span> é™·é˜±
for (<span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">i</span> = <span class="hljs-number">0</span>; <span class="hljs-selector-tag">i</span> &lt; <span class="hljs-number">3</span>; <span class="hljs-selector-tag">i</span>++) {
    setTimeout(() =&gt; console<span class="hljs-selector-class">.log</span>(<span class="hljs-selector-tag">i</span>), <span class="hljs-number">100</span>); // è¾“å‡º: <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>
}

// âœ… let æ­£ç¡®
for (let <span class="hljs-selector-tag">i</span> = <span class="hljs-number">0</span>; <span class="hljs-selector-tag">i</span> &lt; <span class="hljs-number">3</span>; <span class="hljs-selector-tag">i</span>++) {
    setTimeout(() =&gt; console<span class="hljs-selector-class">.log</span>(<span class="hljs-selector-tag">i</span>), <span class="hljs-number">100</span>); // è¾“å‡º: <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>
}
</code></pre>
<h4 data-id="heading-27">4.5 é—­åŒ…çš„ç”¨é€”</h4>






























<table><thead><tr><th>ç”¨é€”</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ•°æ®å°è£…</td><td>éšè—å®ç°ç»†èŠ‚</td><td><code>createCounter()</code> ä¸­çš„ <code>count</code></td></tr><tr><td>å‡½æ•°å·¥å‚</td><td>åŠ¨æ€ç”Ÿæˆå‡½æ•°</td><td><code>makeAdder(5)</code></td></tr><tr><td>æ¨¡å—åŒ–å¼€å‘</td><td>é¿å…å…¨å±€æ±¡æŸ“</td><td>IIFE æ¨¡å—</td></tr><tr><td>å¼‚æ­¥ç¼–ç¨‹</td><td>ä¿æŒä¸Šä¸‹æ–‡</td><td><code>setTimeout(() =&gt; console.log(x), 100)</code></td></tr></tbody></table>
<h4 data-id="heading-28">4.6 é—­åŒ…é£é™©ä¸ä¼˜åŒ–</h4>





















<table><thead><tr><th>é£é™©</th><th>å¦‚ä½•é¿å…</th></tr></thead><tbody><tr><td>å†…å­˜å ç”¨å¢åŠ </td><td>é¿å…å¼•ç”¨å¤§å‹ DOM å¯¹è±¡æˆ–æ•°æ®ç»“æ„</td></tr><tr><td>æ„å¤–ä¿ç•™ä½œç”¨åŸŸ</td><td>ä¸è¦åœ¨å¾ªç¯ä¸­æ— æ„æ•è·å¤§å¯¹è±¡</td></tr><tr><td>è°ƒè¯•å›°éš¾</td><td>ä½¿ç”¨ Chrome DevTools æŸ¥çœ‹ Scope</td></tr></tbody></table>
<blockquote>
<p>ğŸ”‘ <strong>ç»ˆæå£è¯€</strong>ï¼š"ä¸€åµŒå¥—ã€äºŒè®¿é—®ã€ä¸‰è„±ç¦»â€”â€”ä¸‰è€…ä¿±å…¨æ‰æ˜¯é—­åŒ…ã€‚"</p>
</blockquote>
<hr/>
<h3 data-id="heading-29">5. é€’å½’ç®—æ³•è¯¦è§£</h3>
<h4 data-id="heading-30">5.1 ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ</h4>
<p>é€’å½’æ˜¯æŒ‡å‡½æ•°ç›´æ¥æˆ–é—´æ¥åœ°è°ƒç”¨è‡ªèº«ã€‚å¿…é¡»åŒ…å«ï¼š</p>
<ol>
<li><strong>åŸºçº¿æ¡ä»¶</strong>ï¼ˆBase Caseï¼‰ï¼šåœæ­¢é€’å½’çš„æ¡ä»¶</li>
<li><strong>é€’æ¨å…³ç³»</strong>ï¼ˆRecursive Caseï¼‰ï¼šé—®é¢˜è§„æ¨¡å˜å°çš„è‡ªæˆ‘è°ƒç”¨</li>
</ol>
<h4 data-id="heading-31">5.2 æ±‰è¯ºå¡”é—®é¢˜è¯¦è§£</h4>
<h5 data-id="heading-32">é—®é¢˜æè¿°</h5>
<p>å°† n ä¸ªåœ†ç›˜ä»æºæŸ±ç§»åŠ¨åˆ°ç›®æ ‡æŸ±ï¼Œéµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>
<ol>
<li>æ¯æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªåœ†ç›˜</li>
<li>ä¸èƒ½å°†è¾ƒå¤§çš„åœ†ç›˜æ”¾åœ¨è¾ƒå°çš„åœ†ç›˜ä¸Šé¢</li>
<li>å¯ä»¥ä½¿ç”¨è¾…åŠ©æŸ±ä½œä¸ºè¿‡æ¸¡</li>
</ol>
<h5 data-id="heading-33">é€’å½’è§£æ³•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> hanoi = <span class="hljs-keyword">function</span>(<span class="hljs-params">disc, src, aux, dst</span>) {
    <span class="hljs-keyword">if</span> (disc &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-title function_">hanoi</span>(disc - <span class="hljs-number">1</span>, src, dst, aux); <span class="hljs-comment">// æ­¥éª¤1ï¼šæŠŠä¸Šé¢n-1ä¸ªç§»åˆ°è¾…åŠ©æŸ±</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Move disc '</span> + disc + <span class="hljs-string">' from '</span> + src + <span class="hljs-string">' to '</span> + dst); <span class="hljs-comment">// æ­¥éª¤2ï¼šç§»åŠ¨æœ€å¤§ç›˜</span>
        <span class="hljs-title function_">hanoi</span>(disc - <span class="hljs-number">1</span>, aux, src, dst); <span class="hljs-comment">// æ­¥éª¤3ï¼šæŠŠn-1ä¸ªä»è¾…åŠ©æŸ±ç§»åˆ°ç›®æ ‡æŸ±</span>
    }
};

<span class="hljs-title function_">hanoi</span>(<span class="hljs-number">3</span>, <span class="hljs-string">'Src'</span>, <span class="hljs-string">'Aux'</span>, <span class="hljs-string">'Dst'</span>);
</code></pre>
<h5 data-id="heading-34">å®Œæ•´æ‰§è¡Œæµç¨‹ï¼ˆn=3ï¼‰</h5>













































<table><thead><tr><th>æ­¥éª¤</th><th>è¾“å‡º</th><th>ç‰©ç†çŠ¶æ€</th></tr></thead><tbody><tr><td>â‘ </td><td>Move disc 1 from Src to Dst</td><td><code>[3,2] / [] / [1]</code></td></tr><tr><td>â‘¡</td><td>Move disc 2 from Src to Aux</td><td><code>[3] / [2] / [1]</code></td></tr><tr><td>â‘¢</td><td>Move disc 1 from Dst to Aux</td><td><code>[3] / [2,1] / []</code></td></tr><tr><td>â‘£</td><td>Move disc 3 from Src to Dst</td><td><code>[] / [2,1] / [3]</code></td></tr><tr><td>â‘¤</td><td>Move disc 1 from Aux to Src</td><td><code>[1] / [2] / [3]</code></td></tr><tr><td>â‘¥</td><td>Move disc 2 from Aux to Dst</td><td><code>[1] / [] / [3,2]</code></td></tr><tr><td>â‘¦</td><td>Move disc 1 from Src to Dst</td><td><code>[] / [] / [3,2,1]</code></td></tr></tbody></table>
<h5 data-id="heading-35">æ•°å­¦è§„å¾‹</h5>
<p>ç§»åŠ¨ n ä¸ªç›˜æ‰€éœ€çš„æœ€å°‘æ­¥æ•°ä¸ºï¼š<code>T(n) = 2â¿ - 1</code></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">T</span>(<span class="hljs-number">1</span>) = <span class="hljs-number">1</span>
<span class="hljs-built_in">T</span>(<span class="hljs-number">2</span>) = <span class="hljs-number">3</span>  
<span class="hljs-built_in">T</span>(<span class="hljs-number">3</span>) = <span class="hljs-number">7</span>
<span class="hljs-built_in">T</span>(<span class="hljs-number">4</span>) = <span class="hljs-number">15</span>
...
</code></pre>
<blockquote>
<p>ğŸ§  <strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š"è¦æŠŠ n ä¸ªç›˜ä» Aâ†’Cï¼Œå¿…é¡»å…ˆæ¬èµ°ä¸Šé¢ nâˆ’1 ä¸ªç›˜åˆ° Bï¼Œå†æŠŠæœ€å¤§çš„ç›˜ç§»åˆ° Cï¼Œæœ€åæŠŠ nâˆ’1 ä¸ªç›˜ä» B ç§»åˆ° Cã€‚"</p>
</blockquote>
<hr/>
<h3 data-id="heading-36">6. å›è°ƒå‡½æ•°ä¸å¼‚æ­¥ç¼–ç¨‹</h3>
<h4 data-id="heading-37">6.1 åŒæ­¥ vs å¼‚æ­¥</h4>
<h5 data-id="heading-38">åŒæ­¥æ–¹å¼ï¼ˆé˜»å¡å¼ï¼‰</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">request</span> = prepare_the_request()<span class="hljs-comment">;</span>
<span class="hljs-attr">response</span> = send_request_synchronously(request)<span class="hljs-comment">; // å¡ä½ç­‰å¾…</span>
display(response)<span class="hljs-comment">;</span>
</code></pre>
<p>âŒ é—®é¢˜ï¼šç½‘ç»œè¯·æ±‚ä¼šå¯¼è‡´å®¢æˆ·ç«¯"å‡æ­»"çŠ¶æ€ã€‚</p>
<h5 data-id="heading-39">å¼‚æ­¥æ–¹å¼ï¼ˆéé˜»å¡å¼ï¼‰</h5>
<pre><code class="hljs language-scss" lang="scss">request = <span class="hljs-built_in">prepare_the_request</span>();
<span class="hljs-built_in">send_request_asynchronously</span>(request, function(response) {
    <span class="hljs-attribute">display</span>(response);
});
</code></pre>
<p>âœ… ä¼˜ç‚¹ï¼šç«‹å³è¿”å›ï¼Œä¸é˜»å¡UIï¼Œå“åº”åˆ°è¾¾æ—¶è‡ªåŠ¨è°ƒç”¨å›è°ƒå‡½æ•°ã€‚</p>
<h4 data-id="heading-40">6.2 å›è°ƒå‡½æ•°æœ¬è´¨</h4>
<ul>
<li><strong>å‡½æ•°ä½œä¸ºå‚æ•°</strong>ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°</li>
<li><strong>å»¶è¿Ÿæ‰§è¡Œ</strong>ï¼Œåœ¨ç‰¹å®šäº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œ</li>
<li>å®ç°<strong>äº‹ä»¶é©±åŠ¨</strong>ç¼–ç¨‹æ¨¡å‹</li>
<li>è¾¾åˆ°ä»£ç <strong>è§£è€¦</strong>çš„æ•ˆæœ</li>
</ul>
<h4 data-id="heading-41">6.3 å®é™…åº”ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">simulateAsyncRequest</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¼€å§‹è¯·æ±‚..."</span>);
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> response = <span class="hljs-string">"Hello from server!"</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å“åº”åˆ°è¾¾ï¼"</span>);
        <span class="hljs-title function_">callback</span>(response);
    }, <span class="hljs-number">1000</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">display</span>(<span class="hljs-params">response</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ˜¾ç¤ºç»“æœï¼š"</span> + response);
}

<span class="hljs-title function_">simulateAsyncRequest</span>(display);
</code></pre>
<blockquote>
<p>"å›è°ƒ = æŠŠâ€˜è¦åšä»€ä¹ˆâ€™å‘Šè¯‰åˆ«äººï¼Œç­‰äº‹æƒ…åšå®Œåå†é€šçŸ¥ä½ ã€‚"</p>
</blockquote>
<h4 data-id="heading-42">6.4 å‘å±•æ¼”è¿›</h4>
<p>è™½ç„¶å›è°ƒæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ï¼Œä½†å­˜åœ¨"å›è°ƒåœ°ç‹±"é—®é¢˜ï¼Œå› æ­¤å‘å±•å‡ºäº†ï¼š</p>
<ul>
<li><strong>Promise</strong>ï¼šè§£å†³å›è°ƒåµŒå¥—è¿‡æ·±çš„é—®é¢˜</li>
<li><strong>async/await</strong>ï¼šè®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç </li>
</ul>
<hr/>
<h3 data-id="heading-43">æ€»ç»“ä¸å±•æœ›</h3>
<h4 data-id="heading-44">æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾</h4>
<ol>
<li><strong>å‡½æ•°æ˜¯å¯¹è±¡</strong>ï¼šå…·æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œé€šè¿‡åŸå‹é“¾ç»§æ‰¿</li>
<li><strong>thisç»‘å®š</strong>ï¼šç”±è°ƒç”¨æ–¹å¼å†³å®šï¼ŒæŒæ¡å››ç§æ¨¡å¼</li>
<li><strong>arguments</strong>ï¼šç±»æ•°ç»„å¯¹è±¡ï¼Œç°ä»£å¼€å‘æ¨èä½¿ç”¨ rest å‚æ•°</li>
<li><strong>é—­åŒ…</strong>ï¼šè®°ä½ä½œç”¨åŸŸçš„èƒ½åŠ›ï¼Œæ˜¯è®¸å¤šé«˜çº§ç‰¹æ€§çš„åŸºç¡€</li>
<li><strong>é€’å½’</strong>ï¼šåˆ†æ²»æ€æƒ³çš„ä½“ç°ï¼Œé€‚ç”¨äºæ ‘å½¢ç»“æ„ç­‰é—®é¢˜</li>
<li><strong>å›è°ƒ</strong>ï¼šå¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ï¼Œç†è§£äº‹ä»¶å¾ªç¯çš„å…³é”®</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 v-model æ–°å†™æ³•å…¨è§£ï¼šå¤šç»‘å®š+è‡ªå®šä¹‰ä¿®é¥°ç¬¦+(.camel)é¿å‘]]></title>    <link>https://juejin.cn/post/7598574507347853347</link>    <guid>https://juejin.cn/post/7598574507347853347</guid>    <pubDate>2026-01-25T12:07:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7598574507347853347" data-draft-id="7598532592456466459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 v-model æ–°å†™æ³•å…¨è§£ï¼šå¤šç»‘å®š+è‡ªå®šä¹‰ä¿®é¥°ç¬¦+(.camel)é¿å‘"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-01-25T12:07:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="boooooooom"/> <meta itemprop="url" content="https://juejin.cn/user/3078273283917399"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 v-model æ–°å†™æ³•å…¨è§£ï¼šå¤šç»‘å®š+è‡ªå®šä¹‰ä¿®é¥°ç¬¦+(.camel)é¿å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3078273283917399/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    boooooooom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-25T12:07:21.000Z" title="Sun Jan 25 2026 12:07:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue3 ä¸­ï¼Œv-model è¿›è¡Œäº†å¤§å¹…é‡æ„ï¼Œæ‘†è„±äº† Vue2 ä¸­åŸºäº value å±æ€§å’Œ input äº‹ä»¶çš„å¼ºè€¦åˆé™åˆ¶ï¼Œå˜å¾—æ›´çµæ´»ã€å¯æ‰©å±•ã€‚æ–°è¯­æ³•æ”¯æŒå¤š v-model ç»‘å®šã€è‡ªå®šä¹‰ä¿®é¥°ç¬¦ã€.camel å‘½åè½¬æ¢ç­‰å®ç”¨ç‰¹æ€§ï¼Œå½»åº•è§£å†³äº†æ—§ç‰ˆæœ¬çš„è¯¸å¤šç—›ç‚¹ã€‚æœ¬æ–‡å°†ä»æ ¸å¿ƒå˜åŒ–å…¥æ‰‹ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹æ‹†è§£æ‰€æœ‰æ–°ç‰¹æ€§ï¼ŒåŠ©ä½ é«˜æ•ˆæŒæ¡ Vue3 v-model ç”¨æ³•ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Vue3 v-model æ ¸å¿ƒå˜åŒ–ï¼ˆä¸ Vue2 å¯¹æ¯”ï¼‰</h2>
<p>Vue3 å¯¹ v-model çš„è®¾è®¡ç†å¿µè¿›è¡Œäº†é©æ–°ï¼Œæ ¸å¿ƒå˜æ›´åœ¨äºâ€œè§£è€¦å±æ€§ä¸äº‹ä»¶â€ï¼Œè®©å¼€å‘è€…å¯è‡ªç”±å®šä¹‰ç»‘å®šçš„å±æ€§åå’Œè§¦å‘äº‹ä»¶ï¼ŒåŒæ—¶ç®€åŒ–äº†è‡ªå®šä¹‰ç»„ä»¶çš„ v-model å®ç°ã€‚</p>
<h3 data-id="heading-1">1. é»˜è®¤ç»‘å®šè§„åˆ™å˜æ›´</h3>
<p>Vue2 ä¸­ï¼Œè‡ªå®šä¹‰ç»„ä»¶çš„ v-model é»˜è®¤ç»‘å®š <code>value</code> å±æ€§å’Œ <code>input</code> äº‹ä»¶ï¼›Vue3 åˆ™é»˜è®¤ç»‘å®š <code>modelValue</code> å±æ€§å’Œ <code>update:modelValue</code> äº‹ä»¶ï¼Œé¿å…äº†ä¸åŸç”Ÿè¡¨å•å…ƒç´ çš„ value å±æ€§å†²çªã€‚</p>
<pre><code class="hljs language-ts" lang="ts">&lt;!-- <span class="hljs-title class_">Vue2</span> è‡ªå®šä¹‰ç»„ä»¶ v-model å†™æ³• --&gt;
&lt;template&gt;
  &lt;input :value="value" @input="$emit('input', $event.target.value)"&gt;
&lt;/template&gt;
&lt;script setup&gt;
export default {
  props: ['value']
}
&lt;script&gt;

&lt;!-- Vue3 è‡ªå®šä¹‰ç»„ä»¶ v-model å†™æ³•ï¼ˆé»˜è®¤ï¼‰ --&gt;
&lt;template&gt;
  &lt;input :value="modelValue" @input="$emit('update:modelValue', $event.target.value)"&gt;
&lt;/template&gt;
&lt;script setup&gt;
defineProps(['modelValue'])
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-2">2. æ”¯æŒè‡ªå®šä¹‰ç»‘å®šå±æ€§ä¸äº‹ä»¶</h3>
<p>Vue3 å…è®¸é€šè¿‡ <code>v-model:propName</code> çš„å½¢å¼ï¼Œè‡ªå®šä¹‰ç»„ä»¶ v-model ç»‘å®šçš„å±æ€§åï¼Œæ›¿ä»£ Vue2 ä¸­éœ€è¦é€šè¿‡ <code>model</code> é€‰é¡¹é…ç½®çš„æ–¹å¼ï¼Œè¯­æ³•æ›´ç®€æ´ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">&lt;!-- çˆ¶ç»„ä»¶ï¼šè‡ªå®šä¹‰ç»‘å®šå±æ€§ä¸º title --&gt;
&lt;template&gt;
  &lt;CustomInput v-model:title="formTitle" /&amp;gt;
&lt;/template&gt;

&lt;!-- å­ç»„ä»¶ï¼šå¯¹åº”ç»‘å®š title å±æ€§å’Œ update:title äº‹ä»¶ --&gt;
&lt;template&gt;
  &lt;input :value="title" @input="$emit('update:title', $event.target.value)"&gt;
&lt;/template&gt;
&lt;script setup&gt;
defineProps(['title'])
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-3">äºŒã€å¤š v-model ç»‘å®šï¼ˆVue3 æ–°å¢ï¼‰</h2>
<p>Vue2 ä¸­ä¸€ä¸ªç»„ä»¶åªèƒ½ç»‘å®šä¸€ä¸ª v-modelï¼Œè‹¥éœ€å¤šå­—æ®µåŒå‘ç»‘å®šï¼Œéœ€æ‰‹åŠ¨å®šä¹‰å¤šä¸ªäº‹ä»¶ï¼›Vue3 å€ŸåŠ©â€œè‡ªå®šä¹‰ç»‘å®šå±æ€§â€ç‰¹æ€§ï¼Œæ”¯æŒåœ¨ä¸€ä¸ªç»„ä»¶ä¸Šä½¿ç”¨å¤šä¸ª v-modelï¼Œå®ç°å¤šå­—æ®µåŒæ­¥æ›´æ–°ï¼Œå¤§å¹…ç®€åŒ–ä»£ç ã€‚</p>
<h3 data-id="heading-4">å®æˆ˜æ¡ˆä¾‹ï¼šå¤šå­—æ®µè¡¨å•ç»„ä»¶</h3>
<p>å®ç°ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯è¡¨å•ç»„ä»¶ï¼ŒåŒæ—¶ç»‘å®šå§“åï¼ˆnameï¼‰å’Œå¹´é¾„ï¼ˆageï¼‰ä¸¤ä¸ªå­—æ®µï¼Œé€šè¿‡å¤š v-model åŒæ­¥åˆ°çˆ¶ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">&lt;!-- çˆ¶ç»„ä»¶ï¼šå¤š v-model ç»‘å®š --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">UserForm</span> 
    <span class="hljs-attr">v-model:name</span>=<span class="hljs-string">"userName"</span> 
    <span class="hljs-attr">v-model:age</span>=<span class="hljs-string">"userAge"</span> 
  /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å§“åï¼š{{ userName }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¹´é¾„ï¼š{{ userAge }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">UserForm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./UserForm.vue'</span>

<span class="hljs-keyword">const</span> userName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> userAge = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

&lt;!-- å­ç»„ä»¶ï¼š<span class="hljs-title class_">UserForm</span>.<span class="hljs-property">vue</span> --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;input 
      type="text" 
      :value="name" 
      @input="$emit('update:name', $event.target.value)"
      placeholder="è¯·è¾“å…¥å§“å"
    &gt;
    &lt;input 
      type="number" 
      :value="age" 
      @input="$emit('update:age', $event.target.valueAsNumber)"
      placeholder="è¯·è¾“å…¥å¹´é¾„"
    &gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„ä¸¤ä¸ªç»‘å®šå±æ€§
defineProps(['name', 'age'])
&lt;/script&gt;
</code></pre>
<p>æ ¸å¿ƒé€»è¾‘ï¼šæ¯ä¸ª v-model å¯¹åº”â€œå±æ€§å + update:å±æ€§å äº‹ä»¶â€çš„ç»„åˆï¼Œå­ç»„ä»¶é€šè¿‡è§¦å‘å¯¹åº”äº‹ä»¶ï¼Œå°†å€¼åŒæ­¥ç»™çˆ¶ç»„ä»¶ï¼Œå®ç°å¤šå­—æ®µåŒå‘ç»‘å®šã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€è‡ªå®šä¹‰ä¿®é¥°ç¬¦ï¼ˆVue3 æ–°å¢ï¼‰</h2>
<p>Vue2 ä¸­ v-model ä»…æ”¯æŒç³»ç»Ÿå†…ç½®ä¿®é¥°ç¬¦ï¼ˆ.trimã€.numberã€.lazyï¼‰ï¼Œè‡ªå®šä¹‰ä¿®é¥°ç¬¦éœ€é€šè¿‡å¤æ‚çš„äº‹ä»¶å¤„ç†å®ç°ï¼›Vue3 å…è®¸ä¸º v-model å®šä¹‰è‡ªå®šä¹‰ä¿®é¥°ç¬¦ï¼Œè½»æ¾å®ç°æ ¼å¼åŒ–ã€éªŒè¯ç­‰é€»è¾‘ï¼Œä¸”æ”¯æŒå…¨å±€å’Œå±€éƒ¨ä¿®é¥°ç¬¦ã€‚</p>
<h3 data-id="heading-6">1. è‡ªå®šä¹‰ä¿®é¥°ç¬¦åŸºç¡€ç”¨æ³•</h3>
<p>å®ç°ä¸€ä¸ªè‡ªå®šä¹‰ä¿®é¥°ç¬¦ <code>.capitalize</code>ï¼Œå°†è¾“å…¥çš„æ–‡æœ¬é¦–å­—æ¯å¤§å†™ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;!-- çˆ¶ç»„ä»¶ï¼šä½¿ç”¨è‡ªå®šä¹‰ä¿®é¥°ç¬¦ .<span class="hljs-property">capitalize</span> --&gt;
&lt;template&gt;
  &lt;CustomInput v-model.capitalize="username" /&amp;gt;
&lt;/template&gt;

&lt;!-- å­ç»„ä»¶ï¼šå¤„ç†è‡ªå®šä¹‰ä¿®é¥°ç¬¦ --&gt;
&lt;template&gt;
  &lt;input 
    :value="modelValue" 
    @input="handleInput"
  &gt;
&lt;/template&gt;

&lt;script setup&gt;
const props = defineProps({
  modelValue: String,
  // æ¥æ”¶ä¿®é¥°ç¬¦ï¼šæ ¼å¼ä¸ºâ€œmodelModifiersâ€ï¼Œç±»å‹ä¸ºå¯¹è±¡
  modelModifiers: {
    type: Object,
    default: () =&gt; ({})
  }
})

const emit = defineEmits(['update:modelValue'])

const handleInput = (e) =&gt; {
  let value = e.target.value
  // åˆ¤æ–­æ˜¯å¦ä½¿ç”¨äº† .capitalize ä¿®é¥°ç¬¦
  if (props.modelModifiers.capitalize) {
    value = value.charAt(0).toUpperCase() + value.slice(1)
  }
  emit('update:modelValue', value)
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-7">2. å¤š v-model è‡ªå®šä¹‰ä¿®é¥°ç¬¦</h3>
<p>è‹¥ä¸ºå¤š v-model ç»‘å®šæ·»åŠ ä¿®é¥°ç¬¦ï¼Œéœ€åœ¨å­ç»„ä»¶ä¸­é€šè¿‡â€œå±æ€§å + Modifiersâ€çš„æ ¼å¼æ¥æ”¶ï¼Œä¾‹å¦‚ä¸º <code>v-model:name</code> æ·»åŠ ä¿®é¥°ç¬¦ï¼Œå­ç»„ä»¶æ¥æ”¶ <code>nameModifiers</code>ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">&lt;!-- çˆ¶ç»„ä»¶ï¼šä¸º name ç»‘å®šæ·»åŠ  .<span class="hljs-property">capitalize</span> ä¿®é¥°ç¬¦ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">UserForm</span> <span class="hljs-attr">v-model:name.capitalize</span>=<span class="hljs-string">"userName"</span> /&amp;<span class="hljs-attr">gt</span>;
&lt;/<span class="hljs-attr">template</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å­ç»„ä»¶ï¼šæ¥æ”¶ nameModifiers ä¿®é¥°ç¬¦ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>,
  <span class="hljs-comment">// å¯¹åº” name ç»‘å®šçš„ä¿®é¥°ç¬¦</span>
  <span class="hljs-attr">nameModifiers</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> ({})
  }
})

<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'update:name'</span>])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNameInput</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-keyword">let</span> value = e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">nameModifiers</span>.<span class="hljs-property">capitalize</span>) {
    value = value.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">toUpperCase</span>() + value.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>)
  }
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:name'</span>, value)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<h2 data-id="heading-8">å››ã€.camel ä¿®é¥°ç¬¦ï¼ˆVue3 ä¿ç•™å¹¶ä¼˜åŒ–ï¼‰</h2>
<p>Vue ä¸­ HTML å±æ€§åæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œé»˜è®¤ä¼šå°† v-model ç»‘å®šçš„é©¼å³°å¼å±æ€§åè½¬ä¸ºçŸ­æ¨ªçº¿åˆ†éš”å¼ï¼ˆkebab-caseï¼‰ã€‚<code>.camel</code> ä¿®é¥°ç¬¦ç”¨äºå¼ºåˆ¶ä¿ç•™é©¼å³°å¼å±æ€§åï¼Œé€‚ç”¨äºç»‘å®šåŸç”Ÿç»„ä»¶æˆ–ç¬¬ä¸‰æ–¹ç»„ä»¶ä¸­éœ€è¦é©¼å³°å‘½åå±æ€§çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-9">ä½¿ç”¨åœºæ™¯ä¸å®ä¾‹</h3>
<p>ä¾‹å¦‚ï¼ŒåŸç”Ÿ SVG å…ƒç´ çš„ <code>viewBox</code> å±æ€§æ˜¯é©¼å³°å‘½åï¼Œè‹¥ç›´æ¥é€šè¿‡ v-model ç»‘å®šï¼ŒVue ä¼šé»˜è®¤è½¬ä¸º <code>view-box</code>ï¼Œå¯¼è‡´å±æ€§å¤±æ•ˆï¼Œæ­¤æ—¶éœ€ä½¿ç”¨ <code>.camel</code> ä¿®é¥°ç¬¦ä¿ç•™é©¼å³°æ ¼å¼ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">
&lt;template&gt;
  &lt;!-- é”™è¯¯ï¼š<span class="hljs-title class_">Vue</span> ä¼šå°† viewBox è½¬ä¸º view-boxï¼Œ<span class="hljs-variable constant_">SVG</span> æ— æ³•è¯†åˆ« --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"viewBoxValue"</span>&amp;<span class="hljs-attr">gt</span>;&amp;<span class="hljs-attr">lt</span>;/<span class="hljs-attr">svg</span>&amp;<span class="hljs-attr">gt</span>;

  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">æ­£ç¡®</span>ï¼š<span class="hljs-attr">.camel</span> <span class="hljs-attr">å¼ºåˆ¶ä¿ç•™</span> <span class="hljs-attr">viewBox</span> <span class="hljs-attr">é©¼å³°å‘½å</span> <span class="hljs-attr">--</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">v-model.camel</span>=<span class="hljs-string">"viewBoxValue"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">// viewBoxValue æ ¼å¼ï¼š"0 0 100 100"</span>
<span class="hljs-keyword">const</span> viewBoxValue = <span class="hljs-title function_">ref</span>(<span class="hljs-string">"0 0 100 100"</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>æ³¨æ„ï¼šåœ¨ Vue3 çš„å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ä¸­ï¼Œæ¨¡æ¿æ˜¯ç»è¿‡ç¼–è¯‘ä¼˜åŒ–çš„ï¼Œå¯¹äºè‡ªå®šä¹‰ç»„ä»¶çš„é©¼å³°å±æ€§ï¼Œè‹¥å­ç»„ä»¶æ¥æ”¶æ—¶ç”¨é©¼å³°å‘½åï¼Œå¯æ— éœ€ <code>.camel</code>ï¼›ä½†å¯¹äºåŸç”Ÿå…ƒç´ æˆ–ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œä»éœ€é€šè¿‡ <code>.camel</code> å¤„ç†é©¼å³°å±æ€§ã€‚</p>
<h2 data-id="heading-10">äº”ã€å¸¸è§é—®é¢˜ä¸é¿å‘æŒ‡å—</h2>
<ol>
<li><strong>ä¿®é¥°ç¬¦ä¸å¤š v-model å†²çª</strong>ï¼šå¤š v-model ç»‘å®šçš„ä¿®é¥°ç¬¦éœ€å¯¹åº”â€œå±æ€§å + Modifiersâ€æ¥æ”¶ï¼Œä¸å¯æ··ç”¨<code>modelModifiers</code>ï¼ˆé»˜è®¤ä¿®é¥°ç¬¦æ¥æ”¶åï¼‰ã€‚</li>
<li><strong>.camel ä¿®é¥°ç¬¦æ»¥ç”¨</strong>ï¼šè‡ªå®šä¹‰ç»„ä»¶é—´çš„é©¼å³°å±æ€§ç»‘å®šæ— éœ€ <code>.camel</code>ï¼Œä»…åŸç”Ÿå…ƒç´ æˆ–ç¬¬ä¸‰æ–¹ç»„ä»¶éœ€è¦ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨ã€‚</li>
<li><strong>Vue2 è¿ç§»å…¼å®¹</strong>ï¼šè‹¥éœ€å…¼å®¹ Vue2 ä»£ç ï¼Œå¯é€šè¿‡ <code>model</code> é€‰é¡¹é…ç½®é»˜è®¤å±æ€§å’Œäº‹ä»¶ï¼ŒVue3 ä»æ”¯æŒè¯¥å†™æ³•ï¼Œä½†æ¨èä½¿ç”¨æ–°è¯­æ³•ã€‚</li>
</ol>
<h2 data-id="heading-11">å…­ã€æ€»ç»“</h2>
<p>Vue3 å¯¹ v-model çš„é‡æ„ï¼Œæ ¸å¿ƒæ˜¯èµ‹äºˆå¼€å‘è€…æ›´å¼ºçš„çµæ´»æ€§â€”â€”å¤š v-model ç»‘å®šè§£å†³äº†å¤šå­—æ®µåŒå‘åŒæ­¥çš„ç—›ç‚¹ï¼Œè‡ªå®šä¹‰ä¿®é¥°ç¬¦ç®€åŒ–äº†å€¼å¤„ç†é€»è¾‘ï¼Œ.camel ä¿®é¥°ç¬¦é€‚é…äº†ç‰¹æ®Šå±æ€§å‘½ååœºæ™¯ã€‚è¿™äº›ç‰¹æ€§è®© v-model ä¸å†å±€é™äºåŸºç¡€è¡¨å•ç»‘å®šï¼Œèƒ½è½»æ¾åº”å¯¹å¤æ‚ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®æ ¹æ®ä¸šåŠ¡éœ€æ±‚åˆç†é€‰æ‹©ç‰¹æ€§ï¼šç®€å•è¡¨å•ç”¨é»˜è®¤ v-modelï¼Œå¤šå­—æ®µç”¨å¤š v-model ç»‘å®šï¼Œéœ€æ ¼å¼åŒ–å€¼ç”¨è‡ªå®šä¹‰ä¿®é¥°ç¬¦ï¼ŒåŸç”Ÿé©¼å³°å±æ€§ç”¨ .camel ä¿®é¥°ç¬¦ï¼Œæœ€å¤§åŒ–æå‡å¼€å‘æ•ˆç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>