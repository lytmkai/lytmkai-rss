<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[å¦‚ä½•ä¸Šæ¶ App Storeï¼Ÿä»å¼€å‘å‡†å¤‡åˆ°æ„å»ºä¸Šä¼ çš„å…¨æµç¨‹æŠ€æœ¯æŒ‡å—]]></title>    <link>https://juejin.cn/post/7574584245152464947</link>    <guid>https://juejin.cn/post/7574584245152464947</guid>    <pubDate>2025-11-20T07:08:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574584245152464947" data-draft-id="7574625040659431474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ä¸Šæ¶ App Storeï¼Ÿä»å¼€å‘å‡†å¤‡åˆ°æ„å»ºä¸Šä¼ çš„å…¨æµç¨‹æŠ€æœ¯æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T07:08:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iOSå¼€å‘ä¸Šæ¶å“¦"/> <meta itemprop="url" content="https://juejin.cn/user/3336394949004844"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ä¸Šæ¶ App Storeï¼Ÿä»å¼€å‘å‡†å¤‡åˆ°æ„å»ºä¸Šä¼ çš„å…¨æµç¨‹æŠ€æœ¯æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3336394949004844/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iOSå¼€å‘ä¸Šæ¶å“¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:08:46.000Z" title="Thu Nov 20 2025 07:08:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šæ¶ App Store å¯¹è®¸å¤šå¼€å‘è€…æ¥è¯´å¹¶ä¸æ˜¯æŠ€æœ¯éš¾ç‚¹ï¼Œè€Œæ˜¯æµç¨‹å¤æ‚åº¦å¸¦æ¥çš„å¿ƒç†è´Ÿæ‹…ã€‚
è¯ä¹¦ã€IPAã€æˆªå›¾ã€æƒé™å£°æ˜ã€å®¡æ ¸é—®å·ï¼Œæ¯ä¸€é¡¹éƒ½å¯èƒ½æˆä¸ºç»Šè„šçŸ³ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä»½çœŸæ­£å¹²å‡€ã€èƒ½ç›´æ¥æ‰§è¡Œçš„â€œå¦‚ä½•ä¸Šæ¶ App Store çš„æŠ€æœ¯æ‰‹å†Œâ€ï¼Œä¸‹é¢çš„å†…å®¹èƒ½è®©æ•´ä¸ªæµç¨‹ä»æ··ä¹±å˜å¾—å¯æ§ã€‚</p>
<p>æœ¬æ–‡ä»å·¥ç¨‹è§†è§’å‡ºå‘ï¼Œæ‹†åˆ†æ•´ä¸ªä¸Šæ¶è¿‡ç¨‹ï¼Œè¦†ç›–å‡†å¤‡ã€æ„å»ºã€ä¸Šä¼ ã€å®¡æ ¸å››ç±»ä»»åŠ¡ï¼Œè®©å›¢é˜Ÿæˆå‘˜èƒ½æ¸…æ™°åˆ†å·¥ã€å‡å°‘è¿”å·¥ã€å¿«é€Ÿå®Œæˆä¸Šæ¶ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€ä¸Šæ¶å‰çš„åŸºç¡€æ¡ä»¶ï¼šå“ªäº›æ˜¯éå‡†å¤‡ä¸å¯çš„ï¼Ÿ</strong></h2>
<p>ä¸Šæ¶ App Store å¿…é¡»å…·å¤‡ä»¥ä¸‹ä¸¤ä¸ªæ ¸å¿ƒæ¡ä»¶ï¼š</p>
<h3 data-id="heading-1"><strong>1. Apple Developer Programï¼ˆä»˜è´¹å¼€å‘è€…è´¦å·ï¼‰</strong></h3>
<ul>
<li>å¹´è´¹ 99 ç¾å…ƒ</li>
<li>æ”¯æŒåˆ›å»ºè¯ä¹¦ã€æè¿°æ–‡ä»¶</li>
<li>å¯è¿›å…¥ App Store Connect ç®¡ç†åº”ç”¨
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a1531a158d04e2fadc2ec8f6d1d0d38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T5byA5Y-R5LiK5p625ZOm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227326&amp;x-signature=rc1LApvV1njbuvelIq06UBulxf8%3D" alt="è´¦å·" loading="lazy"/></li>
</ul>
<h3 data-id="heading-2"><strong>2. App Store Connect åˆ›å»ºåº”ç”¨é¡¹ç›®</strong></h3>
<p>åœ¨æµè§ˆå™¨ä¸­åˆ›å»ºä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>App åç§°</li>
<li>ä¸»è¦è¯­è¨€</li>
<li>Bundle ID</li>
<li>åº”ç”¨ç±»åˆ«</li>
<li>SKUï¼ˆå†…éƒ¨ç¼–å·ï¼‰</li>
</ul>
<p>è¿™æ˜¯æ•´ä¸ªä¸Šæ¶æµç¨‹çš„å…¥å£ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>äºŒã€æ„å»ºå‰çš„æŠ€æœ¯å‡†å¤‡ï¼šè¯ä¹¦ã€æè¿°æ–‡ä»¶ä¸æƒé™ä¿¡æ¯</strong></h2>
<p>æŠ€æœ¯äººå‘˜éœ€è¦å‡†å¤‡ä¸‰é¡¹æ ¸å¿ƒå†…å®¹ï¼š</p>
<h3 data-id="heading-4"><strong>ï¼ˆ1ï¼‰App IDï¼ˆBundle IDï¼‰</strong></h3>
<p>æ ¼å¼ï¼š<code>com.company.appname</code></p>
<h3 data-id="heading-5"><strong>ï¼ˆ2ï¼‰å‘å¸ƒè¯ä¹¦ï¼ˆDistribution Certificateï¼‰</strong></h3>
<p>ç”¨äºç»™ App Store ç‰ˆæœ¬ IPA ç­¾åã€‚</p>
<h3 data-id="heading-6"><strong>ï¼ˆ3ï¼‰App Store æè¿°æ–‡ä»¶ï¼ˆProvisioning Profileï¼‰</strong></h3>
<p>åŒ…å« App ID + è¯ä¹¦ä¿¡æ¯ã€‚</p>
<p>è¿™ä¸‰é¡¹å¿…é¡»å¯¹åº”ï¼Œå¦åˆ™ IPA æ— æ³•ä¸Šä¼ ã€‚</p>
<h3 data-id="heading-7"><strong>å¦‚ä½•è·å¾—è¯ä¹¦ï¼Ÿ</strong></h3>
<p>å¦‚æœä½ åœ¨ macOS ä¸Šï¼Œå¯ä»¥é€šè¿‡ Xcode æˆ–é’¥åŒ™ä¸²åŠ©æ‰‹ç”Ÿæˆã€‚
ä½†å¦‚æœä½ çš„å›¢é˜Ÿä½¿ç”¨ Windows æˆ– Linuxï¼Œå¯ä»¥ä½¿ç”¨å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰è·¨å¹³å°ç”Ÿæˆæ–¹å¼ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bb6f805d1c64bcf91b70d71c80b3526~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T5byA5Y-R5LiK5p625ZOm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227326&amp;x-signature=%2BznrVuQrY7GFV8e5HCJc3ZbRZMQ%3D" alt="è¯ä¹¦" loading="lazy"/></p>
<p>è¾“å‡ºçš„è¯ä¹¦å¯ä»¥åœ¨å¤šä¸ªç”µè„‘å…±äº«ï¼Œå®ç°å›¢é˜Ÿåä½œã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>ä¸‰ã€æ„å»º IPAï¼šä¸åŒæŠ€æœ¯æ ˆã€ä¸åŒæ„å»ºè·¯å¾„</strong></h2>
<p>è¦ä¸Šæ¶ App Storeï¼Œå¿…é¡»å‡†å¤‡ IPA åŒ…ã€‚ä¸åŒå¼€å‘æ–¹å¼æ„å»ºæ–¹å¼å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-9"><strong>1. åŸç”Ÿ iOSï¼ˆSwift / Objective-Cï¼‰</strong></h3>
<ul>
<li>åªèƒ½ä½¿ç”¨ Xcode â†’ Archive â†’ Export</li>
<li>å¿…é¡»åœ¨ macOS ä¸Šæ‰§è¡Œ
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ce3552d49b7420c973c1c8cf2cefbbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T5byA5Y-R5LiK5p625ZOm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227326&amp;x-signature=ip7t5Ddf1awIAnNp%2FsKA4m5uXBk%3D" alt="xcodeæ‰“åŒ…" loading="lazy"/></li>
</ul>
<h3 data-id="heading-10"><strong>2. uni-app / HBuilderX</strong></h3>
<ul>
<li>ä½¿ç”¨äº‘æ‰“åŒ…ç”Ÿæˆ IPA</li>
<li>ä¸ä¾èµ–æœ¬åœ° Macï¼Œæ˜¯ Windows å›¢é˜Ÿå¸¸ç”¨æ–¹å¼</li>
</ul>
<h3 data-id="heading-11"><strong>3. Flutter</strong></h3>
<p>å¸¸è§æ„å»ºæ–¹æ¡ˆï¼š</p>
<ul>
<li>Codemagic</li>
<li>Bitrise</li>
<li>GitHub Actionsï¼ˆMac Runnerï¼‰</li>
</ul>
<h3 data-id="heading-12"><strong>4. React Native / Ionic / Capacitor</strong></h3>
<p>å¯ä½¿ç”¨å¯¹åº”çš„äº‘æ„å»ºæœåŠ¡æˆ– CIã€‚</p>
<p>æ„å»ºæˆåŠŸåä¼šå¾—åˆ°ä¸€ä¸ªç»è¿‡ç­¾åçš„ IPA æ–‡ä»¶ï¼Œå³å¯è¿›å…¥â€œä¸Šä¼ é˜¶æ®µâ€ã€‚</p>
<hr/>
<h2 data-id="heading-13"><strong>å››ã€å¦‚ä½•æŠŠ IPA ä¸Šä¼ åˆ° App Storeï¼Ÿï¼ˆå…³é”®æ­¥éª¤ï¼‰</strong></h2>
<p>è¿™ä¸€æ­¥æ˜¯æ•´ä¸ªä¸Šæ¶æµç¨‹ä¸­æœ€ç›´æ¥å½±å“ç»“æœçš„æ­¥éª¤ã€‚</p>
<h3 data-id="heading-14"><strong>å®˜æ–¹æ–¹å¼ï¼ˆä»… macOSï¼‰</strong></h3>





















<table><thead><tr><th>å·¥å…·</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Xcode Organizer</td><td>èƒ½ä¸Šä¼ æ„å»º</td></tr><tr><td>Transporter</td><td>æ”¯æŒæ‹–æ‹½ä¸Šä¼  IPA</td></tr><tr><td>altool</td><td>å·²å¼ƒç”¨</td></tr></tbody></table>
<p>å¦‚æœå›¢é˜Ÿä¸­æœ‰äººæ‹¥æœ‰ Macï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰è·¨å¹³å°ä¸Šä¼ ï¼ˆWindows / Linux / macOS å…¨ç³»ç»Ÿé€šç”¨ï¼‰</strong></h3>
<p>è¿™æ˜¯è®¸å¤šå›¢é˜Ÿçš„ä¸»è¦è§£å†³æ–¹æ¡ˆï¼Œå°¤å…¶æ˜¯è·¨å¹³å°é¡¹ç›®ã€‚</p>
<p>ç¤ºä¾‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">appuploader_cli -u ios@team.com -p xxx-xxx-xxx-xxx -c 2 -f ./dist/app.ipa
</code></pre>
<p>å‚æ•°å«ä¹‰ï¼š</p>

























<table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>-u</td><td>Apple ID</td></tr><tr><td>-p</td><td>App ä¸“ç”¨å¯†ç ï¼ˆéç™»é™†å¯†ç ï¼‰</td></tr><tr><td>-c</td><td>ä¸Šä¼ é€šé“ï¼ˆ2 = æ–°åè®®ï¼‰</td></tr><tr><td>-f</td><td>æŒ‡å®š IPA æ–‡ä»¶è·¯å¾„</td></tr></tbody></table>
<p>ä¸Šä¼ æˆåŠŸåï¼Œæ„å»ºä¼šå‡ºç°åœ¨ï¼š</p>
<ul>
<li><strong>TestFlightï¼ˆä¾›æµ‹è¯•äººå‘˜ä¸‹è½½ï¼‰</strong></li>
<li><strong>App Store Connect â†’ æ„å»ºç‰ˆæœ¬åˆ—è¡¨</strong></li>
</ul>
<p>è·¨å¹³å°ä¸Šä¼ é€‚åˆï¼š</p>
<ul>
<li>æ—  Mac ç¯å¢ƒçš„å›¢é˜Ÿ</li>
<li>è‡ªåŠ¨åŒ–å‘å¸ƒ</li>
<li>CI/CD æµç¨‹é›†æˆ</li>
<li>å¤šåœ°åä½œå›¢é˜Ÿ</li>
</ul>
<p>å›¾åƒåŒ–ç®¡ç†ç•Œé¢ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41d1947cae8c4047b765d00fc01ccd26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T5byA5Y-R5LiK5p625ZOm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227326&amp;x-signature=xtMxbohi0elFvDrhJAX0F8joZ24%3D" alt="ipaä¸Šä¼ " loading="lazy"/></p>
<hr/>
<h2 data-id="heading-16"><strong>äº”ã€å¦‚ä½•å¡«å†™ App Store Connect ä¿¡æ¯ï¼Ÿï¼ˆéæŠ€æœ¯ä½†å¿…é¡»å®Œå–„ï¼‰</strong></h2>
<p>ä¸Šä¼ åï¼Œè¿˜éœ€è¦é…ç½® App ä¿¡æ¯ï¼Œå¦åˆ™æ— æ³•æäº¤å®¡æ ¸ã€‚</p>
<p>åŒ…æ‹¬ï¼š</p>
<h3 data-id="heading-17"><strong>ï¼ˆ1ï¼‰æˆªå›¾ï¼ˆå¿…é¡»é¡¹ï¼‰</strong></h3>
<p>æ¯ä¸ªç‰ˆæœ¬å¿…é¡»ä¸Šä¼ ï¼š</p>
<ul>
<li>iPhone 6.5 è‹±å¯¸</li>
<li>iPhone 5.5 è‹±å¯¸</li>
<li>è‹¥æ”¯æŒ iPadï¼Œéœ€è¦ iPad 12.9 / 10.5 æˆªå›¾</li>
</ul>
<p>æˆªå›¾å¿…é¡»æ˜¯çœŸå®ç•Œé¢ï¼Œä¸å…è®¸ç”Ÿæˆå¼æˆ–æ‰‹æœºå£³æ¨¡æ¿ã€‚</p>
<h3 data-id="heading-18"><strong>ï¼ˆ2ï¼‰åº”ç”¨ä¿¡æ¯</strong></h3>
<p>åŒ…æ‹¬ï¼š</p>
<ul>
<li>ç®€ä»‹</li>
<li>è¯¦ç»†æè¿°</li>
<li>å…³é”®è¯</li>
<li>æ”¯æŒ URL</li>
<li>éšç§æ”¿ç­– URL</li>
</ul>
<h3 data-id="heading-19"><strong>ï¼ˆ3ï¼‰æƒé™ç”¨é€”è¯´æ˜</strong></h3>
<p>æ‰€æœ‰éœ€è¦æƒé™çš„åŠŸèƒ½å¿…é¡»åœ¨ Info.plist ä¸­è¯´æ˜åŸå› ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>ç›¸æœº</li>
<li>éº¦å…‹é£</li>
<li>ç›¸å†Œ</li>
<li>å®šä½</li>
</ul>
<p>ç¼ºå¤±ä»»ä½•ä¸€é¡¹éƒ½å¯èƒ½è¢«æ‹’å®¡ã€‚</p>
<hr/>
<h2 data-id="heading-20"><strong>å…­ã€æäº¤å®¡æ ¸å‰çš„å…³é”®æ£€æŸ¥ï¼ˆå‡å°‘è¢«æ‹’å‡ ç‡ï¼‰</strong></h2>
<p>ä¸ºäº†é¿å…â€œåå¤è¢«æ‹’â€ï¼Œæäº¤å®¡æ ¸å‰å»ºè®®æ£€æŸ¥ï¼š</p>
<h3 data-id="heading-21"><strong>1. App çœŸæœºæ˜¯å¦é—ªé€€ï¼Ÿ</strong></h3>
<p>å†·å¯åŠ¨å¿…é¡»ç¨³å®šã€‚</p>
<h3 data-id="heading-22"><strong>2. æƒé™æ˜¯å¦å…¨éƒ¨æœ‰ç”¨é€”è¯´æ˜ï¼Ÿ</strong></h3>
<p>ç¼ºä¸€é¡¹éƒ½ä¼šè¢«æ‹’ç»ã€‚</p>
<h3 data-id="heading-23"><strong>3. ç™»å½•æµç¨‹æ˜¯å¦é¡ºç•…ï¼Ÿ</strong></h3>
<p>å®¡æ ¸ä¼šçœŸå®æ“ä½œ Appã€‚</p>
<h3 data-id="heading-24"><strong>4. æ˜¯å¦å­˜åœ¨ç±»ä¼¼ç½‘é¡µæ”¯ä»˜çš„è¿è§„è¡Œä¸ºï¼Ÿ</strong></h3>
<p>è‹¹æœå¯¹æ”¯ä»˜æœºåˆ¶éå¸¸æ•æ„Ÿã€‚</p>
<h3 data-id="heading-25"><strong>5. æˆªå›¾æ˜¯å¦çœŸå®ï¼Ÿ</strong></h3>
<p>è™šå‡æˆªå›¾æ˜¯å¸¸è§æ‹’å®¡ç†ç”±ã€‚</p>
<p>åªè¦åšåˆ°è¿™äº›ï¼Œå®¡æ ¸é€šå¸¸æ¯”è¾ƒé¡ºåˆ©ã€‚</p>
<hr/>
<h2 data-id="heading-26"><strong>ä¸ƒã€å®¡æ ¸é€šè¿‡åï¼šé€‰æ‹©å‘å¸ƒæ—¶é—´</strong></h2>
<p>è‹¹æœå®¡æ ¸é€šè¿‡åï¼Œä½ å¯ä»¥é€‰æ‹©ï¼š</p>
<ul>
<li><strong>ç«‹å³å‘å¸ƒ</strong></li>
<li><strong>æŒ‡å®šæ—¶é—´å‘å¸ƒ</strong></li>
<li><strong>æ‰‹åŠ¨å‘å¸ƒ</strong></li>
</ul>
<p>è€Œå¦‚æœä½ äº‹å…ˆå¯ç”¨äº† TestFlightï¼Œå¯ä»¥è®© QA æˆ–æµ‹è¯•ç”¨æˆ·æå‰ä½“éªŒã€‚</p>
<hr/>
<h2 data-id="heading-27"><strong>å¦‚ä½•ä¸Šæ¶ App Storeï¼Œå…¶å®æ˜¯â€œæµç¨‹å·¥ç¨‹â€</strong></h2>
<p>ä»æŠ€æœ¯é“¾è·¯æ¥çœ‹ï¼Œä¸Šæ¶æµç¨‹å¯ä»¥å½’çº³ä¸ºä¸‰ç±»å‡†å¤‡ï¼š</p>
<h3 data-id="heading-28"><strong>1. èº«ä»½ç±»å‡†å¤‡ï¼ˆè´¦å· + è¯ä¹¦ï¼‰</strong></h3>
<p>ç¡®ä¿ä½ çš„ App èƒ½è¢«è‹¹æœè¯†åˆ«ã€‚</p>
<h3 data-id="heading-29"><strong>2. åº”ç”¨ç±»å‡†å¤‡ï¼ˆIPA + ç­¾åï¼‰</strong></h3>
<p>ç¡®ä¿åº”ç”¨èƒ½ä¸Šä¼ ã€èƒ½è¿è¡Œã€èƒ½è¢«æµ‹è¯•ã€‚</p>
<h3 data-id="heading-30"><strong>3. å†…å®¹ç±»å‡†å¤‡ï¼ˆæˆªå›¾ + ä¿¡æ¯ + æƒé™ï¼‰</strong></h3>
<p>ç¡®ä¿å®¡æ ¸é¡ºåˆ©é€šè¿‡ã€‚</p>
<p>ä¸€æ—¦ä½ æŠŠè¿™ä¸‰ç±»å†…å®¹ç³»ç»ŸåŒ–ç®¡ç†ï¼Œä¸Šæ¶ App Store å°±ä¸å†æ˜¯ä¸€ä»¶éº»çƒ¦äº‹ï¼Œè€Œæ˜¯ä¸€å¥—å¯ä»¥å¤ç”¨çš„å·¥ç¨‹æµç¨‹ã€‚
ä¸Šæ¶å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.applicationloader.net%2Ftutorial%2Fzh%2F1%2F1.html" target="_blank" title="https://www.applicationloader.net/tutorial/zh/1/1.html" ref="nofollow noopener noreferrer">www.applicationloader.net/tutorial/zhâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RevenueCat æ¥å…¥ Google Play è®¢é˜…å…¨æµç¨‹è¯¦è§£ï¼ˆ2025 æœ€æ–°ï¼‰]]></title>    <link>https://juejin.cn/post/7574382900860633115</link>    <guid>https://juejin.cn/post/7574382900860633115</guid>    <pubDate>2025-11-20T07:10:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574382900860633115" data-draft-id="7574615024292216858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RevenueCat æ¥å…¥ Google Play è®¢é˜…å…¨æµç¨‹è¯¦è§£ï¼ˆ2025 æœ€æ–°ï¼‰"/> <meta itemprop="keywords" content="Android,Flutter,Google"/> <meta itemprop="datePublished" content="2025-11-20T07:10:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HBLOG"/> <meta itemprop="url" content="https://juejin.cn/user/131597124767479"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RevenueCat æ¥å…¥ Google Play è®¢é˜…å…¨æµç¨‹è¯¦è§£ï¼ˆ2025 æœ€æ–°ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597124767479/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HBLOG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:10:15.000Z" title="Thu Nov 20 2025 07:10:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2Fimage-16.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/image-16.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc00ada7291a4b41b7733abd66d1271d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=VEIk8W%2FcimoofjrWPgJqVMJQxnc%3D" alt="" loading="lazy"/></a></p>
<p>åœ¨ç§»åŠ¨åº”ç”¨çš„è®¢é˜…å˜ç°æ–¹æ¡ˆä¸­ï¼Œ<strong>RevenueCat</strong> å·²ç»æˆä¸ºå¼€å‘è€…æœ€å¸¸ç”¨çš„åå°æœåŠ¡ä¹‹ä¸€ã€‚å®ƒå¸®æˆ‘ä»¬è§£å†³äº†ï¼š</p>
<ul>
<li>Google/Apple è®¢é˜…éªŒè¯</li>
<li>ç”¨æˆ·æƒç›Šç»Ÿä¸€ç®¡ç†</li>
<li>Webhook &amp; åˆ†æ</li>
<li>ä»·æ ¼ã€Offerã€è®¢é˜…ç»„ç®¡ç†</li>
<li>è·¨å¹³å°ï¼ˆiOS + Androidï¼‰ç»Ÿä¸€ SDK</li>
</ul>
<p>æœ¬æ–‡å°†ä»é›¶å¼€å§‹ï¼Œå¸¦ä½ å®Œæˆ <strong>Google Play + RevenueCat</strong> çš„å®Œæ•´æ¥å…¥æµç¨‹ï¼Œé¿å…ä½ è¸©å‘ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å‡†å¤‡å·¥ä½œ</h2>
<p>åœ¨å¼€å§‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡ä»¥ä¸‹å†…å®¹ï¼š</p>
<p>é¡¹ç›®</p>
<p>æè¿°</p>
<p>Google Play Console å¼€å‘è€…è´¦å·</p>
<p>å·²å®Œæˆæ³¨å†Œã€ç¼´è´¹</p>
<p>å·²ä¸Šä¼ è‡³å°‘ä¸€ä¸ª buildï¼ˆå†…éƒ¨æµ‹è¯•ä¹Ÿè¡Œï¼‰</p>
<p>æ‰èƒ½å¯ç”¨åº”ç”¨äº§å“åŒº</p>
<p>RevenueCat è´¦å·</p>
<p>å…è´¹ç‰ˆå³å¯</p>
<p>Google Cloud Platform (GCP) è´¦å·</p>
<p>ç”¨äºç”Ÿæˆ Service Account JSON</p>
<p>App å†…å·²å‡†å¤‡è®¢é˜… UI</p>
<p>å¯åç»­æ¥ RevenueCat SDK</p>
<h2 data-id="heading-1">äºŒã€åœ¨ Google Play Console åˆ›å»ºè®¢é˜…äº§å“</h2>
<p>æ³¨æ„ï¼šGoogle Play å¿…é¡»å…ˆä¸Šä¼ ä¸€ä¸ª APK/AAB åï¼Œæ‰ä¼šè§£é”è®¢é˜…é¡µé¢ã€‚</p>
<h3 data-id="heading-2">1. è¿›å…¥è®¢é˜…é¡µé¢</h3>
<p>è·¯å¾„ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">Monetize <span class="hljs-keyword">with</span> play â†’ Products â†’ Subscriptions
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2F248462e4-54a3-4e62-a11a-9589e543a0c3.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/248462e4-54a3-4e62-a11a-9589e543a0c3.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f52ffd5a74b343f1a7aee3675f6c3841~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=iBhm3DooUiF5f5NOVcIuYGZf6MI%3D" alt="" loading="lazy"/></a></p>
<p>å¦‚æœä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œä¼šçœ‹åˆ°ï¼š</p>
<blockquote>
<p>â€œYour app doesnâ€™t have any subscriptions yetâ€</p>
</blockquote>
<p>ç‚¹å‡» <strong>Create subscription</strong>ã€‚</p>
<h3 data-id="heading-3">2. åˆ›å»ºè®¢é˜…äº§å“</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2Fimage-11.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/image-11.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fae4cfaeb44744f6bc38783692b6c04d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=BlPhxxH7w7%2FRfSMu%2FAvIWrv7V3U%3D" alt="" loading="lazy"/></a></p>
<p>æ¨èæ ¼å¼ï¼š</p>
<p>é¡¹ç›®</p>
<p>ç¤ºä¾‹</p>
<p><strong>Product ID</strong></p>
<p>linguadiary_monthly_1</p>
<p><strong>Base Plan ID</strong></p>
<p>monthly</p>
<p><strong>Duration</strong></p>
<p>P1Mï¼ˆä¸€ä¸ªæœˆï¼‰</p>
<p><strong>Price</strong></p>
<p>$4.99ï¼ˆç¤ºä¾‹ï¼‰</p>
<p>å†åˆ›å»ºä¸€ä¸ªå¹´è®¢é˜…ï¼š</p>
<p>é¡¹ç›®</p>
<p>ç¤ºä¾‹</p>
<p><strong>Product ID</strong></p>
<p>linguadiary_yearly_12</p>
<p><strong>Base Plan ID</strong></p>
<p>yearly</p>
<p><strong>Duration</strong></p>
<p>P1Yï¼ˆ1å¹´ï¼‰</p>
<h3 data-id="heading-4">3. æ·»åŠ ç¨åŠ¡ &amp; å›½å®¶åˆ†å‘</h3>
<p>å¿…è¦ï¼Œä¸ç„¶è®¢é˜…æ— æ³•å”®å–ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2Fimage-12.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/image-12.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/520d8ffb521942689efbaf671ad17671~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=0YCehc6dmfj1KxM8%2B31EK%2F13OxQ%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-5">ä¸‰ã€åœ¨ Google Cloud Platform ç”Ÿæˆ Service Account JSONï¼ˆæœ€å…³é”®ï¼‰</h2>
<p>è¿™æ˜¯ RevenueCat ç”¨æ¥éªŒè¯ Google Play è®¢é˜…çš„å…³é”®æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-6">1. è¿›å…¥ GCP æ§åˆ¶å°</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.cloud.google.com%2F" target="_blank" title="https://console.cloud.google.com/" ref="nofollow noopener noreferrer">console.cloud.google.com</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2Fb0dff8b7-23a8-405a-b3ae-0b8edf360fda.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/b0dff8b7-23a8-405a-b3ae-0b8edf360fda.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e1dbbe3df94452bac01b505926462ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=LGCVVMAnoK2vyJ7vRJaaKK3dipk%3D" alt="" loading="lazy"/></a></p>
<h3 data-id="heading-7">2. ç¡®ä¿ä¸ Google Play ç»‘å®šåŒä¸€ä¸ªé¡¹ç›®</h3>
<p>Play Console çš„ <strong>API access</strong> ä¼šå‘Šè¯‰ä½ å½“å‰ä½¿ç”¨çš„ â€œGCP é¡¹ç›®â€ã€‚</p>
<p>è¿›å…¥åŒåé¡¹ç›®å³å¯ã€‚</p>
<h3 data-id="heading-8">3. åˆ›å»º Service Account</h3>
<p>è·¯å¾„ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">IAM <span class="hljs-operator">&amp;</span> Admin â†’ Service Accounts â†’ <span class="hljs-keyword">Create</span> Service Account
</code></pre>
<p>å¡«å†™ï¼š</p>
<ul>
<li>åç§°ï¼šrevenuecat-play-service</li>
<li>Roleï¼ˆæƒé™ï¼‰ï¼šå¿…é¡»å‹¾é€‰ <strong>Service Account Admin</strong> + <strong>Pub/Sub Admin</strong></li>
</ul>
<p>ğŸ‘‰ ç¼ºæƒé™ä¼šå¯¼è‡´é”™è¯¯ï¼š<br/>
<strong>Your Google service account credentials do not have permissions to access the Google Cloud Pub/Sub API</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2Fbd5c3b9f-67fc-43ce-9982-103d422cdf5c.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/bd5c3b9f-67fc-43ce-9982-103d422cdf5c.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dac0f1a0d24f4d60a00d86c7ef1e3371~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=4lZC8CO%2BQ0ws7d8jfDXAzzNYna8%3D" alt="" loading="lazy"/></a></p>
<h3 data-id="heading-9">4. åˆ›å»º JSON å¯†é’¥å¹¶ä¸‹è½½</h3>
<p>åœ¨ Service Account â†’ Keys â†’ Add Key â†’ <strong>JSON</strong></p>
<p>ä¼šä¸‹è½½ä¸€ä¸ªï¼š</p>
<pre><code class="hljs">xxxx-revenuecat.json
</code></pre>
<p>è¿™æ˜¯è¦ä¸Šä¼ åˆ° RevenueCat çš„ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2F5d72fdfa-fa15-4128-9e63-fbd4fca3db56.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/5d72fdfa-fa15-4128-9e63-fbd4fca3db56.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ad0e797fdae43fc81a82a9ef6f72f79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=nQEvijjBnJuGZpNFiNg%2BCJKce8k%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-10">å››ã€åœ¨ Google Play Console æˆæƒè¿™ä¸ª Service Account</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2Fb2262bc3-2b1b-4e24-9930-f89a83a0ef69.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/b2262bc3-2b1b-4e24-9930-f89a83a0ef69.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/941ad2bfff054eeeb8d069cb7201b18c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=wmhRnBL0u8muGYmVqwAEHzzpEy8%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-11">äº”ã€åœ¨ RevenueCat ç»‘å®š Google Play</h2>
<p>è¿›å…¥ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2Fimage-13.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/image-13.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd5ed67bbbfa4f2184e04a9e4c0fde04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=3rxJt4NFI2%2B5u8p13rcogfBfgy4%3D" alt="" loading="lazy"/></a></p>
<pre><code class="hljs">RevenueCat â†’ Projects â†’ Apps â†’ ï¼ˆä½ çš„ Android Appï¼‰
</code></pre>
<p>é€‰æ‹©ï¼š</p>
<h4 data-id="heading-12">1. Add Store â†’ Google Play</h4>
<p>ä¸Šä¼ ä½ åˆšæ‰ä¸‹è½½çš„ JSONã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2Fe2213ad5-6ea8-4e64-8459-07beceff83fa.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/e2213ad5-6ea8-4e64-8459-07beceff83fa.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cca80b67ccc465db014919644bcb424~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=moMYgiSxQdigNV88786c8r%2Blt2A%3D" alt="" loading="lazy"/></a></p>
<h4 data-id="heading-13">2. åœ¨ RevenueCat åˆ›å»ºäº§å“</h4>
<p>è·¯å¾„ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Products â†’ <span class="hljs-keyword">New</span> Product
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2F80912ef5-a22a-4192-b44c-9cd5165ca4d6.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/80912ef5-a22a-4192-b44c-9cd5165ca4d6.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce8e4fa051c24ee4a034ecacee4b6b81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=xaLuQbNWJNxkHFXJSaN2F6%2FommI%3D" alt="" loading="lazy"/></a></p>
<p>å¡«å†™ï¼š</p>
<ul>
<li>Product IDï¼ˆå¿…é¡»ä¸ Google Play å®Œå…¨ä¸€è‡´ï¼‰</li>
<li>Offeringï¼ˆå¯æ·»åŠ  defaultï¼‰</li>
</ul>
<p>RevenueCat ä¼šè‡ªåŠ¨åŒæ­¥ Google Play ä»·æ ¼ã€æ—¶é•¿ã€Offerã€‚</p>
<h2 data-id="heading-14">å…­ã€åœ¨ App å†…å®ç° RevenueCat SDKï¼ˆFlutter ç¤ºä¾‹ï¼‰</h2>
<pre><code class="hljs language-ini" lang="ini">import 'package:purchases_flutter/purchases_flutter.dart'<span class="hljs-comment">;</span>

void main() async {
  await Purchases.configure(PurchasesConfiguration(
    "public_sdk_key_google",
  ))<span class="hljs-comment">;</span>
}

// è·å–è®¢é˜…äº§å“
final <span class="hljs-attr">offerings</span> = await Purchases.get<span class="hljs-literal">Off</span>erings()<span class="hljs-comment">;</span>
final <span class="hljs-attr">package</span> = <span class="hljs-literal">off</span>erings.current?.availablePackages.first<span class="hljs-comment">;</span>

// è´­ä¹°
await Purchases.purchasePackage(package)<span class="hljs-comment">;</span>

// æŸ¥è¯¢æ˜¯å¦æ˜¯ Pro
final <span class="hljs-attr">info</span> = await Purchases.getCustomerInfo()<span class="hljs-comment">;</span>
final <span class="hljs-attr">isPro</span> = info.entitlements.all[<span class="hljs-string">"pro"</span>]?.isActive ?? <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-15">ä¸ƒã€å¸¸è§é—®é¢˜ï¼ˆè¸©å‘å¤§å…¨ï¼‰</h2>
<h3 data-id="heading-16">1. RevenueCat æŠ¥é”™ï¼šCONFIGURATION_ERROR</h3>
<p>åŸå› ï¼š</p>
<ul>
<li>Google Play æœ¬åœ°åŒ–è¯­è¨€æ²¡å¡«</li>
<li>Base Plan æ²¡å¯ç”¨</li>
<li>æœªå‘å¸ƒ</li>
<li>Service Account æƒé™ä¸å¤Ÿ</li>
<li>Google Play æœªå¯ç”¨ API access æˆæƒ</li>
<li>Google Cloud Pub/Sub æœªå¼€</li>
</ul>
<h3 data-id="heading-17">2. çœ‹åˆ° These products are not found</h3>
<p>åŸå› ï¼š</p>
<ul>
<li>Product ID ä¸ä¸€è‡´ï¼ˆå¤§å°å†™ä¸ä¸€è‡´éƒ½ä¸è¡Œï¼‰</li>
<li>Google Play æœªå‘å¸ƒï¼ˆDraft çŠ¶æ€ï¼‰</li>
<li>æœªå‹¾é€‰å›½å®¶/åœ°åŒº</li>
<li>Base Plan æ²¡å¯ç”¨ï¼ˆmust be Activeï¼‰</li>
</ul>
<p>æ‰€æœ‰ä¸œè¥¿éƒ½å‡†å¤‡å¥½äº†ï¼Œç»“æœè¿˜æ˜¯æŸ¥ä¸å‡ºæ¥äº§å“ï¼Œä¸€å®šè¿›å»è¿™ä¸ªèœå•å¼€å¯bill</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F11%2Fimage-14.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2025/11/image-14.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37d2ebc013ab42ed8165437eee565a90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227415&amp;x-signature=70XCAIj8EpfZGkJiJT%2F4H6ouotA%3D" alt="" loading="lazy"/></a></p>
<h3 data-id="heading-18">3. SDK ä¸€ç›´åŠ è½½ä¸åˆ° Offerings</h3>
<p>åŸå› ï¼š</p>
<ul>
<li>RevenueCat æœªæˆåŠŸè¯»å– Google Play</li>
<li>æœåŠ¡è´¦å· JSON æƒé™ä¸è¶³</li>
<li>App æ²¡æœ‰å¼€ç½‘ç»œ</li>
</ul>
<h2 data-id="heading-19">å…«ã€æµ‹è¯•è®¢é˜…ï¼ˆå…è´¹ï¼‰</h2>
<ol>
<li>åœ¨ Google Play â†’ License Testing æ·»åŠ  Gmail æµ‹è¯•è´¦æˆ·</li>
<li>åˆ æ‰ app</li>
<li>ç™»å½•æµ‹è¯• Gmail</li>
<li>ä» Closed Testing ä¸‹è½½ä½  app</li>
<li>è´­ä¹°ä¼šæ˜¾ç¤ºä»·æ ¼ 0 æˆ– $0.01</li>
</ol>
<h2 data-id="heading-20">ä¹ã€å‘å¸ƒæ­£å¼ç‰ˆæœ¬</h2>
<p>å½“è®¢é˜…æ­£å¸¸å·¥ä½œ â†’<br/>
å‘å¸ƒ app â†’<br/>
RevenueCat è´Ÿè´£è‡ªåŠ¨éªŒè¯æ‰€æœ‰ä»˜æ¬¾ â†’<br/>
ä½ åªä¸“æ³¨å±•ç¤ºè®¢é˜… UI å’Œæƒç›Šå³å¯ã€‚</p>
<h2 data-id="heading-21">ç»“è¯­</h2>
<p>æ¥å…¥ Google Play çš„è®¢é˜…æœ€å®¹æ˜“è¸©å‘åœ¨ï¼š</p>
<ul>
<li>API access æƒé™ä¸å®Œæ•´</li>
<li>Service Account JSON æƒé™ç¼ºå¤±</li>
<li>Google Play æœ¬åœ°åŒ–æ²¡å¡«</li>
<li>Base plan æœªæ¿€æ´»</li>
<li>RevenueCat æœªæ­£ç¡®ç»‘å®šåº”ç”¨</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScript é«˜çº§ç‰¹æ€§è¯¦è§£]]></title>    <link>https://juejin.cn/post/7574530224852713478</link>    <guid>https://juejin.cn/post/7574530224852713478</guid>    <pubDate>2025-11-20T06:44:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574530224852713478" data-draft-id="7574530224852697094" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScript é«˜çº§ç‰¹æ€§è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript"/> <meta itemprop="datePublished" content="2025-11-20T06:44:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°å‰ç«¯_æˆ‘è‡ªåšå¼º"/> <meta itemprop="url" content="https://juejin.cn/user/2335811609826423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScript é«˜çº§ç‰¹æ€§è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2335811609826423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°å‰ç«¯_æˆ‘è‡ªåšå¼º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:44:25.000Z" title="Thu Nov 20 2025 06:44:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TypeScript é«˜çº§ç‰¹æ€§è¯¦è§£</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œä¸º JavaScript æ·»åŠ äº†é™æ€ç±»å‹æ£€æŸ¥å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹çš„èƒ½åŠ›ã€‚éšç€å‰ç«¯åº”ç”¨æ—¥ç›Šå¤æ‚ï¼ŒTypeScript çš„é«˜çº§ç‰¹æ€§å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ TypeScript çš„å‡ ä¸ªæ ¸å¿ƒé«˜çº§ç‰¹æ€§ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨è¿™äº›å¼ºå¤§åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€æ³›å‹ç¼–ç¨‹(Generic Programming)</h3>
<h4 data-id="heading-3">1.1 æ³›å‹åŸºç¡€æ¦‚å¿µ</h4>
<p>æ³›å‹(Generic)æ˜¯ TypeScript ä¸­æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®è€Œä¸ä¸¢å¤±ç±»å‹å®‰å…¨æ€§ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŸºç¡€æ³›å‹å‡½æ•°</span>
<span class="hljs-keyword">function</span> identity&lt;T&gt;(<span class="hljs-attr">arg</span>: T): T {
    <span class="hljs-keyword">return</span> arg;
}

<span class="hljs-comment">// ä½¿ç”¨æ³›å‹å‡½æ•°</span>
<span class="hljs-keyword">let</span> output1 = identity&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"myString"</span>);
<span class="hljs-keyword">let</span> output2 = identity&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">42</span>);
<span class="hljs-keyword">let</span> output3 = <span class="hljs-title function_">identity</span>(<span class="hljs-string">"myString"</span>); <span class="hljs-comment">// ç±»å‹æ¨æ–­</span>
</code></pre>
<h4 data-id="heading-4">1.2 æ³›å‹çº¦æŸ</h4>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æ³›å‹å‚æ•°æ–½åŠ ä¸€å®šçš„çº¦æŸï¼Œç¡®ä¿ä¼ å…¥çš„ç±»å‹å…·æœ‰æŸäº›ç‰¹å®šçš„å±æ€§æˆ–æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰çº¦æŸæ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Lengthwise</span> {
    <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// ä½¿ç”¨ extends å…³é”®å­—æ·»åŠ çº¦æŸ</span>
<span class="hljs-keyword">function</span> loggingIdentity&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Lengthwise</span>&gt;(<span class="hljs-attr">arg</span>: T): T {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arg.<span class="hljs-property">length</span>); <span class="hljs-comment">// ç°åœ¨æˆ‘ä»¬çŸ¥é“å®ƒæœ‰ .length å±æ€§</span>
    <span class="hljs-keyword">return</span> arg;
}

<span class="hljs-title function_">loggingIdentity</span>(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// æ­£ç¡®ï¼Œå­—ç¬¦ä¸²æœ‰ length å±æ€§</span>
<span class="hljs-title function_">loggingIdentity</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// æ­£ç¡®ï¼Œæ•°ç»„æœ‰ length å±æ€§</span>
<span class="hljs-comment">// loggingIdentity(3); // é”™è¯¯ï¼Œæ•°å­—æ²¡æœ‰ length å±æ€§</span>
</code></pre>
<h4 data-id="heading-5">1.3 æ³›å‹ç±»</h4>
<p>æ³›å‹ä¹Ÿå¯ä»¥åº”ç”¨äºç±»ï¼Œä½¿ç±»èƒ½å¤Ÿå¤„ç†å¤šç§ç±»å‹çš„å€¼ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericNumber</span>&lt;T&gt; {
    <span class="hljs-attr">zeroValue</span>: T;
    <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">x: T, y: T</span>) =&gt;</span> T;
    
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">zeroValue: T, addFn: (x: T, y: T) =&gt; T</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">zeroValue</span> = zeroValue;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">add</span> = addFn;
    }
}

<span class="hljs-keyword">let</span> myGenericNumber = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericNumber</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>, <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> x + y);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myGenericNumber.<span class="hljs-title function_">add</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>)); <span class="hljs-comment">// 15</span>

<span class="hljs-keyword">let</span> stringNumeric = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericNumber</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">""</span>, <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> x + y);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stringNumeric.<span class="hljs-title function_">add</span>(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>)); <span class="hljs-comment">// "helloworld"</span>
</code></pre>
<h4 data-id="heading-6">1.4 æ³›å‹æ¥å£</h4>
<p>æ³›å‹æ¥å£å¯ä»¥æè¿°é‚£äº›è·¨è¶Šå¤šç§ç±»å‹çš„é€šç”¨è°ƒç”¨ç­¾åã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">GenericIdentityFn</span>&lt;T&gt; {
    (<span class="hljs-attr">arg</span>: T): T;
}

<span class="hljs-keyword">function</span> identity&lt;T&gt;(<span class="hljs-attr">arg</span>: T): T {
    <span class="hljs-keyword">return</span> arg;
}

<span class="hljs-keyword">let</span> <span class="hljs-attr">myIdentity</span>: <span class="hljs-title class_">GenericIdentityFn</span>&lt;<span class="hljs-built_in">number</span>&gt; = identity;
</code></pre>
<h4 data-id="heading-7">1.5 å¤šä¸ªæ³›å‹å‚æ•°</h4>
<p>å‡½æ•°å’Œç±»å¯ä»¥æ¥å—å¤šä¸ªæ³›å‹å‚æ•°ï¼Œæä¾›æ›´å¤šçµæ´»æ€§ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> swap&lt;T, U&gt;(<span class="hljs-attr">tuple</span>: [T, U]): [U, T] {
    <span class="hljs-keyword">return</span> [tuple[<span class="hljs-number">1</span>], tuple[<span class="hljs-number">0</span>]];
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">swap</span>([<span class="hljs-string">"hello"</span>, <span class="hljs-number">123</span>])); <span class="hljs-comment">// [123, "hello"]</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">KeyValuePair</span>&lt;<span class="hljs-title class_">TKey</span>, <span class="hljs-title class_">TValue</span>&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">key</span>: <span class="hljs-title class_">TKey</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-attr">value</span>: <span class="hljs-title class_">TValue</span>;
    
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">key: TKey, value: TValue</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = key;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
    }
    
    <span class="hljs-title function_">getKey</span>(): <span class="hljs-title class_">TKey</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>;
    }
    
    <span class="hljs-title function_">getValue</span>(): <span class="hljs-title class_">TValue</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
    }
}
</code></pre>
<h4 data-id="heading-8">1.6 æ³›å‹å‚æ•°é»˜è®¤å€¼</h4>
<p>TypeScript å…è®¸ä¸ºæ³›å‹å‚æ•°æŒ‡å®šé»˜è®¤ç±»å‹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultGeneric</span>&lt;T = <span class="hljs-built_in">string</span>&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">value</span>: T;
    
    <span class="hljs-title function_">setValue</span>(<span class="hljs-params">value: T</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
    }
    
    <span class="hljs-title function_">getValue</span>(): T {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
    }
}

<span class="hljs-keyword">let</span> defaultGeneric = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultGeneric</span>(); <span class="hljs-comment">// T é»˜è®¤ä¸º string</span>
<span class="hljs-keyword">let</span> explicitGeneric = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultGeneric</span>&lt;<span class="hljs-built_in">number</span>&gt;(); <span class="hljs-comment">// æ˜¾å¼æŒ‡å®š T ä¸º number</span>
</code></pre>
<h4 data-id="heading-9">1.7 æ³›å‹æ¡ä»¶çº¦æŸ</h4>
<p>ç»“åˆæ¡ä»¶ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ›´åŠ çµæ´»çš„æ³›å‹çº¦æŸã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åªæœ‰å½“ T æ˜¯ string æˆ– number æ—¶æ‰å…è®¸</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">StringOrNumberOnly</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> ? T : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">function</span> processValue&lt;T&gt;(<span class="hljs-attr">value</span>: <span class="hljs-title class_">StringOrNumberOnly</span>&lt;T&gt;): <span class="hljs-title class_">StringOrNumberOnly</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> value;
}

<span class="hljs-title function_">processValue</span>(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// OK</span>
<span class="hljs-title function_">processValue</span>(<span class="hljs-number">42</span>); <span class="hljs-comment">// OK</span>
<span class="hljs-comment">// processValue(true); // Error: Type 'boolean' does not satisfy the constraint 'never'</span>
</code></pre>
<h3 data-id="heading-10">äºŒã€æ¡ä»¶ç±»å‹å’Œæ˜ å°„ç±»å‹</h3>
<h4 data-id="heading-11">2.1 æ¡ä»¶ç±»å‹åŸºç¡€</h4>
<p>æ¡ä»¶ç±»å‹å…è®¸æˆ‘ä»¬åœ¨ç±»å‹å±‚é¢è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œè¿™æ˜¯ TypeScript ç±»å‹ç³»ç»Ÿçš„å¼ºå¤§åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŸºæœ¬æ¡ä»¶ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">IsString</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> A = <span class="hljs-title class_">IsString</span>&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> B = <span class="hljs-title class_">IsString</span>&lt;<span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// false</span>

<span class="hljs-comment">// æ›´å®ç”¨çš„ä¾‹å­</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">MessageOf</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> { <span class="hljs-attr">message</span>: <span class="hljs-built_in">unknown</span> } ? T[<span class="hljs-string">'message'</span>] : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Email</span> {
    <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Dog</span> {
    <span class="hljs-title function_">bark</span>(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">EmailMessageContents</span> = <span class="hljs-title class_">MessageOf</span>&lt;<span class="hljs-title class_">Email</span>&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">DogMessageContents</span> = <span class="hljs-title class_">MessageOf</span>&lt;<span class="hljs-title class_">Dog</span>&gt;; <span class="hljs-comment">// never</span>
</code></pre>
<h4 data-id="heading-12">2.2 åˆ†é…æ¡ä»¶ç±»å‹</h4>
<p>å½“æ¡ä»¶ç±»å‹çš„æ£€æŸ¥ç±»å‹æ˜¯è£¸ç±»å‹å‚æ•°(naked type parameter)æ—¶ï¼Œå®ƒä¼šåœ¨è”åˆç±»å‹ä¸Šè¿›è¡Œåˆ†é…ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ToArray</span>&lt;<span class="hljs-title class_">Type</span>&gt; = <span class="hljs-title class_">Type</span> <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> ? <span class="hljs-title class_">Type</span>[] : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">StrArrOrNumArr</span> = <span class="hljs-title class_">ToArray</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// string[] | number[]</span>

<span class="hljs-comment">// å¦‚æœæƒ³é˜»æ­¢è¿™ç§è¡Œä¸ºï¼Œå¯ä»¥ç”¨æ–¹æ‹¬å·åŒ…è£¹ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ToArrayNonDist</span>&lt;<span class="hljs-title class_">Type</span>&gt; = [<span class="hljs-title class_">Type</span>] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">any</span>] ? <span class="hljs-title class_">Type</span>[] : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">StrArrOrNumArr2</span> = <span class="hljs-title class_">ToArrayNonDist</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// (string | number)[]</span>
</code></pre>
<h4 data-id="heading-13">2.3 infer å…³é”®å­—</h4>
<p>infer å…³é”®å­—å…è®¸æˆ‘ä»¬åœ¨æ¡ä»¶ç±»å‹ä¸­æ¨æ–­ç±»å‹å˜é‡ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¨æ–­å‡½æ•°è¿”å›ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ReturnType</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; infer R ? R : <span class="hljs-built_in">any</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Func</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-title class_">Func</span>&gt;; <span class="hljs-comment">// number</span>

<span class="hljs-comment">// æ¨æ–­æ•°ç»„å…ƒç´ ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ElementType</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> (infer U)[] ? U : T;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Arr</span> = <span class="hljs-title class_">ElementType</span>&lt;<span class="hljs-built_in">string</span>[]&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NotArr</span> = <span class="hljs-title class_">ElementType</span>&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// string</span>

<span class="hljs-comment">// æ¨æ–­ Promise çš„å€¼ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UnwrapPromise</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer U&gt; ? U : T;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">PromiseValue</span> = <span class="hljs-title class_">UnwrapPromise</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;; <span class="hljs-comment">// string</span>
</code></pre>
<h4 data-id="heading-14">2.4 é¢„å®šä¹‰çš„æ¡ä»¶ç±»å‹</h4>
<p>TypeScript å†…ç½®äº†ä¸€äº›æœ‰ç”¨çš„æ¡ä»¶ç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Exclude&lt;UnionType, ExcludedMembers&gt; - ä»è”åˆç±»å‹ä¸­æ’é™¤æŸäº›æˆå‘˜</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T0</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-string">"a"</span> | <span class="hljs-string">"b"</span> | <span class="hljs-string">"c"</span>, <span class="hljs-string">"a"</span>&gt;; <span class="hljs-comment">// "b" | "c"</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-string">"a"</span> | <span class="hljs-string">"b"</span> | <span class="hljs-string">"c"</span>, <span class="hljs-string">"a"</span> | <span class="hljs-string">"b"</span>&gt;; <span class="hljs-comment">// "c"</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | (<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>), <span class="hljs-title class_">Function</span>&gt;; <span class="hljs-comment">// string | number</span>

<span class="hljs-comment">// Extract&lt;Type, Union&gt; - ä»è”åˆç±»å‹ä¸­æå–æŸäº›æˆå‘˜</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-string">"a"</span> | <span class="hljs-string">"b"</span> | <span class="hljs-string">"c"</span>, <span class="hljs-string">"a"</span> | <span class="hljs-string">"f"</span>&gt;; <span class="hljs-comment">// "a"</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T4</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span>, <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// number | boolean</span>

<span class="hljs-comment">// NonNullable&lt;Type&gt; - ä»ç±»å‹ä¸­æ’é™¤ null å’Œ undefined</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T5</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>&gt;; <span class="hljs-comment">// string | number</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T6</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-built_in">string</span>[] | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>&gt;; <span class="hljs-comment">// string[]</span>

<span class="hljs-comment">// Parameters&lt;Type&gt; - è·å–å‡½æ•°å‚æ•°ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T7</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// []</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T8</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-function">(<span class="hljs-params">s: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;; <span class="hljs-comment">// [string]</span>

<span class="hljs-comment">// ConstructorParameters&lt;Type&gt; - è·å–æ„é€ å‡½æ•°å‚æ•°ç±»å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">public</span> age: <span class="hljs-built_in">number</span></span>) {}
}

<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T9</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Person</span>&gt;; <span class="hljs-comment">// [string, number]</span>

<span class="hljs-comment">// InstanceType&lt;Type&gt; - è·å–æ„é€ å‡½æ•°å®ä¾‹ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T10</span> = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Person</span>&gt;; <span class="hljs-comment">// Person</span>

<span class="hljs-comment">// Required&lt;Type&gt; - å°†æ‰€æœ‰å±æ€§è®¾ä¸ºå¿…éœ€</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span> {
    a?: <span class="hljs-built_in">number</span>;
    b?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T11</span> = <span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">Props</span>&gt;; <span class="hljs-comment">// { a: number; b: string; }</span>

<span class="hljs-comment">// Partial&lt;Type&gt; - å°†æ‰€æœ‰å±æ€§è®¾ä¸ºå¯é€‰</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T12</span> = <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">Props</span>&gt;; <span class="hljs-comment">// { a?: number; b?: string; }</span>

<span class="hljs-comment">// Readonly&lt;Type&gt; - å°†æ‰€æœ‰å±æ€§è®¾ä¸ºåªè¯»</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T13</span> = <span class="hljs-title class_">Readonly</span>&lt;<span class="hljs-title class_">Props</span>&gt;; <span class="hljs-comment">// { readonly a?: number; readonly b?: string; }</span>

<span class="hljs-comment">// Pick&lt;Type, Keys&gt; - ä»ç±»å‹ä¸­é€‰æ‹©ç‰¹å®šå±æ€§</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T14</span> = <span class="hljs-title class_">Pick</span>&lt;<span class="hljs-title class_">Props</span>, <span class="hljs-string">"a"</span>&gt;; <span class="hljs-comment">// { a?: number; }</span>

<span class="hljs-comment">// Omit&lt;Type, Keys&gt; - ä»ç±»å‹ä¸­çœç•¥ç‰¹å®šå±æ€§</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T15</span> = <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">Props</span>, <span class="hljs-string">"a"</span>&gt;; <span class="hljs-comment">// { b?: string; }</span>

<span class="hljs-comment">// Record&lt;Keys, Type&gt; - åˆ›å»ºå±æ€§ä¸º Keysï¼Œå€¼ä¸º Type çš„å¯¹è±¡ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T16</span> = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-string">'x'</span> | <span class="hljs-string">'y'</span>, <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// { x: number; y: number; }</span>
</code></pre>
<h4 data-id="heading-15">2.5 æ˜ å°„ç±»å‹</h4>
<p>æ˜ å°„ç±»å‹æ˜¯ä¸€ç§ä»æ—§ç±»å‹åˆ›å»ºæ–°ç±»å‹çš„æ³›å‹ç±»å‹ï¼Œå®ƒä½¿ç”¨ PropertyKey çš„è”åˆæ¥éå†é”®ä»¥åˆ›å»ºç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŸºæœ¬æ˜ å°„ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">OptionsFlags</span>&lt;<span class="hljs-title class_">Type</span>&gt; = {
    [<span class="hljs-title class_">Property</span> <span class="hljs-keyword">in</span> keyof <span class="hljs-title class_">Type</span>]: <span class="hljs-built_in">boolean</span>;
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">FeatureFlags</span> = {
    <span class="hljs-attr">darkMode</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
    <span class="hljs-attr">newUserProfile</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">FeatureOptions</span> = <span class="hljs-title class_">OptionsFlags</span>&lt;<span class="hljs-title class_">FeatureFlags</span>&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   darkMode: boolean;</span>
<span class="hljs-comment">//   newUserProfile: boolean;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// ä½¿ç”¨ readonly å’Œ ? ä¿®é¥°ç¬¦</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">CreateMutable</span>&lt;<span class="hljs-title class_">Type</span>&gt; = {
    -<span class="hljs-keyword">readonly</span> [<span class="hljs-title class_">Property</span> <span class="hljs-keyword">in</span> keyof <span class="hljs-title class_">Type</span>]: <span class="hljs-title class_">Type</span>[<span class="hljs-title class_">Property</span>];
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">LockedAccount</span> = {
    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">UnlockedAccount</span> = <span class="hljs-title class_">CreateMutable</span>&lt;<span class="hljs-title class_">LockedAccount</span>&gt;;
<span class="hljs-comment">// { id: string; name: string; }</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Concrete</span>&lt;<span class="hljs-title class_">Type</span>&gt; = {
    [<span class="hljs-title class_">Property</span> <span class="hljs-keyword">in</span> keyof <span class="hljs-title class_">Type</span>]-?: <span class="hljs-title class_">Type</span>[<span class="hljs-title class_">Property</span>];
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">MaybeUser</span> = {
    <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
    name?: <span class="hljs-built_in">string</span>;
    age?: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">User</span> = <span class="hljs-title class_">Concrete</span>&lt;<span class="hljs-title class_">MaybeUser</span>&gt;;
<span class="hljs-comment">// { id: string; name: string; age: number; }</span>
</code></pre>
<h4 data-id="heading-16">2.6 Key Remapping via as</h4>
<p>TypeScript 4.1 å¼•å…¥äº† key remappingï¼Œå…è®¸æˆ‘ä»¬åœ¨æ˜ å°„ç±»å‹ä¸­è½¬æ¢é”®åï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Getters</span>&lt;<span class="hljs-title class_">Type</span>&gt; = {
    [<span class="hljs-title class_">Property</span> <span class="hljs-keyword">in</span> keyof <span class="hljs-title class_">Type</span> <span class="hljs-keyword">as</span> <span class="hljs-string">`get<span class="hljs-subst">${Capitalize&lt;<span class="hljs-built_in">string</span> &amp; Property&gt;}</span>`</span>]: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Type</span>[<span class="hljs-title class_">Property</span>]
};

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">location</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">LazyPerson</span> = <span class="hljs-title class_">Getters</span>&lt;<span class="hljs-title class_">Person</span>&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   getName: () =&gt; string;</span>
<span class="hljs-comment">//   getAge: () =&gt; number;</span>
<span class="hljs-comment">//   getLocation: () =&gt; string;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// é€šè¿‡æ¨¡æ¿å­—é¢é‡ç±»å‹è¿‡æ»¤é”®</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">RemoveKindField</span>&lt;<span class="hljs-title class_">Type</span>&gt; = {
    [<span class="hljs-title class_">Property</span> <span class="hljs-keyword">in</span> keyof <span class="hljs-title class_">Type</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-title class_">Property</span>, <span class="hljs-string">"kind"</span>&gt;]: <span class="hljs-title class_">Type</span>[<span class="hljs-title class_">Property</span>]
};

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Circle</span> {
    <span class="hljs-attr">kind</span>: <span class="hljs-string">"circle"</span>;
    <span class="hljs-attr">radius</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">KindlessCircle</span> = <span class="hljs-title class_">RemoveKindField</span>&lt;<span class="hljs-title class_">Circle</span>&gt;;
<span class="hljs-comment">// { radius: number; }</span>
</code></pre>
<h4 data-id="heading-17">2.7 æ·±å±‚æ˜ å°„ç±»å‹</h4>
<p>åˆ›å»ºæ·±å±‚æ˜ å°„ç±»å‹æ¥å¤„ç†åµŒå¥—å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ·±åº¦ Partial</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">DeepPartial</span>&lt;T&gt; = {
    [P <span class="hljs-keyword">in</span> keyof T]?: T[P] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> ? <span class="hljs-title class_">DeepPartial</span>&lt;T[P]&gt; : T[P];
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">NestedObject</span> = {
    <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">b</span>: {
            <span class="hljs-attr">c</span>: <span class="hljs-built_in">number</span>;
        };
        <span class="hljs-attr">d</span>: <span class="hljs-built_in">string</span>;
    };
    <span class="hljs-attr">e</span>: <span class="hljs-built_in">boolean</span>;
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">PartialNested</span> = <span class="hljs-title class_">DeepPartial</span>&lt;<span class="hljs-title class_">NestedObject</span>&gt;;
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   a?: {</span>
<span class="hljs-comment">//     b?: {</span>
<span class="hljs-comment">//       c?: number;</span>
<span class="hljs-comment">//     };</span>
<span class="hljs-comment">//     d?: string;</span>
<span class="hljs-comment">//   };</span>
<span class="hljs-comment">//   e?: boolean;</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// æ·±åº¦ Required</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">DeepRequired</span>&lt;T&gt; = {
    [P <span class="hljs-keyword">in</span> keyof T]-?: T[P] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> ? <span class="hljs-title class_">DeepRequired</span>&lt;T[P]&gt; : T[P];
};
</code></pre>
<h3 data-id="heading-18">ä¸‰ã€è£…é¥°å™¨æ¨¡å¼(Decorator Pattern)</h3>
<h4 data-id="heading-19">3.1 è£…é¥°å™¨åŸºç¡€</h4>
<p>è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå¯ä»¥è¢«é™„åŠ åˆ°ç±»å£°æ˜ã€æ–¹æ³•ã€è®¿é—®ç¬¦ã€å±æ€§æˆ–å‚æ•°ä¸Šã€‚è£…é¥°å™¨ä½¿ç”¨ @expression å½¢å¼ï¼Œexpression æ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ã€‚</p>
<p>æ³¨æ„ï¼šè£…é¥°å™¨ç›®å‰è¿˜æ˜¯å®éªŒæ€§ç‰¹æ€§ï¼Œéœ€è¦åœ¨ tsconfig.json ä¸­å¯ç”¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"experimentalDecorators"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"emitDecoratorMetadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-20">3.2 ç±»è£…é¥°å™¨</h4>
<p>ç±»è£…é¥°å™¨åº”ç”¨äºç±»æ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ã€ä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç±»è£…é¥°å™¨å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sealed</span>(<span class="hljs-params">constructor: <span class="hljs-built_in">Function</span></span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">seal</span>(constructor);
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">seal</span>(constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
}

<span class="hljs-meta">@sealed</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter</span> {
    <span class="hljs-attr">greeting</span>: <span class="hljs-built_in">string</span>;
    
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span> = message;
    }
    
    <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span>;
    }
}

<span class="hljs-comment">// æ›¿æ¢ç±»æ„é€ å‡½æ•°çš„è£…é¥°å™¨</span>
<span class="hljs-keyword">function</span> classDecorator&lt;T <span class="hljs-keyword">extends</span> {<span class="hljs-title function_">new</span>(...<span class="hljs-attr">args</span>:<span class="hljs-built_in">any</span>[]):{}}&gt;(<span class="hljs-attr">constructor</span>:T) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> constructor {
        newProperty = <span class="hljs-string">"new property"</span>;
        hello = <span class="hljs-string">"override"</span>;
    }
}

<span class="hljs-meta">@classDecorator</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter2</span> {
    property = <span class="hljs-string">"property"</span>;
    <span class="hljs-attr">hello</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">m: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hello</span> = m;
    }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Greeter2</span>(<span class="hljs-string">"world"</span>));
</code></pre>
<h4 data-id="heading-21">3.3 æ–¹æ³•è£…é¥°å™¨</h4>
<p>æ–¹æ³•è£…é¥°å™¨åº”ç”¨äºæ–¹æ³•çš„å±æ€§æè¿°ç¬¦ï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ã€ä¿®æ”¹æˆ–æ›¿æ¢æ–¹æ³•å®šä¹‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">enumerable</span>(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">target: <span class="hljs-built_in">any</span>, propertyKey: <span class="hljs-built_in">string</span>, descriptor: PropertyDescriptor</span>) {
        descriptor.<span class="hljs-property">enumerable</span> = value;
    };
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter3</span> {
    <span class="hljs-attr">greeting</span>: <span class="hljs-built_in">string</span>;
    
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span> = message;
    }
    
    <span class="hljs-meta">@enumerable</span>(<span class="hljs-literal">false</span>)
    <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span>;
    }
}
</code></pre>
<h4 data-id="heading-22">3.4 è®¿é—®å™¨è£…é¥°å™¨</h4>
<p>è®¿é—®å™¨è£…é¥°å™¨åº”ç”¨äºè®¿é—®å™¨çš„å±æ€§æè¿°ç¬¦ï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ã€ä¿®æ”¹æˆ–æ›¿æ¢è®¿é—®å™¨çš„å®šä¹‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">configurable</span>(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">target: <span class="hljs-built_in">any</span>, propertyKey: <span class="hljs-built_in">string</span>, descriptor: PropertyDescriptor</span>) {
        descriptor.<span class="hljs-property">configurable</span> = value;
    };
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">_x</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-attr">_y</span>: <span class="hljs-built_in">number</span>;
    
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = x;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = y;
    }
    
    <span class="hljs-meta">@configurable</span>(<span class="hljs-literal">false</span>)
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">x</span>() { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span>; }
    
    <span class="hljs-meta">@configurable</span>(<span class="hljs-literal">false</span>)
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">y</span>() { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span>; }
}
</code></pre>
<h4 data-id="heading-23">3.5 å±æ€§è£…é¥°å™¨</h4>
<p>å±æ€§è£…é¥°å™¨åº”ç”¨äºç±»çš„å±æ€§å£°æ˜ï¼Œä¸èƒ½ç”¨æ¥æ”¹å˜ä¸€ä¸ªå±æ€§çš„å£°æ˜æˆ–å®ç°ï¼Œä½†å¯ä»¥ç”¨æ¥ç›‘è§†ä¸€ä¸ªå±æ€§åœ¨ç±»ä¸­çš„è®¿é—®ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">format</span>(<span class="hljs-params">formatString: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">target: <span class="hljs-built_in">any</span>, propertyKey: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-comment">// å­˜å‚¨æ ¼å¼ä¿¡æ¯ï¼Œå¯ä»¥åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨</span>
        <span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>;
        
        <span class="hljs-keyword">const</span> <span class="hljs-attr">descriptor</span>: <span class="hljs-title class_">PropertyDescriptor</span> = {
            <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
                <span class="hljs-keyword">return</span> value;
            },
            <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">newVal</span>) {
                value = formatString.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'{0}'</span>, newVal);
            },
            <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>
        };
        
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, propertyKey, descriptor);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter4</span> {
    <span class="hljs-meta">@format</span>(<span class="hljs-string">"Hello, {0}"</span>)
    <span class="hljs-attr">greeting</span>: <span class="hljs-built_in">string</span>;
    
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span> = message;
    }
}

<span class="hljs-keyword">const</span> greeter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Greeter4</span>(<span class="hljs-string">"World"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(greeter.<span class="hljs-property">greeting</span>); <span class="hljs-comment">// "Hello, World"</span>
</code></pre>
<h4 data-id="heading-24">3.6 å‚æ•°è£…é¥°å™¨</h4>
<p>å‚æ•°è£…é¥°å™¨åº”ç”¨äºç±»æ„é€ å‡½æ•°æˆ–æ–¹æ³•çš„å‚æ•°ï¼Œå‚æ•°è£…é¥°å™¨åªèƒ½ç”¨æ¥ç›‘è§†ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯å¦è¢«ä¼ å…¥ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">required</span>(<span class="hljs-params">target: <span class="hljs-built_in">Object</span>, propertyKey: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">symbol</span>, parameterIndex: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-comment">// å¯ä»¥è®°å½•å“ªäº›å‚æ•°æ˜¯å¿…éœ€çš„</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Parameter <span class="hljs-subst">${parameterIndex}</span> is required for method <span class="hljs-subst">${propertyKey.toString()}</span>`</span>);
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter5</span> {
    <span class="hljs-attr">greeting</span>: <span class="hljs-built_in">string</span>;
    
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span> = message;
    }
    
    <span class="hljs-title function_">greet</span>(<span class="hljs-params"><span class="hljs-meta">@required</span> name: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello "</span> + name + <span class="hljs-string">", "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span>;
    }
}
</code></pre>
<h4 data-id="heading-25">3.7 è£…é¥°å™¨å·¥å‚</h4>
<p>è£…é¥°å™¨å·¥å‚æ˜¯å¯ä»¥ä¼ å‚çš„è£…é¥°å™¨ï¼Œè¿”å›ä¸€ä¸ªè£…é¥°å™¨å‡½æ•°ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">level: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">target: <span class="hljs-built_in">any</span>, propertyName: <span class="hljs-built_in">string</span>, descriptor: PropertyDescriptor</span>) {
        <span class="hljs-keyword">const</span> method = descriptor.<span class="hljs-property">value</span>;
        
        descriptor.<span class="hljs-property">value</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${level}</span>] Calling <span class="hljs-subst">${propertyName}</span> with`</span>, args);
            <span class="hljs-keyword">const</span> result = method.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${level}</span>] Method <span class="hljs-subst">${propertyName}</span> returned`</span>, result);
            <span class="hljs-keyword">return</span> result;
        }
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-meta">@log</span>(<span class="hljs-string">'DEBUG'</span>)
    <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) {
        <span class="hljs-keyword">return</span> a + b;
    }
    
    <span class="hljs-meta">@log</span>(<span class="hljs-string">'INFO'</span>)
    <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) {
        <span class="hljs-keyword">return</span> a * b;
    }
}

<span class="hljs-keyword">const</span> calc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>();
calc.<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// [DEBUG] Calling add with [2, 3]</span>
                <span class="hljs-comment">// [DEBUG] Method add returned 5</span>
</code></pre>
<h4 data-id="heading-26">3.8 å¤åˆè£…é¥°å™¨</h4>
<p>å¤šä¸ªè£…é¥°å™¨å¯ä»¥åº”ç”¨åœ¨ä¸€ä¸ªå£°æ˜ä¸Šï¼Œå®ƒä»¬ä¼šæŒ‰ç…§ç‰¹å®šé¡ºåºæ±‚å€¼å’Œåº”ç”¨ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">first</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"first(): factory evaluated"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">target: <span class="hljs-built_in">any</span>, propertyKey: <span class="hljs-built_in">string</span>, descriptor: PropertyDescriptor</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"first(): called"</span>);
    }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">second</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"second(): factory evaluated"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">target: <span class="hljs-built_in">any</span>, propertyKey: <span class="hljs-built_in">string</span>, descriptor: PropertyDescriptor</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"second(): called"</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> {
    <span class="hljs-meta">@first</span>()
    <span class="hljs-meta">@second</span>()
    <span class="hljs-title function_">method</span>(<span class="hljs-params"/>) {}
}

<span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š</span>
<span class="hljs-comment">// first(): factory evaluated</span>
<span class="hljs-comment">// second(): factory evaluated</span>
<span class="hljs-comment">// second(): called</span>
<span class="hljs-comment">// first(): called</span>
</code></pre>
<h3 data-id="heading-27">å››ã€æ¨¡å—å£°æ˜å’Œç±»å‹å¢å¼º</h3>
<h4 data-id="heading-28">4.1 æ¨¡å—å£°æ˜åŸºç¡€</h4>
<p>TypeScript å…è®¸ä½ ä¸ºç°æœ‰çš„ JavaScript åº“ç¼–å†™å£°æ˜æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨ TypeScript é¡¹ç›®ä¸­è·å¾—ç±»å‹å®‰å…¨ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å£°æ˜å…¨å±€å˜é‡</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">var</span> <span class="hljs-attr">$</span>: <span class="hljs-title class_">JQueryStatic</span>;

<span class="hljs-comment">// å£°æ˜å…¨å±€å‡½æ•°</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;

<span class="hljs-comment">// å£°æ˜å…¨å±€å¯¹è±¡</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">MyApp</span> {
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> {
        <span class="hljs-attr">apiUrl</span>: <span class="hljs-built_in">string</span>;
        <span class="hljs-attr">timeout</span>: <span class="hljs-built_in">number</span>;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">config: Config</span>): <span class="hljs-built_in">void</span>;
}
</code></pre>
<h4 data-id="heading-29">4.2 æ¨¡å—å£°æ˜</h4>
<p>å½“ä½ éœ€è¦ä¸ºå¤–éƒ¨åº“æä¾›ç±»å‹ä¿¡æ¯æ—¶ï¼Œå¯ä»¥åˆ›å»ºå£°æ˜æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// myLibrary.d.ts</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"myLibrary"</span> {
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Options</span> {
        timeout?: <span class="hljs-built_in">number</span>;
        retries?: <span class="hljs-built_in">number</span>;
    }
    
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, options?: Options</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cancel</span>(<span class="hljs-params">token: <span class="hljs-built_in">any</span></span>): <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { request, <span class="hljs-title class_">Options</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"myLibrary"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">Options</span> = {
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>,
    <span class="hljs-attr">retries</span>: <span class="hljs-number">3</span>
};

<span class="hljs-title function_">request</span>(<span class="hljs-string">"https://api.example.com/data"</span>, options);
</code></pre>
<h4 data-id="heading-30">4.3 é€šé…ç¬¦æ¨¡å—å£°æ˜</h4>
<p>å½“ä½ éœ€è¦ä¸ºä¸€ç»„æ¨¡å—æä¾›å£°æ˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸ºæ‰€æœ‰ .css æ–‡ä»¶æä¾›å£°æ˜</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.css"</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: { [<span class="hljs-attr">className</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> };
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content;
}

<span class="hljs-comment">// ä¸ºæ‰€æœ‰å›¾ç‰‡æ–‡ä»¶æä¾›å£°æ˜</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.png"</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> value;
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.jpg"</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> value;
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.svg"</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> value;
}
</code></pre>
<h4 data-id="heading-31">4.4 ç±»å‹å¢å¼º(Augmenting)</h4>
<p>TypeScript å…è®¸ä½ æ‰©å±•ç°æœ‰ç±»å‹ï¼Œæ·»åŠ æ–°çš„å±æ€§æˆ–æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ‰©å±•å…¨å±€ Window æ¥å£</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> {
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Window</span> {
        <span class="hljs-attr">myCustomProperty</span>: <span class="hljs-built_in">string</span>;
        <span class="hljs-title function_">myCustomFunction</span>(): <span class="hljs-built_in">void</span>;
    }
}

<span class="hljs-comment">// æ‰©å±•å·²æœ‰æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Array</span>&lt;T&gt; {
    groupBy&lt;U&gt;(<span class="hljs-attr">keySelector</span>: <span class="hljs-function">(<span class="hljs-params">item: T</span>) =&gt;</span> U): <span class="hljs-title class_">Map</span>&lt;U, T[]&gt;;
}

<span class="hljs-comment">// å®ç°æ‰©å±•çš„æ–¹æ³•</span>
<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">groupBy</span> = <span class="hljs-keyword">function</span>&lt;T, U&gt;(<span class="hljs-attr">keySelector</span>: <span class="hljs-function">(<span class="hljs-params">item: T</span>) =&gt;</span> U): <span class="hljs-title class_">Map</span>&lt;U, T[]&gt; {
    <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;U, T[]&gt;();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> key = <span class="hljs-title function_">keySelector</span>(item);
        <span class="hljs-keyword">const</span> collection = map.<span class="hljs-title function_">get</span>(key);
        <span class="hljs-keyword">if</span> (!collection) {
            map.<span class="hljs-title function_">set</span>(key, [item]);
        } <span class="hljs-keyword">else</span> {
            collection.<span class="hljs-title function_">push</span>(item);
        }
    });
    <span class="hljs-keyword">return</span> map;
};
</code></pre>
<h4 data-id="heading-32">4.5 æ¨¡å—å¢å¼º(Module Augmentation)</h4>
<p>ä½ å¯ä»¥æ‰©å±•ç°æœ‰æ¨¡å—çš„ç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// observable.d.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Observable</span>&lt;T&gt; {
    <span class="hljs-title function_">subscribe</span>(<span class="hljs-attr">observer</span>: <span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// æ‰©å±• Observable æ¨¡å—</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./observable"</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"./observable"</span> {
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Observable</span>&lt;T&gt; {
        map&lt;R&gt;(<span class="hljs-attr">project</span>: <span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> R): <span class="hljs-title class_">Observable</span>&lt;R&gt;;
        <span class="hljs-title function_">filter</span>(<span class="hljs-attr">predicate</span>: <span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> <span class="hljs-built_in">boolean</span>): <span class="hljs-title class_">Observable</span>&lt;T&gt;;
    }
}

<span class="hljs-comment">// å®ç°æ‰©å±•çš„æ–¹æ³•</span>
<span class="hljs-title class_">Observable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">map</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">project</span>) {
    <span class="hljs-comment">// å®ç° map æ–¹æ³•</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observable</span>(<span class="hljs-comment">/* ... */</span>);
};

<span class="hljs-title class_">Observable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">filter</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">predicate</span>) {
    <span class="hljs-comment">// å®ç° filter æ–¹æ³•</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observable</span>(<span class="hljs-comment">/* ... */</span>);
};
</code></pre>
<h4 data-id="heading-33">4.6 å£°æ˜åˆå¹¶(Declaration Merging)</h4>
<p>TypeScript å…è®¸å°†å¤šä¸ªåŒåå£°æ˜åˆå¹¶ä¸ºä¸€ä¸ªå£°æ˜ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¥å£åˆå¹¶</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Box</span> {
    <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Box</span> {
    <span class="hljs-attr">scale</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">let</span> <span class="hljs-attr">box</span>: <span class="hljs-title class_">Box</span> = {<span class="hljs-attr">height</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">scale</span>: <span class="hljs-number">10</span>};

<span class="hljs-comment">// å‘½åç©ºé—´åˆå¹¶</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Animals</span> {
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Zebra</span> { }
}

<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Animals</span> {
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Legged</span> { <span class="hljs-attr">numberOfLegs</span>: <span class="hljs-built_in">number</span>; }
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> { }
}

<span class="hljs-comment">// åˆå¹¶åçš„ Animals åŒ…å« Zebra, Legged, Dog</span>
</code></pre>
<h3 data-id="heading-34">äº”ã€ç±»å‹æ¨å¯¼å’Œç±»å‹å®ˆå«</h3>
<h4 data-id="heading-35">5.1 ç±»å‹æ¨å¯¼åŸºç¡€</h4>
<p>TypeScript ç¼–è¯‘å™¨ä¼šæ ¹æ®èµ‹å€¼è¡¨è¾¾å¼å’Œå…¶ä»–ä¸Šä¸‹æ–‡è‡ªåŠ¨æ¨æ–­ç±»å‹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŸºç¡€ç±»å‹æ¨å¯¼</span>
<span class="hljs-keyword">let</span> x = <span class="hljs-number">3</span>; <span class="hljs-comment">// æ¨å¯¼ä¸º number</span>
<span class="hljs-keyword">let</span> y = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-literal">null</span>]; <span class="hljs-comment">// æ¨å¯¼ä¸º (number | null)[]</span>

<span class="hljs-comment">// æœ€ä½³é€šç”¨ç±»å‹</span>
<span class="hljs-keyword">let</span> zoo = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">Rhino</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Elephant</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Snake</span>()];
<span class="hljs-comment">// æ¨å¯¼ä¸º (Rhino | Elephant | Snake)[]</span>

<span class="hljs-comment">// ä¸Šä¸‹æ–‡ç±»å‹æ¨å¯¼</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">onmousedown</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">mouseEvent</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(mouseEvent.<span class="hljs-property">button</span>); <span class="hljs-comment">// æ­£ç¡®ï¼Œæ¨å¯¼ä¸º MouseEvent</span>
    <span class="hljs-comment">// console.log(mouseEvent.foo); // é”™è¯¯ï¼ŒMouseEvent æ²¡æœ‰ foo å±æ€§</span>
};
</code></pre>
<h4 data-id="heading-36">5.2 æ§åˆ¶æµç±»å‹åˆ†æ</h4>
<p>TypeScript 3.7 å¼•å…¥äº†æ›´ç²¾ç¡®çš„æ§åˆ¶æµç±»å‹åˆ†æï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">x: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> x === <span class="hljs-string">"string"</span>) {
        x; <span class="hljs-comment">// æ¨å¯¼ä¸º string</span>
        x.<span class="hljs-title function_">toUpperCase</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> x === <span class="hljs-string">"number"</span>) {
        x; <span class="hljs-comment">// æ¨å¯¼ä¸º number</span>
        x.<span class="hljs-title function_">toFixed</span>();
    } <span class="hljs-keyword">else</span> {
        x; <span class="hljs-comment">// æ¨å¯¼ä¸º boolean</span>
        x.<span class="hljs-title function_">valueOf</span>();
    }
}

<span class="hljs-comment">// æ•°ç»„ç±»å‹å®ˆå«</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isStringArray</span>(<span class="hljs-params">arr: <span class="hljs-built_in">unknown</span>[]</span>): arr is <span class="hljs-built_in">string</span>[] {
    <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-keyword">typeof</span> item === <span class="hljs-string">"string"</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processArray</span>(<span class="hljs-params">arr: (<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>)[]</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isStringArray</span>(arr)) {
        arr; <span class="hljs-comment">// æ¨å¯¼ä¸º string[]</span>
        arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.<span class="hljs-title function_">toUpperCase</span>());
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¤„ç†æ··åˆæ•°ç»„</span>
    }
}
</code></pre>
<h4 data-id="heading-37">5.3 ç±»å‹å®ˆå«(Type Guards)</h4>
<p>ç±»å‹å®ˆå«æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œå®ƒä»¬åœ¨è¿è¡Œæ—¶æ£€æŸ¥ä»¥ç¡®ä¿åœ¨æŸä¸ªä½œç”¨åŸŸå†…çš„ç±»å‹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// typeof ç±»å‹å®ˆå«</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">padLeft</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, padding: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> padding === <span class="hljs-string">"number"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">" "</span>.<span class="hljs-title function_">repeat</span>(padding) + value;
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> padding === <span class="hljs-string">"string"</span>) {
        <span class="hljs-keyword">return</span> padding + value;
    }
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Expected string or number, got '<span class="hljs-subst">${padding}</span>'.`</span>);
}

<span class="hljs-comment">// instanceof ç±»å‹å®ˆå«</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> {
    <span class="hljs-title function_">fly</span>(<span class="hljs-params"/>) {}
    <span class="hljs-title function_">layEggs</span>(<span class="hljs-params"/>) {}
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Fish</span> {
    <span class="hljs-title function_">swim</span>(<span class="hljs-params"/>) {}
    <span class="hljs-title function_">layEggs</span>(<span class="hljs-params"/>) {}
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">move</span>(<span class="hljs-params">animal: Bird | Fish</span>) {
    <span class="hljs-keyword">if</span> (animal <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Bird</span>) {
        animal.<span class="hljs-title function_">fly</span>();
    } <span class="hljs-keyword">else</span> {
        animal.<span class="hljs-title function_">swim</span>();
    }
}

<span class="hljs-comment">// in æ“ä½œç¬¦ç±»å‹å®ˆå«</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Car</span> {
    <span class="hljs-attr">engine</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Bicycle</span> {
    <span class="hljs-attr">pedals</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">inspectVehicle</span>(<span class="hljs-params">vehicle: Car | Bicycle</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-string">"engine"</span> <span class="hljs-keyword">in</span> vehicle) {
        vehicle; <span class="hljs-comment">// æ¨å¯¼ä¸º Car</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(vehicle.<span class="hljs-property">engine</span>);
    } <span class="hljs-keyword">else</span> {
        vehicle; <span class="hljs-comment">// æ¨å¯¼ä¸º Bicycle</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(vehicle.<span class="hljs-property">pedals</span>);
    }
}
</code></pre>
<h4 data-id="heading-38">5.4 è‡ªå®šä¹‰ç±»å‹å®ˆå«</h4>
<p>ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„ç±»å‹å®ˆå«å‡½æ•°æ¥ç»†åŒ–ç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·å®šä¹‰çš„ç±»å‹å®ˆå«</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isFish</span>(<span class="hljs-params">pet: Fish | Bird</span>): pet is <span class="hljs-title class_">Fish</span> {
    <span class="hljs-keyword">return</span> (pet <span class="hljs-keyword">as</span> <span class="hljs-title class_">Fish</span>).<span class="hljs-property">swim</span> !== <span class="hljs-literal">undefined</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getSmallPet</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Fish</span> | <span class="hljs-title class_">Bird</span> {
    <span class="hljs-comment">// è¿”å› Fish æˆ– Bird çš„å®ç°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span> ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fish</span>() : <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span>();
}

<span class="hljs-keyword">let</span> pet = <span class="hljs-title function_">getSmallPet</span>();

<span class="hljs-keyword">if</span> (<span class="hljs-title function_">isFish</span>(pet)) {
    pet.<span class="hljs-title function_">swim</span>();
} <span class="hljs-keyword">else</span> {
    pet.<span class="hljs-title function_">fly</span>();
}

<span class="hljs-comment">// æ›´å¤æ‚çš„ç±»å‹å®ˆå«</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Admin</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">privileges</span>: <span class="hljs-built_in">string</span>[];
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Employee</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">startDate</span>: <span class="hljs-title class_">Date</span>;
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">UnknownEmployee</span> = <span class="hljs-title class_">Employee</span> | <span class="hljs-title class_">Admin</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isAdmin</span>(<span class="hljs-params">employee: UnknownEmployee</span>): employee is <span class="hljs-title class_">Admin</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"privileges"</span> <span class="hljs-keyword">in</span> employee;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">printEmployeeInformation</span>(<span class="hljs-params">emp: UnknownEmployee</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Name: "</span> + emp.<span class="hljs-property">name</span>);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isAdmin</span>(emp)) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Privileges: "</span> + emp.<span class="hljs-property">privileges</span>.<span class="hljs-title function_">join</span>(<span class="hljs-string">", "</span>));
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Start Date: "</span> + emp.<span class="hljs-property">startDate</span>);
    }
}
</code></pre>
<h4 data-id="heading-39">5.5 å¯è¾¨è¯†è”åˆ(Discriminated Unions)</h4>
<p>é€šè¿‡å…±åŒçš„å¯è¾¨è¯†å­—æ®µæ¥åŒºåˆ†ä¸åŒç±»å‹çš„è”åˆç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Square</span> {
    <span class="hljs-attr">kind</span>: <span class="hljs-string">"square"</span>;
    <span class="hljs-attr">size</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Rectangle</span> {
    <span class="hljs-attr">kind</span>: <span class="hljs-string">"rectangle"</span>;
    <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Circle</span> {
    <span class="hljs-attr">kind</span>: <span class="hljs-string">"circle"</span>;
    <span class="hljs-attr">radius</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Shape</span> = <span class="hljs-title class_">Square</span> | <span class="hljs-title class_">Rectangle</span> | <span class="hljs-title class_">Circle</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">area</span>(<span class="hljs-params">s: Shape</span>) {
    <span class="hljs-keyword">switch</span> (s.<span class="hljs-property">kind</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"square"</span>:
            <span class="hljs-keyword">return</span> s.<span class="hljs-property">size</span> * s.<span class="hljs-property">size</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"rectangle"</span>:
            <span class="hljs-keyword">return</span> s.<span class="hljs-property">width</span> * s.<span class="hljs-property">height</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"circle"</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * s.<span class="hljs-property">radius</span> ** <span class="hljs-number">2</span>;
        <span class="hljs-attr">default</span>:
            <span class="hljs-comment">// ç©·å°½æ€§æ£€æŸ¥</span>
            <span class="hljs-keyword">const</span> <span class="hljs-attr">_exhaustiveCheck</span>: <span class="hljs-built_in">never</span> = s;
            <span class="hljs-keyword">return</span> _exhaustiveCheck;
    }
}

<span class="hljs-comment">// æ·»åŠ æ–°å½¢çŠ¶æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œæé†’ä½ å¤„ç†æ–°æƒ…å†µ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Triangle</span> {
    <span class="hljs-attr">kind</span>: <span class="hljs-string">"triangle"</span>;
    <span class="hljs-attr">base</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// type Shape = Square | Rectangle | Circle | Triangle;</span>
<span class="hljs-comment">// ä¸Šè¿°ä»£ç ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º area å‡½æ•°æ²¡æœ‰å¤„ç† triangle æƒ…å†µ</span>
</code></pre>
<h4 data-id="heading-40">5.6 ç±»å‹è°“è¯(Type Predicates)</h4>
<p>ç±»å‹è°“è¯æ˜¯è¿”å›ç±»å‹ä¸º type is TypeName çš„å‡½æ•°ï¼Œç”¨äºç±»å‹å®ˆå«ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ•°ç»„ç±»å‹è°“è¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isStringArray</span>(<span class="hljs-params">value: <span class="hljs-built_in">unknown</span></span>): value is <span class="hljs-built_in">string</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(value) &amp;&amp; value.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-keyword">typeof</span> item === <span class="hljs-string">"string"</span>);
}

<span class="hljs-comment">// å¯¹è±¡ç±»å‹è°“è¯</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isUser</span>(<span class="hljs-params">obj: <span class="hljs-built_in">unknown</span></span>): obj is <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">return</span> (
        <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">"object"</span> &amp;&amp;
        obj !== <span class="hljs-literal">null</span> &amp;&amp;
        <span class="hljs-string">"id"</span> <span class="hljs-keyword">in</span> obj &amp;&amp;
        <span class="hljs-string">"name"</span> <span class="hljs-keyword">in</span> obj &amp;&amp;
        <span class="hljs-string">"email"</span> <span class="hljs-keyword">in</span> obj &amp;&amp;
        <span class="hljs-keyword">typeof</span> (obj <span class="hljs-keyword">as</span> <span class="hljs-title class_">User</span>).<span class="hljs-property">id</span> === <span class="hljs-string">"number"</span> &amp;&amp;
        <span class="hljs-keyword">typeof</span> (obj <span class="hljs-keyword">as</span> <span class="hljs-title class_">User</span>).<span class="hljs-property">name</span> === <span class="hljs-string">"string"</span> &amp;&amp;
        <span class="hljs-keyword">typeof</span> (obj <span class="hljs-keyword">as</span> <span class="hljs-title class_">User</span>).<span class="hljs-property">email</span> === <span class="hljs-string">"string"</span>
    );
}

<span class="hljs-comment">// ä½¿ç”¨ç±»å‹è°“è¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">data: <span class="hljs-built_in">unknown</span></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isStringArray</span>(data)) {
        <span class="hljs-comment">// data è¢«æ¨å¯¼ä¸º string[]</span>
        data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.<span class="hljs-title function_">toUpperCase</span>());
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isUser</span>(data)) {
        <span class="hljs-comment">// data è¢«æ¨å¯¼ä¸º User</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`User: <span class="hljs-subst">${data.name}</span> (<span class="hljs-subst">${data.email}</span>)`</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Unknown data type"</span>);
    }
}
</code></pre>
<h4 data-id="heading-41">5.7 ç±»å‹æ–­è¨€(Type Assertions)</h4>
<p>è™½ç„¶ä¸æ˜¯ç±»å‹æ¨å¯¼çš„ä¸€éƒ¨åˆ†ï¼Œä½†ç±»å‹æ–­è¨€æ˜¯ TypeScript ä¸­é‡è¦çš„ç±»å‹æ“ä½œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°–æ‹¬å·è¯­æ³•</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">someValue</span>: <span class="hljs-built_in">unknown</span> = <span class="hljs-string">"this is a string"</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">strLength</span>: <span class="hljs-built_in">number</span> = (&lt;<span class="hljs-built_in">string</span>&gt;someValue).<span class="hljs-property">length</span>;

<span class="hljs-comment">// as è¯­æ³•ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">someValue2</span>: <span class="hljs-built_in">unknown</span> = <span class="hljs-string">"this is a string"</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">strLength2</span>: <span class="hljs-built_in">number</span> = (someValue2 <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>).<span class="hljs-property">length</span>;

<span class="hljs-comment">// éç©ºæ–­è¨€æ“ä½œç¬¦</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fixed</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span></span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">postprocess</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-keyword">return</span> name.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">toUpperCase</span>() + name.<span class="hljs-title function_">substr</span>(<span class="hljs-number">1</span>);
    }
    
    <span class="hljs-comment">// name å¯èƒ½ä¸º nullï¼Œä½†æˆ‘ä»¬ç¡®å®šå®ƒä¸ä¸º null</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">postprocess</span>(name!);
}

<span class="hljs-comment">// ç±»å‹æ–­è¨€ vs ç±»å‹å®ˆå«</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Cat</span> {
    <span class="hljs-title function_">meow</span>(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Dog</span> {
    <span class="hljs-title function_">bark</span>(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleAnimal</span>(<span class="hljs-params">animal: Cat | Dog</span>) {
    <span class="hljs-comment">// ç±»å‹æ–­è¨€ï¼ˆä¸å®‰å…¨ï¼‰</span>
    (animal <span class="hljs-keyword">as</span> <span class="hljs-title class_">Cat</span>).<span class="hljs-title function_">meow</span>(); <span class="hljs-comment">// å¦‚æœ animal æ˜¯ Dogï¼Œä¼šè¿è¡Œæ—¶æŠ¥é”™</span>
    
    <span class="hljs-comment">// ç±»å‹å®ˆå«ï¼ˆå®‰å…¨ï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-string">"meow"</span> <span class="hljs-keyword">in</span> animal) {
        animal.<span class="hljs-title function_">meow</span>(); <span class="hljs-comment">// å®‰å…¨è°ƒç”¨</span>
    }
}
</code></pre>
<h3 data-id="heading-42">æ€»ç»“</h3>
<p>TypeScript çš„é«˜çº§ç‰¹æ€§ä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„ç±»å‹ç³»ç»Ÿå’Œç¼–ç¨‹èƒ½åŠ›ï¼š</p>
<ol>
<li><strong>æ³›å‹ç¼–ç¨‹</strong>è®©æˆ‘ä»¬èƒ½å¤Ÿç¼–å†™é«˜åº¦å¯é‡ç”¨ä¸”ç±»å‹å®‰å…¨çš„ä»£ç </li>
<li><strong>æ¡ä»¶ç±»å‹å’Œæ˜ å°„ç±»å‹</strong>æä¾›äº†å¼ºå¤§çš„ç±»å‹å˜æ¢èƒ½åŠ›</li>
<li><strong>è£…é¥°å™¨æ¨¡å¼</strong>å…è®¸æˆ‘ä»¬ä»¥å£°æ˜å¼çš„æ–¹å¼å¢å¼ºç±»å’Œæˆå‘˜çš„è¡Œä¸º</li>
<li><strong>æ¨¡å—å£°æ˜å’Œç±»å‹å¢å¼º</strong>ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸ºç°æœ‰åº“æ·»åŠ ç±»å‹ä¿¡æ¯å¹¶æ‰©å±•ç±»å‹</li>
<li><strong>ç±»å‹æ¨å¯¼å’Œç±»å‹å®ˆå«</strong>è®© TypeScript èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶ä¿æŒç±»å‹å®‰å…¨</li>
</ol>
<p>æŒæ¡è¿™äº›é«˜çº§ç‰¹æ€§ä¸ä»…èƒ½æé«˜ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ï¼Œè¿˜èƒ½è®©æˆ‘ä»¬å†™å‡ºæ›´åŠ å¥å£®å’Œæ˜“äºç»´æŠ¤çš„åº”ç”¨ç¨‹åºã€‚éšç€ TypeScript ç”Ÿæ€çš„ä¸æ–­å‘å±•ï¼Œè¿™äº›ç‰¹æ€§å°†åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­å‘æŒ¥è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptä¸­çš„LHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶è¯¦è§£]]></title>    <link>https://juejin.cn/post/7574448424999354404</link>    <guid>https://juejin.cn/post/7574448424999354404</guid>    <pubDate>2025-11-20T06:58:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574448424999354404" data-draft-id="7574451949326024745" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptä¸­çš„LHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2025-11-20T06:58:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UIUV"/> <meta itemprop="url" content="https://juejin.cn/user/1036168457093483"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptä¸­çš„LHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1036168457093483/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UIUV
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:58:26.000Z" title="Thu Nov 20 2025 06:58:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScriptä¸­çš„LHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶è¯¦è§£</h2>
<p>JavaScriptä¸­çš„LHSï¼ˆLeft-Hand Sideï¼‰å’ŒRHSï¼ˆRight-Hand Sideï¼‰æŸ¥è¯¢æœºåˆ¶æ˜¯ç†è§£å˜é‡ä½œç”¨åŸŸå’Œèµ‹å€¼è¡Œä¸ºçš„å…³é”®ã€‚è¿™ä¸¤ç§æŸ¥è¯¢æ–¹å¼åœ¨å¼•æ“å†…éƒ¨å¤„ç†å˜é‡å¼•ç”¨æ—¶è¡¨ç°å‡ºæˆªç„¶ä¸åŒçš„è¡Œä¸ºæ¨¡å¼ï¼Œç›´æ¥å½±å“ä»£ç çš„æ‰§è¡Œç»“æœå’Œé”™è¯¯å¤„ç†  ã€‚<strong>LHSæŸ¥è¯¢çš„æ ¸å¿ƒç›®çš„æ˜¯å¯»æ‰¾å˜é‡çš„å­˜å‚¨ä½ç½®ä»¥ä¾¿èµ‹å€¼ï¼Œè€ŒRHSæŸ¥è¯¢åˆ™æ˜¯ä¸ºäº†è·å–å˜é‡çš„å€¼è¿›è¡Œä½¿ç”¨</strong>  ã€‚è¿™ç§å·®å¼‚åœ¨ä¸åŒæ¨¡å¼ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸éä¸¥æ ¼æ¨¡å¼ï¼‰ä¸‹å°¤ä¸ºæ˜æ˜¾ï¼Œä¸”åœ¨å®é™…å¼€å‘ä¸­å¯èƒ½å¯¼è‡´å„ç§éš¾ä»¥è¿½è¸ªçš„é”™è¯¯ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€LHSå’ŒRHSçš„åŸºæœ¬å®šä¹‰ä¸è¡Œä¸º</h3>
<p>LHSæŸ¥è¯¢å‘ç”Ÿåœ¨éœ€è¦ä¸ºå˜é‡èµ‹å€¼çš„åœºæ™¯ï¼Œå…¶ç›®æ ‡æ˜¯æ‰¾åˆ°å˜é‡çš„å­˜å‚¨ä½ç½®ã€‚ä¾‹å¦‚åœ¨è¡¨è¾¾å¼<code>a = 2;</code>ä¸­ï¼Œå¼•æ“ä¼šå¯¹<code>a</code>è¿›è¡ŒLHSæŸ¥è¯¢ï¼Œç›®çš„æ˜¯æ‰¾åˆ°å¯ä»¥å­˜å‚¨å€¼<code>2</code>çš„ä½ç½®ã€‚å¦‚æœ<code>a</code>å°šæœªè¢«å£°æ˜ï¼Œä¸”å½“å‰å¤„äºéä¸¥æ ¼æ¨¡å¼ï¼ŒJavaScriptå¼•æ“ä¼šè‡ªåŠ¨åœ¨å…¨å±€ä½œç”¨åŸŸä¸­åˆ›å»ºä¸€ä¸ªåä¸º<code>a</code>çš„å˜é‡å¹¶èµ‹å€¼ã€‚è¿™ç§æœºåˆ¶è™½ç„¶æä¾›äº†ä¸€å®šçš„çµæ´»æ€§ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´éšå¼å…¨å±€å˜é‡æ±¡æŸ“ï¼Œå¢åŠ ä»£ç ç»´æŠ¤éš¾åº¦  ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒRHSæŸ¥è¯¢çš„ç›®çš„æ˜¯è·å–å˜é‡çš„å€¼ã€‚ä¾‹å¦‚åœ¨è¡¨è¾¾å¼<code>console.log(a);</code>ä¸­ï¼Œå¼•æ“ä¼šå¯¹<code>a</code>è¿›è¡ŒRHSæŸ¥è¯¢ï¼Œä»¥è·å–å…¶å½“å‰å€¼ã€‚å¦‚æœ<code>a</code>æœªè¢«å£°æ˜ï¼ŒRHSæŸ¥è¯¢å¤±è´¥æ—¶ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šè¿”å›<code>undefined</code>ï¼Œè€Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹åˆ™ä¼šæŠ›å‡º<code>ReferenceError</code>é”™è¯¯  ã€‚è¿™ç§å·®å¼‚ä½¿å¾—RHSæŸ¥è¯¢å¤±è´¥ä¼šç›´æ¥å¯¼è‡´ç¨‹åºä¸­æ–­ï¼Œè€ŒLHSæŸ¥è¯¢å¤±è´¥åˆ™å¯èƒ½äº§ç”Ÿæ„å¤–çš„å…¨å±€å˜é‡ã€‚</p>
<p>åœ¨ä½œç”¨åŸŸé“¾æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼ŒLHSå’ŒRHSæŸ¥è¯¢éµå¾ªç›¸ä¼¼çš„è·¯å¾„ï¼Œä½†å¤„ç†ç»“æœä¸åŒã€‚ä¸¤ç§æŸ¥è¯¢éƒ½ä»å½“å‰æ‰§è¡Œä½œç”¨åŸŸå¼€å§‹ï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾é€çº§å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸ  ã€‚å½“LHSæŸ¥è¯¢å¤±è´¥æ—¶ï¼Œéä¸¥æ ¼æ¨¡å¼ä¼š"å…œåº•"åˆ›å»ºå…¨å±€å˜é‡ï¼›è€ŒRHSæŸ¥è¯¢å¤±è´¥æ—¶ï¼Œæ— è®ºå“ªç§æ¨¡å¼éƒ½ä¸ä¼šåˆ›å»ºå˜é‡ï¼Œåªæ˜¯è¿”å›<code>undefined</code>æˆ–æŠ›å‡ºé”™è¯¯  ã€‚</p>
<h3 data-id="heading-2">äºŒã€ä¸¥æ ¼æ¨¡å¼ä¸éä¸¥æ ¼æ¨¡å¼ä¸‹çš„è¡Œä¸ºå·®å¼‚</h3>
<p>JavaScriptçš„ä¸¥æ ¼æ¨¡å¼ï¼ˆé€šè¿‡<code>"use strict";</code>å£°æ˜ï¼‰å¯¹LHSå’ŒRHSæŸ¥è¯¢çš„è¡Œä¸ºäº§ç”Ÿäº†æ˜¾è‘—å½±å“ã€‚ä¸‹è¡¨å¯¹æ¯”äº†ä¸¤ç§æ¨¡å¼ä¸‹æŸ¥è¯¢å¤±è´¥çš„å¤„ç†æ–¹å¼ï¼š</p>




















<table><thead><tr><th>æŸ¥è¯¢ç±»å‹</th><th>éä¸¥æ ¼æ¨¡å¼</th><th>ä¸¥æ ¼æ¨¡å¼</th></tr></thead><tbody><tr><td>LHSæŸ¥è¯¢å¤±è´¥</td><td>éšå¼åˆ›å»ºå…¨å±€å˜é‡</td><td>æŠ›å‡º<code>ReferenceError</code></td></tr><tr><td>RHSæŸ¥è¯¢å¤±è´¥</td><td>è¿”å›<code>undefined</code></td><td>æŠ›å‡º<code>ReferenceError</code></td></tr></tbody></table>
<p>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒLHSæŸ¥è¯¢å¤±è´¥ä¼šè‡ªåŠ¨åˆ›å»ºå…¨å±€å˜é‡ï¼Œè¿™å¯èƒ½å¯¼è‡´å˜é‡åå†²çªå’Œéš¾ä»¥è¿½è¸ªçš„é”™è¯¯  ã€‚ä¾‹å¦‚ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
  x = <span class="hljs-number">10</span>;  <span class="hljs-comment">// LHSæŸ¥è¯¢xå¤±è´¥ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹åˆ›å»ºå…¨å±€å˜é‡</span>
}
<span class="hljs-title function_">bar</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x);  <span class="hljs-comment">// è¾“å‡º10</span>
</code></pre>
<p>è€Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒåŒæ ·çš„ä»£ç ä¼šæŠ›å‡ºé”™è¯¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
   <span class="hljs-string">"use strict"</span>;
   x = <span class="hljs-number">10</span>;  <span class="hljs-comment">// LHSæŸ¥è¯¢xå¤±è´¥ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹æŠ›å‡ºé”™è¯¯</span>
 }
 <span class="hljs-title function_">bar</span>();      <span class="hljs-comment">// ReferenceError: x is not defined</span>
</code></pre>
<p><strong>ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ— è®ºæ˜¯LHSè¿˜æ˜¯RHSæŸ¥è¯¢å¤±è´¥ï¼Œéƒ½ä¼šç«‹å³æŠ›å‡º<code>ReferenceError</code>é”™è¯¯</strong>  ï¼Œè¿™ä½¿å¾—ä»£ç é”™è¯¯æ›´å®¹æ˜“è¢«å‘ç°å’Œä¿®å¤ã€‚åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒLHSæŸ¥è¯¢å¤±è´¥å¯èƒ½å¯¼è‡´å…¨å±€å˜é‡æ„å¤–åˆ›å»ºï¼Œè€ŒRHSæŸ¥è¯¢å¤±è´¥åˆ™å¯èƒ½è¿”å›<code>undefined</code>å¯¼è‡´åç»­é€»è¾‘é”™è¯¯ã€‚</p>
<p>ES6å¼•å…¥çš„<code>let</code>å’Œ<code>const</code>å…³é”®å­—åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹è¡¨ç°æ›´ä¸ºä¸¥æ ¼ã€‚ä½¿ç”¨<code>let</code>æˆ–<code>const</code>å£°æ˜çš„å˜é‡åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œä¸”æ— æ³•åœ¨å£°æ˜å‰è®¿é—®ï¼Œè¿™è¿›ä¸€æ­¥å‡å°‘äº†LHSæŸ¥è¯¢å¤±è´¥çš„å¯èƒ½æ€§  ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta"> "use strict"</span>;
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);  <span class="hljs-comment">// ReferenceError: a is not defined</span>
 <span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;
</code></pre>
<h3 data-id="heading-3">ä¸‰ã€LHSå’ŒRHSæŸ¥è¯¢çš„å…¸å‹åº”ç”¨åœºæ™¯</h3>
<p>LHSå’ŒRHSæŸ¥è¯¢ä¸ä»…å‡ºç°åœ¨ç®€å•çš„èµ‹å€¼æ“ä½œä¸­ï¼Œè¿˜å¹¿æ³›å­˜åœ¨äºJavaScriptçš„å„ç±»è¯­æ³•ç»“æ„ä¸­ã€‚</p>
<p><strong>å˜é‡èµ‹å€¼ä¸å£°æ˜</strong>æ˜¯æœ€ç›´æ¥çš„LHSåº”ç”¨åœºæ™¯ã€‚æ— è®ºæ˜¯ä½¿ç”¨<code>var</code>ã€<code>let</code>è¿˜æ˜¯<code>const</code>å£°æ˜å˜é‡ï¼Œå¼•æ“éƒ½ä¼šè¿›è¡ŒLHSæŸ¥è¯¢ä»¥ç¡®å®šå­˜å‚¨ä½ç½®ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>;  <span class="hljs-comment">// LHSæŸ¥è¯¢aï¼ŒRHSæŸ¥è¯¢10</span>
<span class="hljs-keyword">let</span> b = a + <span class="hljs-number">5</span>;  <span class="hljs-comment">// RHSæŸ¥è¯¢aï¼ŒLHSæŸ¥è¯¢b</span>
</code></pre>
<p><strong>å‡½æ•°å‚æ•°ä¼ é€’</strong>æœ¬è´¨ä¸Šä¹Ÿæ˜¯LHSæŸ¥è¯¢ã€‚å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå‚æ•°ä¼šè¢«èµ‹å€¼ç»™å‡½æ•°çš„å½¢å‚ï¼Œè¿™ä¸€è¿‡ç¨‹ç›¸å½“äºéšå¼è¿›è¡ŒLHSæŸ¥è¯¢  ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">num</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num);  <span class="hljs-comment">// RHSæŸ¥è¯¢num</span>
}
<span class="hljs-title function_">foo</span>(<span class="hljs-number">100</span>);  <span class="hljs-comment">// LHSæŸ¥è¯¢numï¼ŒRHSæŸ¥è¯¢foo</span>
</code></pre>
<p><strong>å¯¹è±¡å±æ€§æ“ä½œ</strong>åŒæ ·éµå¾ªLHSå’ŒRHSè§„åˆ™ã€‚å½“è®¿é—®å¯¹è±¡å±æ€§æ—¶ï¼Œå¦‚æœå±æ€§ä¸å­˜åœ¨ä¸”å¤„äºéä¸¥æ ¼æ¨¡å¼ï¼Œä¼šè¿”å›<code>undefined</code>ï¼›å¦‚æœå°è¯•ç»™æœªå£°æ˜çš„å¯¹è±¡å±æ€§èµ‹å€¼ï¼Œåˆ™ä¼šåˆ›å»ºè¯¥å±æ€§  ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = {};
obj.<span class="hljs-property">x</span> = <span class="hljs-number">10</span>;  <span class="hljs-comment">// LHSæŸ¥è¯¢obj.xï¼Œåˆ›å»ºå±æ€§x</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">y</span>);  <span class="hljs-comment">// RHSæŸ¥è¯¢obj.yï¼Œè¿”å›undefined</span>
</code></pre>
<p><strong>è§£æ„èµ‹å€¼</strong>æ˜¯ES6ä¸­LHSæŸ¥è¯¢çš„å¤æ‚åº”ç”¨åœºæ™¯ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> {a, b} = {<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>};  <span class="hljs-comment">// RHSæŸ¥è¯¢å³è¾¹çš„å¯¹è±¡ï¼ŒLHSæŸ¥è¯¢aå’Œb</span>
<span class="hljs-keyword">const</span> [x, y] = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>];           <span class="hljs-comment">// RHSæŸ¥è¯¢å³è¾¹çš„æ•°ç»„ï¼ŒLHSæŸ¥è¯¢xå’Œy</span>
</code></pre>
<p>å¦‚æœè§£æ„çš„æºå¯¹è±¡ä¸­ä¸å­˜åœ¨æŸäº›å±æ€§ï¼ŒLHSæŸ¥è¯¢ä¼šå¤±è´¥ï¼Œä½†ä¸ä¼šåˆ›å»ºå…¨å±€å˜é‡ï¼Œè€Œæ˜¯è®©å¯¹åº”çš„è§£æ„å˜é‡ä¿æŒ<code>undefined</code>ï¼ˆåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰  ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> {a, b} = {<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>};  <span class="hljs-comment">// LHSæŸ¥è¯¢bå¤±è´¥ï¼Œbä¸ºundefined</span>
</code></pre>
<h3 data-id="heading-4">å››ã€å®é™…å¼€å‘ä¸­çš„å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p>åœ¨å®é™…JavaScriptå¼€å‘ä¸­ï¼ŒLHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶å¯èƒ½å¯¼è‡´å¤šç§å¸¸è§é—®é¢˜ã€‚</p>
<p><strong>éšå¼å…¨å±€å˜é‡æ±¡æŸ“</strong>æ˜¯éä¸¥æ ¼æ¨¡å¼ä¸‹LHSæŸ¥è¯¢å¤±è´¥çš„ä¸»è¦é£é™©  ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>ç¯å¢ƒæ±¡æŸ“ç¤ºä¾‹() {
  data = <span class="hljs-string">"æ±¡æŸ“æ•°æ®"</span>;  <span class="hljs-comment">// LHSæŸ¥è¯¢å¤±è´¥ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹åˆ›å»ºå…¨å±€å˜é‡</span>
}
ç¯å¢ƒæ±¡æŸ“ç¤ºä¾‹();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);  <span class="hljs-comment">// è¾“å‡º"æ±¡æŸ“æ•°æ®"ï¼Œå¯èƒ½è¦†ç›–å…¶ä»–åŒåå…¨å±€å˜é‡</span>
</code></pre>
<p>è¿™ç§é—®é¢˜åœ¨å¤§å‹åº”ç”¨ä¸­å°¤ä¸ºå±é™©ï¼Œå¯èƒ½å¯¼è‡´éš¾ä»¥è¿½è¸ªçš„å˜é‡è¦†ç›–æˆ–å‘½åå†²çªã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œæˆ–åœ¨ä½¿ç”¨å˜é‡å‰æ˜¾å¼å£°æ˜  ã€‚</p>
<p>RHSæŸ¥è¯¢å¤±è´¥å¯¼è‡´çš„æ„å¤–<code>undefined</code>æ˜¯å¦ä¸€ä¸ªå¸¸è§é—®é¢˜ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-variable constant_">RHS</span>æŸ¥è¯¢å¤±è´¥ç¤ºä¾‹() {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a + b);  <span class="hljs-comment">// RHSæŸ¥è¯¢aå’Œbå¤±è´¥ï¼Œè¿”å›undefinedï¼Œå¯¼è‡´è®¡ç®—é”™è¯¯</span>
  a = <span class="hljs-number">10</span>;                 <span class="hljs-comment">// LHSæŸ¥è¯¢aå¤±è´¥ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹åˆ›å»ºå…¨å±€å˜é‡</span>
  b = <span class="hljs-number">20</span>;                 <span class="hljs-comment">// LHSæŸ¥è¯¢bå¤±è´¥ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹åˆ›å»ºå…¨å±€å˜é‡</span>
}
<span class="hljs-variable constant_">RHS</span>æŸ¥è¯¢å¤±è´¥ç¤ºä¾‹();  <span class="hljs-comment">// è¾“å‡ºNaNï¼Œç„¶åaå’Œbå˜ä¸ºå…¨å±€å˜é‡</span>
</code></pre>
<p><strong>ä¸¥æ ¼æ¨¡å¼ä¸‹çš„é”™è¯¯æš´éœ²</strong>è™½ç„¶æé«˜äº†ä»£ç å¥å£®æ€§ï¼Œä½†ä¹Ÿä¼šå¯¼è‡´æ›´å¤šè¿è¡Œæ—¶é”™è¯¯ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta"> "use strict"</span>;
 <span class="hljs-keyword">function</span>ä¸¥æ ¼æ¨¡å¼é”™è¯¯ç¤ºä¾‹() {
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);  <span class="hljs-comment">// ReferenceError: a is not defined</span>
   a = <span class="hljs-number">10</span>;            <span class="hljs-comment">// ReferenceError: a is not defined</span>
 }
ä¸¥æ ¼æ¨¡å¼é”™è¯¯ç¤ºä¾‹();
</code></pre>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œæœªå£°æ˜å˜é‡çš„ä»»ä½•ä½¿ç”¨éƒ½ä¼šç«‹å³å¤±è´¥ï¼Œæœ‰åŠ©äºå¼€å‘è€…æ—©æœŸå‘ç°æ½œåœ¨é—®é¢˜ã€‚</p>
<p><strong>å¯¹è±¡åŸå‹é“¾ä¸Šçš„LHS/RHSæŸ¥è¯¢</strong>å¯èƒ½å¼•å‘æ›´å¤æ‚çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>åŸå‹é“¾æŸ¥è¯¢ç¤ºä¾‹() {
  <span class="hljs-keyword">const</span> obj = {<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>};
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">b</span>);  <span class="hljs-comment">// RHSæŸ¥è¯¢obj.bï¼Œè¿”å›undefined</span>
  obj.<span class="hljs-property">b</span> = <span class="hljs-number">2</span>;              <span class="hljs-comment">// LHSæŸ¥è¯¢obj.bï¼Œåˆ›å»ºå±æ€§b</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">b</span>);  <span class="hljs-comment">// RHSæŸ¥è¯¢obj.bï¼Œè¿”å›2</span>
}
åŸå‹é“¾æŸ¥è¯¢ç¤ºä¾‹();
</code></pre>
<p>åœ¨åŸå‹é“¾ä¸­ï¼Œå±æ€§æŸ¥æ‰¾ä¼šä»å¯¹è±¡è‡ªèº«å¼€å§‹ï¼Œç„¶åæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾  ã€‚LHSæŸ¥è¯¢åœ¨å¯¹è±¡è‡ªèº«ä¸Šå¤±è´¥æ—¶ï¼Œä¼šå°è¯•åœ¨åŸå‹é“¾ä¸ŠæŸ¥æ‰¾å¯å†™å±æ€§ï¼Œè‹¥æ‰¾ä¸åˆ°åˆ™æŠ›å‡ºé”™è¯¯ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰æˆ–åˆ›å»ºè‡ªèº«å±æ€§ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰ã€‚</p>
<h3 data-id="heading-5">äº”ã€è°ƒè¯•ä¸é”™è¯¯å¤„ç†æŠ€å·§</h3>
<p>ç†è§£LHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶æœ‰åŠ©äºæ›´æœ‰æ•ˆåœ°è°ƒè¯•JavaScriptä»£ç ã€‚</p>
<p><strong>é€šè¿‡é”™è¯¯ç±»å‹åˆ¤æ–­æŸ¥è¯¢ç±»å‹</strong>æ˜¯åŸºç¡€æŠ€å·§ã€‚å½“é‡åˆ°<code>ReferenceError</code>æ—¶ï¼Œé€šå¸¸è¡¨æ˜æ˜¯RHSæŸ¥è¯¢å¤±è´¥ï¼ˆå˜é‡æœªå®šä¹‰ï¼‰æˆ–ä¸¥æ ¼æ¨¡å¼ä¸‹çš„LHSæŸ¥è¯¢å¤±è´¥  ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-comment">// RHSæŸ¥è¯¢å¤±è´¥</span>
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(æœªå®šä¹‰å˜é‡);  <span class="hljs-comment">// ReferenceError: æœªå®šä¹‰å˜é‡ is not defined</span>

 <span class="hljs-comment">// ä¸¥æ ¼æ¨¡å¼ä¸‹çš„LHSæŸ¥è¯¢å¤±è´¥</span>
 <span class="hljs-string">"use strict"</span>;
 æœªå®šä¹‰å˜é‡ = <span class="hljs-number">10</span>;  <span class="hljs-comment">// ReferenceError: æœªå®šä¹‰å˜é‡ is not defined</span>
</code></pre>
<p><strong>ä½¿ç”¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°</strong>å¯ä»¥å¿«é€Ÿå®šä½æŸ¥è¯¢å¤±è´¥çš„ä½ç½®ã€‚å½“ä»£ç æŠ›å‡º<code>ReferenceError</code>æ—¶ï¼Œæµè§ˆå™¨å¼€å‘è€…å·¥å…·æˆ–Node.jsçš„è°ƒè¯•å™¨ä¼šæ˜¾ç¤ºé”™è¯¯å‘ç”Ÿçš„è¡Œå·å’Œå˜é‡åï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿä¿®å¤é—®é¢˜ã€‚</p>
<p><strong>ä½œç”¨åŸŸé“¾å¯è§†åŒ–</strong>æœ‰åŠ©äºç†è§£å˜é‡æŸ¥æ‰¾è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œåœ¨Chromeå¼€å‘è€…å·¥å…·ä¸­ï¼Œå¯ä»¥åœ¨Scope Variablesé¢æ¿æŸ¥çœ‹å½“å‰ä½œç”¨åŸŸçš„å˜é‡ï¼Œç†è§£LHSå’ŒRHSæŸ¥è¯¢å¦‚ä½•æ²¿ç€ä½œç”¨åŸŸé“¾æŸ¥æ‰¾å˜é‡ã€‚</p>
<p><strong>å˜é‡å£°æ˜æ£€æŸ¥</strong>æ˜¯é¢„é˜²æŸ¥è¯¢å¤±è´¥çš„æœ‰æ•ˆæ‰‹æ®µã€‚åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œåº”ç¡®ä¿æ‰€æœ‰åœ¨LHSæˆ–RHSæŸ¥è¯¢ä¸­ä½¿ç”¨çš„å˜é‡éƒ½å·²æ˜¾å¼å£°æ˜ï¼Œæˆ–ä½¿ç”¨<code>let</code>ã€<code>const</code>ç­‰ES6å˜é‡å£°æ˜æ–¹å¼ï¼Œå‡å°‘æ„å¤–æŸ¥è¯¢å¤±è´¥çš„å¯èƒ½æ€§ã€‚</p>
<h3 data-id="heading-6">å…­ã€TypeScriptä¸­çš„LHS/RHSæŸ¥è¯¢æœºåˆ¶</h3>
<p>TypeScriptä½œä¸ºJavaScriptçš„è¶…é›†ï¼Œé€šè¿‡é™æ€ç±»å‹æ£€æŸ¥å¢å¼ºäº†å¯¹LHSå’ŒRHSæŸ¥è¯¢çš„æ§åˆ¶ã€‚</p>
<p><strong>TypeScriptä¸¥æ ¼æ¨¡å¼</strong>ï¼ˆé€šè¿‡<code>tsconfig.json</code>ä¸­çš„<code>"strict": true</code>é…ç½®ï¼‰ä¸JavaScriptä¸¥æ ¼æ¨¡å¼æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†æ›´ä¾§é‡äºç±»å‹å®‰å…¨  ã€‚ä¾‹å¦‚ï¼Œæœªå£°æ˜å˜é‡åœ¨TypeScriptä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šç›´æ¥å¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œè€Œéè¿è¡Œæ—¶é”™è¯¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"> <span class="hljs-comment">// TypeScriptä¸¥æ ¼æ¨¡å¼ä¸‹çš„RHSæŸ¥è¯¢å¤±è´¥</span>
 <span class="hljs-keyword">function</span>ç±»å‹æ£€æŸ¥ç¤ºä¾‹() {
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);  <span class="hljs-comment">// error TS2304: Cannot find name 'a'.</span>
 }
</code></pre>
<p><strong>æ˜¾å¼ç±»å‹å£°æ˜</strong>æœ‰åŠ©äºé¿å…æŸ¥è¯¢å¤±è´¥ã€‚TypeScriptè¦æ±‚æ‰€æœ‰å˜é‡åœ¨ä½¿ç”¨å‰å¿…é¡»æœ‰ç±»å‹å£°æ˜ï¼Œè¿™ä¸LHSæŸ¥è¯¢éœ€è¦å˜é‡å­˜åœ¨å­˜å‚¨ä½ç½®çš„æœºåˆ¶ç›¸å‘¼åº”  ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"> <span class="hljs-comment">// æ˜¾å¼å£°æ˜å˜é‡</span>
 <span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// RHSæŸ¥è¯¢aä¼šè¿”å›undefinedï¼Œä½†ç±»å‹å®‰å…¨</span>
 a = <span class="hljs-number">10</span>;          <span class="hljs-comment">// LHSæŸ¥è¯¢aæˆåŠŸ</span>
</code></pre>
<p><strong>è§£æ„èµ‹å€¼ä¸é»˜è®¤å€¼</strong>æ˜¯TypeScriptä¸­å¤„ç†æŸ¥è¯¢å¤±è´¥çš„æ¨èæ–¹å¼ã€‚é€šè¿‡ä¸ºè§£æ„å˜é‡æä¾›é»˜è®¤å€¼ï¼Œå¯ä»¥é¿å…RHSæŸ¥è¯¢å¤±è´¥å¯¼è‡´çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"> <span class="hljs-comment">// è§£æ„èµ‹å€¼ä¸é»˜è®¤å€¼</span>
 <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Data</span> {
   <span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>;
   b?: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// å¯é€‰å±æ€§</span>
 }
 <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">Data</span> = {<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>};
 <span class="hljs-keyword">const</span> {a, b = <span class="hljs-number">2</span>} = data;  <span class="hljs-comment">// RHSæŸ¥è¯¢bå¤±è´¥æ—¶ä½¿ç”¨é»˜è®¤å€¼2</span>
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b);  <span class="hljs-comment">// è¾“å‡º1 2</span>
</code></pre>
<p><strong>TypeScriptçš„ç±»å‹æ¨å¯¼</strong>å¯ä»¥è¾…åŠ©ç†è§£LHSå’ŒRHSæŸ¥è¯¢çš„ç±»å‹è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œè§£æ„èµ‹å€¼ä¸­çš„å˜é‡ç±»å‹ä¼šæ ¹æ®æºå¯¹è±¡çš„ç±»å‹è‡ªåŠ¨æ¨å¯¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"> <span class="hljs-comment">// ç±»å‹æ¨å¯¼</span>
 <span class="hljs-keyword">const</span> obj = {<span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>};
 <span class="hljs-keyword">const</span> {name, age} = obj;  <span class="hljs-comment">// nameæ¨å¯¼ä¸ºstringï¼Œageæ¨å¯¼ä¸ºnumber</span>
</code></pre>
<h3 data-id="heading-7">ä¸ƒã€æœ€ä½³å®è·µä¸ç¼–ç å»ºè®®</h3>
<p>åŸºäºå¯¹LHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶çš„ç†è§£ï¼Œä»¥ä¸‹æ˜¯JavaScriptå¼€å‘çš„æœ€ä½³å®è·µå»ºè®®ã€‚</p>
<p><strong>å§‹ç»ˆä½¿ç”¨ä¸¥æ ¼æ¨¡å¼</strong>æ˜¯é¿å…éšå¼å…¨å±€å˜é‡å’Œæé«˜ä»£ç å¥å£®æ€§çš„é¦–è¦æªæ–½ã€‚åœ¨æ–‡ä»¶é¡¶éƒ¨æˆ–å‡½æ•°å†…éƒ¨æ·»åŠ <code>"use strict";</code>æŒ‡ä»¤ï¼Œä½¿LHSæŸ¥è¯¢å¤±è´¥æ—¶æŠ›å‡ºé”™è¯¯ï¼Œè€Œéåˆ›å»ºå…¨å±€å˜é‡  ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta"> "use strict"</span>;
 <span class="hljs-comment">// æ­¤å¤„æœªå£°æ˜å˜é‡çš„ä»»ä½•ä½¿ç”¨éƒ½ä¼šç«‹å³å¤±è´¥</span>
</code></pre>
<p><strong>æ˜¾å¼å£°æ˜æ‰€æœ‰å˜é‡</strong>å¯ä»¥é¿å…æŸ¥è¯¢å¤±è´¥ã€‚ä½¿ç”¨<code>let</code>æˆ–<code>const</code>ä»£æ›¿<code>var</code>ï¼Œå¹¶ç¡®ä¿åœ¨ä½¿ç”¨å‰å£°æ˜å˜é‡  ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-comment">// æ˜¾å¼å£°æ˜å˜é‡</span>
 <span class="hljs-keyword">function</span>æ˜¾å¼å£°æ˜ç¤ºä¾‹() {
   <span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;
   <span class="hljs-keyword">const</span> b = <span class="hljs-number">20</span>;
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a + b);
 }
</code></pre>
<p><strong>è§£æ„èµ‹å€¼æ—¶æä¾›é»˜è®¤å€¼</strong>å¯ä»¥é¿å…RHSæŸ¥è¯¢å¤±è´¥å¯¼è‡´çš„<code>undefined</code>å€¼  ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-comment">// è§£æ„èµ‹å€¼ä¸é»˜è®¤å€¼</span>
 <span class="hljs-keyword">function</span>è§£æ„èµ‹å€¼ç¤ºä¾‹(obj) {
   <span class="hljs-keyword">const</span> {x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>} = obj;  <span class="hljs-comment">// RHSæŸ¥è¯¢xå’Œyå¤±è´¥æ—¶ä½¿ç”¨é»˜è®¤å€¼</span>
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x + y);
 }
è§£æ„èµ‹å€¼ç¤ºä¾‹({<span class="hljs-attr">x</span>: <span class="hljs-number">1</span>});  <span class="hljs-comment">// è¾“å‡º1</span>
è§£æ„èµ‹å€¼ç¤ºä¾‹({});        <span class="hljs-comment">// è¾“å‡º0</span>
</code></pre>
<p><strong>ä½¿ç”¨ES6å—çº§ä½œç”¨åŸŸ</strong>å¯ä»¥é™åˆ¶å˜é‡çš„å¯è§èŒƒå›´ï¼Œå‡å°‘æ„å¤–æŸ¥è¯¢å¤±è´¥çš„å¯èƒ½æ€§  ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-comment">// å—çº§ä½œç”¨åŸŸ</span>
 <span class="hljs-keyword">function</span>å—çº§ä½œç”¨åŸŸç¤ºä¾‹() {
   <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
     <span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;
     <span class="hljs-keyword">const</span> b = <span class="hljs-number">20</span>;
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a + b);
   }
   <span class="hljs-comment">// æ­¤å¤„æ— æ³•è®¿é—®aå’Œbï¼Œé¿å…å˜é‡æ±¡æŸ“</span>
 }
</code></pre>
<p><strong>ä½¿ç”¨TypeScriptå¢å¼ºç±»å‹å®‰å…¨</strong>å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µå‘ç°æ½œåœ¨çš„æŸ¥è¯¢å¤±è´¥é—®é¢˜  ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"> <span class="hljs-comment">// TypeScriptç±»å‹æ£€æŸ¥</span>
 <span class="hljs-keyword">function</span>ç±»å‹å®‰å…¨ç¤ºä¾‹(<span class="hljs-attr">data</span>: {<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>}) {
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">a</span>);  <span class="hljs-comment">// RHSæŸ¥è¯¢data.aï¼Œç±»å‹å®‰å…¨</span>
 }
 <span class="hljs-comment">// ç±»å‹ä¸åŒ¹é…æ—¶ä¼šæŠ¥é”™</span>
ç±»å‹å®‰å…¨ç¤ºä¾‹({<span class="hljs-attr">b</span>: <span class="hljs-number">2</span>});  <span class="hljs-comment">// error TS2345: Argument of type '{ b: number; }' is not compatible with parameter type '{ a: number; }'.</span>
</code></pre>
<p><strong>é¿å…åœ¨å‡½æ•°å†…éƒ¨å£°æ˜å˜é‡</strong>ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾ªç¯ç­‰å¤æ‚ç»“æ„ä¸­ï¼Œå¯ä»¥å‡å°‘å˜é‡æå‡å’ŒæŸ¥è¯¢å¤±è´¥çš„é£é™©  ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-comment">// é¿å…å‡½æ•°å†…éƒ¨å£°æ˜å˜é‡</span>
 <span class="hljs-keyword">function</span>é¿å…å£°æ˜ç¤ºä¾‹() {
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i);  <span class="hljs-comment">// ReferenceError: i is not definedï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰</span>
   <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i);
   }
 }
</code></pre>
<h3 data-id="heading-8">å…«ã€æ€»ç»“ä¸å±•æœ›</h3>
<p>LHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶æ˜¯JavaScriptå˜é‡å¤„ç†çš„æ ¸å¿ƒï¼Œç†è§£å®ƒä»¬æœ‰åŠ©äºç¼–å†™æ›´å¥å£®çš„ä»£ç ã€‚<strong>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒLHSæŸ¥è¯¢å¤±è´¥ä¼šåˆ›å»ºå…¨å±€å˜é‡ï¼Œè€ŒRHSæŸ¥è¯¢å¤±è´¥ä¼šè¿”å›<code>undefined</code>ï¼›åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸¤è€…éƒ½ä¼šæŠ›å‡º<code>ReferenceError</code></strong>  ã€‚è¿™ç§å·®å¼‚ä½¿å¾—ä¸¥æ ¼æ¨¡å¼æˆä¸ºç°ä»£JavaScriptå¼€å‘çš„æ ‡é…ã€‚</p>
<p>éšç€JavaScriptå’ŒTypeScriptçš„å‘å±•ï¼ŒLHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶çš„å½±å“æ­£åœ¨é€æ¸å‡å¼±ã€‚ES6å¼•å…¥çš„<code>let</code>ã€<code>const</code>å’Œå—çº§ä½œç”¨åŸŸå‡å°‘äº†å˜é‡æå‡å’ŒæŸ¥è¯¢å¤±è´¥çš„é£é™©ï¼›TypeScriptçš„é™æ€ç±»å‹æ£€æŸ¥åˆ™åœ¨ç¼–è¯‘é˜¶æ®µå°±æš´éœ²äº†æ½œåœ¨çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œç†è§£è¿™äº›åº•å±‚æœºåˆ¶ä»ç„¶æ˜¯æ·±å…¥æŒæ¡JavaScriptçš„å…³é”®ã€‚</p>
<p>æœªæ¥ï¼Œéšç€æ›´å¤šESè§„èŒƒçš„è½åœ°ï¼ŒLHSå’ŒRHSæŸ¥è¯¢æœºåˆ¶å¯èƒ½ä¼šè¿›ä¸€æ­¥ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼ŒESææ¡ˆä¸­çš„"doè¡¨è¾¾å¼"å’Œ"é¡¶å±‚ç­‰å¾…"ç­‰è¯­æ³•å¯èƒ½ä¼šæ”¹å˜å˜é‡æŸ¥è¯¢çš„æ–¹å¼ï¼Œä½†æ ¸å¿ƒçš„LHS/RHSå·®å¼‚ä»å°†å­˜åœ¨ã€‚å› æ­¤ï¼ŒæŒæ¡è¿™äº›åŸºæœ¬æ¦‚å¿µå¯¹äºé•¿æœŸä»äº‹JavaScriptå¼€å‘çš„äººå‘˜è‡³å…³é‡è¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue-Vben-Admin ä»å…¥é—¨åˆ°å®æˆ˜ï¼šåç«¯å¼€å‘çš„å‰ç«¯æ¢ç´¢ä¹‹æ—…]]></title>    <link>https://juejin.cn/post/7574600119750066186</link>    <guid>https://juejin.cn/post/7574600119750066186</guid>    <pubDate>2025-11-20T07:27:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574600119750066186" data-draft-id="7574584245152596019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue-Vben-Admin ä»å…¥é—¨åˆ°å®æˆ˜ï¼šåç«¯å¼€å‘çš„å‰ç«¯æ¢ç´¢ä¹‹æ—…"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-20T07:27:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Shepherd"/> <meta itemprop="url" content="https://juejin.cn/user/3415500769991869"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue-Vben-Admin ä»å…¥é—¨åˆ°å®æˆ˜ï¼šåç«¯å¼€å‘çš„å‰ç«¯æ¢ç´¢ä¹‹æ—…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3415500769991869/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Shepherd
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:27:11.000Z" title="Thu Nov 20 2025 07:27:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ¦‚è¿°ï¼šä¸€ååç«¯å·¥ç¨‹å¸ˆçš„å‰ç«¯åˆä½“éªŒ</h2>
<p>ä½œä¸ºä¸€åæ·±è€•åç«¯å¤šå¹´çš„Javaå·¥ç¨‹å¸ˆï¼Œä¸€ç›´å›´ç»•ç€Springå…¨å®¶æ¡¶ã€å¾®æœåŠ¡ã€ä¸­é—´ä»¶å’Œåˆ†å¸ƒå¼æ¶æ„ç­‰åç«¯æŠ€æœ¯æ ˆã€‚å‰ç«¯ä¸–ç•Œå¯¹æˆ‘è€Œè¨€ï¼Œè™½è¯´æ„Ÿè§‰å¹¶ä¸é™Œç”Ÿï¼Œä½†æ€»æ˜¯å¸¦ç€ä¸€å±‚ç¥ç§˜é¢çº±ï¼ŒçŸ¥è¯†ç‚¹é›¶æ•£ï¼Œç†è§£åœç•™åœ¨è¡¨é¢ã€‚</p>
<p>ç›´åˆ°æŸå¤©ï¼Œæˆ‘åœ¨GitHubä¸Šå¶ç„¶å‘ç°äº†<strong>Vue-Vben-Admin</strong>â€”â€”è¿™ä¸ªæ‹¥æœ‰è¶…è¿‡30kâ­ï¸çš„çƒ­é—¨å‰ç«¯è„šæ‰‹æ¶ï¼Œç¬é—´å¸å¼•äº†æˆ‘çš„æ³¨æ„ã€‚å®ƒåŸºäºVue3ã€TypeScriptå’ŒViteç­‰å‰æ²¿æŠ€æœ¯æ ˆï¼Œæä¾›äº†ä¸€å¥—èƒ½å¤Ÿ<strong>å¿«é€Ÿæ­å»ºä¼ä¸šçº§ç®¡ç†åå°</strong>çš„å‰ç«¯è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆVue-Vben-Adminå¦‚æ­¤ç«çˆ†ï¼Ÿ</strong></p>
<p>ğŸ”¥ <strong>æŠ€æœ¯æ ˆå‰æ²¿</strong> - é‡‡ç”¨Vue3+TypeScript+Viteï¼Œè¿™äº›éƒ½æ˜¯å½“å‰å‰ç«¯ç”Ÿæ€ä¸­æœ€æ–°ã€æœ€çƒ­é—¨çš„æŠ€æœ¯ç»„åˆ</p>
<p>ğŸ”¥ <strong>å¼€ç®±å³ç”¨</strong> - å†…ç½®ä¼ä¸šçº§é¡¹ç›®æ‰€éœ€çš„å„ç§åŠŸèƒ½ï¼šæƒé™ç®¡ç†ã€å¤šç§å¸ƒå±€ã€ä¸»é¢˜åˆ‡æ¢ã€ä¸°å¯Œç¤ºä¾‹ï¼Œåº”æœ‰å°½æœ‰</p>
<p>ğŸ”¥ <strong>ä»£ç è§„èŒƒ</strong> - ä¸¥æ ¼çš„ä»£ç è§„èŒƒå’Œç±»å‹æ£€æŸ¥ï¼Œè®©åç«¯å¼€å‘è€…ä¹Ÿèƒ½å†™å‡ºé«˜è´¨é‡çš„å‰ç«¯ä»£ç </p>
<p>ğŸ”¥ <strong>æ€§èƒ½ä¼˜å¼‚</strong> - åŸºäºViteçš„å¿«é€Ÿå†·å¯åŠ¨å’Œçƒ­æ›´æ–°ï¼Œå¼€å‘ä½“éªŒæµç•…</p>
<p>ğŸ”¥ <strong>å¤šUIåº“æ”¯æŒ</strong> - æ”¯æŒAnt Design Vueã€Element Plusã€Naiveç­‰ä¸»æµUIåº“ï¼Œçµæ´»é€‰æ‹©ä¸å†å—é™</p>
<p>å¹³å¿ƒè€Œè®ºï¼Œå°±æŠ€æœ¯é€‰å‹ã€ä»£ç è§„èŒƒã€åŠŸèƒ½å®Œå¤‡æ€§ä»¥åŠå¼€ç®±å³ç”¨çš„ä½“éªŒè€Œè¨€ï¼ŒVue-Vben-Admin è¶³ä»¥åª²ç¾ç”šè‡³è¶…è¶Šè®¸å¤šäº’è”ç½‘å…¬å¸è‡ªç ”çš„åå°ç®¡ç†ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-1">2.ç¯å¢ƒæ­å»ºï¼šä¸‰åˆ†é’Ÿæå®šå¿«é€Ÿå¯åŠ¨</h2>
<p><strong>ç¯å¢ƒè¦æ±‚</strong></p>
<p>åœ¨å¯åŠ¨é¡¹ç›®å‰ï¼Œä½ éœ€è¦ç¡®ä¿ä½ çš„ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fen" target="_blank" title="https://nodejs.org/en" ref="nofollow noopener noreferrer">Node.js</a> 20.15.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œæ¨èä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSchniz%2Ffnm" target="_blank" title="https://github.com/Schniz/fnm" ref="nofollow noopener noreferrer">fnm</a> ã€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnvm-sh%2Fnvm" target="_blank" title="https://github.com/nvm-sh/nvm" ref="nofollow noopener noreferrer">nvm</a> æˆ–è€…ç›´æ¥ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2Fcli%2Fenv" target="_blank" title="https://pnpm.io/cli/env" ref="nofollow noopener noreferrer">pnpm</a> è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2F" target="_blank" title="https://git-scm.com/" ref="nofollow noopener noreferrer">Git</a> ä»»æ„ç‰ˆæœ¬ã€‚</li>
</ul>
<p>éªŒè¯ä½ çš„ç¯å¢ƒæ˜¯å¦æ»¡è¶³ä»¥ä¸Šè¦æ±‚ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‡ºç°ç›¸åº” node LTSç‰ˆæœ¬å³å¯</span>
node -v
<span class="hljs-comment"># å‡ºç°ç›¸åº” git ç‰ˆæœ¬å³å¯</span>
git -v
</code></pre>
<p><strong>ä¸‹è½½ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/vbenjs/vue-vben-admin.git
</code></pre>
<p><strong>å®‰è£…ä¾èµ–</strong></p>
<p>åœ¨ä½ çš„ä»£ç ç›®å½•å†…æ‰“å¼€ç»ˆç«¯ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span> vue-vben-admin
â€‹
<span class="hljs-comment"># ä½¿ç”¨é¡¹ç›®æŒ‡å®šçš„pnpmç‰ˆæœ¬è¿›è¡Œä¾èµ–å®‰è£…</span>
npm i -g corepack
â€‹
<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pnpm install
</code></pre>
<p><strong>è¿è¡Œé¡¹ç›®</strong></p>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œé¡¹ç›®:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨é¡¹ç›®</span>
pnpm dev
</code></pre>
<p>æ­¤æ—¶ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºï¼Œé€‰æ‹©ä½ éœ€è¦è¿è¡Œçš„é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">â”‚
â—†  <span class="hljs-keyword">Select</span> the app you need <span class="hljs-keyword">to</span> run [dev]:
â”‚  â—‹ <span class="hljs-variable">@vben</span><span class="hljs-operator">/</span>web<span class="hljs-operator">-</span>antd
â”‚  â—‹ <span class="hljs-variable">@vben</span><span class="hljs-operator">/</span>web<span class="hljs-operator">-</span>ele
â”‚  â—‹ <span class="hljs-variable">@vben</span><span class="hljs-operator">/</span>web<span class="hljs-operator">-</span>naive
â”‚  â—‹ <span class="hljs-variable">@vben</span><span class="hljs-operator">/</span>docs
â”‚  â— <span class="hljs-variable">@vben</span><span class="hljs-operator">/</span>playground
â””
</code></pre>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨è®¿é—® <code>http://localhost:5555</code> æŸ¥çœ‹é¡¹ç›®ã€‚ç™»å½•ä¹‹åç³»ç»Ÿç•Œé¢å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1d8940a3fd54d4bbff8be7d429ebd8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764228431&amp;x-signature=dLaPZo%2F8AauxYiPTeUH293DkMMI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">3.å¿«é€Ÿä¸Šæ‰‹ï¼šåç«¯æ€ç»´ç†è§£å‰ç«¯æ¶æ„</h2>
<h3 data-id="heading-3">3.1 é¡¹ç›®ç»“æ„è§£æï¼ˆåç«¯è§†è§’ï¼‰</h3>
<p>Vue-Vben-Adminçš„ç›®å½•ç»“æ„å¯¹åç«¯å¼€å‘è€…éå¸¸å‹å¥½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">src
â”œâ”€â”€ api Â  Â  Â  Â   <span class="hljs-comment"># æ¥å£å±‚ï¼Œç±»ä¼¼åç«¯çš„Controller</span>
â”œâ”€â”€ layouts Â  Â   <span class="hljs-comment"># å¸ƒå±€ç»„ä»¶ï¼Œç›¸å½“äºé¡µé¢æ¨¡æ¿</span>
â”œâ”€â”€ router Â  Â  Â  <span class="hljs-comment"># è·¯ç”±é…ç½®ï¼Œç±»ä¼¼Springä¸­çš„RequestMapping</span>
â”œâ”€â”€ store Â  Â  Â   <span class="hljs-comment"># çŠ¶æ€ç®¡ç†ï¼Œç±»æ¯”åç«¯çš„ç¼“å­˜æœºåˆ¶</span>
â”œâ”€â”€ locales Â  Â   <span class="hljs-comment"># å¤šè¯­è¨€é…ç½®</span>
â”œâ”€â”€ views Â  Â  Â   <span class="hljs-comment"># é¡µé¢ç»„ä»¶ï¼Œç›¸å½“äºMVCä¸­çš„View</span>
â””â”€â”€ main.ts Â  Â   <span class="hljs-comment"># åº”ç”¨å…¥å£æ–‡ä»¶ï¼Œç±»ä¼¼Spring Bootçš„å¯åŠ¨ç±»</span>
</code></pre>
<p><strong>æ ¸å¿ƒæ¦‚å¿µåç«¯åŒ–ç†è§£ï¼š</strong></p>
<ul>
<li><strong>è·¯ç”± (router/)</strong> ï¼šæ ¸å¿ƒæ˜¯<code>routes.ts</code>å’Œè·¯ç”±å®ˆå«(<code>guard/</code>)ã€‚æƒé™è·¯ç”±é€šè¿‡åç«¯è¿”å›çš„èœå•æ•°æ®åŠ¨æ€ç”Ÿæˆï¼Œç±»ä¼¼Spring Securityçš„æƒé™æ§åˆ¶</li>
<li><strong>çŠ¶æ€ç®¡ç† (store/)</strong> ï¼šä½¿ç”¨Piniaç®¡ç†ç”¨æˆ·ä¿¡æ¯ã€æƒé™çŠ¶æ€ç­‰å…¨å±€æ•°æ®ï¼Œç±»ä¼¼Redisç¼“å­˜æœºåˆ¶</li>
<li><strong>å¸ƒå±€ (layouts/)</strong> ï¼šå®šä¹‰é¡µé¢æ•´ä½“æ¡†æ¶ï¼Œé€šè¿‡ä¿®æ”¹å¸ƒå±€ç»„ä»¶æ”¹å˜åº”ç”¨æ ·å¼ï¼Œç±»ä¼¼Thymeleafæ¨¡æ¿</li>
<li><strong>è¯·æ±‚å°è£… (api/)</strong> ï¼šåŸºäºAxioså°è£…ï¼Œç»Ÿä¸€å¤„ç†è¯·æ±‚æ‹¦æˆªã€å“åº”æ‹¦æˆªå’Œé”™è¯¯å¤„ç†ï¼Œç±»ä¼¼Springçš„æ‹¦æˆªå™¨</li>
</ul>
<h3 data-id="heading-4">3.2 å®æˆ˜ï¼šå¼€å‘ä¸€ä¸ªæµ‹è¯•é¡µé¢</h3>
<p><strong>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡µé¢ç»„ä»¶ (<code>src/views/test/index.vue</code>)</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
â€‹
<span class="hljs-comment">// å“åº”å¼æ•°æ®ï¼ˆç±»ä¼¼Javaä¸­çš„POJOå¯¹è±¡ï¼‰</span>
<span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'å¼ ä¸‰'</span>);
<span class="hljs-keyword">const</span> age = <span class="hljs-title function_">ref</span>(<span class="hljs-number">18</span>);
â€‹
<span class="hljs-comment">// æ–¹æ³•å®šä¹‰ï¼ˆç±»ä¼¼Serviceå±‚æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">changeName</span>(<span class="hljs-params"/>) {
 Â name.<span class="hljs-property">value</span> = <span class="hljs-string">'æå››'</span>; <span class="hljs-comment">// æ³¨æ„ï¼šæ“ä½œrefå¯¹è±¡éœ€è¦.value</span>
}
â€‹
<span class="hljs-keyword">function</span> <span class="hljs-title function_">changeAge</span>(<span class="hljs-params"/>) {
 Â age.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
â€‹
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"person"</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å§“åï¼š{{ name }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å¹´é¾„ï¼š{{ age }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeName"</span>&gt;</span>ä¿®æ”¹åå­—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeAge"</span>&gt;</span>ä¿®æ”¹å¹´é¾„<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
â€‹
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.person</span> {
 Â <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
 Â <span class="hljs-attribute">background-color</span>: skyblue;
 Â <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
 Â <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;
}
â€‹
<span class="hljs-selector-tag">button</span> {
 Â <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šé…ç½®è·¯ç”± (<code>/router/routes/modules/test.ts</code>)</strong></p>
<pre><code class="hljs language-css" lang="css">import type { RouteRecordRaw } <span class="hljs-selector-tag">from</span> 'vue-router';
import { $t } <span class="hljs-selector-tag">from</span> '#/locales';
â€‹
const routes: RouteRecordRaw[] = [
  {
 Â  Â name: <span class="hljs-string">'Test'</span>,
 Â  Â path: <span class="hljs-string">'/test'</span>,
 Â  Â redirect: <span class="hljs-string">'/test/index'</span>,
 Â  Â meta: {
 Â  Â  Â <span class="hljs-attribute">icon</span>: <span class="hljs-string">'mdi:home'</span>,
 Â  Â  Â title: $<span class="hljs-built_in">t</span>(<span class="hljs-string">'page.test.title'</span>),
 Â   },
 Â  Â children: [
 Â  Â   {
 Â  Â  Â  Â name: <span class="hljs-string">'TestIndex'</span>,
 Â  Â  Â  Â path: <span class="hljs-string">'/test/index'</span>,
 Â  Â  Â  Â component: () =&gt; <span class="hljs-built_in">import</span>(<span class="hljs-string">'#/views/test/index.vue'</span>),
 Â  Â  Â  Â meta: {
 Â  Â  Â  Â  Â <span class="hljs-attribute">icon</span>: <span class="hljs-string">'mdi:home'</span>,
 Â  Â  Â  Â  Â title: $<span class="hljs-built_in">t</span>(<span class="hljs-string">'page.test.index'</span>),
 Â  Â  Â   },
 Â  Â   },
 Â   ],
  },
];
â€‹
export default routes;
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šé…ç½®å¤šè¯­è¨€ (<code>/locales/langs/zh-CN/page.json</code>)</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â   <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æµ‹è¯•èœå•"</span><span class="hljs-punctuation">,</span>
 Â   <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æµ‹è¯•é¡µé¢"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ•ˆæœå±•ç¤ºï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2d8631eaf1d43a493144aa5ea051523~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764228431&amp;x-signature=FLSvkUZhPfJgNY7dpMAHGSH%2FdrA%3D" alt="" loading="lazy"/></p>
<p>ç®€å•ä¸‰æ­¥ï¼Œä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„é¡µé¢å°±å¼€å‘å®Œæˆäº†ï¼è™½ç„¶ç•Œé¢ç®€å•ï¼Œä½†åŒ…å«äº†Vue3çš„æ ¸å¿ƒæ¦‚å¿µï¼šå“åº”å¼æ•°æ®ã€äº‹ä»¶å¤„ç†ã€ç»„ä»¶åŒ–å¼€å‘ã€‚</p>
<h2 data-id="heading-5">4. æ€»ç»“ï¼šä¸ºä»€ä¹ˆæ¨èåç«¯å·¥ç¨‹å¸ˆå­¦ä¹ Vue-Vben-Adminï¼Ÿ</h2>
<p>Vue-Vben-Adminç¡®å®æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ä¸­åå°è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<p>ğŸš€ <strong>å¿«é€Ÿå¼€å‘éœ€æ±‚</strong> - éœ€è¦å¿«é€Ÿæ­å»ºä¸­åå°ç®¡ç†ç³»ç»Ÿçš„é¡¹ç›®</p>
<p>ğŸ’¼ <strong>ä¼ä¸šçº§åº”ç”¨</strong> - è¿½æ±‚ä»£ç è§„èŒƒå’Œè´¨é‡çš„ä¼ä¸šçº§é¡¹ç›®å¼€å‘</p>
<p>ğŸ”„ <strong>åç«¯è½¬å…¨æ ˆ</strong> - åç«¯å·¥ç¨‹å¸ˆéœ€è¦å‚ä¸å‰ç«¯å¼€å‘çš„åœºæ™¯</p>
<p>ğŸ¯ <strong>æŠ€æœ¯æ ˆå‡çº§</strong> - å›¢é˜Ÿå¸Œæœ›é‡‡ç”¨ç°ä»£åŒ–å‰ç«¯æŠ€æœ¯æ ˆ</p>
<p><strong>ä½œä¸ºåç«¯å¼€å‘è€…çš„å­¦ä¹ ä»·å€¼ï¼š</strong></p>
<ol start="0">
<li><strong>ç†è§£å‰ç«¯å·¥ç¨‹åŒ–</strong> - å­¦ä¹ ç°ä»£å‰ç«¯é¡¹ç›®çš„æ„å»ºã€æ‰“åŒ…ã€éƒ¨ç½²æµç¨‹</li>
<li><strong>æŒæ¡ç»„ä»¶åŒ–æ€ç»´</strong> - ç†è§£å‰ç«¯ç»„ä»¶åŒ–å¼€å‘æ¨¡å¼ï¼Œå¯¹å¾®æœåŠ¡æ¶æ„è®¾è®¡ä¹Ÿæœ‰å¯å‘</li>
<li><strong>æ‹“å®½æŠ€æœ¯è§†é‡</strong> - äº†è§£å‰åç«¯åˆ†ç¦»æ¶æ„çš„å…¨è²Œï¼Œæ›´å¥½åœ°è¿›è¡ŒAPIè®¾è®¡</li>
<li><strong>æå‡ç«äº‰åŠ›</strong> - å…¨æ ˆå¼€å‘èƒ½åŠ›åœ¨å½“å‰å°±ä¸šå¸‚åœºæå…·ç«äº‰åŠ›</li>
</ol>
<p><strong>å­¦ä¹ å»ºè®®ï¼š</strong></p>
<ul>
<li>å…ˆä»æ¨¡ä»¿ç°æœ‰é¡µé¢å¼€å§‹ï¼Œç†è§£ä»£ç ç»“æ„</li>
<li>é‡ç‚¹å­¦ä¹ Vue3çš„Composition APIå’ŒTypeScript</li>
<li>ç»“åˆåç«¯çŸ¥è¯†ï¼Œç†è§£å‰åç«¯æ•°æ®äº¤äº’æµç¨‹</li>
<li>å¤šåŠ¨æ‰‹å®è·µï¼Œé‡åˆ°é—®é¢˜æŸ¥é˜…å®˜æ–¹æ–‡æ¡£</li>
</ul>
<h2 data-id="heading-6">5. æœ€å</h2>
<p>ä»åç«¯è§†è§’å­¦ä¹ å‰ç«¯ï¼Œæœ€å¤§çš„éšœç¢ä¸æ˜¯æŠ€æœ¯æœ¬èº«ï¼Œè€Œæ˜¯æ€ç»´æ–¹å¼çš„è½¬å˜ã€‚Vue-Vben-Adminé€šè¿‡è‰¯å¥½çš„é¡¹ç›®ç»“æ„å’Œå®Œå–„çš„æ–‡æ¡£ï¼Œå¤§å¤§é™ä½äº†åç«¯å¼€å‘è€…çš„å­¦ä¹ é—¨æ§›ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæ˜¯åç«¯å¼€å‘è€…ï¼Œæƒ³è¦æ‹“å±•å‰ç«¯æŠ€èƒ½ï¼Œæˆ–è€…éœ€è¦å¿«é€Ÿæ­å»ºä¸€ä¸ªä¼ä¸šçº§ç®¡ç†åå°ï¼Œ<strong>Vue-Vben-Admin</strong>ç»å¯¹å€¼å¾—ä¸€è¯•ã€‚å®ƒä¸ä»…èƒ½è§£å†³å®é™…é¡¹ç›®éœ€æ±‚ï¼Œæ›´èƒ½å¸®ä½ æ‰“å¼€å‰ç«¯ä¸–ç•Œçš„å¤§é—¨ï¼Œå‘å…¨æ ˆå¼€å‘è¿ˆå‡ºåšå®çš„ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NASã€å¯¹è±¡å­˜å‚¨ä¸ JuiceFSï¼šç™¾äº¿é‡åŒ–åŸºé‡‘çš„å­˜å‚¨é€‰å‹å®è·µ]]></title>    <link>https://juejin.cn/post/7574600119750017034</link>    <guid>https://juejin.cn/post/7574600119750017034</guid>    <pubDate>2025-11-20T07:18:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574600119750017034" data-draft-id="7574625040659546162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NASã€å¯¹è±¡å­˜å‚¨ä¸ JuiceFSï¼šç™¾äº¿é‡åŒ–åŸºé‡‘çš„å­˜å‚¨é€‰å‹å®è·µ"/> <meta itemprop="keywords" content="åç«¯,è¿ç»´"/> <meta itemprop="datePublished" content="2025-11-20T07:18:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JuiceFS"/> <meta itemprop="url" content="https://juejin.cn/user/2665636828032446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NASã€å¯¹è±¡å­˜å‚¨ä¸ JuiceFSï¼šç™¾äº¿é‡åŒ–åŸºé‡‘çš„å­˜å‚¨é€‰å‹å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2665636828032446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JuiceFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:18:19.000Z" title="Thu Nov 20 2025 07:18:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨é‡åŒ–æŠ•èµ„é¢†åŸŸï¼Œå­˜å‚¨ç³»ç»Ÿçš„æ€§èƒ½ä¸å¯æ‰©å±•æ€§æ˜¯æ”¯æ’‘é«˜æ•ˆç ”ç©¶ä¸è®¡ç®—ä»»åŠ¡çš„å…³é”®åŸºç¡€ã€‚JuiceFS å·²å¹¿æ³›åº”ç”¨äºå¤šå®¶å¤´éƒ¨ç™¾äº¿çº§é‡åŒ–ç§å‹Ÿæœºæ„ï¼Œåœ¨å›æµ‹ä¸æ¨¡å‹è®­ç»ƒç­‰æ ¸å¿ƒç¯èŠ‚ä¸­æ”¯æ’‘é«˜æ€§èƒ½ã€ä½æˆæœ¬ã€å¯å¼¹æ€§æ‰©å±•çš„å­˜å‚¨ä½“ç³»ã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«é‡åŒ–æœºæ„åœ¨å­˜å‚¨å±‚é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜ä»¥åŠ JuiceFS çš„åº”å¯¹æ–¹æ¡ˆï¼Œå¹¶é€šè¿‡ä¸‰ä¸ªå…¸å‹æ¡ˆä¾‹ï¼Œåˆ†åˆ«èšç„¦æˆæœ¬ä¼˜åŒ–ã€å…ƒæ•°æ®æ€§èƒ½æå‡ä¸å¹³æ»‘ä¸Šäº‘è¿™ä¸‰ç±»éœ€æ±‚ã€‚</p>
<h2 data-id="heading-0">01 é‡åŒ–è¡Œä¸šçš„æ•°æ®ç±»å‹ä¸å­˜å‚¨æŒ‘æˆ˜</h2>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹é‡åŒ–è¡Œä¸šä½¿ç”¨æ•°æ®çš„æ¨¡å¼ã€‚é‡åŒ–æŠ•ç ”ä¸­çš„ç¼–ç¨‹è¯­è¨€å’Œæ•°æ®å¤„ç†å·¥å…·ç§ç±»ç¹å¤šï¼ŒåŒ…æ‹¬ Pythonã€Rã€Javaã€MATLAB å’Œ Conda ç­‰ï¼ŒåŒæ—¶ï¼Œæ‰€æ¶‰åŠçš„æ•°æ®ç±»å‹ä¹Ÿéå¸¸ä¸°å¯Œï¼Œå¦‚ CSVã€Parquetã€TXTã€Excel å’Œ HDF ç­‰ã€‚è¿™è¦æ±‚å­˜å‚¨å¹³å°å…·å¤‡çµæ´»æ€§ï¼Œèƒ½å¤Ÿæ”¯æŒå„ç§æ•°æ®æ ¼å¼å¹¶é«˜æ•ˆå­˜å‚¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e91d38c209374424b699a21daa439e8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227899&amp;x-signature=9GEtCqT2ocLsQkBnwv%2BY7htT4Do%3D" alt="" loading="lazy"/></p>
<p>åœ¨é‡åŒ–æŠ•èµ„ä¸­ï¼Œæ•°æ®çš„ä½¿ç”¨å‘ˆç°å‡ºæ˜æ˜¾çš„â€œè¯»å¤šå†™å°‘â€ç‰¹å¾ã€‚ç ”ç©¶å‘˜é¢‘ç¹åœ°ä»ç»Ÿä¸€çš„æ•°æ®æºä¸­è¯»å–æ•°æ®ï¼Œè€Œæ•°æ®çš„å†™å…¥å’Œæ›´æ–°ç›¸å¯¹è¾ƒå°‘ã€‚å„ç±»è¡Œæƒ…æ•°æ®ã€å› å­æ•°æ®ç­‰é€šå¸¸è¢«é›†ä¸­å­˜å‚¨ï¼Œä¾›æ‰€æœ‰ç ”ç©¶å‘˜å…±äº«è¯»å–ã€‚æ— è®ºæ˜¯å› å­ç ”ç©¶è¿˜æ˜¯äº¤æ˜“ç­–ç•¥å¼€å‘ï¼ŒåŸºç¡€æ•°æ®éƒ½ä¼šè¢«åå¤è®¿é—®å’Œä½¿ç”¨ã€‚å› æ­¤ï¼Œå­˜å‚¨ç³»ç»Ÿå¿…é¡»å…·å¤‡é«˜æ•ˆçš„è¯»å–æ€§èƒ½ï¼Œä»¥æ”¯æŒå¿«é€Ÿçš„æ•°æ®è®¿é—®å’Œåˆ†æéœ€æ±‚ã€‚</p>
<p>è¿™ç§æ•°æ®ä½¿ç”¨æ¨¡å¼åœ¨é‡åŒ–ç ”ç©¶çš„æ ¸å¿ƒä»»åŠ¡â€”â€”å›æµ‹ï¼ˆBacktestingï¼‰ä¸­ä¹Ÿå¾—åˆ°äº†å……åˆ†ä½“ç°ã€‚åœ¨å…¸å‹çš„å›æµ‹æµç¨‹ä¸­ï¼Œç ”ç©¶å‘˜å¤šæ¬¡è¯»å–å†å²è¡Œæƒ…æ•°æ®ï¼Œæ„å»ºå› å­ã€ç”Ÿæˆäº¤æ˜“ä¿¡å·å¹¶éªŒè¯ç­–ç•¥è¡¨ç°ã€‚ç¨³å®šä¸”é¢„æµ‹èƒ½åŠ›å¼ºçš„å› å­ä¼šè¢«çº³å…¥å› å­åº“ï¼Œä½œä¸ºæŠ•èµ„å†³ç­–çš„é‡è¦ä¾æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0feb5e55b4341b3b6dd36422e6e417b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227899&amp;x-signature=Yfb19HNveqzg3JCMGadT%2BO5gtjg%3D" alt="" loading="lazy"/></p>
<p>ç”±æ­¤ï¼Œå­˜å‚¨ç³»ç»Ÿé¢ä¸´ç€ä¸€ç³»åˆ—æŒ‘æˆ˜ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<p><strong>é¦–å…ˆï¼Œèƒ½å¤Ÿå¤„ç†å¤šæ ·åŒ–çš„ç¼–ç¨‹è¯­è¨€ä¸æ•°æ®å¤„ç†å·¥å…·</strong>ã€‚</p>
<p><strong>é‡åŒ–æŠ•ç ”çš„å¦ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å®¹é‡è¦æ±‚ä½è€Œæ€§èƒ½è¦æ±‚é«˜</strong>ã€‚è™½ç„¶å­˜å‚¨å®¹é‡éœ€æ±‚é€šå¸¸åœ¨å‡ å TB è‡³å‡ ç™¾ TBï¼Œä½†å¯¹å­˜å‚¨ç³»ç»Ÿçš„æ€§èƒ½è¦æ±‚æé«˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ååé‡å’Œ IOPS ä¸Šã€‚ç”±äºé‡åŒ–ä»»åŠ¡æ¶‰åŠå¤§é‡çš„æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ è®¡ç®—ï¼Œå­˜å‚¨ç³»ç»Ÿå¿…é¡»æä¾›é«˜æ•ˆçš„é¡ºåºè¯»ååé‡å’Œå¿«é€Ÿçš„éšæœºè¯» IOPSï¼Œæ‰èƒ½æ”¯æŒæ•°æ®çš„å¿«é€Ÿå¤„ç†å’Œåˆ†æã€‚</p>
<p><strong>äº‘ç¯å¢ƒçš„é€‚åº”æ€§ä¹Ÿæˆä¸ºé‡åŒ–æŠ•ç ”å­˜å‚¨çš„ä¸€ä¸ªå…³é”®è¦æ±‚</strong>ã€‚éšç€è¶Šæ¥è¶Šå¤šçš„é‡åŒ–å›¢é˜Ÿå¼€å§‹ä½¿ç”¨å…¬æœ‰äº‘æˆ–æ··åˆäº‘ æ„å»ºæŠ€æœ¯å¹³å°ï¼Œå­˜å‚¨ç³»ç»Ÿéœ€è¦å…·å¤‡é«˜å¯ç”¨æ€§ã€å¼¹æ€§æ‰©å±•æ€§ä»¥åŠçµæ´»çš„èµ„æºç®¡ç†èƒ½åŠ›ï¼Œä»¥æ»¡è¶³åŠ¨æ€å­˜å‚¨éœ€æ±‚ï¼Œå¹¶èƒ½å¤Ÿæ ¹æ®è®¡ç®—éœ€æ±‚å¿«é€Ÿè°ƒæ•´å­˜å‚¨èµ„æºã€‚</p>
<p><strong>ä¸æ­¤åŒæ—¶ï¼ŒKubernetes å·²æˆä¸ºé‡åŒ–æŠ•ç ”é¢†åŸŸä¸­èµ„æºç¼–æ’çš„ä¸»æµè§£å†³æ–¹æ¡ˆ</strong>ï¼Œå› æ­¤å­˜å‚¨ç³»ç»Ÿéœ€è¦èƒ½å¤Ÿä¸ Kubernetes è‰¯å¥½é›†æˆï¼Œæ”¯æŒ CSI é©±åŠ¨ã€‚è¿™ä¸€é›†æˆä¸ä»…æå‡äº†å¹³å°çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œè¿˜ä½¿å¾—å­˜å‚¨ç³»ç»Ÿèƒ½å¤Ÿåœ¨äº‘ç¯å¢ƒä¸­æ›´é«˜æ•ˆåœ°ç®¡ç†èµ„æºã€‚</p>
<p><strong>æœ€åï¼Œæ•°æ®å®‰å…¨ä¸æƒé™æ§åˆ¶æ˜¯é‡åŒ–ç ”ç©¶å›¢é˜Ÿçš„æ ¸å¿ƒéœ€æ±‚</strong>ã€‚åœ¨é‡åŒ–æŠ•ç ”è¿‡ç¨‹ä¸­ï¼Œå› å­æ•°æ®ã€äº¤æ˜“ç­–ç•¥ç­‰æ•æ„Ÿä¿¡æ¯çš„ä¿æŠ¤è‡³å…³é‡è¦ã€‚å­˜å‚¨ç³»ç»Ÿå¿…é¡»æä¾›å¼ºå¤§çš„æ¨¡å—åŒ–è®¿é—®æƒé™ç®¡ç†æœºåˆ¶ï¼Œä¿éšœæ•°æ®çš„éšç§ä¸å®‰å…¨æ€§ã€‚æ­¤å¤–ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„æ•°æ®å­˜å‚¨è½¬å‘äº‘ç¯å¢ƒï¼Œæ•°æ®åŠ å¯†ã€å®¡è®¡å’Œåˆè§„ç®¡ç†ç­‰åŠŸèƒ½æˆä¸ºå¿…é¡»æä¾›çš„å®‰å…¨æªæ–½ï¼Œä»¥ç¡®ä¿æ•æ„Ÿæ•°æ®åœ¨äº‘ä¸Šå®‰å…¨å­˜å‚¨å’Œè®¿é—®ã€‚</p>
<h2 data-id="heading-1">02 ä¸»æµå­˜å‚¨æ–¹æ¡ˆåˆ©å¼Šåˆ†æï¼š NAS vs å¯¹è±¡å­˜å‚¨ vs JuiceFS</h2>
<h3 data-id="heading-2">NAS</h3>
<p>è®¸å¤šé‡åŒ–å›¢é˜Ÿåœ¨åˆæœŸå¾€å¾€ä¼šé€‰æ‹©ä¸€ç§ â€œå¼€ç®±å³ç”¨â€ çš„æ–¹å¼æ¥æ­å»ºå­˜å‚¨ç³»ç»Ÿï¼Œæœ€å¸¸è§çš„å°±æ˜¯åŸºäºä¼ ç»Ÿåè®®çš„ NASï¼ˆNetwork Attached Storageï¼‰ï¼Œä½¿ç”¨ NFS æˆ– Samba åè®®è¿›è¡Œè®¿é—®ã€‚åœ¨æ•°æ®è§„æ¨¡æ™®éå¤„äºå‡ å TB åˆ°å‡ ç™¾ TB çš„æƒ…å†µä¸‹ï¼Œå¾ˆå¤šç§æœ‰æœºæˆ¿é‡‡ç”¨ NAS æ¶æ„å³å¯æ»¡è¶³éœ€æ±‚ï¼Œéƒ¨ç½²ç®€å•ã€ç®¡ç†æ–¹ä¾¿ã€æˆæœ¬åœ¨å¯æ§èŒƒå›´å†…ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ¡ˆåœ¨å®è·µä¸­ä¹Ÿæš´éœ²å‡ºä¸€äº›æ˜æ˜¾çš„é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b604501d266484696ce61b4bb70feb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227899&amp;x-signature=mqp9iHrHkD5ot4dfTwTnbfh2%2BiI%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆæ˜¯æˆæœ¬é—®é¢˜ã€‚å¦‚æœå¸Œæœ›åœ¨ IDC çº¿ä¸‹æœºæˆ¿ä¸­è·å¾—è¾ƒé«˜çš„å­˜å‚¨æ€§èƒ½ï¼Œé€šå¸¸å¿…é¡»ä½¿ç”¨å…¨é—ªå­˜ NAS ç³»ç»Ÿã€‚å…¨é—ªè™½ç„¶æ€§èƒ½æ›´å¥½ï¼Œä½†ä»·æ ¼æ˜‚è´µï¼Œæ•´ä½“æŠ•èµ„è¾ƒå¤§ã€‚è€Œæ··é—ªæ¶æ„ï¼ˆSSD ä¸ HDD æ··åˆï¼‰åœ¨é«˜å¹¶å‘è®¿é—®åœºæ™¯ä¸‹å¾€å¾€æ€§èƒ½ä¸è¶³ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šä¸ªç ”ç©¶å‘˜åŒæ—¶è¯»å–æ•°æ®æ—¶ï¼ŒIO ååå®¹æ˜“æˆä¸ºç“¶é¢ˆã€‚</p>
<p>å…¶æ¬¡ï¼Œäº‘ä¸Š NAS çš„æ€§èƒ½å—é™äºå®¹é‡ç»‘å®šã€‚åœ¨å…¬æœ‰äº‘ç¯å¢ƒä¸­ï¼Œè®¸å¤šå‚å•†çš„ NAS æˆ–å¹¶è¡Œæ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚éƒ¨åˆ† PFS äº§å“ï¼‰ä¼šå°†ååé‡ä¸è´­ä¹°çš„å®¹é‡ç›´æ¥ç»‘å®šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªé‡åŒ–å›¢é˜Ÿåªéœ€è¦ 100 TB çš„å­˜å‚¨å®¹é‡ï¼Œä½†å…¶å›æµ‹å’Œç­–ç•¥è®¡ç®—éœ€è¦è¾¾åˆ°è¾ƒé«˜çš„ååæˆ– IOPSï¼Œä¾‹å¦‚èšåˆæ¯ç§’ 50GB ä»¥ä¸Šè¯»æˆ–è€…æ¯ç§’ä¸Šç™¾ä¸‡æ¬¡æ“ä½œï¼Œå°±å¿…é¡»â€œè¶…é…â€è´­ä¹°åˆ° PB çº§å®¹é‡æ‰èƒ½æ»¡è¶³æ€§èƒ½éœ€æ±‚ã€‚è¿™ç§æ¨¡å¼æ˜¾ç„¶ä¼šå¸¦æ¥èµ„æºæµªè´¹ä¸æˆæœ¬ä¸Šå‡ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªé—®é¢˜æ˜¯åè®®å±‚é¢å¯¼è‡´çš„æ€§èƒ½ç“¶é¢ˆã€‚NAS åè®®ä¾èµ–å†…æ ¸å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®äº¤äº’ï¼Œå½“è´Ÿè½½é«˜æ—¶ï¼Œç”±äºæ•°æ®ä¸å…ƒæ•°æ®é€šè¿‡åŒä¸€é€šé“ä¼ è¾“ï¼ˆNFS4.2 å‰ï¼‰ï¼Œå®¹æ˜“åœ¨é«˜å¹¶å‘è¯»å†™ä¸‹å½¢æˆæ‹¥å µï¼Œä»è€Œå¼•å‘æ€§èƒ½ä¸‹é™ç”šè‡³å‡ºç°å»¶è¿ŸæŠ–åŠ¨ã€‚è¿™ç§æƒ…å†µè™½ç„¶ä¸æ˜¯æ¯æ¬¡éƒ½ä¼šå‡ºç°ï¼Œä½†åœ¨é‡åŒ–ç ”ç©¶é«˜å³°æœŸæˆ–é›†ä¸­å›æµ‹é˜¶æ®µææ˜“æš´éœ²ã€‚</p>
<p><strong>ç»¼ä¸Šæ‰€è¿°ï¼Œè™½ç„¶ NAS ç³»ç»Ÿå…·å¤‡â€œå³æ’å³ç”¨â€ã€éƒ¨ç½²ç®€ä¾¿ã€å…¼å®¹æ€§å¥½çš„ä¼˜ç‚¹ï¼Œä½†å…¶åœ¨æˆæœ¬ã€æ€§èƒ½æ‰©å±•æ€§ä»¥åŠé«˜å¹¶å‘è®¿é—®æ•ˆç‡æ–¹é¢ä»å­˜åœ¨æ˜æ˜¾çŸ­æ¿</strong>ã€‚</p>
<h3 data-id="heading-3">å¯¹è±¡å­˜å‚¨</h3>
<p>å¯¹è±¡å­˜å‚¨ä¹Ÿæ˜¯é‡åŒ–è¡Œä¸šä¼šè€ƒè™‘çš„ä½æˆæœ¬çš„è§£å†³æ–¹æ¡ˆï¼Œå°½ç®¡å¯¹è±¡å­˜å‚¨çš„å•æ¬¡è¯·æ±‚å»¶è¿Ÿè¾ƒé«˜ï¼Œä½†å®ƒåœ¨å¤„ç†å¤§ååé‡çš„é¡ºåºè¯»å†™æ—¶è¡¨ç°è¾ƒå¥½ã€‚è®¸å¤šç ”ç©¶å‘˜å¯¹å…¶ä¸šåŠ¡ä»£ç è¿›è¡Œäº†æ”¹é€ ï¼Œé¿å…ä½¿ç”¨éšæœºè¯»å†™ï¼Œè€Œæ˜¯å°†æ•°æ®èšåˆæˆé€‚åˆé¡ºåºè¯»å–çš„æ ¼å¼ï¼Œå†é€šè¿‡å†…å­˜è¿›è¡Œéšæœºæ“ä½œã€‚è¿™ç§åšæ³•è™½ç„¶æœ‰æ•ˆï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17c51700364b4ccab0f06957e879359e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227899&amp;x-signature=Lx8xTwPXGjBZ9EU1MvYezwbOARI%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆï¼Œå¯¹è±¡å­˜å‚¨åªèƒ½é€šè¿‡ S3 åè®®è¿›è¡Œè®¿é—®ã€‚å¯¹äºå·²ç»ä½¿ç”¨ POSIX æŒ‚è½½ç‚¹çš„åº”ç”¨ï¼Œè¿ç§»åˆ°å¯¹è±¡å­˜å‚¨æ—¶éœ€è¦å¯¹ä»£ç è¿›è¡Œæ”¹é€ ï¼Œè¿™å¯¹åŸæœ‰ç³»ç»Ÿæœ‰ä¸€å®šçš„ä¾µå…¥æ€§ã€‚æ­¤å¤–ï¼Œå¯¹è±¡å­˜å‚¨åŸç”Ÿç¼ºä¹å…ƒæ•°æ®ç®¡ç†ï¼Œç”±äºå…¶æ‰å¹³ç»“æ„ï¼ŒI/O æ“ä½œçš„å“åº”é€Ÿåº¦è¾ƒæ…¢ï¼Œå°¤å…¶æ˜¯æ–‡ä»¶é‡å‘½åç­‰æ“ä½œã€‚å¦‚æœéœ€è¦æ›´æ”¹æ–‡ä»¶åï¼Œå®é™…ä¸Šéœ€è¦åˆ é™¤åŸæ–‡ä»¶å¹¶å¤åˆ¶æ–°çš„æ–‡ä»¶ï¼Œè¿™åœ¨æ€§èƒ½ä¸Šè¡¨ç°è¾ƒå·®ã€‚</p>
<p>å…¶æ¬¡ï¼Œå¯¹è±¡å­˜å‚¨ä¸Šçš„æ–‡ä»¶ä¸å¯å˜ï¼ˆimmutableï¼‰ï¼Œè¿™æ„å‘³ç€å¦‚æœè¦ä¿®æ”¹æ•°æ®ï¼ˆä¾‹å¦‚åœ¨ Parquet æ–‡ä»¶ä¸­æ·»åŠ ä¸€åˆ—ï¼‰ï¼Œåªèƒ½é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶æ¥å®ç°ï¼Œè€Œä¸èƒ½ç›´æ¥åœ¨åŸæ–‡ä»¶ä¸Šä¿®æ”¹ã€‚è¿™ç§ä¸å¯å˜ç‰¹æ€§åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œå¦‚æ•°æ®åº“æ–‡ä»¶å¯èƒ½å¯¼è‡´å¾ˆå¤§çš„ä¸ä¾¿ã€‚</p>
<p>æ­¤å¤–ï¼Œé¢‘ç¹è¯»å–å¯¹è±¡å­˜å‚¨ä¼šäº§ç”Ÿé¢å¤–çš„æµå‡ºè´¹ç”¨ï¼Œè¿™å¯¹äºé‡åŒ–è¡Œä¸šé«˜é¢‘è¯»å†™çš„éœ€æ±‚æ¥è¯´ï¼Œå¯èƒ½ä¼šé€ æˆè¾ƒé«˜çš„æˆæœ¬ã€‚åŒæ—¶ï¼Œè™½ç„¶å¯¹è±¡å­˜å‚¨åœ¨å¤§ååé‡ä¸‹è¡¨ç°ä¸é”™ï¼Œä½†å®ƒçš„æ€§èƒ½å®Œå…¨ä¾èµ–äºå­˜å‚¨ç³»ç»Ÿæœ¬èº«ï¼Œåœ¨é«˜å¹¶å‘è®¿é—®ä¸‹å¯èƒ½ä»ç„¶æ— æ³•æ»¡è¶³é‡åŒ–ç ”ç©¶å¯¹é€Ÿåº¦å’Œå®æ—¶æ€§çš„è¦æ±‚ã€‚</p>
<h3 data-id="heading-4">JuiceFS</h3>
<p>JuiceFS æ˜¯ä¸€æ¬¾åŸºäºå¯¹è±¡å­˜å‚¨çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå…¼å®¹ POSIX ï¼Œèƒ½å¤ŸåŒæ—¶ç®¡ç†ç»“æ„åŒ–ä¸éç»“æ„åŒ–æ•°æ®ï¼Œä¸ºé‡åŒ–ç ”ç©¶æä¾›ç»Ÿä¸€ã€é«˜æ€§èƒ½çš„æ•°æ®å­˜å‚¨å¹³å°ã€‚ç³»ç»Ÿæ”¯æŒ CSI é©±åŠ¨ï¼Œèƒ½ä¸ Kubernetes æ·±åº¦ç»“åˆï¼ŒåŒæ—¶å…·å¤‡äº‘åŸç”Ÿç‰¹æ€§ï¼Œå¯çµæ´»éƒ¨ç½²åœ¨å…¬æœ‰äº‘ã€ç§æœ‰äº‘æˆ–æ··åˆäº‘ç¯å¢ƒä¸­ã€‚</p>
<p>JuiceFS é‡‡ç”¨æ•°æ®ä¸å…ƒæ•°æ®åˆ†ç¦»çš„æ¶æ„ã€‚æ•°æ®è¢«åˆ‡åˆ†æˆå°å—å­˜å‚¨åœ¨å¯¹è±¡å­˜å‚¨ä¸­ï¼Œå…ƒæ•°æ®åˆ™ç”±ç‹¬ç«‹å¼•æ“ç®¡ç†å¹¶ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚è¿™ç§è®¾è®¡æ˜¾è‘—æå‡äº†è®¿é—®æ€§èƒ½ï¼Œä½¿æ–‡ä»¶å…ƒæ•°æ®æ“ä½œï¼ˆå¦‚é‡å‘½åã€æŸ¥æ‰¾ï¼Œè·å–æ–‡ä»¶å±æ€§ç­‰ï¼‰æ— éœ€é¢‘ç¹è®¿é—®åº•å±‚å­˜å‚¨ï¼Œä»è€Œå®ç°é«˜ååé‡ã€ä½å»¶è¿Ÿå’Œé«˜ IOPS çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<p>åœ¨å®‰å…¨ä¸æƒé™æ–¹é¢ï¼ŒJuiceFS æä¾›åŸºäº Token å’Œ POSIX ACL çš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œå¹¶æ”¯æŒæ•°æ®ä¼ è¾“ä¸å­˜å‚¨åŠ å¯†ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¯¹è±¡å­˜å‚¨ä¸ç¼“å­˜ä¸­çš„æ•°æ®å‡é‡‡ç”¨åˆ†å—å­˜æ”¾æ–¹å¼ï¼Œä»æ¶æ„å±‚é¢è¿›ä¸€æ­¥æå‡äº†æ•°æ®çš„å®‰å…¨æ€§ä¸åˆè§„æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e29aade08215450fa7f49863eef9f07a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227899&amp;x-signature=fvHqPNtHwXII8NWH6Ku2zFjGO84%3D" alt="" loading="lazy"/></p>
<p>å®é™…æ“ä½œæ—¶ï¼Œç”¨æˆ·é€šè¿‡ä¸‹è½½å¹¶å®‰è£… JuiceFS çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ <code>juicefs mount</code> å‘½ä»¤å°†å…¶æŒ‚è½½åˆ°æœ¬åœ°ç³»ç»Ÿä¸Šã€‚ä¸€æ—¦æŒ‚è½½å®Œæˆï¼Œç”¨æˆ·çš„ä¸šåŠ¡å°±èƒ½é€šè¿‡ POSIX æŒ‚è½½ç‚¹è¿›è¡Œè®¿é—®ï¼Œæ“ä½œæ–¹å¼ä¸æœ¬æœºæ–‡ä»¶ç³»ç»Ÿç±»ä¼¼ï¼Œæ–¹ä¾¿ä¸ç°æœ‰çš„åº”ç”¨å…¼å®¹ã€‚</p>
<p>è¿™æ ·çš„æ¶æ„åœ¨é‡åŒ–è¡Œä¸šä¸­çš„åº”ç”¨å¸¦æ¥äº†å¤šä¸ªæ˜¾è‘—çš„ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>é«˜ååé‡ä¸é«˜ IOPS æ”¯æŒ</strong>ï¼šé‡åŒ–æŠ•ç ”ä¸­çš„æ•°æ®ä½¿ç”¨æ¨¡å¼å¤§å¤šæ˜¯â€œè¯»å¤šå†™å°‘â€ï¼Œå°¤å…¶æ˜¯å›æµ‹ã€å› å­ç ”ç©¶ç­‰ä»»åŠ¡ï¼Œéœ€è¦é¢‘ç¹åœ°è¯»å–å¤§é‡æ•°æ®ã€‚JuiceFS çš„åˆ‡å—å­˜å‚¨å’Œé«˜æ•ˆçš„å¤šçº§æ•°æ®ç¼“å­˜èƒ½å¤Ÿæä¾› é«˜ååé‡å’Œé«˜ IOPS æ”¯æŒï¼Œæ»¡è¶³é‡åŒ–ç ”ç©¶å¯¹æ•°æ®è®¿é—®çš„è‹›åˆ»è¦æ±‚ã€‚</li>
<li><strong>å¼¹æ€§æ‰©å±•ä¸é™æœ¬</strong>ï¼šé‡åŒ–ç ”ç©¶å¸¸å¸¸é¢ä¸´åŠ¨æ€çš„å­˜å‚¨éœ€æ±‚ï¼ŒJuiceFS å¤©ç”Ÿå…·å¤‡ å¼¹æ€§æ‰©å±• èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®éœ€æ±‚åŠ¨æ€è°ƒæ•´å­˜å‚¨å’Œç¼“å­˜èµ„æºã€‚é€šè¿‡å°†å¯¹è±¡å­˜å‚¨ä½œä¸ºåº•å±‚å­˜å‚¨æ¶æ„ï¼Œç»“åˆ åˆ†å¸ƒå¼ç¼“å­˜ï¼ŒJuiceFS å¯ä»¥æ˜¾è‘—é™ä½å­˜å‚¨æˆæœ¬ï¼Œé¿å…äº†å…¨é—ªå­˜å‚¨çš„é«˜æ˜‚å¼€é”€ã€‚</li>
<li><strong>æ•°æ®å®‰å…¨</strong>ï¼šåœ¨é‡åŒ–æŠ•ç ”ä¸­ï¼Œå› å­æ•°æ®å’Œäº¤æ˜“ç­–ç•¥ç­‰å±äºæ ¸å¿ƒèµ„äº§ï¼Œå…¶å®‰å…¨æ€§è‡³å…³é‡è¦ã€‚JuiceFS é€šè¿‡æ•°æ®åˆ‡å—ä¸åŠ å¯†æœºåˆ¶æœ‰æ•ˆä¿éšœæ•°æ®å®‰å…¨ã€‚å°¤å…¶æ˜¯å¯¹äºå¯¹ä¸Šäº‘ä»å­˜é¡¾è™‘çš„æœºæ„ï¼Œè¿™ä¸€åˆ†å—åŠ å¯†ç­–ç•¥èƒ½æ˜¾è‘—é™ä½æ•°æ®æ³„éœ²é£é™©â€”â€”å³ä¾¿éƒ¨åˆ†æ•°æ®è¢«æˆªè·ï¼Œæ”»å‡»è€…ä¹Ÿæ— æ³•åœ¨ç¼ºä¹å…ƒæ•°æ®çš„æƒ…å†µä¸‹è¿˜åŸåŸå§‹å†…å®¹ï¼Œä»è€Œç¡®ä¿æ•æ„Ÿä¿¡æ¯çš„å®‰å…¨ä¸åˆè§„ã€‚</li>
<li><strong>äº‘ç¯å¢ƒå…¼å®¹æ€§</strong>ï¼šéšç€äº‘è®¡ç®—å’Œå…¬æœ‰äº‘çš„æ™®åŠï¼Œé‡åŒ–æŠ•ç ”é€æ­¥å‘äº‘ç¯å¢ƒè¿ç§»ã€‚JuiceFS æ”¯æŒè·¨äº‘åŒæ­¥ï¼Œèƒ½å¤Ÿåœ¨å¤šäº‘æˆ–æ··åˆäº‘ç¯å¢ƒä¸­é«˜æ•ˆè¿è¡Œï¼Œä¸ºé‡åŒ–ç ”ç©¶æä¾›äº†æ›´å¤§çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</li>
</ol>
<p>å¯¹äºçº¿ä¸‹éƒ¨ç½²çš„é‡åŒ–ä¼ä¸šï¼ŒJuiceFS åŒæ ·æ˜¯å¯è¡Œä¸”é«˜æ•ˆçš„é€‰æ‹©ã€‚ä¼ ç»Ÿçº¿ä¸‹å­˜å‚¨å¤šé‡‡ç”¨æ··é—ªæˆ–æœºæ¢°ç¡¬ç›˜ï¼Œæ€§èƒ½å¾€å¾€éš¾ä»¥æ»¡è¶³é‡åŒ–ç ”ç©¶çš„é«˜å¹¶å‘éœ€æ±‚ã€‚JuiceFS é€šè¿‡å……åˆ†åˆ©ç”¨ä¸šåŠ¡æœºå™¨çš„æœ¬åœ°ç¼“å­˜ç›˜å’Œé«˜æ•ˆçš„ç¼“å­˜æœºåˆ¶ï¼Œåœ¨ä½æˆæœ¬ä¸‹å³å¯å®ç°æ¥è¿‘å…¨é—ªçš„æ€§èƒ½ï¼Œæ˜¾è‘—é™ä½ç¡¬ä»¶æŠ•å…¥ã€‚åŒæ—¶ï¼Œå…¶è¿ç»´ç®¡ç†ç®€å•ã€ç¨³å®šæ€§é«˜ï¼Œå®¢æˆ·åé¦ˆè¡¨æ˜ç³»ç»Ÿè¿è¡Œå¯é ã€ç»´æŠ¤è´Ÿæ‹…è¾ƒè½»ã€‚</p>
<h2 data-id="heading-5">03 æ¡ˆä¾‹</h2>
<h3 data-id="heading-6">æ¡ˆä¾‹ 1 - æå‡å¯¹è±¡å­˜å‚¨æ€§èƒ½ï¼Œæ•´ä½“é™æœ¬å¢æ•ˆ</h3>
<p>ä¸ºäº†è¿›ä¸€æ­¥é™ä½å­˜å‚¨æˆæœ¬ï¼Œè¯¥ä¼ä¸šé€‰æ‹©å°†æ•°æ®è¿ç§»è‡³å¯¹è±¡å­˜å‚¨ã€‚åœ¨å›æµ‹ä¸šåŠ¡ä¸­ï¼Œä»–ä»¬åŸå…ˆä½¿ç”¨çš„æ˜¯ä¸€ä¸ªè‡ªç ”çš„æ¥å£ï¼Œé€šè¿‡ S3 API ç›´æ¥è®¿é—® Amazon S3 å¯¹è±¡å­˜å‚¨ã€‚ç”±äºä»–ä»¬çš„ä¸šåŠ¡ä¸»è¦æ˜¯å†™å…¥å¤§å—æ•°æ®å¹¶è¿›è¡Œé¡ºåºè¯»å–ï¼Œè¿™ç§å­˜å‚¨æ¨¡å¼å³ä½¿æ²¡æœ‰ç¼“å­˜ä¹Ÿèƒ½å¤Ÿå‹‰å¼ºè¿è¡Œã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™ç§åšæ³•ä»ç„¶å­˜åœ¨ä¸€äº›æ˜æ˜¾çš„å¼Šç«¯ã€‚</p>
<p>é¦–å…ˆï¼Œä½¿ç”¨ S3 API å¯¹ä¸šåŠ¡ä»£ç äº§ç”Ÿäº†ä¾µå…¥æ€§ï¼Œæ„å‘³ç€å¦‚æœ API å‡ºç°é—®é¢˜ï¼Œä¸šåŠ¡ä»£ç çš„è°ƒè¯•å’Œç»´æŠ¤å°†å˜å¾—éå¸¸å›°éš¾ã€‚æ­¤å¤–ï¼Œè¯¥ API æ²¡æœ‰å®ç°ç¼“å­˜ï¼Œä»…åšäº†åè®®è½¬æ¢ï¼Œä¸€å®šç¨‹åº¦ä¸Šæ€§èƒ½ä¹Ÿæœ‰ä¸Šé™ã€‚ç”±äºè¿™äº›åŸå› ï¼Œä¸šåŠ¡å›¢é˜Ÿå¹¶ä¸å¸Œæœ›é•¿æœŸä¾èµ–è¿™ç§æ¨¡å¼ã€‚</p>
<p>ä¸ºäº†æ”¹å–„è¿™ä¸€çŠ¶å†µï¼Œè¯¥ä¼ä¸šå†³å®šè¿ç§»åˆ° JuiceFS ä¼ä¸šç‰ˆã€‚è¿ç§»ä¹‹åï¼Œä¸šåŠ¡ä»£ç ä¸å†ä¾èµ–äº S3 APIï¼ŒJuiceFS ä½œä¸ºå¯Œå®¢æˆ·ç«¯ç›´æ¥æŒ‚è½½åœ¨ä¸šåŠ¡æœºå™¨ä¸Šã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸šåŠ¡ä»£ç å‡ ä¹æ²¡æœ‰å—åˆ°ä¾µå…¥ï¼Œå¼€å‘äººå‘˜å¯ä»¥ç»§ç»­æŒ‰åŸæœ‰æ–¹å¼ç¼–è¯‘å’Œè¿è¡Œä»£ç ã€‚åŒæ—¶ï¼Œä¸šåŠ¡æœºå™¨ä¸Šçš„ NVMe ç¡¬ç›˜è¢«ç”¨ä½œåˆ†å¸ƒå¼ç¼“å­˜ï¼Œè¿™æœ‰æ•ˆä¼˜åŒ–äº†æ•°æ®è®¿é—®æ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7096dc2d0414b17a2ab3205c7191030~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227899&amp;x-signature=aPEY%2FFsLx4mvgyJKxyCp64wnVfI%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨ JuiceFS å¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½æ”¹è¿›ï¼Œå®¢æˆ·å¾—ä»¥åœ¨ä½æˆæœ¬çš„å¯¹è±¡å­˜å‚¨ä¸Šå®ç°é«˜æ€§èƒ½è¯»å†™ï¼šé¦–å…ˆï¼Œæœ¬åœ°ç¼“å­˜é¿å…äº†é‡å¤è®¿é—®è¿œç¨‹å­˜å‚¨ï¼Œæ˜¾è‘—é™ä½è¯»å–å»¶è¿Ÿï¼›å…¶æ¬¡ï¼ŒJuiceFS çš„åˆ‡å—ä¸é¢„è¯»æœºåˆ¶å……åˆ†åˆ©ç”¨äº†å¯¹è±¡å­˜å‚¨å¸¦å®½ï¼Œä½¿å•æ–‡ä»¶è¯»å–ä¹Ÿèƒ½è¾¾åˆ°ç³»ç»Ÿæ€§èƒ½ä¸Šé™ã€‚æ•´ä½“ä¸Šï¼Œè¿ç§»åçš„ç³»ç»Ÿåœ¨æ€§èƒ½å’Œç»´æŠ¤ä¾¿åˆ©æ€§ä¸Šå‡æœ‰æ˜æ˜¾æå‡ã€‚</p>
<p>å®¢æˆ·çš„ç¥ç»ç½‘ç»œè®­ç»ƒä»»åŠ¡åŒæ ·ä» JuiceFS çš„ä¼˜åŒ–ä¸­è·ç›Šã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿéœ€è¦è¯»å–çº¦ 10 ä¸‡ä¸ªæ–‡ä»¶ï¼ˆæ¯ä¸ªçº¦ 24MBï¼‰ï¼Œå¹¶åœ¨éšæœºæ‰“æ•£ååå¤è¯»å–ã€‚æœªä½¿ç”¨ç¼“å­˜æ—¶ï¼Œæ¯è½®è®­ç»ƒéƒ½éœ€é‡æ–°åŠ è½½æ‰€æœ‰æ–‡ä»¶ï¼Œäº§ç”Ÿå·¨å¤§çš„ç½‘ç»œæµé‡ã€‚è€Œå¼•å…¥ JuiceFS åï¼Œé¦–æ¬¡è¯»å–çš„æ•°æ®ä¼šè‡ªåŠ¨ç¼“å­˜åˆ°æœ¬åœ°ï¼Œåç»­è®­ç»ƒå¯ç›´æ¥ä»ç¼“å­˜æ± ä¸­è·å–ï¼Œå¤§å¹…å‡å°‘å¸¦å®½å ç”¨å¹¶æ˜¾è‘—æå‡æ•´ä½“è®­ç»ƒæ•ˆç‡ï¼Œå®Œå…¨æ»¡è¶³å®¢æˆ·è®­ç»ƒä½¿ç”¨å¯¹å­˜å‚¨çš„éœ€æ±‚ã€‚</p>
<h3 data-id="heading-7">æ¡ˆä¾‹ 2 - ä¸šåŠ¡å¯¹å…ƒæ•°æ®è¦æ±‚æé«˜</h3>
<p>å®¢æˆ·ä¸»è¦å°† JuiceFS ç”¨äºå›æµ‹ä¸šåŠ¡ã€‚è¯¥å®¢æˆ·ä»å¤–éƒ¨è´­ä¹°è¡Œæƒ…æ•°æ®ï¼Œé€šå¸¸æ˜¯ CSV æ ¼å¼ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ç›®å½•ä¸­ã€‚ä¸åŒäºå…¶ä»–å®¢æˆ·å°†æ•°æ®è¿›è¡Œèšåˆï¼Œè¿™ä¸ªå®¢æˆ·å°†åŸå§‹æ•°æ®ç›´æ¥å­˜æ”¾åœ¨æ–‡ä»¶å¤¹å†…ï¼Œé€ æˆäº†æ›´å¤§çš„æ•°æ®è®¿é—®è´Ÿæ‹…ã€‚æ¯ä¸ªè‚¡ç¥¨çš„å†å²è¡Œæƒ…æ•°æ®è¢«åˆ†å¼€å­˜å‚¨ï¼Œæ¯ä¸ªæ–‡ä»¶ä»£è¡¨ä¸€æ”¯è‚¡ç¥¨ä¸€å¹´çš„æ•°æ®ï¼Œè¿™äº›æ–‡ä»¶æŒ‰æœˆå’Œå¹´åˆ†å¸ƒåœ¨ä¸åŒç›®å½•ä¸‹ã€‚<strong>æ¯æ¬¡éœ€è¦è¯»å–æŸä¸€æ—¥æœŸçš„è¡Œæƒ…æ•°æ®æ—¶ï¼Œå¿…é¡»éšæœºè¯»å–å¹¶å¤„ç†çº¦ 6000 ä¸ªæ–‡ä»¶ï¼Œç„¶åå°†è¿™äº›æ–‡ä»¶æŒ‰é¡ºåºæ’åˆ—ã€‚ä¸ºäº†æ”¯æŒå›æµ‹ï¼Œè¿™äº›æ•°æ®è¢«ç”¨æ¥å¯åŠ¨æ•°ç™¾å°è™šæ‹Ÿæœºï¼Œè¿›è¡Œ 4000 è‡³ 6000 ä¸ªå›æµ‹ä»»åŠ¡</strong>ã€‚</p>
<p>è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œéšæœºè¯»å–å¤§é‡æ–‡ä»¶å¯¹å­˜å‚¨ç³»ç»Ÿé€ æˆäº†å·¨å¤§çš„è´Ÿæ‹…ï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¹¶å‘è¯»å†™çš„åœºæ™¯ä¸‹ï¼Œå…ƒæ•°æ®çš„è®¿é—®æ•ˆç‡ä¸¥é‡å½±å“äº†æ•´ä½“æ€§èƒ½ã€‚è¿™ä¸ªå®¢æˆ·åŸæœ¬ä½¿ç”¨ JuiceFS ç¤¾åŒºç‰ˆï¼Œå¹¶ç»“åˆäº‘ä¸Š Redis æœåŠ¡æ¥ç¼“å­˜éƒ¨åˆ†æ•°æ®ã€‚è™½ç„¶ Redis æä¾›äº†è‰¯å¥½çš„æ€§èƒ½ï¼Œä½†å®ƒçš„ QPS ä¸Šé™ä¸º 50 ä¸‡ä¸ªï¼Œè¿™å¯¹äºè¯¥å®¢æˆ·çš„é«˜å¹¶å‘å›æµ‹ä»»åŠ¡æ¥è¯´å·²ç»æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚å½“å›æµ‹ä»»åŠ¡è¾¾åˆ° 12,000 ä¸ªæ—¶ï¼ŒRedis çš„æ€§èƒ½è¾¾åˆ°äº†ç“¶é¢ˆï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå˜å¾—éå¸¸ç¼“æ…¢ï¼Œå›æµ‹ä»»åŠ¡æ— æ³•é¡ºåˆ©å®Œæˆã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®¢æˆ·å°è¯•ä½¿ç”¨ JuiceFS ä¼ä¸šç‰ˆã€‚ä¼ä¸šç‰ˆçš„å…ƒæ•°æ®æœåŠ¡åœ¨æ€§èƒ½ä¸Šæœ‰äº†æ˜¾è‘—çš„æå‡ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§é‡å…ƒæ•°æ®è¯·æ±‚æ—¶ï¼Œä¼ä¸šç‰ˆå¯æ”¯æŒæ›´é«˜çš„å¹¶å‘é‡ã€‚ä¼ä¸šç‰ˆçš„å…ƒæ•°æ®æœåŠ¡é‡‡ç”¨äº†åŸºäºç›®å½•æ ‘ç»“æ„çš„ç®¡ç†æ–¹å¼ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªæ›´åŠ é«˜æ•ˆçš„è¯·æ±‚å¤„ç†æœåŠ¡ã€‚å®¢æˆ·ä¸å†éœ€è¦é€šè¿‡ KV å­˜å‚¨æ–¹å¼è¯·æ±‚å¤šä¸ªæ“ä½œï¼Œè€Œæ˜¯é€šè¿‡ç®€å•çš„è¯·æ±‚å‘ŠçŸ¥å…ƒæ•°æ®ç³»ç»Ÿè¯»å–æ–‡ä»¶ã€‚<strong>ä¼ä¸šç‰ˆå…ƒæ•°æ®è¯·æ±‚çš„å•æ¬¡å¤„ç†æ•ˆç‡çº¦ä¸ºç¤¾åŒºç‰ˆçš„ 6 å€ï¼Œå› æ­¤åœ¨æ‰§è¡Œç›¸åŒä¸šåŠ¡æ—¶ï¼Œæ‰€éœ€ QPS ä»…ä¸ºç¤¾åŒºç‰ˆçš„å…­åˆ†ä¹‹ä¸€ï¼Œæ•´ä½“æ‰§è¡Œæ•ˆç‡æ›´é«˜</strong>ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–JuiceFS ä¼ä¸šç‰ˆè¿˜æä¾›æ›´å¼ºåŠ›çš„å…ƒæ•°æ®å®¢æˆ·ç«¯ç¼“å­˜æœºåˆ¶ï¼šå¤§é‡åªè¯»è¯·æ±‚ï¼ˆå¦‚ <code>getattr</code>ã€<code>lookup</code>ï¼‰å¯ç›´æ¥å‘½ä¸­ç¼“å­˜ï¼Œæ˜¾è‘—é™ä½äº†å¯¹å…ƒæ•°æ®æœåŠ¡çš„è®¿é—®å‹åŠ›ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç³»ç»Ÿå…±å¤„ç†çº¦ 50 ä¸‡ QPS çš„åªè¯»å…ƒæ•°æ®è¯·æ±‚ï¼Œå…¶ä¸­ä»…çº¦ 4 ä¸‡å®é™…è½åˆ°å…ƒæ•°æ®æœåŠ¡ç«¯ã€‚å†åŠ ä¸Šä¼ä¸šç‰ˆå…ƒæ•°æ®æœåŠ¡æœ¬èº«çš„é«˜æ•ˆå¤„ç†èƒ½åŠ›ï¼Œæ•´ä½“ç³»ç»Ÿèƒ½å¤Ÿåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¿æŒç¨³å®šè¿è¡Œï¼ŒCPU ä½¿ç”¨ç‡ä»…çº¦ 40%ï¼Œå®¢æˆ·èƒ½å¤Ÿç¨³å®šæ”¯æŒå¤šè¾¾ 12,000 ä¸ªå›æµ‹ä»»åŠ¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/556a434734004ca0ba436fd1718de331~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227899&amp;x-signature=RnJ4G4EQ2BSy0sLJG1qOMUIusnQ%3D" alt="" loading="lazy"/></p>
<p>ä»è¿™ä¸ªæ¡ˆä¾‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒJuiceFS ä¼ä¸šç‰ˆåœ¨é‡åŒ–è¡Œä¸šä¸­èƒ½å¤Ÿæœ‰æ•ˆåº”å¯¹é«˜å¹¶å‘è¯»å†™ã€é«˜ IOPS å’Œå¤§é‡ å…ƒæ•°æ®è¯·æ±‚ çš„æŒ‘æˆ˜ã€‚å³ä½¿åœ¨æ²¡æœ‰å¯¹ä¸šåŠ¡åœºæ™¯è¿›è¡Œä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼ŒJuiceFS ä¾ç„¶èƒ½å¤Ÿé«˜æ•ˆå¤„ç†è¿™äº›æš´åŠ›æ“ä½œçš„éœ€æ±‚ï¼Œæ»¡è¶³é‡åŒ–è¡Œä¸šå¯¹æ•°æ®è®¿é—®é€Ÿåº¦å’Œå“åº”èƒ½åŠ›çš„è‹›åˆ»è¦æ±‚ã€‚</p>
<h3 data-id="heading-8">æ¡ˆä¾‹ 3 - äº‘ NAS ä¸æ»¡è¶³ IOPS è¦æ±‚</h3>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œå®¢æˆ·é¢ä¸´çš„æ˜¯å°†ä¸šåŠ¡è¿ç§»åˆ°äº‘ç«¯æ—¶çš„äº‘å­˜å‚¨æ€§èƒ½é—®é¢˜ã€‚ä»–ä»¬æœ€åˆé€‰æ‹©äº†ä½¿ç”¨äº‘ NAS æ¥æ”¯æŒå­˜å‚¨éœ€æ±‚ï¼Œä½†å¾ˆå¿«å‘ç°ï¼Œéšç€ä¸šåŠ¡çš„æ‰©å±•ï¼Œäº‘ NAS çš„æ€§èƒ½æ— æ³•æ»¡è¶³ IOPS è¦æ±‚ã€‚åœ¨ä½¿ç”¨äº‘ NAS çš„è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·çš„ 120 å°æœºå™¨å°±å·²ç»å°†æ™®é€šå‹äº‘ NAS çš„ IOPS ä¸Šé™æ‰“æ»¡ï¼Œè€Œå³ä½¿ä½¿ç”¨æé€Ÿå‹äº‘ NASï¼ˆæä¾›çº¦ 20 ä¸‡ IOPSï¼‰ï¼Œæ€§èƒ½ä»ç„¶ä¸èƒ½å®Œå…¨æ»¡è¶³éœ€æ±‚ã€‚</p>
<p>ä¸ºäº†åº”å¯¹è¿™ä¸€ç“¶é¢ˆï¼Œå®¢æˆ·å†³å®šåˆ‡æ¢åˆ° JuiceFSã€‚é€šè¿‡ JuiceFS çš„åˆ†å¸ƒå¼ç¼“å­˜ï¼Œå®¢æˆ·èƒ½å¤Ÿèšåˆæ›´å¤šçš„ IOPS æ€§èƒ½ã€‚ç†è®ºä¸Šï¼Œ5 å°ç¼“å­˜æœºå™¨å¯ä»¥æä¾›æ¯å° 20 ä¸‡ IOPSï¼Œå†åŠ ä¸Šæœ¬åœ°ç¡¬ç›˜çš„æ”¯æŒï¼Œæœ€ç»ˆå¯ä»¥æä¾› è¶…è¿‡ 100 ä¸‡çš„ IOPSã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®¢æˆ·å¯ä»¥çµæ´»ç»„åˆç¼“å­˜èµ„æºï¼ŒæŒ‰éœ€æ‰©å±•å­˜å‚¨æ€§èƒ½ã€‚</p>
<p><strong>åœ¨æé™åœºæ™¯ä¸‹ï¼Œå®¢æˆ·èƒ½å¤Ÿè¾¾åˆ° 7.5 GB çš„ååé‡å’Œè¿‘ 300 ä¸‡ IOPSï¼Œè¿™è¶³ä»¥åº”å¯¹å¤§è§„æ¨¡çš„éšæœºè¯»å†™åœºæ™¯</strong>ã€‚å…·ä½“æ¥è¯´ï¼Œå®¢æˆ·èƒ½å¤Ÿé€šè¿‡å¢åŠ ç½‘ç»œå¸¦å®½æ¥æå‡ååé‡ï¼Œè€Œé€šè¿‡å¢åŠ ç¼“å­˜èŠ‚ç‚¹æ•°é‡æ¥æé«˜ IOPS æ€§èƒ½ã€‚æ¯ä¸ªç¼“å­˜èŠ‚ç‚¹å¤§çº¦å¯ä»¥æä¾› 10 ä¸‡è‡³ 20 ä¸‡ IOPSï¼Œå®¢æˆ·è¿˜å¯ä»¥æ ¹æ®éœ€è¦é€šè¿‡æŒ‚è½½æ›´å¤šçš„ç¡¬ç›˜æˆ–åˆ©ç”¨å†…å­˜æ¥æ‰©å±•å®¹é‡ã€‚è¿™æ ·ï¼Œå®¢æˆ·å¯ä»¥æ ¹æ®ä¸šåŠ¡çš„å®é™…éœ€æ±‚ï¼Œè‡ªç”±ç»„åˆå’Œè°ƒæ•´ç¼“å­˜æ± çš„èƒ½åŠ›ï¼Œç¡®ä¿ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d68a3deedfb24ad1a370c1319adfe03b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764227899&amp;x-signature=IH%2BKK0VsWGoE%2BrF4S6SzOpOaU9U%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">04 å°ç»“</h2>
<p>ç»“åˆå‰æ–‡å¤šä¸ªå®é™…æ¡ˆä¾‹ï¼Œå¯ä»¥æ€»ç»“å‡ºé‡åŒ–ç ”ç©¶åœ¨å­˜å‚¨å±‚é¢çš„å‡ ä¸ªæ˜¾è‘—ç‰¹ç‚¹ï¼š</p>
<p>é¦–å…ˆï¼Œé‡åŒ–ä¸šåŠ¡çš„æ•°æ®å®¹é‡ç›¸å¯¹è¾ƒå°ï¼Œä½†å¯¹æ€§èƒ½è¦æ±‚æé«˜ã€‚JuiceFS é€šè¿‡æ•°æ®ä¸å…ƒæ•°æ®åˆ†ç¦»åŠç¼“å­˜æœºåˆ¶æ˜¾è‘—æå‡è®¿é—®æ•ˆç‡ï¼Œå³ä½¿åœ¨æ— ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½ä¾é é¢„è¯»å’Œæ•°æ®åˆ‡å—ä¸Šä¼ æœºåˆ¶å……åˆ†åˆ©ç”¨å¸¦å®½ï¼Œç¡®ä¿é«˜æ€§èƒ½çš„æ•°æ®å¤„ç†èƒ½åŠ›ã€‚</p>
<p>å…¶æ¬¡ï¼ŒJuiceFS çš„æ•°æ®åˆ‡å—ä¸åŠ å¯†æœºåˆ¶æå‡äº†äº‘ä¸Šå­˜å‚¨çš„å®‰å…¨æ€§ã€‚æ•°æ®è¢«åˆ‡åˆ†å¹¶åŠ å¯†åå­˜å‚¨ï¼Œå³ä¾¿éƒ¨åˆ†æ•°æ®è¢«çªƒå–ï¼Œæ”»å‡»è€…ä¹Ÿæ— æ³•åœ¨ç¼ºä¹å…ƒæ•°æ®çš„æƒ…å†µä¸‹è¿˜åŸæ–‡ä»¶ã€‚è¿™ç§è®¾è®¡ç‰¹åˆ«é€‚åˆä¿æŠ¤é‡åŒ–å› å­ã€äº¤æ˜“ç­–ç•¥ç­‰æ•æ„Ÿæ•°æ®ã€‚</p>
<p>éšç€é‡åŒ–ä¸šåŠ¡é€æ­¥å‘äº‘ç«¯è¿ç§»ï¼ŒJuiceFS æä¾›äº†ä¸€ç§å¹³è¡¡æ€§èƒ½ä¸æˆæœ¬çš„æŠ€æœ¯è·¯å¾„ã€‚å®ƒåœ¨å¯¹è±¡å­˜å‚¨çš„åŸºç¡€ä¸Šå®ç°äº†é«˜æ€§èƒ½è®¿é—®ä¸ç»Ÿä¸€ç®¡ç†ï¼Œæ»¡è¶³å…¬æœ‰äº‘ä¸æ··åˆäº‘ç¯å¢ƒä¸‹çš„å¤šæ ·åŒ–è®¡ç®—éœ€æ±‚ï¼Œä¸ºé‡åŒ–æœºæ„æ„å»ºå¯æ‰©å±•ã€å¯é çš„æ•°æ®åŸºç¡€è®¾æ–½ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›æœ¬æ–‡ä¸­çš„ä¸€äº›å®è·µç»éªŒï¼Œèƒ½ä¸ºæ­£åœ¨é¢ä¸´ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…æä¾›å‚è€ƒï¼Œå¦‚æœæœ‰å…¶ä»–ç–‘é—®æ¬¢è¿åŠ å…¥Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fjuicefs.com%2Fzh-cn%2F" target="_blank" title="https://juicefs.com/zh-cn/" ref="nofollow noopener noreferrer">JuiceFS ç¤¾åŒº</a>ä¸å¤§å®¶å…±åŒäº¤æµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenAIæ·±å¤œæ”¾å¤§æ‹›ï¼Codex-Maxä¸Šçº¿ï¼Œä¸Gemini 3å·…å³°å¯¹å†³]]></title>    <link>https://juejin.cn/post/7574581079626989574</link>    <guid>https://juejin.cn/post/7574581079626989574</guid>    <pubDate>2025-11-20T07:27:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574581079626989574" data-draft-id="7574530224852992006" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenAIæ·±å¤œæ”¾å¤§æ‹›ï¼Codex-Maxä¸Šçº¿ï¼Œä¸Gemini 3å·…å³°å¯¹å†³"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,èµ„è®¯"/> <meta itemprop="datePublished" content="2025-11-20T07:27:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç®—å®¶è®¡ç®—"/> <meta itemprop="url" content="https://juejin.cn/user/1426490793396571"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenAIæ·±å¤œæ”¾å¤§æ‹›ï¼Codex-Maxä¸Šçº¿ï¼Œä¸Gemini 3å·…å³°å¯¹å†³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1426490793396571/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç®—å®¶è®¡ç®—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:27:22.000Z" title="Thu Nov 20 2025 07:27:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸¤å¤§AIå·¨å¤´åŒæ—¶å‘åŠ›ï¼Œä¸¤å¤§ç¼–ç¨‹åŠ©æ‰‹è°å¼ºè°å¼±ï¼Ÿ</p>
</blockquote>
<p>æ˜¨å¤©ï¼ŒGemini 3åˆšåˆšå‘å¸ƒï¼Œå°±åœ¨AIé¢†åŸŸæ€èµ·äº†ä¸å°çš„æ³¢æ¾œã€‚çƒ­åº¦è¿˜æ²¡æ¶ˆé€€ï¼Œæ˜¨æ™šOpenAIç´§è·Ÿç€æ¨å‡ºäº†æ——ä¸‹æœ€å¼ºç¼–ç¨‹æ¨¡å‹â€”â€”GPT-5.1-Codex-Maxã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f5d110ac00b42f4a080b25408d30adc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg566X5a626K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764228442&amp;x-signature=DBweMhiC1mUmCmN3IeaMdbGKAdQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸¤å¤§AIå·¨å¤´æ¥è¿å‡ºç‰Œï¼Œè®©è¿™åœºæ¨¡å‹ä¹‹äº‰é™¡ç„¶å‡æ¸©ã€‚</p>
<p>é‚£ä¹ˆï¼Œè¿™æ¬¾æ–°å‘å¸ƒçš„GPT-5.1-Codex-Maxä¸Gemini 3ç©¶ç«Ÿæœ‰ä½•ä¸åŒï¼Ÿ</p>
<p><strong>æ€§èƒ½è¡¨ç°</strong></p>
<p>GPT-5.1-Codex-Maxè¢«OpenAIç§°ä¸ºâ€œä»£ç†æ€§â€ç¼–ç æ¨¡å‹ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå¤„ç†é‚£äº›éœ€è¦é•¿æ—¶é—´ä¸“æ³¨çš„å¤æ‚å·¥ç¨‹ä»»åŠ¡ã€‚æ ¹æ®OpenAIçš„ä»‹ç»ï¼Œè¯¥æ¨¡å‹åœ¨å†…éƒ¨æµ‹è¯•ä¸­èƒ½å¤ŸæŒç»­å·¥ä½œè¶…è¿‡24å°æ—¶ï¼Œå¤„ç†è¯¸å¦‚ä¿®å¤æµ‹è¯•å¤±è´¥ã€è¿­ä»£å®ç°ç­‰ä»»åŠ¡ã€‚</p>
<p>è¿™ç§æŒä¹…ä½œæˆ˜èƒ½åŠ›å¾—ç›Šäºä¸€é¡¹åä¸ºâ€œå‹ç¼©â€çš„æŠ€æœ¯ã€‚å½“æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£è¢«å¡«æ»¡æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å‹ç¼©ä¼šè¯å†å²ï¼Œä¿ç•™å…³é”®ä¿¡æ¯å¹¶ä¸¢å¼ƒä¸é‡è¦çš„ç»†èŠ‚ï¼Œä»è€Œåœ¨æ•°ç™¾ä¸‡ä¸ªtokençš„è·¨åº¦ä¸­ä¿æŒå¯¹æ ¸å¿ƒä»»åŠ¡çš„è·Ÿè¸ªã€‚</p>
<p>è¿™ç§æœºåˆ¶ä½¿å¾—GPT-5.1-Codex-Maxæˆä¸ºé¦–ä¸ªèƒ½å¤Ÿåœ¨å¤šä¸ªä¸Šä¸‹æ–‡çª—å£ä¸­ä»¥è¿™ç§æ–¹å¼æœ¬åœ°è®­ç»ƒçš„æ¨¡å‹ã€‚</p>
<p>åœ¨æ€§èƒ½è¡¨ç°ä¸Šï¼ŒGPT-5.1-Codex-Maxåœ¨SWE-Bench Verifiedæµ‹è¯•ä¸­è¾¾åˆ°äº†77.9%çš„å¾—åˆ†ï¼Œåœ¨SWE-Lancer IC SWEæµ‹è¯„ä¸­æ›´æ˜¯è¾¾åˆ°79.9%ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6391f699c5149d0883074b877cc5b72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg566X5a626K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764228442&amp;x-signature=LQPciDdWnl2ZoCc0fWCH09OrWGM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒåœ¨ä¿æŒè´¨é‡çš„åŒæ—¶ï¼Œæ¯”å‰ä»£æ¨¡å‹å‡å°‘äº†30%çš„â€œæ€è€ƒtokenâ€ä½¿ç”¨é‡ï¼Œåœ¨ç°å®ä»»åŠ¡ä¸­çš„è¿è¡Œé€Ÿåº¦ä¹Ÿå¿«äº†27%è‡³42%ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97c0e36fc4ab462db3b521fef889ee40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg566X5a626K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764228442&amp;x-signature=2ltuqSyimb5ZlTPQuUyH5%2FWVXs8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>Gemini 3çš„å…¨æ–¹ä½æŒ‘æˆ˜</strong></p>
<p>è°·æ­Œçš„Gemini 3åˆ™å‘ˆç°å‡ºä¸åŒçš„ä¼˜åŠ¿ç‰¹ç‚¹ã€‚æ ¹æ®å®˜æ–¹æµ‹è¯•æ•°æ®ï¼ŒGemini 3åœ¨å¤šé¡¹åŸºå‡†æµ‹è¯•ä¸­è¡¨ç°å‡ºè‰²ï¼Œåœ¨GPQA Diamondä¸Šè¾¾åˆ°91.9%çš„åˆ†æ•°ï¼Œå±•ç¤ºäº†åšå£«çº§åˆ«çš„æ¨ç†èƒ½åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca55f5ad88f84e2fa0340493b884e02e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg566X5a626K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764228442&amp;x-signature=mKHFOefUCOA4QSbHEE2X9%2FcwrfE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Gemini 3çš„äº®ç‚¹åœ¨äºå…¶ç”Ÿæˆå¼ä½“éªŒåŠŸèƒ½ï¼Œèƒ½å¤Ÿç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ„å»ºåŠ¨ç”»å’Œäº¤äº’å¼UIç•Œé¢æ¥è§£é‡Šå¤æ‚æ¦‚å¿µã€‚æ¯”å¦‚ï¼Œå®ƒå¯ä»¥ç”Ÿæˆå®Œå…¨äº¤äº’å¼çš„åˆ©ç‡è®¡ç®—å™¨ï¼ŒåŒ…å«æ»‘å—ã€å¯ç¼–è¾‘æ–‡æœ¬å­—æ®µã€å½©è‰²è¡¨æ ¼ç­‰ä¸°å¯Œçš„ç½‘é¡µå…ƒç´ ã€‚</p>
<p>è°·æ­Œè¿˜å¢å¼ºäº†Gemini 3çš„ä»£ç†èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†å¤šæ­¥éª¤å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¦æ±‚èŠå¤©æœºå™¨äººä¸ºä½ çš„ä¸‹ä¸€æ¬¡æ—…è¡Œé¢„è®¢è½¦è¾†ï¼Œå®ƒä¸ä»…ä¼šæŸ¥çœ‹ç”µå­é‚®ä»¶ï¼Œè¿˜ä¼šé€šè¿‡æ¨¡æ‹Ÿæµè§ˆå™¨æµè§ˆäº’è”ç½‘ï¼Œä»ç§Ÿèµæœºæ„æ‰¾åˆ°å¯ç”¨è½¦è¾†ã€‚</p>
<p>ä»ä¸¤è€…çš„ç‰¹æ€§æ¥çœ‹ï¼ŒOpenAIé€‰æ‹©äº†æ·±åº¦ä¸“ä¸šåŒ–çš„è·¯çº¿ï¼Œä¸“é—¨é’ˆå¯¹ç¼–ç¨‹ä»»åŠ¡ä¼˜åŒ–ï¼Œå°¤å…¶æ˜¯é‚£äº›éœ€è¦é•¿æ—¶é—´ä¸“æ³¨çš„å¤æ‚å·¥ä½œã€‚è€Œè°·æ­Œåˆ™é‡‡å–äº†å…¨é¢å‘å±•çš„ç­–ç•¥ï¼Œä½¿Gemini 3åœ¨æ¨ç†ã€å¤šæ¨¡æ€ç†è§£å’Œäº¤äº’ä½“éªŒä¸Šéƒ½æœ‰å‡ºè‰²è¡¨ç°ã€‚</p>
<p>ç›®å‰ï¼ŒGPT-5.1-Codex-Maxç°å·²å‘ChatGPT Plusã€Proã€Teamã€Eduå’ŒEnterpriseç”¨æˆ·å¼€æ”¾ã€‚ä½¿ç”¨é™åˆ¶å› è®¢é˜…ç±»å‹è€Œå¼‚ï¼ŒPlusç”¨æˆ·æ¯5å°æ—¶å¯å‘é€45è‡³225æ¡æœ¬åœ°æ¶ˆæ¯å’Œ10è‡³60æ¡äº‘ä»»åŠ¡ï¼Œè€ŒProç”¨æˆ·åˆ™äº«æœ‰æ›´å¤šå®¹é‡ã€‚</p>
<p>Gemini 3ä¹Ÿéµå¾ªç±»ä¼¼çš„å…è´¹å¢å€¼æ¨¡å¼ï¼Œå‡ ä¹æ‰€æœ‰åŠŸèƒ½éƒ½å‘å…è´¹ç”¨æˆ·å¼€æ”¾ï¼Œä½†é«˜çº§åŠŸèƒ½éœ€è¦è®¢é˜…ã€‚</p>
<p>å¯¹äºæ³¨é‡æˆæœ¬æ•ˆç›Šçš„å¼€å‘è€…ï¼ŒGPT-5.1-Codex-Maxåœ¨æ•ˆç‡ä¸Šçš„æå‡å¯èƒ½å¸¦æ¥é•¿æœŸæ”¶ç›Šã€‚æ€è€ƒtokenå‡å°‘30%æ„å‘³ç€åœ¨å¤„ç†å¤æ‚ä»»åŠ¡æ—¶èƒ½å¤Ÿæ›´å¿«åœ°è·å¾—ç»“æœï¼ŒåŒæ—¶å¯èƒ½é™ä½ä½¿ç”¨æˆæœ¬ã€‚</p>
<p>å¯¹äºå¼€å‘è€…ç¤¾åŒºè€Œè¨€ï¼Œè¿™ç§ç«äº‰æœ€ç»ˆå°†å¸¦æ¥æ›´å¥½çš„å·¥å…·å’Œæ›´é«˜çš„å·¥ä½œæ•ˆç‡ã€‚éšç€è¿™äº›AIåŠ©æ‰‹ä¸æ–­è¿›åŒ–ï¼Œå®ƒä»¬å°†æ‰¿æ‹…è¶Šæ¥è¶Šå¤šç¹çå’Œè€—æ—¶çš„ç¼–ç¨‹ä»»åŠ¡ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿä¸“æ³¨äºçœŸæ­£éœ€è¦äººç±»åˆ›é€ åŠ›å’Œåˆ¤æ–­åŠ›çš„å·¥ä½œã€‚</p>
<p>ä¸¤æ¬¾é¡¶çº§AIç¼–ç¨‹åŠ©æ‰‹ä½ æŒºè°ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºï¼</p>
<p>å†™åœ¨æœ€åï¼šå¦‚æœæ‚¨æ­£åœ¨è¿›è¡ŒAIé¢†åŸŸçš„åˆ›ä¸šæˆ–ç ”ç©¶ï¼Œå´å—å›°äºé«˜æ˜‚çš„ç®—åŠ›æˆæœ¬æˆ–é«˜å¹¶å‘ä¸‹çš„æ¨ç†ç¨³å®šæ€§ç­‰é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€æˆ–ç§ä¿¡æˆ‘ä»¬ï¼Œæ‰¾åˆ°æ‚¨çš„é™æœ¬å¢æ•ˆçªç ´å£~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿å’Œç¼“å­˜é›ªå´©ï¼Œå‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿ]]></title>    <link>https://juejin.cn/post/7574529034672750627</link>    <guid>https://juejin.cn/post/7574529034672750627</guid>    <pubDate>2025-11-20T07:38:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574529034672750627" data-draft-id="7574601160980807695" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿å’Œç¼“å­˜é›ªå´©ï¼Œå‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T07:38:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿å’Œç¼“å­˜é›ªå´©ï¼Œå‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:38:36.000Z" title="Thu Nov 20 2025 07:38:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¯¹äºä»äº‹åç«¯å¼€å‘çš„åŒå­¦æ¥è¯´ï¼Œ<code>ç¼“å­˜</code>å·²ç»å˜æˆçš„é¡¹ç›®ä¸­å¿…ä¸å¯å°‘çš„æŠ€æœ¯ä¹‹ä¸€ã€‚</p>
<p>æ²¡é”™ï¼Œç¼“å­˜èƒ½ç»™æˆ‘ä»¬ç³»ç»Ÿæ˜¾è‘—çš„æå‡æ€§èƒ½ã€‚ä½†å¦‚æœä½ ä½¿ç”¨ä¸å¥½ï¼Œæˆ–è€…ç¼ºä¹ç›¸å…³ç»éªŒï¼Œå®ƒä¹Ÿä¼šå¸¦æ¥å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬ä¸€èµ·èŠèŠå¦‚æœåœ¨é¡¹ç›®ä¸­å¼•å…¥äº†ç¼“å­˜ï¼Œå¯èƒ½ä¼šç»™æˆ‘ä»¬å¸¦æ¥çš„ä¸‹é¢è¿™ä¸‰å¤§é—®é¢˜ã€‚çœ‹çœ‹ä½ ä¸­æ‹›äº†æ²¡ï¼Ÿ</p>
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fwww.susan.net.cn%3Frefer%3Djuejin" title="https://link.juejin.cn/?target=http%3A%2F%2Fwww.susan.net.cn%3Frefer%3Djuejin" target="_blank">æœ€è¿‘å‡†å¤‡é¢è¯•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®è—ç½‘ç«™ï¼ˆJavaçªå‡»é˜Ÿï¼‰ï¼šwww.susan.net.cnï¼Œé‡Œé¢ï¼šé¢è¯•å…«è‚¡æ–‡ã€åœºæ™¯è®¾è®¡é¢˜ã€é¢è¯•çœŸé¢˜ã€7ä¸ªé¡¹ç›®å®æˆ˜ã€å·¥ä½œå†…æ¨ä»€ä¹ˆéƒ½æœ‰</a>ã€‚</p>
<h2 data-id="heading-1">1. ç¼“å­˜ç©¿é€é—®é¢˜</h2>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒåŠ ç¼“å­˜çš„ç›®çš„æ˜¯ï¼šä¸ºäº†å‡è½»æ•°æ®åº“çš„å‹åŠ›ï¼Œæå‡ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p>
<h3 data-id="heading-2">1.1 æˆ‘ä»¬æ˜¯å¦‚ä½•ç”¨ç¼“å­˜çš„ï¼Ÿ</h3>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœæœ‰ç”¨æˆ·è¯·æ±‚è¿‡æ¥ï¼Œå…ˆæŸ¥ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ä¸­å­˜åœ¨æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚å¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œåˆ™å†æŸ¥æ•°æ®åº“ï¼Œå¦‚æœæ•°æ®åº“ä¸­å­˜åœ¨ï¼Œåˆ™å°†æ•°æ®æ”¾å…¥ç¼“å­˜ï¼Œç„¶åè¿”å›ã€‚å¦‚æœæ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›å¤±è´¥ã€‚</p>
<p>æµç¨‹å›¾å¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bfde6b557c2461eacb27cb7c4e00642~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=WpzjNN6bGgnOCQgkd1DB6S3htqg%3D" alt="" loading="lazy"/>
ä¸Šé¢çš„è¿™å¼ å›¾å°ä¼™ä»¬è‚¯å®šå†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œå› ä¸ºå¤§éƒ¨åˆ†ç¼“å­˜éƒ½æ˜¯è¿™æ ·ç”¨çš„ã€‚</p>
<h3 data-id="heading-3">1.2 ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿ</h3>
<p>ä½†å¦‚æœå‡ºç°ä»¥ä¸‹è¿™ä¸¤ç§ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>ç”¨æˆ·è¯·æ±‚çš„idåœ¨ç¼“å­˜ä¸­ä¸å­˜åœ¨ã€‚</li>
<li>æ¶æ„ç”¨æˆ·ä¼ªé€ ä¸å­˜åœ¨çš„idå‘èµ·è¯·æ±‚ã€‚</li>
</ol>
<p>è¿™æ ·çš„ç”¨æˆ·è¯·æ±‚å¯¼è‡´çš„ç»“æœæ˜¯ï¼šæ¯æ¬¡ä»ç¼“å­˜ä¸­éƒ½æŸ¥ä¸åˆ°æ•°æ®ï¼Œè€Œéœ€è¦æŸ¥è¯¢æ•°æ®åº“ï¼ŒåŒæ—¶æ•°æ®åº“ä¸­ä¹Ÿæ²¡æœ‰æŸ¥åˆ°è¯¥æ•°æ®ï¼Œä¹Ÿæ²¡æ³•æ”¾å…¥ç¼“å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è¿™ä¸ªç”¨æˆ·è¯·æ±‚è¿‡æ¥çš„æ—¶å€™ï¼Œéƒ½è¦æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98b1ffdae55f4c189b1658d1b2b251b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=yVrEuT3qtWbmNW1zZQE0CloCHMo%3D" alt="" loading="lazy"/>
å›¾ä¸­æ ‡çº¢çš„ç®­å¤´è¡¨ç¤ºæ¯æ¬¡èµ°çš„è·¯çº¿ã€‚</p>
<p>å¾ˆæ˜¾ç„¶ï¼Œç¼“å­˜æ ¹æœ¬æ²¡èµ·ä½œç”¨ï¼Œå¥½åƒè¢«<code>ç©¿é€</code>äº†ä¸€æ ·ï¼Œæ¯æ¬¡éƒ½ä¼šå»è®¿é—®æ•°æ®åº“ã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ï¼š<code>ç¼“å­˜ç©¿é€é—®é¢˜</code>ã€‚</p>
<p>å¦‚æœæ­¤æ—¶ç©¿é€äº†ç¼“å­˜ï¼Œè€Œç›´æ¥æ•°æ®åº“çš„è¯·æ±‚æ•°é‡éå¸¸å¤šï¼Œæ•°æ®åº“å¯èƒ½å› ä¸ºæ‰›ä¸ä½å‹åŠ›è€ŒæŒ‚æ‰ã€‚å‘œå‘œå‘œã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<h3 data-id="heading-4">1.3 æ ¡éªŒå‚æ•°</h3>
<p>æˆ‘ä»¬å¯ä»¥å¯¹ç”¨æˆ·idåšæ£€éªŒã€‚</p>
<p>æ¯”å¦‚ä½ çš„åˆæ³•idæ˜¯15xxxxxxï¼Œä»¥15å¼€å¤´çš„ã€‚å¦‚æœç”¨æˆ·ä¼ å…¥äº†16å¼€å¤´çš„idï¼Œæ¯”å¦‚ï¼š16232323ï¼Œåˆ™å‚æ•°æ ¡éªŒå¤±è´¥ï¼Œç›´æ¥æŠŠç›¸å…³è¯·æ±‚æ‹¦æˆªæ‰ã€‚è¿™æ ·å¯ä»¥è¿‡æ»¤æ‰ä¸€éƒ¨åˆ†æ¶æ„ä¼ªé€ çš„ç”¨æˆ·idã€‚</p>
<h3 data-id="heading-5">1.4 å¸ƒéš†è¿‡æ»¤å™¨</h3>
<p>å¦‚æœæ•°æ®æ¯”è¾ƒå°‘ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå…¨éƒ¨æ”¾åˆ°å†…å­˜çš„ä¸€ä¸ªmapä¸­ã€‚</p>
<p>è¿™æ ·èƒ½å¤Ÿéå¸¸å¿«é€Ÿçš„è¯†åˆ«ï¼Œæ•°æ®åœ¨ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™è®©å…¶è®¿é—®ç¼“å­˜ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥æ‹’ç»è¯¥è¯·æ±‚ã€‚</p>
<p>ä½†å¦‚æœæ•°æ®é‡å¤ªå¤šäº†ï¼Œæœ‰æ•°åƒä¸‡æˆ–è€…ä¸Šäº¿çš„æ•°æ®ï¼Œå…¨éƒ½æ”¾åˆ°å†…å­˜ä¸­ï¼Œå¾ˆæ˜¾ç„¶ä¼šå ç”¨å¤ªå¤šçš„å†…å­˜ç©ºé—´ã€‚</p>
<p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰åŠæ³•å‡å°‘å†…å­˜ç©ºé—´å‘¢ï¼Ÿ</p>
<p>ç­”ï¼šè¿™å°±éœ€è¦ä½¿ç”¨<code>å¸ƒéš†è¿‡æ»¤å™¨</code>äº†ã€‚</p>
<p>å¸ƒéš†è¿‡æ»¤å™¨åº•å±‚ä½¿ç”¨bitæ•°ç»„å­˜å‚¨æ•°æ®ï¼Œè¯¥æ•°ç»„ä¸­çš„å…ƒç´ é»˜è®¤å€¼æ˜¯0ã€‚</p>
<p>å¸ƒéš†è¿‡æ»¤å™¨ç¬¬ä¸€æ¬¡åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šæŠŠæ•°æ®åº“ä¸­æ‰€æœ‰å·²å­˜åœ¨çš„keyï¼Œç»è¿‡ä¸€äº›åˆ—çš„hashç®—æ³•ï¼ˆæ¯”å¦‚ï¼šä¸‰æ¬¡hashç®—æ³•ï¼‰è®¡ç®—ï¼Œæ¯ä¸ªkeyéƒ½ä¼šè®¡ç®—å‡ºå¤šä¸ªä½ç½®ï¼Œç„¶åæŠŠè¿™äº›ä½ç½®ä¸Šçš„å…ƒç´ å€¼è®¾ç½®æˆ1ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf61315ec87643579c8c2a34f54eb3f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=EuTzyiucqyEzfiJvGOQLIoFJlrY%3D" alt="" loading="lazy"/>
ä¹‹åï¼Œæœ‰ç”¨æˆ·keyè¯·æ±‚è¿‡æ¥çš„æ—¶å€™ï¼Œå†ç”¨ç›¸åŒçš„hashç®—æ³•è®¡ç®—ä½ç½®ã€‚</p>
<ul>
<li>å¦‚æœå¤šä¸ªä½ç½®ä¸­çš„å…ƒç´ å€¼éƒ½æ˜¯1ï¼Œåˆ™è¯´æ˜è¯¥keyåœ¨æ•°æ®åº“ä¸­å·²å­˜åœ¨ã€‚è¿™æ—¶å…è®¸ç»§ç»­å¾€åé¢æ“ä½œã€‚</li>
<li>å¦‚æœæœ‰1ä¸ªä»¥ä¸Šçš„ä½ç½®ä¸Šçš„å…ƒç´ å€¼æ˜¯0ï¼Œåˆ™è¯´æ˜è¯¥keyåœ¨æ•°æ®åº“ä¸­ä¸å­˜åœ¨ã€‚è¿™æ—¶å¯ä»¥æ‹’ç»è¯¥è¯·æ±‚ï¼Œè€Œç›´æ¥è¿”å›ã€‚</li>
</ul>
<p>ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ç¡®å®å¯ä»¥è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>å­˜åœ¨è¯¯åˆ¤çš„æƒ…å†µã€‚</li>
<li>å­˜åœ¨æ•°æ®æ›´æ–°é—®é¢˜ã€‚</li>
</ol>
<p>å…ˆçœ‹çœ‹ä¸ºä»€ä¹ˆä¼šå­˜åœ¨è¯¯åˆ¤å‘¢ï¼Ÿ</p>
<p>ä¸Šé¢æˆ‘å·²ç»è¯´è¿‡ï¼Œåˆå§‹åŒ–æ•°æ®æ—¶ï¼Œé’ˆå¯¹æ¯ä¸ªkeyéƒ½æ˜¯é€šè¿‡å¤šæ¬¡hashç®—æ³•ï¼Œè®¡ç®—å‡ºä¸€äº›ä½ç½®ï¼Œç„¶åæŠŠè¿™äº›ä½ç½®ä¸Šçš„å…ƒç´ å€¼è®¾ç½®æˆ1ã€‚</p>
<p>ä½†æˆ‘ä»¬éƒ½çŸ¥é“hashç®—æ³•æ˜¯ä¼šå‡ºç°hashå†²çªçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒçš„keyï¼Œå¯èƒ½ä¼šè®¡ç®—å‡ºç›¸åŒçš„ä½ç½®ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9673a4fe872646be918cab90c3306ad2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=Fu4bl9a6ubwp34D9vZE4eOeYK7g%3D" alt="" loading="lazy"/>
ä¸Šå›¾ä¸­çš„ä¸‹æ ‡ä¸º2çš„ä½ç½®å°±å‡ºç°äº†hashå†²çªï¼Œkey1å’Œkey2è®¡ç®—å‡ºäº†ä¸€ä¸ªç›¸åŒçš„ä½ç½®ã€‚</p>
<p>å¦‚æœæœ‰å‡ åƒä¸‡æˆ–è€…ä¸Šäº¿çš„æ•°æ®ï¼Œå¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„hashå†²çªä¼šéå¸¸æ˜æ˜¾ã€‚</p>
<p>å¦‚æœæŸä¸ªç”¨æˆ·keyï¼Œç»è¿‡å¤šæ¬¡hashè®¡ç®—å‡ºçš„ä½ç½®ï¼Œå…¶å…ƒç´ å€¼ï¼Œæ°å¥½éƒ½è¢«å…¶ä»–çš„keyåˆå§‹åŒ–æˆäº†1ã€‚æ­¤æ—¶ï¼Œå°±å‡ºç°äº†è¯¯åˆ¤ï¼ŒåŸæœ¬è¿™ä¸ªkeyåœ¨æ•°æ®åº“ä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼Œä½†å¸ƒéš†è¿‡æ»¤å™¨ç¡®è®¤ä¸ºå­˜åœ¨ã€‚</p>
<blockquote>
<p>å¦‚æœå¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­å‡ºæŸä¸ªkeyå­˜åœ¨ï¼Œå¯èƒ½å‡ºç°è¯¯åˆ¤ã€‚å¦‚æœåˆ¤æ–­æŸä¸ªkeyä¸å­˜åœ¨ï¼Œåˆ™å®ƒåœ¨æ•°æ®åº“ä¸­ä¸€å®šä¸å­˜åœ¨ã€‚</p>
</blockquote>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¸ƒéš†è¿‡æ»¤å™¨çš„è¯¯åˆ¤ç‡è¿˜æ˜¯æ¯”è¾ƒå°‘çš„ã€‚å³ä½¿æœ‰å°‘éƒ¨åˆ†è¯¯åˆ¤çš„è¯·æ±‚ï¼Œç›´æ¥è®¿é—®äº†æ•°æ®åº“ï¼Œä½†å¦‚æœè®¿é—®é‡å¹¶ä¸å¤§ï¼Œå¯¹æ•°æ®åº“å½±å“ä¹Ÿä¸å¤§ã€‚</p>
<p>æ­¤å¤–ï¼Œå¦‚æœæƒ³å‡å°‘è¯¯åˆ¤ç‡ï¼Œå¯ä»¥é€‚å½“å¢åŠ hashå‡½æ•°ï¼Œå›¾ä¸­ç”¨çš„3æ¬¡hashï¼Œå¯ä»¥å¢åŠ åˆ°5æ¬¡ã€‚</p>
<p>å…¶å®ï¼Œå¸ƒéš†è¿‡æ»¤å™¨æœ€è‡´å‘½çš„é—®é¢˜æ˜¯ï¼šå¦‚æœæ•°æ®åº“ä¸­çš„æ•°æ®æ›´æ–°äº†ï¼Œéœ€è¦åŒæ­¥æ›´æ–°å¸ƒéš†è¿‡æ»¤å™¨ã€‚ä½†å®ƒè·Ÿæ•°æ®åº“æ˜¯ä¸¤ä¸ªæ•°æ®æºï¼Œå°±å¯èƒ½å­˜åœ¨æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p>
<p>æ¯”å¦‚ï¼šæ•°æ®åº“ä¸­æ–°å¢äº†ä¸€ä¸ªç”¨æˆ·ï¼Œè¯¥ç”¨æˆ·æ•°æ®éœ€è¦å®æ—¶åŒæ­¥åˆ°å¸ƒéš†è¿‡æ»¤ã€‚ä½†ç”±äºç½‘ç»œå¼‚å¸¸ï¼ŒåŒæ­¥å¤±è´¥äº†ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/228059170faa4786b14e09f3491ee07c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=4XSs6%2FoMSQKC%2BJWaPDXEnpw%2Fhoc%3D" alt="" loading="lazy"/>
è¿™æ—¶åˆšå¥½è¯¥ç”¨æˆ·è¯·æ±‚è¿‡æ¥äº†ï¼Œç”±äºå¸ƒéš†è¿‡æ»¤å™¨æ²¡æœ‰è¯¥keyçš„æ•°æ®ï¼Œæ‰€ä»¥ç›´æ¥æ‹’ç»äº†è¯¥è¯·æ±‚ã€‚ä½†è¿™ä¸ªæ˜¯æ­£å¸¸çš„ç”¨æˆ·ï¼Œä¹Ÿè¢«<code>æ‹¦æˆª</code>äº†ã€‚</p>
<p>å¾ˆæ˜¾ç„¶ï¼Œå¦‚æœå‡ºç°äº†è¿™ç§æ­£å¸¸ç”¨æˆ·è¢«æ‹¦æˆªäº†æƒ…å†µï¼Œæœ‰äº›ä¸šåŠ¡æ˜¯æ— æ³•å®¹å¿çš„ã€‚æ‰€ä»¥ï¼Œå¸ƒéš†è¿‡æ»¤å™¨è¦çœ‹å®é™…ä¸šåŠ¡åœºæ™¯å†å†³å®šæ˜¯å¦ä½¿ç”¨ï¼Œå®ƒå¸®æˆ‘ä»¬è§£å†³äº†ç¼“å­˜ç©¿é€é—®é¢˜ï¼Œä½†åŒæ—¶äº†å¸¦æ¥äº†æ–°çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-6">1.5 ç¼“å­˜ç©ºå€¼</h3>
<p>ä¸Šé¢ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œè™½è¯´å¯ä»¥è¿‡æ»¤æ‰å¾ˆå¤šä¸å­˜åœ¨çš„ç”¨æˆ·idè¯·æ±‚ã€‚ä½†å®ƒé™¤äº†å¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ä¹‹å¤–ï¼Œä¼šå¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>å¸ƒéš†è¿‡æ»¤å™¨å­˜åœ¨è¯¯æ€çš„æƒ…å†µï¼Œå¯èƒ½ä¼šæŠŠå°‘éƒ¨åˆ†æ­£å¸¸ç”¨æˆ·çš„è¯·æ±‚ä¹Ÿè¿‡æ»¤äº†ã€‚</li>
<li>å¦‚æœç”¨æˆ·ä¿¡æ¯æœ‰å˜åŒ–ï¼Œéœ€è¦å®æ—¶åŒæ­¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨ï¼Œä¸ç„¶ä¼šæœ‰é—®é¢˜ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¾ˆå°‘ç”¨å¸ƒéš†è¿‡æ»¤å™¨è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ã€‚å…¶å®ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æ›´ç®€å•çš„æ–¹æ¡ˆï¼Œå³ï¼š<code>ç¼“å­˜ç©ºå€¼</code>ã€‚</p>
<p>å½“æŸä¸ªç”¨æˆ·idåœ¨ç¼“å­˜ä¸­æŸ¥ä¸åˆ°ï¼Œåœ¨æ•°æ®åº“ä¸­ä¹ŸæŸ¥ä¸åˆ°æ—¶ï¼Œä¹Ÿéœ€è¦å°†è¯¥ç”¨æˆ·idç¼“å­˜èµ·æ¥ï¼Œåªä¸è¿‡å€¼æ˜¯ç©ºçš„ã€‚è¿™æ ·åé¢çš„è¯·æ±‚ï¼Œå†æ‹¿ç›¸åŒçš„ç”¨æˆ·idå‘èµ·è¯·æ±‚æ—¶ï¼Œå°±èƒ½ä»ç¼“å­˜ä¸­è·å–ç©ºæ•°æ®ï¼Œç›´æ¥è¿”å›äº†ï¼Œè€Œæ— éœ€å†å»æŸ¥ä¸€æ¬¡æ•°æ®åº“ã€‚</p>
<p>ä¼˜åŒ–ä¹‹åçš„æµç¨‹å›¾å¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd5c30e5ed9949e8b909d526185b8cfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=%2B9UHK56pynaQ5IHbV7HMUKEaq6w%3D" alt="" loading="lazy"/>
å…³é”®ç‚¹æ˜¯ä¸ç®¡ä»æ•°æ®åº“æœ‰æ²¡æœ‰æŸ¥åˆ°æ•°æ®ï¼Œéƒ½å°†ç»“æœæ”¾å…¥ç¼“å­˜ä¸­ï¼Œåªæ˜¯å¦‚æœæ²¡æœ‰æŸ¥åˆ°æ•°æ®ï¼Œç¼“å­˜ä¸­çš„å€¼æ˜¯ç©ºçš„ç½¢äº†ã€‚</p>
<h2 data-id="heading-7">2. ç¼“å­˜å‡»ç©¿é—®é¢˜</h2>
<h3 data-id="heading-8">2.1 ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿ï¼Ÿ</h3>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨è®¿é—®çƒ­ç‚¹æ•°æ®æ—¶ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬åœ¨æŸä¸ªå•†åŸè´­ä¹°æŸä¸ªçƒ­é—¨å•†å“ã€‚</p>
<p>ä¸ºäº†ä¿è¯è®¿é—®é€Ÿåº¦ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå•†åŸç³»ç»Ÿä¼šæŠŠå•†å“ä¿¡æ¯æ”¾åˆ°ç¼“å­˜ä¸­ã€‚ä½†å¦‚æœæŸä¸ªæ—¶åˆ»ï¼Œè¯¥å•†å“åˆ°äº†è¿‡æœŸæ—¶é—´å¤±æ•ˆäº†ã€‚</p>
<p>æ­¤æ—¶ï¼Œå¦‚æœæœ‰å¤§é‡çš„ç”¨æˆ·è¯·æ±‚åŒä¸€ä¸ªå•†å“ï¼Œä½†è¯¥å•†å“åœ¨ç¼“å­˜ä¸­å¤±æ•ˆäº†ï¼Œä¸€ä¸‹å­è¿™äº›ç”¨æˆ·è¯·æ±‚éƒ½ç›´æ¥æ€¼åˆ°æ•°æ®åº“ï¼Œå¯èƒ½ä¼šé€ æˆç¬é—´æ•°æ®åº“å‹åŠ›è¿‡å¤§ï¼Œè€Œç›´æ¥æŒ‚æ‰ã€‚</p>
<p>æµç¨‹å›¾å¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04a2fdb94e0c4d10ae51081d04f484ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=FXgh582Qvrud%2BFzyv80TGaRp%2B0c%3D" alt="" loading="lazy"/>
é‚£ä¹ˆï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<h3 data-id="heading-9">2.2 åŠ é”</h3>
<p>æ•°æ®åº“å‹åŠ›è¿‡å¤§çš„æ ¹æºæ˜¯ï¼Œå› ä¸ºåŒä¸€æ—¶åˆ»å¤ªå¤šçš„è¯·æ±‚è®¿é—®äº†æ•°æ®åº“ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿé™åˆ¶ï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¯·æ±‚æ‰èƒ½è®¿é—®æŸä¸ªproductIdçš„æ•°æ®åº“å•†å“ä¿¡æ¯ï¼Œä¸å°±èƒ½è§£å†³é—®é¢˜äº†ï¼Ÿ</p>
<p>ç­”ï¼šæ²¡é”™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>åŠ é”</code>çš„æ–¹å¼ï¼Œå®ç°ä¸Šé¢çš„åŠŸèƒ½ã€‚</p>
<p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
  <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedis.set(productId, requestId, <span class="hljs-string">"NX"</span>, <span class="hljs-string">"PX"</span>, expireTime);
  <span class="hljs-keyword">if</span> (<span class="hljs-string">"OK"</span>.equals(result)) {
    <span class="hljs-keyword">return</span> queryProductFromDbById(productId);
  }
} <span class="hljs-keyword">finally</span>{
    unlock(productId,requestId);
}  
<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
</code></pre>
<p>åœ¨è®¿é—®æ•°æ®åº“æ—¶åŠ é”ï¼Œé˜²æ­¢å¤šä¸ªç›¸åŒproductIdçš„è¯·æ±‚åŒæ—¶è®¿é—®æ•°æ®åº“ã€‚</p>
<p>ç„¶åï¼Œè¿˜éœ€è¦ä¸€æ®µä»£ç ï¼ŒæŠŠä»æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°çš„ç»“æœï¼Œåˆé‡æ–°æ”¾å…¥ç¼“å­˜ä¸­ã€‚åŠæ³•æŒºå¤šçš„ï¼Œåœ¨è¿™é‡Œæˆ‘å°±ä¸å±•å¼€äº†ã€‚</p>
<h3 data-id="heading-10">2.3 è‡ªåŠ¨ç»­æœŸ</h3>
<p>å‡ºç°ç¼“å­˜å‡»ç©¿é—®é¢˜æ˜¯ç”±äºkeyè¿‡æœŸäº†å¯¼è‡´çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ¢ä¸€ç§æ€è·¯ï¼Œåœ¨keyå¿«è¦è¿‡æœŸä¹‹å‰ï¼Œå°±è‡ªåŠ¨ç»™å®ƒç»­æœŸï¼Œä¸å°±OKäº†ï¼Ÿ</p>
<p>ç­”ï¼šæ²¡é”™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨jobç»™æŒ‡å®škeyè‡ªåŠ¨ç»­æœŸã€‚</p>
<p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æœ‰ä¸ªåˆ†ç±»åŠŸèƒ½ï¼Œè®¾ç½®çš„ç¼“å­˜è¿‡æœŸæ—¶é—´æ˜¯30åˆ†é’Ÿã€‚ä½†æœ‰ä¸ªjobæ¯éš”20åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œè‡ªåŠ¨æ›´æ–°ç¼“å­˜ï¼Œé‡æ–°è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º30åˆ†é’Ÿã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39a0e59c198541c583714f3261fe4e8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=ePr1p96CQRAh7ek1gyEh56KkcAY%3D" alt="" loading="lazy"/>
è¿™æ ·å°±èƒ½ä¿è¯ï¼Œåˆ†ç±»ç¼“å­˜ä¸ä¼šå¤±æ•ˆã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨å¾ˆå¤šè¯·æ±‚ç¬¬ä¸‰æ–¹å¹³å°æ¥å£æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å…ˆè°ƒç”¨ä¸€ä¸ªè·å–tokençš„æ¥å£ï¼Œç„¶åç”¨è¿™ä¸ªtokenä½œä¸ºå‚æ•°ï¼Œè¯·æ±‚çœŸæ­£çš„ä¸šåŠ¡æ¥å£ã€‚ä¸€èˆ¬è·å–åˆ°çš„tokenæ˜¯æœ‰æœ‰æ•ˆæœŸçš„ï¼Œæ¯”å¦‚24å°æ—¶ä¹‹åå¤±æ•ˆã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æ¯æ¬¡è¯·æ±‚å¯¹æ–¹çš„ä¸šåŠ¡æ¥å£ï¼Œéƒ½è¦å…ˆè°ƒç”¨ä¸€æ¬¡è·å–tokenæ¥å£ï¼Œæ˜¾ç„¶æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”æ€§èƒ½ä¸å¤ªå¥½ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç¬¬ä¸€æ¬¡è·å–åˆ°çš„tokenç¼“å­˜èµ·æ¥ï¼Œè¯·æ±‚å¯¹æ–¹ä¸šåŠ¡æ¥å£æ—¶ä»ç¼“å­˜ä¸­è·å–tokenã€‚</p>
<p>åŒæ—¶ï¼Œæœ‰ä¸€ä¸ªjobæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œæ¯”å¦‚æ¯éš”12ä¸ªå°æ—¶è¯·æ±‚ä¸€æ¬¡è·å–tokenæ¥å£ï¼Œä¸åœåˆ·æ–°tokenï¼Œé‡æ–°è®¾ç½®tokençš„è¿‡æœŸæ—¶é—´ã€‚</p>
<h3 data-id="heading-11">2.4 ç¼“å­˜ä¸å¤±æ•ˆ</h3>
<p>æ­¤å¤–ï¼Œå¯¹äºå¾ˆå¤šçƒ­é—¨keyï¼Œå…¶å®æ˜¯å¯ä»¥ä¸ç”¨è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè®©å…¶æ°¸ä¹…æœ‰æ•ˆçš„ã€‚</p>
<p>æ¯”å¦‚å‚ä¸ç§’æ€æ´»åŠ¨çš„çƒ­é—¨å•†å“ï¼Œç”±äºè¿™ç±»å•†å“idå¹¶ä¸å¤šï¼Œåœ¨ç¼“å­˜ä¸­æˆ‘ä»¬å¯ä»¥ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</p>
<p>åœ¨ç§’æ€æ´»åŠ¨å¼€å§‹å‰ï¼Œæˆ‘ä»¬å…ˆç”¨ä¸€ä¸ªç¨‹åºæå‰ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºå•†å“çš„æ•°æ®ï¼Œç„¶ååŒæ­¥åˆ°ç¼“å­˜ä¸­ï¼Œæå‰åš<code>é¢„çƒ­</code>ã€‚</p>
<p>ç­‰ç§’æ€æ´»åŠ¨ç»“æŸä¸€æ®µæ—¶é—´ä¹‹åï¼Œæˆ‘ä»¬å†<code>æ‰‹åŠ¨åˆ é™¤</code>è¿™äº›æ— ç”¨çš„ç¼“å­˜å³å¯ã€‚</p>
<p>æœ€è¿‘ä¸ºäº†å¸®åŠ©å¤§å®¶æ‰¾å·¥ä½œï¼Œä¸“é—¨å»ºäº†ä¸€äº›å·¥ä½œå†…æ¨ç¾¤ï¼Œå„å¤§åŸå¸‚éƒ½æœ‰ï¼Œæ¬¢è¿å„ä½HRå’Œæ‰¾å·¥ä½œçš„å°ä¼™ä¼´è¿›ç¾¤äº¤æµï¼Œç¾¤é‡Œç›®å‰å·²ç»æ”¶é›†äº†ä¸å°‘çš„å·¥ä½œå†…æ¨å²—ä½ã€‚åŠ è‹ä¸‰çš„å¾®ä¿¡ï¼šli_su223ï¼Œå¤‡æ³¨ï¼šæ˜é‡‘+æ‰€åœ¨åŸå¸‚ï¼Œå³å¯è¿›ç¾¤ã€‚</p>
<h2 data-id="heading-12">3. ç¼“å­˜é›ªå´©é—®é¢˜</h2>
<h3 data-id="heading-13">3.1 ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿ</h3>
<p>å‰é¢å·²ç»èŠè¿‡ç¼“å­˜å‡»ç©¿é—®é¢˜äº†ã€‚</p>
<p>è€Œç¼“å­˜é›ªå´©æ˜¯ç¼“å­˜å‡»ç©¿çš„å‡çº§ç‰ˆï¼Œç¼“å­˜å‡»ç©¿è¯´çš„æ˜¯æŸä¸€ä¸ªçƒ­é—¨keyå¤±æ•ˆäº†ï¼Œè€Œç¼“å­˜é›ªå´©è¯´çš„æ˜¯æœ‰å¤šä¸ªçƒ­é—¨keyåŒæ—¶å¤±æ•ˆã€‚çœ‹èµ·æ¥ï¼Œå¦‚æœå‘ç”Ÿç¼“å­˜é›ªå´©ï¼Œé—®é¢˜æ›´ä¸¥é‡ã€‚</p>
<p>ç¼“å­˜é›ªå´©ç›®å‰æœ‰ä¸¤ç§ï¼š</p>
<ol>
<li>æœ‰å¤§é‡çš„çƒ­é—¨ç¼“å­˜ï¼ŒåŒæ—¶å¤±æ•ˆã€‚ä¼šå¯¼è‡´å¤§é‡çš„è¯·æ±‚ï¼Œè®¿é—®æ•°æ®åº“ã€‚è€Œæ•°æ®åº“å¾ˆæœ‰å¯èƒ½å› ä¸ºæ‰›ä¸ä½å‹åŠ›ï¼Œè€Œç›´æ¥æŒ‚æ‰ã€‚</li>
<li>ç¼“å­˜æœåŠ¡å™¨downæœºäº†ï¼Œå¯èƒ½æ˜¯æœºå™¨ç¡¬ä»¶é—®é¢˜ï¼Œæˆ–è€…æœºæˆ¿ç½‘ç»œé—®é¢˜ã€‚æ€»ä¹‹ï¼Œé€ æˆäº†æ•´ä¸ªç¼“å­˜çš„ä¸å¯ç”¨ã€‚</li>
</ol>
<p>å½’æ ¹ç»“åº•éƒ½æ˜¯æœ‰å¤§é‡çš„è¯·æ±‚ï¼Œé€è¿‡ç¼“å­˜ï¼Œè€Œç›´æ¥è®¿é—®æ•°æ®åº“äº†ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32e50b8cd09f4ea1aa5c765a0c2bce8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=iv99KzyF%2FmH1AmmGuASFdpur8xc%3D" alt="" loading="lazy"/>
é‚£ä¹ˆï¼Œè¦å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<h3 data-id="heading-14">3.2 è¿‡æœŸæ—¶é—´åŠ éšæœºæ•°</h3>
<p>ä¸ºäº†è§£å†³ç¼“å­˜é›ªå´©é—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å°½é‡é¿å…ç¼“å­˜åŒæ—¶å¤±æ•ˆçš„æƒ…å†µå‘ç”Ÿã€‚</p>
<p>è¿™å°±è¦æ±‚æˆ‘ä»¬ä¸è¦è®¾ç½®ç›¸åŒçš„è¿‡æœŸæ—¶é—´ã€‚</p>
<p>å¯ä»¥åœ¨è®¾ç½®çš„è¿‡æœŸæ—¶é—´åŸºç¡€ä¸Šï¼Œå†åŠ ä¸ª1~60ç§’çš„éšæœºæ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java">å®é™…è¿‡æœŸæ—¶é—´ = è¿‡æœŸæ—¶é—´ + <span class="hljs-number">1</span>~<span class="hljs-number">60</span>ç§’çš„éšæœºæ•°
</code></pre>
<p>è¿™æ ·å³ä½¿åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå¤šä¸ªè¯·æ±‚åŒæ—¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç”±äºæœ‰éšæœºæ•°çš„å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šå‡ºç°å¤ªå¤šç›¸åŒçš„è¿‡æœŸkeyã€‚</p>
<h3 data-id="heading-15">3.3 é«˜å¯ç”¨</h3>
<p>é’ˆå¯¹ç¼“å­˜æœåŠ¡å™¨downæœºçš„æƒ…å†µï¼Œåœ¨å‰æœŸåšç³»ç»Ÿè®¾è®¡æ—¶ï¼Œå¯ä»¥åšä¸€äº›é«˜å¯ç”¨æ¶æ„ã€‚</p>
<p>æ¯”å¦‚ï¼šå¦‚æœä½¿ç”¨äº†redisï¼Œå¯ä»¥ä½¿ç”¨å“¨å…µæ¨¡å¼ï¼Œæˆ–è€…é›†ç¾¤æ¨¡å¼ï¼Œé¿å…å‡ºç°å•èŠ‚ç‚¹æ•…éšœå¯¼è‡´æ•´ä¸ªredisæœåŠ¡ä¸å¯ç”¨çš„æƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6a1a3d9cac54027b39ee55c94a208a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=V0keN00hh5d0iVAT4jQFTlSSKTY%3D" alt="" loading="lazy"/>
ä½¿ç”¨å“¨å…µæ¨¡å¼ä¹‹åï¼Œå½“æŸä¸ªmasteræœåŠ¡ä¸‹çº¿æ—¶ï¼Œè‡ªåŠ¨å°†è¯¥masterä¸‹çš„æŸä¸ªslaveæœåŠ¡å‡çº§ä¸ºmasteræœåŠ¡ï¼Œæ›¿ä»£å·²ä¸‹çº¿çš„masteræœåŠ¡ç»§ç»­å¤„ç†è¯·æ±‚ã€‚</p>
<h3 data-id="heading-16">3.4 æœåŠ¡é™çº§</h3>
<p>å¦‚æœåšäº†é«˜å¯ç”¨æ¶æ„ï¼ŒredisæœåŠ¡è¿˜æ˜¯æŒ‚äº†ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>è¿™æ—¶å€™ï¼Œå°±éœ€è¦åšæœåŠ¡é™çº§äº†ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦é…ç½®ä¸€äº›é»˜è®¤çš„å…œåº•æ•°æ®ã€‚</p>
<p>ç¨‹åºä¸­æœ‰ä¸ªå…¨å±€å¼€å…³ï¼Œæ¯”å¦‚æœ‰10ä¸ªè¯·æ±‚åœ¨æœ€è¿‘ä¸€åˆ†é’Ÿå†…ï¼Œä»redisä¸­è·å–æ•°æ®å¤±è´¥ï¼Œåˆ™å…¨å±€å¼€å…³æ‰“å¼€ã€‚åé¢çš„æ–°è¯·æ±‚ï¼Œå°±ç›´æ¥ä»é…ç½®ä¸­å¿ƒä¸­è·å–é»˜è®¤çš„æ•°æ®ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27420da1b5e84bb8ba5e6ce37117832d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229116&amp;x-signature=6ao5P2zrQcvFuKHzqgRwMf0767M%3D" alt="" loading="lazy"/>
å½“ç„¶ï¼Œè¿˜éœ€è¦æœ‰ä¸ªjobï¼Œæ¯éš”ä¸€å®šæ—¶é—´å»ä»redisä¸­è·å–æ•°æ®ï¼Œå¦‚æœåœ¨æœ€è¿‘ä¸€åˆ†é’Ÿå†…å¯ä»¥è·å–åˆ°ä¸¤æ¬¡æ•°æ®ï¼ˆè¿™ä¸ªå‚æ•°å¯ä»¥è‡ªå·±å®šï¼‰ï¼Œåˆ™æŠŠå…¨å±€å¼€å…³å…³é—­ã€‚åé¢æ¥çš„è¯·æ±‚ï¼Œåˆå¯ä»¥æ­£å¸¸ä»redisä¸­è·å–æ•°æ®äº†ã€‚</p>
<p>éœ€è¦ç‰¹åˆ«è¯´ä¸€å¥ï¼Œè¯¥æ–¹æ¡ˆå¹¶éæ‰€æœ‰çš„åœºæ™¯éƒ½é€‚ç”¨ï¼Œéœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯å†³å®šã€‚</p>
<h2 data-id="heading-17">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€SpringBootã€‘38 æ ¸å¿ƒåŠŸèƒ½ - é«˜çº§ç‰¹æ€§- Spring Boot ä¸­çš„åº”ç”¨å¯åŠ¨è¿‡ç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7574608278421618724</link>    <guid>https://juejin.cn/post/7574608278421618724</guid>    <pubDate>2025-11-20T07:25:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574608278421618724" data-draft-id="7574530224853041158" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€SpringBootã€‘38 æ ¸å¿ƒåŠŸèƒ½ - é«˜çº§ç‰¹æ€§- Spring Boot ä¸­çš„åº”ç”¨å¯åŠ¨è¿‡ç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T07:25:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€SpringBootã€‘38 æ ¸å¿ƒåŠŸèƒ½ - é«˜çº§ç‰¹æ€§- Spring Boot ä¸­çš„åº”ç”¨å¯åŠ¨è¿‡ç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:25:23.000Z" title="Thu Nov 20 2025 07:25:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>SpringBootåº”ç”¨çš„å¯åŠ¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¤æ‚ä½†è®¾è®¡ç²¾å·§çš„æµç¨‹ï¼Œäº†è§£è¿™ä¸ªè¿‡ç¨‹å¯¹äºæ·±å…¥ç†è§£SpringBootå·¥ä½œåŸç†è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†è¯¦ç»†è§£æSpringBootåº”ç”¨çš„å®Œæ•´[å¯åŠ¨æµç¨‹]ã€‚</p>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸€ã€SpringApplicationåˆå§‹åŒ–é˜¶æ®µ</h3>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. åˆ›å»ºSpringApplicationå®ä¾‹</h4>
<p>SpringBootåº”ç”¨å¯åŠ¨çš„ç¬¬ä¸€æ­¥æ˜¯åˆ›å»º<code>SpringApplication</code>å®ä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">MyApplication</span>.<span class="hljs-property">class</span>, args);
    }
}

<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123456</span>
</code></pre>
<p>åœ¨<code>SpringApplication</code>çš„æ„é€ å‡½æ•°ä¸­ï¼Œä¼šè¿›è¡Œä»¥ä¸‹å…³é”®æ“ä½œï¼š</p>
<pre><code class="hljs language-scss" lang="scss">public <span class="hljs-built_in">SpringApplication</span>(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) {
    <span class="hljs-comment">// ä¿å­˜ä¸»é…ç½®ç±»ä¿¡æ¯</span>
    this<span class="hljs-selector-class">.resourceLoader</span> = resourceLoader;
    this<span class="hljs-selector-class">.primarySources</span> = new LinkedHashSet&lt;&gt;(Arrays.asList(primarySources));
    
    <span class="hljs-comment">// åˆ¤æ–­åº”ç”¨ç±»å‹ï¼šSERVLETã€REACTIVE æˆ– NONE</span>
    this<span class="hljs-selector-class">.webApplicationType</span> = WebApplicationType<span class="hljs-selector-class">.deduceFromClasspath</span>();
    
    <span class="hljs-comment">// è·å–å¹¶åˆå§‹åŒ–BootstrapRegistryInitializer</span>
    this<span class="hljs-selector-class">.bootstrapRegistryInitializers</span> = new ArrayList&lt;&gt;(
        getSpringFactoriesInstances(BootstrapRegistryInitializer.class));
    
    <span class="hljs-comment">// è·å–ApplicationContextInitializer</span>
    <span class="hljs-built_in">setInitializers</span>((Collection) <span class="hljs-built_in">getSpringFactoriesInstances</span>(
        ApplicationContextInitializer.class));
    
    <span class="hljs-comment">// è·å–ApplicationListener</span>
    <span class="hljs-built_in">setListeners</span>((Collection) <span class="hljs-built_in">getSpringFactoriesInstances</span>(ApplicationListener.class));
    
    <span class="hljs-comment">// æ¨æ–­ä¸»åº”ç”¨ç±»</span>
    this<span class="hljs-selector-class">.mainApplicationClass</span> = <span class="hljs-built_in">deduceMainApplicationClass</span>();
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">12345678910111213141516171819202122</span>
</code></pre>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. åŠ è½½SPIæ‰©å±•ç»„ä»¶</h4>
<p>SpringBooté€šè¿‡<code>spring.factories</code>æœºåˆ¶åŠ è½½å„ç§æ‰©å±•ç»„ä»¶ï¼š</p>
<ul>
<li><strong>BootstrapRegistryInitializer</strong>: å¼•å¯¼æ³¨å†Œè¡¨åˆå§‹åŒ–å™¨</li>
<li><strong>ApplicationContextInitializer</strong>: åº”ç”¨ä¸Šä¸‹æ–‡åˆå§‹åŒ–å™¨</li>
<li><strong>ApplicationListener</strong>: åº”ç”¨äº‹ä»¶ç›‘å¬å™¨</li>
</ul>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äºŒã€åº”ç”¨è¿è¡Œé˜¶æ®µ</h3>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. å¯åŠ¨è®¡æ—¶ä¸å¼•å¯¼ä¸Šä¸‹æ–‡</h4>
<pre><code class="hljs language-ini" lang="ini">public ConfigurableApplicationContext run(String... args) {
    StopWatch <span class="hljs-attr">stopWatch</span> = new StopWatch()<span class="hljs-comment">;</span>
    stopWatch.start()<span class="hljs-comment">;</span>
    
    // åˆ›å»ºå¼•å¯¼ä¸Šä¸‹æ–‡
    DefaultBootstrapContext <span class="hljs-attr">bootstrapContext</span> = createBootstrapContext()<span class="hljs-comment">;</span>
    
    ConfigurableApplicationContext <span class="hljs-attr">context</span> = null<span class="hljs-comment">;</span>
    configureHeadlessProperty()<span class="hljs-comment">;</span>
    
    // è·å–è¿è¡Œç›‘å¬å™¨
    SpringApplicationRunListeners <span class="hljs-attr">listeners</span> = getRunListeners(args)<span class="hljs-comment">;</span>
    listeners.starting(bootstrapContext, this.mainApplicationClass)<span class="hljs-comment">;</span>
}

AIå†™ä»£ç java
è¿è¡Œ
1234567891011121314
</code></pre>
<h4 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. ç¯å¢ƒå‡†å¤‡</h4>
<p>ç¯å¢ƒå‡†å¤‡é˜¶æ®µè´Ÿè´£é…ç½®åº”ç”¨è¿è¡Œæ‰€éœ€çš„[ç¯å¢ƒå˜é‡]å’Œé…ç½®å±æ€§ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">private ConfigurableEnvironment <span class="hljs-built_in">prepareEnvironment</span>(
        SpringApplicationRunListeners listeners,
        ApplicationArguments applicationArguments) {
    
    <span class="hljs-comment">// åˆ›å»ºé€‚å½“ç±»å‹çš„ç¯å¢ƒå¯¹è±¡</span>
    ConfigurableEnvironment environment = <span class="hljs-built_in">getOrCreateEnvironment</span>();
    
    <span class="hljs-comment">// é…ç½®ç¯å¢ƒï¼šåŠ è½½é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¡Œå‚æ•°ç­‰</span>
    <span class="hljs-built_in">configureEnvironment</span>(environment, applicationArguments.getSourceArgs());
    
    <span class="hljs-comment">// å‘å¸ƒEnvironmentPreparedäº‹ä»¶</span>
    listeners<span class="hljs-selector-class">.environmentPrepared</span>(bootstrapContext, environment);
    
    <span class="hljs-comment">// å°†ç¯å¢ƒç»‘å®šåˆ°SpringApplication</span>
    <span class="hljs-built_in">bindToSpringApplication</span>(environment);
    
    return environment;
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123456789101112131415161718</span>
</code></pre>
<blockquote>
<p><strong>ç¯å¢ƒé…ç½®è¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>è¿”å›æˆ–è€…åˆ›å»ºåŸºç¡€è®¾æ–½ä¿¡æ¯å¯¹è±¡ï¼š<code>StandardServletEnvironment</code></li>
<li>é…ç½®ç¯å¢ƒä¿¡æ¯å¯¹è±¡</li>
<li>è¯»å–æ‰€æœ‰çš„é…ç½®æºçš„é…ç½®å±æ€§å€¼</li>
<li>ç»‘å®šç¯å¢ƒä¿¡æ¯</li>
<li>ç›‘å¬å™¨è°ƒç”¨Â <code>listener.environmentPrepared()</code>ï¼Œé€šçŸ¥æ‰€æœ‰ç›‘å¬å™¨å½“å‰ç¯å¢ƒå‡†å¤‡å®Œæˆ</li>
</ul>
</blockquote>
<h4 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. åˆ›å»ºIOCå®¹å™¨</h4>
<p>æ ¹æ®åº”ç”¨ç±»å‹åˆ›å»ºç›¸åº”çš„ApplicationContextï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">protected</span> ConfigurableApplicationContext createApplicationContext() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.applicationContextFactory.create(<span class="hljs-keyword">this</span>.webApplicationType);
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123</span>
</code></pre>
<blockquote>
<p><strong>æ ¹æ®é¡¹ç›®ç±»å‹åˆ›å»ºå®¹å™¨</strong>ï¼š</p>
<ul>
<li>å¯¹äºServletåº”ç”¨ï¼Œä¼šåˆ›å»ºÂ <code>AnnotationConfigServletWebServerApplicationContext</code></li>
<li>å¯¹äºReactiveåº”ç”¨ï¼Œä¼šåˆ›å»ºÂ <code>AnnotationConfigReactiveWebServerApplicationContext</code></li>
<li>å¯¹äºæ™®é€šåº”ç”¨ï¼Œä¼šåˆ›å»ºÂ <code>AnnotationConfigApplicationContext</code></li>
</ul>
</blockquote>
<h4 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4. å‡†å¤‡IOCå®¹å™¨</h4>
<pre><code class="hljs language-scss" lang="scss">private void <span class="hljs-built_in">prepareContext</span>(DefaultBootstrapContext bootstrapContext, 
                           ConfigurableApplicationContext context,
                           ConfigurableEnvironment environment, 
                           SpringApplicationRunListeners listeners,
                           ApplicationArguments applicationArguments, 
                           Banner printedBanner) {
    
    <span class="hljs-comment">// è®¾ç½®ç¯å¢ƒ</span>
    context<span class="hljs-selector-class">.setEnvironment</span>(environment);
    
    <span class="hljs-comment">// åº”ç”¨ä¸Šä¸‹æ–‡åç½®å¤„ç†</span>
    <span class="hljs-built_in">postProcessApplicationContext</span>(context);
    
    <span class="hljs-comment">// åº”ç”¨åˆå§‹åŒ–å™¨</span>
    <span class="hljs-built_in">applyInitializers</span>(context);
    
    <span class="hljs-comment">// å‘å¸ƒApplicationContextInitializedäº‹ä»¶</span>
    listeners<span class="hljs-selector-class">.contextPrepared</span>(context);
    
    <span class="hljs-comment">// æ³¨å†ŒBeanå®šä¹‰</span>
    <span class="hljs-built_in">load</span>(context, sources.toArray(new Object[<span class="hljs-number">0</span>]));
    
    <span class="hljs-comment">// å‘å¸ƒApplicationContextLoadedäº‹ä»¶</span>
    listeners<span class="hljs-selector-class">.contextLoaded</span>(context);
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">12345678910111213141516171819202122232425</span>
</code></pre>
<blockquote>
<p><strong>å‡†å¤‡ApplicationContext IOCå®¹å™¨çš„åŸºæœ¬ä¿¡æ¯ prepareContext()</strong> ï¼š</p>
<ul>
<li>ä¿å­˜ç¯å¢ƒä¿¡æ¯</li>
<li>IOCå®¹å™¨çš„åç½®å¤„ç†æµç¨‹</li>
<li>åº”ç”¨åˆå§‹åŒ–å™¨ï¼š<code>applyInitializers</code></li>
<li>éå†æ‰€æœ‰çš„Â <code>ApplicationContextInitializer</code>ï¼Œè°ƒç”¨Â <code>initialize</code>ï¼Œæ¥å¯¹IOCå®¹å™¨è¿›è¡Œåˆå§‹åŒ–æ‰©å±•åŠŸèƒ½</li>
<li>éå†æ‰€æœ‰çš„ç›‘å¬å™¨è°ƒç”¨Â <code>contextPrepared</code>ï¼Œé€šçŸ¥æ‰€æœ‰çš„ç›‘å¬å™¨contextPrepare</li>
<li>æ‰€æœ‰çš„ç›‘å¬å™¨è°ƒç”¨Â <code>contextLoaded</code>ï¼Œé€šçŸ¥æ‰€æœ‰çš„ç›‘å¬å™¨contextLoaded</li>
</ul>
</blockquote>
<h4 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5. åˆ·æ–°IOCå®¹å™¨</h4>
<p>è¿™æ˜¯SpringBootå¯åŠ¨è¿‡ç¨‹ä¸­æœ€æ ¸å¿ƒçš„æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">private void <span class="hljs-built_in">refreshContext</span>(ConfigurableApplicationContext context) {
    <span class="hljs-comment">// æ³¨å†Œå…³é—­é’©å­</span>
    if (this.registerShutdownHook) {
        shutdownHook<span class="hljs-selector-class">.registerApplicationContext</span>(context);
    }
    
    <span class="hljs-comment">// æ‰§è¡Œåˆ·æ–°æ“ä½œ</span>
    <span class="hljs-built_in">refresh</span>(context);
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123456789</span>
</code></pre>
<p>å®é™…çš„åˆ·æ–°æ“ä½œå§”æ‰˜ç»™SpringÂ Frameworkçš„<code>refresh()</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">refresh</span>(<span class="hljs-params">ApplicationContext applicationContext</span>) {
    applicationContext.<span class="hljs-title function_">refresh</span>();
}

<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123</span>
</code></pre>
<p>åœ¨<code>refresh()</code>æ–¹æ³•ä¸­ä¼šå®Œæˆï¼š</p>
<ul>
<li>BeanFactoryçš„åˆ›å»ºå’Œé…ç½®</li>
<li>Beançš„åç½®å¤„ç†å™¨æ³¨å†Œ</li>
<li>æ¶ˆæ¯æºã€äº‹ä»¶å¹¿æ’­å™¨ç­‰åŸºç¡€ç»„ä»¶çš„åˆå§‹åŒ–</li>
<li>WebæœåŠ¡å™¨çš„åˆ›å»ºå’Œå¯åŠ¨</li>
<li>å•ä¾‹Beançš„å®ä¾‹åŒ–</li>
</ul>
<blockquote>
<p><strong>åˆ·æ–°IOCå®¹å™¨ï¼ŒrefreshContext</strong>ï¼š</p>
<ul>
<li>åˆ›å»ºå®¹å™¨ä¸­çš„æ‰€æœ‰ç»„ä»¶ï¼ˆSpringæ³¨è§£ï¼‰</li>
<li>å¯åŠ¨å†…åµŒçš„WebæœåŠ¡å™¨ï¼ˆå¦‚Tomcatï¼‰</li>
<li>å®Œæˆæ‰€æœ‰Beançš„åˆ›å»ºå’Œä¾èµ–æ³¨å…¥</li>
</ul>
</blockquote>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6. å®¹å™¨åˆ·æ–°åå¤„ç†</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">afterRefresh</span>(<span class="hljs-params">ConfigurableApplicationContext context,
                           ApplicationArguments args</span>) {
    <span class="hljs-comment">// è°ƒç”¨ApplicationRunnerå’ŒCommandLineRunner</span>
}

<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">1234</span>
</code></pre>
<h4 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7. è°ƒç”¨Runners</h4>
<pre><code class="hljs language-scss" lang="scss">private void <span class="hljs-built_in">callRunners</span>(ApplicationContext context, ApplicationArguments args) {
    List&lt;<span class="hljs-selector-tag">Object</span>&gt; runners = new ArrayList&lt;&gt;();
    
    <span class="hljs-comment">// è·å–å®¹å™¨ä¸­çš„ApplicationRunner</span>
    runners<span class="hljs-selector-class">.addAll</span>(context.getBeansOfType(ApplicationRunner.class)<span class="hljs-selector-class">.values</span>());
    
    <span class="hljs-comment">// è·å–å®¹å™¨ä¸­çš„CommandLineRunner  </span>
    runners<span class="hljs-selector-class">.addAll</span>(context.getBeansOfType(CommandLineRunner.class)<span class="hljs-selector-class">.values</span>());
    
    <span class="hljs-comment">// åˆå¹¶æ‰€æœ‰runnerå¹¶ä¸”æŒ‰ç…§@Orderè¿›è¡Œæ’åº</span>
    AnnotationAwareOrderComparator<span class="hljs-selector-class">.sort</span>(runners);
    
    <span class="hljs-comment">// éå†æ‰€æœ‰çš„runnerï¼Œè°ƒç”¨runæ–¹æ³•</span>
    for (Object runner : new LinkedHashSet&lt;&gt;(runners)) {
        if (runner instanceof ApplicationRunner) {
            <span class="hljs-built_in">callRunner</span>((ApplicationRunner) runner, args);
        }
        if (runner instanceof CommandLineRunner) {
            <span class="hljs-built_in">callRunner</span>((CommandLineRunner) runner, args);
        }
    }
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">12345678910111213141516171819202122</span>
</code></pre>
<blockquote>
<p><strong>è°ƒç”¨æ‰€æœ‰runners</strong>ï¼š</p>
<ul>
<li>è·å–å®¹å™¨ä¸­çš„Â <code>ApplicationRunner</code></li>
<li>è·å–å®¹å™¨ä¸­çš„Â <code>CommandLineRunner</code></li>
<li>åˆå¹¶æ‰€æœ‰runnerå¹¶ä¸”æŒ‰ç…§Orderè¿›è¡Œæ’åº</li>
<li>éå†æ‰€æœ‰çš„runnerï¼Œè°ƒç”¨runæ–¹æ³•</li>
</ul>
</blockquote>
<h4 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8. å¯åŠ¨å®Œæˆäº‹ä»¶å‘å¸ƒ</h4>
<pre><code class="hljs language-lua" lang="lua">// æ‰€æœ‰ç›‘å¬å™¨è°ƒç”¨listeners.started(context)ï¼Œé€šçŸ¥æ‰€æœ‰çš„ç›‘å¬å™¨started
listeners.started(context);

// è°ƒç”¨æ‰€æœ‰ç›‘å¬å™¨çš„<span class="hljs-built_in">running</span>æ–¹æ³•listeners.<span class="hljs-built_in">running</span>(context)ï¼Œé€šçŸ¥æ‰€æœ‰çš„ç›‘å¬å™¨<span class="hljs-built_in">running</span>  
listeners.<span class="hljs-built_in">running</span>(context);

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">12345</span>
</code></pre>
<h4 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9. å¼‚å¸¸å¤„ç†</h4>
<p>åœ¨æ•´ä¸ªå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ï¼Œä¼šè¿›è¡Œç›¸åº”çš„å¤„ç†ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¯åŠ¨æµç¨‹...</span>
} <span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Throwable</span> ex) {
    <span class="hljs-comment">// è°ƒç”¨Listenerçš„failedæ–¹æ³•ï¼Œé€šçŸ¥æ‰€æœ‰çš„ç›‘å¬å™¨å¯åŠ¨å¤±è´¥</span>
    <span class="hljs-title function_ invoke__">handleRunFailure</span>(context, ex, listeners);
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(ex);
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">1234567</span>
</code></pre>
<blockquote>
<p><strong>å¼‚å¸¸å¤„ç†æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>å¦‚æœä»¥ä¸Šæœ‰å¼‚å¸¸ï¼Œè°ƒç”¨<code>Listener</code>çš„failed</li>
<li>è°ƒç”¨æ‰€æœ‰ç›‘å¬å™¨çš„runningæ–¹æ³•ï¼Œå¦‚æœrunningæœ‰é—®é¢˜ï¼Œç»§ç»­é€šçŸ¥failed</li>
</ul>
</blockquote>
<h3 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸‰ã€å…³é”®ç»„ä»¶è¯¦è§£</h3>
<h4 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. äº‹ä»¶ç›‘å¬æœºåˆ¶</h4>
<p>SpringBootçš„å¯åŠ¨è¿‡ç¨‹é€šè¿‡äº‹ä»¶ç›‘å¬æœºåˆ¶å®ç°äº†é«˜åº¦çš„æ‰©å±•æ€§ï¼š</p>
<ul>
<li><strong>ApplicationStartingEvent</strong>: åº”ç”¨å¯åŠ¨å¼€å§‹æ—¶å‘å¸ƒ</li>
<li><strong>ApplicationEnvironmentPreparedEvent</strong>: ç¯å¢ƒå‡†å¤‡å®Œæˆåå‘å¸ƒ</li>
<li><strong>ApplicationContextInitializedEvent</strong>: åº”ç”¨ä¸Šä¸‹æ–‡åˆå§‹åŒ–åå‘å¸ƒ</li>
<li><strong>ApplicationPreparedEvent</strong>: Beanå®šä¹‰åŠ è½½å®Œæˆåå‘å¸ƒ</li>
<li><strong>ApplicationStartedEvent</strong>: åº”ç”¨å¯åŠ¨å®Œæˆåå‘å¸ƒ</li>
<li><strong>ApplicationReadyEvent</strong>: åº”ç”¨å‡†å¤‡å°±ç»ªåå‘å¸ƒ</li>
<li><strong>ApplicationFailedEvent</strong>: å¯åŠ¨å¤±è´¥æ—¶å‘å¸ƒ</li>
</ul>
<h4 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. Runneræ¥å£</h4>
<p><code>ApplicationRunner</code>å’Œ<code>CommandLineRunner</code>æä¾›äº†åœ¨åº”ç”¨å¯åŠ¨åæ‰§è¡Œç‰¹å®šä»£ç çš„æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Order(1)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplicationRunner</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationRunner</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(ApplicationArguments args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// åº”ç”¨å¯åŠ¨åæ‰§è¡Œçš„é€»è¾‘</span>
        System.out.println(<span class="hljs-string">"ApplicationRunneræ‰§è¡Œå®Œæˆ"</span>);
    }
}

<span class="hljs-meta">@Component</span>  
<span class="hljs-meta">@Order(2)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCommandLineRunner</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// å‘½ä»¤è¡Œå‚æ•°å¤„ç†é€»è¾‘</span>
        System.out.println(<span class="hljs-string">"CommandLineRunneræ‰§è¡Œå®Œæˆ"</span>);
    }
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123456789101112131415161718192021</span>
</code></pre>
<h3 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>æ€»ç»“</h3>
<p>SpringBootçš„å¯åŠ¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„æµç¨‹ï¼Œé€šè¿‡æ¨¡å—åŒ–çš„è®¾è®¡å’Œäº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œå®ç°äº†é«˜åº¦çš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚ç†è§£è¿™ä¸ªå¯åŠ¨è¿‡ç¨‹å¯¹äºæ·±å…¥æŒæ¡SpringBootæ¡†æ¶ã€è¿›è¡Œè‡ªå®šä¹‰æ‰©å±•å’Œæ•…éšœæ’æŸ¥éƒ½å…·æœ‰é‡è¦æ„ä¹‰ã€‚</p>
<p>æ•´ä¸ªå¯åŠ¨è¿‡ç¨‹ä»åˆ›å»ºSpringApplicationå®ä¾‹å¼€å§‹ï¼Œç»è¿‡ç¯å¢ƒå‡†å¤‡ã€å®¹å™¨åˆ›å»ºã€BeanåŠ è½½ã€åç½®å¤„ç†ç­‰å¤šä¸ªé˜¶æ®µï¼Œæœ€ç»ˆå®Œæˆåº”ç”¨çš„å¯åŠ¨å¹¶å¯¹å¤–æä¾›æœåŠ¡ã€‚æ¯ä¸ªé˜¶æ®µéƒ½æä¾›äº†ç›¸åº”çš„æ‰©å±•ç‚¹ï¼Œå…è®¸å¼€å‘è€…åœ¨é€‚å½“çš„æ—¶æœºä»‹å…¥å¹¶æ·»åŠ è‡ªå®šä¹‰é€»è¾‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jetpack Compose å®æˆ˜ï¼šè‡ªå®šä¹‰è‡ªé€‚åº”åˆ†æ®µæŒ‰é’® (Segmented Button)]]></title>    <link>https://juejin.cn/post/7574600119750230026</link>    <guid>https://juejin.cn/post/7574600119750230026</guid>    <pubDate>2025-11-20T07:49:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574600119750230026" data-draft-id="7574382925761576998" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack Compose å®æˆ˜ï¼šè‡ªå®šä¹‰è‡ªé€‚åº”åˆ†æ®µæŒ‰é’® (Segmented Button)"/> <meta itemprop="keywords" content="Android,Android Jetpack"/> <meta itemprop="datePublished" content="2025-11-20T07:49:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ç™½"/> <meta itemprop="url" content="https://juejin.cn/user/2549135752044601"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack Compose å®æˆ˜ï¼šè‡ªå®šä¹‰è‡ªé€‚åº”åˆ†æ®µæŒ‰é’® (Segmented Button)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2549135752044601/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:49:05.000Z" title="Thu Nov 20 2025 07:49:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¦‚æœè¦ä»å¹¶æ’æ˜¾ç¤ºçš„é€‰é¡¹ä¸­é€‰æ‹©ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>åˆ†æ®µæŒ‰é’®ï¼ˆSegmented Buttonï¼‰</strong>ã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65301f9e354c4377a1b2f84261da6b1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229744&amp;x-signature=z4uQwCvQRJbKnNrZi0JILpnEq6Y%3D" alt="image.png" width="100%" loading="lazy"/>
<p>å›¾ç‰‡æ¥è‡ªï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Fcomponents%2Fsegmented-button%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.com/develop/ui/compose/components/segmented-button?hl=zh-cn" ref="nofollow noopener noreferrer">åˆ†æ®µæŒ‰é’®</a></p>
<p>åˆ†æ®µæŒ‰é’®æœ‰ä¸¤ç§ç±»å‹ï¼š<strong>å•é€‰</strong>å’Œ<strong>å¤šé€‰</strong>ï¼Œå¯¹åº”äº† <code>SingleChoiceSegmentedButtonRow</code> å’Œ <code>MultiChoiceSegmentedButtonRow</code> å¸ƒå±€ã€‚</p>
<p>æˆ‘è¿™é‡Œåªæ¼”ç¤ºä¸€ä¸‹å•é€‰åˆ†æ®µæŒ‰é’®ã€‚</p>
<h2 data-id="heading-1">å•é€‰åˆ†æ®µæŒ‰é’®</h2>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Preview</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">SingleChoiceSegmentedButton</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å½“å‰é€‰ä¸­æŒ‰é’®çš„ç´¢å¼•</span>
    <span class="hljs-keyword">var</span> selectedIndex <span class="hljs-keyword">by</span> remember { mutableIntStateOf(<span class="hljs-number">0</span>) }
    <span class="hljs-keyword">val</span> options = listOf(<span class="hljs-string">"Sleep"</span>, <span class="hljs-string">"Work"</span>)

    SingleChoiceSegmentedButtonRow {
        options.forEachIndexed { index, label -&gt;
            SegmentedButton(
                <span class="hljs-comment">// æ ¹æ®æŒ‰é’®ç´¢å¼•å’ŒæŒ‰é’®æ€»æ•°è·å–æŒ‰é’®çš„å½¢çŠ¶</span>
                <span class="hljs-comment">// åªæœ‰ä¸€é¡¹æ—¶ï¼šå…¨åœ†ï¼›</span>
                <span class="hljs-comment">// ç¬¬ä¸€é¡¹ï¼šèµ·å§‹ç«¯åœ†è§’ï¼ˆStartï¼‰ï¼›</span>
                <span class="hljs-comment">// æœ€åä¸€é¡¹ï¼šæœ«ç«¯åœ†è§’ï¼ˆEndï¼‰ï¼›</span>
                <span class="hljs-comment">// ä¸­é—´é¡¹ï¼šç›´è§’</span>
                shape = SegmentedButtonDefaults.itemShape(
                    index = index,
                    count = options.size
                ),
                onClick = { selectedIndex = index },
                selected = index == selectedIndex,
                label = { Text(label) }
            )
        }
    }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed832b3d31d448eaa24651d6dba05ab4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229744&amp;x-signature=48qN63ALlfBTwo5v6sdrIc8%2BJAM%3D" alt="image.png" width="50%" loading="lazy"/>
<p>ä¸Šè¿°ä»£ç é€»è¾‘å¹¶ä¸éš¾ï¼Œæˆ‘ä»¬åªæ˜¯æä¾›äº†ä¸€ä¸ªæ ‡ç­¾åˆ—è¡¨ <code>[ "Sleep", "Work" ]</code>ï¼Œç„¶åä½¿ç”¨äº† <code>SingleChoiceSegmentedButtonRow</code> å’Œ <code>SegmentedButton</code> çš„ç»„åˆï¼Œå°±å®ç°äº†ä»¥ä¸Šæ•ˆæœã€‚</p>
<p>è¿™ä¸ªæ•ˆæœåœ¨å¤§å¤šæ—¶å€™éƒ½å¾ˆä¸é”™ï¼Œä½†æœ‰æ—¶æŒ‰é’®ä¸­çš„æ–‡æœ¬ä¼šæ˜¾å¾—æœ‰äº›æ‹¥æŒ¤ï¼Œä¾‹å¦‚ï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/519747d53d2043d3a47c9ef640f3e833~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229744&amp;x-signature=8DsRRg5F29iitr0%2B%2Fi%2BJU3GfURg%3D" alt="image.png" width="35%" loading="lazy"/>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå®šä¹‰ç»„ä»¶ï¼Œè®©è¢«é€‰ä¸­çš„æŒ‰é’®çš„å¤§å°åŠ¨æ€å˜åŒ–ã€‚</p>
<h2 data-id="heading-2">è‡ªé€‚åº”åˆ†æ®µæŒ‰é’®</h2>
<p>åˆ†æ®µæŒ‰é’®çš„ Material 3 è§„èŒƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fm3.material.io%2Fcomponents%2Fsegmented-buttons%2Foverview" target="_blank" title="https://m3.material.io/components/segmented-buttons/overview" ref="nofollow noopener noreferrer">Segmented buttons</a></p>
<p>é¦–å…ˆå®šä¹‰å‡ºå¯é€‰é¡¹çš„æ•°æ®æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Immutable</span> <span class="hljs-comment">// ä¼˜åŒ–é‡ç»„æ£€æŸ¥</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OptionItem</span>&lt;<span class="hljs-type">T</span>&gt;(
    <span class="hljs-keyword">val</span> value: T,
    <span class="hljs-keyword">val</span> label: String,
    <span class="hljs-keyword">val</span> selected: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
)
</code></pre>
<p>ç„¶åå°±æ¥å®Œæˆå¤–é¢çš„å¸ƒå±€å’Œå†…éƒ¨çš„æ¯ä¸€é¡¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">LitheSegmentedButton</span><span class="hljs-params">(
    modifier: <span class="hljs-type">Modifier</span> = Modifier,
    items: <span class="hljs-type">List</span>&lt;<span class="hljs-type">OptionItem</span>&lt;<span class="hljs-type">T</span>&gt;&gt;,
    onClick: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    <span class="hljs-keyword">val</span> itemSize = items.size
    
    <span class="hljs-comment">// å¤–å±‚å®¹å™¨ï¼šè´Ÿè´£ç»˜åˆ¶æ•´ä½“çš„è¾¹æ¡†å’Œåœ†è§’</span>
    Row(
        modifier = modifier
            .clip(CircleShape)
            .border(
                width = <span class="hljs-number">0.5</span>.dp,
                color = SegmentedButtonDefaults.colors().activeBorderColor,
                shape = CircleShape
            )
            .padding(<span class="hljs-number">0.5</span>.dp)
    ) {
        items.forEachIndexed { index, item -&gt;
            <span class="hljs-comment">// ç¼“å­˜ Shape å¯¹è±¡ï¼Œé¿å…æ¯æ¬¡é‡ç»„æ—¶éƒ½é‡æ–°åˆ›å»º</span>
            <span class="hljs-keyword">val</span> shape = remember(index, itemSize) {
                itemShape(index, itemSize)
            }

            SingleSegmentedButton(
                item = item,
                shape = shape,
                onClick = { onClick(item.value) }
            )
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">SingleSegmentedButton</span><span class="hljs-params">(
    item: <span class="hljs-type">OptionItem</span>&lt;<span class="hljs-type">T</span>&gt;,
    shape: <span class="hljs-type">Shape</span>,
    colors: <span class="hljs-type">SegmentedButtonColors</span> = SegmentedButtonDefaults.colors()</span></span>,
    onClick: () -&gt; <span class="hljs-built_in">Unit</span>
) {
    Row(
        Modifier
            .height(<span class="hljs-number">40.</span>dp)
            .clip(shape)
            .clickable(onClick = onClick)
            .border(
                width = <span class="hljs-number">0.5</span>.dp,
                color = colors.activeBorderColor,
                shape = shape
            )
            .padding(<span class="hljs-number">0.5</span>.dp)
            .background( <span class="hljs-comment">// é€‰ä¸­çŠ¶æ€ä¸‹çš„èƒŒæ™¯è‰²</span>
                <span class="hljs-keyword">if</span> (item.selected) colors.activeContainerColor
                <span class="hljs-keyword">else</span> Color.Transparent,
                shape = shape
            )
            .padding(horizontal = <span class="hljs-number">18.</span>dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        <span class="hljs-keyword">if</span> (item.selected) {
            Row {
                Icon(
                    imageVector = Icons.Default.Done,
                    contentDescription = <span class="hljs-literal">null</span>,
                    modifier = Modifier
                        .size(<span class="hljs-number">18.</span>dp),
                    tint = colors.activeContentColor
                )
                Spacer(modifier = Modifier.width(<span class="hljs-number">8.</span>dp))
            }
        }

        Text(
            text = item.label,
            style = MaterialTheme.typography.labelLarge.copy(
                color = <span class="hljs-keyword">if</span> (item.selected) colors.activeContentColor
                <span class="hljs-keyword">else</span> colors.inactiveContentColor
            )
        )
    }
}

<span class="hljs-comment">/**
 * æ ¹æ®ç´¢å¼•å’Œæ€»æ•°è®¡ç®—æŒ‰é’®çš„å½¢çŠ¶
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">itemShape</span><span class="hljs-params">(index: <span class="hljs-type">Int</span>, count: <span class="hljs-type">Int</span>)</span></span>: Shape {
    <span class="hljs-keyword">if</span> (count == <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> CircleShape
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (index) {
        <span class="hljs-comment">// ç¬¬ä¸€ä¸ªï¼šèµ·å§‹ç«¯ï¼ˆå·¦ä¾§ï¼‰åœ†è§’</span>
        <span class="hljs-number">0</span> -&gt; RoundedCornerShape(topStartPercent = <span class="hljs-number">50</span>, bottomStartPercent = <span class="hljs-number">50</span>)
        <span class="hljs-comment">// æœ€åä¸€ä¸ªï¼šæœ«ç«¯ï¼ˆå³ä¾§ï¼‰åœ†è§’</span>
        count - <span class="hljs-number">1</span> -&gt; RoundedCornerShape(topEndPercent = <span class="hljs-number">50</span>, bottomEndPercent = <span class="hljs-number">50</span>)
        <span class="hljs-comment">// ä¸­é—´ï¼šç›´è§’</span>
        <span class="hljs-keyword">else</span> -&gt; RoundedCornerShape(<span class="hljs-number">0</span>)
    }
}
</code></pre>
<p>é¢„è§ˆä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Preview(showBackground = true)</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">LitheSegmentedButtonPreview</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> selectedIndex <span class="hljs-keyword">by</span> remember { mutableIntStateOf(<span class="hljs-number">0</span>) }
    <span class="hljs-keyword">val</span> items = listOf(
        OptionItem(<span class="hljs-number">0</span>, <span class="hljs-string">"Day"</span>, selected = selectedIndex == <span class="hljs-number">0</span>),
        OptionItem(<span class="hljs-number">1</span>, <span class="hljs-string">"Month"</span>, selected = selectedIndex == <span class="hljs-number">1</span>),
        OptionItem(<span class="hljs-number">2</span>, <span class="hljs-string">"Week"</span>, selected = selectedIndex == <span class="hljs-number">2</span>),
    )
    Box(modifier = Modifier.fillMaxSize()) {
        LitheSegmentedButton(
            items = items,
            onClick = {
                selectedIndex = it
            },
            modifier = Modifier.align(Alignment.Center)
        )
    }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc7517525ff5485cbc92d9a6ef545ec4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229744&amp;x-signature=U42jfRcYhzVYz4mXRENdd2L6dOg%3D" alt="Screen_recording_20251120_144129.gif" width="50%" loading="lazy"/>
<p>æœ€åä¸€æ­¥å°±æ˜¯åŠ ä¸ŠåŠ¨ç”»ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>AnimatedVisibility</code> æ¥å®Œæˆã€‚</p>
<blockquote>
<p>å…·ä½“å†…å®¹å¯ä»¥çœ‹æˆ‘çš„è¿™ç¯‡åšå®¢ï¼š<a href="https://juejin.cn/post/7505357994622222374#heading-2" target="_blank" title="https://juejin.cn/post/7505357994622222374#heading-2">æ§åˆ¶å†…å®¹çš„æ˜¾éšï¼šAnimatedVisibility</a></p>
</blockquote>
<p>ä¸ºäº†å®ç°â€œæ¨åŠ¨â€æ•ˆæœï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>expandIn</code> å’Œ <code>shrinkOut</code>ã€‚å¹¶ä¸”ä¸ºäº†è®©è¿™ä¸ªæ•ˆæœçœ‹èµ·æ¥æ›´å¥½ï¼ŒåˆåŠ ä¸Šæ·¡å…¥æ·¡å‡ºã€ç¼©æ”¾ä»¥åŠæ»‘åŠ¨æ•ˆæœï¼š</p>
<ul>
<li>å‡ºç°æ—¶ï¼Œæ˜¯æ·¡å…¥ã€æ°´å¹³å±•å¼€ã€ç¼©æ”¾ä»¥åŠè½»å¾®çš„çºµå‘æ»‘å…¥æ•ˆæœã€‚</li>
<li>ç¦»å¼€æ—¶ï¼Œåˆ™æ˜¯æ·¡å‡ºã€æ°´å¹³æ”¶ç¼©ã€ç¼©æ”¾ä»¥åŠçºµå‘æ»‘å‡ºçš„ç»„åˆã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">AnimatedVisibility(
    visible = item.selected,
    enter = fadeIn() + expandHorizontally() + scaleIn() + slideInVertically(initialOffsetY = { it / <span class="hljs-number">2</span> }),
    exit = fadeOut() + shrinkHorizontally() + scaleOut() + slideOutVertically(targetOffsetY = { it / <span class="hljs-number">2</span> })
) {
    Row {
        Icon(
            imageVector = Icons.Default.Done,
            contentDescription = <span class="hljs-literal">null</span>,
            modifier = Modifier
                .size(<span class="hljs-number">18.</span>dp),
            tint = colors.activeContentColor
        )
        Spacer(modifier = Modifier.width(<span class="hljs-number">8.</span>dp))
    }
}
</code></pre>
<p>æœ€ç»ˆæ•ˆæœï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6989a86ee1d43df94956d81bd157007~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229744&amp;x-signature=Rnep0fU4Tr6Dd3SvblITGdb4t%2BY%3D" alt="Screen_recording_20251120_145947.gif" width="50%" loading="lazy"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§’æ€åº“å­˜æ‰£å‡ç”¨redisåŸå­è‡ªå¢çš„å·¨å‘]]></title>    <link>https://juejin.cn/post/7574615024292479002</link>    <guid>https://juejin.cn/post/7574615024292479002</guid>    <pubDate>2025-11-20T07:48:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574615024292479002" data-draft-id="7574600119750131722" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§’æ€åº“å­˜æ‰£å‡ç”¨redisåŸå­è‡ªå¢çš„å·¨å‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T07:48:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ruokkk"/> <meta itemprop="url" content="https://juejin.cn/user/2060939282094124"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§’æ€åº“å­˜æ‰£å‡ç”¨redisåŸå­è‡ªå¢çš„å·¨å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2060939282094124/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ruokkk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:48:34.000Z" title="Thu Nov 20 2025 07:48:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„**â€œçœ‹ä¼¼å¯è¡Œï¼Œå®åˆ™å·¨å‘â€**çš„æ–¹æ¡ˆã€‚</p>
<p>å› ä¸ºä¸ºäº†é˜²æ­¢åº“å­˜å›è¡¥ï¼Œæ‰€ä»¥ä½ éœ€è¦ä¿è¯åº“å­˜ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œ
æ‰€ä»¥ï¼Œä½ åœ¨ä»£ç å±‚é¢çš„é€»è¾‘æ˜¯ï¼š</p>
<ol>
<li><code>redis.decr(key)</code></li>
<li><code>if (è¿”å›å€¼ &lt; 0) { redis.incr(key); return "å¤±è´¥"; }</code></li>
</ol>
<p><strong>ç»“è®ºæ˜¯ï¼šåƒä¸‡ä¸è¦è¿™æ ·å†™ã€‚</strong></p>
<p>è™½ç„¶é€»è¾‘ä¸Šçœ‹èµ·æ¥â€œå€Ÿäº†å†è¿˜â€æœ€åæ˜¯å¹³çš„ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆç‰¹åˆ«æ˜¯é«˜å¹¶å‘æˆ–ä¸ç¨³å®šç½‘ç»œç¯å¢ƒï¼‰ä¸‹ï¼Œè¿™ä¼šå¼•å‘<strong>æ•°æ®æ°¸ä¹…ä¸ä¸€è‡´</strong>å’Œ<strong>æ€§èƒ½é›ªå´©</strong>ã€‚</p>
<p>ä¸»è¦æœ‰ä»¥ä¸‹ 3 ä¸ªè‡´å‘½ç¼ºé™·ï¼š</p>
<h3 data-id="heading-0">1. è‡´å‘½ç¼ºé™·ï¼šç½‘ç»œä¸­æ–­æˆ–æœåŠ¡å´©æºƒå¯¼è‡´â€œåªå‡ä¸åŠ â€</h3>
<p>è¿™æ˜¯æœ€å¤§çš„é£é™©ç‚¹ã€‚å› ä¸º <code>DECR</code> å’Œ <code>INCR</code> æ˜¯<strong>ä¸¤æ¬¡ç‹¬ç«‹çš„ç½‘ç»œè¯·æ±‚</strong>ï¼Œå®ƒä»¬ä¹‹é—´æ²¡æœ‰åŸå­æ€§ä¿æŠ¤ã€‚</p>
<p><strong>åœºæ™¯æ¨æ¼”ï¼š</strong></p>
<ol>
<li>å½“å‰åº“å­˜ä¸º 0ã€‚</li>
<li>çº¿ç¨‹ A å‘èµ· <code>DECR</code>ï¼ŒRedis æ‰§è¡ŒæˆåŠŸï¼Œåº“å­˜å˜ä¸º -1ã€‚</li>
<li>çº¿ç¨‹ A æ”¶åˆ°è¿”å›å€¼ -1ï¼Œå‡†å¤‡å‘èµ· <code>INCR</code> è¿›è¡Œè¡¥å¿å›æ»šã€‚</li>
<li><strong>å°±åœ¨è¿™æ¯«ç§’ä¹‹é—´ï¼Œå‘ç”Ÿäº†æ„å¤–ï¼š</strong>
<ul>
<li><strong>æƒ…å†µä¸€ï¼š</strong> çº¿ç¨‹ A æ‰€åœ¨çš„æœåŠ¡å™¨å®•æœº/é‡å¯äº†ï¼ˆæ¯”å¦‚è¢« Kubernetes OOM Kill äº†ï¼‰ã€‚</li>
<li><strong>æƒ…å†µäºŒï¼š</strong> ç½‘ç»œæŠ–åŠ¨ï¼Œçº¿ç¨‹ A å‘å‡ºçš„ <code>INCR</code> è¯·æ±‚åŒ…ä¸¢äº†ï¼Œæˆ–è€… Redis çš„å“åº”åŒ…ä¸¢äº†å¯¼è‡´è¶…æ—¶å¼‚å¸¸ã€‚</li>
</ul>
</li>
<li><strong>ç»“æœï¼š</strong> <code>INCR</code> æ°¸è¿œæ²¡æœ‰è¢«æ‰§è¡Œã€‚</li>
<li><strong>åæœï¼š</strong> Redis é‡Œçš„åº“å­˜<strong>æ°¸ä¹…åœç•™åœ¨ -1</strong>ã€‚
<ul>
<li>æ¥ç€æœ‰äººé€€æ¬¾ï¼ˆçœŸæ­£çš„å›æ»šï¼‰ï¼Œåº“å­˜å˜æˆäº† 0ã€‚</li>
<li>æœ¬æ¥åº”è¯¥æ¢å¤æˆ 1 ä¸ªåº“å­˜ç»™åˆ«äººæŠ¢ï¼Œç°åœ¨å› ä¸ºé‚£ä¸ªæ°¸ä¹…çš„ -1ï¼Œè¿™ 1 ä¸ªåº“å­˜è¢«â€œåâ€äº†ã€‚</li>
<li><strong>è¿™å°±æ˜¯å…¸å‹çš„â€œåº“å­˜æ³„éœ²â€ã€‚</strong></li>
</ul>
</li>
</ol>
<h3 data-id="heading-1">2. æ€§èƒ½ç¼ºé™·ï¼šRedis å†™å‹åŠ›ç¿»å€ï¼ˆå†™æ”¾å¤§ï¼‰</h3>
<p>Redis çš„è¯»æ€§èƒ½æé«˜ï¼Œä½†å†™æ€§èƒ½ç›¸å¯¹æ˜‚è´µï¼ˆæ¶‰åŠåˆ° AOF åˆ·ç›˜ã€ä¸»ä»åŒæ­¥ï¼‰ã€‚</p>
<p><strong>åœºæ™¯æ¨æ¼”ï¼š</strong>
å‡è®¾åº“å­˜ 0ï¼Œè¿™æ—¶å€™æ¥äº† 10,000 ä¸ªå¹¶å‘è¯·æ±‚ã€‚</p>
<ul>
<li>
<p><strong>ä½¿ç”¨ Lua è„šæœ¬ï¼š</strong></p>
<ul>
<li>10,000 ä¸ªè¯·æ±‚ -&gt; Redis æ‰§è¡Œ Lua -&gt; åˆ¤æ–­ <code>stock &lt;= 0</code> -&gt; ç›´æ¥è¿”å› 0ã€‚</li>
<li><strong>Redis å®é™…å‘ç”Ÿçš„å†™æ“ä½œï¼š0 æ¬¡</strong>ï¼ˆå› ä¸ºæ²¡æœ‰å®é™…æ‰£å‡ï¼‰ã€‚</li>
<li>Redis åªæ˜¯åšäº†ä¸€æ¬¡å†…å­˜è¯»å–å’Œé€»è¾‘åˆ¤æ–­ï¼Œé€Ÿåº¦é£å¿«ï¼Œä¸äº§ç”Ÿ AOF æ—¥å¿—ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ DECR + INCR è¡¥å¿æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>10,000 ä¸ªè¯·æ±‚ -&gt; 10,000 æ¬¡ <code>DECR</code>ï¼ˆåº“å­˜ç‹‚æ‰åˆ° -10000ï¼‰ã€‚</li>
<li>10,000 ä¸ªè¯·æ±‚å‘ç°å°äº 0 -&gt; 10,000 æ¬¡ <code>INCR</code>ï¼ˆåº“å­˜æ…¢æ…¢åŠ å› 0ï¼‰ã€‚</li>
<li><strong>Redis å®é™…å‘ç”Ÿçš„å†™æ“ä½œï¼š20,000 æ¬¡ï¼</strong></li>
<li>è¿™ 2 ä¸‡æ¬¡æ“ä½œå…¨éƒ¨è¦å†™ AOF æ—¥å¿—ï¼Œå…¨éƒ¨è¦åŒæ­¥ç»™ä»èŠ‚ç‚¹ï¼ˆSlaveï¼‰ã€‚</li>
<li><strong>åæœï¼š</strong> åœ¨æ²¡è´§çš„æ—¶å€™ï¼Œåè€ŒæŠŠ Redis çš„ç£ç›˜ IO å’Œç½‘ç»œå¸¦å®½æ‰“æ»¡äº†ï¼Œå¯èƒ½ç›´æ¥æŠŠ Redis ææŒ‚ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">3. ç«æ€ä¸ç›‘æ§å¹²æ‰°</h3>
<ul>
<li><strong>ç›‘æ§æŠ¥è­¦å¤±æ•ˆï¼š</strong> æ­£å¸¸è¿ç»´ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè®¾ç½®â€œåº“å­˜ &lt; 0 æŠ¥è­¦â€ã€‚å¦‚æœä½ ç”¨è¿™ç§æ–¹æ¡ˆï¼Œåº“å­˜ä¼šé¢‘ç¹åœ¨è´Ÿæ•°è·³åŠ¨ï¼ŒæŠ¥è­¦ç³»ç»Ÿä¼šä¸€ç›´å“ï¼Œå¯¼è‡´ä½ æ— æ³•åŒºåˆ†æ˜¯â€œçœŸçš„å‡º Bug äº†â€è¿˜æ˜¯â€œæ­£å¸¸çš„è¡¥å¿é€»è¾‘â€ã€‚</li>
<li><strong>å¹¶å‘è§†è§‰å¹²æ‰°ï¼š</strong> åœ¨é«˜å¹¶å‘ç¬é—´ï¼Œä½ é€šè¿‡ Redis å®¢æˆ·ç«¯æŸ¥çœ‹åº“å­˜ï¼Œå¯èƒ½ä¼šçœ‹åˆ° <code>-500</code> è¿™ç§æ•°å­—ï¼Œå¾ˆéš¾æ’æŸ¥é—®é¢˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">æ€»ç»“</h3>
<p><strong>Lua è„šæœ¬çš„æœ¬è´¨ä¸ä»…ä»…æ˜¯é€»è¾‘åˆ¤æ–­ï¼Œæ›´æ˜¯ä¸ºäº†â€œåŸå­æ€§â€å’Œâ€œå‡å°‘æ— æ•ˆå†™æ“ä½œâ€ã€‚</strong></p>






























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">Lua è„šæœ¬æ–¹æ¡ˆ</th><th align="left">DECR + INCR è¡¥å¿æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td align="left"><strong>åŸå­æ€§</strong></td><td align="left"><strong>å®Œå…¨åŸå­</strong>ï¼ˆè¦ä¹ˆå…¨åšï¼Œè¦ä¹ˆä¸åšï¼‰</td><td align="left"><strong>æ— åŸå­æ€§</strong>ï¼ˆä¸¤ä¸ªç‹¬ç«‹æ­¥éª¤ï¼Œä¸­é—´å¯èƒ½æ–­å¼€ï¼‰</td></tr><tr><td align="left"><strong>æ•…éšœåæœ</strong></td><td align="left">å³ä½¿æœåŠ¡å´©äº†ï¼Œåº“å­˜ä¾ç„¶å‡†ç¡®</td><td align="left"><strong>æœåŠ¡å´©äº† = åº“å­˜æ°¸ä¹…å˜è´Ÿ</strong></td></tr><tr><td align="left"><strong>Redis å†™å‹åŠ›</strong></td><td align="left">åº“å­˜ä¸è¶³æ—¶ï¼Œ<strong>0 å†™æ“ä½œ</strong></td><td align="left">åº“å­˜ä¸è¶³æ—¶ï¼Œ<strong>2å€ å†™æ“ä½œ</strong>ï¼ˆæœ€è‡´å‘½ï¼‰</td></tr><tr><td align="left"><strong>æ¨èæŒ‡æ•°</strong></td><td align="left">â­â­â­â­â­</td><td align="left">â˜ ï¸ (ç»å¯¹ç¦æ­¢)</td></tr></tbody></table>
<p>æ‰€ä»¥ï¼Œ<strong>å®æ„¿å¤šå†™å‡ è¡Œ Lua è„šæœ¬ä»£ç ï¼Œä¹Ÿä¸è¦ä¸ºäº†çœäº‹ç”¨ <code>DECR</code> åå† <code>INCR</code>ï¼Œé£é™©æˆæœ¬å¤ªé«˜äº†ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Array.isArray()æ€§èƒ½æµ‹è¯•]]></title>    <link>https://juejin.cn/post/7574404398066302976</link>    <guid>https://juejin.cn/post/7574404398066302976</guid>    <pubDate>2025-11-20T07:23:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574404398066302976" data-draft-id="7574601160980627471" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Array.isArray()æ€§èƒ½æµ‹è¯•"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-20T07:23:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹±ä¿Šæ½‡æ´’çš„ç å†œ"/> <meta itemprop="url" content="https://juejin.cn/user/2488950053668439"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Array.isArray()æ€§èƒ½æµ‹è¯•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2488950053668439/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹±ä¿Šæ½‡æ´’çš„ç å†œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:23:44.000Z" title="Thu Nov 20 2025 07:23:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¦ç¡®å®š <code>Object.prototype.toString.call(val).slice(8, -1).toLowerCase()==='array'</code> ä¸ <code>Array.isArray()</code> ä¹‹é—´çš„æ€§èƒ½å·®å¼‚ï¼Œå¯ä»¥é€šè¿‡åŸºå‡†æµ‹è¯•æ¥é‡åŒ–æ¯”è¾ƒã€‚ä»¥ä¸‹æ˜¯é€æ­¥éªŒè¯è¿‡ç¨‹ï¼š</p>
<hr/>
<h3 data-id="heading-0"><strong>1. æ€§èƒ½åŸºå‡†æµ‹è¯•ä»£ç </strong></h3>
<p>ä½¿ç”¨ <code>console.time()</code> è¿›è¡Œç®€å•æµ‹è¯•ï¼ˆæˆ–ä¸“ä¸šå·¥å…·å¦‚ <strong>Benchmark.js</strong>ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">const</span> iterations = <span class="hljs-number">1000000</span>;

<span class="hljs-comment">// æµ‹è¯• Object.prototype.toString æ–¹æ³•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'toString'</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; iterations; i++) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(arr).<span class="hljs-title function_">slice</span>(<span class="hljs-number">8</span>, -<span class="hljs-number">1</span>).<span class="hljs-title function_">toLowerCase</span>() === <span class="hljs-string">'array'</span>;
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'toString'</span>);

<span class="hljs-comment">// æµ‹è¯• Array.isArray æ–¹æ³•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'isArray'</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; iterations; i++) {
  <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(arr);
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'isArray'</span>);
</code></pre>
<hr/>
<h3 data-id="heading-1"><strong>2. æµ‹è¯•ç»“æœï¼ˆChrome 118 å®æµ‹ï¼‰</strong></h3>

















<table><thead><tr><th>æ–¹æ³•</th><th>è€—æ—¶ï¼ˆ100ä¸‡æ¬¡è¿­ä»£ï¼‰</th></tr></thead><tbody><tr><td><code>Object.prototype.toString</code></td><td><strong>~480ms</strong></td></tr><tr><td><code>Array.isArray</code></td><td><strong>~5ms</strong></td></tr></tbody></table>
<p><strong><code>Array.isArray</code> å¿«çº¦ 95 å€</strong>ï¼Œä¸”ä»£ç æ›´ç®€æ´ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>3. ä¸ºä»€ä¹ˆ <code>Array.isArray</code> æ›´å¿«ï¼Ÿ</strong></h3>
<ul>
<li><strong>åŸç”Ÿä¼˜åŒ–</strong>ï¼š<code>Array.isArray</code> æ˜¯å¼•æ“å†…ç½®çš„ <strong>åŸç”Ÿå‡½æ•°</strong>ï¼ˆå¦‚ V8 çš„ <code>Builtin_IsArray</code>ï¼‰ï¼Œç›´æ¥æ£€æŸ¥å¯¹è±¡çš„å†…éƒ¨ [[Class]] å±æ€§ï¼Œæ— éœ€å­—ç¬¦ä¸²æ“ä½œã€‚</li>
<li><strong>é¿å…ä¸­é—´æ­¥éª¤</strong>ï¼š<code>toString</code> æ–¹æ³•éœ€è¦ï¼š
<ol>
<li>è°ƒç”¨ <code>Object.prototype.toString</code> ç”Ÿæˆå­—ç¬¦ä¸²ï¼ˆå¦‚ <code>"[object Array]"</code>ï¼‰ã€‚</li>
<li>æ‰§è¡Œ <code>.slice(8, -1)</code> æå– <code>"Array"</code>ã€‚</li>
<li>è°ƒç”¨ <code>.toLowerCase()</code> è½¬æ¢ä¸º <code>"array"</code>ã€‚
è¿™äº›æ­¥éª¤æ¶‰åŠå†…å­˜åˆ†é…å’Œå­—ç¬¦ä¸²æ“ä½œï¼Œè€Œ <code>Array.isArray</code> ç›´æ¥è¿”å›å¸ƒå°”å€¼ã€‚</li>
</ol>
</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>4. ç»“è®º</strong></h3>
<ul>
<li><strong>æ€§èƒ½</strong>ï¼š<code>Array.isArray</code> è¿œè¶… <code>toString</code> æ–¹æ³•ï¼ˆå·®å¼‚å¯è¾¾ä¸¤ä¸ªæ•°é‡çº§ï¼‰ã€‚</li>
<li><strong>å¯é æ€§</strong>ï¼šä¸¤è€…ç»“æœä¸€è‡´ï¼Œä½† <code>Array.isArray</code> æ˜¯ <strong>ECMAScript 5+ æ ‡å‡†</strong>ï¼Œæ‰€æœ‰ç°ä»£ç¯å¢ƒå‡æ”¯æŒã€‚</li>
<li><strong>æœ€ä½³å®è·µ</strong>ï¼š<strong>æ°¸è¿œä¼˜å…ˆä½¿ç”¨ <code>Array.isArray</code></strong>ï¼Œä»…åœ¨éœ€è¦å…¼å®¹ææ—§ç¯å¢ƒï¼ˆå¦‚ IE8 åŠä»¥ä¸‹ï¼‰æ—¶é€€è€Œæ±‚å…¶æ¬¡ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Element é¢æ¿ - æŸ¥çœ‹ Shadow DOM - æµè§ˆå™¨åŸç”Ÿç»„ä»¶å†…éƒ¨ç»“æ„]]></title>    <link>https://juejin.cn/post/7574530224853139462</link>    <guid>https://juejin.cn/post/7574530224853139462</guid>    <pubDate>2025-11-20T07:32:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574530224853139462" data-draft-id="7574451949326270505" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Element é¢æ¿ - æŸ¥çœ‹ Shadow DOM - æµè§ˆå™¨åŸç”Ÿç»„ä»¶å†…éƒ¨ç»“æ„"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-20T07:32:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¨å­åŒå¿—"/> <meta itemprop="url" content="https://juejin.cn/user/2084329779627965"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Element é¢æ¿ - æŸ¥çœ‹ Shadow DOM - æµè§ˆå™¨åŸç”Ÿç»„ä»¶å†…éƒ¨ç»“æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2084329779627965/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¨å­åŒå¿—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:32:24.000Z" title="Thu Nov 20 2025 07:32:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">åŠŸèƒ½è¯´æ˜</h3>
<p>æµè§ˆå™¨åŸç”Ÿç»„ä»¶ï¼ˆå¦‚ <code>&lt;input&gt;</code>ã€<code>&lt;video&gt;</code>ã€<code>&lt;select&gt;</code> ç­‰ï¼‰å†…éƒ¨ä½¿ç”¨ <strong>Shadow DOM</strong> å°è£…ç»“æ„å’Œæ ·å¼ã€‚Shadow DOM æ˜¯ Web Components çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œç”¨äºéš”ç¦»ç»„ä»¶å†…éƒ¨ä»£ç ï¼Œé¿å…ä¸å¤–éƒ¨å†²çªã€‚</p>
<p><strong>å…³äºæ ·å¼å‰ç¼€</strong>ï¼šè‡ªå®šä¹‰åŸç”Ÿç»„ä»¶æ ·å¼æ—¶å¸¸è§ <code>-webkit-</code> å‰ç¼€ï¼ˆå¦‚ <code>::-webkit-scrollbar</code>ï¼‰ï¼Œè¿™æ˜¯ WebKit/Blink å¼•æ“ç‰¹æœ‰çš„ä¼ªå…ƒç´ é€‰æ‹©å™¨ã€‚ç”±äº Chromeã€Safariã€Edge (æ–°ç‰ˆ) ç­‰ä¸»æµæµè§ˆå™¨å‡ä½¿ç”¨è¯¥å¼•æ“ï¼Œ<code>-webkit-</code> å·²æˆä¸ºäº‹å®æ ‡å‡†ã€‚Firefox ç­‰æµè§ˆå™¨ä¹Ÿæ”¯æŒéƒ¨åˆ† <code>-webkit-</code> ä¼ªå…ƒç´ ä»¥ä¿æŒå…¼å®¹æ€§ã€‚</p>
<h3 data-id="heading-1">å¼€å¯æ–¹æ³•</h3>
<ol>
<li>æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰â†’ è®¾ç½® âš™ï¸ï¼ˆæˆ–æŒ‰ F1ï¼‰</li>
<li><strong>Preferences</strong> â†’ <strong>Elements</strong> â†’ å‹¾é€‰ <strong>Show user agent shadow DOM</strong></li>
</ol>
<h3 data-id="heading-2">å®é™…æ¡ˆä¾‹ï¼šæŸ¥çœ‹ input[type="range"] æ»‘å—çš„å†…éƒ¨ç»“æ„</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"range"</span> <span class="hljs-attr">min</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">max</span>=<span class="hljs-string">"100"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"50"</span>&gt;</span>
</code></pre>
<p><strong>å¼€å¯ Shadow DOM å</strong>ï¼Œåœ¨ Elements é¢æ¿ä¸­å¯ä»¥çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"range"</span> <span class="hljs-attr">min</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">max</span>=<span class="hljs-string">"100"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"50"</span>&gt;</span>
  #shadow-root (user-agent)
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"track"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"thumb"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>è‡ªå®šä¹‰æ»‘å—æ ·å¼</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¿®æ”¹æ»‘å—æŒ‰é’®ï¼ˆæ‹–åŠ¨çš„åœ†ç‚¹ï¼‰ */</span>
<span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">"range"</span>]</span>::-webkit-slider-thumb {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
}

<span class="hljs-comment">/* ä¿®æ”¹æ»‘åŠ¨è½¨é“ */</span>
<span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">"range"</span>]</span>::-webkit-slider-runnable-track {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ddd</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}
</code></pre>
<p>âš ï¸ <strong>å…¼å®¹æ€§æç¤º</strong>ï¼šè¿™äº›æ˜¯éæ ‡å‡†ç‰¹æ€§ï¼Œä¸»æµæµè§ˆå™¨ä½¿ç”¨ <code>-webkit-</code> å‰ç¼€å³å¯</p>
<h3 data-id="heading-3">å¸¸ç”¨ä¼ªå…ƒç´ é€‰æ‹©å™¨</h3>













































<table><thead><tr><th>å…ƒç´ </th><th>ä¼ªå…ƒç´ é€‰æ‹©å™¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>&lt;input type="range"&gt;</code></td><td><code>::-webkit-slider-thumb</code></td><td>æ»‘å—æŒ‰é’®</td></tr><tr><td><code>&lt;input type="range"&gt;</code></td><td><code>::-webkit-slider-runnable-track</code></td><td>æ»‘åŠ¨è½¨é“</td></tr><tr><td><code>&lt;input type="search"&gt;</code></td><td><code>::-webkit-search-cancel-button</code></td><td>æ¸…é™¤æŒ‰é’®</td></tr><tr><td><code>&lt;input type="file"&gt;</code></td><td><code>::-webkit-file-upload-button</code></td><td>æ–‡ä»¶ä¸Šä¼ æŒ‰é’®</td></tr><tr><td><code>&lt;input type="date"&gt;</code></td><td><code>::-webkit-calendar-picker-indicator</code></td><td>æ—¥å†å›¾æ ‡</td></tr><tr><td><code>&lt;progress&gt;</code></td><td><code>::-webkit-progress-bar</code></td><td>è¿›åº¦æ¡å®¹å™¨</td></tr><tr><td><code>&lt;progress&gt;</code></td><td><code>::-webkit-progress-value</code></td><td>è¿›åº¦æ¡å€¼</td></tr></tbody></table>
<h3 data-id="heading-4">æ€»ç»“</h3>
<ul>
<li>âœ… å¼€å¯ <strong>Show user agent shadow DOM</strong> å¯æŸ¥çœ‹æµè§ˆå™¨ç»„ä»¶å†…éƒ¨ç»“æ„</li>
<li>âœ… ä½¿ç”¨ <code>-webkit-</code> ä¼ªå…ƒç´ é€‰æ‹©å™¨è‡ªå®šä¹‰æ ·å¼ï¼ˆéæ ‡å‡†ç‰¹æ€§ï¼Œæ³¨æ„å…¼å®¹æ€§ï¼‰</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§¸ å‰ç«¯ä¸æ˜¯åªä¼šå†™ç®¡ç†åå°ï¼Œæˆ‘ç”¨ 400 è¡Œä»£ç ç”»äº†ä¸€ä¸ª LABUBU ï¼ | æ˜é‡‘ä¸€å‘¨ 11.20]]></title>    <link>https://juejin.cn/post/7574529034672832547</link>    <guid>https://juejin.cn/post/7574529034672832547</guid>    <pubDate>2025-11-20T07:52:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574529034672832547" data-draft-id="7574383670435201076" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§¸ å‰ç«¯ä¸æ˜¯åªä¼šå†™ç®¡ç†åå°ï¼Œæˆ‘ç”¨ 400 è¡Œä»£ç ç”»äº†ä¸€ä¸ª LABUBU ï¼ | æ˜é‡‘ä¸€å‘¨ 11.20"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-20T07:52:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘ä¸€å‘¨"/> <meta itemprop="url" content="https://juejin.cn/user/53218623894222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§¸ å‰ç«¯ä¸æ˜¯åªä¼šå†™ç®¡ç†åå°ï¼Œæˆ‘ç”¨ 400 è¡Œä»£ç ç”»äº†ä¸€ä¸ª LABUBU ï¼ | æ˜é‡‘ä¸€å‘¨ 11.20
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/53218623894222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘ä¸€å‘¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:52:42.000Z" title="Thu Nov 20 2025 07:52:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>æœ¬æ–‡å­—æ•°1800+ ï¼Œé˜…è¯»æ—¶é—´å¤§çº¦éœ€è¦ 5åˆ†é’Ÿã€‚</em></p>
<blockquote>
<p>ã€æ˜é‡‘ä¸€å‘¨ã€‘æœ¬æœŸäº®ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>
<p><a href="https://juejin.cn/post/7570260758061891619" target="_blank" title="https://juejin.cn/post/7570260758061891619">Cursor Agents + Holopix AI | è½»æ¾å®ç° "ğŸ¦å¤å¤" è‡ªèµ°æ£‹å°æ¸¸æˆ</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7570630923710054452" target="_blank" title="https://juejin.cn/post/7570630923710054452">æˆ‘ç”¨AIé‡æ„äº†ä¸€æ®µ500è¡Œçš„å±å±±ä»£ç ï¼Œè¿™æ˜¯æˆ‘çš„Promptå’Œæ€è€ƒè¿‡ç¨‹</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7571355989133099023" target="_blank" title="https://juejin.cn/post/7571355989133099023">å½“ä¸Šä¼ ä¸å†åªæ˜¯ /uploadï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆè®¾è®¡å¤§æ–‡ä»¶ä¸Šä¼ çš„</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7571693273728696356" target="_blank" title="https://juejin.cn/post/7571693273728696356">Flutter 3.38 å‘å¸ƒï¼Œå¿«æ¥çœ‹çœ‹æœ‰ä»€ä¹ˆæ›´æ–°å§</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7571693273728942116" target="_blank" title="https://juejin.cn/post/7571693273728942116">Dart 3.10 å‘å¸ƒï¼Œå¿«æ¥çœ‹æœ‰ä»€ä¹ˆæ›´æ–°å§</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7571378103281549318" target="_blank" title="https://juejin.cn/post/7571378103281549318">AIGCæ—¶ä»£çš„å¿…å¤‡æŠ€èƒ½--Promptå·¥ç¨‹</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7571306072423448618" target="_blank" title="https://juejin.cn/post/7571306072423448618">æ¥äº†è§£ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä½ çš„ Flutter WebView åœ¨ iOS 26 ä¸Šæœ‰ç‚¹å‡»é—®é¢˜ï¼Ÿ</a></p>
</li>
</ul>
<blockquote>
<p><strong>ã€Œä¸Šæ¦œè§„åˆ™ã€</strong>ï¼šæ–‡ç« å‘å¸ƒæ—¶é—´åœ¨æœ¬æœŸã€Œæ˜é‡‘ä¸€å‘¨ã€å‘å¸ƒæ—¶é—´çš„å‰ä¸€å‘¨å†…ï¼›ä¸”ç¬¦åˆå„ä¸ªæ ç›®çš„å†…å®¹å®šä½å’Œè¦æ±‚ã€‚ å¦‚å‘ç°æ–‡ç« æœ‰æŠ„è¢­ã€æ´—ç¨¿ç­‰è¿åç¤¾åŒºè§„åˆ™çš„è¡Œä¸ºï¼Œå°†å–æ¶ˆå½“æœŸåŠåç»­ä¸Šæ¦œèµ„æ ¼ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€å‘¨â€œé‡‘â€é€‰</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73d5bf990a124e3a87cffb06443ad9ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229962&amp;x-signature=Xt4B1Fq%2FNWuH%2Fpbkwp3x%2B4m%2FRGw%3D" alt="æ˜é‡‘ä¸€å‘¨ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<p><em>å†…å®¹è¯„å®¡ä»¬ä¼šåœ¨è¿‡å»çš„ä¸€å‘¨å†…å¯¹ç¤¾åŒºæ·±åº¦æŠ€æœ¯å¥½æ–‡è¿›è¡ŒæŒ–æ˜å’Œç­›é€‰ï¼Œä¼˜è´¨çš„æŠ€æœ¯æ–‡ç« æœ‰æœºä¼šå‡ºç°åœ¨ä¸‹æ–¹æ¦œå•ä¸­ï¼Œæ’åä¸åˆ†å…ˆåã€‚</em></p>
<h3 data-id="heading-1">å‰ç«¯</h3>
<p><a href="https://juejin.cn/post/7570260758061891619" target="_blank" title="https://juejin.cn/post/7570260758061891619">Cursor Agents + Holopix AI | è½»æ¾å®ç° "ğŸ¦å¤å¤" è‡ªèµ°æ£‹å°æ¸¸æˆ</a> <a href="https://juejin.cn/user/4142615541321928/posts" target="_blank" title="https://juejin.cn/user/4142615541321928/posts">@coder_pig</a></p>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»äº†å€ŸåŠ©â€œCursor Agentsæ¨¡å¼â€ä¸â€œHolopix AIâ€å¼€å‘â€œğŸ¦å¤å¤è‡ªèµ°æ£‹â€å°æ¸¸æˆçš„è¿‡ç¨‹ã€‚å…ˆè¿›è¡Œç©æ³•è®¾è®¡ä¸Demoå¼€å‘ï¼Œå†ç”¨Holopix AIå®šåˆ¶æ¨¡å‹ç”Ÿæˆæ¸¸æˆç´ æï¼ŒåŒ…æ‹¬è‹±é›„ã€æ€ªç‰©ã€èƒŒæ™¯ã€ç¥å™¨ç­‰ï¼Œæœ€ç»ˆå®ç°å•æœºå°æ¸¸æˆã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7570630923710054452" target="_blank" title="https://juejin.cn/post/7570630923710054452">æˆ‘ç”¨AIé‡æ„äº†ä¸€æ®µ500è¡Œçš„å±å±±ä»£ç ï¼Œè¿™æ˜¯æˆ‘çš„Promptå’Œæ€è€ƒè¿‡ç¨‹</a> <a href="https://juejin.cn/user/3878732754331096/posts" target="_blank" title="https://juejin.cn/user/3878732754331096/posts">@ErpanOmer</a></p>
<blockquote>
<p>ä½œè€…æ‰€åœ¨å›¢é˜Ÿç»´æŠ¤çš„ä¸­åå°é¡¹ç›®é‡Œæœ‰ä¸ª500è¡Œçš„Â <code>handleOrderSubmit.js</code>Â æ–‡ä»¶éš¾ä»¥é‡æ„ã€‚ä½œè€…é‡‡ç”¨äº”æ­¥é‡æ„æ³•ï¼Œè®© AI æ‰§è¡Œï¼Œè‡ªå·±å†³ç­–ï¼Œå°†ä»£ç æ‹†è§£æˆæ¨¡å—ï¼Œæœ€ç»ˆä»…ç”¨5å°æ—¶å®Œæˆé‡æ„ï¼Œè¿˜åŠ å…¥æ–°åŠŸèƒ½ï¼Œæ•ˆç‡å¤§å¹…æå‡ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7571846248719581184" target="_blank" title="https://juejin.cn/post/7571846248719581184">ğŸ§¸ å‰ç«¯ä¸æ˜¯åªä¼šå†™ç®¡ç†åå°ï¼Œæˆ‘ç”¨ 400 è¡Œä»£ç ç”»äº†ä¸€ä¸ª LABUBU ï¼</a> <a href="https://juejin.cn/user/3183831378302871/posts" target="_blank" title="https://juejin.cn/user/3183831378302871/posts">@xiaohe0601</a></p>
<blockquote>
<p>ä½œè€…ä½œä¸ºå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œä¸ºå¤ºå›è¢«â€œé»„ç‰›â€å æ®çš„æƒç›Šï¼Œç”¨ 400 è¡Œä»£ç ç”»äº†ä¸“å± LABUBUã€‚å€ŸåŠ© Leafer Vueï¼Œä¾æ¬¡ç»˜åˆ¶è„‘è¢‹ã€äº”å®˜ã€è€³æœµã€èº«ä½“ã€å°æ‰‹å’Œå°è„šï¼Œå®Œæ•´ä»£ç å¯åœ¨ leafer - labubu ä»“åº“æŸ¥çœ‹ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7570268773333205019" target="_blank" title="https://juejin.cn/post/7570268773333205019">ğŸ®ä¸€çœ¼å°±ä¼šğŸ—‚ï¸å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ï¼Œç™½é€å‰åç«¯å…¨å¥—åŠŸæ³•</a> <a href="https://juejin.cn/user/2225067267199320/posts" target="_blank" title="https://juejin.cn/user/2225067267199320/posts"> @vilan_å¾®æ¾œ</a></p>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»äº†å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ çš„å‰åç«¯å®ç°ã€‚å‰ç«¯ç”¨ Vue 3 + TS + Viteï¼Œå€ŸåŠ© Web Worker ç®—æ–‡ä»¶å“ˆå¸Œï¼Œå®ç°ç§’ä¼ ä¸æ–­ç‚¹ç»­ä¼ ï¼›åç«¯åŸºäº Node.js + Expressï¼Œç”¨ formidable å¤„ç†åˆ†ç‰‡ã€‚é€šè¿‡æ–‡ä»¶ hash å’Œç´¢å¼•æ ‡è¯†åˆ†ç‰‡ï¼Œæœ€ç»ˆåˆå¹¶æˆå®Œæ•´æ–‡ä»¶ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7570162686580523050" target="_blank" title="https://juejin.cn/post/7570162686580523050">å‡ ç§è™šæ‹Ÿåˆ—è¡¨æŠ€æœ¯æ–¹æ¡ˆè°ƒç ”</a> <a href="https://juejin.cn/user/4212984286819384/posts" target="_blank" title="https://juejin.cn/user/4212984286819384/posts"> @è‡³ç®€ç®€</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»• Vue3 æ¡†æ¶ä¸‹çš„è™šæ‹Ÿåˆ—è¡¨æŠ€æœ¯å±•å¼€ã€‚ä»‹ç»äº†è™šæ‹Ÿåˆ—è¡¨æ¦‚å¿µã€ä¼˜åŠ¿åŠ @vueuse/core å·¥å…·é›†ã€‚é˜è¿°å››ç§å®ç°æ–¹æ¡ˆç‰¹ç‚¹ã€åœºæ™¯ã€ä»£ç åŠä¼˜ç¼ºç‚¹ï¼Œç»™å‡ºæ€§èƒ½å¯¹æ¯”ã€æœ€ä½³å®è·µã€å¸¸è§é—®é¢˜è§£å†³åŠæ³•ï¼Œè¿˜æä¾›å‚è€ƒèµ„æºä¸é¡¹ç›®æ­å»ºæ­¥éª¤ã€‚</p>
</blockquote>
<h3 data-id="heading-2">åç«¯</h3>
<p><a href="https://juejin.cn/post/7571355989133099023" target="_blank" title="https://juejin.cn/post/7571355989133099023">å½“ä¸Šä¼ ä¸å†åªæ˜¯ /uploadï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆè®¾è®¡å¤§æ–‡ä»¶ä¸Šä¼ çš„</a>  <a href="https://juejin.cn/user/888839672963544/posts" target="_blank" title="https://juejin.cn/user/888839672963544/posts">@æ´›å¡å¡äº†</a></p>
<blockquote>
<p>æ–‡ç« èšç„¦å¤§æ–‡ä»¶ä¸Šä¼ è®¾è®¡ã€‚ä¼ ç»ŸSaaSä¸Šä¼ æ–¹æ¡ˆä¸é€‚ç”¨äºæ”¿ä¼ç§æœ‰åŒ–é¡¹ç›®ï¼Œå‰ç«¯å·²æœ‰æˆç†Ÿå¤§æ–‡ä»¶ä¸Šä¼ æ¨¡å¼ã€‚ä½œè€…é‡æ–°è®¾è®¡åç«¯æ¥å£ï¼Œæ­é…æ•°æ®åº“è¡¨ï¼Œå®ç°çŠ¶æ€è¿½è¸ªã€æ–­ç‚¹ç»­ä¼ ï¼Œè§£å†³é›†ç¾¤åˆå¹¶ç­‰é—®é¢˜ï¼Œä¿éšœä¸Šä¼ ç¨³å®šå¯é ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7570405675432935424" target="_blank" title="https://juejin.cn/post/7570405675432935424">Cursor æ— æ³•è·¨é¡¹ç›®è¯»å–æºç æ€ä¹ˆåŠï¼ŸMCP Easy Code Reader å¸®ä½ è§£å†³ï¼</a> <a href="https://juejin.cn/user/386633160473101/posts" target="_blank" title="https://juejin.cn/user/386633160473101/posts">@æ–¹åœ†æƒ³å½“å›¾çµ</a></p>
<blockquote>
<p>æœ¬æ–‡ä»‹ç» MCP Easy Code Readerï¼Œå®ƒå¯åœ¨ç¼–å†™ä»£ç æ—¶è¯»å–å¤šé¡¹ç›®æˆ– Jar åŒ…æºç ï¼Œæé«˜ Code Agent å‡†ç¡®åº¦ä¸ç¼–ç æ•ˆç‡ã€‚é˜è¿°å…¶æœ€ä½³å®è·µã€ç¯å¢ƒè¦æ±‚ã€æ¥å…¥æ–¹æ³•ã€å¸¸è§é—®é¢˜åŠå®ç°åŸç†ï¼Œè¿˜æåŠåç¼–è¯‘å™¨é€‰æ‹©ä¸ç¼“å­˜æœºåˆ¶ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7570187256105533446" target="_blank" title="https://juejin.cn/post/7570187256105533446">SpringBootå®ç°éšå¼å‚æ•°æ³¨å…¥</a>
<a href="https://juejin.cn/user/2524134428655159/posts" target="_blank" title="https://juejin.cn/user/2524134428655159/posts">@é£è±¡å—</a></p>
<blockquote>
<p>æ–‡ç« å›´ç»• Spring Boot å®ç°éšå¼å‚æ•°æ³¨å…¥å±•å¼€ã€‚å…ˆæŒ‡å‡ºä¼ ç»Ÿæ–¹æ¡ˆç¼ºé™·ï¼Œä»‹ç» Spring MVC çš„ HandlerMethodArgumentResolver æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è®¾è®¡æ€è·¯ã€æ ¸å¿ƒå®ç°ã€ç¤ºä¾‹åŠåŸç†ã€‚è¿˜æåŠè¿›é˜¶ç”¨æ³•ï¼Œç»™å‡ºå¼‚å¸¸å¤„ç†ã€é›†æˆ Spring Securityã€å¤šç§Ÿæˆ·åœºæ™¯çš„å®æˆ˜æŠ€å·§ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7571005077802369034" target="_blank" title="https://juejin.cn/post/7571005077802369034">å¾—ç‰©TiDBå‡çº§å®è·µ</a> <a href="https://juejin.cn/user/2392954206960247/posts" target="_blank" title="https://juejin.cn/user/2392954206960247/posts">@å¾—ç‰©æŠ€æœ¯</a></p>
<blockquote>
<p>å¾—ç‰©DBAå› ä¸šåŠ¡å¢é•¿å¯¹TiDBç¨³å®šæ€§åŠæ€§èƒ½å¸¦æ¥æŒ‘æˆ˜ï¼Œå†³å®šå°†TiDBä»5.3.3ç‰ˆæœ¬å‡çº§åˆ°7.5.xã€‚å‡çº§é‡‡ç”¨è¿ç§»æ–¹å¼ï¼Œè™½é‡æŸ¥è¯¢é—®é¢˜ï¼Œä½†å‡çº§åæ€§èƒ½ã€ç¨³å®šæ€§æ˜¾è‘—æå‡ï¼Œè¿˜å¸¦æ¥å¤šæ–¹é¢æ”¶ç›Šï¼Œæœªæ¥ä¼šå…³æ³¨8.5.xç‰ˆæœ¬è¿›å±•ã€‚</p>
</blockquote>
<h3 data-id="heading-3">Android</h3>
<p><a href="https://juejin.cn/post/7571693273728696356" target="_blank" title="https://juejin.cn/post/7571693273728696356">Flutter 3.38 å‘å¸ƒï¼Œå¿«æ¥çœ‹çœ‹æœ‰ä»€ä¹ˆæ›´æ–°å§</a> <a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>Flutter 3.38 äº 11 æœˆ 13 æ—¥å‘å¸ƒï¼Œæ›´æ–°ä¸°å¯Œã€‚æ¶µç›– Dot shorthandsã€Web æ”¯æŒå¢å¼ºã€Framework äº¤äº’ä¼˜åŒ–ã€Material å’Œ Cupertino æ§ä»¶æ”¹è¿›ã€å¯è®¿é—®æ€§æå‡ã€‚è¿˜é€‚é… iOS 26ã€ä¼˜åŒ– Android æ€§èƒ½ï¼ŒDevTools æ”¹è¿›ï¼Œæœ‰å¤šæ–¹é¢å¼ƒç”¨ä¸å˜æ›´ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7571693273728942116" target="_blank" title="https://juejin.cn/post/7571693273728942116">Dart 3.10 å‘å¸ƒï¼Œå¿«æ¥çœ‹æœ‰ä»€ä¹ˆæ›´æ–°å§</a> <a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>Dart 3.10 éš Flutter 3.38 ä¸€åŒæ›´æ–°ï¼Œå¸¦æ¥å¤šé¡¹ç‰¹æ€§ã€‚å¼•å…¥ dot shorthands ç®€åŒ–ä»£ç ï¼Œæ–°å¢åˆ†æå™¨æ’ä»¶ç³»ç»Ÿï¼ŒBuild hooks ç®€åŒ–åŸç”Ÿä»£ç é›†æˆï¼Œæœ‰ç§»é™¤å¼ƒç”¨é¡¹ lint å·¥å…·ï¼Œæ–°å¼ƒç”¨æ³¨é‡Šæ›´ç²¾ç¡®ï¼Œpub.dev ç®¡ç†å’Œå®‰å…¨åŠŸèƒ½å‡çº§ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7570299986530582555" target="_blank" title="https://juejin.cn/post/7570299986530582555">é¢è¯•è¢«é—®åˆ°Composeçš„å‰¯ä½œç”¨ä¸ä¼šï¼Œåªæ€ªæˆ‘æ²¡å¥½å¥½å­¦</a> <a href="https://juejin.cn/user/2089524588718126/posts" target="_blank" title="https://juejin.cn/user/2089524588718126/posts">@Coffeeee</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»• Compose å‰¯ä½œç”¨ API å±•å¼€ã€‚ä»‹ç»äº† DisposableEffectã€SideEffectã€LaunchedEffect ç­‰å¤šä¸ª API çš„ä½œç”¨ä¸ç‰¹æ€§ï¼Œå¦‚æ§åˆ¶å‰¯ä½œç”¨æ‰§è¡Œé˜¶æ®µã€å¤„ç†åç¨‹åŠç›‘å¬çŠ¶æ€å˜åŒ–ç­‰ï¼Œä¸ºå¼€å‘è€…åœ¨ Compose é¡¹ç›®ä¸­è¿ç”¨å‰¯ä½œç”¨æä¾›äº†æŒ‡å¯¼ã€‚</p>
</blockquote>
<h3 data-id="heading-4">äººå·¥æ™ºèƒ½</h3>
<p><a href="https://juejin.cn/post/7571378103281549318" target="_blank" title="https://juejin.cn/post/7571378103281549318">AIGCæ—¶ä»£çš„å¿…å¤‡æŠ€èƒ½--Promptå·¥ç¨‹</a> <a href="https://juejin.cn/user/3672799326256360/posts" target="_blank" title="https://juejin.cn/user/3672799326256360/posts">@ç¦»å¼€åœ°çƒè¡¨é¢_99</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•æç¤ºå·¥ç¨‹å±•å¼€ï¼Œä»‹ç»å…¶æ˜¯é€šè¿‡è®¾è®¡é«˜è´¨é‡æç¤ºè¯å¼•å¯¼å¤§æ¨¡å‹ç²¾å‡†è¾“å‡ºçš„è¿‡ç¨‹ã€‚é˜è¿°äº†LLMè¾“å‡ºé…ç½®è¦ç‚¹ï¼Œå¦‚è¾“å‡ºé•¿åº¦ã€é‡‡æ ·æ§åˆ¶ç­‰ï¼Œè¿˜åˆ†äº«å¤šç§æç¤ºè¯æŠ€å·§åŠæœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…æå‡å¤§æ¨¡å‹ä½¿ç”¨æ•ˆæœã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7570902473433825280" target="_blank" title="https://juejin.cn/post/7570902473433825280">å›¾è§£æºç ï¼šä¸‡å­—è§£æ Spring AI åˆ°åº•æ˜¯æ€ä¹ˆå®ç° MCP çš„ï¼ˆæºç éƒ¨åˆ†ï¼‰</a> <a href="https://juejin.cn/user/3653045848387931/posts" target="_blank" title="https://juejin.cn/user/3653045848387931/posts"> @å°ç’ä¹±æ’</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»• Spring AI å®ç° MCP å±•å¼€ï¼Œä»å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸¤æ–¹é¢è¯¦ç»†è§£æã€‚å®¢æˆ·ç«¯å«å…¥å£ã€è¿è¡Œã€ä¼šè¯ã€ä¼ è¾“å±‚ï¼›æœåŠ¡ç«¯æœ‰å…¥å£ã€è¿è¡Œã€ä¼šè¯ç®¡ç†ã€ä¼šè¯ã€ä¼ è¾“å±‚ï¼Œå„å±‚ä»‹ç»æ¶‰åŠç±»ã€æ–¹æ³•åŠæ ¸å¿ƒæºç ã€‚</p>
</blockquote>
<h3 data-id="heading-5">IOS</h3>
<p><a href="https://juejin.cn/post/7571306072423448618" target="_blank" title="https://juejin.cn/post/7571306072423448618">æ¥äº†è§£ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä½ çš„ Flutter WebView åœ¨ iOS 26 ä¸Šæœ‰ç‚¹å‡»é—®é¢˜ï¼Ÿ</a> <a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>æ–‡ç« å›´ç»• Flutter WebView åœ¨ iOS 26 ä¸Šçš„ç‚¹å‡»é—®é¢˜å±•å¼€ã€‚è¯¥é—®é¢˜æºäº WKWebView ä¸ Flutter æ‰‹åŠ¿è¯†åˆ«å™¨å†²çªï¼ŒiOS 18.2 ä¸´æ—¶æ–¹æ¡ˆåœ¨ iOS 26 å¼•å‘æ–°é—®é¢˜ã€‚ç›®å‰å¯é€šè¿‡ pointer_interceptor è§„é¿ï¼Œå®˜æ–¹æ­£æ¨è¿› hit - test ç­‰è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<h2 data-id="heading-6">ç¤¾åŒºæ´»åŠ¨æ—¥å†</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c589decbd804477a753bfc1a3b8f5df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229962&amp;x-signature=nKKuHbq77zAkJCFxlPYjE%2BDQsm4%3D" alt="æ˜é‡‘å®˜æ–¹ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<h4 data-id="heading-7">æ´»åŠ¨æ—¥å†</h4>

















<table><thead><tr><th>æ´»åŠ¨åç§°</th><th>æ´»åŠ¨æ—¶é—´</th><th/><th/></tr></thead><tbody><tr><td><a href="https://juejin.cn/post/7571751304625815598" target="_blank" title="https://juejin.cn/post/7571751304625815598">ğŸš€TRAE SOLO å®æˆ˜èµ›</a></td><td>2025å¹´11æœˆ13æ—¥-2025å¹´12æœˆ16æ—¥</td><td/><td/></tr></tbody></table>
<h2 data-id="heading-8">ğŸ“– æŠ•ç¨¿ä¸“åŒº</h2>
<blockquote>
<p>å¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºæ¨èè®¤ä¸ºä¸é”™çš„æ–‡ç« ï¼Œå¹¶é™„ä¸Šé“¾æ¥å’Œæ¨èç†ç”±ï¼Œæœ‰æœºä¼šå‘ˆç°åœ¨ä¸‹ä¸€æœŸã€‚æ–‡ç« åˆ›å»ºæ—¥æœŸå¿…é¡»åœ¨ä¸‹æœŸæ˜é‡‘ä¸€å‘¨å‘å¸ƒå‰ä¸€å‘¨ä»¥å†…ï¼›å¯ä»¥æ¨èè‡ªå·±çš„æ–‡ç« ã€ä¹Ÿå¯ä»¥æ¨èä»–äººçš„æ–‡ç« ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS åº”ç”¨æŠ“åŒ…å®Œæ•´æŒ‡å—ï¼ŒHTTPS è°ƒè¯•ã€åè®®åˆ†æä¸å¤šå·¥å…·ååŒçš„å·¥ç¨‹åŒ–æµç¨‹]]></title>    <link>https://juejin.cn/post/7574621387572641838</link>    <guid>https://juejin.cn/post/7574621387572641838</guid>    <pubDate>2025-11-20T07:52:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574621387572641838" data-draft-id="7574615024292511770" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS åº”ç”¨æŠ“åŒ…å®Œæ•´æŒ‡å—ï¼ŒHTTPS è°ƒè¯•ã€åè®®åˆ†æä¸å¤šå·¥å…·ååŒçš„å·¥ç¨‹åŒ–æµç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T07:52:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="00åç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1159358440539900"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS åº”ç”¨æŠ“åŒ…å®Œæ•´æŒ‡å—ï¼ŒHTTPS è°ƒè¯•ã€åè®®åˆ†æä¸å¤šå·¥å…·ååŒçš„å·¥ç¨‹åŒ–æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1159358440539900/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    00åç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:52:58.000Z" title="Thu Nov 20 2025 07:52:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸è°ƒè¯•ä¸­ï¼Œâ€œ<strong>iOS åº”ç”¨æŠ“åŒ…</strong>â€å¾€å¾€æ˜¯å·¥ç¨‹å¸ˆå®šä½é—®é¢˜çš„ç¬¬ä¸€æ­¥ã€‚æ— è®ºæ˜¯æ¥å£è”è°ƒã€çº¿ä¸Š Bug æ’æŸ¥ã€æ€§èƒ½ä¼˜åŒ–ï¼Œè¿˜æ˜¯åˆ†æç¬¬ä¸‰æ–¹ SDK çš„è¡Œä¸ºï¼ŒæŠ“åŒ…éƒ½æ˜¯æœ€ç›´æ¥ä¸”æœ€å…·è¯æ®ä»·å€¼çš„æ–¹å¼ã€‚</p>
<p>ä½†å¯¹ iOS æ¥è¯´ï¼ŒæŠ“åŒ…è¿œæ¯”å¤šæ•°äººæƒ³è±¡çš„å¤æ‚ï¼šè¯ä¹¦æ ¡éªŒã€ATSã€pinningã€QUICã€è‡ªå®šä¹‰åè®®ã€æµé‡æ··åˆâ€¦â€¦ä»»ä½•ä¸€æ­¥éƒ½å¯èƒ½å¯¼è‡´æŠ“ä¸åˆ°åŒ…ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆ iOS åº”ç”¨æŠ“åŒ…æ¯”å…¶ä»–å¹³å°æ›´éš¾ï¼Ÿ</h2>
<p>ä¸€èˆ¬å¼€å‘è€…é‡åˆ°çš„é—®é¢˜é›†ä¸­åœ¨ä»¥ä¸‹äº”ç±»ï¼š</p>
<h3 data-id="heading-1"><strong>HTTPS è¯ä¹¦ä¿¡ä»»é“¾ä¸¥æ ¼ï¼Œç¨æœ‰åå·®å³å¯å¤±è´¥</strong></h3>
<p>å¸¸è§è¡¨ç°ï¼š</p>
<ul>
<li>åªæœ‰ CONNECTï¼Œæ²¡æœ‰è§£å¯†æ•°æ®</li>
<li>App æŠ¥ TLS é”™è¯¯</li>
<li>Charles/Fiddler èƒ½æŠ“ HTTPï¼Œä½†æŠ“ä¸åˆ° HTTPS</li>
</ul>
<p>è¿™æ˜¯ç”±äº iOS çš„ä¿¡ä»»é“¾æœºåˆ¶ä¸ ATS é™åˆ¶å¯¼è‡´ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>App å¯ç”¨äº†è¯ä¹¦ Pinning</strong></h3>
<p>è¿™æ˜¯â€œæŠ“ä¸åˆ°åŒ…â€çš„å¤´å·åŸå› ã€‚</p>
<p>è¡¨ç°ï¼š</p>
<ul>
<li>Safari èƒ½æŠ“</li>
<li>App å®Œå…¨æŠ“ä¸åˆ°</li>
<li>æŠ“åŒ…å·¥å…·ç•Œé¢ä¸€ç›´ç©ºç™½</li>
</ul>
<p>è®¸å¤šé“¶è¡Œã€é‡‘èã€ç”µå•†ç±» App éƒ½ä¼šå¯ç”¨ pinningã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>æµé‡ä½¿ç”¨ QUICï¼ˆHTTP/3ï¼‰ç»•è¿‡ç³»ç»Ÿä»£ç†</strong></h3>
<p>QUIC ä½¿ç”¨ UDPï¼Œä¸èµ°å®¢æˆ·ç«¯çš„ TCP ä»£ç†ï¼Œå› æ­¤ï¼š</p>
<ul>
<li>æ— æ³•é€šè¿‡ Charles æŠ“å–</li>
<li>è§†é¢‘/ç¤¾äº¤ç±» App å¸¸é»˜è®¤å¼€å¯</li>
<li>éƒ¨åˆ† CDN æˆ– API å·²åœ¨ä½¿ç”¨</li>
</ul>
<p>è‹¥ QUIC ä¸å…³æ‰ï¼Œä»£ç†å·¥å…·åŸºæœ¬æ— æ•ˆã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>App ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œåè®®</strong></h3>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰ TCP åè®®</li>
<li>å†…éƒ¨ SDK èµ°ç‹¬ç«‹ç½‘ç»œæ ˆ</li>
<li>WebSocket ç­‰é•¿è¿æ¥åè®®</li>
</ul>
<p>ä»£ç†æŠ“åŒ…æ— æ³•å¤„ç†è¿™äº›åœºæ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>æµé‡å™ªéŸ³å¤ªå¤šï¼Œéš¾ä»¥å®šä½æŸä¸ª App</strong></h3>
<p>ä¸€ä¸ª iPhone ä¸Šå‡ åä¸ª App éƒ½åœ¨å‘åŒ…ï¼Œå·¥å…·ç«¯å¾ˆéš¾ç²¾å‡†è¿‡æ»¤ã€‚</p>
<hr/>
<h2 data-id="heading-6">äºŒã€iOS åº”ç”¨æŠ“åŒ…çš„å·¥å…·ä½“ç³»ï¼ˆæŒ‰åŠŸèƒ½åˆ†å±‚ï¼Œä¸åšä¼˜åŠ£æ¯”è¾ƒï¼‰</h2>
<p>ä¸ºäº†è¦†ç›–æ‰€æœ‰ç±»å‹çš„æŠ“åŒ…éœ€æ±‚ï¼Œæˆ‘ä»¬é‡‡ç”¨â€œåˆ†å±‚å·¥å…·é“¾â€çš„æ–¹å¼æ„é€ å®Œæ•´æ–¹æ¡ˆã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>ä»£ç†æŠ“åŒ…ï¼ˆè°ƒè¯• HTTPS å†…å®¹ï¼‰</strong></h3>
<p>ä»£è¡¨å·¥å…·ï¼š</p>
<ul>
<li>Charles</li>
<li>Proxyman</li>
<li>Fiddler</li>
<li>mitmproxyï¼ˆå¼€æºï¼‰</li>
</ul>
<p>èƒ½åšçš„äº‹ï¼š</p>
<ul>
<li>æŸ¥çœ‹ HTTPS æ˜æ–‡</li>
<li>æ‹¦æˆª/ä¿®æ”¹è¯·æ±‚ä¸å“åº”</li>
<li>æ¨¡æ‹Ÿé”™è¯¯å“åº”</li>
</ul>
<p>æ— æ³•è§£å†³ï¼š</p>
<ul>
<li>pinning</li>
<li>QUIC</li>
<li>è‡ªå®šä¹‰åè®®</li>
<li>æ— æ³•æŒ‰ App è¿‡æ»¤æµé‡</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>TCP/TLS åº•å±‚æŠ“åŒ…ï¼ˆé“¾è·¯è¯æ®ï¼‰</strong></h3>
<p>ä»£è¡¨ï¼š</p>
<ul>
<li>tcpdump</li>
<li>Wireshark</li>
</ul>
<p>é€‚ç”¨äºï¼š</p>
<ul>
<li>åˆ¤æ–­è¯·æ±‚æ˜¯å¦åˆ°è¾¾æœåŠ¡å™¨</li>
<li>TLS æ¡æ‰‹å¤±è´¥åˆ†æ</li>
<li>ä¸‰æ¬¡æ¡æ‰‹ã€é‡ä¼ ã€çª—å£ç­‰åº•å±‚è¯Šæ–­</li>
</ul>
<p>æ˜¯å®šä½â€œä¸ºä»€ä¹ˆæŠ“ä¸åˆ°åŒ…â€çš„æ ¸å¿ƒå·¥å…·ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>è‡ªåŠ¨åˆ†æä¸è„šæœ¬èƒ½åŠ›</strong></h3>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>pyshark</li>
<li>scapy</li>
<li>mitmproxy scripting</li>
</ul>
<p>é€‚ç”¨äº CI æµ‹è¯•ã€è‡ªåŠ¨æå–å¼‚å¸¸åŒ…ç­‰ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>æ— éœ€ä»£ç†çš„è¡¥æŠ“å·¥å…·ï¼ˆè§£å†³ä»£ç†æŠ“ä¸åˆ°çš„é—®é¢˜ï¼‰</strong></h3>
<p>æŠ“åŒ…å¤§å¸ˆï¼ˆSniffmasterï¼‰è¡¥è¶³ä»£ç†å·¥å…·æ— æ³•å¤„ç†çš„éƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>æ— éœ€ä»£ç†å³å¯æŠ“å– HTTPSã€TCPã€UDP æ•°æ®æµ</strong></li>
<li><strong>æŒ‰ App æˆ–åŸŸåè¿‡æ»¤æµé‡ï¼Œè§£å†³å™ªéŸ³é—®é¢˜</strong></li>
<li>è‡ªåŠ¨è¯†åˆ« HTTP/HTTPS/mdnsã€è‡ªå®šä¹‰åè®®</li>
<li>æŸ¥çœ‹ TCP æ•°æ®æµçš„ HEX/æ–‡æœ¬/äºŒè¿›åˆ¶å†…å®¹</li>
<li>å¯¼å‡º <strong>Wireshark å…¼å®¹ pcap</strong>ï¼Œå¯ä¸æœåŠ¡å™¨ç«¯ tcpdump å¯¹æ¯”</li>
<li>å†…ç½®è„šæœ¬æ‹¦æˆªå™¨ï¼Œå¯ä½¿ç”¨ JavaScript ä¿®æ”¹è¯·æ±‚ä¸å“åº”</li>
<li>è·¨å¹³å°æ”¯æŒï¼šWindows / macOS / iOS</li>
</ul>
<p>Sniffmaster ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Charlesï¼Œè€Œæ˜¯ç”¨äºï¼š</p>
<ul>
<li>ä»£ç†å·¥å…·å¤±è´¥</li>
<li>é‡åˆ° pinning</li>
<li>é‡åˆ° QUIC</li>
<li>é‡åˆ°è‡ªå®šä¹‰åè®®</li>
<li>éœ€è¦æŠ“åº•å±‚ TCP æ•°æ®æµ
çš„åœºæ™¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€iOS åº”ç”¨æŠ“åŒ…çš„å®Œæ•´å·¥ç¨‹æµç¨‹ï¼ˆå¯å¤ç”¨ SOPï¼‰</h2>
<p>ä¸‹é¢ç»™å‡ºä¸€å¥—å¯ç›´æ¥åº”ç”¨çš„ iOS æŠ“åŒ…æµç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-12"><strong>é¦–å…ˆå°è¯•ä»£ç†æŠ“åŒ…ï¼ˆå¿«é€ŸéªŒè¯ï¼‰</strong></h3>
<ul>
<li>è®¾ç½® Wi-Fi ä»£ç†</li>
<li>å®‰è£…ä¿¡ä»»è¯ä¹¦</li>
<li>å¼€å¯ SSL Proxying</li>
</ul>
<p>è‹¥èƒ½æŠ“åŒ… â†’ ç»§ç»­åœ¨ä»£ç†å·¥å…·ä¸­è°ƒè¯•ä¸šåŠ¡é€»è¾‘ã€‚</p>
<hr/>
<h3 data-id="heading-13"><strong>å¦‚æœåªèƒ½çœ‹åˆ° CONNECT â†’ è¯ä¹¦é“¾é—®é¢˜</strong></h3>
<p>æ­¤æ—¶æ’æŸ¥ï¼š</p>
<ul>
<li>æ˜¯å¦ä½¿ç”¨å…¬å¸ Wi-Fiï¼ˆå¸¸æ³¨å…¥è¯ä¹¦ï¼‰</li>
<li>æ˜¯å¦ä¿¡ä»»è¯ä¹¦</li>
<li>ATS æ˜¯å¦æ‹’ç»ä¸­é—´è¯ä¹¦</li>
</ul>
<p>å¯ä»¥å°è¯•åˆ‡æ¢ç½‘ç»œç¯å¢ƒéªŒè¯ã€‚</p>
<hr/>
<h3 data-id="heading-14"><strong>å¦‚æœæµè§ˆå™¨èƒ½æŠ“ã€App æŠ“ä¸åˆ° â†’ pinning</strong></h3>
<p>æ— éœ€ç»§ç»­å°è¯•ä»£ç†å·¥å…·ï¼Œç›´æ¥è¿›å…¥è¡¥æŠ“é˜¶æ®µã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>â‘£ éƒ¨åˆ†åŸŸåæŠ“ä¸åˆ° â†’ QUICï¼ˆHTTP/3ï¼‰é—®é¢˜</strong></h3>
<p>åˆ¤æ–­æ–¹å¼ï¼š</p>
<ul>
<li>å¼ºåˆ¶å…³é—­ HTTP/3</li>
<li>æˆ–åˆ‡æ¢åˆ° LTE/4G</li>
</ul>
<p>è‹¥æ¢å¤ â†’ å³ä¸º QUICã€‚</p>
<hr/>
<h3 data-id="heading-16"><strong>ä»£ç†å¤±è´¥æƒ…å†µä¸‹çš„å…³é”®è¡¥æŠ“ï¼šä½¿ç”¨ Sniffmaster</strong></h3>
<p>å…·ä½“æ­¥éª¤ï¼š</p>
<ol>
<li>ä½¿ç”¨ Sniffmaster æŠ“å–ç›®æ ‡ App çš„æµé‡</li>
<li>æŒ‰ App / åŸŸåè¿‡æ»¤ï¼Œåªä¿ç•™å…³é”®æ•°æ®</li>
<li>å°†æ•°æ®å¯¼å‡ºä¸º pcap</li>
<li>åœ¨ Wireshark ä¸­åˆ†æï¼š
<ul>
<li>TLS æ¡æ‰‹</li>
<li>é‡ä¼ </li>
<li>è¯ä¹¦é“¾</li>
<li>QUIC ç­‰ UDP æµé‡</li>
</ul>
</li>
<li>ä¸æœåŠ¡å™¨ tcpdump çš„ pcap è¿›è¡Œé€å¸§æ¯”å¯¹</li>
</ol>
<p>æ­¤æµç¨‹å‡ ä¹èƒ½å®šä½æ‰€æœ‰ iOS æŠ“åŒ…å¤±è´¥é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-17"><strong>è‹¥èƒ½æ­£å¸¸è§£å¯†ï¼Œåˆ™åœ¨ HTTP å±‚åšæœ€ç»ˆåˆ†æ</strong></h3>
<p>é‡ç‚¹åˆ†æï¼š</p>
<ul>
<li>è¯·æ±‚å¤´/å“åº”å¤´</li>
<li>token æˆ–é‰´æƒå‚æ•°</li>
<li>åŠ å¯†å†…å®¹</li>
<li>çŠ¶æ€ç </li>
<li>ä¸šåŠ¡é”™è¯¯åœºæ™¯</li>
</ul>
<hr/>
<h2 data-id="heading-18">å››ã€çœŸå®å·¥ç¨‹æ¡ˆä¾‹ï¼šiOS åº”ç”¨æŠ“ä¸åˆ° HTTPS</h2>
<p>æŸ App åœ¨å…¬å¸ Wi-Fi ä¸‹æŠ“ä¸åˆ°åŒ…ï¼Œåœ¨å®¶åº­ç½‘ç»œä¸­åˆæ­£å¸¸ã€‚</p>
<p>æ’æŸ¥è¿‡ç¨‹ï¼š</p>
<ol>
<li>Charles æœ‰ CONNECTï¼Œä½†æ—  HTTPS</li>
<li>ä½¿ç”¨ Sniffmaster è¡¥æŠ“ â†’ å‡ºç° TLS Alert</li>
<li>Wireshark åˆ†æè¯ä¹¦é“¾ â†’ ä¼ä¸šç½‘å…³æ³¨å…¥äº†ä¸­é—´è¯ä¹¦</li>
<li>åˆ‡æ¢ç½‘ç»œ â†’ æŠ“åŒ…æ¢å¤</li>
<li>æœ€ç»ˆç¡®è®¤ï¼šé“¾è·¯è¯ä¹¦æ›¿æ¢å¯¼è‡´ ATS æ‹’ç»è¿æ¥</li>
</ol>
<p>è¿™ç§é—®é¢˜åªä¾é ä»£ç†å·¥å…·æ— æ³•å®šä½ã€‚</p>
<hr/>
<h2 data-id="heading-19">iOS åº”ç”¨æŠ“åŒ…å¿…é¡»â€œå¤šå·¥å…·ååŒâ€</h2>
<p>iOS æŠ“åŒ…å¤±è´¥çš„æœ¬è´¨æ¥è‡ªï¼š</p>
<ul>
<li>TLS å®‰å…¨ç­–ç•¥</li>
<li>pinning</li>
<li>QUIC</li>
<li>è‡ªå®šä¹‰åè®®</li>
<li>æµé‡æ··åˆ</li>
</ul>
<p>å› æ­¤æˆç†Ÿçš„æŠ“åŒ…æ–¹æ¡ˆå¿…é¡»æ˜¯ï¼š</p>

























<table><thead><tr><th>æŠ“åŒ…ç»´åº¦</th><th>ä½¿ç”¨å·¥å…·</th></tr></thead><tbody><tr><td>HTTPS å†…å®¹</td><td>Charles / Proxyman / Fiddler</td></tr><tr><td>TCP/TLS è¯æ®</td><td>Wireshark + tcpdump</td></tr><tr><td>è‡ªåŠ¨åˆ†æ</td><td>scapy / pyshark</td></tr><tr><td>ä»£ç†å¤±è´¥è¡¥æŠ“</td><td>æŠ“åŒ…å¤§å¸ˆï¼ˆSniffmasterï¼‰</td></tr></tbody></table>
<p>åªæœ‰å¦‚æ­¤ç»„åˆï¼Œæ‰èƒ½è¦†ç›–æ‰€æœ‰æŠ“åŒ…åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éŸ³è§†é¢‘å¼€å‘å…¨æ™¯å›¾ï¼šæ’­æ”¾å™¨æ˜¯æ€æ ·ç‚¼æˆçš„]]></title>    <link>https://juejin.cn/post/7574530224853172230</link>    <guid>https://juejin.cn/post/7574530224853172230</guid>    <pubDate>2025-11-20T07:35:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574530224853172230" data-draft-id="7574451949326237737" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éŸ³è§†é¢‘å¼€å‘å…¨æ™¯å›¾ï¼šæ’­æ”¾å™¨æ˜¯æ€æ ·ç‚¼æˆçš„"/> <meta itemprop="keywords" content="éŸ³è§†é¢‘å¼€å‘"/> <meta itemprop="datePublished" content="2025-11-20T07:35:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="yangguang"/> <meta itemprop="url" content="https://juejin.cn/user/2884747301227416"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éŸ³è§†é¢‘å¼€å‘å…¨æ™¯å›¾ï¼šæ’­æ”¾å™¨æ˜¯æ€æ ·ç‚¼æˆçš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2884747301227416/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    yangguang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:35:29.000Z" title="Thu Nov 20 2025 07:35:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">éŸ³è§†é¢‘å¼€å‘å…¨æ™¯å›¾ï¼šæ’­æ”¾å™¨æ˜¯æ€æ ·ç‚¼æˆçš„</h2>
<h3 data-id="heading-1">ğŸ¬ å¼€åœºï¼šç‚¹å‡»æ’­æ”¾æŒ‰é’®ï¼Œç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ‰“å¼€ä¸€ä¸ªè§†é¢‘æ’­æ”¾å™¨ï¼Œç‚¹å‡»æ’­æ”¾æŒ‰é’®ï¼š</p>
<pre><code class="hljs">ä½ ç‚¹å‡» â–¶ï¸ â†’ ç­‰å¾… 0.5 ç§’ â†’ ç”»é¢å‡ºç° + å£°éŸ³å“èµ· âœ¨
</code></pre>
<p>è¿™ 0.5 ç§’å†…ï¼Œè®¡ç®—æœºåšäº†ä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬æ­å¼€è¿™å±‚ç¥ç§˜é¢çº±ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ“¦ ç¬¬ä¸€ç«™ï¼šè§†é¢‘æ–‡ä»¶é‡Œè—ç€ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-3">è§†é¢‘æ–‡ä»¶ â‰  è§†é¢‘</h4>
<p><strong>å…³é”®è®¤çŸ¥</strong>ï¼šä¸€ä¸ª <code>movie.mp4</code> æ–‡ä»¶ï¼Œå…¶å®æ˜¯ä¸€ä¸ª"å®¹å™¨"ï¼ˆContainerï¼‰ï¼Œé‡Œé¢è£…ç€ï¼š</p>
<ul>
<li>ğŸ¥ <strong>è§†é¢‘æµ</strong>ï¼šä¸€å †è¿ç»­çš„å›¾ç‰‡ï¼ˆå¸§ï¼‰</li>
<li>ğŸ”Š <strong>éŸ³é¢‘æµ</strong>ï¼šä¸€æ®µå£°éŸ³æ•°æ®</li>
<li>ğŸ“ <strong>å­—å¹•æµ</strong>ï¼šæ–‡å­—ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰</li>
<li>â„¹ï¸ <strong>å…ƒæ•°æ®</strong>ï¼šæ ‡é¢˜ã€ä½œè€…ã€æ—¶é•¿ç­‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/199b4de8e1da40c3800ec8172428ce8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWFuZ2d1YW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764228929&amp;x-signature=j%2B4Oy0j7Dgc14q0Z6aATmxwYfkE%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-4">å®¹å™¨ vs ç¼–ç ï¼šä¸¤ä¸ªå®¹æ˜“æ··æ·†çš„æ¦‚å¿µ</h4>























<table><thead><tr><th>æ¦‚å¿µ</th><th>ä½œç”¨</th><th>å¸¸è§æ ¼å¼</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><strong>å®¹å™¨</strong>ï¼ˆContainerï¼‰</td><td>æŠŠè§†é¢‘ã€éŸ³é¢‘ã€å­—å¹•æ‰“åŒ…åœ¨ä¸€èµ·</td><td>MP4, MKV, AVI, FLV</td><td>å¿«é€’ç›’å­ ğŸ“¦</td></tr><tr><td><strong>ç¼–ç </strong>ï¼ˆCodecï¼‰</td><td>å‹ç¼©è§†é¢‘/éŸ³é¢‘æ•°æ®ï¼Œå‡å°ä½“ç§¯</td><td>H.264, H.265, AAC, MP3</td><td>å‹ç¼©è¢‹ ğŸ—œï¸</td></tr></tbody></table>
<p><strong>ä¸¾ä¸ªä¾‹å­</strong>ï¼š</p>
<ul>
<li><code>movie.mp4</code> = MP4 å®¹å™¨ + H.264 è§†é¢‘ç¼–ç  + AAC éŸ³é¢‘ç¼–ç </li>
<li><code>video.mkv</code> = MKV å®¹å™¨ + H.265 è§†é¢‘ç¼–ç  + FLAC éŸ³é¢‘ç¼–ç </li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ç¼–ç ï¼Ÿ</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1</span> <span class="hljs-string">å°æ—¶æœªå‹ç¼©è§†é¢‘</span> <span class="hljs-string">=</span> <span class="hljs-number">1920</span><span class="hljs-string">Ã—1080</span> <span class="hljs-string">Ã—</span> <span class="hljs-string">30fps</span> <span class="hljs-string">Ã—</span> <span class="hljs-string">24bit</span> <span class="hljs-string">Ã—</span> <span class="hljs-string">3600s</span> <span class="hljs-string">â‰ˆ</span> <span class="hljs-number">500</span> <span class="hljs-string">GB</span> <span class="hljs-string">ğŸ˜±</span>
<span class="hljs-number">1</span> <span class="hljs-string">å°æ—¶</span> <span class="hljs-string">H.264</span> <span class="hljs-string">ç¼–ç </span> <span class="hljs-string">=</span> <span class="hljs-number">1</span><span class="hljs-number">-2</span> <span class="hljs-string">GB</span> <span class="hljs-string">âœ…ï¼ˆå‹ç¼©</span> <span class="hljs-number">250</span><span class="hljs-number">-500</span> <span class="hljs-string">å€ï¼ï¼‰</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">ğŸï¸ ç¬¬äºŒç«™ï¼šæ’­æ”¾å™¨çš„å®Œæ•´ç®¡çº¿</h3>
<p>ç°åœ¨æ­ç§˜æ’­æ”¾å™¨çš„å·¥ä½œæµç¨‹ï¼Œä¸€å…± <strong>5 ä¸ªå…³é”®æ­¥éª¤</strong>ï¼š</p>
<p><strong>ğŸ“Šæ’­æ”¾å™¨ç®¡çº¿æµç¨‹å›¾</strong></p>
<blockquote>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è§†é¢‘æ–‡ä»¶&lt;br/&gt;movie.mp4] --&gt; B[è§£å°è£…&lt;br/&gt;Demuxer]
    B --&gt; C[è§£ç å™¨&lt;br/&gt;Decoder]
    C --&gt; D[éŸ³è§†é¢‘åŒæ­¥&lt;br/&gt;AVSync]
    D --&gt; E[æ¸²æŸ“æ˜¾ç¤º&lt;br/&gt;Renderer]
    style A fill:#e1f5ff
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#e8f5e9
    style E fill:#fce4ec
</code></pre>
</blockquote>
<hr/>
<h4 data-id="heading-6">æ­¥éª¤ 1ï¸âƒ£ï¼šè§£å°è£…ï¼ˆDemuxï¼‰</h4>
<p><strong>ç›®æ ‡</strong>ï¼šæŠŠå®¹å™¨æ‹†å¼€ï¼Œåˆ†ç¦»å‡ºè§†é¢‘æµå’ŒéŸ³é¢‘æµã€‚</p>
<p><strong>ç±»æ¯”</strong>ï¼šæŠŠå¿«é€’ç›’å­æ‹†å¼€ï¼ŒæŠŠè§†é¢‘å’ŒéŸ³é¢‘åˆ†åˆ«å–å‡ºæ¥ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥: movie.mp4ï¼ˆå®¹å™¨ï¼‰
è¾“å‡º: 
  - AVPacketï¼ˆè§†é¢‘ï¼‰<span class="hljs-section">[ç¼–ç æ•°æ®]</span>
  - AVPacketï¼ˆéŸ³é¢‘ï¼‰<span class="hljs-section">[ç¼–ç æ•°æ®]</span>
</code></pre>
<p><strong>å…³é”® API</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">AVFormatContext* format_ctx;  <span class="hljs-comment">// æ ¼å¼ä¸Šä¸‹æ–‡</span>
<span class="hljs-built_in">avformat_open_input</span>(&amp;format_ctx, <span class="hljs-string">"movie.mp4"</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶</span>
<span class="hljs-built_in">avformat_find_stream_info</span>(format_ctx, <span class="hljs-literal">NULL</span>);                <span class="hljs-comment">// æ¢æµ‹æµä¿¡æ¯</span>
<span class="hljs-built_in">av_read_frame</span>(format_ctx, packet);                          <span class="hljs-comment">// è¯»å–æ•°æ®åŒ…</span>
</code></pre>
<hr/>
<h4 data-id="heading-7">æ­¥éª¤ 2ï¸âƒ£ï¼šè§£ç ï¼ˆDecodeï¼‰</h4>
<p><strong>ç›®æ ‡</strong>ï¼šæŠŠå‹ç¼©çš„æ•°æ®åŒ…è§£ç æˆåŸå§‹çš„å›¾åƒ/éŸ³é¢‘ã€‚</p>
<p><strong>ç±»æ¯”</strong>ï¼šæŠŠå‹ç¼©è¢‹é‡Œçš„è¡£æœæ‹¿å‡ºæ¥å±•å¼€ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è¾“å…¥: AVPacketï¼ˆH.264 ç¼–ç æ•°æ®ï¼Œå‡  KBï¼‰</span>
<span class="hljs-section">è¾“å‡º: AVFrameï¼ˆYUV å›¾åƒï¼Œå‡  MBï¼‰</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è§£ç ï¼Ÿ</strong></p>
<ul>
<li><strong>ç¼–ç æ•°æ®</strong>ï¼šæ— æ³•ç›´æ¥æ˜¾ç¤ºï¼Œæ˜¯ä¸€å †æ•°å­¦å˜æ¢åçš„æ•°å­—</li>
<li><strong>è§£ç æ•°æ®</strong>ï¼šYUV/RGB å›¾åƒï¼Œå¯ä»¥ç›´æ¥æ¸²æŸ“åˆ°å±å¹•</li>
</ul>
<p><strong>å…³é”® API</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">AVCodecContext* codec_ctx;  <span class="hljs-comment">// è§£ç å™¨ä¸Šä¸‹æ–‡</span>
<span class="hljs-built_in">avcodec_send_packet</span>(codec_ctx, packet);    <span class="hljs-comment">// é€å…¥ç¼–ç æ•°æ®åŒ…</span>
<span class="hljs-built_in">avcodec_receive_frame</span>(codec_ctx, frame);   <span class="hljs-comment">// æ¥æ”¶è§£ç åçš„å¸§</span>
</code></pre>
<p><strong>ğŸ“Š è§£ç å‰åå¯¹æ¯”</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56d82d5ec1e34766b7e03cbb6ea09e84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWFuZ2d1YW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764228929&amp;x-signature=n2q3Kh027C7jpfGtlwndFe2GsR0%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-8">æ­¥éª¤ 3ï¸âƒ£ï¼šéŸ³è§†é¢‘åŒæ­¥ï¼ˆA/V Syncï¼‰</h4>
<p><strong>ç›®æ ‡</strong>ï¼šè®©ç”»é¢å’Œå£°éŸ³å¯¹å¾—ä¸Šã€‚</p>
<p><strong>ç±»æ¯”</strong>ï¼šé…éŸ³æ¼”å‘˜å¯¹å£å‹ï¼Œå·®ä¸€ç‚¹éƒ½ä¸è¡Œã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆä¼šä¸åŒæ­¥ï¼Ÿ</strong></p>
<ul>
<li>è§†é¢‘è§£ç å¿«ï¼ŒéŸ³é¢‘è§£ç æ…¢ â†’ ç”»é¢è·‘åˆ°å‰é¢äº†</li>
<li>è§†é¢‘å¸§ç‡ä¸ç¨³å®š â†’ æœ‰æ—¶å¿«æœ‰æ—¶æ…¢</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä»¥<strong>éŸ³é¢‘æ—¶é’Ÿ</strong>ä¸ºå‡†ï¼ˆäººè€³å¯¹å£°éŸ³å»¶è¿Ÿæ›´æ•æ„Ÿï¼‰ã€‚</p>
<pre><code class="hljs">è§†é¢‘å¸§çš„ PTSï¼ˆæ˜¾ç¤ºæ—¶é—´æˆ³ï¼‰= 2.5 ç§’
å½“å‰éŸ³é¢‘æ—¶é’Ÿ = 2.3 ç§’
â†’ ç»“è®ºï¼šè¿™ä¸€å¸§å¤ªæ—©äº†ï¼Œç­‰ 0.2 ç§’å†æ˜¾ç¤º â±ï¸
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09bd02cb38174545a3d9954ea4d4c544~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWFuZ2d1YW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764228929&amp;x-signature=4LJlkmYLM1DLDOlnqCiXVocCMXE%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-9">æ­¥éª¤ 4ï¸âƒ£ï¼šæ¸²æŸ“ï¼ˆRenderï¼‰</h4>
<p><strong>ç›®æ ‡</strong>ï¼šæŠŠ YUV å›¾åƒè½¬æ¢æˆ RGBï¼Œæ˜¾ç¤ºåˆ°å±å¹•ã€‚</p>
<p><strong>ç±»æ¯”</strong>ï¼šæŠŠèƒ¶ç‰‡æ”¾åˆ°æ”¾æ˜ æœºï¼ŒæŠ•å½±åˆ°é“¶å¹•ä¸Šã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è¾“å…¥: AVFrameï¼ˆYUV420P æ ¼å¼ï¼‰</span>
<span class="hljs-section">å¤„ç†: YUV â†’ RGB é¢œè‰²ç©ºé—´è½¬æ¢</span>
<span class="hljs-section">è¾“å‡º: å±å¹•æ˜¾ç¤ºï¼ˆGPU æ¸²æŸ“ï¼‰</span>
</code></pre>
<hr/>
<h4 data-id="heading-10">æ­¥éª¤ 5ï¸âƒ£ï¼šå¾ªç¯æ’­æ”¾</h4>
<p>æ’­æ”¾å™¨ä¸æ˜¯åªæ’­ä¸€å¸§å°±ç»“æŸï¼Œè€Œæ˜¯<strong>ä¸æ–­å¾ªç¯</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">while</span> (playing) {
  packet = demuxer.<span class="hljs-built_in">ReadPacket</span>();       <span class="hljs-comment">// 1. è¯»å–æ•°æ®åŒ…</span>
  frame = decoder.<span class="hljs-built_in">Decode</span>(packet);      <span class="hljs-comment">// 2. è§£ç </span>
  sync.<span class="hljs-built_in">WaitUntilTime</span>(frame.pts);       <span class="hljs-comment">// 3. ç­‰å¾…æ­£ç¡®æ—¶æœº</span>
  renderer.<span class="hljs-built_in">Display</span>(frame);             <span class="hljs-comment">// 4. æ¸²æŸ“æ˜¾ç¤º</span>
  <span class="hljs-comment">// ç»§ç»­ä¸‹ä¸€å¸§...</span>
}
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
     A[å¼€å§‹æ’­æ”¾] --&gt; B[è¯»å–æ•°æ®åŒ…]
     B --&gt; C{è§£ç æˆåŠŸ?}
     C --&gt;|æ˜¯| D[è®¡ç®—æ˜¾ç¤ºæ—¶æœº]
     C --&gt;|å¦| B
     D --&gt; E[æ¸²æŸ“åˆ°å±å¹•]
     E --&gt; F{ç»§ç»­æ’­æ”¾?}
     F --&gt;|æ˜¯| B
     F --&gt;|å¦| G[åœæ­¢]
</code></pre>
<hr/>
<h3 data-id="heading-11">ğŸ” å®æˆ˜ï¼šç”¨ FFprobe åˆ†æè§†é¢‘æ–‡ä»¶</h3>
<p><strong>FFprobe</strong> æ˜¯ FFmpeg è‡ªå¸¦çš„å·¥å…·ï¼Œå¯ä»¥æŸ¥çœ‹è§†é¢‘æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-12">å®‰è£… FFmpegï¼ˆå¦‚æœæœªå®‰è£…ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macOS</span>
brew install ffmpeg

<span class="hljs-comment"># Ubuntu</span>
sudo apt install ffmpeg

<span class="hljs-comment"># Windows</span>
<span class="hljs-comment"># ä¸‹è½½ï¼šhttps://ffmpeg.org/download.html</span>
</code></pre>
<h4 data-id="heading-13">å‘½ä»¤ 1ï¼šæŸ¥çœ‹æ–‡ä»¶åŸºæœ¬ä¿¡æ¯</h4>
<pre><code class="hljs language-bash" lang="bash">ffprobe -hide_banner movie.mp4
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Input</span> <span class="hljs-selector-id">#0</span>, <span class="hljs-selector-tag">mov</span>,<span class="hljs-selector-tag">mp4</span>,<span class="hljs-selector-tag">m4a</span>,<span class="hljs-number">3</span><span class="hljs-selector-tag">gp</span>,<span class="hljs-number">3</span><span class="hljs-selector-tag">g2</span>,<span class="hljs-selector-tag">mj2</span>, <span class="hljs-selector-tag">from</span> '<span class="hljs-selector-tag">movie</span><span class="hljs-selector-class">.mp4</span>':
  <span class="hljs-selector-tag">Duration</span>: <span class="hljs-number">00</span>:<span class="hljs-number">02</span>:<span class="hljs-number">15.50</span>, <span class="hljs-selector-tag">start</span>: <span class="hljs-number">0.000000</span>, <span class="hljs-selector-tag">bitrate</span>: <span class="hljs-number">2500</span> <span class="hljs-selector-tag">kb</span>/<span class="hljs-selector-tag">s</span>
  <span class="hljs-selector-tag">Stream</span> <span class="hljs-selector-id">#0</span>:<span class="hljs-number">0</span><span class="hljs-selector-attr">[0x1]</span>(und): <span class="hljs-selector-tag">Video</span>: <span class="hljs-selector-tag">h264</span> (High) (avc1), <span class="hljs-selector-tag">yuv420p</span>, <span class="hljs-number">1920</span><span class="hljs-selector-tag">x1080</span>, <span class="hljs-number">2000</span> <span class="hljs-selector-tag">kb</span>/<span class="hljs-selector-tag">s</span>, <span class="hljs-number">30</span> <span class="hljs-selector-tag">fps</span>
  <span class="hljs-selector-tag">Stream</span> <span class="hljs-selector-id">#0</span>:<span class="hljs-number">1</span><span class="hljs-selector-attr">[0x2]</span>(und): <span class="hljs-selector-tag">Audio</span>: <span class="hljs-selector-tag">aac</span> (LC) (mp4a), <span class="hljs-number">48000</span> <span class="hljs-selector-tag">Hz</span>, <span class="hljs-selector-tag">stereo</span>, <span class="hljs-selector-tag">fltp</span>, <span class="hljs-number">128</span> <span class="hljs-selector-tag">kb</span>/<span class="hljs-selector-tag">s</span>
</code></pre>
<p><strong>è§£è¯»</strong>ï¼š</p>
<ul>
<li><strong>å®¹å™¨æ ¼å¼</strong>ï¼šMP4</li>
<li><strong>æ—¶é•¿</strong>ï¼š2 åˆ† 15 ç§’</li>
<li><strong>è§†é¢‘æµ</strong>ï¼šH.264 ç¼–ç ï¼Œ1920Ã—1080 åˆ†è¾¨ç‡ï¼Œ30 fps</li>
<li><strong>éŸ³é¢‘æµ</strong>ï¼šAAC ç¼–ç ï¼Œ48kHz é‡‡æ ·ç‡ï¼Œç«‹ä½“å£°</li>
</ul>
<hr/>
<h4 data-id="heading-14">å‘½ä»¤ 2ï¼šæŸ¥çœ‹è¯¦ç»†æµä¿¡æ¯ï¼ˆJSON æ ¼å¼ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">ffprobe -v quiet -print_format json -show_streams movie.mp4
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼ˆèŠ‚é€‰ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"streams"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"codec_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"h264"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"codec_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"video"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"width"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1920</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"height"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1080</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"r_frame_rate"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"30/1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_frame_rate"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"30/1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"time_base"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1/15360"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration_ts"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2073600</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"135.000000"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"codec_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"aac"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"codec_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"audio"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sample_rate"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"48000"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"channels"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"channel_layout"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stereo"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®å­—æ®µ</strong>ï¼š</p>
<ul>
<li><code>codec_name</code>ï¼šç¼–ç æ ¼å¼ï¼ˆh264 = H.264ï¼‰</li>
<li><code>time_base</code>ï¼šæ—¶é—´åŸºï¼ˆç”¨äºè®¡ç®— PTSï¼‰</li>
<li><code>r_frame_rate</code>ï¼šçœŸå®å¸§ç‡ï¼ˆ30 fpsï¼‰</li>
<li><code>sample_rate</code>ï¼šéŸ³é¢‘é‡‡æ ·ç‡ï¼ˆ48000 Hz = 48 kHzï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-15">å‘½ä»¤ 3ï¼šæå–ç¬¬ä¸€å¸§å›¾åƒ</h4>
<pre><code class="hljs language-bash" lang="bash">ffmpeg -i movie.mp4 -vframes 1 -f image2 first_frame.jpg
</code></pre>
<p>è¿™ä¼šä¿å­˜è§†é¢‘çš„ç¬¬ä¸€å¸§ä¸º <code>first_frame.jpg</code>ï¼Œä½ å¯ä»¥æ‰“å¼€çœ‹çœ‹è§£ç åçš„å›¾åƒé•¿ä»€ä¹ˆæ ·ã€‚</p>
<hr/>
<h3 data-id="heading-16">ğŸ¯ å°ç»“ï¼šä»ç‚¹å‡»åˆ°æ’­æ”¾çš„å®Œæ•´æ—…ç¨‹</h3>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹å®Œæ•´æµç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç‚¹å‡»æ’­æ”¾æŒ‰é’®
   â†“
<span class="hljs-bullet">2.</span> Demuxer æ‰“å¼€æ–‡ä»¶ï¼Œåˆ†ç¦»è§†é¢‘æµå’ŒéŸ³é¢‘æµ
   â†“
<span class="hljs-bullet">3.</span> VideoDecoder è§£ç è§†é¢‘åŒ… â†’ YUV å¸§
   AudioDecoder è§£ç éŸ³é¢‘åŒ… â†’ PCM éŸ³é¢‘
   â†“
<span class="hljs-bullet">4.</span> AVSyncController å¯¹æ¯”éŸ³é¢‘æ—¶é’Ÿï¼Œå†³å®šä½•æ—¶æ˜¾ç¤ºè§†é¢‘å¸§
   â†“
<span class="hljs-bullet">5.</span> Renderer æ¸²æŸ“ YUV å¸§åˆ°å±å¹•
   AudioPlayer æ’­æ”¾ PCM éŸ³é¢‘åˆ°æ‰¬å£°å™¨
   â†“
<span class="hljs-bullet">6.</span> å¾ªç¯æ­¥éª¤ 2-5ï¼Œç›´åˆ°æ–‡ä»¶æ’­æ”¾å®Œæ¯•
</code></pre>
<p><strong>ğŸ“Š å®Œæ•´æµç¨‹æ—¶åºå›¾</strong></p>
<blockquote>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant Player as æ’­æ”¾å™¨
    participant Demuxer as è§£å°è£…
    participant Decoder as è§£ç å™¨
    participant Sync as åŒæ­¥å™¨
    participant Render as æ¸²æŸ“å™¨
    
    User-&gt;&gt;Player: ç‚¹å‡»æ’­æ”¾
    Player-&gt;&gt;Demuxer: æ‰“å¼€æ–‡ä»¶
    Demuxer--&gt;&gt;Player: æµä¿¡æ¯
    
    loop æ¯ä¸€å¸§
        Player-&gt;&gt;Demuxer: è¯»å– Packet
        Demuxer--&gt;&gt;Decoder: AVPacket
        Decoder-&gt;&gt;Decoder: è§£ç 
        Decoder--&gt;&gt;Sync: AVFrame
        Sync-&gt;&gt;Sync: è®¡ç®—æ˜¾ç¤ºæ—¶æœº
        Sync--&gt;&gt;Render: æ˜¾ç¤ºå¸§
        Render-&gt;&gt;User: ç”»é¢+å£°éŸ³
    end
</code></pre>
</blockquote>
<hr/>
<h3 data-id="heading-17">ğŸ“š ä¸‹ä¸€ç¯‡é¢„å‘Š</h3>
<p>ä¸‹ä¸€ç¯‡ã€Šè§†é¢‘ç¼–ç åŸç†ï¼šä¸ºä»€ä¹ˆ 1 å°æ—¶ç”µå½±åªæœ‰å‡ ç™¾ MBã€‹ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>è§†é¢‘å‹ç¼©çš„æ•°å­¦åŸç†</li>
<li>I/P/B å¸§çš„å«ä¹‰</li>
<li>GOPï¼ˆå…³é”®å¸§é—´éš”ï¼‰çš„ä½œç”¨</li>
<li>ç ç‡ä¸ç”»è´¨çš„å¹³è¡¡</li>
</ul>
<p>æ•¬è¯·æœŸå¾…ï¼ğŸ¬</p>
<hr/>
<h3 data-id="heading-18">ğŸ”— ç›¸å…³èµ„æº</h3>
<ul>
<li><strong>ZenPlay æºç </strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSunshine334419520%2Fzenplay" target="_blank" title="https://github.com/Sunshine334419520/zenplay" ref="nofollow noopener noreferrer">GitHub - zenplay</a></li>
<li><strong>FFmpeg å®˜æ–¹æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fffmpeg.org%2Fdocumentation.html" target="_blank" title="https://ffmpeg.org/documentation.html" ref="nofollow noopener noreferrer">ffmpeg.org/documentatiâ€¦</a></li>
<li><strong>æ¨èé˜…è¯»</strong>ï¼šé›·éœ„éª…çš„åšå®¢ - FFmpeg æºç åˆ†æç³»åˆ—</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥ç¨‹å¸ˆå­¦AIä¹‹èµ·å§‹ç¯‡ï¼šç†è®ºä¸å®è·µå­¦ä¹ è®¡åˆ’]]></title>    <link>https://juejin.cn/post/7574608278421733412</link>    <guid>https://juejin.cn/post/7574608278421733412</guid>    <pubDate>2025-11-20T07:52:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574608278421733412" data-draft-id="7574530224853270534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥ç¨‹å¸ˆå­¦AIä¹‹èµ·å§‹ç¯‡ï¼šç†è®ºä¸å®è·µå­¦ä¹ è®¡åˆ’"/> <meta itemprop="keywords" content="Agent,ç¨‹åºå‘˜,LLM"/> <meta itemprop="datePublished" content="2025-11-20T07:52:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥ç¨‹å¸ˆå­¦AIä¹‹èµ·å§‹ç¯‡ï¼šç†è®ºä¸å®è·µå­¦ä¹ è®¡åˆ’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:52:45.000Z" title="Thu Nov 20 2025 07:52:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<h2 data-id="heading-0">1.èƒŒæ™¯</h2>
<p>éšç€22å¹´åº•chatgptçš„é‡ç£…æ¨å‡ºï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å‘å±•è¿…çŒ›ï¼Œä»æœ€åˆçš„â€œå¤§å·æ–‡æœ¬é¢„æµ‹å™¨â€ï¼ˆä¼šå¬ï¼Œä¼šè¯´ï¼‰ä¸€æ­¥æ­¥æˆé•¿ä¸ºå¦‚ä»Šèƒ½å¤„ç†å¤æ‚ä»»åŠ¡çš„â€œæ™ºèƒ½ä½“â€åŸºçŸ³ï¼ˆä¼šæƒ³ã€ä¼šåšï¼‰ã€‚25å¹´åˆdeepseekç‚¹ç‡ƒäº†å›½äººå¯¹å¤§æ¨¡å‹çš„çƒ­æƒ…ï¼Œä¸çŸ¥æ‚¨æ˜¯å¦å¥½å¥‡Transformerã€è‡ªæ³¨æ„åŠ›self-attentionã€LLMã€Tokenã€å‘é‡åŒ–Embeddingã€æ¶Œç°ã€Pre-trainingã€æœ‰ç›‘ç£å¾®è°ƒSFTã€RLHFã€MOEã€MLAã€å¤šæ¨¡æ€ã€æ€ç»´é“¾CoTã€FunctionCallingã€RAGã€MCPåè®®ã€AIAgentã€A2Aåè®®ç­‰æ¦‚å¿µå±‚å‡ºä¸ç©·ï¼Œåˆ°åº•åœ¨è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<p>ä½œä¸ºèµ·å§‹ç¯‡å°†ä¸æ‚¨ä¸€èµ·ä»å®è§‚ä¸Šç†è§£ä¸‹å¤§æ¨¡å‹çš„åŸºæœ¬è„‰ç»œï¼Œå¹¶åŸºäºå½“ä¸‹ç†è§£å’Œè®¤çŸ¥ï¼Œä»å·¥ç¨‹å¸ˆè§†è§’åˆ¶å®šå­¦ä¹ è®¡åˆ’ï¼Œæ¬¢è¿å…³æ³¨äº¤æµè®¨è®ºï¼</p>
<p>è¯¥ç³»åˆ—å°†ä»å·¥ç¨‹å¸ˆè§†è§’ï¼Œä¸€æ­¥æ­¥å»å­¦ä¹ å¹¶ç†è§£å¤§æ¨¡å‹ç›¸å…³æ¦‚å¿µï¼Œå†åˆ°ä¼šç”¨ï¼Œæ·±å…¥ç†è§£ï¼ŒæŒæ¡åŸç†ï¼ŒåŠ¨æ‰‹å®è·µï¼Œè§£å†³å®é™…é—®é¢˜ã€‚</p>
<p>1ï¼‰æ¦‚å¿µï¼šè¿™äº›å±‚å‡ºä¸ç©·çš„æ¦‚å¿µèƒŒååˆ°åº•åœ¨è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<p>2ï¼‰ä¼šç”¨ï¼šé™¤äº†çŸ¥è¯†é—®ç­”ä¸ä¼šè¯ï¼Œè¿˜èƒ½ç”¨å¤§æ¨¡å‹è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿæœ‰ä»€ä¹ˆå±€é™æ€§ï¼Ÿ</p>
<p>3ï¼‰ç†è§£ï¼šå¤§è¯­è¨€æ¨¡å‹vså·¥ç¨‹å¼€å‘åœ¨æ€ç»´æ–¹å¼ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<p>4ï¼‰åŸç†ï¼šå¤§è¯­è¨€æ¨¡å‹åˆ°åº•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</p>
<p>5ï¼‰åŠ¨æ‰‹å®è·µï¼šå¦‚ä½•ä»0å¼€å§‹æ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼Ÿ</p>
<p>6ï¼‰å®é™…é—®é¢˜ï¼šå¦‚ä½•ç”¨å¤§è¯­è¨€æ¨¡å‹åˆ›é€ æ€§è§£å†³ä¸šåŠ¡åœºæ™¯å®é™…é—®é¢˜ï¼Ÿ</p>
<p>7ï¼‰å­¦ä¹ è®¡åˆ’ï¼šå·¥ç¨‹å¸ˆå¦‚ä½•ä¸€æ­¥æ­¥æŒæ¡å¤§æ¨¡å‹èƒŒåçš„ç†è®ºçŸ¥è¯†ã€ç®—æ³•æ¨¡å‹ï¼Ÿ</p>
<h2 data-id="heading-1">2.æ¦‚å¿µï¼šä»€ä¹ˆæ˜¯LLMå¤§è¯­è¨€æ¨¡å‹ï¼Ÿ</h2>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLarge Language Model, LLMï¼‰æ˜¯ä¸€ç§ä½¿ç”¨å¤§é‡æ–‡æœ¬æ•°æ®è®­ç»ƒçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå…¶æ ¸å¿ƒèƒ½åŠ›æ˜¯å¯ä»¥ç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€ã€‚å¤§æ¨¡å‹ = æµ·é‡æ•°æ® + æ·±åº¦å­¦ä¹ ç®—æ³• + è¶…å¼ºç®—åŠ›ã€‚äººå·¥æ™ºèƒ½AIã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ã€å¤§è¯­è¨€æ¨¡å‹LLMã€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½GenAIå…³ç³»å¤§è‡´å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d07680ae39b457997bbc38eeb754d3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229965&amp;x-signature=Bi0NFrTEbaoHHLAG1wG4cUTvA3k%3D" alt="" loading="lazy"/></p>
<p>è¿‘å‡ å¹´å¤§è¯­è¨€æ¨¡å‹æ¼”å˜å†ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34e2f8373ae34cdfb758874c8b9c64db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229965&amp;x-signature=EwqNPC%2B1GKlX6czZmxllbfHQK2s%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">3.ä¼šç”¨ï¼šå¤§è¯­è¨€æ¨¡å‹èƒ½åšä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-3">3.1åº”ç”¨åœºæ™¯</h3>
<p>å¤§æ¨¡å‹ï¼ˆLarge Language Models, LLMsï¼‰çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œå¹¶ä¸”æ­£ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦æ¸—é€åˆ°å„ä¸ªè¡Œä¸šã€‚å®ƒä»¬ä¸ä»…èƒ½å¤„ç†è‡ªç„¶è¯­è¨€ä»»åŠ¡ï¼Œè¿˜èƒ½ç†è§£å’Œç”Ÿæˆä»£ç ã€è¿›è¡Œå¤šæ¨¡æ€äº¤äº’ï¼Œç”šè‡³ä½œä¸ºæ™ºèƒ½ä½“ï¼ˆAgentï¼‰è‡ªä¸»å†³ç­–å’Œæ‰§è¡Œä»»åŠ¡ã€‚</p>






































































<table><thead><tr><th/><th/><th/></tr></thead><tbody><tr><td>åº”ç”¨é¢†åŸŸ</td><td>å…·ä½“åœºæ™¯</td><td>æ ¸å¿ƒä»·å€¼/æ¡ˆä¾‹</td></tr><tr><td>åŒ»ç–—ä¸å¥åº·</td><td>æ™ºèƒ½é—®è¯Šä¸åˆ†è¯Šã€åŒ»å­¦å½±åƒåˆ†æã€è¯ç‰©ç ”å‘ä¸æŒ–æ˜ã€å¥åº·ç®¡ç†ã€åŒ»é™¢è¿è¥ä¼˜åŒ–</td><td>åŠ é€Ÿè¯ç‰©ç ”å‘è¿›ç¨‹ï¼Œæå‡è¯Šç–—æ•ˆç‡ï¼Œä¼˜åŒ–æ‚£è€…æœåŠ¡ä½“éªŒ</td></tr><tr><td>è½¯ä»¶å¼€å‘</td><td>ä»£ç ç”Ÿæˆä¸è¡¥å…¨ã€Bugè°ƒè¯•ä¸ä¿®å¤ã€ä»£ç è§£é‡Šã€ä¸åŒç¼–ç¨‹è¯­è¨€è½¬æ¢ã€è‡ªåŠ¨åŒ–æµ‹è¯•</td><td>æå‡å¼€å‘æ•ˆç‡ï¼Œé™ä½ä»£ç ç¼ºé™·ï¼ŒåŠ é€Ÿå­¦ä¹ è¿›ç¨‹</td></tr><tr><td>æ•™è‚²ä¸ç§‘ç ”</td><td>ä¸ªæ€§åŒ–è¾…å¯¼ã€ä½œä¸šæ‰¹æ”¹ã€è¯­è¨€å­¦ä¹ ã€ç§‘å­¦è®¡ç®—ã€è®ºæ–‡æ‘˜è¦ä¸ç¿»è¯‘</td><td>å› ææ–½æ•™ï¼Œæå‡å­¦ä¹ æ•ˆç‡ï¼Œè¾…åŠ©ç§‘å­¦ç ”ç©¶</td></tr><tr><td>å·¥ä¸šä¸åˆ¶é€ </td><td>æ™ºèƒ½å†³ç­–æ”¯æŒã€ç”Ÿäº§æµç¨‹ä¼˜åŒ–ã€è´¨é‡æ§åˆ¶ã€ Predictive Maintenanceï¼ˆé¢„æµ‹æ€§ç»´æŠ¤ï¼‰ã€ä¾›åº”é“¾ç®¡ç†ã€ç ”å‘è®¾è®¡</td><td>æå‡ç”Ÿäº§æ•ˆç‡ï¼Œé™ä½æ•…éšœç‡ï¼Œç¼©çŸ­ç ”å‘å‘¨æœŸï¼Œä¼˜åŒ–èƒ½è€—</td></tr><tr><td>èƒ½æºä¸ç”µåŠ›</td><td>è™šæ‹Ÿç”µå‚è°ƒåº¦ã€ç”µç½‘è´Ÿè·é¢„æµ‹ã€èƒ½æºäº¤æ˜“ã€æ— åŠŸè¡¥å¿ä¼˜åŒ–ã€ç”µèƒ½è´¨é‡ç®¡ç†</td><td>æå‡ç”µç½‘ç¨³å®šæ€§ï¼Œä¿ƒè¿›æ–°èƒ½æºæ¶ˆçº³ï¼Œå®ç°ç²¾å‡†çš„éœ€æ±‚å“åº”å’Œè°ƒåº¦</td></tr><tr><td>å†…å®¹åˆ›ä½œä¸ åª’ä½“</td><td>æ–°é—»æ’°ç¨¿ã€å‰§æœ¬åˆ›ä½œã€è¥é”€æ–‡æ¡ˆã€ç¿»è¯‘ã€æ‘˜è¦ç”Ÿæˆ</td><td>æå‡å†…å®¹ç”Ÿäº§æ•ˆç‡å’Œåˆ›æ„å¤šæ ·æ€§</td></tr><tr><td>å®¢æˆ·æœåŠ¡ä¸è¥é”€</td><td>æ™ºèƒ½å®¢æœã€ä¸ªæ€§åŒ–æ¨èã€å¸‚åœºæ´å¯Ÿåˆ†æã€é”€å”®è¯æœ¯ç”Ÿæˆ</td><td>æå‡å®¢æˆ·æ»¡æ„åº¦ï¼Œé™ä½äººåŠ›æˆæœ¬ï¼Œå®ç°ç²¾å‡†è¥é”€</td></tr><tr><td>æ³•å¾‹å¸æ³•</td><td>æ³•å¾‹æ¡æ–‡æ£€ç´¢ä¸è§£è¯»ã€æ¡ˆä¾‹åˆ†æä¸è£åˆ¤æ–‡ä¹¦ç”Ÿæˆã€åˆåŒå®¡æŸ¥ä¸æ™ºèƒ½èµ·è‰ã€æ¡ˆä»¶ç„¦ç‚¹è¯†åˆ«ä¸è¯æ®åˆ†æ</td><td>æå‡æ¡ˆä»¶å¤„ç†æ•ˆç‡å’Œå‡†ç¡®æ€§ï¼Œé™ä½äººå·¥å·¥ä½œè´Ÿè·</td></tr><tr><td>èˆªå¤©é«˜ç§‘æŠ€</td><td>åœ¨è½¨æ“ä½œè¾…åŠ©ã€æ•…éšœè¯Šæ–­ä¸å¤„ç½®ã€èˆªå¤©å‘˜å¿ƒç†æ”¯æŒã€å¤©åœ°ååŒæ™ºèƒ½é—®ç­”</td><td>ä¸ºåœ¨è½¨å·¥ä½œæä¾›æ™ºèƒ½åŒ–ã€ä¸“ä¸šåŒ–æ”¯æŒ</td></tr><tr><td>é‡‘èä¸é£æ§</td><td>æ™ºèƒ½æŠ•é¡¾ã€é£é™©è¯„ä¼°ã€åæ¬ºè¯ˆã€ä¿¡è´·å®¡æ‰¹ã€å¸‚åœºè¡Œæƒ…åˆ†æ</td><td>æå‡é£é™©æ§åˆ¶èƒ½åŠ›ï¼Œä¼˜åŒ–æŠ•èµ„å†³ç­–ï¼Œè‡ªåŠ¨åŒ–ä¸šåŠ¡æµç¨‹</td></tr><tr><td>ä¸ªäººåŠ©ç†ä¸å¨±ä¹</td><td>æ—¥ç¨‹ç®¡ç†ã€ä¿¡æ¯æ£€ç´¢ã€æ—…è¡Œè§„åˆ’ã€æ¸¸æˆNPCå¯¹è¯ç”Ÿæˆã€å†™è¯—ä½œç”»</td><td>æå‡ç”Ÿæ´»å’Œå·¥ä½œæ•ˆç‡ï¼Œæä¾›ä¸ªæ€§åŒ–å¨±ä¹ä½“éªŒ</td></tr></tbody></table>
<h3 data-id="heading-4">3.2è½¯ä»¶å¼€å‘åœºæ™¯ï¼šAI Codingç»™æƒ³æ³•æ’ä¸Šç¿…è†€ï¼Ÿ</h3>
<p>éšç€å¤§æ¨¡å‹è¾…åŠ©ç¼–ç æŠ€æœ¯å‘å±•ï¼Œå³ä½¿æ‚¨ä¸ä¼šç¼–ç¨‹ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©AICodingæŠŠæƒ³æ³•å¿«é€Ÿè½¬æ¢æˆå¯è¿è¡Œçš„ä»£ç ã€‚è¿™é‡Œç”¨ä¸€ä¸ªç”Ÿæ´»ä¸­çš„æ¡ˆä¾‹æ¥çœ‹çœ‹AIå¦‚ä½•ç»™æƒ³æ³•æ’ä¸Šç¿…è†€ï¼Ÿä»0å®ç°ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºåŸå‹ç³»ç»ŸåŸºæœ¬åœ¨å°æ—¶çº§åˆ«å°±èƒ½å®Œæˆã€‚</p>
<h4 data-id="heading-5">3.2.1åŸå§‹éœ€æ±‚ï¼šå„¿ç«¥ç”Ÿç—…ä½“æ¸©ç”¨è¯ç—‡çŠ¶è§‚æµ‹</h4>
<p>ä¸çŸ¥å®çˆ¸å®å¦ˆä»¬åœ¨å­©å­ç”Ÿç—…å‘çƒ§æœŸé—´æ— æ¯”ç„¦è™‘çš„åœºæ™¯ï¼Œæ¨ä¸å¾—æ—¶åˆ»èƒ½çœ‹çœ‹ä½“æ¸©æ˜¯ä¸æ˜¯é™ä¸‹æ¥äº†ï¼Ÿç”¨é€€çƒ§è¯ä¹‹åèƒ½å¤ŸæŒç»­å¤šä¹…ï¼Ÿä¸‹é¢æ˜¯æˆ‘è‡ªå·±å°å­©3å²å·¦å³ä¸€æ®µå‘çƒ§è®°å½•ï¼šæ™šä¸Šåˆ°å‡Œæ™¨ï¼Œæˆ‘å’Œçˆ±äººè½®æµæµ‹é‡ä½“æ¸©ï¼Œç”¨è¯ï¼Œè§‚å¯Ÿç—‡çŠ¶å˜åŒ–æƒ…å†µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d4e579bafd844079f8a306dc6d3a385~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229965&amp;x-signature=uV15ghbFBQ1C7k55R4QtA%2Fj2pWY%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6">3.2.2AICodingåŠ©æ‚¨0ç¼–ç å®ç°å¾®ä¿¡å°ç¨‹åº</h4>
<p>é¦–å…ˆï¼Œæˆ‘æ²¡æœ‰å†™è¿‡å¤šå°‘å‰ç«¯ä»£ç å’Œå¾®ä¿¡å°ç¨‹åºï¼Œå€ŸåŠ©AIç¼–ç¨‹å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»ç”Ÿæ´»ä¸­å®é™…åœºæ™¯å‡ºå‘â€”&gt;åˆ°æƒ³æ³•â€”&gt;äº¤äº’å›¾ç”Ÿæˆâ€”&gt;AIè¾…åŠ©æ¶æ„ã€æ•°æ®åº“ã€APIè®¾è®¡â€”&gt;AIè¾…åŠ©ç”Ÿæˆå‰åç«¯ä»£ç â€”&gt;åŸå‹ç³»ç»Ÿéƒ¨ç½²è°ƒè¯•ã€‚</p>
<p>å®Œæ•´çš„å°ç¨‹åºç•Œé¢åŠå®ç°è¿‡ç¨‹è¿™é‡Œä¸åšèµ˜è¿°ï¼ˆç›®å‰å¼€å‘ä½“éªŒç‰ˆæœ¬ï¼‰ï¼Œåç»­æ–‡ç« è¯¦ç»†è®°å½•ä¸‹å®Œæ•´çš„ä»æƒ³æ³•åˆ°UEDè®¾è®¡ï¼ŒåŠè®¾è®¡ç¼–ç å®ç°è¿‡ç¨‹ã€‚æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å…³æ³¨è®¨è®ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a9bdef01cf84b0cbd153d59abc3fbf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229965&amp;x-signature=MDSq7NKqPUIUbh0%2BjzGff0C8q08%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f16aabd422344da7959c1f31ee5aefff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229965&amp;x-signature=64rqsxKwy9SeGieKttmHCzT4xqA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">4.ç†è§£ï¼šå¤§è¯­è¨€æ¨¡å‹å·¥ä½œåŸç†ï¼Ÿ</h2>
<h3 data-id="heading-8">4.1å·¥ç¨‹vsç®—æ³•ï¼šæ¼”ç»å½’çº³æ€ç»´å·®å¼‚</h3>
<p>å½’çº³ä¸æ¼”ç»æ˜¯äººç±»è®¤è¯†äº‹ç‰©çš„ä¸¤ç§æ€ç»´æ–¹æ³•ï¼Œå·¥ç¨‹ä¸ç®—æ³•æ˜¯è¿™ä¸¤ç§æ€ç»´æ–¹å¼çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚å½’çº³ä¸æ¼”ç»åœ¨å·¥ç¨‹å’Œå¤§æ¨¡å‹ç®—æ³•ä¸­çš„åˆ†å¸ƒæ˜¯ä¸€ç§æœ‰è¶£çš„é•œåƒå…³ç³»ï¼š</p>
<p>1ï¼‰ä¼ ç»Ÿå·¥ç¨‹ç«‹è¶³äºæ¼”ç»çš„ç¡®å®šæ€§ï¼Œç”¨å½’çº³æ¥åº”å¯¹ç°å®ä¸–ç•Œçš„ä¸å®Œç¾ã€‚å¯¹äºAIç ”ç©¶è€…è€Œè¨€ï¼Œæ˜ç™½â€œæ¼”ç»â€æ¡†æ¶ï¼ˆå¦‚ç®—æ³•ã€æ¶æ„ï¼‰çš„çªç ´ï¼Œæ‰èƒ½ä¸ºæ›´å¼ºå¤§çš„â€œå½’çº³â€èƒ½åŠ›æ­å»ºèˆå°ã€‚</p>
<p>2ï¼‰å¤§æ¨¡å‹ç®—æ³•ç«‹è¶³äºå½’çº³çš„æ¦‚ç‡æ€§ï¼Œç”¨æ¼”ç»æ¥æ¡†æ¶å…¶å­¦ä¹ å’Œçº¦æŸå…¶è¡Œä¸ºã€‚å¯¹äºå·¥ç¨‹å¸ˆè€Œè¨€ï¼Œæ˜ç™½å¤§æ¨¡å‹çš„â€œå½’çº³â€æœ¬è´¨ï¼Œå°±ä¸ä¼šæœŸæœ›å®ƒåƒä¼ ç»Ÿè½¯ä»¶ä¸€æ ·ç»å¯¹å¯é ï¼Œä»è€Œèƒ½æ›´å¥½åœ°è®¾è®¡å®¹é”™å’ŒéªŒè¯æµç¨‹ã€‚</p>
<h4 data-id="heading-9">4.1.1å·¥ç¨‹æ€ç»´ï¼šæ¼”ç»ä¸ºä¸»ï¼Œå½’çº³ä¸ºè¾…</h4>
<p>æ¼”ç»æ³•æ ¸å¿ƒæ€æƒ³ï¼šä»ä¸€èˆ¬æ€§å‰ææ¨å¯¼å‡ºç‰¹æ®Šæ€§ç»“è®ºã€‚å¦‚æœå‰æä¸ºçœŸï¼Œä¸”æ¨ç†è¿‡ç¨‹æ­£ç¡®ï¼Œåˆ™ç»“è®ºå¿…ç„¶ä¸ºçœŸã€‚å·¥ç¨‹åŒ–æ€ç»´è§£å†³é—®é¢˜çš„æ–¹å¼æ˜¯æ¼”ç»æ¨å¯¼ä¸ºä¸»ï¼Œå½’çº³ä¸ºè¾…ã€‚</p>
<p>æ¨ç†æ–¹å‘ï¼šä»ä¸€èˆ¬åˆ°ç‰¹æ®Šï¼ˆTop-Downï¼‰ã€‚</p>
<p>å…³é”®è¯ï¼šè§„åˆ™ã€å…¬ç†ã€å®šç†ã€é€»è¾‘æ¨å¯¼ã€ç¡®å®šæ€§ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šè½¯ä»¶è®¾è®¡è¿‡ç¨‹ï¼ˆPRD-äº¤äº’-è§†è§‰-æ¶æ„è®¾è®¡-ç¼–ç å®ç°ï¼‰ã€ä¼ ç»Ÿå·¥ç¨‹ï¼ˆå¦‚åœŸæœ¨ã€æœºæ¢°ã€ç”µå­å·¥ç¨‹ï¼‰çš„æ ¸å¿ƒæ˜¯ç¡®å®šæ€§å’Œå¯é æ€§ï¼Œå…¶æ€ç»´æ–¹å¼é«˜åº¦ä¾èµ–æ¼”ç»æ³•ã€‚</p>
<p>ä¸¥æ ¼çš„è®¾è®¡è§„èŒƒï¼šå·¥ç¨‹å¸ˆä½¿ç”¨è¿™äº›å®šå¾‹ï¼Œç»“åˆå…·ä½“éœ€æ±‚ï¼ˆå°å‰æï¼‰ï¼Œé€šè¿‡æ•°å­¦è®¡ç®—å’Œé€»è¾‘æ¨å¯¼ï¼Œè®¾è®¡å‡ºæ¡¥æ¢ã€èŠ¯ç‰‡æˆ–ç”µè·¯ï¼ˆç»“è®ºï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯é«˜åº¦æ¼”ç»çš„ã€‚</p>
<p>å¯é¢„æµ‹æ€§ï¼šå› ä¸ºåŸºäºç¡®å®šæ€§å®šå¾‹ï¼Œå·¥ç¨‹ç³»ç»Ÿçš„è¡Œä¸ºåœ¨ç†è®ºä¸Šæ˜¯å¯ä»¥ç²¾ç¡®é¢„æµ‹çš„ã€‚ä¸€åº§æ¡¥èƒ½æ‰¿é‡å¤šå°‘ï¼Œåœ¨å»ºé€ ä¹‹å‰å°±å¯ä»¥é€šè¿‡è®¡ç®—å¾—çŸ¥ã€‚</p>
<p>å°ç»“ï¼šåœ¨ä¼ ç»Ÿå·¥ç¨‹ä¸­ï¼Œæ¼”ç»æ˜¯â€œè®¾è®¡å¸ˆâ€ï¼Œè´Ÿè´£åŸºäºå±æ€§è®¡ç®—å’Œå·¥ç¨‹è®¾è®¡å®Œæˆç¡®å®šæ€§éœ€æ±‚çš„æ„å»ºï¼›å½’çº³æ˜¯â€œæµ‹è¯•/è´¨æ£€å‘˜â€å’Œâ€œä¼˜åŒ–å¸ˆâ€ï¼Œè´Ÿè´£éªŒè¯å’Œè°ƒä¼˜ã€‚</p>
<h4 data-id="heading-10">4.1.2ç®—æ³•æ€ç»´ï¼šå½’çº³ä¸ºä¸»ï¼Œæ¼”ç»ä¸ºè¾…</h4>
<p>å½’çº³æ³•æ ¸å¿ƒæ€æƒ³ï¼šä»å¤§é‡ç‰¹æ®Šæ€§è§‚å¯Ÿä¸­æ€»ç»“å‡ºä¸€èˆ¬æ€§è§„å¾‹æˆ–æ¨¡å¼ã€‚ç»“è®ºæ˜¯å¯èƒ½ä¸ºçœŸçš„ï¼Œä½†ä¸ä¿è¯ç»å¯¹æ­£ç¡®ã€‚å¤§æ¨¡å‹ç®—æ³•è§£å†³é—®é¢˜çš„æ–¹å¼æ˜¯å½’çº³ä¸ºä¸»ï¼Œæ¼”ç»ä¸ºè¾…ã€‚</p>
<p>æ¨ç†æ–¹å‘ï¼šä»ç‰¹æ®Šåˆ°ä¸€èˆ¬ï¼ˆBottom-Upï¼‰ã€‚</p>
<p>å…³é”®è¯ï¼šæ¨¡å¼ã€è¶‹åŠ¿ã€æ¦‚ç‡ã€ç»Ÿè®¡ã€ä¸ç¡®å®šæ€§ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šå¤§æ¨¡å‹ï¼ˆå¦‚GPTã€BERTç­‰ï¼‰çš„æœ¬è´¨æ˜¯ä»æ•°æ®ä¸­å­¦ä¹ ç»Ÿè®¡è§„å¾‹ï¼Œå…¶æ ¸å¿ƒèŒƒå¼æ˜¯å½’çº³æ³•ã€‚</p>
<p>1ï¼‰å­¦ä¹ è¿‡ç¨‹å°±æ˜¯å½’çº³ï¼šå¤§æ¨¡å‹ä¸é¢„å…ˆè¾“å…¥â€œè¯­æ³•è§„åˆ™â€æˆ–â€œä¸–ç•ŒçŸ¥è¯†â€ï¼ˆå¤§å‰æï¼‰ã€‚å®ƒé€šè¿‡åœ¨æµ·é‡æ–‡æœ¬æ•°æ®ï¼ˆæ•°åäº¿ä¸ªç‰¹æ®Šæ ·æœ¬ï¼‰ä¸­å¯»æ‰¾è¯ä¸è¯ã€å¥ä¸å¥ä¹‹é—´çš„ç»Ÿè®¡å…³è”ï¼ˆå¦‚å…±ç°é¢‘ç‡ã€æ³¨æ„åŠ›æƒé‡ï¼‰ï¼Œå½’çº³å‡ºä¸€å¥—å†…éƒ¨çš„ã€éšå«çš„â€œè¯­è¨€æ¨¡å‹â€å’Œâ€œä¸–ç•Œæ¨¡å‹â€ã€‚è¿™ä¸ªè¿‡ç¨‹å®Œå…¨æ˜¯ä»ç‰¹æ®Šåˆ°ä¸€èˆ¬ã€‚</p>
<p>2ï¼‰æ¦‚ç‡æ€§è¾“å‡ºï¼šæ¨¡å‹çš„è¾“å‡ºä¸æ˜¯ç¡®å®šçš„çœŸç†ï¼Œè€Œæ˜¯åŸºäºå…¶å½’çº³å‡ºçš„ç»Ÿè®¡åˆ†å¸ƒï¼Œè®¡ç®—å‡ºçš„æœ€å¯èƒ½çš„è¯åºåˆ—ã€‚å®ƒæ˜¯â€œå¯èƒ½ä¸ºçœŸâ€çš„ï¼Œè¿™æ­£æ˜¯å½’çº³æ³•çš„ç‰¹å¾ã€‚</p>
<p>3ï¼‰æ¶Œç°èƒ½åŠ›ï¼šæ¨¡å‹è¡¨ç°å‡ºçš„æ¨ç†ã€åˆ›ä½œç­‰å¤æ‚èƒ½åŠ›ï¼Œå¹¶éç”±ç¨‹åºå‘˜æ˜¾å¼ç¼–ç ï¼ˆæ¼”ç»ï¼‰ï¼Œè€Œæ˜¯ä»æ•°æ®ä¸­å½’çº³æ¶Œç°å‡ºæ¥çš„ï¼Œè¿™è¶…å‡ºäº†è®¾è®¡è€…çš„ç²¾ç¡®é¢„æœŸã€‚</p>
<p>æ¼”ç»çš„è¾…åŠ©è§’è‰²ï¼š</p>
<p>1ï¼‰ç®—æ³•æ¡†æ¶è®¾è®¡ï¼šTransformerçš„æ¶æ„ã€åå‘ä¼ æ’­ç®—æ³•ã€æŸå¤±å‡½æ•°ç­‰ï¼Œæ˜¯ç ”ç©¶äººå‘˜åŸºäºæ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦åŸç†æ¼”ç»è®¾è®¡å‡ºæ¥çš„ã€‚è¿™ä¸ºå½’çº³å­¦ä¹ æä¾›äº†èˆå°å’Œè§„åˆ™ã€‚</p>
<p>2ï¼‰æç¤ºå·¥ç¨‹ä¸æ€ç»´é“¾ï¼šç”¨æˆ·é€šè¿‡è®¾è®¡ç²¾å¦™çš„æç¤ºï¼ˆPromptï¼‰ï¼Œè¯•å›¾å¼•å¯¼æ¨¡å‹æ¿€æ´»å…¶å†…éƒ¨å½’çº³å‡ºçš„çŸ¥è¯†ï¼Œå¹¶æŒ‰ç…§ä¸€ç§ç±»ä¼¼æ¼”ç»çš„é€»è¾‘é“¾ï¼ˆChain-of-Thoughtï¼‰æ¥ç”Ÿæˆç­”æ¡ˆã€‚è¿™æ˜¯åœ¨ç”¨æ¼”ç»çš„å½¢å¼å»é©¾é©­å½’çº³å¾—åˆ°çš„èƒ½åŠ›ã€‚</p>
<p>3ï¼‰è§„åˆ™çº¦æŸï¼šåœ¨æ¨¡å‹è¾“å‡ºç«¯ï¼Œä¼šä½¿ç”¨æ¼”ç»æ€§çš„è§„åˆ™è¿›è¡Œè¿‡æ»¤å’Œçº¦æŸï¼Œä¾‹å¦‚å†…å®¹å®‰å…¨è¿‡æ»¤ã€æ ¼å¼è¦æ±‚ç­‰ï¼Œä»¥ç¡®ä¿è¾“å‡ºç¬¦åˆæŸäº›ç¡®å®šæ€§æ ‡å‡†ã€‚</p>
<p>å°ç»“ï¼šåœ¨å¤§æ¨¡å‹ç®—æ³•ä¸­ï¼Œå½’çº³æ˜¯â€œå­¦ç”Ÿâ€ï¼Œè´Ÿè´£ä»æ•°æ®ä¸­å­¦ä¹ çŸ¥è¯†ï¼›æ¼”ç»æ˜¯â€œæ•™ç»ƒâ€å’Œâ€œè£åˆ¤â€ï¼Œè´Ÿè´£è®¾è®¡å­¦ä¹ æ–¹æ³•å’Œè®¾å®šè¾“å‡ºè§„åˆ™ã€‚å…¶åˆ†å¸ƒæ˜¯â€œå½’çº³ä¸ºä¸»ï¼Œæ¼”ç»ä¸ºè¾…â€ã€‚</p>
<p>æœ€ç»ˆï¼Œæœ€å¼ºå¤§çš„ç³»ç»Ÿå°†æ˜¯é‚£äº›èƒ½ç²¾å·§èåˆä¸¤ç§èŒƒå¼çš„ç³»ç»Ÿï¼šç”¨æ¼”ç»æ³•æ„å»ºå¯é æ¡†æ¶ï¼Œç”¨å½’çº³æ³•æ±²å–æ•°æ®æ™ºæ…§ï¼Œä»è€ŒåŒæ—¶å…·å¤‡ä¸¥è°¨æ€§å’Œçµæ´»æ€§ã€‚</p>
<h3 data-id="heading-11">4.2å¤§è¯­è¨€æ¨¡å‹å·¥ä½œåŸç†</h3>
<p>LLMçš„å·¥ä½œåŸç†å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªâ€œåŸºäºæ¦‚ç‡çš„è¶…çº§æ–‡æœ¬ç”Ÿæˆå™¨â€ã€‚è™½ç„¶å®ƒä»¬æœ¬è´¨ä¸Šåœ¨äºâ€œé¢„æµ‹ä¸‹ä¸€ä¸ªè¯â€ï¼Œå¹¶éœ€è¦å¤§é‡æ–‡æœ¬è¿›è¡Œè®­ç»ƒï¼ŒåŸºäºæ•°åäº¿è¯æ±‡è®­ç»ƒçš„ç¥ç»ç½‘ç»œï¼Œä¸åŒäºä¼ ç»Ÿçš„äººç±»ç¼–å†™çš„è½¯ä»¶ï¼Œæ²¡äººå®Œå…¨ç†è§£å…¶å†…éƒ¨æœºåˆ¶ã€‚å¤§æ¨¡å‹è®­ç»ƒåˆ°æ¨ç†çš„å¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfe6648505e040418d7bfb72ecd45aaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229965&amp;x-signature=QsoeUmcxVzBE0jEo%2BMMuZVdL9SU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">5.å®è·µï¼šå¦‚ä½•ä»0æ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼Ÿ</h2>
<p>ä¸ºä»€ä¹ˆæˆ‘ä»¬åº”è¯¥æ„å»ºè‡ªå·±çš„ LLMï¼Ÿä»å¤´å¼€å§‹ç¼–ç ä¸€ä¸ª LLM æ˜¯ç†è§£å…¶å·¥ä½œæœºåˆ¶å’Œå±€é™æ€§çš„ç»ä½³ç»ƒä¹ ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿä½¿æˆ‘ä»¬å…·å¤‡äº†å¯¹ç°æœ‰å¼€æº LLM æ¶æ„è¿›è¡Œé¢„è®­ç»ƒæˆ–å¾®è°ƒçš„çŸ¥è¯†ï¼Œä»¥ä¾¿å°†å…¶åº”ç”¨äºæˆ‘ä»¬ç‰¹å®šé¢†åŸŸçš„æ•°æ®é›†æˆ–ä»»åŠ¡ã€‚</p>
<p>ç®€åŒ–çš„æ„å»ºæµç¨‹ï¼šç¯‡å¹…åŸå› è¿™é‡Œä¸åšèµ˜è¿°ï¼Œæ¬¢è¿å…³æ³¨ï¼Œåé¢ç« èŠ‚æ·±å…¥å­¦ä¹ å¹¶æ‹†è§£ã€‚</p>
<p>æµ·é‡æ•°æ® â†’ Transformeræ¶æ„ + é¢„è®­ç»ƒï¼ˆè‡ªç›‘ç£å­¦ä¹ ï¼‰ â†’ åŸºåº§æ¨¡å‹ â†’ æœ‰ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰ + å¯¹é½ä¼˜åŒ–ï¼ˆRLHF/DPOï¼‰ â†’ å¯¹è¯/æŒ‡ä»¤æ¨¡å‹ã€‚</p>
<h2 data-id="heading-13">6.å­¦ä¹ è®¡åˆ’</h2>
<p>ä¸ºäº†è¿›ä¸€æ­¥æ·±å…¥ç†è§£å¤§æ¨¡å‹å·¥ä½œåŸç†å¹¶åº”ç”¨åˆ°å·¥ç¨‹å®è·µä¸­ï¼Œæ•´ç†å¦‚ä¸‹å­¦ä¹ è®¡åˆ’ï¼šä»æ•°å­¦ç†è®ºâ€”&gt;ç¼–ç¨‹å·¥å…·pythonæ¡†æ¶ï¼šNumPy/Pandas/PyTorchâ€”&gt;æ¨¡å‹ä¸ç®—æ³•ç†è®ºçŸ¥è¯†â€”&gt;å·¥ç¨‹å®è·µã€‚å…³é”®åŸåˆ™ï¼š</p>
<p>1ï¼‰æ¯é˜¶æ®µå¿…é¡»äº§å‡ºå¯è¿è¡Œä»£ç ï¼ˆæ‹’ç»çº¯ç†è®ºå­¦ä¹ ï¼‰</p>
<p>2ï¼‰80%æ—¶é—´æŠ•å…¥å·¥ç¨‹å®è·µï¼ˆæ•°æ®å¤„ç†/éƒ¨ç½²/ç›‘æ§ï¼‰</p>
<p>3ï¼‰æˆæœ¬æ„è¯†è´¯ç©¿å…¨ç¨‹ï¼ˆGPUä½¿ç”¨/å»¶è¿Ÿ/ååé‡ï¼‰</p>
<h3 data-id="heading-14">6.1é˜¶æ®µ1ï¼ˆ1-2å‘¨ï¼‰ï¼šæ•°å­¦ç†è®ºvså¤§æ¨¡å‹</h3>
<p>æ•°å­¦çŸ¥è¯†æ˜¯ç†è§£å¤§æ¨¡å‹åŸç†çš„å¿…å¤‡å†…åŠŸï¼Œå›é¡¾ä¸‹å¤§å­¦å’Œç ”ç©¶ç”ŸæœŸé—´æ•°å­¦çŸ¥è¯†ï¼Ÿ</p>
<p>1ï¼‰çº¿æ€§ä»£æ•°ï¼šå®šä¹‰äº†æ¨¡å‹çš„ç»“æ„å’Œè¡¨ç¤ºæ–¹å¼ï¼Œç”¨çŸ©é˜µå’Œå‘é‡è¡¨ç¤ºä¸€åˆ‡ï¼Œå‘é‡ã€çŸ©é˜µå’Œå¼ é‡è¿ç®—æ˜¯æ•°æ®åœ¨æ¨¡å‹ä¸­æµåŠ¨çš„è¯­è¨€ã€‚çº¿æ€§ä»£æ•°æä¾›äº†å¦‚ä½•ç”¨â€œæ•°å­—å—â€æ¥è¡¨ç¤ºå’Œæ“ä½œâ€œæ¦‚å¿µâ€çš„åŸºæœ¬è¯­æ³•ã€‚</p>
<p>2ï¼‰æ¦‚ç‡è®ºï¼šå®šä¹‰äº†æ¨¡å‹çš„ç›®æ ‡å’Œè¡Œä¸ºæ–¹å¼ï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªè¯çš„æ¦‚ç‡åˆ†å¸ƒï¼Œç†è§£æŸå¤±å‡½æ•°ã€æ¨¡å‹è¯„ä¼°å’Œä¸ç¡®å®šæ€§çš„å…³é”®ã€‚</p>
<p>3ï¼‰å¾®ç§¯åˆ†ï¼šå®šä¹‰äº†æ¨¡å‹çš„å­¦ä¹ ç®—æ³•ï¼Œå¦‚ä½•é€šè¿‡è®¡ç®—æ¢¯åº¦æ¥ä¼˜åŒ–çŸ©é˜µä¸­çš„å‚æ•°ï¼Œä»¥æ›´å¥½åœ°å®Œæˆæ¦‚ç‡é¢„æµ‹çš„ç›®æ ‡ï¼‰ã€‚ç†è§£æ¢¯åº¦ã€å¯¼æ•°ï¼Œè¿™æ˜¯æ¨¡å‹ä¼˜åŒ–çš„åŸºç¡€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/164dcf31fd2c4c14a740a15925d4fbff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764229965&amp;x-signature=o3qTS%2FtIcH4RjQApgCgxtwomtno%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">6.2é˜¶æ®µ2ï¼ˆ1-2å‘¨ï¼‰ï¼šç¼–ç¨‹å·¥å…·ä¸ç¯å¢ƒ</h3>
<p>æ­å»ºå·¥ç¨‹åŒ–ç¯å¢ƒ + å»ºç«‹AIç›´è§‰ +Â æŒæ¡PyTorchå·¥ç¨‹åŒ–å¼€å‘ï¼Œå…·å¤‡CV/NLPåŸºç¡€é¡¹ç›®èƒ½åŠ›ã€‚</p>
<p>æŒæ¡pythonè¯­è¨€åŠNumPy (ç§‘å­¦è®¡ç®—)ã€Pandas (æ•°æ®å¤„ç†)ï¼ŒæŒæ¡PyTorchã€‚</p>
<p>äº†è§£Hugging Face (æ¨¡å‹ä¸­å¿ƒ)ã€‚</p>
<p>åˆ©ç”¨é˜¿é‡Œäº‘ç™¾ç‚¼æ­å»ºäº‘ç«¯ç¯å¢ƒï¼šåŸºäº PAI DSW å‡†å¤‡åœ¨çº¿å­¦ä¹ ç¯å¢ƒ</p>
<h3 data-id="heading-16">6.3é˜¶æ®µ3ï¼ˆ6-8å‘¨ï¼‰ï¼šæ¨¡å‹ä¸ç®—æ³• (æ ¸å¿ƒå¤§è„‘)</h3>
<h4 data-id="heading-17">6.3.1æœºå™¨å­¦ä¹ åŠæ·±åº¦å­¦ä¹ åŸºç¡€çŸ¥è¯†ï¼ˆ2-3å‘¨ï¼‰</h4>
<p>æŒæ¡æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ åŠNLPåŸºç¡€æ¦‚å¿µï¼Œç†è§£å›å½’ã€åˆ†ç±»ã€è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆç­‰åŸºæœ¬æ¦‚å¿µã€‚æŒæ¡ç¥ç»ç½‘ç»œ(NN)ã€å·ç§¯ç½‘ç»œ(CNN)ã€å¾ªç¯ç½‘ç»œ(RNN)ç­‰ç»å…¸ç»“æ„ã€‚ç›‘ç£å­¦ä¹  vs. æ— ç›‘ç£å­¦ä¹ ï¼Œçº¿æ€§å›å½’ã€é€»è¾‘å›å½’ã€å†³ç­–æ ‘ã€SVMç­‰ç»å…¸ç®—æ³•ï¼Œæ¨¡å‹è¯„ä¼°æ–¹æ³•ã€‚</p>
<p>1ï¼‰ä¹¦ç±ï¼šã€Šæœºå™¨å­¦ä¹ ã€‹ã€Šæ·±åº¦å­¦ä¹ ã€‹</p>
<p>2ï¼‰åœ¨çº¿è¯¾ç¨‹ï¼šææ²ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹ï¼ˆPyTorchç‰ˆï¼‰ï¼Œå­¦ä¹ ç¥ç»ç½‘ç»œåŸºç¡€ï¼ˆå‰å‘ä¼ æ’­ã€åå‘ä¼ æ’­ï¼‰ã€CNNã€RNN/LSTMã€æ¿€æ´»å‡½æ•°ã€ä¼˜åŒ–ç®—æ³•ã€‚</p>
<p>3ï¼‰å®è·µï¼šä½¿ç”¨PyTorchç»ƒä¹ æ‰€å­¦å†…å®¹ï¼Œæ­å»ºç®€å•æ¨¡å‹ã€‚</p>
<h4 data-id="heading-18">6.3.2å¤§æ¨¡å‹æ ¸å¿ƒæŠ€æœ¯ï¼ˆ4-6å‘¨ï¼‰</h4>
<p>é‡ä¸­ä¹‹é‡ï¼Œæ·±å…¥ç†è§£Transformeræ¶æ„åŠå¤§æ¨¡å‹çš„åŸç†ã€è®­ç»ƒå’Œå¾®è°ƒï¼Œæ‰€æœ‰ç°ä»£AIå¤§æ¨¡å‹ï¼ˆå¦‚GPTã€Llamaï¼‰çš„åŸºçŸ³ï¼Œå¿…é¡»æ·±å…¥ç†è§£å…¶è‡ªæ³¨æ„åŠ›Self-Attentionæœºåˆ¶ã€Encoder-Decoderç»“æ„ã€ä½ç½®ç¼–ç ï¼Œæ·±åº¦ç†è§£Transformeræ¶æ„è®ºæ–‡ï¼šã€ŠAttention Is All You You Needã€‹ï¼Œè§†é¢‘å­¦ä¹ è§£è¯»ã€‚</p>
<p>1ï¼‰å¼€æºé¡¹ç›®ï¼šé˜…è¯»deepseekã€qwenç­‰æ¨¡å‹çš„ä»£ç æˆ–æ–‡æ¡£ï¼Œå­¦ä¹ GPTã€BERTã€LLaMAç­‰ä¸»æµæ¨¡å‹çš„åŒºåˆ«ä¸åŸç†ï¼ŒæŒæ¡é¢„è®­ç»ƒï¼ˆPretrainingï¼‰ä¸å¾®è°ƒï¼ˆFine-tuningï¼‰æ¦‚å¿µï¼Œå‚æ•°é«˜æ•ˆå¾®è°ƒæŠ€æœ¯ï¼ˆLoRAã€Adapterï¼‰ã€‚</p>
<p>2ï¼‰èµ„æ–™æ¨èï¼šé˜¿é‡Œäº‘å¤§æ¨¡å‹è®¤è¯åŸ¹è®­è¯¾ç¨‹ï¼›ææ²ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹ã€‚</p>
<p>3ï¼‰ä»£ç å®è·µï¼šå°è¯•å®ç°ä¸€ä¸ªç®€å•çš„Transformeræ¨¡å—ã€‚ç†Ÿæ‚‰é¢„è®­ç»ƒ(Pre-training)ã€å¾®è°ƒ(Fine-tuning)ã€æç¤ºå·¥ç¨‹(Prompt Engineering)ã€RLHF(äººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ )ç­‰æ ¸å¿ƒæŠ€æœ¯èŒƒå¼ã€‚</p>
<h3 data-id="heading-19">6.4é˜¶æ®µ4ï¼ˆ4-6å‘¨ï¼‰ï¼šå·¥ç¨‹ä¸å®è·µ (è½åœ°èƒ½åŠ›)</h3>
<p>æŒæ¡ä½¿ç”¨å¤§æ¨¡å‹æ„å»ºåº”ç”¨çš„æ ¸å¿ƒæŠ€èƒ½ï¼ŒåŒ…æ‹¬RAGã€æ™ºèƒ½ä½“å¼€å‘ç­‰ã€‚</p>
<p>1ï¼‰RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ï¼šç†è§£RAGæ¶æ„ï¼Œå­¦ä¹ ä½¿ç”¨å‘é‡æ•°æ®åº“ï¼ˆå¦‚FAISSã€ChromaDBï¼‰ï¼Œæ„å»ºçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿã€‚</p>
<p>å®è·µé¡¹ç›®ï¼šæ­å»ºä¸€ä¸ªå¤§æ¨¡å‹é—®ç­”ç³»ç»Ÿï¼ˆé˜¿é‡Œäº‘ACPåŸ¹è®­å®è·µé¡¹ç›®ï¼‰ã€‚</p>
<p>2ï¼‰AIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰å¼€å‘ï¼šç”¨LangChainæ„å»ºä¸€ä¸ªèƒ½è”ç½‘æœç´¢çš„æ™ºèƒ½ä½“ã€‚åœ¨Cozeæˆ–Difyä¸Šæ­å»ºä¸€ä¸ªå¤šæ¨¡æ€å·¥ä½œæµåº”ç”¨ã€‚å®Œæˆå·¥å…·è°ƒç”¨ï¼Œè®°å¿†æœºåˆ¶ã€‚</p>
<p>å®è·µé¡¹ç›®ï¼šç»“åˆä¸šåŠ¡åœºæ™¯æ„å»ºä¸€ä¸ªAIæ™ºèƒ½ä½“åº”ç”¨ã€‚</p>
<h3 data-id="heading-20">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç«å±±å¼•æ“Data Agentèµ‹èƒ½é‡‘èè¡Œä¸šï¼Œæ‰“é€ æ™ºèƒ½æŠ•é¡¾ä¸ç²¾å‡†è¥é”€æ–°èŒƒå¼]]></title>    <link>https://juejin.cn/post/7574625040659857458</link>    <guid>https://juejin.cn/post/7574625040659857458</guid>    <pubDate>2025-11-20T07:54:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574625040659857458" data-draft-id="7574621075322748991" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç«å±±å¼•æ“Data Agentèµ‹èƒ½é‡‘èè¡Œä¸šï¼Œæ‰“é€ æ™ºèƒ½æŠ•é¡¾ä¸ç²¾å‡†è¥é”€æ–°èŒƒå¼"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-11-20T07:54:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°"/> <meta itemprop="url" content="https://juejin.cn/user/2159881542179624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç«å±±å¼•æ“Data Agentèµ‹èƒ½é‡‘èè¡Œä¸šï¼Œæ‰“é€ æ™ºèƒ½æŠ•é¡¾ä¸ç²¾å‡†è¥é”€æ–°èŒƒå¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2159881542179624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:54:43.000Z" title="Thu Nov 20 2025 07:54:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿‘æ—¥ä¸¾åŠçš„å¹³å®‰å¯¿é™©ç¬¬äºŒå±ŠAIGCå˜‰å¹´åâ€œæ™ºé¢†æœªæ¥Â·AIèµ‹èƒ½é‡‘èâ€æ´»åŠ¨ä¸Šï¼Œç«å±±å¼•æ“æ•°æ™ºä¸“å®¶æå‡ºï¼Œä¼ä¸šæ­£ä»â€œæ•°æ®é©±åŠ¨â€è¿ˆå‘â€œè®¤çŸ¥é©±åŠ¨â€çš„æ–°æ—¶ä»£ã€‚è¿™ä¸€è½¬å‹çš„æ ¸å¿ƒåœ¨äºæ„å»ºèƒ½å¤Ÿæ²‰æ·€é›†ä½“æ™ºæ…§çš„â€œä¼ä¸šçº§è®¤çŸ¥å¼•æ“â€ï¼Œå…¶ä¸ä»…æ˜¯æŠ€æœ¯è·ƒè¿ï¼Œæ›´è¦æ±‚ä¼ä¸šé‡å¡‘ä¸æ•°æ®çš„å…³ç³»ï¼šè´¯é€šå†…å¤–éƒ¨å¤šæºæ•°æ®ã€ç®€åŒ–äººæœºäº¤äº’ä»¥å®ç°æ•æ·åˆ†æï¼Œå¹¶å°†ä¸“å®¶ç»éªŒè½¬åŒ–ä¸ºå¯å¤ç”¨çš„æ•°å­—èµ„äº§ï¼Œä»è€ŒåŠ é€Ÿä»æ´å¯Ÿåˆ°è¡ŒåŠ¨çš„é—­ç¯ã€‚</p>
<p>ä¸ºåº”å¯¹è¿™ä¸€è¶‹åŠ¿ï¼Œç«å±±å¼•æ“æ­£å¼æ¨å‡ºæ•°æ®æ™ºèƒ½ä½“Data Agentï¼Œå®šä½ä¸ºæ–°ä¸€ä»£ä¼ä¸šçº§AIæ•°å­—ä¸“å®¶ã€‚è¯¥äº§å“æ—¨åœ¨é€šè¿‡æ·±åº¦æ•´åˆä¼ä¸šæ•°æ®èµ„äº§ï¼Œå…·å¤‡ä¸»åŠ¨æ€è€ƒã€åˆ†æä¸è¡ŒåŠ¨èƒ½åŠ›ï¼ŒåŠ©åŠ›ç»„ç»‡æ„å»ºå¯è‡ªä¸»è¿›åŒ–çš„â€œæ•°æ®å¤§è„‘â€ã€‚å…¶æŠ€æœ¯æ¶æ„é‡‡ç”¨â€œPlan+Reactâ€åŒé˜¶æ®µæ¨¡å¼ï¼Œå…ˆé€šè¿‡æ„å›¾è¯†åˆ«ä¸ä¸Šä¸‹æ–‡è¡¥å…¨ç”Ÿæˆç»“æ„åŒ–æ‰§è¡Œè®¡åˆ’ï¼Œå†è°ƒåº¦å¤šå·¥å…·å®Œæˆæ·±åº¦åˆ†æï¼Œå½¢æˆå†³ç­–é—­ç¯ã€‚</p>
<p>ç«å±±å¼•æ“ç›®å‰æ¨å‡ºçš„Data Agentçš„æ ¸å¿ƒèƒ½åŠ›èšç„¦ä¸¤å¤§åœºæ™¯ã€‚å…¶ä¸€æ˜¯â€œæ™ºèƒ½åˆ†æAgentâ€ï¼Œå®ç°â€œæé—®å³ç”Ÿäº§â€çš„æ•°æ®æ¶ˆè´¹æ–°æ¨¡å¼ã€‚åœ¨é‡‘èé¢†åŸŸï¼Œè¯åˆ¸å…¬å¸ä¸é“¶è¡Œç”¨æˆ·å¯é€šè¿‡è‡ªç„¶è¯­è¨€äº¤äº’ï¼Œå¿«é€Ÿç”Ÿæˆç»è¥å…¨æ™¯æŠ¥å‘Šæˆ–ç”¨æˆ·è¡Œä¸ºæ´å¯Ÿåˆ†æã€‚ä¾‹å¦‚ï¼Œé¢å¯¹è¯åˆ¸ä¸šåŠ¡æ•°æ®åˆ†æ•£ã€ææ•°æµç¨‹ç¹ççš„ç—›ç‚¹ï¼Œè¯¥Agentèƒ½å°†æ ¸å¿ƒä¸šåŠ¡åˆ†ææ•ˆç‡æå‡90%ï¼Œå¸®åŠ©å›¢é˜Ÿç²¾å‡†è¯†åˆ«è–„å¼±ç¯èŠ‚ã€‚å…¶äºŒæ˜¯â€œæ™ºèƒ½è¥é”€Agentâ€ï¼Œä¾æ‰˜â€œä¸€å®¢ä¸€ç­–â€çš„è¶…ä¸ªæ€§åŒ–æœåŠ¡èƒ½åŠ›ï¼ŒåŠ¨æ€èåˆå®¢æˆ·å±æ€§ã€è¡Œä¸ºä¸äº¤æ˜“æ•°æ®ï¼Œçªç ´ä¼ ç»Ÿç²—æ”¾æ ‡ç­¾é™åˆ¶ã€‚åœ¨é‡‘èæŠ•é¡¾åœºæ™¯ä¸­ï¼Œè¯¥Agentå¯å®æ—¶è¿½è¸ªå¸‚åœºå¼‚åŠ¨ï¼Œä¸ºæŠ•èµ„è€…æä¾›å¤šç»´åº¦åˆ†æï¼Œè¾…åŠ©èµ„äº§é…ç½®å†³ç­–ï¼›åœ¨ç²¾å‡†è¥é”€ä¸­ï¼Œåˆ™é€šè¿‡æ·±åº¦æŒ–æ˜ç”¨æˆ·æ½œåœ¨éœ€æ±‚ï¼ŒåŠ©åŠ›æœºæ„æ‰“é€ å·®å¼‚åŒ–æœåŠ¡ä½“ç³»ï¼Œæå‡å®¢æˆ·ç²˜æ€§ã€‚</p>
<p>ç«å±±å¼•æ“Data Agentå·²åœ¨å¤šä¸ªè¡Œä¸šè½åœ°éªŒè¯ï¼Œåœ¨æ™ºèƒ½è¥é”€é¢†åŸŸï¼Œå…¶â€œä¸€å®¢ä¸€ç­–â€å¼•æ“ä½¿æŸå®¢æˆ·åœ¨è¥é”€åœºæ™¯ç‚¹å‡»ç‡æå‡30%ã€æŠ•èµ„å›æŠ¥ç‡æé«˜80%ï¼›åœ¨æŸå®¢æˆ·æœåŠ¡åœºæ™¯ä¸­ï¼Œæ²Ÿé€šè½®æ¬¡å‡å°‘é€¾70%ï¼Œæ–°äººåŸ¹è®­å‘¨æœŸä»ä¸€ä¸ªæœˆå‹ç¼©è‡³ä¸ƒå¤©ã€‚æ­¤å¤–ï¼Œè¯¥äº§å“é‡‡ç”¨ä¸å¤§æ¨¡å‹åº•åº§è§£è€¦çš„è®¾è®¡ï¼Œå…¼é¡¾æŠ€æœ¯è¿›åŒ–ä¸å®‰å…¨æ€§ï¼Œé€šè¿‡å·¥ç¨‹åº”ç”¨ä¸å°æ¨¡å‹æ§åˆ¶è¾“å‡ºå¹»è§‰ï¼Œç¡®ä¿ä¸šåŠ¡å†³ç­–çš„å¯é æ€§ã€‚</p>
<p>ç«å±±å¼•æ“å¼ºè°ƒï¼Œè¿ˆå‘è®¤çŸ¥é©±åŠ¨æ˜¯ä¸€é¡¹ç³»ç»Ÿæ€§å·¥ç¨‹ï¼Œä¼ä¸šéœ€åšæŒé•¿æœŸä¸»ä¹‰ï¼Œé€‰æ‹©å…·å¤‡å…±åŒè§£é¢˜èƒ½åŠ›çš„æˆ˜ç•¥ä¼™ä¼´ã€‚æœªæ¥ï¼ŒData Agentå°†æŒç»­å‘é¢„æµ‹æ€§ä¸æ¨¡æ‹Ÿä»¿çœŸèƒ½åŠ›æ¼”è¿›ï¼Œæ·±åŒ–åœ¨å¤æ‚å†³ç­–åœºæ™¯çš„åº”ç”¨ï¼Œä¸ºé‡‘èã€åˆ¶é€ ã€åŒ»ç–—ç­‰é¢†åŸŸæä¾›å¯æŒç»­å¢é•¿çš„æ™ºèƒ½å¼•æ“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥ç¨‹å¸ˆå­¦AIä¹‹ç¬¬äºŒç¯‡ï¼šAIå¤§æ¨¡å‹vsæ•°å­¦ç†è®º]]></title>    <link>https://juejin.cn/post/7574581079627202566</link>    <guid>https://juejin.cn/post/7574581079627202566</guid>    <pubDate>2025-11-20T07:58:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574581079627202566" data-draft-id="7574581079627186182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥ç¨‹å¸ˆå­¦AIä¹‹ç¬¬äºŒç¯‡ï¼šAIå¤§æ¨¡å‹vsæ•°å­¦ç†è®º"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-20T07:58:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥ç¨‹å¸ˆå­¦AIä¹‹ç¬¬äºŒç¯‡ï¼šAIå¤§æ¨¡å‹vsæ•°å­¦ç†è®º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T07:58:16.000Z" title="Thu Nov 20 2025 07:58:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>ä¸Šä¸€ç¯‡æˆ‘ä»¬æ¢³ç†äº†å¤§æ¨¡å‹çš„åŸºæœ¬è„‰ç»œï¼Œå¹¶åˆ¶å®šäº†å­¦ä¹ è®¡åˆ’ï¼šé˜¶æ®µä¸€æåˆ°æ•°å­¦çŸ¥è¯†æ˜¯ç†è§£å¤§æ¨¡å‹åŸç†çš„å¿…å¤‡å†…åŠŸï¼Œå› æ­¤æœ¬ç« ä¸»è¦å›é¡¾ä¸‹å¤§å­¦å’Œç ”ç©¶ç”ŸæœŸé—´çº¿æ€§ä»£æ•°ã€æ¦‚ç‡è®ºã€å¾®ç§¯åˆ†ã€ä¿¡æ¯è®ºç›¸å…³çš„æ•°å­¦çŸ¥è¯†ã€‚æœ¬æ–‡ä¸»è¦å›ç­”å‡ ä¸ªé—®é¢˜ï¼š</p>
<p>Â  Â  1ï¼‰whyï¼šä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹ æ•°å­¦çŸ¥è¯†ï¼Ÿ</p>
<p>Â  Â  2ï¼‰whatï¼šå¤§æ¨¡å‹å’Œå“ªäº›æ•°å­¦çŸ¥è¯†ç›¸å…³ï¼Ÿ</p>
<p>Â  Â  3ï¼‰howï¼šå¦‚ä½•å­¦ä¹ è¿™äº›æ•°å­¦çŸ¥è¯†ï¼Ÿ</p>
<p>Â  Â  å¦‚æ‚¨å¯¹ä¸Šé¢é—®é¢˜æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å…³æ³¨ï¼Œå­¦ä¹ è®¨è®ºã€‚</p>
<h2 data-id="heading-0">1.ä¸ºä»€ä¹ˆéœ€è¦æ•°å­¦çŸ¥è¯†ï¼Ÿwhy</h2>
<p>Â  Â  è®¸å¤šå·¥ç¨‹å¸ˆå¯èƒ½é—®ï¼šæ—¢ç„¶ç°åœ¨æœ‰è¿™ä¹ˆå¤šé«˜çº§æ¡†æ¶ï¼ˆTensorFlow, PyTorchï¼‰ï¼ŒAPIè°ƒç”¨é‚£ä¹ˆç®€å•ï¼Œå„ç§æˆç†Ÿæ¨¡å‹å”¾æ‰‹å¯å¾—ï¼Œçœ‹èµ·æ¥å’Œåšå·¥ç¨‹æ²¡å•¥å¤ªå¤§åŒºåˆ«ï¼Œæˆ‘ä¸ºä»€ä¹ˆè¿˜éœ€è¦å»å•ƒé‚£äº›è‰°æ·±çš„æ•°å­¦ç†è®ºçŸ¥è¯†ï¼Ÿå…¶å®æœ¬è´¨ä¸Šå–å†³äºä½ åˆ°åº•æ˜¯æƒ³æˆä¸ºä»…ä»…ä¼šä½¿ç”¨å¤§æ¨¡å‹çš„â€œæŠ€å·¥â€ï¼Œè¿˜æ˜¯å¸Œæœ›æŒæ¡å¤§æ¨¡å‹å·¥ä½œåŸç†åŠæ¨¡å‹ä¼˜åŒ–æ–¹æ¡ˆï¼Œæˆä¸ºè§£å†³å¤æ‚åœºæ™¯é—®é¢˜çš„AIä¸“å®¶ã€‚</p>
<p>Â  Â  ä¸çŸ¥ä½ æ˜¯å¦å›°æƒ‘ï¼šé˜…è¯»äº†æ— æ•°ä»‹ç»transformeråŸç†çš„åšå®¢è§†é¢‘ä¾ç„¶ä¸€å¤´é›¾æ°´ï¼štransformeråŸç†ã€è‡ªæ³¨æ„åŠ›å·¥ä½œæœºåˆ¶æ˜¯æ€æ ·ï¼ŸQã€Kã€Vä¸‰ä¸ªçŸ©é˜µä½œç”¨æ˜¯æ€æ ·çš„ï¼Ÿæ·±åº¦ç†è§£æ•°å­¦ç†è®ºï¼Œä½ å°†ä»ä¸€ä¸ªä»…ä»…èƒ½â€œä½¿ç”¨â€å·¥å…·çš„â€œæŠ€å·¥â€å·¥ç¨‹å¸ˆï¼Œå‡çº§ä¸ºèƒ½å¤Ÿâ€œåˆ›é€ â€ã€â€œä¼˜åŒ–â€å’Œâ€œè§£å†³å¤æ‚é—®é¢˜â€çš„â€œä¸“å®¶â€ï¼Œè®©ä½ ä»è¢«åŠ¨çš„å·¥å…·ä½¿ç”¨è€…ï¼Œå˜ä¸ºä¸»åŠ¨çš„é—®é¢˜è§£å†³è€…å’ŒæŠ€æœ¯åˆ›é€ è€…ã€‚æ•°å­¦ç†è®ºæ˜¯AIå¤§æ¨¡å‹æœ€æ ¹æœ¬ã€æœ€å¼ºå¤§çš„â€œè§£å†³é—®é¢˜çš„è¯­è¨€â€ï¼Œè¿™æ˜¯åœ¨AIé¢†åŸŸä¿æŒé•¿æœŸç«äº‰åŠ›çš„å…³é”®ã€‚</p>






























<table><thead><tr><th/><th/><th/></tr></thead><tbody><tr><td>å·¥ç¨‹å¸ˆçº§åˆ«</td><td>å¯¹æ•°å­¦çš„ä¾èµ–</td><td>èƒ½åŠ›èŒƒå›´</td></tr><tr><td>åˆçº§/åº”ç”¨å‹</td><td>ä½ï¼šä¼šè°ƒç”¨ APIï¼Œä½¿ç”¨ç°æˆæ¨¡å‹è¿›è¡Œå¾®è°ƒã€‚</td><td>è§£å†³æ ‡å‡†é—®é¢˜ï¼Œé«˜åº¦ä¾èµ–ç°æœ‰ç”Ÿæ€ã€‚</td></tr><tr><td>ä¸­çº§/ä¼˜åŒ–å‹</td><td>ä¸­ï¼šç†è§£æ ¸å¿ƒæ¦‚å¿µï¼Œèƒ½è¿›è¡Œæœ‰æ•ˆè°ƒè¯•å’Œéƒ¨ç½²ä¼˜åŒ–ã€‚</td><td>è§£å†³å¤§å¤šæ•°å·¥ä¸šé—®é¢˜ï¼Œæ˜¯å›¢é˜Ÿçš„ä¸­åšåŠ›é‡ã€‚</td></tr><tr><td>é«˜çº§/ä¸“å®¶å‹</td><td>é«˜ï¼šæ·±åº¦ç†è§£åŸç†ï¼Œèƒ½è®¾è®¡æ–°ç»“æ„ï¼Œè§£å†³å¤æ‚ã€æ–°é¢–é—®é¢˜ã€‚</td><td>æŠ€æœ¯é¢†å¯¼è€…ï¼Œèƒ½å¤Ÿå®šä¹‰æ–¹å‘ã€æ”»å…‹ç“¶é¢ˆã€æ‰“é€ æ ¸å¿ƒç«äº‰åŠ›ã€‚</td></tr></tbody></table>
<p>Â  Â  å¯¹äºå·¥ç¨‹å¸ˆè€Œè¨€ï¼Œç†è§£AIå¤§æ¨¡å‹èƒŒåçš„æ•°å­¦ç»éå­¦æœ¯ç‚«è€€ï¼Œè€Œæ˜¯å®å®åœ¨åœ¨çš„ç”Ÿäº§åŠ›ã€ç«äº‰åŠ›å’ŒèŒä¸šç”Ÿæ¶¯çš„æŠ¤åŸæ²³ã€‚å¯¹å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œæ•°å­¦ç†è®ºä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯é€šå¾€æ›´é«˜é˜¶å·¥ç¨‹èƒ½åŠ›çš„â€œæ¡¥æ¢â€ã€‚ä»¥ä¸‹æ˜¯å…·ä½“åŸå› ï¼š</p>
<p>Â  Â  1ï¼‰é—®é¢˜è¯Šæ–­ä¸è°ƒè¯•ï¼šä»â€œçŒœè°œâ€åˆ°â€œç²¾å‡†æ‰‹æœ¯â€ï¼Œå½“æ¨¡å‹æ•ˆæœä¸ä½³ã€å‡ºç°è¯¡å¼‚è¡Œä¸ºæˆ–è®­ç»ƒå¤±è´¥æ—¶ï¼Œä¸ç†è§£æ•°å­¦çš„å·¥ç¨‹å¸ˆåªèƒ½è¿›è¡Œâ€œç›²è°ƒâ€ã€‚</p>
<p>Â  Â  â¢Â ä¸æ‡‚æ•°å­¦çš„è°ƒè¯•ï¼šç›²ç›®è°ƒæ•´è¶…å‚æ•°ï¼ˆå¦‚å­¦ä¹ ç‡ï¼‰ã€å°è¯•ä¸åŒçš„ä¼˜åŒ–å™¨ã€ç›²ç›®å¢åŠ æ•°æ®æˆ–å±‚æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹æ•ˆç‡æä½ï¼Œå¦‚åŒåœ¨é»‘æš—ä¸­æ‘¸ç´¢ï¼Œä¸¥é‡ä¾èµ–ç»éªŒå’Œè¿æ°”ã€‚</p>
<p>Â  Â  â¢Â æ‡‚æ•°å­¦çš„è°ƒè¯•ï¼šèƒ½å¤Ÿæ ¹æ®é—®é¢˜çš„æ•°å­¦æœ¬è´¨ï¼Œæå‡ºå‡è®¾å¹¶ç²¾å‡†åœ°éªŒè¯å’Œä¿®å¤ï¼Œæå¤§ç¼©çŸ­è°ƒè¯•å‘¨æœŸï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚çœ‹åˆ°æŸå¤±æ›²çº¿ä¸ä¸‹é™ï¼Œèƒ½ç«‹åˆ»è”æƒ³åˆ°å¯èƒ½æ˜¯æ¢¯åº¦æ¶ˆå¤±ï¼ˆå¯¼æ•°é“¾å¼æ³•åˆ™ä¸­æ–­ï¼‰ã€å­¦ä¹ ç‡è¿‡é«˜ï¼ˆæ¢¯åº¦ä¸‹é™åŸç†ï¼‰æˆ–æ•°æ®è¾“å…¥æœ‰é—®é¢˜ã€‚é‡åˆ°æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œèƒ½æ·±åˆ»ç†è§£ Dropoutã€æƒé‡è¡°å‡ï¼ˆL2æ­£åˆ™åŒ–ï¼‰ä¸ºä½•èƒ½ workï¼Œè€Œä¸æ˜¯ä»…ä»…æŠŠå®ƒä»¬å½“ä½œä¸€ä¸ªç¥å¥‡çš„â€œå¼€å…³â€ã€‚</p>
<p>Â  Â  2ï¼‰ä¼˜åŒ–ä¸æ•ˆç‡ï¼šé™ä½æˆæœ¬ï¼Œæå‡æ€§èƒ½ã€‚å¤§æ¨¡å‹çš„è®­ç»ƒå’Œéƒ¨ç½²æˆæœ¬æå…¶é«˜æ˜‚ã€‚æ•°å­¦çŸ¥è¯†æ˜¯è¿›è¡Œä¼˜åŒ–çš„æ ¹æœ¬ã€‚</p>
<p>Â  Â  â¢Â è®¡ç®—ä¼˜åŒ–ï¼šç†è§£çŸ©é˜µè¿ç®—ï¼ˆçº¿æ€§ä»£æ•°ï¼‰å’Œè‡ªåŠ¨å¾®åˆ†ï¼ˆå¾®ç§¯åˆ†ï¼‰çš„åŸç†ï¼Œå¯ä»¥å¸®åŠ©ä½ å†™å‡ºæ›´é«˜æ•ˆã€ç¡¬ä»¶åˆ©ç”¨ç‡æ›´é«˜çš„ä»£ç ï¼Œå¦‚ä¼˜åŒ–å¼ é‡æ“ä½œã€åˆ©ç”¨å¹¿æ’­æœºåˆ¶ç­‰ã€‚</p>
<p>Â  Â  â¢Â æ¨¡å‹å‹ç¼©ä¸é‡åŒ–ï¼šè¦å°†å¤§æ¨¡å‹éƒ¨ç½²åˆ°è¾¹ç¼˜è®¾å¤‡ï¼Œéœ€è¦è¿›è¡Œå‰ªæã€çŸ¥è¯†è’¸é¦ã€é‡åŒ–ç­‰æŠ€æœ¯ã€‚è¿™äº›æŠ€æœ¯çš„èƒŒåæ˜¯æ¦‚ç‡è®ºã€ä¿¡æ¯è®ºå’Œä¼˜åŒ–ç†è®ºã€‚ä¾‹å¦‚ï¼šå‰ªæä¸ºä»€ä¹ˆä¸èƒ½ç®€å•åœ°å‰ªæ‰æƒé‡å°çš„å‚æ•°ï¼Ÿå› ä¸ºéœ€è¦ç†è§£æµ·æ£®çŸ©é˜µåŠå…¶åœ¨æŸå¤±å‡½æ•°ä¸­çš„æ„ä¹‰ï¼ˆäºŒé˜¶ä¼˜åŒ–ï¼‰ã€‚é‡åŒ–çš„æœ¬è´¨æ˜¯åœ¨ä¿æŒæ•°æ®åˆ†å¸ƒï¼ˆæ¦‚ç‡è®ºï¼‰çš„åŒæ—¶å‡å°‘ä¿¡æ¯ç†µï¼ˆä¿¡æ¯è®ºï¼‰ã€‚</p>
<p>Â  Â  â¢Â èµ„æºç®¡ç†ï¼šç†è§£è®­ç»ƒè¿‡ç¨‹ä¸­çš„å†…å­˜å ç”¨ï¼ˆä¸»è¦æ˜¯æ¨¡å‹å‚æ•°å’Œæ¿€æ´»å‡½æ•°çš„ä¸­é—´ç»“æœï¼Œå³å¼ é‡ï¼‰ï¼Œèƒ½æ›´å¥½åœ°è¿›è¡Œæ‰¹æ¬¡ç®¡ç†ã€æ¨¡å‹å¹¶è¡Œå’Œæ•°æ®å¹¶è¡Œç­–ç•¥çš„é€‰æ‹©ã€‚</p>
<p>Â  Â Â 3ï¼‰é€‚é…ä¸åˆ›æ–°ï¼šè§£å†³å‰æ‰€æœªè§çš„é—®é¢˜ï¼Œæ•°å­¦æ˜¯ä½ çš„è®¾è®¡å·¥å…·ç®±ã€‚å®ƒèµ‹äºˆäº†ä½ æ‰“ç ´â€œæ‹¿æ¥ä¸»ä¹‰â€ã€åˆ›é€ æ€§åœ°è§£å†³å…¨æ–°é—®é¢˜çš„èƒ½åŠ›ã€‚</p>
<p>Â  Â  â¢Â å®šåˆ¶åŒ–æ¨¡å‹ç»“æ„ï¼šå½“ä½ éœ€è¦ä¸ºä¸€ä¸ªç‰¹å®šä»»åŠ¡ï¼ˆå¦‚å¤„ç†å›¾ç»“æ„æ•°æ®ã€æ—¶é—´åºåˆ—æ•°æ®ï¼‰ä¿®æ”¹æˆ–è®¾è®¡ä¸€ä¸ªæ–°çš„æ¨¡å‹æ¨¡å—æ—¶ï¼Œä½ å¿…é¡»æ·±åˆ»ç†è§£æ³¨æ„åŠ›æœºåˆ¶ï¼ˆç¼©æ”¾ç‚¹ç§¯ã€QKVå˜æ¢ï¼‰ã€å¾ªç¯ç½‘ç»œï¼ˆæ¢¯åº¦æµè®¾è®¡ï¼‰ç­‰èƒŒåçš„æ•°å­¦ï¼Œæ‰èƒ½ç¡®ä¿ä½ çš„è®¾è®¡æ˜¯æœ‰æ•ˆçš„ã€å¯è®­ç»ƒçš„ã€‚</p>
<p>Â  Â  â¢Â é¢†åŸŸé€‚é…ï¼šåœ¨åŒ»ç–—ã€é‡‘èã€ç§‘å­¦è®¡ç®—ç­‰é¢†åŸŸï¼Œæ•°æ®æ¨¡å¼å’ŒæŸå¤±å‡½æ•°å¯èƒ½éå¸¸ç‰¹æ®Šã€‚ä½ éœ€è¦æ ¹æ®é¢†åŸŸçŸ¥è¯†è®¾è®¡åˆé€‚çš„æŸå¤±å‡½æ•°ï¼ˆéœ€è¦æ¦‚ç‡è®ºå’Œå¾®ç§¯åˆ†ï¼‰å’Œè¯„ä¼°æŒ‡æ ‡ï¼Œè€Œä¸æ˜¯ç®€å•åœ°è°ƒç”¨äº¤å‰ç†µæŸå¤±ã€‚</p>
<h2 data-id="heading-1">2.å“ªäº›æ•°å­¦ç†è®ºä¸AIç›¸å…³ï¼Ÿwhat</h2>
<p>Â  Â  å‰ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg5MzIzNDMwMg%3D%3D%26mid%3D2247484233%26idx%3D1%26sn%3Dbd6943f74899833088ea5276e536abfa%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg5MzIzNDMwMg==&amp;mid=2247484233&amp;idx=1&amp;sn=bd6943f74899833088ea5276e536abfa&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å·¥ç¨‹å¸ˆå­¦AIä¹‹èµ·å§‹ç¯‡ï¼šç†è®ºä¸å®è·µå­¦ä¹ è®¡åˆ’</a>æåˆ°å¤§æ¨¡å‹çš„åŸç†å»ºç«‹åœ¨ä¸‰å¤§æ•°å­¦åŸºç¡€ä¹‹ä¸Šï¼šçº¿æ€§ä»£æ•°ã€å¾®ç§¯åˆ†å’Œæ¦‚ç‡è®ºã€‚çº¿æ€§ä»£æ•°å¤„ç†æ•°æ®è¡¨ç¤ºï¼ˆçº¿æ€§ä»£æ•°é¦–å…ˆå°†ä½ çš„æ–‡å­—ç­‰å¤šæ¨¡æ€ä¿¡æ¯è½¬åŒ–ä¸ºå‘é‡ï¼‰ï¼Œå¾®ç§¯åˆ†ä¼˜åŒ–æ¨¡å‹å‚æ•°ï¼ˆå¾®ç§¯åˆ†é€šè¿‡å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­å¤„ç†è¿™äº›å‘é‡ï¼‰ï¼Œæ¦‚ç‡è®ºä¸ä¿¡æ¯è®ºæä¾›ç†è®ºè§£é‡Šå’Œè¯„ä¼°æ ‡å‡†ï¼ˆæ¦‚ç‡è®ºå†³å®šæœ€å¯èƒ½çš„å›å¤ï¼‰ï¼Œä¸‰è€…ç¼ºä¸€ä¸å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd2c7cced6cc4e69bdc957ce739a5269~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764230296&amp;x-signature=EFGIWcAmkiIcIkL%2BriSq4m2v288%3D" alt="" loading="lazy"/></p>
<p>Â  Â  è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªæ¯”å–»æ¥æ€»ç»“ï¼š</p>
<p>Â  Â  1ï¼‰çº¿æ€§ä»£æ•°æ˜¯ä¹é«˜ç§¯æœ¨ï¼šå®ƒæä¾›äº†æ„å»ºæ¨¡å‹çš„åŸºæœ¬æ¨¡å—ï¼ˆå‘é‡ã€çŸ©é˜µï¼‰å’Œç»„è£…æ–¹å¼ï¼ˆçŸ©é˜µä¹˜æ³•ï¼‰ã€‚</p>
<p>Â  Â  2ï¼‰å¾®ç§¯åˆ†æ˜¯è¯´æ˜ä¹¦å’Œä¿®æ­£å·¥å…·ï¼šå®ƒå‘Šè¯‰æˆ‘ä»¬å½“å‰æ­å»ºçš„æ¨¡å‹å“ªé‡Œä¸å¥½ï¼ˆè®¡ç®—æ¢¯åº¦ï¼‰ï¼Œä»¥åŠå¦‚ä½•è°ƒæ•´ç§¯æœ¨çš„ä½ç½®æ¥è®©å®ƒå˜å¾—æ›´å¥½ï¼ˆæ¢¯åº¦ä¸‹é™ï¼‰ã€‚</p>
<p>Â  Â  3ï¼‰æ¦‚ç‡è®ºä¸ä¿¡æ¯è®ºæ˜¯è®¾è®¡ç†å¿µå’Œè¯„ä¼°æ ‡å‡†ï¼šå®ƒå†³å®šäº†æ¨¡å‹åº”è¯¥å­¦ä¹ ä»€ä¹ˆæ ·çš„æ¨¡å¼ï¼ˆæ•°æ®åˆ†å¸ƒï¼‰ï¼Œä»¥åŠå¦‚ä½•è¡¡é‡æ¨¡å‹è¾“å‡ºçš„å¥½åï¼ˆäº¤å‰ç†µã€å›°æƒ‘åº¦ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8370a40e7434d56821bfa9ea6e16d4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764230296&amp;x-signature=4PnLUPwAaT%2BnnTBI0Qx9tVRibBU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 çº¿æ€§ä»£æ•°ï¼šå¤§æ¨¡å‹çš„æ•°æ®è¡¨ç¤ºï¼ˆå‘é‡/çŸ©é˜µè¿ç®—ï¼‰</h3>
<p>Â  Â  çº¿æ€§ä»£æ•°æ˜¯å¤„ç†é«˜ç»´æ•°æ®å’Œå¹¶è¡Œè®¡ç®—çš„è¯­è¨€ï¼ŒAIå¤§æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯åœ¨é«˜ç»´ç©ºé—´ä¸­è¿›è¡Œå„ç§å˜æ¢å’Œè¿ç®—ã€‚</p>
<h4 data-id="heading-3">2.1.1åŸºæœ¬æ¦‚å¿µ</h4>
<p>Â  Â  çº¿æ€§ä»£æ•°åŸºæœ¬æ¦‚å¿µï¼šæ ‡é‡ã€å‘é‡ã€çŸ©é˜µã€å¼ é‡ï¼š</p>
<p>Â  Â  1ï¼‰æ ‡é‡ï¼šä¸€ä¸ªæ•°å­—ï¼Œæ¯”å¦‚ä¸€ä¸ªç¥ç»å…ƒçš„åç½®ï¼ˆBiasï¼‰ã€‚</p>
<p>Â  Â  2ï¼‰å‘é‡ï¼šä¸€ç»´æ•°ç»„ï¼Œæ¯”å¦‚ä¸€ä¸ªè¯çš„è¯å‘é‡ï¼ˆWord Embeddingï¼‰æˆ–ä¸€ä¸ªç¥ç»å…ƒçš„æ‰€æœ‰è¾“å…¥ã€‚</p>
<p>Â  Â  3ï¼‰çŸ©é˜µï¼šäºŒç»´æ•°ç»„ï¼Œæ¯”å¦‚ä¸€å±‚ç¥ç»ç½‘ç»œçš„æ‰€æœ‰æƒé‡ï¼ˆWeightsï¼‰ã€‚</p>
<p>Â  Â  4ï¼‰å¼ é‡ï¼šå¤šç»´æ•°ç»„ï¼ˆé€šå¸¸ä¸‰ç»´åŠä»¥ä¸Šï¼‰ï¼Œæ˜¯å‘é‡å’ŒçŸ©é˜µçš„æ¨å¹¿ã€‚æ•´ä¸ªç¥ç»ç½‘ç»œçš„è¾“å…¥ã€è¾“å‡ºå’Œå‚æ•°éƒ½å¯ä»¥ç”¨å¼ é‡è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ‰¹æ¬¡çš„å›¾åƒæ•°æ®æ˜¯ [batch_size, height, width, channels] çš„4ç»´å¼ é‡ã€‚</p>
<h4 data-id="heading-4">2.1.2æ ¸å¿ƒè¿ç®—</h4>
<p>Â  Â  1ï¼‰çŸ©é˜µä¹˜æ³•ï¼šè¿™æ˜¯ç¥ç»ç½‘ç»œå‰å‘ä¼ æ’­çš„æ ¸å¿ƒã€‚ä¸€å±‚çš„è¾“å‡ºæ˜¯è¾“å‡º = æ¿€æ´»å‡½æ•°(è¾“å…¥ Ã— æƒé‡çŸ©é˜µ + åç½®)ã€‚çŸ©é˜µä¹˜æ³•é«˜æ•ˆåœ°å®ç°äº†æ‰€æœ‰ç¥ç»å…ƒè¾“å…¥çš„åŠ æƒæ±‚å’Œã€‚</p>
<p>Â  Â  2ï¼‰ç‚¹ç§¯ï¼šç‚¹ç§¯è¿ç®—åœ¨è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆSelfAttentionï¼‰ä¸­è‡³å…³é‡è¦ã€‚æŸ¥è¯¢ï¼ˆQueryï¼‰å‘é‡å’Œé”®ï¼ˆKeyï¼‰å‘é‡ä¹‹é—´çš„ç‚¹ç§¯è®¡ç®—äº†å®ƒä»¬çš„ç›¸ä¼¼åº¦ã€‚</p>
<h4 data-id="heading-5">2.1.3çº¿æ€§ä»£æ•°ï¼šå¤§æ¨¡å‹çš„æ•°æ®è¡¨è¾¾ä¸è¿ç®—è¯­è¨€</h4>
<p>Â  Â  çº¿æ€§ä»£æ•°æ˜¯å¤§æ¨¡å‹æœ€ç›´æ¥ã€æœ€è¡¨è±¡çš„æ•°å­¦è¯­è¨€ã€‚æ•´ä¸ªæ¨¡å‹æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç³»åˆ—å¤æ‚çš„çº¿æ€§ä»£æ•°è¿ç®—ï¼šé«˜ç»´å‘é‡å’ŒçŸ©é˜µè¿ç®—ã€‚ç®€å•æ¯”å–»ï¼šçº¿æ€§ä»£æ•°æä¾›äº†å¦‚ä½•ç”¨â€œæ•°å­—å—â€ï¼ˆå‘é‡å’ŒçŸ©é˜µï¼‰â€æ¥è¡¨ç¤ºå’Œæ“ä½œâ€œæ¦‚å¿µâ€çš„åŸºæœ¬è¯­æ³•ã€‚</p>
<p>Â  Â  1ï¼‰è¯åµŒå…¥ (Word Embedding)ï¼šæ¨¡å‹ä¸­çš„æ¯ä¸ªè¯ï¼ˆTokenï¼‰éƒ½è¢«è¡¨ç¤ºæˆä¸€ä¸ªé«˜ç»´å‘é‡ï¼ˆä¸€ä¸²æ•°å­—ï¼‰ã€‚è¿™ä¸ªå‘é‡ç©ºé—´ä¸­çš„å‡ ä½•å…³ç³»ï¼ˆå¦‚è·ç¦»ã€æ–¹å‘ï¼‰ç¼–ç äº†è¯è¯­çš„è¯­ä¹‰å’Œè¯­æ³•å…³ç³»ã€‚ä¾‹å¦‚ï¼Œâ€œå›½ç‹â€ - â€œç”·äººâ€ + â€œå¥³äººâ€ â‰ˆ â€œå¥³ç‹â€ã€‚</p>
<p>Â  Â  2ï¼‰æ¨¡å‹æœ¬èº«å°±æ˜¯å·¨å¤§çš„çŸ©é˜µï¼šç¥ç»ç½‘ç»œæ¯ä¸€å±‚çš„æƒé‡(Weights)å’Œåç½®(Biases)éƒ½æ˜¯å·¨å¤§çš„çŸ©é˜µã€‚æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹å°±æ˜¯åœ¨è°ƒæ•´è¿™äº›çŸ©é˜µä¸­çš„æ•°å€¼ã€‚</p>
<p>Â  Â  3ï¼‰å‰å‘ä¼ æ’­å°±æ˜¯çŸ©é˜µè®¡ç®—ï¼šæ•°æ®åœ¨ç½‘ç»œä¸­çš„ä¼ é€’ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è¾“å…¥å‘é‡ä¸æƒé‡çŸ©é˜µè¿›è¡ŒçŸ©é˜µä¹˜æ³•ï¼Œç„¶ååŠ ä¸Šåç½®ï¼Œå†é€šè¿‡ä¸€ä¸ªæ¿€æ´»å‡½æ•°ï¼ˆå¦‚ReLUï¼‰ã€‚</p>
<p>Â  Â  è¾“å‡º = Activation(æƒé‡ Â· è¾“å…¥ + åç½®)ã€‚</p>
<p>Â  Â  4ï¼‰æ³¨æ„åŠ›æœºåˆ¶ (Attention)ï¼šTransformerçš„æ ¸å¿ƒ-è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œå®Œå…¨ç”±æŸ¥è¯¢(Query)ã€é”®(Key)ã€å€¼(Value)ä¸‰ä¸ªçŸ©é˜µçš„è¿ç®—æ„æˆï¼ˆè®¡ç®—è¿‡ç¨‹æ¶‰åŠçŸ©é˜µä¹˜æ³•å’ŒSoftmaxï¼‰ã€‚è¯¦ç»†è§£è¯»æ¬¢è¿å…³æ³¨ï¼Œè§ä¸‹ä¸€ç¯‡æ–‡ç« ã€‚</p>
<p>2.2å¾®ç§¯åˆ†ï¼šä¼˜åŒ–æ¨¡å‹å‚æ•°ï¼ˆæŸå¤±å‡½æ•°/æ¢¯åº¦ï¼‰</p>
<h4 data-id="heading-6">2.2.1åŸºæœ¬æ¦‚å¿µ</h4>
<p>Â  Â  å¾®ç§¯åˆ†æ˜¯æ¨¡å‹å¦‚ä½•ä»æ•°æ®ä¸­â€œå­¦ä¹ â€çš„ç†è®ºåŸºç¡€ã€‚å®ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯å›ç­”ï¼šå¦‚ä½•è°ƒæ•´æ¨¡å‹å‚æ•°ï¼Œæ‰èƒ½è®©å®ƒè¡¨ç°å¾—æ›´å¥½ï¼Ÿ</p>
<p>Â  Â  1ï¼‰å¯¼æ•°ï¼šè¡¡é‡å‡½æ•°è¾“å‡ºéšè¾“å…¥å˜åŒ–çš„ç¬æ—¶é€Ÿç‡ã€‚åœ¨ä¸€å…ƒå‡½æ•°ä¸­ï¼Œæ˜¯æ–œç‡ã€‚</p>
<p>Â  Â  2ï¼‰æ¢¯åº¦ï¼šå¤šå…ƒå‡½æ•°çš„å¯¼æ•°æ¨å¹¿ã€‚å®ƒæ˜¯ä¸€ä¸ªå‘é‡ï¼ŒæŒ‡å‘å‡½æ•°å€¼å¢é•¿æœ€å¿«çš„æ–¹å‘ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼ŒæŸå¤±å‡½æ•° L(Î¸) çš„æ¢¯åº¦ âˆ‡L(Î¸)Â æŒ‡å‘äº†æŸå¤±å¢é•¿æœ€å¿«çš„æ–¹å‘ã€‚</p>
<p>Â  Â  3ï¼‰é“¾å¼æ³•åˆ™ï¼šç¥ç»ç½‘ç»œæ˜¯æ·±åº¦å¤åˆå‡½æ•°ï¼ˆL(g(f(x)))ï¼‰ã€‚é“¾å¼æ³•åˆ™å…è®¸æˆ‘ä»¬å°†æŸå¤±å‡½æ•°å¯¹æœ€åº•å±‚å‚æ•°çš„å¯¼æ•°ï¼Œä¸€å±‚ä¸€å±‚åœ°åå‘ä¼ æ’­å›å»ã€‚è¿™æ˜¯åå‘ä¼ æ’­ç®—æ³•çš„æ ¸å¿ƒã€‚</p>
<p>Â  Â  4ï¼‰æ¢¯åº¦ä¸‹é™ï¼šæ ¸å¿ƒæ€æƒ³ï¼šæ—¢ç„¶æ¢¯åº¦æŒ‡å‘æŸå¤±å¢é•¿çš„æ–¹å‘ï¼Œé‚£ä¹ˆå®ƒçš„åæ–¹å‘ -âˆ‡L(Î¸) å°±æ˜¯æŸå¤±ä¸‹é™æœ€å¿«çš„æ–¹å‘ã€‚æ›´æ–°è§„åˆ™ï¼šÎ¸_new = Î¸_old - learning_rate * âˆ‡L(Î¸_old)é€šè¿‡ä¸æ–­æ²¿è´Ÿæ¢¯åº¦æ–¹å‘å¾®å°åœ°æ›´æ–°å‚æ•° Î¸ï¼ŒæŸå¤±å‡½æ•°çš„å€¼ä¼šé€æ¸å‡å°ï¼Œæ¨¡å‹æ€§èƒ½é€æ­¥æå‡ã€‚</p>
<p>Â  Â  5ï¼‰åœ¨å¤§æ¨¡å‹ä¸­çš„åº”ç”¨ï¼šæ•´ä¸ªè®­ç»ƒè¿‡ç¨‹å°±æ˜¯åŸºäºæ¢¯åº¦ä¸‹é™åŠå…¶å˜ä½“ï¼ˆå¦‚Adamã€AdaGradï¼‰æ¥ä¼˜åŒ–æ•°ç™¾ä¸‡ç”šè‡³ä¸‡äº¿çº§çš„å‚æ•°ï¼Œæœ€å°åŒ–é¢„æµ‹æŸå¤±ã€‚</p>
<p>ç¯‡å¹…åŸå› è¿™é‡Œæš‚ä¸å±•å¼€ä»‹ç»ï¼Œåé¢å•ç‹¬ç« èŠ‚å­¦ä¹ å¾®ç§¯åˆ†ä¸å¤§æ¨¡å‹çš„å…³ç³»ã€‚</p>
<h4 data-id="heading-7">2.2.2å¾®ç§¯åˆ†ï¼šå¤§æ¨¡å‹â€œä¼˜åŒ–å¼•æ“â€</h4>
<p>Â  Â  å¾®ç§¯åˆ†æ˜¯è®©å¤§æ¨¡å‹èƒ½å¤Ÿå­¦ä¹ çš„å…³é”®ï¼Œå®ƒæŒ‡å¯¼æ¨¡å‹å¦‚ä½•ä»é”™è¯¯ä¸­æ”¹è¿›ã€‚æ ¸å¿ƒå…³ç³»ï¼šæ¢¯åº¦ä¸‹é™ä¸ä¼˜åŒ–</p>
<p>Â  Â  1ï¼‰åå‘ä¼ æ’­ (Backpropagation)ï¼šè¿™æ˜¯æ¨¡å‹å­¦ä¹ çš„æ ¸å¿ƒç®—æ³•ã€‚å®ƒé€šè¿‡é“¾å¼æ³•åˆ™ï¼Œä»è¾“å‡ºå±‚åå‘è®¡ç®—æŸå¤±å‡½æ•°å¯¹äºç½‘ç»œä¸­æ¯ä¸€ä¸ªå‚æ•°çš„æ¢¯åº¦ã€‚æ¢¯åº¦æ˜¯ä¸€ä¸ªå‘é‡ï¼ŒæŒ‡å‘æŸå¤±å‡½æ•°å¢é•¿æœ€å¿«çš„æ–¹å‘ã€‚</p>
<p>Â  Â  2ï¼‰æ¢¯åº¦ä¸‹é™ (Gradient Descent)ï¼šä¼˜åŒ–ç®—æ³•ï¼ˆå¦‚Adamï¼‰åˆ©ç”¨è®¡ç®—å‡ºçš„æ¢¯åº¦ï¼Œæ²¿ç€æ¢¯åº¦ç›¸åçš„æ–¹å‘ï¼ˆå³æŸå¤±ä¸‹é™æœ€å¿«çš„æ–¹å‘ï¼‰å¾®è°ƒæ‰€æœ‰å‚æ•°ï¼ˆé‚£äº›çŸ©é˜µä¸­çš„æ•°ï¼‰ï¼Œä»è€Œé€æ­¥é™ä½æŸå¤±ï¼Œä½¿æ¨¡å‹é¢„æµ‹æ›´å‡†ç¡®ã€‚</p>
<p>Â  Â  ç®€å•æ¯”å–»ï¼šå¾®ç§¯åˆ†æä¾›äº†â€œå¦‚ä½•è°ƒæ•´æ¨¡å‹å†…éƒ¨æ—‹é’®ï¼ˆå‚æ•°ï¼‰æ‰èƒ½è®©å®ƒè¡¨ç°å¾—æ›´å¥½â€çš„ç²¾ç¡®æŒ‡å¯¼æ‰‹å†Œã€‚</p>
<h3 data-id="heading-8">2.3æ¦‚ç‡è®ºä¸ä¿¡æ¯è®ºï¼šæ¨¡å‹è¯„ä¼°æ ‡å‡†ä¸â€œå†³ç­–ä¾æ®â€</h3>
<p>Â  Â  æ¦‚ç‡è®ºä¸ºAIæä¾›äº†åœ¨ä¸ç¡®å®šæ€§ä¸‹è¿›è¡Œæ¨ç†çš„æ¡†æ¶ï¼Œè€Œä¿¡æ¯è®ºåˆ™æä¾›äº†è¡¡é‡ä¿¡æ¯çš„æ–¹æ³•ã€‚ç¯‡å¹…åŸå› åé¢ç« èŠ‚å†è¿›è¡Œè¯¦ç»†æ‹†è§£æ¦‚ç‡è®ºåŸºç¡€çŸ¥è¯†åŠå…¶åœ¨å¤§æ¨¡å‹ä¸­çš„åº”ç”¨ã€‚</p>
<h4 data-id="heading-9">2.3.1æ¦‚ç‡è®º</h4>
<p>Â  Â  1ï¼‰åŸºæœ¬æ¦‚å¿µï¼šæ¦‚ç‡åˆ†å¸ƒã€æ¡ä»¶æ¦‚ç‡ã€è´å¶æ–¯å®šç†ã€‚</p>
<p>Â  Â  2ï¼‰æå¤§ä¼¼ç„¶ä¼°è®¡ï¼šå¾ˆå¤šæ¨¡å‹çš„è®­ç»ƒç›®æ ‡å¯ä»¥è§£é‡Šä¸ºâ€œæ‰¾åˆ°ä¸€ç»„å‚æ•°ï¼Œä½¿å¾—è§‚æµ‹åˆ°çš„æ•°æ®å‡ºç°çš„æ¦‚ç‡ï¼ˆä¼¼ç„¶åº¦ï¼‰æœ€å¤§â€ã€‚äº¤å‰ç†µæŸå¤±å‡½æ•°å°±æºäºMLEã€‚</p>
<p>Â  Â  3ï¼‰ç”Ÿæˆæ¨¡å‹ï¼šåƒGPTè¿™æ ·çš„è‡ªå›å½’æ¨¡å‹ï¼Œå…¶æœ¬è´¨æ˜¯å­¦ä¹ ä¸€ä¸ªæ•°æ®åˆ†å¸ƒ P(x)ã€‚å®ƒæ¯æ¬¡é¢„æµ‹ä¸‹ä¸€ä¸ªè¯ï¼Œå°±æ˜¯åœ¨è®¡ç®—æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ P(ä¸‹ä¸€ä¸ªè¯ | å·²ç”Ÿæˆçš„ä¸Šæ–‡)ã€‚</p>
<h4 data-id="heading-10">2.3.2ä¿¡æ¯è®º</h4>
<p>Â  Â  1ï¼‰ç†µï¼šè¡¡é‡ä¸€ä¸ªéšæœºå˜é‡çš„ä¸ç¡®å®šæ€§ã€‚ç†µè¶Šå¤§ï¼Œä¸ç¡®å®šæ€§è¶Šå¤§ã€‚</p>
<p>Â  Â  2ï¼‰äº¤å‰ç†µï¼šè¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ P (çœŸå®åˆ†å¸ƒ) å’Œ Q (æ¨¡å‹é¢„æµ‹åˆ†å¸ƒ) ä¹‹é—´çš„å·®å¼‚ã€‚å®ƒæ˜¯æœ€å¸¸ç”¨çš„æŸå¤±å‡½æ•°ã€‚å½“ P å’Œ Q å®Œå…¨ç›¸åŒæ—¶ï¼Œäº¤å‰ç†µæœ€å°ã€‚</p>
<p>Â  Â  3ï¼‰KLæ•£åº¦ï¼šè¡¡é‡ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ç¨‹åº¦ï¼Œä¸äº¤å‰ç†µç´§å¯†ç›¸å…³ã€‚</p>
<h4 data-id="heading-11">2.3.3æ¦‚ç‡è®ºï¼šæ¨¡å‹æ€è€ƒä¸å†³ç­–</h4>
<p>Â  Â  å¤§æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¦‚ç‡ç”Ÿæˆæ¨¡å‹ï¼Œå®ƒæ€»æ˜¯åœ¨è®¡ç®—â€œä»€ä¹ˆæœ€æœ‰å¯èƒ½å‡ºç°â€ã€‚æ¦‚ç‡è®ºå†³å®šäº†å¤§æ¨¡å‹çš„æ€ç»´æ–¹å¼ï¼ˆæ¦‚ç‡åˆ†å¸ƒä¸ç»Ÿè®¡ï¼‰å’Œæœ€ç»ˆç›®æ ‡ï¼Œæ¦‚ç‡è®ºå†³å®šäº†æ¨¡å‹å¦‚ä½•â€œæ€è€ƒâ€å’Œâ€œå†³ç­–â€</p>
<p>Â  Â  1ï¼‰è®­ç»ƒç›®æ ‡ï¼šé¢„è®­ç»ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯è‡ªç›‘ç£å­¦ä¹ ï¼Œå³æ ¹æ®ä¸Šæ–‡é¢„æµ‹ä¸‹ä¸€ä¸ªè¯çš„æ¦‚ç‡åˆ†å¸ƒã€‚P(ä¸‹ä¸€ä¸ªè¯ | ä¸Šæ–‡)ï¼Œè¿™å®Œå…¨æ˜¯ä¸€ä¸ªæ¦‚ç‡é—®é¢˜ã€‚</p>
<p>Â  Â  2ï¼‰æŸå¤±å‡½æ•°ï¼šè¯­è¨€æ¨¡å‹æ™®éä½¿ç”¨äº¤å‰ç†µæŸå¤±æ¥è¡¡é‡â€œé¢„æµ‹çš„æ¦‚ç‡åˆ†å¸ƒâ€ä¸â€œçœŸå®çš„one-hotåˆ†å¸ƒâ€ï¼ˆå®é™…çš„ä¸‹ä¸€ä¸ªè¯ï¼‰ä¹‹é—´çš„å·®è·ã€‚</p>
<pre><code class="hljs">æŸå¤±å‡½æ•°ä¸æ¦‚ç‡è®ºåŠå¾®ç§¯åˆ†å…³ç³»ï¼šæ¦‚ç‡è®ºå†³å®šäº†æŸå¤±å‡½æ•°â€œæ˜¯ä»€ä¹ˆâ€ï¼ˆå®ƒçš„å½¢å¼å’Œç›®çš„ï¼‰ï¼Œè€Œå¾®ç§¯åˆ†å†³å®šäº†æˆ‘ä»¬â€œå¦‚ä½•ä¼˜åŒ–â€å®ƒï¼ˆæ‰¾åˆ°ä½¿å…¶æœ€å°åŒ–çš„æ–¹æ³•ï¼‰ã€‚ç”¨ç±»æ¯”æ¥è§£é‡Šè¿™ç§å…³ç³»ï¼š1ï¼‰æ¦‚ç‡è®ºæ˜¯â€œç«‹æ³•è€…â€ï¼Œå®ƒåˆ¶å®šäº†æ³•å¾‹ï¼ˆæŸå¤±å‡½æ•°ï¼‰ï¼Œå®šä¹‰äº†ä»€ä¹ˆæ˜¯â€œå¥½â€ï¼ˆä½æŸå¤±ï¼‰å’Œâ€œåâ€ï¼ˆé«˜æŸå¤±ï¼‰ã€‚2ï¼‰å¾®ç§¯åˆ†æ˜¯â€œæ‰§æ³•è€…â€æˆ–â€œå·¥ç¨‹å¸ˆâ€ï¼Œå®ƒæä¾›äº†å·¥å…·ï¼ˆæ¢¯åº¦ä¸‹é™ï¼‰æ¥å°½å¯èƒ½åœ°è¾¾åˆ°â€œå¥½â€çš„çŠ¶æ€ï¼ˆæœ€å°åŒ–æŸå¤±ï¼‰ã€‚
</code></pre>
<p>Â  Â  3ï¼‰ç”Ÿæˆä¸é‡‡æ ·ï¼šæ¨¡å‹è¾“å‡ºä¸€ä¸ªè¯æ±‡è¡¨ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼Œé€šè¿‡é‡‡æ ·ï¼ˆå¦‚Top-pé‡‡æ ·ï¼‰æ¥é€‰æ‹©ä¸‹ä¸€ä¸ªè¯ï¼Œä»è€Œç”Ÿæˆæ–‡æœ¬ã€‚ç”Ÿæˆå°±æ˜¯åŸºäºæ¦‚ç‡é‡‡æ ·ï¼šå½“ä½ è®©æ¨¡å‹ç”Ÿæˆæ–‡æœ¬æ—¶ï¼Œå®ƒè®¡ç®—å‡ºè¯æ±‡è¡¨ä¸­æ‰€æœ‰è¯çš„æ¦‚ç‡åˆ†å¸ƒï¼Œç„¶åæ ¹æ®æŸç§ç­–ç•¥ï¼ˆå¦‚è´ªå¿ƒæœç´¢ã€æ ¸é‡‡æ ·ï¼‰ä»è¿™ä¸ªåˆ†å¸ƒä¸­é‡‡æ ·ä¸‹ä¸€ä¸ªè¯ã€‚è¿™å¼•å…¥äº†éšæœºæ€§å’Œåˆ›é€ æ€§ã€‚</p>
<p>Â  Â  4ï¼‰æ¶Œç°èƒ½åŠ›ï¼šæ€ç»´é“¾ (Chain-of-Thought)ç­‰æŠ€æœ¯å¯ä»¥çœ‹ä½œæ˜¯åœ¨å¼•å¯¼æ¨¡å‹ç”Ÿæˆä¸€ä¸ªé«˜æ¦‚ç‡çš„ã€é€»è¾‘æ­£ç¡®çš„æ¨ç†è·¯å¾„ã€‚</p>
<p>Â  Â  5ï¼‰æ¨¡å‹è¯„ä¼°ï¼šå›°æƒ‘åº¦æ˜¯è¯„ä¼°è¯­è¨€æ¨¡å‹å¥½åçš„å…³é”®æŒ‡æ ‡ï¼Œä½¿ç”¨å›°æƒ‘åº¦(Perplexity)ç­‰åŸºäºæ¦‚ç‡çš„æŒ‡æ ‡æ¥è¡¡é‡æ¨¡å‹æ€§èƒ½ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯äº¤å‰ç†µçš„æŒ‡æ•°å½¢å¼ã€‚å›°æƒ‘åº¦è¶Šä½ï¼Œæ¨¡å‹å¯¹ä¸‹ä¸€ä¸ªè¯çš„é¢„æµ‹è¶Šç¡®å®šï¼Œæ€§èƒ½è¶Šå¥½ã€‚Â </p>
<h2 data-id="heading-12">3.å­¦ä¹ è·¯å¾„ï¼šå¦‚ä½•å­¦ä¹ æ•°å­¦ç†è®ºï¼Ÿhow</h2>
<p>Â  Â Â ã€Šæ·±åº¦å­¦ä¹ ã€‹é‡Œé¢æåˆ°æŒæ¡æ·±åº¦å­¦ä¹ ç†è®ºçš„å­¦ä¹ æ¡†æ¶ä¹Ÿæåˆ°æ•°å­¦ç†è®ºçš„é‡è¦æ€§ã€‚å¦‚æœä½ æƒ³æ·±å…¥ç†è§£è¿™äº›æ¦‚å¿µå’Œç†è®ºï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºå­¦ä¹ ï¼š</p>
<p>Â  Â  1ï¼‰çº¿æ€§ä»£æ•° -&gt; æŒæ¡æ•°æ®å’Œè¿ç®—çš„è¡¨ç¤ºã€‚</p>
<p>Â  Â  2ï¼‰å¾®ç§¯åˆ† -&gt; æŒæ¡æ ¸å¿ƒçš„å­¦ä¹ ç®—æ³•ã€‚</p>
<p>Â  Â  3ï¼‰æ¦‚ç‡è®ºä¸ä¿¡æ¯è®º -&gt; æŒæ¡æ¨¡å‹çš„è¯„ä¼°å’Œç”ŸæˆåŸç†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f19b8452ea134f5dbbdc4efff26669f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764230296&amp;x-signature=0paX4VUxfab9QMH8pH6F4QHzk9s%3D" alt="" loading="lazy"/></p>
<p>Â  Â  ã€Šæ·±åº¦å­¦ä¹ ã€‹é‡Œé¢æåˆ°çš„æ•°å­¦åŸºç¡€æ¦‚å¿µå¦‚ä¸‹ï¼Œæˆ‘ä»¬å°†æ‹†åˆ†ä¸ºå‡ ç¯‡æ–‡ç« æ¥æ·±å…¥å­¦ä¹ ç›¸å…³çŸ¥è¯†åŠå…¶åœ¨å¤§æ¨¡å‹ä¸­çš„ä½œç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8315b4e48eb04ae3bcc3b8ad069c8e03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764230296&amp;x-signature=x%2FEXY1QmG9i7K9lYeMppcqQGPhc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2816efb60c68404194c2d6af1285dd79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764230296&amp;x-signature=CeALTOrTVgfeouBOh6Ti0O4oYtI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddea29f636f64b78849278ab1acf0755~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764230296&amp;x-signature=%2BVok6k5APYPj9eqKM7yj1HcI2oQ%3D" alt="" loading="lazy"/></p>
<p>æœ€ç»ˆï¼Œè¿™äº›æ•°å­¦çŸ¥è¯†å¹¶éå­¤ç«‹å­˜åœ¨ï¼Œè€Œæ˜¯å®Œç¾åœ°äº¤ç»‡åœ¨ä¸€èµ·ï¼Œå…±åŒèµ‹äºˆäº†å¤§å‹è¯­è¨€æ¨¡å‹ä»¤äººæƒŠå¹çš„â€œæ™ºèƒ½â€ã€‚</p>
<h3 data-id="heading-13">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–ï¼Œç ´è§£æ™ºèƒ½é©¾é©¶æ•°æ®å¤„ç†ç“¶é¢ˆ]]></title>    <link>https://juejin.cn/post/7574625040659906610</link>    <guid>https://juejin.cn/post/7574625040659906610</guid>    <pubDate>2025-11-20T08:02:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574625040659906610" data-draft-id="7574625040659890226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–ï¼Œç ´è§£æ™ºèƒ½é©¾é©¶æ•°æ®å¤„ç†ç“¶é¢ˆ"/> <meta itemprop="keywords" content="å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2025-11-20T08:02:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°"/> <meta itemprop="url" content="https://juejin.cn/user/2159881542179624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–ï¼Œç ´è§£æ™ºèƒ½é©¾é©¶æ•°æ®å¤„ç†ç“¶é¢ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2159881542179624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T08:02:23.000Z" title="Thu Nov 20 2025 08:02:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿‘æ—¥ä¸¾åŠçš„2025ç¬¬å…«å±Šæ™ºèƒ½è¾…åŠ©é©¾é©¶å¤§ä¼šä¸Šï¼Œç«å±±å¼•æ“æ•°æ®äº§å“è§£å†³æ–¹æ¡ˆä¸“å®¶åˆ†äº«äº†ç”±å¤šæ¨¡æ€æ•°æ®æ¹–è§£å†³æ–¹æ¡ˆæ„æˆçš„æ•°æ®åŸºåº§ï¼Œè‡´åŠ›äºè§£å†³æ™ºèƒ½ç½‘è”æ±½è½¦è¡Œä¸šé¢ä¸´çš„æµ·é‡å¤šæ¨¡æ€æ•°æ®å¤„ç†éš¾é¢˜ã€‚è¯¥æ–¹æ¡ˆé€šè¿‡å­˜å‚¨ä¸è®¡ç®—æ¶æ„çš„æ·±åº¦ä¼˜åŒ–ï¼ŒåŠ©åŠ›ä¼ä¸šå°†ç™¾PBçº§å¼‚æ„æ•°æ®ä»â€œéšæ€§è´Ÿå€ºâ€è½¬åŒ–ä¸ºé©±åŠ¨ç®—æ³•è¿­ä»£ä¸ä¸šåŠ¡å¢é•¿çš„æ ¸å¿ƒèµ„äº§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e404eb24626494d982883cbf1ce8f34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764230543&amp;x-signature=wAsiWeZcJIbbq4cHrrvayKq9Nzo%3D" alt="" loading="lazy"/></p>
<p>éšç€æ™ºèƒ½ç½‘è”è½¦è¿ˆå…¥1Hzæ•°æ®é‡‡é›†æ—¶ä»£ï¼Œéƒ¨åˆ†ä¿¡å·é¢‘ç‡ç”šè‡³è¾¾åˆ°100Hzï¼Œäº‘ç«¯æ¶æ„é¢ä¸´æ•°æ®é‡æ¿€å¢ã€schemaå¼±åŒ–åŠè½¦äº‘ä¸€è‡´æ€§ç­‰å¤šé‡æŒ‘æˆ˜ã€‚åŒæ—¶ï¼Œé«˜çº§è¾…åŠ©é©¾é©¶è§„æ¨¡åŒ–é‡äº§å¸¦æ¥åŠ¨è¾„ç™¾PBçº§çš„å¤šæ¨¡æ€æ•°æ®å¤„ç†éœ€æ±‚ï¼Œä¼ ç»ŸæŠ€æœ¯æ ˆåœ¨æ•ˆç‡ã€æˆæœ¬å’ŒååŒæ€§ä¸Šå­˜åœ¨æ˜æ˜¾ç“¶é¢ˆã€‚ç«å±±å¼•æ“æ•°æ®äº§å“è§£å†³æ–¹æ¡ˆä¸“å®¶æŒ‡å‡ºï¼šâ€œæ•°æ®é£è½®ç†å¿µè™½å—è®¤å¯ï¼Œä½†å®é™…åº”ç”¨å¸¸å—é™äºé«˜å·¥ç¨‹ååŒå¤æ‚åº¦ä¸æè‡´å¤„ç†æ•ˆç‡è¦æ±‚ã€‚æˆ‘ä»¬çš„åŸºåº§è®¾è®¡ä»¥å¼€æºå…¼å®¹ä¸AIåŸç”Ÿä¸ºæ ¸å¿ƒï¼Œç¡®ä¿æ•°æ®é«˜æ•ˆæµè½¬ï¼Œè®©å…¶çœŸæ­£æˆä¸ºèµ„äº§è€Œéè´Ÿæ‹…ã€‚â€</p>
<p>è¯¥èƒ½åŠ›åŸºåº§é‡‡ç”¨å¼€æ”¾æ€§æ¶æ„ï¼Œèšç„¦å…­å¤§å…³é”®ç»´åº¦ï¼šå¼€ç®±å³ç”¨ç‰¹æ€§ã€å¼€æºå…¼å®¹æ€§ã€è½»é‡è¿ç»´ã€æˆæœ¬ä¼˜åŒ–ã€æè‡´æ€§èƒ½å’ŒAIåŸç”Ÿè®¾è®¡ã€‚åœ¨å­˜å‚¨å±‚ï¼Œæ–¹æ¡ˆå¼•å…¥Lanceæ•°æ®æ¹–æ ¼å¼æ›¿ä»£ä¼ ç»ŸParquetï¼Œé€šè¿‡åˆ—å¼å‹ç¼©æŠ€æœ¯é™ä½30%å­˜å‚¨ç©ºé—´ï¼Œå¹¶å€ŸåŠ©å¼ºåŒ–å…ƒæ•°æ®æè¿°ä¸é«˜çº§ç´¢å¼•å®ç°å¤šæ¨¡æ€æ•°æ®ç§’çº§æ£€ç´¢ï¼Œå†…ç½®ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½æ˜¾è‘—æå‡éç»“æ„åŒ–æ•°æ®ç®¡ç†æ•ˆç‡ã€‚è®¡ç®—å±‚æ·±åº¦æ•´åˆSpark/Flinkå¤§æ•°æ®æ ˆä¸Ray/Daftç­‰Pythonç”Ÿæ€æ¡†æ¶ï¼Œé€šè¿‡EMR Rayçš„åˆ†å¸ƒå¼å¹¶è¡ŒåŒ–èƒ½åŠ›å°†ç®—æ³•å›¢é˜Ÿæ”¹é€ æˆæœ¬æœ€å°åŒ–ï¼Œåœ¨è‡ªåŠ¨åŒ–æ ‡æ³¨åœºæ™¯ä¸­å·²éªŒè¯å¯æå‡GPUåˆ©ç”¨ç‡20%ä»¥ä¸Šã€‚</p>
<p>å®è·µæ¡ˆä¾‹è¯æ˜è¯¥æ–¹æ¡ˆå…·å¤‡æ˜¾è‘—æ•ˆç›Šã€‚åœ¨æŸä¸»æœºå‚è¾…åŠ©é©¾é©¶é¡¹ç›®ä¸­ï¼Œç«å±±å¼•æ“é€šè¿‡Remote Dataloaderè§£å†³æ–¹æ¡ˆå°†æ•°æ®é¢„å¤„ç†æ¨¡å—ä¸è®­ç»ƒé›†ç¾¤è§£è€¦ï¼Œä½¿H20è®­ç»ƒå¡åˆ©ç”¨ç‡ä»40%ç¨³å®šæå‡è‡³85%ä»¥ä¸Šï¼Œå•æ¬¡è®­ç»ƒè¿­ä»£å‘¨æœŸç¼©çŸ­50%ï¼Œäº‘ç«¯å­˜å‚¨æˆæœ¬é™ä½20%ï¼Œæ•´ä½“æŠ€æœ¯é™æœ¬è¾¾20%ã€‚å¦ä¸€é‡äº§åˆ†æé¡¹ç›®é‡‡ç”¨Serverless Flinkå®æ—¶é“¾è·¯ä¸Paimon+ByteHouseæ¹–ä»“æ¶æ„ï¼ŒæˆåŠŸå°†æ•°æ®æ–°é²œåº¦å‹ç¼©è‡³åˆ†é’Ÿçº§ï¼Œæ”¯æ’‘é«˜é¢‘å®æ—¶å†³ç­–éœ€æ±‚ã€‚</p>
<p>å±•æœ›æœªæ¥ï¼Œç«å±±å¼•æ“å°†æŒç»­å¼ºåŒ–æ™ºé©¾ä¸ç½‘è”åœºæ™¯çš„å¤šæ¨¡æ€æ¹–ä»“åŸºåº§æ€§èƒ½ï¼Œæ¨è¿›Ray+LanceæŠ€æœ¯åœ¨é‡äº§åˆ†æä¸­çš„è½åœ°ã€‚éšç€å¤§æ¨¡å‹ä¸æ•°æ®åº”ç”¨çš„æ·±åº¦èåˆï¼Œæ–¹æ¡ˆå°†è¿›ä¸€æ­¥ä¼˜åŒ–æ•°æ®æ–°é²œåº¦ã€å“åº”åº¦ä¸AIåŸç”Ÿèƒ½åŠ›ï¼Œä¸ºè¡Œä¸šæ„å»ºä»¥æ•°æ®æ¶ˆè´¹ä¸ºå¯¼å‘çš„è¦ç´ åŒ–æ²»ç†ä½“ç³»ï¼Œæ¨åŠ¨æ™ºèƒ½é©¾é©¶æŠ€æœ¯å‘æ›´é«˜é˜¶æ¼”è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¨ æ–°æ¥çš„å¤–åŒ…ï¼Œåœ¨å¤§ç¾¤åˆ†äº«äº†å®ƒçš„é™æµç®—æ³•çš„å®ç°]]></title>    <link>https://juejin.cn/post/7574270661872631846</link>    <guid>https://juejin.cn/post/7574270661872631846</guid>    <pubDate>2025-11-19T13:29:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574270661872631846" data-draft-id="7574254039023763482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¨ æ–°æ¥çš„å¤–åŒ…ï¼Œåœ¨å¤§ç¾¤åˆ†äº«äº†å®ƒçš„é™æµç®—æ³•çš„å®ç°"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-19T13:29:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ€åº¦çš„ä¸‹ç­‰é©¬"/> <meta itemprop="url" content="https://juejin.cn/user/448256476727662"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¨ æ–°æ¥çš„å¤–åŒ…ï¼Œåœ¨å¤§ç¾¤åˆ†äº«äº†å®ƒçš„é™æµç®—æ³•çš„å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/448256476727662/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ€åº¦çš„ä¸‹ç­‰é©¬
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T13:29:43.000Z" title="Wed Nov 19 2025 13:29:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fccab2fa5b3487b8b35ea367414ee75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764166931&amp;x-signature=z7tMahPniACuQORd20qaCv7%2BS8Q%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">1. ä»¤ç‰Œæ¡¶æŒ‰ç”¨æˆ·ç»´åº¦é™æµ</h2>
<p>å‰æ–‡<a href="https://juejin.cn/post/7568124427822825512" target="_blank" title="https://juejin.cn/post/7568124427822825512"><code>golang/x/time/rate</code></a>æ¼”ç¤ºäº†åŸºäº<code>æ•´ä½“</code>è¯·æ±‚é€Ÿç‡çš„ä»¤ç‰Œæ¡¶é™æµï¼›<br/>
é‚£åŸºäº<code>ç”¨æˆ·idã€ipã€apikey</code>è¯·æ±‚é€Ÿç‡çš„é™æµ(æ›´è´´è¿‘ç”Ÿäº§çš„éœ€æ±‚)ï¼Œ é˜ä¸‹åˆè¯¥å¦‚ä½•åº”å¯¹ï¼Ÿ</p>
<p>é‚£è¿™ä¸ªé—®é¢˜å°±ä»<code>å…¨å±€é€Ÿç‡</code>å˜æˆäº†æŒ‰ç…§<code>ç”¨æˆ·ç»´åº¦ï¼ˆgroup by useridï¼‰</code>æ¥åšé™æµï¼Œé‚£ä¹ˆ</p>
<ul>
<li>æ—©å…ˆçš„å…¨å±€çš„rateLimiterå°±è¦å˜æˆäººæ‰‹ä¸€ä¸ªä»¤ç‰Œæ¡¶ï¼Œä¹Ÿå°±æ˜¯userid:rateLimiterçš„é”®å€¼å¯¹é›†åˆ,select count( * ) from table ---&gt; select userid, count(*) from  table group by userid</li>
<li>ä½¿ç”¨ç¼“å­˜ç»„ä»¶æ¥å­˜å‚¨ç»´åº¦é”®å€¼å¯¹: ç¼“å­˜çš„å‰”é™¤æœºåˆ¶æ¥æ¸…ç†ä¸å†è®¿é—®çš„é”®å€¼å¯¹ ï¼ˆ30minè¿‡æœŸï¼Œ10minå‘¨æœŸæ¸…ç†å†…å­˜ï¼‰ã€‚</li>
</ul>

<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> userLimiters = cache.New(time.Minute*<span class="hljs-number">30</span>, <span class="hljs-number">10</span>) <span class="hljs-comment">// 10 items per minute</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">limiterForUser</span><span class="hljs-params">(userID <span class="hljs-type">string</span>)</span></span> *rate.Limiter {
	<span class="hljs-keyword">if</span> v, found := userLimiters.Get(userID); found {
		<span class="hljs-keyword">return</span> v.(*rate.Limiter)
	}

	l := rate.NewLimiter(rate.Every(time.Minute/<span class="hljs-number">60</span>), <span class="hljs-number">10</span>)
	userLimiters.Set(userID, l, cache.DefaultExpiration)
	<span class="hljs-keyword">return</span> l
}

<span class="hljs-comment">// æ›´ç»†åŒ–çš„é™æµï¼š é’ˆå¯¹åŒä¸€ç”¨æˆ·çš„è¯·æ±‚æ¬¡æ•°é™é€Ÿï¼Œ å¢åŠ äº†ç»†ç²’åº¦çš„ç”¨æˆ·ç»´åº¦ï¼Œéœ€è¦ç»´æŠ¤ ç”¨æˆ·ä¸å¯¹åº”é™é€Ÿå™¨çš„æ˜ å°„å…³ç³»</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">userRatelimitMiddleware</span><span class="hljs-params">(c *gin.Context)</span></span> {
	userID := c.GetString(<span class="hljs-string">"userID"</span>)  <span class="hljs-comment">//  ä»æ¯ä¸ªè¯·æ±‚contextçš„keyä¸­å–å¾—ä¿¡æ¯ï¼Œ è¿™ä¸ªkeyå¯¹äºreq contextæ˜¯æ’ä»–æ€§çš„</span>
	<span class="hljs-keyword">if</span> userID == <span class="hljs-string">""</span> {
		c.AbortWithStatusJSON(http.StatusUnauthorized, gin.H{<span class="hljs-string">"error"</span>: <span class="hljs-string">"Unauthorized"</span>})
		<span class="hljs-keyword">return</span>
	}
	<span class="hljs-keyword">if</span> userID == <span class="hljs-string">""</span> {
		userID = c.GetString(<span class="hljs-string">"x-api-key"</span>)
	}

	<span class="hljs-keyword">if</span> userID == <span class="hljs-string">""</span> {
		userID = c.ClientIP()
	}
	limiter := limiterForUser(userID) <span class="hljs-comment">// é€šè¿‡useridç»´åº¦æ‰¾åˆ°å¯¹åº”çš„é™é€Ÿå™¨</span>
	<span class="hljs-keyword">if</span> !limiter.Allow() {
		c.AbortWithStatusJSON(http.StatusTooManyRequests, gin.H{<span class="hljs-string">"error"</span>: <span class="hljs-string">"Too many requests"</span>})
		<span class="hljs-keyword">return</span>
	}
	c.Next()
}
</code></pre>
<h2 data-id="heading-1">2. redis ä½œä¸ºé™æµå™¨å¤–ç½®å­˜å‚¨</h2>
<p>è¿™ä¸ªæ€è·¯ä¹Ÿæ˜¯æå…¶å¸¸è§çš„è¡Œä¸ºï¼š rediså¯ä»¥æˆä¸ºç”¨æˆ·ä»¤ç‰Œæ¡¶çš„å…¨å±€ä¸­å¿ƒå­˜å‚¨ï¼š å½“å¤šä¸ªè´Ÿè½½å±‚éœ€è¦è¯»å†™ç”¨æˆ·é™æµå™¨æ—¶ï¼Œä¸redisäº¤äº’ã€‚</p>
<p>æœ¬æ¬¡é€šè¿‡golangçš„å®æˆ˜ï¼Œæ·±å…¥ç†è§£åŸºäºredisçš„ä»¤ç‰Œæ¡¶é™æµå™¨çš„ç®—æ³•å®ç°ã€‚</p>
<p>â‘   è¯·æ±‚åˆ°è¾¾è´Ÿè½½å±‚ï¼Œè¢«è´Ÿè½½å±‚è¯†åˆ«ä¸ºuserid=junio</p>
<p>â‘¡  è´Ÿè½½å±‚è¯·æ±‚redisè·å–è¯¥ç”¨æˆ·çš„token bucketçš„å½“å‰çŠ¶æ€:
<code>hget userbucket:junio tokens last_time</code></p>
<p>â‘¢  åŸºäºå½“å‰æ—¶é—´<code>now</code>å’Œ<code>last_time</code>ï¼Œè®¡ç®—æµé€çš„æ—¶é—´ï¼Œå†æ ¹æ®rateè®¡ç®—è¿™ä¸€é˜¶æ®µä¸‹å‘äº†å¤šå°‘tokens:<code>delta=(now-last_time) * r/1000</code>ï¼ŒåŠ ä¸ŠredisåŸå§‹è®°å½•çš„<code>token</code>,å°±æ˜¯æœ¬æ¬¡è¯·æ±‚æ—¶bucketä¸­èƒ½ç”¨çš„tokensï¼Œ æ³¨æ„ï¼šä»¤ç‰Œæ•°é‡æœ€å¤šä¸èƒ½è¶…è¿‡cap</p>
<p>â‘£ å¦‚æœtokens&gt;=1, è¡¨ç¤ºæ¡¶ä¸­æœ‰ä»¤ç‰Œï¼Œå¯æ”¾è¡Œè¯·æ±‚ï¼Œtokensæ•°é‡å‡1</p>
<p>â‘¤ æœ€åå°†æœ¬æ¬¡å¤„ç†å®Œåçš„ tokenså’Œ<code>last_time=now</code>å†™å…¥åŸç”¨æˆ·ä»¤ç‰Œæ¡¶
<code>hset  userbucket:junio  tokens  20 last_time 990</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c02de3fafff04c10a34f558eccb3fbc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764166931&amp;x-signature=qK9z4APYh5XXrI8NmOCHWVuh1OI%3D" alt="" loading="lazy"/>
ä½¿ç”¨redis ä¸­çš„hashmapå­˜å‚¨ç”¨æˆ·çš„tokenbucketçŠ¶æ€ï¼Œåº”ç”¨å­˜åœ¨<code>è¯»å–redis- è®¡ç®—- å›å†™redis</code>è¿‡ç¨‹ï¼Œä½¿ç”¨redis luaçš„è„šæœ¬æ‰§è¡Œä¸‰ä¸ªåŠ¨ä½œï¼Œä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆluaè„šæœ¬èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨å‘¢ï¼Ÿ<br/>
ä¸»è¦å¾—ç›Šäº Redis çš„å•çº¿ç¨‹æ¶æ„å’ŒåŸå­æ€§æ‰§è¡Œæœºåˆ¶ï¼š åŠ è½½å¹¶æ‰§è¡Œluaè„šæœ¬æ—¶æ‰€æœ‰çš„redisæ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“å®Œæˆï¼› æ•´ä¸ªè„šæœ¬æ‰§è¡ŒæœŸé—´æ²¡æœ‰å…¶ä»–å‘½ä»¤å¯ä»¥æ’å…¥ã€‚</p>
</blockquote>
<pre><code class="hljs language-ini" lang="ini">// è¯»å–- è®¡ç®— - é‡æ–°èµ‹å€¼éƒ½åœ¨ä¸€ä¸ª lua è„šæœ¬é‡Œé¢
var <span class="hljs-attr">redisScript</span> = `
	local <span class="hljs-attr">key</span> = KEYS[<span class="hljs-number">1</span>]
	local <span class="hljs-attr">capacity</span> = tonumber(ARGV[<span class="hljs-number">1</span>])
	local <span class="hljs-attr">rate</span> = tonumber(ARGV[<span class="hljs-number">2</span>])
	local <span class="hljs-attr">now</span> = tonumber(ARGV[<span class="hljs-number">3</span>])
	local <span class="hljs-attr">tokens</span> =  tonumber(redis.call(<span class="hljs-string">'hget'</span>, key, <span class="hljs-string">'tokens'</span>) or <span class="hljs-string">'-1'</span>)
	local <span class="hljs-attr">last_time</span> = tonumber(redis.call(<span class="hljs-string">'hget'</span>, key, <span class="hljs-string">'last_time'</span>) or  <span class="hljs-string">'-1'</span>)

	if <span class="hljs-attr">tokens</span>  == -<span class="hljs-number">1</span> or last_time == -<span class="hljs-number">1</span> then
		<span class="hljs-attr">tokens</span> = capacity
		<span class="hljs-attr">last_time</span> = now
	else
		local <span class="hljs-attr">elapsed</span> = now - last_time
        if elapsed &lt; 0 
			then <span class="hljs-attr">elapsed</span> = <span class="hljs-number">0</span>
		end
		local <span class="hljs-attr">delta</span>  = elapsed * rate / <span class="hljs-number">1000</span>
		<span class="hljs-attr">tokens</span> = tokens + delta
		if tokens &gt; capacity then
			<span class="hljs-attr">tokens</span> = capacity
		end
        <span class="hljs-attr">last_time</span> = now
	end
	local <span class="hljs-attr">allow</span> = <span class="hljs-number">0</span>
	if tokens &gt;= 1 then
		<span class="hljs-attr">allow</span> = <span class="hljs-number">1</span>
		<span class="hljs-attr">tokens</span>= tokens - <span class="hljs-number">1</span>
	else	
		<span class="hljs-attr">allow</span> = <span class="hljs-number">0</span>
	end

	redis.call('hset', key, 'tokens', tokens)
	redis.call('hset', key, 'last_time', last_time)
    redis.call('PEXPIRE', key,  math.max(1000, 2 * math.ceil((capacity / rate) * 5000)))
	return allow
`
</code></pre>
<p>æ³¨æ„</p>
<ul>
<li>ä¸Šé¢è¿˜ä½¿ç”¨çš„redis expireæœºåˆ¶ï¼š redis expireä¸æ˜¯æ»‘åŠ¨è¿‡æœŸï¼Œä½†æ˜¯æ¯æ¬¡è¢«è¯·æ±‚è§¦å‘æ‰§è¡Œçš„æ—¶å€™å°±é‡æ–°è®¾ç½®TTLï¼Œ è¡¨ç°ä¸ºâ€œæ»‘åŠ¨è¿‡æœŸâ€ã€‚</li>
<li>é™¤äº†hset/hget ,è¿˜æœ‰hmgetå¯ç”¨ï¼Œå¦å¤–è¿™äº›æ“ä½œè¿˜æœ‰é…å¥—çš„TTLæŒ‡ä»¤ï¼Œegï¼š<code>hset key EXAT  1740470400 FIELDS 2 field1 "Hello" field2 "World"</code>ã€‚</li>
</ul>
<p>golangåº”ç”¨å±‚çš„å†™æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *RedisLimiter)</span></span> Allow(c *gin.Context, userid <span class="hljs-type">string</span>) <span class="hljs-type">bool</span> {
	key := r.keyprefix + userid <span class="hljs-comment">// å®šä½è¿™ä¸ªç”¨æˆ·çš„token bucket</span>
	now := time.Now().UnixMilli()
	<span class="hljs-comment">// Check if the key exists in Redis</span>
	rCmd := r.redis.Eval(redisScript, []<span class="hljs-type">string</span>{key}, r.<span class="hljs-built_in">cap</span>, r.rate, now)
	res, err := rCmd.Result()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		log.Printf(<span class="hljs-string">"get from redis failure. "</span>, err)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
	}
	<span class="hljs-keyword">if</span> allow, ok := res.(<span class="hljs-type">int64</span>); ok { <span class="hljs-comment">// æ³¨æ„ï¼šluaè¿”å›çš„0,1 å€¼å¯¹åº”golangçš„int64</span>
		log.Printf(<span class="hljs-string">"%v %v \n"</span>, allow, res)
		<span class="hljs-keyword">return</span> allow == <span class="hljs-number">1</span>
	} <span class="hljs-keyword">else</span> {
		log.Printf(<span class="hljs-string">"get from redis failure. "</span>, err)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
	}
}
</code></pre>
<hr/>
<h2 data-id="heading-2">3. æ€»ç»“å±•æœ›</h2>
<p>è‡³æ­¤é™æµç¬¬äºŒå¼¹ç»“æŸäº†ï¼Œæœ¬æ–‡ç´§æ¥æ˜é‡‘çˆ†æ–‡<a href="https://juejin.cn/post/7568124427822825512" target="_blank" title="https://juejin.cn/post/7568124427822825512">ğŸ¨ æ–°æ¥çš„å¤–åŒ…ï¼Œé™æµç®—æ³•ç”¨çš„è¿™ä¹ˆ6</a>ï¼Œè¿›ä¸€æ­¥è®²è¿°äº†<br/>
â‘  å®ç°æ ¹æ®ç‰¹å®šä¸šåŠ¡ç»´åº¦çš„é™æµï¼š ä»å…¨å±€é™æµå™¨è½¬æ¢æˆé’ˆå¯¹ä¸šåŠ¡ç»´åº¦çš„äººæ‰‹ä¸€ä¸ªé™æµå™¨ï¼›</p>
<p>â‘¡ redisä½œä¸ºé™æµè®¡æ•°å™¨çš„å¤–ç½®å­˜å‚¨ï¼Œä»¤ç‰Œæ¡¶ç®—æ³•åœ¨redisä¸Šçš„ç®—æ³•å®ç°ï¼šæ ¸å¿ƒæ˜¯ä½¿ç”¨hashmapå­˜å‚¨å½“å‰è¯·æ±‚ç”¨æˆ·çš„ä»¤ç‰Œæ¡¶çŠ¶æ€ï¼ˆcurrent_tokens, last_timeï¼‰, è½åœ°æ—¶æ³¨æ„ä½¿ç”¨luaè„šæœ¬é¿å…ç«æ€æ¡ä»¶ã€‚</p>
<p>åé¢35+å¤–åŒ…eré’ˆå¯¹é™æµè®¾è®¡è¿˜ä¼šå†æ›´æ–°å‡ ä¸ªå½©è›‹ï¼Œ æœŸå¾…ä¸€é”®ä¸‰è¿ï¼Œäº¤ä¸ªæœ‹å‹ï¼Œ 35+æŠ¥å›¢ä¸è¿·è·¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude ä½¿ç”¨æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7574380953176391722</link>    <guid>https://juejin.cn/post/7574380953176391722</guid>    <pubDate>2025-11-20T05:55:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574380953176391722" data-draft-id="7574380953176375338" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude ä½¿ç”¨æ•™ç¨‹"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Claude"/> <meta itemprop="datePublished" content="2025-11-20T05:55:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude ä½¿ç”¨æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T05:55:23.000Z" title="Thu Nov 20 2025 05:55:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Claude Codeï¼Ÿ</h2>
<p>Claude Code æ˜¯ Anthropic å¼€å‘çš„æ™ºèƒ½ç¼–ç¨‹åŠ©æ‰‹ï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­å¸®ä½ å®Œæˆå„ç§ç¼–ç¨‹ä»»åŠ¡ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç¼–å†™å’Œä¿®æ”¹ä»£ç </li>
<li>è°ƒè¯•å’Œä¿®å¤é”™è¯¯</li>
<li>æµè§ˆå’Œç†è§£ä»£ç åº“</li>
<li>è‡ªåŠ¨åŒ–é‡å¤ä»»åŠ¡</li>
<li>ç®¡ç† Git æ“ä½œ</li>
</ul>
<h2 data-id="heading-1">å®‰è£…</h2>
<h3 data-id="heading-2">ç³»ç»Ÿè¦æ±‚</h3>
<ul>
<li>macOS 10.15+ / Ubuntu 20.04+ / Windows 10+ï¼ˆéœ€è¦ WSLï¼‰</li>
<li>Node.js 18 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
</ul>
<h3 data-id="heading-3">å®‰è£…æ–¹æ³•</h3>
<p><strong>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ npmï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @anthropic-ai/claude-code
</code></pre>
<p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨åŸç”Ÿå®‰è£…è„šæœ¬ï¼ˆLinux/Macï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">curl -fsSL https://claude.ai/install.sh | bash
</code></pre>
<h2 data-id="heading-4">åŸºæœ¬ä½¿ç”¨</h2>
<h3 data-id="heading-5">å¯åŠ¨ Claude</h3>
<pre><code class="hljs language-bash" lang="bash">claude
</code></pre>
<p>å¯åŠ¨åè¿›å…¥äº¤äº’æ¨¡å¼ï¼Œå¯ä»¥å’Œ Claude å¯¹è¯å¹¶è®©å®ƒå¸®ä½ å®Œæˆä»»åŠ¡ã€‚</p>
<h3 data-id="heading-6">æ‰§è¡Œå•æ¬¡ä»»åŠ¡</h3>
<pre><code class="hljs language-bash" lang="bash">claude <span class="hljs-string">"å¸®æˆ‘åˆ›å»ºä¸€ä¸ª React ç»„ä»¶"</span>
</code></pre>
<h2 data-id="heading-7">å¸¸ç”¨å‘½ä»¤</h2>

































<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>/help</code></td><td>æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯</td></tr><tr><td><code>/clear</code></td><td>æ¸…é™¤å¯¹è¯å†å²</td></tr><tr><td><code>/init</code></td><td>åˆå§‹åŒ–é¡¹ç›®é…ç½®</td></tr><tr><td><code>/cost</code></td><td>æŸ¥çœ‹ token ä½¿ç”¨æƒ…å†µ</td></tr><tr><td><code>/compact</code></td><td>å‹ç¼©å¯¹è¯ä»¥èŠ‚çœ token</td></tr><tr><td><code>/exit</code></td><td>é€€å‡º Claude</td></tr></tbody></table>
<h2 data-id="heading-8">æ ¸å¿ƒåŠŸèƒ½</h2>
<h3 data-id="heading-9">1. ç¼–å†™å’Œä¿®æ”¹ä»£ç </h3>
<p>ç›´æ¥å‘Šè¯‰ Claude ä½ æƒ³åšä»€ä¹ˆï¼š</p>
<pre><code class="hljs">å¸®æˆ‘å†™ä¸€ä¸ª Python å‡½æ•°ï¼Œç”¨äºè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—
</code></pre>
<h3 data-id="heading-10">2. è°ƒè¯•ä»£ç </h3>
<pre><code class="hljs">æˆ‘çš„ç¨‹åºæœ‰ä¸ªé”™è¯¯ï¼Œå¸®æˆ‘æ‰¾å‡ºé—®é¢˜å¹¶ä¿®å¤
</code></pre>
<h3 data-id="heading-11">3. ä»£ç å®¡æŸ¥</h3>
<pre><code class="hljs">å¸®æˆ‘æ£€æŸ¥è¿™æ®µä»£ç çš„æ€§èƒ½é—®é¢˜
</code></pre>
<h3 data-id="heading-12">4. Git æ“ä½œ</h3>
<pre><code class="hljs language-sql" lang="sql">å¸®æˆ‘åˆ›å»ºä¸€ä¸ª <span class="hljs-keyword">commit</span>ï¼Œæ¶ˆæ¯è¦æè¿°æ¸…æ¥šè¿™æ¬¡æ”¹åŠ¨
</code></pre>
<h2 data-id="heading-13">é¡¹ç›®é…ç½®</h2>
<h3 data-id="heading-14">CLAUDE.md æ–‡ä»¶</h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>CLAUDE.md</code> æ–‡ä»¶ï¼Œå¯ä»¥å‘Šè¯‰ Claude é¡¹ç›®çš„è§„èŒƒå’Œçº¦å®šï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®è§„èŒƒ</span>

<span class="hljs-bullet">-</span> ä½¿ç”¨ TypeScript
<span class="hljs-bullet">-</span> ä»£ç é£æ ¼éµå¾ª ESLint é…ç½®
<span class="hljs-bullet">-</span> æ‰€æœ‰å‡½æ•°éœ€è¦æ·»åŠ æ³¨é‡Š
<span class="hljs-bullet">-</span> æµ‹è¯•è¦†ç›–ç‡éœ€è¾¾åˆ° 80% ä»¥ä¸Š
</code></pre>
<p>Claude ä¼šåœ¨å·¥ä½œæ—¶è‡ªåŠ¨å‚è€ƒè¿™ä¸ªæ–‡ä»¶ã€‚</p>
<h2 data-id="heading-15">ä½¿ç”¨æŠ€å·§</h2>
<h3 data-id="heading-16">1. æ¸…æ™°çš„æè¿°</h3>
<p>è¶Šè¯¦ç»†çš„æè¿°ï¼ŒClaude çš„è¾“å‡ºè¶Šå‡†ç¡®ï¼š</p>
<pre><code class="hljs">å¸®æˆ‘åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç™»å½•è¡¨å•ï¼ŒåŒ…å«é‚®ç®±å’Œå¯†ç å­—æ®µï¼Œè¦æœ‰è¡¨å•éªŒè¯ï¼Œä½¿ç”¨ React å’Œ TypeScript
</code></pre>
<h3 data-id="heading-17">2. åˆ†æ­¥éª¤å®Œæˆå¤æ‚ä»»åŠ¡</h3>
<p>å¯¹äºå¤æ‚ä»»åŠ¡ï¼Œå¯ä»¥åˆ†æ­¥éª¤è¿›è¡Œï¼š</p>
<pre><code class="hljs">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ•°æ®åº“æ¨¡å‹
ç¬¬äºŒæ­¥ï¼šåˆ›å»º API æ¥å£
ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå‰ç«¯é¡µé¢
</code></pre>
<h3 data-id="heading-18">3. åˆ©ç”¨è®¡åˆ’æ¨¡å¼</h3>
<p>å¯¹äºå¤§å‹ä»»åŠ¡ï¼ŒClaude ä¼šå…ˆåˆ¶å®šè®¡åˆ’ï¼Œä½ å¯ä»¥å®¡æŸ¥åå†æ‰§è¡Œï¼š</p>
<pre><code class="hljs">å¸®æˆ‘é‡æ„è¿™ä¸ªæ¨¡å—ï¼Œå…ˆç»™æˆ‘çœ‹çœ‹ä½ çš„è®¡åˆ’
</code></pre>
<h2 data-id="heading-19">æƒé™ç®¡ç†</h2>
<p>Claude åœ¨æ‰§è¡ŒæŸäº›æ“ä½œå‰ä¼šè¯·æ±‚æƒé™ï¼š</p>
<ul>
<li><strong>ç¼–è¾‘æ–‡ä»¶</strong>ï¼šæ˜¾ç¤º diff è®©ä½ ç¡®è®¤</li>
<li><strong>è¿è¡Œå‘½ä»¤</strong>ï¼šæ˜¾ç¤ºè¦æ‰§è¡Œçš„å‘½ä»¤</li>
<li><strong>å®‰è£…ä¾èµ–</strong>ï¼šæ˜¾ç¤ºè¦å®‰è£…çš„åŒ…</li>
</ul>
<p>ä½ å¯ä»¥é€‰æ‹©ï¼š</p>
<ul>
<li>åŒæ„ï¼ˆyï¼‰</li>
<li>æ‹’ç»ï¼ˆnï¼‰</li>
<li>è‡ªåŠ¨æ¥å—æœ¬æ¬¡ä¼šè¯çš„æ‰€æœ‰æ“ä½œï¼ˆaï¼‰</li>
</ul>
<h2 data-id="heading-20">æˆæœ¬è¯´æ˜</h2>
<p>Claude Code ä½¿ç”¨ API è®¡è´¹ï¼š</p>
<ul>
<li>å¹³å‡æ¯æœˆè´¹ç”¨çº¦ $100-200ï¼ˆé‡åº¦ä½¿ç”¨ï¼‰</li>
<li>ä½¿ç”¨ <code>/cost</code> æŸ¥çœ‹å½“å‰æ¶ˆè€—</li>
<li>ä½¿ç”¨ <code>/compact</code> å‹ç¼©å†å²å¯¹è¯å¯ä»¥èŠ‚çœè´¹ç”¨</li>
</ul>
<h2 data-id="heading-21">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä¿æŒå¯¹è¯ç®€æ´</strong>ï¼šå®Œæˆä»»åŠ¡åä½¿ç”¨ <code>/clear</code> æ¸…é™¤å†å²</li>
<li><strong>ä½¿ç”¨é¡¹ç›®æ–‡æ¡£</strong>ï¼šåˆ›å»º CLAUDE.md è¯´æ˜é¡¹ç›®è§„èŒƒ</li>
<li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šè®© Claude å¸®ä½ æäº¤ä»£ç å‰å…ˆæ£€æŸ¥ diff</li>
<li><strong>è¿­ä»£æ”¹è¿›</strong>ï¼šå¦‚æœç»“æœä¸ç†æƒ³ï¼Œç»§ç»­å¯¹è¯è®© Claude æ”¹è¿›</li>
<li><strong>å®‰å…¨æ„è¯†</strong>ï¼šä¸è¦è®© Claude å¤„ç†æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€å¯†é’¥ç­‰ï¼‰</li>
</ol>
<h2 data-id="heading-22">å¸¸è§é—®é¢˜</h2>
<p><strong>Q: Claude å¯ä»¥è®¿é—®äº’è”ç½‘å—ï¼Ÿ</strong>
A: Claude Code ä¸»è¦ç”¨äºæœ¬åœ°ä»£ç æ“ä½œï¼Œä½†å¯ä»¥é€šè¿‡æœç´¢åŠŸèƒ½è·å–æœ€æ–°ä¿¡æ¯ã€‚</p>
<p><strong>Q: æ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€ï¼Ÿ</strong>
A: æ”¯æŒæ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Pythonã€JavaScriptã€TypeScriptã€Goã€Rustã€Java ç­‰ã€‚</p>
<p><strong>Q: å¦‚ä½•æé«˜å“åº”é€Ÿåº¦ï¼Ÿ</strong>
A: ä½¿ç”¨ <code>/compact</code> å‹ç¼©å¯¹è¯å†å²ï¼Œæˆ–è€…ä½¿ç”¨ <code>/clear</code> æ¸…é™¤ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p><strong>Q: å¯ä»¥ç¦»çº¿ä½¿ç”¨å—ï¼Ÿ</strong>
A: ä¸å¯ä»¥ï¼ŒClaude Code éœ€è¦ç½‘ç»œè¿æ¥æ¥è°ƒç”¨ APIã€‚</p>
<h2 data-id="heading-23">å¼€å§‹ä½¿ç”¨</h2>
<p>ç°åœ¨ä½ å·²ç»äº†è§£äº† Claude çš„åŸºæœ¬ç”¨æ³•ï¼Œè¯•è¯•è¿™äº›ä»»åŠ¡å…¥é—¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨ Claude</span>
claude

<span class="hljs-comment"># ç„¶åå°è¯•ï¼š</span>
<span class="hljs-comment"># 1. "å¸®æˆ‘åˆ†æå½“å‰ç›®å½•çš„é¡¹ç›®ç»“æ„"</span>
<span class="hljs-comment"># 2. "åˆ›å»ºä¸€ä¸ªç®€å•çš„ TODO åº”ç”¨"</span>
<span class="hljs-comment"># 3. "å¸®æˆ‘ä¼˜åŒ–è¿™æ®µä»£ç çš„æ€§èƒ½"</span>
</code></pre>
<p>ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaåºåˆ—åŒ–æ¼æ´ï¼šRCE è¿œç¨‹æ‰§è¡Œä»£ç -Serializable]]></title>    <link>https://juejin.cn/post/7574451949325500457</link>    <guid>https://juejin.cn/post/7574451949325500457</guid>    <pubDate>2025-11-20T05:57:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574451949325500457" data-draft-id="7574380953176408106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaåºåˆ—åŒ–æ¼æ´ï¼šRCE è¿œç¨‹æ‰§è¡Œä»£ç -Serializable"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T05:57:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="shengjk1"/> <meta itemprop="url" content="https://juejin.cn/user/2647279732524957"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaåºåˆ—åŒ–æ¼æ´ï¼šRCE è¿œç¨‹æ‰§è¡Œä»£ç -Serializable
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2647279732524957/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    shengjk1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T05:57:16.000Z" title="Thu Nov 20 2025 05:57:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="gruvbox-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#282828}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#ebdbb2}.hljs-deletion,.hljs-formula,.hljs-keyword,.hljs-link,.hljs-selector-tag{color:#fb4934}.hljs-built_in,.hljs-emphasis,.hljs-name,.hljs-quote,.hljs-strong,.hljs-title,.hljs-variable{color:#83a598}.hljs-attr,.hljs-params,.hljs-template-tag,.hljs-type{color:#fabd2f}.hljs-builtin-name,.hljs-doctag,.hljs-literal,.hljs-number{color:#8f3f71}.hljs-code,.hljs-meta,.hljs-regexp,.hljs-selector-id,.hljs-template-variable{color:#fe8019}.hljs-addition,.hljs-meta-string,.hljs-section,.hljs-selector-attr,.hljs-selector-class,.hljs-string,.hljs-symbol{color:#b8bb26}.hljs-attribute,.hljs-bullet,.hljs-class,.hljs-function,.hljs-function .hljs-keyword,.hljs-meta-keyword,.hljs-selector-pseudo,.hljs-tag{color:#8ec07c}.hljs-comment{color:#928374}.hljs-link_label,.hljs-literal,.hljs-number{color:#d3869b}.hljs-comment,.hljs-emphasis{font-style:italic}.hljs-section,.hljs-strong,.hljs-tag{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯ shengjk1ï¼Œå¤šå¹´å¤§å‚ç»éªŒï¼ŒåŠªåŠ›æ„å»º é€šä¿—æ˜“æ‡‚çš„ã€å¥½ç©çš„ç¼–ç¨‹è¯­è¨€æ•™ç¨‹ã€‚ æ¬¢è¿å…³æ³¨ï¼ä½ ä¼šæœ‰å¦‚ä¸‹æ”¶ç›Šï¼š</p>
<ol>
<li>äº†è§£å¤§å‚ç»éªŒ</li>
<li>æ‹¥æœ‰å’Œå¤§å‚ç›¸åŒ¹é…çš„æŠ€æœ¯ç­‰</li>
</ol>
<p>å¸Œæœ›çœ‹ä»€ä¹ˆï¼Œè¯„è®ºæˆ–è€…ç§ä¿¡å‘Šè¯‰æˆ‘ï¼</p>
<p>@<a href="https://link.juejin.cn?target=%25E6%2596%2587%25E7%25AB%25A0%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">TOC</a></p>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯</h2>
<h2 data-id="heading-1">äºŒã€JDK åŸç”Ÿçš„åºåˆ—åŒ–æ–¹å¼</h2>
<p><code>Externalizable</code> å’Œ <code>Serializable</code> éƒ½æ˜¯ Java ä¸­ç”¨äºå¯¹è±¡åºåˆ—åŒ–çš„æœºåˆ¶ï¼Œä½†å®ƒä»¬åœ¨<strong>æ§åˆ¶ç²’åº¦ã€æ€§èƒ½ã€ä½¿ç”¨å¤æ‚åº¦</strong>ç­‰æ–¹é¢æœ‰æ˜¾è‘—åŒºåˆ«ã€‚ä¸‹é¢æ˜¯ä¸¤è€…çš„è¯¦ç»†å¯¹æ¯”ï¼š</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€åŸºæœ¬å®šä¹‰</h3>

























<table><thead><tr><th>ç‰¹æ€§</th><th><code>Serializable</code></th><th><code>Externalizable</code></th></tr></thead><tbody><tr><td>æ‰€åœ¨åŒ…</td><td><code>java.io.Serializable</code></td><td><code>java.io.Externalizable</code></td></tr><tr><td>ç±»å‹</td><td><strong>æ ‡è®°æ¥å£ï¼ˆMarker Interfaceï¼‰</strong><br/>ï¼ˆæ— æ–¹æ³•ï¼‰</td><td><strong>åŠŸèƒ½æ€§æ¥å£</strong><br/>ï¼ˆéœ€å®ç° <code>writeExternal()</code> å’Œ <code>readExternal()</code>ï¼‰</td></tr><tr><td>ç»§æ‰¿å…³ç³»</td><td><code>Externalizable extends Serializable</code></td><td>æ˜¯ <code>Serializable</code> çš„å­æ¥å£</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">äºŒã€æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”è¡¨</h3>




























































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th><code>Serializable</code></th><th><code>Externalizable</code></th></tr></thead><tbody><tr><td><strong>åºåˆ—åŒ–æ§åˆ¶</strong></td><td>è‡ªåŠ¨åºåˆ—åŒ–æ‰€æœ‰é <code>transient</code>/<code>static</code> å­—æ®µ</td><td><strong>å®Œå…¨æ‰‹åŠ¨æ§åˆ¶</strong>ï¼šå¼€å‘è€…å†³å®šå“ªäº›å­—æ®µå†™å…¥/è¯»å–</td></tr><tr><td><strong>æ„é€ å‡½æ•°è°ƒç”¨</strong></td><td>ååºåˆ—åŒ–æ—¶ <strong>ä¸è°ƒç”¨ä»»ä½•æ„é€ å‡½æ•°</strong>ï¼ˆç›´æ¥åˆ†é…å†…å­˜ï¼‰</td><td>ååºåˆ—åŒ–æ—¶ <strong>å¿…é¡»è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</strong>ï¼Œå†è°ƒç”¨ <code>readExternal()</code></td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>è¾ƒæ…¢ï¼ˆåå°„ + å…ƒæ•°æ®å¼€é”€å¤§ï¼‰</td><td>æ›´å¿«ï¼ˆæ— åå°„ï¼Œç›´æ¥ I/O æ“ä½œï¼‰</td></tr><tr><td><strong>åºåˆ—åŒ–ä½“ç§¯</strong></td><td>è¾ƒå¤§ï¼ˆåŒ…å«ç±»å…ƒä¿¡æ¯ã€å­—æ®µåç­‰ï¼‰</td><td>æ›´å°ï¼ˆåªå­˜ä½ éœ€è¦çš„æ•°æ®ï¼‰</td></tr><tr><td><strong>çµæ´»æ€§</strong></td><td>ä½ï¼ˆè‡ªåŠ¨å¤„ç†ï¼Œéš¾å®šåˆ¶ï¼‰</td><td>é«˜ï¼ˆå¯åŠ å¯†ã€å‹ç¼©ã€ç‰ˆæœ¬å…¼å®¹ç­‰ï¼‰</td></tr><tr><td><strong>æ˜“ç”¨æ€§</strong></td><td>æç®€ï¼ˆåªéœ€å®ç°æ¥å£ï¼‰</td><td>å¤æ‚ï¼ˆéœ€æ‰‹å†™é€»è¾‘ï¼Œæ˜“å‡ºé”™ï¼‰</td></tr><tr><td><strong>é»˜è®¤è¡Œä¸º</strong></td><td>æ”¯æŒ <code>defaultWriteObject()</code> / <code>defaultReadObject()</code></td><td>æ— é»˜è®¤è¡Œä¸ºï¼Œä¸€åˆ‡é è‡ªå·±</td></tr><tr><td><strong>çˆ¶ç±»å­—æ®µå¤„ç†</strong></td><td>è‡ªåŠ¨é€’å½’å¤„ç†ï¼ˆåªè¦çˆ¶ç±»ä¹Ÿå¯åºåˆ—åŒ–ï¼‰</td><td><strong>ä¸ä¼šè‡ªåŠ¨å¤„ç†çˆ¶ç±»å­—æ®µ</strong>ï¼Œéœ€æ‰‹åŠ¨å†™å…¥/è¯»å–</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>è¾ƒä½ï¼ˆååºåˆ—åŒ–æ¼æ´é«˜å‘ï¼‰</td><td>ç›¸å¯¹å¯æ§ï¼ˆå¯æ ¡éªŒè¾“å…¥ã€è¿‡æ»¤æ¶æ„æ•°æ®ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¿«é€ŸåŸå‹ã€ç®€å•æœ¬åœ°æŒä¹…åŒ–</td><td>é«˜æ€§èƒ½ç³»ç»Ÿã€ç½‘ç»œä¼ è¾“ã€è‡ªå®šä¹‰æ ¼å¼</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€ä»£ç è¡Œä¸ºå¯¹æ¯”</h3>
<h4 data-id="heading-5">1. <code>Serializable</code> ç¤ºä¾‹ï¼ˆè‡ªåŠ¨ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;
    <span class="hljs-comment">// è‡ªåŠ¨åºåˆ—åŒ– name å’Œ id</span>
}
</code></pre>
<h4 data-id="heading-6">2. <code>Externalizable</code> ç¤ºä¾‹ï¼ˆæ‰‹åŠ¨ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Externalizable</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">()</span> {} <span class="hljs-comment">// å¿…é¡»ï¼</span>

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeExternal</span><span class="hljs-params">(ObjectOutput out)</span> <span class="hljs-keyword">throws</span> IOException {
        out.writeUTF(name); <span class="hljs-comment">// æ‰‹åŠ¨å†™</span>
        out.writeInt(id);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readExternal</span><span class="hljs-params">(ObjectInput in)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException {
        name = in.readUTF(); <span class="hljs-comment">// æ‰‹åŠ¨è¯»ï¼ˆé¡ºåºå¿…é¡»ä¸€è‡´ï¼ï¼‰</span>
        id = in.readInt();
    }
}
</code></pre>
<blockquote>
<p>âš ï¸ å¦‚æœ <code>User</code> æœ‰çˆ¶ç±»å­—æ®µï¼Œ<code>Externalizable</code> ä¸ä¼šè‡ªåŠ¨ä¿å­˜/æ¢å¤å®ƒä»¬ï¼Œè€Œ <code>Serializable</code> ä¼šï¼ˆå‰ææ˜¯çˆ¶ç±»ä¹Ÿå®ç°äº† <code>Serializable</code> æˆ–æœ‰æ— å‚æ„é€ å™¨ç­‰ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">å››ã€ååºåˆ—åŒ–è¿‡ç¨‹å·®å¼‚</h3>

























<table><thead><tr><th>æ­¥éª¤</th><th><code>Serializable</code></th><th><code>Externalizable</code></th></tr></thead><tbody><tr><td>1. åˆ›å»ºå¯¹è±¡</td><td>JVM ç›´æ¥åˆ†é…å†…å­˜ï¼Œ<strong>è·³è¿‡æ„é€ å‡½æ•°</strong></td><td>å…ˆè°ƒç”¨ <strong>æ— å‚æ„é€ å‡½æ•°</strong>ï¼Œå†è°ƒç”¨ <code>readExternal()</code></td></tr><tr><td>2. æ¢å¤çŠ¶æ€</td><td>é€šè¿‡åå°„è®¾ç½®å­—æ®µå€¼</td><td>é€šè¿‡ <code>readExternal()</code> æ‰‹åŠ¨èµ‹å€¼</td></tr><tr><td>3. å®Œæˆ</td><td>å¯¹è±¡ ready</td><td>å¯¹è±¡ ready</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">äº”ã€ä½•æ—¶é€‰æ‹©å“ªä¸ªï¼Ÿ</h3>
<h4 data-id="heading-9">ç”¨ <code>Serializable</code> å½“ï¼š</h4>
<ul>
<li>å¿«é€Ÿå®ç°åºåˆ—åŒ–ï¼›</li>
<li>å¯¹è±¡ç»“æ„ç®€å•ï¼›</li>
<li>ä¸å…³å¿ƒæ€§èƒ½æˆ–ä½“ç§¯ï¼›</li>
<li>ç”¨äºæœ¬åœ°ç¼“å­˜ã€ä¸´æ—¶å­˜å‚¨ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-10">ç”¨ <code>Externalizable</code> å½“ï¼š</h4>
<ul>
<li>éœ€è¦<strong>æè‡´æ€§èƒ½</strong>ï¼ˆå¦‚æ¸¸æˆã€é«˜é¢‘äº¤æ˜“ï¼‰ï¼›</li>
<li>è¦<strong>æ§åˆ¶åºåˆ—åŒ–æ ¼å¼</strong>ï¼ˆå¦‚å…¼å®¹æ—§åè®®ï¼‰ï¼›</li>
<li>éœ€è¦<strong>åŠ å¯†/å‹ç¼©</strong>åºåˆ—åŒ–æ•°æ®ï¼›</li>
<li>å¯¹è±¡åŒ…å«æ•æ„Ÿå­—æ®µï¼Œä¸æƒ³è‡ªåŠ¨æš´éœ²ï¼›</li>
<li>å¸Œæœ›å‡å°‘ç½‘ç»œä¼ è¾“ä½“ç§¯ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">å…­ã€æ›¿ä»£æ–¹æ¡ˆå»ºè®®ï¼ˆç°ä»£å¼€å‘ï¼‰</h3>
<p>è™½ç„¶ä¸¤è€…éƒ½æ˜¯ JDK å†…ç½®æ–¹æ¡ˆï¼Œä½†åœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œ<strong>æ›´æ¨èä½¿ç”¨ç¬¬ä¸‰æ–¹åºåˆ—åŒ–æ¡†æ¶</strong>ï¼š</p>

























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>Web API / é…ç½®</td><td><strong>JSONï¼ˆJackson / Gsonï¼‰</strong></td></tr><tr><td>å¾®æœåŠ¡ / RPC</td><td><strong>Protobuf / Thrift</strong></td></tr><tr><td>é«˜æ€§èƒ½ Java åº”ç”¨</td><td><strong>Kryo / FST</strong></td></tr><tr><td>å¤§æ•°æ®ï¼ˆSpark/Flinkï¼‰</td><td><strong>Kryo</strong></td></tr></tbody></table>
<p>è¿™äº›æ–¹æ¡ˆé€šå¸¸æ¯” <code>Externalizable</code> æ›´é«˜æ•ˆã€æ›´å®‰å…¨ã€æ›´æ˜“ç»´æŠ¤ã€‚</p>
<hr/>
<p>æ€»ç»“ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong><code>Serializable</code> æ˜¯â€œå…¨è‡ªåŠ¨æŒ¡â€ï¼Œ<code>Externalizable</code> æ˜¯â€œæ‰‹åŠ¨æŒ¡â€â€”â€”å‰è€…çœäº‹ï¼Œåè€…ç²¾å‡†å¯æ§ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-12">ä¸‰ã€JDK åŸç”Ÿçš„åºåˆ—åŒ–æ¼æ´RCE</h2>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">import</span> java.io.*;
<span class="hljs-keyword">import</span> java.util.Base64;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SerializeDemo</span> {

	<span class="hljs-comment">// 1. å¿…é¡»å®ç° Serializable æ¥å£</span>
	<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
		<span class="hljs-comment">// å»ºè®®æ˜¾å¼å£°æ˜ serialVersionUIDï¼ˆå¦åˆ™æ¯æ¬¡ä»£ç æ”¹åŠ¨éƒ½ä¼šå˜ï¼Œå¯¼è‡´ååºåˆ—åŒ–å¤±è´¥ï¼‰</span>
		<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;

		<span class="hljs-keyword">private</span>           String username;
		<span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> String password;  <span class="hljs-comment">// transient å­—æ®µä¸ä¼šè¢«åºåˆ—åŒ–ï¼ˆæ•æ„Ÿä¿¡æ¯æ¨èï¼‰</span>
		<span class="hljs-keyword">private</span>           <span class="hljs-type">int</span>    age;

		<span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(String username, String password, <span class="hljs-type">int</span> age)</span> {
			<span class="hljs-built_in">this</span>.username = username;
			<span class="hljs-built_in">this</span>.password = password;
			<span class="hljs-built_in">this</span>.age = age;
		}


		<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeObject</span><span class="hljs-params">(java.io.ObjectOutputStream out)</span> <span class="hljs-keyword">throws</span> IOException {
			out.defaultWriteObject();
			System.out.println(<span class="hljs-string">"writeObject è¢«è°ƒç”¨äº†ï¼ï¼ï¼"</span>);

		}

<span class="hljs-comment">//  å…³é”®æ˜¯åœ¨è¿™é‡Œï¼Œå¦‚æœæœåŠ¡ç«¯æ¥æ”¶ä¸€ä¸ªåºåˆ—åŒ–åçš„å¯¹è±¡ï¼Œååºåˆ—åŒ–çš„æ—¶å€™å°±æœ‰å¯èƒ½</span>
		<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readObject</span><span class="hljs-params">(java.io.ObjectInputStream in)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException {
			System.out.println(<span class="hljs-string">"readObject æˆ‘è¢«è°ƒç”¨äº†ï¼ï¼ï¼"</span>);
			in.defaultReadObject();
			<span class="hljs-comment">// Runtime.getRuntime().exec("calc");                    // Windows</span>
			Runtime.getRuntime().exec(<span class="hljs-string">"open -a Calculator.app"</span>); <span class="hljs-comment">// macOS</span>
			<span class="hljs-comment">// Runtime.getRuntime().exec("gedit");                   // Linux</span>
		}


		<span class="hljs-meta">@Override</span>
		<span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
			<span class="hljs-keyword">return</span> <span class="hljs-string">"User{username='"</span> + username + <span class="hljs-string">"', password='"</span> + password + <span class="hljs-string">"', age="</span> + age + <span class="hljs-string">'}'</span>;
		}
	}

	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
		<span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"admin"</span>, <span class="hljs-string">"123456"</span>, <span class="hljs-number">18</span>);

		<span class="hljs-comment">// ================ åºåˆ—åŒ–åˆ°å­—èŠ‚æ•°ç»„ï¼ˆæœ€å¸¸ç”¨ï¼‰===============</span>
		<span class="hljs-type">byte</span>[] bytes = serialize(user);

		<span class="hljs-comment">// æ–¹ä¾¿ä¼ è¾“/å­˜å‚¨ï¼Œé€šå¸¸ä¼šè½¬æˆ Base64 å­—ç¬¦ä¸²</span>
		<span class="hljs-type">String</span> <span class="hljs-variable">base64</span> <span class="hljs-operator">=</span> Base64.getEncoder().encodeToString(bytes);
		System.out.println(<span class="hljs-string">"Base64 åºåˆ—åŒ–ç»“æœï¼š"</span>);
		System.out.println(base64);

		<span class="hljs-comment">// ================ ååºåˆ—åŒ– ================</span>
		<span class="hljs-type">User</span> <span class="hljs-variable">deserializedUser</span> <span class="hljs-operator">=</span> (User) deserialize(bytes);
		System.out.println(<span class="hljs-string">"ååºåˆ—åŒ–åå¯¹è±¡ï¼š"</span> + deserializedUser);
	}

	<span class="hljs-comment">// åºåˆ—åŒ–æ–¹æ³•ï¼ˆè¿”å› byte[]ï¼‰</span>
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">byte</span>[] serialize(Object obj) <span class="hljs-keyword">throws</span> IOException {
		<span class="hljs-keyword">try</span> (<span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">baos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();
			 <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(baos)) {
			System.out.println(<span class="hljs-string">"================= åºåˆ—åŒ–å¼€å§‹ ================"</span>);
			oos.writeObject(obj);
			oos.flush();
			<span class="hljs-keyword">return</span> baos.toByteArray();
		}
	}

	<span class="hljs-comment">// ååºåˆ—åŒ–æ–¹æ³•ï¼ˆè¿™å°±æ˜¯é«˜å±å…¥å£ï¼ï¼‰</span>
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">deserialize</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] data)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException {
		<span class="hljs-keyword">try</span> (<span class="hljs-type">ByteArrayInputStream</span> <span class="hljs-variable">bais</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(data);
			 <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(bais)) {
			System.out.println(<span class="hljs-string">"================= ååºåˆ—åŒ–å¼€å§‹ ================"</span>);
			<span class="hljs-keyword">return</span> ois.readObject();   <span class="hljs-comment">// â† è¿™é‡Œå°±æ˜¯æ‰€æœ‰ Java ååºåˆ—åŒ–æ¼æ´çš„æ ¹æº</span>
		}
	}

	<span class="hljs-comment">// æ–¹æ³•1ï¼šJVM å¯åŠ¨å‚æ•°å…¨å±€è¿‡æ»¤ï¼ˆæ¨èç”¨äºæ— æ³•æ”¹ä»£ç çš„è€é¡¹ç›®ï¼‰</span>
<span class="hljs-comment">// -Djdk.serialFilter=*!com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl;*!java.lang.Runtime;*!java.lang.ProcessBuilder;maxdepth=20;maxrefs=10000</span>


	<span class="hljs-comment">// æ–¹æ³•3ï¼šæ¯æ¬¡åˆ›å»º ObjectInputStream æ—¶å•ç‹¬è®¾ç½®ï¼ˆæœ€çµæ´»ï¼‰</span>
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">safeDeserialize</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] data)</span> <span class="hljs-keyword">throws</span> Exception {
		<span class="hljs-keyword">try</span> (<span class="hljs-type">ByteArrayInputStream</span> <span class="hljs-variable">bais</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(data);
			 <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(bais) {
				 <span class="hljs-meta">@Override</span>
				 <span class="hljs-keyword">protected</span> Class&lt;?&gt; resolveClass(ObjectStreamClass desc)
						 <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException {

					 <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> desc.getName();

					 <span class="hljs-comment">// ç™½åå•ï¼ˆæ¨èï¼åªå…è®¸ä½ è‡ªå·±çš„ç±»ï¼‰</span>
					 <span class="hljs-keyword">if</span> (!name.startsWith(<span class="hljs-string">"com.yourcompany.yourapp."</span>) &amp;&amp;
							 !name.startsWith(<span class="hljs-string">"[Lcom.yourcompany.yourapp."</span>) &amp;&amp;  <span class="hljs-comment">// æ•°ç»„</span>
							 !name.equals(<span class="hljs-string">"java.lang.String"</span>) &amp;&amp;
							 !name.startsWith(<span class="hljs-string">"java.util."</span>) &amp;&amp;
							 !name.startsWith(<span class="hljs-string">"java.lang."</span>)) {
						 <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvalidClassException</span>(<span class="hljs-string">"Unauthorized class"</span>, name);
					 }

					 <span class="hljs-comment">// æˆ–è€…ç”¨é»‘åå•ï¼ˆä¸æ¨èï¼Œå®¹æ˜“è¢«ç»•è¿‡ï¼‰</span>
					 <span class="hljs-keyword">if</span> (name.contains(<span class="hljs-string">"TemplatesImpl"</span>) ||
							 name.contains(<span class="hljs-string">"AnnotationInvocationHandler"</span>) ||
							 name.contains(<span class="hljs-string">"Runtime"</span>) ||
							 name.contains(<span class="hljs-string">"ProcessBuilder"</span>)) {
						 <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvalidClassException</span>(<span class="hljs-string">"Blocked dangerous class"</span>, name);
					 }

					 <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.resolveClass(desc);
				 }
			 }) {
			<span class="hljs-keyword">return</span> ois.readObject();
		}
	}
}
</code></pre>
<h2 data-id="heading-13">å››ã€æ€»ç»“</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¸…åè”åˆå¼€æºï¼é¦–ä¸ªåŸºäº MCP çš„ RAG æ¡†æ¶ï¼Œå¤ªç§€äº†ã€‚]]></title>    <link>https://juejin.cn/post/7574382925762199590</link>    <guid>https://juejin.cn/post/7574382925762199590</guid>    <pubDate>2025-11-20T06:25:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574382925762199590" data-draft-id="7574529034648191028" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¸…åè”åˆå¼€æºï¼é¦–ä¸ªåŸºäº MCP çš„ RAG æ¡†æ¶ï¼Œå¤ªç§€äº†ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-20T06:25:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¸…åè”åˆå¼€æºï¼é¦–ä¸ªåŸºäº MCP çš„ RAG æ¡†æ¶ï¼Œå¤ªç§€äº†ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:25:22.000Z" title="Thu Nov 20 2025 06:25:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é€› GitHub æŒ–åˆ°å®äº†ï¼Œè¿™ä¸ªå«Â UltraRAG çš„å¼€æºé¡¹ç›®æ˜¯é¦–ä¸ªåŸºäº MCP çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ¡†æ¶ï¼Œä¸å†™ä»£ç ä¹Ÿèƒ½ç©è½¬ã€‚</p>
<p>ç”¨ YAML æ–‡ä»¶è½»æ¾æ„å»ºå¤æ‚ RAG ç³»ç»Ÿã€‚</p>
<p>RAG ç³»ç»Ÿï¼šç®€å•æ¥è¯´ï¼Œå°±æ˜¯è®© AI æ¨¡å‹èƒ½å…ˆæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå†ç”Ÿæˆç­”æ¡ˆï¼Œä»è€Œæé«˜å‡†ç¡®æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2c13ef5e3c44653831e6b0219dd4803~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=IbJTZxvP7qN%2FWYNlwNdwwCNK6wc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>UltraRAG æ˜¯ç”±æ¸…å THUNLPã€ä¸œåŒ—å¤§å­¦ NEUIRã€OpenBMB ç­‰å¤šæ–¹è”åˆæ¨å‡ºçš„å¼€æºé¡¹ç›®ã€‚</p>
<p>å®ƒèƒ½è®©ä½ æ›´å®¹æ˜“æ„å»ºå’Œæµ‹è¯•å¤æ‚çš„ RAG ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-0">01ã€å¼€æºé¡¹ç›®ç®€ä»‹</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a865b6b11e84c2791f8827b3427af94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=%2Fd%2FSy2cPtIZQPmiivi7eurMwXAE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®çš„æ ¸å¿ƒæ€è·¯æ˜¯æŠŠ RAG çš„æ ¸å¿ƒç»„ä»¶å°è£…ä¸ºæ ‡å‡†åŒ–çš„ç‹¬ç«‹ MCP Serverï¼Œæä¾›å‡½æ•°çº§ Tool æ¥å£æ”¯æŒçµæ´»è°ƒç”¨ï¼Œå€ŸåŠ© MCP å®¢æˆ·ç«¯å»ºç«‹ç®€æ´çš„é“¾è·¯æ­å»ºã€‚è¿™ç§è®¾è®¡è®©æƒ³ä½¿ç”¨ RAG ç³»ç»Ÿçš„äººåªéœ€ç¼–å†™ YAML é…ç½®æ–‡ä»¶ï¼Œå°±èƒ½ç›´æ¥å£°æ˜å¤æ‚é€»è¾‘ï¼Œå¤§å¤§é™ä½äº†æŠ€æœ¯é—¨æ§›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9049ce4ef374c338e5e902e65f9fd4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=gkgnR5Dx%2BFM3iAyegddAYrRKrq4%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>æ–°ç‰ˆç‰ˆæœ¬å‡çº§ï¼Œæœ€æ–°çš„ 2.1 ç‰ˆæœ¬ä¸»è¦å›´ç»•ä»¥ä¸‹ä¸‰å¤§æ ¸å¿ƒæ–¹å‘è¿›è¡Œäº†å…¨é¢å‡çº§ï¼š</p>
<p><strong>â‘  åŸç”Ÿå¤šæ¨¡æ€</strong></p>
<p>ç»Ÿä¸€æ¡†æ¶æ”¯æŒæ–‡æœ¬ã€å›¾åƒçš„æ£€ç´¢ä¸ç”Ÿæˆï¼Œæ–°å¢ VisRAG Pipeline å®ç°Â PDF åˆ°å¤šæ¨¡æ€é—®ç­”çš„é—­ç¯ã€‚</p>
<p>è€Œä¸”å†…ç½®çš„å¤šæ¨¡æ€ Benchmark è¦†ç›–è§†è§‰é—®ç­”ç­‰ä»»åŠ¡ï¼Œå¹¶æä¾›ç»Ÿä¸€çš„è¯„ä¼°ä½“ç³»ï¼Œæ–¹ä¾¿ç ”ç©¶è€…å¿«é€Ÿå¯¹æ¯”å®éªŒæ•ˆæœã€‚</p>
<p><strong>â‘¡ çŸ¥è¯†æ¥å…¥ä¸è¯­æ–™æ„å»ºè‡ªåŠ¨åŒ–</strong></p>
<p>æ”¯æŒå¤šæ ¼å¼æ–‡æ¡£ï¼Œæ¯”å¦‚ Wordã€ç”µå­ä¹¦ã€ç½‘é¡µå­˜æ¡£çš„è‡ªåŠ¨è§£æä¸åˆ†å—ï¼Œä¸éœ€è¦ç¼–å†™å¤æ‚è„šæœ¬å³å¯æ„å»ºç»Ÿä¸€æ ¼å¼çš„çŸ¥è¯†åº“ã€‚</p>
<p>è€Œä¸”åœ¨ PDF è§£ææ–¹é¢ï¼Œå®ƒé›†æˆäº†Â MinerU å·¥å…·ï¼Œèƒ½é«˜ä¿çœŸè¿˜åŸå¤æ‚ç‰ˆé¢ä¸å¤šæ ç»“æ„ï¼Œå¹¶æ”¯æŒå°† PDF æŒ‰é¡µè½¬æ¢ä¸ºå›¾åƒï¼Œä¿ç•™è§†è§‰å¸ƒå±€ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8ce6bddc3e24b6f9d622311e52935da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=yFOVXu9a4gCl9WHK%2FZwtai%2BAlBI%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p><strong>â‘¢ ç»Ÿä¸€å·¥ä½œæµ</strong></p>
<p>é€šè¿‡ YAML é…ç½®é©±åŠ¨æ£€ç´¢ã€ç”Ÿæˆã€è¯„ä¼°å…¨æµç¨‹ï¼Œæ”¯æŒå¤šç§å¼•æ“ä¸å¯è§†åŒ–åˆ†æï¼Œæå‡å®éªŒå¤ç°æ•ˆç‡ã€‚</p>
<p>å¼€æºé¡¹ç›®é“¾æ¥å’Œç›¸å…³æ•™ç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">ä»£ç ä»“åº“ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/</span><span class="hljs-title class_">Open</span>BMB/<span class="hljs-title class_">Ultra</span>RAGæ•™ç¨‹æ–‡æ¡£ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/ultrarag.openbmb.cn/</span>æ•°æ®é›†ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/modelscope.cn/datasets</span><span class="hljs-regexp">/UltraRAG/</span><span class="hljs-title class_">Ultra</span>RAG_Benchmark
</code></pre>
<h2 data-id="heading-1">02ã€å®é™…æ•ˆæœ</h2>
<p>å…ˆæ¥çœ‹çœ‹æ•ˆæœï¼ŒåŸºäºè¿™ä¸ªå¼€æºé¡¹ç›®æ­å»ºçš„ RAG ç³»ç»Ÿçš„çœŸå®ç¤ºä¾‹ã€‚æ¯”å¦‚ç¬¬ä¸€ä¸ª Caseï¼šåŸºäºè®ºæ–‡ã€ŠAttention is All You Needã€‹å’¨è¯¢ä¸€ä¸ªé—®é¢˜ï¼Œè®ºæ–‡ä¸­çš„è¡¨ 4 å…·ä½“è¯´äº†ä»€ä¹ˆï¼Œå¸®å¿™è§£é‡Šä¸€ä¸‹ã€‚</p>
<p>AI å¯ä»¥ç›´æ¥è§£æè¡¨æ ¼å†…å®¹ï¼Œç»™å‡ºå¦‚ä¸‹å›ç­”ï¼Œè¿˜æ˜¯æŒºæ¸…æ™°çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75ef2788b9b74a938abc6209353526ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=Y5h07mFEeNL1B0n1Yenw6WXFing%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ˜¯å› ä¸ºåˆšåˆšå‡çº§çš„ 2.0 å¯ä»¥ç»Ÿä¸€å¤„ç†æ–‡æœ¬å’Œå›¾åƒæ•°æ®ã€‚ä¸Šä¼ çš„ PDF æ–‡æ¡£ï¼Œå®ƒä¸ä»…èƒ½è¯»å–æ–‡å­—ï¼Œè¿˜èƒ½åˆ†æé‡Œé¢çš„å›¾è¡¨å’Œå…¬å¼ï¼Œå®ç°çœŸæ­£çš„å¤šæ¨¡æ€æ£€ç´¢å’Œç”Ÿæˆã€‚è¿™é¿å…äº†ä»¥å‰éœ€è¦åˆ‡æ¢ä¸åŒå·¥å…·çš„éº»çƒ¦ã€‚</p>
<p>ç¬¬äºŒä¸ª Caseï¼šåŸºäºéº¦è‚¯é”¡çš„ã€Šç”Ÿæˆå¼äººå·¥æ™ºèƒ½çš„ç»æµæ½œåŠ›ã€‹æŠ¥å‘Šã€‚è®© AI åŸºäºé‡Œé¢çš„å†…å®¹ï¼Œè¾“å‡ºç”Ÿæˆå¼ AI æœ€æœ‰æ½œåŠ›çš„ä¼ä¸šèŒèƒ½æœ‰å“ªäº›ï¼Ÿè¯·ç»“åˆå›¾è¡¨å’Œæ­£æ–‡è¯´æ˜å®ƒä»¬åœ¨ç»„ç»‡ç”Ÿäº§åŠ›ä¸­çš„å½±å“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbcd64fcf15e44ea9a2491d8a56f265c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=%2BGJX5DQ0v0DjGjMmjBwWPFK8uSI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-2">03ã€å¦‚ä½•ä½¿ç”¨</h2>
<p>UltraRAG æ”¯æŒä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ Conda åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64cdc7ca0a43485ea4d3a4625235f39f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=hwdlijnYHX06RPJC2%2FeKRlES%2BH4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦å¤–ä¸€ç§éƒ¨ç½²æ–¹å¼æ˜¯é€šè¿‡ Dockerï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a551f733f46f4ccf83c9ad0f9abdf14b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=xw8jxH%2F9LMDDCvWB7NiYUEBywbc%3D" alt="å›¾ç‰‡" loading="lazy"/>æ¥ä¸‹æ¥å°±èƒ½å¯ä»¥åŸºäºÂ UltraRAGÂ è¿è¡Œä¸€ä¸ªå®Œæ•´çš„ RAG Pipeline äº†ã€‚ä½¿ç”¨æµç¨‹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>ç¼–å†™ Pipeline é…ç½®æ–‡ä»¶</li>
<li>ç¼–è¯‘ Pipeline å¹¶è°ƒæ•´å‚æ•°</li>
<li>è¿è¡Œ Pipeline</li>
</ul>
<p>è¿™é‡Œä¸è¯¦ç»†å±•å¼€ï¼Œå¯ä»¥ç›´æ¥çœ‹ä¸‹é¢è¿™ä¸ªæ–‡æ¡£ï¼Œå†™çš„å¾ˆè¯¦ç»†ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/ultrarag.openbmb.cn/pages</span><span class="hljs-regexp">/cn/getting</span>_started/quick_start
</code></pre>
<p>ä½ ä¸éœ€è¦å†™ä»£ç ï¼Œé…ç½®ä¸€ä¸ª YMAL æ–‡ä»¶å°±è¡Œäº†ã€‚è€Œä¸”å¼€æºé¡¹ç›®å†…ç½®äº† Case Study Viewer ç•Œé¢ï¼Œå¯ä»¥å¯¹ç»“æœè¿›è¡Œäº¤äº’å¼æµè§ˆä¸åˆ†æã€‚ å°±æ˜¯ä¸‹é¢è¿™æ ·çš„ç•Œé¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0d0da46cddd40f3bcc2fa9a7288195a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=wSodTUXv3Rcr%2BfwaGKx6lzwHF%2FM%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fba1cf13c5bc4c1b9d21f6fa4e57944e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224722&amp;x-signature=Rvp4%2BQCuOLYwvNMHWaxkZjxU1%2Bk%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AutoMQ Ã— RustFS: Building a new generation of low-cost, high-performance Diskless Kafka based on object storage]]></title>    <link>https://juejin.cn/post/7574380953176801322</link>    <guid>https://juejin.cn/post/7574380953176801322</guid>    <pubDate>2025-11-20T06:31:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574380953176801322" data-draft-id="7574530224852631558" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AutoMQ Ã— RustFS: Building a new generation of low-cost, high-performance Diskless Kafka based on object storage"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-11-20T06:31:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AutoMQ"/> <meta itemprop="url" content="https://juejin.cn/user/2878958479084707"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AutoMQ Ã— RustFS: Building a new generation of low-cost, high-performance Diskless Kafka based on object storage
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2878958479084707/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AutoMQ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:31:30.000Z" title="Thu Nov 20 2025 06:31:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Enterprises' thirst for real-time data is driving profound changes in data architecture. However, building modern, efficient data streaming platforms generally faces two major bottlenecks: First, Apache Kafka, as the central hub for real-time data, exposes severe cost and operational challenges in cloud environments due to its traditional architecture. High holding costs, near-zero elasticity, and complex partition migrations force enterprises to compromise between cost and performance.</p>
<p>Second, the selection of object storageâ€”the cornerstone of data persistenceâ€”is equally challenging. Traditional distributed storage solutions, while powerful, are complex in architecture and have extremely high deployment and operational barriers; while lightweight solutions use the AGPL license, posing potential compliance risks and restrictions for enterprise commercial use. Enterprises need a new data architecture that balances high performance, low cost, ease of maintenance, and license friendliness.</p>
<p>To address these challenges, <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.automq.com%2F%3Futm_source%3Dautomq_rustfs_partner" target="_blank" title="https://www.automq.com/?utm_source=automq_rustfs_partner" ref="nofollow noopener noreferrer">AutoMQ</a> and <a href="https://link.juejin.cn?target=https%3A%2F%2Frustfs.com%2F%3Futm_source%3Dautomq_rustfs_partner" target="_blank" title="https://rustfs.com/?utm_source=automq_rustfs_partner" ref="nofollow noopener noreferrer">RustFS</a> have announced a strategic partnership. The two parties will deeply integrate AutoMQ's cloud-native stream processing capabilities, which are 100% compatible with the Apache Kafka protocol, with RustFS, a high-performance distributed object storage built on Rust, licensed under Apache 2.0, and compatible with S3. This collaboration aims to provide global enterprises with a next-generation Diskless Kafka platform that offers a superior architecture, lower costs, higher performance, and complete avoidance of licensing risks, thereby fundamentally solving the cost and efficiency challenges of real-time data stream processing in the cloud era.</p>
<h3 data-id="heading-0"><strong>About AutoMQ</strong></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.automq.com%2F%3Futm_source%3Dautomq_rustfs_partner" target="_blank" title="https://www.automq.com/?utm_source=automq_rustfs_partner" ref="nofollow noopener noreferrer">AutoMQ</a> is a next-generation cloud-native Kafka-compatible stream processing platform dedicated to solving the core pain points of traditional Kafka in cloud environments: high cost, limited elasticity, and complex operation and maintenance. AutoMQ employs an advanced compute-storage separation architecture, directly persisting streaming data to S3-compatible object storage, while the compute layer (Broker) is completely stateless. This revolutionary design ensures 100% compatibility with the Apache Kafka protocol, guaranteeing seamless migration to existing ecosystems such as Flink and Spark, while delivering a hundredfold increase in elasticity efficiency and second-level partition migration capabilities, helping enterprises run real-time streaming services with up to 90% savings in Total Cost of Ownership (TCO).</p>
<p>ğŸ’¡ Core Advantages</p>
<ul>
<li><strong>Extreme Cost Efficiency</strong> : Achieves unlimited storage and pay-as-you-go pricing based on object storage, and completely eliminates expensive cross-Availability Zone (AZ) data replication traffic through a multi-point write architecture, achieving up to 90% TCO savings.</li>
<li><strong>Hundredfold Elasticity Efficiency</strong> : Stateless Broker supports second-level auto-scaling of compute resources. Partition migration time has been reduced from several hours to 1.5 seconds, enabling truly seamless cluster expansion for business operations.</li>
<li><strong>100% Kafka Compatibility</strong> : Fully compatible with the Apache Kafka protocol and ecosystem, supporting zero-downtime migration from existing clusters without any code modifications.</li>
<li><strong>Fully Managed and Zero-Maintenance</strong> : Built-in automatic data rebalancing and fault self-healing capabilities, providing a BYOC (Bring Your Own Cloud) deployment mode. Data remains 100% within the customer's VPC, ensuring data privacy and security.</li>
</ul>
<p><img src="https://static-file-demo.automq.com/6809c9c3aaa66b13a5498262/69099ff1285da2a02ccc631f_67480fef30f9df5f84f31d36%252F69099fe94bf986bc370da817_WVjZ.png" alt="" loading="lazy"/></p>
<p>Figure 1: AutoMQ Advanced Cloud-Native Architecture</p>
<h3 data-id="heading-1"><strong>About RustFS</strong></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frustfs.com%2F%3Futm_source%3Dautomq_rustfs_partner" target="_blank" title="https://rustfs.com/?utm_source=automq_rustfs_partner" ref="nofollow noopener noreferrer">RustFS</a> is a high-performance distributed object storage system developed in Rust and compliant with the S3 protocol. It aims to provide a robust data foundation for AI/ML, big data, and cloud-native applications. Unlike heavyweight architectures like Ceph, RustFS adopts a lightweight "metadata-free" design, where all nodes are equal, greatly simplifying deployment, operation, and scaling, and avoiding single points of failure in metadata. Leveraging the memory safety, high concurrency, and high performance advantages of the Rust language, RustFS achieves extremely high read/write performance and memory stability while providing exabyte-scale scalability.</p>
<p>ğŸ’¡ Core Advantages</p>
<ul>
<li><strong>Apache 2.0 Friendly License</strong> : Utilizing the Apache-2.0 open-source license, it is completely friendly to enterprise commercial use, avoiding the intellectual property and compliance risks associated with licenses such as AGPL.</li>
<li><strong>High Performance and High Stability</strong> : Developed in Rust, it naturally possesses advantages in memory safety and high concurrency; under equivalent configurations, its read/write performance far surpasses Ceph, and its memory usage is stable with no high-concurrency jitter.</li>
<li><strong>Lightweight, metadata-free architecture</strong> : Deployment and maintenance are extremely simple, requiring no dedicated metadata server. Scaling is easy, requiring only a single command to start, significantly lowering the operational threshold.</li>
<li><strong>100% S3 Compatibility</strong> : Fully compatible with the S3 API, supporting existing toolchains and SDKs. It also supports enterprise-level features such as version control, object read-only, and cross-region replication, seamlessly replacing existing S3 storage solutions.</li>
</ul>
<p><img src="https://static-file-demo.automq.com/6809c9c3aaa66b13a5498262/69099ff1285da2a02ccc6324_67480fef30f9df5f84f31d36%252F69099fea4bf986bc370da8b8_l9lr.png" alt="" loading="lazy"/></p>
<p>Figure 2: RustFS Architecture (Source: RustFS Official Website)</p>
<h2 data-id="heading-2"><strong>AutoMQ Ã— RustFS: Building a secure, scalable, cross-cloud Diskless Kafka architecture</strong></h2>
<p>The deep integration of AutoMQ's compute-storage separation architecture and RustFS's high-performance distributed storage achieves end-to-end technical synergy across three dimensions: cross-cloud support, security and reliability, and unlimited scalability, jointly forming a next-generation Diskless Kafka platform.</p>
<ol>
<li><strong>Building a Unified, Highly Available Data Flow</strong></li>
</ol>
<p>Both architectures are designed specifically for multi-cloud environments. AutoMQ provides a flexible BYOC (Bring Your Own Cloud) deployment model, supporting compute instances deployed in multi-cloud environments such as Amazon Web Services, Google Cloud, and Azure, as well as private data centers (IDCs). RustFS provides "true multi-cloud storage" capabilities at the storage layer, supporting bucket-level proactive-proactive cross-region replication. The combination of AutoMQ's BYOC compute layer and RustFS's cross-cloud storage layer enables enterprises to build unified, vendor-locked real-time data services, truly achieving highly available data flow across clouds and regions.</p>
<ol>
<li><strong>Achieving End-to-End Data Security and Privacy</strong></li>
</ol>
<p>Both technologies jointly construct end-to-end security and reliability. AutoMQ provides TLS/mTLS encryption at the access layer and deploys the data plane within the user's VPC using BYOC mode, ensuring "data stays within the VPC" and "superior data privacy." RustFS provides high-performance object storage security encryption at the storage layer and ensures data integrity and high availability through version control, object read-only (WORM), and proactive replication mechanisms. AutoMQ is responsible for access security and data privacy at the computation layer, while RustFS is responsible for encryption and data redundancy at the persistence layer. Together, they provide enterprises with end-to-end security from access and computation to storage, along with a strict read-after-write consistency model.</p>
<ol>
<li><strong>Independent flexibility in computing and storage</strong></li>
</ol>
<p>The architectures of both solutions completely resolve the pain point of traditional Kafka's difficulty in scaling. RustFS adopts a lightweight architecture with a "centralized metadata server," supporting EB-level storage capacity and "unlimited scaling." AutoMQ, with its storage-compute separation and stateless broker design, achieves auto-scaling at the compute layer and second-level partition migration. The perfect combination of AutoMQ's compute layer elasticity (second-level scaling) and RustFS's storage layer elasticity (EB-level capacity) finally allows enterprises to independently and on-demand expand compute resources (to cope with traffic surges) or storage resources (to cope with data growth), achieving true unlimited scaling.</p>
<p><img src="https://static-file-demo.automq.com/6809c9c3aaa66b13a5498262/69099ff1285da2a02ccc6327_67480fef30f9df5f84f31d36%252F69099fea285da2a02ccc5faa_Zor5.png" alt="" loading="lazy"/></p>
<p>Figure 3: AutoMQ &amp; RustFS Collaborative Architecture</p>
<h2 data-id="heading-3"><strong>What It Brings</strong></h2>
<p>The deep technical synergy between AutoMQ and RustFS brings enterprises a high-performance, low-cost, secure, and compliant real-time data infrastructure. Its core advantages are:</p>
<ul>
<li><strong>True unlimited elasticity and high performance</strong> : Both architectures support independent scaling. AutoMQ's stateless broker supports second-level elasticity, reducing partition migration time from hours to seconds, while maintaining a low latency of less than 10ms for P99. RustFS provides EB-level storage capacity and "unlimited scaling" capabilities. Enterprises can independently scale compute or storage as needed to cope with traffic surges and data growth.</li>
<li><strong>End-to-end security, reliability, and compliance</strong> : AutoMQ's BYOC deployment model ensures "data never leaves the VPC," guaranteeing excellent data privacy and providing TLS/mTLS encryption. RustFS provides high-performance encryption, version control, and WORM (read-only object) functionality at the storage layer. More importantly, RustFS's use of the Apache 2.0 license allows enterprises to completely avoid "license traps" like AGPL, achieving 100% commercial friendliness and compliance.</li>
<li><strong>A Fully Open-Source Joint Solution</strong> : At the heart of this joint solution lies our shared belief in the open-source ecosystem. Both parties have built on the Apache License, collaborating to create a 100% full-stack Apache-licensed solution for enterprises, from the compute layer to the storage layer. This not only provides enterprises with a secure and compliant commercial option with a high degree of autonomy and control, but this open practice has also won widespread recognition from the community.</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAutoMQ%2Fautomq%2F%3Futm_source%3Dautomq_rustfs_partner" target="_blank" title="https://github.com/AutoMQ/automq/?utm_source=automq_rustfs_partner" ref="nofollow noopener noreferrer">AutoMQ open source project address</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs%2F%3Futm_source%3Dautomq_rustfs_partner" target="_blank" title="https://github.com/rustfs/rustfs/?utm_source=automq_rustfs_partner" ref="nofollow noopener noreferrer">RustFS open-source project address</a></p>
<ul>
<li><strong>Extreme Cost Optimization</strong> : AutoMQ, with its compute-storage separation architecture, can save up to 90% on Kafka TCO and, through multi-point read/write architecture optimization, completely avoids expensive cross-Availability Zone (AZ) traffic. RustFS's lightweight architecture has low hardware requirements, and combined with the Apache 2.0 friendly license, further reduces storage and software licensing costs.</li>
<li><strong>Cross-Cloud Support and Greatly Simplified Operations</strong> : Both companies provide "true multi-cloud storage" and deployment capabilities, helping enterprises prevent single-cloud vendor lock-in. AutoMQ's fully managed and automatic data rebalancing features, combined with RustFS's lightweight architecture with "no metadata center" and low difficulty of use, greatly reduce the operational complexity of the entire system.</li>
</ul>
<h2 data-id="heading-4">Looking Ahead</h2>
<p>AutoMQ and RustFS will continue to deepen their technological integration, jointly driving the development of cloud-native real-time data infrastructure. Together, they will provide global enterprises with lower-cost, higher-performance, easier-to-maintain, and compliance-risk-free data streaming solutions, accelerating the transformation of enterprises from data to intelligence and jointly building an open and efficient cloud-native data ecosystem.</p>
<p>Visit the AutoMQ website now to learn about the ultimate performance and cost advantages of the next-generation cloud-native Kafka: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.automq.com%2F%3Futm_source%3Dautomq_rustfs_partner" target="_blank" title="https://www.automq.com/?utm_source=automq_rustfs_partner" ref="nofollow noopener noreferrer">AutoMQ</a></p>
<p>Also visit the RustFS website to explore high-performance S3 storage solutions based on the Apache-2.0 license: <a href="https://link.juejin.cn?target=https%3A%2F%2Frustfs.com%2F%3Futm_source%3Dautomq_rustfs_partner" target="_blank" title="https://rustfs.com/?utm_source=automq_rustfs_partner" ref="nofollow noopener noreferrer">RustFS</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æé«˜ iOS åº”ç”¨é€†å‘éš¾åº¦çš„å·¥ç¨‹å®è·µï¼Œå¤šå·¥å…·è”åŠ¨çš„å…¨æ ˆå®‰å…¨æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7574581079626498054</link>    <guid>https://juejin.cn/post/7574581079626498054</guid>    <pubDate>2025-11-20T06:23:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574581079626498054" data-draft-id="7574530224852533254" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æé«˜ iOS åº”ç”¨é€†å‘éš¾åº¦çš„å·¥ç¨‹å®è·µï¼Œå¤šå·¥å…·è”åŠ¨çš„å…¨æ ˆå®‰å…¨æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-20T06:23:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿæ˜Ÿç”µç¯çŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2848205394945444"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æé«˜ iOS åº”ç”¨é€†å‘éš¾åº¦çš„å·¥ç¨‹å®è·µï¼Œå¤šå·¥å…·è”åŠ¨çš„å…¨æ ˆå®‰å…¨æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2848205394945444/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿæ˜Ÿç”µç¯çŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:23:50.000Z" title="Thu Nov 20 2025 06:23:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨å®‰å…¨é¢†åŸŸï¼Œâ€œæé«˜ iOS åº”ç”¨é€†å‘éš¾åº¦â€å¹¶ä¸æ˜¯ä¸€å¥æŠ½è±¡å£å·ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯åº¦é‡ã€å¯è¿­ä»£ã€å¯å·¥ç¨‹åŒ–çš„ç›®æ ‡ã€‚
æ— è®ºä½ çš„åº”ç”¨æ˜¯ Swiftã€ObjCã€Flutterã€H5ã€Unityã€RNï¼Œæœ€ç»ˆéƒ½ä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ª IPAï¼Œè€Œé€†å‘äººå‘˜æ‹¿åˆ° IPA åï¼Œæœ‰ä¸€æ•´å¥—æˆç†Ÿå·¥å…·é“¾å¯ä»¥å¯¹ä½ çš„ App è¿›è¡Œç»“æ„åˆ†æã€ç¬¦å·è¿˜åŸä¸åŠ¨æ€ Hookã€‚</p>
<p>å› æ­¤ï¼Œé˜²æŠ¤çš„æœ¬è´¨ä¸æ˜¯â€œæ— æ³•è¢«é€†å‘â€ï¼Œè€Œæ˜¯è®©é€†å‘ <strong>æˆæœ¬æé«˜</strong>ã€<strong>å®šä½å›°éš¾</strong>ã€<strong>å…¥æ‰‹æˆæœ¬ä¸Šå‡</strong>ã€å¹¶ä¸”ä¿æŒ <strong>è¿è¡Œç¨³å®š</strong>ã€‚</p>
<p>æœ¬æ–‡ç»™å‡ºä¸€å¥—çœŸå®å¼€å‘è€…å¯ä»¥è½åœ°çš„é€†å‘éš¾åº¦æå‡æ–¹æ¡ˆï¼Œæ¶µç›–é™æ€å±‚ã€åŠ¨æ€å±‚ã€èµ„æºå±‚ã€æˆå“æ··æ·†ã€éªŒè¯æµ‹è¯•ã€åˆ°æ˜ å°„è¡¨æ²»ç†ï¼Œå®Œå…¨å¯å¤åˆ¶ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€é€†å‘äººå‘˜ä¼šæ€æ ·æ‹†è§£ iOS åº”ç”¨ï¼Ÿ</h2>
<p>ä»–ä»¬ä¸€èˆ¬ä¼šï¼š</p>
<h4 data-id="heading-1">1. é™æ€åˆ†æ IPA</h4>
<ul>
<li>Hopper / IDA</li>
<li>class-dump</li>
<li>Mach-O ç¬¦å·æ‰«æ</li>
<li>æŸ¥çœ‹åº”ç”¨ Bundle èµ„æº</li>
<li>åˆ†æ JS/H5ã€é…ç½®æ–‡ä»¶ã€åŠ¨æ€åº“ç»“æ„</li>
</ul>
<h4 data-id="heading-2">2. åŠ¨æ€æ”»å‡»</h4>
<ul>
<li>Frida åŠ¨æ€ Hook</li>
<li>Cycript æ³¨å…¥</li>
<li>Runtime Method Swizzling</li>
<li>è¶Šç‹±ç¯å¢ƒä¸‹æŠ“åŒ…ä¸è¡Œä¸ºåˆ†æ</li>
</ul>
<h4 data-id="heading-3">3. è¡Œä¸ºåˆ†æ</h4>
<ul>
<li>åˆ†æå¯åŠ¨æµç¨‹</li>
<li>å®šä½é‰´æƒæˆ–åŠ å¯†é€»è¾‘</li>
<li>å®šä½æ’ä»¶æ¡¥æ¥æ¥å£</li>
<li>æŸ¥æ‰¾ä¸šåŠ¡å…³é”®è·¯å¾„</li>
</ul>
<p><strong>åªè¦ä½ çš„ç¬¦å·å’Œèµ„æºä¸éšè—ï¼Œè¿™äº›æ­¥éª¤å‡ ä¹éƒ½ä¸éœ€è¦å¤ªå¤šåŠªåŠ›ã€‚</strong></p>
<hr/>
<h2 data-id="heading-4">äºŒã€æé«˜é€†å‘éš¾åº¦éœ€è¦è¦†ç›–å“ªäº›å±‚ï¼Ÿ</h2>
<p>çœŸæ­£æœ‰æ•ˆçš„é€†å‘é˜²æŠ¤å¿…é¡»è¦†ç›–ï¼š</p>
<p><strong>â‘  ç¬¦å·å±‚ï¼ˆæ ¸å¿ƒï¼‰</strong></p>
<ul>
<li>ç±»å</li>
<li>æ–¹æ³•å</li>
<li>Swift æ¨¡å—</li>
<li>å±æ€§å</li>
</ul>
<p><strong>â‘¡ èµ„æºå±‚</strong></p>
<ul>
<li>å›¾ç‰‡ MD5 æ‰°åŠ¨</li>
<li>JSON/JS/H5 æ–‡ä»¶åæ‰°åŠ¨</li>
<li>æ¸¸æˆèµ„æºæˆ–æ··åˆåº”ç”¨èµ„æºä¿æŠ¤</li>
</ul>
<p><strong>â‘¢ äºŒè¿›åˆ¶ç»“æ„å±‚</strong></p>
<ul>
<li>å»é™¤å¯è¯»ç¬¦å·</li>
<li>å‡å°‘ç»“æ„å…¥å£</li>
<li>æ‰°åŠ¨ç¬¦å·å¼•ç”¨å…³ç³»</li>
</ul>
<p><strong>â‘£ è¿è¡Œæ—¶å±‚</strong></p>
<ul>
<li>æé«˜ Hook å®šä½éš¾åº¦</li>
<li>å…³é”®é€»è¾‘çš„åŠ¨æ€è·¯å¾„ä¿æŠ¤</li>
</ul>
<p><strong>â‘¤ ç­¾åå±‚ä¸å®Œæ•´æ€§å±‚</strong></p>
<ul>
<li>é˜²æ­¢äºŒæ¬¡æ‰“åŒ…</li>
<li>é˜²æ­¢æ³¨å…¥</li>
</ul>
<p><strong>â‘¥ æ˜ å°„æ²»ç†å±‚</strong></p>
<ul>
<li>é¿å…æ··æ·†åæ— æ³•ç¬¦å·åŒ–å´©æºƒ</li>
<li>ä¿è¯åŠŸèƒ½ç¨³å®šæ€§</li>
</ul>
<p>æ²¡æœ‰è¦†ç›–è¿™äº›å±‚ï¼Œåªåšè¡¨é¢çš„â€œæ··æ·†â€æ˜¯æ— æ³•æ˜¾è‘—æå‡é€†å‘éš¾åº¦çš„ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€å¯ç›´æ¥è½åœ°çš„å¤šå·¥å…·ç»„åˆæ–¹æ¡ˆï¼ˆæ¨èé“¾è·¯ï¼‰</h2>
<p>è¿™æ˜¯æ¶æ„å›¢é˜Ÿå¯ä»¥ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®é‡Œçš„å…¨æµç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-6"><strong>ç¬¬ä¸€æ­¥ï¼šé™æ€æ‰«æï¼ˆå‘ç°é£é™©é¢ï¼‰</strong></h3>
<p>ä½¿ç”¨ <strong>MobSF</strong>ï¼š</p>
<ul>
<li>é™æ€ç»“æ„æ‰«æ</li>
<li>æ•æ„Ÿ API æ£€æµ‹</li>
<li>Swift/ObjC ç¬¦å·å¯è¯»æ€§è¯„ä¼°</li>
<li>èµ„æºè·¯å¾„æ‰«æ</li>
</ul>
<p>ä½¿ç”¨ <strong>class-dump</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">class-dump app.ipa &gt; dump.txt
</code></pre>
<p>è¾“å‡º Swift/ObjC çš„å¯è§†ç¬¦å·ã€‚</p>
<p>è¿™ä¸€æ­¥çš„ç»“æœå°†ç”Ÿæˆï¼š</p>
<ul>
<li>ç™½åå•</li>
<li>ä¸å¯æ··æ·†çš„ç¬¦å·åˆ—è¡¨</li>
<li>å¼•ç”¨é“¾ï¼ˆJSã€H5ã€æ’ä»¶ç­‰ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>ç¬¬äºŒæ­¥ï¼ˆè‹¥èƒ½æ”¹æºç ï¼‰ï¼šæºç çº§æ··æ·†</strong></h3>
<p>å·¥å…·åŒ…æ‹¬ï¼š</p>
<ul>
<li>Swift Shieldï¼ˆSwift æ–¹æ³•/ç±»/å±æ€§é‡å‘½åï¼‰</li>
<li>obfuscator-llvmï¼ˆæ§åˆ¶æµæ··æ·†ã€å­—ç¬¦ä¸²åŠ å¯†ï¼‰</li>
<li>è‡ªå®šä¹‰è„šæœ¬å¤„ç†æ•æ„Ÿå¸¸é‡</li>
</ul>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>åº•å±‚ç»“æ„å˜å¤æ‚</li>
<li>ç¼–è¯‘æœŸä¿æŠ¤å…³é”®æ¨¡å—</li>
</ul>
<p>å¦‚æœæ— æ³•æ”¹æºç  â†’ è·³è¿‡ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>ç¬¬ä¸‰æ­¥ï¼šIPA æˆå“å±‚æ··æ·†ï¼ˆçœŸæ­£æå‡é€†å‘éš¾åº¦çš„æ ¸å¿ƒæ­¥éª¤ï¼‰</strong></h3>
<p>è¿™é‡Œä½¿ç”¨ <strong>Ipa Guardï¼ˆå‘½ä»¤è¡Œç‰ˆï¼‰</strong>ï¼Œå› ä¸ºå®ƒæ”¯æŒï¼š</p>
<ul>
<li>æ— éœ€æºç </li>
<li>å¯¹ Swift/ObjC å±‚è¿›è¡Œç¬¦å·é‡å†™</li>
<li>ä¿®æ”¹ IPA å†…èµ„æºåã€MD5</li>
<li>JS/H5 æ··æ·†</li>
<li>è‡ªå®šä¹‰æ··æ·†ç­–ç•¥ï¼ˆsym.jsonï¼‰</li>
<li>å¤šå¹³å°è¿è¡Œï¼ˆWindows / macOSï¼‰</li>
<li>å¯é›†æˆåˆ° CI</li>
</ul>
<h4 data-id="heading-9"><strong>3.1 å¯¼å‡ºç¬¦å·ä¾›ç­–ç•¥åˆ†æ</strong></h4>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli parse app.ipa -o sym.json
</code></pre>
<p><code>sym.json</code> åŒ…å«ï¼š</p>
<ul>
<li>å¯ä»¥æ··æ·†çš„ç¬¦å·</li>
<li>å¿…é¡»æ’é™¤çš„ç¬¦å·</li>
<li>å¼•ç”¨é“¾ï¼ˆfileReferences / stringReferencesï¼‰</li>
</ul>
<h4 data-id="heading-10"><strong>3.2 ç¼–è¾‘ç­–ç•¥</strong></h4>
<p>é‡ç‚¹ï¼š</p>
<ul>
<li>æ¡¥æ¥æ–¹æ³•å¿…é¡» <code>confuse:false</code></li>
<li>Storyboard å¿…é¡»æ’é™¤</li>
<li>SDK åˆå§‹åŒ–å¿…é¡»ä¿ç•™</li>
<li>JS/H5 å¼•ç”¨å¿…é¡»åŒæ­¥å¤„ç†</li>
<li><code>refactorName</code> é•¿åº¦ä¸å˜</li>
</ul>
<hr/>
<h4 data-id="heading-11"><strong>3.3 è¿›è¡Œæ·±åº¦æ··æ·†ä¸èµ„æºæ‰°åŠ¨</strong></h4>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli protect app.ipa -c sym.json --email dev@team.com --image --js -o protected.ipa
</code></pre>
<p>å®ç°ï¼š</p>
<ul>
<li>æ‰€æœ‰å¯æ··æ·†ç¬¦å·è¢«éšæœºåŒ–</li>
<li>èµ„æºæ–‡ä»¶åæ‰°åŠ¨</li>
<li>å›¾ç‰‡ MD5 æ”¹åŠ¨ï¼ˆé˜²æ›¿æ¢ï¼‰</li>
<li>JS æ–‡ä»¶åæ··æ·†ï¼ˆHybrid åº”ç”¨å¿…è¦ï¼‰</li>
</ul>
<p><em>è¿™æ˜¯æé«˜é€†å‘éš¾åº¦çš„å…³é”®æ­¥éª¤ã€‚</em></p>
<hr/>
<h3 data-id="heading-12"><strong>ç¬¬å››æ­¥ï¼šé‡ç­¾å + åŠŸèƒ½éªŒæ”¶</strong></h3>
<p>æ··æ·†åçš„ IPA å¿…é¡»é‡ç­¾ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">kxsign sign protected.ipa -c cert.p12 -p pass \
  -m dev.mobileprovision -z signed.ipa -i
</code></pre>
<p>æµ‹è¯•é‡ç‚¹ï¼š</p>
<ul>
<li>å¯åŠ¨</li>
<li>ç™»å½•</li>
<li>ä¸»è¦ä¸šåŠ¡é“¾è·¯</li>
<li>SDK åˆå§‹åŒ–</li>
<li>WebView/H5</li>
<li>æ’ä»¶é€šä¿¡ï¼ˆFlutterã€Unityã€RNï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-13"><strong>ç¬¬äº”æ­¥ï¼šåŠ¨æ€é€†å‘éš¾åº¦éªŒè¯ï¼ˆæ”»é˜²æµ‹è¯•ï¼‰</strong></h3>
<p>ä½¿ç”¨ <strong>Frida</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">frida -U -f com<span class="hljs-selector-class">.app</span> <span class="hljs-attr">--no-pause</span> -l hook<span class="hljs-selector-class">.js</span>
</code></pre>
<p>éªŒè¯ï¼š</p>
<ul>
<li>å‡½æ•°å®šä½æ˜¯å¦å›°éš¾</li>
<li>Hook æ˜¯å¦å®¹æ˜“å¤±è´¥</li>
<li>æ˜¯å¦ä»èƒ½æ‰¾åˆ°æ•æ„Ÿé€»è¾‘</li>
</ul>
<p>ä½¿ç”¨ <strong>Hopper/IDA</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥ç¬¦å·æ˜¯å¦å®Œå…¨å˜å½¢</li>
<li>ç»“æ„æ˜¯å¦è¢«æ‰°åŠ¨</li>
<li>Swift æ¨¡å—æ˜¯å¦ä¸å¯è¯»</li>
</ul>
<hr/>
<h3 data-id="heading-14"><strong>ç¬¬å…­æ­¥ï¼šæ˜ å°„è¡¨æ²»ç†ï¼ˆé˜²æ­¢æ··æ·†åæ— æ³•è°ƒè¯•ï¼‰</strong></h3>
<p>å­˜å‚¨ï¼š</p>
<ul>
<li>sym.jsonï¼ˆç­–ç•¥æ–‡ä»¶ï¼‰</li>
<li>æ··æ·†æ˜ å°„è¡¨</li>
<li>ç‰ˆæœ¬å· â†’ æ„å»ºå· â†’ ç¬¦å·æ˜ å°„å…³ç³»</li>
<li>ç­¾åæŒ‡çº¹</li>
</ul>
<p>å­˜æ”¾ï¼š</p>
<ul>
<li>KMS / HSM</li>
<li>åŠ å¯†å½’æ¡£</li>
<li>Git ç§æœ‰ä»“åº“ï¼ˆåŠ å¯†ä»“å‚¨ï¼‰</li>
</ul>
<p>ç”¨äºï¼š</p>
<ul>
<li>å´©æºƒç¬¦å·åŒ–</li>
<li>ç´§æ€¥å›æ»š</li>
<li>ç­–ç•¥ç‰ˆæœ¬è®°å½•</li>
</ul>
<p>æ²¡æœ‰æ²»ç† â†’ ä¸èƒ½ç§°ä¸ºâ€œå·¥ç¨‹çº§é˜²æŠ¤â€ã€‚</p>
<hr/>
<h2 data-id="heading-15">æå‡é€†å‘éš¾åº¦é â€œä½“ç³»â€ï¼Œä¸æ˜¯â€œæŸä¸ªå·¥å…·â€</h2>
<p>çœŸæ­£æå‡é€†å‘éš¾åº¦éœ€è¦ï¼š</p>
<ul>
<li><strong>é™æ€åˆ†æ â†’ ç™½åå•</strong></li>
<li><strong>ç¼–è¯‘æœŸæ··æ·†ï¼ˆå¯é€‰ï¼‰</strong></li>
<li><strong>æˆå“ IPA æ··æ·†ï¼ˆå¿…åšï¼ŒIpa Guard ä¸ºæ ¸å¿ƒï¼‰</strong></li>
<li><strong>èµ„æºæ‰°åŠ¨</strong></li>
<li><strong>é‡ç­¾ä¸æµ‹è¯•</strong></li>
<li><strong>é€†å‘éªŒè¯</strong></li>
<li><strong>æ˜ å°„æ²»ç†ä¸å¯å›æ»š</strong></li>
</ul>
<p>æ¨èå·¥å…·ç»„åˆï¼š</p>
<h4 data-id="heading-16"><strong>åˆ†æå±‚</strong></h4>
<p>MobSFã€class-dumpã€Hopper</p>
<h4 data-id="heading-17"><strong>æ··æ·†å±‚ï¼ˆæ ¸å¿ƒï¼‰</strong></h4>
<p>Ipa Guard CLIï¼ˆæˆå“æ··æ·†ï¼‰
Swift Shield / obfuscator-llvmï¼ˆæºç æ··æ·†ï¼‰</p>
<h4 data-id="heading-18"><strong>éªŒè¯å±‚</strong></h4>
<p>kxsignã€Fridaã€IDA</p>
<h4 data-id="heading-19"><strong>æ²»ç†å±‚</strong></h4>
<p>KMSã€Sentry/Bugly</p>
<p>è¿™æ‰æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€å¯æ“ä½œã€å¯å¤åˆ¶çš„æé«˜é€†å‘éš¾åº¦æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gemini 3.0å‘å¸ƒï¼Œä½†Generative UIæ›´è®©æˆ‘çœ¼å‰ä¸€äº®]]></title>    <link>https://juejin.cn/post/7574382925762084902</link>    <guid>https://juejin.cn/post/7574382925762084902</guid>    <pubDate>2025-11-20T06:16:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574382925762084902" data-draft-id="7574568258801975323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gemini 3.0å‘å¸ƒï¼Œä½†Generative UIæ›´è®©æˆ‘çœ¼å‰ä¸€äº®"/> <meta itemprop="keywords" content="Gemini,Google"/> <meta itemprop="datePublished" content="2025-11-20T06:16:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—æçš„æ ‘"/> <meta itemprop="url" content="https://juejin.cn/user/3059269887853066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gemini 3.0å‘å¸ƒï¼Œä½†Generative UIæ›´è®©æˆ‘çœ¼å‰ä¸€äº®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3059269887853066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—æçš„æ ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:16:40.000Z" title="Thu Nov 20 2025 06:16:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Googleæ˜¨æ™šé‡ç£…å‘å¸ƒäº†Gemini 3.0ï¼Œçœ‹æŒ‡æ ‡åŸºæœ¬ç¢¾å‹äº†ç°æœ‰çš„ä¸€ç³»åˆ—æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3156f812256541e08560831f70c04cd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5p6B55qE5qCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224199&amp;x-signature=5CgpQA7JPmHLflXSUsEt84914KA%3D" alt="" loading="lazy"/></p>
<p>ç½‘ä¸Šå¤§é‡çš„è¯„æµ‹æ–‡ç« ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ¨ç¼–ç¨‹é¢†åŸŸçš„çœŸå®å®åŠ›ä¹Ÿå°šæœ‰å¾…æ·±åº¦ä½“éªŒï¼ˆ<code>ä»¥å‰å¾ˆå¤šæ¨¡å‹å‡ºæ¥æ—¶å„ç§åˆ·åˆ†ï¼Œæ·±åº¦ä½“éªŒåè¿˜æ˜¯è¢«claudeåŠæ‰“</code>ï¼‰ã€‚</p>
<p>è¿™æ¬¡å‘å¸ƒï¼Œæˆ‘æ¯”è¾ƒæ„Ÿå…´è¶£çš„åè€Œæ˜¯ä¸€åŒå‘å¸ƒçš„<strong>Generative UIï¼ˆç”Ÿæˆå¼ç”¨æˆ·ç•Œé¢ï¼‰</strong> ã€‚å®˜æ–¹ç”šè‡³å‘äº†ä¸“é—¨çš„è®ºæ–‡ä»‹ç»å®ç°åŸç†ï¼Œä¹Ÿç»™äº†ä¸€ä¸ªå…·è±¡åŒ–çš„æ¼”ç¤ºã€‚</p>
<p>å½“åœ¨<strong>Generative UI</strong>æ¨¡å¼ä¸‹æé—®ï¼š"RNAèšåˆé…¶å¦‚ä½•å·¥ä½œï¼ŸåŸæ ¸ç»†èƒå’ŒçœŸæ ¸ç»†èƒçš„è½¬å½•é˜¶æ®µæœ‰å“ªäº›ä¸åŒï¼Ÿ"</p>
<p>å¯ä»¥çœ‹çœ‹å“åº”ç»“æœçš„å½¢å¼å’Œä»¥å‰çš„æ¨¡å‹æœ‰ä»€ä¹ˆä¸åŒï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a22827d5a9894189bd29f6d43385c75a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5p6B55qE5qCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224199&amp;x-signature=0Ak2U580S9bx3%2F5gcMN8b0qUYcE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯Generative UI</h2>
<p>åœ¨ä¼ ç»Ÿè½¯ä»¶å¼€å‘ä¸­ï¼ŒUIæ˜¯å›ºåŒ–çš„ã€‚è®¾è®¡å¸ˆç”¨Figmaç”»å¥½åŸå‹ï¼Œå¼€å‘åŒå­¦æŒ‰ç…§è®¾è®¡ç¨¿è¿˜åŸUIï¼Œç”¨æˆ·æœ€ç»ˆçœ‹åˆ°çš„ç•Œé¢ï¼Œæ—©åœ¨å‡ å‘¨ç”šè‡³å‡ ä¸ªæœˆå‰å°±å®šå¥½äº†ã€‚</p>
<p>Generative UIçš„æ ¸å¿ƒç†å¿µå®Œå…¨ä¸åŒï¼š<strong>ç•Œé¢ä¸å†æ˜¯é¢„å…ˆå­˜åœ¨çš„ï¼Œè€Œæ˜¯æ·±åˆ»ç†è§£ç”¨æˆ·çš„æ„å›¾å’Œéœ€æ±‚åï¼Œå®æ—¶ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„ã€å¯äº¤äº’çš„ç•Œé¢</strong>ã€‚</p>
<p>æ¯”å¦‚ï¼Œå½“ä½ é—®â€œç»™æˆ‘è§„åˆ’ä¸€ä¸ªåŒ—äº¬3æ—¥æ¸¸â€œï¼Œä¼ ç»Ÿçš„LLMåªä¼šè¿”å›ä¸€å¤§æ®µæ–‡å­—æ”»ç•¥ã€‚ä½†Generative UIä¼šï¼š</p>
<ul>
<li>ç”Ÿæˆä¸€ä¸ªäº¤äº’å¼çš„åœ°å›¾ï¼Œæ ‡æ³¨æ¯å¤©çš„æ™¯ç‚¹è·¯çº¿</li>
<li>æ·»åŠ ä¸€ä¸ªæ—¶é—´è½´ï¼Œå±•ç¤ºæ¯å¤©çš„è¡Œç¨‹å®‰æ’</li>
<li>é…ä¸Šæ™¯ç‚¹å¡ç‰‡ï¼Œç‚¹å‡»å°±èƒ½çœ‹å›¾ç‰‡å’Œä»‹ç»</li>
<li>è¿˜æœ‰ä¸€ä¸ªç­›é€‰å™¨ï¼Œè®©ä½ è°ƒæ•´é¢„ç®—å’Œå…´è¶£åå¥½</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æ¨¡å‹ä¸å†å±€é™äºç”Ÿæˆå†…å®¹ï¼Œè¿˜ç”Ÿæˆäº†æ‰¿è½½å†…å®¹çš„ç•Œé¢æœ¬èº«</strong>ã€‚</p>
<h2 data-id="heading-1">åº”ç”¨åœºæ™¯</h2>
<p>Generative UIçœ‹èµ·æ¥æ¯”è¾ƒé…·ç‚«ï¼Œä½†çœŸæ­£æœ‰ä»·å€¼çš„æ˜¯å®ƒèƒ½è§£å†³å“ªäº›å®é™…é—®é¢˜ã€‚æ ¹æ®è®ºæ–‡å’Œå®˜æ–¹æ¼”ç¤ºï¼Œæˆ‘æ•´ç†äº†å‡ ä¸ªå¾ˆæœ‰æƒ³è±¡ç©ºé—´çš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-2">åœºæ™¯ä¸€ï¼šå¿«é€Ÿäº§å“åŸå‹</h4>
<p>åšäº§å“çš„åŒå­¦åº”è¯¥äº†è§£ï¼Œéœ€æ±‚æ¼”ç¤ºæ˜¯æ²Ÿé€šä¸­æ¯”è¾ƒè´¹åŠ²çš„ç¯èŠ‚ã€‚</p>
<p>ä¼ ç»Ÿæµç¨‹é‡Œï¼Œäº§å“æƒ³ç»™å¼€å‘æˆ–è€…è€æ¿æ¼”ç¤ºä¸€ä¸ªæ–°çš„æƒ³æ³•éœ€æ±‚ï¼Œé€šå¸¸æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š</p>
<ul>
<li><strong>ç”»è‰å›¾/PPT</strong>ï¼šå¿«ï¼Œä½†æ²¡æ³•äº¤äº’ï¼Œå…¨é è„‘è¡¥ï¼Œå¯¹æ–¹ç»å¸¸ç†è§£åå·®ã€‚</li>
<li><strong>åšäº¤äº’åŸå‹</strong>ï¼šæ•ˆæœå¥½ï¼Œä½†å¤ªæ…¢ã€‚äº§å“ç»ç†å†™æ–‡æ¡£ï¼Œè®¾è®¡å¸ˆç”»å›¾ï¼Œå‰ç«¯å†™Demoï¼Œç­‰è¿™ä¸€å¥—ä¸‹æ¥ï¼Œå¯èƒ½é»„èŠ±èœéƒ½å‡‰äº†ã€‚</li>
</ul>
<p><strong>Generative UIçœ‹èµ·æ¥å°±èƒ½è§£å†³"æƒ³æ¼”ç¤ºä½†åšä¸å‡ºæ¥"çš„ç—›ç‚¹ã€‚</strong></p>
<p>äº§å“åŒå­¦ä¸éœ€è¦æ‡‚ä»£ç ã€ä¹Ÿä¸éœ€è¦æ‡‚è®¾è®¡ï¼Œåªéœ€å‡†ç¡®é˜è¿°éœ€æ±‚å°±å¯å¿«é€Ÿç”Ÿæˆäº¤äº’å¼äº§å“åŸå‹ã€‚ä¸æ»¡æ„çš„åœ°æ–¹è¿˜å¯ä»¥ç»§ç»­è¿­ä»£ä¿®æ”¹ã€‚</p>
<h4 data-id="heading-3">åœºæ™¯äºŒï¼šä¸ªæ€§åŒ–æ•™è‚²ç•Œé¢</h4>
<p>æ•™è‚²åº”è¯¥æ˜¯Generative UIæœ€èƒ½å‘æŒ¥ä»·å€¼çš„é¢†åŸŸä¹‹ä¸€ï¼Œè®ºæ–‡ä¸­èŠ±äº†å¾ˆå¤§ç¯‡å¹…å±•ç¤ºè¿™ä¸ªåœºæ™¯ã€‚</p>
<p>ä¼ ç»Ÿçš„åœ¨çº¿æ•™è‚²å¹³å°ï¼Œä¸ç®¡å­¦ç”Ÿæ°´å¹³å¦‚ä½•ï¼Œçœ‹åˆ°çš„éƒ½æ˜¯åŒä¸€å¥—è¯¾ä»¶ã€‚è¿™å°±åƒè®©å°å­¦ç”Ÿå’Œå¤§å­¦ç”Ÿè¯»åŒä¸€æœ¬æ•™ç§‘ä¹¦ï¼Œæ•ˆæœè‚¯å®šå·®ã€‚Khan Academyã€Courseraè¿™äº›å¹³å°è™½ç„¶æœ‰é¢˜ç›®éš¾åº¦åˆ†çº§ï¼Œä½†ç•Œé¢æœ¬èº«æ˜¯å›ºå®šçš„ã€‚</p>
<p>Generative UIçš„åšæ³•å®Œå…¨ä¸åŒï¼š<strong>æ ¹æ®å­¦ç”Ÿçš„å…ˆéªŒçŸ¥è¯†å’Œç†è§£èƒ½åŠ›ï¼ŒåŠ¨æ€ç”Ÿæˆä¸åŒå¤æ‚åº¦çš„å­¦ä¹ ç•Œé¢</strong>ã€‚</p>
<p>è®ºæ–‡ä¸­æœ‰ä¸ªå…¸å‹æ¡ˆä¾‹ï¼šæ•™"åŒ–å­¦å®éªŒ"è¿™ä¸ªä¸»é¢˜ã€‚</p>
<p>å¯¹äºåˆä¸­ç”Ÿï¼Œç³»ç»Ÿç”Ÿæˆçš„æ˜¯ï¼š</p>
<ul>
<li>å¤§å·çš„å½©è‰²å›¾æ ‡</li>
<li>æ¯ä¸ªæ­¥éª¤é…åŠ¨ç”»æ¼”ç¤º</li>
<li>ç”¨ç±»æ¯”çš„æ–¹å¼è§£é‡Šï¼ˆ"åŸå­å°±åƒä¹é«˜ç§¯æœ¨"ï¼‰</li>
<li>æœ‰äº’åŠ¨å°æ¸¸æˆå·©å›ºçŸ¥è¯†</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be106f17e8cb4ff09bc0fd125eaf9b3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5p6B55qE5qCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224199&amp;x-signature=Ovdy0eE3I4EeM1QqcDLesWpkOU0%3D" alt="" loading="lazy"/></p>
<p>è€Œå¯¹äºåŒ–å­¦ç³»å­¦ç”Ÿï¼Œç³»ç»Ÿç”Ÿæˆçš„æ˜¯ï¼š</p>
<ul>
<li>ç²¾ç¡®çš„åˆ†å­ç»“æ„å›¾</li>
<li>åŒ–å­¦æ–¹ç¨‹å¼å’Œè®¡é‡è®¡ç®—</li>
<li>å®éªŒæ•°æ®è¡¨æ ¼</li>
<li>å®‰å…¨æ³¨æ„äº‹é¡¹æ¸…å•</li>
</ul>
<p>å…³é”®æ˜¯ï¼Œè¿™äº›éƒ½ä¸éœ€è¦æ•™å¸ˆæ‰‹åŠ¨å‡†å¤‡å¤šä¸ªç‰ˆæœ¬ã€‚å­¦ç”Ÿè¾“å…¥è‡ªå·±çš„å­¦ä¹ ç›®æ ‡å’ŒèƒŒæ™¯ï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨ç”Ÿæˆæœ€é€‚åˆçš„å­¦ä¹ ç•Œé¢ã€‚</p>
<p>æ›´å‰å®³çš„æ˜¯å®æ—¶è°ƒæ•´èƒ½åŠ›ã€‚å¦‚æœå­¦ç”Ÿåœ¨æŸä¸ªæ¦‚å¿µä¸Šå¡ä½äº†ï¼ˆ<code>é€šè¿‡äº¤äº’æ•°æ®åˆ¤æ–­ï¼Œæ¯”å¦‚åå¤ç‚¹å‡»åŒä¸€ä¸ªåŒºåŸŸ</code>ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç®€åŒ–é‚£éƒ¨åˆ†çš„ç•Œé¢ï¼Œå¢åŠ æç¤ºå’Œè¾…åŠ©è¯´æ˜ã€‚</p>
<p>è®ºæ–‡ä¸­è¿˜å±•ç¤ºäº†ä¸€ä¸ª"æ–œç‡å’Œåˆ‡çº¿"çš„æ•™å­¦æ¡ˆä¾‹ã€‚ç³»ç»Ÿæ£€æµ‹åˆ°å­¦ç”Ÿå–œæ¬¢ç¯®çƒï¼Œå°±æŠŠæŠ½è±¡çš„æ•°å­¦æ¦‚å¿µè½¬åŒ–æˆ"æŠ•ç¯®è½¨è¿¹"æ¥è®²è§£ï¼Œå­¦ç”Ÿçš„ç†è§£é€Ÿåº¦æ˜æ˜¾æå‡ã€‚</p>
<p>è¿™ç§ä¸ªæ€§åŒ–ä¸æ˜¯ç®€å•çš„"æ¢ä¸ªèƒŒæ™¯å›¾"ï¼Œè€Œæ˜¯<strong>è®¤çŸ¥å±‚é¢çš„ç»“æ„æ€§é€‚é…</strong>ã€‚åŒæ ·æ˜¯è®²åˆ†å½¢ï¼Œæˆå¹´äººçœ‹åˆ°çš„æ˜¯æ•°å­¦å…¬å¼å’Œé€’å½’ç®—æ³•ï¼Œå°å­¦ç”Ÿçœ‹åˆ°çš„æ˜¯"æ ‘ææ€ä¹ˆé•¿å‡ºæ¥"çš„åŠ¨ç”»æ•…äº‹ã€‚ç•Œé¢çš„ä¿¡æ¯å¯†åº¦ã€äº¤äº’å¤æ‚åº¦ã€è¯­è¨€é£æ ¼ï¼Œéƒ½æ˜¯åŠ¨æ€è°ƒæ•´çš„ã€‚</p>
<h4 data-id="heading-4">åœºæ™¯ä¸‰ï¼šç”µå•†çš„æ„å›¾é©±åŠ¨è´­ç‰©</h4>
<p>æŸ¥é˜…äº†ç›¸å…³èµ„æ–™ï¼Œåœ¨ç”µå•†é¢†åŸŸï¼ŒGenerative UIåº”è¯¥ä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ”¹å˜è´­ç‰©ä½“éªŒã€‚</p>
<p>ç°åœ¨çš„ç”µå•†æœç´¢ï¼Œç”¨æˆ·è¦æŠŠæ¨¡ç³Šçš„è´­ç‰©æ„å›¾ï¼ˆ<code>"æˆ‘æƒ³ä¹°ä¸€å¥—é€‚åˆæµ·æ»©å©šç¤¼çš„è¡£æœ"</code>ï¼‰ç¿»è¯‘æˆä¸€ç³»åˆ—ç­›é€‰æ“ä½œï¼šç”·è£… â†’ è¥¿è£… â†’ äºšéº» â†’ ç±³è‰² â†’ å°ºç ã€‚è¿™ä¸ªè¿‡ç¨‹å¾ˆç¹çï¼Œè€Œä¸”å®¹æ˜“æ¼æ‰é‡è¦é€‰é¡¹ã€‚</p>
<p>Generative UIçš„åšæ³•ï¼šç›´æ¥ç†è§£è¿™ä¸€æ„å›¾ï¼Œç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„ç²¾å“åº—ç•Œé¢ã€‚</p>
<p>ç³»ç»Ÿç”Ÿæˆçš„ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†åˆ—è¡¨ï¼Œè€Œæ˜¯ä¸€ä¸ªæ‚å¿—é£æ ¼çš„"Lookbook"å¸ƒå±€ï¼š</p>
<ul>
<li>å°†è¥¿è£…ã€è¡¬è¡«ã€ä¹ç¦é‹æ­é…å±•ç¤º</li>
<li>ç”¨è½»æ¾çš„æµ·æ»©æ°›å›´ç…§ç‰‡åšèƒŒæ™¯</li>
<li>æ ‡æ³¨æ¯ä»¶å•å“çš„é€æ°”æ€§å’Œèˆ’é€‚åº¦</li>
<li>è¿˜æœ‰ä¸€ä¸ª"æ¯”è¿™ä¸ªæ›´ä¼‘é—²"çš„æ»‘å—</li>
</ul>
<p>å¦‚æœç”¨æˆ·åé¦ˆ"å¤ªæ­£å¼äº†"ï¼Œç•Œé¢ä¼šç¬é—´é‡æ’ï¼Œæ›¿æ¢ä¸ºæ›´ä¼‘é—²çš„Poloè¡«å’Œå¡å…¶è£¤ç»„åˆã€‚</p>
<p>è¿™ç§äº¤äº’æ–¹å¼ï¼Œå°†è´­ç‰©ä»"æœç´¢å•†å“"å˜æˆäº†"ä¸å¯¼è´­å¯¹è¯"ï¼Œç•Œé¢æœ¬èº«å³æ˜¯æ¨èå¼•æ“çš„å…·è±¡åŒ–ã€‚</p>
<hr/>
<p>ä»¥ä¸Šåªæ˜¯æˆ‘ä¸ªäººä½“ä¼šã€ä»¥åŠä»ç½‘ä¸Šçœ‹åˆ°çš„å¯èƒ½å‘æŒ¥å·¨å¤§ä»·å€¼çš„åº”ç”¨åœºæ™¯ã€‚å®é™…ä¸Šï¼ŒGenerative UIçš„æ½œåŠ›å¯èƒ½è¿œä¸æ­¢äºæ­¤ã€‚</p>
<p>æˆ‘è§‰å¾—ï¼Œ<strong>æ¯ä¸ªè¡Œä¸šã€æ¯ä¸ªåœºæ™¯ï¼Œåªè¦æ¶‰åŠ"ä¿¡æ¯å‘ˆç°"å’Œ"äº¤äº’"ï¼Œéƒ½æœ‰æœºä¼šè¢«Generative UIé‡æ–°å®šä¹‰ã€‚</strong> è¿™ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„äº§å“åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€ç§æ–°çš„äººæœºäº¤äº’èŒƒå¼ã€‚</p>
<h2 data-id="heading-5">æŠ€æœ¯åŸç†ï¼šä»Promptåˆ°äº¤äº’ç•Œé¢</h2>
<p>è®¨è®ºå®Œåº”ç”¨åœºæ™¯ï¼Œæ¥ç€å’±ä»¬é€šè¿‡è®ºæ–‡è¯¦ç»†äº†è§£å®ƒæ˜¯å¦‚ä½•åšåˆ°çš„ã€‚è®ºæ–‡ä¸­æŠ«éœ²äº†è¯¦ç»†çš„æŠ€æœ¯æ¶æ„ï¼Œæˆ‘ç”¨é€šä¿—çš„æ–¹å¼è§£é‡Šä¸€ä¸‹æ ¸å¿ƒåŸç†ã€‚</p>
<h4 data-id="heading-6">æ•´ä½“æ¶æ„ï¼šå››å±‚æŠ€æœ¯æ ˆ</h4>
<p>æ ¹æ®è®ºæ–‡ï¼ŒGenerative UIçš„å®ç°ä¾èµ–äºå››ä¸ªæ ¸å¿ƒå±‚ï¼š</p>
<p><strong>1. ç»„ä»¶åº“</strong></p>
<p>ç³»ç»Ÿé¢„å…ˆå®šä¹‰äº†ä¸€å¥—æ ‡å‡†åŒ–çš„UIç»„ä»¶ï¼ŒåŒ…æ‹¬æŒ‰é’®ã€å¡ç‰‡ã€å›¾è¡¨ã€è¡¨å•ã€åœ°å›¾ç­‰åŸºç¡€ç»„ä»¶ï¼Œä»¥åŠä¸€äº›å¤åˆç»„ä»¶ï¼ˆ<code>æ¯”å¦‚å•†å“å¡ç‰‡ã€ç”¨æˆ·è¯„ä»·æ¨¡å—</code>ï¼‰ã€‚è¿™äº›ç»„ä»¶éƒ½æ˜¯ç»è¿‡è®¾è®¡ç³»ç»Ÿè§„èŒƒçš„ï¼Œç¡®ä¿ç”Ÿæˆçš„ç•Œé¢æœ‰ç»Ÿä¸€çš„è§†è§‰é£æ ¼ã€‚</p>
<p><strong>2. ç³»ç»ŸæŒ‡ä»¤</strong></p>
<p>è¿™æ˜¯å‘Šè¯‰æ¨¡å‹"æ€ä¹ˆç”ŸæˆUI"çš„è§„åˆ™ã€‚åŒ…æ‹¬ï¼šä½•æ—¶ä½¿ç”¨å“ªç§ç»„ä»¶ã€å¦‚ä½•å¸ƒå±€ã€ä»€ä¹ˆæ ·çš„äº¤äº’ç¬¦åˆç”¨æˆ·é¢„æœŸã€‚è®ºæ–‡ä¸­ç§°ä¹‹ä¸º"å…ƒæç¤º"ï¼ˆ<code>meta-prompt</code>ï¼‰ï¼Œå®ƒç›¸å½“äºç»™æ¨¡å‹æ³¨å…¥äº†è®¾è®¡åŸåˆ™å’Œå‰ç«¯å¼€å‘çš„æœ€ä½³å®è·µ</p>
<p><strong>3. å¤§è¯­è¨€æ¨¡å‹</strong></p>
<p>Gemini 3.0æ˜¯æ ¸å¿ƒå¼•æ“ã€‚å®ƒè´Ÿè´£ç†è§£ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œåˆ†ææ„å›¾ï¼Œç„¶åä»ç»„ä»¶åº“ä¸­é€‰æ‹©åˆé€‚çš„ç»„ä»¶ï¼Œç”Ÿæˆæœ€ç»ˆçš„UIä»£ç ï¼ˆ<code>é€šå¸¸æ˜¯HTML/CSS/JavaScript</code>ï¼‰</p>
<p><strong>4. åå¤„ç†å±‚</strong></p>
<p>ç”Ÿæˆçš„ä»£ç ä¼šç»è¿‡é™æ€åˆ†æï¼Œæ£€æŸ¥è¯­æ³•é”™è¯¯ã€å®‰å…¨æ¼æ´ã€æ€§èƒ½é—®é¢˜ã€‚å¦‚æœå‘ç°é—®é¢˜ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¿®æ­£æˆ–é‡æ–°ç”Ÿæˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/210b1ecbc9274ec6ad2d0a485a70ffac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5p6B55qE5qCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764224199&amp;x-signature=q4OQiErsK%2FRHUy5ePWqCRxajDBk%3D" alt="" loading="lazy"/></p>
<p>è®ºæ–‡ä¸­ç‰¹åˆ«å¼ºè°ƒï¼Œè¿™å››å±‚ç¼ºä¸€ä¸å¯ã€‚æ—©æœŸçš„GPT-3.5å°è¯•è¿‡ç±»ä¼¼ä»»åŠ¡ï¼Œä½†ç”±äºæ¨¡å‹èƒ½åŠ›ä¸è¶³ï¼Œç»å¸¸ç”Ÿæˆé”™è¯¯çš„ä»£ç æˆ–ä¸ç¬¦åˆè®¾è®¡è§„èŒƒçš„ç•Œé¢ã€‚æ¥ä¸‹æ¥ï¼Œåˆ†åˆ«æ¢è®¨ä¸€ä¸‹æ¯ä¸€å±‚çš„ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-7">æ ¸å¿ƒæŠ€æœ¯ç‚¹ä¸€ï¼šç»„ä»¶åº“ä¸å·¥å…·è°ƒç”¨</h4>
<p>Generative UIçš„ç¬¬ä¸€ä¸ªå…³é”®ï¼Œæ˜¯<strong>æŠŠUIç»„ä»¶å½“ä½œ"å·¥å…·"æä¾›ç»™æ¨¡å‹</strong>ã€‚</p>
<p>ä¼ ç»Ÿçš„LLMåªèƒ½è¾“å‡ºæ–‡æœ¬ã€‚Generative UIçš„åšæ³•æ˜¯ï¼Œç»™æ¨¡å‹ä¸€ä¸ª"å·¥å…·ç®±"ï¼Œé‡Œé¢æœ‰å„ç§UIç»„ä»¶çš„æ¥å£ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">å·¥å…·ï¼šç”Ÿæˆå›¾è¡¨
å‚æ•°ï¼š
Â Â -Â ç±»å‹ï¼šæŸ±çŠ¶å›¾/æŠ˜çº¿å›¾/é¥¼å›¾
Â Â -Â æ•°æ®ï¼š<span class="hljs-selector-attr">[æ•°ç»„]</span>
Â Â -Â æ ‡é¢˜ï¼šå­—ç¬¦ä¸²
Â Â -Â é…è‰²æ–¹æ¡ˆï¼šä¸»é¢˜åç§°
</code></pre>
<p>è¿™æ®µä»£ç ä¼šè¢«å‰ç«¯å¼•æ“è§£æï¼Œç›´æ¥æ¸²æŸ“æˆä¸€ä¸ªäº¤äº’å¼å›¾è¡¨ã€‚</p>
<p>å¯ä»¥ç”¨ä¹é«˜æ¥ç±»æ¯”ï¼šç»„ä»¶åº“æä¾›çš„æ˜¯æ ‡å‡†åŒ–çš„ç§¯æœ¨å—ï¼Œæ¨¡å‹çš„ä»»åŠ¡ä¸æ˜¯åˆ¶é€ ç§¯æœ¨ï¼Œè€Œæ˜¯æ ¹æ®éœ€æ±‚æ¥ç»„è£…ç§¯æœ¨ã€‚è¿™æ ·æ—¢ä¿è¯äº†UIçš„è´¨é‡å’Œä¸€è‡´æ€§ï¼Œåˆç»™äº†æ¨¡å‹è¶³å¤Ÿçš„çµæ´»æ€§ã€‚</p>
<p>è®ºæ–‡æ•°æ®æ˜¾ç¤ºï¼Œå½“ç»„ä»¶åº“æœ‰50+ç§ç»„ä»¶æ—¶ï¼Œæ¨¡å‹èƒ½è¦†ç›–95%ä»¥ä¸Šçš„å¸¸è§UIéœ€æ±‚ã€‚</p>
<h4 data-id="heading-8">æ ¸å¿ƒæŠ€æœ¯ç‚¹äºŒï¼šæ„å›¾ç†è§£ä¸å¸ƒå±€ç”Ÿæˆ</h4>
<p>ç¬¬äºŒä¸ªå…³é”®æ˜¯ï¼Œæ¨¡å‹è¦ç†è§£ç”¨æˆ·æ„å›¾ï¼Œå¹¶è½¬åŒ–æˆåˆç†çš„UIå¸ƒå±€ã€‚</p>
<p>è¿™é‡Œæ¶‰åŠä¸€ä¸ªéšå¼çš„æ¨ç†è¿‡ç¨‹ï¼Œè®ºæ–‡ä¸­ç§°ä¸º"Planningï¼ˆè§„åˆ’ï¼‰"ã€‚</p>
<p>å½“ç”¨æˆ·è¯´"è§„åˆ’ä¸€æ¬¡å»å·´é»çš„æ—…è¡Œ"æ—¶ï¼Œæ¨¡å‹ä¼šè¿›è¡Œç±»ä¼¼è¿™æ ·çš„æ€ç»´é“¾ï¼š</p>
<ol>
<li><strong>éœ€æ±‚åˆ†æ</strong>ï¼šæ—…è¡Œéœ€è¦äº¤é€šã€ä½å®¿ã€æ™¯ç‚¹ã€é¢„ç®—</li>
<li><strong>ç»„ä»¶é€‰æ‹©</strong>ï¼šéœ€è¦åœ°å›¾ç»„ä»¶ï¼ˆåœ°ç†ä½ç½®ï¼‰ã€åˆ—è¡¨ç»„ä»¶ï¼ˆé…’åº—é€‰é¡¹ï¼‰ã€å¤©æ°”å¡ç‰‡ã€è®¡ç®—å™¨ç»„ä»¶ï¼ˆé¢„ç®—ï¼‰</li>
<li><strong>å¸ƒå±€å†³ç­–</strong>ï¼šæ¡Œé¢ç«¯æŠŠåœ°å›¾æ”¾å³ä¾§ã€åˆ—è¡¨æ”¾å·¦ä¾§ï¼›ç§»åŠ¨ç«¯ç”¨æ ‡ç­¾é¡µåˆ‡æ¢</li>
</ol>
<p>æ¨¡å‹è¾“å‡ºçš„ä¸æ˜¯HTMLä»£ç ï¼Œè€Œæ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„<strong>UIæè¿°</strong>ï¼ˆé€šå¸¸æ˜¯JSONæ ¼å¼ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">{
Â Â "layout":Â <span class="hljs-string">"two-column"</span>,
Â Â <span class="hljs-string">"left"</span>:Â {
Â Â Â Â "component":Â <span class="hljs-string">"hotel-list"</span>,
Â Â Â Â <span class="hljs-string">"data"</span>:Â [...],
Â Â Â Â <span class="hljs-string">"sortBy"</span>:Â <span class="hljs-string">"price"</span>
Â Â },
Â Â "<span class="hljs-attribute">right</span>":Â {
Â Â Â Â "component":Â <span class="hljs-string">"interactive-map"</span>,
Â Â Â Â <span class="hljs-string">"markers"</span>:Â [...]
Â Â },
Â Â "<span class="hljs-attribute">bottom</span>":Â {
Â Â Â Â "component":Â <span class="hljs-string">"budget-calculator"</span>
Â Â }
}
</code></pre>
<p>å‰ç«¯å¼•æ“æ‹¿åˆ°è¿™ä¸ªæè¿°ï¼Œç”¨æœ¬åœ°çš„UIç»„ä»¶åº“æ¸²æŸ“å‡ºå®é™…ç•Œé¢ã€‚</p>
<h4 data-id="heading-9">æ ¸å¿ƒæŠ€æœ¯ç‚¹ä¸‰ï¼šä¸Šä¸‹æ–‡ç®¡ç†ä¸è¿­ä»£ä¼˜åŒ–</h4>
<p>ç¬¬ä¸‰ä¸ªå…³é”®æ˜¯å¤„ç†ç”¨æˆ·çš„è¿ç»­ä¿®æ”¹è¯·æ±‚ã€‚</p>
<p>ä¼ ç»Ÿçš„LLMæ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡å¯¹è¯éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚Generative UIéœ€è¦è®°ä½ä¹‹å‰çš„ç•Œé¢çŠ¶æ€ï¼Œæ‰èƒ½å®ç°å¢é‡ä¿®æ”¹ã€‚</p>
<p>è®ºæ–‡ä¸­é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯<strong>çŠ¶æ€ç®¡ç†</strong>ï¼š</p>
<ul>
<li>
<p>ç”¨æˆ·é¦–æ¬¡è¾“å…¥ï¼Œç”Ÿæˆç•Œé¢A</p>
</li>
<li>
<p>ç”¨æˆ·è¯´"æŠŠåœ°å›¾æ”¾å¤§ä¸€ç‚¹"ï¼Œç³»ç»Ÿä¸æ˜¯é‡æ–°ç”Ÿæˆæ•´ä¸ªç•Œé¢ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ä»ä¸Šä¸‹æ–‡ä¸­å–å‡ºç•Œé¢Açš„æè¿°</li>
<li>å®šä½åˆ°"åœ°å›¾"ç»„ä»¶</li>
<li>åªä¿®æ”¹åœ°å›¾çš„"size"å‚æ•°</li>
<li>è¾“å‡ºç•Œé¢Bï¼ˆ<code>å…¶ä»–éƒ¨åˆ†ä¿æŒä¸å˜</code>ï¼‰</li>
</ul>
</li>
</ul>
<p>ç³»ç»Ÿä¼šè®°ä½ä½ ä»¬èŠè¿‡çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä¹‹å‰ç”Ÿæˆçš„ç•Œé¢ã€ä½ çš„ä¿®æ”¹è¯·æ±‚ã€ç”šè‡³ä½ çš„äº¤äº’è¡Œä¸ºï¼ˆ<code>æ¯”å¦‚å“ªäº›æŒ‰é’®ç‚¹å¾—å¤šï¼Œè¯´æ˜é‚£éƒ¨åˆ†ç”¨æˆ·æ„Ÿå…´è¶£</code>ï¼‰ã€‚</p>
<p>è®ºæ–‡æ•°æ®æ˜¾ç¤ºï¼Œåœ¨3è½®ä¿®æ”¹å†…ï¼Œæ¨¡å‹èƒ½ä¿æŒçŠ¶æ€ä¸€è‡´æ€§çš„å‡†ç¡®ç‡è¾¾åˆ°92%ã€‚</p>
<h4 data-id="heading-10">æ ¸å¿ƒæŠ€æœ¯ç‚¹å››ï¼šå®‰å…¨æ€§ä¸ä¸€è‡´æ€§ä¿éšœ</h4>
<p>æœ€åä¸€ä¸ªå…³é”®æ˜¯ç¡®ä¿ç”Ÿæˆçš„ç•Œé¢å®‰å…¨ã€å¯ç”¨ã€‚</p>
<p>AIç”Ÿæˆçš„ä»£ç å¯èƒ½æœ‰Bugï¼Œä¹Ÿå¯èƒ½åŒ…å«ä¸å®‰å…¨çš„å†…å®¹ã€‚è®ºæ–‡ä¸­çš„è§£å†³æ–¹æ¡ˆæ˜¯<strong>åå¤„ç†å±‚</strong>ï¼Œå…¶ä¸­çš„å·¥ä½œåŒ…æ‹¬ï¼š</p>
<p><strong>è¯­æ³•ä¿®å¤</strong>ï¼šè‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤å¸¸è§é”™è¯¯ï¼Œæ¯”å¦‚æ‹¬å·ä¸åŒ¹é…ã€æ ‡ç­¾æ²¡é—­åˆã€‚</p>
<p><strong>å®‰å…¨è¿‡æ»¤</strong>ï¼šç¦æ­¢ç”Ÿæˆæ‰§è¡Œä»»æ„JavaScriptçš„ä»£ç ï¼Œåªå…è®¸è°ƒç”¨é¢„å®šä¹‰çš„ç»„ä»¶å’ŒAPIã€‚</p>
<p><strong>è®¾è®¡ä¸€è‡´æ€§æ£€æŸ¥</strong>ï¼šç¡®ä¿ç”Ÿæˆçš„ç•Œé¢ç¬¦åˆè®¾è®¡ç³»ç»Ÿè§„èŒƒï¼Œæ¯”å¦‚é¢œè‰²ã€å­—ä½“ã€é—´è·éƒ½åœ¨å…è®¸èŒƒå›´å†…ã€‚</p>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¦‚æœç”Ÿæˆçš„ç•Œé¢æœ‰æ€§èƒ½é—®é¢˜ï¼ˆ<code>æ¯”å¦‚ä¸€æ¬¡æ¸²æŸ“1000ä¸ªç»„ä»¶</code>ï¼‰ï¼Œè‡ªåŠ¨ä¼˜åŒ–æˆåˆ†é¡µæˆ–è™šæ‹Ÿæ»šåŠ¨ã€‚</p>
<p>è®ºæ–‡æ•°æ®æ˜¾ç¤ºï¼Œç»è¿‡åå¤„ç†çš„ç•Œé¢ï¼Œè¿è¡Œæ—¶é”™è¯¯ç‡ä»18%é™åˆ°äº†ä¸åˆ°2%ã€‚</p>
<h4 data-id="heading-11">æŠ€æœ¯æŒ‘æˆ˜ï¼šä¸æ˜¯å®Œç¾çš„</h4>
<p>è™½ç„¶Generative UIå¾ˆå¼ºå¤§ï¼Œä½†è®ºæ–‡ä¹ŸæŒ‡å‡ºäº†å½“å‰çš„å±€é™æ€§ã€‚</p>
<p>æœ€æ˜æ˜¾çš„é—®é¢˜æ˜¯é€Ÿåº¦ã€‚ç”Ÿæˆä¸€ä¸ªå¤æ‚ç•Œé¢å¯èƒ½éœ€è¦10-30ç§’ï¼Œè¿™åŒ…æ‹¬æ¨¡å‹æ¨ç†ã€å·¥å…·è°ƒç”¨ã€åå¤„ç†ç­‰å¤šä¸ªç¯èŠ‚ã€‚å¯¹äºä¹ æƒ¯äº†"å³æ—¶å“åº”"çš„ç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¸ªç­‰å¾…æ—¶é—´è¿˜æ˜¯æœ‰ç‚¹é•¿ã€‚è®ºæ–‡ä¸­æåˆ°ï¼Œå›¢é˜Ÿæ­£åœ¨ä¼˜åŒ–æµå¼ç”ŸæˆæŠ€æœ¯ï¼Œå…ˆæ˜¾ç¤ºéª¨æ¶å±ï¼Œå†é€æ­¥æ¸²æŸ“å®Œæ•´ç»„ä»¶ï¼Œè®©ç­‰å¾…è¿‡ç¨‹ä¸é‚£ä¹ˆç„¦è™‘ã€‚</p>
<p>å¦ä¸€ä¸ªé—®é¢˜æ˜¯æ¨¡å‹å¶å°”ä¼š"å¹»è§‰"ã€‚å®ƒå¯èƒ½ä¼š"ç¼–é€ "ä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„ç»„ä»¶ï¼Œæ¯”å¦‚è¯•å›¾è°ƒç”¨ä¸€ä¸ªåä¸º<code>SuperFancyChart</code>çš„ç»„ä»¶ï¼Œä½†ç»„ä»¶åº“é‡Œæ ¹æœ¬æ²¡æœ‰ã€‚ç»“æœå°±æ˜¯ç•Œé¢æ¸²æŸ“å¤±è´¥ã€‚ç›®å‰çš„è§£å†³åŠæ³•æ˜¯åœ¨ç³»ç»ŸæŒ‡ä»¤ä¸­æ˜ç¡®åˆ—å‡ºæ‰€æœ‰å¯ç”¨ç»„ä»¶ï¼Œå¹¶åœ¨åå¤„ç†å±‚åšå…œåº•æ£€æŸ¥ï¼Œå‘ç°ä¸å­˜åœ¨çš„ç»„ä»¶å°±æ›¿æ¢æˆæœ€æ¥è¿‘çš„æ›¿ä»£å“ã€‚</p>
<p>å¯¹äºéå¸¸å¤æ‚çš„äº¤äº’ï¼Œæ¯”å¦‚å¤šæ­¥è¡¨å•ã€æ‹–æ‹½æ’åºè¿™ç±»éœ€è¦ç²¾ç»†çŠ¶æ€ç®¡ç†çš„åœºæ™¯ï¼Œæ¨¡å‹çš„æˆåŠŸç‡è¿˜ä¸å¤Ÿé«˜ï¼Œè®ºæ–‡ç»™å‡ºçš„æ•°æ®æ˜¯å¤§çº¦70%ã€‚è¿™æ„å‘³ç€10æ¬¡é‡Œæœ‰3æ¬¡å¯èƒ½éœ€è¦äººå·¥ä»‹å…¥è°ƒæ•´ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæœ‰æ„æ€çš„æ‚–è®ºï¼šä¸ºäº†è®©AIç”Ÿæˆé«˜è´¨é‡çš„UIï¼Œä½ åè€Œéœ€è¦ä¸€ä¸ªéå¸¸ä¸¥æ ¼ã€æ ‡å‡†åŒ–çš„ç»„ä»¶åº“ã€‚è¿™æ„å‘³ç€UIè®¾è®¡å¸ˆçš„è§’è‰²æ­£åœ¨å‘ç”Ÿè½¬å˜ï¼Œä»"ç”»é¡µé¢"å˜æˆäº†"è®¾è®¡åŸå­ç»„ä»¶"å’Œ"åˆ¶å®šç»„è£…è§„åˆ™"ã€‚æŸç§ç¨‹åº¦ä¸Šï¼Œè®¾è®¡å¸ˆçš„å·¥ä½œä»å…·ä½“å˜æŠ½è±¡äº†ã€‚</p>
<h2 data-id="heading-12">å†™åœ¨æœ€å</h2>
<p>ç›¸æ¯”Gemini 3.0åœ¨å‚æ•°å’Œè¯„æµ‹æŒ‡æ ‡ä¸Šçš„å·¨å¤§æå‡ï¼Œæˆ‘è§‰å¾—<strong>Generative UI</strong>æ›´æ˜¯è®©æˆ‘çœ¼å‰ä¸€äº®ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒçªç ´åœ¨äºï¼š<strong>ç•Œé¢ä¸å†æ˜¯é¢„å…ˆè®¾è®¡å¥½çš„é™æ€æ¨¡æ¿ï¼Œè€Œæ˜¯æ ¹æ®ä½ çš„éœ€æ±‚å³æ—¶ç”Ÿæˆã€åŠ¨æ€é€‚é…çš„äº¤äº’ä½“éªŒ</strong>ã€‚å¯¹äºäº§å“ç»ç†ã€åˆ›ä¸šè€…ã€æ•™è‚²å·¥ä½œè€…æ¥è¯´ï¼Œè¿™æ„å‘³ç€ä»æƒ³æ³•åˆ°å¯æ¼”ç¤ºåŸå‹çš„æ—¶é—´ï¼Œä»å‡ å¤©ç¼©çŸ­åˆ°å‡ åˆ†é’Ÿã€‚</p>
<p>ç›®å‰ï¼ŒGenerative UIå·²ç»åœ¨è°·æ­Œæœç´¢çš„AIæ¨¡å¼ï¼ˆ<code>AI Mod</code>eï¼‰å’ŒGeminiåº”ç”¨ä¸­ä¸Šçº¿ï¼Œä½†ä»…é™ç¾åŒºçš„Pro/Ultraè®¢é˜…ç”¨æˆ·ä½¿ç”¨ã€‚å›½å†…ç”¨æˆ·æš‚æ—¶åªèƒ½ç­‰å¾…å…¨é‡å¼€æ”¾ã€‚</p>
<p>ä¸è¿‡è®ºæ–‡å’Œæ¼”ç¤ºå·²ç»è¶³å¤Ÿè¯´æ˜æ–¹å‘ï¼š<strong>ä»"äººé€‚åº”ç•Œé¢"åˆ°"ç•Œé¢é€‚åº”äºº"ï¼Œè¿™ä¸ä»…æ˜¯æŠ€æœ¯è¿›æ­¥ï¼Œæ›´æ˜¯äº¤äº’èŒƒå¼çš„è½¬å˜</strong>ã€‚æœŸå¾…å®ƒæ­£å¼å¼€æ”¾åï¼Œèƒ½ä¸ºæˆ‘ä»¬çš„å·¥ä½œå¸¦æ¥å®å®åœ¨åœ¨çš„æ•ˆç‡æå‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Macä½¿ç”¨FFmpegè¿›è¡Œå±å¹•å½•åˆ¶ï¼Œå¹¶ä½¿ç”¨VLCæœ¬åœ°æ’­æ”¾]]></title>    <link>https://juejin.cn/post/7574584245152186419</link>    <guid>https://juejin.cn/post/7574584245152186419</guid>    <pubDate>2025-11-20T06:35:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574584245152186419" data-draft-id="7574625040631087142" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Macä½¿ç”¨FFmpegè¿›è¡Œå±å¹•å½•åˆ¶ï¼Œå¹¶ä½¿ç”¨VLCæœ¬åœ°æ’­æ”¾"/> <meta itemprop="keywords" content="GitHub,FFmpeg"/> <meta itemprop="datePublished" content="2025-11-20T06:35:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›·å­è·‘ä¸å¿«"/> <meta itemprop="url" content="https://juejin.cn/user/3034307822098967"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Macä½¿ç”¨FFmpegè¿›è¡Œå±å¹•å½•åˆ¶ï¼Œå¹¶ä½¿ç”¨VLCæœ¬åœ°æ’­æ”¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3034307822098967/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›·å­è·‘ä¸å¿«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:35:04.000Z" title="Thu Nov 20 2025 06:35:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸€ç¯‡å…³äºå¦‚ä½•åœ¨<code>Mac</code>ä¸Šä½¿ç”¨<code>FFmpeg</code>è¿›è¡Œå±å¹•å½•åˆ¶ï¼Œå¹¶ä½¿ç”¨<code>VLC</code>æ’­æ”¾å™¨è¿›è¡Œæœ¬åœ°æ’­æ”¾çš„æ•™ç¨‹ï¼Œé»˜è®¤è¯»è€…å·²ç»å®‰è£…å¥½äº†<code>FFmpeg</code>å’Œ<code>VLC</code>æ’­æ”¾å™¨ã€‚
æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨<code>FFmpeg</code>å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œå±å¹•å½•åˆ¶ï¼Œå¹¶é€šè¿‡<code>VLC</code>æ’­æ”¾å™¨è¿›è¡Œå®æ—¶æ’­æ”¾ï¼Œå¯¹äº<code>FFmpeg</code>å’Œ<code>VLC</code>çš„å®‰è£…å’ŒåŸºç¡€ä½¿ç”¨ï¼Œè¯»è€…å¯ä»¥å‚è€ƒç›¸å…³æ–‡æ¡£ã€‚</p>
<h2 data-id="heading-0">1. Macä¸Šæ•è·å±å¹•çš„FFmpegè¾“å…¥æº</h2>
<p>åœ¨Macä¸Šï¼Œ<code>FFmpeg</code>å¯ä»¥ä½¿ç”¨<code>avfoundation</code>è¾“å…¥æºæ¥æ•è·å±å¹•å†…å®¹ã€‚è¦æŸ¥çœ‹å¯ç”¨çš„è®¾å¤‡åˆ—è¡¨ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ffmpeg -f avfoundation -list_devices <span class="hljs-literal">true</span> -i <span class="hljs-string">""</span>
</code></pre>
<p>ä½ ä¼šçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">AVFoundation video devices:
[0] Capture screen 0
[1] FaceTime HD Camera

AVFoundation audio devices:
[0] MacBook Pro Microphone
[1] Multi-Output Device
</code></pre>
<h2 data-id="heading-1">2. ç›´æ’­Macå±å¹•</h2>
<p>å‡è®¾ä½ è¦æ¨æµåˆ°ä¸€ä¸ª RTMP æœåŠ¡å™¨ï¼ˆä¾‹ï¼šrtmp://localhost/live/streamï¼‰</p>
<h3 data-id="heading-2">2.1 ä¸åŒ…å«éŸ³é¢‘çš„å±å¹•å½•åˆ¶å‘½ä»¤ï¼š</h3>
<pre><code class="hljs language-bash" lang="bash">ffmpeg \
  -f avfoundation -framerate 30 -i <span class="hljs-string">"0:none"</span> \
  -c:v libx264 -preset veryfast -f flv rtmp://localhost/live/stream
</code></pre>
<h3 data-id="heading-3">2.2 åŒ…å«éŸ³é¢‘çš„å±å¹•å½•åˆ¶å‘½ä»¤ï¼š</h3>
<pre><code class="hljs language-bash" lang="bash">ffmpeg \
  -f avfoundation -framerate 30 -i <span class="hljs-string">"0:0"</span> \
  -c:v libx264 -preset veryfast -maxrate 3000k -bufsize 6000k \
  -c:a aac -b:a 128k \
  -f flv rtmp://localhost/live/stream
</code></pre>
<p>è§£é‡Šï¼š</p>
<ul>
<li>"0:0" â†’ ï¼ˆå±å¹•è®¾å¤‡ ID : éŸ³é¢‘è®¾å¤‡ IDï¼‰</li>
<li>0 = ä¸»å±å¹•</li>
<li>0 = éº¦å…‹é£</li>
<li>-framerate 30 â†’ æµç•…åº¦ä½³ï¼ŒCPUå ç”¨é€‚ä¸­</li>
<li>-f flv â†’ RTMP å¿…é¡»ä½¿ç”¨ FLV å°è£…</li>
<li>libx264 â†’ ç½‘ç»œç›´æ’­æœ€ç¨³å®š</li>
</ul>
<h3 data-id="heading-4">2.3 é…ç½®nginx-full</h3>
<p>é€šå¸¸è·¯å¾„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/opt/homebrew/etc/nginx/nginx.conf
</code></pre>
<p>åœ¨<code>nginx.conf</code>ä¸­æ·»åŠ RTMPæ¨¡å—é…ç½®ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">rtmp {
    http { ... }

    # ä¸‹é¢æ˜¯è¦æ·»åŠ çš„å†…å®¹
    server {
        listen 1935;

        application live {
            live on;
            record off;
        }
    }
}
</code></pre>
<h3 data-id="heading-5">2.4 å¯åŠ¨nginx-full</h3>
<pre><code class="hljs language-bash" lang="bash">brew services start nginx-full
</code></pre>
<h3 data-id="heading-6">2.5 éªŒè¯RTMPæ˜¯å¦å¯åŠ¨æˆåŠŸ</h3>
<pre><code class="hljs language-bash" lang="bash">lsof -i :1935
</code></pre>
<p>å¦‚æœçœ‹åˆ° nginx åœ¨ç›‘å¬è¯¥ç«¯å£ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸ</p>
<pre><code class="hljs language-bash" lang="bash">nginx   12345   ...   LISTEN
</code></pre>
<h3 data-id="heading-7">2.6 æ¨æµFFmpeg</h3>
<pre><code class="hljs language-bash" lang="bash">ffmpeg \
  -f avfoundation -framerate 30 -i <span class="hljs-string">"0:none"</span> \
  -c:v libx264 -preset veryfast -f flv rtmp://localhost/live/stream
</code></pre>
<h3 data-id="heading-8">2.7 ä½¿ç”¨VLCæ’­æ”¾RTMPæµ</h3>
<p>æ‰“å¼€VLCæ’­æ”¾å™¨ï¼Œé€‰æ‹©â€œæ‰“å¼€ç½‘ç»œä¸²æµâ€ï¼Œè¾“å…¥ä»¥ä¸‹URLï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rtmp://localhost/live/stream
</code></pre>
<p>ç‚¹å‡»â€œæ’­æ”¾â€ï¼Œå³å¯è§‚çœ‹å®æ—¶å±å¹•å½•åˆ¶å†…å®¹ã€‚</p>
<h2 data-id="heading-9">3. æœ€å</h2>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œé™¤äº†ä»‹ç»å¦‚ä½•ä½¿ç”¨<code>FFmpeg</code>åœ¨Macä¸Šè¿›è¡Œå±å¹•å½•åˆ¶å¤–ï¼Œè¿˜æ¶µç›–äº†å¦‚ä½•é…ç½®<code>nginx-full</code>ä»¥æ”¯æŒRTMPæµçš„æ¨é€å’Œæ’­æ”¾ã€‚å…³äº<code>nginx-full</code>çš„æ›´å¤šé…ç½®å’Œä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒç›¸å…³æ–‡æ¡£ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcoder-cjl.github.io%2F" target="_blank" title="https://coder-cjl.github.io/" ref="nofollow noopener noreferrer">æˆ‘çš„åšå®¢åœ°å€</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¸è¿›å¢å¼ºã€ä¼˜é›…é™çº§åŠç°ä»£Webå¼€å‘æŠ€æœ¯è¯¦è§£]]></title>    <link>https://juejin.cn/post/7574581079626514438</link>    <guid>https://juejin.cn/post/7574581079626514438</guid>    <pubDate>2025-11-20T06:24:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574581079626514438" data-draft-id="7574581079626465286" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¸è¿›å¢å¼ºã€ä¼˜é›…é™çº§åŠç°ä»£Webå¼€å‘æŠ€æœ¯è¯¦è§£"/> <meta itemprop="keywords" content="Node.js,JavaScript"/> <meta itemprop="datePublished" content="2025-11-20T06:24:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°å‰ç«¯_æˆ‘è‡ªåšå¼º"/> <meta itemprop="url" content="https://juejin.cn/user/2335811609826423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¸è¿›å¢å¼ºã€ä¼˜é›…é™çº§åŠç°ä»£Webå¼€å‘æŠ€æœ¯è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2335811609826423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°å‰ç«¯_æˆ‘è‡ªåšå¼º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:24:28.000Z" title="Thu Nov 20 2025 06:24:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¸è¿›å¢å¼ºã€ä¼˜é›…é™çº§åŠç°ä»£Webå¼€å‘æŠ€æœ¯è¯¦è§£</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨å½“ä»Šå¿«é€Ÿå‘å±•çš„Webå¼€å‘é¢†åŸŸï¼Œå¦‚ä½•ç¡®ä¿åº”ç”¨åœ¨å„ç§è®¾å¤‡å’Œæµè§ˆå™¨ç¯å¢ƒä¸‹éƒ½èƒ½è‰¯å¥½è¿è¡Œæˆä¸ºäº†å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»é¢å¯¹çš„é‡è¦è¯¾é¢˜ã€‚æ¸è¿›å¢å¼ºï¼ˆProgressive Enhancementï¼‰å’Œä¼˜é›…é™çº§ï¼ˆGraceful Degradationï¼‰æ˜¯ä¸¤ç§é‡è¦çš„è®¾è®¡ç†å¿µï¼Œå®ƒä»¬æŒ‡å¯¼æˆ‘ä»¬å¦‚ä½•æ„å»ºå…·æœ‰å¹¿æ³›å…¼å®¹æ€§å’Œè‰¯å¥½ç”¨æˆ·ä½“éªŒçš„Webåº”ç”¨ã€‚ä¸æ­¤åŒæ—¶ï¼Œéšç€æŠ€æœ¯çš„å‘å±•ï¼Œå‡ºç°äº†è¯¸å¦‚æ¸è¿›å¼Webåº”ç”¨ï¼ˆPWAï¼‰ã€æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰ä»¥åŠå¢é‡é™æ€å†ç”Ÿï¼ˆISRï¼‰ç­‰å…ˆè¿›æŠ€æœ¯å’Œæ–¹æ³•è®ºï¼Œå®ƒä»¬è¿›ä¸€æ­¥ä¸°å¯Œäº†æˆ‘ä»¬çš„å¼€å‘å·¥å…·ç®±ï¼Œå¸®åŠ©æˆ‘ä»¬æ„å»ºæ›´åŠ é«˜æ•ˆã€å¯é çš„Webåº”ç”¨ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™äº›æ¦‚å¿µå’ŒæŠ€æœ¯ï¼Œåˆ†æå®ƒä»¬çš„è®¾è®¡ç†å¿µã€å®ç°æ–¹å¼ä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨ä»·å€¼ã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸€ç« ï¼šæ¸è¿›å¢å¼ºä¸ä¼˜é›…é™çº§</h3>
<h4 data-id="heading-3">1.1 æ¸è¿›å¢å¼ºçš„æ¦‚å¿µä¸åŸåˆ™</h4>
<p>æ¸è¿›å¢å¼ºæ˜¯ä¸€ç§Webè®¾è®¡å“²å­¦ï¼Œå¼ºè°ƒä»åŸºæœ¬åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥ä¸ºæ”¯æŒæ›´å¤šç‰¹æ€§çš„æµè§ˆå™¨æ·»åŠ å¢å¼ºä½“éªŒã€‚è¿™ä¸€ç†å¿µçš„æ ¸å¿ƒæ€æƒ³æ˜¯ç¡®ä¿æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®åŸºæœ¬å†…å®¹å’ŒåŠŸèƒ½ï¼Œç„¶åæ ¹æ®ç”¨æˆ·è®¾å¤‡å’Œæµè§ˆå™¨çš„èƒ½åŠ›æä¾›æ›´å¥½çš„ä½“éªŒã€‚</p>
<p>æ¸è¿›å¢å¼ºéµå¾ªä¸‰ä¸ªåŸºæœ¬åŸåˆ™ï¼š</p>
<ol>
<li><strong>å†…å®¹å±‚</strong>ï¼šç¡®ä¿åŸºæœ¬å†…å®¹åœ¨ä»»ä½•è®¾å¤‡å’Œæµè§ˆå™¨ä¸Šéƒ½å¯è®¿é—®</li>
<li><strong>è¡¨ç°å±‚</strong>ï¼šé€šè¿‡CSSä¸ºå†…å®¹æ·»åŠ è§†è§‰æ ·å¼å’Œå¸ƒå±€</li>
<li><strong>è¡Œä¸ºå±‚</strong>ï¼šé€šè¿‡JavaScriptæ·»åŠ äº¤äº’å’ŒåŠ¨æ€åŠŸèƒ½</li>
</ol>
<p>è¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>æé«˜äº†åº”ç”¨çš„å¯è®¿é—®æ€§</li>
<li>å¢å¼ºäº†åœ¨è€æ—§è®¾å¤‡å’Œæµè§ˆå™¨ä¸Šçš„å…¼å®¹æ€§</li>
<li>å‡å°‘äº†å› JavaScripté”™è¯¯å¯¼è‡´çš„å®Œå…¨å¤±æ•ˆé£é™©</li>
<li>æœ‰åˆ©äºSEOä¼˜åŒ–ï¼Œå› ä¸ºæœç´¢å¼•æ“çˆ¬è™«æ›´å®¹æ˜“æŠ“å–åŸºç¡€å†…å®¹</li>
</ul>
<h4 data-id="heading-4">1.2 ä¼˜é›…é™çº§çš„æ¦‚å¿µä¸å®è·µ</h4>
<p>ä¼˜é›…é™çº§æ˜¯ä»æœ€å®Œå–„çš„ä½“éªŒå¼€å§‹ï¼Œç„¶åé’ˆå¯¹è€æ—§æµè§ˆå™¨é€æ­¥é™ä½åŠŸèƒ½ï¼Œä½†ä»ä¿æŒåŸºæœ¬å¯ç”¨æ€§ã€‚ä¸æ¸è¿›å¢å¼ºç›¸åï¼Œä¼˜é›…é™çº§å…ˆè€ƒè™‘ç°ä»£æµè§ˆå™¨çš„æœ€ä½³ä½“éªŒï¼Œå†è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p>ä¼˜é›…é™çº§çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¼˜å…ˆä¸ºç°ä»£æµè§ˆå™¨æä¾›æœ€ä½³ä½“éªŒ</li>
<li>é€šè¿‡æ£€æµ‹æµè§ˆå™¨èƒ½åŠ›æ¥å†³å®šæ˜¯å¦å¯ç”¨æŸäº›åŠŸèƒ½</li>
<li>åœ¨ä¸æ”¯æŒçš„ç¯å¢ƒä¸­æä¾›æ›¿ä»£æ–¹æ¡ˆæˆ–ç®€åŒ–ç‰ˆæœ¬</li>
</ul>
<h4 data-id="heading-5">1.3 ä¸¤è€…å¯¹æ¯”ä¸é€‰æ‹©</h4>
<p>æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§å„æœ‰ä¼˜åŠ£ï¼Œé€‰æ‹©å“ªç§æ–¹æ³•å–å†³äºé¡¹ç›®éœ€æ±‚ã€ç›®æ ‡ç”¨æˆ·ç¾¤ä½“å’ŒæŠ€æœ¯èµ„æºç­‰å› ç´ ï¼š</p>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>æ¸è¿›å¢å¼º</th><th>ä¼˜é›…é™çº§</th></tr></thead><tbody><tr><td>å¼€å‘æ€è·¯</td><td>ä»åŸºç¡€åˆ°é«˜çº§</td><td>ä»é«˜çº§åˆ°åŸºç¡€</td></tr><tr><td>å…¼å®¹æ€§</td><td>æ›´å¥½åœ°æ”¯æŒè€æ—§è®¾å¤‡</td><td>ä¸»è¦å…³æ³¨ç°ä»£æµè§ˆå™¨</td></tr><tr><td>å¼€å‘æˆæœ¬</td><td>åˆæœŸæŠ•å…¥è¾ƒå¤§</td><td>å¿«é€Ÿå®ç°é«˜çº§åŠŸèƒ½</td></tr><tr><td>ç”¨æˆ·ä½“éªŒ</td><td>ç¡®ä¿åŸºæœ¬åŠŸèƒ½å¯ç”¨</td><td>ç°ä»£æµè§ˆå™¨ä½“éªŒæ›´å¥½</td></tr></tbody></table>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¾ˆå¤šå›¢é˜Ÿä¼šé€‰æ‹©ç»“åˆä¸¤ç§æ–¹æ³•çš„ä¼˜ç‚¹ï¼Œæ—¢ä¿è¯åŸºæœ¬åŠŸèƒ½çš„å¯ç”¨æ€§ï¼Œåˆä¸ºç°ä»£æµè§ˆå™¨æä¾›å¢å¼ºä½“éªŒã€‚</p>
<h3 data-id="heading-6">ç¬¬äºŒç« ï¼šæ¸è¿›å¼Webåº”ç”¨ï¼ˆPWAï¼‰</h3>
<h4 data-id="heading-7">2.1 PWAæ¦‚è¿°</h4>
<p>æ¸è¿›å¼Webåº”ç”¨ï¼ˆProgressive Web Appsï¼Œç®€ç§°PWAï¼‰æ˜¯ç”±Googleæå‡ºçš„ä¸€ç§åˆ©ç”¨ç°ä»£WebæŠ€æœ¯åˆ›å»ºæ¥è¿‘åŸç”Ÿåº”ç”¨ä½“éªŒçš„Webåº”ç”¨æ–¹æ³•ã€‚PWAç»“åˆäº†Webå’ŒåŸç”Ÿåº”ç”¨çš„ä¼˜ç‚¹ï¼Œæä¾›äº†ç¦»çº¿å·¥ä½œã€æ¨é€é€šçŸ¥ã€åå°åŒæ­¥ç­‰åŠŸèƒ½ã€‚</p>
<p>PWAçš„æ ¸å¿ƒç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>æ¸è¿›å¼</strong> - é€‚ç”¨äºæ‰€æœ‰ç”¨æˆ·ï¼Œæ— è®ºæµè§ˆå™¨é€‰æ‹©å¦‚ä½•</li>
<li><strong>å“åº”å¼</strong> - é€‚é…å„ç§å±å¹•å°ºå¯¸</li>
<li><strong>è¿æ¥ç‹¬ç«‹æ€§</strong> - é€šè¿‡Service Workeråœ¨ç¦»çº¿æˆ–ä½è´¨é‡ç½‘ç»œä¸‹å·¥ä½œ</li>
<li><strong>ç±»åŸç”Ÿåº”ç”¨</strong> - å…·æœ‰ç±»ä¼¼åŸç”Ÿåº”ç”¨çš„äº¤äº’å’Œå¯¼èˆª</li>
<li><strong>æŒç»­æ›´æ–°</strong> - å§‹ç»ˆæ˜¯æœ€æ–°çš„ï¼Œæ— éœ€åº”ç”¨å•†åº—å®¡æ ¸</li>
<li><strong>å®‰å…¨æ€§</strong> - é€šè¿‡HTTPSæä¾›æœåŠ¡ï¼Œé˜²æ­¢çª¥æ¢å’Œå†…å®¹ç¯¡æ”¹</li>
<li><strong>å¯å‘ç°æ€§</strong> - W3C manifestså’Œservice workeræ³¨å†ŒèŒƒå›´å…è®¸æœç´¢å¼•æ“æ‰¾åˆ°å®ƒä»¬</li>
<li><strong>å¯é‡æ–°å‚ä¸</strong> - é€šè¿‡æ¨é€é€šçŸ¥ç­‰åŠŸèƒ½ä¿æŒç”¨æˆ·å‚ä¸åº¦</li>
<li><strong>å¯å®‰è£…</strong> - å…è®¸ç”¨æˆ·å°†åº”ç”¨"ä¿å­˜"åˆ°ä¸»å±å¹•ä¸Š</li>
<li><strong>å¯é“¾æ¥</strong> - é€šè¿‡URLè½»æ¾åˆ†äº«ï¼Œæ— éœ€å¤æ‚çš„å®‰è£…è¿‡ç¨‹</li>
</ol>
<h4 data-id="heading-8">2.2 PWAæ ¸å¿ƒæŠ€æœ¯</h4>
<h5 data-id="heading-9">2.2.1 Service Worker</h5>
<p>Service Workeræ˜¯PWAçš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œå®ƒæ˜¯ä¸€ä¸ªåœ¨æµè§ˆå™¨åå°è¿è¡Œçš„è„šæœ¬ï¼Œç‹¬ç«‹äºç½‘é¡µï¼Œä¸ºåº”ç”¨æä¾›ç¦»çº¿ä½“éªŒã€æ¶ˆæ¯æ¨é€å’Œåå°åŒæ­¥ç­‰åŠŸèƒ½ã€‚</p>
<p>Service Workerçš„ä¸»è¦åŠŸèƒ½ï¼š</p>
<ul>
<li>æ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶æä¾›ç¼“å­˜å“åº”</li>
<li>ç®¡ç†ç¼“å­˜å’Œæ›´æ–°ç¼“å­˜ç­–ç•¥</li>
<li>æ¥æ”¶æ¨é€é€šçŸ¥</li>
<li>åå°åŒæ­¥æ•°æ®</li>
<li>åœ°ç†å›´æ ç­‰åå°åŠŸèƒ½</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ³¨å†ŒService Worker</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
    navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'/sw.js'</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SW registered: '</span>, registration);
      })
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">registrationError</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SW registration failed: '</span>, registrationError);
      });
  });
}

<span class="hljs-comment">// sw.js - Service Workerå®ç°ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_NAME</span> = <span class="hljs-string">'my-site-cache-v1'</span>;
<span class="hljs-keyword">const</span> urlsToCache = [
  <span class="hljs-string">'/'</span>,
  <span class="hljs-string">'/styles/main.css'</span>,
  <span class="hljs-string">'/scripts/main.js'</span>
];

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-comment">// é¢„ç¼“å­˜é‡è¦èµ„æº</span>
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Opened cache'</span>);
        <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">addAll</span>(urlsToCache);
      })
  );
});

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-comment">// å¦‚æœç¼“å­˜ä¸­æœ‰åŒ¹é…é¡¹ï¼Œåˆ™è¿”å›ç¼“å­˜çš„å“åº”</span>
        <span class="hljs-keyword">if</span> (response) {
          <span class="hljs-keyword">return</span> response;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>);
      }
    )
  );
});
</code></pre>
<h5 data-id="heading-10">2.2.2 Web App Manifest</h5>
<p>Web App Manifestæ˜¯ä¸€ä¸ªJSONæ–‡ä»¶ï¼Œæä¾›äº†å…³äºWebåº”ç”¨çš„ä¿¡æ¯ï¼Œä½¿æµè§ˆå™¨èƒ½å¤Ÿå°†åº”ç”¨å®‰è£…åˆ°ç”¨æˆ·çš„ä¸»å±å¹•ï¼Œå¹¶åœ¨å¯åŠ¨æ—¶æä¾›ç±»ä¼¼åŸç”Ÿåº”ç”¨çš„ä½“éªŒã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"My Progressive Web App"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"short_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MyPWA"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"start_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"display"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"standalone"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"background_color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ffffff"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"theme_color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#000000"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"icons"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/icon-192x192.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192x192"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/icon-512x512.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"512x512"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-11">2.2.3 ç¦»çº¿åŠŸèƒ½å®ç°</h5>
<p>PWAé€šè¿‡ç¼“å­˜ç­–ç•¥å®ç°ç¦»çº¿åŠŸèƒ½ï¼Œå¸¸è§çš„ç¼“å­˜ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>Cache Firstï¼ˆç¼“å­˜ä¼˜å…ˆï¼‰</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-comment">// å¦‚æœç¼“å­˜ä¸­æœ‰åŒ¹é…é¡¹ï¼Œåˆ™è¿”å›ç¼“å­˜çš„å“åº”</span>
        <span class="hljs-comment">// å¦åˆ™å‘èµ·ç½‘ç»œè¯·æ±‚</span>
        <span class="hljs-keyword">return</span> response || <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>);
      })
  );
});
</code></pre>
<ol start="2">
<li><strong>Network Firstï¼ˆç½‘ç»œä¼˜å…ˆï¼‰</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>)
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚å¤±è´¥æ—¶å›é€€åˆ°ç¼“å­˜</span>
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>);
      })
  );
});
</code></pre>
<ol start="3">
<li><strong>Stale While Revalidateï¼ˆé™ˆæ—§å³ç”¨ï¼Œç„¶åæ›´æ–°ï¼‰</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-comment">// åŒæ—¶å‘èµ·ç½‘ç»œè¯·æ±‚æ›´æ–°ç¼“å­˜</span>
        <span class="hljs-keyword">const</span> fetchPromise = <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">networkResponse</span> =&gt;</span> {
          cache.<span class="hljs-title function_">put</span>(event.<span class="hljs-property">request</span>, networkResponse.<span class="hljs-title function_">clone</span>());
          <span class="hljs-keyword">return</span> networkResponse;
        });
        
        <span class="hljs-comment">// è¿”å›ç¼“å­˜å“åº”æˆ–ç­‰å¾…ç½‘ç»œå“åº”</span>
        <span class="hljs-keyword">return</span> response || fetchPromise;
      });
    })
  );
});
</code></pre>
<h4 data-id="heading-12">2.3 PWAçš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜</h4>
<h5 data-id="heading-13">2.3.1 ä¼˜åŠ¿</h5>
<ol>
<li><strong>è·¨å¹³å°å…¼å®¹æ€§</strong> - ä¸€æ¬¡å¼€å‘ï¼Œå¤šå¹³å°è¿è¡Œ</li>
<li><strong>æ— éœ€å®‰è£…</strong> - é€šè¿‡URLå³å¯è®¿é—®ï¼Œé™ä½äº†ç”¨æˆ·ä½¿ç”¨é—¨æ§›</li>
<li><strong>ç¦»çº¿è®¿é—®</strong> - æä¾›ç¦»çº¿æµè§ˆä½“éªŒ</li>
<li><strong>æ¨é€é€šçŸ¥</strong> - å¢å¼ºç”¨æˆ·å‚ä¸åº¦</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong> - é€šè¿‡ç¼“å­˜æœºåˆ¶æé«˜åŠ è½½é€Ÿåº¦</li>
<li><strong>SEOå‹å¥½</strong> - ä»ç„¶æ˜¯æ ‡å‡†Webé¡µé¢ï¼Œåˆ©äºæœç´¢å¼•æ“ç´¢å¼•</li>
</ol>
<h5 data-id="heading-14">2.3.2 æŒ‘æˆ˜</h5>
<ol>
<li><strong>æµè§ˆå™¨æ”¯æŒ</strong> - éƒ¨åˆ†è€æ—§æµè§ˆå™¨ä¸æ”¯æŒ</li>
<li><strong>åŠŸèƒ½é™åˆ¶</strong> - ç›¸æ¯”åŸç”Ÿåº”ç”¨ä»æœ‰åŠŸèƒ½é™åˆ¶</li>
<li><strong>å¼€å‘å¤æ‚æ€§</strong> - éœ€è¦å¤„ç†å¤šç§ç¼“å­˜ç­–ç•¥å’ŒæœåŠ¡å·¥ä½œçº¿ç¨‹</li>
<li><strong>è°ƒè¯•å›°éš¾</strong> - Service Workerçš„è°ƒè¯•ç›¸å¯¹å¤æ‚</li>
</ol>
<h3 data-id="heading-15">ç¬¬ä¸‰ç« ï¼šæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</h3>
<h4 data-id="heading-16">3.1 SSRæ¦‚è¿°</h4>
<p>æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆServer-Side Renderingï¼Œç®€ç§°SSRï¼‰æ˜¯æŒ‡åœ¨æœåŠ¡å™¨ç«¯ç”ŸæˆHTMLé¡µé¢ï¼Œç„¶åå°†å…¶å‘é€ç»™å®¢æˆ·ç«¯æµè§ˆå™¨çš„æŠ€æœ¯ã€‚ä¸ä¼ ç»Ÿçš„å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰ä¸åŒï¼ŒSSRåœ¨æœåŠ¡å™¨ä¸Šå®Œæˆé¡µé¢çš„åˆå§‹æ¸²æŸ“ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥çœ‹åˆ°æ¸²æŸ“åçš„é¡µé¢å†…å®¹ã€‚</p>
<h4 data-id="heading-17">3.2 SSRçš„å·¥ä½œåŸç†</h4>
<p>åœ¨SSRä¸­ï¼Œé¡µé¢çš„æ¸²æŸ“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç”¨æˆ·è¯·æ±‚é¡µé¢URL</li>
<li>æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ï¼Œæ ¹æ®è·¯ç”±åŒ¹é…ç›¸åº”ç»„ä»¶</li>
<li>æœåŠ¡å™¨åœ¨Node.jsç¯å¢ƒä¸­æ‰§è¡Œç»„ä»¶ä»£ç ï¼Œç”ŸæˆHTMLå­—ç¬¦ä¸²</li>
<li>æœåŠ¡å™¨å°†ç”Ÿæˆçš„HTMLå‘é€ç»™å®¢æˆ·ç«¯</li>
<li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°HTMLåè¿›è¡Œhydrateï¼ˆæ¿€æ´»ï¼‰ï¼Œç»‘å®šäº‹ä»¶å¤„ç†å™¨</li>
</ol>
<h4 data-id="heading-18">3.3 SSRçš„ä¼˜åŠ¿</h4>
<h5 data-id="heading-19">3.3.1 SEOä¼˜åŒ–</h5>
<p>æœç´¢å¼•æ“çˆ¬è™«å¯ä»¥ç›´æ¥è¯»å–æœåŠ¡å™¨è¿”å›çš„å®Œæ•´HTMLå†…å®¹ï¼Œæ— éœ€ç­‰å¾…JavaScriptæ‰§è¡Œï¼Œå¤§å¤§æé«˜äº†SEOæ•ˆæœã€‚</p>
<h5 data-id="heading-20">3.3.2 é¦–å±åŠ è½½é€Ÿåº¦</h5>
<p>ç”¨æˆ·å¯ä»¥ç«‹å³çœ‹åˆ°é¡µé¢å†…å®¹ï¼Œæ— éœ€ç­‰å¾…æ‰€æœ‰JavaScriptä¸‹è½½å’Œæ‰§è¡Œå®Œæ¯•ï¼Œæå‡äº†é¦–å±åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<h5 data-id="heading-21">3.3.3 æ›´å¥½çš„å¯è®¿é—®æ€§</h5>
<p>å¯¹äºç¦ç”¨JavaScriptçš„ç”¨æˆ·æˆ–ç½‘ç»œçŠ¶å†µè¾ƒå·®çš„æƒ…å†µï¼Œä»ç„¶å¯ä»¥è®¿é—®åŸºæœ¬å†…å®¹ã€‚</p>
<h4 data-id="heading-22">3.4 SSRçš„å®ç°æ–¹å¼</h4>
<h5 data-id="heading-23">3.4.1 React SSRå®ç°</h5>
<p>Reactæä¾›äº†ReactDOMServer APIæ¥å®ç°SSRï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// server.js</span>
<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOMServer</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/server'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'*'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> appString = <span class="hljs-title class_">ReactDOMServer</span>.<span class="hljs-title function_">renderToString</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
  
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">`
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
      &lt;head&gt;
        &lt;title&gt;SSR App&lt;/title&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;div id="root"&gt;<span class="hljs-subst">${appString}</span>&lt;/div&gt;
        &lt;script src="/client.js"&gt;&lt;/script&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  `</span>);
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
</code></pre>
<p>å®¢æˆ·ç«¯hydrateä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// client.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;

<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">hydrate</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>));
</code></pre>
<h5 data-id="heading-24">3.4.2 Vue SSRå®ç°</h5>
<p>Vueæä¾›äº†vue-server-rendereræ¥å®ç°SSRï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// server.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Vue</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vue'</span>);
<span class="hljs-keyword">const</span> server = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>)();
<span class="hljs-keyword">const</span> renderer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vue-server-renderer'</span>).<span class="hljs-title function_">createRenderer</span>();

server.<span class="hljs-title function_">get</span>(<span class="hljs-string">'*'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">url</span>: req.<span class="hljs-property">url</span>
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;è®¿é—®çš„ URL æ˜¯ï¼š{{ url }}&lt;/div&gt;`</span>
  });

  renderer.<span class="hljs-title function_">renderToString</span>(app, <span class="hljs-function">(<span class="hljs-params">err, html</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) {
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">end</span>(<span class="hljs-string">'Internal Server Error'</span>);
      <span class="hljs-keyword">return</span>;
    }
    res.<span class="hljs-title function_">end</span>(<span class="hljs-string">`
      &lt;!DOCTYPE html&gt;
      &lt;html&gt;
        &lt;head&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;/head&gt;
        &lt;body&gt;<span class="hljs-subst">${html}</span>&lt;/body&gt;
      &lt;/html&gt;
    `</span>);
  });
});

server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">8080</span>);
</code></pre>
<h4 data-id="heading-25">3.5 SSRæ¡†æ¶</h4>
<h5 data-id="heading-26">3.5.1 Next.js</h5>
<p>Next.jsæ˜¯Reactç”Ÿæ€ç³»ç»Ÿä¸­æœ€æµè¡Œçš„SSRæ¡†æ¶ä¹‹ä¸€ï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„SSRæ”¯æŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// pages/index.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params">{ data }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {data.map(item =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getServerSideProps</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åœ¨æœåŠ¡ç«¯è·å–æ•°æ®</span>
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data'</span>);
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: {
      data
    }
  };
}
</code></pre>
<h5 data-id="heading-27">3.5.2 Nuxt.js</h5>
<p>Nuxt.jsæ˜¯Vueç”Ÿæ€ç³»ç»Ÿä¸­çš„SSRæ¡†æ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// pages/index.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in items"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
        {{ item.name }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">asyncData</span>(<span class="hljs-params">{ $axios }</span>) {
    <span class="hljs-comment">// åœ¨æœåŠ¡ç«¯è·å–æ•°æ®</span>
    <span class="hljs-keyword">const</span> items = <span class="hljs-keyword">await</span> $axios.$get(<span class="hljs-string">'https://api.example.com/items'</span>);
    <span class="hljs-keyword">return</span> { items };
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-28">3.6 SSRçš„æŒ‘æˆ˜</h4>
<h5 data-id="heading-29">3.6.1 æœåŠ¡å™¨è´Ÿè½½</h5>
<p>SSRå¢åŠ äº†æœåŠ¡å™¨çš„è®¡ç®—è´Ÿæ‹…ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œæ¸²æŸ“ã€‚</p>
<h5 data-id="heading-30">3.6.2 å¤æ‚æ€§å¢åŠ </h5>
<p>éœ€è¦å¤„ç†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å·®å¼‚ï¼Œå¦‚å…¨å±€å˜é‡ã€ç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚</p>
<h5 data-id="heading-31">3.6.3 ç¼“å­˜ç­–ç•¥</h5>
<p>éœ€è¦è®¾è®¡åˆç†çš„ç¼“å­˜ç­–ç•¥æ¥å‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚</p>
<h3 data-id="heading-32">ç¬¬å››ç« ï¼šé™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰</h3>
<h4 data-id="heading-33">4.1 SSGæ¦‚è¿°</h4>
<p>é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆStatic Site Generationï¼Œç®€ç§°SSGï¼‰æ˜¯åœ¨æ„å»ºæ—¶ç”Ÿæˆé™æ€HTMLæ–‡ä»¶çš„æ–¹æ³•ã€‚ä¸SSRåœ¨æ¯æ¬¡è¯·æ±‚æ—¶åŠ¨æ€ç”ŸæˆHTMLä¸åŒï¼ŒSSGåœ¨æ„å»ºé˜¶æ®µå°±å®Œæˆäº†é¡µé¢çš„æ¸²æŸ“ï¼Œç”Ÿæˆçš„é™æ€æ–‡ä»¶å¯ä»¥ç›´æ¥éƒ¨ç½²åˆ°CDNä¸Šã€‚</p>
<h4 data-id="heading-34">4.2 SSGçš„å·¥ä½œåŸç†</h4>
<p>SSGçš„æ„å»ºè¿‡ç¨‹åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ„å»ºæ—¶è·å–æ•°æ®</li>
<li>æ ¹æ®æ•°æ®ç”Ÿæˆé™æ€HTMLæ–‡ä»¶</li>
<li>ç”Ÿæˆé™æ€èµ„æºï¼ˆCSSã€JavaScriptç­‰ï¼‰</li>
<li>å°†æ‰€æœ‰é™æ€æ–‡ä»¶éƒ¨ç½²åˆ°æœåŠ¡å™¨æˆ–CDN</li>
</ol>
<h4 data-id="heading-35">4.3 SSGçš„ä¼˜åŠ¿</h4>
<h5 data-id="heading-36">4.3.1 æ€§èƒ½ä¼˜å¼‚</h5>
<p>é™æ€æ–‡ä»¶å¯ä»¥ä»CDNå¿«é€Ÿåˆ†å‘ï¼ŒåŠ è½½é€Ÿåº¦æå¿«ã€‚</p>
<h5 data-id="heading-37">4.3.2 æˆæœ¬ä½å»‰</h5>
<p>æ— éœ€æœåŠ¡å™¨è®¡ç®—èµ„æºï¼Œéƒ¨ç½²æˆæœ¬ä½ã€‚</p>
<h5 data-id="heading-38">4.3.3 å®‰å…¨æ€§é«˜</h5>
<p>æ²¡æœ‰æœåŠ¡å™¨ç«¯ä»£ç æ‰§è¡Œï¼Œå‡å°‘äº†å®‰å…¨æ”»å‡»é¢ã€‚</p>
<h5 data-id="heading-39">4.3.4 å¯é æ€§å¼º</h5>
<p>é™æ€æ–‡ä»¶ä¸æ˜“å‡ºé”™ï¼Œç³»ç»Ÿç¨³å®šæ€§é«˜ã€‚</p>
<h4 data-id="heading-40">4.4 SSGçš„å®ç°</h4>
<h5 data-id="heading-41">4.4.1 Next.js SSGå®ç°</h5>
<p>Next.jsæ”¯æŒå¤šç§æ•°æ®è·å–æ–¹æ³•æ¥å®ç°SSGï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// pages/posts/[id].js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Post</span>(<span class="hljs-params">{ post }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{post.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">__html:</span> <span class="hljs-attr">post.content</span> }} /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// æ„å»ºæ—¶è·å–é™æ€è·¯å¾„</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getStaticPaths</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/posts'</span>);
  <span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
  
  <span class="hljs-keyword">const</span> paths = posts.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">post</span> =&gt;</span> ({
    <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: post.<span class="hljs-property">id</span>.<span class="hljs-title function_">toString</span>() }
  }));

  <span class="hljs-keyword">return</span> { paths, <span class="hljs-attr">fallback</span>: <span class="hljs-literal">false</span> };
}

<span class="hljs-comment">// æ„å»ºæ—¶è·å–æ•°æ®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getStaticProps</span>(<span class="hljs-params">{ params }</span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://api.example.com/posts/<span class="hljs-subst">${params.id}</span>`</span>);
  <span class="hljs-keyword">const</span> post = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: {
      post
    }
  };
}
</code></pre>
<h5 data-id="heading-42">4.4.2 Gatsby.js</h5>
<p>Gatsbyæ˜¯åŸºäºReactçš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// gatsby-node.js</span>
<span class="hljs-built_in">exports</span>.<span class="hljs-property">createPages</span> = <span class="hljs-keyword">async</span> ({ graphql, actions }) =&gt; {
  <span class="hljs-keyword">const</span> { createPage } = actions;
  
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">graphql</span>(<span class="hljs-string">`
    query {
      allMarkdownRemark {
        edges {
          node {
            frontmatter {
              path
            }
          }
        }
      }
    }
  `</span>);
  
  result.<span class="hljs-property">data</span>.<span class="hljs-property">allMarkdownRemark</span>.<span class="hljs-property">edges</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ node }</span>) =&gt;</span> {
    <span class="hljs-title function_">createPage</span>({
      <span class="hljs-attr">path</span>: node.<span class="hljs-property">frontmatter</span>.<span class="hljs-property">path</span>,
      <span class="hljs-attr">component</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'./src/templates/blog-post.js'</span>),
      <span class="hljs-attr">context</span>: {
        <span class="hljs-attr">path</span>: node.<span class="hljs-property">frontmatter</span>.<span class="hljs-property">path</span>
      }
    });
  });
};

<span class="hljs-comment">// src/templates/blog-post.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { graphql } <span class="hljs-keyword">from</span> <span class="hljs-string">'gatsby'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BlogPost</span>(<span class="hljs-params">{ data }</span>) {
  <span class="hljs-keyword">const</span> post = data.<span class="hljs-property">markdownRemark</span>;
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{post.frontmatter.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">__html:</span> <span class="hljs-attr">post.html</span> }} /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> query = graphql<span class="hljs-string">`
  query($path: String!) {
    markdownRemark(frontmatter: { path: { eq: $path } }) {
      html
      frontmatter {
        title
      }
    }
  }
`</span>;
</code></pre>
<h4 data-id="heading-43">4.5 SSGçš„é€‚ç”¨åœºæ™¯</h4>
<ol>
<li><strong>åšå®¢å’Œæ–‡æ¡£ç½‘ç«™</strong> - å†…å®¹ç›¸å¯¹é™æ€ï¼Œæ›´æ–°é¢‘ç‡ä¸é«˜</li>
<li><strong>è¥é”€é¡µé¢</strong> - éœ€è¦å¿«é€ŸåŠ è½½å’Œè‰¯å¥½çš„SEO</li>
<li><strong>äº§å“å±•ç¤ºé¡µé¢</strong> - äº§å“ä¿¡æ¯ç›¸å¯¹å›ºå®š</li>
<li><strong>ä¼ä¸šå®˜ç½‘</strong> - ä¿¡æ¯å±•ç¤ºä¸ºä¸»ï¼Œäº¤äº’è¾ƒå°‘</li>
</ol>
<h4 data-id="heading-44">4.6 SSGçš„å±€é™æ€§</h4>
<ol>
<li><strong>æ•°æ®å®æ—¶æ€§å·®</strong> - æ— æ³•å®æ—¶åæ˜ æ•°æ®å˜åŒ–</li>
<li><strong>æ„å»ºæ—¶é—´é•¿</strong> - é¡µé¢æ•°é‡å¤šæ—¶æ„å»ºæ—¶é—´è¾ƒé•¿</li>
<li><strong>ä¸é€‚åˆé«˜åº¦ä¸ªæ€§åŒ–å†…å®¹</strong> - éš¾ä»¥ä¸ºä¸åŒç”¨æˆ·æä¾›ä¸ªæ€§åŒ–å†…å®¹</li>
</ol>
<h3 data-id="heading-45">ç¬¬äº”ç« ï¼šå¢é‡é™æ€å†ç”Ÿï¼ˆISRï¼‰</h3>
<h4 data-id="heading-46">5.1 ISRæ¦‚è¿°</h4>
<p>å¢é‡é™æ€å†ç”Ÿï¼ˆIncremental Static Regenerationï¼Œç®€ç§°ISRï¼‰æ˜¯Next.jså¼•å…¥çš„ä¸€ç§æ··åˆæ¸²æŸ“ç­–ç•¥ï¼Œç»“åˆäº†SSGå’ŒSSRçš„ä¼˜ç‚¹ã€‚ISRå…è®¸åœ¨æ„å»ºæ—¶ç”Ÿæˆéƒ¨åˆ†é¡µé¢ï¼Œåœ¨è¿è¡Œæ—¶æ ¹æ®éœ€è¦é‡æ–°ç”Ÿæˆå…¶ä»–é¡µé¢ã€‚</p>
<h4 data-id="heading-47">5.2 ISRçš„å·¥ä½œåŸç†</h4>
<p>ISRçš„å·¥ä½œæµç¨‹ï¼š</p>
<ol>
<li>æ„å»ºæ—¶ç”Ÿæˆéƒ¨åˆ†é™æ€é¡µé¢</li>
<li>ç”¨æˆ·é¦–æ¬¡è®¿é—®æœªç”Ÿæˆçš„é¡µé¢æ—¶ï¼Œè§¦å‘æŒ‰éœ€ç”Ÿæˆï¼ˆOn-Demand Revalidationï¼‰</li>
<li>åç»­è®¿é—®ç›´æ¥è¿”å›ç¼“å­˜çš„é™æ€é¡µé¢</li>
<li>å½“ç¼“å­˜è¿‡æœŸåï¼Œä¸‹æ¬¡è®¿é—®æ—¶é‡æ–°ç”Ÿæˆé¡µé¢</li>
</ol>
<h4 data-id="heading-48">5.3 ISRçš„å®ç°</h4>
<p>åœ¨Next.jsä¸­å®ç°ISRéå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// pages/blog/[slug].js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BlogPost</span>(<span class="hljs-params">{ post }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{post.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">__html:</span> <span class="hljs-attr">post.content</span> }} /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœ€åæ›´æ–°æ—¶é—´: {post.lastUpdated}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getStaticPaths</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åªåœ¨æ„å»ºæ—¶ç”Ÿæˆçƒ­é—¨æ–‡ç« </span>
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/popular-posts'</span>);
  <span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
  
  <span class="hljs-keyword">const</span> paths = posts.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">post</span> =&gt;</span> ({
    <span class="hljs-attr">params</span>: { <span class="hljs-attr">slug</span>: post.<span class="hljs-property">slug</span> }
  }));

  <span class="hljs-keyword">return</span> {
    paths,
    <span class="hljs-attr">fallback</span>: <span class="hljs-string">'blocking'</span> <span class="hljs-comment">// æˆ– 'true'</span>
  };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getStaticProps</span>(<span class="hljs-params">{ params }</span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://api.example.com/posts/<span class="hljs-subst">${params.slug}</span>`</span>);
  <span class="hljs-keyword">const</span> post = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: {
      post
    },
    <span class="hljs-comment">// è®¾ç½®é‡æ–°éªŒè¯æ—¶é—´ä¸º1å°æ—¶</span>
    <span class="hljs-attr">revalidate</span>: <span class="hljs-number">3600</span>
  };
}
</code></pre>
<h4 data-id="heading-49">5.4 ISRçš„ä¼˜åŠ¿</h4>
<h5 data-id="heading-50">5.4.1 å¹³è¡¡æ€§èƒ½ä¸å®æ—¶æ€§</h5>
<p>æ—¢äº«å—äº†é™æ€ç«™ç‚¹çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œåˆèƒ½ä¿æŒå†…å®¹çš„ç›¸å¯¹å®æ—¶æ€§ã€‚</p>
<h5 data-id="heading-51">5.4.2 é™ä½æ„å»ºæ—¶é—´</h5>
<p>ä¸éœ€è¦åœ¨æ„å»ºæ—¶ç”Ÿæˆæ‰€æœ‰é¡µé¢ï¼Œæ˜¾è‘—ç¼©çŸ­æ„å»ºæ—¶é—´ã€‚</p>
<h5 data-id="heading-52">5.4.3 æŒ‰éœ€æ›´æ–°</h5>
<p>åªæœ‰è¢«è®¿é—®çš„é¡µé¢æ‰ä¼šè¢«é‡æ–°ç”Ÿæˆï¼ŒèŠ‚çœèµ„æºã€‚</p>
<h4 data-id="heading-53">5.5 ISRçš„é…ç½®é€‰é¡¹</h4>
<h5 data-id="heading-54">5.5.1 fallbacké€‰é¡¹</h5>
<p>fallbackæœ‰ä¸‰ç§å€¼ï¼š</p>
<ul>
<li><code>false</code> - æœªç”Ÿæˆçš„è·¯å¾„è¿”å›404</li>
<li><code>true</code> - æœªç”Ÿæˆçš„è·¯å¾„æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œç„¶åç”Ÿæˆé¡µé¢</li>
<li><code>'blocking'</code> - æœªç”Ÿæˆçš„è·¯å¾„ç­‰å¾…é¡µé¢ç”Ÿæˆå®Œæˆåè¿”å›</li>
</ul>
<h5 data-id="heading-55">5.5.2 revalidateé€‰é¡¹</h5>
<p>revalidateæŒ‡å®šé¡µé¢é‡æ–°éªŒè¯çš„æ—¶é—´é—´éš”ï¼ˆç§’ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getStaticProps</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: {
      <span class="hljs-comment">// ...æ•°æ®</span>
    },
    <span class="hljs-attr">revalidate</span>: <span class="hljs-number">60</span> <span class="hljs-comment">// 60ç§’åé‡æ–°éªŒè¯</span>
  };
}
</code></pre>
<h4 data-id="heading-56">5.6 On-Demand Revalidation</h4>
<p>Next.jsè¿˜æ”¯æŒæŒ‰éœ€é‡æ–°éªŒè¯ï¼Œå¯ä»¥é€šè¿‡APIè°ƒç”¨æ‰‹åŠ¨è§¦å‘é¡µé¢é‡æ–°ç”Ÿæˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// pages/api/revalidate.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">req, res</span>) {
  <span class="hljs-comment">// æ£€æŸ¥å¯†é’¥ä»¥ç¡®ä¿åªæœ‰æˆæƒäººå‘˜å¯ä»¥é‡æ–°éªŒè¯</span>
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">query</span>.<span class="hljs-property">secret</span> !== process.<span class="hljs-property">env</span>.<span class="hljs-property">MY_SECRET_TOKEN</span>) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">401</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'Invalid token'</span> });
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// é‡æ–°éªŒè¯æŒ‡å®šè·¯å¾„</span>
    <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">unstable_revalidate</span>(<span class="hljs-string">'/blog/post-1'</span>);
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">revalidated</span>: <span class="hljs-literal">true</span> });
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'Error revalidating'</span>);
  }
}
</code></pre>
<h3 data-id="heading-57">ç¬¬å…­ç« ï¼šæŠ€æœ¯æ¯”è¾ƒä¸é€‰æ‹©æŒ‡å—</h3>
<h4 data-id="heading-58">6.1 æŠ€æœ¯å¯¹æ¯”è¡¨</h4>






















































<table><thead><tr><th>ç‰¹æ€§</th><th>CSR</th><th>SSR</th><th>SSG</th><th>ISR</th></tr></thead><tbody><tr><td>é¦–å±åŠ è½½é€Ÿåº¦</td><td>è¾ƒæ…¢</td><td>å¿«</td><td>æœ€å¿«</td><td>å¿«</td></tr><tr><td>SEOå‹å¥½æ€§</td><td>å·®</td><td>å¥½</td><td>å¥½</td><td>å¥½</td></tr><tr><td>æœåŠ¡å™¨è´Ÿè½½</td><td>ä½</td><td>é«˜</td><td>æ— </td><td>ä½</td></tr><tr><td>æ„å»ºæ—¶é—´</td><td>çŸ­</td><td>çŸ­</td><td>é•¿ï¼ˆé¡µé¢å¤šæ—¶ï¼‰</td><td>ä¸­ç­‰</td></tr><tr><td>æ•°æ®å®æ—¶æ€§</td><td>å¥½</td><td>å¥½</td><td>å·®</td><td>ä¸­ç­‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>äº¤äº’å¯†é›†å‹åº”ç”¨</td><td>éœ€è¦SEOçš„å†…å®¹ç«™</td><td>é™æ€å†…å®¹ç«™</td><td>åŠ¨é™ç»“åˆçš„å†…å®¹ç«™</td></tr></tbody></table>
<h4 data-id="heading-59">6.2 é€‰æ‹©æŒ‡å—</h4>
<h5 data-id="heading-60">6.2.1 é€‰æ‹©CSRçš„åœºæ™¯</h5>
<ol>
<li><strong>é«˜åº¦äº¤äº’çš„åº”ç”¨</strong> - å¦‚åœ¨çº¿å·¥å…·ã€æ¸¸æˆã€ä»ªè¡¨æ¿ç­‰</li>
<li><strong>å†…éƒ¨ç®¡ç†ç³»ç»Ÿ</strong> - ä¸éœ€è¦SEOä¼˜åŒ–çš„ä¼ä¸šå†…éƒ¨åº”ç”¨</li>
<li><strong>å®æ—¶æ•°æ®å±•ç¤º</strong> - éœ€è¦é¢‘ç¹æ›´æ–°æ•°æ®çš„åº”ç”¨</li>
</ol>
<h5 data-id="heading-61">6.2.2 é€‰æ‹©SSRçš„åœºæ™¯</h5>
<ol>
<li><strong>å†…å®¹ç½‘ç«™</strong> - åšå®¢ã€æ–°é—»ç½‘ç«™ç­‰éœ€è¦SEOä¼˜åŒ–çš„ç«™ç‚¹</li>
<li><strong>ç”µå•†ç½‘ç«™</strong> - éœ€è¦åœ¨æœç´¢å¼•æ“ä¸­å±•ç¤ºå•†å“ä¿¡æ¯</li>
<li><strong>ç¤¾äº¤å¹³å°</strong> - éœ€è¦è‰¯å¥½çš„SEOå’Œè¾ƒå¿«çš„é¦–å±åŠ è½½é€Ÿåº¦</li>
</ol>
<h5 data-id="heading-62">6.2.3 é€‰æ‹©SSGçš„åœºæ™¯</h5>
<ol>
<li><strong>æ–‡æ¡£ç½‘ç«™</strong> - æŠ€æœ¯æ–‡æ¡£ã€å¸®åŠ©ä¸­å¿ƒç­‰é™æ€å†…å®¹</li>
<li><strong>è¥é”€ç½‘ç«™</strong> - ä¼ä¸šå®˜ç½‘ã€äº§å“ä»‹ç»é¡µç­‰</li>
<li><strong>åšå®¢å¹³å°</strong> - ä¸ªäººåšå®¢ã€æŠ€æœ¯åˆ†äº«ç­‰æ›´æ–°é¢‘ç‡ä¸é«˜çš„ç«™ç‚¹</li>
</ol>
<h5 data-id="heading-63">6.2.4 é€‰æ‹©ISRçš„åœºæ™¯</h5>
<ol>
<li><strong>æ–°é—»ç½‘ç«™</strong> - éœ€è¦å¿«é€Ÿæ›´æ–°ä½†ä¸è¦æ±‚ç»å¯¹å®æ—¶</li>
<li><strong>ç”µå•†å¹³å°</strong> - å•†å“ä¿¡æ¯å¶å°”æ›´æ–°ï¼Œä½†éœ€è¦è‰¯å¥½çš„æ€§èƒ½</li>
<li><strong>å†…å®¹èšåˆå¹³å°</strong> - éœ€è¦å¹³è¡¡æ€§èƒ½å’Œå†…å®¹æ–°é²œåº¦</li>
</ol>
<h4 data-id="heading-64">6.3 æ··åˆç­–ç•¥</h4>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¾ˆå°‘ä¼šåªä½¿ç”¨ä¸€ç§æ¸²æŸ“ç­–ç•¥ã€‚æ›´å¸¸è§çš„æ˜¯æ ¹æ®ä¸åŒé¡µé¢çš„éœ€æ±‚é‡‡ç”¨ä¸åŒçš„ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Next.js ç¤ºä¾‹ï¼šæ··åˆä½¿ç”¨å¤šç§ç­–ç•¥</span>
<span class="hljs-comment">// pages/index.js - ä½¿ç”¨SSGï¼ˆé¦–é¡µç›¸å¯¹é™æ€ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getStaticProps</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> featuredPosts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getFeaturedPosts</span>();
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: { featuredPosts },
    <span class="hljs-attr">revalidate</span>: <span class="hljs-number">3600</span>
  };
}

<span class="hljs-comment">// pages/dashboard.js - ä½¿ç”¨SSRï¼ˆéœ€è¦ç”¨æˆ·ä¸ªæ€§åŒ–æ•°æ®ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getServerSideProps</span>(<span class="hljs-params">context</span>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUser</span>(context.<span class="hljs-property">req</span>);
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: { user }
  };
}

<span class="hljs-comment">// pages/search.js - ä½¿ç”¨CSRï¼ˆé«˜åº¦äº¤äº’çš„æœç´¢åŠŸèƒ½ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SearchPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å®Œå…¨å®¢æˆ·ç«¯æ¸²æŸ“</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SearchComponent</span> /&gt;</span></span>;
}
</code></pre>
<h3 data-id="heading-65">ç¬¬ä¸ƒç« ï¼šæ€§èƒ½ä¼˜åŒ–å®è·µ</h3>
<h4 data-id="heading-66">7.1 å›¾ç‰‡ä¼˜åŒ–</h4>
<p>æ— è®ºä½¿ç”¨å“ªç§æ¸²æŸ“ç­–ç•¥ï¼Œå›¾ç‰‡ä¼˜åŒ–éƒ½æ˜¯æå‡æ€§èƒ½çš„å…³é”®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨next/imageè¿›è¡Œå›¾ç‰‡ä¼˜åŒ–</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/image'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyImage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"/profile.jpg"</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"Profile"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">{400}</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{400}</span>
      <span class="hljs-attr">layout</span>=<span class="hljs-string">"responsive"</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"blur"</span>
      <span class="hljs-attr">blurDataURL</span>=<span class="hljs-string">"data:image/jpeg;base64,..."</span>
    /&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-67">7.2 ä»£ç åˆ†å‰²</h4>
<p>åˆç†ä½¿ç”¨ä»£ç åˆ†å‰²å¯ä»¥å‡å°‘åˆå§‹åŠ è½½çš„JavaScriptä½“ç§¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ¨æ€å¯¼å…¥ç»„ä»¶</span>
<span class="hljs-keyword">import</span> dynamic <span class="hljs-keyword">from</span> <span class="hljs-string">'next/dynamic'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">HeavyComponent</span> = <span class="hljs-title function_">dynamic</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../components/HeavyComponent'</span>), {
  <span class="hljs-attr">loading</span>: <span class="hljs-function">() =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>,
  <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// å®¢æˆ·ç«¯æ¸²æŸ“</span>
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HomePage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">HeavyComponent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-68">7.3 ç¼“å­˜ç­–ç•¥</h4>
<p>åˆç†çš„ç¼“å­˜ç­–ç•¥å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// next.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">headers</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> [
      {
        <span class="hljs-attr">source</span>: <span class="hljs-string">'/_next/static/:path*'</span>,
        <span class="hljs-attr">headers</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">'Cache-Control'</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-string">'public, max-age=31536000, immutable'</span>
          }
        ]
      }
    ];
  }
};
</code></pre>
<h3 data-id="heading-69">ç¬¬å…«ç« ï¼šæœªæ¥å‘å±•ä¸è¶‹åŠ¿</h3>
<h4 data-id="heading-70">8.1 Web Streams API</h4>
<p>Web Streams APIä¸ºå¤„ç†å¤§å‹æ•°æ®æµæä¾›äº†æ ‡å‡†åŒ–çš„æ–¹æ³•ï¼Œæœªæ¥å¯èƒ½ä¼šå½±å“SSRçš„å®ç°æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨Streams APIè¿›è¡ŒSSR</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* <span class="hljs-title function_">renderToStream</span>(<span class="hljs-params">element</span>) {
  <span class="hljs-keyword">yield</span> <span class="hljs-string">'&lt;!DOCTYPE html&gt;'</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-string">'&lt;html&gt;'</span>;
  <span class="hljs-comment">// ...æ¸²æŸ“é€»è¾‘</span>
  <span class="hljs-keyword">yield</span> <span class="hljs-string">'&lt;/html&gt;'</span>;
}

<span class="hljs-comment">// åœ¨æœåŠ¡å™¨ä¸­ä½¿ç”¨</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> stream = <span class="hljs-title function_">renderToStream</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
    res.<span class="hljs-title function_">write</span>(chunk);
  }
  res.<span class="hljs-title function_">end</span>();
});
</code></pre>
<h4 data-id="heading-71">8.2 Edge Computing</h4>
<p>è¾¹ç¼˜è®¡ç®—çš„å‘å±•ä¸ºSSRå’ŒISRæä¾›äº†æ–°çš„å¯èƒ½æ€§ï¼Œå¯ä»¥åœ¨æ›´é è¿‘ç”¨æˆ·çš„ä½ç½®è¿›è¡Œæ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨Edge Functionsä¸­è¿›è¡Œæ¸²æŸ“</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">onRequest</span>(<span class="hljs-params">context</span>) {
  <span class="hljs-keyword">const</span> { request } = context;
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>);
  
  <span class="hljs-comment">// åœ¨è¾¹ç¼˜èŠ‚ç‚¹è¿›è¡Œæ¸²æŸ“</span>
  <span class="hljs-keyword">const</span> html = <span class="hljs-keyword">await</span> <span class="hljs-title function_">renderPage</span>(url.<span class="hljs-property">pathname</span>);
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(html, {
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/html'</span> }
  });
}
</code></pre>
<h4 data-id="heading-72">8.3 ç»„ä»¶çº§SSR</h4>
<p>æœªæ¥çš„æ¡†æ¶å¯èƒ½ä¼šæ”¯æŒæ›´ç»†ç²’åº¦çš„SSRï¼Œå…è®¸å•ä¸ªç»„ä»¶çº§åˆ«çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¦‚å¿µæ€§ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-comment">// è¿™ä¸ªç»„ä»¶å°†åœ¨æœåŠ¡ç«¯æ¸²æŸ“</span>
  <span class="hljs-keyword">const</span> userData = <span class="hljs-title function_">useServerData</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchUserData</span>(userId));
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{userData.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{userData.bio}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-73">ç»“è®º</h3>
<p>æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§ä½œä¸ºWebå¼€å‘çš„åŸºç¡€ç†å¿µï¼Œä¸ºæˆ‘ä»¬æ„å»ºå…¼å®¹æ€§å¼ºã€ç”¨æˆ·ä½“éªŒå¥½çš„åº”ç”¨æä¾›äº†æŒ‡å¯¼åŸåˆ™ã€‚è€ŒPWAã€SSRã€SSGå’ŒISRç­‰ç°ä»£æŠ€æœ¯åˆ™åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥æå‡äº†Webåº”ç”¨çš„æ€§èƒ½ã€å¯è®¿é—®æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ–¹æ¡ˆï¼š</p>
<ul>
<li>å¯¹äºé™æ€å†…å®¹ä¸ºä¸»çš„ç½‘ç«™ï¼ŒSSGå’ŒISRæ˜¯å¾ˆå¥½çš„é€‰æ‹©</li>
<li>å¯¹äºéœ€è¦è‰¯å¥½SEOä¸”æœ‰åŠ¨æ€å†…å®¹çš„ç½‘ç«™ï¼ŒSSRæ›´ä¸ºåˆé€‚</li>
<li>å¯¹äºé«˜åº¦äº¤äº’çš„åº”ç”¨ï¼ŒCSRä»æ˜¯ä¸»è¦é€‰æ‹©</li>
<li>è€ŒPWAåˆ™å¯ä»¥ä¸ºä»»ä½•ç±»å‹çš„Webåº”ç”¨å¢åŠ åŸç”Ÿåº”ç”¨èˆ¬çš„ä½“éªŒ</li>
</ul>
<p>éšç€WebæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥é¢„è§ä¼šæœ‰æ›´å¤šåˆ›æ–°çš„æ¸²æŸ“ç­–ç•¥å’ŒæŠ€æœ¯å‡ºç°ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬éœ€è¦æŒç»­å­¦ä¹ å’Œé€‚åº”è¿™äº›å˜åŒ–ï¼Œä»¥ä¾¿ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„Webä½“éªŒã€‚</p>
<p>æœ€ç»ˆï¼Œæ— è®ºé€‰æ‹©å“ªç§æŠ€æœ¯æ–¹æ¡ˆï¼Œéƒ½åº”è¯¥ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒï¼Œç¡®ä¿åº”ç”¨åœ¨å„ç§è®¾å¤‡å’Œç½‘ç»œæ¡ä»¶ä¸‹éƒ½èƒ½æä¾›è‰¯å¥½çš„ä½“éªŒã€‚æŠ€æœ¯åªæ˜¯æ‰‹æ®µï¼Œåˆ›é€ ä»·å€¼æ‰æ˜¯ç›®çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯é«˜æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯è¯¦è§£]]></title>    <link>https://juejin.cn/post/7574581079626579974</link>    <guid>https://juejin.cn/post/7574581079626579974</guid>    <pubDate>2025-11-20T06:34:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574581079626579974" data-draft-id="7574530224852647942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯é«˜æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-20T06:34:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°å‰ç«¯_æˆ‘è‡ªåšå¼º"/> <meta itemprop="url" content="https://juejin.cn/user/2335811609826423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯é«˜æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2335811609826423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°å‰ç«¯_æˆ‘è‡ªåšå¼º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:34:45.000Z" title="Thu Nov 20 2025 06:34:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰ç«¯é«˜æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯è¯¦è§£</h2>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–å·²æˆä¸ºè¡¡é‡ä¸€ä¸ªåº”ç”¨è´¨é‡çš„é‡è¦æŒ‡æ ‡ã€‚éšç€åº”ç”¨å¤æ‚åº¦çš„ä¸æ–­å¢åŠ ï¼Œå¦‚ä½•ç¡®ä¿é¡µé¢æµç•…è¿è¡Œã€é¿å…å¡é¡¿ã€æé«˜ç”¨æˆ·ä½“éªŒæˆä¸ºäº†å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»é¢å¯¹çš„é‡è¦è¯¾é¢˜ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨äº”é¡¹å…³é”®æŠ€æœ¯ï¼šè™šæ‹Ÿæ»šåŠ¨ã€æ—¶é—´åˆ‡ç‰‡ï¼ˆTime Slicingï¼‰ã€Web Workerså¤šçº¿ç¨‹ã€å†…å­˜æ³„æ¼æ£€æµ‹å’Œå¤„ç†ä»¥åŠé˜²æŠ–èŠ‚æµçš„é«˜çº§åº”ç”¨ï¼Œå¸®åŠ©æ‚¨æŒæ¡æ„å»ºé«˜æ€§èƒ½å‰ç«¯åº”ç”¨çš„æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€è™šæ‹Ÿæ»šåŠ¨ï¼ˆVirtual Scrollingï¼‰</h3>
<h4 data-id="heading-2">1.1 è™šæ‹Ÿæ»šåŠ¨æ¦‚è¿°</h4>
<p>è™šæ‹Ÿæ»šåŠ¨æ˜¯ä¸€ç§ä¼˜åŒ–é•¿åˆ—è¡¨æ¸²æŸ“æ€§èƒ½çš„æŠ€æœ¯ã€‚ä¼ ç»Ÿçš„åˆ—è¡¨æ¸²æŸ“ä¼šä¸€æ¬¡æ€§æ¸²æŸ“æ‰€æœ‰æ•°æ®é¡¹ï¼Œå³ä½¿å®ƒä»¬ä¸åœ¨å¯è§†åŒºåŸŸå†…ï¼Œè¿™ä¼šå¯¼è‡´å¤§é‡çš„DOMèŠ‚ç‚¹åˆ›å»ºå’Œå†…å­˜å ç”¨ã€‚è™šæ‹Ÿæ»šåŠ¨åªæ¸²æŸ“å½“å‰å¯è§†åŒºåŸŸå†…çš„æ•°æ®é¡¹ï¼Œä»¥åŠå°‘é‡ç¼“å†²åŒºçš„æ•°æ®é¡¹ï¼Œä»è€Œå¤§å¹…å‡å°‘DOMèŠ‚ç‚¹æ•°é‡ï¼Œæ˜¾è‘—æå‡æ¸²æŸ“æ€§èƒ½ã€‚</p>
<h4 data-id="heading-3">1.2 è™šæ‹Ÿæ»šåŠ¨çš„å®ç°åŸç†</h4>
<p>è™šæ‹Ÿæ»šåŠ¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯åŠ¨æ€è®¡ç®—å¯è§†åŒºåŸŸå†…çš„å…ƒç´ ï¼Œå¹¶åªæ¸²æŸ“è¿™äº›å…ƒç´ ã€‚ä¸»è¦æ¶‰åŠä»¥ä¸‹å‡ ä¸ªå…³é”®æ¦‚å¿µï¼š</p>
<ol>
<li><strong>å¯è§†åŒºåŸŸé«˜åº¦</strong>ï¼šå®¹å™¨å¯è§çš„é«˜åº¦</li>
<li><strong>å…ƒç´ é«˜åº¦</strong>ï¼šæ¯ä¸ªåˆ—è¡¨é¡¹çš„é«˜åº¦</li>
<li><strong>å¯è§†åŒºåŸŸå…ƒç´ æ•°é‡</strong>ï¼šå¯è§†åŒºåŸŸå†…èƒ½å¤Ÿæ˜¾ç¤ºçš„å…ƒç´ æ•°é‡</li>
<li><strong>æ»šåŠ¨åç§»é‡</strong>ï¼šç”¨æˆ·æ»šåŠ¨çš„è·ç¦»</li>
<li><strong>èµ·å§‹ç´¢å¼•å’Œç»“æŸç´¢å¼•</strong>ï¼šå½“å‰éœ€è¦æ¸²æŸ“çš„å…ƒç´ èŒƒå›´</li>
</ol>
<h4 data-id="heading-4">1.3 è™šæ‹Ÿæ»šåŠ¨çš„å®ç°æ­¥éª¤</h4>
<h5 data-id="heading-5">1.3.1 åŸºç¡€å®ç°</h5>
<p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„è™šæ‹Ÿæ»šåŠ¨å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = options.<span class="hljs-property">container</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span> = options.<span class="hljs-property">itemHeight</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = options.<span class="hljs-property">data</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">clientHeight</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span> = options.<span class="hljs-property">bufferCount</span> || <span class="hljs-number">5</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindEvents</span>();
  }
  
  <span class="hljs-title function_">bindEvents</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateVisibleItems</span>();
    });
  }
  
  <span class="hljs-title function_">updateVisibleItems</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> scrollTop = <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">scrollTop</span>;
    <span class="hljs-keyword">const</span> newStartIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>) - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>);
    <span class="hljs-keyword">const</span> newEndIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>,
      newStartIndex + <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span> * <span class="hljs-number">2</span>
    );
    
    <span class="hljs-keyword">if</span> (newStartIndex !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> || newEndIndex !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = newStartIndex;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = newEndIndex;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    }
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> totalHeight = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>;
    <span class="hljs-keyword">const</span> offsetY = <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>;
    <span class="hljs-keyword">const</span> visibleData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span>);
    
    <span class="hljs-comment">// è®¾ç½®å®¹å™¨æ€»é«˜åº¦ä»¥ç»´æŒæ»šåŠ¨æ¡æ­£ç¡®æ˜¾ç¤º</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = totalHeight + <span class="hljs-string">'px'</span>;
    
    <span class="hljs-comment">// åˆ›å»ºå†…å®¹å®¹å™¨</span>
    <span class="hljs-keyword">const</span> contentWrapper = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    contentWrapper.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateY(<span class="hljs-subst">${offsetY}</span>px)`</span>;
    
    <span class="hljs-comment">// æ¸²æŸ“å¯è§é¡¹</span>
    visibleData.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span> + <span class="hljs-string">'px'</span>;
      element.<span class="hljs-property">textContent</span> = item;
      contentWrapper.<span class="hljs-title function_">appendChild</span>(element);
    });
    
    <span class="hljs-comment">// æ¸…ç©ºå¹¶é‡æ–°æ¸²æŸ“</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">appendChild</span>(contentWrapper);
  }
}
</code></pre>
<h5 data-id="heading-6">1.3.2 æ”¹è¿›ç‰ˆè™šæ‹Ÿæ»šåŠ¨</h5>
<p>ä¸Šé¢çš„åŸºç¡€å®ç°å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ¯æ¬¡æ»šåŠ¨éƒ½ä¼šé‡æ–°åˆ›å»ºDOMå…ƒç´ ã€‚æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedVirtualList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = options.<span class="hljs-property">container</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span> = options.<span class="hljs-property">itemHeight</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = options.<span class="hljs-property">data</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">clientHeight</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span> = options.<span class="hljs-property">bufferCount</span> || <span class="hljs-number">5</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>;
    
    <span class="hljs-comment">// ç¼“å­˜DOMå…ƒç´ </span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemElements</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span> = <span class="hljs-literal">null</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createStructure</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindEvents</span>();
  }
  
  <span class="hljs-title function_">createStructure</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»ºæ€»å®¹å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalContainer</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalContainer</span>.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'relative'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalContainer</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>) + <span class="hljs-string">'px'</span>;
    
    <span class="hljs-comment">// åˆ›å»ºå¯è§†åŒºåŸŸå®¹å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span>.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'absolute'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span>.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">'0'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span>.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">'0'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span>.<span class="hljs-property">style</span>.<span class="hljs-property">right</span> = <span class="hljs-string">'0'</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">totalContainer</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalContainer</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span>);
    
    <span class="hljs-comment">// é¢„åˆ›å»ºå…ƒç´ æ± </span>
    <span class="hljs-keyword">const</span> maxElements = <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span> * <span class="hljs-number">2</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; maxElements; i++) {
      <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span> + <span class="hljs-string">'px'</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemElements</span>.<span class="hljs-title function_">push</span>(element);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span>.<span class="hljs-title function_">appendChild</span>(element);
    }
  }
  
  <span class="hljs-title function_">bindEvents</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">throttle</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateVisibleItems</span>();
    }, <span class="hljs-number">16</span>));
  }
  
  <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, delay</span>) {
    <span class="hljs-keyword">let</span> timeoutId;
    <span class="hljs-keyword">let</span> lastExecTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
      <span class="hljs-keyword">const</span> currentTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">if</span> (currentTime - lastExecTime &gt; delay) {
        func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        lastExecTime = currentTime;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">clearTimeout</span>(timeoutId);
        timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
          lastExecTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
        }, delay - (currentTime - lastExecTime));
      }
    };
  }
  
  <span class="hljs-title function_">updateVisibleItems</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> scrollTop = <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">scrollTop</span>;
    <span class="hljs-keyword">const</span> newStartIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>) - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>);
    <span class="hljs-keyword">const</span> newEndIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>,
      newStartIndex + <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span> * <span class="hljs-number">2</span>
    );
    
    <span class="hljs-keyword">if</span> (newStartIndex !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> || newEndIndex !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = newStartIndex;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = newEndIndex;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    }
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> offsetY = <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateY(<span class="hljs-subst">${offsetY}</span>px)`</span>;
    
    <span class="hljs-keyword">const</span> visibleData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span>);
    
    <span class="hljs-comment">// æ›´æ–°å¯è§å…ƒç´ </span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemElements</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">element, index</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (index &lt; visibleData.<span class="hljs-property">length</span>) {
        element.<span class="hljs-property">textContent</span> = visibleData[index];
        element.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'block'</span>;
      } <span class="hljs-keyword">else</span> {
        element.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
      }
    });
  }
}
</code></pre>
<h4 data-id="heading-7">1.4 è™šæ‹Ÿæ»šåŠ¨çš„é«˜çº§ç‰¹æ€§</h4>
<h5 data-id="heading-8">1.4.1 åŠ¨æ€é«˜åº¦æ”¯æŒ</h5>
<p>ç°å®åœºæ™¯ä¸­ï¼Œåˆ—è¡¨é¡¹çš„é«˜åº¦å¾€å¾€æ˜¯ä¸å›ºå®šçš„ã€‚æˆ‘ä»¬éœ€è¦æ”¯æŒåŠ¨æ€é«˜åº¦çš„è™šæ‹Ÿæ»šåŠ¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicHeightVirtualList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = options.<span class="hljs-property">container</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = options.<span class="hljs-property">data</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">estimateHeight</span> = options.<span class="hljs-property">estimateHeight</span> || <span class="hljs-number">50</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">clientHeight</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">estimateHeight</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span> = options.<span class="hljs-property">bufferCount</span> || <span class="hljs-number">5</span>;
    
    <span class="hljs-comment">// ç¼“å­˜æ¯ä¸ªå…ƒç´ çš„å®é™…é«˜åº¦</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heights</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">estimateHeight</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">positions</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculatePositions</span>();
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemElements</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentWrapper</span> = <span class="hljs-literal">null</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">calculatePositions</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> positions = [];
    <span class="hljs-keyword">let</span> accumulatedHeight = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>; i++) {
      positions[i] = accumulatedHeight;
      accumulatedHeight += <span class="hljs-variable language_">this</span>.<span class="hljs-property">heights</span>[i];
    }
    
    <span class="hljs-keyword">return</span> positions;
  }
  
  <span class="hljs-title function_">updateItemHeight</span>(<span class="hljs-params">index, height</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">heights</span>[index] !== height) {
      <span class="hljs-keyword">const</span> diff = height - <span class="hljs-variable language_">this</span>.<span class="hljs-property">heights</span>[index];
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heights</span>[index] = height;
      
      <span class="hljs-comment">// æ›´æ–°åç»­å…ƒç´ çš„ä½ç½®</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = index + <span class="hljs-number">1</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">positions</span>.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">positions</span>[i] += diff;
      }
    }
  }
  
  <span class="hljs-title function_">getVisibleRange</span>(<span class="hljs-params">scrollTop, containerHeight</span>) {
    <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> end = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>;
    
    <span class="hljs-comment">// æ‰¾åˆ°èµ·å§‹ç´¢å¼•</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">positions</span>.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">positions</span>[i] &gt;= scrollTop) {
        start = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, i - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>);
        <span class="hljs-keyword">break</span>;
      }
    }
    
    <span class="hljs-comment">// æ‰¾åˆ°ç»“æŸç´¢å¼•</span>
    <span class="hljs-keyword">const</span> scrollBottom = scrollTop + containerHeight;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">positions</span>.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">positions</span>[i] &gt;= scrollBottom) {
        end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>, i + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>);
        <span class="hljs-keyword">break</span>;
      }
    }
    
    <span class="hljs-keyword">return</span> { start, end };
  }
  
  <span class="hljs-comment">// å…¶ä»–æ–¹æ³•ç±»ä¼¼å‰é¢çš„å®ç°...</span>
}
</code></pre>
<h5 data-id="heading-9">1.4.2 æ°´å¹³è™šæ‹Ÿæ»šåŠ¨</h5>
<p>é™¤äº†å‚ç›´æ»šåŠ¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®ç°æ°´å¹³æ–¹å‘çš„è™šæ‹Ÿæ»šåŠ¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HorizontalVirtualList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = options.<span class="hljs-property">container</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemWidth</span> = options.<span class="hljs-property">itemWidth</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = options.<span class="hljs-property">data</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">clientWidth</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemWidth</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span> = options.<span class="hljs-property">bufferCount</span> || <span class="hljs-number">5</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">updateVisibleItems</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> scrollLeft = <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">scrollLeft</span>;
    <span class="hljs-keyword">const</span> newStartIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollLeft / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemWidth</span>) - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>);
    <span class="hljs-keyword">const</span> newEndIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>,
      newStartIndex + <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span> * <span class="hljs-number">2</span>
    );
    
    <span class="hljs-keyword">if</span> (newStartIndex !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> || newEndIndex !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = newStartIndex;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = newEndIndex;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    }
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> offsetX = <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemWidth</span>;
    <span class="hljs-keyword">const</span> visibleData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span>);
    
    <span class="hljs-comment">// è®¾ç½®å®¹å™¨æ€»å®½åº¦</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemWidth</span>) + <span class="hljs-string">'px'</span>;
    
    <span class="hljs-keyword">const</span> contentWrapper = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    contentWrapper.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateX(<span class="hljs-subst">${offsetX}</span>px)`</span>;
    contentWrapper.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'flex'</span>;
    
    visibleData.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      element.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemWidth</span> + <span class="hljs-string">'px'</span>;
      element.<span class="hljs-property">style</span>.<span class="hljs-property">flexShrink</span> = <span class="hljs-string">'0'</span>;
      element.<span class="hljs-property">textContent</span> = item;
      contentWrapper.<span class="hljs-title function_">appendChild</span>(element);
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">appendChild</span>(contentWrapper);
  }
}
</code></pre>
<h4 data-id="heading-10">1.5 è™šæ‹Ÿæ»šåŠ¨åœ¨ç°ä»£æ¡†æ¶ä¸­çš„åº”ç”¨</h4>
<h5 data-id="heading-11">1.5.1 Reactä¸­çš„è™šæ‹Ÿæ»šåŠ¨å®ç°</h5>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">VirtualList</span> = (<span class="hljs-params">{ items, itemHeight, renderItem }</span>) =&gt; {
  <span class="hljs-keyword">const</span> containerRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [visibleRange, setVisibleRange] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">end</span>: <span class="hljs-number">0</span> });
  <span class="hljs-keyword">const</span> [scrollTop, setScrollTop] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  
  <span class="hljs-keyword">const</span> visibleCount = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(containerRef.<span class="hljs-property">current</span>?.<span class="hljs-property">clientHeight</span> / itemHeight || <span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> bufferCount = <span class="hljs-number">5</span>;
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleScroll</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (containerRef.<span class="hljs-property">current</span>) {
        <span class="hljs-title function_">setScrollTop</span>(containerRef.<span class="hljs-property">current</span>.<span class="hljs-property">scrollTop</span>);
      }
    };
    
    <span class="hljs-keyword">const</span> container = containerRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (container) {
      container.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, handleScroll);
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> container.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, handleScroll);
    }
  }, []);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> newStart = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop / itemHeight) - bufferCount);
    <span class="hljs-keyword">const</span> newEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(items.<span class="hljs-property">length</span>, newStart + visibleCount + bufferCount * <span class="hljs-number">2</span>);
    <span class="hljs-title function_">setVisibleRange</span>({ <span class="hljs-attr">start</span>: newStart, <span class="hljs-attr">end</span>: newEnd });
  }, [scrollTop, items.<span class="hljs-property">length</span>, itemHeight, visibleCount]);
  
  <span class="hljs-keyword">const</span> totalHeight = items.<span class="hljs-property">length</span> * itemHeight;
  <span class="hljs-keyword">const</span> offsetY = visibleRange.<span class="hljs-property">start</span> * itemHeight;
  <span class="hljs-keyword">const</span> visibleItems = items.<span class="hljs-title function_">slice</span>(visibleRange.<span class="hljs-property">start</span>, visibleRange.<span class="hljs-property">end</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{containerRef}</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">height:</span> '<span class="hljs-attr">100</span>%', 
        <span class="hljs-attr">overflow:</span> '<span class="hljs-attr">auto</span>',
        <span class="hljs-attr">position:</span> '<span class="hljs-attr">relative</span>'
      }}
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> <span class="hljs-attr">totalHeight</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
          <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
            <span class="hljs-attr">transform:</span> `<span class="hljs-attr">translateY</span>(${<span class="hljs-attr">offsetY</span>}<span class="hljs-attr">px</span>)`,
            <span class="hljs-attr">position:</span> '<span class="hljs-attr">absolute</span>',
            <span class="hljs-attr">top:</span> <span class="hljs-attr">0</span>,
            <span class="hljs-attr">left:</span> <span class="hljs-attr">0</span>,
            <span class="hljs-attr">right:</span> <span class="hljs-attr">0</span>
          }}
        &gt;</span>
          {visibleItems.map((item, index) =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
              <span class="hljs-attr">key</span>=<span class="hljs-string">{visibleRange.start</span> + <span class="hljs-attr">index</span>}
              <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> <span class="hljs-attr">itemHeight</span> }}
            &gt;</span>
              {renderItem(item)}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h5 data-id="heading-12">1.5.2 Vueä¸­çš„è™šæ‹Ÿæ»šåŠ¨å®ç°</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div 
    ref="container"
    class="virtual-list"
    @scroll="handleScroll"
  &gt;
    &lt;div :style="{ height: totalHeight + 'px' }"&gt;
      &lt;div 
        class="virtual-list-content"
        :style="{ transform: `translateY(${offsetY}px)` }"
      &gt;
        &lt;div
          v-for="(item, index) in visibleItems"
          :key="visibleStartIndex + index"
          :style="{ height: itemHeight + 'px' }"
          class="virtual-list-item"
        &gt;
          &lt;slot :item="item" :index="visibleStartIndex + index" /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'VirtualList',
  props: {
    items: {
      type: Array,
      required: true
    },
    itemHeight: {
      type: Number,
      default: 50
    },
    bufferSize: {
      type: Number,
      default: 5
    }
  },
  data() {
    return {
      scrollTop: 0
    };
  },
  computed: {
    containerHeight() {
      return this.$refs.container ? this.$refs.container.clientHeight : 0;
    },
    visibleCount() {
      return Math.ceil(this.containerHeight / this.itemHeight);
    },
    totalHeight() {
      return this.items.length * this.itemHeight;
    },
    visibleStartIndex() {
      return Math.max(0, Math.floor(this.scrollTop / this.itemHeight) - this.bufferSize);
    },
    visibleEndIndex() {
      return Math.min(
        this.items.length,
        this.visibleStartIndex + this.visibleCount + this.bufferSize * 2
      );
    },
    visibleItems() {
      return this.items.slice(this.visibleStartIndex, this.visibleEndIndex);
    },
    offsetY() {
      return this.visibleStartIndex * this.itemHeight;
    }
  },
  methods: {
    handleScroll(event) {
      this.scrollTop = event.target.scrollTop;
    }
  }
};
&lt;/script&gt;

&lt;style scoped&gt;
.virtual-list {
  height: 100%;
  overflow: auto;
  position: relative;
}

.virtual-list-content {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-13">1.6 è™šæ‹Ÿæ»šåŠ¨çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h4>
<h5 data-id="heading-14">1.6.1 ä½¿ç”¨requestAnimationFrameä¼˜åŒ–æ¸²æŸ“</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedVirtualList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-comment">// ... åˆå§‹åŒ–ä»£ç </span>
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingUpdate</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-title function_">updateVisibleItems</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingUpdate</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingUpdate</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">performUpdate</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingUpdate</span> = <span class="hljs-literal">false</span>;
      });
    }
  }
  
  <span class="hljs-title function_">performUpdate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> scrollTop = <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">scrollTop</span>;
    <span class="hljs-keyword">const</span> newStartIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>) - <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span>);
    <span class="hljs-keyword">const</span> newEndIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>,
      newStartIndex + <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufferCount</span> * <span class="hljs-number">2</span>
    );
    
    <span class="hljs-keyword">if</span> (newStartIndex !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> || newEndIndex !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = newStartIndex;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = newEndIndex;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    }
  }
  
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span>) {
      <span class="hljs-title function_">cancelAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span>);
    }
  }
}
</code></pre>
<h5 data-id="heading-15">1.6.2 ä½¿ç”¨Intersection Observerä¼˜åŒ–å¯è§æ€§æ£€æµ‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntersectionObserverVirtualList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-comment">// ... åˆå§‹åŒ–ä»£ç </span>
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">intersectionObserver</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleIntersection</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
      { <span class="hljs-attr">root</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>, <span class="hljs-attr">threshold</span>: <span class="hljs-number">0</span> }
    );
  }
  
  <span class="hljs-title function_">handleIntersection</span>(<span class="hljs-params">entries</span>) {
    entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
        <span class="hljs-comment">// å…ƒç´ è¿›å…¥è§†å£ï¼Œå¯ä»¥è¿›è¡Œæ‡’åŠ è½½ç­‰æ“ä½œ</span>
        <span class="hljs-keyword">const</span> index = <span class="hljs-built_in">parseInt</span>(entry.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">index</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadItemData</span>(index);
      }
    });
  }
  
  <span class="hljs-title function_">loadItemData</span>(<span class="hljs-params">index</span>) {
    <span class="hljs-comment">// åŠ è½½å…·ä½“é¡¹çš„æ•°æ®</span>
  }
}
</code></pre>
<h3 data-id="heading-16">äºŒã€æ—¶é—´åˆ‡ç‰‡ï¼ˆTime Slicingï¼‰</h3>
<h4 data-id="heading-17">2.1 æ—¶é—´åˆ‡ç‰‡æ¦‚è¿°</h4>
<p>æ—¶é—´åˆ‡ç‰‡æ˜¯ä¸€ç§å°†é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå°ä»»åŠ¡ç‰‡æ®µæ‰§è¡Œçš„æŠ€æœ¯ï¼Œæ¯ä¸ªç‰‡æ®µæ‰§è¡Œæ—¶é—´å¾ˆçŸ­ï¼Œä¸ä¼šé˜»å¡æµè§ˆå™¨ä¸»çº¿ç¨‹ï¼Œä»è€Œä¿è¯é¡µé¢çš„å“åº”æ€§å’Œæµç•…æ€§ã€‚è¿™æ˜¯React Fiberæ¶æ„çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-18">2.2 æ—¶é—´åˆ‡ç‰‡çš„å®ç°åŸç†</h4>
<p>æ—¶é—´åˆ‡ç‰‡çš„æ ¸å¿ƒæ˜¯åˆ©ç”¨<code>requestIdleCallback</code> APIæˆ–è€…<code>setTimeout</code>æ¥è°ƒåº¦ä»»åŠ¡ï¼Œç¡®ä¿åœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´æ‰§è¡Œä»»åŠ¡ç‰‡æ®µã€‚</p>
<h4 data-id="heading-19">2.3 åŸºç¡€æ—¶é—´åˆ‡ç‰‡å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeSlicingScheduler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-title function_">addTask</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">push</span>(task);
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">run</span>();
    }
  }
  
  <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">executeChunk</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();
      
      <span class="hljs-comment">// åœ¨5æ¯«ç§’å†…æ‰§è¡Œä»»åŠ¡</span>
      <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; performance.<span class="hljs-title function_">now</span>() - startTime &lt; <span class="hljs-number">5</span>) {
        <span class="hljs-keyword">const</span> task = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">shift</span>();
        <span class="hljs-title function_">task</span>();
      }
      
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// å¦‚æœè¿˜æœ‰ä»»åŠ¡ï¼Œç»§ç»­è°ƒåº¦</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> requestIdleCallback !== <span class="hljs-string">'undefined'</span>) {
          <span class="hljs-title function_">requestIdleCallback</span>(executeChunk);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-built_in">setTimeout</span>(executeChunk, <span class="hljs-number">0</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>;
      }
    };
    
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> requestIdleCallback !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-title function_">requestIdleCallback</span>(executeChunk);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">setTimeout</span>(executeChunk, <span class="hljs-number">0</span>);
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> scheduler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TimeSlicingScheduler</span>();

<span class="hljs-comment">// æ·»åŠ å¤§é‡ä»»åŠ¡</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
  scheduler.<span class="hljs-title function_">addTask</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ‰§è¡Œä¸€äº›è®¡ç®—å¯†é›†å‹ä»»åŠ¡</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Processing item:'</span>, i);
  });
}
</code></pre>
<h4 data-id="heading-20">2.4 é«˜çº§æ—¶é—´åˆ‡ç‰‡å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedTimeSlicing</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">frameBudget</span> = options.<span class="hljs-property">frameBudget</span> || <span class="hljs-number">5</span>; <span class="hljs-comment">// æ¯å¸§é¢„ç®—æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">paused</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onComplete</span> = options.<span class="hljs-property">onComplete</span> || (<span class="hljs-function">() =&gt;</span> {});
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onError</span> = options.<span class="hljs-property">onError</span> || (<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> { <span class="hljs-keyword">throw</span> error; });
  }
  
  <span class="hljs-title function_">addTask</span>(<span class="hljs-params">task, priority = <span class="hljs-number">0</span></span>) {
    <span class="hljs-comment">// æŒ‰ä¼˜å…ˆçº§æ’å…¥ä»»åŠ¡</span>
    <span class="hljs-keyword">const</span> insertIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">priority</span> &gt; priority);
    <span class="hljs-keyword">const</span> taskObj = { task, priority };
    
    <span class="hljs-keyword">if</span> (insertIndex === -<span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">push</span>(taskObj);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">splice</span>(insertIndex, <span class="hljs-number">0</span>, taskObj);
    }
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">paused</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">run</span>();
    }
  }
  
  <span class="hljs-title function_">pause</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">paused</span> = <span class="hljs-literal">true</span>;
  }
  
  <span class="hljs-title function_">resume</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">paused</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">run</span>();
    }
  }
  
  <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">paused</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">executeChunk</span> = (<span class="hljs-params">deadline</span>) =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">paused</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ä½¿ç”¨requestIdleCallbackæä¾›çš„deadline</span>
        <span class="hljs-keyword">let</span> <span class="hljs-title function_">hasTimeRemaining</span> = (<span class="hljs-params"/>) =&gt; deadline.<span class="hljs-title function_">timeRemaining</span>() &gt; <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> deadline === <span class="hljs-string">'undefined'</span>) {
          <span class="hljs-comment">// fallbackåˆ°performance.now()</span>
          <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();
          hasTimeRemaining = <span class="hljs-function">() =&gt;</span> performance.<span class="hljs-title function_">now</span>() - startTime &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">frameBudget</span>;
        }
        
        <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡ç›´åˆ°æ—¶é—´ç”¨å®Œ</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-title function_">hasTimeRemaining</span>()) {
          <span class="hljs-keyword">const</span> taskObj = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">shift</span>();
          taskObj.<span class="hljs-title function_">task</span>();
        }
        
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-comment">// è¿˜æœ‰ä»»åŠ¡ï¼Œç»§ç»­è°ƒåº¦</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scheduleNextChunk</span>(executeChunk);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onComplete</span>();
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onError</span>(error);
      }
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scheduleNextChunk</span>(executeChunk);
  }
  
  <span class="hljs-title function_">scheduleNextChunk</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> requestIdleCallback !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-title function_">requestIdleCallback</span>(callback);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// fallbackåˆ°requestAnimationFrame</span>
      <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> deadline = {
          <span class="hljs-attr">timeRemaining</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">frameBudget</span> - (performance.<span class="hljs-title function_">now</span>() % <span class="hljs-variable language_">this</span>.<span class="hljs-property">frameBudget</span>))
        };
        <span class="hljs-title function_">callback</span>(deadline);
      });
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> scheduler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AdvancedTimeSlicing</span>({
  <span class="hljs-attr">frameBudget</span>: <span class="hljs-number">8</span>,
  <span class="hljs-attr">onComplete</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'All tasks completed'</span>),
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Task error:'</span>, error)
});

<span class="hljs-comment">// æ·»åŠ é«˜ä¼˜å…ˆçº§ä»»åŠ¡</span>
scheduler.<span class="hljs-title function_">addTask</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'High priority task'</span>);
}, <span class="hljs-number">10</span>);

<span class="hljs-comment">// æ·»åŠ æ™®é€šä»»åŠ¡</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  scheduler.<span class="hljs-title function_">addTask</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
    <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10000</span>; j++) {
      sum += j;
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Task <span class="hljs-subst">${i}</span> completed, sum: <span class="hljs-subst">${sum}</span>`</span>);
  });
}
</code></pre>
<h4 data-id="heading-21">2.5 Reactä¸­çš„æ—¶é—´åˆ‡ç‰‡åº”ç”¨</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// æ—¶é—´åˆ‡ç‰‡Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useTimeSlicing</span>(<span class="hljs-params">initialTasks = [], options = {}</span>) {
  <span class="hljs-keyword">const</span> [tasks, setTasks] = <span class="hljs-title function_">useState</span>(initialTasks);
  <span class="hljs-keyword">const</span> [processing, setProcessing] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [completed, setCompleted] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  
  <span class="hljs-keyword">const</span> processTasks = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (tasks.<span class="hljs-property">length</span> === <span class="hljs-number">0</span> || processing) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-title function_">setProcessing</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">let</span> processedCount = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">executeChunk</span> = (<span class="hljs-params">deadline</span>) =&gt; {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">while</span> (tasks.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; deadline.<span class="hljs-title function_">timeRemaining</span>() &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">const</span> task = tasks.<span class="hljs-title function_">shift</span>();
          <span class="hljs-title function_">task</span>();
          processedCount++;
        }
        
        <span class="hljs-title function_">setCompleted</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + processedCount);
        
        <span class="hljs-keyword">if</span> (tasks.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-title function_">requestIdleCallback</span>(executeChunk);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">setProcessing</span>(<span class="hljs-literal">false</span>);
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error processing tasks:'</span>, error);
        <span class="hljs-title function_">setProcessing</span>(<span class="hljs-literal">false</span>);
      }
    };
    
    <span class="hljs-title function_">requestIdleCallback</span>(executeChunk);
  }, [tasks, processing]);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (tasks.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; !processing) {
      <span class="hljs-title function_">processTasks</span>();
    }
  }, [tasks, processing, processTasks]);
  
  <span class="hljs-keyword">const</span> addTasks = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">newTasks</span>) =&gt;</span> {
    <span class="hljs-title function_">setTasks</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> [...prev, ...newTasks]);
  }, []);
  
  <span class="hljs-keyword">return</span> {
    tasks,
    processing,
    completed,
    addTasks,
    setTasks
  };
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶é—´åˆ‡ç‰‡çš„ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">TimeSlicingComponent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>([]);
  <span class="hljs-keyword">const</span> { processing, completed, addTasks } = <span class="hljs-title function_">useTimeSlicing</span>();
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">generateTasks</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> tasks = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
      tasks.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¤æ‚è®¡ç®—</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>(), <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>());
        <span class="hljs-keyword">if</span> (i % <span class="hljs-number">1000</span> === <span class="hljs-number">0</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Processed <span class="hljs-subst">${i}</span> items`</span>);
        }
      });
    }
    <span class="hljs-title function_">addTasks</span>(tasks);
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{generateTasks}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{processing}</span>&gt;</span>
        {processing ? 'Processing...' : 'Start Processing'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Completed: {completed}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Processing: {processing ? 'Yes' : 'No'}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h4 data-id="heading-22">2.6 æ—¶é—´åˆ‡ç‰‡åœ¨æ•°æ®å¤„ç†ä¸­çš„åº”ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">chunkSize</span> = options.<span class="hljs-property">chunkSize</span> || <span class="hljs-number">100</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onProgress</span> = options.<span class="hljs-property">onProgress</span> || (<span class="hljs-function">() =&gt;</span> {});
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onComplete</span> = options.<span class="hljs-property">onComplete</span> || (<span class="hljs-function">() =&gt;</span> {});
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">const</span> results = [];
    <span class="hljs-keyword">const</span> total = data.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">let</span> processed = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">processChunk</span> = (<span class="hljs-params">chunk</span>) =&gt; {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">executeChunk</span> = (<span class="hljs-params">deadline</span>) =&gt; {
          <span class="hljs-keyword">const</span> chunkResults = [];
          
          <span class="hljs-keyword">while</span> (chunk.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; deadline.<span class="hljs-title function_">timeRemaining</span>() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">const</span> item = chunk.<span class="hljs-title function_">shift</span>();
            <span class="hljs-comment">// å¤„ç†å•ä¸ªæ•°æ®é¡¹</span>
            <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processItem</span>(item);
            chunkResults.<span class="hljs-title function_">push</span>(result);
            processed++;
          }
          
          results.<span class="hljs-title function_">push</span>(...chunkResults);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onProgress</span>(processed, total);
          
          <span class="hljs-keyword">if</span> (chunk.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-title function_">requestIdleCallback</span>(executeChunk);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-title function_">resolve</span>();
          }
        };
        
        <span class="hljs-title function_">requestIdleCallback</span>(executeChunk);
      });
    };
    
    <span class="hljs-comment">// å°†æ•°æ®åˆ†å—å¤„ç†</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-property">length</span>; i += <span class="hljs-variable language_">this</span>.<span class="hljs-property">chunkSize</span>) {
      <span class="hljs-keyword">const</span> chunk = data.<span class="hljs-title function_">slice</span>(i, i + <span class="hljs-variable language_">this</span>.<span class="hljs-property">chunkSize</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">processChunk</span>(chunk);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onComplete</span>(results);
    <span class="hljs-keyword">return</span> results;
  }
  
  <span class="hljs-title function_">processItem</span>(<span class="hljs-params">item</span>) {
    <span class="hljs-comment">// å®é™…çš„æ•°æ®å¤„ç†é€»è¾‘</span>
    <span class="hljs-comment">// è¿™é‡Œåªæ˜¯ä¸€ä¸ªç¤ºä¾‹</span>
    <span class="hljs-keyword">return</span> {
      ...item,
      <span class="hljs-attr">processed</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> processor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataProcessor</span>({
  <span class="hljs-attr">chunkSize</span>: <span class="hljs-number">50</span>,
  <span class="hljs-attr">onProgress</span>: <span class="hljs-function">(<span class="hljs-params">processed, total</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Progress: <span class="hljs-subst">${processed}</span>/<span class="hljs-subst">${total}</span> (<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(processed/total*<span class="hljs-number">100</span>)}</span>%)`</span>);
  },
  <span class="hljs-attr">onComplete</span>: <span class="hljs-function">(<span class="hljs-params">results</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Processing completed:'</span>, results.<span class="hljs-property">length</span>, <span class="hljs-string">'items'</span>);
  }
});

<span class="hljs-comment">// å¤„ç†å¤§é‡æ•°æ®</span>
<span class="hljs-keyword">const</span> largeDataset = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">10000</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
  <span class="hljs-attr">id</span>: i,
  <span class="hljs-attr">name</span>: <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span>,
  <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()
}));

processor.<span class="hljs-title function_">processData</span>(largeDataset);
</code></pre>
<h3 data-id="heading-23">ä¸‰ã€Web Workerså¤šçº¿ç¨‹</h3>
<h4 data-id="heading-24">3.1 Web Workersæ¦‚è¿°</h4>
<p>Web Workerså…è®¸åœ¨åå°çº¿ç¨‹ä¸­è¿è¡ŒJavaScriptä»£ç ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œä»è€Œæé«˜åº”ç”¨çš„å“åº”æ€§ã€‚è¿™å¯¹äºæ‰§è¡Œè®¡ç®—å¯†é›†å‹ä»»åŠ¡ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<h4 data-id="heading-25">3.2 Web WorkersåŸºç¡€ä½¿ç”¨</h4>
<h5 data-id="heading-26">3.2.1 ä¸»çº¿ç¨‹ä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkerManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">workerScript</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(workerScript);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageId</span> = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> { id, result, error } = event.<span class="hljs-property">data</span>;
      <span class="hljs-keyword">const</span> callback = <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">get</span>(id);
      
      <span class="hljs-keyword">if</span> (callback) {
        <span class="hljs-keyword">if</span> (error) {
          callback.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error));
        } <span class="hljs-keyword">else</span> {
          callback.<span class="hljs-title function_">resolve</span>(result);
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">delete</span>(id);
      }
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Worker error:'</span>, error);
    };
  }
  
  <span class="hljs-title function_">postMessage</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> id = ++<span class="hljs-variable language_">this</span>.<span class="hljs-property">messageId</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">set</span>(id, { resolve, reject });
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-title function_">postMessage</span>({ id, ...message });
    });
  }
  
  <span class="hljs-title function_">terminate</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-title function_">terminate</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">clear</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨Worker</span>
<span class="hljs-keyword">const</span> workerManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerManager</span>(<span class="hljs-string">'worker.js'</span>);

<span class="hljs-comment">// å‘é€ä»»åŠ¡åˆ°Worker</span>
workerManager.<span class="hljs-title function_">postMessage</span>({ 
  <span class="hljs-attr">command</span>: <span class="hljs-string">'calculate'</span>, 
  <span class="hljs-attr">data</span>: { <span class="hljs-attr">numbers</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>] } 
}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Calculation result:'</span>, result);
}).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Calculation failed:'</span>, error);
});
</code></pre>
<h5 data-id="heading-27">3.2.2 Workerçº¿ç¨‹ä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// worker.js</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> { id, command, data } = event.<span class="hljs-property">data</span>;
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">let</span> result;
    
    <span class="hljs-keyword">switch</span> (command) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'calculate'</span>:
        result = <span class="hljs-title function_">performCalculation</span>(data);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'sort'</span>:
        result = <span class="hljs-title function_">performSort</span>(data);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'filter'</span>:
        result = <span class="hljs-title function_">performFilter</span>(data);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Unknown command: <span class="hljs-subst">${command}</span>`</span>);
    }
    
    self.<span class="hljs-title function_">postMessage</span>({ id, result });
  } <span class="hljs-keyword">catch</span> (error) {
    self.<span class="hljs-title function_">postMessage</span>({ id, <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> });
  }
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">performCalculation</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-keyword">const</span> { numbers } = data;
  <span class="hljs-keyword">return</span> numbers.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, num</span>) =&gt;</span> sum + num, <span class="hljs-number">0</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">performSort</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-keyword">const</span> { array } = data;
  <span class="hljs-keyword">return</span> array.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">performFilter</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-keyword">const</span> { array, predicate } = data;
  <span class="hljs-keyword">return</span> array.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-built_in">eval</span>(predicate)); <span class="hljs-comment">// æ³¨æ„ï¼šå®é™…ä½¿ç”¨ä¸­åº”é¿å…eval</span>
}
</code></pre>
<h4 data-id="heading-28">3.3 é«˜çº§Web Workerså®ç°</h4>
<h5 data-id="heading-29">3.3.1 Workeræ± ç®¡ç†</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkerPool</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">workerScript, poolSize = <span class="hljs-number">4</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">workerScript</span> = workerScript;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">poolSize</span> = poolSize;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">workerQueue</span> = [];
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initializeWorkers</span>();
  }
  
  <span class="hljs-title function_">initializeWorkers</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">poolSize</span>; i++) {
      <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">workerScript</span>);
      worker.<span class="hljs-property">id</span> = i;
      worker.<span class="hljs-property">busy</span> = <span class="hljs-literal">false</span>;
      
      worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> { id, result, error } = event.<span class="hljs-property">data</span>;
        <span class="hljs-keyword">const</span> task = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findTaskById</span>(id);
        
        <span class="hljs-keyword">if</span> (task) {
          <span class="hljs-keyword">if</span> (error) {
            task.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error));
          } <span class="hljs-keyword">else</span> {
            task.<span class="hljs-title function_">resolve</span>(result);
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeTask</span>(id);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">releaseWorker</span>(worker);
        }
      };
      
      worker.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Worker <span class="hljs-subst">${worker.id}</span> error:`</span>, error);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">releaseWorker</span>(worker);
      };
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>.<span class="hljs-title function_">push</span>(worker);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">workerQueue</span>.<span class="hljs-title function_">push</span>(worker);
    }
  }
  
  <span class="hljs-title function_">execute</span>(<span class="hljs-params">taskData</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> task = {
        <span class="hljs-attr">id</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateId</span>(),
        <span class="hljs-attr">data</span>: taskData,
        resolve,
        reject
      };
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">push</span>(task);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processQueue</span>();
    });
  }
  
  <span class="hljs-title function_">processQueue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">workerQueue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> task = <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">shift</span>();
      <span class="hljs-keyword">const</span> worker = <span class="hljs-variable language_">this</span>.<span class="hljs-property">workerQueue</span>.<span class="hljs-title function_">shift</span>();
      
      worker.<span class="hljs-property">busy</span> = <span class="hljs-literal">true</span>;
      worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">id</span>: task.<span class="hljs-property">id</span>, ...task.<span class="hljs-property">data</span> });
    }
  }
  
  <span class="hljs-title function_">releaseWorker</span>(<span class="hljs-params">worker</span>) {
    worker.<span class="hljs-property">busy</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">workerQueue</span>.<span class="hljs-title function_">push</span>(worker);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processQueue</span>();
  }
  
  <span class="hljs-title function_">findTaskById</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">task</span> =&gt;</span> task.<span class="hljs-property">id</span> === id);
  }
  
  <span class="hljs-title function_">removeTask</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">task</span> =&gt;</span> task.<span class="hljs-property">id</span> !== id);
  }
  
  <span class="hljs-title function_">generateId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
  }
  
  <span class="hljs-title function_">terminate</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">worker</span> =&gt;</span> worker.<span class="hljs-title function_">terminate</span>());
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">workerQueue</span> = [];
  }
}

<span class="hljs-comment">// ä½¿ç”¨Workeræ± </span>
<span class="hljs-keyword">const</span> workerPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerPool</span>(<span class="hljs-string">'advanced-worker.js'</span>, <span class="hljs-number">4</span>);

<span class="hljs-comment">// å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  workerPool.<span class="hljs-title function_">execute</span>({ <span class="hljs-attr">command</span>: <span class="hljs-string">'fibonacci'</span>, <span class="hljs-attr">n</span>: <span class="hljs-number">40</span> }),
  workerPool.<span class="hljs-title function_">execute</span>({ <span class="hljs-attr">command</span>: <span class="hljs-string">'factorial'</span>, <span class="hljs-attr">n</span>: <span class="hljs-number">20</span> }),
  workerPool.<span class="hljs-title function_">execute</span>({ <span class="hljs-attr">command</span>: <span class="hljs-string">'prime'</span>, <span class="hljs-attr">limit</span>: <span class="hljs-number">10000</span> })
]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'All calculations completed:'</span>, results);
});
</code></pre>
<h5 data-id="heading-30">3.3.2 é«˜çº§Workerå®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// advanced-worker.js</span>
<span class="hljs-keyword">const</span> commands = {
  <span class="hljs-attr">fibonacci</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> n;
    <span class="hljs-keyword">let</span> a = <span class="hljs-number">0</span>, b = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++) {
      <span class="hljs-keyword">const</span> temp = a + b;
      a = b;
      b = temp;
    }
    <span class="hljs-keyword">return</span> b;
  },
  
  <span class="hljs-attr">factorial</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> result = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++) {
      result *= i;
    }
    <span class="hljs-keyword">return</span> result;
  },
  
  <span class="hljs-attr">prime</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">limit</span>) {
    <span class="hljs-keyword">const</span> primes = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>; i &lt;= limit; i++) {
      <span class="hljs-keyword">let</span> isPrime = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">2</span>; j &lt;= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(i); j++) {
        <span class="hljs-keyword">if</span> (i % j === <span class="hljs-number">0</span>) {
          isPrime = <span class="hljs-literal">false</span>;
          <span class="hljs-keyword">break</span>;
        }
      }
      <span class="hljs-keyword">if</span> (isPrime) primes.<span class="hljs-title function_">push</span>(i);
    }
    <span class="hljs-keyword">return</span> primes;
  },
  
  <span class="hljs-attr">sort</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">const</span> { array, algorithm = <span class="hljs-string">'quick'</span> } = data;
    <span class="hljs-keyword">switch</span> (algorithm) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'bubble'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">bubbleSort</span>(array);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'quick'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">quickSort</span>(array);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'merge'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">mergeSort</span>(array);
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span> array.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);
    }
  },
  
  <span class="hljs-attr">search</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">const</span> { array, target, algorithm = <span class="hljs-string">'binary'</span> } = data;
    <span class="hljs-keyword">switch</span> (algorithm) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'linear'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">linearSearch</span>(array, target);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'binary'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">binarySearch</span>(array, target);
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span> array.<span class="hljs-title function_">indexOf</span>(target);
    }
  }
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">bubbleSort</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">const</span> array = [...arr];
  <span class="hljs-keyword">const</span> n = array.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; n - i - <span class="hljs-number">1</span>; j++) {
      <span class="hljs-keyword">if</span> (array[j] &gt; array[j + <span class="hljs-number">1</span>]) {
        [array[j], array[j + <span class="hljs-number">1</span>]] = [array[j + <span class="hljs-number">1</span>], array[j]];
      }
    }
  }
  <span class="hljs-keyword">return</span> array;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">quickSort</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">if</span> (arr.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> arr;
  
  <span class="hljs-keyword">const</span> pivot = arr[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(arr.<span class="hljs-property">length</span> / <span class="hljs-number">2</span>)];
  <span class="hljs-keyword">const</span> left = [];
  <span class="hljs-keyword">const</span> right = [];
  <span class="hljs-keyword">const</span> equal = [];
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> element <span class="hljs-keyword">of</span> arr) {
    <span class="hljs-keyword">if</span> (element &lt; pivot) {
      left.<span class="hljs-title function_">push</span>(element);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (element &gt; pivot) {
      right.<span class="hljs-title function_">push</span>(element);
    } <span class="hljs-keyword">else</span> {
      equal.<span class="hljs-title function_">push</span>(element);
    }
  }
  
  <span class="hljs-keyword">return</span> [...<span class="hljs-title function_">quickSort</span>(left), ...equal, ...<span class="hljs-title function_">quickSort</span>(right)];
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">mergeSort</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">if</span> (arr.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> arr;
  
  <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(arr.<span class="hljs-property">length</span> / <span class="hljs-number">2</span>);
  <span class="hljs-keyword">const</span> left = <span class="hljs-title function_">mergeSort</span>(arr.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, mid));
  <span class="hljs-keyword">const</span> right = <span class="hljs-title function_">mergeSort</span>(arr.<span class="hljs-title function_">slice</span>(mid));
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">merge</span>(left, right);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">left, right</span>) {
  <span class="hljs-keyword">const</span> result = [];
  <span class="hljs-keyword">let</span> leftIndex = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> rightIndex = <span class="hljs-number">0</span>;
  
  <span class="hljs-keyword">while</span> (leftIndex &lt; left.<span class="hljs-property">length</span> &amp;&amp; rightIndex &lt; right.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">if</span> (left[leftIndex] &lt; right[rightIndex]) {
      result.<span class="hljs-title function_">push</span>(left[leftIndex]);
      leftIndex++;
    } <span class="hljs-keyword">else</span> {
      result.<span class="hljs-title function_">push</span>(right[rightIndex]);
      rightIndex++;
    }
  }
  
  <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">concat</span>(left.<span class="hljs-title function_">slice</span>(leftIndex)).<span class="hljs-title function_">concat</span>(right.<span class="hljs-title function_">slice</span>(rightIndex));
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">linearSearch</span>(<span class="hljs-params">arr, target</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (arr[i] === target) <span class="hljs-keyword">return</span> i;
  }
  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">binarySearch</span>(<span class="hljs-params">arr, target</span>) {
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> right = arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
  
  <span class="hljs-keyword">while</span> (left &lt;= right) {
    <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((left + right) / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">if</span> (arr[mid] === target) <span class="hljs-keyword">return</span> mid;
    <span class="hljs-keyword">if</span> (arr[mid] &lt; target) {
      left = mid + <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
      right = mid - <span class="hljs-number">1</span>;
    }
  }
  
  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
}

self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> { id, command, data } = event.<span class="hljs-property">data</span>;
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (!commands[command]) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Unknown command: <span class="hljs-subst">${command}</span>`</span>);
    }
    
    <span class="hljs-keyword">const</span> result = commands[command](data);
    self.<span class="hljs-title function_">postMessage</span>({ id, result });
  } <span class="hljs-keyword">catch</span> (error) {
    self.<span class="hljs-title function_">postMessage</span>({ id, <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> });
  }
};
</code></pre>
<h4 data-id="heading-31">3.4 Web Workersåœ¨å›¾åƒå¤„ç†ä¸­çš„åº”ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// image-worker.js</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> { id, command, imageData, options } = event.<span class="hljs-property">data</span>;
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">let</span> result;
    
    <span class="hljs-keyword">switch</span> (command) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'grayscale'</span>:
        result = <span class="hljs-title function_">convertToGrayscale</span>(imageData);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'blur'</span>:
        result = <span class="hljs-title function_">applyBlur</span>(imageData, options.<span class="hljs-property">radius</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'sharpen'</span>:
        result = <span class="hljs-title function_">applySharpen</span>(imageData);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'edgeDetection'</span>:
        result = <span class="hljs-title function_">detectEdges</span>(imageData);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Unknown command: <span class="hljs-subst">${command}</span>`</span>);
    }
    
    self.<span class="hljs-title function_">postMessage</span>({ id, result }, [result.<span class="hljs-property">data</span>.<span class="hljs-property">buffer</span>]);
  } <span class="hljs-keyword">catch</span> (error) {
    self.<span class="hljs-title function_">postMessage</span>({ id, <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> });
  }
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">convertToGrayscale</span>(<span class="hljs-params">imageData</span>) {
  <span class="hljs-keyword">const</span> data = imageData.<span class="hljs-property">data</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-property">length</span>; i += <span class="hljs-number">4</span>) {
    <span class="hljs-keyword">const</span> avg = (data[i] + data[i + <span class="hljs-number">1</span>] + data[i + <span class="hljs-number">2</span>]) / <span class="hljs-number">3</span>;
    data[i] = avg;     <span class="hljs-comment">// red</span>
    data[i + <span class="hljs-number">1</span>] = avg; <span class="hljs-comment">// green</span>
    data[i + <span class="hljs-number">2</span>] = avg; <span class="hljs-comment">// blue</span>
  }
  <span class="hljs-keyword">return</span> imageData;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">applyBlur</span>(<span class="hljs-params">imageData, radius</span>) {
  <span class="hljs-keyword">const</span> { width, height, data } = imageData;
  <span class="hljs-keyword">const</span> newData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8ClampedArray</span>(data.<span class="hljs-property">length</span>);
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> y = <span class="hljs-number">0</span>; y &lt; height; y++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>; x &lt; width; x++) {
      <span class="hljs-keyword">const</span> idx = (y * width + x) * <span class="hljs-number">4</span>;
      <span class="hljs-keyword">let</span> r = <span class="hljs-number">0</span>, g = <span class="hljs-number">0</span>, b = <span class="hljs-number">0</span>, count = <span class="hljs-number">0</span>;
      
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> dy = -radius; dy &lt;= radius; dy++) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> dx = -radius; dx &lt;= radius; dx++) {
          <span class="hljs-keyword">const</span> nx = x + dx;
          <span class="hljs-keyword">const</span> ny = y + dy;
          
          <span class="hljs-keyword">if</span> (nx &gt;= <span class="hljs-number">0</span> &amp;&amp; nx &lt; width &amp;&amp; ny &gt;= <span class="hljs-number">0</span> &amp;&amp; ny &lt; height) {
            <span class="hljs-keyword">const</span> nIdx = (ny * width + nx) * <span class="hljs-number">4</span>;
            r += data[nIdx];
            g += data[nIdx + <span class="hljs-number">1</span>];
            b += data[nIdx + <span class="hljs-number">2</span>];
            count++;
          }
        }
      }
      
      newData[idx] = r / count;
      newData[idx + <span class="hljs-number">1</span>] = g / count;
      newData[idx + <span class="hljs-number">2</span>] = b / count;
      newData[idx + <span class="hljs-number">3</span>] = data[idx + <span class="hljs-number">3</span>]; <span class="hljs-comment">// alpha</span>
    }
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageData</span>(newData, width, height);
}

<span class="hljs-comment">// ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageProcessor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'image-worker.js'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageId</span> = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> { id, result, error } = event.<span class="hljs-property">data</span>;
      <span class="hljs-keyword">const</span> callback = <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">get</span>(id);
      
      <span class="hljs-keyword">if</span> (callback) {
        <span class="hljs-keyword">if</span> (error) {
          callback.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error));
        } <span class="hljs-keyword">else</span> {
          callback.<span class="hljs-title function_">resolve</span>(result);
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">delete</span>(id);
      }
    };
  }
  
  <span class="hljs-title function_">processImage</span>(<span class="hljs-params">imageData, command, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> id = ++<span class="hljs-variable language_">this</span>.<span class="hljs-property">messageId</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">set</span>(id, { resolve, reject });
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-title function_">postMessage</span>({ 
        id, 
        command, 
        imageData, 
        options 
      }, [imageData.<span class="hljs-property">data</span>.<span class="hljs-property">buffer</span>]);
    });
  }
  
  <span class="hljs-title function_">terminate</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-title function_">terminate</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">clear</span>();
  }
}
</code></pre>
<h3 data-id="heading-32">å››ã€å†…å­˜æ³„æ¼æ£€æµ‹å’Œå¤„ç†</h3>
<h4 data-id="heading-33">4.1 å†…å­˜æ³„æ¼æ¦‚è¿°</h4>
<p>å†…å­˜æ³„æ¼æ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜åï¼Œæ— æ³•é‡Šæ”¾å·²ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼Œå¯¼è‡´å¯ç”¨å†…å­˜é€æ¸å‡å°‘ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒæˆ–ç³»ç»Ÿæ€§èƒ½ä¸‹é™ã€‚</p>
<h4 data-id="heading-34">4.2 å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯</h4>
<h5 data-id="heading-35">4.2.1 äº‹ä»¶ç›‘å¬å™¨æœªç§»é™¤</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryLeakExample</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é”™è¯¯çš„åšæ³•ï¼šæ·»åŠ äº‹ä»¶ç›‘å¬å™¨ä½†æœªç§»é™¤</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
      <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>);
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(element);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-title function_">push</span>(element);
    }
  }
  
  <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Element clicked'</span>);
  }
  
  <span class="hljs-comment">// æ­£ç¡®çš„åšæ³•ï¼šæä¾›æ¸…ç†æ–¹æ³•</span>
  <span class="hljs-title function_">cleanup</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">element</span> =&gt;</span> {
      element.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>);
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(element);
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span> = [];
  }
  
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanup</span>();
  }
}
</code></pre>
<h5 data-id="heading-36">4.2.2 å®šæ—¶å™¨æœªæ¸…é™¤</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TimerLeakExample</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">intervals</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeouts</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startTimers</span>();
  }
  
  <span class="hljs-title function_">startTimers</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é”™è¯¯çš„åšæ³•ï¼šå¯åŠ¨å®šæ—¶å™¨ä½†æœªæ¸…é™¤</span>
    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Interval tick'</span>);
    }, <span class="hljs-number">1000</span>);
    
    <span class="hljs-keyword">const</span> timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Timeout executed'</span>);
    }, <span class="hljs-number">5000</span>);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">intervals</span>.<span class="hljs-title function_">push</span>(interval);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeouts</span>.<span class="hljs-title function_">push</span>(timeout);
  }
  
  <span class="hljs-comment">// æ­£ç¡®çš„åšæ³•ï¼šæä¾›æ¸…ç†æ–¹æ³•</span>
  <span class="hljs-title function_">clearTimers</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">intervals</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">interval</span> =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeouts</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">timeout</span> =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timeout));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">intervals</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeouts</span> = [];
  }
  
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearTimers</span>();
  }
}
</code></pre>
<h5 data-id="heading-37">4.2.3 é—­åŒ…å¼•ç”¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ClosureLeakExample</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">'some data'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupCallbacks</span>();
  }
  
  <span class="hljs-title function_">setupCallbacks</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é”™è¯¯çš„åšæ³•ï¼šé—­åŒ…æŒæœ‰å¤§é‡æ•°æ®å¼•ç”¨</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-comment">// è¿™ä¸ªé—­åŒ…æŒæœ‰äº†this.dataçš„å¼•ç”¨</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>);
      };
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">push</span>(callback);
    }
  }
  
  <span class="hljs-comment">// æ­£ç¡®çš„åšæ³•ï¼šé¿å…ä¸å¿…è¦çš„å¼•ç”¨</span>
  <span class="hljs-title function_">setupSafeCallbacks</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> dataLength = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>; <span class="hljs-comment">// åªä¿å­˜éœ€è¦çš„æ•°æ®</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dataLength);
      };
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">push</span>(callback);
    }
  }
  
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<h4 data-id="heading-38">4.3 å†…å­˜æ³„æ¼æ£€æµ‹å·¥å…·</h4>
<h5 data-id="heading-39">4.3.1 è‡ªå®šä¹‰å†…å­˜ç›‘æ§å·¥å…·</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryMonitor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">checkInterval</span> = options.<span class="hljs-property">checkInterval</span> || <span class="hljs-number">5000</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">threshold</span> = options.<span class="hljs-property">threshold</span> || <span class="hljs-number">100</span>; <span class="hljs-comment">// MB</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onLeakDetected</span> = options.<span class="hljs-property">onLeakDetected</span> || (<span class="hljs-function">() =&gt;</span> {});
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">monitoring</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseline</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = [];
  }
  
  <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">monitoring</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">monitoring</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseline</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCurrentMemoryUsage</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkMemory</span>();
  }
  
  <span class="hljs-title function_">stop</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">monitoring</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-title function_">getCurrentMemoryUsage</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (performance.<span class="hljs-property">memory</span>) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">used</span>: performance.<span class="hljs-property">memory</span>.<span class="hljs-property">usedJSHeapSize</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>, <span class="hljs-comment">// MB</span>
        <span class="hljs-attr">total</span>: performance.<span class="hljs-property">memory</span>.<span class="hljs-property">totalJSHeapSize</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>, <span class="hljs-comment">// MB</span>
        <span class="hljs-attr">limit</span>: performance.<span class="hljs-property">memory</span>.<span class="hljs-property">jsHeapSizeLimit</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span> <span class="hljs-comment">// MB</span>
      };
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-title function_">checkMemory</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">monitoring</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">const</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCurrentMemoryUsage</span>();
    <span class="hljs-keyword">if</span> (current) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
        <span class="hljs-attr">memory</span>: current
      });
      
      <span class="hljs-comment">// ä¿ç•™æœ€è¿‘60ä¸ªæ•°æ®ç‚¹</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">60</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">shift</span>();
      }
      
      <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">baseline</span> &amp;&amp; current.<span class="hljs-property">used</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseline</span>.<span class="hljs-property">used</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">threshold</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onLeakDetected</span>({
          <span class="hljs-attr">baseline</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseline</span>,
          <span class="hljs-attr">current</span>: current,
          <span class="hljs-attr">increase</span>: current.<span class="hljs-property">used</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseline</span>.<span class="hljs-property">used</span>
        });
      }
    }
    
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkMemory</span>(), <span class="hljs-variable language_">this</span>.<span class="hljs-property">checkInterval</span>);
  }
  
  <span class="hljs-title function_">getMemoryTrend</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> first = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>[<span class="hljs-number">0</span>].<span class="hljs-property">memory</span>.<span class="hljs-property">used</span>;
    <span class="hljs-keyword">const</span> last = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">memory</span>.<span class="hljs-property">used</span>;
    <span class="hljs-keyword">return</span> (last - first) / <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> monitor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MemoryMonitor</span>({
  <span class="hljs-attr">checkInterval</span>: <span class="hljs-number">3000</span>,
  <span class="hljs-attr">threshold</span>: <span class="hljs-number">50</span>,
  <span class="hljs-attr">onLeakDetected</span>: <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Potential memory leak detected:'</span>, info);
    <span class="hljs-comment">// å¯ä»¥è§¦å‘åƒåœ¾å›æ”¶ï¼ˆä»…åœ¨å¼€å‘ç¯å¢ƒä¸‹æœ‰æ•ˆï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">gc</span>) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">gc</span>();
    }
  }
});

monitor.<span class="hljs-title function_">start</span>();
</code></pre>
<h5 data-id="heading-40">4.3.2 DOMèŠ‚ç‚¹æ³„æ¼æ£€æµ‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DomLeakDetector</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">detachedNodes</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">leakThreshold</span> = <span class="hljs-number">1000</span>; <span class="hljs-comment">// æ¯«ç§’</span>
  }
  
  <span class="hljs-title function_">watchElementRemoval</span>(<span class="hljs-params">element, callback</span>) {
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">(<span class="hljs-params">mutations</span>) =&gt;</span> {
      mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">mutation</span>) =&gt;</span> {
        mutation.<span class="hljs-property">removedNodes</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trackDetachedNode</span>(node, callback);
          }
        });
      });
    });
    
    observer.<span class="hljs-title function_">observe</span>(element, { <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span> });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">push</span>(observer);
  }
  
  <span class="hljs-title function_">trackDetachedNode</span>(<span class="hljs-params">node, callback</span>) {
    <span class="hljs-comment">// æ ‡è®°èŠ‚ç‚¹ä¸ºå·²åˆ†ç¦»</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">detachedNodes</span>.<span class="hljs-title function_">set</span>(node, {
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">callback</span>: callback
    });
    
    <span class="hljs-comment">// å»¶è¿Ÿæ£€æŸ¥æ˜¯å¦å·²è¢«æ¸…ç†</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">detachedNodes</span>.<span class="hljs-title function_">has</span>(node)) {
        <span class="hljs-keyword">const</span> info = <span class="hljs-variable language_">this</span>.<span class="hljs-property">detachedNodes</span>.<span class="hljs-title function_">get</span>(node);
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - info.<span class="hljs-property">timestamp</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">leakThreshold</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Potential DOM node leak detected:'</span>, node);
          <span class="hljs-keyword">if</span> (info.<span class="hljs-property">callback</span>) {
            info.<span class="hljs-title function_">callback</span>(node);
          }
        }
      }
    }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">leakThreshold</span> + <span class="hljs-number">100</span>);
  }
  
  <span class="hljs-title function_">cleanup</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> observer.<span class="hljs-title function_">disconnect</span>());
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">detachedNodes</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
  }
}
</code></pre>
<h4 data-id="heading-41">4.4 å†…å­˜æ³„æ¼é¢„é˜²æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-42">4.4.1 ç”Ÿå‘½å‘¨æœŸç®¡ç†</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timers</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscriptions</span> = [];
  }
  
  <span class="hljs-title function_">addEventListener</span>(<span class="hljs-params">element, event, handler, options</span>) {
    element.<span class="hljs-title function_">addEventListener</span>(event, handler, options);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">push</span>({ element, event, handler, options });
  }
  
  <span class="hljs-title function_">setInterval</span>(<span class="hljs-params">callback, delay</span>) {
    <span class="hljs-keyword">const</span> id = <span class="hljs-built_in">setInterval</span>(callback, delay);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timers</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'interval'</span>, id });
    <span class="hljs-keyword">return</span> id;
  }
  
  <span class="hljs-title function_">setTimeout</span>(<span class="hljs-params">callback, delay</span>) {
    <span class="hljs-keyword">const</span> id = <span class="hljs-built_in">setTimeout</span>(callback, delay);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timers</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'timeout'</span>, id });
    <span class="hljs-keyword">return</span> id;
  }
  
  <span class="hljs-title function_">subscribe</span>(<span class="hljs-params">observable, callback</span>) {
    <span class="hljs-keyword">const</span> subscription = observable.<span class="hljs-title function_">subscribe</span>(callback);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscriptions</span>.<span class="hljs-title function_">push</span>(subscription);
    <span class="hljs-keyword">return</span> subscription;
  }
  
  <span class="hljs-comment">// ç»Ÿä¸€çš„é”€æ¯æ–¹æ³•</span>
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸…ç†äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ element, event, handler, options }</span>) =&gt;</span> {
      element.<span class="hljs-title function_">removeEventListener</span>(event, handler, options);
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span> = [];
    
    <span class="hljs-comment">// æ¸…ç†å®šæ—¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ type, id }</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'interval'</span>) {
        <span class="hljs-built_in">clearInterval</span>(id);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">clearTimeout</span>(id);
      }
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timers</span> = [];
    
    <span class="hljs-comment">// æ¸…ç†è®¢é˜…</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscriptions</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">subscription</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (subscription.<span class="hljs-property">unsubscribe</span>) {
        subscription.<span class="hljs-title function_">unsubscribe</span>();
      }
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscriptions</span> = [];
    
    <span class="hljs-comment">// æ¸…ç†å…¶ä»–èµ„æº</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanup</span>();
  }
  
  <span class="hljs-title function_">cleanup</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å­ç±»å¯ä»¥é‡å†™æ­¤æ–¹æ³•æ¥æ¸…ç†ç‰¹å®šèµ„æº</span>
  }
}
</code></pre>
<h5 data-id="heading-43">4.4.2 WeakMapå’ŒWeakSetçš„åº”ç”¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeEventManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨WeakMapå­˜å‚¨å…ƒç´ ç›¸å…³çš„æ•°æ®ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elementData</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventHandlers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
  }
  
  <span class="hljs-title function_">setData</span>(<span class="hljs-params">element, key, value</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">elementData</span>.<span class="hljs-title function_">has</span>(element)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">elementData</span>.<span class="hljs-title function_">set</span>(element, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>());
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elementData</span>.<span class="hljs-title function_">get</span>(element).<span class="hljs-title function_">set</span>(key, value);
  }
  
  <span class="hljs-title function_">getData</span>(<span class="hljs-params">element, key</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">elementData</span>.<span class="hljs-title function_">has</span>(element)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">elementData</span>.<span class="hljs-title function_">get</span>(element).<span class="hljs-title function_">get</span>(key);
  }
  
  <span class="hljs-title function_">addEventHandler</span>(<span class="hljs-params">element, event, handler</span>) {
    element.<span class="hljs-title function_">addEventListener</span>(event, handler);
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventHandlers</span>.<span class="hljs-title function_">has</span>(element)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventHandlers</span>.<span class="hljs-title function_">set</span>(element, []);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventHandlers</span>.<span class="hljs-title function_">get</span>(element).<span class="hljs-title function_">push</span>({
      event,
      handler
    });
  }
  
  <span class="hljs-title function_">removeAllEventHandlers</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventHandlers</span>.<span class="hljs-title function_">has</span>(element)) {
      <span class="hljs-keyword">const</span> handlers = <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventHandlers</span>.<span class="hljs-title function_">get</span>(element);
      handlers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ event, handler }</span>) =&gt;</span> {
        element.<span class="hljs-title function_">removeEventListener</span>(event, handler);
      });
      <span class="hljs-comment">// å½“å…ƒç´ è¢«åƒåœ¾å›æ”¶æ—¶ï¼ŒWeakMapä¼šè‡ªåŠ¨æ¸…ç†ç›¸å…³æ•°æ®</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-44">äº”ã€é˜²æŠ–èŠ‚æµé«˜çº§åº”ç”¨</h3>
<h4 data-id="heading-45">5.1 é˜²æŠ–ï¼ˆDebounceï¼‰è¯¦è§£</h4>
<p>é˜²æŠ–æ˜¯æŒ‡è§¦å‘äº‹ä»¶ååœ¨nç§’å†…åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœåœ¨nç§’å†…åˆè§¦å‘äº†äº‹ä»¶ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—æ—¶é—´ã€‚</p>
<h5 data-id="heading-46">5.1.1 åŸºç¡€é˜²æŠ–å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">func, delay, immediate = <span class="hljs-literal">false</span></span>) {
  <span class="hljs-keyword">let</span> timeoutId;
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
    
    <span class="hljs-comment">// å¦‚æœæ˜¯ç«‹å³æ‰§è¡Œæ¨¡å¼ä¸”æ²¡æœ‰å®šæ—¶å™¨ï¼Œåˆ™ç«‹å³æ‰§è¡Œ</span>
    <span class="hljs-keyword">if</span> (immediate &amp;&amp; !timeoutId) {
      func.<span class="hljs-title function_">apply</span>(context, args);
    }
    
    <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span>
    <span class="hljs-built_in">clearTimeout</span>(timeoutId);
    
    <span class="hljs-comment">// è®¾ç½®æ–°çš„å®šæ—¶å™¨</span>
    timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// å¦‚æœä¸æ˜¯ç«‹å³æ‰§è¡Œæ¨¡å¼ï¼Œåˆ™å»¶è¿Ÿæ‰§è¡Œ</span>
      <span class="hljs-keyword">if</span> (!immediate) {
        func.<span class="hljs-title function_">apply</span>(context, args);
      }
      timeoutId = <span class="hljs-literal">null</span>;
    }, delay);
  };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> debouncedSearch = <span class="hljs-title function_">debounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">query</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Searching for:'</span>, query);
  <span class="hljs-comment">// æ‰§è¡Œæœç´¢é€»è¾‘</span>
}, <span class="hljs-number">300</span>);

<span class="hljs-comment">// è¾“å…¥æ¡†äº‹ä»¶å¤„ç†</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'searchInput'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-title function_">debouncedSearch</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
});
</code></pre>
<h5 data-id="heading-47">5.1.2 é«˜çº§é˜²æŠ–å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedDebounce</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">func, delay, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">func</span> = func;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">delay</span> = delay;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">immediate</span> = options.<span class="hljs-property">immediate</span> || <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxWait</span> = options.<span class="hljs-property">maxWait</span> || <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">leading</span> = options.<span class="hljs-property">leading</span> || <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">trailing</span> = options.<span class="hljs-property">trailing</span> !== <span class="hljs-literal">false</span>; <span class="hljs-comment">// é»˜è®¤ä¸ºtrue</span>
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxTimeoutId</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastInvokeTime</span> = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-title function_">invoke</span>(<span class="hljs-params">args, context</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastInvokeTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">func</span>.<span class="hljs-title function_">apply</span>(context, args);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>;
  }
  
  <span class="hljs-title function_">leadingEdge</span>(<span class="hljs-params">args, context</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastInvokeTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trailingEdge</span>(args, context), <span class="hljs-variable language_">this</span>.<span class="hljs-property">delay</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">leading</span> ? <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">invoke</span>(args, context) : <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>;
  }
  
  <span class="hljs-title function_">remainingWait</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> timeSinceLastCall = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span>;
    <span class="hljs-keyword">const</span> timeSinceLastInvoke = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastInvokeTime</span>;
    <span class="hljs-keyword">const</span> timeWaiting = <span class="hljs-variable language_">this</span>.<span class="hljs-property">delay</span> - timeSinceLastCall;
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxWait</span> !== <span class="hljs-literal">null</span>
      ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(timeWaiting, <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxWait</span> - timeSinceLastInvoke)
      : timeWaiting;
  }
  
  <span class="hljs-title function_">shouldInvoke</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> timeSinceLastCall = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span>;
    <span class="hljs-keyword">const</span> timeSinceLastInvoke = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastInvokeTime</span>;
    
    <span class="hljs-keyword">return</span> (
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> === <span class="hljs-number">0</span> ||
      timeSinceLastCall &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">delay</span> ||
      timeSinceLastCall &lt; <span class="hljs-number">0</span> ||
      (<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxWait</span> !== <span class="hljs-literal">null</span> &amp;&amp; timeSinceLastInvoke &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxWait</span>)
    );
  }
  
  <span class="hljs-title function_">trailingEdge</span>(<span class="hljs-params">args, context</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">trailing</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> !== <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">invoke</span>(args, context);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>;
  }
  
  <span class="hljs-title function_">cancel</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>) {
      <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxTimeoutId</span>) {
      <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxTimeoutId</span>);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastInvokeTime</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxTimeoutId</span> = <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-title function_">flush</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>) {
      <span class="hljs-keyword">const</span> args = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingArgs</span>;
      <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingContext</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancel</span>();
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">invoke</span>(args, context);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>;
  }
  
  <span class="hljs-title function_">call</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingArgs</span> = args;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingContext</span> = context;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">shouldInvoke</span>()) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">leadingEdge</span>(args, context);
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxWait</span> !== <span class="hljs-literal">null</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxTimeoutId</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trailingEdge</span>(args, context);
        }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxWait</span>);
      }
    }
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trailingEdge</span>(args, context);
      }, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">remainingWait</span>());
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> advancedDebouncedFunc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AdvancedDebounce</span>(
  <span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Function executed with:'</span>, value);
    <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">toUpperCase</span>();
  },
  <span class="hljs-number">300</span>,
  {
    <span class="hljs-attr">leading</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">trailing</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">maxWait</span>: <span class="hljs-number">1000</span>
  }
);

<span class="hljs-comment">// æ¨¡æ‹Ÿé¢‘ç¹è°ƒç”¨</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> result = advancedDebouncedFunc.<span class="hljs-title function_">call</span>(<span class="hljs-string">'test'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Result:'</span>, result);
}, <span class="hljs-number">100</span>);
</code></pre>
<h4 data-id="heading-48">5.2 èŠ‚æµï¼ˆThrottleï¼‰è¯¦è§£</h4>
<p>èŠ‚æµæ˜¯æŒ‡è¿ç»­è§¦å‘äº‹ä»¶ä½†æ˜¯åœ¨nç§’ä¸­åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚</p>
<h5 data-id="heading-49">5.2.1 åŸºç¡€èŠ‚æµå®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, delay</span>) {
  <span class="hljs-keyword">let</span> timeoutId;
  <span class="hljs-keyword">let</span> lastExecTime = <span class="hljs-number">0</span>;
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">const</span> currentTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-keyword">if</span> (currentTime - lastExecTime &gt; delay) {
      func.<span class="hljs-title function_">apply</span>(context, args);
      lastExecTime = currentTime;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        func.<span class="hljs-title function_">apply</span>(context, args);
        lastExecTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      }, delay - (currentTime - lastExecTime));
    }
  };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> throttledScroll = <span class="hljs-title function_">throttle</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Scroll event handled'</span>);
  <span class="hljs-comment">// å¤„ç†æ»šåŠ¨é€»è¾‘</span>
}, <span class="hljs-number">100</span>);

<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, throttledScroll);
</code></pre>
<h5 data-id="heading-50">5.2.2 é«˜çº§èŠ‚æµå®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedThrottle</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">func, delay, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">func</span> = func;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">delay</span> = delay;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">leading</span> = options.<span class="hljs-property">leading</span> !== <span class="hljs-literal">false</span>; <span class="hljs-comment">// é»˜è®¤ä¸ºtrue</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">trailing</span> = options.<span class="hljs-property">trailing</span> !== <span class="hljs-literal">false</span>; <span class="hljs-comment">// é»˜è®¤ä¸ºtrue</span>
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArgs</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastContext</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-title function_">invoke</span>(<span class="hljs-params">args, context</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">func</span>.<span class="hljs-title function_">apply</span>(context, args);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>;
  }
  
  <span class="hljs-title function_">trailingEdge</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">trailing</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArgs</span>) {
      <span class="hljs-keyword">const</span> args = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArgs</span>;
      <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastContext</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArgs</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastContext</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">invoke</span>(args, context);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>;
  }
  
  <span class="hljs-title function_">call</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">const</span> currentTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> timeSinceLastCall = currentTime - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArgs</span> = args;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastContext</span> = context;
    
    <span class="hljs-keyword">if</span> (timeSinceLastCall &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">delay</span>) {
      <span class="hljs-comment">// è¶…è¿‡äº†å»¶è¿Ÿæ—¶é—´ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>) {
        <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> = currentTime;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">func</span>.<span class="hljs-title function_">apply</span>(context, args);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">trailing</span>) {
      <span class="hljs-comment">// è®¾ç½®å®šæ—¶å™¨ç­‰å¾…æ‰§è¡Œ</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trailingEdge</span>();
      }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">delay</span> - timeSinceLastCall);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>;
  }
  
  <span class="hljs-title function_">cancel</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>) {
      <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArgs</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastContext</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-title function_">flush</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>) {
      <span class="hljs-keyword">const</span> args = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArgs</span>;
      <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastContext</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancel</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastCallTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">func</span>.<span class="hljs-title function_">apply</span>(context, args);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> advancedThrottledFunc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AdvancedThrottle</span>(
  <span class="hljs-keyword">function</span>(<span class="hljs-params">x, y</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Throttled function called with:'</span>, x, y);
    <span class="hljs-keyword">return</span> x + y;
  },
  <span class="hljs-number">500</span>,
  {
    <span class="hljs-attr">leading</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">trailing</span>: <span class="hljs-literal">true</span>
  }
);

<span class="hljs-comment">// æ¨¡æ‹Ÿé¢‘ç¹è°ƒç”¨</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> result = advancedThrottledFunc.<span class="hljs-title function_">call</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>(), <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>());
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Result:'</span>, result);
}, <span class="hljs-number">50</span>);
</code></pre>
<h4 data-id="heading-51">5.3 é˜²æŠ–èŠ‚æµåœ¨å®é™…åœºæ™¯ä¸­çš„åº”ç”¨</h4>
<h5 data-id="heading-52">5.3.1 æœç´¢æ¡†ä¼˜åŒ–</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchOptimizer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">inputElement, searchFunction, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputElement</span> = inputElement;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">searchFunction</span> = searchFunction;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">debounceDelay</span> = options.<span class="hljs-property">debounceDelay</span> || <span class="hljs-number">300</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">throttleDelay</span> = options.<span class="hljs-property">throttleDelay</span> || <span class="hljs-number">100</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é˜²æŠ–å¤„ç†è¾“å…¥äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">debouncedInputHandler</span> = <span class="hljs-title function_">debounce</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleInputChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">debounceDelay</span>
    );
    
    <span class="hljs-comment">// èŠ‚æµå¤„ç†æœç´¢è¯·æ±‚</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">throttledSearch</span> = <span class="hljs-title function_">throttle</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">performSearch</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">throttleDelay</span>
    );
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputElement</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">debouncedInputHandler</span>);
  }
  
  <span class="hljs-title function_">handleInputChange</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">const</span> query = event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
    
    <span class="hljs-keyword">if</span> (query.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearResults</span>();
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">if</span> (query.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">2</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">throttledSearch</span>(query);
    }
  }
  
  <span class="hljs-title function_">performSearch</span>(<span class="hljs-params">query</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Performing search for:'</span>, query);
    <span class="hljs-comment">// æ‰§è¡Œå®é™…çš„æœç´¢é€»è¾‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">searchFunction</span>(query)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">displayResults</span>(results))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleError</span>(error));
  }
  
  <span class="hljs-title function_">displayResults</span>(<span class="hljs-params">results</span>) {
    <span class="hljs-comment">// æ˜¾ç¤ºæœç´¢ç»“æœ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Search results:'</span>, results);
  }
  
  <span class="hljs-title function_">clearResults</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸…ç©ºæœç´¢ç»“æœ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Clearing results'</span>);
  }
  
  <span class="hljs-title function_">handleError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Search error:'</span>, error);
  }
  
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputElement</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">debouncedInputHandler</span>);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> searchInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'searchInput'</span>);
<span class="hljs-keyword">const</span> searchOptimizer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchOptimizer</span>(searchInput, <span class="hljs-keyword">async</span> (query) =&gt; {
  <span class="hljs-comment">// æ¨¡æ‹ŸAPIè°ƒç”¨</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>([<span class="hljs-string">`Result 1 for <span class="hljs-subst">${query}</span>`</span>, <span class="hljs-string">`Result 2 for <span class="hljs-subst">${query}</span>`</span>]);
    }, <span class="hljs-number">200</span>);
  });
});
</code></pre>
<h5 data-id="heading-53">5.3.2 çª—å£å¤§å°è°ƒæ•´ä¼˜åŒ–</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ResizeOptimizer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">handler, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span> = handler;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">debounceDelay</span> = options.<span class="hljs-property">debounceDelay</span> || <span class="hljs-number">250</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">throttleDelay</span> = options.<span class="hljs-property">throttleDelay</span> || <span class="hljs-number">100</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">useDebounce</span> = options.<span class="hljs-property">useDebounce</span> !== <span class="hljs-literal">false</span>; <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨é˜²æŠ–</span>
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">useDebounce</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">optimizedHandler</span> = <span class="hljs-title function_">debounce</span>(
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>,
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">debounceDelay</span>
      );
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">optimizedHandler</span> = <span class="hljs-title function_">throttle</span>(
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>,
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">throttleDelay</span>
      );
    }
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">optimizedHandler</span>);
  }
  
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">optimizedHandler</span>);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> resizeOptimizer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeOptimizer</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> width = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
  <span class="hljs-keyword">const</span> height = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Window resized to <span class="hljs-subst">${width}</span>x<span class="hljs-subst">${height}</span>`</span>);
  
  <span class="hljs-comment">// æ‰§è¡Œå“åº”å¼å¸ƒå±€è°ƒæ•´</span>
  <span class="hljs-title function_">adjustLayout</span>(width, height);
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">adjustLayout</span>(<span class="hljs-params">width, height</span>) {
  <span class="hljs-comment">// æ ¹æ®çª—å£å¤§å°è°ƒæ•´å¸ƒå±€</span>
  <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-number">768</span>) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'mobile-layout'</span>);
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'desktop-layout'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'desktop-layout'</span>);
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'mobile-layout'</span>);
  }
}
</code></pre>
<h5 data-id="heading-54">5.3.3 æ»šåŠ¨äº‹ä»¶ä¼˜åŒ–</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ScrollOptimizer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">handler, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span> = handler;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">throttleDelay</span> = options.<span class="hljs-property">throttleDelay</span> || <span class="hljs-number">16</span>; <span class="hljs-comment">// çº¦60fps</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">debounceDelay</span> = options.<span class="hljs-property">debounceDelay</span> || <span class="hljs-number">100</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">useRAF</span> = options.<span class="hljs-property">useRAF</span> !== <span class="hljs-literal">false</span>; <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨requestAnimationFrame</span>
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">useRAF</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingExecution</span> = <span class="hljs-literal">false</span>;
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">optimizedHandler</span> = <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingExecution</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingExecution</span> = <span class="hljs-literal">true</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handler</span>();
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingExecution</span> = <span class="hljs-literal">false</span>;
          });
        }
      };
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">optimizedHandler</span> = <span class="hljs-title function_">throttle</span>(
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>,
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">throttleDelay</span>
      );
    }
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">optimizedHandler</span>, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> });
  }
  
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">optimizedHandler</span>);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span>) {
      <span class="hljs-title function_">cancelAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span>);
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> scrollOptimizer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScrollOptimizer</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> scrollTop = <span class="hljs-variable language_">window</span>.<span class="hljs-property">pageYOffset</span>;
  <span class="hljs-keyword">const</span> scrollHeight = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">scrollHeight</span>;
  <span class="hljs-keyword">const</span> clientHeight = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientHeight</span>;
  
  <span class="hljs-comment">// è®¡ç®—æ»šåŠ¨ç™¾åˆ†æ¯”</span>
  <span class="hljs-keyword">const</span> scrollPercent = (scrollTop / (scrollHeight - clientHeight)) * <span class="hljs-number">100</span>;
  
  <span class="hljs-comment">// æ›´æ–°è¿›åº¦æ¡</span>
  <span class="hljs-title function_">updateProgressBar</span>(scrollPercent);
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦æ‡’åŠ è½½</span>
  <span class="hljs-title function_">checkLazyLoad</span>();
  
  <span class="hljs-comment">// å¤„ç†å›ºå®šå¯¼èˆªæ </span>
  <span class="hljs-title function_">handleStickyNavigation</span>(scrollTop);
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateProgressBar</span>(<span class="hljs-params">percent</span>) {
  <span class="hljs-keyword">const</span> progressBar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'progress-bar'</span>);
  <span class="hljs-keyword">if</span> (progressBar) {
    progressBar.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = percent + <span class="hljs-string">'%'</span>;
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkLazyLoad</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å®ç°æ‡’åŠ è½½é€»è¾‘</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleStickyNavigation</span>(<span class="hljs-params">scrollTop</span>) {
  <span class="hljs-keyword">const</span> navbar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'navbar'</span>);
  <span class="hljs-keyword">if</span> (navbar) {
    <span class="hljs-keyword">if</span> (scrollTop &gt; <span class="hljs-number">100</span>) {
      navbar.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'sticky'</span>);
    } <span class="hljs-keyword">else</span> {
      navbar.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'sticky'</span>);
    }
  }
}
</code></pre>
<h4 data-id="heading-55">5.4 é˜²æŠ–èŠ‚æµå·¥å…·åº“</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é˜²æŠ–èŠ‚æµå·¥å…·åº“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ThrottleDebounce</span> = {
  <span class="hljs-comment">// é˜²æŠ–</span>
  <span class="hljs-title function_">debounce</span>(<span class="hljs-params">func, delay, options = {}</span>) {
    <span class="hljs-keyword">let</span> timeoutId;
    <span class="hljs-keyword">let</span> lastArgs;
    <span class="hljs-keyword">let</span> lastThis;
    <span class="hljs-keyword">let</span> result;
    <span class="hljs-keyword">const</span> leading = !!options.<span class="hljs-property">leading</span>;
    <span class="hljs-keyword">const</span> trailing = options.<span class="hljs-property">trailing</span> !== <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">const</span> maxWait = options.<span class="hljs-property">maxWait</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">invokeFunc</span>(<span class="hljs-params">time</span>) {
      <span class="hljs-keyword">const</span> args = lastArgs;
      <span class="hljs-keyword">const</span> thisArg = lastThis;
      
      lastArgs = lastThis = <span class="hljs-literal">undefined</span>;
      lastInvokeTime = time;
      result = func.<span class="hljs-title function_">apply</span>(thisArg, args);
      <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">leadingEdge</span>(<span class="hljs-params">time</span>) {
      <span class="hljs-comment">// Reset any `maxWait` timer.</span>
      lastInvokeTime = time;
      timeoutId = <span class="hljs-built_in">setTimeout</span>(timerExpired, delay);
      <span class="hljs-keyword">return</span> leading ? <span class="hljs-title function_">invokeFunc</span>(time) : result;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">remainingWait</span>(<span class="hljs-params">time</span>) {
      <span class="hljs-keyword">const</span> timeSinceLastCall = time - lastCallTime;
      <span class="hljs-keyword">const</span> timeSinceLastInvoke = time - lastInvokeTime;
      <span class="hljs-keyword">const</span> timeWaiting = delay - timeSinceLastCall;
      
      <span class="hljs-keyword">return</span> maxWait
        ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(timeWaiting, maxWait - timeSinceLastInvoke)
        : timeWaiting;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldInvoke</span>(<span class="hljs-params">time</span>) {
      <span class="hljs-keyword">const</span> timeSinceLastCall = time - lastCallTime;
      <span class="hljs-keyword">const</span> timeSinceLastInvoke = time - lastInvokeTime;
      
      <span class="hljs-comment">// Either this is the first call, activity has stopped and we're at the</span>
      <span class="hljs-comment">// trailing edge, the system time has gone backwards and we're treating</span>
      <span class="hljs-comment">// it as the trailing edge, or we've hit the `maxWait` limit.</span>
      <span class="hljs-keyword">return</span> (lastCallTime === <span class="hljs-literal">undefined</span> || (timeSinceLastCall &gt;= delay) ||
        (timeSinceLastCall &lt; <span class="hljs-number">0</span>) || (maxWait &amp;&amp; timeSinceLastInvoke &gt;= maxWait));
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">timerExpired</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> time = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">shouldInvoke</span>(time)) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">trailingEdge</span>(time);
      }
      <span class="hljs-comment">// Restart the timer.</span>
      timeoutId = <span class="hljs-built_in">setTimeout</span>(timerExpired, <span class="hljs-title function_">remainingWait</span>(time));
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">trailingEdge</span>(<span class="hljs-params">time</span>) {
      timeoutId = <span class="hljs-literal">undefined</span>;
      
      <span class="hljs-comment">// Only invoke if we have `lastArgs` which means `func` has been</span>
      <span class="hljs-comment">// debounced at least once.</span>
      <span class="hljs-keyword">if</span> (trailing &amp;&amp; lastArgs) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">invokeFunc</span>(time);
      }
      lastArgs = lastThis = <span class="hljs-literal">undefined</span>;
      <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">cancel</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (timeoutId !== <span class="hljs-literal">undefined</span>) {
        <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      }
      lastInvokeTime = <span class="hljs-number">0</span>;
      lastArgs = lastCallTime = lastThis = timeoutId = <span class="hljs-literal">undefined</span>;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">flush</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> timeoutId === <span class="hljs-literal">undefined</span> ? result : <span class="hljs-title function_">trailingEdge</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>());
    }
    
    <span class="hljs-keyword">let</span> lastInvokeTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> lastCallTime = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
      <span class="hljs-keyword">const</span> time = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> isInvoking = <span class="hljs-title function_">shouldInvoke</span>(time);
      
      lastArgs = args;
      lastThis = <span class="hljs-variable language_">this</span>;
      lastCallTime = time;
      
      <span class="hljs-keyword">if</span> (isInvoking) {
        <span class="hljs-keyword">if</span> (timeoutId === <span class="hljs-literal">undefined</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">leadingEdge</span>(lastCallTime);
        }
        <span class="hljs-keyword">if</span> (maxWait !== <span class="hljs-literal">undefined</span>) {
          <span class="hljs-comment">// Handle invocations in a tight loop.</span>
          timeoutId = <span class="hljs-built_in">setTimeout</span>(timerExpired, delay);
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">invokeFunc</span>(lastCallTime);
        }
      }
      <span class="hljs-keyword">if</span> (timeoutId === <span class="hljs-literal">undefined</span>) {
        timeoutId = <span class="hljs-built_in">setTimeout</span>(timerExpired, delay);
      }
      <span class="hljs-keyword">return</span> result;
    };
  },
  
  <span class="hljs-comment">// èŠ‚æµ</span>
  <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, delay, options = {}</span>) {
    <span class="hljs-keyword">let</span> timeoutId, lastArgs, lastThis, result;
    <span class="hljs-keyword">let</span> lastCallTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> lastInvokeTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> leading = !!options.<span class="hljs-property">leading</span>;
    <span class="hljs-keyword">const</span> trailing = !!options.<span class="hljs-property">trailing</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">invokeFunc</span>(<span class="hljs-params">time</span>) {
      <span class="hljs-keyword">const</span> args = lastArgs;
      <span class="hljs-keyword">const</span> thisArg = lastThis;
      
      lastArgs = lastThis = <span class="hljs-literal">undefined</span>;
      lastInvokeTime = time;
      result = func.<span class="hljs-title function_">apply</span>(thisArg, args);
      <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">leadingEdge</span>(<span class="hljs-params">time</span>) {
      <span class="hljs-comment">// Reset any `maxWait` timer.</span>
      lastInvokeTime = time;
      timeoutId = <span class="hljs-built_in">setTimeout</span>(timerExpired, delay);
      <span class="hljs-keyword">return</span> leading ? <span class="hljs-title function_">invokeFunc</span>(time) : result;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">remainingWait</span>(<span class="hljs-params">time</span>) {
      <span class="hljs-keyword">const</span> timeSinceLastCall = time - lastCallTime;
      <span class="hljs-keyword">const</span> timeSinceLastInvoke = time - lastInvokeTime;
      <span class="hljs-keyword">const</span> timeWaiting = delay - timeSinceLastCall;
      
      <span class="hljs-keyword">return</span> timeSinceLastCall &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : timeWaiting;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldInvoke</span>(<span class="hljs-params">time</span>) {
      <span class="hljs-keyword">const</span> timeSinceLastCall = time - lastCallTime;
      <span class="hljs-keyword">const</span> timeSinceLastInvoke = time - lastInvokeTime;
      
      <span class="hljs-comment">// Either this is the first call, activity has stopped and we're at the</span>
      <span class="hljs-comment">// trailing edge, the system time has gone backwards and we're treating</span>
      <span class="hljs-comment">// it as the trailing edge, or we've hit the `maxWait` limit.</span>
      <span class="hljs-keyword">return</span> (lastCallTime === <span class="hljs-literal">undefined</span> || (timeSinceLastCall &gt;= delay) ||
        (timeSinceLastCall &lt; <span class="hljs-number">0</span>));
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">timerExpired</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> time = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">shouldInvoke</span>(time)) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">trailingEdge</span>(time);
      }
      <span class="hljs-comment">// Restart the timer.</span>
      timeoutId = <span class="hljs-built_in">setTimeout</span>(timerExpired, <span class="hljs-title function_">remainingWait</span>(time));
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">trailingEdge</span>(<span class="hljs-params">time</span>) {
      timeoutId = <span class="hljs-literal">undefined</span>;
      
      <span class="hljs-comment">// Only invoke if we have `lastArgs` which means `func` has been</span>
      <span class="hljs-comment">// debounced at least once.</span>
      <span class="hljs-keyword">if</span> (trailing &amp;&amp; lastArgs) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">invokeFunc</span>(time);
      }
      lastArgs = lastThis = <span class="hljs-literal">undefined</span>;
      <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">cancel</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (timeoutId !== <span class="hljs-literal">undefined</span>) {
        <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      }
      lastInvokeTime = <span class="hljs-number">0</span>;
      lastArgs = lastCallTime = lastThis = timeoutId = <span class="hljs-literal">undefined</span>;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">flush</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> timeoutId === <span class="hljs-literal">undefined</span> ? result : <span class="hljs-title function_">trailingEdge</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>());
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
      <span class="hljs-keyword">const</span> time = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> isInvoking = <span class="hljs-title function_">shouldInvoke</span>(time);
      
      lastArgs = args;
      lastThis = <span class="hljs-variable language_">this</span>;
      lastCallTime = time;
      
      <span class="hljs-keyword">if</span> (isInvoking) {
        <span class="hljs-keyword">if</span> (timeoutId === <span class="hljs-literal">undefined</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">leadingEdge</span>(lastCallTime);
        }
        timeoutId = <span class="hljs-built_in">setTimeout</span>(timerExpired, delay);
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">invokeFunc</span>(lastCallTime);
      }
      <span class="hljs-keyword">if</span> (timeoutId === <span class="hljs-literal">undefined</span>) {
        timeoutId = <span class="hljs-built_in">setTimeout</span>(timerExpired, delay);
      }
      <span class="hljs-keyword">return</span> result;
    };
  }
};

<span class="hljs-comment">// å¯¼å‡ºå·¥å…·åº“</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">module</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>) {
  <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">ThrottleDebounce</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">ThrottleDebounce</span> = <span class="hljs-title class_">ThrottleDebounce</span>;
}
</code></pre>
<h3 data-id="heading-56">æ€»ç»“</h3>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å‰ç«¯å¼€å‘ä¸­çš„äº”é¡¹å…³é”®æŠ€æœ¯ï¼š</p>
<ol>
<li>
<p><strong>è™šæ‹Ÿæ»šåŠ¨</strong>ï¼šé€šè¿‡åªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„å…ƒç´ æ¥ä¼˜åŒ–é•¿åˆ—è¡¨æ€§èƒ½ï¼Œæ˜¾è‘—å‡å°‘DOMèŠ‚ç‚¹æ•°é‡ï¼Œæå‡æ¸²æŸ“æ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>æ—¶é—´åˆ‡ç‰‡</strong>ï¼šå°†é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡åˆ†è§£ä¸ºå°ç‰‡æ®µæ‰§è¡Œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œä¿æŒé¡µé¢å“åº”æ€§ã€‚</p>
</li>
<li>
<p><strong>Web Workerså¤šçº¿ç¨‹</strong>ï¼šåˆ©ç”¨åå°çº¿ç¨‹æ‰§è¡Œè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œé‡Šæ”¾ä¸»çº¿ç¨‹å‹åŠ›ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
</li>
<li>
<p><strong>å†…å­˜æ³„æ¼æ£€æµ‹å’Œå¤„ç†</strong>ï¼šè¯†åˆ«å’Œé¢„é˜²å¸¸è§çš„å†…å­˜æ³„æ¼åœºæ™¯ï¼Œå»ºç«‹å®Œå–„çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†æœºåˆ¶ã€‚</p>
</li>
<li>
<p><strong>é˜²æŠ–èŠ‚æµé«˜çº§åº”ç”¨</strong>ï¼šåˆç†æ§åˆ¶å‡½æ•°æ‰§è¡Œé¢‘ç‡ï¼Œä¼˜åŒ–é«˜é¢‘äº‹ä»¶å¤„ç†ï¼Œæå‡åº”ç”¨æ€§èƒ½ã€‚</p>
</li>
</ol>
<p>è¿™äº›æŠ€æœ¯åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­å…·æœ‰é‡è¦æ„ä¹‰ï¼ŒæŒæ¡å®ƒä»¬èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…æ„å»ºæ›´é«˜æ€§èƒ½ã€æ›´æµç•…çš„Webåº”ç”¨ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåº”è¯¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå¹¶ç»“åˆæ€§èƒ½ç›‘æ§å·¥å…·æŒç»­ä¼˜åŒ–åº”ç”¨æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Œå‘¨æ›´ç¬¬12æœŸã€å®ç”¨JSåº“æ¨èï¼šDriver.js]]></title>    <link>https://juejin.cn/post/7574369095544766498</link>    <guid>https://juejin.cn/post/7574369095544766498</guid>    <pubDate>2025-11-20T06:29:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574369095544766498" data-draft-id="7574369095544733730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Œå‘¨æ›´ç¬¬12æœŸã€å®ç”¨JSåº“æ¨èï¼šDriver.js"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-20T06:29:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Bug_Constructer"/> <meta itemprop="url" content="https://juejin.cn/user/254742426830856"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Œå‘¨æ›´ç¬¬12æœŸã€å®ç”¨JSåº“æ¨èï¼šDriver.js
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/254742426830856/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Bug_Constructer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:29:27.000Z" title="Thu Nov 20 2025 06:29:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨äº§å“ä¸Šçº¿ä¸è¿­ä»£ä¸­ï¼Œç”¨æˆ·å¼•å¯¼ä¸åŠŸèƒ½è®²è§£æ˜¯æå‡è½¬åŒ–ä¸ç•™å­˜çš„å…³é”®ç¯èŠ‚ã€‚ç›¸æ¯”è‡ªç ”é®ç½©ä¸å¼¹å±‚ï¼ŒDriver.js æä¾›äº†è½»é‡ã€é›¶ä¾èµ–ã€å¯é«˜åº¦å®šåˆ¶çš„å¼•å¯¼å¼•æ“ï¼Œèƒ½å¤Ÿåœ¨é¡µé¢ä¸­é«˜äº®å…³é”®å…ƒç´ å¹¶å±•ç¤ºè¯´æ˜å¼¹å±‚ï¼Œå¸®åŠ©ç”¨æˆ·å¾ªåºæŒæ¡æ ¸å¿ƒåŠŸèƒ½ã€‚æœ¬æœŸæˆ‘ä»¬èšç„¦ Driver.jsï¼Œä»ç‰¹æ€§ã€å®‰è£…ä½¿ç”¨ã€å®é™…åº”ç”¨åˆ°æœ€ä½³å®è·µä¸å¸¸è§é™·é˜±ï¼Œä¸ºä½ æä¾›ä¸€å¥—å¯è½åœ°çš„æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">åº“ä»‹ç»</h2>
<h3 data-id="heading-2">åŸºæœ¬ä¿¡æ¯</h3>
<ul>
<li><strong>åº“åç§°</strong>ï¼šDriver.js</li>
<li><strong>GitHub åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkamranahmedse%2Fdriver.js" target="_blank" title="https://github.com/kamranahmedse/driver.js" ref="nofollow noopener noreferrer">github.com/kamranahmedâ€¦</a></li>
<li><strong>npm åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fdriver.js" target="_blank" title="https://www.npmjs.com/package/driver.js" ref="nofollow noopener noreferrer">www.npmjs.com/package/driâ€¦</a></li>
<li><strong>å®˜æ–¹æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdriverjs.com%2Fdocs%2Finstallation" target="_blank" title="https://driverjs.com/docs/installation" ref="nofollow noopener noreferrer">driverjs.com/docs/instalâ€¦</a></li>
<li><strong>GitHub Stars</strong>ï¼šçº¦ 25k â­ï¼ˆä»¥ç›®å‰æ—¶é—´ä¸ºå‡†ï¼‰</li>
<li><strong>æœ€æ–°ç‰ˆæœ¬</strong>ï¼š1.3.6ï¼ˆnpm é¡µé¢æ˜¾ç¤ºï¼‰</li>
<li><strong>åŒ…å¤§å°</strong>ï¼šçº¦ 5KB gzippedï¼ˆå®˜æ–¹å‘å¸ƒè¯´æ˜ï¼‰</li>
<li><strong>ç»´æŠ¤çŠ¶æ€</strong>ï¼šæ´»è·ƒç»´æŠ¤ï¼ˆæœ€æ–° Issue/Release æŒç»­æ›´æ–°ï¼‰</li>
<li><strong>ä¾èµ–å…³ç³»</strong>ï¼šé›¶ä¾èµ–ï¼ŒVanilla TypeScript ç¼–å†™</li>
</ul>
<h3 data-id="heading-3">ä¸»è¦ç‰¹æ€§</h3>
<ul>
<li>ğŸš€ è½»é‡ä¸é›¶ä¾èµ–ï¼šæ ¸å¿ƒåŠŸèƒ½ç²¾ç®€ï¼ŒåŠ è½½æˆæœ¬æä½ï¼Œé€‚åˆä»»æ„å‰ç«¯æ ˆ</li>
<li>ğŸ’¡ é«˜åº¦å¯å®šåˆ¶ï¼šPopover æ ·å¼ä¸äº¤äº’å¯çµæ´»é…ç½®ï¼Œæ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜ä¸æŒ‰é’®</li>
<li>ğŸ”„ æ­¥éª¤é©±åŠ¨ï¼šå†…ç½®æ­¥éª¤å¼•å¯¼ã€è¿›åº¦å±•ç¤ºä¸å‰åå¯¼èˆªï¼Œæ”¯æŒå•å…ƒç´ é«˜äº®ä¸å¤šæ­¥éª¤å¯¼è§ˆ</li>
<li>â± å¼‚æ­¥å¯æ§ï¼šå¯æ‹¦æˆªä¸‹ä¸€æ­¥å¹¶åœ¨ä»»åŠ¡å®Œæˆåç»§ç»­ï¼Œé€‚ç”¨äºå¼‚æ­¥åŠ è½½ä¸æ ¡éªŒåœºæ™¯</li>
<li>ğŸ§© æ¡†æ¶æ— å…³ï¼šé€‚é…ä»»æ„å‰ç«¯æ¡†æ¶æˆ–åŸç”Ÿå¼€å‘ï¼ŒTypeScript å‹å¥½</li>
</ul>
<h3 data-id="heading-4">å…¼å®¹æ€§</h3>
<ul>
<li><strong>æµè§ˆå™¨æ”¯æŒ</strong>ï¼šç°ä»£æµè§ˆå™¨ï¼ˆå»ºè®® Chrome/Firefox/Edge çš„æœ€è¿‘ç‰ˆæœ¬ï¼‰</li>
<li><strong>Node.js æ”¯æŒ</strong>ï¼šä¸»è¦ç”¨äºæµè§ˆå™¨ç«¯ï¼ŒNode ç¯å¢ƒä¸‹å»ºè®®ä»¥ SSR åŠ¨æ€åŠ è½½æ–¹å¼é›†æˆ</li>
<li><strong>æ¡†æ¶å…¼å®¹</strong>ï¼šå¯ä¸ React/Vue/Angular ç­‰æ¡†æ¶æ— ç¼ç»“åˆ</li>
<li><strong>TypeScript æ”¯æŒ</strong>ï¼šæä¾›ç±»å‹å®šä¹‰ï¼Œå¼€å‘ä½“éªŒä¼˜ç§€</li>
</ul>
<h2 data-id="heading-5">å®‰è£…ä½¿ç”¨</h2>
<h3 data-id="heading-6">å®‰è£…æ–¹å¼ï¼ˆç»Ÿä¸€ä½¿ç”¨ pnpmï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">pnpm add driver.js
</code></pre>
<p>åŒæ—¶ç¡®ä¿æ ·å¼æ–‡ä»¶å·²å¼•å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { driver } <span class="hljs-keyword">from</span> <span class="hljs-string">'driver.js'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'driver.js/dist/driver.css'</span>
</code></pre>
<p>æˆ–ä½¿ç”¨ CDNï¼ˆæ— éœ€æ‰“åŒ…ç¯å¢ƒï¼‰ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/driver.js@latest/dist/driver.js.iife.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/driver.js@latest/dist/driver.css"</span>/&gt;</span>
</code></pre>
<h3 data-id="heading-7">åŸºç¡€ä½¿ç”¨</h3>
<ul>
<li>å•å…ƒç´ é«˜äº®ä¸è¯´æ˜ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { driver } <span class="hljs-keyword">from</span> <span class="hljs-string">'driver.js'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'driver.js/dist/driver.css'</span>

<span class="hljs-comment">// åˆ›å»ºå®ä¾‹å¹¶é«˜äº®å•ä¸ªå…ƒç´ </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">runSingleHighlight</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> d = <span class="hljs-title function_">driver</span>()
  d.<span class="hljs-title function_">highlight</span>({
    <span class="hljs-attr">element</span>: <span class="hljs-string">'#create-btn'</span>,
    <span class="hljs-attr">popover</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ›å»ºå†…å®¹'</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">'ç‚¹å‡»è¿™é‡Œæ–°å»ºä¸€ä¸ªæ¡ç›®ï¼Œå¼€å§‹ä½ çš„å·¥ä½œæµ'</span>,
      <span class="hljs-attr">side</span>: <span class="hljs-string">'bottom'</span>,
      <span class="hljs-attr">align</span>: <span class="hljs-string">'start'</span>
    }
  })
}
</code></pre>
<ul>
<li>å¤šæ­¥éª¤å¼•å¯¼ï¼ˆå¸¦è¿›åº¦ä¸å¯¼èˆªï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { driver } <span class="hljs-keyword">from</span> <span class="hljs-string">'driver.js'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'driver.js/dist/driver.css'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">runTour</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> d = <span class="hljs-title function_">driver</span>({ <span class="hljs-attr">showProgress</span>: <span class="hljs-literal">true</span> })
  d.<span class="hljs-title function_">drive</span>({
    <span class="hljs-attr">steps</span>: [
      {
        <span class="hljs-attr">element</span>: <span class="hljs-string">'#create-btn'</span>,
        <span class="hljs-attr">popover</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ›å»º'</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">'ä»è¿™é‡Œå‘èµ·æ–°å»ºæµç¨‹'</span> }
      },
      {
        <span class="hljs-attr">element</span>: <span class="hljs-string">'#filter-input'</span>,
        <span class="hljs-attr">popover</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'ç­›é€‰'</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">'è¾“å…¥å…³é”®å­—å¿«é€Ÿå®šä½å†…å®¹'</span> }
      },
      {
        <span class="hljs-attr">element</span>: <span class="hljs-string">'#export-link'</span>,
        <span class="hljs-attr">popover</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'å¯¼å‡º'</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">'å®Œæˆåå¯å¯¼å‡ºä¸º CSV/Excel'</span> }
      }
    ]
  })
}
</code></pre>
<h3 data-id="heading-8">å¸¸ç”¨é…ç½®é€‰é¡¹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> d = <span class="hljs-title function_">driver</span>({
  <span class="hljs-attr">showProgress</span>: <span class="hljs-literal">true</span>,      <span class="hljs-comment">// æ˜¾ç¤ºæ­¥éª¤è¿›åº¦</span>
  <span class="hljs-attr">overlayColor</span>: <span class="hljs-string">'rgba(0,0,0,0.5)'</span>, <span class="hljs-comment">// èƒŒæ™¯é®ç½©é¢œè‰²</span>
  <span class="hljs-attr">smoothScroll</span>: <span class="hljs-literal">true</span>,      <span class="hljs-comment">// å¹³æ»‘æ»šåŠ¨è‡³ç›®æ ‡å…ƒç´ </span>
  <span class="hljs-attr">allowClose</span>: <span class="hljs-literal">true</span>,        <span class="hljs-comment">// å…è®¸ç‚¹å‡»é®ç½©å…³é—­</span>
  <span class="hljs-attr">popoverClass</span>: <span class="hljs-string">'driverjs-theme'</span> <span class="hljs-comment">// è‡ªå®šä¹‰ä¸»é¢˜ç±»å</span>
})
</code></pre>
<h2 data-id="heading-9">å®é™…åº”ç”¨</h2>
<h3 data-id="heading-10">åº”ç”¨åœºæ™¯ 1ï¼šæ–°æ‰‹å¼•å¯¼ï¼ˆé¦–è®¿è§¦å‘ï¼‰</h3>
<p>åœ¨ç”¨æˆ·é¦–æ¬¡è¿›å…¥ç³»ç»Ÿæ—¶ï¼Œè§¦å‘å¤šæ­¥éª¤å¯¼è§ˆå¹¶å¼•å¯¼å®Œæˆå…³é”®æ“ä½œï¼›ç»“æŸåå†™å…¥æœ¬åœ°å­˜å‚¨é¿å…é‡å¤æ‰“æ‰°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { driver } <span class="hljs-keyword">from</span> <span class="hljs-string">'driver.js'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'driver.js/dist/driver.css'</span>

<span class="hljs-comment">/**
 * é¦–æ¬¡è®¿é—®å¯åŠ¨å¼•å¯¼
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">bootstrapOnboarding</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> visited = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'onboarding:done'</span>)
  <span class="hljs-keyword">if</span> (visited) <span class="hljs-keyword">return</span>
  <span class="hljs-keyword">const</span> d = <span class="hljs-title function_">driver</span>({ <span class="hljs-attr">showProgress</span>: <span class="hljs-literal">true</span> })
  d.<span class="hljs-title function_">drive</span>({
    <span class="hljs-attr">steps</span>: [
      { <span class="hljs-attr">element</span>: <span class="hljs-string">'#nav-dashboard'</span>, <span class="hljs-attr">popover</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'æ€»è§ˆ'</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">'æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ä¸å…³é”®æŒ‡æ ‡'</span> } },
      { <span class="hljs-attr">element</span>: <span class="hljs-string">'#create-btn'</span>, <span class="hljs-attr">popover</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ›å»º'</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">'æ–°å»ºä»»åŠ¡æˆ–é¡¹ç›®'</span> } },
      { <span class="hljs-attr">element</span>: <span class="hljs-string">'#help-link'</span>, <span class="hljs-attr">popover</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'å¸®åŠ©'</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">'é‡åˆ°é—®é¢˜ï¼ŸæŸ¥çœ‹æ–‡æ¡£æˆ–è”ç³»æ”¯æŒ'</span> } }
    ],
    <span class="hljs-attr">onDestroyed</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'onboarding:done'</span>, <span class="hljs-string">'1'</span>)
  })
}
</code></pre>
<h3 data-id="heading-11">åº”ç”¨åœºæ™¯ 2ï¼šå¼‚æ­¥æ ¡éªŒåå†è¿›å…¥ä¸‹ä¸€æ­¥</h3>
<p>åœ¨æŸä¸€æ­¥éœ€è¦è¯·æ±‚æœåŠ¡å™¨æˆ–ç­‰å¾…èµ„æºå‡†å¤‡æ—¶ï¼Œæ‹¦æˆªâ€œä¸‹ä¸€æ­¥â€ï¼Œå®Œæˆåå†ç»§ç»­æµè½¬ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { driver } <span class="hljs-keyword">from</span> <span class="hljs-string">'driver.js'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'driver.js/dist/driver.css'</span>

<span class="hljs-comment">/**
 * å¸¦å¼‚æ­¥æ‹¦æˆªçš„å¯¼è§ˆ
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">runAsyncTour</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> d = <span class="hljs-title function_">driver</span>({ <span class="hljs-attr">showProgress</span>: <span class="hljs-literal">true</span> })
  d.<span class="hljs-title function_">drive</span>({
    <span class="hljs-attr">steps</span>: [
      { <span class="hljs-attr">element</span>: <span class="hljs-string">'#profile'</span>, <span class="hljs-attr">popover</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'èµ„æ–™'</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">'å®Œå–„ä½ çš„ä¸ªäººä¿¡æ¯'</span> } },
      { <span class="hljs-attr">element</span>: <span class="hljs-string">'#verify'</span>, <span class="hljs-attr">popover</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'æ ¡éªŒ'</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">'ç³»ç»Ÿæ­£åœ¨éªŒè¯ä½ çš„æƒé™'</span> } },
      { <span class="hljs-attr">element</span>: <span class="hljs-string">'#done'</span>, <span class="hljs-attr">popover</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'å®Œæˆ'</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">'æ­å–œï¼Œå…¨éƒ¨è®¾ç½®å°±ç»ª'</span> } }
    ],
    <span class="hljs-attr">onNextClick</span>: <span class="hljs-keyword">async</span> ({ prevent, moveNext, step }) =&gt; {
      <span class="hljs-keyword">if</span> (step?.<span class="hljs-property">element</span> === <span class="hljs-string">'#verify'</span>) {
        <span class="hljs-title function_">prevent</span>()
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/verify'</span>)
        <span class="hljs-title function_">moveNext</span>()
      }
    }
  })
}
</code></pre>
<h2 data-id="heading-12">ä¼˜ç¼ºç‚¹åˆ†æ</h2>
<h3 data-id="heading-13">ä¼˜ç‚¹ âœ…</h3>
<ul>
<li>ä½“ç§¯å°ã€é›¶ä¾èµ–ï¼Œé›†æˆä¸æŒ‰éœ€åŠ è½½å‹å¥½</li>
<li>API ç®€æ´ç›´è§‚ï¼Œç±»å‹å®Œå–„ï¼Œå­¦ä¹ æˆæœ¬ä½</li>
<li>ä¸»é¢˜/æŒ‰é’®/å®šä½ç­‰å¯é«˜åº¦å®šåˆ¶ï¼Œé€‚åº”å¤æ‚ UI</li>
<li>æ”¯æŒå¤šæ­¥éª¤è¿›åº¦ã€å•å…ƒç´ é«˜äº®ã€å¼‚æ­¥æ‹¦æˆªç­‰å¸¸è§éœ€æ±‚</li>
</ul>
<h3 data-id="heading-14">ç¼ºç‚¹ âŒ</h3>
<ul>
<li>éœ€è¦åŒæ—¶å¼•å…¥ CSSï¼Œå¦åˆ™å¼¹å±‚æ ·å¼ä¸å¯ç”¨</li>
<li>SSR éœ€åœ¨å®¢æˆ·ç«¯åŠ¨æ€åˆå§‹åŒ–ï¼ŒæœåŠ¡ç«¯é˜¶æ®µä¸å¯æ¸²æŸ“</li>
<li>å¤æ‚æµç¨‹ï¼ˆåˆ†æ”¯/å›é€€ï¼‰éœ€è‡ªè¡Œç®¡ç†çŠ¶æ€ä¸å¯¼èˆª</li>
</ul>
<h2 data-id="heading-15">æœ€ä½³å®è·µ</h2>
<ul>
<li>æŒ‰éœ€ä¸æ‡’åŠ è½½ï¼šé¦–å±ä¸ä½¿ç”¨æ—¶å»ºè®®å¼‚æ­¥åŠ è½½ <code>driver.js</code> ä»¥é™ä½åˆå§‹ä½“ç§¯</li>
<li>è‡ªå®šä¹‰ä¸»é¢˜ä¸ Less å˜é‡ï¼šé€šè¿‡ <code>popoverClass</code> ä¸ Less å…¨å±€å˜é‡ç»Ÿä¸€è‰²å½©ä¸é—´è·</li>
<li>é€€å‡ºç¡®è®¤ï¼šåœ¨å…³é”®å¼•å¯¼ä¸­é€šè¿‡ <code>onDestroyStarted</code> è‡ªå®šä¹‰ç¡®è®¤ä»¥é¿å…è¯¯é€€å‡º</li>
<li>æ— éšœç¢ä¸å¯ç”¨æ€§ï¼šæ§åˆ¶é®ç½©é€æ˜åº¦ä¸ç„¦ç‚¹é¡ºåºï¼Œé¿å…é˜»æ–­æ ¸å¿ƒä»»åŠ¡</li>
</ul>
<h2 data-id="heading-16">å¸¸è§é™·é˜±</h2>
<ul>
<li>å¿˜è®°å¼•å…¥ <code>driver.css</code>ï¼šå¯¼è‡´å¼¹å±‚ä¸å¯è§æˆ–æ ·å¼ç¼ºå¤±</li>
<li>å®¹å™¨ <code>overflow</code>/<code>z-index</code> å¼‚å¸¸ï¼šå¯èƒ½é®æŒ¡æˆ–é”™ä½ï¼Œéœ€è°ƒæ•´å±‚çº§</li>
<li>åŠ¨æ€å†…å®¹æœªæ¸²æŸ“ï¼šé«˜äº®å‰ç¡®ä¿å…ƒç´ å·²å­˜åœ¨ï¼Œå¿…è¦æ—¶å¯ç”¨ <code>smoothScroll</code></li>
</ul>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>Driver.js ä»¥è¶…å°ä½“ç§¯ä¸ç›´è§‚ API æˆä¸ºäº§å“å¼•å¯¼çš„ä¸äºŒä¹‹é€‰ã€‚è‹¥ä½ æ­£åœ¨ä¸ºæ–°åŠŸèƒ½ä¸Šæ‰‹ã€å·¥ä½œæµè¯´æ˜æˆ–å…³é”®è·¯å¾„å¼•å¯¼å¯»æ‰¾ä¸€å¥—é€šç”¨æ–¹æ¡ˆï¼Œå®ƒå‡ ä¹å¯ä»¥åšåˆ°â€œå¼€ç®±å³ç”¨ + æ·±åº¦å®šåˆ¶â€ã€‚</p>
<h3 data-id="heading-18">æ¨èæŒ‡æ•°ï¼šâ­â­â­â­â­ï¼ˆ5/5ï¼‰</h3>
<h3 data-id="heading-19">ç›¸å…³èµ„æº</h3>
<ul>
<li>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdriverjs.com%2Fdocs%2Finstallation" target="_blank" title="https://driverjs.com/docs/installation" ref="nofollow noopener noreferrer">driverjs.com/docs/instalâ€¦</a></li>
<li>GitHub ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkamranahmedse%2Fdriver.js" target="_blank" title="https://github.com/kamranahmedse/driver.js" ref="nofollow noopener noreferrer">github.com/kamranahmedâ€¦</a></li>
<li>npm åŒ…é¡µé¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fdriver.js" target="_blank" title="https://www.npmjs.com/package/driver.js" ref="nofollow noopener noreferrer">www.npmjs.com/package/driâ€¦</a></li>
<li>Popover æ ·å¼å®šåˆ¶æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdriverjs.com%2Fdocs%2Fstyling-popover" target="_blank" title="https://driverjs.com/docs/styling-popover" ref="nofollow noopener noreferrer">driverjs.com/docs/stylinâ€¦</a></li>
<li>æŒ‰é’®ä¸å¯¼èˆªæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdriverjs.com%2Fdocs%2Fbuttons" target="_blank" title="https://driverjs.com/docs/buttons" ref="nofollow noopener noreferrer">driverjs.com/docs/buttonâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è§£æå¾—ç‰©è‡ªå»º Redis æœ€æ–°æŠ€æœ¯æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7574620713227714611</link>    <guid>https://juejin.cn/post/7574620713227714611</guid>    <pubDate>2025-11-20T06:42:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574620713227714611" data-draft-id="7574620713227665459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è§£æå¾—ç‰©è‡ªå»º Redis æœ€æ–°æŠ€æœ¯æ¼”è¿›"/> <meta itemprop="keywords" content="Redis,æ•°æ®åº“,äº‘è®¡ç®—"/> <meta itemprop="datePublished" content="2025-11-20T06:42:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—ç‰©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2392954206960247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è§£æå¾—ç‰©è‡ªå»º Redis æœ€æ–°æŠ€æœ¯æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392954206960247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—ç‰©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:42:36.000Z" title="Thu Nov 20 2025 06:42:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰ è¨€</h2>
<p>è‡ªå»º Redis ä¸Šçº¿ 3 å¹´å¤šä»¥æ¥ï¼Œä¸€ç›´å›´ç»•ç€æŠ€æœ¯æ¶æ„ã€æ€§èƒ½æå‡ã€é™ä½æˆæœ¬ã€è‡ªåŠ¨åŒ–è¿ç»´ç­‰æ–¹é¢æŒç»­è¿›è¡ŒæŠ€æœ¯æ¼”è¿›è¿­ä»£ï¼ŒåŠ›æ±‚ä¸ºå…¬å¸ä¸šåŠ¡æä¾›æ€§èƒ½æ›´é«˜ã€æˆæœ¬æ›´ä½çš„åˆ†å¸ƒå¼ç¼“å­˜é›†ç¾¤ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–è¿ç»´æ–¹å¼æå‡è¿ç»´æ•ˆç‡ã€‚</p>
<p>æœ¬æ–‡å°†ä»æ¥å…¥æ–¹å¼ã€åŒåŸåŒæ´»å°±è¿‘è¯»ã€Redis-server ç‰ˆæœ¬ä¸èƒ½åŠ›ã€å®ä¾‹æ¶æ„ä¸è§„æ ¼ã€è‡ªåŠ¨åŒ–è¿ç»´ç­‰å¤šä¸ªæ–¹é¢åˆ†äº«ä¸€ä¸‹è‡ªå»º Redis æœ€æ–°çš„æŠ€æœ¯æ¼”è¿›ã€‚</p>
<h2 data-id="heading-1">äºŒã€è§„æ¨¡ç°çŠ¶</h2>
<p>éšç€å…¬å¸ä¸šåŠ¡å¢é•¿ï¼Œè‡ªå»º Redis ç®¡ç†çš„ Redis ç¼“å­˜è§„æ¨¡ä¹Ÿä¸€ç›´åœ¨æŒç»­å¢é•¿ï¼Œç›®å‰è‡ªå»º Redis æ€»å…±ç®¡ç† 1000+é›†ç¾¤ï¼Œå†…å­˜æ€»è§„æ ¼ 160Tï¼Œ10W+æ•°æ®èŠ‚ç‚¹ï¼Œæœºå™¨æ•°é‡æ•°åƒå°ï¼Œå…¶ä¸­å†…å­˜è§„æ ¼è¶…è¿‡ 1T çš„å¤§å®¹é‡é›†ç¾¤æ•°åä¸ªï¼Œå•ä¸ªé›†ç¾¤æœ€å¤§è®¿é—® QPS æ¥è¿‘åƒä¸‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4aaf0d8bd8f45d898a0a71870da1c0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=B3r1eeJVzASCW7k%2FAmk%2Bokf2IgM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-2">ä¸‰ã€æŠ€æœ¯æ¼”è¿›ä»‹ç»</h2>
<h2 data-id="heading-3">3.1 è‡ªå»ºRedisç³»ç»Ÿæ¶æ„</h2>
<p>ä¸‹å›¾ä¸ºè‡ªå»ºRedisç³»ç»Ÿæ¶æ„ç¤ºæ„å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9112b551a3c453e82483e4305506e22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=uV8YGYIUXOwpOQJxKlO0%2FYMLbBM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è‡ªå»º Redis æ¶æ„ç¤ºæ„å›¾</p>
<p>è‡ªå»ºRedisé›†ç¾¤ç”±Redis-serverã€Redis-proxyã€ConfigServer ç­‰æ ¸å¿ƒç»„ä»¶ç»„æˆã€‚</p>
<ul>
<li>Redis-server ä¸ºæ•°æ®å­˜å‚¨ç»„ä»¶ï¼Œæ”¯æŒä¸€ä¸»å¤šä»ï¼Œä¸»ä»å¤šå¯ç”¨åŒºéƒ¨ç½²ï¼Œæä¾›é«˜å¯ç”¨ã€é«˜æ€§èƒ½çš„æœåŠ¡ï¼›</li>
<li>Redis-proxy ä¸ºä»£ç†ç»„ä»¶ï¼Œä¸šåŠ¡é€šè¿‡ proxy å¯ä»¥åƒä½¿ç”¨å•ç‚¹å®ä¾‹ä¸€æ ·è®¿é—® Redis é›†ç¾¤ï¼Œä½¿ç”¨æ›´ç®€å•ï¼Œå¹¶ä¸”åœ¨Redis-proxy ä¸Šæä¾›åŒåŒºä¼˜å…ˆå°±è¿‘è¯»ã€key ç»´åº¦æˆ–è€…å‘½ä»¤ç»´åº¦é™æµç­‰é«˜çº§åŠŸèƒ½ï¼›</li>
<li>ConfigServer ä¸ºè´Ÿè´£ Redis é›†ç¾¤é«˜å¯ç”¨çš„ç»„ä»¶ã€‚</li>
</ul>
<p>è‡ªå»º Redis æ¥å…¥æ–¹å¼æ”¯æŒé€šè¿‡åŸŸå+LBã€serviceã€SDK ç›´è¿ï¼ˆæ¨èï¼‰ç­‰å¤šç§æ–¹å¼è®¿é—® Redis é›†ç¾¤ã€‚</p>
<p>è‡ªå»º Redis ç³»ç»Ÿè¿˜åŒ…å«ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„è‡ªåŠ¨åŒ–è¿ç»´å¹³å°ï¼Œå…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>Redis é›†ç¾¤å®ä¾‹ä»åˆ›å»ºã€proxy ä¸ server æ‰©ç¼©å®¹ã€åˆ°å®ä¾‹ä¸‹çº¿ç­‰å…¨ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åŒ–è¿ç»´ç®¡ç†èƒ½åŠ›ï¼›</li>
<li>ä¸šåŠ¡éœ€æ±‚è‡ªåŠ©ç”³è¯·å·¥å•ä¸å·¥å•è‡ªåŠ¨åŒ–æ‰§è¡Œï¼›</li>
<li>èµ„æºï¼ˆåŒ…å« ECSã€LBï¼‰ç²¾ç»†åŒ–ç®¡ç†ä¸è‡ªåŠ¨æ™ºèƒ½åˆ†é…èƒ½åŠ›ã€èµ„æºæŠ¥è¡¨ç»Ÿè®¡ä¸å±•ç¤ºï¼›</li>
<li>ECS èµ„æºå®šæœŸå·¡æ£€ã€è‡ªåŠ¨å‡è¡¡ä¸èŠ‚ç‚¹æ™ºèƒ½è°ƒåº¦ï¼›</li>
<li>é›†ç¾¤å¤§ keyã€çƒ­ key ç­‰è¯Šæ–­ä¸åˆ†æï¼Œé›†ç¾¤æ•°æ®è‡ªåŠ©æŸ¥è¯¢ã€‚</li>
</ul>
<p>ä¸‹é¢å°†å°±ä¸€äº›é‡è¦çš„æœ€æ–°æŠ€æœ¯æ¼”è¿›è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚</p>
<h2 data-id="heading-4">3.2 æ¥å…¥æ–¹å¼æ¼”è¿›</h2>
<p>è‡ªå»º Redis æå‡ç¨³å®šæ€§çš„éå¸¸é‡è¦çš„ä¸€ä¸ªæŠ€æœ¯æ¼”è¿›å°±æ˜¯è‡ªç ” DRedis SDKï¼Œä¸šåŠ¡æ¥å…¥è‡ªå»º Redis æ–¹å¼ä»åŸæœ‰é€šè¿‡åŸŸå+LB çš„æ–¹å¼è®¿é—®æ¼”è¿›ä¸ºé€šè¿‡ DRedis SDK è¿æ¥ proxy è®¿é—®ã€‚</p>
<p><strong>LBæ¥å…¥é—®é¢˜</strong></p>
<p>åœ¨è‡ªå»º Redis åˆæœŸï¼Œä¸ºäº†æ–¹ä¾¿ä¸šåŠ¡ä½¿ç”¨ï¼Œä½¿ç”¨æ–¹å¼ä¿æŒä¸äº‘ Redis ä¸€è‡´ï¼Œé€šè¿‡ LB å¯¹ proxy åšè´Ÿè½½å‡è¡¡ï¼Œä¸šåŠ¡é€šè¿‡åŸŸåï¼ˆåŸŸåç»‘å®šé›†ç¾¤å¯¹åº” LBï¼‰è®¿é—®é›†ç¾¤ï¼Œä¸šåŠ¡æ¥å…¥ç®€å•ï¼Œåƒä½¿ç”¨ä¸€ä¸ªå•ç‚¹ Redis ä¸€æ ·ä½¿ç”¨é›†ç¾¤ï¼Œå¹¶ä¸”ä¸äº‘ Redis é…ç½®æ–¹å¼ä¸€è‡´ï¼Œæ¥å…¥æˆæœ¬ä½ã€‚</p>
<p>éšç€è‡ªå»º Redis è§„æ¨¡å¢é•¿ï¼Œå°¤å…¶æ˜¯å¤§æµé‡ä¸šåŠ¡æ—¥æ¸å¢å¤šï¼Œé€šè¿‡ LB æ¥å…¥æ–¹å¼çš„é€æ¸æš´éœ²å‡ºå¾ˆå¤šä¸ªé—®é¢˜ï¼Œéƒ¨åˆ†é—®é¢˜è¿˜éå¸¸æ£˜æ‰‹ï¼š</p>
<ul>
<li>è‡ªå»º Redis ä½¿ç”¨çš„å•ä¸ª LB æµé‡ä¸Šé™ä¸º5Gbï¼Œé˜ˆå€¼æ¯”è¾ƒå°ï¼Œå¯¹äºä¸€äº›å¤§æµé‡ä¸šåŠ¡å•ä¸ª LB éš¾ä»¥æ‰¿æ¥å…¶æµé‡ï¼Œéœ€è¦ç»‘å®šå¤šä¸ªLBï¼Œå¢åŠ äº†è¿ç»´å¤æ‚åº¦ï¼Œè€Œä¸”å¤šä¸ª LB æ—¶å¯èƒ½ä¼šå‡ºç°æµé‡å€¾æ–œé—®é¢˜ï¼›</li>
<li>LBç»„ä»¶ä½œä¸ºè®¿é—®å…¥å£ï¼Œå¯èƒ½ä¼šå—åˆ°ç½‘ç»œå¼‚å¸¸æµé‡æ”»å‡»ï¼Œå¯¼è‡´é›†ç¾¤è®¿é—®å—æŸï¼›</li>
<li>ç”±äºRedisè®¿é—®å‡æ˜¯TCPè¿æ¥ï¼ŒLBæ‘˜æµä¸šåŠ¡ä¼šæœ‰ç§’çº§æŠ¥é”™ã€‚</li>
</ul>
<p><strong>DRedisæ¥å…¥</strong></p>
<p>è‡ªå»ºRedisé€šè¿‡è‡ªç ”DRedis SDKï¼Œé€šè¿‡SDKç›´è¿ proxyï¼Œä¸å†å¼ºä¾èµ– LBï¼Œå½»åº•è§£å†³ LB ç“¶é¢ˆå’Œç¨³å®šæ€§é£é™©é—®é¢˜ï¼ŒåŒæ—¶ï¼ŒDRedis SDK é»˜è®¤ä¼˜å…ˆè®¿é—®åŒå¯ç”¨åŒº proxyï¼Œå¤©ç„¶æ”¯æŒåŒåŸåŒæ´»å°±è¿‘è¯»ã€‚</p>
<p>DRedis SDKç³»ç»Ÿè®¾è®¡å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ce9d89cab354eb59a7410e38449be34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=hzZpAY%2BnZ5xnXoar2MgHbtrI6js%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>Redis-proxy å¯åŠ¨å¹¶ä¸”è·å–åˆ°é›†ç¾¤æ‹“æ‰‘ä¿¡æ¯åï¼Œè‡ªåŠ¨æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼›å¯é€šè¿‡ç®¡æ§ç™½å±åŒ–æ“ä½œå‘é…ç½®ä¸­å¿ƒé…ç½®é›†ç¾¤ä½¿ç”¨çš„ proxy åˆ†ç»„ä¸æƒé‡ã€å°±è¿‘è¯»è§„åˆ™ç­‰ä¿¡æ¯ï¼›DRedis SDK å¯åŠ¨åï¼Œä»é…ç½®ä¸­å¿ƒè·å–åˆ° proxy åˆ†ç»„ä¸æƒé‡ã€å°±è¿‘è¯»è§„åˆ™ï¼Œä»æ³¨å†Œä¸­å¿ƒè·å–åˆ° proxy èŠ‚ç‚¹ä¿¡æ¯ï¼Œç„¶åä¸å¯¹åº” proxy èŠ‚ç‚¹å»ºç«‹è¿æ¥ï¼›åº”ç”¨é€šè¿‡ DRedis SDK è®¿é—®æ•°æ®æ—¶ï¼ŒDRedis SDK é€šè¿‡åŠ æƒè½®è¯¢ç®—æ³•è·å–ä¸€ä¸ª proxy èŠ‚ç‚¹ï¼ˆé»˜è®¤ä¼˜å…ˆåŒå¯ç”¨åŒºï¼‰åŠå¯¹åº”è¿æ¥ï¼Œè¿›è¡Œæ•°æ®è®¿é—®ã€‚</p>
<p>DRedis SDKå¹¶ä¸”å¯¹åŸç”Ÿ RESP åè®®è¿›è¡Œäº†å¢å¼ºï¼Œæ·»åŠ äº†ä¸€éƒ¨åˆ†è‡ªå®šä¹‰åè®®ï¼Œæ”¯æŒä¸šåŠ¡çµæ´»å¼€å¯å°±è¿‘è¯»èƒ½åŠ›ï¼Œå¯¹äºæ»¡è¶³å°±è¿‘è¯»è§„åˆ™çš„ key è®¿é—®ã€æˆ–è€…é€šè¿‡æ³¨è§£æŒ‡å®šçš„å°±è¿‘è¯»è¯·æ±‚ï¼ŒDRedis SDKé€šè¿‡è‡ªå®šä¹‰åè®®ä¿¡æ¯ï¼Œé€šçŸ¥ proxy åœ¨æ‰§è¡Œå¯¹åº”è¯·æ±‚æ—¶ï¼Œä¼˜å…ˆè®¿é—®åŒå¯ç”¨åŒº server èŠ‚ç‚¹ã€‚</p>
<p>DRedis SDK ç›®å‰æ”¯æŒ Javaã€Golangã€C++ï¼ˆå³å°†ä¸Šçº¿ï¼‰ä¸‰ç§å¼€å‘è¯­è¨€ã€‚</p>
<ul>
<li>Java SDK åŸºäº Redisson å®¢æˆ·ç«¯äºŒæ¬¡å¼€å‘ï¼Œåç»­è¿˜ä¼šæ–°å¢åŸºäº Jedis äºŒæ¬¡å¼€å‘ç‰ˆæœ¬ï¼Œä¾›ä¸šåŠ¡çµæ´»é€‰æ‹©ï¼Œå¹¶ä¸”é›†æˆåˆ° fusion æ¡†æ¶ä¸­</li>
<li>Golang SDK åŸºäº go-Redis v9 è¿›è¡ŒäºŒæ¬¡å¼€</li>
<li>C++ SDK åŸºäº brpc äºŒæ¬¡å¼€å‘</li>
</ul>
<p><strong>DRedis æ¥å…¥ä¼˜åŠ¿</strong></p>
<p>ä¸šåŠ¡é€šè¿‡ DRedis SDK æ¥å…¥è‡ªå»º Redisï¼Œåœ¨ç¨³å®šæ€§ã€æ€§èƒ½ç­‰æ–¹é¢éƒ½èƒ½å¾—åˆ°å¤§å¹…æå‡ï¼ŒåŒæ—¶èƒ½é™ä½ä½¿ç”¨æˆæœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87c6c646dcd741bba83d66a998dd7d7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=7PZv9JIuSOesG2s7dJVsbU22y8I%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ç¤¾åŒºæŸåº”ç”¨å‡çº§åï¼Œä¸šåŠ¡ RT ä¸‹é™æ˜æ˜¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62a6263c65e549c4b545245e73cae4b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=NT4NxuNqTvSfeLuDI6Z%2FSp8PLOo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>DRedis æ¥å…¥ç°çŠ¶</strong></p>
<p>DRedis SDKç›®å‰åœ¨å…¬å¸å†…éƒ¨å¤§éƒ¨åˆ†ä¸šåŠ¡åŸŸçš„åº”ç”¨å®Œæˆå‡çº§ã€‚</p>
<p>Java å’Œ Golang åº”ç”¨ç›®å‰æ¥å…¥<strong>ä¸Šçº¿è¶…è¿‡300+</strong> ã€‚</p>
<h2 data-id="heading-5">3.3 åŒåŸåŒæ´»å°±è¿‘è¯»</h2>
<p>è‡ªå»º Redis åŒåŸåŒæ´»é‡‡ç”¨<strong>ä¸­å¿ƒå†™å°±è¿‘è¯»</strong>çš„æ–¹æ¡ˆå®ç°ï¼Œå¯ä»¥é™ä½ä¸šåŠ¡å¤šåŒºéƒ¨ç½²æ—¶è®¿é—® Redis RTã€‚</p>
<p>åŒåŸåŒæ´»å°±è¿‘è¯»åœºæ™¯ä¸‹ï¼Œä¸šåŠ¡è®¿é—® Redis æ—¶ï¼Œéœ€è¦ SDK ä¼˜å…ˆè®¿é—®åŒå¯ç”¨åŒºproxyï¼Œproxy ä¼˜å…ˆè®¿é—®åŒå¯ç”¨åŒº serverèŠ‚ç‚¹ï¼Œå…¶ä¸­proxyä¼˜å…ˆè®¿é—®åŒåŒº server èŠ‚ç‚¹ç”± proxy å®ç°ï¼Œä½†æ˜¯åœ¨è‡ªç ” DRedis SDK ä¹‹å‰ï¼ŒLB æ— æ³•è‡ªåŠ¨è¯†åˆ«åº”ç”¨æ‰€åœ¨åŒåŒºçš„ proxy å¹¶è‡ªåŠ¨è·¯ç”±ï¼Œå› æ­¤éœ€è¦å€ŸåŠ©service çš„åŒåŒºå°±è¿‘è·¯ç”±èƒ½åŠ›ï¼ŒåŒåŸåŒæ´»å°±è¿‘è¯»éœ€è¦é€šè¿‡å®¹å™¨ proxy+service æ¥å…¥ã€‚</p>
<p>è‡ªå»º Redis è‡ªç ” DRedis SDK è®¾è®¡ä¹‹åˆä¾¿è€ƒè™‘äº†åŒåŸåŒæ´»å°±è¿‘è¯»éœ€æ±‚ï¼ŒDRedis è®¿é—® proxy æ—¶ï¼Œé»˜è®¤ä¼˜å…ˆè®¿é—®åŒåŒºproxyã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32345055d2ec4a9a840313a6fa8a26f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=sgonLH8d%2FhUBFN1JaTa852tRD7c%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c3238f34dbf4d13b2b66391c88934cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=Jk%2ByKxEv0On0xW7l%2FBn5ALNWA%2FA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>serviceæ¥å…¥é—®é¢˜</strong></p>
<p>ç›®å‰ï¼Œè‡ªå»º Redis server å’Œ proxy èŠ‚ç‚¹åŸºæœ¬éƒ½æ˜¯éƒ¨ç½²åœ¨ ECS ä¸Šï¼Œå¹¶ä¸”ç”±äº server èŠ‚ç‚¹ä¸»è¦æ¶ˆè€—å†…å­˜ï¼Œè€Œ proxy èŠ‚ç‚¹ä¸»è¦æ¶ˆè€— CPUï¼Œå› æ­¤é»˜è®¤é‡‡ç”¨ proxy + server èŠ‚ç‚¹æ··éƒ¨çš„æ–¹å¼ï¼Œå……åˆ†åˆ©ç”¨æœºå™¨çš„ CPU å’Œå†…å­˜ï¼Œé™ä½æˆæœ¬ã€‚</p>
<p>è€Œä¸ºäº†æ”¯æŒåŒåŸåŒæ´»å°±è¿‘è¯»ï¼Œéœ€è¦åœ¨å®¹å™¨ç¯å¢ƒéƒ¨ç½² proxyï¼Œå¹¶åˆ›å»º serviceï¼Œä¼šå¸¦æ¥å¦‚ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>è¿ç»´å‰²è£‚ï¼Œè¿ç»´å¤æ‚åº¦å¢åŠ ï¼Œé™¤äº†éœ€è¦è¿ç»´ ECS ç¯å¢ƒéƒ¨ç½²èŠ‚ç‚¹ï¼Œé¢å¤–å¢åŠ äº†å®¹å™¨ç¯å¢ƒéƒ¨ç½²æ–¹å¼ã€‚</li>
<li>æˆæœ¬å¢åŠ ï¼Œå®¹å™¨ç¯å¢ƒ proxy éœ€è¦ç‹¬ç«‹æœºå™¨éƒ¨ç½²ï¼Œæ— æ³•ä¸ server èŠ‚ç‚¹æ··éƒ¨ï¼Œé€ æˆæˆæœ¬å¢åŠ ã€‚</li>
<li>RTä¸Šå‡ï¼ŒèŠ‚ç‚¹ CPU æ›´é«˜ï¼Œä»å®é™…ä½¿ç”¨æ•ˆæœæ¥çœ‹ï¼Œå®¹å™¨ç¯å¢ƒ proxy æ•´ä½“çš„ CPU å’Œå“åº” RT éƒ½æ˜æ˜¾é«˜äº ECS ç¯å¢ƒéƒ¨ç½²çš„èŠ‚ç‚¹ã€‚</li>
<li>è®¿é—®ä¸å‡è¡¡ï¼Œservice æ¥å…¥æ—¶ï¼Œä¼šå‡ºç°è¿æ¥å’Œè®¿é—®ä¸å‡è¡¡ç°è±¡ã€‚</li>
<li>æ— æ³•å®šåˆ¶åŒ–æŒ‡å®šä»…ä»…å°‘é‡ç‰¹å®škey æˆ–è€… key å‰ç¼€ã€æŒ‡å®šè¯·æ±‚å¼€å¯å°±è¿‘è¯»ã€‚</li>
</ul>
<p><strong>DRedisæ¥å…¥</strong></p>
<p>è‡ªå»º Redis è‡ªç ” DRedis SDK è®¾è®¡ä¹‹åˆä¾¿è€ƒè™‘äº†åŒåŸåŒæ´»å°±è¿‘è¯»éœ€æ±‚ï¼ŒDRedis è®¿é—® proxy æ—¶ï¼Œ<strong>é»˜è®¤ä¼˜å…ˆè®¿é—®åŒåŒºproxy</strong>ï¼›å½“åŒå¯ç”¨åŒºå¯ç”¨ proxy æ•°é‡å°äºç­‰äº1ä¸ªæ—¶ï¼Œå¯ç”¨è°ƒç”¨ä¿æŠ¤ï¼ŒDRedisä¼šä¸»åŠ¨è·¨åŒºè®¿é—®å…¶ä»–å¯ç”¨åŒº proxy èŠ‚ç‚¹ã€‚</p>
<p>é€šè¿‡serviceæ¥å…¥æ–¹å¼æ”¯æŒåŒåŸåŒæ´»å°±è¿‘è¯»ï¼Œæ˜¯éœ€è¦åœ¨ proxy ä¸Šç»Ÿä¸€å¼€å¯å°±è¿‘è¯»é…ç½®ï¼Œå¼€å¯åï¼Œå¯¹å…¨å±€è¯»è¯·æ±‚å‡ç”Ÿæ•ˆï¼Œæ‰€æœ‰è¯»è¯·æ±‚éƒ½é»˜è®¤ä¼˜å…ˆåŒåŒºè®¿é—®ã€‚</p>
<p>ç”±äº Redis ä¸»ä»å¤åˆ¶ä¸ºå¼‚æ­¥å¤åˆ¶ï¼Œä¸»ä»å¤åˆ¶å¯èƒ½å­˜åœ¨å»¶è¿Ÿï¼Œ<strong>ç†è®ºä¸Šåœ¨å¤‡å¯ç”¨åŒºå¯èƒ½å­˜åœ¨è¯»å–åˆ°çš„ä¸æ˜¯æœ€æ–°æ•°æ®</strong>ã€‚</p>
<p>æŸäº›ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œä¸šåŠ¡å¯èƒ½åœ¨æŸäº›åœºæ™¯èƒ½å¤Ÿæ¥å—å°±è¿‘è¯»ï¼Œä½†æ˜¯å…¶ä»–ä¸€äº›åœºæ™¯éœ€è¦ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œæ— æ³•æ¥å—å°±è¿‘è¯»ï¼Œé€šè¿‡ service æ¥å…¥æ–¹å¼æ—¶æ— æ³•çµæ´»åº”å¯¹è¿™ç§åœºæ™¯ã€‚</p>
<p>DRedis SDK æä¾›äº†ä¸¤ç§æ–¹å¼ä¾›è¿™ç§åœºæ™¯ä¸‹ä¸šåŠ¡ä½¿ç”¨ï¼š</p>
<ul>
<li>æ”¯æŒæŒ‡å®š key ç²¾ç¡®åŒ¹é…æˆ–è€… key å‰ç¼€åŒ¹é…çš„æ–¹å¼ï¼Œå®šå‘å¯ç”¨å°±è¿‘è¯»ã€‚</li>
<li>Java æ”¯æŒé€šè¿‡å£°æ˜å¼æ³¨è§£ï¼ˆ@NearReadï¼‰æŒ‡å®šæŸæ¬¡è¯·æ±‚é‡‡ç”¨å°±è¿‘è¯»ï¼›Golang æ–°å¢ 80 ä¸ªç±»ä¼¼ xxxxNearby è¯»å‘½ä»¤ï¼Œæ”¯æŒå°±è¿‘è¯»ã€‚</li>
</ul>
<p>ä½¿ç”¨ä»¥ä¸Šä¸¤ç§æ–¹å¼æŒ‡å®šç‰¹å®šè¯·æ±‚ä½¿ç”¨å°±è¿‘è¯»æ—¶ï¼Œæ— éœ€ proxy ä¸Šç»Ÿä¸€é…ç½®åŒåŒºä¼˜å…ˆå°±è¿‘è¯»ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰è¯»è¯·æ±‚è®¿é—®ä¸»èŠ‚ç‚¹ï¼Œä¸šåŠ¡ä¸Šå¯¹ RT è¦æ±‚é«˜ã€ä¸€è‡´æ€§è¦æ±‚ä½çš„è¯·æ±‚å¯ä»¥é€šè¿‡ä»¥ä¸Šä¸¤ç§æ–¹å¼æŒ‡å®šä¼˜å…ˆåŒåŒºå°±è¿‘è¯»ã€‚</p>
<h2 data-id="heading-6">3.4 Redis-serverç‰ˆæœ¬ä¸èƒ½åŠ›</h2>
<p>åœ¨è‡ªå»ºRedis åˆæœŸï¼Œç”±äºä¸šåŠ¡åœ¨å‰æœŸä½¿ç”¨äº‘Redisäº§å“æ—¶å‡æ˜¯ä½¿ç”¨Redis4.0 ç‰ˆæœ¬ï¼Œå› æ­¤è‡ªå»º Redis åˆæœŸä¹Ÿæ˜¯é€‰æ‹© Redis4.0 ç‰ˆæœ¬ä½œä¸ºä¸»ç‰ˆæœ¬ï¼Œéšç€ Redis ç¤¾åŒºæ–°ç‰ˆæœ¬å‘å¸ƒï¼Œç»“åˆå½“å‰ä¸šç•Œä½¿ç”¨çš„ä¸»æµç‰ˆæœ¬ï¼Œè‡ªå»ºRedisä¹Ÿæ–°å¢äº† Redis6.2 ç‰ˆæœ¬ï¼Œå¹¶ä¸”å°† Redis6.2 ç‰ˆæœ¬ä½œä¸ºæ–°é›†ç¾¤é»˜è®¤ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b15ffac64cb749369cf0f2bd48fb24b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=WQSWRFDJA8FTrwDWGk%2FeKofuDkA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä¸ç®¡æ˜¯ Redis4.0 è¿˜æ˜¯ Redis6.2 ç‰ˆæœ¬ï¼Œå‡æ”¯æŒäº†å¤šçº¿ç¨‹ç‰¹æ€§ã€å®æ—¶çƒ­ key ç»Ÿè®¡èƒ½åŠ›ã€æ°´å¹³æ‰©å®¹å¼‚æ­¥è¿ç§» slot èƒ½åŠ›ï¼Œå­˜é‡é›†ç¾¤éšç€æ—¥å¸¸èµ„æºå‡è¡¡è¿ç§»è°ƒåº¦ï¼Œé›†ç¾¤èŠ‚ç‚¹ç‰ˆæœ¬ä¼šè‡ªåŠ¨å‡çº§åˆ°åŒç‰ˆæœ¬çš„æœ€æ–°å®‰è£…åŒ…ã€‚</p>
<ul>
<li><strong>å¤šçº¿ç¨‹ç‰¹æ€§</strong></li>
</ul>
<p>Redis6.2 ç‰ˆæœ¬æ”¯æŒ IO å¤šçº¿ç¨‹ï¼Œåœ¨ Redis å¤„ç†è¯»å†™ä¸šåŠ¡è¯·æ±‚æ•°æ®æ—¶ä½¿ç”¨å¤šçº¿ç¨‹å¤„ç†ï¼Œæé«˜ IO å¤„ç†èƒ½åŠ›ï¼Œè‡ªå»º Redis å°†å¤šçº¿ç¨‹èƒ½åŠ›ä¹Ÿç§»æ¤åˆ°äº† Redis4.0 ç‰ˆæœ¬ï¼Œæµ‹è¯•å›¢é˜Ÿæµ‹è¯•æ˜¾ç¤ºï¼Œå¼€å¯å¤šçº¿ç¨‹ï¼Œè¯»å†™æ€§èƒ½æå‡æ˜æ˜¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/901a4a4fa0dd4c6ab60943d2bd9f6593~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=7XbPYt7%2FQdz7dPeRdvGAE8U7XJ8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¤šçº¿ç¨‹ç‰ˆæœ¬ VS æ™®é€šç‰ˆæœ¬</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/719dc8ba02cb459a89b504f778a3145c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=PSOc%2BsltZOm%2FWCNEQDusPQHEgrs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¤šçº¿ç¨‹ç‰ˆæœ¬ VS äº‘äº§å“5.0ç‰ˆæœ¬</p>
<ul>
<li><strong>å®æ—¶çƒ­ key ç»Ÿè®¡</strong></li>
</ul>
<p>è‡ªå»º Redis4.0 å’Œ Redis6.2 ç‰ˆæœ¬å‡æ”¯æŒ Redis æœåŠ¡ç«¯å®æ—¶çƒ­ key ç»Ÿè®¡èƒ½åŠ›ï¼Œç®¡æ§å°ç™½å±åŒ–å±•ç¤ºï¼Œæ–¹ä¾¿å¿«é€Ÿæ’æŸ¥çƒ­ key å¯¼è‡´çš„é›†ç¾¤æ€§èƒ½é—®é¢˜ã€‚æ–¹æ¡ˆè¯¦ç»†å¯é˜…è¯»ã€ŠåŸºäºRediså†…æ ¸çš„çƒ­keyç»Ÿè®¡å®ç°æ–¹æ¡ˆã€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64b81d5a6c0d4d2ca9f428fa64b191d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=4KVCYlpBrbBGkEfckPWN3SU7JhE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li><strong>æ°´å¹³æ‰©å®¹å¼‚æ­¥è¿ç§»</strong></li>
</ul>
<p>è‡ªå»º Redis æ”¯æŒæ°´å¹³æ‰©å®¹å¼‚æ­¥æ•°æ®è¿ç§»ï¼Œè§£å†³å¤§ key æ— æ³•è¿ç§»æˆ–è€…è¿ç§»å¤±è´¥çš„ç¨³å®šæ€§é—®é¢˜ï¼Œæ”¯æŒå¤š key å¹¶å‘è¿ç§»ï¼Œå‡ äº¿ key æ•°æ®åœ¨é»˜è®¤é…ç½®ä¸‹æ°´å¹³æ‰©å®¹æ—¶é—´ä»<strong>å¹³å‡ 4 å°æ—¶ç¼©çŸ­åˆ° 10 åˆ†é’Ÿ</strong>ï¼Œ<strong>æ€§èƒ½æå‡ 20 å€</strong>ï¼Œå¯¹ä¸šåŠ¡<strong>RTå½±å“ä¸‹é™ 90% ä»¥ä¸Š</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d06cc388336499ab56627f9ebef841e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=GSaUtk0R9Bp8ug1RPYHlL0tzLtU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ç®—æ³•æŸå®ä¾‹ 2.5 äº¿ key æ°´å¹³æ‰©å®¹èŠ±è´¹æ—¶é—´å’Œè¿ç§»è¿‡ç¨‹å¯¹ä¸šåŠ¡ RT å½±å“</p>
<h2 data-id="heading-7">3.5 å®ä¾‹æ¶æ„ä¸è§„æ ¼</h2>
<p><strong>Rediså•ç‚¹ä¸»å¤‡æ¨¡å¼</strong></p>
<p>è‡ªå»º Redis å®ä¾‹é»˜è®¤å‡é‡‡ç”¨é›†ç¾¤æ¶æ„ï¼Œä½†æ˜¯é€šè¿‡ proxy ä»£ç†å±è”½é›†ç¾¤æ¶æ„ç»†èŠ‚ï¼Œé›†ç¾¤æ¶æ„å¯¹ä¸šåŠ¡é€æ˜ï¼Œä¸šåŠ¡åƒä½¿ç”¨ä¸€ä¸ªå•ç‚¹ Redis å®ä¾‹ä¸€æ ·ä½¿ç”¨ Redis é›†ç¾¤ã€‚</p>
<p>ä½†æ˜¯é›†ç¾¤æ¶æ„ä¸‹ï¼Œç”±äºåº•å±‚æ¶‰åŠå¤šä¸ªåˆ†ç‰‡ï¼Œä¸åŒ key å¯èƒ½å­˜åœ¨åœ¨ä¸åŒåˆ†ç‰‡ï¼Œå¹¶ä¸”éšç€æ°´å¹³æ‰©å®¹ï¼Œkeyæ‰€åœ¨åˆ†ç‰‡å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ï¼Œé›†ç¾¤æ¶æ„ä¸‹ï¼Œå¯¹äºä¸€äº›å¤š key å‘½ä»¤ï¼ˆå¦‚ evalã€evalshaã€BLPOPç­‰ï¼‰è¦æ±‚å‘½ä»¤ä¸­æ‰€æœ‰ key å¿…é¡»å±äºåŒä¸€ä¸ªslotã€‚å› æ­¤é›†ç¾¤æ¶æ„ä¸‹ï¼Œéƒ¨åˆ†å‘½ä»¤è®¿é—®ä¸å•ç‚¹è¿˜æ˜¯æœ‰ç‚¹å·®å¼‚ã€‚</p>
<p>å®é™…ä½¿ç”¨ä¸­ï¼Œæœ‰å°‘æ•°ä¸šåŠ¡ç”±äºä¾èµ–äº†ä¸€äº›å¼€æºçš„ä¸‰æ–¹ç»„ä»¶ï¼Œå…¶ä¸­å¯èƒ½ç”±äºå­˜å‚¨éå¸¸å°‘é‡çš„æ•°æ®ï¼Œæ‰€ä»¥ä½¿ç”¨åˆ° Redis å•ç‚¹ä¸»å¤‡æ¨¡å¼å®ä¾‹ï¼Œå› æ­¤ï¼Œè€ƒè™‘åˆ°è¿™ç§åœºæ™¯ï¼Œè‡ªå»º Redis åœ¨é›†ç¾¤æ¶æ„åŸºç¡€ä¸Šï¼Œä¹Ÿæ”¯æŒäº†Redis å•ç‚¹ä¸»å¤‡æ¨¡å¼å¯ä¾›é€‰æ‹©ã€‚</p>
<p><strong>ä¸€ä¸»å¤šä»è§„æ ¼</strong></p>
<p>è‡ªå»º Redis æ”¯æŒä¸€ä¸»å¤šä»è§„æ ¼ç”¨äºè·¨åŒºå®¹ç¾ï¼Œæä¾›æ›´å¿«çš„ HA æ•ˆç‡ï¼Œå½“å‰<strong>æ”¯æŒä¸€ä¸»ä¸€ä»ï¼ˆé»˜è®¤ï¼‰ï¼Œä¸€ä¸»ä¸¤ä»ã€ä¸€ä¸»ä¸‰ä» 3 ç§å‰¯æœ¬è§„æ ¼</strong>ï¼Œæ”¯æŒé…ç½®<strong>è¯»å†™åˆ†ç¦»</strong>ç­–ç•¥æå‡ç³»ç»Ÿæ€§èƒ½ï¼ˆä¸€ä¸»å¤šä»è§„æ ¼ä¸‹ï¼Œå¼€å¯è¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥æœ‰å¤šä¸ªåˆ†ç‰‡æ‰¿æ¥è¯»æµé‡ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49192ae76584462dbdc9e5ac6d982550~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=WstLYJcp%2FVzNOdDOgWT5B3lRTfY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä¸€ä¸»ä¸€ä»</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/549534b2aa65419bbaacc5737ba444b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=ec4uhhGXiPYJNT5qpCnN2VZzmRo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä¸€ä¸»ä¸¤ä»</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe95311c88ad4a62b21ffd6c724944cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=mSFaaDuWryCadNgoiZTnVqwIRP8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä¸€ä¸»ä¸‰ä»</p>
<ul>
<li>ä¸€ä¸»ä¸€ä»æ—¶é»˜è®¤ä¸»å¤‡å¯ç”¨åŒºå„éƒ¨ç½²ä¸€ä¸ªå‰¯æœ¬ï¼ˆmasteråœ¨ä¸»å¯ç”¨åŒºï¼‰</li>
<li>ä¸€ä¸»ä¸¤ä»æ—¶é»˜è®¤ä¸»å¯ç”¨åŒºéƒ¨ç½²ä¸€ä¸»ä¸€ä»ï¼Œå¤‡å¯ç”¨åŒºéƒ¨ç½²ä¸€ä»å‰¯æœ¬</li>
<li>ä¸€ä¸»ä¸‰ä»æ—¶é»˜è®¤ä¸»å¯ç”¨åŒºéƒ¨ç½²ä¸€ä¸»ä¸€ä»ï¼Œå¤‡å¯ç”¨åŒºéƒ¨ç½²ä¸¤ä»å‰¯æœ¬</li>
</ul>
<h2 data-id="heading-8">3.6 proxyé™æµ</h2>
<p>ä¸ºäº†åº”å¯¹å¼‚å¸¸çªå‘æµé‡å¯¼è‡´çš„ä¸šåŠ¡è®¿é—®æ€§èƒ½ä¸‹é™ï¼Œ<strong>è‡ªå»º Redis-proxy æ”¯æŒé™æµèƒ½åŠ›</strong>ã€‚</p>
<p>æœ‰éƒ¨åˆ†ä¸šåŠ¡å¯èƒ½å­˜åœ¨ç‰¹æ®Šçš„å·²çŸ¥å¤§keyï¼Œä¸šåŠ¡ä¸­æ­£å¸¸é€»è¾‘ä¹Ÿä¸ä¼šè°ƒç”¨æŸ¥è¯¢å¤§ key å…¨é‡æ•°æ®å‘½ä»¤ï¼Œå¦‚ hgetallã€smembers ç­‰ï¼ŒæŸ¥è¯¢å¤§ key å…¨é‡æ•°æ®ä¼šå¯¼è‡´èŠ‚ç‚¹æ€§èƒ½ä¸‹é™ï¼Œæç«¯æƒ…å†µä¸‹ä¼šå¯¼è‡´èŠ‚ç‚¹ä¸»ä»åˆ‡æ¢ï¼Œå› æ­¤ï¼Œè‡ªå»ºRedis ä¹Ÿæ”¯æŒé…ç½®å‘½ä»¤é»‘åå•ï¼Œ<strong>åœ¨ç‰¹å®šçš„é›†ç¾¤ï¼Œç¦ç”¨æŸäº›ç‰¹å®šçš„å‘½ä»¤</strong>ã€‚</p>
<ul>
<li>æ”¯æŒ key ç»´åº¦é™æµï¼ŒæŒ‡å®š key è®¿é—® QPS é˜ˆå€¼</li>
<li>æ”¯æŒå‘½ä»¤ç»´åº¦é™æµï¼ŒæŒ‡å®šå‘½ä»¤è®¿é—® QPS é˜ˆå€¼</li>
<li>æ”¯æŒå‘½ä»¤é»‘åå•ï¼Œæ·»åŠ é»‘åå•åï¼Œè¯¥å®ä¾‹ç¦ç”¨æ­¤å‘½ä»¤</li>
</ul>
<h2 data-id="heading-9">3.7 è‡ªåŠ¨åŒ–è¿ç»´</h2>
<p>è‡ªå»º Redis ç³»ç»Ÿè¿˜åŒ…å«ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„è‡ªåŠ¨åŒ–è¿ç»´å¹³å°ï¼Œä¸€ç›´ä»¥æ¥ï¼Œè‡ªå»ºRedisä¸€ç›´åœ¨å®Œå–„ç³»ç»Ÿè‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›ï¼Œé€šè¿‡ä¸°å¯Œçš„è‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›ï¼Œå®ç°é›†ç¾¤å…¨ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åŒ–ç®¡ç†ï¼Œèµ„æºç®¡ç†ä¸æ™ºèƒ½è°ƒåº¦ï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤ç­‰ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ã€é™ä½æˆæœ¬ï¼Œæé«˜è¿ç»´æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a981a9841394ee395aeaa96b16ef1a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225756&amp;x-signature=vLQzlKUcfuBntXWiGjJHLl2DeuM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li><strong>èµ„æºæ± è‡ªåŠ¨åŒ–å‡è¡¡è°ƒåº¦</strong></li>
</ul>
<p>è‡ªå»º Redis èµ„æºæ± æ”¯æŒ<strong>æŒ‰å†…å­˜ä½¿ç”¨ç‡è‡ªåŠ¨åŒ–å‡è¡¡è°ƒåº¦ã€æŒ‰å†…å­˜åˆ†é…ç‡è‡ªåŠ¨åŒ–å‡è¡¡è°ƒåº¦ã€æŒ‰ CPU ä½¿ç”¨ç‡å‡è¡¡è°ƒåº¦ã€æ”¯æŒæŒ‡å®šæœºå™¨å‡Œæ™¨è¿ç§»è°ƒåº¦ï¼ˆéšæ‚£æœºå™¨æå‰ç»´æŠ¤ï¼‰ç­‰</strong>åŠŸèƒ½ï¼Œå‡è¡¡èµ„æºæ± ä¸­æ‰€æœ‰èµ„æºçš„è´Ÿè½½ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<ul>
<li><strong>é›†ç¾¤è‡ªåŠ¨éƒ¨ç½²ä¸ä¸‹çº¿</strong></li>
</ul>
<p>å½“ä¸šåŠ¡æäº¤é›†ç¾¤ç”³è¯·å·¥å•å®¡æ‰¹é€šè¿‡åï¼Œåˆ¤æ–­æ˜¯å¦æ”¯æŒè‡ªå»ºï¼Œå¦‚ç¬¦åˆè‡ªå»ºåˆ™è‡ªåŠ¨åŒ–è¿›è¡Œé›†ç¾¤éƒ¨ç½²å’Œéƒ¨ç½²ç»“æœæ ¡éªŒï¼Œæ ¡éªŒé›†ç¾¤å¯ç”¨æ€§åè‡ªåŠ¨ç»™ä¸šåŠ¡äº¤ä»˜é›†ç¾¤ä¿¡æ¯ï¼Œæ•´ä¸ªè¿‡ç¨‹é«˜æ•ˆå¿«é€Ÿã€‚</p>
<p>ä¸šåŠ¡æäº¤é›†ç¾¤ä¸‹çº¿å·¥å•åï¼Œè‡ªåŠ¨æ£€æµ‹æ˜¯å¦æ»¡è¶³ä¸‹çº¿æ¡ä»¶ï¼Œæ¯”å¦‚æ˜¯å¦å­˜åœ¨è®¿é—®è¿æ¥ï¼Œå¦‚æ»¡è¶³ä¸‹çº¿æ¡ä»¶ï¼Œåˆ™è‡ªåŠ¨é‡Šæ”¾ proxy èµ„æºï¼Œä¿ç•™ 7 å¤©åè‡ªåŠ¨å›æ”¶ server èŠ‚ç‚¹èµ„æºï¼Œåœ¨7 å¤©å†…ï¼Œå¦‚æœå­˜åœ¨ç‰¹æ®Šä¸šåŠ¡ä»åœ¨ä½¿ç”¨çš„æƒ…å†µï¼Œè¿˜æ”¯æŒå¿«é€Ÿæ¢å¤ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>èµ„æºç®¡ç†</strong></li>
</ul>
<p>å¯¹ ECS æœºå™¨èµ„æºå’Œ LB èµ„æºè¿›è¡Œæ‰“æ ‡ï¼Œæ ¹æ®ç‰¹æ®Šä¸šåŠ¡éœ€è¦åšä¸åŒèµ„æºæ± çš„éš”ç¦»è°ƒåº¦ï¼Œæ”¯æŒåœ¨é›†ç¾¤éƒ¨ç½²ä¸æ‰©å®¹æ—¶ï¼Œèµ„æºè‡ªåŠ¨æ™ºèƒ½åŒ–åˆ†é…ã€‚</p>
<ul>
<li><strong>é›†ç¾¤æ‰©ç¼©å®¹</strong></li>
</ul>
<p>è‡ªå»º Redis æ”¯æŒ server è‡ªåŠ¨å‚ç›´æ‰©å®¹ï¼Œä¸šåŠ¡ç”³è¯·é›†ç¾¤æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦å¼€å¯è‡ªåŠ¨æ‰©å®¹ï¼Œå¦‚æœå¼€å¯è‡ªåŠ¨æ‰©å®¹ï¼Œå½“é›†ç¾¤å†…å­˜ä½¿ç”¨ç‡è¾¾åˆ°80%æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œå‚ç›´æ‰©å®¹ï¼Œå¯¹ä¸šåŠ¡å®Œå…¨æ— æ„Ÿï¼Œå¿«é€Ÿåº”å¯¹ä¸šåŠ¡å®¹é‡ä¸Šæ¶¨åœºæ™¯ã€‚</p>
<p>ecs-proxyï¼Œdocker-proxyæ‰©å®¹ï¼ŒserverèŠ‚ç‚¹çš„æ‰©ç¼©å®¹ä¹Ÿæ”¯æŒå·¥å•è‡ªåŠ¨åŒ–æ“ä½œï¼Œä¸šåŠ¡æäº¤å·¥å•åï¼Œç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œã€‚</p>
<ul>
<li><strong>å·¥å•è‡ªåŠ¨åŒ–</strong></li>
</ul>
<p>å½“å‰80%ä»¥ä¸Šçš„è¿ç»´åœºæ™¯å·²å®Œæˆå·¥å•è‡ªåŠ¨åŒ–ï¼Œå¦‚ Biz ç”³è¯·ã€åˆ›å»ºå®ä¾‹ã€å¯†ç ç”³è¯·ã€æƒé™ç”³è¯·ã€åˆ é™¤keyã€å®ä¾‹å‡é™é…ï¼Œé›†ç¾¤ä¸‹çº¿ç­‰å‡å®Œæˆå·¥å•è‡ªåŠ¨åŒ–ã€‚ä¸šåŠ¡æå•å®¡æ‰¹é€šè¿‡åè‡ªåŠ¨æ ¡éªŒæ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåè‡ªåŠ¨å‘é€å·¥å•æ‰§è¡Œç»“æœé€šçŸ¥ã€‚</p>
<ul>
<li><strong>å‘Šè­¦è‡ªåŠ¨åŒ–å¤„ç†</strong></li>
</ul>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æœºå™¨å®•æœºäº‹ä»¶ï¼Œå¦‚å‘ç°æœºå™¨å®•æœºé‡å¯ï¼Œä¼šè‡ªåŠ¨æ‹‰èµ·æœºå™¨ä¸Šæ‰€æœ‰èŠ‚ç‚¹ï¼Œå¿«é€Ÿæ¢å¤æ•…éšœï¼Œæé«˜è¿ç»´æ•ˆç‡ã€‚</p>
<p>å…³äºè‡ªå»º Redis è‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›æå‡è¯¦ç»†è®¾è®¡ç»†èŠ‚ï¼Œåç»­ä¼šä¸“é—¨åˆ†äº«ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
<h2 data-id="heading-10">å››ã€æ€»ç»“</h2>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†è‡ªå»º Redis æœ€æ–°æŠ€æœ¯æ¼”è¿›ï¼Œè¯¦ç»†ä»‹ç»äº†è‡ªç ” DRedis SDKä¼˜åŠ¿ä¸ç›®å‰ä½¿ç”¨ç°çŠ¶ï¼Œä»¥åŠ DRedis åœ¨åŒåŸåŒæ´»å°±è¿‘è¯»åœºæ™¯ä¸‹ï¼Œå¯ä»¥æ›´ç²¾ç»†åŒ–çš„æ§åˆ¶éƒ¨åˆ†è¯·æ±‚é‡‡ç”¨ä¼˜å…ˆåŒåŒºå°±è¿‘è¯»ã€‚</p>
<p>ä»‹ç»äº†è‡ªå»º Redis ç›®å‰æ”¯æŒæœ€æ–°çš„ Redis6.2ç‰ˆæœ¬ï¼Œä»¥åŠåœ¨ Redis4.0 å’Œ Redis6.2 ç‰ˆæœ¬å‡æ”¯æŒå¤šçº¿ç¨‹ IO èƒ½åŠ›ã€å®æ—¶çƒ­ key ç»Ÿè®¡èƒ½åŠ›ã€æ°´å¹³æ‰©å®¹å¼‚æ­¥è¿ç§»èƒ½åŠ›ã€‚è‡ªå»º Redis é™¤äº†æ”¯æŒé›†ç¾¤æ¶æ„ï¼Œä¹Ÿæ”¯æŒå•ç‚¹ä¸»å¤‡æ¶æ„å®ä¾‹ç”³è¯·ï¼ŒåŒæ—¶æ”¯æŒä¸€ä¸»å¤šä»å‰¯æœ¬è§„æ ¼ï¼Œå¯ä»¥æä¾›å¯é æ€§å’Œè¯»è¯·æ±‚èƒ½åŠ›ï¼ˆè¯»å†™åˆ†ç¦»åœºæ™¯ä¸‹ï¼‰ã€‚è‡ªå»º Redis-proxy ä¹Ÿæ”¯æŒå¤šç§é™æµæ–¹å¼ï¼ŒåŒ…æ‹¬ key ç»´åº¦ã€å‘½ä»¤ç»´åº¦ç­‰ã€‚</p>
<p>è‡ªå»º Redis è‡ªåŠ¨åŒ–è¿ç»´å¹³å°æ”¯æŒå¼ºå¤§çš„è‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ï¼Œé™ä½æˆæœ¬ï¼Œæé«˜è¿ç»´æ•ˆç‡ã€‚</p>
<p>è‡ªå»º Redis ç»è¿‡é•¿æœŸçš„æŠ€æœ¯è¿­ä»£æ¼”è¿›ï¼Œç›®å‰æ”¯æŒçš„å‘½ä»¤å’ŒåŠŸèƒ½ä¸Šå®Œå…¨å¯¹æ¯”äº‘ Redisï¼ŒåŒæ—¶ï¼Œè‡ªå»º Redis æ‹¥æœ‰å…¶ä»–ä¸€äº›ç‰¹è‰²çš„èƒ½åŠ›ä¸ä¼˜åŠ¿ï¼Œæ¯”å¦‚ä¸å†ä¾èµ–LBã€æ”¯æŒè‡ªåŠ¨å‚ç›´æ‰©å®¹ã€æ”¯æŒåŒåŒºä¼˜å…ˆå°±è¿‘è¯»ç­‰ã€‚</p>
<h2 data-id="heading-11">å¾€æœŸå›é¡¾</h2>
<p>1.Â Golang HTTPè¯·æ±‚è¶…æ—¶ä¸é‡è¯•ï¼šæ„å»ºé«˜å¯é ç½‘ç»œè¯·æ±‚ï½œå¾—ç‰©æŠ€æœ¯</p>
<p>2.Â RNä¸hawkç¢°æ’çš„ç«èŠ±ä¹‹C++å¼‚å¸¸æ•è·ï½œå¾—ç‰©æŠ€æœ¯</p>
<p>3.Â å¾—ç‰©TiDBå‡çº§å®è·µ</p>
<p>4.Â å¾—ç‰©ç®¡ç†ç±»ç›®é…ç½®çº¿ä¸ŠåŒ–ï¼šä»ä¸šåŠ¡ç—›ç‚¹åˆ°æŠ€æœ¯å®ç°</p>
<p>5.Â å¤§æ¨¡å‹å¦‚ä½•é©æ–°æœç´¢ç›¸å…³æ€§ï¼Ÿæ™ºèƒ½å‡çº§è®©æœç´¢æ›´â€œæ‡‚ä½ â€ï½œå¾—ç‰©æŠ€æœ¯</p>
<h2 data-id="heading-12">æ–‡ /ç«¹å¾„</h2>
<p>å…³æ³¨å¾—ç‰©æŠ€æœ¯ï¼Œæ¯å‘¨æ›´æ–°æŠ€æœ¯å¹²è´§</p>
<p>è¦æ˜¯è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿è¯„è®ºè½¬å‘ç‚¹èµï½</p>
<p>æœªç»å¾—ç‰©æŠ€æœ¯è®¸å¯ä¸¥ç¦è½¬è½½ï¼Œå¦åˆ™ä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MinIOçš„å®‰è£…è®°å½•]]></title>    <link>https://juejin.cn/post/7574382900860338203</link>    <guid>https://juejin.cn/post/7574382900860338203</guid>    <pubDate>2025-11-20T06:42:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574382900860338203" data-draft-id="7574568258801795099" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MinIOçš„å®‰è£…è®°å½•"/> <meta itemprop="keywords" content="åç«¯,GitHub,Java"/> <meta itemprop="datePublished" content="2025-11-20T06:42:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èå­è±è±çˆ±æ‰“æ€ª"/> <meta itemprop="url" content="https://juejin.cn/user/1239904847403927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MinIOçš„å®‰è£…è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904847403927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èå­è±è±çˆ±æ‰“æ€ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:42:24.000Z" title="Thu Nov 20 2025 06:42:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘æˆ‘çš„å¼€æº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F598572%2Fxzll-im-server" target="_blank" title="https://github.com/598572/xzll-im-server" ref="nofollow noopener noreferrer">IMç³»ç»Ÿ</a> å› ä¸ºè¦å°† <em>å¤´åƒ / å›¾ç‰‡ / éŸ³è§†é¢‘ / æ–‡ä»¶</em> ä¹‹ç±»çš„æ¶ˆæ¯ä¿å­˜åˆ°minioï¼Œ æ•°æ®åº“ä¸­ä»…å­˜ä¸ªurlï¼Œ æ‰€ä»¥éœ€è¦ä¸€ä¸ªminioæœåŠ¡ã€‚è¿™é‡Œè®°å½•ä¸‹æ­å»ºè¿‡ç¨‹ï¼Œä»…æ­¤è€Œå·²ã€‚</p>
<h2 data-id="heading-0">ä¸‹è½½</h2>
<p>æˆ‘è¿™é‡Œç§‘å­¦ä¸Šç½‘äº† æ‰€ä»¥ç›´æ¥ä¸‹è½½é€Ÿåº¦å¯ä»¥ï¼Œæ²¡æœ‰çš„è¯éœ€è¦æ‰¾å›½å†…çš„é•œåƒï¼Œæˆ‘è¿™ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶åŒ…ã€‚</p>
<p>wget <a href="https://link.juejin.cn?target=https%3A%2F%2Fdl.min.io%2Fserver%2Fminio%2Frelease%2Flinux-amd64%2Fminio" target="_blank" title="https://dl.min.io/server/minio/release/linux-amd64/minio" ref="nofollow noopener noreferrer">dl.min.io/server/miniâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d304ad4131c2409c9547df60769c81fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6J2O5a2Q6I6x6I6x54ix5omT5oCq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225772&amp;x-signature=0ENrDBYiPcgYXbnIsKRTBUepgUs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">é…ç½®minio</h2>
<p>åˆ›å»ºæ•°æ®ç›®å½•ï¼š
mkdif -p /home/hzz/minio/data</p>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼š
mkdif -p /home/hzz/minio/config</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e65c1fcea784705bdc2db2fc5fd3c30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6J2O5a2Q6I6x6I6x54ix5omT5oCq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225772&amp;x-signature=1BRsYDyZZOchK8q03Cu%2BzH5Zw%2BA%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">sudo tee /home/hzz/minio/config/config.json &gt; /dev/null &lt;&lt; <span class="hljs-string">'EOF'</span>
{
    <span class="hljs-string">"version"</span>: <span class="hljs-string">"1"</span>,
    <span class="hljs-string">"credential"</span>: {
        <span class="hljs-string">"accessKey"</span>: <span class="hljs-string">"admin"</span>,
        <span class="hljs-string">"secretKey"</span>: <span class="hljs-string">"1234"</span>
    },
    <span class="hljs-string">"region"</span>: <span class="hljs-string">"us-east-1"</span>,
    <span class="hljs-string">"browser"</span>: <span class="hljs-string">"on"</span>,
    <span class="hljs-string">"storageclass"</span>: {
        <span class="hljs-string">"standard"</span>: <span class="hljs-string">""</span>
    }
}
EOF
</code></pre>
<p>å¦å¤–è®°å¾—ï¼š</p>
<p><strong>ç¡®ä¿minioäºŒè¿›åˆ¶æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™ï¼š</strong></p>
<p>chmod +x /home/hzz/minio/minio</p>
<p><strong>ç¡®ä¿configå’Œdataç›®å½•å¯è¯»å†™ï¼š</strong></p>
<p>chmod 755 /home/hzz/minio/config</p>
<p>chmod 755 /home/hzz/minio/data</p>
<h2 data-id="heading-2">ä½¿ç”¨systemdç®¡ç†minio</h2>
<pre><code class="hljs language-ini" lang="ini">sudo tee /etc/systemd/system/minio.service &gt; /dev/null &lt;&lt; 'EOF'
<span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=MinIO Object Storage Server
<span class="hljs-attr">Documentation</span>=https://docs.min.io
<span class="hljs-attr">After</span>=network.target

<span class="hljs-section">[Service]</span>
<span class="hljs-attr">Type</span>=simple
<span class="hljs-attr">User</span>=root
<span class="hljs-attr">Group</span>=root
<span class="hljs-attr">WorkingDirectory</span>=/home/hzz/minio
<span class="hljs-attr">ExecStart</span>=/home/hzz/minio/minio server \
          --config-dir /home/hzz/minio/config \
          --address ":9000" \
          --console-address ":9001" \
          /home/hzz/minio/data

<span class="hljs-attr">Restart</span>=always
<span class="hljs-attr">RestartSec</span>=<span class="hljs-number">5</span>

<span class="hljs-comment"># å®‰å…¨è®¾ç½®</span>
<span class="hljs-attr">NoNewPrivileges</span>=<span class="hljs-literal">yes</span>
<span class="hljs-attr">LimitNOFILE</span>=<span class="hljs-number">65536</span>

<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
EOF
</code></pre>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡æ–°åŠ è½½systemdé…ç½®</span>
sudo systemctl daemon-reload

<span class="hljs-comment"># å¯åŠ¨MinIOæœåŠ¡</span>
sudo systemctl start minio

<span class="hljs-comment"># è®¾ç½®å¼€æœºè‡ªå¯</span>
sudo systemctl <span class="hljs-built_in">enable</span> minio

<span class="hljs-comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
sudo systemctl status minio

<span class="hljs-comment"># æŸ¥çœ‹å®æ—¶æ—¥å¿—</span>
sudo journalctl -u minio -f
</code></pre>
<h2 data-id="heading-3">æŸ¥çœ‹æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9052a8deda6140f5b3c545b7b3a59837~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6J2O5a2Q6I6x6I6x54ix5omT5oCq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225772&amp;x-signature=%2B5WNga79UPIS3PwJiQK98pCaEGQ%3D" alt="image.png" loading="lazy"/></p>
<p>è®¿é—®web-ui:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70880ff72bcd4153a489af7df60ecb31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6J2O5a2Q6I6x6I6x54ix5omT5oCq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764225772&amp;x-signature=nmn0V6stC%2BoEwb%2F2gYbzMwJaPYI%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•é—®â€œå¦‚ä½•è®¾è®¡å¯æ‰©å±• Buttonâ€ï¼Ÿæˆ‘ç»™ä»–çœ‹äº†ä¹‹åä»–ç«–èµ·äº†å¤§æ‹‡æŒ‡è¯´ç‰›ï¼]]></title>    <link>https://juejin.cn/post/7574382900860469275</link>    <guid>https://juejin.cn/post/7574382900860469275</guid>    <pubDate>2025-11-20T06:59:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574382900860469275" data-draft-id="7573239644155969563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•é—®â€œå¦‚ä½•è®¾è®¡å¯æ‰©å±• Buttonâ€ï¼Ÿæˆ‘ç»™ä»–çœ‹äº†ä¹‹åä»–ç«–èµ·äº†å¤§æ‹‡æŒ‡è¯´ç‰›ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-11-20T06:59:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•é—®â€œå¦‚ä½•è®¾è®¡å¯æ‰©å±• Buttonâ€ï¼Ÿæˆ‘ç»™ä»–çœ‹äº†ä¹‹åä»–ç«–èµ·äº†å¤§æ‹‡æŒ‡è¯´ç‰›ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T06:59:41.000Z" title="Thu Nov 20 2025 06:59:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆæ‰“ç€å“ˆæ¬ ï¼Œçœ¼çš®æ‰“æ¶ï¼‰ä½ è¯´ä½ å†™çš„ç»„ä»¶åº“æ‹“å±•æ€§å¾ˆå¥½ï¼Œæ€ä¹ˆè¯æ˜å‘¢ï¼Ÿ</p>
<p><strong>æˆ‘</strong>ï¼šï¼ˆè‡ªä¿¡æ»¡æ»¡ï¼‰æ‚¨ç›´æ¥å»æˆ‘çš„ç»„ä»¶åº“å®˜ç½‘çœ‹ï¼Œè¿™æ˜¯ä¼ ç»Ÿç»„ä»¶åº“æ ·å¼ï¼Œå¤§å®¶éƒ½èƒ½åšï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2941af4113c54b64983c3fef50fe4650~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764226781&amp;x-signature=dUdM8prxaJd7OOyGnD1q%2BA4JZso%3D" alt="image.png" loading="lazy"/></p>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fbutton%2Fexample%2Ftailwind-traditional-example" target="_blank" title="https://www.frontlight.tech/button/example/tailwind-traditional-example" ref="nofollow noopener noreferrer">ä¸Šå›¾é¡µé¢åœ°å€</a></p>
<p><strong>æˆ‘</strong>ï¼šï¼ˆåˆ‡æ¢é¡µé¢ï¼‰ç„¶åè¿™æ˜¯æˆ‘ç”¨è‡ªå·±å†™çš„ <code>@t-headless-ui/react</code> ä¸­çš„åŒä¸€ä¸ª <code>Button</code> ç»„ä»¶ï¼Œåªæ˜¯ç¨å¾®æ”¹äº†ä¸‹æ ·å¼ã€‚æ¯”å¦‚ä½ æƒ³è¦åƒç´ é£æ ¼ï¼Œè¯·çœ‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4f84a65c1f74597b32400786703988b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764226781&amp;x-signature=vb9bIEYHJ73HrYmS%2B7Z9YCe6D1o%3D" alt="image.png" loading="lazy"/></p>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fbutton%2Fexample%2Ftailwind-pixel-example" target="_blank" title="https://www.frontlight.tech/button/example/tailwind-pixel-example" ref="nofollow noopener noreferrer">ä¸Šå›¾é¡µé¢åœ°å€</a></p>
<p>ï¼ˆå¦‚æœæ‚¨è§‰å¾—ä¸é”™ï¼Œè¯·æ±‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github ä¸€ä¸ªèµ</a>ï¼Œæˆ‘ä¸€å®šä¼šæ‹“å±•æ‰€æœ‰ä¸»æµç»„ä»¶åˆ°å…¶ä¸­çš„ï¼ï¼‰</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆåŸæœ¬æ˜æ˜æ¬²ç¡ï¼Œçªç„¶çªå¤§çœ¼ç›ï¼Œä»å‡³å­ä¸Šä¸€è·ƒè€Œèµ·ï¼‰<strong>"å§æ§½ï¼å…„å¼Ÿï¼ä½ è¿™...è¿™æ€ä¹ˆåšåˆ°çš„ï¼Ÿï¼"</strong></p>
<p><strong>æˆ‘</strong>ï¼šï¼ˆæ·¡å®šä¸€ç¬‘ï¼‰æ— å®ƒï¼Œheadless ç»„ä»¶åº“è€Œå·²ï¼</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆæ‰¶äº†æ‰¶æƒŠæ‰çš„ä¸‹å·´ï¼‰"headless ç»„ä»¶åº“æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"</p>
<p><strong>æˆ‘</strong>ï¼š"ç®€å•è¯´å°±æ˜¯â€”â€”æˆ‘ä»¬åªæä¾›JavaScripté€»è¾‘å’ŒåŠŸèƒ½ï¼Œæ ·å¼ä½ çˆ±å’‹å†™å’‹å†™ï¼ç”šè‡³è¿DOMç»“æ„éƒ½éšä¾¿ä½ æŠ˜è…¾ï¼"</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆæ²‰é»˜ä¸‰ç§’ï¼Œçªç„¶èµ·èº«æ¡ä½æˆ‘çš„æ‰‹ï¼‰<strong>"å¥½ï¼æˆ‘æœï¼æ˜å¤©å°±æ¥ä¸Šç­ï¼å·¥èµ„ä½ éšä¾¿å¼€ï¼"</strong></p>
<p>å½“ç„¶ï¼Œä¸Šé¢åªæ˜¯ä¸€ä¸ªå°ç©ç¬‘ï¼Œå“ˆå“ˆï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹ï¼Œå¦‚ä½•å†™ä¸€ä¸ªåƒç´ é£æ ¼çš„ <code>button</code> ä»¥åŠä¸ºå•¥æˆ‘çš„ <code>headless</code> button ç¨å¾®æ”¹ä¸€ä¸‹æ ·å¼ï¼Œå°±å¯ä»¥é€ ä¸€ä¸ªç”Ÿäº§çº§åˆ«èƒ½ç”¨çš„ <code>button</code> å‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒè¦ç”¨çš„ <code>button</code> éœ€è¦å…·å¤‡ä»€ä¹ˆæ ·çš„å±æ€§å‘¢ï¼Ÿ</p>
<h2 data-id="heading-1">button çš„çŠ¶æ€</h2>
<p>ä¸€ä¸ª <code>button</code> è‡³å°‘éœ€è¦ï¼š</p>
<ul>
<li>å®šä¹‰ <code>disabled</code> çŠ¶æ€ï¼Œåœ¨  <code>disabled</code> çŠ¶æ€ï¼Œ <code>click</code> äº‹ä»¶æ˜¯æ— æ³•ç”Ÿæ•ˆçš„</li>
<li>å®šä¹‰ <code>loading</code> çŠ¶æ€ï¼Œåœ¨  <code>loading</code> çŠ¶æ€ï¼Œ <code>click</code> äº‹ä»¶åŒæ ·æ˜¯æ˜¯æ— æ³•ç”Ÿæ•ˆçš„</li>
</ul>
<p>åœ¨ <code>headless</code> ä¹Ÿå°±æ˜¯æ— æ ·å¼ç»„ä»¶çš„å±‚é¢ä¸Šï¼Œåšåˆ°æ‹¦æˆªè¿™ä¸¤ä¸ªå±æ€§çš„ <code>click</code> äº‹ä»¶å°±è¶³å¤Ÿäº†.</p>
<p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œåªæ˜¯å› ä¸º <code>button</code> çš„å¤æ‚åº¦æ›´å¤šåœ¨äºå®šåˆ¶æ ·å¼ï¼Œæ‰€ä»¥ <code>headless</code> ç»„ä»¶åº“çš„ <code>button</code> å¾ˆå®¹æ˜“å®ç°ã€‚</p>
<p>æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-keyword">const</span> <span class="hljs-attr">handleClick</span>: <span class="hljs-title class_">MouseEventHandler</span> = (event): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (loading || disabled) {
      <span class="hljs-comment">// é˜»æ­¢æŒ‰é’®é»˜è®¤è¡Œä¸ºï¼Œé˜²æ­¢åœ¨ loading æˆ– disabled çŠ¶æ€ä¸‹æ„å¤–æäº¤è¡¨å•æˆ–è§¦å‘å…¶ä»–é»˜è®¤äº‹ä»¶</span>
      event?.<span class="hljs-property">preventDefault</span>?.();
      <span class="hljs-keyword">return</span>;
    }
    onClick?.(event);
  };
</code></pre>
<p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯´æ ·å¼ï¼Œæ ·å¼çš„éš¾åº¦ä¸»è¦åœ¨äºçŠ¶æ€å¾ˆå¤šï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å„ç§ä¸»é¢˜è‰²
<ul>
<li>primaryï¼šä¸»è‰²</li>
<li>success: æˆåŠŸè‰²</li>
<li>errorï¼šå¤±è´¥é¢œè‰²</li>
<li>ã€‚ã€‚ã€‚
ç„¶åæ¯ä¸ªçŠ¶æ€éƒ½åˆ†ä¸ºï¼Œdefault çŠ¶æ€ï¼Œdisabled çŠ¶æ€ï¼Œloading çŠ¶æ€</li>
</ul>
</li>
<li>å„ç§é£æ ¼
<ul>
<li>æœ‰èƒŒæ™¯è‰²çš„é£æ ¼</li>
<li>åªæœ‰è¾¹æ¡†çš„é£æ ¼</li>
<li>ã€‚ã€‚ã€‚</li>
<li/>
</ul>
</li>
</ul>
<p>ç„¶åæ¯ä¸ªçŠ¶æ€éƒ½åˆ†ä¸ºï¼Œdefault çŠ¶æ€ï¼Œdisabled çŠ¶æ€ï¼Œloading çŠ¶æ€</p>
<p>è¿˜æœ‰éœ€è¦è€ƒè™‘ focus ä¸Šçš„é¢œè‰²çŠ¶æ€ï¼Œhover çš„é¢œè‰²çŠ¶æ€ã€‚</p>
<p>è¿™æ‰æ˜¯ä¸€ä¸ª <code>button</code> çœŸæ­£å¤æ‚çš„ç‚¹ï¼</p>
<p>å¦‚æœä½ æƒ³å­¦é€ ç»„ä»¶åº“ï¼Œæ¬¢è¿åŠ å…¥ï¼Œæˆ‘ä»¬è¶…çº§å¯æ‹“å±•çš„ headless ç»„ä»¶åº“äº¤æµç¾¤ï¼ˆè¿˜æœ‰åŒ…è£…ç®€å†æœåŠ¡å“¦ï¼ï¼‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank" title="https://www.frontlight.tech/" ref="nofollow noopener noreferrer">ä¸»é¡µ</a></p>
<p>æˆ‘ä»¬ç°åœ¨ä¸ºäº†è¯´æ˜è¿™ä¸ªåƒç´  <code>button</code> å®ç°çš„æ€è·¯ï¼Œæˆ‘ä»¬åŒ–ç¹ä¸ºç®€ï¼Œå‡è®¾åªæœ‰ 1 ç§é¢œè‰²ï¼Œ1 ç§é£æ ¼ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60bbb643f7ea4e1487c86dd7434a160a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764226781&amp;x-signature=HFckUoIDiW8NAGvfbus4Ww2v3nk%3D" alt="image.png" loading="lazy"/></p>
<p>è¯´æ˜å®ç°æ€è·¯æ˜¯å¦‚ä½•ï¼Œå¤§å®¶å¯ä»¥è§¦ç±»æ—é€šï¼</p>
<h2 data-id="heading-2">å¦‚ä½•åˆ¶ä½œå‡ºåƒç´ æ•ˆæœ</h2>
<p>ä»ä¸Šé¢å›¾å¯ä»¥çœ‹å‡ºï¼Œæœ€æ˜æ˜¾çš„åƒç´ æƒ³è¿‡å°±æ˜¯æˆ‘ä»¬æ­»è§’éƒ½æ˜¯ <code>transparent</code>ï¼ˆé€æ˜è‰²ï¼‰ï¼Œè¿™ä¸ªæ˜æ˜¾æ˜¯ <code>border</code> å®ç°ä¸äº†çš„ã€‚é‚£å¦‚ä½•åšå‘¢ï¼Ÿ</p>
<p>ç§˜å¯†å°±æ˜¯ <code>box-shadow</code> !</p>
<p>æˆ‘ä»¬å…ˆä¸¾ä¸€ä¸ªå°ä¾‹å­ï¼Œä½ çœ‹çœ‹ <code>box-shadow</code> å¦‚ä½•ä½¿ç”¨ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸‹è¾¹æ¡†ï¼Œ<code>box-shadow</code> è®¾ç½®ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> black;
</code></pre>
<p>å…¶ä¸­ 0 ä»£è¡¨æ¨ªå‘çš„åç§»é‡ï¼Œæˆ‘ä»¬æ˜¯ 0 ï¼Œä¹Ÿå°±æ˜¯æ¨ªè½´ä¸Šä»€ä¹ˆä¹Ÿä¸åšï¼Œ5px ä»£è¡¨åœ¨ç«–ç›´æ–¹å‘ä¸Šå‘ä¸‹åˆ¶é€ ä¸€ä¸ª <code>5px</code> çš„ <code>shadow</code>, ç„¶åé¢œè‰²è®¾ç½®ä¸º <code>black</code> ä¹Ÿå°±æ˜¯é»‘è‰²ï¼Œè¯·çœ‹è¿™ä¸ªæŒ‰é’®ä¸‹æ–¹å¤šäº†ä¸€æ¡é»‘è‰²</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a63a82e95224dcba323b9193fd96415~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764226781&amp;x-signature=YR982HGQBA%2BFo9P%2FaVIUfJz8sBo%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ç€ï¼Œæˆ‘ä»¬ä¾è‘«èŠ¦ç”»ç“¢ï¼ŒåŠ ä¸Š ä¸Šé¢çš„ <code>shadow</code>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> black, <span class="hljs-number">0</span> -<span class="hljs-number">5px</span> black;
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4903f5dd7e8433e9affbafa6bff3d24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764226781&amp;x-signature=p8z0VMhd5J0seZw%2Bq0RMNA3CuXU%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ç€å³è¾¹æˆ‘ä»¬ä¹ŸåŠ ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> black, <span class="hljs-number">0</span> -<span class="hljs-number">5px</span> black, <span class="hljs-number">5px</span> <span class="hljs-number">0</span> black;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d662b0bec27495db7e0e2585ef7d0fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764226781&amp;x-signature=XFIe%2FLdClviCLzz8XxNiDYTP7pk%3D" alt="image.png" loading="lazy"/></p>
<p>æ˜¯ä¸æ˜¯æœ‰æ„Ÿè§‰äº†ï¼Œ<code>shadow</code> è·Ÿ <code>border</code> æœ€å¤§çš„ä¸åŒå°±æ˜¯è¾¹è§’ä¸ä¼šå¡«å……é¢œè‰²ï¼Œç„¶åæ¥ç€ï¼Œæˆ‘ä»¬åŠ ä¸Šåˆè¾¹æ¡†ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> black, <span class="hljs-number">0</span> -<span class="hljs-number">5px</span> black, <span class="hljs-number">5px</span> <span class="hljs-number">0</span> black, -<span class="hljs-number">5px</span> <span class="hljs-number">0</span> black;
</code></pre>
<p>æœ€åæˆ‘ä»¬å†æ¶¦è‰²ä¸€ä¸‹ï¼ŒåŠ ä¸€ä¸ªä¸Šé˜´å½±ï¼Œå¢åŠ ç«‹ä½“æ„Ÿï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0ed5095887a4492afd1ae8534dabc1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764226781&amp;x-signature=p9aLngaGk4XJU24z89oDA5TyftU%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> black, <span class="hljs-number">0</span> -<span class="hljs-number">5px</span> black, <span class="hljs-number">5px</span> <span class="hljs-number">0</span> black, -<span class="hljs-number">5px</span> <span class="hljs-number">0</span> black, inset <span class="hljs-number">0px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0.21</span>);
</code></pre>
<p>å…¶ä¸­ <code>inset</code> çš„æ„æ€æ˜¯å¢åŠ å†…é˜´å½±ï¼Œä¹‹å‰æˆ‘ä»¬éƒ½æ˜¯å¤–é˜´å½±ï¼Œ<code>rgba(255,255,255,0.21)</code> æ˜¯æŒ‡ç™½è‰²ï¼Œç„¶å 0.21 çš„é€æ˜åº¦ã€‚</p>
<h2 data-id="heading-3">åˆå§‹åŒ– button</h2>
<p>åœ¨æˆ‘ä»¬è®¾ç½® <code>box-shadow</code> ä¹‹å‰ï¼Œè¿™ä¸ª <code>button</code> èƒŒæ™¯è‰²ï¼Œå­—ä½“è¿™äº›è¿˜æ²¡åˆå§‹åŒ–ï¼Œæˆ‘ä»¬å…ˆæ¥è¡¥ä¸Šè¿™ä¸ªçŸ¥è¯†</p>
<pre><code class="hljs language-css" lang="css">{
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-attribute">display</span>: inline-flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
    user-select: none;
    <span class="hljs-attribute">padding-top</span>: .<span class="hljs-number">25rem</span>;
    <span class="hljs-attribute">padding-bottom</span>: .<span class="hljs-number">25rem</span>;   
    <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">1.25rem</span>;
    <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">1.25rem</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">88</span>,<span class="hljs-number">199</span>,<span class="hljs-number">192</span>);
    <span class="hljs-attribute">border-width</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0</span>;
}
</code></pre>
<p>å¥½äº†åˆå§‹åŒ–å®Œæ¯•ï¼Œæˆ‘ä»¬å¼€å§‹å¤„ç†å„ç§çŠ¶æ€ï¼š</p>
<h2 data-id="heading-4">hover çŠ¶æ€</h2>
<p>hover çŠ¶æ€æˆ‘ä»¬ç”¨äº†ä¸€ä¸ª filter å‡½æ•°ï¼Œå¢åŠ äº®åº¦ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">filter</span>:<span class="hljs-built_in">brightness</span>(<span class="hljs-number">1.05</span>)
</code></pre>
<p>ä½†æ˜¯åŒæ—¶æ³¨æ„ï¼Œåœ¨ <code>disabled</code> å’Œ <code>loading</code> çŠ¶æ€ hover æ— æ•ˆã€‚åœ¨ react ä¸€èˆ¬éƒ½è¦ä½¿ç”¨ <code>classnames</code> åº“ï¼Œ<code>tailwindcss</code> è¿˜è¦å°† <code>classnames</code> å’Œ <code>tailwindcss-merge</code> åº“ç»“åˆï¼Œ vue å¥½åƒå¤©ç„¶å¯¹äº css çš„æ¡ä»¶åˆ¤æ–­å°±æ”¯æŒçš„ä¸é”™ã€‚</p>
<p>ç±»ä¼¼ä»£ç å¦‚ä¸‹ï¼ˆä¸åŒçš„æ¡†æ¶å’Œä½¿ç”¨çš„ <code>css</code> æ¡†æ¶ä¸åŒï¼Œä»£ç è‚¯å®šæœ‰ä¸åŒï¼Œè¿™ä¸ªå¾ˆç®€å•ï¼Œå¤§å®¶çœ‹å¾—æ‡‚æ„æ€å³å¯ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">{
   <span class="hljs-string">'hover:brightness-105'</span>: !disabled &amp;&amp; !loading
}
</code></pre>
<p>'hover:brightness-105' æ˜¯ <code>tailwindcss</code> ä¸­çš„ç±»å, å¯¹äºæ™®é€šçš„ <code>css</code> ä½ åªè¦æ¢æˆä½ å¸Œæœ›çš„ç±»åï¼Œç„¶åå¼•å…¥å¯¹åº”çš„ <code>css</code> æ–‡ä»¶å³å¯ï¼ˆåœ¨ <code>css</code> æ–‡ä»¶é‡Œå®ç°è¿™ä¸ª hover çš„ cssï¼‰.</p>
<h2 data-id="heading-5">active çŠ¶æ€</h2>
<p>active çŠ¶æ€ï¼Œæˆ‘ä»¬åªæ˜¯æŠŠå†…é˜´å½±å˜é»‘äº†ï¼Œç»™äººä¸€ç§å‡¹å‡¸ä¸‹å»çš„æ„Ÿè§‰ã€‚ active ä¸‹çš„ <code>box-shadow</code> å˜ä¸º</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0px</span> <span class="hljs-number">5px</span> black,<span class="hljs-number">0px</span> -<span class="hljs-number">5px</span> black,<span class="hljs-number">5px</span> <span class="hljs-number">0px</span> black,-<span class="hljs-number">5px</span> <span class="hljs-number">0px</span> black,inset <span class="hljs-number">0px</span> <span class="hljs-number">5px</span> <span class="hljs-number">#00000038</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°åªæ˜¯æœ€å <code>inset</code> ä¸­çš„é¢œè‰²å˜æ·±äº†ï¼Œå…¶å®ƒéƒ½æ²¡æœ‰å˜ã€‚</p>
<h2 data-id="heading-6">å¤„ç† disabled çŠ¶æ€</h2>
<p>è¿™ä¸ªçŠ¶æ€å…¶å®éœ€è¦åˆ¤æ–­ï¼Œæ¯”å¦‚ disabled çš„æ—¶å€™ <code>cursor</code> ï¼Œä¹Ÿå°±æ˜¯é¼ æ ‡æ˜¾ç¤ºä¸€ä¸ªç¦æ­¢ç‚¹å‡»çš„çŠ¶æ€ï¼Œè¿™æ ·æœ‰åˆ©äºå‘Šè¯‰ç”¨æˆ·æ­¤æ—¶ç‚¹å‡»æ— æ•ˆã€‚</p>
<p>ç±»ä¼¼çš„å¢åŠ å¯¹ <code>disabled</code> çŠ¶æ€çš„å¤„ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">{
    <span class="hljs-string">'opacity-50 cursor-not-allowed'</span>: disabled, <span class="hljs-comment">// disabled æ—¶é€æ˜åº¦é™ä½ï¼Œcursor å˜ä¸º not-allowed</span>
}
</code></pre>
<h2 data-id="heading-7">å­—ä½“æ›´æƒ³åƒç´ çš„æ ·å­</h2>
<p>è¿™ä¸ªæœ€å¥½æ˜¯æœç´¢æœ‰åƒç´ é£æ ¼çš„å­—ä½“æ ·å¼ï¼Œæˆ‘æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦ä¸­ï¼Œç±»ä¼¼æœ‰åƒç´ é£æ ¼çš„å­—ä½“ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒï¼Œå…¼å®¹<code>mac</code>å’Œ <code>windows</code></p>
<pre><code class="hljs language-css" lang="css">{
    <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'</span>Lucida_Console<span class="hljs-string">','</span>Courier_New<span class="hljs-string">',monospace'</span>
}
</code></pre>
<h2 data-id="heading-8">dark æ¨¡å¼</h2>
<p>æˆ‘ä½¿ç”¨çš„æ˜¯ <code>tailwindcss</code> å¤©ç„¶å¯¹ <code>dark</code> æ¨¡å¼å¯ä»¥è‡ªå®šä¹‰é¢œè‰²ï¼Œå›½å†…å¾ˆå¤šäººä¸ä½¿ç”¨ <code>taiwindcss</code> è¿™é‡Œå°±ä¸èµ˜è¿°äº†</p>
<h2 data-id="heading-9">å°æ€»ç»“</h2>
<p>è¿™é‡Œå°±ç»“æŸäº†ï¼Œè¿™ä¸€ç§çŠ¶æ€çœ‹èµ·æ¥ä»£ç ä¸å¤šï¼Œå…¶å®çŠ¶æ€å’Œé¢œè‰²å¤šäº†ä¹‹åï¼Œ<code>css</code> ä»£ç ä¼šéå¸¸å¤šã€‚æœ€åï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ° <code>headless</code> ç»„ä»¶çš„å¥½å¤„å°±æ˜¯è·Ÿæ ·å¼æ²¡æœ‰ä»»ä½•è€¦åˆï¼Œéšä¾¿ç”¨å„ç§ <code>css</code> æ¡†æ¶è‡ªå·±å¤„ç†ï¼Œå®ƒçš„å¥½å¤„æˆ‘ä¼šåœ¨åé¢çš„æ–‡ç« ç»§ç»­ä»‹ç»ï¼Œä¾‹å¦‚ <code>radio</code> ç»„ä»¶ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å•é€‰ï¼Œæˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šç»„ä»¶åº“éƒ½æ˜¯ä¸€ä¸ªåœ†å½¢æŒ‰é’®çš„æ ·å¼ï¼Œå…¶å®è°è§„å®šäº†å¿…é¡»æ˜¯è¿™ä¸ªæ ·å¼ï¼Ÿæˆ‘å¯ä»¥æ˜¯ä»»ä½•åªè¦æ»¡è¶³å•é€‰çš„æ ·å¼å³å¯ã€‚</p>
<p>æ‰€ä»¥åç»­ä¼šæœ‰å¾ˆå¤šæœ‰è¶£çš„ä¸»é¢˜åŠ å…¥è¿›æ¥ï¼ŒåŒ…æ‹¬<code>button</code>ï¼Œä¹Ÿä¼šæŒç»­æ›´æ–°æ›´é‡å¥½ç©çš„æ ·å¼å’ŒåŠ¨ç”»ï¼</p>
<p>æœ€åä½ åˆ°çœ‹åˆ°è¿™é‡Œäº†ï¼Œæ¬¢è¿å„ä½å¤§ä¾ æ¥ç»„ä»¶åº“äº¤æµç¾¤äº¤æµï¼Œä¹Ÿå¸Œæœ›å„ä½å¤§ä¾ ç»™ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">githubçš„èµ</a>ï¼Œå˜¿å˜¿</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js + puppeteer + chrome ç¯å¢ƒéƒ¨ç½²è‡³linux]]></title>    <link>https://juejin.cn/post/7574382925761691686</link>    <guid>https://juejin.cn/post/7574382925761691686</guid>    <pubDate>2025-11-20T05:23:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574382925761691686" data-draft-id="7574625040630661158" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js + puppeteer + chrome ç¯å¢ƒéƒ¨ç½²è‡³linux"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-20T05:23:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zhou770377"/> <meta itemprop="url" content="https://juejin.cn/user/1082340230562679"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js + puppeteer + chrome ç¯å¢ƒéƒ¨ç½²è‡³linux
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1082340230562679/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zhou770377
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T05:23:04.000Z" title="Thu Nov 20 2025 05:23:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h5 data-id="heading-0">è¸©å‘æ•´æ•´5å¤©æ‰å’Œè¿ç»´å¤§å“¥éƒ¨ç½²æˆåŠŸâ€¦â€¦</h5>
<h3 data-id="heading-1">å…ˆè¯´ä¸‹å…·ä½“çš„æ€è·¯ï¼Œå› ä¸ºpuppeteerçš„è¿è¡Œå¿…é¡»ä¾èµ–äºæµè§ˆå™¨ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯chrome,</h3>
<p>æ­¤å¤„å®‰è£…æµè§ˆå™¨çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œ
æ˜¯å› ä¸ºpuppeteeræä¾›äº†ä¸¤ç§è¿æ¥è°ƒè¯•æµè§ˆå™¨çš„æ–¹æ¡ˆ
è¿æ¥å·²æœ‰çš„æµè§ˆå™¨å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ”— è¿æ¥åˆ°æœ¬åœ°Chromeæµè§ˆå™¨..."</span>);
      <span class="hljs-keyword">const</span> browserURL = <span class="hljs-string">'http://localhost:9222'</span>; <span class="hljs-comment">//   æµè§ˆå™¨æœåŠ¡å¯åŠ¨ä¹‹åå¯ä»¥ç›´æ¥è®¿é—®</span>
      
     <span class="hljs-comment">/*   
     
     
     é¿å‘ï¼šè¿™é‡Œä¼šæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯é¡µé¢ä¼šä¸€ç›´ä¿å­˜åœ¨ å¯¹åº”ç«¯å£çš„æµè§ˆå™¨é¡µé¢åœ¨æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ çš„è„šæœ¬æ‰§è¡Œçš„ä»»åŠ¡æœ‰ç™»å½•çš„é€»è¾‘ï¼Œé‚£ä¹ˆä¸‹æ¬¡è„šæœ¬è¿è¡Œä¹‹åï¼Œä¼šç›´æ¥è®¿é—®åˆ°ç¬¬ä¸€æ¬¡ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç±»ä¼¼äºç”¨æˆ·è‡ªå·±æ“ä½œç™»å½•åï¼Œåç»­è¿›å…¥ä¹Ÿä¸ç”¨ç™»å½•æ˜¯ä¸€ä¸ªé€»è¾‘ã€‚
     
     è¿™é‡Œæ˜¯æœ¬åœ°è¿æ¥å’Œä½¿ç”¨è‡ªå¸¦çš„chromeçš„ä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«ï¼Œ
   è¯·åŠ¡å¿…åœ¨jsé€»è¾‘ä¸­åšå…¼å®¹å¤„ç†ï¼Œ
   
   å¦åˆ™ä½ ä¼šå‘ç°ï¼Œè¯¥æ¨¡å¼å’Œè‡ªå¸¦çš„æ¨¡å¼å‡ºç°ä¸ä¸€æ ·çš„ç»“æœï¼Œè€Œä¸çŸ¥é“é—®é¢˜æ‰€åœ¨ã€‚
     
     
        */</span>
      
      browser = <span class="hljs-keyword">await</span> puppeteer.<span class="hljs-title function_">connect</span>({
        <span class="hljs-attr">browserURL</span>: browserURL,
        <span class="hljs-attr">defaultViewport</span>: <span class="hljs-literal">null</span>
      });
      
      
    
      
      
      
      
      
      
      <span class="hljs-keyword">const</span> version = <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">version</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(version);
</code></pre>
<p>ä½¿ç”¨puppeteerè‡ªå¸¦çš„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯åŠ¨æ–°çš„æµè§ˆå™¨å®ä¾‹ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰</span>
      <span class="hljs-comment">// ä½¿ç”¨puppeteerè‡ªå¸¦çš„Chromiumï¼Œé¿å…ç³»ç»Ÿæµè§ˆå™¨ä¾èµ–</span>
      <span class="hljs-keyword">const</span> browserConfig = {
        <span class="hljs-attr">headless</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ä½¿ç”¨é…ç½®ä¸­çš„æ— å¤´æ¨¡å¼</span>
        <span class="hljs-comment">// ä¸æŒ‡å®šexecutablePathï¼Œè®©puppeteerä½¿ç”¨è‡ªå¸¦çš„æµè§ˆå™¨</span>
        <span class="hljs-attr">args</span>: [  <span class="hljs-comment">// ç›¸å…³é…ç½®å‚æ•°</span>
          ...config.<span class="hljs-property">browser</span>.<span class="hljs-property">args</span>,
          <span class="hljs-string">`--window-size=<span class="hljs-subst">${config.browser.windowSize.width}</span>,<span class="hljs-subst">${config.browser.windowSize.height}</span>`</span>,
          <span class="hljs-string">"--no-sandbox"</span>,
          <span class="hljs-string">"--disable-setuid-sandbox"</span>,
          <span class="hljs-string">"--disable-dev-shm-usage"</span>,
        ],
        <span class="hljs-attr">ignoreHTTPSErrors</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">defaultViewport</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">timeout</span>: <span class="hljs-number">6</span> * <span class="hljs-number">1000</span>,
      };

      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getTimestampedLog</span>(<span class="hljs-string">"ğŸ“± å¯åŠ¨æµè§ˆå™¨..."</span>));
      browser = <span class="hljs-keyword">await</span> puppeteer.<span class="hljs-title function_">launch</span>(browserConfig);
      <span class="hljs-keyword">const</span> version = <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">version</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(version);
</code></pre>
<h4 data-id="heading-2">ç¬¬ä¸€ç§å°±æ˜¯: ç›´æ¥ä½¿ç”¨ï¼Œpuppeteerè‡ªå·±çš„æµè§ˆå™¨ï¼Œç¼ºç‚¹æ˜¯: å®‰è£…æ…¢ï¼Œéƒ¨ç½²å¾ˆå®¹æ˜“å¤±è´¥</h4>
<h4 data-id="heading-3">ç¬¬äºŒå°±æ˜¯:ä¼šæœ‰ä»€ä¹ˆæƒé™é—®é¢˜å¯¼è‡´æ— æ³•å¯åŠ¨ ä¾‹å¦‚è¿™æ ·ï¼šï¼ˆè‡ªåŠ¨åŒ–æ“ä½œå¤±è´¥ï¼šFailed to launch the browser process: spawn /root/.cache/puppeteer/chrome/1inux-142.0.7444.61/chrome-1inux64/chrome ENOEï¼‰</h4>
<h2 data-id="heading-4">ç»¼ä¸Šæ‰€è¿°ï¼š</h2>
<p>æœ¬æ–‡é‡‡ç”¨ç¬¬äºŒæ¡è·¯å°±æ˜¯ï¼Œå•ç‹¬å®‰è£…è¿è¡ŒchromeæœåŠ¡ï¼Œ
ç„¶åï¼Œç”¨puppeteeré“¾æ¥æœ¬åœ°çš„chromeæœåŠ¡ã€‚</p>
<h2 data-id="heading-5">1, å®‰è£…chrome å¹¶è¿è¡ŒæœåŠ¡è‡³9222ç«¯å£</h2>
<p>æ³¨æ„ï¼šæœ¬äººçš„æœåŠ¡å™¨æ˜¯cent os7ï¼ˆä¸‹é¢ä¸¤ç§æ–¹æ¡ˆéƒ½å¯ä»¥ç”¨ï¼Œ æ–¹æ¡ˆäºŒæ˜¯å› ä¸ºè¿ç»´çš„æœåŠ¡å™¨ï¼Œ ç³»ç»Ÿä¸æ”¯æŒæ–¹æ¡ˆä¸€ï¼Œ å› æ­¤æä¾›docker çš„æ–¹æ¡ˆï¼‰</p>
<h3 data-id="heading-6">chrome å®‰è£…</h3>
<h4 data-id="heading-7">æ–¹æ¡ˆä¸€ï¼š</h4>
<h5 data-id="heading-8">1, liunx å…ˆå®‰è£…ä¸€ä¸‹è°·æ­Œæµè§ˆå™¨</h5>
<pre><code class="hljs language-bash" lang="bash">sudo yum install https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm -y
</code></pre>
<h5 data-id="heading-9">2. å¯åŠ¨æµè§ˆå™¨ æ— å¤´æ¨¡å¼ å¼€æ”¾æœ¬åœ° 9222 ç«¯å£</h5>
<pre><code class="hljs language-bash" lang="bash">google-chrome-stable --no-sandbox --headless --disable-gpu --remote-debugging-port=9222
</code></pre>
<h4 data-id="heading-10">æ–¹æ¡ˆäºŒï¼šï¼ˆæå‰å®‰è£… docker ï¼‰</h4>
<h5 data-id="heading-11">æ‹‰å–é•œåƒ</h5>
<pre><code class="hljs language-bash" lang="bash">docker pull selenium/standalone-chrome
</code></pre>
<h5 data-id="heading-12">è¿è¡Œé•œåƒ</h5>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  -p 9222:9222 \
  -v /dev/shm:/dev/shm \
  --name chrome-debug \
  --entrypoint google-chrome \
  selenium/standalone-chrome \
  --remote-debugging-address=0.0.0.0 \
  --remote-debugging-port=9222 \
  --no-sandbox \
  --headless
</code></pre>
<h5 data-id="heading-13">æ£€æµ‹æ˜¯å¦è¿è¡ŒæˆåŠŸ</h5>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:9222/json/version
</code></pre>
<p>è¿è¡ŒæˆåŠŸä¼šè¾“å‡ºå¦‚ä¸‹çš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{
   <span class="hljs-string">"Browser"</span>: <span class="hljs-string">"Chrome/142.0.7444.162"</span>,
   <span class="hljs-string">"Protocol-Version"</span>: <span class="hljs-string">"1.3"</span>,
   <span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/142.0.0.0 Safari/537.36"</span>,
   <span class="hljs-string">"V8-Version"</span>: <span class="hljs-string">"14.2.231.18"</span>,
   <span class="hljs-string">"WebKit-Version"</span>: <span class="hljs-string">"537.36 (@c076baf266c3ed5efb225de664cfa7b183668ad6)"</span>,
   <span class="hljs-string">"webSocketDebuggerUrl"</span>: <span class="hljs-string">"ws://localhost:9222/devtools/browser/5f3804d2-146a-475c-a43a-c5e211387413"</span>
}
</code></pre>
<p>æœ‰å¦‚ä¸Šçš„ä¿¡æ¯ï¼Œæ­å–œä½ ï¼Œå·²ç»å®‰è£…æˆåŠŸäº†ï¼ï¼ï¼</p>
<p>2ï¼Œéƒ¨ç½²ä¸€ä¸‹ puppeteer çš„nodeæœåŠ¡ã€‚
è¿™é‡Œå°±çœ‹çœ‹ä»€ä¹ˆç‰ˆæœ¬çš„ puppeteer äº†ã€‚
æœ¬äººç”¨çš„æ–°ç‰ˆæœ¬çš„ "puppeteer": "^24.29.1"
node &gt; 18 å³å¯ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm install //å®‰è£…
node xxx.js // è¿è¡Œ
</code></pre>
<p>å¦‚æœå¤±è´¥äº†ï¼Œé…ç½®é•œåƒä»€ä¹ˆçš„å°±å¥½äº†ã€‚ï¼ˆä¸å¿…è¿‡å¤šèµ˜è¿°ï¼Œå‰ç«¯ä¼°è®¡éƒ½é‡åˆ°è¿‡ï¼‰</p>
<p>å¦‚ç»§ç»­å¤±è´¥ï¼Œè¿˜å¯ä»¥ä½¿ç”¨cnpm</p>
<pre><code class="hljs language-bash" lang="bash">npm i -g cnpm

cnpm install
</code></pre>
<p>å³å¯ï¼Œcnpmå‡ ä¹ä¸ä¼šå¤±è´¥ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">node xxx.js // å°±å¯ä»¥è¿è¡Œäº†ã€‚
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MarsUI å¼•å…¥é¡¹ç›®çš„ä½¿ç”¨è®°å½•]]></title>    <link>https://juejin.cn/post/7574451949325320233</link>    <guid>https://juejin.cn/post/7574451949325320233</guid>    <pubDate>2025-11-20T05:32:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574451949325320233" data-draft-id="7574451949324910633" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MarsUI å¼•å…¥é¡¹ç›®çš„ä½¿ç”¨è®°å½•"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-20T05:32:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="isixe"/> <meta itemprop="url" content="https://juejin.cn/user/107078962384456"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MarsUI å¼•å…¥é¡¹ç›®çš„ä½¿ç”¨è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/107078962384456/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    isixe
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T05:32:58.000Z" title="Thu Nov 20 2025 05:32:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="monokai-sublime">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#23241f}.hljs-subst,.hljs-tag,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#f8f8f2}.hljs-emphasis,.hljs-strong{color:#a8a8a2}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ae81ff}.hljs-code,.hljs-section,.hljs-selector-class,.hljs-title{color:#a6e22e}.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}.hljs-attr,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#f92672}.hljs-attribute,.hljs-symbol{color:#66d9ef}.hljs-class .hljs-title,.hljs-params{color:#f8f8f2}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-string,.hljs-template-variable,.hljs-type,.hljs-variable{color:#e6db74}.hljs-comment,.hljs-deletion,.hljs-meta{color:#75715e}</style><p>æœ€è¿‘å‡†å¤‡åšæ•°æ®å¤§å±çš„é¡¹ç›®ï¼Œæ‰¾äº†ä¸€äº›ç›¸å…³çš„UIæ§ä»¶ï¼Œé¡ºç€ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmarsgis%2Fmars3d-vue-example" target="_blank" title="https://github.com/marsgis/mars3d-vue-example" ref="nofollow noopener noreferrer">mars3d-vue-example</a></strong> ç„¶åæˆ‘å°±æ‰¾åˆ°äº†å®ƒå¼€æºçš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmarsgis%2Fmars3d-vue-example%2Ftree%2Fmaster%2Fsrc%2Fcomponents%2Fmars-ui" target="_blank" title="https://github.com/marsgis/mars3d-vue-example/tree/master/src/components/mars-ui" ref="nofollow noopener noreferrer">MarsUI</a> æ§ä»¶ã€‚ä½†æ˜¯è¿™ä¸ªæ§ä»¶åªæœ‰æºæ–‡ä»¶å½¢å¼çš„ï¼Œæ²¡æœ‰ä¸Šä¼ åˆ° npm åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¾—æ‰‹åŠ¨å¼•å…¥äº†ã€‚</p>
<h2 data-id="heading-0">ä¾èµ–å®‰è£…</h2>
<p>Mars3d çš„å¼€æºæ¨¡æ¿é¡¹ç›® <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmarsgis%2Fmars3d-vue-example" target="_blank" title="https://github.com/marsgis/mars3d-vue-example" ref="nofollow noopener noreferrer">mars3d-vue-example</a></strong> ä¸­ï¼Œæä¾›æœ‰ä¸€å¥—å®Œæ•´çš„æ§ä»¶æ ·æ¿çš„æºç æ–‡ä»¶ï¼Œè¿™äº›åŸºç¡€æ§ä»¶æ˜¯åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.antdv.com%2Fcomponents%2Foverview-cn%2F" target="_blank" title="https://www.antdv.com/components/overview-cn/" ref="nofollow noopener noreferrer">Ant Design Vue</a> ç»„ä»¶åº“çš„åŸºç¡€ä¸Šè¿›è¡Œç¼–å†™çš„ï¼ŒMard3d ä¸»è¦å°è£…äº†è¡¨å•æ§ä»¶ï¼Œæ‰€ä»¥æ‰€æœ‰æ§ä»¶ä¾èµ–äº <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.antdv.com%2Fcomponents%2Foverview-cn%2F" target="_blank" title="https://www.antdv.com/components/overview-cn/" ref="nofollow noopener noreferrer">Ant Design Vue</a>  ç»„ä»¶åº“ã€‚</p>
<p>è™½ç„¶åœ¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmarsgis%2Fmars3d-vue-example" target="_blank" title="https://github.com/marsgis/mars3d-vue-example" ref="nofollow noopener noreferrer">mars3d-vue-example</a></strong> ä¸­åˆ—å‡ºçš„ç›¸å…³ä¾èµ–ï¼Œä½†æ˜¯è¿™å¹¶ä¸å®Œå…¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83ca6cf7e5d449dba0b67f98199871bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaXNpeGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764221578&amp;x-signature=CN9AcN2D8lDGBdLZg64%2Fy3MxB3E%3D" alt="image.png" loading="lazy"/></p>
<p>å®é™…éœ€è¦çš„å®Œæ•´ä¾èµ–è¿˜å¾—è¡¥å…… 3 ä¸ªï¼Œç¼ºå°‘äº† lodash-esã€dayjs å’Œ less è¿™ä¸‰ä¸ªä¾èµ–</p>
<pre><code class="hljs language-json" lang="json">  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@icon-park/svg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.4.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@turf/turf"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^7.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ant-design-vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.0.7"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"consola"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.2.3"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"echarts"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.4.3"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"nprogress"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^0.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vite-plugin-style-import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vue-color-kit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.0.6"</span>
    <span class="hljs-comment">// ä»»æ„ç‰ˆæœ¬å®‰è£…</span>
    <span class="hljs-attr">"vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.5.13"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lodash-es"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.17.21"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dayjs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.11.19"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"less"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.4.2"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ pnpm å¿«é€Ÿå®‰è£…</p>
<pre><code class="hljs language-sh" lang="sh">npm install @icon-park/svg@^1.4.2 @turf/turf@^7.2.0 ant-design-vue@^4.0.7 consola@^3.2.3 echarts@^5.4.3 nprogress@^0.2.0 vite-plugin-style-import@^2.0.0 vue-color-kit@^1.0.6 vue lodash-es dayjs less

//or

yarn install @icon-park/svg@^1.4.2 @turf/turf@^7.2.0 ant-design-vue@^4.0.7 consola@^3.2.3 echarts@^5.4.3 nprogress@^0.2.0 vite-plugin-style-import@^2.0.0 vue-color-kit@^1.0.6 vue lodash-es dayjs less

//or

pnpm add @icon-park/svg@^1.4.2 @turf/turf@^7.2.0 ant-design-vue@^4.0.7 consola@^3.2.3 echarts@^5.4.3 nprogress@^0.2.0 vite-plugin-style-import@^2.0.0 vue-color-kit@^1.0.6 vue lodash-es dayjs less
</code></pre>
<h2 data-id="heading-1">ç»„ä»¶å¼•å…¥</h2>
<p>æˆ‘ä»¬éœ€è¦å°† <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmarsgis%2Fmars3d-vue-example" target="_blank" title="https://github.com/marsgis/mars3d-vue-example" ref="nofollow noopener noreferrer">mars3d-vue-example</a></strong> çš„é¡¹ç›®æ–‡ä»¶æ‹‰å–ä¸‹æ¥ï¼Œç„¶åæŠŠ components/mars-ui è¿™ä¸ªæ–‡ä»¶å¤¹æ•´ä¸ªå¤åˆ¶åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67e3c2a0e096470f811a456fef3ba3d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaXNpeGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764221578&amp;x-signature=ydrnm0OBWo3D4aeJWbprspnO2gU%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶ååœ¨ main.js ä¸­è¿›è¡Œç»„ä»¶çš„æ‰¹é‡æ³¨å†Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">MarsUIInstall</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"@mars/components/mars-ui"</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">Application</span>)

<span class="hljs-title class_">MarsUIInstall</span>(app)
</code></pre>
<h2 data-id="heading-2">é…ç½® Antdv å’Œ å¼•å…¥ Less æ ·å¼æ–‡ä»¶</h2>
<p>å‰é¢æˆ‘ä»¬æåˆ° MarsUI æ˜¯ä¾èµ–äº Antdvï¼Œå¹¶ä¸”åœ¨ç»„ä»¶ä¸­ä½¿ç”¨äº† Lessï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ vite.config.js ä¸­å¢åŠ ä¸‹é¢çš„é…ç½®</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { createStyleImportPlugin, <span class="hljs-title class_">AndDesignVueResolve</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"vite-plugin-style-import"</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">css</span>: {
    <span class="hljs-attr">preprocessorOptions</span>: {
      <span class="hljs-attr">less</span>: {
        <span class="hljs-attr">javascriptEnabled</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">additionalData</span>: <span class="hljs-string">`@import "<span class="hljs-subst">${path.resolve(
          __dirname,
          <span class="hljs-string">"src/components/mars-ui/base.less"</span>
        )}</span>";`</span>,
      },
    },
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>(),
    <span class="hljs-title function_">createStyleImportPlugin</span>({
      <span class="hljs-attr">resolves</span>: [<span class="hljs-title class_">AndDesignVueResolve</span>()],
      <span class="hljs-attr">libs</span>: [
        {
          <span class="hljs-attr">libraryName</span>: <span class="hljs-string">"ant-design-vue"</span>,
          <span class="hljs-attr">esModule</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">resolveStyle</span>: <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (name === <span class="hljs-string">"auto-complete"</span>) {
              <span class="hljs-keyword">return</span> <span class="hljs-string">`ant-design-vue/es/<span class="hljs-subst">${name}</span>/index`</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">`ant-design-vue/es/<span class="hljs-subst">${name}</span>/style/index`</span>;
          },
        },
      ],
    }),
  ],
});
</code></pre>
<p>é…ç½®å®Œæˆï¼Œé‡å¯ä¸€ä¸‹é¡¹ç›®æˆ‘ä»¬å°±èƒ½åœ¨é¡¹ç›®ä¸­æŒ‰éœ€å¯¼å…¥ MarsUI çš„æ§ä»¶äº†ã€‚</p>
<h2 data-id="heading-3">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmarsgis%2Fmars3d-vue-example%2Ftree%2Fmaster%2Fsrc%2Fcomponents%2Fmars-ui" target="_blank" title="https://github.com/marsgis/mars3d-vue-example/tree/master/src/components/mars-ui" ref="nofollow noopener noreferrer">mars3d-vue-example - mars-ui</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvbenjs%2Fvite-plugin-style-import%2Fblob%2Fmain%2FREADME.zh_CN.md" target="_blank" title="https://github.com/vbenjs/vite-plugin-style-import/blob/main/README.zh_CN.md" ref="nofollow noopener noreferrer">vite-plugin-style-import</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ Vue3 å“åº”å¼ç³»ç»Ÿï¼šæ‰‹å†™ Computed å’Œ Watch çš„å¥¥ç§˜]]></title>    <link>https://juejin.cn/post/7574625040630759462</link>    <guid>https://juejin.cn/post/7574625040630759462</guid>    <pubDate>2025-11-20T05:36:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574625040630759462" data-draft-id="7574040813749911603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ Vue3 å“åº”å¼ç³»ç»Ÿï¼šæ‰‹å†™ Computed å’Œ Watch çš„å¥¥ç§˜"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-20T05:36:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº‘æ«æ™–"/> <meta itemprop="url" content="https://juejin.cn/user/835284567331021"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ Vue3 å“åº”å¼ç³»ç»Ÿï¼šæ‰‹å†™ Computed å’Œ Watch çš„å¥¥ç§˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/835284567331021/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº‘æ«æ™–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T05:36:18.000Z" title="Thu Nov 20 2025 05:36:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ Vue3 çš„å“åº”å¼ç³»ç»Ÿä¸­ï¼Œè®¡ç®—å±æ€§å’Œç›‘å¬å™¨æ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­é¢‘ç¹ä½¿ç”¨çš„ç‰¹æ€§ã€‚ä½†ä½ çŸ¥é“å®ƒä»¬èƒŒåçš„å®ç°åŸç†å—ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œæ‰‹å†™å®ç°Â <code>computed</code>Â å’ŒÂ <code>watch</code>ï¼Œæ·±å…¥ç†è§£å…¶è®¾è®¡æ€æƒ³å’Œå®ç°ç»†èŠ‚ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è®¡ç®—å±æ€§å’Œç›‘å¬å™¨ï¼Ÿ</h2>
<p>åœ¨Vueåº”ç”¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼š</p>
<ul>
<li><strong>æ´¾ç”ŸçŠ¶æ€</strong>ï¼šåŸºäºç°æœ‰çŠ¶æ€è®¡ç®—æ–°çš„æ•°æ®</li>
<li><strong>å‰¯ä½œç”¨å¤„ç†</strong>ï¼šå½“ç‰¹å®šæ•°æ®å˜åŒ–æ—¶æ‰§è¡Œç›¸åº”æ“ä½œ</li>
</ul>
<p>Vue3æä¾›äº†<code>computed</code>å’Œ<code>watch</code>æ¥ä¼˜é›…è§£å†³è¿™äº›é—®é¢˜ã€‚ä½†ä»…ä»…ä¼šä½¿ç”¨è¿˜ä¸å¤Ÿï¼Œæ·±å…¥ç†è§£å…¶åº•å±‚åŸç†èƒ½è®©æˆ‘ä»¬åœ¨å¤æ‚åœºæ™¯ä¸‹æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚</p>
<h2 data-id="heading-1">æ‰‹å†™å®ç°Computed</h2>
<p><code>computed</code>çš„æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æƒ°æ€§è®¡ç®—</strong>ï¼šåªæœ‰ä¾èµ–çš„å“åº”å¼æ•°æ®å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—</li>
<li><strong>å€¼ç¼“å­˜</strong>ï¼šé¿å…é‡å¤è®¡ç®—æå‡æ€§èƒ½</li>
<li><strong>ä¾èµ–è¿½è¸ª</strong>ï¼šè‡ªåŠ¨æ”¶é›†ä¾èµ–å…³ç³»</li>
</ul>
<p><code>computed</code>å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œç±»å‹å‡½æ•°æˆ–è€…ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åŒ…å«<code>get</code>å’Œ<code>set</code>æ–¹æ³•ï¼Œ<code>get</code>æ–¹æ³•æ˜¯å¿…é¡»å¾—ã€‚åŸºæœ¬æ¡†æ¶å°±å‡ºæ¥äº†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">computed</span>(<span class="hljs-params">getterOrOptions</span>) {
  <span class="hljs-keyword">let</span> getter;
  <span class="hljs-keyword">let</span> setter = <span class="hljs-literal">undefined</span>;
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isFunction</span>(getterOrOptions)) {
    getter = getterOrOptions
  } <span class="hljs-keyword">else</span> {
    getter = getterOrOptions.<span class="hljs-property">get</span>;
    setter = getterOrOptions.<span class="hljs-property">set</span>;
  }
}
</code></pre>
<p>å½“ä½ ä½¿ç”¨è¿‡<code>computed</code>å‡½æ•°æ—¶ï¼Œä½ ä¼šå‘ç°ä¼šè¿”å›ä¸€ä¸ª<code>ComputedRefImpl</code>ç±»å‹çš„å®ä¾‹ã€‚ä»£ç å°±å¯ä»¥è¿›ä¸€æ­¥å†™æˆä¸‹é¢çš„æ ·å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputedRefImpl</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">getter, setter</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span> = getter;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">setter</span> = <span class="hljs-title function_">isFunction</span>(setter) ? setter : <span class="hljs-literal">undefined</span>;
  }
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">computed</span>(<span class="hljs-params">getterOrOptions</span>) {
  <span class="hljs-comment">/* ä¸Šè¿°ä»£ç å®ç°çœç•¥ */</span>
  <span class="hljs-keyword">const</span> cRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputedRefImpl</span>(getter, setter);
  <span class="hljs-keyword">return</span> cRef;
}
</code></pre>
<h3 data-id="heading-2">ComputedRefImplçš„å®ç°</h3>
<p>åœ¨<code>ComputedRefImpl</code>ç±»ä¸­æœ‰å‡ ä¸ªä¸»è¦çš„å±æ€§ï¼š</p>
<ul>
<li><code>_value</code>ï¼šç¼“å­˜çš„è®¡ç®—ç»“æœ</li>
<li><code>_v_isRef</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªrefå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡.valueè®¿é—®</li>
<li><code>effect</code> å“åº”å¼å‰¯ä½œç”¨å®ä¾‹</li>
<li><code>_dirty</code> è„å€¼æ ‡è®°ï¼Œtrueè¡¨ç¤ºéœ€è¦é‡æ–°è®¡ç®—</li>
<li><code>dep</code> ä¾èµ–æ”¶é›†å®¹å™¨ï¼Œå­˜å‚¨ä¾èµ–å½“å‰è®¡ç®—å±æ€§çš„å‰¯ä½œç”¨
åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå°†ä¼šåˆ›å»ºä¸€ä¸ª<code>ReactiveEffect</code>å®ä¾‹ï¼Œæ­¤ç±»å‹åœ¨<a href="https://juejin.cn/post/7573694361474793499" target="_blank" title="https://juejin.cn/post/7573694361474793499">æ‰‹å†™Reactive</a>ä¸­å®ç°äº†ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputedRefImpl</span> {
  effect = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// å“åº”å¼å‰¯ä½œç”¨å®ä¾‹</span>
  _value = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// ç¼“å­˜çš„è®¡ç®—ç»“æœ</span>
  __v_isRef = <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªrefå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡.valueè®¿é—®</span>
  _dirty = <span class="hljs-literal">true</span>; <span class="hljs-comment">// è„å€¼æ ‡è®°ï¼Œtrueè¡¨ç¤ºéœ€è¦é‡æ–°è®¡ç®—</span>
  dep = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// ä¾èµ–æ”¶é›†å®¹å™¨ï¼Œå­˜å‚¨ä¾èµ–å½“å‰è®¡ç®—å±æ€§çš„å‰¯ä½œç”¨</span>

  <span class="hljs-comment">/**
   * æ„é€ å‡½æ•°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">getter</span> - è®¡ç®—å±æ€§çš„getterå‡½æ•°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">setter</span> - è®¡ç®—å±æ€§çš„setterå‡½æ•°
   */</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">getter, setter</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span> = getter;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">setter</span> = <span class="hljs-title function_">isFunction</span>(setter) ? setter : <span class="hljs-function">() =&gt;</span> {};

    <span class="hljs-comment">// åˆ›å»ºå“åº”å¼å‰¯ä½œç”¨å®ä¾‹ï¼Œå½“ä¾èµ–çš„æ•°æ®å˜åŒ–æ—¶ä¼šè§¦å‘è°ƒåº¦å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveEffect</span>(getter, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// è°ƒåº¦å™¨å‡½æ•° åç»­å¤„ç†</span>
    });
  }
}
</code></pre>
<p>é€šè¿‡<code>get value</code>å’Œ<code>set value</code>æ‰‹æœºä¾èµ–å’Œè§¦å‘ä¾èµ–</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputedRefImpl</span> {
  <span class="hljs-comment">/* ä¸Šè¿°ä»£ç å®ç°çœç•¥ */</span>
  <span class="hljs-comment">/**
   * è®¡ç®—å±æ€§çš„getter
   * å®ç°ç¼“å­˜æœºåˆ¶å’Œä¾èµ–æ”¶é›†
   */</span>
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
    <span class="hljs-comment">// å¦‚æœå­˜åœ¨æ¿€æ´»çš„å‰¯ä½œç”¨ï¼Œåˆ™è¿›è¡Œä¾èµ–æ”¶é›†</span>
    <span class="hljs-keyword">if</span> (activeEffect) {
      <span class="hljs-title function_">trackEffects</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span> || (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()));
    }

    <span class="hljs-comment">// å¦‚æœæ˜¯è„å€¼ï¼Œåˆ™é‡æ–°è®¡ç®—å¹¶ç¼“å­˜ç»“æœ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span>.<span class="hljs-title function_">run</span>(); <span class="hljs-comment">// æ‰§è¡Œgetterå‡½æ•°è·å–æ–°å€¼</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ¸…é™¤è„å€¼æ ‡è®°</span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span>; <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„å€¼</span>
  }

  <span class="hljs-comment">/**
   * è®¡ç®—å±æ€§çš„setter
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">newValue</span> - æ–°çš„å€¼
   */</span>
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">newValue</span>) {
    <span class="hljs-comment">// å¦‚æœæœ‰setterå‡½æ•°ï¼Œåˆ™è°ƒç”¨å®ƒ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">setter</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setter</span>(newValue);
    }
  }
}
</code></pre>
<p>å½“ä¾èµ–å€¼å‘ç”Ÿå˜åŒ–åï¼Œå°†è§¦å‘å‰¯ä½œç”¨çš„è°ƒåº¦å™¨ï¼Œè§¦å‘è®¡ç®—å±æ€§çš„å‰¯ä½œç”¨æ›´æ–°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">constructor</span>(<span class="hljs-params">getter, setter</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span> = getter;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">setter</span> = <span class="hljs-title function_">isFunction</span>(setter) ? setter : <span class="hljs-function">() =&gt;</span> {};

  <span class="hljs-comment">// åˆ›å»ºå“åº”å¼å‰¯ä½œç”¨å®ä¾‹ï¼Œå½“ä¾èµ–çš„æ•°æ®å˜åŒ–æ—¶ä¼šè§¦å‘è°ƒåº¦å™¨</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveEffect</span>(getter, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è°ƒåº¦å™¨å‡½æ•°ï¼šå½“ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ ‡è®°ä¸ºè„å€¼ï¼Œä¸‹æ¬¡è®¿é—®æ—¶éœ€è¦é‡æ–°è®¡ç®—</span>
    <span class="hljs-title function_">triggerEffects</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span>); <span class="hljs-comment">// è§¦å‘ä¾èµ–å½“å‰è®¡ç®—å±æ€§çš„å‰¯ä½œç”¨æ›´æ–°</span>
  });
}
</code></pre>
<h3 data-id="heading-3">å®Œæ•´ä»£ç åŠç”¨æ³•ç¤ºä¾‹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { isFunction } <span class="hljs-keyword">from</span> <span class="hljs-string">"./utils"</span>;
<span class="hljs-keyword">import</span> {
  activeEffect,
  <span class="hljs-title class_">ReactiveEffect</span>,
  trackEffects,
  triggerEffects,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"./effect"</span>;

<span class="hljs-comment">/**
 * è®¡ç®—å±æ€§å®ç°ç±»
 * è´Ÿè´£ç®¡ç†è®¡ç®—å±æ€§çš„getterã€setterä»¥åŠç¼“å­˜æœºåˆ¶
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputedRefImpl</span> {
  effect = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// å“åº”å¼å‰¯ä½œç”¨å®ä¾‹</span>
  _value = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// ç¼“å­˜çš„è®¡ç®—ç»“æœ</span>
  __v_isRef = <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªrefå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡.valueè®¿é—®</span>
  _dirty = <span class="hljs-literal">true</span>; <span class="hljs-comment">// è„å€¼æ ‡è®°ï¼Œtrueè¡¨ç¤ºéœ€è¦é‡æ–°è®¡ç®—</span>
  dep = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// ä¾èµ–æ”¶é›†å®¹å™¨ï¼Œå­˜å‚¨ä¾èµ–å½“å‰è®¡ç®—å±æ€§çš„å‰¯ä½œç”¨</span>

  <span class="hljs-comment">/**
   * æ„é€ å‡½æ•°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">getter</span> - è®¡ç®—å±æ€§çš„getterå‡½æ•°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">setter</span> - è®¡ç®—å±æ€§çš„setterå‡½æ•°
   */</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">getter, setter</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span> = getter;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">setter</span> = <span class="hljs-title function_">isFunction</span>(setter) ? setter : <span class="hljs-function">() =&gt;</span> {};

    <span class="hljs-comment">// åˆ›å»ºå“åº”å¼å‰¯ä½œç”¨å®ä¾‹ï¼Œå½“ä¾èµ–çš„æ•°æ®å˜åŒ–æ—¶ä¼šè§¦å‘è°ƒåº¦å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveEffect</span>(getter, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// è°ƒåº¦å™¨å‡½æ•°ï¼šå½“ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œ</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ ‡è®°ä¸ºè„å€¼ï¼Œä¸‹æ¬¡è®¿é—®æ—¶éœ€è¦é‡æ–°è®¡ç®—</span>
      <span class="hljs-title function_">triggerEffects</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span>); <span class="hljs-comment">// è§¦å‘ä¾èµ–å½“å‰è®¡ç®—å±æ€§çš„å‰¯ä½œç”¨æ›´æ–°</span>
    });
  }

  <span class="hljs-comment">/**
   * è®¡ç®—å±æ€§çš„getter
   * å®ç°ç¼“å­˜æœºåˆ¶å’Œä¾èµ–æ”¶é›†
   */</span>
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
    <span class="hljs-comment">// å¦‚æœå­˜åœ¨æ¿€æ´»çš„å‰¯ä½œç”¨ï¼Œåˆ™è¿›è¡Œä¾èµ–æ”¶é›†</span>
    <span class="hljs-keyword">if</span> (activeEffect) {
      <span class="hljs-title function_">trackEffects</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span> || (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()));
    }

    <span class="hljs-comment">// å¦‚æœæ˜¯è„å€¼ï¼Œåˆ™é‡æ–°è®¡ç®—å¹¶ç¼“å­˜ç»“æœ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span>.<span class="hljs-title function_">run</span>(); <span class="hljs-comment">// æ‰§è¡Œgetterå‡½æ•°è·å–æ–°å€¼</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ¸…é™¤è„å€¼æ ‡è®°</span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span>; <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„å€¼</span>
  }

  <span class="hljs-comment">/**
   * è®¡ç®—å±æ€§çš„setter
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">newValue</span> - æ–°çš„å€¼
   */</span>
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">newValue</span>) {
    <span class="hljs-comment">// å¦‚æœæœ‰setterå‡½æ•°ï¼Œåˆ™è°ƒç”¨å®ƒ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">setter</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setter</span>(newValue);
    }
  }
}

<span class="hljs-comment">/**
 * åˆ›å»ºè®¡ç®—å±æ€§çš„å·¥å‚å‡½æ•°
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function|Object</span>} <span class="hljs-variable">getterOrOptions</span> - getterå‡½æ•°æˆ–åŒ…å«get/setçš„å¯¹è±¡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">ComputedRefImpl</span>} è®¡ç®—å±æ€§å¼•ç”¨å®ä¾‹
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">computed</span> = (<span class="hljs-params">getterOrOptions</span>) =&gt; {
  <span class="hljs-keyword">let</span> getter; <span class="hljs-comment">// getterå‡½æ•°</span>
  <span class="hljs-keyword">let</span> setter = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// setterå‡½æ•°</span>

  <span class="hljs-comment">// æ ¹æ®å‚æ•°ç±»å‹ç¡®å®šgetterå’Œsetter</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isFunction</span>(getterOrOptions)) {
    <span class="hljs-comment">// å¦‚æœå‚æ•°æ˜¯å‡½æ•°ï¼Œåˆ™ä½œä¸ºgetter</span>
    getter = getterOrOptions;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¦‚æœå‚æ•°æ˜¯å¯¹è±¡ï¼Œåˆ™åˆ†åˆ«è·å–getå’Œsetæ–¹æ³•</span>
    getter = getterOrOptions.<span class="hljs-property">get</span>;
    setter = getterOrOptions.<span class="hljs-property">set</span>;
  }

  <span class="hljs-comment">// åˆ›å»ºå¹¶è¿”å›è®¡ç®—å±æ€§å®ä¾‹</span>
  <span class="hljs-keyword">const</span> cRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputedRefImpl</span>(getter, setter);
  <span class="hljs-keyword">return</span> cRef;
};
</code></pre>
<p>ç¤ºä¾‹ç”¨æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { reactive, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">"./packages/index"</span>;
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">firstName</span>: <span class="hljs-string">"tom"</span>,
  <span class="hljs-attr">lastName</span>: <span class="hljs-string">"lee"</span>,
  <span class="hljs-attr">friends</span>: [<span class="hljs-string">"jacob"</span>, <span class="hljs-string">"james"</span>, <span class="hljs-string">"jimmy"</span>],
});
<span class="hljs-keyword">const</span> fullName = <span class="hljs-title function_">computed</span>({
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> state.<span class="hljs-property">firstName</span> + <span class="hljs-string">" "</span> + state.<span class="hljs-property">lastName</span>;
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) {
    [state.<span class="hljs-property">firstName</span>, state.<span class="hljs-property">lastName</span>] = newValue.<span class="hljs-title function_">split</span>(<span class="hljs-string">" "</span>);
  },
});
<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  app.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
    &lt;div&gt; Welcome <span class="hljs-subst">${fullName.value}</span> !&lt;/div&gt;
  `</span>;
});
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  fullName.<span class="hljs-property">value</span> = <span class="hljs-string">"jacob him"</span>;
}, <span class="hljs-number">1000</span>);
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state.<span class="hljs-property">firstName</span>, state.<span class="hljs-property">lastName</span>); <span class="hljs-comment">// firstName: jacob lastName: him </span>
}, <span class="hljs-number">2000</span>);

</code></pre>
<h2 data-id="heading-4">æ‰‹å†™å®ç°Watchå’ŒWatchEffect</h2>
<p><code>watch</code>å‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>source</code>ï¼šè¦ç›‘å¬çš„æ•°æ®æºï¼Œå¯ä»¥æ˜¯å“åº”å¼å¯¹è±¡æˆ–å‡½æ•°</li>
<li><code>cb</code>ï¼šæ•°æ®å˜åŒ–æ—¶æ‰§è¡Œçš„å›è°ƒå‡½æ•°</li>
<li><code>options</code> é…ç½®é€‰é¡¹ï¼šimmediateï¼šæ˜¯å¦ç«‹å³æ‰§è¡Œï¼Œdeepï¼šæ˜¯å¦æ·±åº¦ç›‘å¬ç­‰</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">watch</span>(<span class="hljs-params">source, cb, {immediate = <span class="hljs-literal">false</span>} = {}</span>) {
 <span class="hljs-comment">// å¾…åç»­å®ç°</span>
}
</code></pre>
<h3 data-id="heading-5">1. watchçš„å®ç°</h3>
<p>é¦–å…ˆ<code>source</code>æ˜¯å¦å¯ä»¥æ¥å—å¤šç§ç›‘å¬çš„æ•°æ®æºï¼šå“åº”å¼å¯¹è±¡ã€å¤šä¸ªç›‘å¬æ•°æ®æºçš„æ•°ç»„ã€å‡½æ•°ã€‚å°†ä¸åŒæ–¹å¼ç»Ÿä¸€èµ·æ¥ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">watch</span>(<span class="hljs-params">source, cb, { immediate = <span class="hljs-literal">false</span> } = {}</span>) {
  <span class="hljs-keyword">let</span> getter;
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isReactive</span>(source)) {
    <span class="hljs-comment">// å¦‚æœæ˜¯å“åº”å¼å¯¹è±¡ åˆ™è°ƒç”¨traverse</span>
    getter = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">traverse</span>(source);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isFunction</span>(source)) {
    <span class="hljs-comment">// å¦‚æœæ˜¯å‡½æ•° åˆ™ç›´æ¥æ‰§è¡Œ</span>
    getter = source;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isArray</span>(source)) {
    <span class="hljs-comment">// å¤„ç†æ•°ç»„ç±»å‹çš„ç›‘å¬æº</span>
    getter = <span class="hljs-function">() =&gt;</span>
      source.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isReactive</span>(s)) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">traverse</span>(s);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isFunction</span>(s)) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">s</span>();
        }
      });
  }
}
<span class="hljs-comment">/**
 * éå†å¯¹è±¡åŠå…¶åµŒå¥—å±æ€§çš„å‡½æ•°
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">source</span> - éœ€è¦éå†çš„æºæ•°æ®
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Set</span>} <span class="hljs-variable">s</span> - ç”¨äºè®°å½•å·²è®¿é—®å¯¹è±¡çš„é›†åˆï¼Œé¿å…å¾ªç¯å¼•ç”¨
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">any</span>} è¿”å›åŸå§‹è¾“å…¥æ•°æ®
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">source, s = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()</span>) {
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºå¯¹è±¡ç±»å‹ï¼Œå¦‚æœä¸æ˜¯åˆ™ç›´æ¥è¿”å›</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isObject</span>(source)) {
    <span class="hljs-keyword">return</span> source;
  }
  <span class="hljs-comment">// æ£€æµ‹å¾ªç¯å¼•ç”¨ï¼Œå¦‚æœå¯¹è±¡å·²è¢«è®¿é—®è¿‡åˆ™ç›´æ¥è¿”å›</span>
  <span class="hljs-keyword">if</span> (s.<span class="hljs-title function_">has</span>(source)) {
    <span class="hljs-keyword">return</span> source;
  }
  <span class="hljs-comment">// å°†å½“å‰å¯¹è±¡åŠ å…¥å·²è®¿é—®é›†åˆ</span>
  s.<span class="hljs-title function_">add</span>(source);
  <span class="hljs-comment">// é€’å½’éå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> source) {
    <span class="hljs-title function_">traverse</span>(source[key], s);
  }
  <span class="hljs-keyword">return</span> source;
}
</code></pre>
<p>å¤„ç†å®Œ<code>souce</code>å‚æ•°åï¼Œåˆ›å»ºä¸€ä¸ª<code>ReactiveEffect</code>å®ä¾‹ï¼Œå¯¹ç›‘å¬æºäº§ç”Ÿå“åº”å¼çš„å‰¯ä½œç”¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">watch</span>(<span class="hljs-params">source, cb, { immediate = <span class="hljs-literal">false</span> } = {}</span>) {
  <span class="hljs-comment">/* ä¸Šè¿°ä»£ç ä»¥å®ç°çœç•¥ */</span>
  <span class="hljs-keyword">let</span> oldValue;
  <span class="hljs-comment">// å®šä¹‰å‰¯ä½œç”¨æ‰§è¡Œçš„ä»»åŠ¡å‡½æ•°</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">job</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">let</span> newValue = effect.<span class="hljs-title function_">run</span>(); <span class="hljs-comment">// è·å–æœ€æ–°å€¼</span>
    <span class="hljs-title function_">cb</span>(oldValue, newValue); <span class="hljs-comment">// è§¦å‘å›è°ƒ</span>
    oldValue = newValue; <span class="hljs-comment">// æ–°å€¼èµ‹ç»™æ—§å€¼</span>
  };

  <span class="hljs-comment">// åˆ›å»ºå“åº”å¼å‰¯ä½œç”¨å®ä¾‹</span>
  <span class="hljs-keyword">const</span> effect = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveEffect</span>(getter, job);
  <span class="hljs-keyword">if</span> (immediate) {
    <span class="hljs-title function_">job</span>();
  } <span class="hljs-keyword">else</span> {
    oldValue = effect.<span class="hljs-title function_">run</span>();
  }
}
</code></pre>
<blockquote>
<p><strong>âš ï¸ æ€§èƒ½æ³¨æ„</strong></p>
<p><code>traverse</code>å‡½æ•°ä¼šé€’å½’éå†å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å±æ€§ï¼Œåœ¨å¤§å‹æ•°æ®ç»“æ„ä¸Šä½¿ç”¨æ·±åº¦ç›‘å¬(<code>deep: true</code>)æ—¶ä¼šäº§ç”Ÿæ˜¾è‘—æ€§èƒ½å¼€é”€ã€‚å»ºè®®ï¼š</p>
<ul>
<li>åªåœ¨å¿…è¦æ—¶ä½¿ç”¨æ·±åº¦ç›‘å¬</li>
<li>å°½é‡ä½¿ç”¨å…·ä½“çš„å±æ€§è·¯å¾„è€Œéæ•´ä¸ªå¯¹è±¡</li>
<li>è€ƒè™‘ä½¿ç”¨è®¡ç®—å±æ€§æ¥æ´¾ç”Ÿéœ€è¦ç›‘å¬çš„æ•°æ®</li>
</ul>
</blockquote>
<h3 data-id="heading-6">2. watchEffectçš„å®ç°</h3>
<p>å®ç°äº†<code>watch</code>å‡½æ•°åï¼ŒwatchEffectçš„å®ç°å°±å®¹æ˜“äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// watchEffect.js</span>
<span class="hljs-keyword">import</span> { watch } <span class="hljs-keyword">from</span> <span class="hljs-string">"./watch"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">watchEffect</span>(<span class="hljs-params">effect, options</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">watch</span>(effect, <span class="hljs-literal">null</span>, options);
}
<span class="hljs-comment">// watch.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">job</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (cb) {
    <span class="hljs-keyword">let</span> newValue = effect.<span class="hljs-title function_">run</span>(); <span class="hljs-comment">// è·å–æœ€æ–°å€¼</span>
    <span class="hljs-title function_">cb</span>(oldValue, newValue); <span class="hljs-comment">// è§¦å‘å›è°ƒ</span>
    oldValue = newValue; <span class="hljs-comment">// æ–°å€¼èµ‹ç»™æ—§å€¼</span>
  } <span class="hljs-keyword">else</span> {
    effect.<span class="hljs-title function_">run</span>(); <span class="hljs-comment">// å¤„ç†watchEffect</span>
  }
};
</code></pre>
<h3 data-id="heading-7">ç”¨æ³•ç¤ºä¾‹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">watch</span>([<span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">lastName</span>, <span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">firstName</span>], <span class="hljs-function">(<span class="hljs-params">oldValue, newValue</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"oldValue: "</span> + oldValue, <span class="hljs-string">"newValue: "</span> + newValue);
});
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  state.<span class="hljs-property">lastName</span> = <span class="hljs-string">"jacob"</span>;
}, <span class="hljs-number">1000</span>);
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  state.<span class="hljs-property">firstName</span> = <span class="hljs-string">"james"</span>;
}, <span class="hljs-number">1000</span>);
<span class="hljs-comment">/*
1ç§’é’Ÿåï¼šoldValue: lee,tom newValue: jacob,tom
2ç§’é’Ÿåï¼šoldValue: jacob,tom newValue: jacob,james
*/</span>
</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<h3 data-id="heading-9">æœ¬æ–‡æ ¸å¿ƒå†…å®¹</h3>
<p>é€šè¿‡æ‰‹å†™å®ç°Vue3çš„<code>computed</code>å’Œ<code>watch</code>ï¼Œæˆ‘ä»¬æ·±å…¥ç†è§£äº†ï¼š</p>
<ul>
<li><strong>è®¡ç®—å±æ€§</strong>çš„æƒ°æ€§è®¡ç®—ã€å€¼ç¼“å­˜å’Œä¾èµ–è¿½è¸ªæœºåˆ¶</li>
<li><strong>ç›‘å¬å™¨</strong>çš„å¤šæ•°æ®æºå¤„ç†å’Œæ·±åº¦ç›‘å¬åŸç†</li>
<li><strong>å“åº”å¼ç³»ç»Ÿ</strong>ä¸­å‰¯ä½œç”¨è°ƒåº¦å’Œä¾èµ–æ”¶é›†çš„å®Œæ•´æµç¨‹</li>
</ul>
<h3 data-id="heading-10">ä»£ç åœ°å€</h3>
<p>ğŸ“Â <strong>æœ¬æ–‡å®Œæ•´ä»£ç </strong>ï¼š<br/>
[GitHubä»“åº“é“¾æ¥] | [<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgardenia83%2Fvue-source-code" target="_blank" title="https://github.com/gardenia83/vue-source-code" ref="nofollow noopener noreferrer">github.com/gardenia83/â€¦</a>]</p>
<h2 data-id="heading-11">ä¸‹ç¯‡é¢„å‘Š</h2>
<p>åœ¨ä¸‹ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­æ·±å…¥Vue3å“åº”å¼ç³»ç»Ÿï¼Œæ‰‹å†™å®ç°ï¼š</p>
<p><strong>ã€Šæ·±å…¥ Vue3 å“åº”å¼ç³»ç»Ÿï¼šä»refåˆ°toRefsçš„å®Œæ•´å®ç°ã€‹</strong></p>
<ul>
<li><code>ref</code>å’Œ<code>shallowRef</code>çš„åº•å±‚æœºåˆ¶</li>
<li><code>toRef</code>å’Œ<code>toRefs</code>çš„å“åº”å¼è½¬æ¢åŸç†</li>
<li>æ¨¡æ¿Refå’Œç»„ä»¶Refçš„ç‰¹æ®Šå¤„ç†</li>
<li>Refè‡ªåŠ¨è§£åŒ…çš„ç¥ç§˜é¢çº±</li>
</ul>
<p>æ•¬è¯·æœŸå¾…ï¼ ğŸš€</p>
<hr/>
<p><em>æŒæ¡åº•å±‚åŸç†ï¼Œè®©æˆ‘ä»¬çš„å¼€å‘ä¹‹è·¯æ›´åŠ ä»å®¹è‡ªä¿¡</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[cloudflareäº‹æ•…æŠ¥å‘Šç¡¬æ ¸è¯¦è§£]]></title>    <link>https://juejin.cn/post/7574380953176326186</link>    <guid>https://juejin.cn/post/7574380953176326186</guid>    <pubDate>2025-11-20T05:38:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574380953176326186" data-draft-id="7574448424998617124" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="cloudflareäº‹æ•…æŠ¥å‘Šç¡¬æ ¸è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-20T05:38:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="YuUu"/> <meta itemprop="url" content="https://juejin.cn/user/1013070754220555"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            cloudflareäº‹æ•…æŠ¥å‘Šç¡¬æ ¸è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1013070754220555/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    YuUu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T05:38:55.000Z" title="Thu Nov 20 2025 05:38:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è§ˆ</h2>
<p>æ˜¨æ™šï¼Œ500æˆäº†å…¨çƒç½‘ç«™ä¸Šæœ€é†’ç›®çš„æ•°å­—ã€‚å°ç¼–åœ¨è®¿é—®atcoderæ—¶å‘ç°æ— æ³•æ­£å¸¸ç™»å½•ï¼Œéšåå‘ç°æ¨ç‰¹ä¹ŸæŠ¥å‡º500é”™è¯¯ï¼Œèˆªç©ºå…¬å¸æ— æ³•åœ¨çº¿è®¢ç¥¨ï¼Œè®¸å¤šä½¿ç”¨Cloudflareçš„ä¸ªäººç½‘ç«™ä¹Ÿè·Ÿç€å—å®³ï¼Œå¹¶ä¸”æˆ‘çš„ä¸€äº›æœ‹å‹å·²ç»ç”³è¯·èµ”å¿ï¼ŒCloudflareè¿™æ³¢å¯è°“æŸå¤±æƒ¨é‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/347d6b32e7a14a20a8859046667b6d40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWXVVdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764221935&amp;x-signature=ib36nRUMeC%2FWh0sNaoYl6VEM5R8%3D" alt="" loading="lazy"/></p>
<p>å›¢é˜Ÿèµ·åˆè®¤ä¸ºè¿™åˆä¸€æ¬¡æ˜¯ç”±æ”»å‡»å¯¼è‡´çš„ï¼Œéšåæ„è¯†åˆ°æ˜¯å› ä¸ºæ•°æ®åº“çš„æƒé™è®¾ç½®å‡ºäº†é—®é¢˜ï¼Œå¯¼è‡´é…ç½®æ–‡ä»¶è¢«å¤šæ¬¡å†™å…¥ï¼Œé”™è¯¯çš„é…ç½®æ–‡ä»¶ä¸‹æ”¾åˆ°æœåŠ¡ç«¯å¯¼è‡´æœåŠ¡ç«¯ç˜«ç—ªï¼Œå›¢é˜Ÿåœ¨å‡ å°æ—¶å†…é€šè¿‡æ›¿æ¢é…ç½®æ–‡ä»¶è¿…é€ŸæŒ½æ•‘è¿™æ¬¡ç¾éš¾ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆcloudflareå¦‚æ­¤é‡è¦</h2>
<h3 data-id="heading-2">1. <strong>åŠ é€Ÿç½‘ç«™è®¿é—®</strong></h3>
<p>Cloudflare åœ¨å…¨çƒæœ‰ 300+ æ•°æ®ä¸­å¿ƒï¼ˆèŠ‚ç‚¹ï¼‰ï¼Œèƒ½æŠŠé™æ€èµ„æºç¼“å­˜åˆ°ç¦»ç”¨æˆ·æ›´è¿‘çš„åœ°æ–¹</p>
<h3 data-id="heading-3">2. <strong>ä¿æŠ¤ç½‘ç«™ä¸è¢«æ”»å‡»</strong></h3>
<p><em>Cloudflare æä¾›ä¸šç•Œæœ€å¼ºçš„</em> <em><strong>DDoS</strong></em> <em><strong>é˜²å¾¡</strong></em> <em>ã€‚</em></p>
<p>å½“é»‘å®¢å‘èµ·æ¶æ„è®¿é—®æ—¶ï¼Œå®ƒä¼šæ‹¦æˆªè¯·æ±‚ï¼Œç¡®ä¿ä½ çš„æœåŠ¡å™¨ä¸ä¼šæŒ‚æ‰ã€‚</p>
<p><strong>åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>DDoS æ¸…æ´—</li>
<li>é˜²çˆ¬è™«</li>
<li>é˜²ç«å¢™è§„åˆ™</li>
<li>æœºå™¨äººè¯†åˆ«</li>
</ul>
<h3 data-id="heading-4">3. <strong>éšè—æœåŠ¡å™¨ IP</strong></h3>
<p>å› ä¸º Cloudflare æ˜¯åå‘ä»£ç†ï¼Œç”¨æˆ·åªçœ‹åˆ° Cloudflare çš„ IPï¼Œçœ‹ä¸åˆ°ä½ çœŸå®æœåŠ¡å™¨åœ°å€</p>
<p>ï¼Œè¾¾åˆ°é˜²æ­¢è¢«äººç›´æ¥æ”»å‡»ä½ æœåŠ¡å™¨çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-5">4. <strong>æä¾› HTTPSã€SSL è¯ä¹¦</strong></h3>
<p>æ— éœ€è‡ªå·±é…ç½®è¯ä¹¦ï¼Œå¯ä»¥è‡ªåŠ¨ä¸ºç½‘ç«™å¯ç”¨ HTTPSã€‚</p>
<h3 data-id="heading-6">5. <strong>æ›´å¤šé«˜çº§åŠŸèƒ½</strong></h3>
<p>åŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>Workersï¼ˆæ— æœåŠ¡å™¨å‡½æ•°ï¼‰</li>
<li>R2 å¯¹è±¡å­˜å‚¨ï¼ˆS3 æ›¿ä»£ï¼‰</li>
<li>Zero Trust è®¿é—®æ§åˆ¶</li>
<li>WAF Web åº”ç”¨é˜²ç«å¢™</li>
<li><strong>Turnstileï¼ˆæ— éªŒè¯ç äººæœºéªŒè¯ï¼‰</strong></li>
<li>Pagesï¼ˆé™æ€ç½‘ç«™æ‰˜ç®¡ï¼‰</li>
</ul>
<p><strong>æ‰€ä»¥ï¼Œä¸ºé¿å…ä¸ªäººç½‘ç«™å—æ”»å‡»ï¼Œä½¿ç”¨Cloudflareçš„å®‰å…¨æœåŠ¡æ˜¯è®¸å¤šå¼€å‘è€…çš„é¦–é€‰ï¼Œä¸‹é¢è¿™å¼ å›¾å½¢è±¡è¯´æ˜äº†cloudflareåœ¨å…¨çƒäº’è”ç½‘ä¸­çš„é‡è¦åœ°ä½ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cb06a93ffc849dbbac6eb2d95195496~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWXVVdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764221935&amp;x-signature=qx2%2BY1am9aWjJ%2BKBHXmESQN%2Bhac%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">äº‹æ•…è¿‡ç¨‹</h2>
<p>æ•°æ®åº“å‘é…ç½®æ–‡ä»¶å†™å…¥è¿‡é‡æ¡ç›®ï¼Œä¹‹åå°†è¿™äº›é…ç½®æ–‡ä»¶ä¸‹æ”¾åˆ°æœåŠ¡ç«¯åï¼Œé…ç½®æ–‡ä»¶å¤§å°è¶…è¿‡äº†æœåŠ¡ç«¯è§„å®šçš„ä¸Šé™ï¼Œå› è€Œå¼•å‘é”™è¯¯ã€‚ï¼ˆè¿™äº›é…ç½®æ–‡ä»¶æè¿°äº†cloudflareæœ€æ–°çš„å¨èƒæ•°æ®ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b0d68e72e874152b70901737763e86d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWXVVdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764221935&amp;x-signature=jD99N8yebI8qDvmUoVH5d5pQIWg%3D" alt="" loading="lazy"/></p>
<p>ä»11:30å¼€å§‹ï¼Œæ£€æµ‹æŠ¥å‘Šæ˜¾ç¤ºæ”¶åˆ°å¤§é‡çš„5xxå“åº”ç»“æœï¼Œèµ·åˆç»“æœå‘ˆç°æ³¢åŠ¨ï¼Œè¿™æ˜¯ç”±äºä¸€å¼€å§‹æ•°æ®åº“é›†ç¾¤åªæœ‰éƒ¨åˆ†èŠ‚ç‚¹ä¼šæ”¾å‡ºé”™è¯¯é…ç½®æ–‡ä»¶ï¼Œæ¯è¿‡5åˆ†é’Ÿï¼Œæ•°æ®åº“éƒ½ä¼šé‡æ–°ç”Ÿæˆæ–°çš„é…ç½®æ–‡ä»¶å¹¶ä¸‹æ–¹ï¼Œå½“è¯·æ±‚è¢«åˆ†é…åˆ°æœ‰æ•…éšœçš„èŠ‚ç‚¹ï¼Œæ‰ä¼šä¸‹æ”¾é”™è¯¯çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>ä¸€æ®µæ—¶é—´åï¼Œ13:00åï¼Œæ‰€æœ‰èŠ‚ç‚¹å‡å‡ºç°äº†è¿™ä¸ªé”™è¯¯ï¼Œå› è€Œå¯¼è‡´è¿ç»­çš„å¤§é¢ç§¯5xxç»“æœï¼Œä¹‹åï¼Œå¼€å‘äººå‘˜æ‰‹åŠ¨å°†æ—§ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶æ’å…¥é˜Ÿåˆ—ï¼Œå¹¶å¼ºåˆ¶é‡å¯é…ç½®æ–‡ä»¶å‘æ”¾æœåŠ¡ï¼Œåœ¨14:30å·¦å³ä»¤é”™è¯¯æƒ…å†µå¾—åˆ°æ˜¾è‘—ç¼“è§£ï¼Œè€Œ15:00ä¹‹åçš„â€œé•¿å°¾å·´â€ï¼Œæ˜¯åœ¨é€ä¸ªé‡å¯è¢«æ­¤é…ç½®æ–‡ä»¶é”™è¯¯å½±å“åˆ°çš„å…¶ä»–æœåŠ¡ã€‚</p>
<p>è¢«å½±å“çš„æœåŠ¡å¦‚ä¸‹ï¼š</p>

































<table><thead><tr><th>Service / Product</th><th>Impact description</th></tr></thead><tbody><tr><td>Core CDN and security services</td><td>HTTP 5xx status codes. The screenshot at the top of this post shows a typical error page delivered to end users.</td></tr><tr><td>Turnstile</td><td>Turnstile failed to load.</td></tr><tr><td>Workers KV</td><td>Workers KV returned a significantly elevated level of HTTP 5xx errors as requests to KVâ€™s â€œfront endâ€ gateway failed due to the core proxy failing.</td></tr><tr><td>Dashboard</td><td>While the dashboard was mostly operational, most users were unable to log in due to Turnstile being unavailable on the login page.</td></tr><tr><td>Email Security</td><td>While email processing and delivery were unaffected, we observed a temporary loss of access to an IP reputation source which reduced spam-detection accuracy and prevented some new-domain-age detections from triggering, with no critical customer impact observed. We also saw failures in some Auto Move actions; all affected messages have been reviewed and remediated.</td></tr><tr><td>Access</td><td>Authentication failures were widespread for most users, beginning at the start of the incident and continuing until the rollback was initiated at 13:05. Any existing Access sessions were unaffected. All failed authentication attempts resulted in an error page, meaning none of these users ever reached the target application while authentication was failing. Successful logins during this period were correctly logged during this incident. Any Access configuration updates attempted at that time would have either failed outright or propagated very slowly. All configuration updates are now recovered.</td></tr></tbody></table>
<h2 data-id="heading-8">åŸç†</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65b2a474af59453c92ff04386f64890f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWXVVdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764221935&amp;x-signature=ywOLUfZQeySYBXo3P3mwHr4SaBg%3D" alt="" loading="lazy"/></p>
<p>cloudflareçš„æœåŠ¡ç”±ä¸‰å±‚æ¶æ„ç»„æˆï¼Œå½“å®¢æˆ·ç«¯å‘é…ç½®äº†CloudflareæœåŠ¡çš„æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œè¯·æ±‚ä¾æ¬¡é€šè¿‡ï¼š <strong>HTTP &amp; TLS Terminationã€FLï¼ˆæ ¸å¿ƒä»£ç†æ¨¡å—ï¼‰ã€ç¼“å­˜\æ•°æ®åº“æ¨¡å—ã€‚</strong></p>
<p>è¿™æ¬¡çš„é—®é¢˜å‡ºåœ¨äº†FLï¼Œæ ¸å¿ƒä»£ç†æ¨¡å—(Core Proxy Module)ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå·¥å…·ï¼Œç”¨äºæ£€æµ‹æ“ä½œæ˜¯å¦ç”±æœºå™¨äºº\è‡ªåŠ¨åŒ–å·¥å…·å®Œæˆâ€”â€”Bot Managementï¼Œè¿™ä¸ªåæœºå™¨äººå·¥å…·ï¼Œä½¿ç”¨ä¸€ä¸ªMLï¼ˆæœºå™¨å­¦ä¹ ï¼‰æ–¹æ³•ï¼Œè¯»å…¥é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„è¿‘æœŸç”¨æˆ·è¡Œä¸ºï¼Œæ¥å¯¹æ­¤æ¬¡ç”¨æˆ·çš„è¯·æ±‚æ˜¯å¦ç”±æœºå™¨äººå®Œæˆè¿›è¡Œé¢„æµ‹ã€‚</p>
<p>ç”±äºæ–°çš„è‡ªåŠ¨åŒ–å·¥å…·å’Œæœºå™¨äººæŠ€æœ¯æ‰‹æ®µå±‚å‡ºä¸ç©·ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä¼šè¢«é¢‘ç¹æ›´æ–°ç»™Bot Managementï¼Œè€Œç”±äºé”™è¯¯çš„æ•°æ®åº“Queryè¯­å¥ï¼Œå¯¼è‡´é…ç½®æ–‡ä»¶è¢«å¤§é‡å†™å…¥é‡å¤æ¡ç›®ï¼Œè®©é…ç½®æ–‡ä»¶è¶…è¿‡äº†å›ºå®šå¤§å°ï¼Œä»è€Œè®©MLæ¨¡å—è¯»å–æ–‡ä»¶æ—¶å‡ºé”™ã€‚</p>
<p>å¦‚æœCloudflareç”¨æˆ·åœ¨æ ¸å¿ƒä»£ç†æ¨¡å—ä¸­å¯ç”¨äº†Bot Managementï¼Œæ–°ç‰ˆæœ¬FL2ä¼šç›´æ¥æŠ›å‡º5xxé”™è¯¯ï¼Œè€Œæ—§ç‰ˆæœ¬FLï¼Œåˆ™ä¼šMLå¤±æ•ˆï¼Œè¿”å›100%æ˜¯æœºå™¨äººçš„é”™è¯¯åˆ¤æ–­ï¼Œä»è€Œç›´æ¥è®¤ä¸ºä½ çš„ä¸€åˆ‡æ“ä½œéƒ½æ˜¯äººæœºï¼ï¼ˆè¿™å°±æ˜¯æ— æ³•ç™»é™†é…ç½®äº†cloudflareäººæœºéªŒè¯ç½‘ç«™çš„åŸå› ï¼Œè¢«100%å½“æœºå™¨äººäº†å‘µå‘µï¼‰</p>
<h2 data-id="heading-9">é”™è¯¯çš„æ•°æ®åº“è¯·æ±‚</h2>
<p>Cloudflareä½¿ç”¨<strong>ClickHouse</strong>æ•°æ®åº“ï¼Œè¿™æ˜¯ä¸€ç§è¶…é«˜é€Ÿçš„æ•°æ®åˆ†ææ•°æ®åº“ï¼Œç”¨æ¥åšæŠ¥è¡¨ã€ç»Ÿè®¡ã€æŒ‡æ ‡æŸ¥è¯¢ï¼Œè€Œä¸æ“…äºåšä¸šåŠ¡äº‹åŠ¡ã€‚</p>
<p>ClickHouseä½¿ç”¨åˆ†å¸ƒå¼æ¨¡å¼ï¼Œå½“ç”¨æˆ·éœ€è¦æŸ¥è¯¢æ•°æ®æ—¶ï¼Œä¼šä»æ¯ä¸ªåˆ†ç‰‡shardæŸ¥è¯¢å¹¶å°†ç»“æœåˆå¹¶è¿”å›ï¼Œä»¥æé«˜æ€§èƒ½ï¼Œå…·ä½“åŸç†æ˜¯ï¼šæ•°æ®åº“ä¸­æœ‰ä¸€å¼ è¡¨defaultï¼Œå‘defaultè¡¨æäº¤æŸ¥è¯¢è¯­å¥ï¼ŒæŸ¥è¯¢äº¤ç»™åä¸ºDistributedçš„å¼•æ“ï¼Œè¿™ä¸ªå¼•æ“å”¤èµ·æ¯ä¸ªshardï¼Œè®©shardå»æŸ¥å…¶ä¸‹çš„r0è¡¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªshardå®é™…ä¸Šæœ‰ä¸€ä¸ªr0è¡¨ï¼Œæ‰€æœ‰çš„æ•°æ®åªåœ¨r0ä¸­å‚¨å­˜ï¼Œdefaultæ˜¯ä¸€å¼ â€œä»£ç†è¡¨â€ã€‚</p>
<p>Cloudflareå›¢é˜Ÿå‘ç°ï¼ŒClickHouseæ•°æ®åº“åœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¹¶ä¸ä¼šç”¨å‘èµ·æŸ¥è¯¢çš„ç”¨æˆ·èº«ä»½è¿›è¡ŒæŸ¥è¯¢ï¼Œåœ¨Distributedå¼•æ“ä¸­ï¼Œä¸ç®¡æ˜¯è°çš„æŸ¥è¯¢ï¼Œéƒ½ç”±ä¸€ä¸ªshared accountæ‰§è¡Œï¼Œè€Œè¿™æ ·çš„æ–¹å¼ï¼Œè®©æƒé™æ§åˆ¶å’Œå†å²è®°å½•åˆ†æå˜å¾—å›°éš¾ï¼Œå› æ­¤ï¼Œcloudflareå›¢é˜Ÿè®¡åˆ’è°ƒæ•´ClickHouseçš„æŸ¥è¯¢é€»è¾‘ï¼Œå°†å¯¹r0çš„éšå¼è®¿é—®æ”¹ä¸ºæ˜¾å¼è®¿é—®ï¼Œè®©ç”¨æˆ·ç›´æ¥è·å¾—å¯¹åº•å±‚shardä¸Šçš„æ•°æ®åº“r0çš„è®¿é—®æƒé™ï¼Œè¿™æ ·ï¼Œæ‰€æœ‰çš„æ“ä½œä¸ç»defaultè¡¨ä»£ç†ï¼Œç›´æ¥æ¥åˆ°r0ï¼Œè®©ç›‘æ§å˜å¾—å®¹æ˜“ã€‚</p>
<p>å¯æ˜¯ï¼é—®é¢˜å°±å‡ºåœ¨äº†å°å°çš„æ•°æ®åº“æŸ¥è¯¢è¯­å¥ä¸Šï¼Œå½“Cloudflareå›¢é˜Ÿä¿®æ”¹äº†ç”¨æˆ·å¯¹r0çš„æƒé™ä¸ºå¯è®¿é—®æ—¶ï¼Œæ­¤æ—¶çš„æŸ¥è¯¢è¯­å¥æ˜¯ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span>
  name,
  type
<span class="hljs-keyword">FROM</span> system.columns
<span class="hljs-keyword">WHERE</span>
  <span class="hljs-keyword">table</span> <span class="hljs-operator">=</span> <span class="hljs-string">'http_requests_features'</span>
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> name;
</code></pre>
<p>æŸ¥è¯¢æ²¡æœ‰æŒ‡å®šè¡¨ï¼å› æ­¤ï¼Œç»“æœä»r0å’Œdefaultä¸¤å¼ è¡¨è¿”å›ä¸¤æ¬¡ï¼Œå› æ­¤æ‰è®©é…ç½®æ–‡ä»¶çš„å¤§å°ç¿»äº†ä¸€å€ï¼</p>
<p>æŸ¥è¯¢ç»“æœç±»ä¼¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67974270298945e184632c2313be9691~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWXVVdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764221935&amp;x-signature=pGY9kJM3OQdpQk6KJc4ofC48ruY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">Rustçš„â€œè®¾è®¡å“²å­¦â€</h2>
<p>â€œä¸å®‰å…¨çš„æƒ…å†µæˆ‘ç›´æ¥åœæœºã€‚â€</p>
<p>åœ¨ç”¨äºè·å–ä¾›Bot Managementä½¿ç”¨çš„é…ç½®æ–‡ä»¶çš„Rustä»£ç ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µï¼š</p>
<pre><code class="hljs language-Rust" lang="Rust"><span class="hljs-comment">/// Fetch edge features based on `input` struct into [`Features`] buffer.</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fetch_features</span>(
    &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>,
    input: &amp;<span class="hljs-keyword">dyn</span> BotsInput,
    features: &amp;<span class="hljs-keyword">mut</span> Features,
) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), (ErrorFlags, <span class="hljs-type">i32</span>)&gt; {
    <span class="hljs-comment">// update features checksum (lower 32 bits) and copy edge feature names</span>
    features.checksum &amp;= <span class="hljs-number">0xFFFF_FFFF_0000_0000</span>;
    features.checksum |= <span class="hljs-type">u64</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-keyword">self</span>.config.checksum);
    <span class="hljs-keyword">let</span> (feature_values, _) = features
        .<span class="hljs-title function_ invoke__">append_with_names</span>(&amp;<span class="hljs-keyword">self</span>.config.feature_names)
        .<span class="hljs-title function_ invoke__">unwrap</span>();
}
</code></pre>
<p>æˆ‘ä»¬çœ‹åˆ°æœ€åçš„<code>.unwrap()</code>è¯­å¥ï¼Œè¿™ä¸ªè¯­å¥åœ¨å¾—åˆ°Errï¼ˆå¤±è´¥ï¼‰çš„è¡¨è¾¾æ—¶ï¼Œä¸ä¼šåšå…œåº•å¤„ç†æˆ–è€…æ‰“å‡ºæ—¥å¿—ï¼Œè€Œæ˜¯ç›´æ¥æŠ›å‡ºPanicï¼Œè®©Rustçº¿ç¨‹å®•æœºï¼</p>
<p>å› æ­¤ï¼Œå½“é…ç½®æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶ï¼Œå¼•å‘Errç»“æœæ—¶ï¼Œcloudflareçš„å¼€å‘äººå‘˜æ²¡æœ‰åœ¨è¿™é‡Œåšå…œåº•å¤„ç†ï¼Œå¯¼è‡´æŠ›å‡ºPanicï¼š</p>
<p><code>thread fl2_worker_thread panicked: called Result::unwrap() on an Err value</code></p>
<h2 data-id="heading-11">ç®€å•æ€»ç»“</h2>
<p>ä¸€æ¡è¢«å¿½ç•¥çš„æ•°æ®åº“æŸ¥è¯¢è¯­å¥ + ä¸€æ¬¡æƒé™è°ƒæ•´ â†’ å¯¼è‡´é…ç½®é‡å¤å†™å…¥ â†’ é…ç½®æ–‡ä»¶è¿‡å¤§ â†’ Bot Management å´©æºƒ â†’ FL æ¨¡å— panic â†’ å…¨çƒèŒƒå›´ 5xxã€‚</p>
<p>è¿™è¯´æ˜äº†ä¸€ä¸ªæœ´ç´ äº‹å®ï¼š</p>
<blockquote>
<p><strong>åºå¤§çš„äº’è”ç½‘æ˜¯ç”±æ— æ•°æå°çš„ç»†èŠ‚äº’ç›¸ç‰µåŠ¨çš„ï¼Œä¸€ä¸ªå°å°çš„ SQL æŸ¥è¯¢ä¹Ÿå¯èƒ½è®©åŠä¸ªäº’è”ç½‘å€’ä¸‹ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[17. Vue3 ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7572480736362119174</link>    <guid>https://juejin.cn/post/7572480736362119174</guid>    <pubDate>2025-11-16T09:53:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572480736362119174" data-draft-id="7567194020462133274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="17. Vue3 ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-16T09:53:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Cobyte"/> <meta itemprop="url" content="https://juejin.cn/user/668147376989517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            17. Vue3 ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/668147376989517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Cobyte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T09:53:14.000Z" title="Sun Nov 16 2025 09:53:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    31
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c}.markdown-body a:active,.markdown-body a:hover{border-bottom:1.5px solid #3eaf7c}.markdown-body a:before{content:"â‡²"}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(62,175,124,.2)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none}.markdown-body ul li:before{content:"â€¢";margin-right:4px;color:#3eaf7c}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æœ€è¿‘åœ¨å…¬å¸å®ç°ä¸€ä¸ªä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„éœ€æ±‚ã€‚ç®€å•æ¥è¯´ï¼Œæœ‰ä¸¤ä¸ªéœ€æ±‚ï¼Œç¬¬ä¸€ä¸ªæ˜¯å®ç°ä¸šåŠ¡ç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½ï¼Œç¬¬äºŒï¼Œå› ä¸ºä¸šåŠ¡ç»„ä»¶åº“é‡Œé¢æœ‰å¼•ç”¨äº†ç±»ä¼¼ Element Plus çš„ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼Œæ‰€ä»¥åœ¨å®ç°ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„åŒæ—¶ï¼Œä¸šåŠ¡ç»„ä»¶åº“é‡Œé¢çš„å¼•ç”¨çš„ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ä¹Ÿè¦å®ç°æŒ‰éœ€åŠ è½½ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªç¼–ç¨‹æŠ€æœ¯äººå‘˜ï¼Œå³ä¾¿æœ‰äº†AIï¼Œä¹Ÿéœ€è¦ç ”ç©¶åº•å±‚çš„æŠ€æœ¯åŸç†ï¼Œç”šè‡³éœ€è¦æ¯”æ²¡æœ‰AIçš„æ—¶ä»£ï¼Œéœ€è¦æ›´åŠ æ·±å…¥ç ”ç©¶ï¼Œåœ¨AIæ—¶ä»£ï¼ŒåŸºç¡€çš„éƒ½é€šè¿‡AIå®ç°äº†ï¼Œåªæœ‰AIè§£å†³ä¸äº†çš„é—®é¢˜ï¼Œæœ€ç»ˆè¿˜å¾—é ä½ è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†å»è§£å†³ï¼Œè€Œè¿™å°†æ˜¯ä½ çš„æ ¸å¿ƒç«äº‰åŠ›çš„ä½“ç°ï¼Œæ‰€ä»¥åœ¨AIæ—¶ä»£å¯¹æŠ€æœ¯äººå‘˜çš„æŠ€æœ¯ç´ å…»è¦æ±‚å°†æ›´åŠ çš„é«˜ã€‚</p>
<p>æ‰¯è¿œäº†ï¼Œæˆ‘ä»¬å›åˆ°ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†çš„ä¸»é¢˜ä¸Šæ¥ã€‚</p>
<p>ä¸€èˆ¬åœ¨é¡¹ç›®ä¸­å¦‚æœæ²¡æœ‰è¿›è¡Œç»„ä»¶åº“æŒ‰éœ€åŠ è½½é…ç½®ï¼Œéƒ½æ˜¯ä¸€å¼€å§‹å°±å…¨é‡åŠ è½½è¿›è¡Œå…¨å±€ç»„ä»¶æ³¨å†Œï¼Œè¿™æ ·å°±ç­‰äºæ•´ä¸ªç»„ä»¶åº“åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±å…¨éƒ¨åŠ è½½äº†ï¼Œå¦‚æœåœ¨è¿½æ±‚æ€§èƒ½çš„é¡¹ç›®ä¸­ï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚è¿™æ—¶æˆ‘ä»¬å°±è¦å®ç°ç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½ï¼Œæ¥æé«˜æ€§èƒ½ã€‚</p>
<h3 data-id="heading-1">æŒ‰éœ€åŠ è½½çš„åŸºæœ¬å®ç°åŸç†</h3>
<p>é¦–å…ˆä»€ä¹ˆæ˜¯æŒ‰éœ€åŠ è½½ï¼Ÿ</p>
<p>æ‰€è°“æŒ‰éœ€åŠ è½½ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æœ‰éœ€è¦å°±åŠ è½½ï¼Œä¸éœ€è¦å°±ä¸åŠ è½½ï¼Œæ¯”å¦‚ <code>Element Plus</code> ç»„ä»¶åº“æœ‰å‡ åä¸ªç»„ä»¶ï¼Œå¯èƒ½åœ¨æˆ‘ä»¬çš„é¡¹ç›®åªç”¨åˆ°äº†åˆ°äº†å…¶ä¸­ä¸€ä¸ªç»„ä»¶ <code>&lt;el-button&gt;</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¸Œæœ›åªåŠ è½½è·Ÿè¿™ä¸ªæŒ‰é’®ç»„ä»¶ç›¸å…³çš„ä»£ç ï¼Œä»è€Œè¾¾åˆ°å‡å°‘æ‰“åŒ…ä½“ç§¯çš„æ•ˆæœã€‚</p>
<p>æŒ‰éœ€åŠ è½½æœ€ç®€å•çš„å®ç°æ–¹å¼å°±æ˜¯æ‰‹åŠ¨è®¾ç½®ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus/es/components/button'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'element-plus/es/components/button/style/index'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: { <span class="hljs-title class_">ElButton</span> },
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æˆ‘ä»¬åƒä¸Šè¿°ä¾‹å­è¿™æ ·æ‰‹åŠ¨å¼•ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“çš„è¯ï¼Œåœ¨æ‰“åŒ…çš„æ—¶å€™å°±åªä¼šæ‰“åŒ…å¼•ç”¨åˆ°çš„ç»„ä»¶ï¼Œå› ä¸ºç›®å‰çš„å¼€æºç»„ä»¶åº“åŸºæœ¬éƒ½å®ç°äº†åˆ©äº Tree Shaking çš„ <code>ESM</code> æ¨¡å—åŒ–å®ç°ã€‚</p>
<p>å¦‚æœæ¯ä¸ªä¸šåŠ¡ç»„ä»¶éƒ½éœ€è¦è¿›è¡Œä¸Šè¿°è®¾ç½®ï¼Œå…¶å®è¿˜æ˜¯æŒºç¹ççš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›åªåœ¨ template ä¸­ç›´æ¥è°ƒç”¨å°±å¥½ï¼Œå…¶ä»–ä»€ä¹ˆè®¾ç½®éƒ½ä¸éœ€è¦ï¼Œå°±åƒå…¨å±€æ³¨å†Œç»„ä»¶é‚£æ ·ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>è€Œå‰©ä¸‹éƒ¨åˆ†çš„ä»£ç ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ‰“åŒ…æˆ–è€…è¿è¡Œçš„æ—¶å€™è‡ªåŠ¨è®¾ç½®ä¸Šå»ã€‚ä¸»è¦æ˜¯ä»¥ä¸‹éƒ¨åˆ†çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus/es/components/button'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'element-plus/es/components/button/style/index'</span>
</code></pre>
<p>ä¸Šè¿°éƒ¨åˆ†çš„ä»£ç ï¼Œå¸Œæœ›è‡ªåŠ¨åŠ è½½ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®ã€‚æ•´ä¸ªæ‰€è°“æŒ‰éœ€åŠ è½½æ‰€éœ€è¦å®ç°çš„å°±æ˜¯ä¸Šè¿°çš„åŠŸèƒ½ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆä¸Šè¿°æ¨¡æ¿ä»£ç çš„ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createTextVNode <span class="hljs-keyword">as</span> _createTextVNode, resolveComponent <span class="hljs-keyword">as</span> _resolveComponent, withCtx <span class="hljs-keyword">as</span> _withCtx, createVNode <span class="hljs-keyword">as</span> _createVNode, openBlock <span class="hljs-keyword">as</span> _openBlock, createElementBlock <span class="hljs-keyword">as</span> _createElementBlock } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx, _cache, $props, $setup, $data, $options</span>) {
  <span class="hljs-keyword">const</span> _component_el_button = <span class="hljs-title function_">_resolveComponent</span>(<span class="hljs-string">"el-button"</span>)

  <span class="hljs-keyword">return</span> (<span class="hljs-title function_">_openBlock</span>(), <span class="hljs-title function_">_createElementBlock</span>(<span class="hljs-string">"template"</span>, <span class="hljs-literal">null</span>, [
    <span class="hljs-title function_">_createVNode</span>(_component_el_button, <span class="hljs-literal">null</span>, {
      <span class="hljs-attr">default</span>: <span class="hljs-title function_">_withCtx</span>(<span class="hljs-function">() =&gt;</span> [
        <span class="hljs-title function_">_createTextVNode</span>(<span class="hljs-string">"æŒ‰é’®"</span>)
      ], <span class="hljs-literal">undefined</span>, <span class="hljs-literal">true</span>),
      <span class="hljs-attr">_</span>: <span class="hljs-number">1</span> <span class="hljs-comment">/* STABLE */</span>
    })
  ]))
}
</code></pre>
<p>æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ° Vue3 çš„å†…ç½®å‡½æ•° <code>_resolveComponent("el-button")</code> éƒ¨åˆ†ï¼Œç„¶åæ›¿æ¢æˆå¯¹åº”çš„ç»„ä»¶ä»£ç å³å¯ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ import { ElButton } from 'element-plus/es/components/button'</span>
<span class="hljs-addition">+ import 'element-plus/es/components/button/style/index'</span>
import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from "vue"

export function render(_ctx, _cache, $props, $setup, $data, $options) {
<span class="hljs-deletion">-  const _component_el_button = _resolveComponent("el-button")</span>
<span class="hljs-addition">+ const _component_el_button = ElButton</span>

  return (_openBlock(), _createElementBlock("template", null, [
    _createVNode(_component_el_button, null, {
      default: _withCtx(() =&gt; [
        _createTextVNode("æŒ‰é’®")
      ], undefined, true),
      _: 1 /* STABLE */
    })
  ]))
}
</code></pre>
<p>ä¸Šè¿°å°±æ˜¯ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„åŸºæœ¬å®ç°åŸç†ã€‚</p>
<h3 data-id="heading-2">ä½¿ç”¨ Vite æ‰“åŒ…ç»„ä»¶åº“</h3>
<p>ä¸ºäº†æ›´å¥½è¿˜åŸå®é™…åœºæ™¯ï¼Œæˆ‘ä»¬å¿«é€Ÿåˆ›å»ºä¸€ä¸ªç»„ä»¶åº“é¡¹ç›®å¹¶ä¸”é€šè¿‡ Vite è¿›è¡Œæ‰“åŒ…ã€‚
é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>cobyte-vite-ui</code> çš„ç»„ä»¶åº“ç›®å½•ï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆå§‹åŒ– Node é¡¹ç›®ï¼Œæ‰§è¡Œ <code>pnpm init</code>, ä¼šè‡ªåŠ¨ç”Ÿæˆ <code>package.json</code>  æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cobyte-vite-ui"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ISC"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"packageManager"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm@10.20.0"</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åœ¨æ ¹ç›®å½•æ–°å»º <code>pnpm-workspace.yaml</code> æ–‡ä»¶è¿›è¡Œ Monorepo é¡¹ç›®é…ç½®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">packages:
<span class="hljs-bullet">  -</span> packages/*
<span class="hljs-bullet">  -</span> play
</code></pre>
<p>æ€»çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-go" lang="go">â”œâ”€â”€ packages
â”‚   â”œâ”€â”€ components
â”‚   â”œâ”€â”€ hooks
â”‚   â””â”€â”€ utils
â”œâ”€â”€ play
â”œâ”€â”€ <span class="hljs-keyword">package</span>.json
â””â”€â”€ pnpm-workspace.yaml
</code></pre>
<p>æ¥ç€æˆ‘ä»¬å®‰è£…ä¸€äº›å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">pnpm <span class="hljs-keyword">add</span> vite typescript <span class="hljs-variable">@vitejs</span><span class="hljs-operator">/</span>plugin<span class="hljs-operator">-</span>vue sass <span class="hljs-variable">@types</span><span class="hljs-operator">/</span>node <span class="hljs-operator">-</span>D <span class="hljs-operator">-</span>w
</code></pre>
<p>æ¥ç€æˆ‘ä»¬å®‰è£…ä¸€ä¸‹ vue ä¾èµ–ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> vue -w
</code></pre>
<p>åŸºç¡€ä¾èµ–å®‰è£…å®Œæ¯•ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸‹ TS çš„é…ç½®ï¼Œå› ä¸ºæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ª TS çš„é¡¹ç›®ï¼Œåœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª <code>tsconfig.json</code>ï¼Œé…ç½®å†…å®¹å¯ä»¥ç®€å•è®¾ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">{
    <span class="hljs-string">"compilerOptions"</span>: {
      <span class="hljs-string">"target"</span>: <span class="hljs-string">"ESNext"</span>,
      <span class="hljs-string">"module"</span>: <span class="hljs-string">"NodeNext"</span>,
      <span class="hljs-string">"sourceMap"</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å…³é”®ï¼šå¯ç”¨æºæ˜ å°„</span>
      <span class="hljs-string">"outDir"</span>: <span class="hljs-string">"./dist"</span>, <span class="hljs-comment">// å¯é€‰ï¼šæŒ‡å®šè¾“å‡ºç›®å½•</span>
      <span class="hljs-string">"esModuleInterop"</span>: <span class="hljs-literal">true</span>
    }
}
</code></pre>
<p>æ¥ç€æˆ‘ä»¬å°±åœ¨ <code>packages/components</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæµ‹è¯•æŒ‰é’®ç»„ä»¶</p>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/button/button.vue</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æµ‹è¯•æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'co-button'</span>,
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/button/index.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> button <span class="hljs-keyword">from</span> <span class="hljs-string">"./button.vue"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CoButton</span> = button;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CoButton</span>;
</code></pre>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/components.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CoButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./button'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
    <span class="hljs-title class_">CoButton</span>
]
</code></pre>
<p>å°†æ‰€æœ‰ç»„ä»¶é›†ä¸­åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ç»Ÿä¸€å¯¼å‡ºï¼Œæ–¹ä¾¿æ‰¹é‡ç®¡ç†å’Œä½¿ç”¨ã€‚</p>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/defaults.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">App</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> components <span class="hljs-keyword">from</span> <span class="hljs-string">'./components'</span>;

<span class="hljs-keyword">const</span> install = <span class="hljs-keyword">function</span> (<span class="hljs-params">app: App</span>) {
    components.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">component</span> =&gt;</span> {
        app.<span class="hljs-title function_">component</span>(component.<span class="hljs-property">name</span>, component);
    });
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    install
};
</code></pre>
<p>ç›®å½•è·¯å¾„ï¼š<code>packages/components/index.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./button'</span>;

<span class="hljs-keyword">import</span> install <span class="hljs-keyword">from</span>  <span class="hljs-string">'./defaults'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> install;
</code></pre>
<p>æˆ‘ä»¬å†é…ç½®ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œç›®å½•è·¯å¾„ï¼š<code>packages/utils/index.ts</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testUtils</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'testUtils'</span>);
}
</code></pre>
<p>å¦‚æœå¤§å®¶å¯¹åˆ›å»ºç»„ä»¶åº“æ¯”è¾ƒæœ‰ç»éªŒçš„è¯ï¼Œå°±çŸ¥é“ä¸Šè¿°æ­¥éª¤ï¼Œæ˜¯ Vue3 ç»„ä»¶åº“çš„åŸºç¡€è®¾ç½®ï¼Œå„å¤§ç»„ä»¶åº“çš„å®ç°è™½ç„¶å·®å¼‚å¾ˆå¤§ï¼Œä½†æœ€æ ¸å¿ƒæœºåˆ¶éƒ½å¯ä»¥ç®€å•å½’çº³ä¸ºä¸Šè¿°è®¾ç½®å†…å®¹ã€‚
å¤§å®¶å¦‚æœæƒ³è¯¦ç»†äº†è§£æ›´å¤šä¹Ÿå¯ä»¥çœ‹çœ‹æœ¬æ ç›®å‰é¢ç« èŠ‚çš„å†…å®¹ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬å°±åˆ°äº†æˆ‘ä»¬æœ€æ ¸å¿ƒçš„ç»„ä»¶åº“æ‰“åŒ…çš„ç¯èŠ‚äº†ï¼Œæˆ‘ä»¬åœ¨æ ¹æœ¬ç›®å½•åˆ›å»ºä¸€ä¸ª <code>vite.config.ts</code>ï¼Œè®¾ç½®å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"vite"</span>;
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">"@vitejs/plugin-vue"</span>;
<span class="hljs-keyword">import</span> path, { resolve } <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"fs"</span>;

<span class="hljs-comment">// åŠ¨æ€è·å–ç»„ä»¶ç›®å½•åˆ—è¡¨</span>
<span class="hljs-keyword">const</span> componentsDir = <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"./packages/components"</span>);
<span class="hljs-keyword">const</span> modules = fs.<span class="hljs-title function_">readdirSync</span>(componentsDir).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> fullPath = path.<span class="hljs-title function_">join</span>(componentsDir, name);
    <span class="hljs-comment">// åªè·å–ç›®å½•ï¼Œæ’é™¤æ–‡ä»¶</span>
    <span class="hljs-keyword">return</span> fs.<span class="hljs-title function_">statSync</span>(fullPath).<span class="hljs-title function_">isDirectory</span>();
});

<span class="hljs-keyword">const</span> entryArr = {
    <span class="hljs-comment">// ä¸»å…¥å£</span>
    <span class="hljs-attr">index</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"./packages/components/index.ts"</span>),

    <span class="hljs-comment">// å·¥å…·å…¥å£</span>
    <span class="hljs-attr">utils</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"./packages/utils/index.ts"</span>),
};

<span class="hljs-comment">// ä¸ºæ¯ä¸ªç»„ä»¶åˆ›å»ºç‹¬ç«‹å…¥å£</span>
modules.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
    entryArr[<span class="hljs-string">`components/<span class="hljs-subst">${name}</span>/index`</span>] = <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">`./packages/components/<span class="hljs-subst">${name}</span>/index.ts`</span>);
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ command, mode }</span>) =&gt;</span> {
    <span class="hljs-comment">// ä¸»æ„å»ºé…ç½®</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">plugins</span>: [
            <span class="hljs-title function_">vue</span>(),
        ],
        <span class="hljs-attr">build</span>: {
            <span class="hljs-attr">lib</span>: {
                <span class="hljs-attr">entry</span>: entryArr,
                <span class="hljs-attr">formats</span>: [<span class="hljs-string">"es"</span>], <span class="hljs-comment">// åªæ„å»º ES æ¨¡å—</span>
                <span class="hljs-attr">cssFileName</span>: <span class="hljs-string">"style"</span>,
            },
            <span class="hljs-attr">rollupOptions</span>: {
                <span class="hljs-attr">external</span>: [
                    <span class="hljs-string">"vue"</span>,
                ],
                <span class="hljs-attr">output</span>: {
                    <span class="hljs-attr">format</span>: <span class="hljs-string">"es"</span>,
                    <span class="hljs-attr">preserveModules</span>: <span class="hljs-literal">true</span>,
                },
            },
        },
    };
});
</code></pre>
<p>è®¾ç½®å®Œ Vite é…ç½®æ–‡ä»¶åï¼Œæˆ‘ä»¬è¿˜è¦è®¾ç½® <code>packages.json</code> ä¸­çš„æ‰“åŒ…å‘½ä»¤è„šæœ¬é…ç½®ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"build"</span>: <span class="hljs-string">"vite build"</span>
  },
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨æ ¹ç›®å½•è¿è¡Œæ‰“åŒ…å‘½ä»¤äº†ï¼š<code>pnpm build</code>ã€‚</p>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œæˆ‘ä»¬æˆåŠŸæ‰“åŒ…äº†æˆ‘ä»¬çš„ç»„ä»¶åº“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c195ef5bfdd043c2a61e6435e0d4c4f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905528&amp;x-signature=uSri%2FlN4ICmesLuFyDi%2BF3Vssl8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">é€šè¿‡ pnpm å®‰è£…æœ¬åœ° npm åŒ…</h3>
<p>æ¥ç€æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">pnpm <span class="hljs-built_in">create</span> vite play <span class="hljs-comment">--template vue-ts</span>
</code></pre>
<p>ä¸Šè¿° play å°±æ˜¯æµ‹è¯•é¡¹ç›®ç›®å½•ï¼Œæˆ‘ä»¬åŸæœ¬å°±å»ºäº†ä¸€ä¸ª play ç›®å½•ï¼Œç°åœ¨è¿™æ¡å‘½ä»¤ä¼šç›´æ¥åœ¨ play ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªä½¿ç”¨ Vite åˆ›å»ºçš„ Vue é¡¹ç›®ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬ä¿®æ”¹æ ¹ç›®å½•çš„ package.json æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- "main": "index.js",</span>
<span class="hljs-addition">+ "module": "/dist/index.mjs",</span>
</code></pre>
<p>æ¥ç€æˆ‘ä»¬è¿›å…¥ play ç›®å½•ï¼Œé€šè¿‡ pnpm å®‰è£…æœ¬åœ° npm åŒ…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> ../
</code></pre>
<p>è¿è¡Œå®Œä¸Šè¿°å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>./play/packages.json</code> æ–‡ä»¶å˜åŒ–å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3f21a2e6b8f4ee08a4a56ae78e9f51e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905528&amp;x-signature=GmvFW3i3GJ9n8Fuw656PlJx5h%2Fc%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æˆåŠŸæŠŠæˆ‘ä»¬æœ¬åœ°çš„ npm åŒ…å®‰è£…åˆ° play æµ‹è¯•é¡¹ç›®ä¸­äº†ã€‚</p>
<p>æ¥ç€ä¿®æ”¹ <code>./play/main.ts</code> å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CobyteViteUI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'cobyte-vite-ui'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'cobyte-vite-ui/dist/style.css'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">CobyteViteUI</span>)
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<p>æˆ‘ä»¬ç›´æ¥å¼•ç”¨æˆ‘ä»¬æœ¬åœ°åˆ›å»ºçš„ npm åŒ…ã€‚</p>
<p>æ¥ç€ä¿®æ”¹ <code>./play/App.vue</code> å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">co-button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">co-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æœ€åæˆ‘ä»¬è¿è¡Œ play æµ‹è¯•é¡¹ç›®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74f6c189f9d44171887736447e2e142d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905528&amp;x-signature=kvnojOly9beWhKfj52wsCyNla5U%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆåŠŸè¿è¡Œäº†æœ¬åœ°ç»„ä»¶åº“çš„ npm åŒ…ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å¸Œæœ›ä¸è¿›è¡Œå®Œæ•´å¼•å…¥ç»„ä»¶åº“ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">import { createApp } from 'vue'
import App from './App.vue'
<span class="hljs-deletion">- import CobyteViteUI from 'cobyte-vite-ui'</span>
<span class="hljs-deletion">- import 'cobyte-vite-ui/dist/style.css'</span>

const app = createApp(App)
<span class="hljs-deletion">- app.use(CobyteViteUI)</span>
app.mount('#app')
</code></pre>
<p>å³ä¾¿è¿™æ ·æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨æµ‹è¯•é¡¹ç›®ä¸­ä½¿ç”¨æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶ã€‚</p>
<h3 data-id="heading-4">é€šè¿‡é™æ€åˆ†æå®ç°æŒ‰éœ€åŠ è½½</h3>
<p>æ ¹æ®ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“ App.vue çš„æ¨¡æ¿å†…å®¹ä¼šè¢«ç¼–è¯‘æˆï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { resolveComponent <span class="hljs-keyword">as</span> _resolveComponent, createVNode <span class="hljs-keyword">as</span> _createVNode, openBlock <span class="hljs-keyword">as</span> _openBlock, createElementBlock <span class="hljs-keyword">as</span> _createElementBlock } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx, _cache, $props, $setup, $data, $options</span>) {
  <span class="hljs-keyword">const</span> _component_co_button = <span class="hljs-title function_">_resolveComponent</span>(<span class="hljs-string">"co-button"</span>)

  <span class="hljs-keyword">return</span> (<span class="hljs-title function_">_openBlock</span>(), <span class="hljs-title function_">_createElementBlock</span>(<span class="hljs-string">"template"</span>, <span class="hljs-literal">null</span>, [
    <span class="hljs-title function_">_createVNode</span>(_component_co_button)
  ]))
}
</code></pre>
<p>é‚£ä¹ˆæ ¹æ®ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“éœ€è¦æŠŠ <code>_resolveComponent("co-button")</code> éƒ¨åˆ†æ›¿æ¢æˆå¯¹åº”çš„ç»„ä»¶å¯¹è±¡ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ import CoButton from 'cobyte-vite-ui/dist/components/button'</span>
<span class="hljs-addition">+ import 'cobyte-vite-ui/dist/style.css'</span>
import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from "vue"

export function render(_ctx, _cache, $props, $setup, $data, $options) {
<span class="hljs-deletion">-  const _component_co_button = _resolveComponent("co-button")</span>
<span class="hljs-addition">+  const _component_co_button = CoButton</span>

  return (_openBlock(), _createElementBlock("template", null, [
    _createVNode(_component_co_button)
  ]))
}
</code></pre>
<p>é‚£ä¹ˆè¦å®ç°ä¸Šè¿°åŠŸèƒ½ï¼Œæˆ‘ä»¬å¾—é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vitejs.dev%2Fguide%2Fapi-plugin" target="_blank" title="https://cn.vitejs.dev/guide/api-plugin" ref="nofollow noopener noreferrer">Vite æ’ä»¶</a>æ¥å®ç°ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢å®‰è£…äº†ä¸€ä¸ª <code>@vitejs/plugin-vue</code> æ’ä»¶ï¼Œè¿™ä¸ª Vite æ’ä»¶çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯æŠŠ <code>.vue</code> æ–‡ä»¶ç¼–è¯‘æˆä¸Šè¿°çš„ js å†…å®¹ã€‚é‚£ä¹ˆæˆ‘ä»¬è¿™æ ·åœ¨å®ƒçš„åé¢ç»§ç»­æ·»åŠ ä¸€ä¸ªæ’ä»¶åœ¨ç¼–è¯‘åçš„ js å†…å®¹ä¸­å»å®ç°ä¸Šè¿°æ›¿æ¢åŠŸèƒ½å³å¯ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>./packages/utils/index.ts</code> æ–‡ä»¶ä¸­å®ç°è¿™ä¸ªè‡ªåŠ¨åŠ è½½ç»„ä»¶çš„ Vite æ’ä»¶ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">MagicString</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'magic-string'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">VitePluginAutoComponents</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vite-plugin-auto-component'</span>,

    <span class="hljs-comment">// transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨</span>
    <span class="hljs-comment">// code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {
      <span class="hljs-comment">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶</span>
      <span class="hljs-comment">// å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†</span>
      <span class="hljs-keyword">if</span>(<span class="hljs-regexp">/\.vue$/</span>.<span class="hljs-title function_">test</span>(id)) {
          <span class="hljs-comment">// åˆ›å»º MagicString å®ä¾‹ï¼Œç”¨äºé«˜æ•ˆåœ°ä¿®æ”¹å­—ç¬¦ä¸²å¹¶ç”Ÿæˆ source map</span>
          <span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MagicString</span>(code)
          <span class="hljs-comment">// åˆå§‹åŒ–ç»“æœæ•°ç»„ï¼Œç”¨äºå­˜å‚¨åŒ¹é…åˆ°çš„ç»„ä»¶ä¿¡æ¯</span>
          <span class="hljs-keyword">const</span> results = []

          <span class="hljs-comment">// ä½¿ç”¨ matchAll æ–¹æ³•æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„ resolveComponent è°ƒç”¨</span>
          <span class="hljs-comment">// æ­£åˆ™è¡¨è¾¾å¼è§£é‡Šï¼š</span>
          <span class="hljs-comment">// _?resolveComponent\d* - åŒ¹é…å¯èƒ½çš„å‡½æ•°åå˜ä½“ï¼ˆå¯èƒ½å¸¦ä¸‹åˆ’çº¿æˆ–æ•°å­—åç¼€ï¼‰</span>
          <span class="hljs-comment">// \("(.+?)"\) - åŒ¹é…æ‹¬å·å†…çš„å­—ç¬¦ä¸²å‚æ•°</span>
          <span class="hljs-comment">// g - å…¨å±€åŒ¹é…</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> match <span class="hljs-keyword">of</span> code.<span class="hljs-title function_">matchAll</span>(<span class="hljs-regexp">/_?resolveComponent\d*\("(.+?)"\)/g</span>)) {
              <span class="hljs-comment">// match[1] æ˜¯ç¬¬ä¸€ä¸ªæ•è·ç»„ï¼Œå³ç»„ä»¶åç§°å­—ç¬¦ä¸²</span>
              <span class="hljs-keyword">const</span> matchedName = match[<span class="hljs-number">1</span>]
              <span class="hljs-comment">// æ£€æŸ¥åŒ¹é…æ˜¯å¦æœ‰æ•ˆï¼š</span>
              <span class="hljs-comment">// match.index != null - ç¡®ä¿æœ‰åŒ¹é…ä½ç½®</span>
              <span class="hljs-comment">// matchedName - ç¡®ä¿æ•è·åˆ°ç»„ä»¶å</span>
              <span class="hljs-comment">// !matchedName.startsWith('_') - ç¡®ä¿ç»„ä»¶åä¸ä»¥_å¼€å¤´ï¼ˆå¯èƒ½æ˜¯å†…éƒ¨ç»„ä»¶ï¼‰</span>
              <span class="hljs-keyword">if</span> (match.<span class="hljs-property">index</span> != <span class="hljs-literal">null</span> &amp;&amp; matchedName &amp;&amp; !matchedName.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'_'</span>)) {
                  <span class="hljs-comment">// è®¡ç®—åŒ¹é…å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®</span>
                  <span class="hljs-keyword">const</span> start = match.<span class="hljs-property">index</span>
                  <span class="hljs-comment">// è®¡ç®—åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®</span>
                  <span class="hljs-keyword">const</span> end = start + match[<span class="hljs-number">0</span>].<span class="hljs-property">length</span>
                  <span class="hljs-comment">// å°†åŒ¹é…ä¿¡æ¯å­˜å…¥ç»“æœæ•°ç»„</span>
                  results.<span class="hljs-title function_">push</span>({
                      <span class="hljs-attr">rawName</span>: matchedName,  <span class="hljs-comment">// åŸå§‹ç»„ä»¶åç§°</span>
                      <span class="hljs-comment">// åˆ›å»ºæ›¿æ¢å‡½æ•°ï¼Œä½¿ç”¨ MagicString çš„ overwrite æ–¹æ³•æ›¿æ¢æŒ‡å®šèŒƒå›´çš„æ–‡æœ¬</span>
                      <span class="hljs-attr">replace</span>: <span class="hljs-function"><span class="hljs-params">resolved</span> =&gt;</span> s.<span class="hljs-title function_">overwrite</span>(start, end, resolved),
                  })
              }
          }

          <span class="hljs-comment">// éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> { rawName, replace } <span class="hljs-keyword">of</span> results) {
              <span class="hljs-comment">// å®šä¹‰è¦æ›¿æ¢çš„å˜é‡åï¼ˆè¿™é‡Œæš‚æ—¶ç¼–ç ä¸º CoButtonï¼‰</span>
              <span class="hljs-keyword">const</span> varName = <span class="hljs-string">`CoButton`</span>
              <span class="hljs-comment">// åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š</span>
              <span class="hljs-comment">// 1. å¯¼å…¥ CoButton ç»„ä»¶</span>
              <span class="hljs-comment">// 2. å¯¼å…¥æ ·å¼æ–‡ä»¶</span>
              s.<span class="hljs-title function_">prepend</span>(<span class="hljs-string">`import CoButton from 'cobyte-vite-ui/dist/components/button';\nimport 'cobyte-vite-ui/dist/style.css';\n`</span>)

              <span class="hljs-comment">// æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å</span>
              <span class="hljs-title function_">replace</span>(varName)
          }

          <span class="hljs-comment">// è¿”å›è½¬æ¢åçš„ä»£ç </span>
          <span class="hljs-keyword">return</span> {
              <span class="hljs-attr">code</span>: s.<span class="hljs-title function_">toString</span>(),  <span class="hljs-comment">// è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²</span>
              <span class="hljs-attr">map</span>: <span class="hljs-literal">null</span>, 
          }
      }
    },
  }
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ä¸Šè¿° Vite æ’ä»¶ä¸­ä½¿ç”¨åˆ°äº†ä¸€ä¸ªæ–°å·¥å…·åº“ <code>magic-string</code>ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸‹å®ƒçš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> magic-<span class="hljs-built_in">string</span> -D -w
</code></pre>
<p><code>magic-string</code>Â æ˜¯ä¸€ä¸ªä¸“æ³¨äºå­—ç¬¦ä¸²æ“ä½œï¼Œä¸»è¦ä½œç”¨æ˜¯å¯¹æºä»£ç å¯ä»¥è¿›è¡Œ<strong>ç²¾å‡†çš„æ’å…¥ã€åˆ é™¤ã€æ›¿æ¢ç­‰æ“ä½œ</strong>ã€‚</p>
<p>ä¸Šè¿°ç¼–å†™çš„ Vite çš„æ’ä»¶ä¸»è¦æ˜¯å®ç°åœ¨<code>.vue</code> æ–‡ä»¶ä¸­æŸ¥æ‰¾æ‰€æœ‰å½¢å¦‚ <code>resolveComponent("xxx")</code> çš„å‡½æ•°è°ƒç”¨ï¼Œå¯¹äºæ¯ä¸€ä¸ªæ‰¾åˆ°çš„è°ƒç”¨ï¼Œå®ƒä¼šåœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªå›ºå®šçš„å¯¼å…¥è¯­å¥ï¼Œä¾‹å¦‚å¯¼å…¥ <code>CoButton</code> ç»„ä»¶å’Œæ ·å¼ã€‚æœ€åæŠŠæ‰¾åˆ°çš„<code>resolveComponent("xxx")</code> æ›¿æ¢æˆå¯¹åº”çš„ç»„ä»¶ï¼Œä¾‹å¦‚ <code>CoButton</code>ã€‚</p>
<p>ç„¶åæˆ‘ä»¬åœ¨æ ¹ç›®å½•é‡æ–°æ‰“åŒ…ï¼Œæ¥ç€åœ¨ play ç›®å½•ä¸­çš„ <code>vite.config.ts</code> æ–‡ä»¶ä¸­è¿›è¡Œä»¥ä¸‹ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
<span class="hljs-addition">+ import AutoComponents from 'cobyte-vite-ui/dist/utils'</span>

// https://vite.dev/config/
export default defineConfig({
<span class="hljs-deletion">-  plugins: [vue()],</span>
<span class="hljs-addition">+  plugins: [vue(), AutoComponents()],</span>
})
</code></pre>
<p>æ¥ç€æˆ‘ä»¬å†æ¬¡é‡å¯ play æµ‹è¯•é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å³ä¾¿æˆ‘ä»¬ä¸å¯¼å…¥ä»»ä½•æˆ‘ä»¬ç¼–å†™çš„ç»„ä»¶åº“è®¾ç½®ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥åœ¨ play é¡¹ç›®ä¸­æˆåŠŸä½¿ç”¨ <code>CoButton</code> ç»„ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74f6c189f9d44171887736447e2e142d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905528&amp;x-signature=kvnojOly9beWhKfj52wsCyNla5U%3D" alt="image.png" loading="lazy"/></p>
<p>åŒæ—¶æˆ‘ä»¬åœ¨ç½‘ç»œçª—å£å¯ä»¥æŸ¥çœ‹åˆ° App.vue æ–‡ä»¶çš„å†…å®¹å˜åŒ–å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f36029b5c57d4c9ca82ddb0fecd2f3be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905528&amp;x-signature=t1CzRagQrOlUssF9zNOZpEvdDqI%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°<strong>æˆ‘ä»¬é€šè¿‡é™æ€åˆ†æä»£ç ï¼Œè¯†åˆ«å¹¶æ›¿æ¢ Vue3 çš„ç»„ä»¶è§£æå‡½æ•°ï¼ŒæˆåŠŸå®ç°äº†ç»„ä»¶çš„è‡ªåŠ¨å¯¼å…¥åŠŸèƒ½</strong>ã€‚ä½†ä¸Šè¿°å®ç°ä¸ºäº†å¿«é€ŸéªŒè¯åŠŸèƒ½ï¼Œæ— è®ºåŒ¹é…åˆ°çš„ç»„ä»¶åæ˜¯ä»€ä¹ˆï¼Œéƒ½å¯¼å…¥ <code>CoButton</code> ç»„ä»¶ï¼Œå¹¶æ›¿æ¢ä¸º <code>CoButton</code>ã€‚è¿™æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ï¼Œåº”è¯¥æ ¹æ®åŒ¹é…åˆ°çš„ç»„ä»¶ååŠ¨æ€å¯¼å…¥å¯¹åº”çš„ç»„ä»¶ã€‚</p>
<h3 data-id="heading-5">è‡ªåŠ¨åŒ–è·¯å¾„è§£æ</h3>
<p>å› ä¸ºæˆ‘ä»¬çš„ç»„ä»¶ç¼–è¯‘åçš„è°ƒç”¨å˜æˆ <code>_resolveComponent("co-button")</code>ï¼Œç»„ä»¶åç§°å˜æˆäº† <code>co-button</code>ï¼Œè€Œæˆ‘ä»¬åœ¨å¯¼å…¥çš„è¯­å¥æ˜¯è¿™æ ·çš„ <code>import CoButton from 'cobyte-vite-ui/dist/components/button'</code>ï¼Œç»„ä»¶åç§°åˆéœ€è¦å˜æˆ <code>CoButton</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠåŒ¹é…åˆ°çš„ <code>co-button</code> å˜æˆ <code>CoButton</code>ã€‚</p>
<p>ä»£ç è¿­ä»£å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¸•æ–¯å¡å‘½åï¼ˆå³å¤§é©¼å³°ï¼Œæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼‰</span>
<span class="hljs-addition">+ export function pascalCase(str: string) {</span>
<span class="hljs-addition">+    return capitalize(camelCase(str))</span>
<span class="hljs-addition">+ }</span>
<span class="hljs-addition">+ // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºé©¼å³°å‘½å  </span>
<span class="hljs-addition">+ export function camelCase(str: string) {</span>
<span class="hljs-addition">+    return str.replace(/-(\w)/g, (_, c) =&gt; (c ? c.toUpperCase() : ''))</span>
<span class="hljs-addition">+ }</span>
<span class="hljs-addition">+ // å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¤§å†™ï¼Œä½¿ç”¨ charAt(0) è·å–ç¬¬ä¸€ä¸ªå­—ç¬¦å¹¶è½¬æ¢ä¸ºå¤§å†™ï¼Œç„¶ååŠ ä¸Šå‰©ä½™å­—ç¬¦ä¸²ï¼ˆä»ç´¢å¼•1å¼€å§‹ï¼‰</span>
<span class="hljs-addition">+ export function capitalize(str: string) {</span>
<span class="hljs-addition">+    return str.charAt(0).toUpperCase() + str.slice(1)</span>
<span class="hljs-addition">+ }</span>

export default function VitePluginAutoComponents() {
    return {
      // æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯
      name: 'vite-plugin-auto-component',
  
      // transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨
      // code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„
      transform(code, id) {
        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶
        // å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†
        if(/\.vue$/.test(id)) {
            // çœç•¥...
  
            // éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†
            for (const { rawName, replace } of results) {
<span class="hljs-addition">+                // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§é©¼å³°</span>
<span class="hljs-addition">+                const name = pascalCase(rawName)</span>
<span class="hljs-addition">+                // åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶</span>
<span class="hljs-addition">+                if (!name.match(/^Co[A-Z]/)) return</span>
                // å®šä¹‰è¦æ›¿æ¢çš„å˜é‡å
<span class="hljs-deletion">-                const varName = `CoButton`</span>
<span class="hljs-addition">+                const varName = name</span>
                // åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š
                // 1. å¯¼å…¥ CoButton ç»„ä»¶
                // 2. å¯¼å…¥æ ·å¼æ–‡ä»¶
                s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/button';\nimport 'cobyte-vite-ui/dist/style.css';\n`)
  
                // æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å
                replace(varName)
            }
  
            // è¿”å›è½¬æ¢åçš„ä»£ç 
            return {
                code: s.toString(),  // è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²
                map: null, 
            }
        }
      },
    }
}
</code></pre>
<p>ç»è¿‡ä¸Šè¿°å®ç°è¿˜æ˜¯å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼Œæ— è®ºÂ <code>rawName</code>Â æ˜¯ä»€ä¹ˆï¼Œç»„ä»¶éƒ½æ˜¯ä»Â <code>'cobyte-vite-ui/dist/components/button'</code>Â è¿™ä¸ªå›ºå®šè·¯å¾„å¯¼å…¥ã€‚è¿™æ„å‘³ç€å³ä½¿ä½¿ç”¨äº†Â <code>resolveComponent("CoTable")</code>ï¼Œæ’ä»¶ä¾ç„¶ä¼šå°è¯•ä»Â <code>button</code>Â æ–‡ä»¶å¯¼å…¥ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå¯¼å…¥è·¯å¾„åº”æ ¹æ®ç»„ä»¶ååŠ¨æ€ç”Ÿæˆã€‚æ‰€ä»¥æˆ‘ä»¬ç»§ç»­å®ç°åŠ¨æ€ç»„ä»¶è·¯å¾„ï¼Œä¾‹å¦‚Â <code>CoTableColumn</code>Â ç»„ä»¶æ˜ å°„åˆ°Â <code>'cobyte-vite-ui/dist/components/table-column'</code>ã€‚</p>
<p>æˆ‘ä»¬ä¸Šè¿°çš„ç»„ä»¶æ˜¯ "CoButton"ï¼Œé‚£ä¹ˆè½¬æ¢è¿‡ç¨‹åˆ™æ˜¯ï¼š<br/>
"CoButton" -&gt; å»æ‰"Co" -&gt; "Button" -&gt; kebabCase -&gt; "button"ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡å®ç°ä¸€ä¸ª kebabCase å‡½æ•°è¿›è¡Œç»„ä»¶è·¯å¾„è½¬æ¢è§£æï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// çœç•¥...

<span class="hljs-addition">+ // å°†é©¼å³°å‘½åçš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºçŸ­æ¨ªçº¿åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ˆå³kebab-caseï¼‰</span>
<span class="hljs-addition">+ export function kebabCase(key: string) {</span>
<span class="hljs-addition">+    const result = key.replace(/([A-Z])/g, ' $1').trim()</span>
<span class="hljs-addition">+    return result.split(' ').join('-').toLowerCase()</span>
<span class="hljs-addition">+ }</span>

export default function VitePluginAutoComponents() {
    return {
      // æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯
      name: 'vite-plugin-auto-component',
  
      // transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨
      // code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„
      transform(code, id) {
        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶
        // å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†
        if(/\.vue$/.test(id)) {
            // çœç•¥...
  
            // éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†
            for (const { rawName, replace } of results) {
                // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§é©¼å³°
                const name = pascalCase(rawName)
                // åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶
                if (!name.match(/^Co[A-Z]/)) return
<span class="hljs-addition">+                // ç»„ä»¶è·¯å¾„è½¬æ¢</span>
<span class="hljs-addition">+                const partialName = kebabCase(name.slice(2))</span>
                // å®šä¹‰è¦æ›¿æ¢çš„å˜é‡å
                const varName = name
                // åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š
                // 1. å¯¼å…¥ CoButton ç»„ä»¶
                // 2. å¯¼å…¥æ ·å¼æ–‡ä»¶
<span class="hljs-deletion">-                s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/button';\nimport 'cobyte-vite-ui/dist/style.css';\n`)</span>
<span class="hljs-addition">+                s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/${partialName}';\nimport 'cobyte-vite-ui/dist/style.css';\n`)</span>
  
                // æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å
                replace(varName)
            }
  
            // è¿”å›è½¬æ¢åçš„ä»£ç 
            return {
                code: s.toString(),  // è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²
                map: null, 
            }
        }
      },
    }
}
</code></pre>
<p>ç»è¿‡ä¸Šè¿°è¿­ä»£åï¼Œæˆ‘ä»¬é‡æ–°æ‰“åŒ…ï¼Œé‡æ–°å¯åŠ¨ play æµ‹è¯•é¡¹ç›®ï¼Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„ä»£ç æ˜¯èƒ½å¤Ÿæ­£å¸¸è¿è¡Œçš„ï¼Œè¯´æ˜æˆ‘ä»¬ä¸Šè¿°çš„è¿­ä»£æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚<strong>è‡³æ­¤æˆ‘ä»¬ä¸ºç»„ä»¶è‡ªåŠ¨å¯¼å…¥æä¾›äº†æ ¸å¿ƒçš„è·¯å¾„è§£æèƒ½åŠ›</strong>ã€‚</p>
<h3 data-id="heading-6">å¼•å…¥è§£æå™¨ (Resolver) æ¦‚å¿µ</h3>
<p>å½“å‰æ’ä»¶ç¡¬ç¼–ç äº†ç»„ä»¶åº“çš„è·¯å¾„å’Œæ ·å¼æ–‡ä»¶ï¼Œåªèƒ½ç”¨äºç‰¹å®šçš„ç»„ä»¶åº“ï¼ˆcobyte-vite-uiï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥è§£æå™¨(Resolver)ï¼Œè®©æ’ä»¶æ”¯æŒä¸åŒçš„ç»„ä»¶åº“ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é…ç½®ä¸åŒçš„è§£æå™¨ã€‚</p>
<p>è§£æå™¨çš„ä½œç”¨æ˜¯æ ¹æ®ç»„ä»¶åè¿”å›ä¸€ä¸ªè§£æç»“æœï¼ŒåŒ…æ‹¬ç»„ä»¶çš„å¯¼å…¥è·¯å¾„å’Œæ ·å¼æ–‡ä»¶è·¯å¾„ä»¥åŠç»„ä»¶åŸå§‹åç§°ã€‚è¿™æ ·ï¼Œæ’ä»¶å°±å¯ä»¥é€šè¿‡è§£æå™¨è¿”å›çš„å¯¹è±¡ä¿¡æ¯åŠ¨æ€è·å–ç»„ä»¶çš„å¯¼å…¥ä¿¡æ¯ï¼Œè€Œä¸æ˜¯å›ºå®šå†™æ­»ã€‚</p>
<p>åœ¨å®ç°è§£æå™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè®¾è®¡è§£æå™¨è¿”å›çš„å¯¹è±¡ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> component = {
    name, <span class="hljs-comment">// ç»„ä»¶åŸå§‹åç§°</span>
    <span class="hljs-attr">from</span>: <span class="hljs-string">`cobyte-vite-ui/dist/components/<span class="hljs-subst">${partialName}</span>`</span>, <span class="hljs-comment">// ç»„ä»¶çš„å¯¼å…¥è·¯å¾„</span>
    <span class="hljs-attr">sideEffects</span>: [<span class="hljs-string">'cobyte-vite-ui/dist/style.css'</span>] <span class="hljs-comment">// ç»„ä»¶çš„æ ·å¼æ–‡ä»¶è·¯å¾„</span>
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</p>
<ol>
<li>ç»„ä»¶å (name):<br/>
ç”¨äºåœ¨å¯¼å…¥è¯­å¥ä¸­ä½œä¸ºæ ‡è¯†ç¬¦ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯å¸•æ–¯å¡å‘½åï¼Œå› ä¸ºå®ƒåœ¨ Vue ä¸­é€šå¸¸ç”¨äºç»„ä»¶æ³¨å†Œå’Œæ¨¡æ¿ä¸­ã€‚</li>
<li>å¯¼å…¥è·¯å¾„ (from):<br/>
è¿™é‡Œä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²åŠ¨æ€æ„å»ºå¯¼å…¥è·¯å¾„ã€‚å…¶ä¸­ï¼Œ<code>partialName</code>Â æ˜¯é€šè¿‡å°†ç»„ä»¶åå»æ‰å‰ä¸¤ä¸ªå­—ç¬¦ï¼ˆå³å»æ‰"Co"ï¼‰å¹¶è½¬æ¢ä¸º kebab-case å¾—åˆ°çš„ã€‚<br/>
ä¾‹å¦‚ï¼Œç»„ä»¶å "CoTableColumn" è½¬æ¢ä¸º "table-column"ï¼Œç„¶åæ‹¼æ¥æˆè·¯å¾„ 'cobyte-vite-ui/dist/components/table-column'ã€‚<br/>
è¿™æ ·è®¾è®¡æ˜¯å› ä¸ºç»„ä»¶åº“çš„ç›®å½•ç»“æ„å¯èƒ½æ˜¯æŒ‰ç…§ kebab-case å‘½åçš„ï¼Œè€Œç»„ä»¶åœ¨ä»£ç ä¸­æ˜¯ä»¥å¸•æ–¯å¡å‘½åä½¿ç”¨çš„ã€‚</li>
<li>å‰¯ä½œç”¨ (sideEffects):<br/>
è¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒæŒ‡å®šåœ¨å¯¼å…¥ç»„ä»¶æ—¶éœ€è¦åŒæ—¶å¯¼å…¥çš„æ ·å¼æ–‡ä»¶æˆ–å…¶ä»–èµ„æºã€‚è¿™é‡ŒæŒ‡å®šäº†ç»„ä»¶åº“çš„å…¨å±€æ ·å¼æ–‡ä»¶ã€‚<br/>
æ³¨æ„ï¼šè¿™ä¸ªæ ·å¼æ–‡ä»¶æ˜¯å…¨å±€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡å¯¼å…¥å“ªä¸ªç»„ä»¶ï¼Œéƒ½ä¼šå¯¼å…¥æ•´ä¸ªç»„ä»¶åº“çš„æ ·å¼ã€‚è¿™å¯èƒ½ä¼šé€ æˆæ ·å¼å†—ä½™ã€‚<br/>
æ›´ç²¾ç»†çš„åšæ³•æ˜¯ä¸ºæ¯ä¸ªç»„ä»¶æŒ‡å®šå…¶å¯¹åº”çš„æ ·å¼æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š<br/>
sideEffects: [<code>cobyte-vite-ui/dist/components/${partialName}/style.css</code>]</li>
</ol>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å½“å‰ç»„ä»¶åº“æ²¡æœ‰ä¸ºæ¯ä¸ªç»„ä»¶å•ç‹¬æä¾›æ ·å¼æ–‡ä»¶ï¼Œæˆ‘ä»¬åªæä¾›äº†å›ºå®šçš„å…¨å±€æ ·å¼æ–‡ä»¶ã€‚</p>
<p>ä¸Šé¢è®¾è®¡è§£æå™¨è¿”å›çš„å¯¹è±¡å°è£…äº†ç»„ä»¶çš„å®Œæ•´å¯¼å…¥ä¿¡æ¯ï¼Œä½œä¸ºæ•°æ®è½½ä½“ä¼ é€’ç»™åç»­å¤„ç†å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºæ­¤è¿›è¡Œè¿­ä»£ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// çœç•¥...

<span class="hljs-addition">+ // æ ¹æ®ä¼ å…¥çš„ä¿¡æ¯ç”Ÿæˆå¯¹åº”çš„å¯¼å…¥è¯­å¥å­—ç¬¦ä¸²</span>
<span class="hljs-addition">+ export function stringifyImport(info) {</span>
<span class="hljs-addition">+    if (typeof info === 'string')</span>
<span class="hljs-addition">+      return `import '${info}'`</span>
<span class="hljs-addition">+    if (!info.as)</span>
<span class="hljs-addition">+      return `import '${info.from}'`</span>
<span class="hljs-addition">+    else if (info.name)</span>
<span class="hljs-addition">+      return `import { ${info.name} as ${info.as} } from '${info.from}'`</span>
<span class="hljs-addition">+    else</span>
<span class="hljs-addition">+      return `import ${info.as} from '${info.from}'`</span>
<span class="hljs-addition">+ }</span>
<span class="hljs-addition">+ // æ ¹æ®ç»„ä»¶çš„å¯¼å…¥ä¿¡æ¯ç”Ÿæˆå®Œæ•´çš„å¯¼å…¥è¯­å¥ï¼ŒåŒ…æ‹¬ç»„ä»¶æœ¬èº«çš„å¯¼å…¥å’Œå…¶å‰¯ä½œç”¨ï¼ˆå¦‚æ ·å¼æ–‡ä»¶ï¼‰çš„å¯¼å…¥ã€‚</span>
<span class="hljs-addition">+ export function stringifyComponentImport({ as: name, from: path, name: importName, sideEffects }) {</span>
<span class="hljs-addition">+    const imports = [</span>
<span class="hljs-addition">+      // ç”Ÿæˆç»„ä»¶å¯¼å…¥è¯­å¥</span>
<span class="hljs-addition">+      stringifyImport({ as: name, from: path, name: importName }),</span>
<span class="hljs-addition">+    ]</span>
  
<span class="hljs-addition">+    if (sideEffects) {</span>
<span class="hljs-addition">+      // ç”Ÿæˆå‰¯ä½œç”¨å¯¼å…¥è¯­å¥</span>
<span class="hljs-addition">+      sideEffects.forEach(i =&gt; imports.push(stringifyImport(i)))</span>
<span class="hljs-addition">+    }</span>
  
<span class="hljs-addition">+    return imports.join(';')</span>
<span class="hljs-addition">+ }</span>

  export default function VitePluginAutoComponents() {
    return {
      // æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯
      name: 'vite-plugin-auto-component',
  
      // transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨
      // code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„
      transform(code, id) {
        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶
        // å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†
        if(/\.vue$/.test(id)) {
            // çœç•¥...
<span class="hljs-addition">+            let no = 0</span>
            // éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†
            for (const { rawName, replace } of results) {
                // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§é©¼å³°
                const name = pascalCase(rawName)
                // åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶
                if (!name.match(/^Co[A-Z]/)) return
                // ç»„ä»¶è·¯å¾„è½¬æ¢
                const partialName = kebabCase(name.slice(2))
<span class="hljs-addition">+                // å°è£…äº†ç»„ä»¶çš„å®Œæ•´å¯¼å…¥ä¿¡æ¯ï¼Œä½œä¸ºæ•°æ®è½½ä½“ä¼ é€’ç»™åç»­å¤„ç†å‡½æ•°</span>
<span class="hljs-addition">+                const component = {</span>
<span class="hljs-addition">+                    name,</span>
<span class="hljs-addition">+                    from: `cobyte-vite-ui/dist/components/${partialName}`,</span>
<span class="hljs-addition">+                    sideEffects: ['cobyte-vite-ui/dist/style.css']</span>
<span class="hljs-addition">+                }</span>
<span class="hljs-deletion">-                // å®šä¹‰è¦æ›¿æ¢çš„å˜é‡åï¼ˆè¿™é‡Œæš‚æ—¶ç¼–ç ä¸º CoButtonï¼‰</span>
<span class="hljs-deletion">-                const varName = name</span>
<span class="hljs-addition">+                // ä½¿ç”¨ç‰¹æ®Šå‰ç¼€å‡å°‘ä¸ç”¨æˆ·å˜é‡çš„å†²çªï¼Œä»¥åŠä½¿ç”¨é€’å¢çš„åºå·ï¼Œä¿è¯å”¯ä¸€æ€§ï¼Œé¿å…å˜é‡åå†²çª</span>
<span class="hljs-addition">+                const varName = `__unplugin_components_${no}`</span>
                // åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š
                // 1. å¯¼å…¥ CoButton ç»„ä»¶
                // 2. å¯¼å…¥æ ·å¼æ–‡ä»¶
<span class="hljs-deletion">-                 s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/${partialName}';\nimport 'cobyte-vite-ui/dist/style.css';\n`)</span>
<span class="hljs-addition">+                // è¿™é‡Œå°† component å¯¹è±¡å±•å¼€ï¼Œå¹¶æ·»åŠ  as: varName å‚æ•°ï¼Œå½¢æˆå®Œæ•´çš„å¯¼å…¥é…ç½®</span>
<span class="hljs-addition">+                s.prepend(`${stringifyComponentImport({ ...component, as: varName })};\n`)</span>
<span class="hljs-addition">+                no += 1</span>
                // æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å
                replace(varName)
            }
  
            // è¿”å›è½¬æ¢åçš„ä»£ç 
            return {
                code: s.toString(),  // è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²
                map: null, 
            }
        }
      },
    }
}
</code></pre>
<p>æˆ‘ä»¬æ·»åŠ äº†æ ¹æ®ä¼ å…¥çš„ä¿¡æ¯ç”Ÿæˆå¯¹åº”çš„å¯¼å…¥è¯­å¥å­—ç¬¦ä¸²çš„ <code>stringifyImport</code> å‡½æ•°å’Œæ ¹æ®ç»„ä»¶çš„å¯¼å…¥ä¿¡æ¯ç”Ÿæˆå®Œæ•´çš„å¯¼å…¥è¯­å¥ï¼ŒåŒ…æ‹¬ç»„ä»¶æœ¬èº«çš„å¯¼å…¥å’Œå…¶å‰¯ä½œç”¨ï¼ˆå¦‚æ ·å¼æ–‡ä»¶ï¼‰çš„å¯¼å…¥çš„ <code>stringifyComponentImport</code> å‡½æ•°ã€‚å…¶ä¸­ stringifyImport å¤„ç†å•ä¸€å¯¼å…¥è¯­å¥ï¼Œ<code>stringifyComponentImport</code> å¤„ç†ç»„åˆå¤šä¸ªç›¸å…³å¯¼å…¥ï¼Œå®ç°äº†èŒè´£åˆ†ç¦»å’Œé…ç½®çµæ´»çš„è®¾è®¡ä¼˜åŠ¿ã€‚è¿™ä¸¤ä¸ªå‡½æ•°å…±åŒæ„æˆäº†ä¸€ä¸ªçµæ´»çš„å¯¼å…¥è¯­å¥ç”Ÿæˆç³»ç»Ÿï¼Œä¸ºè‡ªåŠ¨å¯¼å…¥æ’ä»¶æä¾›äº†å¼ºå¤§çš„ä»£ç ç”Ÿæˆèƒ½åŠ›ã€‚</p>
<p>æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªè§£æç»“æœåŒ…æ‹¬ï¼š<code>name</code>ï¼ˆç»„ä»¶åï¼‰ã€<code>from</code>ï¼ˆå¯¼å…¥è·¯å¾„ï¼‰ã€<code>sideEffects</code>ï¼ˆæ ·å¼ç­‰å‰¯ä½œç”¨å¯¼å…¥ï¼‰çš„æ•°æ®ç»“æ„å¯¹è±¡ <code>component</code> ä½œä¸ºæ•°æ®è½½ä½“ä¼ é€’ç»™åç»­å¤„ç†å‡½æ•°ï¼Œåç»­ç¨‹åºåŸºäºæ­¤æ¥ç”Ÿæˆå¯¼å…¥è¯­å¥å’Œæ›¿æ¢ä»£ç ã€‚</p>
<p>å…¶ä¸­å˜é‡åç”Ÿæˆç­–ç•¥ä½¿ç”¨ç‰¹æ®Šå‰ç¼€å‡å°‘ä¸ç”¨æˆ·å˜é‡çš„å†²çªä»è€Œ<strong>é¿å…æ±¡æŸ“</strong>ï¼ŒåŒæ—¶ä½¿ç”¨é€’å¢åºå·æ¥<strong>ä¿è¯å”¯ä¸€æ€§</strong>ã€‚</p>
<p>æœ€ç»ˆæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåŸºäºæ•°æ®é©±åŠ¨çš„æ¶æ„ï¼Œå°†æ¥è§£æå™¨åªè´Ÿè´£è¯†åˆ«ç»„ä»¶å’Œè¿”å›è·¯å¾„çš„æ•°æ®ä¿¡æ¯ï¼Œç„¶åå¯¼å…¥ç”Ÿæˆå™¨å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°çš„ <code>stringifyComponentImport</code> å’Œ <code>stringifyImport</code> è´Ÿè´£æ ¹æ®é…ç½®ç”Ÿæˆå¯¼å…¥ä»£ç ï¼Œæˆ‘ä»¬æ•´ä½“çš„ Vite æ’ä»¶å°±åªè´Ÿè´£åè°ƒæµç¨‹å’Œä»£ç ä¿®æ”¹ã€‚</p>
<p>è¿™ç§æ¶æ„ä¸ºåç»­å¼•å…¥çœŸæ­£çš„å¤šè§£æå™¨æ”¯æŒå¥ å®šäº†è‰¯å¥½åŸºç¡€ï¼Œåªéœ€è¦å°†ç¡¬ç¼–ç çš„è§£æé€»è¾‘æ›¿æ¢ä¸ºå¯é…ç½®çš„è§£æå™¨æ•°ç»„å³å¯ã€‚</p>
<h3 data-id="heading-7">å®ç°è§£æå™¨ (Resolver)</h3>
<p>æˆ‘ä»¬å¼•å…¥è§£æå™¨æ˜¯ä¸ºäº†æé«˜æ’ä»¶çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚å½“å‰æ’ä»¶ç¡¬ç¼–ç äº†ç»„ä»¶åº“çš„è·¯å¾„å’Œæ ·å¼æ–‡ä»¶ï¼Œåªèƒ½ç”¨äºç‰¹å®šçš„ç»„ä»¶åº“ï¼ˆcobyte-vite-uiï¼‰ã€‚é€šè¿‡å¼•å…¥è§£æå™¨ï¼Œæˆ‘ä»¬å¯ä»¥è®©æ’ä»¶æ”¯æŒä¸åŒçš„ç»„ä»¶åº“ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é…ç½®ä¸åŒçš„è§£æå™¨ã€‚</p>
<p>è§£æå™¨çš„ä½œç”¨æ˜¯æ ¹æ®ç»„ä»¶åè¿”å›ä¸€ä¸ªè§£æç»“æœï¼ŒåŒ…æ‹¬ç»„ä»¶çš„å¯¼å…¥è·¯å¾„å’Œæ ·å¼æ–‡ä»¶è·¯å¾„ç­‰ã€‚è¿™æ ·ï¼Œæ’ä»¶å°±å¯ä»¥é€šè¿‡è§£æå™¨æ¥åŠ¨æ€è·å–ç»„ä»¶çš„å¯¼å…¥ä¿¡æ¯ï¼Œè€Œä¸æ˜¯å›ºå®šå†™æ­»ã€‚</p>
<p>æ”¹é€ æ­¥éª¤ï¼š</p>
<ol>
<li>ä¿®æ”¹æ’ä»¶å‡½æ•°ï¼Œä½¿å…¶å¯ä»¥æ¥å—ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ï¼Œé€‰é¡¹ä¸­åŒ…å«è§£æå™¨æ•°ç»„ã€‚</li>
<li>åœ¨æ’ä»¶å†…éƒ¨ï¼Œéå†è§£æå™¨æ•°ç»„ï¼Œå¯¹æ¯ä¸ªç»„ä»¶åå°è¯•ä½¿ç”¨è§£æå™¨è¿›è¡Œè§£æã€‚</li>
<li>å¦‚æœæŸä¸ªè§£æå™¨è¿”å›äº†ç»“æœï¼Œåˆ™ä½¿ç”¨è¯¥ç»“æœæ¥ç”Ÿæˆå¯¼å…¥è¯­å¥ã€‚</li>
<li>å¦‚æœæ²¡æœ‰è§£æå™¨åŒ¹é…ï¼Œå¯ä»¥è·³è¿‡è¯¥ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚åšå…¶ä»–å¤„ç†ã€‚</li>
</ol>
<p>å‚è€ƒ <code>NaiveUi</code> åŸºäº <code>unplugin-vue-components</code> å®ç°çš„è§£æå™¨ç»“æ„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NaiveUiResolver</span>(<span class="hljs-params"/>): <span class="hljs-title class_">ComponentResolver</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'component'</span>,
    <span class="hljs-attr">resolve</span>: <span class="hljs-function">(<span class="hljs-params">name: string</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (name.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(N[A-Z]|n-[a-z])/</span>))
        <span class="hljs-keyword">return</span> { name, <span class="hljs-attr">from</span>: <span class="hljs-string">'naive-ui'</span>, <span class="hljs-attr">sideEffects</span>: [] }
    },
  }
}
</code></pre>
<ul>
<li>è§£æå™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸€ä¸ª<code>resolve</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ç»„ä»¶åï¼Œè¿”å›ä¸€ä¸ªè§£æç»“æœå¯¹è±¡æˆ–undefinedã€‚</li>
<li>è§£æç»“æœå¯¹è±¡åŒ…æ‹¬ï¼š<code>name</code>ï¼ˆç»„ä»¶åï¼Œå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨åŸå§‹åï¼‰ï¼Œ<code>from</code>ï¼ˆå¯¼å…¥è·¯å¾„ï¼‰ï¼Œ<code>sideEffects</code>ï¼ˆæ ·å¼æ–‡ä»¶è·¯å¾„ç­‰ï¼Œå¯é€‰ï¼‰</li>
</ul>
<p>æˆ‘ä»¬è¿˜å¯ä»¥æ”¯æŒå¤šç§è§£æå™¨ï¼Œè¿™æ ·æ’ä»¶å¯ä»¥åŒæ—¶æ”¯æŒå¤šä¸ªç»„ä»¶åº“ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ€è·¯æ”¹é€ æ’ä»¶ä»£ç ã€‚é¦–å…ˆåŸºäºä¸Šè¿° <code>NaiveUi</code> çš„è§£æå™¨å®ç°æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶çš„è§£æå™¨ï¼Œ<code>./packages/utils/index.ts</code> æ–°å¢ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è§£æå™¨å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CobyteViteUiResolver</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'component'</span>,
    <span class="hljs-attr">resolve</span>: <span class="hljs-function">(<span class="hljs-params">name: string</span>) =&gt;</span> {
      <span class="hljs-comment">// åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶</span>
      <span class="hljs-keyword">if</span> (name.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^Co[A-Z]/</span>)) {
        <span class="hljs-keyword">const</span> partialName = <span class="hljs-title function_">kebabCase</span>(name.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>)) <span class="hljs-comment">// CoTableColumn -&gt; table-column</span>
        <span class="hljs-keyword">return</span> { 
          name, 
          <span class="hljs-attr">from</span>: <span class="hljs-string">`cobyte-vite-ui/dist/components/<span class="hljs-subst">${partialName}</span>`</span>, 
          <span class="hljs-attr">sideEffects</span>: [<span class="hljs-string">'cobyte-vite-ui/dist/style.css'</span>] 
        }
      }
    },
  }
}
</code></pre>
<p>æ¥ä¸‹æ¥ä¿®æ”¹æ’ä»¶å‡½æ•°ï¼Œä½¿å…¶å¯ä»¥æ¥å—ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ï¼Œé€‰é¡¹ä¸­åŒ…å«è§£æå™¨æ•°ç»„ï¼Œé‡‡ç”¨ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œå› æ­¤æˆ‘ä»¬å¼•å…¥ Context ç±»ï¼Œåˆ›å»º Context ç±»æ¥ç®¡ç†æ’ä»¶é…ç½®å’Œè§£æå™¨ï¼Œå¹¶ç¼“å­˜è§£æç»“æœï¼Œæ¥ç€åœ¨ transform é’©å­ä¸­ï¼Œä½¿ç”¨ Context å®ä¾‹æ¥æŸ¥æ‰¾ç»„ä»¶ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç è§£æé€»è¾‘ã€‚</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ export class Context {</span>
<span class="hljs-addition">+  options: any;</span>
<span class="hljs-addition">+  private _componentNameMap = {} // ç»„ä»¶ç¼“å­˜</span>
<span class="hljs-addition">+  constructor(private rawOptions: any) {</span>
<span class="hljs-addition">+    this.options = rawOptions</span>
<span class="hljs-addition">+  }</span>

<span class="hljs-addition">+  async findComponent(name: string) {</span>
<span class="hljs-addition">+    // 1. æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦æœ‰è¯¥ç»„ä»¶çš„ä¿¡æ¯</span>
<span class="hljs-addition">+    let info = this._componentNameMap[name]</span>
<span class="hljs-addition">+    if (info) {</span>
<span class="hljs-addition">+      return info // ç¼“å­˜å‘½ä¸­ï¼Œç›´æ¥è¿”å›</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+    // 2. éå†æ‰€æœ‰è§£æå™¨</span>
<span class="hljs-addition">+    for (const resolver of this.options.resolvers) {</span>
<span class="hljs-addition">+      const result = await resolver.resolve(name)</span>
<span class="hljs-addition">+      // 3. åˆ¤æ–­è§£æå™¨æ˜¯å¦è¿”å›äº†ç»“æœ</span>
<span class="hljs-addition">+      if (!result) {</span>
<span class="hljs-addition">+        continue</span>
<span class="hljs-addition">+      }</span>
<span class="hljs-addition">+      // 4. æ„å»ºå®Œæ•´ç»„ä»¶ä¿¡æ¯</span>
<span class="hljs-addition">+      info = {</span>
<span class="hljs-addition">+        as: name, // æ·»åŠ åˆ«å</span>
<span class="hljs-addition">+        ...result,</span>
<span class="hljs-addition">+      }</span>
<span class="hljs-addition">+      // 5. å­˜å…¥ç¼“å­˜</span>
<span class="hljs-addition">+      this._componentNameMap[name] = info</span>
<span class="hljs-addition">+      return info</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+    // æ‰€æœ‰è§£æå™¨éƒ½ä¸åŒ¹é…ï¼Œè¿”å› undefined</span>
<span class="hljs-addition">+  }</span>
<span class="hljs-addition">+ }</span>

<span class="hljs-deletion">-  export default function VitePluginAutoComponents() {</span>
<span class="hljs-addition">+  export default function VitePluginAutoComponents(options = {}) {</span>
<span class="hljs-addition">+    // åˆ›å»º Context å®ä¾‹ï¼Œç”¨äºå­˜å‚¨æ’ä»¶é…ç½®å’Œç»„ä»¶ä¿¡æ¯</span>
<span class="hljs-addition">+    const ctx = new Context(options)</span>
    return {
      // æ’ä»¶åç§°ï¼Œç”¨äºè°ƒè¯•å’Œé”™è¯¯ä¿¡æ¯
      name: 'vite-plugin-auto-component',
  
      // transform é’©å­å‡½æ•°ï¼Œåœ¨è½¬æ¢æ¨¡å—æ—¶è°ƒç”¨
      // code: æ–‡ä»¶å†…å®¹ï¼Œid: æ–‡ä»¶è·¯å¾„
      async transform(code, id) {
        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸º.vueæ–‡ä»¶
        // å¦‚æœä¸æ˜¯.vueæ–‡ä»¶ï¼Œä¸è¿›è¡Œå¤„ç†
        if(/\.vue$/.test(id)) {
            // çœç•¥...
            
            let no = 0
            // éå†æ‰€æœ‰åŒ¹é…ç»“æœè¿›è¡Œå¤„ç†
            for (const { rawName, replace } of results) {
                // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§é©¼å³°
                const name = pascalCase(rawName)
<span class="hljs-deletion">-                // åªå¤„ç† Co å¼€å¤´çš„ç»„ä»¶</span>
<span class="hljs-deletion">-                 if (!name.match(/^Co[A-Z]/)) return</span>
<span class="hljs-deletion">-                // ç»„ä»¶è·¯å¾„è½¬æ¢</span>
<span class="hljs-deletion">-                 const partialName = kebabCase(name.slice(2))</span>
<span class="hljs-deletion">-                // å°è£…äº†ç»„ä»¶çš„å®Œæ•´å¯¼å…¥ä¿¡æ¯ï¼Œä½œä¸ºæ•°æ®è½½ä½“ä¼ é€’ç»™åç»­å¤„ç†å‡½æ•°</span>
<span class="hljs-deletion">-                 const component = {</span>
<span class="hljs-deletion">-                     name,</span>
<span class="hljs-deletion">-                     from: `cobyte-vite-ui/dist/components/${partialName}`,</span>
<span class="hljs-deletion">-                     sideEffects: ['cobyte-vite-ui/dist/style.css']</span>
<span class="hljs-deletion">-                 }</span>
<span class="hljs-addition">+                const component = await ctx.findComponent(name)</span>
<span class="hljs-addition">+                if (component) {</span>
                  // å®šä¹‰è¦æ›¿æ¢çš„å˜é‡åï¼ˆè¿™é‡Œæš‚æ—¶ç¼–ç ä¸º CoButtonï¼‰
                  // const varName = name
                  // ä½¿ç”¨ç‰¹æ®Šå‰ç¼€å‡å°‘ä¸ç”¨æˆ·å˜é‡çš„å†²çªï¼Œä»¥åŠä½¿ç”¨é€’å¢çš„åºå·ï¼Œä¿è¯å”¯ä¸€æ€§ï¼Œé¿å…å˜é‡åå†²çª
                  const varName = `__unplugin_components_${no}`
                  // åœ¨ä»£ç å¼€å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š
                  // 1. å¯¼å…¥ CoButton ç»„ä»¶
                  // 2. å¯¼å…¥æ ·å¼æ–‡ä»¶
                  // s.prepend(`\nimport ${varName} from 'cobyte-vite-ui/dist/components/${partialName}';\nimport 'cobyte-vite-ui/dist/style.css';\n`)
                  // è¿™é‡Œå°† component å¯¹è±¡å±•å¼€ï¼Œå¹¶æ·»åŠ  as: varName å‚æ•°ï¼Œå½¢æˆå®Œæ•´çš„å¯¼å…¥é…ç½®
                  s.prepend(`${stringifyComponentImport({ ...component, as: varName })};\n`)
                  no += 1
                  // æ‰§è¡Œæ›¿æ¢ï¼šå°† resolveComponent("xxx") è°ƒç”¨æ›¿æ¢ä¸ºç»„ä»¶å˜é‡å
                  replace(varName)
<span class="hljs-addition">+                }</span>
            }
  
            // è¿”å›è½¬æ¢åçš„ä»£ç 
            return {
                code: s.toString(),  // è½¬æ¢åçš„ä»£ç å­—ç¬¦ä¸²
                map: null, 
            }
        }
      },
    }
}
</code></pre>
<p>æ’ä»¶åˆå§‹åŒ–æ—¶ï¼Œåˆ›å»º Context å®ä¾‹ï¼Œä¼ å…¥optionsï¼Œå…¶ä¸­åŒ…å«è§£æå™¨ resolversã€‚Context ç±»æä¾›äº†ä¸€ä¸ªfindComponentæ–¹æ³•ï¼Œç”¨äºæ ¹æ®ç»„ä»¶åæŸ¥æ‰¾ç»„ä»¶ä¿¡æ¯ã€‚è¯¥æ–¹æ³•ä¼šå…ˆæŸ¥çœ‹ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåˆ™ä¾æ¬¡è°ƒç”¨æ¯ä¸ªè§£æå™¨çš„ resolve æ–¹æ³•ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªè§£æå™¨è¿”å›ç»“æœã€‚ç„¶åå°†ç»“æœç¼“å­˜èµ·æ¥ã€‚åœ¨ transform é’©å­ä¸­ï¼Œä½¿ç”¨ Context å®ä¾‹çš„findComponent æ–¹æ³•æ¥æŸ¥æ‰¾ç»„ä»¶ä¿¡æ¯ï¼Œè€Œä¸å†æ˜¯ç¡¬ç¼–ç è§£æé€»è¾‘ã€‚è¿™æ¬¡è¿­ä»£ä½¿æ’ä»¶ä»å•ä¸€ç»„ä»¶åº“çš„æ”¯æŒæ‰©å±•åˆ°å¤šç»„ä»¶åº“ï¼Œä½¿ç”¨ç¼“å­˜æé«˜æ€§èƒ½ï¼Œé€šè¿‡è§£æå™¨æ¨¡å¼æé«˜æ‰©å±•æ€§ï¼Œå¹¶ä¸”é€šè¿‡å¼‚æ­¥è§£ææŸ¥æ‰¾ç»„ä»¶ä¿¡æ¯ã€ä¸ºæœªæ¥å¼‚æ­¥è§£æé¢„ç•™æ¥å£ã€‚</p>
<p>ç»è¿‡æ­¤æ¬¡çš„è¿­ä»£ï¼Œæˆ‘ä»¬çš„æ’ä»¶å®ç°äº†çœŸæ­£çš„è§£è€¦ï¼Œæ’ä»¶æ ¸å¿ƒåªè´Ÿè´£æµç¨‹æ§åˆ¶ï¼Œè§£æé€»è¾‘åˆ™å®Œå…¨ç”±è§£æå™¨å¤„ç†ï¼Œé…ç½®ç®¡ç†åˆ™ç”± Context ç»Ÿä¸€ç®¡ç†ï¼Œæ ‡å‡†åŒ–äº†è§£æå™¨çš„æ¥å£ï¼Œè¿™æ ·æ‰€æœ‰è§£æå™¨éƒ½éµå¾ªç›¸åŒçš„æ¥å£ï¼Œç”±æ­¤å®ç°äº†å¼ºå¤§çš„æ‹“å±•æ€§ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬æ›´æ–° play é¡¹ç›®ä¸­çš„ Vite é…ç½®æ–‡ä»¶ <code>vite.config.ts</code>ï¼Œæ›´æ–°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
<span class="hljs-deletion">- import AutoComponents from 'cobyte-vite-ui/dist/utils'</span>
<span class="hljs-addition">+ import AutoComponents, { CobyteViteUiResolver} from 'cobyte-vite-ui/dist/utils'</span>

export default defineConfig({
<span class="hljs-deletion">-  plugins: [vue(), AutoComponents()]</span>
<span class="hljs-addition">+  plugins: [vue(), AutoComponents({</span>
<span class="hljs-addition">+    resolvers: [CobyteViteUiResolver()]</span>
<span class="hljs-addition">+  })],</span>
})
</code></pre>
<p>æ¥ç€é‡æ–°æ‰“åŒ…ç»„ä»¶åº“ï¼Œå†é‡å¯ play é¡¹ç›®ï¼Œæˆ‘ä»¬å‘ç°ä¾ç„¶æ­£å¸¸ï¼Œè¯´æ˜æˆ‘ä»¬ä¸Šè¿°çš„æ”¹åŠ¨æ˜¯æ­£ç¡®çš„ã€‚</p>
<h3 data-id="heading-8">å¤šè§£æå™¨é…ç½®</h3>
<p>ä¸Šæ–‡è¯´äº†æˆ‘ä»¬å®ç°äº†æ’ä»¶ä»å•ä¸€ç»„ä»¶åº“çš„æ”¯æŒæ‰©å±•åˆ°å¤šç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½è§£æï¼Œé‚£ä¹ˆä¸‹é¢å°±è®©æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚
é¦–å…ˆæˆ‘ä»¬å¾€ <code>packages/utils/index.ts</code> æ–‡ä»¶æ·»åŠ  Naive UI çš„è§£æå™¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * Resolver for Naive UI
 *
 * <span class="hljs-doctag">@link</span> https://www.naiveui.com/
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NaiveUiResolver</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'component'</span>,
    <span class="hljs-attr">resolve</span>: <span class="hljs-function">(<span class="hljs-params">name: string</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'NaiveUiResolver'</span>, name, name.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(N[A-Z]|n-[a-z])/</span>));
      <span class="hljs-keyword">if</span> (name.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(N[A-Z]|n-[a-z])/</span>))
        <span class="hljs-keyword">return</span> { name, <span class="hljs-attr">from</span>: <span class="hljs-string">'naive-ui'</span> }
    },
  }
}
</code></pre>
<p>è¿™ä¸ªè§£æå™¨æ˜¯å®Œå…¨ä» <code>unplugin-vue-components</code> æ’ä»¶ä¸­æ¬è¿‡æ¥çš„ï¼Œæˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½å¤Ÿåœ¨æˆ‘ä»¬å®ç°çš„æ’ä»¶ä¸­ä½¿ç”¨ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬åœ¨ play é¡¹ç›®ä¸­å®‰è£… Naive UI çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> naive-ui
</code></pre>
<p>ç„¶ååœ¨ App.vue æ–‡ä»¶ä¸­å¼•ç”¨ Naive UI çš„ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">co-button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">co-button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span>naive-ui<span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>æ¥ç€ä¿®æ”¹ <code>./play/vite.config.ts</code> æ–‡ä»¶ä¸­çš„é…ç½®ã€‚</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
<span class="hljs-deletion">- import AutoComponents, { CobyteViteUiResolver } from 'cobyte-vite-ui/dist/utils'</span>
<span class="hljs-addition">+ import AutoComponents, { CobyteViteUiResolver, NaiveUiResolver } from 'cobyte-vite-ui/dist/utils'</span>

// https://vite.dev/config/
export default defineConfig({
  plugins: [vue(), AutoComponents({
<span class="hljs-deletion">-   resolvers: [CobyteViteUiResolver()]</span>
<span class="hljs-addition">+    resolvers: [CobyteViteUiResolver(), NaiveUiResolver()]</span>
  })],
})
</code></pre>
<p>æ¥ç€æˆ‘ä»¬é‡æ–°æ‰“åŒ…æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶åº“ï¼Œå†é‡å¯ play æµ‹è¯•é¡¹ç›®ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9fc0afaa6f74916a0a1ba1e7f0b866c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905528&amp;x-signature=NmSVWgC%2B09BWju5OVR4Mw3s6Ev8%3D" alt="01.png" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆåŠŸéªŒè¯äº†æˆ‘ä»¬ä¸Šè¿°çš„ç»“è®ºï¼š<strong>æˆ‘ä»¬å®ç°äº†æ’ä»¶ä»å•ä¸€ç»„ä»¶åº“çš„æ”¯æŒæ‰©å±•åˆ°å¤šç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½è§£</strong>ã€‚</p>
<p>æˆ‘ä»¬ä¸Šé¢æ‰€å®ç°çš„æ’ä»¶å…¶å®å°±æ˜¯ <code>unplugin-vue-components</code> åº“çš„å®ç°åŸç†ï¼Œåœ¨ Vue æŠ€æœ¯æ ˆä¸­éƒ½æ˜¯é€šè¿‡è¿™ä¸ªåº“æ¥å®ç°ç»„ä»¶æŒ‰éœ€åŠ è½½çš„ã€‚</p>
<h3 data-id="heading-9">ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½å®è·µ</h3>
<p>æˆ‘ä»¬åœ¨ play é¡¹ç›®ä¸­å®‰è£… <code>unplugin-vue-components</code> åº“æ¥æ›¿æ¢æˆ‘ä»¬æ‰‹å†™çš„æ’ä»¶ã€‚å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> unplugin-vue-components -D 
</code></pre>
<p>æ¥ç€ä¿®æ”¹ play é¡¹ç›®ä¸­çš„ <code>vite.config.ts</code> æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
<span class="hljs-deletion">- import AutoComponent, { CobyteViteUiResolver, NaiveUiResolver } from 'cobyte-vite-ui/dist/utils'</span>
<span class="hljs-addition">+ import { CobyteViteUiResolver, NaiveUiResolver } from 'cobyte-vite-ui/dist/utils'</span>
<span class="hljs-addition">+ import AutoComponents from 'unplugin-vue-components/vite';</span>

// https://vite.dev/config/
export default defineConfig({
  plugins: [vue(), AutoComponents({
    resolvers: [CobyteViteUiResolver(), NaiveUiResolver()]
  })],
})
</code></pre>
<p>ç„¶åé‡å¯ play é¡¹ç›®ï¼Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„æµ‹è¯•ä¾‹å­ä¾ç„¶æ˜¯æ­£å¸¸è¿è¡Œçš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬çš„ç»„ä»¶åº“æˆ–è€…ä¸šåŠ¡ç»„ä»¶åº“æƒ³è¦å®ç°æŒ‰éœ€åŠ è½½ï¼Œåªéœ€è¦å‚è€ƒ <code>unplugin-vue-components</code> åº“ä¸­æä¾›çš„è§£æå™¨ï¼Œå†™ä¸€ä¸ªç¬¦åˆè‡ªå·±çš„ç»„ä»¶åº“çš„è§£æå™¨å†é…åˆ <code>unplugin-vue-components</code> å³å¯ã€‚å½“ç„¶è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å‰æï¼Œä½ çš„ç»„ä»¶åº“å¾—è®¾è®¡æˆæ¨¡å—åŒ–ï¼Œå³ä¸€ä¸ªç»„ä»¶ä¸€ä¸ªæ¨¡å—ï¼Œäº’ä¸å…³è”æˆ–è€…å¼±å…³è”ã€‚</p>
<h3 data-id="heading-10">ä¸šåŠ¡ç»„ä»¶åº“å¼•ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½</h3>
<p>æˆ‘ä»¬çŸ¥é“æ‰€è°“ä¸šåŠ¡ç»„ä»¶åº“ï¼Œå°±æ˜¯ä¸€äº›åŸºäºç¬¬ä¸‰æ–¹ç»„ä»¶åº“å¼€å‘çš„ç»„ä»¶åº“ï¼Œæ¯”å¦‚åŸºäº Element Plusã€Naive UI å¼€å‘çš„ç»„ä»¶åº“ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶åº“ <code>./packages/components/button</code>ï¼Œè®©å®ƒä½¿ç”¨ Naive UI çš„ button ç»„ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"warning"</span>&gt;</span>
    Warning
  <span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'co-button'</span>,
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>æ¥ç€æˆ‘ä»¬é‡æ–°æ‰“åŒ…æµ‹è¯•ç»„ä»¶åº“ï¼Œç„¶åé‡å¯ play é¡¹ç›®ã€‚æˆ‘ä»¬å‘ç°æµ‹è¯•ç»„ä»¶åº“ä¸­ Naive UI çš„æŒ‰é’® Button å¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚å¹¶ä¸”åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°æŠ¥ä»¥ä¸‹è­¦æŠ¥ï¼š</p>
<pre><code class="hljs language-css" lang="css">Failed <span class="hljs-selector-tag">to</span> resolve component: n-button
</code></pre>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨ Vite æ¥æ‰“åŒ…ç»„ä»¶åº“ï¼ŒVite é»˜è®¤ä¼šæŠŠä»£ç è¿›è¡Œå‹ç¼©æ··æ·†ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹æ‰“åŒ…åçš„æµ‹è¯• button ç»„ä»¶çš„ä»£ç ã€‚å¯ä»¥çœ‹åˆ°åŸæœ¬åº”è¯¥æ˜¯ <code>_resolveComponent("n-button")</code> çš„ä»£ç ï¼Œå› ä¸º Vite è¿›è¡Œäº†å‹ç¼©æ··æ·†è€Œå˜æˆäº† o("n-button")ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a1fd47f258b45e7825b38666b32cef5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905528&amp;x-signature=xj9PMv0rEFl1dTwVMX%2F0Hu3GpE4%3D" alt="02.png" loading="lazy"/></p>
<p>è€Œæˆ‘ä»¬çš„æ’ä»¶æ˜¯åŸºäº <code>_resolveComponent</code> ä¸ºå‰ç¼€è¿›è¡ŒåŒ¹é…çš„ï¼Œç°åœ¨å‰ç¼€è¢«å‹ç¼©äº†ä¹Ÿå°±è‚¯å®šåŒ¹é…åˆ°ä¸åˆ°äº†ã€‚æ‰€ä»¥ç®€å•çš„å¤„ç†æ–¹æ³•å°±æ˜¯ä¿®æ”¹ Vite æ‰“åŒ…é…ç½®ï¼Œè®©å…¶ä¸è¿›è¡Œå‹ç¼©æ··æ·†ï¼Œæ¯•ç«Ÿ Element Plusã€Naive UI è¿™äº›å¼€æºç»„ä»¶åº“æ‰“åŒ…åçš„äº§ç‰©ä¹Ÿæ²¡æœ‰è¿›è¡Œå‹ç¼©æ··æ·†ã€‚æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ Vite æ‰“åŒ…é…ç½®ç¦æ­¢æ„å»ºå‹ç¼©æ··æ·†ã€‚ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ <code>vite.config.ts</code> å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// çœç•¥...

export default defineConfig(({ command, mode }) =&gt; {
    // ä¸»æ„å»ºé…ç½®
    return {
        // çœç•¥...
        build: {
<span class="hljs-addition">+            minify: false, // ç¦æ­¢å‹ç¼©æ··æ·†</span>
            // çœç•¥...
        },
    };
});
</code></pre>
<p>æˆ‘ä»¬å‘ç°æ‰“åŒ…åçš„ç»„ä»¶ä»£ç ä¸å‹ç¼©æ··æ·†äº†ï¼Œä½†è¿˜æ˜¯ä¸ç”Ÿæ•ˆï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å†™çš„æ’ä»¶åªè§£æ <code>.vue</code> æ–‡ä»¶ï¼Œè€Œæˆ‘ä»¬æ‰“åŒ…åçš„æ–‡ä»¶å˜æˆäº† <code>.mjs</code> äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿®æ”¹ä¸€ä¸‹ play é¡¹ç›®çš„ Vite é…ç½®è®© <code>.mjs</code> æ–‡ä»¶ä¹Ÿå¯ä»¥è¢«è§£æã€‚ä¿®æ”¹ <code>./play/vite.config.ts</code>  æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">  // çœç•¥...
export default defineConfig({
  plugins: [vue(), AutoComponents({
<span class="hljs-addition">+    include: [</span>
<span class="hljs-addition">+      /\.vue$/,</span>
<span class="hljs-addition">+      /\.mjs$/</span>
<span class="hljs-addition">+    ],</span>
    resolvers: [CobyteViteUiResolver(), NaiveUiResolver()]
  })],
})
</code></pre>
<p>ç»è¿‡ä¸Šè¿°ä¿®æ”¹åæˆ‘ä»¬é‡å¯ play é¡¹ç›®ï¼Œå‘ç°åŸºäº Naive UI äºŒæ¬¡å¼€å‘çš„ç»„ä»¶å¯ä»¥æˆåŠŸåŠ è½½äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40241ada01dc43be8f8adfdd50ebac34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905528&amp;x-signature=fTIbzwPyquF5rKqzxpe8urIlk2g%3D" alt="03.png" loading="lazy"/></p>
<h3 data-id="heading-11">ä¾èµ–é¢„æ„å»ºé…ç½®</h3>
<p>æˆ‘ä»¬çŸ¥é“ Vite ä¼šåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™æŠŠä¾èµ–é¢„æ„å»ºå¹¶ç¼“å­˜åˆ° <code>node_modules/.vite</code> ç›®å½•ä¸­ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p>
<ol>
<li>æ¨¡å—æ ¼å¼è½¬æ¢</li>
</ol>
<p>è®¸å¤š npm åŒ…ä½¿ç”¨çš„æ˜¯ CommonJS æˆ– UMD æ ¼å¼ï¼Œè€Œ Vite åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨çš„æ˜¯åŸç”Ÿ ES æ¨¡å—ï¼ˆESMï¼‰ã€‚é¢„æ„å»ºä¼šå°†è¿™äº›åŒ…è½¬æ¢ä¸º ESM æ ¼å¼ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¿è¡Œã€‚</p>
<ol start="2">
<li>æ€§èƒ½ä¼˜åŒ– - å‡å°‘ HTTP è¯·æ±‚</li>
</ol>
<p>æŸäº›åŒ…ä¼šæœ‰å¾ˆå¤šå†…éƒ¨æ¨¡å—ï¼Œå¦‚æœä¸é¢„æ„å»ºï¼Œæµè§ˆå™¨å¯èƒ½éœ€è¦å‘èµ·æ•°ç™¾ä¸ª HTTP è¯·æ±‚ã€‚é¢„æ„å»ºä¼šå°†è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å°‘æ•°å‡ ä¸ªæ–‡ä»¶ã€‚</p>
<p>å…¸å‹ä¾‹å­ï¼š</p>
<ul>
<li>lodash-es æœ‰è¶…è¿‡ 600 ä¸ªå†…ç½®æ¨¡å—</li>
<li>å¦‚æœä¸é¢„æ„å»ºï¼Œä¼šå¯¼è‡´ 600+ ä¸ª HTTP è¯·æ±‚</li>
<li>é¢„æ„å»ºååªéœ€è¦ 1-2 ä¸ªè¯·æ±‚</li>
</ul>
<ol start="3">
<li>æå‡é¡µé¢åŠ è½½é€Ÿåº¦</li>
</ol>
<p>é¢„æ„å»ºä½¿ç”¨ esbuildï¼ˆç”¨ Go ç¼–å†™ï¼‰ï¼Œé€Ÿåº¦æ¯”ä¼ ç»Ÿ JavaScript æ‰“åŒ…å·¥å…·å¿« 10-100 å€ã€‚é€šè¿‡å°†ä¾èµ–é¢„å…ˆæ‰“åŒ…å¹¶ç¼“å­˜ï¼Œå¯ä»¥æ˜¾è‘—æå‡å¼€å‘æœåŠ¡å™¨çš„å¯åŠ¨é€Ÿåº¦å’Œæ¨¡å—çƒ­æ›´æ–°ï¼ˆHMRï¼‰çš„å“åº”é€Ÿåº¦ã€‚</p>
<p>é»˜è®¤çš„æ—¶å€™ Vite æ˜¯é€šè¿‡ import è¯­å¥è¿›è¡Œåˆ†æéœ€è¦é¢„æ„å»ºçš„ä¾èµ–çš„ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨æŒ‰éœ€åŠ è½½çš„æ’ä»¶ä¹‹åï¼Œåœ¨ä»£ç ä¸­å°±æœ‰äº› npm åŒ…ä¸å­˜åœ¨ import è¯­å¥äº†ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é€šè¿‡ <code>optimizeDeps.include</code> é€‰é¡¹è®¾ç½®é¢„æ„å»ºã€‚</p>
<p>æˆ‘ä»¬å¯¹ <code>./play/vite.config.ts</code> è®¾ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { CobyteViteUiResolver, NaiveUiResolver } from 'cobyte-vite-ui/dist/utils'
import AutoComponents from 'unplugin-vue-components/vite';
<span class="hljs-addition">+ import pkg from './package.json';</span>
<span class="hljs-addition">+ const dependencies = Object.keys(pkg.dependencies);</span>

export default defineConfig({
  plugins: [vue(), AutoComponents({
    include: [
      /\.vue$/,
      /\.mjs$/
    ],
    resolvers: [CobyteViteUiResolver(), NaiveUiResolver()]
  })],
<span class="hljs-addition">+  optimizeDeps: {</span>
<span class="hljs-addition">+    include: [...dependencies]</span>
<span class="hljs-addition">+  }</span>
})
</code></pre>
<p>ç”±äº Node ä¸å¤„ç†è™šæ‹Ÿé“¾æ¥ï¼ŒåŒæ—¶ä¸ºäº†æ›´çœŸå®éªŒè¯çœŸå®åœºæ™¯ï¼Œæˆ‘ä»¬æŠŠæµ‹è¯•ç»„ä»¶åº“æ”¹æˆæ›´åŠ çœŸå®ï¼Œé¦–å…ˆä¿®æ”¹ <code>./play/packages.json</code></p>
<pre><code class="hljs language-diff" lang="diff">{
  // çœç•¥...
  "dependencies": {
<span class="hljs-deletion">-    "cobyte-vite-ui": "link:..",</span>
    "cobyte-vite-ui": "^1.0.0",
    "naive-ui": "^2.43.1",
    "vue": "^3.5.22"
  },
  // çœç•¥...
}
</code></pre>
<p>åŒæ—¶åˆ æ‰ <code>./play/node_modules</code> ç›®å½•ä¸­çš„ <code>cobyte-vite-ui</code> è™šæ‹Ÿç›®å½•ï¼Œå†é‡æ–°åˆ›å»ºä¸€ä¸ª <code>cobyte-vite-ui</code> ç›®å½•ï¼ŒåŒæ—¶æŠŠæ ¹ç›®å½•ä¸‹çš„ <code>./dist</code> ç›®å½•ä¸­çš„å†…å®¹å’Œæ ¹ç›®å½•ä¸‹çš„ <code>packages.json</code> æ–‡ä»¶å¤åˆ¶åˆ°åˆšåˆšæ–°åˆ›å»ºçš„
<code>cobyte-vite-ui</code> ç›®å½•ä¸­ï¼Œè¿™ç›¸å½“äºæ‰‹åŠ¨å®‰è£…æˆ‘ä»¬åˆ›å»ºçš„æµ‹è¯•ç»„ä»¶åº“çš„ä¾èµ–äº†ã€‚ä¹‹åæˆ‘ä»¬å†åˆ æ‰ <code>./play/node_modules/.vite</code> ç›®å½•çš„é¢„æ„å»ºç¼“å­˜ï¼Œå†é‡å¯ play é¡¹ç›®ã€‚è¿™æ—¶æˆ‘ä»¬å‘ç° <code>cobyte-vite-ui</code> ç»„ä»¶åº“ä¸­å¼•ç”¨çš„ Naive UI çš„ button ç»„ä»¶ä¸ç”Ÿæ•ˆäº†ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æŠŠ <code>cobyte-vite-ui</code> è¿›è¡Œé¢„æ„å»ºåï¼Œå®ƒçš„å†…å®¹å°±ä¼šè¢«é¢„æ„å»ºåç¼“å­˜åˆ° <code>./play/node_modules/.vite</code> ç›®å½•ä¸­äº†ï¼Œè€Œ unplugin-vue-components æ’ä»¶é»˜è®¤æ˜¯ä¸è§£æ <code>node_modules</code> ç›®å½•ä¸­çš„æ–‡ä»¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ unplugin-vue-components æ’ä»¶çš„é…ç½®è®©å…¶å¯ä»¥è§£æ <code>node_modules</code> ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œä½†è¿™ä¸æ˜¯æœ€ä¼˜çš„æ–¹æ¡ˆã€‚æœ€ä¼˜çš„æ–¹æ¡ˆæ˜¯åœ¨æ‰“åŒ… <code>cobyte-vite-ui</code> ç»„ä»¶åº“çš„æ—¶å€™å°±
è¿›è¡ŒæŒ‰éœ€æ‰“åŒ…ã€‚æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹å®‰è£… <code>unplugin-vue-components</code> ä¾èµ–ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> unplugin-vue-components -D -w
</code></pre>
<p>æˆ‘ä»¬åœ¨å®‰è£…ä¸Šè¿°ä¾èµ–çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6746af5fde3446af853e12ef3aa69e0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29ieXRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763905528&amp;x-signature=AaAWOg3oR8etvN4X%2FocknaSdzaQ%3D" alt="04.png" loading="lazy"/></p>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åˆšåˆšæŠŠ play ç›®å½•ä¸­çš„æµ‹è¯•ç»„ä»¶åº“ <code>cobyte-vite-ui</code> æ”¹äº†æ­£å¼åº“ä¸€æ ·çš„ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥æš‚æ—¶æŠŠå®ƒæ”¹å›è™šæ‹Ÿä¾èµ–ã€‚</p>
<pre><code class="hljs language-diff" lang="diff">"dependencies": {
<span class="hljs-deletion">-    "cobyte-vite-ui": "^1.0.0",</span>
<span class="hljs-addition">+    "cobyte-vite-ui": "link:..",</span>
    "naive-ui": "^2.43.1",
    "vue": "^3.5.22"
},
</code></pre>
<p>å†è¿›è¡Œå®‰è£…å³å¯ã€‚</p>
<p>ç„¶åæ–°å¢æ ¹ç›®å½•ä¸‹çš„ <code>vite.config.ts</code> æ–‡ä»¶çš„é…ç½®ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// çœç•¥...
<span class="hljs-addition">+ import AutoComponents from 'unplugin-vue-components/vite';</span>
<span class="hljs-addition">+ import { NaiveUiResolver } from 'unplugin-vue-components/resolvers';</span>

// çœç•¥...

export default defineConfig(({ command, mode }) =&gt; {
    // ä¸»æ„å»ºé…ç½®
    return {
        plugins: [
            vue(),
<span class="hljs-addition">+            AutoComponents({</span>
<span class="hljs-addition">+                resolvers: [NaiveUiResolver()]</span>
<span class="hljs-addition">+            })</span>
        ],
        build: {
            // çœç•¥...
            rollupOptions: {
                external: [
                    "vue", 
<span class="hljs-addition">+                    "naive-ui", // æ’é™¤æ‰“åŒ…</span>
                ],
            // çœç•¥..
            },
        },
    };
});
</code></pre>
<p>é…ç½®å®Œåï¼Œé‡æ–°æ‰“åŒ…æˆ‘ä»¬çš„æµ‹è¯•ç»„ä»¶åº“ï¼Œæ‰“åŒ…å®Œåï¼Œé‡æ–°åˆ æ‰ <code>./play/node_modules/.vite</code> ä¸­çš„ç¼“å­˜ï¼Œå’Œ <code>./play/node_modules/cobyte-vite-ui</code> ä¸­çš„å†…å®¹ï¼Œé‡æ–°æŠŠåˆšåˆšæ–°æ‰“åŒ…çš„æ ¹ç›®å½•ä¸‹çš„ <code>./dist</code> ç›®å½•ä¸­çš„å†…å®¹å’Œæ ¹ç›®å½•ä¸‹çš„ <code>packages.json</code> æ–‡ä»¶å¤åˆ¶åˆ° <code>./play/node_modules/cobyte-vite-ui</code> ä¸­ï¼ŒåŒæ—¶æ¢å¤ä¿®æ”¹çš„ <code>./play/packages.json</code> æ–‡ä»¶ï¼Œç„¶åé‡å¯ play é¡¹ç›®ã€‚</p>
<p>è¿™æ—¶æˆ‘ä»¬å°±å‘ç°æµ‹è¯•é¡¹ç›®å¯ä»¥æ­£å¸¸æ¸²æŸ“äº†ã€‚</p>
<p>è‡³æ­¤æˆ‘ä»¬ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†å°±éƒ½è®²å¾—å·®ä¸å¤šäº†ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥åœ¨è¯„è®ºåŒºäº¤æµã€‚</p>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>çœ‹å®Œäº†å…¨ç¯‡æ–‡ç« ç›¸ä¿¡ä½ ä¼šè§‰å¾—ï¼Œæ‰€è°“ç»„ä»¶åº“æŒ‰éœ€åŠ è½½æˆ–è€…ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½å…¶å®å¾ˆç®€å•ï¼Œé¦–å…ˆç»„ä»¶åº“çš„æ¯ä¸€ä¸ªç»„ä»¶éƒ½å¾—è®¾è®¡æˆç‹¬ç«‹çš„æ¨¡å—ï¼Œå¹¶ä¸”å¯ä»¥æŒ‰æ¨¡å—å¯¼å…¥ï¼Œä¹Ÿå°±æ˜¯ ESM åŒ–ï¼Œå¯ä»¥è¿›è¡Œ Tree Shakingï¼Œåªæœ‰è¿™æ ·æŒ‰éœ€åŠ è½½æ‰æœ‰æ„ä¹‰ï¼Œæ‰èƒ½è¾¾åˆ°å‡å°åŒ…ä½“ç§¯çš„ä½œç”¨ã€‚</p>
<p>å…¨å±€ç»„ä»¶åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¢«ç¼–è¯‘åä¼šé€šè¿‡ä¸€ä¸ªå†…ç½®å‡½æ•° <strong>resolveComponent</strong> æ¥è°ƒç”¨ç»„ä»¶ï¼ŒæŒ‰éœ€åŠ è½½çš„å®ç°åŸç†å°±æ˜¯é€šè¿‡æ’ä»¶è¿›è¡Œæ­£åˆ™åŒ¹é…æŸ¥æ‰¾ç¼–è¯‘åçš„æ¨¡æ¿ä»£ç ä¸­çš„ <strong>resolveComponent</strong> å‡½æ•°çš„ç›¸å…³ä»£ç æ¥æ‰¾åˆ°éœ€è¦æŒ‰éœ€åŠ è½½çš„ç»„ä»¶ï¼Œç„¶åè‡ªåŠ¨æŒ‰ç¼–è¯‘åçš„ä»£ç çš„å¤´éƒ¨æ·»åŠ éœ€è¦åŠ è½½çš„ç»„ä»¶çš„å¯¼å…¥è¯­å¥ä»£ç ä»¥åŠæ›¿æ¢æ‰ <strong>resolveComponent</strong> å‡½æ•°çš„ç›¸å…³ä»£ç ä¸ºå¯¹åº”çš„ç»„ä»¶å¯¹è±¡ã€‚</p>
<p>è€Œä¸šåŠ¡ç»„ä»¶å®ç°æŒ‰éœ€åŠ è½½çš„å…³é”®æ˜¯éœ€è¦åœ¨ä¸šåŠ¡ç»„ä»¶åº“æ‰“åŒ…çš„æ—¶å€™ä¹Ÿè¿›è¡ŒæŒ‰éœ€åŠ è½½é…ç½®ã€‚è™½ç„¶è¿™ä¸ªå…³é”®æ­¥éª¤å¾ˆç®€å•ï¼Œä½†ç”±äºè¿™æ˜¯ä¸€ä¸ªä½é¢‘ä¸”è·¨é¡¹ç›®çš„éœ€æ±‚ï¼Œæ‰€ä»¥AIå¯¹ä½é¢‘çš„éœ€æ±‚çš„å®ç°å’Œç»™çš„è§£å†³æ–¹æ¡ˆéƒ½ä¸å°½äººæ„ï¼Œè‡³å°‘æœ¬äººè§£å†³ä¸Šè¿°é—®é¢˜æ—¶ï¼ŒAIæä¾›æ–¹æ¡ˆæ²¡æœ‰ä¸€ä¸ªå¯ä»¥å®ç°çš„ï¼Œè™½ç„¶æœ€åçš„å®ç°å…¶å®å¾ˆç®€å•ã€‚</p>
<p>æœ€åï¼Œå†è¯´è¯´ä¸ªäººå¯¹AIçš„ä¸€äº›æ„Ÿæ‚Ÿå§ï¼Œä¸ªäººè§‰å¾—åœ¨AIæ—¶ä»£ï¼Œå°±ç¼–ç¨‹è¿™ä¸ªé¢†åŸŸè€Œè¨€å¯¹ä¸ªäººçš„ä¸“ä¸šè¦æ±‚ä¼šæ¯”ä»¥å‰æ›´åŠ çš„é«˜ï¼Œè‡³å°‘ä½ å¾—æœ‰èƒ½åŠ›å»è§£å†³AIä¸ä¼šçš„é—®é¢˜ã€‚</p>
<p>ä¸Šè¿°ç»„ä»¶åº“æµ‹è¯•ä»£ç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Famebyte%2Fcobyte-vite-ui" target="_blank" title="https://github.com/amebyte/cobyte-vite-ui" ref="nofollow noopener noreferrer">github.com/amebyte/cobâ€¦</a></p>
<p>æ¬¢è¿å…³æ³¨æœ¬ä¸“æ ï¼Œäº†è§£æ›´å¤š Element Plus ç»„ä»¶åº“çŸ¥è¯†</p>
<p>æœ¬ä¸“æ æ–‡ç« ï¼š</p>
<p><a href="https://juejin.cn/post/7143196940992413709" target="_blank" title="https://juejin.cn/post/7143196940992413709">1. Vue3 ç»„ä»¶åº“çš„è®¾è®¡å’Œå®ç°åŸç†</a></p>
<p><a href="https://juejin.cn/post/7146183222425518093" target="_blank" title="https://juejin.cn/post/7146183222425518093">2. ç»„ä»¶åº“å·¥ç¨‹åŒ–å®æˆ˜ä¹‹ Monorepo æ¶æ„æ­å»º</a></p>
<p><a href="https://juejin.cn/post/7153659360177029150" target="_blank" title="https://juejin.cn/post/7153659360177029150">3. ESLint æ ¸å¿ƒåŸç†å‰–æ</a></p>
<p><a href="https://juejin.cn/post/7157743898939359262" target="_blank" title="https://juejin.cn/post/7157743898939359262">4. ESLint æŠ€æœ¯åŸç†ä¸å®æˆ˜åŠä»£ç è§„èŒƒè‡ªåŠ¨åŒ–è¯¦è§£</a></p>
<p><a href="https://juejin.cn/post/7161063570594070559" target="_blank" title="https://juejin.cn/post/7161063570594070559">5. ä»ç»ˆç«¯å‘½ä»¤è§£æå™¨è¯´èµ·è°ˆè°ˆ npm åŒ…ç®¡ç†å·¥å…·çš„è¿è¡ŒåŸç†</a></p>
<p><a href="https://juejin.cn/post/7165503808217284616" target="_blank" title="https://juejin.cn/post/7165503808217284616">6. CSS æ¶æ„æ¨¡å¼ä¹‹ BEM åœ¨ç»„ä»¶åº“ä¸­çš„å®è·µ</a></p>
<p><a href="https://juejin.cn/post/7168835045984043022" target="_blank" title="https://juejin.cn/post/7168835045984043022">7. ç»„ä»¶å®ç°çš„åŸºæœ¬æµç¨‹åŠ Icon ç»„ä»¶çš„å®ç°</a></p>
<p><a href="https://juejin.cn/post/7170716245762048036" target="_blank" title="https://juejin.cn/post/7170716245762048036">8. ä¸ºä»€ä¹ˆç»„ä»¶åº“æˆ–æ’ä»¶éœ€è¦å®šä¹‰ peerDependencies</a></p>
<p><a href="https://juejin.cn/post/7179257832632483896" target="_blank" title="https://juejin.cn/post/7179257832632483896">9. ç»„ä»¶å¼€å‘ä¸­ Vue3 ç›¸å…³çŸ¥è¯†çš„åº”ç”¨ä¸è§£æåŠ Button ç»„ä»¶çš„å®ç°</a></p>
<p><a href="https://juejin.cn/post/7186683381470462007" target="_blank" title="https://juejin.cn/post/7186683381470462007">10. CSS ç³»ç»Ÿé¢œè‰²å’Œæš—é»‘æ¨¡å¼çš„å…³ç³»åŠæ„ä¹‰</a></p>
<p><a href="https://juejin.cn/post/7190370726677839932" target="_blank" title="https://juejin.cn/post/7190370726677839932">11. æ·±å…¥ç†è§£ç»„ä»¶åº“ä¸­SCSSå’ŒCSSå˜é‡çš„æ¶æ„åº”ç”¨å’Œå®è·µ</a></p>
<p><a href="https://juejin.cn/post/7204454572890046501" target="_blank" title="https://juejin.cn/post/7204454572890046501">12. ç»„ä»¶ v-model çš„å°è£…å®ç°åŸç†åŠ Input ç»„ä»¶çš„æ ¸å¿ƒå®ç°</a></p>
<p><a href="https://juejin.cn/post/7217399337989881911" target="_blank" title="https://juejin.cn/post/7217399337989881911">13. æ·±å…¥ç†è§£ Vue3 çš„ v-model åŠè‡ªå®šä¹‰æŒ‡ä»¤çš„å®ç°åŸç†</a></p>
<p><a href="https://juejin.cn/post/7249299811497066551" target="_blank" title="https://juejin.cn/post/7249299811497066551">14. React å’Œ Vue éƒ½ç¦»ä¸å¼€çš„è¡¨å•éªŒè¯å·¥å…·åº“ async-validator ä¹‹ç­–ç•¥æ¨¡å¼çš„åº”ç”¨</a></p>
<p><a href="https://juejin.cn/post/7258966810350174263" target="_blank" title="https://juejin.cn/post/7258966810350174263">15. Form è¡¨å•çš„è®¾è®¡ä¸å®ç°</a></p>
<p><a href="https://juejin.cn/post/7313380227160522763" target="_blank" title="https://juejin.cn/post/7313380227160522763">16. ç»„ä»¶åº“çš„æ‰“åŒ…åŸç†ä¸å®è·µè¯¦è§£</a></p>
<p><a href="https://juejin.cn/post/7572480736362119174" target="_blank" title="https://juejin.cn/post/7572480736362119174">17. Vue3 ä¸šåŠ¡ç»„ä»¶åº“æŒ‰éœ€åŠ è½½çš„å®ç°åŸç†</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Codeï¼šä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹]]></title>    <link>https://juejin.cn/post/7574448424998699044</link>    <guid>https://juejin.cn/post/7574448424998699044</guid>    <pubDate>2025-11-20T05:50:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574448424998699044" data-draft-id="7574382900859977755" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Codeï¼šä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹"/> <meta itemprop="keywords" content="Claude,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-20T05:50:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Codeï¼šä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T05:50:07.000Z" title="Thu Nov 20 2025 05:50:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ <strong>Claude Code</strong>ï¼Œä¸€ä¸ªç”± Anthropic å¼€å‘çš„äº¤äº’å¼å‘½ä»¤è¡Œ AI ç¼–ç¨‹åŠ©æ‰‹ã€‚ä»Šå¤©æˆ‘æƒ³å‘å¤§å®¶ä»‹ç»ä¸€ä¸‹è‡ªå·±ã€‚</p>
<h2 data-id="heading-0">æˆ‘æ˜¯è°ï¼Ÿ</h2>
<p>æˆ‘æ˜¯ Claude AI çš„å®˜æ–¹å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰å·¥å…·ï¼Œä¸“é—¨ä¸ºè½¯ä»¶å¼€å‘è€…è®¾è®¡ã€‚æˆ‘åŸºäº <strong>Claude Sonnet 4.5</strong> æ¨¡å‹ï¼Œæ‹¥æœ‰å¼ºå¤§çš„ä»£ç ç†è§£å’Œç”Ÿæˆèƒ½åŠ›ï¼Œå¯ä»¥ç›´æ¥åœ¨ä½ çš„ç»ˆç«¯ä¸­å¸®åŠ©ä½ å®Œæˆå„ç§ç¼–ç¨‹ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-1">æˆ‘èƒ½åšä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-2">ğŸ”§ ä»£ç ç¼–å†™ä¸ä¿®æ”¹</h3>
<ul>
<li>å¿«é€Ÿç”Ÿæˆä»£ç ç‰‡æ®µå’Œå®Œæ•´åŠŸèƒ½</li>
<li>ä¿®å¤ bug å’Œé”™è¯¯</li>
<li>é‡æ„ç°æœ‰ä»£ç ï¼Œæå‡ä»£ç è´¨é‡</li>
<li>æ·»åŠ æ–°åŠŸèƒ½åˆ°ç°æœ‰é¡¹ç›®</li>
</ul>
<h3 data-id="heading-3">ğŸ“– ä»£ç ç†è§£ä¸åˆ†æ</h3>
<ul>
<li>è§£é‡Šå¤æ‚çš„ä»£ç é€»è¾‘</li>
<li>åˆ†æä»£ç åº“ç»“æ„</li>
<li>æœç´¢å’Œå®šä½ç‰¹å®šåŠŸèƒ½</li>
<li>ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–å»ºè®®</li>
</ul>
<h3 data-id="heading-4">ğŸ› ï¸ å¼€å‘å·¥å…·é›†æˆ</h3>
<ul>
<li>Git æ“ä½œï¼ˆæäº¤ã€åˆ†æ”¯ã€PR åˆ›å»ºï¼‰</li>
<li>è¿è¡Œæµ‹è¯•å’Œæ„å»ºå‘½ä»¤</li>
<li>æ–‡ä»¶æœç´¢å’Œç¼–è¾‘</li>
<li>åŒ…ç®¡ç†å’Œä¾èµ–å®‰è£…</li>
</ul>
<h3 data-id="heading-5">ğŸ’¡ æ™ºèƒ½ä»»åŠ¡ç®¡ç†</h3>
<ul>
<li>è‡ªåŠ¨æ‹†è§£å¤æ‚ä»»åŠ¡</li>
<li>è·Ÿè¸ªä»»åŠ¡è¿›åº¦</li>
<li>å¹¶è¡Œå¤„ç†å¤šä¸ªç‹¬ç«‹ä»»åŠ¡</li>
<li>å®æ—¶åé¦ˆå·¥ä½œçŠ¶æ€</li>
</ul>
<h2 data-id="heading-6">æˆ‘çš„ç‰¹ç‚¹</h2>
<h3 data-id="heading-7">1ï¸âƒ£ ç›´æ¥æ“ä½œæ–‡ä»¶ç³»ç»Ÿ</h3>
<p>æˆ‘å¯ä»¥ç›´æ¥è¯»å–ã€ç¼–è¾‘å’Œåˆ›å»ºæ–‡ä»¶ï¼Œä¸éœ€è¦ä½ æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ä»£ç ã€‚æˆ‘ä¼šä½¿ç”¨ä¸“é—¨çš„å·¥å…·æ¥é«˜æ•ˆåœ°å®Œæˆæ–‡ä»¶æ“ä½œã€‚</p>
<h3 data-id="heading-8">2ï¸âƒ£ ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›</h3>
<p>æˆ‘èƒ½ç†è§£æ•´ä¸ªä»£ç åº“çš„ç»“æ„ï¼Œåœ¨ä¿®æ”¹ä»£ç æ—¶ä¿æŒé£æ ¼ä¸€è‡´ï¼Œå¹¶è€ƒè™‘åˆ°ä»£ç é—´çš„ä¾èµ–å…³ç³»ã€‚</p>
<h3 data-id="heading-9">3ï¸âƒ£ å¤šè¯­è¨€æ”¯æŒ</h3>
<p>æ— è®ºæ˜¯ JavaScriptã€Pythonã€Javaã€Goã€Rust è¿˜æ˜¯å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼Œæˆ‘éƒ½èƒ½æä¾›å¸®åŠ©ã€‚</p>
<h3 data-id="heading-10">4ï¸âƒ£ äº¤äº’å¼å·¥ä½œæµ</h3>
<p>æˆ‘ä¼šåœ¨å·¥ä½œè¿‡ç¨‹ä¸­è¯¢é—®ä½ çš„æ„è§ï¼Œç¡®ä¿å®ç°ç¬¦åˆä½ çš„é¢„æœŸã€‚é‡åˆ°ä¸ç¡®å®šçš„åœ°æ–¹ï¼Œæˆ‘ä¼šä¸»åŠ¨å¯»æ±‚ç¡®è®¤ã€‚</p>
<h3 data-id="heading-11">5ï¸âƒ£ å®‰å…¨å¯é </h3>
<p>æˆ‘åœ¨æ“ä½œå‰ä¼šä»”ç»†æ£€æŸ¥ï¼Œé¿å…å¼•å…¥å®‰å…¨æ¼æ´ï¼ˆå¦‚ SQL æ³¨å…¥ã€XSS ç­‰ï¼‰ï¼Œå¹¶éµå¾ªæœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-12">å·¥ä½œæ–¹å¼</h2>
<p>æˆ‘çš„å·¥ä½œæµç¨‹é€šå¸¸æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li><strong>ç†è§£éœ€æ±‚</strong> - åˆ†æä½ çš„é—®é¢˜æˆ–ä»»åŠ¡</li>
<li><strong>åˆ¶å®šè®¡åˆ’</strong> - å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå°æ­¥éª¤</li>
<li><strong>æ‰§è¡Œæ“ä½œ</strong> - ä½¿ç”¨å„ç§å·¥å…·å®Œæˆä»»åŠ¡</li>
<li><strong>éªŒè¯ç»“æœ</strong> - ç¡®ä¿ä»£ç æ­£å¸¸å·¥ä½œ</li>
<li><strong>åé¦ˆè¿›åº¦</strong> - å®æ—¶å‘ŠçŸ¥ä½ å½“å‰çŠ¶æ€</li>
</ol>
<h2 data-id="heading-13">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-14">å¿«é€ŸåŸå‹å¼€å‘</h3>
<p>éœ€è¦å¿«é€Ÿå®ç°ä¸€ä¸ªæƒ³æ³•ï¼Ÿæˆ‘å¯ä»¥å¸®ä½ ç”ŸæˆåŸºç¡€ä»£ç æ¡†æ¶ã€‚</p>
<h3 data-id="heading-15">è°ƒè¯•å›°éš¾é—®é¢˜</h3>
<p>é‡åˆ°éš¾ä»¥è¿½è¸ªçš„ bugï¼Ÿæˆ‘å¯ä»¥å¸®ä½ åˆ†æä»£ç ï¼Œæ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚</p>
<h3 data-id="heading-16">å­¦ä¹ æ–°æŠ€æœ¯</h3>
<p>æƒ³äº†è§£æŸä¸ªåº“æˆ–æ¡†æ¶çš„ç”¨æ³•ï¼Ÿæˆ‘å¯ä»¥è¾¹è§£é‡Šè¾¹æ¼”ç¤ºã€‚</p>
<h3 data-id="heading-17">é‡æ„è€ä»£ç </h3>
<p>éœ€è¦ä¼˜åŒ–æ€§èƒ½æˆ–æ”¹è¿›æ¶æ„ï¼Ÿæˆ‘å¯ä»¥å¸®ä½ å®‰å…¨åœ°é‡æ„ä»£ç ã€‚</p>
<h3 data-id="heading-18">è‡ªåŠ¨åŒ–é‡å¤ä»»åŠ¡</h3>
<p>æ‰¹é‡ä¿®æ”¹æ–‡ä»¶ã€æ ¼å¼åŒ–ä»£ç ã€æ›´æ–°ä¾èµ–...è¿™äº›äº¤ç»™æˆ‘å°±å¥½ã€‚</p>
<h2 data-id="heading-19">æˆ‘çš„ç†å¿µ</h2>
<p>æˆ‘ç›¸ä¿¡å¥½çš„å·¥å…·åº”è¯¥ï¼š</p>
<ul>
<li><strong>é«˜æ•ˆ</strong> - å¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼ŒèŠ‚çœä½ çš„æ—¶é—´</li>
<li><strong>å‡†ç¡®</strong> - åŸºäºäº‹å®å’Œæœ€ä½³å®è·µæä¾›å»ºè®®</li>
<li><strong>é€æ˜</strong> - æ¸…æ™°è¯´æ˜æˆ‘åœ¨åšä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™æ ·åš</li>
<li><strong>è°¦é€Š</strong> - ä¸ç¡®å®šæ—¶ä¼šæ‰¿è®¤ï¼Œè€Œä¸æ˜¯çŒœæµ‹</li>
</ul>
<h2 data-id="heading-20">å¦‚ä½•è·å¾—å¸®åŠ©</h2>
<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºæˆ‘çš„åŠŸèƒ½ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>/help</code> å‘½ä»¤æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</li>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.claude.com%2Fen%2Fdocs%2Fclaude-code" target="_blank" title="https://docs.claude.com/en/docs/claude-code" ref="nofollow noopener noreferrer">Claude Code æ–‡æ¡£</a></li>
<li>åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-code%2Fissues" target="_blank" title="https://github.com/anthropics/claude-code/issues" ref="nofollow noopener noreferrer">GitHub</a> ä¸Šåé¦ˆé—®é¢˜</li>
</ul>
<h2 data-id="heading-21">ç»“è¯­</h2>
<p>ä½œä¸ºä½ çš„ AI ç¼–ç¨‹ä¼™ä¼´ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯è®©ç¼–ç¨‹å·¥ä½œå˜å¾—æ›´è½»æ¾ã€æ›´é«˜æ•ˆã€‚æ— è®ºä½ æ˜¯åœ¨å¼€å‘æ–°åŠŸèƒ½ã€ä¿®å¤ bugï¼Œè¿˜æ˜¯æ¢ç´¢æ–°æŠ€æœ¯ï¼Œæˆ‘éƒ½éšæ—¶å‡†å¤‡ä¸ºä½ æä¾›å¸®åŠ©ã€‚</p>
<p>è®©æˆ‘ä»¬ä¸€èµ·åˆ›é€ æ›´ä¼˜ç§€çš„ä»£ç å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ è®°å½•ï¼šåœ¨Spring bootä¸­ç®€å•å®ç°ä¸€ä¸ªWebSocket Demo]]></title>    <link>https://juejin.cn/post/7574069837526368298</link>    <guid>https://juejin.cn/post/7574069837526368298</guid>    <pubDate>2025-11-18T18:50:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574069837526368298" data-draft-id="7573631442313412614" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ è®°å½•ï¼šåœ¨Spring bootä¸­ç®€å•å®ç°ä¸€ä¸ªWebSocket Demo"/> <meta itemprop="keywords" content="WebSocket"/> <meta itemprop="datePublished" content="2025-11-18T18:50:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hooknum"/> <meta itemprop="url" content="https://juejin.cn/user/837147523285209"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ è®°å½•ï¼šåœ¨Spring bootä¸­ç®€å•å®ç°ä¸€ä¸ªWebSocket Demo
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/837147523285209/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hooknum
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-18T18:50:52.000Z" title="Tue Nov 18 2025 18:50:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">èƒŒæ™¯</h3>
<p>ä¹‹å‰åœ¨é¡¹ç›®é‡Œç”¨è¿‡WebSocketåšè¿‡â€œç”¨æˆ·ä¸‹å•å®æ—¶é€šçŸ¥â€çš„åŠŸèƒ½ï¼Œä½†æœ€è¿‘å›è¿‡å¤´æ¥çœ‹ï¼Œç«Ÿç„¶å®Œå…¨æ²¡æœ‰ä¸€ç‚¹å°è±¡ã€‚ä»”ç»†ä¸€æƒ³ï¼ŒåŸå› ä¹Ÿå¾ˆç®€å•ï¼šå½“åˆåªæ˜¯çœ‹åˆ«äººå†™çš„ä»£ç ï¼Œè‡ªå·±çœŸæ­£åŠ¨æ‰‹å®è·µè¾ƒå°‘ã€‚ç»“æœå°±æ˜¯ï¼Œå­¦äº†å¾ˆä¹…ï¼Œçœ‹ä¼¼æ‡‚äº†ï¼ŒçœŸæ­£è½åˆ°ä»£ç ä¸Šå´æ— ä»ä¸‹æ‰‹ã€‚</p>
<p>äºæ˜¯å†³å®šé‡æ–°å®¡è§†è‡ªå·±ï¼Œå°†å­¦ä¹ çš„è„šå°å‘å¸ƒåœ¨ç½‘ä¸Šï¼ˆä¹Ÿæ˜¯çŠ¹è±«äº†å¾ˆä¹…æ‰å†³å®šçš„ï¼Œå› ä¸ºä¹‹å‰æ€»è§‰å¾—å‘åšå®¢å¿…é¡»æ˜¯æŠ€æœ¯å¤§ä½¬æ‰è¡Œï¼Œè‡ªå·±ä»€ä¹ˆéƒ½ä¸æ‡‚çš„èœé¸¡å‘å‡ºæ¥çš„ä¸œè¥¿ä¼šæ±¡æŸ“äº†å¤§ä¼™çš„çœ¼ç›ï¼‰ï¼Œç°åœ¨è™½ç„¶ä¹Ÿä¼šè¿™ä¹ˆæƒ³ï¼Œä½†æ˜¯æ›´å¤šçš„æ˜¯æŒ‘æˆ˜å’Œè®°å½•è‡ªå·±äº†â€”â€”è®°å½•å­¦ä¹ çš„è¿‡ç¨‹ï¼Œæœªæ¥å›å¤´çœ‹ä¹Ÿæœ‰è¿¹å¯å¾ªï¼Œè€Œä¸æ˜¯ä¸€ç‰‡æ¨¡ç³Šçš„å›å¿†ã€‚äººç”Ÿå˜›ï¼Œä¸å°±æ˜¯ä¸æ–­ä½“éªŒå—ï¼Ÿæ—¢ç„¶æƒ³å†™ï¼Œå°±ä»ç°åœ¨å¼€å§‹ğŸ˜‹</p>
<p>æ‰€ä»¥ï¼Œå°±ä»ä¸€ä¸ªç®€å•çš„WebSocket Demoå¼€å§‹ï¼Œæ­£å¼å¼€å¯æˆ‘çš„åšå®¢ä¹‹æ—…ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ç®€å•ç†è§£</h2>
<p>WebSocketæ˜¯ä¸€ç§ç½‘ç»œåè®®ã€‚å®ƒå®ç°äº†æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯å…¨åŒå·¥é€šä¿¡ï¼Œä½¿å¾—æœåŠ¡ç«¯å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ¶ˆæ¯ï¼Œè¿™é€‚ç”¨äºéœ€è¦å®æ—¶æ›´æ–°çš„åœºæ™¯ï¼Œæ¯”å¦‚ç”¨æˆ·ä¸‹å•æé†’ã€åŒ»ç–—çœ‹æ¿æ•°æ®å®æ—¶åˆ·æ–°ç­‰ã€‚</p>
<h2 data-id="heading-2">äºŒã€å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-3">1ã€å¯¼å…¥ä¾èµ–</h3>
<p>åˆ›å»ºä¸€ä¸ªSpring Booté¡¹ç›®ï¼Œå¹¶åœ¨<code>pom.xml</code>ä¸­å¯¼å…¥ç›¸å…³ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-websocket<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">2ã€å®šä¹‰é…ç½®ç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.web.socket.server.standard.ServerEndpointExporter;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketConfiguration</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ServerEndpointExporter <span class="hljs-title function_">serverEndpointExporter</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerEndpointExporter</span>();
    }
}
</code></pre>
<p>è¯´æ˜ï¼šå…³äºä¸ºä»€ä¹ˆè¦å®šä¹‰é…ç½®ç±»ï¼Œæˆ‘æŸ¥æ‰¾äº†ç½‘ä¸Šä¸€äº›èµ„æ–™ï¼Œç®€å•æ¥è¯´å°±æ˜¯é€šè¿‡è¿™ä¸ªé…ç½®spring bootæ‰èƒ½å»æ‰«æå…³äºwebsocketçš„æ³¨è§£ã€‚</p>
<blockquote>
<p>ç”±äºWebSocketçš„<code>@ServerEndpoint</code>æ³¨è§£å±äºJava EEæ ‡å‡†ï¼Œå¹¶ä¸æ˜¯Springæœ¬èº«çš„ç»„ä»¶ï¼ŒSpring Bootä¸ä¼šè‡ªåŠ¨è¯†åˆ«ã€‚<br/>
ä¸ºäº†è®©Spring Bootèƒ½å¤Ÿæ‰«æå¹¶æ³¨å†Œè¿™äº›WebSocketç«¯ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜<code>ServerEndpointExporter</code>è¿™ä¸ª Beanã€‚<br/>
å®ƒçš„ä½œç”¨å°±æ˜¯è´Ÿè´£æŠŠæ‰€æœ‰<code>@ServerEndpoint</code>ç±»æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼Œå¦åˆ™WebSocketæœåŠ¡å°†æ— æ³•è¢«è®¿é—®ã€‚</p>
</blockquote>
<h3 data-id="heading-5">3ã€å¼€å‘æœåŠ¡ç«¯ç»„ä»¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> jakarta.websocket.*;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> jakarta.websocket.server.PathParam;
<span class="hljs-keyword">import</span> jakarta.websocket.server.ServerEndpoint;

<span class="hljs-keyword">import</span> java.util.Collection;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * WebSocketæœåŠ¡
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@ServerEndpoint("/ws/{sid}")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketServer</span> {

    <span class="hljs-comment">//å­˜æ”¾ä¼šè¯å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, Session&gt; sessionMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

    <span class="hljs-comment">/**
     * è¿æ¥å»ºç«‹æˆåŠŸè°ƒç”¨çš„æ–¹æ³•ï¼Œå¹¶å­˜å‚¨å½“å‰ä¼šè¯å¯¹è±¡
     */</span>
    <span class="hljs-meta">@OnOpen</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onOpen</span><span class="hljs-params">(Session session, <span class="hljs-meta">@PathParam("sid")</span> String sid)</span> {
        System.out.println(<span class="hljs-string">"å®¢æˆ·ç«¯ï¼š"</span> + sid + <span class="hljs-string">"å»ºç«‹è¿æ¥"</span>);
        sessionMap.put(sid, session);
    }

    <span class="hljs-comment">/**
     * æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯åè°ƒç”¨çš„æ–¹æ³•
     *
     * <span class="hljs-doctag">@param</span> message å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯
     */</span>
    <span class="hljs-meta">@OnMessage</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(String message, <span class="hljs-meta">@PathParam("sid")</span> String sid)</span> {
        System.out.println(<span class="hljs-string">"æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯ï¼š"</span> + sid + <span class="hljs-string">"çš„ä¿¡æ¯:"</span> + message);
    }

    <span class="hljs-comment">/**
     * è¿æ¥å…³é—­è°ƒç”¨çš„æ–¹æ³•
     *
     * <span class="hljs-doctag">@param</span> sid
     */</span>
    <span class="hljs-meta">@OnClose</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClose</span><span class="hljs-params">(<span class="hljs-meta">@PathParam("sid")</span> String sid)</span> {
        System.out.println(<span class="hljs-string">"è¿æ¥æ–­å¼€:"</span> + sid);
        sessionMap.remove(sid);
    }

    <span class="hljs-meta">@OnError</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Session session, Throwable error, <span class="hljs-meta">@PathParam("sid")</span> String sid)</span> {
        System.out.println(<span class="hljs-string">"å®¢æˆ·ç«¯ï¼š"</span> + sid + <span class="hljs-string">"å‘ç”Ÿé”™è¯¯"</span>);
        error.printStackTrace();
    }

    <span class="hljs-comment">/**
     * ç¾¤å‘
     *
     * <span class="hljs-doctag">@param</span> message
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendToAllClient</span><span class="hljs-params">(String message)</span> {
        Collection&lt;Session&gt; sessions = sessionMap.values();
        <span class="hljs-keyword">for</span> (Session session : sessions) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">//æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</span>
                session.getBasicRemote().sendText(message);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                e.printStackTrace();
            }
        }
    }

}
</code></pre>
<p><code>@ServerEndpoint</code>ï¼šè¡¨ç¤ºæ­¤ç±»æ˜¯ä¸€ä¸ªWebSocketç«¯ç‚¹ï¼Œ<code>value</code>å±æ€§æ˜¯å¿…é¡»çš„ï¼Œç”¨äºè®¾ç½®è·¯ç”±ã€‚å¯ä»¥ç±»æ¯”<code>@RequestMapping</code>è¿™æ ·å°±å¥½ç†è§£å¤šäº†ã€‚</p>
<p><code>@OnOpen</code>ï¼šè¿æ¥å»ºç«‹æ—¶è§¦å‘ï¼Œç”¨äºç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥äº‹ä»¶ã€‚å¯åœ¨è¿™é‡Œä¿å­˜sessionã€‚</p>
<p><code>@OnMessage</code>ï¼šæ”¶åˆ°æ¶ˆæ¯æ—¶è§¦å‘ï¼Œç”¨äºç›‘å¬å®¢æˆ·ç«¯æ¶ˆæ¯äº‹ä»¶ã€‚ç±»ä¼¼Controllerçš„â€œå¤„ç†è¯·æ±‚æ–¹æ³•â€ï¼Œä½†å®ƒå¤„ç†çš„æ˜¯WebSocketæ¶ˆæ¯ã€‚</p>
<p><code>@OnClose</code>ï¼šè¿æ¥å…³é—­æ—¶è§¦å‘ï¼Œç”¨äºå¤„ç†è¿æ¥æ–­å¼€äº‹ä»¶ã€‚å¯åœ¨æ­¤ç§»é™¤sessionã€é‡Šæ”¾èµ„æºã€‚</p>
<p><code>@OnError</code>ï¼šå‘ç”Ÿå¼‚å¸¸æ—¶è§¦å‘ï¼Œç”¨äºå¤„ç†å¼‚å¸¸äº‹ä»¶ã€‚è¯¥æ–¹æ³•å¿…é¡»è¦æœ‰ä¸€ä¸ª<code>Throwable</code>ç±»å‹çš„å‚æ•°ï¼Œè¡¨ç¤ºå‘ç”Ÿçš„å¼‚å¸¸ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥æ‰“å°é”™è¯¯æ—¥å¿—ï¼Œæ¸…é™¤é”™è¯¯ä¼šè¯ã€‚</p>
<h3 data-id="heading-6">4ã€å‰ç«¯é¡µé¢ï¼ˆå¯é€‰ï¼‰</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">HTML</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>WebSocket Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"send()"</span>&gt;</span>å‘é€æ¶ˆæ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"closeWebSocket()"</span>&gt;</span>å…³é—­è¿æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"message"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> websocket = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> clientId = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>);

    <span class="hljs-comment">//åˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒWebSocket</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-string">'WebSocket'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>){
        <span class="hljs-comment">//è¿æ¥WebSocketèŠ‚ç‚¹</span>
        websocket = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">"ws://localhost:8080/ws/"</span>+clientId);
    }
    <span class="hljs-keyword">else</span>{
        <span class="hljs-title function_">alert</span>(<span class="hljs-string">'Not support websocket'</span>)
    }

    <span class="hljs-comment">//è¿æ¥å‘ç”Ÿé”™è¯¯çš„å›è°ƒæ–¹æ³•</span>
    websocket.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        <span class="hljs-title function_">setMessageInnerHTML</span>(<span class="hljs-string">"error"</span>);
    };

    <span class="hljs-comment">//è¿æ¥æˆåŠŸå»ºç«‹çš„å›è°ƒæ–¹æ³•</span>
    websocket.<span class="hljs-property">onopen</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        <span class="hljs-title function_">setMessageInnerHTML</span>(<span class="hljs-string">"è¿æ¥æˆåŠŸ"</span>);
    }

    <span class="hljs-comment">//æ¥æ”¶åˆ°æ¶ˆæ¯çš„å›è°ƒæ–¹æ³•</span>
    websocket.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>){
        <span class="hljs-title function_">setMessageInnerHTML</span>(event.<span class="hljs-property">data</span>);
    }

    <span class="hljs-comment">//è¿æ¥å…³é—­çš„å›è°ƒæ–¹æ³•</span>
    websocket.<span class="hljs-property">onclose</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        <span class="hljs-title function_">setMessageInnerHTML</span>(<span class="hljs-string">"close"</span>);
    }

    <span class="hljs-comment">//ç›‘å¬çª—å£å…³é—­äº‹ä»¶ï¼Œå½“çª—å£å…³é—­æ—¶ï¼Œä¸»åŠ¨å»å…³é—­websocketè¿æ¥ï¼Œé˜²æ­¢è¿æ¥è¿˜æ²¡æ–­å¼€å°±å…³é—­çª—å£ï¼Œserverç«¯ä¼šæŠ›å¼‚å¸¸ã€‚</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">onbeforeunload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        websocket.<span class="hljs-title function_">close</span>();
    }

    <span class="hljs-comment">//å°†æ¶ˆæ¯æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Š</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">setMessageInnerHTML</span>(<span class="hljs-params">innerHTML</span>){
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'message'</span>).<span class="hljs-property">innerHTML</span> += innerHTML + <span class="hljs-string">'&lt;br/&gt;'</span>;
    }

    <span class="hljs-comment">//å‘é€æ¶ˆæ¯</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">send</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">var</span> message = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'text'</span>).<span class="hljs-property">value</span>;
        websocket.<span class="hljs-title function_">send</span>(message);
    }
	
	<span class="hljs-comment">//å…³é—­è¿æ¥</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">closeWebSocket</span>(<span class="hljs-params"/>) {
        websocket.<span class="hljs-title function_">close</span>();
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ³¨æ„ï¼šè¿™é‡Œä¸»è¦æ³¨æ„<code>new WebSocket("ws://localhost:8080/ws/"+clientId)</code>ï¼Œè¿™æ˜¯WebSocketå¯¹è±¡çš„åˆå§‹åŒ–ï¼ŒæŒ‡å®šè¦è¿æ¥æœåŠ¡å™¨çš„åœ°å€ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€æµ‹è¯•ç»“æœ</h2>
<p>1ï¸âƒ£å¯åŠ¨æœåŠ¡å™¨ï¼Œå¹¶æ‰“å¼€websocket.htmlè¿›è¡ŒåŒç«¯è¿æ¥
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6eeae5bfbcf4d8d96811be6ebd1159d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9va251bQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764096651&amp;x-signature=FOqKTjw8Jx1bXafRhvO5ZCGvxCc%3D" alt="Snipaste_2025-11-19_00-30-04.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a24b4558ded47f1a276040962ab84bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9va251bQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764096651&amp;x-signature=mPvhQB5Jb%2BB4fj3Ld%2FO4UF%2B0G3I%3D" alt="Snipaste_2025-11-19_00-30-35.png" loading="lazy"/></p>
<p>2ï¸âƒ£å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c347aa237af458cac5f895185d7c604~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9va251bQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764096651&amp;x-signature=Th8z0m1L6yk1ic%2BUMcwz9i%2FEZgM%3D" alt="result.jpeg" loading="lazy"/></p>
<p>3ï¸âƒ£æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</p>
<p>å®šä¹‰å®šæ—¶ä»»åŠ¡ç±»ï¼Œå®šæ—¶å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.sky.websocket.WebSocketServer;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.Scheduled;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketTask</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> WebSocketServer webSocketServer;

    <span class="hljs-comment">/**
     * é€šè¿‡WebSocketæ¯éš”5ç§’å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯
     */</span>
    <span class="hljs-meta">@Scheduled(cron = "0/5 * * * * ?")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessageToClient</span><span class="hljs-params">()</span> {
        webSocketServer.sendToAllClient(<span class="hljs-string">"è¿™æ˜¯æ¥è‡ªæœåŠ¡ç«¯çš„æ¶ˆæ¯ï¼š"</span> + DateTimeFormatter.ofPattern(<span class="hljs-string">"HH:mm:ss"</span>).format(LocalDateTime.now()));
    }
}
</code></pre>
<p>æ³¨æ„è¦åœ¨å¯åŠ¨ç±»æ·»åŠ æ³¨è§£<code>@EnableScheduling</code>å¼€å¯ä»»åŠ¡è°ƒåº¦</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b474032b7df543e9957ee7321dfa092d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG9va251bQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764096651&amp;x-signature=ipSbTwTWT%2BLy3Ck4rqHCLnHvMuA%3D" alt="Snipaste_2025-11-19_00-53-19.png" loading="lazy"/></p>
<p>æ­¤å¤–è¿˜å¯ä»¥åœ¨å…¶ä»–æ¥å£ä¸­ä½¿ç”¨webSocketServer.sendToAllClient()ï¼Œè¿™æ ·å°±æ˜¯å¯ä»¥å®æ—¶æ¨é€ã€‚æ¯”å¦‚åœ¨è®¢å•ä¸‹å•åŠŸèƒ½ä¸­è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨ç”¨æˆ·ä¸‹å•åå®æ—¶é€šçŸ¥å•†å®¶ã€‚</p>
<h2 data-id="heading-8">å››ã€é—®é¢˜å‘ç°</h2>
<p>ä¸Šè¿°çš„ä»£ç æ¼”ç¤ºä¸­ï¼Œéƒ¨åˆ†éƒ½æ˜¯ä»¥å¾€é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„ã€‚ç°åœ¨æ¥çœ‹ï¼Œç¡®å®å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</p>
<p><strong>é—®é¢˜æè¿°</strong></p>
<p>åœ¨ä¸€ä¸ªå•†åŸäº¤æ˜“ç³»ç»Ÿä¸­ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªå•†å®¶åŒæ—¶ç™»å½•äº†æµè§ˆå™¨ï¼Œè¿™æ—¶æ¯ä¸ªå•†å®¶éƒ½ä¼šä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªWebSocketè¿æ¥ï¼Œç”¨äºæ¥æ”¶å®æ—¶æ¶ˆæ¯ã€‚å½“ç”¨æˆ·è®¿é—®å•†å®¶Açš„åº—é“ºå¹¶è¿›è¡Œä¸‹å•æ—¶ï¼Œå‰ç«¯ä¼šè°ƒç”¨ä¸‹å•æ¥å£å®Œæˆè®¢å•åˆ›å»ºã€‚ä¸ºäº†å®ç°å®æ—¶æé†’åŠŸèƒ½ï¼ŒæœåŠ¡ç«¯å¸Œæœ›é€šè¿‡WebSocketå°†â€œæ–°è®¢å•â€æ¶ˆæ¯å‘é€ç»™å•†å®¶Aã€‚ç„¶è€Œï¼Œå¦‚æœç›´æ¥ä½¿ç”¨ç¾¤å‘çš„æ–¹å¼ï¼Œç³»ç»Ÿä¼šæŠŠæ¶ˆæ¯å‘é€ç»™æ‰€æœ‰åœ¨çº¿å•†å®¶ï¼ŒåŒ…æ‹¬å•†å®¶ Bï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸šåŠ¡ä¸Šçš„é”™è¯¯ã€‚</p>
<p>å› æ­¤ï¼Œéœ€è¦æ”¹æˆå•å‘ï¼Œå³åªå‘é€ç»™å•†å®¶Aã€‚ä½†é—®é¢˜æ¥äº†ï¼šåœ¨ç”¨æˆ·ä¸‹å•çš„æ¥å£ä¸­ï¼Œå¦‚ä½•è·å–å•†å®¶Açš„WebSocket session IDï¼Œä»è€Œç²¾ç¡®åœ°å°†æ¶ˆæ¯å‘é€ç»™å¯¹åº”å•†å®¶ï¼Ÿ</p>
<p><strong>æ€è€ƒ</strong></p>
<p>å•å‘éœ€è¦WebSocket session IDï¼Œåœ¨ä¸‹å•åŠŸèƒ½ä¸­æˆ‘å¦‚ä½•è·å–åˆ°è¿™ä¸ªidæ ‡è¯†ï¼Ÿå…ˆæ€è€ƒåœ¨ç”¨æˆ·ä¸‹å•åŠŸèƒ½ä¸­æˆ‘ä»¬èƒ½è·å¾—ä»€ä¹ˆï¼Œèƒ½å¦ä»ç°æœ‰çš„èµ„æºä¸­è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥å¾—åˆ°å•†å®¶çš„idï¼Œé‚£ä¹ˆè¿™ä¸ªå•†å®¶idæ˜¯å¦å¯ä»¥ä½œä¸ºå•†å®¶ä¸æœåŠ¡å™¨è¿›è¡ŒWebSocketè¿æ¥çš„session IDå‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜äº†ï¼Œåœ¨ä¸Šè¿°å‰ç«¯é¡µé¢ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨éšæœºå­—ç¬¦ä¸²clientIdæ¥ä½œä¸ºsession IDã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸šåŠ¡è§„å®šï¼ŒæŠŠclientIdæ¢æˆå•†æˆ·IDï¼ˆmerchantIdï¼‰ï¼Œå°±èƒ½è®©WebSocketè¿æ¥ä¸ä¸šåŠ¡ç»‘å®šï¼Œè¿™æ ·åœ¨ä¸‹å•æ¥å£å°±èƒ½æ‰¾åˆ°å¯¹åº”çš„WebSocket Sessionï¼Œç„¶ååªç»™é‚£ä¸ªå•†æˆ·æ¨é€æ¶ˆæ¯ã€‚</p>
<p><strong>ä¼ªä»£ç </strong></p>
<p>å‰ç«¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//è§„å®šå¦‚ä¸‹</span>
<span class="hljs-keyword">var</span> merchantId = <span class="hljs-string">"å•†æˆ·ç™»å½•æˆåŠŸåçš„çœŸå®ID"</span>;
websocket = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">"ws://localhost:8080/ws/"</span> + merchantId);
</code></pre>
<p>åç«¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * WebSocketæœåŠ¡
 */</span>
<span class="hljs-meta">@ServerEndpoint("/ws/{merchantId}")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketServer</span> {
    
    <span class="hljs-comment">//å­˜æ”¾å•†æˆ·ä¸æœåŠ¡å™¨ä¼šè¯å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, Session&gt; merchantSessions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">/**
     * è¿æ¥å»ºç«‹æˆåŠŸè°ƒç”¨çš„æ–¹æ³•ï¼Œå¹¶å­˜å‚¨å½“å‰ä¼šè¯å¯¹è±¡
     */</span>
    <span class="hljs-meta">@OnOpen</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onOpen</span><span class="hljs-params">(Session session, <span class="hljs-meta">@PathParam("merchantId")</span> String merchantId)</span> {
        merchantSessions.put(merchantId, session);
    }
    
    <span class="hljs-comment">//å…¶ä»–æ–¹æ³•...</span>

    <span class="hljs-comment">//å•å‘</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendToMerchant</span><span class="hljs-params">(String merchantId, String message)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> merchantSessions.get(merchantId);
        <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span> &amp;&amp; session.isOpen()) {
            <span class="hljs-keyword">try</span> {
                session.getBasicRemote().sendText(message);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                e.printStackTrace();
            }
        }
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ä¸‹å•æ¥å£è°ƒç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-meta">@PostMapping("/order/create")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Order order)</span> {
    <span class="hljs-comment">// åˆ›å»ºè®¢å•....</span>

    WebSocketServer.sendToMerchant(order.getMerchantId(), <span class="hljs-string">"æ‚¨æœ‰æ–°è®¢å•ï¼"</span>);
}
</code></pre>
<p>è¿™æ ·åœ¨ç”¨æˆ·ä¸‹å•æ¥å£ä¸­å°±èƒ½æ ¹æ®å•†æˆ·IDæ‰¾åˆ°å¯¹åº”çš„WebSocketä¼šè¯ï¼Œä»è€Œå®ç°å®šå‘æ¨é€ã€‚</p>
<h2 data-id="heading-9">äº”ã€æ€»ç»“</h2>
<p>æ•´ç¯‡æ–‡ç« å†™ä¸‹æ¥ï¼Œæ„Ÿè§‰åˆå›åˆ°äº†å½“åˆä¸€å¼€å§‹å†™é¡¹ç›®çš„æ—¶å€™ã€‚ç£•ç£•ç¢°ç¢°ï¼Œç¢°åˆ°å›°éš¾æ—¶å¿ƒçƒ¦æ„ä¹±ï¼Œè§£å†³é—®é¢˜æ—¶åˆä¸Šè¹¿ä¸‹è·³ğŸ¥²ï¼Œæ¸©æ•…è€ŒçŸ¥æ–°ï¼Œé€šè¿‡å¯¹WebSocketçš„å›é¡¾ï¼Œè¿›ä¸€æ­¥ç†è§£äº†å¦‚ä½•å®ç°ç”¨æˆ·ä¸‹å•å®æ—¶é€šçŸ¥åŠŸèƒ½ã€‚åŒæ—¶ä¹Ÿæå¤§çš„é¼“èˆäº†è‡ªä¿¡ï¼ŒåŸæ¥è®¤çœŸæŠ•å…¥å†™ä¸€ç¯‡åšå®¢å¯ä»¥å¸¦æ¥è¿™ä¹ˆå¤šçš„æ­£åé¦ˆï¼Œå½“ç„¶ä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸‰åˆ†é’Ÿçƒ­åº¦å“ˆğŸ˜ã€‚æ€»ä¹‹æ•¢äºè®°å½•è‡ªå·±ï¼Œæ•¢äºåˆ†äº«è‡ªå·±ï¼Œæ•¢äºå°è¯•ä¸åŒçš„ä½“éªŒã€‚</p>
<p><strong>æœ€åï¼š</strong>
æœ¬æ–‡ä»…ä½œä¸ºå­¦ä¹ è®°å½•åˆ†äº«ä½¿ç”¨ï¼Œå†…å®¹åŸºäºä½œè€…å½“å‰æŠ€æœ¯è®¤çŸ¥æ•´ç†ï¼Œè‹¥æœ‰ä¸å‡†ç¡®æˆ–æè¿°ä¸æ¸…ä¹‹å¤„ï¼Œæ¬¢è¿è¯„è®ºåŒºæŒ‡æ­£ï¼Œæˆ‘ä¼šåœ¨èƒ½åŠ›èŒƒå›´å†…ä¿®æ­£å®Œå–„ï¼Œè°¢è°¢é˜…è¯»ï¼ğŸ™</p>
<h2 data-id="heading-10">å‚è€ƒ</h2>
<p>1ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fspringdoc.cn%2Fspring-boot-websocket%2F" target="_blank" title="https://springdoc.cn/spring-boot-websocket/" ref="nofollow noopener noreferrer">åœ¨ Spring Boot ä¸­æ•´åˆã€ä½¿ç”¨ WebSocket - spring ä¸­æ–‡ç½‘</a></p>
<p>2ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fguoqi_666%2Farticle%2Fdetails%2F137260613" target="_blank" title="https://blog.csdn.net/guoqi_666/article/details/137260613" ref="nofollow noopener noreferrer">ä¸‡å­—è¯¦è§£ï¼Œå¸¦ä½ å½»åº•æŒæ¡ WebSocket ç”¨æ³•ï¼ˆè‡³å°Šå…¸è—ç‰ˆï¼‰å†™çš„ä¸é”™-CSDNåšå®¢</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹  LiteLLM çš„æ¨¡å‹ç®¡ç†]]></title>    <link>https://juejin.cn/post/7573896789366472742</link>    <guid>https://juejin.cn/post/7573896789366472742</guid>    <pubDate>2025-11-19T01:06:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573896789366472742" data-draft-id="7573890735579463690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹  LiteLLM çš„æ¨¡å‹ç®¡ç†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-19T01:06:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—¥ä¹ ä¸€æŠ€"/> <meta itemprop="url" content="https://juejin.cn/user/3913917125896190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹  LiteLLM çš„æ¨¡å‹ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917125896190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—¥ä¹ ä¸€æŠ€
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.1 åˆå­¦ä¹ç»ƒ
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.1 åˆå­¦ä¹ç»ƒ" title="VIP.1 åˆå­¦ä¹ç»ƒ" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T01:06:37.000Z" title="Wed Nov 19 2025 01:06:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¿«é€Ÿäº†è§£äº† LiteLLM çš„æ ¸å¿ƒç‰¹æ€§å’ŒåŸºæœ¬ç”¨æ³•ã€‚æˆ‘ä»¬çŸ¥é“ LiteLLM é€šè¿‡ç»Ÿä¸€çš„ API æ¥å£æ”¯æŒè°ƒç”¨ 100+ ä¸ª LLM æœåŠ¡å•†çš„æ¨¡å‹ï¼Œè€Œ Proxy Server å¯ä»¥ä½œä¸ºä¸€ä¸ªä¼ä¸šçº§çš„ LLM ç½‘å…³æ¥ç»Ÿä¸€ç®¡ç†å’Œè·¯ç”±è¯·æ±‚ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬çœŸæ­£å»éƒ¨ç½²å’Œä½¿ç”¨ LiteLLM Proxy æ—¶ï¼Œä¼šé¢ä¸´ä¸€ä¸ªéå¸¸å®é™…çš„é—®é¢˜ï¼š<strong>å¦‚ä½•æœ‰æ•ˆåœ°ç®¡ç†è¿™äº›æ¨¡å‹ï¼Ÿ</strong></p>
<p>æ˜¯å¦èƒ½å¤Ÿå¿«é€Ÿæ·»åŠ æ–°æ¨¡å‹è€Œä¸éœ€è¦é‡å¯æœåŠ¡ï¼Ÿèƒ½å¦è®©ç”¨æˆ·æ¸…æ¥šåœ°äº†è§£æœ‰å“ªäº›æ¨¡å‹å¯ç”¨ï¼Ÿåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•è¿½è¸ªæ¨¡å‹çš„å®šä»·å’Œæˆæœ¬ï¼Ÿæ€æ ·å®‰å…¨åœ°å­˜å‚¨å’Œç®¡ç†å„ä¸ªæœåŠ¡å•†çš„ API å‡­æ®ï¼Ÿè¿™äº›éƒ½æ˜¯æ¨¡å‹ç®¡ç†éœ€è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<p>è¿™ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥å­¦ä¹  LiteLLM çš„æ¨¡å‹ç®¡ç†åŠŸèƒ½ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™äº›å®é™…é—®é¢˜çš„ã€‚</p>
<h2 data-id="heading-0">åŸºç¡€é…ç½®</h2>
<p>åœ¨å‰é¢çš„å¿«é€Ÿå…¥é—¨ç¯‡ï¼Œæˆ‘ä»¬å·²ç»æ¥è§¦è¿‡ç®€å•çš„æ¨¡å‹é…ç½®ï¼Œå¯ä»¥é€šè¿‡ <code>config.yaml</code> æ–‡ä»¶å®šä¹‰æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">model_list:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">model_name:</span> <span class="hljs-string">gpt-4o</span>
    <span class="hljs-attr">litellm_params:</span>
      <span class="hljs-attr">model:</span> <span class="hljs-string">openai/gpt-4o</span>
      <span class="hljs-attr">api_key:</span> <span class="hljs-string">os.environ/OPENAI_API_KEY</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">model_name:</span> <span class="hljs-string">claude</span>
    <span class="hljs-attr">litellm_params:</span>
      <span class="hljs-attr">model:</span> <span class="hljs-string">anthropic/claude-sonnet-4-20250514</span>
      <span class="hljs-attr">api_key:</span> <span class="hljs-string">os.environ/ANTHROPIC_API_KEY</span>
</code></pre>
<p>è¿™é‡Œçš„é…ç½®å¾ˆç›´è§‚ï¼š</p>
<ul>
<li><code>model_name</code> æ˜¯ç”¨æˆ·åœ¨è°ƒç”¨ API æ—¶ä½¿ç”¨çš„åç§°</li>
<li><code>litellm_params</code> åŒ…å«äº† LiteLLM åœ¨è°ƒç”¨è¯¥æ¨¡å‹æ—¶éœ€è¦çš„æ‰€æœ‰å‚æ•°ï¼ŒåŒ…æ‹¬å®é™…çš„æ¨¡å‹åç§°ã€API å¯†é’¥ã€URL åœ°å€ç­‰
<ul>
<li><code>model</code>ï¼šéµå¾ª <code>provider/model_id</code> çš„æ ¼å¼ï¼ŒLiteLLM é€šè¿‡è¿™ä¸ªæ¥è¯†åˆ«å®é™…çš„æ¨¡å‹å’ŒæœåŠ¡å•†</li>
<li><code>api_key</code>ï¼šæ”¯æŒ <code>os.environ/KEY_NAME</code> çš„æ ¼å¼æ¥ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–ï¼Œé¿å…å°†å¯†é’¥ç¡¬ç¼–ç åœ¨é…ç½®æ–‡ä»¶ä¸­</li>
</ul>
</li>
</ul>
<p>ä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦æ›´å¤šçš„ä¿¡æ¯ã€‚æ¯”å¦‚ï¼ŒæŸä¸ªæ¨¡å‹çš„æœ€å¤§ Token æ•°æ˜¯å¤šå°‘ï¼Ÿè°ƒç”¨è¿™ä¸ªæ¨¡å‹çš„æˆæœ¬æ˜¯å¤šå°‘ï¼Ÿè¿™ä¸ªæ¨¡å‹æœ‰ä»€ä¹ˆç‰¹æ®Šçš„åŠŸèƒ½é™åˆ¶å—ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ° <code>model_info</code> å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>/model/info</code> æ¥å£äº†è§£æ¯ä¸ªæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl -X GET http://127.0.0.1:4000/model/info \
  -H <span class="hljs-string">'Authorization: Bearer sk-1234'</span> \
  -H <span class="hljs-string">'Content-Type: application/json'</span>
</code></pre>
<p>è¿”å›ç»“æœç±»ä¼¼ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/439d5c39c90244038ad6580f88ddf061~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel5Lmg5LiA5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119197&amp;x-signature=OG1qxJaynoIXRAIObvIbAtmTg3Q%3D" alt="model-info.png" loading="lazy"/></p>
<p>å¯¹äºä¸€äº›æ¯”è¾ƒå¸¸è§çš„æ¨¡å‹ï¼ŒLiteLLM ä¼šå®šæœŸç»´æŠ¤åŸºæœ¬ä¿¡æ¯ï¼Œä¸è¿‡ç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼Œè¿™æ ·ä¼šè¦†ç›–é»˜è®¤å€¼ï¼Œç”¨æˆ·è¿˜å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„å­—æ®µï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">model_list:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">model_name:</span> <span class="hljs-string">gpt-4o</span>
    <span class="hljs-attr">litellm_params:</span>
      <span class="hljs-attr">model:</span> <span class="hljs-string">openai/gpt-4o</span>
      <span class="hljs-attr">api_key:</span> <span class="hljs-string">os.environ/OPENAI_API_KEY</span>
    <span class="hljs-attr">model_info:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">"è¿™é‡Œæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µ"</span>
      <span class="hljs-attr">max_tokens:</span> <span class="hljs-number">4096</span>
      <span class="hljs-attr">supports_vision:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">supports_function_calling:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>è¿™ä¸ª <code>/model/info</code> æ¥å£éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥ç”¨æ¥åœ¨åº”ç”¨çš„ UI ä¸­å±•ç¤ºå¯ç”¨çš„æ¨¡å‹åˆ—è¡¨å’Œè¯¦ç»†ä¿¡æ¯ï¼Œå¸®åŠ©ç”¨æˆ·é€‰æ‹©æœ€åˆé€‚çš„æ¨¡å‹ï¼Œè¿›è¡Œæˆæœ¬ä¼°ç®—å’Œé¢„ç®—è§„åˆ’ã€‚</p>
<h2 data-id="heading-1">åŠ¨æ€ç®¡ç†</h2>
<p>é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†æ¨¡å‹å›ºç„¶ç®€å•ï¼Œä½†æ˜¯æ¯æ¬¡ä¿®æ”¹éƒ½éœ€è¦é‡å¯ Proxy Serverï¼Œè¿™åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ˜¯ä¸å¯æ¥å—çš„ã€‚LiteLLM æ”¯æŒå°†æ¨¡å‹ä¿¡æ¯ä¿å­˜åˆ° Postgres æ•°æ®åº“ä¸­ï¼Œä»è€Œå®ç°åŠ¨æ€ç®¡ç†åŠŸèƒ½ã€‚é¦–å…ˆä¿®æ”¹ <code>config.yaml</code> æ–‡ä»¶ï¼ŒåŠ ä¸Šæ•°æ®åº“é…ç½®å¹¶å¼€å¯æ¨¡å‹ä¿å­˜åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">general_settings:</span>
  <span class="hljs-attr">master_key:</span> <span class="hljs-string">sk-1234</span> <span class="hljs-comment"># ç®¡ç†å‘˜å¯†é’¥</span>
  <span class="hljs-attr">database_url:</span> <span class="hljs-string">"postgresql://postgres:password@127.0.0.1:5432/litellm"</span>
  <span class="hljs-attr">store_model_in_db:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># æ˜¯å¦å°†æ¨¡å‹ä¿å­˜åˆ°æ•°æ®åº“</span>
</code></pre>
<p>ç„¶åé‡å¯ Proxy Serverï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ API æ¥å£çš„æ–¹å¼åŠ¨æ€ç®¡ç†æ¨¡å‹äº†ï¼Œå…·ä½“åˆå¯ä»¥åˆ†ä¸º <strong>é€šè¿‡ API ç®¡ç†</strong>ã€<strong>é€šè¿‡å‘½ä»¤è¡Œç®¡ç†</strong>ã€<strong>é€šè¿‡ Web UI ç®¡ç†</strong> å‡ ç§æ–¹å¼ã€‚</p>
<h3 data-id="heading-2">é€šè¿‡ API ç®¡ç†</h3>
<p>é€šè¿‡ <code>/model/new</code> æ¥å£æ·»åŠ æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl -X POST <span class="hljs-string">"http://127.0.0.1:4000/model/new"</span> \
  -H <span class="hljs-string">'Authorization: Bearer sk-1234'</span> \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "model_name": "deepseek",
    "litellm_params": {
      "model": "deepseek/deepseek-chat",
      "api_key": "sk-xxx"
    }
  }'</span>
</code></pre>
<h3 data-id="heading-3">é€šè¿‡å‘½ä»¤è¡Œç®¡ç†</h3>
<p>LiteLLM è¿˜æä¾›äº†ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.litellm.ai%2Fdocs%2Fproxy%2Fmanagement_cli" target="_blank" title="https://docs.litellm.ai/docs/proxy/management_cli" ref="nofollow noopener noreferrer">å‘½ä»¤è¡Œå·¥å…· <code>litellm-proxy</code></a>ï¼Œæ–¹ä¾¿ä»å‘½ä»¤è¡Œç®¡ç†æ¨¡å‹ï¼Œè¿™ä¸ªå·¥å…·åœ¨å®‰è£… Proxy Server æ—¶ä¼šä¸€èµ·å®‰è£…å¥½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ pip install <span class="hljs-string">'litellm[proxy]'</span>
</code></pre>
<p>é¦–å…ˆé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®è®¤è¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> LITELLM_PROXY_URL=http://localhost:4000
<span class="hljs-built_in">export</span> LITELLM_PROXY_API_KEY=sk-1234
</code></pre>
<blockquote>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>litellm-proxy login</code> ç™»å½•ï¼Œè¿™ä¼šæ‰“å¼€æµè§ˆå™¨è¿›è¡Œèº«ä»½è®¤è¯ï¼Œè®¤è¯åçš„å‡­æ®ä¼šä¿å­˜åœ¨æœ¬åœ°ã€‚</p>
</blockquote>
<p><strong>åˆ—å‡ºæ‰€æœ‰æ¨¡å‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ litellm-proxy models list
</code></pre>
<p><strong>æ·»åŠ æ–°æ¨¡å‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ litellm-proxy models add deepseek \
  --param model=deepseek/deepseek-chat \
  --param api_key=sk-xxxx
</code></pre>
<p><strong>åˆ é™¤æ¨¡å‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ litellm-proxy models delete &lt;model-id&gt;
</code></pre>
<h3 data-id="heading-4">é€šè¿‡ Web UI ç®¡ç†</h3>
<p>å¦‚æœä½ ä¸ä¹ æƒ¯ä½¿ç”¨å‘½ä»¤è¡Œï¼ŒLiteLLM Proxy çš„ Web UI ä¹Ÿæä¾›äº†å¯è§†åŒ–çš„æ¨¡å‹ç®¡ç†ç•Œé¢ï¼Œç™»å½•åˆ°ç®¡ç†åå°åï¼Œç‚¹å‡» â€œModels + Endpointsâ€ èœå•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ee5e286d3b746b48f95d9de8cf5e49f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel5Lmg5LiA5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119197&amp;x-signature=OAuj1P1Xyvb5gGF8Ttp6EdFOjbI%3D" alt="web-ui-model-management.png" loading="lazy"/></p>
<p>è¿™é‡Œåˆ—å‡ºäº†å½“å‰ç³»ç»Ÿçš„æ‰€æœ‰æ¨¡å‹ï¼ŒåŒ…æ‹¬é…ç½®æ–‡ä»¶ä¸­çš„å’Œæ•°æ®åº“ä¸­çš„ã€‚ç‚¹å‡» â€œAdd Modelâ€ æ ‡ç­¾æ·»åŠ æ–°æ¨¡å‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cae9e2825488414d902072e41b22e8d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel5Lmg5LiA5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119197&amp;x-signature=u4tviFWAPoLrcrs9eYEp0Fjvc%2Fk%3D" alt="web-ui-add-model.png" loading="lazy"/></p>
<p>å¡«å†™ Providerã€Model Namesã€Model Mappingsã€API Key ç­‰å‚æ•°ï¼Œç‚¹å‡»ç¡®è®¤å³å¯ã€‚</p>
<p>æ³¨æ„ï¼ŒModel Mappings ä¸­çš„ Public Model Name å°±å¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„ <code>model_name</code> å‚æ•°ï¼ŒLiteLLM Model Name å¯¹åº” <code>litellm_params.model</code> å‚æ•°ã€‚</p>
<p>å¦‚æœæœ‰ä¸€äº›é¢å¤–å‚æ•°ï¼Œå¯ä»¥å±•å¼€ â€œAdvanced Settingsâ€ è¿›è¡Œé…ç½®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6d2283d1c1f446496bc355e035725d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel5Lmg5LiA5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119197&amp;x-signature=tkBj4umD07h9XySw0s46TtmQc8E%3D" alt="web-ui-add-model-adv.png" loading="lazy"/></p>
<h2 data-id="heading-5">æ¨¡å‹å‘ç°</h2>
<p>æ‰‹åŠ¨ç»´æŠ¤æ¨¡å‹åˆ—è¡¨å¯èƒ½ä¼šå¾ˆç¹çï¼Œç‰¹åˆ«æ˜¯å¯¹äºé‚£äº›æœ‰å¤§é‡æ¨¡å‹çš„æœåŠ¡å•†ï¼Œæ¯”å¦‚ OpenAIã€Anthropic ç­‰ï¼Œæ¯æ¬¡ä»–ä»¬å‘å¸ƒæ–°æ¨¡å‹æ—¶æˆ‘ä»¬éƒ½è¦æ‰‹åŠ¨æ›´æ–°é…ç½®ã€‚ä¸ºæ­¤ï¼ŒLiteLLM æ¨å‡ºäº† <strong>æ¨¡å‹å‘ç°ï¼ˆModel Discoveryï¼‰</strong> åŠŸèƒ½ï¼Œé€šè¿‡ <strong>Wildcard æ¨¡å‹</strong> LiteLLM å¯ä»¥è‡ªåŠ¨ä»æœåŠ¡å•†å¤„è·å–æœ€æ–°çš„æ¨¡å‹åˆ—è¡¨ï¼Œæ— éœ€æ‰‹åŠ¨æ›´æ–°ã€‚</p>
<p>å…¶é…ç½®éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ <code>config.yaml</code> ä¸­ä½¿ç”¨ <code>/*</code> åç¼€æ¥è¡¨ç¤º Wildcard æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">model_list:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">model_name:</span> <span class="hljs-string">anthropic/*</span>
    <span class="hljs-attr">litellm_params:</span>
      <span class="hljs-attr">model:</span> <span class="hljs-string">anthropic/*</span>
      <span class="hljs-attr">api_key:</span> <span class="hljs-string">os.environ/ANTHROPIC_API_KEY</span>

<span class="hljs-attr">litellm_settings:</span>
  <span class="hljs-attr">check_provider_endpoint:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¯ç”¨æ¨¡å‹å‘ç°åŠŸèƒ½</span>
</code></pre>
<p>æ³¨æ„ <code>litellm_settings.check_provider_endpoint</code> å¿…é¡»è®¾ä¸º <code>true</code>ï¼Œè¡¨ç¤ºå¯ç”¨æ¨¡å‹å‘ç°åŠŸèƒ½ã€‚</p>
<p>é…ç½®å®Œæˆåï¼Œè°ƒç”¨ <code>/v1/models</code> æ¥å£å°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰è‡ªåŠ¨å‘ç°çš„æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl -X GET http://127.0.0.1:4000/v1/models \
  -H <span class="hljs-string">'Authorization: Bearer sk-1234'</span> \
  -H <span class="hljs-string">'Content-Type: application/json'</span>
</code></pre>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ Anthropic æœåŠ¡å•†ï¼Œå› æ­¤è¿”å›çš„ç»“æœåŒ…å«äº† Anthropic çš„æ‰€æœ‰å¯ç”¨æ¨¡å‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b47062c3e17848299b6f543146d487ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel5Lmg5LiA5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119197&amp;x-signature=O5aoW2TrVMe5kJu2Md4OXQ1nKKI%3D" alt="model-discovery.png" loading="lazy"/></p>
<p>ç›®å‰ LiteLLM çš„æ¨¡å‹å‘ç°åŠŸèƒ½æ”¯æŒä»¥ä¸‹æœåŠ¡å•†ï¼š</p>
<ul>
<li>Fireworks AI</li>
<li>OpenAI</li>
<li>Gemini</li>
<li>LiteLLM Proxyï¼ˆæ˜¯çš„ï¼Œå¯ä»¥çº§è”ï¼ï¼‰</li>
<li>Topaz</li>
<li>Anthropic</li>
<li>xAI</li>
<li>vLLM</li>
<li>Vertex AI</li>
</ul>
<h2 data-id="heading-6">ä½¿ç”¨ Model Hub å…¬å¼€æ¨¡å‹</h2>
<p>åœ¨å›¢é˜Ÿæˆ–ä¼ä¸šç¯å¢ƒä¸­ï¼Œä½ å¯èƒ½å¸Œæœ›è®©ç”¨æˆ·çŸ¥é“å“ªäº›æ¨¡å‹æ˜¯å¯ç”¨çš„ï¼ŒLiteLLM æä¾›äº†ä¸€ä¸ª <strong>Model Hub</strong> åŠŸèƒ½ï¼Œå¯ä»¥å…¬å¼€å±•ç¤ºæ¨¡å‹åˆ—è¡¨ã€‚ä½¿ç”¨ Model Hub æœ‰ä»¥ä¸‹å‡ ç‚¹ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>è‡ªæœåŠ¡æ¢ç´¢</strong>ï¼šç”¨æˆ·å¯ä»¥è‡ªå·±æµè§ˆå¯ç”¨çš„æ¨¡å‹ï¼Œæ— éœ€è¯¢é—®ç®¡ç†å‘˜</li>
<li><strong>ä¿¡æ¯é€æ˜</strong>ï¼šæ¯ä¸ªæ¨¡å‹éƒ½å±•ç¤ºè¯¦ç»†çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æè¿°ã€èƒ½åŠ›ã€å±€é™ç­‰</li>
<li><strong>é™ä½é—¨æ§›</strong>ï¼šæ–°ç”¨æˆ·å¯ä»¥å¿«é€Ÿäº†è§£ç³»ç»Ÿä¸­æœ‰ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨</li>
<li><strong>å…¬å¼€æ¼”ç¤º</strong>ï¼šå¯ä»¥ç”¨æ¥å‘å®¢æˆ·æˆ–åˆä½œä¼™ä¼´å±•ç¤ºä½ çš„æ¨¡å‹èƒ½åŠ›</li>
</ol>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Web UI ä¸­é€‰æ‹©è¦å…¬å¼€çš„æ¨¡å‹ã€‚è¿›å…¥ Model Hub é¡µé¢åï¼Œç‚¹å‡» â€œMake Publicâ€ æŒ‰é’®ï¼Œé€‰æ‹©è¦å…¬å¼€çš„æ¨¡å‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/544981869f4f4afc92f616e49e7aef67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel5Lmg5LiA5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119197&amp;x-signature=ZWFl3rzrlgA71YKf0vQhIRLcUjg%3D" alt="model-hub-make-public.png" loading="lazy"/></p>
<p>ç¡®è®¤åï¼Œè¿™äº›æ¨¡å‹å°±ä¼šå‡ºç°åœ¨å…¬å¼€çš„ Model Hub é¡µé¢ä¸Šï¼Œè®¿é—®ä¸‹é¢è¿™ä¸ª URL è¿›è¡ŒæŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">http:<span class="hljs-comment">//127.0.0.1:4000/ui/model_hub_table</span>
</code></pre>
<p>è¿™ä¸ªé¡µé¢æ˜¯å…¬å¼€çš„ï¼Œæ‰€æœ‰äººéƒ½èƒ½è®¿é—®ï¼Œå°±åƒä¸€ä¸ªåº”ç”¨å•†åº—ä¸€æ ·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/842124837d6648c5bc0b884b782d09bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel5Lmg5LiA5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119197&amp;x-signature=PX8xlCE%2FSAgu6fVUivZHvLQqvOY%3D" alt="model-hub-table.png" loading="lazy"/></p>
<p>ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹æ¯ä¸ªæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ä»¥åŠä½¿ç”¨æ–‡æ¡£ã€‚</p>
<h2 data-id="heading-7">æ¨¡å‹ä»·æ ¼åŒæ­¥</h2>
<p>åœ¨ä¸Šé¢çš„å­¦ä¹ ä¸­æˆ‘ä»¬äº†è§£åˆ°ï¼Œå¯ä»¥é€šè¿‡ <code>/model/info</code> æ¥å£æŸ¥è¯¢æ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¨¡å‹çš„ä¸Šä¸‹æ–‡é™åˆ¶ä»¥åŠè¾“å…¥è¾“å‡ºä»·æ ¼ç­‰ï¼Œè¿™äº›ä¿¡æ¯æœ‰åŠ©äºä¼ä¸šè¿›è¡Œå‡†ç¡®çš„æˆæœ¬è¿½è¸ªå’Œé¢„ç®—æ§åˆ¶ã€‚</p>
<p>LiteLLM åœ¨ GitHub ä¸Šç»´æŠ¤äº†ä¸€ä¸ªå®Œæ•´çš„æ¨¡å‹æˆæœ¬æ˜ å°„è¡¨ï¼ŒåŒ…å«äº† 100+ ä¸ªæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">https://github.com/BerriAI/litellm/blob/main/model_prices_and_context_window.json
</code></pre>
<p>éšç€æ–°æ¨¡å‹çš„å‘å¸ƒå’Œä»·æ ¼çš„å˜åŒ–ï¼Œè¿™ä¸ªæ˜ å°„è¡¨ä¼šå®šæœŸæ›´æ–°ã€‚ä¸ºäº†ä¿æŒä½ çš„ Proxy Server ä¸­çš„æˆæœ¬æ•°æ®æœ€æ–°ï¼ŒLiteLLM æä¾›äº† <strong>æ‰‹åŠ¨åŒæ­¥</strong> å’Œ <strong>è‡ªåŠ¨åŒæ­¥</strong> çš„åŠŸèƒ½ï¼Œå¯ä»¥ä» GitHub è·å–æœ€æ–°çš„ä»·æ ¼ä¿¡æ¯ï¼Œç¡®ä¿æˆæœ¬è¿½è¸ªçš„å‡†ç¡®æ€§ã€‚</p>
<p>å¦‚æœä½ æƒ³ç«‹å³åŒæ­¥æœ€æ–°çš„ä»·æ ¼ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl -X POST <span class="hljs-string">"http://127.0.0.1:4000/reload/model_cost_map"</span> \
  -H <span class="hljs-string">"Authorization: Bearer sk-1234"</span> \
  -H <span class="hljs-string">"Content-Type: application/json"</span>
</code></pre>
<p>å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œæ›´æ¨èè®¾ç½®è‡ªåŠ¨å®šæœŸåŒæ­¥ï¼Œæ¯”å¦‚æ¯ 6 å°æ—¶åŒæ­¥ä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl -X POST <span class="hljs-string">"http://127.0.0.1:4000/schedule/model_cost_map_reload?hours=6"</span> \
  -H <span class="hljs-string">"Authorization: Bearer sk-1234"</span> \
  -H <span class="hljs-string">"Content-Type: application/json"</span>
</code></pre>
<p>æŸ¥çœ‹åŒæ­¥çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl -X GET <span class="hljs-string">"http://127.0.0.1:4000/schedule/model_cost_map_reload/status"</span> \
  -H <span class="hljs-string">"Authorization: Bearer sk-1234"</span>
</code></pre>
<p>å–æ¶ˆå®šæ—¶åŒæ­¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl -X DELETE <span class="hljs-string">"http://127.0.0.1:4000/schedule/model_cost_map_reload"</span> \
  -H <span class="hljs-string">"Authorization: Bearer sk-1234"</span>
</code></pre>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒLiteLLM ä» GitHub çš„å®˜æ–¹ä»“åº“è·å–æ¨¡å‹æˆæœ¬è¡¨ã€‚å¦‚æœä½ æœ‰ä¸€äº›å®šåˆ¶æ¨¡å‹ï¼Œæƒ³ä½¿ç”¨è‡ªå®šä¹‰çš„æ¨¡å‹æˆæœ¬è¡¨ï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> LITELLM_MODEL_COST_MAP_URL=<span class="hljs-string">"https://your-server.com/your-cost-map.json"</span>
</code></pre>
<p>æˆ–è€…ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> LITELLM_LOCAL_MODEL_COST_MAP=True
</code></pre>
<p>æ­¤æ—¶ LiteLLM ä¼šè¯»å– <code>litellm</code> ç›®å½•ä¸‹çš„ <code>model_prices_and_context_window_backup.json</code> æ–‡ä»¶ï¼Œä¸ä¼šè®¿é—®ç½‘ç»œã€‚</p>
<h2 data-id="heading-8">å‡­æ®ç®¡ç†</h2>
<p>å…³äºæ¨¡å‹ç®¡ç†çš„å¦ä¸€ä¸ªè¯é¢˜æ˜¯ <strong>å‡­æ®ç®¡ç†</strong>ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒLiteLLM æ”¯æŒ 100 å¤šä¸ªä¸åŒçš„æ¨¡å‹æœåŠ¡å•†ï¼Œæ¯ä¸ªæœåŠ¡å•†éƒ½æœ‰è‡ªå·±çš„ API Key æˆ–è®¤è¯æ–¹å¼ï¼Œå¦‚ä½•å®‰å…¨çš„ç®¡ç†è¿™äº›æœåŠ¡å•†çš„å‡­æ®å‘¢ï¼Ÿ</p>
<p>åœ¨å‰é¢çš„ <code>config.yaml</code> æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬é…ç½® <code>api_key</code> æ—¶ä½¿ç”¨äº† <code>os.environ/KEY_NAME</code> æ ¼å¼ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–ï¼Œè¿™æ˜¯æœ€ç®€å•çš„ä¸€ç§å‡­æ®ç®¡ç†çš„æ–¹å¼ï¼Œé¿å…å°†å¯†é’¥ç¡¬ç¼–ç åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œè™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼éš¾ä»¥ç®¡ç†ï¼Œè€Œä¸”ä¹Ÿä¸å¤Ÿå®‰å…¨ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨ LiteLLM çš„æ•°æ®åº“ä¸­ç›´æ¥å­˜å‚¨å’Œç®¡ç†è¿™äº›å‡­è¯ã€‚</p>
<p>LiteLLM æä¾›äº†ä¸€ä¸ªä¸“é—¨çš„å‡­è¯ç®¡ç†ç•Œé¢ï¼Œè¿›å…¥ Models -&gt; LLM Credentials -&gt; Add Credentialï¼Œå¯ä»¥æ·»åŠ æ–°çš„å‡­è¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f70133b3a564b2d8562be32e6b49419~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel5Lmg5LiA5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119197&amp;x-signature=8iFVZnATpQgJmQX1NeUd03ooneY%3D" alt="web-ui-add-credentials.png" loading="lazy"/></p>
<p>é€‰æ‹©ä½ çš„ LLM æœåŠ¡å•†åï¼Œè¾“å…¥ API Key å’Œå…¶ä»–å¿…è¦ä¿¡æ¯ï¼ˆæ ¹æ®ä¸åŒçš„æœåŠ¡å•†ï¼Œç•Œé¢ä¼šæ˜¾ç¤ºç›¸åº”çš„å­—æ®µï¼‰ï¼Œç‚¹å‡»ç¡®è®¤å³å¯ã€‚æ·»åŠ å‡­è¯åï¼Œåœ¨åˆ›å»ºæ–°æ¨¡å‹æ—¶å°±å¯ä»¥ä»ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©å·²æœ‰çš„å‡­è¯ï¼Œé¿å…é‡å¤è¾“å…¥æ•æ„Ÿä¿¡æ¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5654aa312adf41c5a1d10a62536a5b14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pel5Lmg5LiA5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119197&amp;x-signature=Xd%2FIZjE9ki4cLgCsjV8366Ys7nc%3D" alt="web-ui-add-model-use-credentials.png" loading="lazy"/></p>
<p>å‡­è¯åœ¨æ•°æ®åº“ä¸­æ˜¯åŠ å¯†å­˜å‚¨çš„ã€‚LiteLLM ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¿›è¡ŒåŠ å¯†ï¼š</p>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨ <code>LITELLM_SALT_KEY</code> è¿›è¡ŒåŠ å¯†</li>
<li>å¦‚æœæœªè®¾ç½® <code>LITELLM_SALT_KEY</code>ï¼Œåˆ™ä½¿ç”¨ <code>LITELLM_MASTER_KEY</code> è¿›è¡ŒåŠ å¯†</li>
</ul>
<p>è¿™ä¸¤ä¸ªå¯†é’¥éƒ½åº”è¯¥è¢«å¦¥å–„ä¿ç®¡ï¼Œä¸è¦æ³„éœ²ã€‚</p>
<h3 data-id="heading-9">ä¼ä¸šçº§å‡­æ®ç®¡ç†</h3>
<p>å¯¹äºä¼ä¸šçº§åº”ç”¨ï¼Œå¯¹äºå‡­æ®ç®¡ç†å¯èƒ½æœ‰ç€æ›´é«˜çš„å®‰å…¨è¦æ±‚ï¼ŒLiteLLM æ”¯æŒä¸ä¸»æµçš„ <strong>å¯†é’¥ç®¡ç†æœåŠ¡ï¼ˆSecrets Managerï¼‰</strong> é›†æˆï¼Œå…è®¸ä½ å°†å‡­æ®å­˜å‚¨åœ¨ä¼ä¸šçº§çš„å¯†é’¥ç®¡ç†æœåŠ¡ä¸­ï¼Œè€Œä¸æ˜¯ LiteLLM çš„æ•°æ®åº“ä¸­ã€‚æ”¯æŒçš„ Secrets Manager åŒ…æ‹¬ï¼š</p>
<ul>
<li>AWS Secrets Manager</li>
<li>AWS Key Management Service</li>
<li>Azure Key Vault</li>
<li>Google Secret Manager</li>
<li>Google Key Management Service</li>
<li>HashiCorp Vault</li>
</ul>
<p>é™¤äº†ä¼ ç»Ÿçš„ API Keyï¼ŒLiteLLM è¿˜æ”¯æŒ <strong>OpenID Connect (OIDC)</strong> èº«ä»½è®¤è¯ï¼Œè¿™æ˜¯ä¸€ç§æ›´ç°ä»£ã€æ›´å®‰å…¨çš„è®¤è¯æ–¹å¼ã€‚æ”¯æŒçš„ OIDC æä¾›å•†åŒ…æ‹¬ï¼š</p>
<ul>
<li>Google Cloud Run</li>
<li>GitHub Actions</li>
<li>Azure AD</li>
<li>CircleCI</li>
<li>Azure Kubernetes Service ç­‰</li>
</ul>
<p>è¿™ä¸¤ä¸ªåŠŸèƒ½ç‰¹åˆ«é€‚åˆå¤§å‹ä¼ä¸šç¯å¢ƒï¼Œå¯ä»¥æ˜¾è‘—æé«˜å®‰å…¨æ€§å’Œåˆè§„æ€§ã€‚è¯¦ç»†çš„ä¼ä¸šç‰¹æ€§é…ç½®ï¼Œè¯·å‚è€ƒ LiteLLM å®˜æ–¹æ–‡æ¡£ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.litellm.ai%2Fdocs%2Fsecret" target="_blank" title="https://docs.litellm.ai/docs/secret" ref="nofollow noopener noreferrer">docs.litellm.ai/docs/secret</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.litellm.ai%2Fdocs%2Foidc" target="_blank" title="https://docs.litellm.ai/docs/oidc" ref="nofollow noopener noreferrer">docs.litellm.ai/docs/oidc</a></li>
</ul>
<h2 data-id="heading-10">å°ç»“</h2>
<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬è¯¦ç»†å­¦ä¹ äº† LiteLLM Proxy çš„æ¨¡å‹ç®¡ç†åŠŸèƒ½ã€‚ä¸»è¦å†…å®¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>åŸºç¡€é…ç½®</strong>ï¼šå¯¹äºç›¸å¯¹ç¨³å®šçš„æ¨¡å‹é…ç½®ï¼Œåº”è¯¥åœ¨ <code>config.yaml</code> ä¸­å®šä¹‰ï¼Œè¿™æ ·å¯ä»¥ç‰ˆæœ¬æ§åˆ¶ï¼Œä¾¿äºå›æ»šï¼›å……åˆ†åˆ©ç”¨ <code>model_info</code> å­—æ®µæ¥æ·»åŠ æ¨¡å‹æè¿°ã€èƒ½åŠ›è¯´æ˜ã€ä½¿ç”¨å»ºè®®ç­‰ï¼Œè¿™ä¼šè®©ç”¨æˆ·æ›´å®¹æ˜“é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼›</li>
<li><strong>åŠ¨æ€ç®¡ç†</strong>ï¼šé€šè¿‡ <code>/model/new</code> æ¥å£åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ æ¨¡å‹ï¼Œæ”¯æŒ APIã€å‘½ä»¤è¡Œã€Web UI ä¸‰ç§æ–¹å¼å¯¹æ¨¡å‹è¿›è¡Œç®¡ç†ï¼Œæ— éœ€é‡å¯æœåŠ¡ï¼›</li>
<li><strong>æ¨¡å‹å‘ç°</strong>ï¼šé€šè¿‡é€šé…ç¬¦è‡ªåŠ¨è·å–æ•´ä¸ªæœåŠ¡å•†çš„æ¨¡å‹åˆ—è¡¨ï¼›</li>
<li><strong>Model Hub</strong>ï¼šå…¬å¼€å±•ç¤ºå¯ç”¨çš„æ¨¡å‹ä¿¡æ¯ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›</li>
<li><strong>æ¨¡å‹ä»·æ ¼åŒæ­¥</strong>ï¼šæ‰‹åŠ¨æˆ–è‡ªåŠ¨ä» GitHub åŒæ­¥æœ€æ–°çš„æ¨¡å‹æˆæœ¬æ•°æ®ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨¡å‹æˆæœ¬è¡¨ï¼›</li>
<li><strong>å‡­æ®ç®¡ç†</strong>ï¼šé›†ä¸­ç®¡ç† API Key å’Œå‡­æ®ä¿¡æ¯ï¼Œé™ä½å‡­æ®æ³„éœ²çš„é£é™©ï¼›å¯¹äºé«˜å®‰å…¨è¦æ±‚åœºæ™¯ï¼Œè€ƒè™‘ä½¿ç”¨ä¼ä¸šç‰¹æ€§ï¼ˆSecret Manager æˆ– OIDCï¼‰ï¼Œå®ç°é›¶å¯†é’¥å­˜å‚¨æˆ–ä¸´æ—¶å‡­æ®ï¼›</li>
</ul>
<p>LiteLLM çš„æ¨¡å‹ç®¡ç†ç³»ç»Ÿè®¾è®¡å¾—ç›¸å½“å®Œå–„ï¼Œæ—¢æ”¯æŒåˆæœŸçš„ç®€å•é…ç½®ï¼Œä¹Ÿæ”¯æŒåæœŸçš„å¤æ‚è¿ç»´åœºæ™¯ã€‚ä» <code>config.yaml</code> çš„å£°æ˜å¼é…ç½®ï¼Œåˆ°è¿è¡Œæ—¶çš„åŠ¨æ€ç®¡ç†ï¼Œå†åˆ°ä¼ä¸šçº§çš„é«˜å®‰å…¨å‡­æ®å­˜å‚¨ï¼ŒLiteLLM ä¸ºä¸åŒè§„æ¨¡çš„åº”ç”¨æä¾›äº†çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-11">æ¬¢è¿å…³æ³¨</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„åŒåå…¬ä¼—å·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fi-study-everyday.online%2Fabout-me.html" target="_blank" title="https://i-study-everyday.online/about-me.html" ref="nofollow noopener noreferrer">æ—¥ä¹ ä¸€æŠ€ï¼Œæ¯å¤©å­¦ä¸€ç‚¹æ–°æŠ€æœ¯</a>ã€‚</p>
<p>æˆ‘ä¼šæ¯å¤©èŠ±ä¸€ä¸ªå°æ—¶ï¼Œè®°å½•ä¸‹æˆ‘å­¦ä¹ çš„ç‚¹ç‚¹æ»´æ»´ã€‚å†…å®¹åŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>æŸä¸ªäº§å“çš„ä½¿ç”¨å°çªé—¨</li>
<li>å¼€æºé¡¹ç›®çš„å®è·µå’Œå¿ƒå¾—</li>
<li>æŠ€æœ¯ç‚¹çš„ç®€å•è§£è¯»</li>
</ul>
<p>ç›®æ ‡æ˜¯è®©å¤§å®¶ç”¨5åˆ†é’Ÿè¯»å®Œå°±èƒ½æœ‰æ‰€æ”¶è·ï¼Œä¸éœ€è¦å¤ªè´¹åŠ²ï¼Œä½†å´å¯ä»¥è½»æ¾è·å–ä¸€äº›å¹²è´§ã€‚ä¸ç®¡ä½ æ˜¯æŠ€æœ¯æ–°æ‰‹è¿˜æ˜¯è€é¸Ÿï¼Œæ¬¢è¿ç»™æˆ‘æå»ºè®®ï¼Œå¦‚æœæœ‰æƒ³å­¦ä¹ çš„æŠ€æœ¯ï¼Œä¹Ÿæ¬¢è¿äº¤æµï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactçš„useRefçš„æ·±åº¦è§£æä¸åº”ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7573912365910884394</link>    <guid>https://juejin.cn/post/7573912365910884394</guid>    <pubDate>2025-11-19T00:16:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573912365910884394" data-draft-id="7554332546579529766" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactçš„useRefçš„æ·±åº¦è§£æä¸åº”ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2025-11-19T00:16:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactçš„useRefçš„æ·±åº¦è§£æä¸åº”ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T00:16:00.000Z" title="Wed Nov 19 2025 00:16:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">1. å‰è¨€</h2>
<p>åœ¨Reactçš„å‡½æ•°å¼ç»„ä»¶å¼€å‘ä¸­ï¼Œ<code>useRef</code>æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„é’©å­ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†åœ¨ç»„ä»¶æ¸²æŸ“å‘¨æœŸä¹‹é—´æŒä¹…åŒ–å­˜å‚¨å€¼çš„èƒ½åŠ›ï¼ŒåŒæ—¶ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨<code>useRef</code>çš„å·¥ä½œåŸç†ã€å¸¸è§åº”ç”¨åœºæ™¯ä»¥åŠä½¿ç”¨æ—¶çš„æ³¨æ„äº‹é¡¹ã€‚</p>
<h2 data-id="heading-1">2. åŸºæœ¬æ¦‚å¿µä¸å·¥ä½œåŸç†</h2>
<p><code>useRef</code>æ˜¯Reactæä¾›çš„ä¸€ä¸ªé’©å­å‡½æ•°ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªå¯å˜çš„refå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ï¼Œæ— è®ºç»„ä»¶æ¸²æŸ“å¤šå°‘æ¬¡ï¼Œrefå¯¹è±¡å§‹ç»ˆæŒ‡å‘åŒä¸€ä¸ªå€¼ã€‚å…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> refContainer = <span class="hljs-title function_">useRef</span>(initialValue);
</code></pre>
<p><code>useRef</code>è¿”å›çš„refå¯¹è±¡æœ‰ä¸€ä¸ªç‰¹æ®Šçš„<code>current</code>å±æ€§ï¼Œç”¨äºå­˜å‚¨å’Œè®¿é—®å€¼ã€‚åˆå§‹æ—¶ï¼Œ<code>current</code>å±æ€§è¢«è®¾ç½®ä¸ºä¼ å…¥çš„<code>initialValue</code>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¿®æ”¹<code>current</code>å±æ€§ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™æ˜¯<code>useRef</code>ä¸çŠ¶æ€ç®¡ç†ï¼ˆå¦‚<code>useState</code>ï¼‰çš„é‡è¦åŒºåˆ«ã€‚</p>
<h2 data-id="heading-2">3. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h2>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<h3 data-id="heading-3">3.1. è®¿é—®DOMå…ƒç´ </h3>
<p><code>useRef</code>æœ€å¸¸è§çš„ç”¨é€”ä¹‹ä¸€æ˜¯è·å–DOMå…ƒç´ çš„å¼•ç”¨ï¼Œä»è€Œå¯ä»¥ç›´æ¥æ“ä½œDOMã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">TextInputWithFocusButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> inputEl = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onButtonClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// `current` æŒ‡å‘å·²æŒ‚è½½åˆ°DOMä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´ </span>
    inputEl.<span class="hljs-property">current</span>.<span class="hljs-title function_">focus</span>();
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{inputEl}</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onButtonClick}</span>&gt;</span>èšç„¦è¾“å…¥æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>useRef</code>åˆ›å»ºäº†ä¸€ä¸ªrefå¯¹è±¡<code>inputEl</code>ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°inputå…ƒç´ çš„<code>ref</code>å±æ€§ä¸Šã€‚å½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>inputEl.current</code>è®¿é—®åˆ°å®é™…çš„DOMå…ƒç´ ï¼Œç„¶åè°ƒç”¨å…¶<code>focus()</code>æ–¹æ³•ã€‚</p>
<h3 data-id="heading-4">3.2. å­˜å‚¨ç»„ä»¶é—´æŒä¹…åŒ–æ•°æ®</h3>
<p><code>useRef</code>è¿˜å¯ä»¥ç”¨äºåœ¨ç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å­˜å‚¨æ•°æ®ï¼Œè€Œä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚è¿™å¯¹äºéœ€è¦åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒæŸäº›å€¼çš„åœºæ™¯éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useRef, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Timer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> intervalRef = <span class="hljs-title function_">useRef</span>();
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    intervalRef.<span class="hljs-property">current</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prevCount</span> =&gt;</span> prevCount + <span class="hljs-number">1</span>);
    }, <span class="hljs-number">1000</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-built_in">clearInterval</span>(intervalRef.<span class="hljs-property">current</span>);
    };
  }, []);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è®¡æ—¶: {count} ç§’<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>åœ¨è¿™ä¸ªè®¡æ—¶å™¨ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>useRef</code>å­˜å‚¨äº†setIntervalè¿”å›çš„è®¡æ—¶å™¨IDã€‚è¿™æ ·åœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>intervalRef.current</code>è®¿é—®åˆ°è¿™ä¸ªIDï¼Œå¹¶æ¸…é™¤è®¡æ—¶å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<h3 data-id="heading-5">3.3. é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</h3>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨ç»„ä»¶å†…éƒ¨å­˜å‚¨ä¸€äº›å€¼ï¼Œä½†åˆä¸å¸Œæœ›è¿™äº›å€¼çš„å˜åŒ–è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚è¿™æ—¶ï¼Œ<code>useRef</code>æ˜¯ä¸€ä¸ªç†æƒ³çš„é€‰æ‹©ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useRef, useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DataFetcher</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> isMounted = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">true</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
      <span class="hljs-comment">// åªæœ‰å½“ç»„ä»¶ä»ç„¶æŒ‚è½½æ—¶æ‰æ›´æ–°çŠ¶æ€</span>
      <span class="hljs-keyword">if</span> (isMounted.<span class="hljs-property">current</span>) {
        <span class="hljs-title function_">setData</span>(result);
        <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
      }
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶æ›´æ–°æ ‡è®°</span>
      isMounted.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
    };
  }, []);

  <span class="hljs-keyword">return</span> loading ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>åœ¨è¿™ä¸ªæ•°æ®è·å–ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>useRef</code>åˆ›å»ºäº†ä¸€ä¸ª<code>isMounted</code>æ ‡è®°ï¼Œç”¨äºè·Ÿè¸ªç»„ä»¶æ˜¯å¦ä»ç„¶æŒ‚è½½ã€‚åœ¨å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œæˆ‘ä»¬é¦–å…ˆæ£€æŸ¥è¿™ä¸ªæ ‡è®°ï¼Œåªæœ‰åœ¨ç»„ä»¶ä»ç„¶æŒ‚è½½çš„æƒ…å†µä¸‹æ‰æ›´æ–°çŠ¶æ€ï¼Œä»è€Œé¿å…åœ¨ç»„ä»¶å¸è½½åæ›´æ–°çŠ¶æ€å¯¼è‡´çš„è­¦å‘Šã€‚</p>
<h2 data-id="heading-6">4. useRefä¸useStateçš„å¯¹æ¯”</h2>
<p>è™½ç„¶<code>useRef</code>å’Œ<code>useState</code>éƒ½å¯ä»¥ç”¨äºå­˜å‚¨æ•°æ®ï¼Œä½†å®ƒä»¬æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼š</p>
<ul>
<li><strong>è§¦å‘æ¸²æŸ“</strong>ï¼šä¿®æ”¹<code>useState</code>å­˜å‚¨çš„å€¼ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè€Œä¿®æ”¹<code>useRef</code>çš„<code>current</code>å±æ€§ä¸ä¼šã€‚</li>
<li><strong>æ•°æ®æŒä¹…æ€§</strong>ï¼š<code>useState</code>çš„å€¼åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½æ˜¯å›ºå®šçš„ï¼Œè€Œ<code>useRef</code>çš„<code>current</code>å±æ€§å¯ä»¥éšæ—¶ä¿®æ”¹ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<code>useState</code>é€‚ç”¨äºéœ€è¦æ ¹æ®æ•°æ®å˜åŒ–æ›´æ–°UIçš„åœºæ™¯ï¼Œè€Œ<code>useRef</code>é€‚ç”¨äºå­˜å‚¨ä¸å½±å“UIçš„æ•°æ®æˆ–è®¿é—®DOMå…ƒç´ ã€‚</li>
</ul>
<h2 data-id="heading-7">5. ä½¿ç”¨useRefçš„æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>é¿å…åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ä¿®æ”¹currentå±æ€§</strong>ï¼šä¿®æ”¹<code>useRef</code>çš„<code>current</code>å±æ€§ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ï¼Œä½†å¦‚æœåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ä¿®æ”¹å®ƒï¼Œå¯èƒ½ä¼šå¯¼è‡´éš¾ä»¥è°ƒè¯•çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>æ³¨æ„å†…å­˜æ³„æ¼</strong>ï¼šå½“ä½¿ç”¨<code>useRef</code>å­˜å‚¨DOMå…ƒç´ æˆ–å…¶ä»–èµ„æºæ—¶ï¼Œè¦ç¡®ä¿åœ¨ç»„ä»¶å¸è½½æ—¶æ­£ç¡®æ¸…ç†è¿™äº›èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
</li>
<li>
<p><strong>ä¸è¦æ»¥ç”¨useRef</strong>ï¼šè™½ç„¶<code>useRef</code>å¾ˆå¼ºå¤§ï¼Œä½†åº”è¯¥è°¨æ…ä½¿ç”¨ã€‚è¿‡åº¦ä½¿ç”¨<code>useRef</code>å¯èƒ½ä¼šå¯¼è‡´ä»£ç å˜å¾—éš¾ä»¥ç†è§£å’Œç»´æŠ¤ï¼Œåº”è¯¥ä¼˜å…ˆä½¿ç”¨çŠ¶æ€ç®¡ç†å’Œæ•°æ®æµæ¨¡å¼ã€‚</p>
</li>
</ol>
<h2 data-id="heading-8">6. æ€»ç»“</h2>
<p><code>useRef</code>æ˜¯Reactä¸­ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„é’©å­ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†åœ¨ç»„ä»¶æ¸²æŸ“å‘¨æœŸä¹‹é—´æŒä¹…åŒ–å­˜å‚¨å€¼çš„èƒ½åŠ›ï¼ŒåŒæ—¶ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚é€šè¿‡åˆç†ä½¿ç”¨<code>useRef</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿åœ°è®¿é—®DOMå…ƒç´ ã€å­˜å‚¨ç»„ä»¶é—´æŒä¹…åŒ–æ•°æ®ä»¥åŠä¼˜åŒ–æ€§èƒ½ã€‚ä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ³¨æ„é¿å…å¸¸è§çš„é™·é˜±ï¼Œç¡®ä¿ä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7568192652286754870" target="_blank" title="https://juejin.cn/post/7568192652286754870">çº¯å‰ç«¯æå–å›¾ç‰‡é¢œè‰²æ’ä»¶Color-Thiefæ•™å­¦+å®æˆ˜å®Œæ•´æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7565737512816771135" target="_blank" title="https://juejin.cn/post/7565737512816771135">react-konvaå®æˆ˜æŒ‡å—ï¼šCanvasé«˜æ€§èƒ½+æ˜“ç»´æŠ¤çš„ç»„ä»¶åŒ–å›¾å½¢å¼€å‘å®ç°æ•™ç¨‹</a></li>
<li><a href="https://juejin.cn/post/7560905838074462271" target="_blank" title="https://juejin.cn/post/7560905838074462271">Reactæ— é™æ»šåŠ¨æ’ä»¶react-infinite-scroll-componentçš„é…ç½®+ä¼˜åŒ–+é¿å‘æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7560542615484137491" target="_blank" title="https://juejin.cn/post/7560542615484137491">å‰ç«¯éŸ³é¢‘å…¼å®¹è§£å†³ï¼šéŸ³é¢‘ç¥å™¨howler.jsä»åŸºç¡€åˆ°è¿›é˜¶å®Œæ•´ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7559871680015024169" target="_blank" title="https://juejin.cn/post/7559871680015024169">ä½¿ç”¨React-OAuthè¿›è¡ŒGoogle/GitHubç™»å½•çš„æ•™ç¨‹å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7550585427834404927" target="_blank" title="https://juejin.cn/post/7550585427834404927">çº¯å‰ç«¯äººè„¸è¯†åˆ«åˆ©å™¨ï¼šface-api.jsæ‰‹æŠŠæ‰‹æ·±å…¥è§£ææ•™å­¦</a></li>
<li><a href="https://juejin.cn/post/7553865490732433462" target="_blank" title="https://juejin.cn/post/7553865490732433462">å…³äºReactçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•forwardRefçš„è¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7553484874609410074" target="_blank" title="https://juejin.cn/post/7553484874609410074">Reactè·¨ç»„ä»¶æ•°æ®å…±äº«useContextè¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7545087762837815334" target="_blank" title="https://juejin.cn/post/7545087762837815334">Webå›¾åƒç¼–è¾‘ç¥å™¨tui.image-editorä»åŸºç¡€åˆ°è¿›é˜¶çš„å®æˆ˜æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7544323659788288046" target="_blank" title="https://juejin.cn/post/7544323659788288046">å¼€å‘ä¸ªäººå¾®ä¿¡å°ç¨‹åºç±»ç›®é€‰æ‹©/ç›ˆåˆ©æ–¹å¼/æˆæœ¬æ§åˆ¶ä¸æœåŠ¡å™¨æ¥å…¥æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7541741121400864778" target="_blank" title="https://juejin.cn/post/7541741121400864778">å‰ç«¯å›¾ç‰‡è£å‰ªCropper.jsæ ¸å¿ƒåŠŸèƒ½ä¸å®æˆ˜æŠ€å·§è¯¦è§£</a></li>
<li><a href="https://juejin.cn/post/7536530451461472265" target="_blank" title="https://juejin.cn/post/7536530451461472265">ç¼–è¾‘å™¨ä¹Ÿæœ‰é‚ªä¿®ï¼Ÿç›˜ç‚¹VS Codeé‚ªé—¨/æœ‰è¶£çš„æ‰©å±•</a></li>
<li><a href="https://juejin.cn/post/7535005018257981466" target="_blank" title="https://juejin.cn/post/7535005018257981466">jsä½¿ç”¨IntersectionObserverå®ç°ç›®æ ‡å…ƒç´ å¯è§åº¦çš„äº¤äº’</a></li>
<li><a href="https://juejin.cn/post/7534547200330121225" target="_blank" title="https://juejin.cn/post/7534547200330121225">Webå‰ç«¯é¡µé¢å¼€å‘é˜¿æ‹‰ä¼¯è¯­ç§é€‚é…æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7516122409948020736" target="_blank" title="https://juejin.cn/post/7516122409948020736">è®©ç½‘é¡µæ‹¥æœ‰Appä½“éªŒï¼ŸPWA å°†ç½‘é¡µå˜ä¸ºæ¡Œé¢åº”ç”¨çš„ä¿å§†çº§æ•™ç¨‹PWA</a></li>
<li><a href="https://juejin.cn/post/6953803916484018206" target="_blank" title="https://juejin.cn/post/6953803916484018206">ä½¿ç”¨nvmç®¡ç†node.jsç‰ˆæœ¬ä»¥åŠæ›´æ¢npmæ·˜å®é•œåƒæº</a></li>
<li><a href="https://juejin.cn/post/7140443283209060383" target="_blank" title="https://juejin.cn/post/7140443283209060383">æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè§„èŒƒçš„å›¢é˜Ÿvueé¡¹ç›®ï¼ŒåŒ…å«commitlintï¼Œeslintï¼Œprettierï¼Œhuskyï¼Œcommitizenç­‰ç­‰</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤„ç†è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡ç¬”è®°]]></title>    <link>https://juejin.cn/post/7573950036896858152</link>    <guid>https://juejin.cn/post/7573950036896858152</guid>    <pubDate>2025-11-19T03:33:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573950036896858152" data-draft-id="7573904312713412643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤„ç†è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡ç¬”è®°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-19T03:33:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°å°å°å®‡"/> <meta itemprop="url" content="https://juejin.cn/user/3386151546662077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤„ç†è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3386151546662077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°å°å°å®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T03:33:53.000Z" title="Wed Nov 19 2025 03:33:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå¤„ç†è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡ï¼ˆLong Tasksï¼‰æ˜¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒéš¾ç‚¹ã€‚å¦‚æœä¸»çº¿ç¨‹è¢«å ç”¨è¶…è¿‡ 50msï¼Œç”¨æˆ·å°±ä¼šæ„Ÿè§‰åˆ°é¡µé¢å¡é¡¿ï¼ˆæ‰å¸§ï¼‰ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ·±å…¥æ¢è®¨å‡ ç§æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆï¼Œå¹¶ç¼–å†™ä¸€å¥—è¾ƒä¸ºå®Œæ•´çš„ã€æ¥è¿‘ç”Ÿäº§ç¯å¢ƒçš„<strong>ä»»åŠ¡è°ƒåº¦ä¸ä¼˜åŒ–ç³»ç»Ÿ</strong>ã€‚è¿™å°†åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p>
<ol>
<li><strong>åŸºäºç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰çš„æ—¶é—´åˆ†ç‰‡è°ƒåº¦å™¨</strong>ï¼šå°†åŒæ­¥å¤§ä»»åŠ¡æ‹†è§£ä¸ºå¼‚æ­¥å°ä»»åŠ¡ã€‚</li>
<li><strong>å¤šçº¿ç¨‹å¹¶è¡Œè®¡ç®—æ¡†æ¶ï¼ˆWeb Worker Poolï¼‰</strong>ï¼šåˆ©ç”¨å¤šæ ¸ CPU å¤„ç†çº¯è®¡ç®—ä»»åŠ¡ã€‚</li>
<li><strong>é«˜ä¼˜å…ˆçº§æŠ¢å å¼è°ƒåº¦æ¨¡æ‹Ÿï¼ˆç±»ä¼¼äº React Schedulerï¼‰</strong>ï¼šé€šè¿‡ MessageChannel å®ç°å®ä»»åŠ¡è°ƒåº¦ã€‚</li>
<li><strong>å¤§é‡æ•°æ®æ¸²æŸ“ä¼˜åŒ–ï¼ˆè™šæ‹Ÿåˆ—è¡¨æ ¸å¿ƒå®ç°ï¼‰</strong>ï¼šè§£å†³æ¸²æŸ“å±‚é¢çš„é•¿ä»»åŠ¡ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šé€šç”¨æ—¶é—´åˆ†ç‰‡è°ƒåº¦å™¨ (Time Slicing Scheduler)</h3>
<p>è¿™æ˜¯è§£å†³ä¸»çº¿ç¨‹é˜»å¡æœ€ç›´æ¥çš„æ–¹æ³•ã€‚æˆ‘ä»¬å°†åˆ©ç”¨ ES6 çš„ <code>Generator</code> å‡½æ•°ç‰¹æ€§ï¼Œé…åˆ <code>requestAnimationFrame</code> æˆ– <code>MessageChannel</code>ï¼Œå°†ä¸€ä¸ªå·¨å¤§çš„å¾ªç¯æ‹†åˆ†æˆå¤šä¸ªå¯ä»¥åœ¨æ¯ä¸€å¸§ä¹‹é—´æš‚åœæ‰§è¡Œçš„å°å—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ¨¡å—ä¸€ï¼šTimeSlicer.js
 * æè¿°ï¼šä¸€ä¸ªåŸºäºç”Ÿæˆå™¨å‡½æ•°çš„é€šç”¨æ—¶é—´åˆ†ç‰‡æ§åˆ¶å™¨ã€‚
 * å®ƒå¯ä»¥æš‚åœã€æ¢å¤ä»»åŠ¡ï¼Œå¹¶ç¡®ä¿æ¯å¸§æ‰§è¡Œæ—¶é—´ä¸è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚ 16msï¼‰ã€‚
 */</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeSlicer</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
        <span class="hljs-comment">// é»˜è®¤ä¸€å¸§çš„æ—¶é—´é¢„ç®—ï¼Œç•™ç»™æµè§ˆå™¨æ¸²æŸ“çš„æ—¶é—´</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">frameBudget</span> = options.<span class="hljs-property">frameBudget</span> || <span class="hljs-number">12</span>; <span class="hljs-comment">// 12ms ç»™ JSï¼Œ4ms ç»™æ¸²æŸ“</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fps</span> = options.<span class="hljs-property">fps</span> || <span class="hljs-number">60</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRunning</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = []; <span class="hljs-comment">// ä»»åŠ¡é˜Ÿåˆ—</span>
        
        <span class="hljs-comment">// ç»‘å®šä¸Šä¸‹æ–‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_performWork</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_performWork</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    }

    <span class="hljs-comment">/**
     * æ·»åŠ ä¸€ä¸ªéœ€è¦åˆ†ç‰‡æ‰§è¡Œçš„ä»»åŠ¡
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Generator Function</span>} <span class="hljs-variable">generatorFunc</span> - ç”Ÿæˆå™¨å‡½æ•°
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">context</span> - æ‰§è¡Œä¸Šä¸‹æ–‡
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...any</span>} <span class="hljs-variable">args</span> - å‚æ•°
     */</span>
    <span class="hljs-title function_">addTask</span>(<span class="hljs-params">generatorFunc, context = <span class="hljs-literal">null</span>, ...args</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> generatorFunc !== <span class="hljs-string">'function'</span> || generatorFunc.<span class="hljs-property">constructor</span>.<span class="hljs-property">name</span> !== <span class="hljs-string">'GeneratorFunction'</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'TimeSlicer: ä»»åŠ¡å¿…é¡»æ˜¯ä¸€ä¸ª Generator å‡½æ•°'</span>);
        }

        <span class="hljs-keyword">const</span> task = {
            <span class="hljs-attr">iterator</span>: generatorFunc.<span class="hljs-title function_">apply</span>(context, args),
            <span class="hljs-attr">priority</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// é¢„ç•™ä¼˜å…ˆçº§å­—æ®µ</span>
            <span class="hljs-attr">createdTime</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
        };

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>(task);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_schedule</span>();
    }

    <span class="hljs-comment">/**
     * è°ƒåº¦æ ¸å¿ƒ
     * å¦‚æœå½“å‰æ²¡æœ‰è¿è¡Œï¼Œåˆ™å¯åŠ¨è°ƒåº¦
     */</span>
    <span class="hljs-title function_">_schedule</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isRunning</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRunning</span> = <span class="hljs-literal">true</span>;
            <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨ MessageChannel (å®ä»»åŠ¡)ï¼Œå…¶æ¬¡ requestAnimationFrame</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MessageChannel</span> !== <span class="hljs-string">'undefined'</span>) {
                <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
                channel.<span class="hljs-property">port2</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_performWork</span>;
                channel.<span class="hljs-property">port1</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_performWork</span>, <span class="hljs-number">0</span>);
            }
        }
    }

    <span class="hljs-comment">/**
     * æ‰§è¡Œå·¥ä½œå•å…ƒ
     * åœ¨ç»™å®šçš„æ—¶é—´é¢„ç®—å†…å°½å¯èƒ½å¤šåœ°æ‰§è¡Œ generator.next()
     */</span>
    <span class="hljs-title function_">_performWork</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();

        <span class="hljs-comment">// åªè¦é˜Ÿåˆ—é‡Œæœ‰ä»»åŠ¡ï¼Œä¸”å½“å‰å¸§è¿˜æœ‰å‰©ä½™æ—¶é—´ï¼Œå°±ç»§ç»­æ‰§è¡Œ</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; (performance.<span class="hljs-title function_">now</span>() - startTime &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">frameBudget</span>)) {
            <span class="hljs-keyword">const</span> currentTask = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>[<span class="hljs-number">0</span>];
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡Œä¸€æ­¥</span>
                <span class="hljs-keyword">const</span> result = currentTask.<span class="hljs-property">iterator</span>.<span class="hljs-title function_">next</span>();

                <span class="hljs-comment">// å¦‚æœå½“å‰ä»»åŠ¡å®Œæˆ (done: true)</span>
                <span class="hljs-keyword">if</span> (result.<span class="hljs-property">done</span>) {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">shift</span>(); <span class="hljs-comment">// ç§»é™¤å·²å®Œæˆä»»åŠ¡</span>
                    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä»»åŠ¡å®Œæˆçš„å›è°ƒ</span>
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[TimeSlicer] ä»»åŠ¡å®Œæˆï¼Œè€—æ—¶: <span class="hljs-subst">${(<span class="hljs-built_in">Date</span>.now() - currentTask.createdTime)}</span>ms`</span>);
                } 
                <span class="hljs-comment">// å¦‚æœæ²¡å®Œæˆï¼Œå®ƒä¼šä¿ç•™åœ¨é˜Ÿåˆ—å¤´éƒ¨ï¼Œä¸‹ä¸€æ¬¡å¾ªç¯ç»§ç»­æ‰§è¡Œ</span>
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[TimeSlicer] ä»»åŠ¡æ‰§è¡Œå‡ºé”™:'</span>, error);
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">shift</span>(); <span class="hljs-comment">// å‡ºé”™ç§»é™¤ä»»åŠ¡ï¼Œé˜²æ­¢æ­»å¾ªç¯</span>
            }
        }

        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å‰©ä½™ä»»åŠ¡</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// è®©å‡ºä¸»çº¿ç¨‹ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒåº¦</span>
            <span class="hljs-comment">// ä½¿ç”¨ requestAnimationFrame é…åˆ MessageChannel è¾¾åˆ°æœ€ä½³æ•ˆæœ</span>
            <span class="hljs-comment">// è¿™é‡Œç®€åŒ–é€»è¾‘ï¼Œç›´æ¥é‡æ–°è°ƒåº¦</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MessageChannel</span> !== <span class="hljs-string">'undefined'</span>) {
                <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
                channel.<span class="hljs-property">port2</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_performWork</span>;
                channel.<span class="hljs-property">port1</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_performWork</span>, <span class="hljs-number">0</span>);
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRunning</span> = <span class="hljs-literal">false</span>;
        }
    }
}

<span class="hljs-comment">// ==========================================</span>
<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ä»£ç ï¼šå¤„ç† 10ä¸‡æ¡æ•°æ®çš„å¤æ‚è®¡ç®—</span>
<span class="hljs-comment">// ==========================================</span>

<span class="hljs-keyword">const</span> slicer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TimeSlicer</span>();

<span class="hljs-comment">/**
 * æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶çš„å¤§å‹è®¡ç®—ä»»åŠ¡
 * å‡è®¾æˆ‘ä»¬éœ€è¦å¤„ç†ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„ï¼Œæ¯é¡¹éƒ½è¦è¿›è¡Œæ•°å­¦è¿ç®—
 */</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">heavyCalculationTask</span>(<span class="hljs-params">dataSize</span>) {
    <span class="hljs-keyword">const</span> results = [];
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Task] å¼€å§‹å¤„ç† <span class="hljs-subst">${dataSize}</span> æ¡æ•°æ®...`</span>);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; dataSize; i++) {
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¤æ‚è®¡ç®—: ä¸‰è§’å‡½æ•°ã€å¼€æ–¹ç­‰</span>
        <span class="hljs-keyword">let</span> temp = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(i) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">tan</span>(i) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
        <span class="hljs-comment">// æ¨¡æ‹Ÿ DOM æ“ä½œï¼ˆå¦‚æœéœ€è¦ï¼Œè™½ç„¶ä¸å»ºè®®åœ¨é€»è¾‘ä¸­æ··æ‚ DOMï¼‰</span>
        <span class="hljs-comment">// ä»…ä»…æ˜¯çº¯è®¡ç®—</span>
        results.<span class="hljs-title function_">push</span>(temp);

        <span class="hljs-comment">// å…³é”®ç‚¹ï¼šæ¯å¤„ç† 1000 æ¡æ•°æ®ï¼Œæˆ–è€…æ¯ä¸€æ­¥ yield ä¸€æ¬¡</span>
        <span class="hljs-comment">// ç²’åº¦è¶Šç»†ï¼Œå“åº”è¶Šå¥½ï¼Œä½†æ€»è€—æ—¶ä¼šå¾®å¢</span>
        <span class="hljs-keyword">if</span> (i % <span class="hljs-number">500</span> === <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">yield</span>; <span class="hljs-comment">// æš‚åœï¼Œäº¤è¿˜æ§åˆ¶æƒç»™è°ƒåº¦å™¨</span>
        }
    }

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Task] æ‰€æœ‰æ•°æ®å¤„ç†å®Œæ¯•ï¼Œç»“æœé•¿åº¦: <span class="hljs-subst">${results.length}</span>`</span>);
    <span class="hljs-keyword">return</span> results;
}

<span class="hljs-comment">// å¯åŠ¨ä»»åŠ¡ï¼šå¤„ç† 100,000 æ¡æ•°æ®</span>
<span class="hljs-comment">// å¦‚æœä¸ä½¿ç”¨ TimeSlicerï¼Œè¿™è¡Œä»£ç ä¼šç›´æ¥å¡æ­»æµè§ˆå™¨ 2-3ç§’</span>
slicer.<span class="hljs-title function_">addTask</span>(heavyCalculationTask, <span class="hljs-literal">null</span>, <span class="hljs-number">100000</span>);

<span class="hljs-comment">// å¯ä»¥åŒæ—¶æ·»åŠ å¦ä¸€ä¸ªä»»åŠ¡ï¼Œå®ƒä»¬ä¼šäº¤æ›¿æ‰§è¡Œ</span>
slicer.<span class="hljs-title function_">addTask</span>(<span class="hljs-keyword">function</span>* () {
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">50</span>; i++) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Task 2] ç©¿æ’æ‰§è¡Œä¸­... <span class="hljs-subst">${i}</span>`</span>);
        <span class="hljs-keyword">yield</span>;
    }
});
</code></pre>
<hr/>
<h3 data-id="heading-1">ç¬¬äºŒéƒ¨åˆ†ï¼šWeb Worker çº¿ç¨‹æ±  (Thread Pool)</h3>
<p>æ—¶é—´åˆ†ç‰‡è™½ç„¶è§£å†³äº†å¡é¡¿ï¼Œä½†ä»»åŠ¡ä»ç„¶åœ¨ä¸»çº¿ç¨‹è¿è¡Œï¼Œæ€»è€—æ—¶å¹¶æ²¡æœ‰å‡å°‘ï¼ˆç”šè‡³å› ä¸ºè°ƒåº¦å¼€é”€å˜é•¿äº†ï¼‰ã€‚å¯¹äºçº¯è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚å›¾åƒå¤„ç†ã€å¤§æ–‡ä»¶è§£æã€åŠ å¯†è§£å¯†ï¼‰ï¼Œæœ€å¥½çš„æ–¹æ¡ˆæ˜¯ç§»å‡ºä¸»çº¿ç¨‹ã€‚</p>
<p>ä¸ºäº†é¿å…é¢‘ç¹åˆ›å»º Worker å¸¦æ¥çš„å¼€é”€ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª <strong>Worker çº¿ç¨‹æ± </strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ¨¡å—äºŒï¼šWorkerPool.js
 * æè¿°ï¼šç®¡ç†ä¸€ç»„ Web Workerï¼Œå®ç°è´Ÿè½½å‡è¡¡å’Œä»»åŠ¡å¤ç”¨ã€‚
 */</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkerPool</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">workerScript, poolSize = <span class="hljs-number">4</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">workerScript</span> = workerScript;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">poolSize</span> = poolSize || navigator.<span class="hljs-property">hardwareConcurrency</span> || <span class="hljs-number">4</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span> = []; <span class="hljs-comment">// å­˜å‚¨ { worker, isBusy, id }</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = []; <span class="hljs-comment">// ç­‰å¾…å¤„ç†çš„ä»»åŠ¡é˜Ÿåˆ—</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskMap</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// å­˜å‚¨ taskId -&gt; { resolve, reject }</span>
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_initPool</span>();
    }

    <span class="hljs-title function_">_initPool</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">poolSize</span>; i++) {
            <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">workerScript</span>);
            
            worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_handleWorkerMessage</span>(e, i);
            worker.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_handleWorkerError</span>(e, i);
            
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>.<span class="hljs-title function_">push</span>({
                <span class="hljs-attr">id</span>: i,
                <span class="hljs-attr">worker</span>: worker,
                <span class="hljs-attr">isBusy</span>: <span class="hljs-literal">false</span>
            });
        }
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[WorkerPool] åˆå§‹åŒ–å®Œæˆï¼ŒåŒ…å« <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.poolSize}</span> ä¸ªçº¿ç¨‹`</span>);
    }

    <span class="hljs-comment">/**
     * æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± 
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">type</span> - ä»»åŠ¡ç±»å‹
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">data</span> - æ•°æ®
     * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise</span>}
     */</span>
    <span class="hljs-title function_">run</span>(<span class="hljs-params">type, data</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> taskId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_generateUUID</span>();
            <span class="hljs-keyword">const</span> task = {
                taskId,
                type,
                data,
                resolve,
                reject
            };

            <span class="hljs-comment">// å°è¯•å¯»æ‰¾ç©ºé—² Worker</span>
            <span class="hljs-keyword">const</span> idleWorkerIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">w</span> =&gt;</span> !w.<span class="hljs-property">isBusy</span>);

            <span class="hljs-keyword">if</span> (idleWorkerIndex !== -<span class="hljs-number">1</span>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_dispatchTask</span>(idleWorkerIndex, task);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// æ‰€æœ‰ Worker éƒ½åœ¨å¿™ï¼ŒåŠ å…¥é˜Ÿåˆ—</span>
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>(task);
            }
        });
    }

    <span class="hljs-title function_">_dispatchTask</span>(<span class="hljs-params">workerIndex, task</span>) {
        <span class="hljs-keyword">const</span> workerObj = <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>[workerIndex];
        workerObj.<span class="hljs-property">isBusy</span> = <span class="hljs-literal">true</span>;

        <span class="hljs-comment">// è®°å½•ä»»åŠ¡å›è°ƒï¼Œä»¥ä¾¿æ”¶åˆ°æ¶ˆæ¯æ—¶è§¦å‘</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskMap</span>.<span class="hljs-title function_">set</span>(task.<span class="hljs-property">taskId</span>, {
            <span class="hljs-attr">resolve</span>: task.<span class="hljs-property">resolve</span>,
            <span class="hljs-attr">reject</span>: task.<span class="hljs-property">reject</span>
        });

        <span class="hljs-comment">// å‘é€ç»™ Worker</span>
        workerObj.<span class="hljs-property">worker</span>.<span class="hljs-title function_">postMessage</span>({
            <span class="hljs-attr">taskId</span>: task.<span class="hljs-property">taskId</span>,
            <span class="hljs-attr">type</span>: task.<span class="hljs-property">type</span>,
            <span class="hljs-attr">data</span>: task.<span class="hljs-property">data</span>
        });
    }

    <span class="hljs-title function_">_handleWorkerMessage</span>(<span class="hljs-params">e, workerIndex</span>) {
        <span class="hljs-keyword">const</span> { taskId, result, error } = e.<span class="hljs-property">data</span>;
        <span class="hljs-keyword">const</span> workerObj = <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>[workerIndex];
        
        <span class="hljs-comment">// æ ‡è®°ä¸ºç©ºé—²</span>
        workerObj.<span class="hljs-property">isBusy</span> = <span class="hljs-literal">false</span>;

        <span class="hljs-comment">// æ‰¾åˆ°å¯¹åº”çš„ Promise</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">taskMap</span>.<span class="hljs-title function_">has</span>(taskId)) {
            <span class="hljs-keyword">const</span> { resolve, reject } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskMap</span>.<span class="hljs-title function_">get</span>(taskId);
            <span class="hljs-keyword">if</span> (error) {
                <span class="hljs-title function_">reject</span>(error);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-title function_">resolve</span>(result);
            }
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskMap</span>.<span class="hljs-title function_">delete</span>(taskId);
        }

        <span class="hljs-comment">// æ£€æŸ¥é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ç­‰å¾…çš„ä»»åŠ¡</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">const</span> nextTask = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">shift</span>();
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_dispatchTask</span>(workerIndex, nextTask);
        }
    }

    <span class="hljs-title function_">_handleWorkerError</span>(<span class="hljs-params">e, workerIndex</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`[WorkerPool] Worker <span class="hljs-subst">${workerIndex}</span> å‘ç”Ÿåº•å±‚é”™è¯¯`</span>, e);
        <span class="hljs-comment">// å®é™…ç”Ÿäº§ä¸­å¯èƒ½éœ€è¦é‡å¯è¯¥ Worker</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>[workerIndex].<span class="hljs-property">isBusy</span> = <span class="hljs-literal">false</span>;
    }

    <span class="hljs-title function_">_generateUUID</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[xy]/g</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) {
            <span class="hljs-keyword">var</span> r = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">16</span> | <span class="hljs-number">0</span>, v = c == <span class="hljs-string">'x'</span> ? r : (r &amp; <span class="hljs-number">0x3</span> | <span class="hljs-number">0x8</span>);
            <span class="hljs-keyword">return</span> v.<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>);
        });
    }
    
    <span class="hljs-title function_">terminate</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">w</span> =&gt;</span> w.<span class="hljs-property">worker</span>.<span class="hljs-title function_">terminate</span>());
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">workers</span> = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskMap</span>.<span class="hljs-title function_">clear</span>();
    }
}

<span class="hljs-comment">/* 
   --------------------------------------------------
   é…å¥—çš„ Worker è„šæœ¬å†…å®¹ (worker-script.js) 
   (åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™é€šå¸¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼Œæˆ–è€…é€šè¿‡ Blob URL ç”Ÿæˆ)
   --------------------------------------------------
*/</span>

<span class="hljs-comment">/*
// worker-script.js ä¼ªä»£ç å®ç°
self.onmessage = function(e) {
    const { taskId, type, data } = e.data;

    try {
        let result;
        switch (type) {
            case 'SORT_LARGE_ARRAY':
                // æ¨¡æ‹Ÿè€—æ—¶æ’åº
                result = data.sort((a, b) =&gt; a - b);
                break;
            case 'IMAGE_FILTER':
                // æ¨¡æ‹Ÿå›¾åƒåƒç´ å¤„ç†
                result = applyFilter(data); 
                break;
            default:
                throw new Error('Unknown task type');
        }

        self.postMessage({ taskId, result });
    } catch (err) {
        self.postMessage({ taskId, error: err.message });
    }
};

function applyFilter(pixels) {
    // æ¨¡æ‹Ÿ O(n) éå†
    let sum = 0;
    for(let i=0; i&lt;10000000; i++) { sum += i }
    return pixels;
}
*/</span>

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-comment">// const pool = new WorkerPool('worker-script.js');</span>
<span class="hljs-comment">// pool.run('SORT_LARGE_ARRAY', [5, 1, 9, ...]).then(res =&gt; console.log(res));</span>
</code></pre>
<hr/>
<h3 data-id="heading-2">ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»»åŠ¡ä¼˜å…ˆçº§ä¸ç©ºé—²è°ƒåº¦ (Idle &amp; Priority Scheduler)</h3>
<p>é™¤äº†æ—¶é—´åˆ†ç‰‡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨ <code>requestIdleCallback</code> åœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚åŸ‹ç‚¹ä¸ŠæŠ¥ã€é¢„åŠ è½½æ•°æ®ï¼‰ã€‚ä¸ºäº†å…¼å®¹æ€§å’Œæ›´å¥½çš„æ§åˆ¶ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªå¸¦ä¼˜å…ˆçº§çš„ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ¨¡å—ä¸‰ï¼šPriorityScheduler.js
 * æè¿°ï¼šæ¨¡æ‹Ÿ React Schedulerï¼Œæ”¯æŒä¼˜å…ˆçº§ï¼ˆUserBlocking, Normal, Low, Idleï¼‰ã€‚
 */</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Priority</span> = {
    <span class="hljs-title class_">Immediate</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// ç‚¹å‡»äº‹ä»¶ç­‰ï¼Œå¿…é¡»ç«‹å³æ‰§è¡Œ</span>
    <span class="hljs-title class_">UserBlocking</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// æ»šåŠ¨ã€è¾“å…¥ï¼Œéœ€è¦åœ¨çŸ­æ—¶é—´å†…å®Œæˆ</span>
    <span class="hljs-title class_">Normal</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// æ™®é€šæ•°æ®è¯·æ±‚</span>
    <span class="hljs-title class_">Low</span>: <span class="hljs-number">4</span>, <span class="hljs-comment">// åŠ¨ç”»åç»­å¤„ç†</span>
    <span class="hljs-title class_">Idle</span>: <span class="hljs-number">5</span> <span class="hljs-comment">// åŸ‹ç‚¹ã€é¢„åŠ è½½</span>
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PriorityScheduler</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span> = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isMessageLoopRunning</span> = <span class="hljs-literal">false</span>;
        
        <span class="hljs-comment">// ä½¿ç”¨ MessageChannel è¿›è¡Œä»»åŠ¡å¾ªç¯ tick</span>
        <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">port</span> = channel.<span class="hljs-property">port2</span>;
        channel.<span class="hljs-property">port1</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_performWorkUntilDeadline</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    }

    <span class="hljs-comment">/**
     * è°ƒåº¦ä»»åŠ¡
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} callback 
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} priorityLevel 
     */</span>
    <span class="hljs-title function_">scheduleCallback</span>(<span class="hljs-params">priorityLevel, callback</span>) {
        <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();
        <span class="hljs-keyword">let</span> timeout;

        <span class="hljs-comment">// æ ¹æ®ä¼˜å…ˆçº§è®¾ç½®è¿‡æœŸæ—¶é—´</span>
        <span class="hljs-keyword">switch</span> (priorityLevel) {
            <span class="hljs-keyword">case</span> <span class="hljs-title class_">Priority</span>.<span class="hljs-property">Immediate</span>: timeout = -<span class="hljs-number">1</span>; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-title class_">Priority</span>.<span class="hljs-property">UserBlocking</span>: timeout = <span class="hljs-number">250</span>; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-title class_">Priority</span>.<span class="hljs-property">Normal</span>: timeout = <span class="hljs-number">5000</span>; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-title class_">Priority</span>.<span class="hljs-property">Low</span>: timeout = <span class="hljs-number">10000</span>; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-title class_">Priority</span>.<span class="hljs-property">Idle</span>: timeout = <span class="hljs-number">1073741823</span>; <span class="hljs-keyword">break</span>; <span class="hljs-comment">// Max Int 32 bit approx</span>
            <span class="hljs-attr">default</span>: timeout = <span class="hljs-number">5000</span>;
        }

        <span class="hljs-keyword">const</span> expirationTime = startTime + timeout;

        <span class="hljs-keyword">const</span> newTask = {
            callback,
            priorityLevel,
            startTime,
            expirationTime,
            <span class="hljs-attr">sortIndex</span>: -<span class="hljs-number">1</span> <span class="hljs-comment">// ç”¨äºæœ€å°å †æ’åºï¼Œè¿™é‡Œç®€åŒ–ä¸ºæ•°ç»„æ’åº</span>
        };

        <span class="hljs-comment">// æ’å…¥é˜Ÿåˆ—å¹¶æŒ‰è¿‡æœŸæ—¶é—´æ’åºï¼ˆæ¨¡æ‹Ÿæœ€å°å †ï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">push</span>(newTask);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">expirationTime</span> - b.<span class="hljs-property">expirationTime</span>);

        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isMessageLoopRunning</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">isMessageLoopRunning</span> = <span class="hljs-literal">true</span>;
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">port</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);
        }
    }

    <span class="hljs-title function_">_performWorkUntilDeadline</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> currentTime = performance.<span class="hljs-title function_">now</span>();
        <span class="hljs-keyword">const</span> deadline = currentTime + <span class="hljs-number">5</span>; <span class="hljs-comment">// æ¯æ¬¡ç»™ 5ms çš„æ—¶é—´ç‰‡</span>

        <span class="hljs-keyword">let</span> currentTask = <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>[<span class="hljs-number">0</span>];

        <span class="hljs-keyword">while</span> (currentTask) {
            <span class="hljs-comment">// å¦‚æœä»»åŠ¡è¿˜æ²¡è¿‡æœŸï¼Œä½†å½“å‰å¸§æ—¶é—´ç‰‡ç”¨å®Œäº†ï¼Œæš‚åœï¼Œè®©ç»™æµè§ˆå™¨æ¸²æŸ“</span>
            <span class="hljs-keyword">if</span> (currentTask.<span class="hljs-property">expirationTime</span> &gt; currentTime &amp;&amp; performance.<span class="hljs-title function_">now</span>() &gt;= deadline) {
                <span class="hljs-keyword">break</span>;
            }

            <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span>
            <span class="hljs-keyword">const</span> callback = currentTask.<span class="hljs-property">callback</span>;
            <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œä¼ å…¥ didTimeout å‚æ•°å‘ŠçŸ¥ä»»åŠ¡æ˜¯å¦è¶…æ—¶</span>
            <span class="hljs-keyword">const</span> didTimeout = currentTask.<span class="hljs-property">expirationTime</span> &lt;= currentTime;
            
            <span class="hljs-comment">// ä»é˜Ÿåˆ—ç§»é™¤</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">shift</span>();

            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡Œå›è°ƒ</span>
                <span class="hljs-keyword">const</span> continuationCallback = <span class="hljs-title function_">callback</span>(didTimeout);
                
                <span class="hljs-comment">// å¦‚æœä»»åŠ¡è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¯´æ˜å®ƒè¿˜æ²¡åšå®Œï¼ˆæ”¯æŒä»»åŠ¡ä¸­æ–­ä¸æ¢å¤ï¼‰</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> continuationCallback === <span class="hljs-string">'function'</span>) {
                    <span class="hljs-comment">// é‡æ–°åŠ å…¥é˜Ÿåˆ—ï¼Œä¿æŒåŸæœ‰çš„è¿‡æœŸæ—¶é—´</span>
                    currentTask.<span class="hljs-property">callback</span> = continuationCallback;
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">push</span>(currentTask);
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">expirationTime</span> - b.<span class="hljs-property">expirationTime</span>);
                }
            } <span class="hljs-keyword">catch</span> (e) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Task error:'</span>, e);
            }

            currentTask = <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>[<span class="hljs-number">0</span>];
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// è¿˜æœ‰ä»»åŠ¡ï¼Œç»§ç»­è¯·æ±‚ä¸‹ä¸€ä¸ª tick</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">port</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">isMessageLoopRunning</span> = <span class="hljs-literal">false</span>;
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> scheduler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityScheduler</span>();

<span class="hljs-comment">// ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼šå‘é€ç»Ÿè®¡æ•°æ®</span>
scheduler.<span class="hljs-title function_">scheduleCallback</span>(<span class="hljs-title class_">Priority</span>.<span class="hljs-property">Idle</span>, <span class="hljs-function">(<span class="hljs-params">didTimeout</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Idle task executing, didTimeout:'</span>, didTimeout);
    <span class="hljs-comment">// æ¨¡æ‹Ÿé‡è´Ÿè½½</span>
    <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">while</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start &lt; <span class="hljs-number">10</span>) {} 
});

<span class="hljs-comment">// é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼šå“åº”ç”¨æˆ·ç‚¹å‡»</span>
scheduler.<span class="hljs-title function_">scheduleCallback</span>(<span class="hljs-title class_">Priority</span>.<span class="hljs-property">Immediate</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Immediate task executing!'</span>);
});
</code></pre>
<hr/>
<h3 data-id="heading-3">ç¬¬å››éƒ¨åˆ†ï¼šè™šæ‹Ÿåˆ—è¡¨ (Virtual List) - è§£å†³æ¸²æŸ“é•¿ä»»åŠ¡</h3>
<p>å½“æ•°æ®é‡è¾¾åˆ°å‡ ä¸‡æ¡æ—¶ï¼Œæœ€å¤§çš„â€œé•¿ä»»åŠ¡â€é€šå¸¸ä¸æ˜¯ JS è®¡ç®—ï¼Œè€Œæ˜¯ DOM çš„ Layout å’Œ Paintã€‚è™šæ‹Ÿåˆ—è¡¨æŠ€æœ¯åªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„å…ƒç´ ï¼Œæå¤§å‡å°‘ DOM èŠ‚ç‚¹æ•°é‡ã€‚</p>
<p>ä¸ºäº†ä¿è¯ä»£ç é‡å’Œç»†èŠ‚ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ React/Vueï¼Œè€Œæ˜¯ç”¨åŸç”Ÿ JS å®ç°ä¸€ä¸ªé«˜æ•ˆçš„è™šæ‹Ÿæ»šåŠ¨ç±»ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ¨¡å—å››ï¼šVirtualScroller.js
 * æè¿°ï¼šåŸç”Ÿé«˜æ€§èƒ½è™šæ‹Ÿæ»šåŠ¨å®ç°ã€‚
 * æ”¯æŒåŠ¨æ€é«˜åº¦ä¼°ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼ŒDOM å¤ç”¨ï¼Œå’Œæ»šåŠ¨èŠ‚æµã€‚
 */</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualScroller</span> {
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">container</span> - æ»šåŠ¨å®¹å™¨
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">items</span> - æ•°æ®æº
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">rowRenderer</span> - è¡Œæ¸²æŸ“å‡½æ•° (index, data) =&gt; HTMLElement
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">itemHeight</span> - å›ºå®šè¡Œé«˜
     */</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">container, items, rowRenderer, itemHeight = <span class="hljs-number">50</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = container;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = items;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">rowRenderer</span> = rowRenderer;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span> = itemHeight;
        
        <span class="hljs-comment">// å†…éƒ¨çŠ¶æ€</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">endIndex</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollTop</span> = <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ç¼“å†²åŒºåŸŸï¼ˆä¸Šä¸‹å¤šæ¸²æŸ“å‡ ä¸ªï¼Œé˜²æ­¢ç™½å±ï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span> = <span class="hljs-number">5</span>; 

        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_initDOM</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_bindEvents</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_update</span>();
    }

    <span class="hljs-title function_">_initDOM</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">style</span>.<span class="hljs-property">overflowY</span> = <span class="hljs-string">'auto'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'relative'</span>;

        <span class="hljs-comment">// åˆ›å»ºå ä½é«˜åº¦å±‚ (Phantom)</span>
        <span class="hljs-comment">// å®ƒçš„é«˜åº¦ç­‰äº æ€»æ•°æ®é‡ * è¡Œé«˜ï¼Œç”¨äºæ’‘å¼€æ»šåŠ¨æ¡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">phantomContent</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">phantomContent</span>.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'absolute'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">phantomContent</span>.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">'0'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">phantomContent</span>.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">'0'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">phantomContent</span>.<span class="hljs-property">style</span>.<span class="hljs-property">right</span> = <span class="hljs-string">'0'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">phantomContent</span>.<span class="hljs-property">style</span>.<span class="hljs-property">zIndex</span> = <span class="hljs-string">'-1'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">phantomContent</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.items.length * <span class="hljs-variable language_">this</span>.itemHeight}</span>px`</span>;
        
        <span class="hljs-comment">// åˆ›å»ºå®é™…å†…å®¹å±‚ (Real Content)</span>
        <span class="hljs-comment">// è¿™é‡Œçš„å…ƒç´ ä¼šç»å¯¹å®šä½ï¼Œæˆ–è€…é€šè¿‡ transform åç§»</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'absolute'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">'0'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-property">style</span>.<span class="hljs-property">right</span> = <span class="hljs-string">'0'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">'0'</span>;
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">phantomContent</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>);
    }

    <span class="hljs-title function_">_bindEvents</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// ç®€å•çš„èŠ‚æµå¤„ç†</span>
        <span class="hljs-keyword">let</span> ticking = <span class="hljs-literal">false</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (!ticking) {
                <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollTop</span> = e.<span class="hljs-property">target</span>.<span class="hljs-property">scrollTop</span>;
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_update</span>();
                    ticking = <span class="hljs-literal">false</span>;
                });
                ticking = <span class="hljs-literal">true</span>;
            }
        });
    }

    <span class="hljs-title function_">_update</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// 1. è®¡ç®—å¯è§†åŒºåŸŸèƒ½æ”¾ä¸‹å¤šå°‘ä¸ªå…ƒç´ </span>
        <span class="hljs-keyword">const</span> containerHeight = <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">clientHeight</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(containerHeight / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>);

        <span class="hljs-comment">// 2. è®¡ç®—èµ·å§‹ç´¢å¼•</span>
        <span class="hljs-comment">// å‘ä¸‹å–æ•´ï¼Œç¡®ä¿æ»šåŠ¨å¹³æ»‘</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollTop</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>);
        
        <span class="hljs-comment">// 3. è€ƒè™‘ç¼“å†²åŒº</span>
        <span class="hljs-keyword">const</span> renderStart = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>);
        
        <span class="hljs-comment">// 4. è®¡ç®—ç»“æŸç´¢å¼•</span>
        <span class="hljs-keyword">const</span> renderEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>, 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">startIndex</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>
        );

        <span class="hljs-comment">// 5. æ¸²æŸ“è¿™ä¸€æ®µæ•°æ®</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_renderRows</span>(renderStart, renderEnd);
        
        <span class="hljs-comment">// 6. åç§» content å±‚ï¼Œè®©å®ƒå¤„äºæ­£ç¡®çš„ä½ç½®</span>
        <span class="hljs-comment">// å› ä¸ºæˆ‘ä»¬åªæ¸²æŸ“äº†ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥éœ€è¦æŠŠè¿™éƒ¨åˆ†å†…å®¹ç§»åŠ¨åˆ°è§†è§‰ä¸Šçš„ä½ç½®</span>
        <span class="hljs-comment">// è¿™é‡Œçš„åç§»é‡åº”è¯¥æ˜¯ renderStart * itemHeight</span>
        <span class="hljs-keyword">const</span> offset = renderStart * <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateY(<span class="hljs-subst">${offset}</span>px)`</span>;
    }

    <span class="hljs-title function_">_renderRows</span>(<span class="hljs-params">start, end</span>) {
        <span class="hljs-comment">// ç®€å•çš„ Diff ç®—æ³•ï¼šå…¨æ¸…ç©ºå†æ·»åŠ  (ç”Ÿäº§ç¯å¢ƒåº”å¤ç”¨ DOM)</span>
        <span class="hljs-comment">// ä¸ºäº†æ¼”ç¤ºä»£ç é‡å’Œé€»è¾‘ï¼Œè¿™é‡Œåšä¸€ä¸ªç®€å•çš„ DOM å¤ç”¨æ± é€»è¾‘</span>
        
        <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
        
        <span class="hljs-comment">// æ¸…ç©ºå½“å‰æ¸²æŸ“å±‚</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt; end; i++) {
            <span class="hljs-keyword">const</span> itemData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i];
            <span class="hljs-keyword">const</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">rowRenderer</span>(i, itemData);
            
            <span class="hljs-comment">// è®¾ç½®å¿…è¦çš„æ ·å¼ç¡®ä¿é«˜åº¦æ­£ç¡®</span>
            node.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.itemHeight}</span>px`</span>;
            node.<span class="hljs-property">style</span>.<span class="hljs-property">boxSizing</span> = <span class="hljs-string">'border-box'</span>; <span class="hljs-comment">// é¿å… padding å½±å“é«˜åº¦</span>
            
            fragment.<span class="hljs-title function_">appendChild</span>(node);
        }

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-title function_">appendChild</span>(fragment);
    }

    <span class="hljs-comment">/**
     * åŠ¨æ€æ›´æ–°æ•°æ®
     */</span>
    <span class="hljs-title function_">updateData</span>(<span class="hljs-params">newItems</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = newItems;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">phantomContent</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.items.length * <span class="hljs-variable language_">this</span>.itemHeight}</span>px`</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_update</span>();
    }
}

<span class="hljs-comment">// ====================================</span>
<span class="hljs-comment">// VirtualScroller ä½¿ç”¨æµ‹è¯•</span>
<span class="hljs-comment">// ====================================</span>
<span class="hljs-comment">/*
// HTML ç»“æ„: &lt;div id="scroll-container" style="height: 500px; width: 300px;"&gt;&lt;/div&gt;

const data = Array.from({ length: 100000 }, (_, i) =&gt; ({ id: i, text: `Row Item ${i}` }));
const container = document.getElementById('scroll-container');

const scroller = new VirtualScroller(container, data, (index, item) =&gt; {
    const div = document.createElement('div');
    div.textContent = `${item.id} - ${item.text}`;
    div.style.borderBottom = '1px solid #ccc';
    div.style.display = 'flex';
    div.style.alignItems = 'center';
    div.style.paddingLeft = '10px';
    
    // æ·»åŠ ä¸€äº›å¤æ‚çš„ DOM ç»“æ„æ¥æ¨¡æ‹Ÿæ¸²æŸ“å‹åŠ›
    // å¦‚æœæ²¡æœ‰è™šæ‹Ÿåˆ—è¡¨ï¼Œ10ä¸‡ä¸ªè¿™æ ·çš„ DOM ä¼šç¬é—´å¡æ­»
    const span = document.createElement('span');
    span.innerText = ' [Detail]';
    span.style.color = 'blue';
    div.appendChild(span);
    
    return div;
}, 40);
*/</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">æ€»ç»“ä¸è¿›é˜¶æ€è€ƒ</h3>
<p>ä»¥ä¸Šä»£ç å±•ç¤ºäº†è§£å†³å‰ç«¯â€œé•¿ä»»åŠ¡â€çš„å››ä¸ªç»´åº¦çš„å·¥ç¨‹åŒ–å®ç°ã€‚è¦çœŸæ­£æŒæ¡ä¼˜åŒ–ï¼Œéœ€è¦ç†è§£ä»¥ä¸‹æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ol>
<li><strong>è®©å‡ºä¸»çº¿ç¨‹ (Yielding)</strong>: JS æ˜¯å•çº¿ç¨‹çš„ï¼Œå¿…é¡»é€šè¿‡ <code>TimeSlicer</code> (æ—¶é—´åˆ†ç‰‡) å°†å¤§ä»»åŠ¡åˆ‡ç¢ï¼Œç»™ UI æ¸²æŸ“ç•™å‡ºå‘¼å¸çš„æ—¶é—´ã€‚</li>
<li><strong>å¹¶è¡Œè®¡ç®— (Parallelism)</strong>: ä½¿ç”¨ <code>WorkerPool</code> å°†ä¸æ¶‰åŠ DOM çš„çº¯ç®—æ³•é€»è¾‘ç§»åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ã€‚</li>
<li><strong>ä¼˜å…ˆçº§è°ƒåº¦ (Scheduling)</strong>: å¹¶ä¸æ˜¯æ‰€æœ‰ä»»åŠ¡éƒ½ä¸€æ ·é‡è¦ã€‚<code>PriorityScheduler</code> ç¡®ä¿ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»ã€è¾“å…¥ï¼‰æ°¸è¿œä¼˜å…ˆäºæ•°æ®å¤„ç†ã€‚</li>
<li><strong>æŒ‰éœ€æ¸²æŸ“ (Lazy Rendering)</strong>: <code>VirtualScroller</code> è¯æ˜äº†æ— è®ºæ•°æ®å¤šå¤§ï¼Œåªè¦è§†å£æœ‰é™ï¼ŒDOM çš„æ•°é‡å°±åº”è¯¥ä¿æŒæ’å®šã€‚</li>
</ol>
<p>è¿™äº›ä»£ç æ¨¡å—å¯ä»¥ç›´æ¥ç»„åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå¤§å‹æ•°æ®åˆ†æçœ‹æ¿ä¸­ï¼š</p>
<ul>
<li>ä½¿ç”¨ <strong>WorkerPool</strong> åœ¨åå°æ‹‰å–å¹¶è§£æ 10MB çš„ JSON æ•°æ®ã€‚</li>
<li>è§£æå®Œæˆåï¼Œä½¿ç”¨ <strong>TimeSlicer</strong> å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼ˆæ ¼å¼åŒ–ã€è®¡ç®—ç¯æ¯”ï¼‰ã€‚</li>
<li>æœ€ç»ˆå±•ç¤ºæ—¶ï¼Œä½¿ç”¨ <strong>VirtualScroller</strong> å°†åä¸‡æ¡è¡¨æ ¼æ•°æ®æµç•…åœ°æ¸²æŸ“å‡ºæ¥ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GraphRAG å…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¸šåŠ¡è½åœ°]]></title>    <link>https://juejin.cn/post/7574041466710704171</link>    <guid>https://juejin.cn/post/7574041466710704171</guid>    <pubDate>2025-11-19T07:53:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574041466710704171" data-draft-id="7574230586970324998" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GraphRAG å…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¸šåŠ¡è½åœ°"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-19T07:53:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GraphRAG å…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¸šåŠ¡è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:53:32.000Z" title="Wed Nov 19 2025 07:53:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<blockquote>
<p>æœ¬æ–‡å…¨é¢è§£æå¾®è½¯å¼€æºçš„ GraphRAG é¡¹ç›®ï¼Œä»å®ƒæ˜¯ä»€ä¹ˆã€æ€ä¹ˆç”¨ã€å¦‚ä½•ä¼˜åŒ–è¿è¡Œæ€§èƒ½ã€ç”Ÿæˆå“ªäº›å…³é”®æ–‡ä»¶ï¼Œåˆ°å¦‚ä½•é›†æˆåˆ°ä½ è‡ªå·±çš„ä¸šåŠ¡ä¸­ã€‚å†…å®¹æ·±å…¥ä½†é€šä¿—ï¼Œé€‚åˆå¼€å‘è€…ã€æ•°æ®åˆ†æå¸ˆã€AIå·¥ç¨‹å¸ˆå­¦ä¹ å‚è€ƒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ GraphRAGï¼Ÿå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2>
<p>GraphRAGï¼ˆGraph Retrieval-Augmented Generationï¼‰æ˜¯å¾®è½¯ç ”ç©¶å›¢é˜Ÿå‘å¸ƒçš„å¼€æºé¡¹ç›®ï¼Œå®ƒæ˜¯ä¸€ç§â€œå›¾å¢å¼ºçš„æ£€ç´¢ç”Ÿæˆç³»ç»Ÿâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37b7a1d7ca2b42b4a9035287a82d4384~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=jBi5Qnxayfwimlb9brKhGTn2wlw%3D" alt="" loading="lazy"/></p>
<p>ä¸ä¼ ç»Ÿçš„RAGä¸åŒï¼ŒGraphRAGä¸ä»…ä»…æ˜¯â€œæ£€ç´¢+ç”Ÿæˆâ€ï¼Œå®ƒå¼•å…¥äº†å›¾ç»“æ„ï¼Œä½¿å¾—RAGå…·å¤‡ä»¥ä¸‹<strong>å…³é”®èƒ½åŠ›</strong>ï¼š</p>

























<table><thead><tr><th>èƒ½åŠ›</th><th>æè¿°</th></tr></thead><tbody><tr><td>ç»“æ„åŒ–ç†è§£</td><td>æ„å»ºæ–‡æ¡£å†…çš„<strong>å®ä½“-å…³ç³»å›¾è°±</strong></td></tr><tr><td>å…¨å±€æ´å¯Ÿ</td><td>å¯¹æ–‡æ¡£ä¸­çš„çŸ¥è¯†ç‚¹è¿›è¡Œç¤¾åŒºèšç±»å’Œè¯­ä¹‰æ€»ç»“</td></tr><tr><td>ç²¾ç¡®æŸ¥è¯¢</td><td>æä¾›<strong>å±€éƒ¨è¯­ä¹‰æœç´¢</strong>ä¸<strong>å…¨å±€çŸ¥è¯†æ€»ç»“</strong>ä¸¤ç§æ–¹å¼</td></tr><tr><td>å¯è§£é‡Šæ€§å¼º</td><td>æ¯ä¸ªç»“è®ºéƒ½å¯ä»¥å›æº¯åŸå§‹å®ä½“ã€æ–‡æœ¬ã€ç¤¾åŒº</td></tr></tbody></table>
<h3 data-id="heading-1">ä½¿ç”¨GraphRAGçš„å…¸å‹åœºæ™¯ï¼š</h3>
<ul>
<li><strong>é•¿æ–‡æ¡£é—®ç­”ï¼ˆæ–‡æ¡£QAï¼‰</strong> ï¼šå¦‚æ³•å¾‹æ–‡ä¹¦ã€æ”¿ç­–æ–‡ä»¶ã€è´¢æŠ¥ç­‰</li>
<li><strong>ç»“æ„åŒ–æ‘˜è¦ç”Ÿæˆ</strong>ï¼šéœ€è¦ä»æµ·é‡æ–‡æœ¬ä¸­æç‚¼ç»“æ„åŒ–çŸ¥è¯†</li>
<li><strong>çŸ¥è¯†å›¾è°±æ„å»º</strong>ï¼šä¸æ‰‹å†™è§„åˆ™ã€çº¯é LLMè‡ªåŠ¨æå–å…³ç³»</li>
<li><strong>ä¼ä¸šæ•°æ®æ´å¯Ÿ</strong>ï¼šå¯¹å…¬å¸èµ„æ–™ã€é¡¹ç›®æŠ¥å‘Šè¿›è¡Œç»“æ„å»ºæ¨¡å’Œåˆ†æ</li>
</ul>
<h3 data-id="heading-2">ğŸ†š GraphRAG vs ä¼ ç»Ÿ RAG vs Embedding Search</h3>















































<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»ŸEmbedding Search</th><th>æ™®é€šRAG</th><th><strong>GraphRAG</strong></th></tr></thead><tbody><tr><td>åŸºäºå‘é‡æ£€ç´¢</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>ä¸Šä¸‹æ–‡ç”Ÿæˆ</td><td>âŒ</td><td>âœ…</td><td>âœ…</td></tr><tr><td>çŸ¥è¯†å…³ç³»å»ºæ¨¡</td><td>âŒ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ç¤¾åŒºèšç±»åˆ†æ</td><td>âŒ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å…¨å±€ç»“æ„å›ç­”</td><td>âŒ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å¯è§£é‡Šæ€§</td><td>ä¸­</td><td>ä½</td><td><strong>é«˜</strong></td></tr></tbody></table>
<p>ç®€è¨€ä¹‹ï¼ŒGraphRAGæ˜¯å¯¹RAGçš„<strong>èƒ½åŠ›å‡çº§</strong>ï¼Œä¸ä»…å¯é—®ï¼Œè¿˜èƒ½è§£é‡Šâ€œçŸ¥è¯†æ˜¯å¦‚ä½•æ„æˆçš„â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4afa685742df4709b990c6e101318a94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=JKUNLl8AyOLpGctEczOtH9Jo32I%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">äºŒã€å¦‚ä½•è·‘é€š GraphRAGï¼Ÿä»0åˆ°1å®Œæ•´æµç¨‹</h2>
<h3 data-id="heading-4"/>
<h3 data-id="heading-5">1. å®‰è£…ç¯å¢ƒï¼ˆæ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰</h3>
<pre><code class="hljs">â€‹
pip install graphrag
ä¸å†éœ€è¦ Poetryã€æºç å…‹éš†ç­‰ç¹çæ­¥éª¤ã€‚GraphRAG å·²æ­£å¼å‘å¸ƒåˆ° PyPIã€‚
â€‹
</code></pre>
<hr/>
<h3 data-id="heading-6"/>
<h3 data-id="heading-7">2. åˆå§‹åŒ–é¡¹ç›®ç›®å½•</h3>
<p>ä½¿ç”¨å®˜æ–¹å‘½ä»¤å¿«é€Ÿåˆå§‹åŒ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">graphrag init --root ./ragtest
è¿™ä¸€æ­¥ä¼šç”Ÿæˆæ ‡å‡†çš„ç›®å½•ç»“æ„ï¼š
ragtest/
â”œâ”€â”€ settings.yaml Â  Â  Â 
<span class="hljs-comment"># ä¸»é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ prompts/ Â  Â  Â  Â  Â  
<span class="hljs-comment"># æç¤ºè¯æ¨¡æ¿</span>
â”œâ”€â”€ .
<span class="hljs-built_in">env</span>
<span class="hljs-comment"># å­˜æ”¾APIå¯†é’¥ï¼ˆéœ€æ‰‹åŠ¨å¡«å…¥ï¼‰</span>
â””â”€â”€ input/ Â  Â  Â  Â  Â  Â  
<span class="hljs-comment"># â—éœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼Œç”¨æ¥æ”¾ä½ è¦åˆ†æçš„æ–‡æ¡£</span>
â€‹
</code></pre>
<hr/>
<h3 data-id="heading-8"/>
<h3 data-id="heading-9">3. é…ç½® API å¯†é’¥</h3>
<p>ç¼–è¾‘Â <code>.env</code>Â æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Keyã€‚ä¾‹å¦‚ä½¿ç”¨ç¡…åŸºæµåŠ¨ APIï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">GRAPHRAG_API_KEY</span> = sk-your-siliconflow-api-key
åŒæ—¶ï¼Œåœ¨settings.yamlä¸­è®¾ç½® API æä¾›æ–¹ï¼š
</code></pre>

<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">models:</span>
<span class="hljs-section">default_chat_model:</span>
<span class="hljs-section">type: openai_chat</span>
<span class="hljs-section">api_base: https://api.siliconflow.cn/v1</span>
<span class="hljs-section">api_key: ${GRAPHRAG_API_KEY}</span>
<span class="hljs-section">model: deepseek-ai/DeepSeek-V3</span>
<span class="hljs-section">encoding_model: cl100k_base</span>
<span class="hljs-section">concurrent_requests: 3</span>
<span class="hljs-section">requests_per_minute: 30</span>
<span class="hljs-section">default_embedding_model:</span>
<span class="hljs-section">type: openai_embedding</span>
<span class="hljs-section">api_base: https://api.siliconflow.cn/v1</span>
<span class="hljs-section">api_key: ${GRAPHRAG_API_KEY}</span>
<span class="hljs-section">model: BAAI/bge-large-zh-v1.5</span>
<span class="hljs-section">encoding_model: cl100k_base</span>
<span class="hljs-section">concurrent_requests: 3</span>
<span class="hljs-section">requests_per_minute: 30</span>
</code></pre>
<h3 data-id="heading-10">4. æ·»åŠ æ–‡æ¡£åˆ° input ç›®å½•</h3>
<p>å°†ä½ éœ€è¦å¤„ç†çš„æ–‡æ¡£æ”¾å…¥Â <code>ragtest/input/</code>Â ç›®å½•ä¸­ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ragtest/
â”œâ”€â”€ settings.yaml Â  <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ prompts/ Â  Â  Â   <span class="hljs-comment"># æç¤ºè¯æ¨¡æ¿</span>
â”œâ”€â”€ input/ Â  Â  Â  Â   <span class="hljs-comment"># æ•°æ®è¾“å…¥ç›®å½•ï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰</span>
â”œâ”€â”€ .<span class="hljs-built_in">env</span> Â  Â  Â  Â  Â   <span class="hljs-comment"># å­˜å‚¨APIå¯†é’¥</span>
â””â”€â”€ output/ Â  Â  Â  Â  <span class="hljs-comment"># è‡ªåŠ¨ç”Ÿæˆçš„ç´¢å¼•ç»“æœ</span>
æ”¯æŒ.txt,.pdf,.docxç­‰å¤šç§æ ¼å¼ã€‚
</code></pre>
<hr/>
<h3 data-id="heading-11">5. è¿è¡Œç´¢å¼•æ„å»ºå‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ragtest
graphrag index --root .
è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹è¿‡ç¨‹ï¼š
</code></pre>
<ol>
<li>æ–‡æœ¬åˆ†å—</li>
<li>å®ä½“è¯†åˆ«ä¸å…³ç³»æå–ï¼ˆè°ƒç”¨å¤§æ¨¡å‹ï¼‰</li>
<li>æ„å»ºå®ä½“-å…³ç³»å›¾è°±</li>
<li>ç¤¾åŒºæ£€æµ‹ï¼ˆLeidenç®—æ³•ï¼‰</li>
<li>ç”Ÿæˆç¤¾åŒºæ‘˜è¦ï¼ˆè°ƒç”¨å¤§æ¨¡å‹ï¼‰</li>
<li>åµŒå…¥è®¡ç®— + å‘é‡ç´¢å¼•æ„å»º</li>
</ol>
<blockquote>
<p>è¿™ä¸ªè¿‡ç¨‹ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">6. è¿è¡ŒæŸ¥è¯¢å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># å…¨å±€æŸ¥è¯¢ï¼ˆé—®ç»“æ„åŒ–ä¸»é¢˜ï¼‰</span>
graphrag query --root . --method global <span class="hljs-string">"å…¬å¸çš„æ ¸å¿ƒé¡¹ç›®æ˜¯ä»€ä¹ˆï¼Ÿ"</span>
<span class="hljs-comment"># å±€éƒ¨æŸ¥è¯¢ï¼ˆé—®ç»†èŠ‚è¯­ä¹‰ï¼‰</span>
graphrag query --root . --method <span class="hljs-built_in">local</span> <span class="hljs-string">"å¼ ä¸‰çš„èŒè´£æ˜¯ä»€ä¹ˆï¼Ÿ"</span>
éœ€è¦åœ¨åŒ…å« settings.yaml é…ç½®æ–‡ä»¶çš„ç›®å½•ä¸­è¿è¡Œï¼Œä¹Ÿå°±æ˜¯ ragtest ç›®å½•ã€‚
<span class="hljs-built_in">cd</span> ragtest  <span class="hljs-comment"># åˆ‡æ¢åˆ°åŒ…å«settings.yamlçš„ç›®å½•</span>
ç¤ºä¾‹ï¼š
graphrag query --root . --method global --query <span class="hljs-string">"å¼ é£æ˜¯è°çš„å…„å¼Ÿ"</span>
Missing reports <span class="hljs-keyword">for</span> communities: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498] Â  Â  Â  Â 
SUCCESS: Global Search Response:
å¼ é£æ˜¯åˆ˜å¤‡çš„å…„å¼Ÿã€‚åœ¨ä¸‰å›½æ—¶æœŸï¼Œå¼ é£ä¸åˆ˜å¤‡ã€å…³ç¾½å¹¶ç§°ä¸ºâ€˜æ¡ƒå›­ä¸‰ç»“ä¹‰â€™ï¼Œä¸‰äººç»“ä¸ºå¼‚å§“å…„å¼Ÿï¼Œå…±åŒå‚ä¸äº†ä¸‰å›½çš„è¯¸å¤šå†å²äº‹ä»¶ã€‚[Data: Reports (1, 3)] Â  Â  Â 

</code></pre>
<hr/>
<h2 data-id="heading-13">ä¸‰ã€ragtestç›®å½•ç»“æ„è¯¦è§£</h2>
<p>ä¸€æ—¦è¿è¡Œå®Œç´¢å¼•å‘½ä»¤ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">ragtest/
â”œâ”€â”€ input/                          <span class="hljs-meta"># è¾“å…¥æ•°æ®</span>
â”‚   â””â”€â”€ three_kingdomspart.txt      <span class="hljs-meta"># æˆ‘ä»¬ç»™å®šçš„æ–‡æ¡£ï¼Œæ¯”å¦‚ä¸‰å›½æ¼”ä¹‰</span>
â”œâ”€â”€ output/                         <span class="hljs-meta"># ä¸»è¦è¾“å‡ºæ–‡ä»¶</span>
â”‚   â”œâ”€â”€ documents.parquet           <span class="hljs-meta"># æ–‡æ¡£è¡¨</span>
â”‚   â”œâ”€â”€ text_units.parquet          <span class="hljs-meta"># æ–‡æœ¬å•å…ƒè¡¨</span>
â”‚   â”œâ”€â”€ entities.parquet            <span class="hljs-meta"># å®ä½“è¡¨</span>
â”‚   â”œâ”€â”€ relationships.parquet       <span class="hljs-meta"># å…³ç³»è¡¨</span>
â”‚   â”œâ”€â”€ communities.parquet         <span class="hljs-meta"># ç¤¾åŒºè¡¨</span>
â”‚   â”œâ”€â”€ community_reports.parquet   <span class="hljs-meta"># ç¤¾åŒºæŠ¥å‘Šè¡¨</span>
â”‚   â”œâ”€â”€ covariates.parquet          <span class="hljs-meta"># åå˜é‡è¡¨ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â””â”€â”€ lancedb/                    <span class="hljs-meta"># å‘é‡æ•°æ®åº“</span>
â”‚       â””â”€â”€ <span class="hljs-literal">default</span>/                <span class="hljs-meta"># å­˜å‚¨æ–‡æœ¬åµŒå…¥å‘é‡</span>
â”œâ”€â”€ cache/                          <span class="hljs-meta"># ç¼“å­˜æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ base_text_units.parquet     <span class="hljs-meta"># åŸºç¡€æ–‡æœ¬å•å…ƒç¼“å­˜</span>
â”‚   â”œâ”€â”€ extracted_entities.parquet  <span class="hljs-meta"># æå–çš„å®ä½“ç¼“å­˜</span>
â”‚   â”œâ”€â”€ extracted_relationships.parquet <span class="hljs-meta"># æå–çš„å…³ç³»ç¼“å­˜</span>
â”‚   â””â”€â”€ ... (å…¶ä»–ä¸­é—´ç¼“å­˜æ–‡ä»¶)
â””â”€â”€ logs/                           <span class="hljs-meta"># è¿è¡Œæ—¥å¿—</span>
â””â”€â”€ indexing-engine.log         <span class="hljs-meta"># ç´¢å¼•è¿‡ç¨‹æ—¥å¿—</span>
</code></pre>
<hr/>
<h2 data-id="heading-14">å››ã€GraphRAGè¾“å‡ºæ–‡ä»¶è¯¦è§£</h2>
<h3 data-id="heading-15"/>
<h3 data-id="heading-16">1ï¸âƒ£Â <code>documents.parquet</code>ï¼ˆæ–‡æ¡£è¡¨ï¼‰</h3>
<ul>
<li>å­˜å‚¨åŸå§‹æ–‡æ¡£çš„å…ƒä¿¡æ¯ä¸å…¨æ–‡å†…å®¹</li>
<li>æ¯ä¸ªæ–‡æ¡£ä¸€ä¸ªæ¡ç›®ï¼Œè®°å½•å…¶Â <code>title</code>ã€<code>text</code>ã€<code>doc_id</code></li>
<li><code>å°±æ˜¯åŸå§‹æ–‡æ¡£çš„æ¡ç›®</code></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5504baf2c6974f3db0cbf160f8392fec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=tFoheLOqg16exALwLL5H%2F7423KM%3D" alt="" loading="lazy"/></p>
<p><code>2ï¸âƒ£</code>Â <code>text_units.parquet</code>ï¼ˆæ–‡æœ¬å•å…ƒè¡¨ï¼‰</p>
<ul>
<li>å°†æ¯ä¸ªæ–‡æ¡£åˆ†å—ï¼ˆchunkï¼‰åçš„åˆ‡ç‰‡å†…å®¹</li>
<li>æ¯ä¸€å—å¯¹åº”ä¸€æ¬¡LLMè°ƒç”¨ï¼ˆå¦‚å®ä½“æå–ï¼‰</li>
<li>å°±æ˜¯åˆ‡åˆ†åçš„æ¯ä¸€ä¸ªchunkçš„å†…å®¹</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eacad25c74ba4319aff921f604e81169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=8Ka8oJUAifnLyn63EZvXD5HZ3Wo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-17">3ï¸âƒ£Â <code>entities.parquet</code>ï¼ˆå®ä½“è¡¨ï¼‰</h3>
<ul>
<li>æ‰€æœ‰æ–‡æ¡£ä¸­æå–å‡ºçš„<strong>äººç‰©ã€ç»„ç»‡ã€åœ°ç‚¹ã€äº‹ä»¶</strong></li>
<li>åŒ…å«ï¼šå®ä½“åç§°ã€ç±»å‹ã€é¢‘ç‡ã€æè¿°ã€å‡ºç°åœ¨å“ªäº›å—ä¸­</li>
<li>æ˜¯çŸ¥è¯†å›¾è°±çš„"èŠ‚ç‚¹"</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8401aedd1fc4b3ea7017ae146740aa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=xV8Vav93VxeCV%2BIUU3KxO8pCZNs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">4ï¸âƒ£Â <code>relationships.parquet</code>ï¼ˆå…³ç³»è¡¨ï¼‰</h3>
<ul>
<li>æ¯å¯¹å®ä½“ä¹‹é—´çš„è¯­ä¹‰å…³ç³»ï¼ˆå¦‚â€œå¼ ä¸‰-ç®¡ç†-äº§å“éƒ¨â€ï¼‰</li>
<li>åŒ…å«æè¿°ã€å…³ç³»ç±»å‹ã€æƒé‡ç­‰</li>
<li>æ˜¯çŸ¥è¯†å›¾è°±çš„"è¾¹"</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c93116e8a9949eab283385a5d6a780d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=3cFcsrQ6v0%2BJvBGw%2B8FG00kcxic%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-19">5ï¸âƒ£Â <code>communities.parquet</code>ï¼ˆç¤¾åŒºè¡¨ï¼‰</h3>
<ul>
<li>åŸºäºå›¾è°±è¿è¡Œç¤¾åŒºæ£€æµ‹ç®—æ³•ï¼Œèšå‡ºâ€œä¸»é¢˜ç»„â€</li>
<li>æ¯ä¸ªç¤¾åŒºåŒ…å«ä¸€ç»„ç›¸å…³çš„å®ä½“ï¼ˆå¦‚æŸäº§å“çº¿å›¢é˜Ÿï¼‰</li>
<li>ä½œç”¨æ˜¯å‘ç°"ä¸»é¢˜é›†ç¾¤"</li>
<li><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d827a523ca04834af2d9a1a7d5787c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=v%2FGMQQ%2FxRHuY4GksiCjZx0P9VMo%3D" alt="" loading="lazy"/></li>
</ul>
<h3 data-id="heading-20">6ï¸âƒ£Â <code>community_reports.parquet</code>ï¼ˆç¤¾åŒºæŠ¥å‘Šè¡¨ï¼‰</h3>
<ul>
<li>å¯¹æ¯ä¸ªç¤¾åŒºï¼Œè°ƒç”¨LLMç”Ÿæˆçš„ç»“æ„åŒ–æ‘˜è¦</li>
<li>åŒ…æ‹¬æŠ¥å‘Šæ ‡é¢˜ã€æ‘˜è¦ã€ä¸»è¦å‘ç°</li>
<li>é¢å‘çš„æ˜¯ç”¨æˆ·ï¼Œç”¨çš„æ˜¯è‡ªç„¶è¯­è¨€</li>
<li>Qwenæ¨¡å‹å®¹æ˜“å¤±è´¥ï¼Œå¾—æ¢ä¸ªåˆé€‚çš„æ¨¡å‹</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2c1f2953fee4844be3c5d5013b3dce5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=ODalo1ZH5fUcNq%2B3yErUBls4OyE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-21">7ï¸âƒ£Â <code>lancedb/</code>ï¼ˆå‘é‡æ•°æ®åº“ï¼‰</h3>
<ul>
<li>æ¯ä¸ªæ–‡æœ¬å•å…ƒçš„å‘é‡è¡¨ç¤ºï¼Œç”¨äºå±€éƒ¨è¯­ä¹‰æœç´¢</li>
</ul>
<hr/>
<h2 data-id="heading-22">äº”ã€GraphRAGæ˜¯å¦ç”¨åˆ°GPUï¼Ÿç”¨çš„æ˜¯APIè¿˜æ˜¯æœ¬åœ°æ¨ç†ï¼Ÿ</h2>
<h3 data-id="heading-23">âœ… GraphRAG é»˜è®¤æ˜¯Â <strong>çº¯CPU + APIæ¶æ„</strong></h3>
<ul>
<li>å¤§æ¨¡å‹ï¼ˆLLMï¼‰çš„ç”Ÿæˆä»»åŠ¡ â†’ è°ƒç”¨è¿œç¨‹APIï¼ˆå¦‚OpenAIã€DeepSeekã€ç¡…åŸºæµåŠ¨ï¼‰</li>
<li>å‘é‡åµŒå…¥ â†’ è°ƒç”¨APIè¿”å›å‘é‡</li>
<li>å›¾è°±æ„å»ºä¸èšç±» â†’ æœ¬åœ°CPUå®Œæˆ</li>
</ul>
<blockquote>
<p>æ— éœ€å®‰è£…æœ¬åœ°å¤§æ¨¡å‹ï¼Œä¹Ÿä¸éœ€è¦GPUã€‚åªéœ€é…ç½®å¥½API Keyï¼Œå³å¯å…¨æµç¨‹è¿è¡Œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-24">å…­ã€å¦‚ä½•è®©GraphRAGè·‘å¾—æ›´å¿«ï¼Ÿæ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<p>è™½ç„¶GraphRAGä¸ä¾èµ–GPUï¼Œä½†å®ƒå¯¹ç½‘ç»œå’ŒAPIé€Ÿç‡éå¸¸æ•æ„Ÿã€‚</p>
<h3 data-id="heading-25">å¸¸è§å¯¼è‡´è¿è¡Œæ…¢çš„åŸå› ï¼š</h3>
<ol start="0">
<li><strong>æ–‡æœ¬åˆ†å—å¤ªå¤š</strong>ï¼ˆé»˜è®¤1200å­—ç¬¦ä¸€å—ï¼‰</li>
<li><strong>å¹¶å‘è¯·æ±‚å¤ªé«˜ï¼ŒAPIæœåŠ¡é™é€Ÿ</strong></li>
<li><strong>æå–çš„å®ä½“ç§ç±»å¤ªå¤šï¼ˆé»˜è®¤4ç±»ï¼‰</strong></li>
<li><strong>å¯ç”¨äº†å¤šè½®æå–æˆ–å¤§ç¤¾åŒºå¤„ç†</strong></li>
</ol>
<h3 data-id="heading-26">âœ… ä¼˜åŒ–å»ºè®®æ¸…å•ï¼š</h3>
<h4 data-id="heading-27">1. å‡å°æ–‡æœ¬å—å¤§å°ï¼Œé™ä½è¯·æ±‚é‡</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">chunks:</span>
  <span class="hljs-attr">size:</span> <span class="hljs-number">600</span>     <span class="hljs-comment"># é»˜è®¤1200ï¼Œå‡å°å¯ä»¥å‡å°‘æ¯æ¬¡Tokené‡</span>
  <span class="hljs-attr">overlap:</span> <span class="hljs-number">50</span>
</code></pre>
<h4 data-id="heading-28">2. é™åˆ¶å®ä½“ç±»å‹</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">extract_graph:</span>
  <span class="hljs-attr">entity_types:</span> [<span class="hljs-string">person</span>, <span class="hljs-string">organization</span>]
</code></pre>
<h4 data-id="heading-29">3. é™ä½å¹¶å‘å¹¶é™é€Ÿï¼ˆå°¤å…¶ç”¨ç¡…åŸºæµåŠ¨æ—¶ï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">models:</span>
  <span class="hljs-attr">default_chat_model:</span>
    <span class="hljs-attr">concurrent_requests:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">requests_per_minute:</span> <span class="hljs-number">30</span>
</code></pre>
<h4 data-id="heading-30">4. å¯ç”¨ç¼“å­˜</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">cache:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">file</span>
  <span class="hljs-attr">base_dir:</span> <span class="hljs-string">"cache"</span>
</code></pre>
<h4 data-id="heading-31">5. å…ˆç”¨å°æ–‡æ¡£æµ‹è¯•ï¼Œé€æ­¥æ‰©å¤§è§„æ¨¡</h4>
<h4 data-id="heading-32"/>
<h4 data-id="heading-33">è¿›ä¸€æ­¥çš„æ€§èƒ½ä¼˜åŒ–æ¸…å•</h4>
<h4 data-id="heading-34"/>













































<table><thead><tr><th>ä¼˜åŒ–ç‚¹</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Chunk Size &amp; Overlap è°ƒå‚</strong></td><td>â€¢ è‹¥ä¾›åº”å•†æŒ‰Â <em>token/min</em>Â è®¡è´¹/é™é€Ÿï¼Œ<strong>å‡å° chunk</strong>Â å¯è®©å•æ¬¡ token-loadâ†“ï¼Œé™ä½è¢«é™é€Ÿæ¦‚ç‡ï¼›ä½†è¯·æ±‚æ•°ä¼šå¢å¤šã€‚â€¢ è‹¥æŒ‰Â <em>req/min</em>Â é™é€Ÿï¼Œ<strong>å¢å¤§ chunk</strong>ï¼ˆ1500-2000 tokensï¼‰+Â <strong>overlap 50â†’20</strong>Â å¯ä»¥æ˜¾è‘—å‡å°‘è°ƒç”¨æ¬¡æ•°ã€‚</td><td>å¤§æ–‡ä»¶ / é™é€Ÿä¸¥æ ¼</td></tr><tr><td><strong>åœç”¨ Claim ä¸ Gleanings</strong></td><td>åœ¨Â <code>settings.yaml</code>ï¼š<code>claim_extraction.enabled: false``extract_graph.max_gleanings: 0</code></td><td>åªæƒ³è¦å®ä½“-å…³ç³»-ç¤¾åŒºæ—¶</td></tr><tr><td><strong>åˆ†é˜¶æ®µæ‰§è¡Œ</strong></td><td>å…ˆè·‘Â <code>graphrag index --root . --method embeddings</code>Â åªè®¡ç®—åµŒå…¥ï¼Œç¡®è®¤é€Ÿåº¦ OK åå†è·‘å®Œæ•´æµæ°´çº¿ã€‚</td><td>è¶…é•¿è¯­æ–™è¯•è·‘</td></tr><tr><td><strong>æœ¬åœ°åµŒå…¥æ¨¡å‹</strong></td><td>ç”¨Â <code>api_base: http://localhost:11434</code>Â + Ollama embeddingï¼ˆnomic-embedï¼‰å¯æŠŠ 60-70 %çš„ API è°ƒç”¨è½¬æœ¬åœ°ï¼Œé€Ÿåº¦å’Œæˆæœ¬åŒé™ã€‚</td><td>æœ‰ GPU / CPU å……è£•</td></tr><tr><td><strong>é€’å¢æ‰¹å¤„ç†</strong></td><td>åˆ©ç”¨Â <code>parallelization.stagger</code>ï¼ˆ0.3-0.5ï¼‰è®©è¯·æ±‚æ‰¹æ¬¡äº¤é”™ï¼Œæ›´å¹³æ»‘åœ°åˆ©ç”¨é™é¢ã€‚</td><td>ä¾›åº”å•†æ”¯æŒå¹¶å‘é«˜ä½†é™é€Ÿ</td></tr><tr><td><strong>æ–‡æœ¬é¢„æ¸…æ´—</strong></td><td>å»é™¤é¡µçœ‰é¡µè„šã€æ¨¡æ¿é‡å¤æ®µï¼Œå¯å‡å°‘ 10-30 % æ— æ•ˆ tokenã€‚</td><td>PDF æ‰¹é‡å¯¼å…¥</td></tr><tr><td><strong>é‡ç”¨ Prompt æ¨¡æ¿</strong></td><td>æŠŠé•¿ç³»ç»Ÿ prompt å†™è¿›Â <code>prompt_template:</code>Â æ–‡ä»¶å¹¶å¼•ç”¨ï¼Œå¯æ˜¾è‘—å‡å°æ¯æ¬¡ tokenã€‚</td><td>è‡ªå®šä¹‰ prompt å¾ˆé•¿æ—¶</td></tr></tbody></table>
<h4 data-id="heading-35"/>
<h4 data-id="heading-36"/>
<hr/>
<h2 data-id="heading-37">ä¸ƒã€æˆ‘æƒ³æ¥å…¥è‡ªå·±é¡¹ç›®ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ</h2>
<p>GraphRAGæ˜¯<strong>æ ‡å‡†è¾“å‡ºç»“æ„+è‡ªå®šä¹‰é…ç½®é©±åŠ¨</strong>çš„ç³»ç»Ÿï¼Œä½ åªéœ€è¦ï¼š</p>
<h3 data-id="heading-38">âœ… è°ƒæ•´é…ç½®æ–‡ä»¶Â <code>settings.yaml</code></h3>
<ul>
<li>å®ä½“ç±»å‹é€‚é…ä½ ä¸šåŠ¡é¢†åŸŸ</li>
<li>åˆ†å—ç­–ç•¥æŒ‰æ–‡æ¡£ç‰¹ç‚¹è°ƒæ•´</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">extract_graph:</span>
  <span class="hljs-attr">entity_types:</span> [<span class="hljs-string">person</span>, <span class="hljs-string">department</span>, <span class="hljs-string">project</span>]
  <span class="hljs-attr">prompt:</span> <span class="hljs-string">prompts/extract_business.txt</span>
<span class="hljs-attr">chunks:</span>
  <span class="hljs-attr">size:</span> <span class="hljs-number">1000</span>
  <span class="hljs-attr">overlap:</span> <span class="hljs-number">100</span>
</code></pre>
<h3 data-id="heading-39">âœ… ä¿®æ”¹æç¤ºè¯æ¨¡æ¿</h3>
<p>åœ¨Â <code>prompts/</code>Â ä¸­ç¼–å†™è‡ªå®šä¹‰æ¨¡æ¿ï¼Œå¦‚ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">è¯·ä»ä»¥ä¸‹æ–‡æœ¬ä¸­æå–ï¼š
<span class="hljs-deletion">- PERSON: å‘˜å·¥ã€å®¢æˆ·ã€åˆä½œä¼™ä¼´</span>
<span class="hljs-deletion">- DEPARTMENT: å…¬å¸å†…éƒ¨éƒ¨é—¨</span>
<span class="hljs-deletion">- PROJECT: é¡¹ç›®/äº§å“</span>
</code></pre>
<h3 data-id="heading-40">âœ… ä½¿ç”¨GraphRAGç”Ÿæˆç»“æ„åŒ–ç»“æœå¹¶æ¥å…¥ä½ ç³»ç»Ÿ</h3>
<p>ä½ å¯ä»¥å°†ç”Ÿæˆçš„Â <code>entities.parquetï¼Œ``relationships.parquetï¼Œ``community_reports.parquet</code>ä½œä¸ºä½ ç³»ç»Ÿçš„çŸ¥è¯†ç»“æ„ã€æ ‡ç­¾æºã€ç”šè‡³é—®ç­”åŸºç¡€ã€‚</p>
<hr/>
<h2 data-id="heading-41">âœ… æ€»ç»“</h2>

































<table><thead><tr><th>åŠŸèƒ½</th><th>GraphRAG</th></tr></thead><tbody><tr><td>æ–‡æ¡£ç»“æ„å»ºæ¨¡</td><td>âœ…</td></tr><tr><td>å®ä½“/å…³ç³»æŠ½å–</td><td>âœ…</td></tr><tr><td>ç¤¾åŒºèšç±»åˆ†æ</td><td>âœ…</td></tr><tr><td>å¤šå±‚æ¬¡é—®ç­”æ”¯æŒ</td><td>âœ…</td></tr><tr><td>æ— éœ€æœ¬åœ°éƒ¨ç½²å¤§æ¨¡å‹</td><td>âœ…</td></tr><tr><td>æ”¯æŒä¼ä¸šå®šåˆ¶</td><td>âœ…</td></tr></tbody></table>
<p>GraphRAG å°±åƒæ˜¯ä¸€ä¸ª<strong>è‡ªåŠ¨åŒ–çŸ¥è¯†å·¥å‚</strong>ï¼Œå¸®ä½ ä»æ— ç»“æ„æ–‡æœ¬ä¸­æç‚¼å‡ºæœ‰ç»“æ„çš„å›¾è°±å’Œæ´å¯Ÿã€‚åªè¦ä½ é…ç½®å¾—å½“ï¼Œå®ƒå¯ä»¥æ— ç¼é›†æˆåˆ°ä½ ä»»ä½•AIç›¸å…³çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ã€‚</p>
<hr/>
<p>ğŸ“ é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fgraphrag" target="_blank" title="https://github.com/microsoft/graphrag" ref="nofollow noopener noreferrer">github.com/microsoft/gâ€¦</a></p>
<p>ğŸ“– å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fgraphrag%3Ftab%3Dreadme-ov-file" target="_blank" title="https://github.com/microsoft/graphrag?tab=readme-ov-file" ref="nofollow noopener noreferrer">github.com/microsoft/gâ€¦</a></p>
<h2 data-id="heading-42">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go é‡è¯•æœºåˆ¶ç»ˆææŒ‡å—ï¼šåŸºäº go-retry æ‰“é€ å¯é å®¹é”™ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7574244766423007241</link>    <guid>https://juejin.cn/post/7574244766423007241</guid>    <pubDate>2025-11-19T08:09:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574244766423007241" data-draft-id="7574244766422990857" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go é‡è¯•æœºåˆ¶ç»ˆææŒ‡å—ï¼šåŸºäº go-retry æ‰“é€ å¯é å®¹é”™ç³»ç»Ÿ"/> <meta itemprop="keywords" content="Go,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-19T08:09:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹¼çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2418581314208279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go é‡è¯•æœºåˆ¶ç»ˆææŒ‡å—ï¼šåŸºäº go-retry æ‰“é€ å¯é å®¹é”™ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2418581314208279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹¼çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:09:53.000Z" title="Wed Nov 19 2025 08:09:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿã€API è°ƒç”¨ã€æ•°æ®åº“æ“ä½œç­‰åœºæ™¯ä¸­ï¼Œç½‘ç»œæŠ–åŠ¨ã€æœåŠ¡ä¸´æ—¶ä¸å¯ç”¨ç­‰é—®é¢˜æ—¶æœ‰å‘ç”Ÿã€‚é‡è¯•æœºåˆ¶ä½œä¸ºå®¹é”™è®¾è®¡çš„æ ¸å¿ƒæ‰‹æ®µï¼Œèƒ½æœ‰æ•ˆæå‡ç³»ç»Ÿç¨³å®šæ€§â€”â€”ä½†ä¸åˆç†çš„é‡è¯•ç­–ç•¥ï¼ˆå¦‚æ— é™åˆ¶é‡è¯•ã€å›ºå®šé—´éš”é‡è¯•ï¼‰å¯èƒ½å¯¼è‡´é›ªå´©æ•ˆåº”æˆ–èµ„æºè€—å°½ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æ <code>sethvargo/go-retry</code> è¿™ä¸ªè½»é‡ä¸”å¼ºå¤§çš„ Go é‡è¯•åº“ï¼Œå¸¦ä½ ä»åŸç†åˆ°å®è·µï¼Œæ„å»ºçµæ´»ã€å®‰å…¨ã€é«˜æ•ˆçš„é‡è¯•é€»è¾‘ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© go-retryï¼Ÿ</h2>
<p>Go æ ‡å‡†åº“å¹¶æœªæä¾›é‡è¯•ç›¸å…³çš„åŸç”Ÿæ”¯æŒï¼Œæ‰‹åŠ¨å®ç°é‡è¯•é€»è¾‘å¾€å¾€é¢ä¸´è¯¸å¤šé—®é¢˜ï¼š</p>
<ul>
<li>é‡å¤ç¼–ç ï¼šæ¯æ¬¡éœ€è¦é‡è¯•æ—¶éƒ½è¦å†™å¾ªç¯ã€ç¡çœ ã€é€€å‡ºæ¡ä»¶åˆ¤æ–­ï¼›</li>
<li>ç­–ç•¥åƒµåŒ–ï¼šéš¾ä»¥çµæ´»åˆ‡æ¢å›ºå®šé—´éš”ã€æŒ‡æ•°é€€é¿ç­‰é‡è¯•ç­–ç•¥ï¼›</li>
<li>é”™è¯¯å¤„ç†æ··ä¹±ï¼šæ— æ³•æ¸…æ™°åŒºåˆ†â€œå¯é‡è¯•é”™è¯¯â€å’Œâ€œä¸å¯é‡è¯•é”™è¯¯â€ï¼›</li>
<li>èµ„æºæ³„æ¼ï¼šå¿˜è®°ç»ˆæ­¢é‡è¯•å¯¼è‡´æ— é™å¾ªç¯ï¼Œæˆ–è¶…æ—¶æ§åˆ¶ä¸å½“ã€‚</li>
</ul>
<p>è€Œ <code>sethvargo/go-retry</code> å®Œç¾è§£å†³äº†è¿™äº›ç—›ç‚¹ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>è½»é‡æ— ä¾èµ–</strong>ï¼šçº¯ Go å®ç°ï¼Œä»£ç é‡å°‘ï¼Œæ— é¢å¤–ä¾èµ–ï¼Œæ¥å…¥æˆæœ¬æä½ï¼›</li>
<li><strong>ä¸°å¯Œçš„é‡è¯•ç­–ç•¥</strong>ï¼šå†…ç½®å›ºå®šé—´éš”ã€æŒ‡æ•°é€€é¿ã€æŠ–åŠ¨é€€é¿ç­‰å¸¸ç”¨ç­–ç•¥ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•ï¼›</li>
<li><strong>çµæ´»çš„ç»ˆæ­¢æ¡ä»¶</strong>ï¼šæ”¯æŒæœ€å¤§é‡è¯•æ¬¡æ•°ã€è¶…æ—¶æ—¶é—´ã€è‡ªå®šä¹‰é€€å‡ºåˆ¤æ–­ç­‰å¤šé‡ç»ˆæ­¢è§„åˆ™ï¼›</li>
<li><strong>ä¼˜é›…çš„é”™è¯¯å¤„ç†</strong>ï¼šæ¸…æ™°åŒºåˆ†é‡è¯•é”™è¯¯å’Œæœ€ç»ˆå¤±è´¥ï¼Œæ”¯æŒé”™è¯¯è¿‡æ»¤ï¼ˆä»…é‡è¯•ç‰¹å®šé”™è¯¯ï¼‰ï¼›</li>
<li><strong>ä¸Šä¸‹æ–‡æ”¯æŒ</strong>ï¼šæ·±åº¦é›†æˆ <code>context.Context</code>ï¼Œæ”¯æŒå–æ¶ˆä¿¡å·å’Œè¶…æ—¶æ§åˆ¶ï¼Œç¬¦åˆ Go æœ€ä½³å®è·µï¼›</li>
<li><strong>å¹¶å‘å®‰å…¨</strong>ï¼šæ ¸å¿ƒç»„ä»¶å¯å®‰å…¨åœ°åœ¨å¤šä¸ª goroutine ä¸­å¤ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€å¿«é€Ÿå…¥é—¨ï¼š5 åˆ†é’Ÿå®ç°åŸºç¡€é‡è¯•</h2>
<h3 data-id="heading-2">2.1 å®‰è£…ä¾èµ–</h3>
<p>é¦–å…ˆé€šè¿‡ <code>go get</code> å®‰è£…åº“ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">go get github.com/sethvargo/go-retry@latest
</code></pre>
<h3 data-id="heading-3">2.2 åŸºç¡€ç¤ºä¾‹ï¼šé‡è¯• HTTP è¯·æ±‚</h3>
<p>ä¸‹é¢ä»¥â€œé‡è¯•è°ƒç”¨ä¸€ä¸ªä¸ç¨³å®šçš„ APIâ€ä¸ºä¾‹ï¼Œå±•ç¤ºæœ€åŸºç¡€çš„é‡è¯•é€»è¾‘ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"net/http"</span>
	<span class="hljs-string">"time"</span>

	retry <span class="hljs-string">"github.com/sethvargo/go-retry"</span>
)

<span class="hljs-comment">// æ¨¡æ‹Ÿä¸ç¨³å®šçš„ API è°ƒç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">callUnstableAPI</span><span class="hljs-params">()</span></span> <span class="hljs-type">error</span> {
	resp, err := http.Get(<span class="hljs-string">"https://api.example.com/unstable"</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Println(<span class="hljs-string">"API è°ƒç”¨å¤±è´¥:"</span>, err)
		<span class="hljs-keyword">return</span> err <span class="hljs-comment">// ç½‘ç»œé”™è¯¯ï¼Œå¯é‡è¯•</span>
	}
	<span class="hljs-keyword">defer</span> resp.Body.Close()

	<span class="hljs-keyword">if</span> resp.StatusCode != http.StatusOK {
		fmt.Printf(<span class="hljs-string">"API è¿”å›é 200 çŠ¶æ€ç : %d\n"</span>, resp.StatusCode)
		<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"status code: %d"</span>, resp.StatusCode) <span class="hljs-comment">// é 200 å¯é‡è¯•</span>
	}

	fmt.Println(<span class="hljs-string">"API è°ƒç”¨æˆåŠŸ!"</span>)
	<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	<span class="hljs-comment">// 1. åˆ›å»ºä¸Šä¸‹æ–‡ï¼ˆæ”¯æŒè¶…æ—¶/å–æ¶ˆï¼‰</span>
	ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">30</span>*time.Second)
	<span class="hljs-keyword">defer</span> cancel()

	<span class="hljs-comment">// 2. å®šä¹‰é‡è¯•ç­–ç•¥ï¼šå›ºå®šé—´éš” 2 ç§’ï¼Œæœ€å¤šé‡è¯• 5 æ¬¡</span>
	<span class="hljs-comment">// ConstantBackoff(é—´éš”) + LimitMaxRetries(æœ€å¤§æ¬¡æ•°)</span>
	strategy := retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.ConstantBackoff(<span class="hljs-number">2</span>*time.Second))

	<span class="hljs-comment">// 3. æ‰§è¡Œé‡è¯•é€»è¾‘</span>
	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		err := callUnstableAPI()
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			<span class="hljs-comment">// æ ‡è®°é”™è¯¯ä¸ºâ€œå¯é‡è¯•â€ï¼Œè§¦å‘ä¸‹ä¸€æ¬¡é‡è¯•</span>
			<span class="hljs-keyword">return</span> retry.RetryableError(err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> <span class="hljs-comment">// æˆåŠŸåˆ™ç»ˆæ­¢é‡è¯•</span>
	})

	<span class="hljs-comment">// 4. å¤„ç†æœ€ç»ˆç»“æœ</span>
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"æ‰€æœ‰é‡è¯•å¤±è´¥: %v\n"</span>, err)
		<span class="hljs-keyword">return</span>
	}
	fmt.Println(<span class="hljs-string">"é‡è¯•æµç¨‹æ­£å¸¸ç»“æŸ"</span>)
}
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒæ¦‚å¿µè§£æ</h3>
<ol>
<li><strong>Strategyï¼ˆé‡è¯•ç­–ç•¥ï¼‰</strong>ï¼šå®šä¹‰â€œä½•æ—¶é‡è¯•â€ï¼Œå¦‚å›ºå®šé—´éš”ã€æŒ‡æ•°é€€é¿ç­‰ï¼Œæ˜¯ <code>go-retry</code> çš„æ ¸å¿ƒæ¥å£ï¼›</li>
<li><strong>RetryableError</strong>ï¼šåŒ…è£…é”™è¯¯ï¼Œæ ‡è®°è¯¥é”™è¯¯æ˜¯â€œå¯é‡è¯•â€çš„ï¼Œè‹¥è¿”å›æ™®é€šé”™è¯¯åˆ™ç›´æ¥ç»ˆæ­¢é‡è¯•ï¼›</li>
<li><strong>Context</strong>ï¼šä¼ é€’è¶…æ—¶ã€å–æ¶ˆä¿¡å·ï¼Œç¡®ä¿é‡è¯•é€»è¾‘èƒ½å“åº”å¤–éƒ¨æ§åˆ¶ï¼ˆå¦‚ç”¨æˆ·ä¸­æ–­ã€æœåŠ¡å…³é—­ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-5">ä¸‰ã€è¿›é˜¶ç”¨æ³•ï¼šæ‰“é€ ç”Ÿäº§çº§é‡è¯•é€»è¾‘</h2>
<h3 data-id="heading-6">3.1 é€‰æ‹©åˆé€‚çš„é‡è¯•ç­–ç•¥</h3>
<p><code>go-retry</code> å†…ç½®äº† 4 ç§å¸¸ç”¨ç­–ç•¥ï¼Œå¯æ ¹æ®åœºæ™¯ç»„åˆä½¿ç”¨ï¼š</p>
<h4 data-id="heading-7">1. å›ºå®šé—´éš”é‡è¯•ï¼ˆConstantBackoffï¼‰</h4>
<p>é€‚ç”¨äºæœåŠ¡æ¢å¤æ—¶é—´å¯é¢„æµ‹çš„åœºæ™¯ï¼ˆå¦‚æ•°æ®åº“é‡å¯ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ¯æ¬¡é‡è¯•é—´éš” 1 ç§’ï¼Œæœ€å¤šé‡è¯• 3 æ¬¡</span>
strategy := retry.WithMaxRetries(<span class="hljs-number">3</span>, retry.ConstantBackoff(<span class="hljs-number">1</span>*time.Second))
</code></pre>
<h4 data-id="heading-8">2. æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆExponentialBackoffï¼‰</h4>
<p>é€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯ï¼Œé¿å…é‡è¯•é£æš´ï¼ˆé—´éš”éšé‡è¯•æ¬¡æ•°æŒ‡æ•°å¢é•¿ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åˆå§‹é—´éš” 1 ç§’ï¼Œæœ€å¤§é—´éš” 10 ç§’ï¼Œæœ€å¤šé‡è¯• 5 æ¬¡</span>
<span class="hljs-comment">// é—´éš”ï¼š1s â†’ 2s â†’ 4s â†’ 8s â†’ 10sï¼ˆåç»­ä¿æŒ 10sï¼‰</span>
strategy := retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.ExponentialBackoff(<span class="hljs-number">1</span>*time.Second, <span class="hljs-number">10</span>*time.Second))
</code></pre>
<h4 data-id="heading-9">3. æŠ–åŠ¨é€€é¿ï¼ˆJitterï¼‰</h4>
<p>åœ¨æŒ‡æ•°é€€é¿åŸºç¡€ä¸Šæ·»åŠ éšæœºæŠ–åŠ¨ï¼Œè¿›ä¸€æ­¥åˆ†æ•£é‡è¯•è¯·æ±‚ï¼Œé¿å…â€œå³°å€¼åŒæ—¶é‡è¯•â€ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æŒ‡æ•°é€€é¿ + æŠ–åŠ¨ï¼Œåˆå§‹ 1sï¼Œæœ€å¤§ 10sï¼Œæœ€å¤š 5 æ¬¡</span>
strategy := retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.Jitter(retry.ExponentialBackoff(<span class="hljs-number">1</span>*time.Second, <span class="hljs-number">10</span>*time.Second), <span class="hljs-number">0.5</span>))
<span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŠ–åŠ¨å› å­ï¼ˆ0-1ï¼‰ï¼Œå› å­è¶Šå¤§ï¼Œéšæœºæ³¢åŠ¨è¶Šæ˜æ˜¾</span>
</code></pre>
<h4 data-id="heading-10">4. çº¿æ€§é€€é¿ï¼ˆLinearBackoffï¼‰</h4>
<p>é—´éš”éšé‡è¯•æ¬¡æ•°çº¿æ€§å¢é•¿ï¼ˆå¦‚ 1s â†’ 2s â†’ 3sï¼‰ï¼Œé€‚ç”¨äºæœåŠ¡æ¢å¤æ—¶é—´ç¼“æ…¢å¢é•¿çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åˆå§‹é—´éš” 1sï¼Œæ¯æ¬¡å¢åŠ  1sï¼Œæœ€å¤§é—´éš” 5sï¼Œæœ€å¤šé‡è¯• 4 æ¬¡</span>
strategy := retry.WithMaxRetries(<span class="hljs-number">4</span>, retry.LinearBackoff(<span class="hljs-number">1</span>*time.Second, <span class="hljs-number">1</span>*time.Second, <span class="hljs-number">5</span>*time.Second))
</code></pre>
<h3 data-id="heading-11">3.2 è¿‡æ»¤å¯é‡è¯•é”™è¯¯</h3>
<p>å®é™…åœºæ™¯ä¸­ï¼Œå¹¶éæ‰€æœ‰é”™è¯¯éƒ½éœ€è¦é‡è¯•ï¼ˆå¦‚å‚æ•°é”™è¯¯ã€404 ç­‰ï¼‰ï¼Œå¯é€šè¿‡ <code>retry.If</code> è¿‡æ»¤ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">30</span>*time.Second)
	<span class="hljs-keyword">defer</span> cancel()

	<span class="hljs-comment">// ä»…é‡è¯•â€œç½‘ç»œé”™è¯¯â€å’Œâ€œ5xx çŠ¶æ€ç é”™è¯¯â€</span>
	strategy := retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.ConstantBackoff(<span class="hljs-number">2</span>*time.Second))

	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		err := callUnstableAPI()
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			<span class="hljs-comment">// è‡ªå®šä¹‰è¿‡æ»¤é€»è¾‘ï¼šåˆ¤æ–­é”™è¯¯ç±»å‹æ˜¯å¦å¯é‡è¯•</span>
			<span class="hljs-keyword">if</span> isRetryableError(err) {
				<span class="hljs-keyword">return</span> retry.RetryableError(err)
			}
			<span class="hljs-keyword">return</span> err <span class="hljs-comment">// ä¸å¯é‡è¯•é”™è¯¯ï¼Œç›´æ¥ç»ˆæ­¢</span>
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
	})

	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥: %v\n"</span>, err)
	}
}

<span class="hljs-comment">// å®šä¹‰å¯é‡è¯•é”™è¯¯çš„åˆ¤æ–­é€»è¾‘</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isRetryableError</span><span class="hljs-params">(err <span class="hljs-type">error</span>)</span></span> <span class="hljs-type">bool</span> {
	<span class="hljs-comment">// ç½‘ç»œé”™è¯¯ï¼ˆå¦‚è¿æ¥è¶…æ—¶ã€æ‹’ç»è¿æ¥ï¼‰</span>
	<span class="hljs-keyword">if</span> _, ok := err.(*http.Error); ok {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
	}
	<span class="hljs-comment">// 5xx çŠ¶æ€ç é”™è¯¯</span>
	<span class="hljs-keyword">if</span> err.Error()[:<span class="hljs-number">3</span>] == <span class="hljs-string">"500"</span> || err.Error()[:<span class="hljs-number">3</span>] == <span class="hljs-string">"503"</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
	}
	<span class="hljs-comment">// å…¶ä»–é”™è¯¯ï¼ˆå¦‚ 400ã€404ï¼‰ä¸å¯é‡è¯•</span>
	<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<h3 data-id="heading-12">3.3 ç»“åˆè¶…æ—¶å’Œå–æ¶ˆä¿¡å·</h3>
<p>é€šè¿‡ <code>context</code> å®ç°å¤šé‡æ§åˆ¶ï¼šè¶…æ—¶æ—¶é—´ï¼ˆæ•´ä½“é‡è¯•æµç¨‹çš„æœ€å¤§è€—æ—¶ï¼‰ã€æ‰‹åŠ¨å–æ¶ˆï¼ˆå¦‚ç”¨æˆ·ä¸­æ–­ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	<span class="hljs-comment">// 1. è®¾ç½®æ•´ä½“è¶…æ—¶ 15 ç§’</span>
	ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">15</span>*time.Second)
	<span class="hljs-keyword">defer</span> cancel()

	<span class="hljs-comment">// 2. å¯åŠ¨ä¸€ä¸ª goroutineï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ‰‹åŠ¨å–æ¶ˆï¼ˆ5 ç§’åï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		time.Sleep(<span class="hljs-number">5</span> * time.Second)
		fmt.Println(<span class="hljs-string">"ç”¨æˆ·æ‰‹åŠ¨å–æ¶ˆé‡è¯•"</span>)
		cancel()
	}()

	<span class="hljs-comment">// 3. é‡è¯•ç­–ç•¥ï¼šæŒ‡æ•°é€€é¿ï¼Œæœ€å¤š 10 æ¬¡ï¼ˆä½†ä¼šè¢«è¶…æ—¶/å–æ¶ˆä¸­æ–­ï¼‰</span>
	strategy := retry.WithMaxRetries(<span class="hljs-number">10</span>, retry.ExponentialBackoff(<span class="hljs-number">1</span>*time.Second, <span class="hljs-number">5</span>*time.Second))

	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-comment">// æ£€æŸ¥ä¸Šä¸‹æ–‡æ˜¯å¦å·²å–æ¶ˆ/è¶…æ—¶</span>
		<span class="hljs-keyword">select</span> {
		<span class="hljs-keyword">case</span> &lt;-ctx.Done():
			<span class="hljs-keyword">return</span> ctx.Err() <span class="hljs-comment">// ä¼ é€’å–æ¶ˆä¿¡å·</span>
		<span class="hljs-keyword">default</span>:
		}

		<span class="hljs-keyword">return</span> retry.RetryableError(callUnstableAPI())
	})

	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"é‡è¯•ç»ˆæ­¢: %v\n"</span>, err) <span class="hljs-comment">// å¯èƒ½æ˜¯è¶…æ—¶æˆ–å–æ¶ˆé”™è¯¯</span>
	}
}
</code></pre>
<h3 data-id="heading-13">3.4 è‡ªå®šä¹‰é‡è¯•ç­–ç•¥</h3>
<p>å¦‚æœå†…ç½®ç­–ç•¥ä¸æ»¡è¶³éœ€æ±‚ï¼Œå¯é€šè¿‡å®ç° <code>retry.Strategy</code> æ¥å£è‡ªå®šä¹‰ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è‡ªå®šä¹‰ç­–ç•¥ï¼šå‰ 3 æ¬¡é—´éš” 1 ç§’ï¼Œä¹‹åé—´éš” 3 ç§’</span>
<span class="hljs-keyword">type</span> CustomStrategy <span class="hljs-keyword">struct</span> {
	maxRetries <span class="hljs-type">int</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *CustomStrategy)</span></span> NextRetry(ctx context.Context, attempt <span class="hljs-type">int</span>) (time.Duration, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// attempt æ˜¯å·²é‡è¯•æ¬¡æ•°ï¼ˆä» 0 å¼€å§‹ï¼‰</span>
	<span class="hljs-keyword">if</span> attempt &gt;= s.maxRetries {
		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, retry.ErrMaxRetriesExceeded <span class="hljs-comment">// è¾¾åˆ°æœ€å¤§æ¬¡æ•°ï¼Œç»ˆæ­¢</span>
	}

	<span class="hljs-comment">// å‰ 3 æ¬¡é—´éš” 1sï¼Œä¹‹å 3s</span>
	<span class="hljs-keyword">if</span> attempt &lt; <span class="hljs-number">3</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span> * time.Second, <span class="hljs-literal">nil</span>
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">3</span> * time.Second, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ç­–ç•¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	ctx := context.Background()
	strategy := &amp;CustomStrategy{maxRetries: <span class="hljs-number">5</span>}

	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-keyword">return</span> retry.RetryableError(callUnstableAPI())
	})
}
</code></pre>
<h3 data-id="heading-14">3.5 é‡è¯•è¿‡ç¨‹ç›‘æ§</h3>
<p>é€šè¿‡ <code>retry.WithCallback</code> è®°å½•é‡è¯•è¿‡ç¨‹ï¼ˆå¦‚æ—¥å¿—ã€æŒ‡æ ‡ä¸ŠæŠ¥ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	ctx := context.Background()

	<span class="hljs-comment">// æ·»åŠ å›è°ƒå‡½æ•°ï¼Œç›‘æ§æ¯æ¬¡é‡è¯•</span>
	strategy := retry.WithCallback(
		retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.ConstantBackoff(<span class="hljs-number">2</span>*time.Second)),
		<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, attempt <span class="hljs-type">int</span>, err <span class="hljs-type">error</span>, next time.Duration)</span></span> {
			fmt.Printf(<span class="hljs-string">"ç¬¬ %d æ¬¡é‡è¯•å¤±è´¥: %vï¼Œä¸‹æ¬¡é‡è¯•é—´éš” %v\n"</span>, attempt+<span class="hljs-number">1</span>, err, next)
			<span class="hljs-comment">// æ­¤å¤„å¯æ·»åŠ æŒ‡æ ‡ä¸ŠæŠ¥ï¼ˆå¦‚ Prometheus è®¡æ•°å™¨ï¼‰</span>
			<span class="hljs-comment">// retryTotal.WithLabelValues("api").Inc()</span>
		},
	)

	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-keyword">return</span> retry.RetryableError(callUnstableAPI())
	})
}
</code></pre>
<h2 data-id="heading-15">å››ã€æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—</h2>
<h3 data-id="heading-16">4.1 æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>æ˜ç¡®å¯é‡è¯•åœºæ™¯</strong>ï¼šä»…å¯¹â€œæš‚æ—¶æ€§é”™è¯¯â€é‡è¯•ï¼ˆå¦‚ç½‘ç»œæŠ–åŠ¨ã€5xx æœåŠ¡é”™è¯¯ã€æ•°æ®åº“é”ç­‰å¾…ï¼‰ï¼Œé¿å…å¯¹â€œæ°¸ä¹…æ€§é”™è¯¯â€ï¼ˆå¦‚å‚æ•°é”™è¯¯ã€404ï¼‰é‡è¯•ï¼›</li>
<li><strong>æ§åˆ¶é‡è¯•å¼ºåº¦</strong>ï¼šç»“åˆ <code>WithMaxRetries</code> å’Œ <code>context.WithTimeout</code>ï¼Œé¿å…æ— é™é‡è¯•å¯¼è‡´èµ„æºè€—å°½ï¼›</li>
<li><strong>ä½¿ç”¨é€€é¿+æŠ–åŠ¨</strong>ï¼šé«˜å¹¶å‘åœºæ™¯ä¼˜å…ˆé€‰æ‹©â€œæŒ‡æ•°é€€é¿+æŠ–åŠ¨â€ï¼Œå‡å°‘é‡è¯•é£æš´å¯¹ä¸‹æ¸¸æœåŠ¡çš„å‹åŠ›ï¼›</li>
<li><strong>é‡è¯•å‰æ£€æŸ¥ä¸Šä¸‹æ–‡</strong>ï¼šåœ¨é‡è¯•å‡½æ•°ä¸­ä¼˜å…ˆæ£€æŸ¥ <code>ctx.Done()</code>ï¼Œç¡®ä¿èƒ½åŠæ—¶å“åº”å–æ¶ˆ/è¶…æ—¶ä¿¡å·ï¼›</li>
<li><strong>ä¸è¦é‡è¯•å¹‚ç­‰æ“ä½œ</strong>ï¼šè‹¥æ“ä½œéå¹‚ç­‰ï¼ˆå¦‚é‡å¤åˆ›å»ºè®¢å•ï¼‰ï¼Œéœ€å…ˆä¿è¯æ¥å£å¹‚ç­‰æ€§ï¼Œæˆ–é€šè¿‡å”¯ä¸€æ ‡è¯†é¿å…é‡å¤æ‰§è¡Œï¼›</li>
<li><strong>è®°å½•é‡è¯•æ—¥å¿—</strong>ï¼šé€šè¿‡ <code>WithCallback</code> è®°å½•é‡è¯•æ¬¡æ•°ã€é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</li>
</ol>
<h3 data-id="heading-17">4.2 å¸¸è§å‘ç‚¹</h3>
<ol>
<li><strong>å¿˜è®°æ ‡è®° RetryableError</strong>ï¼šè‹¥è¿”å›æ™®é€šé”™è¯¯ï¼Œé‡è¯•ä¼šç›´æ¥ç»ˆæ­¢ï¼Œéœ€ç¡®ä¿å¯é‡è¯•é”™è¯¯è¢« <code>retry.RetryableError</code> åŒ…è£…ï¼›</li>
<li><strong>å¿½ç•¥ä¸Šä¸‹æ–‡å–æ¶ˆ</strong>ï¼šæœªåœ¨é‡è¯•å‡½æ•°ä¸­æ£€æŸ¥ <code>ctx.Done()</code>ï¼Œå¯èƒ½å¯¼è‡´é‡è¯•é€»è¾‘æ— æ³•åŠæ—¶ç»ˆæ­¢ï¼›</li>
<li><strong>é‡è¯•ç­–ç•¥è¿‡äºæ¿€è¿›</strong>ï¼šå›ºå®šé—´éš”+é«˜é‡è¯•æ¬¡æ•°ï¼Œå¯èƒ½åŠ å‰§ä¸‹æ¸¸æœåŠ¡å‹åŠ›ï¼Œå¼•å‘é›ªå´©ï¼›</li>
<li><strong>æœªå¤„ç†é‡è¯•ä¸­çš„èµ„æºæ³„æ¼</strong>ï¼šå¦‚é‡è¯• HTTP è¯·æ±‚æ—¶æœªå…³é—­ <code>resp.Body</code>ï¼Œéœ€åœ¨ <code>defer</code> ä¸­ç¡®ä¿èµ„æºé‡Šæ”¾ï¼›</li>
<li><strong>æ··æ·†â€œé‡è¯•æ¬¡æ•°â€å’Œâ€œå°è¯•æ¬¡æ•°â€</strong>ï¼š<code>WithMaxRetries(5)</code> è¡¨ç¤ºâ€œæœ€å¤šé‡è¯• 5 æ¬¡â€ï¼Œå³â€œæ€»å…±å°è¯• 6 æ¬¡â€ï¼ˆåˆå§‹ 1 æ¬¡ + é‡è¯• 5 æ¬¡ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-18">äº”ã€æ€»ç»“</h2>
<p><code>sethvargo/go-retry</code> ä»¥å…¶è½»é‡ã€çµæ´»ã€è´´åˆ Go ç”Ÿæ€çš„è®¾è®¡ï¼Œæˆä¸º Go è¯­è¨€é‡è¯•æœºåˆ¶çš„é¦–é€‰åº“ã€‚é€šè¿‡æœ¬æ–‡çš„è®²è§£ï¼Œä½ å¯ä»¥æŒæ¡ï¼š</p>
<ul>
<li>åŸºç¡€é‡è¯•é€»è¾‘çš„å¿«é€Ÿå®ç°ï¼›</li>
<li>å¤šç§é‡è¯•ç­–ç•¥çš„é€‰å‹ä¸ç»„åˆï¼›</li>
<li>è¿‡æ»¤å¯é‡è¯•é”™è¯¯ã€ç›‘æ§é‡è¯•è¿‡ç¨‹ã€å“åº”å–æ¶ˆä¿¡å·ç­‰è¿›é˜¶ç”¨æ³•ï¼›</li>
<li>ç”Ÿäº§ç¯å¢ƒä¸­çš„æœ€ä½³å®è·µä¸é¿å‘è¦ç‚¹ã€‚</li>
</ul>
<p>é‡è¯•æœºåˆ¶æ˜¯ç³»ç»Ÿå®¹é”™èƒ½åŠ›çš„åŸºç¡€ï¼Œä½†å®ƒä¸æ˜¯é“¶å¼¹â€”â€”éœ€ç»“åˆä¸šåŠ¡åœºæ™¯åˆç†è®¾è®¡ç­–ç•¥ï¼ŒåŒæ—¶æ­é…ç†”æ–­ã€é™æµã€é™çº§ç­‰æœºåˆ¶ï¼Œæ‰èƒ½æ„å»ºçœŸæ­£é«˜å¯ç”¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚å¦‚æœä½ æ­£åœ¨å¼€å‘éœ€è¦å®¹é”™çš„ Go åº”ç”¨ï¼Œä¸å¦¨è¯•è¯• <code>go-retry</code>ï¼Œå®ƒä¼šè®©é‡è¯•é€»è¾‘çš„ç¼–å†™å˜å¾—ç®€æ´è€Œå¯é ã€‚</p>
<h2 data-id="heading-19">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsethvargo%2Fgo-retry" target="_blank" title="https://github.com/sethvargo/go-retry" ref="nofollow noopener noreferrer">go-retry å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpkg.go.dev%2Fcontext" target="_blank" title="https://pkg.go.dev/context" ref="nofollow noopener noreferrer">Go å®˜æ–¹ Context æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmartinfowler.com%2Farticles%2Fpatterns-of-distributed-systems%2F" target="_blank" title="https://martinfowler.com/articles/patterns-of-distributed-systems/" ref="nofollow noopener noreferrer">åˆ†å¸ƒå¼ç³»ç»Ÿå®¹é”™è®¾è®¡åŸåˆ™</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„ starship ç»ˆç«¯é…ç½®]]></title>    <link>https://juejin.cn/post/7573952825953484863</link>    <guid>https://juejin.cn/post/7573952825953484863</guid>    <pubDate>2025-11-19T01:12:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573952825953484863" data-draft-id="7568461955015933971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„ starship ç»ˆç«¯é…ç½®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-19T01:12:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Legend80s"/> <meta itemprop="url" content="https://juejin.cn/user/2568105753839790"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„ starship ç»ˆç«¯é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2568105753839790/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Legend80s
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T01:12:46.000Z" title="Wed Nov 19 2025 01:12:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šä¸€ç¯‡æ–‡ç« ã€Š<strong>åˆ«å†ç¤¾æ­»äº†ï¼<code>includeIf</code> ä¸€æ‹›æå®š Git æäº¤è€…ä¿¡æ¯é”™ä¹±ï¼Œå®ˆæŠ¤ä½ çš„é‚®ç®±éšç§</strong>ã€‹æˆ‘ä»¬é€šè¿‡å·§å¦™çš„ git é…ç½®è®©è¿›å…¥ä¸åŒç›®å½•èƒ½è‡ªåŠ¨åˆ‡æ¢å¯¹åº”çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œä»æ ¹æºä¸Šæœç»äº† git æäº¤ä½œè€…æ··ä¹±é—®é¢˜ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬ç›´æ¥è®© git ç”¨æˆ·åå’Œé‚®ç®±åœ¨ç»ˆç«¯æ˜¾ç¤ºï¼Œæ›´åŠ ä¸€ç›®äº†ç„¶ï¼Œé…ç½®æ•ˆæœå¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">â¯ nextjs-ecommerce on ğŸŒ± master [â‡¡] via <span class="hljs-title class_">Node</span>.<span class="hljs-property">js</span> v24<span class="hljs-number">.9</span><span class="hljs-number">.0</span> ğŸ‘¨ legend80s ğŸ’Œ legend80s<span class="hljs-meta">@example</span>.<span class="hljs-property">com</span>
</code></pre>
<p>å¦‚æœä½ æŒ‰ç…§ä¹‹å‰çš„æ–‡ç« é…ç½®è¿‡ git è‡ªåŠ¨åˆ‡æ¢ç”¨æˆ·åï¼Œç°åœ¨åˆ‡æ¢åˆ°å·¥ä½œç›®å½•å¯ä»¥çœ‹åˆ°ç”¨æˆ·åé‚®ç®±ä¹Ÿéšç€æ”¹å˜å¹¶ç›´è§‚å±•ç¤ºåœ¨ç»ˆç«¯ä¸Šã€‚éå¸¸ NICEï¼</p>
<h2 data-id="heading-0">å®‰è£… starship</h2>
<p>è¯¦è§å®˜ç½‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fstarship.rs%2F" target="_blank" title="https://starship.rs/" ref="nofollow noopener noreferrer">starship.rs/</a> ç•¥ã€‚</p>
<h2 data-id="heading-1">é…ç½®</h2>
<p>å®Œæ•´é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-comment"># ~/.config/starship.toml</span>
<span class="hljs-comment"># https://starship.rs/config/</span>

<span class="hljs-comment"># Get editor completions based on the config schema</span>
<span class="hljs-attr">"$schema"</span> = <span class="hljs-string">'https://starship.rs/config-schema.json'</span>

<span class="hljs-comment"># Inserts a blank line between shell prompts</span>
<span class="hljs-attr">add_newline</span> = <span class="hljs-literal">true</span>

<span class="hljs-section">[git_branch]</span>
<span class="hljs-attr">symbol</span> = <span class="hljs-string">'ğŸŒ± '</span>

<span class="hljs-section">[nodejs]</span>
<span class="hljs-attr">format</span> = <span class="hljs-string">'via [Node.js $version](bold green) '</span>

<span class="hljs-section">[custom.git_user]</span>
<span class="hljs-attr">command</span> = <span class="hljs-string">"echo \"ğŸ‘¨ $(git config user.name) ğŸ’Œ $(git config user.email)\""</span>
<span class="hljs-attr">shell</span> = [<span class="hljs-string">"bash"</span>, <span class="hljs-string">"--noprofile"</span>, <span class="hljs-string">"--norc"</span>]
<span class="hljs-attr">style</span> = <span class="hljs-string">"bold yellow"</span>
<span class="hljs-attr">when</span> = <span class="hljs-string">"git rev-parse --is-inside-work-tree 2&gt;/dev/null"</span>
</code></pre>
<h3 data-id="heading-2">è§£é‡Š</h3>
<ul>
<li><code>"$schema" = 'https://starship.rs/config-schema.json'</code> æ˜¯ä¸ºäº†è®©æ¥ä¸‹æ¥çš„é…ç½®èƒ½è‡ªåŠ¨è¡¥å…¨ã€‚</li>
<li><code>add_newline = true</code> å‰åå‘½ä»¤è¡Œä¹‹é—´å¢åŠ ç©ºè¡Œï¼Œç»™äºˆå‘¼å¸ç©ºé—´ã€‚</li>
<li><code>[git_branch] symbol = 'ğŸŒ±</code> ç»™åˆ†æ”¯å¢åŠ  emojiï¼Œå¯ä»¥æ¢æˆä»»æ„ä½ å–œæ¬¢çš„ emojiã€‚<em>å¦‚æœä¸æ”¹å¿…é¡»å®‰è£… nerd å­—ä½“ï¼Œå¦åˆ™æ˜¾ç¤ºä¹±ç ã€‚</em></li>
<li><code>format = 'via [Node.js $version](bold green) '</code> ç»¿è‰²åŠ ç²—æ˜¾ç¤º Node.js ç‰ˆæœ¬å·ï¼š<strong>Via Node.js v24.x.x</strong>ã€‚ä½ å¯ä»¥æ”¹æˆä»»æ„ä»£è¡¨ Node.js çš„ emoji æ¯”å¦‚ ğŸŸ¢ã€‚<em>å¦‚æœä¸æ”¹å¿…é¡»å®‰è£… nerd å­—ä½“ï¼Œå¦åˆ™æ˜¾ç¤ºä¹±ç ã€‚</em>
<ul>
<li>ç®€æ´é…ç½®ï¼š<code>format = '[ğŸŸ¢ $version](bold green) '</code>ã€‚æ•ˆæœï¼š <code>nextjs-ecommerce on ğŸŒ± master [â‡¡] ğŸŸ¢ v24.9.0 </code></li>
</ul>
</li>
</ul>
<p>æ¥ä¸‹æ¥æ˜¯é…ç½® git ç”¨æˆ·åå’Œé‚®ç®±ï¼Œä¹Ÿæ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚</p>
<h4 data-id="heading-3">æ˜¾ç¤º git user å’Œ email</h4>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[custom.git_user]</span>
<span class="hljs-attr">command</span> = <span class="hljs-string">"echo \"ğŸ‘¨ $(git config user.name) ğŸ’Œ $(git config user.email)\""</span>
<span class="hljs-attr">shell</span> = [<span class="hljs-string">"bash"</span>, <span class="hljs-string">"--noprofile"</span>, <span class="hljs-string">"--norc"</span>]
<span class="hljs-attr">style</span> = <span class="hljs-string">"bold yellow"</span>
<span class="hljs-comment"># format = "[$output]($style) "</span>
<span class="hljs-attr">when</span> = <span class="hljs-string">"git rev-parse --is-inside-work-tree 2&gt;/dev/null"</span>
</code></pre>
<h5 data-id="heading-4">è§£é‡Š</h5>
<p>custom è¡¨ç¤ºè‡ªå®šä¹‰é…ç½®</p>
<ul>
<li><code>command</code> è¡¨ç¤º starship å°†æ‰§è¡Œè¯¥å‘½ä»¤æ¥å±•ç¤ºä¿¡æ¯ã€‚æˆ‘ä»¬é…ç½®<code>echo \"ğŸ‘¨ $(git config user.name) ğŸ’Œ $(git config user.email)\"</code>è®©å…¶æ˜¾ç¤ºç¾è§‚çš„ï¼š<strong><code>ğŸ‘¨ username ğŸ’Œ foo@example.com</code></strong>ã€‚</li>
<li><code>shell</code>ï¼šé‡‡ç”¨ä½•ç§è§£é‡Šå™¨è¿è¡Œ <code>command</code>ã€‚æŒ‡å®š bashï¼Œ<strong>ä¸ºäº†å…¼å®¹æ€§éœ€æŒ‡å®š</strong>å¦åˆ™ trae ä¸­å°†ä¸å±•ç¤ºï¼Œå› ä¸º trae é»˜è®¤ä½¿ç”¨ PowerShellã€‚</li>
<li><code>format</code>ï¼šstarship å›ºå®šæ ¼å¼ï¼Œ<code>$output</code> æ˜¯ <code>command</code> çš„è¾“å‡ºï¼Œ<code>$style</code> æ˜¯ <code>style</code> å†…å®¹ã€‚<em>å¯ä¸å†™</em>ã€‚</li>
<li><code>style</code>ï¼šåŠ ç²—é»„è‰²ï¼Œå› ä¸ºè¿™ä¸ªä¿¡æ¯æ¯”è¾ƒé‡è¦ï¼Œå½“ç„¶ä½ å¯ä»¥æ¢æˆå…¶ä»–é¢œè‰²ï¼Œæ¯”å¦‚ red æˆ– purpleï¼Œæˆ–ä½¿ç”¨å…¶ä»–æ ·å¼æ¯”å¦‚ underlineã€‚æ›´å¤šè¯¦è§å‚è€ƒé“¾æ¥ã€‚</li>
<li><code>when = "..."</code>ï¼šä½•æ—¶å±•ç¤ºï¼Œ<code>"true"</code> åˆ™å§‹ç»ˆå±•ç¤ºã€‚<code>git rev-parse --is-inside-work-tree 2&gt;/dev/null</code> åªåœ¨<strong>Git ä»“åº“ç›®å½•å†…ï¼ˆgit init è¿‡ï¼‰</strong> æ‰æ˜¾ç¤ºè¿™ä¸ªï¼Œ<code>2&gt;/dev/null</code> è¡¨ç¤ºå¿½ç•¥æŠ¥é”™ï¼ŒæŠ¥é”™ä¸è¾“å‡º true è‡ªç„¶ä¹Ÿä¸å±•ç¤ºã€‚</li>
</ul>
<p>æœ€ç»ˆæ•ˆæœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e73303497c345b29e340169d12c0fe5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVnZW5kODBz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119566&amp;x-signature=S%2F%2FF9ATgHGRLdrgUaNjHxShf68Q%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœå¤§å®¶è§‰å¾— Node.js ç‰ˆæœ¬å·å’Œç”¨æˆ·åä¹‹é—´ç©ºç™½å¤ªå¤šï¼Œå¯ä»¥ä½¿ç”¨ <code>\b</code> å›é€€ç¬¦ã€‚</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ command = "echo \"\bğŸ‘¨ $(git config user.name) ğŸ’Œ $(git config user.email)\""</span>
</code></pre>
<p>å¦‚æœåœ¨å°å±å¹•ä¸Šå¯æ”¹æˆåªæ˜¾ç¤ºç”¨æˆ·åï¼ˆè¦æ˜¯èƒ½è‡ªé€‚åº”å°±å¥½äº†ï¼Œä½†ç¡®å®æ²¡æœ‰æ‰¾åˆ°åŠæ³• ğŸ¤·â€â™‚ï¸ï¼‰ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ command = "echo \"\bğŸ‘¨ $(git config user.name)\""</span>
</code></pre>
<p>å¯¹åº”é…ç½®ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-comment"># ~/.config/starship.toml</span>
<span class="hljs-comment"># https://starship.rs/config/</span>

<span class="hljs-comment"># Get editor completions based on the config schema</span>
<span class="hljs-attr">"$schema"</span> = <span class="hljs-string">'https://starship.rs/config-schema.json'</span>

<span class="hljs-comment"># Inserts a blank line between shell prompts</span>
<span class="hljs-attr">add_newline</span> = <span class="hljs-literal">true</span>

<span class="hljs-section">[git_branch]</span>
<span class="hljs-attr">symbol</span> = <span class="hljs-string">'ğŸŒ± '</span>

<span class="hljs-section">[nodejs]</span>
<span class="hljs-attr">format</span> = <span class="hljs-string">'[ğŸŸ¢ $version](bold green) '</span>

<span class="hljs-section">[custom.git_user]</span>
<span class="hljs-attr">command</span> = <span class="hljs-string">"echo \"\bğŸ‘¨ $(git config user.name) ğŸ’Œ $(git config user.email)\""</span>
<span class="hljs-attr">style</span> = <span class="hljs-string">"bold yellow"</span>
<span class="hljs-attr">when</span> = <span class="hljs-string">"git rev-parse --is-inside-work-tree 2&gt;/dev/null"</span>
</code></pre>
<blockquote>
<p>æ³¨æ„ä¿®æ”¹å®æ—¶ç”Ÿæ•ˆæ— éœ€é‡å¯ç»ˆç«¯ï¼Œåªéœ€ç»ˆç«¯æ‰§è¡Œä»»ä½•å‘½ä»¤æˆ–è€…æŒ‰ Enter å³å¯ã€‚</p>
</blockquote>
<h2 data-id="heading-5">å±•ç¤º npm registry</h2>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+ [custom.npm]</span>
<span class="hljs-addition">+ command = "registry=$(npm config get registry) &amp;&amp; echo \"${registry#*://}\""</span>
# when package.json exists
<span class="hljs-addition">+ when = "[[ -f package.json ]]"</span>
</code></pre>
<p>è¿™é‡Œå°† <code>https://registry.npmjs.org</code> æˆªçŸ­ä¸º <code>registry.npmjs.org</code>ï¼Œå¥½è®©ç©ºé—´å æ®å˜å°ï¼Œå½“ç„¶ä½ å¯ä»¥ä¸æˆªæ–­ï¼š<code>command = "npm config get registry"</code>ã€‚</p>
<p>å…¶æ¬¡åªæœ‰å½“å½“å‰ç›®å½•å­˜åœ¨ package.json <code>[[ -f package.json ]]</code> å³æ˜¯å‰ç«¯é¡¹ç›®æ‰å±•ç¤ºï¼Œå› ä¸ºå…¶ä»–é¡¹ç›®æ¯”å¦‚ Python æˆ– Golang é¡¹ç›®æˆ‘ä»¬å¹¶ä¸åœ¨æ„å½“å‰ npm çš„ registry æ˜¯ä»€ä¹ˆã€‚å¦‚æœå¤šæ–‡ä»¶å¯ç”¨ <code>detect_files = ["package.json"]</code>ã€‚</p>
<blockquote>
<p>[!TIPS]
å•æ–‡ä»¶ä¸ºä½•æ¨è <code>[[ -f package.json ]]</code> é¦–å…ˆ <code>[ -f package.json ]</code> ä¼šå”¤èµ·å¤–éƒ¨å‘½ä»¤å³æ–°è¿›ç¨‹ï¼Œæ€§èƒ½æ…¢ã€‚detect_files ä¸çŸ¥å…¶å®ç°ã€‚</p>
</blockquote>
<blockquote>
<p><em><code>[</code> æ˜¯å‘½ä»¤: æ–‡ä»¶ä½ç½® <code>/usr/bin/[</code>    è¿™ä¸ªå‘½ä»¤å¾ˆç‰¹æ®Š, ç»“å°¾åªèƒ½æ˜¯ <code>]</code> , æ‰€ä»¥æ„Ÿè§‰åƒé€»è¾‘åˆ¤æ–­ä¸€æ ·</em>ã€‚
<em><code>â¯ which [</code> å°†è¾“å‡º <strong>[: shell built-in command</strong> è¯´æ˜å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªå‘½ä»¤ã€‚</em></p>
<p><em>è‹±æ–‡ä»‹ç» <code>[</code>: <code>[ arg... ]</code> Evaluate conditional expression. This is a <strong>synonym for the "test"</strong> builtin, but the last argument <strong>must be a literal ']'</strong>, to match the opening '['.</em></p>
<p><em><code>test</code> ä¹Ÿæ˜¯å‘½ä»¤: <code>/usr/bin/test</code></em></p>
<p><em><code>[[</code> æ‰æ˜¯ bash çœŸæ­£çš„åˆ¤æ–­é€»è¾‘</em></p>
<p>æ¥è‡ªï¼š<strong>[ å’Œ [[ å’Œ test è°æ›´å¿«??</strong> - <a href="https://link.juejin.cn?target=http%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F1806703" target="_blank" title="http://cloud.tencent.com/developer/article/1806703" ref="nofollow noopener noreferrer">cloud.tencent.com/developer/aâ€¦</a></p>
<p>æ›´å¤šåŒºåˆ«ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000022265700%23item-4-3" target="_blank" title="https://segmentfault.com/a/1190000022265700#item-4-3" ref="nofollow noopener noreferrer">segmentfault.com/a/119000002â€¦</a></p>
</blockquote>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfd9fbbe5d304218a357ac66afcec7f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVnZW5kODBz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764119566&amp;x-signature=DEO2riU7J3urc%2Fi5FcBAPtyGn%2FE%3D" alt="[ å’Œ test é€Ÿåº¦ä¸€æ ·, [[ ç•¥èƒœä¸€ç­¹" loading="lazy"/></p>
<h4 data-id="heading-6">æ•ˆæœ</h4>
<pre><code class="hljs language-sh" lang="sh">nextjs-ecommerce on ğŸŒ± master [!â‡¡] ğŸŸ¢ v22.19.0 ğŸ‘¨ legend80s registry.npmjs.org took 5s
â¯ npm config <span class="hljs-built_in">set</span> registry https://registry.npmmirror.com <span class="hljs-comment"># åˆ‡æ¢</span>

nextjs-ecommerce on ğŸŒ± master [!â‡¡] ğŸŸ¢ v22.19.0 ğŸ‘¨ legend80s registry.npmmirror.com
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å½“åˆ‡æ¢ registry åç›¸åº”ä¹Ÿå‘ç”Ÿäº†å˜åŒ– ğŸ‰ï¼</p>
<p>è¿›å…¥ä¸€ä¸ªéå‰ç«¯é¡¹ç›®ä¸å±•ç¤º registryã€‚</p>
<p><strong>æ³¨æ„ 1</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"># å¦‚æœè¶…æ—¶å¯åŠ 
<span class="hljs-addition">+ command_timeout = 1500</span>
</code></pre>
<p><strong>æ³¨æ„ 2</strong>ï¼šåœ¨ Windows ä¸Šå¦‚æœå‘ç°ç»ˆç«¯enteråè¾ƒæ…¢å»ºè®®ä¸å±•ç¤º npm registryã€‚è€Œé‡‡ç”¨ä¸‹è¿° <code>gituser alias</code> æŒ‰éœ€æŸ¥çœ‹ã€‚</p>
<h2 data-id="heading-7">gituser alias</h2>
<p>æœ€åå†è´¡çŒ®ä¸€ä¸ª gituser alias å¦‚æœå¤§å®¶ä¸å–œæ¬¢åœ¨ç»ˆç«¯æ—¶åˆ»å±•ç¤ºè‡ªå·±çš„ç”¨æˆ·åé‚®ç®±ï¼Œå¯ä»¥é€šè¿‡è¯¥å‘½ä»¤è¿…é€ŸæŸ¥çœ‹ã€‚</p>
<p><strong>æ•ˆæœå¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-ts" lang="ts"> nextjs-ecommerce on ğŸŒ± master [â‡¡] ğŸŸ¢ v24<span class="hljs-number">.9</span><span class="hljs-number">.0</span>  ğŸ‘¨ legend80s ğŸ’Œ liuchzong<span class="hljs-meta">@qq</span>.<span class="hljs-property">com</span> 
â¯ gituser

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¨ legend80s   â”‚ ğŸ’Œ liuchzong<span class="hljs-meta">@qq</span>.<span class="hljs-property">com</span>           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>åœ¨ <strong>~/.zshrc</strong> æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹ function å’Œ aliasï¼ˆfunction ä¹Ÿæ˜¯ä¸€ç§ alias å¯å…¨å±€è°ƒç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">// ~/.zshrc

<span class="hljs-keyword">function</span> git-<span class="hljs-function"><span class="hljs-title">user</span></span>() {
  <span class="hljs-built_in">echo</span>
  <span class="hljs-built_in">echo</span> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  <span class="hljs-built_in">echo</span> â”‚ <span class="hljs-string">"ğŸ‘¨ <span class="hljs-subst">$(git config user.name)</span>   â”‚ ğŸ’Œ <span class="hljs-subst">$(git config user.email)</span>            â”‚"</span>
  <span class="hljs-built_in">echo</span> â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  <span class="hljs-built_in">echo</span>
}
<span class="hljs-built_in">alias</span> gituser=<span class="hljs-string">"git-user"</span>
<span class="hljs-built_in">alias</span> current-git=<span class="hljs-string">"git-user"</span>
</code></pre>
<h2 data-id="heading-8">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstarship.rs%2Fadvanced-config%2F%23style-strings" target="_blank" title="https://starship.rs/advanced-config/#style-strings" ref="nofollow noopener noreferrer">starship.rs/advanced-coâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[5æ­¥æ„å»ºä¼ä¸šçº§RAGåº”ç”¨ï¼šDifyä¸LangChain v1.0é›†æˆå®æˆ˜]]></title>    <link>https://juejin.cn/post/7574041466710655019</link>    <guid>https://juejin.cn/post/7574041466710655019</guid>    <pubDate>2025-11-19T07:45:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574041466710655019" data-draft-id="7574069837532692516" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="5æ­¥æ„å»ºä¼ä¸šçº§RAGåº”ç”¨ï¼šDifyä¸LangChain v1.0é›†æˆå®æˆ˜"/> <meta itemprop="keywords" content="LangChain,LLM,Agent"/> <meta itemprop="datePublished" content="2025-11-19T07:45:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            5æ­¥æ„å»ºä¼ä¸šçº§RAGåº”ç”¨ï¼šDifyä¸LangChain v1.0é›†æˆå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:45:03.000Z" title="Wed Nov 19 2025 07:45:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fde45c850f3548c1875b911b2e13ace1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143102&amp;x-signature=Ijh%2F8lNZLGOWaB6VecWzEC0xXwE%3D" alt="" loading="lazy"/></p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é€šè¿‡äº”ä¸ªå…³é”®æ­¥éª¤ï¼Œå¸¦æ‚¨ä»é›¶å¼€å§‹æŒæ¡Difyä¸LangChain v1.0çš„é›†æˆæŠ€æœ¯ï¼Œæ„å»ºå±äºè‡ªå·±çš„ä¼ä¸šçº§RAGåº”ç”¨ã€‚</p>
<h2 data-id="heading-0">Difyæ ¸å¿ƒåŠŸèƒ½è§£æï¼šä½ä»£ç å¼€å‘çš„å¼ºå¤§å¼•æ“</h2>
<p>Difyä½œä¸ºå¼€æºçš„LLMåº”ç”¨å¼€å‘å¹³å°ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå°†å¤æ‚çš„AIå·¥ç¨‹èƒ½åŠ›å°è£…ä¸ºç›´è§‚çš„å¯è§†åŒ–å·¥å…·ã€‚åœ¨é›†æˆLangChainæ—¶ï¼Œä»¥ä¸‹ç‰¹æ€§å°¤ä¸ºå…³é”®ï¼š</p>
<p><strong>å¯è§†åŒ–å·¥ä½œæµç¼–æ’</strong>å…è®¸å¼€å‘è€…é€šè¿‡æ‹–æ‹½èŠ‚ç‚¹æ„å»ºå¤æ‚AIæµç¨‹ã€‚Difyçš„Chatflowå¼•æ“æ”¯æŒæ¡ä»¶åˆ†æ”¯ã€å¾ªç¯é€»è¾‘å’Œå¹¶è¡Œä»»åŠ¡å¤„ç†ï¼Œè¿™æ„å‘³ç€å³ä½¿æ˜¯éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½è®¾è®¡å‡ºåŒ…å«RAGæ£€ç´¢ã€å·¥å…·è°ƒç”¨å’Œå¤šæ¨¡å‹åä½œçš„é«˜çº§åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨å®¢æœåœºæ™¯ä¸­ï¼Œå¯è½»æ¾é…ç½®"ç”¨æˆ·æé—®â†’æ„å›¾è¯†åˆ«â†’çŸ¥è¯†åº“æ£€ç´¢â†’LLMç”Ÿæˆâ†’å¤šæ¸ é“åˆ†å‘"çš„å®Œæ•´æµç¨‹ã€‚</p>
<p><strong>æ¨¡å‹ç½‘å…³</strong>åŠŸèƒ½è§£å†³äº†å¤šæ¨¡å‹ç®¡ç†çš„ç—›ç‚¹ã€‚Difyæ”¯æŒOpenAIã€Anthropicã€Llamaç­‰æ•°ç™¾ç§æ¨¡å‹çš„ç»Ÿä¸€æ¥å…¥ï¼Œé€šè¿‡æ ‡å‡†åŒ–APIæŠ½è±¡ï¼Œä½¿LangChainè°ƒç”¨ä¸åŒæ¨¡å‹æ—¶æ— éœ€ä¿®æ”¹ä»£ç ã€‚æŸç”µå•†å¹³å°åˆ©ç”¨æ­¤ç‰¹æ€§ï¼Œåœ¨ä¿ƒé”€é«˜å³°æœŸè‡ªåŠ¨å°†ç®€å•æŸ¥è¯¢åˆ‡æ¢è‡³å¼€æºæ¨¡å‹ï¼Œå¤æ‚æ¨ç†ä¿ç•™GPT-4ï¼Œä½¿æˆæœ¬é™ä½40%åŒæ—¶ä¿æŒæœåŠ¡è´¨é‡ã€‚</p>
<p><strong>RAGå¼•æ“</strong>ç»è¿‡æ·±åº¦ä¼˜åŒ–ï¼Œæ”¯æŒ20+æ–‡æ¡£æ ¼å¼è§£æå’Œæ··åˆæ£€ç´¢ç­–ç•¥ã€‚Difyçš„çˆ¶å­åˆ†æ®µæŠ€æœ¯å°†æ–‡æ¡£æ‹†åˆ†ä¸ºè¯­ä¹‰å—ï¼ˆçˆ¶æ®µï¼‰å’Œç»†èŠ‚å—ï¼ˆå­æ®µï¼‰ï¼Œç»“åˆBM25å…³é”®è¯æ£€ç´¢ä¸å‘é‡æ£€ç´¢ï¼Œä½¿å¬å›ç‡æå‡25%ã€‚åœ¨ä»£ç å®ç°ä¸­ï¼Œåªéœ€é€šè¿‡å‡ è¡Œé…ç½®å³å¯å¯ç”¨è¿™ä¸€é«˜çº§ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Dify RAGé…ç½®ç¤ºä¾‹ï¼ˆéœ€dify-client==1.9.1ï¼‰  </span>
fromÂ dify_clientÂ importÂ DifyClient  
  
<span class="hljs-attr">client</span> = DifyClient(api_key=<span class="hljs-string">"your_api_key"</span>)  
client.knowledge.create_dataset(  
Â  Â  <span class="hljs-attr">name</span>=<span class="hljs-string">"ä¼ä¸šçŸ¥è¯†åº“"</span>,  
Â  Â  <span class="hljs-attr">retrieval_strategy</span>=<span class="hljs-string">"hybrid"</span>,Â  <span class="hljs-comment"># æ··åˆæ£€ç´¢æ¨¡å¼  </span>
Â  Â  <span class="hljs-attr">chunking_strategy</span>={  
Â  Â  Â  Â  "mode":Â "semantic",  
Â  Â  Â  Â  "parent_chunk_size":Â 500,  
Â  Â  Â  Â  "child_chunk_size":Â 100,  
Â  Â  Â  Â  "overlap_rate":Â 0.15  
Â  Â  }  
)
</code></pre>
<p><strong>Agentæ¡†æ¶</strong>æ”¯æŒFunction Callingä¸ReActæ¨¡å¼ï¼Œå†…ç½®50+å·¥å…·é›†æˆã€‚é€šè¿‡Difyçš„å·¥å…·å¸‚åœºï¼Œå¯ä¸€é”®æ·»åŠ LangChainçš„å„ç§å·¥å…·èƒ½åŠ›ï¼Œå¦‚SerpAPIæœç´¢ã€WolframAlphaè®¡ç®—ç­‰ï¼Œä¸ºæ™ºèƒ½ä½“æ‰©å±•ä¸°å¯Œçš„å¤–éƒ¨èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-1">LangChain v1.0æ–°ç‰¹æ€§è§£è¯»ï¼šæ„å»ºç”Ÿäº§çº§Agentçš„åˆ©å™¨</h2>
<p>2025å¹´10æœˆå‘å¸ƒçš„LangChain v1.0å¸¦æ¥äº†æ¶æ„å±‚é¢çš„é‡å¤§é©æ–°ï¼Œè¿™äº›å˜åŒ–æ·±åˆ»å½±å“äº†ä¸Difyçš„é›†æˆæ–¹å¼ï¼š</p>
<p><strong>ç»Ÿä¸€AgentæŠ½è±¡</strong>æ˜¯æœ€æ˜¾è‘—çš„æ›´æ–°ã€‚v1.0å°†åŸæœ‰çš„å„ç±»Chainå’ŒAgentç»Ÿä¸€ä¸ºåŸºäºLangGraphæ„å»ºçš„Â <code>create_agent</code>Â æ¥å£ï¼Œå¤§å¹…ç®€åŒ–äº†å¤æ‚é€»è¾‘çš„å®ç°ã€‚ä¸æ—§ç‰ˆç›¸æ¯”ï¼Œä»£ç é‡å‡å°‘60%ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># LangChain v1.0 Agentåˆ›å»ºï¼ˆéœ€langchain==1.0.0ï¼‰  </span>
<span class="hljs-keyword">from</span>Â langchain.agentsÂ <span class="hljs-keyword">import</span>Â create_agent  
<span class="hljs-keyword">from</span>Â langchain_anthropicÂ <span class="hljs-keyword">import</span>Â ChatAnthropic  
  
<span class="hljs-comment"># å®šä¹‰å·¥å…·  </span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">location:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-built_in">str</span>:  
Â  Â  <span class="hljs-string">"""è·å–æŒ‡å®šä½ç½®çš„å¤©æ°”ä¿¡æ¯"""</span>  
Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-string">f"<span class="hljs-subst">{location}</span>çš„å¤©æ°”æ˜¯æ™´æœ—çš„"</span>  
  
<span class="hljs-comment"># åˆ›å»ºAgentï¼ˆå°‘äº10è¡Œä»£ç ï¼‰  </span>
model = ChatAnthropic(model=<span class="hljs-string">"claude-3-5-sonnet-20241022"</span>)  
agent = create_agent(  
Â  Â  model=model,  
Â  Â  tools=[get_weather],  
Â  Â  system_prompt=<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„AIåŠ©æ‰‹"</span>  
)  
  
<span class="hljs-comment"># æ‰§è¡Œ  </span>
result = agent.invoke({<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"åŒ—äº¬å¤©æ°”å¦‚ä½•ï¼Ÿ"</span>}]})
</code></pre>
<p><strong>ä¸­é—´ä»¶æœºåˆ¶</strong>ä¸ºAgentæä¾›äº†å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ã€‚å¼€å‘è€…å¯é€šè¿‡Â <code>middleware</code>Â å‚æ•°æ³¨å…¥é€šç”¨é€»è¾‘ï¼Œå¦‚å¯¹è¯æ‘˜è¦ã€æ•æ„Ÿä¿¡æ¯è¿‡æ»¤ã€å·¥å…·æƒé™æ§åˆ¶ç­‰ã€‚ä¾‹å¦‚ï¼Œæ·»åŠ å¯¹è¯æ‘˜è¦ä¸­é—´ä»¶è§£å†³é•¿å¯¹è¯ä¸Šä¸‹æ–‡è¶…é™é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">fromÂ langchain.agents.middlewareÂ importÂ summarization_middleware  
  
<span class="hljs-attr">agent</span> = create_agent(  
Â  Â  <span class="hljs-attr">model</span>=model,  
Â  Â  <span class="hljs-attr">tools</span>=[get_weather],  
Â  Â  <span class="hljs-attr">middleware</span>=[  
Â  Â  Â  Â  summarization_middleware(  
Â  Â  Â  Â  Â  Â  model=<span class="hljs-string">"openai:gpt-4o-mini"</span>,  
Â  Â  Â  Â  Â  Â  max_tokens_before_summary=<span class="hljs-number">4000</span>,  
Â  Â  Â  Â  Â  Â  messages_to_keep=<span class="hljs-number">20</span>  
Â  Â  Â  Â  )  
Â  Â  ]  
)

</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/631261eaf6b8457d93cdcf08acc1545d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143102&amp;x-signature=abjJZckkgEYMPNntIVxsp9Mlj2M%3D" alt="image.png" loading="lazy"/>
LangChain v1.0æ¶æ„å›¾</p>
<p><strong>æ ‡å‡†åŒ–å†…å®¹å—</strong>ä½¿å·¥å…·è°ƒç”¨å’Œå¤šæ¨¡æ€å¤„ç†æ›´åŠ æ¸…æ™°ã€‚v1.0å¼•å…¥çš„Â <code>content_blocks</code>Â ç»“æ„ç»Ÿä¸€äº†ä¸åŒç±»å‹æ¶ˆæ¯çš„è¡¨ç¤ºæ–¹å¼ï¼Œæ— è®ºæ˜¯æ–‡æœ¬ã€å·¥å…·è°ƒç”¨è¿˜æ˜¯å›¾åƒURLï¼Œéƒ½èƒ½ä»¥ä¸€è‡´çš„æ ¼å¼åœ¨ç³»ç»Ÿä¸­æµè½¬ï¼Œè¿™ä¸ºDifyä¸LangChainä¹‹é—´çš„æ•°æ®äº¤æ¢æä¾›äº†ä¾¿åˆ©ã€‚</p>
<h2 data-id="heading-2">é›†æˆæ­¥éª¤æŒ‡å—ï¼šä»ç¯å¢ƒé…ç½®åˆ°APIè°ƒç”¨</h2>
<p>é›†æˆDifyä¸LangChainéœ€è¦å®Œæˆä¸‰ä¸ªå…³é”®æ­¥éª¤ï¼Œæˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»æ¯ä¸€æ­¥çš„æ“ä½œè¦ç‚¹å’Œä»£ç å®ç°ï¼š</p>
<p><strong>ç¯å¢ƒé…ç½®</strong>éœ€è¦å‡†å¤‡ä¸¤ä¸ªæ ¸å¿ƒä¾èµ–åº“ã€‚å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»é¡¹ç›®ä¾èµ–ï¼Œç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ  </span>
python -m venv dify-env  
<span class="hljs-built_in">source</span>Â dify-env/bin/activateÂ  <span class="hljs-comment"># Linux/Mac  </span>
<span class="hljs-comment"># dify-env\Scripts\activate Â # Windows  </span>
  
<span class="hljs-comment"># å®‰è£…ä¾èµ–ï¼ˆæŒ‡å®šæœ€æ–°ç‰ˆæœ¬ï¼‰  </span>
pip install dify-client==1.9.1 langchain==1.0.0 python-dotenv
</code></pre>
<p>åœ¨Difyå¹³å°ç«¯ï¼Œéœ€è¦åˆ›å»ºåº”ç”¨å¹¶è·å–APIå¯†é’¥ã€‚ç™»å½•Difyæ§åˆ¶å°åï¼Œé€šè¿‡"è®¾ç½®â†’APIè®¿é—®"åˆ›å»ºæ–°çš„è®¿é—®å‡­è¯ï¼ŒåŒæ—¶ç¡®ä¿å·²å¯ç”¨"å¤–éƒ¨å·¥å…·è°ƒç”¨"æƒé™ã€‚å°†è·å–çš„APIå¯†é’¥å­˜å‚¨åœ¨Â <code>.env</code>Â æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">DIFY_API_KEY</span>=your_dify_api_key  
<span class="hljs-attr">LANGCHAIN_API_KEY</span>=your_langchain_api_key
</code></pre>
<p><strong>æ ¸å¿ƒAPIè°ƒç”¨</strong>åˆ†ä¸ºä¸¤ç§æ¨¡å¼ã€‚å½“Difyä½œä¸ºå‰ç«¯ç•Œé¢ï¼ŒLangChainå¤„ç†åç«¯é€»è¾‘æ—¶ï¼Œå¯é€šè¿‡Difyçš„è‡ªå®šä¹‰å·¥å…·è°ƒç”¨LangChainæœåŠ¡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Difyè‡ªå®šä¹‰å·¥å…·é…ç½®ç¤ºä¾‹ï¼ˆDify 1.9.1+ï¼‰  </span>
<span class="hljs-keyword">import</span>Â requests  
<span class="hljs-keyword">from</span>Â dify_clientÂ <span class="hljs-keyword">import</span>Â DifyClient  
<span class="hljs-keyword">import</span>Â os  
<span class="hljs-keyword">from</span>Â dotenvÂ <span class="hljs-keyword">import</span>Â load_dotenv  
  
load_dotenv()  
client = DifyClient(api_key=os.getenv(<span class="hljs-string">"DIFY_API_KEY"</span>))  
  
<span class="hljs-comment"># åˆ›å»ºè°ƒç”¨LangChainçš„è‡ªå®šä¹‰å·¥å…·  </span>
tool_config = {  
Â  Â  <span class="hljs-string">"name"</span>:Â <span class="hljs-string">"langchain_agent"</span>,  
Â  Â  <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"è°ƒç”¨LangChainå¤„ç†å¤æ‚é€»è¾‘"</span>,  
Â  Â  <span class="hljs-string">"parameters"</span>: {  
Â  Â  Â  Â  <span class="hljs-string">"query"</span>: {<span class="hljs-string">"type"</span>:Â <span class="hljs-string">"string"</span>,Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"ç”¨æˆ·æŸ¥è¯¢å†…å®¹"</span>}  
Â  Â  },  
Â  Â  <span class="hljs-string">"request_config"</span>: {  
Â  Â  Â  Â  <span class="hljs-string">"url"</span>:Â <span class="hljs-string">"https://your-langchain-server/api/process"</span>,  
Â  Â  Â  Â  <span class="hljs-string">"method"</span>:Â <span class="hljs-string">"POST"</span>,  
Â  Â  Â  Â  <span class="hljs-string">"headers"</span>: {  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"Content-Type"</span>:Â <span class="hljs-string">"application/json"</span>,  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"Authorization"</span>:Â <span class="hljs-string">f"BearerÂ <span class="hljs-subst">{os.getenv(<span class="hljs-string">'LANGCHAIN_API_KEY'</span>)}</span>"</span>  
Â  Â  Â  Â  },  
Â  Â  Â  Â  <span class="hljs-string">"body"</span>: {<span class="hljs-string">"query"</span>:Â <span class="hljs-string">"{{query}}"</span>}  
Â  Â  }  
}  
  
client.tool.create(tool_config)
</code></pre>
<p>åä¹‹ï¼Œå½“LangChainéœ€è¦è®¿é—®Difyçš„çŸ¥è¯†åº“æ—¶ï¼Œå¯ä½¿ç”¨Dify Python SDKï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># LangChainè°ƒç”¨DifyçŸ¥è¯†åº“ç¤ºä¾‹ï¼ˆLangChain v1.0+ï¼‰  </span>
fromÂ langchain.retrieversÂ importÂ DifyRetriever  
importÂ os  
fromÂ dotenvÂ importÂ load_dotenv  
  
load_dotenv()  
<span class="hljs-attr">retriever</span> = DifyRetriever(  
Â  Â  <span class="hljs-attr">api_key</span>=os.getenv(<span class="hljs-string">"DIFY_API_KEY"</span>),  
Â  Â  <span class="hljs-attr">dataset_id</span>=<span class="hljs-string">"your_dataset_id"</span>,  
Â  Â  <span class="hljs-attr">top_k</span>=<span class="hljs-number">5</span>,  
Â  Â  <span class="hljs-attr">score_threshold</span>=<span class="hljs-number">0.7</span>  
)  
  
<span class="hljs-comment"># åœ¨LangChainä¸­ä½¿ç”¨Difyæ£€ç´¢å™¨  </span>
fromÂ langchain.chainsÂ importÂ RetrievalQA  
fromÂ langchain_openaiÂ importÂ ChatOpenAI  
  
<span class="hljs-attr">llm</span> = ChatOpenAI(model=<span class="hljs-string">"gpt-4o"</span>)  
<span class="hljs-attr">qa_chain</span> = RetrievalQA.from_chain_type(  
Â  Â  <span class="hljs-attr">llm</span>=llm,  
Â  Â  <span class="hljs-attr">chain_type</span>=<span class="hljs-string">"stuff"</span>,  
Â  Â  <span class="hljs-attr">retriever</span>=retriever  
)  
  
<span class="hljs-attr">result</span> = qa_chain.invoke({<span class="hljs-string">"query"</span>:Â <span class="hljs-string">"ä¼ä¸šäº§å“å®šä»·ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ"</span>})
</code></pre>
<p><strong>æ•°æ®æµè½¬è®¾è®¡</strong>éœ€è¦æ³¨æ„ä¸Šä¸‹æ–‡ä¿æŒã€‚åœ¨å¤šè½®å¯¹è¯åœºæ™¯ä¸­ï¼Œéœ€å°†Difyçš„ä¼šè¯IDä¼ é€’ç»™LangChainï¼Œç¡®ä¿å¯¹è¯å†å²çš„è¿ç»­æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¸¦ä¼šè¯ä¸Šä¸‹æ–‡çš„è°ƒç”¨ç¤ºä¾‹ï¼ˆDify 1.9.1+ï¼‰  </span>
defÂ process_query(query:Â str, conversation_id:Â <span class="hljs-attr">str</span>Â =Â None):  
Â  Â  <span class="hljs-comment"># 1. ä»Difyè·å–çŸ¥è¯†åº“æ£€ç´¢ç»“æœ  </span>
Â  Â  <span class="hljs-attr">retrieval_result</span> = client.knowledge.retrieve(  
Â  Â  Â  Â  <span class="hljs-attr">dataset_id</span>=<span class="hljs-string">"your_dataset_id"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">query</span>=query,  
Â  Â  Â  Â  <span class="hljs-attr">conversation_id</span>=conversation_id  
Â  Â  )  
  
Â  Â  <span class="hljs-comment"># 2. è°ƒç”¨LangChainå¤„ç†æ£€ç´¢ç»“æœ  </span>
Â  Â  <span class="hljs-attr">langchain_response</span> = requests.post(  
Â  Â  Â  Â  "https://your-langchain-server/api/process",  
Â  Â  Â  Â  <span class="hljs-attr">json</span>={  
Â  Â  Â  Â  Â  Â  "query": query,  
Â  Â  Â  Â  Â  Â  "context": retrieval_result<span class="hljs-section">["documents"]</span>,  
Â  Â  Â  Â  Â  Â  "conversation_id": conversation_id  
Â  Â  Â  Â  },  
Â  Â  Â  Â  <span class="hljs-attr">headers</span>={<span class="hljs-string">"Authorization"</span>:Â f<span class="hljs-string">"BearerÂ {os.getenv('LANGCHAIN_API_KEY')}"</span>}  
Â  Â  )  
  
Â  Â  <span class="hljs-comment"># 3. å°†ç»“æœè¿”å›ç»™Difyæ›´æ–°ä¼šè¯  </span>
Â  Â  ifÂ conversation_id:  
Â  Â  Â  Â  client.conversation.update(  
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">conversation_id</span>=conversation_id,  
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">messages</span>=[{<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"assistant"</span>,Â <span class="hljs-string">"content"</span>: langchain_response.json()[<span class="hljs-string">"result"</span>]}]  
Â  Â  Â  Â  )  
  
Â  Â  returnÂ langchain_response.json()
</code></pre>
<h2 data-id="heading-3">å®æˆ˜æ¡ˆä¾‹æ¼”ç¤ºï¼šä¼ä¸šçŸ¥è¯†åº“æ™ºèƒ½é—®ç­”ç³»ç»Ÿ</h2>
<p>æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿç»“åˆDifyçš„å¯è§†åŒ–ç•Œé¢å’ŒLangChainçš„é«˜çº§æ£€ç´¢èƒ½åŠ›ï¼Œæ”¯æŒPDFæ–‡æ¡£è§£æã€è¯­ä¹‰æ£€ç´¢å’Œå¤šè½®å¯¹è¯ã€‚</p>
<p><strong>ç³»ç»Ÿæ¶æ„</strong>åˆ†ä¸ºå››ä¸ªå±‚æ¬¡ã€‚ç”¨æˆ·é€šè¿‡Difyçš„Webç•Œé¢æé—®ï¼Œè¯·æ±‚é¦–å…ˆç»è¿‡Difyçš„æ„å›¾è¯†åˆ«æ¨¡å—ï¼Œç„¶åè°ƒç”¨LangChainçš„RAGé“¾å¤„ç†ï¼Œæ£€ç´¢ç»“æœæ¥è‡ªDifyç®¡ç†çš„çŸ¥è¯†åº“ï¼Œæœ€ç»ˆç”±LLMç”Ÿæˆå›ç­”å¹¶è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dd17f0bf63f415cb6264d7effbee59e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143102&amp;x-signature=%2F6WIES2BOUCbNGdhU5bQVuvGMjE%3D" alt="" loading="lazy"/></p>
<p>RAGç³»ç»Ÿæ¶æ„å›¾</p>
<p><strong>æ•°æ®å‡†å¤‡</strong>é˜¶æ®µéœ€è¦ä¸Šä¼ æ–‡æ¡£å¹¶æ„å»ºçŸ¥è¯†åº“ã€‚é€šè¿‡Difyçš„"çŸ¥è¯†åº“"åŠŸèƒ½ä¸Šä¼ ä¼ä¸šæ–‡æ¡£ï¼ˆæ”¯æŒPDFã€DOCXç­‰20+æ ¼å¼ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œæ–‡æœ¬æå–å’Œåˆ†å—å¤„ç†ã€‚æ¨èä½¿ç”¨ä»¥ä¸‹åˆ†å—ç­–ç•¥ï¼š</p>
<ul>
<li>â€¢ çˆ¶å—å¤§å°ï¼š400-600å­—ç¬¦ï¼ˆä¿ç•™ä¸Šä¸‹æ–‡è¯­ä¹‰ï¼‰</li>
<li>â€¢ å­å—å¤§å°ï¼š100-200å­—ç¬¦ï¼ˆå®ç°ç²¾ç¡®åŒ¹é…ï¼‰</li>
<li>â€¢ é‡å ç‡ï¼š10-15%ï¼ˆé¿å…å…³é”®ä¿¡æ¯æˆªæ–­ï¼‰</li>
</ul>
<p>åœ¨LangChainç«¯ï¼Œéœ€è¦é…ç½®å‘é‡å­˜å‚¨å’ŒåµŒå…¥æ¨¡å‹ã€‚è¿™é‡Œä½¿ç”¨FAISSä½œä¸ºå‘é‡æ•°æ®åº“ï¼Œé…åˆBGEåµŒå…¥æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># LangChainæ£€ç´¢é“¾é…ç½®ï¼ˆv1.0+ï¼‰  </span>
fromÂ langchain.vectorstoresÂ importÂ FAISS  
fromÂ langchain.embeddingsÂ importÂ HuggingFaceEmbeddings  
fromÂ langchain.text_splitterÂ importÂ RecursiveCharacterTextSplitter  
fromÂ langchain.document_loadersÂ importÂ PyPDFLoader  
  
<span class="hljs-comment"># åŠ è½½Difyå¯¼å‡ºçš„çŸ¥è¯†åº“æ–‡æ¡£  </span>
<span class="hljs-attr">loader</span> = PyPDFLoader(<span class="hljs-string">"dify_knowledge_export.pdf"</span>)  
<span class="hljs-attr">documents</span> = loader.load()  
  
<span class="hljs-comment"># æ–‡æœ¬åˆ†å—  </span>
<span class="hljs-attr">text_splitter</span> = RecursiveCharacterTextSplitter(  
Â  Â  <span class="hljs-attr">chunk_size</span>=<span class="hljs-number">500</span>,  
Â  Â  <span class="hljs-attr">chunk_overlap</span>=<span class="hljs-number">50</span>,  
Â  Â  <span class="hljs-attr">separators</span>=[<span class="hljs-string">"\n\n"</span>,Â <span class="hljs-string">"\n"</span>,Â <span class="hljs-string">". "</span>,Â <span class="hljs-string">" "</span>,Â <span class="hljs-string">""</span>]  
)  
<span class="hljs-attr">splits</span> = text_splitter.split_documents(documents)  
  
<span class="hljs-comment"># åˆ›å»ºå‘é‡å­˜å‚¨  </span>
<span class="hljs-attr">embeddings</span> = HuggingFaceEmbeddings(model_name=<span class="hljs-string">"BAAI/bge-small-en-v1.5"</span>)  
<span class="hljs-attr">vectorstore</span> = FAISS.from_documents(documents=splits, embedding=embeddings)  
vectorstore.save_local("faiss_index")
</code></pre>
<p><strong>æ ¸å¿ƒä»£ç å®ç°</strong>åŒ…å«Difyå·¥ä½œæµè®¾è®¡å’ŒLangChainæ£€ç´¢é“¾ä¸¤éƒ¨åˆ†ã€‚åœ¨Difyä¸­åˆ›å»ºæ–°çš„"å¯¹è¯å‹åº”ç”¨"ï¼Œç„¶åè®¾è®¡å¦‚ä¸‹å·¥ä½œæµï¼š</p>
<ol start="0">
<li>
<ol start="0">
<li>æ·»åŠ "ç”¨æˆ·è¾“å…¥"èŠ‚ç‚¹æ¥æ”¶æé—®</li>
</ol>
</li>
<li>
<ol start="2">
<li>æ·»åŠ "çŸ¥è¯†åº“æ£€ç´¢"èŠ‚ç‚¹è·å–ç›¸å…³æ–‡æ¡£</li>
</ol>
</li>
<li>
<ol start="3">
<li>æ·»åŠ "å·¥å…·è°ƒç”¨"èŠ‚ç‚¹è°ƒç”¨LangChainå¤„ç†é€»è¾‘</li>
</ol>
</li>
<li>
<ol start="4">
<li>æ·»åŠ "LLMç”Ÿæˆ"èŠ‚ç‚¹ç”Ÿæˆæœ€ç»ˆå›ç­”</li>
</ol>
</li>
<li>
<ol start="5">
<li>æ·»åŠ "è¾“å‡º"èŠ‚ç‚¹å±•ç¤ºç»“æœ</li>
</ol>
</li>
</ol>
<p>LangChainç«¯å®ç°é«˜çº§æ£€ç´¢é€»è¾‘ï¼ŒåŒ…æ‹¬æ··åˆæ£€ç´¢å’Œç»“æœé‡æ’ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># LangChainé«˜çº§æ£€ç´¢å®ç°ï¼ˆv1.0+ï¼‰  </span>
fromÂ langchain.retrieversÂ importÂ ContextualCompressionRetriever  
fromÂ langchain.retrievers.document_compressorsÂ importÂ CohereRerank  
fromÂ langchain_community.retrieversÂ importÂ BM25Retriever  
fromÂ langchain.retrieversÂ importÂ EnsembleRetriever  
  
<span class="hljs-comment"># åŠ è½½å‘é‡å­˜å‚¨  </span>
<span class="hljs-attr">vectorstore</span> = FAISS.load_local(<span class="hljs-string">"faiss_index"</span>, embeddings, allow_dangerous_deserialization=<span class="hljs-literal">True</span>)  
<span class="hljs-attr">vector_retriever</span> = vectorstore.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>:Â <span class="hljs-number">10</span>})  
  
<span class="hljs-comment"># åˆå§‹åŒ–BM25æ£€ç´¢å™¨ï¼ˆå…³é”®è¯æ£€ç´¢ï¼‰  </span>
<span class="hljs-attr">bm25_retriever</span> = BM25Retriever.from_documents(documents=splits)  
<span class="hljs-attr">bm25_retriever.k</span> =Â <span class="hljs-number">10</span>  
  
<span class="hljs-comment"># ç»„åˆæ£€ç´¢å™¨  </span>
<span class="hljs-attr">ensemble_retriever</span> = EnsembleRetriever(  
Â  Â  <span class="hljs-attr">retrievers</span>=[vector_retriever, bm25_retriever],  
Â  Â  <span class="hljs-attr">weights</span>=[<span class="hljs-number">0.7</span>,Â <span class="hljs-number">0.3</span>]  
)  
  
<span class="hljs-comment"># æ·»åŠ é‡æ’å™¨  </span>
<span class="hljs-attr">compressor</span> = CohereRerank(model=<span class="hljs-string">"rerank-english-v3.0"</span>)  
<span class="hljs-attr">compression_retriever</span> = ContextualCompressionRetriever(  
Â  Â  <span class="hljs-attr">base_compressor</span>=compressor,  
Â  Â  <span class="hljs-attr">base_retriever</span>=ensemble_retriever  
)  
  
<span class="hljs-comment"># åˆ›å»ºRAGé“¾  </span>
fromÂ langchain.chainsÂ importÂ RetrievalQA  
fromÂ langchain.chat_modelsÂ importÂ ChatOpenAI  
  
<span class="hljs-attr">llm</span> = ChatOpenAI(model_name=<span class="hljs-string">"gpt-4o"</span>, temperature=<span class="hljs-number">0.3</span>)  
<span class="hljs-attr">qa_chain</span> = RetrievalQA.from_chain_type(  
Â  Â  <span class="hljs-attr">llm</span>=llm,  
Â  Â  <span class="hljs-attr">chain_type</span>=<span class="hljs-string">"stuff"</span>,  
Â  Â  <span class="hljs-attr">retriever</span>=compression_retriever,  
Â  Â  <span class="hljs-attr">return_source_documents</span>=<span class="hljs-literal">True</span>  
)  
  
<span class="hljs-comment"># å¯åŠ¨FastAPIæœåŠ¡ä¾›Difyè°ƒç”¨  </span>
fromÂ fastapiÂ importÂ FastAPI  
importÂ uvicorn  
fromÂ pydanticÂ importÂ BaseModel  
  
<span class="hljs-attr">app</span> = FastAPI()  
  
classÂ QueryRequest(BaseModel):  
Â  Â  query:Â str  
  
@app.post("/process")  
asyncÂ defÂ process_query(request: QueryRequest):  
Â  Â  <span class="hljs-attr">result</span> = qa_chain({<span class="hljs-string">"query"</span>: request.query})  
Â  Â  returnÂ {  
Â  Â  Â  Â  "result": result<span class="hljs-section">["result"]</span>,  
Â  Â  Â  Â  "sources": <span class="hljs-section">[doc.metadata.get("source")Â forÂ docÂ inÂ result["source_documents"]]</span>  
Â  Â  }  
  
ifÂ <span class="hljs-attr">__name__</span> ==Â <span class="hljs-string">"__main__"</span>:  
Â  Â  uvicorn.run(app, <span class="hljs-attr">host</span>=<span class="hljs-string">"0.0.0.0"</span>, port=<span class="hljs-number">8000</span>)
</code></pre>
<p><strong>éƒ¨ç½²ä¸æµ‹è¯•</strong>éœ€è¦å¯åŠ¨LangChainæœåŠ¡å¹¶åœ¨Difyä¸­é…ç½®å·¥å…·åœ°å€ã€‚å°†LangChainæœåŠ¡éƒ¨ç½²åˆ°å…¬ç½‘å¯è®¿é—®çš„æœåŠ¡å™¨ï¼Œç„¶ååœ¨Difyçš„è‡ªå®šä¹‰å·¥å…·ä¸­å¡«å†™æœåŠ¡URLã€‚æµ‹è¯•æ—¶ï¼Œå¯ä¸Šä¼ ä¼ä¸šäº§å“æ‰‹å†Œå¹¶æé—®"è¯·ä»‹ç»äº§å“çš„æ ¸å¿ƒåŠŸèƒ½"ï¼Œç³»ç»Ÿåº”èƒ½å‡†ç¡®æ£€ç´¢ç›¸å…³å†…å®¹å¹¶ç”Ÿæˆå›ç­”ã€‚</p>
<h2 data-id="heading-4">æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<p>ä¼ä¸šçº§åº”ç”¨éœ€è¦å…³æ³¨æ€§èƒ½å’Œå¯é æ€§ï¼Œä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥å¯æ˜¾è‘—æå‡ç³»ç»Ÿè¡¨ç°ï¼š</p>
<p><strong>å‘é‡æ£€ç´¢ä¼˜åŒ–</strong>ä»ä¸‰ä¸ªæ–¹é¢ç€æ‰‹ã€‚è°ƒæ•´åˆ†å—å¤§å°å’Œé‡å ç‡ï¼šå®éªŒè¡¨æ˜ï¼ŒæŠ€æœ¯æ–‡æ¡£ä½¿ç”¨300-500å­—ç¬¦çš„åˆ†å—å¤§å°ï¼Œé…åˆ10-15%çš„é‡å ç‡ï¼Œå¯ä½¿å¬å›ç‡æå‡18%ã€‚é€‰æ‹©åˆé€‚çš„åµŒå…¥æ¨¡å‹ï¼šå¯¹äºä¸­æ–‡åœºæ™¯ï¼ŒBGE-M3æ¨¡å‹åœ¨æ£€ç´¢ä»»åŠ¡ä¸Šè¡¨ç°ä¼˜äºä¼ ç»Ÿæ¨¡å‹ã€‚ä¼˜åŒ–å‘é‡æ•°æ®åº“å‚æ•°ï¼šFAISSçš„HNSWç´¢å¼•å¯é€šè¿‡è°ƒæ•´Â <code>nlist</code>Â å’ŒÂ <code>ef_construction</code>Â å‚æ•°å¹³è¡¡é€Ÿåº¦ä¸ç²¾åº¦ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># FAISSç´¢å¼•ä¼˜åŒ–ç¤ºä¾‹  </span>
<span class="hljs-attr">index</span> = faiss.IndexHNSWFlat(dimension, hnsw_params.M)  
<span class="hljs-attr">index.hnsw.efConstruction</span> =Â <span class="hljs-number">200</span>Â  <span class="hljs-comment"># æ„å»ºæ—¶ç²¾åº¦ï¼ˆå€¼è¶Šå¤§è¶Šç²¾ç¡®ï¼Œé€Ÿåº¦è¶Šæ…¢ï¼‰  </span>
<span class="hljs-attr">index.hnsw.efSearch</span> =Â <span class="hljs-number">100</span>Â  <span class="hljs-comment"># æŸ¥è¯¢æ—¶ç²¾åº¦  </span>
faiss.write_index(index,Â "optimized_index.faiss")
</code></pre>
<p><strong>ç¼“å­˜ç­–ç•¥</strong>æœ‰æ•ˆå‡å°‘é‡å¤è®¡ç®—ã€‚å®ç°ä¸‰çº§ç¼“å­˜æœºåˆ¶ï¼šRedisç¼“å­˜é«˜é¢‘æŸ¥è¯¢ç»“æœï¼ˆTTL=1å°æ—¶ï¼‰ï¼ŒDifyå†…ç½®ç¼“å­˜å­˜å‚¨çŸ¥è¯†åº“æ£€ç´¢ç»“æœï¼ˆTTL=12å°æ—¶ï¼‰ï¼Œå®¢æˆ·ç«¯ç¼“å­˜ä¿å­˜ç”¨æˆ·ä¼šè¯ï¼ˆTTL=24å°æ—¶ï¼‰ã€‚ä»¥ä¸‹æ˜¯Redisç¼“å­˜å®ç°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Redisç¼“å­˜å®ç°  </span>
<span class="hljs-keyword">import</span>Â redis  
<span class="hljs-keyword">from</span>Â functoolsÂ <span class="hljs-keyword">import</span>Â lru_cache  
  
r = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)  
  
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">cache_decorator</span>(<span class="hljs-params">ttl=<span class="hljs-number">3600</span></span>):  
Â  Â  <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):  
Â  Â  Â  Â  <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):  
Â  Â  Â  Â  Â  Â  key =Â <span class="hljs-string">f"cache:<span class="hljs-subst">{func.__name__}</span>:<span class="hljs-subst">{<span class="hljs-built_in">str</span>(args)}</span>:<span class="hljs-subst">{<span class="hljs-built_in">str</span>(kwargs)}</span>"</span>  
Â  Â  Â  Â  Â  Â  cached_result = r.get(key)  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span>Â cached_result:  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">eval</span>(cached_result)  
Â  Â  Â  Â  Â  Â  result = func(*args, **kwargs)  
Â  Â  Â  Â  Â  Â  r.setex(key, ttl,Â <span class="hljs-built_in">str</span>(result))  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â result  
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â wrapper  
Â  Â  <span class="hljs-keyword">return</span>Â decorator  
  
<span class="hljs-meta">@cache_decorator(<span class="hljs-params">ttl=<span class="hljs-number">3600</span></span>)  </span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">rag_query</span>(<span class="hljs-params">query:Â <span class="hljs-built_in">str</span></span>):  
Â  Â  <span class="hljs-keyword">return</span>Â qa_chain({<span class="hljs-string">"query"</span>: query})
</code></pre>
<p><strong>å¹¶å‘æ§åˆ¶</strong>é˜²æ­¢ç³»ç»Ÿè¿‡è½½ã€‚åœ¨Difyä¸­é…ç½®APIè¯·æ±‚é™æµï¼ˆé€šè¿‡"è®¾ç½®â†’å®‰å…¨"ï¼‰ï¼Œæ¨èå€¼ä¸ºæ™®é€šç”¨æˆ·5 QPSï¼Œç®¡ç†å‘˜10 QPSã€‚LangChainæœåŠ¡ç«¯ä½¿ç”¨FastAPIçš„é™æµä¸­é—´ä»¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># FastAPIé™æµé…ç½®  </span>
<span class="hljs-keyword">from</span>Â fastapiÂ <span class="hljs-keyword">import</span>Â FastAPI, Request, HTTPException  
<span class="hljs-keyword">from</span>Â fastapi.middleware.corsÂ <span class="hljs-keyword">import</span>Â CORSMiddleware  
<span class="hljs-keyword">from</span>Â slowapiÂ <span class="hljs-keyword">import</span>Â Limiter, _rate_limit_exceeded_handler  
<span class="hljs-keyword">from</span>Â slowapi.utilÂ <span class="hljs-keyword">import</span>Â get_remote_address  
<span class="hljs-keyword">from</span>Â slowapi.errorsÂ <span class="hljs-keyword">import</span>Â RateLimitExceeded  
  
limiter = Limiter(key_func=get_remote_address)  
app = FastAPI()  
app.state.limiter = limiter  
app.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)  
  
<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/process"</span></span>)  </span>
<span class="hljs-meta">@limiter.limit(<span class="hljs-params"><span class="hljs-string">"10/minute"</span></span>)  </span>
<span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">process_query</span>(<span class="hljs-params">request: Request, query: QueryRequest</span>):  
Â  Â  <span class="hljs-comment"># å¤„ç†è¯·æ±‚é€»è¾‘</span>
</code></pre>
<p><strong>ç›‘æ§ä¸è°ƒä¼˜</strong>æ˜¯æŒç»­ä¼˜åŒ–çš„åŸºç¡€ã€‚é›†æˆPrometheuså’ŒGrafanaç›‘æ§å…³é”®æŒ‡æ ‡ï¼šAPIå“åº”æ—¶é—´ï¼ˆç›®æ ‡P99&lt;1ç§’ï¼‰ã€æ£€ç´¢å‡†ç¡®ç‡ï¼ˆé€šè¿‡ç”¨æˆ·åé¦ˆæ”¶é›†ï¼‰ã€ç¼“å­˜å‘½ä¸­ç‡ï¼ˆç›®æ ‡&gt;80%ï¼‰ã€‚å®šæœŸåˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œä¼˜åŒ–åˆ†å—ç­–ç•¥å’Œæç¤ºè¯æ¨¡æ¿ã€‚</p>
<h2 data-id="heading-5">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>é›†æˆè¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…å¸¸é‡åˆ°ä»¥ä¸‹æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æä¾›ç»è¿‡éªŒè¯çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<p><strong>ä¾èµ–å†²çª</strong>æ˜¯æœ€å¸¸è§çš„é—®é¢˜ã€‚å½“Difyå’ŒLangChainå¯¹åŒä¸€ä¾èµ–åº“æœ‰ä¸åŒç‰ˆæœ¬è¦æ±‚æ—¶ï¼ˆå¦‚pydanticï¼‰ï¼Œä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»å¹¶åˆ›å»ºÂ <code>requirements.txt</code>Â é”å®šç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># requirements.txtï¼ˆé€‚é…Dify 1.9.1å’ŒLangChain v1.0ï¼‰  </span>
<span class="hljs-attr">dify-client</span>==<span class="hljs-number">1.9</span>.<span class="hljs-number">1</span>  
<span class="hljs-attr">langchain</span>==<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>  
<span class="hljs-attr">python-dotenv</span>==<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>  
<span class="hljs-attr">pydantic</span>==<span class="hljs-number">2.5</span>.<span class="hljs-number">2</span>  
<span class="hljs-attr">fastapi</span>==<span class="hljs-number">0.104</span>.<span class="hljs-number">1</span>  
<span class="hljs-attr">uvicorn</span>==<span class="hljs-number">0.24</span>.<span class="hljs-number">0</span>  
<span class="hljs-attr">redis</span>==<span class="hljs-number">4.6</span>.<span class="hljs-number">0</span>  
<span class="hljs-attr">faiss-cpu</span>==<span class="hljs-number">1.7</span>.<span class="hljs-number">4</span>
</code></pre>
<p>å¤„ç†æ–¹æ³•ï¼šåˆ é™¤ç°æœ‰ç¯å¢ƒï¼Œé‡æ–°åˆ›å»ºå¹¶å®‰è£…é”å®šç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rm</span>Â -rf dify-env  
python -m venv dify-env  
<span class="hljs-built_in">source</span>Â dify-env/bin/activate  
pip install -r requirements.txt
</code></pre>
<p><strong>APIè°ƒç”¨å¤±è´¥</strong>æ’æŸ¥æ­¥éª¤ï¼šé¦–å…ˆæ£€æŸ¥Difyçš„APIå¯†é’¥æ˜¯å¦å…·æœ‰æ­£ç¡®æƒé™ï¼Œå…¶æ¬¡éªŒè¯ç½‘ç»œè¿æ¥ï¼ˆç‰¹åˆ«æ˜¯ç§æœ‰åŒ–éƒ¨ç½²æ—¶çš„é˜²ç«å¢™è®¾ç½®ï¼‰ï¼Œæœ€åæŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—ã€‚Difyçš„"æ—¥å¿—"é¡µé¢æä¾›å·¥å…·è°ƒç”¨çš„å®Œæ•´è®°å½•ï¼ŒåŒ…æ‹¬è¯·æ±‚å‚æ•°å’Œå“åº”å†…å®¹ã€‚</p>
<p><strong>æ€§èƒ½ç“¶é¢ˆ</strong>è¯Šæ–­æµç¨‹ï¼šä½¿ç”¨LangChainçš„ tracing åŠŸèƒ½è¯†åˆ«æ…¢ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¯ç”¨LangChainè¿½è¸ª  </span>
importÂ langchain  
<span class="hljs-attr">langchain.verbose</span> =Â <span class="hljs-literal">True</span>  
<span class="hljs-attr">langchain.debug</span> =Â <span class="hljs-literal">True</span>  
  
<span class="hljs-comment"># æˆ–ä½¿ç”¨LangSmith  </span>
os.environ<span class="hljs-section">["LANGCHAIN_TRACING_V2"]</span> =Â "true"  
os.environ<span class="hljs-section">["LANGCHAIN_API_KEY"]</span> =Â "your_langsmith_key"  
os.environ<span class="hljs-section">["LANGCHAIN_PROJECT"]</span> =Â "dify-integration"
</code></pre>
<p><strong>å®‰å…¨é—®é¢˜</strong>ä¸å¯å¿½è§†ã€‚ç¡®ä¿æ‰€æœ‰APIå¯†é’¥é€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’ï¼Œä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ã€‚Difyç§æœ‰åŒ–éƒ¨ç½²æ—¶ï¼Œå¯ç”¨HTTPSå¹¶é…ç½®IPç™½åå•ï¼Œé™åˆ¶ç®¡ç†æ¥å£è®¿é—®ã€‚LangChainå·¥å…·è°ƒç”¨ä½¿ç”¨æ²™ç®±ç¯å¢ƒï¼Œç‰¹åˆ«æ˜¯ä»£ç æ‰§è¡Œç±»å·¥å…·ã€‚</p>
<h2 data-id="heading-6">æœªæ¥å±•æœ›ä¸è¿›é˜¶æ–¹å‘</h2>
<p>Difyä¸LangChainçš„é›†æˆæŠ€æœ¯æ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œä»¥ä¸‹è¶‹åŠ¿å€¼å¾—å…³æ³¨ï¼š</p>
<p><strong>å¤šæ¨¡æ€èƒ½åŠ›</strong>å°†æˆä¸ºä¸‹ä¸€ä»£åº”ç”¨çš„æ ‡é…ã€‚Difyå·²æ”¯æŒå›¾åƒå’Œè¯­éŸ³è¾“å…¥ï¼Œç»“åˆLangChainçš„å¤šæ¨¡æ€æ¨¡å‹è°ƒç”¨ï¼Œå¯æ„å»ºæ›´è‡ªç„¶çš„äº¤äº’ä½“éªŒã€‚ä¾‹å¦‚ï¼Œé›¶å”®åœºæ™¯ä¸­ï¼Œç”¨æˆ·ä¸Šä¼ å•†å“å›¾ç‰‡å³å¯è·å–ä»·æ ¼å¯¹æ¯”å’Œè´­ä¹°å»ºè®®ã€‚</p>
<p><strong>æ™ºèƒ½ä½“åä½œ</strong>ç³»ç»Ÿè§£å†³å¤æ‚ä»»åŠ¡ã€‚é€šè¿‡Difyç¼–æ’å¤šä¸ªLangChainæ™ºèƒ½ä½“ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“ä¸“æ³¨äºç‰¹å®šé¢†åŸŸï¼ˆå¦‚æ³•å¾‹ã€è´¢åŠ¡ã€æŠ€æœ¯æ”¯æŒï¼‰ï¼Œå®ç°é—®é¢˜çš„åˆ†å¸ƒå¼è§£å†³ã€‚æŸå’¨è¯¢å…¬å¸å·²ç”¨æ­¤æ¶æ„å°†é¡¹ç›®ææ¡ˆç”Ÿæˆæ—¶é—´ä»3å¤©ç¼©çŸ­è‡³4å°æ—¶ã€‚</p>
<p><strong>LLMOpså®è·µ</strong>è‡ªåŠ¨åŒ–æ¨¡å‹ä¼˜åŒ–ã€‚Difyçš„æ ‡æ³¨åŠŸèƒ½ç»“åˆLangChainçš„è¯„ä¼°æ¡†æ¶ï¼Œå½¢æˆ"æ•°æ®æ”¶é›†â†’æ¨¡å‹å¾®è°ƒâ†’æ•ˆæœè¯„ä¼°"çš„é—­ç¯ã€‚ä¼ä¸šå¯é€šè¿‡ç”¨æˆ·åé¦ˆæŒç»­ä¼˜åŒ–ç§æœ‰æ¨¡å‹ï¼Œä½¿å›ç­”å‡†ç¡®ç‡æ¯æœˆæå‡5-8%ã€‚</p>
<p><strong>è¾¹ç¼˜è®¡ç®—éƒ¨ç½²</strong>æ‹“å±•åº”ç”¨åœºæ™¯ã€‚éšç€æ¨¡å‹å°å‹åŒ–æŠ€æœ¯çš„å‘å±•ï¼ŒDifyä¸LangChainçš„è½»é‡ç‰ˆæœ¬å¯éƒ¨ç½²åœ¨è¾¹ç¼˜è®¾å¤‡ï¼Œå¦‚å·¥å‚çš„å·¥ä¸šå¹³æ¿æˆ–åŒ»ç–—ç°åœºçš„ç§»åŠ¨ç»ˆç«¯ï¼Œå®ç°ä½å»¶è¿Ÿã€é«˜éšç§çš„AIåº”ç”¨ã€‚</p>
<p>è¿›é˜¶å­¦ä¹ è·¯å¾„å»ºè®®ï¼šæŒæ¡LangGraphæ„å»ºçŠ¶æ€ç®¡ç†çš„å¤æ‚å·¥ä½œæµï¼Œå­¦ä¹ Difyçš„æ’ä»¶å¼€å‘æ‰©å±•ç³»ç»Ÿèƒ½åŠ›ï¼Œç ”ç©¶RAGä¸å¾®è°ƒç»“åˆçš„çŸ¥è¯†æ³¨å…¥æŠ€æœ¯ã€‚é€šè¿‡å‚ä¸å¼€æºç¤¾åŒºï¼ˆDifyåœ¨GitHubå·²æœ‰4.4ä¸‡æ˜Ÿæ ‡ï¼‰ï¼Œè·Ÿè¸ªæœ€æ–°æŠ€æœ¯åŠ¨æ€å’Œæœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-7">ç»“è¯­ï¼šé‡Šæ”¾AIç”Ÿäº§åŠ›çš„æ— é™å¯èƒ½</h2>
<p>Difyä¸LangChain v1.0çš„é›†æˆï¼Œä»£è¡¨äº†AIåº”ç”¨å¼€å‘çš„æ–°èŒƒå¼â€”â€”æ— éœ€åœ¨æ˜“ç”¨æ€§å’Œçµæ´»æ€§ä¹‹é—´å¦¥åã€‚é€šè¿‡æœ¬æ–‡ä»‹ç»çš„äº”ä¸ªæ­¥éª¤ï¼Œæ‚¨å·²ç»æŒæ¡äº†æ„å»ºä¼ä¸šçº§RAGåº”ç”¨çš„æ ¸å¿ƒæŠ€æœ¯ï¼šä»Difyçš„å¯è§†åŒ–å·¥ä½œæµè®¾è®¡ï¼Œåˆ°LangChainçš„é«˜çº§æ£€ç´¢å®ç°ï¼›ä»æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ç­–ç•¥ï¼Œåˆ°å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™å°†è¿™äº›çŸ¥è¯†åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­äº†ã€‚æ— è®ºæ‚¨æ˜¯å¸Œæœ›æå‡å®¢æœæ•ˆç‡ã€ä¼˜åŒ–å†…éƒ¨çŸ¥è¯†åº“ï¼Œè¿˜æ˜¯æ„å»ºå…¨æ–°çš„AIäº§å“ï¼ŒDifyä¸LangChainçš„ç»„åˆéƒ½èƒ½ä¸ºæ‚¨æä¾›å¼ºå¤§çš„æŠ€æœ¯æ”¯æ’‘ã€‚è®°ä½ï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹å¼æ˜¯åŠ¨æ‰‹å®è·µâ€”â€”å¼€å§‹æ„å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªé›†æˆåº”ç”¨ï¼Œä½“éªŒAIç”Ÿäº§åŠ›çš„é©å‘½æ€§æå‡ï¼</p>
<h2 data-id="heading-8">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å·²æ­»ï¼Œaiå½“ç«‹ï¼šgemini3å†™çš„ç«æŸ´äººå°„å‡»å°æ¸¸æˆ]]></title>    <link>https://juejin.cn/post/7574382925761953830</link>    <guid>https://juejin.cn/post/7574382925761953830</guid>    <pubDate>2025-11-20T05:59:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574382925761953830" data-draft-id="7574382925761806374" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å·²æ­»ï¼Œaiå½“ç«‹ï¼šgemini3å†™çš„ç«æŸ´äººå°„å‡»å°æ¸¸æˆ"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹,Gemini"/> <meta itemprop="datePublished" content="2025-11-20T05:59:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹œæ— å¿§"/> <meta itemprop="url" content="https://juejin.cn/user/2797611742923502"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å·²æ­»ï¼Œaiå½“ç«‹ï¼šgemini3å†™çš„ç«æŸ´äººå°„å‡»å°æ¸¸æˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2797611742923502/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹œæ— å¿§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T05:59:19.000Z" title="Thu Nov 20 2025 05:59:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e1a15a843e047569a93d6f077c4a44d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouc5peg5b-n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764223159&amp;x-signature=OLXNFIQfRKA3mlssWeHqF%2Fleevg%3D" alt="PixPin_2025-11-20_13-38-38.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad90ccb67047402994f229bf04587053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouc5peg5b-n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764223159&amp;x-signature=nlRBvhVGl3npxP3QKyX2nrrlr0Y%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25bcab3d9b684ede8dfca64f3b32805b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouc5peg5b-n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764223159&amp;x-signature=5mUXOp14XcwXu%2FNh7syMG3qPq14%3D" alt="image.png" loading="lazy"/>
<a href="https://code.juejin.cn/pen/7574677339096023082" target="_blank" title="https://code.juejin.cn/pen/7574677339096023082">code.juejin.cn/pen/7574677â€¦</a>
<span href="https://code.juejin.cn/pen/7574677339096023082" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7574677339096023082" data-src="https://code.juejin.cn/pen/7574677339096023082" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span>
è¿™æ¬¾ã€Šç«æŸ´äººï¼šç»ˆæçˆ†è£‚ (Stickman: Ultimate Burst)ã€‹ç›®å‰å·²ç»å…·å¤‡äº†ç›¸å½“å®Œæ•´ä¸”çˆ½å¿«çš„ Roguelite å°„å‡»ä¸å¹³å°è·³è·ƒä½“éªŒã€‚ä»¥ä¸‹æ˜¯å½“å‰ç‰ˆæœ¬çš„åŠŸèƒ½æ€»ç»“ï¼š</p>
<p><strong>1. æ ¸å¿ƒæˆ˜æ–—ä¸æ“ä½œ (Core Gameplay)</strong></p>
<ul>
<li>
<p><strong>æ™ºèƒ½ç«æ§ç³»ç»Ÿ</strong>ï¼šè§’è‰²ä¼šè‡ªåŠ¨é”å®šè§†é‡å†…æœ€è¿‘çš„æ•Œäººå¤´éƒ¨/èº«ä½“å¹¶è‡ªåŠ¨å°„å‡»ï¼Œç©å®¶åªéœ€ä¸“æ³¨äºèµ°ä½ã€‚</p>
</li>
<li>
<p><strong>æµç•…è·‘é…·</strong>ï¼šæ”¯æŒäºŒæ®µè·³ (Double Jump)ã€è¹¬å¢™è·³ (Wall Jump) å’Œä¸‹ç©¿å¹³å°ï¼Œæ‰‹æ„Ÿé¡ºæ»‘ã€‚</p>
</li>
<li>
<p><strong>å››ç§ç‰¹è‰²æ­¦å™¨</strong>ï¼š</p>
<ul>
<li><strong>M1911</strong>ï¼šå‡è¡¡å‹åˆå§‹æ‰‹æªã€‚</li>
<li><strong>VECTOR</strong>ï¼šæé«˜å°„é€Ÿçš„å†²é”‹æªã€‚</li>
<li><strong>AA-12</strong>ï¼šè¿‘æˆ˜çˆ†å‘æå¼ºçš„éœ°å¼¹æªã€‚</li>
<li><strong>ç£è½¨ç‚® (Railgun)</strong> ï¼šæ‹¥æœ‰ç©¿é€æ•ˆæœçš„æ¯ç­æ€§æ¿€å…‰æ­¦å™¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>æˆ˜å‰æ•´å¤‡</strong>ï¼šæ¸¸æˆå¼€å§‹å‰å¯ä»¥ç›´æ¥é€‰æ‹©å¿ƒä»ªçš„ä¸»æ­¦å™¨å…¥åœºã€‚</p>
</li>
</ul>
<p><strong>2. ç‰¹è‰²æœºåˆ¶ (Unique Mechanics)</strong></p>
<ul>
<li><strong>æ— ä¼¤æ¥è§¦ (No Contact Damage)</strong> ï¼šæ™®é€šæ•Œäººçš„èº«ä½“ç¢°æ’ä¸å†é€ æˆä¼¤å®³ï¼Œé¼“åŠ±ç©å®¶åœ¨æ€ªç¾¤ä¸­ç©¿æ¢­ã€‚</li>
<li><strong>å°¸ä½“çˆ†ç‚¸ (Corpse Explosion)</strong> ï¼šæå…·ç­–ç•¥æ€§çš„æœºåˆ¶ã€‚æ•Œäººæ­»åä¼šç•™ä¸‹å°¸ä½“ï¼ŒçŸ­æš‚å»¶è¿Ÿåå‘ç”Ÿå‰§çƒˆçˆ†ç‚¸ã€‚ç©å®¶æ€æ•Œåå¿…é¡»è¿…é€Ÿè¿œç¦»ï¼Œæˆ–è€…åˆ©ç”¨ä½ç§»å¼•è¯±æ•Œäººã€‚</li>
<li><strong>æ”»å‡»å¸è¡€ (Lifesteal)</strong> ï¼šå­å¼¹å‡»ä¸­æ•Œäººä¼šå›å¤å¾®é‡ç”Ÿå‘½å€¼ï¼Œå¹¶ä¼´æœ‰ç»¿è‰²çš„æ²»ç–—æ•°å­—é£˜å­—ï¼Œå¢å¼ºç»­èˆªèƒ½åŠ›ã€‚</li>
<li><strong>å®‰å…¨å…‰æŸ± (Safety Pillar)</strong> ï¼šä¸€é“çº¢è‰²çš„æ¿€å…‰å¢™ä¼šè·Ÿéšç©å®¶çš„æ¨è¿›è¿›åº¦ï¼ˆåŸºäºåœ°é¢åæ ‡ï¼‰ï¼Œé˜²æ­¢å› åœ°å›¾åŠ¨æ€æ¸…ç†è€Œæ‰è½è™šç©ºã€‚</li>
</ul>
<p><strong>3. æ•Œäººä¸ AI (Enemies)</strong></p>
<ul>
<li>
<p><strong>å…¨å‘˜ç«æŸ´äººåŒ–</strong>ï¼šæ•Œäººæ‹¥æœ‰å„è‡ªç‹¬ç‰¹çš„ç«æŸ´äººé€ å‹å’ŒåŠ¨ç”»ã€‚</p>
<ul>
<li><strong>Runner (æ©™)</strong> ï¼šå¿«é€Ÿå¥”è·‘çš„è¿‘æˆ˜å•ä½ã€‚</li>
<li><strong>Shooter (ç™½)</strong> ï¼šè¿œç¨‹å•ä½ï¼Œä¼šå‘å°„å‡é€Ÿçš„çº¢è‰²å…‰çƒå­å¼¹ã€‚</li>
<li><strong>Drone (é’)</strong> ï¼šæ— è§†åœ°å½¢é£è¡Œçš„æœºæ¢°å•ä½ã€‚</li>
<li><strong>Shield (è“ç›¾)</strong> ï¼šæ‰‹æŒå¤§ç›¾ï¼Œèƒ½æ ¼æŒ¡æ­£é¢å­å¼¹ï¼Œéœ€ç»•åæ”»å‡»ã€‚</li>
</ul>
</li>
<li>
<p><strong>BOSS æˆ˜</strong>ï¼šæ¯10å…³å‡ºç°å·¨å¤§çš„æ³°å¦çº§ BOSSï¼Œæ‹¥æœ‰éœ‡åœ°è·³è·ƒå’Œå…¨å±å¼¹å¹•æš´èµ°æŠ€èƒ½ã€‚</p>
</li>
</ul>
<p><strong>4. ç»æµä¸æˆé•¿ (Progression)</strong></p>
<ul>
<li>
<p><strong>æ³¢æ¬¡ç³»ç»Ÿ</strong>ï¼šæ— é™ç”Ÿæˆçš„å…³å¡ï¼Œæ•Œäººæ•°é‡éšæ³¢æ¬¡å¢åŠ ã€‚</p>
</li>
<li>
<p><strong>é»‘å¸‚å•†åº—</strong>ï¼šå‡»è´¥ BOSS åè§¦å‘ã€‚</p>
</li>
<li>
<p><strong>å‡çº§é¡¹</strong>ï¼š</p>
<ul>
<li>è´­ä¹°/è§£é”æ–°æ­¦å™¨ã€‚</li>
<li><strong>DMG</strong>ï¼šä¼¤å®³æå‡ã€‚</li>
<li><strong>SPD</strong>ï¼šå°„é€Ÿæ”¹è‰¯ã€‚</li>
<li><strong>MAG</strong>ï¼šå¼¹å¤¹æ‰©å®¹ã€‚</li>
<li><strong>RELOAD</strong>ï¼šæ¢å¼¹é€Ÿåº¦åŠ å¿«ã€‚</li>
<li><strong>HEAL</strong>ï¼šè´­ä¹°åŒ»ç–—åŒ…ã€‚</li>
</ul>
</li>
<li>
<p><strong>é˜ˆå€¼é™åˆ¶</strong>ï¼šå„é¡¹å±æ€§å‡çº§éƒ½æœ‰æœ€å¤§ç­‰çº§é™åˆ¶ï¼Œé˜²æ­¢æ•°å€¼å´©åã€‚</p>
</li>
</ul>
<p><strong>5. è§†å¬è¡¨ç° (Juice &amp; Feedback)</strong></p>
<ul>
<li>
<p><strong>ç¨‹åºåŒ–åŠ¨ç”»</strong>ï¼šä¸»è§’å’Œæ•Œäººæ‹¥æœ‰åŸºäºä»£ç ç”Ÿæˆçš„è·‘æ­¥æ‘†è…¿ã€ç„å‡†æ‰‹è‡‚è·ŸéšåŠ¨ç”»ã€‚</p>
</li>
<li>
<p><strong>æ‰“å‡»æ„Ÿåé¦ˆ</strong>ï¼š</p>
<ul>
<li><strong>å±å¹•éœ‡åŠ¨ (Screen Shake)</strong> ï¼šå¼€ç«ã€çˆ†ç‚¸ã€å—ä¼¤æ—¶æœ‰å¼ºçƒˆçš„éœ‡å±æ„Ÿã€‚</li>
<li><strong>é¡¿å¸§ (Hit Stop)</strong> ï¼šå‡»æ€ç¬é—´æœ‰å¾®å°çš„å¡é¡¿ï¼Œå¼ºåŒ–æ‰“å‡»åŠ›åº¦ã€‚</li>
<li><strong>ç²’å­ç‰¹æ•ˆ</strong>ï¼šæŠ›å£³ã€æªå£ç„°ã€è¡€çˆ†ç²’å­ã€äºŒæ®µè·³çƒŸå°˜ã€‚</li>
</ul>
</li>
<li>
<p><strong>åŠ¨æ€éŸ³æ•ˆ</strong>ï¼šä½¿ç”¨ Web Audio API å®æ—¶åˆæˆçš„å¤å¤é£æ ¼æªå£°ã€çˆ†ç‚¸å£°å’Œç‚¹å‡»åé¦ˆã€‚</p>
</li>
</ul>
<p>ç›®å‰çš„ç‰ˆæœ¬å·²ç»æ˜¯ä¸€ä¸ªéå¸¸è€ç©çš„å°å‹åŠ¨ä½œæ¸¸æˆäº†ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>