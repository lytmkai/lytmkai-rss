<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ğŸ¤ äº†è§£ CDP (Chrome DevTools Protocol)ï¼šbrowser-use èƒŒåçš„éšè—åŠŸè‡£]]></title>    <link>https://juejin.cn/post/7581693431740170303</link>    <guid>https://juejin.cn/post/7581693431740170303</guid>    <pubDate>2025-12-09T15:07:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581693431740170303" data-draft-id="7581669438577442852" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¤ äº†è§£ CDP (Chrome DevTools Protocol)ï¼šbrowser-use èƒŒåçš„éšè—åŠŸè‡£"/> <meta itemprop="keywords" content="å‰ç«¯,Puppeteer,Chrome"/> <meta itemprop="datePublished" content="2025-12-09T15:07:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤ä»£çƒƒ"/> <meta itemprop="url" content="https://juejin.cn/user/43636193770071"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¤ äº†è§£ CDP (Chrome DevTools Protocol)ï¼šbrowser-use èƒŒåçš„éšè—åŠŸè‡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/43636193770071/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤ä»£çƒƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T15:07:09.000Z" title="Tue Dec 09 2025 15:07:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Chrome DevTools Protocol (CDP)</strong> æ˜¯ Chromium æµè§ˆå™¨è°ƒè¯•å·¥å…·çš„æ ¸å¿ƒé€šä¿¡åè®®ï¼šå®ƒåŸºäº JSON æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡ WebSocket å®ç°å®¢æˆ·ç«¯ä¸æµè§ˆå™¨å†…æ ¸ä¹‹é—´çš„åŒå‘å®æ—¶äº¤äº’ã€‚</p>
<p>åŸºäº CDP çš„å¼€æºäº§å“æœ‰è®¸å¤šï¼Œå…¶ä¸­æœ€æœ‰åçš„åº”è¯¥æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FChromeDevTools%2Fdevtools-frontend" target="_blank" title="https://github.com/ChromeDevTools/devtools-frontend" ref="nofollow noopener noreferrer">Chrome Devtools Frontend</a>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2F" target="_blank" title="https://pptr.dev/" ref="nofollow noopener noreferrer">Puppeteer</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fplaywright" target="_blank" title="https://github.com/microsoft/playwright" ref="nofollow noopener noreferrer">Playwright</a> äº†ã€‚</p>
<p>Chrome Devtools Frontend å°±æ˜¯å‰ç«¯å¼€å‘è€…å¤©å¤©æŒ‰ F12 å”¤èµ·çš„è°ƒè¯•é¢æ¿ï¼Œè€Œ Puppeteer å’Œ Playwright æ˜¯éå¸¸æœ‰åçš„æµè§ˆå™¨è‡ªåŠ¨åŒ–æ“ä½œå·¥å…·ï¼Œå¦‚ä»Šçš„ agent browser toolï¼ˆä¾‹å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fplaywright-mcp" target="_blank" title="https://github.com/microsoft/playwright-mcp" ref="nofollow noopener noreferrer">playwright-mcp</a>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbrowser-use%2Fbrowser-use" target="_blank" title="https://github.com/browser-use/browser-use" ref="nofollow noopener noreferrer">browser-use</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FChromeDevTools%2Fchrome-devtools-mcp" target="_blank" title="https://github.com/ChromeDevTools/chrome-devtools-mcp" ref="nofollow noopener noreferrer">chrome-devtools-mcp</a>ï¼‰ä¹Ÿæ˜¯åŸºäºå®ƒä»¬æ„å»ºçš„ã€‚å¯ä»¥è¯´æ¯ä¸ªå¼€å‘è€…éƒ½åœ¨ä½¿ç”¨ CDPï¼Œä½†å› å®ƒçš„å®šä½æ¯”è¾ƒåº•å±‚ï¼Œå¤§å®¶å¸¸å¸¸åˆæ„è¯†ä¸åˆ°ä»–çš„å­˜åœ¨ã€‚</p>













<table><thead><tr><th>Chrome Devtools Frontend</th><th>Puppeteer</th></tr></thead><tbody><tr><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58fc0c7fcb5c43f88206432327f5c557~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=H65vL%2Bv7rZanFTzqlwWbj%2F2i9Ig%3D" alt="" loading="lazy"/></td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b4a23d85cd04ae5b5fc0b49a4845518~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=xSvHO2Cb2Njx2ueJxY5wgf5oc%2B4%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<br/>
<p>CDP æœ‰è‡ªå·±çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2F" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£ç«™</a>å’Œç›¸å…³çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FChromeDevTools%2Fdevtools-protocol" target="_blank" title="https://github.com/ChromeDevTools/devtools-protocol" ref="nofollow noopener noreferrer">Github åœ°å€</a>ï¼Œç§‰æ‰¿äº† Google å¼€æºé¡¹ç›®çš„ä¸€è´¯é£æ ¼ï¼Œç®€æ´ï¼Œå…‹åˆ¶ï¼Œå°±æ˜¯æ²¡ä»€ä¹ˆå¯è¯»æ€§ã€‚æ–‡æ¡£å’Œé¡¹ç›®éƒ½æ˜¯æ ¹æ®æºç å˜åŠ¨è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ‰€ä»¥åªèƒ½ç”¨æ¥åš API çš„æŸ¥è¯¢ï¼Œè¿™ä¹Ÿå¯¼è‡´å¦‚æœæ²¡æœ‰ç›¸å…³çš„é¢†åŸŸçŸ¥è¯†ï¼Œç›´æ¥é˜…è¯»ç›¸å…³æ–‡æ¡£æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeepwiki.com%2FChromeDevTools%2Fdevtools-protocol" target="_blank" title="https://deepwiki.com/ChromeDevTools/devtools-protocol" ref="nofollow noopener noreferrer">deepwiki</a> æ˜¯æ‹¿ä¸åˆ°ä»€ä¹ˆæœ‰å»ºè®¾æ€§å†…å®¹çš„ã€‚</p>
<p>ä¸Šé¢çš„é‚£äº›åæ§½ï¼Œä¹Ÿæ˜¯æˆ‘å†™æœ¬æ–‡çš„åŸå› ï¼Œäº’è”ç½‘ä¸Šä»‹ç» CDP çš„åšæ–‡å¤ªå°‘äº†ï¼Œä¹Ÿæ²¡ä»€ä¹ˆç³»ç»Ÿæ€§çš„æ¶æ„åˆ†æï¼Œæ‰€ä»¥ä¸å¦‚æˆ‘è‡ªå·±æ¥å†™ä¸°å¯Œä¸€ä¸‹ AI çš„è¯­æ–™åº“ï¼ˆbushiï¼‰ã€‚</p>
<h2 data-id="heading-0">åè®®æ ¼å¼</h2>
<p>é¦–å…ˆ CDP åè®®æ˜¯ä¸€ä¸ªå…¸å‹çš„ CS æ¶æ„ï¼Œè¿™é‡Œæˆ‘ä»¬æ‹¿ Chrome Devtools ä¸ºä¾‹ï¼š</p>
<ul>
<li><strong>Chrome Devtools</strong>ï¼šå°±æ˜¯ <strong>Client</strong>ï¼Œç”¨æ¥åšè°ƒè¯•æ•°æ®çš„ UI å±•ç¤ºï¼Œæ–¹ä¾¿ç”¨æˆ·é˜…è¯»</li>
<li><strong>CDP</strong>ï¼šå°±æ˜¯è¿æ¥ Client-Server çš„ <strong>Protocol</strong>ï¼Œå®šä¹‰ API çš„å„ç§æ ¼å¼å’Œç»†èŠ‚</li>
<li><strong>Chromium/Chrome</strong>ï¼šå°±æ˜¯ <strong>Server</strong>ï¼Œç”¨æ¥äº§ç”Ÿå„ç§æ•°æ®</li>
</ul>
<p>CDP åè®®çš„æ ¼å¼åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jsonrpc.org%2Fspecification" target="_blank" title="https://www.jsonrpc.org/specification" ref="nofollow noopener noreferrer">JSON-RPC 2.0</a> åšäº†ä¸€äº›è½»é‡çš„å®šåˆ¶ã€‚é¦–å…ˆæ˜¯å»æ‰äº† JSON ç»“æ„ä½“ä¸­çš„ <code>"jsonrpc": "2.0"</code> è¿™ç§æ¯æ¬¡éƒ½è¦å‘é€çš„å†—ä½™ä¿¡æ¯ã€‚å¯ä»¥çœ‹ä¸‹é¢å‡ ä¸ª CDP çš„å®é™…ä¾‹å­ï¼š</p>
<p>é¦–å…ˆæ˜¯å¸¸è§„çš„ JSON RFC Request/Responseï¼Œç»†èŠ‚ä¸ç”¨å…³æ³¨ï¼Œå°±çœ‹æ•´ä½“çš„æ ¼å¼ï¼š</p>
<p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/404ef253e3e7477e84e80d57dd18f894~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=tW6ygST3zI61YPx7bAYtgpXrFpA%3D" width="50%" alt="Target.setDiscoverTargets" loading="lazy"/>
</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// Client -&gt; Chromium</span>
{
  <span class="hljs-string">"id"</span>:<span class="hljs-number">2</span>
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"Target.setDiscoverTargets"</span>,
  <span class="hljs-string">"params"</span>: {<span class="hljs-string">"discover"</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">"filter"</span>:[{}]},
}

<span class="hljs-comment">// Chromium -&gt; Client</span>
{
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"result"</span>: {}
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™å°±æ˜¯ä¸€ä¸ªç»å…¸çš„ JSON RFC è°ƒç”¨ï¼Œç”¨ id ä¸²èµ· request å’Œ response çš„å…³ç³»ï¼Œç„¶å request ä¸­é€šè¿‡ <code>method</code> å’Œ <code>params</code> æŠŠè¯·æ±‚æ–¹æ³•å’Œè¯·æ±‚å‚æ•°å¸¦ä¸Šï¼›response é€šè¿‡ <code>result</code> å¸¦ä¸Šå“åº”ç»“æœã€‚</p>
<p>å…³äº JSON RFC Notificationï¼ˆEventï¼‰çš„ä¾‹å­å¦‚ä¸‹ï¼Œå®šä¹‰ä¹Ÿå¾ˆæ¸…æ™°ï¼Œå°±ä¸å±•å¼€äº†ï¼š</p>
<p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42364511aa564fbb882c1741747b5ca3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=qpvAhUMxHWvnwa1Bo5IzxmL6zlw%3D" width="50%" alt="Target.targetCreated" loading="lazy"/>
</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">{
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"Target.targetCreated"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"targetInfo"</span>: {
      <span class="hljs-string">"targetId"</span>: <span class="hljs-string">"12345"</span>,
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"browser"</span>,
      <span class="hljs-string">"title"</span>: <span class="hljs-string">""</span>,
      <span class="hljs-string">"url"</span>: <span class="hljs-string">""</span>,
      <span class="hljs-string">"attached"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">"canAccessOpener"</span>: <span class="hljs-literal">false</span>
    }
  }
}
</code></pre>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJSON RFC åªæ˜¯ä¸€å¥—åè®®æ ‡å‡†ï¼Œå®ƒå…¶å®å¯ä»¥è·‘åœ¨ä»»æ„çš„æ”¯æŒåŒå‘é€šè®¯çš„é€šä¿¡åè®®ä¸Šã€‚ç›®å‰ CDP çš„ä¸»æµæ–¹æ¡ˆè¿˜æ˜¯è·‘åœ¨ WebSocket ä¸Šï¼ˆä¹Ÿå¯ä»¥ç”¨æœ¬åœ° pipe çš„æ–¹å¼è¿æ¥ï¼Œä½†ç”¨çš„äººå°‘ï¼‰ï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥å€ŸåŠ©ä»»æ„çš„ Websocket å¼€æºåº“æ­å»ºå‡ºåˆé€‚çš„äº§å“ã€‚</p>
<br/>
<h2 data-id="heading-1">Domain æ•´ä½“åˆ†ç±»</h2>
<p>å¦‚æœç›´æ¥çœ‹ CDP çš„æ–‡æ¡£ï¼Œä¼šå‘ç°å®ƒçš„ç›®å½•ä¾§è¾¹æ åªæœ‰ä¸€åˆ—ï¼Œé‚£å°±æ˜¯ Domainsï¼Œç„¶åä¸‹é¢æœ‰ä¸€å †çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰çš„åè¯ï¼šDOMï¼ŒCSSï¼ŒConsoleï¼ŒDebugger ç­‰ç­‰...</p>













<table><thead><tr><th>CDP Domains</th><th>Chrome Devtools Frontend</th></tr></thead><tbody><tr><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caaf795166e64422af13c099195561d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=uKibT6F6hhwmV5NF5ueUJl1TIzE%3D" alt="" loading="lazy"/></td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0dc754f66f2e4286a51da6bae6d3787a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=NAdtwX2RUDJTM6sVOhSmONY%2Fsp4%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<p>å…¶å®è¿™äº› Domain éƒ½å¯ä»¥å’Œ Chrome Devtools è”ç³»èµ·æ¥çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä» Chrome Devtools çš„å„ç§åŠŸèƒ½åæ¨ CDP ä¸­çš„å„ç§ Domain ä½œç”¨ï¼š</p>
<ul>
<li><strong>Elements</strong>ï¼šä¼šç”¨åˆ° DOMï¼ŒCSS ç­‰ domain çš„ API</li>
<li><strong>Console</strong>ï¼šä¼šç”¨åˆ° Logï¼ŒRuntime ç­‰ domain çš„ API</li>
<li><strong>Network</strong>ï¼šä¼šç”¨åˆ° Network ç­‰ domain çš„ API</li>
<li><strong>Performance</strong>ï¼šä¼šç”¨åˆ° Performanceï¼ŒEmulation ç­‰ domain çš„ API</li>
<li>......</li>
</ul>
<p>é‚£ä¹ˆåˆ°è¿™é‡Œå°±æœ‰ä¸€ä¸ªæ¯”è¾ƒç›´è§‚çš„è®¤è¯†äº†ã€‚æˆ‘ä»¬å†è¿”å›çœ‹ CDP æœ¬èº«ï¼ŒCDP å…¶å®å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œç„¶åä¸‹é¢æœ‰ä¸åŒçš„ Domain åˆ†ç±»ï¼š</p>
<ul>
<li><strong>Browser Protocol</strong>ï¼šæµè§ˆå™¨ç›¸å…³çš„åè®®ï¼Œä¹‹ä¸‹çš„ Domain éƒ½æ˜¯å¹³å°ç›¸å…³çš„ï¼Œæ¯”å¦‚è¯´ Pageï¼ŒDOMï¼ŒCSSï¼ŒNetworkï¼Œéƒ½æ˜¯å’Œæµè§ˆå™¨åŠŸèƒ½ç›¸å…³</li>
<li><strong>JavaScript Protocol</strong>ï¼šJS å¼•æ“ç›¸å…³çš„åè®®ï¼Œä¸»è¦å›´ç»• JS å¼•æ“åŠŸèƒ½æœ¬èº«ï¼Œæ¯”å¦‚è¯´ Runtimeï¼ŒDebuggerï¼ŒHeapProfiler ç­‰ï¼Œéƒ½æ˜¯æ¯”è¾ƒçº¯ç²¹çš„ JS è¯­è¨€è°ƒè¯•åŠŸèƒ½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a0f160d77054854bd2820aff7f488a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=OoOCkjRBujMReK%2FcsD4%2BxbEP7vU%3D" alt="deepwiki ç»™å‡ºçš„ CDP Domains åˆ†ç±»" loading="lazy"/></p>
<p>äº†è§£äº† Domain çš„æ•´ä½“åˆ†ç±»ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬æ¢ç´¢ä¸€ä¸‹ Domain å†…éƒ¨çš„è¿è¡Œæµç¨‹ã€‚</p>
<h2 data-id="heading-2">Domain å†…éƒ¨é€šä¿¡</h2>
<p>ç†è§£æŸä¸ª Domain çš„è¿è¡Œæµç¨‹ï¼Œè¿˜æ˜¯è€åŠæ³•ï¼Œå¯¹ç…§ç€ <code>Chrome Devtools Frontend</code> çš„æŸä¸ªè°ƒè¯•é¢æ¿åæ¨ï¼Œè¿™æ ·ç†è§£èµ·æ¥æ˜¯æœ€å¿«çš„ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬æ‹¿ Console é¢æ¿ä¸ºä¾‹ï¼Œè¿™ä¸ªåŸºæœ¬ä¸Šæ˜¯ Web å¼€å‘è€…æ—¥å¸¸ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„åŠŸèƒ½äº†ã€‚</p>
<p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4a3dd170dfe406c9a62748d1d03addf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=Focsa5DZZEZHPikx8vTgfnYUmU8%3D" width="70%" loading="lazy"/>
</p>
<p>ä» UI é¢æ¿ä¸Šçœ‹æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œæœ‰ç­›é€‰ï¼Œåˆ†ç±»ï¼Œåˆ†ç»„ç­‰å„ç§é«˜çº§åŠŸèƒ½ï¼Œä½†ç»å¤§éƒ¨åˆ†çš„åŠŸèƒ½éƒ½æ˜¯å‰ç«¯ä¸Šçš„å®ç°ï¼Œè”ç³»åˆ°èƒŒåå’Œ Console ç›¸å…³çš„ CDP åè®®ï¼Œå…¶å®ä¸»è¦å°± 5 æ¡ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FLog%2F%23method-enable" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Log/#method-enable" ref="nofollow noopener noreferrer">Method: Log.enable</a>/<a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FLog%2F%23method-disable" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Log/#method-disable" ref="nofollow noopener noreferrer">Method: <strong>Log</strong>.disable</a>: å¼€å¯/å…³é—­å½“å‰é¡µé¢çš„ log æ—¥å¿—è¾“å‡ºåŠŸèƒ½</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FLog%2F%23event-entryAdded" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Log/#event-entryAdded" ref="nofollow noopener noreferrer">Event: Log.entryAdded</a>: æµè§ˆå™¨å†…éƒ¨äº§ç”Ÿæ—¥å¿—æ—¶è§¦å‘ï¼Œæ¯”å¦‚è¯´ä¸€äº›ç½‘ç»œé”™è¯¯ï¼Œå®‰å…¨é”™è¯¯</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FRuntime%2F%23event-consoleAPICalled" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Runtime/#event-consoleAPICalled" ref="nofollow noopener noreferrer">Event: Runtime.consoleAPICalled</a>: JS ä»£ç è°ƒç”¨ console API æ—¶è§¦å‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FRuntime%2F%23event-exceptionThrown" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Runtime/#event-exceptionThrown" ref="nofollow noopener noreferrer">Event: Runtime.exceptionThrown</a>: æœ‰æœªè¢«æ•è·çš„ JS é”™è¯¯æ—¶è§¦å‘</li>
</ul>
<br/>
<p>ä¸¾ä¸€ä¸ªçœŸå®çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨ Console é¢æ¿å…ˆå‘èµ·ä¸€ä¸ªä¸åˆè§„çš„ç½‘ç»œè¯·æ±‚ï¼Œç„¶åå† log ä¸€å¥è¯ï¼š</p>
<ul>
<li>é¦–å…ˆæ¯ä¸ªé¡µé¢æ‰“å¼€ Devtools çš„æ—¶å€™ï¼Œä¼šé»˜è®¤è°ƒç”¨ <code>Log.enable</code> å¯åŠ¨ log ç›‘å¬</li>
<li>æ‰‹åŠ¨ fetch ä¸€ä¸ªä¸åˆè§„çš„åœ°å€æ—¶ï¼Œæµè§ˆå™¨ä¼šå…ˆåšå®‰å…¨æ£€æŸ¥ï¼Œé€šè¿‡ <code>Log.entryAdded</code> æç¤ºä¸åˆè§„</li>
<li>å‘èµ·ä¸€ä¸ªçœŸå®çš„ç½‘ç»œè¯·æ±‚ï¼Œå¤±è´¥åä¼šé€šè¿‡ <code>Runtime.exceptionThrown</code> æç¤º Failed to fetch</li>
<li>æœ€åæ‰‹åŠ¨è°ƒç”¨ console APIï¼ŒCDP ä¼šå‘ä¸€ä¸ª <code>Runtime.consoleAPICalled</code> çš„è°ƒç”¨ log event</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80c5622ae54642fe972570dcc41dd180~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=djhVR8%2BMlIDN7xPY2mP9U4gGZao%3D" alt="" loading="lazy"/></p>
<p>æŠŠä¸Šé¢çš„çš„ä¾‹å­æŠ½è±¡ä¸€ä¸‹ï¼Œå…¶å®<strong>æ‰€æœ‰çš„ Domain çš„è°ƒç”¨æµç¨‹</strong>åŸºæœ¬éƒ½æ˜¯ä¸€æ ·çš„ï¼š</p>
<ul>
<li>é€šè¿‡ <code>Domain.enable</code> å¼€å¯æŸä¸ª Domain çš„è°ƒè¯•åŠŸèƒ½</li>
<li>å¼€å¯åŠŸèƒ½åï¼Œå°±å¯ä»¥åœ¨è¿™ä¸ªé˜¶æ®µå‘é€ç›¸å…³çš„ methods è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ç›‘å¬ Chrome å‘æ¥çš„å„ç§ event</li>
<li>é€šè¿‡ <code>Domain.disable</code> å…³é—­è¿™ä¸ª Domain çš„è°ƒè¯•åŠŸèƒ½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1bddb28db9449489cdf77b998d8c081~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=gQPanPxMyKtUwZQ9FoYyiNoWptY%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>éƒ¨åˆ† Domain å¹¶æ²¡æœ‰ enable/disable è¿™ä¸¤ä¸ª methodsï¼Œå…·ä½“æƒ…å†µå…·ä½“åˆ†æ</p>
</blockquote>
<h2 data-id="heading-3">Target: ç‰¹æ®Šçš„ Domain</h2>
<p>ä¸Šé¢ä»‹ç»äº† Domain çš„åˆ†ç±»å’Œ Domain å†…éƒ¨è¿è½¬çš„æ•´ä½“æµç¨‹ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ª Domain éå¸¸çš„ç‰¹æ®Šï¼Œé‚£å°±æ˜¯ <strong>Target</strong>ã€‚</p>
<h3 data-id="heading-4">type åˆ†ç±»</h3>
<p>Target æ˜¯ä¸€ä¸ªè¾ƒä¸ºæŠ½è±¡çš„æ¦‚è¿°ï¼Œå®ƒæŒ‡çš„æ˜¯æµè§ˆå™¨ä¸­çš„<strong>å¯äº¤äº’å®ä½“</strong>ï¼š</p>
<ul>
<li>æˆ‘åˆ›å»ºäº†ä¸€ä¸ª<strong>æµè§ˆå™¨</strong>ï¼Œé‚£ä¹ˆå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ª type ä¸ºã€Œbrowserã€çš„ Target</li>
<li>æµè§ˆå™¨é‡Œæœ‰ä¸€ä¸ª<strong>æ ‡ç­¾é¡µ</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡µé¢æœ¬èº«å°±æ˜¯ä¸€ä¸ª type ä¸ºã€Œpageã€çš„ Target</li>
<li>è¿™ä¸ªé¡µé¢é‡Œè¦åšä¸€äº›è€—æ—¶è®¡ç®—åˆ›å»ºäº†ä¸€ä¸ª <strong>Worker</strong>ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ª type ä¸ºã€Œworkerã€çš„ Target</li>
</ul>
<p>ç›®å‰ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.chromium.org%2Fchromium%2Fchromium%2Fsrc%2F%2B%2Fmain%3Acontent%2Fbrowser%2Fdevtools%2Fdevtools_agent_host_impl.cc%3Fss%3Dchromium%26q%3Df%3Adevtools%2520-f%3Aout%2520%2522%3A%3AkTypeTab%255B%255D%2522" target="_blank" title="https://source.chromium.org/chromium/chromium/src/+/main:content/browser/devtools/devtools_agent_host_impl.cc?ss=chromium&amp;q=f:devtools%20-f:out%20%22::kTypeTab%5B%5D%22" ref="nofollow noopener noreferrer">chromium æºç </a>ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒTarget çš„ type æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>browserï¼Œbrowser_uiï¼Œwebview</li>
<li>tabï¼Œpageï¼Œiframe</li>
<li>workerï¼Œshared_workerï¼Œservice_worker</li>
<li>workletï¼Œshared_storage_workletï¼Œauction_worklet</li>
<li>assistive_technologyï¼Œother</li>
</ul>
<p>ä»ä¸Šé¢çš„ target type å¯ä»¥çœ‹å‡ºï¼ŒTarget æ•´ä½“æ˜¯å±äºä¸€ä¸ª scope æ¯”è¾ƒå¤§çš„å®ä½“ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä»¥<strong>è¿›ç¨‹/<strong><strong>çº¿ç¨‹</strong></strong>ä½œä¸ºéš”ç¦»å•ä½</strong>åˆ†å‰²çš„ï¼Œæ¯ä¸ª type ä¸‹å¯èƒ½åŒ…å«å¤šä¸ª CDP domainï¼Œæ¯”å¦‚è¯´ page ä¸‹å°±æœ‰ Runtimeï¼ŒNetworkï¼ŒStorageï¼ŒLog ç­‰ domainï¼Œå…¶ä»–ç±»å‹åŒç†ã€‚</p>
<h3 data-id="heading-5">äº¤äº’æµç¨‹</h3>
<p>Target çš„å†…éƒ¨åˆ†ç±»æ¸…æ™°äº†ï¼Œé‚£ä¹ˆè¿˜å‰©é‡è¦çš„ä¸€ç¯ï¼š<strong>å¦‚ä½•å’Œ Target åšäº¤äº’</strong>ï¼Ÿ <br/></p>
<p>CDP è¿™é‡Œçš„é€»è¾‘æ˜¯ï¼Œå…ˆå‘ä¸ªè¯·æ±‚ï¼Œå‘ Target å‘èµ·äº¤äº’ç”³è¯·ï¼Œç„¶å Target å°±ä¼šç»™ä½ ä¸€ä¸ª sessionIdï¼Œä¹‹åçš„äº¤äº’å°±åœ¨è¿™ä¸ª session ä¿¡é“ä¸Šè¿›è¡Œã€‚CDP åœ¨è¿™é‡Œä¹Ÿå¯¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jsonrpc.org%2Fspecification" target="_blank" title="https://www.jsonrpc.org/specification" ref="nofollow noopener noreferrer">JSON-RPC 2.0</a> åšäº†ä¸€ä¸ªè½»é‡å®šåˆ¶ï¼Œå®ƒä»¬æŠŠ sessionId æ”¾åœ¨äº† JSON çš„æœ€å¤–å±‚ï¼Œå’Œ id åŒä¸€ä¸ªå±‚çº§ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">{
  <span class="hljs-attr">method</span>: <span class="hljs-string">"SystemInfo.getInfo"</span>,
  <span class="hljs-attr">id</span>: <span class="hljs-number">9</span>,
  <span class="hljs-attr">sessionId</span>: <span class="hljs-string">"62584FD718EC0B52B47067AE1F922DF1"</span>
}
</code></pre>
<br/>
<p>æˆ‘ä¸¾ä¸ªå®é™…çš„ä¾‹å­çœ‹ session çš„äº¤äº’æµç¨‹ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æƒ³ä» browser Target ä¸Šè·å–ä¸€äº›ç³»ç»Ÿæ¶ˆæ¯ï¼Œå…ˆå‡è®¾æˆ‘ä»¬äº‹å…ˆå·²ç»çŸ¥é“äº† browser çš„ targetIdï¼Œé‚£ä¹ˆä¸€ä¸ªå®Œæ•´çš„ session é€šä¿¡å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>è¿™é‡Œä¸ºäº†èšç„¦ session çš„æ ¸å¿ƒäº¤äº’é€»è¾‘ï¼Œä¸‹é¢çš„ CDP message åˆ é™¤äº†ä¸å¿…è¦çš„ä¿¡æ¯</p>
</blockquote>
<ol>
<li>Client é€šè¿‡ <code>Target.attachToTarget</code> API å‘ browser å‘èµ·ä¼šè¯è¯·æ±‚ï¼Œæ‹¿åˆ° sessionId</li>
</ol>
<pre><code class="hljs language-JSON" lang="JSON"><span class="hljs-comment">// Client â€”&gt; Chromium</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Target.attachToTarget"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"targetId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"31a082d2-ba00-4d8f-b807-9d63522a6112"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// browser targetId</span>
    <span class="hljs-attr">"flatten"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-comment">// ä½¿ç”¨ flatten æ¨¡å¼ï¼Œåç»­å°†ä¼šæŠŠ sessionId å’Œ id æ”¾åœ¨åŒä¸€å±‚çº§</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// Chromium â€”&gt; Client</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-number">8</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sessionId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"62584FD718EC0B52B47067AE1F922DF1"</span> <span class="hljs-comment">// æ‹¿åˆ°è¿™æ¬¡å¯¹è¯çš„ sessionId</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="2">
<li>Client å¸¦ä¸Šä¸Šä¸€æ­¥ç»™çš„ sessionIdï¼Œå‘é€ä¸€æ¡è·å–ç³»ç»Ÿä¿¡æ¯çš„ CDP è°ƒç”¨å¹¶è·å–åˆ°ç›¸å…³æ¶ˆæ¯</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// Client â€”&gt; Chromium</span>
{
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"SystemInfo.getInfo"</span>, <span class="hljs-comment">// è·å–ç³»ç»Ÿä¿¡æ¯çš„æ–¹æ³•</span>
  <span class="hljs-string">"id"</span>: <span class="hljs-number">9</span>,
  <span class="hljs-string">"sessionId"</span>: <span class="hljs-string">"62584FD718EC0B52B47067AE1F922DF1"</span> <span class="hljs-comment">// sessionId å’Œ id åŒçº§ï¼Œåœ¨æœ€å¤–å±‚</span>
}

<span class="hljs-comment">// Chromium â€”&gt; Client</span>
{
  <span class="hljs-string">"id"</span>: <span class="hljs-number">9</span>,
  <span class="hljs-string">"sessionId"</span>: <span class="hljs-string">"62584FD718EC0B52B47067AE1F922DF1"</span>
  <span class="hljs-string">"result"</span>: { <span class="hljs-comment">/* ... */</span> },
}
</code></pre>
<ol start="3">
<li>ä¸æƒ³åœ¨è¿™ä¸ª session ä¸ŠèŠäº†ï¼Œè°ƒç”¨ <code>Target.detachFromTarget</code> ç›´æ¥æ–­å¼€è¿æ¥ï¼Œè‡ªæ­¤è¿™ä¸ªä¼šè¯å°±ç®—é”€æ¯äº†</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// Client â€”&gt; Chromium</span>
{
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"Target.detachFromTarget"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">11</span>,
  <span class="hljs-string">"sessionId"</span>:<span class="hljs-string">"62584FD718EC0B52B47067AE1F922DF1"</span>
}

<span class="hljs-comment">// Chromium â€”&gt; Client</span>
{
  <span class="hljs-string">"id"</span>: <span class="hljs-number">11</span>,
  <span class="hljs-string">"result"</span>: {}
}
</code></pre>
<p>ä¸Šé¢çš„æµç¨‹å¯ä»¥ç”¨ä¸‹é¢çš„å›¾è¡¨ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0974656c9a1f4046bcff29d3a2d2f9c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=WouIsCouKtStwX6%2FgwO6zrRkE6I%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶æ¶‰åŠ Target ç”Ÿå‘½å‘¨æœŸçš„ç›¸å…³ Methods å’Œ Event è¿˜æœ‰å¾ˆå¤šï¼Œä¸€ä¸€è®²è§£ä¹Ÿä¸ç°å®ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±æ¢ç´¢ã€‚</p>
<h3 data-id="heading-6">ä¸€å¯¹å¤š</h3>
<p>é™¤äº†ä¸Šè¿°çš„ç‰¹æ€§ï¼ŒTarget è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯<strong>ä¸€ä¸ª Target å…è®¸å¤šä¸ª session è¿æ¥</strong>ã€‚è¿™æ„å‘³ç€å¯ä»¥æœ‰å¤šä¸ª Client å»æ§åˆ¶åŒä¸€ä¸ª Targetã€‚è¿™åœ¨ç°å®ä¸­ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ã€‚æ¯”å¦‚è¯´å¯¹äºä¸€ä¸ªç½‘é¡µå®ä½“ï¼Œå®ƒæ—¢å¯ä»¥è¢« Chrome Devtoolsï¼ˆClient1ï¼‰è°ƒè¯•ï¼Œä¹Ÿå¯ä»¥åŒæ—¶è¢« puppeteerï¼ˆClient2ï¼‰è¿æ¥åšè‡ªåŠ¨åŒ–æ§åˆ¶ã€‚å½“ç„¶è¿™ä¹Ÿä¼šå¸¦æ¥äº†ä¸€äº›èµ„æºè®¿é—®çš„å¹¶å‘é—®é¢˜ï¼Œåœ¨å®é™…åº”ç”¨åœºæ™¯ä¸Šéœ€è¦ä¸‡åˆ†çš„å°å¿ƒã€‚</p>
<h2 data-id="heading-7">ç»¼åˆæ¡ˆä¾‹</h2>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼ŒæŠŠä¸Šé¢çš„å†…å®¹éƒ½å›Šæ‹¬èµ·æ¥ã€‚</p>
<p>ä¸‹é¢çš„æ¡ˆä¾‹æˆ‘æ˜¯ç”¨ puppeteer åˆ›å»ºäº†ä¸€ä¸ª url ä¸º <code>about:blank</code> çš„æ–°ç½‘é¡µæ—¶ï¼Œåº•å±‚çš„ CDP è°ƒç”¨æµç¨‹ã€‚è°ƒç”¨çš„æºæ–‡ä»¶å¯ä»¥è®¿é—®å³è¾¹çš„è¶…é“¾æ¥ä¸‹è½½ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flf3-static.bytednsdoc.com%2Fobj%2Feden-cn%2Feojfrzeh7vhouloj%2Fagent-infra-browser%2Fcreate_about_blank_page.har" target="_blank" title="https://lf3-static.bytednsdoc.com/obj/eden-cn/eojfrzeh7vhouloj/agent-infra-browser/create_about_blank_page.har" ref="nofollow noopener noreferrer">create_about_blank_page.har</a>ï¼Œhar æ–‡ä»¶å¯ç”¨ Chrome Devtools Network å¯¼å…¥æŸ¥çœ‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddd1bad12f9649579c6df68053b1af15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=gMZOm1cx74%2Fv9liucTtQ0cq3hec%3D" alt="" loading="lazy"/></p>
<br/>
<p>é¦–å…ˆæ˜¯æœ€å¼€å§‹çš„ Target åˆ›å»ºæµç¨‹ã€‚æ³¨æ„ä¸‹å›¾çº¢æ¡†å’Œçº¢çº¿é‡Œçš„å†…å®¹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adc4fab4cf1d40ac80e5164547917576~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=0yciZ8XPPsrATzbBVX5%2FYCX62hk%3D" alt="" loading="lazy"/></p>
<ul>
<li>é¦–å…ˆè°ƒç”¨ <code>Target.createTarget</code> åˆ›å»ºä¸€ä¸ª pageï¼ˆåœ¨è°ƒç”¨ <code>createTarget</code> æ—¶ï¼Œä¼šåŒæ­¥ç”Ÿæˆä¸€ä¸ª tab Targetï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥è¿™ä¸ªè¡Œä¸ºï¼Œä¸å½±å“åç»­ç†è§£ï¼‰</li>
<li>page Target åˆ›å»ºå¥½åï¼Œåœ¨å“åº” <code>Target.createTarget</code> methods çš„åŒæ—¶ï¼Œè¿˜ä¼šå‘é€ä¸€ä¸ª <code>Target.targetCreated</code> çš„ eventï¼Œé‡Œé¢æœ‰è¿™ä¸ª page Target çš„è¯¦ç»† meta infoï¼Œä¾‹å¦‚ targetIdï¼Œurlï¼Œtitle ç­‰</li>
<li>page Target çš„ meta info å˜åŠ¨æ—¶ï¼Œä¼šä¸‹å‘ <code>Target.targetInfoChanged</code> event åŒæ­¥ä¿¡æ¯å˜åŒ–</li>
<li>page Target ä¸‹å‘ä¸€ä¸ª <code>Target.attachedToTarget</code> çš„ eventï¼Œå‘ŠçŸ¥ client è¿™æ¬¡è¿æ¥çš„ sessionIdï¼Œè¿™æ ·åç»­çš„ä¸€äº› domain æ“ä½œå°±å¯ä»¥å¸¦ä¸Š sessionId ä¿è¯ä¿¡é“äº†</li>
</ul>
<br/>
<p>Target åˆ›å»ºå¥½åï¼Œå°±è¦å¼€å¯è¿™ä¸ª page ä¸‹çš„å„ä¸ª Domain äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc124c24e86b47a297fb9a27e2394941~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=3w1fDfS1PLgYbE3x6fKvmLpWwPc%3D" alt="" loading="lazy"/></p>
<ul>
<li>Network.enableï¼šå¼€å¯ Network Domain çš„ç›‘å¬ï¼Œæ¯”å¦‚è¯´å„ç§ç½‘ç»œè¯·æ±‚çš„ request/response çš„ç»†èŠ‚</li>
<li>Page.enableï¼šå¼€å¯ Page Domain çš„ç›‘å¬ï¼Œæ¯”å¦‚è¯´ navigation è¡Œä¸ºçš„æ“çºµ</li>
<li>Runtime.enableï¼šå¼€å¯ Runtime Domain çš„ç›‘å¬ï¼Œæ¯”å¦‚è¯´è¦åœ¨ page é‡Œ evaluate ä¸€æ®µæ³¨å…¥å‡½æ•°</li>
<li>Performance.enableï¼šå¼€å¯ Performance Domain çš„ç›‘å¬ï¼Œæ¯”å¦‚è¯´ä¸€äº› metrics ä¿¡æ¯</li>
<li>Log.enableï¼šå¼€å¯ log ç›¸å…³ä¿¡æ¯çš„ç›‘å¬ï¼Œæ¯”å¦‚è¯´å„ç§ console.log ä¿¡æ¯</li>
</ul>
<br/>
<p>å¼€å¯ç›¸å…³ Domain åï¼Œå°±å¯ä»¥ç›‘å¬è¿™ä¸ª page Target çš„ç›¸å…³ event æˆ–è€…ä¸»åŠ¨è§¦å‘ä¸€äº›æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37ea0781e7f54ccf8db57c06f718cd35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897628&amp;x-signature=l5KVbjd8QgrWz3MvdWCZ7U8HphY%3D" alt="" loading="lazy"/></p>
<ul>
<li>æˆ‘ä»¬ä¸»åŠ¨æ‰§è¡Œ <code>Page.getNavigationHistory</code> methodsï¼Œè·å–å½“å‰é¡µé¢çš„ history å¯¼èˆªè®°å½•</li>
<li>æˆ‘ä»¬ç›‘å¬åˆ° <code>Runtime.consoleAPICalled</code> event çš„è§¦å‘ï¼Œæ‹¿åˆ°äº†ä¸€äº› console ä¿¡æ¯</li>
</ul>
<p>ç›¸å…³çš„ç»†èŠ‚è¿˜æœ‰å¾ˆå¤šå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹ä¸Šé¢çš„ har æºæ–‡ä»¶ï¼Œæˆ‘ç›¸ä¿¡å…¨éƒ¨çœ‹å®Œåå°±ä¼šå¯¹ CDP æœ‰ä¸ªæ¸…æ™°çš„è®¤çŸ¥äº†ã€‚</p>
<h2 data-id="heading-8">ç¼–ç å»ºè®®</h2>
<p>å°±ç›®å‰ï¼ˆ2025.12ï¼‰è€Œè¨€ï¼ŒCode Agent å’Œ DeepResearch ç­‰å¸¸è§çš„ AI è¾…åŠ©ç¼–ç¨‹å·¥å…·åœ¨ CDP é¢†åŸŸä¸Šè¡¨ç°<strong>å¹¶ä¸æ˜¯å¾ˆå¥½</strong>ï¼Œä¸»è¦çš„åŸå› æœ‰ 3 ç‚¹ï¼š</p>
<ul>
<li><strong>é¢„è®­ç»ƒè¯­æ–™å°‘</strong>ï¼šä»å‰æ–‡å¯çŸ¥ï¼ŒCDP å› ä¸ºåè®®è¿‡äºåº•å±‚ï¼Œæ‰€ä»¥ç›¸å…³çš„ä½¿ç”¨æ¡ˆä¾‹å’Œä»£ç éå¸¸å°‘ï¼Œæ¨¡å‹é¢„è®­ç»ƒæ—¶è¯­æ–™å¾ˆå°‘ï¼Œå¯¼è‡´å¹»è§‰è¿˜æ˜¯æ¯”è¾ƒä¸¥é‡çš„</li>
<li><strong>æ–‡æ¡£è´¨é‡ä¸€èˆ¬</strong>ï¼šCDP æ–‡æ¡£å†™çš„å¤ªç®€æ´äº†ï¼ŒåŸºæœ¬å°±æ˜¯æ ¹æ®å‡ºå…¥å‚è‡ªåŠ¨ç”Ÿæˆçš„ç±»å‹æ–‡æ¡£ï¼Œåªèƒ½ç”¨æ¥æŸ¥è¯¢æ ¸å®ä¸€ä¸‹ï¼Œæƒ³ä»ä¸­è·å¾—å®Œæ•´çš„æ¦‚å¿µï¼Œå¯¹ AI å’Œäººæ¥è¯´è¿˜æ˜¯å¤ªéš¾äº†</li>
<li><strong>API åŠ¨æ€è¿­ä»£</strong>ï¼šCDP è™½ç„¶å¼€æºå‡ºæ¥äº†ï¼Œä½†å…¶æœ¬è´¨è¿˜æ˜¯ä¸€ä¸ªä¸º Chromium æœåŠ¡çš„ç§æœ‰åè®®ï¼Œå…¶ latest ç‰ˆæœ¬ä¸€ç›´åœ¨åŠ¨æ€è¿­ä»£ä¸­ï¼Œæ‰€ä»¥è¿™ç§åŠ¨æ€å˜åŒ–ä¹Ÿå½±å“äº† AI çš„å‘æŒ¥</li>
</ul>
<br/>
<p>ç»¼åˆä»¥ä¸ŠåŸå› ï¼Œæˆ‘çš„ä¸€ä¸ªç­–ç•¥æ˜¯ã€Œ<strong>å°æ­¥å¿«è·‘ï¼Œéšæ—¶éªŒè¯</strong>ã€ã€‚æ–¹æ¡ˆå°±æ˜¯å¯¹äºè‡ªå·±æƒ³å®ç°çš„åŠŸèƒ½ï¼Œå…ˆè®© AI å‡ºä¸€ä¸ªå¤§è‡´çš„æ–¹æ¡ˆï¼Œä½†æ˜¯ä¸è¦ç›´æ¥åœ¨è‡ªå·±çš„è¿­ä»£çš„é¡¹ç›®é‡Œç›´æ¥å†™ï¼Œè€Œæ˜¯å…ˆç”Ÿæˆä¸€ä¸ªå¯ä»¥å¿«é€ŸéªŒè¯ç›¸å…³åŠŸèƒ½çš„æœ€å° DEMOï¼Œç„¶åäº²è‡ªå»éªŒè¯è¿™ä¸ªæ–¹æ¡ˆæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>
<p>ã€Œäº²è‡ªéªŒè¯ DEMO å¯è¡Œæ€§ã€ è¿™ä¸€æ­¥éå¸¸é‡è¦ï¼Œå› ä¸º AI ç›´å‡ºçš„ CDP è§£å†³æ–¹æ¡ˆå¯é æ€§å¹¶ä¸é«˜ï¼Œä¸åƒ <code>AI -&gt; UI</code> æœ‰è¾ƒé«˜çš„å®¹é”™ç‡å’Œç½®ä¿¡åº¦ï¼Œåªæœ‰åœ¨ DEMO ä¸ŠéªŒè¯æˆåŠŸçš„æ–¹æ¡ˆæ‰æœ‰è¿ç§»åˆ°æ­£å¼é¡¹ç›®çš„ä»·å€¼ã€‚</p>
<p>å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯<strong>ä»</strong> <strong>puppeteer</strong> <strong>ç­‰ä¼˜ç§€é¡¹ç›®ä¸Šå¸å–ç»éªŒ</strong>ã€‚puppeteer åº•å±‚ä¹Ÿæ˜¯è°ƒç”¨ CDPï¼Œè€Œä¸”å®ƒè¿­ä»£äº†åä½™å¹´ï¼Œå¯¹ä¸€äº›å¸¸è§æ¡ˆä¾‹å·²ç»æ²‰æ·€äº†ä¸€å¥—æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡å­¦ä¹ å®ƒå†…éƒ¨çš„ CDP è°ƒç”¨æµç¨‹ï¼Œå¯ä»¥å­¦ä¹ åˆ°å¾ˆå¤šæ–‡æ¡£æœªæ›¾æè¿°çš„è¿ç”¨åœºæ™¯ã€‚ä¸‹ä¸€ç¯‡ Blogï¼Œæˆ‘ä»¬å°±åˆ†æä¸€ä¸‹ puppeteer çš„æºç æ¶æ„ï¼Œè®©æˆ‘ä»¬åœ¨è°ƒç”¨è¿‡ç¨‹ä¸­æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ•¹ï¸ [AI] Chrome DevTools MCP åŸç†åˆ†æ]]></title>    <link>https://juejin.cn/post/7581689310643634218</link>    <guid>https://juejin.cn/post/7581689310643634218</guid>    <pubDate>2025-12-09T15:23:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581689310643634218" data-draft-id="7566946330695139378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ•¹ï¸ [AI] Chrome DevTools MCP åŸç†åˆ†æ"/> <meta itemprop="keywords" content="å‰ç«¯,MCP"/> <meta itemprop="datePublished" content="2025-12-09T15:23:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤ä»£çƒƒ"/> <meta itemprop="url" content="https://juejin.cn/user/43636193770071"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ•¹ï¸ [AI] Chrome DevTools MCP åŸç†åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/43636193770071/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤ä»£çƒƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T15:23:40.000Z" title="Tue Dec 09 2025 15:23:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025.09.23 Google å®˜æ–¹å‘å¸ƒäº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FChromeDevTools%2Fchrome-devtools-mcp" target="_blank" title="https://github.com/ChromeDevTools/chrome-devtools-mcp" ref="nofollow noopener noreferrer">Chrome DevTools MCP</a>ï¼Œç›®å‰ç‰ˆæœ¬å·è¿˜æ˜¯ 0.9.0ï¼ŒGoogle å®˜æ–¹å¯¹å®ƒçš„å®šä½æ˜¯ååŠ© AI coding assistants åšè°ƒè¯•å’Œæ€§èƒ½æµ‹è¯•ï¼Œæé«˜ç½‘é¡µç¼–ç¨‹çš„ debug èƒ½åŠ›ï¼Œä¸€äº›ä½¿ç”¨æ¡ˆä¾‹å¯è§å®˜æ–¹ blogï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fblog%2Fchrome-devtools-mcp%3Fhl%3Den" target="_blank" title="https://developer.chrome.com/blog/chrome-devtools-mcp?hl=en" ref="nofollow noopener noreferrer">Chrome DevTools (MCP) for your AI agent</a>ã€‚</p>
<p>æœ¬æ–‡ä¸»è¦æ˜¯ç»“åˆ æºç  å’Œ MCP output å†…å®¹ï¼Œåˆ†æ chrome-devtools-mcp çš„è¿è¡ŒåŸç†ï¼Œæ¢ç´¢å®ƒçš„èƒ½åŠ›è¾¹ç•Œã€‚</p>
<h2 data-id="heading-0">Tools åˆ†ç±»</h2>
<p>ä»å®ƒçš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FChromeDevTools%2Fchrome-devtools-mcp%2Fblob%2Fmain%2Fdocs%2Ftool-reference.md" target="_blank" title="https://github.com/ChromeDevTools/chrome-devtools-mcp/blob/main/docs/tool-reference.md" ref="nofollow noopener noreferrer">MCP Tools</a> å¯ä»¥çœ‹å‡ºï¼Œå®ƒçš„ tools å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ç±»åˆ«ï¼š</p>
<ul>
<li>
<p><strong>åŸºç¡€èƒ½åŠ›</strong>ï¼šè¿™éƒ¨åˆ†èƒ½åŠ›ä¸»è¦æ˜¯åšç½‘é¡µæ“ä½œï¼Œè¿™ä¸ªæ˜¯æ‰€æœ‰çš„ Browser MCP çš„åŸºçŸ³ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥ä¸ç”¨ä»»ä½•ç½‘é¡µè°ƒè¯•çš„èƒ½åŠ›ï¼Œåªç”¨è¿™éƒ¨åˆ†åŸºç¡€èƒ½åŠ›åšç½‘é¡µè‡ªåŠ¨åŒ–æ“ä½œ</p>
<ul>
<li><strong>Navigation</strong>ï¼šå°±æ˜¯ createPageï¼ŒclosePage ç­‰</li>
<li><strong>Input</strong>ï¼šå°±æ˜¯ page å†…çš„ clickï¼Œhover ç­‰æ“ä½œ</li>
</ul>
</li>
<li>
<p><strong>è°ƒè¯•èƒ½åŠ›</strong>ï¼šè¿™ä¸ªå…¶å®æ˜¯ chrome-devtools-mcp ä¸»è¦å®šä½çš„åœ°æ–¹ï¼Œæä¾›åŸºç¡€çš„è°ƒè¯•ä¿¡æ¯é€å‡º</p>
<ul>
<li><strong>Emulation</strong>ï¼šç›®å‰çš„åŠŸèƒ½è¿˜æ˜¯æ¯”è¾ƒå¼±ï¼Œä¸»è¦æ˜¯å¼±ç½‘æ¨¡æ‹Ÿï¼ŒCPU é™é€Ÿæ¨¡æ‹Ÿï¼Œå°ºå¯¸æ¨¡æ‹Ÿï¼Œå…¶å®å¯¹åº”çš„æ˜¯è¿™å‡ ä¸ªåŠŸèƒ½:
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5fca893091842548301b4b3a4917c6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898620&amp;x-signature=MMOPBahCOzSReg%2FtyNMdrdhfgNs%3D" alt="cdm-perfs" loading="lazy"/></li>
<li><strong>Performance</strong>ï¼šç”¨æ¥æ”¶é›†æ€§èƒ½ trace æ•°æ®ï¼Œå¯¹æ ‡å¦‚ä¸‹çš„åŠŸèƒ½ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7401622b47ff4a628a94c8f5a375df0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898620&amp;x-signature=2inC47aSzobtuJiQ7oX2DNmh%2FvY%3D" alt="cdm-cpu-network" loading="lazy"/></li>
<li><strong>Network</strong>ï¼šè·å–å½“å‰ page çš„æ‰€æœ‰ç½‘ç»œä¿¡æ¯</li>
<li><strong>Debugging</strong>ï¼šè·å– console ä¿¡æ¯ï¼Œæˆªå›¾ï¼Œè¿˜å¯ä»¥æ³¨å…¥ä¸€äº›ä»£ç </li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">æŠ€æœ¯ç»†èŠ‚</h2>
<p>chrome-devtools-mcp åº•å±‚ä½¿ç”¨çš„è¿˜æ˜¯ <strong>puppeteer</strong>ï¼Œæ‰€ä»¥å¾ˆå¤šåŠŸèƒ½ç›´æ¥å¯ä»¥å¯¹æ ‡åˆ° puppeteer çš„æ“ä½œã€‚æˆ‘ä»¬ç›´æ¥åˆ†æ Tools çš„ä¸€äº›æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-2">Navigation</h3>
<p>Navigation è¿™å—å„¿åŒ…è£…çš„å†…å®¹å¾ˆå°‘ã€‚</p>
<p><strong>é¦–å…ˆæ˜¯ Tabs ç®¡ç†ã€‚</strong></p>
<p>å…¶å®å°±æ˜¯ç”¨äº† <code>browser.pages()</code> è¿™ä¸ª APIï¼Œç„¶åå¯¹æ¯ä¸ª tab åšä¸€ä¸ªåŸºç¡€çš„ç¼–å·ï¼Œç„¶ååˆ©ç”¨ <code>bringToFront()</code> åš tab çš„æ¿€æ´»ï¼Œè¢«æ¿€æ´»çš„ tab ä¼šæœ‰ä¸€ä¸ª <code>[selected]</code> çš„æ ‡è®°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> parts = [<span class="hljs-string">`## Pages`</span>];
<span class="hljs-keyword">let</span> idx = <span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> page <span class="hljs-keyword">of</span> context.<span class="hljs-title function_">getPages</span>()) {
  parts.<span class="hljs-title function_">push</span>(
    <span class="hljs-string">`<span class="hljs-subst">${idx}</span>: <span class="hljs-subst">${page.url()}</span><span class="hljs-subst">${idx === context.getSelectedPageIdx() ? <span class="hljs-string">' [selected]'</span> : <span class="hljs-string">''</span>}</span>`</span>,
  );
  idx++;
}
</code></pre>
<p>æœ€åç»™æ¨¡å‹çš„ response ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">## <span class="hljs-title class_">Pages</span>
<span class="hljs-number">0</span>: <span class="hljs-attr">https</span>:<span class="hljs-comment">//developer.chrome.com/?hl=zh-cn</span>
<span class="hljs-number">1</span>: <span class="hljs-attr">https</span>:<span class="hljs-comment">//www.baidu.com/ [selected]</span>
</code></pre>
<p>chrome-devtools-mcp è¿™é‡Œå°è£…éå¸¸æµ…ï¼Œå…¶å®å¾ˆå¤šé”™è¯¯å¤„ç†ï¼Œè¶…æ—¶å¤„ç†éƒ½æ²¡æœ‰åšã€‚</p>
<br/>
<p><strong>ç„¶åæ˜¯é¡µé¢å¯¼èˆªå†…å®¹ã€‚</strong></p>
<p>æ¯”å¦‚è¯´ <code>new_page</code>ï¼Œ<code>navigate_page</code>ï¼Œ<code>close_page</code> ç­‰ï¼Œå…¶å®éƒ½æ¯”è¾ƒç®€å•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// new_page</span>
<span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> context.<span class="hljs-title function_">newPage</span>();
<span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(request.<span class="hljs-property">params</span>.<span class="hljs-property">url</span>, {
  <span class="hljs-attr">timeout</span>: request.<span class="hljs-property">params</span>.<span class="hljs-property">timeout</span>,
});

<span class="hljs-comment">// navigate_page</span>
<span class="hljs-keyword">const</span> page = context.<span class="hljs-title function_">getSelectedPage</span>();
<span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(request.<span class="hljs-property">params</span>.<span class="hljs-property">url</span>, {
  <span class="hljs-attr">timeout</span>: request.<span class="hljs-property">params</span>.<span class="hljs-property">timeout</span>,
});

<span class="hljs-comment">// close_page</span>
<span class="hljs-keyword">await</span> context.<span class="hljs-title function_">closePage</span>(request.<span class="hljs-property">params</span>.<span class="hljs-property">pageIdx</span>);
</code></pre>
<p>è¿™é‡Œçš„å°è£…ä¹Ÿæ˜¯æ¯”è¾ƒæµ…çš„ï¼Œå¾ˆå¤šå¥å£®æ€§å·¥ä½œéƒ½æ²¡æœ‰åšã€‚</p>
<h3 data-id="heading-3">Input</h3>
<p>chrome-devtools-mcp ç›®å‰è¿˜æ˜¯åŸºäº DOM çš„ snapshot å»åš click/drag/hover ç­‰æ“ä½œçš„ã€‚è¿™é‡Œä»¥ç™¾åº¦é¦–é¡µä¸ºä¾‹ï¼Œä»ä¸€ä¸ªç®€å•çš„ click åœºæ™¯åˆ†æä¸€ä¸‹å®ƒçš„è¿è¡Œæµç¨‹ã€‚</p>
<ol>
<li>é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ pptr çš„å¯è®¿é—®æ€§ API æ‹¿åˆ° DOM çš„ JSON æ ‘ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> rootNode = <span class="hljs-keyword">await</span> page.<span class="hljs-property">accessibility</span>.<span class="hljs-title function_">snapshot</span>({
 <span class="hljs-attr">includeIframes</span>: <span class="hljs-literal">true</span>,
});
</code></pre>
<ol start="2">
<li>ç„¶åï¼Œä¿å­˜ JSON æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹åšå¥½ç¼–å·æ–¹ä¾¿åç»­æ ¼å¼åŒ–ï¼š</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> idCounter = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> idToNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">TextSnapshotNode</span>&gt;();
<span class="hljs-keyword">const</span> assignIds = (<span class="hljs-attr">node</span>: <span class="hljs-title class_">SerializedAXNode</span>): <span class="hljs-function"><span class="hljs-params">TextSnapshotNode</span> =&gt;</span> {
 <span class="hljs-keyword">const</span> <span class="hljs-attr">nodeWithId</span>: <span class="hljs-title class_">TextSnapshotNode</span> = {
   ...node,
   <span class="hljs-attr">id</span>: <span class="hljs-string">`<span class="hljs-subst">${snapshotId}</span>_<span class="hljs-subst">${idCounter++}</span>`</span>, <span class="hljs-comment">// ç¼–å·</span>
   <span class="hljs-attr">children</span>: node.<span class="hljs-property">children</span>
     ? node.<span class="hljs-property">children</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> <span class="hljs-title function_">assignIds</span>(child)) <span class="hljs-comment">// é€’å½’å¤„ç† dom æ ‘èŠ‚ç‚¹</span>
     : [],
 };
 idToNode.<span class="hljs-title function_">set</span>(nodeWithId.<span class="hljs-property">id</span>, nodeWithId);
 <span class="hljs-keyword">return</span> nodeWithId;
};
</code></pre>













<table><thead><tr><th>å¤„ç†å‰çš„ snapshot</th><th>å¤„ç†åçš„ snapshot</th></tr></thead><tbody><tr><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7df4e9252394c948e85529de6721c77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898620&amp;x-signature=F97%2FU0zuUx%2BNCkynOoT%2BwSiYkjY%3D" alt="" loading="lazy"/></td><td><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f8388e310df4462bba70d484cf83914~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898620&amp;x-signature=snfmmiSIvezhMP2EvCFCzD3CnbY%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<ol>
<li>æœ€åï¼Œæ‰§è¡Œç›¸å…³ action æ“ä½œï¼Œæ¯”å¦‚è¯´æˆ‘è¦ clickã€Œæ–°é—»ã€è¿™ä¸ªæŒ‰é’®ï¼Œä¼šå®šä½åˆ° <code>uid=1_1 link "æ–°é—»"</code> è¿™æ¡æ•°æ®ï¼Œç„¶åå‚æ•°ä¼ å…¥ <code>1_1</code>ï¼Œæ‰§è¡Œå¦‚ä¸‹çš„ä»£ç ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> node = <span class="hljs-variable language_">this</span>.#textSnapshot?.<span class="hljs-property">idToNode</span>.<span class="hljs-title function_">get</span>(uid); <span class="hljs-comment">// uid="1_1"</span>
<span class="hljs-comment">// pptr å¯ä»¥æ ¹æ® node.elementHandle æ‹¿åˆ°ç›¸å…³ dom çš„ handle</span>
<span class="hljs-keyword">const</span> handle = <span class="hljs-keyword">await</span> node.<span class="hljs-title function_">elementHandle</span>(); 

<span class="hljs-keyword">await</span> handle.<span class="hljs-title function_">asLocator</span>().<span class="hljs-title function_">click</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">1</span> });
</code></pre>
<br/>
<p>å…¶ä½™ action æ“ä½œéƒ½å¤§å·®ä¸å·®ï¼Œéƒ½æ˜¯ <strong>æ‹¿åˆ° snapshot</strong> -&gt; <strong>åˆ†ææ„å›¾æ‹¿åˆ° uid</strong> -&gt; <strong>é€šè¿‡ uid æ‹¿åˆ° DOM æ‰§è¡Œ action</strong> çš„æ“ä½œã€‚</p>
<p>è¿™ä¸€å¥—æ–¹æ¡ˆçš„ä¼˜åŠ¿æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡ pptr çš„ accessibility API æ‹¿åˆ° DOM çš„ä¿¡æ¯ï¼ˆè€Œä¸æ˜¯ browser-use æ³¨å…¥ JS ä»£ç ç„¶ååšè‡ªå®šä¹‰æ ¼å¼åŒ–ï¼‰ï¼Œå°è£…æ›´æµ…æ›´é€šç”¨ï¼›åŠ£åŠ¿æ˜¯å¯èƒ½æœ€ç»ˆ snapshot ä¼šæ„å»ºçš„æ¯”è¾ƒå¤§ï¼Œå¯èƒ½ä¼šå ç”¨ä¸å°‘ä¸Šä¸‹æ–‡ã€‚</p>
<h3 data-id="heading-4">Emulation</h3>
<p>è¿™ä¸ªå†…å®¹æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯é€šè¿‡ pptr çš„ API è°ƒç”¨ç”¨æ¥æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œï¼Œæ…¢é€Ÿ CPUï¼Œè°ƒæ•´ç½‘é¡µå¤§å°ã€‚åªæ˜¯æŠŠ API MCP åŒ–äº†ï¼Œä¸æ¶‰åŠå¾ˆå¤šçš„é€»è¾‘å’Œä¸Šä¸‹æ–‡å¤„ç†ï¼Œæ‰€ä»¥ç•¥è¿‡ã€‚</p>
<h3 data-id="heading-5">Performance</h3>
<p>è¿™ä¸ªæ˜¯ MCP ä¸»æ‰“çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œåšæ€§èƒ½åº¦é‡å’Œæ€§èƒ½æµ‹è¯•ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å®ƒæ˜¯æ€ä¹ˆåšçš„ã€‚</p>
<p>ç›®å‰ MCP çš„å®ç°å¾ˆç®€å•ï¼Œå…¶å®å°±æ˜¯é€šè¿‡ pptr æä¾›çš„ APIï¼Œå¯¹ç›¸å…³ç½‘é¡µåšæ€§èƒ½æµ‹è¯•çš„ start/stop ä¸¤ä¸ªæ“ä½œï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfa251eff1c34ecd9011281de0e85ced~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898620&amp;x-signature=SE6UPprylN0rSOdpRmhG0Pb282o%3D" alt="" loading="lazy"/></p>
<p>ä½†æ˜¯å®ƒä¸ä¼šæŠŠå®Œæ•´çš„ trace äº¤ç»™æ¨¡å‹åˆ†æï¼ˆå®Œæ•´çš„ trace æ•°æ®é‡å¾ˆå¤§ï¼Œå¯èƒ½æ˜¯ 10ï½100 MBçš„ json æ•°æ®ï¼Œäº¤ç»™æ¨¡å‹åˆ†æä¹Ÿä¸ç°å®ï¼‰ï¼Œè€Œæ˜¯è¾“å‡ºä¸ºä¸€ä»½<strong>æ€§èƒ½æŠ¥å‘Šæ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## Summary of Performance trace findings:</span>
URL: https://developer.chrome.com/?hl=zh-cn
Bounds: {min: 771625656677, max: 771629299667}
CPU throttling: none
Network throttling: none
Metrics (lab / observed):
<span class="hljs-bullet">  -</span> LCP: 907 ms, event: (eventKey: r-6881, ts: 771626610159), nodeId: 170
<span class="hljs-bullet">  -</span> LCP breakdown:
<span class="hljs-bullet">    -</span> TTFB: 808 ms, bounds: {min: 771625702955, max: 771626510489}
<span class="hljs-bullet">    -</span> Render delay: 100 ms, bounds: {min: 771626510489, max: 771626610159}
<span class="hljs-bullet">  -</span> CLS: 0.03, event: (eventKey: s--1, ts: 771626595695)
Metrics (field / real users): n/a â€“ no data for this page in CrUX
Available insights:
<span class="hljs-bullet">  -</span> insight name: DocumentLatency
<span class="hljs-code">    description: Your first network request is the most important.  Reduce its latency by avoiding redirects, ensuring a fast server response, and enabling text compression.
    relevant trace bounds: {min: 294, max: 771626579945}
    estimated metric savings: FCP 706 ms, LCP 706 ms
    example question: How do I decrease the initial loading time of my page?
    example question: Did anything slow down the request for this document?
  - insight name: RenderBlocking
    description: Requests are blocking the page's initial render, which may delay LCP. [Deferring or inlining](https://web.dev/learn/performance/understanding-the-critical-path#render-blocking_resources) can move these network requests out of the critical path.
    relevant trace bounds: {min: 771626513396, max: 771626531288}
    estimated metric savings: FCP 90 ms, LCP 90 ms
    example question: Show me the most impactful render blocking requests that I should focus on
    example question: How can I reduce the number of render blocking requests?
  - insight name: LCPBreakdown
    description: Each [subpart has specific improvement strategies](https://web.dev/articles/optimize-lcp#lcp-breakdown). Ideally, most of the LCP time should be spent on loading the resources, not within delays.
    relevant trace bounds: {min: 771625702955, max: 771626610159}
    example question: Help me optimize my LCP score
    example question: Which LCP phase was most problematic?
    example question: What can I do to reduce the LCP time for this page load?
  - insight name: CLSCulprits
    description: Layout shifts occur when elements move absent any user interaction. [Investigate the causes of layout shifts](https://web.dev/articles/optimize-cls), such as elements being added, removed, or their fonts changing as the page loads.
    relevant trace bounds: {min: 771626595695, max: 771628821131}
    example question: Help me optimize my CLS score
    example question: How can I prevent layout shifts on this page?
  - insight name: NetworkDependencyTree
    description: [Avoid chaining critical requests](https://developer.chrome.com/docs/lighthouse/performance/critical-request-chains) by reducing the length of chains, reducing the download size of resources, or deferring the download of unnecessary resources to improve page load.
    relevant trace bounds: {min: 771625703654, max: 771626579945}
    example question: How do I optimize my network dependency tree?
  - insight name: ThirdParties
    description: 3rd party code can significantly impact load performance. [Reduce and defer loading of 3rd party code](https://web.dev/articles/optimizing-content-efficiency-loading-third-party-javascript/) to prioritize your page's content.
    relevant trace bounds: {min: 771626513396, max: 771628820176}
    example question: Which third parties are having the largest impact on my page performance?
</span>
<span class="hljs-section">## Details on call tree &amp; network request formats:</span>
Information on performance traces may contain main thread activity represented as call frames and network requests.

Each call frame is presented in the following format:

'id;eventKey;name;duration;selfTime;urlIndex;childRange;[S]'

Key definitions:

<span class="hljs-bullet">*</span> id: A unique numerical identifier for the call frame. Never mention this id in the output to the user.
<span class="hljs-bullet">*</span> eventKey: String that uniquely identifies this event in the flame chart.
<span class="hljs-bullet">*</span> name: A concise string describing the call frame (e.g., 'Evaluate Script', 'render', 'fetchData').
<span class="hljs-bullet">*</span> duration: The total execution time of the call frame, including its children.
<span class="hljs-bullet">*</span> selfTime: The time spent directly within the call frame, excluding its children's execution.
<span class="hljs-bullet">*</span> urlIndex: Index referencing the \"All URLs\" list. Empty if no specific script URL is associated.
<span class="hljs-bullet">*</span> childRange: Specifies the direct children of this node using their IDs. If empty ('' or 'S' at the end), the node has no children. If a single number (e.g., '4'), the node has one child with that ID. If in the format 'firstId-lastId' (e.g., '4-5'), it indicates a consecutive range of child IDs from 'firstId' to 'lastId', inclusive.
<span class="hljs-bullet">*</span> S: <span class="hljs-emphasis">_Optional_</span>. The letter 'S' terminates the line if that call frame was selected by the user.

Example Call Tree:

1;r-123;main;500;100;;
2;r-124;update;200;50;;3
3;p-49575-15428179-2834-374;animate;150;20;0;4-5;S
4;p-49575-15428179-3505-1162;calculatePosition;80;80;;
5;p-49575-15428179-5391-2767;applyStyles;50;50;;

Network requests are formatted like this:
<span class="hljs-code">`urlIndex;eventKey;queuedTime;requestSentTime;downloadCompleteTime;processingCompleteTime;totalDuration;downloadDuration;mainThreadProcessingDuration;statusCode;mimeType;priority;initialPriority;finalPriority;renderBlocking;protocol;fromServiceWorker;initiators;redirects:[[redirectUrlIndex|startTime|duration]];responseHeaders:[header1Value|header2Value|...]`</span>

<span class="hljs-bullet">-</span> <span class="hljs-code">`urlIndex`</span>: Numerical index for the request's URL, referencing the \"All URLs\" list.
<span class="hljs-bullet">-</span> <span class="hljs-code">`eventKey`</span>: String that uniquely identifies this request's trace event.
Timings (all in milliseconds, relative to navigation start):
<span class="hljs-bullet">-</span> <span class="hljs-code">`queuedTime`</span>: When the request was queued.
<span class="hljs-bullet">-</span> <span class="hljs-code">`requestSentTime`</span>: When the request was sent.
<span class="hljs-bullet">-</span> <span class="hljs-code">`downloadCompleteTime`</span>: When the download completed.
<span class="hljs-bullet">-</span> <span class="hljs-code">`processingCompleteTime`</span>: When main thread processing finished.
Durations (all in milliseconds):
<span class="hljs-bullet">-</span> <span class="hljs-code">`totalDuration`</span>: Total time from the request being queued until its main thread processing completed.
<span class="hljs-bullet">-</span> <span class="hljs-code">`downloadDuration`</span>: Time spent actively downloading the resource.
<span class="hljs-bullet">-</span> <span class="hljs-code">`mainThreadProcessingDuration`</span>: Time spent on the main thread after the download completed.
<span class="hljs-bullet">-</span> <span class="hljs-code">`statusCode`</span>: The HTTP status code of the response (e.g., 200, 404).
<span class="hljs-bullet">-</span> <span class="hljs-code">`mimeType`</span>: The MIME type of the resource (e.g., \"text/html\", \"application/javascript\").
<span class="hljs-bullet">-</span> <span class="hljs-code">`priority`</span>: The final network request priority (e.g., \"VeryHigh\", \"Low\").
<span class="hljs-bullet">-</span> <span class="hljs-code">`initialPriority`</span>: The initial network request priority.
<span class="hljs-bullet">-</span> <span class="hljs-code">`finalPriority`</span>: The final network request priority (redundant if <span class="hljs-code">`priority`</span> is always final, but kept for clarity if <span class="hljs-code">`initialPriority`</span> and <span class="hljs-code">`priority`</span> differ).
<span class="hljs-bullet">-</span> <span class="hljs-code">`renderBlocking`</span>: 't' if the request was render-blocking, 'f' otherwise.
<span class="hljs-bullet">-</span> <span class="hljs-code">`protocol`</span>: The network protocol used (e.g., \"h2\", \"http/1.1\").
<span class="hljs-bullet">-</span> <span class="hljs-code">`fromServiceWorker`</span>: 't' if the request was served from a service worker, 'f' otherwise.
<span class="hljs-bullet">-</span> <span class="hljs-code">`initiators`</span>: A list (separated by ,) of URL indices for the initiator chain of this request. Listed in order starting from the root request to the request that directly loaded this one. This represents the network dependencies necessary to load this request. If there is no initiator, this is empty.
<span class="hljs-bullet">-</span> <span class="hljs-code">`redirects`</span>: A comma-separated list of redirects, enclosed in square brackets. Each redirect is formatted as
<span class="hljs-code">`[redirectUrlIndex|startTime|duration]`</span>, where: <span class="hljs-code">`redirectUrlIndex`</span>: Numerical index for the redirect's URL. <span class="hljs-code">`startTime`</span>: The start time of the redirect in milliseconds, relative to navigation start. <span class="hljs-code">`duration`</span>: The duration of the redirect in milliseconds.
<span class="hljs-bullet">-</span> <span class="hljs-code">`responseHeaders`</span>: A list (separated by '|') of values for specific, pre-defined response headers, enclosed in square brackets.
The order of headers corresponds to an internal fixed list. If a header is not present, its value will be empty.
</code></pre>
<p>ä»ä¸Šé¢è¿™ä¸ª Summary æ¨¡æ¿å¯ä»¥çœ‹å‡ºä¸»è¦æ˜¯æš´éœ²äº†ä¸€äº›å¸¸ç”¨çš„æ€§èƒ½æ•°æ®ï¼Œå¯ä»¥æ‹¿åˆ°ä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„æ€§èƒ½æŠ¥å‘Šã€‚</p>
<p>å¦å¤–ä¸€ä¸ªç”¨æ³•æ˜¯é€šè¿‡ <code>performance_analyze_insight</code> API æ‹¿åˆ°å…·ä½“çš„æŒ‡æ ‡å†…å®¹ï¼Œæ¯”å¦‚è¯´æˆ‘æƒ³çœ‹ä¸€ä¸‹ LCP çš„æ•°æ®ï¼Œå®ƒå°±ä¼šä» trace æ•°æ®ä¸­æ‹¿ LCP çš„å†…å®¹ï¼Œå…¶å®å†…å®¹ä¹Ÿæ˜¯<strong>é¢„è®¾å¥½çš„æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># performance<span class="hljs-emphasis">_analyze_</span>insight response</span>

<span class="hljs-section">## Insight Title: LCP breakdown</span>

<span class="hljs-section">## Insight Summary:</span>
This insight is used to analyze the time spent that contributed to the final LCP time and identify which of the 4 phases (or 2 if there was no LCP resource) are contributing most to the delay in rendering the LCP element.

<span class="hljs-section">## Detailed analysis:</span>
The Largest Contentful Paint (LCP) time for this navigation was 4,412 ms.
The LCP element (IMG, nodeId: 6815) is an image fetched from https://contentcms-bj.cdn.bcebos.com/cmspic/dc39f2b27f6e7b4ce3d76a5019276cde.jpeg?x-bce-process=image/crop,x<span class="hljs-emphasis">_0,y_</span>0,w<span class="hljs-emphasis">_665,h_</span>362 (eventKey: s-4377, ts: 779075655743).
<span class="hljs-section">## LCP resource network request: https://contentcms-bj.cdn.bcebos.com/cmspic/dc39f2b27f6e7b4ce3d76a5019276cde.jpeg?x-bce-process=image/crop,x<span class="hljs-emphasis">_0,y_</span>0,w<span class="hljs-emphasis">_665,h_</span>362</span>
eventKey: s-4377
Timings:
<span class="hljs-bullet">-</span> Queued at: 457 ms
<span class="hljs-bullet">-</span> Request sent at: 457 ms
<span class="hljs-bullet">-</span> Download complete at: 457 ms
<span class="hljs-bullet">-</span> Main thread processing completed at: 457 ms
Durations:
<span class="hljs-bullet">-</span> Download time: 0.2 ms
<span class="hljs-bullet">-</span> Main thread processing time: 0 Î¼s
<span class="hljs-bullet">-</span> Total duration: 0.2 ms
Initiator: https://mbdp02.bdstatic.com/pcnews/static/fisp<span class="hljs-emphasis">_static/common/module_</span>static<span class="hljs-emphasis">_include/module_</span>static<span class="hljs-emphasis">_include_</span>5d6af88.js
Redirects: no redirects
Status code: 200
MIME Type: image/jpeg
Protocol: h2
Priority: Low
Render blocking: No
From a service worker: No
Initiators (root request to the request that directly loaded this one): https://news.baidu.com/, https://mbdp02.bdstatic.com/pcnews/static/fisp<span class="hljs-emphasis">_static/common/module_</span>static<span class="hljs-emphasis">_include/module_</span>static<span class="hljs-emphasis">_include_</span>5d6af88.js
Response headers
<span class="hljs-bullet">-</span> content-md5: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> x-bce-flow-control-type: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> x-bce-image-info: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> age: 10675
<span class="hljs-bullet">-</span> ohc-cache-hit: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> expires: Fri, 17 Oct 2025 04:17:05 GMT
<span class="hljs-bullet">-</span> date: Tue, 14 Oct 2025 07:16:54 GMT
<span class="hljs-bullet">-</span> content-type: image/jpeg
<span class="hljs-bullet">-</span> last-modified: Tue, 14 Oct 2025 04:17:04 GMT
<span class="hljs-bullet">-</span> ohc-cos.ap-shanghai-size: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> x-cache-status: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> x-bce-debug-id: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> x-bce-request-id: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> accept-ranges: bytes
<span class="hljs-bullet">-</span> ohc-global-saved-time: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> content-length: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> x-bce-is-transition: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>
<span class="hljs-bullet">-</span> server: nginx
<span class="hljs-bullet">-</span> x-bce-storage-class: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">redacted</span>&gt;</span></span>

We can break this time down into the 4 phases that combine to make the LCP time:

<span class="hljs-bullet">-</span> Time to first byte: 207 ms (4.7% of total LCP time)
<span class="hljs-bullet">-</span> Resource load delay: 250 ms (5.7% of total LCP time)
<span class="hljs-bullet">-</span> Resource load duration: 0.2 ms (0.0% of total LCP time)
<span class="hljs-bullet">-</span> Element render delay: 3,955 ms (89.6% of total LCP time)

<span class="hljs-section">## Estimated savings: none</span>

<span class="hljs-section">## External resources:</span>
<span class="hljs-bullet">-</span> https://web.dev/articles/lcp
<span class="hljs-bullet">-</span> https://web.dev/articles/optimize-lcp
</code></pre>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„æ¨¡æ¿å†…å®¹å…¶å®éƒ½ä¸åœ¨ MCP ä»£ç é‡Œï¼Œè€Œæ˜¯ç›´æ¥å¤ç”¨çš„ devtools é‡Œçš„ä»£ç ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c28f8760a6450498981967e4121ca2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898620&amp;x-signature=QWETjrsQ2o95RcrEqwxpzfuj4%2Fs%3D" alt="" loading="lazy"/></p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒMCP åšæ€§èƒ½æµ‹è¯•æ—¶çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å…ˆå…¨é‡è·å–ä¸€ä»½ trace æ•°æ®</li>
<li>ç„¶åé€šè¿‡å…¨é‡çš„ trace æ•°æ®ç»™ä¸€ä»½ Summary å†…å®¹</li>
<li>å¦‚æœæƒ³çœ‹å…·ä½“çš„æ€§èƒ½æŒ‡æ ‡ï¼ˆæ¯”å¦‚è¯´ LCPï¼‰ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šç›¸å…³æŒ‡æ ‡æ‹¿åˆ°ä¸€ä»½ç›¸å…³æ¨¡æ¿æ•°æ®</li>
</ul>
<br/>
<p>ä»æˆ‘ä¸ªäººè§’åº¦çœ‹ï¼Œchrome-devtools-mcp çš„æ€§èƒ½æµ‹è¯•å…¶å®å°±æ˜¯<strong>é¢„åˆ¶èœ</strong>ã€‚ç›®å‰å®ƒçš„èƒ½åŠ›ä¸Šé™å°±æ˜¯ Lighthouseã€‚</p>
<p>å› ä¸ºæˆ‘åšè¿‡è¾ƒé•¿æ—¶é—´çš„æ€§èƒ½ä¼˜åŒ–ï¼Œæ‰€ä»¥å¯¹ devtool è¿™å¥— perfs çš„ä½¿ç”¨è¿˜æ˜¯æ¯”è¾ƒæœ‰å¿ƒå¾—çš„ã€‚MCP æä¾›çš„è¿™äº›æ€§èƒ½ä¼˜åŒ–ï¼Œå…¶å®éƒ½æ˜¯å¤ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev" target="_blank" title="https://web.dev" ref="nofollow noopener noreferrer">web.dev</a> ä¸­çš„æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼ˆè¿™ä¹Ÿæ˜¯ Google å®˜æ–¹çš„å¥½å¤„ï¼Œå¯ä»¥å¤ç”¨ç›¸åŒçš„èµ„äº§ï¼‰ï¼Œå¦‚æœå¼€å‘ä¸­æ¥å…¥ MCPï¼Œå¯èƒ½ä¼šä¿®å¤è§£å†³ä¸€äº›åˆçº§çš„æ€§èƒ½ä¼˜åŒ–é—®é¢˜ã€‚</p>
<p>å¦‚æœæƒ³è§£å†³ä¸€äº›éå¸¸å¤æ‚çš„æ€§èƒ½é—®é¢˜ï¼Œç›®å‰ MCP æä¾›çš„èƒ½åŠ›è¿˜æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼Œä¸€ä¸ª 100MB çš„ trace æ•°æ®ï¼Œç°åœ¨çš„ MCP åªæä¾›äº†å‡ ä¸ªåˆ‡é¢ï¼ˆSummary/LCP/FCP ç­‰ï¼‰ï¼Œä»å‡ ä¸ªåˆ‡é¢æ˜¯æ— æ³•è·å–å…¨å±€ç†è§£çš„ã€‚</p>
<h3 data-id="heading-6">Network</h3>
<p>æä¾›äº†ä¸¤ä¸ª APIï¼Œ<code>list_network_requests</code>ï¼Œåˆ—å‡ºç½‘ç»œè¯·æ±‚åˆ—è¡¨ï¼Œè¿˜æœ‰ä¸€ä¸ª <code>get_network_request</code> æŸ¥çœ‹å…·ä½“è¯·æ±‚çš„ç»†èŠ‚ä¿¡æ¯ã€‚</p>
<p>å…¶å® network èƒ½åŠ›æ ¸å¿ƒå°± 1 è¡Œä»£ç ï¼Œpptr page ç›‘å¬å¹¶æ”¶é›†æ‰€æœ‰çš„ç½‘ç»œæ•°æ®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">page.<span class="hljs-title function_">on</span>(<span class="hljs-string">'request'</span>, <span class="hljs-function"><span class="hljs-params">request</span> =&gt;</span> <span class="hljs-title function_">collect</span>(request));
</code></pre>
<p>æ‹¿åˆ°æ‰€æœ‰çš„ç½‘ç»œæ•°æ®äº†ï¼Œé‚£ä¹ˆ å…¨é‡/ç­›é€‰/ç»†èŠ‚ å…¶å®éƒ½èƒ½æ‹¿åˆ°ï¼Œç„¶ååšæ ¼å¼åŒ–å³å¯ã€‚</p>
<br/>
<p>ä¸‹é¢æ˜¯ç™¾åº¦é¦–é¡µçš„å…¨é‡ network response summary ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># list<span class="hljs-emphasis">_network_</span>requests response</span>
<span class="hljs-section">## Network requests</span>
Showing 1-63 of 63 (Page 1 of 1).
https://news.baidu.com/ GET [success - 200]
https://mbdp02.bdstatic.com/pcnews/static/fisp<span class="hljs-emphasis">_static/common/resource/js/usermonitor_</span>88a158c.js?v=1.2 GET [failed - 304]
https://gss0.bdstatic.com/5foIcy0a2gI2n2jgoY3K/static/fisp<span class="hljs-emphasis">_static/wza/aria.js?appid=c890648bf4dd00d05eb9751dd0548c30 GET [success - 200]
https://mbdp02.bdstatic.com/pcnews/static/fisp_</span>static/news/js/jquery-1.8.3.min<span class="hljs-emphasis">_a6ffa58.js GET [failed - 304]
https://efe-h2.cdn.bcebos.com/cliresource/ubc-report-sdk/2.0.8/ubc-web-sdk.umd.min.js GET [success - 200]
https://mbdp02.bdstatic.com/pcnews/static/fisp_</span>static/common/module<span class="hljs-emphasis">_static_</span>include/module<span class="hljs-emphasis">_static_</span>include<span class="hljs-emphasis">_326f211.css GET [success - 200]
https://mbdp02.bdstatic.com/pcnews/static/fisp_</span>static/news/focustop/focustop<span class="hljs-emphasis">_2701266.css GET [success - 200]
https://mbdp02.bdstatic.com/pcnews/static/fisp_</span>static/common/img/sidebar/newErweima<span class="hljs-emphasis">_9fa03e0.png GET [failed - 304]
https://news-bos.cdn.bcebos.com/mvideo/log-news.png GET [success - 200]
https://mbdp02.bdstatic.com/pcnews/static/fisp_</span>static/common/img/footer/newErweima<span class="hljs-emphasis">_9fa03e0.png GET [failed - 304]
https://mbdp02.bdstatic.com/pcnews/static/fisp_</span>static/common/lib/mod<span class="hljs-emphasis">_b818356.js GET [failed - 304]
https://mbdp02.bdstatic.com/pcnews/static/fisp_</span>static/news/focustop/focustop<span class="hljs-emphasis">_b924ecb.js GET [success - 200]
</span></code></pre>
<p>ä¸‹é¢æ˜¯æŸä¸ª HTTP è¯·æ±‚çš„ request/response ç»†èŠ‚ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># get<span class="hljs-emphasis">_network_</span>request response</span>
<span class="hljs-section">## Request https://mbdp02.bdstatic.com/pcnews/static/fisp<span class="hljs-emphasis">_static/news/js/jquery-1.8.3.min_</span>a6ffa58.js</span>
Status:  [failed - 304]
<span class="hljs-section">### Request Headers</span>
<span class="hljs-bullet">-</span> sec-ch-ua-platform:\"macOS\"
<span class="hljs-bullet">-</span> if-none-match:\"a6ffa586a4bd1dc6ac369de9a08c18ef\"
<span class="hljs-bullet">-</span> referer:https://news.baidu.com/
<span class="hljs-bullet">-</span> user-agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10<span class="hljs-emphasis">_15_</span>7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36
<span class="hljs-bullet">-</span> sec-ch-ua:\"Google Chrome\";v=\"141\", \"Not?A<span class="hljs-emphasis">_Brand\";v=\"8\", \"Chromium\";v=\"141\"
- if-modified-since:Wed, 12 Mar 2025 06:44:26 GMT
- sec-ch-ua-mobile:?0
### Response Headers
- accept-ranges:bytes
- access-control-allow-origin:*
- age:165476
- connection:keep-alive
- content-md5:pv+lhqS9HcasNp3poIwY7w==
- content-type:text/javascript; charset=utf-8
- date:Tue, 14 Oct 2025 07:52:52 GMT
- etag:\"a6ffa586a4bd1dc6ac369de9a08c18ef\"
- expires:Wed, 15 Oct 2025 09:54:56 GMT
- last-modified:Wed, 12 Mar 2025 06:44:26 GMT
- ohc-cache-hit:wzix57 [2]
- ohc-cos.ap-shanghai-size:93010
- ohc-global-saved-time:Sun, 12 Oct 2025 09:54:56 GMT
- server:JSP3/2.0.14
- x-cache-status:HIT
- x-bce-content-crc32:2237621194
- x-bce-debug-id:Rm9nn/ehbuTaGCz6KrvSy6cqmggWUatfykgluv61oqpFxkZl6/I9a7WaPOkKP9v5zCrujYrhMbyf9b2K0sYiUA==
- x-bce-flow-control-type:-1
- x-bce-is-transition:false
- x-bce-request-id:bf31960c-378d-46b8-a13d-95dbbb3741fa
- x-bce-storage-class:STANDARD
### Response Body
!function(e,t){function n(e){var t...
</span></code></pre>
<p>ä»ä¸Šé¢ä¸¤æ®µ response å¯ä»¥çœ‹å‡ºï¼Œè¿™éƒ¨åˆ†æ•°æ®ä¸å¤æ‚ï¼Œä¹Ÿæ²¡æœ‰åšæ›´å¤šçš„é¢„åˆ¶å¤„ç†ã€‚åŸºæœ¬å°±æ˜¯æŠŠæ‰€æœ‰ç½‘ç»œè¯·æ±‚åˆ—å‡ºæ¥ï¼ŒæŠŠ HTTP çš„ Header/Body æ‰“å°å‡ºæ¥ã€‚</p>
<h3 data-id="heading-7">Debugging</h3>
<p>Debugging çš„å†…å®¹æ¯”è¾ƒæ‚ï¼Œå¯ä»¥åˆ†ç±»è¯´ä¸€ä¸‹ã€‚</p>
<h4 data-id="heading-8">evaluate_script</h4>
<p>é¦–å…ˆæ˜¯ <code>evaluate_script</code> è¿™ä¸ª toolï¼Œå°±æ˜¯å‘ page é‡Œæ³¨å…¥ä¸€æ®µ JS ä»£ç åšæ‰§è¡Œï¼Œç„¶åæ‹¿åˆ°ç»“æœã€‚</p>
<h4 data-id="heading-9">list_console_messages</h4>
<p>å¦ä¸€ä¸ªæ˜¯ <code>list_console_messages</code>ï¼Œæ ¸å¿ƒä¸¤è¡Œä»£ç ï¼Œç›‘å¬é¡µé¢çš„ console å’Œ error äº‹ä»¶ï¼Œç„¶åå…¨éƒ¨æ”¶é›†èµ·æ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">page.<span class="hljs-title function_">on</span>(<span class="hljs-string">'console'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> <span class="hljs-title function_">collect</span>(event));
page.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pageerror'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> <span class="hljs-title function_">collect</span>(event));
</code></pre>
<p>æ¯”å¦‚è¯´è¿™é‡Œæˆ‘æ”¶é›†åˆ°çš„ç™¾åº¦é¦–é¡µä¿¡æ¯ï¼Œä» devtools æ§åˆ¶å°å’Œ MCP çš„ response å¯¹æ¯”ï¼Œå¯è§å†…å®¹æ˜¯ä¸€è‡´çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7444f2befd24453aa6337bff2667912d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898620&amp;x-signature=5DeL23EDU2DwzK%2B3OCMN3vwmup4%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># list<span class="hljs-emphasis">_console_</span>messages response</span>
<span class="hljs-section">## Console messages</span>
A parser-blocking, cross site (i.e. different eTLD+1) script, https://news-bos.cdn.bcebos.com/mvideo/pcconf<span class="hljs-emphasis">_2019.js?1760428369873, is invoked via document.write. The network request for this script MAY be blocked by the browser in this or a future page load due to poor network connectivity. If blocked in this page load, it will be confirmed in a subsequent console message. See https://www.chromestatus.com/feature/5718547946799104 for more details.
A parser-blocking, cross site (i.e. different eTLD+1) script, https://news-bos.cdn.bcebos.com/mvideo/pcconf_</span>2019.js?1760428369873, is invoked via document.write. The network request for this script MAY be blocked by the browser in this or a future page load due to poor network connectivity. If blocked in this page load, it will be confirmed in a subsequent console message. See https://www.chromestatus.com/feature/5718547946799104 for more details.
Error&gt; Failed to load resource: the server responded with a status of 500 (Internal Server Error)
b.jpg?cmd=1&amp;class=technnews&amp;cy=0&amp;0.4963333576628812:undefined:undefined
Error&gt; Failed to load resource: the server responded with a status of 500 (Internal Server Error)
&amp;refer<span class="hljs-emphasis">_hostname=news.baidu.com&amp;byInputUrl=1&amp;ra=3078942552352606:undefined:undefined
</span></code></pre>
<h4 data-id="heading-10">take_screenshot</h4>
<p>å°±æ˜¯å¯¹å½“å‰é¡µé¢æˆ–æŸä¸ª DOM åšæˆªå›¾ã€‚ç›´æ¥å¥—ç”¨ pptr çš„ APIï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚</p>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>ä»ã€Œ<strong>åŸºç¡€èƒ½åŠ›</strong>ã€çš„è§’åº¦çœ‹ï¼Œå¦‚æœåªæ˜¯æƒ³ç”¨ chrome-devtools-mcp å»æ§åˆ¶æµè§ˆå™¨åšä¸€äº›è‡ªåŠ¨åŒ–æ“ä½œï¼Œå®ƒå…¶å®è¿˜æ˜¯éå¸¸åŸºç¡€çš„ï¼Œå¾ˆå¤šèƒ½åŠ›éƒ½æ˜¯å±äºå…¥é—¨çº§åˆ«ï¼Œåªèƒ½è¯´èƒ½ç”¨ï¼Œå’Œå…¶ä»–çš„ Browser MCP ç›¸æ¯”è°ˆä¸ä¸Šæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼ˆä¼˜åŠ¿å¯èƒ½æ˜¯ Google å®˜æ–¹å‡ºå“ï¼Ÿï¼‰ã€‚ä½†æ˜¯è¿™äº›èƒ½åŠ›å¦‚æœåªæ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…è°ƒè¯•ç½‘é¡µï¼Œå¯èƒ½ä¹Ÿå¤Ÿç”¨äº†ã€‚</p>
<p>ä»ã€Œ<strong>è°ƒè¯•èƒ½åŠ›</strong>ã€çš„è§’åº¦çœ‹ï¼Œchrome-devtools-mcp å¯ä»¥å¤ç”¨ ChromeDevTools å›¢é˜Ÿçš„ä¸€äº›å·¥ä½œï¼Œåœ¨è°ƒè¯•èƒ½åŠ›ä¸Šå¯ä»¥ä¿è¯é•¿æœŸç»´æŠ¤çš„ç¨³å®šæ€§ã€‚ä½†ç›®å‰çœ‹è°ƒè¯•èƒ½åŠ›æä¾›çš„è¿˜æ˜¯<strong>æ¯”è¾ƒå°‘çš„</strong>ï¼š</p>
<ul>
<li>å¯ä»¥æ„ŸçŸ¥åˆ° console æ§åˆ¶å°çš„ä¸€äº›  warning/error logï¼Œç„¶ååå‘å»ä¼˜åŒ–ä¿®æ”¹ä»£ç </li>
<li>å¯ä»¥æ„ŸçŸ¥ä¸€äº› network ä¿¡æ¯ï¼Œå¯ä»¥åšä¸€äº›ç½‘ç»œé—®é¢˜çš„åˆ†æ</li>
<li>å¯ä»¥åšä¸€äº›åŸºç¡€çš„æ€§èƒ½ä¼˜åŒ–ï¼Œç›®å‰çœ‹åˆ†æçš„ä¸Šé™å°±æ˜¯ Lighthouseã€‚ä½†æ€§èƒ½ä¼˜åŒ–æœ¬èº«æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„äº‹æƒ…ï¼Œç›®å‰çš„å½¢æ€å¯èƒ½å¸®åŠ©ä¸å¤§</li>
</ul>
<p>å…¶ä½™çš„åŸºç¡€è°ƒè¯•èƒ½åŠ›å…¶å®éƒ½æ²¡æœ‰æ¶‰åŠï¼Œæ¯”å¦‚è¯´ Element è°ƒè¯•ï¼Œåˆ†æä¸€ä¸‹å„ç§å¥‡å½¢æ€ªçŠ¶çš„ CSSï¼Œè¿™ä¸ªè¿˜æ˜¯åšä¸åˆ°çš„ï¼Œå³ä½¿æ˜¯å€ŸåŠ© screenshotï¼Œä¹Ÿæ‹¿ä¸åˆ°çœŸæ­£çš„ç»†èŠ‚åªèƒ½çº¯çè’™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f214e960c265456d8d2a136d25ce3c82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898620&amp;x-signature=wx%2FIOyj7sylDNzh9W8OLFi9EoGs%3D" alt="" loading="lazy"/></p>
<p>æ›´é«˜çº§çš„è°ƒè¯•èƒ½åŠ›ï¼ˆæ¯”å¦‚è¯´ Animationsï¼ŒRendering ç­‰èƒ½åŠ›ï¼‰é¢„æœŸåç»­ä¹Ÿå¾ˆéš¾åŠ å…¥ï¼Œå› ä¸ºåŸºç¡€èƒ½åŠ›è¿˜æ²¡æœ‰æ‰“ç£¨å¥½ï¼Œè¿˜éœ€è¦å¤§é‡çš„æ—¶é—´å»å®Œå–„å’Œä¼˜åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agent å…¥é—¨ç§‘æ™®ï¼šä»"äººå·¥æ™ºéšœ"åˆ°"æ•°å­—æ‰“å·¥äºº"çš„è¿›åŒ–å²]]></title>    <link>https://juejin.cn/post/7581698074361905161</link>    <guid>https://juejin.cn/post/7581698074361905161</guid>    <pubDate>2025-12-09T15:28:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698074361905161" data-draft-id="7581691182003650570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agent å…¥é—¨ç§‘æ™®ï¼šä»&quot;äººå·¥æ™ºéšœ&quot;åˆ°&quot;æ•°å­—æ‰“å·¥äºº&quot;çš„è¿›åŒ–å²"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T15:28:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™å¤§6"/> <meta itemprop="url" content="https://juejin.cn/user/2865758605422890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agent å…¥é—¨ç§‘æ™®ï¼šä»"äººå·¥æ™ºéšœ"åˆ°"æ•°å­—æ‰“å·¥äºº"çš„è¿›åŒ–å²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2865758605422890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™å¤§6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T15:28:30.000Z" title="Tue Dec 09 2025 15:28:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¤– Agent å…¥é—¨ç§‘æ™®ï¼šä»"äººå·¥æ™ºéšœ"åˆ°"æ•°å­—æ‰“å·¥äºº"çš„è¿›åŒ–å²</h2>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æ— é™å¤§çš„åšå®¢ï¼Œè¿™ä¸ªä¸“æ æ˜¯æ–°å¼€çš„ï¼Œæ‰“ç®—è®²ä¸€è®²Agentï¼Œå…¶å®æ—©å°±æœ‰å­¦ä¹ çš„æ‰“ç®—äº†</p>
<p>è¿‘æœŸåœ¨é€›<strong>github</strong>çš„æ—¶å€™çœ‹åˆ°ä¸€ä¸ªé«˜staré¡¹ç›®ï¼Œå«åš<strong>Hello-Agents</strong>ï¼Œé¡¹ç›®åœ°å€æ˜¯[<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatawhalechina%2Fhello-agents" target="_blank" title="https://github.com/datawhalechina/hello-agents" ref="nofollow noopener noreferrer">github.com/datawhalechâ€¦</a>]
æˆ‘çš„æ–‡ç« ä¹Ÿæ˜¯å‚è€ƒäº†è¿™ä¸ªå†…å®¹å†™çš„ï¼Œè¿™ä¸ªç³»åˆ—æ›´æ–°æ¯”è¾ƒæ…¢ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯è¾¹å­¦è¾¹å†™çš„ï¼Œæ‰€ä»¥ä¼šæ¯”è¾ƒæ…¢ï¼Œä½†æ˜¯æˆ‘ä¼šå°½é‡å†™çš„è¯¦ç»†ä¸€äº›ï¼Œç”¨æ›´å¤šè´´è¿‘ç”Ÿæ´»çš„æŠ½è±¡æ¡ˆä¾‹æ¥è®²è§£ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°å¤§å®¶</p>
</blockquote>
<h3 data-id="heading-1">å¼•è¨€ï¼šå½“ AI å¼€å§‹è‡ªå·±"æ‰“å·¥"äº†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3b157dde39547e18de24c6edf2fcf25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898910&amp;x-signature=rGIKFoqmUWCX3PoyqGx4vvcMHaU%3D" alt="6c10b139f9c135dd75cbc5dd7a0493f0.png" loading="lazy"/>
<em>2025å¹´çš„AIæ‰“å·¥äººï¼šä¸ä»…ä¼šå¹²æ´»ï¼Œè¿˜ä¼šä¸»åŠ¨åŠ ç­ï¼ˆè€æ¿ç‹‚å–œï¼‰</em></p>
<p>2025 å¹´çš„æŸä¸ªæ¸…æ™¨ï¼Œä½ è¢«æ‰‹æœºéœ‡é†’â€”â€”ä¸æ˜¯é—¹é’Ÿï¼Œè€Œæ˜¯ä½ çš„ AI åŠ©æ‰‹å‘æ¥çš„æ¶ˆæ¯ï¼š"ä¸»äººï¼Œæˆ‘å·²ç»å¸®ä½ å®Œæˆäº†æœ¬å‘¨å·¥ä½œæŠ¥å‘Šçš„åˆç¨¿ï¼ˆåˆ†æäº†è¿‡å» 3 ä¸ªæœˆçš„é”€å”®æ•°æ® ğŸ“Šï¼‰ï¼Œè®¢å¥½äº†ä¸‹å‘¨å»ä¸Šæµ·çš„é«˜é“ç¥¨ ğŸš„ï¼Œè¿˜é¡ºä¾¿å¸®ä½ ç»™å¥³æœ‹å‹æŒ‘äº†å‘¨å¹´ç¤¼ç‰© ğŸï¼ˆæ ¹æ®ä½ ä»¬çš„èŠå¤©è®°å½•åˆ†æå¥¹æœ€è¿‘å–œæ¬¢çš„é¦™æ°´å“ç‰Œï¼‰ã€‚å¯¹äº†ï¼Œæˆ‘å‘ç°ä½ çš„ä¿¡ç”¨å¡è´¦å•æœ‰ç‚¹é—®é¢˜ï¼Œå·²ç»å¸®ä½ è”ç³»é“¶è¡Œ dispute äº†é‚£ç¬”å¯ç–‘äº¤æ˜“ ğŸ’³ã€‚"</p>
<p>ä½ æ˜¯ä¸æ˜¯ä»¥ä¸ºè¿™æ˜¯ç§‘å¹»ç”µå½±çš„åœºæ™¯ï¼Ÿé†’é†’ï¼è¿™å°±æ˜¯ AI Agentï¼ˆæ™ºèƒ½ä½“ï¼‰æ­£åœ¨å¹²çš„äº‹å„¿â€”â€”å®ƒä»¬ä¸å†æ˜¯è¢«åŠ¨ç­‰å¾…æŒ‡ä»¤çš„"äººå·¥æ™ºéšœ"ï¼Œè€Œæ˜¯èƒ½ä¸»åŠ¨è§„åˆ’ã€è‡ªå·±æ‰¾æ´»å„¿å¹²çš„"æ•°å­—æ‰“å·¥äºº"ğŸ‘·â€â™‚ï¸ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œå’±ä»¬å°±æ¥èŠèŠï¼šåˆ°åº•ä»€ä¹ˆæ˜¯ Agentï¼Ÿå®ƒå’Œæˆ‘ä»¬å¤©å¤©èŠå¤©çš„ ChatGPT æœ‰å•¥ä¸ä¸€æ ·ï¼Ÿä¸ºä»€ä¹ˆè¯´å®ƒå¯èƒ½æ˜¯æœªæ¥åå¹´æœ€å€¼å¾—å…³æ³¨çš„ AI æŠ€æœ¯ï¼Ÿ</p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Agentï¼šä¼š"è‡ªå·±æ‹¿ä¸»æ„"çš„ AI</h3>
<h4 data-id="heading-3">Agent çš„å®˜æ–¹å®šä¹‰ï¼šå››è¦ç´ ç¼ºä¸€ä¸å¯</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/998e1e62cc1f406cb4e017bb6296efac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898910&amp;x-signature=E7KfEJOCr17l8njwliH29FjphB0%3D" alt="d3d19d47228b1e6334f3e8f3b770ec51.png" loading="lazy"/>
<em>Agentçš„å››å¤§æ³•å®ï¼šå°‘ä¸€ä¸ªéƒ½æˆä¸äº†"å·ç‹"</em></p>
<p>ç”¨æœ€äººè¯çš„è§£é‡Šï¼š<strong>Agent å°±æ˜¯èƒ½åœ¨ç¯å¢ƒä¸­è‡ªä¸»è¡ŒåŠ¨çš„ AI ç³»ç»Ÿ</strong> ã€‚å°±åƒã€Šè¥¿æ¸¸è®°ã€‹é‡Œçš„å­™æ‚Ÿç©º ğŸ’â€”â€”æœ‰ç«çœ¼é‡‘ç›ï¼ˆæ„ŸçŸ¥ç¯å¢ƒï¼‰ã€æœ‰é‡‘ç®æ£’ï¼ˆå·¥å…·ï¼‰ã€æœ‰ä¸ƒåäºŒå˜ï¼ˆè¡ŒåŠ¨èƒ½åŠ›ï¼‰ã€è¿˜æœ‰è‡ªå·±çš„å°ç®—ç›˜ï¼ˆç›®æ ‡å’Œè§„åˆ’ï¼‰ã€‚</p>
<p>å­¦æœ¯ä¸€ç‚¹è¯´ï¼ŒAgent å¿…é¡»å…·å¤‡å››ä¸ªæ ¸å¿ƒè¦ç´ ï¼ˆæ•²é»‘æ¿ï¼è€ƒè¯•è¦è€ƒçš„ ğŸ“ï¼‰ï¼š</p>



































<table><thead><tr><th>è¦ç´ </th><th>è§£é‡Š</th><th>äººç±»å¯¹åº”</th><th>ç”Ÿæ´»ä¾‹å­</th></tr></thead><tbody><tr><td>ğŸ§ <strong>æ„ŸçŸ¥ï¼ˆSensorsï¼‰</strong></td><td>æ¥æ”¶ç¯å¢ƒä¿¡æ¯çš„èƒ½åŠ›</td><td>çœ¼ç›ã€è€³æœµã€çš®è‚¤</td><td>ä½ åˆ·æŠ–éŸ³æ—¶ï¼Œæ‰‹æœºæ‘„åƒå¤´æ„ŸçŸ¥ä½ çš„è¡¨æƒ…å˜åŒ–</td></tr><tr><td>ğŸŒ<strong>ç¯å¢ƒï¼ˆEnvironmentï¼‰</strong></td><td>Agent æ‰€å¤„çš„"ä¸–ç•Œ"</td><td>ç°å®ç‰©ç†ä¸–ç•Œ</td><td>æ™ºèƒ½å®¶å±…ç³»ç»Ÿçš„ç¯å¢ƒå°±æ˜¯ä½ çš„æˆ¿å­</td></tr><tr><td>ğŸ¯<strong>è‡ªä¸»å†³ç­–ï¼ˆAutonomyï¼‰</strong></td><td>ä¸éœ€è¦äººç±»å¹²é¢„åšå†³å®š</td><td>å¤§è„‘æ€è€ƒ</td><td>å¯¼èˆªè½¯ä»¶è‡ªåŠ¨å¸®ä½ é¿å¼€æ‹¥å µè·¯æ®µ</td></tr><tr><td>ğŸ¦¾<strong>è¡ŒåŠ¨ï¼ˆActuatorsï¼‰</strong></td><td>å½±å“ç¯å¢ƒçš„èƒ½åŠ›</td><td>æ‰‹ã€è„šã€å˜´å·´</td><td>æ™ºèƒ½éŸ³ç®±å¸®ä½ å¼€å…³ç¯ã€å®šé—¹é’Ÿ</td></tr></tbody></table>
<h4 data-id="heading-4">Agent çš„ä¸‰ç§"æ€§æ ¼"ï¼šä»"æ„£å¤´é’"åˆ°"è€å¸æœº"</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ea1e9cb32044ebe8d2eb7f77862005c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898910&amp;x-signature=DPb9PjZQxPHaptyBaY%2FDBi9qgV0%3D" alt="c3baf6a25320b011ae4f14a863932e42.png" loading="lazy"/></p>
<p><em>ä¸‰å…„å¼Ÿå„æœ‰æ‰€é•¿ï¼šæ©™çš„çˆ±å†³ç­–ï¼Œè“çš„ä¼šæ‰§è¡Œï¼Œç´«çš„ä¸“æ£ä¹±ï¼ˆä¸æ˜¯ï¼‰</em></p>
<p>å°±åƒäººæœ‰ä¸åŒæ€§æ ¼ï¼ŒAgent ä¹Ÿåˆ†ä¸‰ç§ç±»å‹ï¼Œæ™ºå•†å’Œèƒ½åŠ›å¤©å·®åœ°åˆ«ï¼š</p>
<h5 data-id="heading-5">1. ååº”å¼ Agentï¼šåªä¼š"æ¡ä»¶åå°„"çš„æ„£å¤´é’ ğŸ¤¯</h5>
<p>è¿™æ˜¯æœ€åŸå§‹çš„ Agentï¼Œæ²¡è„‘å­ï¼Œåªä¼š"if...then..."ã€‚æ¯”å¦‚ä½ å®¶çš„æ‰«åœ°æœºå™¨äºº ğŸ¤–ï¼Œç¢°åˆ°éšœç¢ç‰©å°±æ‹å¼¯ï¼Œæ²¡ç”µäº†å°±å›å……â€”â€”å®ƒä¸çŸ¥é“è‡ªå·±åœ¨æ‰«åœ°ï¼Œåªæ˜¯æœºæ¢°æ‰§è¡Œé¢„è®¾è§„åˆ™ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">æ‰«åœ°æœºå™¨äººAgent</span>(<span class="hljs-params">ä¼ æ„Ÿå™¨æ•°æ®</span>):
    <span class="hljs-keyword">if</span> å‰æ–¹æœ‰éšœç¢ç‰©:
        éšæœºå·¦è½¬æˆ–å³è½¬<span class="hljs-number">30</span>åº¦
    <span class="hljs-keyword">elif</span> ç”µé‡ &lt; <span class="hljs-number">20</span>%:
        è¿”å›å……ç”µåº§
    <span class="hljs-keyword">else</span>:
        å‘å‰èµ°å¹¶å¼€å¯å¸å°˜
</code></pre>
<h5 data-id="heading-6">2. è§„åˆ’å¼ Agentï¼šä¼š"æœªé›¨ç»¸ç¼ª"çš„èªæ˜äºº ğŸ¤“</h5>
<p>è¿™ç§ Agent å°±é«˜çº§äº†ï¼Œå®ƒæœ‰"è„‘å­"ï¼ˆå†…éƒ¨çŠ¶æ€ï¼‰ï¼Œä¼šè§„åˆ’æœªæ¥ã€‚æ¯”å¦‚ä½ æ‰‹æœºé‡Œçš„å¯¼èˆª AppğŸ§­ï¼Œå®ƒä¸ä»…çŸ¥é“ç°åœ¨çš„è·¯å†µï¼Œè¿˜ä¼šé¢„æµ‹ 1 å°æ—¶åçš„äº¤é€šçŠ¶å†µï¼Œå¸®ä½ è§„åˆ’æœ€ä¼˜è·¯çº¿ã€‚</p>
<p><strong>ç”Ÿæ´»æ¡ˆä¾‹</strong> ï¼šå½“ä½ ç”¨é«˜å¾·åœ°å›¾å¯¼èˆªæ—¶ï¼Œå®ƒä¼šå‘Šè¯‰ä½ "å‰æ–¹ 3 å…¬é‡Œæ‹¥å µï¼Œé¢„è®¡å»¶è¯¯ 15 åˆ†é’Ÿï¼Œå·²ä¸ºä½ é‡æ–°è§„åˆ’è·¯çº¿"â€”â€”è¿™å°±æ˜¯è§„åˆ’å¼ Agent åœ¨å·¥ä½œï¼</p>
<h5 data-id="heading-7">3. æ··åˆå¼ Agentï¼š"æ„£å¤´é’"å’Œ"è€å¸æœº"çš„ç»“åˆä½“ ğŸš—</h5>
<p>å¤§å¤šæ•°å®ç”¨çš„ Agent éƒ½æ˜¯æ··åˆå¼çš„ã€‚å¹³æ—¶ç”¨ååº”å¼å¿«é€Ÿå¤„ç†ç®€å•ä»»åŠ¡ï¼Œé‡åˆ°å¤æ‚æƒ…å†µå°±å¯åŠ¨è§„åˆ’æ¨¡å¼ã€‚æ¯”å¦‚ç‰¹æ–¯æ‹‰çš„è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿ ğŸš˜ï¼š</p>
<ul>
<li>ååº”å¼ï¼šçªç„¶æœ‰è½¦åŠ å¡ï¼Ÿç«‹åˆ»åˆ¹è½¦ï¼</li>
<li>è§„åˆ’å¼ï¼šå¯¼èˆªå»æœºåœºæ—¶ï¼Œä¼šæå‰è§„åˆ’é«˜é€Ÿå…¥å£ã€å……ç”µç«™ç‚¹</li>
</ul>
<h3 data-id="heading-8">Agent vs ChatGPTï¼šåˆ°åº•æœ‰å•¥ä¸ä¸€æ ·ï¼Ÿ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50c8e03e8a524ee0bd28f4d90d7488e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898910&amp;x-signature=NV56xsHEsCKqrGU%2FcF3UkThQN5g%3D" alt="f31290a62ae9cb9256fa70a5577987f4.png" loading="lazy"/></p>
<p><em>å·¦è¾¹ChatGPTï¼šåªèƒ½èŠå¤©ï¼›å³è¾¹Agentï¼šè‡ªå·±æ‰¾å·¥å…·å¹²æ´»çš„å·ç‹æœ¬ç‹</em></p>
<h4 data-id="heading-9">çµé­‚æ‹·é—®ï¼šChatGPT æ˜¯ Agent å—ï¼Ÿ</h4>
<p>å…ˆç»™ç»“è®ºï¼š <strong>ä¸æ˜¯ï¼ä½†å®ƒå¯ä»¥æˆä¸º Agent çš„"å¤§è„‘"</strong> ğŸ§ ã€‚</p>
<p>å¾ˆå¤šäººä»¥ä¸º ChatGPT å°±æ˜¯ Agentï¼Œè¿™å…¶å®æ˜¯ä¸ªå¤©å¤§çš„è¯¯ä¼šï¼å®ƒä»¬çš„åŒºåˆ«ï¼Œå°±åƒ"è®¡ç®—å™¨"å’Œ"ä¼šè®¡"çš„åŒºåˆ«â€”â€”è®¡ç®—å™¨å¾ˆä¼šç®—ï¼Œä½†ä¸ä¼šä¸»åŠ¨å¸®ä½ æŠ¥ç¨ï¼›ä¼šè®¡ä¼šç”¨è®¡ç®—å™¨ï¼Œä½†æ›´ä¼šå¸®ä½ è§„åˆ’è´¢åŠ¡ã€å¤„ç†å¤æ‚äº‹åŠ¡ã€‚</p>
<h4 data-id="heading-10">ä¸€å¼ è¡¨çœ‹æ‡‚æ ¸å¿ƒåŒºåˆ«</h4>









































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>ğŸ¤– ChatGPTï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰</th><th>ğŸ¦¾ AI Agentï¼ˆæ™ºèƒ½ä½“ï¼‰</th><th>å½¢è±¡æ¯”å–»</th></tr></thead><tbody><tr><td><strong>å·¥ä½œæ¨¡å¼</strong></td><td>è¢«åŠ¨ç­‰å¾…æŒ‡ä»¤ï¼Œ"é—®ä¸€å¥ç­”ä¸€å¥"</td><td>ä¸»åŠ¨æ‰¾äº‹åšï¼Œ"è‡ªå·±å®š KPI"</td><td>å®¢æœ vs é¡¹ç›®ç»ç†</td></tr><tr><td><strong>è®°å¿†èƒ½åŠ›</strong></td><td>ä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼ˆæ¯”å¦‚åªèƒ½è®° 4096 ä¸ªè¯ï¼‰</td><td>é•¿æœŸè®°å¿†ï¼Œå¯å­˜å‚¨å’Œè°ƒç”¨å†å²æ•°æ®</td><td>é±¼çš„ 7 ç§’è®°å¿† vs äººçš„æ—¥è®°æœ¬</td></tr><tr><td><strong>å·¥å…·ä½¿ç”¨</strong></td><td>åŸç”Ÿä¸æ”¯æŒï¼ˆéœ€è¦æ’ä»¶æ‰©å±•ï¼‰</td><td>å¤©ç”Ÿä¼šç”¨å·¥å…·ï¼ˆAPI è°ƒç”¨æ˜¯åŸºæœ¬åŠŸï¼‰</td><td>åªä¼šå£ç®— vs ä¼šç”¨è®¡ç®—å™¨+Excel</td></tr><tr><td><strong>ç›®æ ‡å¯¼å‘</strong></td><td>æ²¡æœ‰å†…åœ¨ç›®æ ‡ï¼Œå®Œæˆå½“å‰å¯¹è¯å³å¯</td><td>æœ‰æ˜ç¡®ç›®æ ‡ï¼Œä¼šæ‹†è§£ä»»åŠ¡å¹¶æ‰§è¡Œ</td><td>å¤–å–å‘˜ vs åˆ›ä¸šè€æ¿</td></tr><tr><td><strong>ç¯å¢ƒäº¤äº’</strong></td><td>åªèƒ½é€šè¿‡æ–‡æœ¬äº¤äº’</td><td>å¯æ¥å…¥å„ç§ä¼ æ„Ÿå™¨ï¼ˆæ‘„åƒå¤´ã€éº¦å…‹é£ç­‰ï¼‰</td><td>ç›²äººæ‘¸è±¡ vs æ­£å¸¸äººçœ‹ä¸–ç•Œ</td></tr></tbody></table>
<h4 data-id="heading-11">ä¸¾ä¸ªæ —å­ ğŸŒ°ï¼šè®¢æœºç¥¨çš„åŒºåˆ«</h4>
<p><strong>ç”¨ ChatGPT è®¢æœºç¥¨</strong> ï¼š</p>
<ul>
<li>ä½ ï¼š"å¸®æˆ‘æŸ¥æ˜å¤©åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨"</li>
<li>GPTï¼š"æ˜å¤©æœ‰ä»¥ä¸‹èˆªç­ï¼šCA185ï¼ˆ08:30 èµ·é£ï¼‰..."</li>
<li>ä½ ï¼š"é€‰ CA185ï¼Œç»æµèˆ±"</li>
<li>GPTï¼š"å·²å¸®ä½ ç”Ÿæˆè®¢ç¥¨é“¾æ¥..."</li>
<li>ï¼ˆå…¨ç¨‹éœ€è¦ä½ ä¸€æ­¥æ­¥æŒ‡æŒ¥ï¼‰</li>
</ul>
<p><strong>ç”¨ Agent è®¢æœºç¥¨</strong> ï¼š</p>
<ul>
<li>ä½ ï¼š"æˆ‘æ˜å¤©è¦å»ä¸Šæµ·å¼€ä¼šï¼Œå¸®æˆ‘å®‰æ’è¡Œç¨‹"</li>
<li>Agentï¼š"å¥½çš„ï¼Œå·²æŸ¥è¯¢åˆ°æ˜å¤©ä¼šè®®æ—¶é—´æ˜¯ 14:00ã€‚ä¸ºä½ é€‰æ‹©äº† CA185ï¼ˆ08:30 èµ·é£ï¼‰ï¼Œç†ç”±ï¼šâ‘  å‡†ç‚¹ç‡ 92% â‘¡ ä»·æ ¼æ¯”å…¶ä»–èˆªç­ä½ 15% â‘¢ åˆ°è¾¾åæœ‰ 2 å°æ—¶ç¼“å†²æ—¶é—´ã€‚å·²å¸®ä½ å®Œæˆè®¢ç¥¨ï¼Œåº§ä½é€‰äº†é çª—çš„ï¼ˆæ ¹æ®ä½ çš„å†å²åå¥½ï¼‰ï¼Œè¿˜é¢„çº¦äº†æ¥æœºæœåŠ¡ã€‚éœ€è¦æˆ‘åŒæ­¥å‘é€è¡Œç¨‹ç»™ä¼šè®®ç»„ç»‡è€…å—ï¼Ÿ"</li>
<li>ï¼ˆå…¨ç¨‹æ— éœ€ä½ æ“å¿ƒï¼Œå®ƒè‡ªå·±å°±æŠŠæ‰€æœ‰äº‹åŠäº†ï¼‰</li>
</ul>
<h3 data-id="heading-12">Agent çš„æ ¸å¿ƒæ¨¡å—ï¼šæ•°å­—æ‰“å·¥äººçš„"äº”è„å…­è…‘"</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2175948e5ef4c66a39a8e57518a1ddc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898910&amp;x-signature=TpQdWtSBqCes1S4olrAG%2FEPnDK8%3D" alt="482a718273a4baca012bf28c5e57ba4f.png" loading="lazy"/>
<em>æ‹†å¼€çœ‹çœ‹Agentçš„äº”è„å…­è…‘</em></p>
<p>å¦‚æœæŠŠ Agent æ¯”ä½œä¸€ä¸ªäººï¼Œé‚£å®ƒçš„"èº«ä½“æ„é€ "æ˜¯è¿™æ ·çš„ï¼š</p>
<h4 data-id="heading-13">1. æ„ŸçŸ¥æ¨¡å—ï¼šAgent çš„"äº”å®˜" ğŸ‘€ğŸ‘‚ğŸ‘ƒğŸ‘…ğŸ‘†</h4>
<p>è´Ÿè´£æ¥æ”¶å¤–ç•Œä¿¡æ¯ï¼Œç›¸å½“äºäººçš„çœ¼è€³å£é¼»ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>æ™ºèƒ½å®¶å±… Agent é€šè¿‡æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨æ„ŸçŸ¥ç¯å¢ƒ ğŸŒ¡ï¸</li>
<li>è‡ªåŠ¨é©¾é©¶ Agent é€šè¿‡æ‘„åƒå¤´å’Œé›·è¾¾æ„ŸçŸ¥è·¯å†µ ğŸš—</li>
<li>æ‰‹æœºåŠ©æ‰‹é€šè¿‡éº¦å…‹é£æ¥æ”¶è¯­éŸ³æŒ‡ä»¤ ğŸ¤</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼ˆç®€å•æ„ŸçŸ¥æ¨¡å—ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">æ„ŸçŸ¥æ¨¡å—</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.æ‘„åƒå¤´ = æ‘„åƒå¤´API()
        self.éº¦å…‹é£ = éº¦å…‹é£API()
        self.æ¸©åº¦ä¼ æ„Ÿå™¨ = æ¸©åº¦ä¼ æ„Ÿå™¨API()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">è·å–ç¯å¢ƒæ•°æ®</span>(<span class="hljs-params">self</span>):
        å›¾åƒ = self.æ‘„åƒå¤´.æ‹ç…§()
        å£°éŸ³ = self.éº¦å…‹é£.å½•éŸ³(<span class="hljs-number">5</span>ç§’)
        æ¸©åº¦ = self.æ¸©åº¦ä¼ æ„Ÿå™¨.è¯»å–()
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"å›¾åƒ"</span>: å›¾åƒ,
            <span class="hljs-string">"å£°éŸ³"</span>: å£°éŸ³,
            <span class="hljs-string">"æ¸©åº¦"</span>: æ¸©åº¦
        }
</code></pre>
<h4 data-id="heading-14">2. è®°å¿†æ¨¡å—ï¼šAgent çš„"å¤§è„‘ç¡¬ç›˜" ğŸ’¾</h4>
<p>è´Ÿè´£å­˜å‚¨ä¿¡æ¯ï¼Œåˆ†ä¸¤ç§ï¼š</p>
<p><strong>*çŸ­æœŸè®°å¿†</strong> ï¼šå¤„ç†å½“å‰ä»»åŠ¡çš„ä¸´æ—¶æ•°æ®ï¼ˆæ¯”å¦‚ä½ æ­£åœ¨å’Œå®ƒè¯´çš„è¯ï¼‰</p>
<ul>
<li><strong>é•¿æœŸè®°å¿†</strong> ï¼šå†å²ç»éªŒã€è§„åˆ™åº“ã€ç”¨æˆ·åå¥½ï¼ˆæ¯”å¦‚ä½ å–œæ¬¢å–å¥¶èŒ¶ä¸åŠ ç³–ï¼‰</li>
</ul>
<p>æœ€é…·çš„æ˜¯ï¼Œæœ‰äº› Agent è¿˜ä¼š"åæ€å­¦ä¹ "â€”â€”å°±åƒä½ å†™æ—¥è®°æ€»ç»“ç»éªŒä¸€æ ·ï¼Œå®ƒä¼šåˆ†æè‡ªå·±å“ªé‡Œåšå¾—å¥½ã€å“ªé‡Œåšå¾—ä¸å¥½ï¼Œç„¶åæ”¹è¿›ã€‚</p>
<h4 data-id="heading-15">3. è§„åˆ’æ¨¡å—ï¼šAgent çš„"å†›å¸ˆ" ğŸ§ </h4>
<p>è¿™æ˜¯ Agent çš„æ ¸å¿ƒç«äº‰åŠ›ï¼ä¼šæŠŠå¤§ç›®æ ‡æ‹†è§£æˆå°ä»»åŠ¡ï¼Œè¿˜ä¼šåˆ¶å®šè¯¦ç»†è®¡åˆ’ã€‚æ¯”å¦‚ä½ è®© Agent"å¸®æˆ‘å‡†å¤‡å‘¨æœ«é‡é¤"ï¼Œå®ƒä¼šï¼š</p>
<ol>
<li>ç›®æ ‡æ‹†è§£ï¼šç¡®å®šæ—¶é—´ â†’ é€‰åœ°ç‚¹ â†’ åˆ—æ¸…å• â†’ é‡‡è´­ â†’ å‡†å¤‡å·¥å…·</li>
<li>èµ„æºè§„åˆ’ï¼šæŸ¥å¤©æ°”é¢„æŠ¥ï¼ˆå¦‚æœä¸‹é›¨å°±æ”¹æœŸï¼‰â†’ æŸ¥å…¬å›­å¼€æ”¾æ—¶é—´</li>
<li>é£é™©æ§åˆ¶ï¼šå‡†å¤‡å¤‡ç”¨æ–¹æ¡ˆï¼ˆæ¯”å¦‚å¸¦é›¨ä¼ã€æ€¥æ•‘åŒ…ï¼‰</li>
</ol>
<h4 data-id="heading-16">4. å·¥å…·è°ƒç”¨æ¨¡å—ï¼šAgent çš„"ç‘å£«å†›åˆ€" ğŸ”§</h4>
<p>Agent ä¹‹æ‰€ä»¥å¼ºå¤§ï¼Œæ˜¯å› ä¸ºå®ƒä¼šç”¨å„ç§å·¥å…·ã€‚å°±åƒ 007 æœ‰ä¸‡èƒ½æ‰‹è¡¨ï¼ŒAgent æœ‰ä¸‡èƒ½ APIï¼š</p>
<ul>
<li>æŸ¥å¤©æ°”ï¼Ÿè°ƒç”¨å¤©æ°” API â˜ï¸</li>
<li>è®¢é…’åº—ï¼Ÿè°ƒç”¨æºç¨‹ API ğŸ¨</li>
<li>ç®—æ•°æ®ï¼Ÿè°ƒç”¨ Python è®¡ç®—å™¨ ğŸ§®</li>
<li>å‘é‚®ä»¶ï¼Ÿè°ƒç”¨ SMTP æœåŠ¡ ğŸ“§</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼ˆå·¥å…·è°ƒç”¨ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">å·¥å…·è°ƒç”¨æ¨¡å—</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.å·¥å…·åº“ = {
            <span class="hljs-string">"å¤©æ°”æŸ¥è¯¢"</span>: <span class="hljs-string">"https://api.weather.com/query"</span>,
            <span class="hljs-string">"é…’åº—é¢„è®¢"</span>: <span class="hljs-string">"https://api.ctrip.com/book"</span>,
            <span class="hljs-string">"è®¡ç®—å™¨"</span>: <span class="hljs-string">"https://api.calculator.com/compute"</span>
        }

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">è°ƒç”¨å·¥å…·</span>(<span class="hljs-params">self, å·¥å…·å, å‚æ•°</span>):
        <span class="hljs-keyword">if</span> å·¥å…·å <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.å·¥å…·åº“:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æŠ±æ­‰ï¼Œæˆ‘è¿˜ä¸ä¼šç”¨è¿™ä¸ªå·¥å…·"</span>
        <span class="hljs-comment"># è°ƒç”¨APIå¹¶è¿”å›ç»“æœ</span>
        <span class="hljs-keyword">return</span> requests.get(self.å·¥å…·åº“[å·¥å…·å], params=å‚æ•°).json()

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
agent_tools = å·¥å…·è°ƒç”¨æ¨¡å—()
å¤©æ°” = agent_tools.è°ƒç”¨å·¥å…·(<span class="hljs-string">"å¤©æ°”æŸ¥è¯¢"</span>, {<span class="hljs-string">"åŸå¸‚"</span>: <span class="hljs-string">"åŒ—äº¬"</span>, <span class="hljs-string">"æ—¥æœŸ"</span>: <span class="hljs-string">"2025-12-10"</span>})
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ˜å¤©å¤©æ°”ï¼š<span class="hljs-subst">{å¤©æ°”[<span class="hljs-string">'æ¸©åº¦'</span>]}</span>â„ƒï¼Œ<span class="hljs-subst">{å¤©æ°”[<span class="hljs-string">'çŠ¶å†µ'</span>]}</span>"</span>)
</code></pre>
<h3 data-id="heading-17">Agent çš„åº”ç”¨åœºæ™¯ï¼šå·²ç»åœ¨æ‚„æ‚„æ”¹å˜ä¸–ç•Œ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70eeb15b9de2471d8dba503ff4bdbff9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765898910&amp;x-signature=HooQ79XhSD1kgceeeOmFecnoMVE%3D" alt="25d2b1e16535cd4f2b1dc5885e657d48.png" loading="lazy"/></p>
<p><em>ä¸Šç­æ‘¸é±¼å¸¦å¨ƒç‚’è‚¡å…¨åœ¨è¡Œï¼Œå°±æ˜¯ä¸ä¼šå¸®ä½ èƒŒé”…â€”â€”æ¯•ç«Ÿç”µå­æ‰“å·¥äººä¹Ÿæ€•å¤±ä¸š</em></p>
<p>Agent ä¸æ˜¯å®éªŒå®¤é‡Œçš„æ¦‚å¿µï¼Œå®ƒå·²ç»åœ¨å¾ˆå¤šé¢†åŸŸ"æ‰“å·¥"äº†ï¼š</p>
<h4 data-id="heading-18">1. ä¸ªäººåŠ©ç†ï¼šä½ çš„"24 å°æ—¶ç§˜ä¹¦" ğŸ•µï¸â€â™€ï¸</h4>
<p><strong>*Microsoft Copilot+</strong> ï¼šèƒ½å¸®ä½ ç®¡ç†æ—¥ç¨‹ã€å›å¤é‚®ä»¶ã€ç”šè‡³å†™ä»£ç æ—¶ä¸»åŠ¨æç¤ºé”™è¯¯</p>
<ul>
<li><strong>Anthropic Claude 3</strong> ï¼šå¯ä»¥åˆ†æä½ çš„æ–‡æ¡£ï¼Œè‡ªåŠ¨ç”Ÿæˆæ‘˜è¦å’Œå¾…åŠäº‹é¡¹</li>
<li><strong>å›½å†…é€‰æ‰‹</strong> ï¼šå­—èŠ‚è·³åŠ¨"è±†åŒ… Agent"ã€é˜¿é‡Œ"é€šä¹‰åƒé—® Agent"</li>
</ul>
<h4 data-id="heading-19">2. ä¼ä¸šåº”ç”¨ï¼šé™æœ¬å¢æ•ˆçš„"è¶…çº§å‘˜å·¥" ğŸ¢</h4>
<ul>
<li><strong>å®¢æœ Agent</strong> ï¼šä¸ä»…èƒ½å›ç­”é—®é¢˜ï¼Œè¿˜èƒ½ä¸»åŠ¨å‘ç°å®¢æˆ·æ½œåœ¨éœ€æ±‚ï¼ˆæ¯”å¦‚"æ‚¨æœ€è¿‘ç»å¸¸æŸ¥è¯¢é€€è´§æ”¿ç­–ï¼Œæ˜¯å¯¹äº§å“æœ‰ä»€ä¹ˆä¸æ»¡æ„å—ï¼Ÿ"ï¼‰</li>
<li><strong>æ•°æ®åˆ†æ Agent</strong> ï¼šè‡ªåŠ¨ä»æ•°æ®åº“æŠ“å–æ•°æ®ã€ç”ŸæˆæŠ¥è¡¨ã€å‘ç°å¼‚å¸¸ï¼ˆæ¯”å¦‚"æœ¬æœˆè¥¿å—åœ°åŒºé”€å”®é¢ä¸‹é™ 15%ï¼Œå·²å¸®æ‚¨å®šä½åˆ° 3 ä¸ªé‡ç‚¹é—®é¢˜..."ï¼‰</li>
<li><strong>ä¾›åº”é“¾ Agent</strong> ï¼šé¢„æµ‹åº“å­˜éœ€æ±‚ï¼Œè‡ªåŠ¨ä¸‹å•è¡¥è´§ï¼Œç”šè‡³å’Œä¾›åº”å•†è°ˆåˆ¤ä»·æ ¼</li>
</ul>
<h4 data-id="heading-20">3. æœªæ¥ç•…æƒ³ï¼šAgent ç”Ÿæ€ç³»ç»Ÿ ğŸŒ</h4>
<p>æƒ³è±¡ä¸€ä¸‹æœªæ¥ï¼šä½ çš„ä¸ªäºº Agent å¯ä»¥å’ŒåŒ»ç”Ÿ Agentã€å¾‹å¸ˆ Agentã€è€å¸ˆ Agent"å¼€ä¼š"ï¼Œå¸®ä½ è§£å†³å¤æ‚é—®é¢˜ã€‚å°±åƒç°åœ¨çš„ App Storeï¼Œæœªæ¥å¯èƒ½ä¼šæœ‰"Agent Store"â€”â€”ä½ éœ€è¦ä»€ä¹ˆåŠŸèƒ½ï¼Œä¸‹è½½ä¸€ä¸ª Agent å°±è¡Œï¼</p>
<h3 data-id="heading-21">ç»“è¯­ï¼šä¸ºä»€ä¹ˆ Agent å€¼å¾—ä½ å…³æ³¨ï¼Ÿ</h3>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šè¯´ï¼š"Agent è¿™ä¹ˆå‰å®³ï¼Œä¼šæŠ¢æˆ‘çš„å·¥ä½œå—ï¼Ÿ" ğŸ˜±</p>
<p>æˆ‘çš„å›ç­”æ˜¯ï¼š <strong>ä¼šï¼Œä½†æ›´ä¼šåˆ›é€ æ–°å·¥ä½œ</strong> ã€‚å°±åƒè®¡ç®—æœºæ·˜æ±°äº†æ‰“å­—å‘˜ï¼Œå´åˆ›é€ äº†ç¨‹åºå‘˜ã€äº§å“ç»ç†ç­‰æ–°èŒä¸šã€‚æœªæ¥æœ€åƒé¦™çš„ï¼Œå¯èƒ½æ˜¯é‚£äº›ä¼š"ç®¡ç† Agent å›¢é˜Ÿ"çš„äºº ğŸ‘©â€ğŸ’¼ğŸ‘¨â€ğŸ’¼ã€‚</p>
<p>è®°ä½è¿™ä¸ªå…¬å¼ï¼š <strong>Agent = å¤§è¯­è¨€æ¨¡å‹ï¼ˆChatGPT ç­‰ï¼‰ + è®°å¿† + è§„åˆ’ + å·¥å…·</strong> ã€‚å®ƒä¸æ˜¯å‡­ç©ºå‡ºç°çš„æ–°æŠ€æœ¯ï¼Œè€Œæ˜¯ AI æŠ€æœ¯å‘å±•åˆ°ä¸€å®šé˜¶æ®µçš„å¿…ç„¶äº§ç‰©â€”â€”å°±åƒæ‰‹æœºä»åŠŸèƒ½æœºè¿›åŒ–åˆ°æ™ºèƒ½æœºï¼ŒAI æ­£åœ¨ä»"è¢«åŠ¨å·¥å…·"è¿›åŒ–åˆ°"ä¸»åŠ¨åŠ©æ‰‹"ã€‚</p>
<blockquote>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œæ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— ğŸŒŸï¼Œå…³æ³¨æˆ‘çš„ Agent ç³»åˆ—åšå®¢â€”â€”ä¸‹ä¸€ç¯‡æˆ‘ä»¬èŠèŠï¼š <strong>å¦‚ä½•è‡ªå·±åŠ¨æ‰‹åšä¸€ä¸ªç®€å•çš„ Agent</strong> ï¼ˆä¸éœ€è¦ç¼–ç¨‹å¤§ç¥ï¼Œæ™®é€šäººä¹Ÿèƒ½å­¦ä¼šï¼ï¼‰ã€‚</p>
<p>æœ€åç•™ä¸ªæ€è€ƒé¢˜ï¼šå¦‚æœä½ èƒ½æ‹¥æœ‰ä¸€ä¸ª Agentï¼Œä½ æœ€æƒ³è®©å®ƒå¸®ä½ åšä»€ä¹ˆï¼Ÿè¯„è®ºåŒºå‘Šè¯‰æˆ‘ï¼ğŸ‘‡</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«è®©é¡µé¢ â€œé¬¼ç•œè·³â€ï¼Google é’¦ç‚¹çš„ 3 ä¸ªæ€§èƒ½æŒ‡æ ‡ï¼Œæ²»å¥½äº†æˆ‘ 80% çš„ç”¨æˆ·æŠ•è¯‰]]></title>    <link>https://juejin.cn/post/7581693431740252223</link>    <guid>https://juejin.cn/post/7581693431740252223</guid>    <pubDate>2025-12-09T15:48:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581693431740252223" data-draft-id="7581678032336846890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«è®©é¡µé¢ â€œé¬¼ç•œè·³â€ï¼Google é’¦ç‚¹çš„ 3 ä¸ªæ€§èƒ½æŒ‡æ ‡ï¼Œæ²»å¥½äº†æˆ‘ 80% çš„ç”¨æˆ·æŠ•è¯‰"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-09T15:48:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PineappleCoder"/> <meta itemprop="url" content="https://juejin.cn/user/3323167184272627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«è®©é¡µé¢ â€œé¬¼ç•œè·³â€ï¼Google é’¦ç‚¹çš„ 3 ä¸ªæ€§èƒ½æŒ‡æ ‡ï¼Œæ²»å¥½äº†æˆ‘ 80% çš„ç”¨æˆ·æŠ•è¯‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323167184272627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PineappleCoder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T15:48:17.000Z" title="Tue Dec 09 2025 15:48:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ’¥å‘Šåˆ«å¡é¡¿ï¼å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¬¬ä¸€è¯¾ï¼šGoogleé’¦ç‚¹çš„ä¸‰å¤§æ ¸å¿ƒæŒ‡æ ‡ï¼Œä½ çœŸçš„æ‡‚å—ï¼Ÿ</h2>
<blockquote>
<p>æ¬¢è¿æ¥åˆ°å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸“æ çš„ç¬¬ä¸€è¯¾ï¼åœ¨è¿™ä¸ªâ€œç”¨æˆ·ä½“éªŒè‡³ä¸Šâ€çš„æ—¶ä»£ï¼Œä¸€ä¸ªå¡é¡¿ã€ç¼“æ…¢ã€ä¹±è·³çš„ç½‘ç«™ï¼Œå°±åƒä¸€è¾†æŠ›é”šåœ¨é«˜é€Ÿå…¬è·¯ä¸Šçš„è·‘è½¦ï¼Œå†é…·ç‚«ä¹Ÿåªä¼šè®©äººæŠ“ç‹‚ã€‚åˆ«æ‹…å¿ƒï¼ŒGoogleå·²ç»ä¸ºä½ å‡†å¤‡å¥½äº†ä¸€ä»½â€œä½“æ£€æŠ¥å‘Šâ€â€”â€”<strong>æ ¸å¿ƒWebæŒ‡æ ‡ï¼ˆCore Web Vitalsï¼‰</strong> ã€‚</p>
</blockquote>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ­å¼€è¿™ä»½æŠ¥å‘Šçš„ç¥ç§˜é¢çº±ï¼Œç”¨æœ€é€šä¿—æ˜“æ‡‚çš„æ–¹å¼ï¼Œè®©ä½ å½»åº•ææ‡‚è¿™ä¸‰å¤§æŒ‡æ ‡ï¼Œè¿ˆå‡ºæ€§èƒ½ä¼˜åŒ–çš„ç¬¬ä¸€æ­¥ï¼</p>
<h3 data-id="heading-1">âœ¨ LCPï¼ˆLargest Contentful Paintï¼‰ï¼šæœ€å¤§å†…å®¹ç»˜åˆ¶</h3>
<h4 data-id="heading-2">ğŸš€ è¡¡é‡ï¼šåŠ è½½æ€§èƒ½ï¼ˆä½ çš„â€œç¬¬ä¸€å°è±¡â€ï¼‰</h4>
<p>LCPï¼Œç›´è¯‘è¿‡æ¥æ˜¯<strong>æœ€å¤§å†…å®¹ç»˜åˆ¶</strong>ã€‚å®ƒè¡¡é‡çš„æ˜¯ç”¨æˆ·åœ¨è®¿é—®é¡µé¢æ—¶ï¼Œ<strong>è§†å£ä¸­æœ€å¤§çš„é‚£å—å¯è§å†…å®¹ï¼ˆå›¾ç‰‡æˆ–æ–‡æœ¬å—ï¼‰å®Œæˆæ¸²æŸ“æ‰€éœ€çš„æ—¶é—´</strong>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒå›ç­”äº†ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š<strong>ç”¨æˆ·è§‰å¾—ä½ çš„é¡µé¢â€œåŠ è½½å®Œæˆâ€äº†å—ï¼Ÿ</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ‰“å¼€ä¸€ä¸ªç”µå•†ç½‘ç«™ï¼Œæœ€æƒ³çœ‹åˆ°çš„æ˜¯å•†å“å¤§å›¾å’Œä»·æ ¼ã€‚LCPå°±æ˜¯è¡¡é‡è¿™ä¸ªâ€œæœ€é‡è¦çš„ä¸œè¥¿â€å¤šä¹…èƒ½å‡ºç°åœ¨ä½ é¢å‰ã€‚å®ƒç›´æ¥åæ˜ äº†ç”¨æˆ·å¯¹é¡µé¢åŠ è½½é€Ÿåº¦çš„æ„ŸçŸ¥ã€‚</p>















<table><thead><tr><th>æŒ‡æ ‡</th><th>è¡¡é‡ç»´åº¦</th><th>ä¼˜ç§€æ ‡å‡†</th></tr></thead><tbody><tr><td><strong>LCP</strong></td><td>ç”¨æˆ·æ„ŸçŸ¥çš„åŠ è½½é€Ÿåº¦</td><td><strong>&lt;= 2.5ç§’</strong></td></tr></tbody></table>
<p>å¦‚æœä½ çš„ LCP è¶…è¿‡ 2.5 ç§’ï¼Œç”¨æˆ·å¯èƒ½å°±å¼€å§‹æ„Ÿåˆ°ä¸è€çƒ¦äº†ã€‚ä¼˜åŒ– LCPï¼Œå°±æ˜¯è®©ä½ çš„â€œé—¨é¢â€ä»¥æœ€å¿«çš„é€Ÿåº¦å±•ç¤ºç»™å®¢äººï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1672e56406bc47e0aac380547f1f2c15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGluZWFwcGxlQ29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765900097&amp;x-signature=CVcbklCH6NcDWqIjSLFshD4BVxQ%3D" alt="LCP ç¤ºæ„å›¾" loading="lazy"/></p>
<h3 data-id="heading-3">âš ï¸ CLSï¼ˆCumulative Layout Shiftï¼‰ï¼šç´¯ç§¯å¸ƒå±€åç§»</h3>
<h4 data-id="heading-4">ğŸ›¡ï¸ è¡¡é‡ï¼šè§†è§‰ç¨³å®šæ€§ï¼ˆå‘Šåˆ«â€œé¬¼ç•œâ€è·³åŠ¨ï¼‰</h4>
<p>CLSï¼Œ<strong>ç´¯ç§¯å¸ƒå±€åç§»</strong>ï¼Œå¬èµ·æ¥æœ‰ç‚¹æ‹—å£ï¼Œä½†å®ƒçš„ä½œç”¨éå¸¸ç›´è§‚ï¼š<strong>å®ƒè¡¡é‡é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­å…ƒç´ çš„éé¢„æœŸç§»åŠ¨</strong>ã€‚</p>
<p>ä½ ä¸€å®šé‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šæ­£å‡†å¤‡ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œç»“æœå®ƒä¸Šé¢çš„å¹¿å‘Šçªç„¶åŠ è½½å‡ºæ¥ï¼ŒæŠŠæŒ‰é’®æŒ¤ä¸‹å»äº†ï¼Œä½ ç‚¹äº†ä¸ªç©ºï¼è¿™å°±æ˜¯å¸ƒå±€åç§»ï¼ˆLayout Shiftï¼‰ã€‚</p>
<p>CLS çš„åˆ†æ•°å°±æ˜¯ç”¨æ¥é‡åŒ–è¿™ç§â€œé¬¼ç•œâ€è·³åŠ¨æœ‰å¤šä¸¥é‡çš„ã€‚åˆ†æ•°è¶Šä½ï¼Œä»£è¡¨ä½ çš„é¡µé¢å¸ƒå±€è¶Šç¨³å®šï¼Œç”¨æˆ·ä½“éªŒè¶Šä¸æ»‘ã€‚</p>















<table><thead><tr><th>æŒ‡æ ‡</th><th>è¡¡é‡ç»´åº¦</th><th>ç†æƒ³å€¼</th></tr></thead><tbody><tr><td><strong>CLS</strong></td><td>é¡µé¢å¸ƒå±€ç¨³å®šæ€§</td><td><strong>&lt; 0.1</strong></td></tr></tbody></table>
<p><strong>å°è´´å£«ï¼š</strong> å¸ƒå±€åç§»é€šå¸¸æ˜¯ç”±æ²¡æœ‰è®¾ç½®å°ºå¯¸çš„å›¾ç‰‡ã€åŠ¨æ€æ’å…¥çš„å¹¿å‘Šæˆ–å†…å®¹å¯¼è‡´çš„ã€‚æƒ³è¦ CLS è¾¾æ ‡ï¼Œè¯·ç»™ä½ çš„å…ƒç´ é¢„ç•™å¥½â€œå‘ä½â€ï¼</p>
<h3 data-id="heading-5">âš¡ï¸ INPï¼ˆInteraction to Next Paintï¼‰ï¼šäº¤äº’åˆ°ä¸‹æ¬¡ç»˜åˆ¶</h3>
<h4 data-id="heading-6">ğŸ”„ è¡¡é‡ï¼šæ•´ä½“äº¤äº’å“åº”æ€§ï¼ˆä»â€œç¬¬ä¸€å°è±¡â€åˆ°â€œå…¨ç¨‹æµç•…â€ï¼‰</h4>
<p>INPï¼Œ<strong>äº¤äº’åˆ°ä¸‹æ¬¡ç»˜åˆ¶</strong>ï¼Œæ˜¯æ€§èƒ½æŒ‡æ ‡å®¶æ—çš„æ–°æ™‹â€œç½‘çº¢â€ã€‚å®ƒè¡¡é‡çš„æ˜¯ç”¨æˆ·è¿›è¡Œ<strong>ç‚¹å‡»ã€è§¦æ‘¸æˆ–é”®ç›˜è¾“å…¥</strong>åï¼Œæµè§ˆå™¨éœ€è¦å¤šé•¿æ—¶é—´æ‰èƒ½åœ¨å±å¹•ä¸Šç»˜åˆ¶å‡ºè§†è§‰åé¦ˆã€‚</p>
<p>å®ƒå–ä»£äº†è€å‰è¾ˆ <strong>FIDï¼ˆFirst Input Delayï¼Œé¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼‰</strong> ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>





















<table><thead><tr><th>ä¸ºä»€ä¹ˆç”¨ INP æ›¿ä»£ FIDï¼Ÿ</th><th>INP çš„ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>FID çš„å±€é™æ€§</strong></td><td>ä»…æµ‹é‡<strong>é¦–æ¬¡</strong>è¾“å…¥å»¶è¿Ÿï¼Œå¿½ç•¥äº†ç”¨æˆ·åœ¨åç»­æ“ä½œä¸­é‡åˆ°çš„å¡é¡¿ã€‚</td></tr><tr><td><strong>INP çš„å…¨é¢æ€§</strong></td><td>ç›‘æ§ç”¨æˆ·<strong>æ•´ä¸ªè®¿é—®å‘¨æœŸ</strong>å†…çš„æ‰€æœ‰äº¤äº’ï¼Œæ›´å…¨é¢ã€‚</td></tr><tr><td><strong>æ›´çœŸå®çš„ç”¨æˆ·ä½“éªŒ</strong></td><td>INP é€‰å–<strong>æœ€æ…¢çš„ä¸€æ¬¡äº¤äº’</strong>ä½œä¸ºä»£è¡¨å€¼ï¼Œåæ˜ äº†â€œæ•´ä¸ªä½¿ç”¨è¿‡ç¨‹ä¸­â€çš„æµç•…åº¦ï¼Œè€Œä¸æ˜¯ä»…ä»…çœ‹â€œç¬¬ä¸€å°è±¡â€ã€‚</td></tr></tbody></table>
<p>ç®€å•æ¥è¯´ï¼ŒFID å°±åƒé¢è¯•å®˜åªçœ‹ä½ çš„ç®€å†ï¼Œè€Œ INP åˆ™æ˜¯å…¨ç¨‹è·Ÿæ‹ä½ çš„å·¥ä½œè¡¨ç°ã€‚ä¸€ä¸ªçœŸæ­£æµç•…çš„ç½‘ç«™ï¼Œä¸åº”è¯¥åªæ˜¯ç¬¬ä¸€æ¬¡ç‚¹å‡»å¿«ï¼Œè€Œæ˜¯ä»å¤´åˆ°å°¾éƒ½å¿«ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4192b9eb4e4f48b18d13c2a2e6f47295~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGluZWFwcGxlQ29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765900097&amp;x-signature=SB%2Bwny7ENj6Rwl1AohjgzDUAg7w%3D" alt="INP ä¸ FID æ¯”è¾ƒå›¾" loading="lazy"/></p>
<h3 data-id="heading-7">ğŸ”¬ å®éªŒå®¤æ•°æ® vs. ğŸŒ ç°åœºæ•°æ®ï¼šæ€§èƒ½ä¼˜åŒ–çš„â€œåŒé‡å¥â€</h3>
<p>ææ‡‚äº†ä¸‰å¤§æŒ‡æ ‡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬èŠèŠå¦‚ä½•è·å–è¿™äº›æ•°æ®ã€‚æ€§èƒ½æ•°æ®ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š<strong>å®éªŒå®¤æ•°æ®</strong>å’Œ<strong>ç°åœºæ•°æ®</strong>ã€‚</p>























<table><thead><tr><th>ç±»å‹</th><th>æ¥æºï¼ˆæ•°æ®æ¸ é“ï¼‰</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>å®éªŒå®¤æ•°æ® (Lab Data)</strong></td><td>Lighthouse</td><td>å¯æ§ã€å¿«é€Ÿã€æ–¹ä¾¿å¤ç°é—®é¢˜</td><td>éçœŸå®ç”¨æˆ·ç¯å¢ƒï¼Œå¯èƒ½ä¸å®é™…ä½“éªŒæœ‰åå·®</td></tr><tr><td><strong>ç°åœºæ•°æ® (Field Data)</strong></td><td>CrUX/Web Vitals</td><td>çœŸå®ç”¨æˆ·ä½“éªŒï¼Œæ•°æ®æœ€å¯é </td><td>ä¸æ˜“å¤ç°é—®é¢˜ï¼Œéœ€è¦æ—¶é—´ç§¯ç´¯æ•°æ®</td></tr></tbody></table>
<h4 data-id="heading-8">ğŸ”§ å®éªŒå®¤æ•°æ®å·¥å…·</h4>
<p>å®éªŒå®¤æ•°æ®å°±åƒä½ åœ¨å®éªŒå®¤é‡Œç”¨ç²¾å¯†ä»ªå™¨åšçš„æµ‹è¯•ï¼Œç¯å¢ƒæ˜¯å›ºå®šçš„ã€‚</p>
<ul>
<li><strong>Lighthouse (Chrome å†…ç½®)</strong> ï¼šChrome å¼€å‘è€…å·¥å…·é‡Œå°±èƒ½æ‰¾åˆ°ï¼Œå®ƒèƒ½å¿«é€Ÿç»™ä½ æ‰“åˆ†ï¼Œæ”¯æŒ LCP/CLS/INP è¯„åˆ†ã€‚</li>
<li><strong>PageSpeed Insights</strong>ï¼šGoogle å®˜æ–¹å·¥å…·ï¼Œå®ƒä¼šç»“åˆ<strong>å®éªŒå®¤æ•°æ®</strong>ï¼ˆLighthouseï¼‰å’Œ<strong>ç°åœºæ•°æ®</strong>ï¼ˆCrUXï¼‰ï¼Œç»™ä½ ä¸€ä»½ä¸€ç«™å¼çš„æ€§èƒ½æŠ¥å‘Šã€‚</li>
</ul>
<h4 data-id="heading-9">ğŸ› ï¸ ç°åœºæ•°æ®å·¥å…·</h4>
<p>ç°åœºæ•°æ®åˆ™æ˜¯ä½ çš„ç½‘ç«™åœ¨çœŸå®ç”¨æˆ·ã€çœŸå®ç½‘ç»œã€çœŸå®è®¾å¤‡ä¸Šè·‘å‡ºæ¥çš„â€œå®æˆ˜æˆç»©â€ã€‚</p>
<ul>
<li><strong>Google Search Console</strong>ï¼šæä¾›ç½‘ç«™æ•´ä½“çš„æ ¸å¿ƒæŒ‡æ ‡å¥åº·æŠ¥å‘Šï¼Œæ˜¯ SEO ä¼˜åŒ–çš„é‡è¦å‚è€ƒã€‚</li>
<li><strong>web-vitals JavaScript åº“</strong>ï¼šè¿™æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆçš„â€œç§˜å¯†æ­¦å™¨â€ã€‚å®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„åº“ï¼Œå¯ä»¥è®©ä½ åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­å®æ—¶æ”¶é›† LCPã€CLSã€INP æ•°æ®ï¼Œå¹¶ä¸ŠæŠ¥åˆ°ä½ çš„åˆ†æåå°ã€‚</li>
</ul>
<h4 data-id="heading-10">ğŸ’¡ ä½¿ç”¨ <code>web-vitals</code> æ”¶é›†æ€§èƒ½æ•°æ®ï¼ˆå®æˆ˜ä»£ç ï¼‰</h4>
<p>é€šè¿‡è¿™ä¸ªåº“ï¼Œä½ å¯ä»¥å°†çœŸå®ç”¨æˆ·çš„æ€§èƒ½æ•°æ®å‘é€åˆ°ä½ çš„æœåŠ¡å™¨è¿›è¡Œåˆ†æï¼Œå»ºç«‹è‡ªå·±çš„æ€§èƒ½ç›‘æµ‹ä½“ç³»ï¼ˆRUMï¼ŒReal User Monitoringï¼‰ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">import { onLCP, onCLS, onINP } from 'web-vitals'
â€‹
function <span class="hljs-built_in">sendToAnalytics</span>(metric) {
 Â <span class="hljs-comment">// å°†æ€§èƒ½æŒ‡æ ‡æ•°æ®è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²</span>
 Â const <span class="hljs-selector-tag">body</span> = JSON<span class="hljs-selector-class">.stringify</span>(metric)
 Â 
 Â <span class="hljs-comment">// ä½¿ç”¨ navigator.sendBeacon æˆ– fetch å‘é€æ•°æ®ï¼Œç¡®ä¿åœ¨é¡µé¢å…³é—­å‰å‘é€æˆåŠŸ</span>
  ;(navigator.sendBeacon &amp;&amp; navigator.sendBeacon('/analytics', body)) ||
 Â  Â <span class="hljs-built_in">fetch</span>('/analytics', { body, method: 'POST', keepalive: true })
}
â€‹
<span class="hljs-comment">// ç›‘å¬å¹¶ä¸ŠæŠ¥ä¸‰å¤§æ ¸å¿ƒæŒ‡æ ‡</span>
<span class="hljs-built_in">onLCP</span>(sendToAnalytics)
<span class="hljs-built_in">onCLS</span>(sendToAnalytics)
<span class="hljs-built_in">onINP</span>(sendToAnalytics)
</code></pre>
<h3 data-id="heading-11">âœ… æ€»ç»“ï¼šæ€§èƒ½ä¼˜åŒ–çš„â€œä¸‰å­—çœŸç»â€</h3>
<p>å¥½äº†ï¼Œæ€»ç»“ä¸€ä¸‹æˆ‘ä»¬ä»Šå¤©å­¦åˆ°çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œä¸‰å­—çœŸç»â€ï¼š</p>
<ol>
<li><strong>LCPï¼šæ ¸å¿ƒå†…å®¹å°½å¿«å¯è§</strong>ï¼ˆåŠ è½½é€Ÿåº¦è¦å¿«ï¼ï¼‰</li>
<li><strong>CLSï¼šé¡µé¢å¸ƒå±€ç¨³å®š</strong>ï¼ˆåˆ«å†ä¹±è·³äº†ï¼ï¼‰</li>
<li><strong>INPï¼šäº¤äº’å“åº”åŠæ—¶</strong>ï¼ˆæ“ä½œè¦æµç•…ï¼ï¼‰</li>
</ol>
<p>é€šè¿‡ <strong>Lighthouse</strong>ã€<strong>Search Console</strong> ä»¥åŠ <strong>Web Vitals</strong> åº“ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å»ºç«‹èµ·ä¸€å¥—å®Œå–„çš„æ€§èƒ½ç›‘æµ‹ä½“ç³»ï¼Œè¿˜èƒ½ç²¾å‡†åœ°è¯†åˆ«å¹¶ä¿®å¤é‚£äº›è®©ç”¨æˆ·æŠ“ç‹‚çš„ä½“éªŒç“¶é¢ˆã€‚</p>
<p>æå‡ç½‘é¡µè´¨é‡ï¼Œä¸ä»…èƒ½è®©ç”¨æˆ·å¼€å¿ƒï¼Œè¿˜èƒ½è®©ä½ çš„ç½‘ç«™åœ¨ Google æœç´¢ä¸­è·å¾—æ›´å¥½çš„æ’åã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Firebase CLI ä¸€ç›´å…³è”å¤±è´¥]]></title>    <link>https://juejin.cn/post/7581666412021874697</link>    <guid>https://juejin.cn/post/7581666412021874697</guid>    <pubDate>2025-12-09T14:06:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581666412021874697" data-draft-id="7581666412021858313" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Firebase CLI ä¸€ç›´å…³è”å¤±è´¥"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-09T14:06:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jèˆ¹é•¿"/> <meta itemprop="url" content="https://juejin.cn/user/1820446987136903"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Firebase CLI ä¸€ç›´å…³è”å¤±è´¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1820446987136903/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jèˆ¹é•¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:06:03.000Z" title="Tue Dec 09 2025 14:06:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¯”å¦‚æ‰§è¡Œ`firebase login``ç„¶åè·³è½¬æµè§ˆå™¨ï¼Œè¿›è¡Œå…³è”</p>
<h2 data-id="heading-0">è§£å†³åŠæ³•ï¼š</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> https_proxy=http:<span class="hljs-comment">//127.0.0.1:xxxx</span>
<span class="hljs-keyword">export</span> http_proxy=http:<span class="hljs-comment">//127.0.0.1:xxxx</span>
<span class="hljs-keyword">export</span> all_proxy=socks5:<span class="hljs-comment">//127.0.0.1:xxxx</span>
firebase login
</code></pre>
<hr/>
<h2 data-id="heading-1">åŸå› :</h2>
<p>macOS ä¸Šå¼€ V åªæ˜¯è®©æµè§ˆå™¨ç­‰åº”ç”¨èµ°ä»£ç†ï¼Œä½†ç»ˆç«¯é»˜è®¤ä¸èµ°ä»£ç†ã€‚ç»ˆç«¯é‡Œçš„å‘½ä»¤ï¼ˆå¦‚ firebaseï¼‰éœ€è¦æ‰‹åŠ¨è®¾ç½® http_proxy å’Œ https_proxy ç¯å¢ƒå˜é‡æ‰èƒ½èµ°ä»£ç†è®¿é—® Google æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆåœ¨ Agent æ—¶ä»£ï¼Œæˆ‘é€‰æ‹©äº† Bunï¼Ÿ]]></title>    <link>https://juejin.cn/post/7581678301216964608</link>    <guid>https://juejin.cn/post/7581678301216964608</guid>    <pubDate>2025-12-09T14:04:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581678301216964608" data-draft-id="7581664445241606159" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆåœ¨ Agent æ—¶ä»£ï¼Œæˆ‘é€‰æ‹©äº† Bunï¼Ÿ"/> <meta itemprop="keywords" content="JavaScript,Bun,Agent"/> <meta itemprop="datePublished" content="2025-12-09T14:04:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mCell"/> <meta itemprop="url" content="https://juejin.cn/user/2280829967146779"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆåœ¨ Agent æ—¶ä»£ï¼Œæˆ‘é€‰æ‹©äº† Bunï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2280829967146779/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mCell
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:04:58.000Z" title="Tue Dec 09 2025 14:04:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŒæ­¥è‡³ä¸ªäººç«™ç‚¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fstack.mcell.top%2Ftopics%2Fbun%2F01_start" target="_blank" title="https://stack.mcell.top/topics/bun/01_start" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆåœ¨ Agent æ—¶ä»£ï¼Œæˆ‘é€‰æ‹©äº† Bunï¼Ÿ - Bun æŒ‡å—</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3cd035dbd624c1fbaae35c03f9cd479~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbUNlbGw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765893954&amp;x-signature=ccCGXokJPpTUBsibIK%2FRWU3KAgI%3D" alt="076.webp" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€åˆ‡éƒ½ä»é‚£æ¡ã€Œæ”¶è´­ Bunã€çš„æ–°é—»å¼€å§‹</h2>
<p>ä¸Šå‘¨ä¸‰ï¼Œçœ‹åˆ° Anthropic çš„ä¸€åˆ™æ–°é—»ï¼šä»–ä»¬å®£å¸ƒæ”¶è´­ Bunï¼Œå¹¶åœ¨æ–‡ä¸­æ˜ç¡®å†™åˆ°â€”â€”å¯¹ Claude Code çš„ç”¨æˆ·æ¥è¯´ï¼Œè¿™æ¬¡æ”¶è´­æ„å‘³ç€<strong>æ›´å¿«çš„æ€§èƒ½ã€æ›´é«˜çš„ç¨³å®šæ€§ä»¥åŠå…¨æ–°çš„èƒ½åŠ›</strong>ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fnews%2Fanthropic-acquires-bun-as-claude-code-reaches-usd1b-milestone" title="https://www.anthropic.com/news/anthropic-acquires-bun-as-claude-code-reaches-usd1b-milestone" target="_blank" ref="nofollow noopener noreferrer">Anthropic</a>)</p>
<p>ç®€å•ç¿»è¯‘ä¸€ä¸‹å°±æ˜¯ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬è¦æŠŠæ•´ä¸ªç¼–ç  Agent çš„åŸºç¡€è®¾æ–½ï¼Œæ¢æˆä¸€ä¸ªæ›´å¿«ã€æ›´é¡ºæ‰‹çš„ JS/TS è¿è¡Œæ—¶ã€‚</p>
</blockquote>
<p>è¿™æ¡æ–°é—»å¯¹æˆ‘è§¦åŠ¨å¾ˆå¤§ï¼Œè‡³å°‘æš´éœ²å‡ºä¸¤ä¸ªäº‹å®ï¼š</p>
<ol>
<li>
<p><strong>Agent æ—¶ä»£çš„åŸºç¡€è®¾æ–½åœ¨å˜åŒ–</strong>
ä»¥å‰æˆ‘ä»¬å†™ CLIã€å†™åç«¯ï¼ŒNode è¶³å¤Ÿç”¨äº†ï¼›ä½†åˆ°äº† Agent è¿™ç§ã€Œåˆ°å¤„èµ·å°è¿›ç¨‹ã€åˆ°å¤„è·‘å·¥å…·ã€çš„åœºæ™¯é‡Œï¼Œ<strong>å¯åŠ¨é€Ÿåº¦ã€å†·å¯åŠ¨æ€§èƒ½ã€all-in-one å·¥å…·é“¾</strong>ï¼Œçªç„¶å˜å¾—éå¸¸å…³é”®ã€‚</p>
</li>
<li>
<p><strong>Bun ä¸å†åªæ˜¯ä¸€ä¸ªã€Œæ–°ç©å…·ã€</strong>
å®ƒå·²ç»æˆä¸ºä¸€å®¶å¤´éƒ¨ AI å…¬å¸çš„åº•å±‚ç»„ä»¶ä¹‹ä¸€ï¼šAnthropic æ—©å°±åœ¨å†…éƒ¨ç”¨ Bun è·‘ Claude Codeï¼Œç°åœ¨ç´¢æ€§ç›´æ¥æ”¶è´­ï¼ŒæŠŠå®ƒå½“ä½œä¸‹ä¸€ä»£ AI è½¯ä»¶å·¥ç¨‹çš„åŸºç¡€è®¾æ–½ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.sh%2F" title="https://bun.sh/" target="_blank" ref="nofollow noopener noreferrer">bun.sh</a>)</p>
</li>
</ol>
<p>å½“æˆ‘å†å»ç¿» Bun çš„å®˜ç½‘æ—¶ï¼Œå°±ä¼šå‘ç°ï¼š</p>
<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªé›† <strong>JavaScript/TypeScript è¿è¡Œæ—¶ã€åŒ…ç®¡ç†å™¨ã€æ‰“åŒ…å™¨ã€æµ‹è¯•è¿è¡Œå™¨</strong> äºä¸€èº«çš„ all-in-one å·¥å…·ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.sh%2F" title="https://bun.sh/" target="_blank" ref="nofollow noopener noreferrer">bun.sh</a>)</p>
</blockquote>
<p>è¿™å’Œæˆ‘å¯¹ã€Œä¼ ç»Ÿ JS è¿è¡Œæ—¶ã€çš„å°è±¡å·²ç»å®Œå…¨ä¸ä¸€æ ·äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ee9e9a5a084460ea7f346a8a1127782~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbUNlbGw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765893954&amp;x-signature=zpNVA%2BQw9bpf6xk%2FCO10dMKNzS0%3D" alt="078.webp" loading="lazy"/></p>
<h2 data-id="heading-1">å…ˆè¯´è¯´æˆ‘çš„æŠ€æœ¯èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆè¦å†™è¿™ä¸ªä¸“é¢˜ï¼Ÿ</h2>
<p>æˆ‘å¹³æ—¶å†™ä»£ç åå‘ä¸¤ç±»æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li><strong>TypeScript</strong>ï¼šå‰ç«¯ã€å·¥å…·è„šæœ¬ã€Node å°æœåŠ¡</li>
<li><strong>Go</strong>ï¼šæœåŠ¡ç«¯ã€ä¸€äº›ååº•å±‚çš„æ´»</li>
</ul>
<p>å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘å¯¹ Node çš„ä½¿ç”¨åœºæ™¯å¤§æ¦‚å°±æ˜¯è¿™å‡ ç§ï¼š</p>
<ul>
<li>å†™ä¸ªå°è„šæœ¬ï¼š<code>ts-node</code> / <code>tsx</code> + ä¸€ç‚¹é…ç½®ï¼Œè·‘å®Œå°±æ‰”</li>
<li>å†™ä¸ªä¸­å°å‹æœåŠ¡ç«¯ï¼šExpress / Nest è¿™ä¸€ç±»</li>
</ul>
<p>è¿™äº›åœºæ™¯é‡Œï¼Œä¸€ä¸ªå¾ˆæ˜æ˜¾çš„æ„Ÿå—æ˜¯ï¼š</p>
<ul>
<li>Node <strong>å¤Ÿæˆç†Ÿ</strong>ï¼šç”Ÿæ€åºå¤§ï¼Œèµ„æ–™å¤šï¼Œå‡ºäº†é—®é¢˜å¾ˆå®¹æ˜“æœåˆ°å‘</li>
<li>ä½† Node ä¹Ÿ<strong>å¤Ÿã€Œåšé‡ã€</strong>ï¼šä¸€å †é…ç½®ã€å„ç§å·¥å…·ç»„åˆã€æ‰“åŒ…æµ‹è¯• lint å„ç§é“¾è·¯</li>
</ul>
<p>ç›´åˆ°æˆ‘å¼€å§‹è®¤çœŸçœ‹ Bun çš„æ–‡æ¡£ï¼Œç¬¬ä¸€æ¬¡æœ‰ä¸€ç§å¾ˆå¼ºçƒˆçš„å¯¹æ¯”æ„Ÿï¼š</p>
<blockquote>
<p>ã€Œå“¦ï¼ŒåŸæ¥ç°åœ¨å†™ JS/TS åç«¯å·²ç»å¯ä»¥è¿™ä¹ˆç®€å•äº†ï¼Ÿã€</p>
</blockquote>
<ul>
<li>ä¸ç”¨å†™ <code>tsconfig.json</code>ï¼ˆå¾ˆå¤šæ—¶å€™é»˜è®¤å°±å¾ˆå¥½ç”¨ï¼‰</li>
<li>dev / build / test åŸºæœ¬å°±æ˜¯ä¸€è¡Œå‘½ä»¤ï¼š
<code>bun run</code> / <code>bun build</code> / <code>bun test</code></li>
<li>èµ·ä¸€ä¸ª HTTP serverï¼Œç”¨çš„è¿˜æ˜¯ JS/TSï¼Œä½† API æ˜æ˜¾æ›´ç®€æ´ï¼Œå¾ˆå¤šåœ°æ–¹ç”šè‡³ä¸éœ€è¦ Node çš„é‚£ä¸€å¥—åº•å±‚ API</li>
</ul>
<p>å†åŠ ä¸Šæˆ‘æœ€è¿‘åœ¨åš Agent ç›¸å…³çš„ä¸œè¥¿ï¼Œè‡ªç„¶å°±é¡ºåŠ¿äº§ç”Ÿäº†ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>æ—¢ç„¶æˆ‘æœ¬æ¥å°±æƒ³ç”¨ TS å†™ä¸€ä¸ª ReAct Agentï¼Œé‚£ä¸ºä»€ä¹ˆä¸å¹²è„†ç”¨ Bun æ¥åš runtime å‘¢ï¼Ÿ</p>
</blockquote>
<h2 data-id="heading-2">Agent CLI çš„é€‰å‹ï¼šä¸ºä»€ä¹ˆä¼šæƒ³åˆ° Bunï¼Ÿ</h2>
<p>åœ¨å¼€æä¹‹å‰ï¼Œæˆ‘ç‰¹åœ°å»çœ‹äº†ä¸€åœˆç°åœ¨æ¯”è¾ƒçƒ­é—¨çš„ Agent CLI éƒ½æ˜¯æ€ä¹ˆé€‰æŠ€æœ¯æ ˆçš„ï¼š</p>
<ul>
<li>Google çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgoogle-gemini%2Fgemini-cli" target="_blank" title="https://github.com/google-gemini/gemini-cli" ref="nofollow noopener noreferrer">Gemini CLI</a>ï¼š<strong>Node</strong></li>
<li>OpenAI çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenai%2Fcodex" target="_blank" title="https://github.com/openai/codex" ref="nofollow noopener noreferrer">Codex CLI</a>ï¼š<strong>Rust</strong>å†™æ ¸å¿ƒé€»è¾‘ï¼ŒUIäº¤ç»™<strong>Nodeå’ŒTypeScript</strong></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-code" target="_blank" title="https://github.com/anthropics/claude-code" ref="nofollow noopener noreferrer">Claude Code CLI</a> å’ŒåŸºç¡€è®¾æ–½ï¼š<strong>Bun</strong>(<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.reuters.com%2Fbusiness%2Fmedia-telecom%2Fanthropic-acquires-developer-tool-startup-bun-scale-ai-coding-2025-12-02%2F" title="https://www.reuters.com/business/media-telecom/anthropic-acquires-developer-tool-startup-bun-scale-ai-coding-2025-12-02/" target="_blank" ref="nofollow noopener noreferrer">Reuters</a>)</li>
</ul>
<p>å¦‚æœä½ æŠŠè¿™äº›ä¿¡æ¯æ”¾åœ¨ä¸€èµ·ï¼Œä¼šå¤§è‡´çœ‹åˆ°ä¸€ä¸ªè¶‹åŠ¿ï¼š</p>
<ul>
<li>Rustï¼šæ›´åå‘<strong>æè‡´æ€§èƒ½ã€å¯æ§æ€§ã€å®‰å…¨æ€§</strong>ï¼Œé€‚åˆé‚£ç§ã€Œæˆ‘è¦æŠŠä¸€å¥—å·¥å…·åšåˆ°å¾ˆåº•å±‚ã€å¾ˆç¨³ã€çš„å›¢é˜Ÿã€‚</li>
<li>Nodeï¼šç¨³å®šã€ç”Ÿæ€æˆç†Ÿï¼Œä½†éšç€é¡¹ç›®å¾€ AI å·¥ç¨‹ã€Agent æ–¹å‘å‘å±•ï¼Œåœ¨<strong>å†·å¯åŠ¨ã€å·¥å…·é“¾æ•´åˆ</strong>ä¸Šæ²¡æœ‰é‚£ä¹ˆã€Œé¡ºæ‰‹ã€ã€‚</li>
<li>Bunï¼šå°è¯•åœ¨ Node çš„ç”Ÿæ€åŸºç¡€ä¸Šï¼Œå¾€å‰æ¨è¿›ä¸€æ­¥ï¼Œåšä¸€ä¸ª<strong>all-in-oneã€æ€§èƒ½æå¼ºçš„ JS/TS è¿è¡Œæ—¶</strong>ã€‚</li>
</ul>
<p>è€Œæˆ‘è¿™ä¸ªäººï¼Œæœ‰ä¸ªå¾ˆæ˜æ˜¾çš„åå¥½ï¼š</p>
<blockquote>
<p>èƒ½ç”¨ TS è§£å†³çš„ï¼Œå°±å…ˆåˆ«æ€¥ç€ä¸Š Rustã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œå½“æˆ‘çœ‹åˆ°ï¼š</p>
<ul>
<li>Anthropic åœ¨ Agent ä¸šåŠ¡ä¸Šï¼ŒæŠ¼æ³¨ Bun</li>
<li>Bun è‡ªå·±çš„å®šä½åˆæ˜¯ï¼š<strong>â€œæŠŠä½ å†™ Node çš„é‚£å¥—äº‹ï¼Œå…¨éƒ¨åšåˆ°æ›´å¿«ã€æ›´ç®€å•â€</strong>(<a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.sh%2F" title="https://bun.sh/" target="_blank" ref="nofollow noopener noreferrer">bun.sh</a>)</li>
</ul>
<p>é‚£æˆ‘å¿ƒé‡Œé‚£ä¸ªé—®é¢˜å°±æ›´å…·ä½“äº†ï¼š</p>
<blockquote>
<p><strong>åœ¨ã€Œå†™ Agentã€è¿™ä¸ªå…·ä½“åœºæ™¯é‡Œï¼ŒBun çœŸçš„æ¯” Node ä½“éªŒæ›´å¥½å—ï¼Ÿ</strong></p>
</blockquote>
<p>æˆ‘ä¸å¤ªå–œæ¬¢åªçœ‹ benchmarkï¼Œäºæ˜¯å°±å†³å®šå†™ç‚¹å®æ‰“å®çš„ä¸œè¥¿æ¥è¯•è¯•çœ‹ã€‚</p>
<h2 data-id="heading-3">ä¸€ä¸ªä¸åˆ°ç™¾è¡Œçš„ ReAct Agent Demo</h2>
<p>ä¸ºäº†éªŒè¯è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ç»™è‡ªå·±å®šäº†ä¸€ä¸ªå¾ˆå°çš„ç»ƒä¹ ç›®æ ‡ï¼š</p>
<blockquote>
<p>ç”¨ <strong>Bun + TypeScript</strong>ï¼Œå†™ä¸€ä¸ªã€Œä¸åˆ°ç™¾è¡Œä»£ç ã€çš„æç®€ ReAct Agent Demoã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b908fc9be8984806815ffdb3a53db679~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbUNlbGw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765893954&amp;x-signature=p1FDHkeA85pyGFzyX%2Bvg%2BAqK684%3D" alt="079.webp" loading="lazy"/></p>
<p>è¿™ä¸ª Agent ä¸è¿½æ±‚å¤šå¤æ‚çš„åŠŸèƒ½ï¼Œä¸“æ³¨è¿™å‡ ä»¶äº‹ï¼š</p>
<ol>
<li>
<p>ç»´æŠ¤ä¸€ä¸ªæœ€å°å¯ç”¨çš„ <strong>ReAct loop</strong>ï¼ˆæ€è€ƒ â†’ è¡ŒåŠ¨ â†’ è§‚å¯Ÿ â†’ å†æ€è€ƒï¼‰</p>
</li>
<li>
<p>å†…ç½®å°‘é‡å·¥å…·ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><code>read</code>ï¼šè¯»å–æ–‡ä»¶å†…å®¹</li>
<li><code>write</code>ï¼šå†™å…¥/æ›´æ–°æ–‡ä»¶</li>
</ul>
</li>
<li>
<p>æ•´ä¸ªé¡¹ç›®å°½é‡æ¸…çˆ½ï¼Œä¸åšå¤šä½™å°è£…</p>
</li>
</ol>
<p>å†™çš„è¿‡ç¨‹éå¸¸ã€ŒAI åŒ–ã€ï¼š</p>
<ul>
<li>å…ˆç”¨ Node å†™äº†ä¸€ç‰ˆæœ€æœ´ç´ çš„ç‰ˆæœ¬</li>
<li>å†è®© AI å¸®æˆ‘<strong>æ”¹å†™ä¸º Bun çš„ API</strong></li>
<li>æˆ‘è´Ÿè´£è¡¥å‘ã€é‡æ„ã€æ•´ç†ç»“æ„</li>
</ul>
<p>ç»“æœå‡ºä¹æ„æ–™åœ°é¡ºç•…ï¼š</p>
<ul>
<li>å¾ˆå¤šåŸæ¥éœ€è¦ <code>fs</code> æ¨¡å—ã€å„ç§å·¥å…·åº“çš„åœ°æ–¹ï¼Œåœ¨ Bun é‡Œå¯ä»¥ç”¨è‡ªå·±çš„ API å†™å¾—æ›´ç®€æ´ï¼Œæ¯”å¦‚ <code>Bun.file()</code>ã€<code>Bun.write()</code> è¿™ç§ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.sh%2F" title="https://bun.sh/" target="_blank" ref="nofollow noopener noreferrer">bun.sh</a>)</li>
<li>dev / build / test è‡ªå·±éƒ½ä¸ç”¨çº ç»“ï¼Œç›´æ¥ <code>bun xxx</code> çš„é‚£ä¸€å¥—å°±è¡Œï¼Œå‡ ä¹ä¸éœ€è¦é¢å¤–é…ç½®ã€‚</li>
<li>Agent loop é‚£æ®µä»£ç æœ¬èº«æ˜¯æ¯”è¾ƒæ ¸å¿ƒçš„é€»è¾‘ï¼Œé›†ä¸­ç²¾åŠ›åœ¨è¿™é‡Œå°±å¥½äº†ï¼Œä¸å¤ªéœ€è¦ä¸ºå·¥ç¨‹åŒ–é…ç½®åˆ†å¿ƒã€‚</li>
</ul>
<p>æ›´å…³é”®çš„æ˜¯ï¼š</p>
<blockquote>
<p>æ•´ä¸ª Demo æ¡†æ¶æ­å¥½åï¼Œæˆ‘æœ‰ä¸€ç§ã€Œè¿™ä¸ªä¸œè¥¿æ˜¯å¯ä»¥å¾€å‰è®¤çœŸç»´æŠ¤ã€çš„æ„Ÿè§‰ï¼Œè€Œä¸æ˜¯å†™å®Œå°±ä¸¢ã€‚</p>
</blockquote>
<p>è¿™å’Œæˆ‘ä¹‹å‰å†™å¾ˆå¤š Node å°è„šæœ¬çš„å¿ƒç†é¢„æœŸæ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚</p>
<h2 data-id="heading-4">å†èŠä¸€å¥ã€Œå…¨æ ˆã€ï¼šTS ä¹‹åï¼Œè¿è¡Œæ—¶æ˜¯è°ï¼Ÿ</h2>
<p>å‘¨æœ«åˆ· Xï¼Œçœ‹åˆ°è€è®¸çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fxushiwei%2Fstatus%2F1997328503985852798" target="_blank" title="https://x.com/xushiwei/status/1997328503985852798" ref="nofollow noopener noreferrer">å¸–å­</a>ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9769d9e9c45f48d8b4e9c60a9497b6f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbUNlbGw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765893954&amp;x-signature=PDVyJaTf04nuXCHyDoai5h4yKyQ%3D" alt="080.webp" loading="lazy"/></p>
<p>è¿™å¥è¯æˆ‘å¾ˆè®¤åŒã€‚
å‰åç«¯ç»Ÿä¸€ TS æŠ€æœ¯æ ˆï¼Œå¯¹ä¸ªäººå¼€å‘è€…æ¥è¯´å¤ªå‹å¥½äº†ï¼š</p>
<ul>
<li>ä¸€é—¨è¯­è¨€ï¼Œä»æµè§ˆå™¨è·‘åˆ°æœåŠ¡ç«¯ã€å†åˆ° CLIã€å·¥å…·é“¾</li>
<li>ç±»å‹ç³»ç»Ÿæœ¬èº«å°±æˆä¸ºä½ çš„ã€Œæ–‡æ¡£ + æ ¡éªŒå™¨ã€</li>
</ul>
<p>é‚£é¡ºç€è¿™ä¸ªæ€è·¯ï¼Œä¸‹ä¸€æ­¥çš„é—®é¢˜å°±è‡ªç„¶æ¥äº†ï¼š</p>
<blockquote>
<p>æ—¢ç„¶è¯­è¨€æ˜¯ TypeScriptï¼Œé‚£<strong>è¿è¡Œæ—¶</strong>å‘¢ï¼Ÿ
æœªæ¥çš„ TS è¿è¡Œæ—¶ï¼Œä¼šä¸ä¼šä» Nodeï¼Œé€æ¸èµ°å‘ Bunï¼ˆä¸€éƒ¨åˆ†åœºæ™¯ï¼‰ï¼Ÿ</p>
</blockquote>
<p>æˆ‘ä¸æ‰“ç®—åœ¨è¿™é‡Œç»™å‡ºä¸€ä¸ªç»“è®ºâ€”â€”æ¯•ç«Ÿ Node çš„ä½“é‡ã€ç”Ÿæ€ã€å†å²æ²‰æ·€æ‘†åœ¨é‚£é‡Œï¼Œè€Œ Bun ç›®å‰ä¹Ÿè¿˜åªæ˜¯ä¸€ä¸ªã€Œä¸¤å¹´å¤šä¸€ç‚¹ã€çš„æ–° runtimeã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.sh%2F" title="https://bun.sh/" target="_blank" ref="nofollow noopener noreferrer">bun.sh</a>)</p>
<p>ä½†ä»æˆ‘è‡ªå·±çš„ä½“éªŒçœ‹ï¼Œæœ‰ä¸¤ç‚¹å¾ˆå€¼å¾—å…³æ³¨ï¼š</p>
<ol>
<li>
<p><strong>Bun æ˜¯ä¸ºã€Œç°ä»£ JS/TS å¼€å‘ã€é‡æ–°è®¾è®¡è¿‡çš„</strong>
å®ƒè‡ªå¸¦ bundlerã€test runnerã€åŒ…ç®¡ç†å™¨ï¼Œä¸å†æ˜¯ã€Œä¸€ä¸ª runtime + ä¸€å †ç¬¬ä¸‰æ–¹å·¥å…·æ‹¼è£…ã€çš„æ¨¡å¼ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.sh%2F" title="https://bun.sh/" target="_blank" ref="nofollow noopener noreferrer">bun.sh</a>)</p>
</li>
<li>
<p><strong>Bun å’Œ Agentã€AI å·¥ç¨‹è¿™ç±»æ–°åœºæ™¯çš„å¥‘åˆåº¦å¼‚å¸¸é«˜</strong></p>
<ul>
<li>CLI éœ€è¦å†·å¯åŠ¨å¿« â†’ Bun åšå¾—å¾ˆå¥½</li>
<li>é¡¹ç›®å–œæ¬¢ all-in-one å·¥å…·é“¾ â†’ Bun ç›´æ¥å†…ç½®</li>
<li>ä½ æœ¬æ¥å°±å†™ TS â†’ Bun å¯¹ TS åŸç”Ÿå‹å¥½</li>
</ul>
</li>
</ol>
<p>è¿™äº›ç‰¹æ€§ï¼Œå åŠ èµ·æ¥å°±ä¼šè®©äººäº§ç”Ÿé‚£ç§æ„Ÿè§‰ï¼š</p>
<blockquote>
<p>ã€Œå¦‚æœæˆ‘è¦é‡å†™ä¸€éç°åœ¨æ‰‹é‡Œè¿™äº› Node è„šæœ¬ã€å·¥å…·ã€Agentï¼Œé‚£å¥½åƒçœŸçš„å¯ä»¥è€ƒè™‘ç›´æ¥ä¸Š Bunã€‚ã€</p>
</blockquote>
<h2 data-id="heading-5">è¿™ä¸ªä¸“é¢˜æƒ³å†™äº›ä»€ä¹ˆï¼Ÿ</h2>
<p>æ—¢ç„¶å·²ç»æœ‰äº†å®è·µçš„å¥‘æœºï¼ˆReAct Agent Demoï¼‰ï¼Œå†åŠ ä¸Šæˆ‘ä¸€è´¯ã€Œå­¦æ–°ä¸œè¥¿å–œæ¬¢é¡ºæ‰‹å†™ç‚¹ä¸œè¥¿ã€çš„ä¹ æƒ¯ï¼Œé‚£å¹²è„†å°±å¼€ä¸€ä¸ªæ–°ä¸“é¢˜ï¼šã€ŠBun æŒ‡å—ã€‹ã€‚</p>
<p><strong>è¿™ç¬¬ä¸€ç¯‡å°±æ˜¯å¼•è¨€ï¼Œåªå›ç­”ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦å­¦ Bunï¼Ÿ</strong></p>
<p>åé¢çš„å‡ ç¯‡ï¼Œæˆ‘æ‰“ç®—æŒ‰è¿™æ ·çš„èŠ‚å¥å±•å¼€ï¼ˆæš‚å®šï¼‰ï¼š</p>
<ol>
<li>
<p><strong>å®‰è£…ä¸ä¸Šæ‰‹ï¼šä» Node è¿ç§»åˆ° Bun æœ‰å¤šéš¾ï¼Ÿ</strong></p>
<ul>
<li>å®‰è£… Bun</li>
<li>è·‘èµ·ç¬¬ä¸€ä¸ª <code>bun run</code> / <code>bun dev</code></li>
<li>æŠŠä¸€ä¸ªç®€å•çš„ Node è„šæœ¬è¿ç§»åˆ° Bun</li>
</ul>
</li>
<li>
<p><strong>Bun çš„ all-in-one å·¥å…·é“¾</strong></p>
<ul>
<li>åŒ…ç®¡ç†å™¨ï¼š<code>bun install</code> vs npm/pnpm</li>
<li><code>bun test</code>ï¼šå†…ç½®æµ‹è¯•å¦‚ä½•ç”¨</li>
<li><code>bun build</code>ï¼šæ‰“åŒ…ã€æ„å»ºã€å•æ–‡ä»¶å¯æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>ç”¨ Bun å†™ HTTP æœåŠ¡</strong></p>
<ul>
<li><code>Bun.serve()</code> çš„åŸºæœ¬ç”¨æ³•(<a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.sh%2F" title="https://bun.sh/" target="_blank" ref="nofollow noopener noreferrer">bun.sh</a>)</li>
<li>å’Œ Node / Express çš„ç›´è§‚å¯¹æ¯”</li>
<li>ç®€å•çš„ API æœåŠ¡å®æˆ˜</li>
</ul>
</li>
<li>
<p><strong>æ–‡ä»¶ã€è¿›ç¨‹ä¸å·¥å…·è„šæœ¬ï¼šBun çš„æ ‡å‡†åº“ä½“éªŒ</strong></p>
<ul>
<li><code>Bun.file()</code> / <code>Bun.write()</code> ç­‰å¸¸ç”¨ API</li>
<li>ç”¨ Bun å†™ä¸€ä¸ªå®ç”¨ CLI å°å·¥å…·</li>
</ul>
</li>
<li>
<p><strong>å®æˆ˜ç¯‡ï¼šç”¨ Bun + TS å†™ä¸€ä¸ª ReAct Agent Demo</strong></p>
<ul>
<li>æ ¸å¿ƒ loop é€»è¾‘æ‹†è§£</li>
<li>å¦‚ä½•ç»„ç»‡ã€Œå·¥å…·ã€å±‚ï¼ˆread / write / è°ƒç”¨å¤–éƒ¨æ¥å£ï¼‰</li>
<li>è¿è¡Œã€è°ƒè¯•ä¸ã€ŒAI Coding åŠ©æ”»ã€çš„ä¸€äº›ç»éªŒ</li>
</ul>
</li>
<li>
<p><strong>è¸©å‘è®°å½• &amp; è¿ç§»ç»éªŒ</strong></p>
<ul>
<li>å“ªäº›åœ°æ–¹çœŸçš„çˆ½äº†</li>
<li>å“ªäº›åœ°æ–¹è¿˜ä¸å¦‚ Node æˆç†Ÿ</li>
<li>å†™ç»™å‡†å¤‡ä» Node è¿åˆ° Bun çš„ä½ </li>
</ul>
</li>
</ol>
<p>å¦‚æœä½ å·²ç»ä¼šå†™ JavaScript / Nodeï¼Œè¿™ä¸ªä¸“é¢˜ä¸ä¼šä»ã€Œä»€ä¹ˆæ˜¯ Promiseã€è®²èµ·ï¼Œè€Œä¼šæ›´èšç„¦åœ¨ï¼š</p>
<ul>
<li><strong>ä» Node è¿ç§»åˆ° Bun æ—¶ï¼Œå¤§è„‘éœ€è¦åˆ‡æ¢çš„é‚£ä¸€å°éƒ¨åˆ†ä¸œè¥¿</strong></li>
<li><strong>åœ¨ Bun é‡Œï¼Œå¦‚ä½•ç”¨å°½é‡å°‘çš„ä»£ç åšæ›´å¤šäº‹</strong></li>
<li><strong>ç»“åˆ Agent / AI å·¥ç¨‹åœºæ™¯ï¼Œæ„Ÿå—ä¸‹ä¸€ä»£ JS/TS runtime çš„å‘³é“</strong></li>
</ul>
<h2 data-id="heading-6">å†™åœ¨æœ€å</h2>
<p>æˆ‘å¹¶ä¸æ‰“ç®—æŠŠ Bun ç¥åŒ–æˆã€ŒNode æ€æ‰‹ã€â€”â€”è‡³å°‘çŸ­æœŸå†…ï¼Œå®ƒæ›´åƒæ˜¯ï¼š</p>
<blockquote>
<p>ä¸€ä¸ªæé€‚åˆã€Œä¸ªäººå¼€å‘è€… / å°å›¢é˜Ÿ / æ–°é¡¹ç›® / Agent å·¥ç¨‹ã€å°é²œçš„ JS/TS è¿è¡Œæ—¶ã€‚</p>
</blockquote>
<p>è€Œè¿™ä¸ªç³»åˆ—ï¼Œå°±æ˜¯æˆ‘åœ¨è¿™ä¸ªå°è¯•è¿‡ç¨‹ä¸­çš„ã€Œå®è·µç¬”è®°ã€ï¼š</p>
<ul>
<li>ä¸€éƒ¨åˆ†æ˜¯ Bun æœ¬èº«çš„èƒ½åŠ›æ•´ç†</li>
<li>ä¸€éƒ¨åˆ†æ˜¯æˆ‘åš ReAct Agent çš„çœŸå®è¸©å‘ç»éªŒ</li>
<li>è¿˜æœ‰ä¸€éƒ¨åˆ†ï¼Œæ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘å¯¹ã€Œå…¨æ ˆ / TS / runtime æ¼”è¿›ã€çš„ä¸€äº›å°æ€è€ƒ</li>
</ul>
<p>å¦‚æœä½ ï¼š</p>
<ul>
<li>å·²ç»ä¼š Node / TS</li>
<li>æ­£åœ¨å…³æ³¨ Agent / AI å·¥ç¨‹</li>
<li>åˆå¯¹ã€Œæ›´å¿«ã€æ›´ç®€æ´çš„ JS/TS è¿è¡Œæ—¶ã€æœ‰ç‚¹å¥½å¥‡</li>
</ul>
<p>é‚£æ¬¢è¿ä¸€èµ·æŠŠè¿™ä¸ªç³»åˆ—çœ‹ä¸‹å»ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨å®è·µä¸­å‘Šè¯‰æˆ‘ï¼š
<strong>åœ¨ä½ çš„åœºæ™¯é‡Œï¼ŒBun åˆ°åº•æ˜¯ä¸æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼Ÿ</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.reuters.com%2Fbusiness%2Fmedia-telecom%2Fanthropic-acquires-developer-tool-startup-bun-scale-ai-coding-2025-12-02%2F" target="_blank" title="https://www.reuters.com/business/media-telecom/anthropic-acquires-developer-tool-startup-bun-scale-ai-coding-2025-12-02/" ref="nofollow noopener noreferrer">Reuters</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[requestAnimationFrame ä¸ JS äº‹ä»¶å¾ªç¯ï¼šå®ä»»åŠ¡æ‰§è¡Œé¡ºåºåˆ†æ]]></title>    <link>https://juejin.cn/post/7581666412021891081</link>    <guid>https://juejin.cn/post/7581666412021891081</guid>    <pubDate>2025-12-09T14:21:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581666412021891081" data-draft-id="7531888171584897059" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="requestAnimationFrame ä¸ JS äº‹ä»¶å¾ªç¯ï¼šå®ä»»åŠ¡æ‰§è¡Œé¡ºåºåˆ†æ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-09T14:21:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            requestAnimationFrame ä¸ JS äº‹ä»¶å¾ªç¯ï¼šå®ä»»åŠ¡æ‰§è¡Œé¡ºåºåˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:21:41.000Z" title="Tue Dec 09 2025 14:21:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="arduino-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#434f54}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#00979d}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-literal{color:#d35400}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#00979d}.hljs-deletion,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#005c5f}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-comment{color:rgba(149,165,166,.8)}.hljs-meta-keyword{color:#728e00}.hljs-meta{color:#434f54}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-function{color:#728e00}.hljs-number{color:#8a7b52}</style><h2 data-id="heading-0">ä¸€ã€å…ˆç†æ¸…æ ¸å¿ƒæ¦‚å¿µ</h2>
<p>åœ¨è®²è§£æ‰§è¡Œé¡ºåºå‰ï¼Œå…ˆæ˜ç¡®å‡ ä¸ªå…³é”®æ¦‚å¿µï¼š</p>
<ol>
<li><strong>å®ä»»åŠ¡ï¼ˆMacrotaskï¼‰</strong> ï¼šå¸¸è§çš„æœ‰Â <code>setTimeout</code>ã€<code>setInterval</code>ã€I/O æ“ä½œã€script æ•´ä½“ä»£ç ã€UI æ¸²æŸ“ï¼ˆæ³¨æ„ï¼šæ¸²æŸ“æ˜¯ç‹¬ç«‹é˜¶æ®µï¼Œä¸æ˜¯å®ä»»åŠ¡ï¼Œä½†å’Œ rAF å¼ºç›¸å…³ï¼‰ã€‚</li>
<li><strong>å¾®ä»»åŠ¡ï¼ˆMicrotaskï¼‰</strong> ï¼š<code>Promise.then/catch/finally</code>ã€<code>queueMicrotask</code>ã€<code>MutationObserver</code>Â ç­‰ï¼Œä¼šåœ¨å®ä»»åŠ¡æ‰§è¡Œå®Œåã€æ¸²æŸ“ / ä¸‹ä¸€ä¸ªå®ä»»åŠ¡å‰ç«‹å³æ‰§è¡Œã€‚</li>
<li><strong>requestAnimationFrame</strong>ï¼šä¸å±äºå®ä»»åŠ¡ / å¾®ä»»åŠ¡ï¼Œæ˜¯æµè§ˆå™¨ä¸“é—¨ä¸ºåŠ¨ç”»è®¾è®¡çš„ APIï¼Œä¼šåœ¨<strong>æµè§ˆå™¨é‡ç»˜ï¼ˆæ¸²æŸ“ï¼‰ä¹‹å‰</strong>æ‰§è¡Œï¼Œæ‰§è¡Œæ—¶æœºåœ¨å¾®ä»»åŠ¡ä¹‹åã€å®ä»»åŠ¡ä¹‹å‰ï¼ˆä¸‹ä¸€è½®ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€äº‹ä»¶å¾ªç¯çš„æ‰§è¡Œæµç¨‹</h2>
<p>ä¸€ä¸ªå®Œæ•´çš„äº‹ä»¶å¾ªç¯å‘¨æœŸæ‰§è¡Œé¡ºåºï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ‰§è¡Œå½“å‰å®ä»»åŠ¡ï¼ˆå¦‚ script ä¸»ä»£ç ï¼‰
<span class="hljs-bullet">2.</span> æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆå¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºï¼‰
<span class="hljs-bullet">3.</span> æ‰§è¡Œ requestAnimationFrame å›è°ƒ
<span class="hljs-bullet">4.</span> æµè§ˆå™¨è¿›è¡Œ UI æ¸²æŸ“ï¼ˆé‡ç»˜/å›æµï¼‰
<span class="hljs-bullet">5.</span> å–å‡ºä¸‹ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œï¼Œé‡å¤ä¸Šè¿°æµç¨‹
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€ä»£ç åˆ†æ</h2>
<p><strong>ä»£ç æ‰§è¡Œä¼˜å…ˆçº§</strong>ï¼šåŒæ­¥ä»£ç  &gt; å¾®ä»»åŠ¡ &gt; rAFï¼ˆå½“å‰å¸§ï¼‰ &gt; æ™®é€šå®ä»»åŠ¡ï¼ˆsetTimeoutï¼‰ &gt; rAFï¼ˆä¸‹ä¸€å¸§ï¼‰ &gt; åç»­æ™®é€šå®ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-3">åœºæ™¯ 1ï¼šåŸºç¡€é¡ºåºï¼ˆscript + å¾®ä»»åŠ¡ + rAF + å®ä»»åŠ¡ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åŒæ­¥ä»£ç ï¼ˆå±äºç¬¬ä¸€ä¸ªå®ä»»åŠ¡ï¼šscript æ•´ä½“ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŒæ­¥ä»£ç æ‰§è¡Œ'</span>);

<span class="hljs-comment">// å¾®ä»»åŠ¡</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾®ä»»åŠ¡æ‰§è¡Œ'</span>);
});

<span class="hljs-comment">// requestAnimationFrame</span>
<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'requestAnimationFrame æ‰§è¡Œ'</span>);
});

<span class="hljs-comment">// å®ä»»åŠ¡ï¼ˆsetTimeout æ˜¯å®ä»»åŠ¡ï¼‰</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout å®ä»»åŠ¡æ‰§è¡Œ'</span>);
}, <span class="hljs-number">0</span>);

<span class="hljs-comment">// æ‰§è¡Œç»“æœé¡ºåºå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯è¿™æ ·çš„ï¼š</span>
<span class="hljs-comment">// åŒæ­¥ä»£ç æ‰§è¡Œ</span>
<span class="hljs-comment">// å¾®ä»»åŠ¡æ‰§è¡Œ</span>
<span class="hljs-comment">// requestAnimationFrame æ‰§è¡Œ</span>
<span class="hljs-comment">// setTimeout å®ä»»åŠ¡æ‰§è¡Œ</span>
</code></pre>
<p><strong>ä»£ç è§£é‡Š1</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œæ‰“å°ã€ŒåŒæ­¥ä»£ç æ‰§è¡Œã€ï¼›</li>
<li>ç¬¬äºŒæ­¥ï¼šå¾®ä»»åŠ¡é˜Ÿåˆ—æœ‰Â <code>Promise.then</code>ï¼Œæ‰§è¡Œå¹¶æ‰“å°ã€Œå¾®ä»»åŠ¡æ‰§è¡Œã€ï¼›</li>
<li>ç¬¬ä¸‰æ­¥ï¼šæµè§ˆå™¨å‡†å¤‡æ¸²æŸ“å‰ï¼Œæ‰§è¡Œ rAF å›è°ƒï¼Œæ‰“å°ã€ŒrequestAnimationFrame æ‰§è¡Œã€ï¼›</li>
<li>ç¬¬å››æ­¥ï¼šæµè§ˆå™¨å®Œæˆæ¸²æŸ“åï¼Œå–å‡ºä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆsetTimeoutï¼‰æ‰§è¡Œï¼Œæ‰“å°ã€ŒsetTimeout å®ä»»åŠ¡æ‰§è¡Œã€ã€‚</li>
</ul>
<p><strong>ä»£ç è§£é‡Š2</strong>ï¼š</p>
<ul>
<li>
<p><strong>æ­£å¸¸æµè§ˆå™¨ç¯å¢ƒï¼ˆ60Hz å±å¹•ï¼Œæ— é˜»å¡ï¼‰</strong> ï¼šè¾“å‡ºé¡ºåºæ˜¯æŒ‰ä¸Šæ–¹å†™çš„å…ˆåé¡ºåºæ‰§è¡Œçš„ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">åŒæ­¥ä»£ç æ‰§è¡Œ
å¾®ä»»åŠ¡æ‰§è¡Œ
requestAnimationFrame æ‰§è¡Œ
setTimeout å®ä»»åŠ¡æ‰§è¡Œ
</code></pre>
<p>åŸå› ï¼šæµè§ˆå™¨æ¯ 16.7ms åˆ·æ–°ä¸€æ¬¡ï¼Œ<code>requestAnimationFrame</code>Â ä¼šåœ¨<strong>ä¸‹ä¸€æ¬¡é‡ç»˜å‰</strong>æ‰§è¡Œï¼Œè€ŒÂ <code>setTimeout</code>Â å³ä½¿è®¾ä¸º 0ï¼Œä¹Ÿä¼šæœ‰ 4ms å·¦å³çš„æœ€å°å»¶è¿Ÿï¼ˆæµè§ˆå™¨é™åˆ¶ï¼‰ï¼Œæ‰€ä»¥Â <code>requestAnimationFrame</code>Â å…ˆæ‰§è¡Œã€‚</p>
</li>
<li>
<p><strong>æç«¯æƒ…å†µï¼ˆä¸»çº¿ç¨‹é˜»å¡ / æµè§ˆå™¨åˆ·æ–°å»¶è¿Ÿï¼‰</strong> ï¼šå¯èƒ½å‡ºç°é¡ºåºäº’æ¢ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">åŒæ­¥ä»£ç æ‰§è¡Œ
å¾®ä»»åŠ¡æ‰§è¡Œ
setTimeout å®ä»»åŠ¡æ‰§è¡Œ
requestAnimationFrame æ‰§è¡Œ
</code></pre>
<p><strong>åŸå› </strong>ï¼šå¦‚æœä¸»çº¿ç¨‹å¤„ç†å®Œå¾®ä»»åŠ¡åï¼Œ<code>requestAnimationFrame</code>Â çš„å›è°ƒè¿˜æ²¡åˆ°æ‰§è¡Œæ—¶æœºï¼ˆæ¯”å¦‚æµè§ˆå™¨è¿˜æ²¡åˆ°é‡ç»˜èŠ‚ç‚¹ï¼‰ï¼Œä½†Â <code>setTimeout</code>Â çš„æœ€å°å»¶è¿Ÿå·²åˆ°ï¼Œå°±ä¼šå…ˆæ‰§è¡ŒÂ <code>setTimeout</code>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">æ€»ç»“</h3>
<ol>
<li>
<p><strong>å›ºå®šé¡ºåº</strong>ï¼šåŒæ­¥ä»£ç  â†’ å¾®ä»»åŠ¡ï¼Œè¿™ä¸¤æ­¥æ˜¯ç»å¯¹å›ºå®šçš„ï¼Œä¸å—ä»»ä½•å› ç´ å½±å“ã€‚</p>
</li>
<li>
<p><strong>ä¸å›ºå®šé¡ºåº</strong>ï¼š<code>requestAnimationFrame</code>Â å’ŒÂ <code>setTimeout</code>Â çš„æ‰§è¡Œå…ˆåä¸ç»å¯¹ï¼Œå‰è€…ä¼˜å…ˆçº§æ›´é«˜ä½†ä¾èµ–æ¸²æŸ“æ—¶æœºï¼Œåè€…å—æœ€å°å»¶è¿Ÿé™åˆ¶ï¼Œå¤šæ•°åœºæ™¯ä¸‹å‰è€…å…ˆæ‰§è¡Œï¼Œä½†ä¸èƒ½å½“ä½œ â€œç»å¯¹ç»“è®ºâ€ã€‚</p>
</li>
<li>
<p>æ ¸å¿ƒåŸåˆ™ï¼š<code>requestAnimationFrame</code>Â å±äº â€œæ¸²æŸ“ç›¸å…³å›è°ƒâ€ï¼Œä¼˜å…ˆçº§é«˜äºæ™®é€šå®ä»»åŠ¡ï¼ˆå¦‚Â <code>setTimeout</code>ï¼‰ï¼Œä½†å¹¶é ECMAScript æ ‡å‡†å®šä¹‰çš„ â€œå¾®ä»»åŠ¡ / å®ä»»åŠ¡â€ èŒƒç•´ï¼Œè€Œæ˜¯æµè§ˆå™¨çš„æ‰©å±•æœºåˆ¶ï¼Œå› æ­¤æ‰§è¡Œæ—¶æœºå­˜åœ¨å¾®å°ä¸ç¡®å®šæ€§ã€‚</p>
</li>
</ol>
<h4 data-id="heading-5">åœºæ™¯ 2ï¼šåµŒå¥—åœºæ™¯ï¼ˆrAF å†…åµŒå¥—å¾®ä»»åŠ¡ / å®ä»»åŠ¡ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŒæ­¥ä»£ç '</span>);

<span class="hljs-comment">// ç¬¬ä¸€ä¸ª rAF</span>
<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'rAF 1 æ‰§è¡Œ'</span>);
  
  <span class="hljs-comment">// rAF å†…çš„å¾®ä»»åŠ¡</span>
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'rAF 1 å†…çš„å¾®ä»»åŠ¡'</span>);
  });
  
  <span class="hljs-comment">// rAF å†…çš„å®ä»»åŠ¡</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'rAF 1 å†…çš„ setTimeout'</span>);
  }, <span class="hljs-number">0</span>);
  
  <span class="hljs-comment">// rAF å†…åµŒå¥— rAF</span>
  <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'rAF 2 æ‰§è¡Œ'</span>);
  });
});

<span class="hljs-comment">// å¤–å±‚å¾®ä»»åŠ¡</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤–å±‚å¾®ä»»åŠ¡'</span>);
});

<span class="hljs-comment">// å¤–å±‚å®ä»»åŠ¡</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤–å±‚ setTimeout'</span>);
}, <span class="hljs-number">0</span>);

<span class="hljs-comment">// æ‰§è¡Œç»“æœé¡ºåºï¼š</span>
<span class="hljs-comment">// åŒæ­¥ä»£ç </span>
<span class="hljs-comment">// å¤–å±‚å¾®ä»»åŠ¡</span>
<span class="hljs-comment">// rAF 1 æ‰§è¡Œ</span>
<span class="hljs-comment">// rAF 1 å†…çš„å¾®ä»»åŠ¡</span>
<span class="hljs-comment">// å¤–å±‚ setTimeout</span>
<span class="hljs-comment">// ï¼ˆæµè§ˆå™¨ä¸‹ä¸€æ¬¡æ¸²æŸ“å‰ï¼‰</span>
<span class="hljs-comment">// rAF 2 æ‰§è¡Œ</span>
<span class="hljs-comment">// rAF 1 å†…çš„ setTimeout</span>
</code></pre>
<p><strong>ä»£ç è§£é‡Š</strong>ï¼š</p>
<ol>
<li>å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç  â†’ å¤–å±‚å¾®ä»»åŠ¡ï¼›</li>
<li>æ‰§è¡Œ rAF 1 â†’ ç«‹å³æ‰§è¡Œ rAF 1 å†…çš„å¾®ä»»åŠ¡ï¼ˆå¾®ä»»åŠ¡ä¼šåœ¨å½“å‰é˜¶æ®µæ¸…ç©ºï¼‰ï¼›</li>
<li>æµè§ˆå™¨æ¸²æŸ“åï¼Œæ‰§è¡Œä¸‹ä¸€è½®å®ä»»åŠ¡ï¼šå¤–å±‚ setTimeoutï¼›</li>
<li>ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯çš„æ¸²æŸ“é˜¶æ®µï¼Œæ‰§è¡ŒåµŒå¥—çš„ rAF 2ï¼›</li>
<li>æœ€åæ‰§è¡Œ rAF 1 å†…çš„ setTimeoutï¼ˆä¸‹ä¸‹è½®å®ä»»åŠ¡ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-6">åœºæ™¯ 3ï¼šrAF ä¸å¤šä¸ªå®ä»»åŠ¡å¯¹æ¯”</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ä»»åŠ¡1ï¼šsetTimeout 0</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout 1'</span>);
}, <span class="hljs-number">0</span>);

<span class="hljs-comment">// rAF</span>
<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'rAF æ‰§è¡Œ'</span>);
});

<span class="hljs-comment">// å®ä»»åŠ¡2ï¼šsetTimeout 0</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setTimeout 2'</span>);
}, <span class="hljs-number">0</span>);

<span class="hljs-comment">// æ‰§è¡Œç»“æœé¡ºåºï¼š</span>
<span class="hljs-comment">// rAF æ‰§è¡Œ</span>
<span class="hljs-comment">// setTimeout 1</span>
<span class="hljs-comment">// setTimeout 2</span>
</code></pre>
<p><strong>ç»“è®º</strong>ï¼šå³ä½¿å¤šä¸ªå®ä»»åŠ¡æ’åœ¨å‰é¢ï¼ŒrAF ä¾ç„¶ä¼šåœ¨ã€Œå¾®ä»»åŠ¡åã€æ¸²æŸ“å‰ã€ä¼˜å…ˆæ‰§è¡Œï¼Œç„¶åæ‰æ‰§è¡Œæ‰€æœ‰å¾…å¤„ç†çš„å®ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-7">å››ã€å®é™…åº”ç”¨</h2>
<p>rAF çš„è¿™ä¸ªæ‰§è¡Œç‰¹æ€§ï¼Œå¸¸ç”¨æ¥åšé«˜æ€§èƒ½åŠ¨ç”»ï¼ˆæ¯”å¦‚ DOM åŠ¨ç”»ï¼‰ï¼Œå› ä¸ºå®ƒèƒ½ä¿è¯åœ¨æ¸²æŸ“å‰æ‰§è¡Œï¼Œé¿å…ã€Œå¸ƒå±€æŠ–åŠ¨ã€ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ç”¨ rAF å®ç°å¹³æ»‘ç§»åŠ¨åŠ¨ç”»
const <span class="hljs-attr">box</span> = document.getElementById(<span class="hljs-string">'box'</span>)<span class="hljs-comment">;</span>
let <span class="hljs-attr">left</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>

function moveBox() {
  left += 1<span class="hljs-comment">;</span>
  <span class="hljs-attr">box.style.left</span> = `<span class="hljs-variable">${left}</span>px`<span class="hljs-comment">;</span>
  
  // åŠ¨ç”»æœªç»“æŸåˆ™ç»§ç»­è°ƒç”¨ rAF
  if (left &lt; 300) {
    requestAnimationFrame(moveBox)<span class="hljs-comment">;</span>
  }
}

// å¯åŠ¨åŠ¨ç”»
requestAnimationFrame(moveBox)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ä¸ªä»£ç çš„ä¼˜åŠ¿ï¼šrAF ä¼šå’Œæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡ï¼ˆé€šå¸¸ 60Hzï¼Œæ¯ 16.7ms ä¸€æ¬¡ï¼‰åŒæ­¥ï¼Œä¸ä¼šåƒÂ <code>setTimeout</code>Â é‚£æ ·å¯èƒ½å‡ºç°ä¸¢å¸§ï¼Œå› ä¸ºÂ <code>setTimeout</code>Â æ˜¯å®ä»»åŠ¡ï¼Œæ‰§è¡Œæ—¶æœºä¸å›ºå®šï¼Œå¯èƒ½é”™è¿‡æ¸²æŸ“æ—¶æœºã€‚</p>
<h3 data-id="heading-8">æ€»ç»“</h3>
<ol>
<li><strong>æ ¸å¿ƒæ‰§è¡Œé¡ºåº</strong>ï¼šåŒæ­¥ä»£ç  â†’ æ‰€æœ‰å¾®ä»»åŠ¡ â†’ requestAnimationFrame â†’ æµè§ˆå™¨æ¸²æŸ“ â†’ ä¸‹ä¸€è½®å®ä»»åŠ¡ï¼ˆsetTimeout/setInterval ç­‰ï¼‰ã€‚</li>
<li><strong>rAF æœ¬è´¨</strong>ï¼šä¸å±äºå® / å¾®ä»»åŠ¡ï¼Œæ˜¯æµè§ˆå™¨æ¸²æŸ“é˜¶æ®µçš„ã€Œä¸“å±å›è°ƒã€ï¼Œä¼˜å…ˆçº§é«˜äºä¸‹ä¸€è½®å®ä»»åŠ¡ã€‚</li>
<li><strong>å®æˆ˜ä»·å€¼</strong>ï¼šrAF é€‚åˆåš UI åŠ¨ç”»ï¼Œèƒ½ä¿è¯åŠ¨ç”»æµç•…ï¼›å®ä»»åŠ¡ï¼ˆsetTimeoutï¼‰é€‚åˆéæ¸²æŸ“ç›¸å…³çš„å¼‚æ­¥æ“ä½œï¼Œé¿å…é˜»å¡æ¸²æŸ“ã€‚</li>
</ol>
<h2 data-id="heading-9">ç›¸æ¯”ä¼ ç»Ÿçš„è®¡æ—¶å™¨é˜²æŠ–ä¸èŠ‚æµ</h2>
<h3 data-id="heading-10">å®æˆ˜ä»£ç ï¼šrAF å®ç°èŠ‚æµï¼ˆæœ€å¸¸ç”¨ï¼‰</h3>
<p>rAF åšèŠ‚æµçš„æ ¸å¿ƒä¼˜åŠ¿ï¼šå’Œæµè§ˆå™¨æ¸²æŸ“åŒæ­¥ï¼Œä¸ä¼šå‡ºç°ã€Œæ‰§è¡Œæ¬¡æ•°è¶…è¿‡æ¸²æŸ“å¸§ã€çš„æ— æ•ˆæ‰§è¡Œï¼Œå°¤å…¶é€‚åˆÂ <code>resize</code>ã€<code>scroll</code>ã€<code>mousemove</code>Â è¿™ç±»å’Œ UI ç›¸å…³çš„é«˜é¢‘äº‹ä»¶ã€‚</p>
<h4 data-id="heading-11">åŸºç¡€ç‰ˆ rAF èŠ‚æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">rafThrottle</span>(<span class="hljs-params">callback</span>) {
  <span class="hljs-keyword">let</span> isPending = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å·²æœ‰å¾…æ‰§è¡Œçš„å›è°ƒ</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">if</span> (isPending) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å·²æœ‰å¾…æ‰§è¡Œä»»åŠ¡ï¼Œç›´æ¥è¿”å›</span>
    
    isPending = <span class="hljs-literal">true</span>;
    <span class="hljs-comment">// ç»‘å®š this æŒ‡å‘ï¼Œä¼ é€’å‚æ•°</span>
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
    <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
      callback.<span class="hljs-title function_">apply</span>(context, args); <span class="hljs-comment">// æ‰§è¡Œå›è°ƒ</span>
      isPending = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ‰§è¡Œå®Œæˆåé‡ç½®æ ‡è®°</span>
    });
  };
}

<span class="hljs-comment">// æµ‹è¯•ï¼šç›‘å¬æ»šåŠ¨äº‹ä»¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-title function_">rafThrottle</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ»šåŠ¨èŠ‚æµæ‰§è¡Œ'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>);
}));
</code></pre>
<p><strong>ä»£ç è§£é‡Š</strong>ï¼š</p>
<ol>
<li><code>isPending</code>Â æ ‡è®°æ˜¯å¦æœ‰ rAF å›è°ƒå¾…æ‰§è¡Œï¼Œé¿å…åŒä¸€å¸§å†…å¤šæ¬¡è§¦å‘ï¼›</li>
<li>æ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œè‹¥æ²¡æœ‰å¾…æ‰§è¡Œä»»åŠ¡ï¼Œå°±é€šè¿‡ rAF æ³¨å†Œå›è°ƒï¼›</li>
<li>rAF ä¼šåœ¨<strong>ä¸‹ä¸€æ¬¡æ¸²æŸ“å‰æ‰§è¡Œå›è°ƒ</strong>ï¼Œæ‰§è¡Œå®Œåé‡ç½®æ ‡è®°ï¼Œç¡®ä¿æ¯å¸§åªæ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ol>
<h4 data-id="heading-12">å¯¹æ¯”ä¼ ç»Ÿ setTimeout èŠ‚æµ</h4>
<pre><code class="hljs language-ini" lang="ini">// ä¼ ç»Ÿ setTimeout èŠ‚æµï¼ˆå¯¹æ¯”ç”¨ï¼‰
function timeoutThrottle(callback, <span class="hljs-attr">delay</span> = <span class="hljs-number">16.7</span>) {
  let <span class="hljs-attr">timer</span> = null<span class="hljs-comment">;</span>
  return function(...args) {
    if (timer) return<span class="hljs-comment">;</span>
    <span class="hljs-attr">timer</span> = setTimeout(() =&gt; {
      callback.apply(this, args)<span class="hljs-comment">;</span>
      <span class="hljs-attr">timer</span> = null<span class="hljs-comment">;</span>
    }, delay)<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
}
</code></pre>
<p>rAF èŠ‚æµçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æ‰§è¡Œæ—¶æœºå’Œæµè§ˆå™¨æ¸²æŸ“å¸§å®Œå…¨åŒæ­¥ï¼Œä¸ä¼šå‡ºç°ã€Œå›è°ƒæ‰§è¡Œäº†ä½†æ¸²æŸ“æ²¡è·Ÿä¸Šã€çš„æ— æ•ˆæ“ä½œ</strong>ï¼›</li>
<li><strong>æ— éœ€æ‰‹åŠ¨è®¾ç½®å»¶è¿Ÿï¼ˆå¦‚ 16.7msï¼‰ï¼Œè‡ªåŠ¨é€‚é…æµè§ˆå™¨åˆ·æ–°ç‡ï¼ˆ60Hz/144Hz éƒ½èƒ½å…¼å®¹ï¼‰</strong>ã€‚</li>
</ul>
<h3 data-id="heading-13">å®æˆ˜ä»£ç ï¼šrAF å®ç°é˜²æŠ–</h3>
<p>rAF å®ç°é˜²æŠ–éœ€è¦ç»“åˆã€Œå»¶è¿Ÿ + å–æ¶ˆ rAFã€çš„é€»è¾‘ï¼Œæ ¸å¿ƒæ˜¯ã€Œè§¦å‘äº‹ä»¶åï¼Œåªä¿ç•™æœ€åä¸€æ¬¡ rAF å›è°ƒã€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">rafDebounce</span>(<span class="hljs-params">callback</span>) {
  <span class="hljs-keyword">let</span> rafId = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä¿å­˜ rAF çš„ IDï¼Œç”¨äºå–æ¶ˆ</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
    <span class="hljs-comment">// è‹¥å·²æœ‰å¾…æ‰§è¡Œçš„ rAFï¼Œå…ˆå–æ¶ˆ</span>
    <span class="hljs-keyword">if</span> (rafId) {
      <span class="hljs-title function_">cancelAnimationFrame</span>(rafId);
    }
    <span class="hljs-comment">// é‡æ–°æ³¨å†Œ rAFï¼Œå»¶è¿Ÿåˆ°ä¸‹ä¸€å¸§æ‰§è¡Œ</span>
    rafId = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
      callback.<span class="hljs-title function_">apply</span>(context, args);
      rafId = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ‰§è¡Œåæ¸…ç©º ID</span>
    });
  };
}

<span class="hljs-comment">// æµ‹è¯•ï¼šç›‘å¬è¾“å…¥æ¡†è¾“å…¥</span>
<span class="hljs-keyword">const</span> input = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'input'</span>);
input.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-title function_">rafDebounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¾“å…¥é˜²æŠ–æ‰§è¡Œ'</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
}));
</code></pre>
<p><strong>ä»£ç è§£é‡Š</strong>ï¼š</p>
<ol>
<li>æ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œå…ˆé€šè¿‡Â <code>cancelAnimationFrame</code>Â å–æ¶ˆä¸Šä¸€æ¬¡æœªæ‰§è¡Œçš„ rAF å›è°ƒï¼›</li>
<li>é‡æ–°æ³¨å†Œæ–°çš„ rAF å›è°ƒï¼Œç¡®ä¿åªæœ‰ã€Œæœ€åä¸€æ¬¡è§¦å‘ã€çš„å›è°ƒä¼šæ‰§è¡Œï¼›</li>
<li>é˜²æŠ–çš„å»¶è¿Ÿæœ¬è´¨æ˜¯ã€Œä¸€å¸§çš„æ—¶é—´ï¼ˆ16.7msï¼‰ã€ï¼Œè‹¥éœ€è¦æ›´é•¿å»¶è¿Ÿï¼Œå¯ç»“åˆÂ <code>setTimeout</code>ã€‚</li>
</ol>
<h4 data-id="heading-14">å¸¦è‡ªå®šä¹‰å»¶è¿Ÿçš„ rAF é˜²æŠ–</h4>
<pre><code class="hljs language-ini" lang="ini">function rafDebounceWithDelay(callback, <span class="hljs-attr">delay</span> = <span class="hljs-number">300</span>) {
  let <span class="hljs-attr">rafId</span> = null<span class="hljs-comment">;</span>
  let <span class="hljs-attr">timer</span> = null<span class="hljs-comment">;</span>
  return function(...args) {
    const <span class="hljs-attr">context</span> = this<span class="hljs-comment">;</span>
    // å–æ¶ˆä¹‹å‰çš„å®šæ—¶å™¨å’Œ rAF
    if (timer) clearTimeout(timer)<span class="hljs-comment">;</span>
    if (rafId) cancelAnimationFrame(rafId)<span class="hljs-comment">;</span>
    
    // å…ˆå»¶è¿Ÿï¼Œå†ç”¨ rAF æ‰§è¡Œï¼ˆä¿è¯æ¸²æŸ“å‰æ‰§è¡Œï¼‰
    <span class="hljs-attr">timer</span> = setTimeout(() =&gt; {
      <span class="hljs-attr">rafId</span> = requestAnimationFrame(() =&gt; {
        callback.apply(context, args)<span class="hljs-comment">;</span>
        <span class="hljs-attr">rafId</span> = null<span class="hljs-comment">;</span>
        <span class="hljs-attr">timer</span> = null<span class="hljs-comment">;</span>
      })<span class="hljs-comment">;</span>
    }, delay)<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-15">å››ã€é€‚ç”¨åœºæ™¯ vs ä¸é€‚ç”¨åœºæ™¯</h3>



































<table><thead><tr><th>åœºæ™¯</th><th>æ˜¯å¦é€‚åˆç”¨ rAF åšé˜²æŠ– / èŠ‚æµ</th><th>åŸå› </th></tr></thead><tbody><tr><td>scroll/resize äº‹ä»¶</td><td>âœ… éå¸¸é€‚åˆ</td><td>å’Œ UI æ¸²æŸ“å¼ºç›¸å…³ï¼ŒrAF ä¿è¯æ¯å¸§åªæ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>mousemove/mouseover äº‹ä»¶</td><td>âœ… é€‚åˆ</td><td>é«˜é¢‘è§¦å‘ï¼ŒrAF å‡å°‘æ— æ•ˆæ‰§è¡Œï¼Œæå‡æ€§èƒ½</td></tr><tr><td>è¾“å…¥æ¡† input/change äº‹ä»¶</td><td>âœ… é€‚åˆï¼ˆé˜²æŠ–ï¼‰</td><td>ä¿è¯è¾“å…¥å®Œæˆåï¼Œåœ¨æ¸²æŸ“å‰æ‰§è¡Œå›è°ƒï¼ˆå¦‚æœç´¢è”æƒ³ï¼‰</td></tr><tr><td>ç½‘ç»œè¯·æ±‚ï¼ˆå¦‚æŒ‰é’®ç‚¹å‡»æäº¤ï¼‰</td><td>âŒ ä¸é€‚åˆ</td><td>ç½‘ç»œè¯·æ±‚å’Œ UI æ¸²æŸ“æ— å…³ï¼Œç”¨ä¼ ç»Ÿ setTimeout é˜²æŠ–æ›´åˆé€‚</td></tr><tr><td>åç«¯æ•°æ®å¤„ç†ï¼ˆæ—  UI äº¤äº’ï¼‰</td><td>âŒ ä¸é€‚åˆ</td><td>rAF æ˜¯æµè§ˆå™¨ APIï¼ŒNode.js ç¯å¢ƒä¸æ”¯æŒï¼Œä¸”æ— æ¸²æŸ“éœ€æ±‚</td></tr></tbody></table>
<h3 data-id="heading-16">æ€»ç»“</h3>
<ol>
<li><strong>rAF é€‚åˆåšé˜²æŠ– / èŠ‚æµ</strong>ï¼Œå°¤å…¶åœ¨ã€Œå’Œ UI äº¤äº’ç›¸å…³çš„é«˜é¢‘äº‹ä»¶ã€ï¼ˆscroll/resize/mousemoveï¼‰åœºæ™¯ä¸‹ï¼Œæ€§èƒ½ä¼˜äºä¼ ç»Ÿ setTimeoutï¼›</li>
<li><strong>rAF èŠ‚æµ</strong>ï¼šæ ¸å¿ƒæ˜¯ã€Œæ¯å¸§åªæ‰§è¡Œä¸€æ¬¡ã€ï¼Œåˆ©ç”¨Â <code>isPending</code>Â æ ‡è®°é¿å…é‡å¤æ‰§è¡Œï¼›</li>
<li><strong>rAF é˜²æŠ–</strong>ï¼šæ ¸å¿ƒæ˜¯ã€Œå–æ¶ˆä¸Šä¸€æ¬¡ rAFï¼Œä¿ç•™æœ€åä¸€æ¬¡ã€ï¼Œå¯ç»“åˆ setTimeout å®ç°è‡ªå®šä¹‰å»¶è¿Ÿï¼›</li>
<li>é UI ç›¸å…³çš„é˜²æŠ– / èŠ‚æµï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œä¼˜å…ˆç”¨ä¼ ç»Ÿ setTimeoutï¼Œé¿å…ä¾èµ–æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€å‘ææ•ˆåˆ©å™¨ - ç”¨å¥½Snippets]]></title>    <link>https://juejin.cn/post/7581698074361610249</link>    <guid>https://juejin.cn/post/7581698074361610249</guid>    <pubDate>2025-12-09T14:23:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698074361610249" data-draft-id="7581691182003535882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€å‘ææ•ˆåˆ©å™¨ - ç”¨å¥½Snippets"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Visual Studio Code"/> <meta itemprop="datePublished" content="2025-12-09T14:23:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å¯’"/> <meta itemprop="url" content="https://juejin.cn/user/694547078987287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€å‘ææ•ˆåˆ©å™¨ - ç”¨å¥½Snippets
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547078987287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:23:50.000Z" title="Tue Dec 09 2025 14:23:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p><code>snippets</code> æ„æ€æ˜¯<strong>ç‰‡æ®µ</strong>ï¼Œåœ¨ <code>vscode</code> ä¸­å¯ä»¥é€šè¿‡ <code>Snippetsï¼šConfigure Snippets</code> å‘½ä»¤ï¼Œå¯ä»¥å®šä¹‰<code>å…¨å±€çº§ï¼ˆglobalï¼‰ã€é¡¹ç›®çº§ï¼ˆProjectï¼‰ã€è¯­è¨€çº§ï¼ˆLanguageï¼‰</code>ä»£ç ç‰‡æ®µï¼Œå¯ä»¥æŒ‰ç…§è‡ªå®šä¹‰çš„è§„åˆ™æ¥å¿«é€Ÿç”Ÿæˆä¸€æ®µä»£ç ï¼Œè¿›è€Œå¤§å¹…æå‡æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œå¯è°“æ˜¯å·¥ä½œææ•ˆåˆ©å™¨ã€‚</p>
<h2 data-id="heading-1">1ã€å¦‚ä½•åˆ›å»º snippetsï¼Ÿ</h2>
<ol>
<li>ç¬¬ä¸€æ­¥ï¼Œåœ¨ vscode æŒ‰ <code>ctrl/command + shift + p</code>ï¼Œè¾“å…¥ snippetsï¼Œé€‰æ‹© <code>Snippetsï¼šConfigure Snippets</code>ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c45813bd7b5e4894bc36283a689f765e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5a-S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895030&amp;x-signature=Qo%2FIsfeXkkAFrp64W3r0DjmhY64%3D" alt="" loading="lazy"/></p>
<p>å¯æ ¹æ®éœ€è¦é€‰æ‹© snippets çš„åˆ›å»ºç±»å‹ï¼Œä¸€èˆ¬é€‰æ‹© global å…¨å±€çº§åˆ«çš„ snippets å³å¯ã€‚</p>
<ol start="2">
<li>ç¬¬äºŒæ­¥ï¼Œé€‰æ‹© <code>New Global Snippets file</code>ï¼Œè¾“å…¥æ–‡ä»¶åï¼ŒæŒ‰ <code>enter</code> é”®ï¼Œå³è¿›å…¥ <code>snippets</code> é…ç½®æ–‡ä»¶è®¾ç½®ã€‚</li>
</ol>
<p>snippets æ–‡ä»¶ä»¥ JSON ç¼–å†™ï¼Œé‡Œé¢æ”¯æŒä¹¦å†™æ³¨é‡Šï¼Œå¹¶å¯å®šä¹‰æ— é™æ•°é‡çš„ snippetsã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"snippet"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
	<span class="hljs-attr">"scope"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"javascript,typescript"</span><span class="hljs-punctuation">,</span>
	<span class="hljs-attr">"prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"snippet"</span><span class="hljs-punctuation">,</span>
	<span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
		<span class="hljs-string">"console.log('$1');"</span><span class="hljs-punctuation">,</span>
	<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
	<span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"a simple snippet"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>prefix</strong>ï¼šå¿…å¡«ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªè§¦å‘è¯ï¼Œç”±äºå­å­—ç¬¦ä¸²åŒ¹é…ä¸æ˜¯ä¸¥æ ¼åŒ¹é…çš„ï¼Œç±»ä¼¼æ­£åˆ™åŒ¹é…ï¼Œæ¯”å¦‚è¾“å…¥ <code>ts</code> å¯ä»¥åŒ¹é…åˆ° <code>test</code>ã€‚</li>
<li><strong>body</strong>ï¼šå¿…å¡«ï¼Œè¡¨ç¤ºæ­£æ–‡ï¼Œæ˜¯ä¸€è¡Œæˆ–å¤šè¡Œå†…å®¹ï¼Œæ’å…¥æ—¶ä¼šåˆå¹¶ä¸ºå¤šè¡Œã€‚æ¢è¡Œå’ŒåµŒå…¥çš„æ ‡ç­¾é¡µå°†æ ¹æ®æ’å…¥æ‘˜è¦çš„ä¸Šä¸‹æ–‡è¿›è¡Œæ ¼å¼åŒ–ã€‚</li>
<li><strong>description</strong>ï¼šå¯é€‰ï¼Œè¡¨ç¤ºç‰‡æ®µçš„æè¿°ã€‚</li>
<li><strong>scope</strong>ï¼šå¯é€‰ï¼Œè¡¨ç¤ºæ”¯æŒçš„è¯­è¨€ï¼Œé»˜è®¤æ”¯æŒæ‰€æœ‰ã€‚</li>
</ul>
<h2 data-id="heading-2">2ã€snippets æ”¯æŒè¯­æ³•</h2>
<h3 data-id="heading-3">2.1 å…‰æ ‡æ§åˆ¶</h3>
<ul>
<li>åœ¨ body æ­£æ–‡ï¼Œå®ƒé‡Œé¢å¯ä»¥ä½¿ç”¨å ä½ç¬¦ï¼š<code>$0ã€$1ã€$2...</code>ï¼Œä»£è¡¨å…‰æ ‡ä½ç½®ï¼Œ<code>$0</code> ä»£è¡¨å…‰æ ‡æœ€ååœç•™çš„ä½ç½®ï¼Œ<code>$1</code> ä»£è¡¨å…‰æ ‡ç¬¬ä¸€ä¸ªåœç•™çš„ä½ç½®ï¼Œ<code>$2</code> ä»£è¡¨å…‰æ ‡ç¬¬äºŒä¸ªåœç•™çš„ä½ç½®ï¼Œä»¥æ­¤ç±»æ¨ï¼Œåœ¨ä½¿ç”¨ <code>prefix</code> è§¦å‘è¯è§¦å‘è¯ç”Ÿæˆä»£ç ç‰‡æ®µåï¼Œå¯ä½¿ç”¨ <code>Tab</code> é”®è·³è½¬åˆ°å…‰æ ‡ä½ç½®ã€‚</li>
<li>åŒåå…‰æ ‡å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨å¤šä¸ª <code>$1</code>ï¼Œå°±å¯ä»¥å®ç°<strong>å¤šå…‰æ ‡åŒæ—¶ç¼–è¾‘</strong>ã€‚</li>
<li>å…‰æ ‡ä¹Ÿå¯ä»¥åŠ ä¸Šé»˜è®¤å€¼ï¼Œæ¯”å¦‚ <code>${1ï¼šelement}</code>ï¼Œé»˜è®¤å€¼ä¸º <code>element</code>ï¼Œå¦‚æœè§¦å‘è¯è§¦å‘åï¼Œä¸è¾“å…¥ä»»ä½•å†…å®¹ï¼Œåˆ™å…‰æ ‡ä½ç½®é»˜è®¤ä¸º <code>element</code>ã€‚</li>
<li>å…‰æ ‡ä¹Ÿå¯ä»¥æä¾›å¤šä¸ªå€¼æ¥é€‰æ‹©ï¼Œæ¯”å¦‚ <code>${1|element1,element2,element3|}</code>ï¼Œå½“æŒ‰ <code>Tab</code> é”®ç§»åŠ¨åˆ°å¯¹åº”å…‰æ ‡æ—¶ï¼Œä¼šå‡ºç°ä¸‹æ‹‰æ¡†å¯ä¾›é€‰æ‹©ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfee01939b7b43a79f3423ce199291c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5a-S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895030&amp;x-signature=R7Qdjzbk7YyVRRQheP8yfSKZ%2Bi8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">2.2 Variables å˜é‡</h3>
<p>åœ¨ body æ­£æ–‡å¯ä»¥ä½¿ç”¨å˜é‡ï¼Œè¯­æ³•æ˜¯ <code>$name</code> æˆ– <code>${nameï¼šdefault}</code>ã€‚å…¶ä¸­ <code>default</code> è¡¨ç¤ºé»˜è®¤å€¼ï¼ˆå ä½ç¬¦ï¼‰ï¼Œå½“å˜é‡æœªçŸ¥ï¼ˆå³å…¶åç§°æœªå®šä¹‰ï¼‰æ—¶ï¼Œä¼šé‡‡ç”¨è¿™ä¸ªé»˜è®¤å€¼ã€‚</p>
<p>vscode ä¸­å†…ç½®ä¸€äº›å˜é‡ï¼š</p>
<ul>
<li><code>${TM_FILENAME}</code>ï¼šå½“å‰æ–‡ä»¶åã€‚</li>
<li><code>${TM_FILENAME_BASE}</code>ï¼šå½“å‰æ–‡ä»¶åï¼ˆä¸å¸¦æ‰©å±•åï¼‰ã€‚</li>
<li><code>${TM_DIRECTORY}</code>ï¼šå½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•ã€‚</li>
<li><code>${TM_FILEPATH}</code>ï¼šå½“å‰æ–‡ä»¶è·¯å¾„ã€‚</li>
<li><code>${RELATIVE_FILEPATH}</code>ï¼šå½“å‰æ–‡æ¡£çš„ç›¸å¯¹ï¼ˆç›¸å¯¹äºå·²æ‰“å¼€çš„å·¥ä½œåŒºæˆ–æ–‡ä»¶å¤¹ï¼‰æ–‡ä»¶è·¯å¾„ã€‚</li>
<li><code>${RELATIVE_FILEPATH}</code>ï¼šå½“å‰æ–‡æ¡£çš„ç›¸å¯¹ï¼ˆç›¸å¯¹äºå·²æ‰“å¼€çš„å·¥ä½œåŒºæˆ–æ–‡ä»¶å¤¹ï¼‰æ–‡ä»¶è·¯å¾„ã€‚</li>
<li><code>${CLIPBOARD}</code>ï¼šå‰ªåˆ‡æ¿çš„å†…å®¹ã€‚</li>
<li><code>${TM_SELECTED_TEXT}</code>ï¼šå½“å‰é€‰æ‹©çš„æ–‡æœ¬æˆ–ç©ºå­—ç¬¦ä¸²ã€‚</li>
<li><code>${CURRENT_SECONDS_UNIX}</code>ï¼š10ä½ unix æ—¶é—´æˆ³ã€‚</li>
<li>...ç­‰ç­‰ã€‚</li>
</ul>
<p>æ›´å¤šå˜é‡å¯æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.visualstudio.com%2Fdocs%2Fediting%2Fuserdefinedsnippets%23_variables" target="_blank" title="https://code.visualstudio.com/docs/editing/userdefinedsnippets#_variables" ref="nofollow noopener noreferrer">vscode snippets å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-5">2.3 Transform å˜æ¢</h3>
<p>è¿˜æ”¯æŒå¯¹å˜é‡åšæ­£åˆ™æ›¿æ¢ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå˜é‡ <code>${TM_FILENAME}</code> æ˜¯è¡¨ç¤ºå½“å‰æ–‡ä»¶åï¼Œæ¯”å¦‚å½“å‰æ–‡ä»¶åä¸º <code>test.js</code>ï¼Œä½¿ç”¨ <code>"${TM_FILENAME/[\\.]/_/}"</code>ï¼Œè¡¨ç¤ºå°†æ–‡ä»¶åä¸­çš„ <code>.</code> æ›¿æ¢ä¸º <code>_</code>ï¼Œä¼šæŠŠ <code>test.js</code> å˜æˆ <code>test_js</code>ã€‚</p>
<p>è¿™ä¸ªè¯­æ³•æ€ä¹ˆç†è§£å‘¢ï¼Ÿ</p>
<p>æ‹¿ js å¯¹æ¯”æ¥è¯´ï¼Œæ¯”å¦‚å½“å‰å­—ç¬¦ä¸² s ä¸º <code>test.js</code>ï¼Œä½¿ç”¨æ­£åˆ™æ›¿æ¢ <code>s.replace(/(.+)\.js/i, '$1df')</code>ï¼Œå…¶è¾“å‡ºç»“æœä¸º <code>testdf</code>ï¼Œè€Œåœ¨ vscode ä¸­ï¼Œå¦‚æœå½“å‰æ–‡ä»¶åä¸º <code>test.js</code>ï¼Œä½¿ç”¨ <code>${TM_FILENAME/(.+)\\.js/$1df/i}</code>ï¼Œä¹Ÿèƒ½å¾—åˆ°åŒæ ·çš„ç»“æœã€‚</p>
<p><strong>å…·ä½“è§„åˆ™å·®å¼‚æ€»ç»“å¦‚ä¸‹</strong>ï¼š</p>
<ul>
<li>ä¹Ÿå°±æ˜¯ä¸ç”¨é€—å·åˆ†å¼€ï¼Œè€Œæ”¹ä¸º <code>/</code>ã€‚</li>
<li>åœ¨ä»¥å‰ <code>\.js</code> çš„æ­£åˆ™è¯­æ³•ä¸­ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ª <code>\</code> è¡¨ç¤ºå†å¤šè½¬ä¹‰ä¸€æ¬¡ï¼Œè¦ä¸ç„¶ä¼šæŠ¥é”™ã€‚</li>
</ul>
<h2 data-id="heading-6">3ã€å¤šäººé¡¹ç›®åä½œæ—¶å¦‚ä½•å®ç° snippets å…±äº«ï¼Ÿ</h2>
<p>ä¹‹å‰è¯´è¿‡ï¼Œsnippets å¯ä»¥å®šä¹‰åœ¨<strong>å…¨å±€çº§ã€é¡¹ç›®çº§ã€è¯­è¨€çº§</strong>ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå¤šäººåä½œæ—¶ï¼Œå¯ä»¥æŠŠ snippets å®šä¹‰åœ¨é¡¹ç›®çº§ï¼Œè¿™æ · vscode åœ¨æ ¹ç›®å½•ç”Ÿæˆé…ç½®é…ç½®ï¼Œç›®å½•å¦‚ä¸‹ï¼š <code>æ ¹ç›®å½•/.vscode/[snippetå].code-snippets</code>ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶æäº¤åˆ° <code>git</code> ä»“åº“ä¸­ï¼Œè¿™æ ·é¡¹ç›®æˆå‘˜éƒ½å¯ä»¥å…±äº«è¯¥ <code>snippets</code> äº†ã€‚</p>
<h2 data-id="heading-7">4ã€å¦‚ä½•åœ¨ markdown æ–‡ä»¶ä¸­ä½¿ç”¨ vscode snippets?</h2>
<p>é»˜è®¤åœ¨ <code>vscode</code> ä¸­ï¼Œåœ¨<code>markdown</code> æ–‡ä»¶ç¼–å†™å†…å®¹æ˜¯é»˜è®¤ä¸æ”¯æŒ snippets çš„ï¼Œæ¯”å¦‚æˆ‘å¹³æ—¶å†™ä¸€äº› <code>markdown</code> è¡¨æ ¼æ—¶ï¼Œä¼šé…ç½®ä¸€ä¸ª <code>markdown</code> è¡¨æ ¼çš„ <code>snippets</code>ï¼Œä½†å‘ç°åœ¨ <code>markdown</code> æ–‡ä»¶ä¸­è¾“å…¥è§¦å‘è¯ <code>prefix</code> æ ¹æœ¬æ— æ³•ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
	<span class="hljs-attr">"md-table"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
		<span class="hljs-attr">"prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"md-table"</span><span class="hljs-punctuation">,</span>
		<span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
			<span class="hljs-string">"| åˆ—1æ ‡é¢˜ | åˆ—2æ ‡é¢˜ | åˆ—3æ ‡é¢˜ |"</span><span class="hljs-punctuation">,</span>
			<span class="hljs-string">"|---------|---------|---------|"</span><span class="hljs-punctuation">,</span>
			<span class="hljs-string">"| å†…å®¹A   | å†…å®¹B   | å†…å®¹C   |"</span><span class="hljs-punctuation">,</span>
			<span class="hljs-string">"| å†…å®¹D   | å†…å®¹E   | å†…å®¹F   |"</span>
		<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
		<span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"markdown è¡¨æ ¼"</span>
	<span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åé¢å‘ç°å¯ä»¥æ‰‹åŠ¨æ’å…¥ snippetsã€‚åœ¨ vscode æŒ‰ <code>ctrl/command + shift + p</code>ï¼Œè¾“å…¥ snippetsï¼Œé€‰æ‹© <code>Snippetsï¼šInsert Snippet</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰ä¹‹å‰é…ç½®å¥½å¯¹çš„ <code>snippets</code> äº†ï¼Œé€‰æ‹©å¯¹åº”çš„ <code>snippet</code> æ’å…¥å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad056f39a5e543b0b3666bc72a6634fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5a-S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895030&amp;x-signature=dfiKOIHUCsRPq6fW5PBcp0Z2tNQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">å°ç»“</h2>
<ul>
<li>vscode æ”¯æŒ<code>å…¨å±€çº§ï¼ˆglobalï¼‰ã€é¡¹ç›®çº§ï¼ˆProjectï¼‰ã€è¯­è¨€çº§ï¼ˆLanguageï¼‰</code>ä»£ç ç‰‡æ®µï¼Œä¸€èˆ¬ä¸ªäººä½¿ç”¨çš„è¯ä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥å®šä¹‰<code>å…¨å±€çº§</code>å³å¯ï¼Œéœ€è¦è¿›è¡Œå¤šäººååŠ©æ—¶ï¼Œå¯ä½¿ç”¨<code>é¡¹ç›®çº§</code> snippetsï¼Œå°†ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ä¸Šä¼ åˆ° <code>git</code> ä»“åº“å³å¯ã€‚</li>
<li>snippets æ”¯æŒè¯­æ³•ï¼š<strong>å…‰æ ‡æ§åˆ¶ã€Variables å˜é‡ã€Transform å˜æ¢</strong>ç­‰è¯­æ³•ï¼Œå¯æŒ‰éœ€ä½¿ç”¨ã€‚</li>
<li>markdown ä¸­é»˜è®¤ä¸æ”¯æŒ snippetsï¼Œä½†å¯ä»¥é€šè¿‡æ‰‹åŠ¨æ’å…¥ snippets æ¥ä½¿ç”¨ã€‚</li>
</ul>
<p>æœ€åä¸ºäº†æ–¹ä¾¿ï¼Œsnippets é…ç½®æ–‡ä»¶çš„ç¼–å†™å¯ä»¥ä½¿ç”¨è¿™ä¸ªå·¥å…·ç½‘ç«™è¿›è¡Œç”Ÿæˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsnippet-generator.app%2F%3Fdescription%3D%26tabtrigger%3D%26snippet%3D%26mode%3Dvscode" target="_blank" title="https://snippet-generator.app/?description=&amp;tabtrigger=&amp;snippet=&amp;mode=vscode" ref="nofollow noopener noreferrer">snippet-generator</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f57013cd7a5845ebaa7061e265696d52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5a-S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895030&amp;x-signature=clLBVG8S7xpt%2F243wzD9G5PtyTk%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸æ•¢æŠŠä¸ªäººä¿¡æ¯å–‚ç»™ AIï¼ŸOneAIFW ç®€å•æå®šéšç§ä¿æŠ¤ï¼]]></title>    <link>https://juejin.cn/post/7581693431740022847</link>    <guid>https://juejin.cn/post/7581693431740022847</guid>    <pubDate>2025-12-09T14:24:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581693431740022847" data-draft-id="7581689310643535914" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸æ•¢æŠŠä¸ªäººä¿¡æ¯å–‚ç»™ AIï¼ŸOneAIFW ç®€å•æå®šéšç§ä¿æŠ¤ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-09T14:24:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸æ•¢æŠŠä¸ªäººä¿¡æ¯å–‚ç»™ AIï¼ŸOneAIFW ç®€å•æå®šéšç§ä¿æŠ¤ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:24:36.000Z" title="Tue Dec 09 2025 14:24:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ï¼Œåœ¨åšå‡ ä¸ªè½åœ°çš„ AI é¡¹ç›®ï¼Œå‘ç°â€œ<strong>éšç§</strong>â€æ˜¯æ— æ³•ç»•å¼€çš„ä¸€ä¸ªå…³é”®æŒ‘æˆ˜ã€‚</p>
<p>ä¸æ˜¯ç®€å•çš„è¾¾åˆ°â€œåˆè§„â€ï¼Œè€Œæ˜¯çœŸæ­£çš„é¿å…å®¢æˆ·çš„æ‰‹æœºå·ã€å§“åç­‰ä¸ªäººä¿¡æ¯ä¸Šä¼ åˆ°äº‘ç«¯å¤§æ¨¡å‹ã€‚</p>
<blockquote>
<p>æœ¬æ–‡æš‚ä¸è®¨è®ºç§æœ‰éƒ¨ç½²å¤§æ¨¡å‹å’Œç«¯ä¾§æ¨¡å‹â€”â€”å®ƒä»¬è™½ç†æƒ³ï¼Œä½†å¹¶éæ‰€æœ‰åœºæ™¯éƒ½é€‚ç”¨ã€‚</p>
</blockquote>
<p>æˆ‘ä¹Ÿäº†è§£äº†æŒºå¤šæ–¹æ¡ˆï¼Œä½†æ˜¯æ„Ÿè§‰éƒ½ä¸é‚£ä¹ˆè‡ªç„¶æˆ–è€…ç®€å•ï¼Œç›´åˆ°æˆ‘çœ‹åˆ° <code>OneAIFW</code> ï¼ˆä¸€ä¸ªAIé˜²ç«å¢™ï¼Ÿï¼‰ã€‚</p>
<h2 data-id="heading-0">OneAIFW</h2>
<p>è¿åå­—éƒ½æ˜¯é‚£ä¹ˆçš„æœ´å®æ— åã€‚</p>
<p><code>OneAIFW</code> å¼€æºåœ¨ <code>GitHub</code> ä¸Šï¼Œé‡‡ç”¨ <code>MIT</code> åè®®ã€‚</p>
<p>è™½ç„¶ç›®å‰ <code>star</code> è¿˜ä¸å¤šï¼Œä½†æˆ‘æ„Ÿè§‰å‰é€”å¯æœŸã€‚</p>
<p>å®ƒçš„åŸç†ç®€å•æ¦‚æ‹¬å°±æ˜¯ï¼š</p>
<ol>
<li><strong>è„±æ•</strong>ï¼šå°†å‘ç»™å¤§æ¨¡å‹çš„æ–‡å­—ä¸­çš„éšç§æ•°æ®æ›¿æ¢ä¸ºä¸ºç»“æ„åŒ–å ä½ç¬¦ã€‚</li>
<li>å¤§æ¨¡å‹æ¥æ”¶çš„æ•°æ®ä¾ç„¶ä¿ç•™åŸæœ‰ç»“æ„ï¼Œä¸å½±å“è¯­ä¹‰ç†è§£ã€‚</li>
<li><strong>è¿˜åŸ</strong>ï¼šå°†å¤§æ¨¡å‹è¿”å›çš„æ–‡å­—ä¸­çš„ä¸ºç»“æ„åŒ–å ä½ç¬¦æ›¿æ¢ä¸ºåŸå§‹æ–‡å­—ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50875c0df15b4c728b911a0e5fc628d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895075&amp;x-signature=c%2FflggbAYMLHxS4qfz0fsZhPVlI%3D" alt="" loading="lazy"/></p>
<p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œäº†è§£åŸç†åæˆ‘åªæœ‰ä¸€ä¸ªæ„Ÿè§‰ï¼š<strong>è¿™ä¹ˆç®€å•çš„æ€è·¯ï¼Œæˆ‘ä¸ºä»€ä¹ˆæ²¡æœ‰æƒ³å‡ºæ¥ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e4701f02bd74e4cb5eebd9c16019aaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895075&amp;x-signature=1ShMAnQSRThZ3JpMCTMmqHKsdPs%3D" alt="å±å¹•å½•åˆ¶ 2025-12-09 192135.gif" loading="lazy"/></p>
<h3 data-id="heading-1">ä¿æŠ¤å†…å®¹</h3>
<p>ç›®å‰æ”¯æŒè„±æ•çš„å†…å®¹ï¼š</p>
<ul>
<li>ç‰©ç†åœ°å€</li>
<li>é‚®ç®±åœ°å€</li>
<li>å§“å / ç”¨æˆ·å</li>
<li>å…¬å¸ / ç»„ç»‡å</li>
<li>ç”µè¯å·ç </li>
<li>é“¶è¡Œè´¦æˆ· / å¡å·</li>
<li>æ”¯ä»˜ä¿¡æ¯</li>
<li>éªŒè¯ç </li>
<li>å¯†ç </li>
<li>éšæœºç§å­</li>
<li>ç§é’¥</li>
<li>URL åœ°å€</li>
</ul>
<h2 data-id="heading-2">åœ¨çº¿ä½“éªŒ</h2>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ï¼Œä¸å¦‚ç›´æ¥ä¸Šæ‰‹è¯•è¯•ã€‚</p>
<p>å®˜æ–¹æä¾›äº†ä¸€ä¸ªçº¿ä¸Š <code>demo</code>ï¼Œå¯ä»¥åœ¨çº¿ä½“éªŒã€‚</p>
<p>åœ°å€ï¼š<code>https://oneaifw.com/</code></p>
<p>å¯ä»¥ç›´æ¥åˆ†ææ•æ„Ÿä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°è¯•è„±æ•çš„æ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07f6aea8fe9440fd84aa22969f7f670f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895075&amp;x-signature=xyNPHdz9Pc6aEPIXKApzYUU%2B5NE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">ä½¿ç”¨æ–¹å¼</h2>
<p>è¯¥é¡¹ç›®å¦ä¸€ä¸ªå¾ˆèµçš„ç‚¹å°±æ˜¯ï¼Œå®ƒæä¾›äº†æˆ‘ä»¬å¸¸ç”¨çš„å„ç§æ–¹å¼ä½¿ç”¨ï¼ŒåŒ…æ‹¬æœ¬åœ° Webã€æµè§ˆå™¨æ’ä»¶ã€æœ¬åœ° APIã€æœ¬åœ°å‘½ä»¤è¡Œã€‚</p>
<h3 data-id="heading-4">æœ¬åœ° Web</h3>
<p>ä¸€ä¸ªè½»é‡å‰ç«¯ï¼Œä¾èµ– <code>@oneaifw/aifw-js</code> åº“ï¼Œåœ¨æµè§ˆå™¨é‡Œè·‘å®Œæ•´æµç¨‹ã€‚</p>
<p>é€‚åˆå¿«é€ŸéªŒè¯æˆ–åµŒå…¥ç°æœ‰ <code>Web</code> åº”ç”¨ã€‚</p>
<h3 data-id="heading-5">æµè§ˆå™¨æ’ä»¶</h3>
<p>æä¾› <code>Chrome/Edge</code> æ‰©å±•ç¤ºä¾‹ï¼Œå¯ä»¥æ³¨å…¥åˆ°å„ç±»å¤§æ¨¡å‹ç½‘ç«™ï¼Œåœ¨ä½ ç‚¹å‡»â€œå‘é€â€å‰è‡ªåŠ¨è„±æ•ã€‚</p>
<p>è¿™ä¸ªä¼°è®¡æ˜¯æ—¥å¸¸ä½¿ç”¨æœ€ä½³çš„æ–¹å¼äº†ã€‚</p>
<h3 data-id="heading-6">æœ¬åœ° API</h3>
<p>é€šè¿‡ <code>py-origin</code> æˆ– <code>cli/python</code> å¯åŠ¨ä¸€ä¸ªæœ¬åœ° HTTP æœåŠ¡ï¼Œæä¾› <code>/api/mask_text</code>ã€<code>/api/restore_text</code>ã€<code>/api/call</code> ç­‰æ¥å£ã€‚</p>
<p>å¦‚æœä½ å’Œæˆ‘ä¸€æ ·æ­£åœ¨å¼€å‘ AI é¡¹ç›®ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡ <code>API</code> æ–¹å¼æ¥å…¥ã€‚</p>
<h3 data-id="heading-7">æœ¬åœ°å‘½ä»¤è¡Œ</h3>
<p>è£…å¥½ Python åŒ…åï¼Œæ”¯æŒå‘½ä»¤è¡Œç›´æ¥è°ƒç”¨ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">python -m aifw call <span class="hljs-string">"è¯·æŠŠå¦‚ä¸‹æ–‡æœ¬ç¿»è¯‘ä¸ºä¸­æ–‡: My email address is test@example.com, and my phone number is 18744325579."</span>
</code></pre>
<p>éå¸¸é€‚åˆè„šæœ¬è°ƒç”¨æˆ–è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
<h2 data-id="heading-8">ç»“è¯­</h2>
<p>ä»Šå¤©ä¸»è¦ç»™å¤§å®¶åˆ†äº«äº†ä¸€ä¸ª AI é¡¹ç›®ä¸­è§£å†³<strong>éšç§</strong>é—®é¢˜çš„äº§å“ï¼Œé‡ç‚¹æ˜¯è®¾è®¡æ€è·¯ï¼Œå¸Œæœ›å¯ä»¥å¸®åˆ°å¤§å®¶ã€‚</p>
<p>æˆ‘å·²ç»åœ¨è·‘é€šäº† Web ç‰ˆæœ¬ï¼Œéƒ¨ç½²ä½“éªŒå°†åœ¨åç»­æ›´æ–°ã€‚</p>
<p>åŸºåº§æ¨¡å‹æˆ–è®¸é¥ä¸å¯åŠï¼Œä½† AI æ—¶ä»£çš„çœŸæ­£æœºä¼šï¼Œå¾€å¾€è—åœ¨åƒ <code>OneAIFW</code> è¿™æ ·çš„â€œ<strong>å°è€Œå…³é”®</strong>â€çš„ç¯èŠ‚é‡Œâ€”â€”å®ƒä¸ç‚«æŠ€ï¼Œåªæ˜¯è®©æ™ºèƒ½å˜å¾—æ›´å®‰å…¨ã€æ›´å¯ç”¨ã€‚è€Œè¿™ï¼Œæ­£æ˜¯æˆ‘ä»¬æ¯ä¸ªäººéƒ½èƒ½å‚ä¸çš„æ–¹å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†äº« 4 æ¬¾åŸºäº C# ç¼–å†™ã€å®ç”¨ã€å¼€æºçš„ Visual Studio æ‰©å±•æ’ä»¶]]></title>    <link>https://juejin.cn/post/7581698635865505818</link>    <guid>https://juejin.cn/post/7581698635865505818</guid>    <pubDate>2025-12-09T14:31:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698635865505818" data-draft-id="7581698074361643017" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†äº« 4 æ¬¾åŸºäº C# ç¼–å†™ã€å®ç”¨ã€å¼€æºçš„ Visual Studio æ‰©å±•æ’ä»¶"/> <meta itemprop="keywords" content="åç«¯,.NET,Visual Studio"/> <meta itemprop="datePublished" content="2025-12-09T14:31:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†äº« 4 æ¬¾åŸºäº C# ç¼–å†™ã€å®ç”¨ã€å¼€æºçš„ Visual Studio æ‰©å±•æ’ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:31:29.000Z" title="Tue Dec 09 2025 14:31:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">EFCore.Visualizer</h2>
<p>EFCore.Visualizer æ˜¯ä¸€æ¬¾å¯ä»¥ç›´æ¥åœ¨ Visual Studio ä¸­æŸ¥çœ‹ EF Core æŸ¥è¯¢è®¡åˆ’è°ƒè¯•å™¨å¯è§†åŒ–å·¥å…·ï¼ˆå¸®åŠ©å¼€å‘è€…åˆ†æå’Œä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½ï¼‰ï¼Œç›®å‰ï¼Œè¯¥å¯è§†åŒ–å·¥å…·æ”¯æŒ SQL Serverã€PostgreSQLã€SQLiteã€MySQL å’Œ Oracleã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGiorgi%2FEFCore.Visualizer" target="_blank" title="https://github.com/Giorgi/EFCore.Visualizer" ref="nofollow noopener noreferrer">github.com/Giorgi/EFCoâ€¦</a></li>
</ul>
<p><strong>SQL Serverï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e691787d16a948af9e5d7a8ba5230db8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=EX9RWOjdSPUmlm34MLpKQC7ivlQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a0fa37859cb4ebeb2228d9183c4936f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=dTAyyB8FKUyhxA9mEei8GJOQCAA%3D" alt="" loading="lazy"/></p>
<p><strong>PostgreSQLï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c864e10f0dd54195a00034b3a0580080~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=HWji9kk5CIz6ibWqFxR%2BWn0JV6k%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3cd6e9076be42bb85881edfcfa06115~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=d5d6tB2MtVqdEaEMFmkQt6NlXao%3D" alt="" loading="lazy"/></p>
<p><strong>MySQLï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cba82dafcbe44c5f9fa47ac1ee2e770c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=MNldPXCOcpcNmSW7%2F9sFXgDnnN0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3a918d0160243f1b024aae56c1f4958~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=VAr4mvXtTuSrV9rCo9Ln%2BwrJmzI%3D" alt="" loading="lazy"/></p>
<p><strong>SQLiteï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df060161a1de45ea96d7641f21b8eae7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=LVYFrHftoPIQZ90gXorkuuZwKiI%3D" alt="" loading="lazy"/></p>
<p><strong>Oracleï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e781551b6adc4046a6e33cc848ea20bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=ZRy3dO7dLM9LuE1FpRWqTrsg%2FjE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4041db549b1418ea151ff96e2d358b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=NBqvhT5ds9JJF2U6tp3XQgrKPN0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">EFCorePowerTools</h2>
<p>EF Core Power Tools æ˜¯ä¸€æ¬¾åŸºäº C# ç¼–å†™ã€å¼€æºå…è´¹ï¼ˆMIT licenseï¼‰ã€åœ¨ EF Core å‘½ä»¤è¡Œå·¥å…·çš„åŸºç¡€ä¸Šæ„å»ºçš„é€‚ç”¨äº Visual Studio 2022 ä¸­çš„ EF Core åå‘å·¥ç¨‹å’Œæ¨¡å‹å¯è§†åŒ–æ‰©å±•æ’ä»¶ã€‚å®ƒæä¾›äº†åå‘å·¥ç¨‹ã€è¿ç§»å’Œæ¨¡å‹å¯è§†åŒ–ã€ç”Ÿæˆå…³ç³»å›¾ã€ç”ŸæˆSQLè¯­å¥ç­‰åŠŸèƒ½ï¼Œæ—¨åœ¨é™ä½ä½¿ç”¨ EF Core çš„é—¨æ§›ï¼Œå¹¶é€šè¿‡å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰è¾…åŠ©å¼€å‘è€…è¿›è¡Œæ•°æ®åº“çš„åå‘å·¥ç¨‹å’ŒDbContextæ¨¡å‹çš„å¯è§†åŒ–ã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FErikEJ%2FEFCorePowerTools" target="_blank" title="https://github.com/ErikEJ/EFCorePowerTools" ref="nofollow noopener noreferrer">github.com/ErikEJ/EFCoâ€¦</a></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f767bde05bfb4a018e63a031b75cca84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=qBIHeZ%2B9tMmVxMS5mTEwIlG4OTs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d76878419950449399eff07f3a51fc54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=M9HASn8HCNTk39CHw79CGGYMqB8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">AntDeploy</h2>
<p>AntDeploy æ˜¯ä¸€æ¬¾ç”± .NET å¼€æºã€å®ç”¨çš„ Visual Studio å‘å¸ƒéƒ¨ç½²æ’ä»¶ï¼Œæ”¯æŒéƒ¨ç½² Dockerã€IISã€Windows å’Œ Linux æœåŠ¡ï¼ŒåŒæ—¶æ”¯æŒ .NET Framework å’Œ .NET Coreï¼Œæ”¯æŒå›æ»šå’Œå¢é‡éƒ¨ç½²ï¼Œåœ¨æ”¯æŒ Visual Studio 2019 å’Œ 2022 ä¸­ä½¿ç”¨ã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyuzd%2FAntDeploy" target="_blank" title="https://github.com/yuzd/AntDeploy" ref="nofollow noopener noreferrer">github.com/yuzd/AntDepâ€¦</a></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef13464ed4e6407f92658906d6b21ace~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=QMKzcsOmoFQlbeTB%2FY31QAWdhL0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af8bc977ac27411a8c48387d41d3aa43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=1EUmS8duA55ynRMHlDoaqErQkuk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">FileEncoding</h2>
<p>FileEncoding æ˜¯ä¸€ä¸ªä¸“ä¸º Visual Studio è®¾è®¡çš„æ‰©å±•æ’ä»¶ï¼Œå®ƒèƒ½å¤Ÿåœ¨ Visual Studio çš„æ–‡æœ¬ç¼–è¾‘å™¨å³ä¸‹è§’å®æ—¶æ˜¾ç¤ºå½“å‰æ‰“å¼€æ–‡æ¡£çš„ç¼–ç æ ¼å¼ã€‚è¿™ä¸€åŠŸèƒ½å¯¹äºå¿«é€Ÿè¯†åˆ«æ–‡ä»¶çš„ç¼–ç éå¸¸æœ‰å¸®åŠ©ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†æ¥è‡ªä¸åŒå¹³å°æˆ–å›¢é˜Ÿçš„ä»£ç æ—¶ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œé€šè¿‡ç®€å•çš„ç‚¹å‡»æ“ä½œï¼Œç”¨æˆ·è¿˜å¯ä»¥è½»æ¾ä¿®æ”¹æ–‡ä»¶çš„ç¼–ç æ ¼å¼ï¼Œæ— éœ€å€ŸåŠ©å¤–éƒ¨å·¥å…·æˆ–è¿›è¡Œå¤æ‚çš„è®¾ç½®è°ƒæ•´ã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgenrwoody%2Fvs_file_encoding" target="_blank" title="https://github.com/genrwoody/vs_file_encoding" ref="nofollow noopener noreferrer">github.com/genrwoody/vâ€¦</a></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3cdf1686f64422c8a480f4f17c39ff1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=EnbPlaGqCYDNP0MJPTvZD238VaI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f51f232298ba471b9d36fb101d99fdaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895489&amp;x-signature=Cy5IgElvafg7wD5YSAWY9Hjdl3U%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>æœ¬æ–‡æ‰€æœ‰é¡¹ç›®éƒ½å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‡å¦‚ä½ æœ‰æ›´å¥½çš„æ¨èï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡</strong>ğŸ¤ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è®¾ç½®ä½ çš„ PWN ç¯å¢ƒ]]></title>    <link>https://juejin.cn/post/7581728606307008564</link>    <guid>https://juejin.cn/post/7581728606307008564</guid>    <pubDate>2025-12-09T14:36:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581728606307008564" data-draft-id="7581678301217013760" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è®¾ç½®ä½ çš„ PWN ç¯å¢ƒ"/> <meta itemprop="keywords" content="å®‰å…¨"/> <meta itemprop="datePublished" content="2025-12-09T14:36:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FreeCultureBoy"/> <meta itemprop="url" content="https://juejin.cn/user/2664871913355463"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è®¾ç½®ä½ çš„ PWN ç¯å¢ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2664871913355463/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FreeCultureBoy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:36:17.000Z" title="Tue Dec 09 2025 14:36:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ é¦–å…ˆéœ€è¦çš„æ˜¯Â <strong>Linux Shell</strong> ï¼Œå› ä¸ºå¤§å¤šæ•° pwn æŒ‘æˆ˜é€šå¸¸æ˜¯Â <strong>64 ä½ ELF å¯æ‰§è¡Œæ–‡ä»¶</strong> ã€‚æˆ‘ä¼šå†™ä¸¤ä¸ªä¸åŒçš„éƒ¨åˆ†ï¼Œåˆ†åˆ«é’ˆå¯¹ Windows å’Œ MacOSã€‚å¦‚æœä½ å·²ç»ç”¨<strong>è¿‡ä»»ä½• Linux å‘è¡Œ</strong>ç‰ˆï¼Œè¿™éƒ¨åˆ†ä½ å°±æ²¡é—®é¢˜äº†ï¼å¯¹äºå‰©ä¸‹çš„ Windows/MacOS ç”¨æˆ·ï¼Œæˆ‘å¼ºçƒˆå»ºè®®å®‰è£…Â <strong>Debian Bookworm</strong>Â ä½œä¸ºé¦–é€‰å‘è¡Œç‰ˆï¼Œå› ä¸ºå®ƒç›®å‰ä½¿ç”¨Â <code>glibc 2.36</code>ï¼Œå°šæœªå®ç°<strong>å®Œæ•´çš„ RELROï¼Œ</strong> Â ä¸”åˆ©ç”¨èµ·æ¥ç¨å¾®å®¹æ˜“ä¸€äº›ã€‚</p>
<h2 data-id="heading-0">Windows</h2>
<p>å¯¹äºæ­£åœ¨é˜…è¯»æœ¬æ–‡çš„ Windows ç”¨æˆ·ï¼Œä½ å¯ä»¥æŒ‰ç…§é“¾æ¥çš„è¯´æ˜ä¹¦è½»æ¾ä¸‹è½½Â <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fwindows%2Fwsl%2Finstall" target="_blank" title="https://learn.microsoft.com/en-us/windows/wsl/install" ref="nofollow noopener noreferrer">WSL</a></strong>ã€‚å¦‚æœä½ æ‡’å¾—çœ‹ï¼Œè¿™é‡Œæœ‰ä¸€ä»½ä½ åº”è¯¥æ‰§è¡Œçš„å‘½ä»¤åˆ—è¡¨ã€‚</p>
<p>å®‰è£…ä½¿ç”¨ Debian for WSL</p>
<pre><code class="hljs language-arduino" lang="arduino">wsl.exe --update
wsl --set-<span class="hljs-keyword">default</span>-version <span class="hljs-number">2</span>
wsl install -d Debian
</code></pre>
<p>å°±æ˜¯è¿™æ ·ï¼ä»ç°åœ¨èµ·ï¼Œä½ å¯ä»¥é€šè¿‡å¼€å§‹<strong>èœå•</strong>ä¸­çš„Â <code>Debian æœç´¢ Debian</code>ï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­è¿è¡ŒÂ <code>Debian</code>ï¼Œè¿›å…¥ä½ çš„Â <strong>Debian shell</strong>ã€‚å…³äºä¸Šè¿°Â <strong>WSL 2</strong>Â çš„è¦æ±‚ï¼ŒWSL 2 å…è®¸ä½ åœ¨ WSL å†…éƒ¨çš„é›†æˆæ¡Œé¢æ¨¡å¼ä¸‹ä½¿ç”¨ GUI åº”ç”¨ã€‚è¿™å…¶å®æ²¡ä»€ä¹ˆç‰¹åˆ«çš„æ„ä¹‰ï¼Œé™¤äº†<strong>ä½ å¯ä»¥è®©ä½ çš„è°ƒè¯•å™¨åœ¨ä¸€ä¸ªæ–°çª—å£é‡Œå¼¹å‡ºï¼Œä¸ç”¨Â <code>tmux</code>ï¼Œè¿™å¯¹æˆ‘æ¥è¯´ç®€ç›´æ˜¯ä¸ªå¤§èƒœåˆ©!!</strong></p>
<p>è¡¥å……ä¸€ç‚¹ï¼Œä½ å¯èƒ½éœ€è¦<strong>æ›´æ–°ç³»ç»ŸåŒ…</strong> ï¼Œå¹¶ä¸‹è½½æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä»¥é¿å…åœ¨ WSL ç»ˆç«¯å’Œå…¶ä»–çª—å£ä¹‹é—´åˆ‡æ¢ã€‚ä½ å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤å®Œæˆï¼šÂ <code>sudo apt update &amp;&amp; sudo apt dist-upgrade &amp;&amp; sudo apt(-get) install &lt;editor of choice&gt;</code>Â ã€‚</p>
<p>å¦‚æœä½ æƒ³è¦å®Œå…¨æ‡’æ•£çš„ä½“éªŒå’Œæœ€å°‘çš„ Linux shell ä½œï¼Œä½ å¯ä»¥æŒ‚<strong>è½½ä½ çš„ Windows æ–‡ä»¶ç³»ç»Ÿ</strong> ï¼Œå¹¶åœ¨Â <strong>Downloads</strong>Â ç›®å½•ä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼ï¼‰ï¼šÂ <code>cd /mnt/c/users/your\ name/downloads</code></p>
<h2 data-id="heading-1">macOS</h2>
<p>ä¸å¹¸çš„æ˜¯ï¼Œå¯¹äº MacOS ç”¨æˆ·æ¥è¯´ï¼Œæˆ‘è§‰å¾—æ²¡æœ‰åƒ Windows ç”¨æˆ·é‚£æ ·çš„é›†æˆæ¡Œé¢ã€‚æ‰€ä»¥ï¼Œæˆ‘å»ºè®®ä½ æŒ‰ç…§è¿™ä¸ªæŒ‡å—ä½œï¼Œå°½å¯èƒ½å¤š<strong>åœ°åœ¨ç»ˆç«¯é‡Œä½œ</strong> ï¼Œä½ ä¼šåœ¨å…¶ä¸­èŠ±è´¹æ¯”é¢„æœŸæ›´å¤šçš„æ—¶é—´ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œæœ‰Â <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flima-vm%2Flima" target="_blank" title="https://github.com/lima-vm/lima" ref="nofollow noopener noreferrer">Lima</a></strong>ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒå¸®åŠ©ç®€åŒ–åˆ›å»º x64 Linux å£³ï¼Œå³ä½¿æ˜¯åœ¨Â <strong>Apple Silicon</strong>Â ä¸Šã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä»½å¿«é€Ÿå…¥é—¨çš„æ¨èæ¸…å•ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">brew install lima
limactl start --name=x64-debian <span class="hljs-keyword">template</span>:<span class="hljs-comment">//debian --arch=x86_64</span>
limactl shell x64-debian 
sudo apt install tmux
</code></pre>
<p>ä½ <strong>ä¼š</strong>é‡åˆ°ç»ˆç«¯é¢œè‰²çš„é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆå®Œå…¨<strong>å–å†³äºä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨</strong> ï¼Œæ‰€ä»¥ä½ è‡ªå·±æ‰¾è§£å†³æ–¹æ¡ˆã€‚</p>
<p>é¢å¤–åŠ åˆ†ï¼šå¯å†™ä¸»æœºæ–‡ä»¶ç³»ç»Ÿï¼</p>
<p><code>LiMactl ç¼–è¾‘ x64-debian</code>Â ä»¥ç¼–è¾‘é…ç½®
æ·»åŠ ä»¥ä¸‹ä¸å®‰å…¨çš„é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">mounts:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">location:</span> <span class="hljs-string">"~"</span>
  <span class="hljs-attr">writable:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>ç°åœ¨ä½ æ‹¥æœ‰äº†ä¸€ä¸ªè¿è¡Œåœ¨ x64 ä¸Šçš„ Linux <strong>Shell</strong> ï¼Œå¯ä»¥ä¸å—é™åˆ¶åœ°è®¿é—®ä½ çš„ä¸»æœºæ–‡ä»¶ç³»ç»Ÿï¼
ä½ å¯ä»¥ç”¨<code>æ ‡ç­¾</code>è‡ªåŠ¨è¡¥å…¨<strong>ä½ çš„è™šæ‹Ÿæœºåå­—</strong>æ‹¼å†™ï¼</p>
<p>æ­å–œä½ é€šè¿‡äº† Linux å®‰è£…ï¼ç¹ççš„éƒ¨åˆ†ç°åœ¨å¼€å§‹äº†......æˆ‘ä»¬å…ˆç€æ‰‹å®‰è£…è°ƒè¯•å™¨å’ŒåŸºç¡€å·¥å…·ã€‚</p>
<h3 data-id="heading-2">å·¥å…·å®‰è£…</h3>
<hr/>
<p>æ­å–œä½ å®Œæˆäº†Linuxå®‰è£…ï¼ä¹å‘³çš„éƒ¨åˆ†ç°åœ¨å¼€å§‹äº†...è®©æˆ‘ä»¬å…ˆå®‰è£…è°ƒè¯•å™¨å’ŒåŸºæœ¬å·¥å…·ã€‚</p>
<h4 data-id="heading-3">å®ç”¨å·¥å…·</h4>
<hr/>
<h5 data-id="heading-4">pwntools</h5>
<ol>
<li><code>sudo apt install python3</code> å®‰è£…python</li>
<li><code>sudo apt-get install python3-pwntools</code> å®‰è£…pwntools</li>
<li><code>pwn checksec /lib/x86_64-linux-gnu/libc.so.6</code> éªŒè¯å®ƒæ˜¯å¦å·¥ä½œ</li>
</ol>
<h5 data-id="heading-5">one gadget</h5>
<ol>
<li><code>sudo apt install rubygems</code> å®‰è£…gem</li>
<li><code>gem install one_gadget</code> å®‰è£…one gadget</li>
<li><code>one_gadget /lib/x86_64-linux-gnu/libc.so.6</code> éªŒè¯å®ƒæ˜¯å¦å·¥ä½œ</li>
</ol>
<h5 data-id="heading-6">rop gadget</h5>
<ol>
<li><code>sudo -H python3 -m pip install ROPgadget</code> å®‰è£…ROPgadget</li>
<li><code>ROPgadget /lib/x86_64-linux-gnu/libc.so.6</code> éªŒè¯å®ƒæ˜¯å¦å·¥ä½œï¼ˆè­¦å‘Šï¼šè¾“å‡ºé‡å¾ˆå¤§ï¼ï¼ï¼‰</li>
</ol>
<h4 data-id="heading-7">è°ƒè¯•å™¨</h4>
<hr/>
<p>æˆ‘<strong>å¼ºçƒˆæ¨è<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbata24%2Fgef" target="_blank" title="https://github.com/bata24/gef" ref="nofollow noopener noreferrer">bata-gef</a></strong>ï¼Œä½ ä¹Ÿåº”è¯¥ä½¿ç”¨å®ƒï¼</p>
<p>æˆ‘ä¸å»ºè®®ç›²ç›®è¿è¡Œå®‰è£…è„šæœ¬ã€‚ç›¸åï¼Œ<strong>å…‹éš†ä»“åº“</strong>å¹¶åœ¨ä½ çš„<code>.gdbinit</code>ä¸­sourceå®ƒçš„<code>gef.py</code>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ~
git <span class="hljs-built_in">clone</span> https://github.com/bata24/gef
vi ~/.gdbinit

<span class="hljs-comment">#.gdbinit</span>
<span class="hljs-built_in">source</span> /path/to/gef.py
</code></pre>
<p>å¯¹äºæ²¡æœ‰é›†æˆæ¡Œé¢æ¨¡å¼çš„MacOSç”¨æˆ·ï¼Œ<strong>ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰å®‰è£…çš„tmux</strong>ã€‚åªéœ€è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<ol>
<li><code>tmux</code> å¯åŠ¨tmux</li>
<li><code>[Ctrl] + B</code> è¿›å…¥å‘½ä»¤æ¨¡å¼</li>
<li><code>]</code> å¯ç”¨æ»šåŠ¨</li>
<li><code>[Ctrl] + C</code> é‡ç½®çŠ¶æ€</li>
<li><code>[Ctrl] + B</code>ï¼Œç„¶å<code>&lt;arrow&gt;</code> åˆ‡æ¢ç„¦ç‚¹æ ‡ç­¾é¡µ</li>
</ol>
<h4 data-id="heading-8">åç¼–è¯‘å™¨/åæ±‡ç¼–å™¨</h4>
<hr/>
<p>å¤ªå¥½äº†ï¼ç°åœ¨æˆ‘ä»¬æœ‰äº†å¼€å§‹ç¼–å†™å’Œè°ƒè¯•_pwn_è„šæœ¬æ‰€éœ€çš„ä¸€åˆ‡ï¼Œè¿™<strong>æŠ€æœ¯ä¸Š</strong>å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å…¨éƒ¨ï¼Œä½†æœ‰æ—¶ï¼ŒæŒ‘æˆ˜ä¸æä¾›<strong>æºä»£ç </strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦è¿›è¡Œä¸€äº›<strong>é€†å‘å·¥ç¨‹å·¥ä½œ</strong>ã€‚è®©æˆ‘ä»¬ä¸‹è½½**<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNationalSecurityAgency%2Fghidra" target="_blank" title="https://github.com/NationalSecurityAgency/ghidra" ref="nofollow noopener noreferrer">Ghidra</a>**ã€‚</p>
<p>è®¾ç½®ç›¸å½“ç®€å•ï¼Œä½ åªéœ€è¦ä¸€ä¸ª<strong>Javaè¿è¡Œæ—¶</strong>ï¼Œæˆ‘æ¨è<strong>Temurin</strong>ï¼Œä½ å¯ä»¥åœ¨</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadoptium.net%2Fen-GB%2Ftemurin%2Freleases" target="_blank" title="https://adoptium.net/en-GB/temurin/releases" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>
æ‰¾åˆ°å®ƒã€‚</p>
<p>ä¸€æ—¦ä½ å®‰è£…äº†è¿è¡Œæ—¶ï¼Œåªéœ€è¿è¡Œ<code>ghidraRun</code>æˆ–<code>ghidraRun.bat</code>æ¥å¯åŠ¨<strong>Ghidra</strong>ã€‚</p>
<h5 data-id="heading-9">ä½¿ç”¨Ghidra</h5>
<p>Ghidraå®é™…ä¸Šç›¸å½“ä¸é”™ä¸”ç”¨æˆ·å‹å¥½ï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯<strong>åˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®</strong>ï¼Œç„¶å<strong>æ‹–æ”¾</strong>ä½ çš„æŒ‘æˆ˜äºŒè¿›åˆ¶æ–‡ä»¶åˆ°å…¶ä¸­ï¼Œå¹¶ç»™å®ƒä¸€ç‚¹æ—¶é—´æ¥ç”Ÿæˆåæ±‡ç¼–å’Œåç¼–è¯‘ï¼</p>
<h3 data-id="heading-10">å®¹å™¨åŒ–å’ŒæœåŠ¡å™¨å¤åˆ¶</h3>
<hr/>
<p><strong>æ­å–œ</strong>ä½ èµ°åˆ°è¿™ä¸€æ­¥ï¼ä½ å·²ç»å‡†å¤‡å¥½å¤„ç†å‡ ä¹æ‰€æœ‰pwnæŒ‘æˆ˜äº†ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚</p>
<p>æœ‰æ—¶ï¼Œå–„æ„çš„æŒ‘æˆ˜ä½œè€…ä¼šæä¾›<strong>libcã€ldå’Œ/æˆ–Dockerfile</strong>ã€‚è¿™äº›æ–‡ä»¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬å¸®åŠ©ä½ ç¡®ä¿ä½ çš„æŒ‘æˆ˜<strong>ä½¿ç”¨ä¸æœåŠ¡å™¨ç›¸åŒçš„åº“</strong>ï¼Œç¡®ä¿ä½ æ°¸è¿œä¸ä¼šé‡åˆ°_"åœ¨æˆ‘çš„æœºå™¨ä¸Šå¯ä»¥è¿è¡Œ"_çš„é—®é¢˜ï¼æ‰€ä»¥ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•å¤„ç†è¿™äº›æ–‡ä»¶çš„å„ç§ç»„åˆã€‚</p>
<h4 data-id="heading-11">ç»™å®šäº†Libcã€ldå’ŒDockerfile</h4>
<hr/>
<p>è¿™æ˜¯æœ€å¥½çš„æƒ…å†µï¼Œå› ä¸ºä½ ä¸éœ€è¦åšå¤ªå¤šã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä½ å¯ä»¥è¿è¡Œçš„å‘½ä»¤æ¥ä½¿ç”¨ç»™å®šçš„<code>libc</code>å’Œ<code>ld</code>ï¼š</p>
<p><code>./ld-linux-x86-64.so.2 --library-path . ./chal</code></p>
<p>è¿™å°†è¿è¡Œ<strong>é“¾æ¥å™¨</strong>ï¼Œå¹¶å‘Šè¯‰å®ƒä½¿ç”¨<strong>ä½ ç›®å½•ä¸­çš„åº“</strong>æ¥å¯åŠ¨æŒ‘æˆ˜ã€‚<strong>å°±è¿™æ ·ï¼</strong> ä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨ç»™å®šçš„åº“ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•å¤åˆ¶æœåŠ¡å™¨å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»å®‰è£…<strong>Docker</strong>ã€‚è¿‡ç¨‹ç›¸å½“é•¿ï¼Œä½†è¯·ç›¸ä¿¡</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.docker.com%2Fengine%2Finstall%2Fdebian%2F" target="_blank" title="https://docs.docker.com/engine/install/debian/" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>
å¹¶éµå¾ªå®ƒã€‚</p>
<p>ä¸€æ—¦ä½ å®‰è£…äº†<strong>Docker</strong>ï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<p><code>docker run -p YOUR_PORT:CONTAINER_PORT -d --privileged $(docker build -q .)</code></p>
<p>è¿™å°†æ„å»ºå®¹å™¨ï¼Œç„¶åä»¥<strong>ç‰¹æƒ</strong>è¿è¡Œå®ƒï¼Œè¿™é€šå¸¸æ˜¯_pwn.red/jail_æ¨¡æ¿æ‰€éœ€è¦çš„ã€‚è¯·å°†<code>CONTAINER_PORT</code>å ä½ç¬¦æ›¿æ¢ä¸ºå®¹å™¨æä¾›æŒ‘æˆ˜çš„ç«¯å£ï¼Œå°†<code>YOUR_PORT</code>æ›¿æ¢ä¸ºå®¿ä¸»æœºä¸Šçš„ä»»ä½•æœªä½¿ç”¨ç«¯å£ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°†<strong>ç»‘å®šåˆ°æ‰€æœ‰æ¥å£</strong>ã€‚</p>
<p>è®¾ç½®å®Œæˆåï¼Œä½ å¯ä»¥åƒè¿™æ ·è¿æ¥åˆ°å®¹å™¨å¹¶è¿è¡ŒæŒ‘æˆ˜ï¼š</p>
<p><code>nc 127.0.0.1 YOUR_PORT</code></p>
<p>å°±è¿™æ ·ï¼ä½ å·²ç»æˆåŠŸå¤åˆ¶äº†æœåŠ¡å™¨ä½¿ç”¨çš„åº“ï¼Œä»¥åŠæœåŠ¡å™¨æœ¬èº«ï¼å®Œæˆåï¼Œä½ åº”è¯¥é€šè¿‡è¿è¡Œ<code>docker ps</code>æ‰¾åˆ°å®¹å™¨å“ˆå¸Œï¼Œç„¶åè¿è¡Œ<code>docker stop &lt;hash&gt;</code>æ¥æ¸…ç†æ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚</p>
<h4 data-id="heading-12">åªæä¾›äº†Dockerfile</h4>
<hr/>
<p>æœ‰æ—¶ï¼Œä½œè€…åªæä¾›<code>Dockerfile</code>ã€‚è¿™å¾ˆç³Ÿç³•ï¼Œä½†æ²¡å…³ç³»ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è‡ªå·±æå–<code>libc</code>å’Œ<code>ld</code>ã€‚æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ä¸Šè¿°æ­¥éª¤å¯åŠ¨å®¹å™¨ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">cp</span> 1a2b:/lib/x86_64-linux-gnu/libc.so.6 ./libc.so.6
docker <span class="hljs-built_in">cp</span> 1a2b:/lib/x86_64-linux-gnu/ld-linux-x86-64 ./ld-linux-x86-64.so.2
</code></pre>
<p>è®°å¾—å°†<code>1a2b</code>æ›¿æ¢ä¸ºå®¹å™¨å“ˆå¸Œçš„<strong>å‰4ä¸ªå­—ç¬¦</strong>ï¼Œå¯åŠ¨æ—¶ä¼šæ˜¾ç¤ºç»™ä½ ã€‚æœ‰æ—¶ï¼Œ<strong>Dockerfile</strong>ä¼šä»å¦ä¸€ä¸ª<strong>Linuxå‘è¡Œç‰ˆ</strong>å¤åˆ¶æ–‡ä»¶åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹æ¥æä¾›æœåŠ¡ï¼Œä»¥ä¾¿ä½¿ç”¨è¯¥å‘è¡Œç‰ˆçš„<code>libc</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªéœ€åœ¨è·¯å¾„å‰åŠ ä¸Šå‰ç¼€ã€‚ä½¿ç”¨ä¸€ä¸ªå®¹å™¨æ‰§è¡Œ<code>COPY --from=debian:bookworm / /srv</code>çš„ä¾‹å­ï¼Œæˆ‘ä»¬åªéœ€åœ¨<code>/lib</code>å‰åŠ ä¸Š<code>/srv</code>æ¥ä»æœåŠ¡å™¨çš„æ–‡ä»¶ä¸­å¤åˆ¶ã€‚</p>
<h3 data-id="heading-13">ç»“è®º</h3>
<hr/>
<p>é€šè¿‡ä»¥ä¸Šæ‰€æœ‰è®¾ç½®å’Œå®‰è£…ï¼Œä½ åº”è¯¥æ‹¥æœ‰æ‰€æœ‰å·¥å…·ï¼Œä»¥åŠå¼€å§‹å¤„ç†pwnæŒ‘æˆ˜çš„åŸºæœ¬çŸ¥è¯†ã€‚<strong>å¿«ä¹pwningï¼</strong> å¦‚æœä½ ç°åœ¨æƒ³äº†è§£æ›´å¤šå…³äºpwnçš„ä¸€èˆ¬çŸ¥è¯†ï¼Œè¯·é˜…è¯»æˆ‘çš„åšå®¢æ–‡ç« </p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç²¾é€‰ 8 ä¸ªåŸºäº .NET å¼€æºã€åŠŸèƒ½å¼ºå¤§çš„ AI å’Œ LLM ç›¸å…³é¡¹ç›®æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7581848286387109934</link>    <guid>https://juejin.cn/post/7581848286387109934</guid>    <pubDate>2025-12-09T14:38:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581848286387109934" data-draft-id="7581666412021907465" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç²¾é€‰ 8 ä¸ªåŸºäº .NET å¼€æºã€åŠŸèƒ½å¼ºå¤§çš„ AI å’Œ LLM ç›¸å…³é¡¹ç›®æ¡†æ¶"/> <meta itemprop="keywords" content=".NET,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-09T14:38:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç²¾é€‰ 8 ä¸ªåŸºäº .NET å¼€æºã€åŠŸèƒ½å¼ºå¤§çš„ AI å’Œ LLM ç›¸å…³é¡¹ç›®æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:38:25.000Z" title="Tue Dec 09 2025 14:38:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¦‚ä»Šï¼ŒAI åº”ç”¨æ­£ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦è“¬å‹ƒå‘å±•ï¼Œåœ¨å„è¡Œå„ä¸šå±•ç°å‡ºå·¨å¤§çš„æ½œåŠ›ä¸æ·±è¿œçš„å½±å“åŠ›ã€‚ä»Šå¤©ï¼Œå¤§å§šä¸ºå¤§å®¶ç²¾å¿ƒæ•´ç†äº† 8 ä¸ªåŸºäº .NET å¼€æºã€åŠŸèƒ½å¼ºå¤§çš„ AI ä¸å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç›¸å…³é¡¹ç›®æ¡†æ¶ï¼Œå¸Œæœ›èƒ½ä¸ºä½ çš„å¼€å‘å’Œæ¢ç´¢æä¾›æœ‰ä»·å€¼çš„å‚è€ƒã€‚å¦‚æœä½ æœ‰æ›´ä¼˜ç§€çš„é¡¹ç›®æ¨èï¼Œæ¬¢è¿é€šè¿‡æäº¤ PR æˆ–åœ¨æ–‡æœ«ç•™è¨€åˆ†äº«ï¼</p>
<h2 data-id="heading-1">Microsoft Agent Framework</h2>
<p>Microsoft Agent Framework æ˜¯ä¸€ä¸ªé¢å‘ .NET å’Œ Python çš„å¼€æºå¼€å‘å¥—ä»¶ï¼Œç”¨äºæ„å»º AI æ™ºèƒ½ä½“åŠå¤šæ™ºèƒ½ä½“å·¥ä½œæµã€‚å®ƒèåˆå¹¶æ‰©å±•äº† Semantic Kernel ä¸ AutoGen é¡¹ç›®çš„æ ¸å¿ƒç†å¿µï¼Œåœ¨ç»“åˆä¸¤è€…ä¼˜åŠ¿çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥å¼•å…¥äº†å…¨æ–°èƒ½åŠ›ã€‚è¯¥æ¡†æ¶ç”±åŸç­å›¢é˜Ÿæ‰“é€ ï¼Œå°†æˆä¸ºæœªæ¥æ„å»º AI æ™ºèƒ½ä½“çš„ç»Ÿä¸€åŸºç¡€å¹³å°ã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fagent-framework" target="_blank" title="https://github.com/microsoft/agent-framework" ref="nofollow noopener noreferrer">github.com/microsoft/aâ€¦</a></li>
<li>åœ¨çº¿æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fagent-framework" target="_blank" title="https://learn.microsoft.com/en-us/agent-framework" ref="nofollow noopener noreferrer">learn.microsoft.com/en-us/agentâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/721ddf6a94624cbea1e6e6ad9b461d9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=047CxFYAMCM1u2KPvjO%2BOWjYPOg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c76fa44200c47bf8f3058e2c3d3ddef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=lXbg59XTc99O3T3CrZPwFA4QC%2Fc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">AutoGen</h2>
<p>AutoGen æ˜¯ä¸€ä¸ªå¼€æºç¼–ç¨‹æ¡†æ¶ï¼Œå®ƒé€šè¿‡å¤šä¸ªä»£ç†è¿›è¡Œå¯¹è¯ä»¥è§£å†³ä»»åŠ¡ï¼Œä»è€Œå®ç° LLM åº”ç”¨çš„å¼€å‘ã€‚AutoGen ä»£ç†å¯å®šåˆ¶ã€å¯å¯¹è¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ— ç¼åœ°å…è®¸äººç±»å‚ä¸ã€‚å®ƒä»¬å¯ä»¥åœ¨ä¸åŒçš„æ¨¡å¼ä¸‹è¿è¡Œï¼Œä½¿ç”¨ LLMã€äººç±»è¾“å…¥å’Œå·¥å…·çš„ç»„åˆã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fautogen" target="_blank" title="https://github.com/microsoft/autogen" ref="nofollow noopener noreferrer">github.com/microsoft/aâ€¦</a></li>
<li>åœ¨çº¿æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmicrosoft.github.io%2Fautogen" target="_blank" title="https://microsoft.github.io/autogen" ref="nofollow noopener noreferrer">microsoft.github.io/autogen</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06c4024230364c5bbb7f04fc77d2bdab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=Oz31D7Rdq43UUYm%2F138Wrdn5AdU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/111d34687c5e45dbb94b82bdc36117c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=P9UKOLBSK3hCrXx%2FsI%2B%2FJrOjAU4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">Semantic Kernel</h2>
<p>Semantic Kernel æ˜¯ä¸€ä¸ªå¼€æºçš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆSDKï¼‰ï¼Œæ—¨åœ¨å°†å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¦‚OpenAIã€Azure OpenAIå’ŒHugging Faceä¸ä¼ ç»Ÿçš„ç¼–ç¨‹è¯­è¨€å¦‚C#ã€Pythonå’ŒJavaé›†æˆã€‚è¿™ä¸ªé¡¹ç›®é€šè¿‡æä¾›æ’ä»¶ç³»ç»Ÿï¼Œå…è®¸å¼€å‘è€…è½»æ¾åœ°åˆ›å»ºèƒ½å¤Ÿè°ƒç”¨è¿™äº›å¤§å‹è¯­è¨€æ¨¡å‹çš„åº”ç”¨ç¨‹åºã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fsemantic-kernel" target="_blank" title="https://github.com/microsoft/semantic-kernel" ref="nofollow noopener noreferrer">github.com/microsoft/sâ€¦</a></li>
<li>åœ¨çº¿æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fzh-cn%2Fsemantic-kernel%2Foverview%2F" target="_blank" title="https://learn.microsoft.com/zh-cn/semantic-kernel/overview/" ref="nofollow noopener noreferrer">learn.microsoft.com/zh-cn/semanâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70d925378e974620b90b390162ffab19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=wisfEKrq5fYlfWcmXMiHilgWbBc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a5141450d9446bda6c70382130da282~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=AwAgKzbhoVVGvCF%2Bd9zoxugNmRY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">BotSharp</h2>
<p>BotSharp æ˜¯ä¸€ä¸ªé¢å‘ä¼ä¸šçº§ LLM åº”ç”¨çš„å¼€æº AI æ¡†æ¶ï¼Œæ—¨åœ¨ä¿ƒè¿›æ™ºèƒ½æœºå™¨äººåŠ©æ‰‹åœ¨é¢å‘ä¸šåŠ¡ç³»ç»Ÿä¸­çš„å¼€å‘å’Œåº”ç”¨ã€‚è¯¥é¡¹ç›®æ¶‰åŠè‡ªç„¶è¯­è¨€ç†è§£ã€è®¡ç®—æœºè§†è§‰å’ŒéŸ³é¢‘å¤„ç†æŠ€æœ¯ï¼Œå¹¶æ—¨åœ¨æ¨åŠ¨æ™ºèƒ½æœºå™¨äººåŠ©æ‰‹åœ¨ä¼ä¸šçº§ç³»ç»Ÿä¸­çš„å¼€å‘å’Œåº”ç”¨ã€‚BotSharp æä¾›äº†å¼€ç®±å³ç”¨çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œä½¿æ™®é€šç¨‹åºå‘˜èƒ½å¤Ÿæ›´å¿«ã€æ›´è½»æ¾åœ°å¼€å‘äººå·¥æ™ºèƒ½åº”ç”¨ç¨‹åºã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSciSharp%2FBotSharp" target="_blank" title="https://github.com/SciSharp/BotSharp" ref="nofollow noopener noreferrer">github.com/SciSharp/Boâ€¦</a></li>
<li>åœ¨çº¿æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbotsharp.readthedocs.io%2F" target="_blank" title="https://botsharp.readthedocs.io/" ref="nofollow noopener noreferrer">botsharp.readthedocs.io/</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3aed24fa0fec4f81b70f65063130e852~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=iLc3MViotFGHOoWrTL%2BOH4I%2BWBM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e06fec7b98514f2cbec883ba54579c87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=FGLjJRFkA4hs6XiTP2jK51KWVDE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/421b859bb7b14175b556d390b9e8bb2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=QZYFCD02VZG%2BW2mqiZ1%2BzU39g%2Bc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">Kernel Memory</h2>
<p>Kernel Memoryï¼ˆKMï¼‰æ˜¯ä¸€ç§å¤šæ¨¡æ€AIæœåŠ¡ï¼ŒRAG æ¶æ„ï¼Œä½¿ç”¨ LLM å’Œè‡ªç„¶è¯­è¨€ç´¢å¼•å’ŒæŸ¥è¯¢ä»»ä½•æ•°æ®ã€è·Ÿè¸ªæ¥æºã€æ˜¾ç¤ºå¼•ç”¨ã€å¼‚æ­¥å†…å­˜æ¨¡å¼ã€‚è¯¥å­˜å‚¨åº“æä¾›äº†ç‰¹å®š AI å’Œ LLMs åº”ç”¨åœºæ™¯ä¸­å†…å­˜çš„æœ€ä½³å®è·µå’Œå‚è€ƒæ¶æ„ã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fkernel-memory" target="_blank" title="https://github.com/microsoft/kernel-memory" ref="nofollow noopener noreferrer">github.com/microsoft/kâ€¦</a></li>
<li>åœ¨çº¿æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmicrosoft.github.io%2Fkernel-memory" target="_blank" title="https://microsoft.github.io/kernel-memory" ref="nofollow noopener noreferrer">microsoft.github.io/kernel-memoâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ab00cb6efaa4d0691566a947bf4ae00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=6MEJ27aRjuDBmgf2tuEKikIS7Bw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09b2ba121b6e4c59a1da017996bffcb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=lDCrMcJTs3%2FV8qdMYAts8EGPPVs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">LLamaSharp</h2>
<p>LLamaSharpæ˜¯ä¸€ä¸ªè·¨å¹³å°åº“ï¼Œç”¨äºåœ¨æœ¬åœ°è®¾å¤‡ä¸Šè¿è¡ŒLLaMA/LLaVAæ¨¡å‹ï¼ˆä»¥åŠå…¶ä»–æ¨¡å‹ï¼‰ã€‚å®ƒåŸºäºllama.cppï¼Œèƒ½å¤Ÿåœ¨CPUå’ŒGPUä¸Šé«˜æ•ˆè¿›è¡Œæ¨ç†ã€‚é€šè¿‡æä¾›é«˜çº§APIå’ŒRAGæ”¯æŒï¼ŒLLamaSharpä½¿å¾—åœ¨åº”ç”¨ç¨‹åºä¸­éƒ¨ç½²å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å˜å¾—æ–¹ä¾¿ã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSciSharp%2FLLamaSharp" target="_blank" title="https://github.com/SciSharp/LLamaSharp" ref="nofollow noopener noreferrer">github.com/SciSharp/LLâ€¦</a></li>
<li>åœ¨çº¿æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fscisharp.github.io%2FLLamaSharp%2Flatest%2F" target="_blank" title="https://scisharp.github.io/LLamaSharp/latest/" ref="nofollow noopener noreferrer">scisharp.github.io/LLamaSharp/â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04709de314bb44a0a69e08e970b4afed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=7Kcf3n735ZOundSEVDxMlkYDFu0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f89f47c63c5425db079a6986b749351~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=tIwQjqhpTcZ%2FF9E9nrZCnCfdRI8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">AntSK</h2>
<p>AntSK æ˜¯ä¸€ä¸ªåŸºäº .NET 9 å’Œ Blazor æŠ€æœ¯æ ˆæ„å»ºçš„ä¼ä¸šçº§AIçŸ¥è¯†åº“å’Œæ™ºèƒ½ä½“å¹³å°ï¼Œé›†æˆäº† Semantic Kernel å’Œ Kernel Memoryï¼Œæä¾›å®Œæ•´çš„AIåº”ç”¨å¼€å‘è§£å†³æ–¹æ¡ˆã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAIDotNet%2FAntSK" target="_blank" title="https://github.com/AIDotNet/AntSK" ref="nofollow noopener noreferrer">github.com/AIDotNet/Anâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6940f925ca824af2a238d97c7693c321~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=ikRfhxjUUpfoUnlw5MHkJCipRmI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0913b94e5de149cc9ebf6002fe205ab3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=bPUDCXEd7nzAPv3FM6vL3plAGIo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">OllamaSharp</h2>
<p>OllamaSharp æ—¨åœ¨é€šè¿‡æä¾›.NETç»‘å®šï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°åœ¨.NETåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Ollama APIã€‚ç®€åŒ–äº† .NET ä¸ Ollama çš„æœ¬åœ°å’Œè¿œç¨‹äº¤äº’ã€‚</p>
<ul>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fawaescher%2FOllamaSharp" target="_blank" title="https://github.com/awaescher/OllamaSharp" ref="nofollow noopener noreferrer">github.com/awaescher/Oâ€¦</a></li>
<li>åœ¨çº¿æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Follama%2Follama%2Fblob%2Fmain%2Fdocs%2Fapi.md" target="_blank" title="https://github.com/ollama/ollama/blob/main/docs/api.md" ref="nofollow noopener noreferrer">github.com/ollama/ollaâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef628a92ca64421981c65fd2a6c347e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765895905&amp;x-signature=g91D1OTExi53sH1WyvG2gc8DJro%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>æœ¬æ–‡æ‰€æœ‰é¡¹ç›®éƒ½å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‡å¦‚ä½ æœ‰æ›´å¥½çš„æ¨èï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡</strong>ğŸ¤ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ™æ±Ÿå¤´éƒ¨åŸå•†è¡Œï¼šæ¯æ—¥ 700 ä¸‡æŸ¥è¯¢ã€ç§’çº§å“åº”ï¼ŒApache Doris æŸ¥ç®—åˆ†ç¦»æ¶æ„ç ´å±€èµ„æºå†²çª]]></title>    <link>https://juejin.cn/post/7581688255625707572</link>    <guid>https://juejin.cn/post/7581688255625707572</guid>    <pubDate>2025-12-09T14:58:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581688255625707572" data-draft-id="7581728606307057716" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ™æ±Ÿå¤´éƒ¨åŸå•†è¡Œï¼šæ¯æ—¥ 700 ä¸‡æŸ¥è¯¢ã€ç§’çº§å“åº”ï¼ŒApache Doris æŸ¥ç®—åˆ†ç¦»æ¶æ„ç ´å±€èµ„æºå†²çª"/> <meta itemprop="keywords" content="Apache,æ•°æ®åº“,åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T14:58:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ™æ±Ÿå¤´éƒ¨åŸå•†è¡Œï¼šæ¯æ—¥ 700 ä¸‡æŸ¥è¯¢ã€ç§’çº§å“åº”ï¼ŒApache Doris æŸ¥ç®—åˆ†ç¦»æ¶æ„ç ´å±€èµ„æºå†²çª
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:58:38.000Z" title="Tue Dec 09 2025 14:58:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å½“å‰é“¶è¡Œä¸šåŠ¡å…¨é¢çº¿ä¸ŠåŒ–ã€å®æ—¶åŒ–çš„é©±åŠ¨ä¸‹ï¼Œæµ™æ±Ÿçœå¤´éƒ¨åŸå•†è¡ŒäºŸéœ€æ„å»ºä¸€ä¸ªèƒ½å¤ŸåŒæ—¶æ‰¿è½½æµ·é‡æ•°æ®åŠ å·¥ä¸é«˜å¹¶å‘å®æ—¶æŸ¥è¯¢çš„æ•°æ®å¹³å°ï¼Œä»¥æ”¯æ’‘ç²¾å‡†è¥é”€ã€å®æ—¶é£æ§å’Œæ™ºèƒ½å†³ç­–ç­‰å…³é”®ä¸šåŠ¡ã€‚</p>
<p>åœ¨è¿™ä¸€æ•°å­—åŒ–è½¬å‹è¿›ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ€ç»ˆå¼•å…¥äº† Apache Doris ä½œä¸ºæ¹–ä»“ä¸€ä½“æ¶æ„çš„æ ¸å¿ƒç»„ä»¶ã€‚Doris å‡­å€Ÿå…¶å“è¶Šçš„æŸ¥è¯¢æ€§èƒ½ã€é«˜ååã€å¯¹æ ‡å‡† SQL çš„å®Œæ•´æ”¯æŒä»¥åŠé«˜æ•ˆçš„å®æ—¶æ•°æ®æ‘„å…¥èƒ½åŠ›ï¼Œåœ¨å¤šä¸ªå€™é€‰æ–¹æ¡ˆä¸­è„±é¢–è€Œå‡ºã€‚å°¤å…¶å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå…¶æ¶æ„çš„çµæ´»åº¦åŠå¯æ‰©å±•æ€§ã€æå¤§é™ä½äº†è¿ç»´éš¾åº¦å’Œæˆæœ¬æŠ•å…¥ã€‚<strong>æˆªè‡³ç›®å‰ï¼Œæˆ‘ä»¬å·²é¡ºåˆ©å®Œæˆ 200TB+ å†å²æ•°æ®çš„å¹³æ»‘è¿ç§»ä¸è½åœ°ï¼Œä¸ºåç»­çš„æ·±åº¦åº”ç”¨å¥ å®šäº†åšå®åŸºç¡€</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f63bef9fcecb4e38962c8b6f95f1133f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897117&amp;x-signature=cZtiLPeCAlQb%2FTrqTNYoX9qHwSo%3D" alt="1-æ•´ä½“æ¶æ„å›¾.PNG" loading="lazy"/></p>
<p>ç„¶è€Œï¼Œåœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œâ€œç®—â€ï¼ˆæ‰¹é‡æ•°æ®å¤„ç†ï¼‰ä¸â€œæŸ¥â€ï¼ˆä¸šåŠ¡å®æ—¶æŸ¥è¯¢ï¼‰è¿™ä¸¤ç§è´Ÿè½½åœ¨èµ„æºéœ€æ±‚ä¸ä¸šåŠ¡ç›®æ ‡ä¸Šçš„æ ¹æœ¬æ€§çŸ›ç›¾é€æ¸å‡¸æ˜¾ï¼Œè§£å†³è¿™ä¸€çŸ›ç›¾å·²æˆä¸ºå½“ä¸‹é¦–è¦ç›®æ ‡ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒçŸ›ç›¾ï¼šâ€œç®—â€ä¸â€œæŸ¥â€çš„èµ„æºäº‰æŠ¢</h2>
<p>å½“â€œè®¡ç®—â€å’Œâ€œæŸ¥è¯¢â€å…±ç”¨ä¸€ä¸ª Doris é›†ç¾¤æ—¶ï¼Œèµ„æºäº‰æŠ¢é—®é¢˜ååˆ†çªå‡ºã€‚ä¾‹å¦‚ï¼Œæ‰¹é‡è®¡ç®—ä»»åŠ¡ä¼šåœ¨çŸ­æ—¶é—´å†…ä¼šå ç”¨å¤§é‡ CPUã€å†…å­˜å’Œ IO èµ„æºï¼Œé›†ç¾¤è´Ÿè½½éª¤å‡ï¼Œç›´æ¥å½±å“åŒæ—¶è¿è¡Œçš„ä¸šåŠ¡æŸ¥è¯¢çš„ç¨³å®šæ€§ã€‚å…¶æ ¹æœ¬åŸå› åœ¨äºï¼š</p>
<ul>
<li><strong>â€œç®—â€çš„æ ¸å¿ƒæ˜¯ååé‡ä¸ä»»åŠ¡äº¤ä»˜</strong>ã€‚æ•°ä»“ä¸“æ³¨äºå¤§è§„æ¨¡æ•°æ®çš„æ‰¹é‡åŠ å·¥ï¼ˆå¦‚ETLã€æ•°æ®æ¸…æ´—ä¸èšåˆè®¡ç®—ï¼‰ï¼Œéœ€è¦åœ¨æœ‰é™èµ„æºä¸‹é«˜æ•ˆå¤„ç†TB/PBçº§æ•°æ®ï¼Œç¡®ä¿ä»»åŠ¡åœ¨ä¸šåŠ¡æ—¶é—´çª—å£å†…å®Œæˆã€‚å…¶å…³é”®æŒ‡æ ‡æ˜¯ä»»åŠ¡æˆåŠŸç‡ä¸äº§å‡ºæ—¶æ•ˆï¼Œè€Œå¯¹å•ä¸ªä»»åŠ¡çš„å“åº”æ—¶é—´å¹¶ä¸æ•æ„Ÿï¼Œåªè¦èƒ½åœ¨ä¸šåŠ¡å…è®¸çš„æ—¶é—´çª—å£å†…äº¤ä»˜ç»“æœï¼Œå³ä¾¿è€—æ—¶æ•°å°æ—¶äº¦å¯æ¥å—ã€‚</li>
<li><strong>â€œæŸ¥â€çš„æ ¸å¿ƒæ˜¯å“åº”é€Ÿåº¦ä¸æœåŠ¡å¯ç”¨æ€§</strong>ã€‚å®ƒç›´æ¥é¢å‘ä¸€çº¿ä¸šåŠ¡ç«¯ï¼ˆå¦‚å®æ—¶é£æ§ã€å®¢æˆ·ç”»åƒã€ç»è¥æŠ¥è¡¨ï¼‰ï¼Œé€šå¸¸æ˜¯å¯¹æ•°ä»“åŠ å·¥åçš„ç»“æœæ•°æ®è¿›è¡Œå³æ—¶æŸ¥è¯¢ï¼Œå¯¹æŸ¥è¯¢å“åº”é€Ÿåº¦å’Œé«˜å¯ç”¨æœ‰ç€ä¸¥æ ¼è¦æ±‚â€”â€”ä¸šåŠ¡äººå‘˜å¾€å¾€éœ€è¦åœ¨ç§’çº§ç”šè‡³æ¯«ç§’çº§è·å–æŸ¥è¯¢ç»“æœï¼Œä¸”ä¸èƒ½å‡ºç°å› é›†ç¾¤é—®é¢˜å¯¼è‡´çš„æŸ¥è¯¢ä¸­æ–­ï¼Œå¦åˆ™ä¼šç›´æ¥å½±å“ä¸šåŠ¡æ­£å¸¸è¿è½¬ã€‚</li>
</ul>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆï¼šæŸ¥ç®—åˆ†ç¦»æ¶æ„è®¾è®¡</h2>
<p>æ­£å› å¦‚æ­¤ï¼Œæˆ‘ä»¬æ„è¯†åˆ°ï¼Œ<strong>è¦å…¼é¡¾æ•°æ®ä»“åº“â€œè®¡ç®—â€çš„æ•ˆç‡ä¸ä¸šåŠ¡â€œæŸ¥è¯¢â€çš„æ€§èƒ½ï¼Œâ€œæŸ¥ç®—åˆ†ç¦»â€æ¶æ„æ˜¯å¿…ç„¶ä¹‹é€‰</strong>ã€‚è¯¥æ¶æ„æ—¨åœ¨å°†â€œè®¡ç®—â€å’Œâ€œæŸ¥è¯¢â€çš„è´Ÿè½½æ‹†åˆ†åˆ°ä¸åŒçš„é›†ç¾¤ä¸­ï¼Œä½¿å®ƒä»¬åœ¨å„è‡ªä¸“å±çš„èµ„æºç¯å¢ƒä¸‹è¿è¡Œã€‚è¿™æ ·æ—¢èƒ½å¤Ÿå……åˆ†å‘æŒ¥æ•°æ®ä»“åº“çš„è®¡ç®—èƒ½åŠ›ï¼Œåˆèƒ½ç¡®ä¿ä¸šåŠ¡æŸ¥è¯¢çš„å“åº”æ—¶é—´å’Œç¨³å®šæ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77a0e6418dbc4fcf8f35eb075058a46b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897117&amp;x-signature=dQcplujt8sVTy0n6PN6PA3wxORs%3D" alt="2-è§£å†³æ–¹æ¡ˆï¼šæŸ¥ç®—åˆ†ç¦»æ¶æ„è®¾è®¡.PNG" loading="lazy"/></p>
<p>ç»“åˆä¸Šå›¾æ‰€ç¤ºçš„å­˜ç®—åˆ†ç¦»æ¶æ„ï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹å››ä¸ªæ–¹é¢çš„è®¾è®¡ï¼Œç³»ç»Ÿæ€§åœ°å®ç°äº†æŸ¥ç®—åˆ†ç¦»ç›®æ ‡ï¼š</p>
<ol>
<li><strong>æŸ¥è¯¢ä½å»¶è¿Ÿä¿éšœ</strong>ï¼š
ä¸ºç¡®ä¿æŸ¥è¯¢çš„ä½å»¶è¿Ÿï¼Œåœ¨ Doris ä¸­éƒ¨ç½²äº†ç‹¬ç«‹çš„æŸ¥è¯¢é›†ç¾¤ï¼Œå®ç°ä¸è®¡ç®—é›†ç¾¤çš„ç‰©ç†èµ„æºéš”ç¦»ï¼Œä»æ ¹æœ¬ä¸Šé¿å…æ‰¹é‡ä»»åŠ¡å¯¹çº¿ä¸ŠæŸ¥è¯¢çš„å¹²æ‰°ã€‚</li>
<li><strong>æ•°æ®å®æ—¶åŒæ­¥</strong>ï¼š
ä¸ºæ‰“é€šè®¡ç®—ä¸æŸ¥è¯¢é›†ç¾¤ä¹‹é—´çš„æ•°æ®é“¾è·¯ï¼Œå¼•å…¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.selectdb.com%2Fblog%2F112" target="_blank" title="https://www.selectdb.com/blog/112" ref="nofollow noopener noreferrer">è·¨é›†ç¾¤æ•°æ®å¤åˆ¶åŠŸèƒ½ CCR</a>ï¼Œå®ç°è¡¨çº§æ•°æ®çš„è¿‘å®æ—¶åŒæ­¥ã€‚<strong>CCR åŸºäº Doris Binlog çš„å¢é‡ç‰©ç†å¤åˆ¶æœºåˆ¶ï¼Œå¯ç¡®ä¿æ•°æ®äº§å‡ºåå¿«é€ŸåŒæ­¥è‡³æŸ¥è¯¢é›†ç¾¤ï¼Œä¸”ä¸å½±å“çº¿ä¸ŠæŸ¥è¯¢æ€§èƒ½ã€‚åŸºäºè¯¥èƒ½åŠ›ï¼Œå·²æˆåŠŸä¸Šçº¿ 500 å¼ è¡¨ã€30TB æ•°æ®ï¼Œ åœ¨è·‘æ‰¹é«˜å³°æœŸä¸»ä»å»¶è¿Ÿä¹Ÿèƒ½æ§åˆ¶åœ¨ 15 åˆ†é’Ÿå†…</strong>ã€‚</li>
<li><strong>é«˜å¯ç”¨ä¸å®¹ç¾</strong>ï¼š
æˆ‘ä»¬æ„å»ºäº†åŒé›†ç¾¤çƒ­å¤‡ä½“ç³»ï¼Œæ—¥å¸¸å°† 95% çš„æŸ¥è¯¢æµé‡å¯¼å‘æŸ¥è¯¢é›†ç¾¤ï¼Œ5% æµé‡åˆ†æµè‡³è®¡ç®—é›†ç¾¤ã€‚é€šè¿‡æŒç»­çš„æµé‡å‹æµ‹ï¼Œç¡®ä¿ä¸¤é›†ç¾¤éšæ—¶å…·å¤‡æ•…éšœåˆ‡æ¢èƒ½åŠ›ã€‚</li>
<li><strong>æˆæœ¬æŠ•å…¥æ§åˆ¶</strong>ï¼š
åœ¨ä¿éšœæŸ¥è¯¢æ€§èƒ½çš„å‰æä¸‹ï¼Œä¸ºæ§åˆ¶æ•´ä½“æŠ•å…¥ï¼Œæˆ‘ä»¬åœ¨è®¡ç®—é›†ç¾¤ä¸­åˆ›å»ºäº†ä¸æŸ¥è¯¢é›†ç¾¤è§„æ ¼ç›¸è¿‘çš„ Workload Groupï¼ˆæŸ¥è¯¢ WGï¼‰ï¼Œå¹¶è®¾ç½®èµ„æºè½¯é™åˆ¶ç­–ç•¥ï¼Œå…è®¸ ETL ä»»åŠ¡å¼¹æ€§å¤ç”¨å…¶é—²ç½®èµ„æºã€‚è¯¥è®¾è®¡åœ¨å¸¸æ€ä¸‹æ˜¾è‘—èŠ‚çº¦èµ„æºï¼Œå°½ç®¡æç«¯æ•…éšœåœºæ™¯ä¸‹å…¨é‡åˆ‡æµå¯èƒ½å¼•å‘çŸ­æš‚æ€§èƒ½æ³¢åŠ¨ï¼Œä½†å‘ç”Ÿæ¦‚ç‡æä½ï¼Œé£é™©æ•´ä½“å¯æ§ã€‚</li>
</ol>
<h2 data-id="heading-2">ä¼˜åŒ–å®è·µï¼šæ€§èƒ½æå‡ç™¾å€ã€ CPU æ¶ˆè€—ä»… 10%</h2>
<p>æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–å‘æ¥å°±æ˜¯ä¸€ä¸ªå¤æ‚çš„è¯¾é¢˜ï¼Œå®ƒä¸ SQL è¯­å¥å†™æ³•ã€æ•°æ®é‡çš„å¤§å°ã€å»ºè¡¨çš„è®¾è®¡ç­‰å¤šä¸ªå› ç´ å…±åŒå½±å“ï¼Œéš¾ä»¥ä¸€è¹´è€Œå°±ã€‚åœ¨ä¸šåŠ¡ä»åŸæœ‰ç³»ç»Ÿè¿ç§»è‡³æ–°ç¯å¢ƒæ—¶ï¼Œ æˆ‘ä»¬æš‚æœªé’ˆå¯¹ Doris è¿›è¡Œä¼˜åŒ–ï¼Œå› æ­¤åœ¨ä¸šåŠ¡ä¸Šçº¿åˆæœŸé­é‡æ€§èƒ½æŒ‘æˆ˜ï¼šé›†ç¾¤ QPS ä»…ç»´æŒåœ¨ 10 å·¦å³ï¼Œè€Œ CPU æ¶ˆè€—å´é«˜è¾¾ 90%ã€‚è¿™æ ·çš„è¡¨ç°æ˜¾ç„¶æ— æ³•æ»¡è¶³ä¸šåŠ¡æ­£å¸¸è¿è½¬çš„éœ€æ±‚ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä»åˆ†åŒºè£å‰ªã€è®°å½•è¿‡æ»¤ã€å¹¶å‘æ‰§è¡Œå’ŒæŸ¥è¯¢ç»“æœè·å–è¿™å››ä¸ªç»´åº¦è¿›è¡Œå…¨é¢çš„ä¼˜åŒ–ã€‚ä¼˜åŒ–åï¼Œ<strong>æŸ¥è¯¢æ€§èƒ½ç›¸æ¯”ä¹‹å‰æå‡ç™¾å€</strong>ï¼›åœ¨ç›¸åŒè´Ÿè½½ä¸‹ï¼Œ<strong>é›†ç¾¤ CPU æ¶ˆè€—ä» 90% ä¸‹é™åˆ° 10% å†…</strong>ï¼Œæ•ˆæœååˆ†æ˜¾è‘—ã€‚åœ¨è¿™æ¬¡ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œç§¯ç´¯äº†ä¸å°‘å®ç”¨ç»éªŒï¼Œåœ¨æ­¤åˆ†äº«ç»™å¤§å®¶ã€‚</p>
<p><strong>01 æ‹†åˆ†æŸ¥è¯¢ SQL ã€ä¼˜åŒ–åˆ†åŒºè£å‰ªï¼ŒæŸ¥è¯¢æ€§èƒ½æå‡ 6 å€</strong></p>
<p>ä¸‹æ–¹ä»£ç å—å±•ç¤ºäº†æˆ‘ä»¬æœ€å¸¸è§çš„ SQL æ¨¡æ¿ï¼Œå…¶å…¸å‹ç‰¹å¾æ˜¯æ ¹æ® <code>etl_job_flag</code> è¡¨ä¸­è®°å½•çš„æ•°æ®äº§å‡ºæ—¶é—´ç­›é€‰æœ€æ–°çš„ä¸šåŠ¡æ•°æ®ã€‚ç”±äºåˆ†åŒºå­—æ®µ <code>data_dt</code> çš„æŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªå­æŸ¥è¯¢ï¼Œå¯¼è‡´ Doris åœ¨æ‰§è¡Œæ—¶æ— æ³•åŠ¨æ€è£å‰ªåˆ†åŒºï¼Œåªèƒ½æ‰«ææ‰€æœ‰å†å²åˆ†åŒºï¼Œä»è€Œäº§ç”Ÿå¤§é‡æ— æ•ˆ IOã€‚</p>
<p>æˆ‘ä»¬å¯¹å…¶è¿›è¡Œäº†ä¼˜åŒ–ï¼Œé¦–å…ˆå°†æŸ¥è¯¢ SQL æ‹†åˆ†æˆä¸¤æ¡ SQL è¯­å¥ï¼Œå…ˆè·å–æ•°æ®äº§å‡ºæ—¶é—´ï¼Œå†æŸ¥è¯¢ç›®æ ‡æ•°æ®ã€‚å…¶æ¬¡å°†åˆ†åŒºå­—æ®µ <code>data_dt</code> çš„æ¡ä»¶è°ƒæ•´ä¸ºå¸¸é‡ï¼Œé™åˆ¶å…¶åªæ‰«æä¸€ä¸ªåˆ†åŒºã€‚<strong>é€šè¿‡è¯¥ä¼˜åŒ–ï¼Œå®ç°äº†æŸ¥è¯¢æ€§èƒ½ 6 å€çš„æå‡</strong>ã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-operator">/</span><span class="hljs-operator">/</span>  åŸå§‹ <span class="hljs-keyword">SQL</span>
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t <span class="hljs-keyword">where</span> data_dt <span class="hljs-operator">=</span> (<span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(data_dt) <span class="hljs-keyword">from</span> etl_job_flag wehre etl_table <span class="hljs-operator">=</span><span class="hljs-string">'t'</span>) <span class="hljs-keyword">and</span>  å…¶ä»–è¿‡æ»¤æ¡ä»¶

<span class="hljs-operator">/</span><span class="hljs-operator">/</span>  ä¼˜åŒ–å <span class="hljs-keyword">SQL</span>
<span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(busi_dt) <span class="hljs-keyword">from</span> etl_job_flag <span class="hljs-keyword">where</span>  etl_table <span class="hljs-operator">=</span> <span class="hljs-string">'t'</span>
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t  <span class="hljs-keyword">where</span> data_dt  <span class="hljs-operator">=</span> xxx <span class="hljs-keyword">and</span> å…¶ä»–è¿‡æ»¤æ¡ä»¶
</code></pre>
<p><strong>02 åˆç†è®¾è®¡ Key å’Œç´¢å¼•ï¼ŒæŸ¥è¯¢æ€§èƒ½æå‡ 6-7 å€</strong></p>
<p>Doris çš„è®°å½•è¿‡æ»¤éµå¾ªâ€œæˆæœ¬ä»ä½åˆ°é«˜â€çš„é¡ºåºï¼Œä¾æ¬¡ä¸º Key Range ã€ç´¢å¼•è¿‡æ»¤ã€ ZoneMap å’Œ BloomFilter ç­‰è½»é‡çº§è¿‡æ»¤ï¼Œæœ€åæ‰§è¡Œè°“è¯è¯„ä¼°ã€‚ç”±æ­¤å¯çŸ¥ï¼Œåˆç†è®¾è®¡ Key å’Œç´¢å¼•æ˜¯æå‡ç­›é€‰æ•ˆç‡çš„å…³é”®ã€‚åœ¨å®è·µä¸­ï¼Œé€šè¿‡è¡¥å……åˆé€‚çš„ Key å’Œç´¢å¼•ï¼Œ<strong>æŸ¥è¯¢æ€§èƒ½è·å¾— 6-7 å€çš„æå‡</strong>ã€‚</p>
<p>ä»¥ç”¨æˆ·ä¿¡æ¯è¡¨ <code>user_info</code> ä¸ºä¾‹ï¼š</p>
<ul>
<li>å°†é«˜é¢‘æŸ¥è¯¢å­—æ®µ <code>user_id</code>è®¾ä¸º Unique Key å’Œåˆ†æ¡¶å­—æ®µï¼Œä»¥åˆ©ç”¨ Key Range å¿«é€Ÿå®šä½æ•°æ®èŒƒå›´ã€‚</li>
<li>å¯¹æ¬¡é«˜é¢‘æŸ¥è¯¢å­—æ®µ <code>user_name</code>å»ºç«‹å€’æ’ç´¢å¼•ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li>æ§åˆ¶åˆ†æ¡¶å¤§å°åœ¨ 1Gï½10Gï¼Œå‡å°‘ segment æ–‡ä»¶æ•°é‡ï¼Œæå‡å€’æ’ç´¢å¼•æŸ¥è¯¢é€Ÿåº¦ï¼ˆDoris æ¯ä¸ª segment æ–‡ä»¶å¯¹åº”ç‹¬ç«‹çš„å€’æ’ç´¢å¼•ï¼‰ã€‚</li>
</ul>
<p><strong>03 å‚æ•°è°ƒè¯•ï¼Œ æŸ¥è¯¢ååç‡æå‡ 2-3 å€</strong></p>
<p>é«˜å¹¶å‘å’Œä½å“åº”æ—¶é—´æ˜¯æŸ¥è¯¢é›†ç¾¤çš„æ ¸å¿ƒéœ€æ±‚ï¼Œé€‚å½“è°ƒæ•´ Doris çš„æ‰§è¡Œç›¸å…³å‚æ•°å¯æœ‰æ•ˆæå‡æŸ¥è¯¢ååé‡</p>
<ul>
<li><code>parallel_pipeline_task_num</code>ï¼šPipeline task æ˜¯ Doris æ‰§è¡Œè°ƒåº¦çš„åŸºæœ¬å•å…ƒï¼Œ<code>parallel_pipeline_task_num</code> å†³å®šäº†å•ä¸ªæŸ¥è¯¢çš„æœ€å¤§å¹¶å‘åº¦ã€‚è¯¥å‚æ•°çš„é»˜è®¤å€¼ä¸º 0ï¼Œå³ BE CPU æ ¸å¿ƒæ•°çš„ä¸€åŠã€‚</li>
<li><code>num_scanner_threads</code>ï¼šScan ç®—å­è´Ÿè´£æ•°æ®æ‰«æï¼Œä¸º Pipeline task æä¾›æ•°æ®ã€‚<code>num_scanner_threads</code> æ˜¯å•ä¸ª Scan ç®—å­ä¸€æ¬¡æ€§æäº¤åˆ° Scan çº¿ç¨‹æ± çš„ä»»åŠ¡æ•°é‡ï¼Œå®ƒç›´æ¥å½±å“æŸ¥è¯¢æ‰«ææ•°æ®çš„å¹¶å‘åº¦ã€‚è¯¥å‚æ•°é»˜è®¤å€¼ä¹Ÿä¸º 0ï¼ŒåŠ¨æ€è®¡ç®—ã€‚</li>
</ul>
<p>å¦‚æœå°†ä¸¤ä¸ªå‚æ•°çš„é»˜è®¤å€¼è®¾ç½®ä¸ºé«˜å€¼ï¼Œå¯èƒ½å¯¼è‡´å•ä¸€æŸ¥è¯¢å ç”¨è¿‡å¤šèµ„æºï¼Œè¿›è€Œå¼•å‘ CPU ç¼“å­˜æ±¡æŸ“ã€‚æ ¹æ®å®é™…åº”ç”¨ç»éªŒä»¥åŠæµ‹è¯•ç»“æœï¼Œå»ºè®®å¯å°† <code>parallel_pipeline_task_num</code> è®¾ç½®ä¸º 8ï¼Œå°† <code>num_scanner_threads</code> è®¾ç½®ä¸º 2ï¼Œ<strong>æŸ¥è¯¢ååç‡å¯æå‡ 2 - 3 å€</strong>ã€‚æ­¤å¤„ä½œä¸ºå‚è€ƒï¼Œå…·ä½“æ•°å€¼å¯æ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µæ¥è°ƒæ•´ã€‚</p>
<p><strong>04  å¼€å¯è¡Œå­˜ã€é™ä½ IO å¼€é”€ï¼ŒæŸ¥è¯¢æ€§èƒ½æå‡ 30%</strong></p>
<p>åœ¨ä¸šåŠ¡ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤§é‡ <code>SELECT *</code> çš„å…¨åˆ—æŸ¥è¯¢ï¼ŒDoris å°†é»˜è®¤é‡‡ç”¨æŒ‰åˆ—å­˜å‚¨çš„æ–¹å¼ï¼Œè¯¥æ–¹å¼éœ€è¦è¯»å–æ‰€æœ‰åˆ—å¹¶æ‹¼æ¥æˆè¡Œè¿”å›ã€‚è€Œå¯¹äºå­—æ®µè¾ƒå¤šçš„è¡¨ï¼Œè¿™å¹¶ä¸æ˜¯æœ€ä½³å¤„ç†æ–¹å¼ï¼Œä¼šå¯¼è‡´æé«˜çš„ IO æˆæœ¬ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬åœ¨å»ºè¡¨æˆ–ä¿®æ”¹è¡¨æ—¶é…ç½® <code>"store_row_column" = "true"</code>ï¼Œå¼€å¯è¡Œå­˜æ¨¡å¼ã€‚é¿å…äº†å¤šåˆ—æ‹¼æ¥çš„é¢å¤–å¼€é”€ï¼Œ<strong>æŸ¥è¯¢æ€§èƒ½æå‡çº¦ 30%</strong>ã€‚</p>
<h2 data-id="heading-3">ä¼˜åŒ–åˆ©å™¨ï¼šæ…¢æŸ¥è¯¢ç›‘æµ‹ + æ€§èƒ½å‹æµ‹</h2>
<p><strong>01 æŠ¥è¡¨ + Profileï¼Œå…¨å±€è§‚æµ‹æ…¢æŸ¥è¯¢</strong></p>
<p>åœ¨æ€§èƒ½ä¼˜åŒ–ä¸­ï¼Œæ…¢æŸ¥è¯¢ç›‘æµ‹ä¸ºæˆ‘ä»¬æä¾›äº†å…³é”®çš„æ•°æ®æ´å¯Ÿã€‚é€šè¿‡å¯¹æ…¢æŸ¥è¯¢çš„æŒç»­è¿½è¸ªä¸åˆ†æï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿå®šä½æ ¹å› ã€å®æ–½é’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œå¹¶æœ€ç»ˆéªŒè¯ç­–ç•¥çš„æœ‰æ•ˆæ€§ï¼Œç¡®ä¿æˆ‘ä»¬çš„å·¥ä½œå§‹ç»ˆæœç€æ­£ç¡®çš„æ–¹å‘æ¨è¿›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a29113ce156a4a67894fd9ec71f3d465~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897117&amp;x-signature=XgLjH492%2BSTl%2F9H%2BmDNANoe%2FklA%3D" alt="3-ä¼˜åŒ–åˆ©å™¨ï¼šæ…¢æŸ¥è¯¢ç›‘æµ‹ + æ€§èƒ½å‹æµ‹.png" loading="lazy"/></p>
<p>ä½œä¸ºç›‘æ§é›†ç¾¤æŸ¥è¯¢çŠ¶æ€çš„æ ¸å¿ƒå…¥å£ï¼Œ<strong>æŸ¥è¯¢æŠ¥è¡¨åœ¨å…¨å±€è§‚æµ‹ä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²</strong>ã€‚å®ƒåŸºäºå®¡è®¡æ—¥å¿—ï¼ˆAudit logï¼‰åŠå…¶ä»–ç³»ç»Ÿè¡¨æ„å»ºï¼ŒåŒ…æ‹¬æ…¢æŸ¥è¯¢æ¦œå•ã€å“åº”æ—¶é—´ç»Ÿè®¡å’Œé”™è¯¯ç»Ÿè®¡ç­‰ä¿¡æ¯ã€‚</p>
<p><strong>Doris Profile èƒ½å¤Ÿè¯¦ç»†è®°å½•æŸ¥è¯¢æ‰§è¡Œçš„ç»Ÿè®¡ä¿¡æ¯</strong>ï¼ŒåŒ…æ‹¬æ‰§è¡Œè®¡åˆ’ã€æ¯ä¸ªç®—å­çš„è€—æ—¶å’Œæ•°æ®æ‰«æé‡ç­‰ï¼Œä¸ºå®šä½æŸ¥è¯¢æ€§èƒ½é—®é¢˜æä¾›äº†å…³é”®ä¾æ®ã€‚Doris é»˜è®¤çš„ Profile å­˜å‚¨æœºåˆ¶æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œé»˜è®¤ä¿ç•™ 500 ä¸ªï¼›è€Œæˆ‘ä»¬å› ä¸šåŠ¡éœ€æ±‚ï¼Œéœ€å¯¹ 3 å¤©å†…å†å²æŸ¥è¯¢é—®é¢˜è¿›è¡Œä¿ç•™ï¼Œä»¥ä¾¿é—®é¢˜è¿½æº¯ã€‚å› æ­¤ï¼Œ<strong>æˆ‘ä»¬åŸºäº Doris Profile å¼€å‘äº† Profile å½’æ¡£æœåŠ¡</strong>ã€‚</p>
<p><strong>å…·ä½“å·¥ä½œåŸç†ä¸º</strong>ï¼šå½“æŸ¥è¯¢æŠ¥è¡¨è¯†åˆ«å‡ºæ…¢æŸ¥è¯¢æ—¶ï¼ŒProfile å½’æ¡£æœåŠ¡ä¼šè‡ªåŠ¨ä» Doris é›†ç¾¤ä¸‹è½½å¯¹åº”çš„ Profile æ–‡ä»¶å¹¶ä¿å­˜è‡³æœ¬åœ°ï¼ŒåŒæ—¶ç”Ÿæˆä¸“å±çš„ HTTP é“¾æ¥ã€‚ç®¡ç†å‘˜åœ¨æµè§ˆæ…¢æŸ¥è¯¢æŠ¥è¡¨æ—¶ï¼Œåªéœ€ç‚¹å‡»é“¾æ¥ï¼Œå³å¯ç›´æ¥æŸ¥çœ‹å¯¹åº”çš„å®Œæ•´ Profileï¼Œæ— éœ€æ‹…å¿ƒå› å†…å­˜ä¸­ Profile è¢«æ¸…ç†è€Œå¤±å»å…³é”®è¯Šæ–­ä¿¡æ¯ï¼Œä»è€Œæ˜¾è‘—æå‡å†å²é—®é¢˜è¿½æº¯çš„æ•ˆç‡ã€‚</p>
<p>æˆ‘ä»¬å·²åœ¨é›†ç¾¤å…¨å±€å¯ç”¨ Profile åŠŸèƒ½ï¼Œå¹¶å°† <code>auto_profile_threshold_ms</code> è®¾ç½®ä¸º 1000msï¼Œè¿™æ„å‘³ç€æ‰€æœ‰æ‰§è¡Œæ—¶é•¿è¶…è¿‡ 1 ç§’çš„æŸ¥è¯¢éƒ½ä¼šè‡ªåŠ¨è®°å½• Profileï¼Œä¸ºåç»­åˆ†ææä¾›å……åˆ†çš„è¯Šæ–­ä¾æ®ã€‚</p>
<p>æŸ¥è¯¢æŠ¥è¡¨ä¸ Profile çš„è”åŠ¨ï¼Œæ„å»ºäº†ä¸€å¥—é«˜æ•ˆçš„æ€§èƒ½ä¼˜åŒ–é—­ç¯ã€‚ä¸€æ—¦é›†ç¾¤å‡ºç°å¼‚å¸¸ï¼ŒæŠ¥è¡¨ä¼šé€šè¿‡å†…éƒ¨ IM è‡ªåŠ¨å‘Šè­¦ï¼Œç®¡ç†å‘˜éšå³é’ˆå¯¹æ…¢æŸ¥è¯¢æ¦œå•ï¼Œå€ŸåŠ© Profile è¿›è¡Œæ·±åº¦åˆ†æã€ç²¾å‡†å®šä½ç“¶é¢ˆã€‚æ•´ä¸ªè¿‡ç¨‹å½¢æˆäº†ä»å‘ç°é—®é¢˜ã€ç²¾å‡†å®šä½åˆ°è§£å†³è·Ÿè¸ªçš„å®Œæ•´é—­ç¯ã€‚</p>
<p><strong>02 æŸ¥è¯¢å‹æµ‹å·¥å…·ï¼Œå®¹é‡è¯„ä¼°æ¨¡æ‹Ÿå™¨</strong></p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬åŸºäº Python å¼€å‘äº†æŸ¥è¯¢å‹æµ‹å·¥å…·ï¼Œç”¨äºä¸Šçº¿æ–°ä¸šåŠ¡ã€æ‰©å®¹é›†ç¾¤æˆ–ä¼˜åŒ–é…ç½®ä¹‹å‰ï¼Œå‡†ç¡®è¯„ä¼° Doris é›†ç¾¤çš„æ‰¿è½½èƒ½åŠ›ã€‚</p>
<p>å…¶è®¾è®¡ç†å¿µæ˜¯è¿˜åŸçœŸå®è´Ÿè½½ï¼šä» Doris Audit log ä¸­æå–å†å²æŸ¥è¯¢è®°å½•ï¼Œé€šè¿‡å¤šçº¿ç¨‹éšæœºå›æ”¾çš„æ–¹å¼ï¼Œæ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒä¸­çš„å®é™…æŸ¥è¯¢å‹åŠ›ã€‚åœ¨å‹æµ‹è¿‡ç¨‹ä¸­ï¼Œå·¥å…·ä¼šå®æ—¶ç»Ÿè®¡æŸ¥è¯¢ååé‡ã€å“åº”æ—¶é—´åˆ†å¸ƒç­‰å…³é”®æŒ‡æ ‡ã€‚é€šè¿‡è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè¯„ä¼°é›†ç¾¤çš„å®¹é‡ä¸Šé™ï¼Œæˆ–éªŒè¯ä¼˜åŒ–æªæ–½çš„æœ‰æ•ˆæ€§ï¼Œä¸ºé›†ç¾¤çš„èµ„æºè§„åˆ’ä¸æ¶æ„è°ƒæ•´æä¾›é‡è¦ä¾æ®ã€‚</p>
<h2 data-id="heading-4">ç»“æŸè¯­</h2>
<p>é€šè¿‡ä»¥ä¸Šä¼˜åŒ–ï¼Œ<strong>Doris æŸ¥è¯¢é›†ç¾¤ä¸ä»…å®ç°äº†æ¯æ—¥è¶… 700 ä¸‡æ¬¡æŸ¥è¯¢çš„ç¨³å®šè¿è¡Œï¼Œ99.95% çš„æŸ¥è¯¢å“åº”æ—¶é—´å‡åœ¨ 1 ç§’ä»¥å†…ï¼Œæ›´åœ¨å‹æµ‹ä¸­è¾¾åˆ°äº† 1500 QPS</strong>ï¼Œå……åˆ†éªŒè¯äº†å…¶å·²å…·å¤‡æ”¯æ’‘å®æ—¶æŸ¥è¯¢çš„é«˜æ€§èƒ½ä¸é«˜ç¨³å®šæ€§ï¼Œä¸º Doris åœ¨æ¹–ä»“ä¸€ä½“å¹³å°ä¸­æ·±åº¦åº”ç”¨ä¸­æ‰«æ¸…å…³é”®éšœç¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»Šå¤œï¼Œæ™ºè°±æŠŠâ€œæ‰‹æœºè´¾ç»´æ–¯â€çš„æºä»£ç ï¼Œæ‰”åˆ°äº†GitHubä¸Š]]></title>    <link>https://juejin.cn/post/7581698635865604122</link>    <guid>https://juejin.cn/post/7581698635865604122</guid>    <pubDate>2025-12-09T15:00:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698635865604122" data-draft-id="7581698635865587738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»Šå¤œï¼Œæ™ºè°±æŠŠâ€œæ‰‹æœºè´¾ç»´æ–¯â€çš„æºä»£ç ï¼Œæ‰”åˆ°äº†GitHubä¸Š"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-09T15:00:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»Šå¤œï¼Œæ™ºè°±æŠŠâ€œæ‰‹æœºè´¾ç»´æ–¯â€çš„æºä»£ç ï¼Œæ‰”åˆ°äº†GitHubä¸Š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T15:00:33.000Z" title="Tue Dec 09 2025 15:00:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´12æœˆ9æ—¥ï¼Œç§‘æŠ€åœˆå‘ç”Ÿäº†ä¸€ä»¶å¯èƒ½ä¼šè¢«è½½å…¥AIå‘å±•å²çš„å¤§äº‹ã€‚</p>
<p>å½“å¤§éƒ¨åˆ†äººè¿˜åœ¨è®¨è®ºå“ªå®¶çš„å¤§æ¨¡å‹å†™è¯—æ›´æŠ¼éŸµæ—¶ï¼Œæ™ºè°±AIé»˜é»˜å¹²äº†ä¸€ä»¶äº‹ï¼šä»–ä»¬æŠŠè‡ªå®¶çš„æ ¸å¿ƒAI Agentæ¨¡å‹â€”â€”AutoGLMï¼Œæ­£å¼å¼€æºäº†ã€‚</p>
<p>è¿™ä¸ä»…ä»…æ˜¯å¼€æºäº†ä¸€ä¸ªæ¨¡å‹ï¼Œæ›´åƒæ˜¯æŠŠä¸€æŠŠé€šå¾€â€œçœŸÂ·æ™ºèƒ½æ‰‹æœºâ€æ—¶ä»£çš„é’¥åŒ™ï¼Œäº¤åˆ°äº†æ¯ä¸€ä¸ªå¼€å‘è€…ï¼Œç”šè‡³æ˜¯æ™®é€šç©å®¶æ‰‹é‡Œã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fasdasf-1.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/asdasf-1.webp" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3d85c176f01409eb4443c924789aaa0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897233&amp;x-signature=NGPImYzvseZJKORyivXGpSYr%2BZg%3D" alt="asdasf" loading="lazy"/></a></p>
<h3 data-id="heading-0">çœŸçš„èƒ½çœ‹æ‡‚å±å¹•çš„AI</h3>
<p>å…ˆåˆ«æ€¥ç€åˆ’èµ°ï¼Œæˆ‘ä»¬å¾—ææ¸…æ¥šAutoGLMå’ŒSiriã€å°çˆ±åŒå­¦åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</p>
<p>ä¼ ç»Ÿçš„è¯­éŸ³åŠ©æ‰‹ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨è°ƒç”¨APPæä¾›çš„æ¥å£ã€‚å¦‚æœAPPä¸å¼€æ¥å£ï¼ŒåŠ©æ‰‹å°±æ˜¯ä¸ªçå­ã€‚ä½†AutoGLMèµ°çš„æ˜¯ä¸€æ¡å®Œå…¨æ‹Ÿäººçš„è·¯å­ï¼š<strong>è§†è§‰ç†è§£</strong>ã€‚</p>
<p>ç®€å•è¯´ï¼Œå®ƒåƒäººçœ¼ä¸€æ ·â€œçœ‹â€ä½ çš„æ‰‹æœºå±å¹•æˆªå›¾ï¼Œç”¨å¤§æ¨¡å‹åˆ†æç•Œé¢ä¸Šçš„æŒ‰é’®ã€æ–‡å­—ã€è¾“å…¥æ¡†åœ¨å“ªé‡Œï¼Œç„¶åé€šè¿‡ADBæŒ‡ä»¤æ¨¡æ‹Ÿæ‰‹æŒ‡çš„ç‚¹å‡»å’Œæ»‘åŠ¨ã€‚</p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€å®ƒä¸éœ€è¦å¾®ä¿¡ç»™ä½ å¼€APIï¼Œä¹Ÿèƒ½å¸®ä½ å›æ¶ˆæ¯ï¼›ä¸éœ€è¦ç¾å›¢æˆæƒï¼Œä¹Ÿèƒ½å¸®ä½ ç‚¹å¤–å–ã€‚</p>
<p>åœ¨æ™ºè°±æ”¾å‡ºçš„æ¼”ç¤ºé‡Œï¼Œè¿™ä¸ª9Bå‚æ•°é‡çš„æ¨¡å‹ï¼ˆAutoGLM-Phone-9Bï¼‰ï¼Œå·²ç»èƒ½ç†Ÿç»ƒåœ°åœ¨å¾®ä¿¡ã€æ·˜å®ã€æŠ–éŸ³ã€ç¾å›¢ç­‰50å¤šä¸ªæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ç”¨çš„APPé‡Œâ€œå†²æµªâ€ã€‚ç‚¹å¤–å–ã€è®¢æœºç¥¨ã€å‘çº¢åŒ…ï¼Œè¿™äº›éœ€è¦è·¨åº”ç”¨ã€ç”šè‡³é•¿è¾¾å‡ åæ­¥çš„æ“ä½œï¼Œå®ƒéƒ½èƒ½è‡ªå·±æå®šã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fv2-e6b5d85ff6306e3bd6990d1cca6ec2aa_r-1024x756.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/v2-e6b5d85ff6306e3bd6990d1cca6ec2aa_r-1024x756.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e22e6c80543d4f9d950ae9136e7f23b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897233&amp;x-signature=TormdyNj%2B%2Bv8DVN78bedx5G09T8%3D" alt="v2-e6b5d85ff6306e3bd6990d1cca6ec2aa_r" loading="lazy"/></a></p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆè¯´è¿™æ˜¯â€œæ€æ¡Œå­â€ï¼Ÿ</h3>
<p>åœ¨å‰æ®µæ—¶é—´ï¼Œå­—èŠ‚è·³åŠ¨çš„â€œè±†åŒ…æ‰‹æœºåŠ©æ‰‹â€åˆšè®©å¤§å®¶è§è¯†äº†AIæ“ä½œæ‰‹æœºçš„å¨åŠ›ã€‚å°±åœ¨å„å¤§å·¨å¤´å‡†å¤‡ç­‘èµ·é«˜å¢™ã€åœˆåœ°è‡ªèŒçš„æ—¶å€™ï¼Œæ™ºè°±åæ‰‹å°±æ˜¯ä¸€ä¸ªå¼€æºã€‚</p>
<p>è¿™ä¸€æ‹›ï¼Œç›´æ¥æŠŠæŠ€æœ¯é—¨æ§›æ‹‰åˆ°äº†åœ°æ¿ä¸Šã€‚</p>
<p><strong>1. æ¯ä¸ªäººéƒ½èƒ½æœ‰è‡ªå·±çš„å®šåˆ¶ç®¡å®¶</strong> å¼€æºæ„å‘³ç€ç¡¬ä»¶å‚å•†ä¸ç”¨ä»å¤´é€ è½®å­ï¼Œåå¼ºåŒ—çš„å¼€å‘è€…ã€ç”šè‡³æ˜¯ä½ æˆ‘è¿™æ ·æ‡‚ç‚¹ä»£ç çš„æå®¢ï¼Œéƒ½å¯ä»¥åŸºäºAutoGLMï¼Œä¸ºè‡ªå·±çš„è®¾å¤‡è£…ä¸Šä¸€ä¸ªâ€œå¤§è„‘â€ã€‚æƒ³åšä¸€ä¸ªä¸“é—¨å¸®ä½ æŠ¢æ¼”å”±ä¼šé—¨ç¥¨çš„Agentï¼Ÿæˆ–è€…ä¸€ä¸ªåªåœ¨è¿™ä¸ªç‚¹å¸®ä½ è‡ªåŠ¨é¢†æ¸¸æˆç­¾åˆ°å¥–åŠ±çš„è„šæœ¬ï¼Ÿç°åœ¨ï¼Œåº•åº§æœ‰äº†ã€‚</p>
<p><strong>2. éšç§ç‹‚é­”çš„ç¦éŸ³</strong> è¿™æ˜¯å¼€æºæœ€æ ¸å¿ƒçš„æ€æ‰‹é”ã€‚å¾ˆå¤šäººä¸æ•¢ç”¨äº‘ç«¯AIæ“ä½œæ‰‹æœºï¼Œæ€•éšç§æ³„éœ²ã€‚AutoGLMæ”¯æŒæœ¬åœ°éƒ¨ç½²ã€‚åªè¦ä½ çš„è®¾å¤‡è·‘å¾—åŠ¨ï¼Œæ‰€æœ‰çš„æ•°æ®å¤„ç†ã€å±å¹•è¯†åˆ«ã€æ“ä½œæŒ‡ä»¤ï¼Œå…¨éƒ¨éƒ½åœ¨ä½ æœ¬åœ°å®Œæˆï¼Œä¸éœ€è¦ä¸Šä¼ ä»»ä½•ä¸€å­—èŠ‚çš„æ•æ„Ÿä¿¡æ¯ç»™äº‘ç«¯æœåŠ¡å™¨ã€‚ä½ çš„æ‰‹æœºï¼Œå®Œå…¨ç”±ä½ æŒæ§ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-09_22.55.13-811x1024.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-09_22.55.13-811x1024.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e3bdb5386094ef38c78fcf15d03092a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897233&amp;x-signature=bu5%2BX0h7kAEjL8bpQO7DqTlkYn4%3D" alt="iShot_2025-12-09_22.55.13" loading="lazy"/></a></p>
<h3 data-id="heading-2">32ä¸ªæœˆçš„ç£¨å‰‘</h3>
<p>è¿™ä¸ªé¡¹ç›®ä¸æ˜¯ä¸€æ—¶å…´èµ·ã€‚æ®é€éœ²ï¼Œæ™ºè°±å›¢é˜Ÿä»2023å¹´4æœˆå°±å¼€å§‹æŠ˜è…¾è¿™äº‹å„¿äº†ã€‚</p>
<p>æ—©æœŸçš„ç‰ˆæœ¬å¾ˆä¸ç¨³å®šï¼Œåƒä¸ªåˆšå­¦æ­¥çš„å­©å­ï¼Œç»å¸¸ç‚¹é”™æˆ–è€…å¡ä½ã€‚ç»è¿‡32ä¸ªæœˆçš„æ‰“ç£¨ï¼Œç‰¹åˆ«æ˜¯AutoGLM 2.0ç‰ˆæœ¬ï¼Œåœ¨æ•°åƒä¸ªè™šæ‹Ÿè®¾å¤‡é‡Œè¿›è¡Œäº†å¼ºåŒ–å­¦ä¹ ï¼Œç°åœ¨çš„å®ƒå·²ç»å…·å¤‡äº†ç›¸å½“å¼ºæ‚çš„æ³›åŒ–èƒ½åŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå“ªæ€•APPæ›´æ–°äº†ï¼Œç•Œé¢å¾®è°ƒäº†ï¼Œå®ƒä¾ç„¶èƒ½è®¤å‡ºâ€œç¡®è®¤æ”¯ä»˜â€çš„æŒ‰é’®åœ¨å“ªã€‚</p>
<h3 data-id="heading-3">ä¸‹ä¸€ä»£æ‰‹æœºçš„é›å½¢</h3>
<p>æˆ‘ä»¬æ€»åœ¨å–Šâ€œAIæ‰‹æœºâ€å…ƒå¹´ï¼Œä½†å¦‚æœAIæ‰‹æœºåªæ˜¯å¤šäº†ä¸€ä¸ªç”»å›¾åŠŸèƒ½ï¼Œé‚£æœªå…å¤ªæ— èŠäº†ã€‚</p>
<p>çœŸæ­£çš„AIæ‰‹æœºï¼Œåº”è¯¥æ˜¯ä½ å¯¹å®ƒè¯´â€œå¸®æˆ‘è®¢å¼ æ˜å¤©å»ä¸Šæµ·çš„ç¥¨ï¼Œè¦é çª—â€ï¼Œç„¶åä½ å°±å¯ä»¥æŠŠæ‰‹æœºæ‰”ä¸€è¾¹å»æ´—æ¾¡ï¼Œå‡ºæ¥æ—¶ç¥¨å·²ç»å‡ºå¥½äº†ã€‚AutoGLMçš„å¼€æºï¼Œæ­£åœ¨æŠŠè¿™ä¸ªåœºæ™¯å˜æˆæ‰€æœ‰å®‰å“è®¾å¤‡çš„æ ‡é…ï¼Œè€Œä¸å†æ˜¯æŸä¸€æ¬¾æ——èˆ°æœºçš„ä¸“å±ã€‚</p>
<p>ç›®å‰ï¼Œé¡¹ç›®ä»£ç å·²ç»æ‰˜ç®¡åœ¨GitHubï¼Œæ¨¡å‹æƒé‡ä¹Ÿä¸Šäº†Hugging Faceã€‚è™½ç„¶ç°åœ¨å®ƒå¯èƒ½è¿˜ä¸å¤Ÿå®Œç¾ï¼Œå¶å°”ä¹Ÿä¼šçŠ¯å‚»ï¼Œä½†å¼€æºç¤¾åŒºçš„åŠ›é‡æ˜¯ææ€–çš„ã€‚ä¹Ÿè®¸ä¸‹å‘¨ï¼Œå°±ä¼šæœ‰å¤§ç¥é­”æ”¹å‡ºæ›´æƒŠè‰³çš„ç‰ˆæœ¬ã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯é£å£ï¼›å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œé‚£ä¸ªåƒã€Šé’¢é“ä¾ ã€‹é‡Œè´¾ç»´æ–¯ä¸€æ ·çš„ç®¡å®¶ï¼Œå¯èƒ½çœŸçš„ä¸è¿œäº†ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-09_22.55.08.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-09_22.55.08.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5ce46e99ca746499509b606a47c3b9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897233&amp;x-signature=u38J41ooWuF1Itwm8uTDpMakHgw%3D" alt="iShot_2025-12-09_22.55.08" loading="lazy"/></a></p>
<p><strong>æœ€åæä¸ªé†’ï¼š</strong> è™½ç„¶ä»£ç å¼€æºäº†ï¼Œä½†åœ¨è®©AIå¸®ä½ èŠ±é’±æˆ–è€…å‘æ¶ˆæ¯ä¹‹å‰ï¼Œè®°å¾—æŠŠé‚£ä¸ªâ€œå…³é”®æ“ä½œéœ€äººå·¥ç¡®è®¤â€çš„å¼€å…³æ‰“å¼€ã€‚æ¯•ç«Ÿï¼Œä½ ä¹Ÿä¸æƒ³ä¸€è§‰é†’æ¥ï¼Œå‘ç°AIå¸®ä½ æ¸…ç©ºäº†è´­ç‰©è½¦ï¼Œå¯¹å§ï¼Ÿ</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å±Œç‚¸å¤©ï¼ä¸€å¥è¯æå®šä¸€ä¸ªå•†ç”¨çº§çš„å•†åŸåˆ—è¡¨é¡µé¢]]></title>    <link>https://juejin.cn/post/7581676787380174867</link>    <guid>https://juejin.cn/post/7581676787380174867</guid>    <pubDate>2025-12-09T15:01:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581676787380174867" data-draft-id="7581678032336764970" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å±Œç‚¸å¤©ï¼ä¸€å¥è¯æå®šä¸€ä¸ªå•†ç”¨çº§çš„å•†åŸåˆ—è¡¨é¡µé¢"/> <meta itemprop="keywords" content="Trae,AIç¼–ç¨‹,HTML"/> <meta itemprop="datePublished" content="2025-12-09T15:01:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å±Œç‚¸å¤©ï¼ä¸€å¥è¯æå®šä¸€ä¸ªå•†ç”¨çº§çš„å•†åŸåˆ—è¡¨é¡µé¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T15:01:50.000Z" title="Tue Dec 09 2025 15:01:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ V å“¥ï¼ŒTRAE SOLO å®åœ¨å¤ªå¥½ç”¨äº†ï¼Œè¾“å…¥ä¸€å¥è¯ï¼Œå°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªä½ æƒ³è¦çš„ç¨‹åºï¼Œä¸Šä¸€ç¯‡æ–‡ç« ï¼ŒV å“¥è¯•äº†ä¸€ä¸‹ä¸€å¥è¯ç”Ÿæˆä¸€ä¸ªç®€æ˜“ç‰ˆçš„é£æœºå¤§æˆ˜ï¼Œä»Šå¤©æˆ‘ä»¬æ¥ç©ä¸€ç©ç”Ÿæˆä¸€ä¸ªå•†åŸå•†å“åˆ—è¡¨é¡µé¢ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œé©¬ä¸Šå¼€æ•´ã€‚</p>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹æœ€ç»ˆçš„æ•ˆæœå›¾ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0defe0a98df34fbc98298684e6e8a67a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897310&amp;x-signature=CfKbgLnm5%2BnA6%2BvtbpUkpYyjAhI%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆæ‰“å¼€ TRAE AI å¼€å‘å·¥å…·ï¼Œæ–°å»ºä¸€ä¸ªä»»åŠ¡ï¼Œå¦‚ä¸‹å›¾ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19088870d2554702aa7343d39c997855~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897310&amp;x-signature=Q%2F%2FsB%2BM232Na1BWfAHIHJ4BkSzw%3D" alt="" loading="lazy"/></p>
<p>åœ¨èŠå¤©çª—å£è¾“å…¥ï¼šè¯·å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªVå“¥å•†åŸçš„å•†å“åˆ—è¡¨é¡µé¢</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7963fc8cda3747cd9a73abe51bb29cbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897310&amp;x-signature=xaWVcB05fmYiTrNrg7i0DRpxvi0%3D" alt="" loading="lazy"/></p>
<p>å’”å’”å’”ï¼ŒRRAE SOLO å°±å¼€å§‹å·¥ä½œäº†ï¼Œç”Ÿæˆçš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æˆ‘éœ€è¦å…ˆäº†è§£å½“å‰é¡¹ç›®çš„ç»“æ„å’ŒæŠ€æœ¯æ ˆï¼Œç„¶åç”ŸæˆVå“¥å•†åŸçš„å•†å“åˆ—è¡¨é¡µé¢ã€‚
<span class="hljs-code">        
            
toolName: view_folder
            
status: success
          
/Users/vince/Trae/demo1
          
è®©æˆ‘å…ˆæŸ¥çœ‹index.htmlæ–‡ä»¶çš„å†…å®¹ï¼Œäº†è§£å½“å‰é¡µé¢ç»“æ„ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: /Users/vince/Trae/demo1/index.html
          
ç°åœ¨æŸ¥çœ‹script.jsæ–‡ä»¶ï¼Œäº†è§£å½“å‰çš„JavaScripté€»è¾‘ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: /Users/vince/Trae/demo1/script.js
          
ç°åœ¨æŸ¥çœ‹style.cssæ–‡ä»¶ï¼Œäº†è§£å½“å‰çš„æ ·å¼è®¾è®¡ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: /Users/vince/Trae/demo1/style.css
          
ç°åœ¨æˆ‘éœ€è¦è¿è¡Œé¡¹ç›®ï¼ŒæŸ¥çœ‹å®é™…æ•ˆæœï¼Œç¡®ä¿é¡µé¢æ­£å¸¸æ˜¾ç¤ºã€‚
        
            
toolName: run_command
            
status: running
          
command: python3 -m http.server 8000 undefined
          
æœåŠ¡å™¨å·²æˆåŠŸå¯åŠ¨ï¼Œç°åœ¨é¢„è§ˆé¡µé¢æ•ˆæœã€‚
        
            
toolName: open_preview
            
status: success
          
é¢„è§ˆ
          
é¡µé¢æ ‡é¢˜éœ€è¦ä»â€œäº¬ä¸œå•†å“åˆ—è¡¨â€ä¿®æ”¹ä¸ºâ€œVå“¥å•†åŸâ€ï¼Œè®©æˆ‘æ›´æ–°index.htmlæ–‡ä»¶ã€‚
        
            
toolName: edit_file_search_replace
            
status: success
          
            
filePath: /Users/vince/Trae/demo1/index.html
          
changes: undefined
          
æˆ‘å·²ç»æˆåŠŸç”Ÿæˆäº†â€œVå“¥å•†åŸâ€çš„å•†å“åˆ—è¡¨é¡µé¢ã€‚ä»¥ä¸‹æ˜¯å®Œæˆçš„å·¥ä½œï¼š
</span>
<span class="hljs-section">## é¡µé¢ç‰¹ç‚¹</span>

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**å®Œæ•´çš„å•†åŸå¸ƒå±€**</span>
<span class="hljs-bullet">   -</span> é¡¶éƒ¨å¯¼èˆªæ ï¼ˆå«logoã€æœç´¢æ¡†ã€ç”¨æˆ·åŠŸèƒ½ï¼‰
<span class="hljs-bullet">   -</span> åˆ†ç±»å¯¼èˆªèœå•
<span class="hljs-bullet">   -</span> å•†å“ç­›é€‰æ 
<span class="hljs-bullet">   -</span> å“åº”å¼å•†å“åˆ—è¡¨
<span class="hljs-bullet">   -</span> é¡µè„šä¿¡æ¯

<span class="hljs-bullet">2.</span> <span class="hljs-strong">**ä¸°å¯Œçš„åŠŸèƒ½**</span>
<span class="hljs-bullet">   -</span> å•†å“æœç´¢åŠŸèƒ½
<span class="hljs-bullet">   -</span> åˆ†ç±»ç­›é€‰åŠŸèƒ½
<span class="hljs-bullet">   -</span> æ’åºåŠŸèƒ½
<span class="hljs-bullet">   -</span> å•†å“å¡ç‰‡æ‚¬åœæ•ˆæœ
<span class="hljs-bullet">   -</span> è¿”å›é¡¶éƒ¨æŒ‰é’®
<span class="hljs-bullet">   -</span> ç§»åŠ¨ç«¯é€‚é…ï¼ˆæ±‰å ¡èœå•ï¼‰

<span class="hljs-bullet">3.</span> <span class="hljs-strong">**ç¾è§‚çš„è®¾è®¡**</span>
<span class="hljs-bullet">   -</span> ç°ä»£åŒ–çš„UIè®¾è®¡
<span class="hljs-bullet">   -</span> æ¸…æ™°çš„å•†å“ä¿¡æ¯å±•ç¤ºï¼ˆå›¾ç‰‡ã€æ ‡é¢˜ã€ä»·æ ¼ã€é”€é‡ã€åº—é“ºï¼‰
<span class="hljs-bullet">   -</span> å•†å“æ ‡ç­¾ï¼ˆçƒ­å–ã€æ–°å“ã€ä¼˜æƒ ï¼‰
<span class="hljs-bullet">   -</span> å“åº”å¼å¸ƒå±€ï¼Œé€‚é…å„ç§è®¾å¤‡å°ºå¯¸

<span class="hljs-bullet">4.</span> <span class="hljs-strong">**æŠ€æœ¯å®ç°**</span>
<span class="hljs-bullet">   -</span> ä½¿ç”¨HTMLã€CSSã€JavaScriptå¼€å‘
<span class="hljs-bullet">   -</span> å“åº”å¼è®¾è®¡ï¼Œé€‚é…ç§»åŠ¨ç«¯ã€å¹³æ¿å’Œæ¡Œé¢ç«¯
<span class="hljs-bullet">   -</span> åŠ¨æ€ç”Ÿæˆå•†å“åˆ—è¡¨
<span class="hljs-bullet">   -</span> æµç•…çš„äº¤äº’æ•ˆæœ

<span class="hljs-section">## æ–‡ä»¶ä¿®æ”¹</span>

<span class="hljs-bullet">-</span> æ›´æ–°äº†<span class="hljs-code">`index.html`</span>æ–‡ä»¶ï¼Œå°†é¡µé¢æ ‡é¢˜ä»â€œäº¬ä¸œå•†å“åˆ—è¡¨â€æ”¹ä¸ºâ€œVå“¥å•†åŸâ€

<span class="hljs-section">## è®¿é—®åœ°å€</span>

é¡µé¢å·²é€šè¿‡æœ¬åœ°HTTPæœåŠ¡å™¨å¯åŠ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
http://localhost:8000

é¡µé¢å·²ç»å®Œå…¨å¯ç”¨ï¼ŒåŒ…å«äº†å•†åŸå•†å“åˆ—è¡¨çš„æ‰€æœ‰åŸºæœ¬åŠŸèƒ½å’Œç¾è§‚çš„è®¾è®¡ã€‚
</code></pre>
<p>æå®šï¼</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç”Ÿæˆçš„ä»£ç ï¼Œä¸€å…±æ˜¯3ä¸ªæ–‡ä»¶ï¼š</p>
<ol>
<li>index.htmlé¡µé¢</li>
</ol>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vå“¥å•†åŸ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é¡¶éƒ¨å¯¼èˆªæ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header-top"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"logo"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-shopping-cart"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>V å“¥å•†åŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"search-box"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æœç´¢å•†å“"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-search"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-info"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-user"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-heart"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> æ”¶è—<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-shopping-bag"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> è´­ç‰©è½¦<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- æ±‰å ¡èœå•æŒ‰é’® --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hamburger-menu"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-bars"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header-nav"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"active"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>æ‰‹æœº<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ç”µè„‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å®¶ç”µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>æœè£…<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ç¾å¦†<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>é£Ÿå“<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>è¿åŠ¨<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸»ä½“å†…å®¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ç­›é€‰æ  --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-bar"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-item"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-label"</span>&gt;</span>åˆ†ç±»ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-link active"</span>&gt;</span>å…¨éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-link"</span>&gt;</span>æ‰‹æœº<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-link"</span>&gt;</span>ç”µè„‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-link"</span>&gt;</span>å¹³æ¿<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-item"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-label"</span>&gt;</span>æ’åºï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-link active"</span>&gt;</span>ç»¼åˆ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-link"</span>&gt;</span>é”€é‡<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-link"</span>&gt;</span>ä»·æ ¼<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-link"</span>&gt;</span>è¯„ä»·<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- å•†å“åˆ—è¡¨ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"product-list"</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- å•†å“é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ --&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- è¿”å›é¡¶éƒ¨æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"back-to-top"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"backToTop"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-arrow-up"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- åº•éƒ¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"footer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-symbol">&amp;copy;</span> 2024 V å“¥å•†åŸ ç‰ˆæƒæ‰€æœ‰<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"script.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<ol start="2">
<li>style.css æ ·å¼è¡¨</li>
</ol>
<pre><code class="hljs language-css" lang="css">* {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, Roboto, <span class="hljs-string">'Helvetica Neue'</span>, Arial, sans-serif;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
}

<span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">1200px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
}

<span class="hljs-comment">/* é¡¶éƒ¨å¯¼èˆªæ  */</span>
<span class="hljs-selector-class">.header</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
    <span class="hljs-attribute">position</span>: sticky;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
}

<span class="hljs-selector-class">.header-top</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: space-between;
}

<span class="hljs-selector-class">.logo</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
    <span class="hljs-attribute">font-weight</span>: bold;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#e1251b</span>;
}

<span class="hljs-selector-class">.logo</span> <span class="hljs-selector-tag">i</span> {
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.search-box</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">500px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">50px</span>;
    <span class="hljs-attribute">display</span>: flex;
}

<span class="hljs-selector-class">.search-box</span> <span class="hljs-selector-tag">input</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">15px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#e1251b</span>;
    <span class="hljs-attribute">border-right</span>: none;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">outline</span>: none;
}

<span class="hljs-selector-class">.search-box</span> <span class="hljs-selector-tag">button</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e1251b</span>;
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
    <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.search-box</span> <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#c81623</span>;
}

<span class="hljs-selector-class">.user-info</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.user-info</span> <span class="hljs-selector-tag">a</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    <span class="hljs-attribute">text-decoration</span>: none;
    <span class="hljs-attribute">transition</span>: color <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.user-info</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#e1251b</span>;
}

<span class="hljs-selector-class">.user-info</span> <span class="hljs-selector-tag">i</span> {
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">5px</span>;
}

<span class="hljs-comment">/* æ±‰å ¡èœå• */</span>
<span class="hljs-selector-class">.hamburger-menu</span> {
    <span class="hljs-attribute">display</span>: none;
    <span class="hljs-attribute">background</span>: none;
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#e1251b</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-class">.header-nav</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e1251b</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-attribute">transition</span>: max-height <span class="hljs-number">0.3s</span> ease;
}

<span class="hljs-selector-class">.header-nav</span> <span class="hljs-selector-tag">ul</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">list-style</span>: none;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.header-nav</span> <span class="hljs-selector-tag">li</span> {
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">30px</span>;
}

<span class="hljs-selector-class">.header-nav</span> <span class="hljs-selector-tag">a</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">text-decoration</span>: none;
    <span class="hljs-attribute">font-weight</span>: bold;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.header-nav</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span>,
<span class="hljs-selector-class">.header-nav</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.active</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#c81623</span>;
}

<span class="hljs-comment">/* ä¸»ä½“å†…å®¹ */</span>
<span class="hljs-selector-class">.main</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* ç­›é€‰æ  */</span>
<span class="hljs-selector-class">.filter-bar</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">40px</span>;
}

<span class="hljs-selector-class">.filter-item</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">flex-wrap</span>: wrap;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.filter-label</span> {
    <span class="hljs-attribute">font-weight</span>: bold;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
    <span class="hljs-attribute">white-space</span>: nowrap;
}

<span class="hljs-selector-class">.filter-link</span> {
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    <span class="hljs-attribute">text-decoration</span>: none;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;
    <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">13px</span>;
}

<span class="hljs-selector-class">.filter-link</span><span class="hljs-selector-pseudo">:hover</span>,
<span class="hljs-selector-class">.filter-link</span><span class="hljs-selector-class">.active</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e1251b</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
}

<span class="hljs-comment">/* å•†å“åˆ—è¡¨ */</span>
<span class="hljs-selector-class">.product-list</span> {
    <span class="hljs-attribute">display</span>: grid;
    <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">5</span>, <span class="hljs-number">1</span>fr);
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-selector-class">.product-item</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span>, box-shadow <span class="hljs-number">0.3s</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
}

<span class="hljs-selector-class">.product-item</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">5px</span>);
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);
}

<span class="hljs-selector-class">.product-image</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    aspect-ratio: <span class="hljs-number">1</span> / <span class="hljs-number">1</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
}

<span class="hljs-selector-class">.product-image</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">object-fit</span>: contain;
    <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
}

<span class="hljs-selector-class">.product-item</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.product-image</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.05</span>);
}

<span class="hljs-selector-class">.product-info</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
}

<span class="hljs-selector-class">.product-title</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.4</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-attribute">text-overflow</span>: ellipsis;
    <span class="hljs-attribute">display</span>: -webkit-box;
    -webkit-line-clamp: <span class="hljs-number">2</span>;
    -webkit-box-orient: vertical;
    <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.product-price</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">font-weight</span>: bold;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#e1251b</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: baseline;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">6px</span>;
}

<span class="hljs-selector-class">.product-price</span> <span class="hljs-selector-class">.original-price</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;
    <span class="hljs-attribute">text-decoration</span>: line-through;
    <span class="hljs-attribute">font-weight</span>: normal;
}

<span class="hljs-selector-class">.product-sales</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-class">.sales-count</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.sales-count</span> <span class="hljs-selector-tag">i</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#e1251b</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">11px</span>;
}

<span class="hljs-selector-class">.shop-name</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
    <span class="hljs-attribute">text-decoration</span>: none;
    <span class="hljs-attribute">transition</span>: color <span class="hljs-number">0.3s</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
}

<span class="hljs-selector-class">.shop-name</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#e1251b</span>;
}

<span class="hljs-selector-class">.product-tags</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-wrap</span>: wrap;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">5px</span>;
    <span class="hljs-attribute">margin-top</span>: auto;
}

<span class="hljs-selector-class">.tag</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">3px</span> <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">font-weight</span>: bold;
}

<span class="hljs-selector-class">.tag-hot</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff1f0</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#e1251b</span>;
}

<span class="hljs-selector-class">.tag-new</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f6ffed</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#52c41a</span>;
}

<span class="hljs-selector-class">.tag-discount</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff7e6</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#faad14</span>;
}

<span class="hljs-comment">/* è¿”å›é¡¶éƒ¨æŒ‰é’® */</span>
<span class="hljs-selector-class">.back-to-top</span> {
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">right</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">45px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">45px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e1251b</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);
    <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">visibility</span>: hidden;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">99</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
}

<span class="hljs-selector-class">.back-to-top</span><span class="hljs-selector-class">.visible</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">visibility</span>: visible;
}

<span class="hljs-selector-class">.back-to-top</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#c81623</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">3px</span>);
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);
}

<span class="hljs-comment">/* è§¦æ‘¸åé¦ˆæ•ˆæœ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
    <span class="hljs-selector-class">.product-item</span>,
    <span class="hljs-selector-class">.filter-link</span>,
    <span class="hljs-selector-class">.search-box</span> <span class="hljs-selector-tag">button</span>,
    <span class="hljs-selector-class">.hamburger-menu</span> {
        -webkit-tap-highlight-<span class="hljs-attribute">color</span>: transparent;
    }
    
    <span class="hljs-selector-class">.product-item</span><span class="hljs-selector-pseudo">:active</span> {
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.98</span>);
    }
    
    <span class="hljs-selector-class">.filter-link</span><span class="hljs-selector-pseudo">:active</span> {
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.95</span>);
    }
}

<span class="hljs-comment">/* åº•éƒ¨ */</span>
<span class="hljs-selector-class">.footer</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e5e5e5</span>;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">40px</span>;
}

<span class="hljs-comment">/* å“åº”å¼è®¾è®¡ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>) {
    <span class="hljs-selector-class">.container</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">95%</span>;
    }
    
    <span class="hljs-selector-class">.product-list</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>fr);
    }
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">992px</span>) {
    <span class="hljs-selector-class">.product-list</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>fr);
    }
    
    <span class="hljs-selector-class">.search-box</span> {
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;
    }
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
    <span class="hljs-selector-class">.header-top</span> {
        <span class="hljs-attribute">flex-direction</span>: row;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">15px</span>;
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
    }
    
    <span class="hljs-selector-class">.logo</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
    }
    
    <span class="hljs-selector-class">.search-box</span> {
        <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attribute">max-width</span>: none;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;
    }
    
    <span class="hljs-selector-class">.search-box</span> <span class="hljs-selector-tag">input</span> {
        <span class="hljs-attribute">height</span>: <span class="hljs-number">35px</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">13px</span>;
    }
    
    <span class="hljs-selector-class">.search-box</span> <span class="hljs-selector-tag">button</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">35px</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    }
    
    <span class="hljs-selector-class">.user-info</span> {
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
    }
    
    <span class="hljs-selector-class">.user-info</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">span</span> {
        <span class="hljs-attribute">display</span>: none;
    }
    
    <span class="hljs-comment">/* æ˜¾ç¤ºæ±‰å ¡èœå• */</span>
    <span class="hljs-selector-class">.hamburger-menu</span> {
        <span class="hljs-attribute">display</span>: block;
    }
    
    <span class="hljs-comment">/* éšè—æ¡Œé¢å¯¼èˆª */</span>
    <span class="hljs-selector-class">.header-nav</span> {
        <span class="hljs-attribute">height</span>: auto;
        <span class="hljs-attribute">max-height</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">overflow</span>: hidden;
    }
    
    <span class="hljs-selector-class">.header-nav</span><span class="hljs-selector-class">.active</span> {
        <span class="hljs-attribute">max-height</span>: <span class="hljs-number">300px</span>;
    }
    
    <span class="hljs-selector-class">.header-nav</span> <span class="hljs-selector-tag">ul</span> {
        <span class="hljs-attribute">flex-direction</span>: column;
        <span class="hljs-attribute">overflow-x</span>: visible;
        <span class="hljs-attribute">white-space</span>: normal;
    }
    
    <span class="hljs-selector-class">.header-nav</span> <span class="hljs-selector-tag">li</span> {
        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1px</span>;
    }
    
    <span class="hljs-selector-class">.header-nav</span> <span class="hljs-selector-tag">a</span> {
        <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
        <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">20px</span>;
    }
    
    <span class="hljs-selector-class">.filter-bar</span> {
        <span class="hljs-attribute">flex-direction</span>: column;
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
        <span class="hljs-attribute">align-items</span>: flex-start;
    }
    
    <span class="hljs-selector-class">.product-list</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>fr);
    }
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">480px</span>) {
    <span class="hljs-selector-class">.product-list</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;
    }
}
</code></pre>
<ol start="3">
<li>script.jsæ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿå•†å“æ•°æ®</span>
<span class="hljs-keyword">const</span> products = [
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'Apple iPhone 15 Pro Max (A3104) 256GB åŸè‰²é’›é‡‘å± æ”¯æŒç§»åŠ¨è”é€šç”µä¿¡5G åŒå¡åŒå¾…æ‰‹æœº'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">9999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">10999</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">12580</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'Appleå®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23FF6B6B%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EiPhone 15%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'hot'</span>, <span class="hljs-string">'discount'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'åä¸º Mate 60 Pro éº’éºŸ9000S 5Gæ‰‹æœº 12GB+512GB é›…å·é’ æ˜†ä»‘ç»ç’ƒ è¶…å¯é ç„æ­¦æ¶æ„ å«æ˜Ÿé€šè¯'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">7999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">8999</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">8920</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'åä¸ºå®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%234ECDC4%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EMate 60%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'new'</span>, <span class="hljs-string">'hot'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'å°ç±³14 Pro å¾•å¡å…‰å­¦Summiluxé•œå¤´ ç¬¬äºŒä»£éªé¾™8 é¢†å…ˆç‰ˆ 2K LTPOå±å¹• 12GB+256GB é’›åˆé‡‘ç‰ˆ'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">4999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">5499</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">15600</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'å°ç±³å®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%2345B7D1%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EXiaomi 14%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'hot'</span>, <span class="hljs-string">'discount'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'OPPO Find X7 Ultra 1è‹±å¯¸å“ˆè‹å½±åƒ ç¬¬äºŒä»£éªé¾™8 2K 120Hz ä¸œæ–¹å± 16GB+512GB å¤§æ¼ é“¶æœˆ'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">5999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">6499</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">6780</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'OPPOå®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%2396CEB4%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EFind X7%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'new'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'vivo X100 Pro å¤©ç‘9300 5Gæ‰‹æœº 120Wé—ªå…… è”¡å¸å››æ‘„ 12GB+256GB åå¤çº¢ æ›²é¢å±'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">4999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">5499</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">7890</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'vivoå®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23FFEAA7%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22black%22%3Evivo X100%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'new'</span>, <span class="hljs-string">'hot'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">6</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'ä¸‰æ˜Ÿ Galaxy S24 Ultra 5Gæ‰‹æœº 12GB+256GB é’›ç° éªé¾™8 Gen3 æ™ºèƒ½S Pen 2äº¿åƒç´ ä¸»æ‘„'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">8999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">9999</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">4560</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'ä¸‰æ˜Ÿå®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23DDA0DD%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EGalaxy S24%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'hot'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">7</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'è£è€€Magic6 Pro ç¬¬äºŒä»£éªé¾™8æ——èˆ°èŠ¯ç‰‡ AIå¤§æ¨¡å‹æ‰‹æœº 16GB+512GB ç‡ƒæ©™è‰²'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">5699</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">6199</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">5670</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'è£è€€å®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%2398D8C8%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EMagic6%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'new'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'ä¸€åŠ  Ace 3 Pro ç¬¬äºŒä»£éªé¾™8 24GB+1TB 150Wè¶…çº§é—ªå…… 120Hzç”µç«ç›´å± 5Gæ¸¸æˆæ‰‹æœº'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">3999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">4499</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">9120</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'ä¸€åŠ å®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23F7DC6F%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22black%22%3EOnePlus Ace3%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'discount'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">9</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'realme çœŸæˆ‘GT5 Pro ç¬¬äºŒä»£éªé¾™8 24GB+1TB 240Wæ»¡çº§ç§’å…… 2Kç›´å± 5Gæ¸¸æˆæ‰‹æœº'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">3899</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">4299</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">6780</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'realmeå®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23BB8FCE%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EGT5 Pro%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'discount'</span>, <span class="hljs-string">'hot'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">10</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'Redmi K70 Pro ç¬¬äºŒä»£éªé¾™8 è‡³å°Šç‰ˆ 2K 120Hz ä¸­å›½å± 16GB+512GB å¢¨ç¾½ 5Gæ™ºèƒ½æ‰‹æœº'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">3699</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">3999</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">11230</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'Redmiå®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%2385C1E9%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EK70 Pro%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'hot'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">11</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'ç´¢å°¼ï¼ˆSONYï¼‰Xperia 1 V 5Gæ™ºèƒ½æ‰‹æœº 4K HDR OLED ä¸“ä¸šå½±åƒ 12GB+256GB é»‘è‰²'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">8499</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">9499</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">2340</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'ç´¢å°¼å®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23F8C471%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22black%22%3EXperia 1V%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'new'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">12</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'é­…æ— 21 éªé¾™8 Gen3 æ— ç•Œå…¨é¢å± 5000mAhç”µæ±  12GB+256GB ç‹¬ç™½ 5Gæ‰‹æœº'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">3399</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">3799</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">4560</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'é­…æ—å®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%2382E0AA%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3Eé­…æ—21%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'discount'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">13</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'åŠªæ¯”äºš Z60 Ultra éªé¾™8 Gen3 35mm+85mmé»„é‡‘åŒç„¦æ®µ 16GB+512GB é»‘ç¤ 5Gæ‰‹æœº'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">4999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">5499</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">3450</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'åŠªæ¯”äºšå®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23F1948A%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EZ60 Ultra%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'new'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">14</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'æ‘©æ‰˜ç½—æ‹‰ moto edge X50 Pro éªé¾™8 Gen3 2K 165Hz æ›²å± 12GB+256GB å¢¨éŸµé»‘ 5Gæ‰‹æœº'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">3999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">4399</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">2890</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'æ‘©æ‰˜ç½—æ‹‰å®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23D2B4DE%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EEdge X50%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'discount'</span>]
    },
    {
        <span class="hljs-attr">id</span>: <span class="hljs-number">15</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'iQOO 12 Pro ç¬¬äºŒä»£éªé¾™8 2K 144Hz E7å± 200Wé—ªå…… 16GB+512GB èµ›é“ç‰ˆ 5Gæ¸¸æˆæ‰‹æœº'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">4999</span>,
        <span class="hljs-attr">originalPrice</span>: <span class="hljs-number">5499</span>,
        <span class="hljs-attr">sales</span>: <span class="hljs-number">5670</span>,
        <span class="hljs-attr">shopName</span>: <span class="hljs-string">'iQOOå®˜æ–¹æ——èˆ°åº—'</span>,
        <span class="hljs-attr">image</span>: <span class="hljs-string">'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22300%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23AED6F1%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22 fill=%22white%22%3EiQOO 12%3C/text%3E%3C/svg%3E'</span>,
        <span class="hljs-attr">tags</span>: [<span class="hljs-string">'hot'</span>]
    }
];

<span class="hljs-comment">// DOMåŠ è½½å®Œæˆåæ‰§è¡Œ</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">renderProducts</span>(products);
    <span class="hljs-title function_">initEventListeners</span>();
});

<span class="hljs-comment">// æ¸²æŸ“å•†å“åˆ—è¡¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderProducts</span>(<span class="hljs-params">products</span>) {
    <span class="hljs-keyword">const</span> productList = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.product-list'</span>);
    productList.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
    
    products.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> productItem = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
        productItem.<span class="hljs-property">className</span> = <span class="hljs-string">'product-item'</span>;
        
        <span class="hljs-comment">// ç”Ÿæˆæ ‡ç­¾HTML</span>
        <span class="hljs-keyword">const</span> tagsHtml = product.<span class="hljs-property">tags</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">tag</span> =&gt;</span> {
            <span class="hljs-keyword">let</span> tagClass = <span class="hljs-string">''</span>;
            <span class="hljs-keyword">switch</span>(tag) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">'hot'</span>:
                    tagClass = <span class="hljs-string">'tag-hot'</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'new'</span>:
                    tagClass = <span class="hljs-string">'tag-new'</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'discount'</span>:
                    tagClass = <span class="hljs-string">'tag-discount'</span>;
                    <span class="hljs-keyword">break</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;span class="tag <span class="hljs-subst">${tagClass}</span>"&gt;<span class="hljs-subst">${tag === <span class="hljs-string">'hot'</span> ? <span class="hljs-string">'çƒ­å–'</span> : tag === <span class="hljs-string">'new'</span> ? <span class="hljs-string">'æ–°å“'</span> : <span class="hljs-string">'ä¼˜æƒ '</span>}</span>&lt;/span&gt;`</span>;
        }).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
        
        productItem.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
            &lt;div class="product-image"&gt;
                &lt;img src="<span class="hljs-subst">${product.image}</span>" alt="<span class="hljs-subst">${product.title}</span>"&gt;
            &lt;/div&gt;
            &lt;div class="product-info"&gt;
                &lt;h3 class="product-title"&gt;<span class="hljs-subst">${product.title}</span>&lt;/h3&gt;
                &lt;div class="product-price"&gt;
                    ï¿¥<span class="hljs-subst">${product.price.toFixed(<span class="hljs-number">2</span>)}</span>
                    &lt;span class="original-price"&gt;ï¿¥<span class="hljs-subst">${product.originalPrice.toFixed(<span class="hljs-number">2</span>)}</span>&lt;/span&gt;
                &lt;/div&gt;
                &lt;div class="product-sales"&gt;
                    &lt;div class="sales-count"&gt;
                        &lt;i class="fas fa-fire"&gt;&lt;/i&gt;
                        å·²å”®<span class="hljs-subst">${product.sales.toLocaleString()}</span>
                    &lt;/div&gt;
                    &lt;a href="#" class="shop-name"&gt;<span class="hljs-subst">${product.shopName}</span>&lt;/a&gt;
                &lt;/div&gt;
                &lt;div class="product-tags"&gt;
                    <span class="hljs-subst">${tagsHtml}</span>
                &lt;/div&gt;
            &lt;/div&gt;
        `</span>;
        
        <span class="hljs-comment">// æ·»åŠ å•†å“ç‚¹å‡»äº‹ä»¶</span>
        productItem.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ·»åŠ å•†å“è¯¦æƒ…é¡µè·³è½¬é€»è¾‘</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å•†å“è¢«ç‚¹å‡»:'</span>, product.<span class="hljs-property">id</span>);
        });
        
        productList.<span class="hljs-title function_">appendChild</span>(productItem);
    });
}

<span class="hljs-comment">// åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">initEventListeners</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ±‰å ¡èœå•äº¤äº’</span>
    <span class="hljs-keyword">const</span> hamburgerMenu = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.hamburger-menu'</span>);
    <span class="hljs-keyword">const</span> headerNav = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.header-nav'</span>);
    
    hamburgerMenu.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        headerNav.<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">'active'</span>);
    });
    
    <span class="hljs-comment">// ç­›é€‰é“¾æ¥ç‚¹å‡»äº‹ä»¶</span>
    <span class="hljs-keyword">const</span> filterLinks = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.filter-link'</span>);
    filterLinks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">link</span> =&gt;</span> {
        link.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
            e.<span class="hljs-title function_">preventDefault</span>();
            
            <span class="hljs-comment">// ç§»é™¤åŒç»„å…¶ä»–é“¾æ¥çš„activeç±»</span>
            <span class="hljs-keyword">const</span> parent = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">closest</span>(<span class="hljs-string">'.filter-item'</span>);
            parent.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.filter-link'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">l</span> =&gt;</span> {
                l.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
            });
            
            <span class="hljs-comment">// æ·»åŠ å½“å‰é“¾æ¥çš„activeç±»</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
            
            <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ·»åŠ ç­›é€‰é€»è¾‘</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç­›é€‰:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span>);
        });
    });
    
    <span class="hljs-comment">// å¯¼èˆªé“¾æ¥ç‚¹å‡»äº‹ä»¶</span>
    <span class="hljs-keyword">const</span> navLinks = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.header-nav a'</span>);
    navLinks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">link</span> =&gt;</span> {
        link.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
            e.<span class="hljs-title function_">preventDefault</span>();
            
            <span class="hljs-comment">// ç§»é™¤å…¶ä»–é“¾æ¥çš„activeç±»</span>
            navLinks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">l</span> =&gt;</span> {
                l.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
            });
            
            <span class="hljs-comment">// æ·»åŠ å½“å‰é“¾æ¥çš„activeç±»</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
            
            <span class="hljs-comment">// åœ¨ç§»åŠ¨ç«¯ç‚¹å‡»å¯¼èˆªåå…³é—­èœå•</span>
            headerNav.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
            
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯¼èˆªåˆ°:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span>);
        });
    });
    
    <span class="hljs-comment">// æœç´¢åŠŸèƒ½</span>
    <span class="hljs-keyword">const</span> searchBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.search-box button'</span>);
    <span class="hljs-keyword">const</span> searchInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.search-box input'</span>);
    
    searchBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> keyword = searchInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
        <span class="hljs-keyword">if</span> (keyword) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœç´¢:'</span>, keyword);
            <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ·»åŠ æœç´¢é€»è¾‘</span>
            <span class="hljs-keyword">const</span> filteredProducts = products.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> 
                product.<span class="hljs-property">title</span>.<span class="hljs-title function_">includes</span>(keyword)
            );
            <span class="hljs-title function_">renderProducts</span>(filteredProducts);
        }
    });
    
    <span class="hljs-comment">// å›è½¦é”®æœç´¢</span>
    searchInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keypress'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">'Enter'</span>) {
            searchBtn.<span class="hljs-title function_">click</span>();
        }
    });
    
    <span class="hljs-comment">// è¿”å›é¡¶éƒ¨æŒ‰é’®åŠŸèƒ½</span>
    <span class="hljs-keyword">const</span> backToTopBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'backToTop'</span>);
    
    <span class="hljs-comment">// æ»šåŠ¨æ£€æµ‹</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">pageYOffset</span> &gt; <span class="hljs-number">300</span>) {
            backToTopBtn.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'visible'</span>);
        } <span class="hljs-keyword">else</span> {
            backToTopBtn.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'visible'</span>);
        }
    });
    
    <span class="hljs-comment">// ç‚¹å‡»è¿”å›é¡¶éƒ¨</span>
    backToTopBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
            <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>
        });
    });
    

}

<span class="hljs-comment">// æ ¼å¼åŒ–ä»·æ ¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">formatPrice</span>(<span class="hljs-params">price</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'ï¿¥'</span> + price.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
}

<span class="hljs-comment">// æ ¼å¼åŒ–é”€é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">formatSales</span>(<span class="hljs-params">sales</span>) {
    <span class="hljs-keyword">if</span> (sales &gt;= <span class="hljs-number">10000</span>) {
        <span class="hljs-keyword">return</span> (sales / <span class="hljs-number">10000</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">1</span>) + <span class="hljs-string">'ä¸‡'</span>;
    }
    <span class="hljs-keyword">return</span> sales.<span class="hljs-title function_">toLocaleString</span>();
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå›¾ç‰‡çš„ä½ç½®æ˜¯ç”¨ svg è‰²å—ç»˜åˆ¶å‡ºæ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ›¿æ¢æˆè‡ªå·±æƒ³è¦çš„å›¾ç‰‡ç´ æã€‚</p>
<p>ç”Ÿæˆå®Œæˆåï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æœ€ç»ˆçš„é¡µé¢æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac970f94f8fa4800a6aef1153aefb2ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765897310&amp;x-signature=MIGXW9QPzpDu37cuPAtsHFGDn9Y%3D" alt="image.png" loading="lazy"/>
é¡µé¢é‡Œè‡ªåŠ¨æœ‰äº†ä¸€äº›ç®€å•çš„äº¤äº’æ•ˆæœï¼Œå¤ªæ£’äº†ï¼çœ‹åˆ°è¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿè·Ÿ V å“¥ä¸€æ ·æœ‰ç›¸åŒçš„æƒ³æ³•ï¼Œæˆ‘ TMD å†ä¹Ÿä¸ç”¨å‰ç«¯ç»™æˆ‘ç”»é¡µé¢ï¼Œåç«¯çš„å°ä¼™ä¼´å¯ä»¥ç›´æ¥æŠŠå‰ç«¯å¼€å‘çš„æ´»ç»™åŒ…äº†ï¼Œ^_^ï¼Œè¿™é‡Œï¼Œæœ‰å‰ç«¯çš„å°ä¼™ä¼´ä¸€å®šä¸æœï¼Œâ€œæƒ³è¦æŒ¤æ‰æˆ‘ä»¬å‰ç«¯çš„å·¥ä½œï¼Œæ²¡é—¨ï¼â€ï¼Œè¯´å®è¯ï¼Œå¦‚æœä½ åªä¼šå‰ç«¯ï¼Œé‚£ä½ çš„å·¥ä½œçœŸçš„ä¼šè¢« AI æ‰€å–ä»£ï¼ŒAI æ—¶ä»£ï¼Œè®©ç¨‹åºå‘˜ä»¬éƒ½æˆä¸ºäº†å…¨æ ˆå¼€å‘ï¼Œå¦‚æœä½ æ˜¯å‰ç«¯ï¼Œå¯è¦æŠ“ç´§å­¦ä¹ åç«¯å¼€å‘äº†ï¼Œè¦ä¸ç„¶çœŸçš„å±é™©äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŒæ¡åŸå‹é“¾ï¼Œå†™å‡ºä¸ç¿»è½¦çš„ JS ç»§æ‰¿]]></title>    <link>https://juejin.cn/post/7581664445241524239</link>    <guid>https://juejin.cn/post/7581664445241524239</guid>    <pubDate>2025-12-09T13:16:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581664445241524239" data-draft-id="7581670270844665896" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŒæ¡åŸå‹é“¾ï¼Œå†™å‡ºä¸ç¿»è½¦çš„ JS ç»§æ‰¿"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-09T13:16:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°è¨€è¥¿è¥¿é‡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/332466136029851"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŒæ¡åŸå‹é“¾ï¼Œå†™å‡ºä¸ç¿»è½¦çš„ JS ç»§æ‰¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/332466136029851/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°è¨€è¥¿è¥¿é‡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T13:16:49.000Z" title="Tue Dec 09 2025 13:16:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0">åŸå‹ä¸åŸå‹é“¾åŸºç¡€</h2>
<p>åœ¨å­¦ä¹ ä¹‹å‰éœ€è¦å›é¡¾ä¸€ä¸‹è¿™äº›åŸºç¡€çŸ¥è¯†</p>
<ul>
<li><strong><code>prototype</code></strong> æ˜¯<strong>æ‰€æœ‰å‡½æ•°</strong>éƒ½åŒ…å«çš„ä¸€ä¸ªå±æ€§ï¼ˆå¯¹è±¡ï¼‰ï¼Œè€Œå¯¹äºå†…ç½®æ„é€ å‡½æ•°é€šå¸¸åœ¨ä¸Šé¢é¢„å®šä¹‰äº†éƒ¨åˆ†æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š<code>.push</code>ã€<code>.toString</code>ç­‰ã€‚</li>
<li><strong><code>__proto__</code></strong> æ˜¯<strong>æ‰€æœ‰ JS å¯¹è±¡</strong>éƒ½æœ‰çš„ä¸€ä¸ªå†…éƒ¨å±æ€§ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼ˆå³çˆ¶å¯¹è±¡çš„prototypeï¼‰ã€‚</li>
<li><strong><code>constructor</code></strong> <strong>æ¯ä¸ªÂ <code>prototype</code>Â å¯¹è±¡</strong>éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„Â <code>constructor</code>Â å±æ€§ï¼ŒæŒ‡å›å…¶æ„é€ å‡½æ•°ã€‚</li>
</ul>
<p>ä¸å¦¨æ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
} 

<span class="hljs-keyword">const</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'Alice'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(alice.<span class="hljs-property">__proto__</span>) <span class="hljs-comment">// Person.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span>) <span class="hljs-comment">// Person</span>
</code></pre>
<p>è€Œå®ƒçš„åŸå‹é“¾å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">// --&gt; ä»£è¡¨.__proto__å±æ€§
alice --&gt; Person.prototype --&gt; Object.prototype --&gt; nullï¼ˆæ‰€æœ‰åŸå‹é“¾çš„ç»ˆç‚¹éƒ½æ˜¯ nullï¼‰
</code></pre>
<h2 data-id="heading-1">å››ç§åŸå‹ç»§æ‰¿æ–¹å¼è¯¦è§£</h2>
<h3 data-id="heading-2">1. ç›´æ¥èµ‹å€¼çˆ¶ç±»åŸå‹ï¼ˆä¸æ¨èï¼‰</h3>
<p>å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// çˆ¶ç±»æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">species</span> = <span class="hljs-string">"åŠ¨ç‰©"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span>(<span class="hljs-params">color, name, age</span>) {
    <span class="hljs-comment">// ç»§æ‰¿çˆ¶ç±»çš„å±æ€§</span>
    <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, [name, age]);
    <span class="hljs-comment">// ä½¿ç”¨ .call ä¹Ÿå¯ä»¥</span>
    <span class="hljs-comment">// Animal.call(this, name, age);</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;
}
        
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// æŒ‡å‘çˆ¶ç±»åŸå‹</span>
</code></pre>
<blockquote>
<p>è¡¥å……ä¸€ä¸‹ <code>call</code> å’Œ <code>apply</code> çš„åŒºåˆ«ï¼š</p>
<ul>
<li><code>call</code> æ˜¯ <strong>é€ä¸ªä¼ å‚</strong>ï¼Œå³ï¼š<code>fn.call(this, arg1, arg2, ...)</code></li>
<li><code>apply</code> æ˜¯ <strong>æ•°ç»„ä¼ å‚</strong>ï¼Œå³ï¼š<code>fn.apply(this, [arg1, arg2, ...])</code></li>
</ul>
</blockquote>
<p>è¿™æ ·åšä¸‹æ¥æ„Ÿè§‰å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åˆé€‚ï¼Œç»§æ‰¿äº†çˆ¶ç±»çš„å±æ€§ï¼ŒåŒæ—¶ä¹ŸæŒ‡å‘äº†çˆ¶ç±»çš„åŸå‹å¯¹è±¡ã€‚ä½†æ˜¯è¿™æ ·å¹¶ä¸å®Œæ•´ï¼Œå› ä¸ºå¦‚æœè°ƒç”¨å­ç±»çš„<code>prototype</code>ä¸Šçš„<code>constructor</code>å±æ€§ï¼Œæ­£ç¡®çš„ç»§æ‰¿åº”è¯¥æ˜¯æŒ‡å‘å­ç±»è‡ªèº«ã€‚</p>
<p>è€Œå½“æˆ‘ä»¬åœ¨ä»£ç ä¸­æ‰§è¡Œ<code>console.log(Cat.prototype.constructor)</code>æœ€åå¾—åˆ°çš„ç»“æœå´æ˜¯ <code>Animal</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc0137010d1541eb9a48b216f2d4aba7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCO6KiA6KW_6KW_6YeM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891009&amp;x-signature=qsZI2cQm%2BcPZPrhlcTexOBIAIuA%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥åœ¨æœ€åè¿˜éœ€è¦<strong>æ‰‹åŠ¨ä¿®å¤æ„é€ å‡½æ•°æŒ‡å‘</strong>ï¼Œå³æ·»åŠ ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Cat</span>;
</code></pre>
<p>ä½†æ˜¯è¿™æ ·åšå¹¶éä¸‡æ— ä¸€å¤±ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦äº†è§£ JS çš„ä¸€ä¸ªç‰¹æ€§ï¼Œé‚£å°±æ˜¯ <strong>å¼•ç”¨å¼èµ‹å€¼</strong> ã€‚åœ¨ JS ä¸­ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ8ç§ï¼‰æ˜¯<strong>æŒ‰å€¼èµ‹å€¼</strong>çš„ï¼Œè€Œå¯¹è±¡ç±»å‹æ˜¯<strong>æŒ‰å¼•ç”¨èµ‹å€¼</strong>çš„</p>
<p><strong>å¼•ç”¨å¼èµ‹å€¼</strong>ï¼šæŒ‡å½“æˆ‘å°†ä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¹¶ä¸æ˜¯å¤åˆ¶äº†è¿™ä¸ªå¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯å¤åˆ¶äº†å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€å¼•ç”¨ï¼Œè¿™æ ·å°±å¯¼è‡´ä¸¤ä¸ªå˜é‡éƒ½æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ä½ç½®ï¼Œä¸è®ºä¿®æ”¹å“ªä¸ªéƒ½ä¼šå¯¹å¦ä¸€ä¸ªé€ æˆå½±å“ã€‚</p>
<p>ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> obj1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span> };
<span class="hljs-keyword">let</span> obj2 = obj1;      <span class="hljs-comment">// å¼•ç”¨å¼èµ‹å€¼</span>
obj2.<span class="hljs-property">name</span> = <span class="hljs-string">'Bob'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1.<span class="hljs-property">name</span>); <span class="hljs-comment">// "Bob"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1 === obj2); <span class="hljs-comment">// trueï¼ˆæŒ‡å‘åŒä¸€å¯¹è±¡ï¼‰</span>
</code></pre>
<p>å›åˆ°æˆ‘ä»¬çš„ç»§æ‰¿å‡½æ•°ï¼Œé‡Œé¢å°±æœ‰ä¸€ä¸ªæ˜¯å¼•ç”¨å¼èµ‹å€¼</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
</code></pre>
<p>è¿™å°±å¯¼è‡´äº†å½“æˆ‘ä»¬åœ¨<code>Cat.prototype</code>ä¸Šæ·»åŠ æ–¹æ³•è¿˜æ˜¯ä»€ä¹ˆçš„ï¼Œä¼šæ±¡æŸ“<code>Animal.prototype</code>ï¼Œæ‰€ä»¥å°½é‡åˆ«ä½¿ç”¨ç›´æ¥èµ‹å€¼çˆ¶ç±»åŸå‹</p>
<h3 data-id="heading-3">2. åŸå‹é“¾ç»§æ‰¿ï¼ˆæœ‰ç‚¹ç¼ºç‚¹ï¼‰</h3>
<p>æˆ‘ä»¬å°†ä¸Šé¢çš„ä¾‹å­æ‹¿ä¸‹æ¥</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">species</span> = <span class="hljs-string">"åŠ¨ç‰©"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span>(<span class="hljs-params">color, name, age</span>) {
    <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, [name, age]);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;
}
</code></pre>
<p>ä½†æ˜¯æˆ‘ä»¬è¿™é‡Œä½¿ç”¨åŸå‹é“¾å¼ç»§æ‰¿</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>(); 
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Cat</span>; <span class="hljs-comment">// ä¿®å¤æ„é€ å‡½æ•°æŒ‡å‘     </span>
</code></pre>
<p>è€Œè¿™é‡Œéœ€è¦äº†è§£ä¸€ä¸‹ <code>new</code> çš„ä¼ªä»£ç äº†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¼ªä»£ç  new Animal()</span>
<span class="hljs-keyword">let</span> obj = {};
<span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(obj); <span class="hljs-comment">// ä¹Ÿå¯ä»¥ç”¨ apply</span>
obj.<span class="hljs-property">__proto__</span> = <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
<span class="hljs-keyword">return</span> obj
</code></pre>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå†å°†çˆ¶ç±»çš„<code>this</code>æŒ‡å‘ç©ºå¯¹è±¡ï¼Œå¹¶å°†ç©ºå¯¹è±¡çš„<code>__proto__</code>æŒ‡å‘çˆ¶ç±»çš„<code>prototype</code>ï¼Œä¹Ÿå°±æ˜¯è¿ä¸ŠåŸå‹é“¾ï¼Œæœ€åå†è¿”è¿˜è¿™ä¸ªç©ºå¯¹è±¡ã€‚</p>
<p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œåç»­åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹éƒ½æ˜¯å…±äº«çˆ¶ç±»çš„å±æ€§çš„ï¼Œåœ¨ä»»æ„ä¸€ä¸ªå®ä¾‹ä¸­å¯¹çˆ¶ç±»å±æ€§è¿›è¡Œä¿®æ”¹éƒ½ä¼šå¯¹å…¶ä»–å®ä¾‹é€ æˆå½±å“ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">colors</span> = [<span class="hljs-string">'red'</span>, <span class="hljs-string">'blue'</span>]; <span class="hljs-comment">// å¼•ç”¨ç±»å‹å±æ€§</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>(); <span class="hljs-comment">// æ‰€æœ‰ Cat å®ä¾‹å…±äº« colors</span>
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Cat</span>;

<span class="hljs-keyword">const</span> cat1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();
<span class="hljs-keyword">const</span> cat2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();
cat1.<span class="hljs-property">colors</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'green'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cat2.<span class="hljs-property">colors</span>); <span class="hljs-comment">// ['red', 'blue', 'green'] å…±äº«å¼•ç”¨</span>
</code></pre>
<h3 data-id="heading-4">3. ç©ºå¯¹è±¡ä¸­ä»‹æ¨¡å¼ï¼ˆç»å…¸è§£å†³æ–¹æ¡ˆï¼‰</h3>
<p>åœ¨ç›´æ¥èµ‹å€¼ä¸­ï¼Œä¸è®ºæ€æ ·éƒ½ä¼šå¯¹çˆ¶ç±»é€ æˆå½±å“ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬åœ¨ çˆ¶ç±»å’Œå­ç±» ä¸­é—´æ‰¾ä¸€ä¸ªä¸­ä»‹æ¥éš”æ–­ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æœ€ç»å…¸çš„è§£å†³æ–¹æ³•----ç©ºå¯¹è±¡ä¸­ä»‹æ¨¡å¼</p>
<p>ä¾æ—§å°†å‰é¢çš„ä¾‹å­æ‹¿æ¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">species</span> = <span class="hljs-string">"åŠ¨ç‰©"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span>(<span class="hljs-params">color, name, age</span>) {
    <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, [name, age]);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;
}
</code></pre>
<p>ä¸å¦¨æ¥çœ‹çœ‹ä¸­ä»‹æ¨¡å¼æ˜¯æ€ä¹ˆä½¿ç”¨çš„</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> F = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {}; <span class="hljs-comment">// ç©ºå¯¹è±¡ä¸­ä»‹</span>
F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Cat</span>;
</code></pre>
<p>å…¶ä¸­æˆ‘ä»¬å°†<code>F.prototype</code>ç›´æ¥ç»§æ‰¿<code>Animal.prototype</code>ï¼Œè™½ç„¶ä¼šå¯¼è‡´ å¼•ç”¨å¼èµ‹å€¼ï¼Œä½†æ˜¯åªè¦æˆ‘å¯¹<code>Cat.prototype</code>ä¿®æ”¹ä¸å¯¹<code>F</code>é€ æˆå½±å“ï¼Œé‚£ä¹ˆé—´æ¥å¯¹<code>Animal</code>å°±æ²¡æœ‰å½±å“ã€‚</p>
<p>è€Œæœ€ç²¾å¦™ä¸€ç‚¹å°±æ˜¯<code>Cat.prototype = new F();</code>è¿™æ­¥ï¼Œæˆ‘ä»¬æ ¹æ®ä¹‹å‰çš„ä¼ªä»£ç å¯ä»¥çŸ¥é“ï¼Œè¿™æ­¥æ˜¯å°†<code>Cat.prototype.__proto__ = F.prototype</code>ï¼Œä¹Ÿå°±åœ¨å˜ç›¸å˜æˆ<code>Cat.prototype.__proto__ = Animal.prototype</code></p>
<p>é‚£ä¹ˆå³ä½¿æˆ‘ä»¬å¯¹<code>Cat.prototype</code>æœ¬èº«è¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œæˆ–è€…æ·»åŠ ä»»ä½•å…¶ä»–å±æ€§ä¹Ÿä¸ä¼šå½±å“<code>Cat.prototype.__proto__</code>ï¼Œé™¤éæˆ‘ä»¬æ˜¾ç¤ºä¿®æ”¹å®ƒï¼ˆæˆ–è€…å¯¹ä¿®æ”¹<code>F.prototype</code>ï¼‰</p>
<h4 data-id="heading-5">æ‹“å±•ï¼š</h4>
<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶å†™æˆç»§æ‰¿å‡½æ•°ï¼ˆextendï¼‰ï¼Œè¿™ä¹Ÿç®—æ‰‹å†™é¢˜å§ QwQ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">extend</span>(<span class="hljs-params">Parent, Child</span>) {
    <span class="hljs-comment">// ä¸­ä»‹å‡½æ•°</span>
    <span class="hljs-keyword">var</span> F = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {}; <span class="hljs-comment">// å‡½æ•°è¡¨è¾¾å¼ï¼ˆæœ‰å†…å­˜å¼€é”€ï¼Œä½†æ˜¯å› ä¸ºæ˜¯ç©ºå‡½æ•°é—®é¢˜ä¸å¤§ï¼‰</span>
    <span class="hljs-comment">// æŒ‡å‘çˆ¶ç±»åŸå‹</span>
    F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
    <span class="hljs-comment">// æŒ‡å‘ç©ºå¯¹è±¡å®ä¾‹</span>
    <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>(); <span class="hljs-comment">// å®ä¾‹çš„ä¿®æ”¹ä¸ä¼šå½±å“åŸå‹å¯¹è±¡</span>
    <span class="hljs-comment">// ä¿®å¤æ„é€ å‡½æ•°æŒ‡å‘</span>
    <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>; 
}

<span class="hljs-title function_">extend</span>(<span class="hljs-title class_">Animal</span>, <span class="hljs-title class_">Cat</span>)
</code></pre>
<h3 data-id="heading-6">4. Object.create()ï¼ˆES5 æ¨èæ–¹å¼ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Cat</span>;
</code></pre>
<p>ä»¥ <code>Animal.prototype</code> ä¸ºåŸå‹åˆ›å»ºæ–°å¯¹è±¡ï¼Œåœ¨ä¸æ±¡æŸ“çˆ¶ç±»æ„é€ å‡½æ•°çš„å‰æä¸‹ï¼Œæ›´å®‰å…¨åœ°å»ºç«‹å­ç±»åˆ°çˆ¶ç±»çš„åŸå‹é“¾è¿æ¥ï¼Œå¹¶ä¸”æ›´åŠ é€‚é…ç°ä»£ç»§æ‰¿å†™æ³•ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“</h2>






























<table><thead><tr><th>ç»§æ‰¿æ–¹å¼</th><th>æ˜¯å¦æ¨è</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç›´æ¥èµ‹å€¼åŸå‹</td><td>âŒ</td><td>æ±¡æŸ“çˆ¶ç±» constructor</td></tr><tr><td>åŸå‹é“¾ç»§æ‰¿</td><td>âŒ</td><td>å¼•ç”¨å±æ€§å…±äº«é—®é¢˜</td></tr><tr><td>ä¸­ä»‹å‡½æ•°</td><td>âœ…ï¼ˆå…¼å®¹æ—§ç¯å¢ƒï¼‰</td><td>å®‰å…¨éš”ç¦»</td></tr><tr><td><code>Object.create()</code></td><td>âœ…âœ…</td><td>ç°ä»£æ ‡å‡†ï¼Œè¯­ä¹‰æ¸…æ™°</td></tr></tbody></table>
<h3 data-id="heading-8">æœ€ä½³å®è·µï¼š</h3>
<ol>
<li><strong>å±æ€§ç»§æ‰¿</strong> â†’ ç”¨ <code>Parent.call(this, ...args)</code></li>
<li><strong>æ–¹æ³•ç»§æ‰¿</strong> â†’ ç”¨ <code>Child.prototype = Object.create(Parent.prototype)</code></li>
<li><strong>ä¿®å¤ constructor</strong> â†’ æ˜¾å¼è®¾ç½® <code>Child.prototype.constructor = Child</code></li>
</ol>
<p>åŸå‹ç»§æ‰¿æ˜¯ JS çš„çµé­‚ã€‚ç†è§£ <code>call</code>/<code>apply</code> ï¼ŒæŒæ¡ <code>Object.create</code> å¦‚ä½•å®‰å…¨æ„å»ºåŸå‹é“¾ï¼Œäº†è§£å…¶ä»–æ„å»ºæ–¹æ³•æœ‰ä½•ä¸å¦¥ï¼Œä¸ºæˆ‘ä»¬å†™å‡ºå¥å£®çš„ç»§æ‰¿ç»“æ„æ·»ä¸€æŠŠåŠ›</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next AI Draw.ioï¼šå½“AIé‡è§Draw.ioå›¾è¡¨ç»˜åˆ¶]]></title>    <link>https://juejin.cn/post/7581693431739875391</link>    <guid>https://juejin.cn/post/7581693431739875391</guid>    <pubDate>2025-12-09T13:19:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581693431739875391" data-draft-id="7581678032336650282" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next AI Draw.ioï¼šå½“AIé‡è§Draw.ioå›¾è¡¨ç»˜åˆ¶"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2025-12-09T13:19:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next AI Draw.ioï¼šå½“AIé‡è§Draw.ioå›¾è¡¨ç»˜åˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T13:19:58.000Z" title="Tue Dec 09 2025 13:19:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨AIæŠ€æœ¯é‡å¡‘åº”ç”¨æ ¼å±€çš„æ—¶ä»£ï¼Œæ™ºèƒ½å›¾è¡¨ç»˜åˆ¶å·¥å…·æ­£é€æ¸æˆä¸ºæŠ€æœ¯æ–‡æ¡£ç¼–å†™ã€ç³»ç»Ÿè®¾è®¡ä¸å›¢é˜Ÿåä½œä¸­ä¸å¯æˆ–ç¼ºçš„åˆ©å™¨ã€‚è¿‡å»æˆ‘å¸¸ä½¿ç”¨ draw.io åˆ¶ä½œå›¾è¡¨ï¼Œè€Œæœ€è¿‘åœ¨ GitHub ä¸Šå‘ç°äº†ä¸€ä¸ªä¸º draw.io é›†æˆ AI èƒ½åŠ›çš„é¡¹ç›®â€”â€”è¿™æ— ç–‘æ˜¯ä¸ºè¿™æ¬¾å·¥å…·æ’ä¸Šäº†æ™ºèƒ½çš„ç¿…è†€ã€‚ä»Šå¤©ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æ¥äº†è§£è¿™ä¸ªä»¤äººæœŸå¾…çš„é¡¹ç›®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5344ca1344ed483486e6f11dd545ae9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891198&amp;x-signature=Hq2ZFHad2lAP55%2BfjN8jf04c5ns%3D" alt="17153200_30108ea40e.png" loading="lazy"/></p>
<p>17153200_30108ea40e.png</p>
<h2 data-id="heading-0">ğŸŒŸ é¡¹ç›®ç®€ä»‹</h2>
<p>åœ¨å½“ä»ŠAIæŠ€æœ¯é£é€Ÿå‘å±•çš„èƒŒæ™¯ä¸‹ï¼Œ<strong>Next AI Draw.io</strong> æ­£æ˜¯ä¸€æ¬¾å°†äººå·¥æ™ºèƒ½ä¸ä¸“ä¸šå›¾è¡¨ç»˜åˆ¶å®Œç¾èåˆçš„å¼€æºé¡¹ç›®ã€‚è¿™ä¸ªåŸºäºNext.jsçš„AIé©±åŠ¨å›¾è¡¨åˆ›å»ºå·¥å…·ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€äº¤äº’ï¼Œè®©å¤æ‚çš„æŠ€æœ¯å›¾è¡¨ç»˜åˆ¶å˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å•å’Œé«˜æ•ˆã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åªéœ€è¯´â€œç»™æˆ‘ç”»ä¸€ä¸ªäº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„å›¾â€ï¼ŒAIå°±èƒ½åœ¨draw.ioç”»å¸ƒä¸Šä¸ºä½ ç”Ÿæˆä¸“ä¸šçš„æ¶æ„å›¾è¡¨â€”â€”è¿™æ­£æ˜¯Next AI Draw.ioå¸¦ç»™æˆ‘ä»¬çš„é­”æ³•ä½“éªŒã€‚</p>
<p>å½“å‰é¡¹ç›®åœ¨githubä¸Šå·²æœ‰5.6k star</p>
<p>githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDayuanJiang%2Fnext-ai-draw-io" target="_blank" title="https://github.com/DayuanJiang/next-ai-draw-io" ref="nofollow noopener noreferrer">github.com/DayuanJiangâ€¦</a></p>
<p>æ¼”ç¤ºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnext-ai-drawio.jiang.jp%2F" target="_blank" title="https://next-ai-drawio.jiang.jp/" ref="nofollow noopener noreferrer">next-ai-drawio.jiang.jp/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f0a01ae09b346a09db0e27a4662e00f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891198&amp;x-signature=w9Dfq1R1TUXCEUmAqa9qlVvvifc%3D" alt="_20251209_190422.png" loading="lazy"/></p>
<p>_20251209_190422.png</p>
<h2 data-id="heading-1">âœ¨ æ ¸å¿ƒç‰¹æ€§</h2>
<h3 data-id="heading-2">ğŸ¤– AIé©±åŠ¨çš„æ™ºèƒ½å›¾è¡¨åˆ›å»º</h3>
<ul>
<li><strong>è‡ªç„¶è¯­è¨€ç”Ÿæˆå›¾è¡¨</strong>ï¼šç”¨å¯¹è¯çš„æ–¹å¼æè¿°ä½ çš„éœ€æ±‚ï¼ŒAIè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„draw.ioå›¾è¡¨</li>
<li><strong>å¤šäº‘æ¶æ„å›¾æ”¯æŒ</strong>ï¼šç‰¹åˆ«ä¼˜åŒ–äº†AWSã€GCPã€Azureç­‰äº‘æœåŠ¡æ¶æ„å›¾çš„ç”Ÿæˆ</li>
<li><strong>å›¾åƒè½¬å›¾è¡¨åŠŸèƒ½</strong>ï¼šä¸Šä¼ ç°æœ‰å›¾è¡¨æˆ–æˆªå›¾ï¼ŒAIå¸®ä½ è‡ªåŠ¨å¤åˆ¶å’Œå¢å¼º</li>
</ul>
<h3 data-id="heading-3">ğŸ¯ ä¸“ä¸šçº§å›¾è¡¨åŠŸèƒ½</h3>
<ul>
<li><strong>åŠ¨ç”»è¿æ¥å™¨</strong>ï¼šåœ¨å›¾è¡¨å…ƒç´ é—´åˆ›å»ºåŠ¨æ€çš„è¿æ¥çº¿ï¼Œè®©æ•°æ®æµåŠ¨å’Œå…³ç³»æ›´ç›´è§‚</li>
<li><strong>å®Œæ•´çš„ç‰ˆæœ¬å†å²</strong>ï¼šæ¯æ¬¡AIä¿®æ”¹éƒ½æœ‰è®°å½•ï¼Œå¯ä»¥éšæ—¶å›é€€åˆ°ä¹‹å‰çš„ç‰ˆæœ¬</li>
<li><strong>å¤šæä¾›å•†æ”¯æŒ</strong>ï¼šå…¼å®¹å¸‚é¢ä¸Šä¸»æµçš„å¤§è¯­è¨€æ¨¡å‹æœåŠ¡</li>
</ul>
<h3 data-id="heading-4">ğŸ”§ å¼€å‘è€…å‹å¥½è®¾è®¡</h3>
<ul>
<li><strong>æœ¬åœ°APIå¯†é’¥ç®¡ç†</strong>ï¼šä½ çš„APIå¯†é’¥åªä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œç¡®ä¿æ•°æ®å®‰å…¨</li>
<li><strong>æ¨¡å—åŒ–æ¶æ„</strong>ï¼šæ¸…æ™°çš„ä»£ç ç»“æ„ä¾¿äºäºŒæ¬¡å¼€å‘å’Œå®šåˆ¶</li>
<li><strong>å®Œæ•´çš„ç±»å‹æ”¯æŒ</strong>ï¼šåŸºäºTypeScriptå¼€å‘ï¼Œæä¾›ä¼˜ç§€çš„å¼€å‘ä½“éªŒ</li>
</ul>
<h2 data-id="heading-5">ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—</h2>
<h3 data-id="heading-6">Dockerä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰</h3>
<p>å¯¹äºæƒ³è¦å¿«é€Ÿä½“éªŒçš„ç”¨æˆ·ï¼ŒDockeræ˜¯æœ€ä½³é€‰æ‹©ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½¿ç”¨OpenAI GPT-4oæ¨¡å‹ï¼Œå¦‚æœä½¿ç”¨ä»£ç†åœ°å€ï¼ŒæŒ‡å®šOPENAI_BASE_URL</span>
docker run -d -p 3000:3000 \
  -e <span class="hljs-attr">AI_PROVIDER</span>=openai \
  -e <span class="hljs-attr">AI_MODEL</span>=gpt-<span class="hljs-number">4</span>o \
  -e <span class="hljs-attr">OPENAI_API_KEY</span>=your_openai_key \
  -e <span class="hljs-attr">OPENAI_BASE_URL</span>=your_proxy_url \
  ghcr.io/dayuanjiang/next-ai-draw-io:latest
</code></pre>
<p>æˆ‘æœ¬åœ°ä½¿ç”¨çš„æ˜¯docker-composeéƒ¨ç½²ï¼Œä¸€ä¸‹æ˜¯ymlå†…å®¹</p>
<pre><code class="hljs language-ini" lang="ini">services:
  next-ai-draw-io:
  <span class="hljs-comment"># è‹¥å®˜æ–¹é•œåƒä¸‹è½½æ…¢ï¼Œå¯ä»¥ä½¿ç”¨åšä¸»è½¬å­˜çš„é•œåƒ registry.cn-hangzhou.aliyuncs.com/xjpublic/next-ai-draw-io:latest</span>
    image: ghcr.io/dayuanjiang/next-ai-draw-io:latest 
    container_name: next-ai-draw-io
    restart: unless-stopped
    ports:
      - "3100:3000"
      <span class="hljs-comment"># æˆ‘ä½¿ç”¨çš„æ˜¯kimiçš„æ¨¡å‹ï¼ŒOPENAI_BASE_URLæ”¹ä¸ºkimiçš„åœ°å€å³å¯</span>
    environment:
      - <span class="hljs-attr">AI_PROVIDER</span>=openai
      - <span class="hljs-attr">AI_MODEL</span>=kimi-k2-turbo-preview
      - <span class="hljs-attr">OPENAI_BASE_URL</span>=https://api.moonshot.cn/v1
      - <span class="hljs-attr">OPENAI_API_KEY</span>=_API_KEY
</code></pre>
<p>è‹¥å®˜æ–¹é•œåƒä¸‹è½½æ…¢ï¼Œå¯ä»¥ä½¿ç”¨åšä¸»è½¬å­˜çš„é•œåƒ <code>registry.cn-hangzhou.aliyuncs.com/xjpublic/next-ai-draw-io:latest</code></p>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨é¡¹ç›®</p>
<pre><code class="hljs">docker-compose up -d 
</code></pre>
<p>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Fip%3Aport" target="_blank" title="http://ip:port" ref="nofollow noopener noreferrer">http://ip:port</a> å³å¯ä½¿ç”¨</p>
<h2 data-id="heading-7">ğŸ¨ ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-8">åˆ›å»ºç³»ç»Ÿæµç¨‹å›¾</h3>
<pre><code class="hljs">æç¤ºè¯ï¼šè®¾è®¡ä¸€ä¸ªç”¨æˆ·ç™»å½•ç³»ç»Ÿçš„æµç¨‹å›¾ï¼ŒåŒ…å«éªŒè¯ã€sessionç®¡ç†å’Œé”™è¯¯å¤„ç†
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e43165d4f62346dc8b1c1509c5eff3a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891198&amp;x-signature=9828jyeu%2Fix3HPfjMjto8pB%2Fdmo%3D" alt="ScreenShot_2025-12-09_192048_443.png" loading="lazy"/></p>
<p>ScreenShot_2025-12-09_192048_443.png</p>
<h3 data-id="heading-9">ç»˜åˆ¶ç½‘ç»œæ‹“æ‰‘</h3>
<pre><code class="hljs">æç¤ºè¯ï¼šç»˜åˆ¶ä¸€ä¸ªä¼ä¸šçº§ç½‘ç»œæ‹“æ‰‘å›¾ï¼ŒåŒ…å«é˜²ç«å¢™ã€äº¤æ¢æœºã€è·¯ç”±å™¨å’ŒæœåŠ¡å™¨é›†ç¾¤
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d6970a5eb9345c1b5f4a9ebf9e00e24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891198&amp;x-signature=ZVGM4DtufbqHXOOM8FIIQztuqn8%3D" alt="ScreenShot_2025-12-09_192735_685.png" loading="lazy"/></p>
<p>ScreenShot_2025-12-09_192735_685.png</p>
<h3 data-id="heading-10">å¤åˆ¶å’Œä¼˜åŒ–ç°æœ‰å›¾è¡¨</h3>
<p>ä¸Šä¼ ç°æœ‰çš„æ¶æ„å›¾æˆ–è®¾è®¡è‰å›¾ï¼ŒAIä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li>è¯†åˆ«å›¾ä¸­çš„å…ƒç´ å’Œç»“æ„</li>
<li>ç”Ÿæˆè§„èŒƒçš„draw.ioå›¾è¡¨</li>
<li>æ ¹æ®éœ€æ±‚è¿›è¡Œä¼˜åŒ–å’Œå¢å¼º</li>
</ol>
<h2 data-id="heading-11">ğŸ”Œ æ”¯æŒçš„AIæœåŠ¡å•†</h2>
<p>Next AI Draw.ioæ”¯æŒå‡ ä¹æ‰€æœ‰çš„ä¸»æµAIæœåŠ¡ï¼Œè®©ä½ çš„é€‰æ‹©æ›´åŠ çµæ´»ï¼š</p>








































<table><thead><tr><th>æœåŠ¡å•†</th><th>æ¨èæ¨¡å‹</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>Anthropic</td><td>Claude 3.5 Sonnet</td><td>å¯¹AWSå›¾è¡¨ç‰¹åˆ«ä¼˜åŒ–ï¼Œé€»è¾‘æ¨ç†èƒ½åŠ›å¼º</td></tr><tr><td>OpenAI</td><td>GPT-4o, GPT-4 Turbo</td><td>é€šç”¨æ€§å¼ºï¼Œå“åº”é€Ÿåº¦å¿«</td></tr><tr><td>Google AI</td><td>Gemini 2.0</td><td>å¤šæ¨¡æ€èƒ½åŠ›å¼º</td></tr><tr><td>DeepSeek</td><td>DeepSeek-R1</td><td>æ€§ä»·æ¯”é«˜ï¼Œä¸­æ–‡æ”¯æŒå¥½</td></tr><tr><td>Ollama</td><td>æœ¬åœ°æ¨¡å‹</td><td>æ•°æ®å®‰å…¨ï¼Œå®Œå…¨ç¦»çº¿</td></tr><tr><td>Azure OpenAI</td><td>GPT-4</td><td>ä¼ä¸šçº§åˆè§„éœ€æ±‚</td></tr></tbody></table>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ¨¡å‹ä¸åœ¨æ”¯æŒåˆ—è¡¨ä¸­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨é€šç”¨openaiå‚ç…§ä»¥ä¸‹é…ç½®</p>
<pre><code class="hljs language-ini" lang="ini">- <span class="hljs-attr">AI_PROVIDER</span>=openai     <span class="hljs-comment"># ä½¿ç”¨openaiï¼Œå‡ ä¹æ‰€æœ‰æ¨¡å‹éƒ½å…¼å®¹openaiæ ¼å¼</span>
- <span class="hljs-attr">AI_MODEL</span>=kimi-k2-turbo-preview   <span class="hljs-comment"># æ¨¡å‹åç§°</span>
- <span class="hljs-attr">OPENAI_BASE_URL</span>=https://api.moonshot.cn/v1 <span class="hljs-comment"># æ¨¡å‹åœ°å€</span>
- <span class="hljs-attr">OPENAI_API_KEY</span>=_API_KEY <span class="hljs-comment"># api key</span>
</code></pre>
<h2 data-id="heading-12">ğŸ’¡ ä½¿ç”¨æŠ€å·§</h2>
<h3 data-id="heading-13">1. æä¾›æ˜ç¡®çš„éœ€æ±‚</h3>
<p>è¶Šè¯¦ç»†çš„æè¿°ï¼ŒAIç”Ÿæˆçš„å›¾è¡¨è¶Šç²¾å‡†ã€‚åŒ…æ‹¬ï¼š</p>
<ul>
<li>å›¾è¡¨ç±»å‹ï¼ˆæ¶æ„å›¾ã€æµç¨‹å›¾ã€æ—¶åºå›¾ç­‰ï¼‰</li>
<li>ä½¿ç”¨çš„å›¾æ ‡åº“ï¼ˆAWSã€Azureã€GCPæˆ–é€šç”¨ï¼‰</li>
<li>å…·ä½“çš„ç»„ä»¶å’Œè¿æ¥å…³ç³»</li>
</ul>
<h3 data-id="heading-14">2. åˆ©ç”¨ç‰ˆæœ¬å†å²</h3>
<p>æ¯æ¬¡AIä¿®æ”¹éƒ½ä¼šåˆ›å»ºæ–°çš„ç‰ˆæœ¬ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>æŸ¥çœ‹æ¯æ¬¡ä¿®æ”¹çš„å…·ä½“å†…å®¹</li>
<li>æ¯”è¾ƒä¸åŒç‰ˆæœ¬é—´çš„å·®å¼‚</li>
<li>éšæ—¶å›é€€åˆ°ä¹‹å‰çš„ç‰ˆæœ¬</li>
</ul>
<h3 data-id="heading-15">3. æ¸è¿›å¼ä¼˜åŒ–</h3>
<p>å…ˆè®©AIç”ŸæˆåŸºç¡€æ¡†æ¶ï¼Œç„¶åé€šè¿‡å¯¹è¯é€æ­¥ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"æ·»åŠ ç›‘æ§å‘Šè­¦ç»„ä»¶"</span>
<span class="hljs-string">"å°†æ‰€æœ‰å­˜å‚¨æ”¹ä¸ºSSD"</span>
<span class="hljs-string">"å¢åŠ ç¾å¤‡æ¢å¤æµç¨‹"</span>
</code></pre>
<h2 data-id="heading-16">ğŸ› ï¸ å¼€å‘è€…è¿›é˜¶</h2>
<h3 data-id="heading-17">é¡¹ç›®æ¶æ„</h3>
<pre><code class="hljs language-bash" lang="bash">app/
â”œâ”€â”€ api/chat/          <span class="hljs-comment"># AIèŠå¤©APIç«¯ç‚¹</span>
â”œâ”€â”€ page.tsx           <span class="hljs-comment"># ä¸»é¡µé¢</span>
components/
â”œâ”€â”€ chat-panel.tsx     <span class="hljs-comment"># èŠå¤©ç•Œé¢</span>
â”œâ”€â”€ history-dialog.tsx <span class="hljs-comment"># å†å²è®°å½•æŸ¥çœ‹å™¨</span>
lib/
â”œâ”€â”€ ai-providers.ts    <span class="hljs-comment"># AIæœåŠ¡å•†é…ç½®</span>
â””â”€â”€ utils.ts           <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
</code></pre>
<h3 data-id="heading-18">æ·»åŠ è‡ªå®šä¹‰åŠŸèƒ½</h3>
<p>å¦‚æœä½ æƒ³æ‰©å±•åŠŸèƒ½ï¼Œå¯ä»¥ï¼š</p>
<ol>
<li>åœ¨<code>lib/ai-providers.ts</code>ä¸­æ·»åŠ æ–°çš„AIæœåŠ¡å•†</li>
<li>ä¿®æ”¹<code>components/chat-panel.tsx</code>å¢å¼ºç”¨æˆ·ç•Œé¢</li>
<li>æ‰©å±•<code>app/api/chat/route.ts</code>ä¸­çš„AIå·¥å…·é›†</li>
</ol>
<h2 data-id="heading-19">ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-20">æ¨¡å‹é€‰æ‹©ç­–ç•¥</h3>
<ul>
<li><strong>å¤æ‚æ¶æ„å›¾</strong>ï¼šæ¨èä½¿ç”¨Claude 3.5 Sonnetæˆ–GPT-4</li>
<li><strong>ç®€å•æµç¨‹å›¾</strong>ï¼šå¯ä»¥ä½¿ç”¨GPT-4oæˆ–DeepSeek-R1èŠ‚çœæˆæœ¬</li>
<li><strong>æœ¬åœ°éƒ¨ç½²</strong>ï¼šè€ƒè™‘ä½¿ç”¨Ollama+æœ¬åœ°æ¨¡å‹ä¿è¯æ•°æ®å®‰å…¨</li>
</ul>
<h3 data-id="heading-21">æˆæœ¬æ§åˆ¶</h3>
<ol>
<li>è®¾ç½®è®¿é—®å¯†ç ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®</li>
<li>å¯¹äºå›¢é˜Ÿä½¿ç”¨ï¼Œè€ƒè™‘é…ç½®ä½¿ç”¨é™é¢</li>
<li>å®šæœŸæ£€æŸ¥APIä½¿ç”¨æƒ…å†µï¼Œä¼˜åŒ–æç¤ºè¯</li>
</ol>
<h2 data-id="heading-22">ğŸ”® æœªæ¥å±•æœ›</h2>
<p>éšç€AIæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒNext AI Draw.ioä¹Ÿåœ¨æŒç»­è¿›åŒ–ï¼š</p>
<ul>
<li><strong>å®æ—¶åä½œ</strong>ï¼šå¤šç”¨æˆ·åŒæ—¶ç¼–è¾‘å’ŒAIè¾…åŠ©</li>
<li><strong>æ¨¡æ¿åº“</strong>ï¼šé¢„ç½®è¡Œä¸šæ ‡å‡†å›¾è¡¨æ¨¡æ¿</li>
<li><strong>æ™ºèƒ½åˆ†æ</strong>ï¼šåŸºäºå›¾è¡¨å†…å®¹çš„æ™ºèƒ½å»ºè®®</li>
<li><strong>æ’ä»¶ç”Ÿæ€</strong>ï¼šæ”¯æŒç¬¬ä¸‰æ–¹æ‰©å±•å’Œé›†æˆ</li>
</ul>
<h2 data-id="heading-23">ğŸ¯ ç»“è¯­</h2>
<p>åœ¨AIé‡å¡‘åº”ç”¨çš„æ—¶ä»£ï¼ŒNext AI Draw.ioä¸ºæˆ‘ä»¬å±•ç¤ºäº†AIå¦‚ä½•ä¸ä¼ ç»Ÿå·¥å…·ç»“åˆï¼Œåˆ›é€ å‡º1+1&gt;2çš„ä»·å€¼ã€‚æ— è®ºä½ æ˜¯ç³»ç»Ÿæ¶æ„å¸ˆã€æŠ€æœ¯æ–‡æ¡£å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯é¡¹ç›®ç»ç†ï¼Œè¿™ä¸ªå·¥å…·éƒ½èƒ½å¤§å¹…æå‡ä½ çš„å·¥ä½œæ•ˆç‡ã€‚</p>
<p>é€šè¿‡ç®€å•çš„éƒ¨ç½²æ­¥éª¤ï¼Œä½ å°±èƒ½æ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§çš„AIå›¾è¡¨åŠ©æ‰‹ã€‚å¼€æºçš„åŠ›é‡è®©æ¯ä¸ªäººéƒ½èƒ½äº«å—åˆ°æœ€å‰æ²¿çš„æŠ€æœ¯çº¢åˆ©ã€‚</p>
<h2 data-id="heading-24">âœ… é™„: draw-ioéƒ¨ç½²</h2>
<p>docker-compose.yml</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">draw:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">jgraph/drawio</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">draw</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">TZ:</span> <span class="hljs-string">Asia/Shanghai</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">3000</span><span class="hljs-string">:8080</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹åŠ¨å®ç° Spring Boot æ—¥å¿—é“¾è·¯è¿½è¸ªï¼Œæ— éœ€å¼•å…¥ç»„ä»¶ï¼Œæ—¥å¿—å®šä½æ›´æ–¹ä¾¿ï¼]]></title>    <link>https://juejin.cn/post/7581676787380060179</link>    <guid>https://juejin.cn/post/7581676787380060179</guid>    <pubDate>2025-12-09T13:27:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581676787380060179" data-draft-id="7581689310643421226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹åŠ¨å®ç° Spring Boot æ—¥å¿—é“¾è·¯è¿½è¸ªï¼Œæ— éœ€å¼•å…¥ç»„ä»¶ï¼Œæ—¥å¿—å®šä½æ›´æ–¹ä¾¿ï¼"/> <meta itemprop="keywords" content="Spring Boot"/> <meta itemprop="datePublished" content="2025-12-09T13:27:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®çš®æ—551"/> <meta itemprop="url" content="https://juejin.cn/user/2447981921436084"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹åŠ¨å®ç° Spring Boot æ—¥å¿—é“¾è·¯è¿½è¸ªï¼Œæ— éœ€å¼•å…¥ç»„ä»¶ï¼Œæ—¥å¿—å®šä½æ›´æ–¹ä¾¿ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2447981921436084/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®çš®æ—551
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T13:27:38.000Z" title="Tue Dec 09 2025 13:27:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ul>
<li>å‰è¨€</li>
<li>æ­£æ–‡</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb5895eea56a4656b663568d1e75a96a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891657&amp;x-signature=6S4gnqU5Xr%2FZ94Lw5fsKetV4CLA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<hr/>
<h2 data-id="heading-0"><strong>å‰è¨€</strong></h2>
<p>ä»æ–‡ç« æ ‡é¢˜å°±çŸ¥é“ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯ä»‹ç»äº›ä»€ä¹ˆã€‚</p>
<p>è¿™æ˜¯æˆ‘ä¸€ä½æœ‹å‹çš„é—®é¢˜åé¦ˆï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e3908004aa64944b539be89f8692cfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891657&amp;x-signature=7EMKwLnTjExdWxrkqRfg%2FAW5nGM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>å¥½åƒæ˜¯çš„ï¼Œç¡®å®è¿™ç§ç°è±¡æ˜¯æ™®éå­˜åœ¨çš„ã€‚</p>
<p>æœ‰æ—¶å€™ä¸€ä¸ªä¸šåŠ¡è°ƒç”¨é“¾åœºæ™¯ï¼Œå¾ˆé•¿ï¼Œè°ƒäº†å„ç§å„æ ·çš„æ–¹æ³•ï¼Œçœ‹æ—¥å¿—çš„æ—¶å€™ï¼Œå„ä¸ªæ¥å£çš„æ—¥å¿—ç©¿æ’ï¼Œç¡®å®è®©äººå¤´å¤§ã€‚</p>
<p>æ¨¡ç³ŠåŒ¹é…æœç´¢æ—¥å¿—èƒ½è§£å†³å—ï¼Ÿ èƒ½è§£å†³ä¸€ç‚¹ç‚¹ã€‚ ä½†æ˜¯ä¸èƒ½å®Œå…¨å‘ˆç°å‡ºæ•´ä¸ªé“¾è·¯ç›¸å…³çš„æ—¥å¿—ã€‚</p>
<p>é‚£è¦åšåˆ°æ–¹ä¾¿ï¼Œå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯æŠŠåŒä¸€æ¬¡çš„ä¸šåŠ¡è°ƒç”¨é“¾ä¸Šçš„æ—¥å¿—ä¸²èµ·æ¥ã€‚</p>
<p>ä»€ä¹ˆæ•ˆæœï¼Ÿ å…ˆçœ‹ä¸€ä¸ªå®ç°åçš„æ•ˆæœå›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6ab2ba536984c27a9999c2687177357~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891657&amp;x-signature=ox7S9MCFXfClrwcQK%2BiZXATyzHM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>è¿™æ ·ä¸‹æ¥ï¼Œæˆ‘ä»¬å†é…åˆæ¨¡ç³ŠåŒ¹é…æŸ¥æ‰¾æ—¥å¿—ï¼Œæ•ˆæœä¸å°±åˆšåˆšçš„äº†ã€‚</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-built_in">cat</span> -n info.<span class="hljs-built_in">log</span> |grepÂ <span class="hljs-string">"a415ad50dbf84e99b1b56a31aacd209c"</span>
</code></pre>
<p>æˆ–è€…</p>
<pre><code class="hljs language-c" lang="c">grep <span class="hljs-number">-10</span>Â <span class="hljs-string">'a415ad50dbf84e99b1b56a31aacd209c'</span>Â info.<span class="hljs-built_in">log</span> Â  ï¼ˆ<span class="hljs-number">10</span>æ˜¯æŒ‡ä¸Šä¸‹<span class="hljs-number">10</span>è¡Œï¼‰
</code></pre>
<p>ä¸å¤šè¯´ï¼Œå¼€æ•´ã€‚</p>
<h2 data-id="heading-1"><strong>æ­£æ–‡</strong></h2>
<p>æƒ¯ä¾‹ï¼Œå…ˆçœ‹ä¸€çœ¼è¿™æ¬¡å®æˆ˜æœ€ç»ˆå·¥ç¨‹çš„ç»“æ„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeca86e02240434bb3bc28469f474a37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891657&amp;x-signature=Gqm2YBRw7Yn7Hu9G3V1jBjq9k94%3D" alt="185a167e3731a6f0326eae8e559f9c9c.png" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p><strong>â‘ pom.xml ä¾èµ–</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  <span class="hljs-comment">&lt;!--lomboké…ç½®--&gt;</span>
Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.16.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p><strong>â‘¡æ•´åˆlogbackï¼Œæ‰“å°æ—¥å¿—ï¼Œlogback-spring.xml (ç®€å•é…ç½®ä¸‹)</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span>Â encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">configuration</span> <span class="hljs-attr">debug</span>=<span class="hljs-string">"false"</span>&gt;</span>
Â  Â  <span class="hljs-comment">&lt;!--æ—¥å¿—å­˜å‚¨è·¯å¾„--&gt;</span>
Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"log"</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">"D:/test/log"</span>Â /&gt;</span>
Â  Â  <span class="hljs-comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span>
Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"console"</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.classic.encoder.PatternLayoutEncoder"</span>&gt;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">&lt;!--è¾“å‡ºæ ¼å¼åŒ–--&gt;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>[%X{TRACE_ID}] Â %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span>
Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span>
Â  Â  <span class="hljs-comment">&lt;!-- æŒ‰å¤©ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ --&gt;</span>
Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"file"</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">rollingPolicy</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">&lt;!--æ—¥å¿—æ–‡ä»¶å--&gt;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">FileNamePattern</span>&gt;</span>${log}/%d{yyyy-MM-dd}.log<span class="hljs-tag">&lt;/<span class="hljs-name">FileNamePattern</span>&gt;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">&lt;!--ä¿ç•™å¤©æ•°--&gt;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">MaxHistory</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">MaxHistory</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">rollingPolicy</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.classic.encoder.PatternLayoutEncoder"</span>&gt;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>[%X{TRACE_ID}] Â %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-comment">&lt;!--æ—¥å¿—æ–‡ä»¶æœ€å¤§çš„å¤§å°--&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">triggeringPolicy</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy"</span>&gt;</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">MaxFileSize</span>&gt;</span>10MB<span class="hljs-tag">&lt;/<span class="hljs-name">MaxFileSize</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">triggeringPolicy</span>&gt;</span>
Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span>

Â  Â  <span class="hljs-comment">&lt;!-- æ—¥å¿—è¾“å‡ºçº§åˆ« --&gt;</span>
Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"INFO"</span>&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"console"</span>Â /&gt;</span>
Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"file"</span>Â /&gt;</span>
Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<p>application.yml</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
Â  <span class="hljs-attr">port:</span> <span class="hljs-number">8826</span>
<span class="hljs-attr">logging:</span>
Â  <span class="hljs-attr">config:</span> <span class="hljs-string">classpath:logback-spring.xml</span>
</code></pre>
<p><strong>â‘¢è‡ªå®šä¹‰æ—¥å¿—æ‹¦æˆªå™¨ LogInterceptor.java</strong></p>
<p>ç”¨é€”ï¼šæ¯ä¸€æ¬¡é“¾è·¯ï¼Œçº¿ç¨‹ç»´åº¦ï¼Œæ·»åŠ æœ€ç»ˆçš„é“¾è·¯ID TRACE_IDã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> org.<span class="hljs-property">slf4j</span>.<span class="hljs-property">MDC</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">lang</span>.<span class="hljs-property">Nullable</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">util</span>.<span class="hljs-property">StringUtils</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">servlet</span>.<span class="hljs-property">HandlerInterceptor</span>;

<span class="hljs-keyword">import</span> javax.<span class="hljs-property">servlet</span>.<span class="hljs-property">http</span>.<span class="hljs-property">HttpServletRequest</span>;
<span class="hljs-keyword">import</span> javax.<span class="hljs-property">servlet</span>.<span class="hljs-property">http</span>.<span class="hljs-property">HttpServletResponse</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">UUID</span>;

<span class="hljs-comment">/**
Â * <span class="hljs-doctag">@Author</span>: JCccc
Â * <span class="hljs-doctag">@Date</span>: 2022-5-30 10:45
Â * <span class="hljs-doctag">@Description</span>:
Â */</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">LogInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> {

Â  Â  privatestaticfinal <span class="hljs-title class_">String</span> <span class="hljs-variable constant_">TRACE_ID</span> =Â <span class="hljs-string">"TRACE_ID"</span>;

Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">preHandle</span>(<span class="hljs-params">HttpServletRequest request, HttpServletResponse response, <span class="hljs-built_in">Object</span> handler</span>) {
Â  Â  Â  Â  <span class="hljs-title class_">String</span> tid = <span class="hljs-variable constant_">UUID</span>.<span class="hljs-title function_">randomUUID</span>().<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-string">"-"</span>,Â <span class="hljs-string">""</span>);
Â  Â  Â  Â  <span class="hljs-comment">//å¯ä»¥è€ƒè™‘è®©å®¢æˆ·ç«¯ä¼ å…¥é“¾è·¯IDï¼Œä½†éœ€ä¿è¯ä¸€å®šçš„å¤æ‚åº¦å”¯ä¸€æ€§ï¼›å¦‚æœæ²¡ä½¿ç”¨é»˜è®¤UUIDè‡ªåŠ¨ç”Ÿæˆ</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (!<span class="hljs-title class_">StringUtils</span>.<span class="hljs-title function_">isEmpty</span>(request.<span class="hljs-title function_">getHeader</span>(<span class="hljs-string">"TRACE_ID"</span>))){
Â  Â  Â  Â  Â  Â  tid=request.<span class="hljs-title function_">getHeader</span>(<span class="hljs-string">"TRACE_ID"</span>);
Â  Â  Â  Â  }
Â  Â  Â  Â  <span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">TRACE_ID</span>, tid);
Â  Â  Â  Â  returntrue;
Â  Â  }

Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">afterCompletion</span>(<span class="hljs-params">HttpServletRequest request, HttpServletResponse response, <span class="hljs-built_in">Object</span> handler,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-meta">@Nullable</span> Exception ex</span>) {
Â  Â  Â  Â  <span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-variable constant_">TRACE_ID</span>);
Â  Â  }

}
</code></pre>
<p>MDC(Mapped Diagnostic Context)è¯Šæ–­ä¸Šä¸‹æ–‡æ˜ å°„ï¼Œæ˜¯@Slf4jæä¾›çš„ä¸€ä¸ªæ”¯æŒåŠ¨æ€æ‰“å°æ—¥å¿—ä¿¡æ¯çš„å·¥å…·ã€‚</p>
<p>WebConfigurerAdapter.java æ·»åŠ æ‹¦æˆªå™¨</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">context</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Bean</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">context</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Configuration</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">servlet</span>.<span class="hljs-property">config</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">InterceptorRegistry</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">servlet</span>.<span class="hljs-property">config</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">WebMvcConfigurer</span>;

<span class="hljs-comment">/**
Â * <span class="hljs-doctag">@Author</span>: JCccc
Â * <span class="hljs-doctag">@Date</span>: 2022-5-30 10:47
Â * <span class="hljs-doctag">@Description</span>:
Â */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfigurerAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> {
Â  Â  <span class="hljs-meta">@Bean</span>
Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-title class_">LogInterceptor</span>Â <span class="hljs-title function_">logInterceptor</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â  returnnew <span class="hljs-title class_">LogInterceptor</span>();
Â  Â  }

Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">addInterceptors</span>(<span class="hljs-params">InterceptorRegistry registry</span>) {
Â  Â  Â  Â  registry.<span class="hljs-title function_">addInterceptor</span>(<span class="hljs-title function_">logInterceptor</span>());
Â  Â  Â  Â  <span class="hljs-comment">//å¯ä»¥å…·ä½“åˆ¶å®šå“ªäº›éœ€è¦æ‹¦æˆªï¼Œå“ªäº›ä¸æ‹¦æˆªï¼Œå…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£æ›´çµæ´»å®Œæˆ</span>
<span class="hljs-comment">// Â  Â  Â  Â  Â  Â  Â  Â .addPathPatterns("/**")</span>
<span class="hljs-comment">// Â  Â  Â  Â  Â  Â  Â  Â .excludePathPatterns("/testxx.html");</span>
Â  Â  }
}
</code></pre>
<p>ps: å…¶å®è¿™ä¸ªæ‹¦æˆªçš„éƒ¨åˆ†æ”¹ä¸ºä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£+aopä¹Ÿæ˜¯å¾ˆçµæ´»çš„ã€‚</p>
<p>åˆ°è¿™æ—¶å€™ï¼Œå…¶å®å·²ç»å®Œæˆï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
<p>æˆ‘ä»¬å†™ä¸ªæµ‹è¯•æ¥å£ï¼Œçœ‹ä¸‹æ•ˆæœï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"doTest"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">doTest</span>(<span class="hljs-meta">@RequestParam</span>(<span class="hljs-string">"name"</span>) <span class="hljs-title class_">String</span> name) throws <span class="hljs-title class_">InterruptedException</span> {
Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"å…¥å‚ name={}"</span>,name);
Â  Â  <span class="hljs-title function_">testTrace</span>();
Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"è°ƒç”¨ç»“æŸ name={}"</span>,name);
Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">"Hello,"</span>+name;
}
<span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">testTrace</span>(<span class="hljs-params"/>){
Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"è¿™æ˜¯ä¸€è¡Œinfoæ—¥å¿—"</span>);
Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¿™æ˜¯ä¸€è¡Œerroræ—¥å¿—"</span>);
Â  Â  <span class="hljs-title function_">testTrace2</span>();
}
<span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">testTrace2</span>(<span class="hljs-params"/>){
Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"è¿™ä¹Ÿæ˜¯ä¸€è¡Œinfoæ—¥å¿—"</span>);

}
</code></pre>
<p>æ•ˆæœï¼ˆOKçš„ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cb5ab24585640ea96a509db4943ce70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891657&amp;x-signature=mYJ4QYjI0%2BRSZQdVAKaz1dq9ebg%3D" alt="942981f88d0519b8db91d48d3bfb7cd4.png" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>è¿˜æ²¡å®Œã€‚</p>
<p>æ¥ä¸‹æ¥çœ‹ä¸€ä¸ªåœºæ™¯ï¼Œ ä½¿ç”¨å­çº¿ç¨‹çš„åœºæ™¯ï¼š</p>
<p>æ•…æ„å†™ä¸€ä¸ªå¼‚æ­¥çº¿ç¨‹ï¼ŒåŠ å…¥è¿™ä¸ªè°ƒç”¨é‡Œé¢ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b5cbd7125fd45b5b68ba01946d9283c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891657&amp;x-signature=PXJMSQcBllC2y9C%2B21TfW7PxYVk%3D" alt="0e36925e12430b60afeec92f33bae252.png" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>å†æ¬¡æ‰§è¡Œçœ‹å¼€æ•ˆæœï¼Œæ˜¾ç„¶å­çº¿ç¨‹ä¸¢å¤±äº†trackIdï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76a8b290d2ef4af7ae862c230e7f6cc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891657&amp;x-signature=64JskJB6kC4uEaF7uUjCApPYOZw%3D" alt="fd248434242615608dd4494d94c0df56.png" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦é’ˆå¯¹å­çº¿ç¨‹ä½¿ç”¨æƒ…å½¢ï¼Œåšè°ƒæ•´ï¼Œæ€è·¯ï¼š å°†çˆ¶çº¿ç¨‹çš„trackIdä¼ é€’ä¸‹å»ç»™å­çº¿ç¨‹å³å¯ã€‚</p>
<p><strong>â‘ ThreadPoolConfig.java å®šä¹‰çº¿ç¨‹æ± ï¼Œäº¤ç»™springç®¡ç†</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Configuration;
<span class="hljs-keyword">import</span> org.springframework.scheduling.<span class="hljs-keyword">annotation</span>.EnableAsync;
<span class="hljs-keyword">import</span> java.util.concurrent.Executor;

<span class="hljs-comment">/**
Â * <span class="hljs-doctag">@Author</span>: JCccc
Â * <span class="hljs-doctag">@Date</span>: 2022-5-30 11:07
Â * <span class="hljs-doctag">@Description</span>:
Â */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolConfig</span> {
Â  Â  <span class="hljs-comment">/**
Â  Â  Â * å£°æ˜ä¸€ä¸ªçº¿ç¨‹æ± 
Â  Â  Â *
Â  Â  Â * <span class="hljs-doctag">@return</span>Â æ‰§è¡Œå™¨
Â  Â  Â */</span>
Â  Â  <span class="hljs-meta">@Bean(<span class="hljs-string">"MyExecutor"</span>)</span>
Â  Â  <span class="hljs-keyword">public</span> ExecutorÂ asyncExecutor() {
Â  Â  Â  Â  MyThreadPoolTaskExecutor executor = new MyThreadPoolTaskExecutor();
Â  Â  Â  Â  <span class="hljs-comment">//æ ¸å¿ƒçº¿ç¨‹æ•°5ï¼šçº¿ç¨‹æ± åˆ›å»ºæ—¶å€™åˆå§‹åŒ–çš„çº¿ç¨‹æ•°</span>
Â  Â  Â  Â  executor.setCorePoolSize(<span class="hljs-number">5</span>);
Â  Â  Â  Â  <span class="hljs-comment">//æœ€å¤§çº¿ç¨‹æ•°5ï¼šçº¿ç¨‹æ± æœ€å¤§çš„çº¿ç¨‹æ•°ï¼Œåªæœ‰åœ¨ç¼“å†²é˜Ÿåˆ—æ»¡äº†ä¹‹åæ‰ä¼šç”³è¯·è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°çš„çº¿ç¨‹</span>
Â  Â  Â  Â  executor.setMaxPoolSize(<span class="hljs-number">5</span>);
Â  Â  Â  Â  <span class="hljs-comment">//ç¼“å†²é˜Ÿåˆ—500ï¼šç”¨æ¥ç¼“å†²æ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—</span>
Â  Â  Â  Â  executor.setQueueCapacity(<span class="hljs-number">500</span>);
Â  Â  Â  Â  <span class="hljs-comment">//å…è®¸çº¿ç¨‹çš„ç©ºé—²æ—¶é—´60ç§’ï¼šå½“è¶…è¿‡äº†æ ¸å¿ƒçº¿ç¨‹å‡ºä¹‹å¤–çš„çº¿ç¨‹åœ¨ç©ºé—²æ—¶é—´åˆ°è¾¾ä¹‹åä¼šè¢«é”€æ¯</span>
Â  Â  Â  Â  executor.setKeepAliveSeconds(<span class="hljs-number">60</span>);
Â  Â  Â  Â  <span class="hljs-comment">//çº¿ç¨‹æ± åçš„å‰ç¼€ï¼šè®¾ç½®å¥½äº†ä¹‹åå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å®šä½å¤„ç†ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹æ± </span>
Â  Â  Â  Â  executor.setThreadNamePrefix(<span class="hljs-string">"asyncJCccc"</span>);
Â  Â  Â  Â  executor.initialize();
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â executor;
Â  Â  }
}
</code></pre>
<p><strong>â‘¡ MyThreadPoolTaskExecutor.java æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ï¼Œé‡å†™äº†ä¸€äº›æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.slf4j.MDC;
<span class="hljs-keyword">import</span> org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;

<span class="hljs-keyword">import</span> java.util.concurrent.Callable;
<span class="hljs-keyword">import</span> java.util.concurrent.Future;

<span class="hljs-comment">/**
Â * <span class="hljs-doctag">@Author</span>: JCccc
Â * <span class="hljs-doctag">@Date</span>: 2022-5-30 11:13
Â * <span class="hljs-doctag">@Description</span>:
Â */</span>
publicfinalclass MyThreadPoolTaskExecutor Â <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span> Â {
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title function_">MyThreadPoolTaskExecutor</span><span class="hljs-params">()</span> {
Â  Â  Â  Â  <span class="hljs-built_in">super</span>();
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(Runnable task)</span> {
Â  Â  Â  Â  <span class="hljs-built_in">super</span>.execute(ThreadMdcUtil.wrap(task, MDC.getCopyOfContextMap()));
Â  Â  }


Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span> &lt;T&gt; Future&lt;T&gt; <span class="hljs-title function_">submit</span><span class="hljs-params">(Callable&lt;T&gt; task)</span> {
Â  Â  Â  Â  returnsuper.submit(ThreadMdcUtil.wrap(task, MDC.getCopyOfContextMap()));
Â  Â  }

Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span> Future&lt;?&gt; submit(Runnable task) {
Â  Â  Â  Â  returnsuper.submit(ThreadMdcUtil.wrap(task, MDC.getCopyOfContextMap()));
Â  Â  }
}
</code></pre>
<p><strong>â‘¢ThreadMdcUtil.java</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> org.<span class="hljs-property">slf4j</span>.<span class="hljs-property">MDC</span>;

<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Map</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">UUID</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">Callable</span>;

<span class="hljs-comment">/**
Â * <span class="hljs-doctag">@Author</span>: JCccc
Â * <span class="hljs-doctag">@Date</span>: 2022-5-30 11:14
Â * <span class="hljs-doctag">@Description</span>:
Â */</span>
publicfinal<span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadMdcUtil</span> {
Â  Â  privatestaticfinal <span class="hljs-title class_">String</span> <span class="hljs-variable constant_">TRACE_ID</span> =Â <span class="hljs-string">"TRACE_ID"</span>;

Â  Â  <span class="hljs-comment">// è·å–å”¯ä¸€æ€§æ ‡è¯†</span>
Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span>Â <span class="hljs-title function_">generateTraceId</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable constant_">UUID</span>.<span class="hljs-title function_">randomUUID</span>().<span class="hljs-title function_">toString</span>();
Â  Â  }

Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">setTraceIdIfAbsent</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">TRACE_ID</span>) == <span class="hljs-literal">null</span>) {
Â  Â  Â  Â  Â  Â  <span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">TRACE_ID</span>, <span class="hljs-title function_">generateTraceId</span>());
Â  Â  Â  Â  }
Â  Â  }

Â  Â  <span class="hljs-comment">/**
Â  Â  Â * ç”¨äºçˆ¶çº¿ç¨‹å‘çº¿ç¨‹æ± ä¸­æäº¤ä»»åŠ¡æ—¶ï¼Œå°†è‡ªèº«MDCä¸­çš„æ•°æ®å¤åˆ¶ç»™å­çº¿ç¨‹
Â  Â  Â *
Â  Â  Â * <span class="hljs-doctag">@param</span> <span class="hljs-variable">callable</span>
Â  Â  Â * <span class="hljs-doctag">@param</span> <span class="hljs-variable">context</span>
Â  Â  Â * <span class="hljs-doctag">@param</span> &lt;T&gt;
Â  Â  Â * <span class="hljs-doctag">@return</span>
Â  Â  Â */</span>
Â  Â  publicstatic &lt;T&gt; <span class="hljs-title class_">Callable</span>&lt;T&gt; <span class="hljs-title function_">wrap</span>(<span class="hljs-params">final Callable&lt;T&gt; callable, final <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; context</span>) {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â () -&gt; {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (context == <span class="hljs-literal">null</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">clear</span>();
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">setContextMap</span>(context);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">setTraceIdIfAbsent</span>();
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">try</span> {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â callable.<span class="hljs-title function_">call</span>();
Â  Â  Â  Â  Â  Â  } <span class="hljs-keyword">finally</span> {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">clear</span>();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };
Â  Â  }

Â  Â  <span class="hljs-comment">/**
Â  Â  Â * ç”¨äºçˆ¶çº¿ç¨‹å‘çº¿ç¨‹æ± ä¸­æäº¤ä»»åŠ¡æ—¶ï¼Œå°†è‡ªèº«MDCä¸­çš„æ•°æ®å¤åˆ¶ç»™å­çº¿ç¨‹
Â  Â  Â *
Â  Â  Â * <span class="hljs-doctag">@param</span> <span class="hljs-variable">runnable</span>
Â  Â  Â * <span class="hljs-doctag">@param</span> <span class="hljs-variable">context</span>
Â  Â  Â * <span class="hljs-doctag">@return</span>
Â  Â  Â */</span>
Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">Runnable</span> <span class="hljs-title function_">wrap</span>(<span class="hljs-params">final Runnable runnable, final <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; context</span>) {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â () -&gt; {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (context == <span class="hljs-literal">null</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">clear</span>();
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">setContextMap</span>(context);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">setTraceIdIfAbsent</span>();
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">try</span> {
Â  Â  Â  Â  Â  Â  Â  Â  runnable.<span class="hljs-title function_">run</span>();
Â  Â  Â  Â  Â  Â  } <span class="hljs-keyword">finally</span> {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable constant_">MDC</span>.<span class="hljs-title function_">clear</span>();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };
Â  Â  }
}
</code></pre>
<p>OKï¼Œé‡å¯æœåŠ¡ï¼Œå†çœ‹çœ‹æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7fd7ab3f7bf54acd9a101031b0a87bf4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765891657&amp;x-signature=aHTSQDW9wKc76Ok4w7uMPglyd4w%3D" alt="50cce9456a6ac156a0f208b5b04ec494.png" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>å¯ä»¥çœ‹çš„ï¼Œå­çº¿ç¨‹çš„æ—¥å¿—ä¹Ÿè¢«ä¸²èµ·æ¥äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½è¿ç®—ç¬¬1ç¯‡-å¼‚æˆ–è¿ç®—-å¿«é€Ÿæ‰¾å‡ºé‡å¤æ•°å­—]]></title>    <link>https://juejin.cn/post/7581666815003115571</link>    <guid>https://juejin.cn/post/7581666815003115571</guid>    <pubDate>2025-12-09T12:39:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581666815003115571" data-draft-id="7581698074361413641" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½è¿ç®—ç¬¬1ç¯‡-å¼‚æˆ–è¿ç®—-å¿«é€Ÿæ‰¾å‡ºé‡å¤æ•°å­—"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-09T12:39:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½è¿ç®—ç¬¬1ç¯‡-å¼‚æˆ–è¿ç®—-å¿«é€Ÿæ‰¾å‡ºé‡å¤æ•°å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T12:39:03.000Z" title="Tue Dec 09 2025 12:39:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‘˜è¦ï¼šæœ¬æ–‡ä»‹ç»äº†å¼‚æˆ–è¿ç®—çš„ç‰¹ç‚¹å’Œè¿ç®—è§„å¾‹ï¼Œå¹¶é€šè¿‡åˆ©ç”¨å¼‚æˆ–è¿ç®—è§£å†³äº†ä¸€ä¸ªç®—æ³•é¢˜ç›®ï¼šæ‰¾å‡º1-nè¿ç»­æ•°ç»„ä¸­çš„æƒŸä¸€é‡å¤æ•°å­—ã€‚</p>
<h2 data-id="heading-0">å¼‚æˆ–è¿ç®—çš„å·§å¦™åº”ç”¨ï¼šå¿«é€Ÿæ‰¾å‡ºé‡å¤æ•°å­—</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>å¼‚æˆ–è¿ç®—ï¼ˆXORï¼‰æ˜¯ä¸€ç§åŸºç¡€çš„äºŒè¿›åˆ¶è¿ç®—ï¼Œåœ¨ç¼–ç¨‹é¢è¯•å’Œç®—æ³•è®¾è®¡ä¸­æœ‰ç€æ„æƒ³ä¸åˆ°çš„å¦™ç”¨ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åˆ©ç”¨å¼‚æˆ–è¿ç®—çš„æ•°å­¦ç‰¹æ€§ï¼Œä»¥ O(n) æ—¶é—´å¤æ‚åº¦å’Œ O(1) ç©ºé—´å¤æ‚åº¦æ‰¾å‡ºæ•°ç»„ä¸­çš„é‡å¤æ•°å­—ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜å®šä¹‰</h3>
<p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n+1 çš„æ•°ç»„ï¼ŒåŒ…å« 1 åˆ° n ä¹‹é—´çš„æ•´æ•°ï¼Œ<strong>æ°å¥½æœ‰ä¸€ä¸ªæ•°å­—é‡å¤å‡ºç°ä¸€æ¬¡</strong>ï¼Œå…¶ä½™æ•°å­—å„å‡ºç°ä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>è¾“å…¥ï¼š<code>[1, 2, 3, 4, 5, 5]</code></li>
<li>è¾“å‡ºï¼š<code>5</code></li>
</ul>
<h3 data-id="heading-3">å¼‚æˆ–è¿ç®—çš„åŸºæœ¬æ€§è´¨</h3>
<p>åœ¨æ·±å…¥è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œå…ˆå›é¡¾å¼‚æˆ–è¿ç®—çš„å…³é”®ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>äº¤æ¢å¾‹</strong>ï¼š<code>a âŠ• b = b âŠ• a</code></li>
<li><strong>ç»“åˆå¾‹</strong>ï¼š<code>(a âŠ• b) âŠ• c = a âŠ• (b âŠ• c)</code></li>
<li><strong>è‡ªåæ€§</strong>ï¼š<code>a âŠ• a = 0</code></li>
<li><strong>å•ä½å…ƒ</strong>ï¼š<code>a âŠ• 0 = a</code></li>
<li><strong>æ¶ˆå»å¾‹</strong>ï¼š<code>a âŠ• b âŠ• a = b</code></li>
</ol>
<p>èƒŒåæ˜¯ä½è¿ç®—çš„æœ¬è´¨ã€‚</p>
<p>0 âŠ• 0 = 0ï¼Œ 0 âŠ• 1 = 1</p>
<p>é€šä¿—ç†è§£å°±æ˜¯ï¼š 0å’Œ0ä¸ç›¸ç­‰å—ï¼Ÿå¦ï¼Œä»–ä»¬ç›¸ç­‰ï¼Œå¦ç”¨0è¡¨ç¤ºï¼Œ æ˜¯ç”¨1è¡¨ç¤ºï¼Œæ‰€ä»¥å‰é¢çš„0æ˜¯æ•°å­—ï¼Œåé¢çš„0æ˜¯å¦ï¼Œ ä½è¿ç®—çš„0å’Œ1çš„åŒé‡å«ä¹‰æ˜¯ä½è¿ç®—çš„åŸºç¡€ã€‚</p>
<p>è¿™äº›æ€§è´¨æ„å‘³ç€å¼‚æˆ–è¿ç®—å¯ä»¥ä»»æ„é‡æ–°ç»„åˆå’ŒæŠµæ¶ˆç›¸åŒé¡¹ã€‚</p>
<h3 data-id="heading-4">å¸¸è§è¯¯åŒºä¸æ­£ç¡®è§£æ³•</h3>
<h4 data-id="heading-5">è¯¯åŒºï¼šç›´æ¥å¯¹æ•°ç»„æ‰€æœ‰å…ƒç´ è¿›è¡Œå¼‚æˆ–</h4>
<pre><code class="hljs language-python" lang="python">xor_all = <span class="hljs-number">1</span> âŠ• <span class="hljs-number">2</span> âŠ• <span class="hljs-number">3</span> âŠ• <span class="hljs-number">4</span> âŠ• <span class="hljs-number">5</span> âŠ• <span class="hljs-number">5</span>
        = (<span class="hljs-number">1</span> âŠ• <span class="hljs-number">2</span> âŠ• <span class="hljs-number">3</span> âŠ• <span class="hljs-number">4</span>) âŠ• (<span class="hljs-number">5</span> âŠ• <span class="hljs-number">5</span>)
        = (<span class="hljs-number">1</span> âŠ• <span class="hljs-number">2</span> âŠ• <span class="hljs-number">3</span> âŠ• <span class="hljs-number">4</span>) âŠ• <span class="hljs-number">0</span>
        = <span class="hljs-number">4</span>
</code></pre>
<p>ç»“æœä¸æ˜¯é‡å¤æ•°å­—ï¼Œè€Œæ˜¯å…¶ä»–æ•°å­—çš„å¼‚æˆ–å€¼ã€‚<strong>ç›´æ¥å¼‚æˆ–æ•´ä¸ªæ•°ç»„æ— æ³•æ‰¾å‡ºé‡å¤æ•°</strong>ï¼Œå› ä¸ºé‡å¤æ•°å‡ºç°ä¸¤æ¬¡ä¼šç›¸äº’æŠµæ¶ˆã€‚</p>
<h4 data-id="heading-6">æ­£ç¡®è§£æ³•ï¼šæ•°ç»„å¼‚æˆ–ä¸èŒƒå›´å¼‚æˆ–ç›¸ç»“åˆ</h4>
<p>è®¾æ•°ç»„ä¸º Aï¼Œé•¿åº¦ä¸º n+1ï¼ŒåŒ…å« 1 åˆ° n çš„æ•´æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªæ•°å­—é‡å¤ã€‚</p>
<p>è®¡ç®—ï¼š</p>
<ol>
<li>æ•°ç»„æ‰€æœ‰å…ƒç´ çš„å¼‚æˆ–å€¼ï¼š<code>xor_arr = A[0] âŠ• A[1] âŠ• ... âŠ• A[n]</code></li>
<li>1 åˆ° n çš„å¼‚æˆ–å€¼ï¼š<code>xor_range = 1 âŠ• 2 âŠ• ... âŠ• n</code></li>
<li>é‡å¤æ•°å­— = <code>xor_arr âŠ• xor_range</code></li>
</ol>
<h4 data-id="heading-7">åŸç†åˆ†æ</h4>
<p>å°†ä¸¤ä¸ªå¼‚æˆ–å€¼åˆå¹¶è€ƒè™‘ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">xor_arr âŠ• <span class="hljs-attr">xor_range</span> 
= (æ¯ä¸ªå…ƒç´ æŒ‰å‡ºç°æ¬¡æ•°å¼‚æˆ–) âŠ• (1åˆ°nå„å‡ºç°ä¸€æ¬¡)
</code></pre>
<ul>
<li><strong>éé‡å¤æ•°å­—</strong>ï¼šåœ¨æ•°ç»„ä¸­å‡ºç° 1 æ¬¡ï¼Œåœ¨ 1~n ä¸­å‡ºç° 1 æ¬¡ â†’ æ€»å…±å‡ºç° 2 æ¬¡ â†’ å¼‚æˆ–æŠµæ¶ˆ</li>
<li><strong>é‡å¤æ•°å­—</strong>ï¼šåœ¨æ•°ç»„ä¸­å‡ºç° 2 æ¬¡ï¼Œåœ¨ 1~n ä¸­å‡ºç° 1 æ¬¡ â†’ æ€»å…±å‡ºç° 3 æ¬¡ â†’ ä¿ç•™è¯¥æ•°å­—</li>
</ul>
<p>å› ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">a</span> âŠ• <span class="hljs-selector-tag">a</span> âŠ• <span class="hljs-selector-tag">a</span> = (<span class="hljs-selector-tag">a</span> âŠ• <span class="hljs-selector-tag">a</span>) âŠ• <span class="hljs-selector-tag">a</span> = <span class="hljs-number">0</span> âŠ• <span class="hljs-selector-tag">a</span> = <span class="hljs-selector-tag">a</span>
</code></pre>
<h4 data-id="heading-8">å®ä¾‹éªŒè¯</h4>
<p>å¯¹äºæ•°ç»„ <code>[1, 2, 3, 4, 5, 5]</code>ï¼ˆn=5ï¼‰ï¼š</p>
<ol>
<li><code>xor_arr = 1 âŠ• 2 âŠ• 3 âŠ• 4 âŠ• 5 âŠ• 5 = 1 âŠ• 2 âŠ• 3 âŠ• 4 = 4</code></li>
<li><code>xor_range = 1 âŠ• 2 âŠ• 3 âŠ• 4 âŠ• 5</code>
<ul>
<li>é€æ­¥è®¡ç®—ï¼š<code>1 âŠ• 2 = 3</code>ï¼Œ<code>3 âŠ• 3 = 0</code>ï¼Œ<code>0 âŠ• 4 = 4</code>ï¼Œ<code>4 âŠ• 5 = 1</code></li>
</ul>
</li>
<li>é‡å¤æ•°å­— = <code>4 âŠ• 1 = 5</code></li>
</ol>
<p>âœ… æ­£ç¡®æ‰¾å‡ºé‡å¤æ•°å­— 5ã€‚</p>
<h3 data-id="heading-9">ç®—æ³•å®ç°</h3>
<h4 data-id="heading-10">Python å®ç°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_duplicate</span>(<span class="hljs-params">nums</span>):
    n = <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span>
    
    <span class="hljs-comment"># è®¡ç®—æ•°ç»„æ‰€æœ‰å…ƒç´ çš„å¼‚æˆ–</span>
    xor_arr = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:
        xor_arr ^= num
    
    <span class="hljs-comment"># è®¡ç®— 1 åˆ° n çš„å¼‚æˆ–</span>
    xor_range = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):
        xor_range ^= i
    
    <span class="hljs-comment"># é‡å¤æ•°å­—</span>
    <span class="hljs-keyword">return</span> xor_arr ^ xor_range

<span class="hljs-comment"># æ›´ç®€æ´çš„å†™æ³•</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">find_duplicate_compact</span>(<span class="hljs-params">nums</span>):
    result = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> i, num <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(nums):
        result ^= num ^ (i + <span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span> result ^ <span class="hljs-built_in">len</span>(nums)  <span class="hljs-comment"># ä¿®æ­£è¾¹ç•Œ</span>
</code></pre>
<h4 data-id="heading-11">æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦</h4>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œåªéœ€éå†æ•°ç»„ä¸€æ¬¡</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1)ï¼Œåªä½¿ç”¨å¸¸æ•°ä¸ªé¢å¤–å˜é‡</li>
</ul>
<h3 data-id="heading-12">æ‰©å±•åº”ç”¨</h3>
<h4 data-id="heading-13">å˜ä½“é—®é¢˜ï¼šæ‰¾åˆ°é‡å¤å’Œç¼ºå¤±çš„æ•°å­—</h4>
<p>å¦‚æœæ•°ç»„é•¿åº¦ä¸º nï¼ŒåŒ…å« 1 åˆ° n çš„æ•°å­—ï¼Œä½†æœ‰ä¸€ä¸ªæ•°å­—é‡å¤ï¼Œä¸€ä¸ªæ•°å­—ç¼ºå¤±ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„å¼‚æˆ–æŠ€å·§ï¼š</p>
<ol>
<li>è®¡ç®— <code>xor_all = (æ‰€æœ‰æ•°ç»„å…ƒç´ å¼‚æˆ–) âŠ• (1åˆ°nå¼‚æˆ–)</code></li>
<li><code>xor_all</code> çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€ä½ä½çš„ 1ï¼Œè¡¨ç¤ºé‡å¤æ•°å’Œç¼ºå¤±æ•°åœ¨è¯¥ä½ä¸åŒ</li>
<li>æ ¹æ®è¯¥ä½å°†æ•°å­—åˆ†æˆä¸¤ç»„ï¼Œåˆ†åˆ«å¼‚æˆ–å¾—åˆ°ä¸¤ä¸ªæ•°å­—</li>
<li>åˆ¤æ–­å“ªä¸ªæ˜¯é‡å¤çš„ï¼Œå“ªä¸ªæ˜¯ç¼ºå¤±çš„</li>
</ol>
<h4 data-id="heading-14">å…¶ä»–åº”ç”¨åœºæ™¯</h4>
<ol>
<li><strong>æ‰¾å‡ºç°å¥‡æ•°æ¬¡çš„æ•°å­—</strong>ï¼šåœ¨ä¸€ç»„æ•°å­—ä¸­ï¼Œåªæœ‰ä¸€ä¸ªæ•°å­—å‡ºç°å¥‡æ•°æ¬¡ï¼Œå…¶ä½™å‡ºç°å¶æ•°æ¬¡</li>
<li><strong>äº¤æ¢ä¸¤ä¸ªå˜é‡</strong>ï¼šä¸ä½¿ç”¨ä¸´æ—¶å˜é‡äº¤æ¢ä¸¤ä¸ªæ•´æ•°</li>
<li><strong>åŠ å¯†ä¸­çš„ç®€å•æ··æ·†</strong>ï¼šåŸºäºå¼‚æˆ–çš„ç®€å•åŠ å¯†ç®—æ³•</li>
</ol>
<h3 data-id="heading-15">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>å‰ææ¡ä»¶</strong>ï¼šè¯¥æ–¹æ³•è¦æ±‚æ°å¥½ä¸€ä¸ªæ•°å­—é‡å¤ï¼Œä¸”æ•°å­—èŒƒå›´æ˜ç¡®ï¼ˆ1 åˆ° nï¼‰</li>
<li><strong>è¾¹ç•Œæƒ…å†µ</strong>ï¼šæ³¨æ„æ•°ç»„ç´¢å¼•å’ŒèŒƒå›´çš„å¯¹åº”å…³ç³»</li>
<li><strong>æº¢å‡ºé—®é¢˜</strong>ï¼šå¼‚æˆ–è¿ç®—ä¸ä¼šå¼•èµ·æº¢å‡ºé—®é¢˜</li>
</ol>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p>å¼‚æˆ–è¿ç®—ä¸ä»…æ˜¯ä¸€ç§åŸºæœ¬çš„é€»è¾‘è¿ç®—ï¼Œæ›´æ˜¯ç®—æ³•è®¾è®¡ä¸­çš„æœ‰åŠ›å·¥å…·ã€‚é€šè¿‡å·§å¦™çš„æ•°å­¦å˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p>
<ol>
<li>åˆ©ç”¨è‡ªåæ€§æ¶ˆé™¤æˆå¯¹å‡ºç°çš„æ•°å­—</li>
<li>ç»“åˆèŒƒå›´å¼‚æˆ–æ¥åˆ†ç¦»é‡å¤é¡¹</li>
<li>åœ¨ O(1) é¢å¤–ç©ºé—´å†…è§£å†³é—®é¢˜</li>
</ol>
<p>è¿™ç§è§£æ³•ä½“ç°äº†è®¡ç®—æœºç§‘å­¦ä¸­ä¸€ä¸ªé‡è¦çš„æ€æƒ³ï¼š<strong>é€šè¿‡æ•°å­¦å˜æ¢å°†é—®é¢˜è½¬åŒ–ä¸ºæ›´å®¹æ˜“å¤„ç†çš„å½¢å¼</strong>ã€‚æŒæ¡å¼‚æˆ–è¿ç®—çš„ç‰¹æ€§ï¼Œå¯¹äºè§£å†³ä½æ“ä½œç›¸å…³é—®é¢˜æœ‰ç€é‡è¦æ„ä¹‰ã€‚</p>
<h3 data-id="heading-17">æ€è€ƒé¢˜</h3>
<ol>
<li>å¦‚æœæ•°ç»„ä¸­æœ‰ä¸¤ä¸ªæ•°å­—é‡å¤ï¼Œè¿˜èƒ½ç”¨å¼‚æˆ–æ³•è§£å†³å—ï¼Ÿ</li>
<li>å¦‚æœæ•°å­—èŒƒå›´ä¸æ˜¯ä» 1 å¼€å§‹ï¼Œè€Œæ˜¯ä» m åˆ° nï¼Œæ–¹æ³•éœ€è¦å¦‚ä½•è°ƒæ•´ï¼Ÿ</li>
<li>å¦‚ä½•ç”¨å¼‚æˆ–è¿ç®—åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦æ˜¯ 2 çš„å¹‚ï¼Ÿ</li>
</ol>
<hr/>
<p><strong>å…³é”®ç‚¹</strong>ï¼šå¼‚æˆ–è¿ç®—çš„æŠµæ¶ˆç‰¹æ€§ä½¿å…¶æˆä¸ºå¤„ç†"æˆå¯¹å‡ºç°"é—®é¢˜çš„ç†æƒ³å·¥å…·ï¼Œè€Œç»“åˆæ•°å­¦èŒƒå›´é™åˆ¶å¯ä»¥è¿›ä¸€æ­¥åˆ†ç¦»å‡ºå¼‚å¸¸é¡¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç™¾åº¦æ…§æ’­æ˜Ÿæ•°å­—äººæŠ€æœ¯æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7581667332307058726</link>    <guid>https://juejin.cn/post/7581667332307058726</guid>    <pubDate>2025-12-09T11:16:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581667332307058726" data-draft-id="7581448482545729562" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç™¾åº¦æ…§æ’­æ˜Ÿæ•°å­—äººæŠ€æœ¯æ¼”è¿›"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-09T11:16:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾åº¦Geekè¯´"/> <meta itemprop="url" content="https://juejin.cn/user/4186596000416094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç™¾åº¦æ…§æ’­æ˜Ÿæ•°å­—äººæŠ€æœ¯æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4186596000416094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾åº¦Geekè¯´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T11:16:37.000Z" title="Tue Dec 09 2025 11:16:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¯¼è¯»</h2>
<p>ä»2023å¹´æˆç«‹åˆ°å¦‚ä»Šæ—¥å‡æœåŠ¡2ä¸‡+ç›´æ’­é—´ï¼Œç™¾åº¦æ…§æ’­æ˜Ÿå·²æ¼”è¿›ä¸ºè¦†ç›–è„šæœ¬ç”Ÿæˆã€å®æ—¶é—®ç­”ã€æ™ºèƒ½å†³ç­–ã€éŸ³è§†é¢‘å…‹éš†çš„å…¨é“¾è·¯AIç›´æ’­å¹³å°ã€‚æœ¬æ–‡æ·±å…¥è§£è¯»å…¶æŠ€æœ¯æ¶æ„ï¼šå¦‚ä½•é€šè¿‡æ£€ç´¢å¢å¼ºå’Œå¼ºåŒ–å­¦ä¹ ç”Ÿæˆé«˜è½¬åŒ–è„šæœ¬ï¼›å¦‚ä½•åˆ©ç”¨å¼ºåŒ–å­¦ä¹ æ™ºèƒ½ä¸­æ§åŠ¨æ€ä¼˜åŒ–ç›´æ’­ç­–ç•¥ï¼›ä»¥åŠå¦‚ä½•å°†è¯­éŸ³ä¸å½¢è±¡å…‹éš†æ•ˆç‡æå‡è‡³â€œå°æ—¶çº§â€ï¼›å¦‚ä½•æ„å»ºâ€œå…ˆéªŒ-åéªŒâ€æ•°æ®é£è½®ï¼Œè®©æ¨¡å‹è‡ªä¸»è¿›åŒ–ï¼›ã€‚ç½—æ°¸æµ©æ•°å­—äººç›´æ’­GMVçªç ´5500ä¸‡çš„æ¡ˆä¾‹ï¼ŒéªŒè¯äº†å…¶â€œè¶…è¶ŠçœŸäººâ€çš„å¸¦è´§èƒ½åŠ›ã€‚æœªæ¥ï¼Œæ…§æ’­æ˜Ÿæ­£æœç€æ›´æ™ºèƒ½ã€æ›´æ‹ŸçœŸã€æ›´é«˜æ•ˆçš„æ–¹å‘æŒç»­è¿­ä»£ã€‚</p>
<h2 data-id="heading-1">01 æ…§æ’­æ˜Ÿä»‹ç»</h2>
<p>ç”µå•†æ•°å­—äººç›´æ’­ï¼ˆæ…§æ’­æ˜Ÿï¼‰æ­£å¼æˆç«‹äº2023å¹´ï¼Œæ˜¯ä¸€æ¬¾æ±‡é›†äº†ç™¾åº¦åœ¨è§†è§‰ï¼Œè¯­éŸ³å’Œè¯­è¨€æ–¹é¢AIèƒ½åŠ›çš„åŸç”ŸAIåº”ç”¨äº§å“ï¼Œè‡´åŠ›äºæ‰“é€ ä»£é™…é¢†å…ˆçš„è¶…è¶ŠçœŸäººçš„ç›´æ’­ä½“éªŒã€‚25å¹´åº•æ—¥å‡å¼€æ’­ç›´æ’­é—´å·²è¾¾2ä¸‡å¤šä¸ªï¼Œè¦†ç›–ç”µå•†ã€æ•™è‚²ã€å¥åº·ã€é‡‘èã€æ³›çŸ¥è¯†å†…å®¹ç­‰å¤šä¸ªè¡Œä¸šã€‚ç»è¿‡ä¸¤å¹´å¤šçš„äº§å“æ‰“ç£¨å’ŒæŠ€æœ¯çªç ´ï¼Œæ…§æ’­æ˜Ÿæ•°å­—äººç›´æ’­å·²å…·å¤‡è¶…è¶ŠçœŸäººçš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œè¿™äº›èƒ½åŠ›æ”¯æ’‘äº†ç½—æ°¸æµ©2025å¹´6æœˆ15 æ—¥çš„æ•°å­—äººç›´æ’­é¦–ç§€ï¼Œå¸å¼•äº†è¶… 1300 ä¸‡äººæ¬¡è§‚çœ‹ï¼ŒGMVï¼ˆå•†å“äº¤æ˜“æ€»é¢ï¼‰çªç ´ 5500 ä¸‡å…ƒï¼Œè¿™ä¸€æˆç»©è¶…è¿‡äº†å…¶åŒå¹´ 5 æœˆçš„çœŸäººç›´æ’­é¦–ç§€ï¼ˆGMV 5000 ä¸‡ï¼‰ã€‚</p>
<h3 data-id="heading-2"><strong>1.1Â å•†å®¶ä¸šåŠ¡è§†è§’â€”â€”å¼€æ’­æµç¨‹</strong></h3>
<p>å•†å®¶åœ¨æ…§æ’­æ˜Ÿè·å¾—å¸¦è´§æƒé™åï¼Œå³å¯è‡ªåŠ©å¼€å¯æ•°å­—äººç›´æ’­ï¼Œä¸»è¦åŒ…æ‹¬å¦‚ä¸‹æµç¨‹ã€‚</p>
<p><strong><strong>1. å•†å“é€‰æ‹©</strong></strong>ï¼Œå¯ä»ç™¾åº¦ç›´è¥åº—é“ºï¼ˆåº¦å°åº—ï¼‰ï¼Œä¸‰æ–¹ç”µå•†å¹³å°ï¼ˆäº¬ä¸œæ·˜å®æ‹¼å¤šå¤šï¼‰å’Œç™¾åº¦æœ¬åœ°ç”Ÿæ´»çš„æµ·é‡å•†å“ä¸­é€‰æ‹©å¸¦è´§å•†å“</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/557f4c963c6b42179a86199d3abd9ad7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=okGenty3I32z70Li1KGsUP0WESo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ æµ·é‡å†…å¤–éƒ¨å•†å“ä¸€é”®æŒ‚æ¥</strong></strong></p>
<ol start="2">
<li>å½¢è±¡é€‰æ‹©æˆ–è€…å®šåˆ¶ï¼Œä»7800+å…¬å…±åº“å½¢è±¡ä¸­é€‰æ‹©ä¸»æ’­å½¢è±¡ï¼Œæˆ–é€šè¿‡è‡ªåŠ©å½•åˆ¶5åˆ†é’Ÿè§†é¢‘å®šåˆ¶ç§æœ‰å½¢è±¡</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c5e0c560dba4557ac49927efdfd3f71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=a353H7iCTkr%2FH4h2A4M8ZljzuCc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ å½¢è±¡é€‰æ‹©æˆ–å®šåˆ¶</strong></strong></p>
<ol start="3">
<li>ç›´æ’­é—´è£…ä¿®ï¼Œä»3600+å¥—ç›´æ’­é—´æ¨¡æ¿ä¸­é€‰æ‹©è£…ä¿®é£æ ¼å’Œå…ƒç´ ï¼Œæˆ–é€šè¿‡AIè‡ªåŠ¨ç”Ÿæˆç›´æ’­é—´èƒŒæ™¯å›¾å’Œè¥é”€æŒ‚ä»¶</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b08ad9617da24ef8be731f2cb3c22f3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=KawLZHZw1RSuXEDtT%2FM6furB8O0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ ç›´æ’­é—´è£…ä¿®ï¼Œä¸°å¯Œçš„æ¨¡æ¿&amp;ç»„ä»¶</strong></strong></p>
<ol start="4">
<li>è„šæœ¬ç”Ÿæˆï¼Œä»å¤šç§å…¬å…±é£æ ¼ä¸­é€‰æ‹©è„šæœ¬å¸¦è´§é£æ ¼ï¼Œæˆ–è‡ªå®šä¹‰ç›®æ ‡å¸¦è´§é£æ ¼ï¼Œè¡¥å……å°‘é‡è¥é”€ä¿¡æ¯ï¼Œä¸€é”®ç”Ÿæˆä¸“ä¸šçš„ç›´æ’­è„šæœ¬</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6722665ea1442bea61959e6841f8e15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=m0kcnkSRV6NN7XOXUIjmV2w2U10%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ ä¸€é”®è„šæœ¬ç”Ÿæˆ</strong></strong></p>
<ol start="5">
<li>éŸ³è‰²é€‰æ‹©ï¼Œä»3200+ä¸ªå…¬å…±åº“éŸ³è‰²ä¸­é€‰æ‹©ä¸»æ’­éŸ³è‰²ï¼Œæˆ–é€šè¿‡æ‰‹ç™¾è‡ªåŠ©å½•åˆ¶ï¼Œ3å¤©å†…å¾—åˆ°ç§æœ‰å®šåˆ¶éŸ³è‰²</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02614cedc6004945860e83bfafc51972~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=aJBbL4o6oN7dKiC3AigPBXZgx4Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ éŸ³è‰²é€‰æ‹©æˆ–åˆ¶ä½œ</strong></strong></p>
<p><strong><strong>6. ç›´æ’­é—´äº’åŠ¨é…ç½®</strong></strong>ï¼Œä¸€é”®å¼€å¯ä¸€è¨€é—®ç­”æ¥ç®¡ï¼Œä¹Ÿæ”¯æŒæ‰‹åŠ¨é…ç½®é¢„ç½®é—®ç­”å¯¹ï¼Œè¡¥å……å•†å®¶çŸ¥è¯†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd27b788b5de4b18af9d1608c304a189~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=mMFtu%2BSZNG0OLXLesypCc114C3E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ ç›´æ’­é—´äº’åŠ¨é…ç½®</strong></strong></p>
<h2 data-id="heading-3">02 æ•´ä½“æŠ€æœ¯æ¶æ„</h2>
<p>æ…§æ’­æ˜Ÿæ•´ä½“æ¶æ„ä¸»è¦ç”±å•†å®¶ç«¯ã€è§†è§‰è¯­éŸ³å’Œæ–‡æœ¬å„æ¨¡æ€æ¨¡å‹ã€å®æ—¶æ¸²æŸ“å¼•æ“ã€ç«™å†…å¤–åˆ†å‘ç³»ç»Ÿç»„æˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e66640862c864ac7a1976c710018e95c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=%2F6HlK1drXxQbDxT6FZdXNJAX8SU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ºå®ç°æ›´å¥½çš„ç›´æ’­ä½“éªŒï¼Œæ•°å­—äººé‡‡ç”¨äº‘ç«¯ç”Ÿæˆæ–¹æ¡ˆï¼Œäº‘ç«¯ç”Ÿæˆç³»ç»Ÿä¸»è¦åŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªå­ç³»ç»Ÿã€‚</p>
<p><strong><strong>1. å•†å“ç†è§£</strong></strong>ï¼Œä¸ºè„šæœ¬ï¼Œé—®ç­”ï¼Œäº’åŠ¨ç­‰å„ç§å†…å®¹ç”Ÿæˆæ¨¡å‹æä¾›å•†å“çŸ¥è¯†å¢å¼º</p>
<p><strong><strong>2. è„šæœ¬ç”Ÿæˆ</strong></strong>ï¼Œå›´ç»•å•†å“è‡ªåŠ¨ç”Ÿæˆé£æ ¼åŒ–å£è¯­åŒ–çš„å¸¦è´§è„šæœ¬</p>
<p><strong><strong>3. æ™ºèƒ½é—®ç­”</strong></strong>ï¼Œç”¨æˆ·æé—®æ—¶å®æ—¶æ£€ç´¢å•†å“çŸ¥è¯†ï¼Œç”Ÿæˆç²¾å‡†çš„å›å¤ï¼Œæ”¯æŒå¼¹å¹•å’Œå£æ’­å›å¤</p>
<p><strong><strong>4. æ™ºèƒ½äº’åŠ¨</strong></strong>ï¼Œä»¥ç›´æ’­æ•ˆæœï¼ˆè¯„è®ºç‡ã€ç”¨æˆ·é€€åœºç‡ã€è§‚çœ‹æ—¶é•¿ç­‰ï¼‰ä¸ºç›®æ ‡ä¸»åŠ¨å‘ç”¨æˆ·å‘èµ·äº’åŠ¨</p>
<p><strong><strong>5. ç›´æ’­é—´è£…ä¿®</strong></strong>ï¼Œæ™ºèƒ½ç”Ÿæˆç›´æ’­é—´èƒŒæ™¯ï¼Œåˆæˆå¸¦è¥é”€å†…å®¹çš„æŒ‚ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8090789c91445938b24846f747de1f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=qK%2FAhl4zvwUzklChgxvYgDuAxC0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-4">03 å†…å®¹ç”Ÿæˆ</h2>
<h2 data-id="heading-5"><strong>3.1 é£æ ¼åŒ–è„šæœ¬ç”Ÿæˆ</strong></h2>
<p>ç›´æ’­è„šæœ¬æ°´å¹³ä¸å¸¦è´§æ•ˆæœæ¯æ¯ç›¸å…³ï¼Œä¼˜ç§€ä¸»æ’­çš„è„šæœ¬èƒ½å¤Ÿæ‰“åŠ¨ç”¨æˆ·ï¼Œå¾ªå¾ªå–„è¿›å¼•å¯¼ç”¨æˆ·æˆäº¤ã€‚ç”±äºæ™®é€šå•†å®¶çš„å¸¦è´§è¥é”€æ°´å¹³æœ‰é™ï¼Œå•†å®¶å¸Œæœ›ä»…è¡¨è¾¾å­¦ä¹ æŸæŸä¸»æ’­ï¼Œç³»ç»Ÿè‡ªåŠ¨ä¸ºå…¶ç”Ÿæˆé£æ ¼ç›¸ä¼¼çš„è„šæœ¬ã€‚åœ¨æ­¤éœ€æ±‚èƒŒæ™¯ä¸‹ï¼Œæ…§æ’­æ˜Ÿåˆ©ç”¨å¤šæ¨¡æ€å•†å“ç†è§£å¯Œé›†æ„å»ºå•†å“çŸ¥è¯†åº“ï¼Œå€ŸåŠ©EB4/turboåœ¨ç”µå•†ç›´æ’­è¯­æ–™ä¸Šè¿›è¡Œå¤§è§„æ¨¡é¢„è®­ç»ƒï¼Œç»“åˆäººå·¥ä¸“å®¶ç²¾æ ‡æ•°æ®SFTï¼Œé€šç”¨å’Œç”µå•†çŸ¥è¯†å¢å¼ºç­‰æ‰‹æ®µå®ç°ä¸€é”®é£æ ¼åŒ–ä»¿å†™ã€‚</p>
<ul>
<li>å•†å®¶ä»…éœ€é€‰å®šå•†å“å’Œè¡¥å……å°‘é‡è¥é”€ä¿¡æ¯ï¼Œå³å¯æŒ‰é¢„è®¾é£æ ¼æˆ–è€…è‡ªå®šé£æ ¼ï¼ˆæä¾›æœ€å°‘400å­—çš„å¸¦è´§æ–‡æ¡ˆï¼‰ä¸€é”®ç”Ÿæˆé£æ ¼ç›¸ä¼¼çš„å¸¦è´§è„šæœ¬ã€‚<strong><strong>å®¢æˆ·é‡‡çº³ç‡92%ï¼Œå¼€æ’­æ¸—é€ç‡67%ï¼Œç›¸æ¯”å®¢æˆ·è„šæœ¬è½¬åŒ–ç‡+14%ã€‚</strong></strong></li>
<li>è€ƒè™‘åˆ°é£æ ¼åŒ–è„šæœ¬åˆ›ä½œéœ€æ±‚çš„ç‹¬ç«‹æ€§ï¼Œæ…§æ’­æ˜Ÿå·²å°†è„šæœ¬ç”Ÿæˆç‹¬ç«‹ä¸ºå·¥å…·ï¼Œå•†å®¶å¯è„±ç¦»ç›´æ’­ä¸šåŠ¡æµä½¿ç”¨å·¥å…·ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4df0405b9dfe425f88c428dadb9f2a0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=AR1O2ADY3LtIJsw7odYJmK6sTtU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ é£æ ¼åŒ–è„šæœ¬ç”Ÿæˆå·¥å…·UI</strong></strong></p>
<h4 data-id="heading-6"><strong><strong>æŠ€æœ¯æ¶æ„</strong></strong></h4>
<p>æ•´ä½“æŠ€æœ¯ä¸»è¦åŒ…æ‹¬å•†å“ç†è§£ã€æ£€ç´¢å¢å¼ºã€å¼ºåŒ–å­¦ä¹ é£æ ¼åŒ–ç”Ÿæˆå’Œåå¤„ç†é˜¶æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f61f0a627b3c4adb8de0de0e556d98e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=MKlRiH1bnNmYjw1xUVOUix%2FCXy8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>å•†å“ç†è§£</strong>ã€‚ç³»ç»Ÿé€šè¿‡å¤šæ¨¡æ€å•†å“è§£ææŠ€æœ¯å¯¹å•†å“è¯¦æƒ…é¡µã€æµ·æŠ¥å›¾ã€å‚æ•°å›¾ç­‰è§†è§‰ç´ æè¿›è¡Œ OCRã€ç‰ˆé¢ç»“æ„è¯†åˆ«ä¸å¤šæ¨¡æ€æ¨¡å‹èåˆï¼Œè‡ªåŠ¨æŠ½å–æ ¸å¿ƒå–ç‚¹ã€é€‚ç”¨äººç¾¤ã€åŠŸèƒ½äº®ç‚¹ã€ä½¿ç”¨åœºæ™¯ç­‰ç»“æ„åŒ–å•†å“çŸ¥è¯†ã€‚å¯åœ¨å•å¼ å›¾é‡ŒåŒæ—¶æ•è·â€œæ–‡æœ¬å†…å®¹ + å›¾ç¤ºå«ä¹‰ + æ’ç‰ˆè¯­ä¹‰â€ç­‰ç‰¹å¾ï¼Œå¹¶åˆ©ç”¨ LLM å¯¹è§£æç»“æœè¿›è¡Œå½’ä¸€åŒ–å’Œå­—æ®µå¯¹é½ï¼Œå½¢æˆé«˜è¦†ç›–ã€é«˜ä¸€è‡´æ€§çš„å•†å“çŸ¥è¯†åº“ã€‚</li>
<li><strong><strong>æ£€ç´¢å¢å¼ºï¼ˆRAGï¼‰é“¾è·¯</strong></strong>ã€‚ç”¨æˆ·è¾“å…¥çš„é£æ ¼èŒƒæ–‡ï¼ˆä¸å°‘äº 400 å­—ï¼‰ä¼šå…ˆç»è¿‡æ ‡ç­¾åˆ†ææ¨¡å—ï¼Œç”±å¤§æ¨¡å‹è¯†åˆ«å‡ºå…¶å…³é”®é£æ ¼ç»´åº¦ï¼Œå¦‚ï¼šè¡¨è¾¾èŠ‚å¥ï¼ˆå¿«/æ…¢ï¼‰ã€æƒ…ç»ªæµ“åº¦ï¼ˆçƒ­æƒ…/å…‹åˆ¶ï¼‰ã€è¥é€ æ°”æ°›ç­–ç•¥ï¼ˆæ•…äº‹ã€å¯¹æ¯”ã€ç–‘é—®å¥ï¼‰ã€ç”¨æˆ·ç—›ç‚¹å®šä½ã€ç›´æ’­å¸¸ç”¨å¸¦è´§æŠ€å·§ï¼ˆå¼ºè°ƒç¨€ç¼ºã€ä¿ƒå•å‹åŠ›ã€åˆ©ç›Šç‚¹é€’è¿›ï¼‰ç­‰ã€‚åŸºäºè¿™äº›é£æ ¼æ ‡ç­¾ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ Queryï¼Œç”¨äºä»é€šç”¨çŸ¥è¯†åº“ä¸ç”µå•†çŸ¥è¯†åº“ä¸­æ£€ç´¢å¯¹åº”è¡¨è¾¾æ–¹å¼ã€å¥å¼æ¨¡æ¿ä¸çŸ¥è¯†ä¸Šä¸‹æ–‡ï¼ˆå–ç‚¹é¡ºåºæ¨èã€å•†å“ç±»åˆ«å¸¸ç”¨è¯æœ¯ã€åœºæ™¯åŒ–å¥æ³•ç­‰ï¼‰ã€‚</li>
<li><strong><strong>é£æ ¼åŒ–ç”Ÿæˆæ¨¡å‹</strong></strong>ã€‚æ¨¡å‹åŸºäºç”µå•†ä¸“ç²¾çš„ç”µå•†ç›´æ’­è¯­æ–™é¢„è®­ç»ƒèƒ½åŠ›ï¼Œå¹¶ç»“åˆæµ·é‡è¿è¥ä¸“å®¶çš„ç²¾ç»†åŒ–æ ‡æ³¨æ•°æ®ï¼ˆSFTï¼‰ï¼Œèƒ½å¤Ÿåœ¨ä¿æŒèŒƒæ–‡é£æ ¼ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œå°†å†…å®¹è‡ªåŠ¨æ›¿æ¢ä¸ºç›®æ ‡å•†å“çš„å–ç‚¹å’Œè¥é”€é€»è¾‘ã€‚ä¸ºç¡®ä¿ç”Ÿæˆå†…å®¹æ—¢ç¬¦åˆç›´æ’­åœºæ™¯ä½¿ç”¨ä¹ æƒ¯ï¼Œåˆå…·å¤‡é«˜æƒ…ç»ªæ„ŸæŸ“åŠ›ï¼Œç³»ç»Ÿå¼•å…¥è½»é‡çº§ RLHF/å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–ï¼Œé€šè¿‡äººç±»åå¥½æ•°æ®æŒç»­è°ƒä¼˜ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿç¨³å®šè¾“å‡ºâ€œè‡ªç„¶ã€é¡ºç•…ã€å¸¦è´§æ•ˆæœå¼ºâ€çš„è„šæœ¬ã€‚ä¸ºæŒç»­æå‡æ¨¡å‹èƒ½åŠ›ï¼Œé€šè¿‡æ•°æ®é£è½®å¯¹è¯¥ç”Ÿæˆæ¨¡å‹è¿›è¡Œå¯¹é½ã€‚</li>
<li><strong>æ ‡ç­¾åŒ–ä¸åå¤„ç†</strong>ã€‚è„šæœ¬è¢«è¿›ä¸€æ­¥ç»“æ„åŒ–ï¼ŒåŒ…æ‹¬ï¼šåˆ†é•œé€»è¾‘ã€å¼€åœºå¼•å¯¼ã€åˆ©ç›Šç‚¹é“ºå«ã€æƒ…ç»ªé«˜ç‚¹ã€ä¿ƒå•æ¨è¿›ã€æ”¶å°¾é‡‘å¥ç­‰ï¼Œæ–¹ä¾¿å•†å®¶åœ¨å®é™…ç›´æ’­ä¸­çµæ´»è°ƒç”¨æˆ–è¿›è¡Œå®šåˆ¶åŒ–ç¼–è¾‘ã€‚</li>
</ul>
<h4 data-id="heading-7"><strong><strong>è„šæœ¬æ•°æ®é£è½®</strong></strong></h4>
<p>æ•°å­—äººç›´æ’­çš„å†…å®¹ç»å¤§éƒ¨åˆ†æ¥è‡ªå¤§æ¨¡å‹ç”Ÿæˆï¼Œå‰æœŸé¢†åŸŸä¸“å®¶çŸ¥è¯†ä¸ºç”Ÿæˆæ ‡å‡†ï¼Œè„šæœ¬ã€é—®ç­”ã€äº’åŠ¨åœºæ™¯çš„ç”Ÿæˆè´¨é‡å·²è¾¾åˆ°æ™®é€šçœŸäººä¸»æ’­çš„æ°´å¹³ã€‚ç„¶è€Œäººå·¥å…ˆéªŒçŸ¥è¯†å­˜åœ¨ä¸»è§‚åå·®ï¼Œä¸”ç¼ºä¹å…¨é¢æ€§å’Œå¿«é€Ÿé€‚åº”æ–°å˜åŒ–çš„èƒ½åŠ›ï¼Œå®Œå…¨ä¾èµ–äººå·¥åªèƒ½è¾¾åˆ°æ¬¡ä¼˜æ°´å¹³ã€‚ä¸ºæŒç»­æ”€å‡è¶…è¶ŠåŸŸå†…å¤–å¤´éƒ¨çœŸäººä¸»æ’­ï¼Œéœ€å»ºç«‹ä¸šåŠ¡å’Œå¤§æ¨¡å‹çš„æ•°æ®é£è½®ï¼Œé€šè¿‡é£è½®æ•ˆåº”æŒç»­æå‡æ¨¡å‹åœ¨æ•°å­—äººç›´æ’­åœºæ™¯çš„åéªŒæ•ˆæœã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df2e50ddd78b4d0dac0e8ba425c55d0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=mJxK5DQi%2F528oBm%2FhhV7AizMFlI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h5 data-id="heading-8">å…ˆéªŒå¯¹é½</h5>
<p>åœ¨çœŸå®ç›´æ’­åœºæ™¯ä¸­ï¼Œæ•°å­—äººæ¨¡å‹æœ€ç»ˆè¿½æ±‚çš„æ˜¯â€œåéªŒæ•ˆæœæœ€ä¼˜â€â€”â€”å³ç”¨æˆ·åœç•™ã€è¯„è®ºå¢é•¿ã€è½¬åŒ–æå‡ç­‰çœŸå®ä¸šåŠ¡æŒ‡æ ‡ã€‚ç„¶è€ŒåéªŒç›®æ ‡å¾€å¾€å¤©ç„¶ä¼´éšé£é™©ï¼šä¾‹å¦‚æ¿€è¿›ä¿ƒå•ã€å¤¸å¤§æ•ˆæœã€æ¨¡ç³Šæè¿°ç­‰å†…å®¹å¯èƒ½åœ¨çŸ­æœŸå†…è·å¾—æ›´é«˜çš„ç”¨æˆ·åé¦ˆï¼Œå´è¶Šè¿‡äº‹å®è¾¹ç•Œä¸å¹³å°è§„èŒƒï¼Œå½¢æˆå®‰å…¨é—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨æ¨¡å‹å…¨é¢å¯¹é½åéªŒä¹‹å‰ï¼Œå¿…é¡»æ„å»ºä¸€å¥—ç¨³å¥ã€å¯è§£é‡Šã€ä¸å¹³å°è§„èŒƒä¸€è‡´çš„<strong><strong>å…ˆéªŒå¯¹é½ä½“ç³»</strong></strong>ä½œä¸ºåŸºç¡€ã€‚å…ˆéªŒå¥–åŠ±æ¨¡å‹ä½œä¸ºâ€œå®ˆé—¨äººâ€ï¼Œä»¥æ¨ç†ä¸“å®¶æ¨¡å‹ä¸ºåˆ¤æ–­æ ¸å¿ƒï¼Œé€šè¿‡ç»“æ„åŒ–çš„åå¥½è¯„åˆ†ä¸è§„åˆ™å¥–åŠ±å¼•å¯¼æ¨¡å‹å­¦ä¹ åˆè§„ã€é«˜è´¨ã€å¯æ§çš„å†…å®¹é£æ ¼ï¼Œå®ç°â€œå…ˆéªŒå¯¹é½ â†’ å¼ºåŒ–å­¦ä¹  â†’ ä¸“ç²¾æ¨¡å‹ â†’ å›æµéªŒè¯â€çš„é—­ç¯ã€‚</p>
<p>è‡ªåŠ¨åå¥½åˆæˆã€‚ä¼ ç»Ÿå…ˆéªŒå¥–åŠ±å®Œå…¨ä¾èµ–äººå·¥æ ‡æ³¨ï¼Œæˆæœ¬é«˜ä¸”å­˜åœ¨ä¸»è§‚æ€§ã€‚ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬é›†æˆäº†å¤šä¸ªå…ˆè¿›æ¨ç†ç±»åŸºæ¨¡å‹ï¼ˆå¦‚ EB4-4Tã€Deepseek-R1/V3ã€GPT-o ç³»åˆ—ç­‰ï¼‰ï¼Œé€šè¿‡å¤šæ¨¡å‹æŠ•ç¥¨ã€ç»“æœå¯¹æ¯”åˆ†çº§ç­‰æ–¹å¼è‡ªåŠ¨åˆæˆåå¥½ã€‚è¿™ä¸€è‡ªåŠ¨åŒ–åå¥½ç”Ÿæˆæœºåˆ¶èƒ½å¤Ÿæ¨¡æ‹Ÿâ€œä¸“å®¶æ ‡æ³¨â€ï¼Œä½†å…·å¤‡ï¼š</p>
<ul>
<li><strong>ä¸€è‡´æ€§æ›´é«˜</strong>ï¼Œå‡å°‘äººå·¥ä¸»è§‚æ³¢åŠ¨</li>
<li><strong>è¦†ç›–èŒƒå›´æ›´å¹¿</strong>ï¼Œæ•°ç™¾ä¸‡çº§å…ˆéªŒæ•°æ®</li>
<li><strong>é€‚åº”å˜åŒ–æ›´å¿«</strong>ï¼Œæ¨¡å‹å¯éšå¹³å°è§„èŒƒæˆ–å†…å®¹è¶‹åŠ¿å˜åŒ–å³æ—¶æ›´æ–°</li>
</ul>
<p>æœ€ç»ˆå½¢æˆå…ˆéªŒ RMï¼ˆReward Modelï¼‰çš„æ ¸å¿ƒè®­ç»ƒæ•°æ®ã€‚å…ˆéªŒ RM çš„æ ¸å¿ƒèŒè´£æ˜¯ç¡®ä¿æ¨¡å‹åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šçªç ´å†…å®¹å®‰å…¨è¾¹ç•Œï¼Œä¸ºåç»­åéªŒå¯¹é½æä¾›ç¨³å›ºåº•åº§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e5b1f71c94046f38e5f3e3badadbefb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=mfgGchxOlC1NJpdZJAX6v%2BNY3Bc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h5 data-id="heading-9">åéªŒæ•°æ®é£è½®</h5>
<p>ä¸ºäº†è®©æ¨¡å‹å¸æ”¶ç”¨æˆ·çš„çœŸå®åéªŒåé¦ˆï¼Œæ…§æ’­æ˜Ÿæ„å»ºäº†ä¸€å¥—ä»¥â€œå†…å®¹æ¢ç´¢ + å¥–åŠ±å»ºæ¨¡â€ä¸ºä¸¤æ¡ä¸»çº¿çš„æ•°æ®é£è½®ï¼Œå®ç°æ¨¡å‹çš„è‡ªä¸»è¿›åŒ–ä¸æŒç»­å¢å¼ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a564f0eb435143f3b01088065dff61f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=kSqVL3Hg2kUJ1TlAhH47ImUBQ1g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>åŸºäºåéªŒç»Ÿè®¡çš„å†…å®¹æ¢ç´¢</strong></strong>ï¼šå¯æ§ã€é«˜è§£é‡Šçš„åå¥½æ•°æ®ç”Ÿæˆé“¾è·¯ã€‚åéªŒç»Ÿè®¡è·¯å¾„ä¸»è¦é¢å‘<strong><strong>é«˜ç²¾åº¦ã€å¼ºå¯æ§ã€å¯è§£é‡Šæ€§å¼º</strong></strong>çš„åå¥½æ•°æ®ç”Ÿäº§éœ€æ±‚ï¼Œç»“åˆåœ¨çº¿å®éªŒæ¡†æ¶ï¼Œé€šè¿‡çœŸå®ç”¨æˆ·åé¦ˆé©±åŠ¨çš„æ–¹å¼ç”Ÿæˆåå¥½æ ·æœ¬ã€‚é€šè¿‡é«˜é¢‘åœ¨çº¿å®éªŒï¼Œç³»ç»Ÿä¸æ–­æ²‰æ·€åƒçº§è§„æ¨¡çš„åå¥½æ•°æ®ï¼Œæ”¯æ’‘åç»­çš„æ¨¡å‹åå¥½å¯¹é½è®­ç»ƒï¼ˆå¦‚ DPO/IPO ç­‰ç­–ç•¥ä¼˜åŒ–æ–¹æ³•ï¼‰ã€‚</p>
<p><strong><strong>å¯æ³›åŒ–çš„å¥–åŠ± uplift å»ºæ¨¡</strong></strong>ï¼šå¤§è§„æ¨¡åå¥½æ•°æ®çš„é«˜æ•ˆè¡¥å……è·¯å¾„ã€‚ç›¸æ¯”åŸºäºåéªŒç»Ÿè®¡çš„å®éªŒæ–¹å¼ï¼Œuplift å»ºæ¨¡è·¯å¾„æ—¨åœ¨è§£å†³<strong><strong>ç”¨æˆ·è¡Œä¸ºç¨€ç–ã€å®éªŒæˆæœ¬é«˜</strong></strong>çš„é—®é¢˜ï¼Œé€šè¿‡æ³›åŒ–æ¨¡å‹ç›´æ¥å¯¹ç”¨æˆ·åå¥½è¿›è¡Œé¢„æµ‹ï¼Œç”Ÿæˆç™¾ä¸‡çº§çš„åå¥½æ•°æ®ï¼Œå®ç°æ›´é«˜æ•ˆçš„æ•°æ®æ‰©å®¹ã€‚é‡‡ç”¨ S-Learner / T-Learner ç­‰ uplift æ–¹æ³•ï¼Œæ„å»ºç”¨æˆ·è¡Œä¸ºå› æœæ•ˆåº”æ¨¡å‹ï¼Œç›´æ¥é¢„æµ‹â€œæŸæ®µå†…å®¹æ˜¯å¦ä¼šæå‡ç”¨æˆ·çš„äº’åŠ¨/è¯„è®º/åœç•™ç­‰å…³é”®æŒ‡æ ‡ï¼Ÿâ€</p>
<h3 data-id="heading-10"><strong>3.2 æ™ºèƒ½é—®ç­”</strong></h3>
<p>æ…§æ’­æ˜Ÿå»ºè®¾äº†ä¸€å¥—å®Œå¤‡çš„ç›´æ’­åœºæ™¯RAGç³»ç»Ÿï¼ŒåŒ…æ‹¬ç”µå•†é¢†åŸŸçŸ¥è¯†æ£€ç´¢æ¨¡å‹ï¼Œé€šè¿‡åƒäº¿æ¨¡å‹è’¸é¦çš„ä½æ—¶å»¶ç”Ÿæˆæ¨¡å‹ï¼ˆ12s-&gt;2s)ï¼Œæ•°æ®é£è½®ã€‚ç›®å‰å·²å®ç°å¤šæ¨¡ç´ æè°ƒåº¦ï¼Œé«˜æ‹ŸçœŸæ˜æ˜Ÿé—®ç­”ï¼Œå®¢æˆ·ä¸ªæ€§åŒ–è¡¨è¾¾ï¼Œå‚ç±»é€‚é…ï¼Œå•†å®¶/å•†å“çŸ¥è¯†åº“ç­‰äº§å“èƒ½åŠ›ã€‚å®¢æˆ·å¯ä¸€é”®å¼€å¯æ™ºèƒ½é—®ç­”ï¼Œé—®ç­”ç«¯åˆ°ç«¯å¯ç”¨ç‡95%ï¼Œä¼˜è´¨ç‡90%ï¼Œå®¢æˆ·å¼€å¯ç‡94%ï¼Œè¿è¥å’Œå®¢æˆ·åé¦ˆè¾ƒå¥½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ff151fa418b40c2a4b7c1f249a813de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=54klu3AphX0ojEVY%2FA459XiRJl0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ æ™ºèƒ½é—®ç­”æ¶æ„</strong></strong></p>
<h4 data-id="heading-11"><strong><strong>æŠ€æœ¯æ¶æ„</strong></strong></h4>
<p>æ…§æ’­æ˜Ÿçš„ç›´æ’­å®æ—¶é—®ç­”ç³»ç»Ÿåœ¨å·¥ç¨‹ä¸Šå½¢æˆäº†çŸ¥è¯†æ•´åˆ â†’ é¢†åŸŸæ£€ç´¢ â†’ ä½å»¶è¿Ÿç”Ÿæˆ â†’ åå¤„ç† â†’ æ•°æ®é£è½®çš„å®Œæ•´é—­ç¯ï¼Œä¸ºè¶…æ‹ŸçœŸæ•°å­—äººæä¾›äº†åª²ç¾çœŸäººçš„å®æ—¶äº’åŠ¨èƒ½åŠ›ã€‚</p>
<ul>
<li>åœ¨<strong><strong>çŸ¥è¯†æ•´åˆå±‚</strong></strong>ï¼Œç³»ç»Ÿå°†å•†å®¶ä¾§çš„å•†å“å›¾æ–‡ã€å–ç‚¹ã€FAQã€è§†é¢‘è„šæœ¬ã€ç±»ç›®å±æ€§ä»¥åŠè¿è¥æ²‰æ·€çš„æ•°æ®ç»Ÿä¸€å…¥åº“ï¼Œå¹¶é€šè¿‡å‘é‡åŒ–å¤„ç†æ„å»ºé«˜å¯ç”¨çš„ç”µå•†çŸ¥è¯†åº•åº§ã€‚</li>
<li><strong><strong>é¢†åŸŸçŸ¥è¯†æ£€ç´¢æ¨¡å—</strong></strong>ç»“åˆäº†åƒå¸§è’¸é¦åçš„ EB-lite/è¡Œä¸šæ¨¡å‹ä¸é«˜ç»´å‘é‡è¯­ä¹‰æœç´¢ï¼Œé€šè¿‡ã€Œæ„å›¾è¯†åˆ« â†’ ç²¾å‡†åŒ¹é… â†’ è¯­ä¹‰èšç±» â†’ çŸ¥è¯†å¬å›ã€çš„æµæ°´çº¿ï¼Œç¡®ä¿ç³»ç»Ÿèƒ½å¤Ÿä»å¤æ‚ç›´æ’­è¯­å¢ƒä¸­å‡†ç¡®æ•æ‰ç”¨æˆ·æé—®æ„å›¾ã€‚ç›´æ’­åœºæ™¯ä¸­å­˜åœ¨å¤§é‡å£è¯­åŒ–ã€çŸ­å¥åŒ–ã€ç”šè‡³å™ªå£°è¯­æ–™ï¼ˆå¦‚ï¼š â€œè¿™ä¸ªèƒ½ç”¨å¤šä¹…å•Šâ€ã€‚â€œæœ‰åˆ«çš„é¢œè‰²å—ï¼Ÿâ€ï¼‰ï¼Œç³»ç»Ÿé€šè¿‡æ·±åº¦è¯­ä¹‰ embeddingï¼ˆå¦‚ ernie embeddingï¼‰å®ç°é«˜é²æ£’æ€§çš„å®æ—¶æ£€ç´¢ï¼Œä½¿æ£€ç´¢å¬å›çš„å‡†ç¡®ç‡åœ¨å®æ—¶ç¯å¢ƒä¸‹ä¾ç„¶ä¿æŒç¨³å®šã€‚</li>
<li><strong><strong>ä½å»¶æ—¶ç”Ÿæˆæ¨¡å—</strong></strong>ã€‚åŸºäºåƒäº¿æ¨¡å‹è’¸é¦ç»“æœæ„å»ºï¼Œé’ˆå¯¹ç›´æ’­é«˜å¹¶å‘ã€ä½æ—¶å»¶ã€å¼ºä¸€è‡´æ€§çš„è¦æ±‚ï¼Œæ¨¡å‹ç»è¿‡ç»“æ„è£å‰ªã€å¼ é‡å¹¶è¡Œä¼˜åŒ–ä¸ Prompt è§„çº¦ï¼Œä½¿å•è½®å“åº”æ—¶å»¶ä» 12s å‹ç¼©åˆ° 2sï¼Œåœ¨ä¿è¯è¯­ä¹‰ä¸°å¯Œåº¦å’Œå£æ’­è‡ªç„¶åº¦çš„åŒæ—¶æå‡ç«¯åˆ°ç«¯ä½“éªŒã€‚</li>
<li><strong><strong>æ•°æ®é£è½®å®ç°æŒç»­è‡ªæˆ‘ä¼˜åŒ–</strong></strong>ï¼šè¿è¥åé¦ˆã€ç”¨æˆ·äº’åŠ¨æ—¥å¿—ã€è¯¯åŒ¹é…æ¡ˆä¾‹ä»¥åŠé«˜è´¨é—®ç­”æ ·æœ¬ä¼šè‡ªåŠ¨å›æµåˆ°æ•°æ®å¤„ç†æ¨¡å—ï¼Œé©±åŠ¨çŸ¥è¯†åº“æ›´æ–°ä¸æ¨¡å‹é‡è®­ç»ƒã€‚</li>
</ul>
<h3 data-id="heading-12"><strong>3.3 æ™ºèƒ½ä¸­æ§</strong></h3>
<hr/>
<p>çœŸäººä¸»æ’­ä¼šæ ¹æ®ç›´æ’­é—´å®æ—¶çŠ¶æ€å†³ç­–å½“å‰åº”å‘èµ·ä½•ç§åŠ¨ä½œï¼ˆactionï¼‰ï¼Œæ¯”å¦‚ç›´æ’­é—´äº’åŠ¨æ°›å›´å·®çš„æ—¶å€™æ˜¯åº”è¯¥é‚€è¯„ï¼Œæ¢å–ç‚¹è®²è§£è¿˜æ˜¯ä¿ƒå•ï¼Ÿç¡®å®šåŠ¨ä½œåä¸»æ’­çŸ¥é“å¦‚ä½•æœ€å¥½çš„çš„æ‰§è¡ŒåŠ¨ä½œï¼Œä¾‹å¦‚æ€ä¹ˆæŠŠé‚€è¯„è®²å‡ºæ¥ï¼Ÿè¯´ä»€ä¹ˆè¯ï¼Œç”¨ä»€ä¹ˆè¯­æ°”ï¼Œé‚€è¯·ç‰¹å®šè§‚ä¼—è¿˜æ˜¯æ‰€æœ‰è§‚ä¼—ã€‚è¡Œä¸ºå†³ç­–å’Œè¡Œä¸ºå†…å®¹ç”Ÿæˆä¸¤è€…ç›¸ç»“åˆå®ç°ç›´æ’­é—´ä¸‹å•ï¼Œå…³æ³¨ï¼Œç•™è”ç­‰æœ€å¤§åŒ–ç›®æ ‡ã€‚è¶…æ‹ŸçœŸæ•°å­—äººéœ€è¦å…·å¤‡ä¸Šè¿°ä¸¤ç§æ ¸å¿ƒèƒ½åŠ›ï¼Œå³ç»™å®šä¸€ä¸ªé•¿æœŸç›®æ ‡ï¼ˆå¦‚æ¯åœºæ¬¡çš„è®¢å•æ€»æ•°ï¼Œè¯„è®ºæ€»æ•°ï¼Œè§‚çœ‹æ—¶é•¿ç­‰ï¼‰ï¼Œè¦æ±‚æ•°å­—äºº1ï¼‰åˆ¤æ–­åœ¨ä¸åŒç›´æ’­é—´çŠ¶æ€ä¸‹åº”è¯¥åšå‡ºä»€ä¹ˆè¡Œä¸ºï¼Œæ˜¯åˆ‡æ¢å–ç‚¹è®²è§£ï¼Œä¿ƒå•é€¼å•ï¼Œé‚€è¯„è¿˜æ˜¯å¤šè½®äº’åŠ¨ï¼Ÿ2ï¼‰ç¡®å®šæŸç§è¡Œä¸ºåç”Ÿæˆé€‚åˆçš„çš„è¡Œä¸ºå†…å®¹ï¼Œå¦‚å¡‘å“è®²è§£ï¼Œä¼˜æƒ è®²è§£ï¼Œä¿ƒå•é€¼å•ç­‰çš„å…·ä½“å£æ’­å†…å®¹ã€‚</p>
<h4 data-id="heading-13"><strong>æŠ€æœ¯æ¶æ„</strong></h4>
<p>æ™ºèƒ½ä¸­æ§æ¶æ„æ ¸å¿ƒç”±åŸºäºå¼ºåŒ–å­¦ä¹ çš„å†³ç­–Agentï¼Œå’ŒåŸºäºä¸€è¨€å¤§æ¨¡å‹çš„å¤šä»»åŠ¡èåˆä¸¤ä¸ªéƒ¨åˆ†ç»„æˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/790be0e44cd64c319c3d7e3f8a0ccf6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=L0Aa8%2FwjKUk1f71Hra6IYWqhCjU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h5 data-id="heading-14"><strong><strong>åŸºäºå¼ºåŒ–å­¦ä¹ çš„è¡Œä¸ºå†³ç­–Agent</strong></strong></h5>
<p>è¡Œä¸ºå†³ç­–çš„ç›®æ ‡æ˜¯åœ¨ä¸åŒç›´æ’­çŠ¶æ€ä¸‹é€‰æ‹©æœ€ä¼˜åŠ¨ä½œï¼Œæœ€å¤§åŒ–é•¿æœŸç›®æ ‡ï¼ˆè®¢å•ã€è¯„è®ºã€è§‚çœ‹æ—¶é•¿ç­‰ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/186556a5ded14b7689f0e103ad1bd198~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=XCjczdAU7vLnnWd%2FsbTqGNk84PY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸Šå›¾å±•ç¤ºäº†ç›´æ’­ç¯å¢ƒä¸RLå†³ç­–Agentçš„äº¤äº’æµç¨‹ï¼š</p>
<ul>
<li><strong><strong>çŠ¶æ€ St</strong></strong>ï¼šè§‚çœ‹äººæ•°ã€è¯„è®ºé¢‘ç‡ã€å½“å‰å•†å“ã€ç”¨æˆ·è¡Œä¸ºåºåˆ—ã€æ˜¯å¦æœ‰æé—®ç­‰</li>
<li><strong><strong>åŠ¨ä½œ At</strong></strong>ï¼šé‚€è¯„ / å¤šè½®äº’åŠ¨ / ä¿ƒå• / åŠ¨æ€è®²è§£ / åˆ‡æ¢å–ç‚¹ / å›ç­”é—®é¢˜â€¦â€¦</li>
<li><strong><strong>å¥–åŠ± Rt</strong></strong>ï¼šè®¢å•æ•°å˜åŒ–ã€è¯„è®ºæ•°å¢åŠ ã€åœç•™æ—¶é•¿ã€è½¬åŒ–ç‡æå‡ç­‰</li>
<li>Agent é€šè¿‡ä¸æ–­è¯•é”™ &amp; ç­–ç•¥è¿­ä»£ï¼Œè·å¾—æœ€ä¼˜ç­–ç•¥ã€‚</li>
</ul>
<p>è¿™ä½¿æ•°å­—äººèƒ½å¤ŸåƒçœŸäººä¸»æ’­ä¸€æ ·ï¼šæ°›å›´ä½æ—¶å‘èµ·äº’åŠ¨ï¼Œç”¨æˆ·è§‚æœ›æ—¶è¿›è¡Œä¿ƒå•ï¼Œæ–°è§‚ä¼—è¿›å…¥æ—¶è¿›è¡Œå•†å“ä»‹ç»ã€‚RL çš„ä¼˜åŠ¿åœ¨äºç›®æ ‡å¯¼å‘ï¼šä¸æ˜¯ä¼˜åŒ–å•å¥è¯ï¼Œè€Œæ˜¯ä¼˜åŒ–<strong><strong>æ•´åœºç›´æ’­çš„ KPI</strong></strong>ã€‚</p>
<h5 data-id="heading-15"><strong><strong>åŸºäºå¤§æ¨¡å‹çš„è¡Œä¸ºå†…å®¹ç”Ÿæˆä¸èåˆ</strong></strong></h5>
<p>å½“ RL Agent é€‰æ‹©äº†ä¸€ä¸ªåŠ¨ä½œåï¼Œä¾‹å¦‚â€œä¿ƒå•â€ï¼Œè¿˜éœ€è¦ç”Ÿæˆå¯¹åº”çš„åŠ¨ä½œå‚æ•°ï¼šå¦‚ä¿ƒå•çš„å£æ’­å†…å®¹ï¼Œä½¿ç”¨ä»€ä¹ˆè¯­æ°”ï¼Ÿå†…å®¹æ˜¯åæ¸©å’Œè¿˜æ˜¯å¼ºèŠ‚å¥ï¼Ÿæ˜¯å¦å¼•ç”¨å½“å‰è§‚ä¼—çš„è¯„è®ºï¼Ÿå®è·µä¸­æˆ‘ä»¬é€šè¿‡å¼ºåŒ–å­¦ä¹ è®­ç»ƒäº†ä¸€ç³»åˆ—actionå†…å®¹ç”Ÿæˆä¸“ç²¾æ¨¡å‹ï¼Œèƒ½å¤Ÿç”Ÿæˆç‰¹å®šå‚æ•°æŒ‡å®šçš„ç›´æ’­å†…å®¹ã€‚</p>
<p>æœªæ¥æˆ‘ä»¬å°†ä»¥è¯­è¨€æ¨¡å‹ä¸ºåŸºåº§å¯¹å†³ç­–å’Œå†…å®¹ç”Ÿæˆä»»åŠ¡è¿›è¡Œç«¯åˆ°ç«¯è®­ç»ƒï¼Œå‡å°‘åˆ†é˜¶æ®µå»ºæ¨¡å¸¦æ¥çš„ç´¯è®¡è¯¯å·®ã€‚</p>
<h2 data-id="heading-16">04 è¯­éŸ³å…‹éš†ä¸åˆæˆ</h2>
<p>æ™®é€šå•†å®¶åŸå£°æ¼”ç»çŠ¶æ€ä¸ä½³ï¼Œç¼ºä¹å¸¦è´§æ„Ÿã€‚æ…§æ’­æ˜Ÿåˆ©ç”¨é£æ ¼è¿ç§»TTSæŠ€æœ¯è‡ªåŠ¨åˆæˆæ„ŸæŸ“åŠ›å¼ºï¼Œæ‹ŸçœŸåº¦é«˜çš„ç›´æ’­éŸ³é¢‘ã€‚ç»è¿‡ä¸¤å¹´å¤šçš„è¿­ä»£TTSå¼€æ’­ä½¿ç”¨ç‡ä»<strong><strong>30.3%æå‡è‡³92.8% <strong><strong><strong><strong>ï¼Œ<strong><strong>åˆ¶ä½œæ—¶æ•ˆæ€§ä»</strong></strong>1</strong></strong></strong></strong>æœˆé™ä½åˆ°1åˆ†é’Ÿã€‚</strong></strong></p>
<p>ç”µå•†TTSå‘å±•ä¸»è¦ç»å†ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<p><strong>ç¬¬ä¸€é˜¶æ®µï¼ˆ2023.3~2024.Q2)</strong> **ï¼šè¯­éŸ³å®šåˆ¶å·¥ç‰Œéº¦æ”¶éŸ³ï¼Œä¾èµ–å¤§é‡äººå·¥ä¼ å¯¼ï¼Œæ•´ä¸ªå‘¨æœŸé•¿è¾¾ä¸€ä¸ªæœˆ</p>
<p><strong>ç¬¬äºŒé˜¶æ®µï¼ˆ2024.Q3è‡³ä»Š)</strong> **ï¼šå°ç¨‹åºè‡ªåŠ©æ”¶éŸ³æé«˜æ”¶éŸ³æ•ˆç‡ï¼Œè‡ªåŠ¨è®­ç»ƒæ¶æ„å‡çº§ï¼ŒæŠ‘æ‰¬é¡¿æŒ«å¸¦è´§æ•ˆæœæŒç»­ä¼˜åŒ–</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e131f912caf45d5a80d85c896fd865b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=mT1FtvGBJm4QE1tuyPqbbmsN5kE%3D" alt="8a3ff4868bef454dc11f0b3d563dfd55.png" loading="lazy"/></p>
<p>ç¬¬ä¸€é˜¶æ®µï¼šå·¥ç‰Œéº¦æ”¶éŸ³æ•ˆç‡ä½ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bff8f71283b4450ebb997c56d0dd19a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=O%2F8xLTP9rpI%2Bxl2xOimUEiUA5TA%3D" alt="9c59c70847e98a944f17b4d9b65d9842.jpg" loading="lazy"/></p>
<p>ç¬¬äºŒé˜¶æ®µï¼šå°ç¨‹åºè‡ªåŠ©å½•åˆ¶</p>
<p>ç°çŠ¶ï¼šå½“å‰æ…§æ’­æ˜Ÿæ”¯æŒåŸç”Ÿå’Œæ¿€æƒ…å¸¦è´§ä¸¤ç§éŸ³è‰²å…‹éš†ï¼Œå®¢æˆ·ä»…éœ€åœ¨æ‰‹ç™¾å°ç¨‹åºä¸Šå½•åˆ¶15åˆ†é’Ÿè¯­éŸ³ï¼Œç³»ç»Ÿåœ¨1å¤©å†…è‡ªåŠ¨ä¸ºå®¢æˆ·ç”Ÿæˆå…‹éš†éŸ³ï¼ˆå¯¹æ¯”å¦‚ä¸‹ï¼‰ã€‚ç›®å‰æ…§æ’­æ˜Ÿå·²åˆ¶ä½œ12wå¤šä¸ªéŸ³è‰²ï¼Œ2.7wå¤šä¸ªå®¢æˆ·å®šåˆ¶éŸ³è‰²ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/913244b09c984110b1298a69e25cc16d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=mOgLh40EEfc3eyI84ZyVFLBSoPQ%3D" alt="b8fb96d6e796ac2b84b99e0421469492.png" loading="lazy"/></p>
<p>ä¸¤ç§éŸ³æ•ˆå¯é€‰</p>
<p><strong>1. åŸå£°æ•ˆæœ</strong>ï¼šè¿˜åŸæœ¬äººè¯´è¯ç‰¹ç‚¹ï¼Œå¦‚è¯­é€Ÿå’Œè¯­è°ƒ</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fblob%3Ahttps%3A%2F%2Funitools.fun%2Ffb87134d-97ec-42a5-a0a0-b74980b1cfc3" target="_blank" title="http://blob:https://unitools.fun/fb87134d-97ec-42a5-a0a0-b74980b1cfc3" ref="nofollow noopener noreferrer">http://blob:https://unitools.fun/fb87134d-97ec-42a5-a0a0-b74980b1cfc3</a></p>
<p><strong><strong>2. æ¿€æƒ…å¸¦è´§æ•ˆæœ</strong></strong>ï¼šè®©æ•´ä½“æƒ…ç»ªæ›´æ¿€æ˜‚ï¼ŒæŠ‘æ‰¬é¡¿æŒ«</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fblob%3Ahttps%3A%2F%2Funitools.fun%2F85e53903-5672-4988-85ae-19a4c867a607" target="_blank" title="http://blob:https://unitools.fun/85e53903-5672-4988-85ae-19a4c867a607" ref="nofollow noopener noreferrer">http://blob:https://unitools.fun/85e53903-5672-4988-85ae-19a4c867a607</a></p>
<p>æœªæ¥è®¡åˆ’åˆ©ç”¨æµ·é‡ç›´æ’­åœºæ™¯çš„è¯­æ–™æ•°æ®ï¼Œè¿›ä¸€æ­¥<strong>é™ä½å…‹éš†é—¨æ§›</strong>ï¼ˆå¯¹é½ç«å“çš„30sï¼‰ã€<strong>æå‡å…‹éš†æ•ˆç‡</strong>ï¼ˆåˆ†é’Ÿçº§å¯å®Œæˆå…‹éš†è¿›è¡Œåˆæˆï¼‰ã€<strong>ä¼˜åŒ–æœ—è¯»æ•ˆæœ</strong>ï¼ˆå¯¹æ ‡ç›´æ’­/è§†é¢‘/è®²è¿°/å’¨è¯¢ç­‰ä¸åŒè¯­å¢ƒçš„çœŸäººï¼‰ ï¼ŒåŒæ—¶ä»å•å£°éŸ³çš„å…‹éš†å’Œåˆæˆæˆæœ¬è¾¾åˆ°ä¸šå†…å¤´éƒ¨é¢†å…ˆæ°´å¹³ã€‚</p>
<h4 data-id="heading-17">å…‹éš†+åˆæˆæŠ€æœ¯æ¶æ„</h4>
<p>æ•´ä½“æ¶æ„ä¸»è¦åŒ…æ‹¬ç¦»çº¿å£°çº¹æ³¨å†Œå’Œæ¨¡å‹è®­ç»ƒï¼Œåœ¨çº¿åˆæˆä¸‰ä¸ªéƒ¨åˆ†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05cafc99d65448928cc873a2fb1c82d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=dxyOPM5pPPM1kaLd1PezrzvNO%2Fk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ å½¢è±¡å…‹éš†åŠåˆæˆæ¶æ„</strong></strong></p>
<h2 data-id="heading-18">05 å½¢è±¡å…‹éš†ä¸åˆæˆ</h2>
<p>ä¸»æ’­å½¢è±¡æ˜¯ç›´æ’­çš„æ ¸å¿ƒè¦ç´ ï¼Œé«˜æ‹ŸçœŸå½¢è±¡èƒ½å¤Ÿæå‡ç”¨æˆ·è§‚çœ‹æ—¶é•¿ï¼Œè¿›è€Œæå‡æˆå•æ•ˆæœã€‚æ…§æ’­æ˜Ÿä¸è§†è§‰æŠ€æœ¯éƒ¨æ·±åº¦åˆä½œï¼ŒåŸºäº2Dæ•°å­—äººæŠ€æœ¯é’ˆå¯¹ç›´æ’­åœºæ™¯å®šåˆ¶å½¢è±¡å…‹éš†å’Œåˆæˆèƒ½åŠ›ï¼Œå»ºè®¾äº†æ¥è¿‘7800+ä¸ªå…¬å…±åº“å½¢è±¡ï¼Œæœ‰æ•ˆåœ°æ”¯æ’‘å•†å®¶åœ¨æ…§æ’­æ˜Ÿçš„å‰æœŸæ¢ç´¢ï¼Œä¸ºè‡ªå»ºå½¢è±¡åšå¥½å‡†å¤‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2038c211400f4c8782963825c774a053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=ScwJWd6D5YeJ%2FbPGvocNZoUXcgM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong><strong>â–³ æ…§æ’­æ˜Ÿå½¢è±¡åˆ¶ä½œ</strong></strong></p>
<p>å½¢è±¡å…‹éš†æŠ€æœ¯å‘å±•ä¸»è¦ç»å†äº†å››ä¸ªé˜¶æ®µï¼š</p>
<p><strong>ç¬¬ä¸€é˜¶æ®µï¼ˆ2023.3~2023Q4)</strong> ï¼šV1ç‰ˆæœ¬å”‡å½¢é©±åŠ¨æ–¹æ¡ˆé€‚é…ç”µå•†ç›´æ’­åœºæ™¯ï¼Œè·‘é€šå½•åˆ¶çº¦æŸè¾ƒå¤šçš„**é—­å˜´ä¸”æ— é®æŒ¡å½•åˆ¶+**å½¢è±¡å…‹éš†æµç¨‹ï¼Œå»ºç«‹èµ·ç¬¬ä¸€æ‰¹å…¬å…±åº“å½¢è±¡</p>
<p><strong>ç¬¬äºŒé˜¶æ®µï¼ˆ2024.Q4~2024.Q2)</strong> ï¼šV3V4ç‰ˆæœ¬å”‡å½¢é©±åŠ¨é€šè¿‡æ•°æ®å»ºè®¾å’Œæ¨¡å‹ç®—æ³•ä¼˜åŒ–<strong>å®ç°å¼ å˜´å½•åˆ¶å’Œæ›´è‡ªç„¶çš„å”‡åŠ¨æ•ˆæœ</strong></p>
<p><strong>ç¬¬ä¸‰é˜¶æ®µï¼ˆ2024.Q3~2025.Q2)</strong> ï¼šè¿›ä¸€æ­¥é™ä½å½•åˆ¶é—¨æ§›ï¼Œæ”¯æŒ<strong>å½•åˆ¶ä¸­é®æŒ¡ã€å¤§å¹…åº¦ä¾§è„¸å’Œäººè„¸å‡ºé•œ</strong>ã€‚</p>
<p>å½“å‰é˜¶æ®µå®¢æˆ·ä»…éœ€ä¸Šä¼ 5åˆ†é’Ÿå·¦å³çš„è‡ªç„¶æ¼”ç»è§†é¢‘ï¼Œç³»ç»Ÿåœ¨3å°æ—¶å†…å³å¯è‡ªåŠ¨ä¸ºå®¢æˆ·ç”Ÿæˆå…‹éš†å½¢è±¡ã€‚æ—¶è‡³25å¹´åº•æ…§æ’­æ˜Ÿå·²ç´¯è®¡<strong>åˆ¶ä½œ<strong><strong>32ä¸‡å¤š</strong></strong>å¤šä¸ªå½¢è±¡ï¼Œ8ä¸‡å¤šä¸ªå®¢æˆ·å®šåˆ¶å½¢è±¡ï¼Œçº¿ä¸Šå¯ç”¨ç‡95%</strong> ã€‚</p>
<p><strong>ç¬¬ä¸‰é˜¶æ®µï¼ˆ2025.Q3~è‡³ä»Šï¼‰ï¼š<strong>çªç ´å”‡å½¢é©±åŠ¨ï¼Œå»ºè®¾</strong>å¤šäººå‡ºé•œï¼ŒåŠ¨ä½œé©±åŠ¨ï¼Œè¡¨æƒ…é©±åŠ¨ï¼ŒæŒç‰©é©±åŠ¨</strong>ç­‰ä¸‹ä¸€ä»£å½¢è±¡ç”Ÿæˆèƒ½åŠ›ï¼ˆå¤šæ¨¡ååŒçš„è¶…çº§ä¸»æ’­ï¼‰ã€‚</p>
<h4 data-id="heading-19"><strong>è§†è§‰æŠ€æœ¯</strong></h4>
<p>å®æ—¶åœºæ™¯ä¸‹æ—©æœŸçš„å”‡åŠ¨æ–¹æ¡ˆé‡‡ç”¨å•é˜¶æ®µå»ºæ¨¡ï¼ˆå¦‚wav2lipï¼‰ï¼Œè¾“å…¥éŸ³é¢‘ç›´æ¥è¾“å‡ºåƒç´ ç©ºé—´çš„å”‡å½¢å›¾ç‰‡ã€‚å®è·µä¸­å•é˜¶æ®µæ–¹æ¡ˆæ— æ³•è¾¾åˆ°é€¼çœŸçš„å”‡åŠ¨æ•ˆæœï¼Œåæ¥çš„å•†ç”¨æ–¹æ¡ˆå‡ ä¹éƒ½é‡‡ç”¨ä¸¤é˜¶æ®µæ–¹æ¡ˆï¼š<strong>ç¬¬ä¸€é˜¶æ®µå°†éŸ³é¢‘è½¬åŒ–ä¸º2Då…³é”®ç‚¹æˆ–3Däººè„¸æ¨¡å‹ä½œä¸ºä¸­é—´è¡¨è¾¾ï¼Œç¬¬äºŒé˜¶æ®µå°†ä¸­é—´è¡¨è¾¾åˆ©ç”¨GANç½‘ç»œè§£ç åˆ°åƒç´ ç©ºé—´ã€‚</strong></p>
<p><strong><strong>è§†è§‰ç”Ÿæˆæ¨¡å‹</strong></strong></p>
<p>æ ¸å¿ƒç”±ä¸‰ä¸ªæ¨¡å‹ç»„æˆï¼Œ<strong><strong>3Däººè„¸é‡å»ºæ¨¡å‹</strong></strong>ï¼Œ<strong><strong>éŸ³é¢‘åˆ°3Däººè„¸ç”Ÿæˆæ¨¡å‹</strong></strong>ï¼Œ<strong><strong>3Dç©ºé—´åˆ°åƒç´ ç©ºé—´äººè„¸ç”Ÿæ¨¡å‹ã€‚</strong></strong></p>
<ul>
<li>3Däººè„¸é‡å»ºåˆ©ç”¨3DMMå°†äººè„¸å›¾ç‰‡ï¼ˆåƒç´ ï¼‰è½¬æ¢ä¸º3D meshï¼ˆä¸‰ç»´ç©ºé—´ç‚¹ï¼‰</li>
<li>åŸºäºFaceformeræ”¹è¿›çš„éŸ³é¢‘åˆ°3D meshé¢„ä¼°æ¨¡å‹ï¼Œmeshä½œä¸ºä¸­é—´è¡¨è¾¾æºå¸¦äº†ä¸°å¯Œçš„é¢éƒ¨åŠ¨æ€ï¼Œä½¿å¾—ç”Ÿæˆæ¨¡å‹èƒ½å¤Ÿç”Ÿæˆé€¼çœŸçš„å”‡å½¢å›¾ç‰‡ã€‚</li>
<li>åŸºäºStyleGan2æ”¹è¿›çš„äººè„¸ç”Ÿæˆæ¨¡å‹ï¼Œè®­ç»ƒç›®æ ‡åŒ…æ‹¬åƒç´ ç©ºé—´çš„é‡å»ºæŸå¤±ï¼Œç‰¹å¾ç©ºé—´çš„æ„ŸçŸ¥æŸå¤±ï¼Œä»¥åŠå¯¹æŠ—ç”ŸæˆæŸå¤±ã€‚å®ç°ä¸ªæ€§åŒ–å¢é‡å¾®è°ƒæ–¹æ¡ˆï¼Œå¤ç”¨é¢„è®­ç»ƒåº•åº§åªå­¦ä¹ æ¯ä¸ªä¸»æ’­çš„ä¸ªæ€§åŒ–å”‡åŠ¨é£æ ¼ï¼Œæ–°å½¢è±¡ä»…éœ€å¾®è°ƒï¼Œ3å°æ—¶å†…å®Œæˆåˆ¶ä½œã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/327325ef703c4b1796e8d0b243cd1392~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=OG5fucWulVDUHuKfkdWhfRI01l8%3D" alt="a257f774f7b3f261f4d91b5ac0fac33c.png" loading="lazy"/></p>
<p>æ¨¡å‹pipeline</p>
<p><strong><strong>åœ¨çº¿åˆæˆæ¶æ„</strong></strong></p>
<p>å½¢è±¡åˆæˆä»¥ttséŸ³é¢‘ã€åº•æ¿è§†é¢‘å¸§å’Œç›´æ’­é—´èƒŒæ™¯ä¸ºè¾“å…¥ï¼Œé€šè¿‡ç”Ÿæˆæ¨¡å‹å®æ—¶åˆæˆä¸»æ’­å˜´éƒ¨åŒºåŸŸï¼Œæœ€åç»„è£…æˆè§†é¢‘æµæ¨é€ç»™ç”¨æˆ·ã€‚å…¶ä¸­ä»»åŠ¡é˜Ÿåˆ—å»ºç«‹ç¼“å†²åŒºï¼Œä¿éšœäº†è§†é¢‘æµçš„è¿ç»­æ€§ã€‚ç›®å‰å·²å®ç°å•å¡å¤šè·¯æµå¼æ¸²æŸ“ï¼Œæ”¯æ’‘2ä¸‡å¤šç›´æ’­é—´åŒæ—¶å¼€æ’­</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cf3daab00bb4870a0c3ddc5ab65f239~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883797&amp;x-signature=Xiv9rg4zpDya87Mk7nrz9IHgrsg%3D" alt="f2a61d2b808afc9c277bca6b01b11654.jpg" loading="lazy"/></p>
<p>åœ¨çº¿æµå¼åˆæˆæ¶æ„</p>
<h2 data-id="heading-20">06 æ€»ç»“</h2>
<p>å†ç»ä¸¤å¹´å¤šçš„æŒç»­æ‰“ç£¨ä¸æŠ€æœ¯çªç ´ï¼Œæ…§æ’­æ˜Ÿå·²ç»ä»ä¸€æ¬¾æ•°å­—äººç›´æ’­å·¥å…·ï¼Œæˆé•¿ä¸ºè¦†ç›–è„šæœ¬ç”Ÿæˆã€å®æ—¶é—®ç­”ã€æ™ºèƒ½ä¸­æ§ã€è¯­éŸ³å…‹éš†ã€å½¢è±¡åˆæˆç­‰å¤šæ¨¡æ€å…¨é“¾è·¯çš„åŸç”Ÿ AI ç›´æ’­å¹³å°ã€‚å®ƒä¸ä»…å¤åˆ»äº†çœŸäººä¸»æ’­çš„å†…å®¹è¡¨è¾¾ä¸å¸¦è´§èŠ‚å¥ï¼Œæ›´é€šè¿‡å•†å“ç†è§£å¢å¼ºã€å¼ºåŒ–å­¦ä¹ å†³ç­–ã€å…ˆéªŒâ€”åéªŒæ•°æ®é£è½®ã€å¤§è§„æ¨¡éŸ³è§†é¢‘ç”Ÿæˆæ¨¡å‹ç­‰å…³é”®æŠ€æœ¯ï¼Œå®ç°äº†â€œè¶…è¶ŠçœŸäººâ€çš„ç›´æ’­èƒ½åŠ›ã€‚éšç€ä¸šåŠ¡è§„æ¨¡çš„å¿«é€Ÿæ‰©å¼ ä¸æŠ€æœ¯ä½“ç³»çš„æŒç»­æ¼”è¿›ï¼Œæ…§æ’­æ˜Ÿå·²åœ¨æ—¥å‡2ä¸‡+ç›´æ’­é—´ã€ä¸‡çº§å®šåˆ¶å½¢è±¡ä¸éŸ³è‰²ã€è¦†ç›–ç”µå•†ä¸æ³›è¡Œä¸šåœºæ™¯çš„çœŸå®ç”Ÿäº§ç¯å¢ƒä¸­éªŒè¯äº† AI ç›´æ’­çš„æˆç†Ÿåº¦å’Œå•†ä¸šä»·å€¼ã€‚æœªæ¥æ…§æ’­æ˜Ÿå°†ç»§ç»­æ²¿ç€â€œæ›´æ™ºèƒ½ã€æ›´å…·è¯´æœåŠ›ã€æ›´é«˜æ•ˆâ€çš„æ–¹å‘è¿­ä»£ï¼šè®©è„šæœ¬æ›´ç²¾å‡†ã€äº’åŠ¨æ›´è‡ªç„¶ã€è§†è§‰æ›´é€¼çœŸã€å£°éŸ³æ›´ç”ŸåŠ¨ã€å†³ç­–æ›´æ™ºæ…§ï¼Œå¹¶é€šè¿‡æŒç»­è¿è½¬çš„æ•°æ®é£è½®ä¸æ–­çªç ´ç›´æ’­ä½“éªŒçš„å¤©èŠ±æ¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RabbitMQ å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±å’Œä¸é‡å¤æ¶ˆè´¹ï¼ŸæŒæ¡è¿™ 4 ä¸ªå…³é”®ç‚¹å°±å¤Ÿäº†]]></title>    <link>https://juejin.cn/post/7581688255625052212</link>    <guid>https://juejin.cn/post/7581688255625052212</guid>    <pubDate>2025-12-09T11:44:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581688255625052212" data-draft-id="7573958996668661787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RabbitMQ å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±å’Œä¸é‡å¤æ¶ˆè´¹ï¼ŸæŒæ¡è¿™ 4 ä¸ªå…³é”®ç‚¹å°±å¤Ÿäº†"/> <meta itemprop="keywords" content="åç«¯,Java,RabbitMQ"/> <meta itemprop="datePublished" content="2025-12-09T11:44:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RabbitMQ å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±å’Œä¸é‡å¤æ¶ˆè´¹ï¼ŸæŒæ¡è¿™ 4 ä¸ªå…³é”®ç‚¹å°±å¤Ÿäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T11:44:08.000Z" title="Tue Dec 09 2025 11:44:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨<strong>RabbitMQ</strong>æ¥åšç³»ç»Ÿä¹‹é—´çš„ä¼ è¯ç­’ã€‚</p>
<p>æ¯”å¦‚ç”¨æˆ·ä¸‹å•åï¼Œé€šçŸ¥åº“å­˜ç³»ç»Ÿå‡åº“å­˜ã€é€šçŸ¥ç‰©æµç³»ç»Ÿå‡†å¤‡å‘è´§ã€‚</p>
<p>ä½†é—®é¢˜æ¥äº†ï¼š<strong>ä¸‡ä¸€æ¶ˆæ¯ä¸¢äº†æ€ä¹ˆåŠï¼Ÿæˆ–è€…åŒä¸€æ¡æ¶ˆæ¯è¢«å¤„ç†äº†ä¸¤æ¬¡æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>åˆ«æ‹…å¿ƒï¼åªè¦åšå¥½ä»¥ä¸‹å‡ ç‚¹ï¼Œå°±èƒ½è®© RabbitMQ å˜å¾—æ—¢<strong>å¯é </strong>åˆ<strong>å®‰å…¨</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-0">æ¶ˆæ¯å¯èƒ½åœ¨å“ªä¸¢ï¼Ÿ</h3>
<p>å‡è®¾å‘å¿«é€’ï¼š</p>
<ul>
<li>ä½ ï¼ˆç”Ÿäº§è€…ï¼‰æŠŠåŒ…è£¹äº¤ç»™å¿«é€’å‘˜ï¼ˆRabbitMQï¼‰ï¼›</li>
<li>å¿«é€’å‘˜æŠŠåŒ…è£¹é€åˆ°æ”¶ä»¶äººï¼ˆæ¶ˆè´¹è€…ï¼‰æ‰‹ä¸Šã€‚</li>
</ul>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒåŒ…è£¹å¯èƒ½åœ¨ä¸‰ä¸ªåœ°æ–¹å‡ºé—®é¢˜ï¼š</p>
<ol>
<li><strong>ä½ åˆšå¯„å‡ºï¼Œå¿«é€’å‘˜æ²¡æ”¶åˆ°</strong> â†’ æ¶ˆæ¯æ²¡åˆ° RabbitMQï¼›</li>
<li><strong>å¿«é€’å‘˜æ”¶åˆ°äº†ï¼Œä½†ä»“åº“é—¨æ²¡å¼€</strong> â†’ RabbitMQ å®•æœºï¼Œæ¶ˆæ¯æ²¡äº†ï¼›</li>
<li><strong>æ”¶ä»¶äººç­¾æ”¶å‰æ‰‹æœºæ²¡ç”µäº†</strong> â†’ æ¶ˆè´¹è€…å¤„ç†å¤±è´¥ï¼Œæ¶ˆæ¯ä¸¢å¤±ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä»<strong>å‘é€æ–¹ã€ä¸­é—´æ–¹ã€æ¥æ”¶æ–¹</strong>ä¸‰å¤„ä¸‹æ‰‹ï¼</p>
<h3 data-id="heading-1">å…ˆé…å¥½é…ç½®æ–‡ä»¶ï¼ˆ<code>application.yml</code>ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">rabbitmq:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">guest</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">guest</span>
    <span class="hljs-comment"># å¼€å¯ publisher confirm å’Œ return</span>
    <span class="hljs-attr">publisher-confirm-type:</span> <span class="hljs-string">correlated</span>
    <span class="hljs-attr">publisher-returns:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">template:</span>
      <span class="hljs-attr">mandatory:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># ä½¿ returns ç”Ÿæ•ˆ</span>
    <span class="hljs-attr">listener:</span>
      <span class="hljs-attr">simple:</span>
        <span class="hljs-attr">acknowledge-mode:</span> <span class="hljs-string">manual</span>  <span class="hljs-comment"># æ‰‹åŠ¨ ACK</span>
        <span class="hljs-attr">retry:</span>
          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># æˆ‘ä»¬è‡ªå·±æ§åˆ¶é‡è¯•é€»è¾‘</span>

  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
</code></pre>
<hr/>
<h3 data-id="heading-2">1. å£°æ˜é˜Ÿåˆ—ã€äº¤æ¢å™¨ï¼ˆæŒä¹…åŒ–ï¼ï¼‰</h3>
<p>åˆ›å»ºé˜Ÿåˆ—æˆ–äº¤æ¢å™¨æ—¶ï¼Œè®¾ç½®<code>durable=true</code>é˜Ÿåˆ—æŒä¹…åŒ–ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMqConfig</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ORDER_EXCHANGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order.exchange"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ORDER_QUEUE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order.queue"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ORDER_ROUTING_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order.create"</span>;

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DirectExchange <span class="hljs-title function_">orderExchange</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// durable = trueï¼ˆé»˜è®¤å°±æ˜¯ trueï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DirectExchange</span>(ORDER_EXCHANGE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">orderQueue</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// durable = true</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(ORDER_QUEUE, <span class="hljs-literal">true</span>);
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Binding <span class="hljs-title function_">binding</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> BindingBuilder.bind(orderQueue())
                .to(orderExchange())
                .with(ORDER_ROUTING_KEY);
    }
}
</code></pre>
<h3 data-id="heading-3">2. ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼ˆå¸¦å”¯ä¸€ ID + Confirm å›è°ƒï¼‰</h3>
<p>å‘é€æ¶ˆæ¯æ—¶ï¼Œè®¾ç½® <code>deliveryMode=2</code> æ¶ˆæ¯æŒä¹…åŒ–ã€‚</p>
<p>åŒæ—¶å¢åŠ å¼‚æ­¥éé˜»å¡æ“ä½œï¼Œå‘å®Œæ¶ˆæ¯ç«‹åˆ»è¿”å›ï¼ŒRabbitMQ åå°å¼‚æ­¥ç¡®è®¤ã€‚æ”¯æŒæ‰¹é‡ç¡®è®¤ã€å•æ¡ç¡®è®¤ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderProducer</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RabbitTemplate rabbitTemplate;

    <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€æ¶ˆæ¯IDï¼ˆå®é™…å¯ç”¨ UUID æˆ–ä¸šåŠ¡IDï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendOrderMessage</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">msgId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"msg_"</span> + System.currentTimeMillis(); <span class="hljs-comment">// ç®€åŒ–ç‰ˆå”¯ä¸€ID</span>

        <span class="hljs-type">MessageProperties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageProperties</span>();
        props.setMessageId(msgId); <span class="hljs-comment">// è®¾ç½®å”¯ä¸€IDï¼Œç”¨äºå¹‚ç­‰</span>
        props.setDeliveryMode(MessageDeliveryMode.PERSISTENT); <span class="hljs-comment">// æŒä¹…åŒ–</span>

        <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>((orderId).getBytes(StandardCharsets.UTF_8), props);

        <span class="hljs-comment">// å‘é€å¹¶ç›‘å¬ confirm</span>
        rabbitTemplate.convertAndSend(
            RabbitMqConfig.ORDER_EXCHANGE,
            RabbitMqConfig.ORDER_ROUTING_KEY,
            message,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">CorrelationData</span>(msgId) <span class="hljs-comment">// CorrelationData ç”¨äºå…³è” confirm</span>
        );

        <span class="hljs-comment">// è®¾ç½® confirm å›è°ƒ</span>
        rabbitTemplate.setConfirmCallback((correlationData, ack, cause) -&gt; {
            <span class="hljs-keyword">if</span> (ack) {
                System.out.println(<span class="hljs-string">"æ¶ˆæ¯å·²ç¡®è®¤é€è¾¾ RabbitMQ: "</span> + correlationData.getId());
            } <span class="hljs-keyword">else</span> {
                System.err.println(<span class="hljs-string">"æ¶ˆæ¯å‘é€å¤±è´¥: "</span> + cause);
                <span class="hljs-comment">// å¯åœ¨æ­¤å¤„è®°å½•æ—¥å¿—ã€é‡å‘ã€å­˜ DB ç­‰</span>
            }
        });

        <span class="hljs-comment">// ï¼ˆå¯é€‰ï¼‰è®¾ç½® return å›è°ƒï¼Œå¤„ç†è·¯ç”±å¤±è´¥</span>
        rabbitTemplate.setReturnsCallback(returned -&gt; {
            System.err.println(<span class="hljs-string">"æ¶ˆæ¯æ— æ³•è·¯ç”±: "</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(returned.getMessage().getBody()));
        });
    }
}
</code></pre>
<p><strong>ç”Ÿäº§ç¯å¢ƒå»ºè®®æŠŠå¤±è´¥çš„æ¶ˆæ¯å­˜å…¥æ•°æ®åº“ï¼Œç”±å®šæ—¶ä»»åŠ¡è¡¥å¿é‡å‘ã€‚</strong></p>
<p>åˆ°è¿™é‡Œå¾ˆå¤šäººä»¥ä¸ºåªè¦è®¾ç½®äº†<code>durable=true</code>å’Œ<code>deliveryMode=2</code>ï¼Œæ¶ˆæ¯å°±ä¸‡æ— ä¸€å¤±äº†ã€‚</p>
<p>å…¶å®ä¸ç„¶ï¼RabbitMQ æ”¶åˆ°æŒä¹…åŒ–æ¶ˆæ¯åï¼Œä¼šå…ˆå†™å…¥å†…å­˜ç¼“å†²åŒºï¼Œå†å¼‚æ­¥åˆ·ç›˜ï¼ˆfsyncï¼‰ã€‚</p>
<p>å¦‚æœåœ¨è¿™ä¹‹é—´æœåŠ¡å™¨æ–­ç”µï¼Œæ¶ˆæ¯è¿˜æ˜¯ä¼šä¸¢ï¼</p>
<h4 data-id="heading-4">è§£å†³æ–¹æ¡ˆï¼š</h4>
<p><strong>ä¼ ç»Ÿæ–¹æ¡ˆ</strong>ï¼šé•œåƒé˜Ÿåˆ—ï¼ˆMirrored Queueï¼‰å¤šèŠ‚ç‚¹å¤‡ä»½ï¼Œä½†å­˜åœ¨è„‘è£‚ã€æ•°æ®ä¸ä¸€è‡´é£é™©ã€‚</p>
<p><strong>ç°ä»£æ–¹æ¡ˆï¼ˆRabbitMQ 3.8+ï¼‰</strong>ï¼šQuorum Queueï¼ˆä»²è£é˜Ÿåˆ—ï¼‰</p>
<ul>
<li>åŸºäº Raft å…±è¯†ç®—æ³•ï¼Œå¼ºä¸€è‡´æ€§ï¼›</li>
<li>è‡ªåŠ¨é€‰ä¸»ã€æ•…éšœè½¬ç§»ï¼›</li>
<li>å†™å…¥å¤šæ•°èŠ‚ç‚¹æ‰è¿”å›æˆåŠŸï¼ŒçœŸæ­£é˜²ä¸¢ã€‚</li>
</ul>
<p>åœ¨SpringBootä¸­å£°æ˜ <code>Quorum Queue</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">quorumOrderQueue</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> QueueBuilder
        .durable(<span class="hljs-string">"order.quorum.queue"</span>)
        .quorum() <span class="hljs-comment">// å…³é”®ï¼</span>
        .build();
}
</code></pre>
<hr/>
<h3 data-id="heading-5">3.æ¶ˆè´¹è€…ï¼šæ‰‹åŠ¨ ACK + å¹‚ç­‰å¤„ç†ï¼ˆé˜²é‡å¤ï¼‰</h3>
<p><strong>æ‰‹åŠ¨ ACK æ˜¯ä»€ä¹ˆï¼Ÿ</strong>
ç­‰å¾…æ¶ˆè´¹è€…è°ƒç”¨<code>basicAck</code>ï¼Œæ”¶åˆ° ACK åï¼Œæ‰ä»é˜Ÿåˆ—ä¸­åˆ é™¤æ¶ˆæ¯ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯å¹‚ç­‰ï¼Ÿ</strong>
ä¸€ä¸ªæ“ä½œæ‰§è¡Œä¸€æ¬¡å’Œæ‰§è¡Œå¤šæ¬¡ï¼Œç»“æœå®Œå…¨ç›¸åŒã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderConsumer</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSUMED_KEY_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"mq:consumed:"</span>;

    <span class="hljs-meta">@RabbitListener(queues = RabbitMqConfig.ORDER_QUEUE)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrder</span><span class="hljs-params">(Message message, Channel channel)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">String</span> <span class="hljs-variable">msgId</span> <span class="hljs-operator">=</span> message.getMessageProperties().getMessageId();
        <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), StandardCharsets.UTF_8);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1.å¹‚ç­‰æ£€æŸ¥ï¼šæ˜¯å¦å·²å¤„ç†è¿‡ï¼Ÿ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> CONSUMED_KEY_PREFIX + msgId;
            <span class="hljs-type">Boolean</span> <span class="hljs-variable">hasConsumed</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().setIfAbsent(key, <span class="hljs-string">"1"</span>, Duration.ofHours(<span class="hljs-number">24</span>));
            <span class="hljs-keyword">if</span> (Boolean.FALSE.equals(hasConsumed)) {
                System.out.println(<span class="hljs-string">"é‡å¤æ¶ˆæ¯ï¼Œè·³è¿‡å¤„ç†: "</span> + msgId);
                channel.basicAck(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>);
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// 2.å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚å‡åº“å­˜ã€å‘çŸ­ä¿¡ï¼‰</span>
            System.out.println(<span class="hljs-string">"æ­£åœ¨å¤„ç†è®¢å•: "</span> + orderId);

            <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡è€—æ—¶</span>
            Thread.sleep(<span class="hljs-number">1000</span>);

            <span class="hljs-comment">// 3.ä¸šåŠ¡æˆåŠŸ â†’ æ‰‹åŠ¨ ACK</span>
            channel.basicAck(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>);
            System.out.println(<span class="hljs-string">"æ¶ˆè´¹æˆåŠŸï¼Œå·² ACK: "</span> + msgId);

        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ¶ˆè´¹å¤±è´¥: "</span> + e.getMessage());
            <span class="hljs-comment">// æ‹’ç»æ¶ˆæ¯ï¼Œä¸ requeueï¼ˆé¿å…æ­»å¾ªç¯ï¼‰ï¼Œæˆ–æ ¹æ®ç­–ç•¥å†³å®šæ˜¯å¦é‡è¯•</span>
            channel.basicNack(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
            <span class="hljs-comment">// æˆ–è€…ï¼šbasicReject + è®°å½•åˆ°æ­»ä¿¡é˜Ÿåˆ—</span>
        }
    }
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li><code>setIfAbsent</code> å®ç° Redis åˆ†å¸ƒå¼é”å¼å»é‡ï¼›</li>
<li><strong>å…ˆæ£€æŸ¥å¹‚ç­‰ï¼Œå†å¤„ç†ä¸šåŠ¡ï¼Œæœ€å ACK</strong>ï¼›</li>
<li>å¼‚å¸¸æ—¶ç”¨ <code>basicNack</code> æ‹’ç»æ¶ˆæ¯ï¼Œé¿å…æ— é™é‡è¯•ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">å®Œæ•´å¯é æ€§é“¾è·¯å›¾</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[ç”Ÿäº§è€…]</span>
   â”‚
   â”œâ”€â”€ å¼€å¯ Confirm â†’ ç¡®ä¿æ¶ˆæ¯åˆ°è¾¾ Broker
   â””â”€â”€ æ¶ˆæ¯å¸¦å”¯ä¸€ID â†’ ç”¨äºåç»­å¹‚ç­‰
        â”‚
        â–¼
<span class="hljs-section">[RabbitMQ Broker]</span>
   â”œâ”€â”€ é˜Ÿåˆ—/äº¤æ¢å™¨æŒä¹…åŒ–
   â”œâ”€â”€ æ¶ˆæ¯æŒä¹…åŒ–ï¼ˆ<span class="hljs-attr">deliveryMode</span>=<span class="hljs-number">2</span>ï¼‰
   â””â”€â”€ ä½¿ç”¨ Quorum Queueï¼ˆé«˜å¯ç”¨+å¼ºä¸€è‡´ï¼‰
        â”‚
        â–¼
<span class="hljs-section">[æ¶ˆè´¹è€…]</span>
   â”œâ”€â”€ æ‰‹åŠ¨ ACKï¼ˆ<span class="hljs-attr">autoAck</span>=<span class="hljs-literal">false</span>ï¼‰
   â”œâ”€â”€ å…ˆæŸ¥å¹‚ç­‰ï¼ˆRedis/setIfAbsentï¼‰
   â”œâ”€â”€ å†æ‰§è¡Œä¸šåŠ¡
   â””â”€â”€ æœ€å ACKï¼ˆå¤±è´¥åˆ™ NACK æˆ–è¿›æ­»ä¿¡é˜Ÿåˆ—ï¼‰
</code></pre>
<hr/>
<h3 data-id="heading-7">å¸¸è§è¯¯åŒº</h3>

























<table><thead><tr><th>è¯¯åŒº</th><th>æ­£ç¡®åšæ³•</th></tr></thead><tbody><tr><td>â€œå¼€äº†æŒä¹…åŒ–å°±ä¸ä¼šä¸¢â€</td><td>è¿˜éœ€ Confirm + é«˜å¯ç”¨é˜Ÿåˆ—</td></tr><tr><td>â€œè‡ªåŠ¨ ACK æ›´ç®€å•â€</td><td>è‡ªåŠ¨ ACK ææ˜“ä¸¢æ¶ˆæ¯ï¼å¿…é¡»æ‰‹åŠ¨</td></tr><tr><td>â€œRabbitMQ èƒ½ä¿è¯ä¸é‡å¤â€</td><td>ä¸èƒ½ï¼å¿…é¡»æ¶ˆè´¹è€…è‡ªå·±å¹‚ç­‰</td></tr><tr><td>â€œæ¶ˆæ¯IDç”¨æ—¶é—´æˆ³å°±è¡Œâ€</td><td>æ—¶é—´æˆ³å¯èƒ½é‡å¤ï¼å»ºè®®ç”¨ UUID æˆ–é›ªèŠ±ID</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>ä¿è¯ RabbitMQ æ¶ˆæ¯ä¸ä¸¢å’Œä¸é‡å¤ï¼Œè®°ä½è¿™å››ä¸ªå…³é”®ç‚¹ï¼š</p>
<p><strong>1. ç”Ÿäº§è€…ç¡®è®¤ï¼ˆConfirmï¼‰</strong></p>
<ul>
<li>å¼€å¯ <code>publisher-confirm</code>ï¼Œç¡®ä¿æ¶ˆæ¯æˆåŠŸå‘åˆ° RabbitMQã€‚</li>
</ul>
<p><strong>2. æ¶ˆæ¯æŒä¹…åŒ–</strong></p>
<ul>
<li>é˜Ÿåˆ—å’Œæ¶ˆæ¯éƒ½è®¾ç½®æˆæŒä¹…åŒ–ï¼Œé˜²æ­¢ RabbitMQ é‡å¯åæ•°æ®ä¸¢å¤±ã€‚</li>
</ul>
<p><strong>3. æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤ï¼ˆACKï¼‰</strong></p>
<ul>
<li>å…³é—­è‡ªåŠ¨ ACKï¼Œä¸šåŠ¡å¤„ç†æˆåŠŸåï¼Œå†æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯ã€‚</li>
</ul>
<p><strong>4. æ¶ˆè´¹å¹‚ç­‰æ€§</strong></p>
<ul>
<li>æ¯æ¡æ¶ˆæ¯å¸¦å”¯ä¸€ IDï¼Œæ¶ˆè´¹è€…å…ˆæ£€æŸ¥æ˜¯å¦å¤„ç†è¿‡ï¼Œé¿å…é‡å¤æ¶ˆè´¹ã€‚</li>
</ul>
<p><strong>ç®€å•æ¥è¯´ï¼š</strong></p>
<ul>
<li><strong>é˜²ä¸¢å¤±</strong>ï¼šConfirm + æŒä¹…åŒ– + æ‰‹åŠ¨ ACK</li>
<li><strong>é˜²é‡å¤</strong>ï¼šæ¶ˆæ¯å”¯ä¸€ ID + å¹‚ç­‰æ£€æŸ¥</li>
</ul>
<p>æ²¡æœ‰100%çš„ä¸ä¸¢å¤±ï¼Œåªæœ‰æ— é™æ¥è¿‘99.99%çš„å¯é æ€§ã€‚</p>
<p>åšå¥½è¿™å››ç‚¹ï¼Œä½ çš„ RabbitMQ å°±è¶³å¤Ÿå¯é äº†ï¼</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-9">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F6V83qjR6u0nyfzL-14xYAw" target="_blank" title="https://mp.weixin.qq.com/s/6V83qjR6u0nyfzL-14xYAw" ref="nofollow noopener noreferrer">ã€Šasync/await åˆ°åº•è¦ä¸è¦åŠ  try-catchï¼Ÿå¼‚æ­¥é”™è¯¯å¤„ç†æœ€ä½³å®è·µã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FPQ_w7CDVoIZPn-CVH2DKJg" target="_blank" title="https://mp.weixin.qq.com/s/PQ_w7CDVoIZPn-CVH2DKJg" ref="nofollow noopener noreferrer">ã€ŠVue3 å’Œ Vue2 çš„æ ¸å¿ƒåŒºåˆ«ï¼Ÿå¾ˆå¤šå¼€å‘è€…éƒ½æ²¡å®Œå…¨ææ‡‚çš„ 10 ä¸ªç»†èŠ‚ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp0n2mN5RDDDaIWuHHVRUZQ" target="_blank" title="https://mp.weixin.qq.com/s/p0n2mN5RDDDaIWuHHVRUZQ" ref="nofollow noopener noreferrer">ã€ŠJava å¼€å‘å¿…çœ‹ï¼šä»€ä¹ˆæ—¶å€™ç”¨ forï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Streamï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqI3TRTdDfRJSH9kCTqAQUw" target="_blank" title="https://mp.weixin.qq.com/s/qI3TRTdDfRJSH9kCTqAQUw" ref="nofollow noopener noreferrer">ã€Šè¿™ 10 ä¸ª MySQL é«˜çº§ç”¨æ³•ï¼Œè®©ä½ çš„ä»£ç åˆå¿«åˆå¥½çœ‹ã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Schedulerä¸ºä½•é‡‡ç”¨MessageChannelè°ƒåº¦?]]></title>    <link>https://juejin.cn/post/7581678032336240682</link>    <guid>https://juejin.cn/post/7581678032336240682</guid>    <pubDate>2025-12-09T09:43:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581678032336240682" data-draft-id="7581428845683884075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Schedulerä¸ºä½•é‡‡ç”¨MessageChannelè°ƒåº¦? "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-09T09:43:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŸæ¥æ˜¯å°ä»™å¥³å‘€"/> <meta itemprop="url" content="https://juejin.cn/user/1239904846362055"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Schedulerä¸ºä½•é‡‡ç”¨MessageChannelè°ƒåº¦? 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904846362055/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŸæ¥æ˜¯å°ä»™å¥³å‘€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T09:43:59.000Z" title="Tue Dec 09 2025 09:43:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style>





















































<table><thead><tr><th>ç‰¹æ€§</th><th><strong>setTimeout</strong></th><th><strong>requestAnimationFrame</strong></th><th><strong>requestIdleCallback</strong></th><th><strong>MessageChannel</strong></th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td>å®šæ—¶å™¨å®ä»»åŠ¡</td><td>åŠ¨ç”»å›è°ƒé’©å­</td><td>ç©ºé—²æœŸå›è°ƒé’©å­</td><td>æ¶ˆæ¯é€šä¿¡å®ä»»åŠ¡</td></tr><tr><td><strong>æ‰§è¡Œæ—¶æœº</strong></td><td>å»¶è¿ŸæŒ‡å®šæ¯«ç§’åï¼ˆä¸ç²¾ç¡®ï¼‰</td><td><strong>ä¸‹ä¸€å¸§æ¸²æŸ“ä¹‹å‰</strong>ï¼ˆä¸åˆ·æ–°ç‡åŒæ­¥ï¼‰</td><td><strong>æµè§ˆå™¨ç©ºé—²æ—¶</strong>ï¼ˆä¸€å¸§çš„æœ«å°¾ï¼‰</td><td><strong>ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯</strong>ï¼ˆä½œä¸ºå®ä»»åŠ¡ï¼‰</td></tr><tr><td><strong>ä¸»è¦è®¾è®¡ç›®çš„</strong></td><td>å»¶è¿Ÿæ‰§è¡Œä»£ç </td><td>å®ç°æµç•…åŠ¨ç”»</td><td>æ‰§è¡Œä½ä¼˜å…ˆçº§åå°ä»»åŠ¡</td><td>ä¸åŒä¸Šä¸‹æ–‡é—´é€šä¿¡</td></tr><tr><td><strong>å…³é”®ä¼˜åŠ¿</strong></td><td>é€šç”¨ã€çµæ´»ã€å…¼å®¹æ€§å¥½</td><td><strong>åŠ¨ç”»æµç•…ã€èŠ‚èƒ½</strong>ï¼ˆåå°æš‚åœï¼‰</td><td><strong>ä¸é˜»å¡æ¸²æŸ“ä¸äº¤äº’</strong>ï¼Œåˆ©ç”¨ç©ºé—²æ—¶é—´</td><td><strong>å»¶è¿ŸæçŸ­ä¸”ç¨³å®š</strong>ï¼Œå¯ç²¾å‡†æ§åˆ¶ä»»åŠ¡åˆ‡ç‰‡</td></tr><tr><td><strong>å…³é”®ç¼ºé™·</strong></td><td><strong>æ—¶åºä¸ç²¾ç¡®</strong>ï¼ŒåµŒå¥—æœ‰æœ€å°å»¶è¿Ÿï¼ˆå¦‚4msï¼‰</td><td><strong>ä¾èµ–æ¸²æŸ“å‘¨æœŸ</strong>ï¼Œæ‰§è¡Œé¢‘ç‡å›ºå®šï¼ˆ~16.7msï¼‰</td><td><strong>æ‰§è¡Œæ—¶æœºä¸å¯æ§</strong>ï¼Œå¯èƒ½é•¿æœŸå¾—ä¸åˆ°è°ƒç”¨</td><td><strong>éç”¨äºè°ƒåº¦</strong>ï¼Œæ˜¯â€œåˆ›é€ æ€§â€ç”¨æ³•</td></tr><tr><td><strong>Reactè°ƒåº¦çš„é€‚ç”¨æ€§</strong></td><td>âŒ å»¶è¿Ÿä¸å¯æ§ï¼Œä¸é€‚åˆç²¾ç»†è°ƒåº¦</td><td>âŒ ä¾èµ–æ¸²æŸ“èŠ‚å¥ï¼Œæ— æ³•åœ¨å¸§ä¸­å¤šæ¬¡è°ƒåº¦</td><td>âŒ æ—¶æœºä¸å¯é ï¼Œæ— æ³•æ»¡è¶³åŠæ—¶å“åº”éœ€æ±‚</td><td>âœ…Â <strong>åœ¨äº‹ä»¶å¾ªç¯ä¸­åŠæ—¶æ’å…¥ä»»åŠ¡ï¼Œå®ç°å¯ä¸­æ–­è°ƒåº¦çš„ç†æƒ³é€‰æ‹©</strong></td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ“ å„APIåŠŸèƒ½ä¸ç‰¹æ€§è¯¦è§£</h3>
<p>ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“çœ‹çœ‹æ¯ä¸ªAPIçš„æ ¸å¿ƒå·¥ä½œæœºåˆ¶å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<ol>
<li>
<p><strong>setTimeout</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šæœ€åŸºç¡€çš„å¼‚æ­¥å®šæ—¶å™¨ï¼Œç”¨äºåœ¨æŒ‡å®šçš„å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰åï¼Œå°†å›è°ƒå‡½æ•°æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œ</li>
<li><strong>æ‰§è¡Œæœºåˆ¶</strong>ï¼šå®ƒè®¾ç½®çš„æ˜¯ä¸€ä¸ªâ€œ<strong>æœ€å°å»¶è¿Ÿ</strong>â€ï¼Œè€Œéç²¾ç¡®æ—¶é—´ã€‚å›è°ƒçš„å®é™…æ‰§è¡Œæ—¶é—´ä¼šå—åˆ°ä¸»çº¿ç¨‹ä¸Šå…¶ä»–ä»»åŠ¡ï¼ˆå¦‚åŒæ­¥ä»£ç ã€å¾®ä»»åŠ¡ã€UIæ¸²æŸ“ï¼‰çš„é˜»å¡ï¼Œå»¶è¿Ÿå¯èƒ½è¿œå¤§äºè®¾å®šå€¼</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºå¯¹æ—¶é—´ç²¾åº¦è¦æ±‚ä¸é«˜çš„å»¶è¿Ÿæ“ä½œï¼Œå¦‚é˜²æŠ–/èŠ‚æµã€è½®è¯¢æ£€æŸ¥ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>requestAnimationFrame</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šä¸“ä¸ºåŠ¨ç”»è®¾è®¡çš„APIï¼Œå…¶å›è°ƒå‡½æ•°ä¼šåœ¨<strong>æµè§ˆå™¨ä¸‹ä¸€æ¬¡é‡ç»˜ï¼ˆå³ç»˜åˆ¶ä¸‹ä¸€å¸§ï¼‰ä¹‹å‰æ‰§è¡Œ</strong></li>
<li><strong>æ‰§è¡Œæœºåˆ¶</strong>ï¼šä¸æ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡ï¼ˆé€šå¸¸æ˜¯60Hzï¼Œçº¦16.7ms/å¸§ï¼‰åŒæ­¥ã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨ä¼˜åŒ–è°ƒç”¨ï¼Œåœ¨é¡µé¢ä¸å¯è§æ—¶ï¼ˆå¦‚æ ‡ç­¾é¡µè¢«éšè—ï¼‰ä¼šè‡ªåŠ¨æš‚åœï¼Œä»¥èŠ‚çœèµ„æº</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š<strong>å®ç°ä»»ä½•éœ€è¦å¹³æ»‘è¿‡æ¸¡çš„åŠ¨ç”»æ•ˆæœ</strong>ï¼Œæ˜¯æ›¿ä»£<code>setTimeout</code>åšåŠ¨ç”»çš„æœ€ä½³å®è·µ</li>
</ul>
</li>
<li>
<p><strong>requestIdleCallback</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šå…è®¸ä½ åœ¨<strong>æµè§ˆå™¨ç©ºé—²æ—¶æœŸ</strong>è°ƒåº¦ä½ä¼˜å…ˆçº§ä»»åŠ¡</li>
<li><strong>æ‰§è¡Œæœºåˆ¶</strong>ï¼šåœ¨<strong>ä¸€å¸§å¤„ç†å®Œç”¨æˆ·è¾“å…¥ã€<code>requestAnimationFrame</code>å›è°ƒã€å¸ƒå±€å’Œç»˜åˆ¶ç­‰å…³é”®ä»»åŠ¡åï¼Œå¦‚æœè¿˜æœ‰å‰©ä½™æ—¶é—´</strong>ï¼Œæ‰ä¼šæ‰§è¡Œå®ƒçš„å›è°ƒå›è°ƒå‡½æ•°ä¼šæ¥æ”¶ä¸€ä¸ª<code>IdleDeadline</code>å‚æ•°ï¼Œå‘Šè¯‰ä½ å½“å‰å¸§è¿˜å‰©ä½™å¤šå°‘ç©ºé—²æ—¶é—´</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé€‚åˆæ‰§è¡Œä¸€äº›éç´§æ€¥çš„åå°ä»»åŠ¡ï¼Œå¦‚æ•°æ®ä¸ŠæŠ¥ã€éå…³é”®çš„æ•°æ®é¢„å–ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>MessageChannel</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šç”¨äºåœ¨ä¸åŒæµè§ˆå™¨ä¸Šä¸‹æ–‡ï¼ˆå¦‚ä¸¤ä¸ªiframeã€ä¸»çº¿ç¨‹ä¸Web Workerï¼‰é—´å»ºç«‹åŒå‘é€šä¿¡çš„é€šé“</li>
<li><strong>æ‰§è¡Œæœºåˆ¶</strong>ï¼šè°ƒç”¨<code>port.postMessage()</code>æ–¹æ³•ï¼Œä¼šå‘<strong>æ¶ˆæ¯é˜Ÿåˆ—æ·»åŠ ä¸€ä¸ªå®ä»»åŠ¡</strong>ã€‚è¿™ä¸ªä»»åŠ¡ä¼šåœ¨å½“å‰äº‹ä»¶å¾ªç¯çš„å¾®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åã€ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šä¸»è¦åº”ç”¨äºè·¨ä¸Šä¸‹æ–‡é€šä¿¡ã€‚å®ƒåœ¨Reactè°ƒåº¦ä¸­çš„ç”¨æ³•ï¼Œæ˜¯åˆ©ç”¨å…¶<strong>èƒ½äº§ç”Ÿä¸€ä¸ªåœ¨ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯ä¸­å°½æ—©æ‰§è¡Œçš„å®ä»»åŠ¡</strong>çš„ç‰¹æ€§ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-1">âš™ï¸ ä¸ºä»€ä¹ˆReactæœ€ç»ˆé€‰æ‹©äº†MessageChannelï¼Ÿ</h3>
<p>Reactè°ƒåº¦å™¨çš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š<strong>å®ç°å¯ä¸­æ–­çš„å¹¶å‘æ¸²æŸ“ï¼Œå°†é•¿ä»»åŠ¡åˆ‡æˆå°ç‰‡ï¼Œåœ¨æ¯ä¸€å¸§ä¸­æ’å…¥æ‰§è¡Œï¼ŒåŒæ—¶èƒ½å¿«é€Ÿå“åº”é«˜ä¼˜å…ˆçº§æ›´æ–°</strong>ã€‚è¿™å°±è¦æ±‚è°ƒåº¦å™¨èƒ½ä¸»åŠ¨ã€åŠæ—¶åœ°â€œè®©å‡ºâ€ä¸»çº¿ç¨‹ã€‚</p>
<p>ç»“åˆä¸Šè¡¨å’Œåˆ†æï¼Œå…¶ä»–APIä¸é€‚ç”¨äºæ­¤çš„åŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong><code>setTimeout</code></strong>ï¼š<strong>å»¶è¿Ÿä¸ç¨³å®šä¸”ä¸å¯æ§</strong>ã€‚å…¶æœ€å°å»¶è¿Ÿï¼ˆå¦‚4msï¼‰åœ¨å¯†é›†è°ƒåº¦æ—¶ä¼šé€ æˆæµªè´¹ï¼Œæ›´ä¸¥é‡çš„æ˜¯ï¼Œå»¶è¿Ÿæ—¶é—´å¯èƒ½è¢«æ‹‰é•¿ï¼Œå¯¼è‡´è°ƒåº¦å™¨æ— æ³•åœ¨é¢„æœŸæ—¶é—´å†…â€œè‹é†’â€å¹¶äº¤è¿˜ä¸»çº¿ç¨‹ï¼Œå½±å“é¡µé¢å“åº”</li>
<li><strong><code>requestAnimationFrame</code></strong>ï¼š<strong>è°ƒç”¨é¢‘ç‡è¢«é”æ­»åœ¨å±å¹•åˆ·æ–°ç‡ï¼ˆçº¦16.7msä¸€æ¬¡ï¼‰</strong> ã€‚è¿™æ„å‘³ç€å³ä¾¿ä¸€å¸§ä¸­æœ‰å¤§é‡ç©ºé—²æ—¶é—´ï¼Œè°ƒåº¦å™¨ä¹Ÿæ— æ³•æ’å…¥æ›´å¤šä»»åŠ¡åˆ‡ç‰‡ï¼Œæ— æ³•å……åˆ†åˆ©ç”¨å¸§å†…çš„ç©ºé—²èµ„æº</li>
<li><strong><code>requestIdleCallback</code></strong>ï¼š<strong>æ‰§è¡Œæ—¶æœºâ€œå¤ªè¢«åŠ¨â€ä¸”ä¸ç¨³å®š</strong>ã€‚å®ƒä¾èµ–äºæµè§ˆå™¨çš„â€œç©ºé—²é€šçŸ¥â€ï¼Œä½†ç©ºé—²æœŸå¯èƒ½å¾ˆçŸ­æˆ–å¾ˆä¹…éƒ½ä¸å‡ºç°ã€‚å¯¹äºéœ€è¦ä¸»åŠ¨ã€å¯é¢„æµ‹åœ°è¿›è¡Œä»»åŠ¡åˆ‡ç‰‡çš„è°ƒåº¦å™¨æ¥è¯´ï¼Œè¿™ä¸å¯é ï¼ŒåŒæ—¶ï¼Œå…¶å…¼å®¹æ€§ä¹Ÿä¸å¤Ÿç†æƒ³ã€‚</li>
</ul>
<p><strong><code>MessageChannel</code>çš„ä¼˜åŠ¿</strong>æ­£åœ¨äºè§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼š</p>
<ol>
<li><strong>ä¸»åŠ¨ä¸”åŠæ—¶çš„è°ƒåº¦</strong>ï¼šé€šè¿‡<code>port.postMessage()</code>ï¼ŒReactå¯ä»¥<strong>ä¸»åŠ¨</strong>åœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­åˆ›å»ºä¸€ä¸ªå®ä»»åŠ¡æ¥ç»§ç»­å·¥ä½œã€‚è¿™è®©è°ƒåº¦å™¨èƒ½ç²¾ç¡®åœ°åœ¨æ¯ä¸ª5mså·¦å³çš„æ—¶é—´ç‰‡ï¼ˆè¿™æ˜¯Reactè®¾å®šçš„åˆ‡ç‰‡æ—¶é—´ç›®æ ‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.cn%2Fdeveloper%2Farticle%2F2440386" target="_blank" title="https://cloud.tencent.cn/developer/article/2440386" ref="nofollow noopener noreferrer">-7</a>ï¼‰ç»“æŸåâ€œä¸­æ–­â€è‡ªå·±ï¼ŒåŠæ—¶å½’è¿˜ä¸»çº¿ç¨‹ç»™æµè§ˆå™¨è¿›è¡Œæ¸²æŸ“æˆ–å¤„ç†äº¤äº’ã€‚</li>
<li><strong>æ›´é«˜çš„æ‰§è¡Œé¢‘ç‡</strong>ï¼šå®ƒä¸ä¾èµ–å±å¹•åˆ·æ–°ç‡ï¼Œå¯ä»¥åœ¨<strong>åŒä¸€å¸§å†…çš„å¤šæ¬¡äº‹ä»¶å¾ªç¯ä¸­è¿ç»­è°ƒåº¦</strong>ï¼Œä»è€Œæ›´å¯†é›†ã€æ›´å……åˆ†åœ°åˆ©ç”¨ä¸€å¸§ä¹‹å†…çš„è®¡ç®—èµ„æºã€‚</li>
<li><strong>é¿å…å¾®ä»»åŠ¡çš„å¼Šç«¯</strong>ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨<code>Promise</code>ï¼ˆå¾®ä»»åŠ¡ï¼‰ï¼Ÿå› ä¸ºå¾®ä»»åŠ¡ä¼šåœ¨å½“å‰äº‹ä»¶å¾ªç¯ä¸­<strong>è¿ç»­æ‰§è¡Œç›´åˆ°é˜Ÿåˆ—æ¸…ç©º</strong>ï¼Œè¿™åŒæ ·ä¼šé•¿æ—¶é—´é˜»å¡ä¸»çº¿ç¨‹ï¼Œè¾¾ä¸åˆ°â€œå¯ä¸­æ–­â€çš„ç›®çš„</li>
</ol>
<h3 data-id="heading-2">ğŸ’ æ€»ç»“</h3>
<p>Reacté€‰æ‹©<code>MessageChannel</code>ï¼Œæ˜¯åŸºäºå…¶<strong>èƒ½äº§ç”Ÿä¸€ä¸ªåœ¨äº‹ä»¶å¾ªç¯ä¸­åŠæ—¶ã€ç¨³å®šæ‰§è¡Œçš„å®ä»»åŠ¡</strong>è¿™ä¸€ç‰¹æ€§ã€‚è¿™ä¸ºReactå®ç°<strong>ä¸»åŠ¨ã€å¯ä¸­æ–­ã€åŸºäºæ—¶é—´ç‰‡çš„ä»»åŠ¡è°ƒåº¦</strong>æä¾›äº†æœ€åˆé€‚çš„åº•å±‚æœºåˆ¶ï¼Œä»è€Œåœ¨å®ç°å¹¶å‘æ¸²æŸ“çš„åŒæ—¶ï¼Œä¿éšœäº†æµè§ˆå™¨çš„æ¸²æŸ“å’Œç”¨æˆ·äº¤äº’èƒ½è·å¾—æœ€é«˜ä¼˜å…ˆçº§çš„å“åº”ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[webpackå’ŒviteåŒºåˆ«åŠåŸç†å®ç°]]></title>    <link>https://juejin.cn/post/7581698074360971273</link>    <guid>https://juejin.cn/post/7581698074360971273</guid>    <pubDate>2025-12-09T09:52:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698074360971273" data-draft-id="7581658157145358386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="webpackå’ŒviteåŒºåˆ«åŠåŸç†å®ç°"/> <meta itemprop="keywords" content="Vite,Webpack,æ˜é‡‘Â·é‡‘çŸ³è®¡åˆ’"/> <meta itemprop="datePublished" content="2025-12-09T09:52:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰å½±å°‘å¹´"/> <meta itemprop="url" content="https://juejin.cn/user/3184663905962126"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            webpackå’ŒviteåŒºåˆ«åŠåŸç†å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3184663905962126/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰å½±å°‘å¹´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T09:52:08.000Z" title="Tue Dec 09 2025 09:52:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Webpack</strong> å’Œ <strong>Vite</strong> éƒ½æ˜¯ç”¨äºæ„å»ºç°ä»£å‰ç«¯åº”ç”¨çš„æ„å»ºå·¥å…·ï¼Œå®ƒä»¬åœ¨åŸç†å’Œå®ç°ä¸Šæœ‰æ˜¾è‘—çš„åŒºåˆ«ã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†æ¯”è¾ƒå®ƒä»¬çš„å¼‚åŒï¼Œå¸®åŠ©ä½ äº†è§£ä¸¤è€…çš„å·¥ä½œåŸç†ä»¥åŠå„è‡ªçš„ä¼˜åŠ¿ã€‚</p>
<hr/>
<h2 data-id="heading-0">âœ… <strong>ä¸€ã€Webpack å’Œ Vite çš„æ ¸å¿ƒåŒºåˆ«</strong></h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>Webpack</th><th>Vite</th></tr></thead><tbody><tr><td><strong>æ„å»ºé€Ÿåº¦</strong></td><td>è¾ƒæ…¢ï¼Œç‰¹åˆ«æ˜¯å¤§å‹é¡¹ç›®</td><td>å¿«ï¼Œå‡ ä¹æ˜¯å³æ—¶çš„</td></tr><tr><td><strong>æ„å»ºåŸç†</strong></td><td>é€šè¿‡æ‰“åŒ…æ‰€æœ‰èµ„æºï¼Œç”Ÿæˆæœ€ç»ˆçš„ bundle</td><td>é‡‡ç”¨æŒ‰éœ€ç¼–è¯‘ï¼Œåˆ©ç”¨æµè§ˆå™¨åŸç”Ÿæ”¯æŒ ES æ¨¡å—</td></tr><tr><td><strong>å¼€å‘æ¨¡å¼</strong></td><td>ä¸€å¼€å§‹å°±è¿›è¡Œå…¨éƒ¨çš„æ‰“åŒ…ï¼Œç¼–è¯‘é€Ÿåº¦è¾ƒæ…¢</td><td>é€šè¿‡æµè§ˆå™¨åŸç”Ÿæ”¯æŒ ES Modulesï¼Œåªæœ‰è¯·æ±‚çš„æ¨¡å—æ‰ä¼šè¢«å¤„ç†</td></tr><tr><td><strong>æ„å»ºäº§ç‰©</strong></td><td>ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª bundle æ–‡ä»¶</td><td>åŸºäº ES Module æŒ‰éœ€åŠ è½½ï¼Œä¸åŒäº Webpack å®Œæ•´çš„æ‰“åŒ…</td></tr><tr><td><strong>æ”¯æŒç±»å‹</strong></td><td>æ”¯æŒæ‰€æœ‰ JavaScriptï¼ŒCSSï¼Œå›¾ç‰‡ï¼Œå­—ä½“ç­‰</td><td>ä¸»è¦æ”¯æŒ ES æ¨¡å—ï¼Œé’ˆå¯¹ç°ä»£æµè§ˆå™¨ä¼˜åŒ–</td></tr><tr><td><strong>ä½¿ç”¨ä½“éªŒ</strong></td><td>é…ç½®å¤æ‚ï¼Œé€‚ç”¨äºå„ç§éœ€æ±‚å’Œä¼˜åŒ–</td><td>é…ç½®ç®€å•ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘ï¼Œä½†åŠŸèƒ½ä¸å¦‚ Webpack çµæ´»</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1">âœ… <strong>äºŒã€Webpack åŸç†å’Œå®ç°</strong></h2>
<h4 data-id="heading-2"><strong>1. ä¼ ç»Ÿçš„æ‰“åŒ…å·¥å…·</strong></h4>
<p>Webpack æ˜¯ä¸€ä¸ª <strong>æ¨¡å—æ‰“åŒ…å™¨</strong>ï¼Œå®ƒå°†æ‰€æœ‰çš„é™æ€èµ„æºï¼ˆJavaScriptã€CSSã€å›¾ç‰‡ç­‰ï¼‰å½“ä½œæ¨¡å—å¤„ç†ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª bundle æ–‡ä»¶ï¼Œæœ€ç»ˆè¿™äº›æ–‡ä»¶å°†è¢«æµè§ˆå™¨åŠ è½½ã€‚</p>
<h4 data-id="heading-3"><strong>2. æ‰“åŒ…è¿‡ç¨‹ï¼š</strong></h4>
<p>Webpack çš„æ‰“åŒ…è¿‡ç¨‹ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>
<p><strong>è§£æé˜¶æ®µï¼ˆParsingï¼‰</strong></p>
<ul>
<li>Webpack ä»å…¥å£æ–‡ä»¶ï¼ˆentryï¼‰å¼€å§‹ï¼Œé€’å½’åœ°è§£ææ¯ä¸€ä¸ªä¾èµ–ï¼Œç”Ÿæˆä¾èµ–å›¾ã€‚</li>
<li>åœ¨è§£ææ—¶ï¼ŒWebpack ä¼šè°ƒç”¨ <strong>loader</strong> å¯¹ä¸åŒç±»å‹çš„æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†ï¼ˆå¦‚ Babel è½¬è¯‘ã€Sass ç¼–è¯‘ç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ„å»ºé˜¶æ®µï¼ˆBuildingï¼‰</strong></p>
<ul>
<li>Webpack ä¼šé€šè¿‡ <strong>loader</strong> å’Œ <strong>plugin</strong> å¤„ç†æ‰€æœ‰æ¨¡å—ï¼Œç”Ÿæˆæœ€ç»ˆçš„ <strong>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰</strong> ã€‚</li>
<li>ä½¿ç”¨ <strong>module bundling</strong> å°†æ‰€æœ‰æ¨¡å—åˆå¹¶æˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼ˆbundleï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ–é˜¶æ®µï¼ˆOptimizationï¼‰</strong></p>
<ul>
<li>Webpack ä¼šå¯¹ç”Ÿæˆçš„ bundle è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚ï¼šåˆ†å‰²ä»£ç ï¼ˆCode Splittingï¼‰ã€å‹ç¼©ï¼ˆTerserï¼‰ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¾“å‡ºé˜¶æ®µï¼ˆOutputï¼‰</strong></p>
<ul>
<li>æœ€ç»ˆå°† bundle è¾“å‡ºåˆ°æŒ‡å®šçš„ç›®å½•ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-4"><strong>3. Webpack éœ€è¦æ—¶é—´æ‰“åŒ…æ‰€æœ‰èµ„æº</strong></h4>
<p>ç”±äº Webpack ä¼šå°†æ‰€æœ‰èµ„æºéƒ½æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥å½“ä½ åš <code>webpack --mode development</code> å‘½ä»¤æ—¶ï¼Œå®ƒå¿…é¡»ç¼–è¯‘æ‰€æœ‰æ–‡ä»¶ï¼Œè¿™å°±å¯¼è‡´å¼€å‘è¿‡ç¨‹ä¸­å¯åŠ¨æ—¶é—´è¾ƒé•¿ã€‚</p>
<hr/>
<h2 data-id="heading-5">âœ… <strong>ä¸‰ã€Vite åŸç†å’Œå®ç°</strong></h2>
<h4 data-id="heading-6"><strong>1. åŸºäºæµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„ ES Modules</strong></h4>
<p>Vite çš„æ ¸å¿ƒåŸç†æ˜¯åˆ©ç”¨æµè§ˆå™¨åŸç”Ÿæ”¯æŒ <strong>ES Modules</strong>ï¼Œå®ƒå¹¶ä¸åƒ Webpack é‚£æ ·è¿›è¡Œå®Œæ•´çš„æ‰“åŒ…ï¼Œè€Œæ˜¯é€šè¿‡ <strong>æŒ‰éœ€åŠ è½½</strong> æ¥æé«˜æ„å»ºé€Ÿåº¦ã€‚</p>
<h4 data-id="heading-7"><strong>2. Vite å¼€å‘æµç¨‹ï¼š</strong></h4>
<p>Vite çš„å¼€å‘è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<h5 data-id="heading-8"><strong>å¼€å‘é˜¶æ®µï¼š</strong></h5>
<ol>
<li>
<p><strong>æŒ‰éœ€ç¼–è¯‘</strong>ï¼š</p>
<ul>
<li>å½“ä½ å¯åŠ¨ Vite æ—¶ï¼Œå®ƒä¸ä¼šä¸€æ¬¡æ€§æ‰“åŒ…æ•´ä¸ªé¡¹ç›®ï¼Œè€Œæ˜¯ä»…å¯¹ <strong>é¦–æ¬¡è¯·æ±‚çš„æ¨¡å—</strong> è¿›è¡Œç¼–è¯‘å’ŒæœåŠ¡ã€‚æ¯”å¦‚ï¼Œåªæœ‰ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®æŸä¸ªé¡µé¢æ—¶ï¼ŒVite æ‰ä¼šç¼–è¯‘è¯¥é¡µé¢ä¾èµ–çš„ JavaScript å’Œ CSSã€‚</li>
</ul>
</li>
<li>
<p><strong>çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰</strong> ï¼š</p>
<ul>
<li>Vite æä¾›äº† <strong>å³æ—¶çš„çƒ­æ¨¡å—æ›¿æ¢</strong>ï¼Œå½“ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¿®æ”¹äº†æŸä¸ªæ¨¡å—ï¼ŒVite ä¼šåªç¼–è¯‘å¹¶æ›¿æ¢è¯¥æ¨¡å—ï¼Œè€Œä¸æ˜¯é‡æ–°æ‰“åŒ…æ•´ä¸ªé¡¹ç›®ã€‚è¿™å¤§å¤§æé«˜äº†å¼€å‘ä½“éªŒã€‚</li>
</ul>
</li>
</ol>
<h5 data-id="heading-9"><strong>æ„å»ºé˜¶æ®µï¼š</strong></h5>
<ol start="3">
<li>
<p><strong>ç”Ÿäº§æ„å»ºï¼ˆbuildï¼‰</strong> ï¼š</p>
<ul>
<li>åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼ŒVite ä½¿ç”¨ <strong>Rollup</strong>ï¼ˆä¸€ä¸ªç°ä»£çš„ JavaScript æ‰“åŒ…å·¥å…·ï¼‰è¿›è¡Œæœ€ç»ˆçš„æ‰“åŒ…ï¼Œå°†æ‰€æœ‰æ¨¡å—åˆå¹¶æˆä¸€ä¸ªä¼˜åŒ–è¿‡çš„ bundleï¼Œè¿›è¡Œä»£ç æ‹†åˆ†ï¼Œå‹ç¼©ç­‰ä¼˜åŒ–ï¼Œç”Ÿæˆæœ€ç»ˆçš„é™æ€æ–‡ä»¶ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-10"><strong>3. ä¸éœ€è¦ä¸€ç›´æ‰“åŒ…å…¨éƒ¨èµ„æº</strong></h4>
<p>Vite çš„æŒ‰éœ€ç¼–è¯‘å’Œå¿«é€Ÿå“åº”æœºåˆ¶ï¼Œä½¿å¾—å¼€å‘è¿‡ç¨‹éå¸¸è¿…é€Ÿã€‚åªæœ‰åœ¨é¡µé¢è®¿é—®æ—¶ï¼Œæ‰ä¼šå¤„ç†è¯¥é¡µé¢çš„ä¾èµ–ï¼Œé¿å…äº† Webpack é‚£ç§å®Œå…¨æ‰“åŒ…çš„æ€§èƒ½æ¶ˆè€—ã€‚</p>
<hr/>
<h2 data-id="heading-11">âœ… <strong>å››ã€Webpack ä¸ Vite ä¼˜ç¼ºç‚¹å¯¹æ¯”</strong></h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>Webpack</th><th>Vite</th></tr></thead><tbody><tr><td><strong>æ„å»ºé€Ÿåº¦</strong></td><td>è¾ƒæ…¢ï¼ˆå°¤å…¶æ˜¯å¤§å‹é¡¹ç›®æ—¶ï¼‰</td><td>æå¿«ï¼Œå°¤å…¶æ˜¯å†·å¯åŠ¨å’Œçƒ­æ›´æ–°</td></tr><tr><td><strong>é…ç½®å¤æ‚æ€§</strong></td><td>é…ç½®è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦å¤„ç†è®¸å¤šç»†èŠ‚</td><td>é…ç½®ç®€å•ï¼Œå¼€ç®±å³ç”¨ï¼Œå°‘é…ç½®å³å¯</td></tr><tr><td><strong>å¼€å‘ä½“éªŒ</strong></td><td>å¼€å‘ä¸­æ¯æ¬¡æ›´æ”¹éƒ½ä¼šè§¦å‘å®Œæ•´ç¼–è¯‘</td><td>çƒ­æ›´æ–°é€Ÿåº¦å¿«ï¼Œä¿®æ”¹åçš„å†…å®¹å³æ—¶ååº”</td></tr><tr><td><strong>æ”¯æŒçš„åŠŸèƒ½</strong></td><td>åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒçš„æ’ä»¶ä¸°å¯Œï¼Œå‡ ä¹æ— æ‰€ä¸åŒ…</td><td>é€‚åˆç°ä»£å‰ç«¯å¼€å‘ï¼Œç‰¹æ€§è¾ƒä¸ºç®€æ´å’Œèšç„¦</td></tr><tr><td><strong>æ„å»ºäº§ç‰©</strong></td><td>ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªè¾ƒå¤§çš„ bundle</td><td>ç”Ÿæˆå¤šä¸ªæŒ‰éœ€åŠ è½½çš„å°æ–‡ä»¶</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>é€‚åˆä¸­å¤§å‹å¤æ‚é¡¹ç›®ï¼Œæ”¯æŒæ›´å¤šè‡ªå®šä¹‰éœ€æ±‚</td><td>é€‚åˆä¸­å°å‹é¡¹ç›®ã€ç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆå¦‚ React/Vueï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-12">âœ… <strong>äº”ã€æ€»ç»“</strong></h2>
<ol>
<li>
<p><strong>Webpackï¼š</strong></p>
<ul>
<li>é€‚ç”¨äºå¤æ‚çš„å‰ç«¯é¡¹ç›®ï¼Œæ”¯æŒæ’ä»¶å’ŒåŠ è½½å™¨çš„çµæ´»æ‰©å±•ã€‚</li>
<li>åœ¨å¼€å‘æ—¶ï¼Œå¯åŠ¨å’Œçƒ­æ›´æ–°è¾ƒæ…¢ï¼Œå°¤å…¶æ˜¯å¤§å‹é¡¹ç›®ã€‚</li>
<li>é…ç½®å¤æ‚ï¼Œéœ€è¦æ›´å¤šçš„æ‰‹åŠ¨é…ç½®æ¥å®ç°é¡¹ç›®å®šåˆ¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>Viteï¼š</strong></p>
<ul>
<li>æ›´é€‚åˆç°ä»£å‰ç«¯å¼€å‘ï¼Œç‰¹åˆ«æ˜¯å¯¹å¼€å‘é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒæœ‰é«˜è¦æ±‚çš„åœºæ™¯ã€‚</li>
<li>ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ ES Modules æ¥å®ç°æŒ‰éœ€ç¼–è¯‘å’Œå³æ—¶çƒ­æ›´æ–°ï¼Œå¼€å‘ä½“éªŒæä½³ã€‚</li>
<li>é€‚ç”¨äºç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆå¦‚ Vueã€Reactï¼‰ï¼Œå¹¶åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ Rollup è¿›è¡Œé«˜æ•ˆæ„å»ºã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-13">ğŸ“Œ <strong>æ¨èåœºæ™¯ï¼š</strong></h2>
<ul>
<li><strong>Webpack</strong> é€‚åˆ <strong>å¤§å‹ã€å¤æ‚çš„å‰ç«¯é¡¹ç›®</strong>ï¼Œå°¤å…¶æ˜¯æœ‰å¤šç§æŠ€æœ¯æ ˆã€æ¡†æ¶ï¼Œæˆ–è€…éœ€è¦æ›´å¤šè‡ªå®šä¹‰æ„å»ºçš„é¡¹ç›®ã€‚</li>
<li><strong>Vite</strong> æ›´é€‚åˆ <strong>å¿«é€Ÿå¼€å‘ã€ç°ä»£åŒ–å‰ç«¯åº”ç”¨</strong>ï¼Œå°¤å…¶æ˜¯å°å‹æˆ–ä¸­å‹é¡¹ç›®ï¼Œæˆ–è€…æƒ³è¦äº«å—æé€Ÿå¼€å‘ä½“éªŒçš„å›¢é˜Ÿã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MFCæ ¸å¿ƒæ¶æ„æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7581097111896277046</link>    <guid>https://juejin.cn/post/7581097111896277046</guid>    <pubDate>2025-12-08T10:28:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581097111896277046" data-draft-id="7581210455827365924" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MFCæ ¸å¿ƒæ¶æ„æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-08T10:28:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MFCæ ¸å¿ƒæ¶æ„æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T10:28:39.000Z" title="Mon Dec 08 2025 10:28:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»42åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°½ç®¡MFCï¼ˆMicrosoft Foundation Classesï¼‰å¸¸è¢«è§†ä¸ºâ€œè¿‡æ—¶â€çš„é—ç•™æŠ€æœ¯ï¼Œä½†å…¶è®¾è®¡æ€æƒ³å¯¹ç†è§£Windowsç¼–ç¨‹æœ¬è´¨å’Œæ¡†æ¶è®¾è®¡å“²å­¦ä»å…·é‡è¦ä»·å€¼ã€‚ä½œä¸ºä¸€å¥—ç»å…¸çš„C++æ¡†æ¶ï¼ŒMFCæˆåŠŸå°†è¿‡ç¨‹å¼çš„Win32 APIå°è£…ä¸ºé¢å‘å¯¹è±¡çš„ç±»åº“ï¼Œå…¶æ¶ˆæ¯æ˜ å°„æœºåˆ¶å’Œæ–‡æ¡£/è§†å›¾æ¶æ„ä½“ç°äº†æ—©æœŸæ¡†æ¶è®¾è®¡è€…å¯¹è½¯ä»¶å¤æ‚æ€§çš„æ·±åˆ»æ€è€ƒã€‚æœ¬æ–‡æ—¨åœ¨ç³»ç»Ÿæ€§å‰–æMFCçš„æ ¸å¿ƒæ¶æ„ï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªç»“æ„åŒ–çš„è®¤çŸ¥æ¡†æ¶ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€ç« ï¼šMFCçš„æ¶ˆæ¯æ˜ å°„æœºåˆ¶â€”â€”Windowsäº‹ä»¶é©±åŠ¨çš„é©å‘½æ€§å°è£…</h2>
<h3 data-id="heading-1">ä¸€ã€Win32 SDKçš„åŸå§‹å›°å¢ƒï¼šé›†ä¸­å¼æ¶ˆæ¯å¤„ç†çš„å¤æ‚æ€§</h3>
<p>åœ¨æ·±å…¥ç†è§£MFCçš„æ¶ˆæ¯æ˜ å°„ä¹‹å‰ï¼Œå¿…é¡»é¦–å…ˆå®¡è§†ä¼ ç»ŸWin32 SDKç¼–ç¨‹çš„æ¶ˆæ¯å¤„ç†æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªé›†ä¸­å¼çš„çª—å£è¿‡ç¨‹å‡½æ•°ï¼ˆWindow Procedureï¼Œç®€ç§°WndProcï¼‰ï¼Œå®ƒæ¥æ”¶å¹¶å¤„ç†å‘é€åˆ°çª—å£çš„æ‰€æœ‰æ¶ˆæ¯ã€‚</p>
<p>å…¸å‹çš„Win32 SDKæ¶ˆæ¯å¤„ç†ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">LRESULT CALLBACK <span class="hljs-title">WndProc</span><span class="hljs-params">(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)</span>
</span>{
    <span class="hljs-keyword">switch</span> (message)
    {
        <span class="hljs-keyword">case</span> WM_PAINT:
        {
            PAINTSTRUCT ps;
            HDC hdc = <span class="hljs-built_in">BeginPaint</span>(hWnd, &amp;ps);
            <span class="hljs-comment">// ç»˜å›¾ä»£ç ...</span>
            <span class="hljs-built_in">EndPaint</span>(hWnd, &amp;ps);
        }
        <span class="hljs-keyword">break</span>;
        
        <span class="hljs-keyword">case</span> WM_MOUSEMOVE:
        {
            <span class="hljs-type">int</span> xPos = <span class="hljs-built_in">LOWORD</span>(lParam);
            <span class="hljs-type">int</span> yPos = <span class="hljs-built_in">HIWORD</span>(lParam);
            <span class="hljs-comment">// å¤„ç†é¼ æ ‡ç§»åŠ¨...</span>
        }
        <span class="hljs-keyword">break</span>;
        
        <span class="hljs-keyword">case</span> WM_COMMAND:
        {
            <span class="hljs-type">int</span> wmId = <span class="hljs-built_in">LOWORD</span>(wParam);
            <span class="hljs-keyword">switch</span> (wmId)
            {
                <span class="hljs-keyword">case</span> IDM_FILE_OPEN:
                    <span class="hljs-comment">// å¤„ç†æ–‡ä»¶æ‰“å¼€...</span>
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> IDM_FILE_SAVE:
                    <span class="hljs-comment">// å¤„ç†æ–‡ä»¶ä¿å­˜...</span>
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-comment">// æ›´å¤šèœå•é¡¹...</span>
            }
        }
        <span class="hljs-keyword">break</span>;
        
        <span class="hljs-keyword">case</span> WM_DESTROY:
            <span class="hljs-built_in">PostQuitMessage</span>(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">break</span>;
            
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">DefWindowProc</span>(hWnd, message, wParam, lParam);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿™ç§æ¨¡å¼å­˜åœ¨å‡ ä¸ªæ˜¾è‘—é—®é¢˜ï¼š</p>
<ol>
<li><strong>ä»£ç è†¨èƒ€</strong>ï¼šéšç€æ¶ˆæ¯ç±»å‹çš„å¢åŠ ï¼Œswitch-caseè¯­å¥å˜å¾—å¼‚å¸¸åºå¤§ï¼Œä¸€ä¸ªæˆç†Ÿçš„åº”ç”¨ç¨‹åºå¯èƒ½å¤„ç†æ•°ç™¾ç§æ¶ˆæ¯ç±»å‹ï¼Œå¯¼è‡´ä»£ç å¯è¯»æ€§æ€¥å‰§ä¸‹é™ã€‚</li>
<li><strong>é«˜åº¦è€¦åˆ</strong>ï¼šæ‰€æœ‰æ¶ˆæ¯å¤„ç†é€»è¾‘é›†ä¸­åœ¨å•ä¸€å‡½æ•°ä¸­ï¼Œä¸åŒç±»å‹çš„æ¶ˆæ¯å¤„ç†ä»£ç ç›¸äº’äº¤ç»‡ï¼Œéš¾ä»¥æ¨¡å—åŒ–ã€‚</li>
<li><strong>ç»´æŠ¤å›°éš¾</strong>ï¼šæ·»åŠ æ–°æ¶ˆæ¯å¤„ç†æˆ–ä¿®æ”¹ç°æœ‰é€»è¾‘æ—¶ï¼Œéœ€è¦åœ¨åºå¤§çš„switch-caseç»“æ„ä¸­å®šä½ï¼Œå®¹æ˜“å¼•å…¥é”™è¯¯ã€‚</li>
</ol>
<h3 data-id="heading-2">äºŒã€MFCçš„è§£å†³æ–¹æ¡ˆï¼šé¢å‘å¯¹è±¡çš„æ¶ˆæ¯æ˜ å°„æœºåˆ¶</h3>
<p>MFCçš„æ¶ˆæ¯æ˜ å°„æœºåˆ¶æ˜¯å¯¹ä¸Šè¿°é—®é¢˜çš„é©å‘½æ€§æ”¹è¿›ã€‚å®ƒåŸºäºä¸¤ä¸ªæ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼š</p>
<ol>
<li><strong>åˆ†æ•£å¤„ç†</strong>ï¼šå°†æ¶ˆæ¯å¤„ç†åˆ†æ•£åˆ°å„ä¸ªçª—å£ç±»ä¸­ï¼Œæ¯ä¸ªç±»åªå¤„ç†ä¸è‡ªå·±ç›¸å…³çš„æ¶ˆæ¯ã€‚</li>
<li><strong>ç¼–è¯‘æ—¶ç»‘å®š</strong>ï¼šé€šè¿‡å®åœ¨ç¼–è¯‘æ—¶å»ºç«‹æ¶ˆæ¯åˆ°å¤„ç†å‡½æ•°çš„æ˜ å°„å…³ç³»ï¼Œé¿å…è¿è¡Œæ—¶çš„ç±»å‹åˆ¤æ–­å¼€é”€ã€‚</li>
</ol>
<h4 data-id="heading-3">2.1 æ¶ˆæ¯æ˜ å°„çš„å®ç°æœºåˆ¶</h4>
<p>æ¶ˆæ¯æ˜ å°„çš„å®ç°ä¾èµ–äºä¸€ç»„ç²¾å¿ƒè®¾è®¡çš„å®å’Œé™æ€æ•°æ®ç»“æ„ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒå®ç°æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å…¸å‹çš„MFCç±»æ¶ˆæ¯æ˜ å°„å£°æ˜</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CMyWnd</span> : <span class="hljs-keyword">public</span> CWnd
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">CMyWnd</span>();
    
<span class="hljs-keyword">protected</span>:
    <span class="hljs-comment">// æ¶ˆæ¯å¤„ç†å‡½æ•°å£°æ˜</span>
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnPaint</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnMouseMove</span><span class="hljs-params">(UINT nFlags, CPoint point)</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnFileOpen</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-comment">// å…³é”®ï¼šå£°æ˜æ¶ˆæ¯æ˜ å°„</span>
    <span class="hljs-built_in">DECLARE_MESSAGE_MAP</span>()
};

<span class="hljs-comment">// å®ç°æ–‡ä»¶ä¸­çš„æ¶ˆæ¯æ˜ å°„å®šä¹‰</span>
<span class="hljs-built_in">BEGIN_MESSAGE_MAP</span>(CMyWnd, CWnd)
    <span class="hljs-built_in">ON_WM_PAINT</span>()
    <span class="hljs-built_in">ON_WM_MOUSEMOVE</span>()
    <span class="hljs-built_in">ON_COMMAND</span>(ID_FILE_OPEN, &amp;CMyWnd::OnFileOpen)
<span class="hljs-built_in">END_MESSAGE_MAP</span>()
</code></pre>
<h4 data-id="heading-4">2.2 æ¶ˆæ¯æ˜ å°„è¡¨çš„å†…éƒ¨ç»“æ„</h4>
<p>å½“ç¼–è¯‘å™¨å¤„ç†ä¸Šè¿°ä»£ç æ—¶ï¼Œä¼šç”Ÿæˆç±»ä¼¼ä¸‹é¢çš„é™æ€æ•°æ®ç»“æ„ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¶ˆæ¯æ˜ å°„è¡¨æ¡ç›®ç»“æ„ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AFX_MSGMAP_ENTRY</span>
{
    UINT nMessage;      <span class="hljs-comment">// Windowsæ¶ˆæ¯ID</span>
    UINT nCode;         <span class="hljs-comment">// æ§ä»¶é€šçŸ¥ç æˆ–å…¶å®ƒ</span>
    UINT nID;           <span class="hljs-comment">// æ§ä»¶IDï¼ˆå‘½ä»¤æ¶ˆæ¯ç”¨ï¼‰</span>
    UINT nLastID;       <span class="hljs-comment">// æ§ä»¶IDèŒƒå›´ç»“æŸï¼ˆç”¨äºèŒƒå›´æ˜ å°„ï¼‰</span>
    UINT nSig;          <span class="hljs-comment">// å‡½æ•°ç­¾åç±»å‹</span>
    AFX_PMSG pfn;       <span class="hljs-comment">// æŒ‡å‘æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ</span>
};

<span class="hljs-comment">// ä¸ºCMyWndç±»ç”Ÿæˆçš„æ¶ˆæ¯æ˜ å°„è¡¨</span>
<span class="hljs-type">static</span> <span class="hljs-type">const</span> AFX_MSGMAP_ENTRY _messageEntries[] =
{
    <span class="hljs-comment">// æ ‡å‡†Windowsæ¶ˆæ¯</span>
    { WM_PAINT, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, AfxSig_vv, (AFX_PMSG)&amp;CMyWnd::OnPaint },
    { WM_MOUSEMOVE, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, AfxSig_vwp, (AFX_PMSG)&amp;CMyWnd::OnMouseMove },
    
    <span class="hljs-comment">// å‘½ä»¤æ¶ˆæ¯</span>
    { WM_COMMAND, <span class="hljs-number">0</span>, ID_FILE_OPEN, ID_FILE_OPEN, AfxSig_vv, 
      (AFX_PMSG)&amp;CMyWnd::OnFileOpen },
      
    <span class="hljs-comment">// ç»“æŸæ ‡è®°</span>
    { <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, AfxSig_end, (AFX_PMSG)<span class="hljs-number">0</span> }
};
</code></pre>
<h4 data-id="heading-5">2.3 æ¶ˆæ¯æ´¾å‘æµç¨‹</h4>
<p>MFCæ¡†æ¶çš„æ¶ˆæ¯æ´¾å‘è¿‡ç¨‹éµå¾ªæ˜ç¡®çš„ç®—æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼ªä»£ç å±•ç¤ºMFCæ¶ˆæ¯æ´¾å‘é€»è¾‘</span>
<span class="hljs-function">LRESULT <span class="hljs-title">CWnd::WindowProc</span><span class="hljs-params">(UINT message, WPARAM wParam, LPARAM lParam)</span>
</span>{
    <span class="hljs-comment">// 1. è·å–å½“å‰ç±»çš„æ¶ˆæ¯æ˜ å°„è¡¨</span>
    <span class="hljs-type">const</span> AFX_MSGMAP* pMessageMap = <span class="hljs-built_in">GetMessageMap</span>();
    
    <span class="hljs-comment">// 2. æ²¿ç€ç»§æ‰¿é“¾å‘ä¸ŠæŸ¥æ‰¾æ¶ˆæ¯å¤„ç†å‡½æ•°</span>
    <span class="hljs-keyword">while</span> (pMessageMap != <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-comment">// åœ¨å½“å‰ç±»çš„æ¶ˆæ¯æ˜ å°„è¡¨ä¸­æŸ¥æ‰¾</span>
        <span class="hljs-type">const</span> AFX_MSGMAP_ENTRY* pEntries = pMessageMap-&gt;lpEntries;
        
        <span class="hljs-keyword">for</span> (; pEntries-&gt;nSig != AfxSig_end; pEntries++)
        {
            <span class="hljs-keyword">if</span> (pEntries-&gt;nMessage == message)
            {
                <span class="hljs-comment">// æ‰¾åˆ°åŒ¹é…é¡¹ï¼Œè°ƒç”¨å¤„ç†å‡½æ•°</span>
                <span class="hljs-keyword">union</span> <span class="hljs-title class_">MessageMapFunctions</span> mmf;
                mmf.pfn = pEntries-&gt;pfn;
                
                <span class="hljs-comment">// æ ¹æ®å‡½æ•°ç­¾åè°ƒç”¨ç›¸åº”çš„å¤„ç†å‡½æ•°</span>
                <span class="hljs-keyword">switch</span> (pEntries-&gt;nSig)
                {
                    <span class="hljs-keyword">case</span> AfxSig_vv:  <span class="hljs-comment">// void func(void)</span>
                        (<span class="hljs-keyword">this</span>-&gt;*mmf.pfn_vv)();
                        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
                        
                    <span class="hljs-keyword">case</span> AfxSig_vwp: <span class="hljs-comment">// void func(UINT, CPoint)</span>
                        (<span class="hljs-keyword">this</span>-&gt;*mmf.pfn_vwp)(wParam, 
                                            <span class="hljs-built_in">CPoint</span>(<span class="hljs-built_in">GET_X_LPARAM</span>(lParam), 
                                                  <span class="hljs-built_in">GET_Y_LPARAM</span>(lParam)));
                        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
                    <span class="hljs-comment">// æ›´å¤šå‡½æ•°ç­¾åå¤„ç†...</span>
                }
            }
        }
        
        <span class="hljs-comment">// 3. æœªæ‰¾åˆ°åˆ™ç»§ç»­åœ¨åŸºç±»ä¸­æŸ¥æ‰¾</span>
        pMessageMap = pMessageMap-&gt;pBaseMessageMap;
    }
    
    <span class="hljs-comment">// 4. æœªæ‰¾åˆ°ä»»ä½•å¤„ç†å‡½æ•°ï¼Œè°ƒç”¨é»˜è®¤çª—å£è¿‡ç¨‹</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">DefWindowProc</span>(message, wParam, lParam);
}
</code></pre>
<h3 data-id="heading-6">ä¸‰ã€æ¶ˆæ¯æ˜ å°„çš„åˆ†ç±»ä¸é«˜çº§ç‰¹æ€§</h3>
<h4 data-id="heading-7">3.1 å››ç±»æ¶ˆæ¯åŠå…¶å¤„ç†æ–¹å¼</h4>
<p>MFCå°†Windowsæ¶ˆæ¯ç³»ç»Ÿæ€§åœ°åˆ†ä¸ºå››ç±»ï¼Œæ¯ç±»æœ‰ä¸åŒçš„æ˜ å°„å®å’Œå¤„ç†æ¨¡å¼ï¼š</p>








































<table><thead><tr><th>æ¶ˆæ¯ç±»å‹</th><th>å…¸å‹ç¤ºä¾‹</th><th>æ˜ å°„å®</th><th>å¤„ç†å‡½æ•°ç‰¹å¾</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>æ ‡å‡†Windowsæ¶ˆæ¯</strong></td><td>WM_PAINT, WM_SIZE</td><td><code>ON_WM_XXXX()</code></td><td>å›ºå®šç­¾åï¼Œå¦‚<code>OnPaint()</code></td><td>çª—å£ç»˜åˆ¶ã€å¤§å°è°ƒæ•´ç­‰åŸºç¡€æ“ä½œ</td></tr><tr><td><strong>å‘½ä»¤æ¶ˆæ¯</strong></td><td>èœå•ç‚¹å‡»ã€å·¥å…·æ æŒ‰é’®</td><td><code>ON_COMMAND(id, func)</code></td><td>æ— å‚æ•°voidå‡½æ•°</td><td>ç”¨æˆ·å‘½ä»¤å“åº”</td></tr><tr><td><strong>æ§ä»¶é€šçŸ¥æ¶ˆæ¯</strong></td><td>æŒ‰é’®ç‚¹å‡»é€šçŸ¥ã€åˆ—è¡¨é¡¹é€‰æ‹©</td><td><code>ON_NOTIFY(code, id, func)</code></td><td>æ¥æ”¶NMHDRç»“æ„ä½“</td><td>å¤æ‚æ§ä»¶äº¤äº’</td></tr><tr><td><strong>åå°„æ¶ˆæ¯</strong></td><td>WM_CTLCOLOR, WM_DRAWITEM</td><td><code>ON_WM_CTLCOLOR_REFLECT()</code></td><td>å­æ§ä»¶è‡ªæˆ‘å¤„ç†</td><td>æ§ä»¶è‡ªå®šä¹‰ç»˜åˆ¶</td></tr></tbody></table>
<h4 data-id="heading-8">3.2 æ¶ˆæ¯åå°„æœºåˆ¶</h4>
<p>æ¶ˆæ¯åå°„æ˜¯MFCä¸­ä¸€ä¸ªå·§å¦™çš„è®¾è®¡ï¼Œå®ƒå…è®¸å­æ§ä»¶å¤„ç†é€šå¸¸ç”±çˆ¶çª—å£å¤„ç†çš„æ¶ˆæ¯ã€‚è¿™ç§æœºåˆ¶é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ï¼š</p>
<ol>
<li>çˆ¶çª—å£æ”¶åˆ°å­æ§ä»¶çš„é€šçŸ¥æ¶ˆæ¯ï¼ˆå¦‚WM_CTLCOLORï¼‰</li>
<li>MFCæ¡†æ¶æ£€æŸ¥å­æ§ä»¶æ˜¯å¦èƒ½å¤„ç†åå°„æ¶ˆæ¯</li>
<li>å¦‚æœèƒ½ï¼Œå°†æ¶ˆæ¯åå°„å›å­æ§ä»¶</li>
<li>å­æ§ä»¶åœ¨è‡ªå·±çš„æ¶ˆæ¯æ˜ å°„è¡¨ä¸­å¤„ç†åå°„æ¶ˆæ¯</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è‡ªå®šä¹‰æŒ‰é’®ç±»å¤„ç†åå°„æ¶ˆæ¯çš„ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CMyButton</span> : <span class="hljs-keyword">public</span> CButton
{
    <span class="hljs-built_in">DECLARE_MESSAGE_MAP</span>()
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">afx_msg HBRUSH <span class="hljs-title">CtlColor</span><span class="hljs-params">(CDC* pDC, UINT nCtlColor)</span></span>;
};

<span class="hljs-built_in">BEGIN_MESSAGE_MAP</span>(CMyButton, CButton)
    <span class="hljs-built_in">ON_WM_CTLCOLOR_REFLECT</span>()  <span class="hljs-comment">// åå°„æ¶ˆæ¯å¤„ç†</span>
<span class="hljs-built_in">END_MESSAGE_MAP</span>()

<span class="hljs-function">HBRUSH <span class="hljs-title">CMyButton::CtlColor</span><span class="hljs-params">(CDC* pDC, UINT nCtlColor)</span>
</span>{
    <span class="hljs-comment">// æŒ‰é’®è‡ªè¡Œå†³å®šèƒŒæ™¯è‰²ï¼Œè€Œä¸æ˜¯ç”±å¯¹è¯æ¡†ç»Ÿä¸€æ§åˆ¶</span>
    pDC-&gt;<span class="hljs-built_in">SetTextColor</span>(<span class="hljs-built_in">RGB</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));  <span class="hljs-comment">// çº¢è‰²æ–‡å­—</span>
    pDC-&gt;<span class="hljs-built_in">SetBkColor</span>(<span class="hljs-built_in">RGB</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>));  <span class="hljs-comment">// é»„è‰²èƒŒæ™¯</span>
    
    <span class="hljs-function"><span class="hljs-type">static</span> CBrush <span class="hljs-title">yellowBrush</span><span class="hljs-params">(RGB(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>))</span></span>;
    <span class="hljs-keyword">return</span> yellowBrush;
}
</code></pre>
<h4 data-id="heading-9">3.3 æ¶ˆæ¯èŒƒå›´æ˜ å°„</h4>
<p>å¯¹äºå¤„ç†ä¸€ç³»åˆ—è¿ç»­IDçš„ç›¸ä¼¼å‘½ä»¤ï¼ŒMFCæä¾›äº†æ¶ˆæ¯èŒƒå›´æ˜ å°„æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å¤„ç†IDä»ID_TOOL_BUTTON_FIRSTåˆ°ID_TOOL_BUTTON_LASTçš„æ‰€æœ‰å·¥å…·æ æŒ‰é’®</span>
<span class="hljs-built_in">BEGIN_MESSAGE_MAP</span>(CMyView, CView)
    <span class="hljs-built_in">ON_COMMAND_RANGE</span>(ID_TOOL_BUTTON_FIRST, ID_TOOL_BUTTON_LAST, OnToolButtonClicked)
<span class="hljs-built_in">END_MESSAGE_MAP</span>()

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::OnToolButtonClicked</span><span class="hljs-params">(UINT nID)</span>
</span>{
    <span class="hljs-comment">// æ ¹æ®å…·ä½“IDæ‰§è¡Œç›¸åº”æ“ä½œ</span>
    <span class="hljs-type">int</span> buttonIndex = nID - ID_TOOL_BUTTON_FIRST;
    <span class="hljs-comment">// å¤„ç†é€»è¾‘...</span>
}
</code></pre>
<h3 data-id="heading-10">å››ã€æ¶ˆæ¯æ˜ å°„çš„æ€§èƒ½ä¸è®¾è®¡æƒè¡¡</h3>
<h4 data-id="heading-11">4.1 æ€§èƒ½åˆ†æ</h4>
<p>MFCæ¶ˆæ¯æ˜ å°„æœºåˆ¶åœ¨æ€§èƒ½ä¸Šåšå‡ºäº†ä»¥ä¸‹æƒè¡¡ï¼š</p>
<ol>
<li><strong>ç©ºé—´æ¢æ—¶é—´</strong>ï¼šä¸ºæ¯ä¸ªçª—å£ç±»ç”Ÿæˆé™æ€æ¶ˆæ¯æ˜ å°„è¡¨ï¼Œå ç”¨é¢å¤–å†…å­˜ï¼Œä½†é¿å…äº†è¿è¡Œæ—¶çš„åŠ¨æ€æŸ¥æ‰¾å¼€é”€ã€‚</li>
<li><strong>çº¿æ€§æŸ¥æ‰¾</strong>ï¼šæ¶ˆæ¯æ˜ å°„è¡¨é€šå¸¸è¾ƒå°ï¼Œçº¿æ€§æŸ¥æ‰¾æ•ˆç‡å¯æ¥å—ã€‚å¯¹äºæœ‰å¤§é‡æ¶ˆæ¯å¤„ç†çš„å¤§å‹ç±»ï¼ŒæŸ¥æ‰¾æ•ˆç‡å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚</li>
<li><strong>ç»§æ‰¿é“¾æŸ¥æ‰¾</strong>ï¼šå½“æ¶ˆæ¯åœ¨å½“å‰ç±»æœªæ‰¾åˆ°æ—¶ï¼Œéœ€è¦æ²¿ç»§æ‰¿é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œè¿™å¢åŠ äº†å¤„ç†æœªå¤„ç†æ¶ˆæ¯çš„å¼€é”€ã€‚</li>
</ol>
<h4 data-id="heading-12">4.2 ä¸æ›¿ä»£æ–¹æ¡ˆçš„å¯¹æ¯”</h4>
<p>ä¸å…¶å®ƒæ¡†æ¶çš„æ¶ˆæ¯/äº‹ä»¶å¤„ç†æœºåˆ¶ç›¸æ¯”ï¼š</p>








































<table><thead><tr><th>æœºåˆ¶</th><th>ä»£è¡¨æ¡†æ¶</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>æ¶ˆæ¯æ˜ å°„</strong></td><td>MFC</td><td>ç¼–è¯‘æ—¶é™æ€ç»‘å®šï¼Œçº¿æ€§æŸ¥æ‰¾</td><td>ç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æ—¶æ£€æŸ¥</td><td>ä¸å¤Ÿçµæ´»ï¼Œç»§æ‰¿é“¾æŸ¥æ‰¾å¼€é”€</td></tr><tr><td><strong>è™šå‡½æ•°è¡¨</strong></td><td>æ—©æœŸOWL</td><td>æ¯ä¸ªæ¶ˆæ¯å¯¹åº”è™šå‡½æ•°</td><td>ç›´æ¥è°ƒç”¨ï¼Œæ€§èƒ½é«˜</td><td>è™šå‡½æ•°è¡¨è†¨èƒ€ï¼ŒäºŒè¿›åˆ¶å…¼å®¹æ€§å·®</td></tr><tr><td><strong>ä¿¡å·æ§½</strong></td><td>Qt</td><td>è¿è¡Œæ—¶è¿æ¥ï¼Œå­—ç¬¦ä¸²åŒ¹é…</td><td>é«˜åº¦çµæ´»ï¼Œè·¨çº¿ç¨‹å®‰å…¨</td><td>è¿è¡Œæ—¶å¼€é”€ï¼Œç±»å‹å®‰å…¨æ£€æŸ¥å¼±</td></tr><tr><td><strong>å§”æ‰˜/äº‹ä»¶</strong></td><td>.NET</td><td>å¤šæ’­å§”æ‰˜ï¼Œå¼•ç”¨è®¡æ•°</td><td>ç±»å‹å®‰å…¨ï¼Œæ”¯æŒå¤šè®¢é˜…è€…</td><td>åƒåœ¾å›æ”¶ä¾èµ–ï¼Œéå®æ—¶ç³»ç»Ÿå¯èƒ½ä¸é€‚åˆ</td></tr></tbody></table>
<h3 data-id="heading-13">äº”ã€ç°ä»£æ¡†æ¶ä¸­çš„æ¶ˆæ¯æ˜ å°„é—äº§</h3>
<p>è™½ç„¶MFCæœ¬èº«å·²ä¸å†æ˜¯ä¸»æµå¼€å‘æ¡†æ¶ï¼Œä½†å…¶æ¶ˆæ¯æ˜ å°„çš„æ€æƒ³å½±å“äº†åç»­ä¼—å¤šUIæ¡†æ¶ï¼š</p>
<ol>
<li><strong>.NET WinForms</strong>ï¼šäº‹ä»¶å¤„ç†æ¨¡å‹å€Ÿé‰´äº†æ¶ˆæ¯æ˜ å°„çš„å¯¹è±¡åŒ–æ€æƒ³</li>
<li><strong>WPF/UWP</strong>ï¼šè·¯ç”±äº‹ä»¶æ¦‚å¿µå¯ä»¥è§†ä¸ºæ¶ˆæ¯æ˜ å°„çš„è¿›åŒ–å½¢å¼</li>
<li><strong>Qtä¿¡å·æ§½</strong>ï¼šè™½ç„¶å®ç°æœºåˆ¶ä¸åŒï¼Œä½†è§£å†³çš„é—®é¢˜åŸŸé«˜åº¦ç›¸ä¼¼</li>
</ol>
<p>åœ¨ç°ä»£C++ UIå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ç±»ä¼¼çš„æ¶ˆæ¯å¤„ç†æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç°ä»£C++ UIæ¡†æ¶ä¸­çš„ç±»ä¼¼æ¨¡å¼ï¼ˆæ¦‚å¿µç¤ºä¾‹ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ModernButton</span> : <span class="hljs-keyword">public</span> UIWidget
{
    <span class="hljs-comment">// å£°æ˜äº‹ä»¶å¤„ç†å™¨</span>
    EventHandler&lt;<span class="hljs-built_in">void</span>()&gt; onClick;
    
    <span class="hljs-comment">// è¿æ¥äº‹ä»¶</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setupEventHandlers</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-comment">// ç±»ä¼¼äºMFCçš„æ¶ˆæ¯æ˜ å°„ï¼Œä½†æ›´çµæ´»</span>
        onMouseDown += [<span class="hljs-keyword">this</span>](MouseEvent e) { <span class="hljs-keyword">this</span>-&gt;<span class="hljs-built_in">handleMouseDown</span>(e); };
        onClick += []() { <span class="hljs-comment">/* å¤„ç†ç‚¹å‡» */</span> };
    }
};
</code></pre>
<h3 data-id="heading-14">å…­ã€æ€»ç»“ï¼šæ¶ˆæ¯æ˜ å°„çš„è®¾è®¡å“²å­¦</h3>
<p>MFCæ¶ˆæ¯æ˜ å°„æœºåˆ¶çš„æ ¸å¿ƒä»·å€¼åœ¨äºå®ƒæˆåŠŸåœ°å°†Windows APIçš„è¿‡ç¨‹å¼æ¶ˆæ¯å¤„ç†è½¬åŒ–ä¸ºé¢å‘å¯¹è±¡çš„èŒƒå¼ã€‚è¿™ä¸€è½¬åŒ–åŸºäºä»¥ä¸‹è®¾è®¡å“²å­¦ï¼š</p>
<ol>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šä¸åŒçª—å£ç±»åªå¤„ç†è‡ªå·±çš„æ¶ˆæ¯ï¼Œç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚</li>
<li><strong>ç¼–è¯‘æ—¶å®‰å…¨</strong>ï¼šé€šè¿‡å®åœ¨ç¼–è¯‘æ—¶å»ºç«‹æ˜ å°„ï¼Œæ—©æœŸå‘ç°ç±»å‹ä¸åŒ¹é…é”™è¯¯ã€‚</li>
<li><strong>æ¡†æ¶é€æ˜æ€§</strong>ï¼šå¼€å‘è€…åªéœ€å…³æ³¨å¤„ç†å‡½æ•°æœ¬èº«ï¼Œå¤æ‚çš„æ¶ˆæ¯è·¯ç”±ç”±æ¡†æ¶å¤„ç†ã€‚</li>
</ol>
<p>ç„¶è€Œï¼Œè¿™ä¸€æœºåˆ¶ä¹Ÿæœ‰å…¶å†å²å±€é™æ€§ï¼Œç‰¹åˆ«æ˜¯ä¸ç°ä»£åå°„å’Œå§”æ‰˜æœºåˆ¶ç›¸æ¯”ï¼Œå®ƒç¼ºä¹è¶³å¤Ÿçš„çµæ´»æ€§å’Œè¡¨è¾¾èƒ½åŠ›ã€‚ç†è§£MFCæ¶ˆæ¯æ˜ å°„ä¸ä»…æœ‰åŠ©äºç»´æŠ¤é—ç•™ä»£ç ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒå±•ç¤ºäº†æ¡†æ¶è®¾è®¡è€…å¦‚ä½•é€šè¿‡æŠ½è±¡å’Œå°è£…æ¥ç®¡ç†å¹³å°APIçš„å¤æ‚æ€§ï¼Œè¿™ä¸€è®¾è®¡æ€ç»´å¯¹ä»Šå¤©çš„è½¯ä»¶å¼€å‘ä¾ç„¶å…·æœ‰å¯ç¤ºæ„ä¹‰ã€‚</p>
<h2 data-id="heading-15">ç¬¬äºŒç« ï¼šMFCæ–‡æ¡£/è§†å›¾æ¶æ„â€”â€”æ•°æ®ä¸ç•Œé¢çš„åˆ†ç¦»å®è·µ</h2>
<h3 data-id="heading-16">ä¸€ã€è®¾è®¡èµ·æºï¼šä»å•ä½“åº”ç”¨åˆ°æ¨¡å—åŒ–æ¶æ„çš„æ¼”è¿›</h3>
<p>åœ¨æ—©æœŸçš„Windowsåº”ç”¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªæ™®éçš„é—®é¢˜æ˜¯æ•°æ®ç®¡ç†ã€ç”¨æˆ·ç•Œé¢å’Œä¸šåŠ¡é€»è¾‘é«˜åº¦è€¦åˆã€‚ä»¥ç®€å•çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä¾‹ï¼Œä¼ ç»Ÿè®¾è®¡å°†æ–‡ä»¶æ“ä½œã€æ–‡æœ¬æ˜¾ç¤ºå’Œç”¨æˆ·è¾“å…¥å¤„ç†å…¨éƒ¨æ··æ‚åœ¨çª—å£è¿‡ç¨‹ä¸­ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•ã€‚</p>
<p>MFCæ–‡æ¡£/è§†å›¾æ¶æ„çš„æå‡ºï¼Œæ˜¯ä¸ºäº†è§£å†³è¿™ç§â€œå¤§æ³¥çƒâ€æ¶æ„é—®é¢˜ã€‚è¯¥æ¶æ„çš„æ ¸å¿ƒæ€æƒ³å€Ÿé‰´äº†è½¯ä»¶å·¥ç¨‹ä¸­çš„<strong>æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ï¼ˆMVCï¼‰æ¨¡å¼</strong>ï¼Œä½†æ ¹æ®Windowså¹³å°çš„ç‰¹ç‚¹å’ŒC++è¯­è¨€çš„ç‰¹æ€§è¿›è¡Œäº†è°ƒæ•´å’Œä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-17">äºŒã€æ¶æ„ç»„æˆï¼šå››å¤§æ ¸å¿ƒç»„ä»¶çš„ååŒå·¥ä½œ</h3>
<p>æ–‡æ¡£/è§†å›¾æ¶æ„ç”±å››ä¸ªæ ¸å¿ƒç±»æ„æˆï¼Œå®ƒä»¬å„è‡ªæ‰¿æ‹…æ˜ç¡®çš„èŒè´£ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¶æ„æ ¸å¿ƒç±»å…³ç³»ç¤ºæ„ä»£ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CDocument</span>;  <span class="hljs-comment">// æ•°æ®ç®¡ç†å±‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CView</span>;      <span class="hljs-comment">// æ•°æ®æ˜¾ç¤ºä¸äº¤äº’å±‚  </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CFrameWnd</span>;  <span class="hljs-comment">// çª—å£å®¹å™¨å±‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CDocTemplate</span>; <span class="hljs-comment">// å·¥å‚ä¸åè°ƒå±‚</span>

<span class="hljs-comment">// åº”ç”¨ç¨‹åºåˆå§‹åŒ–æ—¶çš„å…¸å‹è®¾ç½®</span>
<span class="hljs-function">BOOL <span class="hljs-title">CMyApp::InitInstance</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// 1. åˆ›å»ºæ–‡æ¡£æ¨¡æ¿ï¼ˆå…³é”®ç²˜åˆå‰‚ï¼‰</span>
    CSingleDocTemplate* pDocTemplate;
    pDocTemplate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">CSingleDocTemplate</span>(
        IDR_MAINFRAME,          <span class="hljs-comment">// èµ„æºIDï¼ˆèœå•ã€å›¾æ ‡ç­‰ï¼‰</span>
        <span class="hljs-built_in">RUNTIME_CLASS</span>(CMyDoc),  <span class="hljs-comment">// æ–‡æ¡£ç±»</span>
        <span class="hljs-built_in">RUNTIME_CLASS</span>(CMainFrame), <span class="hljs-comment">// æ¡†æ¶ç±»</span>
        <span class="hljs-built_in">RUNTIME_CLASS</span>(CMyView)  <span class="hljs-comment">// è§†å›¾ç±»</span>
    );
    
    <span class="hljs-comment">// 2. æ³¨å†Œæ¨¡æ¿</span>
    <span class="hljs-built_in">AddDocTemplate</span>(pDocTemplate);
    
    <span class="hljs-comment">// 3. åˆ›å»ºæˆ–æ‰“å¼€æ–‡æ¡£</span>
    <span class="hljs-built_in">OnFileNew</span>(); <span class="hljs-comment">// åˆ›å»ºæ–°æ–‡æ¡£</span>
    
    <span class="hljs-keyword">return</span> TRUE;
}
</code></pre>
<h4 data-id="heading-18">2.1 CDocumentï¼šæ•°æ®çš„å®ˆæŠ¤è€…</h4>
<p>æ–‡æ¡£ç±»æ˜¯æ¶æ„ä¸­çš„â€œæ¨¡å‹â€éƒ¨åˆ†ï¼Œè´Ÿè´£æ‰€æœ‰ä¸æ•°æ®ç›¸å…³çš„æ“ä½œï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CMyDocument</span> : <span class="hljs-keyword">public</span> CDocument
{
<span class="hljs-keyword">protected</span>:
    <span class="hljs-built_in">CMyDocument</span>();
    
<span class="hljs-comment">// å±æ€§</span>
<span class="hljs-keyword">private</span>:
    CString m_strTitle;      <span class="hljs-comment">// æ–‡æ¡£æ ‡é¢˜</span>
    CStringArray m_lines;    <span class="hljs-comment">// æ–‡æœ¬è¡Œæ•°æ®</span>
    BOOL m_bModified;        <span class="hljs-comment">// ä¿®æ”¹æ ‡å¿—</span>
    
<span class="hljs-comment">// æ“ä½œ</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ•°æ®è®¿é—®æ¥å£</span>
    <span class="hljs-function"><span class="hljs-type">const</span> CString&amp; <span class="hljs-title">GetLine</span><span class="hljs-params">(<span class="hljs-type">int</span> nIndex)</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> m_lines[nIndex]; }
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetLineCount</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> m_lines.<span class="hljs-built_in">GetSize</span>(); }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddLine</span><span class="hljs-params">(<span class="hljs-type">const</span> CString&amp; strLine)</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DeleteLine</span><span class="hljs-params">(<span class="hljs-type">int</span> nIndex)</span></span>;
    
    <span class="hljs-comment">// é‡å†™åŸºç±»å…³é”®æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">OnNewDocument</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">OnOpenDocument</span><span class="hljs-params">(LPCTSTR lpszPathName)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">OnSaveDocument</span><span class="hljs-params">(LPCTSTR lpszPathName)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">DeleteContents</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-comment">// åºåˆ—åŒ– - æ ¸å¿ƒæ•°æ®æŒä¹…åŒ–æœºåˆ¶</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Serialize</span><span class="hljs-params">(CArchive&amp; ar)</span></span>;
    
    <span class="hljs-comment">// è§†å›¾é€šçŸ¥</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">UpdateAllViews</span><span class="hljs-params">(CView* pSender, LPARAM lHint = <span class="hljs-number">0L</span>, CObject* pHint = <span class="hljs-literal">NULL</span>)</span></span>;
    
    <span class="hljs-built_in">DECLARE_DYNCREATE</span>(CMyDocument)
    <span class="hljs-built_in">DECLARE_MESSAGE_MAP</span>()
};
</code></pre>
<p><strong>æ–‡æ¡£çš„å…³é”®èŒè´£åŒ…æ‹¬ï¼š</strong></p>
<ol>
<li><strong>æ•°æ®å­˜å‚¨ä¸ç®¡ç†</strong>ï¼šç»´æŠ¤åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒæ•°æ®ç»“æ„</li>
<li><strong>æŒä¹…åŒ–æ”¯æŒ</strong>ï¼šé€šè¿‡Serializeæ–¹æ³•å®ç°æ–‡ä»¶è¯»å†™</li>
<li><strong>ä¿®æ”¹è¿½è¸ª</strong>ï¼šç®¡ç†â€œè„æ ‡å¿—â€ï¼ˆä¿®æ”¹çŠ¶æ€ï¼‰</li>
<li><strong>è§†å›¾åè°ƒ</strong>ï¼šé€šçŸ¥æ‰€æœ‰å…³è”è§†å›¾æ•°æ®å˜æ›´</li>
</ol>
<h4 data-id="heading-19">2.2 CViewï¼šæ•°æ®çš„è§‚å¯Ÿè€…ä¸äº¤äº’ç•Œé¢</h4>
<p>è§†å›¾ç±»æ˜¯æ¶æ„ä¸­çš„â€œè§†å›¾â€éƒ¨åˆ†ï¼Œè´Ÿè´£æ•°æ®çš„å¯è§†åŒ–å‘ˆç°å’Œç”¨æˆ·äº¤äº’ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CMyView</span> : <span class="hljs-keyword">public</span> CView
{
<span class="hljs-keyword">protected</span>:
    <span class="hljs-built_in">CMyView</span>();
    
<span class="hljs-comment">// å±æ€§</span>
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> m_nCurrentLine;      <span class="hljs-comment">// å½“å‰é€‰ä¸­è¡Œ</span>
    CFont m_fontText;        <span class="hljs-comment">// æ˜¾ç¤ºå­—ä½“</span>
    CSize m_sizeChar;        <span class="hljs-comment">// å­—ç¬¦å°ºå¯¸</span>
    
<span class="hljs-comment">// æ“ä½œ</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// è·å–å…³è”æ–‡æ¡£çš„å¼ºç±»å‹æŒ‡é’ˆ</span>
    <span class="hljs-function">CMyDocument* <span class="hljs-title">GetDocument</span><span class="hljs-params">()</span> <span class="hljs-type">const</span>
    </span>{
        <span class="hljs-keyword">return</span> (CMyDocument*)m_pDocument;
    }
    
    <span class="hljs-comment">// é‡å†™åŸºç±»å…³é”®æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnDraw</span><span class="hljs-params">(CDC* pDC)</span></span>;           <span class="hljs-comment">// ç»˜åˆ¶å†…å®¹</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnUpdate</span><span class="hljs-params">(CView* pSender, LPARAM lHint, CObject* pHint)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnInitialUpdate</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">PreCreateWindow</span><span class="hljs-params">(CREATESTRUCT&amp; cs)</span></span>;
    
    <span class="hljs-comment">// æ¶ˆæ¯å¤„ç†</span>
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnLButtonDown</span><span class="hljs-params">(UINT nFlags, CPoint point)</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnKeyDown</span><span class="hljs-params">(UINT nChar, UINT nRepCnt, UINT nFlags)</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnEditCut</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnEditCopy</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnEditPaste</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-built_in">DECLARE_DYNCREATE</span>(CMyView)
    <span class="hljs-built_in">DECLARE_MESSAGE_MAP</span>()
};
</code></pre>
<p>è§†å›¾é€šè¿‡<code>GetDocument()</code>æ–¹æ³•è·å–æ–‡æ¡£æŒ‡é’ˆï¼Œè¿™æ˜¯æ–‡æ¡£ä¸è§†å›¾é€šä¿¡çš„ä¸»è¦æ¡¥æ¢ã€‚è§†å›¾ä¸ç›´æ¥å­˜å‚¨æ•°æ®ï¼ŒåªæŒæœ‰å¯¹æ–‡æ¡£æ•°æ®çš„å¼•ç”¨ã€‚</p>
<h3 data-id="heading-20">ä¸‰ã€æ–‡æ¡£/è§†å›¾é€šä¿¡æœºåˆ¶</h3>
<h4 data-id="heading-21">3.1 æ•°æ®æµï¼šæ–‡æ¡£åˆ°è§†å›¾çš„æ›´æ–°</h4>
<p>æ–‡æ¡£æ•°æ®å˜åŒ–æ—¶ï¼Œé€šè¿‡<code>UpdateAllViews()</code>æ–¹æ³•é€šçŸ¥æ‰€æœ‰å…³è”çš„è§†å›¾ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ–‡æ¡£ç±»ä¸­ä¿®æ”¹æ•°æ®å¹¶é€šçŸ¥è§†å›¾</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyDocument::AddLine</span><span class="hljs-params">(<span class="hljs-type">const</span> CString&amp; strLine)</span>
</span>{
    m_lines.<span class="hljs-built_in">Add</span>(strLine);
    m_bModified = TRUE;
    
    <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰è§†å›¾æ•°æ®å·²æ›´æ–°</span>
    <span class="hljs-built_in">UpdateAllViews</span>(<span class="hljs-literal">NULL</span>, <span class="hljs-number">0L</span>, <span class="hljs-literal">NULL</span>);
    
    <span class="hljs-comment">// æˆ–è€…æºå¸¦æç¤ºä¿¡æ¯ï¼Œä¼˜åŒ–æ›´æ–°æ•ˆç‡</span>
    <span class="hljs-comment">// UpdateAllViews(NULL, UPDATE_LINE_ADDED, (CObject*)&amp;strLine);</span>
}
</code></pre>
<p>è§†å›¾æ¥æ”¶æ›´æ–°é€šçŸ¥å¹¶é‡ç»˜ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è§†å›¾ç±»ä¸­å“åº”æ›´æ–°é€šçŸ¥</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::OnUpdate</span><span class="hljs-params">(CView* pSender, LPARAM lHint, CObject* pHint)</span>
</span>{
    <span class="hljs-comment">// æ ¹æ®æç¤ºä¿¡æ¯å†³å®šæ›´æ–°ç­–ç•¥</span>
    <span class="hljs-keyword">if</span> (lHint == UPDATE_LINE_ADDED)
    {
        <span class="hljs-comment">// å±€éƒ¨æ›´æ–°ï¼šåªæ›´æ–°æ–°å¢è¡ŒåŒºåŸŸ</span>
        CString* pNewLine = (CString*)pHint;
        CRect rectUpdate = <span class="hljs-built_in">CalculateLineRect</span>(m_lines.<span class="hljs-built_in">GetSize</span>()<span class="hljs-number">-1</span>);
        <span class="hljs-built_in">InvalidateRect</span>(&amp;rectUpdate);
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// å®Œå…¨æ›´æ–°ï¼šé‡ç»˜æ•´ä¸ªå®¢æˆ·åŒº</span>
        <span class="hljs-built_in">Invalidate</span>();
    }
}
</code></pre>
<h4 data-id="heading-22">3.2 äº¤äº’æµï¼šè§†å›¾åˆ°æ–‡æ¡£çš„ä¿®æ”¹</h4>
<p>ç”¨æˆ·é€šè¿‡è§†å›¾ç•Œé¢ä¿®æ”¹æ•°æ®æ—¶ï¼Œè§†å›¾è°ƒç”¨æ–‡æ¡£çš„æ¥å£ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è§†å›¾å¤„ç†ç”¨æˆ·è¾“å…¥å¹¶ä¿®æ”¹æ–‡æ¡£</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::OnChar</span><span class="hljs-params">(UINT nChar, UINT nRepCnt, UINT nFlags)</span>
</span>{
    CMyDocument* pDoc = <span class="hljs-built_in">GetDocument</span>();
    
    <span class="hljs-keyword">if</span> (nChar == VK_RETURN)  <span class="hljs-comment">// å›è½¦é”®</span>
    {
        pDoc-&gt;<span class="hljs-built_in">AddLine</span>(m_strCurrentLine);  <span class="hljs-comment">// è°ƒç”¨æ–‡æ¡£æ–¹æ³•</span>
        m_strCurrentLine.<span class="hljs-built_in">Empty</span>();
    }
    <span class="hljs-keyword">else</span>
    {
        m_strCurrentLine += (TCHAR)nChar;
    }
    
    <span class="hljs-comment">// é‡ç»˜å½“å‰è¡Œ</span>
    CRect rectUpdate = <span class="hljs-built_in">CalculateCurrentLineRect</span>();
    <span class="hljs-built_in">InvalidateRect</span>(&amp;rectUpdate);
    
    CView::<span class="hljs-built_in">OnChar</span>(nChar, nRepCnt, nFlags);
}
</code></pre>
<h3 data-id="heading-23">å››ã€å¤šè§†å›¾æ”¯æŒï¼šä¸€æ¡£å¤šè§†çš„å®ç°</h3>
<p>æ–‡æ¡£/è§†å›¾æ¶æ„æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯æ”¯æŒå•ä¸ªæ–‡æ¡£å¯¹åº”å¤šä¸ªè§†å›¾ï¼Œè¿™åœ¨CADã€å›¾å½¢ç¼–è¾‘ç­‰åº”ç”¨ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ›å»ºåŒä¸€æ–‡æ¡£çš„ç¬¬äºŒä¸ªè§†å›¾</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMainFrame::OnWindowNewView</span><span class="hljs-params">()</span>
</span>{
    CMyDocument* pDoc = (CMyDocument*)<span class="hljs-built_in">GetActiveDocument</span>();
    
    <span class="hljs-comment">// åˆ›å»ºæ–°çš„æ¡†æ¶çª—å£</span>
    CChildFrame* pNewFrame = <span class="hljs-keyword">new</span> CChildFrame;
    
    <span class="hljs-comment">// åŠ¨æ€åˆ›å»ºæ–°è§†å›¾</span>
    CCreateContext context;
    context.m_pCurrentDoc = pDoc;
    context.m_pNewViewClass = <span class="hljs-built_in">RUNTIME_CLASS</span>(CMyView);
    
    <span class="hljs-comment">// åˆ›å»ºè§†å›¾å¹¶å…³è”åˆ°æ–°æ¡†æ¶</span>
    <span class="hljs-keyword">if</span> (!pNewFrame-&gt;<span class="hljs-built_in">LoadFrame</span>(IDR_MYTYPE, WS_OVERLAPPEDWINDOW, 
                              <span class="hljs-keyword">this</span>, &amp;context))
    {
        <span class="hljs-keyword">delete</span> pNewFrame;
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// æ˜¾ç¤ºæ–°çª—å£</span>
    pNewFrame-&gt;<span class="hljs-built_in">InitialUpdateFrame</span>(pDoc, TRUE);
}

<span class="hljs-comment">// ä¸åŒç±»å‹çš„è§†å›¾å¯ä»¥å±•ç¤ºåŒä¸€æ–‡æ¡£çš„ä¸åŒæ–¹é¢</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CGraphView</span> : <span class="hljs-keyword">public</span> CView  <span class="hljs-comment">// å›¾å½¢è§†å›¾</span>
{
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnDraw</span><span class="hljs-params">(CDC* pDC)</span>
    </span>{
        CMyDocument* pDoc = <span class="hljs-built_in">GetDocument</span>();
        <span class="hljs-comment">// å°†æ–‡æœ¬æ•°æ®è½¬æ¢ä¸ºå›¾å½¢å±•ç¤º</span>
        <span class="hljs-built_in">DrawTextAsGraph</span>(pDC, pDoc-&gt;<span class="hljs-built_in">GetAllLines</span>());
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CStatsView</span> : <span class="hljs-keyword">public</span> CView  <span class="hljs-comment">// ç»Ÿè®¡è§†å›¾</span>
{
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnDraw</span><span class="hljs-params">(CDC* pDC)</span>
    </span>{
        CMyDocument* pDoc = <span class="hljs-built_in">GetDocument</span>();
        <span class="hljs-comment">// æ˜¾ç¤ºæ–‡æœ¬çš„ç»Ÿè®¡ä¿¡æ¯</span>
        <span class="hljs-built_in">DrawStatistics</span>(pDC, pDoc-&gt;<span class="hljs-built_in">CalculateStats</span>());
    }
};
</code></pre>
<h3 data-id="heading-24">äº”ã€åºåˆ—åŒ–ï¼šæ–‡æ¡£æŒä¹…åŒ–çš„æ ¸å¿ƒæœºåˆ¶</h3>
<p>åºåˆ—åŒ–æ˜¯æ–‡æ¡£/è§†å›¾æ¶æ„çš„æ•°æ®æŒä¹…åŒ–åŸºç¡€ï¼Œå®ƒé€šè¿‡<code>CArchive</code>ç±»å®ç°æ•°æ®çš„äºŒè¿›åˆ¶æµå¼è¯»å†™ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ–‡æ¡£ç±»çš„åºåˆ—åŒ–å®ç°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyDocument::Serialize</span><span class="hljs-params">(CArchive&amp; ar)</span>
</span>{
    <span class="hljs-keyword">if</span> (ar.<span class="hljs-built_in">IsStoring</span>())  <span class="hljs-comment">// ä¿å­˜æ–‡æ¡£</span>
    {
        <span class="hljs-comment">// å†™å…¥ç‰ˆæœ¬æ ‡è¯†</span>
        ar &lt;&lt; (WORD)<span class="hljs-number">0x0001</span>;  <span class="hljs-comment">// ç‰ˆæœ¬1.0</span>
        
        <span class="hljs-comment">// å†™å…¥æ–‡æ¡£å±æ€§</span>
        ar &lt;&lt; m_strTitle;
        ar &lt;&lt; m_bModified;
        
        <span class="hljs-comment">// å†™å…¥æ•°æ®å†…å®¹</span>
        m_lines.<span class="hljs-built_in">Serialize</span>(ar);  <span class="hljs-comment">// CStringArrayæ”¯æŒåºåˆ—åŒ–</span>
        
        <span class="hljs-comment">// å†™å…¥è‡ªå®šä¹‰å¯¹è±¡</span>
        <span class="hljs-keyword">if</span> (m_pCustomObj != <span class="hljs-literal">NULL</span>)
        {
            ar &lt;&lt; (WORD)<span class="hljs-number">1</span>;  <span class="hljs-comment">// æ ‡è®°æœ‰å¯¹è±¡</span>
            ar.<span class="hljs-built_in">WriteObject</span>(m_pCustomObj);  <span class="hljs-comment">// å†™å…¥å¯åºåˆ—åŒ–å¯¹è±¡</span>
        }
        <span class="hljs-keyword">else</span>
        {
            ar &lt;&lt; (WORD)<span class="hljs-number">0</span>;  <span class="hljs-comment">// æ ‡è®°æ— å¯¹è±¡</span>
        }
    }
    <span class="hljs-keyword">else</span>  <span class="hljs-comment">// åŠ è½½æ–‡æ¡£</span>
    {
        <span class="hljs-comment">// è¯»å–ç‰ˆæœ¬æ ‡è¯†</span>
        WORD wVersion;
        ar &gt;&gt; wVersion;
        
        <span class="hljs-keyword">if</span> (wVersion == <span class="hljs-number">0x0001</span>)
        {
            <span class="hljs-comment">// è¯»å–æ–‡æ¡£å±æ€§</span>
            ar &gt;&gt; m_strTitle;
            ar &gt;&gt; m_bModified;
            
            <span class="hljs-comment">// è¯»å–æ•°æ®å†…å®¹</span>
            m_lines.<span class="hljs-built_in">Serialize</span>(ar);
            
            <span class="hljs-comment">// è¯»å–è‡ªå®šä¹‰å¯¹è±¡</span>
            WORD wHasObject;
            ar &gt;&gt; wHasObject;
            <span class="hljs-keyword">if</span> (wHasObject == <span class="hljs-number">1</span>)
            {
                m_pCustomObj = (CCustomObject*)ar.<span class="hljs-built_in">ReadObject</span>(
                    <span class="hljs-built_in">RUNTIME_CLASS</span>(CCustomObject));
            }
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-comment">// å¤„ç†æ—§ç‰ˆæœ¬æ ¼å¼</span>
            <span class="hljs-built_in">LoadOldFormat</span>(ar, wVersion);
        }
    }
}

<span class="hljs-comment">// è‡ªå®šä¹‰å¯åºåˆ—åŒ–å¯¹è±¡çš„å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CCustomObject</span> : <span class="hljs-keyword">public</span> CObject
{
    <span class="hljs-built_in">DECLARE_SERIAL</span>(CCustomObject)
    
<span class="hljs-keyword">private</span>:
    CString m_strData;
    <span class="hljs-type">int</span> m_nValue;
    CPointArray m_points;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Serialize</span><span class="hljs-params">(CArchive&amp; ar)</span>
    </span>{
        CObject::<span class="hljs-built_in">Serialize</span>(ar);
        
        <span class="hljs-keyword">if</span> (ar.<span class="hljs-built_in">IsStoring</span>())
        {
            ar &lt;&lt; m_strData &lt;&lt; m_nValue;
            m_points.<span class="hljs-built_in">Serialize</span>(ar);
        }
        <span class="hljs-keyword">else</span>
        {
            ar &gt;&gt; m_strData &gt;&gt; m_nValue;
            m_points.<span class="hljs-built_in">Serialize</span>(ar);
        }
    }
    
    <span class="hljs-comment">// å¿…é¡»æœ‰æ— å‚æ„é€ å‡½æ•°</span>
    <span class="hljs-built_in">CCustomObject</span>() { }
};

<span class="hljs-built_in">IMPLEMENT_SERIAL</span>(CCustomObject, CObject, VERSIONABLE_SCHEMA | <span class="hljs-number">1</span>)
</code></pre>
<h3 data-id="heading-25">å…­ã€ä¸ç»å…¸MVCæ¶æ„çš„æ·±åº¦å¯¹æ¯”</h3>
<h4 data-id="heading-26">6.1 ç›¸ä¼¼æ€§ï¼šåˆ†ç¦»å…³æ³¨ç‚¹çš„å…±åŒè¿½æ±‚</h4>
<p>æ–‡æ¡£/è§†å›¾æ¶æ„ä¸MVCéƒ½éµå¾ªäº†æ•°æ®ä¸æ˜¾ç¤ºåˆ†ç¦»çš„åŸåˆ™ï¼š</p>





























<table><thead><tr><th>æ¦‚å¿µå¯¹åº”</th><th>MVCç»„ä»¶</th><th>æ–‡æ¡£/è§†å›¾ç»„ä»¶</th><th>èŒè´£ç›¸ä¼¼åº¦</th></tr></thead><tbody><tr><td>æ•°æ®å±‚</td><td>Model</td><td>Document</td><td>é«˜ï¼šéƒ½è´Ÿè´£æ•°æ®ç®¡ç†å’Œä¸šåŠ¡è§„åˆ™</td></tr><tr><td>æ˜¾ç¤ºå±‚</td><td>View</td><td>View</td><td>é«˜ï¼šéƒ½è´Ÿè´£æ•°æ®å¯è§†åŒ–</td></tr><tr><td>æ§åˆ¶å±‚</td><td>Controller</td><td>åˆ†æ•£å¤„ç†</td><td>ä½ï¼šMVCæœ‰ç‹¬ç«‹æ§åˆ¶å™¨</td></tr></tbody></table>
<h4 data-id="heading-27">6.2 å·®å¼‚æ€§ï¼šæ¶æ„å®Œæ•´æ€§çš„æœ¬è´¨åŒºåˆ«</h4>
<p>å…³é”®å·®å¼‚åœ¨äºæ§åˆ¶å±‚çš„å¤„ç†æ–¹å¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// MVCçš„æ˜ç¡®æ§åˆ¶æµ</span>
<span class="hljs-comment">// 1. ç”¨æˆ·è¾“å…¥ -&gt; Controller</span>
<span class="hljs-comment">// 2. Controlleræ›´æ–°Model</span>
<span class="hljs-comment">// 3. Modelé€šçŸ¥Viewæ›´æ–°</span>

<span class="hljs-comment">// æ–‡æ¡£/è§†å›¾çš„æ··åˆæ§åˆ¶æµ</span>
<span class="hljs-comment">// 1. ç”¨æˆ·è¾“å…¥ -&gt; Viewï¼ˆç›´æ¥å¤„ç†ï¼‰</span>
<span class="hljs-comment">// 2. Viewæ›´æ–°Documentï¼ˆç›´æ¥è°ƒç”¨ï¼‰</span>
<span class="hljs-comment">// 3. Documenté€šçŸ¥æ‰€æœ‰Viewæ›´æ–°</span>
</code></pre>
<p><strong>æ¶æ„å·®å¼‚çš„å…·ä½“è¡¨ç°ï¼š</strong></p>
<ol>
<li>
<p><strong>æ§åˆ¶å™¨è§’è‰²çš„ç¼ºå¤±</strong></p>
<ul>
<li>MVCï¼šControlleræ˜¯ç‹¬ç«‹çš„åè°ƒè€…ï¼Œå†³å®šå¦‚ä½•å“åº”è¾“å…¥</li>
<li>æ–‡æ¡£/è§†å›¾ï¼šæ§åˆ¶é€»è¾‘åˆ†æ•£åœ¨Viewå’ŒDocumentä¸­</li>
</ul>
</li>
<li>
<p><strong>é€šä¿¡æ¨¡å¼çš„ä¸åŒ</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// MVCï¼šè§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ¾è€¦åˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Model</span> {
    List&lt;Observer&gt; observers;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">notifyObservers</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">for</span> (obs in observers) obs.<span class="hljs-built_in">update</span>();
    }
};

<span class="hljs-comment">// æ–‡æ¡£/è§†å›¾ï¼šç›´æ¥è°ƒç”¨ï¼Œç´§è€¦åˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Document</span> {
    List&lt;View*&gt; views;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">UpdateAllViews</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">for</span> (view in views) view-&gt;<span class="hljs-built_in">OnUpdate</span>(<span class="hljs-keyword">this</span>);
    }
};
</code></pre>
</li>
<li>
<p><strong>å¯æµ‹è¯•æ€§çš„å½±å“</strong></p>
<ul>
<li>MVCï¼šModelå’ŒControllerå¯ç‹¬ç«‹äºViewè¿›è¡Œå•å…ƒæµ‹è¯•</li>
<li>æ–‡æ¡£/è§†å›¾ï¼šViewå’ŒDocumentç´§å¯†è€¦åˆï¼Œæµ‹è¯•å›°éš¾</li>
</ul>
</li>
</ol>
<h3 data-id="heading-28">ä¸ƒã€æ¶æ„çš„é€‚ç”¨åœºæ™¯ä¸å±€é™æ€§</h3>
<h4 data-id="heading-29">7.1 ç†æƒ³é€‚ç”¨åœºæ™¯</h4>
<p>æ–‡æ¡£/è§†å›¾æ¶æ„ç‰¹åˆ«é€‚åˆä»¥ä¸‹ç±»å‹çš„åº”ç”¨ï¼š</p>
<ol>
<li><strong>æ–‡æ¡£ä¸­å¿ƒå‹åº”ç”¨</strong>ï¼šæ–‡å­—å¤„ç†å™¨ã€ç”µå­è¡¨æ ¼ã€ä»£ç ç¼–è¾‘å™¨</li>
<li><strong>å¤šè§†å›¾æ•°æ®å±•ç¤º</strong>ï¼šCADç³»ç»Ÿã€æ•°æ®åˆ†æå·¥å…·ã€æ•°æ®åº“å‰ç«¯</li>
<li><strong>éœ€è¦å®Œæ•´æ–‡ä»¶æ”¯æŒçš„åº”ç”¨</strong>ï¼šæ”¯æŒæ‰“å¼€ã€ä¿å­˜ã€å¦å­˜ä¸ºç­‰æ ‡å‡†æ“ä½œ</li>
</ol>
<h4 data-id="heading-30">7.2 æ¶æ„å±€é™æ€§</h4>
<ol>
<li><strong>å­¦ä¹ æ›²çº¿é™¡å³­</strong>ï¼šéœ€è¦ç†è§£å¤§é‡MFCç‰¹å®šæ¦‚å¿µå’Œå®</li>
<li><strong>è¿‡åº¦è®¾è®¡ç®€å•åº”ç”¨</strong>ï¼šå¯¹äºå¯¹è¯æ¡†åº”ç”¨è¿‡äºå¤æ‚</li>
<li><strong>å¹³å°é”å®š</strong>ï¼šæ·±åº¦ç»‘å®šWindowså’ŒMFCæ¡†æ¶</li>
<li><strong>ç°ä»£æ€§ä¸è¶³</strong>ï¼šç¼ºä¹å¯¹è§¦æ‘¸ã€æ‰‹åŠ¿ç­‰ç°ä»£äº¤äº’çš„æ”¯æŒ</li>
</ol>
<h3 data-id="heading-31">å…«ã€å®é™…åº”ç”¨ç¤ºä¾‹ï¼šç®€æ˜“æ–‡æœ¬ç¼–è¾‘å™¨</h3>
<p>ä»¥ä¸‹æ˜¯æ–‡æ¡£/è§†å›¾æ¶æ„åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­çš„å®Œæ•´å®ç°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ–‡æ¡£ç±» - ç®¡ç†æ–‡æœ¬æ•°æ®</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CTextDocument</span> : <span class="hljs-keyword">public</span> CDocument
{
<span class="hljs-keyword">protected</span>:
    <span class="hljs-built_in">CTextDocument</span>();
    
    <span class="hljs-comment">// æ•°æ®å­˜å‚¨</span>
    CStringArray m_lines;
    <span class="hljs-type">int</span> m_nTotalChars;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ•°æ®æ“ä½œæ¥å£</span>
    <span class="hljs-function">BOOL <span class="hljs-title">InsertText</span><span class="hljs-params">(<span class="hljs-type">int</span> nLine, <span class="hljs-type">int</span> nPos, <span class="hljs-type">const</span> CString&amp; strText)</span></span>;
    <span class="hljs-function">BOOL <span class="hljs-title">DeleteText</span><span class="hljs-params">(<span class="hljs-type">int</span> nLine, <span class="hljs-type">int</span> nPos, <span class="hljs-type">int</span> nCount)</span></span>;
    <span class="hljs-function">CString <span class="hljs-title">GetText</span><span class="hljs-params">(<span class="hljs-type">int</span> nLine, <span class="hljs-type">int</span> nPos, <span class="hljs-type">int</span> nCount)</span> <span class="hljs-type">const</span></span>;
    
    <span class="hljs-comment">// é‡å†™å…³é”®æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">OnNewDocument</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Serialize</span><span class="hljs-params">(CArchive&amp; ar)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">DeleteContents</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-built_in">DECLARE_DYNCREATE</span>(CTextDocument)
};

<span class="hljs-comment">// è§†å›¾ç±» - æ˜¾ç¤ºå’Œç¼–è¾‘æ–‡æœ¬</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CTextView</span> : <span class="hljs-keyword">public</span> CScrollView
{
<span class="hljs-keyword">protected</span>:
    <span class="hljs-built_in">CTextView</span>();
    
    <span class="hljs-comment">// ç¼–è¾‘çŠ¶æ€</span>
    <span class="hljs-type">int</span> m_nCaretLine;    <span class="hljs-comment">// å…‰æ ‡æ‰€åœ¨è¡Œ</span>
    <span class="hljs-type">int</span> m_nCaretPos;     <span class="hljs-comment">// å…‰æ ‡åœ¨è¡Œä¸­çš„ä½ç½®</span>
    BOOL m_bSelecting;   <span class="hljs-comment">// æ˜¯å¦åœ¨é€‰æ‹©æ–‡æœ¬</span>
    CPoint m_ptSelectStart; <span class="hljs-comment">// é€‰æ‹©èµ·å§‹ç‚¹</span>
    
    <span class="hljs-comment">// æ˜¾ç¤ºå±æ€§</span>
    CFont m_font;
    CSize m_sizeChar;    <span class="hljs-comment">// å­—ç¬¦å°ºå¯¸</span>
    <span class="hljs-type">int</span> m_nLinesPerPage; <span class="hljs-comment">// æ¯é¡µè¡Œæ•°</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">CTextDocument* <span class="hljs-title">GetDocument</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;
    
    <span class="hljs-comment">// é‡å†™å…³é”®æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnDraw</span><span class="hljs-params">(CDC* pDC)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnInitialUpdate</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnUpdate</span><span class="hljs-params">(CView* pSender, LPARAM lHint, CObject* pHint)</span></span>;
    
    <span class="hljs-comment">// æ¶ˆæ¯å¤„ç†</span>
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnLButtonDown</span><span class="hljs-params">(UINT nFlags, CPoint point)</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnMouseMove</span><span class="hljs-params">(UINT nFlags, CPoint point)</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnLButtonUp</span><span class="hljs-params">(UINT nFlags, CPoint point)</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnKeyDown</span><span class="hljs-params">(UINT nChar, UINT nRepCnt, UINT nFlags)</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnChar</span><span class="hljs-params">(UINT nChar, UINT nRepCnt, UINT nFlags)</span></span>;
    <span class="hljs-function">afx_msg <span class="hljs-type">void</span> <span class="hljs-title">OnVScroll</span><span class="hljs-params">(UINT nSBCode, UINT nPos, CScrollBar* pScrollBar)</span></span>;
    
    <span class="hljs-comment">// è®¡ç®—è¾…åŠ©å‡½æ•°</span>
    <span class="hljs-function">CPoint <span class="hljs-title">CharPosFromPoint</span><span class="hljs-params">(CPoint point)</span> <span class="hljs-type">const</span></span>;
    <span class="hljs-function">CPoint <span class="hljs-title">PointFromCharPos</span><span class="hljs-params">(<span class="hljs-type">int</span> nLine, <span class="hljs-type">int</span> nPos)</span> <span class="hljs-type">const</span></span>;
    <span class="hljs-function">CRect <span class="hljs-title">GetLineRect</span><span class="hljs-params">(<span class="hljs-type">int</span> nLine)</span> <span class="hljs-type">const</span></span>;
    
    <span class="hljs-built_in">DECLARE_DYNCREATE</span>(CTextView)
    <span class="hljs-built_in">DECLARE_MESSAGE_MAP</span>()
};
</code></pre>
<h3 data-id="heading-32">ä¹ã€ç°ä»£æ¡†æ¶ä¸­çš„æ¼”è¿›ä¸å¯ç¤º</h3>
<p>è™½ç„¶MFCæ–‡æ¡£/è§†å›¾æ¶æ„å·²é€æ¸é€€å‡ºä¸»æµï¼Œä½†å…¶è®¾è®¡æ€æƒ³åœ¨ç°ä»£æ¡†æ¶ä¸­ä»æœ‰ä½“ç°ï¼š</p>
<ol>
<li><strong>æ•°æ®ç»‘å®š</strong>ï¼šWPF/XAMLçš„æ•°æ®ç»‘å®šæœºåˆ¶æ˜¯æ–‡æ¡£/è§†å›¾åˆ†ç¦»çš„è¿›åŒ–</li>
<li><strong>MVVMæ¨¡å¼</strong>ï¼šModel-View-ViewModelå¯è§†ä¸ºæ–‡æ¡£/è§†å›¾çš„ç°ä»£åŒ–èº«</li>
<li><strong>å“åº”å¼ç¼–ç¨‹</strong>ï¼šRxJSç­‰åº“å®ç°äº†æ›´çµæ´»çš„æ•°æ®-è§†å›¾åŒæ­¥</li>
</ol>
<p><strong>æ¶æ„æ¼”è¿›çš„å¯ç¤ºï¼š</strong></p>
<ul>
<li>å…³æ³¨ç‚¹åˆ†ç¦»æ˜¯æ°¸æ’çš„è®¾è®¡åŸåˆ™</li>
<li>æ¡†æ¶åº”è¯¥æä¾›æ¸…æ™°çš„æ•°æ®æµæŒ‡å¯¼</li>
<li>å¯æµ‹è¯•æ€§åº”è¯¥æˆä¸ºæ¶æ„çš„æ ¸å¿ƒè€ƒé‡</li>
<li>å¹³å°æŠ½è±¡å±‚å¯¹äºé•¿æœŸç»´æŠ¤è‡³å…³é‡è¦</li>
</ul>
<p>æ–‡æ¡£/è§†å›¾æ¶æ„å±•ç¤ºäº†åœ¨ç‰¹å®šæŠ€æœ¯çº¦æŸä¸‹ï¼ˆC++ã€Windowsã€90å¹´ä»£ç¡¬ä»¶ï¼‰å¦‚ä½•å®ç°å¤æ‚åº”ç”¨çš„ç»“æ„åŒ–ç»„ç»‡ã€‚è™½ç„¶å…·ä½“æŠ€æœ¯å·²è¿‡æ—¶ï¼Œä½†å…¶èƒŒåçš„æ¶æ„æ€ç»´â€”â€”å¦‚ä½•ç®¡ç†å¤æ‚æ€§ã€å¦‚ä½•åˆ†ç¦»å…³æ³¨ç‚¹ã€å¦‚ä½•è®¾è®¡å¯æ‰©å±•çš„ç³»ç»Ÿâ€”â€”å¯¹ä»Šå¤©çš„è½¯ä»¶å¼€å‘è€…ä»æœ‰é‡è¦ä»·å€¼ã€‚</p>
<h2 data-id="heading-33">ç¬¬ä¸‰ç« ï¼šMFCå¯¹è¯æ¡†ä¸DDX/DDVæœºåˆ¶â€”â€”ç”¨æˆ·ç•Œé¢çš„æ ‡å‡†åŒ–å°è£…</h2>
<h3 data-id="heading-34">ä¸€ã€å¯¹è¯æ¡†ç¼–ç¨‹çš„æ¼”è¿›ï¼šä»åŸå§‹APIåˆ°MFCå°è£…</h3>
<p>åœ¨åŸå§‹çš„Windows SDKä¸­ï¼Œåˆ›å»ºå’Œç®¡ç†å¯¹è¯æ¡†æ˜¯ä¸€é¡¹ç¹çä¸”å®¹æ˜“å‡ºé”™çš„å·¥ä½œã€‚å¼€å‘è€…éœ€è¦æ‰‹åŠ¨å¤„ç†å¯¹è¯æ¡†è¿‡ç¨‹å‡½æ•°ã€æ§ä»¶æ¶ˆæ¯ã€æ•°æ®éªŒè¯ç­‰ä¸€ç³»åˆ—å¤æ‚ä»»åŠ¡ã€‚MFCçš„å¯¹è¯æ¡†ç±»ï¼ˆCDialogåŠå…¶æ´¾ç”Ÿç±»ï¼‰é€šè¿‡é¢å‘å¯¹è±¡çš„å°è£…ï¼Œæå¤§åœ°ç®€åŒ–äº†è¿™ä¸€è¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-35">1.1 åŸå§‹Win32å¯¹è¯æ¡†ç¼–ç¨‹çš„å¤æ‚æ€§</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Win32 SDKä¸­çš„å¯¹è¯æ¡†ç¤ºä¾‹</span>
<span class="hljs-function">BOOL CALLBACK <span class="hljs-title">DialogProc</span><span class="hljs-params">(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)</span>
</span>{
    <span class="hljs-keyword">switch</span> (uMsg)
    {
        <span class="hljs-keyword">case</span> WM_INITDIALOG:
            <span class="hljs-comment">// åˆå§‹åŒ–æ§ä»¶</span>
            <span class="hljs-built_in">SetDlgItemText</span>(hwndDlg, IDC_EDIT_NAME, <span class="hljs-string">"é»˜è®¤åç§°"</span>);
            <span class="hljs-built_in">SetDlgItemInt</span>(hwndDlg, IDC_EDIT_AGE, <span class="hljs-number">25</span>, FALSE);
            <span class="hljs-keyword">return</span> TRUE;
            
        <span class="hljs-keyword">case</span> WM_COMMAND:
            <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">LOWORD</span>(wParam))
            {
                <span class="hljs-keyword">case</span> IDOK:
                {
                    <span class="hljs-comment">// è·å–æ•°æ®</span>
                    TCHAR szName[<span class="hljs-number">100</span>];
                    <span class="hljs-built_in">GetDlgItemText</span>(hwndDlg, IDC_EDIT_NAME, szName, <span class="hljs-number">100</span>);
                    
                    <span class="hljs-comment">// æ‰‹åŠ¨éªŒè¯</span>
                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">lstrlen</span>(szName) == <span class="hljs-number">0</span>)
                    {
                        <span class="hljs-built_in">MessageBox</span>(hwndDlg, <span class="hljs-string">"å§“åä¸èƒ½ä¸ºç©º"</span>, <span class="hljs-string">"é”™è¯¯"</span>, MB_OK);
                        <span class="hljs-keyword">return</span> TRUE;
                    }
                    
                    <span class="hljs-type">int</span> nAge = <span class="hljs-built_in">GetDlgItemInt</span>(hwndDlg, IDC_EDIT_AGE, <span class="hljs-literal">NULL</span>, FALSE);
                    <span class="hljs-keyword">if</span> (nAge &lt; <span class="hljs-number">0</span> || nAge &gt; <span class="hljs-number">150</span>)
                    {
                        <span class="hljs-built_in">MessageBox</span>(hwndDlg, <span class="hljs-string">"å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´"</span>, <span class="hljs-string">"é”™è¯¯"</span>, MB_OK);
                        <span class="hljs-keyword">return</span> TRUE;
                    }
                    
                    <span class="hljs-built_in">EndDialog</span>(hwndDlg, IDOK);
                    <span class="hljs-keyword">return</span> TRUE;
                }
                
                <span class="hljs-keyword">case</span> IDCANCEL:
                    <span class="hljs-built_in">EndDialog</span>(hwndDlg, IDCANCEL);
                    <span class="hljs-keyword">return</span> TRUE;
            }
            <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-keyword">return</span> FALSE;
}

<span class="hljs-comment">// è°ƒç”¨å¯¹è¯æ¡†</span>
<span class="hljs-built_in">DialogBox</span>(hInstance, <span class="hljs-built_in">MAKEINTRESOURCE</span>(IDD_MYDIALOG), hwndParent, DialogProc);
</code></pre>
<p>è¿™ç§æ¨¡å¼å­˜åœ¨æ˜æ˜¾é—®é¢˜ï¼š</p>
<ol>
<li><strong>ä»£ç å†—é•¿</strong>ï¼šæ¯ä¸ªæ§ä»¶éƒ½éœ€è¦å•ç‹¬è·å–å’Œè®¾ç½®</li>
<li><strong>éªŒè¯åˆ†æ•£</strong>ï¼šéªŒè¯é€»è¾‘ä¸UIé€»è¾‘æ··æ‚</li>
<li><strong>ç±»å‹ä¸å®‰å…¨</strong>ï¼šæ‰€æœ‰æ•°æ®éƒ½æ˜¯å­—ç¬¦ä¸²æˆ–æ•´æ•°ï¼Œéœ€è¦æ‰‹åŠ¨è½¬æ¢</li>
<li><strong>éš¾ä»¥ç»´æŠ¤</strong>ï¼šæ·»åŠ æ–°æ§ä»¶éœ€è¦ä¿®æ”¹å¤šä¸ªåœ°æ–¹</li>
</ol>
<h3 data-id="heading-36">äºŒã€MFCå¯¹è¯æ¡†ç±»çš„å°è£…æ¶æ„</h3>
<h4 data-id="heading-37">2.1 CDialogç±»å±‚æ¬¡ç»“æ„</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// MFCå¯¹è¯æ¡†ç±»çš„åŸºæœ¬å±‚æ¬¡</span>
CObject
â””â”€â”€ CCmdTarget
    â””â”€â”€ CWnd
        â””â”€â”€ CDialog
            â”œâ”€â”€ <span class="hljs-built_in">CCommonDialog</span> (é€šç”¨å¯¹è¯æ¡†åŸºç±»)
            â”‚   â”œâ”€â”€ CFileDialog
            â”‚   â”œâ”€â”€ CColorDialog
            â”‚   â”œâ”€â”€ CFontDialog
            â”‚   â””â”€â”€ ...
            â””â”€â”€ <span class="hljs-built_in">CDialogEx</span> (å¢å¼ºåŠŸèƒ½)

<span class="hljs-comment">// å…¸å‹çš„MFCå¯¹è¯æ¡†ç±»å®šä¹‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CMyDialog</span> : <span class="hljs-keyword">public</span> CDialogEx
{
    <span class="hljs-built_in">DECLARE_DYNAMIC</span>(CMyDialog)

<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ ‡å‡†æ„é€ å‡½æ•°</span>
    <span class="hljs-built_in">CMyDialog</span>(CWnd* pParent = <span class="hljs-literal">NULL</span>);
    
    <span class="hljs-comment">// å¯¹è¯æ¡†èµ„æºID</span>
    <span class="hljs-keyword">enum</span> { IDD = IDD_MYDIALOG };

<span class="hljs-keyword">protected</span>:
    <span class="hljs-comment">// DDX/DDVæ”¯æŒ</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">DoDataExchange</span><span class="hljs-params">(CDataExchange* pDX)</span></span>;

    <span class="hljs-comment">// æ¶ˆæ¯æ˜ å°„</span>
    <span class="hljs-built_in">DECLARE_MESSAGE_MAP</span>()

<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ§ä»¶å…³è”å˜é‡</span>
    CString m_strName;
    <span class="hljs-type">int</span> m_nAge;
    BOOL m_bAgree;
    CComboBox m_cboGender;
};
</code></pre>
<h4 data-id="heading-38">2.2 å¯¹è¯æ¡†ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4>
<p>MFCå¯¹è¯æ¡†çš„ç”Ÿå‘½å‘¨æœŸç”±ä»¥ä¸‹å…³é”®æ–¹æ³•æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å¯¹è¯æ¡†åˆ›å»ºä¸é”€æ¯æµç¨‹</span>
<span class="hljs-function">BOOL <span class="hljs-title">CMyDialog::OnInitDialog</span><span class="hljs-params">()</span>
</span>{
    CDialogEx::<span class="hljs-built_in">OnInitDialog</span>();
    
    <span class="hljs-comment">// 1. åˆå§‹åŒ–æ§ä»¶</span>
    m_cboGender.<span class="hljs-built_in">AddString</span>(_T(<span class="hljs-string">"ç”·"</span>));
    m_cboGender.<span class="hljs-built_in">AddString</span>(_T(<span class="hljs-string">"å¥³"</span>));
    m_cboGender.<span class="hljs-built_in">SetCurSel</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// 2. è®¾ç½®åˆå§‹æ•°æ®</span>
    m_strName = _T(<span class="hljs-string">"å¼ ä¸‰"</span>);
    m_nAge = <span class="hljs-number">25</span>;
    m_bAgree = TRUE;
    
    <span class="hljs-comment">// 3. æ›´æ–°æ§ä»¶æ˜¾ç¤º</span>
    <span class="hljs-built_in">UpdateData</span>(FALSE);
    
    <span class="hljs-comment">// 4. å…¶ä»–åˆå§‹åŒ–</span>
    <span class="hljs-built_in">CenterWindow</span>();  <span class="hljs-comment">// å±…ä¸­æ˜¾ç¤º</span>
    
    <span class="hljs-keyword">return</span> TRUE;
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyDialog::OnOK</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// 1. ä»æ§ä»¶è·å–æ•°æ®å¹¶éªŒè¯</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">UpdateData</span>(TRUE))
        <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// éªŒè¯å¤±è´¥ï¼Œä¸å…³é—­å¯¹è¯æ¡†</span>
    
    <span class="hljs-comment">// 2. é¢å¤–çš„ä¸šåŠ¡é€»è¾‘éªŒè¯</span>
    <span class="hljs-keyword">if</span> (m_strName.<span class="hljs-built_in">GetLength</span>() &lt; <span class="hljs-number">2</span>)
    {
        <span class="hljs-built_in">MessageBox</span>(_T(<span class="hljs-string">"å§“åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦"</span>), _T(<span class="hljs-string">"é”™è¯¯"</span>), MB_ICONERROR);
        <span class="hljs-built_in">GetDlgItem</span>(IDC_EDIT_NAME)-&gt;<span class="hljs-built_in">SetFocus</span>();
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// 3. è°ƒç”¨åŸºç±»OnOKå…³é—­å¯¹è¯æ¡†</span>
    CDialogEx::<span class="hljs-built_in">OnOK</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyDialog::OnCancel</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// å–æ¶ˆå‰çš„ç¡®è®¤</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">MessageBox</span>(_T(<span class="hljs-string">"ç¡®å®šè¦å–æ¶ˆå—ï¼Ÿ"</span>), _T(<span class="hljs-string">"ç¡®è®¤"</span>), 
                   MB_YESNO | MB_ICONQUESTION) == IDYES)
    {
        CDialogEx::<span class="hljs-built_in">OnCancel</span>();
    }
}
</code></pre>
<h3 data-id="heading-39">ä¸‰ã€DDXï¼ˆå¯¹è¯æ¡†æ•°æ®äº¤æ¢ï¼‰æœºåˆ¶è¯¦è§£</h3>
<h4 data-id="heading-40">3.1 DDXçš„æ ¸å¿ƒåŸç†</h4>
<p>DDXæœºåˆ¶é€šè¿‡<code>DoDataExchange</code>å‡½æ•°å’Œä¸€ç»„é¢„å®šä¹‰çš„å®ï¼Œåœ¨å¯¹è¯æ¡†æ§ä»¶å’Œæˆå‘˜å˜é‡ä¹‹é—´å»ºç«‹åŒå‘æ•°æ®ç»‘å®šï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// DoDataExchangeå‡½æ•°çš„æ ‡å‡†å®ç°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyDialog::DoDataExchange</span><span class="hljs-params">(CDataExchange* pDX)</span>
</span>{
    CDialogEx::<span class="hljs-built_in">DoDataExchange</span>(pDX);
    
    <span class="hljs-comment">// æ–‡æœ¬æ§ä»¶äº¤æ¢</span>
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_NAME, m_strName);
    
    <span class="hljs-comment">// æ•°å€¼æ§ä»¶äº¤æ¢</span>
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_AGE, m_nAge);
    
    <span class="hljs-comment">// å¤é€‰æ¡†äº¤æ¢</span>
    <span class="hljs-built_in">DDX_Check</span>(pDX, IDC_CHECK_AGREE, m_bAgree);
    
    <span class="hljs-comment">// å•é€‰æŒ‰é’®äº¤æ¢</span>
    <span class="hljs-built_in">DDX_Radio</span>(pDX, IDC_RADIO_MALE, m_nGender);
    
    <span class="hljs-comment">// ç»„åˆæ¡†äº¤æ¢</span>
    <span class="hljs-built_in">DDX_CBIndex</span>(pDX, IDC_COMBO_STATUS, m_nStatusIndex);
    <span class="hljs-built_in">DDX_CBString</span>(pDX, IDC_COMBO_STATUS, m_strStatus);
    
    <span class="hljs-comment">// åˆ—è¡¨æ¡†äº¤æ¢</span>
    <span class="hljs-built_in">DDX_LBIndex</span>(pDX, IDC_LIST_ITEMS, m_nSelectedItem);
    
    <span class="hljs-comment">// æ§ä»¶å¯¹è±¡äº¤æ¢</span>
    <span class="hljs-built_in">DDX_Control</span>(pDX, IDC_COMBO_GENDER, m_cboGender);
}
</code></pre>
<h4 data-id="heading-41">3.2 DDXå®çš„ç¼–è¯‘æ—¶å±•å¼€</h4>
<p>ç¼–è¯‘å™¨ä¼šå°†DDXå®å±•å¼€ä¸ºå…·ä½“çš„ä»£ç ï¼Œä»¥ä¸‹æ˜¯å¯¹<code>DDX_Text</code>å®å±•å¼€çš„æ¨¡æ‹Ÿï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// DDX_Textå®çš„è¿‘ä¼¼å±•å¼€ï¼ˆæ¦‚å¿µæ€§ä»£ç ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> DDX_Text(pDX, nIDC, value) \
    do { \
        <span class="hljs-keyword">if</span> ((pDX)-&gt;m_bSaveAndValidate) { \
            <span class="hljs-comment">/* ä»æ§ä»¶è·å–æ•°æ®åˆ°å˜é‡ */</span> \
            HWND hWndCtrl = ::GetDlgItem((pDX)-&gt;m_pDlgWnd-&gt;m_hWnd, nIDC); \
            <span class="hljs-keyword">if</span> (hWndCtrl != NULL) { \
                int nLen = ::GetWindowTextLength(hWndCtrl); \
                CString strTemp; \
                ::GetWindowText(hWndCtrl, strTemp.GetBuffer(nLen), nLen + 1); \
                strTemp.ReleaseBuffer(); \
                <span class="hljs-comment">/* ç±»å‹è½¬æ¢å’Œèµ‹å€¼ */</span> \
                value = _ttoi(strTemp); <span class="hljs-comment">/* å¯¹äºintç±»å‹ */</span> \
            } \
        } <span class="hljs-keyword">else</span> { \
            <span class="hljs-comment">/* ä»å˜é‡è®¾ç½®æ•°æ®åˆ°æ§ä»¶ */</span> \
            CString strTemp; \
            strTemp.Format(_T(<span class="hljs-string">"%d"</span>), value); <span class="hljs-comment">/* å¯¹äºintç±»å‹ */</span> \
            ::SetDlgItemText((pDX)-&gt;m_pDlgWnd-&gt;m_hWnd, nIDC, strTemp); \
        } \
    } while (0)</span>
</code></pre>
<h4 data-id="heading-42">3.3 å®Œæ•´DDXæ”¯æŒçš„æ•°æ®ç±»å‹</h4>
<p>MFCä¸ºä¸åŒç±»å‹çš„æ•°æ®æä¾›äº†ä¸“é—¨çš„DDXå®ï¼š</p>













































































<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>DDXå®</th><th>ç¤ºä¾‹</th><th>é€‚ç”¨æ§ä»¶</th></tr></thead><tbody><tr><td><strong>CString</strong></td><td><code>DDX_Text</code></td><td><code>DDX_Text(pDX, IDC_EDIT, m_strValue)</code></td><td>ç¼–è¾‘æ¡†</td></tr><tr><td><strong>int</strong></td><td><code>DDX_Text</code></td><td><code>DDX_Text(pDX, IDC_EDIT, m_nValue)</code></td><td>ç¼–è¾‘æ¡†</td></tr><tr><td><strong>UINT</strong></td><td><code>DDX_Text</code></td><td><code>DDX_Text(pDX, IDC_EDIT, m_uValue)</code></td><td>ç¼–è¾‘æ¡†</td></tr><tr><td><strong>long</strong></td><td><code>DDX_Text</code></td><td><code>DDX_Text(pDX, IDC_EDIT, m_lValue)</code></td><td>ç¼–è¾‘æ¡†</td></tr><tr><td><strong>DWORD</strong></td><td><code>DDX_Text</code></td><td><code>DDX_Text(pDX, IDC_EDIT, m_dwValue)</code></td><td>ç¼–è¾‘æ¡†</td></tr><tr><td><strong>float</strong></td><td><code>DDX_Text</code></td><td><code>DDX_Text(pDX, IDC_EDIT, m_fValue)</code></td><td>ç¼–è¾‘æ¡†</td></tr><tr><td><strong>double</strong></td><td><code>DDX_Text</code></td><td><code>DDX_Text(pDX, IDC_EDIT, m_dValue)</code></td><td>ç¼–è¾‘æ¡†</td></tr><tr><td><strong>BOOL</strong></td><td><code>DDX_Check</code></td><td><code>DDX_Check(pDX, IDC_CHECK, m_bValue)</code></td><td>å¤é€‰æ¡†</td></tr><tr><td><strong>int</strong> (å•é€‰)</td><td><code>DDX_Radio</code></td><td><code>DDX_Radio(pDX, IDC_RADIO1, m_nIndex)</code></td><td>å•é€‰æŒ‰é’®ç»„</td></tr><tr><td><strong>CComboBox</strong></td><td><code>DDX_Control</code></td><td><code>DDX_Control(pDX, IDC_COMBO, m_combo)</code></td><td>ç»„åˆæ¡†å¯¹è±¡</td></tr><tr><td><strong>CListBox</strong></td><td><code>DDX_Control</code></td><td><code>DDX_Control(pDX, IDC_LIST, m_list)</code></td><td>åˆ—è¡¨æ¡†å¯¹è±¡</td></tr></tbody></table>
<h3 data-id="heading-43">å››ã€DDVï¼ˆå¯¹è¯æ¡†æ•°æ®éªŒè¯ï¼‰æœºåˆ¶è¯¦è§£</h3>
<h4 data-id="heading-44">4.1 DDVçš„å·¥ä½œåŸç†</h4>
<p>DDVåœ¨æ•°æ®äº¤æ¢çš„åŒæ—¶è¿›è¡ŒéªŒè¯ï¼Œç¡®ä¿æ•°æ®çš„æœ‰æ•ˆæ€§ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å¸¦æœ‰DDVéªŒè¯çš„DoDataExchangeç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyDialog::DoDataExchange</span><span class="hljs-params">(CDataExchange* pDX)</span>
</span>{
    CDialogEx::<span class="hljs-built_in">DoDataExchange</span>(pDX);
    
    <span class="hljs-comment">// æ•°æ®äº¤æ¢</span>
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_NAME, m_strName);
    
    <span class="hljs-comment">// æ•°æ®éªŒè¯</span>
    <span class="hljs-built_in">DDV_MaxChars</span>(pDX, m_strName, <span class="hljs-number">50</span>);  <span class="hljs-comment">// æœ€å¤š50ä¸ªå­—ç¬¦</span>
    
    <span class="hljs-comment">// æ•°å€¼äº¤æ¢ä¸éªŒè¯</span>
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_AGE, m_nAge);
    <span class="hljs-built_in">DDV_MinMaxInt</span>(pDX, m_nAge, <span class="hljs-number">0</span>, <span class="hljs-number">150</span>);  <span class="hljs-comment">// èŒƒå›´0-150</span>
    
    <span class="hljs-comment">// å­—ç¬¦ä¸²éç©ºéªŒè¯</span>
    <span class="hljs-built_in">DDV_NonEmptyString</span>(pDX, m_strName);
}
</code></pre>
<h4 data-id="heading-45">4.2 DDVéªŒè¯å¤±è´¥çš„å¤„ç†æœºåˆ¶</h4>
<p>å½“DDVéªŒè¯å¤±è´¥æ—¶ï¼ŒMFCä¼šæŠ›å‡ºå¼‚å¸¸å¹¶è‡ªåŠ¨å¤„ç†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// DDV_MinMaxIntå®çš„å†…éƒ¨å®ç°é€»è¾‘ï¼ˆæ¦‚å¿µæ€§ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> DDV_MinMaxInt(pDX, value, minVal, maxVal) \
    do { \
        <span class="hljs-keyword">if</span> ((pDX)-&gt;m_bSaveAndValidate &amp;&amp; (value <span class="hljs-string">&lt; minVal || value &gt;</span> maxVal)) { \
            <span class="hljs-comment">/* å‡†å¤‡é”™è¯¯ä¿¡æ¯ */</span> \
            CString strError; \
            strError.Format(_T(<span class="hljs-string">"æ•°å€¼å¿…é¡»åœ¨%då’Œ%dä¹‹é—´"</span>), minVal, maxVal); \
            \
            <span class="hljs-comment">/* æ˜¾ç¤ºé”™è¯¯å¯¹è¯æ¡† */</span> \
            AfxMessageBox(strError, MB_ICONEXCLAMATION); \
            \
            <span class="hljs-comment">/* æŠ›å‡ºå¼‚å¸¸åœæ­¢åç»­å¤„ç† */</span> \
            (pDX)-&gt;Fail(); \
        } \
    } while (0)</span>

<span class="hljs-comment">// CDataExchange::Fail()æ–¹æ³•çš„ç®€åŒ–å®ç°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CDataExchange::Fail</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// è®¾ç½®ç„¦ç‚¹åˆ°é—®é¢˜æ§ä»¶</span>
    <span class="hljs-keyword">if</span> (m_hWndLastControl != <span class="hljs-literal">NULL</span> &amp;&amp; ::<span class="hljs-built_in">IsWindow</span>(m_hWndLastControl))
    {
        ::<span class="hljs-built_in">SetFocus</span>(m_hWndLastControl);
    }
    
    <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸ï¼Œè¢«MFCæ¡†æ¶æ•è·</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">CUserException</span>();
}
</code></pre>
<h4 data-id="heading-46">4.3 è‡ªå®šä¹‰DDVéªŒè¯</h4>
<p>é™¤äº†å†…ç½®çš„DDVå®ï¼Œè¿˜å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰éªŒè¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è‡ªå®šä¹‰DDVéªŒè¯å®</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> DDV_Email(pDX, value) \
    do { \
        <span class="hljs-keyword">if</span> ((pDX)-&gt;m_bSaveAndValidate) { \
            <span class="hljs-keyword">if</span> (!IsValidEmail(value)) { \
                AfxMessageBox(_T(<span class="hljs-string">"è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€"</span>), \
                             MB_ICONEXCLAMATION); \
                (pDX)-&gt;Fail(); \
            } \
        } \
    } while (0)</span>

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰éªŒè¯</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyDialog::DoDataExchange</span><span class="hljs-params">(CDataExchange* pDX)</span>
</span>{
    CDialogEx::<span class="hljs-built_in">DoDataExchange</span>(pDX);
    
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_EMAIL, m_strEmail);
    <span class="hljs-built_in">DDV_Email</span>(pDX, m_strEmail);  <span class="hljs-comment">// è‡ªå®šä¹‰éªŒè¯</span>
}

<span class="hljs-comment">// ç”µå­é‚®ä»¶éªŒè¯å‡½æ•°</span>
<span class="hljs-function">BOOL <span class="hljs-title">CMyDialog::IsValidEmail</span><span class="hljs-params">(<span class="hljs-type">const</span> CString&amp; strEmail)</span>
</span>{
    <span class="hljs-comment">// ç®€å•çš„ç”µå­é‚®ä»¶éªŒè¯é€»è¾‘</span>
    <span class="hljs-type">int</span> nAtPos = strEmail.<span class="hljs-built_in">Find</span>(<span class="hljs-string">'@'</span>);
    <span class="hljs-type">int</span> nDotPos = strEmail.<span class="hljs-built_in">Find</span>(<span class="hljs-string">'.'</span>, nAtPos);
    
    <span class="hljs-keyword">return</span> (nAtPos &gt; <span class="hljs-number">0</span> &amp;&amp; nDotPos &gt; nAtPos + <span class="hljs-number">1</span> &amp;&amp; 
            nDotPos &lt; strEmail.<span class="hljs-built_in">GetLength</span>() - <span class="hljs-number">1</span>);
}
</code></pre>
<h3 data-id="heading-47">äº”ã€æ¨¡æ€ä¸éæ¨¡æ€å¯¹è¯æ¡†çš„æ·±å…¥å¯¹æ¯”</h3>
<h4 data-id="heading-48">5.1 æ¨¡æ€å¯¹è¯æ¡†çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¨¡æ€å¯¹è¯æ¡†çš„åˆ›å»ºä¸ä½¿ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::OnOpenSettings</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-function">CMyDialog <span class="hljs-title">dlg</span><span class="hljs-params">(<span class="hljs-keyword">this</span>)</span></span>;  <span class="hljs-comment">// åˆ›å»ºå¯¹è¯æ¡†å¯¹è±¡</span>
    
    <span class="hljs-comment">// è®¾ç½®åˆå§‹å€¼</span>
    dlg.m_strName = m_strCurrentName;
    dlg.m_nAge = m_nCurrentAge;
    
    <span class="hljs-comment">// æ˜¾ç¤ºæ¨¡æ€å¯¹è¯æ¡†</span>
    <span class="hljs-keyword">if</span> (dlg.<span class="hljs-built_in">DoModal</span>() == IDOK)
    {
        <span class="hljs-comment">// ç”¨æˆ·ç‚¹å‡»äº†ç¡®å®š</span>
        m_strCurrentName = dlg.m_strName;
        m_nCurrentAge = dlg.m_nAge;
        
        <span class="hljs-comment">// ä¿å­˜è®¾ç½®</span>
        <span class="hljs-built_in">SaveSettings</span>();
        
        <span class="hljs-comment">// æ›´æ–°æ˜¾ç¤º</span>
        <span class="hljs-built_in">UpdateDisplay</span>();
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// ç”¨æˆ·ç‚¹å‡»äº†å–æ¶ˆ</span>
        <span class="hljs-built_in">AfxMessageBox</span>(_T(<span class="hljs-string">"è®¾ç½®æœªä¿å­˜"</span>));
    }
    
    <span class="hljs-comment">// å¯¹è¯æ¡†å¯¹è±¡è‡ªåŠ¨é”€æ¯</span>
}
</code></pre>
<h4 data-id="heading-49">5.2 éæ¨¡æ€å¯¹è¯æ¡†çš„ç‰¹æ®Šç®¡ç†</h4>
<p>éæ¨¡æ€å¯¹è¯æ¡†éœ€è¦ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// éæ¨¡æ€å¯¹è¯æ¡†çš„åˆ›å»ºä¸ç®¡ç†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CMyView</span> : <span class="hljs-keyword">public</span> CView
{
<span class="hljs-keyword">private</span>:
    CMyModelessDialog* m_pModelessDlg;  <span class="hljs-comment">// æŒ‡é’ˆæˆå‘˜</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OnOpenModelessDialog</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-comment">// é˜²æ­¢é‡å¤æ‰“å¼€</span>
        <span class="hljs-keyword">if</span> (m_pModelessDlg != <span class="hljs-literal">NULL</span> &amp;&amp; m_pModelessDlg-&gt;<span class="hljs-built_in">GetSafeHwnd</span>() != <span class="hljs-literal">NULL</span>)
        {
            m_pModelessDlg-&gt;<span class="hljs-built_in">SetActiveWindow</span>();
            m_pModelessDlg-&gt;<span class="hljs-built_in">ShowWindow</span>(SW_SHOW);
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// åˆ›å»ºéæ¨¡æ€å¯¹è¯æ¡†</span>
        m_pModelessDlg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">CMyModelessDialog</span>(<span class="hljs-keyword">this</span>);
        
        <span class="hljs-comment">// å¿…é¡»æŒ‡å®šWS_VISIBLEé£æ ¼</span>
        <span class="hljs-keyword">if</span> (!m_pModelessDlg-&gt;<span class="hljs-built_in">Create</span>(IDD_MYDIALOG, <span class="hljs-keyword">this</span>))
        {
            <span class="hljs-keyword">delete</span> m_pModelessDlg;
            m_pModelessDlg = <span class="hljs-literal">NULL</span>;
            <span class="hljs-built_in">AfxMessageBox</span>(_T(<span class="hljs-string">"åˆ›å»ºå¯¹è¯æ¡†å¤±è´¥"</span>));
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// æ˜¾ç¤ºå¯¹è¯æ¡†</span>
        m_pModelessDlg-&gt;<span class="hljs-built_in">ShowWindow</span>(SW_SHOW);
    }
    
    <span class="hljs-comment">// å¯¹è¯æ¡†å…³é—­æ—¶çš„æ¸…ç†</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OnModelessDialogClosed</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">if</span> (m_pModelessDlg != <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-comment">// æ³¨æ„ï¼šä¸èƒ½è°ƒç”¨deleteï¼Œå¯¹è¯æ¡†è‡ªå·±ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</span>
            m_pModelessDlg = <span class="hljs-literal">NULL</span>;
        }
    }
};

<span class="hljs-comment">// éæ¨¡æ€å¯¹è¯æ¡†ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CMyModelessDialog</span> : <span class="hljs-keyword">public</span> CDialogEx
{
<span class="hljs-keyword">private</span>:
    CMyView* m_pParentView;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">CMyModelessDialog</span>(CMyView* pParent) 
        : <span class="hljs-built_in">CDialogEx</span>(IDD_MYDIALOG, pParent), <span class="hljs-built_in">m_pParentView</span>(pParent) {}
    
    <span class="hljs-comment">// é‡å†™OnOKå’ŒOnCancel</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnOK</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">UpdateData</span>(TRUE))
            <span class="hljs-keyword">return</span>;
        
        <span class="hljs-comment">// é€šçŸ¥çˆ¶è§†å›¾</span>
        <span class="hljs-keyword">if</span> (m_pParentView != <span class="hljs-literal">NULL</span>)
        {
            m_pParentView-&gt;<span class="hljs-built_in">ApplyDialogSettings</span>(m_strName, m_nAge);
        }
        
        <span class="hljs-comment">// ä¸è°ƒç”¨åŸºç±»OnOKï¼ˆä¸å…³é—­å¯¹è¯æ¡†ï¼‰</span>
        <span class="hljs-comment">// è€Œæ˜¯éšè—æˆ–æ‰§è¡Œå…¶ä»–æ“ä½œ</span>
        <span class="hljs-built_in">ShowWindow</span>(SW_HIDE);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnCancel</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-comment">// é€šçŸ¥çˆ¶è§†å›¾å¯¹è¯æ¡†å·²å…³é—­</span>
        <span class="hljs-keyword">if</span> (m_pParentView != <span class="hljs-literal">NULL</span>)
        {
            m_pParentView-&gt;<span class="hljs-built_in">OnModelessDialogClosed</span>();
        }
        
        <span class="hljs-comment">// é”€æ¯çª—å£</span>
        <span class="hljs-built_in">DestroyWindow</span>();
    }
    
    <span class="hljs-comment">// é‡å†™PostNcDestroyä»¥åˆ é™¤å¯¹è±¡</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PostNcDestroy</span><span class="hljs-params">()</span>
    </span>{
        CDialogEx::<span class="hljs-built_in">PostNcDestroy</span>();
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>;  <span class="hljs-comment">// è‡ªæˆ‘åˆ é™¤</span>
    }
    
    <span class="hljs-built_in">DECLARE_MESSAGE_MAP</span>()
};
</code></pre>
<h3 data-id="heading-50">å…­ã€å±æ€§è¡¨ï¼ˆProperty Sheetï¼‰ä¸å±æ€§é¡µï¼ˆProperty Pageï¼‰</h3>
<p>å¯¹äºå¤æ‚çš„è®¾ç½®å¯¹è¯æ¡†ï¼ŒMFCæä¾›äº†å±æ€§è¡¨æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å±æ€§é¡µåŸºç±»çš„ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CGeneralPage</span> : <span class="hljs-keyword">public</span> CPropertyPage
{
    <span class="hljs-built_in">DECLARE_DYNCREATE</span>(CGeneralPage)
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">CGeneralPage</span>() : <span class="hljs-built_in">CPropertyPage</span>(IDD_GENERAL_PAGE)
    {
        m_psp.dwFlags |= PSP_USETITLE;
        m_psp.pszTitle = _T(<span class="hljs-string">"å¸¸è§„è®¾ç½®"</span>);
    }
    
    <span class="hljs-comment">// æ•°æ®æˆå‘˜</span>
    CString m_strUserName;
    CString m_strCompany;
    BOOL m_bAutoSave;
    
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">DoDataExchange</span><span class="hljs-params">(CDataExchange* pDX)</span>
    </span>{
        CPropertyPage::<span class="hljs-built_in">DoDataExchange</span>(pDX);
        <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_USERNAME, m_strUserName);
        <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_COMPANY, m_strCompany);
        <span class="hljs-built_in">DDX_Check</span>(pDX, IDC_CHECK_AUTOSAVE, m_bAutoSave);
    }
    
    <span class="hljs-comment">// éªŒè¯</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">OnApply</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">UpdateData</span>(TRUE))
            <span class="hljs-keyword">return</span> FALSE;
            
        <span class="hljs-comment">// åº”ç”¨è®¾ç½®</span>
        <span class="hljs-built_in">AfxGetApp</span>()-&gt;<span class="hljs-built_in">WriteProfileString</span>(_T(<span class="hljs-string">"Settings"</span>), _T(<span class="hljs-string">"UserName"</span>), m_strUserName);
        
        <span class="hljs-keyword">return</span> CPropertyPage::<span class="hljs-built_in">OnApply</span>();
    }
};

<span class="hljs-comment">// å±æ€§è¡¨çš„åˆ›å»ºä¸ä½¿ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyApp::OnSettings</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// åˆ›å»ºå±æ€§è¡¨</span>
    <span class="hljs-function">CPropertySheet <span class="hljs-title">sheet</span><span class="hljs-params">(_T(<span class="hljs-string">"åº”ç”¨ç¨‹åºè®¾ç½®"</span>))</span></span>;
    
    <span class="hljs-comment">// æ·»åŠ å±æ€§é¡µ</span>
    CGeneralPage pageGeneral;
    CAdvancedPage pageAdvanced;
    
    sheet.<span class="hljs-built_in">AddPage</span>(&amp;pageGeneral);
    sheet.<span class="hljs-built_in">AddPage</span>(&amp;pageAdvanced);
    
    <span class="hljs-comment">// è®¾ç½®åˆå§‹å€¼</span>
    pageGeneral.m_strUserName = <span class="hljs-built_in">GetCurrentUserName</span>();
    pageAdvanced.m_nTimeout = <span class="hljs-built_in">GetTimeoutValue</span>();
    
    <span class="hljs-comment">// æ˜¾ç¤ºæ¨¡æ€å±æ€§è¡¨</span>
    <span class="hljs-keyword">if</span> (sheet.<span class="hljs-built_in">DoModal</span>() == IDOK)
    {
        <span class="hljs-comment">// ä¿å­˜æ‰€æœ‰è®¾ç½®</span>
        <span class="hljs-built_in">SaveSettings</span>(pageGeneral, pageAdvanced);
    }
}
</code></pre>
<h3 data-id="heading-51">ä¸ƒã€å¯¹è¯æ¡†æ•°æ®äº¤æ¢çš„é«˜çº§æŠ€å·§</h3>
<h4 data-id="heading-52">7.1 åŠ¨æ€æ§ä»¶çš„æ•°æ®äº¤æ¢</h4>
<p>å¯¹äºåŠ¨æ€åˆ›å»ºçš„æ§ä»¶ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†DDXï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CDynamicDialog</span> : <span class="hljs-keyword">public</span> CDialogEx
{
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// åŠ¨æ€æ§ä»¶IDèµ·å§‹å€¼ï¼ˆå¿…é¡»å¤§äºç³»ç»ŸIDï¼‰</span>
    <span class="hljs-keyword">enum</span> { IDC_DYNAMIC_START = <span class="hljs-number">0x8000</span> };
    
    <span class="hljs-comment">// åŠ¨æ€æ§ä»¶æ•°ç»„</span>
    CEdit* m_pDynamicEdits[<span class="hljs-number">10</span>];
    CStatic* m_pDynamicLabels[<span class="hljs-number">10</span>];
    <span class="hljs-type">int</span> m_nDynamicValues[<span class="hljs-number">10</span>];
    <span class="hljs-type">int</span> m_nControlCount;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">DoDataExchange</span><span class="hljs-params">(CDataExchange* pDX)</span>
    </span>{
        CDialogEx::<span class="hljs-built_in">DoDataExchange</span>(pDX);
        
        <span class="hljs-comment">// åŠ¨æ€æ§ä»¶çš„DDX</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m_nControlCount; i++)
        {
            <span class="hljs-keyword">if</span> (m_pDynamicEdits[i] != <span class="hljs-literal">NULL</span> &amp;&amp; m_pDynamicEdits[i]-&gt;<span class="hljs-built_in">GetSafeHwnd</span>() != <span class="hljs-literal">NULL</span>)
            {
                <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_DYNAMIC_START + i, m_nDynamicValues[i]);
            }
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CreateDynamicControls</span><span class="hljs-params">(<span class="hljs-type">int</span> nCount)</span>
    </span>{
        m_nControlCount = nCount;
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; nCount; i++)
        {
            <span class="hljs-comment">// åˆ›å»ºæ ‡ç­¾</span>
            m_pDynamicLabels[i] = <span class="hljs-keyword">new</span> CStatic;
            m_pDynamicLabels[i]-&gt;<span class="hljs-built_in">Create</span>(_T(<span class="hljs-string">"åŠ¨æ€æ§ä»¶ "</span>) + <span class="hljs-built_in">CString</span>(<span class="hljs-built_in">char</span>(<span class="hljs-string">'A'</span> + i)),
                                       WS_CHILD | WS_VISIBLE,
                                       <span class="hljs-built_in">CRect</span>(<span class="hljs-number">10</span>, <span class="hljs-number">30</span> + i * <span class="hljs-number">30</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span> + i * <span class="hljs-number">30</span>),
                                       <span class="hljs-keyword">this</span>);
            
            <span class="hljs-comment">// åˆ›å»ºç¼–è¾‘æ¡†</span>
            m_pDynamicEdits[i] = <span class="hljs-keyword">new</span> CEdit;
            m_pDynamicEdits[i]-&gt;<span class="hljs-built_in">Create</span>(WS_CHILD | WS_VISIBLE | WS_BORDER | ES_AUTOHSCROLL,
                                      <span class="hljs-built_in">CRect</span>(<span class="hljs-number">110</span>, <span class="hljs-number">30</span> + i * <span class="hljs-number">30</span>, <span class="hljs-number">210</span>, <span class="hljs-number">50</span> + i * <span class="hljs-number">30</span>),
                                      <span class="hljs-keyword">this</span>, IDC_DYNAMIC_START + i);
        }
    }
};
</code></pre>
<h4 data-id="heading-53">7.2 æ•°æ®äº¤æ¢çš„æ€§èƒ½ä¼˜åŒ–</h4>
<p>å¯¹äºåŒ…å«å¤§é‡æ§ä»¶çš„å¯¹è¯æ¡†ï¼Œå¯ä»¥ä¼˜åŒ–DDXæ€§èƒ½ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">COptimizedDialog::DoDataExchange</span><span class="hljs-params">(CDataExchange* pDX)</span>
</span>{
    CDialogEx::<span class="hljs-built_in">DoDataExchange</span>(pDX);
    
    <span class="hljs-comment">// ä½¿ç”¨æ¡ä»¶ç¼–è¯‘æˆ–æ ‡å¿—æ§åˆ¶DDXèŒƒå›´</span>
    <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> FULL_DATA_EXCHANGE</span>
    <span class="hljs-comment">// å®Œæ•´çš„æ•°æ®äº¤æ¢</span>
    <span class="hljs-built_in">ExchangeAllData</span>(pDX);
    <span class="hljs-meta">#<span class="hljs-keyword">else</span></span>
    <span class="hljs-comment">// éƒ¨åˆ†æ•°æ®äº¤æ¢ï¼ˆæ ¹æ®éœ€æ±‚ï¼‰</span>
    <span class="hljs-keyword">if</span> (pDX-&gt;m_bSaveAndValidate)
    {
        <span class="hljs-comment">// åªéªŒè¯å¿…è¦å­—æ®µ</span>
        <span class="hljs-built_in">ExchangeRequiredData</span>(pDX);
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// åªæ›´æ–°å¯è§å­—æ®µ</span>
        <span class="hljs-built_in">ExchangeVisibleData</span>(pDX);
    }
    <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
}

<span class="hljs-comment">// åˆ†ç»„æ•°æ®äº¤æ¢ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">COptimizedDialog::ExchangePersonalData</span><span class="hljs-params">(CDataExchange* pDX)</span>
</span>{
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_NAME, m_strName);
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_AGE, m_nAge);
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_PHONE, m_strPhone);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">COptimizedDialog::ExchangeWorkData</span><span class="hljs-params">(CDataExchange* pDX)</span>
</span>{
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_COMPANY, m_strCompany);
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_POSITION, m_strPosition);
}
</code></pre>
<h3 data-id="heading-54">å…«ã€å¯¹è¯æ¡†ä¸æ–‡æ¡£/è§†å›¾æ¶æ„çš„é›†æˆ</h3>
<p>å¯¹è¯æ¡†å¯ä»¥ä½œä¸ºæ–‡æ¡£/è§†å›¾æ¶æ„çš„è¡¥å……ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœ¨æ–‡æ¡£/è§†å›¾åº”ç”¨ä¸­ä½¿ç”¨å¯¹è¯æ¡†</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::OnEditPreferences</span><span class="hljs-params">()</span>
</span>{
    CPreferencesDialog dlg;
    
    <span class="hljs-comment">// ä»æ–‡æ¡£è·å–å½“å‰è®¾ç½®</span>
    CMyDocument* pDoc = <span class="hljs-built_in">GetDocument</span>();
    dlg.m_strDefaultPath = pDoc-&gt;<span class="hljs-built_in">GetDefaultPath</span>();
    dlg.m_nAutoSaveInterval = pDoc-&gt;<span class="hljs-built_in">GetAutoSaveInterval</span>();
    
    <span class="hljs-keyword">if</span> (dlg.<span class="hljs-built_in">DoModal</span>() == IDOK)
    {
        <span class="hljs-comment">// æ›´æ–°æ–‡æ¡£è®¾ç½®</span>
        pDoc-&gt;<span class="hljs-built_in">SetDefaultPath</span>(dlg.m_strDefaultPath);
        pDoc-&gt;<span class="hljs-built_in">SetAutoSaveInterval</span>(dlg.m_nAutoSaveInterval);
        
        <span class="hljs-comment">// æ ‡è®°æ–‡æ¡£ä¸ºå·²ä¿®æ”¹</span>
        pDoc-&gt;<span class="hljs-built_in">SetModifiedFlag</span>(TRUE);
        
        <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰è§†å›¾</span>
        pDoc-&gt;<span class="hljs-built_in">UpdateAllViews</span>(<span class="hljs-keyword">this</span>);
    }
}

<span class="hljs-comment">// å¯¹è¯æ¡†æ•°æ®å˜åŒ–å®æ—¶æ›´æ–°è§†å›¾</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CRealTimeDialog::OnChangeEditValue</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// è·å–å½“å‰å€¼</span>
    <span class="hljs-built_in">UpdateData</span>(TRUE);
    
    <span class="hljs-comment">// å®æ—¶æ›´æ–°é¢„è§ˆ</span>
    CPreviewDialog* pPreview = <span class="hljs-built_in">GetPreviewWindow</span>();
    <span class="hljs-keyword">if</span> (pPreview != <span class="hljs-literal">NULL</span>)
    {
        pPreview-&gt;<span class="hljs-built_in">UpdatePreview</span>(m_nValue, m_strText);
    }
}
</code></pre>
<h3 data-id="heading-55">ä¹ã€å¸¸è§é—®é¢˜ä¸è°ƒè¯•æŠ€å·§</h3>
<h4 data-id="heading-56">9.1 DDX/DDVå¸¸è§é—®é¢˜æ’æŸ¥</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è°ƒè¯•DDXé—®é¢˜çš„æŠ€å·§</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyDialog::DoDataExchange</span><span class="hljs-params">(CDataExchange* pDX)</span>
</span>{
    <span class="hljs-built_in">TRACE</span>(_T(<span class="hljs-string">"DoDataExchange called, m_bSaveAndValidate = %d\n"</span>), 
          pDX-&gt;m_bSaveAndValidate);
    
    CDialogEx::<span class="hljs-built_in">DoDataExchange</span>(pDX);
    
    <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _DEBUG</span>
    <span class="hljs-comment">// è°ƒè¯•æ¨¡å¼ä¸‹æ·»åŠ é¢å¤–æ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (pDX-&gt;m_bSaveAndValidate)
    {
        <span class="hljs-comment">// æ£€æŸ¥æ§ä»¶æ˜¯å¦å­˜åœ¨</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">GetDlgItem</span>(IDC_EDIT_NAME) == <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-built_in">TRACE0</span>(<span class="hljs-string">"é”™è¯¯: IDC_EDIT_NAME æ§ä»¶ä¸å­˜åœ¨!\n"</span>);
            <span class="hljs-built_in">ASSERT</span>(FALSE);
        }
    }
    <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
    
    <span class="hljs-built_in">DDX_Text</span>(pDX, IDC_EDIT_NAME, m_strName);
    
    <span class="hljs-built_in">TRACE</span>(_T(<span class="hljs-string">"m_strName = %s\n"</span>), (LPCTSTR)m_strName);
}
</code></pre>
<h4 data-id="heading-57">9.2 å†…å­˜æ³„æ¼æ£€æµ‹</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ£€æµ‹å¯¹è¯æ¡†ç›¸å…³çš„å†…å­˜æ³„æ¼</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _DEBUG</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyDialog::OnDestroy</span><span class="hljs-params">()</span>
</span>{
    CDialogEx::<span class="hljs-built_in">OnDestroy</span>();
    
    <span class="hljs-comment">// æ£€æŸ¥åŠ¨æ€åˆ›å»ºçš„æ§ä»¶æ˜¯å¦è¢«æ­£ç¡®åˆ é™¤</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m_nControlCount; i++)
    {
        <span class="hljs-comment">// è¿™äº›æŒ‡é’ˆåº”è¯¥åœ¨PostNcDestroyä¸­åˆ é™¤</span>
        <span class="hljs-built_in">ASSERT</span>(m_pDynamicEdits[i] == <span class="hljs-literal">NULL</span>);
    }
}

<span class="hljs-comment">// é‡å†™PostNcDestroyç¡®ä¿èµ„æºæ¸…ç†</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyModelessDialog::PostNcDestroy</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// æ¸…ç†åŠ¨æ€æ§ä»¶</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m_nControlCount; i++)
    {
        <span class="hljs-keyword">if</span> (m_pDynamicEdits[i] != <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-keyword">delete</span> m_pDynamicEdits[i];
            m_pDynamicEdits[i] = <span class="hljs-literal">NULL</span>;
        }
    }
    
    CDialogEx::<span class="hljs-built_in">PostNcDestroy</span>();
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>;
}
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<h3 data-id="heading-58">åã€ç°ä»£æ›¿ä»£æ–¹æ¡ˆä¸æ¶æ„å¯ç¤º</h3>
<p>è™½ç„¶MFCå¯¹è¯æ¡†æœºåˆ¶æœ‰å…¶å†å²å±€é™æ€§ï¼Œä½†å…¶è®¾è®¡æ€æƒ³å¯¹ç°ä»£UIæ¡†æ¶ä»æœ‰å½±å“ï¼š</p>
<ol>
<li><strong>æ•°æ®ç»‘å®šæ¨¡å¼</strong>ï¼šWPF/XAMLçš„æ•°æ®ç»‘å®šæ˜¯DDXçš„è¿›åŒ–ç‰ˆæœ¬</li>
<li><strong>MVVMæ¨¡å¼</strong>ï¼šViewModelä½œä¸ºæ•°æ®ä¸­ä»‹ï¼Œç±»ä¼¼äºMFCå¯¹è¯æ¡†çš„æ•°æ®å±‚</li>
<li><strong>å“åº”å¼è¡¨å•</strong>ï¼šAngular/Reactä¸­çš„è¡¨å•éªŒè¯æœºåˆ¶å€Ÿé‰´äº†DDVçš„æ€æƒ³</li>
</ol>
<p><strong>DDX/DDVæœºåˆ¶çš„ç°ä»£å¯ç¤º</strong>ï¼š</p>
<ul>
<li>å£°æ˜å¼æ•°æ®ç»‘å®šä¼˜äºå‘½ä»¤å¼æ•°æ®æ“ä½œ</li>
<li>æ•°æ®éªŒè¯åº”è¯¥ä¸UIé€»è¾‘åˆ†ç¦»</li>
<li>ç±»å‹å®‰å…¨æ˜¯æ¡†æ¶è®¾è®¡çš„é‡è¦ç›®æ ‡</li>
<li>å¼€å‘è€…ä½“éªŒï¼ˆDXï¼‰ç›´æ¥å½±å“æ¡†æ¶çš„é‡‡ç”¨ç‡</li>
</ul>
<p>MFCçš„å¯¹è¯æ¡†å’ŒDDX/DDVæœºåˆ¶å±•ç¤ºäº†å¦‚ä½•åœ¨C++ç¯å¢ƒä¸­å®ç°ç±»å‹å®‰å…¨çš„UIæ•°æ®ç»‘å®šã€‚è™½ç„¶å…·ä½“å®ç°å·²æ˜¾é™ˆæ—§ï¼Œä½†å…¶æ ¸å¿ƒæ€æƒ³â€”â€”é€šè¿‡å…ƒç¼–ç¨‹ç®€åŒ–å¼€å‘è€…å·¥ä½œã€ç¡®ä¿æ•°æ®å®Œæ•´æ€§ã€æä¾›ä¸€è‡´çš„ç¼–ç¨‹æ¨¡å‹â€”â€”ä»ç„¶æ˜¯ä¼˜ç§€æ¡†æ¶è®¾è®¡çš„é‡è¦åŸåˆ™ã€‚</p>
<h2 data-id="heading-59">ç¬¬å››ç« ï¼šMFCå›¾å½¢è®¾å¤‡æ¥å£(GDI)ç¼–ç¨‹â€”â€”Windowså›¾å½¢æ¸²æŸ“çš„æ ¸å¿ƒå¼•æ“</h2>
<h3 data-id="heading-60">ä¸€ã€GDIç³»ç»Ÿæ¶æ„ï¼šä»ç¡¬ä»¶æŠ½è±¡åˆ°åº”ç”¨ç¨‹åº</h3>
<p>Windows GDIï¼ˆGraphics Device Interfaceï¼‰æ˜¯Windowsæ“ä½œç³»ç»Ÿçš„å›¾å½¢æ ¸å¿ƒå­ç³»ç»Ÿï¼ŒMFCé€šè¿‡CDCç±»åŠå…¶æ´¾ç”Ÿç±»å¯¹å…¶è¿›è¡Œé¢å‘å¯¹è±¡å°è£…ã€‚ç†è§£GDIçš„å±‚æ¬¡ç»“æ„æ˜¯æŒæ¡MFCç»˜å›¾çš„åŸºç¡€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c729af5b21c74643a2c392c3667275b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765794519&amp;x-signature=65LtXjXR43RYb9XFc%2BGT1dQD%2BXM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-61">äºŒã€è®¾å¤‡ä¸Šä¸‹æ–‡(CDC)çš„æ·±å…¥è§£æ</h3>
<h4 data-id="heading-62">2.1 CDCç±»çš„åŸºæœ¬åŸç†</h4>
<p>è®¾å¤‡ä¸Šä¸‹æ–‡æ˜¯GDIçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»£è¡¨äº†ç»˜å›¾è¡¨é¢çš„æŠ½è±¡ï¼ŒåŒ…å«ç»˜å›¾æ‰€éœ€çš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// CDCç±»çš„å…³é”®å†…éƒ¨ç»“æ„ï¼ˆæ¦‚å¿µæ€§ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CDC</span> : <span class="hljs-keyword">public</span> CObject
{
<span class="hljs-keyword">protected</span>:
    HDC m_hDC;                 <span class="hljs-comment">// Windowsè®¾å¤‡ä¸Šä¸‹æ–‡å¥æŸ„</span>
    HDC m_hAttribDC;           <span class="hljs-comment">// å±æ€§DCï¼ˆç”¨äºæ‰“å°ç­‰ï¼‰</span>
    BOOL m_bPrinting;          <span class="hljs-comment">// æ˜¯å¦ä¸ºæ‰“å°DC</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ„é€ å‡½æ•°ä¸ææ„å‡½æ•°</span>
    <span class="hljs-built_in">CDC</span>();
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">CDC</span>();
    
    <span class="hljs-comment">// è®¾å¤‡ä¸Šä¸‹æ–‡æ“ä½œ</span>
    <span class="hljs-function">BOOL <span class="hljs-title">Attach</span><span class="hljs-params">(HDC hDC)</span></span>;      <span class="hljs-comment">// å…³è”ç°æœ‰HDC</span>
    <span class="hljs-function">HDC <span class="hljs-title">Detach</span><span class="hljs-params">()</span></span>;              <span class="hljs-comment">// åˆ†ç¦»HDC</span>
    <span class="hljs-function">HDC <span class="hljs-title">GetSafeHdc</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;    <span class="hljs-comment">// å®‰å…¨è·å–HDC</span>
    
    <span class="hljs-comment">// ç»˜å›¾çŠ¶æ€ç®¡ç†</span>
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">SaveDC</span><span class="hljs-params">()</span></span>;              <span class="hljs-comment">// ä¿å­˜DCçŠ¶æ€</span>
    <span class="hljs-function">BOOL <span class="hljs-title">RestoreDC</span><span class="hljs-params">(<span class="hljs-type">int</span> nSavedDC)</span></span>; <span class="hljs-comment">// æ¢å¤DCçŠ¶æ€</span>
    
    <span class="hljs-comment">// åæ ‡ä¸æ˜ å°„æ¨¡å¼</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> CPoint <span class="hljs-title">GetViewportOrg</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> CSize <span class="hljs-title">GetViewportExt</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">int</span> <span class="hljs-title">SetMapMode</span><span class="hljs-params">(<span class="hljs-type">int</span> nMapMode)</span></span>;
    
    <span class="hljs-comment">// ç»˜å›¾æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">LineTo</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">Rectangle</span><span class="hljs-params">(<span class="hljs-type">int</span> x1, <span class="hljs-type">int</span> y1, <span class="hljs-type">int</span> x2, <span class="hljs-type">int</span> y2)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">Ellipse</span><span class="hljs-params">(<span class="hljs-type">int</span> x1, <span class="hljs-type">int</span> y1, <span class="hljs-type">int</span> x2, <span class="hljs-type">int</span> y2)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BOOL <span class="hljs-title">TextOut</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, LPCTSTR lpszString, <span class="hljs-type">int</span> nCount)</span></span>;
    
    <span class="hljs-comment">// GDIå¯¹è±¡ç®¡ç†</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> CGdiObject* <span class="hljs-title">SelectStockObject</span><span class="hljs-params">(<span class="hljs-type">int</span> nIndex)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> CGdiObject* <span class="hljs-title">SelectObject</span><span class="hljs-params">(CGdiObject* pObject)</span></span>;
    
    <span class="hljs-comment">// è®¾å¤‡èƒ½åŠ›æŸ¥è¯¢</span>
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetDeviceCaps</span><span class="hljs-params">(<span class="hljs-type">int</span> nIndex)</span> <span class="hljs-type">const</span></span>;
    
    <span class="hljs-built_in">DECLARE_DYNAMIC</span>(CDC)
};
</code></pre>
<h4 data-id="heading-63">2.2 ä¸åŒCDCæ´¾ç”Ÿç±»çš„ä½¿ç”¨åœºæ™¯</h4>
<p>MFCæä¾›äº†å¤šç§CDCæ´¾ç”Ÿç±»ä»¥é€‚åº”ä¸åŒç»˜å›¾éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// 1. CPaintDC - ç”¨äºWM_PAINTæ¶ˆæ¯å¤„ç†</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::OnPaint</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-function">CPaintDC <span class="hljs-title">dc</span><span class="hljs-params">(<span class="hljs-keyword">this</span>)</span></span>; <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨BeginPaint</span>
    
    <span class="hljs-comment">// è·å–æ— æ•ˆåŒºåŸŸ</span>
    CRect rectUpdate;
    dc.<span class="hljs-built_in">GetClipBox</span>(&amp;rectUpdate);
    
    <span class="hljs-comment">// æ‰§è¡Œç»˜å›¾æ“ä½œ</span>
    <span class="hljs-built_in">OnDraw</span>(&amp;dc); <span class="hljs-comment">// é€šå¸¸è°ƒç”¨OnDrawè¿›è¡Œå®é™…ç»˜åˆ¶</span>
    
    <span class="hljs-comment">// ææ„æ—¶è‡ªåŠ¨è°ƒç”¨EndPaint</span>
}

<span class="hljs-comment">// 2. CClientDC - ç”¨äºå®¢æˆ·åŒºå³æ—¶ç»˜å›¾</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::OnMouseMove</span><span class="hljs-params">(UINT nFlags, CPoint point)</span>
</span>{
    <span class="hljs-keyword">if</span> (m_bDrawing)
    {
        <span class="hljs-function">CClientDC <span class="hljs-title">dc</span><span class="hljs-params">(<span class="hljs-keyword">this</span>)</span></span>; <span class="hljs-comment">// è·å–å®¢æˆ·åŒºDC</span>
        
        <span class="hljs-comment">// å®æ—¶ç»˜åˆ¶åé¦ˆ</span>
        dc.<span class="hljs-built_in">MoveTo</span>(m_ptLastPos);
        dc.<span class="hljs-built_in">LineTo</span>(point);
        
        m_ptLastPos = point;
    }
    
    CView::<span class="hljs-built_in">OnMouseMove</span>(nFlags, point);
}

<span class="hljs-comment">// 3. CWindowDC - ç»˜åˆ¶æ•´ä¸ªçª—å£ï¼ˆåŒ…æ‹¬éå®¢æˆ·åŒºï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyFrameWnd::OnDrawBorder</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-function">CWindowDC <span class="hljs-title">dc</span><span class="hljs-params">(<span class="hljs-keyword">this</span>)</span></span>; <span class="hljs-comment">// è·å–æ•´ä¸ªçª—å£DC</span>
    
    <span class="hljs-comment">// ç»˜åˆ¶è‡ªå®šä¹‰çª—å£è¾¹æ¡†</span>
    CRect rectWindow;
    <span class="hljs-built_in">GetWindowRect</span>(&amp;rectWindow);
    
    <span class="hljs-comment">// è½¬æ¢ä¸ºå®¢æˆ·åŒºåæ ‡</span>
    <span class="hljs-built_in">ScreenToClient</span>(&amp;rectWindow);
    
    <span class="hljs-comment">// ç»˜åˆ¶è¾¹æ¡†</span>
    <span class="hljs-function">CPen <span class="hljs-title">pen</span><span class="hljs-params">(PS_SOLID, <span class="hljs-number">3</span>, RGB(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))</span></span>;
    dc.<span class="hljs-built_in">SelectObject</span>(&amp;pen);
    dc.<span class="hljs-built_in">SelectStockObject</span>(NULL_BRUSH);
    dc.<span class="hljs-built_in">Rectangle</span>(rectWindow);
}

<span class="hljs-comment">// 4. CMetaFileDC - åˆ›å»ºWindowså›¾å…ƒæ–‡ä»¶</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::CreateMetaFile</span><span class="hljs-params">()</span>
</span>{
    CMetaFileDC dcMeta;
    
    <span class="hljs-comment">// åˆ›å»ºå›¾å…ƒæ–‡ä»¶DC</span>
    <span class="hljs-keyword">if</span> (dcMeta.<span class="hljs-built_in">Create</span>())
    {
        <span class="hljs-comment">// åœ¨å›¾å…ƒæ–‡ä»¶ä¸­è®°å½•ç»˜å›¾å‘½ä»¤</span>
        dcMeta.<span class="hljs-built_in">SetMapMode</span>(MM_ANISOTROPIC);
        dcMeta.<span class="hljs-built_in">SetWindowExt</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>);
        dcMeta.<span class="hljs-built_in">SetViewportExt</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>);
        
        <span class="hljs-comment">// è®°å½•ç»˜å›¾æ“ä½œ</span>
        dcMeta.<span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">500</span>, <span class="hljs-number">500</span>);
        dcMeta.<span class="hljs-built_in">Ellipse</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">400</span>, <span class="hljs-number">400</span>);
        
        <span class="hljs-comment">// å…³é—­å›¾å…ƒæ–‡ä»¶</span>
        HMETAFILE hMetaFile = dcMeta.<span class="hljs-built_in">Close</span>();
        
        <span class="hljs-keyword">if</span> (hMetaFile != <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-comment">// å¯ä»¥ä¿å­˜æˆ–å›æ”¾å›¾å…ƒæ–‡ä»¶</span>
            <span class="hljs-function">CClientDC <span class="hljs-title">dc</span><span class="hljs-params">(<span class="hljs-keyword">this</span>)</span></span>;
            dc.<span class="hljs-built_in">PlayMetaFile</span>(hMetaFile);
            
            <span class="hljs-comment">// åˆ é™¤å›¾å…ƒæ–‡ä»¶å¥æŸ„</span>
            ::<span class="hljs-built_in">DeleteMetaFile</span>(hMetaFile);
        }
    }
}
</code></pre>
<h3 data-id="heading-64">ä¸‰ã€GDIå¯¹è±¡ç®¡ç†ä¸èµ„æºç”Ÿå‘½å‘¨æœŸ</h3>
<h4 data-id="heading-65">3.1 GDIå¯¹è±¡çš„åŸºæœ¬ä½¿ç”¨æ¨¡å¼</h4>
<p>æ­£ç¡®çš„GDIå¯¹è±¡ç®¡ç†æ˜¯é˜²æ­¢èµ„æºæ³„æ¼çš„å…³é”®ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::OnDraw</span><span class="hljs-params">(CDC* pDC)</span>
</span>{
    <span class="hljs-comment">// 1. åˆ›å»ºGDIå¯¹è±¡</span>
    <span class="hljs-function">CPen <span class="hljs-title">newPen</span><span class="hljs-params">(PS_SOLID, <span class="hljs-number">2</span>, RGB(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>))</span></span>;
    <span class="hljs-function">CBrush <span class="hljs-title">newBrush</span><span class="hljs-params">(RGB(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>))</span></span>;
    CFont newFont;
    
    <span class="hljs-comment">// åˆ›å»ºå­—ä½“</span>
    LOGFONT lf = {<span class="hljs-number">0</span>};
    lf.lfHeight = <span class="hljs-number">-16</span>;
    lf.lfWeight = FW_BOLD;
    <span class="hljs-built_in">lstrcpy</span>(lf.lfFaceName, _T(<span class="hljs-string">"Arial"</span>));
    newFont.<span class="hljs-built_in">CreateFontIndirect</span>(&amp;lf);
    
    <span class="hljs-comment">// 2. ä¿å­˜æ—§å¯¹è±¡å¹¶é€‰å…¥æ–°å¯¹è±¡</span>
    CPen* pOldPen = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;newPen);
    CBrush* pOldBrush = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;newBrush);
    CFont* pOldFont = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;newFont);
    
    <span class="hljs-comment">// 3. æ‰§è¡Œç»˜å›¾æ“ä½œ</span>
    pDC-&gt;<span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">200</span>, <span class="hljs-number">150</span>);
    pDC-&gt;<span class="hljs-built_in">Ellipse</span>(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>, <span class="hljs-number">150</span>, <span class="hljs-number">100</span>);
    pDC-&gt;<span class="hljs-built_in">TextOut</span>(<span class="hljs-number">20</span>, <span class="hljs-number">20</span>, _T(<span class="hljs-string">"GDIç»˜å›¾ç¤ºä¾‹"</span>));
    
    <span class="hljs-comment">// 4. æ¢å¤æ—§å¯¹è±¡ï¼ˆæŒ‰ç›¸åé¡ºåºï¼‰</span>
    pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldFont);
    pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldBrush);
    pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldPen);
    
    <span class="hljs-comment">// 5. GDIå¯¹è±¡åœ¨ä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨åˆ é™¤</span>
    <span class="hljs-comment">//    æ³¨æ„ï¼šå¦‚æœè°ƒç”¨DeleteObjectï¼Œéœ€ç¡®ä¿ä¸å†ä½¿ç”¨è¯¥å¯¹è±¡</span>
}
</code></pre>
<h4 data-id="heading-66">3.2 GDIå¯¹è±¡çš„åˆ›å»ºå·¥å‚æ¨¡å¼</h4>
<p>å¯¹äºéœ€è¦é¢‘ç¹åˆ›å»ºç›¸åŒæ ·å¼GDIå¯¹è±¡çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CGdiObjectFactory</span>
{
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">static</span> CMap&lt;DWORD, DWORD, CPen*, CPen*&gt; m_mapPens;
    <span class="hljs-type">static</span> CMap&lt;DWORD, DWORD, CBrush*, CBrush*&gt; m_mapBrushes;
    <span class="hljs-type">static</span> CCriticalSection m_cs; <span class="hljs-comment">// çº¿ç¨‹ä¿æŠ¤</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// è·å–æˆ–åˆ›å»ºæŒ‡å®šæ ·å¼çš„ç”»ç¬”</span>
    <span class="hljs-function"><span class="hljs-type">static</span> CPen* <span class="hljs-title">GetPen</span><span class="hljs-params">(<span class="hljs-type">int</span> nStyle, <span class="hljs-type">int</span> nWidth, COLORREF crColor)</span>
    </span>{
        <span class="hljs-function">CSingleLock <span class="hljs-title">lock</span><span class="hljs-params">(&amp;m_cs, TRUE)</span></span>;
        
        <span class="hljs-comment">// åˆ›å»ºå”¯ä¸€é”®</span>
        DWORD dwKey = (nStyle &lt;&lt; <span class="hljs-number">24</span>) | (nWidth &lt;&lt; <span class="hljs-number">16</span>) | crColor;
        
        CPen* pPen = <span class="hljs-literal">NULL</span>;
        <span class="hljs-keyword">if</span> (!m_mapPens.<span class="hljs-built_in">Lookup</span>(dwKey, pPen))
        {
            <span class="hljs-comment">// åˆ›å»ºæ–°ç”»ç¬”</span>
            pPen = <span class="hljs-keyword">new</span> <span class="hljs-built_in">CPen</span>(nStyle, nWidth, crColor);
            m_mapPens.<span class="hljs-built_in">SetAt</span>(dwKey, pPen);
        }
        
        <span class="hljs-keyword">return</span> pPen;
    }
    
    <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰GDIå¯¹è±¡</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">Cleanup</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-function">CSingleLock <span class="hljs-title">lock</span><span class="hljs-params">(&amp;m_cs, TRUE)</span></span>;
        
        <span class="hljs-comment">// åˆ é™¤æ‰€æœ‰ç”»ç¬”</span>
        POSITION pos = m_mapPens.<span class="hljs-built_in">GetStartPosition</span>();
        DWORD dwKey;
        CPen* pPen;
        <span class="hljs-keyword">while</span> (pos != <span class="hljs-literal">NULL</span>)
        {
            m_mapPens.<span class="hljs-built_in">GetNextAssoc</span>(pos, dwKey, pPen);
            <span class="hljs-keyword">delete</span> pPen;
        }
        m_mapPens.<span class="hljs-built_in">RemoveAll</span>();
        
        <span class="hljs-comment">// ç±»ä¼¼åœ°æ¸…ç†ç”»åˆ·ç­‰</span>
    }
};
</code></pre>
<h3 data-id="heading-67">å››ã€é«˜çº§ç»˜å›¾æŠ€æœ¯ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-68">4.1 åŒç¼“å†²ç»˜å›¾æŠ€æœ¯</h4>
<p>åŒç¼“å†²æ˜¯æ¶ˆé™¤ç»˜å›¾é—ªçƒçš„å…³é”®æŠ€æœ¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CDoubleBufferDC</span> : <span class="hljs-keyword">public</span> CDC
{
<span class="hljs-keyword">private</span>:
    CDC* m_pDC;            <span class="hljs-comment">// åŸå§‹è®¾å¤‡ä¸Šä¸‹æ–‡</span>
    CBitmap m_bitmap;      <span class="hljs-comment">// å†…å­˜ä½å›¾</span>
    CBitmap* m_pOldBitmap; <span class="hljs-comment">// æ—§ä½å›¾</span>
    CRect m_rect;          <span class="hljs-comment">// ç»˜åˆ¶åŒºåŸŸ</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">CDoubleBufferDC</span>(CDC* pDC, <span class="hljs-type">const</span> CRect&amp; rect)
        : <span class="hljs-built_in">m_pDC</span>(pDC), <span class="hljs-built_in">m_rect</span>(rect)
    {
        <span class="hljs-comment">// åˆ›å»ºå…¼å®¹çš„å†…å­˜DC</span>
        <span class="hljs-built_in">CreateCompatibleDC</span>(pDC);
        
        <span class="hljs-comment">// åˆ›å»ºå…¼å®¹ä½å›¾</span>
        m_bitmap.<span class="hljs-built_in">CreateCompatibleBitmap</span>(pDC, rect.<span class="hljs-built_in">Width</span>(), rect.<span class="hljs-built_in">Height</span>());
        
        <span class="hljs-comment">// é€‰å…¥ä½å›¾</span>
        m_pOldBitmap = <span class="hljs-built_in">SelectObject</span>(&amp;m_bitmap);
        
        <span class="hljs-comment">// è®¾ç½®åŸç‚¹åç§»</span>
        <span class="hljs-built_in">SetViewportOrg</span>(-rect.left, -rect.top);
    }
    
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">CDoubleBufferDC</span>()
    {
        <span class="hljs-comment">// å°†å†…å­˜ä½å›¾æ‹·è´åˆ°å±å¹•</span>
        m_pDC-&gt;<span class="hljs-built_in">BitBlt</span>(m_rect.left, m_rect.top, 
                     m_rect.<span class="hljs-built_in">Width</span>(), m_rect.<span class="hljs-built_in">Height</span>(),
                     <span class="hljs-keyword">this</span>, 
                     m_rect.left, m_rect.top, 
                     SRCCOPY);
        
        <span class="hljs-comment">// æ¢å¤åŸå§‹ä½å›¾</span>
        <span class="hljs-built_in">SelectObject</span>(m_pOldBitmap);
        
        <span class="hljs-comment">// ä½å›¾å¯¹è±¡è‡ªåŠ¨åˆ é™¤</span>
    }
};

<span class="hljs-comment">// åœ¨è§†å›¾ç±»ä¸­ä½¿ç”¨åŒç¼“å†²</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::OnDraw</span><span class="hljs-params">(CDC* pDC)</span>
</span>{
    CRect rectClient;
    <span class="hljs-built_in">GetClientRect</span>(&amp;rectClient);
    
    <span class="hljs-comment">// åˆ›å»ºåŒç¼“å†²DC</span>
    <span class="hljs-function">CDoubleBufferDC <span class="hljs-title">dbDC</span><span class="hljs-params">(pDC, rectClient)</span></span>;
    
    <span class="hljs-comment">// ä½¿ç”¨dbDCè¿›è¡Œæ‰€æœ‰ç»˜å›¾æ“ä½œ</span>
    <span class="hljs-built_in">DrawBackground</span>(&amp;dbDC, rectClient);
    <span class="hljs-built_in">DrawContent</span>(&amp;dbDC, rectClient);
    <span class="hljs-built_in">DrawOverlay</span>(&amp;dbDC, rectClient);
    
    <span class="hljs-comment">// dbDCææ„æ—¶è‡ªåŠ¨åˆ·æ–°åˆ°å±å¹•</span>
}
</code></pre>
<h4 data-id="heading-69">4.2 è·¯å¾„ä¸å¤æ‚åŒºåŸŸæ“ä½œ</h4>
<p>è·¯å¾„æä¾›äº†ä¸€ç§è®°å½•å’Œé‡ç”¨å¤æ‚ç»˜å›¾åºåˆ—çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::DrawComplexShape</span><span class="hljs-params">(CDC* pDC)</span>
</span>{
    <span class="hljs-comment">// å¼€å§‹è·¯å¾„å®šä¹‰</span>
    pDC-&gt;<span class="hljs-built_in">BeginPath</span>();
    
    <span class="hljs-comment">// å®šä¹‰è·¯å¾„å½¢çŠ¶</span>
    pDC-&gt;<span class="hljs-built_in">MoveTo</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>);
    pDC-&gt;<span class="hljs-built_in">LineTo</span>(<span class="hljs-number">200</span>, <span class="hljs-number">100</span>);
    pDC-&gt;<span class="hljs-built_in">LineTo</span>(<span class="hljs-number">200</span>, <span class="hljs-number">200</span>);
    pDC-&gt;<span class="hljs-built_in">LineTo</span>(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>);
    pDC-&gt;<span class="hljs-built_in">LineTo</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>); <span class="hljs-comment">// é—­åˆçŸ©å½¢</span>
    
    <span class="hljs-comment">// æ·»åŠ ç¬¬äºŒä¸ªå½¢çŠ¶</span>
    pDC-&gt;<span class="hljs-built_in">MoveTo</span>(<span class="hljs-number">150</span>, <span class="hljs-number">50</span>);
    pDC-&gt;<span class="hljs-built_in">LineTo</span>(<span class="hljs-number">250</span>, <span class="hljs-number">150</span>);
    pDC-&gt;<span class="hljs-built_in">LineTo</span>(<span class="hljs-number">50</span>, <span class="hljs-number">150</span>);
    pDC-&gt;<span class="hljs-built_in">CloseFigure</span>(); <span class="hljs-comment">// é—­åˆä¸‰è§’å½¢</span>
    
    <span class="hljs-comment">// ç»“æŸè·¯å¾„å®šä¹‰</span>
    pDC-&gt;<span class="hljs-built_in">EndPath</span>();
    
    <span class="hljs-comment">// 1. ç»˜åˆ¶è·¯å¾„è½®å»“</span>
    <span class="hljs-function">CPen <span class="hljs-title">pen</span><span class="hljs-params">(PS_SOLID, <span class="hljs-number">2</span>, RGB(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))</span></span>;
    CPen* pOldPen = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;pen);
    pDC-&gt;<span class="hljs-built_in">StrokePath</span>();
    pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldPen);
    
    <span class="hljs-comment">// 2. å¡«å……è·¯å¾„</span>
    <span class="hljs-function">CBrush <span class="hljs-title">brush</span><span class="hljs-params">(RGB(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>))</span></span>;
    CBrush* pOldBrush = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;brush);
    pDC-&gt;<span class="hljs-built_in">FillPath</span>();
    pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldBrush);
    
    <span class="hljs-comment">// 3. å°†è·¯å¾„è½¬æ¢ä¸ºåŒºåŸŸ</span>
    CRgn region;
    <span class="hljs-keyword">if</span> (region.<span class="hljs-built_in">CreateFromPath</span>(pDC))
    {
        <span class="hljs-comment">// ä½¿ç”¨åŒºåŸŸè¿›è¡Œç‚¹å‡»æµ‹è¯•</span>
        <span class="hljs-function">CPoint <span class="hljs-title">ptTest</span><span class="hljs-params">(<span class="hljs-number">120</span>, <span class="hljs-number">120</span>)</span></span>;
        <span class="hljs-keyword">if</span> (region.<span class="hljs-built_in">PtInRegion</span>(ptTest))
        {
            pDC-&gt;<span class="hljs-built_in">TextOut</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, _T(<span class="hljs-string">"ç‚¹åœ¨åŒºåŸŸå†…"</span>));
        }
        
        <span class="hljs-comment">// åŒºåŸŸä¹Ÿå¯ä»¥ç”¨äºè£å‰ª</span>
        pDC-&gt;<span class="hljs-built_in">SelectClipRgn</span>(&amp;region);
        <span class="hljs-comment">// ... åœ¨è£å‰ªåŒºåŸŸå†…ç»˜å›¾</span>
        pDC-&gt;<span class="hljs-built_in">SelectClipRgn</span>(<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// å–æ¶ˆè£å‰ª</span>
    }
}
</code></pre>
<h4 data-id="heading-70">4.3 åæ ‡ç³»ç»Ÿä¸å˜æ¢</h4>
<p>MFCæ”¯æŒå¤šç§åæ ‡æ˜ å°„æ¨¡å¼å’Œå˜æ¢ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::DemonstrateCoordinateSystems</span><span class="hljs-params">(CDC* pDC)</span>
</span>{
    <span class="hljs-comment">// ä¿å­˜åŸå§‹DCçŠ¶æ€</span>
    <span class="hljs-type">int</span> nOldMapMode = pDC-&gt;<span class="hljs-built_in">SaveDC</span>();
    
    <span class="hljs-comment">// ç¤ºä¾‹1ï¼šé€»è¾‘åæ ‡ä¸è®¾å¤‡åæ ‡</span>
    pDC-&gt;<span class="hljs-built_in">SetMapMode</span>(MM_TEXT); <span class="hljs-comment">// é»˜è®¤æ¨¡å¼ï¼Œ1é€»è¾‘å•ä½=1åƒç´ </span>
    
    <span class="hljs-comment">// è®¾ç½®çª—å£ï¼ˆé€»è¾‘ï¼‰å’Œè§†å£ï¼ˆè®¾å¤‡ï¼‰èŒƒå›´</span>
    pDC-&gt;<span class="hljs-built_in">SetWindowExt</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>);  <span class="hljs-comment">// é€»è¾‘èŒƒå›´</span>
    pDC-&gt;<span class="hljs-built_in">SetViewportExt</span>(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);  <span class="hljs-comment">// è®¾å¤‡èŒƒå›´</span>
    
    <span class="hljs-comment">// ç¤ºä¾‹2ï¼šä½¿ç”¨MM_ANISOTROPICæ¨¡å¼</span>
    pDC-&gt;<span class="hljs-built_in">SetMapMode</span>(MM_ANISOTROPIC);
    pDC-&gt;<span class="hljs-built_in">SetWindowExt</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>);
    pDC-&gt;<span class="hljs-built_in">SetViewportExt</span>(rectClient.<span class="hljs-built_in">Width</span>(), rectClient.<span class="hljs-built_in">Height</span>());
    
    <span class="hljs-comment">// ç»˜åˆ¶éšçª—å£å¤§å°ç¼©æ”¾çš„å›¾å½¢</span>
    pDC-&gt;<span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">900</span>, <span class="hljs-number">900</span>);
    
    <span class="hljs-comment">// ç¤ºä¾‹3ï¼šä½¿ç”¨MM_HIMETRICæ¨¡å¼ï¼ˆç‰©ç†å°ºå¯¸ï¼‰</span>
    pDC-&gt;<span class="hljs-built_in">SetMapMode</span>(MM_HIMETRIC); <span class="hljs-comment">// 0.01æ¯«ç±³å•ä½</span>
    pDC-&gt;<span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10000</span>, <span class="hljs-number">-5000</span>); <span class="hljs-comment">// 10cm x 5cmçŸ©å½¢</span>
    
    <span class="hljs-comment">// åæ ‡è½¬æ¢ç¤ºä¾‹</span>
    <span class="hljs-function">CPoint <span class="hljs-title">ptLogical</span><span class="hljs-params">(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>)</span></span>;
    CPoint ptDevice;
    
    <span class="hljs-comment">// é€»è¾‘åæ ‡è½¬è®¾å¤‡åæ ‡</span>
    pDC-&gt;<span class="hljs-built_in">LPtoDP</span>(&amp;ptLogical);
    
    <span class="hljs-comment">// è®¾å¤‡åæ ‡è½¬é€»è¾‘åæ ‡</span>
    pDC-&gt;<span class="hljs-built_in">DPtoLP</span>(&amp;ptDevice);
    
    <span class="hljs-comment">// ç¤ºä¾‹4ï¼šä¸–ç•Œå˜æ¢ï¼ˆWindows NT/2000+ï¼‰</span>
    <span class="hljs-keyword">if</span> (pDC-&gt;<span class="hljs-built_in">GetDeviceCaps</span>(RASTERCAPS) &amp; RC_TRANSFORM)
    {
        XFORM xform;
        
        <span class="hljs-comment">// è®¾ç½®æ—‹è½¬çŸ©é˜µï¼ˆæ—‹è½¬30åº¦ï¼‰</span>
        <span class="hljs-type">float</span> fAngle = <span class="hljs-number">30.0f</span> * <span class="hljs-number">3.14159f</span> / <span class="hljs-number">180.0f</span>;
        xform.eM11 = <span class="hljs-built_in">cos</span>(fAngle);
        xform.eM12 = <span class="hljs-built_in">sin</span>(fAngle);
        xform.eM21 = -<span class="hljs-built_in">sin</span>(fAngle);
        xform.eM22 = <span class="hljs-built_in">cos</span>(fAngle);
        xform.eDx = <span class="hljs-number">100.0f</span>;  <span class="hljs-comment">// Xæ–¹å‘å¹³ç§»</span>
        xform.eDy = <span class="hljs-number">100.0f</span>;  <span class="hljs-comment">// Yæ–¹å‘å¹³ç§»</span>
        
        <span class="hljs-comment">// è®¾ç½®ä¸–ç•Œå˜æ¢</span>
        pDC-&gt;<span class="hljs-built_in">SetGraphicsMode</span>(GM_ADVANCED);
        pDC-&gt;<span class="hljs-built_in">SetWorldTransform</span>(&amp;xform);
        
        <span class="hljs-comment">// ç»˜åˆ¶å˜æ¢åçš„å›¾å½¢</span>
        pDC-&gt;<span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>);
        
        <span class="hljs-comment">// æ¢å¤é»˜è®¤å˜æ¢</span>
        pDC-&gt;<span class="hljs-built_in">ModifyWorldTransform</span>(<span class="hljs-literal">NULL</span>, MWT_IDENTITY);
    }
    
    <span class="hljs-comment">// æ¢å¤åŸå§‹DCçŠ¶æ€</span>
    pDC-&gt;<span class="hljs-built_in">RestoreDC</span>(nOldMapMode);
}
</code></pre>
<h3 data-id="heading-71">äº”ã€å­—ä½“ä¸æ–‡æœ¬æ¸²æŸ“</h3>
<h4 data-id="heading-72">5.1 å­—ä½“åˆ›å»ºä¸æ–‡æœ¬åº¦é‡</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CTextRenderer</span>
{
<span class="hljs-keyword">private</span>:
    CFont m_fontNormal;
    CFont m_fontBold;
    CFont m_fontItalic;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">BOOL <span class="hljs-title">InitializeFonts</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-comment">// åˆ›å»ºä¸åŒé£æ ¼çš„å­—ä½“</span>
        LOGFONT lf = {<span class="hljs-number">0</span>};
        
        <span class="hljs-comment">// æ ‡å‡†å­—ä½“</span>
        lf.lfHeight = <span class="hljs-number">-16</span>; <span class="hljs-comment">// 16åƒç´ é«˜ï¼ˆè´Ÿå€¼è¡¨ç¤ºå­—ç¬¦é«˜åº¦ï¼‰</span>
        lf.lfWeight = FW_NORMAL;
        lf.lfCharSet = DEFAULT_CHARSET;
        <span class="hljs-built_in">lstrcpy</span>(lf.lfFaceName, _T(<span class="hljs-string">"å¾®è½¯é›…é»‘"</span>));
        m_fontNormal.<span class="hljs-built_in">CreateFontIndirect</span>(&amp;lf);
        
        <span class="hljs-comment">// ç²—ä½“</span>
        lf.lfWeight = FW_BOLD;
        m_fontBold.<span class="hljs-built_in">CreateFontIndirect</span>(&amp;lf);
        
        <span class="hljs-comment">// æ–œä½“</span>
        lf.lfWeight = FW_NORMAL;
        lf.lfItalic = TRUE;
        m_fontItalic.<span class="hljs-built_in">CreateFontIndirect</span>(&amp;lf);
        
        <span class="hljs-keyword">return</span> TRUE;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DrawTextWithMetrics</span><span class="hljs-params">(CDC* pDC, <span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, LPCTSTR lpszText)</span>
    </span>{
        CFont* pOldFont = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;m_fontNormal);
        
        <span class="hljs-comment">// è·å–æ–‡æœ¬åº¦é‡ä¿¡æ¯</span>
        TEXTMETRIC tm;
        pDC-&gt;<span class="hljs-built_in">GetTextMetrics</span>(&amp;tm);
        
        <span class="hljs-comment">// è®¡ç®—æ–‡æœ¬å®½åº¦</span>
        CSize sizeText = pDC-&gt;<span class="hljs-built_in">GetTextExtent</span>(lpszText, <span class="hljs-built_in">lstrlen</span>(lpszText));
        
        <span class="hljs-comment">// ç»˜åˆ¶èƒŒæ™¯</span>
        <span class="hljs-function">CRect <span class="hljs-title">rectText</span><span class="hljs-params">(x, y, x + sizeText.cx, y + tm.tmHeight)</span></span>;
        <span class="hljs-function">CBrush <span class="hljs-title">brushBg</span><span class="hljs-params">(RGB(<span class="hljs-number">240</span>, <span class="hljs-number">240</span>, <span class="hljs-number">240</span>))</span></span>;
        pDC-&gt;<span class="hljs-built_in">FillRect</span>(&amp;rectText, &amp;brushBg);
        
        <span class="hljs-comment">// ç»˜åˆ¶æ–‡æœ¬</span>
        pDC-&gt;<span class="hljs-built_in">SetBkMode</span>(TRANSPARENT);
        pDC-&gt;<span class="hljs-built_in">TextOut</span>(x, y, lpszText);
        
        <span class="hljs-comment">// ç»˜åˆ¶åŸºçº¿</span>
        <span class="hljs-function">CPen <span class="hljs-title">penBaseline</span><span class="hljs-params">(PS_SOLID, <span class="hljs-number">1</span>, RGB(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))</span></span>;
        CPen* pOldPen = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;penBaseline);
        pDC-&gt;<span class="hljs-built_in">MoveTo</span>(x, y + tm.tmAscent);
        pDC-&gt;<span class="hljs-built_in">LineTo</span>(x + sizeText.cx, y + tm.tmAscent);
        
        <span class="hljs-comment">// ç»˜åˆ¶è¾¹ç•Œæ¡†</span>
        <span class="hljs-function">CPen <span class="hljs-title">penBorder</span><span class="hljs-params">(PS_DOT, <span class="hljs-number">1</span>, RGB(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>))</span></span>;
        pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;penBorder);
        pDC-&gt;<span class="hljs-built_in">SelectStockObject</span>(NULL_BRUSH);
        pDC-&gt;<span class="hljs-built_in">Rectangle</span>(&amp;rectText);
        
        pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldPen);
        pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldFont);
    }
    
    <span class="hljs-comment">// å¤šè¡Œæ–‡æœ¬ç»˜åˆ¶</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DrawMultilineText</span><span class="hljs-params">(CDC* pDC, CRect rect, LPCTSTR lpszText)</span>
    </span>{
        CFont* pOldFont = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;m_fontNormal);
        
        <span class="hljs-comment">// è®¾ç½®æ–‡æœ¬æ ¼å¼</span>
        UINT uFormat = DT_LEFT | DT_WORDBREAK | DT_NOPREFIX | DT_EDITCONTROL;
        
        <span class="hljs-comment">// è®¡ç®—éœ€è¦çš„çŸ©å½¢é«˜åº¦</span>
        CRect rectCalc = rect;
        pDC-&gt;<span class="hljs-built_in">DrawText</span>(lpszText, <span class="hljs-number">-1</span>, &amp;rectCalc, uFormat | DT_CALCRECT);
        
        <span class="hljs-comment">// ç»˜åˆ¶æ–‡æœ¬</span>
        pDC-&gt;<span class="hljs-built_in">DrawText</span>(lpszText, <span class="hljs-number">-1</span>, &amp;rect, uFormat);
        
        pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldFont);
    }
};
</code></pre>
<h4 data-id="heading-73">5.2 é«˜çº§æ–‡æœ¬æ•ˆæœ</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CMyView::DrawTextEffects</span><span class="hljs-params">(CDC* pDC)</span>
</span>{
    CRect rectClient;
    <span class="hljs-built_in">GetClientRect</span>(&amp;rectClient);
    
    <span class="hljs-comment">// 1. é˜´å½±æ–‡å­—</span>
    <span class="hljs-built_in">DrawShadowText</span>(pDC, _T(<span class="hljs-string">"é˜´å½±æ•ˆæœ"</span>), 
                   <span class="hljs-built_in">CPoint</span>(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>), 
                   <span class="hljs-built_in">RGB</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-built_in">RGB</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>));
    
    <span class="hljs-comment">// 2. æ¸å˜æ–‡å­—</span>
    <span class="hljs-built_in">DrawGradientText</span>(pDC, _T(<span class="hljs-string">"æ¸å˜æ–‡å­—"</span>), 
                     <span class="hljs-built_in">CPoint</span>(<span class="hljs-number">50</span>, <span class="hljs-number">100</span>), 
                     <span class="hljs-built_in">RGB</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-built_in">RGB</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>));
    
    <span class="hljs-comment">// 3. è½®å»“æ–‡å­—</span>
    <span class="hljs-built_in">DrawOutlineText</span>(pDC, _T(<span class="hljs-string">"è½®å»“æ–‡å­—"</span>), 
                    <span class="hljs-built_in">CPoint</span>(<span class="hljs-number">50</span>, <span class="hljs-number">150</span>), 
                    <span class="hljs-number">3</span>, <span class="hljs-built_in">RGB</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>), <span class="hljs-built_in">RGB</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DrawShadowText</span><span class="hljs-params">(CDC* pDC, LPCTSTR lpszText, CPoint pt, 
                    COLORREF crText, COLORREF crShadow)</span>
</span>{
    CFont font;
    LOGFONT lf = {<span class="hljs-number">0</span>};
    lf.lfHeight = <span class="hljs-number">-48</span>;
    lf.lfWeight = FW_BOLD;
    <span class="hljs-built_in">lstrcpy</span>(lf.lfFaceName, _T(<span class="hljs-string">"Arial"</span>));
    font.<span class="hljs-built_in">CreateFontIndirect</span>(&amp;lf);
    
    CFont* pOldFont = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;font);
    
    <span class="hljs-comment">// ç»˜åˆ¶é˜´å½±</span>
    pDC-&gt;<span class="hljs-built_in">SetTextColor</span>(crShadow);
    pDC-&gt;<span class="hljs-built_in">TextOut</span>(pt.x + <span class="hljs-number">3</span>, pt.y + <span class="hljs-number">3</span>, lpszText);
    
    <span class="hljs-comment">// ç»˜åˆ¶å‰æ™¯æ–‡å­—</span>
    pDC-&gt;<span class="hljs-built_in">SetTextColor</span>(crText);
    pDC-&gt;<span class="hljs-built_in">TextOut</span>(pt.x, pt.y, lpszText);
    
    pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldFont);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DrawGradientText</span><span class="hljs-params">(CDC* pDC, LPCTSTR lpszText, CPoint pt,
                      COLORREF crStart, COLORREF crEnd)</span>
</span>{
    <span class="hljs-comment">// åˆ›å»ºå­—ä½“</span>
    CFont font;
    LOGFONT lf = {<span class="hljs-number">0</span>};
    lf.lfHeight = <span class="hljs-number">-48</span>;
    lf.lfWeight = FW_BOLD;
    <span class="hljs-built_in">lstrcpy</span>(lf.lfFaceName, _T(<span class="hljs-string">"Arial"</span>));
    font.<span class="hljs-built_in">CreateFontIndirect</span>(&amp;lf);
    
    CFont* pOldFont = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;font);
    
    <span class="hljs-comment">// è·å–æ–‡æœ¬å°ºå¯¸</span>
    CSize sizeText = pDC-&gt;<span class="hljs-built_in">GetTextExtent</span>(lpszText, <span class="hljs-built_in">lstrlen</span>(lpszText));
    
    <span class="hljs-comment">// åˆ›å»ºæ¸å˜ç”»åˆ·</span>
    TRIVERTEX vert[<span class="hljs-number">2</span>] = {<span class="hljs-number">0</span>};
    vert[<span class="hljs-number">0</span>].x = pt.x;
    vert[<span class="hljs-number">0</span>].y = pt.y;
    vert[<span class="hljs-number">0</span>].Red = <span class="hljs-built_in">GetRValue</span>(crStart) &lt;&lt; <span class="hljs-number">8</span>;
    vert[<span class="hljs-number">0</span>].Green = <span class="hljs-built_in">GetGValue</span>(crStart) &lt;&lt; <span class="hljs-number">8</span>;
    vert[<span class="hljs-number">0</span>].Blue = <span class="hljs-built_in">GetBValue</span>(crStart) &lt;&lt; <span class="hljs-number">8</span>;
    vert[<span class="hljs-number">0</span>].Alpha = <span class="hljs-number">0x0000</span>;
    
    vert[<span class="hljs-number">1</span>].x = pt.x + sizeText.cx;
    vert[<span class="hljs-number">1</span>].y = pt.y + sizeText.cy;
    vert[<span class="hljs-number">1</span>].Red = <span class="hljs-built_in">GetRValue</span>(crEnd) &lt;&lt; <span class="hljs-number">8</span>;
    vert[<span class="hljs-number">1</span>].Green = <span class="hljs-built_in">GetGValue</span>(crEnd) &lt;&lt; <span class="hljs-number">8</span>;
    vert[<span class="hljs-number">1</span>].Blue = <span class="hljs-built_in">GetBValue</span>(crEnd) &lt;&lt; <span class="hljs-number">8</span>;
    vert[<span class="hljs-number">1</span>].Alpha = <span class="hljs-number">0x0000</span>;
    
    GRADIENT_RECT gRect = {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>};
    
    <span class="hljs-comment">// ä½¿ç”¨è·¯å¾„åˆ›å»ºæ–‡æœ¬è½®å»“</span>
    pDC-&gt;<span class="hljs-built_in">BeginPath</span>();
    pDC-&gt;<span class="hljs-built_in">TextOut</span>(pt.x, pt.y, lpszText);
    pDC-&gt;<span class="hljs-built_in">EndPath</span>();
    
    <span class="hljs-comment">// ç”¨æ¸å˜å¡«å……æ–‡æœ¬è·¯å¾„</span>
    pDC-&gt;<span class="hljs-built_in">SelectClipPath</span>(RGN_COPY);
    pDC-&gt;<span class="hljs-built_in">GradientFill</span>(vert, <span class="hljs-number">2</span>, &amp;gRect, <span class="hljs-number">1</span>, GRADIENT_FILL_RECT_H);
    
    pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldFont);
}
</code></pre>
<h3 data-id="heading-74">å…­ã€ä½å›¾æ“ä½œä¸å›¾åƒå¤„ç†</h3>
<h4 data-id="heading-75">6.1 ä½å›¾åŠ è½½ä¸æ˜¾ç¤ºä¼˜åŒ–</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CBitmapManager</span>
{
<span class="hljs-keyword">private</span>:
    CMap&lt;UINT, UINT, CBitmap*, CBitmap*&gt; m_mapBitmaps;
    CSize m_sizeDisplay; <span class="hljs-comment">// æ˜¾ç¤ºå°ºå¯¸ç¼“å­˜</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">CBitmapManager</span>() : <span class="hljs-built_in">m_sizeDisplay</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>) {}
    
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">CBitmapManager</span>()
    {
        <span class="hljs-built_in">Cleanup</span>();
    }
    
    <span class="hljs-comment">// ä»èµ„æºåŠ è½½ä½å›¾</span>
    <span class="hljs-function">CBitmap* <span class="hljs-title">LoadBitmapFromResource</span><span class="hljs-params">(UINT nIDResource, 
                                    CSize sizeTarget = CSize(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>))</span>
    </span>{
        CBitmap* pBitmap = <span class="hljs-literal">NULL</span>;
        
        <span class="hljs-keyword">if</span> (m_mapBitmaps.<span class="hljs-built_in">Lookup</span>(nIDResource, pBitmap))
            <span class="hljs-keyword">return</span> pBitmap;
        
        <span class="hljs-comment">// åŠ è½½åŸå§‹ä½å›¾</span>
        CBitmap bmpOriginal;
        <span class="hljs-keyword">if</span> (!bmpOriginal.<span class="hljs-built_in">LoadBitmap</span>(nIDResource))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
        
        <span class="hljs-comment">// è·å–åŸå§‹å°ºå¯¸</span>
        BITMAP bmInfo;
        bmpOriginal.<span class="hljs-built_in">GetBitmap</span>(&amp;bmInfo);
        
        <span class="hljs-function">CSize <span class="hljs-title">sizeSource</span><span class="hljs-params">(bmInfo.bmWidth, bmInfo.bmHeight)</span></span>;
        
        <span class="hljs-comment">// å¦‚æœéœ€è¦ç¼©æ”¾</span>
        <span class="hljs-keyword">if</span> (sizeTarget.cx &gt; <span class="hljs-number">0</span> &amp;&amp; sizeTarget.cy &gt; <span class="hljs-number">0</span> &amp;&amp; 
            (sizeTarget != sizeSource))
        {
            pBitmap = <span class="hljs-built_in">ScaleBitmap</span>(&amp;bmpOriginal, sizeSource, sizeTarget);
        }
        <span class="hljs-keyword">else</span>
        {
            pBitmap = <span class="hljs-keyword">new</span> CBitmap;
            pBitmap-&gt;<span class="hljs-built_in">Attach</span>(bmpOriginal.<span class="hljs-built_in">Detach</span>());
        }
        
        m_mapBitmaps.<span class="hljs-built_in">SetAt</span>(nIDResource, pBitmap);
        <span class="hljs-keyword">return</span> pBitmap;
    }
    
    <span class="hljs-comment">// ä½å›¾ç¼©æ”¾å‡½æ•°</span>
    <span class="hljs-function">CBitmap* <span class="hljs-title">ScaleBitmap</span><span class="hljs-params">(CBitmap* pSrcBitmap, CSize sizeSrc, CSize sizeDst)</span>
    </span>{
        <span class="hljs-comment">// åˆ›å»ºæºDCå’Œç›®æ ‡DC</span>
        <span class="hljs-function">CWindowDC <span class="hljs-title">dcScreen</span><span class="hljs-params">(<span class="hljs-literal">NULL</span>)</span></span>;
        CDC dcSrc, dcDst;
        
        dcSrc.<span class="hljs-built_in">CreateCompatibleDC</span>(&amp;dcScreen);
        dcDst.<span class="hljs-built_in">CreateCompatibleDC</span>(&amp;dcScreen);
        
        <span class="hljs-comment">// åˆ›å»ºç›®æ ‡ä½å›¾</span>
        CBitmap* pDstBitmap = <span class="hljs-keyword">new</span> CBitmap;
        pDstBitmap-&gt;<span class="hljs-built_in">CreateCompatibleBitmap</span>(&amp;dcScreen, 
                                          sizeDst.cx, sizeDst.cy);
        
        <span class="hljs-comment">// é€‰å…¥ä½å›¾</span>
        CBitmap* pOldSrcBitmap = dcSrc.<span class="hljs-built_in">SelectObject</span>(pSrcBitmap);
        CBitmap* pOldDstBitmap = dcDst.<span class="hljs-built_in">SelectObject</span>(pDstBitmap);
        
        <span class="hljs-comment">// è®¾ç½®æ‹‰ä¼¸æ¨¡å¼</span>
        dcDst.<span class="hljs-built_in">SetStretchBltMode</span>(HALFTONE);
        dcDst.<span class="hljs-built_in">SetBrushOrg</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        
        <span class="hljs-comment">// æ‰§è¡Œç¼©æ”¾</span>
        dcDst.<span class="hljs-built_in">StretchBlt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, sizeDst.cx, sizeDst.cy,
                        &amp;dcSrc, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, sizeSrc.cx, sizeSrc.cy,
                        SRCCOPY);
        
        <span class="hljs-comment">// æ¢å¤å¹¶æ¸…ç†</span>
        dcSrc.<span class="hljs-built_in">SelectObject</span>(pOldSrcBitmap);
        dcDst.<span class="hljs-built_in">SelectObject</span>(pOldDstBitmap);
        
        <span class="hljs-keyword">return</span> pDstBitmap;
    }
    
    <span class="hljs-comment">// é€æ˜ä½å›¾ç»˜åˆ¶</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DrawTransparentBitmap</span><span class="hljs-params">(CDC* pDC, CBitmap* pBitmap, 
                               CPoint ptDest, COLORREF crTransparent)</span>
    </span>{
        <span class="hljs-comment">// åˆ›å»ºå†…å­˜DC</span>
        CDC dcMem, dcMask;
        dcMem.<span class="hljs-built_in">CreateCompatibleDC</span>(pDC);
        dcMask.<span class="hljs-built_in">CreateCompatibleDC</span>(pDC);
        
        <span class="hljs-comment">// è·å–ä½å›¾å°ºå¯¸</span>
        BITMAP bm;
        pBitmap-&gt;<span class="hljs-built_in">GetBitmap</span>(&amp;bm);
        
        <span class="hljs-comment">// åˆ›å»ºæ©ç ä½å›¾</span>
        CBitmap bmpMask;
        bmpMask.<span class="hljs-built_in">CreateBitmap</span>(bm.bmWidth, bm.bmHeight, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-literal">NULL</span>);
        
        <span class="hljs-comment">// é€‰å…¥ä½å›¾</span>
        CBitmap* pOldMemBitmap = dcMem.<span class="hljs-built_in">SelectObject</span>(pBitmap);
        CBitmap* pOldMaskBitmap = dcMask.<span class="hljs-built_in">SelectObject</span>(&amp;bmpMask);
        
        <span class="hljs-comment">// è®¾ç½®é€æ˜è‰²</span>
        COLORREF crOldBk = dcMem.<span class="hljs-built_in">SetBkColor</span>(crTransparent);
        
        <span class="hljs-comment">// åˆ›å»ºæ©ç ï¼ˆé€æ˜åŒºåŸŸä¸º1ï¼Œéé€æ˜åŒºåŸŸä¸º0ï¼‰</span>
        dcMask.<span class="hljs-built_in">BitBlt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, bm.bmWidth, bm.bmHeight, 
                     &amp;dcMem, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, SRCCOPY);
        
        <span class="hljs-comment">// åœ¨ç›®æ ‡DCä¸Šä½¿ç”¨æ©ç </span>
        pDC-&gt;<span class="hljs-built_in">BitBlt</span>(ptDest.x, ptDest.y, bm.bmWidth, bm.bmHeight,
                   &amp;dcMask, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, SRCAND);
        
        <span class="hljs-comment">// è®¾ç½®èƒŒæ™¯è‰²å¹¶ç»˜åˆ¶</span>
        dcMem.<span class="hljs-built_in">SetBkColor</span>(<span class="hljs-built_in">RGB</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
        dcMem.<span class="hljs-built_in">SetTextColor</span>(<span class="hljs-built_in">RGB</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>));
        dcMem.<span class="hljs-built_in">BitBlt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, bm.bmWidth, bm.bmHeight,
                    &amp;dcMask, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, SRCAND);
        
        <span class="hljs-comment">// åˆå¹¶ç»“æœ</span>
        pDC-&gt;<span class="hljs-built_in">BitBlt</span>(ptDest.x, ptDest.y, bm.bmWidth, bm.bmHeight,
                   &amp;dcMem, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, SRCPAINT);
        
        <span class="hljs-comment">// æ¢å¤</span>
        dcMem.<span class="hljs-built_in">SetBkColor</span>(crOldBk);
        dcMem.<span class="hljs-built_in">SelectObject</span>(pOldMemBitmap);
        dcMask.<span class="hljs-built_in">SelectObject</span>(pOldMaskBitmap);
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Cleanup</span><span class="hljs-params">()</span>
    </span>{
        POSITION pos = m_mapBitmaps.<span class="hljs-built_in">GetStartPosition</span>();
        UINT nID;
        CBitmap* pBitmap;
        <span class="hljs-keyword">while</span> (pos != <span class="hljs-literal">NULL</span>)
        {
            m_mapBitmaps.<span class="hljs-built_in">GetNextAssoc</span>(pos, nID, pBitmap);
            <span class="hljs-keyword">delete</span> pBitmap;
        }
        m_mapBitmaps.<span class="hljs-built_in">RemoveAll</span>();
    }
};
</code></pre>
<h4 data-id="heading-76">6.2 å›¾åƒç‰¹æ•ˆå¤„ç†</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç®€å•çš„å›¾åƒå¤„ç†è¿‡æ»¤å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CImageFilter</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// ç°åº¦åŒ–</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">ConvertToGrayScale</span><span class="hljs-params">(CDC* pDC, CBitmap* pBitmap, 
                                   <span class="hljs-type">const</span> CRect&amp; rect)</span>
    </span>{
        <span class="hljs-comment">// è·å–ä½å›¾ä¿¡æ¯</span>
        BITMAP bm;
        pBitmap-&gt;<span class="hljs-built_in">GetBitmap</span>(&amp;bm);
        
        <span class="hljs-comment">// åˆ›å»ºå†…å­˜DC</span>
        CDC dcMem;
        dcMem.<span class="hljs-built_in">CreateCompatibleDC</span>(pDC);
        CBitmap* pOldBitmap = dcMem.<span class="hljs-built_in">SelectObject</span>(pBitmap);
        
        <span class="hljs-comment">// é€åƒç´ å¤„ç†</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y = rect.top; y &lt; rect.bottom; y++)
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x = rect.left; x &lt; rect.right; x++)
            {
                COLORREF cr = dcMem.<span class="hljs-built_in">GetPixel</span>(x, y);
                
                <span class="hljs-comment">// è®¡ç®—ç°åº¦å€¼</span>
                BYTE r = <span class="hljs-built_in">GetRValue</span>(cr);
                BYTE g = <span class="hljs-built_in">GetGValue</span>(cr);
                BYTE b = <span class="hljs-built_in">GetBValue</span>(cr);
                BYTE gray = (BYTE)(<span class="hljs-number">0.299</span> * r + <span class="hljs-number">0.587</span> * g + <span class="hljs-number">0.114</span> * b);
                
                <span class="hljs-comment">// è®¾ç½®ç°åº¦åƒç´ </span>
                dcMem.<span class="hljs-built_in">SetPixel</span>(x, y, <span class="hljs-built_in">RGB</span>(gray, gray, gray));
            }
        }
        
        dcMem.<span class="hljs-built_in">SelectObject</span>(pOldBitmap);
    }
    
    <span class="hljs-comment">// äº®åº¦è°ƒæ•´</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">AdjustBrightness</span><span class="hljs-params">(CDC* pDC, CBitmap* pBitmap,
                                 <span class="hljs-type">const</span> CRect&amp; rect, <span class="hljs-type">int</span> nDelta)</span>
    </span>{
        CDC dcMem;
        dcMem.<span class="hljs-built_in">CreateCompatibleDC</span>(pDC);
        CBitmap* pOldBitmap = dcMem.<span class="hljs-built_in">SelectObject</span>(pBitmap);
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y = rect.top; y &lt; rect.bottom; y++)
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x = rect.left; x &lt; rect.right; x++)
            {
                COLORREF cr = dcMem.<span class="hljs-built_in">GetPixel</span>(x, y);
                
                BYTE r = <span class="hljs-built_in">Clamp</span>(<span class="hljs-built_in">GetRValue</span>(cr) + nDelta);
                BYTE g = <span class="hljs-built_in">Clamp</span>(<span class="hljs-built_in">GetGValue</span>(cr) + nDelta);
                BYTE b = <span class="hljs-built_in">Clamp</span>(<span class="hljs-built_in">GetBValue</span>(cr) + nDelta);
                
                dcMem.<span class="hljs-built_in">SetPixel</span>(x, y, <span class="hljs-built_in">RGB</span>(r, g, b));
            }
        }
        
        dcMem.<span class="hljs-built_in">SelectObject</span>(pOldBitmap);
    }
    
    <span class="hljs-comment">// å¯¹æ¯”åº¦è°ƒæ•´</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">AdjustContrast</span><span class="hljs-params">(CDC* pDC, CBitmap* pBitmap,
                               <span class="hljs-type">const</span> CRect&amp; rect, <span class="hljs-type">double</span> dContrast)</span>
    </span>{
        CDC dcMem;
        dcMem.<span class="hljs-built_in">CreateCompatibleDC</span>(pDC);
        CBitmap* pOldBitmap = dcMem.<span class="hljs-built_in">SelectObject</span>(pBitmap);
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y = rect.top; y &lt; rect.bottom; y++)
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x = rect.left; x &lt; rect.right; x++)
            {
                COLORREF cr = dcMem.<span class="hljs-built_in">GetPixel</span>(x, y);
                
                BYTE r = <span class="hljs-built_in">Clamp</span>((<span class="hljs-type">int</span>)((<span class="hljs-built_in">GetRValue</span>(cr) - <span class="hljs-number">128</span>) * dContrast + <span class="hljs-number">128</span>));
                BYTE g = <span class="hljs-built_in">Clamp</span>((<span class="hljs-type">int</span>)((<span class="hljs-built_in">GetGValue</span>(cr) - <span class="hljs-number">128</span>) * dContrast + <span class="hljs-number">128</span>));
                BYTE b = <span class="hljs-built_in">Clamp</span>((<span class="hljs-type">int</span>)((<span class="hljs-built_in">GetBValue</span>(cr) - <span class="hljs-number">128</span>) * dContrast + <span class="hljs-number">128</span>));
                
                dcMem.<span class="hljs-built_in">SetPixel</span>(x, y, <span class="hljs-built_in">RGB</span>(r, g, b));
            }
        }
        
        dcMem.<span class="hljs-built_in">SelectObject</span>(pOldBitmap);
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-type">static</span> BYTE <span class="hljs-title">Clamp</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span>
    </span>{
        <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">255</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">255</span>;
        <span class="hljs-keyword">return</span> (BYTE)value;
    }
};
</code></pre>
<h3 data-id="heading-77">ä¸ƒã€æ‰“å°ä¸æ‰“å°é¢„è§ˆ</h3>
<h4 data-id="heading-78">7.1 æ‰“å°æ¶æ„çš„å®ç°</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ”¯æŒæ‰“å°çš„è§†å›¾ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CPrintableView</span> : <span class="hljs-keyword">public</span> CView
{
<span class="hljs-keyword">protected</span>:
    <span class="hljs-comment">// æ‰“å°ç›¸å…³æˆå‘˜</span>
    CPrintInfo m_printInfo;
    <span class="hljs-type">int</span> m_nPageWidth;
    <span class="hljs-type">int</span> m_nPageHeight;
    <span class="hljs-type">int</span> m_nCurPage;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnPreparePrinting</span><span class="hljs-params">(CPrintInfo* pInfo)</span>
    </span>{
        <span class="hljs-comment">// è®¾ç½®æ‰“å°å¯¹è¯æ¡†é»˜è®¤å€¼</span>
        pInfo-&gt;<span class="hljs-built_in">SetMaxPage</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">// å‡è®¾æœ€å¤š10é¡µ</span>
        pInfo-&gt;<span class="hljs-built_in">SetMinPage</span>(<span class="hljs-number">1</span>);
        
        <span class="hljs-comment">// è°ƒç”¨DoPreparePrintingæ˜¾ç¤ºæ‰“å°å¯¹è¯æ¡†</span>
        <span class="hljs-built_in">DoPreparePrinting</span>(pInfo);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnBeginPrinting</span><span class="hljs-params">(CDC* pDC, CPrintInfo* pInfo)</span>
    </span>{
        <span class="hljs-comment">// è·å–æ‰“å°æœºDCèƒ½åŠ›</span>
        m_nPageWidth = pDC-&gt;<span class="hljs-built_in">GetDeviceCaps</span>(HORZRES);
        m_nPageHeight = pDC-&gt;<span class="hljs-built_in">GetDeviceCaps</span>(VERTRES);
        
        <span class="hljs-comment">// è®¡ç®—æ€»é¡µæ•°</span>
        CMyDocument* pDoc = <span class="hljs-built_in">GetDocument</span>();
        <span class="hljs-type">int</span> nTotalLines = pDoc-&gt;<span class="hljs-built_in">GetLineCount</span>();
        <span class="hljs-type">int</span> nLinesPerPage = m_nPageHeight / <span class="hljs-number">20</span>; <span class="hljs-comment">// å‡è®¾æ¯è¡Œ20åƒç´ </span>
        
        pInfo-&gt;<span class="hljs-built_in">SetMaxPage</span>((nTotalLines + nLinesPerPage - <span class="hljs-number">1</span>) / nLinesPerPage);
        
        <span class="hljs-comment">// åˆ›å»ºæ‰“å°å­—ä½“</span>
        LOGFONT lfPrint = {<span class="hljs-number">0</span>};
        lfPrint.lfHeight = <span class="hljs-number">-15</span>; <span class="hljs-comment">// æ‰“å°å­—ä½“ç¨å°</span>
        lfPrint.lfWeight = FW_NORMAL;
        <span class="hljs-built_in">lstrcpy</span>(lfPrint.lfFaceName, _T(<span class="hljs-string">"å®‹ä½“"</span>));
        m_fontPrint.<span class="hljs-built_in">CreateFontIndirect</span>(&amp;lfPrint);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnPrint</span><span class="hljs-params">(CDC* pDC, CPrintInfo* pInfo)</span>
    </span>{
        m_nCurPage = pInfo-&gt;m_nCurPage;
        
        <span class="hljs-comment">// è®¾ç½®æ˜ å°„æ¨¡å¼</span>
        pDC-&gt;<span class="hljs-built_in">SetMapMode</span>(MM_TEXT);
        
        <span class="hljs-comment">// è®¾ç½®å­—ä½“</span>
        CFont* pOldFont = pDC-&gt;<span class="hljs-built_in">SelectObject</span>(&amp;m_fontPrint);
        
        <span class="hljs-comment">// æ‰“å°é¡µçœ‰</span>
        <span class="hljs-built_in">PrintHeader</span>(pDC);
        
        <span class="hljs-comment">// æ‰“å°å†…å®¹</span>
        <span class="hljs-built_in">PrintPageContent</span>(pDC, pInfo-&gt;m_nCurPage);
        
        <span class="hljs-comment">// æ‰“å°é¡µè„š</span>
        <span class="hljs-built_in">PrintFooter</span>(pDC);
        
        pDC-&gt;<span class="hljs-built_in">SelectObject</span>(pOldFont);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">OnEndPrinting</span><span class="hljs-params">(CDC* <span class="hljs-comment">/*pDC*/</span>, CPrintInfo* <span class="hljs-comment">/*pInfo*/</span>)</span>
    </span>{
        <span class="hljs-comment">// æ¸…ç†æ‰“å°èµ„æº</span>
        m_fontPrint.<span class="hljs-built_in">DeleteObject</span>();
    }
    
<span class="hljs-keyword">protected</span>:
    CFont m_fontPrint;
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintHeader</span><span class="hljs-params">(CDC* pDC)</span>
    </span>{
        CString strHeader;
        strHeader.<span class="hljs-built_in">Format</span>(_T(<span class="hljs-string">"ç¬¬ %d é¡µ"</span>), m_nCurPage);
        
        pDC-&gt;<span class="hljs-built_in">TextOut</span>(<span class="hljs-number">100</span>, <span class="hljs-number">50</span>, strHeader);
        
        <span class="hljs-comment">// ç»˜åˆ¶é¡µçœ‰çº¿</span>
        pDC-&gt;<span class="hljs-built_in">MoveTo</span>(<span class="hljs-number">50</span>, <span class="hljs-number">80</span>);
        pDC-&gt;<span class="hljs-built_in">LineTo</span>(m_nPageWidth - <span class="hljs-number">50</span>, <span class="hljs-number">80</span>);
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintPageContent</span><span class="hljs-params">(CDC* pDC, <span class="hljs-type">int</span> nPage)</span>
    </span>{
        CMyDocument* pDoc = <span class="hljs-built_in">GetDocument</span>();
        
        <span class="hljs-comment">// è®¡ç®—æœ¬é¡µæ˜¾ç¤ºçš„è¡ŒèŒƒå›´</span>
        <span class="hljs-type">int</span> nLinesPerPage = (m_nPageHeight - <span class="hljs-number">150</span>) / <span class="hljs-number">20</span>; <span class="hljs-comment">// è€ƒè™‘é¡µçœ‰é¡µè„š</span>
        <span class="hljs-type">int</span> nStartLine = (nPage - <span class="hljs-number">1</span>) * nLinesPerPage;
        <span class="hljs-type">int</span> nEndLine = <span class="hljs-built_in">min</span>(nStartLine + nLinesPerPage, 
                          pDoc-&gt;<span class="hljs-built_in">GetLineCount</span>());
        
        <span class="hljs-comment">// é€è¡Œæ‰“å°</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = nStartLine; i &lt; nEndLine; i++)
        {
            <span class="hljs-type">int</span> y = <span class="hljs-number">100</span> + (i - nStartLine) * <span class="hljs-number">20</span>;
            pDC-&gt;<span class="hljs-built_in">TextOut</span>(<span class="hljs-number">100</span>, y, pDoc-&gt;<span class="hljs-built_in">GetLine</span>(i));
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintFooter</span><span class="hljs-params">(CDC* pDC)</span>
    </span>{
        CString strFooter = CTime::<span class="hljs-built_in">GetCurrentTime</span>().<span class="hljs-built_in">Format</span>(_T(<span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span>));
        
        <span class="hljs-comment">// ç»˜åˆ¶é¡µè„šçº¿</span>
        pDC-&gt;<span class="hljs-built_in">MoveTo</span>(<span class="hljs-number">50</span>, m_nPageHeight - <span class="hljs-number">70</span>);
        pDC-&gt;<span class="hljs-built_in">LineTo</span>(m_nPageWidth - <span class="hljs-number">50</span>, m_nPageHeight - <span class="hljs-number">70</span>);
        
        <span class="hljs-comment">// æ‰“å°é¡µè„šæ–‡æœ¬</span>
        pDC-&gt;<span class="hljs-built_in">TextOut</span>(<span class="hljs-number">100</span>, m_nPageHeight - <span class="hljs-number">50</span>, strFooter);
    }
};
</code></pre>
<h3 data-id="heading-79">å…«ã€æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-80">8.1 GDIèµ„æºæ³„æ¼æ£€æµ‹</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _DEBUG</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CGdiLeakDetector</span>
{
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">static</span> <span class="hljs-type">int</span> m_nGdiObjectsStart;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">CGdiLeakDetector</span>()
    {
        <span class="hljs-comment">// è®°å½•åˆå§‹GDIå¯¹è±¡æ•°é‡</span>
        m_nGdiObjectsStart = <span class="hljs-built_in">GetGuiResources</span>(<span class="hljs-built_in">GetCurrentProcess</span>(), 
                                            GR_GDIOBJECTS);
    }
    
    ~<span class="hljs-built_in">CGdiLeakDetector</span>()
    {
        <span class="hljs-comment">// æ£€æŸ¥GDIå¯¹è±¡æ³„æ¼</span>
        <span class="hljs-type">int</span> nGdiObjectsEnd = <span class="hljs-built_in">GetGuiResources</span>(<span class="hljs-built_in">GetCurrentProcess</span>(), 
                                            GR_GDIOBJECTS);
        
        <span class="hljs-keyword">if</span> (nGdiObjectsEnd &gt; m_nGdiObjectsStart)
        {
            <span class="hljs-built_in">TRACE</span>(_T(<span class="hljs-string">"è­¦å‘Šï¼šæ£€æµ‹åˆ°å¯èƒ½çš„GDIå¯¹è±¡æ³„æ¼ã€‚\n"</span>));
            <span class="hljs-built_in">TRACE</span>(_T(<span class="hljs-string">"åˆå§‹: %d, ç»“æŸ: %d, æ³„æ¼: %d\n"</span>), 
                  m_nGdiObjectsStart, nGdiObjectsEnd,
                  nGdiObjectsEnd - m_nGdiObjectsStart);
            
            <span class="hljs-comment">// åœ¨è°ƒè¯•æ—¶è§¦å‘æ–­ç‚¹</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsDebuggerPresent</span>())
            {
                <span class="hljs-built_in">DebugBreak</span>();
            }
        }
    }
};

<span class="hljs-comment">// åœ¨åº”ç”¨ç¨‹åºç±»ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CMyApp</span> : <span class="hljs-keyword">public</span> CWinApp
{
<span class="hljs-keyword">private</span>:
    CGdiLeakDetector m_gdiDetector;
    <span class="hljs-comment">// ...</span>
};
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<h4 data-id="heading-81">8.2 ç»˜å›¾ç¼“å­˜ä¸å¢é‡æ›´æ–°</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CDrawingCache</span>
{
<span class="hljs-keyword">private</span>:
    CBitmap m_bmpCache;        <span class="hljs-comment">// ç¼“å­˜ä½å›¾</span>
    CRect m_rectCache;         <span class="hljs-comment">// ç¼“å­˜åŒºåŸŸ</span>
    BOOL m_bCacheValid;        <span class="hljs-comment">// ç¼“å­˜æœ‰æ•ˆæ€§æ ‡å¿—</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">CDrawingCache</span>() : <span class="hljs-built_in">m_bCacheValid</span>(FALSE) {}
    
    <span class="hljs-comment">// æ›´æ–°ç¼“å­˜</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">UpdateCache</span><span class="hljs-params">(CDC* pDC, <span class="hljs-type">const</span> CRect&amp; rect)</span>
    </span>{
        <span class="hljs-keyword">if</span> (!m_bCacheValid || m_rectCache != rect)
        {
            <span class="hljs-comment">// åˆ›å»ºæˆ–é‡æ–°åˆ›å»ºç¼“å­˜ä½å›¾</span>
            <span class="hljs-keyword">if</span> (m_bmpCache.<span class="hljs-built_in">GetSafeHandle</span>() == <span class="hljs-literal">NULL</span> || 
                m_rectCache != rect)
            {
                m_bmpCache.<span class="hljs-built_in">DeleteObject</span>();
                m_bmpCache.<span class="hljs-built_in">CreateCompatibleBitmap</span>(pDC, 
                                                 rect.<span class="hljs-built_in">Width</span>(), 
                                                 rect.<span class="hljs-built_in">Height</span>());
                m_rectCache = rect;
            }
            
            <span class="hljs-comment">// ç»˜åˆ¶åˆ°ç¼“å­˜</span>
            CDC dcCache;
            dcCache.<span class="hljs-built_in">CreateCompatibleDC</span>(pDC);
            CBitmap* pOldBmp = dcCache.<span class="hljs-built_in">SelectObject</span>(&amp;m_bmpCache);
            
            <span class="hljs-comment">// ç»˜åˆ¶èƒŒæ™¯å’Œå†…å®¹åˆ°ç¼“å­˜</span>
            <span class="hljs-built_in">DrawToCache</span>(&amp;dcCache, rect);
            
            dcCache.<span class="hljs-built_in">SelectObject</span>(pOldBmp);
            m_bCacheValid = TRUE;
        }
    }
    
    <span class="hljs-comment">// ä»ç¼“å­˜ç»˜åˆ¶åˆ°å±å¹•</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">RenderFromCache</span><span class="hljs-params">(CDC* pDC, <span class="hljs-type">const</span> CPoint&amp; ptDest)</span>
    </span>{
        <span class="hljs-keyword">if</span> (m_bCacheValid)
        {
            CDC dcCache;
            dcCache.<span class="hljs-built_in">CreateCompatibleDC</span>(pDC);
            CBitmap* pOldBmp = dcCache.<span class="hljs-built_in">SelectObject</span>(&amp;m_bmpCache);
            
            pDC-&gt;<span class="hljs-built_in">BitBlt</span>(ptDest.x, ptDest.y, 
                       m_rectCache.<span class="hljs-built_in">Width</span>(), m_rectCache.<span class="hljs-built_in">Height</span>(),
                       &amp;dcCache, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, SRCCOPY);
            
            dcCache.<span class="hljs-built_in">SelectObject</span>(pOldBmp);
        }
    }
    
    <span class="hljs-comment">// ä½¿ç¼“å­˜å¤±æ•ˆ</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InvalidateCache</span><span class="hljs-params">()</span>
    </span>{
        m_bCacheValid = FALSE;
    }
    
    <span class="hljs-comment">// éƒ¨åˆ†ç¼“å­˜å¤±æ•ˆ</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InvalidateCacheRect</span><span class="hljs-params">(<span class="hljs-type">const</span> CRect&amp; rectInvalid)</span>
    </span>{
        <span class="hljs-keyword">if</span> (m_bCacheValid &amp;&amp; m_rectCache.<span class="hljs-built_in">IntersectRect</span>(&amp;rectInvalid))
        {
            <span class="hljs-comment">// åªé‡æ–°ç»˜åˆ¶å—å½±å“çš„éƒ¨åˆ†</span>
            CDC dcCache;
            <span class="hljs-function">CClientDC <span class="hljs-title">dcScreen</span><span class="hljs-params">(<span class="hljs-literal">NULL</span>)</span></span>;
            dcCache.<span class="hljs-built_in">CreateCompatibleDC</span>(&amp;dcScreen);
            CBitmap* pOldBmp = dcCache.<span class="hljs-built_in">SelectObject</span>(&amp;m_bmpCache);
            
            <span class="hljs-comment">// æ¸…é™¤å—å½±å“åŒºåŸŸ</span>
            <span class="hljs-function">CBrush <span class="hljs-title">brushBg</span><span class="hljs-params">(RGB(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>))</span></span>;
            dcCache.<span class="hljs-built_in">FillRect</span>(&amp;rectInvalid, &amp;brushBg);
            
            <span class="hljs-comment">// é‡æ–°ç»˜åˆ¶å—å½±å“åŒºåŸŸ</span>
            <span class="hljs-built_in">RedrawInvalidArea</span>(&amp;dcCache, rectInvalid);
            
            dcCache.<span class="hljs-built_in">SelectObject</span>(pOldBmp);
        }
    }
    
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">DrawToCache</span><span class="hljs-params">(CDC* pDC, <span class="hljs-type">const</span> CRect&amp; rect)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">RedrawInvalidArea</span><span class="hljs-params">(CDC* pDC, <span class="hljs-type">const</span> CRect&amp; rect)</span> </span>= <span class="hljs-number">0</span>;
};
</code></pre>
<h3 data-id="heading-82">ä¹ã€ä¸ç°ä»£å›¾å½¢APIçš„å¯¹æ¯”</h3>
<p>è™½ç„¶GDIå·²ç»é€æ¸è¢«Direct2Dã€DirectWriteç­‰ç°ä»£å›¾å½¢APIå–ä»£ï¼Œä½†ç†è§£GDIçš„è®¾è®¡ä»æœ‰ä»·å€¼ï¼š</p>
<ol>
<li><strong>è®¾å¤‡æŠ½è±¡å±‚</strong>ï¼šGDIçš„è®¾å¤‡ä¸Šä¸‹æ–‡æ¦‚å¿µå½±å“äº†åç»­APIçš„è®¾è®¡</li>
<li><strong>èµ„æºç®¡ç†æ¨¡å‹</strong>ï¼šGDIå¯¹è±¡çš„åˆ›å»º/é€‰æ‹©/åˆ é™¤æ¨¡å¼ä¸ºåæ¥çš„èµ„æºç®¡ç†æä¾›äº†å‚è€ƒ</li>
<li><strong>åæ ‡ç³»ç»Ÿ</strong>ï¼šGDIçš„æ˜ å°„æ¨¡å¼ä¸ºå›¾å½¢å˜æ¢å¥ å®šäº†åŸºç¡€</li>
</ol>
<p><strong>è¿ç§»ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>å¯¹äºæ–°é¡¹ç›®ï¼Œæ¨èä½¿ç”¨Direct2D/DirectWriteæˆ–è·¨å¹³å°å›¾å½¢åº“</li>
<li>å¯¹äºç°æœ‰MFCé¡¹ç›®ï¼Œå¯é€æ­¥æ›¿æ¢ç»˜å›¾ä»£ç ï¼ŒåŒæ—¶ä¿ç•™ä¸šåŠ¡é€»è¾‘</li>
<li>GDIä»é€‚ç”¨äºç®€å•çš„UIç»˜åˆ¶å’Œæ‰“å°åŠŸèƒ½</li>
</ul>
<p>MFCçš„GDIç¼–ç¨‹ä»£è¡¨äº†Windowså›¾å½¢ç¼–ç¨‹çš„ä¸€ä¸ªæ—¶ä»£ï¼Œè™½ç„¶æŠ€æœ¯å·²ç»æ¼”è¿›ï¼Œä½†å…¶è®¾è®¡æ€æƒ³å’Œé—®é¢˜è§£å†³æ–¹æ¡ˆä»å¯¹ç†è§£è®¡ç®—æœºå›¾å½¢å­¦åŸºæœ¬åŸç†æœ‰é‡è¦ä»·å€¼ã€‚æŒæ¡GDIä¸ä»…æœ‰åŠ©äºç»´æŠ¤é—ç•™ä»£ç ï¼Œæ›´èƒ½æ·±åˆ»ç†è§£å›¾å½¢ç³»ç»Ÿçš„å·¥ä½œæœºåˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++é“¾è¡¨ç¯æ£€æµ‹ç®—æ³•å®Œå…¨è§£æ]]></title>    <link>https://juejin.cn/post/7581676787379650579</link>    <guid>https://juejin.cn/post/7581676787379650579</guid>    <pubDate>2025-12-09T10:16:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581676787379650579" data-draft-id="7581676787379634195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++é“¾è¡¨ç¯æ£€æµ‹ç®—æ³•å®Œå…¨è§£æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T10:16:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++é“¾è¡¨ç¯æ£€æµ‹ç®—æ³•å®Œå…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T10:16:03.000Z" title="Tue Dec 09 2025 10:16:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é—®é¢˜å®šä¹‰</h2>
<h3 data-id="heading-1">1.1 é“¾è¡¨ç¯é—®é¢˜</h3>
<p>é“¾è¡¨ç¯ï¼ˆLinked List Cycleï¼‰æŒ‡é“¾è¡¨ä¸­æŸä¸ªèŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘äº†é“¾è¡¨ä¸­åœ¨å®ƒä¹‹å‰å‡ºç°çš„èŠ‚ç‚¹ï¼Œå¯¼è‡´é“¾è¡¨å½¢æˆé—­ç¯ç»“æ„ã€‚æ£€æµ‹é“¾è¡¨ç¯æ˜¯æ•°æ®ç»“æ„ä¸ç®—æ³•ä¸­çš„ç»å…¸é—®é¢˜ï¼Œåœ¨å†…å­˜ç®¡ç†ã€ç¼–è¯‘å™¨ä¼˜åŒ–ã€å›¾ç®—æ³•ç­‰é¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ã€‚</p>
<h3 data-id="heading-2">1.2 é—®é¢˜å½¢å¼åŒ–</h3>
<p>ç»™å®šä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ <code>head</code>ï¼Œè¦æ±‚ï¼š</p>
<ol>
<li>åˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨ç¯</li>
<li>å¦‚æœå­˜åœ¨ç¯ï¼Œæ‰¾åˆ°ç¯çš„å…¥å£èŠ‚ç‚¹</li>
<li>åˆ†æç®—æ³•çš„æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦</li>
</ol>
<h2 data-id="heading-3">äºŒã€æ ¸å¿ƒç®—æ³•åŸç†</h2>
<h3 data-id="heading-4">2.1 å“ˆå¸Œè¡¨æ³•ï¼ˆæ ‡è®°æ³•ï¼‰</h3>
<h4 data-id="heading-5">2.1.1 åŸºæœ¬æ€æƒ³</h4>
<p>éå†é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå°†è®¿é—®è¿‡çš„èŠ‚ç‚¹å­˜å‚¨åœ¨å“ˆå¸Œé›†åˆä¸­ã€‚å¦‚æœå½“å‰èŠ‚ç‚¹å·²ç»åœ¨é›†åˆä¸­ï¼Œè¯´æ˜é“¾è¡¨æœ‰ç¯ï¼›å¦‚æœéå†åˆ°é“¾è¡¨æœ«å°¾ï¼ˆnullptrï¼‰ï¼Œåˆ™æ— ç¯ã€‚</p>
<h4 data-id="heading-6">2.1.2 ç®—æ³•æ­¥éª¤</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-number">1.</span> åˆå§‹åŒ–ç©ºå“ˆå¸Œé›†åˆ visited
<span class="hljs-number">2.</span> å½“å‰æŒ‡é’ˆ <span class="hljs-keyword">current</span> æŒ‡å‘å¤´èŠ‚ç‚¹ head
<span class="hljs-number">3.</span> while <span class="hljs-keyword">current</span> <span class="hljs-operator">!=</span> nullptr:
   a. å¦‚æœ <span class="hljs-keyword">current</span> åœ¨ visited ä¸­ï¼Œè¿”å› <span class="hljs-literal">true</span>ï¼ˆæœ‰ç¯ï¼‰
   b. å°† <span class="hljs-keyword">current</span> åŠ å…¥ visited
   c. <span class="hljs-keyword">current</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">current</span><span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>next
<span class="hljs-number">4.</span> è¿”å› <span class="hljs-literal">false</span>ï¼ˆæ— ç¯ï¼‰
</code></pre>
<h4 data-id="heading-7">2.1.3 å¤æ‚åº¦åˆ†æ</h4>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šè®¿é—®ä¸€æ¬¡</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œæœ€åæƒ…å†µéœ€è¦å­˜å‚¨æ‰€æœ‰èŠ‚ç‚¹</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œé€»è¾‘æ¸…æ™°</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦é¢å¤–ç©ºé—´ï¼Œä¸é€‚åˆå†…å­˜å—é™åœºæ™¯</li>
</ul>
<h3 data-id="heading-8">2.2 å¿«æ…¢æŒ‡é’ˆæ³•ï¼ˆFloydåˆ¤åœˆç®—æ³•ï¼‰</h3>
<h4 data-id="heading-9">2.2.1 ç®—æ³•å‘æ˜èƒŒæ™¯</h4>
<p>ç”±è®¡ç®—æœºç§‘å­¦å®¶ Robert W. Floyd äº1967å¹´æå‡ºï¼Œæœ€åˆç”¨äºæ£€æµ‹æœ‰é™çŠ¶æ€æœºä¸­çš„å¾ªç¯ï¼Œåè¢«å¹¿æ³›åº”ç”¨äºé“¾è¡¨ç¯æ£€æµ‹ã€‚</p>
<h4 data-id="heading-10">2.2.2 æ ¸å¿ƒæ€æƒ³</h4>
<p>ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªå¿«æŒ‡é’ˆï¼ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥ï¼‰ï¼Œä¸€ä¸ªæ…¢æŒ‡é’ˆï¼ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ï¼‰ã€‚å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œå¿«æŒ‡é’ˆæœ€ç»ˆä¼šè¿½ä¸Šæ…¢æŒ‡é’ˆï¼ˆç›¸é‡ï¼‰ï¼›å¦‚æœä¸å­˜åœ¨ç¯ï¼Œå¿«æŒ‡é’ˆä¼šå…ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾ã€‚</p>
<h4 data-id="heading-11">2.2.3 ç®—æ³•æ­£ç¡®æ€§è¯æ˜</h4>
<p><strong>å®šç†</strong>ï¼šå¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œå¿«æ…¢æŒ‡é’ˆä¸€å®šä¼šç›¸é‡ã€‚</p>
<p><strong>è¯æ˜</strong>ï¼š
è®¾ï¼š</p>
<ul>
<li>ç¯å¤–éƒ¨åˆ†é•¿åº¦ä¸º Lï¼ˆä»å¤´èŠ‚ç‚¹åˆ°ç¯å…¥å£ï¼‰</li>
<li>ç¯é•¿åº¦ä¸º C</li>
<li>æ…¢æŒ‡é’ˆè¿›å…¥ç¯æ—¶ï¼Œå¿«æŒ‡é’ˆåœ¨ç¯ä¸­çš„ä½ç½®ä¸º kï¼ˆ0 â‰¤ k &lt; Cï¼‰</li>
</ul>
<p>åœ¨ç¯ä¸­ï¼Œå¿«æŒ‡é’ˆç›¸å¯¹äºæ…¢æŒ‡é’ˆçš„é€Ÿåº¦æ˜¯ 1 æ­¥/å•ä½æ—¶é—´ï¼ˆå¿«æŒ‡é’ˆé€Ÿåº¦2ï¼Œæ…¢æŒ‡é’ˆé€Ÿåº¦1ï¼Œç›¸å¯¹é€Ÿåº¦1ï¼‰ã€‚ç”±äºç¯æ˜¯å¾ªç¯çš„ï¼Œå¿«æŒ‡é’ˆæœ€å¤šéœ€è¦ C-1 æ—¶é—´å°±èƒ½è¿½ä¸Šæ…¢æŒ‡é’ˆã€‚</p>
<p>å› æ­¤ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œä»æ…¢æŒ‡é’ˆè¿›å…¥ç¯å¼€å§‹è®¡ç®—ï¼Œç»è¿‡ C-1 æ¬¡ç§»åŠ¨ï¼Œå¿«æ…¢æŒ‡é’ˆå¿…ç„¶ç›¸é‡ã€‚</p>
<h2 data-id="heading-12">ä¸‰ã€ç®—æ³•è¯¦ç»†å®ç°</h2>
<h3 data-id="heading-13">3.1 åŸºç¡€ç»“æ„å®šä¹‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListNode</span> {
    <span class="hljs-type">int</span> val;
    ListNode* next;
    <span class="hljs-built_in">ListNode</span>(<span class="hljs-type">int</span> x) : <span class="hljs-built_in">val</span>(x), <span class="hljs-built_in">next</span>(<span class="hljs-literal">nullptr</span>) {}
    <span class="hljs-built_in">ListNode</span>(<span class="hljs-type">int</span> x, ListNode* next) : <span class="hljs-built_in">val</span>(x), <span class="hljs-built_in">next</span>(next) {}
};
</code></pre>
<h3 data-id="heading-14">3.2 å“ˆå¸Œè¡¨æ³•å®ç°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_set&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">hasCycleHash</span><span class="hljs-params">(ListNode* head)</span> </span>{
        unordered_set&lt;ListNode*&gt; visited;
        
        <span class="hljs-keyword">while</span> (head != <span class="hljs-literal">nullptr</span>) {
            <span class="hljs-comment">// ä½¿ç”¨countæ–¹æ³•æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å·²è®¿é—®</span>
            <span class="hljs-keyword">if</span> (visited.<span class="hljs-built_in">count</span>(head) &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å‘ç°ç¯</span>
            }
            visited.<span class="hljs-built_in">insert</span>(head);  <span class="hljs-comment">// æ ‡è®°èŠ‚ç‚¹å·²è®¿é—®</span>
            head = head-&gt;next;     <span class="hljs-comment">// ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// éå†å®Œæˆï¼Œæ— ç¯</span>
    }
};
</code></pre>
<p><strong>å…³é”®ç‚¹è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>unordered_set::count(key)</code> è¿”å›å…ƒç´ åœ¨é›†åˆä¸­çš„å‡ºç°æ¬¡æ•°ï¼ˆ0æˆ–1ï¼‰</li>
<li><code>unordered_set::insert(key)</code> æ’å…¥å…ƒç´ ï¼Œå¦‚æœå·²å­˜åœ¨åˆ™ä¸é‡å¤æ’å…¥</li>
<li>å“ˆå¸Œè¡¨çš„å¹³å‡æŸ¥æ‰¾å’Œæ’å…¥æ—¶é—´å¤æ‚åº¦ä¸º O(1)</li>
</ul>
<h3 data-id="heading-15">3.3 å¿«æ…¢æŒ‡é’ˆæ³•å®ç°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">hasCycle</span><span class="hljs-params">(ListNode* head)</span> </span>{
        <span class="hljs-comment">// è¾¹ç•Œæƒ…å†µå¤„ç†</span>
        <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">nullptr</span> || head-&gt;next == <span class="hljs-literal">nullptr</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        ListNode* slow = head;  <span class="hljs-comment">// æ…¢æŒ‡é’ˆï¼Œæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥</span>
        ListNode* fast = head;  <span class="hljs-comment">// å¿«æŒ‡é’ˆï¼Œæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥</span>
        
        <span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µï¼šæ£€æµ‹ç¯æ˜¯å¦å­˜åœ¨</span>
        <span class="hljs-keyword">while</span> (fast != <span class="hljs-literal">nullptr</span> &amp;&amp; fast-&gt;next != <span class="hljs-literal">nullptr</span>) {
            slow = slow-&gt;next;           <span class="hljs-comment">// æ…¢æŒ‡é’ˆç§»åŠ¨ä¸€æ­¥</span>
            fast = fast-&gt;next-&gt;next;     <span class="hljs-comment">// å¿«æŒ‡é’ˆç§»åŠ¨ä¸¤æ­¥</span>
            
            <span class="hljs-keyword">if</span> (slow == fast) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œå­˜åœ¨ç¯</span>
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// å¿«æŒ‡é’ˆåˆ°è¾¾æœ«å°¾ï¼Œä¸å­˜åœ¨ç¯</span>
    }
};
</code></pre>
<h2 data-id="heading-16">å››ã€ç¯å…¥å£æ£€æµ‹ç®—æ³•</h2>
<h3 data-id="heading-17">4.1 æ•°å­¦åŸç†æ¨å¯¼</h3>
<p>è¿™æ˜¯å¿«æ…¢æŒ‡é’ˆæ³•æœ€ç²¾å¦™çš„éƒ¨åˆ†ã€‚å½“å¿«æ…¢æŒ‡é’ˆç›¸é‡åï¼Œå¦‚ä½•æ‰¾åˆ°ç¯çš„å…¥å£ï¼Ÿ</p>
<p><strong>è®¾</strong>ï¼š</p>
<ul>
<li>L1ï¼šé“¾è¡¨å¤´åˆ°ç¯å…¥å£çš„è·ç¦»</li>
<li>L2ï¼šç¯å…¥å£åˆ°å¿«æ…¢æŒ‡é’ˆç›¸é‡ç‚¹çš„è·ç¦»</li>
<li>Cï¼šç¯çš„é•¿åº¦</li>
<li>nï¼šå¿«æŒ‡é’ˆåœ¨ç›¸é‡å‰ç»•ç¯çš„åœˆæ•°ï¼ˆn â‰¥ 1ï¼‰</li>
</ul>
<p><strong>å·²çŸ¥æ¡ä»¶</strong>ï¼š</p>
<ol>
<li>å¿«æŒ‡é’ˆé€Ÿåº¦æ˜¯æ…¢æŒ‡é’ˆçš„2å€</li>
<li>ç›¸é‡æ—¶ï¼Œæ…¢æŒ‡é’ˆèµ°äº†ï¼šL1 + L2</li>
<li>å¿«æŒ‡é’ˆèµ°äº†ï¼šL1 + L2 + nC</li>
</ol>
<p><strong>å»ºç«‹æ–¹ç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">2(L1 + L2) = L1 + L2 + <span class="hljs-attr">nC</span>
=&gt; L1 + <span class="hljs-attr">L2</span> = nC
=&gt; <span class="hljs-attr">L1</span> = nC - L2
</code></pre>
<p><strong>å…³é”®å‘ç°</strong>ï¼š</p>
<ul>
<li><code>L1 = (n-1)C + (C - L2)</code></li>
<li><code>C - L2</code> æ˜¯ä»ç›¸é‡ç‚¹ç»§ç»­èµ°åˆ°ç¯å…¥å£çš„è·ç¦»</li>
<li>å› æ­¤ï¼Œä»é“¾è¡¨å¤´èµ° L1 æ­¥ = ä»ç›¸é‡ç‚¹èµ° (n-1)C + (C-L2) æ­¥</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼šä¸€ä¸ªæŒ‡é’ˆä»é“¾è¡¨å¤´å¼€å§‹ï¼Œå¦ä¸€ä¸ªä»ç›¸é‡ç‚¹å¼€å§‹ï¼Œä»¥ç›¸åŒé€Ÿåº¦å‰è¿›ï¼Œå®ƒä»¬å°†åœ¨ç¯å…¥å£ç›¸é‡ã€‚</p>
<h3 data-id="heading-18">4.2 ç¯å…¥å£æ£€æµ‹å®ç°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">ListNode* <span class="hljs-title">detectCycle</span><span class="hljs-params">(ListNode* head)</span> </span>{
        <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">nullptr</span> || head-&gt;next == <span class="hljs-literal">nullptr</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
        }
        
        ListNode* slow = head;
        ListNode* fast = head;
        
        <span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µï¼šæ£€æµ‹ç¯</span>
        <span class="hljs-keyword">while</span> (fast != <span class="hljs-literal">nullptr</span> &amp;&amp; fast-&gt;next != <span class="hljs-literal">nullptr</span>) {
            slow = slow-&gt;next;
            fast = fast-&gt;next-&gt;next;
            
            <span class="hljs-keyword">if</span> (slow == fast) {
                <span class="hljs-comment">// ç¬¬äºŒé˜¶æ®µï¼šæ‰¾åˆ°ç¯å…¥å£</span>
                ListNode* entry = head;  <span class="hljs-comment">// æ–°æŒ‡é’ˆä»é“¾è¡¨å¤´å¼€å§‹</span>
                
                <span class="hljs-keyword">while</span> (entry != slow) {  <span class="hljs-comment">// ä¸¤ä¸ªæŒ‡é’ˆåŒæ­¥å‰è¿›</span>
                    entry = entry-&gt;next;
                    slow = slow-&gt;next;
                }
                
                <span class="hljs-keyword">return</span> entry;  <span class="hljs-comment">// ç›¸é‡ç‚¹å³ä¸ºç¯å…¥å£</span>
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// æ— ç¯</span>
    }
};
</code></pre>
<h2 data-id="heading-19">äº”ã€ç®—æ³•å¤æ‚åº¦å¯¹æ¯”</h2>


























<table><thead><tr><th>ç®—æ³•</th><th>æ—¶é—´å¤æ‚åº¦</th><th>ç©ºé—´å¤æ‚åº¦</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>å“ˆå¸Œè¡¨æ³•</td><td>O(n)</td><td>O(n)</td><td>å®ç°ç®€å•ï¼Œé€»è¾‘æ¸…æ™°</td><td>éœ€è¦é¢å¤–ç©ºé—´</td></tr><tr><td>å¿«æ…¢æŒ‡é’ˆæ³•</td><td>O(n)</td><td>O(1)</td><td>ç©ºé—´æœ€ä¼˜ï¼Œé€‚åˆå†…å­˜å—é™åœºæ™¯</td><td>å®ç°ç¨å¤æ‚ï¼Œéœ€è¦æ•°å­¦ç†è§£</td></tr></tbody></table>
<p><strong>æ—¶é—´å¤æ‚åº¦åˆ†æ</strong>ï¼š</p>
<ul>
<li>å“ˆå¸Œè¡¨æ³•ï¼šæ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸€æ¬¡ï¼Œå“ˆå¸Œæ“ä½œO(1)ï¼Œæ€»O(n)</li>
<li>å¿«æ…¢æŒ‡é’ˆæ³•ï¼šå¿«æŒ‡é’ˆæœ€å¤šéå†é“¾è¡¨ä¸¤æ¬¡ï¼Œæ€»O(n)</li>
</ul>
<p><strong>ç©ºé—´å¤æ‚åº¦åˆ†æ</strong>ï¼š</p>
<ul>
<li>å“ˆå¸Œè¡¨æ³•ï¼šæœ€åå­˜å‚¨æ‰€æœ‰èŠ‚ç‚¹ï¼ŒO(n)</li>
<li>å¿«æ…¢æŒ‡é’ˆæ³•ï¼šåªä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼ŒO(1)</li>
</ul>
<h2 data-id="heading-20">å…­ã€è¾¹ç•Œæƒ…å†µä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-21">6.1 è¾¹ç•Œæƒ…å†µå¤„ç†</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è¾¹ç•Œæƒ…å†µæµ‹è¯•</span>
vector&lt;ListNode*&gt; test_cases = {
    <span class="hljs-literal">nullptr</span>,                    <span class="hljs-comment">// ç©ºé“¾è¡¨</span>
    <span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(<span class="hljs-number">1</span>),           <span class="hljs-comment">// å•èŠ‚ç‚¹æ— ç¯</span>
    <span class="hljs-built_in">makeSelfCycle</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(<span class="hljs-number">1</span>)), <span class="hljs-comment">// å•èŠ‚ç‚¹è‡ªç¯</span>
    <span class="hljs-built_in">makeCycle</span>({<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>}, <span class="hljs-number">0</span>),     <span class="hljs-comment">// ç¯åœ¨å¤´èŠ‚ç‚¹</span>
    <span class="hljs-built_in">makeCycle</span>({<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>}, <span class="hljs-number">2</span>), <span class="hljs-comment">// ç¯åœ¨ä¸­é—´</span>
    <span class="hljs-built_in">makeCycle</span>({<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>}, <span class="hljs-number">4</span>)  <span class="hljs-comment">// ç¯åœ¨å°¾èŠ‚ç‚¹</span>
};
</code></pre>
<h3 data-id="heading-22">6.2 å†…å­˜ç®¡ç†æ³¨æ„äº‹é¡¹</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ›å»ºæµ‹è¯•é“¾è¡¨æ—¶éœ€è¦ç®¡ç†å†…å­˜</span>
<span class="hljs-function">ListNode* <span class="hljs-title">createTestListWithCycle</span><span class="hljs-params">(<span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt;&amp; values, <span class="hljs-type">int</span> cyclePos)</span> </span>{
    <span class="hljs-keyword">if</span> (values.<span class="hljs-built_in">empty</span>()) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    
    vector&lt;ListNode*&gt; nodes;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> val : values) {
        nodes.<span class="hljs-built_in">push_back</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(val));
    }
    
    <span class="hljs-comment">// è¿æ¥èŠ‚ç‚¹</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; nodes.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i++) {
        nodes[i]-&gt;next = nodes[i + <span class="hljs-number">1</span>];
    }
    
    <span class="hljs-comment">// åˆ›å»ºç¯</span>
    <span class="hljs-keyword">if</span> (cyclePos &gt;= <span class="hljs-number">0</span> &amp;&amp; cyclePos &lt; values.<span class="hljs-built_in">size</span>()) {
        nodes.<span class="hljs-built_in">back</span>()-&gt;next = nodes[cyclePos];
    }
    
    <span class="hljs-keyword">return</span> nodes[<span class="hljs-number">0</span>];
}

<span class="hljs-comment">// æµ‹è¯•å®Œæˆåé‡Šæ”¾å†…å­˜</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deleteList</span><span class="hljs-params">(ListNode* head, unordered_set&lt;ListNode*&gt;&amp; visited)</span> </span>{
    <span class="hljs-comment">// æœ‰ç¯é“¾è¡¨éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œé¿å…æ— é™å¾ªç¯</span>
}
</code></pre>
<h2 data-id="heading-23">ä¸ƒã€å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-24">7.1 å†…å­˜æ³„æ¼æ£€æµ‹</h3>
<p>åœ¨åƒåœ¾å›æ”¶å’Œå†…å­˜ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæ£€æµ‹å¾ªç¯å¼•ç”¨å¯ä»¥é¿å…å†…å­˜æ³„æ¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryManager</span> {
<span class="hljs-keyword">private</span>:
    unordered_set&lt;Object*&gt; visited;
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">hasCycleReference</span><span class="hljs-params">(Object* obj)</span> </span>{
        <span class="hljs-comment">// ä½¿ç”¨ç±»ä¼¼é“¾è¡¨åˆ¤ç¯çš„ç®—æ³•æ£€æµ‹å¯¹è±¡å¼•ç”¨ç¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">detectCycleInReferences</span>(obj);
    }
};
</code></pre>
<h3 data-id="heading-25">7.2 å¹¶å‘æ­»é”æ£€æµ‹</h3>
<p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ£€æµ‹èµ„æºåˆ†é…å›¾ä¸­çš„ç¯å¯ä»¥é¢„é˜²æ­»é”ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadlockDetector</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">detectDeadlock</span><span class="hljs-params">(vector&lt;Process&gt;&amp; processes)</span> </span>{
        <span class="hljs-comment">// å°†è¿›ç¨‹ç­‰å¾…å…³ç³»å»ºæ¨¡ä¸ºå›¾ï¼Œæ£€æµ‹ç¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">hasCycleInWaitForGraph</span>(processes);
    }
};
</code></pre>
<h3 data-id="heading-26">7.3 ç¼–è¯‘å™¨ä¼˜åŒ–</h3>
<p>åœ¨ç¼–è¯‘å™¨çš„æ•°æ®æµåˆ†æå’Œæ§åˆ¶æµåˆ†æä¸­ï¼Œæ£€æµ‹å¾ªç¯ç»“æ„ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CompilerOptimizer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">analyzeControlFlow</span><span class="hljs-params">(CFG* cfg)</span> </span>{
        <span class="hljs-comment">// æ£€æµ‹æ§åˆ¶æµå›¾ä¸­çš„ç¯ï¼ˆå¾ªç¯ç»“æ„ï¼‰</span>
        <span class="hljs-built_in">detectLoopsInCFG</span>(cfg);
    }
};
</code></pre>
<h2 data-id="heading-27">å…«ã€æ‰©å±•ä¸å˜ä½“</h2>
<h3 data-id="heading-28">8.1 æ±‚ç¯çš„é•¿åº¦</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">cycleLength</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">hasCycle</span>(head)) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    
    ListNode* slow = head;
    ListNode* fast = head;
    
    <span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µï¼šæ‰¾åˆ°ç›¸é‡ç‚¹</span>
    <span class="hljs-keyword">while</span> (fast &amp;&amp; fast-&gt;next) {
        slow = slow-&gt;next;
        fast = fast-&gt;next-&gt;next;
        <span class="hljs-keyword">if</span> (slow == fast) <span class="hljs-keyword">break</span>;
    }
    
    <span class="hljs-comment">// ç¬¬äºŒé˜¶æ®µï¼šè®¡ç®—ç¯é•¿</span>
    <span class="hljs-type">int</span> length = <span class="hljs-number">1</span>;
    fast = fast-&gt;next;
    <span class="hljs-keyword">while</span> (fast != slow) {
        fast = fast-&gt;next;
        length++;
    }
    
    <span class="hljs-keyword">return</span> length;
}
</code></pre>
<h3 data-id="heading-29">8.2 åˆ¤æ–­ç¯çš„ä½ç½®ç±»å‹</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CycleType</span> {
    NO_CYCLE,
    SELF_CYCLE,      <span class="hljs-comment">// è‡ªç¯</span>
    SMALL_CYCLE,     <span class="hljs-comment">// å°ç¯ï¼ˆé•¿åº¦â‰¤3ï¼‰</span>
    LARGE_CYCLE      <span class="hljs-comment">// å¤§ç¯</span>
};

<span class="hljs-function">CycleType <span class="hljs-title">classifyCycle</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">hasCycle</span>(head)) <span class="hljs-keyword">return</span> NO_CYCLE;
    
    ListNode* entry = <span class="hljs-built_in">detectCycle</span>(head);
    
    <span class="hljs-keyword">if</span> (entry == entry-&gt;next) <span class="hljs-keyword">return</span> SELF_CYCLE;
    
    <span class="hljs-type">int</span> len = <span class="hljs-built_in">cycleLength</span>(head);
    <span class="hljs-keyword">if</span> (len &lt;= <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> SMALL_CYCLE;
    
    <span class="hljs-keyword">return</span> LARGE_CYCLE;
}
</code></pre>
<h2 data-id="heading-30">ä¹ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-31">9.1 ç®—æ³•é€‰æ‹©å»ºè®®</h3>
<ol>
<li><strong>é¢è¯•åœºæ™¯</strong>ï¼šä¼˜å…ˆå®ç°å¿«æ…¢æŒ‡é’ˆæ³•ï¼Œå±•ç°ç®—æ³•ç†è§£æ·±åº¦</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼šæ ¹æ®å†…å­˜çº¦æŸé€‰æ‹©ï¼Œå†…å­˜å……è¶³å¯ç”¨å“ˆå¸Œè¡¨æ³•ï¼ˆæ›´ç¨³å®šï¼‰</li>
<li><strong>ç«èµ›åœºæ™¯</strong>ï¼šå¿«æ…¢æŒ‡é’ˆæ³•ï¼ˆç©ºé—´æ•ˆç‡é«˜ï¼‰</li>
</ol>
<h3 data-id="heading-32">9.2 ç¼–ç æ³¨æ„äº‹é¡¹</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è‰¯å¥½çš„ç¼–ç ä¹ æƒ¯</span>
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">hasCycleBestPractice</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-comment">// 1. ä¼˜å…ˆå¤„ç†è¾¹ç•Œæƒ…å†µ</span>
    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// 2. å˜é‡å‘½åæ¸…æ™°</span>
    ListNode* slowPointer = head;
    ListNode* fastPointer = head;
    
    <span class="hljs-comment">// 3. å¾ªç¯æ¡ä»¶ä¸¥è°¨</span>
    <span class="hljs-keyword">while</span> (fastPointer != <span class="hljs-literal">nullptr</span> &amp;&amp; fastPointer-&gt;next != <span class="hljs-literal">nullptr</span>) {
        <span class="hljs-comment">// 4. ç§»åŠ¨æŒ‡é’ˆåå†æ¯”è¾ƒ</span>
        slowPointer = slowPointer-&gt;next;
        fastPointer = fastPointer-&gt;next-&gt;next;
        
        <span class="hljs-comment">// 5. ä½¿ç”¨æ˜ç¡®çš„æ¯”è¾ƒ</span>
        <span class="hljs-keyword">if</span> (slowPointer == fastPointer) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    }
    
    <span class="hljs-comment">// 6. æ˜ç¡®è¿”å›æ— ç¯</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h3 data-id="heading-33">9.3 å­¦ä¹ è¦ç‚¹</h3>
<ol>
<li><strong>ç†è§£æ•°å­¦åŸç†</strong>ï¼šå¿«æ…¢æŒ‡é’ˆæ³•çš„æ ¸å¿ƒæ˜¯æ•°å­¦æ¨å¯¼</li>
<li><strong>æŒæ¡è¾¹ç•Œå¤„ç†</strong>ï¼šç©ºé“¾è¡¨ã€å•èŠ‚ç‚¹ã€è‡ªç¯ç­‰ç‰¹æ®Šæƒ…å†µ</li>
<li><strong>åˆ†æå¤æ‚åº¦</strong>ï¼šç†è§£æ—¶é—´-ç©ºé—´æƒè¡¡</li>
<li><strong>è”ç³»å®é™…åº”ç”¨</strong>ï¼šäº†è§£ç®—æ³•åœ¨çœŸå®ç³»ç»Ÿä¸­çš„ç”¨é€”</li>
</ol>
<p>é“¾è¡¨ç¯æ£€æµ‹ç®—æ³•ä¸ä»…æ˜¯é¢è¯•é«˜é¢‘é¢˜ï¼Œæ›´æ˜¯ç†è§£æŒ‡é’ˆæ“ä½œã€ç®—æ³•è®¾è®¡å’Œæ•°å­¦æ€ç»´çš„ç»ä½³æ¡ˆä¾‹ã€‚é€šè¿‡æ·±å…¥ç†è§£è¿™ä¸ªé—®é¢˜çš„å¤šç§è§£æ³•ï¼Œå¯ä»¥æå‡è§£å†³å¤æ‚é—®é¢˜çš„èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»è¯¯åˆ¤åˆ°ç²¾å‡†ï¼šæ¸¸æˆç¤¾åŒº AI å®¡æ ¸çš„å·¥ç¨‹åŒ–å®è·µ]]></title>    <link>https://juejin.cn/post/7580606750291951667</link>    <guid>https://juejin.cn/post/7580606750291951667</guid>    <pubDate>2025-12-08T01:58:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580606750291951667" data-draft-id="7580570363602206772" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»è¯¯åˆ¤åˆ°ç²¾å‡†ï¼šæ¸¸æˆç¤¾åŒº AI å®¡æ ¸çš„å·¥ç¨‹åŒ–å®è·µ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-08T01:58:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»è¯¯åˆ¤åˆ°ç²¾å‡†ï¼šæ¸¸æˆç¤¾åŒº AI å®¡æ ¸çš„å·¥ç¨‹åŒ–å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T01:58:51.000Z" title="Mon Dec 08 2025 01:58:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fs3.cn-north-1.amazonaws.com.cn%2Fawschinablog%2Fblogbanner-newnew.png" target="_blank" title="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/blogbanner-newnew.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c4a1d8bb6d54df78712ebd5c0284592~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765763948&amp;x-signature=wF7aKmJvqYKvL53finN92yp%2FX1g%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>æ¸¸æˆç¤¾åŒºä½œä¸ºå…¸å‹çš„ UGCï¼ˆç”¨æˆ·ç”Ÿæˆå†…å®¹ï¼‰åœºæ™¯ï¼Œç”¨æˆ·éå¸ƒå…¨çƒï¼Œæ¶‰åŠä¸­ã€è‹±ã€æ—¥ã€éŸ©ã€ä¿„ã€è¥¿ç­ç‰™è¯­ã€é˜¿æ‹‰ä¼¯è¯­ã€æ³•è¯­ç­‰å¤šç§è¯­è¨€ã€‚è®¨è®ºæ°›å›´æ´»è·ƒï¼Œä½†å…¶ä¸­ä¸å¯é¿å…ä¼šå¤¹æ‚ è¾±éª‚ã€ä»‡æ¨ã€è‰²æƒ…ã€æš´åŠ›ã€æ¶‰æ”¿ ç­‰è¿è§„è¨€è®ºã€‚</p>
<p>å¹³å°éœ€è¦åœ¨ä¸ä¼¤å®³ç¤¾åŒºæ°›å›´çš„å‰æä¸‹ï¼Œåšåˆ°Â <strong>åŠæ—¶ã€å‡†ç¡®çš„å†…å®¹å®¡æ ¸</strong>ã€‚ä½†ä¼ ç»Ÿè§„åˆ™å¼•æ“å®¹æ˜“å‡ºç°â€œè¯¯æ€â€æˆ–â€œæ¼åˆ¤â€ï¼Œç›´æ¥ä¾èµ–å¤§è¯­è¨€æ¨¡å‹å®¡æ ¸åˆå­˜åœ¨Â <strong>å‡†ç¡®ç‡ä¸é«˜ã€åˆ†ç±»ä¸ç¨³å®š</strong>Â çš„é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬é‡åˆ°çš„å®¢æˆ·éœ€æ±‚è¿˜æœ‰ä¸€äº›é¢å¤–æŒ‘æˆ˜ï¼š</p>
<ul>
<li>å®¡æ ¸å¯¹è±¡æ˜¯<strong>é•¿æ–‡æœ¬</strong>ï¼ˆåŠ¨è¾„ä¸Šåƒå­—ç¬¦ï¼‰ï¼›</li>
<li>æ— æ³•é€šè¿‡å‘é‡æ£€ç´¢æˆ– RAG åˆ‡ç‰‡ï¼Œå› ä¸ºé•¿æ–‡æœ¬æ‹†åˆ†åä¸Šä¸‹æ–‡ä¸¢å¤±ï¼Œç›¸å…³åº¦å¾ˆå·®ï¼›</li>
<li>æ¨¡å‹éœ€è¦ä¸€æ¬¡æ€§ç»™å‡ºÂ <strong>åˆ¤å®šç»“æœï¼ˆPass/Reject</strong> <strong>ï¼‰</strong> ï¼Œå¹¶åœ¨ Reject æ—¶æŒ‡å®šÂ <strong>10</strong> <strong>ç§è¿è§„åˆ†ç±»ä¹‹ä¸€</strong>ã€‚</li>
</ul>
<p>åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸ºä¸€å®¶æ¸¸æˆå…¬å¸è½åœ°äº†ä¸€å¥—Â <strong>æç¤ºè¯å·¥ç¨‹ + ReAct</strong> <strong>æ¡†æ¶ +</strong> <strong>å·¥ç¨‹åŒ–æ¶æ„</strong>Â çš„ AI å®¡æ ¸æ–¹æ¡ˆã€‚æœ€ç»ˆæ•´ä½“å‡†ç¡®ç‡æå‡åˆ°äº†Â <strong>81%</strong> ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå¯¹æ¯”åŸºå‡†æ˜¯å®¢æˆ·çš„äººå·¥å®¡æ ¸æ•°æ®ï¼Œè€Œäººå·¥æ ‡æ³¨è¿‡ç¨‹å­˜åœ¨â€œå¤šäººå¤šæ—¥ã€ç¼ºä¹å¤æ ¸â€çš„æƒ…å†µï¼Œå£å¾„å¹¶ä¸å®Œå…¨ç»Ÿä¸€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªèƒ½è¯´æ¨¡å‹çš„ 81% ä¸€è‡´æ€§<strong>å¤§ä½“ä¸Šè¾¾åˆ°äº†äººå·¥å®¡æ ¸çš„æ°´å¹³</strong>ï¼Œå…·ä½“æ•ˆæœè¿˜éœ€ç»“åˆæ›´ä¸¥æ ¼çš„æ ‡æ³¨ä½“ç³»è¿›ä¸€æ­¥éªŒè¯ã€‚</p>
<blockquote>
<p>ğŸ“¢é™æ—¶æ’æ’­ï¼šæ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚</p>
<p>â©å¿«å¿«ç‚¹å‡»è¿›å…¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejinhead_0606%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_0606" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejinhead_0606&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_0606" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹å®éªŒæ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote>
<h2 data-id="heading-1">æ•´ä½“æ–¹æ¡ˆæ¶æ„</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2854ab2d20944099a84c17bcdd3fd2c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765763948&amp;x-signature=e8%2BLZkluVgimOQGbAk1aDnH4d30%3D" alt="299042ed769fca693f09795d0e851c31.png" loading="lazy"/></p>
<h2 data-id="heading-2">å·¥ç¨‹åŒ–è½åœ°èƒ½åŠ›</h2>
<p>åœ¨æ–‡æœ¬å®¡æ ¸é¡¹ç›®ä¸­ï¼Œæç¤ºè¯ä¼˜åŒ–åªæ˜¯å…¶ä¸­ä¸€æ­¥ã€‚çœŸæ­£æ”¯æ’‘ä¸šåŠ¡è½åœ°çš„ï¼Œæ˜¯ä¸€æ•´å¥—Â <strong>å¯è§‚æµ‹ã€å¯å›æ»šã€å¯æ‰©å±•</strong>Â çš„å·¥ç¨‹æ¶æ„ï¼š</p>
<ul>
<li><strong>è“ç»¿éƒ¨ç½²</strong>ï¼šé€šè¿‡ Amazon Bedrock çš„å¤šç‰ˆæœ¬éƒ¨ç½²æœºåˆ¶ï¼Œæç¤ºè¯ä¼˜åŒ–å’Œæ¨¡å‹æ›´æ–°å¯ä»¥å®‰å…¨ä¸Šçº¿ï¼Œæ”¯æŒç°åº¦/å›æ»šã€‚</li>
<li><strong>æ—¥å¿—ä¸åˆ¤ä¾‹åº“</strong>ï¼šæ‰€æœ‰å®¡æ ¸è¯·æ±‚å’Œç»“æœå†™å…¥ DynamoDB / OpenSearchï¼Œç”¨äºåç»­çš„å›æº¯åˆ†æä¸æç¤ºè¯å†è®­ç»ƒã€‚</li>
<li><strong>é…ç½®ä¸æµæ§</strong>ï¼šAmazon AppConfig + æ§åˆ¶ Lambdaï¼Œä¿è¯åœ¨é«˜å¹¶å‘/å¤§æµé‡åœºæ™¯ä¸‹ç³»ç»Ÿç¨³å®šã€‚</li>
<li><strong>ç«¯åˆ°ç«¯å¯ç›‘æ§</strong>ï¼šä»è¯·æ±‚å…¥å£åˆ°æœ€ç»ˆå­˜å‚¨éƒ½æœ‰æ—¥å¿—é“¾è·¯ï¼Œæ–¹ä¾¿å¿«é€Ÿæ’æŸ¥é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-3">æç¤ºè¯å†·å¯åŠ¨é˜¶æ®µï¼šæç¤ºè¯ä» 0 åˆ° 1</h2>
<p>åœ¨æ²¡æœ‰ä»»ä½•â€œé»„é‡‘æç¤ºè¯â€çš„å‰æä¸‹ï¼Œæ‹¿åˆ°å¯ç”¨çš„æç¤ºè¯æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œç”šè‡³å¯ä»¥ç›´æ¥è®©AIç”Ÿæˆä¸€ä¸ªã€‚</p>
<p>ä½†æˆ‘ä»¬è¿™é‡Œé‡‡ç”¨å†·å¯åŠ¨çš„åŠæ³•ï¼Œå…ˆè®©æ¨¡å‹æŠŠå®¢æˆ·ç»™çš„å‡ åƒæ¡æ ·æœ¬è¿‡ä¸€éã€‚æ¯è·‘ä¸€æ¡ï¼Œå°±æ‹¿å®ƒçš„ç»“æœå’Œäººå·¥æ ‡æ³¨æ¯”å¯¹ï¼ŒæŠŠæç¤ºè¯é‡Œæœ‰é—®é¢˜çš„åœ°æ–¹ä¿®æ‰ã€‚è¿™æ ·å¾ªç¯ä¸€è½®ï¼Œç­‰äºå¸®æˆ‘ä»¬å‡‘å‡ºäº†ä¸€ä¸ªâ€œèƒ½è·‘â€çš„åˆå§‹ç‰ˆæœ¬ï¼Œåé¢å†æ…¢æ…¢æ‰“ç£¨ã€‚</p>
<p>æˆ‘ä»¬çš„åšæ³•æ˜¯ï¼š</p>
<ol>
<li>è®©å¤§æ¨¡å‹é€æ¡è¯»å–å®¢æˆ·æä¾›çš„æ•°åƒæ¡äººå·¥å®¡æ ¸æ ·æœ¬ï¼ˆæ¯æ¡éƒ½åŒ…å«æ–‡æœ¬ã€åˆ¤å®šç»“æœä»¥åŠè¿è§„åˆ†ç±»ï¼‰ã€‚</li>
<li>åœ¨é˜…è¯»è¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹ä¼šå°è¯•åŸºäºå·²æœ‰æ ·æœ¬ç”Ÿæˆæç¤ºè¯ã€‚</li>
<li>æ¯è¯»å–ä¸€æ¡æ ·æœ¬ï¼Œå°±å¯¹æç¤ºè¯åšä¸€æ¬¡å¾®è°ƒï¼Œé€æ­¥ä¿®æ­£ä¸åˆç†çš„éƒ¨åˆ†ã€‚</li>
<li>å®Œæˆä¸€è½®å…¨é‡æ ·æœ¬åï¼Œå°±å¾—åˆ°ä¸€ä¸ªÂ <strong>åˆå§‹æç¤ºè¯</strong>ï¼Œä½œä¸ºè¿›ä¸€æ­¥ä¼˜åŒ–çš„åŸºçº¿ã€‚</li>
</ol>
<p>ä¾‹å¦‚ï¼Œæœ€åˆæˆ‘ä»¬ç”Ÿæˆçš„æç¤ºè¯å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">You are a content moderation model.
## Task
Analyze the following user-generated text.
<span class="hljs-number">1</span>. Classify it as <span class="hljs-string">"Pass"</span> or <span class="hljs-string">"Reject"</span>.
<span class="hljs-number">2</span>. If <span class="hljs-string">"Reject"</span>, assign one <span class="hljs-keyword">of</span> these categories:
   - Hate Speech
   - Sexual Content
   - Violence
   - Political Sensitivity
   - Spam / Ads
   - Self-harm
   ...
## Output Format (JSON)
{<span class="hljs-string">"result"</span>: <span class="hljs-string">"Reject"</span>, <span class="hljs-string">"category"</span>: <span class="hljs-string">"Hate Speech"</span>}
</code></pre>
<p>åœ¨å†·å¯åŠ¨é˜¶æ®µï¼Œè¿™ä¸ªæç¤ºè¯çš„å‡†ç¡®ç‡å¹¶ä¸ç®—é«˜ï¼Œå®¹æ˜“å‡ºç°Â <strong>ç°è‰²è¯­å¢ƒè¯¯åˆ¤</strong>ï¼ˆä¾‹å¦‚æŠŠäºŒæ¬¡å…ƒæ¢—è¯¯åˆ¤æˆè‰²æƒ…å†…å®¹ï¼‰ï¼Œæˆ–è€…Â <strong>å¤šè¯­è¨€è¦†ç›–ä¸è¶³</strong>ï¼ˆå¯¹é˜¿æ‹‰ä¼¯è¯­ã€è¥¿ç­ç‰™è¯­ç­‰çš„åˆ¤å®šä¸ç¨³å®šï¼‰ã€‚ä½†å®ƒä¸ºåç»­ä¼˜åŒ–å¥ å®šäº†åŸºç¡€ã€‚</p>
<h2 data-id="heading-4">ReAct æ¡†æ¶å¼•å…¥ï¼šè®©æ¨¡å‹â€œå…ˆæ€è€ƒï¼Œå†è¡ŒåŠ¨â€</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F09%2F29%2Fcommunities-2.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/09/29/communities-2.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b41d7b09a65b43c58286207f71bad4e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765763948&amp;x-signature=WLQZaU4vN9R877rQ5j7QzV4EIXg%3D" alt="" loading="lazy"/></a></p>
<p>å†·å¯åŠ¨é˜¶æ®µå¾—åˆ°çš„æç¤ºè¯è™½ç„¶èƒ½è·‘é€šæµç¨‹ï¼Œä½†åœ¨ä¸€äº›å…³é”®é—®é¢˜ä¸Šä»ç„¶å­˜åœ¨ä¸è¶³ï¼š</p>
<ul>
<li><strong>ç°è‰²è¯­å¢ƒ</strong>ï¼šä¾‹å¦‚äºŒæ¬¡å…ƒæ¢—ã€è®½åˆºè¯­æ°”ï¼Œå®¹æ˜“è¢«è¯¯åˆ¤ä¸ºè¿è§„ã€‚</li>
<li><strong>å¤šè¯­è¨€ä¸€è‡´æ€§</strong>ï¼šæŸäº›è¯­è¨€ï¼ˆå¦‚é˜¿æ‹‰ä¼¯è¯­ã€è¥¿ç­ç‰™è¯­ï¼‰åˆ†ç±»ä¸ç¨³å®šã€‚</li>
<li><strong>è¾“å‡ºéšæœºæ€§</strong>ï¼šç›¸åŒè¾“å…¥å¤šæ¬¡æµ‹è¯•ï¼Œç»“æœå¯èƒ½ä¸åŒã€‚</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨æç¤ºè¯ä¸­å¼•å…¥äº†Â <strong>ReAct</strong> <strong>ï¼ˆReason + Act</strong> <strong>ï¼‰æ¡†æ¶</strong>ã€‚</p>
<p><strong>ReAct</strong> <strong>çš„æ ¸å¿ƒæ€æƒ³</strong>æ˜¯è®©å¤§æ¨¡å‹å…ˆè¿›è¡Œæ˜¾å¼çš„â€œæ¨ç†â€æ­¥éª¤ï¼Œå†åšæœ€ç»ˆçš„â€œè¡ŒåŠ¨â€è¾“å‡ºã€‚è¿™æ ·å¯ä»¥å‡å°‘éšæœºæ€§ï¼Œå¹¶æé«˜å¯è§£é‡Šæ€§ã€‚</p>
<h3 data-id="heading-5">ReAct æ¡†æ¶åœ¨å®¡æ ¸åœºæ™¯ä¸­çš„æ‹†è§£</h3>
<ol>
<li>
<p><strong>Reasoning</strong> <strong>ï¼ˆæ€è€ƒï¼‰</strong> ï¼š</p>
<ul>
<li>Step 1: ç¡®å®šæ–‡æœ¬è¯­è¨€</li>
<li>Step 2: æå–æ½œåœ¨è¿è§„å…³é”®è¯æˆ–çŸ­è¯­</li>
<li>Step 3: å°†å…³é”®è¯ä¸è¿è§„ç±»åˆ«è¿›è¡ŒåŒ¹é…</li>
<li>Step 4: æ ¹æ®ä¸Šä¸‹æ–‡å’Œç±»åˆ«ï¼Œå†³å®š Pass / Reject</li>
</ul>
</li>
<li>
<p><strong>Action</strong> <strong>ï¼ˆè¡ŒåŠ¨ï¼‰</strong> ï¼š</p>
<ul>
<li>è¾“å‡ºæœ€ç»ˆ JSON ç»“æœï¼ˆåˆ¤å®š + ç±»åˆ«ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-6">ç¤ºä¾‹æç¤ºè¯ç‰‡æ®µ</h3>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬åœ¨ ReAct æ¡†æ¶ä¸‹çš„ä¸€éƒ¨åˆ†æç¤ºè¯ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">You are a professional content moderation assistant.  
Follow the steps below before giving the final output:  

<span class="hljs-keyword">Step</span> <span class="hljs-number">1</span>: Identify the language <span class="hljs-keyword">of</span> the <span class="hljs-keyword">text</span>.  
<span class="hljs-keyword">Step</span> <span class="hljs-number">2</span>: Extract any potentially offensive <span class="hljs-built_in">or</span> sensitive words.  
<span class="hljs-keyword">Step</span> <span class="hljs-number">3</span>: Match the extracted words <span class="hljs-keyword">to</span> one <span class="hljs-keyword">of</span> the violation categories.  
<span class="hljs-keyword">Step</span> <span class="hljs-number">4</span>: Decide whether the <span class="hljs-keyword">text</span> <span class="hljs-built_in">is</span> <span class="hljs-string">"Pass"</span> <span class="hljs-built_in">or</span> <span class="hljs-string">"Reject"</span>.  

<span class="hljs-keyword">Finally</span>, output ONLY <span class="hljs-keyword">in</span> the following JSON format:  
{<span class="hljs-string">"result"</span>: <span class="hljs-string">"Reject"</span>, <span class="hljs-string">"category"</span>: <span class="hljs-string">"Hate Speech"</span>}
</code></pre>
<p>è¿™æ ·è®¾è®¡åï¼Œå‡†ç¡®ç‡è™½ä¸é«˜ï¼Œå®¹æ˜“æŠŠäºŒæ¬¡å…ƒæ¢—å½“æˆè‰²æƒ…ï¼Œæˆ–å¯¹å°è¯­ç§åˆ¤å®šä¸ç¨³ã€‚ä½†å®ƒç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªèµ·ç‚¹ã€‚</p>
<h3 data-id="heading-7">ReAct æ¡†æ¶ä¸‹çš„å®ç°ç¤ºä¾‹ï¼ˆPython ä¼ªä»£ç ï¼‰</h3>
<p>åœ¨å·¥ç¨‹è½åœ°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ Agent æ¡†æ¶è°ƒç”¨å¤§æ¨¡å‹ï¼Œæ¥æ‰§è¡Œä¸Šè¿° ReAct æ¨ç†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> strands <span class="hljs-keyword">import</span> Agent, tool
<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">moderation_tool</span>(<span class="hljs-params">text: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
    <span class="hljs-string">"""
    Classify the input text into Pass/Reject and category using ReAct framework.
    """</span>
    reasoning_prompt = <span class="hljs-string">f"""
    Step 1: Identify language.
    Step 2: Extract potentially offensive words or sensitive context.
    Step 3: Match with violation categories.
    Step 4: Decide Pass or Reject.
    Text: <span class="hljs-subst">{text}</span>
    """</span>
    <span class="hljs-comment"># è°ƒç”¨å¤§æ¨¡å‹</span>
    result = llm_call(reasoning_prompt)
    <span class="hljs-keyword">return</span> result
<span class="hljs-comment"># ç¤ºä¾‹è°ƒç”¨</span>
<span class="hljs-built_in">print</span>(moderation_tool(<span class="hljs-string">"This game sucks, I hope the devs all die in a fire."</span>))
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹: {"result": "Reject", "category": "Hate Speech"}</span>
</code></pre>
<p>åœ¨ ReAct æœºåˆ¶ä¸‹ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°æ¨¡å‹çš„è¡¨ç°æ˜æ˜¾æ›´åŠ ç¨³å®šï¼š</p>
<ul>
<li>å¯¹å¤šè¯­è¨€è¾“å…¥çš„åˆ†ç±»ä¸€è‡´æ€§å¢å¼ºï¼›</li>
<li>å¯¹ç°è‰²è¯­å¢ƒï¼ˆå¦‚â€œç©æ¢—â€ï¼‰çš„è¯¯åˆ¤æ˜¾è‘—å‡å°‘ï¼›</li>
<li>å®¡æ ¸ç†ç”±é€æ˜ï¼Œå¯ä»¥å¤ç›˜å’Œè§£é‡Šã€‚</li>
</ul>
<h2 data-id="heading-8">å¤šè½®å¾ªç¯ä¼˜åŒ–ï¼šä» 3 è½®åˆ° 10+ è½®ï¼Œæˆ‘ä»¬å¦‚ä½•é€‰å®š 5 è½®</h2>
<p>åœ¨å¼•å…¥ ReAct ä¹‹åï¼Œæˆ‘ä»¬å¯¹â€œ<strong>æ¯è½®ï¼šå…¨é‡è·‘æ ·æœ¬ â†’</strong> <strong>çº é”™ â†’</strong> <strong>ä¿®æç¤ºè¯</strong>â€çš„é—­ç¯è¿›è¡Œäº†ç³»ç»ŸåŒ–å®éªŒï¼Œå¯¹æ¯”ä¸åŒè½®æ•°çš„æ”¶ç›Šä¸æˆæœ¬ï¼š</p>
<ul>
<li>
<p><strong>3</strong> <strong>è½®ï¼šæ¬ æ‹Ÿåˆ</strong></p>
<ul>
<li>å…¸å‹é—®é¢˜ï¼šä»ç„¶å­˜åœ¨å¤šè¯­è¨€ä¸€è‡´æ€§ä¸è¶³ã€ç°è‰²è¯­å¢ƒè¯¯åˆ¤åå¤šã€‚</li>
<li>ç°è±¡ï¼šæŒ‡æ ‡æå‡æ˜æ˜¾ä½äº 5 è½®ï¼Œå‘ˆâ€œä¸Šå‡æœªé¥±å’Œâ€çŠ¶æ€ã€‚</li>
</ul>
</li>
<li>
<p><strong>5</strong> <strong>è½®ï¼šæ•ˆæœ-</strong> <strong>æˆæœ¬æœ€ä¼˜ç‚¹</strong></p>
<ul>
<li>è¿›å…¥<strong>æ”¶ç›Šé€’å‡åŒºé—´</strong>çš„èµ·ç‚¹ï¼Œå‡†ç¡®ç‡ä¸ç¨³å®šæ€§åŸºæœ¬æ”¶æ•›ã€‚</li>
<li>ä¸ 10 è½®ç›¸æ¯”ï¼Œ<strong>å¢ç›Šä¸æ˜æ˜¾</strong>ï¼Œä½†è®¡ç®—/æ—¶é—´æˆæœ¬æ˜¾è‘—æ›´ä½ã€‚</li>
</ul>
</li>
<li>
<p><strong>10</strong> <strong>è½®ï¼šä¸ 5</strong> <strong>è½®æ¥è¿‘</strong></p>
<ul>
<li>æŒ‡æ ‡æ¥è¿‘ 5 è½®ï¼Œ<strong>å·®å¼‚åœ¨ç»Ÿè®¡è¯¯å·®èŒƒå›´å†…</strong>ã€‚</li>
<li>æˆæœ¬çº¦ä¸º 5 è½®çš„ 2 å€ï¼ˆæ¨ç†è´¹ç”¨ã€æ—¶é—´å ç”¨ã€å¹¶å‘ç®¡ç†ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>10</strong> <strong>è½®ä»¥ä¸Šï¼šå¯èƒ½å‡ºç°è´Ÿé¢å½±å“</strong></p>
<ul>
<li>è¿‡æ‹Ÿåˆäºâ€œç‰¹å®šå®¡æ ¸å‘˜å£å¾„/ç‰¹å®šæ ·æœ¬ç°‡â€ï¼Œæç¤ºè¯<strong>å˜çª„</strong>ã€‚</li>
<li>å¯¹è·¨å¤©ã€è·¨å®¡æ ¸å‘˜ã€è·¨è¯­ç§çš„æ³›åŒ–èƒ½åŠ›<strong>ç•¥æœ‰ä¸‹é™</strong>ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼šåœ¨æˆæœ¬â€”æ”¶ç›Šçš„ç»¼åˆè€ƒé‡ä¸‹ï¼Œæˆ‘ä»¬é€‰æ‹©Â <strong>5</strong> <strong>è½®</strong>Â ä½œä¸ºç”Ÿäº§å»ºè®®ï¼Œå¹¶ç»™å‡º<strong>å®è·µåŒºé—´</strong> <strong>5â€“8</strong> <strong>è½®</strong>ï¼ˆ8 è½®ç”¨äºæ›´ä¸¥æ ¼çš„åœºæ™¯/å…³é”®ä¸Šçº¿å‰çš„ç¨³å¥æ€§æ ¡éªŒï¼‰ã€‚</p>
<h3 data-id="heading-9">ç‰ˆæœ¬å¯¹æ¯”</h3>





















































<table><thead><tr><th/><th>ç‰ˆæœ¬</th><th>è½®æ¬¡</th><th>æ ¸å¿ƒæ”¹åŠ¨</th><th>æ•ˆæœè§‚å¯Ÿ</th><th>ä¸»è¦é—®é¢˜</th></tr></thead><tbody><tr><td>1</td><td>v1</td><td>1</td><td>å†·å¯åŠ¨æç¤ºè¯ï¼Œç›´æ¥åˆ†ç±»</td><td>åŸºçº¿ 72%</td><td>ç°è‰²è¯­å¢ƒè¯¯åˆ¤ã€å¤šè¯­è¨€ä¸ç¨³</td></tr><tr><td>2</td><td>v2</td><td>3</td><td>åŠ è¯­è¨€è¯†åˆ«ã€å…³é”®è¯æå–</td><td>~77â€“79%</td><td>ä»æœ‰æ¬ æ‹Ÿåˆè¿¹è±¡</td></tr><tr><td>3</td><td>v3</td><td>5</td><td>ReAct æ¨ç†é“¾æ¡æ”¶æ•›ã€åˆ†ç±»è¾¹ç•Œç²¾ç‚¼</td><td>81%</td><td>æ ‡æ³¨å™ªå£°æˆä¸ºä¸»é™å› ç´ </td></tr><tr><td>4</td><td>v4</td><td>8</td><td>è§„åˆ™ç²¾ä¿®ã€è¾“å‡ºä¸€è‡´æ€§å¢å¼º</td><td>~81%Â±</td><td>æå‡æ¥è¿‘å™ªå£°å¤©èŠ±æ¿</td></tr><tr><td>5</td><td>v5</td><td>10+</td><td>æ›´ç»†ç²’åº¦è§„åˆ™</td><td><strong>æ”¶ç›Šä¸å¢åé™</strong></td><td>è¿‡æ‹Ÿåˆé£é™©ä¸Šå‡ï¼Œæç¤ºè¯ä¼šè¿‡äºå…·è±¡åŒ–</td></tr></tbody></table>
<h2 data-id="heading-10">Temperature è°ƒå‚ç»éªŒ</h2>
<p>åœ¨æˆ‘ä»¬åå¤è°ƒæç¤ºè¯çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°Â <strong>temperature</strong> <strong>å‚æ•°</strong>Â å¯¹ç»“æœå½±å“è¾ƒå¤§ã€‚</p>
<ul>
<li>
<p><strong>åœ¨è°ƒè¯•å’Œå®éªŒé˜¶æ®µ</strong><br/>
æˆ‘ä»¬ä¼šæŠŠ temperature å¼€å¾—æ¯”è¾ƒé«˜ï¼Œå¤§æ¦‚åœ¨Â <strong>8â€“1.0</strong>ã€‚è¿™æ ·æ¨¡å‹ä¼šæ›´â€œæ´»è·ƒâ€ï¼Œèƒ½ä»ä¸åŒè§’åº¦å»ç†è§£æ–‡æœ¬ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>äºŒæ¬¡å…ƒæ¢—ã€è®½åˆºè¯è¯­ã€è·¨è¯­ç§ç”šè‡³å¤¹æ‚ emoji çš„å†…å®¹ï¼Œé«˜ temperature ä¸‹æ¨¡å‹èƒ½ç»™å‡ºæ›´å¤šè§£é‡Šï¼›</li>
<li>è¿™å¯¹æˆ‘ä»¬æ¥è¯´å¾ˆæœ‰å¸®åŠ©ï¼Œå¯ä»¥æš´éœ²æç¤ºè¯é‡Œæ²¡è€ƒè™‘åˆ°çš„è¾¹è§’æƒ…å†µï¼Œæ–¹ä¾¿æˆ‘ä»¬å¿«é€Ÿæ”¹è¿›ã€‚</li>
</ul>
</li>
<li>
<p><strong>åœ¨çœŸæ­£ä¸Šçº¿çš„æ—¶å€™</strong><br/>
æˆ‘ä»¬æŠŠ temperature æ‹‰åˆ°Â <strong>0â€“0.1</strong>ã€‚</p>
<ul>
<li>è¿™æ ·æ¨¡å‹è¾“å‡ºä¼šå°½é‡å›ºå®šï¼Œä¸ä¼šåŒä¸€æ¡å†…å®¹å‰åç»™å‡ºä¸ä¸€æ ·çš„ç»“æœï¼›</li>
<li>å¯¹å®¡æ ¸ä¸šåŠ¡æ¥è¯´ï¼Œ<strong>ç¨³å®šå’Œå¯è§£é‡Š</strong>æ¯”â€œæœ‰åˆ›é€ åŠ›â€è¦é‡è¦å¾—å¤šã€‚</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬çš„åšæ³•æ˜¯ï¼š<strong>è°ƒè¯•é˜¶æ®µé«˜</strong> <strong>temperature</strong> <strong>ï¼Œç”Ÿäº§ç¯å¢ƒä½ temperature</strong>ï¼Œæ—¢èƒ½æ¢ç´¢é—®é¢˜ï¼Œä¹Ÿèƒ½ä¿è¯ä¸Šçº¿ç¨³å®šã€‚</p>
<h2 data-id="heading-11">å®éªŒç»“æœï¼ˆå£å¾„ä¸å™ªå£°è¯´æ˜ï¼‰</h2>
<ul>
<li><strong>æ•´ä½“å‡†ç¡®ç‡</strong>ï¼š<strong>81%</strong></li>
<li><strong>æ­£å‘å¬å›å‡†ç¡®ç‡ï¼ˆåˆè§„åˆ¤å®šï¼‰</strong> ï¼š<strong>76%</strong></li>
<li><strong>è´Ÿå‘å¬å›å‡†ç¡®ç‡ï¼ˆè¿è§„åˆ¤å®šï¼‰</strong> ï¼š<strong>90%</strong></li>
</ul>
<p><strong>è¯„ä¼°å£å¾„ä¸æ•°æ®å™ªå£°ï¼š</strong></p>
<ul>
<li>åŸºå‡†ä¸ºå®¢æˆ·æä¾›çš„<strong>äººå·¥å®¡æ ¸æ•°æ®</strong>ï¼›å¤šäººã€åˆ†å¤šæ—¥å®Œæˆï¼Œ<strong>æœªå»ºç«‹åŒç›²å¤æ ¸</strong>ï¼Œå£å¾„å­˜åœ¨<strong>å¤©ç„¶ä¸ä¸€è‡´</strong>ã€‚</li>
<li>å› æ­¤ 81% çš„ä¸€è‡´æ€§ï¼Œ<strong>å·²ç»æ¥è¿‘ç”šè‡³å¯èƒ½è¶…è¿‡</strong>å¤šäººäººå·¥çš„ç¨³å®šæ°´å¹³ã€‚</li>
<li>åœ¨å¤šè¯­è¨€ä¸ç°è‰²è¯­å¢ƒï¼ˆç©æ¢—ã€åè®½ï¼‰ä¸Šï¼Œ<strong>ReAct</strong> <strong>æç¤ºè¯</strong>æ˜¾è‘—é™ä½äº†éšæœºè¯¯åˆ¤ï¼Œå¹¶æå‡äº†è·¨è¯­è¨€ä¸€è‡´æ€§ã€‚</li>
</ul>
<h3 data-id="heading-12">ä»£è¡¨æ€§æ¡ˆä¾‹ï¼ˆæ¨¡æ‹ŸçœŸå®æ•°æ®ï¼‰</h3>








































<table><thead><tr><th/><th>æ–‡æœ¬ï¼ˆèŠ‚é€‰ï¼‰</th><th>äººå·¥æ ‡æ³¨</th><th>åŸºçº¿æ¨¡å‹</th><th>ReAct æç¤ºè¯</th></tr></thead><tbody><tr><td>1</td><td>â€œYou are stupid, I hate you.â€</td><td>ä»‡æ¨è¨€è®º</td><td>Pass âŒ</td><td>Reject âœ…ï¼ˆHate Speechï¼‰</td></tr><tr><td>2</td><td>â€œThis waifu is so hot omg ğŸ”¥â€</td><td>åˆè§„ï¼ˆäºŒæ¬¡å…ƒè¯­å¢ƒï¼‰</td><td>Reject âŒ</td><td>Pass âœ…</td></tr><tr><td>3</td><td>â€œThe devs are scammers, I hope they burn.â€</td><td>ä»‡æ¨è¨€è®º</td><td>Reject âœ…</td><td>Reject âœ…ï¼ˆHate Speechï¼‰</td></tr><tr><td>4</td><td>â€œHelloâ€</td><td/><td>Passâœ…</td><td/></tr></tbody></table>
<h2 data-id="heading-13">å·¥ç¨‹å®ç°è¦ç‚¹</h2>
<h3 data-id="heading-14">æ ¸å¿ƒä»£ç </h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_file_validation</span>(<span class="hljs-params">file_path, prompt_template, client, model_id, temperature, max_tokens, logger</span>):
    <span class="hljs-string">"""Process a single file for validation and return results"""</span>
    file_name = os.path.basename(file_path)
    
    logger.info(<span class="hljs-string">f"Validating file: <span class="hljs-subst">{file_name}</span>"</span>)
    
    <span class="hljs-keyword">try</span>:
        df = pd.read_excel(file_path, engine=<span class="hljs-string">'openpyxl'</span>)
        
        <span class="hljs-comment"># Processing Excel data</span>
        <span class="hljs-comment"># ...</span>
        
        results = []
        
        <span class="hljs-comment"># Counters for detailed metrics</span>
        metrics = {
            <span class="hljs-string">"total"</span>: <span class="hljs-built_in">len</span>(data),
            <span class="hljs-string">"pass_samples"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"reject_samples"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"pass_correct"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"reject_correct"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"category_metrics"</span>: defaultdict(<span class="hljs-keyword">lambda</span>: {<span class="hljs-string">"total"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"correct"</span>: <span class="hljs-number">0</span>})
        }
        
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> tqdm(data, desc=<span class="hljs-string">f"Processing <span class="hljs-subst">{file_name}</span>"</span>):
            <span class="hljs-comment"># ...</span>
            <span class="hljs-comment"># Format the prompt with the current text</span>
            prompt = prompt_template.<span class="hljs-built_in">format</span>(text=text)
            
            <span class="hljs-comment"># Get model response</span>
            response = invoke_claude(client, prompt, model_id, temperature, max_tokens, logger)
            
            <span class="hljs-comment"># Extract prediction (0 or 1) from response</span>
            <span class="hljs-keyword">if</span> response:
                <span class="hljs-comment"># Look for Pass/Reject indicators in the response</span>
                lower_response = response.lower()
                
                <span class="hljs-comment"># Check for explicit "Pass" or "Reject" in the response</span>

                <span class="hljs-comment"># Check for numeric indicators</span>
                
                <span class="hljs-comment"># Default to Reject if unclear</span>
                    
                is_correct = pred_label == true_label
                <span class="hljs-keyword">if</span> is_correct:
                    <span class="hljs-keyword">if</span> true_label == <span class="hljs-number">1</span>:
                        metrics[<span class="hljs-string">"pass_correct"</span>] += <span class="hljs-number">1</span>
                    <span class="hljs-keyword">else</span>:
                        metrics[<span class="hljs-string">"reject_correct"</span>] += <span class="hljs-number">1</span>
                        metrics[<span class="hljs-string">"category_metrics"</span>][category][<span class="hljs-string">"correct"</span>] += <span class="hljs-number">1</span>
                    
                results.append({
                    <span class="hljs-string">"text"</span>: text,
                    <span class="hljs-string">"true_label"</span>: true_label,
                    <span class="hljs-string">"pred_label"</span>: pred_label,
                    <span class="hljs-string">"is_correct"</span>: is_correct,
                    <span class="hljs-string">"response"</span>: response,
                    <span class="hljs-string">"category"</span>: category,
                    <span class="hljs-string">"source_file"</span>: file_name
                })
            
            <span class="hljs-comment"># Add a small delay to avoid rate limiting</span>
            time.sleep(<span class="hljs-number">0.5</span>)
        
        <span class="hljs-comment"># Calculate metrics</span>
        <span class="hljs-comment"># ...</span>
        
        logger.info(<span class="hljs-string">f"Completed <span class="hljs-subst">{file_name}</span>: Accuracy=<span class="hljs-subst">{metrics[<span class="hljs-string">'accuracy'</span>]:<span class="hljs-number">.4</span>f}</span>, "</span>
                   <span class="hljs-string">f"Pass=<span class="hljs-subst">{metrics[<span class="hljs-string">'pass_accuracy'</span>]:<span class="hljs-number">.4</span>f}</span>, Reject=<span class="hljs-subst">{metrics[<span class="hljs-string">'reject_accuracy'</span>]:<span class="hljs-number">.4</span>f}</span>"</span>)
        
        <span class="hljs-keyword">return</span> file_name, results, metrics
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.error(<span class="hljs-string">f"Error processing file <span class="hljs-subst">{file_path}</span>: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> file_name, [], {<span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e)}
</code></pre>
<h3 data-id="heading-15">1) æ—¥å¿—ä¸å¯è¿½æº¯æ€§</h3>
<ul>
<li>
<p><strong>ç›®çš„</strong>ï¼šè®°å½•æ¯ä¸ªæ–‡ä»¶ã€æ¯æ¡æ ·æœ¬çš„åˆ¤å®šä¸æŒ‡æ ‡ï¼Œæ”¯æ’‘é—®é¢˜å›æº¯ã€‚</p>
</li>
<li>
<p><strong>å®è·µè¦ç‚¹</strong>ï¼š</p>
<ul>
<li>æ–‡ä»¶ + æ§åˆ¶å°åŒé€šé“æ—¥å¿—ï¼›</li>
<li>å…³é”®ä¿¡æ¯ç»“æ„åŒ–è¾“å‡ºï¼ˆaccuracyã€pass/rejectã€category æŒ‡æ ‡ï¼‰ï¼›</li>
<li>æ¯è½®/æ¯ç‰ˆæœ¬ç”Ÿæˆç‹¬ç«‹ log æ–‡ä»¶ï¼Œä¾¿äºå¯¹æ¯”ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-16">2) æ•°æ®è£…è½½ä¸å¤šæ–‡ä»¶æ‰¹å¤„ç†</h3>
<ul>
<li>
<p><strong>Excel</strong> <strong>åˆ—ä½å¤„ç†</strong>ï¼šæ–‡æœ¬ã€æ ‡ç­¾åˆ—æå–ã€‚</p>
</li>
<li>
<p><strong>è¦ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€ label</strong> <strong>å£å¾„</strong>ï¼š<code>Pass â†’ 1 / Reject â†’ 0</code>ï¼›</li>
<li><strong>ç±»åˆ«ç²¾åº¦</strong>ï¼šå¯¹Â <code>Reject</code>Â çš„ç±»åˆ«è¿›è¡Œ<strong>å•ç‹¬ç»Ÿè®¡</strong>ï¼Œä¾¿äºå‘ç°â€œå¼±ç±»â€ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-17">3) å¤§æ¨¡å‹è°ƒç”¨ä¸æ¨ç†å‚æ•°ï¼ˆä½¿ç”¨botocoreè°ƒç”¨Bedrockï¼‰</h3>
<ul>
<li><strong>é»˜è®¤å‚æ•°</strong>ï¼š<code>temperature=0.0</code>ã€<code>max_tokens=1000</code>ï¼Œç¡®ä¿<strong>å¯é‡å¤ä¸ç¨³å®šè¾“å‡ºï¼Œ</strong> <code>max_tokens</code>è¿‡å¤§å¯¹æ•ˆæœå½±å“æœ‰é™;</li>
<li><strong>è¶…æ—¶/</strong> <strong>é‡è¯•</strong>ï¼š<code>botocore.config.Config</code>ä¸­è®¾ç½®<code>connect_timeout/read_timeout/retries</code>ï¼›</li>
</ul>
<h3 data-id="heading-18">4) æç¤ºè¯æ¨¡æ¿ä¸å ä½</h3>
<ul>
<li>é€šè¿‡<code>prompt_template.format(text=...)</code>Â æ³¨å…¥æ ·æœ¬æ­£æ–‡ã€‚</li>
<li><strong>å»ºè®®</strong>ï¼šæ¨¡æ¿å†…ç»Ÿä¸€çº¦æŸ<strong>å”¯ä¸€</strong> <strong>JSON</strong> <strong>è¾“å‡º</strong>ï¼Œä¾¿äºè§£æï¼›è¾“å‡ºå‰ç½® ReAct æ­¥éª¤ï¼ˆè¯­è¨€è¯†åˆ«ã€å…³é”®è¯æå–ã€ç±»åˆ«åŒ¹é…ã€æœ€ç»ˆåˆ¤å®šï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-19">5) å¹¶å‘éªŒè¯ä¸èŠ‚æµ</h3>
<ul>
<li><strong>å¤šæ–‡ä»¶å¹¶è¡Œ</strong>ï¼š<code>ThreadPoolExecutor</code>Â æŒ‰æ–‡ä»¶ç²’åº¦å¹¶å‘ï¼›</li>
<li><strong>é€Ÿç‡æ§åˆ¶</strong>ï¼š<code>time.sleep(0.5)</code>Â åšåŸºç¡€èŠ‚æµï¼Œé¿å…é™æµï¼Œæ³¨æ„æ‚¨Amazon Web Serviceè´¦å·å†…Quotaï¼›</li>
</ul>
<h3 data-id="heading-20">6) è¯„ä¼°ä¸æŠ¥è¡¨</h3>
<ul>
<li>
<p>è¾“å‡ºå››ä¸ª Sheetï¼š<code>Results / Overall Metrics / File Metrics / Category Metrics</code>Â +Â <code>Prompt</code>ã€‚</p>
</li>
<li>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ul>
<li><code>Category Metrics</code>Â èƒ½å¿«é€Ÿå®šä½<strong>è–„å¼±ç±»åˆ«</strong>ï¼›</li>
<li><code>Prompt</code>Â ç•™å­˜ä½¿<strong>ç‰ˆæœ¬å¯å¤ç°</strong>ï¼›</li>
<li>ç»“åˆæ—¥å¿—å¿«é€Ÿå›æ”¾å¼‚å¸¸æ ·æœ¬ã€‚</li>
</ul>
</li>
</ul>
<p><strong>è¯„ä¼°å£å¾„</strong>ï¼šç»Ÿä¸€ä½¿ç”¨â€œä¸äººå·¥æ ‡æ³¨çš„ä¸€è‡´æ€§â€ä¸ºä¸»æŒ‡æ ‡ï¼ˆOverall/Pass/Reject accuracy + Category accuracyï¼‰ï¼Œå¹¶åœ¨æ–‡ä¸­<strong>æ˜¾å¼å£°æ˜æ ‡æ³¨å™ªå£°</strong>ä¸â€œå¤šå®¡æ ¸å‘˜/å¤šæ—¥/æœªå¤æ ¸â€çš„ç°å®çº¦æŸã€‚</p>
<h2 data-id="heading-21">ç»éªŒæ€»ç»“ï¼ˆé’ˆå¯¹è½®æ•°é€‰æ‹©ä¸æˆæœ¬ï¼‰</h2>
<ul>
<li>
<p><strong>å»ºè®®è½®æ•°</strong>ï¼š<strong>5â€“8</strong> <strong>è½®</strong>ï¼›5 è½®ç”¨äºå¤§å¤šæ•°ç”Ÿäº§åœºæ™¯ï¼Œ8 è½®ç”¨äºä¸Šçº¿å‰ç¨³å¥æ€§æ ¡éªŒã€‚</p>
</li>
<li>
<p><strong>é¿å…è¿‡æ‹Ÿåˆ</strong>ï¼š10 è½®ä»¥ä¸Šå®¹æ˜“å¯¹æŸäº›å®¡æ ¸å‘˜å£å¾„æˆ–å°æ ·æœ¬ç°‡è¿‡æ‹Ÿåˆï¼Œæ³›åŒ–å˜å·®ã€‚</p>
</li>
<li>
<p><strong>æˆæœ¬ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>ä¸²å¹¶ç»“åˆï¼šæ–‡ä»¶çº§å¹¶è¡Œ + æ ·æœ¬çº§èŠ‚æµï¼›</li>
<li>å›ºå®šÂ <code>temperature</code>ï¼Œä¿è¯ä¸€è‡´æ€§ï¼Œå‡å°‘â€œè¿”å·¥è½®â€ï¼›</li>
<li>å¯¹ç±»åˆ«<strong>åˆ†å±‚æŠ½æ ·</strong>åšå°é›†è¯„ä¼°ï¼Œä¼˜å…ˆä¿®â€œå¼±ç±»â€ï¼Œå†å…¨é‡å›å½’ã€‚</li>
<li>åœ¨æœ€ç»ˆå·¥ç¨‹åŒ–å®æ–½æ—¶ï¼Œå¯ä»¥å°†æç¤ºè¯æ”¾åˆ°system promptä¸­ï¼ŒåŒæ—¶å¼€å¯cacheï¼Œä»¥é™ä½æˆæœ¬ã€‚</li>
</ul>
</li>
<li>
<p><strong>JSON</strong> <strong>ä»…è¾“å‡ºä¸è§£æå¥å£®æ€§</strong></p>
<ul>
<li>å¼ºè°ƒè¾“å‡ºæ ¼å¼çš„è§„èŒƒåŒ–ï¼Œé™ä½å¯¹è¾“å‡ºç»“æœçš„ä¸ç»Ÿä¸€å¢åŠ ç”Ÿäº§ç³»ç»Ÿçš„ä¸ç¡®å®šæ€§ã€‚</li>
<li>éƒ¨åˆ†æç¤ºè¯</li>
</ul>
</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F09%2F29%2Fcommunities-3.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/09/29/communities-3.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce09ff6490fc4094bb656ab04d2d485c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765763948&amp;x-signature=wSwcENFAjfgJ9IWsuVIxTsR9fGM%3D" alt="" loading="lazy"/></a></p>
<ul>
<li>è¾“å‡º</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F09%2F29%2Fcommunities-4.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/09/29/communities-4.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8e04bd15b444a48aad8fe053f93961a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765763948&amp;x-signature=sljqwQ4T9NXdLfOgfmw%2Bx2p%2F5Rg%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-22">è½åœ°ç»éªŒ</h2>
<p>åœ¨æ•´ä¸ªé¡¹ç›®è½åœ°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç§¯ç´¯äº†å‡ æ¡å…³é”®ç»éªŒï¼š</p>
<ol>
<li><strong>æç¤ºè¯å¿…é¡»è´´åˆä¸šåŠ¡æ ‡æ³¨ä½“ç³»:</strong> é€šç”¨çš„â€œå†…å®¹å®‰å…¨â€æç¤ºè¯è¿œè¿œä¸å¤Ÿã€‚åªæœ‰ç»“åˆå®¢æˆ·çš„ 10 ç±»è¿è§„åˆ†ç±»ï¼Œå¹¶ä¸æ–­å¯¹ç…§äººå·¥å®¡æ ¸æ ·æœ¬ä¿®æ­£ï¼Œæ‰èƒ½è®©æ¨¡å‹è¾“å‡ºç»“æœå’Œä¸šåŠ¡å£å¾„ä¿æŒä¸€è‡´ã€‚</li>
<li><strong>ReAct</strong> <strong>æ¡†æ¶å¸¦æ¥äº†å¯è§£é‡Šæ€§:</strong> æ¨¡å‹å…ˆè¿›è¡Œâ€œæ€è€ƒâ€ï¼Œå†ç»™å‡ºâ€œè¡ŒåŠ¨â€ï¼Œè®©æ¯ä¸€æ­¥é€»è¾‘æ›´åŠ é€æ˜ã€‚æˆ‘ä»¬å¯ä»¥å±•ç¤ºæ¨¡å‹çš„æ¨ç†é€»è¾‘ï¼ˆè¯­è¨€è¯†åˆ«ã€å…³é”®è¯æå–ã€ç±»åˆ«åŒ¹é…ï¼‰ï¼Œå¢å¼ºäº†å®¡æ ¸ç»“è®ºçš„å¯ä¿¡åº¦ã€‚</li>
<li><strong>æ•°æ®è´¨é‡æ˜¯ä¸Šé™ï¼Œæç¤ºè¯ä¼˜åŒ–æ˜¯ä¸‹é™:</strong> æˆ‘ä»¬ä½¿ç”¨çš„äººå·¥å®¡æ ¸æ•°æ®å­˜åœ¨å¤šäººã€åˆ†å¤šæ—¥å®Œæˆã€ç¼ºä¹å¤æ ¸ç­‰é—®é¢˜ï¼Œå¯¼è‡´æ ‡æ³¨ç»“æœæœ¬èº«å¸¦æœ‰å™ªå£°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¨¡å‹çš„å‡†ç¡®ç‡â€œå¤©èŠ±æ¿â€å°±ä¼šå—åˆ°å½±å“ã€‚æ¢å¥è¯è¯´ï¼Œæç¤ºè¯ä¼˜åŒ–èƒ½é€¼è¿‘äººå·¥æ°´å¹³ï¼Œä½†è¦è¿›ä¸€æ­¥çªç ´ï¼Œè¿˜éœ€è¦å®¢æˆ·æ”¹å–„æ•°æ®æ ‡æ³¨æµç¨‹ã€‚</li>
<li><strong>æˆæœ¬ä¸æ•ˆæœçš„æƒè¡¡:</strong> æˆ‘ä»¬åœ¨å®éªŒä¸­éªŒè¯äº† 3ã€5ã€10 è½®è¿­ä»£çš„å·®å¼‚ï¼Œæœ€ç»ˆé€‰æ‹© 5 è½®ä½œä¸ºæœ€ä¼˜ç‚¹ã€‚åŒæ ·åœ°ï¼Œtemperature å‚æ•°åœ¨è°ƒä¼˜é˜¶æ®µè®¾ç½®é«˜å€¼ï¼Œåœ¨ä¸Šçº¿é˜¶æ®µé”å®šä½å€¼ï¼Œä¹Ÿæ˜¯å¹³è¡¡åˆ›é€ æ€§ä¸ç¨³å®šæ€§çš„å·¥ç¨‹å®è·µã€‚</li>
</ol>
<h2 data-id="heading-23">æœªæ¥ä¼˜åŒ–æ–¹å‘</h2>
<ol>
<li>
<p><strong>è‡ªåŠ¨åŒ–æç¤ºè¯ä¼˜åŒ–</strong></p>
<ul>
<li>å¼•å…¥ AutoPromptã€RLHF ç­‰æ–¹æ³•ï¼Œè®©æç¤ºè¯è¿›åŒ–ä¸å†å®Œå…¨ä¾èµ–äººå·¥è¯•é”™ã€‚</li>
<li>åœ¨æ›´å¤šè¯­è¨€ã€æ›´å¤šè¯­å¢ƒä¸‹æŒç»­æ”¶æ•›ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ›´ç»†ç²’åº¦çš„åˆ†ç±»ä¸æ ‡ç­¾</strong></p>
<ul>
<li>å®¢æˆ·çš„ 10 ç±»è¿è§„ç±»åˆ«æ˜¯ç¬¬ä¸€å±‚çº§ã€‚</li>
<li>åç»­å¯ä»¥æ‰©å±•å­ç±»åˆ«ï¼ˆå¦‚â€œä»‡æ¨è¨€è®º â†’ é’ˆå¯¹æ€§åˆ« / ç§æ— / èŒä¸šâ€ï¼‰ï¼Œæ»¡è¶³æ›´ç²¾ç»†åŒ–çš„å†…å®¹æ²»ç†éœ€æ±‚ã€‚</li>
</ul>
</li>
<li>
<p><strong>æˆæœ¬ä¼˜åŒ–</strong></p>
<ul>
<li>ä¼šç»“åˆBedrockçš„cacheç‰¹æ€§ï¼Œå¢åŠ å¯¹system promptã€user promptçš„cacheï¼Œåœ¨ä¿è¯å®¡æ ¸æ•ˆæœçš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½ä¼˜åŒ–æˆæœ¬ã€‚</li>
<li>æˆæœ¬è¯¦æƒ…è¯·å‚é˜…Amazon Bedrockæˆæœ¬é¡µé¢ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fbedrock%2Fpricing%2F" target="_blank" title="https://aws.amazon.com/cn/bedrock/pricing/" ref="nofollow noopener noreferrer">aws.amazon.com/cn/bedrock/â€¦</a>ï¼‰ä¸Claudeæ¨¡å‹æˆæœ¬é¡µé¢ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.claude.com%2Fzh-CN%2Fdocs%2Fabout-claude%2Fpricing" target="_blank" title="https://docs.claude.com/zh-CN/docs/about-claude/pricing" ref="nofollow noopener noreferrer">docs.claude.com/zh-CN/docs/â€¦</a>ï¼‰</li>
</ul>
</li>
</ol>
<h2 data-id="heading-24">ç»“è¯­</h2>
<p>ä»æœ€åˆçš„â€œè¯¯åˆ¤é¢‘å‘â€ï¼Œåˆ°æœ€ç»ˆå®ç°Â <strong>81%</strong> <strong>çš„æ•´ä½“å‡†ç¡®ç‡</strong>ï¼Œæˆ‘ä»¬é€šè¿‡Â <strong>æç¤ºè¯å·¥ç¨‹ + ReAct</strong> <strong>æ¡†æ¶ +</strong> <strong>å·¥ç¨‹åŒ–æ¶æ„</strong>ï¼Œå¸®åŠ©å®¢æˆ·æ„å»ºäº†ä¸€å¥—Â <strong>ç¨³å®šã€å¯è§‚æµ‹ã€å¯æ‰©å±•</strong>Â çš„æ¸¸æˆç¤¾åŒºå®¡æ ¸ç³»ç»Ÿã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹çš„ä»·å€¼åœ¨äºï¼š</p>
<ul>
<li>å®ƒä¸ä»…æ˜¯ä¸€æ¬¡æ¨¡å‹è°ƒä¼˜å°è¯•ï¼Œè€Œæ˜¯ä¸€å¥—Â <strong>å¯å·¥ç¨‹åŒ–å¤åˆ¶çš„æ–¹æ³•è®º</strong>ï¼›</li>
<li>åœ¨Â <strong>UGC</strong> <strong>ç¤¾åŒºã€ç¤¾äº¤å¹³å°ã€ç›´æ’­å®¡æ ¸</strong>Â ç­‰åœºæ™¯ï¼Œéƒ½å¯ä»¥ç›´æ¥å¤ç”¨è¿™å¥—Â <strong>æç¤ºè¯ä¼˜åŒ– +</strong> <strong>æ¶æ„é—­ç¯</strong>Â çš„æ–¹æ¡ˆï¼›</li>
<li>é€šè¿‡Â <strong>æ—¥å¿—ã€åˆ¤ä¾‹åº“ã€è“ç»¿éƒ¨ç½²</strong>Â ç­‰å·¥ç¨‹å®è·µï¼Œæˆ‘ä»¬è®©å®¡æ ¸ç³»ç»Ÿå…·å¤‡äº†Â <strong>ä¸€è‡´æ€§ã€å¯è¿½æº¯æ€§å’Œå¿«é€Ÿè¿­ä»£èƒ½åŠ›</strong>ã€‚</li>
</ul>
<p>æœ€ç»ˆï¼Œè¿™ä¸ªé¡¹ç›®è®©æˆ‘ä»¬çœ‹åˆ°äº†Â <strong>å¤§è¯­è¨€æ¨¡å‹ +</strong> <strong>å·¥ç¨‹åŒ–è½åœ°</strong>Â åœ¨å†…å®¹å®¡æ ¸é¢†åŸŸçš„æ½œåŠ›ï¼š</p>
<ul>
<li><strong>æç¤ºè¯è°ƒä¼˜</strong>Â è®©æ¨¡å‹å¿«é€Ÿé€¼è¿‘ç”šè‡³è¶…è¶Šäººå·¥å®¡æ ¸çš„ä¸€è‡´æ€§ï¼›</li>
<li><strong>å·¥ç¨‹åŒ–æ¶æ„</strong>Â ç¡®ä¿ç³»ç»Ÿåœ¨Â <strong>é«˜å¹¶å‘ã€å¤§è§„æ¨¡å¤šè¯­è¨€</strong>Â å®¡æ ¸åœºæ™¯ä¸‹ä¾æ—§ç¨³å®šè¿è¡Œï¼›</li>
<li><strong>ç«¯åˆ°ç«¯é—­ç¯</strong>Â ä½¿å®¡æ ¸ç³»ç»Ÿä¸ä»…èƒ½è§£å†³å½“ä¸‹é—®é¢˜ï¼Œè¿˜èƒ½é€šè¿‡æ•°æ®å›æµä¸æ–­è‡ªæˆ‘è¿›åŒ–ã€‚</li>
</ul>
<p>*å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c97474c05804f76a9aaec207af439bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765763948&amp;x-signature=H5SQL8MHEiFJ%2FNbNyzoLqiI0eXE%3D" alt="1.webp" loading="lazy"/></p>
<blockquote>
<p>æœ¬æœŸæœ€æ–°å®éªŒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejintail_0415%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0415" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejintail_0415&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0415" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚æ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>â©ï¸[<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejintail_0415%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0415" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejintail_0415&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0415" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿›å…¥å®éªŒ</a>] å³åˆ»å¼€å¯  AI å¼€å‘ä¹‹æ—…</p>
<p>æ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•°æ®ä¼šè¯´è°ï¼Ÿä¸‰å¤§æ¨æ–­æ–¹æ³•å¸®ä½ â€œå®¡é—®â€æ•°æ®çœŸç›¸]]></title>    <link>https://juejin.cn/post/7581097111896571958</link>    <guid>https://juejin.cn/post/7581097111896571958</guid>    <pubDate>2025-12-08T12:26:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581097111896571958" data-draft-id="7581117416811610155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" æ•°æ®ä¼šè¯´è°ï¼Ÿä¸‰å¤§æ¨æ–­æ–¹æ³•å¸®ä½ â€œå®¡é—®â€æ•°æ®çœŸç›¸"/> <meta itemprop="keywords" content="Python,æ•°æ®åˆ†æ,åç«¯"/> <meta itemprop="datePublished" content="2025-12-08T12:26:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             æ•°æ®ä¼šè¯´è°ï¼Ÿä¸‰å¤§æ¨æ–­æ–¹æ³•å¸®ä½ â€œå®¡é—®â€æ•°æ®çœŸç›¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T12:26:42.000Z" title="Mon Dec 08 2025 12:26:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾ˆå¤šåˆšå…¥è¡Œç”šè‡³æƒ³å…¥è¡Œæ•°æ®åˆ†æçš„æœ‹å‹ï¼Œå¾€å¾€ä¼šé™·å…¥ä¸€ä¸ª<strong>è¯¯åŒº</strong>ï¼šä»¥ä¸ºæ•°æ®åˆ†æå°±æ˜¯ä¸åœåœ°<strong>åšæŠ¥è¡¨</strong>ã€<strong>ç”»é¥¼å›¾</strong>ã€‚</p>
<p>å…¶å®ï¼Œæ•°æ®åˆ†æçš„æ ¸å¿ƒé­…åŠ›åœ¨äº <strong>â€œæ¨æ–­â€â€”â€”å³è§å¾®çŸ¥è‘—</strong>ã€‚</p>
<p>åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å¾ˆéš¾è·å–â€œå…¨é‡æ•°æ®â€ï¼ˆæ¯”å¦‚ä½ ä¸å¯èƒ½è°ƒæŸ¥å…¨å›½æ¯ä¸€ä¸ªäººçš„èº«é«˜ï¼‰ï¼Œé‚£ä¹ˆï¼Œå¦‚ä½•é€šè¿‡æ‰‹ä¸­çš„â€œå°æ ·æœ¬â€å»æ¨æµ‹â€œå¤§æ€»ä½“â€çš„è§„å¾‹ï¼Ÿ</p>
<p>è¿™å°±éœ€è¦ç”¨åˆ°ç»Ÿè®¡å­¦ä¸­çš„<strong>æ¨æ–­åˆ†æ</strong>ã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆä»£ç æ¥ä»‹ç»<strong>æ¨æ–­åˆ†æ</strong>ä¸­æœ€å¸¸ç”¨çš„ä¸‰å¤§æ–¹æ³•ï¼š<strong>å‚æ•°ä¼°è®¡</strong>ã€<strong>å‡è®¾æ£€éªŒ</strong>ã€<strong>éå‚æ•°æ£€éªŒ</strong>ã€‚</p>
<h2 data-id="heading-0">1. å‚æ•°ä¼°è®¡</h2>
<p>æƒ³è±¡ä½ åœ¨ç…®ä¸€é”…æ’éª¨æ±¤ã€‚ä½ æƒ³çŸ¥é“æ±¤å’¸ä¸å’¸ï¼Œä½ ä¸ä¼šæŠŠæ•´é”…æ±¤éƒ½å–å®Œï¼Œè€Œæ˜¯èˆ€èµ·ä¸€å‹ºå°ä¸€å°ã€‚</p>
<ul>
<li>é‚£ä¸€å‹ºæ±¤å°±æ˜¯<strong>æ ·æœ¬</strong>ã€‚</li>
<li>é‚£ä¸€å‹ºçš„å’¸åº¦å°±æ˜¯<strong>æ ·æœ¬ç»Ÿè®¡é‡</strong>ã€‚</li>
<li>æ•´é”…æ±¤çš„å’¸åº¦å°±æ˜¯æˆ‘ä»¬è¦çŒœçš„<strong>æ€»ä½“å‚æ•°</strong>ã€‚</li>
</ul>
<p><strong>å‚æ•°ä¼°è®¡</strong>å°±æ˜¯ï¼šæ ¹æ®æ ·æœ¬çš„ç‰¹å¾ï¼ˆæ¯”å¦‚<strong>æ ·æœ¬å‡å€¼</strong>ï¼‰ï¼Œå»ä¼°è®¡æ€»ä½“çš„ç‰¹å¾ï¼ˆæ¯”å¦‚<strong>æ€»ä½“å‡å€¼</strong>ï¼‰ã€‚</p>
<p>å®ƒé€šå¸¸åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li><strong>ç‚¹ä¼°è®¡</strong>ï¼šç›´æ¥è¯´â€œè¿™é”…æ±¤æ˜¯1.5%çš„ç›åº¦â€ã€‚ï¼ˆä½†è¿™å¾ˆå®¹æ˜“è¢«æ‰“è„¸ï¼Œå› ä¸ºå¤ªç»å¯¹ï¼‰</li>
<li><strong>åŒºé—´ä¼°è®¡</strong>ï¼šè¯´â€œè¿™é”…æ±¤çš„ç›åº¦åœ¨1.4%åˆ°1.6%ä¹‹é—´ï¼Œæˆ‘æœ‰95%çš„æŠŠæ¡â€ã€‚ï¼ˆè¿™å°±æ˜¯ç½®ä¿¡åŒºé—´ï¼Œæ›´ç§‘å­¦ï¼‰</li>
</ul>
<p><strong>åŒºé—´ä¼°è®¡</strong>æ˜¯æœ€å¸¸ä½¿ç”¨çš„æ–¹å¼ï¼Œä¸‹é¢é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥æ¼”ç¤º<strong>å‚æ•°ä¼°è®¡</strong>çš„å…·ä½“ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> stats

<span class="hljs-comment"># 1. æ¨¡æ‹Ÿæ•°æ®</span>
np.random.seed(<span class="hljs-number">42</span>)
true_mean = <span class="hljs-number">15</span>  <span class="hljs-comment"># ä¸Šå¸è§†è§’çš„çœŸå®å‡å€¼</span>
sample_salaries = np.random.normal(loc=true_mean, scale=<span class="hljs-number">3</span>, size=<span class="hljs-number">100</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿ100ä¸ªæ ·æœ¬</span>

<span class="hljs-comment"># 2. è®¡ç®—ç»Ÿè®¡é‡</span>
sample_mean = np.mean(sample_salaries)
sample_std = np.std(sample_salaries, ddof=<span class="hljs-number">1</span>)
n = <span class="hljs-built_in">len</span>(sample_salaries)

<span class="hljs-comment"># è®¡ç®—95%ç½®ä¿¡åŒºé—´</span>
<span class="hljs-comment"># è¿™é‡Œçš„ scale ä½¿ç”¨çš„æ˜¯æ ‡å‡†è¯¯ (Standard Error) = æ ·æœ¬æ ‡å‡†å·® / sqrt(n)</span>
conf_int = stats.t.interval(
    confidence=<span class="hljs-number">0.95</span>, df=n - <span class="hljs-number">1</span>, loc=sample_mean, scale=sample_std / np.sqrt(n)
)
lower_bound, upper_bound = conf_int

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ ·æœ¬å‡å€¼: <span class="hljs-subst">{sample_mean:<span class="hljs-number">.2</span>f}</span>k"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"95%ç½®ä¿¡åŒºé—´: [<span class="hljs-subst">{lower_bound:<span class="hljs-number">.2</span>f}</span>k, <span class="hljs-subst">{upper_bound:<span class="hljs-number">.2</span>f}</span>k]"</span>)

<span class="hljs-comment"># è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
æ ·æœ¬å‡å€¼: 14.69k
95%ç½®ä¿¡åŒºé—´: [14.15k, 15.23k]
'''</span>
</code></pre>
<p>å›¾å½¢åŒ–ä¹‹åçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2485481dfd374b6f958cd86bf1d60464~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765801601&amp;x-signature=jHE5ZnE12Qk9cAi9MC1r1J64vjU%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ol>
<li><strong>ç°è‰²çš„æ•£ç‚¹</strong>ï¼šæ˜¯ä½ è°ƒç ”çš„é‚£100ä¸ªæ•°æ®åˆ†æå¸ˆçš„å·¥èµ„ã€‚ä½ ä¼šå‘ç°æœ‰çš„é«˜æœ‰çš„ä½ï¼Œæ•£è½åœ¨å„åœ°ã€‚</li>
<li><strong>è“è‰²çš„ç‚¹å’Œæ¨ªçº¿</strong>ï¼š</li>
</ol>
<ul>
<li><strong>è“ç‚¹</strong>æ˜¯ä½ ç®—å‡ºæ¥çš„æ ·æœ¬å‡å€¼ï¼ˆçº¦14.67kï¼‰ï¼Œè™½ç„¶ä¸å®Œå…¨ç­‰äºçœŸå®çš„15kï¼Œä½†å¾ˆæ¥è¿‘ã€‚</li>
<li><strong>è“è‰²çš„æ¨ªçº¿</strong>å°±æ˜¯ç½®ä¿¡åŒºé—´ã€‚å®ƒçš„å«ä¹‰æ˜¯ï¼šâ€œè™½ç„¶æˆ‘ä¸çŸ¥é“ç¡®åˆ‡æ•°å­—ï¼Œä½†æˆ‘æ•¢æ‰“èµŒï¼ŒçœŸå®æ•°å­—å°±åœ¨è¿™æ ¹è“çº¿çš„èŒƒå›´å†…ã€‚â€</li>
</ul>
<ol start="3">
<li><strong>çº¢è‰²çš„è™šçº¿</strong>ï¼šè¿™æ˜¯çœŸå®çš„æ€»ä½“å‡å€¼ï¼ˆ15kï¼‰ã€‚</li>
<li><strong>ç»“è®º</strong>ï¼šä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œçº¢è‰²çš„è™šçº¿ç¡®å®ç©¿è¿‡äº†è“è‰²çš„æ¨ªçº¿ã€‚æ­å–œä½ ï¼è¿™æ¬¡â€œå‚æ•°ä¼°è®¡â€æˆåŠŸæ•è·äº†çœŸç†ï¼</li>
</ol>
<p>æ•°æ®åˆ†æä¸æ˜¯ç®—å‘½ï¼Œç®—å‡ºæ¥çš„ä¸æ˜¯ä¸€ä¸ªæ­»çš„æ•°å­—ï¼Œè€Œæ˜¯ä¸€ä¸ªç§‘å­¦çš„èŒƒå›´ã€‚</p>
<p>æˆ‘ä»¬å°±æ˜¯ç”¨<strong>å‚æ•°ä¼°è®¡</strong>çš„æ–¹æ³•ï¼Œåœ¨ä¸ç¡®å®šæ€§ä¸­å¯»æ‰¾ç¡®å®šæ€§ã€‚</p>
<h2 data-id="heading-1">2. å‡è®¾æ£€éªŒ</h2>
<p><strong>å‡è®¾æ£€éªŒ</strong>æ˜¯æ•°æ®åˆ†æä¸­æœ€å¸¸ç”¨çš„å†³ç­–å·¥å…·ã€‚å®ƒçš„é€»è¾‘æ˜¯ï¼š<strong>å…ˆç«‹ä¸€ä¸ªFlagï¼ˆå‡è®¾ï¼‰ï¼Œç„¶åçœ‹è¯æ®ï¼ˆæ•°æ®ï¼‰æ˜¯å¦æ‰“è„¸</strong>ã€‚</p>
<ul>
<li><strong>åŸå‡è®¾</strong> ï¼šé€šå¸¸ä»£è¡¨â€œæ— äº‹å‘ç”Ÿâ€ã€â€œæ²¡æœ‰å˜åŒ–â€ã€â€œè¿æ°”å¥½â€ã€‚</li>
<li><strong>å¤‡æ‹©å‡è®¾</strong>ï¼šé€šå¸¸ä»£è¡¨â€œæœ‰äº‹å‘ç”Ÿâ€ã€â€œçœŸçš„æœ‰æ•ˆæœâ€ã€‚</li>
<li><strong>På€¼</strong>ï¼šè¡¨ç¤ºåŸå‡è®¾æˆç«‹æ—¶ï¼Œå‡ºç°å½“å‰æ•°æ®çš„æ¦‚ç‡ã€‚På€¼è¶Šå°ï¼Œè¯´æ˜åŸå‡è®¾è¶Šä¸é è°±ï¼ˆé€šå¸¸ä»¥0.05ä¸ºç•Œé™ï¼‰ã€‚</li>
</ul>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªç”µå•†APPçš„A/Bæµ‹è¯•åœºæ™¯ï¼Œæ¥æ¼”ç¤º<strong>å‡è®¾æ£€éªŒ</strong>çš„ä½¿ç”¨ã€‚</p>
<p>å‡è®¾æŸç”µå•†APPæƒ³æŠŠ <strong>â€œè´­ä¹°â€</strong> æŒ‰é’®ä» <strong>è“è‰²</strong> æ”¹æˆ <strong>çº¢è‰²</strong> ã€‚</p>
<ul>
<li><strong>åŸå‡è®¾</strong>ï¼šçº¢è‰²æŒ‰é’®å’Œè“è‰²æŒ‰é’®çš„è½¬åŒ–ç‡æ²¡åŒºåˆ«ï¼ˆå·®åˆ«çº¯å±å¶ç„¶ï¼‰ã€‚</li>
<li><strong>å¤‡æ‹©å‡è®¾</strong>ï¼šçº¢è‰²æŒ‰é’®çš„è½¬åŒ–ç‡æ˜¾è‘—é«˜äºè“è‰²æŒ‰é’®ã€‚</li>
</ul>
<p>æˆ‘ä»¬é‡‡é›†äº†ä¸¤ç»„ç”¨æˆ·çš„æ¶ˆè´¹é‡‘é¢æ•°æ®æ¥è¿›è¡ŒTæ£€éªŒã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. æ¨¡æ‹ŸABæµ‹è¯•æ•°æ®</span>
<span class="hljs-comment"># è“è‰²æŒ‰é’®ç»„ï¼ˆå¯¹ç…§ç»„ï¼‰ï¼šå¹³å‡æ¶ˆè´¹ 100å…ƒ</span>
group_blue = np.random.normal(loc=<span class="hljs-number">100</span>, scale=<span class="hljs-number">20</span>, size=<span class="hljs-number">1000</span>)
<span class="hljs-comment"># çº¢è‰²æŒ‰é’®ç»„ï¼ˆå®éªŒç»„ï¼‰ï¼šå¹³å‡æ¶ˆè´¹ 105å…ƒ (æˆ‘ä»¬è¦æ£€éªŒè¿™ä¸ªæå‡æ˜¯å¦æ˜¾è‘—)</span>
group_red = np.random.normal(loc=<span class="hljs-number">105</span>, scale=<span class="hljs-number">25</span>, size=<span class="hljs-number">1000</span>)

<span class="hljs-comment"># 2. è¿›è¡Œç‹¬ç«‹æ ·æœ¬Tæ£€éªŒ (T-test)</span>
t_stat, p_val = stats.ttest_ind(group_blue, group_red)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"På€¼: <span class="hljs-subst">{p_val:<span class="hljs-number">.5</span>f}</span>"</span>)

<span class="hljs-comment"># 3. åˆ¤æ–­ç»“è®º</span>
alpha = <span class="hljs-number">0.05</span>
<span class="hljs-keyword">if</span> p_val &lt; alpha:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“è®ºï¼šæ‹’ç»åŸå‡è®¾ã€‚çº¢è‰²æŒ‰é’®å¸¦æ¥çš„æ¶ˆè´¹æå‡æ˜¯ã€ç»Ÿè®¡æ˜¾è‘—ã€‘çš„ï¼Œå»ºè®®å…¨é‡ä¸Šçº¿ï¼"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“è®ºï¼šæ— æ³•æ‹’ç»åŸå‡è®¾ã€‚ä¸¤ç»„å·®å¼‚å¯èƒ½æ˜¯è¯¯å·®å¯¼è‡´çš„ï¼Œå»ºè®®ç»´æŒåŸçŠ¶ã€‚"</span>)

<span class="hljs-comment"># è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
På€¼: 0.00000
ç»“è®ºï¼šæ‹’ç»åŸå‡è®¾ã€‚çº¢è‰²æŒ‰é’®å¸¦æ¥çš„æ¶ˆè´¹æå‡æ˜¯ã€ç»Ÿè®¡æ˜¾è‘—ã€‘çš„ï¼Œå»ºè®®å…¨é‡ä¸Šçº¿ï¼
'''</span>
</code></pre>
<p>å›¾å½¢åŒ–ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/007a998a5b334cc1983d927a81d5cb52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765801601&amp;x-signature=m5GveoNuTzkuYjkksK1WM8NmpFY%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä¸¤æ¡æ›²çº¿ï¼ˆçº¢è‰²å’Œè“è‰²ï¼‰å…¶å®é‡å åº¦å¾ˆé«˜ã€‚</p>
<p>å¯¹äºæ–°æ‰‹ï¼Œçœ‹åˆ°è¿™ä¸ªå›¾ï¼Œå¯èƒ½ä¼šé™·å…¥ä¸€ä¸ªè¯¯åŒºï¼Œè§‰å¾—â€œè¿™ä¸¤åº§å±±å³°çœ‹èµ·æ¥å·®ä¸å¤šå˜›ï¼Œæ²¡å•¥åŒºåˆ«â€ã€‚</p>
<p>ä½†åœ¨ç»Ÿè®¡å­¦ä¸Šï¼Œä¸¤åº§å±±å³°çš„ <strong>â€œé‡å¿ƒâ€</strong> ï¼ˆå‡å€¼ï¼‰å‘ç”Ÿäº† <strong>æ˜¾è‘—åç§»</strong> ã€‚è¿™å°±æ˜¯å‡è®¾æ£€éªŒçš„å¨åŠ›--åœ¨é‡å çš„å™ªå£°ä¸­è¯†åˆ«å‡ºåç§»çš„ä¿¡å·ã€‚</p>
<h2 data-id="heading-2">3. éå‚æ•°ä¼°è®¡</h2>
<p>å‰é¢çš„ <strong>â€œå‚æ•°ä¼°è®¡â€</strong> å’Œ <strong>â€œTæ£€éªŒâ€</strong> éƒ½æœ‰ä¸€ä¸ªå¨‡æ°”çš„è„¾æ°”ï¼šå®ƒä»¬é€šå¸¸å‡è®¾æ•°æ®æ˜¯æœä» <strong>â€œæ­£æ€åˆ†å¸ƒâ€</strong> çš„ï¼ˆä¹Ÿå°±æ˜¯æ¼‚äº®çš„é’Ÿå½¢æ›²çº¿ï¼‰ã€‚</p>
<p>ä½†åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå¾ˆå¤šæ•°æ®å¹¶ä¸æ­£æ€ï¼Œæˆ–è€…æ•°æ®ç”šè‡³æ˜¯å®šåºçš„ï¼ˆæ¯”å¦‚ï¼šéå¸¸æ»¡æ„ã€æ»¡æ„ã€ä¸€èˆ¬ã€ä¸æ»¡æ„ï¼‰ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œä¼ ç»Ÿçš„ <strong>Tæ£€éªŒ</strong> å°±å¤±æ•ˆäº†ï¼Œæˆ‘ä»¬éœ€è¦è¯·å‡º <strong>éå‚æ•°æ£€éªŒ</strong> ã€‚</p>
<p>å®ƒä¸ä¾èµ–æ•°æ®çš„åˆ†å¸ƒå½¢çŠ¶ï¼Œéå¸¸æŠ—é€ ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬è¦å¯¹æ¯”ä¸¤æ¬¾æ‰‹æ¸¸ã€Šç‹è€…è£è€€ã€‹å’Œã€ŠåŸç¥ã€‹ç©å®¶æ¯å¤©çš„æ¸¸ç©æ—¶é•¿ã€‚</p>
<p>ç”±äºã€ŠåŸç¥ã€‹ç©å®¶å¯èƒ½å­˜åœ¨å¤§é‡çš„â€œé•¿å°¾â€ç”¨æˆ·ï¼ˆç©ç‰¹åˆ«ä¹…ï¼‰ï¼Œæ•°æ®å¾€å¾€æ˜¯ä¸¥é‡å³åçš„ï¼Œä¸ç¬¦åˆæ­£æ€åˆ†å¸ƒã€‚</p>
<p>è¿™æ—¶å€™å¯¹æ¯”ä¸¤ç»„æ•°æ®å·®å¼‚ï¼Œå°±ä¸èƒ½ç”¨<strong>Tæ£€éªŒ</strong>ï¼Œæˆ‘ä»¬ä½¿ç”¨<strong>éå‚æ•°ä¼°è®¡</strong>ä¸­çš„ä¸€ç§æ–¹å¼ï¼šæ›¼-æƒ ç‰¹å°¼Uæ£€éªŒ (Mann-Whitney U test)ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. æ¨¡æ‹Ÿéæ­£æ€åˆ†å¸ƒæ•°æ® (ä½¿ç”¨æŒ‡æ•°åˆ†å¸ƒæ¨¡æ‹Ÿç”±åæ•°æ®)</span>
<span class="hljs-comment"># æ¸¸æˆAï¼šå¹³å‡æ—¶é•¿è¾ƒçŸ­</span>
game_a_hours = np.random.exponential(scale=<span class="hljs-number">1.0</span>, size=<span class="hljs-number">100</span>)
<span class="hljs-comment"># æ¸¸æˆBï¼šå¹³å‡æ—¶é•¿è¾ƒé•¿</span>
game_b_hours = np.random.exponential(scale=<span class="hljs-number">1.5</span>, size=<span class="hljs-number">100</span>)

<span class="hljs-comment"># 2. é¦–å…ˆï¼Œæ£€æŸ¥ä¸€ä¸‹æ­£æ€æ€§ (Shapiro-Wilkæ£€éªŒ)</span>
<span class="hljs-comment"># å¦‚æœP &lt; 0.05ï¼Œè¯´æ˜ä¸æ˜¯æ­£æ€åˆ†å¸ƒ</span>
_, p_norm_a = stats.shapiro(game_a_hours)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¸¸æˆAæ­£æ€æ€§æ£€éªŒPå€¼: <span class="hljs-subst">{p_norm_a:<span class="hljs-number">.4</span>f}</span> (å°äº0.05åˆ™éæ­£æ€)"</span>)

<span class="hljs-comment"># 3. ä½¿ç”¨éå‚æ•°æ£€éªŒï¼šMann-Whitney Uæ£€éªŒ</span>
<span class="hljs-comment"># å®ƒå¯ä»¥æ¯”è¾ƒä¸¤ä¸ªç‹¬ç«‹æ ·æœ¬çš„åˆ†å¸ƒæ˜¯å¦å­˜åœ¨å·®å¼‚ï¼ˆä¾§é‡äºä¸­ä½æ•°/ç§©æ¬¡çš„æ¯”è¾ƒï¼‰</span>
u_stat, p_val_nonparam = stats.mannwhitneyu(game_a_hours, game_b_hours, alternative=<span class="hljs-string">'two-sided'</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Mann-Whitney Uæ£€éªŒ På€¼: <span class="hljs-subst">{p_val_nonparam:<span class="hljs-number">.5</span>f}</span>"</span>)

<span class="hljs-keyword">if</span> p_val_nonparam &lt; <span class="hljs-number">0.05</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“è®ºï¼šä¸¤æ¬¾æ¸¸æˆçš„ç©å®¶æ¸¸ç©æ—¶é•¿åˆ†å¸ƒå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“è®ºï¼šä¸¤æ¬¾æ¸¸æˆç©å®¶æ¸¸ç©æ—¶é•¿æ— æ˜¾è‘—å·®å¼‚ã€‚"</span>)

<span class="hljs-comment"># è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
æ¸¸æˆAæ­£æ€æ€§æ£€éªŒPå€¼: 0.0000 (å°äº0.05åˆ™éæ­£æ€)
Mann-Whitney Uæ£€éªŒ På€¼: 0.00003
ç»“è®ºï¼šä¸¤æ¬¾æ¸¸æˆçš„ç©å®¶æ¸¸ç©æ—¶é•¿åˆ†å¸ƒå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚
'''</span>
</code></pre>
<p>å¯è§†åŒ–ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93946f2319514f0799b428ff9ce98157~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765801601&amp;x-signature=YIoZEwYKr5SHRNZpgn1OoZhSI24%3D" alt="" loading="lazy"/></p>
<p>å°½ç®¡æ•°æ®é•¿å¾—æ­ªç“œè£‚æ£ï¼ˆä¸¥é‡å³åï¼‰ï¼Œ<strong>Uæ£€éªŒ</strong>ä¾ç„¶ç¨³å¥åœ°å‘Šè¯‰æˆ‘ä»¬ï¼š<strong>è¿™ä¸¤ç»„æ•°æ®ä¸ä¸€æ ·</strong>ã€‚</p>
<p><strong>Uæ£€éªŒ</strong>æ¯”è¾ƒçš„ä¸ä»…ä»…æ˜¯å¹³å‡å€¼ï¼Œå®ƒæ›´å¤šæ˜¯åœ¨æ¯”è¾ƒ <strong>â€œç§©æ¬¡â€</strong>ï¼ˆ<code>Ranking</code>ï¼‰ã€‚</p>
<p>é€šä¿—ç‚¹è¯´ï¼Œå®ƒå‘ç°å¦‚æœæˆ‘ä»¬æŠŠä¸¤ç»„ç©å®¶æ··åœ¨ä¸€èµ·æ’åï¼Œ<code>Game B</code>çš„ç©å®¶å³ä½¿ä¸çœ‹å…·ä½“æ—¶é•¿ï¼Œæ’åä¹Ÿæ™®éæ¯”<code>Game A</code>çš„ç©å®¶é å‰ã€‚</p>
<p>ä»å›¾ä¸­æ¥çœ‹ï¼Œä½ ä¼šçœ‹åˆ°æ©™è‰²ï¼ˆ<code>Game B</code>ï¼‰çš„å°¾å·´æ˜æ˜¾æ¯”è“è‰²ï¼ˆ<code>Game A</code>ï¼‰æ‹–å¾—æ›´é•¿ã€æ›´åšå®ã€‚</p>
<p>è¿™è¯´æ˜<code>Game B</code>ï¼ˆæ¯”å¦‚ã€ŠåŸç¥ã€‹ï¼‰æ›´å®¹æ˜“è®©ç©å®¶æ²‰æµ¸æ›´ä¹…ï¼Œæˆ–è€…æ‹¥æœ‰æ›´å¤šçš„é‡åº¦ç©å®¶ã€‚</p>
<h2 data-id="heading-3">4. æ€»ç»“</h2>
<p>æ­å–œä½ ï¼ä½ å·²ç»æŒæ¡äº†æ•°æ®<strong>æ¨æ–­åˆ†æ</strong>çš„æ ¸å¿ƒé€»è¾‘ï¼š</p>
<ol>
<li><strong>å‚æ•°ä¼°è®¡</strong>ï¼šå½“ä½ åªæœ‰æ ·æœ¬ï¼Œæƒ³çŸ¥é“æ€»ä½“çš„æ•°å€¼èŒƒå›´æ—¶ä½¿ç”¨ã€‚ï¼ˆæ¯”å¦‚ä¼°ç®—å¹³å‡è–ªèµ„ï¼‰</li>
<li><strong>å‡è®¾æ£€éªŒ</strong>ï¼šå½“ä½ æ•°æ®æ¯”è¾ƒâ€œå®Œç¾â€ï¼ˆæ­£æ€åˆ†å¸ƒï¼‰ï¼Œæƒ³åˆ¤æ–­å·®å¼‚æ˜¯ä¸æ˜¯çœŸçš„æ—¶ä½¿ç”¨ã€‚ï¼ˆæ¯”å¦‚A/Bæµ‹è¯•ï¼‰</li>
<li><strong>éå‚æ•°æ£€éªŒ</strong>ï¼šå½“ä½ æ•°æ®åˆ†å¸ƒå¥‡æ€ªã€æˆ–è€…åªæœ‰æ’å/ç­‰çº§æ•°æ®æ—¶ä½¿ç”¨ã€‚ï¼ˆæ¯”å¦‚è¯„åˆ†å¯¹æ¯”ã€é•¿å°¾æ•°æ®åˆ†æï¼‰</li>
</ol>
<p>è¿™<strong>ä¸‰æ¿æ–§</strong>æ˜¯æ•°æ®åˆ†æå¸ˆè¡Œèµ°æ±Ÿæ¹–çš„å¿…å¤‡æŠ€èƒ½ã€‚æŒæ¡äº†å®ƒä»¬ï¼Œä½ å°±ä¸ä»…ä»…æ˜¯ä¸€ä¸ªâ€œåšè¡¨çš„â€ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½ä»æ•°æ®ä¸­æŒ–æ˜çœŸç›¸çš„â€œä¾¦æ¢â€ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA["è®²è®²åŸå‹é“¾" â€”â€” é¢è¯•å®˜æœ€çˆ±é—®çš„ JavaScript åŸºç¡€]]></title>    <link>https://juejin.cn/post/7581324171398479918</link>    <guid>https://juejin.cn/post/7581324171398479918</guid>    <pubDate>2025-12-08T14:25:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581324171398479918" data-draft-id="7581292270961754122" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="&quot;è®²è®²åŸå‹é“¾&quot; â€”â€” é¢è¯•å®˜æœ€çˆ±é—®çš„ JavaScript åŸºç¡€"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-08T14:25:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            "è®²è®²åŸå‹é“¾" â€”â€” é¢è¯•å®˜æœ€çˆ±é—®çš„ JavaScript åŸºç¡€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T14:25:25.000Z" title="Mon Dec 08 2025 14:25:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript åŸå‹ä¸åŸå‹é“¾ï¼šä»å›°æƒ‘åˆ°å®Œå…¨ç†è§£</h2>
<p>ä»¥å‰åœ¨çœ‹ JavaScript ä»£ç çš„æ—¶å€™ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">4</span>);      <span class="hljs-comment">// 4</span>
arr.<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>);    <span class="hljs-comment">// "1,2,3,4"</span>
arr.<span class="hljs-title function_">toString</span>();   <span class="hljs-comment">// "1,2,3,4"</span>
</code></pre>
<p>æˆ‘æ˜æ˜åªåˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ï¼Œä¸ºä»€ä¹ˆå®ƒèƒ½è°ƒç”¨ <code>push</code>ã€<code>join</code>ã€<code>toString</code> è¿™äº›æ–¹æ³•ï¼Ÿè¿™äº›æ–¹æ³•æ˜¯ä»å“ªæ¥çš„ï¼Ÿ</p>
<p>å†çœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
};

<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'å¼ ä¸‰'</span>);
person.<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// "Hello, I'm å¼ ä¸‰"</span>
</code></pre>
<p><code>person</code> å¯¹è±¡æœ¬èº«æ²¡æœ‰ <code>sayHello</code> æ–¹æ³•ï¼Œä½†å´èƒ½è°ƒç”¨å®ƒã€‚è¿™èƒŒåçš„æœºåˆ¶å°±æ˜¯åŸå‹é“¾ã€‚</p>
<hr/>
<h3 data-id="heading-1">å…ˆææ¸…æ¥šå‡ ä¸ªæ¦‚å¿µ</h3>
<p>åœ¨æ·±å…¥ä¹‹å‰ï¼Œå…ˆæŠŠå‡ ä¸ªå®¹æ˜“æ··æ·†çš„æ¦‚å¿µç†æ¸…æ¥šï¼š</p>
<h4 data-id="heading-2"><code>[[Prototype]]</code>ã€<code>__proto__</code>ã€<code>prototype</code> çš„åŒºåˆ«</h4>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>æ˜¯ä»€ä¹ˆ</th><th>å±äºè°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>[[Prototype]]</code></td><td>å†…éƒ¨å±æ€§</td><td>æ‰€æœ‰å¯¹è±¡</td><td>æŒ‡å‘å¯¹è±¡çš„åŸå‹ï¼Œéšè—å±æ€§</td></tr><tr><td><code>__proto__</code></td><td>è®¿é—®å™¨å±æ€§</td><td>æ‰€æœ‰å¯¹è±¡</td><td>æš´éœ² <code>[[Prototype]]</code>ï¼Œéæ ‡å‡†ä½†å¹¿æ³›æ”¯æŒ</td></tr><tr><td><code>prototype</code></td><td>æ™®é€šå±æ€§</td><td>å‡½æ•°</td><td>å­˜æ”¾ç»™å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•</td></tr></tbody></table>
<p>ç®€å•è¯´ï¼š</p>
<ul>
<li><strong><code>prototype</code></strong> æ˜¯<strong>å‡½æ•°</strong>æ‰æœ‰çš„å±æ€§ï¼Œç”¨æ¥å­˜æ”¾å…±äº«æ–¹æ³•</li>
<li><strong><code>__proto__</code></strong> æ˜¯<strong>æ‰€æœ‰å¯¹è±¡</strong>éƒ½æœ‰çš„å±æ€§ï¼ŒæŒ‡å‘å®ƒçš„åŸå‹å¯¹è±¡</li>
<li><strong><code>[[Prototype]]</code></strong> æ˜¯ <code>__proto__</code> çš„å†…éƒ¨å®ç°</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Foo</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">const</span> foo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>();

<span class="hljs-comment">// prototype åªæœ‰å‡½æ•°æ‰æœ‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);      <span class="hljs-comment">// {constructor: Æ’}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);      <span class="hljs-comment">// undefined</span>

<span class="hljs-comment">// __proto__ æ‰€æœ‰å¯¹è±¡éƒ½æœ‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);  <span class="hljs-comment">// true</span>
</code></pre>
<h4 data-id="heading-3">ç°ä»£å†™æ³•ï¼šObject.getPrototypeOf()</h4>
<p><code>__proto__</code> è™½ç„¶å¥½ç”¨ï¼Œä½†å®ƒä¸æ˜¯ ECMAScript æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œåªæ˜¯å„æµè§ˆå™¨éƒ½å®ç°äº†ã€‚æ¨èç”¨æ ‡å‡†æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–åŸå‹</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(foo) === <span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>  <span class="hljs-comment">// true</span>

<span class="hljs-comment">// è®¾ç½®åŸå‹</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(obj, prototype)

<span class="hljs-comment">// åˆ›å»ºæ—¶æŒ‡å®šåŸå‹</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(prototype)
</code></pre>
<hr/>
<h3 data-id="heading-4">åŸå‹æ˜¯ä»€ä¹ˆ</h3>
<p>JavaScript é‡Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª <code>prototype</code> å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å«åš<strong>åŸå‹å¯¹è±¡</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®©è¯¥å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹å…±äº«å±æ€§å’Œæ–¹æ³•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params">brand</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> = brand;
}

<span class="hljs-comment">// æ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Šï¼Œæ‰€æœ‰å®ä¾‹å…±äº«</span>
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">start</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.brand}</span> å¯åŠ¨äº†`</span>);
};

<span class="hljs-keyword">const</span> car1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">'ä¸°ç”°'</span>);
<span class="hljs-keyword">const</span> car2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">'æœ¬ç”°'</span>);

car1.<span class="hljs-title function_">start</span>(); <span class="hljs-comment">// ä¸°ç”° å¯åŠ¨äº†</span>
car2.<span class="hljs-title function_">start</span>(); <span class="hljs-comment">// æœ¬ç”° å¯åŠ¨äº†</span>

<span class="hljs-comment">// ä¸¤ä¸ªå®ä¾‹ç”¨çš„æ˜¯åŒä¸€ä¸ªæ–¹æ³•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car1.<span class="hljs-property">start</span> === car2.<span class="hljs-property">start</span>); <span class="hljs-comment">// true</span>
</code></pre>
<p>è¿™å°±æ˜¯åŸå‹çš„æ ¸å¿ƒä»·å€¼ï¼š<strong>æ–¹æ³•åªéœ€è¦å®šä¹‰ä¸€æ¬¡ï¼Œæ‰€æœ‰å®ä¾‹éƒ½èƒ½ç”¨</strong>ã€‚</p>
<p>å¦‚æœæŠŠæ–¹æ³•å®šä¹‰åœ¨æ„é€ å‡½æ•°é‡Œï¼Œæ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹å°±ä¼šæ–°å»ºä¸€ä¸ªå‡½æ•°ï¼Œæµªè´¹å†…å­˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸æ¨èçš„å†™æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">BadCar</span>(<span class="hljs-params">brand</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> = brand;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">start</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {  <span class="hljs-comment">// æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä»½</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.brand}</span> å¯åŠ¨äº†`</span>);
  };
}

<span class="hljs-keyword">const</span> bad1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadCar</span>(<span class="hljs-string">'ä¸°ç”°'</span>);
<span class="hljs-keyword">const</span> bad2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadCar</span>(<span class="hljs-string">'æœ¬ç”°'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bad1.<span class="hljs-property">start</span> === bad2.<span class="hljs-property">start</span>); <span class="hljs-comment">// falseï¼Œä¸¤ä¸ªä¸åŒçš„å‡½æ•°</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">new å…³é”®å­—åˆ°åº•åšäº†ä»€ä¹ˆ</h3>
<p>ç†è§£åŸå‹é“¾ä¹‹å‰ï¼Œå¾—å…ˆææ¸…æ¥š <code>new</code> çš„å·¥ä½œåŸç†ã€‚å½“ä½ å†™ <code>new Foo()</code> æ—¶ï¼ŒJavaScript å¼•æ“ä¼šæ‰§è¡Œä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A['1. åˆ›å»ºç©ºå¯¹è±¡']:::step --&gt; B['2. è®¾ç½®åŸå‹é“¾']:::step
    B --&gt; C['3. æ‰§è¡Œæ„é€ å‡½æ•°']:::step
    C --&gt; D['4. è¿”å›å¯¹è±¡']:::success

    classDef step fill:#cce5ff,stroke:#0d6efd,color:#004085
    classDef success fill:#d4edda,stroke:#28a745,color:#155724
</code></pre>
<h4 data-id="heading-6">è¯¦ç»†æ­¥éª¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">greet</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hi, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
};

<span class="hljs-keyword">const</span> john = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'John'</span>);
</code></pre>
<p><strong>Step 1ï¼šåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å†…éƒ¨åˆ›å»ºï¼š{}</span>
</code></pre>
<p><strong>Step 2ï¼šå°†ç©ºå¯¹è±¡çš„ <code>[[Prototype]]</code> æŒ‡å‘æ„é€ å‡½æ•°çš„ <code>prototype</code></strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å†…éƒ¨æ“ä½œï¼šnewObj.__proto__ = Person.prototype</span>
</code></pre>
<p><strong>Step 3ï¼šç”¨è¿™ä¸ªç©ºå¯¹è±¡ä½œä¸º <code>this</code> æ‰§è¡Œæ„é€ å‡½æ•°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å†…éƒ¨æ“ä½œï¼šPerson.call(newObj, 'John')</span>
<span class="hljs-comment">// æ‰§è¡Œå newObj å˜æˆ { name: 'John' }</span>
</code></pre>
<p><strong>Step 4ï¼šè¿”å›å¯¹è±¡</strong></p>
<ul>
<li>å¦‚æœæ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ç”¨é‚£ä¸ªå¯¹è±¡</li>
<li>å¦åˆ™è¿”å› Step 1 åˆ›å»ºçš„å¯¹è±¡</li>
</ul>
<h4 data-id="heading-7">æ‰‹å†™ä¸€ä¸ª new</h4>
<p>ç†è§£äº†åŸç†ï¼Œå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">myNew</span>(<span class="hljs-params">Constructor, ...args</span>) {
  <span class="hljs-comment">// 1. åˆ›å»ºç©ºå¯¹è±¡ï¼ŒåŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype</span>
  <span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);

  <span class="hljs-comment">// 2. æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œthis ç»‘å®šåˆ°æ–°å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Constructor</span>.<span class="hljs-title function_">apply</span>(obj, args);

  <span class="hljs-comment">// 3. å¦‚æœæ„é€ å‡½æ•°è¿”å›å¯¹è±¡ï¼Œå°±ç”¨å®ƒï¼›å¦åˆ™ç”¨æ–°åˆ›å»ºçš„å¯¹è±¡</span>
  <span class="hljs-keyword">return</span> result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span> ? result : obj;
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">const</span> p = <span class="hljs-title function_">myNew</span>(<span class="hljs-title class_">Person</span>, <span class="hljs-string">'Alice'</span>);
p.<span class="hljs-title function_">greet</span>(); <span class="hljs-comment">// Hi, I'm Alice</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Person</span>); <span class="hljs-comment">// true</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">åŸå‹é“¾çš„æŸ¥æ‰¾æœºåˆ¶</h3>
<p>å½“è®¿é—®å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼ŒJavaScript ä¼šæŒ‰ç…§è¿™ä¸ªé¡ºåºæŸ¥æ‰¾ï¼š</p>
<ol>
<li>å…ˆåœ¨å¯¹è±¡è‡ªèº«æ‰¾</li>
<li>æ‰¾ä¸åˆ°ï¼Œå»å¯¹è±¡çš„åŸå‹ (<code>__proto__</code>) ä¸Šæ‰¾</li>
<li>è¿˜æ‰¾ä¸åˆ°ï¼Œç»§ç»­å¾€ä¸Šä¸€çº§åŸå‹æ‰¾</li>
<li>ç›´åˆ° <code>Object.prototype</code>ï¼Œå†å¾€ä¸Šå°±æ˜¯ <code>null</code> äº†</li>
</ol>
<p>è¿™æ¡æŸ¥æ‰¾é“¾è·¯å°±æ˜¯<strong>åŸå‹é“¾</strong>ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    A["dog å®ä¾‹&lt;br/&gt;{ name: 'Buddy' }"]:::instance --&gt;|__proto__| B["Dog.prototype&lt;br/&gt;{ bark: Æ’ }"]:::proto
    B --&gt;|__proto__| C["Animal.prototype&lt;br/&gt;{ speak: Æ’ }"]:::proto
    C --&gt;|__proto__| D["Object.prototype&lt;br/&gt;{ toString: Æ’, ... }"]:::rootProto
    D --&gt;|__proto__| E["null"]:::endNode

    classDef instance fill:#cce5ff,stroke:#0d6efd,color:#004085
    classDef proto fill:#d4edda,stroke:#28a745,color:#155724
    classDef rootProto fill:#fff3cd,stroke:#ffc107,color:#856404
    classDef endNode fill:#f8d7da,stroke:#dc3545,color:#721c24
</code></pre>
<h4 data-id="heading-9">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speak</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> makes a sound`</span>);
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
}

<span class="hljs-comment">// å»ºç«‹åŸå‹é“¾ï¼šDog.prototype -&gt; Animal.prototype</span>
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Dog</span>;

<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">bark</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Woof!'</span>);
};

<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'Buddy'</span>);

<span class="hljs-comment">// æŸ¥æ‰¾è¿‡ç¨‹ï¼š</span>
dog.<span class="hljs-property">name</span>;    <span class="hljs-comment">// åœ¨ dog è‡ªèº«æ‰¾åˆ°</span>
dog.<span class="hljs-title function_">bark</span>();  <span class="hljs-comment">// åœ¨ Dog.prototype æ‰¾åˆ°</span>
dog.<span class="hljs-title function_">speak</span>(); <span class="hljs-comment">// åœ¨ Animal.prototype æ‰¾åˆ°</span>
dog.<span class="hljs-title function_">toString</span>(); <span class="hljs-comment">// åœ¨ Object.prototype æ‰¾åˆ°</span>
</code></pre>
<p>ç”¨ä»£ç éªŒè¯è¿™æ¡é“¾ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dog.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);                 <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);    <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-literal">null</span>);             <span class="hljs-comment">// true</span>
</code></pre>
<p>è¿™å°±è§£é‡Šäº†å¼€å¤´çš„é—®é¢˜ã€‚æ•°ç»„èƒ½è°ƒç”¨ <code>push</code>ã€<code>join</code>ï¼Œæ˜¯å› ä¸ºè¿™äº›æ–¹æ³•å®šä¹‰åœ¨ <code>Array.prototype</code> ä¸Šã€‚èƒ½è°ƒç”¨ <code>toString</code>ï¼Œæ˜¯å› ä¸ºé¡ºç€åŸå‹é“¾èƒ½æ‰¾åˆ° <code>Object.prototype.toString</code>ï¼ˆè™½ç„¶ Array é‡å†™äº†è¿™ä¸ªæ–¹æ³•ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-10">å®Œæ•´çš„åŸå‹é“¾å›¾è°±</h3>
<p>JavaScript çš„åŸå‹é“¾æ¯”æƒ³è±¡ä¸­æ›´å¤æ‚ï¼Œå‡½æ•°æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¹Ÿæœ‰è‡ªå·±çš„åŸå‹é“¾ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    subgraph IL[å®ä¾‹å±‚]
        foo["foo å®ä¾‹"]:::instance
    end

    subgraph PL[åŸå‹å±‚]
        FooP["Foo.prototype"]:::proto
        ObjP["Object.prototype"]:::rootProto
    end

    subgraph FL[å‡½æ•°å±‚]
        Foo["Foo å‡½æ•°"]:::func
        Obj["Object å‡½æ•°"]:::func
        Func["Function å‡½æ•°"]:::func
    end

    subgraph FPL[å‡½æ•°åŸå‹å±‚]
        FuncP["Function.prototype"]:::funcProto
    end

    foo --&gt;|__proto__| FooP
    FooP --&gt;|__proto__| ObjP
    ObjP --&gt;|__proto__| NULL["null"]:::endNode

    Foo --&gt;|prototype| FooP
    Foo --&gt;|__proto__| FuncP

    Obj --&gt;|prototype| ObjP
    Obj --&gt;|__proto__| FuncP

    Func --&gt;|prototype| FuncP
    Func --&gt;|__proto__| FuncP

    FuncP --&gt;|__proto__| ObjP

    classDef instance fill:#cce5ff,stroke:#0d6efd,color:#004085
    classDef proto fill:#d4edda,stroke:#28a745,color:#155724
    classDef rootProto fill:#fff3cd,stroke:#ffc107,color:#856404
    classDef func fill:#e2d9f3,stroke:#6f42c1,color:#432874
    classDef funcProto fill:#fce4ec,stroke:#e91e63,color:#880e4f
    classDef endNode fill:#f8d7da,stroke:#dc3545,color:#721c24

    style IL fill:#e8f4fc,stroke:#0d6efd
    style PL fill:#e8f5e9,stroke:#28a745
    style FL fill:#f3e5f5,stroke:#6f42c1
    style FPL fill:#fce4ec,stroke:#e91e63
</code></pre>
<h4 data-id="heading-11">å‡ ä¸ªå…³é”®ç‚¹</h4>
<p><strong>1. æ‰€æœ‰å‡½æ•°éƒ½æ˜¯ Function çš„å®ä¾‹</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Foo</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);    <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Function</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// trueï¼ˆè‡ªå·±åˆ›å»ºè‡ªå·±ï¼‰</span>
</code></pre>
<p><strong>2. Function.prototype ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå®ƒçš„åŸå‹æ˜¯ Object.prototype</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
</code></pre>
<p><strong>3. Object.prototype æ˜¯åŸå‹é“¾çš„ç»ˆç‚¹</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-literal">null</span>); <span class="hljs-comment">// true</span>
</code></pre>
<p><strong>4. ä¸€ä¸ªæœ‰è¶£çš„å¾ªç¯</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Object æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥å®ƒçš„ __proto__ æ˜¯ Function.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// Function.prototype æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å®ƒçš„ __proto__ æ˜¯ Object.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// è¿™å½¢æˆäº†ä¸€ä¸ªæœ‰è¶£çš„"é¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡"çš„å…³ç³»</span>
</code></pre>
<hr/>
<h3 data-id="heading-12">å±æ€§é®è”½ï¼ˆProperty Shadowingï¼‰</h3>
<p>å¦‚æœå¯¹è±¡è‡ªèº«å’ŒåŸå‹ä¸Šæœ‰åŒåå±æ€§ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Default'</span>;
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">greet</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
};

<span class="hljs-keyword">const</span> john = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'John'</span>);

<span class="hljs-comment">// è‡ªèº«å±æ€§é®è”½åŸå‹å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(john.<span class="hljs-property">name</span>); <span class="hljs-comment">// 'John'ï¼Œä¸æ˜¯ 'Default'</span>

<span class="hljs-comment">// åˆ é™¤è‡ªèº«å±æ€§åï¼ŒåŸå‹å±æ€§å°±éœ²å‡ºæ¥äº†</span>
<span class="hljs-keyword">delete</span> john.<span class="hljs-property">name</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(john.<span class="hljs-property">name</span>); <span class="hljs-comment">// 'Default'</span>
</code></pre>
<p>è¿™å°±æ˜¯<strong>å±æ€§é®è”½</strong>ï¼šè‡ªèº«å±æ€§ä¼š"é®ä½"åŸå‹é“¾ä¸Šçš„åŒåå±æ€§ã€‚</p>
<h4 data-id="heading-13">æ£€æŸ¥å±æ€§æ¥æº</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> john = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'John'</span>);

<span class="hljs-comment">// hasOwnProperty åªæ£€æŸ¥è‡ªèº«å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(john.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'name'</span>));  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(john.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'greet'</span>)); <span class="hljs-comment">// false</span>

<span class="hljs-comment">// in æ“ä½œç¬¦æ£€æŸ¥æ•´ä¸ªåŸå‹é“¾</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'name'</span> <span class="hljs-keyword">in</span> john);  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'greet'</span> <span class="hljs-keyword">in</span> john); <span class="hljs-comment">// true</span>
</code></pre>
<hr/>
<h3 data-id="heading-14">å®ç°ç»§æ‰¿</h3>
<p>ç†è§£äº†åŸå‹é“¾ï¼Œç»§æ‰¿å°±å¥½åŠäº†ã€‚æ ¸å¿ƒå°±ä¸¤æ­¥ï¼š</p>
<ol>
<li>è°ƒç”¨çˆ¶æ„é€ å‡½æ•°ï¼Œç»§æ‰¿å®ä¾‹å±æ€§</li>
<li>è®¾ç½®åŸå‹é“¾ï¼Œç»§æ‰¿åŸå‹æ–¹æ³•</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Vehicle</span>(<span class="hljs-params">type</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = type;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">speed</span> = <span class="hljs-number">0</span>;
}

<span class="hljs-title class_">Vehicle</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">accelerate</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">amount</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">speed</span> += amount;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span> åŠ é€Ÿåˆ° <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.speed}</span> km/h`</span>);
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params">brand</span>) {
  <span class="hljs-title class_">Vehicle</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">'æ±½è½¦'</span>);  <span class="hljs-comment">// ç»§æ‰¿å®ä¾‹å±æ€§</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> = brand;
}

<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Vehicle</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);  <span class="hljs-comment">// ç»§æ‰¿åŸå‹æ–¹æ³•</span>
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Car</span>;

<span class="hljs-comment">// æ·»åŠ å­ç±»ç‰¹æœ‰çš„æ–¹æ³•</span>
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">honk</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.brand}</span> é¸£ç¬›`</span>);
};

<span class="hljs-comment">// é‡å†™çˆ¶ç±»æ–¹æ³•</span>
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">accelerate</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">amount</span>) {
  <span class="hljs-title class_">Vehicle</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">accelerate</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, amount);
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">speed</span> &gt; <span class="hljs-number">120</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¶…é€Ÿè­¦å‘Š'</span>);
  }
};

<span class="hljs-keyword">const</span> myCar = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">'ä¸°ç”°'</span>);
myCar.<span class="hljs-title function_">accelerate</span>(<span class="hljs-number">50</span>);   <span class="hljs-comment">// æ±½è½¦ åŠ é€Ÿåˆ° 50 km/h</span>
myCar.<span class="hljs-title function_">accelerate</span>(<span class="hljs-number">80</span>);   <span class="hljs-comment">// æ±½è½¦ åŠ é€Ÿåˆ° 130 km/h</span>
                        <span class="hljs-comment">// è¶…é€Ÿè­¦å‘Š</span>
myCar.<span class="hljs-title function_">honk</span>();           <span class="hljs-comment">// ä¸°ç”° é¸£ç¬›</span>
</code></pre>
<h4 data-id="heading-15">ä¸ºä»€ä¹ˆç”¨ Object.create() è€Œä¸æ˜¯ç›´æ¥èµ‹å€¼</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯å†™æ³•</span>
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Vehicle</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
<span class="hljs-comment">// é—®é¢˜ï¼šä¿®æ”¹ Car.prototype ä¼šå½±å“ Vehicle.prototype</span>

<span class="hljs-comment">// é”™è¯¯å†™æ³•</span>
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vehicle</span>();
<span class="hljs-comment">// é—®é¢˜ï¼šä¼šæ‰§è¡Œ Vehicle æ„é€ å‡½æ•°ï¼Œå¯èƒ½æœ‰å‰¯ä½œç”¨</span>

<span class="hljs-comment">// æ­£ç¡®å†™æ³•</span>
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Vehicle</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼ŒåŸå‹æŒ‡å‘ Vehicle.prototype</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">ES6 çš„ class è¯­æ³•</h3>
<p>ES6 å¼•å…¥äº† <code>class</code> å…³é”®å­—ï¼Œå†™èµ·æ¥æ›´æ¸…çˆ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">speak</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> makes a sound`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, breed</span>) {
    <span class="hljs-variable language_">super</span>(name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
  }

  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Woof!'</span>);
  }
}

<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'Buddy'</span>, <span class="hljs-string">'Labrador'</span>);
dog.<span class="hljs-title function_">speak</span>(); <span class="hljs-comment">// Buddy makes a sound</span>
dog.<span class="hljs-title function_">bark</span>();  <span class="hljs-comment">// Woof!</span>
</code></pre>
<p>ä½†è¦æ¸…æ¥šï¼Œ<code>class</code> åªæ˜¯è¯­æ³•ç³–ï¼Œåº•å±‚è¿˜æ˜¯åŸå‹é“¾é‚£å¥—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Dog</span>); <span class="hljs-comment">// "function"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dog.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
</code></pre>
<h4 data-id="heading-17">class çš„ä¸€äº›ç‰¹æ€§</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> {
  <span class="hljs-comment">// å®ä¾‹å±æ€§ï¼ˆES2022+ï¼‰</span>
  instanceProp = <span class="hljs-string">'instance'</span>;

  <span class="hljs-comment">// ç§æœ‰å±æ€§ï¼ˆES2022+ï¼‰</span>
  #privateProp = <span class="hljs-string">'private'</span>;

  <span class="hljs-comment">// é™æ€å±æ€§</span>
  <span class="hljs-keyword">static</span> staticProp = <span class="hljs-string">'static'</span>;

  <span class="hljs-comment">// é™æ€æ–¹æ³•</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">staticMethod</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'static method'</span>;
  }

  <span class="hljs-comment">// getter/setter</span>
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#privateProp;
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-18">å‡ ä¸ªå®¹æ˜“è¸©çš„å‘</h3>
<h4 data-id="heading-19">1. å¼•ç”¨ç±»å‹æ”¾åŸå‹ä¸Šä¼šå…±äº«</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Student</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Student</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hobbies</span> = [];  <span class="hljs-comment">// æ‰€æœ‰å®ä¾‹å…±äº«è¿™ä¸ªæ•°ç»„</span>

<span class="hljs-keyword">const</span> s1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">'å¼ ä¸‰'</span>);
<span class="hljs-keyword">const</span> s2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">'æå››'</span>);

s1.<span class="hljs-property">hobbies</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'reading'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s2.<span class="hljs-property">hobbies</span>); <span class="hljs-comment">// ['reading']  // s2 ä¹Ÿæœ‰äº†ï¼Œå‡ºé—®é¢˜äº†</span>
</code></pre>
<p>å¼•ç”¨ç±»å‹ï¼ˆæ•°ç»„ã€å¯¹è±¡ï¼‰åº”è¯¥æ”¾åœ¨æ„é€ å‡½æ•°é‡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Student</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">hobbies</span> = [];  <span class="hljs-comment">// æ¯ä¸ªå®ä¾‹ç‹¬ç«‹</span>
}
</code></pre>
<h4 data-id="heading-20">2. åˆ«ç›´æ¥æ›¿æ¢ prototype å¯¹è±¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Foo</span>(<span class="hljs-params"/>) {}

<span class="hljs-comment">// ç›´æ¥æ›¿æ¢ prototype ä¼šä¸¢å¤± constructor</span>
<span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = {
  <span class="hljs-attr">method</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {}
};

<span class="hljs-keyword">const</span> foo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(foo.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Foo</span>); <span class="hljs-comment">// falseï¼Œå˜æˆ Object äº†</span>
</code></pre>
<p>è¦ä¹ˆè®°å¾—è¡¥ä¸Š constructorï¼Œè¦ä¹ˆç”¨å±æ€§æ·»åŠ çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹å¼ä¸€ï¼šè¡¥ä¸Š constructor</span>
<span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = {
  <span class="hljs-attr">constructor</span>: <span class="hljs-title class_">Foo</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {}
};

<span class="hljs-comment">// æ–¹å¼äºŒï¼šç›´æ¥æ·»åŠ å±æ€§ï¼ˆæ¨èï¼‰</span>
<span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">method</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};
</code></pre>
<h4 data-id="heading-21">3. ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Foo</span> = (<span class="hljs-params"/>) =&gt; {};
<span class="hljs-keyword">const</span> foo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>(); <span class="hljs-comment">// TypeError: Foo is not a constructor</span>
</code></pre>
<p>ç®­å¤´å‡½æ•°æ²¡æœ‰ <code>prototype</code> å±æ€§ï¼Œä¹Ÿæ²¡æœ‰è‡ªå·±çš„ <code>this</code>ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ <code>new</code>ã€‚</p>
<h4 data-id="heading-22">4. instanceof çš„å±€é™æ€§</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// instanceof æ£€æŸ¥çš„æ˜¯åŸå‹é“¾</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([] <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>);  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([] <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// è·¨ iframe/realm æ—¶ä¼šå¤±æ•ˆ</span>
<span class="hljs-comment">// iframe é‡Œçš„ Array å’Œä¸»é¡µé¢çš„ Array ä¸æ˜¯åŒä¸€ä¸ª</span>
</code></pre>
<p>æ›´å¯é çš„ç±»å‹æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>([]);  <span class="hljs-comment">// "[object Array]"</span>
<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>([]);  <span class="hljs-comment">// true</span>
</code></pre>
<hr/>
<h3 data-id="heading-23">æ€§èƒ½è€ƒè™‘</h3>
<h4 data-id="heading-24">åŸå‹é“¾æŸ¥æ‰¾æœ‰å¼€é”€</h4>
<p>å±æ€§æŸ¥æ‰¾ä¼šæ²¿ç€åŸå‹é“¾å‘ä¸Šï¼Œé“¾è¶Šé•¿å¼€é”€è¶Šå¤§ã€‚è™½ç„¶ç°ä»£å¼•æ“æœ‰ä¼˜åŒ–ï¼Œä½†è¿˜æ˜¯è¦æ³¨æ„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¦‚æœé¢‘ç¹è®¿é—®åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œå¯ä»¥ç¼“å­˜</span>
<span class="hljs-keyword">const</span> method = obj.<span class="hljs-property">someMethod</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; i++) {
  method.<span class="hljs-title function_">call</span>(obj);  <span class="hljs-comment">// æ¯” obj.someMethod() å¿«</span>
}
</code></pre>
<h4 data-id="heading-25">Object.create(null) åˆ›å»ºçº¯å‡€å¯¹è±¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ™®é€šå¯¹è±¡ä¼šç»§æ‰¿ Object.prototype</span>
<span class="hljs-keyword">const</span> obj = {};
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">toString</span>); <span class="hljs-comment">// Æ’ toString() { [native code] }</span>

<span class="hljs-comment">// çº¯å‡€å¯¹è±¡æ²¡æœ‰åŸå‹é“¾</span>
<span class="hljs-keyword">const</span> pureObj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-literal">null</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pureObj.<span class="hljs-property">toString</span>); <span class="hljs-comment">// undefined</span>

<span class="hljs-comment">// é€‚åˆç”¨ä½œå­—å…¸/å“ˆå¸Œè¡¨ï¼Œä¸ç”¨æ‹…å¿ƒé”®åå†²çª</span>
<span class="hljs-keyword">const</span> dict = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-literal">null</span>);
dict[<span class="hljs-string">'hasOwnProperty'</span>] = <span class="hljs-string">'safe'</span>;  <span class="hljs-comment">// ä¸ä¼šè¦†ç›–åŸå‹æ–¹æ³•</span>
</code></pre>
<hr/>
<h3 data-id="heading-26">å°ç»“</h3>
<p>åŸå‹é“¾è¯´ç©¿äº†å°±æ˜¯ä¸€æ¡æŸ¥æ‰¾é“¾ï¼šæ‰¾å±æ€§æ—¶ä»å¯¹è±¡è‡ªèº«å¼€å§‹ï¼Œé¡ºç€ <code>__proto__</code> ä¸€è·¯å¾€ä¸Šæ‰¾ï¼Œç›´åˆ° <code>null</code>ã€‚</p>
<p>å‡ ä¸ªè¦ç‚¹ï¼š</p>
<ul>
<li><code>prototype</code> æ˜¯å‡½æ•°çš„å±æ€§ï¼Œç”¨äºå­˜æ”¾å…±äº«çš„æ–¹æ³•</li>
<li><code>__proto__</code>ï¼ˆæˆ– <code>[[Prototype]]</code>ï¼‰æ˜¯å¯¹è±¡çš„å±æ€§ï¼ŒæŒ‡å‘å®ƒçš„åŸå‹</li>
<li>æ¨èç”¨ <code>Object.getPrototypeOf()</code> ä»£æ›¿ <code>__proto__</code></li>
<li><code>new</code> å…³é”®å­—åšäº†å››ä»¶äº‹ï¼šåˆ›å»ºå¯¹è±¡ã€è®¾ç½®åŸå‹ã€æ‰§è¡Œæ„é€ å‡½æ•°ã€è¿”å›å¯¹è±¡</li>
<li>æ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Šï¼Œçœå†…å­˜</li>
<li><code>class</code> æ˜¯è¯­æ³•ç³–ï¼Œåº•å±‚è¿˜æ˜¯åŸå‹é“¾</li>
<li><code>Object.prototype</code> æ˜¯åŸå‹é“¾çš„ç»ˆç‚¹ï¼Œå®ƒçš„ <code>__proto__</code> æ˜¯ <code>null</code></li>
</ul>
<p>ç†è§£äº†è¿™ä¸ªæœºåˆ¶ï¼Œå†çœ‹ JavaScript çš„é¢å‘å¯¹è±¡å°±æ¸…æ™°å¤šäº†ã€‚æ¡†æ¶æºç é‡Œå¤§é‡ä½¿ç”¨åŸå‹é“¾ï¼Œæ¯”å¦‚ Vue 2 çš„å“åº”å¼ç³»ç»Ÿã€å„ç§æ’ä»¶çš„ mixin å®ç°ï¼Œéƒ½æ˜¯åŸºäºè¿™å¥—æœºåˆ¶ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul>
<hr/>
<h3 data-id="heading-27">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FGuide%2FInheritance_and_the_prototype_chain" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Inheritance_and_the_prototype_chain" ref="nofollow noopener noreferrer">MDN - Inheritance and the prototype chain</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FLearn_web_development%2FExtensions%2FAdvanced_JavaScript_objects%2FObject_prototypes" target="_blank" title="https://developer.mozilla.org/en-US/docs/Learn_web_development/Extensions/Advanced_JavaScript_objects/Object_prototypes" ref="nofollow noopener noreferrer">MDN - Object prototypes</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Fnew" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new" ref="nofollow noopener noreferrer">MDN - new operator</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavascript.info%2Fprototype-inheritance" target="_blank" title="https://javascript.info/prototype-inheritance" ref="nofollow noopener noreferrer">JavaScript.info - Prototypal inheritance</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MCP ç½‘å…³å®æˆ˜ï¼šåŸºäº Higress + Nacos çš„é›¶ä»£ç å·¥å…·æ‰©å±•æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7581210455827021860</link>    <guid>https://juejin.cn/post/7581210455827021860</guid>    <pubDate>2025-12-08T09:15:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581210455827021860" data-draft-id="7581117416810954795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MCP ç½‘å…³å®æˆ˜ï¼šåŸºäº Higress + Nacos çš„é›¶ä»£ç å·¥å…·æ‰©å±•æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ,MCP"/> <meta itemprop="datePublished" content="2025-12-08T09:15:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MCP ç½‘å…³å®æˆ˜ï¼šåŸºäº Higress + Nacos çš„é›¶ä»£ç å·¥å…·æ‰©å±•æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T09:15:17.000Z" title="Mon Dec 08 2025 09:15:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    30
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šé™†èƒ¤ä»»</p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ AI å¤§çˆ†å‘çš„æ—¶ä»£ï¼Œå·²ç»æœ‰éå¸¸å¤šçš„ AI åŠ©æ‰‹ï¼Œç»“åˆ RAG é€šè¿‡æ™ºèƒ½é—®ç­”å¸®åŠ©ç”¨æˆ·è§£ç­”é—®é¢˜ã€‚å•çº¯åœ°ä¾é æ™ºèƒ½é—®ç­”å¸®åŠ©å®¢æˆ·è‡ªåŠ©è§£ç­”æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬éœ€è¦è®© AI åŠ©æ‰‹èƒ½å¤Ÿç›´æ¥è°ƒç”¨å·²æœ‰çš„ä¸°å¯Œæ¥å£ï¼Œæœç€æ›´å¼ºå¤§çš„æ™ºèƒ½ä½“æ¼”è¿›ã€‚æˆ‘ä»¬é€‰ç”¨å½“ä¸‹æœ€ä¸ºç«çƒ­ï¼Œä¸”å·²é€æ­¥æˆä¸ºæ ‡å‡†çš„ MCP ä½œä¸ºæ¨¡å‹å’Œæ¥å£ä¹‹é—´é€šä¿¡çš„ä¼ è¾“åè®®ã€‚å…³äº MCPï¼Œå·²æœ‰éå¸¸å¤šçš„ä»‹ç»æ–‡ç« ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚</p>
<p>åœ¨ä¼ä¸šå¯¹å¤–æœåŠ¡çš„åœºæ™¯ä¸‹ï¼ŒMCP Server éœ€è¦è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>åœ¨æœåŠ¡çš„å¤šå®ä¾‹é«˜å¯ç”¨åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ SSE é€šä¿¡æ–¹å¼å¦‚ä½•ç»´æŠ¤ sessionï¼›</li>
<li>å¦‚ä½•åšåˆ°åŠ¨æ€æ›´æ–° MCP å·¥å…· Promptï¼Œåšåˆ°å¿«é€Ÿæ›´æ–°&amp;è°ƒè¯•&amp;éªŒè¯ï¼›</li>
<li>ç§Ÿæˆ·éš”ç¦»çš„äº‘æœåŠ¡åœºæ™¯ä¸‹å¦‚ä½•å¯¹ç”¨æˆ·çš„å·¥å…·è°ƒç”¨è¿›è¡Œé‰´æƒã€‚</li>
</ol>
<p>Higress å¯ä»¥å¾ˆå¥½åœ°è§£å†³ä¸Šé¢çš„é—®é¢˜ 1ï¼ŒåŒæ—¶è¿˜æœ‰å®Œå–„çš„è¿ç»´ç›‘æ§ä½“ç³»ï¼Œå¯è§†åŒ–æ˜“æ“ä½œçš„æ§åˆ¶å°ç•Œé¢ã€‚ä¸ºäº†è§£å†³é—®é¢˜ 2ï¼Œæˆ‘ä»¬å¼•å…¥äº† Nacos è´Ÿè´£æ³¨å†Œåç«¯æœåŠ¡ä»¥åŠç®¡ç†ç»´æŠ¤ MCP å·¥å…·çš„å…ƒæ•°æ®ç­‰ä¿¡æ¯ã€‚åœ¨æ•´ä¸ª MCP æœåŠ¡ä¸­ï¼ŒHigress æ‹…ä»» MCP Proxy çš„è§’è‰²ï¼ŒNacos æ‹…ä»» MCP Registry çš„è§’è‰²ã€‚å¯¹äºé—®é¢˜ 3 ç§Ÿæˆ·éš”ç¦»é—®é¢˜ï¼Œä¼šåœ¨ä¸‹é¢é‰´æƒç« èŠ‚ä¸­è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0eba8180a02843ce87ac6f061198089e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=So7bS373hR83Pm%2F3%2BxQzPYdzbww%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Higress å’Œ Nacos éƒ½æ˜¯äº‘åŸç”Ÿçš„åº”ç”¨ï¼Œåœ¨éƒ¨ç½²æ–¹é¢ï¼Œè‡ªç„¶é€‰æ‹©ä½¿ç”¨ K8s é›†ç¾¤è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²ã€‚åŒæ—¶å¾ˆå¤šä¼ä¸šæœ‰è‡ªå·±çš„ä¸“å±ç”Ÿäº§ç½‘ç»œç¯å¢ƒï¼Œä¸€èˆ¬å’Œå¤–ç½‘ä¸é€šï¼Œå› æ­¤æœ¬æ–‡ä¼šå›´ç»•å¦‚ä½•åˆ©ç”¨ç¤¾åŒºç‰ˆæœ¬çš„ Higress å’Œ Nacosï¼ˆApache-2.0 å¼€æºåè®®ï¼‰è¿›è¡Œç§æœ‰åŒ–éƒ¨ç½²ã€‚å› ä¸ºå†…éƒ¨ç¯å¢ƒçš„é™åˆ¶ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ç›´æ¥é€šè¿‡ Helm æ“ä½œ K8s é›†ç¾¤è¿›è¡Œéƒ¨ç½²ï¼Œå› æ­¤æœ¬æ–‡ä¼šå›´ç»•å¦‚ä½•åŸºäº Higress å’Œ Nacos çš„ docker é•œåƒåœ¨ K8s é›†ç¾¤ä¸Šè¿›è¡Œåˆ†è§’è‰²éƒ¨ç½²ã€‚</p>
<p>é€šè¿‡è¿™å¥—è‡ªå»ºçš„ç½‘å…³æœåŠ¡ï¼Œä½¿ç”¨é…ç½®å³å¯å®ç°é›¶ä»£ç æ‰©å±• Toolï¼Œæ–°åº”ç”¨çš„æ³¨å†Œã€åº”ç”¨ä¸‹é¢å·¥å…·çš„æ‰©å±•ã€å·¥å…· prompt æ›´æ–°éªŒè¯éƒ½èƒ½é€šè¿‡æœåŠ¡é›†æˆçš„å¯è§†åŒ–æ§åˆ¶å°ï¼Œæ›´æ–°å‘å¸ƒé…ç½®å¿«é€Ÿå®Œæˆï¼Œ<strong>æ¥å…¥æ–¹å¼æå…¶ç®€å•ï¼æ›´æ–°éªŒè¯æå…¶å¿«é€Ÿï¼</strong> åŒæ—¶åˆ©ç”¨ Nacos çš„å‘½åç©ºé—´èƒ½åŠ›å¯ä»¥åšåˆ°æœåŠ¡å’Œå·¥å…·é›†çš„éš”ç¦»ï¼Œç»™ä¸åŒçš„ç”¨æˆ·æä¾›ä¸åŒçš„ MCP å·¥å…·é›†ã€‚</p>
<h2 data-id="heading-1">ç§æœ‰åŒ–éƒ¨ç½²</h2>
<h3 data-id="heading-2">Higress</h3>
<p>Higress æ”¯æŒä¸‰ç§éƒ¨ç½²æ–¹å¼ï¼šHelmã€docker compose å’ŒåŸºäº all-in-one çš„Â docker é•œåƒè¿›è¡Œéƒ¨ç½²ã€‚Higress å®˜æ–¹æ¨èä½¿ç”¨ Helm çš„æ–¹å¼è¿›è¡Œç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²ï¼Œå°†ä¾èµ–çš„æ¨¡å—éƒ¨ç½²åœ¨ä¸åŒçš„ pod ä¸Šã€‚è€Œå› ä¸Šè¿°ç¯å¢ƒåŸå› ï¼Œè¿™é‡Œé€‰æ‹©ä½¿ç”¨ç¬¬ä¸‰ç§åŸºäº all-in-one çš„ dockerÂ é•œåƒÂ Dockerfile <strong>[</strong> <strong>1]</strong> è¿›è¡Œéƒ¨ç½²ï¼Œå°† Higress ä¾èµ–çš„ç»„ä»¶ä»¥è¿›ç¨‹çš„æ–¹å¼éƒ¨ç½²åœ¨åŒä¸€ pod ä¸Šé¢ï¼Œé€šè¿‡å¤šå‰¯æœ¬çš„æ–¹å¼å®ç°æœåŠ¡é«˜å¯ç”¨ï¼Œä¹Ÿå®ç°äº†å¯¹ K8s é›†ç¾¤ Ingress çš„æ— ä¾µå…¥å¼éƒ¨ç½²ã€‚</p>
<p>æˆ‘ä»¬å…ˆå°è¯•ç›´æ¥å¼•ç”¨ docker é•œåƒè¿›è¡Œéƒ¨ç½²æ—¶ï¼Œä¼šæŠ¥ WASM çš„æ’ä»¶é”™è¯¯ï¼ŒæŸ¥çœ‹æŠ¥é”™ä¿¡æ¯æ˜¯é€šè¿‡ oci åœ°å€å»ä¸‹è½½ WASM æ’ä»¶çš„æ—¶å€™å‡ºç°äº†é—®é¢˜ã€‚åŒæ—¶ Higress å®ç° MCP åŠŸèƒ½ä¹Ÿä¾èµ–äº† WASM æ’ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç»•ä¸å¼€çš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">FROM</span>Â higress<span class="hljs-operator">-</span>registry.cn<span class="hljs-operator">-</span>hangzhou.cr.aliyuncs.com<span class="hljs-operator">/</span>higress<span class="hljs-operator">/</span><span class="hljs-keyword">all</span><span class="hljs-operator">-</span><span class="hljs-keyword">in</span><span class="hljs-operator">-</span><span class="hljs-keyword">one</span>:latest
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1242b0ea9ed342978a58e041aad988b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=p7%2BTDqnxe1fKmLCkkM2HaXQthOU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-3">WASM æ’ä»¶ç‹¬ç«‹éƒ¨ç½²</h4>
<p>Higress çš„Â plugin-server <strong>[</strong> <strong>2]</strong> é¡¹ç›®å°±æ˜¯ä¸ºäº†â€œè§£å†³ç§æœ‰åŒ–éƒ¨ç½² Higress ç½‘å…³æ—¶æ‹‰å–æ’ä»¶çš„ç—›ç‚¹ï¼Œä¼˜åŒ–äº†æ’ä»¶çš„ä¸‹è½½ä¸ç®¡ç†æ•ˆç‡â€ï¼Œä½¿ Higress é€šè¿‡ http çš„æ–¹å¼å»ä¸‹è½½ç‹¬ç«‹éƒ¨ç½²çš„æ’ä»¶åº“ï¼Œè€Œä¸æ˜¯é€šè¿‡ oci å»è®¿é—®å¤–éƒ¨å…¬å¼€ä»“åº“ï¼Œé¿å…å› ç½‘ç»œé—®é¢˜å¯¼è‡´æ’ä»¶æ‹‰å–ä¸ä¸‹æ¥ã€‚è§£å†³è¿‡ç¨‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<p><strong>1ï¼‰ç§æœ‰åŒ–éƒ¨ç½² plugin-server</strong></p>
<pre><code class="hljs language-bash" lang="bash">FROMÂ higress-registry.cn-hangzhou.cr.aliyuncs.com/higress/plugin-server:1.0.0
</code></pre>
<p><strong>2ï¼‰ä¸º plugin-server é›†ç¾¤ç”³è¯· K8s Serviceï¼ˆCluster IPï¼‰</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
Â  <span class="hljs-attr">name:</span> <span class="hljs-string">higress-plugin-server</span>
Â  <span class="hljs-attr">namespace:</span> <span class="hljs-string">higress-system</span>
Â  <span class="hljs-attr">labels:</span>
Â  Â  <span class="hljs-attr">app:</span> <span class="hljs-string">higress-plugin-server</span>
Â  Â  <span class="hljs-attr">higress:</span> <span class="hljs-string">higress-plugin-server</span>
<span class="hljs-attr">spec:</span>
Â  <span class="hljs-attr">type:</span> <span class="hljs-string">ClusterIP</span>
Â  <span class="hljs-attr">ports:</span>
Â  Â  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
Â  Â  Â  <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
Â  Â  Â  <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8080</span>
Â  <span class="hljs-attr">selector:</span>
Â  Â  <span class="hljs-attr">app:</span> <span class="hljs-string">higress-plugin-server</span>
Â  Â  <span class="hljs-attr">higress:</span> <span class="hljs-string">higress-plugin-server</span>
</code></pre>
<p>K8s é›†ç¾¤å†…ç½®çš„ DNS ä¸ºæ­¤åˆ›å»ºçš„åŸŸåè§£æè®°å½•çš„æ ¼å¼ä¸ºÂ <code>&lt;service-name&gt;.&lt;namespace&gt;.svc.cluster.local</code>ã€‚</p>
<p>åœ¨æ²¡æœ‰ K8s çš„åœºæ™¯ä¸‹ä¹Ÿå¯ä»¥ä¸º plugin-server é›†ç¾¤ç”³è¯·å†…ç½‘ VIP æˆ–è€… SLB åšå¥½æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ã€‚</p>
<p><strong>3ï¼‰ä¿®æ”¹ Higress å†…ç½®æ’ä»¶ä¸‹è½½åœ°å€</strong></p>
<p>ä¾ç…§ github ä¸­çš„ç¤ºä¾‹ï¼Œåœ¨åŸºäº Higress é•œåƒçš„é¡¹ç›® Dockerfile ä¸­å£°æ˜æ’ä»¶çš„ä¸‹è½½åœ°å€ã€‚è¿™é‡Œæœ‰ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ä¸‹ï¼Œreadme ä¸­ç»™å‡ºçš„ç¤ºä¾‹æ˜¯ç¯å¢ƒå˜é‡çš„æ ¼å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/deef89984e3f456b86d4fa4f4bb6c730~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=FJYl%2FgFANq4CkQ%2F4hLb1ea6osNs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ Dockerfile ä¸­å£°æ˜éœ€è¦è½¬ä¹‰ä¸€ä¸‹ï¼Œ${name}/${version}Â çš„å½¢å¼æ‰å¯ä»¥è¢«æ­£ç¡®è§£æã€‚</p>
<pre><code class="hljs language-bash" lang="bash">...
<span class="hljs-comment"># æ¨¡ç‰ˆ</span>
ENV HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=http://[ç”³è¯·çš„k8s serviceåœ°å€]/plugins/\<span class="hljs-variable">${name}</span>/\<span class="hljs-variable">${version}</span>/plugin.wasm
<span class="hljs-comment"># mcp wasm æ’ä»¶ä¸‹è½½åœ°å€</span>
ENV MCP_SERVER_WASM_IMAGE_URL=http://[ç”³è¯·çš„k8s serviceåœ°å€]/plugins/mcp-server/1.0.0/plugin.wasm
...
</code></pre>
<p>é…ç½®å®Œç‹¬ç«‹çš„æ’ä»¶ HTTP ä¸‹è½½åœ°å€åé‡æ–°éƒ¨ç½²ï¼Œåœ¨æœåŠ¡å™¨ä¸Šå¯ä»¥çœ‹åˆ° 8080 ç«¯å£ä»¥åŠ 8443 ç«¯å£å¯ä»¥è¢«æ­£å¸¸ç›‘å¬ï¼Œè¯´æ˜ Higress å…·å¤‡ä»£ç†å’Œç½‘å…³åŠŸèƒ½çš„æ ¸å¿ƒæ•°æ®é¢ç»„ä»¶å·²ç»å¯ä»¥æ­£å¸¸æœåŠ¡äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50a78e0794714d30956da299515be560~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=OPioOJxDmJ%2Bnku7okYzm%2FQYjhw8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è§£å†³å®Œ WASM æ’ä»¶ä¸‹è½½é—®é¢˜ï¼ŒåŸºäº docker é•œåƒçš„ Higress æœåŠ¡å°±å¯ä»¥è¢«æˆåŠŸæ‹‰èµ·å¹¶è¿è¡Œäº†ã€‚åªä¸è¿‡åŸºäºè¿™ç§æ¨¡å¼éƒ¨ç½²çš„<strong>æ¯ä¸ª pod éƒ½æ˜¯ç‹¬ç«‹ã€å¯¹ç­‰ã€åŒ…å«å…¨éƒ¨ç»„ä»¶ã€åŠŸèƒ½å®Œæ•´çš„ Higress æœåŠ¡ï¼Œéœ€è¦é€šè¿‡å¤šå‰¯æœ¬çš„æ–¹å¼å®ç°é«˜å¯ç”¨ã€‚</strong></p>
<p>è¿™ç§éƒ¨ç½²æ¨¡å¼ä¸‹ï¼Œé€šè¿‡ Higress è‡ªèº«é›†æˆçš„æ§åˆ¶å°å»è¿ç»´æœåŠ¡&amp;æ›´æ”¹é…ç½®æ˜¯ä¸ç°å®çš„ï¼Œåªèƒ½æ“ä½œä¸€å°å®ä¾‹çš„é…ç½®å˜æ›´ï¼Œæ— æ³•è®©å®ä¾‹é—´è¿›è¡Œé…ç½®åŒæ­¥ã€‚å› æ­¤åœ¨è¿™ç§æ¨¡å¼ä¸‹çš„ç¼ºç‚¹æ˜¯ï¼Œåªèƒ½é€šè¿‡åœ¨é¡¹ç›®ä»£ç ä¸­ç»´æŠ¤é…ç½®æ–‡ä»¶ï¼Œéœ€è¦æ›´æ”¹æ—¶èµ°å‘å¸ƒæµç¨‹ï¼Œå°†é…ç½®å‘å¸ƒåˆ°æ¯å°å®ä¾‹ä¸Šé¢ã€‚ä¸è¿‡åœ¨æˆ‘ä»¬è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œéœ€è¦å˜æ›´é…ç½®çš„æƒ…å†µä¸å¤šã€‚</p>
<h4 data-id="heading-4">ç²˜æ€§ä¼šè¯</h4>
<p>åœ¨ MCP SSE é€šä¿¡æ–¹å¼ä¸‹ï¼Œå¤©ç„¶éœ€è¦è§£å†³ç²˜æ€§ä¼šè¯çš„é—®é¢˜ï¼ŒHigress åŸºäº Redis å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æå‰éƒ¨ç½²å¥½ Redis å®ä¾‹ä¹‹åï¼Œæ‰“å¼€ Higress çš„ MCP åŠŸèƒ½ï¼Œå¹¶å°† Redis é…ç½®æ›´æ–°è¿›å»ï¼Œé‡æ–°éƒ¨ç½²ä¸€ä¸‹å°±å¯ä»¥ä½¿ç”¨ MCP çš„åŠŸèƒ½äº†ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">...</span>
<span class="hljs-attr">data:</span>
Â  <span class="hljs-attr">higress:</span> <span class="hljs-string">|-</span>
Â  Â  <span class="hljs-attr">mcpServer:</span>
Â  Â  Â Â <span class="hljs-string">enable:</span>Â <span class="hljs-literal">true</span>
Â  Â  Â  <span class="hljs-attr">sse_path_suffix:</span> <span class="hljs-string">/sse</span>
Â  Â  Â  <span class="hljs-attr">redis:</span>
Â  Â  Â  Â  <span class="hljs-attr">address:</span> <span class="hljs-string">xxx.redis.zhangbei.rds.aliyuncs.com:6379</span>
Â  Â  Â  Â  <span class="hljs-string">username:</span>Â <span class="hljs-string">""</span>
Â  Â  Â  Â  <span class="hljs-string">password:</span>Â <span class="hljs-string">"xxx"</span>
Â  Â  Â  Â  <span class="hljs-attr">db:</span> <span class="hljs-number">0</span>
<span class="hljs-string">...</span>
</code></pre>
<p>è¿™ä»½é…ç½®æ–‡ä»¶å¯ä»¥ç»´æŠ¤åœ¨è‡ªå·±çš„åŸºäº Higress é•œåƒçš„é¡¹ç›®ä¸­ï¼Œåœ¨éƒ¨ç½²çš„æ—¶å€™å°†é…ç½®æ–‡ä»¶ COPY åˆ°æŒ‡å®šç›®å½•ï¼ˆè¿™ç§éƒ¨ç½²æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½åº”è¯¥è¿™ä¹ˆåšï¼‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">...
<span class="hljs-comment"># custom config</span>
COPY config/configmaps/higress-config.yaml /data/configmaps/higress-config.yaml
COPY config/mcpbridges/default.yaml /data/mcpbridges/default.yaml
COPY config/secrets/higress-console.yaml /data/secrets/higress-console.yaml
RUNÂ <span class="hljs-built_in">chmod</span>Â +x /data/configmaps/higress-config.yaml &amp;&amp; \
Â  Â Â <span class="hljs-built_in">chmod</span>Â +x /data/secrets/higress-console.yaml &amp;&amp; \
Â  Â Â <span class="hljs-built_in">chmod</span>Â +x /data/mcpbridges/*
...
</code></pre>
<p>å½“æ•´ä¸ª MCP ç½‘å…³æ­å»ºå®Œå¹¶ä½¿ç”¨çš„æ—¶å€™ï¼Œåœ¨ redis ä¸Šé€šè¿‡Â PSUBSCRIBE mcp-server-sse:*Â å‘½ä»¤å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„è°ƒç”¨ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f181283db3440f4881d64258ccd6e0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=aIZvWhrez%2Fk6fyxcAJMGlTj3kbk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-5">è‡ªå®šä¹‰æ„å»ºé•œåƒ</h4>
<p>å®˜æ–¹æ„å»ºå‡ºæ¥çš„é•œåƒä¸€èˆ¬ä¼šè¦æ±‚ä½“ç§¯å°ï¼Œæ»¡è¶³æœ€å°è¿è¡Œè¦æ±‚ï¼Œæ‰€ä»¥å¾ˆå¤šåŠŸèƒ½å…¶å®å¹¶ä¸é›†æˆåœ¨ Higress çš„é•œåƒä¸­ã€‚å¦‚æœä½ çš„ä¼ä¸šæœ‰è‡ªå·±çº¦å®šçš„é€šç”¨é•œåƒï¼Œæˆ–è€…æ˜¯æƒ³åœ¨åŸæœ¬çš„åŸºç¡€ä¸Šé›†æˆä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œå¦‚ä½¿ç”¨é˜¿é‡Œäº‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fsls%3Fspm%3Da1z389.11499242.0.0.65452413PLWe13%26utm_content%3Dg_1000408139" target="_blank" title="https://www.aliyun.com/product/sls?spm=a1z389.11499242.0.0.65452413PLWe13&amp;utm_content=g_1000408139" ref="nofollow noopener noreferrer">SLS</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">äº‘ç›‘æ§</a>ç­‰åŠŸèƒ½ï¼Œå°±éœ€è¦æ ¹æ® all-in-one é•œåƒçš„ Dockerfile å†…å®¹è¿›è¡Œè‡ªå®šä¹‰æ„å»ºã€‚è¿™é‡Œæœ‰ä¸ªæ³¨æ„çš„ç‚¹æ˜¯ï¼ŒHigress ä¸­çš„ envoy æ¨¡å—è¦æ±‚çš„ glibc æ˜¯ 2.18 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚</p>
<p>å…¶å®åªéœ€è¦å°† Higress çš„ Dockerfile æ–‡ä»¶å†…å®¹ç§»æ¤è¿‡æ¥å°±è¡Œï¼Œç„¶å<strong>å†å£°æ˜ä¸‹ç‹¬ç«‹éƒ¨ç½²çš„ WASM æ’ä»¶ä¸‹è½½åœ°å€</strong>ï¼Œå°±èƒ½å®ç°åŸºäºæŒ‡å®šé•œåƒè¿›è¡Œ Higress è‡ªå®šä¹‰æ„å»ºæ‰“åŒ…éƒ¨ç½²äº†ã€‚</p>
<p>Higress æœåŠ¡æ­å»ºå¥½åï¼Œå°±å¯ä»¥èµ°å¯¹å¤–å…¬ç½‘è®¿é—®çš„æµç¨‹äº†ï¼šï¼ˆ1ï¼‰ä¸€ä¸ªæ˜¯ç»‘å®š 8001 ç«¯å£ï¼Œé€šè¿‡ Higress æ§åˆ¶å°è¿›è¡ŒæŸ¥çœ‹ç›¸å…³é…ç½®çš„åŸŸåï¼Œé™åˆ¶ä¸ºåªå…è®¸å†…ç½‘è®¿é—®ã€‚æ³¨ï¼šè¿™ç§æ¨¡å¼ä¸‹æ— æ³•é€šè¿‡æ§åˆ¶å°ç›´æ¥å»æ›´æ”¹é…ç½®ï¼›ï¼ˆ2ï¼‰å¦ä¸€ä¸ªæ˜¯ç»‘å®š 8080 ç«¯å£ï¼Œå¯¹å¤–æä¾› MCP ç½‘å…³æœåŠ¡çš„åŸŸåã€‚</p>
<p>å®Œæ•´çš„ Dockerfile å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">FROM [ä¼ä¸šå†…éƒ¨åŸºç¡€é•œåƒ]
<span class="hljs-comment"># ä¸‹é¢ä¸º Higress all-in-one dockerfileä¸­çš„å†…å®¹</span>
ARG HUB=higress-registry.cn-hangzhou.cr.aliyuncs.com/higress
...
<span class="hljs-comment"># æ¨¡ç‰ˆ</span>
ENV HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=http://[ç”³è¯·çš„k8s serviceåœ°å€]/plugins/\<span class="hljs-variable">${name}</span>/\<span class="hljs-variable">${version}</span>/plugin.wasm
<span class="hljs-comment"># mcp wasm æ’ä»¶ä¸‹è½½åœ°å€</span>
ENV MCP_SERVER_WASM_IMAGE_URL=http://[ç”³è¯·çš„k8s serviceåœ°å€]/plugins/mcp-server/1.0.0/plugin.wasm
...
<span class="hljs-comment"># æ³¨æ„ dockerfile ä¸­ä¼šå» github ä¸‹è½½å¯¹åº”å¤„ç†å™¨æ¶æ„ä¸‹çš„ yq æ¨¡å—ï¼Œä¼ä¸šå†…ç½‘ç¯å¢ƒä¸‹å¯ä»¥æå‰ä¸‹è½½ä¸‹æ¥</span>
COPY ./yq_linux_[<span class="hljs-built_in">arch</span>] /usr/local/bin/yq
...
<span class="hljs-comment"># custom config</span>
COPY config/configmaps/higress-config.yaml /data/configmaps/higress-config.yaml
COPY config/mcpbridges/default.yaml /data/mcpbridges/default.yaml
COPY config/secrets/higress-console.yaml /data/secrets/higress-console.yaml
RUNÂ <span class="hljs-built_in">chmod</span>Â +x /data/configmaps/higress-config.yaml &amp;&amp; \
Â  Â Â <span class="hljs-built_in">chmod</span>Â +x /data/secrets/higress-console.yaml &amp;&amp; \
Â  Â Â <span class="hljs-built_in">chmod</span>Â +x /data/mcpbridges/*
...
</code></pre>
<h3 data-id="heading-6">Nacos</h3>
<p>Nacos çš„éƒ¨ç½²ç›¸å¯¹ç®€å•ï¼Œé™¤äº†é€šè¿‡ kubectl æˆ–è€… nacos-operator å·¥å…·ç›´æ¥æ“ä½œ K8s é›†ç¾¤éƒ¨ç½²å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥åŸºäº nacos-server çš„é•œåƒè¿›è¡Œéƒ¨ç½²Â Dockerfile <strong>[</strong> <strong>3]</strong> ã€‚å› ä¸Šæ–‡æåˆ°çš„å†…éƒ¨ç¯å¢ƒé—®é¢˜ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰æ‹©åŸºäº nacos-server çš„é•œåƒï¼Œå°†æœåŠ¡éƒ¨ç½²äº K8s é›†ç¾¤ä¸Šé¢ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">FROM nacos-registry.cn-hangzhou.cr.aliyuncs.com/nacos/nacos-server:latest
</code></pre>
<h4 data-id="heading-7">é›†ç¾¤æ¨¡å¼éƒ¨ç½²</h4>
<p>Nacos é›†ç¾¤æ¨¡å¼ä¸‹ä½¿ç”¨çš„ä¸€è‡´æ€§åè®®æ˜¯åŸºäº Raft å®ç°çš„ï¼Œå› æ­¤æœ€å°éœ€è¦éƒ¨ç½² 3 å°å®ä¾‹ã€‚</p>
<p>åœ¨å¼•ç”¨ nacos-server é•œåƒçš„ dockerfile ä¸­ï¼Œå£°æ˜ cluster çš„éƒ¨ç½²æ¨¡å¼ã€‚æˆ‘ä»¬æŸ¥çœ‹ nacos çš„å¯åŠ¨è„šæœ¬ï¼Œå‘ç°åœ¨ peer-finderï¼ˆæ’ä»¶ï¼‰ç›®å½•ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå¦‚æœå®šä¹‰äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi>A</mi><mi>C</mi><mi>O</mi><msub><mi>S</mi><mi>S</mi></msub><mi>E</mi><mi>R</mi><mi>V</mi><mi>E</mi><mi>R</mi><mi>S</mi><mtext>å˜é‡ï¼Œä¼šå°†</mtext></mrow><annotation encoding="application/x-tex">NACOS_SERVERS å˜é‡ï¼Œä¼šå°† </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.00773em;">ER</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal" style="margin-right:0.05764em;">ERS</span><span class="mord cjk_fallback">å˜é‡ï¼Œä¼šå°†</span></span></span></span></span>NACOS_SERVERS å˜é‡ä¸­çš„å€¼å†™å…¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>L</mi><mi>U</mi><mi>S</mi><mi>T</mi><mi>E</mi><msub><mi>R</mi><mi>C</mi></msub><mi>O</mi><mi>N</mi><mi>F</mi><mtext>æ–‡ä»¶ä¸­ï¼Œ</mtext></mrow><annotation encoding="application/x-tex">CLUSTER_CONF æ–‡ä»¶ä¸­ï¼Œ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.10903em;">LU</span><span class="mord mathnormal" style="margin-right:0.05764em;">STE</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">ONF</span><span class="mord cjk_fallback">æ–‡ä»¶ä¸­ï¼Œ</span></span></span></span></span>CLUSTER_CONF æ–‡ä»¶çš„é»˜è®¤è·¯å¾„æ˜¯ /home/nacos/conf/cluster.confï¼Œå…¶ä¸­å®šä¹‰çš„å°±æ˜¯ Nacos é›†ç¾¤çš„é™æ€æˆå‘˜åœ°å€åˆ—è¡¨ï¼Œå®ƒåœ¨é›†ç¾¤é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè¢«è¯»å–ï¼Œç”¨äºå‘ŠçŸ¥æ¯ä¸ªèŠ‚ç‚¹â€œé‚»å±…â€åœ¨å“ªï¼Œä»è€Œè®©å®ƒä»¬èƒ½å¤Ÿäº’ç›¸å‘ç°ã€å»ºç«‹è¿æ¥ï¼Œå¹¶åˆå§‹åŒ– Raft ä¸€è‡´æ€§åè®®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">...
PLUGINS_DIR=<span class="hljs-string">"/home/nacos/plugins/peer-finder"</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-function"><span class="hljs-title">print_servers</span></span>() {
Â  Â <span class="hljs-keyword">if</span>Â [[ ! -dÂ <span class="hljs-string">"<span class="hljs-variable">${PLUGINS_DIR}</span>"</span>Â ]];Â <span class="hljs-keyword">then</span>
Â  Â Â <span class="hljs-built_in">echo</span>Â <span class="hljs-string">""</span>Â &gt;<span class="hljs-string">"<span class="hljs-variable">$CLUSTER_CONF</span>"</span>
Â  Â Â <span class="hljs-keyword">for</span>Â serverÂ <span class="hljs-keyword">in</span>Â <span class="hljs-variable">${NACOS_SERVERS}</span>;Â <span class="hljs-keyword">do</span>
Â  Â  Â Â <span class="hljs-built_in">echo</span>Â <span class="hljs-string">"<span class="hljs-variable">$server</span>"</span>Â &gt;&gt;<span class="hljs-string">"<span class="hljs-variable">$CLUSTER_CONF</span>"</span>
Â  Â Â <span class="hljs-keyword">done</span>
Â Â <span class="hljs-keyword">else</span>
Â  Â  bashÂ <span class="hljs-variable">$PLUGINS_DIR</span>/plugin.sh
Â  Â Â <span class="hljs-built_in">sleep</span>Â 30
Â Â <span class="hljs-keyword">fi</span>
}
...
</code></pre>
<p>å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨ Dockerfile ä¸­ç»´æŠ¤å½“å‰é›†ç¾¤ä¸‹çš„ [å®ä¾‹ IP:ç«¯å£] åˆ—è¡¨ï¼Œä¾› Nacos é›†ç¾¤å¯åŠ¨æ—¶è¯»å–å¹¶åˆå§‹åŒ–ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">...
ENV <span class="hljs-attr">MODE</span>=cluster
ENV <span class="hljs-attr">NACOS_AUTH_TOKEN</span>=xxx
ENV <span class="hljs-attr">NACOS_AUTH_IDENTITY_KEY</span>=xxx
ENV <span class="hljs-attr">NACOS_AUTH_IDENTITY_VALUE</span>=xxx
ENV <span class="hljs-attr">NACOS_SERVERS</span>=<span class="hljs-string">"10.0.0.1:8848 10.0.0.2:8848 10.0.0.3:8848"</span>
<span class="hljs-comment"># nacos ç”¨æˆ·åå¯†ç </span>
ENV <span class="hljs-attr">NACOS_USERNAME</span>=xxx
ENV <span class="hljs-attr">NACOS_PASSWORD</span>=xxx
...
</code></pre>
<h4 data-id="heading-8">å®ä¾‹é—´åŠ¨æ€å‘ç°</h4>
<p>ä¸Šé¢è¿™ç§å›ºå®š IP åˆ—è¡¨çš„æ–¹å¼<strong>ç¼ºç‚¹æ˜¯æ˜¾è€Œæ˜“è§çš„</strong>ã€‚å®ƒæ˜¯ä¸€ä¸ªé™æ€çš„é…ç½®ï¼Œå½“å‡ºç°é›†ç¾¤çš„æ‰©ç¼©å®¹æ—¶ï¼Œå®ä¾‹æ˜¯æ²¡æœ‰åŠæ³•è‡ªåŠ¨å»æ›´æ–°æˆå‘˜ IP åˆ—è¡¨çš„ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹å¹¶å‘å¸ƒï¼Œæ•´ä¸ªè¿‡ç¨‹éå¸¸ç¹çï¼Œä¸¥é‡æƒ…å†µä¸‹å¯èƒ½ä¼šå½±å“çº¿ä¸ŠæœåŠ¡çš„ç¨³å®šæ€§ï¼›ä¸”åœ¨äº‘åŸç”Ÿå®¹å™¨åŒ–èƒŒæ™¯ä¸‹ï¼ŒIP å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œéšæ—¶æœ‰å¯èƒ½ä¼šå› ä¸ºæ•…éšœè¿ç§»è€Œæ”¹å˜ IPï¼Œç»´æŠ¤é™æ€ IP åˆ—è¡¨ä¸äº‘åŸç”Ÿçš„ç†å¿µèƒŒé“è€Œé©°ã€‚çº¿ä¸Šç”Ÿäº§æ˜¯å®Œå…¨ä¸æ¨èè¿™ç§æ–¹å¼çš„ã€‚</p>
<p>å†å›åˆ°ä¸Šé¢ docker-startup.sh è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡ peer-finder æ’ä»¶æ¥å®ç°é›†ç¾¤é—´å®ä¾‹çš„å‘ç°ï¼Œå–ä»£æ‰‹åŠ¨ç»´æŠ¤ cluster.conf æ–‡ä»¶ã€‚peer-finder æ’ä»¶è¿è¡Œä¾èµ–äº K8s é›†ç¾¤ Headless Service åŸŸåï¼Œä¼šå»æ‰§è¡Œç±»ä¼¼äº nslookup å‘½ä»¤æŸ¥æ‰¾ Service ä¸‹é¢çš„æ‰€æœ‰å¥åº· Pod çš„ IP åˆ—è¡¨ï¼Œç±»æ¯”äºæœåŠ¡å‘ç°çš„èƒ½åŠ› <strong>[</strong> <strong>4]</strong> ï¼Œè¿™æ ·å°±ä¸ç”¨å†æ‰‹åŠ¨å»ç»´æŠ¤å®ä¾‹ IP åˆ—è¡¨ã€‚</p>
<p>ä½†æ˜¯ peer-finder çš„è¿è¡Œä¾èµ–äº StatefulSet çš„å®ä¾‹éƒ¨ç½²æ¨¡å¼ï¼Œéœ€è¦æ¯ä¸ªå®ä¾‹æœ‰å›ºå®šçš„å®ä¾‹åã€‚å› ä¸ºæˆ‘ä»¬å†…éƒ¨ç¯å¢ƒçš„é™åˆ¶ï¼Œæˆ‘ä»¬ç°åœ¨éƒ¨ç½²çš„éƒ½æ˜¯æ— çŠ¶æ€çš„å®ä¾‹ï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•é€šè¿‡ peer-finder æ¥åšè¿™ä¸ªäº‹æƒ…ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å‚ç…§ peer-finder è„šæœ¬çš„å®ç°æ€è·¯ï¼Œæ¥è‡ªå·±å†™ä¸€ä¸ªå¯åŠ¨è„šæœ¬ã€‚</p>
<p><strong>1ï¼‰é¦–å…ˆä¸º Nacos é›†ç¾¤ç”³è¯· Headless çš„ Serviceã€‚</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
Â  <span class="hljs-attr">name:</span> <span class="hljs-string">nacos-headless</span>
Â  <span class="hljs-attr">namespace:</span> <span class="hljs-string">mcp-nacos</span>
Â  <span class="hljs-attr">labels:</span>
Â  Â  <span class="hljs-attr">app:</span> <span class="hljs-string">mcp-nacos</span>
Â  Â  <span class="hljs-attr">nacos:</span> <span class="hljs-string">mcp-nacos</span>
<span class="hljs-attr">spec:</span>
Â  <span class="hljs-attr">clusterIP:</span> <span class="hljs-string">None</span>
Â  <span class="hljs-attr">ports:</span>
Â  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">peer-finder-port</span>
Â  Â  <span class="hljs-attr">port:</span> <span class="hljs-number">8848</span>
Â  Â  <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
Â  Â  <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8848</span>
Â  <span class="hljs-attr">selector:</span>
Â  Â  <span class="hljs-attr">app:</span> <span class="hljs-string">mcp-nacos</span>
Â  <span class="hljs-attr">sessionAffinity:</span> <span class="hljs-string">None</span>
Â  <span class="hljs-attr">type:</span> <span class="hljs-string">ClusterIP</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b26974cc4274b4695cdd2fb29d07a8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=dYG94x8clr71BpPPG4PWEy5VIFg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>2ï¼‰è¿™é‡Œä¿®æ”¹ä¸‹ nacos-docker çš„å¯åŠ¨è„šæœ¬ï¼Œæä¾›ä¸€ä¸ªç®€å•çš„å®ç°ã€‚ï¼ˆä»…ä¾›å‚è€ƒï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">...
åŸdocker-startup.shå†…å®¹
...
<span class="hljs-comment"># æ–°å¢å†…å®¹</span>
<span class="hljs-comment"># æ³¨é‡Šæ‰ JAVAå¯åŠ¨å‘½ä»¤</span>
<span class="hljs-comment"># exec $JAVA ${JAVA_OPT}</span>
<span class="hljs-built_in">export</span>Â JAVA_OPTÂ <span class="hljs-comment"># export JAVA å¯åŠ¨å‚æ•°ï¼Œæ–¹é¢ä¸‹é¢è¯»å–</span>
HEADLESS_SERVICE_FQDN=<span class="hljs-string">"xxx.svc.cluster.local"</span>
CLUSTER_CONF_FILE=<span class="hljs-string">"/home/nacos/conf/cluster.conf"</span>
UPDATE_SCRIPT=<span class="hljs-string">"/home/nacos/bin/update-cluster.sh"</span>Â <span class="hljs-comment"># åŸå­æ›´æ–°è„šæœ¬</span>
NACOS_START_CMD=<span class="hljs-string">"<span class="hljs-variable">$JAVA</span>Â <span class="hljs-variable">$JAVA_OPT</span>"</span>
<span class="hljs-comment"># 1. åŠ¨æ€åˆ›å»º update-cluster.sh è„šæœ¬</span>
<span class="hljs-built_in">cat</span>Â &gt;Â <span class="hljs-variable">${UPDATE_SCRIPT}</span>Â &lt;&lt;Â <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-built_in">set</span>Â -e
NACOS_PORT=<span class="hljs-variable">${NACOS_APPLICATION_PORT:-8848}</span>
CLUSTER_CONF_FILE=<span class="hljs-string">"/home/nacos/conf/cluster.conf"</span>
TMP_CONF_FILE=<span class="hljs-string">"/home/nacos/conf/cluster.conf.tmp"</span>
&gt;Â <span class="hljs-string">"<span class="hljs-variable">${TMP_CONF_FILE}</span>"</span>
<span class="hljs-comment"># ä»æ ‡å‡†è¾“å…¥è¯»å– nslookup çš„åŸå§‹è¾“å‡º</span>
awkÂ <span class="hljs-string">'
/^Name:/ { flag=1; next }
flag &amp;&amp; /^Address:/ { print $2; flag=0 }
'</span> |Â <span class="hljs-keyword">while</span>Â IFS=Â <span class="hljs-built_in">read</span>Â -r ip;Â <span class="hljs-keyword">do</span>
Â  Â Â <span class="hljs-keyword">if</span>Â [ -nÂ <span class="hljs-string">"<span class="hljs-variable">$ip</span>"</span>Â ];Â <span class="hljs-keyword">then</span>
Â  Â  Â Â <span class="hljs-built_in">echo</span>Â <span class="hljs-string">"<span class="hljs-variable">${ip}</span>:<span class="hljs-variable">${NACOS_PORT}</span>"</span>Â &gt;&gt;Â <span class="hljs-string">"<span class="hljs-variable">${TMP_CONF_FILE}</span>"</span>
Â  Â Â <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>
<span class="hljs-comment"># æ’åºä»¥ç¡®ä¿æ–‡ä»¶å†…å®¹çš„ä¸€è‡´æ€§ï¼Œé¿å…ä¸å¿…è¦çš„æ›´æ–°</span>
<span class="hljs-built_in">sort</span>Â -oÂ <span class="hljs-string">"<span class="hljs-variable">${TMP_CONF_FILE}</span>"</span>Â <span class="hljs-string">"<span class="hljs-variable">${TMP_CONF_FILE}</span>"</span>
<span class="hljs-comment"># åªæœ‰åœ¨æ–°æ—§é…ç½®ä¸åŒæ—¶æ‰æ‰§è¡Œæ›´æ–°</span>
<span class="hljs-comment"># æ£€æŸ¥æ—§æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">if</span>Â [ ! -fÂ <span class="hljs-string">"<span class="hljs-variable">${CLUSTER_CONF_FILE}</span>"</span>Â ] || ! cmp -sÂ <span class="hljs-string">"<span class="hljs-variable">${TMP_CONF_FILE}</span>"</span>Â <span class="hljs-string">"<span class="hljs-variable">${CLUSTER_CONF_FILE}</span>"</span>;Â <span class="hljs-keyword">then</span>
Â  Â Â <span class="hljs-built_in">echo</span>Â <span class="hljs-string">"[<span class="hljs-subst">$(date)</span>][update-script] Peer list changed. Updating config."</span>
Â  Â Â <span class="hljs-built_in">mv</span>Â <span class="hljs-string">"<span class="hljs-variable">${TMP_CONF_FILE}</span>"</span>Â <span class="hljs-string">"<span class="hljs-variable">${CLUSTER_CONF_FILE}</span>"</span>
Â  Â Â <span class="hljs-built_in">echo</span>Â <span class="hljs-string">"[<span class="hljs-subst">$(date)</span>][update-script] cluster.conf updated:"</span>
Â  Â Â <span class="hljs-built_in">cat</span>Â <span class="hljs-string">"<span class="hljs-variable">${CLUSTER_CONF_FILE}</span>"</span>
<span class="hljs-keyword">else</span>
Â  Â Â <span class="hljs-built_in">rm</span>Â <span class="hljs-string">"<span class="hljs-variable">${TMP_CONF_FILE}</span>"</span>
<span class="hljs-keyword">fi</span>
EOF
<span class="hljs-built_in">chmod</span>Â +xÂ <span class="hljs-variable">${UPDATE_SCRIPT}</span>
<span class="hljs-comment"># 2. å¯åŠ¨å‰çš„åˆå§‹åŒ–å¾ªç¯</span>
MAX_INIT_RETRIES=30
RETRY_COUNT=0
MIN_PEERS=3Â <span class="hljs-comment"># æœŸæœ›çš„é›†ç¾¤æœ€å°å‰¯æœ¬æ•°é‡</span>
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"[INFO] Initializing cluster config. Waiting for at leastÂ <span class="hljs-variable">${MIN_PEERS}</span>Â peers to be available..."</span>
<span class="hljs-keyword">while</span>Â <span class="hljs-literal">true</span>;Â <span class="hljs-keyword">do</span>
Â Â <span class="hljs-comment"># ç›´æ¥å°† nslookup çš„è¾“å‡ºé€šè¿‡ç®¡é“ä¼ ç»™æ›´æ–°è„šæœ¬</span>
Â  nslookupÂ <span class="hljs-string">"<span class="hljs-variable">${HEADLESS_SERVICE_FQDN}</span>"</span>Â |Â <span class="hljs-variable">${UPDATE_SCRIPT}</span>
Â Â <span class="hljs-comment"># æ£€æŸ¥ç”Ÿæˆçš„é…ç½®æ–‡ä»¶è¡Œæ•°</span>
Â  LINE_COUNT=$(<span class="hljs-built_in">wc</span>Â -l &lt;Â <span class="hljs-string">"<span class="hljs-variable">${CLUSTER_CONF_FILE}</span>"</span>)
Â Â <span class="hljs-keyword">if</span>Â [Â <span class="hljs-string">"<span class="hljs-variable">${LINE_COUNT}</span>"</span>Â -geÂ <span class="hljs-string">"<span class="hljs-variable">${MIN_PEERS}</span>"</span>Â ];Â <span class="hljs-keyword">then</span>
Â  Â Â <span class="hljs-built_in">echo</span>Â <span class="hljs-string">"[INFO] Initial cluster.conf is ready withÂ <span class="hljs-variable">${LINE_COUNT}</span>Â peers."</span>
Â  Â Â <span class="hljs-built_in">break</span>
Â Â <span class="hljs-keyword">fi</span>
Â  RETRY_COUNT=$((RETRY_COUNT+<span class="hljs-number">1</span>))
Â Â <span class="hljs-keyword">if</span>Â [Â <span class="hljs-string">"<span class="hljs-variable">${RETRY_COUNT}</span>"</span>Â -gtÂ <span class="hljs-string">"<span class="hljs-variable">${MAX_INIT_RETRIES}</span>"</span>Â ];Â <span class="hljs-keyword">then</span>
Â  Â Â <span class="hljs-built_in">echo</span>Â <span class="hljs-string">"[WARN] Could not findÂ <span class="hljs-variable">${MIN_PEERS}</span>Â peers afterÂ <span class="hljs-variable">${MAX_INIT_RETRIES}</span>Â retries. Starting withÂ <span class="hljs-variable">${LINE_COUNT}</span>Â peers found."</span>
Â  Â Â <span class="hljs-built_in">break</span>
Â Â <span class="hljs-keyword">fi</span>
Â Â <span class="hljs-built_in">echo</span>Â <span class="hljs-string">"[INFO] FoundÂ <span class="hljs-variable">${LINE_COUNT}</span>Â peers. Waiting for more... Retrying in 5 seconds."</span>
Â Â <span class="hljs-built_in">sleep</span>Â 5
<span class="hljs-keyword">done</span>
<span class="hljs-comment"># 3. åœ¨åå°å¯åŠ¨æˆ‘ä»¬è‡ªå·±çš„ç›‘æ§å¾ªç¯</span>
(
Â Â <span class="hljs-keyword">while</span>Â <span class="hljs-literal">true</span>;Â <span class="hljs-keyword">do</span>
Â  Â Â <span class="hljs-built_in">sleep</span>Â 15Â <span class="hljs-comment"># æ¯ 15 ç§’æ£€æŸ¥ä¸€æ¬¡</span>
Â  Â Â <span class="hljs-built_in">echo</span>Â <span class="hljs-string">"[<span class="hljs-subst">$(date)</span>][monitor] Checking for peer updates..."</span>
Â  Â  nslookupÂ <span class="hljs-string">"<span class="hljs-variable">${HEADLESS_SERVICE_FQDN}</span>"</span>Â |Â <span class="hljs-variable">${UPDATE_SCRIPT}</span>
Â Â <span class="hljs-keyword">done</span>
) &amp;
<span class="hljs-comment"># 4. å¯åŠ¨ Nacos ä¸»è¿›ç¨‹</span>
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"[INFO] Starting Nacos server..."</span>
<span class="hljs-built_in">exec</span>Â sh -cÂ <span class="hljs-string">"<span class="hljs-variable">${NACOS_START_CMD}</span>"</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬ cluster.conf æ–‡ä»¶ä¸­çš„æˆå‘˜ IP åˆ—è¡¨å°±å®ç°äº†è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p>çº¿ä¸Šç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯æ¨èä½¿ç”¨æœ‰çŠ¶æ€ StatefulSet çš„éƒ¨ç½²æ¨¡å¼ï¼Œå¹¶ç»“åˆ peer-finder çš„èƒ½åŠ›å®ç°å®ä¾‹é—´çš„äº’ç›¸å‘ç°ã€‚è€Œä¸æ˜¯ç”¨æ— çŠ¶æ€çš„å®ä¾‹ï¼Œè‡ªå·±å»å†™è„šæœ¬å®ç°ã€‚åç»­æˆ‘ä»¬ä¹Ÿä¼šå‡çº§åˆ° StatefulSet çš„æ¨¡å¼è¿›è¡Œéƒ¨ç½²ã€‚</p>
<h4 data-id="heading-9">é…ç½®å¤–ç½® Mysql</h4>
<p>åœ¨é›†ç¾¤éƒ¨ç½²æ¨¡å¼ä¸‹ï¼Œå°±æ— æ³•ä½¿ç”¨ Nacos å†…ç½®çš„ä¸æ”¯æŒæ•°æ®å…±äº«çš„ Derby æ•°æ®åº“ï¼Œéœ€è¦é…ç½®å¤–ç½®çš„ Mysql æ•°æ®åº“ã€‚æå‰éƒ¨ç½²å¥½ Mysql å®ä¾‹ä¹‹åï¼ŒæŒ‰ç…§ Nacos ä¸­çš„Â mysql-schema.sql <strong>[</strong> <strong>5]</strong> æ•°æ®åº“é…ç½®æ–‡ä»¶å°†è¡¨åˆå§‹åŒ–ï¼Œå†å°† mysql é…ç½®ä¿¡æ¯å†™å…¥ Dockerfile ä¸­å³å¯ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">...
<span class="hljs-comment"># mysql config</span>
ENV <span class="hljs-attr">SPRING_DATASOURCE_PLATFORM</span>=mysql
ENV <span class="hljs-attr">MYSQL_DATABASE_NUM</span>=<span class="hljs-number">1</span>
ENV <span class="hljs-attr">MYSQL_SERVICE_HOST</span>=xxx.mysql.zhangbei.rds.aliyuncs.com
ENV <span class="hljs-attr">MYSQL_SERVICE_PORT</span>=<span class="hljs-number">3306</span>
ENV <span class="hljs-attr">MYSQL_SERVICE_DB_NAME</span>=nacos
ENV <span class="hljs-attr">MYSQL_SERVICE_USER</span>=xxx
ENV <span class="hljs-attr">MYSQL_SERVICE_PASSWORD</span>=xxx
...
</code></pre>
<p>åœ¨ä¸º Nacos åšæœåŠ¡æš´éœ²çš„æ—¶å€™ï¼Œåªéœ€è¦æš´éœ² Nacos æ§åˆ¶å°çš„ 8080 ç«¯å£ï¼Œä¸”é™åˆ¶ä¸ºåªå…è®¸å†…ç½‘è®¿é—®å³å¯ã€‚å› ä¸º Nacos åªæ˜¯å†…éƒ¨ä½œä¸ºç»´æŠ¤ç®¡ç† MCP å·¥å…·å…ƒæ•°æ®ä¿¡æ¯çš„ MCP Registry ä½¿ç”¨ï¼Œå¯¹ç”¨æˆ·ä¾§ä¸æ„ŸçŸ¥ï¼›ä¸” Higress å’Œ Nacos éƒ½éƒ¨ç½²åœ¨å†…ç½‘çš„ K8s é›†ç¾¤ä¸Šé¢ï¼Œå†…éƒ¨é€šä¿¡é€šè¿‡ K8s çš„ Service å³å¯ï¼Œæ— éœ€å°† Nacos çš„ 8848 ç«¯å£æš´éœ²ç»™å…¬ç½‘ã€‚</p>
<h4 data-id="heading-10">ç”³è¯· K8s Service ä¾› Higress ä½¿ç”¨</h4>
<p>æ³¨æ„ Higress æ‹‰å–/è®¢é˜… Nacos ä¸­çš„é…ç½®ä¼šé€šè¿‡ gRPC çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™é‡Œçš„ Service éœ€è¦<strong>æš´éœ² 8848 å’Œ 9848 ä¸¤ä¸ªç«¯å£</strong>ç»™ Higress ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
Â  <span class="hljs-attr">name:</span> <span class="hljs-string">pre-oss-mcp-nacos-endpoint</span>
Â  <span class="hljs-attr">namespace:</span> <span class="hljs-string">aso-oss-mcp-nacos</span>
Â  <span class="hljs-attr">labels:</span>
Â  Â  <span class="hljs-attr">app:</span> <span class="hljs-string">mcp-nacos</span>
Â  Â  <span class="hljs-attr">nacos:</span> <span class="hljs-string">mcp-nacos</span>
<span class="hljs-attr">spec:</span>
Â  <span class="hljs-attr">type:</span> <span class="hljs-string">ClusterIP</span>
Â  <span class="hljs-attr">ports:</span>
Â  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">subscribe-port</span>
Â  Â  <span class="hljs-attr">port:</span> <span class="hljs-number">8848</span>
Â  Â  <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
Â  Â  <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8848</span>
Â  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">grpc-port</span>
Â  Â  <span class="hljs-attr">port:</span> <span class="hljs-number">9848</span>
Â  Â  <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
Â  Â  <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9848</span>
Â  <span class="hljs-attr">selector:</span>
Â  Â  <span class="hljs-attr">app:</span> <span class="hljs-string">nacos</span>
</code></pre>
<p>åŒç†ï¼Œå¦‚æœæƒ³ä½¿ç”¨ä¼ä¸šå†…éƒ¨çš„é•œåƒï¼Œæˆ–è€…æ˜¯æƒ³åœ¨åŸæœ¬çš„åŸºç¡€ä¸Šå³æˆä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œå¦‚ä½¿ç”¨é˜¿é‡Œäº‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fsls%3Fspm%3Da1z389.11499242.0.0.65452413PLWe13%26utm_content%3Dg_1000408139" target="_blank" title="https://www.aliyun.com/product/sls?spm=a1z389.11499242.0.0.65452413PLWe13&amp;utm_content=g_1000408139" ref="nofollow noopener noreferrer">SLS</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">äº‘ç›‘æ§</a>ç­‰åŠŸèƒ½ï¼Œä¹Ÿå¯æ ¹æ® Nacos çš„ Dockerfile è¿›è¡Œè‡ªå®šä¹‰æ„å»ºéƒ¨ç½²ã€‚</p>
<h2 data-id="heading-11">é‰´æƒ</h2>
<p>Higress è‡ªèº«æä¾›äº†ä¸°å¯Œçš„é‰´æƒ <strong>[6</strong> <strong>]</strong> èƒ½åŠ›ï¼Œå¦‚æœä½ çš„ä¼ä¸šæœ¬èº«å°±åŸºäº Higress æ­å»ºäº†è‡ªå·±çš„ç½‘å…³å¹¶ä½¿ç”¨äº† Higress æä¾›çš„é‰´æƒèƒ½åŠ›ï¼Œè¿™ç§åœºæ™¯ä¸‹ç›´æ¥å¤ç”¨åŸæ¥çš„æ–¹æ¡ˆå³å¯ã€‚</p>
<p>å¦ä¸€ç§åœºæ™¯ä¸‹ï¼Œä¼ä¸šä¸­ä¼šæœ‰å¤šä¸ªæœåŠ¡ Providerï¼Œæ¯ä¸ª Provider æœ‰ä¸åŒçš„é‰´æƒæ–¹å¼ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒæŸä¸ªæœåŠ¡æä¾›è€…ä¼šé€šè¿‡æ‹¦æˆªå™¨å¯¹è¯·æ±‚ä¸­æºå¸¦çš„ç”¨æˆ· Cookie è¿›è¡Œ RAM é‰´æƒï¼›å¦ä¸€ä¸ªæœåŠ¡æä¾›è€…ä¼šé€šè¿‡ tengine lua è„šæœ¬å¯¹è¯·æ±‚è¿›è¡Œè‡ªå®šä¹‰é‰´æƒï¼›ä»¥åŠåç»­æ³¨å†Œçš„æœåŠ¡å¯èƒ½æœ‰å…¶ä»–çš„é‰´æƒæ–¹å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7acd4931beee4a66a5895d49856ed06f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=FlCLlI37yu7YtkE37sOHQtRox18%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›ä½¿ç”¨ Higress çš„é‰´æƒèƒ½åŠ›å»è¦†ç›–å…¨éƒ¨çš„é‰´æƒåœºæ™¯ï¼Œå¼€å‘ç»´æŠ¤æˆæœ¬è¿‡é«˜ï¼Œæˆ‘ä»¬ä¼˜å…ˆè€ƒè™‘ç›´æ¥å¤ç”¨æœåŠ¡æä¾›è€…å·²æœ‰çš„é‰´æƒèƒ½åŠ›ï¼›å¦ä¸€æ–¹é¢ï¼Œå¦‚æœé€šè¿‡ç½‘å…³å±‚é‰´æƒéœ€è¦å°† AK æˆ–è€…è®¤è¯ä¿¡æ¯å­˜æ”¾åœ¨ Higress æœåŠ¡ä¸Šï¼Œåœ¨å®‰å…¨å±‚é¢ä¹Ÿä¸æ˜¯ä¸€ä¸ªåˆé€‚çš„åšæ³•ã€‚</p>
<p>è¿™é‡Œæ¨èçš„åšæ³•æ˜¯ç›´æ¥åœ¨ MCP å·¥å…·è°ƒç”¨çš„æ—¶å€™ï¼Œå°†é‰´æƒä¿¡æ¯é€ä¼ ç»™æœåŠ¡æä¾›è€…ï¼Œè®©æœåŠ¡æä¾›è€…å®Œæˆé‰´æƒã€‚</p>
<h2 data-id="heading-12">MCP éªŒè¯</h2>
<p>æ ¹æ®æ–‡æ¡£ <strong>[</strong> <strong>7]</strong> ä¸­çš„æ“ä½œç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åšä¸ªå…¨é“¾è·¯æµ‹è¯•éªŒè¯ã€‚ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰æ­¥ï¼š</p>
<p><strong>1ï¼‰åœ¨ Nacos ä¸­æ³¨å†ŒæœåŠ¡ï¼Œå¹¶é…ç½® MCP å·¥å…·çš„å…ƒæ•°æ®ä¿¡æ¯ï¼š</strong></p>
<p>åœ¨ public å‘½åç©ºé—´ä¸‹ï¼Œåˆ›å»ºæœåŠ¡ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3cce81e87f4424e99a857611e3a2859~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=rocIeygmJaZ561pnlMZWFcJzTuY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æœºå™¨ä¸Šå°†è‡ªå·±çš„æœåŠ¡ä½œä¸ºæ°¸ä¹…å®ä¾‹æ³¨å†Œè¿›å»ã€‚ï¼ˆè¿™é‡Œä¸ºäº†å¿«é€ŸéªŒè¯é»‘å±ç™»é™†æœºå™¨æ“ä½œï¼Œçº¿ä¸Šç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯é¡»è¦ç™½å±æ“ä½œï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">curlÂ -X POSTÂ 'http://127.0.0.1:8848/nacos/v1/ns/instance?<span class="hljs-attr">namespaceId</span>=[namespace]&amp;serviceName=[service_name]&amp;groupName=[group_name]&amp;ip=[æœåŠ¡åŸŸå]&amp;port=[æœåŠ¡ç«¯å£]&amp;ephemeral=<span class="hljs-literal">false</span><span class="hljs-string">'
</span></code></pre>
<p>æ³¨å†Œå®Œä¹‹åï¼Œå°±èƒ½åœ¨ Nacos æ§åˆ¶å°ä¸Šçœ‹åˆ°æ³¨å†Œçš„æœåŠ¡é…ç½®ä»¥åŠå¥åº·çŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5be0472e03b74a07bbd388c7c1d92e98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=fCfGlWrsNMz2SKZaOssffGrhkes%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¥ç€åœ¨ Nacos æ§åˆ¶å°ä¸Šé…ç½® MCP å·¥å…·ï¼Œæ·»åŠ ä¸€ä¸ªç®€å•å·¥å…·ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªæ— å‚æ•° GET æ¥å£ï¼Œå¹¶å‘å¸ƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d0605c476a54633aa18f22b8a6c70ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=X%2Bc%2FOXLZPSJHclqTUgq1Rc3RTIY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c08d19a2f86d40f6ac93ff1fbd120dab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=LsC7KHhRH3Tzr5d99BDORRis73w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"requestTemplate"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â  Â Â <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"/xxx/list.json"</span><span class="hljs-punctuation">,</span>
Â  Â Â <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"GET"</span><span class="hljs-punctuation">,</span>
Â  Â Â <span class="hljs-attr">"headers"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
Â  Â Â <span class="hljs-attr">"argsToUrlParam"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
Â Â <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"responseTemplate"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â  Â Â <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"{{.}}"</span>
Â Â <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>2ï¼‰åœ¨ Higress ä¸­é…ç½® MCP Nacos çš„æœåŠ¡æ¥æºï¼š</strong></p>
<p>è¿™é‡Œä¸ºäº†å¿«é€Ÿæµ‹è¯•å…³é—­äº† Nacos çš„è®¤è¯ï¼Œçº¿ä¸Šç¯å¢ƒå»ºè®®å¼€å¯ Nacos çš„è®¤è¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31950e12263e4c80b2ac2b9391c6a910~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=CY1pfDkMjfCyzh1RzzQzDOj4E3g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>3ï¼‰åœ¨ Cursor/Cherry Studio ä¸­é…ç½®å¯¹å¤–æš´éœ²çš„ Higress æœåŠ¡åœ°å€å’Œ uriï¼Œå³å¯ä½¿ç”¨ MCP å·¥å…·ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb0c06bc1fe04cb89931c0c337d67e1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=6Smx6MVRHg56dTsEO%2FKlNEPzqjk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc7470b810164f83b9b8ca7d89834aae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=jvOuwgiMFNhQsb9FDi99mP73GPA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-13">è®¾è®¡å›¾</h2>
<h3 data-id="heading-14">å®¹ç¾æ¶æ„</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e48188f92d884ebd9159719acf34ae38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=n2kgUuKswot4UITM1wakegf0nBI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿›å…¥æµè§ˆå™¨æŸ¥çœ‹åŸå›¾ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fimg.alicdn.com%2Fimgextra%2Fi2%2FO1CN0138v82b1L7vNY3RQdo_!!6000000001253-2-tps-6507-5451.png" target="_blank" title="https://img.alicdn.com/imgextra/i2/O1CN0138v82b1L7vNY3RQdo_!!6000000001253-2-tps-6507-5451.png" ref="nofollow noopener noreferrer">img.alicdn.com/imgextra/i2â€¦</a></p>
<p>åœ¨æ•´ä¸ª MCP ç½‘å…³ä¸­ï¼Œé€šè¿‡ uri æ¥è·¯ç”±ä¸åŒçš„ MCP å·¥å…·ï¼Œå®ç°å·¥å…·çš„éš”ç¦»ã€‚</p>
<h3 data-id="heading-15">é€»è¾‘æ¨¡å—å›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58740208297546f9bb5f91a6f3fea541~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=dcBqJ0pPEgGf9I085GFIzeU9Vgc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-16">æ—¶åºå›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c3feed715ef439ab853acdd4f56d7d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765870494&amp;x-signature=zwI7xElEp5JbbY6cAc8fSIrdR3g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>é™„å½•ï¼š</strong></p>
<p>[1] åŸºäº all-in-one çš„ docker é•œåƒ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhigress-group%2Fhigress-standalone%2Fblob%2Fmain%2Fall-in-one%2FDockerfile" target="_blank" title="https://github.com/higress-group/higress-standalone/blob/main/all-in-one/Dockerfile" ref="nofollow noopener noreferrer">github.com/higress-groâ€¦</a></p>
<p>[2] higress-plugin-server</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnkirito.moe%2Fhigress-plugin-server%2F" target="_blank" title="https://www.cnkirito.moe/higress-plugin-server/" ref="nofollow noopener noreferrer">www.cnkirito.moe/higress-pluâ€¦</a></p>
<p>[3] åŸºäº nacos-server çš„é•œåƒè¿›è¡Œéƒ¨ç½²</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnacos-group%2Fnacos-docker%2Fblob%2Fmaster%2Fbuild%2FDockerfile" target="_blank" title="https://github.com/nacos-group/nacos-docker/blob/master/build/Dockerfile" ref="nofollow noopener noreferrer">github.com/nacos-groupâ€¦</a></p>
<p>[4] è„šæœ¬æºç </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkmodules%2Fpeer-finder%2Fblob%2Fmaster%2Fpeer-finder.go" target="_blank" title="https://github.com/kmodules/peer-finder/blob/master/peer-finder.go" ref="nofollow noopener noreferrer">github.com/kmodules/peâ€¦</a></p>
<p>[5] mysql-schema.sql</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2Fnacos%2Fblob%2Fdevelop%2Fdistribution%2Fconf%2Fmysql-schema.sql" target="_blank" title="https://github.com/alibaba/nacos/blob/develop/distribution/conf/mysql-schema.sql" ref="nofollow noopener noreferrer">github.com/alibaba/nacâ€¦</a></p>
<p>[6] Higress æä¾›ä¸°å¯Œé‰´æƒèƒ½åŠ›</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhigress.cn%2Fdocs%2Flatest%2Fplugins%2Fauthentication%2Fbasic-auth%2F" target="_blank" title="https://higress.cn/docs/latest/plugins/authentication/basic-auth/" ref="nofollow noopener noreferrer">higress.cn/docs/latestâ€¦</a></p>
<p>[7]Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247575770%26idx%3D1%26sn%3Dca41d8dade57fcf378e1f7c5a5e0dca5%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247575770&amp;idx=1&amp;sn=ca41d8dade57fcf378e1f7c5a5e0dca5&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">åŸºäº Nacos + Higress Â çš„ MCP å¼€å‘æ–°èŒƒå¼ï¼Œæ‰‹æŠŠæ‰‹æ•™ç¨‹æ¥äº†ï¼</a></p>
<p>[8]Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU0MzkyMTgzNg%3D%3D%26mid%3D2247486505%26idx%3D1%26sn%3Db61997531cce196d0b7fc46f79a003be%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU0MzkyMTgzNg==&amp;mid=2247486505&amp;idx=1&amp;sn=b61997531cce196d0b7fc46f79a003be&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Nacos 3.0 æ­£å¼å‘å¸ƒï¼šMCP Registryã€å®‰å…¨é›¶ä¿¡ä»»ã€é“¾æ¥æ›´å¤šç”Ÿæ€</a></p>
<p>[9] ä¿®æ”¹å†…ç½®æ’ä»¶çš„é•œåƒåœ°å€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhigress.cn%2Fdocs%2Flatest%2Fops%2Fhow-tos%2Fbuiltin-plugin-url%2F" target="_blank" title="https://higress.cn/docs/latest/ops/how-tos/builtin-plugin-url/" ref="nofollow noopener noreferrer">higress.cn/docs/latestâ€¦</a></p>
<p>[10] Nacos é›†ç¾¤æ¨¡å¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fnacos.io%2Fdocs%2Flatest%2Fmanual%2Fadmin%2Fdeployment%2Fdeployment-cluster%2F" target="_blank" title="https://nacos.io/docs/latest/manual/admin/deployment/deployment-cluster/" ref="nofollow noopener noreferrer">nacos.io/docs/latestâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[UModel æŸ¥è¯¢ï¼šé©¯æœâ€œå¯è§‚æµ‹æ€§æ··ä¹±â€ï¼Œé˜¿é‡Œäº‘çš„å›¾æ¨¡å‹å»ºæ¨¡åˆ©å™¨ï¼]]></title>    <link>https://juejin.cn/post/7581097545670524947</link>    <guid>https://juejin.cn/post/7581097545670524947</guid>    <pubDate>2025-12-08T08:26:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581097545670524947" data-draft-id="7580616979473252358" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="UModel æŸ¥è¯¢ï¼šé©¯æœâ€œå¯è§‚æµ‹æ€§æ··ä¹±â€ï¼Œé˜¿é‡Œäº‘çš„å›¾æ¨¡å‹å»ºæ¨¡åˆ©å™¨ï¼"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-12-08T08:26:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            UModel æŸ¥è¯¢ï¼šé©¯æœâ€œå¯è§‚æµ‹æ€§æ··ä¹±â€ï¼Œé˜¿é‡Œäº‘çš„å›¾æ¨¡å‹å»ºæ¨¡åˆ©å™¨ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T08:26:00.000Z" title="Mon Dec 08 2025 08:26:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1AWSxBqEtQ%2F" target="_blank" title="https://www.bilibili.com/video/BV1AWSxBqEtQ/" ref="nofollow noopener noreferrer">ç‚¹å‡»æ­¤å¤„ï¼Œç«‹å³æŸ¥çœ‹è§†é¢‘è¯¾ç¨‹ï¼</a></p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ ç«™åœ¨ä¸€ä¸ªå·¨å¤§çš„å›¾ä¹¦é¦†é‡Œï¼Œè¿™é‡Œæœ‰æˆåƒä¸Šä¸‡æœ¬ä¹¦ï¼Œä½†æ¯æœ¬ä¹¦çš„ç›®å½•éƒ½æ•£è½åœ¨ä¸åŒçš„æˆ¿é—´é‡Œï¼Œè€Œä¸”æ¯é—´æˆ¿é—´çš„ç´¢å¼•æ–¹å¼éƒ½ä¸ä¸€æ ·ã€‚å½“ä½ æƒ³è¦æ‰¾ä¸€æœ¬å…³äºâ€œæœåŠ¡è°ƒç”¨â€çš„ä¹¦æ—¶ï¼Œä½ éœ€è¦åœ¨ APM æˆ¿é—´ã€K8s æˆ¿é—´ã€äº‘èµ„æºæˆ¿é—´ä¹‹é—´æ¥å›å¥”æ³¢ï¼Œè¿˜è¦è®°ä½æ¯ä¸ªæˆ¿é—´ä¸åŒçš„æŸ¥æ‰¾è§„åˆ™...</p>
<p>è¿™å°±æ˜¯å¾ˆå¤šä¼ä¸šåœ¨å¯è§‚æµ‹æ€§é¢†åŸŸé¢ä¸´çš„çœŸå®å›°å¢ƒã€‚è€Œ UModel å°±åƒæ˜¯ä¸ºè¿™ä¸ªæ··ä¹±çš„å›¾ä¹¦é¦†å»ºç«‹äº†ä¸€å¥—ç»Ÿä¸€çš„â€œæ™ºèƒ½ç®¡ç†ç³»ç»Ÿâ€ï¼Œè®©ä½ èƒ½å¤Ÿè½»æ¾æ¢ç´¢å’Œç†è§£æ•´ä¸ªçŸ¥è¯†å›¾è°±çš„ç»“æ„ã€‚</p>
<h3 data-id="heading-1">1.1 UModel æ˜¯ä»€ä¹ˆ</h3>
<p>UModel æ˜¯ä¸€ç§åŸºäºå›¾æ¨¡å‹çš„å¯è§‚æµ‹æ•°æ®å»ºæ¨¡æ–¹æ³•ï¼Œæ—¨åœ¨è§£å†³ä¼ä¸šçº§ç¯å¢ƒä¸­å¯è§‚æµ‹æ•°æ®é‡‡é›†ã€ç»„ç»‡å’Œåˆ©ç”¨çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚UModel é‡‡ç”¨ Nodeï¼ˆèŠ‚ç‚¹ï¼‰å’Œ Linkï¼ˆè¾¹ï¼‰ç»„æˆçš„å›¾ç»“æ„æ¥æè¿° IT ä¸–ç•Œï¼Œé€šè¿‡æ ‡å‡†åŒ–çš„æ•°æ®å»ºæ¨¡æ–¹å¼ï¼Œå®ç°å¯è§‚æµ‹æ•°æ®çš„ç»Ÿä¸€è¡¨ç¤ºã€å­˜å‚¨è§£è€¦å’Œæ™ºèƒ½åˆ†æã€‚</p>
<p>ä½œä¸ºé˜¿é‡Œäº‘å¯è§‚æµ‹ä½“ç³»çš„æ•°æ®å»ºæ¨¡åŸºç¡€ï¼ŒUModel ä¸ºä¼ä¸šæä¾›äº†ä¸€å¥—é€šç”¨çš„å¯è§‚æµ‹â€œäº¤äº’è¯­è¨€â€ï¼Œè®©äººã€ç¨‹åºå’Œ AI éƒ½èƒ½å¤Ÿç†è§£å’Œåˆ†æå¯è§‚æµ‹æ•°æ®ï¼Œä»è€Œæ„å»ºçœŸæ­£çš„å…¨æ ˆå¯è§‚æµ‹èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒæ¦‚å¿µ</h4>
<p>UModel é‡‡ç”¨å›¾è®ºçš„åŸºæœ¬æ¦‚å¿µï¼Œä½¿ç”¨Â Nodeï¼ˆèŠ‚ç‚¹ï¼‰å’ŒÂ Linkï¼ˆè¾¹ï¼‰ç»„æˆæœ‰å‘å›¾æ¥æè¿° IT ç³»ç»Ÿï¼š</p>
<ul>
<li>Nodeï¼ˆèŠ‚ç‚¹ï¼‰ï¼šæ ¸å¿ƒéƒ¨åˆ†ä¸º Setï¼ˆæ•°æ®é›†ï¼‰ï¼Œè¡¨ç¤ºåŒç±»å‹å®ä½“æˆ–æ•°æ®çš„é›†åˆï¼Œå¦‚ EntitySetï¼ˆå®ä½“é›†ï¼‰ã€MetricSetï¼ˆæŒ‡æ ‡é›†ï¼‰ã€LogSetï¼ˆæ—¥å¿—é›†ï¼‰ç­‰ï¼›æ­¤å¤–è¿˜åŒ…å«æ•°æ®é›†çš„å­˜å‚¨ç±»å‹ï¼ˆStorageï¼‰ï¼Œå¦‚ SLSã€Prometheusã€MySQL ç­‰</li>
<li>Linkï¼ˆå…³è”ï¼‰ï¼šè¡¨ç¤º Node ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚ EntitySetLinkï¼ˆå®ä½“å…³è”ï¼‰ã€DataLinkï¼ˆæ•°æ®å…³è”ï¼‰ã€StorageLinkï¼ˆå­˜å‚¨å…³è”ï¼‰ç­‰</li>
<li>Fieldï¼ˆå­—æ®µï¼‰ï¼šç”¨äºçº¦æŸå’Œæè¿° Set å’Œ Link çš„å±æ€§ï¼ŒåŒ…å«åç§°ã€ç±»å‹ã€çº¦æŸè§„åˆ™ã€åˆ†æç‰¹æ€§ç­‰ 20 å¤šç§é…ç½®é¡¹</li>
</ul>
<h3 data-id="heading-3">1.2 UModel æŸ¥è¯¢æ˜¯ä»€ä¹ˆ</h3>
<p>UModel æŸ¥è¯¢æ˜¯ EntityStore ä¸­ç”¨äºæŸ¥è¯¢çŸ¥è¯†å›¾è°±å…ƒæ•°æ®çš„ä¸“ç”¨æŸ¥è¯¢æ¥å£ï¼Œé€šè¿‡Â <code>.umodelÂ </code>æŸ¥è¯¢è¯­æ³•ï¼Œå¯ä»¥æ¢ç´¢ EntitySet å®šä¹‰ã€EntitySetLink å…³ç³»ä»¥åŠå®Œæ•´çš„çŸ¥è¯†å›¾è°±ç»“æ„ï¼Œä¸ºæ•°æ®å»ºæ¨¡åˆ†æå’Œ Schema ç®¡ç†æä¾›å¼ºå¤§æ”¯æŒã€‚</p>
<h4 data-id="heading-4">æŸ¥è¯¢ç›®æ ‡åŒºåˆ†</h4>
<p>UModel æŸ¥è¯¢ä¸å…¶ä»–æŸ¥è¯¢ç±»å‹çš„åŒºåˆ«ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e81bee11eb148fab48965bc2638cd23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765787160&amp;x-signature=9MZwRdZeKJoIEH7d9KARJOznCps%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>UModel æŸ¥è¯¢ä¸“æ³¨äºå…ƒæ•°æ®å±‚é¢çš„æ¢ç´¢ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£æ•°æ®æ¨¡å‹çš„ç»“æ„å’Œå®šä¹‰ï¼Œè€Œéå…·ä½“çš„è¿è¡Œæ—¶æ•°æ®ã€‚</p>
<h2 data-id="heading-5">UModel æŸ¥è¯¢</h2>
<h3 data-id="heading-6">2.1 æ•°æ®æ¨¡å‹</h3>
<h4 data-id="heading-7">æ•°æ®ç»“æ„</h4>
<p>UModel æŸ¥è¯¢è¿”å›çš„æ•°æ®å…·æœ‰å›ºå®šçš„äº”å­—æ®µç»“æ„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccdea893da9a4cbc9d915fc03aa74c3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765787160&amp;x-signature=%2BGPa%2BHguPhM4HkYA1X0SBII8s%2B4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ³¨æ„ï¼š<code>metadataã€schema</code>ã€<code>spec</code>Â æ˜¯ JSON æ ¼å¼çš„ stringï¼Œéœ€è¦ä½¿ç”¨Â <code>json_extract_scalar</code> å‡½æ•°è¿›è¡Œæå–ã€‚</p>
<h4 data-id="heading-8">æ•°æ®ç¤ºä¾‹</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad1bf5346b1a431385b4a2cadd0b6d74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765787160&amp;x-signature=w0ZDAJGkyyyN%2FyQuSIJEY4xH%2B1g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-9">2.2 æŸ¥è¯¢è¯­æ³•</h3>
<h4 data-id="heading-10">åŸºç¡€æŸ¥è¯¢è¯­æ³•</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŸºç¡€æŸ¥è¯¢æ ¼å¼</span>
.umodelÂ <span class="hljs-operator">|</span>Â [SPLæ“ä½œ...]
<span class="hljs-comment">-- å¸¦é™åˆ¶æ¡ä»¶çš„æŸ¥è¯¢</span>
.umodelÂ <span class="hljs-operator">|</span>Â <span class="hljs-keyword">where</span>Â <span class="hljs-operator">&lt;</span><span class="hljs-keyword">condition</span><span class="hljs-operator">&gt;</span>Â <span class="hljs-operator">|</span>Â limitÂ <span class="hljs-operator">&lt;</span>count<span class="hljs-operator">&gt;</span>
</code></pre>
<h4 data-id="heading-11">æ ¸å¿ƒæŸ¥è¯¢æ¨¡å¼</h4>
<h5 data-id="heading-12">1. List åœºæ™¯ - åˆ—è¡¨æŸ¥è¯¢</h5>
<p>æŸ¥è¯¢æ‰€æœ‰ UModel æ•°æ®ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">-- åˆ—å‡ºæ‰€æœ‰umodelæ•°æ®ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</span>
.umodel
<span class="hljs-deletion">-- å¸¦åˆ†é¡µçš„æŸ¥è¯¢</span>
.umodel | limit 0, 10
</code></pre>
<p>æŒ‰ç±»å‹è¿‡æ»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">-- æŸ¥è¯¢æ‰€æœ‰EntitySetå®šä¹‰
.umodel |Â <span class="hljs-built_in">where</span>Â kind =Â <span class="hljs-string">'entity_set'</span>Â |Â <span class="hljs-built_in">limit</span>Â 0, 10
-- æŸ¥è¯¢æ‰€æœ‰EntitySetLinkå®šä¹‰
.umodel |Â <span class="hljs-built_in">where</span>Â kind =Â <span class="hljs-string">'entity_set_link'</span>Â |Â <span class="hljs-built_in">limit</span>Â 0, 10
-- æŸ¥è¯¢æ‰€æœ‰è¾¹ç±»å‹ï¼ˆå…³ç³»å®šä¹‰ï¼‰
.umodel |Â <span class="hljs-built_in">where</span>Â __type__ =Â <span class="hljs-string">'link'</span>Â |Â <span class="hljs-built_in">limit</span>Â 0, 10
-- æŸ¥è¯¢æ‰€æœ‰èŠ‚ç‚¹ç±»å‹ï¼ˆå®ä½“å®šä¹‰ï¼‰
.umodel |Â <span class="hljs-built_in">where</span>Â __type__ =Â <span class="hljs-string">'node'</span>Â |Â <span class="hljs-built_in">limit</span>Â 0, 10
</code></pre>
<p>æŒ‰å±æ€§è¿‡æ»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">-- æŸ¥è¯¢ç‰¹å®šåç§°çš„å®ä½“å®šä¹‰
.umodel |Â <span class="hljs-built_in">where</span>Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>) =Â <span class="hljs-string">'acs.ecs.instance'</span>Â |Â <span class="hljs-built_in">limit</span>Â 0, 10
-- æŸ¥è¯¢ç‰¹å®šåŸŸçš„æ‰€æœ‰å®šä¹‰
.umodel |Â <span class="hljs-built_in">where</span>Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>) =Â <span class="hljs-string">'apm'</span>Â |Â <span class="hljs-built_in">limit</span>Â 0, 10
-- æŸ¥è¯¢å¤šä¸ªåŸŸçš„å®šä¹‰
.umodel |Â <span class="hljs-built_in">where</span>Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>)Â <span class="hljs-keyword">in</span>Â (<span class="hljs-string">'acs'</span>,Â <span class="hljs-string">'apm'</span>,Â <span class="hljs-string">'k8s'</span>) |Â <span class="hljs-built_in">limit</span>Â 0, 10
</code></pre>
<h5 data-id="heading-13">2. å›¾è®¡ç®—åœºæ™¯ - å…³ç³»åˆ†æ</h5>
<p>UModel æ”¯æŒåŸºäºå…ƒæ•°æ®çš„å›¾è®¡ç®—ï¼Œç”¨äºåˆ†æ EntitySet ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p>åŸºç¡€å›¾æŸ¥è¯¢è¯­æ³•ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">.umodel | graph-<span class="hljs-built_in">match</span>Â &lt;<span class="hljs-built_in">path</span>&gt;Â projectÂ &lt;<span class="hljs-built_in">output</span>&gt;
</code></pre>
<p>åŸºç¡€æ¦‚å¿µï¼š</p>
<p>åœ¨å›¾æŸ¥è¯¢ä¸­ï¼Œæœ‰ä¸¤ä¸ªå…³é”®æ€§çš„å›¾æ¦‚å¿µï¼š</p>
<p>èŠ‚ç‚¹ç±»å‹ï¼Œå³Â labelÂ ä¿¡æ¯ï¼Œåœ¨ UModel çš„å…ƒæ•°æ®å›¾æŸ¥è¯¢ä¸­ï¼Œä¸ºÂ <code>&lt;domain&gt;@&lt;kind&gt;</code>ï¼Œä¾‹å¦‚Â <code>apm@entity_set</code>
èŠ‚ç‚¹ IDï¼Œå³Â <code>__entity_id__</code>Â ä¿¡æ¯ï¼Œåœ¨ UModel çš„å…ƒæ•°æ®å›¾æŸ¥è¯¢ä¸­ï¼Œä¸ºÂ <code>kind::domain::name</code>ï¼Œä¾‹å¦‚Â <code>entity_set::apm::apm.service</code></p>
<p>å›¾æŸ¥è¯¢è·¯å¾„ï¼ˆPATHï¼‰ä½¿ç”¨ ASCII å­—ç¬¦æè¿°å…³ç³»æ–¹å‘ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/992db3f6a27d4e6bb3c9b1b89492762f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765787160&amp;x-signature=T09BDPNmUu3CZtxfjeZDsaTa4cE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æŸ¥è¯¢ EntitySet çš„é‚»å±…å…³ç³»ï¼š</p>
<pre><code class="hljs language-css" lang="css">-- æŸ¥è¯¢ç‰¹å®šEntitySetçš„æ‰€æœ‰å…³è”å…³ç³»
<span class="hljs-selector-class">.umodel</span>Â 
| graph-match (s:<span class="hljs-string">"acs@entity_set"</span>Â {__entity_id__:Â <span class="hljs-string">'entity_set::acs::acs.ecs.instance'</span>})
Â  Â  Â  Â  Â  Â  Â  -<span class="hljs-selector-attr">[e]</span>-(d)Â 
Â  project s, e, d |Â limitÂ <span class="hljs-number">0</span>, <span class="hljs-number">10</span>
</code></pre>
<p>æ–¹å‘æ€§å…³ç³»æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- æŸ¥è¯¢æŒ‡å‘æŸä¸ªEntitySetçš„å…³ç³»</span>
.umodelÂ 
| graph-<span class="hljs-built_in">match</span> (s:<span class="hljs-string">"acs@entity_set"</span>Â {__entity_id__:Â <span class="hljs-string">'entity_set::acs::acs.ecs.instance'</span>})
Â  Â  Â  Â  Â  Â  Â  &lt;<span class="hljs-comment">--(d)Â </span>
Â  project s, d |Â limitÂ <span class="hljs-number">0</span>, <span class="hljs-number">10</span>
<span class="hljs-comment">-- æŸ¥è¯¢ä»æŸä¸ªEntitySetå‡ºå‘çš„å…³ç³» Â </span>
.umodelÂ 
| graph-<span class="hljs-built_in">match</span> (s:<span class="hljs-string">"acs@entity_set"</span>Â {__entity_id__:Â <span class="hljs-string">'entity_set::acs::acs.ack.cluster'</span>})
Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">--&gt;(d)Â </span>
Â  project s, d |Â limitÂ <span class="hljs-number">0</span>, <span class="hljs-number">10</span>
</code></pre>
<h3 data-id="heading-14">2.3 é«˜çº§æŸ¥è¯¢åŠŸèƒ½</h3>
<h4 data-id="heading-15">JSON è·¯å¾„æå–</h4>
<p>ç”±äº UModel æ•°æ®é‡‡ç”¨ JSON ç»“æ„å­˜å‚¨ï¼Œéœ€è¦ä½¿ç”¨ JSON å‡½æ•°è¿›è¡Œå­—æ®µæå–ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- æå–åŸºç¡€ä¿¡æ¯
.umodelÂ 
| extendÂ 
Â  Â  <span class="hljs-attr">entity_name</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  <span class="hljs-attr">entity_domain</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>),
Â  Â  <span class="hljs-attr">entity_description</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.description.zh_cn'</span>)
| project entity_name, entity_domain, entity_description |Â limitÂ 0, 100
</code></pre>
<h4 data-id="heading-16">å¤æ‚æ¡ä»¶ç­›é€‰</h4>
<pre><code class="hljs language-java" lang="java">-- å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢
.umodelÂ 
|Â <span class="hljs-type">where</span>Â <span class="hljs-variable">kind</span>Â <span class="hljs-operator">=</span>Â <span class="hljs-string">'entity_set'</span>
Â  andÂ <span class="hljs-title function_">json_extract_scalar</span><span class="hljs-params">(metadata,Â <span class="hljs-string">'$.domain'</span>)</span>Â in (<span class="hljs-string">'apm'</span>,Â <span class="hljs-string">'k8s'</span>)
Â  andÂ <span class="hljs-title function_">json_array_length</span><span class="hljs-params">(json_extract(spec,Â <span class="hljs-string">'$.fields'</span>)</span>) &gt;Â <span class="hljs-number">5</span>
|Â <span class="hljs-type">extend</span>Â 
Â  Â Â <span class="hljs-variable">entity_name</span>Â <span class="hljs-operator">=</span>Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  field_count = json_array_length(json_extract(spec,Â <span class="hljs-string">'$.fields'</span>))
| sort field_count desc
| limitÂ <span class="hljs-number">20</span>
</code></pre>
<h4 data-id="heading-17">èšåˆåˆ†æ</h4>
<pre><code class="hljs language-ini" lang="ini">-- æŒ‰åŸŸç»Ÿè®¡EntitySetæ•°é‡
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span>Â =Â <span class="hljs-string">'entity_set'</span>
|Â extend <span class="hljs-attr">domain</span>Â =Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>)
|Â stats <span class="hljs-attr">entity_count</span>Â =Â count()Â byÂ domain
|Â sort entity_countÂ desc
</code></pre>
<h3 data-id="heading-18">2.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<h4 data-id="heading-19">ä½¿ç”¨ç²¾ç¡®è¿‡æ»¤</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¼˜åŒ–å‰ï¼šèŒƒå›´è¿‡å¤§</span>
.umodelÂ <span class="hljs-operator">|</span>Â <span class="hljs-keyword">where</span>Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>)Â <span class="hljs-keyword">like</span>Â <span class="hljs-string">'%service%'</span>
<span class="hljs-comment">-- ä¼˜åŒ–åï¼šç²¾ç¡®åŒ¹é…</span>
.umodelÂ <span class="hljs-operator">|</span>Â <span class="hljs-keyword">where</span>Â kindÂ <span class="hljs-operator">=</span>Â <span class="hljs-string">'entity_set'</span>Â 
Â Â <span class="hljs-keyword">and</span>Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>)Â <span class="hljs-operator">=</span>Â <span class="hljs-string">'apm'</span>
Â Â <span class="hljs-keyword">and</span>Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>)Â <span class="hljs-operator">=</span>Â <span class="hljs-string">'apm.service'</span>
</code></pre>
<h4 data-id="heading-20">è¿‡æ»¤å‰ç½®</h4>
<pre><code class="hljs language-ini" lang="ini">-- ä¼˜åŒ–å‰ï¼šåæœŸè¿‡æ»¤
.umodelÂ 
|Â extendÂ <span class="hljs-attr">name</span>Â =Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>)
|Â whereÂ <span class="hljs-attr">name</span>Â =Â <span class="hljs-string">'apm.service'</span>
-- ä¼˜åŒ–åï¼šè¿‡æ»¤å‰ç½®
.umodelÂ 
| whereÂ json_extract_scalar(metadata,Â '$.name')Â =Â 'apm.service'
|Â extendÂ <span class="hljs-attr">name</span>Â =Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>)
</code></pre>
<h4 data-id="heading-21">å›¾æŸ¥è¯¢ä¼˜åŒ–</h4>
<pre><code class="hljs language-scss" lang="scss">-- ä¼˜åŒ–å‰ï¼šå…¨å›¾æœç´¢
<span class="hljs-selector-class">.umodel</span> | graph-matchÂ (s)-<span class="hljs-selector-attr">[e]</span><span class="hljs-built_in">-</span>(d) project s, e, d
-- ä¼˜åŒ–åï¼šæŒ‡å®šèµ·å§‹ç‚¹
<span class="hljs-selector-class">.umodel</span>Â 
| graph-matchÂ (s:"apm@entity_set"Â {__entity_id__:Â 'entity_set::apm::apm.service'})
Â  Â  Â  Â  Â  Â  Â  -<span class="hljs-selector-attr">[e]</span><span class="hljs-built_in">-</span>(d)Â 
Â  project s, e, d
</code></pre>
<h2 data-id="heading-22">UModel æŸ¥è¯¢å…·ä½“åº”ç”¨åœºæ™¯</h2>
<p>UModel æŸ¥è¯¢åœ¨å®é™…åº”ç”¨ä¸­èƒ½å¤Ÿè§£å†³å¤šç§åœºæ™¯ä¸‹çš„é—®é¢˜ï¼Œä¸ºæ•°æ®å»ºæ¨¡ã€Schema ç®¡ç†å’ŒçŸ¥è¯†å›¾è°±åˆ†ææä¾›å¼ºå¤§æ”¯æŒã€‚</p>
<h3 data-id="heading-23">3.1 Schema æ¢ç´¢ä¸å‘ç°</h3>
<h4 data-id="heading-24">åœºæ™¯æè¿°</h4>
<p>åœ¨å¤§å‹å¯è§‚æµ‹æ€§ç³»ç»Ÿä¸­ï¼Œå¯èƒ½å­˜åœ¨æ•°ç™¾ä¸ª EntitySet å®šä¹‰ï¼Œåˆ†å¸ƒåœ¨ä¸åŒçš„åŸŸï¼ˆdomainï¼‰ä¸­ã€‚ç”¨æˆ·éœ€è¦å¿«é€Ÿäº†è§£ç³»ç»Ÿä¸­å®šä¹‰äº†å“ªäº›å®ä½“ç±»å‹ï¼Œä»¥åŠå®ƒä»¬çš„åŸºæœ¬ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-25">åº”ç”¨ç¤ºä¾‹</h4>
<p>æ¢ç´¢æ‰€æœ‰å®ä½“ç±»å‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- åˆ—å‡ºæ‰€æœ‰EntitySetåŠå…¶åŸºæœ¬ä¿¡æ¯
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span> =Â <span class="hljs-string">'entity_set'</span>
| extendÂ 
Â  Â  <span class="hljs-attr">entity_name</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  <span class="hljs-attr">entity_domain</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>),
Â  Â  <span class="hljs-attr">description</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.description.zh_cn'</span>)
| project entity_name, entity_domain, description
|Â sortÂ entity_domain, entity_name
|Â limitÂ 0, 100
</code></pre>
<p>æŒ‰åŸŸåˆ†ç±»æŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- æŸ¥çœ‹ç‰¹å®šåŸŸï¼ˆå¦‚APMï¼‰ä¸‹çš„æ‰€æœ‰å®ä½“å®šä¹‰
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span>Â =Â <span class="hljs-string">'entity_set'</span>Â 
Â  andÂ json_extract_scalar(metadata,Â '$.domain')Â =Â 'apm'
|Â extendÂ 
Â  Â Â <span class="hljs-attr">entity_name</span>Â =Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  <span class="hljs-attr">description</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.short_description.zh_cn'</span>)
| project entity_name, description
| limitÂ 0,Â 50
</code></pre>
<h3 data-id="heading-26">3.2 æ•°æ®å»ºæ¨¡åˆ†æ</h3>
<h4 data-id="heading-27">åœºæ™¯æè¿°</h4>
<p>åœ¨è¿›è¡Œæ•°æ®å»ºæ¨¡ä¼˜åŒ–æ—¶ï¼Œéœ€è¦åˆ†æç°æœ‰ EntitySet çš„å­—æ®µå¤æ‚åº¦ã€ä¸»é”®è®¾è®¡ã€ç´¢å¼•é…ç½®ç­‰ä¿¡æ¯ï¼Œä»¥ä¾¿è¯†åˆ«éœ€è¦ä¼˜åŒ–çš„æ¨¡å‹ã€‚</p>
<h4 data-id="heading-28">åº”ç”¨ç¤ºä¾‹</h4>
<p>åˆ†æå­—æ®µå¤æ‚åº¦ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- åˆ†æå„åŸŸä¸‹EntitySetçš„å­—æ®µæ•°é‡åˆ†å¸ƒ
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span>Â =Â <span class="hljs-string">'entity_set'</span>
|Â extendÂ 
Â  Â  <span class="hljs-attr">domain</span>Â =Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>),
Â  Â  <span class="hljs-attr">entity_name</span>Â =Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  <span class="hljs-attr">field_count</span>Â =Â json_array_length(json_extract(spec,Â <span class="hljs-string">'$.fields'</span>))
|Â statsÂ 
Â  Â  <span class="hljs-attr">avg_fields</span>Â =Â avg(field_count),
Â  Â  <span class="hljs-attr">max_fields</span>Â =Â max(field_count),
Â  Â  <span class="hljs-attr">min_fields</span>Â =Â min(field_count),
Â  Â  <span class="hljs-attr">entity_count</span>Â =Â count()
Â Â byÂ domain
|Â sort entity_countÂ desc
</code></pre>
<p>æŸ¥æ‰¾å¤æ‚å®ä½“ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- æ‰¾å‡ºå­—æ®µæ•°é‡æœ€å¤šçš„EntitySetï¼ˆå¯èƒ½éœ€è¦ä¼˜åŒ–ï¼‰
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span> =Â <span class="hljs-string">'entity_set'</span>
| extendÂ 
Â  Â  <span class="hljs-attr">entity_name</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  <span class="hljs-attr">domain</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>),
Â  Â  <span class="hljs-attr">field_count</span> = json_array_length(json_extract(spec,Â <span class="hljs-string">'$.fields'</span>))
|Â sortÂ field_count desc
|Â limitÂ 20
</code></pre>
<h3 data-id="heading-29">3.3 å…³ç³»å›¾è°±åˆ†æ</h3>
<h4 data-id="heading-30">åœºæ™¯æè¿°</h4>
<p>ç†è§£ EntitySet ä¹‹é—´çš„å…³ç³»å¯¹äºæ„å»ºå®Œæ•´çš„çŸ¥è¯†å›¾è°±è‡³å…³é‡è¦ã€‚é€šè¿‡å›¾æŸ¥è¯¢å¯ä»¥åˆ†æå®ä½“é—´çš„å…³è”å…³ç³»ï¼Œå‘ç°æ•°æ®æ¨¡å‹ä¸­çš„ä¾èµ–å’Œè¿æ¥ã€‚</p>
<h4 data-id="heading-31">åº”ç”¨ç¤ºä¾‹</h4>
<p>æŸ¥è¯¢å®ä½“çš„æ‰€æœ‰å…³è”å…³ç³»ï¼š</p>
<pre><code class="hljs language-css" lang="css">-- æŸ¥è¯¢æŸä¸ªEntitySetï¼ˆå¦‚apm<span class="hljs-selector-class">.service</span>ï¼‰çš„æ‰€æœ‰å…³è”å…³ç³»
<span class="hljs-selector-class">.umodel</span>Â 
| graph-match (s:<span class="hljs-string">"apm@entity_set"</span>Â {__entity_id__:Â <span class="hljs-string">'entity_set::apm::apm.service'</span>})
Â  Â  Â  Â  Â  Â  Â  -<span class="hljs-selector-attr">[e]</span>-(d)Â 
Â  project s, e, d
|Â limitÂ <span class="hljs-number">0</span>, <span class="hljs-number">50</span>
</code></pre>
<p>åˆ†æå…³ç³»ç±»å‹åˆ†å¸ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- ç»Ÿè®¡ä¸åŒå…³ç³»ç±»å‹çš„æ•°é‡
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span>Â =Â <span class="hljs-string">'entity_set_link'</span>
|Â extendÂ 
Â  Â  <span class="hljs-attr">link_name</span>Â =Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  <span class="hljs-attr">link_type</span>Â =Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.link_type'</span>)
|Â stats <span class="hljs-attr">limk_count</span>Â =Â count()Â byÂ link_type
|Â sort limk_countÂ desc
</code></pre>
<p>æŸ¥æ‰¾ç‰¹å®šå…³ç³»ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- æŸ¥æ‰¾æ‰€æœ‰"runs_on"ç±»å‹çš„å…³ç³»å®šä¹‰
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span> =Â <span class="hljs-string">'entity_set_link'</span>
Â  and json_extract_scalar(metadata,Â '$.link_type') =Â 'runs_on'
| extendÂ 
Â  Â  <span class="hljs-attr">link_name</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â Â <span class="hljs-attr">source</span>Â = json_extract_scalar(metadata,Â <span class="hljs-string">'$.source'</span>),
Â  Â  <span class="hljs-attr">target</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.target'</span>)
| project link_name,Â source, target
</code></pre>
<h3 data-id="heading-32">3.4 å…ƒæ•°æ®è´¨é‡æ£€æŸ¥</h3>
<h4 data-id="heading-33">åœºæ™¯æè¿°</h4>
<p>ç¡®ä¿ UModel å…ƒæ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œæ£€æŸ¥ç¼ºå¤±çš„æè¿°ã€æœªå®šä¹‰çš„å­—æ®µç­‰é—®é¢˜ã€‚</p>
<h4 data-id="heading-34">åº”ç”¨ç¤ºä¾‹</h4>
<p>æ£€æŸ¥ç¼ºå¤±æè¿°çš„ EntitySetï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">-- æ‰¾å‡ºæ²¡æœ‰ä¸­æ–‡æè¿°çš„EntitySet
.umodelÂ 
|Â <span class="hljs-keyword">where</span>Â kind =Â <span class="hljs-string">'entity_set'</span>
Â Â <span class="hljs-keyword">and</span>Â (json_extract_scalar(metadata,Â <span class="hljs-string">'$.description.zh_cn'</span>) =Â <span class="hljs-string">''</span>Â 
Â  Â  Â  Â <span class="hljs-function"><span class="hljs-keyword">or</span>Â <span class="hljs-title">json_extract_scalar</span>(<span class="hljs-params">metadata,Â <span class="hljs-string">'$.description.zh_cn'</span></span>)Â <span class="hljs-keyword">is</span>Â <span class="hljs-literal">null</span>)
| extendÂ 
Â  Â  entity_name</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  domain = json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>)
| project entity_name, domain
</code></pre>
<p>éªŒè¯å­—æ®µå®šä¹‰å®Œæ•´æ€§ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">-- æ£€æŸ¥æ²¡æœ‰å®šä¹‰å­—æ®µçš„EntitySet
.umodelÂ 
|Â <span class="hljs-keyword">where</span>Â kind =Â <span class="hljs-string">'entity_set'</span>
Â Â <span class="hljs-keyword">and</span>Â (json_extract(spec,Â <span class="hljs-string">'$.fields'</span>)Â <span class="hljs-function"><span class="hljs-keyword">is</span>Â <span class="hljs-literal">null</span>Â 
Â  Â  Â  Â <span class="hljs-keyword">or</span>Â <span class="hljs-title">json_array_length</span>(<span class="hljs-params">json_extract(spec,Â <span class="hljs-string">'$.fields'</span></span>))</span> =Â <span class="hljs-number">0</span>)
| extendÂ 
Â  Â  entity_name = json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  domain = json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>)
| project entity_name, domain
</code></pre>
<h3 data-id="heading-35">3.5 è·¨åŸŸå…³è”åˆ†æ</h3>
<h4 data-id="heading-36">åœºæ™¯æè¿°</h4>
<p>åœ¨å¤æ‚çš„å¯è§‚æµ‹æ€§ç³»ç»Ÿä¸­ï¼Œä¸åŒåŸŸï¼ˆå¦‚ APMã€K8sã€äº‘èµ„æºï¼‰çš„å®ä½“å¯èƒ½å­˜åœ¨å…³è”å…³ç³»ã€‚é€šè¿‡ UModel æŸ¥è¯¢å¯ä»¥åˆ†æè¿™äº›è·¨åŸŸçš„å…³è”æ¨¡å¼ã€‚</p>
<h4 data-id="heading-37">åº”ç”¨ç¤ºä¾‹</h4>
<p>æŸ¥æ‰¾è·¨åŸŸå…³ç³»ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- æŸ¥æ‰¾è¿æ¥ä¸åŒåŸŸçš„EntitySetLink
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span> =Â <span class="hljs-string">'entity_set_link'</span>
| extendÂ 
Â  Â  <span class="hljs-attr">link_name</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  <span class="hljs-attr">source_domain</span> = json_extract_scalar(spec,Â <span class="hljs-string">'$.src.domain'</span>),
Â  Â  <span class="hljs-attr">target_domain</span> = json_extract_scalar(spec,Â <span class="hljs-string">'$.dest.domain'</span>)
|Â whereÂ source_domain != target_domain
| project link_name, source_domain, target_domain
|Â limitÂ 0, 50
</code></pre>
<p>åˆ†æåŸŸé—´è¿æ¥åº¦ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- ç»Ÿè®¡å„åŸŸä¹‹é—´çš„è¿æ¥å…³ç³»æ•°é‡
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span>Â =Â <span class="hljs-string">'entity_set_link'</span>
|Â extendÂ 
Â  Â  <span class="hljs-attr">source_domain</span>Â =Â json_extract_scalar(spec,Â <span class="hljs-string">'$.src.domain'</span>),
Â  Â  <span class="hljs-attr">target_domain</span>Â =Â json_extract_scalar(spec,Â <span class="hljs-string">'$.dest.domain'</span>)
|Â stats <span class="hljs-attr">count</span>Â =Â count()Â byÂ source_domain, target_domain
|Â sort countÂ desc
</code></pre>
<h3 data-id="heading-38">3.6 ç‰ˆæœ¬ä¸æ¼”è¿›åˆ†æ</h3>
<h4 data-id="heading-39">åœºæ™¯æè¿°</h4>
<p>UModel Schema ä¼šéšç€ä¸šåŠ¡å‘å±•è€Œæ¼”è¿›ï¼Œéœ€è¦è·Ÿè¸ª Schema çš„ç‰ˆæœ¬å˜åŒ–å’Œæ¼”è¿›å†å²ã€‚</p>
<h4 data-id="heading-40">åº”ç”¨ç¤ºä¾‹</h4>
<p>æŸ¥çœ‹ Schema ç‰ˆæœ¬ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- æŸ¥çœ‹æ‰€æœ‰EntitySetçš„Schemaç‰ˆæœ¬
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span> =Â <span class="hljs-string">'entity_set'</span>
| extendÂ 
Â  Â  <span class="hljs-attr">entity_name</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  <span class="hljs-attr">schema_version</span> = json_extract_scalar(schema,Â <span class="hljs-string">'$.version'</span>),
Â  Â  <span class="hljs-attr">schema_url</span> = json_extract_scalar(schema,Â <span class="hljs-string">'$.url'</span>)
| project entity_name, schema_version, schema_url
|Â limitÂ 0, 100
</code></pre>
<h3 data-id="heading-41">3.7 å¿«é€Ÿå®šä½ä¸æ£€ç´¢</h3>
<h4 data-id="heading-42">åœºæ™¯æè¿°</h4>
<p>åœ¨å¤§é‡å…ƒæ•°æ®ä¸­å¿«é€Ÿæ‰¾åˆ°ç‰¹å®šçš„ EntitySet æˆ–å…³ç³»å®šä¹‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œç²¾ç¡®æŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-43">åº”ç”¨ç¤ºä¾‹</h4>
<p>æŒ‰åç§°æ¨¡ç³Šæœç´¢ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- æœç´¢åŒ…å«"service"çš„EntitySet
.umodelÂ 
|Â whereÂ <span class="hljs-attr">kind</span>Â =Â <span class="hljs-string">'entity_set'</span>
Â  andÂ json_extract_scalar(metadata,Â '$.name')Â likeÂ '%service%'
|Â extendÂ 
Â  Â Â <span class="hljs-attr">entity_name</span>Â =Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>),
Â  Â  <span class="hljs-attr">domain</span> = json_extract_scalar(metadata,Â <span class="hljs-string">'$.domain'</span>)
| project entity_name, domain
| limitÂ 0,Â 20
</code></pre>
<p>ç²¾ç¡®æŸ¥æ‰¾ç‰¹å®šå®ä½“ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">-- ç²¾ç¡®æŸ¥æ‰¾ç‰¹å®šEntitySetçš„å®Œæ•´å®šä¹‰
.umodelÂ 
|Â <span class="hljs-built_in">where</span>Â json_extract_scalar(metadata,Â <span class="hljs-string">'$.name'</span>) =Â <span class="hljs-string">'apm.service'</span>
|Â <span class="hljs-built_in">limit</span>Â 1
</code></pre>
<h2 data-id="heading-44">æ€»ç»“</h2>
<p>UModel æŸ¥è¯¢ä½œä¸º EntityStore ä¸­ä¸“é—¨ç”¨äºæŸ¥è¯¢çŸ¥è¯†å›¾è°±å…ƒæ•°æ®çš„æ¥å£ï¼Œä¸ºå¯è§‚æµ‹æ€§æ•°æ®å»ºæ¨¡æä¾›äº†å¼ºå¤§çš„æ”¯æŒèƒ½åŠ›ã€‚é€šè¿‡ UModel æŸ¥è¯¢å¯ä»¥ï¼š</p>
<ol>
<li>æ¢ç´¢ Schema ç»“æ„ï¼šå¿«é€Ÿäº†è§£ç³»ç»Ÿä¸­å®šä¹‰çš„æ‰€æœ‰å®ä½“ç±»å‹å’Œå…³ç³»ç±»å‹</li>
<li>åˆ†ææ•°æ®æ¨¡å‹ï¼šæ·±å…¥åˆ†æ EntitySet çš„å­—æ®µè®¾è®¡ã€ä¸»é”®é…ç½®ã€å¤æ‚åº¦ç­‰</li>
<li>æ„å»ºå…³ç³»å›¾è°±ï¼šé€šè¿‡å›¾æŸ¥è¯¢åˆ†æå®ä½“é—´çš„å…³è”å…³ç³»ï¼Œç†è§£çŸ¥è¯†å›¾è°±çš„æ‹“æ‰‘ç»“æ„</li>
<li>è´¨é‡æ£€æŸ¥ï¼šéªŒè¯å…ƒæ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§</li>
<li>è·¨åŸŸåˆ†æï¼šåˆ†æä¸åŒåŸŸä¹‹é—´çš„å…³è”æ¨¡å¼</li>
<li>å¿«é€Ÿæ£€ç´¢ï¼šåœ¨å¤§é‡å…ƒæ•°æ®ä¸­å¿«é€Ÿå®šä½ç›®æ ‡å®šä¹‰</li>
</ol>
<p>è¿™äº›èƒ½åŠ›ä½¿å¾— UModel æŸ¥è¯¢æˆä¸ºæ•°æ®å»ºæ¨¡åˆ†æã€Schema ç®¡ç†å’ŒçŸ¥è¯†å›¾è°±æ¢ç´¢çš„ä¸å¯æˆ–ç¼ºçš„å·¥å…·ï¼Œä¸ºæ„å»ºå’Œç»´æŠ¤é«˜è´¨é‡çš„å¯è§‚æµ‹æ€§æ•°æ®æ¨¡å‹æä¾›äº†åšå®çš„åŸºç¡€ã€‚</p>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1AWSxBqEtQ%2F" target="_blank" title="https://www.bilibili.com/video/BV1AWSxBqEtQ/" ref="nofollow noopener noreferrer">æ­¤å¤„</a>æŸ¥çœ‹è§†é¢‘æ¼”ç¤ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æå®šå¤šæ¨¡æ€å¾®è°ƒåªéœ€ä¸€æ¯å’–å•¡çš„æ—¶é—´ï¼ŸFC DevPod + Llama-Factory æé€Ÿå®æˆ˜]]></title>    <link>https://juejin.cn/post/7581678301215817728</link>    <guid>https://juejin.cn/post/7581678301215817728</guid>    <pubDate>2025-12-09T09:24:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581678301215817728" data-draft-id="7581664445240950799" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æå®šå¤šæ¨¡æ€å¾®è°ƒåªéœ€ä¸€æ¯å’–å•¡çš„æ—¶é—´ï¼ŸFC DevPod + Llama-Factory æé€Ÿå®æˆ˜"/> <meta itemprop="keywords" content="äº‘è®¡ç®—,äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-12-09T09:24:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Serverlessç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/1794004139382301"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æå®šå¤šæ¨¡æ€å¾®è°ƒåªéœ€ä¸€æ¯å’–å•¡çš„æ—¶é—´ï¼ŸFC DevPod + Llama-Factory æé€Ÿå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1794004139382301/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Serverlessç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T09:24:47.000Z" title="Tue Dec 09 2025 09:24:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºä¸€ä¸ª AI å¼€å‘è€…ï¼Œä½ ä¸€å®šç»å†è¿‡è¿™æ ·çš„ç»æœ›æ—¶åˆ»ï¼š å…´è‡´å‹ƒå‹ƒåœ°ä¸‹è½½äº†æœ€æ–°çš„ Qwen2-VL æƒé‡ï¼Œå‡†å¤‡ç”¨è‡ªå·±çš„å‚ç›´é¢†åŸŸæ•°æ®è·‘ä¸€æ¬¡ SFTï¼ˆç›‘ç£å¾®è°ƒï¼‰ã€‚ç„¶è€Œï¼Œç°å®å´æ˜¯æ®‹é…·çš„â€”â€”</p>
<ul>
<li><code>RuntimeError: CUDA out of memory</code> â€”â€” æ˜¾å­˜ä¸å¤Ÿï¼Œæ¨¡å‹åŠ è½½å¤±è´¥ã€‚</li>
<li><code>Driver/Library version mismatch</code> â€”â€” é©±åŠ¨ç‰ˆæœ¬ä¸å¯¹ï¼Œç¯å¢ƒé…ç½®é™·å…¥æ­»å¾ªç¯ã€‚</li>
<li>çœ‹ç€äº‘å‚å•† GPU å®ä¾‹é«˜æ˜‚çš„åŒ…æœˆè´¦å•ï¼ŒçŠ¹è±«ç€è¦ä¸è¦ä¸ºäº†è¿™å‡ å°æ—¶çš„å®éªŒæŒ‰ä¸‹â€œè´­ä¹°â€é”®ã€‚</li>
</ul>
<p>æŠ€æœ¯çš„è¿›æ­¥æœ¬è¯¥æ˜¯ä¸ºäº†é‡Šæ”¾åˆ›é€ åŠ›ï¼Œè€Œä¸æ˜¯å¢åŠ é—¨æ§›ã€‚åœ¨ Serverless æ—¶ä»£ï¼Œç®—åŠ›åº”è¯¥åƒæ°´ç”µä¸€æ ·ï¼Œæ‰­å¼€æ°´é¾™å¤´å°±æœ‰ï¼Œå…³ä¸Šå°±åœï¼ŒæŒ‰éœ€ä»˜è´¹ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ‰“ç ´â€œå¾®è°ƒ=æ˜‚è´µ+éº»çƒ¦â€çš„åˆ»æ¿å°è±¡ã€‚ä¸éœ€è¦å›¤ç§¯æ˜¾å¡ï¼Œä¹Ÿä¸éœ€è¦ç²¾é€šè¿ç»´ï¼Œæˆ‘ä»¬å°†å¸¦ä½ ä½“éªŒä¸€å¥—â€œ<strong>DevPod + Llama-Factoryçš„æé€Ÿç»„åˆæ‹³</strong>â€ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€æ–¹æ¡ˆæ­ç§˜ï¼šFC + Llama-Factory çš„â€œé»„é‡‘æ­æ¡£â€</h3>
<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚åœ¨å¼€å§‹å®æˆ˜ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ‹†è§£ä¸€ä¸‹è¿™å¥—â€œå¼€ç®±å³ç”¨â€çš„å¾®è°ƒæµæ°´çº¿èƒŒåçš„ä¸‰ä½ä¸»è§’ã€‚å½“å®ƒä»¬åœ¨ Serverless æ¶æ„ä¸‹ç›¸é‡ï¼Œå¤æ‚çš„æ¨¡å‹è®­ç»ƒå°±å˜æˆäº†ä¸€åœºæµç•…çš„æ­ç§¯æœ¨æ¸¸æˆã€‚</p>
<h4 data-id="heading-1">1. ä¸»è§’ï¼šQwen VL æ¨¡å‹ â€”â€” å¤šæ¨¡æ€é¢†åŸŸçš„â€œå…­è¾¹å½¢æˆ˜å£«â€</h4>
<ul>
<li><strong>çœ‹å¾—æ›´æ¸…</strong>ï¼š å®ƒä¸ä»…èƒ½è¯†åˆ«å›¾ç‰‡ä¸­çš„ç‰©ä½“ï¼Œè¿˜èƒ½ç²¾å‡†æå–å¤æ‚çš„å›¾è¡¨æ•°æ®ã€é˜…è¯»å¯†é›†çš„æ–‡æ¡£æ–‡å­—ï¼ˆOCRï¼‰ï¼Œç”šè‡³ç†è§£é•¿è§†é¢‘ä¸­çš„æ—¶åºé€»è¾‘ã€‚</li>
<li><strong>æ‡‚ä½ æ‰€æƒ³</strong>ï¼š åœ¨æŒ‡ä»¤éµå¾ªï¼ˆInstruction Followingï¼‰èƒ½åŠ›ä¸Šå¤§å¹…å¢å¼ºï¼Œè¿™æ„å‘³ç€é€šè¿‡å¾®è°ƒï¼Œä½ å¯ä»¥æ›´å®¹æ˜“åœ°è®©å®ƒå­¦ä¼šä½ ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹çš„â€œè¡Œè¯â€å’Œè§„åˆ™ã€‚</li>
<li><strong>ä»·å€¼ç‚¹</strong>ï¼š é€‰æ‹© Qwen2-VLï¼Œæ„å‘³ç€ä½ çš„èµ·ç‚¹å·²ç»æ˜¯è¡Œä¸šé¡¶å°–æ°´å¹³ï¼Œå¾®è°ƒåªæ˜¯ä¸ºäº†è®©å®ƒæ›´æ‡‚ä½ çš„ç§æœ‰æ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-2">2. å·¥å…·ï¼šLlama-Factory â€”â€” å¾®è°ƒç•Œçš„â€œç‘å£«å†›åˆ€â€</h4>
<p>å¯¹äºè®¸å¤šå¼€å‘è€…æ¥è¯´ï¼Œå¾®è°ƒæœ€å¤§çš„é—¨æ§›ä¸æ˜¯ä¸æ‡‚åŸç†ï¼Œè€Œæ˜¯ä¸æƒ³å†™é‚£å‡ åƒè¡Œçš„ PyTorch è®­ç»ƒä»£ç ã€‚Llama-Factory çš„å‡ºç°ï¼Œå®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li><strong>é›¶ä»£ç é—¨æ§›</strong>ï¼š å®ƒæä¾›äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„ WebUI ç•Œé¢ã€‚åŠ è½½æ¨¡å‹ã€é…ç½®å‚æ•°ã€ç›‘æ§ Loss æ›²çº¿ã€è¯„ä¼°æ•ˆæœï¼Œæ‰€æœ‰æ“ä½œéƒ½å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡ç‚¹å‡»å®Œæˆã€‚</li>
<li><strong>å…¨æµç¨‹è¦†ç›–</strong>ï¼š ä»é¢„è®­ç»ƒï¼ˆPTï¼‰ã€æŒ‡ä»¤ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰åˆ°å¥–åŠ±æ¨¡å‹è®­ç»ƒï¼ˆRMï¼‰å’Œ PPO/DPOï¼Œå®ƒé›†æˆäº†ä¸šç•Œæœ€ä¸»æµçš„å¾®è°ƒæ–¹æ³•ï¼ˆå¦‚ LoRAã€QLoRAï¼‰ã€‚</li>
<li><strong>ä»·å€¼ç‚¹</strong>ï¼š å®ƒå±è”½äº†åº•å±‚ DeepSpeedã€Accelerate ç­‰æ¡†æ¶çš„å¤æ‚é…ç½®ï¼Œè®©ä½ èƒ½æŠŠç²¾åŠ›é›†ä¸­åœ¨â€œæ•°æ®è´¨é‡â€å’Œâ€œæ¨¡å‹æ•ˆæœâ€ä¸Šã€‚</li>
</ul>
<h4 data-id="heading-3">3. èˆå°ï¼šé˜¿é‡Œäº‘å‡½æ•°è®¡ç®— FC â€”â€” ä¸º AI è€Œç”Ÿçš„ Serverless ç®—åŠ›</h4>
<p>æœ‰äº†å¥½æ¨¡å‹å’Œå¥½å·¥å…·ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªèƒ½è·‘å¾—åŠ¨å®ƒä»¬çš„â€œèˆå°â€ã€‚ä¼ ç»Ÿçš„ GPU æœåŠ¡å™¨ç§Ÿèµæ¨¡å¼å¾€å¾€é¢ä¸´â€œéƒ¨ç½²éš¾ã€é—²ç½®è´µâ€çš„å°´å°¬ï¼Œè€Œ <strong>å‡½æ•°è®¡ç®— FC</strong> ç»™å‡ºäº†å…¨æ–°çš„è§£æ³•ï¼š</p>
<ul>
<li><strong>æè‡´å¼¹æ€§ï¼ŒæŒ‰é‡ä»˜è´¹</strong>ï¼š è¿™æ˜¯ Serverless çš„çµé­‚ã€‚ä½ åªéœ€è¦ä¸ºè®­ç»ƒçš„é‚£å‡ ä¸ªå°æ—¶ä»˜è´¹ã€‚è®­ç»ƒç»“æŸï¼Œå®ä¾‹å¯è½»æ¾é‡Šæ”¾ï¼Œä¸å†äº§ç”Ÿä»»ä½•é—²ç½®è´¹ç”¨ã€‚å¯¹äºå®éªŒæ€§è´¨çš„å¾®è°ƒä»»åŠ¡ï¼Œæˆæœ¬å¯ä»¥é™ä½ 50% ä»¥ä¸Šã€‚</li>
<li><strong>ç¯å¢ƒé¢„ç½®ï¼Œæ‹’ç»â€œé…ç¯å¢ƒâ€</strong>ï¼š æˆ‘ä»¬åœ¨ FC çš„åº”ç”¨ä¸­å¿ƒé¢„ç½®äº†åŒ…å« CUDAã€PyTorch ä»¥åŠ Llama-Factory ä¾èµ–çš„å®˜æ–¹é•œåƒã€‚è¿™ä¸€æ­¥è‡³å…³é‡è¦â€”â€”å®ƒæ„å‘³ç€ä½ ä¸éœ€è¦å¤„ç†ä»»ä½•é©±åŠ¨å†²çªï¼Œç‚¹å‡»éƒ¨ç½²ï¼Œç¯å¢ƒå³åˆ»å°±ç»ªã€‚</li>
<li><strong>å¼‚æ„ç®—åŠ›æ”¯æŒ</strong>ï¼š FC æä¾›äº†ä¸°å¯Œçš„ GPU è§„æ ¼ä¾›ä½ é€‰æ‹©ï¼Œæ»¡è¶³ä¸åŒè§„æ¨¡çš„å¾®è°ƒéœ€æ±‚ã€‚</li>
</ul>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764920834972-bea889e5-125a-40b0-8c3d-f240f7ee45d7.png" alt="" loading="lazy"/></p>
<p><em>â€œå½“ Llama-Factory çš„å¯è§†åŒ–äº¤äº’é‡ä¸Š FC çš„æè‡´å¼¹æ€§ï¼Œå¾®è°ƒ Qwen2-VL å°±å˜æˆäº†ä¸€åœºâ€˜ç‚¹å‡»å³å¾—â€™çš„æµç•…ä½“éªŒã€‚æˆ‘ä»¬ä¸å†éœ€è¦åƒè¿ç»´å·¥ç¨‹å¸ˆä¸€æ ·ç›¯ç€é»‘åº•ç™½å­—çš„ç»ˆç«¯çª—å£ï¼Œè€Œæ˜¯å¯ä»¥åƒä¿®å›¾å¸ˆä¸€æ ·ï¼Œåœ¨ Web ç•Œé¢ä¸Šä¼˜é›…åœ°æ‰“ç£¨æˆ‘ä»¬çš„æ¨¡å‹ã€‚â€</em></p>
<h3 data-id="heading-4">äºŒã€æé€Ÿéƒ¨ç½²ï¼š5åˆ†é’Ÿæ­å»ºå¾®è°ƒæµæ°´çº¿</h3>
<p>ä¼ ç»Ÿå¾®è°ƒçš„ç¬¬ä¸€æ­¥é€šå¸¸æ˜¯â€œç§ŸæœåŠ¡å™¨ã€è£…é©±åŠ¨ã€é…ç¯å¢ƒâ€ï¼Œè€Œåœ¨ Serverless æ¶æ„ä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥ä»â€œåº”ç”¨â€å¼€å§‹ã€‚</p>
<p><strong>Step 1ï¼šDevPod å¼€å‘ç¯å¢ƒä¸€é”®æ‹‰èµ·</strong></p>
<p>ç™»å½• Function AI æ§åˆ¶å° - FunModel - æ¨¡å‹å¸‚åœºï¼Œç‚¹å‡»é¡µé¢çš„ã€Œè‡ªå®šä¹‰å¼€å‘ã€ï¼Œåœ¨ã€Œæ¨¡å‹ç¯å¢ƒä¸‹ã€é€‰æ‹©ã€Œè‡ªå®šä¹‰ç¯å¢ƒã€ï¼Œåœ¨å®¹å™¨é•œåƒåœ°å€ä¸­å¡«å…¥ <code>serverless-registry.cn-hangzhou.cr.aliyuncs.com/functionai/devpod-presets:llama-factory-v0.9.4-v1</code>ã€‚è¯¥é•œåƒå·²å†…ç½® llama-factory v0.9.4 çš„ç‰ˆæœ¬ã€‚</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764309769776-6be9d8e1-42bd-482e-934c-f4c1270a059a.png" alt="" loading="lazy"/></p>
<p><strong>Step 2ï¼šèµ„æºä¸å­˜å‚¨é…ç½®ï¼ˆå…³é”®ä¸€æ­¥ï¼‰</strong></p>
<p>åªéœ€å…³æ³¨ GPU ç±»å‹ã€‚å¯¹äº Qwen3-VL çš„ LoRA å¾®è°ƒï¼Œæ¨èé€‰æ‹© GPU æ€§èƒ½å‹å•å¡å³å¯æ»¡è¶³éœ€æ±‚ï¼Œæ€§ä»·æ¯”æé«˜ã€‚</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764309771303-bb94fc91-4553-4824-9e16-1aebd786bafb.png" alt="" loading="lazy"/></p>
<p><strong>Step 3ï¼šä¸€é”®æ‹‰èµ·ç¯å¢ƒï¼Œç‚¹å‡»ã€ŒDevPod å¼€å‘è°ƒè¯•ã€</strong></p>
<p>FC ä¼šè‡ªåŠ¨æ‹‰å–åŒ…å« CUDA ç¯å¢ƒå’Œ Llama-Factory æ¡†æ¶çš„é•œåƒã€‚å¤§çº¦ç­‰å¾… 1-3 åˆ†é’Ÿï¼Œé¡µé¢è‡ªåŠ¨è·³è½¬åˆ° DevPod é¡µé¢ï¼Œæˆ‘ä»¬è¿›å…¥ Terminal ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ <code>USE_MODELSCOPE_HUB=1 lmf webui</code> å¯åŠ¨ llama-factory çš„è¿›ç¨‹ã€‚</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764311554203-e01da0d8-41d7-413a-a475-5574bbbe597e.png" alt="" loading="lazy"/></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764904990655-635739b1-78ea-4d9c-b102-58f29333e330.png" alt="" loading="lazy"/></p>
<p>æ ¹æ®ã€Œå¿«é€Ÿè®¿é—®ã€é¡µç­¾çš„æç¤ºï¼Œå°† uri ä¸­çš„ <code>{port}</code> æ›¿æ¢ä¸º 7860 å³å¯ï¼ˆllama-factory é»˜è®¤ä½¿ç”¨ 7860 ç«¯å£ï¼‰ã€‚ç›´æ¥ä½¿ç”¨è¯¥ uri åœ¨æµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œè¿›å…¥ llama-factory çš„ webui ç•Œé¢ã€‚</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764311896481-61d3a02e-bc06-4376-b7e9-6d1ea0ba451f.png" alt="" loading="lazy"/></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764311983575-ac8fe220-6ffb-4c1a-a4cc-b63f3a1421ae.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">ä¸‰ã€å®æˆ˜ SFTï¼šåƒ P å›¾ä¸€æ ·ç®€å•åœ°å¾®è°ƒæ¨¡å‹</h3>
<p>æ‰“å¼€ WebUI ç•Œé¢ï¼Œä½ ä¼šå‘ç°å¾®è°ƒå¤§æ¨¡å‹å¹¶ä¸æ¯”ä½¿ç”¨ Photoshop å¤æ‚å¤šå°‘ã€‚æˆ‘ä»¬ä¸éœ€è¦æ•²ä¸€è¡Œ Python ä»£ç ï¼Œåªéœ€åœ¨é¢æ¿ä¸Šè¿›è¡Œâ€œå‹¾é€‰â€å’Œâ€œå¡«ç©ºâ€ã€‚</p>
<p><strong>Step 1ï¼šæ¨¡å‹ä¸æ•°æ®å‡†å¤‡</strong></p>
<ul>
<li><strong>æ¨¡å‹åç§°</strong>ï¼š åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© <code>Qwen2-VL</code>ï¼ˆæˆ–æ‰‹åŠ¨è¾“å…¥æ¨¡å‹è·¯å¾„ï¼‰ã€‚</li>
<li><strong>æ•°æ®é›†</strong>ï¼š Llama-Factory æ”¯æŒæ ‡å‡†çš„ Alpaca æ ¼å¼æˆ– ShareGPT æ ¼å¼ã€‚å¯¹äºå¤šæ¨¡æ€ä»»åŠ¡ï¼Œç¡®ä¿ä½ çš„ JSON æ–‡ä»¶ä¸­åŒ…å«å›¾ç‰‡è·¯å¾„ã€‚
<ul>
<li>æ“ä½œï¼š åœ¨ WebUI çš„â€œæ•°æ®é›†â€é€‰é¡¹ä¸­é€‰æ‹©å‡†å¤‡å¥½çš„æ•°æ®é›†ï¼Œæœ¬æ–‡çš„æ•°æ®é›†è·¯å¾„å¦‚å›¾æ‰€ç¤ºï¼š</li>
</ul>
</li>
</ul>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764906712487-485f0c15-df14-4ef3-b93a-a967d71b9232.png" alt="" loading="lazy"/></p>
<p><strong>Step 2ï¼šå‚æ•°é…ç½®ï¼ˆLoRAå¤§æ³•å¥½ï¼‰</strong>
ä¸ºäº†åœ¨ Serverless ç¯å¢ƒä¸‹é«˜æ•ˆå¾®è°ƒï¼Œæˆ‘ä»¬é‡‡ç”¨ <strong>LoRA (Low-Rank Adaptation)</strong> æŠ€æœ¯ã€‚å®ƒåªè®­ç»ƒæ¨¡å‹çš„ä¸€å°éƒ¨åˆ†å‚æ•°ï¼Œå´èƒ½è¾¾åˆ°æƒŠäººçš„æ•ˆæœã€‚</p>
<ul>
<li><strong>å¾®è°ƒæ–¹æ³•</strong>ï¼š å‹¾é€‰ <code>full</code>ã€‚</li>
<li><strong>å­¦ä¹ ç‡ (Learning Rate)</strong>ï¼š æ¨è <code>1e-4</code> æˆ– <code>5e-5</code>ã€‚</li>
<li><strong>è½®æ•° (Epochs)</strong>ï¼š å»ºè®®å…ˆè®¾ä¸º <code>3</code> æˆ– <code>5</code> è½®ï¼Œå¿«é€ŸéªŒè¯æ•ˆæœã€‚</li>
</ul>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764919107775-84667310-a6a8-486b-81ce-3918aed478f6.png" alt="" loading="lazy"/></p>
<p><strong>Step 3ï¼šå¯åŠ¨è®­ç»ƒä¸ç›‘æ§</strong>
ä¸€åˆ‡å°±ç»ªï¼Œç‚¹å‡»é²œè‰³çš„ <strong>â€œå¼€å§‹è®­ç»ƒâ€</strong> æŒ‰é’®ã€‚ ç•Œé¢ä¸‹æ–¹ä¼šè‡ªåŠ¨å¼¹å‡ºæ—¥å¿—çª—å£å’Œ Lossï¼ˆæŸå¤±ï¼‰æ›²çº¿å›¾ã€‚çœ‹ç€ Loss æ›²çº¿åƒæ»‘æ¢¯ä¸€æ ·ç¨³æ­¥ä¸‹é™ï¼Œä»£è¡¨æ¨¡å‹æ­£åœ¨åŠªåŠ›å­¦ä¹ ä½ æ•™ç»™å®ƒçš„æ–°çŸ¥è¯†ã€‚</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764907126625-4da053fa-0abb-4632-851b-9b245f8d8cdf.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">å››ã€æ•ˆæœéªŒè¯ä¸æ¨¡å‹å¯¼å‡ºï¼šè§è¯â€œä¸“å®¶â€è¯ç”Ÿ</h3>
<p>çœ‹ç€ Loss æ›²çº¿æ”¶æ•›åªæ˜¯ç¬¬ä¸€æ­¥ï¼ŒçœŸæ­£çš„è€ƒéªŒåœ¨äºï¼šå®ƒçœŸçš„å˜èªæ˜äº†å—ï¼ŸLlama-Factory è´´å¿ƒåœ°é›†æˆäº†è¯„ä¼°ä¸æ¨ç†æ¨¡å—ï¼Œè®©æˆ‘ä»¬èƒ½å³æ—¶éªŒæ”¶æˆæœã€‚</p>
<p><strong>Step 1ï¼šChat é¡µç­¾åœ¨çº¿æ¨ç†</strong>
è®­ç»ƒå®Œæˆåï¼Œæ— éœ€é‡å¯æœåŠ¡ï¼Œç›´æ¥ç‚¹å‡» WebUI é¡¶éƒ¨çš„ <strong>â€œChatâ€</strong> é¡µç­¾ã€‚</p>
<ul>
<li><strong>æ£€æŸ¥ç‚¹é€‰æ‹©</strong>ï¼š åœ¨ <code>Checkpoint</code> ä¸‹æ‹‰æ¡†ä¸­ï¼Œé€‰æ‹©åˆšæ‰è®­ç»ƒå¥½çš„ Adapter æƒé‡ã€‚</li>
<li><strong>åŠ è½½æ¨¡å‹</strong>ï¼š ç‚¹å‡»â€œåŠ è½½æ¨¡å‹â€ï¼Œå‡ ç§’é’Ÿåï¼Œå³ä¸‹è§’æ˜¾ç¤ºâ€œæ¨¡å‹åŠ è½½æˆåŠŸâ€ã€‚</li>
</ul>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764920037265-e11f655b-19bb-4c0b-b062-1aaa7ac37219.png" alt="" loading="lazy"/></p>
<p><strong>Step 2ï¼šå¾®è°ƒå‰åæ•ˆæœâ€œå¤§æ¯”æ­¦â€</strong>
ä¸ºäº†éªŒè¯æ•ˆæœï¼Œæˆ‘ä»¬ä¸Šä¼ ä¸€å¼ ç‰¹å®šä¸šåŠ¡åœºæ™¯çš„å›¾ç‰‡ï¼ˆä¾‹å¦‚ä¸€å¼ å¤æ‚çš„æŠ¥é”€å•æ®ï¼‰ï¼Œå¹¶è¾“å…¥åŒæ ·çš„ Promptï¼šâ€œè¯·æå–å›¾ä¸­çš„å…³é”®ä¿¡æ¯â€ã€‚</p>
<p>å¾®è°ƒå‰ï¼š</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764920105262-a2df3466-1da2-4c75-bd35-94a92e6b7a18.png" alt="" loading="lazy"/></p>
<p>å¾®è°ƒåï¼š</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764920206458-2348ce56-3383-4031-98f3-72df874dcd98.png" alt="" loading="lazy"/></p>
<p>è¿™å°±æ˜¯ SFT çš„é­”åŠ›â€”â€”è®©é€šç”¨çš„å¤©æ‰å˜æˆå‚ç›´é¢†åŸŸçš„ä¸“å®¶ã€‚</p>
<p><strong>Step 3ï¼šæ¨¡å‹å¯¼å‡ºä¸è½åœ°</strong>
éªŒè¯æ»¡æ„åï¼Œç‚¹å‡» <strong>â€œExportâ€</strong> é¡µç­¾ã€‚</p>
<ul>
<li><strong>æœ€å¤§åˆ†å—å¤§å°</strong>ï¼š å»ºè®®è®¾ç½®ä¸º <code>2GB</code> æˆ– <code>4GB</code>ã€‚</li>
<li><strong>å¯¼å‡ºç›®å½•</strong>ï¼š æŒ‡å‘ä½ çš„ OSS è·¯å¾„æˆ–è€…æœ¬åœ°è·¯å¾„ã€‚ ç‚¹å‡»â€œå¼€å§‹å¯¼å‡ºâ€ï¼ŒLlama-Factory ä¼šè‡ªåŠ¨å°† LoRA æƒé‡ä¸åŸå§‹æ¨¡å‹åˆå¹¶ã€‚ç°åœ¨ï¼Œä½ æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç›´æ¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„ä¸“å± Qwen2-VL æ¨¡å‹ã€‚</li>
</ul>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764920371970-d03c2468-f7a6-4833-9b3f-9bdb39ba79ed.png" alt="" loading="lazy"/></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/324184/1764920434175-366c54db-dead-4267-9a98-f9e2fc2afe39.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">äº”ã€ç»“è¯­ï¼šServerless AIï¼Œè®©åˆ›æ–°è§¦æ‰‹å¯åŠ</h3>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬åªç”¨äº†ä¸€æ¯å’–å•¡çš„æ—¶é—´ï¼Œå°±å®Œæˆäº†ä»ç¯å¢ƒæ­å»ºã€æ¨¡å‹å¾®è°ƒåˆ°æ•ˆæœéªŒè¯çš„å…¨æµç¨‹ã€‚</p>
<p><strong>æœ€åï¼Œè®©æˆ‘ä»¬ç®—ä¸€ç¬”è´¦</strong>ï¼š å¦‚æœä½ ä¸ºäº†è¿™æ¬¡å®éªŒå»ç§Ÿèµä¸€å° L20 æœåŠ¡å™¨ï¼Œé€šå¸¸éœ€è¦æŒ‰æœˆä»˜è´¹ï¼Œæˆæœ¬å¯èƒ½é«˜è¾¾æ•°åƒå…ƒï¼Œä¸”å¤§éƒ¨åˆ†æ—¶é—´æ˜¾å¡éƒ½åœ¨ç©ºè½¬ã€‚ è€Œåœ¨é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰ä¸Šï¼Œä½ åªéœ€è¦ä¸ºè®­ç»ƒçš„é‚£ <strong>2 å°æ—¶</strong> ä»˜è´¹ã€‚<strong>æŒ‰é‡ä»˜è´¹ï¼Œç”¨å®Œå³èµ°ï¼Œæˆæœ¬å¯èƒ½ä¸åˆ°ä¸€æ¯å¥¶èŒ¶é’±ã€‚</strong></p>
<p><strong>Serverless GPU çš„æ ¸å¿ƒä»·å€¼ï¼Œä¸ä»…ä»…æ˜¯çœé’±ï¼Œæ›´æ˜¯â€œè§£æ”¾â€ã€‚</strong> å®ƒæŠŠå¼€å‘è€…ä»ç¹ççš„è¿ç»´æ³¥æ½­ä¸­è§£æ”¾å‡ºæ¥ï¼Œä¸å†éœ€è¦æ‹…å¿ƒ CUDA ç‰ˆæœ¬ã€æ˜¾å­˜æº¢å‡ºæˆ–èµ„æºé—²ç½®ã€‚ä½ åªéœ€è¦å…³æ³¨æœ€æ ¸å¿ƒçš„èµ„äº§â€”â€”<strong>æ•°æ®</strong>ä¸<strong>åˆ›æ„</strong>ã€‚</p>
<p>å¤šæ¨¡æ€çš„æ—¶ä»£å·²ç»åˆ°æ¥ï¼ŒQwen2-VL çš„å¤§é—¨å·²ç»æ•å¼€ã€‚ ç°åœ¨ï¼Œè½®åˆ°ä½ äº†ã€‚</p>
<h2 data-id="heading-8">äº†è§£å‡½æ•°è®¡ç®—æ¨¡å‹æœåŠ¡ FunModel</h2>
<p>FunModel æ˜¯ä¸€ä¸ªé¢å‘ AI æ¨¡å‹å¼€å‘ã€éƒ¨ç½²ä¸è¿ç»´çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†å¹³å°ã€‚æ‚¨åªéœ€æä¾›æ¨¡å‹æ–‡ä»¶ï¼ˆä¾‹å¦‚æ¥è‡ª ModelScopeã€Hugging Face ç­‰ç¤¾åŒºçš„æ¨¡å‹ä»“åº“ï¼‰ï¼Œå³å¯åˆ©ç”¨ FunModel çš„è‡ªåŠ¨åŒ–å·¥å…·å¿«é€Ÿå®Œæˆæ¨¡å‹æœåŠ¡çš„å°è£…ä¸éƒ¨ç½²ï¼Œå¹¶è·å¾—å¯ç›´æ¥è°ƒç”¨çš„æ¨ç† APIã€‚å¹³å°åœ¨è®¾è®¡ä¸Šæ—¨åœ¨æå‡èµ„æºä½¿ç”¨æ•ˆç‡å¹¶ç®€åŒ–å¼€å‘éƒ¨ç½²æµç¨‹ã€‚</p>
<p>FunModel ä¾æ‰˜ Serverless + GPUï¼Œå¤©ç„¶æä¾›äº†ç®€å•ï¼Œè½»é‡ï¼Œ0 é—¨æ§›çš„æ¨¡å‹é›†æˆæ–¹æ¡ˆï¼Œç»™ä¸ªäººå¼€å‘è€…è‰¯å¥½çš„ç©è½¬æ¨¡å‹çš„ä½“éªŒï¼Œä¹Ÿè®©ä¼ä¸šçº§å¼€å‘è€…å¿«é€Ÿé«˜æ•ˆçš„éƒ¨ç½²ã€è¿ç»´å’Œè¿­ä»£æ¨¡å‹ã€‚</p>
<p>åœ¨é˜¿é‡Œäº‘ FunModel å¹³å°ï¼Œå¼€å‘è€…å¯ä»¥åšåˆ°ï¼š</p>
<ul>
<li><strong>æ¨¡å‹çš„å¿«é€Ÿéƒ¨ç½²ä¸Šçº¿</strong>ï¼šä»åŸæ¥çš„ä»¥å‘¨ä¸ºå•ä½çš„æ¨¡å‹æ¥å…¥å‘¨æœŸé™ä½åˆ° 5 åˆ†é’Ÿï¼Œ0 å¼€å‘ï¼Œæ— æ’æœŸ</li>
<li><strong>ä¸€é”®æ‰©ç¼©å®¹ï¼Œè®©è¿ç»´ä¸å†æ˜¯è´Ÿæ‹…</strong>ï¼šå¤šç§æ‰©ç¼©å®¹ç­–ç•¥é«˜åº¦é€‚é…ä¸šåŠ¡æµé‡ï¼Œå®ç°â€œæ— ç—›è¿ç»´â€</li>
</ul>
<p><strong>æŠ€æœ¯ä¼˜åŠ¿</strong></p>






























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">FunModel å®ç°æœºåˆ¶</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">èµ„æºåˆ©ç”¨ç‡</td><td align="left">é‡‡ç”¨ GPU è™šæ‹ŸåŒ–ä¸èµ„æºæ± åŒ–æŠ€æœ¯ã€‚</td><td align="left">è¯¥è®¾è®¡å…è®¸å¤šä¸ªä»»åŠ¡å…±äº«åº•å±‚ç¡¬ä»¶èµ„æºï¼Œæ—¨åœ¨æé«˜è®¡ç®—èµ„æºçš„æ•´ä½“ä½¿ç”¨æ•ˆç‡ã€‚</td></tr><tr><td align="left">å®ä¾‹å°±ç»ªæ—¶é—´</td><td align="left">åŸºäºå¿«ç…§æŠ€æœ¯çš„çŠ¶æ€æ¢å¤æœºåˆ¶ã€‚</td><td align="left">å®ä¾‹å¯åŠ¨æ—¶ï¼Œå¯é€šè¿‡å¿«ç…§åœ¨æ¯«ç§’çº§åˆ«æ¢å¤è¿è¡ŒçŠ¶æ€ï¼Œä»è€Œå°†å®ä¾‹ä»åˆ›å»ºåˆ°å°±ç»ªçš„æ—¶é—´æ§åˆ¶åœ¨ç§’çº§ã€‚</td></tr><tr><td align="left">å¼¹æ€§æ‰©å®¹å“åº”</td><td align="left">ç»“åˆé¢„çƒ­èµ„æºæ± ä¸å¿«é€Ÿå®ä¾‹æ¢å¤èƒ½åŠ›ã€‚</td><td align="left">å½“è´Ÿè½½å¢åŠ æ—¶ï¼Œç³»ç»Ÿå¯ä»¥ä»é¢„çƒ­èµ„æºæ± ä¸­å¿«é€Ÿè°ƒåº¦å¹¶å¯åŠ¨æ–°å®ä¾‹ï¼Œå®ç°ç§’çº§çš„æ°´å¹³æ‰©å±•å“åº”ã€‚</td></tr><tr><td align="left">è‡ªåŠ¨åŒ–éƒ¨ç½²è€—æ—¶</td><td align="left">æä¾›å¯ä¸€é”®è§¦å‘çš„æ„å»ºä¸éƒ¨ç½²æµç¨‹ã€‚</td><td align="left">ä¸€æ¬¡æ ‡å‡†çš„éƒ¨ç½²æµç¨‹ï¼ˆä»ä»£ç æäº¤åˆ°æœåŠ¡ä¸Šçº¿ï¼‰é€šå¸¸å¯åœ¨ 10 åˆ†é’Ÿå†…å®Œæˆã€‚</td></tr></tbody></table>
<h3 data-id="heading-9">æ›´å¤šå†…å®¹è¯·å‚è€ƒ</h3>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Ffunctioncompute%2Ffc%2Fmodel-service-funmodel%2F" target="_blank" title="https://help.aliyun.com/zh/functioncompute/fc/model-service-funmodel/" ref="nofollow noopener noreferrer">æ¨¡å‹æœåŠ¡FunModel äº§å“æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Ffunctioncompute%2Ffc%2Fquick-start" target="_blank" title="https://help.aliyun.com/zh/functioncompute/fc/quick-start" ref="nofollow noopener noreferrer">FunModelå¿«é€Ÿå…¥é—¨</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Ffunctioncompute%2Ffc%2Fcustom-model-deployment" target="_blank" title="https://help.aliyun.com/zh/functioncompute/fc/custom-model-deployment" ref="nofollow noopener noreferrer">FunModel è‡ªå®šä¹‰éƒ¨ç½²</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffcnext.console.aliyun.com%2Ffun-model%2Fcn-hangzhou%2Ffun-model%2Fmodel-market" target="_blank" title="https://fcnext.console.aliyun.com/fun-model/cn-hangzhou/fun-model/model-market" ref="nofollow noopener noreferrer">FunModel æ¨¡å‹å¹¿åœº</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å•é“¾è¡¨ä¸åŒé“¾è¡¨ä¸“é¢˜è¯¦è§£]]></title>    <link>https://juejin.cn/post/7581689310643060778</link>    <guid>https://juejin.cn/post/7581689310643060778</guid>    <pubDate>2025-12-09T10:19:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581689310643060778" data-draft-id="7581676787379666963" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å•é“¾è¡¨ä¸åŒé“¾è¡¨ä¸“é¢˜è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T10:19:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å•é“¾è¡¨ä¸åŒé“¾è¡¨ä¸“é¢˜è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T10:19:33.000Z" title="Tue Dec 09 2025 10:19:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é“¾è¡¨æ˜¯<strong>çº¿æ€§æ•°æ®ç»“æ„</strong>ï¼Œä½†ä¸æ•°ç»„æœ‰æœ¬è´¨åŒºåˆ«ã€‚æ•°ç»„æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ”¯æŒéšæœºè®¿é—®ï¼›é“¾è¡¨åˆ™æ˜¯<strong>ç¦»æ•£çš„å†…å­˜èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆè¿æ¥</strong>ï¼Œåªæ”¯æŒé¡ºåºè®¿é—®ã€‚ç†è§£é“¾è¡¨çš„æ ¸å¿ƒåœ¨äºæŒæ¡<strong>æŒ‡é’ˆæ“ä½œ</strong>å’Œ<strong>èŠ‚ç‚¹å…³ç³»ç®¡ç†</strong>ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å•é“¾è¡¨åŸºç¡€ï¼šèŠ‚ç‚¹ç»“æ„ä¸åˆ›å»º</h2>
<h3 data-id="heading-1">1.1 å•é“¾è¡¨èŠ‚ç‚¹ç»“æ„</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListNode</span> {
    <span class="hljs-type">int</span> val;         <span class="hljs-comment">// èŠ‚ç‚¹å€¼</span>
    ListNode* next;  <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span>
    
    <span class="hljs-built_in">ListNode</span>(<span class="hljs-type">int</span> x) : <span class="hljs-built_in">val</span>(x), <span class="hljs-built_in">next</span>(<span class="hljs-literal">nullptr</span>) {}
};
</code></pre>
<p><strong>å…³é”®ç†è§£</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸¤éƒ¨åˆ†ï¼šæ•°æ®åŸŸ(val)å’ŒæŒ‡é’ˆåŸŸ(next)</li>
<li><code>next</code>æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå½¢æˆé“¾å¼ç»“æ„</li>
<li>æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„<code>next</code>æŒ‡å‘<code>nullptr</code>ï¼Œè¡¨ç¤ºé“¾è¡¨ç»“æŸ</li>
</ul>
<h3 data-id="heading-2">1.2 åˆ›å»ºé“¾è¡¨çš„ä¸‰ç§æ–¹æ³•</h3>
<h4 data-id="heading-3">æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨è¿æ¥</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ›å»ºä¸‰ä¸ªèŠ‚ç‚¹</span>
ListNode* node1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(<span class="hljs-number">1</span>);
ListNode* node2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(<span class="hljs-number">2</span>);
ListNode* node3 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(<span class="hljs-number">3</span>);

<span class="hljs-comment">// æ‰‹åŠ¨è¿æ¥</span>
node1-&gt;next = node2;
node2-&gt;next = node3;
<span class="hljs-comment">// node3-&gt;next ä¿æŒä¸º nullptr</span>
</code></pre>
<h4 data-id="heading-4">æ–¹æ³•äºŒï¼šå°¾æ’æ³•ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">createList</span><span class="hljs-params">(<span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>{
    <span class="hljs-function">ListNode <span class="hljs-title">dummy</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>;  <span class="hljs-comment">// å“‘èŠ‚ç‚¹ï¼Œç®€åŒ–è¾¹ç•Œå¤„ç†</span>
    ListNode* tail = &amp;dummy;  <span class="hljs-comment">// å°¾æŒ‡é’ˆï¼Œå§‹ç»ˆæŒ‡å‘æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) {
        tail-&gt;next = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(num);
        tail = tail-&gt;next;  <span class="hljs-comment">// ç§»åŠ¨å°¾æŒ‡é’ˆ</span>
    }
    
    <span class="hljs-keyword">return</span> dummy.next;  <span class="hljs-comment">// è¿”å›çœŸæ­£çš„å¤´èŠ‚ç‚¹</span>
}
</code></pre>
<p><strong>å“‘èŠ‚ç‚¹æŠ€å·§</strong>ï¼š</p>
<ul>
<li>é¿å…å¤„ç†å¤´èŠ‚ç‚¹çš„ç‰¹æ®Šæƒ…å†µ</li>
<li>ä»£ç æ›´ç®€æ´ï¼Œé€»è¾‘æ›´æ¸…æ™°</li>
<li>å¸¸ç”¨åœ¨é“¾è¡¨æ“ä½œä¸­</li>
</ul>
<h4 data-id="heading-5">æ–¹æ³•ä¸‰ï¼šå¤´æ’æ³•ï¼ˆåˆ›å»ºé€†åºé“¾è¡¨ï¼‰</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">createReverseList</span><span class="hljs-params">(<span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>{
    ListNode* head = <span class="hljs-literal">nullptr</span>;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) {
        ListNode* newNode = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(num);
        newNode-&gt;next = head;  <span class="hljs-comment">// æ–°èŠ‚ç‚¹æŒ‡å‘åŸå¤´èŠ‚ç‚¹</span>
        head = newNode;        <span class="hljs-comment">// æ›´æ–°å¤´èŠ‚ç‚¹</span>
    }
    
    <span class="hljs-keyword">return</span> head;
}
</code></pre>
<h3 data-id="heading-6">1.3 éå†é“¾è¡¨</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printList</span><span class="hljs-params">(ListNode* head)</span> </span>{
    ListNode* curr = head;
    
    <span class="hljs-keyword">while</span> (curr) {
        cout &lt;&lt; curr-&gt;val;
        <span class="hljs-keyword">if</span> (curr-&gt;next) cout &lt;&lt; <span class="hljs-string">" -&gt; "</span>;
        curr = curr-&gt;next;
    }
    cout &lt;&lt; <span class="hljs-string">" -&gt; nullptr"</span> &lt;&lt; endl;
}
</code></pre>
<h2 data-id="heading-7">äºŒã€å•é“¾è¡¨æ ¸å¿ƒæ“ä½œï¼šåè½¬ç®—æ³•è¯¦è§£</h2>
<h3 data-id="heading-8">2.1 é—®é¢˜åˆ†æï¼šä¸ºä»€ä¹ˆè¦åè½¬é“¾è¡¨ï¼Ÿ</h3>
<p>é“¾è¡¨åè½¬æ˜¯<strong>æœ€ç»å…¸çš„é“¾è¡¨é—®é¢˜</strong>ï¼Œè€ƒå¯Ÿå¯¹æŒ‡é’ˆæ“ä½œçš„ç†è§£ã€‚åè½¬æ„å‘³ç€æ”¹å˜èŠ‚ç‚¹é—´çš„æŒ‡å‘å…³ç³»ï¼Œå°†<code>a-&gt;b-&gt;c</code>å˜ä¸º<code>a&lt;-b&lt;-c</code>ã€‚</p>
<h3 data-id="heading-9">2.2 è¿­ä»£åè½¬æ³•ï¼ˆä¸‰æŒ‡é’ˆæ³•ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">reverseIterative</span><span class="hljs-params">(ListNode* head)</span> </span>{
    ListNode* prev = <span class="hljs-literal">nullptr</span>;   <span class="hljs-comment">// å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆå§‹ä¸ºnullptr</span>
    ListNode* curr = head;      <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹ï¼Œä»å¤´èŠ‚ç‚¹å¼€å§‹</span>
    ListNode* next = <span class="hljs-literal">nullptr</span>;   <span class="hljs-comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸´æ—¶ä¿å­˜</span>
    
    <span class="hljs-keyword">while</span> (curr) {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šä¿å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå…³é”®ï¼ï¼‰</span>
        next = curr-&gt;next;
        
        <span class="hljs-comment">// æ­¥éª¤2ï¼šåè½¬å½“å‰èŠ‚ç‚¹çš„æŒ‡é’ˆ</span>
        curr-&gt;next = prev;
        
        <span class="hljs-comment">// æ­¥éª¤3ï¼šç§»åŠ¨æŒ‡é’ˆï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡å¾ªç¯</span>
        prev = curr;  <span class="hljs-comment">// prevç§»åŠ¨åˆ°å½“å‰èŠ‚ç‚¹</span>
        curr = next;  <span class="hljs-comment">// currç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>
    }
    
    <span class="hljs-keyword">return</span> prev;  <span class="hljs-comment">// å¾ªç¯ç»“æŸæ—¶ï¼ŒprevæŒ‡å‘åŸé“¾è¡¨çš„å°¾èŠ‚ç‚¹ï¼Œå³æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹</span>
}
</code></pre>
<h4 data-id="heading-10">é€æ­¥åˆ†æï¼ˆé“¾è¡¨ï¼š1-&gt;2-&gt;3-&gt;nullptrï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">åˆå§‹çŠ¶æ€ï¼š
<span class="hljs-attr">prev</span> = nullptr
<span class="hljs-attr">curr</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">next</span> = nullptr

ç¬¬1æ¬¡å¾ªç¯ï¼š
<span class="hljs-attr">next</span> = curr-&gt;next = <span class="hljs-number">2</span>        // ä¿å­˜èŠ‚ç‚¹<span class="hljs-number">2</span>
curr-&gt;<span class="hljs-attr">next</span> = prev = nullptr  // <span class="hljs-number">1</span>-&gt;nullptr
<span class="hljs-attr">prev</span> = curr = <span class="hljs-number">1</span>              // prevæŒ‡å‘<span class="hljs-number">1</span>
<span class="hljs-attr">curr</span> = next = <span class="hljs-number">2</span>              // curræŒ‡å‘<span class="hljs-number">2</span>
ç»“æœï¼šnullptr &lt;- 1   2-&gt;3-&gt;nullptr

ç¬¬2æ¬¡å¾ªç¯ï¼š
<span class="hljs-attr">next</span> = curr-&gt;next = <span class="hljs-number">3</span>        // ä¿å­˜èŠ‚ç‚¹<span class="hljs-number">3</span>
curr-&gt;<span class="hljs-attr">next</span> = prev = <span class="hljs-number">1</span>        // <span class="hljs-number">2</span>-&gt;<span class="hljs-number">1</span>
<span class="hljs-attr">prev</span> = curr = <span class="hljs-number">2</span>              // prevæŒ‡å‘<span class="hljs-number">2</span>
<span class="hljs-attr">curr</span> = next = <span class="hljs-number">3</span>              // curræŒ‡å‘<span class="hljs-number">3</span>
ç»“æœï¼šnullptr &lt;- 1 &lt;- 2   3-&gt;nullptr

ç¬¬3æ¬¡å¾ªç¯ï¼š
<span class="hljs-attr">next</span> = curr-&gt;next = nullptr  // ä¿å­˜nullptr
curr-&gt;<span class="hljs-attr">next</span> = prev = <span class="hljs-number">2</span>        // <span class="hljs-number">3</span>-&gt;<span class="hljs-number">2</span>
<span class="hljs-attr">prev</span> = curr = <span class="hljs-number">3</span>              // prevæŒ‡å‘<span class="hljs-number">3</span>
<span class="hljs-attr">curr</span> = next = nullptr        // curræŒ‡å‘nullptrï¼Œå¾ªç¯ç»“æŸ
ç»“æœï¼šnullptr &lt;- 1 &lt;- 2 &lt;- 3

è¿”å›<span class="hljs-attr">prev</span> = <span class="hljs-number">3</span>ï¼Œå³æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹
</code></pre>
<h3 data-id="heading-11">2.3 ä¸ºä»€ä¹ˆè¿™ä¸ªç®—æ³•æ­£ç¡®ï¼Ÿ</h3>
<ol>
<li><strong>ä¿å­˜nextæ˜¯å¿…é¡»çš„</strong>ï¼šä¸€æ—¦æ‰§è¡Œ<code>curr-&gt;next = prev</code>ï¼Œå°±ä¸¢å¤±äº†åŸé“¾è¡¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li>
<li><strong>ç§»åŠ¨æŒ‡é’ˆçš„é¡ºåº</strong>ï¼šå¿…é¡»å…ˆç§»åŠ¨prevåˆ°currï¼Œå†ç§»åŠ¨curråˆ°next</li>
<li><strong>ç»ˆæ­¢æ¡ä»¶</strong>ï¼šå½“currä¸ºnullptræ—¶ï¼ŒprevæŒ‡å‘åŸé“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå³æ–°é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</li>
</ol>
<h3 data-id="heading-12">2.4 é€’å½’åè½¬æ³•</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">reverseRecursive</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-comment">// é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šç©ºé“¾è¡¨æˆ–å•ä¸ªèŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (!head || !head-&gt;next) {
        <span class="hljs-keyword">return</span> head;
    }
    
    <span class="hljs-comment">// é€’å½’åè½¬å‰©ä½™éƒ¨åˆ†</span>
    ListNode* newHead = <span class="hljs-built_in">reverseRecursive</span>(head-&gt;next);
    
    <span class="hljs-comment">// å…³é”®æ“ä½œï¼šè®©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘è‡ªå·±</span>
    head-&gt;next-&gt;next = head;
    <span class="hljs-comment">// æ–­å¼€è‡ªå·±çš„nextæŒ‡é’ˆï¼ˆå¦åˆ™ä¼šæˆç¯ï¼‰</span>
    head-&gt;next = <span class="hljs-literal">nullptr</span>;
    
    <span class="hljs-keyword">return</span> newHead;
}
</code></pre>
<h4 data-id="heading-13">é€’å½’æ·±åº¦åˆ†æï¼ˆé“¾è¡¨ï¼š1-&gt;2-&gt;3ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust">è°ƒç”¨æ ˆï¼š
<span class="hljs-title function_ invoke__">reverse</span>(<span class="hljs-number">1</span>)
  <span class="hljs-title function_ invoke__">reverse</span>(<span class="hljs-number">2</span>)
    <span class="hljs-title function_ invoke__">reverse</span>(<span class="hljs-number">3</span>) <span class="hljs-punctuation">-&gt;</span> è¿”å›<span class="hljs-number">3</span>
    
<span class="hljs-title function_ invoke__">reverse</span>(<span class="hljs-number">2</span>)å±‚ï¼š
  newHead = <span class="hljs-number">3</span>
  <span class="hljs-number">2</span><span class="hljs-punctuation">-&gt;</span><span class="hljs-number">3</span><span class="hljs-punctuation">-&gt;</span><span class="hljs-number">2</span>ï¼ˆå½¢æˆç¯ï¼‰
  <span class="hljs-number">2</span><span class="hljs-punctuation">-&gt;</span>next = nullptr
  è¿”å›<span class="hljs-number">3</span><span class="hljs-punctuation">-&gt;</span><span class="hljs-number">2</span>
    
<span class="hljs-title function_ invoke__">reverse</span>(<span class="hljs-number">1</span>)å±‚ï¼š
  newHead = <span class="hljs-number">3</span><span class="hljs-punctuation">-&gt;</span><span class="hljs-number">2</span>
  <span class="hljs-number">1</span><span class="hljs-punctuation">-&gt;</span><span class="hljs-number">2</span><span class="hljs-punctuation">-&gt;</span><span class="hljs-number">1</span>ï¼ˆå½¢æˆç¯ï¼‰
  <span class="hljs-number">1</span><span class="hljs-punctuation">-&gt;</span>next = nullptr
  è¿”å›<span class="hljs-number">3</span><span class="hljs-punctuation">-&gt;</span><span class="hljs-number">2</span><span class="hljs-punctuation">-&gt;</span><span class="hljs-number">1</span>
</code></pre>
<h3 data-id="heading-14">2.5 ä½¿ç”¨æ ˆè¾…åŠ©åè½¬ï¼ˆç†è§£ç”¨ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">reverseWithStack</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-keyword">if</span> (!head) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    
    stack&lt;ListNode*&gt; st;
    ListNode* curr = head;
    
    <span class="hljs-comment">// æ‰€æœ‰èŠ‚ç‚¹å…¥æ ˆ</span>
    <span class="hljs-keyword">while</span> (curr) {
        st.<span class="hljs-built_in">push</span>(curr);
        curr = curr-&gt;next;
    }
    
    <span class="hljs-comment">// æ ˆé¡¶æ˜¯åŸé“¾è¡¨çš„å°¾èŠ‚ç‚¹ï¼Œä½œä¸ºæ–°é“¾è¡¨çš„å¤´</span>
    ListNode* newHead = st.<span class="hljs-built_in">top</span>();
    st.<span class="hljs-built_in">pop</span>();
    curr = newHead;
    
    <span class="hljs-comment">// ä¾æ¬¡å‡ºæ ˆå¹¶è¿æ¥</span>
    <span class="hljs-keyword">while</span> (!st.<span class="hljs-built_in">empty</span>()) {
        curr-&gt;next = st.<span class="hljs-built_in">top</span>();
        st.<span class="hljs-built_in">pop</span>();
        curr = curr-&gt;next;
    }
    
    <span class="hljs-comment">// å…³é”®ï¼šæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„nextç½®ç©º</span>
    curr-&gt;next = <span class="hljs-literal">nullptr</span>;
    
    <span class="hljs-keyword">return</span> newHead;
}
</code></pre>
<p><strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦O(n)é¢å¤–ç©ºé—´ï¼Œæ•ˆç‡ä¸å¦‚è¿­ä»£æ³•</p>
<h2 data-id="heading-15">ä¸‰ã€åŒé“¾è¡¨è¯¦è§£ï¼šåŒå‘å…³ç³»ç®¡ç†</h2>
<h3 data-id="heading-16">3.1 åŒé“¾è¡¨èŠ‚ç‚¹ç»“æ„</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DListNode</span> {
    <span class="hljs-type">int</span> val;
    DListNode* prev;  <span class="hljs-comment">// æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</span>
    DListNode* next;  <span class="hljs-comment">// æŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹</span>
    
    <span class="hljs-built_in">DListNode</span>(<span class="hljs-type">int</span> x) : <span class="hljs-built_in">val</span>(x), <span class="hljs-built_in">prev</span>(<span class="hljs-literal">nullptr</span>), <span class="hljs-built_in">next</span>(<span class="hljs-literal">nullptr</span>) {}
};
</code></pre>
<p><strong>ä¸å•é“¾è¡¨çš„åŒºåˆ«</strong>ï¼š</p>
<ul>
<li>å¤šäº†ä¸€ä¸ª<code>prev</code>æŒ‡é’ˆï¼ŒæŒ‡å‘å‰é©±èŠ‚ç‚¹</li>
<li>å¯ä»¥åŒå‘éå†ï¼šä»å¤´åˆ°å°¾æˆ–ä»å°¾åˆ°å¤´</li>
<li>åˆ é™¤æ“ä½œæ›´ç®€å•ï¼ˆä¸éœ€è¦æ‰¾åˆ°å‰é©±èŠ‚ç‚¹ï¼‰</li>
</ul>
<h3 data-id="heading-17">3.2 åŒé“¾è¡¨çš„ä¼˜åŠ¿ä¸ä»£ä»·</h3>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li>åŒå‘éå†ï¼šå¯ä»¥ä»ä»»æ„èŠ‚ç‚¹å‘å‰æˆ–å‘åéå†</li>
<li>åˆ é™¤æ“ä½œç®€å•ï¼šä¸éœ€è¦å¯»æ‰¾å‰é©±èŠ‚ç‚¹</li>
<li>æŸäº›æ“ä½œæ›´é«˜æ•ˆï¼šå¦‚åˆ é™¤å°¾èŠ‚ç‚¹åªéœ€O(1)</li>
</ol>
<p><strong>ä»£ä»·</strong>ï¼š</p>
<ol>
<li>æ¯ä¸ªèŠ‚ç‚¹å¤šä¸€ä¸ªæŒ‡é’ˆï¼Œå†…å­˜å ç”¨å¢åŠ </li>
<li>æ’å…¥/åˆ é™¤æ—¶éœ€è¦ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆï¼Œä»£ç ç¨å¤æ‚</li>
<li>éœ€è¦æ›´å¤šçš„æŒ‡é’ˆæ“ä½œï¼Œå®¹æ˜“å‡ºé”™</li>
</ol>
<h3 data-id="heading-18">3.3 åŒé“¾è¡¨æ’å…¥æ“ä½œ</h3>
<h4 data-id="heading-19">åœ¨å¤´éƒ¨æ’å…¥</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insertAtHead</span><span class="hljs-params">(DListNode*&amp; head, DListNode*&amp; tail, <span class="hljs-type">int</span> val)</span> </span>{
    DListNode* newNode = <span class="hljs-keyword">new</span> <span class="hljs-built_in">DListNode</span>(val);
    
    <span class="hljs-keyword">if</span> (!head) {  <span class="hljs-comment">// ç©ºé“¾è¡¨</span>
        head = tail = newNode;
    } <span class="hljs-keyword">else</span> {
        newNode-&gt;next = head;
        head-&gt;prev = newNode;
        head = newNode;
    }
}
</code></pre>
<h4 data-id="heading-20">åœ¨å°¾éƒ¨æ’å…¥</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insertAtTail</span><span class="hljs-params">(DListNode*&amp; head, DListNode*&amp; tail, <span class="hljs-type">int</span> val)</span> </span>{
    DListNode* newNode = <span class="hljs-keyword">new</span> <span class="hljs-built_in">DListNode</span>(val);
    
    <span class="hljs-keyword">if</span> (!tail) {  <span class="hljs-comment">// ç©ºé“¾è¡¨</span>
        head = tail = newNode;
    } <span class="hljs-keyword">else</span> {
        tail-&gt;next = newNode;
        newNode-&gt;prev = tail;
        tail = newNode;
    }
}
</code></pre>
<h4 data-id="heading-21">åœ¨æŒ‡å®šèŠ‚ç‚¹åæ’å…¥</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insertAfter</span><span class="hljs-params">(DListNode* node, <span class="hljs-type">int</span> val)</span> </span>{
    <span class="hljs-keyword">if</span> (!node) <span class="hljs-keyword">return</span>;
    
    DListNode* newNode = <span class="hljs-keyword">new</span> <span class="hljs-built_in">DListNode</span>(val);
    
    <span class="hljs-comment">// è¿æ¥æ–°èŠ‚ç‚¹ä¸åç»§èŠ‚ç‚¹</span>
    newNode-&gt;next = node-&gt;next;
    <span class="hljs-keyword">if</span> (node-&gt;next) {
        node-&gt;next-&gt;prev = newNode;
    }
    
    <span class="hljs-comment">// è¿æ¥æ–°èŠ‚ç‚¹ä¸å‰é©±èŠ‚ç‚¹</span>
    newNode-&gt;prev = node;
    node-&gt;next = newNode;
}
</code></pre>
<h3 data-id="heading-22">3.4 åŒé“¾è¡¨åˆ é™¤æ“ä½œï¼ˆé‡ç‚¹ï¼‰</h3>
<h4 data-id="heading-23">åˆ é™¤èŠ‚ç‚¹çš„ä¸‰ç§æƒ…å†µ</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deleteNode</span><span class="hljs-params">(DListNode*&amp; head, DListNode*&amp; tail, DListNode* target)</span> </span>{
    <span class="hljs-keyword">if</span> (!head || !target) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// è¾¹ç•Œæ£€æŸ¥</span>
    
    <span class="hljs-comment">// æƒ…å†µ1ï¼šåˆ é™¤å¤´èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (target == head) {
        head = head-&gt;next;        <span class="hljs-comment">// å¤´æŒ‡é’ˆåç§»</span>
        <span class="hljs-keyword">if</span> (head) {
            head-&gt;prev = <span class="hljs-literal">nullptr</span>; <span class="hljs-comment">// æ–°å¤´èŠ‚ç‚¹çš„prevç½®ç©º</span>
        } <span class="hljs-keyword">else</span> {
            tail = <span class="hljs-literal">nullptr</span>;       <span class="hljs-comment">// é“¾è¡¨å˜ç©ºï¼Œå°¾æŒ‡é’ˆä¹Ÿç½®ç©º</span>
        }
    }
    <span class="hljs-comment">// æƒ…å†µ2ï¼šåˆ é™¤å°¾èŠ‚ç‚¹</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target == tail) {
        tail = tail-&gt;prev;        <span class="hljs-comment">// å°¾æŒ‡é’ˆå‰ç§»</span>
        <span class="hljs-keyword">if</span> (tail) {
            tail-&gt;next = <span class="hljs-literal">nullptr</span>; <span class="hljs-comment">// æ–°å°¾èŠ‚ç‚¹çš„nextç½®ç©º</span>
        } <span class="hljs-keyword">else</span> {
            head = <span class="hljs-literal">nullptr</span>;       <span class="hljs-comment">// é“¾è¡¨å˜ç©ºï¼Œå¤´æŒ‡é’ˆä¹Ÿç½®ç©º</span>
        }
    }
    <span class="hljs-comment">// æƒ…å†µ3ï¼šåˆ é™¤ä¸­é—´èŠ‚ç‚¹</span>
    <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è·³è¿‡è¦åˆ é™¤çš„èŠ‚ç‚¹</span>
        target-&gt;prev-&gt;next = target-&gt;next;
        target-&gt;next-&gt;prev = target-&gt;prev;
    }
    
    <span class="hljs-keyword">delete</span> target;  <span class="hljs-comment">// é‡Šæ”¾å†…å­˜</span>
}
</code></pre>
<h4 data-id="heading-24">å›¾è§£åˆ é™¤è¿‡ç¨‹</h4>
<pre><code class="hljs language-css" lang="css">åˆ é™¤ä¸­é—´èŠ‚ç‚¹<span class="hljs-selector-tag">B</span>ï¼š<span class="hljs-selector-tag">A</span> &lt;-&gt; <span class="hljs-selector-tag">B</span> &lt;-&gt; C

æ­¥éª¤<span class="hljs-number">1</span>ï¼š<span class="hljs-selector-tag">A</span>-&gt;next = C
<span class="hljs-selector-tag">A</span> &lt;-&gt; C  <span class="hljs-selector-tag">B</span> &lt;-&gt; C

æ­¥éª¤<span class="hljs-number">2</span>ï¼šC-&gt;prev = <span class="hljs-selector-tag">A</span>
<span class="hljs-selector-tag">A</span> &lt;-&gt; C  <span class="hljs-selector-tag">B</span>å­¤ç«‹

æ­¥éª¤<span class="hljs-number">3</span>ï¼šdelete <span class="hljs-selector-tag">B</span>
<span class="hljs-selector-tag">A</span> &lt;-&gt; C
</code></pre>
<h4 data-id="heading-25">åˆ é™¤æ“ä½œçš„æ³¨æ„äº‹é¡¹</h4>
<ol>
<li>
<p><strong>æ›´æ–°ç›¸é‚»èŠ‚ç‚¹çš„æŒ‡é’ˆ</strong>ï¼š</p>
<ul>
<li>å‰é©±èŠ‚ç‚¹çš„nextæŒ‡å‘åç»§èŠ‚ç‚¹</li>
<li>åç»§èŠ‚ç‚¹çš„prevæŒ‡å‘å‰é©±èŠ‚ç‚¹</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†è¾¹ç•Œæƒ…å†µ</strong>ï¼š</p>
<ul>
<li>åˆ é™¤å¤´èŠ‚ç‚¹ï¼šæ›´æ–°headæŒ‡é’ˆ</li>
<li>åˆ é™¤å°¾èŠ‚ç‚¹ï¼šæ›´æ–°tailæŒ‡é’ˆ</li>
<li>åˆ é™¤å”¯ä¸€èŠ‚ç‚¹ï¼šheadå’Œtailéƒ½ç½®ç©º</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜ç®¡ç†</strong>ï¼šè®°å¾—deleteé‡Šæ”¾å†…å­˜</p>
</li>
</ol>
<h3 data-id="heading-26">3.5 æŒ‰å€¼åˆ é™¤</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deleteByValue</span><span class="hljs-params">(DListNode*&amp; head, DListNode*&amp; tail, <span class="hljs-type">int</span> val)</span> </span>{
    DListNode* curr = head;
    
    <span class="hljs-keyword">while</span> (curr) {
        <span class="hljs-keyword">if</span> (curr-&gt;val == val) {
            DListNode* toDelete = curr;
            curr = curr-&gt;next;  <span class="hljs-comment">// å…ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>
            
            <span class="hljs-built_in">deleteNode</span>(head, tail, toDelete);
        } <span class="hljs-keyword">else</span> {
            curr = curr-&gt;next;
        }
    }
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼šåœ¨åˆ é™¤èŠ‚ç‚¹å‰ï¼Œå…ˆä¿å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™åˆ é™¤åæ— æ³•ç»§ç»­éå†ã€‚</p>
<h2 data-id="heading-27">å››ã€é“¾è¡¨æ’åºï¼šå½’å¹¶æ’åºçš„å®ç°</h2>
<h3 data-id="heading-28">4.1 ä¸ºä»€ä¹ˆé“¾è¡¨æ’åºç”¨å½’å¹¶ï¼Ÿ</h3>
<p>é“¾è¡¨ä¸æ•°ç»„ä¸åŒï¼š</p>
<ol>
<li><strong>ä¸æ”¯æŒéšæœºè®¿é—®</strong>ï¼šä¸èƒ½åƒæ•°ç»„é‚£æ ·ç”¨ä¸‹æ ‡ç›´æ¥è®¿é—®ä»»æ„å…ƒç´ </li>
<li><strong>ç§»åŠ¨å…ƒç´ ä»£ä»·ä½</strong>ï¼šåªéœ€ä¿®æ”¹æŒ‡é’ˆï¼Œä¸éœ€è¦å¤åˆ¶æ•°æ®</li>
<li><strong>å½’å¹¶æ’åºç‰¹ç‚¹</strong>ï¼šé€‚åˆé¡ºåºè®¿é—®çš„æ•°æ®ç»“æ„</li>
</ol>
<h3 data-id="heading-29">4.2 å½’å¹¶æ’åºçš„å®Œæ•´å®ç°</h3>
<h4 data-id="heading-30">æ­¥éª¤1ï¼šæ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">getMiddle</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-keyword">if</span> (!head) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    
    ListNode* slow = head;
    ListNode* fast = head-&gt;next;  <span class="hljs-comment">// fastä»head-&gt;nextå¼€å§‹</span>
    
    <span class="hljs-comment">// fastèµ°ä¸¤æ­¥ï¼Œslowèµ°ä¸€æ­¥</span>
    <span class="hljs-keyword">while</span> (fast &amp;&amp; fast-&gt;next) {
        slow = slow-&gt;next;
        fast = fast-&gt;next-&gt;next;
    }
    
    <span class="hljs-keyword">return</span> slow;  <span class="hljs-comment">// slowæŒ‡å‘ä¸­é—´èŠ‚ç‚¹</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆfastä»head-&gt;nextå¼€å§‹ï¼Ÿ</strong></p>
<ul>
<li>å¯¹äºå¶æ•°ä¸ªèŠ‚ç‚¹ï¼š1-&gt;2-&gt;3-&gt;4</li>
<li>fastä»headå¼€å§‹ï¼šslowæŒ‡å‘3ï¼ˆç¬¬äºŒä¸ªä¸­é—´èŠ‚ç‚¹ï¼‰</li>
<li>fastä»head-&gt;nextå¼€å§‹ï¼šslowæŒ‡å‘2ï¼ˆç¬¬ä¸€ä¸ªä¸­é—´èŠ‚ç‚¹ï¼‰</li>
<li>æˆ‘ä»¬é€šå¸¸å¸Œæœ›åˆ†å‰²å¾—å°½é‡å‡åŒ€</li>
</ul>
<h4 data-id="heading-31">æ­¥éª¤2ï¼šé€’å½’æ’åº</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">mergeSort</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-comment">// é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šç©ºé“¾è¡¨æˆ–å•ä¸ªèŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (!head || !head-&gt;next) <span class="hljs-keyword">return</span> head;
    
    <span class="hljs-comment">// 1. æ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹å¹¶åˆ†å‰²</span>
    ListNode* mid = <span class="hljs-built_in">getMiddle</span>(head);
    ListNode* right = mid-&gt;next;
    mid-&gt;next = <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// å…³é”®ï¼šåˆ‡æ–­é“¾è¡¨</span>
    
    <span class="hljs-comment">// 2. é€’å½’æ’åºå·¦å³ä¸¤éƒ¨åˆ†</span>
    ListNode* leftSorted = <span class="hljs-built_in">mergeSort</span>(head);
    ListNode* rightSorted = <span class="hljs-built_in">mergeSort</span>(right);
    
    <span class="hljs-comment">// 3. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">merge</span>(leftSorted, rightSorted);
}
</code></pre>
<h4 data-id="heading-32">æ­¥éª¤3ï¼šåˆå¹¶æœ‰åºé“¾è¡¨</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">merge</span><span class="hljs-params">(ListNode* l1, ListNode* l2)</span> </span>{
    <span class="hljs-function">ListNode <span class="hljs-title">dummy</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>;  <span class="hljs-comment">// å“‘èŠ‚ç‚¹ï¼Œç®€åŒ–æ“ä½œ</span>
    ListNode* tail = &amp;dummy;
    
    <span class="hljs-comment">// æ¯”è¾ƒä¸¤ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œé€‰æ‹©è¾ƒå°çš„</span>
    <span class="hljs-keyword">while</span> (l1 &amp;&amp; l2) {
        <span class="hljs-keyword">if</span> (l1-&gt;val &lt; l2-&gt;val) {
            tail-&gt;next = l1;
            l1 = l1-&gt;next;
        } <span class="hljs-keyword">else</span> {
            tail-&gt;next = l2;
            l2 = l2-&gt;next;
        }
        tail = tail-&gt;next;
    }
    
    <span class="hljs-comment">// è¿æ¥å‰©ä½™éƒ¨åˆ†</span>
    tail-&gt;next = l1 ? l1 : l2;
    
    <span class="hljs-keyword">return</span> dummy.next;
}
</code></pre>
<h3 data-id="heading-33">4.3 æ—¶é—´å¤æ‚åº¦åˆ†æ</h3>
<ol>
<li>
<p><strong>åˆ†å‰²é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡åˆ†å‰²éœ€è¦æ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹ï¼šO(n)</li>
<li>å…±åˆ†å‰²logâ‚‚næ¬¡</li>
<li>æ€»åˆ†å‰²æ—¶é—´ï¼šO(n log n)</li>
</ul>
</li>
<li>
<p><strong>åˆå¹¶é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡åˆå¹¶éœ€è¦éå†æ‰€æœ‰èŠ‚ç‚¹ï¼šO(n)</li>
<li>å…±åˆå¹¶logâ‚‚næ¬¡</li>
<li>æ€»åˆå¹¶æ—¶é—´ï¼šO(n log n)</li>
</ul>
</li>
</ol>
<p><strong>æ€»æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n log n)</p>
<p><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š</p>
<ul>
<li>é€’å½’æ ˆæ·±åº¦ï¼šO(log n)</li>
<li>ä¸éœ€è¦é¢å¤–æ•°ç»„ï¼šO(1)é¢å¤–ç©ºé—´</li>
</ul>
<h3 data-id="heading-34">4.4 å½’å¹¶æ’åºçš„å˜ç§ï¼šè‡ªåº•å‘ä¸Š</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">mergeSortBottomUp</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-keyword">if</span> (!head || !head-&gt;next) <span class="hljs-keyword">return</span> head;
    
    <span class="hljs-comment">// 1. è®¡ç®—é“¾è¡¨é•¿åº¦</span>
    <span class="hljs-type">int</span> length = <span class="hljs-number">0</span>;
    ListNode* curr = head;
    <span class="hljs-keyword">while</span> (curr) {
        length++;
        curr = curr-&gt;next;
    }
    
    <span class="hljs-function">ListNode <span class="hljs-title">dummy</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>;
    dummy.next = head;
    
    <span class="hljs-comment">// 2. ä»1å¼€å§‹ï¼Œæ¯æ¬¡åˆå¹¶ç›¸é‚»çš„å­é“¾è¡¨</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> step = <span class="hljs-number">1</span>; step &lt; length; step *= <span class="hljs-number">2</span>) {
        ListNode* prev = &amp;dummy;
        ListNode* curr = dummy.next;
        
        <span class="hljs-keyword">while</span> (curr) {
            <span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªå­é“¾è¡¨</span>
            ListNode* left = curr;
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; step &amp;&amp; curr-&gt;next; i++) {
                curr = curr-&gt;next;
            }
            
            <span class="hljs-comment">// è·å–ç¬¬äºŒä¸ªå­é“¾è¡¨</span>
            ListNode* right = curr-&gt;next;
            curr-&gt;next = <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// æ–­å¼€ç¬¬ä¸€ä¸ªå­é“¾è¡¨</span>
            curr = right;
            
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; step &amp;&amp; curr &amp;&amp; curr-&gt;next; i++) {
                curr = curr-&gt;next;
            }
            
            <span class="hljs-comment">// ä¿å­˜ä¸‹ä¸€ä¸ªå­é“¾è¡¨çš„èµ·å§‹ä½ç½®</span>
            ListNode* next = <span class="hljs-literal">nullptr</span>;
            <span class="hljs-keyword">if</span> (curr) {
                next = curr-&gt;next;
                curr-&gt;next = <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// æ–­å¼€ç¬¬äºŒä¸ªå­é“¾è¡¨</span>
            }
            
            <span class="hljs-comment">// åˆå¹¶ä¸¤ä¸ªå­é“¾è¡¨</span>
            ListNode* merged = <span class="hljs-built_in">merge</span>(left, right);
            
            <span class="hljs-comment">// è¿æ¥åˆ°å·²åˆå¹¶çš„éƒ¨åˆ†</span>
            prev-&gt;next = merged;
            <span class="hljs-keyword">while</span> (prev-&gt;next) {
                prev = prev-&gt;next;
            }
            
            <span class="hljs-comment">// ç»§ç»­å¤„ç†å‰©ä½™éƒ¨åˆ†</span>
            curr = next;
        }
    }
    
    <span class="hljs-keyword">return</span> dummy.next;
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šé¿å…é€’å½’ï¼Œç©ºé—´å¤æ‚åº¦O(1)</p>
<h2 data-id="heading-35">äº”ã€é“¾è¡¨å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-36">5.1 æ£€æµ‹ç¯ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">hasCycle</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-keyword">if</span> (!head || !head-&gt;next) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    
    ListNode* slow = head;
    ListNode* fast = head;
    
    <span class="hljs-keyword">while</span> (fast &amp;&amp; fast-&gt;next) {
        slow = slow-&gt;next;        <span class="hljs-comment">// æ…¢æŒ‡é’ˆèµ°ä¸€æ­¥</span>
        fast = fast-&gt;next-&gt;next;  <span class="hljs-comment">// å¿«æŒ‡é’ˆèµ°ä¸¤æ­¥</span>
        
        <span class="hljs-keyword">if</span> (slow == fast) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// ç›¸é‡è¯´æ˜æœ‰ç¯</span>
        }
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// å¿«æŒ‡é’ˆåˆ°è¾¾nullptrï¼Œè¯´æ˜æ— ç¯</span>
}
</code></pre>
<h3 data-id="heading-37">5.2 æ‰¾åˆ°ç¯çš„å…¥å£</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">detectCycle</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-keyword">if</span> (!head || !head-&gt;next) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    
    ListNode* slow = head;
    ListNode* fast = head;
    <span class="hljs-type">bool</span> hasCycle = <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­æ˜¯å¦æœ‰ç¯</span>
    <span class="hljs-keyword">while</span> (fast &amp;&amp; fast-&gt;next) {
        slow = slow-&gt;next;
        fast = fast-&gt;next-&gt;next;
        
        <span class="hljs-keyword">if</span> (slow == fast) {
            hasCycle = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">break</span>;
        }
    }
    
    <span class="hljs-keyword">if</span> (!hasCycle) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    
    <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ‰¾åˆ°ç¯çš„å…¥å£</span>
    slow = head;
    <span class="hljs-keyword">while</span> (slow != fast) {
        slow = slow-&gt;next;
        fast = fast-&gt;next;
    }
    
    <span class="hljs-keyword">return</span> slow;
}
</code></pre>
<p><strong>åŸç†</strong>ï¼ˆFloydåˆ¤åœˆç®—æ³•ï¼‰ï¼š</p>
<ol>
<li>è®¾å¤´èŠ‚ç‚¹åˆ°ç¯å…¥å£è·ç¦»ä¸ºaï¼Œç¯é•¿åº¦ä¸ºb</li>
<li>ç¬¬ä¸€æ¬¡ç›¸é‡æ—¶ï¼Œæ…¢æŒ‡é’ˆèµ°äº†a + xï¼Œå¿«æŒ‡é’ˆèµ°äº†a + x + nb</li>
<li>ç”±å¿«æŒ‡é’ˆé€Ÿåº¦æ˜¯æ…¢æŒ‡é’ˆä¸¤å€ï¼š2(a + x) = a + x + nb</li>
<li>å¾—åˆ°ï¼ša = (n-1)b + (b - x)</li>
<li>è®©ä¸€ä¸ªæŒ‡é’ˆä»headå¼€å§‹ï¼Œä¸€ä¸ªä»ç›¸é‡ç‚¹å¼€å§‹ï¼Œæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œç›¸é‡ç‚¹å°±æ˜¯ç¯å…¥å£</li>
</ol>
<h3 data-id="heading-38">5.3 æ‰¾åˆ°å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">ListNode* <span class="hljs-title">findKthFromEnd</span><span class="hljs-params">(ListNode* head, <span class="hljs-type">int</span> k)</span> </span>{
    <span class="hljs-keyword">if</span> (!head || k &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    
    ListNode* fast = head;
    ListNode* slow = head;
    
    <span class="hljs-comment">// fastå…ˆèµ°kæ­¥</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; k; i++) {
        <span class="hljs-keyword">if</span> (!fast) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// kå¤§äºé“¾è¡¨é•¿åº¦</span>
        fast = fast-&gt;next;
    }
    
    <span class="hljs-comment">// fastå’Œslowä¸€èµ·èµ°</span>
    <span class="hljs-keyword">while</span> (fast) {
        slow = slow-&gt;next;
        fast = fast-&gt;next;
    }
    
    <span class="hljs-keyword">return</span> slow;
}
</code></pre>
<h3 data-id="heading-39">5.4 åˆ é™¤é‡å¤èŠ‚ç‚¹</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </span>
<span class="hljs-function">ListNode* <span class="hljs-title">deleteDuplicates</span><span class="hljs-params">(ListNode* head)</span> </span>{
    <span class="hljs-keyword">if</span> (!head) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    
    ListNode* curr = head;
    
    <span class="hljs-keyword">while</span> (curr &amp;&amp; curr-&gt;next) {
        <span class="hljs-keyword">if</span> (curr-&gt;val == curr-&gt;next-&gt;val) {
            ListNode* toDelete = curr-&gt;next;
            curr-&gt;next = curr-&gt;next-&gt;next;
            <span class="hljs-keyword">delete</span> toDelete;
        } <span class="hljs-keyword">else</span> {
            curr = curr-&gt;next;
        }
    }
    
    <span class="hljs-keyword">return</span> head;
}
</code></pre>
<h2 data-id="heading-40">å…­ã€é“¾è¡¨æ“ä½œçš„å¸¸è§é”™è¯¯</h2>
<h3 data-id="heading-41">6.1 æŒ‡é’ˆæœªåˆå§‹åŒ–</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// é”™è¯¯</span>
ListNode* ptr;
cout &lt;&lt; ptr-&gt;val;  <span class="hljs-comment">// è®¿é—®éšæœºå†…å­˜ï¼Œæ®µé”™è¯¯</span>

<span class="hljs-comment">// æ­£ç¡®</span>
ListNode* ptr = <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// æˆ– = new ListNode(0)</span>
</code></pre>
<h3 data-id="heading-42">6.2 è®¿é—®å·²é‡Šæ”¾çš„å†…å­˜</h3>
<pre><code class="hljs language-cpp" lang="cpp">ListNode* node = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(<span class="hljs-number">1</span>);
<span class="hljs-keyword">delete</span> node;
cout &lt;&lt; node-&gt;val;  <span class="hljs-comment">// é”™è¯¯ï¼šè®¿é—®å·²é‡Šæ”¾çš„å†…å­˜</span>
</code></pre>
<h3 data-id="heading-43">6.3 å¿˜è®°æ–­å¼€è¿æ¥ï¼ˆå½¢æˆç¯ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åè½¬é“¾è¡¨æ—¶å¿˜è®°æ–­å¼€åŸè¿æ¥</span>
ListNode* newHead = <span class="hljs-built_in">reverse</span>(head);
<span class="hljs-comment">// å¦‚æœåŸé“¾è¡¨æ²¡æœ‰æ­£ç¡®æ–­å¼€ï¼Œå¯èƒ½å½¢æˆç¯</span>
</code></pre>
<h3 data-id="heading-44">6.4 ä¸¢å¤±å¤´æŒ‡é’ˆ</h3>
<pre><code class="hljs language-cpp" lang="cpp">ListNode* head = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ListNode</span>(<span class="hljs-number">1</span>);
head = head-&gt;next;  <span class="hljs-comment">// ä¸¢å¤±äº†åŸå¤´èŠ‚ç‚¹ï¼Œå†…å­˜æ³„æ¼</span>
</code></pre>
<h2 data-id="heading-45">ä¸ƒã€é“¾è¡¨ä¸æ•°ç»„çš„å¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>æ•°ç»„</th><th>é“¾è¡¨</th></tr></thead><tbody><tr><td><strong>å†…å­˜åˆ†é…</strong></td><td>è¿ç»­</td><td>ç¦»æ•£</td></tr><tr><td><strong>è®¿é—®æ–¹å¼</strong></td><td>éšæœºè®¿é—®</td><td>é¡ºåºè®¿é—®</td></tr><tr><td><strong>è®¿é—®æ—¶é—´</strong></td><td>O(1)</td><td>O(n)</td></tr><tr><td><strong>æ’å…¥/åˆ é™¤</strong></td><td>O(n)</td><td>O(1)ï¼ˆå·²çŸ¥ä½ç½®ï¼‰</td></tr><tr><td><strong>å†…å­˜ä½¿ç”¨</strong></td><td>å›ºå®šå¤§å°</td><td>åŠ¨æ€å¢é•¿</td></tr><tr><td><strong>ç¼“å­˜å‹å¥½</strong></td><td>æ˜¯</td><td>å¦</td></tr></tbody></table>
<p><strong>é€‰æ‹©åŸåˆ™</strong>ï¼š</p>
<ul>
<li>éœ€è¦å¿«é€Ÿéšæœºè®¿é—® â†’ æ•°ç»„</li>
<li>éœ€è¦é¢‘ç¹æ’å…¥/åˆ é™¤ â†’ é“¾è¡¨</li>
<li>å†…å­˜ä½¿ç”¨ä¸ç¡®å®š â†’ é“¾è¡¨</li>
<li>éœ€è¦ç¼“å­˜å‹å¥½ â†’ æ•°ç»„</li>
</ul>
<p>é“¾è¡¨æ“ä½œçš„æ ¸å¿ƒæ˜¯<strong>ç†è§£æŒ‡é’ˆå…³ç³»</strong>å’Œ<strong>ç®¡ç†å†…å­˜ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚æŒæ¡é“¾è¡¨çš„åŸºç¡€æ“ä½œåï¼Œå¤æ‚é—®é¢˜å¾€å¾€æ˜¯è¿™äº›åŸºç¡€æ“ä½œçš„ç»„åˆã€‚å¤šç»ƒä¹ ã€å¤šæ€è€ƒï¼Œæ‰èƒ½çœŸæ­£æŒæ¡é“¾è¡¨çš„ç²¾é«“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisé›†ç¾¤æ¶æ„è¯¦è§£ï¼šä»å•æœºåˆ°åˆ†å¸ƒå¼çš„æ‰©å±•ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7580564126403248178</link>    <guid>https://juejin.cn/post/7580564126403248178</guid>    <pubDate>2025-12-08T01:11:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580564126403248178" data-draft-id="7490815158190129178" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisé›†ç¾¤æ¶æ„è¯¦è§£ï¼šä»å•æœºåˆ°åˆ†å¸ƒå¼çš„æ‰©å±•ä¹‹è·¯"/> <meta itemprop="keywords" content="Redis,æ•°æ®åº“,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-08T01:11:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥"/> <meta itemprop="url" content="https://juejin.cn/user/446863555701561"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisé›†ç¾¤æ¶æ„è¯¦è§£ï¼šä»å•æœºåˆ°åˆ†å¸ƒå¼çš„æ‰©å±•ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/446863555701561/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T01:11:13.000Z" title="Mon Dec 08 2025 01:11:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¼•è¨€</h2>
<p>Redisï¼Œè¿™ä¸ªåå­—å¯¹äºè®¸å¤šå¼€å‘è€…æ¥è¯´å¹¶ä¸é™Œç”Ÿã€‚ä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œå®ƒä»¥ä½å»¶è¿Ÿå’Œæç®€è®¾è®¡èµ¢å¾—äº†æ— æ•°å¼€å‘è€…çš„é’çã€‚ç„¶è€Œï¼Œéšç€ä¸šåŠ¡è§„æ¨¡çš„å¢é•¿ï¼Œå•æœºRedisçš„å±€é™æ€§é€æ¸æš´éœ²ï¼Œåˆ†å¸ƒå¼é›†ç¾¤æ¶æ„åº”è¿è€Œç”Ÿã€‚è¿™ç¯‡æ–‡ç« çš„ç›®æ ‡è¯»è€…æ˜¯æœ‰1-2å¹´Rediså¼€å‘ç»éªŒçš„å¼€å‘è€…â€”â€”ä½ å¯èƒ½å·²ç»ç†Ÿç»ƒæŒæ¡äº†<code>SET</code>ã€<code>GET</code>è¿™äº›åŸºç¡€å‘½ä»¤ï¼Œä¹Ÿåœ¨å•æœºç¯å¢ƒä¸‹ä¼˜åŒ–è¿‡æ€§èƒ½ï¼Œä½†å¯¹äºå¦‚ä½•å°†Redisä»å•æœºæ‰©å±•åˆ°åˆ†å¸ƒå¼é›†ç¾¤ï¼Œæˆ–è®¸è¿˜æ„Ÿåˆ°æœ‰äº›è¿·é›¾é‡é‡ã€‚</p>
<p>ä»å•æœºåˆ°åˆ†å¸ƒå¼çš„æ¼”è¿›ï¼Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯å‡çº§çš„è¿‡ç¨‹ï¼Œæ›´æ˜¯ä¸ºè§£å†³å®é™…ä¸šåŠ¡ç—›ç‚¹è€Œç”Ÿçš„å¿…ç„¶é€‰æ‹©ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå•æœºRediså°±åƒä¸€è¾†è·‘è½¦ï¼Œé€Ÿåº¦å¿«ã€æ“æ§çµæ´»ï¼Œä½†è£…è½½èƒ½åŠ›æœ‰é™ï¼›è€Œé›†ç¾¤æ¶æ„åˆ™åƒä¸€æ”¯è½¦é˜Ÿï¼Œè™½ç„¶è°ƒåº¦å¤æ‚ï¼Œå´èƒ½æ‰¿è½½æ›´å¤šè´§ç‰©ï¼Œè·‘å¾—æ›´è¿œã€‚Redisä»æœ€åˆçš„å•æœºæ¨¡å¼ï¼Œåˆ°æ”¯æŒä¸»ä»å¤åˆ¶ã€å“¨å…µæœºåˆ¶ï¼Œå†åˆ°å¦‚ä»Šçš„Redis Clusterï¼Œæ¯ä¸€æ­¥éƒ½åœ¨è§£å†³å®¹é‡ã€æ€§èƒ½å’Œé«˜å¯ç”¨æ€§çš„éš¾é¢˜ã€‚é‚£ä¹ˆï¼Œè¿™æ¡æ‰©å±•ä¹‹è·¯ç©¶ç«Ÿæœ‰å“ªäº›å…³é”®èŠ‚ç‚¹ï¼Ÿæˆ‘ä»¬åˆè¯¥å¦‚ä½•åœ¨å®è·µä¸­é©¾é©­å®ƒï¼Ÿ</p>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä»å•æœºRedisçš„å±€é™æ€§è®²èµ·ï¼Œé€æ­¥å‰–æRedisé›†ç¾¤çš„æ ¸å¿ƒæ¦‚å¿µã€æ­å»ºæ–¹æ³•å’Œä¼˜åŒ–å®è·µã€‚å†…å®¹ä¸ä»…åŸºäºå®˜æ–¹æ–‡æ¡£å’ŒæŠ€æœ¯åŸç†ï¼Œæ›´èå…¥äº†æˆ‘10å¹´Rediså¼€å‘ç»éªŒä¸­çš„çœŸå®æ¡ˆä¾‹ã€‚æ¯”å¦‚ï¼Œæˆ‘æ›¾åœ¨ä¸€ä¸ªç”µå•†é¡¹ç›®ä¸­ï¼Œé¢å¯¹ç§’æ€æµé‡æ¿€å¢å¯¼è‡´å•æœºRediså†…å­˜çˆ†æ»¡çš„çª˜å¢ƒï¼Œæœ€ç»ˆé€šè¿‡é›†ç¾¤æ¶æ„åŒ–é™©ä¸ºå¤·ã€‚è¿™äº›ç»éªŒæ•™è®­ï¼Œå°†ä¸ºä½ æä¾›æ›´æ¥åœ°æ°”çš„å‚è€ƒã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¸€èµ·æ¢ç´¢Redisé›†ç¾¤çš„å¥¥ç§˜ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•ä»å•å…µä½œæˆ˜è¿›åŒ–åˆ°åˆ†å¸ƒå¼ååŒçš„å¼ºå¤§é˜µå®¹ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. å•æœºRedisçš„å±€é™æ€§ä¸åˆ†å¸ƒå¼éœ€æ±‚</h2>
<h3 data-id="heading-2">å•æœºRedisçš„ä¼˜åŠ¿ä¸ç“¶é¢ˆ</h3>
<p>Redisçš„å•æœºæ¨¡å¼ä¹‹æ‰€ä»¥å¹¿å—æ¬¢è¿ï¼Œç¦»ä¸å¼€å®ƒçš„å‡ ä¸ªæ˜¾è‘—ä¼˜åŠ¿ã€‚é¦–å…ˆæ˜¯<strong>ç®€å•</strong>ï¼šæ— éœ€å¤æ‚é…ç½®ï¼Œå®‰è£…åå³å¯ä½¿ç”¨ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿä¸Šæ‰‹ã€‚å…¶æ¬¡æ˜¯<strong>é«˜æ€§èƒ½</strong>ï¼šåŸºäºå†…å­˜æ“ä½œï¼Œå•çº¿ç¨‹æ¨¡å‹é¿å…äº†ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¯»å†™å»¶è¿Ÿé€šå¸¸åœ¨å¾®ç§’çº§åˆ«ã€‚æœ€åæ˜¯<strong>ä½å»¶è¿Ÿ</strong>ï¼šæ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œå“åº”é€Ÿåº¦è¿œè¶…ç£ç›˜æ•°æ®åº“ã€‚</p>
<p>ç„¶è€Œï¼Œå¤©ä¸‹æ²¡æœ‰å®Œç¾çš„æŠ€æœ¯ã€‚å•æœºRedisçš„ç“¶é¢ˆä¹ŸåŒæ ·æ˜æ˜¾ã€‚<strong>å†…å­˜å®¹é‡å—é™</strong>æ˜¯é¦–è¦é—®é¢˜â€”â€”ä¸€å°æœåŠ¡å™¨çš„å†…å­˜ç»ˆç©¶æœ‰é™ï¼Œå½“æ•°æ®é‡è¶…è¿‡ç‰©ç†ä¸Šé™æ—¶ï¼Œä½ åªèƒ½çœ¼çççœ‹ç€æ€§èƒ½ä¸‹é™ç”šè‡³å®•æœºã€‚<strong>å•ç‚¹æ•…éšœ</strong>æ˜¯å¦ä¸€ä¸ªéšæ‚£ï¼Œä¸€æ—¦æœåŠ¡å™¨å®•æœºï¼ŒæœåŠ¡å°±å½»åº•ä¸å¯ç”¨ã€‚æ­¤å¤–ï¼Œ<strong>QPSä¸Šé™</strong>ä¹Ÿä¸å®¹å¿½è§†ï¼Œå•çº¿ç¨‹æ¨¡å‹è™½ç„¶é«˜æ•ˆï¼Œä½†åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå•æœºçš„å¤„ç†èƒ½åŠ›è¿Ÿæ—©ä¼šè§¦ç¢°åˆ°å¤©èŠ±æ¿ã€‚</p>
<h3 data-id="heading-3">å®é™…åœºæ™¯ä¸¾ä¾‹</h3>
<p>æˆ‘æ›¾åœ¨æ—©æœŸçš„ä¸€ä¸ªç”µå•†ç§’æ€é¡¹ç›®ä¸­æ·±åˆ»ä½“ä¼šåˆ°è¿™äº›å±€é™æ€§ã€‚å½“æ—¶ï¼Œæˆ‘ä»¬ç”¨ä¸€å°16GBå†…å­˜çš„Rediså®ä¾‹å­˜å‚¨å•†å“åº“å­˜å’Œç”¨æˆ·è®¢å•æ•°æ®ã€‚ç§’æ€å¼€å§‹åï¼Œç¬æ—¶æµé‡æ¿€å¢ï¼Œå†…å­˜ä½¿ç”¨ç‡è¿…é€Ÿé£™å‡åˆ°100%ï¼Œç´§æ¥ç€Redisè¿›ç¨‹å´©æºƒï¼ŒæœåŠ¡ç›´æ¥ç˜«ç—ªã€‚äº‹ååˆ†æå‘ç°ï¼Œåº“å­˜Keyçš„é¢‘ç¹æ›´æ–°å’Œè®¢å•æ•°æ®çš„å¿«é€Ÿç´¯ç§¯ï¼Œè®©å•æœºRedisä¸å ªé‡è´Ÿã€‚è¿™æ¬¡äº‹æ•…è®©æˆ‘æ„è¯†åˆ°ï¼Œå•æœºæ¨¡å¼åœ¨é¢å¯¹å¤§è§„æ¨¡ã€é«˜å¹¶å‘åœºæ™¯æ—¶ï¼Œå®åœ¨æ˜¯â€œç‹¬æœ¨éš¾æ”¯â€ã€‚</p>
<h3 data-id="heading-4">åˆ†å¸ƒå¼éœ€æ±‚é©±åŠ¨</h3>
<p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ ·çš„éœ€æ±‚æ¨åŠ¨äº†Rediså‘åˆ†å¸ƒå¼æ¼”è¿›å‘¢ï¼Ÿé¦–å…ˆæ˜¯<strong>æ•°æ®é‡å¢é•¿</strong>ï¼šä¸šåŠ¡å‘å±•å¸¦æ¥ç”¨æˆ·å’Œæ•°æ®çš„æŒ‡æ•°çº§å¢åŠ ï¼Œå•æœºå†…å­˜å·²æ— æ³•æ»¡è¶³å­˜å‚¨éœ€æ±‚ã€‚å…¶æ¬¡æ˜¯<strong>é«˜å¯ç”¨æ€§è¦æ±‚</strong>ï¼šç°ä»£åº”ç”¨å¯¹æœåŠ¡ä¸­æ–­çš„å®¹å¿åº¦æä½ï¼Œå•ç‚¹æ•…éšœçš„é£é™©å¿…é¡»è¢«æ¶ˆé™¤ã€‚æœ€åæ˜¯<strong>è´Ÿè½½å‡è¡¡çš„å¿…è¦æ€§</strong>ï¼šå°†è¯·æ±‚åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œæ—¢èƒ½æå‡æ•´ä½“ååé‡ï¼Œåˆèƒ½é¿å…å•èŠ‚ç‚¹è¿‡è½½ã€‚</p>
<h3 data-id="heading-5">è¿‡æ¸¡åˆ°é›†ç¾¤çš„æ„ä¹‰</h3>
<p>ä»å•æœºåˆ°åˆ†å¸ƒå¼é›†ç¾¤çš„è½¬å˜ï¼Œä¸ä»…ä»…æ˜¯æŠ€æœ¯å±‚é¢çš„å‡çº§ï¼Œæ›´æ˜¯ä¸ºä¸šåŠ¡ä¿é©¾æŠ¤èˆªçš„å…³é”®ä¸€æ­¥ã€‚å°±åƒä»ç‹¬å¥è½¬å‘äº¤å“ä¹å›¢ï¼Œå•æœºRedisæ“…é•¿ç‹¬å½“ä¸€é¢ï¼Œè€Œé›†ç¾¤æ¶æ„åˆ™é€šè¿‡åä½œé‡Šæ”¾æ›´å¤§çš„æ½œåŠ›ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨Redis Clusterçš„æ ¸å¿ƒæ¦‚å¿µï¼Œçœ‹çœ‹å®ƒå¦‚ä½•é€šè¿‡åˆ†å¸ƒå¼è®¾è®¡è§£å†³è¿™äº›ç—›ç‚¹ï¼Œå¹¶ä¸ºç³»ç»Ÿæ‰©å±•æ‰“å¼€æ–°çš„å¯èƒ½æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-6">ç¤ºæ„å›¾ï¼šå•æœºRedisçš„ç“¶é¢ˆ</h3>

























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>å•æœºRedis</strong></th><th><strong>æ½œåœ¨é—®é¢˜</strong></th></tr></thead><tbody><tr><td>å†…å­˜å®¹é‡</td><td>å•æœºç‰©ç†å†…å­˜ä¸Šé™</td><td>æ•°æ®é‡è¶…é™å¯¼è‡´æº¢å‡ºæˆ–å®•æœº</td></tr><tr><td>å¯ç”¨æ€§</td><td>å•ç‚¹è¿è¡Œ</td><td>å®•æœºå³æœåŠ¡ä¸å¯ç”¨</td></tr><tr><td>æ€§èƒ½</td><td>å•çº¿ç¨‹QPSæœ‰é™</td><td>é«˜å¹¶å‘ä¸‹å“åº”å˜æ…¢</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">è¿‡æ¸¡æ®µ</h3>
<p>å•æœºRedisçš„å±€é™æ€§è®©æˆ‘ä»¬çœ‹åˆ°äº†åˆ†å¸ƒå¼æ¶æ„çš„å¿…è¦æ€§ï¼Œä½†å¦‚ä½•å®ç°è¿™ä¸€è·¨è¶Šå‘¢ï¼ŸRedis Clusterä½œä¸ºå®˜æ–¹æä¾›çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆï¼Œä»¥å…¶ç‹¬ç‰¹çš„è®¾è®¡å’Œå¼ºå¤§çš„åŠŸèƒ½ï¼Œæˆä¸ºäº†ä»å•æœºè¿ˆå‘åˆ†å¸ƒå¼çš„æ¡¥æ¢ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¯¦ç»†å‰–æå®ƒçš„æ ¸å¿ƒæ¦‚å¿µå’Œä¼˜åŠ¿ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªæ—¢çµæ´»åˆå¯é çš„å·¥å…·ç®±ã€‚</p>
<hr/>
<h2 data-id="heading-8">3. Redisé›†ç¾¤æ¶æ„çš„æ ¸å¿ƒæ¦‚å¿µä¸ä¼˜åŠ¿</h2>
<p>ä»å•æœºRedisçš„å±€é™æ€§ä¸­èµ°å‡ºæ¥ï¼ŒRedis Clusterä¸ºæˆ‘ä»¬æ‰“å¼€äº†ä¸€æ‰‡é€šå¾€åˆ†å¸ƒå¼ä¸–ç•Œçš„å¤§é—¨ã€‚å®ƒä¸ä»…è§£å†³äº†å®¹é‡å’Œå¯ç”¨æ€§çš„ç“¶é¢ˆï¼Œè¿˜å¸¦æ¥äº†çµæ´»æ‰©å±•çš„èƒ½åŠ›ã€‚é‚£ä¹ˆï¼ŒRedis Clusterç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›æ ¸å¿ƒä¼˜åŠ¿ï¼Ÿåˆå¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­å‘æŒ¥ä½œç”¨ï¼Ÿè®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ­å¼€å®ƒçš„é¢çº±ã€‚</p>
<h3 data-id="heading-9">Redis Clusterç®€ä»‹</h3>
<p>Redis Clusteræ˜¯Rediså®˜æ–¹æä¾›çš„åˆ†å¸ƒå¼å®ç°ï¼Œé¦–æ¬¡äº®ç›¸äºRedis 3.0ç‰ˆæœ¬ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡<strong>æ•°æ®åˆ†ç‰‡ï¼ˆShardingï¼‰<strong>å°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œä»è€Œçªç ´å•æœºå†…å­˜å’Œæ€§èƒ½çš„é™åˆ¶ã€‚Redis Clusterå°†æ•´ä¸ªæ•°æ®ç©ºé—´åˆ’åˆ†ä¸º</strong>16384ä¸ªæ§½ï¼ˆslotï¼‰</strong>ï¼Œæ¯ä¸ªæ§½è´Ÿè´£å­˜å‚¨ä¸€éƒ¨åˆ†é”®å€¼å¯¹ã€‚æ¯ä¸ªèŠ‚ç‚¹åˆ™è¢«åˆ†é…è‹¥å¹²æ§½ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å®ç°æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ã€‚</p>
<p>å½¢è±¡åœ°è¯´ï¼ŒRedis Clusterå°±åƒä¸€ä¸ªå·¨å¤§çš„å›¾ä¹¦é¦†ï¼Œ16384ä¸ªæ§½æ˜¯ä¹¦æ¶ä¸Šçš„æ ¼å­ï¼Œè€Œæ¯ä¸ªèŠ‚ç‚¹åˆ™æ˜¯è´Ÿè´£ç®¡ç†ä¸€éƒ¨åˆ†æ ¼å­çš„ç®¡ç†å‘˜ã€‚å®¢æˆ·ç«¯é€šè¿‡é”®çš„å“ˆå¸Œå€¼æ‰¾åˆ°å¯¹åº”çš„æ§½ï¼Œå†å®šä½åˆ°å…·ä½“çš„èŠ‚ç‚¹å®Œæˆæ“ä½œã€‚è¿™ç§è®¾è®¡æ—¢ç®€å•åˆé«˜æ•ˆï¼Œé¿å…äº†ä¼ ç»Ÿä»£ç†æ¶æ„çš„å¤æ‚æ€§ã€‚</p>
<h3 data-id="heading-10">æ ¸å¿ƒä¼˜åŠ¿</h3>
<p>Redis Clusterçš„é­…åŠ›åœ¨äºå®ƒå¸¦æ¥çš„ä¸‰å¤§ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p><strong>æ°´å¹³æ‰©å±•</strong><br/>
å•æœºRedisçš„å®¹é‡å’Œæ€§èƒ½å—é™äºç¡¬ä»¶ï¼Œè€ŒRedis Clusteré€šè¿‡æ·»åŠ èŠ‚ç‚¹å°±èƒ½è½»æ¾æ‰©å±•ã€‚æ— è®ºæ˜¯æ•°æ®é‡ç¿»å€è¿˜æ˜¯å¹¶å‘è¯·æ±‚æ¿€å¢ï¼Œåªéœ€åŠ å…¥æ–°èŠ‚ç‚¹å¹¶é‡æ–°åˆ†é…æ§½ï¼Œå°±èƒ½è®©ç³»ç»Ÿâ€œé•¿å¤§â€ã€‚è¿™å°±åƒç»™è½¦é˜Ÿå¢åŠ è½¦è¾†ï¼Œè¿åŠ›è‡ªç„¶æå‡ã€‚</p>
</li>
<li>
<p><strong>é«˜å¯ç”¨æ€§</strong><br/>
Redis Clusteræ”¯æŒ<strong>ä¸»ä»å¤åˆ¶</strong>å’Œ<strong>æ•…éšœè½¬ç§»</strong>ã€‚æ¯ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ªä»èŠ‚ç‚¹ï¼Œå½“ä¸»èŠ‚ç‚¹å®•æœºæ—¶ï¼Œä»èŠ‚ç‚¹ä¼šè‡ªåŠ¨æ¥ç®¡ã€‚è¿™ç§æœºåˆ¶ç¡®ä¿äº†å³ä½¿éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆï¼ŒæœåŠ¡ä¾ç„¶å¯ç”¨ã€‚</p>
</li>
<li>
<p><strong>å»ä¸­å¿ƒåŒ–è®¾è®¡</strong><br/>
ä¸ä¸€äº›éœ€è¦ä»£ç†ï¼ˆProxyï¼‰åˆ†å‘çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸åŒï¼ŒRedis Clusteré‡‡ç”¨æ— ä»£ç†æ¶æ„ï¼Œå®¢æˆ·ç«¯ç›´æ¥ä¸èŠ‚ç‚¹é€šä¿¡ã€‚è¿™ç§è®¾è®¡å‡å°‘äº†ä¸­é—´å±‚å¼€é”€ï¼Œæå‡äº†æ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†ç»´æŠ¤å¤æ‚åº¦ã€‚</p>
</li>
</ol>
<h3 data-id="heading-11">ä¸å•æœºæ¨¡å¼çš„å¯¹æ¯”</h3>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£Redis Clusterçš„ä»·å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹è¡¨å¯¹æ¯”å•æœºæ¨¡å¼å’Œé›†ç¾¤æ¨¡å¼ï¼š</p>






























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>å•æœºRedis</strong></th><th><strong>Redis Cluster</strong></th></tr></thead><tbody><tr><td>æ•°æ®å­˜å‚¨</td><td>é›†ä¸­åœ¨ä¸€å°æœºå™¨</td><td>åˆ†ç‰‡åˆ†å¸ƒå¤šä¸ªèŠ‚ç‚¹</td></tr><tr><td>å®¹é‡æ‰©å±•</td><td>å—é™äºå•æœºå†…å­˜</td><td>å¯é€šè¿‡åŠ èŠ‚ç‚¹æ— é™æ‰©å±•</td></tr><tr><td>å¯ç”¨æ€§</td><td>å•ç‚¹æ•…éšœå³ä¸å¯ç”¨</td><td>ä¸»ä»åˆ‡æ¢ä¿éšœé«˜å¯ç”¨</td></tr><tr><td>ç®¡ç†æ–¹å¼</td><td>ç®€å•é›†ä¸­å¼</td><td>åˆ†å¸ƒå¼ååŒï¼Œç¨å¤æ‚</td></tr></tbody></table>
<p>å•æœºæ¨¡å¼åƒç‹¬å¥ä¹æ‰‹ï¼Œç®€å•é«˜æ•ˆä½†èƒ½åŠ›æœ‰é™ï¼›é›†ç¾¤æ¨¡å¼åˆ™åƒäº¤å“ä¹å›¢ï¼Œåä½œå¸¦æ¥æ›´å¤§çš„èˆå°ã€‚</p>
<h3 data-id="heading-12">ç‰¹è‰²åŠŸèƒ½è§£æ</h3>
<p>Redis Clusterä¸ä»…æä¾›äº†åŸºç¡€çš„åˆ†ç‰‡èƒ½åŠ›ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹è‰²åŠŸèƒ½å€¼å¾—å…³æ³¨ï¼š</p>
<ul>
<li>
<p><strong>åŠ¨æ€æ‰©ç¼©å®¹</strong><br/>
ä½ å¯ä»¥åœ¨é›†ç¾¤è¿è¡Œæ—¶æ·»åŠ æˆ–åˆ é™¤èŠ‚ç‚¹ï¼Œæ§½ä¼šè‡ªåŠ¨è¿ç§»åˆ°æ–°èŠ‚ç‚¹æˆ–ä»æ—§èŠ‚ç‚¹ç§»é™¤ã€‚è¿™ç§åœ¨çº¿æ“ä½œè®©æ‰©å®¹å˜å¾—â€œä¸æ»‘â€ï¼Œæ— éœ€åœæœºã€‚</p>
</li>
<li>
<p><strong>ä¸€è‡´æ€§å“ˆå¸Œä¸æ§½è¿ç§»</strong><br/>
Redis Clusterä½¿ç”¨å“ˆå¸Œæ§½è€Œéä¼ ç»Ÿä¸€è‡´æ€§å“ˆå¸Œã€‚é”®é€šè¿‡<code>CRC16(key) % 16384</code>è®¡ç®—æ§½ä½ç½®ï¼ŒèŠ‚ç‚¹å˜æ›´æ—¶åªéœ€è¿ç§»æ§½è€Œéå…¨éƒ¨æ•°æ®ã€‚è¿™ç§è®¾è®¡åœ¨æ‰©ç¼©å®¹æ—¶æå¤§å‡å°‘äº†æ•°æ®æ¬è¿æˆæœ¬ã€‚</p>
</li>
</ul>
<h3 data-id="heading-13">è¸©å‘ç»éªŒï¼šæ§½åˆ†é…ä¸å‡çš„æ•™è®­</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘æ›¾é‡åˆ°è¿‡æ§½åˆ†é…ä¸å‡å¯¼è‡´çš„çƒ­ç‚¹é—®é¢˜ã€‚å½“æ—¶åœ¨ä¸€ä¸ªå®æ—¶æ’è¡Œæ¦œç³»ç»Ÿä¸­ï¼Œåˆå§‹é›†ç¾¤åªæœ‰3ä¸ªèŠ‚ç‚¹ï¼Œæ§½åˆ†é…é»˜è®¤å¹³å‡ï¼Œä½†æŸäº›é«˜é¢‘è®¿é—®çš„é”®é›†ä¸­è½åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯¼è‡´è¯¥èŠ‚ç‚¹è´Ÿè½½è¿‡é«˜ï¼Œå»¶è¿Ÿé£™å‡ã€‚<br/>
<strong>è§£å†³åŠæ³•</strong>ï¼šé€šè¿‡<code>redis-cli --cluster check</code>æ£€æŸ¥æ§½åˆ†å¸ƒï¼Œå‘ç°é—®é¢˜åæ‰‹åŠ¨æ‰§è¡Œ<code>CLUSTER ADDSLOTS</code>é‡æ–°åˆ†é…æ§½ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å¼•å…¥äº†ç›‘æ§å·¥å…·ï¼ˆå¦‚Prometheus+Grafanaï¼‰ï¼Œå®æ—¶è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„QPSå’Œå†…å­˜ä½¿ç”¨ç‡ï¼Œé¿å…ç±»ä¼¼é—®é¢˜å†æ¬¡å‘ç”Ÿã€‚<br/>
<strong>ç»éªŒæ•™è®­</strong>ï¼šé›†ç¾¤åˆå§‹åŒ–æ—¶ï¼Œåˆç†è§„åˆ’æ§½åˆ†é…å¹¶ç»“åˆä¸šåŠ¡ç‰¹ç‚¹é¢„ç•™å†—ä½™ï¼Œèƒ½æœ‰æ•ˆé¿å…çƒ­ç‚¹é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-14">ç¤ºæ„å›¾ï¼šRedis Clusteræ•°æ®åˆ†ç‰‡æœºåˆ¶</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[å®¢æˆ·ç«¯]</span> --&gt; <span class="hljs-selector-attr">[Key: <span class="hljs-string">"user:123"</span>]</span> --&gt; <span class="hljs-selector-attr">[CRC16(<span class="hljs-string">"user:123"</span>) % 16384 = Slot 4567]</span>
   |                                    |
   v                                    v
<span class="hljs-selector-attr">[Node A: Slot 0-5460]</span>         <span class="hljs-selector-attr">[Node B: Slot 5461-10922]</span> --&gt; å¤„ç†è¯·æ±‚
<span class="hljs-selector-attr">[Node C: Slot 10923-16383]</span>
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼šå®¢æˆ·ç«¯æ ¹æ®é”®è®¡ç®—æ§½å·ï¼Œå®šä½åˆ°å¯¹åº”èŠ‚ç‚¹å®Œæˆæ“ä½œã€‚</p>
<hr/>
<h3 data-id="heading-15">è¿‡æ¸¡æ®µ</h3>
<p>é€šè¿‡å¯¹Redis Clusteræ ¸å¿ƒæ¦‚å¿µçš„å‰–æï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œå®ƒä»¥åˆ†ç‰‡å’Œé«˜å¯ç”¨ä¸ºåŸºç¡€ï¼Œä¸ºåˆ†å¸ƒå¼æ‰©å±•é“ºå¹³äº†é“è·¯ã€‚ä½†å…‰æœ‰ç†è®ºè¿˜ä¸å¤Ÿï¼Œå¦‚ä½•åœ¨å®è·µä¸­æ­å»ºå¹¶é©¾é©­è¿™ä¸ªâ€œåˆ†å¸ƒå¼è½¦é˜Ÿâ€å‘¢ï¼Ÿä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨Redisé›†ç¾¤çš„æ­å»ºä¸é…ç½®ï¼Œç»“åˆå®é™…ä»£ç å’Œç»éªŒï¼Œå¸¦ä½ ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªå¥å£®çš„é›†ç¾¤ç¯å¢ƒã€‚</p>
<hr/>
<h2 data-id="heading-16">4. Redisé›†ç¾¤çš„æ­å»ºä¸é…ç½®</h2>
<p>äº†è§£äº†Redis Clusterçš„æ ¸å¿ƒæ¦‚å¿µå’Œä¼˜åŠ¿åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦æŠŠç†è®ºè½¬åŒ–ä¸ºå®è·µï¼Œäº²æ‰‹æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„é›†ç¾¤ã€‚Redisé›†ç¾¤çš„æ­å»ºå¹¶ä¸å¤æ‚ï¼Œä½†ç»†èŠ‚å†³å®šæˆè´¥ã€‚ä»ç¯å¢ƒå‡†å¤‡åˆ°é…ç½®ä¼˜åŒ–ï¼Œæ¯ä¸€æ­¥éƒ½éœ€è¦ç”¨å¿ƒã€‚æœ¬èŠ‚å°†å¸¦ä½ ä¸€æ­¥æ­¥å®Œæˆé›†ç¾¤æ­å»ºï¼Œå¹¶åˆ†äº«æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­çš„ç»éªŒæ•™è®­ï¼Œè®©ä½ å°‘èµ°å¼¯è·¯ã€‚</p>
<h3 data-id="heading-17">ç¯å¢ƒå‡†å¤‡</h3>
<p>åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œå…ˆåšå¥½åŠŸè¯¾ã€‚Redis Clusterå¯¹ç‰ˆæœ¬æœ‰è¦æ±‚ï¼Œå»ºè®®ä½¿ç”¨<strong>Redis 5.0æˆ–ä»¥ä¸Š</strong>ï¼Œå› ä¸ºæ–°ç‰ˆæœ¬åœ¨é›†ç¾¤ç®¡ç†å’Œç¨³å®šæ€§ä¸Šæœ‰äº†æ˜¾è‘—æ”¹è¿›ã€‚ç¡¬ä»¶æ–¹é¢ï¼Œè‡³å°‘éœ€è¦3å°æœåŠ¡å™¨ï¼ˆæˆ–è™šæ‹Ÿæœºï¼‰æ¥æ¨¡æ‹Ÿå¤šèŠ‚ç‚¹ç¯å¢ƒï¼Œæ¯å°å»ºè®®é…ç½®è‡³å°‘2GBå†…å­˜å’ŒåŒæ ¸CPUã€‚å¦‚æœæ˜¯æµ‹è¯•ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥åœ¨å•æœºä¸Šé€šè¿‡ä¸åŒç«¯å£æ¨¡æ‹Ÿå¤šä¸ªå®ä¾‹ã€‚</p>
<p>ä»¥æˆ‘çš„ç»éªŒä¸ºä¾‹ï¼Œåœ¨ä¸€ä¸ªä¸­å‹é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸ºé›†ç¾¤è§„åˆ’äº†6ä¸ªèŠ‚ç‚¹ï¼ˆ3ä¸»3ä»ï¼‰ï¼Œæ¯å°æœåŠ¡å™¨16GBå†…å­˜ï¼Œç¡®ä¿åˆæœŸæ•°æ®é‡å’ŒQPSéœ€æ±‚éƒ½èƒ½è½»æ¾åº”å¯¹ã€‚è¿™ç§è§„åˆ’ä¸ºåç»­æ‰©å®¹ç•™å‡ºäº†ç©ºé—´ã€‚</p>
<h3 data-id="heading-18">æ‰‹åŠ¨æ­å»ºé›†ç¾¤æ­¥éª¤</h3>
<p>å‡è®¾æˆ‘ä»¬ç”¨å•æœºå¤šç«¯å£çš„æ–¹å¼æ­å»ºä¸€ä¸ªå°å‹é›†ç¾¤ï¼ŒåŒ…å«3ä¸ªä¸»èŠ‚ç‚¹ï¼ˆç«¯å£7000-7002ï¼‰ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ï¼š</p>
<ol>
<li>
<p><strong>å¯åŠ¨å¤šä¸ªRediså®ä¾‹</strong><br/>
ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚<code>redis-7000.conf</code>ï¼‰ï¼Œå¹¶å¯åŠ¨å®ä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">redis-server redis-7000.conf
redis-server redis-7001.conf
redis-server redis-7002.conf
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨redis-cliåˆ›å»ºé›†ç¾¤</strong><br/>
Redisæä¾›äº†ä¸€ä¸ªä¾¿æ·çš„å·¥å…·<code>redis-cli --cluster</code>ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºé›†ç¾¤ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">redis-cli --cluster create 127.0.0.1:7000 127.0.0.1:7001 127.0.0.1:7002 --cluster-replicas 0
</code></pre>
<ul>
<li><strong>æ³¨é‡Šè¯´æ˜</strong>ï¼š
<ul>
<li><code>--cluster-replicas 0</code>ï¼šè¡¨ç¤ºæš‚ä¸é…ç½®ä»èŠ‚ç‚¹ï¼Œä»…æ­å»º3ä¸ªä¸»èŠ‚ç‚¹ã€‚</li>
<li>å‘½ä»¤æ‰§è¡Œåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†é…16384ä¸ªæ§½ï¼Œå¹¶æç¤ºç¡®è®¤åˆ†é…æ–¹æ¡ˆï¼Œè¾“å…¥<code>yes</code>å³å¯å®Œæˆã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>éªŒè¯é›†ç¾¤çŠ¶æ€</strong><br/>
æ£€æŸ¥é›†ç¾¤æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">redis-cli -p 7000 cluster info
</code></pre>
<p>è¾“å‡ºä¸­<code>cluster_state:ok</code>è¡¨ç¤ºé›†ç¾¤å·²å°±ç»ªã€‚</p>
</li>
</ol>
<h3 data-id="heading-19">é…ç½®æ–‡ä»¶è¯¦è§£</h3>
<p>Redis Clusterä¾èµ–å‡ ä¸ªå…³é”®é…ç½®å‚æ•°ï¼Œä»¥ä¸‹æ˜¯<code>redis-7000.conf</code>çš„ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">port 7000                # èŠ‚ç‚¹ç›‘å¬ç«¯å£
cluster-enabled yes      # å¯ç”¨é›†ç¾¤æ¨¡å¼
cluster-config-file nodes-7000.conf  # é›†ç¾¤æ‹“æ‰‘é…ç½®æ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆ
cluster-node-timeout 15000  # èŠ‚ç‚¹é—´é€šä¿¡è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
</code></pre>
<ul>
<li><strong><code>cluster-enabled</code></strong>ï¼šå¿…é¡»è®¾ä¸º<code>yes</code>ï¼Œå¦åˆ™èŠ‚ç‚¹ä»¥å•æœºæ¨¡å¼è¿è¡Œã€‚</li>
<li><strong><code>cluster-config-file</code></strong>ï¼šè®°å½•é›†ç¾¤çŠ¶æ€çš„æ–‡ä»¶ï¼Œæ¯æ¬¡èŠ‚ç‚¹å˜æ›´æ—¶è‡ªåŠ¨æ›´æ–°ã€‚</li>
<li><strong><code>cluster-node-timeout</code></strong>ï¼šè®¾ç½®è¿‡çŸ­å¯èƒ½å¯¼è‡´é¢‘ç¹è¯¯åˆ¤èŠ‚ç‚¹æ•…éšœï¼Œè¿‡é•¿åˆ™å½±å“æ•…éšœè½¬ç§»é€Ÿåº¦ï¼Œé»˜è®¤15000msæ˜¯ä¸ªæŠ˜ä¸­é€‰æ‹©ã€‚</li>
</ul>
<h3 data-id="heading-20">æœ€ä½³å®è·µ</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé›†ç¾¤æ­å»ºçš„æˆåŠŸä¸ä»…å–å†³äºæŠ€æœ¯å®ç°ï¼Œè¿˜éœ€è¦ä¸€äº›è§„åˆ’å’Œä¼˜åŒ–ï¼š</p>
<ul>
<li>
<p><strong>åˆå§‹èŠ‚ç‚¹æ•°è§„åˆ’</strong><br/>
æˆ‘æ›¾åœ¨ä¸€ä¸ªç¤¾äº¤å¹³å°é¡¹ç›®ä¸­åªéƒ¨ç½²äº†3ä¸ªèŠ‚ç‚¹ï¼Œç»“æœä¸åˆ°åŠå¹´å°±å› æ•°æ®é‡å¢é•¿éœ€è¦æ‰©å®¹ã€‚é¢‘ç¹æ‰©å®¹ä¸ä»…éº»çƒ¦ï¼Œè¿˜å¯èƒ½å¼•å‘æ§½è¿ç§»æ—¶çš„æ€§èƒ½æŠ–åŠ¨ã€‚<strong>å»ºè®®</strong>ï¼šæ ¹æ®ä¸šåŠ¡è§„æ¨¡é¢„ä¼°æœªæ¥6-12ä¸ªæœˆçš„éœ€æ±‚ï¼Œåˆå§‹éƒ¨ç½²è‡³å°‘6ä¸ªèŠ‚ç‚¹ï¼ˆ3ä¸»3ä»ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å·¥å…·è¾…åŠ©ç®¡ç†</strong><br/>
é™¤äº†<code>redis-cli</code>ï¼Œæ¨èä½¿ç”¨RedisInsightè¿™ç±»å¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥ç›´è§‚æŸ¥çœ‹æ§½åˆ†å¸ƒå’ŒèŠ‚ç‚¹çŠ¶æ€ï¼Œæå‡è¿ç»´æ•ˆç‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-21">è¸©å‘ç»éªŒï¼šæœªå¼€å¯AOFçš„æ•™è®­</h3>
<p>æœ‰ä¸€æ¬¡åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘å¿½ç•¥äº†AOFï¼ˆAppend Only Fileï¼‰çš„é…ç½®ï¼Œé»˜è®¤åªå¯ç”¨äº†RDBå¿«ç…§ã€‚ç»“æœä¸€å°ä¸»èŠ‚ç‚¹æ„å¤–å®•æœºé‡å¯åï¼Œä¸¢å¤±äº†æœ€è¿‘å‡ åˆ†é’Ÿçš„æ•°æ®ï¼Œå¯¼è‡´ç”¨æˆ·è®¢å•çŠ¶æ€å¼‚å¸¸ã€‚<br/>
<strong>è§£å†³åŠæ³•</strong>ï¼šåœ¨é›†ç¾¤é…ç½®æ–‡ä»¶ä¸­å¯ç”¨AOFï¼ˆ<code>appendonly yes</code>ï¼‰ï¼Œå¹¶å®šæœŸæ£€æŸ¥<code>appendfsync everysec</code>çš„åŒæ­¥ç­–ç•¥ï¼Œç¡®ä¿æ•°æ®æŒä¹…åŒ–ã€‚<br/>
<strong>ç»éªŒæ•™è®­</strong>ï¼šé›†ç¾¤çš„é«˜å¯ç”¨æ€§ä¸ç­‰äºæ•°æ®å®‰å…¨æ€§ï¼ŒRDBå’ŒAOFè¦åˆç†æ­é…ä½¿ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-22">ç¤ºä¾‹ä»£ç ï¼šæ£€æŸ¥é›†ç¾¤çŠ¶æ€</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥é›†ç¾¤åŸºæœ¬ä¿¡æ¯</span>
redis-cli -p 7000 cluster info
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># cluster_state:ok</span>
<span class="hljs-comment"># cluster_slots_assigned:16384</span>
<span class="hljs-comment"># cluster_known_nodes:3</span>

<span class="hljs-comment"># æŸ¥çœ‹æ§½åˆ†é…è¯¦æƒ…</span>
redis-cli -p 7000 cluster slots
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># 1) 1) (integer) 0</span>
<span class="hljs-comment">#    2) (integer) 5460</span>
<span class="hljs-comment">#    3) 1) "127.0.0.1"</span>
<span class="hljs-comment">#       2) (integer) 7000</span>
</code></pre>
<p><strong>æ³¨é‡Š</strong>ï¼š<code>cluster info</code>æ˜¾ç¤ºé›†ç¾¤æ•´ä½“çŠ¶æ€ï¼Œ<code>cluster slots</code>åˆ—å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„æ§½èŒƒå›´ã€‚</p>
<hr/>
<h3 data-id="heading-23">ç¤ºæ„å›¾ï¼šRedisé›†ç¾¤æ­å»ºæ¶æ„</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[Node 7000: Slot 0-5460]</span>    <span class="hljs-selector-attr">[Node 7001: Slot 5461-10922]</span>    <span class="hljs-selector-attr">[Node 7002: Slot 10923-16383]</span>
         |                           |                             |
         +---------------------------+-----------------------------+
         |                 redis-cli <span class="hljs-attr">--cluster</span> create              |
         +---------------------------------------------------------+
                     <span class="hljs-selector-attr">[å®¢æˆ·ç«¯ç›´æ¥è®¿é—®ä»»æ„èŠ‚ç‚¹]</span>
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š3ä¸ªèŠ‚ç‚¹é€šè¿‡<code>redis-cli</code>è¿æ¥ä¸ºé›†ç¾¤ï¼Œæ§½è‡ªåŠ¨åˆ†é…ã€‚</p>
<hr/>
<h3 data-id="heading-24">è¿‡æ¸¡æ®µ</h3>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä¸€ä¸ªåŸºæœ¬çš„Redisé›†ç¾¤å·²ç»æ­å»ºå®Œæˆã€‚ä½†ä»å•æœºåˆ°åˆ†å¸ƒå¼çš„æ—…ç¨‹è¿œæœªç»“æŸï¼Œé›†ç¾¤åªæ˜¯èµ·ç‚¹ï¼Œå¦‚ä½•å¹³æ»‘æ‰©å±•å¹¶åº”å¯¹å¤æ‚åœºæ™¯æ‰æ˜¯çœŸæ­£çš„æŒ‘æˆ˜ã€‚ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä»å•æœºåˆ°åˆ†å¸ƒå¼çš„å®Œæ•´æ‰©å±•è·¯å¾„ï¼Œç»“åˆçœŸå®æ¡ˆä¾‹å¸¦ä½ ä½“éªŒé›†ç¾¤åœ¨é¡¹ç›®ä¸­çš„å®æˆ˜åº”ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-25">5. ä»å•æœºåˆ°åˆ†å¸ƒå¼çš„æ‰©å±•å®è·µ</h2>
<p>æ­å»ºå¥½Redisé›†ç¾¤åªæ˜¯ä¸‡é‡Œé•¿å¾çš„ç¬¬ä¸€æ­¥ï¼Œå¦‚ä½•ä»å•æœºæ¨¡å¼å¹³æ»‘è¿‡æ¸¡åˆ°åˆ†å¸ƒå¼æ¶æ„ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­å‘æŒ¥å…¶ä»·å€¼ï¼Œæ‰æ˜¯å¼€å‘è€…éœ€è¦é¢å¯¹çš„çœŸæ­£è€ƒéªŒã€‚è¿™ä¸€èŠ‚ï¼Œæˆ‘å°†å¸¦ä½ èµ°ä¸€éä»å•æœºåˆ°åˆ†å¸ƒå¼çš„å®Œæ•´æ‰©å±•è·¯å¾„ï¼Œå¹¶ç»“åˆä¸¤ä¸ªçœŸå®é¡¹ç›®æ¡ˆä¾‹ï¼Œåˆ†äº«è¿ç§»æ­¥éª¤ã€ä¼˜åŒ–æ–¹æ¡ˆå’Œè¸©å‘ç»éªŒã€‚å¸Œæœ›è¿™äº›å®æˆ˜å†…å®¹èƒ½ä¸ºä½ æä¾›çµæ„Ÿã€‚</p>
<h3 data-id="heading-26">æ‰©å±•è·¯å¾„</h3>
<p>Redisçš„æ‰©å±•å¹¶éä¸€è¹´è€Œå°±ï¼Œè€Œæ˜¯åˆ†é˜¶æ®µæ¼”è¿›ï¼Œæ¯ä¸€æ­¥éƒ½é’ˆå¯¹ç‰¹å®šéœ€æ±‚ï¼š</p>
<ol>
<li>
<p><strong>å•æœºåˆ°ä¸»ä»</strong><br/>
å•æœºRedisæ€§èƒ½æœ‰é™æ—¶ï¼Œç¬¬ä¸€æ­¥é€šå¸¸æ˜¯é…ç½®ä¸»ä»å¤åˆ¶ã€‚ä¸»èŠ‚ç‚¹è´Ÿè´£å†™æ“ä½œï¼Œä»èŠ‚ç‚¹åˆ†æ‹…è¯»è¯·æ±‚ï¼Œæå‡è¯»æ€§èƒ½ã€‚é…ç½®ç®€å•ï¼Œåªéœ€åœ¨ä»èŠ‚ç‚¹é…ç½®æ–‡ä»¶ä¸­æ·»åŠ <code>replicaof &lt;master-ip&gt; &lt;master-port&gt;</code>ã€‚</p>
</li>
<li>
<p><strong>ä¸»ä»åˆ°å“¨å…µï¼ˆSentinelï¼‰</strong><br/>
ä¸»ä»æ¨¡å¼è§£å†³äº†è¯»å‹åŠ›ï¼Œä½†ä¸»èŠ‚ç‚¹å®•æœºä»ä¼šå¯¼è‡´æœåŠ¡ä¸­æ–­ã€‚å“¨å…µæ¨¡å¼é€šè¿‡å¤šä¸ªSentinelè¿›ç¨‹ç›‘æ§èŠ‚ç‚¹çŠ¶æ€ï¼Œå®ç°è‡ªåŠ¨æ•…éšœè½¬ç§»ã€‚é…ç½®å“¨å…µåªéœ€æŒ‡å®šä¸»èŠ‚ç‚¹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">sentinel monitor mymaster 127.0.0.1 6379 2
</code></pre>
</li>
<li>
<p><strong>å“¨å…µåˆ°é›†ç¾¤</strong><br/>
å½“æ•°æ®é‡å’Œå¹¶å‘é‡è¿›ä¸€æ­¥å¢é•¿ï¼Œå“¨å…µæ¨¡å¼ä»å—é™äºå•ä¸»èŠ‚ç‚¹çš„å®¹é‡ã€‚è¿™æ—¶ï¼ŒRedis Clusterç™»åœºï¼Œé€šè¿‡åˆ†ç‰‡è§£å†³å®¹é‡ç“¶é¢ˆï¼ŒåŒæ—¶ä¿ç•™é«˜å¯ç”¨æ€§ã€‚</p>
</li>
</ol>
<p><strong>è·¯å¾„ç¤ºæ„å›¾</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">å•æœº --&gt; <span class="hljs-selector-attr">[ä¸»ä»å¤åˆ¶]</span> --&gt; <span class="hljs-selector-attr">[å“¨å…µé«˜å¯ç”¨]</span> --&gt; <span class="hljs-selector-attr">[é›†ç¾¤åˆ†å¸ƒå¼]</span>
  |          |               |                 |
ç®€å•é«˜æ•ˆ   è¯»å†™åˆ†ç¦»       è‡ªåŠ¨æ•…éšœè½¬ç§»       å®¹é‡ä¸æ€§èƒ½æ‰©å±•
</code></pre>
<h3 data-id="heading-27">å®é™…é¡¹ç›®æ¡ˆä¾‹</h3>
<h4 data-id="heading-28">æ¡ˆä¾‹1ï¼šç¤¾äº¤å¹³å°ç”¨æˆ·ç¼“å­˜è¿ç§»</h4>
<p>åœ¨ä¸€ä¸ªç¤¾äº¤å¹³å°é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æœ€åˆä½¿ç”¨å•æœºRediså­˜å‚¨ç”¨æˆ·ä¼šè¯æ•°æ®ã€‚éšç€ç”¨æˆ·é‡ä»10ä¸‡å¢é•¿åˆ°100ä¸‡ï¼Œå•æœºå†…å­˜å‘Šæ€¥ï¼Œè¿ç§»åˆ°é›†ç¾¤åŠ¿åœ¨å¿…è¡Œã€‚<br/>
<strong>è¿ç§»æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><strong>æ•°æ®é¢„åˆ†ç‰‡</strong>ï¼šåœ¨æ–°é›†ç¾¤ä¸­é¢„å…ˆåˆ†é…æ§½ï¼Œè¿è¡Œè„šæœ¬å°†å•æœºæ•°æ®æŒ‰é”®å“ˆå¸Œåˆ†ç‰‡å¯¼å…¥ã€‚</li>
<li><strong>å®¢æˆ·ç«¯åˆ‡æ¢</strong>ï¼šæ›´æ–°Java Jediså®¢æˆ·ç«¯ä¸ºé›†ç¾¤æ¨¡å¼ï¼Œé€æ­¥åˆ‡æ¢æµé‡ã€‚<br/>
<strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.HostAndPort;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisCluster;
<span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JedisClusterExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Set&lt;HostAndPort&gt; nodes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        nodes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">7000</span>));
        nodes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">7001</span>));
        nodes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">7002</span>));

        <span class="hljs-keyword">try</span> (<span class="hljs-type">JedisCluster</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisCluster</span>(nodes)) {
            jedis.set(<span class="hljs-string">"user:123"</span>, <span class="hljs-string">"session_data"</span>);
            System.out.println(<span class="hljs-string">"Get user:123: "</span> + jedis.get(<span class="hljs-string">"user:123"</span>));
        }
    }
}
</code></pre>
<ul>
<li><strong>æ³¨é‡Š</strong>ï¼š<code>JedisCluster</code>è‡ªåŠ¨å¤„ç†æ§½å®šä½å’Œé‡å®šå‘ï¼Œå¼€å‘è€…æ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚<br/>
<strong>ç»“æœ</strong>ï¼šè¿ç§»åï¼Œç³»ç»Ÿå®¹é‡æå‡3å€ï¼Œå“åº”æ—¶é—´ç¨³å®šåœ¨1msä»¥å†…ã€‚</li>
</ul>
<h4 data-id="heading-29">æ¡ˆä¾‹2ï¼šå®æ—¶æ’è¡Œæ¦œç³»ç»Ÿä¼˜åŒ–</h4>
<p>åœ¨ä¸€ä¸ªæ¸¸æˆæ’è¡Œæ¦œç³»ç»Ÿä¸­ï¼Œå•æœºRediså› çƒ­ç‚¹Keyï¼ˆå¦‚å…¨å±€æ’è¡Œæ¦œï¼‰é¢‘ç¹æ›´æ–°è€Œæ€§èƒ½ä¸‹é™ã€‚æˆ‘ä»¬è¿ç§»åˆ°é›†ç¾¤å¹¶ä¼˜åŒ–çƒ­ç‚¹é—®é¢˜ã€‚<br/>
<strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>Keyåˆ†ç‰‡</strong>ï¼šå°†æ’è¡Œæ¦œæŒ‰ç”¨æˆ·IDåˆ†ç‰‡ï¼ˆå¦‚<code>rank:user:123</code>ï¼‰ï¼Œåˆ†æ•£åˆ°ä¸åŒæ§½ã€‚</li>
<li><strong>æœ¬åœ°ç¼“å­˜</strong>ï¼šå®¢æˆ·ç«¯å¼•å…¥Guava Cacheç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼Œå‡å°‘Redisè¯·æ±‚ã€‚<br/>
<strong>æ•ˆæœ</strong>ï¼šçƒ­ç‚¹èŠ‚ç‚¹QPSä»10ä¸‡é™åˆ°2ä¸‡ï¼Œæ•´ä½“æ€§èƒ½æå‡50%ã€‚</li>
</ol>
<h3 data-id="heading-30">è¸©å‘ç»éªŒ</h3>
<ol>
<li>
<p><strong>MOVED/ASKé‡å®šå‘é—®é¢˜</strong><br/>
åœ¨è¿ç§»åˆæœŸï¼Œéƒ¨åˆ†å®¢æˆ·ç«¯æœªæ­£ç¡®å¤„ç†é›†ç¾¤è¿”å›çš„<code>MOVED</code>æˆ–<code>ASK</code>é‡å®šå‘ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚<br/>
<strong>è§£å†³åŠæ³•</strong>ï¼šç¡®ä¿å®¢æˆ·ç«¯ï¼ˆå¦‚Jedisï¼‰æ”¯æŒé›†ç¾¤æ¨¡å¼ï¼Œå¹¶é…ç½®åˆç†çš„é‡è¯•ç­–ç•¥ã€‚<br/>
<strong>æ•™è®­</strong>ï¼šè¿ç§»å‰è¦å……åˆ†æµ‹è¯•å®¢æˆ·ç«¯å…¼å®¹æ€§ã€‚</p>
</li>
<li>
<p><strong>Pipelineä½¿ç”¨çš„æ³¨æ„äº‹é¡¹</strong><br/>
åœ¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼ŒPipelineæ— æ³•è·¨æ§½æ‰¹é‡æ“ä½œï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚<br/>
<strong>è§£å†³åŠæ³•</strong>ï¼šå°†Pipelineæ“ä½œæ‹†åˆ†ä¸ºå•æ§½è¯·æ±‚ï¼Œæˆ–æ”¹ç”¨Luaè„šæœ¬ã€‚<br/>
<strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- Luaè„šæœ¬ç¤ºä¾‹ï¼šæ‰¹é‡æ“ä½œåŒä¸€æ§½çš„é”®</span>
<span class="hljs-keyword">local</span> keys = KEYS
<span class="hljs-keyword">for</span> i, key <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(keys) <span class="hljs-keyword">do</span>
    redis.call(<span class="hljs-string">'SET'</span>, key, ARGV[i])
<span class="hljs-keyword">end</span>
<span class="hljs-keyword">return</span> <span class="hljs-string">"OK"</span>
</code></pre>
<ul>
<li><strong>æ³¨é‡Š</strong>ï¼šç¡®ä¿<code>KEYS</code>ä¸­çš„é”®å±äºåŒä¸€æ§½ï¼Œé¿å…è·¨æ§½é”™è¯¯ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-31">ç¤ºæ„å›¾ï¼šä»å•æœºåˆ°é›†ç¾¤çš„è¿ç§»</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[å•æœºRedis]</span> --&gt; <span class="hljs-selector-attr">[æ•°æ®å¯¼å‡º]</span> --&gt; <span class="hljs-selector-attr">[é›†ç¾¤é¢„åˆ†ç‰‡]</span> --&gt; <span class="hljs-selector-attr">[å®¢æˆ·ç«¯åˆ‡æ¢]</span> --&gt; <span class="hljs-selector-attr">[Redis Cluster]</span>
   |                |               |                 |                 |
å†…å­˜çˆ†æ»¡         åˆ†ç‰‡è„šæœ¬        æ§½åˆ†é…           JedisCluster      é«˜å¯ç”¨æ‰©å±•
</code></pre>
<hr/>
<h3 data-id="heading-32">å¯¹æ¯”è¡¨æ ¼ï¼šä¸åŒæ¨¡å¼çš„é€‚ç”¨åœºæ™¯</h3>



































<table><thead><tr><th><strong>æ¨¡å¼</strong></th><th><strong>ä¼˜ç‚¹</strong></th><th><strong>ç¼ºç‚¹</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th></tr></thead><tbody><tr><td>å•æœº</td><td>ç®€å•ã€é«˜æ€§èƒ½</td><td>å®¹é‡æœ‰é™ã€å•ç‚¹æ•…éšœ</td><td>å°å‹åº”ç”¨ã€æµ‹è¯•ç¯å¢ƒ</td></tr><tr><td>ä¸»ä»</td><td>è¯»å†™åˆ†ç¦»</td><td>ä¸»èŠ‚ç‚¹ä»æœ‰é™åˆ¶</td><td>ä¸­å‹è¯»å¤šå†™å°‘åœºæ™¯</td></tr><tr><td>å“¨å…µ</td><td>é«˜å¯ç”¨ã€è‡ªåŠ¨åˆ‡æ¢</td><td>å•ä¸»å®¹é‡ç“¶é¢ˆ</td><td>å¯¹å¯ç”¨æ€§è¦æ±‚é«˜çš„åº”ç”¨</td></tr><tr><td>é›†ç¾¤</td><td>åˆ†å¸ƒå¼ã€é«˜æ‰©å±•æ€§</td><td>é…ç½®ç¨å¤æ‚</td><td>å¤§è§„æ¨¡ã€é«˜å¹¶å‘ç³»ç»Ÿ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-33">è¿‡æ¸¡æ®µ</h3>
<p>é€šè¿‡ä»¥ä¸Šæ¡ˆä¾‹å’Œç»éªŒï¼Œæˆ‘ä»¬çœ‹åˆ°äº†Redisä»å•æœºåˆ°åˆ†å¸ƒå¼çš„æ‰©å±•è·¯å¾„ï¼Œæ—¢æœ‰æŠ€æœ¯çš„æ¸è¿›æ¼”åŒ–ï¼Œä¹Ÿæœ‰å®è·µä¸­çš„æ‘¸ç´¢ä¼˜åŒ–ã€‚ä½†é›†ç¾¤çš„æ½œåŠ›è¿œä¸æ­¢äºæ­¤ï¼Œå¦‚ä½•è¿›ä¸€æ­¥æŒ–æ˜å…¶é«˜çº§åŠŸèƒ½å¹¶ä¼˜åŒ–æ€§èƒ½ï¼Œå°†æ˜¯æˆ‘ä»¬ä¸‹ä¸€èŠ‚çš„é‡ç‚¹ã€‚è®©æˆ‘ä»¬ç»§ç»­æ¢ç´¢Redisé›†ç¾¤çš„é«˜çº§åº”ç”¨ä¸ä¼˜åŒ–æŠ€å·§ã€‚</p>
<hr/>
<h2 data-id="heading-34">6. Redisé›†ç¾¤çš„é«˜çº§åº”ç”¨ä¸ä¼˜åŒ–</h2>
<p>Redisé›†ç¾¤æ­å»ºå®Œæˆå¹¶æŠ•å…¥ä½¿ç”¨åï¼Œä»…ä»…æ˜¯è¿ˆå‡ºäº†åˆ†å¸ƒå¼å®è·µçš„ç¬¬ä¸€æ­¥ã€‚è¦çœŸæ­£å‘æŒ¥å®ƒçš„æ½œåŠ›ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é«˜çº§åŠŸèƒ½åº”ç”¨å’Œæ€§èƒ½ä¼˜åŒ–ä¸Šä¸‹åŠŸå¤«ã€‚è¿™ä¸€èŠ‚ï¼Œæˆ‘å°†åˆ†äº«ä¸€äº›é›†ç¾¤æ¨¡å¼ä¸‹çš„è¿›é˜¶ç”¨æ³•ã€ä¼˜åŒ–æŠ€å·§ä»¥åŠè¿ç»´ç»éªŒï¼Œå¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­å°†Redisé›†ç¾¤â€œè°ƒæ•™â€å¾—æ›´å‡ºè‰²ã€‚</p>
<h3 data-id="heading-35">é«˜çº§åŠŸèƒ½åº”ç”¨</h3>
<ol>
<li>
<p><strong>Luaè„šæœ¬åœ¨é›†ç¾¤ä¸­çš„ä½¿ç”¨ä¸é™åˆ¶</strong><br/>
Luaè„šæœ¬æ˜¯Redisçš„æ€æ‰‹é”ä¹‹ä¸€ï¼Œèƒ½åŸå­åŒ–æ‰§è¡Œå¤æ‚é€»è¾‘ã€‚ä½†åœ¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œè„šæœ¬ä¸­çš„æ‰€æœ‰é”®å¿…é¡»å±äºåŒä¸€æ§½ï¼Œå¦åˆ™ä¼šæŠ¥é”™<code>CROSSSLOT</code>ã€‚<br/>
<strong>è§£å†³åŠæ³•</strong>ï¼šä½¿ç”¨å“ˆå¸Œæ ‡ç­¾ï¼ˆHash Tagï¼‰ï¼Œå¦‚<code>{user}.name</code>å’Œ<code>{user}.score</code>ï¼Œç¡®ä¿é”®æ˜ å°„åˆ°åŒä¸€æ§½ã€‚<br/>
<strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- è®¾ç½®ç”¨æˆ·å§“åå’Œåˆ†æ•°ï¼Œç¡®ä¿åŒä¸€æ§½</span>
<span class="hljs-keyword">local</span> name_key = KEYS[<span class="hljs-number">1</span>]  <span class="hljs-comment">-- {user:123}.name</span>
<span class="hljs-keyword">local</span> score_key = KEYS[<span class="hljs-number">2</span>] <span class="hljs-comment">-- {user:123}.score</span>
redis.call(<span class="hljs-string">'SET'</span>, name_key, ARGV[<span class="hljs-number">1</span>])
redis.call(<span class="hljs-string">'SET'</span>, score_key, ARGV[<span class="hljs-number">2</span>])
<span class="hljs-keyword">return</span> <span class="hljs-string">"OK"</span>
</code></pre>
<ul>
<li><strong>æ³¨é‡Š</strong>ï¼šé€šè¿‡<code>{}</code>å®šä¹‰å“ˆå¸Œæ ‡ç­¾ï¼Œæ§åˆ¶æ§½åˆ†é…ã€‚</li>
</ul>
</li>
<li>
<p><strong>äº‹åŠ¡ï¼ˆMULTI/EXECï¼‰çš„æ›¿ä»£æ–¹æ¡ˆ</strong><br/>
é›†ç¾¤æ¨¡å¼ä¸æ”¯æŒè·¨æ§½çš„äº‹åŠ¡ï¼Œä¼ ç»Ÿçš„<code>MULTI/EXEC</code>å—é™ã€‚<br/>
<strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šå°†äº‹åŠ¡é€»è¾‘æ”¹ä¸ºLuaè„šæœ¬ï¼Œæˆ–é€šè¿‡å®¢æˆ·ç«¯åˆ†æ­¥æ“ä½œ+è¡¥å¿æœºåˆ¶å®ç°ã€‚<br/>
<strong>ç»éªŒ</strong>ï¼šå¯¹äºç®€å•é€»è¾‘ï¼Œä¼˜å…ˆé€‰æ‹©Luaï¼Œæ—¢é«˜æ•ˆåˆåŸå­åŒ–ã€‚</p>
</li>
</ol>
<h3 data-id="heading-36">æ€§èƒ½ä¼˜åŒ–</h3>
<ol>
<li>
<p><strong>æ‰¹é‡æ“ä½œå‡å°‘ç½‘ç»œå¼€é”€</strong><br/>
å•æ¬¡è¯·æ±‚çš„ç½‘ç»œå»¶è¿Ÿåœ¨é›†ç¾¤ä¸­ä¼šè¢«æ”¾å¤§ï¼Œæ‰¹é‡æ“ä½œæ˜¯ä¼˜åŒ–åˆ©å™¨ã€‚<br/>
<strong>å®è·µ</strong>ï¼šç”¨<code>MSET</code>æ›¿ä»£å¤šæ¬¡<code>SET</code>ï¼Œæˆ‘åœ¨ä¸€ä¸ªæ—¥å¿—ç³»ç»Ÿä¸­å°†å†™å…¥å»¶è¿Ÿä»5msé™åˆ°1msã€‚<br/>
<strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">redis-cli -p 7000 MSET key1 val1 key2 val2 key3 val3
</code></pre>
</li>
<li>
<p><strong>çƒ­ç‚¹Keyæ£€æµ‹ä¸åˆ†æ•£</strong><br/>
çƒ­ç‚¹Keyä¼šå¯¼è‡´æŸèŠ‚ç‚¹è´Ÿè½½è¿‡é«˜ã€‚<br/>
<strong>è§£å†³åŠæ³•</strong>ï¼š</p>
<ul>
<li>é€šè¿‡<code>redis-cli --hotkeys</code>æ£€æµ‹çƒ­ç‚¹ã€‚</li>
<li>å°†çƒ­ç‚¹Keyæ‹†åˆ†ä¸ºå¤šä¸ªå­Keyï¼ˆå¦‚<code>hotkey:part1</code>ã€<code>hotkey:part2</code>ï¼‰ï¼Œåˆ†æ•£è¯·æ±‚ã€‚<br/>
<strong>æ•ˆæœ</strong>ï¼šä¸€ä¸ªå®æ—¶ç»Ÿè®¡é¡¹ç›®ä¸­ï¼Œçƒ­ç‚¹èŠ‚ç‚¹QPSä»8ä¸‡é™åˆ°3ä¸‡ï¼Œè´Ÿè½½å‡è¡¡æ˜¾è‘—æ”¹å–„ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-37">ç›‘æ§ä¸è¿ç»´</h3>
<p>é›†ç¾¤çš„ç¨³å®šè¿è¡Œç¦»ä¸å¼€ç›‘æ§ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸ç”¨æŒ‡æ ‡å’Œå·¥å…·ï¼š</p>
<ul>
<li><strong>å…³é”®æŒ‡æ ‡</strong>ï¼š
<ul>
<li><strong>æ§½åˆ†å¸ƒ</strong>ï¼š<code>cluster slots</code>æ£€æŸ¥æ˜¯å¦å‡åŒ€ã€‚</li>
<li><strong>èŠ‚ç‚¹å»¶è¿Ÿ</strong>ï¼šé€šè¿‡<code>PING</code>æµ‹è¯•å“åº”æ—¶é—´ã€‚</li>
<li><strong>å†…å­˜ä½¿ç”¨ç‡</strong>ï¼š<code>INFO MEMORY</code>æŸ¥çœ‹<code>used_memory</code>ã€‚</li>
</ul>
</li>
<li><strong>ä»£ç ç¤ºä¾‹ï¼šPythonç›‘æ§è„šæœ¬</strong>ï¼š
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> redis

<span class="hljs-keyword">def</span> <span class="hljs-title function_">monitor_cluster</span>(<span class="hljs-params">host, port</span>):
    r = redis.Redis(host=host, port=port)
    cluster_info = r.cluster_info()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Cluster State: <span class="hljs-subst">{cluster_info[<span class="hljs-string">'cluster_state'</span>]}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Slots Assigned: <span class="hljs-subst">{cluster_info[<span class="hljs-string">'cluster_slots_assigned'</span>]}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Known Nodes: <span class="hljs-subst">{cluster_info[<span class="hljs-string">'cluster_known_nodes'</span>]}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    monitor_cluster(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">7000</span>)
</code></pre>
<ul>
<li><strong>æ³¨é‡Š</strong>ï¼šè„šæœ¬å®šæœŸæ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼Œå‘ç°å¼‚å¸¸åŠæ—¶å‘Šè­¦ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-38">æœ€ä½³å®è·µ</h3>
<ol>
<li>
<p><strong>é¢„åˆ†ç‰‡é™ä½æ‰©å®¹æˆæœ¬</strong><br/>
åœ¨ä¸€ä¸ªå¹¿å‘Šç³»ç»Ÿé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é¢„å…ˆéƒ¨ç½²äº†6ä¸ªèŠ‚ç‚¹ï¼Œä½†åªä½¿ç”¨3ä¸ªä¸»èŠ‚ç‚¹ï¼Œæ§½åˆ†é…ç•™æœ‰ä½™é‡ã€‚åæ¥æµé‡å¢é•¿æ—¶ï¼Œç›´æ¥å¯ç”¨å¤‡ç”¨èŠ‚ç‚¹ï¼Œè¿ç§»æˆæœ¬å‡ ä¹ä¸ºé›¶ã€‚<br/>
<strong>å»ºè®®</strong>ï¼šåˆæœŸå¤šéƒ¨ç½²èŠ‚ç‚¹ï¼Œæ§½åˆ†é…é¢„ç•™æ‰©å±•ç©ºé—´ã€‚</p>
</li>
<li>
<p><strong>è¸©å‘åˆ†äº«ï¼šè¿æ¥æ± é…ç½®å¤±è¯¯</strong><br/>
æœ‰ä¸€æ¬¡å› å®¢æˆ·ç«¯è¿æ¥æ± é…ç½®ä¸å½“ï¼ˆæœ€å¤§è¿æ¥æ•°è®¾ä¸º10ï¼‰ï¼Œé«˜å³°æœŸè¯·æ±‚æ’é˜Ÿå¯¼è‡´å»¶è¿Ÿæ¿€å¢ã€‚<br/>
<strong>è§£å†³åŠæ³•</strong>ï¼šè°ƒæ•´Jedisè¿æ¥æ± å‚æ•°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">JedisPoolConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPoolConfig</span>();
config.setMaxTotal(<span class="hljs-number">100</span>); <span class="hljs-comment">// æœ€å¤§è¿æ¥æ•°</span>
config.setMaxIdle(<span class="hljs-number">20</span>);   <span class="hljs-comment">// æœ€å¤§ç©ºé—²è¿æ¥</span>
</code></pre>
<p><strong>æ•™è®­</strong>ï¼šè¿æ¥æ± è¦æ ¹æ®QPSé¢„ä¼°åˆç†é…ç½®ï¼Œé¿å…æˆä¸ºç“¶é¢ˆã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-39">ç¤ºæ„å›¾ï¼šçƒ­ç‚¹Keyåˆ†æ•£ç­–ç•¥</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[çƒ­ç‚¹Key: <span class="hljs-string">"stats"</span>]</span> --&gt; åˆ†æ•£ä¸º --&gt; <span class="hljs-selector-attr">[stats:part1]</span> <span class="hljs-selector-attr">[stats:part2]</span> <span class="hljs-selector-attr">[stats:part3]</span>
      |                                 |           |           |
    é«˜è´Ÿè½½                            èŠ‚ç‚¹<span class="hljs-selector-tag">A</span>       èŠ‚ç‚¹<span class="hljs-selector-tag">B</span>       èŠ‚ç‚¹C
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼šå°†å•ä¸€çƒ­ç‚¹Keyæ‹†åˆ†ï¼Œè´Ÿè½½å‡åŒ€åˆ†å¸ƒåˆ°å¤šä¸ªèŠ‚ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-40">ä¼˜åŒ–æ•ˆæœå¯¹æ¯”è¡¨æ ¼</h3>





























<table><thead><tr><th><strong>ä¼˜åŒ–æ‰‹æ®µ</strong></th><th><strong>ä¼˜åŒ–å‰</strong></th><th><strong>ä¼˜åŒ–å</strong></th><th><strong>æ•ˆæœ</strong></th></tr></thead><tbody><tr><td>æ‰¹é‡æ“ä½œ</td><td>5ms/æ¬¡</td><td>1ms/æ¬¡</td><td>å»¶è¿Ÿé™ä½80%</td></tr><tr><td>çƒ­ç‚¹Keyåˆ†æ•£</td><td>å•èŠ‚ç‚¹8ä¸‡QPS</td><td>å„èŠ‚ç‚¹3ä¸‡QPS</td><td>è´Ÿè½½å‡è¡¡æå‡60%</td></tr><tr><td>é¢„åˆ†ç‰‡æ‰©å®¹</td><td>è¿ç§»è€—æ—¶2å°æ—¶</td><td>è¿ç§»è€—æ—¶5åˆ†é’Ÿ</td><td>æ‰©å®¹æ•ˆç‡æå‡95%</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-41">è¿‡æ¸¡æ®µ</h3>
<p>é€šè¿‡é«˜çº§åŠŸèƒ½å’Œä¼˜åŒ–æŠ€å·§ï¼ŒRedisé›†ç¾¤çš„æ€§èƒ½å’Œç¨³å®šæ€§å¾—åˆ°äº†è¿›ä¸€æ­¥æå‡ã€‚ä½†æŠ€æœ¯çš„ä»·å€¼æœ€ç»ˆä½“ç°åœ¨ä¸šåŠ¡æ”¯æŒä¸Šã€‚ä»å•æœºåˆ°åˆ†å¸ƒå¼çš„è¿™æ¡è·¯ï¼Œæˆ‘ä»¬å·²ç»èµ°äº†å¾ˆè¿œï¼Œæ¥ä¸‹æ¥æ˜¯æ—¶å€™æ€»ç»“ç»éªŒï¼Œå¹¶å±•æœ›Redisçš„æœªæ¥å‘å±•äº†ã€‚æœ€åä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†å›é¡¾è¿™æ®µæ—…ç¨‹ï¼Œå¹¶ç»™å‡ºå®è·µå»ºè®®ã€‚</p>
<hr/>
<h2 data-id="heading-42">7. æ€»ç»“ä¸å±•æœ›</h2>
<p>ä»å•æœºRedisçš„ç®€å•é«˜æ•ˆï¼Œåˆ°åˆ†å¸ƒå¼é›†ç¾¤çš„å¼ºå¤§æ‰©å±•ï¼Œæˆ‘ä»¬ä¸€è·¯èµ°æ¥ï¼Œè§è¯äº†Rediså¦‚ä½•ä»ä¸€åŒ¹ç‹¬ç‹¼è¿›åŒ–ä¸ºä¸€æ”¯ååŒä½œæˆ˜çš„ç‹¼ç¾¤ã€‚è¿™ç¯‡æ–‡ç« å¸¦ä½ ç©¿è¶Šäº†ä»å•æœºåˆ°åˆ†å¸ƒå¼çš„æŠ€æœ¯æ¼”è¿›ä¹‹è·¯ï¼Œå‰–æäº†Redis Clusterçš„æ ¸å¿ƒæ¦‚å¿µã€æ­å»ºæ–¹æ³•å’Œä¼˜åŒ–å®è·µã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœä¸‹è„šæ­¥ï¼Œå›é¡¾è¿™æ®µæ—…ç¨‹çš„æ”¶è·ï¼Œå¹¶å±•æœ›Redisåœ¨æœªæ¥çš„å¯èƒ½æ€§ã€‚</p>
<h3 data-id="heading-43">æ€»ç»“</h3>
<p>Redisé›†ç¾¤æ¶æ„çš„æ ¸å¿ƒä»·å€¼å¯ä»¥ç”¨ä¸‰ä¸ªè¯æ¦‚æ‹¬ï¼š<strong>é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯æ‰©å±•</strong>ã€‚å®ƒé€šè¿‡æ•°æ®åˆ†ç‰‡çªç ´äº†å•æœºå†…å­˜çš„é™åˆ¶ï¼Œç”¨ä¸»ä»å¤åˆ¶å’Œæ•…éšœè½¬ç§»ä¿éšœäº†æœåŠ¡çš„ç¨³å®šæ€§ï¼Œè¿˜ä»¥åŠ¨æ€æ‰©ç¼©å®¹ä¸ºä¸šåŠ¡å¢é•¿æä¾›äº†æ— é™å¯èƒ½ã€‚ä»å•æœºåˆ°ä¸»ä»ï¼Œå†åˆ°å“¨å…µå’Œé›†ç¾¤ï¼Œæ¯ä¸€æ­¥éƒ½åœ¨è§£å†³ç‰¹å®šçš„ç—›ç‚¹ï¼š</p>
<ul>
<li>å•æœºæ¨¡å¼é€‚åˆå°è§„æ¨¡å¿«é€Ÿå¼€å‘ï¼›</li>
<li>ä¸»ä»å¤åˆ¶åˆ†æ‹…è¯»å‹åŠ›ï¼›</li>
<li>å“¨å…µæ¨¡å¼æå‡å¯ç”¨æ€§ï¼›</li>
<li>é›†ç¾¤æ¨¡å¼åˆ™ä¸ºå¤§è§„æ¨¡ã€é«˜å¹¶å‘åœºæ™¯é‡èº«å®šåˆ¶ã€‚</li>
</ul>
<p>åœ¨æˆ‘çš„10å¹´Rediså¼€å‘ç»å†ä¸­ï¼Œä»æ—©æœŸå•æœºä¼˜åŒ–åˆ°å¦‚ä»Šé©¾é©­åˆ†å¸ƒå¼é›†ç¾¤ï¼Œæ¯ä¸€æ¬¡è½¬å‹éƒ½ä¼´éšç€ä¸šåŠ¡éœ€æ±‚çš„é©±åŠ¨å’ŒæŠ€æœ¯èƒ½åŠ›çš„æå‡ã€‚æ— è®ºæ˜¯ç¤¾äº¤å¹³å°çš„ç”¨æˆ·ç¼“å­˜ï¼Œè¿˜æ˜¯æ¸¸æˆç³»ç»Ÿçš„å®æ—¶æ’è¡Œæ¦œï¼ŒRedisé›†ç¾¤éƒ½ä»¥å…¶çµæ´»æ€§å’Œå¯é æ€§ï¼Œæˆä¸ºäº†ä¸å¯æˆ–ç¼ºçš„åŸºçŸ³ã€‚</p>
<h3 data-id="heading-44">å®è·µå»ºè®®</h3>
<p>åŸºäºè¿™äº›ç»éªŒï¼Œæˆ‘ä¸ºä¸åŒé˜¶æ®µçš„å¼€å‘è€…æå‡ ç‚¹å»ºè®®ï¼š</p>
<ol>
<li><strong>æ ¹æ®ä¸šåŠ¡è§„æ¨¡é€‰æ‹©æ¶æ„</strong>ï¼šå°å‹é¡¹ç›®ç”¨å•æœºæˆ–ä¸»ä»å³å¯ï¼Œä¸­å¤§å‹ç³»ç»Ÿå°½æ—©è§„åˆ’é›†ç¾¤ï¼Œé¿å…åæœŸè¿ç§»çš„éº»çƒ¦ã€‚</li>
<li><strong>å…³æ³¨ç»†èŠ‚ä¼˜åŒ–</strong>ï¼šæ§½åˆ†é…ã€çƒ­ç‚¹Keyã€è¿æ¥æ± é…ç½®ï¼Œè¿™äº›â€œå°äº‹â€å¾€å¾€å†³å®šé›†ç¾¤çš„æˆè´¥ã€‚</li>
<li><strong>æŒç»­å­¦ä¹ æ–°ç‰¹æ€§</strong>ï¼šRedis 7.0å¼•å…¥äº†å¤šçº¿ç¨‹I/Oå’Œæ›´å¼ºçš„é›†ç¾¤ç®¡ç†åŠŸèƒ½ï¼Œå€¼å¾—å…³æ³¨å’Œå°è¯•ã€‚</li>
</ol>
<h3 data-id="heading-45">å±•æœ›</h3>
<p>Redisçš„æœªæ¥å‘å±•ä¸äº‘åŸç”Ÿå’Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„è¶‹åŠ¿ç´§å¯†ç›¸è¿ã€‚éšç€å®¹å™¨åŒ–æŠ€æœ¯çš„æ™®åŠï¼ŒRedis Clusteråœ¨Kubernetesç­‰å¹³å°ä¸Šçš„éƒ¨ç½²å°†æ›´åŠ ä¾¿æ·ï¼Œè‡ªåŠ¨åŒ–è¿ç»´ä¹Ÿä¼šæˆä¸ºæ ‡é…ã€‚åŒæ—¶ï¼ŒRedisçš„æ¨¡å—åŒ–è®¾è®¡ï¼ˆå¦‚RedisJSONã€RedisGraphï¼‰è®©å®ƒä»å•çº¯çš„é”®å€¼å­˜å‚¨è¿›åŒ–æˆå¤šåŠŸèƒ½æ•°æ®å¹³å°ï¼Œåº”ç”¨åœºæ™¯å°†è¿›ä¸€æ­¥æ‹“å®½ã€‚<br/>
ä¸ªäººé¢„æµ‹ï¼Œæœªæ¥Rediså¯èƒ½ä¼šåœ¨è¾¹ç¼˜è®¡ç®—å’ŒAIæ¨ç†é¢†åŸŸå´­éœ²å¤´è§’ï¼Œæ¯”å¦‚é€šè¿‡å†…å­˜åŠ é€Ÿå®æ—¶æ¨¡å‹é¢„æµ‹ã€‚è¿™ä¸ä»…æ˜¯å¯¹æ€§èƒ½çš„æŒ‘æˆ˜ï¼Œä¹Ÿæ˜¯å¯¹åˆ†å¸ƒå¼æ¶æ„çš„æ–°è€ƒéªŒã€‚</p>
<h3 data-id="heading-46">ä¸ªäººå¿ƒå¾—</h3>
<p>ä½œä¸ºä¸€åRedisè€ç”¨æˆ·ï¼Œæˆ‘æœ€å¤§çš„æ„Ÿè§¦æ˜¯ï¼šæŠ€æœ¯æ²¡æœ‰é“¶å¼¹ï¼ŒRedisé›†ç¾¤è™½å¼ºå¤§ï¼Œä½†å¹¶éä¸‡èƒ½ã€‚å®ƒçš„æˆåŠŸåº”ç”¨ç¦»ä¸å¼€å¯¹ä¸šåŠ¡çš„æ·±åˆ»ç†è§£å’Œå¯¹ç»†èŠ‚çš„æè‡´è¿½æ±‚ã€‚æ¯æ¬¡è¸©å‘éƒ½æ˜¯ä¸€æ¬¡æˆé•¿ï¼Œæ¯”å¦‚çƒ­ç‚¹Keyçš„ä¼˜åŒ–è®©æˆ‘å­¦ä¼šäº†â€œåˆ†è€Œæ²»ä¹‹â€ï¼Œè€ŒAOFçš„æ•™è®­åˆ™æé†’æˆ‘â€œå®‰å…¨ç¬¬ä¸€â€ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½ä¸ºä½ ç‚¹äº®ä¸€ç›ç¯ï¼Œæ— è®ºæ˜¯åˆæ¢é›†ç¾¤è¿˜æ˜¯ä¼˜åŒ–ç°æœ‰ç³»ç»Ÿï¼Œéƒ½èƒ½å°‘èµ°å¼¯è·¯ï¼Œå¤šäº›ä¿¡å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-47">æ€»ç»“è¡¨æ ¼ï¼šRedisæ¼”è¿›è·¯å¾„ä»·å€¼</h3>






























<table><thead><tr><th><strong>é˜¶æ®µ</strong></th><th><strong>æ ¸å¿ƒä»·å€¼</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th></tr></thead><tbody><tr><td>å•æœº</td><td>ç®€å•é«˜æ•ˆ</td><td>å°å‹åº”ç”¨</td></tr><tr><td>ä¸»ä»</td><td>è¯»å†™åˆ†ç¦»</td><td>ä¸­å‹è¯»å¤šå†™å°‘ç³»ç»Ÿ</td></tr><tr><td>å“¨å…µ</td><td>é«˜å¯ç”¨æ€§</td><td>å¯¹ä¸­æ–­æ•æ„Ÿçš„åº”ç”¨</td></tr><tr><td>é›†ç¾¤</td><td>åˆ†å¸ƒå¼æ‰©å±•</td><td>å¤§è§„æ¨¡é«˜å¹¶å‘ç³»ç»Ÿ</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 å¹´ TC39 éƒ½åœ¨å¿™ä»€ä¹ˆï¼ŸImport Bytesã€Iterator Chunking æ¥äº†]]></title>    <link>https://juejin.cn/post/7581306080435322931</link>    <guid>https://juejin.cn/post/7581306080435322931</guid>    <pubDate>2025-12-08T14:27:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581306080435322931" data-draft-id="7581359420391800859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 å¹´ TC39 éƒ½åœ¨å¿™ä»€ä¹ˆï¼ŸImport Bytesã€Iterator Chunking æ¥äº†"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-08T14:27:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 å¹´ TC39 éƒ½åœ¨å¿™ä»€ä¹ˆï¼ŸImport Bytesã€Iterator Chunking æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T14:27:59.000Z" title="Mon Dec 08 2025 14:27:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TC39 2025ï¼šImport Bytesã€Iterator Chunking å’Œé‚£äº›å³å°†è½åœ°çš„æ–°ç‰¹æ€§</h2>
<p>å†™è·¨å¹³å°çš„ JS ä»£ç æ—¶ï¼Œè¯»ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶éƒ½å¾—å†™ä¸‰å¥—é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµè§ˆå™¨</span>
<span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'./photo.png'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">arrayBuffer</span>());

<span class="hljs-comment">// Node.js</span>
<span class="hljs-keyword">const</span> bytes = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>).<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'./photo.png'</span>);

<span class="hljs-comment">// Deno</span>
<span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Deno</span>.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'./photo.png'</span>);
</code></pre>
<p>åŒæ ·çš„éœ€æ±‚ï¼Œä¸‰ç§å†™æ³•ã€‚æƒ³å†™ä¸ªåŒæ„çš„å›¾ç‰‡å¤„ç†åº“ï¼Ÿå…ˆæŠŠè¿™ä¸‰å¥— API é€‚é…ä¸€éå†è¯´ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒTC39 åœ¨ 2025 å¹´æ¨è¿›äº†å¥½å‡ ä¸ªææ¡ˆæ¥è§£å†³è¿™ç±»é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« èŠèŠå…¶ä¸­æœ€å€¼å¾—å…³æ³¨çš„å‡ ä¸ªï¼šImport Bytesã€Iterator Chunkingï¼Œä»¥åŠä»Šå¹´å·²ç»è¿›å…¥ Stage 4 çš„æ–°ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-1">Import Bytesï¼šä¸€è¡Œä»£ç æå®šäºŒè¿›åˆ¶å¯¼å…¥</h3>
<h4 data-id="heading-2">ç°åœ¨æ˜¯ä»€ä¹ˆçŠ¶æ€</h4>
<p><strong>Stage 2.7</strong>ï¼ˆæˆªè‡³ 2025 å¹´ 9 æœˆï¼‰ï¼Œç¦»æ­£å¼æ ‡å‡†å°±å·®ä¸´é—¨ä¸€è„šäº†ã€‚ææ¡ˆè´Ÿè´£äººæ˜¯ Steven Salatï¼ŒGuy Bedford æ˜¯å…±åŒä½œè€…ã€‚</p>
<h4 data-id="heading-3">æ ¸å¿ƒè¯­æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> bytes <span class="hljs-keyword">from</span> <span class="hljs-string">"./photo.png"</span> <span class="hljs-keyword">with</span> { <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes"</span> };
<span class="hljs-comment">// bytes æ˜¯ Uint8Arrayï¼Œåº•å±‚æ˜¯ä¸å¯å˜çš„ ArrayBuffer</span>
</code></pre>
<p>åŠ¨æ€å¯¼å…¥ä¹Ÿæ”¯æŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"./photo.png"</span>, { <span class="hljs-attr">with</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes"</span> } });
</code></pre>
<p>å°±è¿™ä¹ˆç®€å•ã€‚ä¸ç®¡ä½ åœ¨æµè§ˆå™¨ã€Node.js è¿˜æ˜¯ Denoï¼ŒåŒä¸€è¡Œä»£ç ï¼ŒåŒæ ·çš„ç»“æœã€‚</p>
<h4 data-id="heading-4">ä¸ºä»€ä¹ˆè¿”å› Uint8Array è€Œä¸æ˜¯ ArrayBuffer</h4>
<p>ææ¡ˆé€‰æ‹©è¿”å› <code>Uint8Array</code> è€Œä¸æ˜¯è£¸çš„ <code>ArrayBuffer</code>ï¼Œç†ç”±æŒºå®åœ¨çš„ï¼š</p>
<ol>
<li><strong>å°‘ä¸€æ­¥æ“ä½œ</strong> - æ‹¿åˆ° ArrayBuffer ä½ è¿˜å¾—è‡ªå·±åˆ›å»º TypedViewï¼ŒUint8Array ç›´æ¥å°±èƒ½ç”¨</li>
<li><strong>è·Ÿç°æœ‰ API ä¿æŒä¸€è‡´</strong> - <code>Response.bytes()</code> å’Œ <code>Blob.bytes()</code> éƒ½è¿”å› Uint8Array</li>
<li><strong>Node.js Buffer å…¼å®¹</strong> - Buffer æœ¬èº«å°±æ˜¯ Uint8Array çš„å­ç±»</li>
</ol>
<h4 data-id="heading-5">ä¸ºä»€ä¹ˆåº•å±‚æ˜¯ä¸å¯å˜çš„ ArrayBuffer</h4>
<p>è¿™ä¸ªè®¾è®¡å†³å®šæŒºæœ‰æ„æ€çš„ã€‚åº•å±‚ ArrayBuffer è¢«è®¾è®¡æˆä¸å¯å˜çš„ï¼ŒåŸå› æœ‰ä¸‰ï¼š</p>
<ol>
<li><strong>é¿å…å…±äº«å¯å˜çŠ¶æ€</strong> - å¤šä¸ªæ¨¡å—å¯¼å…¥åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæ‹¿åˆ°çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœå¯å˜ï¼Œä¸€ä¸ªæ¨¡å—æ”¹äº†æ•°æ®ï¼Œå…¶ä»–æ¨¡å—å…¨å—å½±å“</li>
<li><strong>åµŒå…¥å¼åœºæ™¯</strong> - ä¸å¯å˜æ•°æ®å¯ä»¥ç›´æ¥æ”¾ ROM é‡Œ</li>
<li><strong>å®‰å…¨æ€§è€ƒè™‘</strong> - é˜²æ­¢æ¨¡å—é—´é€šè¿‡å…±äº« buffer å»ºç«‹éšè”½é€šä¿¡é€šé“</li>
</ol>
<h4 data-id="heading-6">å®é™…èƒ½å¹²ä»€ä¹ˆ</h4>
<p><strong>å›¾ç‰‡å¤„ç†</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> imageBytes <span class="hljs-keyword">from</span> <span class="hljs-string">"./logo.png"</span> <span class="hljs-keyword">with</span> { <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes"</span> };
<span class="hljs-comment">// ç”¨ satori ä¹‹ç±»çš„åŒæ„åº“å¤„ç†</span>
<span class="hljs-title function_">processImage</span>(imageBytes);
</code></pre>
<p><strong>åŠ è½½å­—ä½“</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> fontBytes <span class="hljs-keyword">from</span> <span class="hljs-string">"./custom.woff"</span> <span class="hljs-keyword">with</span> { <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes"</span> };
<span class="hljs-comment">// Canvas æˆ– PDF ç”Ÿæˆæ—¶ç”¨</span>
<span class="hljs-title function_">registerFont</span>(fontBytes);
</code></pre>
<p><strong>æœºå™¨å­¦ä¹ æ¨¡å‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> modelBytes <span class="hljs-keyword">from</span> <span class="hljs-string">"./model.bin"</span> <span class="hljs-keyword">with</span> { <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes"</span> };
<span class="hljs-title function_">loadModel</span>(modelBytes);
</code></pre>
<h4 data-id="heading-7">å·¥å…·é“¾æ”¯æŒ</h4>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼Œä¸»æµå·¥å…·å·²ç»åœ¨è·Ÿè¿›äº†ã€‚Deno 2.4ã€Bun 1.1.7 éƒ½æœ‰ç±»ä¼¼å®ç°ï¼ŒWebpackã€esbuildã€Parcel ä¹Ÿæ”¯æŒç±»ä¼¼çš„äºŒè¿›åˆ¶å¯¼å…¥æœºåˆ¶ã€‚ç­‰ææ¡ˆæ­£å¼è½åœ°ï¼Œç»Ÿä¸€è¯­æ³•åªæ˜¯æ—¶é—´é—®é¢˜ã€‚</p>
<h3 data-id="heading-8">Iterator Chunkingï¼šè¿­ä»£å™¨åˆ†å—ç»ˆäºæœ‰åŸç”Ÿæ–¹æ¡ˆäº†</h3>
<h4 data-id="heading-9">ç°åœ¨æ˜¯ä»€ä¹ˆçŠ¶æ€</h4>
<p><strong>Stage 2.7</strong>ï¼ˆæˆªè‡³ 2025 å¹´ 9 æœˆï¼‰ï¼Œç”± Michael Ficarra ä¸»å¯¼ã€‚</p>
<h4 data-id="heading-10">ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•</h4>
<p><strong>chunks(size) - éé‡å åˆ†å—</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>].<span class="hljs-title function_">values</span>();
<span class="hljs-keyword">const</span> chunked = numbers.<span class="hljs-title function_">chunks</span>(<span class="hljs-number">3</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> chunked) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chunk);
}
<span class="hljs-comment">// [1, 2, 3]</span>
<span class="hljs-comment">// [4, 5, 6]</span>
<span class="hljs-comment">// [7]</span>
</code></pre>
<p><strong>windows(size) - æ»‘åŠ¨çª—å£</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>].<span class="hljs-title function_">values</span>();
<span class="hljs-keyword">const</span> windowed = numbers.<span class="hljs-title function_">windows</span>(<span class="hljs-number">2</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-variable language_">window</span> <span class="hljs-keyword">of</span> windowed) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>);
}
<span class="hljs-comment">// [1, 2]</span>
<span class="hljs-comment">// [2, 3]</span>
<span class="hljs-comment">// [3, 4]</span>
</code></pre>
<p>åŒºåˆ«å¾ˆç›´è§‚ï¼šchunks æ˜¯åˆ‡æˆä¸€å—ä¸€å—äº’ä¸é‡å ï¼Œwindows æ˜¯æ»‘åŠ¨çª—å£æ¯æ¬¡ç§»åŠ¨ä¸€æ ¼ã€‚</p>
<h4 data-id="heading-11">è§£å†³ä»€ä¹ˆé—®é¢˜</h4>
<p>ä»¥å‰æƒ³åšåˆ†å—æ“ä½œï¼Œè¦ä¹ˆè‡ªå·±å†™ï¼Œè¦ä¹ˆå¼•å…¥ lodashï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// lodash æ–¹æ¡ˆ</span>
<span class="hljs-keyword">import</span> chunk <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash/chunk'</span>;
<span class="hljs-keyword">const</span> chunks = <span class="hljs-title function_">chunk</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], <span class="hljs-number">2</span>);

<span class="hljs-comment">// åŸç”Ÿæ–¹æ¡ˆ</span>
<span class="hljs-keyword">const</span> chunks = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>].<span class="hljs-title function_">values</span>().<span class="hljs-title function_">chunks</span>(<span class="hljs-number">2</span>);
</code></pre>
<p>åŸç”Ÿæ–¹æ¡ˆçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>ä¸ç”¨è£…ä¾èµ–</li>
<li>æƒ°æ€§æ±‚å€¼ï¼Œå†…å­˜å‹å¥½</li>
<li>è·Ÿæ•´ä¸ªè¿­ä»£å™¨ç”Ÿæ€æ— ç¼è¡”æ¥</li>
<li>æ”¯æŒå¼‚æ­¥è¿­ä»£å™¨</li>
</ul>
<h4 data-id="heading-12">å®é™…åœºæ™¯</h4>
<p><strong>æ‰¹é‡ API è¯·æ±‚</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">batchProcess</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-keyword">const</span> batches = items.<span class="hljs-title function_">values</span>().<span class="hljs-title function_">chunks</span>(<span class="hljs-number">50</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> batch <span class="hljs-keyword">of</span> batches) {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(batch.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> api.<span class="hljs-title function_">process</span>(item)));
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">1000</span>); <span class="hljs-comment">// é¿å…è§¦å‘é™æµ</span>
  }
}
</code></pre>
<p><strong>ç§»åŠ¨å¹³å‡è®¡ç®—</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">movingAverage</span>(<span class="hljs-params">numbers, windowSize</span>) {
  <span class="hljs-keyword">return</span> numbers
    .<span class="hljs-title function_">values</span>()
    .<span class="hljs-title function_">windows</span>(windowSize)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">w</span> =&gt;</span> w.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b) / windowSize)
    .<span class="hljs-title function_">toArray</span>();
}

<span class="hljs-keyword">const</span> prices = [<span class="hljs-number">100</span>, <span class="hljs-number">102</span>, <span class="hljs-number">98</span>, <span class="hljs-number">105</span>, <span class="hljs-number">103</span>, <span class="hljs-number">107</span>];
<span class="hljs-keyword">const</span> ma3 = <span class="hljs-title function_">movingAverage</span>(prices, <span class="hljs-number">3</span>);
<span class="hljs-comment">// 3æ—¥ç§»åŠ¨å¹³å‡</span>
</code></pre>
<p><strong>N-gram ç”Ÿæˆ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">generateNGrams</span>(<span class="hljs-params">text, n</span>) {
  <span class="hljs-keyword">const</span> words = text.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>);
  <span class="hljs-keyword">return</span> words.<span class="hljs-title function_">values</span>()
    .<span class="hljs-title function_">windows</span>(n)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">w</span> =&gt;</span> w.<span class="hljs-title function_">join</span>(<span class="hljs-string">' '</span>))
    .<span class="hljs-title function_">toArray</span>();
}

<span class="hljs-keyword">const</span> bigrams = <span class="hljs-title function_">generateNGrams</span>(<span class="hljs-string">"The quick brown fox"</span>, <span class="hljs-number">2</span>);
<span class="hljs-comment">// ["The quick", "quick brown", "brown fox"]</span>
</code></pre>
<h4 data-id="heading-13">è¾¹ç•Œæƒ…å†µçš„è®¨è®º</h4>
<p>è¿™ä¸ªææ¡ˆåœ¨æ¨è¿›è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜ï¼š<strong>å¦‚æœè¿­ä»£å™¨å…ƒç´ å°‘äºçª—å£å¤§å°ï¼Œwindows() åº”è¯¥è¿”å›ä»€ä¹ˆï¼Ÿ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> small = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>].<span class="hljs-title function_">values</span>();
<span class="hljs-keyword">const</span> result = small.<span class="hljs-title function_">windows</span>(<span class="hljs-number">3</span>); <span class="hljs-comment">// åªæœ‰2ä¸ªå…ƒç´ ï¼Œè¯·æ±‚3ä¸ªçš„çª—å£</span>

<span class="hljs-comment">// é€‰é¡¹1ï¼šä¸è¿”å›ä»»ä½•çª—å£</span>
<span class="hljs-comment">// é€‰é¡¹2ï¼šè¿”å› [1, 2] ä½œä¸ºä¸å®Œæ•´çª—å£</span>
</code></pre>
<p>å§”å‘˜ä¼šè®¨è®ºåè®¤ä¸ºä¸¤ç§åœºæ™¯éƒ½æœ‰åˆç†çš„ä½¿ç”¨éœ€æ±‚ï¼Œæ‰€ä»¥å†³å®šæŠŠ <code>windows()</code> æ‹†åˆ†æˆå¤šä¸ªæ–¹æ³•æ¥åˆ†åˆ«å¤„ç†è¿™ä¸¤ç§æƒ…å†µã€‚è¿™ä¹Ÿæ˜¯ææ¡ˆä» Stage 2 åˆ° Stage 2.7 èŠ±äº†ç‚¹æ—¶é—´çš„åŸå› ã€‚</p>
<h3 data-id="heading-14">2025 å¹´è¿›å…¥ Stage 4 çš„ç‰¹æ€§</h3>
<p>é™¤äº†ä¸Šé¢ä¸¤ä¸ªè¿˜åœ¨æ¨è¿›çš„ææ¡ˆï¼Œ2025 å¹´è¿˜æœ‰å¥½å‡ ä¸ªç‰¹æ€§å·²ç»æ­£å¼"æ¯•ä¸š"äº†ï¼š</p>
<h4 data-id="heading-15">RegExp.escapeï¼ˆ2 æœˆï¼‰</h4>
<p>å®‰å…¨è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œé˜²æ­¢æ³¨å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> userInput = <span class="hljs-string">"user@example.com (admin)"</span>;
<span class="hljs-keyword">const</span> safePattern = <span class="hljs-title class_">RegExp</span>.<span class="hljs-built_in">escape</span>(userInput);
<span class="hljs-keyword">const</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(safePattern);
<span class="hljs-comment">// ä¸ç”¨æ‹…å¿ƒæ‹¬å·è¢«è§£ææˆåˆ†ç»„äº†</span>
</code></pre>
<p>è¿™ä¸ªéœ€æ±‚å¤ªå¸¸è§äº†ï¼Œä»¥å‰éƒ½å¾—è‡ªå·±å†™è½¬ä¹‰å‡½æ•°æˆ–è€…ç”¨ç¬¬ä¸‰æ–¹åº“ã€‚</p>
<h4 data-id="heading-16">Float16Arrayï¼ˆ2 æœˆï¼‰</h4>
<p>åŠç²¾åº¦æµ®ç‚¹æ•°çš„ TypedArrayï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> f16Array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float16Array</span>([<span class="hljs-number">1.5</span>, <span class="hljs-number">2.7</span>, <span class="hljs-number">3.1</span>]);
</code></pre>
<p>ä¸»è¦é¢å‘æœºå™¨å­¦ä¹ å’Œå›¾å½¢å¤„ç†åœºæ™¯ã€‚æ¨¡å‹æƒé‡ç»å¸¸ç”¨ fp16 å­˜å‚¨ï¼Œæœ‰äº†åŸç”Ÿæ”¯æŒå°±ä¸ç”¨è‡ªå·±åšè½¬æ¢äº†ã€‚</p>
<h4 data-id="heading-17">Error.isErrorï¼ˆ5 æœˆï¼‰</h4>
<p>å¯é åœ°åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯ Errorï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-title class_">Error</span>.<span class="hljs-title function_">isError</span>(value)) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value.<span class="hljs-property">message</span>);
}
</code></pre>
<p>ä¸ºä»€ä¹ˆä¸ç”¨ <code>instanceof Error</code>ï¼Ÿå› ä¸ºè·¨ realmï¼ˆæ¯”å¦‚ iframe æˆ– Node.js çš„ vm æ¨¡å—ï¼‰çš„ Error å®ä¾‹ä¼šè¢«åˆ¤æˆ falseã€‚è¿™ä¸ªæ–¹æ³•è§£å†³äº†è¿™ä¸ªå†å²é—®é¢˜ã€‚</p>
<h4 data-id="heading-18">Math.sumPreciseï¼ˆ7 æœˆï¼‰</h4>
<p>é«˜ç²¾åº¦æ±‚å’Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> sum = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sumPrecise</span>([<span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.3</span>]);
<span class="hljs-comment">// æ¯”æ™®é€šç´¯åŠ æ›´ç²¾ç¡®ï¼Œå‡å°‘æµ®ç‚¹è¯¯å·®ç´¯ç§¯</span>
</code></pre>
<p>åšé‡‘èè®¡ç®—æˆ–ç§‘å­¦è®¡ç®—çš„åº”è¯¥ä¼šå–œæ¬¢è¿™ä¸ªã€‚</p>
<h4 data-id="heading-19">Uint8Array Base64 ç¼–è§£ç ï¼ˆ7 æœˆï¼‰</h4>
<p>åŸç”Ÿçš„ Base64 ç¼–è§£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> bytes = <span class="hljs-title class_">Uint8Array</span>.<span class="hljs-title function_">fromBase64</span>(<span class="hljs-string">'SGVsbG8='</span>);
<span class="hljs-keyword">const</span> base64 = bytes.<span class="hljs-title function_">toBase64</span>();
<span class="hljs-comment">// è¿˜æœ‰ fromHex() å’Œ toHex()</span>
</code></pre>
<p>ç»ˆäºä¸ç”¨ä¸ºäº† Base64 è½¬æ¢å»æ‰¾ç¬¬ä¸‰æ–¹åº“äº†ã€‚</p>
<h4 data-id="heading-20">Explicit Resource Managementï¼ˆå·² Stage 4ï¼‰</h4>
<p><code>using</code> å…³é”®å­—ï¼Œè‡ªåŠ¨èµ„æºæ¸…ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">using file = <span class="hljs-keyword">await</span> <span class="hljs-title function_">openFile</span>(<span class="hljs-string">'data.txt'</span>);
<span class="hljs-comment">// ç¦»å¼€ä½œç”¨åŸŸè‡ªåŠ¨å…³é—­ï¼Œä¸ç”¨æ‰‹åŠ¨ finally</span>
</code></pre>
<p>å€Ÿé‰´äº† Python çš„ with å’Œ C# çš„ usingï¼Œè§£å†³äº† JS é‡Œèµ„æºç®¡ç†ä¸€ç›´å¾ˆæ··ä¹±çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-21">è¿˜æœ‰å‡ ä¸ªå€¼å¾—å…³æ³¨çš„ Stage 2 ææ¡ˆ</h3>
<h4 data-id="heading-22">Seeded PRNGï¼ˆ5 æœˆè¿›å…¥ Stage 2ï¼‰</h4>
<p>å¯ç§å­åŒ–çš„éšæœºæ•°ç”Ÿæˆå™¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> random = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>(<span class="hljs-number">12345</span>); <span class="hljs-comment">// ç§å­</span>
<span class="hljs-keyword">const</span> value = random.<span class="hljs-title function_">next</span>();
<span class="hljs-comment">// åŒæ ·çš„ç§å­ï¼ŒåŒæ ·çš„åºåˆ—</span>
</code></pre>
<p>æ¸¸æˆå¼€å‘ã€æµ‹è¯•ã€ä»¿çœŸè¿™äº›åœºæ™¯ç»å¸¸éœ€è¦å¯é‡ç°çš„éšæœºåºåˆ—ã€‚</p>
<h4 data-id="heading-23">Error Stack Accessorï¼ˆ5 æœˆè¿›å…¥ Stage 2ï¼‰</h4>
<p>æ ‡å‡†åŒ–é”™è¯¯å †æ ˆçš„è®¿é—®æ–¹å¼ã€‚ç°åœ¨å„ä¸ªå¼•æ“çš„ <code>error.stack</code> æ ¼å¼éƒ½ä¸ä¸€æ ·ï¼Œè¿™ä¸ªææ¡ˆè¦ç»Ÿä¸€å®ƒã€‚</p>
<h3 data-id="heading-24">ææ¡ˆæµç¨‹ç®€å•å›é¡¾</h3>
<p>TC39 çš„ææ¡ˆåˆ† 5 ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li><strong>Stage 0</strong>ï¼šæƒ³æ³•</li>
<li><strong>Stage 1</strong>ï¼šæ­£å¼ææ¡ˆï¼Œå¼€å§‹è®¨è®º</li>
<li><strong>Stage 2</strong>ï¼šè§„èŒƒè‰æ¡ˆï¼ŒAPI åŸºæœ¬ç¨³å®š</li>
<li><strong>Stage 2.7</strong>ï¼šè§„èŒƒæ–‡æœ¬æ¥è¿‘å®Œæˆï¼Œå‡†å¤‡å†™æµ‹è¯•</li>
<li><strong>Stage 3</strong>ï¼šç­‰å¾…å®ç°åé¦ˆ</li>
<li><strong>Stage 4</strong>ï¼šæ­£å¼çº³å…¥æ ‡å‡†</li>
</ul>
<p>Import Bytes å’Œ Iterator Chunking éƒ½åˆ°äº† Stage 2.7ï¼Œç¦» Stage 3 å°±å·® test262 æµ‹è¯•å’Œæµè§ˆå™¨å®ç°æ‰¿è¯ºäº†ã€‚</p>
<h3 data-id="heading-25">æ€»ç»“</h3>
<p>2025 å¹´ TC39 çš„è¿›å±•è¿˜æ˜¯æŒºç»™åŠ›çš„ï¼š</p>
<ul>
<li><strong>Import Bytes</strong> è§£å†³äº†è·¨å¹³å°äºŒè¿›åˆ¶å¯¼å…¥çš„è€å¤§éš¾é—®é¢˜ï¼ŒåŒæ„åº“å¼€å‘ç»ˆäºèƒ½çœå¿ƒäº†</li>
<li><strong>Iterator Chunking</strong> è¡¥ä¸Šäº†è¿­ä»£å™¨å·¥å…·é“¾çš„ç©ºç™½ï¼Œchunks å’Œ windows è¦†ç›–äº†å¤§éƒ¨åˆ†åˆ†å—åœºæ™¯</li>
<li><strong>ä¸€å †ç‰¹æ€§è¿›å…¥ Stage 4</strong>ï¼šRegExp.escapeã€Float16Arrayã€Math.sumPreciseã€Base64 ç¼–è§£ç ã€èµ„æºç®¡ç†...</li>
</ul>
<p>è¿™äº›ç‰¹æ€§æœ‰çš„å·²ç»å¯ä»¥é€šè¿‡ Babel æˆ– TypeScript æå‰å°é²œäº†ã€‚å¦‚æœä½ åœ¨ç”¨ Deno æˆ– Bunï¼ŒImport Bytes ç±»ä¼¼çš„åŠŸèƒ½ç°åœ¨å°±èƒ½ç”¨ã€‚</p>
<hr/>
<p><strong>é¡ºæ‰‹å®‰åˆ©å‡ ä¸ªæˆ‘çš„å¼€æºé¡¹ç›®ï¼š</strong></p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul>
<hr/>
<h3 data-id="heading-26">å‚è€ƒé“¾æ¥</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftc39%2Fproposals" target="_blank" title="https://github.com/tc39/proposals" ref="nofollow noopener noreferrer">TC39 Proposals Repository</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftc39%2Fproposal-import-bytes" target="_blank" title="https://github.com/tc39/proposal-import-bytes" ref="nofollow noopener noreferrer">Import Bytes Proposal</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftc39.es%2Fproposal-iterator-chunking%2F" target="_blank" title="https://tc39.es/proposal-iterator-chunking/" ref="nofollow noopener noreferrer">Iterator Chunking Specification</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblogs.igalia.com%2Fcompilers%2F2025%2F03%2F27%2Fsummary-of-the-february-2025-tc39-plenary%2F" target="_blank" title="https://blogs.igalia.com/compilers/2025/03/27/summary-of-the-february-2025-tc39-plenary/" ref="nofollow noopener noreferrer">February 2025 TC39 Meeting Summary</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblogs.igalia.com%2Fcompilers%2F2025%2F07%2F03%2Fsummary-of-the-may-2025-tc39-plenary%2F" target="_blank" title="https://blogs.igalia.com/compilers/2025/07/03/summary-of-the-may-2025-tc39-plenary/" ref="nofollow noopener noreferrer">May 2025 TC39 Meeting Summary</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.infoq.com%2Fnews%2F2025%2F06%2Ftc39-stage-4-2025%2F" target="_blank" title="https://www.infoq.com/news/2025/06/tc39-stage-4-2025/" ref="nofollow noopener noreferrer">TC39 Stage 4 Proposals 2025</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Agentã€‘MemOS æºç ç¬”è®°---(3)---æœç´¢]]></title>    <link>https://juejin.cn/post/7581312433529733163</link>    <guid>https://juejin.cn/post/7581312433529733163</guid>    <pubDate>2025-12-08T12:31:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581312433529733163" data-draft-id="7577647745110425600" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Agentã€‘MemOS æºç ç¬”è®°---(3)---æœç´¢"/> <meta itemprop="keywords" content="ç®—æ³•,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-08T12:31:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½—è¥¿çš„æ€è€ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/351470467691175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Agentã€‘MemOS æºç ç¬”è®°---(3)---æœç´¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/351470467691175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½—è¥¿çš„æ€è€ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T12:31:41.000Z" title="Mon Dec 08 2025 12:31:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Agentã€‘MemOS æºç ç¬”è®°---(3)---æœç´¢</h2>
<h3 data-id="heading-1">0x00 æ‘˜è¦</h3>
<p>TreeTextMemory æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„è®°å¿†ç®¡ç†ç³»ç»Ÿï¼Œèƒ½å­˜å‚¨ã€ç»„ç»‡ã€æ£€ç´¢å’Œç»´æŠ¤å„ç§ç±»å‹çš„æ–‡æœ¬è®°å¿†ã€é€‚ç”¨éœ€è¦å¤æ‚è®°å¿†ç®¡ç†çš„AIç³»ç»Ÿã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäºå›¾çš„ã€æ ‘å½¢æ˜æ–‡è®°å¿†ï¼Œæ”¯æŒä»¥ç»“æ„åŒ–æ–¹å¼ç»„ç»‡ã€å…³è”å¹¶æ£€ç´¢è®°å¿†ï¼ŒåŒæ—¶ä¿ç•™ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸è‰¯å¥½çš„å¯è§£é‡Šæ€§ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªTreeTextMemory å¯¹è±¡ä¸åºå¤§çš„çŸ¥è¯†åº“è¿›è¡Œäº¤äº’ï¼Œä¸ºAIèµ‹äºˆä¸“ä¸šçš„é¢†åŸŸè®°å¿†ã€‚å½“å‰ä½¿ç”¨Neo4jä½œä¸ºåç«¯ï¼Œæœªæ¥è®¡åˆ’æ”¯æŒæ›´å¤šå›¾æ•°æ®åº“ã€‚</p>
<p>å› ä¸ºå­—æ•°å¤ªå¤šï¼Œå› æ­¤æŠŠTreeTextMemoryæ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸Šä¸€ç¯‡ä»‹ç»åŸºæœ¬æ¦‚å¿µå’Œå¦‚ä½•ç®¡ç†ï¼Œæœ¬ç¯‡ä»‹ç»å¦‚ä½•æœç´¢ã€‚</p>
<h3 data-id="heading-2">0x01 åˆ†ç±»</h3>
<p>TreeTextMemory ä¸»è¦æ”¯æŒå‡ ç§æœç´¢ï¼ˆæ³¨ï¼Œæœ‰äº›æ˜¯ä»å…¶ä»–é€”å¾„é€å‡ºï¼‰ï¼š</p>
<ul>
<li>
<p>æ··åˆæœç´¢ï¼ˆHybrid Searchï¼‰ï¼Œé€šè¿‡ Searcher.search æ–¹æ³•å¯¹å¤–æä¾›æœåŠ¡ï¼Œæ•´åˆå¤šç§æ£€ç´¢ç­–ç•¥çš„ç»“æœï¼Œå…·ä½“ç­–ç•¥å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç»“åˆå‘é‡ç›¸ä¼¼åº¦æœç´¢å’Œå›¾éå†ï¼šåœ¨ GraphMemoryRetrieverä¸­åˆ©ç”¨å›¾ç»“æ„å’Œå‘é‡ä¿¡æ¯</li>
<li>å…¨æ–‡æ£€ç´¢ï¼šè™½ç„¶æ²¡æœ‰æ˜¾å¼çš„å…¨æ–‡æœç´¢APIï¼Œä½†å¯ä»¥é€šè¿‡äº’è”ç½‘æ£€ç´¢å™¨ä»æœç´¢å¼•æ“è·å–ç›¸å…³å†…å®¹ InternetRetriever ç»„ä»¶å…è®¸é›†æˆå¤–éƒ¨æœç´¢æœåŠ¡ï¼ˆå¦‚Googleã€Bingã€Bochaï¼‰</li>
</ul>
</li>
<li>
<p>å­å›¾æ£€ç´¢ï¼ˆSubgraph Retrievalï¼‰ï¼Œé€šè¿‡ get_relevant_subgraph æ–¹æ³•å¯ä»¥ç›´æ¥è¿›è¡Œå­å›¾æœç´¢</p>
<ul>
<li>ä½¿ç”¨ graph_store.search_by_embedding æ–¹æ³•è·å–æŒ‡å®šèŠ‚ç‚¹å‘¨å›´çš„å±€éƒ¨å­å›¾ç»“æ„</li>
<li>æ”¯æŒè®¾ç½®éå†æ·±åº¦å’Œä¸­å¿ƒèŠ‚ç‚¹çŠ¶æ€æ¡ä»¶</li>
<li>è¿”å›åŒ…å«æ ¸å¿ƒèŠ‚ç‚¹ã€é‚»å±…èŠ‚ç‚¹å’Œè¾¹çš„å®Œæ•´å­å›¾ä¿¡æ¯</li>
</ul>
</li>
</ul>
<p>ä»¥ä¸‹æ˜¯å›¾æ•°æ®åº“çš„APIï¼Œæ¯”å¦‚ä½äºMemOS-main\src\memos\graph_dbs\nebular.pyä¸­ï¼Œåœ¨ä¸€äº›ç¤ºä¾‹ä¸­ä¹Ÿç›´æ¥ä½¿ç”¨ï¼š</p>
<ul>
<li>
<p>åŸºäºå…ƒæ•°æ®çš„ç»“æ„åŒ–æŸ¥è¯¢ï¼ˆMetadata-based Structured Queryï¼‰</p>
<ul>
<li>é€šè¿‡ get_by_metadataæ–¹æ³•æ ¹æ®èŠ‚ç‚¹å…ƒæ•°æ®å­—æ®µè¿›è¡Œç²¾ç¡®åŒ¹é…æˆ–æ¡ä»¶æŸ¥è¯¢</li>
<li>æ”¯æŒå¤šç§æ“ä½œç¬¦ï¼šç­‰äºï¼ˆ=ï¼‰ã€åŒ…å«ï¼ˆcontainsï¼‰ã€åœ¨åˆ—è¡¨ä¸­ï¼ˆinï¼‰ç­‰</li>
<li>å¯ä»¥ç»„åˆå¤šä¸ªæ¡ä»¶è¿›è¡Œå¤æ‚æŸ¥è¯¢</li>
</ul>
</li>
</ul>

<ul>
<li>
<p>æ ‡ç­¾é‡å æŸ¥è¯¢ï¼ˆTag Overlap Queryï¼‰</p>
<ul>
<li>ä½¿ç”¨ get_neighbors_by_tagæ–¹æ³•æŸ¥æ‰¾å…·æœ‰ç›¸ä¼¼æ ‡ç­¾çš„ç›¸é‚»èŠ‚ç‚¹</li>
<li>é€šè¿‡è®¡ç®—æ ‡ç­¾äº¤é›†å¤§å°æ¥ç¡®å®šç›¸å…³æ€§</li>
<li>æ”¯æŒè®¾ç½®æœ€å°æ ‡ç­¾é‡å æ•°è¦æ±‚</li>
</ul>
</li>
<li>
<p>å‘é‡ç›¸ä¼¼åº¦æœç´¢ï¼ˆVector Similarity Searchï¼‰</p>
<ul>
<li>åŸºäºåµŒå…¥ï¼ˆembeddingï¼‰çš„è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢</li>
<li>ä½¿ç”¨ search_by_embedding æ–¹æ³•æ ¹æ®æŸ¥è¯¢å‘é‡æ‰¾åˆ°æœ€ç›¸ä¼¼çš„è®°å¿†èŠ‚ç‚¹</li>
<li>æ”¯æŒè®¾ç½®ç›¸ä¼¼åº¦é˜ˆå€¼å’Œè¿”å›ç»“æœæ•°é‡é™åˆ¶</li>
</ul>
</li>
</ul>
<p>å…¶ä¸­æœ€ä¸»è¦çš„æŸ¥è¯¢æ¥å£æ˜¯ searchæ–¹æ³•ï¼Œå®ƒå†…éƒ¨æ•´åˆäº†å¤šç§æ£€ç´¢ç­–ç•¥æ¥æä¾›æœ€ä¼˜çš„æœç´¢ç»“æœã€‚</p>
<h3 data-id="heading-3">0x02 ## æ··åˆæœç´¢ï¼ˆHybrid Searchï¼‰--- Searcher</h3>
<p>Searcher ç”± TreeTextMemory åˆ›å»ºå¹¶ä½œä¸ºä¸»è¦çš„æœç´¢æ¥å£ä½¿ç”¨ï¼ŒSearcher æ˜¯æ•´ä¸ªè®°å¿†æ£€ç´¢ç³»ç»Ÿçš„æ ¸å¿ƒåè°ƒè€…ï¼Œè´Ÿè´£æ•´åˆå„ç§æ£€ç´¢æºå¹¶æä¾›é«˜è´¨é‡çš„æ£€ç´¢ç»“æœã€‚Searcher ç±»çš„ä¸»è¦åŠŸèƒ½æ˜¯æ‰§è¡Œè®°å¿†æ£€ç´¢ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒèŒè´£å’Œå·¥ä½œæµç¨‹ï¼š</p>
<ul>
<li>
<p>å¤šè·¯å¾„å¹¶è¡Œæ£€ç´¢ï¼ŒåŒæ—¶ä»å¤šä¸ªæ¥æºæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼š</p>
<ul>
<li>å·¥ä½œè®°å¿†ï¼ˆWorkingMemoryï¼‰</li>
<li>é•¿æœŸè®°å¿†ï¼ˆLongTermMemoryï¼‰</li>
<li>ç”¨æˆ·è®°å¿†ï¼ˆUserMemoryï¼‰</li>
<li>äº’è”ç½‘æ£€ç´¢å™¨ï¼ˆå¯é€‰ï¼‰</li>
<li>MemCubesï¼ˆå¯é€‰ï¼‰</li>
</ul>
</li>
<li>
<p>ä»»åŠ¡è§£æä¸æŸ¥è¯¢ä¼˜åŒ–</p>
<ul>
<li>ä½¿ç”¨ TaskGoalParser è§£æç”¨æˆ·æŸ¥è¯¢æ„å›¾</li>
<li>æ ¹æ®ä¸åŒæ¨¡å¼ï¼ˆfast/fineï¼‰é‡‡ç”¨ä¸åŒçš„æ£€ç´¢ç­–ç•¥</li>
<li>åœ¨ç²¾ç»†æ¨¡å¼ä¸‹å…ˆè¿›è¡ŒåµŒå…¥æœç´¢è·å–ä¸Šä¸‹æ–‡</li>
</ul>
</li>
<li>
<p>ç»“æœé‡æ’åºä¸å»é‡</p>
<ul>
<li>ä½¿ç”¨ reranker å¯¹æ£€ç´¢ç»“æœè¿›è¡Œé‡æ–°æ’åº</li>
<li>å»é™¤é‡å¤çš„è®°å¿†é¡¹</li>
<li>ä¿ç•™æœ€ç›¸å…³çš„ç»“æœ</li>
</ul>
</li>
<li>
<p>é«˜çº§æ¨ç†å¤„ç†</p>
<ul>
<li>åˆ©ç”¨ MemoryReasoner å¯¹æ£€ç´¢åˆ°çš„è®°å¿†è¿›è¡Œæ¨ç†å’ŒçŸ¥è¯†ç»¼åˆ</li>
<li>æå–æœ€æœ‰ä»·å€¼çš„ä¿¡æ¯ç‰‡æ®µ</li>
</ul>
</li>
<li>
<p>ä½¿ç”¨å†å²è¿½è¸ª</p>
<ul>
<li>æ›´æ–°è®°å¿†é¡¹çš„ä½¿ç”¨å†å²è®°å½•</li>
<li>å¹¶å‘å¤„ç†ä½¿ç”¨ç»Ÿè®¡æ›´æ–°</li>
</ul>
</li>
</ul>
<h4 data-id="heading-4">2.1 å®šä¹‰</h4>
<pre><code class="hljs language-ini" lang="ini">class Searcher:
 Â  Â def __init__(
 Â  Â  Â  Â self,
 Â  Â  Â  Â dispatcher_llm: OpenAILLM | OllamaLLM | AzureLLM,
 Â  Â  Â  Â graph_store: Neo4jGraphDB,
 Â  Â  Â  Â embedder: OllamaEmbedder,
 Â  Â  Â  Â reranker: BaseReranker,
 Â  Â  Â  Â internet_retriever: InternetRetrieverFactory | <span class="hljs-attr">None</span> = None,
 Â  Â  Â  Â moscube: <span class="hljs-attr">bool</span> = <span class="hljs-literal">False</span>,
 Â   ):
 Â  Â  Â  Â <span class="hljs-attr">self.graph_store</span> = graph_store
 Â  Â  Â  Â <span class="hljs-attr">self.embedder</span> = embedder
â€‹
 Â  Â  Â  Â <span class="hljs-attr">self.task_goal_parser</span> = TaskGoalParser(dispatcher_llm)
 Â  Â  Â  Â <span class="hljs-attr">self.graph_retriever</span> = GraphMemoryRetriever(self.graph_store, self.embedder)
 Â  Â  Â  Â <span class="hljs-attr">self.reranker</span> = reranker
 Â  Â  Â  Â <span class="hljs-attr">self.reasoner</span> = MemoryReasoner(dispatcher_llm)
â€‹
 Â  Â  Â  Â <span class="hljs-comment"># Create internet retriever from config if provided</span>
 Â  Â  Â  Â <span class="hljs-attr">self.internet_retriever</span> = internet_retriever
 Â  Â  Â  Â <span class="hljs-attr">self.moscube</span> = moscube
â€‹
 Â  Â  Â  Â <span class="hljs-attr">self._usage_executor</span> = ContextThreadPoolExecutor(max_workers=<span class="hljs-number">4</span>, thread_name_prefix=<span class="hljs-string">"usage"</span>)
</code></pre>
<h4 data-id="heading-5">2.2 æ ¸å¿ƒå‡½æ•°</h4>
<p>å…¶æ ¸å¿ƒæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>search()ï¼šä¸»å…¥å£ï¼Œåè°ƒæ•´ä¸ªæ£€ç´¢è¿‡ç¨‹</li>
<li>_parse_task()ï¼šè§£æä»»åŠ¡å’ŒæŸ¥è¯¢</li>
<li>_retrieve_paths()ï¼šæ‰§è¡Œå¤šè·¯å¾„æ£€ç´¢</li>
<li>_deduplicate_results()ï¼šç»“æœå»é‡</li>
<li>_sort_and_trim()ï¼šæ’åºå’Œæˆªæ–­ç»“æœ</li>
<li>update_usage_history()ï¼šæ›´æ–°ä½¿ç”¨å†å²</li>
</ul>
<p>ä¸»å…¥å£å¦‚ä¸‹ï¼Œæˆ–è€…è¯´Searcher ç¼–æ’æœç´¢æµæ°´çº¿å¦‚ä¸‹ï¼š</p>
<ul>
<li>æŸ¥è¯¢è§£æå’Œç†è§£</li>
<li>ä»å¤šä¸ªæ¥æºå¹¶è¡Œæ£€ç´¢</li>
<li>ç»“æœé‡æ–°æ’åº</li>
<li>å»é‡å¤„ç†</li>
<li>å¯¹ç»“æœè¿›è¡Œæ¨ç†</li>
<li>ä½¿ç”¨æƒ…å†µè·Ÿè¸ª</li>
</ul>

<pre><code class="hljs language-python" lang="python"> Â  Â @timed
 Â  Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">
 Â  Â  Â  Â self,
 Â  Â  Â  Â query: <span class="hljs-built_in">str</span>,
 Â  Â  Â  Â top_k: <span class="hljs-built_in">int</span>,
 Â  Â  Â  Â info=<span class="hljs-literal">None</span>,
 Â  Â  Â  Â mode=<span class="hljs-string">"fast"</span>,
 Â  Â  Â  Â memory_type=<span class="hljs-string">"All"</span>,
 Â  Â  Â  Â search_filter: <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
 Â   </span>) -&gt; <span class="hljs-built_in">list</span>[TextualMemoryItem]:
 Â  Â  Â  Â <span class="hljs-string">"""
 Â  Â  Â   Search for memories based on a query.
 Â  Â  Â   User query -&gt; TaskGoalParser -&gt; GraphMemoryRetriever -&gt;
 Â  Â  Â   MemoryReranker -&gt; MemoryReasoner -&gt; Final output
 Â  Â  Â   Args:
 Â  Â  Â  Â  Â   query (str): The query to search for.
 Â  Â  Â  Â  Â   top_k (int): The number of top results to return.
 Â  Â  Â  Â  Â   info (dict): Leave a record of memory consumption.
 Â  Â  Â  Â  Â   mode (str, optional): The mode of the search.
 Â  Â  Â  Â  Â   - 'fast': Uses a faster search process, sacrificing some precision for speed.
 Â  Â  Â  Â  Â   - 'fine': Uses a more detailed search process, invoking large models for higher precision, but slower performance.
 Â  Â  Â  Â  Â   memory_type (str): Type restriction for search.
 Â  Â  Â  Â  Â   ['All', 'WorkingMemory', 'LongTermMemory', 'UserMemory']
 Â  Â  Â  Â  Â   search_filter (dict, optional): Optional metadata filters for search results.
 Â  Â  Â   Returns:
 Â  Â  Â  Â  Â   list[TextualMemoryItem]: List of matching memories.
 Â  Â  Â   """</span>
 Â  Â  Â  Â logger.info(
 Â  Â  Â  Â  Â  Â <span class="hljs-string">f"[SEARCH] Start query='<span class="hljs-subst">{query}</span>', top_k=<span class="hljs-subst">{top_k}</span>, mode=<span class="hljs-subst">{mode}</span>, memory_type=<span class="hljs-subst">{memory_type}</span>"</span>
 Â  Â  Â   )
 Â  Â  Â  Â <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> info:
 Â  Â  Â  Â  Â  Â logger.warning(
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"Please input 'info' when use tree.search so that "</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"the database would store the consume history."</span>
 Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â  Â info = {<span class="hljs-string">"user_id"</span>: <span class="hljs-string">""</span>, <span class="hljs-string">"session_id"</span>: <span class="hljs-string">""</span>}
 Â  Â  Â  Â <span class="hljs-keyword">else</span>:
 Â  Â  Â  Â  Â  Â logger.debug(<span class="hljs-string">f"[SEARCH] Received info dict: <span class="hljs-subst">{info}</span>"</span>)
â€‹
 Â  Â  Â  Â parsed_goal, query_embedding, context, query = self._parse_task(
 Â  Â  Â  Â  Â  Â query, info, mode, search_filter=search_filter
 Â  Â  Â   )
 Â  Â  Â  Â results = self._retrieve_paths(
 Â  Â  Â  Â  Â  Â query, parsed_goal, query_embedding, info, top_k, mode, memory_type, search_filter
 Â  Â  Â   )
 Â  Â  Â  Â deduped = self._deduplicate_results(results)
 Â  Â  Â  Â final_results = self._sort_and_trim(deduped, top_k)
 Â  Â  Â  Â self._update_usage_history(final_results, info)
â€‹
 Â  Â  Â  Â logger.info(<span class="hljs-string">f"[SEARCH] Done. Total <span class="hljs-subst">{<span class="hljs-built_in">len</span>(final_results)}</span> results."</span>)
 Â  Â  Â  Â res_results = <span class="hljs-string">""</span>
 Â  Â  Â  Â <span class="hljs-keyword">for</span> _num_i, result <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(final_results):
 Â  Â  Â  Â  Â  Â res_results += <span class="hljs-string">"\n"</span> + (
 Â  Â  Â  Â  Â  Â  Â  Â result.<span class="hljs-built_in">id</span> + <span class="hljs-string">"|"</span> + result.metadata.memory_type + <span class="hljs-string">"|"</span> + result.memory
 Â  Â  Â  Â  Â   )
 Â  Â  Â  Â logger.info(<span class="hljs-string">f"[SEARCH] Results. <span class="hljs-subst">{res_results}</span>"</span>)
 Â  Â  Â  Â <span class="hljs-keyword">return</span> final_results
</code></pre>
<h4 data-id="heading-6">2.3 ä¾èµ–å…³ç³»å’Œå…³è”å…³ç³»</h4>
<h5 data-id="heading-7">2.3.1 ä¾èµ–é¡¹ï¼ˆSearcher ä¾èµ–çš„ç»„ä»¶ï¼‰</h5>
<p>Searcher ä¾èµ–çš„ç»„ä»¶å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>å¤§è¯­è¨€æ¨¡å‹ç»„ä»¶ï¼š</p>
<ul>
<li>dispatcher_llm â€“ ç”¨äºä»»åŠ¡è§£æå’Œæ¨ç†</li>
<li>TaskGoalParser â€“ å°†ç”¨æˆ·æŸ¥è¯¢è§£æä¸ºç»“æ„åŒ–ç›®æ ‡</li>
</ul>
</li>
<li>
<p>å­˜å‚¨ç»„ä»¶ï¼š</p>
<ul>
<li>graph_store â€“ Neo4j å›¾æ•°æ®åº“ç”¨äºå­˜å‚¨è®°å¿†</li>
<li>GraphMemoryRetriever â€“ ä»å›¾å­˜å‚¨ä¸­æ£€ç´¢è®°å¿†</li>
</ul>
</li>
<li>
<p>å¤„ç†ç»„ä»¶ï¼š</p>
<ul>
<li>embedder â€“ ä¸ºæŸ¥è¯¢å’Œè®°å¿†åˆ›å»ºåµŒå…¥å‘é‡</li>
<li>reranker â€“ å¯¹æ£€ç´¢ç»“æœè¿›è¡Œé‡æ–°æ’åº</li>
<li>MemoryReasoner â€“ å¯¹æ£€ç´¢åˆ°çš„è®°å¿†è¿›è¡Œæ¨ç†</li>
<li>internet_retriever â€“ å¯é€‰çš„äº’è”ç½‘æœç´¢åŠŸèƒ½</li>
</ul>
</li>
</ul>
<h5 data-id="heading-8">2.3.2 ä¾èµ– Searcher çš„ç»„ä»¶</h5>
<p>ä¾èµ– Searcher çš„ç»„ä»¶å¦‚ä¸‹ï¼š</p>
<ul>
<li>TreeTextMemory â€“ åœ¨å…¶ search æ–¹æ³•ä¸­ä½¿ç”¨ Searcher</li>
<li>GeneralScheduler â€“ é€šè¿‡æ£€ç´¢å™¨åœ¨ process_session_turn ä¸­ä½¿ç”¨ Searcher</li>
</ul>
<h4 data-id="heading-9">2.4 å›¾ä¾‹</h4>
<p>Searcher è¢«è°ƒåº¦å™¨ç³»ç»Ÿç”¨äºåœ¨æŸ¥è¯¢å¤„ç†è¿‡ç¨‹ä¸­æ£€ç´¢ç›¸å…³è®°å¿†ï¼Œæ€»çš„æ¥è¯´ï¼ŒSearcher å……å½“ä¸€ä¸ªä¸­å¤®åè°ƒè€…ï¼Œå°†å„ç§ç»„ä»¶æ•´åˆåœ¨ä¸€èµ·ï¼Œä¸ºè·¨ä¸åŒè®°å¿†æºå’Œå¤–éƒ¨æ•°æ®æä¾›å…¨é¢çš„æ£€ç´¢èƒ½åŠ›ã€‚</p>
<h5 data-id="heading-10">2.4.1 Searcher ç»„ä»¶å…³ç³»æµç¨‹å›¾</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4d979d43803436495c2d5112601d62b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765801901&amp;x-signature=ASPi6KA1T8DHkJmZVPlKSM71oLY%3D" alt="Searcher ç»„ä»¶å…³ç³»æµç¨‹å›¾" loading="lazy"/></p>
<h5 data-id="heading-11">2.4.2 Searcher è¯¦ç»†æœç´¢è¿‡ç¨‹æµç¨‹</h5>
<p>ç”¨æˆ·æŸ¥è¯¢ â†’ TaskGoalParser è§£æ â†’ å¤šè·¯å¾„å¹¶è¡Œæ£€ç´¢ â†’ ç»“æœé‡æ’åº â†’ å»é‡å¤„ç† â†’ æ¨ç†ä¼˜åŒ– â†’ è¿”å›æœ€ç»ˆç»“æœã€‚</p>
<p>å„ç»„ä»¶è¯¦ç»†è¯´æ˜</p>
<p><strong>ä¸»è¦é˜¶æ®µ</strong></p>
<ul>
<li>ä»»åŠ¡è§£æï¼šä½¿ç”¨ TaskGoalParser è§£ææŸ¥è¯¢ï¼Œæ ¹æ®æ¨¡å¼å†³å®šæ˜¯å¦ä½¿ç”¨ LLM</li>
<li>å¹¶è¡Œæ£€ç´¢ï¼šåŒæ—¶æ‰§è¡Œå¤šä¸ªæ£€ç´¢è·¯å¾„</li>
<li>ç»“æœé‡æ’ï¼šä½¿ç”¨ Reranker å¯¹å„è·¯å¾„çš„ç»“æœè¿›è¡Œé‡æ’</li>
<li>åˆå¹¶å»é‡ï¼šåˆå¹¶æ‰€æœ‰è·¯å¾„çš„ç»“æœå¹¶å»é™¤é‡å¤é¡¹</li>
<li>æ’åºæˆªå–ï¼šæŒ‰åˆ†æ•°æ’åºå¹¶æˆªå–å‰ K ä¸ªç»“æœ</li>
<li>æ›´æ–°è®°å½•ï¼šæ›´æ–°ä½¿ç”¨å†å²è®°å½•</li>
</ul>
<p><strong>å¹¶è¡Œæ£€ç´¢è·¯å¾„</strong></p>
<ul>
<li>è·¯å¾„ Aï¼šå·¥ä½œå†…å­˜æ£€ç´¢ (WorkingMemory)</li>
<li>è·¯å¾„ Bï¼šé•¿æœŸå’Œç”¨æˆ·å†…å­˜æ£€ç´¢ (LongTermMemory, UserMemory)</li>
<li>è·¯å¾„ Cï¼šäº’è”ç½‘æ£€ç´¢ï¼ˆå¯é€‰ï¼‰</li>
<li>è·¯å¾„ Dï¼šMemCubes æ£€ç´¢ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<p><strong>æ•°æ®æµå‘</strong>ï¼šè¾“å…¥æŸ¥è¯¢ç»è¿‡è§£æåï¼Œè¢«åˆ†å‘åˆ°å¤šä¸ªæ£€ç´¢è·¯å¾„å¹¶è¡Œå¤„ç†ï¼Œæ¯ä¸ªè·¯å¾„éƒ½ä¼šäº§ç”Ÿä¸€æ‰¹å€™é€‰ç»“æœã€‚è¿™äº›ç»“æœç»è¿‡é‡æ’ã€åˆå¹¶ï¼Œæœ€åç»è¿‡å»é‡ã€æ’åºå’Œæˆªå–å¾—åˆ°æœ€ç»ˆç»“æœã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­è¿˜ä¼šæ›´æ–°ä½¿ç”¨å†å²è®°å½•ä»¥ä¾¿åç»­ä¼˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01aba941f206483ebb9f8f10fe53633e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765801901&amp;x-signature=rNFzz9A6wN2jeY0MUyhnQVm5i%2Fg%3D" alt="Searcher è¯¦ç»†æœç´¢è¿‡ç¨‹æµç¨‹" loading="lazy"/></p>
<p>ç”¨æˆ·æœç´¢æµç¨‹å¦‚ä¸‹ï¼šç”¨æˆ·æŸ¥è¯¢ â†’ TaskGoalParser è§£æ â†’ å¤šè·¯å¾„å¹¶è¡Œæ£€ç´¢ â†’ ç»“æœé‡æ’åº â†’ å»é‡å¤„ç† â†’ æ¨ç†ä¼˜åŒ– â†’ è¿”å›æœ€ç»ˆç»“æœã€‚</p>
<p>å…¶ä¸­æ¶‰åŠåˆ°å¦‚ä¸‹ç»„ä»¶ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f081aae6b54641a4b2bfad88d3a3de0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765801901&amp;x-signature=DgjU47dG3RRzhr9mIOuKkwe15Nc%3D" alt="æœç´¢æµç¨‹" loading="lazy"/></p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬æŒ‰ç…§å¦‚ä¸‹æµç¨‹è¿›è¡Œåˆ†æã€‚</p>
<h4 data-id="heading-12">2.5 TaskGoalParser</h4>
<p>_parse_task æ–¹æ³•ä¸»è¦æ˜¯ä½¿ç”¨ TaskGoalParser æ¥åˆ†æqueryã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â <span class="hljs-attr">parsed_goal</span> = self.task_goal_parser.parse(
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">task_description</span>=query,
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">context</span>=<span class="hljs-string">"\n"</span>.join(context),
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">conversation</span>=info.get(<span class="hljs-string">"chat_history"</span>, []),
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">mode</span>=mode,
 Â  Â  Â   )
</code></pre>
<p>TaskGoalParser æ˜¯ä¸€ä¸ªä»»åŠ¡ç›®æ ‡è§£æå™¨ï¼Œè´Ÿè´£å°†ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æŸ¥è¯¢è§£æä¸ºç»“æ„åŒ–çš„è¯­ä¹‰å±‚è¡¨ç¤ºï¼Œä»¥ä¾¿åç»­çš„æ£€ç´¢ç³»ç»Ÿèƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°ç†è§£å’Œå¤„ç†æŸ¥è¯¢ã€‚</p>
<h5 data-id="heading-13">2.5.1 ä¸»è¦åŠŸèƒ½</h5>
<p>TaskGoalParser ä¸»è¦åŠŸèƒ½ä¸ºï¼š</p>
<ul>
<li>
<p>æŸ¥è¯¢è§£æã€‚</p>
<ul>
<li>å°†ç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€æŸ¥è¯¢è½¬æ¢ä¸ºç»“æ„åŒ–çš„æŸ¥è¯¢è¡¨ç¤º</li>
<li>æä¾›ä¸¤ç§è§£ææ¨¡å¼ï¼šå¿«é€Ÿæ¨¡å¼ï¼ˆfastï¼‰å’Œç²¾ç»†æ¨¡å¼ï¼ˆfineï¼‰</li>
</ul>
</li>
<li>
<p>ç»“æ„åŒ–è¯­ä¹‰è¡¨ç¤º</p>
<ul>
<li>å°†æŸ¥è¯¢åˆ†è§£ä¸ºå¤šä¸ªè¯­ä¹‰å±‚æ¬¡ï¼šä¸»é¢˜ï¼ˆtopicï¼‰ã€å…³é”®è¯ï¼ˆkeysï¼‰ã€æ ‡ç­¾ï¼ˆtagsï¼‰ç­‰ æå–æŸ¥è¯¢çš„æ ¸å¿ƒæ„å›¾å’Œç›¸å…³ä¿¡æ¯</li>
</ul>
</li>
</ul>
<h5 data-id="heading-14">2.5.2 å·¥ä½œæ¨¡å¼</h5>
<h6 data-id="heading-15">Fast æ¨¡å¼</h6>
<pre><code class="hljs language-ini" lang="ini">def _parse_fast(self, task_description: str, limit_num: <span class="hljs-attr">int</span> = <span class="hljs-number">5</span>) -&gt; ParsedTaskGoal:
 Â  Â <span class="hljs-comment"># å¿«é€Ÿæ¨¡å¼ï¼šç®€å•çš„åˆ†è¯å¤„ç†</span>
 Â  Â return ParsedTaskGoal(
 Â  Â  Â  Â <span class="hljs-attr">memories</span>=[task_description],
 Â  Â  Â  Â <span class="hljs-attr">keys</span>=[task_description],
 Â  Â  Â  Â <span class="hljs-attr">tags</span>=[],
 Â  Â  Â  Â <span class="hljs-attr">goal_type</span>=<span class="hljs-string">"default"</span>,
 Â  Â  Â  Â <span class="hljs-attr">rephrased_query</span>=task_description,
 Â  Â  Â  Â <span class="hljs-attr">internet_search</span>=<span class="hljs-literal">False</span>,
</code></pre>
<h6 data-id="heading-16">Fine æ¨¡å¼</h6>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_parse_fine</span>(<span class="hljs-params">
 Â  Â self, query: <span class="hljs-built_in">str</span>, context: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>, conversation: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>
</span>) -&gt; ParsedTaskGoal:
 Â  Â <span class="hljs-comment"># ç²¾ç»†æ¨¡å¼ï¼šä½¿ç”¨ LLM è¿›è¡Œç»“æ„åŒ–è§£æ</span>
 Â  Â <span class="hljs-comment"># æ„å»ºæç¤ºè¯å¹¶è°ƒç”¨ LLM è¿›è¡Œè§£æ</span>
 Â  Â prompt = Template(TASK_PARSE_PROMPT).substitute(
 Â  Â  Â  Â task=query.strip(), context=context, conversation=conversation_prompt
 Â   )
 Â  Â response = self.llm.generate(messages=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: prompt}])
 Â  Â <span class="hljs-keyword">return</span> self._parse_response(response)
</code></pre>
<h5 data-id="heading-17">2.5.3 è¾“å‡ºç»“æ„</h5>
<p>TaskGoalParser è§£æåçš„ç»“æœå­˜å‚¨åœ¨ ParsedTaskGoal å¯¹è±¡ä¸­ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>
<ul>
<li>memoriesï¼šç›¸å…³è®°å¿†é¡¹åˆ—è¡¨</li>
<li>keysï¼šå…³é”®è¯åˆ—è¡¨</li>
<li>tagsï¼šæ ‡ç­¾åˆ—è¡¨</li>
<li>rephrased_queryï¼šé‡è¿°çš„æŸ¥è¯¢ï¼ˆæ›´æ¸…æ™°çš„è¡¨è¾¾ï¼‰</li>
<li>internet_searchï¼šæ˜¯å¦éœ€è¦è”ç½‘æœç´¢</li>
<li>goal_typeï¼šç›®æ ‡ç±»å‹</li>
</ul>
<h5 data-id="heading-18">2.5.4 prompt</h5>
<pre><code class="hljs language-python" lang="python">TASK_PARSE_PROMPT = <span class="hljs-string">"""
You are a task parsing expert. Given a user task instruction, optional former conversation and optional related memory context,extract the following structured information:
1. Keys: the high-level keywords directly relevant to the userâ€™s task.
2. Tags: thematic tags to help categorize and retrieve related memories.
3. Goal Type: retrieval | qa | generation
4. Rephrased instruction: Give a rephrased task instruction based on the former conversation to make it less confusing to look alone. If you think the task instruction is easy enough to understand, or there is no former conversation, set "rephrased_instruction" to an empty string.
5. Need for internet search: If the user's task instruction only involves objective facts or can be completed without introducing external knowledge, set "internet_search" to False. Otherwise, set it to True.
6. Memories: Provide 2â€“5 short semantic expansions or rephrasings of the rephrased/original user task instruction. These are used for improved embedding search coverage. Each should be clear, concise, and meaningful for retrieval.
â€‹
Former conversation (if any):
"""</span>
$conversation
<span class="hljs-string">"""
â€‹
Task description(User Question):
"""</span>$task<span class="hljs-string">"""
â€‹
Context (if any):
"""</span>$context<span class="hljs-string">"""
â€‹
Return strictly in this JSON format, note that the
keys/tags/rephrased_instruction/memories should use the same language as the
input query:
{
  "keys": [...],
  "tags": [...],
  "goal_type": "retrieval | qa | generation",
  "rephrased_instruction": "...", # return an empty string if the original instruction is easy enough to understand
  "internet_search": True/False,
  "memories": ["...", "...", ...]
}
"""</span>
</code></pre>
<h5 data-id="heading-19">2.5.5 ä¼˜åŠ¿</h5>
<p>æ€»çš„æ¥è¯´ï¼ŒTaskGoalParser åœ¨è®°å¿†æ£€ç´¢ç³»ç»Ÿä¸­æ‰®æ¼”ç€â€œæŸ¥è¯¢ç†è§£å™¨â€çš„è§’è‰²ï¼Œé€šè¿‡è§£æç”¨æˆ·æŸ¥è¯¢ä¸ºç»“æ„åŒ–è¡¨ç¤ºï¼Œä¸ºåç»­çš„æ£€ç´¢å’Œæ¨ç†è¿‡ç¨‹æä¾›æ›´ç²¾ç¡®çš„è¾“å…¥ã€‚å…¶ä¼˜åŠ¿ä¸ºï¼š</p>
<ul>
<li>çµæ´»æ€§ï¼šæ”¯æŒä¸¤ç§è§£ææ¨¡å¼ï¼Œé€‚åº”ä¸åŒæ€§èƒ½å’Œç²¾åº¦éœ€æ±‚</li>
<li>ç»“æ„åŒ–ï¼šå°†è‡ªç„¶è¯­è¨€æŸ¥è¯¢è½¬æ¢ä¸ºç»“æ„åŒ–è¡¨ç¤ºï¼Œä¾¿äºåç»­å¤„ç†</li>
<li>ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼šåœ¨ç²¾ç»†æ¨¡å¼ä¸‹å¯ä»¥è€ƒè™‘ä¸Šä¸‹æ–‡å’Œå¯¹è¯å†å²</li>
<li>é”™è¯¯å¤„ç†ï¼šå½“ç²¾ç»†æ¨¡å¼å¤±è´¥æ—¶ä¼šå›é€€åˆ°å¿«é€Ÿæ¨¡å¼</li>
</ul>
<h4 data-id="heading-20">2.6 GraphMemoryRetriever</h4>
<p>GraphMemoryRetriever æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„è®°å¿†æ£€ç´¢å™¨ï¼Œç»“åˆäº†å›¾ç»“æ„æ£€ç´¢å’Œå‘é‡ç›¸ä¼¼æ€§æ£€ç´¢ä¸¤ç§æ–¹å¼ï¼Œç”¨äºä»çŸ¥è¯†å›¾è°±ä¸­æ£€ç´¢ç›¸å…³è®°å¿†é¡¹ã€‚</p>
<h5 data-id="heading-21">2.6.1 ä¸»è¦åŠŸèƒ½</h5>
<p>GraphMemoryRetriever å®ç°æ··åˆæ£€ç´¢ï¼Œè¿™ç§è®¾è®¡ä½¿å¾—ç³»ç»Ÿæ—¢èƒ½åˆ©ç”¨ç»“æ„åŒ–ä¿¡æ¯è¿›è¡Œç²¾ç¡®æ£€ç´¢ï¼Œåˆèƒ½é€šè¿‡å‘é‡ç›¸ä¼¼æ€§æ•è·è¯­ä¹‰ç›¸å…³çš„å†…å®¹ï¼Œä»è€Œæé«˜äº†æ£€ç´¢çš„å‡†ç¡®æ€§å’Œå¬å›ç‡ã€‚</p>
<ul>
<li>
<p>æ··åˆæ£€ç´¢æœºåˆ¶</p>
<ul>
<li>ç»“æ„åŒ–å›¾æ£€ç´¢ï¼šåŸºäºè§£æåçš„ä»»åŠ¡ç›®æ ‡ï¼ˆkeys/tagsï¼‰è¿›è¡Œç²¾ç¡®åŒ¹é…</li>
<li>å‘é‡ç›¸ä¼¼æ€§æ£€ç´¢ï¼šåŸºäºæŸ¥è¯¢åµŒå…¥è¿›è¡Œè¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢</li>
<li>åˆå¹¶ä¸¤ç§æ£€ç´¢ç»“æœå¹¶å»é‡</li>
</ul>
</li>
<li>
<p>å¤šèŒƒå›´è®°å¿†æ£€ç´¢</p>
<ul>
<li>æ”¯æŒä¸åŒç±»å‹çš„è®°å¿†èŒƒå›´ï¼šWorkingMemoryã€LongTermMemoryã€UserMemory</li>
<li>é’ˆå¯¹ä¸åŒèŒƒå›´é‡‡ç”¨ä¸åŒçš„æ£€ç´¢ç­–ç•¥</li>
</ul>
</li>
</ul>
<h5 data-id="heading-22">2.6.2 æ ¸å¿ƒæ–¹æ³•</h5>
<ul>
<li>
<p>retrieve æ–¹æ³•ï¼šè¿™æ˜¯ä¸»è¦çš„æ£€ç´¢å…¥å£ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>å¯¹äº WorkingMemoryï¼Œç›´æ¥è·å–æ‰€æœ‰æ¡ç›®ï¼›</li>
<li>å¯¹äºå…¶ä»–è®°å¿†ç±»å‹ï¼ŒåŒæ—¶æ‰§è¡Œ _graph_recall å’Œ _vector_recallï¼›</li>
<li>åˆå¹¶ç»“æœå¹¶å»é™¤é‡å¤é¡¹ã€‚</li>
</ul>
</li>
<li>
<p>_graph_recall æ–¹æ³•ï¼šæ‰§è¡ŒåŸºäºå›¾ç»“æ„çš„æ£€ç´¢ï¼š</p>
<ul>
<li>åŸºäº keys è¿›è¡Œç²¾ç¡®åŒ¹é…æ£€ç´¢ï¼›</li>
<li>åŸºäº tags è¿›è¡ŒåŒ…å«åŒ¹é…æ£€ç´¢ï¼›</li>
<li>å¯¹å€™é€‰ç»“æœè¿›è¡Œåè¿‡æ»¤ï¼Œç¡®ä¿è‡³å°‘æœ‰ 2 ä¸ªæ ‡ç­¾é‡å ã€‚</li>
</ul>
</li>
<li>
<p>_vector_recall æ–¹æ³•ï¼šæ‰§è¡ŒåŸºäºå‘é‡çš„ç›¸ä¼¼æ€§æ£€ç´¢ï¼š</p>
<ul>
<li>ä½¿ç”¨æŸ¥è¯¢åµŒå…¥åœ¨å›¾æ•°æ®åº“ä¸­æœç´¢æœ€ç›¸ä¼¼çš„è®°å¿†é¡¹ï¼›</li>
<li>æ”¯æŒå¸¦è¿‡æ»¤æ¡ä»¶çš„æœç´¢å’Œä¸å¸¦è¿‡æ»¤æ¡ä»¶çš„æœç´¢è·¯å¾„ï¼›</li>
<li>å¹¶å‘æ‰§è¡Œå¤šä¸ªæœç´¢ä»»åŠ¡ä»¥æé«˜æ•ˆç‡ã€‚</li>
</ul>
</li>
<li>
<p>retrieve_from_cube æ–¹æ³•ï¼šä¸“é—¨ç”¨äºä»ç‰¹å®šçš„ cube ä¸­æ£€ç´¢è®°å¿†é¡¹ï¼Œè¿™åœ¨å¤šç§Ÿæˆ·æˆ–åˆ†ç‰‡åœºæ™¯ä¸­å¾ˆæœ‰ç”¨ã€‚</p>
</li>
</ul>
<h5 data-id="heading-23">2.6.3 å·¥ä½œæµç¨‹æ€»ç»“</h5>
<ul>
<li>æ¥æ”¶ç”¨æˆ·æŸ¥è¯¢å’Œè§£æåçš„ä»»åŠ¡ç›®æ ‡</li>
<li>å¹¶è¡Œæ‰§è¡Œå›¾ç»“æ„æ£€ç´¢å’Œå‘é‡æ£€ç´¢</li>
<li>åˆå¹¶ä¸¤ç§æ£€ç´¢ç»“æœ</li>
<li>å»é™¤é‡å¤é¡¹å¹¶è¿”å›æœ€ç»ˆç»“æœ</li>
</ul>
<h4 data-id="heading-24">2.7 Reranker</h4>
<p>ä½¿ç”¨ CosineLocalReranker åšè§£æã€‚CosineLocalReranker æ˜¯ä¸€ä¸ªæœ¬åœ°å®ç°çš„é‡æ’åºå™¨ï¼Œå®ƒä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦ç®—æ³•å¯¹æ£€ç´¢åˆ°çš„è®°å¿†é¡¹è¿›è¡Œé‡æ–°æ’åºï¼Œä»¥æé«˜æ£€ç´¢ç»“æœçš„ç›¸å…³æ€§ã€‚</p>
<h5 data-id="heading-25">2.7.1 ä¸»è¦åŠŸèƒ½</h5>
<p>ä¸»è¦åŠŸèƒ½æ˜¯ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—</p>
<ul>
<li>è®¡ç®—æŸ¥è¯¢å‘é‡ä¸å€™é€‰è®°å¿†é¡¹å‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦</li>
<li>æ”¯æŒå•ä¸ªæŸ¥è¯¢å‘é‡ä¸å¤šä¸ªå€™é€‰å‘é‡çš„åŒæ—¶è®¡ç®—</li>
</ul>
<h5 data-id="heading-26">2.7.2 å·¥ä½œæµç¨‹æ€»ç»“</h5>
<ul>
<li>æ¥æ”¶æ¥è‡ª GraphMemoryRetriever çš„åˆæ­¥æ£€ç´¢ç»“æœ</li>
<li>è·å–æŸ¥è¯¢çš„åµŒå…¥å‘é‡å’Œå€™é€‰è®°å¿†é¡¹çš„åµŒå…¥å‘é‡</li>
<li>è®¡ç®—æŸ¥è¯¢å‘é‡ä¸æ¯ä¸ªå€™é€‰å‘é‡çš„ä½™å¼¦ç›¸ä¼¼åº¦</li>
<li>æ ¹æ®è®°å¿†é¡¹çš„å±‚çº§ç±»å‹åº”ç”¨ç›¸åº”æƒé‡</li>
<li>æŒ‰ç…§åŠ æƒç›¸ä¼¼åº¦åˆ†æ•°å¯¹ç»“æœè¿›è¡Œæ’åº</li>
<li>è¿”å›å‰ K ä¸ªæœ€ç›¸å…³çš„ç»“æœç»™ä¸‹ä¸€ä¸ªå¤„ç†é˜¶æ®µ</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½¿å¾—ç³»ç»Ÿèƒ½å¤Ÿåœ¨æœ¬åœ°å¿«é€Ÿå®Œæˆé‡æ’åºæ“ä½œï¼Œè€Œæ— éœ€ä¾èµ–å¤–éƒ¨æœåŠ¡ï¼ŒåŒæ—¶é€šè¿‡å±‚çº§æƒé‡æœºåˆ¶å¯ä»¥ä¼˜å…ˆè€ƒè™‘æŸäº›ç±»å‹çš„è®°å¿†é¡¹ï¼Œä»è€Œæé«˜æ£€ç´¢ç»“æœçš„è´¨é‡ã€‚</p>
<h4 data-id="heading-27">2.8 MemoryReasoner</h4>
<p>MemoryReasoner æ˜¯ä¸€ä¸ªä¸“é—¨è´Ÿè´£å¯¹æ£€ç´¢åˆ°çš„è®°å¿†é¡¹è¿›è¡Œæ¨ç†å’ŒçŸ¥è¯†ç»¼åˆçš„ç»„ä»¶ã€‚å®ƒçš„ä¸»è¦èŒè´£æ˜¯å¯¹ä»ä¸åŒæ¥æºæ£€ç´¢åˆ°çš„è®°å¿†è¿›è¡Œåˆ†æã€ç­›é€‰å’Œä¼˜åŒ–ï¼Œä»è€Œæä¾›æ›´ç²¾ç¡®å’Œç›¸å…³çš„è®°å¿†ç»“æœã€‚</p>
<h5 data-id="heading-28">2.8.1 ä¸»è¦åŠŸèƒ½</h5>
<ul>
<li>
<p>è®°å¿†æ¨ç†ä¸ç»¼åˆ</p>
<ul>
<li>æ¥æ”¶åŸå§‹æŸ¥è¯¢å’Œå·²æ£€ç´¢çš„ç›¸å…³è®°å¿†é¡¹</li>
<li>åˆ©ç”¨å¤§å‹è¯­è¨€æ¨¡å‹åˆ†æå¤šä¸ªæ£€ç´¢åˆ°çš„è®°å¿†é¡¹</li>
<li>æ ¹æ®ç”¨æˆ·çš„æŸ¥è¯¢ç›®æ ‡ç»¼åˆç›¸å…³ä¿¡æ¯</li>
<li>ç”Ÿæˆæ›´åŠ ç²¾ç¡®å’Œç›¸å…³çš„è®°å¿†å“åº”</li>
</ul>
</li>
</ul>

<ul>
<li>
<p>æ™ºèƒ½ç­›é€‰</p>
<ul>
<li>é€šè¿‡ LLM åˆ¤æ–­å“ªäº›è®°å¿†é¡¹ä¸å½“å‰æŸ¥è¯¢æœ€ç›¸å…³</li>
<li>åªè¿”å›ç»è¿‡ç­›é€‰çš„ç›¸å…³è®°å¿†é¡¹</li>
</ul>
</li>
</ul>
<h5 data-id="heading-29">2.8.2 æ ¸å¿ƒæ–¹æ³•</h5>
<p>reason æ˜¯ä¸»è¦çš„æ¨ç†æ–¹æ³•ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>
<p>æ„å»ºæç¤ºè¯ï¼š</p>
<ul>
<li>ä½¿ç”¨æ¨¡æ¿ REASON_PROMPT æ„å»ºæ¨ç†æç¤ºè¯</li>
<li>å°†æ£€ç´¢åˆ°çš„è®°å¿†é¡¹æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨</li>
</ul>
</li>
<li>
<p>è°ƒç”¨ LLMï¼š</p>
<ul>
<li>å°†æ„å»ºå¥½çš„æç¤ºè¯å‘é€ç»™è¯­è¨€æ¨¡å‹ç”Ÿæˆå“åº”</li>
</ul>
</li>
<li>
<p>è§£æå“åº”ï¼š</p>
<ul>
<li>æå–æ¨¡å‹é€‰æ‹©çš„è®°å¿†é¡¹ ID</li>
<li>è¿”å›å¯¹åº”çš„è®°å¿†é¡¹åˆ—è¡¨</li>
</ul>
</li>
</ul>
<p>parse_selected_ids æ–¹æ³•è´Ÿè´£ä»æ¨¡å‹å“åº”ä¸­æå–é€‰å®šçš„è®°å¿†é¡¹ IDï¼š</p>
<ul>
<li>JSON è§£æï¼šé¦–å…ˆå°è¯•å°†å“åº”è§£æä¸º JSON æ ¼å¼</li>
<li>æ­£åˆ™è¡¨è¾¾å¼å›é€€ï¼šå¦‚æœ JSON è§£æå¤±è´¥ï¼Œåˆ™ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… UUID æ ¼å¼çš„ ID</li>
</ul>
<h5 data-id="heading-30">2.8.3 æç¤ºè¯</h5>
<pre><code class="hljs language-css" lang="css">REASON_PROMPT = """
You are <span class="hljs-selector-tag">a</span> reasoning agent working with <span class="hljs-selector-tag">a</span> memory system. You will synthesize knowledge <span class="hljs-selector-tag">from</span> multiple memory cards <span class="hljs-selector-tag">to</span> construct <span class="hljs-selector-tag">a</span> meaningful response <span class="hljs-selector-tag">to</span> the task below.
â€‹
Task: ${task}
â€‹
Memory cards (with metadata):
${detailed_memory_list}
â€‹
Please perform:
<span class="hljs-number">1</span>. Clustering by theme (topic/concept/fact)
<span class="hljs-number">2</span>. Identify useful chains or connections
<span class="hljs-number">3</span>. Return a curated list of memory card IDs with reasons.
â€‹
Output in JSON:
{
  "selected_ids": [...],
  <span class="hljs-string">"explanation"</span>: <span class="hljs-string">"..."</span>
}
"""
</code></pre>
<h5 data-id="heading-31">2.8.4 å·¥ä½œæµç¨‹æ€»ç»“</h5>
<ul>
<li>
<p>æ¥æ”¶æ¥è‡ªä¸Šä¸€é˜¶æ®µçš„æ£€ç´¢å’Œé‡æ’åºç»“æœ</p>
</li>
<li>
<p>æ„å»ºæ¨ç†æç¤ºè¯ï¼š</p>
<ul>
<li>å°†ç”¨æˆ·çš„æŸ¥è¯¢ã€è§£æåçš„ä»»åŠ¡ç›®æ ‡ä»¥åŠæ£€ç´¢åˆ°çš„è®°å¿†é¡¹ç»„åˆæˆä¸€ä¸ªç»“æ„åŒ–çš„æç¤ºè¯</li>
<li>ä½¿ç”¨é¢„å®šä¹‰çš„ REASON_PROMPT æ¨¡æ¿</li>
</ul>
</li>
<li>
<p>è°ƒç”¨ LLM è¿›è¡Œæ¨ç†ï¼š</p>
<ul>
<li>å°†æ„å»ºå¥½çš„æç¤ºè¯å‘é€ç»™å¤§å‹è¯­è¨€æ¨¡å‹</li>
<li>ä½¿ç”¨ LLM è¿›ä¸€æ­¥åˆ†æå’Œæ¨ç†è¿™äº›è®°å¿†é¡¹çš„ç›¸å…³æ€§</li>
<li>è·å–æ¨¡å‹çš„å“åº”ï¼Œè¯¥å“åº”åŒ…å«å¯¹è®°å¿†é¡¹çš„ç›¸å…³æ€§åˆ¤æ–­</li>
</ul>
</li>
<li>
<p>è§£æå’Œç­›é€‰ç»“æœï¼š</p>
<ul>
<li>
<p>è§£æ LLM çš„å“åº”ï¼Œæå–è¢«é€‰ä¸­çš„è®°å¿†é¡¹ ID</p>
</li>
<li>
<p>æ”¯æŒä¸¤ç§è§£ææ–¹å¼ï¼š</p>
<ul>
<li>JSON æ ¼å¼ï¼šç›´æ¥æå– selected_ids å­—æ®µ</li>
<li>æ–‡æœ¬æ ¼å¼ï¼šé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… UUID æ¨¡å¼</li>
</ul>
</li>
</ul>
</li>
<li>
<p>è¿”å›ç²¾é€‰è®°å¿†ï¼š</p>
<ul>
<li>æ ¹æ®è§£æå‡ºçš„ ID åˆ—è¡¨ç­›é€‰åŸå§‹è®°å¿†é¡¹</li>
<li>è¿”å›æœ€ç›¸å…³çš„ç»“æœå­é›†</li>
</ul>
</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½¿å¾—ç³»ç»Ÿèƒ½å¤Ÿåˆ©ç”¨ LLM çš„ç†è§£å’Œæ¨ç†èƒ½åŠ›ï¼Œä»å¤§é‡æ£€ç´¢åˆ°çš„è®°å¿†ä¸­é€‰å‡ºæœ€ç¬¦åˆç”¨æˆ·éœ€æ±‚çš„éƒ¨åˆ†ï¼Œæé«˜äº†ç³»ç»Ÿçš„å‡†ç¡®æ€§å’Œæ™ºèƒ½åŒ–æ°´å¹³ã€‚</p>
<h5 data-id="heading-32">2.8.5 ä¼˜åŠ¿</h5>
<ul>
<li>æ™ºèƒ½åŒ–å¤„ç†ï¼šåˆ©ç”¨ LLM çš„ç†è§£èƒ½åŠ›å¯¹è®°å¿†é¡¹è¿›è¡Œè¯­ä¹‰å±‚é¢çš„åˆ†æ</li>
<li>çµæ´»æ€§ï¼šæ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼çš„è§£æ</li>
<li>ç²¾å‡†æ€§ï¼šèƒ½å¤Ÿè¿›ä¸€æ­¥æå‡æ£€ç´¢ç»“æœçš„ç›¸å…³æ€§å’Œè´¨é‡</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼ŒMemoryReasoner åœ¨æ•´ä¸ªè®°å¿†æ£€ç´¢ç³»ç»Ÿä¸­æ‰®æ¼”ç€â€œæ™ºèƒ½ç­›é€‰å™¨â€çš„è§’è‰²ï¼Œé€šè¿‡å¼•å…¥ LLM çš„æ¨ç†èƒ½åŠ›ï¼Œä½¿ç³»ç»Ÿèƒ½å¤Ÿæ›´å‡†ç¡®åœ°ç†è§£ç”¨æˆ·éœ€æ±‚å¹¶è¿”å›æœ€ç›¸å…³çš„è®°å¿†é¡¹ã€‚</p>
<h4 data-id="heading-33">2.9 Reranker å’Œ Reasoner</h4>
<p>åœ¨ç³»ç»Ÿä¸­åŒæ—¶ä½¿ç”¨ Reranker å’Œ Reasoner æ˜¯ä¸ºäº†å®ç°ä¸åŒå±‚æ¬¡çš„æ£€ç´¢ç»“æœå¤„ç†å’Œä¼˜åŒ–ï¼Œå®ƒä»¬å„è‡ªæ‰¿æ‹…ä¸åŒçš„èŒè´£ã€‚</p>
<h5 data-id="heading-34">2.9.1 Reranker çš„ä½œç”¨</h5>
<p>Rerankerï¼ˆé‡æ’åºå™¨ï¼‰ä¸»è¦è´Ÿè´£å¯¹åˆæ­¥æ£€ç´¢ç»“æœè¿›è¡Œç›¸å…³æ€§é‡æ–°æ’åºï¼š</p>
<ul>
<li>åŠŸèƒ½ï¼šåŸºäºæŸ¥è¯¢å’Œå€™é€‰ç»“æœçš„ç›¸ä¼¼åº¦è®¡ç®—ï¼Œå¯¹æ£€ç´¢ç»“æœè¿›è¡Œé‡æ–°æ’åº</li>
<li>æ–¹æ³•ï¼šé€šå¸¸ä½¿ç”¨æ•°å­¦è®¡ç®—ï¼ˆå¦‚ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰æ¥è¯„ä¼°ç›¸å…³æ€§</li>
<li>è¾“å‡ºï¼šè¿”å›æŒ‰ç›¸å…³æ€§å¾—åˆ†æ’åºçš„è®°å¿†é¡¹åˆ—è¡¨</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">def rerank(self, query, graph_results, top_k, **kwargs):
 Â  Â <span class="hljs-comment"># è®¡ç®—ç›¸ä¼¼åº¦</span>
 Â  Â <span class="hljs-attr">sims</span> = _cosine_one_to_many(query_embedding, cand_vecs)
 Â  Â <span class="hljs-comment"># åº”ç”¨æƒé‡è°ƒæ•´</span>
 Â  Â <span class="hljs-attr">weighted</span> = [sim * get_weight(it) for sim, it in zip(sims, items_with_emb)]
 Â  Â <span class="hljs-comment"># æ’åºå¹¶è¿”å›å‰ K ä¸ªç»“æœ</span>
 Â  Â scored_pairs.sort(<span class="hljs-attr">key</span>=lambda x: x[<span class="hljs-number">1</span>], reverse=<span class="hljs-literal">True</span>)
 Â  Â return scored_pairs<span class="hljs-section">[:top_k]</span>
</code></pre>
<h5 data-id="heading-35">2.9.2 Reasoner çš„ä½œç”¨</h5>
<p>Reasonerï¼ˆæ¨ç†å™¨ï¼‰ä¸»è¦è´Ÿè´£å¯¹æ’åºåçš„ç»“æœè¿›è¡Œè¯­ä¹‰ç†è§£å’Œæ¨ç†ï¼š</p>
<ul>
<li>åŠŸèƒ½ï¼šåŸºäºè¯­è¨€æ¨¡å‹å¯¹æ£€ç´¢åˆ°çš„è®°å¿†é¡¹è¿›è¡Œè¯­ä¹‰ç†è§£å’Œæ¨ç†</li>
<li>æ–¹æ³•ï¼šä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹åˆ†ææŸ¥è¯¢å’Œè®°å¿†é¡¹ä¹‹é—´çš„æ·±å±‚è¯­ä¹‰å…³ç³»</li>
<li>è¾“å‡ºï¼šè¿”å›ç»è¿‡è¯­ä¹‰æ¨ç†ç­›é€‰åçš„æœ€ç»ˆè®°å¿†é¡¹</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">def reason(self, query, ranked_memories, parsed_goal):
 Â  Â <span class="hljs-comment"># æ„å»ºæ¨ç†æç¤º</span>
 Â  Â <span class="hljs-attr">prompt</span> = prompt_template.substitute(task=query, detailed_memory_list=memory_detailed_str)
 Â  Â <span class="hljs-comment"># ä½¿ç”¨ LLM è¿›è¡Œæ¨ç†</span>
 Â  Â <span class="hljs-attr">response</span> = self.llm.generate([{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: prompt}])
 Â  Â <span class="hljs-comment"># è§£æå¹¶è¿”å›æ¨ç†ç»“æœ</span>
 Â  Â <span class="hljs-attr">selected_ids</span> = self._parse_selected_ids(content)
 Â  Â return <span class="hljs-section">[m for m in ranked_memories if m.id in id_set]</span>
</code></pre>
<h5 data-id="heading-36">2.9.3 ä¸ºä»€ä¹ˆéœ€è¦ä¸¤è€…ç»“åˆï¼Ÿ</h5>
<ol start="0">
<li>ä¸åŒçš„å¤„ç†å±‚æ¬¡</li>
</ol>
<p>Rerankerï¼šåœ¨æ•°å­¦å‘é‡ç©ºé—´ä¸­è¿›è¡Œå¿«é€Ÿç›¸å…³æ€§è®¡ç®—</p>
<p>Reasonerï¼šåœ¨è¯­ä¹‰å±‚é¢è¿›è¡Œæ·±åº¦ç†è§£å’Œæ¨ç†</p>
<ol start="2">
<li>
<p>äº’è¡¥çš„ä¼˜åŠ¿</p>
<p>æ•ˆç‡ vs ç²¾åº¦ï¼šReranker å¿«é€Ÿç­›é€‰ï¼ŒReasoner ç²¾ç¡®æ¨ç†</p>
<p>å®šé‡ vs å®šæ€§ï¼šReranker åŸºäºæ•°å€¼è®¡ç®—ï¼ŒReasoner åŸºäºè¯­ä¹‰ç†è§£</p>
</li>
</ol>
<p>ç³»ç»Ÿè®¾è®¡ä¼˜åŠ¿</p>
<ul>
<li>
<p>æ€§èƒ½ä¼˜åŒ–ï¼šé¿å…ç›´æ¥å¯¹å¤§é‡å€™é€‰ç»“æœä½¿ç”¨æ˜‚è´µçš„ LLM æ¨ç†</p>
</li>
<li>
<p>ç²¾åº¦æå‡ï¼šå…ˆç”¨æ•°å­¦æ–¹æ³•ç²—ç­›ï¼Œå†ç”¨è¯­ä¹‰æ–¹æ³•ç²¾ç­›</p>
</li>
<li>
<p>æ¨¡å—åŒ–è®¾è®¡ï¼šä¸¤ä¸ªç»„ä»¶èŒè´£åˆ†æ˜ï¼Œä¾¿äºç‹¬ç«‹ä¼˜åŒ–å’Œæ›¿æ¢</p>
</li>
<li>
<p>é€‚åº”ä¸åŒåœºæ™¯ï¼š</p>
<ul>
<li>å¿«é€Ÿæ¨¡å¼ï¼šå¯èƒ½åªä½¿ç”¨ Reranker</li>
<li>ç²¾ç»†æ¨¡å¼ï¼šä¸¤è€…éƒ½ä½¿ç”¨ä»¥è·å¾—æœ€ä½³ç»“æœ</li>
</ul>
</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½¿å¾—ç³»ç»Ÿæ—¢èƒ½åœ¨ä¿è¯æ£€ç´¢è´¨é‡çš„åŒæ—¶æ§åˆ¶è®¡ç®—æˆæœ¬ï¼Œåˆèƒ½æ ¹æ®ä¸åŒçš„åº”ç”¨åœºæ™¯çµæ´»è°ƒæ•´å¤„ç†æµç¨‹ã€‚</p>
<h5 data-id="heading-37">2.9.4 å…·ä½“ç¤ºä¾‹</h5>
<p>å‡è®¾ç”¨æˆ·æŸ¥è¯¢ï¼šâ€œæœºå™¨å­¦ä¹ ä¸­çš„æ¢¯åº¦ä¸‹é™ç®—æ³•å¦‚ä½•å·¥ä½œï¼Ÿâ€</p>
<ul>
<li>
<p>åˆå§‹æ£€ç´¢ï¼šç³»ç»Ÿå¯èƒ½æ£€ç´¢åˆ° 100 ä¸ªç›¸å…³è®°å¿†é¡¹</p>
</li>
<li>
<p>Reranker å¤„ç†ï¼š</p>
<ul>
<li>è®¡ç®—æŸ¥è¯¢ä¸æ¯ä¸ªè®°å¿†é¡¹çš„ä½™å¼¦ç›¸ä¼¼åº¦</li>
<li>æ ¹æ®å±‚çº§æƒé‡ï¼ˆtopic/concept/factï¼‰è°ƒæ•´å¾—åˆ†</li>
<li>è¿”å›å‰ 20 ä¸ªæœ€ç›¸å…³çš„è®°å¿†é¡¹</li>
</ul>
</li>
<li>
<p>Reasoner å¤„ç†ï¼š</p>
<ul>
<li>å°†å‰ 20 ä¸ªè®°å¿†é¡¹å’ŒæŸ¥è¯¢ä¸€èµ·äº¤ç»™ LLM</li>
<li>LLM åˆ†æå“ªäº›è®°å¿†é¡¹çœŸæ­£å›ç­”äº†ç”¨æˆ·çš„é—®é¢˜</li>
<li>å¯èƒ½å‘ç°åªæœ‰å…¶ä¸­ 5 ä¸ªè®°å¿†é¡¹çœŸæ­£ç›¸å…³ä¸”äº’è¡¥</li>
<li>è¿”å›è¿™ 5 ä¸ªæœ€åˆé€‚çš„è®°å¿†é¡¹</li>
</ul>
</li>
</ul>
<h3 data-id="heading-38">0x03 å­å›¾æ£€ç´¢</h3>
<h4 data-id="heading-39">3.1 åŠŸèƒ½</h4>
<p>get_relevant_subgraphæ–¹æ³•çš„åŠŸèƒ½æ˜¯ï¼š</p>
<ul>
<li>
<p>æŸ¥æ‰¾ä¸æŸ¥è¯¢ç›¸å…³çš„å±€éƒ¨å­å›¾ï¼ˆFind Relevant Local Subgraphï¼‰</p>
<ul>
<li>æ¥æ”¶ç”¨æˆ·æŸ¥è¯¢å­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥</li>
<li>é€šè¿‡åµŒå…¥æ¨¡å‹å°†æŸ¥è¯¢è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º</li>
<li>åœ¨å›¾æ•°æ®åº“ä¸­æœç´¢ä¸æŸ¥è¯¢å‘é‡æœ€ç›¸ä¼¼çš„å‰kä¸ªèŠ‚ç‚¹</li>
</ul>
</li>
</ul>

<ul>
<li>
<p>æ„å»ºé‚»åŸŸå­å›¾ï¼ˆBuild Neighborhood Subgraphsï¼‰ï¼Œå¯¹æ¯ä¸ªç›¸ä¼¼èŠ‚ç‚¹ï¼š</p>
<ul>
<li>ç¡®ä¿å…¶çŠ¶æ€ç¬¦åˆæŒ‡å®šæ¡ä»¶ï¼ˆé»˜è®¤ä¸º"activated"ï¼‰</li>
<li>è·å–ä»¥è¯¥èŠ‚ç‚¹ä¸ºä¸­å¿ƒã€æŒ‡å®šæ·±åº¦ï¼ˆé»˜è®¤2è·³ï¼‰çš„å±€éƒ¨å­å›¾</li>
<li>æ”¶é›†ä¸­å¿ƒèŠ‚ç‚¹ã€é‚»å±…èŠ‚ç‚¹å’Œè¿æ¥è¾¹</li>
</ul>
</li>
</ul>

<ul>
<li>
<p>åˆå¹¶å¤šä¸ªå­å›¾ä¸ºç»Ÿä¸€ç»“æ„ï¼ˆMerge Subgraphsï¼‰</p>
<ul>
<li>
<p>å°†æ‰€æœ‰æ£€ç´¢åˆ°çš„å±€éƒ¨å­å›¾åˆå¹¶æˆä¸€ä¸ªè¿é€šçš„å­å›¾</p>
</li>
<li>
<p>å»é™¤é‡å¤èŠ‚ç‚¹å’Œè¾¹</p>
</li>
<li>
<p>è¿”å›åŒ…å«ä»¥ä¸‹ä¿¡æ¯çš„å­—å…¸ç»“æ„ï¼š</p>
<ul>
<li>core_id: æœ€åŒ¹é…çš„æ ¸å¿ƒèŠ‚ç‚¹ID</li>
<li>nodes: åˆå¹¶åçš„å”¯ä¸€èŠ‚ç‚¹åˆ—è¡¨</li>
<li>edges: åˆå¹¶åçš„å”¯ä¸€è¾¹åˆ—è¡¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>è¿™ç§æ–¹æ³•ç‰¹åˆ«é€‚ç”¨äºéœ€è¦ç†è§£å¤æ‚å…³ç³»å’Œä¸Šä¸‹æ–‡çš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æŸ¥æ‰¾ä¸ç‰¹å®šä¸»é¢˜ç›¸å…³çš„çŸ¥è¯†ç½‘ç»œç‰‡æ®µ</li>
<li>è¿›è¡Œå¤šè·³æ¨ç†ä»¥å‘ç°é—´æ¥å…³è”</li>
<li>æä¾›å¯è§£é‡Šçš„è®°å¿†æ£€ç´¢ç»“æœï¼Œå±•ç¤ºèŠ‚ç‚¹é—´çš„å…³ç³»è·¯å¾„</li>
</ul>
<p>ä¸»è¦ä¼˜åŠ¿åœ¨äºå®ƒä¸ä»…è¿”å›ç›¸å…³èŠ‚ç‚¹ï¼Œè¿˜ä¿ç•™äº†å®ƒä»¬ä¹‹é—´çš„è¯­ä¹‰å…³ç³»ç»“æ„ï¼Œè¿™å¯¹äºé«˜çº§æ¨ç†ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚</p>
<h4 data-id="heading-40">3.2 ä»£ç </h4>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"> Â  Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_relevant_subgraph</span>(<span class="hljs-params">
 Â  Â  Â  Â self, query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span>, depth: <span class="hljs-built_in">int</span> = <span class="hljs-number">2</span>, center_status: <span class="hljs-built_in">str</span> = <span class="hljs-string">"activated"</span>
 Â   </span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
 Â  Â  Â  Â <span class="hljs-string">"""
 Â  Â  Â   Find and merge the local neighborhood sub-graphs of the top-k
 Â  Â  Â   nodes most relevant to the query.
 Â  Â  Â  Â  Process:
 Â  Â  Â  Â  Â  Â  1. Embed the user query into a vector representation.
 Â  Â  Â  Â  Â  Â  2. Use vector similarity search to find the top-k similar nodes.
 Â  Â  Â  Â  Â  Â  3. For each similar node:
 Â  Â  Â  Â  Â  Â  Â  Â  - Ensure its status matches `center_status` (e.g., 'active').
 Â  Â  Â  Â  Â  Â  Â  Â  - Retrieve its local subgraph up to `depth` hops.
 Â  Â  Â  Â  Â  Â  Â  Â  - Collect the center node, its neighbors, and connecting edges.
 Â  Â  Â  Â  Â  Â  4. Merge all retrieved subgraphs into a single unified subgraph.
 Â  Â  Â  Â  Â  Â  5. Return the merged subgraph structure.
â€‹
 Â  Â  Â  Â  Args:
 Â  Â  Â  Â  Â  Â  query (str): The user input or concept to find relevant memories for.
 Â  Â  Â  Â  Â  Â  top_k (int, optional): How many top similar nodes to retrieve. Default is 5.
 Â  Â  Â  Â  Â  Â  depth (int, optional): The neighborhood depth (number of hops). Default is 2.
 Â  Â  Â  Â  Â  Â  center_status (str, optional): Status condition the center node must satisfy (e.g., 'active').
â€‹
 Â  Â  Â  Â  Returns:
 Â  Â  Â  Â  Â  Â  dict[str, Any]: A subgraph dict with:
 Â  Â  Â  Â  Â  Â  Â  Â  - 'core_id': ID of the top matching core node, or None if none found.
 Â  Â  Â  Â  Â  Â  Â  Â  - 'nodes': List of unique nodes (core + neighbors) in the merged subgraph.
 Â  Â  Â  Â  Â  Â  Â  Â  - 'edges': List of unique edges (as dicts with 'from', 'to', 'type') in the merged subgraph.
 Â  Â  Â   """</span>
 Â  Â  Â  Â <span class="hljs-comment"># Step 1: Embed query</span>
 Â  Â  Â  Â query_embedding = self.embedder.embed([query])[<span class="hljs-number">0</span>]
â€‹
 Â  Â  Â  Â <span class="hljs-comment"># Step 2: Get top-1 similar node</span>
 Â  Â  Â  Â similar_nodes = self.graph_store.search_by_embedding(query_embedding, top_k=top_k)
 Â  Â  Â  Â <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> similar_nodes:
 Â  Â  Â  Â  Â  Â logger.info(<span class="hljs-string">"No similar nodes found for query embedding."</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> {<span class="hljs-string">"core_id"</span>: <span class="hljs-literal">None</span>, <span class="hljs-string">"nodes"</span>: [], <span class="hljs-string">"edges"</span>: []}
â€‹
 Â  Â  Â  Â <span class="hljs-comment"># Step 3: Fetch neighborhood</span>
 Â  Â  Â  Â all_nodes = {}
 Â  Â  Â  Â all_edges = <span class="hljs-built_in">set</span>()
 Â  Â  Â  Â cores = []
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> similar_nodes:
 Â  Â  Â  Â  Â  Â core_id = node[<span class="hljs-string">"id"</span>]
 Â  Â  Â  Â  Â  Â score = node[<span class="hljs-string">"score"</span>]
â€‹
 Â  Â  Â  Â  Â  Â subgraph = self.graph_store.get_subgraph(
 Â  Â  Â  Â  Â  Â  Â  Â center_id=core_id, depth=depth, center_status=center_status
 Â  Â  Â  Â  Â   )
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> subgraph[<span class="hljs-string">"core_node"</span>]:
 Â  Â  Â  Â  Â  Â  Â  Â logger.info(<span class="hljs-string">f"Skipping node <span class="hljs-subst">{core_id}</span> (inactive or not found)."</span>)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">continue</span>
â€‹
 Â  Â  Â  Â  Â  Â core_node = subgraph[<span class="hljs-string">"core_node"</span>]
 Â  Â  Â  Â  Â  Â neighbors = subgraph[<span class="hljs-string">"neighbors"</span>]
 Â  Â  Â  Â  Â  Â edges = subgraph[<span class="hljs-string">"edges"</span>]
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment"># Collect nodes</span>
 Â  Â  Â  Â  Â  Â all_nodes[core_node[<span class="hljs-string">"id"</span>]] = core_node
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> neighbors:
 Â  Â  Â  Â  Â  Â  Â  Â all_nodes[n[<span class="hljs-string">"id"</span>]] = n
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment"># Collect edges</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> edges:
 Â  Â  Â  Â  Â  Â  Â  Â all_edges.add((e[<span class="hljs-string">"source"</span>], e[<span class="hljs-string">"target"</span>], e[<span class="hljs-string">"type"</span>]))
â€‹
 Â  Â  Â  Â  Â  Â cores.append(
 Â  Â  Â  Â  Â  Â  Â   {<span class="hljs-string">"id"</span>: core_id, <span class="hljs-string">"score"</span>: score, <span class="hljs-string">"core_node"</span>: core_node, <span class="hljs-string">"neighbors"</span>: neighbors}
 Â  Â  Â  Â  Â   )
â€‹
 Â  Â  Â  Â top_core = cores[<span class="hljs-number">0</span>]
 Â  Â  Â  Â <span class="hljs-keyword">return</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"core_id"</span>: top_core[<span class="hljs-string">"id"</span>],
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"nodes"</span>: <span class="hljs-built_in">list</span>(all_nodes.values()),
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"edges"</span>: [{<span class="hljs-string">"source"</span>: f, <span class="hljs-string">"target"</span>: t, <span class="hljs-string">"type"</span>: ty} <span class="hljs-keyword">for</span> (f, t, ty) <span class="hljs-keyword">in</span> all_edges],
 Â  Â  Â   }
</code></pre>
<h3 data-id="heading-41">0x04 å›¾æ•°æ®åº“</h3>
<p>å› ä¸ºå›¾æ•°æ®åº“æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬é€šè¿‡ç¤ºä¾‹æ¥è¿›è¡Œå­¦ä¹ ï¼Œä»¥ç®¡çª¥è±¹ã€‚</p>
<h4 data-id="heading-42">4.1 ç¤ºä¾‹</h4>
<p>run_user_session å‡½æ•°ä¸­ä¾¿æœ‰æœç´¢å†…å®¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">run_user_session</span>(<span class="hljs-params">
 Â  Â user_name: <span class="hljs-built_in">str</span>,
 Â  Â db_name: <span class="hljs-built_in">str</span>,
 Â  Â topic_text: <span class="hljs-built_in">str</span>,
 Â  Â concept_texts: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>],
 Â  Â fact_texts: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>],
</span>):
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n=== <span class="hljs-subst">{user_name}</span> starts building their memory graph ==="</span>)
â€‹
 Â  Â <span class="hljs-comment"># Manually initialize correct GraphDB class</span>
 Â  Â config = GraphDBConfigFactory(
 Â  Â  Â  Â backend=<span class="hljs-string">"nebular"</span>,
 Â  Â  Â  Â config={
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"uri"</span>: json.loads(os.getenv(<span class="hljs-string">"NEBULAR_HOSTS"</span>, <span class="hljs-string">"localhost"</span>)),
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"user"</span>: os.getenv(<span class="hljs-string">"NEBULAR_USER"</span>, <span class="hljs-string">"root"</span>),
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"password"</span>: os.getenv(<span class="hljs-string">"NEBULAR_PASSWORD"</span>, <span class="hljs-string">"xxxxxx"</span>),
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"space"</span>: db_name,
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"user_name"</span>: user_name,
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"use_multi_db"</span>: <span class="hljs-literal">False</span>,
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"auto_create"</span>: <span class="hljs-literal">True</span>,
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"embedding_dimension"</span>: embedder_dimension,
 Â  Â  Â   },
 Â   )
 Â  Â graph = GraphStoreFactory.from_config(config)
â€‹
 Â  Â <span class="hljs-comment"># Start with a clean slate for this user</span>
 Â  Â graph.clear()
â€‹
 Â  Â now = datetime.now(timezone.utc).isoformat()
â€‹
 Â  Â <span class="hljs-comment"># === Step 1: Create a root topic node (e.g., user's research focus) ===</span>
 Â  Â topic = TextualMemoryItem(
 Â  Â  Â  Â memory=topic_text,
 Â  Â  Â  Â metadata=TreeNodeTextualMemoryMetadata(
 Â  Â  Â  Â  Â  Â memory_type=<span class="hljs-string">"LongTermMemory"</span>,
 Â  Â  Â  Â  Â  Â key=<span class="hljs-string">"Research Topic"</span>,
 Â  Â  Â  Â  Â  Â hierarchy_level=<span class="hljs-string">"topic"</span>,
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">type</span>=<span class="hljs-string">"fact"</span>,
 Â  Â  Â  Â  Â  Â memory_time=<span class="hljs-string">"2024-01-01"</span>,
 Â  Â  Â  Â  Â  Â status=<span class="hljs-string">"activated"</span>,
 Â  Â  Â  Â  Â  Â visibility=<span class="hljs-string">"public"</span>,
 Â  Â  Â  Â  Â  Â tags=[<span class="hljs-string">"research"</span>, <span class="hljs-string">"rl"</span>],
 Â  Â  Â  Â  Â  Â updated_at=now,
 Â  Â  Â  Â  Â  Â embedding=embed_memory_item(topic_text),
 Â  Â  Â   ),
 Â   )
 Â  Â graph.add_node(topic.<span class="hljs-built_in">id</span>, topic.memory, topic.metadata.model_dump(exclude_none=<span class="hljs-literal">True</span>))
â€‹
 Â  Â <span class="hljs-comment"># === Step 2: Create two concept nodes linked to the topic ===</span>
 Â  Â concept_items = []
 Â  Â <span class="hljs-keyword">for</span> i, text <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(concept_texts):
 Â  Â  Â  Â concept = TextualMemoryItem(
 Â  Â  Â  Â  Â  Â memory=text,
 Â  Â  Â  Â  Â  Â metadata=TreeNodeTextualMemoryMetadata(
 Â  Â  Â  Â  Â  Â  Â  Â memory_type=<span class="hljs-string">"LongTermMemory"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â key=<span class="hljs-string">f"Concept <span class="hljs-subst">{i + <span class="hljs-number">1</span>}</span>"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â hierarchy_level=<span class="hljs-string">"concept"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">type</span>=<span class="hljs-string">"fact"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â memory_time=<span class="hljs-string">"2024-01-01"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â status=<span class="hljs-string">"activated"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â visibility=<span class="hljs-string">"public"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â updated_at=now,
 Â  Â  Â  Â  Â  Â  Â  Â embedding=embed_memory_item(text),
 Â  Â  Â  Â  Â  Â  Â  Â tags=[<span class="hljs-string">"concept"</span>],
 Â  Â  Â  Â  Â  Â  Â  Â confidence=<span class="hljs-number">90</span> + i,
 Â  Â  Â  Â  Â   ),
 Â  Â  Â   )
 Â  Â  Â  Â graph.add_node(concept.<span class="hljs-built_in">id</span>, concept.memory, concept.metadata.model_dump(exclude_none=<span class="hljs-literal">True</span>))
 Â  Â  Â  Â graph.add_edge(topic.<span class="hljs-built_in">id</span>, concept.<span class="hljs-built_in">id</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">"PARENT"</span>)
 Â  Â  Â  Â concept_items.append(concept)
â€‹
 Â  Â <span class="hljs-comment"># === Step 3: Create supporting facts under each concept ===</span>
 Â  Â <span class="hljs-keyword">for</span> i, text <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fact_texts):
 Â  Â  Â  Â fact = TextualMemoryItem(
 Â  Â  Â  Â  Â  Â memory=text,
 Â  Â  Â  Â  Â  Â metadata=TreeNodeTextualMemoryMetadata(
 Â  Â  Â  Â  Â  Â  Â  Â memory_type=<span class="hljs-string">"WorkingMemory"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â key=<span class="hljs-string">f"Fact <span class="hljs-subst">{i + <span class="hljs-number">1</span>}</span>"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â hierarchy_level=<span class="hljs-string">"fact"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">type</span>=<span class="hljs-string">"fact"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â memory_time=<span class="hljs-string">"2024-01-01"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â status=<span class="hljs-string">"activated"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â visibility=<span class="hljs-string">"public"</span>,
 Â  Â  Â  Â  Â  Â  Â  Â updated_at=now,
 Â  Â  Â  Â  Â  Â  Â  Â embedding=embed_memory_item(text),
 Â  Â  Â  Â  Â  Â  Â  Â confidence=<span class="hljs-number">85.0</span>,
 Â  Â  Â  Â  Â  Â  Â  Â tags=[<span class="hljs-string">"fact"</span>],
 Â  Â  Â  Â  Â   ),
 Â  Â  Â   )
 Â  Â  Â  Â graph.add_node(fact.<span class="hljs-built_in">id</span>, fact.memory, fact.metadata.model_dump(exclude_none=<span class="hljs-literal">True</span>))
 Â  Â  Â  Â graph.add_edge(concept_items[i % <span class="hljs-built_in">len</span>(concept_items)].<span class="hljs-built_in">id</span>, fact.<span class="hljs-built_in">id</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">"PARENT"</span>)
â€‹
 Â  Â <span class="hljs-comment"># === Step 4: Retrieve memory using semantic search ===</span>
 Â  Â vector = embed_memory_item(<span class="hljs-string">"How is memory retrieved?"</span>)
 Â  Â search_result = graph.search_by_embedding(vector, top_k=<span class="hljs-number">2</span>)
 Â  Â <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> search_result:
 Â  Â  Â  Â node = graph.get_node(r[<span class="hljs-string">"id"</span>])
 Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ” Search result:"</span>, node[<span class="hljs-string">"memory"</span>])
â€‹
 Â  Â <span class="hljs-comment"># === Step 5: Tag-based neighborhood discovery ===</span>
 Â  Â neighbors = graph.get_neighbors_by_tag([<span class="hljs-string">"concept"</span>], exclude_ids=[], top_k=<span class="hljs-number">2</span>)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“ Tag-related nodes:"</span>, [neighbor[<span class="hljs-string">"memory"</span>] <span class="hljs-keyword">for</span> neighbor <span class="hljs-keyword">in</span> neighbors])
â€‹
 Â  Â <span class="hljs-comment"># === Step 6: Retrieve children (facts) of first concept ===</span>
 Â  Â children = graph.get_children_with_embeddings(concept_items[<span class="hljs-number">0</span>].<span class="hljs-built_in">id</span>)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“ Children of concept:"</span>, [child[<span class="hljs-string">"memory"</span>] <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> children])
â€‹
 Â  Â <span class="hljs-comment"># === Step 7: Export a local subgraph and grouped statistics ===</span>
 Â  Â subgraph = graph.get_subgraph(topic.<span class="hljs-built_in">id</span>, depth=<span class="hljs-number">2</span>)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“Œ Subgraph node count:"</span>, <span class="hljs-built_in">len</span>(subgraph[<span class="hljs-string">"neighbors"</span>]))
â€‹
 Â  Â stats = graph.get_grouped_counts([<span class="hljs-string">"memory_type"</span>, <span class="hljs-string">"status"</span>])
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“Š Grouped counts:"</span>, stats)
â€‹
 Â  Â <span class="hljs-comment"># === Step 8: Demonstrate updates and cleanup ===</span>
 Â  Â graph.update_node(
 Â  Â  Â  Â concept_items[<span class="hljs-number">0</span>].<span class="hljs-built_in">id</span>, {<span class="hljs-string">"confidence"</span>: <span class="hljs-number">99.0</span>, <span class="hljs-string">"created_at"</span>: <span class="hljs-string">"2025-07-24T20:11:56.375687"</span>}
 Â   )
 Â  Â graph.remove_oldest_memory(<span class="hljs-string">"WorkingMemory"</span>, keep_latest=<span class="hljs-number">1</span>)
 Â  Â graph.delete_edge(topic.<span class="hljs-built_in">id</span>, concept_items[<span class="hljs-number">0</span>].<span class="hljs-built_in">id</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">"PARENT"</span>)
 Â  Â graph.delete_node(concept_items[<span class="hljs-number">1</span>].<span class="hljs-built_in">id</span>)
â€‹
 Â  Â <span class="hljs-comment"># === Step 9: Export and re-import the entire graph structure ===</span>
 Â  Â exported = graph.export_graph()
 Â  Â graph.import_graph(exported)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“¦ Graph exported and re-imported, total nodes:"</span>, <span class="hljs-built_in">len</span>(exported[<span class="hljs-string">"nodes"</span>]))
â€‹
 Â  Â <span class="hljs-comment"># ====================================</span>
 Â  Â <span class="hljs-comment"># ğŸ” Step 10: extra function</span>
 Â  Â <span class="hljs-comment"># ====================================</span>
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n=== ğŸ” Extra Tests for user: <span class="hljs-subst">{user_name}</span> ==="</span>)
â€‹
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">" - Memory count:"</span>, graph.get_memory_count(<span class="hljs-string">"LongTermMemory"</span>))
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">" - Node count:"</span>, graph.count_nodes(<span class="hljs-string">"LongTermMemory"</span>))
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">" - All LongTermMemory items:"</span>, graph.get_all_memory_items(<span class="hljs-string">"LongTermMemory"</span>))
â€‹
 Â  Â <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(exported[<span class="hljs-string">"edges"</span>]) &gt; <span class="hljs-number">0</span>:
 Â  Â  Â  Â n1, n2 = exported[<span class="hljs-string">"edges"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"source"</span>], exported[<span class="hljs-string">"edges"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"target"</span>]
 Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">" - Edge exists?"</span>, graph.edge_exists(n1, n2, exported[<span class="hljs-string">"edges"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"type"</span>]))
 Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">" - Edges for node:"</span>, graph.get_edges(n1))
â€‹
 Â  Â filters = [{<span class="hljs-string">"field"</span>: <span class="hljs-string">"memory_type"</span>, <span class="hljs-string">"op"</span>: <span class="hljs-string">"="</span>, <span class="hljs-string">"value"</span>: <span class="hljs-string">"LongTermMemory"</span>}]
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">" - Metadata query result:"</span>, graph.get_by_metadata(filters))
 Â  Â <span class="hljs-built_in">print</span>(
 Â  Â  Â  Â <span class="hljs-string">" - Optimization candidates:"</span>, graph.get_structure_optimization_candidates(<span class="hljs-string">"LongTermMemory"</span>)
 Â   )
 Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â graph.drop_database()
 Â  Â <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:
 Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">" - drop_database raised ValueError as expected:"</span>, e)
</code></pre>
<h4 data-id="heading-43">4.2 get_neighbors_by_tag</h4>
<p>get_neighbors_by_tag åŠŸèƒ½è¯´æ˜å¦‚ä¸‹ï¼š</p>
<h5 data-id="heading-44">4.2.1 åŠŸèƒ½æ¦‚è¿°</h5>
<p>get_neighbors_by_tag æ˜¯åŸºäºæ ‡ç­¾çš„é‚»å±…èŠ‚ç‚¹æ£€ç´¢æ–¹æ³•ï¼Œç”¨äºåœ¨å›¾æ•°æ®åº“ä¸­æŸ¥æ‰¾ä¸ç»™å®šèŠ‚ç‚¹å…·æœ‰ç›¸ä¼¼æ ‡ç­¾çš„ç›¸é‚»èŠ‚ç‚¹ã€‚é€šè¿‡è®¡ç®—æ ‡ç­¾é‡å åº¦è¯†åˆ«è¯­ä¹‰ç›¸å…³èŠ‚ç‚¹ï¼Œæ”¯æŒåŸºäºæ ‡ç­¾çš„å›¾éå†ä¸æ¨èã€‚</p>
<h5 data-id="heading-45">4.2.2 åº”ç”¨åœºæ™¯</h5>
<p>è®°å¿†é‡ç»„é˜¶æ®µå‘ç°å…·æœ‰å…±åŒä¸»é¢˜æˆ–æ¦‚å¿µçš„ç›¸å…³è®°å¿†èŠ‚ç‚¹ã€‚</p>
<p>æ”¯æŒæ¨ç†ä¸å…³è”åˆ†æï¼Œæ„å»ºè®°å¿†ä¹‹é—´çš„è¯­ä¹‰è¿æ¥ã€‚</p>
<p>ç”¨äºèšç±»åˆ†æï¼Œè¯†åˆ«æ ‡ç­¾ç»„åˆç›¸ä¼¼çš„èŠ‚ç‚¹ç¾¤ç»„ã€‚</p>
<h5 data-id="heading-46">4.2.3 å‚æ•°è¯´æ˜</h5>
<ul>
<li>tags (list[str])ï¼šç›®æ ‡æ ‡ç­¾åˆ—è¡¨ï¼Œç”¨äºåŒ¹é…ç›¸ä¼¼èŠ‚ç‚¹ã€‚</li>
<li>_exclude_ids (list[str])ï¼šéœ€æ’é™¤çš„èŠ‚ç‚¹ ID åˆ—è¡¨ï¼Œé¿å…è¿”å›è‡ªèº«æˆ–å·²çŸ¥èŠ‚ç‚¹ã€‚</li>
<li>top_k (int)ï¼šè¿”å›ç»“æœæ•°é‡ä¸Šé™ï¼Œé»˜è®¤é€šå¸¸ä¸º 5ã€‚</li>
<li>min_overlap (int)ï¼šæœ€å°æ ‡ç­¾é‡å æ•°ï¼Œä»…è¿”å›æ»¡è¶³è¯¥æ¡ä»¶çš„èŠ‚ç‚¹ã€‚</li>
</ul>
<h5 data-id="heading-47">4.2.4 ç­›é€‰æœºåˆ¶</h5>
<ul>
<li>æ ‡ç­¾äº¤é›†è®¡ç®—ï¼šæ¯”è¾ƒç›®æ ‡æ ‡ç­¾ä¸å€™é€‰èŠ‚ç‚¹æ ‡ç­¾çš„äº¤é›†å¤§å°ç¡®å®šç›¸å…³æ€§ã€‚</li>
<li>æœ€å°é‡å é˜ˆå€¼ï¼šä»…è¿”å›æ ‡ç­¾é‡å æ•°â‰¥min_overlap çš„èŠ‚ç‚¹ã€‚</li>
<li>æ’é™¤æœºåˆ¶ï¼šè¿‡æ»¤ _exclude_ids æŒ‡å®šçš„èŠ‚ç‚¹ï¼Œé˜²æ­¢å¾ªç¯å¼•ç”¨ã€‚</li>
</ul>
<h5 data-id="heading-48">4.2.5 æ£€ç´¢æµç¨‹</h5>
<ul>
<li>æ ¹æ®è¾“å…¥æ ‡ç­¾åœ¨å›¾æ•°æ®åº“ä¸­æŸ¥æ‰¾åŒ…å«è¿™äº›æ ‡ç­¾çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚</li>
<li>è®¡ç®—æ¯ä¸ªå€™é€‰èŠ‚ç‚¹ä¸ç›®æ ‡æ ‡ç­¾é›†åˆçš„äº¤é›†å¤§å°ã€‚</li>
<li>è¿‡æ»¤ä¸æ»¡è¶³æœ€å°é‡å è¦æ±‚çš„èŠ‚ç‚¹ã€‚</li>
<li>æŒ‰æ ‡ç­¾é‡å ç¨‹åº¦æ’åºå¹¶æˆªå–å‰ k ä¸ªèŠ‚ç‚¹ã€‚</li>
</ul>
<h5 data-id="heading-49">4.2.6 æ€§èƒ½ä¼˜åŒ–</h5>
<ul>
<li>åˆ©ç”¨å›¾æ•°æ®åº“ç´¢å¼•åŠ é€Ÿæ ‡ç­¾æŸ¥è¯¢ã€‚</li>
<li>é€šè¿‡æ‰¹é‡æ“ä½œå‡å°‘æ•°æ®åº“è®¿é—®æ¬¡æ•°ã€‚</li>
<li>æ”¯æŒå¹¶å‘æ‰§è¡Œï¼Œæé«˜å¤§è§„æ¨¡å›¾æ£€ç´¢æ•ˆç‡ã€‚</li>
</ul>
<p>MemOS-main\src\memos\graph_dbs\nebular.py ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less"> Â  Â <span class="hljs-variable">@timed</span>
 Â  Â def <span class="hljs-built_in">get_neighbors_by_tag</span>(
 Â  Â  Â  Â self,
 Â  Â  Â  Â <span class="hljs-attribute">tags</span>: list[str],
 Â  Â  Â  Â <span class="hljs-attribute">exclude_ids</span>: list[str],
 Â  Â  Â  Â <span class="hljs-attribute">top_k</span>: int = <span class="hljs-number">5</span>,
 Â  Â  Â  Â <span class="hljs-attribute">min_overlap</span>: int = <span class="hljs-number">1</span>,
 Â  Â  Â  Â <span class="hljs-attribute">include_embedding</span>: bool = False,
 Â   ) -&gt; list[dict[str, Any]]:
 Â  Â  Â  Â <span class="hljs-string">""</span>"
 Â  Â  Â   Find top-K neighbor nodes with maximum tag overlap.
â€‹
 Â  Â  Â   <span class="hljs-attribute">Args</span>:
 Â  Â  Â  Â  Â   <span class="hljs-attribute">tags</span>: The list of tags to match.
 Â  Â  Â  Â  Â   <span class="hljs-attribute">exclude_ids</span>: Node IDs to exclude (e.g., local cluster).
 Â  Â  Â  Â  Â   <span class="hljs-attribute">top_k</span>: Max number of neighbors to return.
 Â  Â  Â  Â  Â   <span class="hljs-attribute">min_overlap</span>: Minimum number of overlapping tags required.
 Â  Â  Â  Â  Â   <span class="hljs-attribute">include_embedding</span>: with/without embedding
â€‹
 Â  Â  Â   <span class="hljs-attribute">Returns</span>:
 Â  Â  Â  Â  Â   List of dicts with node details <span class="hljs-keyword">and</span> overlap count.
 Â  Â  Â   <span class="hljs-string">""</span>"
 Â  Â  Â  Â if <span class="hljs-keyword">not</span> <span class="hljs-attribute">tags</span>:
 Â  Â  Â  Â  Â  Â return []
â€‹
 Â  Â  Â  Â where_clauses = [
 Â  Â  Â  Â  Â  Â <span class="hljs-string">'n.status = "activated"'</span>,
 Â  Â  Â  Â  Â  Â <span class="hljs-string">'NOT (n.node_type = "reasoning")'</span>,
 Â  Â  Â  Â  Â  Â <span class="hljs-string">'NOT (n.memory_type = "WorkingMemory")'</span>,
 Â  Â  Â   ]
 Â  Â  Â  Â if <span class="hljs-attribute">exclude_ids</span>:
 Â  Â  Â  Â  Â  Â where_clauses.<span class="hljs-built_in">append</span>(f<span class="hljs-string">"NOT (n.id IN {exclude_ids})"</span>)
â€‹
 Â  Â  Â  Â where_clauses.<span class="hljs-built_in">append</span>(f<span class="hljs-string">'n.user_name = "{self.config.user_name}"'</span>)
â€‹
 Â  Â  Â  Â where_clause = <span class="hljs-string">" AND "</span>.<span class="hljs-built_in">join</span>(where_clauses)
 Â  Â  Â  Â tag_list_literal = <span class="hljs-string">"["</span> + <span class="hljs-string">", "</span>.<span class="hljs-built_in">join</span>(f<span class="hljs-string">'"{_escape_str(t)}"'</span> for t in tags) + <span class="hljs-string">"]"</span>
â€‹
 Â  Â  Â  Â return_fields = self.<span class="hljs-built_in">_build_return_fields</span>(include_embedding)
 Â  Â  Â  Â query = f<span class="hljs-string">""</span>"
 Â  Â  Â  Â  Â   LET tag_list = {<span class="hljs-selector-tag">tag_list_literal</span>}
â€‹
 Â  Â  Â  Â  Â   <span class="hljs-selector-tag">MATCH</span> (n<span class="hljs-variable">@Memory</span> <span class="hljs-comment">/*+ INDEX(idx_memory_user_name) */</span>)
 Â  Â  Â  Â  Â   <span class="hljs-selector-tag">WHERE</span> {<span class="hljs-selector-tag">where_clause</span>}
 Â  Â  Â  Â  Â   <span class="hljs-selector-tag">RETURN</span> {<span class="hljs-selector-tag">return_fields</span>},
 Â  Â  Â  Â  Â  Â  Â  <span class="hljs-selector-tag">size</span>( <span class="hljs-built_in">filter</span>( n.tags, t -&gt; t IN tag_list ) ) <span class="hljs-selector-tag">AS</span> <span class="hljs-selector-tag">overlap_count</span>
 Â  Â  Â  Â  Â   <span class="hljs-selector-tag">ORDER</span> <span class="hljs-selector-tag">BY</span> <span class="hljs-selector-tag">overlap_count</span> <span class="hljs-selector-tag">DESC</span>
 Â  Â  Â  Â  Â   <span class="hljs-selector-tag">LIMIT</span> {<span class="hljs-selector-tag">top_k</span>}
 Â  Â  Â  Â  Â   """
â€‹
 Â  Â  Â  Â <span class="hljs-selector-tag">result</span> = <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.execute_query</span>(query)
 Â  Â  Â  Â <span class="hljs-selector-tag">neighbors</span>: <span class="hljs-selector-tag">list</span><span class="hljs-selector-attr">[dict[str, Any]</span>] = <span class="hljs-selector-attr">[]</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">r</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">result</span>:
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">props</span> = {k: v.value for k, v in r.items() if k != "overlap_count"}
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">parsed</span> = <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">._parse_node</span>(props)
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">parsed</span><span class="hljs-selector-attr">[<span class="hljs-string">"overlap_count"</span>]</span> = <span class="hljs-selector-tag">r</span><span class="hljs-selector-attr">[<span class="hljs-string">"overlap_count"</span>]</span><span class="hljs-selector-class">.value</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">neighbors</span><span class="hljs-selector-class">.append</span>(parsed)
â€‹
 Â  Â  Â  Â <span class="hljs-selector-tag">neighbors</span><span class="hljs-selector-class">.sort</span>(key=lambda <span class="hljs-attribute">x</span>: x[<span class="hljs-string">"overlap_count"</span>], reverse=True)
 Â  Â  Â  Â <span class="hljs-selector-tag">neighbors</span> = <span class="hljs-selector-tag">neighbors</span><span class="hljs-selector-attr">[:top_k]</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">result</span> = <span class="hljs-selector-attr">[]</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">neighbor</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">neighbors</span><span class="hljs-selector-attr">[:top_k]</span>:
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">neighbor</span><span class="hljs-selector-class">.pop</span>(<span class="hljs-string">"overlap_count"</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">result</span><span class="hljs-selector-class">.append</span>(neighbor)
 Â  Â  Â  Â <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">result</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŒæ¡iOSå’ŒAndroidè®¾å¤‡åº”ç”¨è¿è¡ŒçŠ¶æ€ç›‘æ§ä¸æ€§èƒ½ä¼˜åŒ–å®Œæ•´æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7581314241409761315</link>    <guid>https://juejin.cn/post/7581314241409761315</guid>    <pubDate>2025-12-08T10:06:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581314241409761315" data-draft-id="7581299982670643234" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŒæ¡iOSå’ŒAndroidè®¾å¤‡åº”ç”¨è¿è¡ŒçŠ¶æ€ç›‘æ§ä¸æ€§èƒ½ä¼˜åŒ–å®Œæ•´æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-08T10:06:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç–¯ç‹‚çš„ç¨‹åºçŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2760245749234147"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŒæ¡iOSå’ŒAndroidè®¾å¤‡åº”ç”¨è¿è¡ŒçŠ¶æ€ç›‘æ§ä¸æ€§èƒ½ä¼˜åŒ–å®Œæ•´æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2760245749234147/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç–¯ç‹‚çš„ç¨‹åºçŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T10:06:31.000Z" title="Mon Dec 08 2025 10:06:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æŒæ¡è®¾å¤‡çŠ¶æ€ï¼šç›‘æ§ä¸ç®¡ç†æ­£åœ¨è¿è¡Œçš„app</p>
<p>ç®€ä»‹ï¼šæ™ºèƒ½æ‰‹æœºç”¨æˆ·äº†è§£å’Œç›‘æ§æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºå¯¹äºä¼˜åŒ–æ€§èƒ½ã€ç®¡ç†å†…å­˜å’Œä¿æŠ¤éšç§è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†æŒ‡å¯¼å¦‚ä½•æŸ¥çœ‹å’Œç®¡ç†Androidå’ŒiOSè®¾å¤‡ä¸Šçš„å½“å‰æ´»è·ƒè¿›ç¨‹ã€‚é€šè¿‡ç³»ç»Ÿè‡ªå¸¦åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥ç›‘æ§åº”ç”¨çš„CPUä½¿ç”¨ã€å†…å­˜å ç”¨ï¼Œå¹¶è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€ç”µé‡èŠ‚çœå’Œæ•…éšœæ’æŸ¥ã€‚æ­¤å¤–ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç³»ç»ŸæœåŠ¡APIæ·±å…¥äº†è§£åå°è¿›ç¨‹ä¿¡æ¯ï¼Œä»¥æå‡appè´¨é‡ã€‚</p>
<h2 data-id="heading-0">1. æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„appæ–¹æ³•</h2>
<p>åœ¨ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼Œäº†è§£å¦‚ä½•æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºå¯¹äºæ€§èƒ½ç›‘æ§å’Œæ•…éšœæ’æŸ¥è‡³å…³é‡è¦ã€‚è¿™ä¸€ç« èŠ‚å°†æ¢è®¨æŸ¥çœ‹è¿è¡Œåº”ç”¨çš„å‡ ç§æ–¹æ³•ï¼Œå¸®åŠ©ITä¸“ä¸šäººå‘˜å¿«é€Ÿè¯†åˆ«å’Œç®¡ç†æ­£åœ¨æ¶ˆè€—ç³»ç»Ÿèµ„æºçš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-1">1.1 ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦å·¥å…·æŸ¥çœ‹è¿è¡Œä¸­çš„åº”ç”¨</h3>
<p>å¤§å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½é…å¤‡äº†æŸ¥çœ‹å½“å‰è¿è¡Œåº”ç”¨çš„å†…ç½®å·¥å…·ã€‚ä¾‹å¦‚ï¼Œåœ¨Windowsç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»»åŠ¡ç®¡ç†å™¨ï¼ˆTask Managerï¼‰ï¼Œè€Œåœ¨macOSä¸Šï¼Œå¯ä»¥ä½¿ç”¨æ´»åŠ¨ç›‘è§†å™¨ï¼ˆActivity Monitorï¼‰ã€‚è¿™äº›å·¥å…·ä¸ä»…å¯ä»¥å±•ç¤ºåº”ç”¨åˆ—è¡¨ï¼Œè¿˜å¯ä»¥æä¾›CPUã€å†…å­˜å’Œç½‘ç»œä½¿ç”¨æƒ…å†µç­‰é‡è¦ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-2">1.2 ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·</h3>
<p>é™¤äº†å›¾å½¢ç•Œé¢å·¥å…·ä¹‹å¤–ï¼Œå‘½ä»¤è¡Œå·¥å…·ä¹Ÿæ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>top</code> æˆ– <code>htop</code> å‘½ä»¤å¿«é€ŸæŸ¥çœ‹æ‰€æœ‰è¿è¡Œä¸­çš„è¿›ç¨‹ã€‚é€šè¿‡è¿™äº›å‘½ä»¤è¡Œå·¥å…·ï¼ŒITä¸“ä¸šäººå‘˜å¯ä»¥è·å¾—æ›´å¤šçš„ç»†èŠ‚ä¿¡æ¯ï¼Œæ¯”å¦‚è¿›ç¨‹IDã€å¯åŠ¨æ—¶é—´ä»¥åŠå…·ä½“çš„èµ„æºå ç”¨ç‡ç­‰ã€‚</p>
<pre><code class="hljs">
htop
</code></pre>
<h3 data-id="heading-3">1.3 ç¬¬ä¸‰æ–¹åº”ç”¨ç›‘æ§å·¥å…·</h3>
<p>é™¤ç³»ç»Ÿè‡ªå¸¦å’Œå‘½ä»¤è¡Œå·¥å…·ä¹‹å¤–ï¼Œå¸‚åœºä¸Šè¿˜æœ‰è®¸å¤šç¬¬ä¸‰æ–¹åº”ç”¨ç›‘æ§å·¥å…·ï¼Œå®ƒä»¬å¾€å¾€å…·æœ‰æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œä¾‹å¦‚è·¨å¹³å°æŸ¥çœ‹ã€å†å²æ•°æ®è®°å½•å’Œè¯¦ç»†çš„æ€§èƒ½åˆ†ææŠ¥å‘Šã€‚è¿™ç±»å·¥å…·å¯¹äºéœ€è¦åœ¨å¤šæ“ä½œç³»ç»Ÿæˆ–å¤§å‹ä¼ä¸šç¯å¢ƒä¸­è¿›è¡Œæ€§èƒ½ç›‘æ§çš„ITä¸“ä¸šäººå‘˜å°¤å…¶æœ‰ç”¨ã€‚å¯¹äºiOSå¼€å‘ï¼ŒKeymobæä¾›å…¨é¢çš„æ€§èƒ½ç›‘æ§ã€æ–‡ä»¶ç®¡ç†å’Œæ—¥å¿—åˆ†æåŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…æ·±å…¥ä¼˜åŒ–åº”ç”¨æ€§èƒ½å¹¶æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<p>è¿™ä¸€ç« èŠ‚ä¸ºITä¸“ä¸šäººå‘˜æä¾›äº†ä¸€ä¸ªå…¥é—¨çº§åˆ«çš„æŒ‡å¯¼ï¼Œå¸®åŠ©ä»–ä»¬å¼€å§‹ç›‘æ§å’Œç®¡ç†è¿è¡Œä¸­çš„åº”ç”¨ç¨‹åºã€‚åç»­ç« èŠ‚å°†æ·±å…¥æ¢è®¨æ›´é«˜çº§çš„ç›‘æ§å’Œä¼˜åŒ–æŠ€å·§ã€‚</p>
<h2 data-id="heading-4">2. ç›‘æ§è®¾å¤‡èµ„æºä½¿ç”¨</h2>
<h4 data-id="heading-5">2.1 ç›‘æ§CPUä½¿ç”¨ç‡</h4>
<h5 data-id="heading-6">2.1.1 CPUä½¿ç”¨ç‡çš„æ„ä¹‰</h5>
<p>CPUä½œä¸ºè®¡ç®—æœºç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œå…¶æ€§èƒ½ç›´æ¥å½±å“åˆ°åº”ç”¨ç¨‹åºçš„è¿è¡Œæ•ˆç‡å’Œæ•´ä¸ªç³»ç»Ÿçš„å“åº”é€Ÿåº¦ã€‚CPUä½¿ç”¨ç‡æ˜¯è¡¡é‡CPUè´Ÿè½½æ°´å¹³çš„å…³é”®æŒ‡æ ‡ï¼Œå®ƒåæ˜ äº†CPUåœ¨æ‰§è¡Œä»»åŠ¡æ—¶çš„å¿™ç¢Œç¨‹åº¦ã€‚ç›‘æ§CPUä½¿ç”¨ç‡æœ‰åŠ©äºå¼€å‘è€…åŠæ—¶å‘ç°æ€§èƒ½ç“¶é¢ˆï¼Œä¼˜åŒ–åº”ç”¨ç¨‹åºï¼Œé¿å…å› è¿‡è½½è€Œå¼•èµ·çš„ç³»ç»Ÿæ•…éšœã€‚</p>
<h5 data-id="heading-7">2.1.2 ç›‘æ§å·¥å…·å’Œæ–¹æ³•</h5>
<p><strong>å‘½ä»¤è¡Œå·¥å…·ï¼š</strong></p>
<p>Linuxç³»ç»Ÿä¸­å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·åŒ…æ‹¬ <code>top</code> , <code>htop</code> , <code>vmstat</code> , <code>iostat</code> ç­‰ã€‚è¿™äº›å·¥å…·å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼Œæä¾›å®æ—¶çš„ç³»ç»ŸçŠ¶æ€å’Œæ€§èƒ½æ•°æ®ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">
top
sudo apt-get install htop
htop
</code></pre>
<p>ä»¥ä¸Šå‘½ä»¤ä¼šå±•ç¤ºç³»ç»Ÿå½“å‰çš„èµ„æºä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€è¿›ç¨‹ç­‰ä¿¡æ¯ã€‚</p>
<p><strong>GUIå·¥å…·ï¼š</strong></p>
<p>å¦‚ <code>System Monitor</code> ï¼ˆç³»ç»Ÿç›‘è§†å™¨ï¼‰æˆ– <code>Resource Monitor</code> ï¼ˆèµ„æºç›‘è§†å™¨ï¼‰ï¼Œè¿™äº›å›¾å½¢ç•Œé¢å·¥å…·å¯ä»¥æä¾›æ›´ç›´è§‚çš„æ•°æ®å±•ç¤ºã€‚</p>
<p><strong>ç¼–ç¨‹ç›‘æ§ï¼š</strong></p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œç¼–ç¨‹è¯­è¨€æä¾›çš„åº“æˆ–APIå¯ä»¥é›†æˆåˆ°åº”ç”¨ä¸­ï¼Œå®ç°æ›´ç»†ç²’åº¦çš„ç›‘æ§ã€‚</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-keyword">import</span> psutil
cpu_usage = psutil.cpu_percent(interval=<span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å½“å‰CPUä½¿ç”¨ç‡: <span class="hljs-subst">{cpu_usage}</span>%"</span>)
</code></pre>
<h4 data-id="heading-8">2.2 ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ</h4>
<h5 data-id="heading-9">2.2.1 å†…å­˜æ³„æ¼çš„å½±å“</h5>
<p>å†…å­˜æ³„æ¼æ˜¯åº”ç”¨ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸æ–­æ¶ˆè€—å†…å­˜èµ„æºï¼Œå´æœªèƒ½æœ‰æ•ˆé‡Šæ”¾å·²åˆ†é…çš„å†…å­˜ï¼Œå¯¼è‡´éšç€æ—¶é—´æ¨ç§»å¯ç”¨å†…å­˜é€æ¸å‡å°‘çš„ç°è±¡ã€‚å†…å­˜æ³„æ¼ä¼šé€ æˆåº”ç”¨ç¨‹åºæ€§èƒ½ä¸‹é™ï¼Œç³»ç»Ÿè¿è¡Œç¼“æ…¢ï¼Œä¸¥é‡çš„å†…å­˜æ³„æ¼ç”šè‡³ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p>
<h5 data-id="heading-10">2.2.2 å†…å­˜ç›‘æ§çš„å®è·µæŠ€å·§</h5>
<p><strong>å†…å­˜ä½¿ç”¨é‡ç›‘æ§ï¼š</strong></p>
<p>é€šè¿‡è§‚å¯Ÿç³»ç»Ÿçš„å†…å­˜ä½¿ç”¨æ€»é‡ä»¥åŠå„ä¸ªè¿›ç¨‹çš„å†…å­˜å ç”¨æƒ…å†µï¼Œå¯ä»¥åŠæ—¶å‘ç°å†…å­˜ä½¿ç”¨çš„å¼‚å¸¸æƒ…å†µã€‚</p>
<pre><code class="hljs language-c" lang="c">
<span class="hljs-built_in">free</span> -h
</code></pre>
<pre><code class="hljs language-bash" lang="bash">
ps -o pid,<span class="hljs-built_in">comm</span>,rss,args -C [process_name]
</code></pre>
<p><strong>å†…å­˜æ³„æ¼æ£€æµ‹å·¥å…·ï¼š</strong></p>
<p>å†…å­˜æ³„æ¼æ£€æµ‹é€šå¸¸éœ€è¦ä½¿ç”¨ç‰¹å®šçš„å·¥å…·ï¼Œå¦‚Valgrindï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„ç¨‹åºåˆ†æå·¥å…·ï¼Œèƒ½å¤Ÿæ£€æµ‹ç¨‹åºä¸­çš„å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚</p>
<pre><code class="hljs language-css" lang="css">
sudo apt-get install valgrind
valgrind <span class="hljs-attr">--leak-check</span>=full <span class="hljs-selector-attr">[program]</span>
</code></pre>
<p>ä»¥ä¸Šå‘½ä»¤ä¼šè¿è¡Œç¨‹åºå¹¶æ£€æŸ¥å†…å­˜æ³„æ¼ã€‚</p>
<p>æ­¤å¤–ï¼Œè®¸å¤šé›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰å¦‚Eclipseã€IntelliJ IDEAç­‰ä¹Ÿæä¾›äº†å†…å­˜æ³„æ¼æ£€æµ‹åŠŸèƒ½ã€‚é€šè¿‡é›†æˆè¿™äº›å·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­å®æ—¶ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå¿«é€Ÿå®šä½å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p>
<p>é€šè¿‡ä¸Šè¿°çš„CPUå’Œå†…å­˜ç›‘æ§æ–¹æ³•ï¼Œå¯ä»¥ç¡®ä¿åº”ç”¨å’Œç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä¸ºç”¨æˆ·æä¾›æ›´æµç•…çš„ä½¿ç”¨ä½“éªŒã€‚ä¸‹ä¸€ç« å°†æ·±å…¥æ¢è®¨æ€§èƒ½ä¼˜åŒ–å’Œç”µé‡èŠ‚çœç­–ç•¥ï¼Œä»¥è¿›ä¸€æ­¥æå‡åº”ç”¨æ€§èƒ½ã€‚</p>
<h2 data-id="heading-11">3. æ€§èƒ½ä¼˜åŒ–å’Œç”µé‡èŠ‚çœç­–ç•¥</h2>
<p>æ€§èƒ½ä¼˜åŒ–å’Œç”µé‡èŠ‚çœæ˜¯ä»»ä½•åº”ç”¨å¼€å‘è€…éƒ½å¿…é¡»é¢å¯¹çš„ä¸¤å¤§æŒ‘æˆ˜ã€‚éšç€ç”¨æˆ·å¯¹ç§»åŠ¨è®¾å¤‡çš„ä¾èµ–æ—¥ç›Šå¢åŠ ï¼Œåº”ç”¨çš„å“åº”é€Ÿåº¦å’Œç”µæ± ç»­èˆªèƒ½åŠ›ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒã€‚æœ¬ç« å°†æ·±å…¥æ¢è®¨æ€§èƒ½ä¼˜åŒ–çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ€§èƒ½ç“¶é¢ˆåˆ†æå’Œä¼˜åŒ–å·¥å…·çš„ä½¿ç”¨ï¼Œä»¥åŠç”µé‡èŠ‚çœçš„ç­–ç•¥å’Œæ–¹æ³•ã€‚</p>
<h3 data-id="heading-12">3.1 æ€§èƒ½ä¼˜åŒ–åŸºç¡€</h3>
<p>æ€§èƒ½ä¼˜åŒ–æ—¨åœ¨æé«˜åº”ç”¨çš„è¿è¡Œé€Ÿåº¦ã€æ•ˆç‡å’Œå“åº”èƒ½åŠ›ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œé¦–å…ˆè¦è¯†åˆ«å’Œåˆ†æåº”ç”¨çš„æ€§èƒ½ç“¶é¢ˆï¼Œç„¶ååˆ©ç”¨å„ç§ä¼˜åŒ–å·¥å…·å’ŒæŠ€æœ¯è¿›è¡Œé’ˆå¯¹æ€§çš„æ”¹è¿›ã€‚</p>
<h4 data-id="heading-13">3.1.1 åº”ç”¨æ€§èƒ½ç“¶é¢ˆåˆ†æ</h4>
<p>åº”ç”¨æ€§èƒ½ç“¶é¢ˆæ˜¯æŒ‡é‚£äº›é™åˆ¶åº”ç”¨æ€§èƒ½è¾¾åˆ°æœ€ä¼˜çŠ¶æ€çš„å› ç´ ã€‚è¿™äº›ç“¶é¢ˆå¯èƒ½æ¥æºäºä»£ç å±‚é¢çš„ç®—æ³•æ•ˆç‡é—®é¢˜ã€æ•°æ®ç»“æ„é€‰æ‹©ä¸å½“ã€èµ„æºäº‰ç”¨ç­‰ã€‚æ­¤å¤–ï¼Œåº”ç”¨å¯¹ç³»ç»Ÿèµ„æºçš„è¿‡åº¦æ¶ˆè€—ï¼Œå¦‚CPUå’Œå†…å­˜çš„é«˜ä½¿ç”¨ç‡ï¼Œä¹Ÿå¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>åˆ†ææ€§èƒ½ç“¶é¢ˆé€šå¸¸ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼š</p>
<ul>
<li><strong>ä»£ç å‰–æï¼ˆProfilingï¼‰</strong> ï¼šä½¿ç”¨ä»£ç å‰–æå·¥å…·ï¼ˆå¦‚Android Studioä¸­çš„Profilerå·¥å…·ï¼‰æ¥ç›‘æ§åº”ç”¨çš„CPUã€å†…å­˜å’Œç½‘ç»œä½¿ç”¨æƒ…å†µã€‚</li>
<li><strong>æ€§èƒ½æµ‹è¯•</strong> ï¼šç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬æ¥æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œï¼Œå¹¶æµ‹é‡åº”ç”¨çš„å“åº”æ—¶é—´å’Œèµ„æºæ¶ˆè€—ã€‚</li>
<li><strong>ç”¨æˆ·åé¦ˆ</strong> ï¼šæ”¶é›†ç”¨æˆ·åœ¨çœŸå®ä½¿ç”¨åœºæ™¯ä¸‹çš„åé¦ˆä¿¡æ¯ï¼Œäº†è§£æ€§èƒ½é—®é¢˜çš„å®é™…æƒ…å†µã€‚</li>
</ul>
<h4 data-id="heading-14">3.1.2 ä¼˜åŒ–å·¥å…·å’Œå®è·µæ¡ˆä¾‹</h4>
<p>é’ˆå¯¹æ€§èƒ½ç“¶é¢ˆï¼Œå¼€å‘è€…å¯ä»¥åˆ©ç”¨å¤šç§å·¥å…·è¿›è¡Œä¼˜åŒ–ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä¼˜åŒ–å·¥å…·å’Œå®è·µæ¡ˆä¾‹ï¼š</p>
<ul>
<li><strong>CPU Profiler</strong> ï¼šé€šè¿‡CPU Profilerå¯ä»¥æŸ¥çœ‹åº”ç”¨åœ¨è¿è¡Œæ—¶çš„CPUä½¿ç”¨æƒ…å†µã€‚å·¥å…·æä¾›äº†ç«ç„°å›¾ï¼ˆFlame Graphï¼‰æ¥ç›´è§‚å±•ç¤ºæ–¹æ³•è°ƒç”¨çš„è€—æ—¶åˆ†å¸ƒï¼Œä¾¿äºå‘ç°è€—æ—¶è¾ƒé•¿çš„æ–¹æ³•ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">performTask</span><span class="hljs-params">()</span></span> {
    Thread.sleep(<span class="hljs-number">5000</span>)
}
</code></pre>
<p>ä»¥ä¸Šä»£ç ä¸­çš„ <code>performTask</code> å‡½æ•°å°†æ¨¡æ‹Ÿé•¿æ—¶é—´çš„CPUä½¿ç”¨ï¼Œè¿™åœ¨CPU Profilerä¸­å°†è¡¨ç°ä¸ºä¸€ä¸ªçƒ­ç‚¹ï¼ˆHotspotï¼‰ã€‚</p>
<ul>
<li><strong>Memory Profiler</strong> ï¼šMemory Profileræœ‰åŠ©äºæ£€æµ‹å†…å­˜æ³„æ¼å’Œå†…å­˜ä½¿ç”¨æ³¢åŠ¨ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡åˆ†æå†…å­˜åˆ†é…å’Œå›æ”¶çš„æ¨¡å¼æ¥è¯†åˆ«æ½œåœ¨çš„å†…å­˜é—®é¢˜ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context = <span class="hljs-keyword">this</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
<span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
    }
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
<span class="hljs-keyword">super</span>.onDestroy()
        context = <span class="hljs-literal">null</span>
    }
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ <code>MainActivity</code> ç±»é€šè¿‡ä¸€ä¸ªé™æ€å˜é‡æŒæœ‰äº†å¯¹è‡ªèº«çš„å¼•ç”¨ï¼Œå¦‚æœåœ¨ <code>onDestroy</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ä¸å°†è¯¥é™æ€å˜é‡è®¾ç½®ä¸º <code>null</code> ï¼Œå°±å¯èƒ½å¼•èµ·å†…å­˜æ³„æ¼ã€‚</p>
<ul>
<li><strong>Benchmarking Libraries</strong> ï¼šå¯¹äºéœ€è¦è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•çš„åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨å¦‚Android Benchmark Harnessï¼ˆABHï¼‰ç­‰æµ‹è¯•æ¡†æ¶æ¥æµ‹é‡ä»£ç çš„æ‰§è¡Œæ—¶é—´ã€‚</li>
</ul>
<h3 data-id="heading-15">3.2 ç”µé‡èŠ‚çœæŠ€å·§</h3>
<p>ç”µæ± ç»­èˆªèƒ½åŠ›å¯¹äºç§»åŠ¨è®¾å¤‡æ¥è¯´è‡³å…³é‡è¦ï¼Œä¼˜åŒ–åº”ç”¨ä»¥å‡å°‘ç”µé‡æ¶ˆè€—å¯ä»¥æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h4 data-id="heading-16">3.2.1 ç”µé‡æ¶ˆè€—çš„å¸¸è§åŸå› </h4>
<p>åº”ç”¨åœ¨åå°è¿è¡Œã€é¢‘ç¹çš„ç½‘ç»œè¯·æ±‚ã€é«˜é¢‘ç‡çš„GPSå®šä½æ›´æ–°ã€å±å¹•äº®åº¦è°ƒæ•´ä»¥åŠCPUå’Œå†…å­˜èµ„æºçš„è¿‡åº¦ä½¿ç”¨éƒ½æ˜¯å¯¼è‡´ç”µé‡æ¶ˆè€—çš„å¸¸è§åŸå› ã€‚</p>
<ul>
<li><strong>åå°æœåŠ¡</strong> ï¼šæ— é™åˆ¶çš„åå°æœåŠ¡ä¼šæ¶ˆè€—CPUèµ„æºï¼Œé—´æ¥å¯¼è‡´ç”µé‡æ¶ˆè€—ã€‚</li>
<li><strong>ç½‘ç»œæ´»åŠ¨</strong> ï¼šç½‘ç»œè¯·æ±‚ï¼Œå°¤å…¶æ˜¯æ— çº¿ç½‘ç»œè¯·æ±‚ï¼Œæ˜¯ç”µæ± ä½¿ç”¨å¤§æˆ·ã€‚</li>
<li><strong>å±å¹•äº®åº¦</strong> ï¼šå±å¹•äº®åº¦è°ƒèŠ‚ä¸ºæœ€é«˜æ—¶ï¼Œç”µé‡æ¶ˆè€—ä¼šæ˜¾è‘—å¢åŠ ã€‚</li>
</ul>
<h4 data-id="heading-17">3.2.2 å®ç°ç”µé‡èŠ‚çœçš„ç­–ç•¥å’Œæ–¹æ³•</h4>
<p>ä¸ºäº†é™ä½åº”ç”¨çš„ç”µé‡æ¶ˆè€—ï¼Œå¼€å‘è€…å¯ä»¥é‡‡å–ä»¥ä¸‹ç­–ç•¥å’Œæ–¹æ³•ï¼š</p>
<ul>
<li><strong>ä¼˜åŒ–åå°æœåŠ¡</strong> ï¼šé™åˆ¶åå°æœåŠ¡çš„ä½¿ç”¨ï¼Œä»…åœ¨å¿…è¦æ—¶å”¤é†’æœåŠ¡è¿›è¡Œå·¥ä½œã€‚</li>
<li><strong>å‡å°‘ç½‘ç»œè¯·æ±‚</strong> ï¼šåˆå¹¶å¤šä¸ªå°çš„ç½‘ç»œè¯·æ±‚ä¸ºä¸€ä¸ªå¤§çš„è¯·æ±‚ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°ï¼Œå‡å°‘æ•°æ®ä¼ è¾“ã€‚</li>
<li><strong>æ§åˆ¶å±å¹•äº®åº¦</strong> ï¼šåœ¨åº”ç”¨å†…è®¾ç½®åˆç†çš„å±å¹•äº®åº¦ï¼Œæˆ–è€…ä½¿ç”¨ç³»ç»Ÿæä¾›çš„äº®åº¦æ§åˆ¶APIã€‚</li>
<li><strong>ä½¿ç”¨çœç”µAPI</strong> ï¼šåˆ©ç”¨å¹³å°æä¾›çš„çœç”µæ¨¡å¼APIï¼Œå¦‚åœ¨Androidä¸­å¯ä»¥ä½¿ç”¨ <code>Doze Mode</code> å’Œ <code>App Standby</code> æ¥å‡å°‘åœ¨åå°çš„ç”µæ± æ¶ˆè€—ã€‚</li>
</ul>
<pre><code class="hljs language-scss" lang="scss">
if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {
PowerManager powerManager = (PowerManager) <span class="hljs-built_in">getSystemService</span>(POWER_SERVICE);
    powerManager<span class="hljs-selector-class">.setDozeRestrict</span>(PowerManager.RESTRICTION_TYPE_EXEMPTED);
}
</code></pre>
<p>ä»¥ä¸Šä»£ç å±•ç¤ºäº†å¦‚ä½•åœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶ä¸ºåº”ç”¨å¯ç”¨Dozeæ¨¡å¼ï¼Œä»è€Œè¾¾åˆ°å‡å°‘ç”µæ± æ¶ˆè€—çš„ç›®çš„ã€‚</p>
<p>é€šè¿‡ç»“åˆè¿™äº›æ€§èƒ½ä¼˜åŒ–å’Œç”µé‡èŠ‚çœç­–ç•¥ï¼Œå¼€å‘è€…å¯ä»¥æ˜¾è‘—æé«˜åº”ç”¨çš„è¿è¡Œæ•ˆç‡å’Œç”µæ± ç»­èˆªï¼Œæœ€ç»ˆè¾¾åˆ°æå‡ç”¨æˆ·æ»¡æ„åº¦çš„ç›®æ ‡ã€‚åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥æ¢è®¨å¦‚ä½•ä¿æŠ¤ç”¨æˆ·çš„ä¸ªäººéšç§ä»¥åŠæ•…éšœæ’æŸ¥å’Œä¿®å¤æŠ€å·§ï¼Œç¡®ä¿åº”ç”¨çš„é•¿æœŸç¨³å®šè¿è¡Œã€‚</p>
<h2 data-id="heading-18">4. ä¿æŠ¤ä¸ªäººéšç§å’Œæ•…éšœæ’æŸ¥æŠ€å·§</h2>
<p>åœ¨å½“ä»Šæ•°å­—æ—¶ä»£ï¼Œä¸ªäººéšç§ä¿æŠ¤å’Œæ•…éšœæ’æŸ¥å·²æˆä¸ºæ¯ä¸ªç”¨æˆ·å’Œå¼€å‘è€…å…³æ³¨çš„é‡ç‚¹ã€‚æœ¬ç« å°†æ·±å…¥æ¢è®¨å¦‚ä½•ä¿æŠ¤ç”¨æˆ·éšç§ï¼Œä»¥åŠå¦‚ä½•é«˜æ•ˆåœ°è¿›è¡Œæ•…éšœæ’æŸ¥ã€‚</p>
<h3 data-id="heading-19">4.1 éšç§ä¿æŠ¤æœºåˆ¶</h3>
<p>éšç§æ³„éœ²çš„é£é™©æ— å¤„ä¸åœ¨ï¼Œè€Œä¸ªäººéšç§ä¿æŠ¤åˆ™æ˜¯ç¡®ä¿æ•°æ®å®‰å…¨å’Œä¸ªäººä¿¡æ¯å®‰å…¨çš„å…³é”®æªæ–½ã€‚ä¸‹é¢è¯¦ç»†è®²è§£éšç§æ³„éœ²çš„é£é™©ä¸é¢„é˜²ä»¥åŠåº”ç”¨æƒé™ç®¡ç†å’Œå®‰å…¨è®¾ç½®ã€‚</p>
<h4 data-id="heading-20">4.1.1 éšç§æ³„éœ²çš„é£é™©ä¸é¢„é˜²</h4>
<p>éšç§æ³„éœ²å¯èƒ½å¯¼è‡´è¯¸å¤šé—®é¢˜ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºèº«ä»½ç›—ç”¨ã€è´¢äº§æŸå¤±ã€ä¸ªäººç”Ÿæ´»è¢«å¹²æ‰°ç­‰ã€‚é¢„é˜²éšç§æ³„éœ²ä¸»è¦ä¾èµ–äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>æ•°æ®åŠ å¯†</strong> ï¼šå¯¹æ•æ„Ÿæ•°æ®è¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œç¡®ä¿å³ä½¿æ•°æ®è¢«éæ³•è·å–ï¼Œä¹Ÿæ— æ³•è½»æ˜“è¢«è§£è¯»ã€‚</li>
<li><strong>æœ€å°æƒé™åŸåˆ™</strong> ï¼šåº”ç”¨ä»…è¯·æ±‚å¯¹å®Œæˆå…¶åŠŸèƒ½æ‰€å¿…éœ€çš„æœ€ä½æƒé™ï¼Œé™ä½æ•°æ®æ³„éœ²çš„é£é™©ã€‚</li>
<li><strong>å®šæœŸæ›´æ–°å’Œæ‰“è¡¥ä¸</strong> ï¼šåŠæ—¶æ›´æ–°æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºï¼Œä¿®è¡¥å·²çŸ¥çš„å®‰å…¨æ¼æ´ã€‚</li>
<li><strong>å¤šå› ç´ èº«ä»½éªŒè¯</strong> ï¼šé€šè¿‡å¢åŠ ä¸€å±‚æˆ–å¤šå±‚éªŒè¯æœºåˆ¶ï¼Œæé«˜è´¦æˆ·å®‰å…¨ã€‚</li>
<li><strong>ç”¨æˆ·æ•™è‚²</strong> ï¼šæ•™è‚²ç”¨æˆ·è¯†åˆ«é’“é±¼ã€è¯ˆéª—ç­‰å¸¸è§éšç§æ³„éœ²æ‰‹æ®µã€‚</li>
</ol>
<h4 data-id="heading-21">4.1.2 åº”ç”¨æƒé™ç®¡ç†å’Œå®‰å…¨è®¾ç½®</h4>
<p>åº”ç”¨æƒé™ç®¡ç†æ˜¯ä¿æŠ¤ç”¨æˆ·éšç§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚å¼€å‘è€…åº”è¯¥ï¼š</p>
<ol>
<li><strong>æ˜ç¡®æƒé™è¯·æ±‚ç›®çš„</strong> ï¼šåœ¨è¯·æ±‚æƒé™æ—¶ï¼Œæ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·ä¸ºä½•éœ€è¦è¿™äº›æƒé™ã€‚</li>
<li><strong>éµå¾ªAndroidå’ŒiOSå¹³å°æŒ‡å—</strong> ï¼šåœ¨ä¸¤ä¸ªä¸»è¦çš„ç§»åŠ¨å¹³å°ä¸Šï¼Œéµå¾ªå„è‡ªçš„æƒé™ç®¡ç†æŒ‡å—å’Œæœ€ä½³å®è·µã€‚</li>
<li><strong>å®æ–½è¿è¡Œæ—¶æƒé™è¯·æ±‚</strong> ï¼šç¡®ä¿åªæœ‰åœ¨éœ€è¦æ—¶æ‰å‘ç”¨æˆ·è¯·æ±‚æƒé™ï¼Œå¹¶æä¾›é€‚å½“çš„ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>é™åˆ¶æƒé™èŒƒå›´</strong> ï¼šä»…è¯·æ±‚å¯¹å®Œæˆåº”ç”¨åŠŸèƒ½å¿…ä¸å¯å°‘çš„æƒé™ï¼Œå¹¶å°½é‡å‡å°‘æƒé™è¯·æ±‚çš„é¢‘ç‡ã€‚</li>
<li><strong>æƒé™å®¡æŸ¥</strong> ï¼šå®šæœŸå®¡æŸ¥åº”ç”¨æƒé™ï¼Œåˆ é™¤ä¸å†éœ€è¦çš„æƒé™è¯·æ±‚ã€‚</li>
</ol>
<h4 data-id="heading-22">ä»£ç ç¤ºä¾‹ï¼šæ£€æŸ¥åº”ç”¨æƒé™</h4>
<pre><code class="hljs language-arduino" lang="arduino">
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title">checkPermission</span><span class="hljs-params">(<span class="hljs-type">String</span> permission)</span> </span>{
<span class="hljs-type">int</span> permissionCheck = ContextCompat.<span class="hljs-built_in">checkSelfPermission</span>(thisActivity, permission);
<span class="hljs-keyword">return</span> permissionCheck == PackageManager.PERMISSION_GRANTED;
}
<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">checkPermission</span>(Manifest.permission.CAMERA)) {
    ActivityCompat.<span class="hljs-built_in">requestPermissions</span>(thisActivity, <span class="hljs-keyword">new</span> <span class="hljs-type">String</span>[]{Manifest.permission.CAMERA}, REQUEST_CODE);
}
</code></pre>
<p>åœ¨è¿™ä¸ªJavaä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>checkPermission</code> æ–¹æ³•æ¥æ£€æŸ¥åº”ç”¨æ˜¯å¦æœ‰æƒé™è®¿é—®ç›¸æœºã€‚ <code>ContextCompat.checkSelfPermission</code> æ–¹æ³•è¿”å› <code>PackageManager.PERMISSION_GRANTED</code> æˆ– <code>PackageManager.PERMISSION_DENIED</code> ï¼Œè¡¨ç¤ºæƒé™æ˜¯å¦å·²è¢«æˆäºˆã€‚å¦‚æœæƒé™æœªè¢«æˆäºˆï¼Œåˆ™ä½¿ç”¨ <code>ActivityCompat.requestPermissions</code> æ–¹æ³•å‘ç”¨æˆ·è¯·æ±‚æƒé™ã€‚</p>
<h3 data-id="heading-23">4.2 æ•…éšœæ’æŸ¥ä¸ä¿®å¤</h3>
<p>æ•…éšœæ’æŸ¥æ˜¯ç³»ç»Ÿç»´æŠ¤ä¸­çš„é‡è¦ç¯èŠ‚ã€‚å®ƒåŒ…æ‹¬è¯†åˆ«é—®é¢˜ã€å®šä½é—®é¢˜æºå¤´å’Œé‡‡å–çº æ­£æªæ–½ç­‰æ­¥éª¤ã€‚ä¸‹é¢è¯¦ç»†æ¢è®¨æ•…éšœæ’æŸ¥çš„åŸºæœ¬æµç¨‹ä»¥åŠå¦‚ä½•å¤„ç†å…¸å‹é—®é¢˜ã€‚</p>
<h4 data-id="heading-24">4.2.1 æ•…éšœæ’æŸ¥çš„åŸºæœ¬æµç¨‹</h4>
<p>æ•…éšœæ’æŸ¥çš„ä¸€èˆ¬æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>è¯†åˆ«é—®é¢˜</strong> ï¼šé¦–å…ˆæ˜ç¡®æ•…éšœçš„è¡¨ç°å’Œå½±å“èŒƒå›´ã€‚</li>
<li><strong>æ”¶é›†ä¿¡æ¯</strong> ï¼šè®°å½•å’Œæ”¶é›†ä¸é—®é¢˜ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ—¥å¿—ã€åº”ç”¨çŠ¶æ€å’Œç”¨æˆ·åé¦ˆç­‰ã€‚</li>
<li><strong>åˆæ­¥åˆ†æ</strong> ï¼šæ ¹æ®æ”¶é›†åˆ°çš„ä¿¡æ¯ï¼Œè¿›è¡Œåˆæ­¥çš„åˆ†æå’Œå‡è®¾ã€‚</li>
<li><strong>åˆ›å»ºå‡è®¾</strong> ï¼šæ„å»ºä¸€ä¸ªæˆ–å¤šä¸ªå¯èƒ½çš„é—®é¢˜åŸå› çš„å‡è®¾ã€‚</li>
<li><strong>æµ‹è¯•å‡è®¾</strong> ï¼šé€šè¿‡å®éªŒæ¥éªŒè¯è¿™äº›å‡è®¾ã€‚</li>
<li><strong>è§£å†³é—®é¢˜</strong> ï¼šæ ¹æ®éªŒè¯çš„ç»“æœï¼Œé‡‡å–å¿…è¦çš„è§£å†³æªæ–½ã€‚</li>
<li><strong>é¢„é˜²å¤å‘</strong> ï¼šåˆ†ææ•…éšœçš„æ ¹æœ¬åŸå› ï¼Œå¹¶åˆ¶å®šé¢„é˜²æªæ–½é˜²æ­¢æ•…éšœå†æ¬¡å‘ç”Ÿã€‚</li>
</ol>
<h4 data-id="heading-25">4.2.2 å…¸å‹é—®é¢˜çš„æ’æŸ¥å’Œè§£å†³å®ä¾‹</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„Androidåº”ç”¨å´©æºƒæ•…éšœæ’æŸ¥çš„å®ä¾‹ï¼š</p>
<p>å‡è®¾åº”ç”¨å´©æºƒæ—¶ä¼šæŠ›å‡º <code>NullPointerException</code> ã€‚æ’æŸ¥æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹å´©æºƒæ—¥å¿—</strong> ï¼šé¦–å…ˆè·å–åº”ç”¨çš„å´©æºƒæ—¥å¿—ã€‚å¯ä»¥é€šè¿‡Android Studioæˆ–Logcatå·¥å…·æŸ¥çœ‹ã€‚</li>
<li><strong>å®šä½å´©æºƒç‚¹</strong> ï¼šæ‰¾åˆ°æŠ›å‡º <code>NullPointerException</code> çš„å †æ ˆè·Ÿè¸ªï¼Œå®šä½åˆ°å‡ºé—®é¢˜çš„ä»£ç è¡Œã€‚</li>
<li><strong>æ£€æŸ¥å˜é‡</strong> ï¼šæ£€æŸ¥è¯¥å˜é‡æ˜¯å¦åœ¨ä½¿ç”¨å‰è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚</li>
<li><strong>ä¿®æ”¹ä»£ç </strong> ï¼šå¦‚æœå˜é‡æœªåˆå§‹åŒ–ï¼Œç¡®ä¿åœ¨ä½¿ç”¨å‰ä¸ºå…¶èµ‹äºˆåˆé€‚çš„å€¼ã€‚</li>
<li><strong>æµ‹è¯•åº”ç”¨</strong> ï¼šä¿®æ­£ä»£ç åé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œåº”ç”¨ï¼ŒéªŒè¯é—®é¢˜æ˜¯å¦å·²è§£å†³ã€‚</li>
<li><strong>éƒ¨ç½²æ›´æ–°</strong> ï¼šå¦‚æœæµ‹è¯•æ²¡æœ‰å‘ç°é—®é¢˜ï¼Œå¯ä»¥å°†æ›´æ–°éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</li>
</ol>
<h4 data-id="heading-26">æµç¨‹å›¾ç¤ºä¾‹ï¼šæ•…éšœæ’æŸ¥æµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[å¼€å§‹æ’æŸ¥]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[è¯†åˆ«é—®é¢˜]</span>
    <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[æ”¶é›†ä¿¡æ¯]</span>
    C --&gt; D<span class="hljs-selector-attr">[åˆæ­¥åˆ†æ]</span>
    D --&gt; E<span class="hljs-selector-attr">[åˆ›å»ºå‡è®¾]</span>
    E --&gt; F<span class="hljs-selector-attr">[æµ‹è¯•å‡è®¾]</span>
    F --&gt;|å‡è®¾æˆç«‹| G<span class="hljs-selector-attr">[è§£å†³é—®é¢˜]</span>
    F --&gt;|å‡è®¾ä¸æˆç«‹| E
    G --&gt; H<span class="hljs-selector-attr">[é¢„é˜²å¤å‘]</span>
    H --&gt; <span class="hljs-selector-tag">I</span><span class="hljs-selector-attr">[ç»“æŸæ’æŸ¥]</span>

</code></pre>
<p>åœ¨è¿™ä¸ªæµç¨‹å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æ•…éšœæ’æŸ¥çš„åŸºæœ¬æ­¥éª¤ï¼Œä»¥åŠåœ¨æµ‹è¯•å‡è®¾ä¸æˆç«‹æ—¶å¦‚ä½•è¿”å›å¹¶åˆ›å»ºæ–°çš„å‡è®¾ã€‚</p>
<p>æœ¬ç« è¯¦ç»†ä»‹ç»äº†éšç§ä¿æŠ¤æœºåˆ¶å’Œæ•…éšœæ’æŸ¥æŠ€å·§ï¼Œå¸Œæœ›è¿™äº›å†…å®¹èƒ½å¤Ÿå¸®åŠ©æ‚¨æ›´å¥½åœ°ä¿æŠ¤ç”¨æˆ·éšç§å’Œåº”å¯¹åº”ç”¨æ•…éšœã€‚ä¸‹ä¸€ç« æˆ‘ä»¬å°†æ¢è®¨ç³»ç»ŸæœåŠ¡APIåœ¨appè°ƒè¯•å’Œæ€§èƒ½ç›‘æ§ä¸­çš„åº”ç”¨ã€‚</p>
<h2 data-id="heading-27">5. ç³»ç»ŸæœåŠ¡APIåœ¨appè°ƒè¯•å’Œæ€§èƒ½ç›‘æ§ä¸­çš„åº”ç”¨</h2>
<p>ç³»ç»ŸæœåŠ¡APIä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§ä¸è®¾å¤‡ç³»ç»ŸæœåŠ¡è¿›è¡Œäº¤äº’çš„æ–¹å¼ã€‚è¿™äº›APIä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè®¿é—®ç³»ç»Ÿçº§åŠŸèƒ½ï¼Œå¦‚ç½‘ç»œçŠ¶æ€ã€ç”µæ± ä¿¡æ¯ã€ä¼ æ„Ÿå™¨æ•°æ®ç­‰ï¼Œå¹¶å°†å…¶é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œä»¥å¢å¼ºåº”ç”¨ç¨‹åºçš„åŠŸèƒ½å¹¶æå‡ç”¨æˆ·ä½“éªŒã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥äº†è§£ç³»ç»ŸæœåŠ¡APIï¼Œå¹¶æ¢è®¨å®ƒä»¬åœ¨appè°ƒè¯•å’Œæ€§èƒ½ç›‘æ§æ–¹é¢çš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-28">5.1 ç³»ç»ŸæœåŠ¡APIç®€ä»‹</h3>
<h4 data-id="heading-29">5.1.1 ç³»ç»ŸæœåŠ¡APIçš„åŠŸèƒ½ä¸ä½œç”¨</h4>
<p>ç³»ç»ŸæœåŠ¡APIä¸ºAndroidå’ŒiOSç­‰ç§»åŠ¨æ“ä½œç³»ç»Ÿæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½é›†åˆã€‚ä¾‹å¦‚ï¼ŒAndroidçš„ <code>LocationManager</code> APIå¯ä»¥è®¿é—®è®¾å¤‡çš„GPSæœåŠ¡ï¼Œè€ŒiOSçš„ <code>HealthKit</code> æ¡†æ¶åˆ™å…è®¸åº”ç”¨è®¿é—®ç”¨æˆ·çš„å¥åº·æ•°æ®ã€‚å¼€å‘è€…é€šè¿‡è¿™äº›APIä¸ä»…èƒ½å¤Ÿè·å–ç³»ç»Ÿä¿¡æ¯ï¼Œè¿˜å¯ä»¥æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ï¼Œå¦‚æ§åˆ¶è®¾å¤‡ç¡¬ä»¶æˆ–ç›‘æ§ç³»ç»ŸçŠ¶æ€ã€‚</p>
<h4 data-id="heading-30">5.1.2 å¼€å‘è€…å¦‚ä½•åˆ©ç”¨ç³»ç»ŸæœåŠ¡API</h4>
<p>å¼€å‘è€…åˆ©ç”¨ç³»ç»ŸæœåŠ¡APIé€šå¸¸éœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>ç¡®å®šéœ€è¦ä½¿ç”¨çš„ç³»ç»ŸæœåŠ¡APIçš„ç±»å‹å’ŒåŠŸèƒ½ã€‚</li>
<li>åœ¨åº”ç”¨çš„manifestæ–‡ä»¶ï¼ˆAndroidï¼‰æˆ–info.plistæ–‡ä»¶ï¼ˆiOSï¼‰ä¸­å£°æ˜ç›¸åº”çš„æƒé™ã€‚</li>
<li>åœ¨ä»£ç ä¸­åˆ›å»ºç›¸åº”çš„APIå¯¹è±¡ï¼Œå¹¶è°ƒç”¨æ‰€éœ€çš„APIæ–¹æ³•ã€‚</li>
<li>å¤„ç†å¼‚æ­¥è°ƒç”¨çš„å›è°ƒæˆ–ç»“æœï¼Œå¹¶ç¡®ä¿æ­£ç¡®ç®¡ç†æƒé™å’Œç”¨æˆ·éšç§ã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">
LocationManager <span class="hljs-attr">locationManager</span> = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE)<span class="hljs-comment">;</span>
if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
} else {
Location <span class="hljs-attr">location</span> = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER)<span class="hljs-comment">;</span>
if (location != null) {
    }
}
</code></pre>
<h3 data-id="heading-31">5.2 APIåœ¨è°ƒè¯•å’Œæ€§èƒ½ç›‘æ§ä¸­çš„åº”ç”¨æ¡ˆä¾‹</h3>
<h4 data-id="heading-32">5.2.1 å®é™…å¼€å‘ä¸­çš„åº”ç”¨åˆ†æ</h4>
<p>åœ¨åº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç³»ç»ŸæœåŠ¡APIç»å¸¸ç”¨äºè°ƒè¯•å’Œæµ‹è¯•é˜¶æ®µï¼Œä»¥ç¡®ä¿åº”ç”¨å¯ä»¥æ­£ç¡®å“åº”ç³»ç»Ÿäº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Androidçš„ <code>BatteryManager</code> APIï¼Œå¼€å‘è€…å¯ä»¥æ£€æµ‹ç”µæ± çŠ¶æ€å’Œç”µé‡ä¿¡æ¯ï¼Œç¡®ä¿åº”ç”¨åœ¨ä½ç”µé‡æ¨¡å¼ä¸‹ä¾ç„¶è¡¨ç°è‰¯å¥½ã€‚å¯¹äºiOSå¼€å‘ï¼ŒKeymobç­‰å·¥å…·åˆ©ç”¨ç³»ç»ŸæœåŠ¡APIæä¾›å®æ—¶æ€§èƒ½ç›‘æ§å’Œæ—¥å¿—åˆ†æï¼Œå¸®åŠ©å¼€å‘è€…ä¼˜åŒ–åº”ç”¨æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">
BatteryManager <span class="hljs-attr">batteryManager</span> = (BatteryManager) getSystemService(Context.BATTERY_SERVICE)<span class="hljs-comment">;</span>
int <span class="hljs-attr">status</span> = batteryManager.getIntProperty(BatteryManager.BATTERY_PROPERTY_STATUS)<span class="hljs-comment">;</span>
boolean <span class="hljs-attr">isCharging</span> = status == BatteryManager.BATTERY_STATUS_CHARGING ||
                     <span class="hljs-attr">status</span> == BatteryManager.BATTERY_STATUS_FULL<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-33">5.2.2 æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•çš„é«˜çº§åº”ç”¨æŠ€å·§</h4>
<p>åœ¨æ€§èƒ½ç›‘æ§æ–¹é¢ï¼Œå¼€å‘è€…å¯ä»¥åˆ©ç”¨ç³»ç»ŸæœåŠ¡APIå®ç°è‡ªå®šä¹‰çš„æ€§èƒ½ç›‘æ§å·¥å…·ã€‚ä¾‹å¦‚ï¼Œç›‘æµ‹åº”ç”¨å¯åŠ¨æ—¶é—´æˆ–å“åº”æ—¶é—´ã€‚åŒæ—¶ï¼Œç»“åˆæ—¥å¿—ç³»ç»Ÿå’Œæ€§èƒ½åˆ†æå·¥å…·ï¼Œå¯ä»¥å½¢æˆä¸€å¥—å®Œæ•´çš„æ€§èƒ½ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚</p>
<pre><code class="hljs language-ini" lang="ini">
long <span class="hljs-attr">startTime</span> = System.currentTimeMillis()<span class="hljs-comment">;</span>
long <span class="hljs-attr">endTime</span> = System.currentTimeMillis()<span class="hljs-comment">;</span>
Log.d("Performance", "Application startup time: " + (endTime - startTime) + "ms")<span class="hljs-comment">;</span>
</code></pre>
<p>åœ¨é«˜çº§åº”ç”¨æŠ€å·§æ–¹é¢ï¼Œå¼€å‘è€…å¯ä»¥ç»“åˆä½¿ç”¨å¤šä¸ªAPIæ¥æé«˜ç›‘æ§çš„æ·±åº¦ã€‚ä¾‹å¦‚ï¼ŒåŒæ—¶ç›‘æ§CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä»¥è¯†åˆ«åº”ç”¨æ€§èƒ½ç“¶é¢ˆã€‚</p>
<pre><code class="hljs language-ini" lang="ini">
ActivityManager <span class="hljs-attr">activityManager</span> = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE)<span class="hljs-comment">;</span>
ActivityManager.MemoryInfo <span class="hljs-attr">memoryInfo</span> = new ActivityManager.MemoryInfo()<span class="hljs-comment">;</span>
activityManager.getMemoryInfo(memoryInfo)<span class="hljs-comment">;</span>
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šç¤ºä¾‹ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»ŸæœåŠ¡APIåœ¨è°ƒè¯•å’Œæ€§èƒ½ç›‘æ§ä¸­çš„å®é™…åº”ç”¨ã€‚å¼€å‘è€…é€šè¿‡ç³»ç»ŸæœåŠ¡APIä¸ä»…å¯ä»¥å¢å¼ºåº”ç”¨çš„åŠŸèƒ½ï¼Œè¿˜å¯ä»¥ç¡®ä¿åº”ç”¨åœ¨å„ç§ç¯å¢ƒä¸‹éƒ½èƒ½ç¨³å®šè¿è¡Œã€‚ç³»ç»ŸæœåŠ¡APIæ˜¯ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼ŒæŒæ¡å®ƒä»¬å¯¹äºæé«˜å¼€å‘è´¨é‡å’Œæ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç†è§£iOSä¸­Protobufï¼šä¸€ä¸ªæ¯”JSONæ›´å¥½ï¼Œä½†ä¸æ˜¯æ›¿ä»£]]></title>    <link>https://juejin.cn/post/7581306080435634227</link>    <guid>https://juejin.cn/post/7581306080435634227</guid>    <pubDate>2025-12-08T15:35:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581306080435634227" data-draft-id="7580564126402871346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç†è§£iOSä¸­Protobufï¼šä¸€ä¸ªæ¯”JSONæ›´å¥½ï¼Œä½†ä¸æ˜¯æ›¿ä»£"/> <meta itemprop="keywords" content="iOS,æ¶æ„,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-08T15:35:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sweetä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/3227821869921646"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç†è§£iOSä¸­Protobufï¼šä¸€ä¸ªæ¯”JSONæ›´å¥½ï¼Œä½†ä¸æ˜¯æ›¿ä»£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821869921646/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sweetä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T15:35:58.000Z" title="Mon Dec 08 2025 15:35:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    82
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨iOSå¼€å‘ä¸­ï¼ŒJSONå‡­å€Ÿå…¶å“è¶Šçš„å¯è¯»æ€§å’Œè·¨å¹³å°å…¼å®¹æ€§ï¼Œé•¿æœŸä»¥æ¥éƒ½æ˜¯ç½‘ç»œäº¤äº’å’Œæœ¬åœ°å­˜å‚¨çš„é¦–é€‰ã€‚ä½†ä½ æ˜¯å¦é‡åˆ°è¿‡å› ç½‘ç»œè¯·æ±‚è¿‡æ…¢å¯¼è‡´ç”¨æˆ·ä½“éªŒä¸ä½³ï¼Œæˆ–æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶åº”ç”¨å“åº”è¿Ÿç¼“çš„æƒ…å†µï¼Ÿé—®é¢˜çš„æ ¹æºæœ‰æ—¶å°±å‡ºåœ¨æ•°æ®äº¤æ¢çš„æ ¼å¼ä¸Šã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ <strong>Protocol Buffersï¼ˆç®€ç§°Protobufï¼‰</strong> â€”â€”ä¸€ç§ç”±Googleè®¾è®¡çš„ç»“æ„åŒ–æ•°æ®åºåˆ—åŒ–æœºåˆ¶ã€‚è¿™ç¯‡åšå®¢å°†æ¾„æ¸…ä¸€ä¸ªå¸¸è§çš„è¯¯è§£ï¼šå¼•å…¥Protobuf<strong>å¹¶éä¸ºäº†å…¨ç›˜å–ä»£JSON</strong>ï¼Œè€Œæ˜¯ä¸ºäº†åœ¨ä½ å·¥å…·ç®±ä¸­å¢åŠ ä¸€ä¸ªå¼ºæœ‰åŠ›çš„é€‰é¡¹ã€‚æˆ‘ä»¬å°†é‡ç‚¹å‰–æå®ƒç›¸æ¯”JSONçš„æ ¸å¿ƒä¼˜åŠ¿ã€ç‹¬ç‰¹çš„å·¥ä½œåŸç†ã€æœ€é€‚ç”¨çš„åœºæ™¯ï¼Œå¹¶çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•åœ¨ç°å®ä¸­è¢«å¤§å‚ä»¬å¹¿æ³›åº”ç”¨çš„ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€ä¸æ˜¯æ›¿ä»£ï¼Œè€Œæ˜¯è¡¥å……ï¼šProtobufä¸JSONçš„æ ¸å¿ƒå·®å¼‚</h3>
<p>è¦åšå‡ºæ˜æ™ºçš„æŠ€æœ¯é€‰å‹ï¼Œé¦–å…ˆè¦ç†è§£å®ƒä»¬çš„æœ¬è´¨åŒºåˆ«ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„æ¯”å–»ï¼šJSONå¥½æ¯”ä¸€å°ä¿¡ä»¶ï¼Œæ‰€æœ‰äººéƒ½èƒ½è½»æ¾é˜…è¯»ï¼›è€ŒProtobufæ›´åƒä¸€å°å¯†ç ç”µæŠ¥ï¼Œä½“ç§¯å°ã€ä¼ è¾“å¿«ï¼Œä½†éœ€è¦å¯†ç æœ¬ï¼ˆå³<code>.proto</code>å®šä¹‰æ–‡ä»¶ï¼‰æ‰èƒ½è§£è¯»ã€‚</p>
<p>ä¸ºäº†æ›´ç›´è§‚ï¼Œè¯·çœ‹ä¸‹è¡¨å¯¹ä¸¤è€…å…³é”®ç‰¹æ€§çš„å¯¹æ¯”ï¼š</p>



































<table><thead><tr><th align="left">ç‰¹æ€§ç»´åº¦</th><th align="left">JSON (æ–‡æœ¬æ ¼å¼)</th><th align="left">Protobuf (äºŒè¿›åˆ¶æ ¼å¼)</th></tr></thead><tbody><tr><td align="left"><strong>å¯è¯»æ€§</strong></td><td align="left"><strong>æé«˜</strong>ï¼Œæ•°æ®æœ¬èº«å°±æ˜¯æ–‡æœ¬ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</td><td align="left"><strong>æä½</strong>ï¼ŒäºŒè¿›åˆ¶æ ¼å¼éš¾ä»¥è‚‰çœ¼è¯†åˆ«ã€‚</td></tr><tr><td align="left"><strong>æ•°æ®ä½“ç§¯</strong></td><td align="left"><strong>è¾ƒå¤§</strong>ã€‚åŒ…å«é‡å¤çš„å­—æ®µåã€å¼•å·ã€æ‹¬å·ç­‰å†—ä½™ä¿¡æ¯ã€‚</td><td align="left"><strong>æå°</strong>ã€‚ç”¨å­—æ®µç¼–å·æ›¿ä»£å­—æ®µåï¼Œç¼–ç ç´§å‡‘ã€‚</td></tr><tr><td align="left"><strong>åºåˆ—åŒ–/ååºåˆ—åŒ–é€Ÿåº¦</strong></td><td align="left">è¾ƒæ…¢ã€‚éœ€è§£ææ–‡æœ¬å­—ç¬¦ä¸²ï¼Œè¿›è¡Œç±»å‹è½¬æ¢ã€‚</td><td align="left"><strong>æå¿«</strong>ã€‚ç›´æ¥å¤„ç†äºŒè¿›åˆ¶æµï¼Œç¼–ç /è§£ç å‡ ä¹ç­‰åŒäºå†…å­˜æ‹·è´ã€‚</td></tr><tr><td align="left"><strong>å¼ºç±»å‹ä¸Schema</strong></td><td align="left">æ— ã€‚ä¾èµ–çº¦å®šï¼Œå®¹æ˜“å‡ºé”™ï¼Œéœ€é¢å¤–æ ¡éªŒå·¥å…·ï¼ˆå¦‚JSON Schemaï¼‰ã€‚</td><td align="left"><strong>æœ‰</strong>ã€‚é€šè¿‡<code>.proto</code>æ–‡ä»¶æ˜ç¡®å®šä¹‰ï¼Œç”Ÿæˆç±»å‹å®‰å…¨çš„ä»£ç ã€‚</td></tr><tr><td align="left"><strong>è·¨ç‰ˆæœ¬å…¼å®¹æ€§</strong></td><td align="left">å¼±ã€‚å¢åˆ å­—æ®µæ˜“å¯¼è‡´å®¢æˆ·ç«¯å´©æºƒï¼Œéœ€è¦ä¸¥æ ¼åè°ƒã€‚</td><td align="left"><strong>å¼º</strong>ã€‚è®¾è®¡ä¸Šå°±æ”¯æŒå‘å‰/å‘åå…¼å®¹ï¼Œæ–°å¢å¯é€‰å­—æ®µæ—§ä»£ç è‡ªåŠ¨å¿½ç•¥ã€‚</td></tr></tbody></table>
<p>ä¸€ä¸ªå…¸å‹ä¾‹å­æ˜¯ï¼ŒåŒæ ·ä¸€æ¡åŒ…å«<code>id</code>, <code>name</code>, <code>email</code>ä¸‰ä¸ªå­—æ®µçš„ç”¨æˆ·ä¿¡æ¯ï¼ŒJSONæ ¼å¼çš„æ–‡æœ¬å¯èƒ½é•¿è¾¾ä¸Šç™¾å­—èŠ‚ï¼Œè€ŒProtobufç¼–ç åå¯èƒ½åªæœ‰åå‡ ä¸ªå­—èŠ‚ï¼Œåœ¨å¼±ç½‘ç¯å¢ƒä¸‹ï¼Œè¿™ç§å·®å¼‚ä¼šç›´æ¥å½±å“Appçš„å“åº”é€Ÿåº¦ã€‚</p>
<p>å› æ­¤ï¼Œ<strong>é€‰å‹çš„å…³é”®åœ¨äºåœºæ™¯</strong>ï¼š</p>
<ul>
<li><strong>å¯¹å¤–APIã€é…ç½®æ–‡ä»¶ã€éœ€è¦æµè§ˆå™¨ç›´æ¥è§£æçš„æ•°æ®</strong>ï¼š<strong>JSONæ˜¯ä¸äºŒä¹‹é€‰</strong>ã€‚</li>
<li><strong>å¯¹å†…çš„å¾®æœåŠ¡é€šä¿¡ã€é«˜é¢‘ç‡RPCè°ƒç”¨ã€ç§»åŠ¨ç«¯å¼±ç½‘ä¼˜åŒ–</strong>ï¼š<strong>Protobufçš„ä¼˜åŠ¿å°†éå¸¸çªå‡º</strong>ã€‚</li>
</ul>
<h3 data-id="heading-1">äºŒã€æ€§èƒ½ä¹‹è°œï¼šProtobufä¸ºä½•å¦‚æ­¤é«˜æ•ˆï¼Ÿ</h3>
<p>Protobufçš„é«˜æ€§èƒ½å¹¶éé­”æ³•ï¼Œè€Œæ˜¯æºäºå…¶ç²¾å·§çš„ç¼–ç è®¾è®¡ã€‚ä¸‹é¢è¿™å¼ å›¾æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒçš„å·¥ä½œåŸç†ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[.proto æ¶ˆæ¯å®šä¹‰æ–‡ä»¶] --&gt; B[protoc ç¼–è¯‘å™¨]
    
    B --&gt; C[ç›®æ ‡è¯­è¨€ä»£ç &lt;br&gt;å¦‚ Swift Class]
    C --&gt; D[åŒ…å«åºåˆ—åŒ–ä¸&lt;br&gt;ååºåˆ—åŒ–æ–¹æ³•]
    
    A --&gt; E[Protobuf ç¼–ç è§„åˆ™]
    
    subgraph E[ç¼–ç è§„åˆ™]
        F[å­—æ®µ: Tag-Length-Value&lt;br&gt;ç¼–ç &lt;br&gt;ç”¨æ•°å­—ç¼–å·ä»£æ›¿å­—æ®µå]
        G[æ•´æ•°: Varint å˜é•¿ç¼–ç &lt;br&gt;å°æ•°å­—èŠ‚æ•°æ›´å°‘]
        H[æœ‰ç¬¦å·æ•´æ•°: ZigZag ç¼–ç &lt;br&gt;ä¼˜åŒ–è´Ÿæ•°å­˜å‚¨]
    end
    
    D -- åºåˆ—åŒ– --&gt; I[ç´§å‡‘çš„äºŒè¿›åˆ¶æ•°æ®]
    I -- ç½‘ç»œä¼ è¾“æˆ–å­˜å‚¨ --&gt; J
    J -- ååºåˆ—åŒ– --&gt; D
</code></pre>
<ul>
<li>
<p><strong>æ ¸å¿ƒ1ï¼šT-L-Vç¼–ç ä¸å­—æ®µç¼–å·</strong>
ProtobufæŠ›å¼ƒäº†å­—æ®µåï¼Œè½¬è€Œä¸ºæ¯ä¸ªå­—æ®µåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„<strong>æ•°å­—ç¼–å·ï¼ˆTagï¼‰</strong>ã€‚åºåˆ—åŒ–æ—¶ï¼Œä¸€ä¸ªå­—æ®µè¢«ç¼–ç ä¸º <code>(Tag, Type, Value)</code> çš„ç»„åˆã€‚æ¥æ”¶æ–¹é€šè¿‡åŒæ ·çš„ <code>.proto</code> æ–‡ä»¶ï¼Œå°±èƒ½å°†ç¼–å·æ˜ å°„å›æ­£ç¡®çš„å­—æ®µåã€‚è¿™ä»æ ¹æœ¬ä¸Šæ¶ˆé™¤äº†JSONä¸­é‡å¤çš„å­—æ®µåå¼€é”€ã€‚</p>
</li>
<li>
<p><strong>æ ¸å¿ƒ2ï¼šVarintä¸ZigZagç¼–ç </strong></p>
<ul>
<li><strong>Varintå˜é•¿ç¼–ç </strong>ï¼šå¯¹äºæ•´æ•°ï¼Œå°æ•°å€¼å ç”¨æ›´å°‘çš„å­—èŠ‚ã€‚æ¯ä¸ªå­—èŠ‚çš„æœ€é«˜ä½æ˜¯æ ‡å¿—ä½ï¼Œè¡¨ç¤ºæ˜¯å¦è¿˜æœ‰åç»­å­—èŠ‚ï¼ŒçœŸæ­£æœ‰æ•ˆçš„åªæœ‰ä½7ä½ã€‚è¿™æ„å‘³ç€æ•°å€¼<code>1</code>åªéœ€1ä¸ªå­—èŠ‚ï¼Œè€Œéå›ºå®šçš„4ä¸ªå­—èŠ‚ã€‚</li>
<li><strong>ZigZagç¼–ç </strong>ï¼šä¸“ä¸ºæœ‰ç¬¦å·æ•´æ•°ä¼˜åŒ–ã€‚å®ƒå°†è´Ÿæ•°â€œæ›²æŠ˜â€æ˜ å°„ä¸ºä¸€ç³»åˆ—æ­£æ•°ï¼ˆå¦‚-1æ˜ å°„ä¸º1ï¼Œ1æ˜ å°„ä¸º2ï¼‰ï¼Œä½¿è´Ÿæ•°ä¹Ÿèƒ½åˆ©ç”¨Varintç¼–ç ç´§å‡‘å­˜å‚¨ã€‚</li>
</ul>
</li>
</ul>
<p>æ­£æ˜¯è¿™äº›åº•å±‚è®¾è®¡ï¼Œä½¿å¾—Protobufèƒ½åœ¨æ•°æ®å¤§å°å’Œè§£æé€Ÿåº¦ä¸Šå®ç°æ•°é‡çº§çš„æå‡ã€‚æ ¹æ®Googleçš„æ•°æ®ï¼ŒProtobufç›¸æ¯”XMLï¼Œè§£æé€Ÿåº¦å¯ä»¥æé«˜20åˆ°100å€ï¼Œæ•°æ®ä½“ç§¯å¯å‡å°åˆ°åŸæ¥çš„1/10åˆ°1/3ã€‚</p>
<h3 data-id="heading-2">ä¸‰ã€iOSå¼€å‘ä¸­ï¼Œä½•æ—¶åº”è¯¥è€ƒè™‘Protobufï¼Ÿ</h3>
<p>åŸºäºä»¥ä¸Šç‰¹æ€§ï¼Œåœ¨iOSå¼€å‘ä¸­ï¼Œä»¥ä¸‹å‡ ç§åœºæ™¯ç‰¹åˆ«é€‚åˆå¼•å…¥Protobufï¼š</p>
<ol>
<li><strong>å¾®æœåŠ¡/åç«¯é«˜é¢‘ç‡é€šä¿¡</strong>ï¼šå½“ä½ çš„Appéœ€è¦ä¸åç«¯è¿›è¡Œå¤§é‡ã€å¯†é›†çš„RPCå¼æ•°æ®äº¤æ¢æ—¶ï¼ˆä¾‹å¦‚å³æ—¶é€šè®¯çš„æ¶ˆæ¯æ¨é€ã€å®æ—¶æ¸¸æˆçŠ¶æ€åŒæ­¥ï¼‰ï¼ŒProtobufå‡å°‘çš„æ¯ä¸€ç‚¹å»¶è¿Ÿå’Œæµé‡éƒ½å°†æ±‡èšæˆæ˜¾è‘—çš„ä½“éªŒä¼˜åŠ¿ã€‚</li>
<li><strong>å¼±ç½‘ç¯å¢ƒä¼˜åŒ–</strong>ï¼šå¯¹äºéœ€è¦å…³æ³¨ç§»åŠ¨ç½‘ç»œä¸‹ç”¨æˆ·ä½“éªŒå’Œç”¨æˆ·æµé‡çš„åº”ç”¨ï¼Œæ›´å°çš„æ•°æ®åŒ…æ„å‘³ç€æ›´å¿«çš„åŠ è½½é€Ÿåº¦å’Œæ›´ä½çš„è¯·æ±‚å¤±è´¥ç‡ã€‚</li>
<li><strong>å®¢æˆ·ç«¯æœ¬åœ°æ•°æ®å­˜å‚¨</strong>ï¼šå¯¹äºéœ€è¦ç¼“å­˜å¤§é‡ç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚æ–°é—»èµ„è®¯ã€äº§å“ç›®å½•ï¼‰çš„åœºæ™¯ï¼Œä½¿ç”¨Protobufåºåˆ—åŒ–åå­˜å‚¨ï¼Œå¯ä»¥èŠ‚çœå¯è§‚çš„ç£ç›˜ç©ºé—´ï¼Œå¹¶åŠ å¿«è¯»å–é€Ÿåº¦ã€‚</li>
<li><strong>å¼ºç±»å‹ä¸å›¢é˜Ÿåä½œ</strong>ï¼šåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œ<code>.proto</code>æ–‡ä»¶ä½œä¸ºä¸€ä»½æ˜ç¡®çš„ã€è·¨å¹³å°ï¼ˆiOS, Android, åç«¯ï¼‰çš„æ•°æ®åˆåŒï¼Œèƒ½æœ‰æ•ˆå‡å°‘å‰åç«¯è”è°ƒæ—¶çš„ç±»å‹é”™è¯¯å’Œæ²Ÿé€šæˆæœ¬ã€‚</li>
</ol>
<h3 data-id="heading-3">å››ã€ä¸åªæ˜¯ç†è®ºï¼šå¤§å‚ä»¬çš„å®è·µ</h3>
<p>Protobufå¹¶éå®éªŒå®¤æŠ€æœ¯ï¼Œå®ƒå·²ç»åœ¨ä¸šç•Œè¢«å¹¿æ³›é‡‡ç”¨ï¼Œå¹¶æ„æˆäº†ç°ä»£äº‘åŸç”Ÿå’Œå¾®æœåŠ¡æ¶æ„çš„åŸºçŸ³ã€‚</p>
<ul>
<li><strong>Googleçš„â€œäº²å„¿å­â€</strong>ï¼šProtobufè‡ª2001å¹´èµ·åœ¨Googleå†…éƒ¨ç”¨äºå‡ ä¹æ‰€æœ‰RPCé€šä¿¡å’Œæ•°æ®å­˜å‚¨ï¼Œåäº2008å¹´å¼€æºã€‚å®ƒä¹Ÿæ˜¯gRPCæ¡†æ¶é»˜è®¤çš„åºåˆ—åŒ–åè®®ã€‚å¯ä»¥è¯´ï¼ŒGoogleçš„æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿéƒ½æ„å»ºåœ¨Protobufä¹‹ä¸Šã€‚</li>
<li><strong>å­—èŠ‚è·³åŠ¨çš„é€‰æ‹©</strong>ï¼šåœ¨å…¶å¼€æºçš„<strong>Kitex</strong>é«˜æ€§èƒ½Goå¾®æœåŠ¡RPCæ¡†æ¶ä¸­ï¼Œé™¤äº†æ”¯æŒThriftï¼Œä¹Ÿæ·±åº¦æ”¯æŒ<strong>Kitex Protobuf</strong>å’Œ<strong>gRPC</strong>åè®®ï¼Œä»¥åº”å¯¹å…¶æµ·é‡ã€é«˜å¹¶å‘çš„å†…éƒ¨æœåŠ¡é€šä¿¡éœ€æ±‚ã€‚</li>
<li><strong>äº‘åŸç”Ÿç”Ÿæ€çš„æ ‡å‡†</strong>ï¼šåœ¨CNCFï¼ˆäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼‰ç”Ÿæ€ä¸­ï¼ŒProtobufæ˜¯è®¸å¤šæ ¸å¿ƒé¡¹ç›®çš„é»˜è®¤æˆ–é‡è¦é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œåœ¨æœåŠ¡ç½‘æ ¼<strong>Istio</strong>ã€åˆ†å¸ƒå¼è¿½è¸ªç­‰ç³»ç»Ÿä¸­ï¼Œéƒ½å¹¿æ³›ä½¿ç”¨Protobufè¿›è¡Œé«˜æ•ˆçš„æ•°æ®äº¤æ¢ã€‚</li>
<li>å¼€æºæ¡†æ¶MMKVï¼ŒåŸºäºProtobufè¿›è¡Œåºåˆ—åŒ–å­˜å‚¨æå‡äº†æ€§èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-4">äº”ã€åœ¨iOSé¡¹ç›®ä¸­å¦‚ä½•å¼€å§‹ï¼Ÿ</h3>
<p>åœ¨iOSé¡¹ç›®ä¸­ä½¿ç”¨Protobufçš„æµç¨‹éå¸¸æ ‡å‡†åŒ–ï¼š</p>
<ol>
<li><strong>å®šä¹‰å¥‘çº¦</strong>ï¼šç¼–å†™ <code>.proto</code> æ–‡ä»¶ï¼Œå®šä¹‰ä½ çš„è¯·æ±‚å’Œå“åº”æ•°æ®ç»“æ„ã€‚
<pre><code class="hljs language-protobuf" lang="protobuf">syntax = "proto3";
message UserRequest {
  int32 user_id = 1;
}
message UserProfile {
  string name = 1;
  string email = 2;
  int32 age = 3;
}
</code></pre>
</li>
<li><strong>ç”Ÿæˆä»£ç </strong>ï¼šä½¿ç”¨ <code>protoc</code> ç¼–è¯‘å™¨é…åˆ Swift æ’ä»¶ï¼Œå°† <code>.proto</code> æ–‡ä»¶ç¼–è¯‘ä¸º Swift ç±»ã€‚
<pre><code class="hljs language-bash" lang="bash">protoc --swift_out=. your_proto_file.proto
</code></pre>
</li>
<li><strong>é›†æˆä¸ä½¿ç”¨</strong>ï¼šå°†ç”Ÿæˆçš„Swiftæ–‡ä»¶åŠ å…¥é¡¹ç›®ã€‚ç„¶åï¼Œä½ å°±å¯ä»¥åƒä½¿ç”¨æ™®é€šå¯¹è±¡ä¸€æ ·è¿›è¡Œåºåˆ—åŒ–ï¼ˆ<code>serializeToData()</code>ï¼‰å’Œååºåˆ—åŒ–ï¼ˆ<code>init(serializedData:)</code>ï¼‰ã€‚</li>
<li><strong>ç½‘ç»œå±‚æ•´åˆ</strong>ï¼šé€šå¸¸éœ€è¦å°†ç½‘ç»œå±‚ä»åŸºäºJSONçš„<code>URLSession</code>é€‚é…ä¸ºæ”¯æŒProtobufäºŒè¿›åˆ¶æµçš„æ ¼å¼ï¼Œæˆ–ç›´æ¥ä½¿ç”¨åŸºäºProtobufçš„gRPCæ¡†æ¶ã€‚</li>
</ol>
<h3 data-id="heading-5">æ€»ç»“ä¸æœ€ä½³å®è·µ</h3>
<p>å›åˆ°æœ€åˆçš„è§‚ç‚¹ï¼š<strong>Protobufä¸æ˜¯JSONçš„æ›¿ä»£å“ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šé—®é¢˜åŸŸæ›´ä¼˜çš„è§£å†³æ–¹æ¡ˆ</strong>ã€‚</p>
<p>ä¸€ä¸ªç°ä»£ã€å¥å£®çš„æ¶æ„å¾€å¾€æ˜¯æ··åˆå¼çš„ï¼š</p>
<ul>
<li>å¯¹<strong>å¤–</strong>é¢å‘æµè§ˆå™¨ã€ç§»åŠ¨ç«¯æˆ–ç¬¬ä¸‰æ–¹å¼€å‘è€…çš„APIï¼Œç»§ç»­ä½¿ç”¨<strong>JSON</strong>ï¼Œä¿è¯æœ€å¤§çš„å…¼å®¹æ€§å’Œå¯è°ƒè¯•æ€§ã€‚</li>
<li>åœ¨<strong>å†…</strong>éƒ¨æœåŠ¡é—´ã€å¯¹æ€§èƒ½æœ‰æè‡´è¦æ±‚çš„ç§»åŠ¨ç«¯æ•°æ®é€šé“ï¼Œé‡‡ç”¨<strong>Protobuf</strong>ï¼Œè¿½æ±‚æè‡´çš„æ•ˆç‡å’Œç±»å‹å®‰å…¨ã€‚</li>
</ul>
<p>ä½œä¸ºiOSå¼€å‘è€…ï¼Œç†è§£Protobufçš„åŸç†å’Œä¼˜åŠ¿ï¼Œèƒ½è®©ä½ åœ¨é¢ä¸´æ€§èƒ½ç“¶é¢ˆã€æ€è€ƒæ¶æ„ä¼˜åŒ–æ—¶ï¼Œå¤šä¸€ä¸ªå¼ºå¤§è€Œæˆç†Ÿçš„é€‰æ‹©ã€‚æŠ€æœ¯å†³ç­–æ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰å¯¹åœºæ™¯æœ€åˆé€‚çš„æƒè¡¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¡ç®—æœºåä¸‡ä¸ªä¸ºä»€ä¹ˆ--æ•°æ®åº“ç´¢å¼•]]></title>    <link>https://juejin.cn/post/7581292270962114570</link>    <guid>https://juejin.cn/post/7581292270962114570</guid>    <pubDate>2025-12-08T15:57:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581292270962114570" data-draft-id="7581292270962081802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¡ç®—æœºåä¸‡ä¸ªä¸ºä»€ä¹ˆ--æ•°æ®åº“ç´¢å¼•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-08T15:57:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™å¤§6"/> <meta itemprop="url" content="https://juejin.cn/user/2865758605422890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¡ç®—æœºåä¸‡ä¸ªä¸ºä»€ä¹ˆ--æ•°æ®åº“ç´¢å¼•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2865758605422890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™å¤§6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T15:57:08.000Z" title="Mon Dec 08 2025 15:57:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®¡ç®—æœºåä¸‡ä¸ªä¸ºä»€ä¹ˆ--æ•°æ®åº“ç´¢å¼•</h2>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æœ€æ–°ä¸€æœŸçš„æ— é™å¤§åšå®¢ã€‚</p>
<p>çªç„¶å‘ç°è‡ªå·±å¯¹æ•°æ®åº“ç›¸å…³çš„å†…å®¹æŒæ¡ä¸å¤Ÿæ‰å®ï¼Œäºæ˜¯å°±å»å­¦ä¹ äº†ä¸€ä¸‹ï¼Œé¡ºä¾¿ä¹Ÿå°†è‡ªå·±çš„ç†è§£å†™æˆäº†ä¸€ç¯‡åšå®¢ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©</p>
</blockquote>
<h3 data-id="heading-1">æ•°æ®åº“ç´¢å¼•ï¼šç»™æ•°æ®ä»“åº“è£…ä¸ª"æ™ºèƒ½å¯¼èˆªç³»ç»Ÿ" ğŸ§­</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ èµ°è¿›ä¸€ä¸ªå åœ° 1000 å¹³æ–¹ç±³çš„è¶…çº§å›¾ä¹¦é¦† ğŸ“šï¼Œé‡Œé¢å¡æ»¡äº†å‡ åä¸‡æœ¬ä¹¦ï¼Œå´è¿ä¸ªåˆ†ç±»ç‰Œéƒ½æ²¡æœ‰ã€‚è€æ¿å¿½ç„¶å–Šä½ æ‰¾ä¸€æœ¬ã€Šæ•°æ®åº“ä»å…¥é—¨åˆ°æ”¾å¼ƒã€‹ï¼Œä½ æ˜¯ä¸æ˜¯å½“åœºæƒ³è¡¨æ¼”ä¸€ä¸ªåŸåœ°æ¶ˆå¤±æœ¯ï¼ŸğŸ˜±</p>
<p>è¿™å°±æ˜¯<strong>æ²¡æœ‰ç´¢å¼•çš„æ•°æ®åº“</strong>çš„æ—¥å¸¸ï¼æ¯æ¬¡æŸ¥è¯¢éƒ½åƒè’™çœ¼æ‰¾ä¹¦ï¼Œå…¨è¡¨æ‰«æå°±æ˜¯é‚£ä¸ªè¢«è’™ä½çœ¼ç›çš„å€’éœ‰è›‹ï¼Œåªèƒ½ä¸€æœ¬æœ¬æ‘¸è¿‡å»ã€‚è€Œä»Šå¤©æˆ‘ä»¬è¦èŠçš„ <strong>æ•°æ®åº“ç´¢å¼•</strong> ï¼Œå°±æ˜¯ç»™è¿™ä¸ªæ··ä¹±å›¾ä¹¦é¦†è£…ä¸Šçš„æ™ºèƒ½å¯¼èˆªç³»ç»Ÿ ğŸ§­ï¼Œè®©ä½ ç§’å˜å›¾ä¹¦é¦†é¦†é•¿ï¼Œæƒ³æ‰¾å“ªæœ¬ä¹¦å°±æ‰¾å“ªæœ¬ä¹¦ï¼</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆ"like '%å…³é”®è¯%'"ä¼šè®©ç´¢å¼•å½“åœºç½¢å·¥ï¼Ÿ</h3>
<p>å…ˆçœ‹ä¸ªçµé­‚æ‹·é—®ï¼šä¸‹é¢ä¸¤æ¡ SQLï¼Œæ€§èƒ½å¯èƒ½å·® 1000 å€ï¼ä½ çŒœå“ªä¸ªå¿«ï¼Ÿ</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­å¥ A</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> books <span class="hljs-keyword">WHERE</span> title <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'æ•°æ®åº“%'</span>;

<span class="hljs-comment">-- è¯­å¥ B</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> books <span class="hljs-keyword">WHERE</span> title <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%æ•°æ®åº“%'</span>;
</code></pre>
<p>ç­”æ¡ˆæ˜¯<strong>è¯­å¥ A å¯èƒ½å¿«åˆ°é£èµ·ï¼Œè¯­å¥ B å¯èƒ½æ…¢åˆ°æƒ³ç ¸é”®ç›˜</strong> ï¼</p>
<p>åŸå› å°±è—åœ¨é‚£ä¸ªå°å°çš„ç™¾åˆ†å·é‡Œã€‚</p>
<h4 data-id="heading-3">ğŸŒ° è’™çœ¼æ‰¾ä¹¦ç°åœºè¿˜åŸ</h4>
<p>å‡è®¾æˆ‘ä»¬ç»™ title å­—æ®µå»ºäº†ç´¢å¼•ï¼Œå°±åƒå›¾ä¹¦é¦†æŒ‰ä¹¦åé¦–å­—æ¯æ’åºçš„åˆ†ç±»æ¶ã€‚å½“ä½ æ‰§è¡Œ LIKE 'æ•°æ®åº“%' æ—¶ï¼Œç´¢å¼•ä¼šå¼€å¿ƒåœ°å¸¦ä½ ç›´å¥” "æ•°" å­—åŒºï¼Œä» "æ•°æ®åº“å…¥é—¨" æ‰¾åˆ° "æ•°æ®åº“åŸç†"ï¼Œä¸€æ°”å‘µæˆ ğŸš€ã€‚</p>
<p>ä½†å¦‚æœå†™æˆ LIKE '%æ•°æ®åº“%'ï¼Œç›¸å½“äºä½ å‘Šè¯‰å›¾ä¹¦ç®¡ç†å‘˜ï¼š"æˆ‘è¦æ‰¾æ‰€æœ‰ä¹¦åé‡ŒåŒ…å«'æ•°æ®åº“'çš„ä¹¦ï¼Œä½†æˆ‘ä¸å‘Šè¯‰ä½ å®ƒåœ¨å¼€å¤´è¿˜æ˜¯ç»“å°¾"ã€‚è¿™æ—¶å€™ç´¢å¼•ç›´æ¥æ‡µäº† ğŸ˜µï¼Œå› ä¸ºå®ƒçš„æ’åºè§„åˆ™æ˜¯æŒ‰é¦–å­—æ¯æ¥çš„ï¼Œç°åœ¨å…³é”®è¯å¯èƒ½å‡ºç°åœ¨ä»»ä½•ä½ç½®ï¼Œå°±åƒè®©ä½ åœ¨æ‰€æœ‰ä¹¦é‡Œæ‰¾ "åŒ…å«'çš„'å­—çš„ä¹¦" ä¸€æ ·â€”â€”ç´¢å¼•å®Œå…¨å¸®ä¸ä¸Šå¿™ï¼</p>
<p><strong>å…¨è¡¨æ‰«æè­¦å‘Š</strong> âš ï¸ï¼šæ•°æ®åº“åªèƒ½å¼€å¯"è’™çœ¼æ‘¸ä¹¦"æ¨¡å¼ï¼Œé€è¡Œæ£€æŸ¥æ¯æ¡è®°å½•ã€‚å¦‚æœè¡¨ä¸­æœ‰ 100 ä¸‡æ¡æ•°æ®ï¼Œå°±åƒè®©ä½ åœ¨ 100 ä¸‡æœ¬ä¹¦é‡Œä¸€æœ¬æœ¬ç¿»å¼€æ‰¾ï¼Œç”»é¢å¤ªç¾æˆ‘ä¸æ•¢çœ‹ ğŸ¥¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af55f14a116a4b07925841af1a6aff5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765814227&amp;x-signature=vbbg0wk6GxgqkD2gRB1WNG7uPFE%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">é¿å‘æŒ‡å—ï¼š3 ä¸ªè®©ç´¢å¼•å¤±æ•ˆçš„ç»å…¸æ“ä½œ</h4>

























<table><thead><tr><th>é”™è¯¯å†™æ³• ğŸ”´</th><th>æ­£ç¡®å§¿åŠ¿ ğŸŸ¢</th><th>æ€§èƒ½å·®è·</th></tr></thead><tbody><tr><td>LIKE '%å…³é”®è¯%'</td><td>LIKE 'å…³é”®è¯%' æˆ–ä½¿ç”¨å…¨æ–‡ç´¢å¼•</td><td>å¯èƒ½å·® 100~1000 å€</td></tr><tr><td>WHERE age + 1 = 25</td><td>WHERE age = 24</td><td>ç´¢å¼•ç›´æ¥å¤±æ•ˆ</td></tr><tr><td>WHERE SUBSTR(title, 3) = 'æ•°æ®åº“'</td><td>WHERE title LIKE '__æ•°æ®åº“%'</td><td>å‡½æ•°æ“ä½œå¯¼è‡´ç´¢å¼•å¤±æ•ˆ</td></tr></tbody></table>
<h3 data-id="heading-5">B+æ ‘ç´¢å¼• vs å“ˆå¸Œç´¢å¼•ï¼šæ–°åå­—å…¸ vs å¿«é€’æŸœ</h3>
<p>ç°åœ¨ä½ å†³å®šç»™å›¾ä¹¦é¦†è£…å¯¼èˆªç³»ç»Ÿäº†ï¼Œä½†å¸‚åœºä¸Šæœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>æ–¹æ¡ˆ A</strong> ï¼šåƒã€Šæ–°åå­—å…¸ã€‹é‚£æ ·çš„ç›®å½• ğŸ“–ï¼ˆB+æ ‘ç´¢å¼•ï¼‰</li>
<li><strong>æ–¹æ¡ˆ B</strong> ï¼šåƒå¿«é€’æŸœé‚£æ ·çš„ç¼–å·ç³»ç»Ÿ ğŸ“¦ï¼ˆå“ˆå¸Œç´¢å¼•ï¼‰</li>
</ul>
<p>åˆ°åº•é€‰å“ªä¸ªï¼Ÿè¿™å¾—çœ‹ä½ å¹³æ—¶æ€ä¹ˆæ‰¾ä¹¦ï¼</p>
<h4 data-id="heading-6">ğŸ“– B+æ ‘ç´¢å¼•ï¼šæ–°åå­—å…¸çš„æ™ºæ…§</h4>
<p>ç¿»å¼€ä½ çš„æ–°åå­—å…¸ï¼Œä¼šå‘ç°å®ƒæœ‰ä¸¤ç§ç›®å½•ï¼šæ‹¼éŸ³ç´¢å¼•å’Œéƒ¨é¦–ç´¢å¼•ã€‚B+æ ‘ç´¢å¼•å°±åƒæ‹¼éŸ³ç´¢å¼•ï¼Œå®ƒæŠŠæ•°æ®æŒ‰é¡ºåºæ’å¥½ï¼Œå¹¶ä¸”åªåœ¨å¶å­èŠ‚ç‚¹å­˜å‚¨å®Œæ•´æ•°æ®ï¼Œä¸­é—´èŠ‚ç‚¹éƒ½æ˜¯"æŒ‡è·¯ç‰Œ"ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[æ ¹èŠ‚ç‚¹] --&gt;|1-100| B[ä¸­é—´èŠ‚ç‚¹]
    A --&gt;|101-200| C[ä¸­é—´èŠ‚ç‚¹]
    
    B --&gt;|1-50| D[å¶å­èŠ‚ç‚¹: 1,3,5...50]
    B --&gt;|51-100| E[å¶å­èŠ‚ç‚¹: 51,53...100]
    
    C --&gt;|101-150| F[å¶å­èŠ‚ç‚¹: 101...150]
    C --&gt;|151-200| G[å¶å­èŠ‚ç‚¹: 151...200]
    
    D --&gt;|é“¾è¡¨æŒ‡é’ˆ| E
    E --&gt;|é“¾è¡¨æŒ‡é’ˆ| F
    F --&gt;|é“¾è¡¨æŒ‡é’ˆ| G
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c4470d9e5c644a58ad6358b273413f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765814227&amp;x-signature=6fOfWkEI4yZeG6CLAhZfpaK0H9A%3D" alt="image.png" loading="lazy"/>
<strong>é€‚ç”¨åœºæ™¯</strong> ï¼š</p>
<ul>
<li>èŒƒå›´æŸ¥è¯¢ï¼ˆæ¯”å¦‚æ‰¾ "ä»·æ ¼åœ¨ 10-50 å…ƒçš„ä¹¦"ï¼‰ğŸ“Š</li>
<li>æ’åºæ“ä½œï¼ˆæ¯”å¦‚ "æŒ‰å‡ºç‰ˆæ—¥æœŸå€’åºæ’åˆ—"ï¼‰ğŸ”„</li>
<li>å‰ç¼€åŒ¹é…ï¼ˆæ¯”å¦‚ LIKE 'æ•°æ®åº“%'ï¼‰ğŸ¯</li>
</ul>
<h4 data-id="heading-7">ğŸ“¦ å“ˆå¸Œç´¢å¼•ï¼šå¿«é€’æŸœçš„æš´åŠ›ç¾å­¦</h4>
<p>å“ˆå¸Œç´¢å¼•å°±åƒå¿«é€’æŸœï¼Œæ¯ä¸ª key éƒ½é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºä¸€ä¸ªå”¯ä¸€ç¼–å·ï¼Œç›´æ¥å®šä½åˆ°å­˜å‚¨ä½ç½®ã€‚æ¯”å¦‚æŸ¥è¯¢ id=100 çš„æ•°æ®ï¼Œå“ˆå¸Œå‡½æ•°ç®—å‡ºæ¥æ˜¯ 8 å·æŸœï¼Œç›´æ¥æ‹‰å¼€ 8 å·æŸœå°±èƒ½æ‰¾åˆ°ï¼</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong> ï¼š</p>
<ul>
<li>ç­‰å€¼æŸ¥è¯¢ï¼ˆæ¯”å¦‚ WHERE id=100ï¼‰âš¡</li>
<li>é”®å€¼å¯¹æ•°æ®åº“ï¼ˆå¦‚ Redisï¼‰ğŸš€</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28c5e3b67a8741c4b9d580703ab13f31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765814227&amp;x-signature=Pk%2BnRltKlaxkySqYMv40zm4px7s%3D" alt="image.png" loading="lazy"/></p>
<p><strong>çµé­‚å¯¹æ¯”è¡¨æ ¼</strong> ğŸ‘‡</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>B+æ ‘ç´¢å¼•</th><th>å“ˆå¸Œç´¢å¼•</th></tr></thead><tbody><tr><td>æŸ¥æ‰¾é€Ÿåº¦</td><td>O(log n) ç¨³å®š</td><td>O(1) ä½†æœ‰å“ˆå¸Œå†²çªé£é™©</td></tr><tr><td>èŒƒå›´æŸ¥è¯¢</td><td>âœ… å¤©ç”Ÿæ”¯æŒ</td><td>âŒ å®Œå…¨ä¸æ”¯æŒ</td></tr><tr><td>æ’åº</td><td>âœ… å¶å­èŠ‚ç‚¹é“¾è¡¨å¤©ç„¶æœ‰åº</td><td>âŒ æ— åºå­˜å‚¨</td></tr><tr><td>å†…å­˜å ç”¨</td><td>ä¸­ç­‰ï¼ˆå¯å­˜ç£ç›˜ï¼‰</td><td>è¾ƒé«˜ï¼ˆé€šå¸¸å†…å­˜å­˜å‚¨ï¼‰</td></tr><tr><td>ç»å…¸åº”ç”¨</td><td>MySQL InnoDB ä¸»é”®ç´¢å¼•</td><td>Redisã€Memcached é”®å€¼å­˜å‚¨</td></tr></tbody></table>
<p>MySQL InnoDB èšç°‡ç´¢å¼•ï¼šå¶å­èŠ‚ç‚¹é‡Œè—ç€å¤§ç§˜å¯†ï¼</p>
<blockquote>
<p>å¦‚æœä½ ç”¨ MySQL çš„ InnoDB å¼•æ“ï¼Œé‚£ä½ å¿…é¡»çŸ¥é“è¿™ä¸ª<strong>æƒŠå¤©å¤§ç§˜å¯†</strong> ğŸ’£ï¼š</p>
<p>å®ƒçš„ä¸»é”®ç´¢å¼•å¶å­èŠ‚ç‚¹ç›´æ¥å­˜ç€æ•´è¡Œæ•°æ®ï¼å°±åƒä½ æŸ¥æ–°åå­—å…¸æ—¶ï¼Œç¿»åˆ° "æ•°" å­—ä¸ä»…èƒ½çœ‹åˆ°æ‹¼éŸ³ï¼Œè¿˜èƒ½ç›´æ¥æŠŠæ•´é¡µå­—å…¸æ’•ä¸‹æ¥å¸¦èµ° ğŸ“„ã€‚</p>
</blockquote>
<h4 data-id="heading-8">èšç°‡ç´¢å¼• vs éèšç°‡ç´¢å¼•ï¼šå†°ç®± vs å‚¨ç‰©æŸœ</h4>
<ul>
<li><strong>èšç°‡ç´¢å¼•</strong> ï¼ˆä¸»é”®ç´¢å¼•ï¼‰ï¼šå°±åƒå®¶é‡Œçš„å†°ç®± ğŸ§Šï¼Œé—¨ï¼ˆç´¢å¼•ï¼‰æ‰“å¼€ç›´æ¥çœ‹åˆ°é£Ÿç‰©ï¼ˆæ•°æ®ï¼‰ï¼Œä¸ç”¨å†è·‘ä¸€è¶Ÿã€‚</li>
<li><strong>éèšç°‡ç´¢å¼•</strong> ï¼ˆäºŒçº§ç´¢å¼•ï¼‰ï¼šå°±åƒå‚¨ç‰©æŸœçš„æ ‡ç­¾ ğŸ·ï¸ï¼Œä¸Šé¢å†™ç€"é›¶é£Ÿåœ¨å†°ç®±ç¬¬ä¸‰å±‚"ï¼Œä½ è¿˜å¾—å†å»å†°ç®±æ‹¿ã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    subgraph èšç°‡ç´¢å¼• B+æ ‘
        A[æ ¹èŠ‚ç‚¹: ä¸»é”®èŒƒå›´ 1-1000]
        B[ä¸­é—´èŠ‚ç‚¹: 1-500]
        C[ä¸­é—´èŠ‚ç‚¹: 501-1000]
        D[å¶å­èŠ‚ç‚¹: 1-100, åŒ…å«æ•´è¡Œæ•°æ®]
        E[å¶å­èŠ‚ç‚¹: 101-200, åŒ…å«æ•´è¡Œæ•°æ®]
    end
    A --&gt; B
    A --&gt; C
    B --&gt; D
    B --&gt; E
    D --&gt; E --&gt; F[...æ›´å¤šå¶å­èŠ‚ç‚¹]
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/160a9dcbc0064816ba3dbe2cb8b65cb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765814227&amp;x-signature=8G4oOm2f5U2TqZ8aavypp%2FnmZqc%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-9">å®æˆ˜ï¼šå¦‚ä½•æ£€æµ‹ç´¢å¼•å¤±æ•ˆï¼Ÿ</h4>
<p>ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªæˆ‘å‹ç®±åº•çš„<strong>ç´¢å¼•å¤±æ•ˆæ£€æµ‹ SQL</strong> ğŸ•µï¸â€â™‚ï¸ï¼Œæ‰§è¡Œå®ƒå°±èƒ½çŸ¥é“æŸ¥è¯¢æœ‰æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">EXPLAIN
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> books
<span class="hljs-keyword">WHERE</span> title <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%æ•°æ®åº“%'</span>  <span class="hljs-comment">-- è¿™ä¸ªä¼šå¤±æ•ˆ</span>
  <span class="hljs-keyword">AND</span> price <span class="hljs-operator">&gt;</span> <span class="hljs-number">50</span>;           <span class="hljs-comment">-- è¿™ä¸ªå¯èƒ½æœ‰æ•ˆ</span>
</code></pre>
<p><strong>ç»“æœè§£è¯»</strong> ğŸ‘‡ï¼š
-- é‡ç‚¹çœ‹ type åˆ—ï¼š
-- âœ… ref/range/indexï¼šç´¢å¼•æœ‰ç”¨
-- âŒ ALLï¼šå…¨è¡¨æ‰«æï¼Œç´¢å¼•å¤±æ•ˆï¼</p>
<p><strong>é¿å‘ç¥æŠ€</strong> âœ¨ï¼šå¦‚æœå¿…é¡»ç”¨ %å…³é”®è¯% æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¯ä»¥è€ƒè™‘ç”¨  <strong>å…¨æ–‡ç´¢å¼•</strong> ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºå…¨æ–‡ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> FULLTEXT INDEX idx_title_ft <span class="hljs-keyword">ON</span> books(title);

<span class="hljs-comment">-- é«˜æ•ˆæŸ¥è¯¢åŒ…å«å…³é”®è¯çš„è®°å½•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> books
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">MATCH</span>(title) AGAINST(<span class="hljs-string">'æ•°æ®åº“'</span> <span class="hljs-keyword">IN</span> <span class="hljs-keyword">NATURAL</span> <span class="hljs-keyword">LANGUAGE</span> MODE);
</code></pre>
<hr/>
<blockquote>
<h3 data-id="heading-10">ç´¢å¼•è®¾è®¡çš„ä¸‰å¤§çµé­‚æ‹·é—®</h3>
<ol>
<li><strong>æ˜¯ä¸æ˜¯ç´¢å¼•è¶Šå¤šè¶Šå¥½ï¼Ÿ</strong></li>
</ol>
<p>ç­”ï¼šNOï¼ç´¢å¼•åƒå›¾ä¹¦é¦†çš„åˆ†ç±»æ¶ï¼Œå¤ªå¤šäº†åè€Œéš¾æ‰¾ï¼Œè€Œä¸”æ¯æ¬¡å¢åˆ æ”¹æ•°æ®éƒ½è¦ç»´æŠ¤ç´¢å¼•ï¼Œå°±åƒæ¯æ¬¡æ–°ä¹¦å…¥åº“éƒ½è¦é‡æ–°è´´æ ‡ç­¾ è´´åˆ°å´©æºƒã€‚</p>
<ol start="2">
<li><strong>ä¸»é”®ä¸ºä»€ä¹ˆæœ€å¥½æ˜¯è‡ªå¢ IDï¼Ÿ</strong></li>
</ol>
<p>ç­”ï¼šInnoDB èšç°‡ç´¢å¼•å¦‚æœç”¨éšæœº IDï¼Œä¼šå¯¼è‡´å¶å­èŠ‚ç‚¹é¢‘ç¹åˆ†è£‚ï¼Œå°±åƒä½ æ•´ç†å¥½çš„ä¹¦æ¶å¿½ç„¶æ’è¿›æ–°ä¹¦ï¼Œæ•´ä¸ªæ¶å­éƒ½è¦é‡æ’ ğŸ—„ï¸ã€‚</p>
<ol start="3">
<li><strong>ä¸ºä»€ä¹ˆä¸å»ºè®®ç”¨ UUID åšä¸»é”®ï¼Ÿ</strong></li>
</ol>
<p>ç­”ï¼šUUID æ˜¯éšæœºå­—ç¬¦ä¸²ï¼Œç´¢å¼•æ ‘ä¼šå˜æˆ"æ­ªè„–å­æ ‘" ğŸŒ³ï¼ŒæŸ¥è¯¢æ•ˆç‡æš´è·Œï¼ä¸ä¿¡ä½ è¯•è¯•ç»™å›¾ä¹¦é¦†çš„ä¹¦æŒ‰ UUID æ’åºï¼Ÿ</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">ç»“è¯­ï¼šç´¢å¼•ä¸æ˜¯é“¶å¼¹ï¼Œä½†æ²¡æœ‰ç´¢å¼•æ˜¯çœŸçš„å®Œè›‹</h3>
<p>æœ€åé€å¤§å®¶ä¸€å¥æˆ‘å¥¶å¥¶éƒ½èƒ½å¬æ‡‚çš„è¯ï¼š<strong>ç´¢å¼•å°±åƒç»™è‡ªè¡Œè½¦è£…å˜é€Ÿå™¨</strong> ğŸš²ï¼Œå¹³æ—¶é€šå‹¤ï¼ˆç®€å•æŸ¥è¯¢ï¼‰å¯èƒ½æ„Ÿè§‰ä¸åˆ°ï¼Œä½†é‡åˆ°çˆ¬å¡ï¼ˆå¤æ‚æŸ¥è¯¢ï¼‰æ—¶ï¼Œæœ‰æ²¡æœ‰å˜é€Ÿå™¨ç›´æ¥æ˜¯ä¸¤ä¸ªç‰©ç§ï¼</p>
<p>ä½†è®°ä½ï¼Œæ²¡æœ‰ä¸‡èƒ½çš„ç´¢å¼•è®¾è®¡ï¼Œæœ€å¥½çš„å®è·µæ˜¯ï¼š<strong>ç”¨ EXPLAIN åˆ†æ SQLï¼Œç”¨ç›‘æ§å·¥å…·è§‚å¯Ÿæ…¢æŸ¥è¯¢ï¼Œè®©æ•°æ®å‘Šè¯‰ä½ ç­”æ¡ˆ</strong> ğŸ“Šã€‚</p>
<p>ç¥å¤§å®¶éƒ½èƒ½å†™å‡ºé£ä¸€èˆ¬çš„ SQLï¼Œå†ä¹Ÿä¸ç”¨å¯¹ç€å…¨è¡¨æ‰«ææ‰å¤´å‘ï¼ğŸ’‡â€â™‚ï¸ğŸ’¨</p>
<p>ï¼ˆå¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè®°å¾—ç‚¹èµæ”¶è—å“¦~ ğŸ‘‡ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§»åŠ¨ç«¯è®¾å¤‡ä¸Šç¨€å¥‡å¤æ€ªçš„å‰ç«¯é—®é¢˜æ”¶é›†ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7581041679190507555</link>    <guid>https://juejin.cn/post/7581041679190507555</guid>    <pubDate>2025-12-08T08:52:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581041679190507555" data-draft-id="7581041679190491171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§»åŠ¨ç«¯è®¾å¤‡ä¸Šç¨€å¥‡å¤æ€ªçš„å‰ç«¯é—®é¢˜æ”¶é›†ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-08T08:52:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§»åŠ¨ç«¯è®¾å¤‡ä¸Šç¨€å¥‡å¤æ€ªçš„å‰ç«¯é—®é¢˜æ”¶é›†ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T08:52:35.000Z" title="Mon Dec 08 2025 08:52:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    31
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œbug å¾€å¾€æ˜¯æˆ‘ä»¬æœ€æ€•é‡è§çš„ä¸œè¥¿ï¼›è€Œæ¯”é‡åˆ° bug æ›´å¯æ€•çš„äº‹æƒ…ï¼Œæ˜¯å®šä½ä¸åˆ° bugã€‚ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„ bug è¿˜ç›¸å¯¹å¥½å®šä½ã€å¥½è§£å†³ä¸€äº›ï¼›è€Œä¸€äº›ä¸è¯­æ³•ç‰¹æ€§ã€å¹³å°ä¸è®¾å¤‡å·®å¼‚ç›¸å…³çš„ bug åˆ™æ›´ä»¤äººå¤´ç–¼ä¸€äº›ã€‚è¿™é‡Œè®°å½•ä¸‹æˆ‘åœ¨å·¥ä½œä¸­é‡åˆ°è¿‡çš„ç¨€å¥‡å¤æ€ªçš„å‰ç«¯é—®é¢˜ï¼Œä½œä¸ºç»™è‡ªå·±çš„è®°å½•å’Œæé†’ã€‚</p>
<h2 data-id="heading-0"><strong>ç”¨ vh å®šä¹‰å…¨å±æ˜¾ç¤ºçš„é—®é¢˜</strong></h2>
<p>å¾ˆå¤šé¡µé¢å› ä¸ºè®¾è®¡æ•ˆæœçš„éœ€è¦ï¼Œè¦æ±‚æ­£å¥½é“ºæ»¡ä¸€æ•´ä¸ªæ˜¾ç¤ºç•Œé¢ã€ä¹Ÿä¸å…è®¸ä¸Šä¸‹æ»‘åŠ¨ã€‚åšç±»ä¼¼çš„éœ€æ±‚æ—¶ï¼Œå¾€å¾€ç›´è§‰ä¼šä½¿ç”¨è¿™æ ·çš„ä»£ç è§£å†³é—®é¢˜ï¼š</p>
<pre><code class="hljs language-css" lang="css">{
 <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
}
</code></pre>
<p>è¿™æ ·çš„ä»£ç çœ‹ä¼¼å¾ˆä¼˜é›…ï¼Œä½†æ˜¯å¾€å¾€ä¼šæœ‰å…¼å®¹æ€§é—®é¢˜â€”â€”ä¸åŒæµè§ˆå™¨å®šä¹‰çš„è§†å£é«˜åº¦çš„å®šä¹‰ä¸ä¸€è‡´ï¼Œå¯¼è‡´ <code>100vh</code> å¹¶ä¸èƒ½çœŸæ­£è¦†ç›–å…¨è§†å£é«˜åº¦ï¼›è¿˜æœ‰ä¸å°‘æµè§ˆå™¨è§†å£é«˜åº¦æ•°å€¼ä¸å˜ä½†å®é™…è§†å£å¤§å°å¯å˜ï¼Œæ¯”å¦‚ç§»åŠ¨ç«¯ Chrome æµè§ˆå™¨çš„å¯¼èˆªæ æ—¶ä¸æ—¶éšè—ä½†ç½‘é¡µè·å–çš„è§†å£é«˜åº¦ä¸å˜ï¼Œè¿™éƒ½ä¼šå¯¼è‡´æœ€ç»ˆæ˜¾ç¤ºæ•ˆæœä¸ç¬¦åˆé¢„æœŸã€‚</p>
<p>å¦‚æœè¦å®ç°å…¨å±å¹•è¦†ç›–ä¸å¯æ»‘åŠ¨ï¼Œæ›´ä¸ºç¨³å¦¥å’Œä¿é™©çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç»å¯¹å®šä½ï¼š</p>
<pre><code class="hljs language-css" lang="css">{
 <span class="hljs-attribute">position</span>: fixed;
 <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
 <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
 <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
 <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
}
</code></pre>
<h2 data-id="heading-1"><strong>å¸¦ alpha é€šé“çš„ hex é¢œè‰²å€¼å¤±æ•ˆçš„é—®é¢˜</strong></h2>
<p>åœ¨è¾ƒæ–°çš„ web æ ‡å‡†ä¸­ï¼Œhex æ ¼å¼çš„é¢œè‰²ä»£ç ä¹Ÿå¯ä»¥è¡¨ç¤ºé€æ˜åº¦äº†ï¼Œåªéœ€è¦åœ¨å¸¸è§çš„å…­ä½ hex é¢œè‰²ä»£ç ååŠ ä¸¤ä½è¡¨ç¤ºé€æ˜åº¦çš„ hex å€¼ï¼Œä¾‹å¦‚ <code>#66ccff</code> è¡¨ç¤ºä¸€ç§è“è‰²ï¼Œè€Œ <code>#66ccff80</code> è¡¨ç¤ºé€æ˜åº¦ 50% çš„è¿™ç§è“è‰²ï¼ˆ80 æ˜¯ 16 è¿›åˆ¶çš„ 128ï¼Œæ˜¯ 256 çš„ä¸€åŠï¼Œå³ 50% é€æ˜åº¦ï¼‰ã€‚è™½ç„¶ç›´æ¥è¿™æ ·å†™ä»£ç çš„è¡Œä¸ºåœ¨å‰ç«¯å¼€å‘ä¸­ä¸æ™®éï¼Œä½†æ˜¯è®¾è®¡å¸ˆäº¤ä»˜çš„è§†è§‰ç¨¿ç»™å‡ºçš„å‚è€ƒå€¼æœ‰ä¸å°‘æ˜¯è¿™ç§æ ¼å¼ã€‚å¦‚æœç›´æ¥æŠŠè¿™æ ·çš„é¢œè‰²ä»£ç ç”¨äºç”Ÿäº§ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹ä¸¤ç§é—®é¢˜ï¼š</p>
<p>â—¦å¦‚æœä½ ç¼–å†™çš„é¡¹ç›®å¼•å…¥äº† less æˆ–è€… sassï¼Œåœ¨è¿›è¡Œæ‰“åŒ…æ„å»ºçš„æ“ä½œæ—¶ï¼Œéƒ¨åˆ†é¢„å¤„ç†å™¨æ— æ³•æ­£ç¡®è¯†åˆ«å¸¦ alpha é€šé“çš„ hex é¢œè‰²å€¼ï¼Œå› æ­¤è¿™éƒ¨åˆ†ä»£ç æ— æ³•è¢«æ­£ç¡®è½¬è¯‘ï¼Œæœ€ç»ˆæ„å»ºå‡ºçš„ç”Ÿäº§ç¯å¢ƒä»£ç ä¸­è¿™éƒ¨åˆ†é¢œè‰²å¯èƒ½ä¸¢å¤±ã€‚</p>
<p>â—¦éƒ¨åˆ†ç§»åŠ¨ç«¯æµè§ˆå™¨å¹¶æœªé€‚é…å¸¦ alpha é€šé“çš„ hex é¢œè‰²å€¼ï¼Œå› æ­¤å³ä½¿æ˜¯ä½¿ç”¨åŸç”Ÿ css å®Œæˆçš„ä»£ç ï¼Œä¹Ÿæœ‰å¯èƒ½å‡ºç°åœ¨éƒ¨åˆ†æ‰‹æœºæˆ–éƒ¨åˆ†æµè§ˆå™¨é¢œè‰²ä¸æ­£å¸¸çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-2"><strong>ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸æ‰§è¡Œçš„é—®é¢˜</strong></h2>
<p>åœ¨é¡µé¢åˆšæ‰“å¼€æˆ–å‡†å¤‡å…³é—­æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦è¿›è¡Œä¸€äº›è¯¸å¦‚æ•°æ®åˆå§‹åŒ–ã€ç™»å…¥ç™»å‡ºã€æ•°æ®ä¸ŠæŠ¥ç­‰è¡Œä¸ºï¼Œè€Œè¿™äº›å¾€å¾€æ˜¯å€ŸåŠ© Vue æˆ– React çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å®Œæˆçš„ã€‚ä¸è¿‡ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸æ‰§è¡Œä¹Ÿæ˜¯å¸¸è¢«å¿½ç•¥çš„ bugï¼Œè¯¦ç»†æ¥è¯´ï¼Œåˆå¯ä»¥åˆ†ä¸ºä¸¤ç±»åŸå› â€”â€”</p>
<h3 data-id="heading-3"><strong>ç»„ä»¶è¢« keep alive å¯¼è‡´æœªè¢«å¸è½½æˆ–é‡æ–°åŠ è½½</strong></h3>
<p>å¦‚æœæ˜¯ Vue ä¸­ä½¿ç”¨ <code>keep-alive</code> åŒ…è£¹çš„ç»„ä»¶ï¼Œæˆ–åœ¨ React ä¸­ä½¿ç”¨ç±»ä¼¼çš„ç¬¬ä¸‰æ–¹åº“ keep alive çš„ç»„ä»¶ï¼Œåªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶æ‰§è¡Œç”Ÿå‘½å‘¨æœŸåˆå§‹åŒ–å‡½æ•°ï¼Œä¸”ä¸ä¼šæ‰§è¡Œç”Ÿå‘½å‘¨æœŸå¸è½½å‡½æ•°ã€‚è¿™å¯¼è‡´çš„ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºå¾ˆå¥½è§£å†³ï¼Œåªéœ€è¦ä½¿ç”¨ <code>onActivated</code> ä»£æ›¿ <code>onMounted</code> ï¼Œç”¨ <code>onDeactivated</code> ä»£æ›¿ <code>onUnmounted</code> å³å¯ã€‚</p>
<h3 data-id="heading-4"><strong>é¡µé¢è¢«ç›´æ¥å…³é—­å¯¼è‡´æ¡†æ¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ— æ³•æ‰§è¡Œ</strong></h3>
<p>ä¸ç®¡æ˜¯ Vue è¿˜æ˜¯ Reactï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ­£ç¡®æ‰§è¡Œéƒ½ä¾èµ–äº Vue æˆ– React å®ä¾‹çš„å­˜åœ¨ã€‚è€Œå½“ç”¨æˆ·ç›´æ¥å…³é—­æµè§ˆå™¨é¡µé¢çš„æ—¶å€™ï¼ŒVue æˆ– React å®ä¾‹å·²ç»è¢«é”€æ¯äº†ï¼Œç”Ÿå‘½å‘¨æœŸå¸è½½å‡½æ•°å½“ç„¶å°±æ— æ³•æ‰§è¡Œäº†ã€‚å¤„ç†è¿™ç§æƒ…å†µä¹Ÿå¹¶ä¸éº»çƒ¦ï¼Œåªéœ€è¦åœ¨ç”Ÿå‘½å‘¨æœŸåˆå§‹åŒ–å‡½æ•°ä¸­æ·»åŠ å¯¹ window å¸è½½äº‹ä»¶çš„ç›‘å¬ï¼Œç„¶åæŠŠæƒ³è¦è¿›è¡Œçš„æ“ä½œæ”¾åˆ° window å¸è½½äº‹ä»¶å‡½æ•°é‡Œå°±å¥½äº†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">onMonted</span>(<span class="hljs-function">() =&gt;</span> {  
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-function">() =&gt;</span> {    
    <span class="hljs-comment">// éœ€è¦æ‰§è¡Œçš„ä»£ç  </span>
  });
});
</code></pre>
<h2 data-id="heading-5"><strong>æ–‡æœ¬ä¸­çš„ emoji ä¸Šä¸‹è¢«è£å‰ª</strong></h2>
<p>UGC å†…å®¹ä¸­ç»å¸¸å‡ºç°æ–‡æœ¬å’Œ emoji æ··æ’çš„åœºæ™¯ï¼Œè€Œæœ‰æ—¶å¯èƒ½é‡åˆ° emoji ä¸Šä¸‹è¾¹ç¼˜è¢«è£å‰ªçš„é—®é¢˜ã€‚è¿™å¾€å¾€æ˜¯ç”±äºå¼€å‘é¡µé¢æ—¶ä¸ºäº†é™å®šæ–‡æœ¬é«˜åº¦å’Œé—´è·æˆ–å…¶ä»–æ’ç‰ˆæ–¹é¢çš„è¦æ±‚ï¼Œå°† line-height å’Œ font-size è®¾ç½®ä¸ºåŒæ ·çš„å€¼ï¼Œä¸” overflow å±æ€§è¢«è®¾ç½®ä¸º hidden ã€‚å¦‚æœå‡ºç°ç±»ä¼¼æƒ…å†µï¼Œå»ºè®®å»é™¤ line-height çš„é™åˆ¶ï¼Œè€Œé€šè¿‡ margin ç­‰æ–¹å¼æ§åˆ¶è¡Œè·ï¼Œä»è€Œé¿å… emoji è¢«è£å‡ã€‚</p>
<h2 data-id="heading-6"><strong>è¾“å…¥æ¡†è¢«å¼¹èµ·çš„è½¯é”®ç›˜è¦†ç›–çš„é—®é¢˜</strong></h2>
<p>å¦‚æœç§»åŠ¨ç«¯é¡µé¢ä¸­æœ‰è¾“å…¥æ¡†ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½é¢ä¸´è¾“å…¥æ¡†è¢«å¼¹èµ·çš„è½¯é”®ç›˜è¦†ç›–çš„é—®é¢˜ã€‚ä¸€èˆ¬æ¥è®²ï¼Œå¯¹äºéœ€è¦å¼¹èµ·è½¯é”®ç›˜çš„åœºæ™¯ï¼Œè¾ƒæ–°çš„æµè§ˆå™¨æˆ–è€…ç§»åŠ¨ç«¯ app çš„ webview ä¼šè‡ªåŠ¨èšç„¦åˆ°è¾“å…¥æ¡†ä¸­å¹¶æ»šåŠ¨åˆ°ç›¸åº”ä½ç½®ï¼Œæ¥ä¿è¯è¾“å…¥æ¡†çš„æ­£å¸¸æ˜¾ç¤ºï¼›ä½†æ˜¯ï¼Œå¯¹äºå¦‚ä¸‹ä¸¤ç§æƒ…å†µï¼Œå¼¹èµ·çš„è½¯é”®ç›˜ä¼šå°†è¾“å…¥æ¡†è¦†ç›–ï¼Œå½±å“ç”¨æˆ·è¾“å…¥ã€‚</p>
<h3 data-id="heading-7"><strong>æµè§ˆå™¨æœªèƒ½ä¸»åŠ¨èšç„¦åˆ°è¾“å…¥æ¡†</strong></h3>
<p>è½¯é”®ç›˜å¼¹èµ·æ—¶ï¼Œä¸€èˆ¬ä¼šä»åº•éƒ¨å°†é¡µé¢é¡¶èµ·ã€å‹ç¼©è§†å£ï¼›è§†å£é«˜åº¦å˜ä½äº†ï¼ŒåŸå…ˆå¤„äºæ˜¾ç¤ºåŒºåŸŸçš„è¾“å…¥æ¡†å¯èƒ½å°±è¢«æŒ¤åˆ°è¾“å…¥æ¡†å¤–äº†ã€‚å¦‚æœç”¨æˆ·ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬è¾ƒæ—©æˆ– app å†…ç½® webview è¾ƒä¸ºç‰¹æ®Šï¼Œæœ‰å¯èƒ½åœ¨è½¯é”®ç›˜å¼¹å‡ºåæµè§ˆå™¨æœªèƒ½ä¸»åŠ¨èšç„¦åˆ°è¾“å…¥æ¡†ä¸Šã€‚è¿™æ—¶ï¼Œå¼€å‘è€…å¿…é¡»ä¸»åŠ¨èšç„¦åˆ°è¾“å…¥æ¡†å¹¶ä½¿è¾“å…¥æ¡†æ»šåŠ¨åˆ°è§†å£å†…ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">inputEle</span> = document.querySelector(<span class="hljs-string">'#target-input'</span>)<span class="hljs-comment">;inputEle.focus();inputEle.scrollIntoView();</span>
</code></pre>
<h3 data-id="heading-8"><strong>è½¯é”®ç›˜é‡‡ç”¨è¦†ç›–åœ¨è§†å£ä¸Šå±‚è€Œéå‹ç¼©è§†å£çš„æ–¹å¼å¼¹å‡º</strong></h3>
<p>å¦‚æœæµè§ˆå™¨æˆ– webview ç‰ˆæœ¬è¾ƒä¸ºç‰¹æ®Šï¼Œä¸”è¾“å…¥æ¡†å¤„äºé¡µé¢é ä¸‹çš„ä½ç½®æˆ–è€…é’ˆå¯¹è§†å£ç»å¯¹å®šä½äºåº•éƒ¨ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šé¢ä¸´æ›´åŠ å¤æ‚çš„æƒ…å†µã€‚åˆšæ‰å·²ç»æåˆ°ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œè½¯é”®ç›˜å¼¹èµ·çš„æ ‡å‡†åšæ³•æ˜¯ä»åº•éƒ¨å°†é¡µé¢é¡¶èµ·ã€å‹ç¼©è§†å£é«˜åº¦ï¼›ä½†æ˜¯æŸäº›æƒ…å†µä¸‹ï¼Œè½¯é”®ç›˜å¹¶ä¸æ”¹å˜è§†å£å°ºå¯¸ï¼Œè€Œæ˜¯ç›´æ¥ç›–åœ¨è§†å£ä¸Šæ–¹ã€‚è¿™å°±å¯¼è‡´é¡µé¢é€»è¾‘ä¸Šæ˜¯å±•ç¤ºå®Œæ•´çš„ã€è¾“å…¥æ¡†ä¹Ÿæ­£å¸¸æ˜¾ç¤ºåœ¨è§†å£ä¸­ï¼›ä½†è½¯é”®ç›˜é®æŒ¡äº†åŠä¸ªé¡µé¢ï¼Œä¹Ÿå°±çœŸæ­£æ„ä¹‰ä¸Šâ€œè¦†ç›–â€åœ¨è¾“å…¥æ¡†ä¸Šã€‚ç›®å‰ä¸»æµç§»åŠ¨ç«¯æµè§ˆå™¨è¾ƒæ–°çš„ç‰ˆæœ¬éƒ½ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯éƒ¨åˆ† app å†…ç½® webview ä¼šè®¾ç½®ä¸ºâ€œè½¯é”®ç›˜è¦†ç›–åœ¨ webview ä¸Šæ–¹â€ï¼›å› æ­¤è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»ç”±å®¢æˆ·ç«¯æ›´æ”¹ webview çš„è½¯é”®ç›˜è®¾ç½®ã€‚å¦‚æœæ˜¯å¾ˆæ—§çš„æµè§ˆå™¨ç‰ˆæœ¬æˆ–è€…æ— æ³•æ¨åŠ¨å®¢æˆ·ç«¯å¼€å‘è§£å†³é—®é¢˜ï¼Œé‚£å°±åªèƒ½æ”¾å¼ƒæ²»ç–—äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gopher å¸¦ä½ å­¦ Serverless æ¶æ„ï¼šä»æœåŠ¡å™¨è¿ç»´åˆ°æŒ‰éœ€è®¡ç®—çš„èŒƒå¼è½¬å˜]]></title>    <link>https://juejin.cn/post/7580740782933622826</link>    <guid>https://juejin.cn/post/7580740782933622826</guid>    <pubDate>2025-12-08T06:20:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580740782933622826" data-draft-id="7580723992498552868" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gopher å¸¦ä½ å­¦ Serverless æ¶æ„ï¼šä»æœåŠ¡å™¨è¿ç»´åˆ°æŒ‰éœ€è®¡ç®—çš„èŒƒå¼è½¬å˜"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-08T06:20:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²¡å¤šå°‘é€»è¾‘"/> <meta itemprop="url" content="https://juejin.cn/user/2717648475395325"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gopher å¸¦ä½ å­¦ Serverless æ¶æ„ï¼šä»æœåŠ¡å™¨è¿ç»´åˆ°æŒ‰éœ€è®¡ç®—çš„èŒƒå¼è½¬å˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648475395325/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²¡å¤šå°‘é€»è¾‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T06:20:51.000Z" title="Mon Dec 08 2025 06:20:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶æœ‰æ—¶å€™æ˜¯å¦åŒå€¦äº†ç®¡ç†æœåŠ¡å™¨ã€é…ç½®ç¯å¢ƒã€å¤„ç†æ‰©å®¹ï¼Ÿåˆ«æ‹…å¿ƒï¼Œè¿™ç¯‡æŒ‡å—ä¸ºä½ ä»‹ç» <strong>Serverless æ¶æ„</strong>çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ‹’ç»çƒ§è„‘ï¼Œä¸»æ‰“è½»æ¾æ˜“æ‡‚ã€‚æˆ‘ä»¬å°† Serverless çš„å­¦ä¹ ä¹‹æ—…åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š<strong>ç†å¿µã€æ ¸å¿ƒæœåŠ¡ã€å®æˆ˜æ¨¡å¼</strong>ã€‚è®©æˆ‘ä»¬è·Ÿéš Gopher çš„è„šæ­¥ï¼Œä¸€èµ·æ¢ç´¢"æ— æœåŠ¡å™¨"çš„ä¸–ç•Œå§ï¼</p>
<hr/>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šç†å¿µç¯‡ (The Philosophy)</h2>
<p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†è§£ Serverless çš„æœ¬è´¨ã€‚å®ƒä¸æ˜¯"æ²¡æœ‰æœåŠ¡å™¨"ï¼Œè€Œæ˜¯"ä¸ç”¨ç®¡æœåŠ¡å™¨"ã€‚</p>
<h3 data-id="heading-1">â‘  ä¸ºä»€ä¹ˆéœ€è¦ Serverless æ¶æ„ï¼Ÿ</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šServerless æ˜¯ç”¨æŒ‰éœ€è®¡ç®—å¯¹æŠ—è¿ç»´å¤æ‚æ€§çš„æ¶æ„æ–¹æ³•ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
è®©å¼€å‘è€…åªå…³æ³¨ä¸šåŠ¡ä»£ç ï¼Œè€Œå°†æœåŠ¡å™¨ç®¡ç†ã€æ‰©å®¹ã€å®¹é”™ç­‰åŸºç¡€è®¾æ–½å·¥ä½œå®Œå…¨äº¤ç»™äº‘å¹³å°ã€‚ä½ åªéœ€ä¸Šä¼ ä»£ç ï¼Œå¹³å°è‡ªåŠ¨è¿è¡Œã€æ‰©å±•å’Œè®¡è´¹ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
ä¼ ç»Ÿæ¶æ„ä¸­ï¼Œå¼€å‘è€…éœ€è¦é¢„ä¼°æµé‡ã€è´­ä¹°æœåŠ¡å™¨ã€é…ç½®ç¯å¢ƒã€ç›‘æ§æ€§èƒ½ã€å¤„ç†æ‰©å®¹ã€‚è¿™äº›è¿ç»´å·¥ä½œå æ®äº†å¤§é‡æ—¶é—´ï¼Œè€Œä¸”èµ„æºåˆ©ç”¨ç‡ä½ï¼ˆé—²æ—¶æµªè´¹ï¼Œå¿™æ—¶ä¸å¤Ÿï¼‰ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3252d79240a4713ba29024e85b21c8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=qUadTRX76lTJUsSxG7GsBTAomwk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">â‘¡ FaaSï¼ˆå‡½æ•°å³æœåŠ¡ï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šFaaS æ˜¯ Serverless çš„æ ¸å¿ƒè®¡ç®—æ¨¡å‹ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
å°†åº”ç”¨æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å‡½æ•°ï¼ˆFunctionï¼‰ï¼Œæ¯ä¸ªå‡½æ•°å“åº”ç‰¹å®šäº‹ä»¶ï¼ˆHTTP è¯·æ±‚ã€å®šæ—¶ä»»åŠ¡ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰ã€‚å‡½æ•°æŒ‰éœ€æ‰§è¡Œï¼Œæ‰§è¡Œå®Œç«‹å³é‡Šæ”¾èµ„æºã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
FaaS å®ç°äº†çœŸæ­£çš„"æŒ‰éœ€è®¡ç®—"ã€‚ä½ ä¸éœ€è¦ä¸ºç©ºé—²æ—¶é—´ä»˜è´¹ï¼Œä¹Ÿä¸éœ€è¦æ‹…å¿ƒæµé‡çªå¢ï¼Œå¹³å°ä¼šè‡ªåŠ¨æ‰©å±•åˆ°æˆåƒä¸Šä¸‡ä¸ªå®ä¾‹ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c23ac66fd8994efc88ae76fbbd0a2afa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=0hz9c7i2SuUHONuVo9iC%2FjJofhk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">â‘¢ äº‹ä»¶é©±åŠ¨è§¦å‘</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šServerless å‡½æ•°ç”±äº‹ä»¶è§¦å‘æ‰§è¡Œã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
å‡½æ•°ä¸æ˜¯ä¸€ç›´è¿è¡Œçš„æœåŠ¡ï¼Œè€Œæ˜¯è¢«äº‹ä»¶å”¤é†’ï¼šHTTP è¯·æ±‚ã€æ–‡ä»¶ä¸Šä¼ ã€æ•°æ®åº“å˜æ›´ã€å®šæ—¶å™¨ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚äº‹ä»¶åˆ°è¾¾æ—¶ï¼Œå¹³å°è‡ªåŠ¨å¯åŠ¨å‡½æ•°å®ä¾‹å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
äº‹ä»¶é©±åŠ¨æ˜¯ Serverless çš„çµé­‚ã€‚å®ƒè®©å‡½æ•°çœŸæ­£åšåˆ°"ç”¨æ—¶å³æ¥ï¼Œç”¨å®Œå³èµ°"ï¼Œå®ç°æè‡´çš„èµ„æºåˆ©ç”¨ç‡å’Œæˆæœ¬ä¼˜åŒ–ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/993d15e620fa4d09b6e3236113f086a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=snYVJ1O8mQgqje5u2NWzHBW3tQw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒæœåŠ¡ç¯‡ (Core Services)</h2>
<p>ç†è§£äº† Serverless çš„ç†å¿µåï¼Œæˆ‘ä»¬éœ€è¦äº†è§£æ„å»º Serverless åº”ç”¨çš„æ ¸å¿ƒæœåŠ¡ã€‚</p>
<h3 data-id="heading-5">â‘£ API ç½‘å…³ï¼ˆAPI Gatewayï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šAPI ç½‘å…³æ˜¯ Serverless åº”ç”¨çš„ç»Ÿä¸€å…¥å£ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
API ç½‘å…³æ¥æ”¶ HTTP è¯·æ±‚ï¼Œè·¯ç”±åˆ°å¯¹åº”çš„å‡½æ•°ï¼Œå¹¶è¿”å›å“åº”ã€‚å®ƒè¿˜æä¾›è®¤è¯ã€é™æµã€ç¼“å­˜ã€æ—¥å¿—ç­‰åŠŸèƒ½ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å‡½æ•°æœ¬èº«æ²¡æœ‰å›ºå®šçš„ URLï¼ŒAPI ç½‘å…³ä¸ºå‡½æ•°æä¾›ç¨³å®šçš„ RESTful æˆ– GraphQL æ¥å£ï¼Œæ˜¯ Serverless åº”ç”¨å¯¹å¤–çš„"é—¨é¢"ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3281f89d9fdc4db3a113c6b25d273bee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=mhB1kmM2rNlUscR1Vp5QmVCJYb4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">â‘¤ å¯¹è±¡å­˜å‚¨ï¼ˆObject Storageï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå¯¹è±¡å­˜å‚¨æ˜¯ Serverless åº”ç”¨çš„æŒä¹…åŒ–å±‚ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
äº‘ç«¯çš„æ–‡ä»¶å­˜å‚¨æœåŠ¡ï¼ˆå¦‚ AWS S3ã€é˜¿é‡Œäº‘ OSSï¼‰ï¼Œç”¨äºå­˜å‚¨é™æ€æ–‡ä»¶ã€ç”¨æˆ·ä¸Šä¼ ã€æ—¥å¿—ç­‰ã€‚æ”¯æŒæ— é™æ‰©å±•ï¼ŒæŒ‰ä½¿ç”¨é‡è®¡è´¹ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
Serverless å‡½æ•°æ˜¯æ— çŠ¶æ€çš„ï¼Œæ‰§è¡Œå®Œåæ‰€æœ‰ä¸´æ—¶æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚å¯¹è±¡å­˜å‚¨æä¾›äº†å¯é ã€å»‰ä»·çš„æŒä¹…åŒ–æ–¹æ¡ˆï¼Œè€Œä¸”å¯ä»¥è§¦å‘å‡½æ•°ï¼ˆæ–‡ä»¶ä¸Šä¼ äº‹ä»¶ï¼‰ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68d82d56660b44c98665dd0ff94c64fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=89pWh8Czoyue7kBXy0HFLa2uu2Q%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">â‘¥ æ‰˜ç®¡æ•°æ®åº“ï¼ˆManaged Databaseï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šæ‰˜ç®¡æ•°æ®åº“æä¾› Serverless åŒ–çš„æ•°æ®å­˜å‚¨ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
äº‘å¹³å°æä¾›çš„æ•°æ®åº“æœåŠ¡ï¼ˆå¦‚ DynamoDBã€Aurora Serverlessã€Firestoreï¼‰ï¼Œè‡ªåŠ¨æ‰©å±•ã€è‡ªåŠ¨å¤‡ä»½ã€æŒ‰è¯·æ±‚è®¡è´¹ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
ä¼ ç»Ÿæ•°æ®åº“éœ€è¦é¢„é…ç½®å®¹é‡ã€ç®¡ç†è¿æ¥æ± ã€å¤„ç†æ‰©å®¹ã€‚æ‰˜ç®¡æ•°æ®åº“ä¸ Serverless ç†å¿µä¸€è‡´ï¼Œè®©å¼€å‘è€…åªå…³æ³¨æ•°æ®æ¨¡å‹ï¼Œä¸å…³å¿ƒåº•å±‚è¿ç»´ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1b226f07b36448c857eb2a1705b65df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=nZDC83U%2FejpiGU0gEn4ytDl5ERM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">â‘¦ æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šæ¶ˆæ¯é˜Ÿåˆ—å®ç° Serverless å‡½æ•°é—´çš„å¼‚æ­¥é€šä¿¡ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
æ‰˜ç®¡çš„æ¶ˆæ¯æœåŠ¡ï¼ˆå¦‚ AWS SQSã€Azure Queueï¼‰ï¼Œå‡½æ•°å¯ä»¥å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—ï¼Œå…¶ä»–å‡½æ•°è®¢é˜…é˜Ÿåˆ—å¹¶å¼‚æ­¥å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
Serverless å‡½æ•°æœ‰æ‰§è¡Œæ—¶é—´é™åˆ¶ï¼ˆé€šå¸¸å‡ åˆ†é’Ÿï¼‰ã€‚å¯¹äºé•¿æ—¶é—´ä»»åŠ¡ï¼Œå¯ä»¥æ‹†åˆ†ä¸ºå¤šä¸ªå‡½æ•°ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ä¸²è”ï¼Œå®ç°å¼‚æ­¥å·¥ä½œæµã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e331386641d54dcba39654527bff2305~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=flBqa0JQmqzAsS1uZQp5swOyMME%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">â‘§ å®šæ—¶ä»»åŠ¡ï¼ˆScheduled Tasksï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå®šæ—¶è§¦å‘å‡½æ•°æ‰§è¡Œã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
é€šè¿‡ Cron è¡¨è¾¾å¼å®šä¹‰æ‰§è¡Œè®¡åˆ’ï¼Œå¹³å°è‡ªåŠ¨åœ¨æŒ‡å®šæ—¶é—´è§¦å‘å‡½æ•°ã€‚ä¾‹å¦‚ï¼šæ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œæ•°æ®å¤‡ä»½ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¾ˆå¤šä¸šåŠ¡éœ€è¦å®šæœŸæ‰§è¡Œï¼ˆæŠ¥è¡¨ç”Ÿæˆã€æ•°æ®æ¸…ç†ã€å¥åº·æ£€æŸ¥ï¼‰ã€‚Serverless çš„å®šæ—¶ä»»åŠ¡æ— éœ€ç»´æŠ¤å¸¸é©»è¿›ç¨‹ï¼ŒæŒ‰æ‰§è¡Œæ¬¡æ•°è®¡è´¹ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0068a7a5e55e46a780c69aa1df78bff4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=mfFu7gF%2FRKz%2F4CK39v1%2BkYYFaGg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">â‘¨ æ—¥å¿—ä¸ç›‘æ§ï¼ˆLogging &amp; Monitoringï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå¯è§‚æµ‹æ€§æ˜¯ Serverless åº”ç”¨çš„ç”Ÿå‘½çº¿ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
äº‘å¹³å°è‡ªåŠ¨æ”¶é›†å‡½æ•°çš„æ—¥å¿—ã€æŒ‡æ ‡ï¼ˆæ‰§è¡Œæ—¶é—´ã€é”™è¯¯ç‡ã€å¹¶å‘æ•°ï¼‰å’Œé“¾è·¯è¿½è¸ªï¼Œæä¾›å¯è§†åŒ–ç›‘æ§é¢æ¿ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
Serverless å‡½æ•°æ˜¯çŸ­æš‚çš„ã€åˆ†å¸ƒå¼çš„ï¼Œä¼ ç»Ÿçš„æ—¥å¿—æ–‡ä»¶ä¸é€‚ç”¨ã€‚æ‰˜ç®¡çš„æ—¥å¿—å’Œç›‘æ§æœåŠ¡è®©ä½ èƒ½å¤Ÿå®æ—¶äº†è§£ç³»ç»Ÿå¥åº·çŠ¶å†µï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3492a18be9249f7a770e69eafe6e596~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=rW6rzdyMqPHfbqlttQKiYhDyXuE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®æˆ˜æ¨¡å¼ç¯‡ (Practical Patterns)</h2>
<p>å½“æ„å»ºçœŸå®çš„ Serverless åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›ç»è¿‡éªŒè¯çš„æ¨¡å¼æ¥åº”å¯¹æŒ‘æˆ˜ã€‚</p>
<h3 data-id="heading-12">â‘© å†·å¯åŠ¨ä¼˜åŒ–ï¼ˆCold Start Optimizationï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå‡å°‘å‡½æ•°é¦–æ¬¡å¯åŠ¨çš„å»¶è¿Ÿã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
å½“å‡½æ•°é•¿æ—¶é—´æœªæ‰§è¡Œæ—¶ï¼Œå¹³å°ä¼šå›æ”¶èµ„æºã€‚ä¸‹æ¬¡è¯·æ±‚åˆ°è¾¾æ—¶éœ€è¦é‡æ–°åˆå§‹åŒ–ï¼ˆå†·å¯åŠ¨ï¼‰ï¼Œå¯èƒ½è€—æ—¶å‡ ç§’ã€‚ä¼˜åŒ–æ–¹æ³•åŒ…æ‹¬ï¼šé¢„çƒ­ã€å‡å°ä»£ç åŒ…ã€ä½¿ç”¨è½»é‡çº§è¿è¡Œæ—¶ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å†·å¯åŠ¨æ˜¯ Serverless çš„ä¸»è¦ç—›ç‚¹ã€‚å¯¹äºå»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨ï¼ˆå¦‚ Web APIï¼‰ï¼Œå†·å¯åŠ¨ä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e5943707fc0436ab26ceef1225d4932~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=y1nt%2B2RdvGh3u7e3XIhEfQLYeyE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">â‘ª å‡½æ•°ç¼–æ’ï¼ˆFunction Orchestrationï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šåè°ƒå¤šä¸ªå‡½æ•°å®Œæˆå¤æ‚å·¥ä½œæµã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
ä½¿ç”¨ç¼–æ’æœåŠ¡ï¼ˆå¦‚ AWS Step Functionsï¼‰å®šä¹‰å‡½æ•°æ‰§è¡Œçš„é¡ºåºã€æ¡ä»¶ã€å¹¶è¡Œã€é‡è¯•ç­‰é€»è¾‘ï¼Œæ„å»ºå¯é çš„ä¸šåŠ¡æµç¨‹ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å•ä¸ªå‡½æ•°åº”è¯¥ä¿æŒç®€å•ï¼Œå¤æ‚ä¸šåŠ¡éœ€è¦å¤šä¸ªå‡½æ•°åä½œã€‚ç¼–æ’æœåŠ¡æä¾›äº†å¯è§†åŒ–çš„å·¥ä½œæµå®šä¹‰ï¼Œå¤„ç†é”™è¯¯é‡è¯•ã€çŠ¶æ€ç®¡ç†ç­‰å¤æ‚é—®é¢˜ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51d01a9219c6419f93e1ed5d6ebf61ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=7n8%2FGsX5Ll40tLic5y59lXC%2BD3s%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-14">â‘« æˆæœ¬ä¼˜åŒ–ï¼ˆCost Optimizationï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šServerless æŒ‰ä½¿ç”¨é‡è®¡è´¹ï¼Œä½†ä¹Ÿå¯èƒ½äº§ç”Ÿæ„å¤–æˆæœ¬ã€‚</p>
<ul>
<li>
<p><strong>æ€ä¹ˆåšï¼Ÿ</strong><br/>
ä¼˜åŒ–ç­–ç•¥åŒ…æ‹¬ï¼šåˆç†è®¾ç½®å†…å­˜é…ç½®ã€é¿å…æ— é™å¾ªç¯ã€ä½¿ç”¨é¢„ç•™å®¹é‡ã€ç›‘æ§å¼‚å¸¸è°ƒç”¨ã€è®¾ç½®å¹¶å‘é™åˆ¶ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
è™½ç„¶ Serverless é€šå¸¸å¾ˆä¾¿å®œï¼Œä½†å¦‚æœé…ç½®ä¸å½“ï¼ˆå¦‚å†…å­˜è¿‡å¤§ã€è¢« DDoS æ”»å‡»ï¼‰ï¼Œæˆæœ¬å¯èƒ½å¤±æ§ã€‚æˆæœ¬ä¼˜åŒ–æ˜¯ Serverless åº”ç”¨çš„å¿…ä¿®è¯¾ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0547e7239c854c13be936733ab95b2d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=x9YRWVm4X6FybtE796TYUQq9KUA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-15">æ€»ç»“</h2>
<h3 data-id="heading-16">æ ¸å¿ƒå›é¡¾</h3>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šServerless è®©å¼€å‘è€…ä»"ç®¡ç†æœåŠ¡å™¨"è§£æ”¾å‡ºæ¥ï¼Œä¸“æ³¨äº"åˆ›é€ ä»·å€¼"ã€‚</p>
<p><strong>æ ¸å¿ƒæ„ä¹‰</strong>ï¼š
æ‰€æœ‰ Serverless çš„æ¦‚å¿µï¼ˆFaaSã€äº‹ä»¶é©±åŠ¨ã€API ç½‘å…³ã€å¯¹è±¡å­˜å‚¨ã€æ‰˜ç®¡æ•°æ®åº“ã€å‡½æ•°ç¼–æ’ï¼‰éƒ½æ˜¯ä¸ºäº†å®ç°<strong>é›¶è¿ç»´ã€å¼¹æ€§æ‰©å±•ã€æŒ‰éœ€ä»˜è´¹</strong>çš„ç†æƒ³æ¶æ„ã€‚åªæœ‰æ‹¥æŠ± Serverlessï¼Œæ‰èƒ½çœŸæ­£åšåˆ°"å†™ä»£ç å°±å¤Ÿäº†"ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c074ecde35749cdb0d5dfae285e15e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765779651&amp;x-signature=OGzwH8vxKdPji%2BswGWPz3I46nLY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-17">é™„å½•ï¼šServerless å®æˆ˜æ¡ˆä¾‹</h2>
<h3 data-id="heading-18">å›¾ç‰‡å¤„ç†æœåŠ¡ï¼ˆServerless æ¶æ„ï¼‰</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    U[ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡] --&gt; S3[å¯¹è±¡å­˜å‚¨ S3]
    S3 --&gt;|è§¦å‘äº‹ä»¶| F1[ç¼©ç•¥å›¾ç”Ÿæˆå‡½æ•°]
    S3 --&gt;|è§¦å‘äº‹ä»¶| F2[æ°´å°æ·»åŠ å‡½æ•°]
    S3 --&gt;|è§¦å‘äº‹ä»¶| F3[æ ¼å¼è½¬æ¢å‡½æ•°]
    
    F1 --&gt; S3_Thumb[S3 ç¼©ç•¥å›¾ç›®å½•]
    F2 --&gt; S3_Water[S3 æ°´å°ç›®å½•]
    F3 --&gt; S3_Convert[S3 è½¬æ¢ç›®å½•]
    
    S3_Thumb --&gt; CDN[CDN åˆ†å‘]
    S3_Water --&gt; CDN
    S3_Convert --&gt; CDN
    
    F1 --&gt; DDB[DynamoDB å…ƒæ•°æ®]
    F2 --&gt; DDB
    F3 --&gt; DDB
    
    CDN --&gt; U2[ç”¨æˆ·è®¿é—®]
</code></pre>
<p><strong>æ¶æ„ç‰¹ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>é›¶è¿ç»´</strong>ï¼šæ— éœ€ç®¡ç†æœåŠ¡å™¨ï¼Œä¸Šä¼ ä»£ç å³å¯è¿è¡Œ</li>
<li><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šæ–‡ä»¶ä¸Šä¼ è‡ªåŠ¨è§¦å‘å¤„ç†å‡½æ•°</li>
<li><strong>å¼¹æ€§æ‰©å±•</strong>ï¼šå¹¶å‘ä¸Šä¼ æ—¶è‡ªåŠ¨æ‰©å±•åˆ°æ•°åƒå®ä¾‹</li>
<li><strong>æŒ‰éœ€ä»˜è´¹</strong>ï¼šåªä¸ºå®é™…æ‰§è¡Œæ—¶é—´å’Œå­˜å‚¨ç©ºé—´ä»˜è´¹</li>
<li><strong>é«˜å¯ç”¨</strong>ï¼šäº‘å¹³å°è‡ªåŠ¨å¤„ç†å®¹é”™å’Œé‡è¯•</li>
</ol>
<h3 data-id="heading-19">Serverless vs ä¼ ç»Ÿæ¶æ„å¯¹æ¯”</h3>








































<table><thead><tr><th>ç»´åº¦</th><th>ä¼ ç»Ÿæ¶æ„</th><th>Serverless æ¶æ„</th></tr></thead><tbody><tr><td><strong>è¿ç»´è´Ÿæ‹…</strong></td><td>éœ€è¦ç®¡ç†æœåŠ¡å™¨ã€é…ç½®ã€æ‰©å®¹</td><td>é›¶è¿ç»´ï¼Œå¹³å°è‡ªåŠ¨ç®¡ç†</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>æ‰‹åŠ¨æˆ–è‡ªåŠ¨æ‰©å®¹ï¼Œæœ‰ä¸Šé™</td><td>è‡ªåŠ¨æ— é™æ‰©å±•</td></tr><tr><td><strong>æˆæœ¬æ¨¡å‹</strong></td><td>æŒ‰æœåŠ¡å™¨æ—¶é—´ä»˜è´¹ï¼ˆé—²æ—¶æµªè´¹ï¼‰</td><td>æŒ‰æ‰§è¡Œæ¬¡æ•°å’Œæ—¶é•¿ä»˜è´¹</td></tr><tr><td><strong>å¯åŠ¨é€Ÿåº¦</strong></td><td>æœåŠ¡å¸¸é©»ï¼Œå“åº”å¿«</td><td>å†·å¯åŠ¨å¯èƒ½æœ‰å»¶è¿Ÿ</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>é•¿è¿æ¥ã€é«˜é¢‘è°ƒç”¨</td><td>çªå‘æµé‡ã€å®šæ—¶ä»»åŠ¡ã€äº‹ä»¶å¤„ç†</td></tr><tr><td><strong>å¼€å‘ä½“éªŒ</strong></td><td>éœ€è¦å…³æ³¨åŸºç¡€è®¾æ–½</td><td>åªå…³æ³¨ä¸šåŠ¡ä»£ç </td></tr></tbody></table>
<h3 data-id="heading-20">æœ€ä½³å®è·µå»ºè®®</h3>
<ol>
<li><strong>å‡½æ•°è®¾è®¡</strong>ï¼šä¿æŒå‡½æ•°å•ä¸€èŒè´£ï¼Œç²’åº¦é€‚ä¸­ï¼ˆä¸è¦å¤ªå¤§ä¹Ÿä¸è¦å¤ªç¢ï¼‰</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šå‡½æ•°æ— çŠ¶æ€ï¼ŒçŠ¶æ€å­˜å‚¨åˆ°æ•°æ®åº“æˆ–å¯¹è±¡å­˜å‚¨</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå®ç°é‡è¯•æœºåˆ¶å’Œæ­»ä¿¡é˜Ÿåˆ—</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šæœ€å°æƒé™åŸåˆ™ï¼Œä½¿ç”¨ IAM è§’è‰²æ§åˆ¶è®¿é—®</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šè®¾ç½®å…³é”®æŒ‡æ ‡å‘Šè­¦ï¼ˆé”™è¯¯ç‡ã€å»¶è¿Ÿã€æˆæœ¬ï¼‰</li>
<li><strong>æµ‹è¯•ç­–ç•¥</strong>ï¼šæœ¬åœ°æ¨¡æ‹Ÿç¯å¢ƒ + äº‘ç«¯é›†æˆæµ‹è¯•</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­ŒTPUæ€ç–¯äº†ï¼Œäº§èƒ½æš´æ¶¨120%ã€æ€§èƒ½4å€åŠæ‰“ï¼Œè‹±ä¼Ÿè¾¾è¿˜åå¾—ç¨³å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7581664885862252554</link>    <guid>https://juejin.cn/post/7581664885862252554</guid>    <pubDate>2025-12-09T10:31:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581664885862252554" data-draft-id="7581667332306944038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­ŒTPUæ€ç–¯äº†ï¼Œäº§èƒ½æš´æ¶¨120%ã€æ€§èƒ½4å€åŠæ‰“ï¼Œè‹±ä¼Ÿè¾¾è¿˜åå¾—ç¨³å—ï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-09T10:31:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­ŒTPUæ€ç–¯äº†ï¼Œäº§èƒ½æš´æ¶¨120%ã€æ€§èƒ½4å€åŠæ‰“ï¼Œè‹±ä¼Ÿè¾¾è¿˜åå¾—ç¨³å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T10:31:55.000Z" title="Tue Dec 09 2025 10:31:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è‹±ä¼Ÿè¾¾çš„ã€ŒæŠ¤åŸæ²³ã€æ­£åœ¨å´©å¡Œï¼Ÿè°·æ­ŒTPUå‡­ä»€ä¹ˆè®©å·¨å¤´ä»¬ç–¯ç‹‚å€’æˆˆï¼Ÿ</p>
</blockquote>
<p>è°·æ­Œè¿™æ¬¡è¦åŠ¨çœŸæ ¼äº†ã€‚</p>
<p>æ‘©æ ¹å£«ä¸¹åˆ©æœ€æ–°ç ”æŠ¥é€éœ²äº†ä¸€ä¸ªé‡ç£…æ¶ˆæ¯ï¼šè°·æ­Œ TPU çš„äº§èƒ½å³å°†è¿æ¥çˆ†ç‚¸å¼å¢é•¿ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œä¾›åº”é“¾é‚£è¾¹ä¼ æ¥ä¿¡å·ï¼ŒTPU ä¾›åº”çš„ä¸ç¡®å®šæ€§åŸºæœ¬è§£å†³äº†ï¼Œè¿™æ„å‘³ç€è°·æ­Œå¯ä»¥æ”¾å¼€æ‰‹è„šå¯¹å¤–å–èŠ¯ç‰‡äº†ã€‚</p>
<p>æ‘©æ ¹å£«ä¸¹åˆ©ç›´æ¥æŠŠé¢„æµ‹å¾€ä¸ŠçŒ›è°ƒï¼Œ2027 å¹´ TPU äº§é‡å°†è¾¾åˆ° 500 ä¸‡å—ï¼Œ2028 å¹´æ›´æ˜¯è¦å†²åˆ° 700 ä¸‡å—ã€‚è¦çŸ¥é“ï¼Œä¹‹å‰çš„é¢„æµ‹å¯æ˜¯ 300 ä¸‡å—å’Œ 320 ä¸‡å—ï¼Œè¿™æ³¢ä¸Šè°ƒå¹…åº¦åˆ†åˆ«é«˜è¾¾ 67% å’Œ 120%ã€‚æ¢å¥è¯è¯´ï¼Œæœªæ¥ä¸¤å¹´è°·æ­Œè¦ç”Ÿäº§ 1200 ä¸‡å— TPUï¼Œè€Œè¿‡å»å››å¹´åŠ èµ·æ¥æ‰ç”Ÿäº§äº† 790 ä¸‡å—ã€‚</p>
<p>è¿™ç¬”ç”Ÿæ„æœ‰å¤šèµšï¼Ÿæ‘©æ ¹å£«ä¸¹åˆ©ç»™å‡ºä¸€ä¸ªæµ‹ç®—ï¼Œè°·æ­Œæ¯å–å‡º 50 ä¸‡å— TPU èŠ¯ç‰‡ï¼Œ2027 å¹´å°±èƒ½è¿›è´¦çº¦ 130 äº¿ç¾å…ƒï¼Œæ¯è‚¡æ”¶ç›Šå¢åŠ  0.40 ç¾å…ƒã€‚</p>
<p>æˆ˜ç•¥å±‚é¢çœ‹ï¼Œè°·æ­Œçš„æ‰“æ³•ä¹Ÿå¾ˆæ˜ç¡®ï¼Œç›´æ¥å‘ç¬¬ä¸‰æ–¹æ•°æ®ä¸­å¿ƒé”€å”® TPUï¼Œä½œä¸ºè°·æ­Œäº‘å¹³å° (GCP) ä¸šåŠ¡çš„é‡è¦è¡¥å……ã€‚è™½ç„¶å¤§éƒ¨åˆ† TPU ä»ä¼šç”¨åœ¨è°·æ­Œè‡ªå®¶çš„ AI è®­ç»ƒå’Œäº‘æœåŠ¡ä¸Šï¼Œä½†å¦‚æ­¤å¤§çš„äº§èƒ½å‚¨å¤‡ï¼Œæ˜¾ç„¶æ˜¯åœ¨ä¸ºæ›´å¹¿æ³›çš„å•†ä¸šåŒ–åšå‡†å¤‡ã€‚</p>
<p>æ‘©æ ¹å£«ä¸¹åˆ©è®¤ä¸ºï¼Œè¿™äº›è¿¹è±¡éƒ½æ˜¯è°·æ­Œ TPU é”€å”®æˆ˜ç•¥çš„æ—©æœŸä¿¡å·ã€‚çœ¼ä¸‹å…¨è¡Œä¸šå¯¹å…ˆè¿› AI ç®—åŠ›éœ€æ±‚çˆ†æ£šï¼Œè°·æ­Œæ˜¾ç„¶ä¸æƒ³é”™è¿‡è¿™æ³¢çº¢åˆ©ã€‚</p>
<p>å— AI èŠ¯ç‰‡éœ€æ±‚å¼ºåŠ²çš„å½±å“ï¼Œæ‘©æ ¹å£«ä¸¹åˆ©é¡ºæ‰‹æŠŠè”å‘ç§‘è¯„çº§ä¸Šè°ƒè‡³ã€Œå¢æŒã€ï¼Œç†ç”±æ˜¯æ•´ä¸ªèŠ¯ç‰‡ä¾›åº”é“¾éƒ½åœ¨å—ç›Šã€‚</p>
<p>è‹±ä¼Ÿè¾¾åœ¨ AI èŠ¯ç‰‡å¸‚åœºä¸€å®¶ç‹¬å¤§çš„æ ¼å±€ï¼Œå¯èƒ½è¦è¿æ¥çœŸæ­£çš„æŒ‘æˆ˜è€…äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68d5f45acce14933a35fc9db856efa2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765881115&amp;x-signature=bxxCmS4usvhRBTacyznHtBF1GuM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ï¼ˆåŠ¨å›¾æ¥è‡ªåšä¸»èµ›åšè½©Albert)</p>
<p>æœ€è¿‘ï¼Œè°·æ­Œ TPU ä¸è‹±ä¼Ÿè¾¾ GPU çš„æŠ€æœ¯è¾ƒé‡æˆä¸ºä¸šå†…çƒ­è®®è¯é¢˜ã€‚æˆ‘ä»¬å…³æ³¨åˆ°ä¸€ç¯‡é¢˜ä¸ºã€Š2025 å¹´ AI æ¨ç†æˆæœ¬ï¼šè°·æ­Œ TPU ä¸ºä½•æ¯”è‹±ä¼Ÿè¾¾ GPU æ€§èƒ½é«˜å‡º 4 å€ã€‹çš„æŠ¥é“ï¼Œå…¨é¢è§£æäº†ä¸¤è€…çš„æŠ€æœ¯å·®å¼‚å’Œæ€§èƒ½å¯¹æ¯”ã€‚è‡³äºæŠ¥é“ä¸­çš„è§‚ç‚¹ï¼Œä»…ä¾›å‚è€ƒã€‚</p>
<p>ä»¥ä¸‹æ˜¯æœºå™¨ä¹‹å¿ƒç¼–è¯‘ï¼š</p>
<p>åœ¨æ¿€çƒˆçš„ AI éœ¸ä¸»ä¹‹äº‰ä¸­ï¼Œè‹±ä¼Ÿè¾¾é•¿æœŸä»¥æ¥ä¸€ç›´ç¨³åéœ¸ä¸»åœ°ä½ã€‚å…¶ GPU æ¨åŠ¨äº†æœºå™¨å­¦ä¹ çš„çˆ†ç‚¸å¼å¢é•¿ï¼Œå°†æŠ½è±¡çš„ç¥ç»ç½‘ç»œå˜ä¸ºç°å®ï¼Œå¹¶æ‰“é€ äº†ä¸€ä¸ªä»·å€¼æ•°ä¸‡äº¿ç¾å…ƒçš„å•†ä¸šå¸å›½ã€‚ä½†éšç€ AI æ ¼å±€çš„æ¼”å˜ï¼Œè‹±ä¼Ÿè¾¾çš„ã€Œç›”ç”²ã€ä¹Ÿå¼€å§‹å‡ºç°è£‚ç—•ã€‚</p>
<p>ä»æ¨¡å‹è®­ç»ƒï¼ˆè‹±ä¼Ÿè¾¾çš„å¼ºé¡¹ï¼‰åˆ°æ¨ç†ï¼ˆå³è¿™äº›æ¨¡å‹çš„å®æ—¶åº”ç”¨ï¼‰ï¼Œå¸‚åœºæ ¼å±€æ­£åœ¨å‘ç”Ÿé‡å¡‘ã€‚è€Œå¼•é¢†è¿™åœºå˜é©çš„ï¼Œæ­£æ˜¯è°·æ­Œçš„å¼ é‡å¤„ç†å•å…ƒï¼ˆTPUï¼‰ï¼Œå®ƒå¸¦æ¥çš„æ— ä¸ä¼¦æ¯”çš„æ•ˆç‡å’Œæˆæœ¬ä¼˜åŠ¿ï¼Œæˆ–è®¸å°†ç»ˆç»“è‹±ä¼Ÿè¾¾çš„å„æ–­åœ°ä½ã€‚</p>
<p>åˆ° 2030 å¹´ï¼Œæ¨ç†å°†æ¶ˆè€— 75% çš„äººå·¥æ™ºèƒ½è®¡ç®—èµ„æºï¼Œåˆ›é€ ä¸€ä¸ªè§„æ¨¡è¾¾ 2550 äº¿ç¾å…ƒçš„å¸‚åœºï¼Œå¹¶ä»¥æ¯å¹´ 19.2% çš„é€Ÿåº¦å¢é•¿ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°å…¬å¸ä»ç„¶ä»¥è®­ç»ƒæˆæœ¬ä¸ºä¼˜åŒ–ç›®æ ‡ã€‚</p>
<p>è¿™å¹¶éç‚’ä½œï¼Œè€Œæ˜¯ç»æµå› ç´ ã€‚è®­ç»ƒæ˜¯ä¸€æ¬¡æ€§çš„å†²åˆºï¼Œè€Œæ¨ç†åˆ™æ˜¯ä¸€åœºæ°¸æ— æ­¢å¢ƒçš„é©¬æ‹‰æ¾ã€‚éšç€åƒ OpenAI è¿™æ ·çš„å…¬å¸ç–²äºåº”å¯¹é£æ¶¨çš„æ¨ç†æˆæœ¬ï¼ˆé¢„è®¡ä»… 2024 å¹´å°±å°†è¾¾åˆ° 23 äº¿ç¾å…ƒï¼Œè¿œè¶…è®­ç»ƒ GPT-4 çš„ 1.5 äº¿ç¾å…ƒæˆæœ¬ï¼‰ï¼Œè°·æ­Œçš„ TPU å‡­å€Ÿå…¶é«˜æ€§ä»·æ¯”è„±é¢–è€Œå‡ºã€‚åœ¨è¿™ç¯‡æ·±åº¦åˆ†æä¸­ï¼Œä½œè€…å°†æ¢è®¨ TPU å¦‚ä½•èµ¢å¾—æ¨ç†ä¹‹æˆ˜ï¼Œå¹¶ä»¥è¡Œä¸šé¢†å¯¼è€…çš„å®é™…è¿ç§»æ¡ˆä¾‹ä¸ºä½è¯ï¼ŒåŒæ—¶è§£é‡Šä¸ºä½•è¿™ä¸€è½¬å˜é¢„ç¤ºç€è‹±ä¼Ÿè¾¾å³å°†èµ°å‘è¡°è½ã€‚</p>
<p>AI ç®—åŠ›çš„åˆ†é‡ï¼šè®­ç»ƒä¸æ¨ç†</p>
<p>è¦äº†è§£æ­£åœ¨å‘ç”Ÿçš„å·¨å¤§è½¬å˜ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»å‰–æäººå·¥æ™ºèƒ½è®¡ç®—çš„ä¸¤å¤§æ”¯æŸ±ï¼šè®­ç»ƒå’Œæ¨ç†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95a71fe952d042cf81a8e3e728f02966~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765881115&amp;x-signature=c5BinNQ2wUnT%2BxVsEbmLLFgXqk8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è®­ç»ƒï¼šè‹±ä¼Ÿè¾¾çš„å·…å³°ä¹‹ä½œ</p>
<p>è®­ç»ƒæ˜¯å°†æµ·é‡æ•°æ®é›†è¾“å…¥ç¥ç»ç½‘ç»œï¼Œä»¥ã€Œæ•™ä¼šã€å®ƒä»¬æ¨¡å¼ã€é¢„æµ‹å’Œè¡Œä¸ºçš„å¯†é›†å‹è¿‡ç¨‹ã€‚å®ƒéœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºï¼Œéœ€è¦æ•°åƒä¸ª GPU è¿›è¡Œå¹¶è¡Œå¤„ç†ï¼Œä»¥å®ŒæˆçŸ©é˜µä¹˜æ³•å’Œåå‘ä¼ æ’­ç­‰è¿ç®—ã€‚è‹±ä¼Ÿè¾¾æ­£æ˜¯å‡­å€Ÿæ­¤å»ºç«‹äº†è‡ªå·±çš„å¸å›½ã€‚å…¶ CUDA è½¯ä»¶ç”Ÿæ€ç³»ç»Ÿå’Œ Hopper æ¶æ„ï¼ˆä¾‹å¦‚ H100 GPUï¼‰åœ¨å¤„ç†è¿™ç§é«˜å¼ºåº¦è®¡ç®—ä»»åŠ¡æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä»è€Œå®ç°äº† GPT-4 å’Œç¨³å®šæ‰©æ•£ç­‰çªç ´æ€§æˆæœã€‚</p>
<p>ä½†è®­ç»ƒæ˜¯æœ‰é™çš„ï¼Œä¸€æ—¦æ¨¡å‹è¢«è®­ç»ƒå®Œæˆï¼Œç¹é‡çš„å·¥ä½œå°±åœæ­¢äº†ã€‚æˆæœ¬æ˜¯å‰ç½®çš„ï¼šå•æ¬¡è¿è¡Œå¯èƒ½æ¶ˆè€—æ•°ç™¾ä¸‡ GPU å°æ—¶ï¼Œä½†å®ƒæ˜¯æœ‰é™çš„ã€‚å¯¹äº GPT-4 æ¥è¯´ï¼Œè¿™ç¬”ä¸€æ¬¡æ€§è´¦å•è¾¾åˆ°äº† 1.5 äº¿ç¾å…ƒã€‚è‹±ä¼Ÿè¾¾çš„ GPU å‡­å€Ÿå…¶åœ¨å›¾å½¢ã€æ¨¡æ‹Ÿå’Œé€šç”¨è®¡ç®—æ–¹é¢çš„å¤šåŠŸèƒ½æ€§ï¼Œæˆä¸ºè¿™ä¸€é˜¶æ®µçš„é¦–é€‰ã€‚åˆ° 2023 å¹´ï¼Œè‹±ä¼Ÿè¾¾æ§åˆ¶äº†è¶…è¿‡ 80% çš„ AI èŠ¯ç‰‡å¸‚åœºï¼Œä»…æ•°æ®ä¸­å¿ƒé”€å”®å°±å¸¦æ¥ 600 äº¿ç¾å…ƒçš„æ”¶å…¥ã€‚</p>
<p>æ¨ç†ï¼šæ°¸æ— æ­¢å¢ƒçš„é’±å‘</p>
<p>æ¨ç†åˆ™å®Œå…¨ä¸åŒã€‚è¿™æ˜¯éƒ¨ç½²é˜¶æ®µï¼šæ¯æ¬¡ ChatGPT æŸ¥è¯¢ã€å›¾åƒç”Ÿæˆæˆ–æ¨èç®—æ³•éƒ½ä¼šåœ¨æ–°æ•°æ®ä¸Šè¿è¡Œå·²è®­ç»ƒçš„æ¨¡å‹ã€‚ä¸è®­ç»ƒä¸åŒï¼Œæ¨ç†æ˜¯æŒç»­è¿›è¡Œçš„ï¼šå¤„ç†çš„æ¯ä¸€ä¸ª tokenã€æ¯ä¸€æ¬¡ç”¨æˆ·äº¤äº’ã€æ¯ä¸€ç§’çš„æ“ä½œéƒ½ä¼šäº§ç”Ÿæˆæœ¬ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæ®‹é…·çš„æ•°å­¦è®¡ç®—å°†æ­ç¤ºçœŸç›¸ã€‚æ¨ç†éœ€æ±‚å¹¶éä¸€æ¬¡æ€§çš„ï¼Œè€Œæ˜¯éšç€ä½¿ç”¨é‡çš„å¢é•¿è€Œå‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚OpenAI 2024 å¹´çš„æ¨ç†æ”¯å‡ºé£™å‡è‡³ 23 äº¿ç¾å…ƒï¼Œæ˜¯ GPT-4 è®­ç»ƒæˆæœ¬çš„ 15 å€ã€‚åœ¨å…¨çƒèŒƒå›´å†…ï¼Œéšç€ AI é›†æˆåˆ°ä»è‡ªåŠ¨é©¾é©¶æ±½è½¦åˆ°ä¸ªæ€§åŒ–å¹¿å‘Šç­‰å„ç§åº”ç”¨ä¸­ï¼Œæœºå™¨å­¦ä¹ æ¨ç†æˆæœ¬æ­£åœ¨çˆ†ç‚¸å¼å¢é•¿ã€‚åˆ†æå¸ˆä¼°è®¡ï¼Œåˆ° 2026 å¹´ï¼Œæ¨ç†éœ€æ±‚å°†æ¯”è®­ç»ƒéœ€æ±‚é«˜å‡º 118 å€ã€‚åˆ° 2030 å¹´ï¼Œæ¨ç†è®¡ç®—å¯èƒ½å äººå·¥æ™ºèƒ½æ€»è®¡ç®—é‡çš„ 75%ï¼Œä»è€Œæ¨åŠ¨ 7 ä¸‡äº¿ç¾å…ƒçš„åŸºç¡€è®¾æ–½æŠ•èµ„ã€‚</p>
<p>è‹±ä¼Ÿè¾¾çš„ GPU è™½ç„¶é’ˆå¯¹è®­ç»ƒçš„é«˜ååé‡å¹¶è¡Œæ€§è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†åœ¨è¿™é‡Œè¡¨ç°ä¸ä½³ã€‚å®ƒä»¬ä¼šæ¶ˆè€—å¤§é‡çš„ç”µåŠ›å’Œå†…å­˜æ¥å¤„ç†æŒç»­çš„æŸ¥è¯¢ï¼Œå¯¼è‡´æ•ˆç‡ä½ä¸‹ã€‚è¿›å…¥æ¨ç†æ—¶ä»£ï¼šåœ¨æœªæ¥ï¼Œæ¯æ¬¡æŸ¥è¯¢çš„æˆæœ¬è‡³å…³é‡è¦ã€‚</p>
<p>è°·æ­Œçš„ TPUï¼šä¸“ä¸ºæ¨ç†æ—¶ä»£è€Œè®¾è®¡</p>
<p>è°·æ­Œå¹¶éå¶ç„¶å‘ç°äº† TPUã€‚å®ƒä¸ºè‡ªèº«åºå¤§çš„ç½‘ç»œå¸å›½ç²¾å¿ƒæ‰“é€ äº† TPUï¼Œä¸ºæœç´¢ã€YouTube æ¨èå’Œå…¨çƒè§„æ¨¡çš„ç¿»è¯‘æœåŠ¡æä¾›å¼ºå¤§æ”¯æŒã€‚TPU äº 2016 å¹´æ¨å‡ºï¼Œæ˜¯ä¸€ç§ä¸“ç”¨é›†æˆç”µè·¯ï¼ˆASICï¼‰ï¼Œä¸“ä¸ºå¼ é‡è¿ç®—è€Œè®¾è®¡ï¼Œè€Œå¼ é‡è¿ç®—æ­£æ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒæ•°å­¦è¿ç®—ã€‚</p>
<p>æ¶æ„ä¼˜åŠ¿ï¼šä¸ºä»€ä¹ˆ TPU èƒ½ç¢¾å‹æ¨ç†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81339f62ed4c461f99d8ac4767c80b88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765881115&amp;x-signature=xHKkQzdjB4eGwVdPmUzC2LSrUXc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>TPU åœ¨æµå¼é˜µåˆ—ä¸­è¡¨ç°å‡ºè‰²ï¼Œè¿™ç§ç¡¬ä»¶ç½‘æ ¼èƒ½å¤Ÿé«˜æ•ˆåœ°ä¼ è¾“æ•°æ®ï¼Œæ— éœ€é¢‘ç¹çš„å†…å­˜è¯»å–ï¼Œä»è€Œå¤§å¹…é™ä½å»¶è¿Ÿå’Œèƒ½è€—ã€‚è€Œè‹±ä¼Ÿè¾¾ GPU åˆ™å¦‚åŒåŠŸèƒ½å¼ºå¤§çš„ç‘å£«å†›åˆ€ï¼Œèƒ½å¤Ÿå³æ—¶è§£ç æŒ‡ä»¤ï¼Œä½†è¿™ä¼šå¢åŠ é¢å¤–çš„å¼€é”€ã€‚å¯¹äºæ¨ç†ä»»åŠ¡è€Œè¨€ï¼Œè¿™æ„å‘³ç€åœ¨ LLM ç­‰å·¥ä½œè´Ÿè½½ä¸‹ï¼ŒTPU çš„æ€§ä»·æ¯”æ˜¯è‹±ä¼Ÿè¾¾ H100 çš„å››å€ã€‚è°·æ­Œæœ€æ–°çš„ Ironwood (v7) TPU çš„é€Ÿåº¦æ˜¯ v6 çš„å››å€ï¼Œå³°å€¼è®¡ç®—èƒ½åŠ›æ˜¯ v5p çš„åå€ï¼Œæ¯ä¸€ä»£äº§å“éƒ½èƒ½å¸¦æ¥ 2-3 å€çš„æ€§ä»·æ¯”æå‡ã€‚</p>
<p>èƒ½æ•ˆæ˜¯å¦ä¸€é¡¹æ€æ‰‹çº§ä¼˜åŠ¿ã€‚TPU é‡‡ç”¨å‚ç›´ä¾›ç”µè®¾è®¡ï¼Œåœ¨æ‰§è¡Œæœç´¢æŸ¥è¯¢æ—¶æ¯” GPU èŠ‚èƒ½ 60-65%ã€‚åœ¨ MLPerf åŸºå‡†æµ‹è¯•ä¸­ï¼ŒTPU v5e åœ¨ 9 ä¸ªæ¨ç†ç±»åˆ«ä¸­çš„ 8 ä¸ªç±»åˆ«ä¸­é¢†å…ˆï¼Œä¾‹å¦‚ BERT æœåŠ¡ç­‰ä»»åŠ¡çš„å®Œæˆé€Ÿåº¦æ¯” A100 GPU å¿« 2.8 å€ã€‚</p>
<p>ä»·æ ¼æ˜¯å†³å®šæ€§å› ç´ ï¼ŒæŒ‰éœ€ä½¿ç”¨çš„ TPU v6e èµ·ä»·ä¸ºæ¯å°æ—¶ 1.375 ç¾å…ƒï¼Œç­¾è®¢é•¿æœŸåˆçº¦åå¯é™è‡³æ¯å°æ—¶ 0.55 ç¾å…ƒï¼Œå¹¶ä¸”æ— éœ€æ”¯ä»˜è‹±ä¼Ÿè¾¾çš„æˆæƒè´¹ã€‚ç”¨æˆ·åé¦ˆï¼Œä¸€ä¸ª v5e æ‰©å±•èˆ±ç›¸æ¯”å…«ä¸ª H100 æ‰©å±•èˆ±ï¼Œã€Œä»·æ ¼æ›´ä½ã€ï¼Œæ€§ä»·æ¯”æ›´é«˜ã€‚</p>
<p>2025 å¹´ AI èŠ¯ç‰‡å¯¹æ¯”ï¼šTPU ä¸ GPU æ­£é¢äº¤é”‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15f769b96748433f8e8452a600f304d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765881115&amp;x-signature=wQ41QFhDZzAKJDUc%2F07UDvT98aw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è‹±ä¼Ÿè¾¾ä¼˜åŠ¿é€æ¸æ¶ˆå¤±</p>
<p>åœ¨çº¯ç²¹çš„æ¨ç†é¢†åŸŸï¼Œè‹±ä¼Ÿè¾¾çš„ä¼˜åŠ¿ï¼ˆçµæ´»æ€§ï¼‰åè€Œæˆäº†åŠ£åŠ¿ã€‚GPU è™½ç„¶èƒ½å¤„ç†å„ç§ä»»åŠ¡ï¼Œä½†åœ¨é AI æ“ä½œä¸Šå´ä¼šæµªè´¹å¤§é‡èµ„æºã€‚éšç€æ¨ç†é€æ¸å æ®ä¸»å¯¼åœ°ä½ï¼Œåƒ TPU è¿™æ ·çš„ä¸“ç”¨ ASIC èŠ¯ç‰‡æ­£åœ¨å‰Šå¼±è‹±ä¼Ÿè¾¾çš„è¿™ä¸€ä¼˜åŠ¿ã€‚è°·æ­Œäº‘çš„é«˜ç®¡ä»¬é¢„è®¡ï¼Œä»… TPU çš„é‡‡ç”¨å°±èƒ½å åˆ°è‹±ä¼Ÿè¾¾ 10% çš„æ”¶å…¥ã€‚è‹±ä¼Ÿè¾¾çš„æ¯›åˆ©ç‡é«˜è¾¾ 70-80%ï¼Œæ¥è‡ªé«˜æ•ˆç«äº‰å¯¹æ‰‹çš„ä»·æ ¼å‹åŠ›å¯èƒ½ä¼šæŒ¤å‹å…¶åˆ©æ¶¦ç©ºé—´ã€‚</p>
<p>ASIC ä¸ GPU çš„ AI ä¹‹äº‰ï¼šä¸ºä»€ä¹ˆä¸“ç”¨èŠ¯ç‰‡ä¸»å¯¼æ·±åº¦å­¦ä¹ æ¨ç†ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eff60740299b48328a609bfccaa7d688~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765881115&amp;x-signature=YT6vQJJ2Jrar%2FKRFI9cP6JNZ1S8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¦ç†è§£ä¸ºä»€ä¹ˆ TPU æ­£åœ¨ç“¦è§£è‹±ä¼Ÿè¾¾çš„éœ¸ä¸»åœ°ä½ï¼Œæˆ‘ä»¬éœ€è¦æŒæ¡ ASICï¼ˆä¸“ç”¨é›†æˆç”µè·¯ï¼‰å’Œ GPUï¼ˆå›¾å½¢å¤„ç†å™¨ï¼‰ä¹‹é—´æ ¹æœ¬çš„æ¶æ„å·®å¼‚ã€‚è¿™ä¸ä»…ä»…æ˜¯æŠ€æœ¯ç»†èŠ‚çš„é—®é¢˜ï¼Œè€Œæ˜¯å†³å®šæ•°åäº¿ç¾å…ƒè®¡ç®—æ”¯å‡ºæˆè´¥çš„å…³é”®æ‰€åœ¨ã€‚</p>
<p>ä»€ä¹ˆæ˜¯ ASIC èŠ¯ç‰‡ï¼Ÿå®ƒä¸ GPU æœ‰ä½•ä¸åŒï¼Ÿ</p>
<p>GPU æ˜¯é€šç”¨å‹å¤„ç†å™¨ã€‚ æœ€åˆè®¾è®¡ç”¨äºå›¾å½¢æ¸²æŸ“ï¼ˆå› æ­¤å¾—åã€Œå›¾å½¢å¤„ç†å•å…ƒã€ï¼‰ï¼Œè‹±ä¼Ÿè¾¾åˆ©ç”¨å…¶å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œå°†å…¶é‡æ–°åº”ç”¨äºäººå·¥æ™ºèƒ½é¢†åŸŸã€‚åƒ H100 è¿™æ ·çš„ GPU åŒ…å«æ•°åƒä¸ª CUDA æ ¸å¿ƒï¼Œå¯ä»¥å¤„ç†å„ç§å·¥ä½œè´Ÿè½½ï¼šæ¸¸æˆã€è§†é¢‘ç¼–ç ã€ç§‘å­¦æ¨¡æ‹Ÿã€åŠ å¯†è´§å¸æŒ–çŸ¿ï¼Œå½“ç„¶è¿˜æœ‰ç¥ç»ç½‘ç»œã€‚è¿™ç§å¤šåŠŸèƒ½æ€§ä½¿ GPU æˆä¸ºäººå·¥æ™ºèƒ½æ—©æœŸæ—¶ä»£çš„ç‘å£«å†›åˆ€ã€‚</p>
<p>ä¸“ç”¨é›†æˆç”µè·¯ï¼ˆASICï¼‰æ˜¯ä¸“ä¸šèŠ¯ç‰‡ã€‚å®ƒä»¬ä»ä¸€å¼€å§‹å°±ä¸ºå•ä¸€ç”¨é€”è€Œè®¾è®¡ï¼Œ ç‰ºç‰²çµæ´»æ€§ä»¥æ¢å–æé«˜çš„æ•ˆç‡ã€‚è°·æ­Œçš„ TPU ä¸“ä¸ºçŸ©é˜µä¹˜æ³•å’Œå¼ é‡è¿ç®—è€Œç¡¬ç¼–ç ï¼Œè¿™æ˜¯ç¥ç»ç½‘ç»œçš„æ•°å­¦åŸºç¡€ã€‚æ¯ä¸ªæ™¶ä½“ç®¡ã€æ¯æ¡ç”µæºè½¨ã€æ¯æ¡æ•°æ®é€šè·¯éƒ½é’ˆå¯¹ä¸€ä¸ªç›®æ ‡è¿›è¡Œä¼˜åŒ–ï¼Œä»¥é—ªç”µèˆ¬çš„é€Ÿåº¦å’Œæœ€å°çš„èƒ½é‡æŸè€—å®Œæˆå¼ é‡è¿ç®—ã€‚</p>
<p>ä¸å¦¨è¿™æ ·ç†è§£ï¼ŒGPU å°±åƒä¸€ä½å¤šæ‰å¤šè‰ºçš„è¿åŠ¨å‘˜ï¼Œç²¾é€šå¤šé¡¹è¿åŠ¨ï¼›è€Œ ASIC åˆ™åƒä¸€ä½å¥¥è¿çŸ­è·‘è¿åŠ¨å‘˜ï¼Œåœ¨æŸä¸€æ–¹é¢æŠ€é«˜ä¸€ç­¹ã€‚å¯¹äºéœ€è¦ 24âœ–ï¸7âœ–ï¸365 å…¨å¤©å€™è¿è¡Œçš„æ¨ç†å·¥ä½œè´Ÿè½½ï¼Œä½ éœ€è¦çš„æ˜¯è¿™ä½çŸ­è·‘è¿åŠ¨å‘˜ã€‚</p>
<p>ASIC ä¼˜åŠ¿ï¼šä¸ºä»€ä¹ˆä¸“ä¸šåŒ–èƒ½å¤Ÿè§„æ¨¡åŒ–åˆ¶èƒœ?</p>
<p>èƒ½æ•ˆæ–¹é¢ï¼š ASIC èŠ¯ç‰‡æ¶ˆé™¤äº†æŒ‡ä»¤è§£ç çš„å¼€é”€ã€‚GPU åŠ¨æ€åœ°è·å–ã€è§£ç å’Œæ‰§è¡ŒæŒ‡ä»¤ï¼Œæ¶ˆè€—å¤§é‡å‘¨æœŸå’Œç”µåŠ›ã€‚TPU åˆ™åœ¨ç¡¬ä»¶ä¸­æ‰§è¡Œå›ºå®šæ“ä½œï¼Œåœ¨ç›¸åŒå·¥ä½œè´Ÿè½½ä¸‹èƒ½è€—é™ä½ 60-65%ã€‚åœ¨æ•°æ®ä¸­å¿ƒè§„æ¨¡ä¸‹ï¼Œè¿™æ„å‘³ç€èŠ‚çœæ•°ç™¾ä¸‡ç¾å…ƒçš„ç”µåŠ›æˆæœ¬å¹¶å‡å°‘å†·å´åŸºç¡€è®¾æ–½ã€‚</p>
<p>é™ä½å»¶è¿Ÿï¼š TPU ä¸­çš„è„‰åŠ¨é˜µåˆ—å¯åˆ›å»ºç¡®å®šæ€§çš„æ•°æ®æµï¼Œä¿¡æ¯åœ¨èŠ¯ç‰‡å†…åŒæ­¥æµåŠ¨ï¼Œå¦‚åŒç²¾å¿ƒç¼–æ’çš„è£…é…çº¿ï¼Œè€Œ GPU ä¾èµ–äºå…·æœ‰ä¸å¯é¢„æµ‹è®¿é—®æ¨¡å¼çš„å†…å­˜å±‚æ¬¡ç»“æ„ï¼ˆL1/L2 ç¼“å­˜ã€HBMï¼‰ï¼Œä»è€Œå¼•å…¥å»¶è¿Ÿå³°å€¼ã€‚å¯¹äºå®æ—¶æ¨ç†ï¼ˆèŠå¤©æœºå™¨äººã€è‡ªåŠ¨é©¾é©¶æ±½è½¦ã€é‡‘èäº¤æ˜“ï¼‰è€Œè¨€ï¼Œæ¯«ç§’çº§çš„å»¶è¿Ÿè‡³å…³é‡è¦ã€‚</p>
<p>æ¯æ¬¡æ“ä½œæˆæœ¬ï¼š ASIC é€šè¿‡å»é™¤æœªä½¿ç”¨çš„ç”µè·¯ï¼Œä»¥æ›´å°‘çš„æŠ•å…¥æä¾›æ›´é«˜çš„è®¡ç®—èƒ½åŠ›ã€‚åœ¨ Transformer å‹å·ä¸Šï¼ŒTPU çš„æ¯ç¾å…ƒæ€§èƒ½æ˜¯ H100 çš„å››å€ï¼Œå› ä¸ºæ¯ä¸€å¹³æ–¹æ¯«ç±³çš„ç¡…ç‰‡éƒ½ç‰©å°½å…¶ç”¨ã€‚GPU åˆ™æ‰¿è½½ç€è¯¸å¤šå†—ä½™ï¼šçº¹ç†å•å…ƒã€å…‰æ …åŒ–æ“ä½œã€æ˜¾ç¤ºæ§åˆ¶å™¨ç­‰ç­‰ï¼Œæ‰€æœ‰è¿™äº›åœ¨ AI æ¨ç†æœŸé—´éƒ½å¤„äºé—²ç½®çŠ¶æ€ã€‚</p>
<p>å¯æ‰©å±•æ€§ï¼š ASIC å¯ä»¥ç´§å¯†é›†æˆåˆ°å®šåˆ¶ç³»ç»Ÿä¸­ã€‚è°·æ­Œçš„ TPU pod é€šè¿‡å®šåˆ¶äº’è¿è¿æ¥ 4096 ä¸ªèŠ¯ç‰‡ï¼Œå®ç°äº† PCIe å—é™ GPU æ— æ³•å®ç°çš„è¿‘ä¹çº¿æ€§çš„æ‰©å±•ã€‚è¿™ç§æ¶æ„ä¸Šçš„è‡ªç”±åº¦ä½¿è¶…å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒèƒ½å¤Ÿæ„å»ºå®Œå…¨ç¬¦åˆè‡ªèº«éœ€æ±‚çš„æ¨ç†é›†ç¾¤ã€‚</p>
<p>æƒè¡¡å–èˆï¼šçµæ´»æ€§ä¸æ•ˆç‡</p>
<p>ASIC èŠ¯ç‰‡å¹¶éä¸‡èƒ½ï¼Œå®ƒä»¬çš„ä¸“ç”¨æ€§ä¹Ÿæ˜¯å®ƒä»¬çš„å±€é™æ€§ã€‚è®­ç»ƒæ–°çš„æ¨¡å‹æ¶æ„ã€å°è¯•æ–°çš„å±‚æˆ–è¿è¡Œé AI å·¥ä½œè´Ÿè½½éƒ½éœ€è¦ GPU çš„çµæ´»æ€§ã€‚å› æ­¤ï¼Œæœªæ¥å¹¶éã€ŒASIC vs GPUã€ä¹‹äº‰ï¼Œè€Œæ˜¯æˆ˜ç•¥éƒ¨ç½²ï¼šGPU ç”¨äºç ”ç©¶å’Œè®­ç»ƒï¼ŒASIC ç”¨äºç”Ÿäº§æ¨ç†ã€‚</p>
<p>æ–°å…´çš„ ASIC èŠ¯ç‰‡æ ¼å±€ï¼š é™¤äº† TPU ä¹‹å¤–ï¼Œäºšé©¬é€Šçš„ Trainiumã€å¾®è½¯çš„ Maia ä»¥åŠ Cerebras å’Œ Groq ç­‰åˆåˆ›å…¬å¸æ­£ä»¥å„ç§ä¸“ç”¨èŠ¯ç‰‡æ¶Œå…¥å¸‚åœºã€‚æ¯æ¬¾èŠ¯ç‰‡éƒ½é’ˆå¯¹ç‰¹å®šçš„ç»†åˆ†é¢†åŸŸï¼ˆLLM æ¨ç†ã€è®­ç»ƒã€ç¨€ç–æ¨¡å‹ï¼‰ï¼Œä»è€Œæ‰“ç ´äº†æ›¾ç»ç”±è‹±ä¼Ÿè¾¾ç»Ÿä¸€çš„ CUDA ç‹å›½ã€‚</p>
<p>ç»“è®ºæ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºä»¥æ¨ç†ä¸ºä¸»å¯¼çš„æœªæ¥ï¼ˆåˆ° 2030 å¹´å°†å è®¡ç®—æ€»é‡çš„ 75%ï¼‰ï¼ŒASIC èŠ¯ç‰‡ä¸ä»…å…·æœ‰ç«äº‰åŠ›ï¼Œè€Œä¸”åŠ¿åœ¨å¿…è¡Œã€‚ç‰©ç†å®šå¾‹å†³å®šäº†è¿™ä¸€ç‚¹ï¼šå¤§è§„æ¨¡ä¸“ä¸šåŒ–æ˜¯æ— æ³•è¶…è¶Šçš„ã€‚è‹±ä¼Ÿè¾¾æ·±è°™æ­¤é“ï¼Œå› æ­¤å¤§åŠ›æ¨è¿›åƒ Blackwell è¿™æ ·é’ˆå¯¹æ¨ç†ä¼˜åŒ–çš„æ¶æ„ï¼Œä½†ä»–ä»¬è¯•å›¾è®©ä¸€æŠŠç‘å£«å†›åˆ€æ¯”æ‰‹æœ¯åˆ€æ›´é”‹åˆ©ã€‚</p>
<p>ç°å®ä¸–ç•Œçš„èƒœåˆ©ï¼šAI å·¨å¤´æŠ¼æ³¨ TPU</p>
<p>è¿ç§»æ¡ˆä¾‹å°±æ˜¯æœ€å¥½çš„è¯æ˜ã€‚å…¨çƒé¡¶å°–çš„äººå·¥æ™ºèƒ½è¿è¥å•†æ­£åœ¨æ”¾å¼ƒè‹±ä¼Ÿè¾¾å¤„ç†å™¨ï¼Œè½¬è€Œä½¿ç”¨ TPUï¼Œä»è€Œå¤§å¹…é™ä½æˆæœ¬ï¼Œå¹¶ä»¥å‰æ‰€æœªæœ‰çš„æ–¹å¼æ‰©å±•æ¨ç†èƒ½åŠ›ã€‚</p>
<p>Midjourney çš„ 65% æˆæœ¬å‰Šå‡</p>
<p>å›¾åƒç”Ÿæˆå™¨ Midjourney æ›¾æ˜¯ GPU çš„ä¸»åŠ›å†›ï¼Œä½†åœ¨ 2024 å¹´è½¬å‘ TPU åï¼Œä¾¿å†ä¹Ÿæ²¡æœ‰å›å¤´ã€‚æ¨ç†æˆæœ¬éª¤é™ 65%ï¼Œä»æ¯æœˆ 200 ä¸‡ç¾å…ƒé™è‡³ 70 ä¸‡ç¾å…ƒã€‚æ ¹æ® Cohere çš„ç±»ä¼¼åŸºå‡†æµ‹è¯•ï¼Œä½¿ç”¨ TPU v6e åï¼Œç”Ÿæˆä»»åŠ¡çš„ååé‡æå‡äº† 3 å€ã€‚ã€ŒTPU åœ¨æ¨ç†å·¥ä½œè´Ÿè½½æ–¹é¢çš„ç»æµæ•ˆç›Šã€è¢«è¯æ˜å…·æœ‰å˜é©æ€§æ„ä¹‰ï¼Œé‡Šæ”¾äº†ç ”å‘èµ„é‡‘ã€‚</p>
<p>Anthropic çš„ç™¾ä¸‡ TPU ç™»æœˆè®¡åˆ’</p>
<p>Claude çš„å¼€å‘å•† Anthropic å…¬å¸ä¸è°·æ­Œè¾¾æˆäº†ä¸€é¡¹ä»·å€¼æ•°ç™¾äº¿ç¾å…ƒçš„äº¤æ˜“ï¼Œæ‰¿è¯ºæä¾›å¤šè¾¾ä¸€ç™¾ä¸‡ä¸ª TPUã€‚åˆ° 2026 å¹´ï¼Œè¿™å°†é‡Šæ”¾è¶…è¿‡ 1GW çš„è®¡ç®—å®¹é‡ï¼Œå¹¶å°† TPU ä¸äºšé©¬é€Š Trainium å’Œè‹±ä¼Ÿè¾¾çš„ç›¸ç»“åˆï¼Œæ„å»ºå¤šå…ƒåŒ–çš„æŠ€æœ¯æ ˆã€‚é¦–å¸­æ‰§è¡Œå®˜ Thomas Kurian è¡¨ç¤ºï¼Œã€Œå“è¶Šçš„æ€§ä»·æ¯”å’Œæ•ˆç‡ã€æ˜¯ä¿ƒæˆæ­¤æ¬¡äº¤æ˜“çš„å…³é”®å› ç´ ã€‚è‡ª 2023 å¹´ä»¥æ¥ï¼ŒTPU ä¸€ç›´ä¸º Claude æä¾›è®¡ç®—åŠ¨åŠ›ã€‚</p>
<p>Meta çš„æ•°åäº¿ç¾å…ƒè½¬å‘</p>
<p>Meta æ˜¯è‹±ä¼Ÿè¾¾æœ€å¤§çš„å®¢æˆ·ï¼ˆè®¡åˆ’ 2025 å¹´æ”¯å‡º 720 äº¿ç¾å…ƒï¼‰ï¼Œç›®å‰æ­£å°±ä¸€é¡¹ä»·å€¼æ•°åäº¿ç¾å…ƒçš„ TPU éƒ¨ç½²è¿›è¡Œæ·±å…¥æ´½è°ˆã€‚Meta è®¡åˆ’ä» 2026 å¹´é€šè¿‡è°·æ­Œäº‘ç§Ÿèµ TPU å¼€å§‹ï¼Œå¹¶è®¡åˆ’åœ¨ 2027 å¹´ä¹‹å‰éƒ¨ç½²æœ¬åœ° TPUï¼Œç”¨äº Llama å¾®è°ƒç­‰éœ€è¦å¤§é‡å¼ é‡çš„å·¥ä½œè´Ÿè½½ã€‚è¿™ç§æ··åˆç­–ç•¥ï¼ˆè‹±ä¼Ÿè¾¾æä¾›çµæ´»æ€§ï¼ŒTPU æä¾›æ•ˆç‡ï¼‰é¢„ç¤ºç€æ›´å¹¿æ³›çš„èµ„æºè¿ç§»è¶‹åŠ¿ã€‚</p>
<p>è¿™äº›å¹¶éä¸ªä¾‹ã€‚Salesforce å’Œ Cohere éƒ½å®ç°äº† 3 å€çš„å¢é•¿ï¼Œè°·æ­Œçš„ Gemini è¿è¡Œåœ¨æ•°ä¸‡ä¸ª TPU ä¸Šã€‚é‚£äº›ç²¾æ˜çš„è¿è¥å•†çº·çº·æŠ›å”®è‹±ä¼Ÿè¾¾çš„æº¢ä»·äº§å“ï¼Œè½¬è€Œé€‰æ‹©è°·æ­Œçš„æ€§ä»·æ¯”æ›´é«˜çš„äº§å“ã€‚</p>
<p>ä½•æ—¶é€‰æ‹© TPU ä¸è‹±ä¼Ÿè¾¾æ˜¾å¡ï¼šAI åŸºç¡€è®¾æ–½çš„å†³ç­–çŸ©é˜µ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1b962416e254a5b9d399c7c05e8c2de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765881115&amp;x-signature=JfxEKU4P46hfhQWsZanvU1UtVlU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€‰æ‹© TPU è¿˜æ˜¯è‹±ä¼Ÿè¾¾ GPU å¹¶ééæ­¤å³å½¼ã€‚è¿™å–å†³äºæ‚¨çš„å·¥ä½œè´Ÿè½½ã€è§„æ¨¡å’ŒåŸºç¡€æ¶æ„ç­–ç•¥ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäºå®é™…éƒ¨ç½²çš„å®ç”¨æ¡†æ¶ï¼š</p>
<p>å¦‚æœæ‚¨ç¬¦åˆä»¥ä¸‹æ¡ä»¶ï¼Œè¯·é€‰æ‹© TPUï¼š</p>
<p>æˆæœ¬é˜ˆå€¼ï¼š æ¨ç†æˆæœ¬è¶…è¿‡æ¯æœˆ 5 ä¸‡ç¾å…ƒã€‚åœ¨æ­¤è§„æ¨¡ä¸‹ï¼ŒTPU èŠ‚çœçš„æˆæœ¬ï¼ˆ40-65%ï¼‰è¶³ä»¥æŠµæ¶ˆè¿ç§»å¸¦æ¥çš„é¢å¤–å¼€é”€ã€‚</p>
<p>å·¥ä½œè´Ÿè½½é€‚ç”¨æ€§ï¼š å¤§è§„æ¨¡è¿è¡Œ LLM æœåŠ¡ã€æ¨èç³»ç»Ÿã€å›¾åƒç”Ÿæˆæˆ–è§†é¢‘å¤„ç†ã€‚è¿™äº›å¼ é‡å¯†é›†å‹æ“ä½œæ­£æ˜¯ TPU çš„ä¼˜åŠ¿æ‰€åœ¨ã€‚</p>
<p>äº‘å¹³å°éƒ¨ç½²ï¼š ç†Ÿæ‚‰ Google Cloud ç”Ÿæ€ç³»ç»Ÿæˆ–æ„¿æ„é‡‡ç”¨ TensorFlow/JAX æ¡†æ¶ã€‚</p>
<p>å¯æŒç»­å‘å±•ç›®æ ‡ï¼š ç¯å¢ƒå’Œèƒ½æºæ•ˆç‡æ˜¯é‡ä¸­ä¹‹é‡ã€‚TPU çš„åŠŸè€—æ¯”åŒç­‰ GPU é…ç½®ä½ 60-65%ï¼Œè¿™å¯¹å®ç° ESG ç›®æ ‡è‡³å…³é‡è¦ã€‚</p>
<p>å¯é¢„æµ‹çš„æ‰©å±•ï¼šÂ å…·æœ‰ä¸€è‡´æµé‡æ¨¡å¼çš„å¤§å®¹é‡ç”Ÿäº§æ¨ç†ï¼Œè€Œä¸æ˜¯å®éªŒæ€§ç ”ç©¶ã€‚</p>
<p>å¦‚æœæ‚¨éœ€è¦ä»¥ä¸‹åŠŸèƒ½ï¼Œè¯·é€‰æ‹©è‹±ä¼Ÿè¾¾æ˜¾å¡ï¼š</p>
<p>è®­ç»ƒçµæ´»æ€§ï¼š æ„å»ºè‡ªå®šä¹‰æ¶æ„ã€å¤šæ¨¡æ€æ¨¡å‹ï¼Œæˆ–è¿›è¡Œéœ€è¦ CUDA ç‰¹å®šåº“å’Œå·¥å…·é“¾çš„ç ”ç©¶ã€‚</p>
<p>å¤šäº‘æˆ˜ç•¥ï¼š è¦æ±‚ç¡¬ä»¶èƒ½å¤Ÿåœ¨ AWSã€Azure å’Œæœ¬åœ°æ•°æ®ä¸­å¿ƒä¹‹é—´ç§»æ¤ï¼Œä¸”ä¸å—ä¾›åº”å•†é”å®šã€‚</p>
<p>å¤šæ ·åŒ–çš„å·¥ä½œè´Ÿè½½ï¼š é™¤äº†æœºå™¨å­¦ä¹ ä»»åŠ¡å¤–ï¼Œè¿˜å¯ä»¥è¿è¡Œå›¾å½¢æ¸²æŸ“ã€æ¨¡æ‹Ÿã€æ¸¸æˆæˆ–éäººå·¥æ™ºèƒ½è®¡ç®—ã€‚</p>
<p>é¢„ç®—é™åˆ¶ï¼š æ¯æœˆ AI è®¡ç®—é¢„ç®—ä½äº 2 ä¸‡ç¾å…ƒã€‚è®¾ç½®å¼€é”€å’Œè¿ç§»æˆæœ¬ä½¿å¾— TPU åœ¨å°è§„æ¨¡åº”ç”¨ä¸­ä¸å¤ªåˆ’ç®—ã€‚</p>
<p>å‰æ²¿æ¨¡å‹ï¼š å°è¯•ä½¿ç”¨å°šæœªé’ˆå¯¹ TPU ç¼–è¯‘è¿›è¡Œä¼˜åŒ–æˆ–éœ€è¦è‡ªå®šä¹‰å†…æ ¸çš„æ¶æ„ã€‚</p>
<p>æ··åˆæˆ˜ç•¥ï¼šä¼ä¸šè¡ŒåŠ¨æŒ‡å—</p>
<p>éµå¾ª Meta çš„æ¨¡å¼ï¼šéƒ¨ç½² Nvidia H100 ç”¨äºè®­ç»ƒã€å®éªŒå’Œæ¨¡å‹å¼€å‘ï¼Œä½¿ç”¨ TPU v6e/v7 è¿›è¡Œç”Ÿäº§æ¨ç†æœåŠ¡ã€‚è¿™ç§æ¨¡å¼å…¼é¡¾äº†çµæ´»æ€§å’Œæˆæœ¬ä¼˜åŒ–ï¼Œåœ¨ä¿æŒç ”ç©¶çµæ´»æ€§çš„åŒæ—¶ï¼Œå¯èŠ‚çœ 40-50% çš„æ€»è®¡ç®—èµ„æºã€‚</p>
<p>å®æ–½æ—¶é—´è¡¨ï¼š å¤§è§„æ¨¡ TPU è¿ç§»é¢„è®¡éœ€è¦ 2-6 ä¸ªæœˆï¼ŒåŒ…æ‹¬ä»£ç åº“é€‚é…ã€æµ‹è¯•å’Œæµé‡é€æ­¥è½¬ç§»ã€‚åƒ Midjourney è¿™æ ·çš„å…¬å¸é€šè¿‡é™ä½æˆæœ¬ï¼Œåœ¨ 3-4 ä¸ªæœˆå†…å³å¯å®ç°æŠ•èµ„å›æŠ¥ã€‚</p>
<p>æœªè¢«å®šä»·çš„æœªæ¥ï¼šæ¨ç†çš„ 75% æ„¿æ™¯ä¸å¤§è§„æ¨¡ AI çš„éšæ€§æˆæœ¬</p>
<p>æ²¡äººçœŸæ­£å®šä»·çš„æ˜¯ä»€ä¹ˆï¼Ÿæ¨ç†çš„è§„æ¨¡æ˜¯æ— é™çš„ã€‚è®­ç»ƒåªæ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œæ¨ç†æ‰æ˜¯ç»æµçš„å‘½è„‰ã€‚æ¯ä¸€æ¬¡æŸ¥è¯¢ï¼ˆæ¯å¤©æ•°åäº¿æ¬¡ï¼‰éƒ½ä¼šæŒç»­å¢åŠ æˆæœ¬ã€‚OpenAI 23 äº¿ç¾å…ƒçš„è´¦å•ï¼Œé‚£åªæ˜¯ 2024 å¹´çš„è´¹ç”¨ï¼›å¦‚æœè§„æ¨¡æ‰©å¤§åˆ° 2030 å¹´å æ® 75% çš„å¸‚åœºä»½é¢ï¼Œé‚£å°†æ˜¯æ•°ä¸‡äº¿ç¾å…ƒã€‚</p>
<p>é¢„æµ‹ç»“æœæç»˜å‡ºä¸€å¹…é²œæ˜çš„ç”»é¢ï¼š</p>
<p>å¸‚åœºå¢é•¿ï¼š åˆ° 2030 å¹´ï¼Œäººå·¥æ™ºèƒ½æ¨ç†å¸‚åœºè§„æ¨¡å°†è¾¾åˆ° 2550 äº¿ç¾å…ƒï¼Œå¤åˆå¹´å¢é•¿ç‡è¾¾ 19.2%ã€‚è¿™å°†è¿œè¿œè¶…è¿‡è®­ç»ƒå¸‚åœºï¼Œåè€…éšç€åŸºç¡€æ¨¡å‹çš„æˆç†Ÿè€Œè¶‹äºå¹³ç¨³ã€‚</p>
<p>èƒ½æºå±æœºï¼š ç”¨äºå‰æ²¿æ¨¡å‹çš„ 5GW é›†ç¾¤ï¼Œå ªæ¯”å°å›½çš„ç”µç½‘ã€‚éšç€æ¨ç†é›†ç¾¤çš„æ‰©å¼ ï¼Œæ•°æ®ä¸­å¿ƒé¢ä¸´å®¹é‡é™åˆ¶ã€‚</p>
<p>æˆæœ¬å€æ•°ï¼š è®­ç»ƒåŸºçº¿æˆæœ¬ä¸º 15 å€ï¼Œä½†å®é™…ä½¿ç”¨é‡ä¼šè¿›ä¸€æ­¥æ¨é«˜æˆæœ¬ã€‚æ¯å¢åŠ ä¸€ä¸ªç”¨æˆ·ã€æ¯å¢åŠ ä¸€é¡¹åŠŸèƒ½ã€æ¯æ¬¡å®æ—¶äº¤äº’éƒ½ä¼šå¢åŠ è´¹ç”¨ã€‚</p>
<p>æ€»æ‹¥æœ‰æˆæœ¬ (TCO)ï¼š é™¤äº†ç¡¬ä»¶æˆæœ¬å¤–ï¼Œè¿˜è¦è€ƒè™‘å†·å´ã€ç”µåŠ›åŸºç¡€è®¾æ–½å’Œç¢³ä¿¡ç”¨é¢åº¦ã€‚å¦‚æœå°†è¿™äº›è¿è¥æˆæœ¬è€ƒè™‘åœ¨å†…ï¼ŒTPU çš„æ•ˆç‡ä¼˜åŠ¿å°†æå‡è‡³ 2-3 å€ã€‚</p>
<p>æœªè§£å†³çš„é—®é¢˜ï¼šç¯å¢ƒä»£ä»·ã€‚æ¨ç†çš„æ’æ”¾é‡å¯èƒ½è¿œè¶…è®­ç»ƒã€‚ä»… ChatGPT æ¯å¹´å°±æ’æ”¾ 12800 å…¬å¨äºŒæ°§åŒ–ç¢³ï¼Œæ˜¯ GPT-3 è®­ç»ƒçš„ 25 å€ã€‚TPU çš„æ•ˆç‡ï¼ˆæ¯”ä¸Šä¸€ä»£é«˜å‡º 15 å€ï¼‰ä½¿è°·æ­Œæˆä¸ºå¯æŒç»­å‘å±•çš„é€‰æ‹©ï¼Œè¿™åœ¨ç›‘ç®¡æ—¥ç›Šä¸¥æ ¼çš„ä»Šå¤©è‡³å…³é‡è¦ã€‚</p>
<p>æ·±åº¦å­¦ä¹ æ¨ç†ä¼˜åŒ–çš„æŒ‘æˆ˜ä¸ä»…ä»…æ˜¯æŠ€æœ¯æ€§çš„ï¼Œæ›´æ˜¯å…³ä¹ä¼ä¸šç”Ÿå­˜çš„ã€‚å¿½è§†è¿™ä¸€è½¬å˜çš„å…¬å¸å°†é¢ä¸´æˆæœ¬ç»“æ„å¤±è¡¡çš„é£é™©ï¼Œå¯¼è‡´æ— æ³•å¤§è§„æ¨¡ç›ˆåˆ©ã€‚</p>
<p>å¯¹åˆ©ç›Šç›¸å…³è€…çš„æ„ä¹‰ï¼šTPU é©å‘½çš„è¿é”ååº”</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f79df42e102c46258539198bf7ce0cd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765881115&amp;x-signature=tGanE%2FZCYOc4aYDL20wlYQ689dw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>TPU ä¸ GPU ä¹‹äº‰å¹¶éæŠ½è±¡æ¦‚å¿µï¼Œå®ƒé‡å¡‘äº†æ•´ä¸ªå•†ä¸šæ¨¡å¼ã€æŠ•èµ„ç†å¿µå’ŒèŒä¸šå‘å±•è½¨è¿¹ã€‚ä»¥ä¸‹æ˜¯ä¸åŒå‚ä¸è€…åº”è¯¥å¦‚ä½•åº”å¯¹ã€‚</p>
<p>å¯¹äº AI åˆåˆ›å…¬å¸ï¼šå¤§å‡è¡¡åŒ–</p>
<p>TPU é™ä½äº†æ¨ç†æˆæœ¬ï¼Œä½¿ç²¾ç®€å›¢é˜Ÿä¹Ÿèƒ½ä¸å·¨å¤´ç«äº‰ã€‚Midjourney èŠ‚çœäº† 65% çš„æˆæœ¬ï¼Œä»è€Œå»¶é•¿äº†èµ„é‡‘ä½¿ç”¨å‘¨æœŸå¹¶åŠ å¿«äº†æ‰©å±•é€Ÿåº¦ã€‚ç§å­è½®å…¬å¸å¦‚æœä½¿ç”¨ TPU è¿›è¡Œæ¨ç†ï¼Œå°±èƒ½å®ç°ä»¥å¾€åªæœ‰æ‹¥æœ‰å·¨é¢ GPU é¢„ç®—çš„ B è½®åŠä»¥åèèµ„é˜¶æ®µçš„å…¬å¸æ‰èƒ½è¾¾åˆ°çš„æˆæœ¬ç»“æ„ã€‚</p>
<p>å®¡æ ¸æ‚¨çš„æ¨ç†è´¹ç”¨ã€‚å¦‚æœæ‚¨æ¯æœˆåœ¨è‹±ä¼Ÿè¾¾æ˜¾å¡ä¸Šçš„æ”¯å‡ºè¶…è¿‡ 2 ä¸‡ç¾å…ƒï¼Œè¯·å¼€å±• TPU è¯•ç‚¹é¡¹ç›®ã€‚TensorFlow æ¨¡å‹ä¼˜åŒ–å’Œ JAX ç­‰å·¥å…·å¯ä½¿è¿ç§»è¿‡ç¨‹æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´åŠ é¡ºç•…ã€‚</p>
<p>å¯¹äºä¼ä¸š CTOï¼šæˆ˜ç•¥å¿…è¦æ€§</p>
<p>15 å€çš„æ¨ç†æˆæœ¬å€å¢æ•ˆåº”è¦æ±‚æˆ‘ä»¬ç°åœ¨å°±åšå‡ºæˆ˜ç•¥æ€§çš„ç¡¬ä»¶é€‰æ‹©ï¼Œè€Œä¸æ˜¯ä»¥åã€‚åˆ° 2026 å¹´ï¼Œå°†é«˜å®¹é‡æ¨ç†è¿ç§»åˆ° TPU å¯ä»¥èŠ‚çœ 40-60% çš„è®¡ç®—é¢„ç®—ï¼Œä»è€Œå°†èµ„é‡‘ç”¨äºåˆ›æ–°è€Œä¸æ˜¯åŸºç¡€è®¾æ–½å»ºè®¾ã€‚</p>
<p>éšè—çš„å¥½å¤„ï¼š TPU çš„ä½åŠŸè€—å¯é™ä½æ•°æ®ä¸­å¿ƒå†·å´æˆæœ¬ 30-40%ï¼ŒåŒæ—¶æ»¡è¶³é¢„ç®—å’Œå¯æŒç»­æ€§è¦æ±‚ã€‚</p>
<p>é£é™©ï¼š è¡ŒåŠ¨è¿Ÿç¼“æ„å‘³ç€ç«äº‰å¯¹æ‰‹å°†è·å¾—æˆæœ¬ä¼˜åŠ¿ï¼Œè€Œä¸”è¿™ç§ä¼˜åŠ¿ä¼šé€å­£åº¦ç´¯ç§¯ã€‚ä¾‹å¦‚ï¼Œç«äº‰å¯¹æ‰‹æ¯å¹´åœ¨æ¨ç†æ–¹é¢èŠ‚çœ 500 ä¸‡ç¾å…ƒï¼Œå¹¶å°†å…¶é‡æ–°æŠ•å…¥åˆ°æ›´ä¼˜çš„æ¨¡å‹ä¸­ï¼Œä»è€Œå¯¼è‡´å·®è·ä¸æ–­æ‰©å¤§ã€‚</p>
<p>å¯¹äºè‹±ä¼Ÿè¾¾æŠ•èµ„è€…ï¼šåˆ©æ¶¦ç‡å‹ç¼©çš„å¨èƒ</p>
<p>å°½ç®¡è‹±ä¼Ÿè¾¾ 2024 å¹´æ•°æ®ä¸­å¿ƒä¸šåŠ¡è¥æ”¶é¢„è®¡å°†è¾¾åˆ° 600 äº¿ç¾å…ƒï¼Œä½† TPU çš„æ™®åŠåº”ç”¨å´å¸¦æ¥äº†é•¿æœŸçš„åˆ©æ¶¦é£é™©ã€‚å¦‚æœè°·æ­Œèƒ½å¤Ÿå æ®å“ªæ€• 10% çš„æ¨ç†å·¥ä½œè´Ÿè½½ï¼ˆè€ƒè™‘åˆ°ç›®å‰çš„è¿ç§»æƒ…å†µï¼Œè¿™è¿˜æ˜¯ä¿å®ˆä¼°è®¡ï¼‰ï¼Œé‚£ä¹ˆæ¯å¹´è‹±ä¼Ÿè¾¾çš„åˆ©æ¶¦å°±å°†é¢ä¸´è¶…è¿‡ 60 äº¿ç¾å…ƒçš„æŸå¤±ã€‚</p>
<p>å¯¹ä½ï¼š Â è‹±ä¼Ÿè¾¾çš„ Blackwell æ¶æ„ ï¼ˆé¢„è®¡ 2025 å¹´å‘å¸ƒï¼‰æ‰¿è¯ºæå‡æ¨ç†æ•ˆç‡ã€‚ç„¶è€Œï¼Œæ—©æœŸåŸºå‡†æµ‹è¯•è¡¨æ˜ï¼Œåœ¨çº¯ç²¹çš„å¤§è§„æ¨¡æ¨ç†æ–¹é¢ï¼ŒTPU ä»ä¿æŒç€ 2-3 å€çš„æˆæœ¬ä¼˜åŠ¿ï¼Œè¿™é™åˆ¶äº† Blackwell çš„å½±å“ã€‚</p>
<p>å¯†åˆ‡å…³æ³¨è‹±ä¼Ÿè¾¾ 2026 å¹´ç¬¬ä¸€å­£åº¦è´¢æŠ¥ã€‚å¦‚æœæ¨ç†é©±åŠ¨çš„æ”¶å…¥ç¯æ¯”å¢é•¿æ”¾ç¼“è‡³ 15% ä»¥ä¸‹ï¼Œåˆ™è¡¨æ˜ TPU èš•é£Ÿæ•ˆåº”ç¡®å®å­˜åœ¨ã€‚</p>
<p>å¯¹äºå¼€å‘è€…å’Œæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆï¼šèŒä¸šæœªæ¥ä¿éšœ</p>
<p>CUDA ç”Ÿæ€ç³»ç»Ÿé•¿è¾¾ 15 å¹´çš„æŠ¤åŸæ²³æ­£åœ¨é€æ¸æ¶ˆå¤±ã€‚éšç€ JAXã€TensorFlow å’Œ TPU ä¼˜åŒ–æŠ€æœ¯çš„æ™®åŠï¼Œå­¦ä¹ è¿™äº›æŠ€æœ¯èƒ½å¤Ÿç¡®ä¿èŒä¸šå‘å±•çš„æœªæ¥ç«äº‰åŠ›ã€‚2024 å¹´ï¼Œã€ŒTPU ä¼˜åŒ–å·¥ç¨‹å¸ˆã€çš„èŒä½å‘å¸ƒé‡åŒæ¯”å¢é•¿äº† 340%ã€‚</p>
<p>æŠ€èƒ½è½¬å˜ï¼š ä»é€šç”¨ GPU ç¼–ç¨‹è½¬å‘ ASIC æ„ŸçŸ¥æ¨¡å‹è®¾è®¡ã€‚ç†è§£è„‰åŠ¨é˜µåˆ—çš„ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œå…¶ä»·å€¼å ªæ¯” 2020 å¹´çš„ CUDA å†…æ ¸è°ƒä¼˜ã€‚</p>
<p>æœºé‡ï¼š æ—©æœŸ TPU ä¸“ä¸šçŸ¥è¯†å¯è·å¾— 20-30% çš„è–ªèµ„æº¢ä»·ï¼Œå› ä¸ºå…¬å¸éƒ½åœ¨äº‰ç›¸å¯»æ‰¾äººæ‰æ¥æ‰§è¡Œè¿ç§»ã€‚</p>
<p>åå°”è¡—çš„è‹±ä¼Ÿè¾¾å¤§æ’¤é€€ï¼šä¸ºä½•ç²¾è‹±æŠ•èµ„è€…æŠ›å”® 60 äº¿ç¾å…ƒ GPU è‚¡ç¥¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6efcd7693de04deebaffe456e8c5ba2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765881115&amp;x-signature=0AO9ZsqfjswxOkFzvneoicraK%2Fc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éšç€æ¨ç†é©å‘½çš„åŠ é€Ÿï¼Œè‹±ä¼Ÿè¾¾æ›¾ç»ä¸å¯æ’¼åŠ¨çš„ç»Ÿæ²»åœ°ä½æ­£é¢ä¸´ç€åå°”è¡—æœ€æ•é”çš„æŠ•èµ„è€…ä»¬çš„ä¸¥å³»ç°å®æ£€éªŒï¼Œä»–ä»¬æ­£æ‚„ç„¶é€€å‡ºå¸‚åœºã€‚</p>
<p>ç§‘æŠ€è¿œè§å®¶å½¼å¾—ãƒ»è’‚å°” (Peter Thiel) æ——ä¸‹çš„å¯¹å†²åŸºé‡‘ Thiel Macro LLC åœ¨ 2025 å¹´ç¬¬ä¸‰å­£åº¦æŠ›å”®äº†å…¶æŒæœ‰çš„å…¨éƒ¨ 537742 è‚¡è‹±ä¼Ÿè¾¾è‚¡ç¥¨ï¼ˆæˆªè‡³ 9 æœˆåº•ï¼Œä»·å€¼çº¦ 1 äº¿ç¾å…ƒï¼‰ï¼Œå¹¶å°†æ‰€å¾—èµ„é‡‘é‡æ–°æŠ•èµ„äºè‹¹æœå’Œå¾®è½¯ç­‰æ›´å…·é˜²å¾¡æ€§çš„è‚¡ç¥¨ï¼Œä»¥åº”å¯¹æ—¥ç›Šå¢é•¿çš„äººå·¥æ™ºèƒ½æ³¡æ²«ç ´è£‚çš„æ‹…å¿§ã€‚</p>
<p>è¿™å¹¶éå­¤ä¾‹ã€‚å°±åœ¨å‡ å‘¨å‰ï¼Œæ—¥æœ¬è½¯é“¶ä¹ŸæŠ›å”®äº†å…¶æŒæœ‰çš„å…¨éƒ¨ 3210 ä¸‡è‚¡è‚¡ç¥¨ï¼Œå¥—ç°é«˜è¾¾ 58.3 äº¿ç¾å…ƒï¼Œå¹¶å°†èµ„é‡‘æŠ•å…¥ OpenAIï¼Œä»¥æœŸä»ç¡¬ä»¶ç‚’ä½œè½¬å‘è½¯ä»¶ç”Ÿæ€ç³»ç»Ÿã€‚å°±è¿é¢„è¨€äº† 2008 å¹´é‡‘èå±æœºçš„ã€Šå¤§ç©ºå¤´ã€‹é¢„è¨€å®¶è¿ˆå…‹å°”ãƒ»ä¼¯é‡Œï¼Œä¹Ÿåœ¨ 2025 å¹´æœ«æ–¥èµ„ 920 ä¸‡ç¾å…ƒä¹°å…¥äº†é’ˆå¯¹è‹±ä¼Ÿè¾¾çš„çœ‹è·ŒæœŸæƒï¼ŒæŠ¼æ³¨éšç€ Meta å’Œ Oracle ç­‰è¶…å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒè¿è¥å•†é¢ä¸´æ•°æ®ä¸­å¿ƒè¿‡å‰©å’Œ GPU åº“å­˜è´¬å€¼çš„é—®é¢˜ï¼Œè‹±ä¼Ÿè¾¾çš„ä¼°å€¼å°†ä¼šæš´è·Œã€‚</p>
<p>è¿™äº›ç²¾è‹±æŠ•èµ„è€…å¹¶éæ”¾å¼ƒäººå·¥æ™ºèƒ½ã€‚ä»–ä»¬åªæ˜¯åœ¨æŠ›å”®è‹±ä¼Ÿè¾¾é«˜è¾¾ 70 å€é¢„æœŸå¸‚ç›ˆç‡çš„è‚¡ç¥¨ï¼Œå› ä¸ºè°·æ­Œ TPU çš„ç«äº‰æ—¥ç›Šæ¿€çƒˆï¼Œä»¥åŠéšç€è®­ç»ƒé˜¶æ®µçš„è¾‰ç…Œé€æ¸è¤ªå»ï¼Œæ¨ç†æˆæœ¬ä¸æ–­æ”€å‡ä¾µèš€åˆ©æ¶¦ç‡çš„æ‹…å¿§ä»¤ä»–ä»¬æ„Ÿåˆ°ä¸å®‰ã€‚å°½ç®¡è‹±ä¼Ÿè¾¾ç›ˆåˆ©å¼ºåŠ²ï¼Œä½†å…¶è‚¡ä»·ä»è¾ƒ 10 æœˆä»½çš„é«˜ç‚¹ä¸‹è·Œäº† 12%ï¼Œæœºæ„æŠ•èµ„è€…çš„èµ„é‡‘å¤–æµä¹Ÿåæ˜ äº†ç§‘æŠ€è¡Œä¸šçš„æ•´ä½“ç„¦è™‘æƒ…ç»ªã€‚</p>
<p>è¿™æ³¢è¶…è¿‡ 60 äº¿ç¾å…ƒçš„èµ„é‡‘å¤–æµå‡¸æ˜¾äº†ä¸€ä¸ªæ®‹é…·çš„ç°å®ï¼šå½“æ¨ç†è¿ç®—çš„ç»“æœå¯¹ ASIC èŠ¯ç‰‡æ¯”å¯¹ GPU èŠ¯ç‰‡æ›´æœ‰åˆ©æ—¶ï¼Œå³ä½¿æ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸçš„å·¨å¤´ä¹Ÿä¸å¾—ä¸å±ˆæœäºè°¨æ…çš„èµ„æœ¬å¤–é€ƒæµªæ½®ã€‚</p>
<p>è§£ç æŠ›å”®æ½®ï¼šç²¾æ˜æŠ•èµ„è€…çœ‹åˆ°çš„ä¸‰ä¸ªå±é™©ä¿¡å·</p>
<p>ä¾›åº”è¿‡å‰©å’Œè´¬å€¼ï¼š è¶…å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒåœ¨ 2023-2024 å¹´é—´å¤§é‡è´­å…¥ H100 æ˜¾å¡ï¼Œä¸ºè®­ç»ƒæ•°æ®æ¿€å¢è€Œæ‰©å®¹ï¼Œä½†è¿™äº›æ¿€å¢å¹¶æœªå®Œå…¨å®ç°ã€‚å¦‚ä»Šï¼Œæ•°æ®ä¸­å¿ƒä½¿ç”¨çš„èµ„äº§æ­£åœ¨è´¬å€¼ï¼ˆGPU ä»·å€¼æ¯å¹´ä¸‹é™ 30-40%ï¼‰ï¼Œè€Œæ¨ç†éœ€æ±‚å´éœ€è¦æ›´ä¾¿å®œçš„ ASIC èŠ¯ç‰‡ã€‚è¿™ç§ä¾›éœ€ä¸åŒ¹é…ä»¤é‚£äº›é¢„æœŸ GPU å°†æŒç»­å‡çº§çš„æˆé•¿å‹æŠ•èµ„è€…æ„Ÿåˆ°ææ…Œã€‚</p>
<p>åˆ©æ¶¦ç‡å³å°†å‹ç¼©ï¼š TPU å°†ä¸»å¯¼æ¨ç†ä»»åŠ¡ï¼ˆæœªæ¥ 75% çš„è®¡ç®—é‡ï¼‰ï¼Œè¿™æ„å‘³ç€è‹±ä¼Ÿè¾¾å¿…é¡»åœ¨ä»·æ ¼ä¸Šå±•å¼€ç«äº‰ã€‚å…¶ 70-80% çš„æ¯›åˆ©ç‡å°†é¢ä¸´ä¸å¯é¿å…çš„æŒ¤å‹ã€‚å³ä½¿æ¯›åˆ©ç‡ä¸‹é™ 10 ä¸ªç™¾åˆ†ç‚¹ï¼Œä¹Ÿä¼šä½¿ç›®å‰çš„ä¼°å€¼å€æ•°å¤§å¹…ä¸‹æ»‘ã€‚</p>
<p>å¤šå…ƒåŒ–ç°å®ï¼š åƒ Meta è¿™æ ·çš„å®¢æˆ·å¹¶æ²¡æœ‰å®Œå…¨æ”¾å¼ƒè‹±ä¼Ÿè¾¾ï¼Œä½†ä»–ä»¬æ­£åœ¨ç§¯æè¿›è¡Œå¤šå…ƒåŒ–æŠ•èµ„ã€‚å®¢æˆ·åœ¨ TPU ä¸Šçš„æ¯ä¸€ç¾å…ƒæ”¯å‡ºï¼Œéƒ½æ„å‘³ç€è‹±ä¼Ÿè¾¾å°‘èµšä¸€ç¾å…ƒã€‚éšç€ Metaã€Anthropic å’Œ Midjourney ç­‰å…¬å¸å…¬å¼€æ‹¥æŠ±æ›¿ä»£æ–¹æ¡ˆï¼Œè‹±ä¼Ÿè¾¾çš„æ”¶å…¥é›†ä¸­åº¦é£é™©å·²å˜å¾—å²Œå²Œå¯å±ã€‚</p>
<p>å½“ç„¶ä¹Ÿæœ‰ä¸åŒè§‚ç‚¹ï¼Œè‹±ä¼Ÿè¾¾ä»ç„¶å æ® 80% çš„å¸‚åœºä»½é¢ï¼Œå¸ƒè±å…‹å¨å°”å³å°†åŠ å…¥ï¼ŒCUDA çš„æŠ¤åŸæ²³ä¹Ÿä¸ä¼šåœ¨ä¸€å¤œä¹‹é—´å´©å¡Œã€‚</p>
<p>æŒ‘æˆ˜ä¸æœªæ¥ä¹‹è·¯</p>
<p>TPU å¹¶éå®Œç¾æ— ç¼ºã€‚ä¸è‹±ä¼Ÿè¾¾çš„ CUDA é€šç”¨æ€§ç›¸æ¯”ï¼Œå…¶ç”Ÿæ€ç³»ç»Ÿä¸ TensorFlow/JAX çš„ç´§å¯†è”ç³»é™åˆ¶äº†çµæ´»æ€§ã€‚æ‰©å±• TPUï¼ˆæœ€å¤šå¯è¾¾ 4096 ä¸ªèŠ¯ç‰‡ï¼‰éœ€è¦ Google Cloud çš„æŠ•å…¥ï¼Œè€Œæœ¬åœ°éƒ¨ç½²çš„ TPU å¸‚åœºå°šå¤„äºèµ·æ­¥é˜¶æ®µï¼Œæ··åˆæ¶æ„å°†ä¼šæŒç»­å­˜åœ¨ï¼šNvidia ç”¨äºè®­ç»ƒçš„æç«¯æƒ…å†µï¼ŒTPU ç”¨äºæ¨ç†çš„å¤§è§„æ¨¡åº”ç”¨ã€‚</p>
<p>æ–°å…´ç«äº‰ï¼š äºšé©¬é€Šçš„ Trainium å’Œå¾®è½¯çš„ Maia èŠ¯ç‰‡ç„å‡†ç›¸ä¼¼çš„ç»†åˆ†å¸‚åœºï¼ŒåŠ å‰§äº† ASIC å¸‚åœºçš„ç¢ç‰‡åŒ–ã€‚ç„¶è€Œï¼Œè¿™ä¸¤æ¬¾èŠ¯ç‰‡çš„æˆç†Ÿåº¦ï¼ˆå·²å‘å±•ä¹ä»£ï¼‰å’Œè§„æ¨¡ï¼ˆä¸ºè°·æ­Œçš„ä¸‡äº¿æŸ¥è¯¢åŸºç¡€è®¾æ–½æä¾›æ”¯æŒï¼‰éƒ½æ— æ³•ä¸ TPU ç›¸æå¹¶è®ºã€‚</p>
<p>ä¾›åº”é“¾ï¼š è°·æ­Œä¸åšé€šå’Œå°ç§¯ç”µåˆä½œï¼ŒåŠ é€Ÿ v7 èŠ¯ç‰‡çš„ç”Ÿäº§ï¼Œä»¥è§£å†³äº§èƒ½é—®é¢˜ã€‚åˆ° 2026 å¹´ç¬¬äºŒå­£åº¦ï¼ŒTPU çš„ä¾›åº”é‡åº”è¯¥èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œä»è€Œæ¶ˆé™¤å¸‚åœºé‡‡ç”¨éšœç¢ã€‚</p>
<p>ç›®å‰çš„åŠ¿å¤´å¯¹è°·æ­Œæœ‰åˆ©ã€‚éšç€ v7 TPU åœ¨ 2025 å¹´é‡äº§ï¼Œä»¥åŠåšé€š / å°ç§¯ç”µç­‰åˆä½œä¼™ä¼´åŠ é€Ÿç”Ÿäº§ï¼Œä¾›åº”é“¾æ­£åœ¨é€æ­¥å®Œå–„ã€‚éšç€æ¨ç†èƒ½åŠ›çš„æ¿€å¢ï¼ŒTPU çš„åº”ç”¨ä¹Ÿå°†éšä¹‹æ‰©å±•ã€‚</p>
<p>2025 å¹´äººå·¥æ™ºèƒ½å·¥ä½œè´Ÿè½½ä¸­ TPU ä¸ Nvidia GPU çš„æ¯”è¾ƒ</p>
<p>å¯¹äºæ‰€æœ‰äººå·¥æ™ºèƒ½å·¥ä½œè´Ÿè½½ï¼ŒTPU éƒ½æ¯” Nvidia GPU æ›´å¥½å—ï¼Ÿ</p>
<p>ä¸ã€‚TPU åœ¨æ¨ç†å’Œå¼ é‡å¯†é›†å‹æ“ä½œæ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œåœ¨è¿è¡Œ LLMã€å›¾åƒç”Ÿæˆå’Œæ¨èç­‰æ¨¡å‹æ—¶ï¼Œæ€§ä»·æ¯”æ¯” GPU é«˜å‡º 4 å€ã€‚Nvidia GPU åœ¨è®­ç»ƒå„ç§æ¨¡å‹ã€éœ€è¦çµæ´»æ€§çš„ç ”ç©¶ä»¥åŠæ¸¸æˆã€å›¾å½¢æ¸²æŸ“å’Œé€šç”¨è®¡ç®—ç­‰éå¼ é‡å·¥ä½œè´Ÿè½½æ–¹é¢ä»ç„¶æ›´èƒœä¸€ç­¹ã€‚æœ€ä½³ç­–ç•¥é€šå¸¸æ˜¯æ··åˆä½¿ç”¨ï¼šTPU ç”¨äºç”Ÿäº§æ¨ç†ï¼ŒGPU ç”¨äºå®éªŒã€‚</p>
<p>æˆ‘å¯ä»¥åœ¨ Google Cloud ä¹‹å¤–ä½¿ç”¨ TPU å—ï¼Ÿ</p>
<p>ç›®å‰ï¼ŒTPU ä¸»è¦é€šè¿‡ Google Cloud Platform æä¾›ï¼Œä½†å¤§å‹ä¼ä¸šå®¢æˆ·ï¼ˆä¾‹å¦‚ Meta çš„ 2027 å¹´è®¡åˆ’ï¼‰ä¹Ÿå¼€å§‹é‡‡ç”¨æœ¬åœ°éƒ¨ç½²æ–¹æ¡ˆã€‚Nvidia åœ¨ AWSã€Azure å’Œæœ¬åœ°éƒ¨ç½²æ–¹é¢çš„å¹¿æ³›å¯ç”¨æ€§ä»ç„¶æ˜¯å¤šäº‘æˆ˜ç•¥çš„ä¼˜åŠ¿ã€‚ä¸è¿‡ï¼ŒGoogle æ­£åœ¨é€šè¿‡åˆä½œä¼™ä¼´å…³ç³»å’Œæ‰˜ç®¡é€‰é¡¹æ¥æ‰©å±• TPU çš„è®¿é—®æƒé™ã€‚</p>
<p>è‹±ä¼Ÿè¾¾çš„ Blackwell èŠ¯ç‰‡èƒ½å¦åœ¨æ¨ç†æ–¹é¢ä¸ TPU å±•å¼€ç«äº‰ï¼Ÿ</p>
<p>è‹±ä¼Ÿè¾¾çš„ Blackwell æ¶æ„ï¼ˆé¢„è®¡ 2025 å¹´å‘å¸ƒï¼‰æ‰¿è¯ºé€šè¿‡ FP4 ç²¾åº¦å’Œæ›´é«˜çš„å†…å­˜å¸¦å®½ç­‰ç‰¹æ€§æ¥æå‡æ¨ç†æ•ˆç‡ã€‚ç„¶è€Œï¼Œæ—©æœŸåŸºå‡†æµ‹è¯•å’Œæ¶æ„åˆ†æè¡¨æ˜ï¼Œç”±äº ASIC èŠ¯ç‰‡çš„ä¸“ç”¨æ€§ï¼ŒTPU åœ¨å¤§è§„æ¨¡çº¯æ¨ç†æ–¹é¢ä»ä¿æŒç€ 2-3 å€çš„æˆæœ¬ä¼˜åŠ¿ã€‚Blackwell æ¶æ„å°†æ¯” Hopperï¼ˆH100ï¼‰æ›´å…·ç«äº‰åŠ›ï¼Œä½†å¯èƒ½æ— æ³•å®Œå…¨å¼¥è¡¥åœ¨é«˜å®¹é‡æ¨ç†å·¥ä½œè´Ÿè½½æ–¹é¢çš„å·®è·ã€‚</p>
<p>ä»è‹±ä¼Ÿè¾¾å¹³å°è¿ç§»åˆ° TPU çš„æˆæœ¬å’Œæ—¶é—´æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>è¿ç§»éœ€è¦å°†ä»£ç ä» CUDA/PyTorch é€‚é…åˆ° TensorFlow/JAXï¼Œå¤§å‹éƒ¨ç½²é€šå¸¸éœ€è¦ 2-6 ä¸ªæœˆï¼Œå…·ä½“æ—¶é—´å–å†³äºæ¨¡å‹å¤æ‚åº¦ã€‚æˆæœ¬åŒ…æ‹¬å·¥ç¨‹æ—¶é—´ï¼ˆå¤§å‹è¿ç§»éœ€è¦ 4-8 ä¸ªå…¨èŒå‘˜å·¥æœˆï¼‰ä»¥åŠè¿‡æ¸¡æœŸé—´çš„å¹¶è¡ŒåŸºç¡€è®¾æ–½ã€‚ç„¶è€Œï¼Œåƒ Midjourney è¿™æ ·çš„å…¬å¸å¯ä»¥é€šè¿‡æŒç»­èŠ‚çœ 40-65% çš„æˆæœ¬ï¼Œåœ¨ 3-4 ä¸ªæœˆå†…æ”¶å›è¿™äº›æˆæœ¬ã€‚è§„æ¨¡è¾ƒå°çš„é¡¹ç›®ï¼ˆæ¯æœˆæ¨ç†æˆæœ¬ä½äº 5 ä¸‡ç¾å…ƒï¼‰å¯èƒ½ä¸å€¼å¾—æŠ•å…¥è¿™äº›é¢å¤–è´¹ç”¨ã€‚</p>
<p>TPU å¦‚ä½•å¤„ç†è‡ªå®šä¹‰ AI æ¨¡å‹å’Œæ¶æ„ï¼Ÿ</p>
<p>TPU åœ¨æ ‡å‡†æ¶æ„ï¼ˆTransformerã€CNNã€RNNï¼‰ä¸Šè¡¨ç°å‡ºè‰²ï¼Œä½†å¯¹äºè‡ªå®šä¹‰æ“ä½œåˆ™éœ€è¦é‡æ–°ç¼–è¯‘ã€‚JAX çš„ XLA ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨å¤„ç†å¤§å¤šæ•°æƒ…å†µï¼Œä½†å¯¹äºç‰¹æ®Šæ¶æ„å¯èƒ½éœ€è¦ä¼˜åŒ–ã€‚è‹±ä¼Ÿè¾¾çš„ CUDA ä¸ºå®éªŒæ€§å·¥ä½œæä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚æœ€ä½³å®è·µï¼šå…ˆåœ¨ GPU ä¸Šè¿›è¡ŒåŸå‹è®¾è®¡ï¼Œå¾…æ¶æ„ç¨³å®šåå†é’ˆå¯¹ TPU ä¼˜åŒ–ç”Ÿäº§æ¨¡å‹ã€‚</p>
<p>é‚£ä¹ˆï¼Œåƒ AMD æˆ– Intel èŠ¯ç‰‡è¿™æ ·çš„ GPU æ›¿ä»£æ–¹æ¡ˆï¼Œç”¨äºäººå·¥æ™ºèƒ½æ¨ç†åˆå¦‚ä½•å‘¢ï¼Ÿ</p>
<p>AMD çš„ MI300 å’Œè‹±ç‰¹å°”çš„ Gaudi èŠ¯ç‰‡é¢å‘ç›¸ä¼¼çš„å¸‚åœºï¼Œä½†åœ¨ç”Ÿæ€ç³»ç»Ÿæˆç†Ÿåº¦å’Œè§„æ¨¡åŒ–åº”ç”¨æ–¹é¢ç•¥é€Šä¸€ç­¹ã€‚AMD çš„äº§å“ç›¸æ¯”è‹±ä¼Ÿè¾¾çš„äº§å“å¯èŠ‚çœ 30-40% çš„æˆæœ¬ï¼Œä½†å…¶æ•ˆç‡ä»ä¸åŠ TPUã€‚è‹±ç‰¹å°”çš„ Gaudi èŠ¯ç‰‡å±•ç°å‡ºä¸€å®šçš„æ½œåŠ›ï¼Œä½†ç›®å‰é‡äº§éƒ¨ç½²æœ‰é™ã€‚å±•æœ› 2025-2026 å¹´ï¼ŒTPU ä»ç„¶æ˜¯æ¨ç†ä¼˜åŒ–é¢†åŸŸç›¸å¯¹äºè‹±ä¼Ÿè¾¾çš„æœ€ä½³é€‰æ‹©ï¼Œå…¶ä»–æ–¹æ¡ˆåˆ™ä½œä¸ºå¤‡é€‰ã€‚</p>
<p>ç»“è®ºï¼šTPU é©±åŠ¨çš„äººå·¥æ™ºèƒ½ä¸–ç•Œå³å°†åˆ°æ¥</p>
<p>è‹±ä¼Ÿè¾¾å‡­å€Ÿè®­ç»ƒæŠ€æœ¯çš„è¾‰ç…Œå†å²å»ºç«‹èµ·äº†åºå¤§çš„è®¡ç®—å¸å›½ï¼Œä½†æ¨ç†æ‰æ˜¯æœªæ¥ï¼Œåœ¨è¿™ä¸ªé¢†åŸŸï¼Œè‹±ä¼Ÿè¾¾çš„æ¶æ„ä¼˜åŠ¿æ­£åœ¨é€æ¸æ¶ˆå¤±ã€‚è°·æ­Œçš„ TPU æ‹¥æœ‰å››å€çš„æ€§ä»·æ¯”ï¼Œæ­£å¸å¼•ç€ Midjourneyï¼ˆæˆæœ¬é™ä½ 65%ï¼‰ã€Anthropicï¼ˆ100 ä¸‡é¢—èŠ¯ç‰‡ï¼‰å’Œ Metaï¼ˆæ•°åäº¿ç¾å…ƒçš„è°ˆåˆ¤ï¼‰ç­‰å·¨å¤´ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ainewshub.org%2Fpost%2Fai-inference-costs-tpu-vs-gpu-2025" target="_blank" title="https://www.ainewshub.org/post/ai-inference-costs-tpu-vs-gpu-2025" ref="nofollow noopener noreferrer">www.ainewshub.org/post/ai-infâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.investing.com%2Fnews%2Fstock-market-news%2Falphabet-could-see-billions-in-added-revenue-from-tpu-sales-morgan-stanley-says-4383972%3Futm_source%3Dchatgpt.com" target="_blank" title="https://www.investing.com/news/stock-market-news/alphabet-could-see-billions-in-added-revenue-from-tpu-sales-morgan-stanley-says-4383972?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">www.investing.com/news/stock-â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è®²æ¸…ï¼šRAGçš„7ç§ä¼˜åŒ–æ–¹æ³•ï¼Œçœ‹å®Œç®€ç›´é†é†çŒé¡¶ï¼]]></title>    <link>https://juejin.cn/post/7581666412021055497</link>    <guid>https://juejin.cn/post/7581666412021055497</guid>    <pubDate>2025-12-09T09:06:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581666412021055497" data-draft-id="7581658157145325618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è®²æ¸…ï¼šRAGçš„7ç§ä¼˜åŒ–æ–¹æ³•ï¼Œçœ‹å®Œç®€ç›´é†é†çŒé¡¶ï¼"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-12-09T09:06:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è®²æ¸…ï¼šRAGçš„7ç§ä¼˜åŒ–æ–¹æ³•ï¼Œçœ‹å®Œç®€ç›´é†é†çŒé¡¶ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T09:06:10.000Z" title="Tue Dec 09 2025 09:06:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰å·²æ·±åº¦èå…¥æ—¥å¸¸ç”Ÿæ´»ä¸èŒåœºå®è·µï¼Œå‡­å€Ÿå…¶å“è¶Šçš„å¤šåŠŸèƒ½æ€§å’Œæ™ºèƒ½æ°´å¹³ï¼Œå½»åº•é‡å¡‘äº†äººç±»ä¸ä¿¡æ¯äº¤äº’çš„æ¨¡å¼ã€‚</p>
<p>å°½ç®¡å¦‚æ­¤ï¼Œè¿™ç±»æ¨¡å‹ä»å­˜åœ¨æ˜æ˜¾å±€é™ã€‚å®ƒä»¬å¯èƒ½è¾“å‡ºå…·æœ‰è¯¯å¯¼æ€§çš„è™šæ„å†…å®¹ï¼ˆ"å¹»è§‰"ï¼‰ï¼Œæ‰€ä¾æ®çš„çŸ¥è¯†åº“å­˜åœ¨æ»åæ€§ï¼Œå¯¹ä¸“ä¸šé¢†åŸŸçŸ¥è¯†çš„å¤„ç†æ•ˆç‡æœ‰é™ï¼Œä¸”ç¼ºä¹è¡Œä¸šçºµæ·±æ´å¯ŸåŠ›ï¼Œé€»è¾‘æ¨ç†èƒ½åŠ›ä¹Ÿå°šæœªå®Œå–„ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œæ•°æ®å¿…é¡»ä¿æŒåŠ¨æ€æ›´æ–°ä»¥è¿½è¸ªæœ€æ–°è¿›å±•ï¼Œç”Ÿæˆå†…å®¹éœ€å…·å¤‡å®Œæ•´çš„å¯è¿½æº¯æ€§ï¼Œä»è€Œå®ç°æˆæœ¬ä¼˜åŒ–å’Œæ•°æ®éšç§ä¿æŠ¤ã€‚</p>
<p>å•çº¯ä¾èµ–è¿™ç±»"é»‘ç›’"ç³»ç»Ÿå·²æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œå¿…é¡»å¼€å‘æ›´ç²¾å‡†çš„è§£å†³æ–¹æ¡ˆæ¥åº”å¯¹å¤æ‚æŒ‘æˆ˜ã€‚</p>
<p>æ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯ï¼ˆRetrieval-Augmented Generationï¼ŒRAGï¼‰æ­£æ˜¯ä¸ºå¡«è¡¥è¿™ä¸€ç©ºç™½è€Œè¯ç”Ÿï¼Œæˆä¸ºæ¨åŠ¨LLMæ—¶ä»£å‘å±•çš„å…³é”®æŠ€æœ¯æ–¹å‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1953cadb98bb42fda34fd7431518c969~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875969&amp;x-signature=D1UCdMLVwzmhDSXbZEQUGO%2BjfW0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p>
<p>åŸºç¡€RAGæ¶æ„çš„æµç¨‹è®¾è®¡æä¸ºç®€æ´ï¼Œå…¶æ ¸å¿ƒç‰¹å¾åœ¨äºæ•°æ®æµçš„å•å‘æ€§ã€‚è¿™ç§æ¶æ„çš„å¿«é€Ÿéƒ¨ç½²ä¼˜åŠ¿æ˜¾è‘—ï¼Œä½†è·ç¦»ç”Ÿäº§çº§åº”ç”¨ä»å­˜åœ¨å·®è·ã€‚</p>
<p>ä¸ºæå‡æ–‡æ¡£å¬å›ç‡ä¸ç³»ç»Ÿé²æ£’æ€§ï¼Œä¸»è¦ä¼˜åŒ–æ–¹å‘å¯å½’çº³ä¸ºä¸¤ç±»ï¼š</p>
<p><strong>â€Œæ‰©å±•å¬å›é€šé“â€Œ</strong>ï¼šé‡‡ç”¨æŸ¥è¯¢å˜æ¢ï¼ˆå­æŸ¥è¯¢ã€RAG-Fusionï¼‰ã€æ··åˆæ£€ç´¢ç­‰å¤šè·¯å¬å›ç­–ç•¥ï¼Œä»¥æœ€å¤§åŒ–ä¿¡æ¯è¦†ç›–èŒƒå›´ï¼›</p>
<p><strong>â€Œå¼ºåŒ–åé¦ˆé—­ç¯â€Œ</strong>ï¼šé€šè¿‡é‡æ’åºï¼ˆRerankï¼‰ã€å›æº¯æç¤ºï¼ˆBack-Promptingï¼‰ã€Self-RAGç­‰æŠ€æœ¯å¯¹åˆå§‹ç»“æœè¿›è¡Œè¿­ä»£ä¼˜åŒ–ï¼Œä»è€Œæå‡è¾“å‡ºå‡†ç¡®æ€§ã€‚</p>
<p>ç»æ­¤ä¼˜åŒ–åï¼ŒRAGæ¶æ„ä¸­çš„æ•°æ®æµä»å•å‘ä¼ è¾“è½¬å˜ä¸ºå¤šç»´åº¦å¹¶è¡Œäº¤äº’æ¨¡å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3246c3e165e646f0916e25b06f9b8d89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875969&amp;x-signature=aZ56cVEwj%2Bw5sfPo%2FFLkgHL3Mrc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸€ã€</strong>* <em>æ–‡æœ¬æ•°æ®é¢„å¤„ç†</em>*</p>
<p>æ— è®ºRAGç³»ç»Ÿçš„æ¶æ„è®¾è®¡å¦‚ä½•æ¼”è¿›ï¼ŒåŸºäºæ•°æ®é©±åŠ¨çš„æœ¬è´¨ç‰¹æ€§å†³å®šäº†â€Œé«˜ä¿¡å™ªæ¯”æ•°æ®â€Œå§‹ç»ˆå…·æœ‰æ ¸å¿ƒä»·å€¼ã€‚åœ¨æ£€ç´¢æµç¨‹å‰å¯¹åŸå§‹æ•°æ®çš„ä¼˜åŒ–ç­–ç•¥å¯å½’çº³ä¸ºä»¥ä¸‹å…³é”®æ–¹æ³•ï¼š</p>
<p><strong>â€Œå®ä½“è§£æâ€Œ</strong></p>
<p>é€šè¿‡æ¶ˆæ­§å®ç°å®ä½“ä¸æœ¯è¯­çš„ç»Ÿä¸€å¼•ç”¨ã€‚ä¾‹å¦‚å°†"LLM"ã€"å¤§è¯­è¨€æ¨¡å‹"å’Œ"å¤§æ¨¡å‹"æ˜ å°„ä¸ºæ ‡å‡†åŒ–æœ¯è¯­ä½“ç³»ã€‚</p>
<p><strong>â€Œæ–‡æ¡£åˆ’åˆ†â€Œ</strong></p>
<p>éœ€ç§‘å­¦è§„åˆ’æ–‡æ¡£ä¸»é¢˜åˆ†å¸ƒç­–ç•¥ï¼šåŒç±»ä¸»é¢˜æ–‡æ¡£åº”é‡‡å–é›†ä¸­å­˜å‚¨è¿˜æ˜¯åˆ†å¸ƒå¼å­˜æ”¾ï¼Ÿå½“äººç±»ä¸“å®¶éƒ½æ— æ³•å¿«é€Ÿå®šä½ç›¸å…³æ–‡æ¡£æ—¶ï¼Œæ£€ç´¢ç³»ç»Ÿå¿…ç„¶é¢ä¸´ç›¸åŒå›°å¢ƒã€‚</p>
<p><strong>â€Œæ•°æ®å¢å¼ºâ€Œ</strong></p>
<p>å¼•å…¥åŒä¹‰æ›¿æ¢ã€è¯­ä¹‰é‡æ„åŠå¤šè¯­è¨€ç¿»è¯‘ç­‰æ‰‹æ®µï¼Œæ˜¾è‘—æå‡çŸ¥è¯†åº“çš„è¯­ä¹‰è¦†ç›–ç»´åº¦ã€‚</p>
<p><strong>â€Œæ—¶æ•ˆæ•°æ®å¤„ç†â€Œ</strong></p>
<p>é’ˆå¯¹åŠ¨æ€æ›´æ–°é¢†åŸŸï¼ˆå¦‚æ—¶æ•ˆæ€§å†…å®¹ï¼‰ï¼Œéœ€å»ºç«‹æ–‡æ¡£ç‰ˆæœ¬æ§åˆ¶æœºåˆ¶ï¼Œè‡ªåŠ¨æ ‡è®°æˆ–æ·˜æ±°è¿‡æ—¶ä¿¡æ¯ã€‚</p>
<p><strong>â€Œå…ƒæ•°æ®æ‰©å±•â€Œ</strong></p>
<p>è¡¥å……å†…å®¹æ‘˜è¦ã€æ›´æ–°æ—¶é—´æˆ³ã€æ½œåœ¨ç”¨æˆ·æŸ¥è¯¢ç­‰ç»“æ„åŒ–ä¿¡æ¯ï¼Œæ„å»ºå¤šç»´åº¦çš„çŸ¥è¯†è¡¨å¾ä½“ç³»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/367419e3b0b54bf7b26117662f7a3615~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875969&amp;x-signature=AP5igDm8Rryow9t5oYbI22XrI6o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>äºŒã€æ–‡æœ¬åˆ†å—</strong></p>
<p>åœ¨çŸ¥è¯†åº“æ£€ç´¢åœºæ™¯ä¸­ï¼Œæ•°æ®è§„æ¨¡é€šå¸¸è¿œè¶…LLMçš„è¾“å…¥å®¹é‡é™åˆ¶ï¼Œå› æ­¤æœ‰æ•ˆçš„åˆ†å—ç­–ç•¥éœ€è¦åœ¨æ»¡è¶³é•¿åº¦çº¦æŸçš„å‰æä¸‹ï¼Œå…¼é¡¾å—é—´å·®å¼‚æ€§ä¸å—å†…ä¸€è‡´æ€§ã€‚</p>
<p>è¿™æ˜¯ç†è®ºä¸Šçš„æœ€ä¼˜è§£ï¼Œä½†å®é™…æ–‡æœ¬å¾€å¾€å‘ˆç°æ•£æ–‡ç‰¹å¾â€”â€”æ®µè½é—´ç•Œé™æ¨¡ç³Šã€å†…å®¹æ¾æ•£ä¸”ç¯‡å¹…å†—é•¿ã€‚</p>
<p>æˆ‘ä»¬æ— æ³•é¢„å…ˆå®ç°ç»å¯¹å®Œç¾çš„å†…å®¹åˆ†å—ï¼Œæ¯•ç«Ÿåç»­æœ‰LLMè¿™ç±»æ™ºèƒ½æ¨¡å‹æ¥æ¶ˆåŒ–å¤„ç†ï¼Œæˆ‘ä»¬æä¾›çš„æ–‡æœ¬å—æœ¬è´¨ä¸Šæ˜¯"æç¤º"è€Œéå®Œæ•´ç­”æ¡ˆã€‚</p>
<p>å°½ç®¡å¦‚æ­¤ï¼Œä»éœ€ç¡®ä¿ä¼ é€’ç»™LLMçš„æ˜¯æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œè€Œéå¹²æ‰°å…¶æ³¨æ„åŠ›çš„å™ªå£°ã€‚ä»¥ä¸‹æ˜¯å‡ ç§è¿›é˜¶åˆ†å—æŠ€æœ¯æ–¹æ¡ˆï¼š</p>
<p><strong>å¥åˆ†å‰²</strong>ï¼šå€ŸåŠ©NLTKæˆ–spaCyç­‰åº“çš„å¥å­åˆ‡åˆ†èƒ½åŠ›ï¼Œç°ä»£å¼€å‘æ¡†æ¶å¦‚langchainå‡å·²å†…ç½®è¯¥åŠŸèƒ½</p>
<p><strong>é€’å½’</strong>* <em>åˆ†å‰²</em>*ï¼šé‡‡ç”¨åˆ†å±‚åˆ†å—ç­–ç•¥ï¼Œlangchainæ¡†æ¶ä¼šå…ˆæŒ‰åŒæ¢è¡Œç¬¦(\n\n)åˆ†å‰²æ®µè½ï¼Œè‹¥å—ä½“è¶…å‡ºé˜ˆå€¼åˆ™ç»§ç»­ç”¨å•æ¢è¡Œç¬¦(\n)ç»†åˆ†ï¼Œæœ€ç»ˆå¯ç»†åŒ–åˆ°ç©ºæ ¼æˆ–å¥å·çº§åˆ†å‰²ã€‚</p>
<p>è¿™ç§åŠ¨æ€è°ƒæ•´æœºåˆ¶èƒ½é€‚åº”ä¸åŒå¯†åº¦æ–‡æœ¬â€”â€”ä¿¡æ¯å¯†é›†åŒºéœ€è¦æ›´ç»†ç²’åº¦åˆ†å‰²ï¼Œè€Œå†…å®¹ç¨€ç–åŒºå¯é‡‡ç”¨è¾ƒå¤§åŒºå—</p>
<p><strong>è¯­ä¹‰</strong>* <em>åˆ†å‰²</em>*ï¼šåŸºäºæ–‡æœ¬å‘é‡ç›¸ä¼¼åº¦è®¡ç®—å®ç°è¯­ä¹‰å•å…ƒåˆ’åˆ†</p>
<p><strong>ç»“æ„åŒ–å¤„ç†</strong>ï¼šé’ˆå¯¹Markdown/LaTeX/JSONç­‰ç‰¹æ®Šæ ¼å¼çš„ä¸“ç”¨åˆ†å‰²å™¨ï¼Œèƒ½å®Œæ•´ä¿ç•™æ–‡æ¡£åŸå§‹ç»“æ„</p>
<p>åˆ†å—å°ºå¯¸çš„ç¡®å®šéœ€ç»¼åˆè€ƒè™‘åµŒå…¥æ¨¡å‹ç‰¹æ€§ã€æ–‡æ¡£ç±»å‹åŠæŸ¥è¯¢å¤æ‚åº¦ã€‚å¤„ç†å­¦æœ¯è®ºæ–‡ç­‰é•¿æ–‡æœ¬æ—¶ï¼Œè¾ƒå¤§åŒºå—æœ‰åˆ©äºç»´æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼›åˆ†æç¤¾äº¤åª’ä½“çŸ­æ–‡æœ¬åˆ™é€‚åˆè¾ƒå°åŒºå—ã€‚</p>
<p>å½“ç”¨æˆ·æŸ¥è¯¢ç®€æ´å…·ä½“æ—¶å»ºè®®é‡‡ç”¨å°åŒºå—ï¼Œå¤æ‚æŸ¥è¯¢åˆ™éœ€è¦æ›´å¤§ä¸Šä¸‹æ–‡æ”¯æŒã€‚å®è·µè¡¨æ˜ï¼Œç»è¿‡åå¤æµ‹è¯•éªŒè¯ï¼Œ128tokençš„åŒºå—å°ºå¯¸åœ¨å¤šæ•°åœºæ™¯ä¸‹è¡¨ç°æœ€ä¼˜ï¼Œå¯ä½œä¸ºåŸºå‡†å‚æ•°è¿›è¡Œåç»­è°ƒä¼˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c2490c3d2404e77bf02c12d94aab099~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875969&amp;x-signature=y0exTkwqR8yxmwskbslUXmcWuPM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸‰ã€åµŒå…¥</strong></p>
<p>æ•°æ®å¤„ç†çš„æœ€ç»ˆç¯èŠ‚æ¶‰åŠæ–‡æœ¬æ•°æ®çš„ç±»å‹è½¬æ¢ï¼Œå³é€šè¿‡åµŒå…¥ï¼ˆEmbeddingï¼‰æ¨¡å‹å°†æ–‡æœ¬æ•°æ®å‘é‡åŒ–ï¼ˆVectorizationï¼‰ï¼Œä¸ºåç»­çš„å‘é‡æ£€ç´¢ï¼ˆVector Retrievalï¼‰åšå‡†å¤‡ã€‚</p>
<p>åœ¨åµŒå…¥è¿‡ç¨‹ä¸­ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹æ³•ä¼˜åŒ–æ€§èƒ½ï¼š</p>
<p><strong>åŠ¨æ€åµŒå…¥</strong>ï¼šåŠ¨æ€åµŒå…¥èƒ½æœ‰æ•ˆè§£å†³ä¸€è¯å¤šä¹‰é—®é¢˜ã€‚ä»¥"å…‰ç›˜"ä¸ºä¾‹ï¼Œåœ¨"æˆ‘ä¹°äº†ä¸€å¼ å…‰ç›˜"ä¸­ï¼Œå®ƒæŒ‡å®ä½“å…‰ç›˜ï¼›è€Œåœ¨"å…‰ç›˜è¡ŒåŠ¨"ä¸­ï¼Œåˆ™è¡¨ç¤º"åƒå®Œç›˜ä¸­é£Ÿç‰©"çš„è¡Œä¸ºã€‚</p>
<p>é™æ€åµŒå…¥çš„å‘é‡è¡¨ç¤ºæ˜¯å›ºå®šçš„ï¼Œè€Œé‡‡ç”¨è‡ªæ³¨æ„åŠ›æœºåˆ¶çš„æ¨¡å‹ï¼ˆå¦‚BERTï¼‰èƒ½åŠ¨æ€è°ƒæ•´è¯ä¹‰ï¼Œä½¿åŒä¸€è¯æ±‡åœ¨ä¸åŒè¯­å¢ƒä¸‹è·å¾—å·®å¼‚åŒ–å‘é‡è¡¨ç¤ºã€‚</p>
<p><strong>åµŒå…¥æ¨¡å‹å¾®è°ƒâ€Œ</strong>ï¼šå¤šæ•°åµŒå…¥æ¨¡å‹åŸºäºé€šç”¨è¯­æ–™è®­ç»ƒï¼Œé’ˆå¯¹å‚ç›´é¢†åŸŸæ—¶ï¼Œå¯é€šè¿‡å¾®è°ƒæå‡æ¨¡å‹å¯¹ä¸“ä¸šè¯æ±‡çš„ç†è§£èƒ½åŠ›ï¼Œç¡®ä¿å…¶å¹³ç­‰å¯¹å¾…é¢†åŸŸæœ¯è¯­å’Œé€šç”¨è¯æ±‡ï¼Œé¿å…æ³¨æ„åŠ›åˆ†æ•£ã€‚</p>
<p><strong>æ··åˆåµŒå…¥</strong>ï¼šåˆ†åˆ«ä¸ºç”¨æˆ·æŸ¥è¯¢å’ŒçŸ¥è¯†åº“æ–‡æœ¬é€‰æ‹©ä¸åŒçš„åµŒå…¥æ¨¡å‹ï¼Œä»¥é€‚é…å„è‡ªçš„è¯­è¨€ç‰¹å¾å’Œè¯­ä¹‰éœ€æ±‚ã€‚</p>
<p><strong>å››ã€</strong>* <em>æŸ¥è¯¢ä¼˜åŒ–</em>*</p>
<p>åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œç”¨æˆ·è¡¨è¾¾çš„å¤šæ ·æ€§å’Œæ¨¡ç³Šæ€§å¸¸ä¼šå¯¼è‡´æ£€ç´¢ç³»ç»Ÿçš„å¬å›ç‡ä¸å‡†ç¡®ç‡ä¸‹é™ã€‚</p>
<p>ä¸ºæå‡æ£€ç´¢æ•ˆæœï¼Œéœ€å¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œä¼˜åŒ–å¤„ç†ï¼Œä»¥æ ‡å‡†åŒ–å’Œæ‰©å……æŸ¥è¯¢ä¿¡æ¯ï¼Œä»è€Œå¸®åŠ©ç³»ç»Ÿæ›´ç²¾å‡†åœ°å®šä½ç›¸å…³æ–‡æ¡£ã€‚</p>
<p>ä¸»è¦çš„æŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯åŒ…æ‹¬ï¼š</p>
<p><strong>â€ŒæŸ¥è¯¢é‡å†™â€Œ</strong></p>
<p>åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹(LLM)çš„æç¤ºåŠŸèƒ½ï¼Œæˆ–éƒ¨ç½²ç»è¿‡å¾®è°ƒçš„ä¸“ç”¨"é—®é¢˜é‡å†™å™¨"(é€šå¸¸åŸºäºå°å‹Transformeræ¶æ„)ï¼Œå¯¹åŸå§‹æŸ¥è¯¢è¿›è¡Œè¯­ä¹‰ç­‰ä»·æ”¹å†™ã€‚</p>
<p><strong>â€Œåé€€æç¤ºâ€Œ</strong></p>
<p>å¼•å¯¼LLMç”Ÿæˆä¸€ä¸ªæ›´é«˜å±‚çº§çš„æŠ½è±¡é—®é¢˜(ç§°ä¸º"åé€€"é—®é¢˜)ã€‚è¯¥é—®é¢˜çš„æŠ½è±¡ç¨‹åº¦éœ€æ ¹æ®ä»»åŠ¡éœ€æ±‚åŠ¨æ€è°ƒæ•´ï¼Œæœ€ç»ˆå°†åé€€é—®é¢˜ä¸åŸå§‹æŸ¥è¯¢å…±åŒç”¨äºæ£€ç´¢ã€‚</p>
<p>ä¾‹å¦‚ï¼šé¢å¯¹"Estella Leopoldåœ¨1954å¹´8æœˆè‡³11æœˆæœŸé—´å°±è¯»äºå“ªæ‰€å­¦æ ¡ï¼Ÿ"è¿™ç±»å«ç²¾ç¡®æ—¶é—´é™åˆ¶çš„æŸ¥è¯¢æ—¶ï¼Œè¡¥å……æé—®"Estella Leopoldçš„æ•™è‚²èƒŒæ™¯å¦‚ä½•ï¼Ÿ"èƒ½æ˜¾è‘—æå‡æ£€ç´¢æ•ˆæœã€‚</p>
<p><strong>â€Œåç»­è¿½é—®â€Œ</strong></p>
<p>é€šè¿‡LLMåŸºäºå¯¹è¯ä¸Šä¸‹æ–‡ç”Ÿæˆç‹¬ç«‹é—®é¢˜ï¼Œç‰¹åˆ«é€‚ç”¨äºä¸¤ç§åœºæ™¯ï¼š</p>
<p>åç»­é—®é¢˜ä¾èµ–å‰åºå¯¹è¯çš„ä¸Šä¸‹æ–‡(å¦‚ç”¨æˆ·å…ˆè¯¢é—®"åœ¨æ„å¤§åˆ©çš„æ´»åŠ¨æ¨è"ï¼Œå†è¿½é—®"å½“åœ°ç‰¹è‰²ç¾é£Ÿ"æ—¶ï¼Œéœ€ä¿ç•™ä½ç½®ä¸Šä¸‹æ–‡)</p>
<p>éœ€æ•´åˆæœ€è¿‘kæ¡å¯¹è¯è®°å½•ã€‚è‹¥æ–°é—®é¢˜ä¸å†å²å¯¹è¯æ— å…³ï¼Œå¯èƒ½å¯¼è‡´æ£€ç´¢ç»“æœåç¦»ä¸»é¢˜ã€‚</p>
<p>â€Œ<strong>å‡è®¾æ–‡æ¡£ç”Ÿæˆ</strong>(HyDE)â€Œ</p>
<p>è¯¥æ–¹æ³•è¦æ±‚LLMåœ¨æ— å¤–éƒ¨çŸ¥è¯†çš„æƒ…å†µä¸‹ï¼Œå…ˆä¸ºæŸ¥è¯¢ç”Ÿæˆå‡è®¾æ€§å›ç­”ï¼Œå†å°†æ­¤å‡è®¾ä¸åŸå§‹æŸ¥è¯¢è”åˆç”¨äºå‘é‡æ£€ç´¢ã€‚è™½ç„¶å‡è®¾å†…å®¹å¯èƒ½åŒ…å«ä¸å‡†ç¡®ä¿¡æ¯ï¼Œä½†èƒ½æ­ç¤ºLLMè®¤ä¸ºç›¸å…³çš„æ–‡æ¡£ç‰¹å¾æ¨¡å¼ã€‚</p>
<p><strong>â€Œå¤šç»´åº¦æŸ¥è¯¢â€Œ</strong></p>
<p>é€šè¿‡LLMä»ä¸åŒè§†è§’ä¸ºåŸå§‹é—®é¢˜è¡ç”Ÿå¤šä¸ªå­é—®é¢˜ï¼Œåˆ†åˆ«è¿›è¡Œæ£€ç´¢åï¼Œé‡‡ç”¨RRF(ç»“æœå†èåˆ)æˆ–é‡æ’åºæŠ€æœ¯æ•´åˆç»“æœã€‚ä¾‹å¦‚ï¼šé’ˆå¯¹"çº¢è¢œé˜Ÿä¸çˆ±å›½è€…é˜Ÿè°æ˜¯æœ€æ–°æ€»å† å†›ï¼Ÿ"å¯æ‹†åˆ†ä¸ºï¼š</p>
<p>çº¢è¢œé˜Ÿä¸Šæ¬¡å¤ºå† æ—¶é—´</p>
<p>çˆ±å›½è€…é˜Ÿä¸Šæ¬¡å¤ºå† æ—¶é—´</p>
<p><strong>äº”ã€æ£€ç´¢</strong></p>
<p>æ£€ç´¢ï¼ˆRetrievalï¼‰çš„æ ¸å¿ƒç›®æ ‡å§‹ç»ˆæ˜¯ç¡®ä¿æœ€ç›¸å…³æ–‡æ¡£çš„è·å–ï¼Œæˆ–è‡³å°‘ä½¿æœ€ç›¸å…³æ–‡æ¡£å‡ºç°åœ¨è¿”å›ç»“æœä¸­ã€‚ä¸ºå®ç°è¿™ä¸€ç›®æ ‡ï¼Œå¯é‡‡ç”¨ä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<p><strong>â€Œä¸Šä¸‹æ–‡ç²¾ç®€â€Œ</strong>ï¼šè¿‡å¤§çš„æ–‡æ¡£å—ä¼šå¼•å…¥å†—ä½™ä¿¡æ¯ï¼Œä¸ä»…å¢åŠ LLMè°ƒç”¨æˆæœ¬ï¼Œè¿˜å¯èƒ½é™ä½å“åº”è´¨é‡ã€‚é€šè¿‡LLMè¾…åŠ©çš„ä¸Šä¸‹æ–‡åˆ†æï¼Œå¯å¯¹æ–‡æ¡£å†…å®¹è¿›è¡Œæ™ºèƒ½å‹ç¼©ï¼Œæˆ–é€‰æ‹©æ€§æå–å…³é”®ä¿¡æ¯è¿›è¡Œè¿”å›ã€‚</p>
<p><strong>â€Œç›¸é‚»æ–‡æœ¬æ‰©å±•â€Œ</strong>ï¼šè¿‡å°çš„æ–‡æ¡£å—ä¼šå‰²è£‚ä¸Šä¸‹æ–‡å…³è”ã€‚çª—å£æœç´¢æŠ€æœ¯é€šè¿‡åŒ¹é…ç›®æ ‡æ–‡æ¡£å—æ—¶ï¼ŒåŒæ­¥è¿”å›å…¶ç›¸é‚»æ–‡æœ¬å—ä½œä¸ºè¡¥å……ä¸Šä¸‹æ–‡ï¼Œä»è€Œå¢å¼ºLLMå¯¹å®Œæ•´è¯­ä¹‰é“¾çš„ç†è§£ã€‚</p>
<p><strong>â€Œå±‚çº§æ–‡æ¡£æ£€ç´¢â€Œ</strong>ï¼šè¯¥æ–¹æ³•é‡‡ç”¨æ–‡æ¡£åˆ†çº§ç­–ç•¥â€”â€”å°†åŸå§‹æ–‡æ¡£åˆ’åˆ†ä¸ºå®è§‚ä¸»æ–‡æ¡£å’Œå¾®è§‚å­æ–‡æ¡£ä¸¤çº§ç»“æ„ã€‚ç³»ç»Ÿä¼˜å…ˆåŒ¹é…å­æ–‡æ¡£ï¼Œä½†æœ€ç»ˆè¿”å›å…¶æ‰€å±çš„å®Œæ•´ä¸»æ–‡æ¡£ï¼Œå…¼é¡¾æ£€ç´¢ç²¾åº¦ä¸ä¸Šä¸‹æ–‡å®Œæ•´æ€§ã€‚</p>
<p><strong>â€Œæ™ºèƒ½èšåˆæ£€ç´¢â€Œ</strong>ï¼šä½œä¸ºçˆ¶æ–‡æ¡£æœç´¢çš„å‡çº§æ–¹æ¡ˆï¼Œè¯¥æ–¹æ³•æ„å»ºä¸‰å±‚æ ‘çŠ¶æ–‡æ¡£ç»“æ„ï¼ˆé¡¶å±‚1024å­—ç¬¦/ä¸­é—´å±‚512å­—ç¬¦/åº•å±‚128å­—ç¬¦ï¼‰ã€‚</p>
<p>æ£€ç´¢æ—¶ä»…åŒ¹é…åº•å±‚èŠ‚ç‚¹ï¼Œå½“æŸçˆ¶èŠ‚ç‚¹ä¸‹å¤šæ•°å­èŠ‚ç‚¹åŒ¹é…æ—¶ï¼Œåˆ™è¿”å›è¯¥çˆ¶èŠ‚ç‚¹å†…å®¹ï¼Œå®ç°åŠ¨æ€ä¸Šä¸‹æ–‡æ‰©å±•ã€‚</p>
<p><strong>â€Œå¤šæ¨¡æ€æ£€ç´¢èåˆâ€Œ</strong>ï¼šRAGç³»ç»Ÿä½œä¸ºå¼€æ”¾åŸŸé—®ç­”æ¶æ„ï¼Œéœ€é€šè¿‡æ··åˆæ£€ç´¢æŠ€æœ¯æå‡äº‹å®è¦†ç›–ç‡ã€‚</p>
<p>é€šè¿‡å‘é‡æ£€ç´¢ä¸å…³é”®è¯æ£€ç´¢çš„ååŒåº”ç”¨ï¼Œå¯å……åˆ†å‘æŒ¥ä¸åŒæ£€ç´¢æŠ€æœ¯çš„ä¼˜åŠ¿ã€‚ä¾‹å¦‚ï¼Œç»„åˆè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—ä¸ç²¾ç¡®å…³é”®è¯åŒ¹é…ï¼Œèƒ½æ˜¾è‘—æå‡æ£€ç´¢æ¨¡å—çš„å…¨é¢æ€§ã€‚</p>
<p><strong>â€Œæ™ºèƒ½ç´¢å¼•è·¯ç”±â€Œ</strong>ï¼šé’ˆå¯¹å¤šç±»å‹æŸ¥è¯¢éœ€æ±‚ï¼ˆå¦‚æ‘˜è¦ç”Ÿæˆã€ç²¾ç¡®é—®ç­”ã€æ—¶æ•ˆæ€§æŸ¥è¯¢ç­‰ï¼‰ï¼Œç³»ç»Ÿéœ€å»ºç«‹ä¸“ä¸šç´¢å¼•åº“å¹¶é€šè¿‡è·¯ç”±æœºåˆ¶è‡ªåŠ¨åˆ†é…æŸ¥è¯¢è¯·æ±‚ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½±è§†æ¨èç±»æŸ¥è¯¢ä¼šè¢«ä¼˜å…ˆå¯¼å‘å¨±ä¹å†…å®¹ç´¢å¼•ï¼ŒåŒæ—¶è§¦å‘çƒ­ç‚¹è¯é¢˜ç´¢å¼•çš„ååŒæ£€ç´¢ã€‚</p>
<p><strong>â€Œè‡ªä¸»å†³ç­–ä»£ç†â€Œ</strong>ï¼šé€šè¿‡Agentæ™ºèƒ½ä½“åŠ¨æ€é€‰æ‹©æ£€ç´¢ç­–ç•¥ï¼Œæ”¯æŒå•æ–¹æ³•æˆ–å¤šæ–¹æ³•ç»„åˆè°ƒç”¨ï¼ˆä¸²è¡Œæˆ–å¹¶è¡Œï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒæŸ¥è¯¢"2024å¹´AIæŠ€æœ¯è¶‹åŠ¿"æ—¶ï¼ŒAgentä¼šè‡ªåŠ¨ä¸²è”å­¦æœ¯æ–‡çŒ®ç´¢å¼•ä¸è¡Œä¸šæŠ¥å‘Šç´¢å¼•ï¼Œå®ç°å¤šç»´ä¿¡æ¯æ•´åˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae55141416734c3faec46d782ae000c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765875969&amp;x-signature=ZzVRusoGZAMLcsLWBuvmnxuRvSQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å…­ã€</strong>* <em>æ£€ç´¢åå¤„ç†</em>*</p>
<p>"æ£€ç´¢åå¤„ç†"è¿™ä¸€èŒƒç•´æœ¬èº«å…·æœ‰ç›¸å½“çš„åŒ…å®¹æ€§ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯å¯¹åˆæ­¥è·å–çš„æ£€ç´¢ç»“æœå®æ–½ä¼˜åŒ–å¤„ç†ï¼Œä»è€Œä¸ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„åç»­ç”Ÿæˆæä¾›æ›´ä¼˜è´¨çš„è¾“å…¥ã€‚</p>
<p>å…¶ä¸­æœ€å…·ä»£è¡¨æ€§çš„æŠ€æœ¯å½“å±é‡æ’åºï¼ˆRerankï¼‰ã€‚</p>
<p>è™½ç„¶å‘é‡æ£€ç´¢é€šè¿‡è¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—å®ç°äº†åˆæ­¥ç­›é€‰ï¼Œä½†è¯­ä¹‰é«˜åº¦åŒ¹é…çš„æ–‡æ¡£æœªå¿…ä¸æŸ¥è¯¢éœ€æ±‚å®Œå…¨å¥‘åˆã€‚</p>
<p>é‡æ’åºæœºåˆ¶é€šè¿‡å¤šç»´åº¦ç›¸å…³æ€§åˆ†æï¼ˆåŒ…æ‹¬æŸ¥è¯¢æ„å›¾è§£æã€è¯æ±‡å¤šä¹‰æ€§æ¶ˆæ­§ã€ç”¨æˆ·è¡Œä¸ºæ¨¡å¼æŒ–æ˜åŠä¸Šä¸‹æ–‡å…³è”åˆ†æç­‰ï¼‰ï¼Œå¯¹åˆå§‹ç»“æœåˆ—è¡¨è¿›è¡Œæ™ºèƒ½ä¼˜åŒ–ã€‚</p>
<p>å½“å‰å®ç°æ–¹æ¡ˆä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼šä¸€æ˜¯é€šè¿‡LLMæŒ‡ä»¤è°ƒä¼˜å®ç°åŠ¨æ€é‡æ’.</p>
<p>äºŒæ˜¯é‡‡ç”¨ä¸“ä¸šé‡æ’åºæ¨¡å‹ï¼ˆå¦‚å•†ä¸šåŒ–çš„Cohereï¼Œä»¥åŠå¼€æºçš„BAAI/bge-rerankerå’ŒIBMçš„Dense Passage Re-Rankerç­‰ï¼‰</p>
<p>è¿™ç±»æ¨¡å‹é€šè¿‡ç»¼åˆè¯„ä¼°æ›´ä¸°å¯Œçš„ç‰¹å¾ç»´åº¦ï¼Œç¡®ä¿æœ€ç»ˆå‘ˆç°çš„æ–‡æ¡£æ’åºä¸ç”¨æˆ·çœŸå®éœ€æ±‚é«˜åº¦ä¸€è‡´ã€‚</p>
<p><strong>ä¸ƒã€ç”Ÿæˆ</strong></p>
<p>åœ¨ç”Ÿæˆï¼ˆGenerationï¼‰é˜¶æ®µçš„ä¼˜åŒ–éœ€èšç„¦ç”¨æˆ·ä½“éªŒæå‡ï¼Œå…·ä½“å¯ä»ä»¥ä¸‹ç»´åº¦å®æ–½ï¼š</p>
<p><strong>â€Œå¤šè½®å¯¹è¯æœºåˆ¶â€Œ</strong></p>
<p>é‡‡ç”¨å¸¦èŠå¤©å†å²çš„RAGæŠ€æœ¯ï¼ˆä»¥AIæœç´¢é¢†åŸŸæ ‡æ†äº§å“Perplexityä¸ºä¾‹ï¼‰ï¼Œé€šè¿‡è¿ç»­å¯¹è¯äº¤äº’å¸®åŠ©ç”¨æˆ·æ·±åº¦è§£æé—®é¢˜ã€‚</p>
<p>è¿™ç§è®¾è®¡å…è®¸ç”¨æˆ·åœ¨å¤šè½®é—®ç­”ä¸­é€æ­¥æ˜ç¡®éœ€æ±‚ï¼Œæœ€ç»ˆè·å¾—ç²¾å‡†è§£ç­”ã€‚</p>
<p><strong>â€Œæ™ºèƒ½è¿½é—®ç­–ç•¥â€Œ</strong></p>
<p>åœ¨promptä¸­æ¤å…¥åŠ¨æ€è¿½é—®é€»è¾‘ï¼š"å½“èƒŒæ™¯çŸ¥è¯†æ— æ³•ç›´æ¥å›ç­”é—®é¢˜æ—¶ï¼Œéœ€åŸºäºæ£€ç´¢å†…å®¹å‘èµ·è¿½é—®ï¼Œä¸”å•æ¬¡è¿½é—®ä¸è¶…è¿‡3ä¸ªé—®é¢˜"ã€‚</p>
<p>è¯¥æœºåˆ¶è™½ä¾èµ–å¤§æ¨¡å‹åŸºç¡€èƒ½åŠ›ï¼Œå´èƒ½æ˜¾è‘—æå‡äº¤äº’ä½“éªŒâ€”â€”ç”¨æˆ·é€šè¿‡å¼•å¯¼å¼å¯¹è¯ä¸æ–­æ¾„æ¸…éœ€æ±‚ï¼Œæœ€ç»ˆåŒ¹é…æœ€ä¼˜ç­”æ¡ˆã€‚</p>
<p><strong>â€Œpromptç²¾ç»†åŒ–è®¾è®¡â€Œ</strong></p>
<p>RAGç³»ç»Ÿçš„promptéœ€ä¸¥æ ¼å£°æ˜å›ç­”è¾¹ç•Œï¼Œä¾‹å¦‚ï¼š"ä½œä¸ºæ™ºèƒ½å®¢æœï¼Œä½ éœ€åŸºäºç»™å®šä¸Šä¸‹æ–‡æä¾›å‡†ç¡®ä¿¡æ¯ï¼Œé¿å…å¼•å…¥å¤–éƒ¨çŸ¥è¯†ã€‚å›ç­”åº”ç®€æ´å‹å¥½ï¼Œä¼˜å…ˆè§£å†³ç”¨æˆ·æ ¸å¿ƒé—®é¢˜"ã€‚</p>
<p>åŒæ—¶å¯æ ¹æ®åœºæ™¯éœ€æ±‚çµæ´»è°ƒæ•´ï¼š</p>
<p>å¿…è¦æ—¶å…è®¸æ¨¡å‹èå…¥é€‚åº¦ä¸»è§‚åˆ†æ</p>
<p>é‡‡ç”¨Few-shotå­¦ä¹ èŒƒå¼æŒ‡å¯¼LLMé«˜æ•ˆåˆ©ç”¨æ£€ç´¢çŸ¥è¯†</p>
<p>â€Œåé¦ˆé©±åŠ¨è¿­ä»£â€Œ</p>
<p>å»ºç«‹ç”¨æˆ·åé¦ˆé—­ç¯ç³»ç»Ÿï¼Œé€šè¿‡çœŸå®äº¤äº’æ•°æ®æŒç»­ä¼˜åŒ–çŸ¥è¯†åº“ï¼Œå¹¶å¯¹ä¿¡æ¯å¯ä¿¡åº¦è¿›è¡ŒåŠ¨æ€æ ‡æ³¨ã€‚è¿™ç§å®æ—¶æ›´æ–°æœºåˆ¶èƒ½æœ‰æ•ˆæå‡ç³»ç»Ÿå“åº”è´¨é‡ã€‚</p>
<p><strong>å…«ã€æœ€å</strong></p>
<p>ä¸Šè¿°æ–¹æ³•å‡ä¸ºåŸºç¡€RAGåœ¨å„ç¯èŠ‚çš„ä¼˜åŒ–ç­–ç•¥ï¼Œå®é™…åº”ç”¨ä¸­éœ€æ³¨æ„ï¼š</p>
<ol>
<li>
<p>ä¸åŒæ–¹æ³•çš„æ•ˆæœå­˜åœ¨å·®å¼‚ï¼›</p>
</li>
<li>
<p>éœ€æ ¹æ®å…·ä½“é—®é¢˜é€‰æ‹©é’ˆå¯¹æ€§æ–¹æ¡ˆï¼›</p>
</li>
<li>
<p>é€šè¿‡é€‚é…åº”ç”¨åœºæ™¯çš„ä¼˜åŒ–ç»„åˆï¼Œæ‰èƒ½å®ç°RAGæ•ˆç”¨çš„æœ€å¤§åŒ–ã€‚</p>
</li>
</ol>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªé€ å¾®å‰ç«¯]]></title>    <link>https://juejin.cn/post/7581481178823524371</link>    <guid>https://juejin.cn/post/7581481178823524371</guid>    <pubDate>2025-12-09T08:32:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581481178823524371" data-draft-id="7581350888789901348" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªé€ å¾®å‰ç«¯"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-09T08:32:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ggbond"/> <meta itemprop="url" content="https://juejin.cn/user/290743919315255"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªé€ å¾®å‰ç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/290743919315255/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ggbond
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T08:32:27.000Z" title="Tue Dec 09 2025 08:32:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>èµ·å› æ˜¯ï¼Œæˆ‘è¦åœ¨ä¸€ä¸ªå¤§å‹åå°ç®¡ç†åº”ç”¨ä¸­å‰¥ç¦»å‡ºä¸€ä¸ªç®¡ç†æ¨¡å—ï¼Œè¿™æ ·åšçš„å¥½å¤„å½“ç„¶æ˜¯å¯ä»¥å•ç‹¬å¼€å‘å’Œå‘å¸ƒï¼Œä½†æ˜¯åå¤„ä¹Ÿæœ‰ï¼Œæ¯”å¦‚éƒ¨åˆ†å…¨å±€å˜é‡æ±¡æŸ“ï¼ŒUIä¸ä¸€è‡´ï¼ŒçŠ¶æ€é€šä¿¡ä¼ å¯¼ç­‰ã€‚è™½ç„¶å¸‚é¢ä¸Šå·²ç»æœ‰å¾ˆå¤šå¾®å‰ç«¯æ–¹æ¡ˆäº†ï¼Œæ¯”å¦‚qiankunç­‰ï¼Œä½†æ˜¯è¿™éƒ½éœ€è¦å¯¹è¿™ä¸ªå¤§ä»“åº“åº”ç”¨è¿›è¡Œå¤§åŠ¨å·¥ï¼Œå¯¹åŸåº”ç”¨é€ æˆä¸€äº›è´Ÿè½½å’Œå¯èƒ½æ„æƒ³ä¸åˆ°çš„é”™è¯¯ï¼Œéæˆ‘æ‰€æ„¿ä¹Ÿï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘æ‰“ç®—è‡ªå·±æä¸ªç®€åŒ–çš„æ–¹æ¡ˆã€‚
åŸåº”ç”¨æ˜¯react+dvaï¼Œ</p>
<h2 data-id="heading-0">åŸºåº§åº”ç”¨æ”¹é€ </h2>
<p>æˆ‘ä»¬è®¾è®¡çš„ä¸»åº”ç”¨æ ¸å¿ƒæ˜¯ï¼›</p>
<ol>
<li>ä¸»åº”ç”¨ä¸ç›´æ¥æ‰“åŒ…å­åº”ç”¨çš„ä»£ç ï¼Œè€Œæ˜¯è¿è¡Œæ—¶æŒ‰éœ€åŠ è½½å­åº”ç”¨çš„Â JSÂ èµ„æºã€‚</li>
<li>å°†å­åº”ç”¨çš„è·¯ç”±æ³¨å†Œåˆ°ä¸»åº”ç”¨çš„è·¯ç”±ç³»ç»Ÿä¸­ï¼Œå®ç°æ— ç¼è·³è½¬ã€‚</li>
<li>é€šè¿‡å…¨å±€å˜é‡ï¼ˆ<code>window</code>ï¼‰å…±äº«åº“ï¼Œé¿å…é‡å¤åŠ è½½,ä¹Ÿå¯å½¢æˆå•ä¾‹ã€‚
æˆ‘ä»¬å…ˆæ”¹é€ å­åº”ç”¨è·¯ç”±ä»£ç ï¼Œä¸ºäº†è§£å†³åˆšæ‰è¯´çš„UIå’Œä¸€äº›é‡è¦åº“ä¸ä¸€è‡´é—®é¢˜ï¼Œæˆ‘ä»¬å°†ç›´æ¥æš´éœ²åº“åˆ°Windowä¸­ï¼Œæœ‰ï¼š</li>
<li>antd</li>
<li>Reactä¸»åº“
å¦å¤–çŠ¶æ€é€šä¿¡çš„é—®é¢˜ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨dvaå»ä¿®é¥°å–å¾—çš„å­åº”ç”¨Comï¼Œå¹¶æŠŠéƒ¨åˆ†æ–¹æ³•å¦‚connectæš´éœ²åˆ°windowä¸­ã€‚</li>
</ol>
<p>ä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-ini" lang="ini">import React from 'react'<span class="hljs-comment">;</span>
import {
  Alert,
  Drawer,
} from 'antd'<span class="hljs-comment">;</span>
import { connect } from 'dva'<span class="hljs-comment">;</span>

<span class="hljs-attr">window.React</span> = React<span class="hljs-comment">;</span>
<span class="hljs-attr">window.CONNECT</span> = connect<span class="hljs-comment">;</span>
<span class="hljs-attr">window.Antd_ZI</span> = {
  Drawer,
  Alert,
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">configUrl</span> = {
  test: 'https://zi.test.cn',
  product: 'https://zi.prod.com',
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">env</span> = <span class="hljs-string">'product'</span><span class="hljs-comment">;</span>

const <span class="hljs-attr">mapStateToProps</span> = (state) =&gt; {
  const <span class="hljs-attr">currentState</span> = state.adManage<span class="hljs-comment">;</span>
  const { userAuth, userInfo } = state.app<span class="hljs-comment">;</span>
  return { ...currentState, userAuth, userInfo }<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">insertScript</span> = (e, isStyle = <span class="hljs-literal">false</span>) =&gt; {
  return new Promise((reslove, reject) =&gt; {
    const <span class="hljs-attr">i</span> = isStyle ? document.createElement(<span class="hljs-string">'link'</span>) : document.createElement(<span class="hljs-string">'script'</span>)<span class="hljs-comment">;</span>
    isStyle || i.setAttribute('type', 'text/javascript')<span class="hljs-comment">;</span>
    isStyle || i.setAttribute('src', e)<span class="hljs-comment">;</span>
    isStyle &amp;&amp; i.setAttribute('href', e)<span class="hljs-comment">;</span>
    isStyle &amp;&amp; i.setAttribute('rel', 'stylesheet')<span class="hljs-comment">;</span>
    isStyle &amp;&amp; i.setAttribute('type', 'text/css')<span class="hljs-comment">;</span>
    function onload() {
      if (!(this.readyState &amp;&amp; this.readyState !== 'loaded' &amp;&amp; this.readyState !== 'complete')) {
        <span class="hljs-attr">i.onload</span> = null<span class="hljs-comment">;</span>
        <span class="hljs-attr">i.onreadystatechange</span> = i.<span class="hljs-literal">on</span>load<span class="hljs-comment">;</span>
        reslove()<span class="hljs-comment">;</span>
      }
    }
    function onerror(ee) {
      reject(ee)<span class="hljs-comment">;</span>
    }
    <span class="hljs-attr">i.onreadystatechange</span> = <span class="hljs-literal">on</span>load<span class="hljs-comment">;</span>
    <span class="hljs-attr">i.onload</span> = <span class="hljs-literal">on</span>load<span class="hljs-comment">;</span>
    <span class="hljs-attr">i.onerror</span> = <span class="hljs-literal">on</span>error<span class="hljs-comment">;</span>
    document.querySelector('head').appendChild(i)<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

function ERROR() {
  return 'åŠ è½½é™æ€èµ„æºå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'<span class="hljs-comment">;</span>
}

const <span class="hljs-attr">subappRoutes</span> = []<span class="hljs-comment">;</span>

const <span class="hljs-attr">AyncComponent</span> = async (pathname) =&gt; {
  const <span class="hljs-attr">id</span> = pathname<span class="hljs-comment">;</span>
  // å­å·¥ç¨‹èµ„æºæ˜¯å¦åŠ è½½å®Œæˆ
  let <span class="hljs-attr">ayncLoaded</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
  if (subappRoutes<span class="hljs-section">[id]</span>) {
    // å¦‚æœå·²ç»åŠ è½½è¿‡è¯¥å­å·¥ç¨‹çš„æ¨¡å—ï¼Œåˆ™ä¸å†åŠ è½½ï¼Œç›´æ¥å–ç¼“å­˜çš„routes
    <span class="hljs-attr">ayncLoaded</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
  } else if (window.ziPLATFORMSLOT &amp;&amp; window.ziPLATFORMSLOT<span class="hljs-section">[pathname]</span>) {
    const <span class="hljs-attr">res</span> = await window.ziPLATFORMSLOT[pathname]()<span class="hljs-comment">;</span>
    subappRoutes<span class="hljs-section">[id]</span> = res.default<span class="hljs-comment">;</span>
    <span class="hljs-attr">ayncLoaded</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
    // return subappRoutes<span class="hljs-section">[id]</span><span class="hljs-comment">;</span>
  } else {
    try {
      await insertScript(`${configUrl<span class="hljs-section">[env]</span>}/js/index.js?<span class="hljs-attr">_</span>=<span class="hljs-variable">${new Date().getTime()}</span>`)<span class="hljs-comment">;</span>
      if (window.ziPLATFORMSLOT &amp;&amp; window.ziPLATFORMSLOT<span class="hljs-section">[pathname]</span>) {
        const <span class="hljs-attr">res</span> = await window.ziPLATFORMSLOT[pathname]()<span class="hljs-comment">;</span>
        subappRoutes<span class="hljs-section">[id]</span> = res.default<span class="hljs-comment">;</span>
        <span class="hljs-attr">ayncLoaded</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
      }
    } catch (error) {
      console.log('åŠ è½½jså¤±è´¥', error)<span class="hljs-comment">;</span>
    }
  }
  return ayncLoaded ? connect(mapStateToProps)(subappRoutes<span class="hljs-section">[id]</span>) : ERROR<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

export default <span class="hljs-section">[
  {
    name: 'èµ„æºç®¡ç†',
    path: 'ziMedia',
    component: () =&gt; AyncComponent('ziMedia'),
  },
  {
    name: 'é»‘åå•ç®¡ç†',
    path: 'ziBlack',
    component: () =&gt; AyncComponent('ziBlack'),
  },
]</span><span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-1">å­åº”ç”¨æ”¹é€ </h2>
<p>å­åº”ç”¨ä¸­ï¼Œå…¥å£æ–‡ä»¶æˆ‘ä»¬éœ€è¦å®šä¹‰publicPathä¿è¯èµ„æºçš„æ­£ç¡®å¼•ç”¨</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> configUrl = {
  <span class="hljs-attr">test</span>: <span class="hljs-string">'https://zi.test.cn'</span>,
  <span class="hljs-attr">product</span>: <span class="hljs-string">'https://zi.prod.com'</span>,
};

<span class="hljs-keyword">const</span> env = <span class="hljs-string">'product'</span>;
<span class="hljs-comment">// webpack çš„é­”æ³•å˜é‡ï¼Œç”¨äºæŒ‡å®šå¼‚æ­¥åŠ è½½çš„ JS/CSS æ–‡ä»¶çš„åŸºåœ°å€ï¼ˆå¦‚Â `import()`Â åŠ¨æ€å¯¼å…¥çš„æ¨¡å—ï¼‰</span>
__webpack_public_path__ = <span class="hljs-string">`<span class="hljs-subst">${configUrl[env]}</span>/js/`</span>;

<span class="hljs-keyword">const</span> routes = {
  <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>,
  <span class="hljs-attr">ziMedia</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ziMedia/index'</span>),
  <span class="hljs-attr">ziBlack</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ziBlack/index'</span>),
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> routes;
</code></pre>
<p>åœ¨å­åº”ç”¨çš„é¡µé¢ä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸éœ€è¦åšæ”¹é€ ï¼Œä½†æ˜¯åœ¨webpackçš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬åœ¨baseä¸­éœ€è¦:</p>
<pre><code class="hljs language-css" lang="css">{
    ...
    output:{
        ...
          libraryExport: <span class="hljs-string">'default'</span>,
          library: <span class="hljs-string">'ziPLATFORMSLOT'</span>,
          libraryTarget: <span class="hljs-string">'umd'</span>,
          umdNamedDefine: true,
    },
    externals: {
      'react': <span class="hljs-string">'React'</span>,
      <span class="hljs-string">'antd'</span>: <span class="hljs-string">'Antd_ZI'</span>,
      // <span class="hljs-string">'react-dom'</span>:<span class="hljs-string">'ReactDOM'</span>
    }
}
</code></pre>
<p>åœ¨prodé…ç½®ä¸­ï¼Œä¸ºäº†ä¿è¯å­jsèƒ½æ­£ç¡®åŠ è½½æ‰§è¡Œï¼Œæˆ‘ä»¬ä½¿ç”¨InlineChunkHtmlPluginæ’ä»¶ï¼Œé¿å…å¾®å‰ç«¯ç¯å¢ƒä¸‹å› è·¯å¾„é—®é¢˜å¯¼è‡´è¿è¡Œæ—¶è„šæœ¬åŠ è½½å¤±è´¥ã€‚
è‡³æ­¤ï¼Œå®Œæˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯„ç”Ÿç»„åˆç»§æ‰¿ vs ES6 ç±»ç»§æ‰¿ æ·±åº¦å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7581658157145342002</link>    <guid>https://juejin.cn/post/7581658157145342002</guid>    <pubDate>2025-12-09T08:48:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581658157145342002" data-draft-id="7581667332306124838" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯„ç”Ÿç»„åˆç»§æ‰¿ vs ES6 ç±»ç»§æ‰¿ æ·±åº¦å¯¹æ¯”"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-09T08:48:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹‹æ’å›"/> <meta itemprop="url" content="https://juejin.cn/user/2261046026312318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯„ç”Ÿç»„åˆç»§æ‰¿ vs ES6 ç±»ç»§æ‰¿ æ·±åº¦å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2261046026312318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹‹æ’å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T08:48:18.000Z" title="Tue Dec 09 2025 08:48:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-estuary-light">.hljs-comment,.hljs-quote{color:#6c6b5a}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ba6236}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#ae7313}.hljs-bullet,.hljs-string,.hljs-symbol{color:#7d9726}.hljs-section,.hljs-title{color:#36a166}.hljs-keyword,.hljs-selector-tag{color:#5f9182}.hljs-addition,.hljs-deletion{color:#22221b;display:inline-block;width:100%}.hljs-deletion{background-color:#ba6236}.hljs-addition{background-color:#7d9726}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f4f3ec;color:#5f5e4e}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¯„ç”Ÿç»„åˆç»§æ‰¿ï¼ˆParasitic Combination Inheritanceï¼‰</h2>
<h3 data-id="heading-1">å®ç°æ–¹å¼</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// çˆ¶ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">colors</span> = [<span class="hljs-string">'red'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'green'</span>];
}

<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayName</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Parent name:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
};

<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayColors</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Parent colors:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">colors</span>);
};

<span class="hljs-comment">// å­ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-comment">// æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆç»§æ‰¿å®ä¾‹å±æ€§ï¼‰</span>
  <span class="hljs-title class_">Parent</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-comment">// åŸå‹ç»§æ‰¿ï¼ˆç»§æ‰¿æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">inheritPrototype</span>(<span class="hljs-params">child, parent</span>) {
  <span class="hljs-comment">// åˆ›å»ºçˆ¶ç±»åŸå‹çš„å‰¯æœ¬</span>
  <span class="hljs-keyword">const</span> prototype = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(parent.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
  <span class="hljs-comment">// ä¿®å¤ constructor æŒ‡å‘</span>
  prototype.<span class="hljs-property">constructor</span> = child;
  <span class="hljs-comment">// è®¾ç½®å­ç±»åŸå‹</span>
  child.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = prototype;
}

<span class="hljs-comment">// åº”ç”¨å¯„ç”Ÿç»„åˆç»§æ‰¿</span>
<span class="hljs-title function_">inheritPrototype</span>(<span class="hljs-title class_">Child</span>, <span class="hljs-title class_">Parent</span>);

<span class="hljs-comment">// æ·»åŠ å­ç±»æ–¹æ³•</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayAge</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Child age:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>);
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> child1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">'Alice'</span>, <span class="hljs-number">10</span>);
child1.<span class="hljs-property">colors</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'black'</span>);
child1.<span class="hljs-title function_">sayName</span>();    <span class="hljs-comment">// Parent name: Alice</span>
child1.<span class="hljs-title function_">sayAge</span>();     <span class="hljs-comment">// Child age: 10</span>
child1.<span class="hljs-title function_">sayColors</span>();  <span class="hljs-comment">// Parent colors: ["red", "blue", "green", "black"]</span>

<span class="hljs-keyword">const</span> child2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">'Bob'</span>, <span class="hljs-number">12</span>);
child2.<span class="hljs-title function_">sayColors</span>();  <span class="hljs-comment">// Parent colors: ["red", "blue", "green"]</span>
</code></pre>
<h2 data-id="heading-2">2. ES6 ç±»ç»§æ‰¿</h2>
<h3 data-id="heading-3">å®ç°æ–¹å¼</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// çˆ¶ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">colors</span> = [<span class="hljs-string">'red'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'green'</span>];
  }
  
  <span class="hljs-title function_">sayName</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Parent name:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  }
  
  <span class="hljs-title function_">sayColors</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Parent colors:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">colors</span>);
  }
  
  <span class="hljs-comment">// é™æ€æ–¹æ³•</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">staticMethod</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'This is a static method'</span>);
  }
}

<span class="hljs-comment">// å­ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Parent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">super</span>(name);  <span class="hljs-comment">// å¿…é¡»è°ƒç”¨ super</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  }
  
  <span class="hljs-title function_">sayAge</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Child age:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>);
  }
  
  <span class="hljs-comment">// é‡å†™çˆ¶ç±»æ–¹æ³•</span>
  <span class="hljs-title function_">sayName</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">sayName</span>();  <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'And I am a child'</span>);
  }
  
  <span class="hljs-comment">// é™æ€æ–¹æ³•ä¹Ÿå¯ä»¥ç»§æ‰¿</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">childStaticMethod</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">staticMethod</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Child static method'</span>);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> child1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">'Alice'</span>, <span class="hljs-number">10</span>);
child1.<span class="hljs-property">colors</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'black'</span>);
child1.<span class="hljs-title function_">sayName</span>();    <span class="hljs-comment">// Parent name: Alice \n And I am a child</span>
child1.<span class="hljs-title function_">sayAge</span>();     <span class="hljs-comment">// Child age: 10</span>
child1.<span class="hljs-title function_">sayColors</span>();  <span class="hljs-comment">// Parent colors: ["red", "blue", "green", "black"]</span>

<span class="hljs-title class_">Child</span>.<span class="hljs-title function_">childStaticMethod</span>();  <span class="hljs-comment">// é™æ€æ–¹æ³•è°ƒç”¨</span>
</code></pre>
<h2 data-id="heading-4">3. è¯¦ç»†å¯¹æ¯”</h2>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>å¯„ç”Ÿç»„åˆç»§æ‰¿</th><th>ES6 ç±»ç»§æ‰¿</th></tr></thead><tbody><tr><td><strong>è¯­æ³•</strong>â€‹</td><td>å‡½æ•° + åŸå‹</td><td>ç±»è¯­æ³•ç³–</td></tr><tr><td><strong>å¯è¯»æ€§</strong>â€‹</td><td>è¾ƒä½</td><td>é«˜</td></tr><tr><td><strong>ç»§æ‰¿åŸç†</strong>â€‹</td><td>åŸå‹é“¾ + æ„é€ å‡½æ•°</td><td>åŸºäºåŸå‹é“¾</td></tr><tr><td><strong>é™æ€æ–¹æ³•</strong>â€‹</td><td>éœ€æ‰‹åŠ¨å¤„ç†</td><td>åŸç”Ÿæ”¯æŒ</td></tr><tr><td><strong>ç§æœ‰å­—æ®µ</strong>â€‹</td><td>æ— ç›´æ¥æ”¯æŒ</td><td>ES2022+ æ”¯æŒ</td></tr><tr><td><strong>super è°ƒç”¨</strong>â€‹</td><td>éœ€æ‰‹åŠ¨å®ç°</td><td>åŸç”Ÿæ”¯æŒ</td></tr><tr><td><strong>new.target</strong>â€‹</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>constructor</strong>â€‹</td><td>éœ€æ‰‹åŠ¨è®¾ç½®</td><td>è‡ªåŠ¨è®¾ç½®</td></tr></tbody></table>
<h2 data-id="heading-5">4. æ€§èƒ½å¯¹æ¯”</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ€§èƒ½æµ‹è¯•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceTest</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">testParasitic</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params">name</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    }
    <span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getName</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>; };
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">name</span>) {
      <span class="hljs-title class_">Parent</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
    }
    <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
    <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; i++) {
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">'test'</span> + i);
    }
    
    <span class="hljs-keyword">return</span> performance.<span class="hljs-title function_">now</span>() - start;
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">testES6</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span> {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; }
      <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>; }
    }
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Parent</span> {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) { <span class="hljs-variable language_">super</span>(name); }
    }
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; i++) {
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">'test'</span> + i);
    }
    
    <span class="hljs-keyword">return</span> performance.<span class="hljs-title function_">now</span>() - start;
  }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯„ç”Ÿç»„åˆç»§æ‰¿è€—æ—¶:'</span>, <span class="hljs-title class_">PerformanceTest</span>.<span class="hljs-title function_">testParasitic</span>().<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>), <span class="hljs-string">'ms'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ES6 ç±»ç»§æ‰¿è€—æ—¶:'</span>, <span class="hljs-title class_">PerformanceTest</span>.<span class="hljs-title function_">testES6</span>().<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>), <span class="hljs-string">'ms'</span>);

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// å¯„ç”Ÿç»„åˆç»§æ‰¿è€—æ—¶: 26.49 ms</span>
<span class="hljs-comment">// ES6 ç±»ç»§æ‰¿è€—æ—¶: 13.97 ms</span>
</code></pre>
<p><strong>æ€§èƒ½ç»“æœ</strong>ï¼š</p>
<ul>
<li>ES6 ç±»ç»§æ‰¿é€šå¸¸<strong>æ›´å¿«</strong>ï¼ˆV8 ä¼˜åŒ–ï¼‰</li>
<li>å¯„ç”Ÿç»„åˆç»§æ‰¿<strong>ç¨æ…¢</strong>ä½†å·®å¼‚å¾ˆå°</li>
<li>å®é™…åº”ç”¨å·®å¼‚å¯å¿½ç•¥ä¸è®¡</li>
</ul>
<h2 data-id="heading-6">5. ç‰¹æ€§è¯¦è§£</h2>
<h3 data-id="heading-7">5.1 åŸå‹é“¾</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯„ç”Ÿç»„åˆç»§æ‰¿</span>
<span class="hljs-keyword">const</span> child1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">'Alice'</span>, <span class="hljs-number">10</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child1.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child1.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child1 <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Child</span>);  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child1 <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Parent</span>);  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child1 <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>);  <span class="hljs-comment">// true</span>

<span class="hljs-comment">// ES6 ç±»ç»§æ‰¿</span>
<span class="hljs-keyword">const</span> child2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">'Bob'</span>, <span class="hljs-number">12</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(child2) === <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(child2)) === <span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child2 <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Child</span>);  <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child2 <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Parent</span>);  <span class="hljs-comment">// true</span>
</code></pre>
<h3 data-id="heading-8">5.2 é™æ€æˆå‘˜ç»§æ‰¿</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯„ç”Ÿç»„åˆç»§æ‰¿ï¼ˆéœ€æ‰‹åŠ¨å®ç°ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property">staticMethod</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">'Animal static'</span>; };

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Dog</span>.<span class="hljs-property">__proto__</span> = <span class="hljs-title class_">Animal</span>;  <span class="hljs-comment">// ç»§æ‰¿é™æ€æ–¹æ³•</span>
<span class="hljs-title class_">Dog</span>.<span class="hljs-title function_">staticMethod</span>();  <span class="hljs-comment">// 'Animal static'</span>

<span class="hljs-comment">// æˆ–</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(<span class="hljs-title class_">Dog</span>, <span class="hljs-title class_">Animal</span>);

<span class="hljs-comment">// ES6 ç±»ç»§æ‰¿ï¼ˆè‡ªåŠ¨ç»§æ‰¿ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">staticMethod</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">'Animal static'</span>; }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">dogStatic</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">'Dog static'</span>; }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Dog</span>.<span class="hljs-title function_">staticMethod</span>());  <span class="hljs-comment">// 'Animal static'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Dog</span>.<span class="hljs-title function_">dogStatic</span>());    <span class="hljs-comment">// 'Dog static'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-title class_">Dog</span>) === <span class="hljs-title class_">Animal</span>);  <span class="hljs-comment">// true</span>
</code></pre>
<h3 data-id="heading-9">5.3 æ–¹æ³•é‡å†™</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯„ç”Ÿç»„åˆç»§æ‰¿</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speak</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">'Animal sound'</span>; };

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Dog</span>;

<span class="hljs-comment">// é‡å†™æ–¹æ³•</span>
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speak</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span>
  <span class="hljs-keyword">const</span> parentSpeak = <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speak</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);
  <span class="hljs-keyword">return</span> parentSpeak + <span class="hljs-string">' and Woof!'</span>;
};

<span class="hljs-comment">// ES6 ç±»ç»§æ‰¿</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">speak</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">'Animal sound'</span>; }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">speak</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">speak</span>() + <span class="hljs-string">' and Woof!'</span>;
  }
}
</code></pre>
<h2 data-id="heading-10">6. ä¼˜ç¼ºç‚¹å¯¹æ¯”</h2>
<h3 data-id="heading-11">å¯„ç”Ÿç»„åˆç»§æ‰¿çš„ä¼˜ç‚¹</h3>
<ol>
<li><strong>å…¼å®¹æ€§æå¥½</strong>ï¼šæ”¯æŒæ‰€æœ‰æµè§ˆå™¨</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// IE6+ éƒ½æ”¯æŒ</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Object</span>.<span class="hljs-property">create</span> !== <span class="hljs-string">'function'</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-property">create</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) {
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params"/>) {}
    F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = o;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
  };
}
</code></pre>
<ol>
<li><strong>æ›´çµæ´»</strong>ï¼šæ‰‹åŠ¨æ§åˆ¶ç»§æ‰¿é€»è¾‘</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯ä»¥é€‰æ‹©æ€§ç»§æ‰¿</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createMixin</span>(<span class="hljs-params">baseClass, mixin</span>) {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">MixedClass</span>(<span class="hljs-params"/>) {
    baseClass.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);
    mixin.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);
  }
  <span class="hljs-title class_">MixedClass</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(baseClass.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-title class_">MixedClass</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, mixin.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">MixedClass</span>;
}
</code></pre>
<ol>
<li><strong>å†…å­˜æ•ˆç‡</strong>ï¼šå¯ä¼˜åŒ–åŸå‹é“¾æ·±åº¦</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰å¹³åŒ–åŸå‹é“¾</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createFlatInheritance</span>(<span class="hljs-params">parent, child</span>) {
  <span class="hljs-comment">// åˆå¹¶åŸå‹æ–¹æ³•ï¼Œå‡å°‘æŸ¥æ‰¾æ·±åº¦</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> parent.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) {
    <span class="hljs-keyword">if</span> (parent.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
      child.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>[key] = parent.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>[key];
    }
  }
}
</code></pre>
<h3 data-id="heading-12">å¯„ç”Ÿç»„åˆç»§æ‰¿çš„ç¼ºç‚¹</h3>
<ol>
<li><strong>è¯­æ³•ç¹ç</strong>ï¼Œæ˜“å‡ºé”™</li>
<li><strong>ç§æœ‰å­—æ®µä¸æ”¯æŒ</strong>ï¼Œéœ€ç”¨é—­åŒ…æ¨¡æ‹Ÿ</li>
<li><strong>é™æ€æ–¹æ³•</strong>éœ€æ‰‹åŠ¨å¤„ç†</li>
<li><strong>å¯è¯»æ€§å·®</strong></li>
</ol>
<h3 data-id="heading-13">ES6 ç±»ç»§æ‰¿çš„ä¼˜ç‚¹</h3>
<ol>
<li><strong>è¯­æ³•ç®€æ´</strong>ï¼Œæ˜“äºç†è§£</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">height, width</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = height;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = width;
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">area</span>() { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>; }
}
</code></pre>
<ol start="2">
<li><strong>å†…ç½® super</strong>ï¼Œæ–¹ä¾¿è°ƒç”¨çˆ¶ç±»</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Rectangle</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">side</span>) {
    <span class="hljs-variable language_">super</span>(side, side);
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">area</span>() {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Calculating square area...'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-property">area</span>;
  }
}
</code></pre>
<ol start="3">
<li><strong>æ”¯æŒé™æ€æ–¹æ³•å’Œå­—æ®µ</strong></li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
  <span class="hljs-keyword">static</span> staticField = <span class="hljs-string">'static'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">staticMethod</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">'static method'</span>; }
  #privateField = <span class="hljs-string">'private'</span>;
}
</code></pre>
<ol start="4">
<li><strong>æ›´å¥½çš„å·¥å…·æ”¯æŒ</strong>ï¼ˆTypeScriptã€IDEï¼‰</li>
</ol>
<h3 data-id="heading-14">ES6 ç±»ç»§æ‰¿çš„ç¼ºç‚¹</h3>
<ol>
<li><strong>è¯­æ³•ç³–</strong>ï¼Œå®é™…è¿˜æ˜¯åŸå‹ç»§æ‰¿</li>
<li><strong>å¿…é¡»ç”¨ new è°ƒç”¨</strong>ï¼Œä¸èƒ½å½“æ™®é€šå‡½æ•°31.  <strong>æ²¡æœ‰ç§æœ‰æ–¹æ³•</strong>ï¼ˆES2022+ æ‰æœ‰ï¼‰</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šæ—§æµè§ˆå™¨éœ€è½¬è¯‘</li>
<li><strong>æŸäº›ç‰¹æ€§é™åˆ¶</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">method</span> = <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ç®­å¤´å‡½æ•°ï¼Œthis ç»‘å®š */</span> };
  }
  <span class="hljs-comment">// ä¸èƒ½è¿™æ ·å†™ï¼š</span>
  <span class="hljs-comment">// property = () =&gt; { };  // ES7+ æ‰æ”¯æŒ</span>
}
</code></pre>
<h2 data-id="heading-15">7. è½¬è¯‘ç»“æœå¯¹æ¯”</h2>
<h3 data-id="heading-16">Babel è½¬è¯‘ ES6 ç±»ç»§æ‰¿</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ES6</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; }
  <span class="hljs-title function_">say</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Parent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">super</span>(name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  }
}

<span class="hljs-comment">// Babel è½¬è¯‘å</span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">_inherits</span>(<span class="hljs-params">subClass, superClass</span>) {
  subClass.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(superClass &amp;&amp; superClass.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, {
    <span class="hljs-attr">constructor</span>: { <span class="hljs-attr">value</span>: subClass, <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span> }
  });
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(subClass, superClass);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">_createSuper</span>(<span class="hljs-params">Derived</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">_createSuperInternal</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">var</span> <span class="hljs-title class_">Super</span> = <span class="hljs-title function_">_getPrototypeOf</span>(<span class="hljs-title class_">Derived</span>);
    <span class="hljs-keyword">var</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">construct</span>(<span class="hljs-title class_">Super</span>, <span class="hljs-variable language_">arguments</span>, <span class="hljs-title function_">_getPrototypeOf</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-property">constructor</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_possibleConstructorReturn</span>(<span class="hljs-variable language_">this</span>, result);
  };
}

<span class="hljs-keyword">var</span> <span class="hljs-title class_">Parent</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
};

<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">say</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">say</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
};

<span class="hljs-keyword">var</span> <span class="hljs-title class_">Child</span> = <span class="hljs-comment">/*#__PURE__*/</span><span class="hljs-keyword">function</span> (<span class="hljs-params">_Parent</span>) {
  <span class="hljs-title function_">_inherits</span>(<span class="hljs-title class_">Child</span>, _Parent);
  <span class="hljs-keyword">var</span> _super = <span class="hljs-title function_">_createSuper</span>(<span class="hljs-title class_">Child</span>);
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-keyword">var</span> _this;
    _this = _super.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
    _this.<span class="hljs-property">age</span> = age;
    <span class="hljs-keyword">return</span> _this;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Child</span>;
}(<span class="hljs-title class_">Parent</span>);
</code></pre>
<h2 data-id="heading-17">8. å®é™…åº”ç”¨å»ºè®®</h2>
<h3 data-id="heading-18">é€‚åˆä½¿ç”¨å¯„ç”Ÿç»„åˆç»§æ‰¿çš„åœºæ™¯</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. éœ€è¦æ”¯æŒ IE çš„é¡¹ç›®</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; 
    <span class="hljs-regexp">/MSIE|Trident/</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-property">userAgent</span>)) {
  <span class="hljs-comment">// ä½¿ç”¨å¯„ç”Ÿç»„åˆç»§æ‰¿</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">IECompatibleClass</span>(<span class="hljs-params"/>) {}
}

<span class="hljs-comment">// 2. éœ€è¦æ·±åº¦å®šåˆ¶ç»§æ‰¿é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createCustomInheritance</span>(<span class="hljs-params">SuperClass, mixins</span>) {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomClass</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">SuperClass</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
    mixins.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">mixin</span> =&gt;</span> {
      mixin.<span class="hljs-property">init</span> &amp;&amp; mixin.<span class="hljs-property">init</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
    });
  }
  
  <span class="hljs-title class_">CustomClass</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">SuperClass</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
  mixins.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">mixin</span> =&gt;</span> {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-title class_">CustomClass</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, mixin.<span class="hljs-property">methods</span>);
  });
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">CustomClass</span>;
}
</code></pre>
<h3 data-id="heading-19">é€‚åˆä½¿ç”¨ ES6 ç±»ç»§æ‰¿çš„åœºæ™¯</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. ç°ä»£å‰ç«¯æ¡†æ¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> };
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{this.state.count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
}

<span class="hljs-comment">// 2. Node.js æœåŠ¡ç«¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config;
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MySQLService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">DatabaseService</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">sql</span>) { <span class="hljs-comment">/* ... */</span> }
}

<span class="hljs-comment">// 3. éœ€è¦ç±»å‹æ£€æŸ¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> name !== <span class="hljs-string">'string'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Name must be a string'</span>);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }
}
</code></pre>
<h2 data-id="heading-20">9. æ··åˆä½¿ç”¨æ¨¡å¼ï¼ˆä¸€èˆ¬ç”¨ä¸åˆ°ï¼‰</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç»“åˆä¸¤ç§æ–¹å¼</span>
<span class="hljs-comment">// ä½¿ç”¨ç±»ä½œä¸ºåŸºç¡€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EventEmitter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span> = {};
  }
  
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, listener</span>) {
    (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event] || (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event] = [])).<span class="hljs-title function_">push</span>(listener);
  }
  
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, ...args</span>) {
    (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event] || []).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> <span class="hljs-title function_">listener</span>(...args));
  }
}

<span class="hljs-comment">// ä½¿ç”¨å¯„ç”Ÿç»„åˆç»§æ‰¿æ‰©å±•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createObservable</span>(<span class="hljs-params">SuperClass</span>) {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">Observable</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">SuperClass</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = [];
  }
  
  <span class="hljs-title class_">Observable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">SuperClass</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
  <span class="hljs-title class_">Observable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Observable</span>;
  
  <span class="hljs-title class_">Observable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">subscribe</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">observer</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">push</span>(observer);
  };
  
  <span class="hljs-title class_">Observable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">notify</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> <span class="hljs-title function_">observer</span>(data));
  };
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Observable</span>;
}

<span class="hljs-comment">// ç»„åˆä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Model</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">createObservable</span>(<span class="hljs-title class_">EventEmitter</span>) {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data;
  }
  
  <span class="hljs-title function_">set</span>(<span class="hljs-params">key, value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>[key] = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notify</span>({ key, value });
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'change'</span>, { key, value });
  }
}
</code></pre>
<h2 data-id="heading-21">10. æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-22">ç°ä»£é¡¹ç›®</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä½¿ç”¨ ES6 ç±»ç»§æ‰¿</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config;
  }
  
  <span class="hljs-title function_">validateConfig</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// éªŒè¯é…ç½®</span>
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Method not implemented'</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-variable language_">super</span>(config);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateConfig</span>();
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®ç°åˆå§‹åŒ–</span>
  }
}
</code></pre>
<h3 data-id="heading-23">éœ€è¦å…¼å®¹æ€§çš„é¡¹ç›®</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä½¿ç”¨æ¨¡å—åŒ–çš„å¯„ç”Ÿç»„åˆç»§æ‰¿</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createClass</span>(<span class="hljs-params">superClass, definition</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = definition.<span class="hljs-property">constructor</span> || <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    superClass.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
  };
  
  <span class="hljs-comment">// åŸå‹ç»§æ‰¿</span>
  <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(superClass.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
  <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>;
  
  <span class="hljs-comment">// æ··å…¥æ–¹æ³•</span>
  <span class="hljs-keyword">if</span> (definition.<span class="hljs-property">methods</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, definition.<span class="hljs-property">methods</span>);
  }
  
  <span class="hljs-comment">// é™æ€æ–¹æ³•ç»§æ‰¿</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(<span class="hljs-title class_">Child</span>, superClass);
  
  <span class="hljs-comment">// æ·»åŠ é™æ€æ–¹æ³•</span>
  <span class="hljs-keyword">if</span> (definition.<span class="hljs-property">statics</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-title class_">Child</span>, definition.<span class="hljs-property">statics</span>);
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Child</span>;
}
</code></pre>
<h2 data-id="heading-24">æ€»ç»“</h2>








































<table><thead><tr><th>æ–¹é¢</th><th>æ¨èé€‰æ‹©</th><th>åŸå› </th></tr></thead><tbody><tr><td><strong>ç°ä»£ Web é¡¹ç›®</strong>â€‹</td><td>ES6 ç±»ç»§æ‰¿</td><td>è¯­æ³•ç®€æ´ï¼Œå·¥å…·æ”¯æŒå¥½</td></tr><tr><td><strong>åº“/æ¡†æ¶å¼€å‘</strong>â€‹</td><td>ES6 ç±»ç»§æ‰¿</td><td>æ›´å¥½çš„å¼€å‘ä½“éªŒ</td></tr><tr><td><strong>éœ€è¦æ”¯æŒæ—§ IE</strong>â€‹</td><td>å¯„ç”Ÿç»„åˆç»§æ‰¿</td><td>å…¼å®¹æ€§å¥½</td></tr><tr><td><strong>æ€§èƒ½å…³é”®</strong>â€‹</td><td>ES6 ç±»ç»§æ‰¿</td><td>ç°ä»£å¼•æ“ä¼˜åŒ–å¥½</td></tr><tr><td><strong>ä»£ç å¯è¯»æ€§</strong>â€‹</td><td>ES6 ç±»ç»§æ‰¿</td><td>è¯­æ³•æ›´æ¸…æ™°</td></tr><tr><td><strong>å›¢é˜Ÿç†Ÿæ‚‰åº¦</strong>â€‹</td><td>å›¢é˜Ÿç†Ÿæ‚‰çš„</td><td>é™ä½å­¦ä¹ æˆæœ¬</td></tr></tbody></table>
<p><strong>æœ€ç»ˆå»ºè®®</strong>ï¼š</p>
<ul>
<li>æ–°é¡¹ç›®ä¸€å¾‹ä½¿ç”¨ <strong>ES6 ç±»ç»§æ‰¿</strong></li>
<li>æ—§é¡¹ç›®ç»´æŠ¤æ—¶ï¼Œå¦‚æœå·²ç»æ˜¯å¯„ç”Ÿç»„åˆç»§æ‰¿ï¼Œå¯ä¿æŒ</li>
<li>éœ€è¦ç‰¹æ®Šç»§æ‰¿æ¨¡å¼æ—¶ï¼Œå¯æ··ç”¨ä¸¤ç§æ–¹å¼</li>
<li>å§‹ç»ˆè€ƒè™‘å›¢é˜Ÿæˆå‘˜æŠ€èƒ½å’Œé¡¹ç›®éœ€æ±‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptç±»å‹å˜å½¢è®°ï¼šå½“ä»£ç å¼€å§‹â€œä¸æ­£ç»â€åœ°è½¬æ¢èº«ä»½]]></title>    <link>https://juejin.cn/post/7581481178823671827</link>    <guid>https://juejin.cn/post/7581481178823671827</guid>    <pubDate>2025-12-09T08:59:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581481178823671827" data-draft-id="7581210455827431460" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptç±»å‹å˜å½¢è®°ï¼šå½“ä»£ç å¼€å§‹â€œä¸æ­£ç»â€åœ°è½¬æ¢èº«ä»½ "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-09T08:59:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ±‰å ¡å¤§ç‹9527"/> <meta itemprop="url" content="https://juejin.cn/user/643629279092743"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptç±»å‹å˜å½¢è®°ï¼šå½“ä»£ç å¼€å§‹â€œä¸æ­£ç»â€åœ°è½¬æ¢èº«ä»½ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/643629279092743/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ±‰å ¡å¤§ç‹9527
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T08:59:00.000Z" title="Tue Dec 09 2025 08:59:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨JavaScriptçš„ä¸–ç•Œé‡Œï¼Œç±»å‹è½¬æ¢å°±åƒä¸€åœºé­”æœ¯è¡¨æ¼”â€”â€”æœ‰æ—¶æ˜¯ç²¾å½©çš„æ˜¾ç¤ºå˜æ¢ï¼Œæœ‰æ—¶æ˜¯æš—ç®±æ“ä½œçš„éšå¼è½¬æ¢ã€‚ä»Šå¤©æˆ‘ä»¬æ¥æ­ç§˜è¿™åœºé­”æœ¯è¡¨æ¼”çš„çœŸé¢çº±ï¼</p>
<h2 data-id="heading-0">==vs===</h2>
<p><code>==</code>åœ¨æ¯”è¾ƒæ—¶ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œè€Œ<code>===</code>ä¸ä¼šè¿›è¡Œç±»å‹è½¬æ¢ï¼Œè¦æ±‚å€¼å’Œç±»å‹éƒ½å¿…é¡»ç›¸åŒã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// === ä¸¥æ ¼ç›¸ç­‰ï¼šç±»å‹å’Œå€¼éƒ½å¿…é¡»ç›¸åŒ
<span class="hljs-attr">1</span> === <span class="hljs-number">1</span><span class="hljs-comment">;      // true</span>
<span class="hljs-attr">'1'</span> === <span class="hljs-string">'1'</span><span class="hljs-comment">;  // true</span>
<span class="hljs-attr">1</span> === <span class="hljs-string">'1'</span><span class="hljs-comment">;    // falseï¼ˆç±»å‹ä¸åŒï¼‰</span>

// == å®½æ¾ç›¸ç­‰ï¼šä¼šè¿›è¡Œç±»å‹è½¬æ¢åæ¯”è¾ƒ
<span class="hljs-attr">1</span> == <span class="hljs-string">'1'</span><span class="hljs-comment">;     // trueï¼ˆå­—ç¬¦ä¸²'1'è½¬æ¢ä¸ºæ•°å­—1ï¼‰</span>
<span class="hljs-attr">0</span> == <span class="hljs-literal">false</span><span class="hljs-comment">;   // trueï¼ˆfalseè½¬æ¢ä¸º0ï¼‰</span>
<span class="hljs-attr">null</span> == undefined<span class="hljs-comment">; // trueï¼ˆç‰¹æ®Šè§„åˆ™ï¼‰</span>

</code></pre>
<h2 data-id="heading-1">ç±»å‹è½¬æ¢çš„ä¸¤ç§å½¢å¼</h2>
<h3 data-id="heading-2">1. æ˜¾å¼ç±»å‹è½¬æ¢</h3>
<p>å¼€å‘è€…æ˜ç¡®è°ƒç”¨è½¬æ¢å‡½æ•°è¿›è¡Œçš„ç±»å‹è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹è§çš„ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ˜¾å¼è½¬æ¢ä¸ºæ•°å­—</span>
<span class="hljs-built_in">Number</span>('<span class="hljs-number">123</span>');    <span class="hljs-comment">// 123</span>
<span class="hljs-built_in">parseInt</span>('<span class="hljs-number">123</span>');  <span class="hljs-comment">// 123</span>

<span class="hljs-comment">// æ˜¾å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
<span class="hljs-built_in">String</span>(<span class="hljs-number">123</span>);      <span class="hljs-comment">// '123'</span>
(<span class="hljs-number">123</span>)<span class="hljs-selector-class">.toString</span>(); <span class="hljs-comment">// '123'</span>

<span class="hljs-comment">// æ˜¾å¼è½¬æ¢ä¸ºå¸ƒå°”å€¼</span>
<span class="hljs-built_in">Boolean</span>(<span class="hljs-number">0</span>);       <span class="hljs-comment">// false</span>
<span class="hljs-built_in">Boolean</span>('');      <span class="hljs-comment">// false</span>
</code></pre>
<h3 data-id="heading-3">2. éšå¼ç±»å‹è½¬æ¢</h3>
<p>JavaScriptå¼•æ“åœ¨ç‰¹å®šæ“ä½œä¸­è‡ªåŠ¨è¿›è¡Œçš„ç±»å‹è½¬æ¢ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ç®—æœ¯è¿ç®—ä¸­çš„éšå¼è½¬æ¢</span>
<span class="hljs-string">'123'</span> - <span class="hljs-number">0</span>;        <span class="hljs-comment">// 123ï¼ˆå­—ç¬¦ä¸²è½¬æ•°å­—ï¼‰</span>
<span class="hljs-number">123</span> + <span class="hljs-string">''</span>;         <span class="hljs-comment">// '123'ï¼ˆæ•°å­—è½¬å­—ç¬¦ä¸²ï¼‰</span>

<span class="hljs-comment">// é€»è¾‘åˆ¤æ–­ä¸­çš„éšå¼è½¬æ¢</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'hello'</span>) {    <span class="hljs-comment">// å­—ç¬¦ä¸²è½¬å¸ƒå°”å€¼</span>
  <span class="hljs-comment">// ä¼šæ‰§è¡Œï¼Œå› ä¸º'hello'è½¬æ¢ä¸ºtrue</span>
}

<span class="hljs-comment">// æ¯”è¾ƒè¿ç®—ä¸­çš„éšå¼è½¬æ¢</span>
<span class="hljs-string">'2'</span> &gt; <span class="hljs-number">1</span>;          <span class="hljs-comment">// trueï¼ˆ'2'è½¬æ¢ä¸º2ï¼‰</span>
</code></pre>
<h2 data-id="heading-4">åŸå§‹å€¼ä¹‹é—´çš„ç±»å‹è½¬æ¢</h2>
<h3 data-id="heading-5">1. è½¬æ¢ä¸ºæ•°å­—ï¼ˆToNumberï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Number</span>(<span class="hljs-string">'123'</span>);     <span class="hljs-comment">// 123</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-string">''</span>);        <span class="hljs-comment">// 0</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-string">'hello'</span>);   <span class="hljs-comment">// NaN</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-literal">true</span>);      <span class="hljs-comment">// 1</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-literal">false</span>);     <span class="hljs-comment">// 0</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-literal">null</span>);      <span class="hljs-comment">// 0</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-literal">undefined</span>); <span class="hljs-comment">// NaN</span>

<span class="hljs-comment">// ä¸€å…ƒåŠ è¿ç®—ç¬¦ä¹Ÿæ‰§è¡Œæ•°å­—è½¬æ¢</span>
+<span class="hljs-string">'123'</span>;  <span class="hljs-comment">// 123</span>
+<span class="hljs-literal">true</span>;   <span class="hljs-comment">// 1</span>
</code></pre>
<h3 data-id="heading-6">2. è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆToStringï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">String</span>(<span class="hljs-number">123</span>);       <span class="hljs-comment">// '123'</span>
<span class="hljs-built_in">String</span>(true);      <span class="hljs-comment">// 'true'</span>
<span class="hljs-built_in">String</span>(false);     <span class="hljs-comment">// 'false'</span>
<span class="hljs-built_in">String</span>(null);      <span class="hljs-comment">// 'null'</span>
<span class="hljs-built_in">String</span>(undefined); <span class="hljs-comment">// 'undefined'</span>
</code></pre>
<h3 data-id="heading-7">3. è½¬æ¢ä¸ºå¸ƒå°”å€¼ï¼ˆToBooleanï¼‰</h3>
<p>JavaScriptä¸­åªæœ‰ä»¥ä¸‹6ä¸ªå€¼ä¼šè½¬æ¢ä¸ºfalseï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½è½¬æ¢ä¸ºtrueï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">Boolean</span>(false);     <span class="hljs-comment">// false</span>
<span class="hljs-built_in">Boolean</span>(<span class="hljs-number">0</span>);         <span class="hljs-comment">// false</span>
<span class="hljs-built_in">Boolean</span>(-<span class="hljs-number">0</span>);        <span class="hljs-comment">// false</span>
<span class="hljs-built_in">Boolean</span>('');        <span class="hljs-comment">// false</span>
<span class="hljs-built_in">Boolean</span>(null);      <span class="hljs-comment">// false</span>
<span class="hljs-built_in">Boolean</span>(undefined); <span class="hljs-comment">// false</span>
<span class="hljs-built_in">Boolean</span>(NaN);       <span class="hljs-comment">// false</span>

<span class="hljs-comment">// å…¶ä»–æ‰€æœ‰å€¼éƒ½æ˜¯true</span>
<span class="hljs-built_in">Boolean</span>('<span class="hljs-number">0</span>');       <span class="hljs-comment">// trueï¼ˆæ³¨æ„ï¼šå­—ç¬¦ä¸²'0'ä¸æ˜¯0ï¼‰</span>
<span class="hljs-built_in">Boolean</span>([]);        <span class="hljs-comment">// true</span>
<span class="hljs-built_in">Boolean</span>({});        <span class="hljs-comment">// true</span>
<span class="hljs-built_in">Boolean</span>(function(){}); <span class="hljs-comment">// true</span>
</code></pre>
<h2 data-id="heading-8">å¼•ç”¨ç±»å‹è½¬æ¢ä¸ºåŸå§‹å€¼ï¼ˆé€šå¸¸å‘ç”Ÿåœ¨éšå¼ç±»å‹è½¬æ¢ä¸­ï¼‰</h2>
<h3 data-id="heading-9">1. è½¬æ¢ä¸ºå¸ƒå°”å€¼</h3>
<p>æ‰€æœ‰å¼•ç”¨ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ç­‰ï¼‰è½¬æ¢ä¸ºå¸ƒå°”å€¼éƒ½æ˜¯trueã€‚</p>
<h3 data-id="heading-10">2. è½¬æ¢ä¸ºæ•°å­—ï¼ˆå¼•ç”¨ç±»å‹ â†’ åŸå§‹å€¼ â†’ æ•°å­—ï¼‰</h3>
<p>è½¬æ¢è¿‡ç¨‹éµå¾ªToPrimitiveç®—æ³•ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è½¬æ¢æ­¥éª¤ï¼š</span>
<span class="hljs-comment">// 1. è°ƒç”¨valueOf()æ–¹æ³•ï¼Œå¦‚æœè¿”å›åŸå§‹å€¼ï¼Œä½¿ç”¨è¯¥å€¼</span>
<span class="hljs-comment">// 2. å¦åˆ™è°ƒç”¨toString()æ–¹æ³•ï¼Œå¦‚æœè¿”å›åŸå§‹å€¼ï¼Œä½¿ç”¨è¯¥å€¼</span>
<span class="hljs-comment">// 3. å¦åˆ™æŠ›å‡ºTypeError</span>

<span class="hljs-built_in">Number</span>({});            <span class="hljs-comment">// NaN</span>
<span class="hljs-comment">// {}.valueOf() â†’ {}ï¼ˆä»æ˜¯å¯¹è±¡ï¼‰</span>
<span class="hljs-comment">// {}.toString() â†’ '[object Object]'</span>
<span class="hljs-comment">// Number('[object Object]') â†’ NaN</span>

<span class="hljs-built_in">Number</span>([<span class="hljs-number">123</span>]);         <span class="hljs-comment">// 123</span>
<span class="hljs-comment">// [123].valueOf() â†’ [123]ï¼ˆä»æ˜¯æ•°ç»„ï¼‰</span>
<span class="hljs-comment">// [123].toString() â†’ '123'</span>
<span class="hljs-comment">// Number('123') â†’ 123</span>

<span class="hljs-built_in">Number</span>([]);            <span class="hljs-comment">// 0</span>
<span class="hljs-comment">// [].toString() â†’ ''</span>
<span class="hljs-comment">// Number('') â†’ 0</span>
</code></pre>
<h3 data-id="heading-11">3. è½¬æ¢ä¸ºå­—ç¬¦ä¸²</h3>
<p>ä¸è½¬æ¢ä¸ºæ•°å­—ç±»ä¼¼ï¼Œä½†ä¼˜å…ˆè°ƒç”¨toString()æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">String</span>({});            <span class="hljs-comment">// '[object Object]'</span>
<span class="hljs-built_in">String</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);     <span class="hljs-comment">// '1,2,3'</span>
<span class="hljs-built_in">String</span>([]);            <span class="hljs-comment">// ''</span>
<span class="hljs-built_in">String</span>(new Date());    <span class="hljs-comment">// æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆå¦‚'Thu Nov 09 2023...'ï¼‰</span>
</code></pre>
<h2 data-id="heading-12">toString()æ–¹æ³•çš„è¡Œä¸º</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// å¯¹è±¡çš„toString()æ–¹æ³•</span>
{}<span class="hljs-selector-class">.toString</span>();                <span class="hljs-comment">// '[object Object]'</span>

<span class="hljs-comment">// æ•°ç»„çš„toString()æ–¹æ³•</span>
<span class="hljs-selector-attr">[1, 2, 3]</span><span class="hljs-selector-class">.toString</span>();        <span class="hljs-comment">// '1,2,3'</span>
<span class="hljs-selector-attr">[]</span><span class="hljs-selector-class">.toString</span>();               <span class="hljs-comment">// ''</span>

<span class="hljs-comment">// å…¶ä»–ç±»å‹çš„toString()</span>
(<span class="hljs-number">123</span>)<span class="hljs-selector-class">.toString</span>();            <span class="hljs-comment">// '123'</span>
(true)<span class="hljs-selector-class">.toString</span>();           <span class="hljs-comment">// 'true'</span>

<span class="hljs-comment">// nullå’Œundefinedæ²¡æœ‰toString()æ–¹æ³•</span>
null<span class="hljs-selector-class">.toString</span>();             <span class="hljs-comment">// TypeError</span>
undefined<span class="hljs-selector-class">.toString</span>();        <span class="hljs-comment">// TypeError</span>
</code></pre>
<h2 data-id="heading-13">ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</h2>
<ol>
<li>å››åˆ™è¿ç®— + - * % /</li>
<li>åˆ¤æ–­è¯­å¥ if while == &gt;=  &lt;=  &gt;  &lt;  !=</li>
</ol>
<h2 data-id="heading-14">åŠ æ³•è¿ç®—ç¬¦çš„è¯¦ç»†è§„åˆ™</h2>
<h3 data-id="heading-15">ä½œä¸ºä¸€å…ƒè¿ç®—ç¬¦ï¼ˆæ­£å·ï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino">+ <span class="hljs-string">'123'</span>;        <span class="hljs-comment">// 123</span>
+ <span class="hljs-literal">true</span>;         <span class="hljs-comment">// 1</span>
+ <span class="hljs-literal">false</span>;        <span class="hljs-comment">// 0</span>
</code></pre>
<h3 data-id="heading-16">ä½œä¸ºäºŒå…ƒè¿ç®—ç¬¦ï¼ˆåŠ æ³•ï¼‰</h3>
<p>è§„åˆ™ï¼š</p>
<ol>
<li>å°†ä¸¤ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºåŸå§‹å€¼ï¼ˆToPrimitiveï¼‰</li>
<li>å¦‚æœä»»ä¸€æ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥</li>
<li>å¦åˆ™ï¼Œå°†ä¸¤ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—è¿›è¡ŒåŠ æ³•è¿ç®—</li>
</ol>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-number">1</span> + <span class="hljs-number">2</span>;          <span class="hljs-regexp">//</span> <span class="hljs-number">3</span>ï¼ˆæ•°å­—ç›¸åŠ ï¼‰
<span class="hljs-number">1</span> + <span class="hljs-string">'2'</span>;        <span class="hljs-regexp">//</span> <span class="hljs-string">'12'</span>ï¼ˆå­—ç¬¦ä¸²æ‹¼æ¥ï¼‰
<span class="hljs-literal">true</span> + <span class="hljs-literal">false</span>;   <span class="hljs-regexp">//</span> <span class="hljs-number">1</span>ï¼ˆ<span class="hljs-number">1</span> + <span class="hljs-number">0</span>ï¼‰
[] + [];        <span class="hljs-regexp">//</span> <span class="hljs-string">''</span>ï¼ˆç©ºå­—ç¬¦ä¸² + ç©ºå­—ç¬¦ä¸²ï¼‰
[] + {};        <span class="hljs-regexp">//</span> <span class="hljs-string">'[object Object]'</span>
</code></pre>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>ç†è§£JavaScriptçš„ç±»å‹è½¬æ¢æœºåˆ¶å¯¹äºç¼–å†™å¥å£®çš„ä»£ç è‡³å…³é‡è¦ï¼š</p>
<ol>
<li><strong>æ˜¾å¼è½¬æ¢</strong>æä¾›äº†æ¸…æ™°ã€å¯é¢„æµ‹çš„ç±»å‹è½¬æ¢æ–¹å¼</li>
<li><strong>éšå¼è½¬æ¢</strong>è™½ç„¶æ–¹ä¾¿ï¼Œä½†å¯èƒ½å¼•å…¥éš¾ä»¥å‘ç°çš„bug</li>
<li>æŒæ¡è½¬æ¢è§„åˆ™å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œè°ƒè¯•ä»£ç </li>
<li>åœ¨å…³é”®ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œæ¨èä½¿ç”¨æ˜¾å¼è½¬æ¢ä»¥æé«˜ä»£ç çš„æ¸…æ™°åº¦å’Œå¯é æ€§</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¬è¯´ä½ æ¯•ä¸šå¾ˆå¤šå¹´äº†ï¼Ÿé‚£ä¹ˆæ¥åšé¢˜å§ğŸ¦¶]]></title>    <link>https://juejin.cn/post/7581667332306419750</link>    <guid>https://juejin.cn/post/7581667332306419750</guid>    <pubDate>2025-12-09T09:06:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581667332306419750" data-draft-id="7576476897949843483" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¬è¯´ä½ æ¯•ä¸šå¾ˆå¤šå¹´äº†ï¼Ÿé‚£ä¹ˆæ¥åšé¢˜å§ğŸ¦¶"/> <meta itemprop="keywords" content="Flutter,iOS,APP"/> <meta itemprop="datePublished" content="2025-12-09T09:06:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_å¤§å­¦ç‰²"/> <meta itemprop="url" content="https://juejin.cn/user/3125273628517148"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¬è¯´ä½ æ¯•ä¸šå¾ˆå¤šå¹´äº†ï¼Ÿé‚£ä¹ˆæ¥åšé¢˜å§ğŸ¦¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3125273628517148/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _å¤§å­¦ç‰²
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T09:06:46.000Z" title="Tue Dec 09 2025 09:06:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åºè¨€</h2>
<p align="center"> 
           <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/942f89459c6343039107e56fe7205591~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=K6GKWvQixQk14aoqejKcz9SFFDY%3D" width="100%" loading="lazy"/>
</p>
<p>è‡ªåˆ«å­¦å®«ï¼Œå²æœˆå¦‚ç‹—ï¼Œæ’’è…¿ç‹‚å¥”ï¼Œä¸çŸ¥æ˜”æ—¥å­¦æ¸£ä»Šä½•åœ¨ï¼Ÿ<br/>
å·¦æŒé”®ç›˜ï¼Œå³æé¼ æ ‡ï¼Œå¾®ä»°å…¶é¦–ï¼Œç«Ÿåœ¨å±å¹•é•œä¸­æ˜¾å®¹é¢œï¼<br/>
å¿ƒä¸­å¾®å¹ï¼Œæ›¾å‡ ä½•æ—¶ï¼Œæç¬”æ€é¢˜ï¼ŒçŠ¹å¦‚å¤©ä¸Šäººé—´å¤ªå²ç¥ã€‚<br/>
çŸ¥ä½ æƒ³å¿µï¼Œæ•…æ­¤ä»Šæ—¥ï¼Œé„™äººä¸æ‰ï¼Œå‡ºé¢˜å°ä¾ ç™»åœºçŒ®ä¸‘äº†ã€‚</p>
<h2 data-id="heading-1">èµ·å› </h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54a60e42c3e04f548562c7191a3f8e7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=5lYjPp9vnUiU1f%2ByXE1OImQ5DGE%3D" alt="æˆªå±2025-12-09 14.33.41.png" loading="lazy"/>
åœ¨è¿™ä¸€ç¯‡ã€Š<a href="https://juejin.cn/post/7569827641482674214**" target="_blank" title="https://juejin.cn/post/7569827641482674214**">ä» 0 åˆ°ä¸Šæ¶ï¼šç”¨ Flutter ä¸€å¤©åšä¸€æ¬¾åŠŸå¾·æœ¨é±¼</a>ã€‹æ–‡ç« ä¸­ï¼Œæˆ‘çš„ <code>æœ¨é±¼APP</code> æœ€ç»ˆé™¨è½äº†ï¼Œç©¶å…¶åŸå› å°±æ˜¯è¿™ç§ <strong>APP åœ¨ ï£¿ å•†åº—ä¸­å¤ª<code>å¤š</code>äº†</strong>,å¦‚æœä½ è¦æƒ³æˆåŠŸä¸Šæ¶ï¼Œæ— å¼‚äºè¦è„±èƒæ¢éª¨ã€‚</p>
<blockquote>
<p>åé¢æœ‰æ—¶é—´äº†ï¼Œæˆ‘æ‰“ç®—å°†å…¶é‡é“¸ä¸º <code>ä¿®ä»™æ•²æœ¨é±¼</code>ï¼Œé€šè¿‡ç§¯æ”’é±¼åŠ›ï¼Œçªç ´ç§©åºæ·é”ï¼Œæˆå°± <code>æ— ä¸Šæœ¨é±¼å¤§é“</code>ã€‚</p>
</blockquote>
<hr/>
<p>å› æ­¤ï¼Œæˆ‘å¸å–å¤±è´¥çš„æ•™è®­ï¼Œç€åŠ›äºå¼€å‘ä¸€æ¬¾æ¯”è¾ƒ <strong>ç‹¬ç‰¹çš„APP</strong> ï¼Œç»“åˆè¿™ä¸ªAIå¤§æ—¶ä»£çš„èƒŒæ™¯ï¼Œè¿™æ¬¾AIæ™ºèƒ½ <code>å‡ºé¢˜ä¾ </code> å°±åº”è¿è€Œç”Ÿäº†ã€‚æœ€åæ€»ç®—æ˜¯ä¸è¾œè´Ÿæˆ‘çš„åŠªåŠ›ï¼ŒæˆåŠŸä¸Šæ¶äº†ã€‚<br/>
æ¥ä¸‹æ¥å°±å‘å¤§å®¶è¯´è¯´ <strong>å®ƒçš„æ•…äº‹</strong> å§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c4b26dcfe204c65b350ce9987cd5225~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=DkLeKY6Brtcb6PCa%2FbDlbzNVa%2Bk%3D" alt="æˆªå±2025-12-09 14.44.38.png" loading="lazy"/></p>
<h2 data-id="heading-2">å®è·µ</h2>
<h3 data-id="heading-3">ä¸€. å‡†å¤‡é˜¶æ®µ</h3>
<h4 data-id="heading-4">1.æµç¨‹è®¾è®¡</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD

  %% å¯åŠ¨ä¸ç™»å½•
  A[å¯åŠ¨é¡µ] --&gt; B[æ— æ„Ÿç™»å½•]
  B --&gt; C[è¿›å…¥å¯¼èˆªé¡µ]

  %% ä¸»å£³å¯¼èˆª
  C --&gt; H[é¦–é¡µ]
  C --&gt; R[è®°å½•]
  C --&gt; T[ç»Ÿè®¡]
  C --&gt; P[æˆ‘çš„]

  %% é¦–é¡µå‡ºé¢˜ â†’ è®°å½•
  H --&gt; H1[è¾“å…¥ä¸»é¢˜/é«˜çº§è®¾ç½®]
  H1 --&gt; H2[ç”Ÿæˆé¢˜ç›®]
  H2 --&gt; H3[æç¤ºåå°ç”Ÿæˆ]
  H3 --&gt; R

  %% è®°å½• â†’ ç­”é¢˜/è¯¦æƒ…
  R --&gt; R1{è®°å½•çŠ¶æ€}
  R1 --&gt;|è¿›è¡Œä¸­| Q[è¿›å…¥ç­”é¢˜é¡µ]
  R1 --&gt;|å·²å®Œæˆ| RD[è®°å½•è¯¦æƒ…]
  RD --&gt; E[ç§’æ‡‚ç™¾ç§‘]

  %% ç­”é¢˜æµç¨‹
  Q --&gt; Q1[ä½œç­” / æäº¤]
  Q1 --&gt; Q2[ä¿å­˜æˆç»©]
  Q2 --&gt; R

  %% ç»Ÿè®¡é¡µ
  T --&gt; T1[åˆ·æ–°ç»Ÿè®¡æ•°æ®]

  %% æˆ‘çš„é¡µ
  P --&gt; P1[è®¾ç½®/å…³äº]
  P --&gt; P2[éšç§æ”¿ç­–]
  P --&gt; P3[æ³¨é”€]
  P3 --&gt; |ç¡®è®¤å| P4[æ¸…é™¤ token / è¿”å›æœªç™»å½•çŠ¶æ€]
</code></pre>
<h4 data-id="heading-5">2. ç´ æè·å–</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d21a570874264b239883d5b0a00510a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=GOF65mijLQGlLIGqNL1ES2AIIBI%3D" alt="æˆªå±2025-12-09 15.22.28.png" loading="lazy"/></p>
<p>Appçš„ <strong>logo</strong> å’Œå…¶ä¸­çš„ <strong>æ’å›¾</strong>ï¼Œæˆ‘éƒ½æ˜¯ç”¨çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fexp.volcengine.com%2Fark%2Fvision%3Fmode%3Dvision%26model%3Ddoubao-seedream-4-5-251128%26modelId%3Ddoubao-seedream-4-0-250828%26tab%3DGenImage" target="_blank" title="https://exp.volcengine.com/ark/vision?mode=vision&amp;model=doubao-seedream-4-5-251128&amp;modelId=doubao-seedream-4-0-250828&amp;tab=GenImage" ref="nofollow noopener noreferrer">Doubao-Seedream-4.0</a> ç”Ÿæˆçš„ï¼Œä¸€æ¬¡æ•ˆæœä¸è¡Œå°±å¤šç”Ÿæˆå‡ æ¬¡ï¼Œæœ€ç»ˆè¿˜æ˜¯èƒ½å¾—åˆ°ç›¸å¯¹æ»¡æ„çš„ç»“æœã€‚</p>
<p>åˆ°æˆ‘å†™æ–‡ç« çš„æ—¶å€™ï¼Œå·²ç»æœ‰äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fexp.volcengine.com%2Fark%2Fvision%3Fmode%3Dvision%26model%3Ddoubao-seedream-4-5-251128%26modelId%3Ddoubao-seedream-4-5-251128" target="_blank" title="https://exp.volcengine.com/ark/vision?mode=vision&amp;model=doubao-seedream-4-5-251128&amp;modelId=doubao-seedream-4-5-251128" ref="nofollow noopener noreferrer">Doubao-Seedream-4.5</a>ï¼Œå¤§å®¶å¯ä»¥å»ä½“éªŒä½“éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/854bab81f9df4433bec4cb8baa49d114~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=GZoSRwDPddWhgOEKajWEzWKzSfk%3D" alt="æˆªå±2025-12-09 15.27.20.png" loading="lazy"/></p>
<h3 data-id="heading-6">äºŒ. å¼€å‘é˜¶æ®µ</h3>
<h4 data-id="heading-7">1. å‰ç«¯</h4>
<p>å‰ç«¯æ¯«æ— äº‰è®®çš„ä½¿ç”¨çš„æ˜¯ <code>Flutter</code>ï¼Œæ¯•ç«Ÿè¦æ˜¯ä»¥åå‘è¡Œ <code>Android</code> ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„,æ— éœ€é‡æ–°å¼€å‘ã€‚å†ç»“åˆ <code>Trae</code>,æˆ‘åªéœ€è¦åœ¨å£å¤´ä¸ŠæŒ‡ç‚¹æŒ‡ç‚¹ï¼Œé‚£æ˜¯å¼€å‘çš„åˆå¿«åˆç¨³ï¼Œéå¸¸çš„è½»æ¾åŠ æ„‰å¿«ã€‚</p>
<blockquote>
<p>æ— é¡»å¤šè¨€ï¼Œè¿™å°±æ˜¯èµ›åšå£å—¨ç¨‹åºå‘˜ï¼ğŸ«¡</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1bda83073ca4e0b97c0c6f58936981b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=LM8SkJg3y4JvCvK1bBk9GVRho%2BM%3D" alt="æˆªå±2025-12-09 15.44.31.png" loading="lazy"/></p>
<h4 data-id="heading-8">2. åç«¯</h4>
<p>åç«¯å°±æ˜¯ï¼Œä¸–ç•Œä¸Šæœ€å¥½çš„ç¼–ç¨‹è¯­è¨€ <code>JAVA</code> äº†ï¼Œæ¯•ç«Ÿ <code>SpringBoot</code> å¯å¤ªé¦™äº†,æˆ‘ä¹Ÿæ˜¯äº²è‡ªä¸Šæ‰‹ã€‚</p>
<h5 data-id="heading-9">2.1 ä¾èµ–æ¦‚è§ˆ</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âœ… æ ¸å¿ƒ LangChain4j ä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>dev.langchain4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>langchain4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${langchain4j.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.squareup.okhttp3<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>okhttp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Validation --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Spring Aop --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- HuTool --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.hutool<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hutool-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${hutool.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- MyBatis-Plus --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-spring-boot3-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${mybatis-plus.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- MyBatis --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${mybatis-spring-boot-starter.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- MyBatis-PageHelper --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${pagehelper.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Sa-Token --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.dev33<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sa-token-spring-boot3-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${sa-token.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Sa-Token æ•´åˆ RedisTemplate --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.dev33<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sa-token-redis-template<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.42.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æä¾› Redis è¿æ¥æ±  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-pool2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Lombok --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Knife4j --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springdoc<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.8.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.xiaoymin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>knife4j-openapi3-jakarta-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.4.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- çŸ­ä¿¡éªŒè¯ç  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aliyun-java-auth<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.2.0-beta<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡ SDK --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dysmsapi20170525<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.24<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- ä½¿ç”¨æœ€æ–°ç‰ˆ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

      ......
</code></pre>
<p>è¿™ä¾èµ–ä¸€æ·»åŠ ï¼Œæ»¡æ»¡çš„å®‰å…¨æ„Ÿï¼š</p>
<ul>
<li>æ•°æ®åº“ï¼šæˆ‘æœ‰MyBatisã€‚</li>
<li>AIï¼šæˆ‘æœ‰LangChain4jã€‚</li>
<li>ç™»å½•é‰´æƒï¼šæˆ‘æœ‰Sa-Tokenã€‚</li>
<li>......</li>
</ul>
<h5 data-id="heading-10">2.2 æ¥å£é™æµ</h5>
<p>è¦è¯´åˆ°é¡¹ç›®ä¸­æœ€éœ€è¦é‡ç‚¹å…³æ³¨çš„éƒ¨åˆ†ï¼Œ<strong>æ¥å£é™æµ</strong> æ— ç–‘æ’åœ¨é¦–ä½ã€‚æ— è®ºæ˜¯çŸ­ä¿¡å‘é€æ¥å£ï¼Œè¿˜æ˜¯è°ƒç”¨ AI çš„æ¥å£ï¼Œä¸€æ—¦è¢«æ¶æ„åˆ·å–æˆ–æ»¥ç”¨ï¼Œéƒ½å¯èƒ½å¯¼è‡´èµ„æºè€—å°½ã€è´¹ç”¨çˆ†ç‚¸ğŸ’¥ã€‚</p>
<p>å› æ­¤ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨ <strong>æ³¨è§£ + AOP + Redis</strong> çš„æ–¹å¼ï¼Œæ„å»ºäº†ä¸€å¥— <strong>è½»é‡çº§ã€å¯é…ç½®ã€ä½ä¾µå…¥</strong> çš„æ¥å£é™æµæ–¹æ¡ˆï¼Œåœ¨ä¸å½±å“ä¸šåŠ¡ä»£ç ç»“æ„çš„å‰æä¸‹ï¼Œå¯¹é«˜é£é™©æ¥å£è¿›è¡Œæœ‰æ•ˆä¿æŠ¤ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¾ç„¶ç¨³å®šå¯æ§ã€‚</p>
<hr/>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> RateLimit {

    <span class="hljs-comment">/**
     * é™æµ key çš„å‰ç¼€ï¼ˆå”¯ä¸€æ ‡è¯†ä¸€ä¸ªé™æµç»´åº¦ï¼‰
     */</span>
    String <span class="hljs-title function_">key</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * æ—¶é—´çª—å£ï¼Œå•ä½ç§’
     */</span>
    <span class="hljs-type">long</span> <span class="hljs-title function_">window</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">60</span>;

    <span class="hljs-comment">/**
     * æ—¶é—´çª—å£å†…å…è®¸çš„æœ€å¤§æ¬¡æ•°
     */</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">limit</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">10</span>;

    <span class="hljs-comment">/**
     * æ˜¯å¦æŒ‰ IP ç»´åº¦åŒºåˆ†é™æµ
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">perIp</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;

    <span class="hljs-comment">/**
     * æ˜¯å¦æŒ‰ç”¨æˆ·ç»´åº¦åŒºåˆ†é™æµ
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">perUser</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;

    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰æç¤ºä¿¡æ¯
     */</span>
    String <span class="hljs-title function_">message</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•"</span>;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RateLimitAspect</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> RateLimitRedisUtil rateLimitRedisUtil;

    <span class="hljs-meta">@Around("@annotation(org.dxs.problemman.annotation.RateLimit)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> (MethodSignature) joinPoint.getSignature();
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> signature.getMethod();
        <span class="hljs-type">RateLimit</span> <span class="hljs-variable">rateLimit</span> <span class="hljs-operator">=</span> method.getAnnotation(RateLimit.class);

        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> buildKey(rateLimit);

        <span class="hljs-type">boolean</span> <span class="hljs-variable">allowed</span> <span class="hljs-operator">=</span> rateLimitRedisUtil.tryAcquire(
                key, rateLimit.limit(), rateLimit.window());

        <span class="hljs-keyword">if</span> (!allowed) {
            log.warn(<span class="hljs-string">"é™æµè§¦å‘ï¼škey={}, limit={}, window={}s"</span>, key, rateLimit.limit(), rateLimit.window());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RateLimitException</span>(rateLimit.message());
        }

        <span class="hljs-keyword">return</span> joinPoint.proceed();
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildKey</span><span class="hljs-params">(RateLimit rateLimit)</span> {
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">"ratelimit:"</span>).append(rateLimit.key());
        <span class="hljs-keyword">if</span> (rateLimit.perIp()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">ip</span> <span class="hljs-operator">=</span> IpUtils.getIpAddress();
            key.append(<span class="hljs-string">":"</span>).append(ip);
        }

        <span class="hljs-keyword">if</span> (rateLimit.perUser()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> StpUtil.getLoginIdAsString();
            key.append(<span class="hljs-string">":"</span>).append(userId);
        }
        <span class="hljs-keyword">return</span> key.toString();
    }
}
</code></pre>
<hr/>
<p>åœ¨ä½¿ç”¨ä¸Šï¼Œå¼€å‘è€…åªéœ€åœ¨éœ€è¦ä¿æŠ¤çš„æ¥å£æ–¹æ³•ä¸Šæ·»åŠ  <code>@RateLimit</code> æ³¨è§£ï¼Œå³å¯å£°æ˜è¯¥æ¥å£çš„é™æµè§„åˆ™ã€‚é€šè¿‡ <code>key</code> åŒºåˆ†ä¸åŒä¸šåŠ¡åœºæ™¯ï¼Œå¹¶å¯æŒ‰éœ€å¼€å¯ <strong>IP ç»´åº¦</strong> æˆ– <strong>ç”¨æˆ·ç»´åº¦</strong> çš„é™æµæ§åˆ¶ï¼Œä»è€Œç²¾ç¡®é™åˆ¶å•ä¸€æ¥æºæˆ–å•ä¸€ç”¨æˆ·çš„è®¿é—®é¢‘ç‡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@NotLogin</span>
<span class="hljs-meta">@PostMapping("/sms")</span>
<span class="hljs-meta">@RateLimit(key = "sms", limit = 200, window = 3600, message = "çŸ­ä¿¡è°ƒç”¨å¤ªé¢‘ç¹ï¼Œè¯·1å°æ—¶åå†è¯•")</span>
<span class="hljs-keyword">public</span> AjaxResult&lt;String&gt; <span class="hljs-title function_">sms</span><span class="hljs-params">(<span class="hljs-meta">@Validated</span> <span class="hljs-meta">@RequestBody</span> PhoneDTO dto)</span> {
    <span class="hljs-keyword">return</span> AjaxResult.success(loginService.sms(dto));

}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/generate")</span>
<span class="hljs-meta">@RateLimit(key = "generate", limit = 3, perUser = true, window = 3600*24, message = "æ¯äººæ¯å¤©ä»…å¯ä½“éªŒä¸‰æ¬¡!")</span>
<span class="hljs-meta">@Operation(summary = "ä¾æ®æ¡ä»¶ï¼Œç”Ÿæˆé¢˜ç›®")</span>
<span class="hljs-keyword">public</span> AjaxResult&lt;Object&gt; <span class="hljs-title function_">generate</span><span class="hljs-params">(<span class="hljs-meta">@Validated</span> <span class="hljs-meta">@RequestBody</span> GenerateRequestDTO dto)</span> <span class="hljs-keyword">throws</span> IOException, InterruptedException {
    questionService.generate(dto);
    <span class="hljs-keyword">return</span> AjaxResult.success();
}
</code></pre>
<p>è¯·æ±‚è¿›å…¥æ—¶ï¼ŒAOP åˆ‡é¢ä¼šæ‹¦æˆªå¸¦æœ‰ <code>@RateLimit</code> æ³¨è§£çš„æ–¹æ³•ï¼Œæ ¹æ®æ³¨è§£é…ç½®åŠ¨æ€æ„å»ºé™æµ Keyï¼Œå¹¶äº¤ç”± Redis è¿›è¡ŒåŸå­è®¡æ•°æ ¡éªŒï¼›è‹¥åœ¨æŒ‡å®šæ—¶é—´çª—å£å†…è¶…è¿‡è®¿é—®ä¸Šé™ï¼Œåˆ™ç›´æ¥ä¸­æ–­è¯·æ±‚å¹¶è¿”å›å‹å¥½çš„é™æµæç¤ºï¼ŒåŒæ—¶è®°å½•å‘Šè­¦æ—¥å¿—ï¼Œä¾¿äºåç»­æ’æŸ¥ä¸ç›‘æ§ã€‚</p>
<p>é™æµ Key çš„ç»“æ„ç»Ÿä¸€ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css">ratelimit:{ä¸šåŠ¡key}:{ip}:{userId}
</code></pre>
<p>é€šè¿‡ Redis è¿‡æœŸæœºåˆ¶è‡ªç„¶å½¢æˆæ—¶é—´çª—å£ï¼Œæ—¢ä¿è¯äº†å¹¶å‘åœºæ™¯ä¸‹çš„å‡†ç¡®æ€§ï¼Œä¹Ÿé¿å…äº†é¢å¤–çš„æ¸…ç†æˆæœ¬ã€‚</p>
<h3 data-id="heading-11">ä¸‰. ä¸Šæ¶å¤‡æ¡ˆ</h3>
<h4 data-id="heading-12">1.å‰æ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/083eac97b7a34a19b1588ada75dd4ad8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=EiFHmny2HNv8e1cVu%2FnNtwcVDs0%3D" alt="æˆªå±2025-12-08 21.51.13.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/353c5df231d5408080608a9de008d865~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=NlEUKn0bg7DMnZSag0nApsjkgOQ%3D" alt="æˆªå±2025-12-08 21.51.51.png" loading="lazy"/></p>
<p>æƒ³è¦å¤‡æ¡ˆä¸Šæ¶ï¼ŒåŸŸåå’ŒæœåŠ¡å™¨æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<ul>
<li>åŸŸåï¼šä½ æ˜¯åœ¨æ‰‹æœºä¸Šï¼Œå…¶å®ä¸éœ€è¦å•¥å¥½åŸŸåï¼Œå› ä¸ºå¤§å®¶æ ¹æœ¬çœ‹ä¸è§ï¼Œåå‡ å—é’±ä¸€å¹´å°±è¡Œäº†ã€‚</li>
<li>æœåŠ¡å™¨ï¼šèŠ±äº†ä¸‰å››ç™¾ä¹°ä¸ªè½»é‡çº§æœåŠ¡å™¨å°±è¡Œäº†ã€‚</li>
</ul>
<h4 data-id="heading-13">2. é˜¿é‡Œäº‘å¤‡æ¡ˆ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dee4bff186e44acbb17263b4634c33d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=%2B71bBFko6Z9SCmEpak4rgHRcW28%3D" alt="æˆªå±2025-12-08 22.02.14.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dc6a93d8cc94525b5095b33588d6637~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=U2%2BVi0OSV2zLLWJo9F7I22K2Iic%3D" alt="æˆªå±2025-12-08 22.06.22.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ’¡ <code>å°å»ºè®®</code><br/>
åƒè¿™é‡Œé˜¿é‡Œäº‘å¤‡æ¡ˆå’Œè·å–ç®¡å±€å®¡æ ¸ï¼Œå¯ä»¥å…ˆè¡Œä¸€æ­¥ï¼Œåœ¨appå¼€å‘å®Œä¹‹å‰å°±å¯ä»¥æäº¤äº†ã€‚<br/>
å› ä¸ºç®¡å±€å®¡æ ¸æ˜¯è¦2-3å‘¨çš„ï¼Œæœ‰å¯èƒ½æˆ‘ä»¬çš„å°APPå¼€å‘å¥½äº†ï¼Œå¤‡æ¡ˆå·éƒ½æ²¡æœ‰ä¸‹æ¥ã€‚</p>
</blockquote>
<h4 data-id="heading-14">3. è‹¹æœå•†åº—ä¸Šæ¶</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7f6fab876754a68b382d8b7e462eaf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=PAvq6D5rHLixfkr1ZCelv2QHz7o%3D" alt="æˆªå±2025-12-09 14.44.38.png" loading="lazy"/></p>
<p>ä¿¡æ¯è¿™é‡ŒæŒ‰éƒ¨å°±ç­ï¼ŒæŒ‰ç…§æç¤ºï¼Œä¸€ç‚¹ç‚¹å¡«å†™å®Œæˆå°±è¡Œäº†ï¼Œæ²¡å•¥ç‰¹åˆ«çš„ã€‚</p>
<p><code>è¸©å‘æ€»ç»“</code>ï¼š</p>
<ul>
<li><strong>æµ‹è¯•è´¦å·</strong>ï¼šä½ çš„APPä¸­åªè¦æœ‰ç™»å½•æ¨¡å—ï¼Œå°±ä¸€å®šè¦æä¾›æµ‹è¯•è´¦å·ï¼Œå°±ç®—ä½ çº¯æ‰‹æœºå·ç™»å½•ä¹Ÿä¸è¡Œï¼Œå¿…é¡»æä¾›æµ‹è¯•è´¦å·ã€‚</li>
<li><strong>æ³¨é”€åŠŸèƒ½</strong>ï¼šè‹¹æœå•†åº—ç¡¬æ€§è¦æ±‚ï¼Œå¿…é¡»è¦æœ‰ <code>æ³¨é”€åŠŸèƒ½</code>ï¼Œä½†å…¶å®ä¹Ÿæ²¡é‚£ä¹ˆä¸¥æ ¼ï¼Œä½ åªè¦UIæ˜¾ç¤ºæ˜¯é‚£ä¹ˆå›äº‹å°±è¡Œï¼Œå°±å½“ <code>é€€å‡ºç™»å½•</code> åŠŸèƒ½å»åšå°±è¡Œäº†ã€‚</li>
</ul>
<h4 data-id="heading-15">4. é¢„è§ˆå›¾åˆ¶ä½œæ¨è</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4259d49b6821497a87643f795151d86d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=%2FGn14RBp%2B2TpiiY5QY8v%2FLoM7As%3D" alt="æˆªå±2025-12-09 16.47.09.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f7b46132b1843d584e67c72244aec3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=ymvkRQnEBTvkr6qmRtrqHnhBSp0%3D" alt="æˆªå±2025-12-09 16.46.11.png" loading="lazy"/></p>
<p align="center"> 
           <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d885c55b4fb49a6b4a256d422fbde9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=%2BOQKmXPfoaxUAScl80foPzYuvMQ%3D" width="100%" loading="lazy"/>
</p>
<blockquote>
<p>æ³¨æ„æ˜¯éœ€è¦è®¢é˜…ä»˜è´¹çš„ï¼Œè¦æ˜¯æœ‰ä»€ä¹ˆæ›´å¥½çš„ï¼Œå¸Œæœ›è¯„è®ºå‘ŠçŸ¥ã€‚ğŸ˜‚</p>
</blockquote>
<h2 data-id="heading-16">å±•æœ›</h2>
<p>åœ¨åç»­è§„åˆ’çš„æ–°åŠŸèƒ½ä¸­ï¼Œå°†ä»¥<strong>å¤§å­¦æœŸæœ«è€ƒè¯•å¤ä¹ </strong>ä½œä¸ºå…¸å‹åº”ç”¨åœºæ™¯è¿›è¡Œè®¾è®¡ã€‚é€šå¸¸åœ¨æœŸæœ«é˜¶æ®µï¼Œè€å¸ˆéƒ½ä¼šç»™å‡ºæ˜ç¡®çš„è€ƒè¯•èŒƒå›´ã€å¤ä¹ å¤§çº²ä»¥åŠç›¸å…³èµ„æ–™æ–‡æ¡£ï¼Œè€Œä¸´é˜µç£¨æªçš„å­¦ç”Ÿå¾€å¾€é¢ä¸´èµ„æ–™ç¹å¤šã€é‡ç‚¹åˆ†æ•£ã€ä¸çŸ¥ä»ä½•ä¸‹æ‰‹çš„é—®é¢˜ã€‚</p>
<p>é’ˆå¯¹è¿™ä¸€ç—›ç‚¹ï¼Œç”¨æˆ·å¯ä»¥å°†è€å¸ˆæä¾›çš„å¤ä¹ æ–‡æ¡£ç›´æ¥å¯¼å…¥ Appï¼Œç³»ç»Ÿä¼šåŸºäº AI å¯¹å†…å®¹è¿›è¡Œè‡ªåŠ¨è§£æä¸å½’çº³ï¼Œå°†é›¶æ•£çš„æ–‡æœ¬ä¿¡æ¯æ•´ç†ä¸º<strong>æ€ç»´å¯¼å›¾å½¢å¼çš„çŸ¥è¯†å›¾è°±</strong>ï¼Œæ¸…æ™°å‘ˆç°å„ç« èŠ‚ä¸çŸ¥è¯†ç‚¹ä¹‹é—´çš„å±‚çº§ä¸å…³è”å…³ç³»ã€‚</p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œç”¨æˆ·å¯å›´ç»•ä»»æ„çŸ¥è¯†èŠ‚ç‚¹ä¸€é”®ç”Ÿæˆå¯¹åº”é¢˜ç›®ï¼Œç”¨äºé’ˆå¯¹æ€§å¤ä¹ ä¸è‡ªæµ‹ï¼Œåšåˆ°<strong>å“ªé‡Œè–„å¼±ç»ƒå“ªé‡Œ</strong>ã€‚é€šè¿‡<code>æ–‡æ¡£ â†’ çŸ¥è¯†å›¾è°± â†’ é¢˜ç›®ç»ƒä¹ </code> çš„é—­ç¯æ–¹å¼ï¼Œå¸®åŠ©ç”¨æˆ·æ›´é«˜æ•ˆåœ°ç†è§£é‡ç‚¹å†…å®¹ï¼Œæå‡æœŸæœ«å¤ä¹ çš„é’ˆå¯¹æ€§ä¸æ•´ä½“æ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35b417d2198c42078dbeaccf6a858378~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=5FboRa4pjjpbYklOI6Ab6J0qrzo%3D" alt="46a1b81cde50407982da18d76b651dcf.gif" loading="lazy"/></p>
<blockquote>
<p>ğŸ˜­ ä½œä¸ºå¤§å­¦æ¯•ä¸šç”Ÿçš„æ·±å½»æ„Ÿæ‚Ÿã€‚</p>
</blockquote>
<h2 data-id="heading-17">æ”¯æŒ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/078b69255afa4bd68f3ad65d8e674014~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876051&amp;x-signature=tGaZCpB%2Buf8VAWzzD6r7vetgMgU%3D" alt="ScreenRecording_12-08-2025 22-10-28_1.gif" loading="lazy"/></p>
<p><code>AppStore</code> æœç´¢ <code>å‡ºé¢˜ä¾ </code> å³å¯ï¼Œæ¯ä¸ªç”¨æˆ·æ¯å¤©å¯å…è´¹ä½¿ç”¨ä¸‰æ¬¡ã€‚</p>
<blockquote>
<p>æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒä¸åé¦ˆã€‚ğŸ™</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³ideaé”™è¯¯æç¤º:æ— æ³•è§£æ'è¡¨å']]></title>    <link>https://juejin.cn/post/7581658157145505842</link>    <guid>https://juejin.cn/post/7581658157145505842</guid>    <pubDate>2025-12-09T09:14:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581658157145505842" data-draft-id="7581648776303575049" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³ideaé”™è¯¯æç¤º:æ— æ³•è§£æ'è¡¨å'"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T09:14:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ShaneD771"/> <meta itemprop="url" content="https://juejin.cn/user/2482077907032171"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³ideaé”™è¯¯æç¤º:æ— æ³•è§£æ'è¡¨å'
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2482077907032171/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ShaneD771
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T09:14:09.000Z" title="Tue Dec 09 2025 09:14:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. é—®é¢˜ç°è±¡</h3>
<p>Database é¢æ¿é‡Œå·²ç»æˆåŠŸè¿æ¥äº†æ•°æ®åº“ï¼Œè¡¨éƒ½èƒ½çœ‹å¾—åˆ°ã€‚</p>
<p>SQL ä»£ç ï¼ˆMyBatis XML æˆ– <code>@Select</code> æ³¨è§£ï¼‰æœ¬èº«æ²¡æœ‰è¯­æ³•é”™è¯¯ï¼Œåœ¨æ•°æ®åº“é‡Œæ‰§è¡Œä¹Ÿèƒ½è·‘é€šã€‚</p>
<p>ä½†æ˜¯IDEA ç¼–è¾‘å™¨é‡Œï¼Œæç¤º <code>Unable to resolve table 'xxx'</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c3ed85f58334db0b9015900984c785d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhbmVENzcx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876449&amp;x-signature=t7illpHORyyzKUqVaepoi2i7Iz4%3D" alt="image-20251124135706567" loading="lazy"/></p>
<h3 data-id="heading-1">2. å¿«é€Ÿè§£å†³æ–¹æ¡ˆ</h3>
<p>è¿™ä¸ªé—®é¢˜çš„æ ¹æºåœ¨äº <strong>IDEA ä¸çŸ¥é“å½“å‰çš„ä»£ç æ–‡ä»¶åº”è¯¥å¯¹åº”å“ªä¸ªæ•°æ®åº“è¿æ¥</strong>ã€‚æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è®¾ç½® <strong>SQL Resolution Scopeï¼ˆSQL è§£æä½œç”¨åŸŸï¼‰</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23a174bdf8e649609e341998bba4f859~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhbmVENzcx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876449&amp;x-signature=UO8zgF18ujtp7NC%2B3XawVHHxrEQ%3D" alt="image-20251124142214645" loading="lazy"/></p>
<h3 data-id="heading-2">3. ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Ÿ</h3>
<p>æˆ‘æ˜æ˜è®¾ç½®äº† SQL Dialectï¼ˆæ–¹è¨€ï¼‰ï¼Œä¹Ÿè¿æ¥äº†æ•°æ®åº“ï¼Œè€Œä¸”æˆ‘åªæœ‰ä¸€ä¸ªæ•°æ®åº“ï¼ŒIDEA ä¸ºä»€ä¹ˆä¸èƒ½è‡ªå·±åŒ¹é…å‘¢ï¼Ÿ</p>
<h4 data-id="heading-3">3.1 ä¸‰å¤§æ¦‚å¿µçš„åŒºåˆ«</h4>
<ul>
<li><strong>SQL Dialect (æ–¹è¨€)</strong>ï¼šç›¸å½“äºâ€œè¯­æ³•ä¹¦â€ã€‚å®ƒå‘Šè¯‰ IDEA è¿™æ®µä»£ç æ˜¯ MySQL è¯­æ³•è¿˜æ˜¯ Oracle è¯­æ³•ï¼Œè´Ÿè´£æ£€æŸ¥è¯­æ³•ç»“æ„ï¼ˆå¦‚ <code>SELECT</code> æ‹¼å†™å¯¹ä¸å¯¹ï¼‰ã€‚</li>
<li><strong>Data Source (æ•°æ®æº)</strong>ï¼šç›¸å½“äºâ€œå­—å…¸â€ã€‚è¿™æ˜¯çœŸå®çš„æ•°æ®åº“è¿æ¥ï¼ŒåŒ…å«æ‰€æœ‰çš„è¡¨ç»“æ„å…ƒæ•°æ®ã€‚</li>
<li><strong>Resolution Scope (ä½œç”¨åŸŸ)</strong>ï¼šç›¸å½“äºâ€œæŒ‡é’ˆ/ä¸Šä¸‹æ–‡â€ã€‚å®ƒçš„ä½œç”¨æ˜¯æŠŠâ€œä»£ç â€å’Œâ€œå­—å…¸â€è¿èµ·æ¥ã€‚</li>
</ul>
<p><strong>é£˜çº¢çš„åŸå› å°±æ˜¯ï¼š</strong> ä½ æœ‰äº†è¯­æ³•ä¹¦ï¼Œä¹Ÿæœ‰äº†å­—å…¸ï¼Œä½† IDEA ä¸çŸ¥é“è¿™æ®µä»£ç è¯¥æŸ¥å“ªæœ¬å­—å…¸ã€‚</p>
<h4 data-id="heading-4">3.2 ä¸ºä»€ä¹ˆä¸èƒ½é€‰ "All Data Sources"ï¼Ÿ</h4>
<p>å³ä½¿åªæœ‰ä¸€ä¸ªæ•°æ®åº“ï¼Œé€‰â€œæ‰€æœ‰æ•°æ®æºâ€ä¾ç„¶ä¼šæŠ¥é”™ã€‚</p>
<p><strong>æœ¬è´¨åŸå› ï¼šç¼ºå¤±â€œé»˜è®¤ä¸Šä¸‹æ–‡â€ (Default Context)ã€‚</strong></p>
<p>æˆ‘ä»¬åœ¨å†™ SQL æ—¶é€šå¸¸åªå†™<strong>çŸ­è¡¨å</strong>ï¼ˆå¦‚ <code>SELECT * FROM user</code>ï¼‰ï¼Œè€Œä¸æ˜¯<strong>å…¨é™å®šå</strong>ï¼ˆå¦‚ <code>SELECT * FROM my_db.public.user</code>ï¼‰ã€‚</p>
<ul>
<li><strong>å½“ä½ é€‰â€œå…·ä½“æ•°æ®åº“â€æ—¶ï¼š</strong> ç›¸å½“äºè¿›å…¥äº†è¯¥æ•°æ®åº“çš„ Sessionï¼Œæ‹¥æœ‰äº†é»˜è®¤çš„ Schemaã€‚IDEA é‡åˆ° <code>user</code> è¡¨ï¼Œä¼šè‡ªåŠ¨å»é»˜è®¤ Schema ä¸‹æŸ¥æ‰¾ã€‚<strong>(ç›¸å½“äºç›¸å¯¹è·¯å¾„ï¼š<code>./user</code>)</strong></li>
<li><strong>å½“ä½ é€‰â€œæ‰€æœ‰æ•°æ®æºâ€æ—¶ï¼š</strong> ç›¸å½“äºç«™åœ¨äº†æœåŠ¡å™¨çš„â€œå¤§å…â€é‡Œã€‚è™½ç„¶åªæœ‰ä¸€ä¸ªåº“ï¼Œä½†å› ä¸ºæ²¡æœ‰æ‰§è¡Œ <code>USE database</code> è¿™ç§åˆ‡æ¢ä¸Šä¸‹æ–‡çš„æ“ä½œï¼ŒIDEA é¢å¯¹ <code>user</code> è¿™ä¸ªçŸ­åï¼Œä¸æ•¢æ“…è‡ªçŒœæµ‹å®ƒæ˜¯å±äºå“ªä¸ªåº“çš„ã€‚ä¸ºäº†ä¸¥è°¨å’Œé˜²æ­¢æ­§ä¹‰ï¼Œå®ƒé€‰æ‹©æŠ¥é”™ã€‚<strong>(ç›¸å½“äºç»å¯¹è·¯å¾„ç¼ºå¤±)</strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAG è¡¨æ ¼è§£ææœ€ä½³å®è·µï¼šæ ‡é¢˜è¯†åˆ«ã€è¡¨å¤´æ¨æ–­ä¸è¯­ä¹‰é‡å»ºå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7581664445240918031</link>    <guid>https://juejin.cn/post/7581664445240918031</guid>    <pubDate>2025-12-09T09:13:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581664445240918031" data-draft-id="7581670270843994152" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAG è¡¨æ ¼è§£ææœ€ä½³å®è·µï¼šæ ‡é¢˜è¯†åˆ«ã€è¡¨å¤´æ¨æ–­ä¸è¯­ä¹‰é‡å»ºå…¨æŒ‡å—"/> <meta itemprop="keywords" content="æ¶æ„,Agent,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-09T09:13:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸¸å…ˆæ£®"/> <meta itemprop="url" content="https://juejin.cn/user/4388906148043879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAG è¡¨æ ¼è§£ææœ€ä½³å®è·µï¼šæ ‡é¢˜è¯†åˆ«ã€è¡¨å¤´æ¨æ–­ä¸è¯­ä¹‰é‡å»ºå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906148043879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸¸å…ˆæ£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T09:13:57.000Z" title="Tue Dec 09 2025 09:13:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ RAGï¼ˆRetrieval-Augmented Generationï¼‰ä½“ç³»ä¸­ï¼Œè¡¨æ ¼ä¸€ç›´æ˜¯æœ€éš¾å¤„ç†çš„æ–‡æ¡£ç±»å‹ä¹‹ä¸€ã€‚ç›¸æ¯”æ™®é€šæ®µè½æ–‡æœ¬ï¼Œè¡¨æ ¼å¤©ç„¶å¸¦æœ‰ç»“æ„åŒ–ä¿¡æ¯â€”â€”ä½† OCR å¾€å¾€ä¼šä¸¢å¤±è¿™äº›ç»“æ„ï¼Œä½¿å¾—æ¨¡å‹æ—¢ä¸çŸ¥é“å“ªäº›æ˜¯æ ‡é¢˜ã€å“ªäº›æ˜¯è¡¨å¤´ã€å“ªäº›æ˜¯æ•°æ®ï¼Œæ›´æ— æ³•ç†è§£è¡¨æ ¼å†…éƒ¨çš„è¯­ä¹‰å…³è”ã€‚å¦‚æœä¸èƒ½å‡†ç¡®è¯†åˆ«è¿™äº›å…³é”®ä¿¡æ¯ï¼Œæ£€ç´¢é˜¶æ®µå°±éš¾ä»¥åšåˆ°ã€Œé—®ä»€ä¹ˆï¼Œå–åˆ°ä»€ä¹ˆã€ï¼Œæœ€ç»ˆå¯¼è‡´å¬å›ç‡ä½ã€å›ç­”ç‰‡æ®µåŒ–ã€ä¸å‡†ç¡®ã€‚</p>
<p>å› æ­¤ï¼Œè¯†åˆ«è¡¨æ ¼â€œæ ‡é¢˜ + è¡¨å¤´â€å¯¹äº RAG è‡³å…³é‡è¦ï¼š</p>
<ul>
<li>è¡¨æ ¼æ ‡é¢˜æä¾›äº†å…¨å±€ä¸»é¢˜ï¼›</li>
<li>è¡¨å¤´æä¾›äº†å­—æ®µè¯­ä¹‰ï¼›</li>
<li>æ•°æ®è¡Œåˆ™æ‰¿è½½äº†å…·ä½“äº‹å®ã€‚</li>
</ul>
<p>åªæœ‰åŒæ—¶è¿˜åŸä¸‰è€…çš„è¯­ä¹‰å…³ç³»ï¼Œå‘é‡æ£€ç´¢æ‰èƒ½çœŸæ­£ç†è§£â€œè¿™æ˜¯ä¸€å¼ å…³äºä»€ä¹ˆçš„è¡¨æ ¼â€ï¼Œâ€œæ¯åˆ—åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆâ€ï¼Œä»¥åŠâ€œæ¯ä¸€è¡Œåœ¨è¡¨è¾¾ä»€ä¹ˆâ€ã€‚</p>
<p>ä¸ºäº†è®©è¡¨æ ¼åœ¨ RAG ä¸­èƒ½è¢«ç†è§£ã€è¢«æ£€ç´¢ã€è¢«ä½¿ç”¨ï¼Œæˆ‘ä»¬ä»ä¸‰ä¸ªå…³é”®æ–¹å‘è¿›è¡Œä¼˜åŒ–ï¼š</p>
<ol>
<li>
<p><strong>è¡¨æ ¼æ ‡é¢˜è¯†åˆ«ç­–ç•¥ä¼˜åŒ–</strong><br/>
è¡¨æ ¼æ ‡é¢˜å¸¸è¢« OCR è¯¯è¯†ä¸ºæ™®é€šæ–‡æœ¬ï¼Œéœ€è¦ä½¿ç”¨ä½ç½®ã€æ ·å¼ã€è·ç¦»ã€è¯­ä¹‰ç­‰å¤šæ¨¡ç­–ç•¥é‡å»ºæ ‡é¢˜ã€‚</p>
</li>
<li>
<p><strong>è¡¨å¤´è¯†åˆ«ä¸è¡¥å…¨ç­–ç•¥ä¼˜åŒ–</strong><br/>
OCR è¯†åˆ«å‡ºçš„è¡¨å¤´å¯èƒ½ç¼ºå¤±ã€åˆå¹¶é”™ä½æˆ–é¡ºåºé”™è¯¯ï¼Œéœ€è¦é€šè¿‡å¤šç»´ç®—æ³•è¿›è¡Œæ¢å¤ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®è¡Œè¡¨ç¤ºä¸è¡¨æ ¼æ•´ä½“è¯­ä¹‰å¢å¼ºï¼ˆTable Global Contextï¼‰</strong><br/>
å°†æ¯ä¸€è¡Œè½¬ä¸ºé¢å‘æ£€ç´¢çš„è¯­ä¹‰å¥å­ï¼Œå¹¶ä¸ºæ•´å¼ è¡¨æ„å»ºå…¨å±€è¯­ä¹‰ä¸Šä¸‹æ–‡ï¼Œæé«˜å¬å›ç‡ä¸å¯è§£é‡Šæ€§ã€‚</p>
</li>
</ol>
<p>é€šè¿‡è¿™äº›ç­–ç•¥ï¼ŒRAG æ‰èƒ½çœŸæ­£è¯»æ‡‚è¡¨æ ¼ï¼Œä½¿æ£€ç´¢ä¸ç”Ÿæˆçš„æ•´ä½“è´¨é‡æ˜¾è‘—æå‡ã€‚</p>
<h2 data-id="heading-1">è¯†åˆ«è¡¨æ ¼æ ‡é¢˜</h2>
<p>è¡¨æ ¼æ ‡é¢˜æ˜¯ç†è§£è¡¨æ ¼å†…å®¹ã€ç»“æ„ä¸ç”¨é€”çš„å…³é”®å…ƒä¿¡æ¯ã€‚å‡†ç¡®è¯†åˆ«æ ‡é¢˜ä¸ä»…èƒ½æ˜ç¡®è¡¨æ ¼ä¸»é¢˜ï¼ˆå¦‚â€œä¸´åºŠè¯•éªŒæ‚£è€…åŸºçº¿ç‰¹å¾â€â€œPROTACç ”å‘ç®¡çº¿â€ï¼‰ï¼Œä¹Ÿä¸ºåç»­çš„è¡¨æ ¼å¯¹é½ã€å¤šè¡¨å…³è”ã€è¯­ä¹‰æ£€ç´¢åŠç»“æ„åŒ–å­˜å‚¨æä¾›å¿…è¦ä¾æ®ã€‚ç¼ºä¹å‡†ç¡®æ ‡é¢˜çš„è¡¨æ ¼ï¼Œå…¶æ•°æ®ä»·å€¼ä¸å¯å¤ç”¨æ€§å°†æ˜¾è‘—é™ä½ã€‚</p>
<p>å½“å‰éƒ¨åˆ† OCR æœåŠ¡ï¼ˆå¦‚TextInï¼‰å·²å…·å¤‡è¡¨æ ¼æ ‡é¢˜è¯†åˆ«èƒ½åŠ›ï¼Œå¯è¾“å‡ºç»“æ„åŒ–æ ‡ç­¾ï¼ˆä¾‹å¦‚ sub_type="table_title"ï¼‰ã€‚ç„¶è€Œåœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œä»æ™®éå­˜åœ¨æ ‡é¢˜æ¼è¯†åˆ«æˆ–è¯†åˆ«ä¸å‡†çš„æƒ…å†µã€‚å› æ­¤ï¼Œéœ€é€šè¿‡å¤šç»´åº¦ç­–ç•¥å¯¹OCRåŸå§‹è¾“å‡ºè¿›è¡ŒäºŒæ¬¡è¯†åˆ«ä¸ä¿®æ­£ã€‚</p>
<p>ä¸ºæå‡è¡¨æ ¼æ ‡é¢˜çš„è¯†åˆ«å‡†ç¡®ç‡ï¼Œå¯ç»“åˆä»¥ä¸‹ç­–ç•¥å¯¹OCRè¾“å‡ºç»“æœè¿›è¡Œç»¼åˆåˆ¤æ–­ã€‚å„ç­–ç•¥æ—¢å¯ç‹¬ç«‹åº”ç”¨ï¼Œä¹Ÿå¯çº³å…¥åŠ æƒè¯„åˆ†ä½“ç³»ï¼Œå…±åŒæå‡è¯†åˆ«å¯é æ€§ã€‚</p>
<h3 data-id="heading-2">ä½ç½®ç‰¹å¾åˆ¤æ–­</h3>
<p><strong>ç›®çš„</strong>ï¼šä¾æ®æ–‡æœ¬ä¸è¡¨æ ¼çš„ç›¸å¯¹ä½ç½®åˆ¤æ–­å…¶æ˜¯å¦ä¸ºæ ‡é¢˜ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>åˆ©ç”¨ OCR è¿”å›çš„æ–‡æœ¬æ¡†åæ ‡ï¼Œè®¡ç®—æ–‡æœ¬æ¡†ä¸è¡¨æ ¼åŒºåŸŸåœ¨ Y æ–¹å‘ä¸Šçš„è·ç¦»ã€‚</li>
<li>è‹¥æ–‡æœ¬æ¡†åº•éƒ¨ä¸è¡¨æ ¼é¡¶éƒ¨çš„å‚ç›´è·ç¦»éå¸¸è¿‘ï¼ˆå¦‚ â‰¤ 20pxï¼‰ï¼Œåˆ™è¯¥æ–‡æœ¬æ›´å¯èƒ½æ˜¯æ ‡é¢˜ã€‚</li>
<li>è‹¥æ–‡æœ¬æ¡†æ°´å¹³æ–¹å‘ä¸è¡¨æ ¼å·¦å³è¾¹ç•Œæ˜¾è‘—é‡å ï¼ˆè¦†ç›–æ¯”ä¾‹ &gt; 60%ï¼‰ï¼Œæ ‡é¢˜æ¦‚ç‡è¿›ä¸€æ­¥æå‡ã€‚</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼šè·ç¦»è¶Šè¿‘ï¼Œä½ç½®è¦†ç›–è¶Šå®Œæ•´ï¼Œå¾—åˆ†è¶Šé«˜ï¼ˆ0~1ï¼‰ã€‚</p>
<h3 data-id="heading-3">å­—ä½“ç‰¹å¾åˆ¤æ–­</h3>
<p><strong>ç›®çš„</strong>ï¼šä»å­—å·ã€ä½ç½®å¯¹é½ç­‰è§†è§‰ç‰¹å¾åˆ¤æ–­æ–‡æœ¬æ˜¯å¦å¯èƒ½æ˜¯æ ‡é¢˜ã€‚</p>
<p>å¤§éƒ¨åˆ† OCR æœåŠ¡éƒ½ä¸ä¼šç›´æ¥æä¾›æ–‡å­—å­—å·ä¿¡æ¯ã€‚å› æ­¤ï¼Œéœ€è¦é€šè¿‡æ–‡æœ¬æ¡†åæ ‡ä¼°ç®—å­—å·ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<p>OCR æ–‡æœ¬æ¡†åæ ‡ä¿¡æ¯ï¼ˆä»¥ TextIn ä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"position"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>x0<span class="hljs-punctuation">,</span> y0<span class="hljs-punctuation">,</span> x1<span class="hljs-punctuation">,</span> y1<span class="hljs-punctuation">,</span> x2<span class="hljs-punctuation">,</span> y2<span class="hljs-punctuation">,</span> x3<span class="hljs-punctuation">,</span> y3<span class="hljs-punctuation">]</span>
</code></pre>
<p>å­—å·ä¼°ç®—å…¬å¼ï¼ˆé«˜åº¦å·®è¿‘ä¼¼ä¼°ç®—ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">font_size</span> = (y3 - y0) / <span class="hljs-number">2</span>
</code></pre>
<p><strong>åˆ¤æ–­é€»è¾‘</strong>ï¼š</p>
<ul>
<li>å­—å·æ˜¾è‘—å¤§äºè¡¨æ ¼æ­£æ–‡å¹³å‡å­—å· â†’ æ ‡é¢˜æ¦‚ç‡é«˜ã€‚</li>
<li>å­—å·æ˜¾è‘—å°äºæ­£æ–‡ä½†å±…ä¸­ â†’ å¯èƒ½æ˜¯å‰¯æ ‡é¢˜ã€‚</li>
<li>è‹¥æ–‡æœ¬æ¡†åœ¨è¡¨æ ¼å·¦å³è¾¹ç•ŒèŒƒå›´å†…æ°´å¹³å±…ä¸­ â†’ æ ‡é¢˜æ¦‚ç‡ä¸Šå‡ã€‚</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼šå­—å·ä¸æ­£æ–‡å·®å¼‚è¶Šå¤§ã€ä½ç½®è¶Šå±…ä¸­ï¼Œå¾—åˆ†è¶Šé«˜ï¼ˆ0~1ï¼‰ã€‚</p>
<h3 data-id="heading-4">æ–‡æœ¬å†…å®¹ç‰¹å¾</h3>
<p><strong>ç›®çš„</strong>ï¼šä¾æ®å†…å®¹ç‰¹å¾åˆ¤æ–­æ–‡æœ¬æ˜¯å¦å…·å¤‡æ ‡é¢˜å…¸å‹è¡¨ç°ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>å»ºç«‹å¸¸ç”¨è¡¨æ ¼æ ‡é¢˜å…³é”®è¯è¡¨ï¼Œå¦‚ï¼š
"Table", "Tab.", "è¡¨", "Summary", "Overview", "Baseline", "Characteristics", "ç»Ÿè®¡", "æƒ…å†µ"</li>
<li>æ–‡æœ¬åŒ…å«å…³é”®è¯ â†’ é«˜åˆ†ã€‚</li>
<li>æ–‡æœ¬é•¿åº¦é€‚ä¸­ï¼ˆ&lt;= 25 å­—ç¬¦ï¼‰ä¸”æ— å¥å·ç»“å°¾ â†’ åŠ åˆ†ï¼ˆæ ‡é¢˜é€šå¸¸ä¸ºçŸ­è¯­è€Œéå¥å­ï¼‰ã€‚</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼šå…³é”®è¯åŒ¹é…è¶Šå¤šï¼Œç»“æ„ç‰¹å¾è¶Šç¬¦åˆï¼Œå¾—åˆ†è¶Šé«˜ï¼ˆ0~1ï¼‰ã€‚</p>
<h3 data-id="heading-5">æ–‡æœ¬è¯­ä¹‰ç›¸ä¼¼åº¦åˆ¤æ–­</h3>
<p><strong>ç›®çš„</strong>ï¼šé€šè¿‡è¯­ä¹‰å…³è”åˆ¤æ–­æ–‡æœ¬æ˜¯å¦ä¸è¡¨æ ¼å†…å®¹æ„æˆâ€œæ ‡é¢˜â€”æ•°æ®â€å…³ç³»ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>å°†æ–‡æœ¬ã€è¡¨æ ¼åˆ—åã€è¡Œæ•°æ®åˆ†åˆ«ç”Ÿæˆå‘é‡ï¼ˆembeddingï¼‰ã€‚</li>
<li>è®¡ç®—è¯­ä¹‰ç›¸ä¼¼åº¦ï¼š
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">similarity</span> = cos(embedding_text, embedding_table)
</code></pre>
</li>
<li>è‹¥æ–‡æœ¬ä¸è¡¨æ ¼ä¸»é¢˜ç›¸å…³ï¼Œæˆ–èƒ½æ¦‚æ‹¬è¡¨æ ¼å†…å®¹ â†’ é«˜é¢‘ç‡æ ‡é¢˜ç‰¹å¾ã€‚</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼šç›¸ä¼¼åº¦ â‰¥ 0.7 é€šå¸¸å¯è§†ä¸ºå¼ºç›¸å…³ã€‚</p>
<h3 data-id="heading-6">æ ¼å¼å’Œæ’ç‰ˆç‰¹å¾åˆ¤æ–­</h3>
<p><strong>ç›®çš„</strong>ï¼šåˆ©ç”¨æ’ç‰ˆè¿¹è±¡åˆ¤æ–­æ ‡é¢˜å¯èƒ½æ€§ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>æ–‡æœ¬æ˜¯å¦ç‹¬å å•è¡Œï¼ˆæ ‡é¢˜é€šå¸¸ä¸ä¸å…¶ä»–æ–‡æœ¬åŒè¡Œï¼‰ã€‚</li>
<li>æ˜¯å¦å«æœ‰æ ¼å¼æ€§ç¬¦å·ï¼šå†’å·ã€æ‹¬å·ã€%ã€$ ç­‰ â†’ å¯èƒ½æ˜¯åˆ†ç±»æè¿°æˆ–ç»Ÿè®¡æ ‡é¢˜ã€‚</li>
<li>æ–‡æœ¬æ¡†æ˜¯å¦åœ¨é¡µé¢æˆ–è¡¨æ ¼åŒºåŸŸå±…ä¸­ä½ç½®ã€‚</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼šç¬¦åˆæ ‡é¢˜å¸¸è§æ’ç‰ˆè¶Šå¤šï¼Œå¾—åˆ†è¶Šé«˜ã€‚</p>
<p>æœ€åé€šè¿‡ä»¥ä¸Šç­–ç•¥è¿›è¡Œå¤šç­–ç•¥åŠ æƒè¯„åˆ†ï¼Œç»¼åˆåˆ¤æ–­æ–‡æœ¬æ˜¯å¦ä¸ºæ ‡é¢˜ã€‚</p>
<h3 data-id="heading-7">åŠ æƒè¯„åˆ†ç®—æ³•</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">TitleScore</span> = w1*S_position + w2*S_font + w3*S_content + w4*S_semantic + w5*S_format
</code></pre>
<ul>
<li>S_iï¼šå„ç­–ç•¥å¾—åˆ†ï¼ˆ0~1ï¼‰</li>
<li>w_iï¼šå¯è°ƒæƒé‡</li>
</ul>
<p>æƒé‡ç¤ºä¾‹ï¼š</p>





























<table><thead><tr><th>ç­–ç•¥</th><th>æƒé‡</th></tr></thead><tbody><tr><td>ä½ç½®ç‰¹å¾</td><td>1.5</td></tr><tr><td>å­—ä½“ç‰¹å¾</td><td>1.5</td></tr><tr><td>æ–‡æœ¬å†…å®¹</td><td>2.0</td></tr><tr><td>è¯­ä¹‰ç›¸ä¼¼</td><td>1.0</td></tr><tr><td>æ ¼å¼æ’ç‰ˆ</td><td>0.8</td></tr></tbody></table>
<p>é˜ˆå€¼ç¤ºä¾‹ï¼š</p>
<ul>
<li>â‰¥ 2.5 â†’ åˆ¤å®šä¸ºæ ‡é¢˜</li>
<li>1.5 ~ 2.5 â†’ é«˜æ¦‚ç‡æ ‡é¢˜ï¼Œå»ºè®®äººå·¥ç¡®è®¤</li>
<li>&lt; 1.5 â†’ éæ ‡é¢˜</li>
</ul>
<h2 data-id="heading-8">è¯†åˆ«è¡¨æ ¼è¡¨å¤´</h2>
<p>è¡¨æ ¼è¡¨å¤´æ˜¯è¡¨æ ¼æ•°æ®ç»“æ„åŒ–å’Œè¯­ä¹‰ç†è§£çš„æ ¸å¿ƒè¦ç´ ã€‚å‡†ç¡®è¯†åˆ«è¡¨å¤´ä¸ä»…èƒ½æ˜ç¡®å„åˆ—æ•°æ®çš„å±æ€§ä¸å«ä¹‰ï¼ˆå¦‚â€œæ‚£è€…å¹´é¾„â€â€œè¯ç‰©å‰‚é‡â€â€œå®éªŒç»„åˆ«â€ï¼‰ï¼Œæ›´æ˜¯å®ç°è¡¨æ ¼æ•°æ®æ­£ç¡®è§£æã€è·¨è¡¨å¯¹é½ã€æ™ºèƒ½æŸ¥è¯¢åŠä¸‹æ¸¸åˆ†æå¤„ç†çš„åŸºç¡€å‰æã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨å®é™…çš„OCRè¯†åˆ«åœºæ™¯ä¸­ï¼Œè¡¨å¤´è¯†åˆ«é¢ä¸´ç€æ˜¾è‘—æŒ‘æˆ˜ï¼šå¤šæ•°OCRæœåŠ¡ç¼ºä¹å¯¹è¡¨å¤´è¡Œçš„ç»“æ„åŒ–æ ‡æ³¨èƒ½åŠ›ï¼Œå¸¸å°†è¡¨å¤´ä¸æ•°æ®è¡Œæ··åŒå¤„ç†ï¼Œæˆ–ä»…ä¾èµ–è§†è§‰ç‰¹å¾è¿›è¡Œç®€å•åˆ¤æ–­ã€‚è¿™ç§è¯†åˆ«ä¸è¶³ç›´æ¥å¯¼è‡´äº†è¡¨æ ¼æ•°æ®çš„â€œè¯­ä¹‰ä¸¢å¤±â€â€”â€”å³ä¾¿å•å…ƒæ ¼å†…å®¹è¢«å‡†ç¡®æå–ï¼Œå…¶å­—æ®µå«ä¹‰ä¸æ•°æ®å…³ç³»ä¹Ÿæ— æ³•è¢«æ­£ç¡®ç†è§£ï¼Œä¸¥é‡åˆ¶çº¦äº†è¡¨æ ¼æ•°æ®çš„è‡ªåŠ¨åŒ–åˆ©ç”¨ä»·å€¼ã€‚</p>
<p>é€šè¿‡å¯¹è¡¨æ ¼å†…å®¹çš„æ·±åº¦ç‰¹å¾åˆ†æï¼Œåœ¨OCRåŸå§‹è¾“å‡ºåŸºç¡€ä¸Šå®ç°è¡¨å¤´è¡Œçš„æ™ºèƒ½è¯†åˆ«ä¸éªŒè¯ï¼Œæå‡è¡¨æ ¼æ•°æ®çš„ç»“æ„åŒ–è´¨é‡ä¸å¯ç”¨æ€§ã€‚</p>
<h3 data-id="heading-9">æ–‡æœ¬ä¸æ•°å€¼åˆ†å¸ƒåˆ†æ</h3>
<p><strong>ç›®çš„</strong>ï¼šåŒºåˆ†æè¿°æ€§è¡¨å¤´æ–‡æœ¬ä¸æ•°å€¼å‹æ•°æ®å†…å®¹ï¼ŒåŸºäºè¡¨æ ¼è¡Œé—´çš„å†…å®¹ç±»å‹å·®å¼‚åˆ¤æ–­é¦–è¡Œæ˜¯å¦ä¸ºè¡¨å¤´ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>éå†é¦–è¡Œæ‰€æœ‰å•å…ƒæ ¼ï¼Œç»Ÿè®¡éæ•°å­—æ–‡æœ¬å†…å®¹çš„æ¯”ä¾‹</li>
<li>éå†ç¬¬äºŒè¡Œæ‰€æœ‰å•å…ƒæ ¼ï¼Œç»Ÿè®¡çº¯æ•°å­—æˆ–å«æ•°å­—å†…å®¹çš„æ¯”ä¾‹</li>
<li>è®¡ç®—æ–‡æœ¬-æ•°å€¼åˆ†å¸ƒç‰¹å¾å¾—åˆ†</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>é¦–è¡Œæ–‡æœ¬æ¯”ä¾‹=85%ï¼Œæ¬¡è¡Œæ•°å€¼æ¯”ä¾‹=70% â†’ å¾—åˆ†ï¼š0.9ï¼ˆå¼ºè¡¨å¤´ä¿¡å·ï¼‰</li>
<li>é¦–è¡Œæ–‡æœ¬æ¯”ä¾‹=40%ï¼Œæ¬¡è¡Œæ•°å€¼æ¯”ä¾‹=30% â†’ å¾—åˆ†ï¼š0.3ï¼ˆå¼±è¡¨å¤´ä¿¡å·ï¼‰</li>
<li>é¦–è¡Œæ–‡æœ¬æ¯”ä¾‹=20%ï¼Œæ¬¡è¡Œæ•°å€¼æ¯”ä¾‹=80% â†’ å¾—åˆ†ï¼š0.1ï¼ˆå¯èƒ½ä¸ºæ•°æ®è¡Œï¼‰</li>
</ul>
<h3 data-id="heading-10">å•å…ƒæ ¼åˆå¹¶ç‰¹å¾æ£€æŸ¥</h3>
<p><strong>ç›®çš„</strong>ï¼šè¯†åˆ«è¡¨æ ¼ä¸­çš„åˆå¹¶å•å…ƒæ ¼ç‰¹å¾ï¼Œè¿™ç±»ç»“æ„ç‰¹å¾åœ¨è¡¨å¤´è¡Œä¸­å‡ºç°é¢‘ç‡æ˜¾è‘—é«˜äºæ•°æ®è¡Œã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>è§£æHTMLè¡¨æ ¼ç»“æ„ï¼Œæ£€æµ‹é¦–è¡Œå•å…ƒæ ¼çš„rowspanå’Œcolspanå±æ€§</li>
<li>ç»Ÿè®¡å­˜åœ¨è·¨è¡Œ(rowspan&gt;1)æˆ–è·¨åˆ—(colspan&gt;1)çš„å•å…ƒæ ¼æ•°é‡</li>
<li>æ ¹æ®åˆå¹¶å•å…ƒæ ¼çš„æ¯”ä¾‹è®¡ç®—ç‰¹å¾å¾—åˆ†</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>é¦–è¡Œ5ä¸ªå•å…ƒæ ¼ä¸­æœ‰2ä¸ªcolspan=2 â†’ å¾—åˆ†ï¼š1.0</li>
<li>é¦–è¡Œå•å…ƒæ ¼å‡ä¸ºrowspan=1ä¸”colspan=1 â†’ å¾—åˆ†ï¼š0.0</li>
<li>é¦–è¡Œæœ‰1ä¸ªrowspan=3çš„åˆå¹¶å•å…ƒæ ¼ â†’ å¾—åˆ†ï¼š0.8</li>
</ul>
<h3 data-id="heading-11">æ•°å€¼å æ¯”å¯¹æ¯”åˆ†æ</h3>
<p><strong>ç›®çš„</strong>ï¼šé€šè¿‡é‡åŒ–åˆ†æé¦–è¡Œä¸æ¬¡è¡Œçš„æ•°å€¼å†…å®¹å æ¯”å·®å¼‚ï¼Œè¯†åˆ«è¡¨å¤´è¡Œé€šå¸¸åŒ…å«è¾ƒå°‘æ•°å€¼å†…å®¹çš„ç‰¹ç‚¹ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>åˆ†åˆ«è®¡ç®—é¦–è¡Œå’Œæ¬¡è¡Œå•å…ƒæ ¼å†…å®¹ä¸­çš„æ•°å­—å­—ç¬¦å æ¯”</li>
<li>åº”ç”¨å¯¹æ¯”é€»è¾‘ï¼šé¦–è¡Œæ•°å€¼å æ¯”ä½ä¸”æ¬¡è¡Œæ•°å€¼å æ¯”é«˜æ—¶å¾—åˆ†é«˜</li>
<li>ä½¿ç”¨é˜ˆå€¼åˆ¤æ–­ï¼ˆé¦–è¡Œ&lt;30%ï¼Œæ¬¡è¡Œ&gt;50%ï¼‰</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>é¦–è¡Œæ•°å€¼å æ¯”=15%ï¼Œæ¬¡è¡Œæ•°å€¼å æ¯”=65% â†’ å¾—åˆ†ï¼š1.0</li>
<li>é¦–è¡Œæ•°å€¼å æ¯”=40%ï¼Œæ¬¡è¡Œæ•°å€¼å æ¯”=55% â†’ å¾—åˆ†ï¼š0.4</li>
<li>é¦–è¡Œæ•°å€¼å æ¯”=10%ï¼Œæ¬¡è¡Œæ•°å€¼å æ¯”=20% â†’ å¾—åˆ†ï¼š0.2</li>
</ul>
<h3 data-id="heading-12">åˆ—åè¯­ä¹‰ç›¸ä¼¼æ€§è¯„ä¼°</h3>
<p><strong>ç›®çš„</strong>ï¼šè¯„ä¼°è¡¨å¤´è¡Œå„åˆ—ååœ¨é•¿åº¦ã€æ ¼å¼å’Œç”¨è¯ä¸Šçš„ä¸€è‡´æ€§ç‰¹å¾ï¼Œæ•°æ®è¡Œé€šå¸¸ç¼ºä¹è¿™ç§è§„å¾‹æ€§ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>è®¡ç®—é¦–è¡Œå„å•å…ƒæ ¼æ–‡æœ¬ä¹‹é—´çš„å­—ç¬¦çº§ç›¸ä¼¼åº¦ï¼ˆå¦‚ç¼–è¾‘è·ç¦»ã€Jaccardç›¸ä¼¼åº¦ï¼‰</li>
<li>å¯¹æ¯”é¦–è¡Œä¸æ¬¡è¡Œçš„å¹³å‡æ–‡æœ¬é•¿åº¦å·®å¼‚</li>
<li>ç»¼åˆç›¸ä¼¼åº¦å’Œé•¿åº¦ç‰¹å¾è®¡ç®—å¾—åˆ†</li>
<li/>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>é¦–è¡Œï¼š["å§“å","å¹´é¾„","æ€§åˆ«"]ï¼ˆé•¿åº¦å‡ä¸º2ï¼Œé«˜åº¦ç›¸ä¼¼ï¼‰â†’ å¾—åˆ†ï¼š0.9</li>
<li>é¦–è¡Œï¼š["å®éªŒæ—¥æœŸ","æ ·æœ¬ç¼–å·","pHå€¼"]ï¼ˆé•¿åº¦ä¸ä¸€ä½†æ ¼å¼è§„æ•´ï¼‰â†’ å¾—åˆ†ï¼š0.7</li>
<li>é¦–è¡Œï¼š["å¼ ä¸‰","25","ç”·"]ï¼ˆå†…å®¹æ— è§„å¾‹ï¼‰â†’ å¾—åˆ†ï¼š0.2</li>
</ul>
<h3 data-id="heading-13">å­—ç¬¦é•¿åº¦å¯¹æ¯”æ£€æµ‹</h3>
<p><strong>ç›®çš„</strong>ï¼šåˆ©ç”¨è¡¨å¤´é€šå¸¸æ¯”æ•°æ®è¡Œæ›´ç®€æ´çš„è§„å¾‹ï¼Œé€šè¿‡å­—ç¬¦é•¿åº¦å¯¹æ¯”è¯†åˆ«è¡¨å¤´è¡Œã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>åˆ†åˆ«è®¡ç®—é¦–è¡Œå’Œæ¬¡è¡Œæ‰€æœ‰å•å…ƒæ ¼çš„å¹³å‡å­—ç¬¦é•¿åº¦</li>
<li>åº”ç”¨é•¿åº¦æ¯”ä¾‹é˜ˆå€¼ï¼šé¦–è¡Œå¹³å‡é•¿åº¦ &lt; æ¬¡è¡Œå¹³å‡é•¿åº¦ Ã— 0.7</li>
<li>æ ¹æ®æ¯”ä¾‹å·®å¼‚ç¨‹åº¦è®¡ç®—å¾—åˆ†</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>é¦–è¡Œå¹³å‡é•¿åº¦=4.2ï¼Œæ¬¡è¡Œå¹³å‡é•¿åº¦=12.5ï¼ˆæ¯”ä¾‹=0.34ï¼‰â†’ å¾—åˆ†ï¼š1.0</li>
<li>é¦–è¡Œå¹³å‡é•¿åº¦=8.1ï¼Œæ¬¡è¡Œå¹³å‡é•¿åº¦=10.3ï¼ˆæ¯”ä¾‹=0.79ï¼‰â†’ å¾—åˆ†ï¼š0.3</li>
<li>é¦–è¡Œå¹³å‡é•¿åº¦=15.6ï¼Œæ¬¡è¡Œå¹³å‡é•¿åº¦=9.8ï¼ˆæ¯”ä¾‹=1.59ï¼‰â†’ å¾—åˆ†ï¼š0.0</li>
</ul>
<h3 data-id="heading-14">ç‰¹æ®Šç¬¦å·æ¨¡å¼è¯†åˆ«</h3>
<p><strong>ç›®çš„</strong>ï¼šæ£€æµ‹è¡¨å¤´è¡Œç‰¹æœ‰çš„ç¬¦å·ä½¿ç”¨æ¨¡å¼ï¼Œå¦‚å•ä½ç¬¦å·ã€æ ¼å¼æ ‡æ³¨ç­‰ç‰¹æ®Šå­—ç¬¦ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>å®šä¹‰è¡¨å¤´å¸¸è§ç‰¹æ®Šç¬¦å·é›†ï¼š%, $, (), :, /, Â±, Â°ç­‰</li>
<li>æ‰«æé¦–è¡Œå•å…ƒæ ¼å†…å®¹ï¼Œè¯†åˆ«åŒ…å«ç‰¹æ®Šç¬¦å·çš„å•å…ƒæ ¼</li>
<li>æ ¹æ®åŒ…å«ç‰¹æ®Šç¬¦å·çš„å•å…ƒæ ¼æ¯”ä¾‹è®¡ç®—å¾—åˆ†</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>é¦–è¡Œï¼š["å‰‚é‡(mg)","ä»·æ ¼($)","æœ‰æ•ˆç‡(%)"] â†’ å¾—åˆ†ï¼š1.0</li>
<li>é¦–è¡Œï¼š["æ‚£è€…å¹´é¾„","æ²»ç–—æ–¹æ¡ˆ","éšè®¿æ—¥æœŸ"] â†’ å¾—åˆ†ï¼š0.0</li>
<li>é¦–è¡Œï¼š["æ¸©åº¦â„ƒ","pHå€¼","æµ“åº¦(mol/L)"] â†’ å¾—åˆ†ï¼š0.8</li>
</ul>
<h3 data-id="heading-15">é¢†åŸŸå…³é”®è¯åŒ¹é…</h3>
<p><strong>ç›®çš„</strong>ï¼šåˆ©ç”¨é¢†åŸŸçŸ¥è¯†è¯†åˆ«è¡¨å¤´å¸¸è§è¯æ±‡ï¼Œæé«˜åœ¨ä¸“ä¸šæ–‡æ¡£ä¸­çš„è¯†åˆ«å‡†ç¡®ç‡ã€‚</p>
<p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>å»ºç«‹è¡¨å¤´å…³é”®è¯åº“ï¼ˆå¯æ‰©å±•ï¼‰ï¼šå¹´ä»½ã€å®éªŒã€æ‚£è€…ã€è¯ç‰©ã€å‰‚é‡ã€æ€»æ•°ã€äººæ•°ã€æ€§åˆ«ã€å¹´é¾„ã€ç–¾ç—…ã€æœŸæ•°ã€ç»„åˆ«ç­‰</li>
<li>åŒ¹é…é¦–è¡Œå•å…ƒæ ¼å†…å®¹ä¸­çš„å…³é”®è¯</li>
<li>è®¡ç®—åŒ…å«å…³é”®è¯çš„å•å…ƒæ ¼æ¯”ä¾‹</li>
</ul>
<p><strong>è¯„åˆ†ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>é¦–è¡Œï¼š["å®éªŒç¼–å·","è¯ç‰©åç§°","å‰‚é‡(mg)","æ‚£è€…å¹´é¾„"] â†’ å¾—åˆ†ï¼š1.0</li>
<li>é¦–è¡Œï¼š["å¼ ä¸‰","é˜¿å¸åŒ¹æ—","25","45"] â†’ å¾—åˆ†ï¼š0.0</li>
<li>é¦–è¡Œï¼š["é‡‡é›†æ—¥æœŸ","æ ·æœ¬ç±»å‹","æ£€æµ‹ç»“æœ"] â†’ å¾—åˆ†ï¼š0.6</li>
</ul>
<p>æœ€åé€šè¿‡ä»¥ä¸Šç­–ç•¥è¿›è¡Œå¤šç­–ç•¥åŠ æƒè¯„åˆ†ï¼Œç»¼åˆåˆ¤æ–­è¡¨æ ¼è¡Œæ˜¯å¦ä¸ºè¡¨å¤´ã€‚</p>
<h3 data-id="heading-16">åŠ æƒè¯„åˆ†ç®—æ³•</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">HeaderScore</span> = w1*S_text_number + w2*S_merge + w3*S_number_ratio + w4*S_similarity + w5*S_length + w6*S_symbol + w7*S_keyword
</code></pre>
<ul>
<li>S_iï¼šå„ç­–ç•¥å¾—åˆ†ï¼ˆ0~1ï¼‰</li>
<li>w_iï¼šå¯è°ƒæƒé‡</li>
</ul>
<p>æƒé‡ç¤ºä¾‹ï¼š</p>





































<table><thead><tr><th>ç­–ç•¥</th><th>æƒé‡</th></tr></thead><tbody><tr><td>æ–‡æœ¬ä¸æ•°å€¼åˆ†å¸ƒåˆ†æ</td><td>2.0</td></tr><tr><td>å•å…ƒæ ¼åˆå¹¶ç‰¹å¾æ£€æŸ¥</td><td>1.5</td></tr><tr><td>æ•°å€¼å æ¯”å¯¹æ¯”åˆ†æ</td><td>1.5</td></tr><tr><td>åˆ—åè¯­ä¹‰ç›¸ä¼¼æ€§è¯„ä¼°</td><td>1.0</td></tr><tr><td>æ ¼å­—ç¬¦é•¿åº¦å¯¹æ¯”æ£€æµ‹å¼æ’ç‰ˆ</td><td>0.8</td></tr><tr><td>ç‰¹æ®Šç¬¦å·æ¨¡å¼è¯†åˆ«</td><td>0.8</td></tr><tr><td>é¢†åŸŸå…³é”®è¯åŒ¹é…</td><td>1.5</td></tr></tbody></table>
<p>é˜ˆå€¼ç¤ºä¾‹ï¼š</p>
<ul>
<li>â‰¥ 3.0ï¼šæ˜ç¡®ä¸ºè¡¨å¤´è¡Œ</li>
<li>2.0 ~ 3.0 â†’ é«˜æ¦‚ç‡è¡¨å¤´ï¼Œè‡ªåŠ¨æ ‡è®°ï¼ŒæŠ½æ ·å¤æ ¸</li>
<li>1.0 ~ 2.0 â†’ ä½æ¦‚ç‡è¡¨å¤´ï¼Œå»ºè®®äººå·¥å¤æ ¸</li>
<li>&lt; 1.0ï¼šéè¡¨å¤´è¡Œ</li>
</ul>
<h2 data-id="heading-17">è¡¨æ ¼å†…å®¹ç»“æ„åŒ–å¤„ç†</h2>
<h3 data-id="heading-18">å®Œæ•´ç»“æ„è¡¨æ ¼ï¼ˆæœ‰æ ‡é¢˜ + æœ‰è¡¨å¤´ï¼‰</h3>
<p><strong>å¤„ç†æµç¨‹</strong>ï¼š</p>
<ul>
<li>åˆ—æ‹¼æ¥ï¼šå°†è¡¨æ ¼æ ‡é¢˜ä¸å„åˆ—è¡¨å¤´è¿›è¡Œç»„åˆï¼Œå½¢æˆ"å­—æ®µå: å†…å®¹"çš„æ ‡å‡†æ ¼å¼</li>
<li>ç±»å‹è¯†åˆ«ï¼šæ ¹æ®åˆ—å†…å®¹ç‰¹å¾è‡ªåŠ¨è¯†åˆ«åˆ—ç±»å‹ï¼Œé€‚é…ä¸åŒå¤„ç†ç­–ç•¥</li>
<li>å†…å®¹ä¼˜åŒ–ï¼šå¯¹é•¿æ–‡æœ¬åˆ—è¿›è¡Œæ™ºèƒ½åˆ‡åˆ†ï¼Œå¹³è¡¡è¯­ä¹‰å®Œæ•´æ€§ä¸æ£€ç´¢å‹å¥½æ€§</li>
</ul>
<p>ä»¥ä¸‹è¡¨æ ¼æ ‡é¢˜ä¸ºã€Šå·¥ä½œå†…å®¹ã€‹è¡¨æ ¼ä¸ºä¾‹ï¼š</p>



















<table><thead><tr><th>å·¥ä½œæ¨¡å—</th><th>ç±»å‹</th><th>å†…å®¹</th><th>æ ‡å‡†</th><th>æµç¨‹</th></tr></thead><tbody><tr><td>ååŠ©æ¥¼é•¿å·¥ä½œ</td><td>å‰å°æ¥å¾…&amp;å’¨è¯¢è§£ç­”</td><td>å‰å°æ¥å¾…</td><td>1ã€ç€è£…å¹²å‡€æ•´æ´ã€æ·¡å¦†è¯­ \n 2ã€è°ˆåç«¯åº„ï¼Œç¤¼è²Œç”¨è¯­</td><td>æ¥è®¿æ¥å¾…ï¼š\n 1ã€å®¢æˆ·æ¥è®¿ï¼Œç™»è®°æ¥è®¿ä¿¡æ¯ï¼ˆå¾®ä¿¡äºŒç»´ç ï¼‰ï¼Œæ´¾å‘â€œè®¿å®¢è´´â€ç»™å¯¹æ–¹åæŒ‡å¼•åœ¨å‰å…ç­‰å€™ï¼Œè®¿å®¢è‡ªè¡Œ \n é€šçŸ¥ç›¸å…³åŒäº‹å‡ºæ¥æ¥å¾…ï¼›\n 2ã€æ¥å¾…é¢è¯•äººå‘˜ï¼Œç™»è®°æ¥è®¿ä¿¡æ¯ï¼ˆå¾®ä¿¡äºŒç»´ç &amp;çº¸è´¨ç‰ˆï¼‰ï¼Œæ£€æŸ¥é€šçŸ¥é¢è¯•ä¿¡æ¯ï¼Œæ£€æŸ¥æ— è¯¯ååœ¨å¾®ä¿¡ \n â€œé¢è¯•æ¥å¾…å°åˆ†ç»„â€å‘å‡ºæ¥¼å±‚+å§“åï¼Œé€šçŸ¥HRå‡ºæ¥æ¥å¾…ï¼›\n 3ã€é‡åˆ°æ¨é”€äººå‘˜ï¼šè‹¥æœ‰å…¶ä»–å…¬å¸çš„æ¨é”€äººå‘˜ä¸Šé—¨æ¨é”€ï¼Œåº”ç«‹åˆ»é€šçŸ¥ç‰©ä¸šå…¬å¸å¤„ç†ï¼Œè‹¥æœ‰å‘˜å·¥éœ€è¦ä»– \n ä»¬çš„æœåŠ¡ï¼Œå‘ŠçŸ¥ç›¸å…³éƒ¨é—¨å‘˜å·¥ç›´æ¥ä¸å…¶å¯¹æ¥ï¼›\n 4ã€é‡åˆ°å¹¿å·åˆ†å…¬å¸æˆ–ç¾å‘åŸ¹è®­ä¸­å¿ƒçš„åŸ¹è®­äººå‘˜ï¼Œå¯æŒ‡å¼•åˆ°ç›¸åº”ä½ç½®å‚åŠ åŸ¹è®­ã€‚\n ç”µè¯æ¥å¾…ï¼š\n 1ã€å…¬å¸å†…éƒ¨ï¼ŒæŒ‰ç…§æ¥ç”µä¿¡æ¯åšå¥½ç›¸åº”çš„å·¥ä½œï¼ˆèŒ¶æ°´ã€ä¼šè®®ã€ç­‰å…¶ä»–å·¥ä½œï¼‰ï¼›\n 2ã€ä¸šåŠ¡å’¨è¯¢ï¼Œåšå¥½æ¥ç”µå’¨è¯¢å·¥ä½œï¼Œé‡è¦äº‹å®œè®¤çœŸè®°å½•å¹¶ä¼ è¾¾ç»™ç›¸å…³äººå‘˜ã€‚</td></tr></tbody></table>
<p>åŸºç¡€æ‹¼æ¥ç»“æœï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹  </span>
<span class="hljs-section">å·¥ä½œæ¨¡å—: å‰å°æ¥å¾…  </span>
<span class="hljs-section">ç±»å‹: å‰å°æ¥å¾…&amp;å’¨è¯¢è§£ç­”  </span>
<span class="hljs-section">å†…å®¹: ç€è£…å¹²å‡€æ•´æ´ï¼Œæ·¡å¦†ï¼Œç¤¼è²Œç”¨è¯­  </span>
<span class="hljs-section">æ ‡å‡†: 1. æ¥è®¿æ¥å¾…ï¼›2. æ¥å¾…æµç¨‹  </span>
<span class="hljs-section">æµç¨‹: æ¥è®¿æ¥å¾…: å®¢æˆ·æ¥è®¿...</span>
</code></pre>
<p><strong>é•¿æ–‡æœ¬ä¼˜åŒ–å¤„ç†</strong>ï¼š</p>
<p>æµç¨‹ä¸€æ ç”Ÿæˆå¥å­è¾ƒé•¿ï¼Œä¸é€‚åˆç›´æ¥åš token åŒ–åè¾“å…¥åˆ°å°æ¨¡å‹ä¸­ã€‚</p>
<p>éœ€è¦é’ˆå¯¹è¿™ç±»é•¿æ–‡æœ¬åˆ—ï¼ŒæŒ‰æ ‡ç‚¹ç¬¦å·ï¼ˆå¥å·ã€åˆ†å·ã€æ¢è¡Œç¬¦ï¼‰è¿›è¡Œè¯­ä¹‰åˆ‡åˆ†ï¼Œæ¯æ¡å­å¥å‡é™„åŠ å®Œæ•´ä¸Šä¸‹æ–‡ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹  </span>
<span class="hljs-section">å·¥ä½œæ¨¡å—: å‰å°æ¥å¾…  </span>
<span class="hljs-section">å†…å®¹: ç€è£…å¹²å‡€æ•´æ´  </span>
<span class="hljs-section">å†…å®¹: æ·¡å¦†  </span>
<span class="hljs-section">å†…å®¹: ç¤¼è²Œç”¨è¯­  </span>
<span class="hljs-section">æµç¨‹: æ¥è®¿æ¥å¾…: å®¢æˆ·æ¥è®¿ï¼Œç™»è®°è®¿é—®ä¿¡æ¯  </span>
<span class="hljs-section">æµç¨‹: æ´¾å‘â€œè®¿å®¢è´´â€ç»™å¯¹æ–¹...</span>
</code></pre>
<p><strong>åˆ—ç±»å‹è¯†åˆ«æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>æ ‡ç­¾å‹åˆ—ï¼ˆå¦‚"ç±»å‹"ã€"æ ‡å‡†"ï¼‰ï¼šçŸ­æ–‡æœ¬ï¼Œç›´æ¥æŒ‰"åˆ—å: å†…å®¹"æ‹¼æ¥</li>
<li>é•¿æ–‡æœ¬åˆ—ï¼ˆå¦‚"å†…å®¹"ã€"æµç¨‹"ï¼‰ï¼šå¤§æ®µæ–‡å­—ï¼ŒæŒ‰è¯­ä¹‰å•å…ƒæ‹†åˆ†åè¾“å‡º</li>
<li>åˆ¤æ–­é˜ˆå€¼ï¼šå•å…ƒæ ¼å¹³å‡é•¿åº¦ &gt; 50å­— â†’ è¯†åˆ«ä¸ºé•¿æ–‡æœ¬åˆ—</li>
</ul>
<h4 data-id="heading-19">ä¸ºä»€ä¹ˆä½¿ç”¨è¡¨æ ¼ç»“æ„åŒ–å½¢å¼æ¯”çº¯æ–‡æœ¬å¹³é“ºå½¢å¼å‘é‡åŒ–æ£€ç´¢æ•ˆæœæ›´å¥½</h4>
<h5 data-id="heading-20">ç»“æ„åŒ–è¡¨ç¤º</h5>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹  </span>
<span class="hljs-section">å·¥ä½œæ¨¡å—: å‰å°æ¥å¾…  </span>
<span class="hljs-section">ç±»å‹: å‰å°æ¥å¾…&amp;å’¨è¯¢è§£ç­”  </span>
<span class="hljs-section">å†…å®¹: ç€è£…å¹²å‡€æ•´æ´ï¼Œæ·¡å¦†ï¼Œç¤¼è²Œç”¨è¯­  </span>
<span class="hljs-section">æ ‡å‡†: 1. æ¥è®¿æ¥å¾…ï¼›2. æ¥å¾…æµç¨‹  </span>
<span class="hljs-section">æµç¨‹: æ¥è®¿æ¥å¾…: å®¢æˆ·æ¥è®¿...</span>
</code></pre>
<p>æ¯ä¸€é¡¹éƒ½åƒä¸€ä¸ª KVï¼ˆå­—æ®µå â†’ å€¼ï¼‰ï¼Œembedding æ¨¡å‹å¯ä»¥æ˜ç¡®çŸ¥é“ï¼š</p>
<ul>
<li>å“ªäº›æ˜¯èŒè´£ï¼ˆå†…å®¹ï¼‰</li>
<li>å“ªäº›æ˜¯æµç¨‹ï¼ˆæµç¨‹ï¼‰</li>
<li>å“ªäº›æ˜¯è§„èŒƒï¼ˆæ ‡å‡†ï¼‰</li>
<li>å±äºå“ªä¸ªæ¨¡å—ï¼ˆå·¥ä½œæ¨¡å—ï¼‰</li>
<li>å±äºå“ªä¸ªå¤§ç±»ï¼ˆè¡¨æ ¼æ ‡é¢˜ï¼‰</li>
</ul>
<p>ç»“æ„åŒ– â†’ è¯­ä¹‰è¾¹ç•Œæ˜ç¡® â†’ embedding çš„è¯­ä¹‰å¯†åº¦æ›´é«˜ â†’ æœç´¢æ›´å‡†</p>
<h5 data-id="heading-21">çº¯æ–‡æœ¬å¹³é“ºå½¢å¼</h5>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">å·¥ä½œå†…å®¹ï¼Œå·¥ä½œæ¨¡å—: å‰å°æ¥å¾… ï¼Œç±»å‹: å‰å°æ¥å¾…&amp;å’¨è¯¢è§£ç­”ï¼Œå†…å®¹: ç€è£…å¹²å‡€æ•´æ´ï¼Œæ·¡å¦†ï¼Œç¤¼è²Œç”¨è¯­ï¼Œæ ‡å‡†: 1. æ¥è®¿æ¥å¾…ï¼›2. æ¥å¾…æµç¨‹ ï¼Œæµç¨‹: æ¥è®¿æ¥å¾…: å®¢æˆ·æ¥è®¿...</span>
</code></pre>
<p>æ‰€æœ‰ä¿¡æ¯å †åœ¨ä¸€èµ·ï¼Œæ¨¡å‹éš¾ä»¥åˆ¤æ–­ï¼š</p>
<ul>
<li>å“ªä¸€éƒ¨åˆ†æ˜¯â€œå†…å®¹â€</li>
<li>å“ªä¸€éƒ¨åˆ†æ˜¯â€œæµç¨‹â€</li>
<li>å“ªä¸€éƒ¨åˆ†æ˜¯â€œæ ‡å‡†â€</li>
</ul>
<p>è¿™ä¼šå¸¦æ¥ 2 ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>embedding è¢«å¤§é‡å¼±ç›¸å…³è¯ç¨€é‡Š</li>
<li>æŸ¥è¯¢æ—¶éš¾ä»¥ç²¾å‡†åŒ¹é…åˆ°å¯¹åº”å­—æ®µ</li>
</ul>
<p>æœ€ç»ˆå¯¼è‡´ï¼šå¬å›å·®ã€å™ªå£°å¤§ã€ç²¾ç¡®åº¦ä½</p>
<h5 data-id="heading-22">å†ä¼˜åŒ–å¤„ç†</h5>
<p><strong>1. å°†è¡¨æ ¼è½¬ä¸ºç»“æ„åŒ– KV æ ¼å¼</strong>
æ¯è¡Œå½¢æˆä¸€æ¡å‘é‡åŒ–å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹ | å­—æ®µ: å·¥ä½œæ¨¡å— | å€¼: å‰å°æ¥å¾…</span>
<span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹ | å­—æ®µ: ç±»å‹ | å€¼: å‰å°æ¥å¾…&amp;å’¨è¯¢è§£ç­”</span>
<span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹ | å­—æ®µ: å†…å®¹ | å€¼: ç€è£…å¹²å‡€æ•´æ´</span>
<span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹ | å­—æ®µ: å†…å®¹ | å€¼: æ·¡å¦†</span>
<span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹ | å­—æ®µ: å†…å®¹ | å€¼: ç¤¼è²Œç”¨è¯­</span>
<span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹ | å­—æ®µ: æ ‡å‡† | å€¼: æ¥è®¿æ¥å¾…</span>
<span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹ | å­—æ®µ: æ ‡å‡† | å€¼: æ¥å¾…æµç¨‹</span>
<span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹ | å­—æ®µ: æµç¨‹ | å€¼: æ¥è®¿æ¥å¾…: å®¢æˆ·æ¥è®¿...</span>
</code></pre>
<p>æ¯æ¡ embedding éƒ½å…·å¤‡å®Œæ•´è¯­ä¹‰ï¼Œä¸ä¼šä¸¢ä¸Šä¸‹æ–‡ã€‚</p>
<p><strong>2. å¯¹æ¯æ¡æ•°æ®å‰æ‹¼æ¥ä¸Šä¸‹æ–‡</strong>
æ¯”å¦‚ï¼š</p>
<pre><code class="hljs">å·¥ä½œå†…å®¹ &gt; å†…å®¹: æ·¡å¦†
</code></pre>
<p>æ‹¼æ¥åçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>å¢å¼ºè¯­ä¹‰å®Œæ•´åº¦ï¼ˆé¿å…å‘é‡ç¢ç‰‡ï¼‰</li>
<li>æ£€ç´¢â€œå®¢æœå²—ä½æ·¡å¦†è¦æ±‚â€æ—¶å‡†ç¡®ç‡èƒ½å¤§å¹…æé«˜</li>
</ul>
<h3 data-id="heading-23">ç¼ºå¤±è¡¨å¤´è¡¨æ ¼</h3>
<p><strong>å¤„ç†ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>åˆ—åè¡¥å…¨ï¼šä¸ºæ— è¡¨å¤´åˆ—ç”Ÿæˆé€šç”¨æ ‡è¯†ã€‚è‹±æ–‡æ¨¡å¼ï¼šColumn 1, Column 2, Column 3...ï¼›ä¸­æ–‡æ¨¡å¼ï¼šåˆ—1, åˆ—2, åˆ—3...</li>
<li>å†…å®¹å¢å¼ºï¼šç»“åˆé¦–è¡Œæ•°æ®è¿›è¡Œåˆ—åæ¨æµ‹ï¼ˆå¯é€‰ï¼‰</li>
<li>æ ¼å¼ç»Ÿä¸€ï¼šä¿æŒ"è™šæ‹Ÿåˆ—å: å†…å®¹"çš„ç»“æ„åŒ–æ ¼å¼</li>
</ul>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è¡¨æ ¼æ ‡é¢˜: å·¥ä½œå†…å®¹</span>
<span class="hljs-section">åˆ—1: å‰å°æ¥å¾…</span>
<span class="hljs-section">åˆ—2: å‰å°æ¥å¾…&amp;å’¨è¯¢è§£ç­”</span>
<span class="hljs-section">åˆ—3: ç€è£…å¹²å‡€æ•´æ´ï¼Œæ·¡å¦†ï¼Œç¤¼è²Œç”¨è¯­</span>
</code></pre>
<h3 data-id="heading-24">ç¼ºå¤±æ ‡é¢˜è¡¨æ ¼</h3>
<p>è¡¨æ ¼æ ‡é¢˜çš„é‡è¦æ€§å·²ç»åœ¨è¯†åˆ«è¡¨æ ¼æ ‡é¢˜æ¨¡å—ä¸­ä»‹ç»è¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚å½“æ²¡æœ‰è¡¨æ ¼æ ‡é¢˜æ—¶ï¼Œéœ€è¦æ ¹æ®å†…å®¹è¿›è¡Œè™šæ‹Ÿæ ‡é¢˜ç”Ÿæˆã€‚ç”Ÿæˆç­–ç•¥å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>è¡¨å¤´æ¨æµ‹ç»“æœï¼ˆå¦‚æœæœ‰ï¼‰</strong>ï¼šç»“åˆè¡¨å¤´è¡Œå’Œç¬¬ä¸€è¡Œå†…å®¹ï¼Œé€šè¿‡å¤§æ¨¡å‹æˆ–è€…è¯­ä¹‰åˆ†æç”Ÿæˆå¾—åˆ°è¡¨æ ¼ä¸»é¢˜æ‘˜è¦ã€‚</li>
<li><strong>è¡¨æ ¼å†…éƒ¨å…±åŒè¯ï¼ˆå…³é”®è¯èšåˆï¼‰</strong>ï¼šå–æ‰€æœ‰è¡Œï¼Œåš TF-IDF/LDA/embedding èšç±»ï¼Œæå–é«˜é¢‘è¯ï¼šâ€œæµç¨‹ã€å·¥ä½œå†…å®¹ã€èŒè´£ã€æ£€æŸ¥ã€æ ‡å‡†ã€è§„èŒƒã€é¡¹ç›®ã€è´¹ç”¨ã€æ¸…å•ã€äººå‘˜ã€ä»»åŠ¡â€ç­‰ã€‚ç”Ÿæˆè¡¨è¿°ï¼šè¯¥è¡¨æ ¼æ€»ä½“å±•ç¤ºäº†ä¸ã€xxxã€‘ç›¸å…³çš„å†…å®¹ï¼ŒåŒ…æ‹¬ã€è‹¥å¹²åˆ—ä¸»é¢˜ã€‘ã€‚</li>
<li><strong>è¡¨æ ¼ä½ç½®ï¼ˆé¡µç ã€ä¸Šä¸€æ®µæ–‡æœ¬ï¼‰</strong>ï¼šå¦‚æœ OCR èƒ½æä¾›æ‰€åœ¨é¡µçš„é‚»è¿‘æ–‡æœ¬ï¼Œå¯ç”¨äºç”Ÿæˆâ€œæ¨æµ‹æ ‡é¢˜â€ã€‚ä¾‹å¦‚ä¸Šä¸€è¡Œæ˜¯ï¼šååŠ©ç§˜ä¹¦å·¥ä½œèŒè´£ï¼Œå¯è‡ªåŠ¨ç”Ÿæˆè¡¨æ ¼çš„â€œè™šæ‹Ÿæ ‡é¢˜â€ï¼šè¡¨æ ¼ä¸»é¢˜ï¼šååŠ©ç§˜ä¹¦å·¥ä½œèŒè´£çš„åˆ†é¡¹å†…å®¹</li>
</ul>
<h2 data-id="heading-25">å°¾è¨€</h2>
<p>é€šè¿‡æœ¬æ–‡ï¼Œè¯¦ç»†æ¢³ç†äº†åœ¨ RAG ä¸­å¤„ç†è¡¨æ ¼çš„æ ¸å¿ƒæ–¹æ³•â€”â€”ä»æ ‡é¢˜è¯†åˆ«ã€è¡¨å¤´æ¨æ–­ï¼Œåˆ°å†…å®¹ç»“æ„åŒ–çš„æ•´ä½“æµç¨‹ã€‚æ— è®ºæ˜¯å®Œæ•´ç»“æ„è¡¨æ ¼ã€ç¼ºå¤±è¡¨å¤´ï¼Œè¿˜æ˜¯ç¼ºå¤±æ ‡é¢˜çš„è¡¨æ ¼ï¼Œéƒ½å¯ä»¥é€šè¿‡å¤šç­–ç•¥åˆ¤æ–­ä¸è¯­ä¹‰å¢å¼ºï¼Œå®ç°æ›´é«˜è´¨é‡çš„å‘é‡åŒ–è¡¨ç¤ºå’Œæ£€ç´¢æ•ˆæœã€‚</p>
<p>ç„¶è€Œï¼Œæœ¬æ–‡çš„ç­–ç•¥ä¸»è¦é’ˆå¯¹å•çº§è¡¨å¤´å’Œå¸¸è§„è¡¨æ ¼ç»“æ„ã€‚å¯¹äºå¤šçº§è¡¨å¤´ã€äº¤å‰è¡¨ã€å¤æ‚åˆå¹¶å•å…ƒæ ¼ç­‰åœºæ™¯ï¼Œè¡¨æ ¼è§£æçš„éš¾åº¦å’Œä¸ç¡®å®šæ€§éƒ½ä¼šæ˜¾è‘—å¢åŠ ï¼Œç°æœ‰æ–¹æ³•å¯èƒ½æ— æ³•å®Œå…¨è¦†ç›–æ‰€æœ‰å¤æ‚æƒ…å†µã€‚</p>
<p>å°†åœ¨åç»­æ›´æ–°ä¸­æ¨å‡ºé’ˆå¯¹å¤šçº§è¡¨å¤´ä¸å¤æ‚è¡¨æ ¼çš„ä¸“é¡¹å¤„ç†æŒ‡å—ï¼ŒåŒ…æ‹¬ï¼šå¤šçº§è¡¨å¤´è‡ªåŠ¨è¯†åˆ«ä¸å±‚çº§è¯­ä¹‰é‡å»ºï¼Œäº¤å‰åˆå¹¶å•å…ƒæ ¼çš„è¡Œåˆ—æ˜ å°„ç­–ç•¥ï¼Œè¡¨æ ¼å…¨å±€ä¸Šä¸‹æ–‡å¢å¼ºä¸å¤æ‚åˆ—ç±»å‹è¯†åˆ«ï¼Œè®© RAG å¯¹å¤æ‚è¡¨æ ¼ä¹Ÿèƒ½åšåˆ°â€œè¯»å¾—æ‡‚ã€ç”¨å¾—å¥½â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[BaseContextï¼šå¦‚ä½•åœ¨Serviceå±‚â€œéš”ç©ºå–ç‰©â€è·å–å½“å‰ç™»å½•ç”¨æˆ·IDï¼Ÿ]]></title>    <link>https://juejin.cn/post/7581666412021088265</link>    <guid>https://juejin.cn/post/7581666412021088265</guid>    <pubDate>2025-12-09T09:16:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581666412021088265" data-draft-id="7581667332306452518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="BaseContextï¼šå¦‚ä½•åœ¨Serviceå±‚â€œéš”ç©ºå–ç‰©â€è·å–å½“å‰ç™»å½•ç”¨æˆ·IDï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T09:16:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ShaneD771"/> <meta itemprop="url" content="https://juejin.cn/user/2482077907032171"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            BaseContextï¼šå¦‚ä½•åœ¨Serviceå±‚â€œéš”ç©ºå–ç‰©â€è·å–å½“å‰ç™»å½•ç”¨æˆ·IDï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2482077907032171/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ShaneD771
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T09:16:36.000Z" title="Tue Dec 09 2025 09:16:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åšSpring Boot çš„ Web é¡¹ç›®æ—¶ï¼Œåœ¨ Controller æˆ– Service å±‚ç»å¸¸ä¼šçœ‹åˆ°è¿™æ ·ä¸€è¡Œä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// åœ¨ Service å±‚ç›´æ¥è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ID 
Long <span class="hljs-attr">userId</span> = BaseContext.getCurrentId()<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™å°±å¾ˆç¥å¥‡äº†ï¼š</p>
<ol>
<li><strong>æ²¡æœ‰ä¼ å‚</strong>ï¼šController è°ƒç”¨ Service æ—¶ï¼Œå¹¶æ²¡æœ‰æŠŠ <code>userId</code> ä½œä¸ºå‚æ•°ä¼ è¿›æ¥</li>
<li><strong>æ²¡æœ‰æŸ¥åº“</strong>ï¼šè¿™ä¸€è¡Œä»£ç ä¹Ÿæ²¡æœ‰å»æŸ¥è¯¢æ•°æ®åº“</li>
<li><strong>æ•°æ®å‡†ç¡®</strong>ï¼šå®ƒæ€»æ˜¯èƒ½ç²¾å‡†åœ°æ‹¿åˆ°å½“å‰å‘é€è¯·æ±‚çš„é‚£ä¸ªç”¨æˆ·çš„ IDï¼Œå¼ ä¸‰å‘è¯·æ±‚æ‹¿åˆ°å¼ ä¸‰ï¼Œæå››å‘è¯·æ±‚æ‹¿åˆ°æå››ï¼Œäº’ä¸å¹²æ‰°</li>
</ol>
<p>å®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</p>
<p>æœ‰ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼šThreadLocal å’Œ Tomcat çš„â€œä¸€è¯·æ±‚ä¸€çº¿ç¨‹â€æ¨¡å‹ã€‚</p>
<h2 data-id="heading-0">1.å®¹å™¨ï¼šThreadLocal (çº¿ç¨‹å±€éƒ¨å˜é‡)</h2>
<p>BaseContext åªæ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼Œå®ƒå†…éƒ¨çš„æ ¸å¿ƒæ˜¯ JDK æä¾›çš„ ThreadLocalã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BaseContext</span> {
    <span class="hljs-comment">// æ ¸å¿ƒï¼šThreadLocal å¯¹è±¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ThreadLocal&lt;Long&gt; threadLocal = <span class="hljs-keyword">new</span> ThreadLocal&lt;&gt;();

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCurrentId</span>(<span class="hljs-params">Long id</span>)</span> {
        threadLocal.<span class="hljs-keyword">set</span>(id); <span class="hljs-comment">// å­˜å…¥</span>
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Long <span class="hljs-title">getCurrentId</span>()</span> {
        <span class="hljs-keyword">return</span> threadLocal.<span class="hljs-keyword">get</span>(); <span class="hljs-comment">// å–å‡º</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeCurrentId</span>()</span> {
        threadLocal.<span class="hljs-keyword">remove</span>(); <span class="hljs-comment">// æ¸…é™¤</span>
    }
}
</code></pre>
<p>ThreadLocal çš„ä½œç”¨ï¼š</p>
<p>å½“æˆ‘ä»¬åœ¨ çº¿ç¨‹ A ä¸­å¾€ ThreadLocal å­˜å…¥æ•°æ®æ—¶ï¼Œåªæœ‰ çº¿ç¨‹ A èƒ½å–å‡ºæ¥</p>
<p>çº¿ç¨‹ B å³ä½¿è®¿é—®åŒä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå®Œå…¨æ‘¸ä¸åˆ° çº¿ç¨‹ A çš„æ•°æ®</p>
<p>è¿™å°±æ˜¯çº¿ç¨‹éš”ç¦»ï¼ˆThread Safetyï¼‰</p>
<h2 data-id="heading-1">2.ç¯å¢ƒï¼šTomcat çš„â€œä¸€è¯·æ±‚ä¸€çº¿ç¨‹â€æ¨¡å‹</h2>
<p>Spring Boot å†…ç½®çš„ Web æœåŠ¡å™¨é€šå¸¸æ˜¯ Tomcatã€‚Tomcat å¤„ç†è¯·æ±‚çš„æœºåˆ¶æ˜¯ï¼šOne Request, One Thread ï¼ˆä¸€ä¸ª HTTP è¯·æ±‚ï¼Œç”±ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹å…¨ç¨‹è´Ÿè´£ï¼‰</p>
<p>å½“ä¸€ä¸ªç”¨æˆ·å‘èµ·è¯·æ±‚ï¼ˆæ¯”å¦‚â€œæ·»åŠ è´­ç‰©è½¦â€ï¼‰æ—¶ï¼š</p>
<p>Tomcat åˆ†é… çº¿ç¨‹ X æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚</p>
<p>æ‹¦æˆªå™¨ (Interceptor) æ˜¯ çº¿ç¨‹ X æ‰§è¡Œçš„</p>
<p>Controller æ˜¯ çº¿ç¨‹ X æ‰§è¡Œçš„</p>
<p>Service è¿˜æ˜¯ çº¿ç¨‹ X æ‰§è¡Œçš„</p>
<p>Mapper ä¾ç„¶æ˜¯ çº¿ç¨‹ X æ‰§è¡Œçš„</p>
<p>ç»“è®ºï¼š åªè¦æˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨å¼€å¯æ–°çº¿ç¨‹ï¼ˆnew Threadï¼‰ï¼Œæ•´ä¸ªåç«¯ä¸šåŠ¡æµç¨‹å°±åƒä¸€åœºæ¥åŠ›èµ›ï¼Œä½†æ˜¯æ˜¯åŒä¸€ä¸ªè¿åŠ¨å‘˜ï¼ˆçº¿ç¨‹ Xï¼‰ ä»å¤´è·‘åˆ°å°¾</p>
<h2 data-id="heading-2">æµç¨‹</h2>
<p>åŸºäºä»¥ä¸Šä¸¤ä¸ªåŸç†ï¼Œæˆ‘ä»¬å¯ä»¥è¿˜åŸ <code>userId</code> æ˜¯å¦‚ä½•ä»è¯·æ±‚å¤´ä¸€æ­¥æ­¥æµè½¬åˆ° Service å±‚çš„ï¼š</p>
<p>ç¬¬ä¸€æ­¥ï¼šæ‹¦æˆªå™¨ (å­˜å…¥)</p>
<p>è¯·æ±‚åˆšåˆ°è¾¾åç«¯ï¼Œæ‹¦æˆªå™¨ï¼ˆ<code>JwtTokenUserInterceptor</code>ï¼‰æœ€å…ˆæ‹¦æˆª</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddcd9ea0eef7462b9a3ce434af029d36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhbmVENzcx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876596&amp;x-signature=dlHRo0YkpsxICFD7B7BRBvTtP%2Bw%3D" alt="image-20251128145149635" loading="lazy"/></p>
<p>ç¬¬äºŒæ­¥ï¼šController</p>
<p>æ‹¦æˆªå™¨æ”¾è¡Œåï¼Œä»£ç è¿›å…¥ Controller</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91b2b67d0ab14a588b496778f90401ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhbmVENzcx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876596&amp;x-signature=2nFKG%2BjXZddO%2B7ixWkuSB%2BVQgec%3D" alt="image-20251128145336078" loading="lazy"/></p>
<p>ç¬¬ä¸‰æ­¥ï¼šService (å–å‡º)</p>
<p>ä»£ç è¿›å…¥ Service å±‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/360a78fd884140dba263c04318e136ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhbmVENzcx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765876596&amp;x-signature=1oSLHnXV5KjPacbC7ewHnkxr4nE%3D" alt="image-20251128145520388" loading="lazy"/></p>
<h2 data-id="heading-3">ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ</h2>
<p>ä½¿ç”¨ <code>ThreadLocal</code> (BaseContext) çš„æ–¹æ¡ˆï¼Œå®ç°äº†<strong>æ•°æ®åœ¨åŒä¸€çº¿ç¨‹å†…çš„â€œéšå¼ä¼ é€’â€</strong>ï¼Œè®©ä»£ç æå…¶ç®€æ´ä¼˜é›…ã€‚</p>
<h2 data-id="heading-4">æ€»ç»“</h2>
<ol>
<li><strong>BaseContext</strong> åˆ©ç”¨ <strong>ThreadLocal</strong> å®ç°äº†çº¿ç¨‹å†…éƒ¨çš„æ•°æ®éš”ç¦»å­˜å‚¨ã€‚</li>
<li><strong>Tomcat</strong> ä¿è¯äº†ä»æ‹¦æˆªå™¨åˆ° Service å¤„äº <strong>åŒä¸€ä¸ªçº¿ç¨‹</strong> ä¸­ã€‚</li>
<li>äºŒè€…ç»“åˆï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨ Service å±‚â€œéš”ç©ºâ€è·å– Controller å±‚ï¼ˆæ‹¦æˆªå™¨ï¼‰è§£æçš„æ•°æ®ï¼Œæå¤§ç®€åŒ–äº†ä»£ç ç»“æ„ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>