<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[2026å¹´äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘å»ºè®®ä½ æ”¾å¼ƒâ€œçº¯åŸç”Ÿâ€å¼€å‘ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7605769126272139310</link>    <guid>https://juejin.cn/post/7605769126272139310</guid>    <pubDate>2026-02-13T03:07:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605769126272139310" data-draft-id="7605907495769227273" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026å¹´äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘å»ºè®®ä½ æ”¾å¼ƒâ€œçº¯åŸç”Ÿâ€å¼€å‘ï¼Ÿ"/> <meta itemprop="keywords" content="Flutter,å®¢æˆ·ç«¯"/> <meta itemprop="datePublished" content="2026-02-13T03:07:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€åˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/662360127965769"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026å¹´äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘å»ºè®®ä½ æ”¾å¼ƒâ€œçº¯åŸç”Ÿâ€å¼€å‘ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/662360127965769/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€åˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:07:21.000Z" title="Fri Feb 13 2026 03:07:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è€åˆ˜</strong></p>
<p>æ˜¨å¤©æœ‰ä¸ªè€æœ‹å‹æ‰¾æˆ‘å–é…’ï¼Œå“­ä¸§ç€è„¸ã€‚</p>
<p>è¿™å“¥ä»¬æ˜¯ä¸ªäº”å¹´çš„Androidå¼€å‘ï¼ŒæŠ€æœ¯é‚£æ˜¯æ²¡å¾—è¯´ã€‚</p>
<p>èƒ½ç‹¬ç«‹å®Œæˆå¤æ‚çš„ç³»ç»Ÿæ¨¡å—ï¼Œä¼˜åŒ–è¿‡åƒä¸‡çº§æ—¥æ´»çš„Appã€‚</p>
<p>æœ€è¿‘å»é¢è¯•ä¸€å®¶å¤§å‚æŒ‚äº†ã€‚</p>
<p>é¢è¯•å®˜å°±é—®äº†ä¸€å¥ï¼š</p>
<p>â€œå¦‚æœè®©ä½ å¸¦é˜ŸæŠŠè¿™ä¸ªæ¨¡å—è¿ç§»åˆ°é¸¿è’™å’Œ iOSï¼Œé™¤äº†é‡å†™ä¸‰éï¼Œä½ æœ‰ä»€ä¹ˆä½æˆæœ¬æ–¹æ¡ˆï¼Ÿâ€</p>
<p>ä»–æ„£ä½äº†ï¼Œä»–å¼•ä»¥ä¸ºå‚²çš„åŸç”Ÿæ·±åº¦ï¼Œåœ¨é™æœ¬å¢æ•ˆçš„å¤§æ½®é¢å‰ï¼Œå°±å˜æˆäº†ä¸€é¢—æ˜‚è´µçš„èºä¸é’‰ã€‚</p>
<p>2026 å¹´ï¼Œä¸çŸ¥é“æœ‰å¤šå°‘æœ‹å‹åˆå¼€å§‹äº†æˆ–è€…å°†è¦å¼€å§‹æŠ•ç®€å†ã€é¢è¯•çš„è¿‡ç¨‹ã€‚</p>
<p>è€åˆ˜å€Ÿç€è¿™ç¯‡æ–‡ç« èŠèŠåŸç”Ÿå¼€å‘ã€è·¨å¹³å°å¼€å‘åœ¨AIæ—¶ä»£çš„å®¢æˆ·ç«¯å¼€å‘é¢†åŸŸçš„ç”Ÿæ€ä½ï¼Œä»¥åŠä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ä¼˜åŒ–æˆ‘ä»¬çš„æŠ€èƒ½æ ‘ï¼Œä»¥é€‚åº”è¿™ä¸ªå¿«é€Ÿå˜åŒ–çš„è¡Œä¸šã€‚</p>
<hr/>
<h2 data-id="heading-0">åŸç”Ÿä¸æ˜¯æ­»äº†ï¼Œè€Œæ˜¯ä¸‹æ²‰äº†</h2>
<p>åˆ«è¯¯ä¼šï¼Œæˆ‘ä¸æ˜¯è¯´åŸç”ŸæŠ€æœ¯è¦æ¶ˆå¤±ã€‚</p>
<p>å®ƒåªæ˜¯ä¸‹æ²‰äº†ï¼Œæ²‰æˆäº†åŸºç¡€è®¾æ–½ï¼Œå°±æœ‰ç‚¹åƒæ±‡ç¼–è¯­è¨€ä¸€æ ·ã€‚</p>
<p>ä½ çœ‹ç°åœ¨çš„ App æ¶æ„æ˜¯å•¥æ ·çš„ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fb17713aeae4696b5564608272e05a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556840&amp;x-signature=h%2BAMmisL%2BDCz124o%2F7KBfAMFq4U%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<p>å¦‚æœä½ åªå®ˆç€é‚£ 10% çš„åŸç”Ÿèƒ¶æ°´å±‚ï¼Œä½ çš„èŒä¸šé“è·¯åªä¼šè¶Šèµ°è¶Šçª„ã€‚</p>
<p>æœ€åå˜æˆå…¬å¸é‡Œé‚£ä¸ªç»´æŠ¤é—ç•™ä»£ç çš„å®ˆé—¨äººï¼Œæ¯å¤©å¯¹ç€ä¸€å †é™ˆå¹´è€ä»£ç å¹æ°”ã€‚</p>
<p>æ–°äººéƒ½åœ¨ç”¨æ–°æ¶æ„å†™æ–°ä¸šåŠ¡ï¼Œä½ åœ¨è§’è½é‡Œä¿®æ”¹å“ªäº›è¯¥æ­»çš„å…¼å®¹æ€§ Bugã€‚</p>
<hr/>
<h2 data-id="heading-1">Flutter vs åŸç”Ÿ</h2>
<p>è¿™é‡Œè€åˆ˜ä¸æƒ³è®¨è®ºæŠ€æœ¯å‚æ•°çš„å·®å¼‚ï¼Œè€Œæ˜¯æƒ³ç«™åœ¨å¼€å‘è€…çš„è§’åº¦ï¼Œè°ˆè°ˆèšç„¦ä¸åŒçš„æŠ€æœ¯æ ˆå¯¹æˆ‘ä»¬æœ‰ä»€ä¹ˆå½±å“ã€‚</p>
<p>å¾ˆå¤šåšæŒâ€œçº¯åŸç”Ÿâ€çš„å…„å¼Ÿï¼Œç†ç”±å¾€å¾€åªæœ‰ä¸€ä¸ªï¼š</p>
<p>â€œåŸç”Ÿä½“éªŒæ›´å¥½ï¼Œæ€§èƒ½æ›´å¼ºï¼Œè·¨å¹³å°æ€»è§‰å¾—æœ‰ç‚¹å¡ã€‚â€</p>
<p>å¬ç€æŒºæœ‰é“ç†ï¼Œä½†åœ¨ 2026 å¹´ï¼Œè¿™æ›´åƒæ˜¯ä¸€ä¸ªç»™è‡ªå·±å¯»æ‰¾èˆ’é€‚åŒºçš„å€Ÿå£ã€‚</p>
<p><strong>ç°åœ¨çš„è·¨å¹³å°æŠ€æœ¯ï¼Œæ—©å·²ç»ä¸æ˜¯å½“å¹´çš„â€œç¼åˆæ€ªâ€äº†ã€‚</strong></p>
<p>ä»¥ Flutter ä¸ºä¾‹ï¼Œ Impeller å¼•æ“çš„æˆç†Ÿï¼Œè®©å®ƒçš„æ¸²æŸ“æ€§èƒ½åœ¨å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå·²ç»åšåˆ°äº†å’ŒåŸç”Ÿæ¯«æ— å·®å¼‚çš„ç¨‹åº¦ã€‚</p>
<p>ä½ è¿˜åœ¨çº ç»“é‚£ä¸ªæ»šåŠ¨æ¡çš„é˜»å°¼æ„Ÿæ˜¯ä¸æ˜¯å·®äº† 0.01 ç§’ï¼Œè€æ¿åœ¨çº ç»“ä¸ºä»€ä¹ˆéš”å£ç»„ç”¨ä¸€å¥—ä»£ç å·²ç»ä¸Šçº¿äº†ä¸‰ä¸ªå¹³å°ï¼Œè€Œä½ è¿˜åœ¨ä¸º iOS çš„ä¸€ä¸ªå¸ƒå±€é”™ä½è°ƒäº†ä¸€ä¸‹åˆã€‚</p>
<p><strong>æœªæ¥çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œæ˜¯ç«¯æŠ½è±¡çš„èƒ½åŠ›</strong></p>
<p>å½“ä½ ç«™åœ¨è·¨å¹³å°çš„è§’åº¦è¿›è¡Œå¼€å‘ï¼Œä½ æ€è€ƒé—®é¢˜çš„ç»´åº¦å°±å˜äº†ï¼š</p>
<ul>
<li>ä½ ä¸å†æ˜¯â€œé‚£ä¸ªå†™ Android çš„â€ï¼Œä½ æ˜¯â€œé‚£ä¸ªèƒ½æå®šå…¨ç«¯äº¤ä»˜çš„â€ã€‚</li>
<li>ä½ ä¸å†å…³å¿ƒæŸä¸ªç³»ç»Ÿçš„ç§æœ‰ APIï¼Œä½ å¼€å§‹å…³å¿ƒå¦‚ä½•è®¾è®¡ä¸€å¥—é€šç”¨çš„ç»„ä»¶åº“ï¼Œè®©ä¸šåŠ¡é€»è¾‘åœ¨å„ä¸ªç«¯ä¹‹é—´æ— ç¼æµåŠ¨ã€‚</li>
</ul>
<p>è¿™ç§â€œç«¯æŠ½è±¡â€çš„èƒ½åŠ›ï¼Œæ‰æ˜¯è·¨å¹³å°å¼€å‘è€…çœŸæ­£çš„æŠ¤åŸæ²³ã€‚</p>
<hr/>
<h2 data-id="heading-2">è·¨å¹³å°ï¼ˆFlutterï¼‰ä¸æ˜¯åŠ åˆ†é¡¹ï¼Œè€Œæ˜¯åŠæ ¼çº¿</h2>
<p>ä»¥å‰é¢è¯•ï¼Œä½ ä¼š Flutteræ˜¯åŠ åˆ†é¡¹ã€‚</p>
<p>ç°åœ¨é‚£æ˜¯åŠæ ¼çº¿ã€‚</p>
<p>çœ‹çœ‹ç°åœ¨çš„ç»ˆç«¯ç¯å¢ƒï¼Œä¹±æˆä¸€é”…ç²¥äº†ï¼šAndroidã€iOSã€é¸¿è’™ã€webã€æ¡Œé¢ç«¯...</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed67a001c10541e7a7b5eacd83040b21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556840&amp;x-signature=XHKuTug%2BCYh2v8rTs%2Fcual4UDMY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä½ æŒ‡æœ›è€æ¿æ‹› 5 æ‹¨äººå»ç»´æŠ¤ 5 å¥—ä»£ç ï¼Ÿ</p>
<p>è€æ¿æ ¹æœ¬ä¸åœ¨ä¹ä½ ç”¨åŸç”Ÿè¿˜æ˜¯Flutterï¼Œè€æ¿åªåœ¨ä¹èƒ½ä¸èƒ½æŠŠå›¢é˜Ÿè£åˆ°åªæœ‰ä¸€ä¸ªäººï¼Œç„¶åä½ æŠŠæ‰€æœ‰çš„å·¥ä½œæå®šã€‚</p>
<p>åªä¼šçº¯åŸç”Ÿç­‰äºæŠŠè‡ªå·±é”æ­»åœ¨ä¸€ä¸ªå¹³å°ä¸Šã€‚</p>
<p>ä¸€æ—¦é‚£ä¸ªå¹³å°æ²¡è½äº†ï¼Œæˆ–è€…å…¬å¸ä¸šåŠ¡è°ƒæ•´ä¸åšäº†ã€‚</p>
<p>æƒ³æƒ³å½“å¹´çš„å¡ç­å¼€å‘ï¼Œç”šè‡³å‰å‡ å¹´çš„ Windows Phone å¼€å‘ï¼Œæ˜¯ä¸æ˜¯èƒŒè„Šå‘å‡‰ï¼Ÿ</p>
<hr/>
<h2 data-id="heading-3">ä½ æ˜¯ä¸æ˜¯é‚£ä¸ªè§£å†³é—®é¢˜çš„äººï¼Ÿ</h2>
<p>å…¶å®ä¸ç®¡æ˜¯å›¢é˜Ÿçš„æŠ€æœ¯æ–¹æ¡ˆé€‰æ‹©ï¼Œè¿˜æ˜¯å¼€å‘è€…ä¸ªäººæŠ€èƒ½æ ‘çš„å‡çº§ï¼ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©ä»æ¥éƒ½ä¸ä»…ä»…æ˜¯æŠ€æœ¯å‚æ•°çš„å¯¹æ¯”ã€‚</p>
<p><strong>ç«™åœ¨å›¢é˜Ÿçš„è§’åº¦</strong>ï¼Œè€åˆ˜å½“å¹´é€‰æ‹©Flutterçš„åŸå› æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22fabffacbe9458eadf0143d7c58cc96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556840&amp;x-signature=6Tu8iY%2B0lQTxqiYxLzyvWmqvBEE%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<p><strong>ç«™åœ¨å¼€å‘è€…ä¸ªäººçš„è§’åº¦</strong>ï¼Œä½ éœ€è¦ä¿è¯è‡ªå·±çš„æŠ€èƒ½æ ‘ä¸­ç‚¹å‡ºæ¥å½“å‰ä¸»æµçš„æŠ€æœ¯æ–¹å‘ã€‚</p>
<p>æˆ‘ä¸æ˜¯è¯´ä¸€å®šè¦å­¦Flutteræˆ–è€…æŸä¸€ä¸ªæŠ€æœ¯ï¼Œè€Œæ˜¯ä½ è¦çŸ¥é“ç°åœ¨åœ¨è¡Œä¸šå†…å¤§å®¶éƒ½åœ¨ç”¨å“ªäº›æŠ€æœ¯ã€‚</p>
<p>è€Œè¢«å¤§é‡ä¼ä¸šå’Œå›¢é˜Ÿé€‰æ‹©çš„æŠ€æœ¯æ ˆå¤§æ¦‚ç‡æ˜¯å½“å‰æœ€èƒ½è§£å†³å®æˆ˜é—®é¢˜çš„ï¼Œæˆ–è€…æ˜¯æœ€å…·å¤‡æ€§ä»·æ¯”çš„é€‰é¡¹ã€‚</p>
<p>ä¸ºå•¥è¦åšä»ä¼—çš„é€‰æ‹©ï¼Ÿ</p>
<p>å› ä¸ºå•†ä¸šç¤¾ä¼šä½ ä¸èƒ½åšé‚£ä¸ªæŒæ¡å± é¾™æŠ€çš„äººï¼Œè€Œè¦ä¸åšé‚£ä¸ªè§£å†³é—®é¢˜çš„äººã€‚</p>
<p>é‚£ä»€ä¹ˆæ ·çš„æŠ€æœ¯è·¯çº¿èƒ½è§£å†³é—®é¢˜å‘¢ï¼Ÿ</p>
<p>å¹¶ä¸æ˜¯ä½ é’»ç ”æœ€æ·±å…¥çš„ï¼Œçœ‹èµ·æ¥å‚æ•°æœ€å¥½çš„ï¼Œè€Œæ˜¯ä½ çš„åŒäº‹éƒ½ä¼šç”¨çš„ã€‚</p>
<p>ä¸ä»…ä»…æ˜¯ä½ çš„åŒäº‹ï¼Œè¿˜æ˜¯é‚£äº›LLMæ¯”å¦‚Claudeã€ChatGPTç”šè‡³Kimiéƒ½èƒ½ç©å¾—è½¬çš„ã€‚</p>
<hr/>
<h2 data-id="heading-4">æ¢ä¸ªæ´»æ³•ï¼Œè·¯å®½å¾—å¾ˆ</h2>
<p>æˆ‘å»ºè®®ä½ æ”¾å¼ƒçº¯åŸç”Ÿï¼Œä¸æ˜¯è®©ä½ å¿˜æ‰åŸºç¡€ã€‚</p>
<p>è€Œæ˜¯è®©ä½ æ”¾å¼ƒé‚£ç§ç”»åœ°ä¸ºç‰¢çš„å¿ƒæ€ã€‚</p>
<p>ä¸è¦åšä¸€ä¸ªåªä¼šç Œå¢™çš„æ³¥ç“¦åŒ ï¼Œè¦åšä¸€ä¸ªæ‡‚ç»“æ„çš„å»ºç­‘å¸ˆã€‚</p>
<p>æœªæ¥å±äºé‚£äº›<strong>ç«™åœ¨åŸç”Ÿè‚©è†€ä¸Šï¼Œç”¨è·¨å¹³å°å’Œ AI ä¿¯è§†ä¸šåŠ¡</strong>çš„å¼€å‘è€…ã€‚</p>
<p>åˆ«è®©æŠ€æœ¯æ ˆé™åˆ¶äº†ä½ çš„æƒ³è±¡åŠ›ã€‚</p>
<p>æ›´åˆ«è®©çº¯åŸç”Ÿé™åˆ¶äº†ä½ çš„èº«ä»·ã€‚</p>
<p>å…±å‹‰ã€‚</p>
<blockquote>
<p>ğŸ¤ å¦‚æœçœ‹åˆ°è¿™é‡Œçš„åŒå­¦å¯¹å®¢æˆ·ç«¯æˆ–è€…Flutterå¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è”ç³»è€åˆ˜ï¼Œæˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€‚</p>
<p>ğŸ ç§ä¿¡å…è´¹é¢†è€åˆ˜æ•´ç†çš„ã€ŠFlutterå¼€å‘æ‰‹å†Œã€‹ï¼Œè¦†ç›–90%åº”ç”¨å¼€å‘åœºæ™¯ã€‚å¯ä»¥ä½œä¸ºFlutterå­¦ä¹ çš„çŸ¥è¯†åœ°å›¾ã€‚</p>
<p>ğŸ’¬ : laoliu_dev</p>
</blockquote>
<blockquote>
<p>ğŸ“‚ è€åˆ˜ä¹ŸæŠŠè‡ªå·±å†å²æ–‡ç« æ•´ç†åœ¨GitHubä»“åº“é‡Œï¼Œæ–¹ä¾¿å¤§å®¶æŸ¥é˜…ã€‚
ğŸ”— <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flzt-code%2Fblog" target="_blank" title="https://github.com/lzt-code/blog" ref="nofollow noopener noreferrer">github.com/lzt-code/blâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é›¶ JavaScript çš„æ€§èƒ½ä¼˜åŒ–è§†é¢‘åµŒå…¥]]></title>    <link>https://juejin.cn/post/7605807405307412543</link>    <guid>https://juejin.cn/post/7605807405307412543</guid>    <pubDate>2026-02-13T03:07:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605807405307412543" data-draft-id="7605941424535928886" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é›¶ JavaScript çš„æ€§èƒ½ä¼˜åŒ–è§†é¢‘åµŒå…¥"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-13T03:07:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é›¶ JavaScript çš„æ€§èƒ½ä¼˜åŒ–è§†é¢‘åµŒå…¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:07:56.000Z" title="Fri Feb 13 2026 03:07:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fperformance-optimized-video-embeds-with-zero-javascript%2F" target="_blank" title="https://frontendmasters.com/blog/performance-optimized-video-embeds-with-zero-javascript/" ref="nofollow noopener noreferrer">Performance-Optimized Video Embeds with Zero JavaScript</a></p>
<p>ç¿»è¯‘ï¼šTUARAN</p>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">{{å‰ç«¯å‘¨åˆŠ}}</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9adab526bf35403b930731150fbe7285~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556876&amp;x-signature=qCH4PSQPzxnMqBljgE%2BTusLDBL4%3D" alt="image.png" loading="lazy"/></p>
<p>åµŒå…¥è§†é¢‘å¾€å¾€ä¼šæ˜¾è‘—æ‹–æ…¢é¡µé¢ï¼šæ’­æ”¾å™¨ä¼šåŠ è½½ä¸€å †é¢å¤–èµ„æºï¼Œå³ä½¿ç”¨æˆ·æœ€ç»ˆæ ¹æœ¬ä¸ç‚¹æ’­æ”¾ã€‚</p>
<p>å¸¸è§çš„ä¼˜åŒ–æ˜¯ç”¨ <code>lite-youtube-embed</code> ä¹‹ç±»çš„è½»é‡ç»„ä»¶å…ˆå ä½ã€å†æŒ‰éœ€åŠ è½½ã€‚ä½†å¦‚æœè§†é¢‘å°±åœ¨é¦–å±ï¼ˆabove the foldï¼‰ï¼Œä»ç„¶å¯èƒ½å› ä¸ºå ä½ä¸çœŸå®æ’­æ”¾å™¨å°ºå¯¸/æ¸²æŸ“æ—¶æœºé—®é¢˜å¸¦æ¥ CLSï¼ˆç´¯è®¡å¸ƒå±€åç§»ï¼‰ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ç»™å‡ºä¸€ç§â€œæç®€ä½†å¾ˆå®ç”¨â€çš„æ¨¡å¼ï¼šåªç”¨åŸç”Ÿ HTML çš„ <code>&lt;details&gt;</code> / <code>&lt;summary&gt;</code> + ä¸€ç‚¹ CSSï¼Œå®ç°<strong>äº¤äº’æ—¶æ‰åŠ è½½ iframe</strong>ï¼Œå¹¶ä¸”ä¸å†™ä¸€è¡Œ JSã€‚</p>
<h2 data-id="heading-0">è§£å†³æ–¹æ¡ˆï¼šç”¨ <code>&lt;details&gt;</code> / <code>&lt;summary&gt;</code> ä½œä¸ºäº¤äº’è¾¹ç•Œ</h2>
<p><code>&lt;summary&gt;</code> çš„é»˜è®¤è¡Œä¸ºç±»ä¼¼æŒ‰é’®ï¼šç‚¹å‡»ä¼šå±•å¼€å¯¹åº” <code>&lt;details&gt;</code>ï¼Œæµè§ˆå™¨ä¼šç»™ <code>&lt;details&gt;</code> åŠ ä¸Š <code>open</code> å±æ€§ï¼›å†ç‚¹ä¸€æ¬¡å°±æ”¶èµ·ã€‚</p>
<p>é¡µé¢åˆå§‹åŠ è½½æ—¶ï¼Œ<code>&lt;details&gt;</code> å†…é™¤äº† <code>&lt;summary&gt;</code> ä»¥å¤–çš„å†…å®¹é»˜è®¤ä¸æ˜¾ç¤ºâ€”â€”è¿™ä½¿å®ƒå¤©ç„¶é€‚åˆâ€œç”¨æˆ·äº¤äº’åæ‰å‘ˆç°â€çš„å†…å®¹ï¼ˆæ¯”å¦‚ iframe è§†é¢‘ï¼‰ã€‚</p>
<h2 data-id="heading-1">æ‡’åŠ è½½ï¼šè¦é¿å…â€œé¦–å±æ‡’åŠ è½½åä¼¤â€</h2>
<p>ç°ä»£æµè§ˆå™¨æ”¯æŒ <code>loading="lazy"</code> å¯¹å›¾ç‰‡ä¸ iframe åšåŸç”Ÿæ‡’åŠ è½½ã€‚</p>
<p>ä½†éœ€è¦æ³¨æ„ï¼šæŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ‡’åŠ è½½ï¼Œå¯èƒ½åè€Œè®© LCP å˜å·®ã€‚Chrome å›¢é˜Ÿçš„ç ”ç©¶æåˆ°ï¼Œè¿‡åº¦æ‡’åŠ è½½å¯èƒ½è®© LCP ä¸‹é™çº¦ 20%ï¼Œå°¤å…¶æ˜¯å½“ä½ æŠŠå†…å®¹æ‡’åŠ è½½åˆ°é¦–å±è§†å£é‡Œæ—¶ã€‚</p>
<p>è¿™é‡Œçš„å…³é”®ç‚¹åœ¨äºï¼šiframe è§†é¢‘ä½œä¸º <code>&lt;details&gt;</code> çš„å†…å®¹ï¼Œåœ¨ç”¨æˆ·ç‚¹å‡»ä¹‹å‰å¹¶ä¸ç®—â€œåˆå§‹è§†å£å†…å®¹â€ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘é‚£ç§â€œé¦–å±æ‡’åŠ è½½å¸¦æ¥çš„åæ•ˆæœâ€ã€‚</p>
<p>ç»“è®ºï¼šå¦‚æœä½ æœ¬æ¥å°±æŠŠè§†é¢‘æ”¾åœ¨ä¸€ä¸ªå¯æŠ˜å åŒºåŸŸé‡Œï¼ˆaccordionï¼‰ï¼Œé‚£å°±éå¸¸é€‚åˆæŠŠå®ƒå»¶è¿Ÿåˆ°â€œç”¨æˆ·æƒ³çœ‹â€çš„é‚£ä¸€åˆ»æ‰åŠ è½½ã€‚</p>
<h2 data-id="heading-2">æ ·å¼ï¼šæŠŠ <code>&lt;summary&gt;</code> åšæˆè§†é¢‘ç¼©ç•¥å›¾</h2>
<p>é»˜è®¤çš„ <code>&lt;details&gt;</code> æ ·å¼å¾ˆæœ´ç´ ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ <code>&lt;summary&gt;</code> åšæˆä¸€ä¸ªâ€œè§†é¢‘ç¼©ç•¥å›¾å ä½â€ï¼Œä¸Šé¢å ä¸€ä¸ªè‡ªå®šä¹‰æ’­æ”¾æŒ‰é’®ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">&lt;detailsÂ <span class="hljs-attr">class</span>=<span class="hljs-string">"video-embed"</span>&gt;
Â Â &lt;summaryÂ <span class="hljs-attr">class</span>=<span class="hljs-string">"video-summary"</span>Â aria-label=<span class="hljs-string">"æ’­æ”¾è§†é¢‘ï¼šBigÂ BuckÂ Bunny"</span>&gt;
Â Â Â Â &lt;img
Â Â Â Â Â Â <span class="hljs-attr">src</span>=<span class="hljs-string">"https://lab.n8d.studio/htwoo/htwoo-core/images/videos/big-bug-bunny.webp"</span>
Â Â Â Â Â Â <span class="hljs-attr">class</span>=<span class="hljs-string">"video-thumbnail"</span>
Â Â Â Â Â Â <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
Â Â Â Â /&gt;
Â Â Â Â &lt;svgÂ <span class="hljs-attr">class</span>=<span class="hljs-string">"video-playicon"</span>Â viewBox=<span class="hljs-string">"0Â 0Â 32Â 32"</span>Â aria-hidden=<span class="hljs-string">"true"</span>&gt;
Â Â Â Â Â Â &lt;pathÂ <span class="hljs-attr">d</span>=<span class="hljs-string">"m11.167Â 5.608Â 16.278Â 8.47a2.169Â 2.169Â 0Â 0Â 1Â .011Â 3.838l-.012.006-16.278Â 8.47a2.167Â 2.167Â 0Â 0Â 1-3.167-1.922V7.529a2.167Â 2.167Â 0Â 0Â 1Â 3.047-1.981l-.014-.005.134.065z"</span>Â /&gt;
Â Â Â Â &lt;/svg&gt;
Â Â &lt;/summary&gt;

Â Â &lt;divÂ <span class="hljs-attr">class</span>=<span class="hljs-string">"video-content"</span>&gt;
Â Â Â Â &lt;!--Â åŸå§‹Â embedÂ ä»£ç å°½é‡ä¸æ”¹ï¼Œç›´æ¥æ”¾è¿›æ¥Â --&gt;
Â Â Â Â &lt;iframe
Â Â Â Â Â Â <span class="hljs-attr">src</span>=<span class="hljs-string">"https://www.youtube.com/embed/aqz-KE-bpKQ?autoplay=1"</span>
Â Â Â Â Â Â <span class="hljs-attr">title</span>=<span class="hljs-string">"BigÂ BuckÂ Bunny"</span>
Â Â Â Â Â Â <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span>
Â Â Â Â Â Â <span class="hljs-attr">allow</span>=<span class="hljs-string">"accelerometer;Â autoplay;Â clipboard-write;Â encrypted-media;Â gyroscope;Â picture-in-picture"</span>
Â Â Â Â Â Â allowfullscreen
Â Â Â Â &gt;&lt;/iframe&gt;
Â Â &lt;/div&gt;
&lt;/details&gt;
</code></pre>
<p>è¦ç‚¹ï¼š</p>
<ul>
<li>ç¼©ç•¥å›¾ä¸ iframe ç»´æŒåŒä¸€å®½é«˜æ¯”ï¼ˆé¿å…å¸ƒå±€è·³åŠ¨ï¼‰ã€‚</li>
<li>æ’­æ”¾æŒ‰é’®ç”¨è‡ªæœ‰ SVGï¼Œä¿è¯å“ç‰Œä¸€è‡´æ€§ã€‚</li>
<li><code>aria-label</code> ç»™å±å¹•é˜…è¯»å™¨ä¸€ä¸ªæ˜ç¡®çš„åŠ¨ä½œæç¤ºï¼ˆä½œè€…ä¹Ÿå¼ºè°ƒéœ€è¦åšè·¨ VoiceOver/NVDA/JAWS çš„å®é™…æµ‹è¯•ï¼‰ã€‚</li>
</ul>
<p>CSS å¯ä»¥ç”¨ grid æŠŠæŒ‰é’®å åœ¨ç¼©ç•¥å›¾æ­£ä¸­ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.video-summary</span>Â {
Â Â <span class="hljs-attribute">display</span>:Â grid;
Â Â place-items:Â center;
}

<span class="hljs-selector-class">.video-thumbnail</span>,
<span class="hljs-selector-class">.video-playicon</span>Â {
Â Â <span class="hljs-attribute">grid-area</span>:Â <span class="hljs-number">1</span>Â /Â <span class="hljs-number">1</span>;
}

<span class="hljs-selector-class">.video-playicon</span>Â {
Â Â <span class="hljs-attribute">width</span>:Â <span class="hljs-number">64px</span>;
Â Â <span class="hljs-attribute">height</span>:Â <span class="hljs-number">64px</span>;
}
</code></pre>
<h2 data-id="heading-3">å±•å¼€åéšè—ç¼©ç•¥å›¾ï¼Œè®© iframe å‡ºç°</h2>
<p><code>&lt;summary&gt;</code> é»˜è®¤å³ä½¿å±•å¼€ä¹Ÿä¼šæŒç»­å¯è§ï¼›ä½†æˆ‘ä»¬å±•å¼€åå¸Œæœ›çœ‹åˆ°çš„æ˜¯ iframeï¼Œè€Œä¸æ˜¯ç¼©ç•¥å›¾ã€‚</p>
<p>æ€è·¯å¾ˆç®€å•ï¼šå½“ <code>&lt;details&gt;</code> å…·å¤‡ <code>open</code> å±æ€§æ—¶ï¼ŒæŠŠ summary éšè—ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.video-embed</span>Â {
Â Â <span class="hljs-attribute">position</span>:Â relative;
}

<span class="hljs-selector-class">.video-embed</span><span class="hljs-selector-attr">[open]</span>Â <span class="hljs-selector-class">.video-summary</span>Â {
Â Â <span class="hljs-attribute">visibility</span>:Â hidden;
}

<span class="hljs-selector-class">.video-content</span>Â <span class="hljs-selector-tag">iframe</span>Â {
Â Â <span class="hljs-attribute">width</span>:Â <span class="hljs-number">100%</span>;
Â Â <span class="hljs-attribute">height</span>:Â <span class="hljs-number">100%</span>;
}
</code></pre>
<p>ç”¨æˆ·ç‚¹å‡»ç¼©ç•¥å›¾æ—¶ï¼š</p>
<ul>
<li>æµè§ˆå™¨æŠŠ <code>open</code> åŠ åˆ° <code>&lt;details&gt;</code> ä¸Š</li>
<li>summary è¢«éšè—</li>
<li>iframe è¿›å…¥è§†å£å¹¶å¼€å§‹åŠ è½½ï¼ˆè€Œä¸”åªåœ¨ç”¨æˆ·çœŸçš„æƒ³çœ‹æ—¶æ‰åŠ è½½ï¼‰</li>
</ul>
<p>å°æç¤ºï¼šå¯¹äº YouTubeï¼Œå¯ä»¥åœ¨ iframe URL ä¸ŠåŠ  <code>?autoplay=1</code>ï¼Œè®©æ’­æ”¾å™¨å°½å¿«å¼€å§‹æ’­æ”¾ï¼›ä½†å¦‚æœç”¨æˆ·æµè§ˆå™¨ç¦ç”¨äº† autoplayï¼Œä»éœ€è¦å†æ¬¡ç‚¹å‡»ã€‚</p>
<h2 data-id="heading-4">æ€§èƒ½å¯¹æ¯”ï¼ˆä¸ lite-youtube-embedï¼‰</h2>
<p>ä½œè€…ç”¨åŒä¸€å¼ ç¼©ç•¥å›¾å¯¹æ¯”äº†æœ¬æ–¹æ¡ˆä¸ <code>lite-youtube-embed</code>ï¼š</p>





















































<table><thead><tr><th>æŒ‡æ ‡</th><th><code>&lt;details&gt;</code> æ¨¡å¼</th><th>lite-youtube-embed</th><th>æ›´ä¼˜</th></tr></thead><tbody><tr><td>Load Time</td><td>595ms</td><td>693ms</td><td><code>&lt;details&gt;</code>ï¼ˆçº¦å¿« 14%ï¼‰</td></tr><tr><td>FCP</td><td>11ms</td><td>70ms</td><td><code>&lt;details&gt;</code>ï¼ˆçº¦å¿« 6.4Ã—ï¼‰</td></tr><tr><td>LCP</td><td>97ms</td><td>157ms</td><td><code>&lt;details&gt;</code>ï¼ˆçº¦å¿« 1.6Ã—ï¼‰</td></tr><tr><td>Transfer</td><td>34 KB</td><td>84 KB</td><td><code>&lt;details&gt;</code>ï¼ˆçº¦å°‘ 2.5Ã—ï¼‰</td></tr><tr><td>CLS</td><td>0.0075</td><td>0.0000</td><td>éƒ½ä¸é”™</td></tr><tr><td>TBT</td><td>0ms</td><td>0ms</td><td>æŒå¹³</td></tr><tr><td>JavaScript</td><td>0</td><td>~3KB</td><td><code>&lt;details&gt;</code></td></tr></tbody></table>
<p>ï¼ˆåŸæ–‡è¿˜æåˆ°èµ„æºè¯·æ±‚æ•°é‡ä¹Ÿæ˜¾è‘—æ›´å°‘ã€‚ï¼‰</p>
<h2 data-id="heading-5">æ”¶å°¾</h2>
<ul>
<li><code>&lt;details&gt;</code> è‡ª 2011 èµ·å°±åœ¨æµè§ˆå™¨ä¸­å¯ç”¨</li>
<li>iframe åŸç”Ÿ lazy loading å¤§çº¦åœ¨ 2019 è½åœ°</li>
</ul>
<p>æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œä½ å°±èƒ½è·å¾—â€œé¦–å±æ›´å¿«ã€é‡å†…å®¹å»¶åã€äº¤äº’è‡ªç„¶ã€é”®ç›˜å¯ç”¨â€çš„è§†é¢‘åµŒå…¥ä½“éªŒï¼Œè€Œä¸”å®Œå…¨ä¸ä¾èµ– JavaScriptã€‚</p>
<p>å®ƒä¸æ˜¯ä¸€ä¸ªâ€œäº§å“â€ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œæ¨¡å¼â€ï¼šåŒæ ·é€‚ç”¨äº Vimeoã€è‡ªæ‰˜ç®¡è§†é¢‘ã€GIFã€CodePenã€åœ°å›¾ç­‰ä»»ä½•é‡é‡çº§åµŒå…¥å†…å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŒä¸€ä¸ª newï¼Œä¸åŒçš„ä¸–ç•Œï¼šJava ä¸ TypeScript å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„é™ç»´æ‰“å‡»]]></title>    <link>https://juejin.cn/post/7605811866908524553</link>    <guid>https://juejin.cn/post/7605811866908524553</guid>    <pubDate>2026-02-13T02:49:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866908524553" data-draft-id="7605817795628597298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŒä¸€ä¸ª newï¼Œä¸åŒçš„ä¸–ç•Œï¼šJava ä¸ TypeScript å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„é™ç»´æ‰“å‡»"/> <meta itemprop="keywords" content="JavaScript,Java"/> <meta itemprop="datePublished" content="2026-02-13T02:49:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gogo1121"/> <meta itemprop="url" content="https://juejin.cn/user/4162081326907051"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŒä¸€ä¸ª newï¼Œä¸åŒçš„ä¸–ç•Œï¼šJava ä¸ TypeScript å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„é™ç»´æ‰“å‡»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4162081326907051/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gogo1121
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:49:12.000Z" title="Fri Feb 13 2026 02:49:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>è®©æˆ‘ä»¬å…ˆçœ‹ä¸¤æ®µä»£ç ã€‚</p>
<p><strong>Java ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">CountPointsTransactDto <span class="hljs-attr">record</span> = new CountPointsTransactDto()<span class="hljs-comment">;</span>
<span class="hljs-attr">record.amount</span> = <span class="hljs-number">100</span><span class="hljs-comment">;</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>TypeScript ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">record</span> = new CountPointsTransactDto()<span class="hljs-comment">;</span>
<span class="hljs-attr">record.amount</span> = <span class="hljs-number">100</span><span class="hljs-comment">;</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä¹ä¸€çœ‹ï¼Œè¿™ç®€ç›´å°±æ˜¯<strong>åŒèƒèƒ</strong>ã€‚è¯­æ³•ç»“æ„ã€å…³é”®å­—ã€ç”šè‡³èµ‹å€¼æ–¹å¼éƒ½å¦‚å‡ºä¸€è¾™ã€‚å¾ˆå¤šä» Java è½¬è¿‡æ¥çš„åç«¯åŒå­¦çœ‹åˆ°è¿™é‡Œä¼šæ¾ä¸€å£æ°”ï¼šâ€œåˆ‡ï¼ŒTS ä¸å°±æ˜¯å¸¦ç±»å‹çš„ JS å˜›ï¼Œè·Ÿå†™ Java æ²¡åŒºåˆ«ã€‚â€</p>
<p><strong>å¤§é”™ç‰¹é”™ã€‚</strong></p>
<p>è™½ç„¶å®ƒä»¬é•¿å¾—åƒï¼Œä½†åœ¨è®¡ç®—æœºå†…å­˜çš„å¾®è§‚ä¸–ç•Œé‡Œï¼Œè¿™ä¸¤è¡Œä»£ç è§¦å‘çš„é€»è¾‘å®Œå…¨å±äºä¸¤ä¸ªä¸åŒçš„å®‡å®™ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§Š ä¸€ã€å†…å­˜æ¨¡å‹ï¼šè“å›¾ vs é»åœŸ</h2>
<h3 data-id="heading-1">1. Java çš„ <code>new</code>ï¼šä¸¥æ ¼çš„è“å›¾ (Blueprint)</h3>
<p>åœ¨ Java ä¸­ï¼Œç±»ï¼ˆClassï¼‰æ˜¯ä¸€å¼ <strong>ä¸å¯ä¿®æ”¹çš„å·¥ç¨‹è“å›¾</strong>ã€‚</p>
<p>å½“ä½ æ‰§è¡Œ <code>new</code> æ—¶ï¼ŒJVM ä¼šåšä»¥ä¸‹äº‹æƒ…ï¼š</p>
<ol>
<li><strong>åŠ è½½è“å›¾</strong>ï¼šè¯»å– <code>.class</code> æ–‡ä»¶ï¼Œè§£æå­—æ®µå’Œæ–¹æ³•ã€‚</li>
<li><strong>åˆ’åœ°ç›˜</strong>ï¼šæ ¹æ®è“å›¾è®¡ç®—å‡ºå¯¹è±¡éœ€è¦å¤šå°‘å†…å­˜ï¼ˆä¾‹å¦‚ï¼š2ä¸ª int + 1ä¸ª String å¼•ç”¨ = å›ºå®šå­—èŠ‚æ•°ï¼‰ã€‚</li>
<li><strong>æµ‡ç­‘</strong>ï¼šåœ¨å †å†…å­˜ä¸­å¼€è¾Ÿä¸€å—<strong>å›ºå®šå¤§å°ã€å›ºå®šç»“æ„</strong>çš„åŒºåŸŸã€‚</li>
</ol>
<p><strong>ç»“è®º</strong>ï¼šJava å¯¹è±¡å‡ºç”Ÿé‚£ä¸€åˆ»ï¼Œå®ƒçš„ç»“æ„å°±å®šæ­»äº†ã€‚ä½ ä¸å¯èƒ½åœ¨è¿è¡Œæ—¶çªç„¶ç»™å®ƒåŠ ä¸€ä¸ª <code>nickname</code> å±æ€§ã€‚å¦‚æœä½ æ•¢è¿™ä¹ˆåšï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥æŠ¥é”™ï¼ŒIDE ä¼šæ ‡çº¢ã€‚</p>
<h3 data-id="heading-2">2. TypeScript (JS) çš„ <code>new</code>ï¼šå¯å¡‘çš„é»åœŸ (Clay)</h3>
<p>åœ¨ TypeScriptï¼ˆæœ€ç»ˆè¿è¡Œçš„æ˜¯ JavaScriptï¼‰ä¸­ï¼Œç±»åªæ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œå¯¹è±¡åªæ˜¯ä¸€ä¸ª<strong>å“ˆå¸Œè¡¨ï¼ˆKey-Value Mapï¼‰</strong> ã€‚</p>
<p>å½“ä½ æ‰§è¡Œ <code>new</code> æ—¶ï¼ŒJS å¼•æ“åšäº†è¿™ 4 ä»¶äº‹ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç©ºçš„å“ˆå¸Œè¡¨ <code>{}</code>ã€‚</li>
<li>æŠŠè¿™ä¸ªç©ºè¡¨çš„ <code>__proto__</code> æŒ‡é’ˆæŒ‡å‘ç±»çš„ <code>prototype</code>ï¼ˆä¸ºäº†èƒ½ç”¨ç±»çš„æ–¹æ³•ï¼‰ã€‚</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ï¼ˆConstructorï¼‰ï¼Œç»™è¿™ä¸ªå“ˆå¸Œè¡¨å¡å…¥åˆå§‹å±æ€§ï¼ˆå¦‚ <code>this.amount = 0</code>ï¼‰ã€‚</li>
<li>è¿”å›è¿™ä¸ªå“ˆå¸Œè¡¨ã€‚</li>
</ol>
<p><strong>ç»“è®º</strong>ï¼šJS å¯¹è±¡æœ¬è´¨ä¸Šæ˜¯ä¸€å›¢å¯ä»¥éšæ„æ‰æçš„é»åœŸã€‚</p>
<p>è™½ç„¶ TypeScript çš„ç¼–è¯‘å™¨ï¼ˆtscï¼‰ä¼šåƒ Java ä¸€æ ·æ£€æŸ¥ä½ çš„æ‹¼å†™ï¼Œä½†åœ¨<strong>è¿è¡Œæ—¶</strong>ï¼Œä½ å®Œå…¨å¯ä»¥ç»™è¿™ä¸ªå¯¹è±¡è¿½åŠ ä»»ä½•å±æ€§ï¼ˆ<code>record.whatever = 123</code>ï¼‰ï¼ŒJS å¼•æ“ç»ä¸ä¼šæ‹¦ä½ ã€‚</p>
<hr/>
<h2 data-id="heading-3">âš”ï¸ äºŒã€èµ‹å€¼é€»è¾‘ï¼šæƒé™æ§åˆ¶ vs çº¦å®šä¿—æˆ</h2>
<h3 data-id="heading-4">Javaï¼šä¸¥é˜²æ­»å®ˆ</h3>
<p>Java èƒ½ä¸èƒ½ç›´æ¥èµ‹å€¼ï¼Œå–å†³äº<strong>è®¿é—®ä¿®é¥°ç¬¦</strong>ã€‚</p>
<ul>
<li>å¦‚æœ <code>amount</code> æ˜¯ <code>public</code>ï¼Œå¯ä»¥ã€‚</li>
<li>ä½† Java å¼€å‘çš„é»„é‡‘æ³•åˆ™æ˜¯ <strong>å°è£…ï¼ˆEncapsulationï¼‰</strong> ã€‚ç»å¤§å¤šæ•° entity/dto çš„å­—æ®µéƒ½æ˜¯ <code>private</code> çš„ï¼Œå¿…é¡»é€šè¿‡ <code>setAmount()</code> æ–¹æ³•æ¥è®¿é—®ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> ä¸ºäº†å®‰å…¨ã€‚Java å¯ä»¥åœ¨ setter é‡ŒåŠ é€»è¾‘ï¼ˆæ¯”å¦‚ <code>if (amount &lt; 0) throw error</code>ï¼‰ï¼Œä¿è¯æ•°æ®å®‰å…¨ã€‚</li>
</ul>
<h3 data-id="heading-5">TypeScriptï¼šè‡ªç”±å¥”æ”¾</h3>
<p>TypeScript é»˜è®¤æ‰€æœ‰å±æ€§éƒ½æ˜¯ <code>public</code>ã€‚</p>
<p>åœ¨ TS/JS ç”Ÿæ€ä¸­ï¼Œç›´æ¥æ“ä½œå±æ€§ï¼ˆ<code>record.amount = 100</code>ï¼‰æ˜¯<strong>æ ‡å‡†åšæ³•</strong>ã€‚</p>
<ul>
<li>æˆ‘ä»¬å¾ˆå°‘åœ¨ DTO é‡Œå†™ <code>getAmount()</code> / <code>setAmount()</code>ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> å› ä¸º JS è¿½æ±‚çµæ´»æ€§å’Œç®€æ´ã€‚å¦‚æœçœŸè¦æ§åˆ¶æƒé™ï¼ŒTS ä¹Ÿæœ‰ <code>private</code> å…³é”®å­—ï¼Œä½†é‚£åªæ˜¯ç¼–è¯‘æ—¶çš„çº¦æŸï¼Œç¼–è¯‘æˆ JS åï¼Œç§æœ‰å±æ€§ä¾ç„¶å¯ä»¥è¢«è®¿é—®ï¼ˆè™½ç„¶ä¸æ¨èï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ğŸ¦† ä¸‰ã€ç±»å‹ç³»ç»Ÿï¼šåä¹‰ vs ç»“æ„ (æ ¸å¿ƒå·®å¼‚)</h2>
<p>è¿™æ˜¯æœ€é¢ è¦† Java å¼€å‘è€…è®¤çŸ¥çš„ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-7">Javaï¼šåä¹‰ç±»å‹ (Nominal Typing)</h3>
<p>Java åªè®¤<strong>åå­—</strong>ï¼ˆèº«ä»½è¯ï¼‰ã€‚</p>
<p>å“ªæ€•ä¸¤ä¸ªç±»é•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼Œåå­—ä¸ä¸€æ ·ï¼Œå°±æ˜¯ä¸å…¼å®¹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> { <span class="hljs-type">int</span> x; }
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> { <span class="hljs-type">int</span> x; }
<span class="hljs-type">A</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(); <span class="hljs-comment">// âŒ æŠ¥é”™ï¼B ä¸æ˜¯ Aã€‚</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-8">TypeScriptï¼šç»“æ„åŒ–ç±»å‹ (Structural / Duck Typing)</h3>
<p>TypeScript åªè®¤<strong>é•¿ç›¸</strong>ï¼ˆé¸­å­æµ‹è¯•ï¼‰ã€‚</p>
<p>åªè¦ä½ é•¿å¾—åƒï¼ˆå±æ€§åˆ—è¡¨åŒ¹é…ï¼‰ï¼Œä½ å°±æ˜¯å®ƒã€‚</p>
<pre><code class="hljs language-css" lang="css">class <span class="hljs-selector-tag">A</span> { x: number; }
class <span class="hljs-selector-tag">B</span> { x: number; }
const obj: A = new <span class="hljs-built_in">B</span>(); // âœ… é€šè¿‡ï¼å› ä¸º <span class="hljs-selector-tag">B</span> ä¹Ÿæœ‰ xï¼Œç»“æ„æ»¡è¶³ <span class="hljs-selector-tag">A</span> çš„è¦æ±‚ã€‚
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ TS é‡Œï¼Œä½ ç»å¸¸çœ‹åˆ°æœ‰äºº<strong>å·æ‡’</strong>ï¼Œä¸ç”¨ <code>new</code>ï¼Œè€Œæ˜¯ç›´æ¥å†™ä¸ªå­—é¢é‡å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// TS å…è®¸è¿™æ ·ï¼ˆåªè¦å±æ€§å¯¹å¾—ä¸Šï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">record</span>: <span class="hljs-title">CountPointsTransactDto</span> = { amount: <span class="hljs-number">100</span> }; 
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-9">ğŸ¤” å››ã€çµé­‚æ‹·é—®ï¼šæ—¢ç„¶å¦‚æ­¤ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨ <code>new</code>ï¼Ÿ</h2>
<p>æ—¢ç„¶ <code>{ amount: 100 }</code> å°±èƒ½å†’å…… DTOï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ NestJS ä¸­è¿˜æ˜¯æ¨èå†™ï¼š</p>
<p><code>const record = new CountPointsTransactDto();</code></p>
<p>åŸå› æœ‰ä¸‰ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹å€¼ (Default Values)</strong> ï¼š</p>
<p>ç±»é‡Œå®šä¹‰äº† <code>status = 'PENDING'</code>ï¼Œ<code>new</code> å‡ºæ¥çš„å¯¹è±¡è‡ªåŠ¨å°±æœ‰ã€‚å­—é¢é‡ <code>{}</code> å¿…é¡»æ‰‹åŠ¨å†™ä¸€éã€‚</p>
</li>
<li>
<p><strong>æ–¹æ³• (Methods)</strong> ï¼š</p>
<p>åªæœ‰ <code>new</code> å‡ºæ¥çš„å®ä¾‹æ‰æŒ‚è½½äº†åŸå‹é“¾ï¼Œæ‰èƒ½è°ƒç”¨ DTO é‡Œå®šä¹‰çš„ <code>isValid()</code> æˆ– <code>calculateTax()</code> æ–¹æ³•ã€‚</p>
</li>
<li>
<p><strong>å…ƒæ•°æ® (Metadata &amp; Decorators)</strong> ï¼š</p>
<p>è¿™æ˜¯æœ€é‡è¦çš„ã€‚NestJS å¤§é‡ä½¿ç”¨è£…é¥°å™¨ï¼ˆå¦‚ <code>@IsString()</code>, <code>@Expose()</code>ï¼‰ã€‚</p>
<p><strong>çº¯ JSON å¯¹è±¡æ˜¯ä¸å¸¦è¿™äº›è£…é¥°å™¨ä¿¡æ¯çš„</strong>ã€‚åªæœ‰é€šè¿‡ <code>class-transformer</code> çš„ <code>plainToInstance</code> æˆ–è€…ç›´æ¥ <code>new</code> å‡ºæ¥çš„å¯¹è±¡ï¼ŒéªŒè¯ç®¡é“ï¼ˆValidationPipeï¼‰æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-10">ğŸ“ æ€»ç»“</h2>



































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>Java (new)</strong></th><th><strong>TypeScript / JS (new)</strong></th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td>æŒ‰ç…§è“å›¾å¼€è¾Ÿå›ºå®šå†…å­˜å—</td><td>åˆ›å»ºç©ºå“ˆå¸Œè¡¨ï¼Œé“¾æ¥åŸå‹é“¾</td></tr><tr><td><strong>ç»“æ„çµæ´»æ€§</strong></td><td><strong>ä¸å¯å˜</strong> (ç¼–è¯‘åå›ºå®š)</td><td><strong>é«˜åº¦å¯å˜</strong> (è¿è¡Œæ—¶å¯å¢åˆ å±æ€§)</td></tr><tr><td><strong>å±æ€§èµ‹å€¼</strong></td><td>ä¾èµ– public/privateï¼Œå¸¸ç”¨ Setter</td><td>é»˜è®¤ publicï¼Œå¸¸ç”¨ç›´æ¥èµ‹å€¼</td></tr><tr><td><strong>ç±»å‹å…¼å®¹</strong></td><td><strong>çœ‹åå­—</strong> (å¿…é¡»æ˜¯åŒä¸€ä¸ªç±»æˆ–å­ç±»)</td><td><strong>çœ‹ç»“æ„</strong> (å±æ€§åŒ¹é…å³å¯)</td></tr><tr><td><strong>ä½¿ç”¨å»ºè®®</strong></td><td>å¿…é¡»ç”¨ <code>new</code></td><td>æ¨èç”¨ <code>new</code> (ä¸ºäº†é»˜è®¤å€¼å’Œè£…é¥°å™¨)</td></tr></tbody></table>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p>
<p>ä¸è¦è¢« TypeScript çš„è¯­æ³•ç³–æ¬ºéª—äº†ã€‚å®ƒè™½ç„¶ç©¿ä¸Šäº† Java çš„è¥¿è£…ï¼ˆClass, new, privateï¼‰ï¼Œä½†å®ƒçš„çµé­‚ä¾ç„¶æ˜¯é‚£ä¸ªè‡ªç”±ã€çµæ´»ã€åŸºäºåŸå‹çš„ JavaScriptã€‚ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œä½ å†™å‡ºçš„ TS ä»£ç æ‰ä¼šæœ‰çœŸæ­£çš„â€œTS å‘³â€ã€‚</p>
<p>â€‹åŒä¸€ä¸ª newï¼Œä¸åŒçš„ä¸–ç•Œï¼šJava ä¸ TypeScript å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„é™ç»´æ‰“å‡»</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è½¦è½½å¤§ç«¯åºå’Œtcpå¤§ç«¯åº]]></title>    <link>https://juejin.cn/post/7605792874173415487</link>    <guid>https://juejin.cn/post/7605792874173415487</guid>    <pubDate>2026-02-13T03:01:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605792874173415487" data-draft-id="7605807405307215935" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è½¦è½½å¤§ç«¯åºå’Œtcpå¤§ç«¯åº"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T03:01:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åé—´fish"/> <meta itemprop="url" content="https://juejin.cn/user/2165385864686928"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è½¦è½½å¤§ç«¯åºå’Œtcpå¤§ç«¯åº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2165385864686928/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åé—´fish
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:01:15.000Z" title="Fri Feb 13 2026 03:01:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ul>
<li>
<p><strong>TCP/IP å¤§ç«¯ = ç½‘ç»œå­—èŠ‚åº = htonl/htons</strong></p>
</li>
<li>
<p><strong>CAN DBC å¤§ç«¯ = Motorola æ ¼å¼ï¼ˆCANoe/CANdb++ é‡Œçš„ MSBï¼‰</strong></p>
</li>
</ul>
<h2 data-id="heading-0">ä¸€ä¸ªå­—èŠ‚å†…éƒ¨çš„ bit æ˜¯å›ºå®šçš„</h2>
<p>ä»»ä½•ä¸€ä¸ªå­—èŠ‚ï¼Œç¡¬ä»¶ä¸Šæ°¸è¿œæ˜¯ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs language-markdown" lang="markdown">bit7  bit6  bit5  bit4  bit3  bit2  bit1  bit0
<span class="hljs-code">                                  
æœ€é«˜ä½                                    æœ€ä½ä½
</span></code></pre>
<h3 data-id="heading-1">è¿™ä¸ª <strong>bit7~bit0 çš„é¡ºåºï¼Œæ°¸è¿œä¸ä¼šå˜</strong>ã€‚ä¸ç®¡ä½ ç”¨å¤§ç«¯ã€å°ç«¯ã€ç½‘ç»œåºã€DBCï¼Œ<strong>å•ä¸ªå­—èŠ‚å†…éƒ¨çš„ bit ç¼–å·æ°¸è¿œå›ºå®š</strong>ã€‚</h3>
<h3 data-id="heading-2">â‘  TCP å¤§ç«¯ï¼ˆç½‘ç»œå­—èŠ‚åºï¼‰</h3>
<ul>
<li>åªç®¡<strong>å­—èŠ‚åº</strong>ï¼Œä¸ç®¡<strong>ä½åº</strong></li>
<li>å­—èŠ‚ï¼š<strong>é«˜å­—èŠ‚åœ¨å‰ï¼Œä½å­—èŠ‚åœ¨å</strong></li>
<li>ä½åºï¼š<strong>æ¯ä¸ªå­—èŠ‚å†…éƒ¨ï¼Œä½åºä¸å˜</strong></li>
</ul>
<p>å¤ä¹ ï¼š</p>
<p>ä»¥ 32 ä½æ•´æ•° <code>0x12345678</code> ä¸ºä¾‹ï¼š</p>
<p>å®ƒåœ¨å†…å­˜é‡Œï¼ˆå°ç«¯ CPUï¼Œæ¯”å¦‚ ARM/x86ï¼‰æ˜¯ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">ä½åœ°å€ â†’ é«˜åœ°å€
0x78  0x56  0x34  0x12
</code></pre>
<p>ç”¨ <code>htonl</code> è½¬æˆ <strong>TCP å¤§ç«¯ï¼ˆç½‘ç»œåºï¼‰</strong> åï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">0x12  0x34  0x56  0x78
</code></pre>
<p>ä¾‹ï¼š<code>0x12345678</code>TCP å¤§ç«¯ä¼ è¾“ï¼š<code>12 34 56 78</code></p>
<h3 data-id="heading-3">â‘¡ DBC å¤§ç«¯ï¼ˆMotorolaï¼‰</h3>
<p><strong>æ—¢ç®¡å­—èŠ‚åºï¼Œåˆç®¡ä½åºï¼Œæ˜¯ â€œæ•´æ®µä¿¡å·æŒ‰ä½ä»é«˜å¾€ä½æ’â€</strong></p>
<p>è§„åˆ™ï¼š</p>
<ol>
<li><strong>ä¿¡å·çš„æœ€é«˜ä½ï¼ˆMSBï¼‰æ”¾åœ¨ CAN æŠ¥æ–‡çš„æœ€é«˜åœ°å€ä½</strong></li>
<li><strong>è·¨å­—èŠ‚æ—¶ï¼Œå­—èŠ‚æ˜¯å¤§ç«¯é¡ºåºï¼ˆé«˜å­—èŠ‚â†’ä½å­—èŠ‚ï¼‰</strong></li>
<li><strong>å­—èŠ‚å†…éƒ¨ä½ä¹Ÿæ˜¯å¤§ç«¯ä½åºï¼ˆbit7â†’bit0ï¼‰</strong></li>
</ol>
<p>DBC ä¿¡å·è§£æå¿…é¡»ï¼š</p>
<ul>
<li>æŒ‰ <strong>start_bitã€lengthã€byte_order=Motorola</strong> é€ä½æŠ½å–</li>
<li>DBC çš„ start_bit ä¸æ˜¯ä» Byte0 å¼€å§‹ç®—ï¼Œè€Œæ˜¯ä» Byte7.bit7 å¼€å§‹ç®—ã€‚</li>
<li>DBC Motorola çš„ä¿¡å·ï¼Œæ˜¯ä»ã€Œä½ æŒ‡å®šçš„ start_bitã€å¼€å§‹ï¼Œå¾€ã€Œæ›´å°çš„æ•°å­—ã€æ–¹å‘ï¼Œè¿ç»­å  N ä¸ª bitã€‚</li>
</ul>
<h4 data-id="heading-4">æ‰€è°“çš„è·¨å­—èŠ‚ç†è§£ï¼Œå–å†³äºä¿¡å·çš„é•¿åº¦</h4>
<h2 data-id="heading-5">ç”¨ä¸€ä¸ª 32bit ä¿¡å·ï¼Œç»™ä½ çœ‹ä»€ä¹ˆå«ã€Œè·¨å­—èŠ‚ã€</h2>
<p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªä¿¡å·ï¼š</p>
<ul>
<li><strong>Motorola å¤§ç«¯</strong></li>
<li><strong>start_bit = 63</strong>ï¼ˆå°±æ˜¯ Byte7.bit7ï¼‰</li>
<li><strong>length = 32 bit</strong></li>
</ul>
<h3 data-id="heading-6">å®ƒå çš„ bit æ˜¯ï¼š</h3>
<p>63 â†’ 62 â†’ 61 â†’ â€¦ â†’ 32ä¸€å…± 32 ä¸ª bit</p>
<h3 data-id="heading-7">å¯¹åº”åˆ°å­—èŠ‚ï¼š</h3>
<ul>
<li>63ï½56 â†’ <strong>Byte7</strong></li>
<li>55ï½48 â†’ <strong>Byte6</strong></li>
<li>47ï½40 â†’ <strong>Byte5</strong></li>
<li>39ï½32 â†’ <strong>Byte4</strong></li>
</ul>
<h4 data-id="heading-8">ä¿¡å·æ¨ªè·¨ï¼š</h4>
<p><strong>Byte7ã€Byte6ã€Byte5ã€Byte4</strong>è¿™å°±æ˜¯æˆ‘ä¹‹å‰è¯´çš„ï¼š<strong>ä¸€ä¸ªä¿¡å·æ¨ªè·¨ 4 ä¸ªå­—èŠ‚ã€‚</strong></p>
<h2 data-id="heading-9">çœ‹éœ€æ±‚ï¼š</h2>
<h4 data-id="heading-10">ä¸€ã€éœ€æ±‚æè¿°ï¼šï¼ˆ3.0ï¼‰</h4>
<p>1ï¼‰ä½ç½®ä¿¡æ¯å…±äº«è½¯å¼€å…³å…³é—­çŠ¶æ€ä¸‹ï¼Œä½ç½®ä¿¡æ¯ç›¸å…³ä¿¡å·ä¸Šä¼ èµ‹å€¼0å¤„ç†ï¼›</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c38b33d98a94a19b3d2a664f6d3e66f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2B6Ze0ZmlzaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556475&amp;x-signature=60daghAWD%2F1uRjPpYreV6yi%2FloE%3D" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾_17709510982755.png" loading="lazy"/></p>
<p>å·¥å…·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.csselectronics.com%2Fpages%2Fdbc-editor-can-bus-database" target="_blank" title="https://www.csselectronics.com/pages/dbc-editor-can-bus-database" ref="nofollow noopener noreferrer">DBC Editor for CAN Bus Database Files [Online | 100% Free] â€“ CSS Electronics</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33fa594ccb704d8a9b493707b0b5acaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2B6Ze0ZmlzaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556475&amp;x-signature=uqGJ%2BZcyCPTbBE7Lued8K35ExTw%3D" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾_17708910896928.png" loading="lazy"/></p>
<h3 data-id="heading-11">2.2 MCUæ‰“åŒ…åè®®æ•°æ®æ ¼å¼å…³é”®è§£æç‚¹</h3>
<p>(1)æ•´ä½“æ•°æ®æ ¼å¼</p>



















<table><thead><tr><th>å¸§å¤´ï¼ˆ2Byteï¼‰</th><th>Payloadæ•°æ®é•¿åº¦ï¼ˆ2Byteï¼‰</th><th>Counterï¼ˆ1Byteï¼‰</th><th>CRCï¼ˆ1Byteï¼‰</th><th>Payloadï¼ˆå¯å˜é•¿åº¦ï¼‰</th></tr></thead><tbody><tr><td>0x514D</td><td>Â </td><td>Â </td><td>Â </td><td>åŒ…å« N å¸§å­æ•°æ®</td></tr></tbody></table>
<p>ï¼ˆ2ï¼‰Payload ä¸­çš„å•å¸§å­æ•°æ®æ ¼å¼ï¼ˆç¡®è®¤.=ã€‹æŠ¥æ–‡ç±»å‹&amp;å¸§IDä½œä¸ºæ•´ä½“å¤„ç†ï¼‰</p>

















<table><thead><tr><th>èµ·å§‹æ ‡è¯†ï¼ˆ1Byteï¼‰</th><th>æŠ¥æ–‡ç±»å‹ + å¸§ IDï¼ˆ2Byteï¼‰</th><th>Updatebit + å¸§é•¿åº¦ï¼ˆ1Byteï¼‰</th><th>å¸§æ•°æ®ï¼ˆ8-64Byteï¼‰</th></tr></thead><tbody><tr><td>0x55ï¼ˆæœ‰æ•ˆå¸§ï¼‰</td><td>é«˜ 4 ä½ = æŠ¥æ–‡ç±»å‹ï¼ˆå¦‚ 0x00=ZCU_CANFD1ï¼‰ä½ 12 ä½ = CanId</td><td>æœ€é«˜ä½ = Updatebitä½ 7 ä½ = å¸§æ•°æ®é•¿åº¦</td><td/></tr></tbody></table>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">PositionSignalProcessor::clearBitsDBCBigEndian</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* data, <span class="hljs-type">int</span> data_len, <span class="hljs-type">uint32_t</span> start, <span class="hljs-type">uint32_t</span> length)</span> </span>{
    <span class="hljs-keyword">if</span> (data == <span class="hljs-literal">nullptr</span> || data_len &lt;= <span class="hljs-number">0</span> || length == <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsDBCBigEndian: (data=%p, data_len=%d, start=%d, length=%d)\n"</span>,
                   data, data_len, start, length);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
   <span class="hljs-comment">// DBCå¤§ç«¯å­—èŠ‚åºï¼šæŒ‰å­—èŠ‚é¡ºåºï¼Œéè¿ç»­ä½</span>
    <span class="hljs-type">int</span> startByte = start / <span class="hljs-number">8</span>;
    <span class="hljs-type">int</span> bitsInStartByte = start % <span class="hljs-number">8</span> + <span class="hljs-number">1</span>;
    <span class="hljs-type">int</span> bitsLeft = length - bitsInStartByte;
    
    <span class="hljs-comment">// è¾¹ç•Œæ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (startByte &gt;= data_len) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"frame boundary: startByte=%d &gt;= data_len=%d\n"</span>, startByte, data_len);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-comment">// ä¿å­˜åŸå§‹æ•°æ®ç”¨äºè°ƒè¯•</span>
    std::vector&lt;<span class="hljs-type">uint8_t</span>&gt; originalData;
    <span class="hljs-keyword">if</span> (m_debug) {
        originalData.<span class="hljs-built_in">assign</span>(data, data + data_len);
    }
    <span class="hljs-comment">// å¦‚æœæœ‰å¤šäºä¸€ä¸ªå­—èŠ‚çš„ä½éœ€è¦å¤„ç†</span>
    <span class="hljs-keyword">if</span> (bitsLeft &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// æ¸…é™¤ç¬¬ä¸€ä¸ªå­—èŠ‚çš„é«˜ä½</span>
        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> mask = <span class="hljs-number">0xFF</span> &lt;&lt; bitsInStartByte;
        data[startByte] &amp;= mask;

        <span class="hljs-comment">// æ¸…é™¤æ‰€æœ‰ä¸­é—´å­—èŠ‚</span>
        <span class="hljs-type">int</span> middleByte = startByte + (bitsLeft) / <span class="hljs-number">8</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = startByte + <span class="hljs-number">1</span>; i &lt;= middleByte; ++i) {
            data[i] = <span class="hljs-number">0</span>;
        }

        <span class="hljs-comment">// å¤„ç†æœ€åä¸€ä¸ªå­—èŠ‚çš„ä½ä½</span>
        <span class="hljs-type">int</span> lastByteBitsLeft = bitsLeft % <span class="hljs-number">8</span>;
        <span class="hljs-keyword">if</span> (lastByteBitsLeft &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">/*
             -1ï¼šå°† 1 &lt;&lt; n ç”Ÿæˆçš„ã€Œ1 åè·Ÿ n ä¸ª 0ã€çš„æ•°ï¼Œè½¬ä¸ºã€Œn ä¸ª 1ã€çš„äºŒè¿›åˆ¶æ•°
             å¯ä»¥æƒ³è±¡æˆã€Œæœ€å³ä¾§ N ä¸ªæ ¼å­ä¸º 1ï¼Œå…¶ä½™ä¸º 0ã€çš„é®æŒ¡æ¿
             æ©ç ä¸º 1 çš„æ ¼å­ä¿ç•™åŸå€¼ï¼Œæ©ç ä¸º 0 çš„æ ¼å­æ¸…é›¶
            */</span> 
            mask = (<span class="hljs-number">1</span> &lt;&lt; (<span class="hljs-number">8</span> - lastByteBitsLeft)) - <span class="hljs-number">1</span>;
            data[middleByte + <span class="hljs-number">1</span>] &amp;= mask;
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å•å­—èŠ‚æƒ…å†µ</span>
        <span class="hljs-type">int</span> startBit = bitsInStartByte - length;
        <span class="hljs-comment">/*
            æ³¨æ„:å•å­—èŠ‚å’Œä¸Šé¢çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„å¤„ç†ä¸ä¸€æ ·
            ä¸Šé¢çš„å¤„ç†åªé€‚ç”¨äºï¼šä¸ç®¡æ¸…é›¶ä½åœ¨å“ªä¸ªä½ç½®ï¼Œéƒ½åªæŠŠã€Œæœ€å³ä¾§ N ä¸ªæ ¼å­ã€è®¾ä¸º 1
            è€Œä¸€æ—¦æ¸…é›¶ä½æ˜¯å­—èŠ‚ä¸­é—´ä½ï¼Œå°±ä¸é€‚ç”¨ã€‚ç”¨ä¸‹é¢æ•°æ®å¯éªŒè¯:
            9A 03 BB 64 1A 0A 67 28
            2.start = 36,len = 3 =&gt; ç»“æœæ˜¯ 9A 03 BB 64 02 0A 67 28
        */</span>
        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> mask = ((<span class="hljs-number">1</span> &lt;&lt; length) - <span class="hljs-number">1</span>) &lt;&lt; startBit;
        data[startByte] &amp;= ~mask;
    }
    
    <span class="hljs-comment">// è°ƒè¯•è¾“å‡º</span>
    <span class="hljs-keyword">if</span> (m_debug) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsDBCBigEndian: å¤„ç†å‰æ•°æ® (start=%d, length=%d): \n"</span>, start, length);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; data_len; ++i) {
            <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"%02X "</span>, originalData[i]);
        }
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"\n"</span>);

        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsDBCBigEndian: å¤„ç†åæ•°æ®: \n"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; data_len; ++i) {
            <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"%02X "</span>, data[i]);
        }
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"\n"</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">PositionSignalProcessor::clearBitsIntelLittleEndian</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* data, <span class="hljs-type">int</span> data_len, <span class="hljs-type">uint32_t</span> start, <span class="hljs-type">uint32_t</span> length)</span> </span>{
     <span class="hljs-keyword">if</span> (data == <span class="hljs-literal">nullptr</span> || data_len &lt;= <span class="hljs-number">0</span> || length == <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: (data=%p, data_len=%d, start=%u, length=%u)\n"</span>,
                   data, data_len, start, length);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-comment">// å°ç«¯è¾¹ç•Œæ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (start - length + <span class="hljs-number">1</span> &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: frame boundary: start=%u, length=%u, start-length+1 &lt; 0\n"</span>, start, length);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-type">int</span> downByte = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint32_t</span>&gt;(data_len) - <span class="hljs-number">1</span> - start / <span class="hljs-number">8</span>;
    <span class="hljs-keyword">if</span> (downByte &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: frame boundary: downByte=%d &gt;= data_len=%d\n"</span>, downByte, data_len);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-type">int</span> bitsInDownByte = <span class="hljs-number">8</span> - start % <span class="hljs-number">8</span>;
    <span class="hljs-type">int</span> bitsLeft = length - bitsInDownByte;

    <span class="hljs-keyword">if</span> (bitsLeft &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: Multi byte case, start=%d, bitsInDownByte=%d, length=%d,bitsLeft=%d\n"</span>, start, bitsInDownByte, length,bitsLeft);
        <span class="hljs-comment">// æ¸…é™¤ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ä½ä½</span>
        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> mask = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint8_t</span>&gt;(<span class="hljs-number">0xFF</span> &gt;&gt; bitsInDownByte);
        data[downByte] &amp;= mask;

        <span class="hljs-comment">// æ¸…é™¤ä¸­é—´å­—èŠ‚</span>
        <span class="hljs-type">int</span> middleByte = downByte - (bitsLeft) / <span class="hljs-number">8</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = downByte - <span class="hljs-number">1</span>; i &gt;= middleByte; --i) {
            data[i] = <span class="hljs-number">0</span>;
        }

        <span class="hljs-comment">// å¤„ç†æœ€åä¸€ä¸ªå­—èŠ‚çš„é«˜ä½</span>
        <span class="hljs-type">int</span> lastByteBitsLeft = bitsLeft % <span class="hljs-number">8</span>;
        <span class="hljs-keyword">if</span> (lastByteBitsLeft &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">int</span> lastByteIdx = middleByte - <span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span> (lastByteIdx &gt;= <span class="hljs-number">0</span>) {
                mask = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint8_t</span>&gt;(<span class="hljs-number">0xFF</span> &lt;&lt; lastByteBitsLeft);
                data[lastByteIdx] &amp;= mask;
            }<span class="hljs-keyword">else</span>{
                <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: frame boundary lastByteIdx=%d out of bounds\n"</span>, lastByteIdx);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å•å­—èŠ‚æƒ…å†µ</span>
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: Single byte case, start=%d, bitsInDownByte=%d, length=%d,bitsLeft=%d\n"</span>, start, bitsInDownByte, length,bitsLeft);
        <span class="hljs-type">int</span> leftBit = <span class="hljs-number">9</span> - start % <span class="hljs-number">8</span> - length;
        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> mask = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint8_t</span>&gt;(((<span class="hljs-number">1</span> &lt;&lt; length) - <span class="hljs-number">1</span>) &lt;&lt; leftBit);
        data[downByte] &amp;= ~mask;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}



</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥è§£æ React å›åˆ°é¡¶éƒ¨ï¼ˆBackToTopï¼‰ç»„ä»¶çš„å®ç°ä¸è®¾è®¡]]></title>    <link>https://juejin.cn/post/7605811866908459017</link>    <guid>https://juejin.cn/post/7605811866908459017</guid>    <pubDate>2026-02-13T02:37:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866908459017" data-draft-id="7605782093482835994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥è§£æ React å›åˆ°é¡¶éƒ¨ï¼ˆBackToTopï¼‰ç»„ä»¶çš„å®ç°ä¸è®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,TypeScript"/> <meta itemprop="datePublished" content="2026-02-13T02:37:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†»æ¢¨æ”¿å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥è§£æ React å›åˆ°é¡¶éƒ¨ï¼ˆBackToTopï¼‰ç»„ä»¶çš„å®ç°ä¸è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†»æ¢¨æ”¿å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:37:04.000Z" title="Fri Feb 13 2026 02:37:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥è§£æ React å›åˆ°é¡¶éƒ¨ï¼ˆBackToTopï¼‰ç»„ä»¶çš„å®ç°ä¸è®¾è®¡</h2>
<p>åœ¨ç°ä»£ç½‘é¡µå¼€å‘ä¸­ï¼Œé•¿é¡µé¢çš„åœºæ™¯ååˆ†å¸¸è§ï¼Œä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œâ€œå›åˆ°é¡¶éƒ¨â€ åŠŸèƒ½å‡ ä¹æˆä¸ºæ ‡é…ã€‚æœ¬æ–‡å°†åŸºäºä¸€æ®µ React å®ç°çš„ BackToTop ç»„ä»¶ä»£ç ï¼Œä»ç»“æ„ã€æ ¸å¿ƒé€»è¾‘ã€æ€§èƒ½ä¼˜åŒ–ç­‰ç»´åº¦ï¼Œå…¨é¢è§£æè¯¥ç»„ä»¶çš„è®¾è®¡ä¸å®ç°ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ç»„ä»¶æ•´ä½“ç»“æ„æ¦‚è§ˆ</h3>
<p>é¦–å…ˆæ¥çœ‹ BackToTop ç»„ä»¶çš„å®Œæ•´ä»£ç ç»“æ„ï¼Œè¯¥ç»„ä»¶åŸºäº React å‡½æ•°å¼ç»„ä»¶å®ç°ï¼Œæ ¸å¿ƒä¾èµ– React çš„ Hooksã€UI ç»„ä»¶åº“ã€å›¾æ ‡åº“ä»¥åŠè‡ªå®šä¹‰çš„èŠ‚æµå·¥å…·å‡½æ•°ï¼Œæ•´ä½“ç»“æ„æ¸…æ™°ä¸”æ¨¡å—åŒ–ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/ui/button'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ArrowUp</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"lucide-react"</span>;
<span class="hljs-keyword">import</span> { throttle } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/utils"</span>;

<span class="hljs-comment">// å®šä¹‰ç»„ä»¶Propsç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">BackToTopProps</span> {
    <span class="hljs-comment">// æ»šåŠ¨è¶…è¿‡å¤šå°‘åƒç´ åæ˜¾ç¤ºæŒ‰é’®</span>
    threshold?: <span class="hljs-built_in">number</span>
}

<span class="hljs-comment">// å‡½æ•°å¼ç»„ä»¶ï¼Œè®¾ç½®thresholdé»˜è®¤å€¼ä¸º400</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BackToTop</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">BackToTopProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
    threshold = <span class="hljs-number">400</span>
}</span>) =&gt;</span> {
    <span class="hljs-comment">// çŠ¶æ€ç®¡ç†ï¼šæ§åˆ¶æŒ‰é’®æ˜¯å¦å¯è§</span>
    <span class="hljs-keyword">const</span> [isVisible, setIsVisible] = useState&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">false</span>);
    
    <span class="hljs-comment">// å›åˆ°é¡¶éƒ¨æ ¸å¿ƒé€»è¾‘</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollTop</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
            <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">behavior</span>:<span class="hljs-string">'smooth'</span>
        })
    }
    
    <span class="hljs-comment">// ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ§åˆ¶æŒ‰é’®æ˜¾ç¤º/éšè—</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleVisibility</span> = (<span class="hljs-params"/>) =&gt; {
            <span class="hljs-title function_">setIsVisible</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> &gt; threshold);
        }
        <span class="hljs-comment">// èŠ‚æµå¤„ç†æ»šåŠ¨ç›‘å¬å‡½æ•°</span>
        <span class="hljs-keyword">const</span> thtottled_func = <span class="hljs-title function_">throttle</span>(toggleVisibility,<span class="hljs-number">200</span>);
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, thtottled_func);
        <span class="hljs-comment">// æ¸…ç†å‰¯ä½œç”¨ï¼šç§»é™¤æ»šåŠ¨ç›‘å¬</span>
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, thtottled_func);
    },[threshold])
    
    <span class="hljs-comment">// æ¡ä»¶æ¸²æŸ“ï¼šæœªè¾¾åˆ°é˜ˆå€¼æ—¶ä¸æ¸²æŸ“ç»„ä»¶</span>
    <span class="hljs-keyword">if</span>(!isVisible) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-comment">// ç»„ä»¶UIæ¸²æŸ“</span>
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"outline"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{scrollTop}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-50"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ArrowUp</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-4 w-4"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
    )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">BackToTop</span>
</code></pre>
<p>ç»„ä»¶æ•´ä½“å¯åˆ†ä¸º 5 ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<ol>
<li>ä¾èµ–å¯¼å…¥ä¸ç±»å‹å®šä¹‰ï¼›</li>
<li>çŠ¶æ€ç®¡ç†ï¼ˆæ§åˆ¶æŒ‰é’®å¯è§æ€§ï¼‰ï¼›</li>
<li>å›åˆ°é¡¶éƒ¨æ ¸å¿ƒé€»è¾‘ï¼›</li>
<li>æ»šåŠ¨äº‹ä»¶ç›‘å¬ä¸æ€§èƒ½ä¼˜åŒ–ï¼›</li>
<li>æ¡ä»¶æ¸²æŸ“ä¸ UI å±•ç¤ºã€‚</li>
</ol>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒåŠŸèƒ½é€è¡Œè§£æ</h3>
<h4 data-id="heading-3">1. ç±»å‹å®šä¹‰ä¸ Props è®¾è®¡</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">BackToTopProps</span> {
    threshold?: <span class="hljs-built_in">number</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">BackToTop</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">BackToTopProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
    threshold = <span class="hljs-number">400</span>
}</span>) =&gt;</span> { ... }
</code></pre>
<ul>
<li>å®šä¹‰<code>BackToTopProps</code>æ¥å£ï¼Œä»…æš´éœ²<code>threshold</code>å¯é€‰å±æ€§ï¼Œç”¨äºé…ç½® â€œæ»šåŠ¨è¶…è¿‡å¤šå°‘åƒç´ åæ˜¾ç¤ºæŒ‰é’®â€ï¼Œç¬¦åˆ â€œæœ€å°å¯ç”¨ APIâ€ è®¾è®¡åŸåˆ™ï¼›</li>
<li>é€šè¿‡è§£æ„èµ‹å€¼ä¸º<code>threshold</code>è®¾ç½®é»˜è®¤å€¼ 400ï¼Œç¡®ä¿ç»„ä»¶åœ¨æœªä¼ å…¥å‚æ•°æ—¶ä»èƒ½æ­£å¸¸å·¥ä½œã€‚</li>
</ul>
<h4 data-id="heading-4">2. çŠ¶æ€ç®¡ç†ï¼šæ§åˆ¶æŒ‰é’®å¯è§æ€§</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> [isVisible, setIsVisible] = <span class="hljs-built_in">useState</span>&lt;<span class="hljs-type">boolean</span>&gt;(<span class="hljs-literal">false</span>);
</code></pre>
<p>ä½¿ç”¨<code>useState</code> Hook åˆ›å»ºå¸ƒå°”ç±»å‹çŠ¶æ€<code>isVisible</code>ï¼Œåˆå§‹å€¼ä¸º<code>false</code>ï¼ˆé¡µé¢åŠ è½½æ—¶æŒ‰é’®é»˜è®¤éšè—ï¼‰ï¼Œè¯¥çŠ¶æ€ç”¨äºæ§åˆ¶ç»„ä»¶çš„æ¡ä»¶æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-5">3. å›åˆ°é¡¶éƒ¨é€»è¾‘ï¼šå¹³æ»‘æ»šåŠ¨å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollTop</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
        <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">behavior</span>:<span class="hljs-string">'smooth'</span>
    })
}
</code></pre>
<ul>
<li>è°ƒç”¨<code>window.scrollTo</code>æ–¹æ³•å®ç°æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨ï¼›</li>
<li>é€šè¿‡é…ç½®<code>behavior: 'smooth'</code>å®ç°å¹³æ»‘æ»šåŠ¨ï¼Œæ›¿ä»£ä¼ ç»Ÿçš„ç¬é—´è·³è½¬ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›</li>
<li>è¯¥å‡½æ•°ä½œä¸ºæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å›è°ƒï¼Œè§¦å‘å›åˆ°é¡¶éƒ¨æ“ä½œã€‚</li>
</ul>
<h4 data-id="heading-6">4. æ»šåŠ¨ç›‘å¬ä¸æ€§èƒ½ä¼˜åŒ–ï¼ˆæ ¸å¿ƒï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleVisibility</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-title function_">setIsVisible</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> &gt; threshold);
    }
    <span class="hljs-keyword">const</span> thtottled_func = <span class="hljs-title function_">throttle</span>(toggleVisibility,<span class="hljs-number">200</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, thtottled_func);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, thtottled_func);
},[threshold])
</code></pre>
<p>è¿™æ˜¯ç»„ä»¶çš„æ ¸å¿ƒé€»è¾‘ï¼Œéœ€é‡ç‚¹è§£æï¼š</p>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰æ»šåŠ¨ç›‘å¬å‡½æ•°<code>toggleVisibility</code></h5>
<p><code>toggleVisibility</code>çš„ä½œç”¨æ˜¯åˆ¤æ–­é¡µé¢æ»šåŠ¨è·ç¦»ï¼ˆ<code>window.scrollY</code>ï¼‰æ˜¯å¦è¶…è¿‡é˜ˆå€¼ï¼ˆ<code>threshold</code>ï¼‰ï¼Œå¹¶é€šè¿‡<code>setIsVisible</code>æ›´æ–°æŒ‰é’®å¯è§çŠ¶æ€ã€‚</p>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰èŠ‚æµå¤„ç†çš„å¿…è¦æ€§</h5>
<p><code>scroll</code>äº‹ä»¶æ˜¯é«˜é¢‘è§¦å‘äº‹ä»¶ï¼ˆé¡µé¢æ»šåŠ¨æ—¶ä¼šè¿ç»­è§¦å‘ï¼‰ï¼Œè‹¥ç›´æ¥å°†<code>toggleVisibility</code>ç»‘å®šåˆ°<code>scroll</code>äº‹ä»¶ï¼Œä¼šå¯¼è‡´è¯¥å‡½æ•°è¢«é¢‘ç¹è°ƒç”¨ï¼Œå¼•å‘ä¸å¿…è¦çš„çŠ¶æ€æ›´æ–°å’Œé‡æ¸²æŸ“ï¼Œå½±å“é¡µé¢æ€§èƒ½ã€‚</p>
<p>å› æ­¤ï¼Œç»„ä»¶é€šè¿‡<code>throttle</code>å·¥å…·å‡½æ•°å¯¹<code>toggleVisibility</code>è¿›è¡ŒèŠ‚æµå¤„ç†ï¼Œè®¾ç½® 200ms çš„èŠ‚æµé—´éš” â€”â€” å³æ»šåŠ¨äº‹ä»¶è§¦å‘æ—¶ï¼Œ<code>toggleVisibility</code>æœ€å¤šæ¯ 200ms æ‰§è¡Œä¸€æ¬¡ï¼Œæœ‰æ•ˆå‡å°‘å‡½æ•°æ‰§è¡Œæ¬¡æ•°ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚</p>
<h5 data-id="heading-9">ï¼ˆ3ï¼‰å‰¯ä½œç”¨çš„æŒ‚è½½ä¸æ¸…ç†</h5>
<ul>
<li><code>useEffect</code>åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œï¼Œä¸º<code>window</code>æ·»åŠ <code>scroll</code>äº‹ä»¶ç›‘å¬ï¼Œç»‘å®šèŠ‚æµåçš„å‡½æ•°ï¼›</li>
<li><code>useEffect</code>çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œï¼Œç§»é™¤<code>scroll</code>äº‹ä»¶ç›‘å¬ â€”â€” é¿å…å†…å­˜æ³„æ¼ï¼Œæ˜¯ React å‡½æ•°å¼ç»„ä»¶å¤„ç†äº‹ä»¶ç›‘å¬çš„æ ‡å‡†å†™æ³•ï¼›</li>
<li><code>useEffect</code>çš„ä¾èµ–æ•°ç»„åŒ…å«<code>threshold</code>ï¼Œç¡®ä¿å½“é˜ˆå€¼å˜åŒ–æ—¶ï¼Œé‡æ–°ç»‘å®šç›‘å¬å‡½æ•°ã€‚</li>
</ul>
<h4 data-id="heading-10">5. æ¡ä»¶æ¸²æŸ“ä¸ UI å±•ç¤º</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span>(!isVisible) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

<span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"outline"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{scrollTop}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-50"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ArrowUp</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-4 w-4"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
)
</code></pre>
<ul>
<li>
<p>æ¡ä»¶æ¸²æŸ“ï¼šå½“<code>isVisible</code>ä¸º<code>false</code>æ—¶ï¼Œç»„ä»¶è¿”å›<code>null</code>ï¼Œä¸æ¸²æŸ“ä»»ä½•å†…å®¹ï¼›ä»…å½“æ»šåŠ¨è·ç¦»è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œæ‰æ¸²æŸ“å›åˆ°é¡¶éƒ¨æŒ‰é’®ï¼›</p>
</li>
<li>
<p>UI è®¾è®¡ç»†èŠ‚ï¼š</p>
<ul>
<li>ä½¿ç”¨ UI ç»„ä»¶åº“çš„<code>Button</code>ç»„ä»¶ï¼Œè®¾ç½®<code>variant="outline"</code>ï¼ˆè½®å»“æ ·å¼ï¼‰ã€<code>size="icon"</code>ï¼ˆå›¾æ ‡å°ºå¯¸ï¼‰ï¼›</li>
<li>é€šè¿‡<code>className</code>è®¾ç½®å›ºå®šå®šä½ï¼ˆ<code>fixed</code>ï¼‰ã€ä½ç½®ï¼ˆ<code>bottom-6 right-6</code>ï¼Œå³ä¸‹è§’ï¼‰ã€åœ†è§’ï¼ˆ<code>rounded-full</code>ï¼‰ã€é˜´å½±ï¼ˆ<code>shadow-lg/xl</code>ï¼‰ã€å±‚çº§ï¼ˆ<code>z-50</code>ï¼‰ï¼Œç¡®ä¿æŒ‰é’®æ‚¬æµ®åœ¨é¡µé¢æœ€ä¸Šå±‚ä¸”æ ·å¼ç¾è§‚ï¼›</li>
<li>åµŒå…¥<code>lucide-react</code>çš„<code>ArrowUp</code>å›¾æ ‡ä½œä¸ºæŒ‰é’®å†…å®¹ï¼Œç›´è§‚ä¼ è¾¾ â€œå›åˆ°é¡¶éƒ¨â€ çš„åŠŸèƒ½ï¼›</li>
<li>æŒ‰é’®ç»‘å®š<code>onClick</code>äº‹ä»¶ï¼Œè§¦å‘<code>scrollTop</code>å‡½æ•°ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-11">ä¸‰ã€èŠ‚æµå·¥å…·å‡½æ•°ï¼ˆthrottleï¼‰è§£æ</h3>
<p>ç»„ä»¶ä¾èµ–çš„<code>throttle</code>å‡½æ•°ä½äº<code>index.ts</code>ä¸­ï¼Œå…¶å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ThrottleFunction</span> = <span class="hljs-function">(<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">fun: ThrottleFunction, delay: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">ThrottleFunction</span> {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">last</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">deferTimer</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">undefined</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) {
    <span class="hljs-keyword">const</span> now = +<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();

    <span class="hljs-keyword">if</span> (last &amp;&amp; now &lt; last + delay) {
      <span class="hljs-built_in">clearTimeout</span>(deferTimer);
      deferTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        last = now;
        <span class="hljs-title function_">fun</span>(args);
      }, delay);
    } <span class="hljs-keyword">else</span> {
      last = now;
      <span class="hljs-title function_">fun</span>(args);
    }
  };
}
</code></pre>
<h4 data-id="heading-12">èŠ‚æµå‡½æ•°çš„æ ¸å¿ƒåŸç†</h4>
<p>èŠ‚æµï¼ˆThrottleï¼‰çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>åœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…ï¼Œåªå…è®¸å‡½æ•°æ‰§è¡Œä¸€æ¬¡</strong>ï¼Œå³ä½¿è§¦å‘å¤šæ¬¡ï¼Œä¹Ÿä»…ç”Ÿæ•ˆä¸€æ¬¡ã€‚è¯¥å®ç°çš„å…³é”®é€»è¾‘ï¼š</p>
<ol>
<li>
<p>å®šä¹‰<code>last</code>ï¼ˆä¸Šä¸€æ¬¡å‡½æ•°æ‰§è¡Œçš„æ—¶é—´æˆ³ï¼‰å’Œ<code>deferTimer</code>ï¼ˆå»¶è¿Ÿå®šæ—¶å™¨ï¼‰ä¸¤ä¸ªé—­åŒ…å˜é‡ï¼Œç”¨äºè®°å½•æ‰§è¡ŒçŠ¶æ€ï¼›</p>
</li>
<li>
<p>æ¯æ¬¡è§¦å‘å‡½æ•°æ—¶ï¼Œè·å–å½“å‰æ—¶é—´æˆ³<code>now</code>ï¼›</p>
</li>
<li>
<p>è‹¥è·ç¦»ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶é—´ä¸è¶³<code>delay</code>ï¼š</p>
<ul>
<li>æ¸…é™¤åŸæœ‰å®šæ—¶å™¨ï¼Œé¿å…é‡å¤æ‰§è¡Œï¼›</li>
<li>é‡æ–°è®¾ç½®å®šæ—¶å™¨ï¼Œå»¶è¿Ÿ<code>delay</code>åæ‰§è¡Œå‡½æ•°ï¼Œå¹¶æ›´æ–°<code>last</code>ï¼›</li>
</ul>
</li>
<li>
<p>è‹¥è·ç¦»ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶é—´è¶…è¿‡<code>delay</code>ï¼šç›´æ¥æ‰§è¡Œå‡½æ•°ï¼Œå¹¶æ›´æ–°<code>last</code>ã€‚</p>
</li>
</ol>
<h4 data-id="heading-13">æ³¨æ„ç‚¹</h4>
<p>è¯¥å®ç°ä¸­<code>fun(args)</code>çš„ä¼ å‚æ–¹å¼éœ€æ³¨æ„ â€”â€” åŸå‡½æ•°çš„å‚æ•°é€šè¿‡æ•°ç»„å½¢å¼ä¼ é€’ï¼Œè‹¥åŸå‡½æ•°ä¾èµ–å‚æ•°è§£æ„ï¼Œéœ€ç¡®ä¿ä¼ å‚é€»è¾‘åŒ¹é…ï¼ˆæœ¬æ–‡ä¸­<code>toggleVisibility</code>æ— å‚æ•°ï¼Œå› æ­¤æ— å½±å“ï¼‰ã€‚</p>
<h3 data-id="heading-14">å››ã€ç»„ä»¶çš„ä½¿ç”¨ä¸æ‰©å±•</h3>
<h4 data-id="heading-15">1. åŸºç¡€ä½¿ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">BackToTop</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/BackToTop'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å…¶ä»–é¡µé¢å†…å®¹ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">BackToTop</span> <span class="hljs-attr">threshold</span>=<span class="hljs-string">{500}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>ä»…éœ€å¼•å…¥ç»„ä»¶ï¼Œå¯é€šè¿‡<code>threshold</code>è‡ªå®šä¹‰æ˜¾ç¤ºé˜ˆå€¼ï¼Œå¼€ç®±å³ç”¨ã€‚</p>
<h4 data-id="heading-16">2. æ‰©å±•æ–¹å‘</h4>
<ul>
<li><strong>è‡ªå®šä¹‰æ ·å¼</strong>ï¼šé€šè¿‡<code>className</code>è¦†ç›–é»˜è®¤æ ·å¼ï¼Œæˆ–æ–°å¢<code>className</code> Props æ”¯æŒè‡ªå®šä¹‰æ ·å¼ï¼›</li>
<li><strong>è‡ªå®šä¹‰å›¾æ ‡</strong>ï¼šå°†å›¾æ ‡ä½œä¸º Props ä¼ å…¥ï¼Œæ”¯æŒæ›¿æ¢ä¸ºè‡ªå®šä¹‰å›¾æ ‡ï¼›</li>
<li><strong>æ»šåŠ¨ç›®æ ‡</strong>ï¼šæ‰©å±• Props æ”¯æŒæ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ ï¼ˆè€Œéä»…é¡¶éƒ¨ï¼‰ï¼›</li>
<li><strong>åŠ¨ç”»æ•ˆæœ</strong>ï¼šæ·»åŠ æŒ‰é’®æ˜¾ç¤º / éšè—çš„è¿‡æ¸¡åŠ¨ç”»ï¼ˆå¦‚ React Transition Groupï¼‰ï¼›</li>
<li><strong>ç§»åŠ¨ç«¯é€‚é…</strong>ï¼šé’ˆå¯¹ç§»åŠ¨ç«¯è°ƒæ•´æŒ‰é’®å°ºå¯¸å’Œä½ç½®ï¼›</li>
<li><strong>æ— éšœç¢è®¿é—®ï¼ˆa11yï¼‰</strong> ï¼šæ·»åŠ <code>aria-label</code>ç­‰å±æ€§ï¼Œæå‡æ— éšœç¢ä½“éªŒã€‚</li>
</ul>
<h3 data-id="heading-17">äº”ã€æ€»ç»“</h3>
<p>æœ¬æ–‡è§£æçš„ BackToTop ç»„ä»¶æ˜¯ä¸€ä¸ªå…¸å‹çš„ â€œå°è€Œç¾â€ çš„ React ç»„ä»¶ï¼Œå…¶è®¾è®¡å…·å¤‡ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<ol>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé€šè¿‡ TypeScript å®šä¹‰ Props æ¥å£ï¼Œç¡®ä¿ç±»å‹æ ¡éªŒï¼›</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä½¿ç”¨èŠ‚æµå¤„ç†é«˜é¢‘æ»šåŠ¨äº‹ä»¶ï¼Œé¿å…æ€§èƒ½æŸè€—ï¼›</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šå¹³æ»‘æ»šåŠ¨ã€æ¡ä»¶æ¸²æŸ“ã€ç¾è§‚çš„ UI è®¾è®¡ï¼›</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šæ¨¡å—åŒ–ç»“æ„ã€æ¸…æ™°çš„é€»è¾‘æ‹†åˆ†ã€å®Œå–„çš„å‰¯ä½œç”¨æ¸…ç†ï¼›</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šé€šè¿‡ Props æš´éœ²æ ¸å¿ƒé…ç½®ï¼Œä¾¿äºæ‰©å±•ã€‚</li>
</ol>
<p>è¯¥ç»„ä»¶çš„å®ç°æ€è·¯ä¸ä»…é€‚ç”¨äº â€œå›åˆ°é¡¶éƒ¨â€ åŠŸèƒ½ï¼Œä¹Ÿå¯è¿ç§»åˆ°å…¶ä»–éœ€è¦ç›‘å¬æ»šåŠ¨äº‹ä»¶çš„åœºæ™¯ï¼ˆå¦‚å¯¼èˆªæ å¸é¡¶ã€æ‡’åŠ è½½ç­‰ï¼‰ï¼Œæ˜¯ React å‡½æ•°å¼ç»„ä»¶å¼€å‘çš„å…¸å‹å®è·µæ¡ˆä¾‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[gsap é…ç½®è§£è¯» --1]]></title>    <link>https://juejin.cn/post/7605985547568758790</link>    <guid>https://juejin.cn/post/7605985547568758790</guid>    <pubDate>2026-02-13T02:56:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605985547568758790" data-draft-id="7605792874173268031" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="gsap  é…ç½®è§£è¯» --1"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-13T02:56:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ—¶å…‰"/> <meta itemprop="url" content="https://juejin.cn/user/2529296311138013"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            gsap  é…ç½®è§£è¯» --1
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2529296311138013/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ—¶å…‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:56:59.000Z" title="Fri Feb 13 2026 02:56:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">toggleActions: "play none none reverse"  æ˜¯ä»€ä¹ˆæ„æ€</h2>
<pre><code class="hljs language-js" lang="js">gsap.<span class="hljs-title function_">to</span>(panel, {
<span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,
<span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>,
<span class="hljs-attr">duration</span>: <span class="hljs-number">0.8</span>,
<span class="hljs-attr">ease</span>: <span class="hljs-string">"power2.out"</span>, 
<span class="hljs-attr">scrollTrigger</span>: {
<span class="hljs-attr">trigger</span>: panel, 
<span class="hljs-attr">start</span>: <span class="hljs-string">"top 80%"</span>, <span class="hljs-comment">// å½“ panel çš„é¡¶éƒ¨åˆ°è¾¾ viewport çš„ 80% ä½ç½®æ—¶ï¼Œè¿›å…¥è§¦å‘åŒº</span>
<span class="hljs-attr">end</span>: <span class="hljs-string">"top 40%"</span>, <span class="hljs-comment">// å½“ panel çš„é¡¶éƒ¨åˆ°è¾¾ viewport çš„ 40% ä½ç½®æ—¶ï¼Œç¦»å¼€è§¦å‘åŒº </span>
<span class="hljs-attr">toggleActions</span>: <span class="hljs-string">"play none none reverse"</span>
} 
});
</code></pre>






























<table><thead><tr><th>ä½ç½®</th><th>è§¦å‘æ—¶æœº</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1. <code>onEnter</code></td><td>å…ƒç´ ä»ä¸Šå¾€ä¸‹æ»šåŠ¨è¿›å…¥è§¦å‘åŒºé—´ï¼ˆæ¯”å¦‚è¿›å…¥ <code>start</code> åˆ° <code>end</code> åŒºåŸŸï¼‰</td><td>æ­¤å¤„æ˜¯ <code>"play"</code> â†’ æ’­æ”¾åŠ¨ç”»</td></tr><tr><td>2. <code>onLeave</code></td><td>å…ƒç´ ç»§ç»­å‘ä¸‹æ»šåŠ¨ï¼Œç¦»å¼€è§¦å‘åŒºé—´ï¼ˆæ»šå‡º <code>end</code> ä¹‹åï¼‰</td><td>æ­¤å¤„æ˜¯ <code>"none"</code> â†’ ä»€ä¹ˆéƒ½ä¸åš</td></tr><tr><td>3. <code>onEnterBack</code></td><td>å…ƒç´ ä»ä¸‹å¾€ä¸Šæ»šåŠ¨ï¼Œé‡æ–°è¿›å…¥è§¦å‘åŒºé—´ï¼ˆåå‘æ»šåŠ¨è¿›å…¥ï¼‰</td><td>æ­¤å¤„æ˜¯ <code>"none"</code> â†’ ä»€ä¹ˆéƒ½ä¸åš</td></tr><tr><td>4. <code>onLeaveBack</code></td><td>å…ƒç´ ç»§ç»­å‘ä¸Šæ»šåŠ¨ï¼Œç¦»å¼€è§¦å‘åŒºé—´ï¼ˆåå‘æ»šå‡º <code>start</code> ä¹‹å‰ï¼‰</td><td>æ­¤å¤„æ˜¯ <code>"reverse"</code> â†’ åå‘æ’­æ”¾åŠ¨ç”»ï¼ˆå³å€’æ”¾ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-1"><code>toggleActions</code></h4>





































<table><thead><tr><th>åŠ¨ä½œå€¼</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><code>"play"</code></td><td>æ’­æ”¾åŠ¨ç”»ï¼ˆä»å½“å‰è¿›åº¦å¼€å§‹ï¼‰</td></tr><tr><td><code>"pause"</code></td><td>æš‚åœåŠ¨ç”»</td></tr><tr><td><code>"resume"</code></td><td>æ¢å¤æ’­æ”¾ï¼ˆå¦‚æœå·²æš‚åœï¼‰</td></tr><tr><td><code>"reverse"</code></td><td>åå‘æ’­æ”¾ï¼ˆå€’æ”¾ï¼‰</td></tr><tr><td><code>"restart"</code></td><td>ä»å¤´å¼€å§‹æ’­æ”¾</td></tr><tr><td><code>"reset"</code></td><td>é‡ç½®åˆ°åˆå§‹çŠ¶æ€</td></tr><tr><td><code>"none"</code></td><td>æ— æ“ä½œï¼ˆä¿æŒå½“å‰çŠ¶æ€ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-2">Â å…¸å‹ä½¿ç”¨åœºæ™¯å¯¹æ¯”ï¼š</h4>

























<table><thead><tr><th>éœ€æ±‚</th><th>æ¨è <code>toggleActions</code></th></tr></thead><tbody><tr><td>è¿›å…¥æ’­æ”¾ï¼Œç¦»å¼€é‡ç½®</td><td><code>"play none none reset"</code></td></tr><tr><td>è¿›å…¥æ’­æ”¾ï¼Œåå‘ç¦»å¼€æ—¶å€’æ”¾</td><td><code>"play none none reverse"</code> â† ä½ çš„æƒ…å†µ</td></tr><tr><td>åªæ’­æ”¾ä¸€æ¬¡ï¼Œä¹‹åä¸å†åŠ¨</td><td><code>"play pause pause pause"</code></td></tr><tr><td>æ¥å›éƒ½æ’­æ”¾</td><td><code>"play play play play"</code>ï¼ˆä¸æ¨èï¼Œä¼šé—ªçƒï¼‰</td></tr></tbody></table>
<h2 data-id="heading-3">paused: trueæ˜¯ä»€ä¹ˆæ„æ€</h2>
<pre><code class="hljs language-const" lang="const">{
x: 280, 
scale: 0.5,
opacity: 0,
duration: 1,
ease: "power2.out",
paused: true 
});

</code></pre>
<p>åœ¨ GSAPï¼ˆGreenSock Animation Platformï¼‰ä¸­ï¼Œ<code>paused: true</code>Â æ˜¯ä¸€ä¸ª<strong>åŠ¨ç”»é…ç½®é€‰é¡¹</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>åˆ›å»ºåŠ¨ç”»æ—¶ç«‹å³æš‚åœï¼ˆä¸è‡ªåŠ¨æ’­æ”¾ï¼‰ï¼Œç­‰å¾…åç»­æ‰‹åŠ¨æ§åˆ¶æ’­æ”¾ã€‚</strong></p>
</blockquote>
<ul>
<li><code>gsap.from(...)</code>Â è¡¨ç¤ºï¼š<strong>ä»æŒ‡å®šçš„èµ·å§‹çŠ¶æ€ï¼ˆx=280, scale=0.5, opacity=0ï¼‰åŠ¨ç”»åˆ°å…ƒç´ å½“å‰çš„ CSS çŠ¶æ€</strong>ã€‚</li>
<li>ä½†ç”±äºè®¾ç½®äº†Â <code>paused: true</code>ï¼Œè¿™ä¸ªåŠ¨ç”»<strong>ä¸ä¼šç«‹åˆ»æ‰§è¡Œ</strong>ï¼Œè€Œæ˜¯è¢«â€œå†»ç»“â€åœ¨åˆå§‹çŠ¶æ€ï¼ˆå³å…ƒç´ ä¿æŒåŸæ ·ï¼Œä¸ä¼šåŠ¨ï¼‰ã€‚</li>
<li>ä½ éœ€è¦<strong>æ‰‹åŠ¨è°ƒç”¨</strong>Â <code>tween.play()</code>Â æ‰ä¼šå¼€å§‹æ’­æ”¾åŠ¨ç”»ã€‚</li>
</ul>
<h4 data-id="heading-4">âœ… ä¸ºä»€ä¹ˆéœ€è¦Â <code>paused: true</code>ï¼Ÿ</h4>
<p>é€šå¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<h5 data-id="heading-5">1.Â <strong>å»¶è¿Ÿè§¦å‘åŠ¨ç”»</strong></h5>
<p>æ¯”å¦‚ç‚¹å‡»æŒ‰é’®ã€æ»šåŠ¨åˆ°æŸä½ç½®ã€æˆ–æ»¡è¶³æŸä¸ªæ¡ä»¶åå†æ’­æ”¾ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> { 
tween.<span class="hljs-title function_">play</span>(); <span class="hljs-comment">// ç‚¹å‡»æ—¶æ‰æ’­æ”¾</span>
});
</code></pre>
<h5 data-id="heading-6">2.Â <strong>é…åˆ ScrollTrigger æˆ–å…¶ä»–äº¤äº’é€»è¾‘</strong></h5>
<p>ä½ å¯èƒ½å…ˆå®šä¹‰å¥½åŠ¨ç”»ï¼Œç­‰ ScrollTrigger åˆå§‹åŒ–å®Œæˆåå†å…³è”ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">ScrollTrigger</span>.<span class="hljs-title function_">create</span>({
<span class="hljs-attr">trigger</span>: <span class="hljs-string">".section"</span>,
<span class="hljs-attr">start</span>: <span class="hljs-string">"top center"</span>,
<span class="hljs-attr">onEnter</span>: <span class="hljs-function">() =&gt;</span> tween.<span class="hljs-title function_">play</span>()
});
</code></pre>
<h5 data-id="heading-7">3.Â <strong>å¤ç”¨åŠ¨ç”»</strong></h5>
<p>åŒä¸€ä¸ªÂ <code>tween</code>Â å¯ä»¥å¤šæ¬¡Â <code>play()</code>ã€<code>reverse()</code>ã€<code>restart()</code>ï¼Œè€Œä¸ä¼šé‡å¤åˆ›å»ºã€‚</p>

































<table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>tween.play()</code></td><td>æ’­æ”¾åŠ¨ç”»</td></tr><tr><td><code>tween.pause()</code></td><td>æš‚åœåŠ¨ç”»</td></tr><tr><td><code>tween.reverse()</code></td><td>åå‘æ’­æ”¾ï¼ˆä»å½“å‰è¿›åº¦å€’æ”¾å›èµ·ç‚¹ï¼‰</td></tr><tr><td><code>tween.restart()</code></td><td>ä»å¤´å¼€å§‹æ’­æ”¾</td></tr><tr><td><code>tween.seek(0.5)</code></td><td>è·³è½¬åˆ°åŠ¨ç”» 50% è¿›åº¦</td></tr><tr><td><code>tween.progress(1)</code></td><td>ç¬é—´è·³åˆ°ç»“æŸçŠ¶æ€</td></tr></tbody></table>

















<table><thead><tr><th>é…ç½®</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>paused: true</code></td><td>åˆ›å»ºåŠ¨ç”»ä½†ä¸è‡ªåŠ¨æ’­æ”¾ï¼Œéœ€æ‰‹åŠ¨è°ƒç”¨ <code>.play()</code> ç­‰æ–¹æ³•æ§åˆ¶</td></tr><tr><td>é»˜è®¤ï¼ˆä¸å†™ï¼‰</td><td>åŠ¨ç”»åˆ›å»ºåç«‹å³è‡ªåŠ¨æ’­æ”¾</td></tr></tbody></table>
<h2 data-id="heading-8">gsap.set()  set æ˜¯ä»€ä¹ˆæ„æ€</h2>
<p>åœ¨ GSAPï¼ˆGreenSock Animation Platformï¼‰ä¸­ï¼Œ<code>gsap.set()</code>Â æ˜¯ä¸€ä¸ª<strong>ç«‹å³è®¾ç½®å…ƒç´ å±æ€§</strong>çš„æ–¹æ³•ï¼Œ<strong>ä¸ä¼šäº§ç”ŸåŠ¨ç”»è¿‡æ¸¡</strong>ï¼Œè€Œæ˜¯<strong>ç¬é—´åº”ç”¨æŒ‡å®šçš„æ ·å¼æˆ–å±æ€§å€¼</strong>ã€‚</p>






























<table><thead><tr><th>æ–¹æ³•</th><th>æ˜¯å¦åŠ¨ç”»</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>gsap.set(target, vars)</code></td><td>âŒ å¦</td><td>ç«‹å³è®¾ç½®å±æ€§ï¼ˆç›¸å½“äºâ€œåˆå§‹åŒ–çŠ¶æ€â€ï¼‰</td></tr><tr><td><code>gsap.to(target, vars)</code></td><td>âœ… æ˜¯</td><td>ä»å½“å‰çŠ¶æ€ åŠ¨ç”»åˆ° æŒ‡å®šçŠ¶æ€</td></tr><tr><td><code>gsap.from(target, vars)</code></td><td>âœ… æ˜¯</td><td>ä»æŒ‡å®šçŠ¶æ€ åŠ¨ç”»åˆ° å½“å‰çŠ¶æ€</td></tr><tr><td><code>gsap.fromTo(target, fromVars, toVars)</code></td><td>âœ… æ˜¯</td><td>è‡ªå®šä¹‰èµ·å§‹å’Œç»“æŸçŠ¶æ€</td></tr></tbody></table>
<h2 data-id="heading-9">clearProps: "all"æ˜¯ä»€ä¹ˆæ„æ€</h2>
<p>gsap.set([boxA, boxB], { clearProps: "all" });
è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>ç«‹å³æ¸…é™¤Â <code>boxA</code>Â å’ŒÂ <code>boxB</code>Â å…ƒç´ ä¸Šç”± GSAP è®¾ç½®çš„æ‰€æœ‰å†…è”æ ·å¼å±æ€§ï¼ˆæ¯”å¦‚Â <code>transform</code>,Â <code>opacity</code>,Â <code>backgroundColor</code>Â ç­‰ï¼‰ï¼Œè®©å®ƒä»¬æ¢å¤åˆ° GSAP å¹²é¢„ä¹‹å‰çš„çŠ¶æ€ï¼ˆå³ä»…å— CSS ç±»æˆ–åŸå§‹ HTML æ ·å¼æ§åˆ¶ï¼‰ã€‚</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-10">âœ…Â <code>clearProps</code>Â çš„ä½œç”¨è¯¦è§£</h4>
<ul>
<li>GSAP åœ¨æ‰§è¡ŒåŠ¨ç”»ï¼ˆå¦‚Â <code>gsap.to()</code>ã€<code>gsap.from()</code>ï¼‰æˆ–Â <code>gsap.set()</code>Â æ—¶ï¼Œä¼š<strong>ç›´æ¥å†™å…¥å…ƒç´ çš„Â <code>style</code>Â å±æ€§</strong>ï¼ˆä¾‹å¦‚ï¼š<code>&lt;div style="transform: translateX(100px); opacity: 0.5;"&gt;</code>ï¼‰ã€‚</li>
<li>è¿™äº›å†…è”æ ·å¼ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œä¼šè¦†ç›–ä½ å†™çš„ CSS ç±»ã€‚</li>
<li>ä½¿ç”¨Â <code>clearProps</code>Â å¯ä»¥<strong>æ¸…ç†è¿™äº›â€œæ®‹ç•™â€çš„å†…è”æ ·å¼</strong>ï¼Œé¿å…å¹²æ‰°åç»­å¸ƒå±€æˆ–æ ·å¼ã€‚</li>
</ul>

























<table><thead><tr><th>å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>"all"</code></td><td>æ¸…é™¤ æ‰€æœ‰ GSAP è®¾ç½®è¿‡çš„å†…è”æ ·å¼ï¼ˆæœ€å¸¸ç”¨ï¼‰âœ…</td></tr><tr><td><code>"transform"</code></td><td>ä»…æ¸…é™¤ <code>transform</code> ç›¸å…³å±æ€§ï¼ˆå¦‚ <code>x</code>, <code>y</code>, <code>scale</code>, <code>rotation</code> ç­‰ï¼‰</td></tr><tr><td><code>"opacity,backgroundColor"</code></td><td>æ¸…é™¤æŒ‡å®šçš„å¤šä¸ªå±æ€§ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</td></tr><tr><td><code>"x,y"</code></td><td>ä»…æ¸…é™¤ <code>x</code> å’Œ <code>y</code>ï¼ˆå³ <code>transform: translateX/Y</code>ï¼‰</td></tr></tbody></table>
<p>ğŸ’¡ æ³¨æ„ï¼š<code>clearProps</code>Â åªæ¸…é™¤Â <strong>GSAP æ˜¾å¼è®¾ç½®è¿‡</strong>Â çš„å±æ€§ï¼Œä¸ä¼šå½±å“å…¶ä»– JavaScript æˆ– HTML ä¸­åŸæœ¬å°±æœ‰çš„Â <code>style</code>ã€‚</p>
<h4 data-id="heading-11">ğŸ¯ ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹</h4>
<h5 data-id="heading-12">åœºæ™¯ 1ï¼šé‡ç½®åŠ¨ç”»çŠ¶æ€</h5>
<p>js</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å…ˆæ‰§è¡Œä¸€ä¸ªåŠ¨ç”»</span>
gsap.<span class="hljs-title function_ invoke__">to</span>(boxA, { <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"red"</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span> });

<span class="hljs-comment">// åæ¥æƒ³è®©å®ƒå®Œå…¨å›åˆ°åŸå§‹ CSS æ ·å¼</span>
gsap.<span class="hljs-title function_ invoke__">set</span>(boxA, { <span class="hljs-attr">clearProps</span>: <span class="hljs-string">"all"</span> });
<span class="hljs-comment">// æ•ˆæœç›¸å½“äºï¼šboxA.style.cssText = ""; ï¼ˆä½†æ›´å®‰å…¨ï¼Œåªæ¸… GSAP è®¾ç½®çš„ï¼‰</span>
</code></pre>
<h5 data-id="heading-13">åœºæ™¯ 2ï¼šé¿å… transform å†²çª</h5>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.my-box</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">10deg</span>); <span class="hljs-comment">/* åŸå§‹ CSS transform */</span>
}
</code></pre>
<p>js</p>
<pre><code class="hljs language-php" lang="php">gsap.<span class="hljs-title function_ invoke__">to</span>(<span class="hljs-string">".my-box"</span>, { <span class="hljs-attr">x</span>: <span class="hljs-number">50</span> }); <span class="hljs-comment">// GSAP ä¼šåˆå¹¶ transformï¼Œå˜æˆ rotate + translate</span>
gsap.<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">".my-box"</span>, { <span class="hljs-attr">clearProps</span>: <span class="hljs-string">"transform"</span> }); <span class="hljs-comment">// æ¸…é™¤åï¼Œåªå‰© rotate(10deg)</span>
</code></pre>
<h5 data-id="heading-14">åœºæ™¯ 3ï¼šç»„ä»¶é”€æ¯å‰æ¸…ç†</h5>
<p>åœ¨ React/Vue ç»„ä»¶å¸è½½æ—¶ï¼Œæ¸…é™¤ GSAP æ·»åŠ çš„æ ·å¼ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼æˆ–æ ·å¼æ®‹ç•™ã€‚</p>
<hr/>
<h4 data-id="heading-15">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong><code>clearProps: "all"</code>Â ä¸ä¼šåˆ é™¤é GSAP è®¾ç½®çš„å†…è”æ ·å¼</strong><br/>
æ¯”å¦‚ä½ æ‰‹åŠ¨å†™äº†Â <code>&lt;div style="color: blue"&gt;</code>ï¼ŒGSAP ä¸ä¼šåŠ¨å®ƒã€‚</li>
<li><strong><code>transform</code>Â æ˜¯ä¸€ä¸ªæ•´ä½“</strong><br/>
å³ä½¿ä½ åªè®¾ç½®äº†Â <code>x: 100</code>ï¼Œ<code>clearProps: "transform"</code>Â ä¹Ÿä¼šæ¸…é™¤æ•´ä¸ªÂ <code>transform</code>Â å­—ç¬¦ä¸²ã€‚</li>
<li><strong><code>autoAlpha</code>Â ä¼šåŒæ—¶å½±å“Â <code>opacity</code>Â å’ŒÂ <code>visibility</code></strong><br/>
å¦‚æœä½ ç”¨äº†Â <code>autoAlpha</code>ï¼Œéœ€è¦åŒæ—¶æ¸…é™¤è¿™ä¸¤ä¸ªå±æ€§ã€‚</li>
</ol>













<table><thead><tr><th>ä»£ç </th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>gsap.set(el, { clearProps: "all" })</code></td><td>å½»åº•æ¸…é™¤ GSAP å¯¹è¯¥å…ƒç´ è®¾ç½®çš„æ‰€æœ‰å†…è”æ ·å¼ï¼Œæ¢å¤â€œå¹²å‡€â€çŠ¶æ€</td></tr></tbody></table>
<h2 data-id="heading-16">keyframesæ˜¯ä»€ä¹ˆæ„æ€</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> tween = gsap.<span class="hljs-title function_">to</span>(shape, {
        <span class="hljs-attr">keyframes</span>: [
          { <span class="hljs-attr">x</span>: -<span class="hljs-number">160</span>, <span class="hljs-attr">rotation</span>: -<span class="hljs-number">15</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">0.4</span> },
          { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">scale</span>: <span class="hljs-number">1.2</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">0.4</span> },
          { <span class="hljs-attr">x</span>: <span class="hljs-number">160</span>, <span class="hljs-attr">rotation</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">0.4</span> },
          { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">scale</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">rotation</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">0.4</span> }
        ],
        <span class="hljs-attr">ease</span>: <span class="hljs-string">"power1.inOut"</span>,
        <span class="hljs-attr">paused</span>: <span class="hljs-literal">true</span>
      });
</code></pre>
<p>åœ¨ GSAPï¼ˆGreenSock Animation Platformï¼‰ä¸­ï¼Œ<code>keyframes</code>Â æ˜¯ä¸€ç§<strong>å°†å¤šä¸ªåŠ¨ç”»æ­¥éª¤ä¸²è”èµ·æ¥</strong>çš„æ–¹å¼ï¼Œç±»ä¼¼äº CSS çš„Â <code>@keyframes</code>ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€æ›´çµæ´»ã€‚</p>
<p>è¿™æ®µä»£ç çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p><strong>å¯¹Â <code>shape</code>Â å…ƒç´ æ‰§è¡Œä¸€ä¸ªç”± 4 ä¸ªå…³é”®å¸§ç»„æˆçš„å¤åˆåŠ¨ç”»ï¼Œæ¯ä¸ªå…³é”®å¸§æŒç»­ 0.4 ç§’ï¼Œæ€»å…± 1.6 ç§’ã€‚åŠ¨ç”»è¢«æš‚åœï¼ˆ<code>paused: true</code>ï¼‰ï¼Œéœ€æ‰‹åŠ¨è°ƒç”¨Â <code>.play()</code>Â æ‰ä¼šè¿è¡Œã€‚</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-17">âœ…Â <code>keyframes</code>Â çš„å·¥ä½œåŸç†</h4>
<ul>
<li>æ¯ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ä¸ª<strong>åŠ¨ç”»é˜¶æ®µï¼ˆå…³é”®å¸§ï¼‰</strong> ã€‚</li>
<li>GSAP ä¼š<strong>æŒ‰é¡ºåºä¾æ¬¡æ’­æ”¾</strong>è¿™äº›å…³é”®å¸§ã€‚</li>
<li>æ¯ä¸€å¸§çš„å±æ€§æ˜¯ä»<strong>ä¸Šä¸€å¸§çš„ç»“æŸçŠ¶æ€</strong>è¿‡æ¸¡åˆ°å½“å‰å¸§çš„ç›®æ ‡å€¼ã€‚</li>
<li>æ¯å¸§å¯ä»¥æœ‰è‡ªå·±çš„Â <code>duration</code>ã€<code>ease</code>ï¼ˆå¦‚æœæœªæŒ‡å®šï¼Œåˆ™ç»§æ‰¿å¤–å±‚çš„Â <code>ease</code>ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-18">åŠ¨ç”»æµç¨‹åˆ†è§£ï¼š</h5>






























<table><thead><tr><th>é˜¶æ®µ</th><th>èµ·å§‹çŠ¶æ€ â†’ ç›®æ ‡çŠ¶æ€</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>ç¬¬1å¸§</td><td>å½“å‰çŠ¶æ€ â†’ <code>{x: -160, rotation: -15}</code></td><td>å‘å·¦é£ + å·¦è½¬</td></tr><tr><td>ç¬¬2å¸§</td><td>ä¸Šä¸€å¸§ç»“æŸ â†’ <code>{x: 0, scale: 1.2}</code></td><td>å›åˆ°ä¸­å¿ƒ + æ”¾å¤§</td></tr><tr><td>ç¬¬3å¸§</td><td>ä¸Šä¸€å¸§ç»“æŸ â†’ <code>{x: 160, rotation: 20}</code></td><td>å‘å³é£ + å³è½¬</td></tr><tr><td>ç¬¬4å¸§</td><td>ä¸Šä¸€å¸§ç»“æŸ â†’ <code>{x: 0, scale: 1, rotation: 0}</code></td><td>å›åˆ°åŸä½ + è¿˜åŸå¤§å°å’Œè§’åº¦</td></tr></tbody></table>
<h4 data-id="heading-19">ğŸ”§Â <code>keyframes</code>Â çš„é«˜çº§ç”¨æ³•</h4>
<h5 data-id="heading-20">1.Â <strong>æ¯å¸§å¯å•ç‹¬è®¾ç½®ç¼“åŠ¨ï¼ˆeaseï¼‰</strong></h5>
<p>js</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">keyframes:</span> [
  { <span class="hljs-attr">x:</span> <span class="hljs-number">100</span>, <span class="hljs-attr">duration:</span> <span class="hljs-number">0.3</span>, <span class="hljs-attr">ease:</span> <span class="hljs-string">"back.out"</span> },
  { <span class="hljs-attr">x:</span> <span class="hljs-number">0</span>, <span class="hljs-attr">duration:</span> <span class="hljs-number">0.3</span>, <span class="hljs-attr">ease:</span> <span class="hljs-string">"elastic.out"</span> }
]
</code></pre>
<h5 data-id="heading-21">2.Â <strong>æ”¯æŒå›è°ƒå‡½æ•°</strong></h5>
<p>js</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">keyframes:</span> [
  { <span class="hljs-attr">x:</span> <span class="hljs-number">100</span>, <span class="hljs-attr">duration:</span> <span class="hljs-number">0.5</span> },
  { 
    <span class="hljs-attr">x:</span> <span class="hljs-number">0</span>, 
    <span class="hljs-attr">duration:</span> <span class="hljs-number">0.5</span>,
    <span class="hljs-attr">onComplete:</span> <span class="hljs-string">()</span> <span class="hljs-string">=&gt;</span> <span class="hljs-string">console.log("ç¬¬äºŒå¸§å®Œæˆ")</span> 
  }
]
</code></pre>
<h5 data-id="heading-22">3.Â <strong>ä¸ ScrollTriggerã€Timeline ç»“åˆ</strong></h5>
<p>js</p>
<pre><code class="hljs language-php" lang="php">gsap.<span class="hljs-title function_ invoke__">timeline</span>({
  <span class="hljs-attr">scrollTrigger</span>: { <span class="hljs-attr">trigger</span>: <span class="hljs-string">".section"</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">"top center"</span> }
}).<span class="hljs-title function_ invoke__">to</span>(shape, {
  <span class="hljs-attr">keyframes</span>: [ <span class="hljs-comment">/* ... */</span> ]
});
</code></pre>
<hr/>
<h4 data-id="heading-23">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><code>keyframes</code>Â æ˜¯Â <strong>GSAP 3.0+</strong> Â å¼•å…¥çš„åŠŸèƒ½ï¼Œåœ¨æ—§ç‰ˆæœ¬ä¸­ä¸å¯ç”¨ã€‚</li>
<li>å¤–å±‚çš„Â <code>ease</code>ï¼ˆå¦‚ä½ çš„Â <code>"power1.inOut"</code>ï¼‰ä¼šä½œä¸º<strong>é»˜è®¤ç¼“åŠ¨</strong>åº”ç”¨åˆ°æ¯ä¸€å¸§ï¼ˆé™¤éæŸå¸§è‡ªå·±æŒ‡å®šäº†Â <code>ease</code>ï¼‰ã€‚</li>
<li>å¦‚æœæŸå¸§æ²¡æœ‰æŒ‡å®šÂ <code>duration</code>ï¼Œå®ƒä¼šç»§æ‰¿å‰ä¸€å¸§çš„Â <code>duration</code>Â æˆ–ä½¿ç”¨é»˜è®¤å€¼ï¼ˆé€šå¸¸ä¸º 0.3 ç§’ï¼‰ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-24">âœ… ä¸ºä»€ä¹ˆç”¨Â <code>keyframes</code>Â è€Œä¸ç”¨å¤šä¸ªÂ <code>gsap.to()</code>ï¼Ÿ</h4>
<p>è¡¨æ ¼</p>

















<table><thead><tr><th>æ–¹å¼</th><th>ä¼˜ç‚¹</th></tr></thead><tbody><tr><td><code>keyframes</code></td><td>ä»£ç æ›´ç´§å‡‘ï¼Œè‡ªåŠ¨ä¸²è”ï¼Œæ˜“äºç®¡ç†å•ä¸ªåŠ¨ç”»åºåˆ—</td></tr><tr><td>å¤šä¸ªÂ <code>gsap.to()</code></td><td>æ›´çµæ´»ï¼ˆå¯æ’å…¥å»¶è¿Ÿã€å›è°ƒç­‰ï¼‰ï¼Œé€‚åˆå¤æ‚ç¼–æ’ï¼ˆæ¨èç”¨Â <code>gsap.timeline()</code>ï¼‰</td></tr></tbody></table>
<blockquote>
<p>å¯¹äºç®€å•çš„çº¿æ€§å¤šæ­¥åŠ¨ç”»ï¼Œ<code>keyframes</code>Â éå¸¸ç®€æ´ï¼›å¯¹äºå¤æ‚æ—¶é—´è½´ï¼Œå»ºè®®ç”¨Â <code>gsap.timeline()</code>ã€‚</p>
</blockquote>
<hr/>
<blockquote>
<p><strong><code>keyframes</code>Â = æŠŠå¤šä¸ªåŠ¨ç”»æ­¥éª¤å†™åœ¨ä¸€ä¸ªæ•°ç»„é‡Œï¼ŒGSAP è‡ªåŠ¨æŒ‰é¡ºåºæ’­æ”¾å®ƒä»¬ã€‚</strong></p>
</blockquote>
<p>ä½ çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªâ€œå·¦å³æ™ƒåŠ¨ + ç¼©æ”¾â€çš„å¼¹æ€§åŠ¨ç”»ï¼Œå¸¸ç”¨äºï¼š</p>
<ul>
<li>æŒ‰é’®ç‚¹å‡»åé¦ˆ</li>
<li>é”™è¯¯æç¤ºæŠ–åŠ¨</li>
<li>å¡ç‰‡ç¿»è½¬/å¼¹è·³æ•ˆæœ</li>
</ul>
<p>é…åˆÂ <code>paused: true</code>ï¼Œä½ å¯ä»¥åœ¨éœ€è¦æ—¶ï¼ˆå¦‚ç‚¹å‡»ã€æ»šåŠ¨ï¼‰é€šè¿‡Â <code>tween.play()</code>Â è§¦å‘åŠ¨ç”»ï¼Œéå¸¸é«˜æ•ˆï¼</p>
<h2 data-id="heading-25">stagger æ˜¯ä»€ä¹ˆæ„æ€</h2>
<p>åœ¨ GSAPï¼ˆGreenSock Animation Platformï¼‰ä¸­ï¼Œ<strong><code>stagger</code></strong>Â æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œç”¨äº<strong>å¯¹å¤šä¸ªç›®æ ‡å…ƒç´ ï¼ˆå¦‚æ•°ç»„ã€NodeListï¼‰ä¾æ¬¡é”™å¼€æ’­æ”¾åŠ¨ç”»</strong>ï¼Œä»è€Œåˆ›å»ºå‡ºâ€œæ³¢æµªå¼â€ã€â€œé€ä¸ªå…¥åœºâ€ç­‰æµç•…çš„åºåˆ—åŠ¨ç”»æ•ˆæœã€‚</p>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-keyword">const</span> tween = gsap.<span class="hljs-title function_">from</span>(cells, {
        <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">scale</span>: <span class="hljs-number">0.4</span>,
        <span class="hljs-attr">y</span>: <span class="hljs-number">20</span>,
        <span class="hljs-attr">duration</span>: <span class="hljs-number">0.6</span>,
        <span class="hljs-attr">ease</span>: <span class="hljs-string">"power2.out"</span>,
       <span class="hljs-attr">stagger</span>: { 
           <span class="hljs-attr">each</span>: <span class="hljs-number">0.04</span>, <span class="hljs-comment">// æ¯ä¸ªå…ƒç´ ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´ï¼ˆç§’ï¼‰</span>
           <span class="hljs-attr">from</span>: <span class="hljs-string">"center"</span> <span class="hljs-comment">// åŠ¨ç”»ä»ä¸­é—´çš„å…ƒç´ å¼€å§‹ï¼Œå‘ä¸¤è¾¹æ‰©æ•£</span>
       },
        <span class="hljs-attr">paused</span>: <span class="hljs-literal">true</span>
      });
</code></pre>
<p>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>å¯¹Â <code>cells</code>ï¼ˆä¸€ç»„ DOM å…ƒç´ ï¼‰æ‰§è¡Œâ€œä»é€æ˜ã€ç¼©å°ã€ä¸‹ç§»â€çŠ¶æ€æ·¡å…¥æ”¾å¤§çš„åŠ¨ç”»ï¼Œä½†ä¸æ˜¯åŒæ—¶æ’­æ”¾ï¼Œè€Œæ˜¯ï¼š</strong></p>
<ul>
<li><strong>ä»ä¸­é—´çš„å…ƒç´ å¼€å§‹</strong></li>
<li><strong>ç›¸é‚»å…ƒç´ ä¹‹é—´é—´éš” 0.04 ç§’ä¾æ¬¡æ’­æ”¾</strong></li>
<li>æ•´ä½“å½¢æˆä¸€ç§â€œç”±ä¸­å¿ƒå‘å¤–æ‰©æ•£â€çš„å…¥åœºæ•ˆæœ âœ¨</li>
</ul>
</blockquote>
<hr/>
<h4 data-id="heading-26">âœ…Â <code>stagger</code>Â çš„æ ¸å¿ƒæ¦‚å¿µ</h4>
<p>å½“ä½ å¯¹<strong>å¤šä¸ªå…ƒç´ </strong>ï¼ˆå¦‚Â <code>document.querySelectorAll('.cell')</code>ï¼‰ä½¿ç”¨ GSAP åŠ¨ç”»æ—¶ï¼š</p>
<ul>
<li><strong>ä¸åŠ Â <code>stagger</code></strong>Â â†’ æ‰€æœ‰å…ƒç´ <strong>åŒæ—¶</strong>åŠ¨ç”»ã€‚</li>
<li><strong>åŠ ä¸ŠÂ <code>stagger</code></strong>Â â†’ å…ƒç´ <strong>ä¾æ¬¡é”™å¼€</strong>åŠ¨ç”»ï¼Œäº§ç”ŸèŠ‚å¥æ„Ÿã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-27">ğŸ”§Â <code>stagger</code>Â çš„å¸¸è§å†™æ³•</h4>
<h5 data-id="heading-28">1.Â <strong>æœ€ç®€å½¢å¼ï¼šåªæŒ‡å®šé—´éš”æ—¶é—´</strong></h5>
<p>js</p>
<pre><code class="hljs language-css" lang="css">stagger: <span class="hljs-number">0.1</span>  // ç­‰ä»·äº { each: <span class="hljs-number">0.1</span> }
</code></pre>
<p>â†’ ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸ªé—´éš” 0.1 ç§’ã€‚</p>
<h5 data-id="heading-29">2.Â <strong>å¯¹è±¡å½¢å¼ï¼ˆä½ ç”¨çš„æ–¹å¼ï¼‰ï¼šæ›´ç²¾ç»†æ§åˆ¶</strong></h5>
<p>js</p>
<pre><code class="hljs language-perl" lang="perl">stagger: {
  <span class="hljs-keyword">each</span>: <span class="hljs-number">0</span>.<span class="hljs-number">04</span>,     <span class="hljs-regexp">//</span> æ¯ä¸ªå…ƒç´ é—´éš” <span class="hljs-number">0</span>.<span class="hljs-number">04</span> ç§’
  from: <span class="hljs-string">"center"</span>, <span class="hljs-regexp">//</span> èµ·å§‹ä½ç½®ï¼šå¯é€‰ <span class="hljs-string">"start"</span>ï¼ˆé»˜è®¤ï¼‰ã€<span class="hljs-string">"center"</span>ã€<span class="hljs-string">"end"</span> æˆ–å…·ä½“ç´¢å¼•ï¼ˆå¦‚ <span class="hljs-number">3</span>ï¼‰
  grid: <span class="hljs-string">"auto"</span>,   <span class="hljs-regexp">//</span> å¦‚æœæ˜¯ç½‘æ ¼å¸ƒå±€ï¼Œå¯è®¾ä¸º [rows, cols] æ¥æŒ‰è¡Œ/åˆ—äº¤é”™
  axis: <span class="hljs-string">"x"</span>       // åœ¨ç½‘æ ¼ä¸­é™åˆ¶äº¤é”™æ–¹å‘ï¼ˆ<span class="hljs-string">"x"</span>ã€<span class="hljs-string">"y"</span> æˆ– <span class="hljs-string">"xy"</span>ï¼‰
}
</code></pre>
<hr/>
<h4 data-id="heading-30">ğŸ¯Â <code>from</code>Â çš„å–å€¼è¯´æ˜</h4>

























<table><thead><tr><th>å€¼</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><code>"start"</code>ï¼ˆé»˜è®¤ï¼‰</td><td>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¾æ¬¡åˆ°æœ€åä¸€ä¸ª</td></tr><tr><td><code>"center"</code></td><td>ä»ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œå‘å·¦å³ï¼ˆæˆ–ä¸Šä¸‹ï¼‰åŒæ—¶æ‰©æ•£</td></tr><tr><td><code>"end"</code></td><td>ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œå€’åºæ’­æ”¾</td></tr><tr><td><code>æ•°å­—ï¼ˆå¦‚ 2ï¼‰</code></td><td>ä»ç´¢å¼•ä¸º 2 çš„å…ƒç´ å¼€å§‹</td></tr></tbody></table>
<p>âœ… Â <code>from: "center"</code>Â éå¸¸é€‚åˆ<strong>å±…ä¸­å¯¹é½çš„åˆ—è¡¨ã€å›¾æ ‡é˜µåˆ—ã€å¡ç‰‡ç½‘æ ¼</strong>ç­‰åœºæ™¯ï¼Œè§†è§‰ä¸Šæ›´å¹³è¡¡ã€‚</p>
<hr/>
<h4 data-id="heading-31">ğŸ’¡ å®é™…æ•ˆæœç¤ºä¾‹</h4>
<p>å‡è®¾Â <code>cells</code>Â æœ‰ 5 ä¸ªå…ƒç´ ï¼š<code>[A, B, C, D, E]</code></p>
<ul>
<li><code>from: "center"</code>Â â†’ æ’­æ”¾é¡ºåºï¼š<strong>C â†’ B &amp; D â†’ A &amp; E</strong></li>
<li>æ¯ä¸ªé—´éš”Â <code>0.04s</code>ï¼Œæ‰€ä»¥æ•´ä¸ªåŠ¨ç”»åœ¨çº¦Â <code>0.04 Ã— 2 = 0.08s</code>Â å†…å®Œæˆæ‰©æ•£ï¼ˆå› ä¸ºä¸¤è¾¹å¹¶è¡Œï¼‰</li>
</ul>
<blockquote>
<p>è¿™æ¯”çº¿æ€§æ’­æ”¾ï¼ˆAâ†’Bâ†’Câ†’Dâ†’Eï¼‰æ›´ç”ŸåŠ¨ï¼</p>
</blockquote>
<hr/>
<h4 data-id="heading-32">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><code>stagger</code>Â <strong>åªåœ¨ç›®æ ‡æ˜¯å¤šä¸ªå…ƒç´ æ—¶ç”Ÿæ•ˆ</strong>ã€‚å¦‚æœÂ <code>cells</code>Â åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œ<code>stagger</code>Â ä¼šè¢«å¿½ç•¥ã€‚</li>
<li><code>stagger</code>Â çš„å»¶è¿Ÿæ˜¯<strong>å åŠ åœ¨Â <code>duration</code>Â ä¹‹ä¸Šçš„</strong>ï¼Œä¸å½±å“å•ä¸ªåŠ¨ç”»çš„æ—¶é•¿ã€‚</li>
<li>å¯ä¸Â <code>paused: true</code>Â å®Œç¾é…åˆï¼Œå®ç°â€œæŒ‰éœ€è§¦å‘åŠ¨ç”»åºåˆ—â€ã€‚</li>
</ul>
<hr/>













<table><thead><tr><th>é…ç½®</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>stagger: { each: 0.04, from: "center" }</code></td><td><strong>ä»ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œä»¥ 0.04 ç§’çš„é—´éš”å‘ä¸¤ä¾§ä¾æ¬¡æ’­æ”¾åŠ¨ç”»</strong></td></tr></tbody></table>
<p>è¿™æ˜¯ GSAP å®ç°<strong>é«˜çº§äº¤äº’åŠ¨æ•ˆ</strong>ï¼ˆå¦‚åˆ—è¡¨åŠ è½½ã€èœå•å±•å¼€ã€æ•°æ®å¯è§†åŒ–å…¥åœºï¼‰çš„æ ¸å¿ƒæŠ€å·§ä¹‹ä¸€ã€‚ä½ çš„ä»£ç å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œä¼˜é›…æ‰¹é‡å…¥åœºâ€åŠ¨ç”»ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android VSync ç¬”è®°]]></title>    <link>https://juejin.cn/post/7605810996125007906</link>    <guid>https://juejin.cn/post/7605810996125007906</guid>    <pubDate>2026-02-13T02:36:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605810996125007906" data-draft-id="7605542907118862388" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android VSync ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-13T02:36:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android VSync ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:36:21.000Z" title="Fri Feb 13 2026 02:36:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…³äºVSyncçš„äº§ç”Ÿï¼Œä½ éœ€è¦å½»åº•æ›´æ–°ä¸€ä¸ªè®¤çŸ¥ï¼š<strong>Androidç³»ç»Ÿé‡Œä½ çœ‹åˆ°çš„é‚£äº›æ•´é½çš„VSYNC-APPå’ŒVSYNC-SFä¿¡å·ï¼Œ99%çš„æ—¶é—´é‡Œå¹¶ä¸æ˜¯ç¡¬ä»¶ç›´æ¥äº§ç”Ÿçš„ï¼Œè€Œæ˜¯SurfaceFlingerç”¨æ•°å­¦å…¬å¼â€œç®—â€å‡ºæ¥çš„ã€‚</strong></p>
<p>ä¸ºäº†æŠŠè¿™ä¸ªâ€œç®—å‡ºæ¥â€çš„è¿‡ç¨‹è®²é€ï¼Œæˆ‘ä»¬ä»<strong>ç‰©ç†æºå¤´</strong>ã€<strong>è½¯ä»¶è¡ç”Ÿ</strong>ã€<strong>æŒ‰éœ€å¼€å…³</strong>ä¸‰ä¸ªå±‚é¢é€æ­¥æ‹†è§£ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ç‰©ç†æºå¤´ï¼šç¡¬ä»¶VSyncçš„â€œåŸå§‹è„‰æâ€</h2>
<p>VSyncè¿™ä¸ªæ¦‚å¿µçš„è¯ç”Ÿæ¯”Androidæ—©å‡ åå¹´ï¼Œå®ƒæºè‡ªCRTæ˜¾ç¤ºå™¨ç”µå­æªçš„ç‰©ç†åŠ¨ä½œã€‚</p>
<p><strong>1.1 å®ƒæœ€åˆæ˜¯æ˜¾ç¤ºå™¨â€œå–˜å£æ°”â€çš„ä¿¡å·</strong></p>
<ul>
<li>ç”µå­æªä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹æ‰«æå±å¹•ï¼Œæ‰«å®Œä¸€å¸§åå¿…é¡»<strong>å…³é—­ç”µå­æŸã€ä»å³ä¸‹è§’ç¬é—´ç§»å›å·¦ä¸Šè§’</strong>ï¼ˆå‚ç›´å›æ‰«ï¼‰ã€‚</li>
<li>è¿™æ®µçŸ­æš‚çš„â€œç©ºçª—æœŸâ€ä¼šè§¦å‘ä¸€ä¸ªè„‰å†²â€”â€”<strong>å‚ç›´åŒæ­¥ä¿¡å·ï¼ˆVSyncï¼‰</strong>ï¼Œå‘Šè¯‰æ˜¾å¡ï¼šâ€œä¸Šä¸€å¸§å·²æ˜¾ç¤ºå®Œæ¯•ï¼Œå¯ä»¥é€ä¸‹ä¸€å¸§äº†â€ã€‚</li>
<li>ç°ä»£LCDè™½æ— ç”µå­æªï¼Œä½†ä¸ºäº†å…¼å®¹ï¼Œ<strong>æ˜¾ç¤ºæ§åˆ¶å™¨ï¼ˆDisplay Controllerï¼‰ä¼šæ¨¡æ‹Ÿè¿™ä¸ªæ—¶åº</strong>ï¼Œé€šè¿‡ç¡¬ä»¶å®šæ—¶å™¨äº§ç”Ÿå›ºå®šé¢‘ç‡çš„è„‰å†²ã€‚è¿™ä¸ªé¢‘ç‡å°±æ˜¯å±å¹•åˆ·æ–°ç‡ï¼ˆ60Hz/90Hz/120Hzç­‰ï¼‰ã€‚</li>
</ul>
<p><strong>1.2 Androidé‡Œè°åœ¨åˆ¶é€ è¿™ä¸ªåŸå§‹è„‰å†²ï¼Ÿ</strong>
<strong>Hardware Composerï¼ˆHWCï¼‰</strong>ã€‚å®ƒæ˜¯æ˜¾ç¤ºé©±åŠ¨çš„ä¸€éƒ¨åˆ†ï¼Œç›´æ¥ä¸ç¡¬ä»¶å®šæ—¶å™¨äº¤äº’ã€‚æ¯å½“å±å¹•å®Œæˆä¸€æ¬¡åˆ·æ–°ï¼ŒHWCå°±é€šè¿‡å›è°ƒå‘SurfaceFlingerå‘é€ä¸€ä¸ª<strong>HW_VSYNC_0</strong>ä¿¡å·ã€‚</p>
<p><strong>å…³é”®è®¤çŸ¥</strong>ï¼šè¿™ä¸ªç¡¬ä»¶ä¿¡å·æå…¶â€œåŸå§‹â€â€”â€”å®ƒåªæ˜¯ä¸€ä¸²å‡†ç¡®ä½†<strong>æ²¡æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘</strong>çš„æ—¶é—´æˆ³ã€‚å®ƒä¸çŸ¥é“è°æ˜¯Appã€è°æ˜¯SurfaceFlingerï¼Œåªä¼šæ¯åˆ†é’Ÿ60æ¬¡ï¼ˆæˆ–æ›´é«˜ï¼‰å¿ å®åœ°å‘å‡ºè„‰å†²ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€è½¯ä»¶è¡ç”Ÿï¼šDispSyncçš„â€œç¥ç®—å±€â€</h2>
<p>å¦‚æœè®©Appå’ŒSurfaceFlingeræ¯æ¬¡éƒ½ç›´æ¥å“åº”HW_VSYNC_0ï¼Œä¼šæœ‰ä¸¤ä¸ªä¸¥é‡é—®é¢˜ï¼š</p>
<ol>
<li><strong>åŠŸè€—ç¾éš¾</strong>ï¼šå³ä½¿å±å¹•é™æ­¢ä¸åŠ¨ï¼ˆå¦‚çœ‹ç”µå­ä¹¦ï¼‰ï¼ŒAppå’ŒSFä¹Ÿä¼šæ¯16.6msè¢«å”¤é†’ï¼Œç–¯ç‹‚ç©ºè½¬ã€‚</li>
<li><strong>ç›¸ä½æ­»é”</strong>ï¼šAppç»˜åˆ¶ã€SFåˆæˆã€å±å¹•æ˜¾ç¤ºä¸‰è€…<strong>æŒ¤åœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹å¼€å·¥</strong>ï¼Œæµæ°´çº¿ä¸¥é‡é˜»å¡ï¼ˆæ—§Androidç‰ˆæœ¬çš„ç—›ç‚¹ï¼‰ã€‚</li>
</ol>
<p>äºæ˜¯Android 4.1ï¼ˆProject Butterï¼‰å¼•å…¥äº†<strong>DispSyncæ¨¡å—</strong>â€”â€”ä¸€ä¸ª<strong>åŸºäºæ•°å­¦é¢„æµ‹çš„è½¯ä»¶VSyncç”Ÿæˆå™¨</strong>ã€‚è¿™æ˜¯æ•´ä¸ªæœºåˆ¶æœ€ç²¾å¦™çš„éƒ¨åˆ†ã€‚</p>
<p><strong>2.1 DispSyncçš„å·¥ä½œåŸç†ï¼šé”ç›¸ç¯çš„è½¯ä»¶å®ç°</strong></p>
<p>DispSyncæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>æ•°å­—é”ç›¸ç¯ï¼ˆDigital Phase-Locked Loopï¼‰</strong>ã€‚å®ƒä¸ä¾èµ–ç¡¬ä»¶ä¸­æ–­å®æ—¶è§¦å‘ï¼Œè€Œæ˜¯é€šè¿‡é‡‡æ ·ç¡¬ä»¶VSyncçš„å†å²æ—¶é—´ï¼Œ<strong>æ‹Ÿåˆå‡ºä¸€æ¡ç²¾å‡†çš„â€œè™šæ‹Ÿæ—¶é’Ÿçº¿â€</strong>ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šé‡‡æ ·ä¸å»ºæ¨¡</strong></p>
<ul>
<li>SurfaceFlingerä¼šæŒç»­æ¥æ”¶HW_VSYNC_0ä¿¡å·ï¼Œä½†<strong>å¹¶ä¸ç«‹åˆ»åˆ†å‘</strong>ã€‚</li>
<li>DispSyncæ”¶é›†<strong>è‡³å°‘3ä¸ªã€æœ€å¤š32ä¸ª</strong>ç¡¬ä»¶VSyncæ—¶é—´æˆ³ï¼Œé€šè¿‡æœ€å°äºŒä¹˜æ³•æˆ–å‡å€¼æ»¤æ³¢è®¡ç®—å‡º<strong>å¹³å‡å‘¨æœŸï¼ˆAvgPeriodï¼‰<strong>å’Œ</strong>å¹³å‡ç›¸ä½ï¼ˆAvgPhaseï¼‰</strong>ã€‚</li>
<li>æ•°å­¦å…¬å¼ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š
<ul>
<li>å°†æ¯ä¸ªæ—¶é—´æˆ³æ˜ å°„åˆ°å•ä½åœ†è§’åº¦ï¼š<code>Î”Phase = 2Ï€ * (timestamp % AvgPeriod) / AvgPeriod</code></li>
<li>è®¡ç®—æ‰€æœ‰é‡‡æ ·ç‚¹çš„å¹³å‡å‘é‡ <code>(AvgX, AvgY)</code></li>
<li><code>SW_VSYNCç›¸ä½ = atan2(AvgY, AvgX)</code></li>
<li>æœ€ç»ˆï¼š<code>SW_VSYNCæ—¶é—´ = AvgPeriod + AvgPhase</code></li>
</ul>
</li>
</ul>
<p><strong>ä¸€æ—¦æ¨¡å‹è¯¯å·®æ”¶æ•›ï¼ˆé€šå¸¸6ä¸ªé‡‡æ ·åï¼‰ï¼ŒDispSyncä¼šç«‹å³</strong>å…³é—­ç¡¬ä»¶VSyncä¸­æ–­**ï¼Œå®Œå…¨é è¿™å¥—æ•°å­¦æ¨¡å‹äº§ç”Ÿåç»­çš„è½¯ä»¶VSyncã€‚è¿™å°±æ˜¯â€œç”¨è®¡ç®—ä»£æ›¿ä¸­æ–­â€çš„æ ¸å¿ƒèŠ‚èƒ½è®¾è®¡ã€‚</p>
<p><strong>2.2 ä¸€æºåŒç”Ÿï¼šVSYNC-APPä¸VSYNC-SF</strong></p>
<p>ç¡¬ä»¶åªæä¾›ä¸€ä¸ªåŸå§‹è„‰å†²ï¼Œä½†ç³»ç»Ÿéœ€è¦ä¸¤ä¸ªä¸åŒç”¨é€”çš„èŠ‚æ‹å™¨ã€‚DispSyncåœ¨ç”Ÿæˆè½¯ä»¶VSyncæ—¶ï¼Œä¼š<strong>ç›´æ¥äº§å‡ºä¸¤æ¡ç›¸ä½åç§»çš„æ—¶é’Ÿæµ</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">VSYNC-APP</span> = SW_VSYNCåŸºå‡† + phase_appåç§»é‡
<span class="hljs-attr">VSYNC-SF</span>  = SW_VSYNCåŸºå‡† + phase_sfåç§»é‡
</code></pre>
<ul>
<li><strong>phase_app</strong>ï¼šé€šå¸¸ä¸º0ï½2msï¼ˆåº”ç”¨å…ˆå¼€å§‹ç»˜åˆ¶ï¼‰</li>
<li><strong>phase_sf</strong>ï¼šé€šå¸¸ä¸º4ï½6msï¼ˆSFç¨åå¼€å§‹åˆæˆï¼Œåˆšå¥½ç­‰Appç”»å®Œï¼‰</li>
</ul>
<p>è¿™ä¸¤æ¡ä¿¡å·å°±æ˜¯ä½ åœ¨Systraceé‡Œçœ‹åˆ°çš„å½©è‰²VSyncæ¡ã€‚å®ƒä»¬çš„<strong>å‘¨æœŸå®Œå…¨ä¸€è‡´ï¼ˆ16.6msï¼‰</strong>ï¼Œä½†<strong>èµ·å§‹æ—¶é—´é”™å¼€</strong>ï¼Œå½¢æˆæµæ°´çº¿ã€‚</p>
<p><strong>å¯¹æ¯”æ€»ç»“</strong>ï¼ˆçº æ­£å¸¸è§è¯¯åŒºï¼‰ï¼š</p>

































<table><thead><tr><th>ä¿¡å·åç§°</th><th>äº§ç”Ÿè€…</th><th>æ˜¯å¦ç¡¬ä»¶ç›´æ¥å‘å‡º</th><th>ç”¨é€”</th><th>è§¦å‘æ–¹å¼</th></tr></thead><tbody><tr><td><strong>HW_VSYNC_0</strong></td><td>HWC/æ˜¾ç¤ºæ§åˆ¶å™¨</td><td>âœ… æ˜¯</td><td>æ ¡å‡†DispSyncæ¨¡å‹</td><td>ç¡¬ä»¶å®šæ—¶å™¨ï¼Œå›ºå®šé¢‘ç‡</td></tr><tr><td><strong>VSYNC-APP</strong></td><td>DispSyncï¼ˆè½¯ä»¶ï¼‰</td><td>âŒ å¦</td><td>è§¦å‘Choreographerå¼€å§‹ç»˜åˆ¶</td><td>æŒ‰éœ€ + æ¨¡å‹é¢„æµ‹</td></tr><tr><td><strong>VSYNC-SF</strong></td><td>DispSyncï¼ˆè½¯ä»¶ï¼‰</td><td>âŒ å¦</td><td>è§¦å‘SurfaceFlingeråˆæˆ</td><td>æŒ‰éœ€ + æ¨¡å‹é¢„æµ‹</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æŒ‰éœ€è§¦å‘ï¼šæ²¡æœ‰ç»˜åˆ¶ä»»åŠ¡æ—¶ï¼ŒVSyncå»å“ªäº†ï¼Ÿ</h2>
<p>è¿™æ˜¯Android VSyncæœºåˆ¶æœ€å®¹æ˜“è¯¯è§£çš„åœ°æ–¹ï¼š<strong>Systraceé‡ŒVSync-APP/SFä¿¡å·å¹¶éæ¯16.6mséƒ½æœ‰</strong>ã€‚å®ƒä»¬çš„å‡ºç°éµå¾ª**æŒ‰éœ€ç”³è¯·ï¼ˆrequestNextVsyncï¼‰**åŸåˆ™ã€‚</p>
<p><strong>3.1 ä¸ºä»€ä¹ˆå¿…é¡»æŒ‰éœ€ï¼Ÿ</strong>
å‡è®¾ä½ æ‰“å¼€ä¸€ä¸ªé™æ€æ–‡æœ¬é¡µé¢ï¼š</p>
<ul>
<li>å±å¹•å†…å®¹å®Œå…¨æ²¡æœ‰å˜åŒ–ã€‚</li>
<li>å¦‚æœDispSyncä»ç„¶æ¯16.6mså‘Appå‘é€VSYNC-APPï¼ŒAppçš„ä¸»çº¿ç¨‹ä¼š<strong>æŒç»­æ¯å¸§æ‰§è¡ŒdoFrame()</strong>ï¼Œç©ºè½¬æµ‹é‡å¸ƒå±€ç»˜åˆ¶â€”â€”CPUç©ºè€—ã€å‘çƒ­ã€æ‰ç”µã€‚</li>
<li><strong>å®Œå…¨æ²¡å¿…è¦</strong>ã€‚</li>
</ul>
<p><strong>3.2 ç”³è¯·-è§¦å‘æœºåˆ¶</strong></p>
<ul>
<li><strong>Appä¾§</strong>ï¼šåªæœ‰å½“<code>Choreographer.postCallback()</code>è¢«è°ƒç”¨ï¼ˆå¦‚View.invalidate()ã€åŠ¨ç”»å¯åŠ¨ï¼‰ï¼Œæ‰ä¼šé€šè¿‡Binderå‘SFçš„EventThread<strong>è¯·æ±‚ä¸‹ä¸€ä¸ªVSYNC-APP</strong>ã€‚</li>
<li><strong>SFä¾§</strong>ï¼šåªæœ‰å½“BufferQueueä¸­æœ‰æ–°Bufferå…¥é˜Ÿï¼Œæˆ–è€…çª—å£çŠ¶æ€å˜åŒ–ï¼Œæ‰ä¼š<strong>è¯·æ±‚ä¸‹ä¸€ä¸ªVSYNC-SF</strong>ã€‚</li>
<li><strong>DispSyncä¾§</strong>ï¼šåªæœ‰å½“<strong>è‡³å°‘ä¸€ä¸ªå®¢æˆ·ç«¯åœ¨ç­‰å¾…</strong>æ—¶ï¼Œå®ƒæ‰ä¼šåœ¨é¢„æµ‹çš„æ—¶é’Ÿç‚¹ä¸Šå‘å°„è½¯ä»¶VSyncï¼›<strong>å¦‚æœæ— äººç”³è¯·ï¼ŒDispSyncä¿æŒé™é»˜</strong>ï¼Œæ•´ä¸ªå›¾å½¢ç³»ç»Ÿè¿›å…¥ä½åŠŸè€—çŠ¶æ€ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆSystraceé‡ŒVSyncä¿¡å·<strong>æ—¶ç–æ—¶å¯†</strong>â€”â€”åŠ¨æ€åœºæ™¯ï¼ˆæ»‘åŠ¨ã€åŠ¨ç”»ï¼‰å¯†é›†å‡ºç°ï¼›é™æ€åœºæ™¯å‡ ä¹æ¶ˆå¤±ã€‚</p>
<p><strong>3.3 ç¡¬ä»¶VSyncçš„é‡æ ¡å‡†</strong>
å½“DispSyncé•¿æœŸä¾é è½¯ä»¶é¢„æµ‹ï¼Œå¯èƒ½ä¼šå› æ¸©æ¼‚ã€æ—¶é’Ÿåå·®è€Œäº§ç”Ÿç›¸ä½è¯¯å·®ã€‚å¦‚ä½•ä¿®æ­£ï¼Ÿ</p>
<ul>
<li>SurfaceFlingeråœ¨<code>postComposition()</code>æ—¶ä¼šæ£€æŸ¥<strong>Present Fence</strong>ï¼ˆå¸§å®é™…æ˜¾ç¤ºçš„æ—¶é—´æˆ³ï¼‰ã€‚</li>
<li>å°†è¿™äº›Fenceæ—¶é—´ä¸SW_VSYNCé¢„æµ‹æ—¶é—´å¯¹æ¯”ï¼Œ<strong>è®¡ç®—è¯¯å·®å¹³æ–¹å’Œ</strong>ã€‚</li>
<li>è‹¥è¯¯å·®è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚1.5msï¼‰ï¼ŒDispSyncä¼š<strong>ä¸´æ—¶é‡æ–°ä½¿èƒ½ç¡¬ä»¶VSync</strong>ï¼Œé‡‡é›†3ï½6ä¸ªæ–°æ ·æœ¬é‡æ–°å»ºæ¨¡ï¼Œç„¶åå†æ¬¡å…³é—­ç¡¬ä»¶VSyncã€‚</li>
</ul>
<p><strong>è¿™æ˜¯ä¸€å¥—å®Œæ•´çš„é—­ç¯è‡ªé€‚åº”ç³»ç»Ÿï¼šç¡¬ä»¶æä¾›åŸºå‡†ï¼Œè½¯ä»¶è´Ÿè´£åˆ†å‘ï¼Œè¯¯å·®è§¦å‘æ ¡å‡†ã€‚</strong></p>
<hr/>
<h2 data-id="heading-3">å››ã€å…¨æ™¯æµç¨‹å›¾ï¼ˆå»ºè®®æ”¶è—ï¼‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8084312655994ab488ebba90269caeea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-D5rqQeGlueXVhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554981&amp;x-signature=BcMZxv%2BFCG0cUiPpuvlHXgW%2BQMY%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[æ˜¾ç¤ºæ§åˆ¶å™¨ç¡¬ä»¶å®šæ—¶å™¨] --&gt;|å›ºå®šé¢‘ç‡è„‰å†²| B[HWCäº§ç”ŸHW_VSYNC_0]
    B --&gt; C{SurfaceFlinger DispSync}
    
    C --&gt;|é‡‡æ ·è‡³å°‘3ä¸ªæ—¶é—´æˆ³| D[è®¡ç®—å¹³å‡å‘¨æœŸä¸ç›¸ä½]
    D --&gt;|æ¨¡å‹æ”¶æ•›| E[å…³é—­ç¡¬ä»¶VSyncä¸­æ–­]
    E --&gt; F[è½¯ä»¶é¢„æµ‹ç”ŸæˆSW_VSYNCåŸºå‡†æ—¶é’Ÿ]
    
    F --&gt;|+ phase_appåç§»| G[VSYNC-APP]
    F --&gt;|+ phase_sfåç§»| H[VSYNC-SF]
    
    G --&gt;|æŒ‰éœ€ï¼šAppè°ƒç”¨requestNextVsync| I[è§¦å‘Choreographerç»˜åˆ¶]
    H --&gt;|æŒ‰éœ€ï¼šSFæœ‰Bufferå¾…åˆæˆ| J[è§¦å‘SurfaceFlingeråˆæˆ]
    
    I --&gt; K[GPUæ¸²æŸ“å®Œæˆ]
    K --&gt; L[Bufferå…¥é˜Ÿ]
    L --&gt;|è§¦å‘SFç”³è¯·ä¸‹ä¸€å¸§VSYNC-SF| J
    
    J --&gt; M[åˆæˆé€æ˜¾]
    M --&gt;|æ£€æŸ¥Present Fenceè¯¯å·®| N{è¯¯å·®è¶…é˜ˆå€¼ï¼Ÿ}
    N --&gt;|æ˜¯| O[ä¸´æ—¶å¼€å¯ç¡¬ä»¶VSync]
    O --&gt;|é‡æ–°é‡‡æ ·| C
    N --&gt;|å¦| P[ä¿æŒè½¯ä»¶é¢„æµ‹æ¨¡å¼]
</code></pre>
<h2 data-id="heading-4">äº”ã€å›ç­”ä½ æœ€åˆçš„é—®é¢˜ï¼šâ€œVSyncæ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿâ€</h2>
<p><strong>åˆ†ä¸‰ä¸ªå±‚æ¬¡å›ç­”ï¼š</strong></p>
<ol>
<li><strong>ç‰©ç†å±‚</strong>ï¼šæ˜¾ç¤ºæ§åˆ¶å™¨ç¡¬ä»¶å®šæ—¶å™¨æ¯16.6msäº§ç”Ÿä¸€ä¸ªè„‰å†²ï¼ŒHWCæ•è·åä½œä¸ºHW_VSYNC_0ä¸ŠæŠ¥ã€‚</li>
<li><strong>è½¯ä»¶å±‚</strong>ï¼šSurfaceFlingerçš„DispSyncæ¨¡å—å°†ç¡¬ä»¶ä¿¡å·ä½œä¸ºâ€œæ ¡å‡†æ ·æœ¬â€ï¼Œé€šè¿‡é”ç›¸ç¯ç®—æ³•<strong>æ‹Ÿåˆå‡ºä¸€æ¡æŒç»­è¿è¡Œçš„è™šæ‹Ÿæ—¶é’Ÿçº¿</strong>ï¼Œå¹¶åœ¨è¿™æ ¹æ—¶é’Ÿçº¿ä¸Š<strong>åŒæ—¶å¼€å‡ºä¸¤æ¡ç›¸ä½é”™å¼€çš„ä¿¡å·é€šé“</strong>ï¼ˆVSYNC-APP/VSYNC-SFï¼‰ã€‚</li>
<li><strong>ç­–ç•¥å±‚</strong>ï¼šè¿™ä¸¤æ¡è½¯ä»¶ä¿¡å·<strong>å¹¶éå‘¨æœŸæ€§è‡ªåŠ¨å‘å°„</strong>ï¼Œè€Œæ˜¯ä¸¥æ ¼éµå¾ª<strong>æŒ‰éœ€ç”³è¯·</strong>æœºåˆ¶â€”â€”åªæœ‰Appæˆ–SFæ˜ç¡®â€œæˆ‘éœ€è¦ä¸‹ä¸€å¸§â€ï¼ŒDispSyncæ‰åœ¨é¢„æµ‹æ—¶é—´ç‚¹å‘å°„ä¿¡å·ã€‚</li>
</ol>
<p><strong>æ‰€ä»¥ï¼ŒVSyncçš„æœ€ç»ˆå½¢æ€â€”â€”ä½ åœ¨Systraceé‡Œçœ‹åˆ°çš„é‚£äº›å½©è‰²èŠ‚æ‹â€”â€”æ˜¯â€œç¡¬ä»¶å®šæ—¶æ ¡å‡† + è½¯ä»¶é¢„æµ‹ç”Ÿæˆ + æŒ‰éœ€è§¦å‘â€ä¸‰è€…ç»“åˆçš„äº§ç‰©ã€‚</strong> å®ƒä¸æ˜¯çº¯ç²¹çš„ç¡¬ä»¶ä¸­æ–­ï¼Œä¹Ÿä¸æ˜¯çº¯ç²¹çš„æ“ä½œç³»ç»Ÿæ—¶é’Ÿï¼Œè€Œæ˜¯Androidä¸ºç§»åŠ¨åœºæ™¯å®šåˆ¶çš„<strong>è‡ªé€‚åº”ã€ä½åŠŸè€—åŒæ­¥å¼•æ“</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä¸€ä¸ªåç«¯,ç”¨AIåšäº†ä¸ªå¯¼èˆªé¡µ,å‘ç°å¼€å‘æ¨¡å¼çœŸçš„å˜äº†]]></title>    <link>https://juejin.cn/post/7605817795628482610</link>    <guid>https://juejin.cn/post/7605817795628482610</guid>    <pubDate>2026-02-13T02:36:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605817795628482610" data-draft-id="7605848213603778606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä¸€ä¸ªåç«¯,ç”¨AIåšäº†ä¸ªå¯¼èˆªé¡µ,å‘ç°å¼€å‘æ¨¡å¼çœŸçš„å˜äº†"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-13T02:36:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HUHA"/> <meta itemprop="url" content="https://juejin.cn/user/875627647347278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä¸€ä¸ªåç«¯,ç”¨AIåšäº†ä¸ªå¯¼èˆªé¡µ,å‘ç°å¼€å‘æ¨¡å¼çœŸçš„å˜äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/875627647347278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HUHA
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:36:13.000Z" title="Fri Feb 13 2026 02:36:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p>è¯´èµ·æ¥,æ˜¥èŠ‚å‰å‡ å¤©,æˆ‘çªç„¶æƒ³åšä¸ªè‡ªå·±çš„å¯¼èˆªé¡µã€‚</p>
<p>ä¸ºä»€ä¹ˆ?å› ä¸ºæµè§ˆå™¨ä¹¦ç­¾å¤ªä¹±äº†ã€‚å¸¸ç”¨çš„å¼€å‘å·¥å…·ã€è®¾è®¡èµ„æºã€AIå·¥å…·æ•£å¾—åˆ°å¤„éƒ½æ˜¯ã€‚æ¯æ¬¡æ‰¾éƒ½è¦åŠå¤©ã€‚æˆ‘æƒ³æœ‰ä¸ªåœ°æ–¹,æŠŠå¸¸ç”¨çš„é“¾æ¥éƒ½é›†ä¸­èµ·æ¥,è¿˜èƒ½æŒ‰ç±»åˆ«æ•´ç†ã€‚</p>
<p>è™½ç„¶æˆ‘å·²ç»åœ¨ç”¨ç°æˆçš„è‡ªå®šä¹‰å¯¼èˆªé¡µäº§å“äº†ï¼Œä½†æ˜¯æˆ‘æ²¡æ³•ç»™ä»–ä»¬æéœ€æ±‚ï¼Œä»–ä»¬ä¹Ÿä¸å¯èƒ½ä¼šå¬ï¼Œæœ‰äº›åŠŸèƒ½æˆ‘æƒ³æ”¹ï¼Œæ ¹æœ¬ä¸å¯èƒ½ï¼</p>
<p>æˆ‘æƒ³æ‹¥æœ‰ä¸€ä¸ªç¬¦åˆè‡ªå·±å®¡ç¾çš„å¯¼èˆªé¡µï¼Œäºæ˜¯å®ƒæ¥äº†ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdh.huhage.fun%2F" target="_blank" title="https://dh.huhage.fun/" ref="nofollow noopener noreferrer">dh.huhage.fun/</a></p>
<p>ä½œä¸ºåç«¯å¼€å‘,è¿™ä¸ªéœ€æ±‚æŒºç®€å•çš„ã€‚ä½†é—®é¢˜æ¥äº†,æˆ‘ä¸ä¼šå†™å‰ç«¯ã€‚</p>
<p>ä¹‹å‰ä¹Ÿè¯•è¿‡å­¦Reactã€Vue,ä½†æ¯æ¬¡éƒ½åšæŒä¸ä¸‹æ¥ã€‚ç»„ä»¶ã€çŠ¶æ€ç®¡ç†ã€æ ·å¼â€”â€”å¯¹æˆ‘æ¥è¯´å°±åƒå¤©ä¹¦ã€‚æ‰€ä»¥è¿™ä¸ªæƒ³æ³•å°±ä¸€ç›´æ‹–ç€,ç›´åˆ°æ˜¥èŠ‚å‰å‡ å¤©,æˆ‘çªç„¶æƒ³:èƒ½ä¸èƒ½ç”¨AIè¯•è¯•?</p>
<p>ç»“æœ,ä¸¤å¤©æ—¶é—´å°±æå®šäº†ã€‚</p>
<p>ç”¨çš„å·¥å…·é“¾ä¹Ÿå¾ˆç®€å•:Lovableåšåˆç‰ˆå‰ç«¯,Claude Codeå’ŒCodexæ‰“ç£¨,Supabaseæ¥å…¥ç™»å½•æ³¨å†Œã€‚æ•´ä¸ªè¿‡ç¨‹å‡ºå¥‡åœ°é¡ºåˆ©,å‡ ä¹æ²¡æœ‰é‡åˆ°ä»€ä¹ˆé˜»ç¢ã€‚</p>
<p>è®©æˆ‘å…ˆè¯´è¯´æˆ‘ä¸ºä»€ä¹ˆä¼šé€‰è¿™å‡ ä¸ªå·¥å…·ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆæ˜¯Lovable</h2>
<p>ä¸€å¼€å§‹,æˆ‘å…¶å®å¯¹æ¯”äº†å¥½å‡ ä¸ªå·¥å…·ã€‚</p>
<p>å¸‚é¢ä¸Šçš„AIå¼€å‘å·¥å…·æŒºå¤šçš„:Geminiã€Bolt.newã€ClaudeCode...æˆ‘éƒ½è¯•äº†ä¸€åœˆã€‚</p>
<p>æµ‹è¯•æ–¹æ³•å¾ˆç®€å•,æˆ‘ç”¨åŒæ ·çš„Promptè®©å®ƒä»¬ç”Ÿæˆå¯¼èˆªé¡µ:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä¸ªæ€§åŒ–å¯¼èˆªé¡µå¼€å‘éœ€æ±‚</span>
<span class="hljs-section">## æ ¸å¿ƒå®šä½</span>
å¼€å‘ä¸€æ¬¾ä»¥æè‡´UIè®¾è®¡ä¸ºæ ¸å¿ƒç«äº‰åŠ›çš„ä¸ªæ€§åŒ–å¯¼èˆªé¡µäº§å“â€œå‘¼å“ˆå¯¼èˆªâ€ï¼Œæ‰€æœ‰è§†è§‰å…ƒç´ éœ€ç»è¿‡æ·±åº¦æ‰“ç£¨ï¼Œæ‹’ç»åŒè´¨åŒ–ã€ä¿—å¥—åŒ–è®¾è®¡ï¼Œå°†UI/UXä½“éªŒä½œä¸ºæ ¸å¿ƒä¼˜å…ˆçº§ã€‚

<span class="hljs-section">## 1. è®¾è®¡è¦æ±‚</span>
<span class="hljs-bullet">-</span> è§†è§‰é£æ ¼ï¼šè¿½æ±‚é«˜çº§æ„Ÿä¸ç‹¬ç‰¹æ€§ï¼Œæ¯ä¸ªUIå…ƒç´ ï¼ˆæŒ‰é’®ã€å¡ç‰‡ã€å›¾æ ‡ã€åŠ¨æ•ˆã€é…è‰²ã€æ’ç‰ˆï¼‰å‡éœ€ç²¾ç»†åŒ–è®¾è®¡ï¼Œé¿å…é€šç”¨æ¨¡æ¿åŒ–é£æ ¼
<span class="hljs-bullet">-</span> ä¸»é¢˜è‰²åˆ‡æ¢ï¼šç”¨æˆ·å¯ä»¥è‡ªå·±åˆ‡æ¢å–œæ¬¢çš„ä¸»é¢˜è‰²
<span class="hljs-bullet">-</span> å¸ƒå±€æ–¹æ¡ˆï¼šæä¾›è‡³å°‘3ç§å·®å¼‚åŒ–æ ¸å¿ƒå¸ƒå±€ï¼ˆå¦‚ç½‘æ ¼ç€‘å¸ƒæµã€åˆ†ç±»æŠ½å±‰å¼ã€æç®€å•åˆ—å¼ï¼‰ï¼Œæ”¯æŒç”¨æˆ·ä¸€é”®åˆ‡æ¢ï¼Œæ¯ç§å¸ƒå±€éœ€é€‚é…ä¸åŒä½¿ç”¨åœºæ™¯ï¼ˆé«˜æ•ˆæŸ¥æ‰¾ã€è§†è§‰æ²‰æµ¸ã€æç®€æ“ä½œï¼‰
<span class="hljs-bullet">-</span> å¤šç«¯å…¼å®¹ï¼šå…¨ç«™é‡‡ç”¨å“åº”å¼è®¾è®¡ï¼Œç§»åŠ¨ç«¯éœ€åšä¸“å±é€‚é…ï¼ˆå¦‚è§¦æ§äº¤äº’ä¼˜åŒ–ã€ç«–å±å¸ƒå±€é‡æ„ã€æ“ä½œæŒ‰é’®æ”¾å¤§ï¼‰ï¼Œä¿è¯ç§»åŠ¨ç«¯ä½“éªŒä¸PCç«¯ä¸€è‡´ä¼˜è´¨
<span class="hljs-bullet">-</span> æ”¯æŒæš—é»‘æ¨¡å¼å’Œäº®è‰²æ¨¡å¼åˆ‡æ¢
<span class="hljs-bullet">-</span> UIè®¾è®¡å¿…é¡»ç¬¦åˆå¤§å‚è®¾è®¡è§„èŒƒï¼Œæœ‰å¤§å‚çš„è®¾è®¡é£èŒƒ

<span class="hljs-section">## 2. æ ¸å¿ƒåŠŸèƒ½</span>
<span class="hljs-section">### ï¼ˆ1ï¼‰è‡ªå®šä¹‰åˆ†ç±»ç®¡ç†</span>
<span class="hljs-bullet">-</span> ç”¨æˆ·å¯è‡ªä¸»åˆ›å»º/ç¼–è¾‘/åˆ é™¤ç½‘å€åˆ†ç±»ï¼ˆæ”¯æŒåˆ†ç±»åç§°ã€åˆ†ç±»å›¾æ ‡ã€åˆ†ç±»æ’åºã€åˆ†ç±»èƒŒæ™¯è‡ªå®šä¹‰ï¼‰
<span class="hljs-bullet">-</span> åˆ†ç±»æ”¯æŒå±‚çº§ç®¡ç†ï¼ˆå¿…é¡»åŒ…å«ä¸€çº§/äºŒçº§åˆ†ç±»ï¼‰ï¼Œæ»¡è¶³å¤šç»´åº¦æ•´ç†éœ€æ±‚

<span class="hljs-section">### ï¼ˆ2ï¼‰ç½‘å€ä¸ªæ€§åŒ–ç®¡ç†</span>
<span class="hljs-bullet">-</span> æ¯ä¸ªåˆ†ç±»ä¸‹æ”¯æŒç”¨æˆ·æ·»åŠ è‡ªå®šä¹‰ç½‘å€ï¼Œå¯é…ç½®é¡¹åŒ…æ‹¬ï¼šç½‘å€é“¾æ¥ã€æ˜¾ç¤ºåç§°ã€è‡ªå®šä¹‰å›¾æ ‡ï¼ˆæ”¯æŒä¸Šä¼ /é€‰æ‹©å†…ç½®å›¾æ ‡/è‡ªåŠ¨æŠ“å–ç½‘ç«™faviconï¼‰ã€å¤‡æ³¨ä¿¡æ¯
<span class="hljs-bullet">-</span> ç½‘å€å±•ç¤ºå½¢å¼éœ€ç²¾ç¾åŒ–ï¼šæ”¯æŒå¡ç‰‡æ‚¬åœåŠ¨æ•ˆã€å›¾æ ‡æ¸å˜ã€ä¿¡æ¯åˆ†å±‚å±•ç¤ºï¼Œé¿å…å•è°ƒåˆ—è¡¨å¼å‘ˆç°

<span class="hljs-section">### ï¼ˆ3ï¼‰åˆ†äº«åŠŸèƒ½</span>
<span class="hljs-bullet">-</span> æ”¯æŒç”¨æˆ·ç”Ÿæˆè‡ªå®šä¹‰åˆ†äº«é“¾æ¥ï¼ˆå¯è‡ªå®šä¹‰é“¾æ¥åç¼€ï¼‰ï¼Œåˆ†äº«åè®¿å®¢å¯ç›´æ¥æŸ¥çœ‹è¯¥ç”¨æˆ·çš„å¯¼èˆªé¡µï¼ˆåªè¯»æƒé™ï¼‰
<span class="hljs-bullet">-</span> åˆ†äº«é¡µéœ€ä¿æŒåŸè®¾è®¡é£æ ¼ï¼Œä¸”é€‚é…ç§»åŠ¨ç«¯è®¿é—®

<span class="hljs-section">### ï¼ˆ4ï¼‰ç”¨æˆ·ç³»ç»Ÿ</span>
<span class="hljs-bullet">-</span> åŸºç¡€ç™»å½•åŠŸèƒ½ï¼ˆæ”¯æŒé‚®ç®±/æ‰‹æœºå·éªŒè¯ï¼Œä¼˜å…ˆè€ƒè™‘Supabase Authé›†æˆï¼‰
<span class="hljs-bullet">-</span> ç™»å½•åæ•°æ®ä¸ç”¨æˆ·è´¦å·ç»‘å®šï¼Œæ”¯æŒå¤šç«¯åŒæ­¥

<span class="hljs-section">### ï¼ˆ5ï¼‰æœç´¢åŠŸèƒ½</span>
<span class="hljs-bullet">-</span> ä¸»é¡µé¡¶éƒ¨å±•ç¤ºæœç´¢åŠŸèƒ½ï¼Œå¯ä»¥åˆ‡æ¢æœç´¢å¼•æ“ï¼Œæ¯”å¦‚bingã€ç™¾åº¦ã€google
<span class="hljs-bullet">-</span> ä¹Ÿæ”¯æŒå¿«é€Ÿæ£€ç´¢ç”¨æˆ·æ·»åŠ çš„ç½‘å€

<span class="hljs-section">## 3. æŠ€æœ¯ä¸å¼€å‘è§„åˆ’</span>
<span class="hljs-bullet">-</span> æ•°æ®åº“ï¼šä½¿ç”¨Supabaseï¼Œæ‰€æœ‰æ•°æ®è¡¨ç»Ÿä¸€å‰ç¼€ä¸ºdh<span class="hljs-emphasis">_ï¼ˆå¦‚dh_</span>usersã€dh<span class="hljs-emphasis">_categoriesã€dh_</span>bookmarksï¼‰
<span class="hljs-bullet">-</span> å¼€å‘ä¼˜å…ˆçº§ï¼šå…ˆå®Œæˆå‰ç«¯UI/äº¤äº’ã€æ ¸å¿ƒåŠŸèƒ½é€»è¾‘ï¼Œæ•°æ®åº“ç›¸å…³å¼€å‘åç½®ï¼ˆéœ€é¢„ç•™æ•°æ®å¯¹æ¥æ¥å£ï¼‰
<span class="hljs-bullet">-</span> æŠ€æœ¯è¦æ±‚ï¼šå‰ç«¯éœ€ä¿è¯æ€§èƒ½ä¸è§†è§‰ä¸€è‡´æ€§ï¼Œäº¤äº’åŠ¨æ•ˆæµç•…ä¸å¡é¡¿

<span class="hljs-section">## 4. äº¤ä»˜æœŸæœ›</span>
<span class="hljs-bullet">-</span> æ¸…æ™°çš„è®¾è®¡ç¨¿ï¼ˆå«å¤šå¸ƒå±€æ–¹æ¡ˆã€ç§»åŠ¨ç«¯é€‚é…ç¨¿ï¼‰
<span class="hljs-bullet">-</span> å¯è¿è¡Œçš„å‰ç«¯åŸå‹ï¼ˆæ ¸å¿ƒåŠŸèƒ½å¯äº¤äº’ï¼‰
<span class="hljs-bullet">-</span> æ˜ç¡®çš„æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ï¼ˆdh<span class="hljs-emphasis">_å‰ç¼€ï¼‰
- åŠŸèƒ½å®ç°çš„æŠ€æœ¯æ–¹æ¡ˆè¯´æ˜
</span></code></pre>
<p>Geminiç”Ÿæˆçš„ä»£ç èƒ½ç”¨,ä½†ç•Œé¢æœ‰ç‚¹æ™®é€šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13ebfeaefc284b53b51ad845a952e39e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=2ozIquadck479uPx0hvRSIoQivs%3D" alt="" loading="lazy"/></p>
<p>Bolt.newä¹Ÿä¸é”™,ä½†é»˜è®¤çš„è®¾è®¡æ¨¡æ¿å¤ªç¨‹åºå‘˜å®¡ç¾äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b258c59c704547f59ffef5b571c32432~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=ZAeCAS%2BW7sC28mfFzsUKziSqyaE%3D" alt="" loading="lazy"/></p>
<p>Claude Codeæ­é…GLM4.7ä¸çŸ¥é“æå‡ºäº†ä¸ªä»€ä¹ˆç©æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f5af5a5afa643bca62f7bc8dcddeb29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=aevrZqGEqRQrwQsI5CzpHiQfJss%3D" alt="" loading="lazy"/></p>
<p>æœ€åè¯•äº†Lovable,ä¸€å¯¹æ¯”å°±å‘ç°äº†å·®è·â€”â€”å®ƒçš„UIæ›´ç¾è§‚,é»˜è®¤ç”Ÿæˆçš„ç•Œé¢å°±å¾ˆæœ‰è®¾è®¡æ„Ÿ,ä¸æ˜¯é‚£ç§"å·¥ç¨‹å¸ˆå®¡ç¾"ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e1680820c0448e0829378532e76c8b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=tH5HwrUE1XjNDv1xtnVTTZlzaS8%3D" alt="" loading="lazy"/></p>
<p>è¿™å°±æ˜¯æˆ‘é€‰Lovableçš„åŸå› :ç®€å•ç›´æ¥,å¥½çœ‹å°±å¤Ÿäº†ã€‚</p>
<p>å°±è¿™æ ·,å¤§æ¦‚ç”¨äº†2å°æ—¶,ä¸€ä¸ªèƒ½ç”¨çš„å¯¼èˆªé¡µåˆç‰ˆå°±å‡ºæ¥äº†ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆç”¨Claude Codeå’ŒCodex</h2>
<p>åˆç‰ˆèƒ½ç”¨,ä½†è¿˜ä¸å¤Ÿå¥½ã€‚</p>
<p>æ¯”å¦‚,å“åº”å¼å¸ƒå±€æœ‰é—®é¢˜,åœ¨æ‰‹æœºä¸Šæ‰“å¼€ä¼šä¹±æ‰ã€‚è¿˜æœ‰ä¸€äº›ç»†èŠ‚:é“¾æ¥ç‚¹å‡»åçš„é¢œè‰²ã€hoverçš„æ•ˆæœã€åˆ†ç±»çš„å±•å¼€æ”¶èµ·åŠ¨ç”»...è¿™äº›éƒ½éœ€è¦è°ƒæ•´ã€‚</p>
<p>è¿™æ—¶å€™å°±éœ€è¦Claude Codeå’ŒCodexäº†ã€‚</p>
<p>Claude Codeæˆ‘ä¹‹å‰å°±å¸¸ç”¨,å®ƒæ˜¯ä¸ªç»ˆç«¯AIåŠ©æ‰‹,èƒ½ç›´æ¥æ“ä½œä½ çš„ä»£ç åº“ã€‚æˆ‘å…ˆæŠŠLovableç”Ÿæˆçš„ä»£ç å¯¼å‡ºåˆ°æœ¬åœ°,ç„¶åç”¨Claude Codeæ‰“å¼€ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å’Œæˆ‘ä¹‹å‰ç”¨Cursoræœ‰ç‚¹åƒã€‚ä½†Claude Codeçš„ä¼˜åŠ¿åœ¨äº"é¡¹ç›®çº§ç†è§£"â€”â€”å®ƒä¸åªæ˜¯çœ‹å•ä¸ªæ–‡ä»¶,è€Œæ˜¯ç†è§£æ•´ä¸ªé¡¹ç›®çš„ç»“æ„,æ‰€ä»¥å®ƒèƒ½æ‰¾åˆ°ä¸€äº›éšè—åœ¨å¤šä¸ªæ–‡ä»¶ä¹‹é—´çš„å…³è”é—®é¢˜ã€‚</p>
<p>Codexçš„ä½œç”¨æ›´åå‘"ç»†èŠ‚æ‰“ç£¨"ã€‚æ¯”å¦‚æˆ‘æƒ³è¦ç»™æ¯ä¸ªç½‘ç«™é“¾æ¥åŠ ä¸Šfaviconå›¾æ ‡,è¿™ä¸ªéœ€æ±‚æ¯”è¾ƒçç¢,éœ€è¦é€ä¸ªå¤„ç†ã€‚</p>
<p>"å¸®æˆ‘ç»™æ‰€æœ‰å¤–éƒ¨é“¾æ¥åŠ ä¸Šè‡ªåŠ¨è·å–faviconçš„åŠŸèƒ½",æˆ‘å¯¹Codexè¯´ã€‚</p>
<p>Codexè‡ªåŠ¨åˆ†æäº†éœ€æ±‚,å†™äº†ä¸€æ®µJavaScriptä»£ç ,è°ƒç”¨Googleçš„favicon API,è‡ªåŠ¨ä¸ºæ¯ä¸ªé“¾æ¥è·å–å›¾æ ‡ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹å¤§æ¦‚èŠ±äº†3å°æ—¶,ä»åˆç‰ˆåˆ°ä¸€ä¸ª"çœ‹èµ·æ¥æŒºä¸“ä¸š"çš„å¯¼èˆªé¡µ,å°±å®Œæˆäº†ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆç”¨Supabase</h2>
<p>åšåˆ°è¿™ä¸€æ­¥,å¯¼èˆªé¡µå·²ç»èƒ½ç”¨äº†ã€‚ä½†æˆ‘è§‰å¾—è¿˜ç¼ºäº†ç‚¹ä»€ä¹ˆã€‚</p>
<p>æ—¢ç„¶æ˜¯è‡ªå·±ç”¨çš„å·¥å…·,èƒ½ä¸èƒ½åŠ ä¸Šç”¨æˆ·ç³»ç»Ÿ?è¿™æ ·æˆ‘å¯ä»¥åˆ†äº«ç»™æœ‹å‹,å¤§å®¶éƒ½å¯ä»¥æœ‰è‡ªå·±çš„æ”¶è—å¤¹ã€‚</p>
<p>åç«¯è¿™å—æˆ‘æ¯”è¾ƒç†Ÿ,æ‰€ä»¥ç¬¬ä¸€ååº”å°±æ˜¯éœ€è¦ä¸€ä¸ªæ•°æ®åº“å’Œç”¨æˆ·è®¤è¯ç³»ç»Ÿã€‚</p>
<p>ä¹‹å‰ç”¨è¿‡Firebase,ä½†é…ç½®èµ·æ¥æŒºéº»çƒ¦çš„ã€‚åæ¥å¬è¯´äº†Supabase,è¯´æ˜¯å¼€æºç‰ˆçš„Firebase,è€Œä¸”å’ŒAIå·¥å…·é›†æˆå¾—å¾ˆå¥½ã€‚</p>
<p>æ˜¥èŠ‚å‰é‚£å¤©ä¸‹åˆ,æˆ‘æ³¨å†Œäº†Supabase,åˆ›å»ºäº†ä¸€ä¸ªæ–°é¡¹ç›®ã€‚</p>
<p>ç„¶åæˆ‘ç”¨Claude Codeè¿æ¥äº†Supabaseçš„MCP:</p>
<p>"å¸®æˆ‘ä¸ºè¿™ä¸ªå¯¼èˆªé¡µæ·»åŠ ç™»å½•æ³¨å†ŒåŠŸèƒ½,ä½¿ç”¨é‚®ç®±å’Œå¯†ç è®¤è¯ã€‚"</p>
<p>Claude Codeè‡ªåŠ¨åˆ›å»ºäº†å¿…è¦çš„æ•°æ®åº“è¡¨,é…ç½®äº†è®¤è¯ç­–ç•¥,ç„¶åç”Ÿæˆäº†ç™»å½•å’Œæ³¨å†Œçš„å‰ç«¯ç»„ä»¶ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸åˆ°1å°æ—¶,ç™»å½•æ³¨å†ŒåŠŸèƒ½å°±æå®šäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cee24315fab4e769b1374c2c8d49c85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=UJ1EGMGfc5e1AQuNrGDoVQ0j1E4%3D" alt="" loading="lazy"/></p>
<p>è€Œä¸”Supabaseä¸ä»…åšäº†åŸºæœ¬çš„è®¤è¯,è¿˜è‡ªåŠ¨åŒ…å«äº†é‚®ç®±éªŒè¯ã€å¯†ç é‡ç½®è¿™äº›åŠŸèƒ½ã€‚è¿™äº›éƒ½æ˜¯ç°æˆçš„,æˆ‘ä¸ç”¨è‡ªå·±å†™ã€‚</p>
<p>è¿™æ—¶å€™æˆ‘çªç„¶æ„è¯†åˆ°,ä½œä¸ºä¸€ä¸ªåç«¯å¼€å‘,å¦‚æœæ˜¯ä¼ ç»Ÿå¼€å‘æ–¹å¼,å…‰æ˜¯ç”¨æˆ·è®¤è¯è¿™å—,è‡³å°‘è¦èŠ±å¤§åŠå¤©æ—¶é—´ã€‚ä½†ç°åœ¨ç”¨AI,1å°æ—¶å°±æå®šäº†ã€‚</p>
<h2 data-id="heading-3">2å¤©å®Œæˆä¸€ä¸ªå…¨æ ˆé¡¹ç›®</h2>
<p>æ•´ä¸ªé¡¹ç›®èŠ±äº†2å¤©ã€‚</p>
<p>ç¬¬ä¸€å¤©ç”¨Lovableåšåˆç‰ˆ,2å°æ—¶æå®šã€‚</p>
<p>ç¬¬äºŒå¤©ç”¨Claude Codeå’ŒCodexæ‰“ç£¨,3å°æ—¶;ç”¨SupabaseåŠ ç™»å½•æ³¨å†Œ,1å°æ—¶ã€‚</p>
<p>å‰©ä¸‹çš„æ—¶é—´ä¸»è¦æ˜¯æµ‹è¯•å’Œå¾®è°ƒã€‚</p>
<p>è€Œä¸”æ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰é‡åˆ°ä»€ä¹ˆå¤§å‘ã€‚</p>
<p>è¿™ä¸ªé€Ÿåº¦è®©æˆ‘æœ‰ç‚¹æ„å¤–ã€‚ä½œä¸ºä¸€ä¸ªåç«¯å¼€å‘,å¦‚æœè‡ªå·±ä»é›¶å­¦å‰ç«¯åšè¿™ä¸ªé¡¹ç›®,ä¿å®ˆä¼°è®¡ä¹Ÿè¦ä¸€å‘¨ã€‚è€Œä¸”åšå‡ºæ¥çš„æ•ˆæœè‚¯å®šä¸å¦‚ç°åœ¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abff23ab626b422a9f09e7c09354df22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=1OwnV%2B1%2FiSp7xd8hs8XVMLNsTtI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">æˆ‘å­¦åˆ°äº†ä»€ä¹ˆ</h2>
<p>è¿™ä¸ªé¡¹ç›®åšå®Œäº†,ä½†æˆ‘æœ€å¤§çš„æ”¶è·ä¸æ˜¯å¯¼èˆªé¡µæœ¬èº«,è€Œæ˜¯å¯¹AIæ—¶ä»£å¼€å‘æ¨¡å¼çš„æ€è€ƒã€‚</p>
<p>æŠ€æœ¯é—¨æ§›çœŸçš„é™ä½äº†ã€‚</p>
<p>æˆ‘ä»¥å‰è§‰å¾—,åšå…¨æ ˆå¼€å‘éœ€è¦æ‡‚å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ã€éƒ¨ç½²...è¿™äº›ä¸œè¥¿è¦å­¦å‡ å¹´ã€‚ä½†ç°åœ¨æœ‰äº†AIå·¥å…·,ä¸€ä¸ªåç«¯å¼€å‘ä¹Ÿèƒ½åœ¨ä¸¤å¤©å†…åšå‡ºä¸€ä¸ªåƒæ ·çš„å…¨æ ˆé¡¹ç›®ã€‚</p>
<p>è¿™ä¸æ˜¯è¯´æŠ€æœ¯çŸ¥è¯†ä¸é‡è¦äº†,è€Œæ˜¯è¯´,AIæŠŠå¾ˆå¤š"é‡å¤åŠ³åŠ¨"å’Œ"æ¨¡æ¿ä»£ç "éƒ½è‡ªåŠ¨åŒ–äº†ã€‚ä½ åªéœ€è¦æ‡‚æ ¸å¿ƒæ¦‚å¿µ,å‰©ä¸‹çš„äº¤ç»™AIã€‚</p>
<p>å·¥å…·çš„é€‰æ‹©ä¹Ÿå¾ˆé‡è¦ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®æˆ‘ç”¨äº†4ä¸ªAIå·¥å…·,æ¯ä¸ªå·¥å…·éƒ½æœ‰å®ƒæ“…é•¿çš„åœ°æ–¹:Lovableæ“…é•¿å¿«é€ŸåŸå‹,Claude Codeæ“…é•¿ä»£ç ç†è§£,Codexæ“…é•¿ç»†èŠ‚å¤„ç†,Supabaseæ“…é•¿åç«¯é›†æˆã€‚</p>
<p>æ²¡æœ‰å“ªä¸ªå·¥å…·æ˜¯ä¸‡èƒ½çš„,ä½†ç»„åˆèµ·æ¥å°±å¾ˆå¼ºå¤§ã€‚</p>
<p>ä½†æˆ‘ä¾ç„¶éœ€è¦æ‡‚æŠ€æœ¯ã€‚</p>
<p>è™½ç„¶AIå¸®æˆ‘å†™äº†å¤§éƒ¨åˆ†ä»£ç ,ä½†æˆ‘è¿˜æ˜¯å¾—çŸ¥é“ä»€ä¹ˆæ˜¯å“åº”å¼å¸ƒå±€,ä»€ä¹ˆæ˜¯JWTè®¤è¯,ä»€ä¹ˆæ˜¯æ•°æ®åº“è¡¨ç»“æ„ã€‚ä¸ç„¶æˆ‘è¿éœ€æ±‚éƒ½æè¿°ä¸æ¸…æ¥š,æ›´åˆ«è¯´éªŒè¯AIç”Ÿæˆçš„ä»£ç å¯¹ä¸å¯¹äº†ã€‚</p>
<p>AIä¸æ˜¯è®©å¼€å‘è€…å˜æ‡’,è€Œæ˜¯è®©å¼€å‘è€…æŠŠç²¾åŠ›èŠ±åœ¨æ›´é‡è¦çš„äº‹æƒ…ä¸Šã€‚</p>
<h2 data-id="heading-5">ç»™å…¶ä»–åç«¯å¼€å‘çš„å»ºè®®</h2>
<p>å¦‚æœä½ ä¹Ÿæ˜¯ä¸ªåç«¯å¼€å‘,æƒ³åšç‚¹å‰ç«¯ç›¸å…³çš„ä¸œè¥¿,æˆ‘æœ‰å‡ ä¸ªå»ºè®®â€”â€”</p>
<ol>
<li>
<p>ä»ç®€å•é¡¹ç›®å¼€å§‹ã€‚åˆ«ä¸€ä¸Šæ¥å°±åšå¤æ‚çš„SaaS,å…ˆåšäº›å·¥å…·ç±»ã€å±•ç¤ºç±»çš„å°é¡¹ç›®ã€‚</p>
</li>
<li>
<p>ç”¨å¥½å¯è§†åŒ–å·¥å…·ã€‚Lovableè¿™ç±»å·¥å…·èƒ½è®©ä½ å¿«é€Ÿçœ‹åˆ°ç»“æœ,å»ºç«‹ä¿¡å¿ƒã€‚</p>
</li>
<li>
<p>AIæ˜¯åŠ©æ‰‹,ä¸æ˜¯æ›¿ä»£ã€‚ä½ ä¾ç„¶éœ€è¦ç†è§£åŸºç¡€æ¦‚å¿µ,åªæ˜¯ä¸ç”¨æŠ ç»†èŠ‚äº†ã€‚</p>
</li>
<li>
<p>å¤šå°è¯•ä¸åŒçš„å·¥å…·ã€‚æ²¡æœ‰æœ€å¥½,åªæœ‰æœ€é€‚åˆä½ é¡¹ç›®çš„å·¥å…·ç»„åˆã€‚</p>
</li>
</ol>
<h2 data-id="heading-6">æœ€åè¯´ä¸€å¥</h2>
<p>åšè¿™ä¸ªå¯¼èˆªé¡µä¹‹å‰,æˆ‘ä»¥ä¸ºè‡ªå·±è¿™è¾ˆå­éƒ½ä¸ä¼šç¢°å‰ç«¯äº†ã€‚</p>
<p>ä½†ç°åœ¨å‘ç°,æœ‰äº†AI,åç«¯å¼€å‘ä¹Ÿèƒ½åšå…¨æ ˆé¡¹ç›®ã€‚è¿™ä¸æ˜¯è¯´æˆ‘ä¼šè½¬è¡Œåšå‰ç«¯,è€Œæ˜¯è¯´,æˆ‘çš„å¯èƒ½æ€§å˜å¤§äº†ã€‚</p>
<p>ä»¥åå†æƒ³åšä¸ªå°å·¥å…·,ä¸ç”¨å†"ç­‰æˆ‘å…ˆå­¦å­¦å‰ç«¯"äº†ã€‚ç›´æ¥å¼€å¹²,åæ­£æœ‰AIå¸®å¿™ã€‚</p>
<p>è¿™å¯èƒ½å°±æ˜¯AIæ—¶ä»£æœ€è®©æˆ‘å…´å¥‹çš„åœ°æ–¹â€”â€”æŠ€æœ¯é—¨æ§›é™ä½äº†,ä½†åˆ›é€ çš„é—¨æ§›åè€Œæ›´é«˜äº†,å› ä¸ºé™åˆ¶ä½ çš„ä¸æ˜¯æŠ€æœ¯èƒ½åŠ›,è€Œæ˜¯ä½ çš„æƒ³æ³•ã€‚</p>
<p>æ‰€ä»¥,åˆ«å†"ç­‰æˆ‘å­¦ä¼šäº†ä»€ä¹ˆ"æ‰å¼€å§‹åŠ¨æ‰‹ã€‚ç°åœ¨å°±å¯ä»¥å¼€å§‹äº†ã€‚</p>
<p><strong>ç›¸å…³é“¾æ¥</strong>:</p>
<ul>
<li>æˆ‘çš„å¯¼èˆªé¡µ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdh.huhage.fun%2F" target="_blank" title="https://dh.huhage.fun/" ref="nofollow noopener noreferrer">dh.huhage.fun/</a></li>
<li>Lovable: <a href="https://link.juejin.cn?target=https%3A%2F%2Flovable.dev%2F" target="_blank" title="https://lovable.dev/" ref="nofollow noopener noreferrer">lovable.dev/</a></li>
<li>Claude Code: <a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fcode" target="_blank" title="https://claude.ai/code" ref="nofollow noopener noreferrer">claude.ai/code</a></li>
<li>Supabase: <a href="https://link.juejin.cn?target=https%3A%2F%2Fsupabase.com%2F" target="_blank" title="https://supabase.com/" ref="nofollow noopener noreferrer">supabase.com/</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android SurfaceFlinger ç¬”è®°]]></title>    <link>https://juejin.cn/post/7605782093482770458</link>    <guid>https://juejin.cn/post/7605782093482770458</guid>    <pubDate>2026-02-13T02:19:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605782093482770458" data-draft-id="7605856048360980518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android SurfaceFlinger ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-13T02:19:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android SurfaceFlinger ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:19:23.000Z" title="Fri Feb 13 2026 02:19:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>SurfaceFlingerï¼ˆä»¥ä¸‹ç®€ç§°SFï¼‰ä¸ActivityManagerServiceï¼ˆAMSï¼‰æ˜¯Androidåº•å±‚åŒé›„ã€‚<strong>AMSç®¡çš„æ˜¯â€œè°æ´»ç€ã€è°æ­»å»ã€è°åœ¨å‰å°â€</strong>ï¼Œæ˜¯<strong>ç”Ÿå‘½å‘¨æœŸçš„CEO</strong>ï¼›<strong>SFç®¡çš„æ˜¯â€œè°ç”»äº†ä»€ä¹ˆã€æ€ä¹ˆæ‹¼æˆä¸€å¼ å›¾ã€ä½•æ—¶é€åˆ°å±å¹•â€</strong>ï¼Œæ˜¯<strong>è§†è§‰å‘ˆç°çš„æ€»å¯¼æ¼”</strong>ã€‚</p>
<p>å¦‚æœè¯´AMSæ˜¯Androidå¤šä»»åŠ¡çš„å¤§è„‘ï¼ŒSFå°±æ˜¯Androidå›¾å½¢ç³»ç»Ÿçš„<strong>å¿ƒè„</strong>ã€‚å®ƒä¸ç”Ÿäº§åƒç´ ï¼ˆåº”ç”¨æ‰æ˜¯ç”Ÿäº§è€…ï¼‰ï¼Œä½†å®ƒå†³å®šæ¯ä¸€å¸§åƒç´ å¦‚ä½•<strong>æœ€ç»ˆå‡ºç°åœ¨ä½ çœ¼å‰</strong>ã€‚ä»¥ä¸‹ä»å…­ä¸ªç»´åº¦å½»åº•æ‹†è§£SFã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒå®šä½ï¼šSFåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>SurfaceFlingeræ˜¯ä¸€ä¸ª<strong>ç³»ç»Ÿçº§æœåŠ¡</strong>ï¼Œè¿è¡Œåœ¨<code>system_server</code>è¿›ç¨‹ï¼ŒèŒè´£æåº¦èšç„¦ï¼š<strong>æ¥æ”¶æ‰€æœ‰åº”ç”¨å’Œç³»ç»Ÿçš„å›¾å½¢ç¼“å†²åŒºï¼ˆBufferï¼‰ï¼ŒæŒ‰Zè½´é¡ºåºã€é€æ˜åº¦ã€è£å‰ªåŒºåŸŸç­‰å±æ€§åˆæˆï¼Œé€šè¿‡ç¡¬ä»¶æ˜¾ç¤ºåˆ°å±å¹•</strong> ã€‚</p>
<p><strong>å…³é”®è®¤çŸ¥</strong>ï¼šSFæœ¬èº«<strong>ä¸åšç»˜åˆ¶</strong>ï¼ˆDrawï¼‰ã€‚åº”ç”¨çš„<code>onDraw()</code>ã€OpenGLæ¸²æŸ“ã€è§†é¢‘è§£ç è¾“å‡ºâ€”â€”è¿™äº›éƒ½å‘ç”Ÿåœ¨åº”ç”¨è¿›ç¨‹ã€‚SFåªåš<strong>åˆæˆ</strong>ï¼ˆComposeï¼‰ã€‚</p>
<p><strong>ä¸€å¥è¯å®šæ€§</strong>ï¼šSFæ˜¯Androidçš„<strong>å›¾å½¢æ··åˆå™¨</strong>å’Œ<strong>æ˜¾ç¤ºè°ƒåº¦ä¸­å¿ƒ</strong>ã€‚</p>
<h2 data-id="heading-1">äºŒã€SFä¸AMSçš„â€œåŒæ ¸å…³ç³»â€</h2>
<p>ç†è§£SFå¿…é¡»æ”¾åœ¨Androidæ•´ä½“æ¶æ„ä¸­ã€‚AMSå’ŒSFæ˜¯SystemServerä¸­<strong>è€¦åˆæœ€æ·±</strong>çš„ä¸¤ä¸ªæœåŠ¡ï¼š</p>



































<table><thead><tr><th>ç»´åº¦</th><th>ActivityManagerService (AMS)</th><th>SurfaceFlinger (SF)</th></tr></thead><tbody><tr><td><strong>ç®¡ç†å¯¹è±¡</strong></td><td>å››å¤§ç»„ä»¶ã€è¿›ç¨‹ã€ä»»åŠ¡æ ˆ</td><td>Surface/Layerã€å›¾å½¢ç¼“å†²åŒºã€æ˜¾ç¤ºè®¾å¤‡</td></tr><tr><td><strong>æ ¸å¿ƒé—®é¢˜</strong></td><td>è°åº”è¯¥åœ¨å‰å°ï¼Ÿå“ªä¸ªè¿›ç¨‹æ´»ç€ï¼Ÿ</td><td>è¿™å—Bufferæ˜¯è°çš„ï¼Ÿæ€ä¹ˆå ï¼Ÿä½•æ—¶é€æ˜¾ï¼Ÿ</td></tr><tr><td><strong>è§¦å‘ä¿¡å·</strong></td><td>Intentã€æŒ‰é”®ã€ç³»ç»Ÿäº‹ä»¶</td><td><strong>VSyncä¸­æ–­</strong>ï¼ˆç¡¬ä»¶æ—¶é’Ÿï¼‰</td></tr><tr><td><strong>é€šä¿¡å¯¹è±¡</strong></td><td>åº”ç”¨ä¸»çº¿ç¨‹ï¼ˆActivityThreadï¼‰</td><td>åº”ç”¨æ¸²æŸ“çº¿ç¨‹ï¼ˆRenderThreadï¼‰æˆ–ViewRootImpl</td></tr><tr><td><strong>çº½å¸¦</strong></td><td><strong>WindowManagerService (WMS)</strong> â€”â€” AMSé€šçŸ¥WMSçª—å£ç„¦ç‚¹å˜åŒ–ï¼›WMSé€šè¿‡<code>relayoutWindow()</code>ä¸SFäº¤äº’ï¼Œåˆ›å»º/æ›´æ–°Surface</td><td/></tr></tbody></table>
<p><strong>æ ¸å¿ƒç»“è®º</strong>ï¼š<strong>AMSå†³å®šâ€œæ¼”ä»€ä¹ˆâ€ï¼ŒWMSå†³å®šâ€œæ€ä¹ˆæ‘†â€ï¼ŒSFå†³å®šâ€œæ€ä¹ˆæ‹¼ã€ä½•æ—¶æ”¾â€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€SFçš„ä¸‰å¤§æ ¸å¿ƒæ”¯æŸ±</h2>
<p>è¦å½»åº•ç†è§£SFï¼Œå¿…é¡»å•ƒä¸‹ä¸‰å—ç¡¬éª¨å¤´ï¼š<strong>Bufferç®¡ç†æ¶æ„</strong>ã€<strong>åˆæˆç­–ç•¥ï¼ˆGPU/HWCï¼‰</strong>ã€<strong>VSyncé©±åŠ¨æ¨¡å‹</strong>ã€‚</p>
<h3 data-id="heading-3">1. æ¶æ„åŸºçŸ³ï¼šBufferQueueä¸ç”Ÿäº§-æ¶ˆè´¹æ¨¡å‹</h3>
<p>è¿™æ˜¯Androidå›¾å½¢ç³»ç»Ÿ<strong>æœ€ä¼˜é›…çš„è®¾è®¡</strong>ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚å®ƒå®ç°äº†<strong>æ— æ‹·è´ã€è·¨è¿›ç¨‹ã€å¼‚æ­¥</strong>çš„ç¼“å†²åŒºæµè½¬ ã€‚</p>
<h4 data-id="heading-4">1.1 æ ¸å¿ƒè§’è‰²</h4>
<ul>
<li><strong>ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong>ï¼šåº”ç”¨è¿›ç¨‹ï¼ˆUIçº¿ç¨‹/RenderThreadã€Cameraã€è§†é¢‘è§£ç å™¨ï¼‰ã€‚è°ƒç”¨<code>dequeueBuffer()</code>è·å–ç©ºé—²Bufferï¼Œå¡«å……æ•°æ®ï¼Œ<code>queueBuffer()</code>å½’è¿˜ã€‚</li>
<li><strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong>ï¼šSurfaceFlingerã€‚è°ƒç”¨<code>acquireBuffer()</code>è·å–å·²å°±ç»ªçš„Bufferï¼Œåˆæˆå<code>releaseBuffer()</code>é‡Šæ”¾ã€‚</li>
<li><strong>ç¼“å†²åŒºé˜Ÿåˆ—ï¼ˆBufferQueueï¼‰</strong>ï¼šåœ¨<strong>SFè¿›ç¨‹</strong>åˆ›å»ºï¼Œ<strong>Bufferæœ¬èº«æ˜¯å…±äº«å†…å­˜ï¼ˆGraphicBufferï¼‰</strong>ï¼Œé€šè¿‡Binderä¼ é€’æ–‡ä»¶æè¿°ç¬¦å®ç°é›¶æ‹·è´è·¨è¿›ç¨‹ä¼ é€’ ã€‚</li>
</ul>
<h4 data-id="heading-5">1.2 Bufferçš„å››ç§ç”Ÿå‘½çŠ¶æ€ï¼ˆé“å¾‹ï¼‰</h4>
<ul>
<li><strong>FREEï¼ˆç©ºé—²ï¼‰</strong>ï¼šé˜Ÿåˆ—ä¸­æ— äººä½¿ç”¨ã€‚ç”Ÿäº§è€…å¯<code>dequeue</code>ã€‚</li>
<li><strong>DEQUEUEDï¼ˆå‡ºåˆ—ï¼‰</strong>ï¼šç”Ÿäº§è€…æ­£åœ¨å¡«å……æ•°æ®ï¼ˆå¦‚æ‰§è¡Œ<code>onDraw()</code>ï¼‰ã€‚</li>
<li><strong>QUEUEDï¼ˆå…¥åˆ—ï¼‰</strong>ï¼šç”Ÿäº§è€…å®Œæˆç»˜åˆ¶ï¼Œç­‰å¾…SFæ¶ˆè´¹ã€‚</li>
<li><strong>ACQUIREDï¼ˆè·å–ï¼‰</strong>ï¼šSFæ­£åœ¨åˆæˆè¿™ä¸€å¸§ã€‚</li>
</ul>
<p><strong>è¿™æ˜¯SFè°ƒåº¦çš„æœ€å°å•å…ƒã€‚æ¯ä¸€å¸§éƒ½æ˜¯è¿™å››ä¸ªçŠ¶æ€çš„å¾ªç¯ã€‚</strong></p>
<h4 data-id="heading-6">1.3 Surfaceä¸Layerçš„â€œçš®è‚‰å…³ç³»â€</h4>
<ul>
<li><strong>Surfaceï¼ˆçš®ï¼‰</strong>ï¼šåº”ç”¨ä¾§çœ‹åˆ°çš„â€œç”»å¸ƒâ€ï¼Œæœ¬è´¨æ˜¯<code>IGraphicBufferProducer</code>çš„ä»£ç†ã€‚åº”ç”¨é€šè¿‡å®ƒ<code>lockCanvas()</code>æˆ–<code>eglSwapBuffers()</code>è§¦å‘Bufferæµè½¬ã€‚</li>
<li><strong>Layerï¼ˆè‚‰ï¼‰</strong>ï¼šSFä¾§çš„â€œçª—å£ä»£è¡¨â€ã€‚<strong>æ¯ä¸ªSurfaceåœ¨SFå†…éƒ¨å¯¹åº”ä¸€ä¸ªLayerå¯¹è±¡</strong>ï¼Œè®°å½•Z-orderã€é€æ˜åº¦ã€æ˜¾ç¤ºåŒºåŸŸç­‰å…ƒæ•°æ®ã€‚</li>
<li><strong>åˆ›å»ºæ—¶æœº</strong>ï¼šWMSè°ƒç”¨<code>relayoutWindow()</code> -&gt; SFåˆ›å»ºLayer -&gt; å°†BufferProducer Binderè¿”å›ç»™åº”ç”¨ -&gt; åº”ç”¨æ„å»ºSurfaceã€‚</li>
</ul>
<p><strong>è¿™å°±æ˜¯çª—å£ç³»ç»Ÿè·¨è¿›ç¨‹çš„å®Œæ•´æ¡æ‰‹</strong> ã€‚</p>
<h3 data-id="heading-7">2. åˆæˆå¼•æ“ï¼šGPUåˆæˆ vs. ç¡¬ä»¶åˆæˆï¼ˆHWCï¼‰</h3>
<p>SFæ”¶åˆ°å„Layerçš„Bufferåï¼Œå¿…é¡»æŠŠå®ƒä»¬â€œæ‹¼â€æˆä¸€å¼ å®Œæ•´çš„å±å¹•å›¾åƒã€‚æ€ä¹ˆæ‹¼ï¼Ÿ<strong>ä¸¤ç§æ¨¡å¼ï¼ŒåŠ¨æ€åˆ‡æ¢</strong> ã€‚</p>
<h4 data-id="heading-8">2.1 GPUåˆæˆï¼ˆOpenGLåˆæˆï¼‰</h4>
<ul>
<li><strong>æ–¹å¼</strong>ï¼šå°†æ‰€æœ‰Layerçš„Bufferä½œä¸ºçº¹ç†ä¸Šä¼ GPUï¼Œé€šè¿‡OpenGLç»˜åˆ¶åˆ°ä¸€ä¸ªç›®æ ‡FBOï¼ˆå¸§ç¼“å†²å¯¹è±¡ï¼‰ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæå…¶çµæ´»ï¼Œä»»æ„å±‚æ•°ã€ä»»æ„å½¢çŠ¶ã€ä»»æ„æ··åˆæ•ˆæœã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šè€—ç”µã€å¸¦å®½å ç”¨é«˜ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šç•Œé¢å¤æ‚ï¼ˆå¤šçª—å£ï¼‰ã€åŠ¨ç”»æ•ˆæœã€æ— æ³•è¢«HWCå¤„ç†çš„å›¾å±‚ã€‚</li>
</ul>
<h4 data-id="heading-9">2.2 ç¡¬ä»¶åˆæˆï¼ˆHWCï¼ŒHardware Composerï¼‰</h4>
<ul>
<li><strong>æ–¹å¼</strong>ï¼šå°†Layerä¿¡æ¯ï¼ˆBufferå¥æŸ„ã€ä½ç½®ã€Z-orderï¼‰æ‰“åŒ…å‘ç»™æ˜¾ç¤ºç¡¬ä»¶ï¼Œ<strong>ç”±æ˜¾ç¤ºæ§åˆ¶å™¨ï¼ˆDisplay Controllerï¼‰ç¡¬ä»¶å®Œæˆå åŠ </strong>ï¼ŒSFå®Œå…¨ä¸ç¢°åƒç´ æ•°æ® ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå‡ ä¹é›¶åŠŸè€—ã€æä½å»¶è¿Ÿã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šç¡¬ä»¶å å›¾å±‚æ•°æœ‰é™ï¼ˆé€šå¸¸4-8å±‚ï¼‰ï¼Œè¶…å‡ºéƒ¨åˆ†å¿…é¡»ç”±GPUåˆæˆã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šçŠ¶æ€æ ã€å¯¼èˆªæ ã€è§†é¢‘å…¨å±å±‚æ•°å°‘çš„åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-10">2.3 HWC HALå¥‘çº¦</h4>
<p>SFé€šè¿‡HALå±‚ä¸ç¡¬ä»¶é©±åŠ¨äº¤äº’ã€‚æ ¸å¿ƒå¥‘çº¦ï¼š</p>
<ul>
<li><code>prepare()</code>ï¼šSFå‘Šè¯‰HWCâ€œæˆ‘æœ‰è¿™äº›Layerï¼Œä½ èƒ½ç¡¬ä»¶åˆæˆå“ªäº›ï¼Ÿâ€</li>
<li><code>set()</code>ï¼šSFæŠŠéœ€è¦ç¡¬ä»¶åˆæˆçš„Layer Bufferå¥æŸ„ä¼ ç»™HWCï¼›éœ€è¦GPUåˆæˆçš„éƒ¨åˆ†ï¼ŒSFè‡ªå·±ç”»å¥½å†ä¼ ç»™HWCä½œä¸º<strong>å¸§ç¼“å†²åŒºï¼ˆFramebufferï¼‰</strong>ã€‚</li>
<li><strong>Fenceæœºåˆ¶</strong>ï¼šä¸ºäº†ç²¾ç¡®åŒæ­¥ï¼ŒBufferçš„è®¿é—®æƒé€šè¿‡åŒæ­¥æ …æ ï¼ˆFence FDï¼‰ä¼ é€’ï¼Œé¿å…CPU/GPU/æ˜¾ç¤ºæ§åˆ¶å™¨äº’ç›¸è¸©å†…å­˜ ã€‚</li>
</ul>
<h3 data-id="heading-11">3. èŠ‚æ‹å™¨ï¼šVSyncé©±åŠ¨æ¨¡å‹</h3>
<p><strong>å¦‚æœæ²¡æœ‰VSyncï¼ŒSFå°±æ˜¯ä¸€ç›˜æ•£æ²™ã€‚</strong> Android 4.1ï¼ˆJelly Beanï¼‰å¼•å…¥VSyncå’ŒProject Butterï¼Œè¿™æ˜¯SFè°ƒåº¦æ¨¡å‹çš„é©å‘½ ã€‚</p>
<h4 data-id="heading-12">3.1 ç¡¬ä»¶èŠ‚æ‹</h4>
<p>å±å¹•ä»¥å›ºå®šé¢‘ç‡åˆ·æ–°ï¼ˆé€šå¸¸æ˜¯60Hzï¼Œå³æ¯16.6msä¸€å¸§ï¼‰ã€‚ç¡¬ä»¶åœ¨æ¯æ¬¡åˆ·æ–°å‰ä¼šäº§ç”Ÿ<strong>å‚ç›´åŒæ­¥ä¸­æ–­ï¼ˆVSyncï¼‰</strong>ã€‚SFçš„å·¥ä½œå°±æ˜¯<strong>å¡åœ¨è¿™ä¸ªä¸­æ–­ç‚¹ä¸Šè¿›è¡Œåˆæˆ</strong>ï¼Œæœç»â€œæ’•è£‚â€ï¼ˆTearingï¼‰ ã€‚</p>
<h4 data-id="heading-13">3.2 ä¸¤æ¡VSyncçº¿</h4>
<p>SFå†…éƒ¨ç»´æŠ¤<strong>ä¸¤ä¸ªç‹¬ç«‹çš„VSyncåˆ†å‘é€šé“</strong>ï¼š</p>
<ol>
<li><strong>VSync-app</strong>ï¼šåˆ†å‘ç»™åº”ç”¨ã€‚Choreographerç›‘å¬æ­¤ä¿¡å·ï¼Œè§¦å‘åº”ç”¨å¼€å§‹å¸ƒå±€ã€ç»˜åˆ¶ã€<code>dequeueBuffer</code>ã€‚</li>
<li><strong>VSync-sf</strong>ï¼šåˆ†å‘ç»™SFè‡ªå·±ã€‚SFç›‘å¬æ­¤ä¿¡å·ï¼Œå¼€å§‹åˆæˆã€<code>acquireBuffer</code>ã€è°ƒç”¨HWCã€‚</li>
</ol>
<p><strong>åç§»é‡ï¼ˆOffsetï¼‰</strong>ï¼šVSync-appé€šå¸¸æ¯”VSync-sf<strong>æå‰å‡ æ¯«ç§’</strong>ã€‚è¿™æ ·åº”ç”¨ç”»å®ŒBufferå…¥é˜Ÿæ—¶ï¼ŒSFåˆšå¥½å¼€å§‹åˆæˆï¼Œ<strong>æµæ°´çº¿æœ€å¤§åŒ–</strong>ã€‚</p>
<h4 data-id="heading-14">3.3 è½¯ä»¶VSyncé¢„æµ‹</h4>
<p>ä¸ºäº†å‡å°‘å¯¹ç¡¬ä»¶ä¸­æ–­çš„ä¾èµ–ï¼ŒSFç»´æŠ¤ä¸€ä¸ª<strong>è½¯ä»¶VSyncé¢„æµ‹æ¨¡å‹</strong>ã€‚<code>VSyncPredictor</code>æ ¹æ®å†å²é‡‡æ ·è®¡ç®—ä¸‹ä¸€æ¬¡ä¸­æ–­æ—¶é—´ï¼Œ<code>VSyncDispatchTimerQueue</code>è´Ÿè´£å®šæ—¶å›è°ƒã€‚è¿™å¥—æœºåˆ¶ä¿è¯äº†å³ä½¿ç¡¬ä»¶æš‚æ—¶ä¸ç¨³å®šï¼ŒUIä¾ç„¶æµç•… ã€‚</p>
<hr/>
<h2 data-id="heading-15">å››ã€ä¸€æ¬¡å®Œæ•´çš„æ¸²æŸ“åˆæˆé—­ç¯ï¼ˆå…­æ­¥æ³•ï¼‰</h2>
<p>æŠŠä»¥ä¸Šç»„ä»¶ä¸²èµ·æ¥ï¼Œçœ‹ä¸€ä¸ªå…¸å‹å¸§çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p><strong>Step 1ï¼šç¡¬ä»¶å¿ƒè·³ï¼ˆVSync-appï¼‰</strong>
å±å¹•å‘å‡ºVSyncä¸­æ–­ -&gt; HWC HALæ•è· -&gt; SFçš„<code>EventThread</code>å”¤é†’ -&gt; é€šè¿‡<code>BitTube</code>è·¨è¿›ç¨‹é€šçŸ¥åº”ç”¨çš„<code>Choreographer</code> ã€‚</p>
<p><strong>Step 2ï¼šåº”ç”¨ç”Ÿäº§ï¼ˆä¸»çº¿ç¨‹+RenderThreadï¼‰</strong>
åº”ç”¨æ”¶åˆ°VSync-appï¼Œæ‰§è¡Œ<code>doTraversal()</code> -&gt; æµ‹é‡ã€å¸ƒå±€ã€ç»˜åˆ¶ -&gt; <strong>DisplayListè½¬OpenGLå‘½ä»¤</strong> -&gt; <code>eglSwapBuffers()</code>è§¦å‘ï¼š</p>
<ul>
<li><code>dequeueBuffer</code>ï¼šä»BufferQueueå–ç©ºé—²Bufferã€‚</li>
<li>GPUæ¸²æŸ“å¡«å……ã€‚</li>
<li><code>queueBuffer</code>ï¼šBufferå…¥é˜Ÿï¼ŒçŠ¶æ€ç½®ä¸ºQUEUEDï¼Œé€šè¿‡Binderå›è°ƒSFçš„<code>onFrameAvailable()</code>ï¼Œæ ‡è®°<code>mQueuedFrames++</code> ã€‚</li>
</ul>
<p><strong>Step 3ï¼šSFå”¤é†’ï¼ˆVSync-sfï¼‰</strong>
ç¡¬ä»¶å‘å‡ºVSync-sfï¼ˆæˆ–è½¯ä»¶å®šæ—¶è§¦å‘ï¼‰-&gt; SF MessageQueueæ”¶åˆ°æ¶ˆæ¯ -&gt; æ‰§è¡Œ<code>onMessageInvalidate()</code> -&gt; æ­£å¼å¯åŠ¨åˆæˆæµæ°´çº¿ ã€‚</p>
<p><strong>Step 4ï¼šå‡†å¤‡é˜¶æ®µï¼ˆPreComposition &amp; latchBufferï¼‰</strong></p>
<ul>
<li><code>preComposition()</code>ï¼šéå†æ‰€æœ‰Layerï¼Œæ£€æŸ¥<code>mQueuedFrames &gt; 0</code>ï¼Œæ ‡è®°éœ€è¦åˆ·æ–°çš„Layerã€‚</li>
<li><code>latchBuffer()</code>ï¼šå¯¹æ ‡è®°çš„Layerè°ƒç”¨<code>acquireBuffer()</code>ï¼Œæ‹¿åˆ°åº”ç”¨åˆšåˆšç”»å¥½çš„GraphicBufferï¼Œ<strong>æ‰€æœ‰æƒä»åº”ç”¨è½¬ç»™SF</strong> ã€‚</li>
</ul>
<p><strong>Step 5ï¼šåˆæˆå†³ç­–ï¼ˆhandleTransaction &amp; rebuildLayerStacks &amp; setUpHWComposerï¼‰</strong></p>
<ul>
<li><code>handleTransaction</code>ï¼šå¤„ç†çª—å£å¤§å°ã€ä½ç½®ã€Zè½´å˜åŒ– ã€‚</li>
<li><code>rebuildLayerStacks</code>ï¼šæŒ‰Zè½´æ’åºå½“å‰å±å¹•å¯è§Layerï¼Œè®¡ç®—æ¯ä¸ªLayerçš„è„åŒºåŸŸã€å¯è§åŒºåŸŸã€‚</li>
<li><code>setUpHWComposer</code>ï¼šè°ƒç”¨HWC <code>prepare()</code>ï¼Œ<strong>å†³ç­–å“ªäº›Layerç”¨ç¡¬ä»¶å ï¼Œå“ªäº›ç”¨GPUåˆæˆ</strong> ã€‚</li>
</ul>
<p><strong>Step 6ï¼šæ‰§è¡Œä¸é€æ˜¾ï¼ˆdoComposition &amp; postCompositionï¼‰</strong></p>
<ul>
<li>GPUåˆæˆéƒ¨åˆ†ï¼šSFé€šè¿‡OpenGLå°†é€‰ä¸­çš„Layerç»˜åˆ¶åˆ°ç›®æ ‡FBOã€‚</li>
<li>è°ƒç”¨HWC <code>set()</code>ï¼šå°†GPUåˆæˆç»“æœï¼ˆFramebufferï¼‰å’Œç¡¬ä»¶åˆæˆLayerçš„Bufferå¥æŸ„ä¸€å¹¶äº¤ç»™é©±åŠ¨ã€‚</li>
<li><strong>é‡Šæ”¾Fence</strong>ï¼šé€šçŸ¥åº”ç”¨ä¾§â€œBufferå·²è¢«æ¶ˆè´¹ï¼Œå¯ä»¥ç»§ç»­ç”»ä¸‹ä¸€å¸§â€ã€‚<code>releaseBuffer()</code> -&gt; BufferçŠ¶æ€å›FREEã€‚</li>
<li>å±å¹•åˆ·æ–°æ˜¾ç¤ºæ–°å¸§ã€‚</li>
</ul>
<p><strong>è‡³æ­¤ï¼Œä¸€å¸§ç»“æŸã€‚ä¸‹ä¸€å¸§ç”±ä¸‹ä¸€ä¸ªVSyncè§¦å‘ã€‚</strong> 16.6mså€’è®¡æ—¶é‡æ–°å¼€å§‹ã€‚</p>
<hr/>
<h2 data-id="heading-16">äº”ã€æ¶æ„æ¼”è¿›ï¼šä»ç¡¬ç¼–ç åˆ°é«˜åº¦æŠ½è±¡</h2>
<p>SFçš„æ¶æ„å¹¶éä¸€æˆä¸å˜ã€‚ç†è§£æ¼”è¿›å²æœ‰åŠ©äºè¯»æ‡‚è€ä»£ç ã€‚</p>








































<table><thead><tr><th>æ—¶æœŸ</th><th>å…³é”®å˜åŒ–</th><th>æŠ€æœ¯é©±åŠ¨</th></tr></thead><tbody><tr><td><strong>Android 1.x-4.0</strong></td><td>å•ç¼“å†²ã€CPUåˆæˆä¸ºä¸»</td><td>ç¡¬ä»¶å¼±ï¼ŒåŠŸèƒ½ç®€å•</td></tr><tr><td><strong>Android 4.1</strong></td><td><strong>Project Butter</strong>ï¼šå¼•å…¥VSyncã€ä¸‰ç¼“å†²ã€Choreographer</td><td>è§£å†³å¡é¡¿ã€æ‰å¸§</td></tr><tr><td><strong>Android 5.0</strong></td><td><strong>RenderThread</strong>ï¼šå°†ä¸»çº¿ç¨‹çš„OpenGLæ“ä½œç§»åˆ°å•ç‹¬çº¿ç¨‹</td><td>å‡å°‘ä¸»çº¿ç¨‹è´Ÿè½½ï¼Œæé«˜å“åº”</td></tr><tr><td><strong>Android 7.0</strong></td><td><strong>SurfaceViewåŒæ­¥ä¼˜åŒ–</strong>ã€HWC 2.0æ”¯æŒ</td><td>é…åˆVRã€å¤šå±æ˜¾ç¤º</td></tr><tr><td><strong>Android 8.x+</strong></td><td><strong>Treble</strong>ï¼šHALå±‚ç¨³å®šåŒ–ï¼›<strong>AIDLåŒ–</strong>ï¼ˆç±»ä¼¼AMSï¼‰</td><td>è§£è€¦Frameworkä¸å‚å•†å®ç°</td></tr><tr><td><strong>Android 12+</strong></td><td>å¯å˜åˆ·æ–°ç‡ï¼ˆVRRï¼‰ã€æ¸¸æˆæ¨¡å¼æ’å¸§</td><td>é«˜åˆ·å±æ™®åŠï¼Œè¿½æ±‚èƒ½æ•ˆæ¯”</td></tr></tbody></table>
<p><strong>å½“å‰è¶‹åŠ¿</strong>ï¼šSFè¶Šæ¥è¶Šåƒä¸€ä¸ª<strong>ç­–ç•¥åˆ†å‘å™¨</strong>ï¼Œå°†å…·ä½“åˆæˆå·¥ä½œä¸‹æ”¾ç»™HWCï¼Œè‡ªå·±ä¸“æ³¨äºçŠ¶æ€è·Ÿè¸ªå’ŒVSyncè°ƒåº¦ã€‚</p>
<hr/>
<h2 data-id="heading-17">å…­ã€å¼€å‘å±‚é¢çš„å¯ç¤ºï¼ˆå®æˆ˜ä»·å€¼ï¼‰</h2>
<p>ç†è§£äº†SFï¼Œä½ åœ¨åº”ç”¨å¼€å‘ä¸­çš„å¾ˆå¤šâ€œç„å­¦â€é—®é¢˜éƒ½ä¼šæœ‰æ ¹æœ¬æ€§è®¤çŸ¥ï¼š</p>
<p><strong>1. ä¸ºä»€ä¹ˆè¯´â€œä¸¢å¸§â€æœ¬è´¨æ˜¯SFæ²¡ç­‰åˆ°Bufferï¼Ÿ</strong></p>
<blockquote>
<p>å¦‚æœåº”ç”¨ä¸»çº¿ç¨‹å¡é¡¿ï¼ˆGCã€å¤æ‚å¸ƒå±€ï¼‰ï¼Œ<code>queueBuffer</code>å»¶è¿Ÿï¼ŒVSync-sfåˆ°æ¥æ—¶SFæ— æ–°å¸§å¯ç”¨ï¼Œ<strong>å±å¹•å¿…é¡»é‡å¤æ˜¾ç¤ºä¸Šä¸€å¸§</strong>ï¼Œè¿™å°±æ˜¯æ‰å¸§ï¼ˆJankï¼‰ã€‚</p>
</blockquote>
<p><strong>2. ä¸ºä»€ä¹ˆSurfaceViewæ’­æ”¾è§†é¢‘ä¸å¡UIï¼Ÿ</strong></p>
<blockquote>
<p>SurfaceViewæ‹¥æœ‰<strong>ç‹¬ç«‹çš„Surface</strong>ï¼Œå…¶BufferQueueç›´æ¥å…¥é˜ŸSFï¼Œ<strong>ä¸ç»è¿‡Viewå±‚çº§</strong>ï¼Œç»•è¿‡ä¸»çº¿ç¨‹å¤æ‚ç»˜åˆ¶é€»è¾‘ï¼ŒåŒæ—¶å¸¸é…HWCç¡¬ä»¶å å±‚ï¼Œæ•ˆç‡æé«˜ ã€‚</p>
</blockquote>
<p><strong>3. ä¸ºä»€ä¹ˆåŠ¨ç”»å¡é¡¿ä¼˜å…ˆæ€€ç–‘CPU/GPUï¼Œä½†æœ‰æ—¶æ˜¯SFè´Ÿè½½é«˜ï¼Ÿ</strong></p>
<blockquote>
<p>SFè™½ç„¶æ˜¯åˆæˆè€…ï¼Œä½†<strong>GPUåˆæˆéå¸¸è€—èµ„æº</strong>ã€‚å¦‚æœZè½´å±‚æ•°å¤ªå¤šã€HWCå å±‚ç”¨æ»¡ï¼ŒSFå›é€€GPUåˆæˆï¼Œå¯èƒ½é€ æˆGPUè¿‡è½½ã€SFä¸»çº¿ç¨‹è¶…æ—¶16.6msï¼Œå¯¼è‡´ä¸‹ä¸€å¸§å»¶è¿Ÿã€‚</p>
</blockquote>
<p><strong>4. ä¸ºä»€ä¹ˆåå°è¿›ç¨‹å¯èƒ½å½±å“å‰å°æµç•…åº¦ï¼Ÿ</strong></p>
<blockquote>
<p>SFçš„Layeråˆ—è¡¨åŒ…å«<strong>æ‰€æœ‰å¯è§/ä¸å¯è§çª—å£</strong>ã€‚åå°åº”ç”¨è‹¥æŒæœ‰çª—å£ï¼ˆå¦‚æ— ç•Œé¢çš„<code>WindowManager</code>æ‚¬æµ®çª—ï¼‰ï¼Œå…¶BufferQueueå³ä½¿æ— æ–°å¸§ï¼ŒLayerä»åœ¨åˆ—è¡¨ä¸­ã€‚æç«¯æƒ…å†µä¸‹å¤§é‡Layerå¯¼è‡´SF <code>rebuildLayerStacks</code>è€—æ—¶è¶…æ ‡ã€‚</p>
</blockquote>
<p><strong>5. ç»ˆæè°ƒè¯•å·¥å…·</strong></p>
<blockquote>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys SurfaceFlinger
</code></pre>
<p>è¿™æ˜¯SFçš„<strong>æ ¸ç£å…±æŒ¯æŠ¥å‘Š</strong>ï¼Œèƒ½æŸ¥çœ‹æ¯ä¸€å±‚çš„Bufferç”³è¯·è®°å½•ã€æ‰å¸§ç»Ÿè®¡ã€HWCåˆæˆç­–ç•¥ã€GPUåˆæˆæ—¶é—´ã€‚<strong>åˆ†æå¡é¡¿çš„ç¬¬ä¸€ç°åœº</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-18">ç»“è¯­</h2>
<p>SurfaceFlingerå’ŒActivityManagerServiceæ˜¯Androidåº•å±‚æ¶æ„çš„<strong>é˜´é˜³ä¸¤é¢</strong>ã€‚AMSç»´ç³»ç€åº”ç”¨ä¸–ç•Œçš„â€œå­˜åœ¨ä¸æ—¶é—´â€ï¼ŒSFç»´ç³»ç€åƒç´ ä¸–ç•Œçš„â€œç©ºé—´ä¸æµåŠ¨â€ã€‚</p>
<p>æŠŠAMSå’ŒSFæ”¾åœ¨ä¸€èµ·ç†è§£ï¼Œä½ ä¼šå‘ç°Androidæ ¹æœ¬ä¸æ˜¯ä¸€ä¸ªâ€œå•è¿›ç¨‹UIåº“â€ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>åˆ†å¸ƒå¼ã€äº‹ä»¶é©±åŠ¨ã€ç¡¬ä»¶æ„ŸçŸ¥çš„å®æ—¶ç³»ç»Ÿ</strong>ã€‚UIæ¸²æŸ“ä¸æ˜¯å‡½æ•°çš„çº¿æ€§è°ƒç”¨ï¼Œè€Œæ˜¯<strong>å¤šä¸ªç‰¹æƒè¿›ç¨‹åœ¨ç¡¬ä»¶èŠ‚æ‹æŒ‡æŒ¥ä¸‹çš„ç¯ç¯ç›¸æ‰£</strong>ã€‚</p>
<p><strong>æ¯ä¸€å¸§çš„æµç•…ï¼Œéƒ½æ˜¯AMSã€WMSã€SFã€Appã€GPUã€Displayç¡¬ä»¶åœ¨16.6mså†…çš„å®Œç¾åˆå¥ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ä¸­çš„å¼•ç”¨ä¼ å‚å’ŒæŒ‡é’ˆä¼ å‚]]></title>    <link>https://juejin.cn/post/7605810996125253666</link>    <guid>https://juejin.cn/post/7605810996125253666</guid>    <pubDate>2026-02-13T03:35:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605810996125253666" data-draft-id="7605542907119108148" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ä¸­çš„å¼•ç”¨ä¼ å‚å’ŒæŒ‡é’ˆä¼ å‚"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2026-02-13T03:35:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sTone87375"/> <meta itemprop="url" content="https://juejin.cn/user/2946346894764584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ä¸­çš„å¼•ç”¨ä¼ å‚å’ŒæŒ‡é’ˆä¼ å‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2946346894764584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sTone87375
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:35:55.000Z" title="Fri Feb 13 2026 03:35:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”</h2>

























<table><thead><tr><th>æ¦‚å¿µ</th><th>C++</th><th>å‰ç«¯ (JS/TS)</th></tr></thead><tbody><tr><td><strong>å€¼ä¼ é€’</strong></td><td>é»˜è®¤æ–¹å¼ï¼Œå®Œæ•´æ‹·è´</td><td>åŸºæœ¬ç±»å‹ (number, stringç­‰)</td></tr><tr><td><strong>å¼•ç”¨ä¼ é€’</strong></td><td>éœ€æ˜¾å¼ä½¿ç”¨ <code>&amp;</code> æˆ–æŒ‡é’ˆ</td><td>å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ç­‰å¼•ç”¨ç±»å‹</td></tr><tr><td><strong>æŒ‡é’ˆä¼ é€’</strong></td><td>ä¼ é€’å†…å­˜åœ°å€</td><td>ç±»ä¼¼ä¼ é€’å¯¹è±¡çš„å¼•ç”¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1">1. å€¼ä¼ é€’ï¼ˆé»˜è®¤ï¼‰- å®Œæ•´æ‹·è´</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
    <span class="hljs-type">int</span> x, y;
    <span class="hljs-built_in">Point</span>(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) : <span class="hljs-built_in">x</span>(a), <span class="hljs-built_in">y</span>(b) {
        cout &lt;&lt; <span class="hljs-string">"æ„é€ : ("</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
    }
    <span class="hljs-built_in">Point</span>(<span class="hljs-type">const</span> Point&amp; p) : <span class="hljs-built_in">x</span>(p.x), <span class="hljs-built_in">y</span>(p.y) {
        cout &lt;&lt; <span class="hljs-string">"æ‹·è´æ„é€ : ("</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
    }
    ~<span class="hljs-built_in">Point</span>() {
        cout &lt;&lt; <span class="hljs-string">"ææ„: ("</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
    }
};

<span class="hljs-comment">// âŒ å€¼ä¼ é€’ï¼šå‘ç”Ÿå®Œæ•´æ‹·è´</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byValue</span><span class="hljs-params">(Point p)</span> </span>{
    p.x = <span class="hljs-number">100</span>;  <span class="hljs-comment">// ä¿®æ”¹çš„æ˜¯å‰¯æœ¬ï¼Œä¸å½±å“åŸå¯¹è±¡</span>
    cout &lt;&lt; <span class="hljs-string">"å‡½æ•°å†…: ("</span> &lt;&lt; p.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Point <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;
    cout &lt;&lt; <span class="hljs-string">"--- è°ƒç”¨å‡½æ•° ---"</span> &lt;&lt; endl;
    <span class="hljs-built_in">byValue</span>(p1);
    cout &lt;&lt; <span class="hljs-string">"--- å‡½æ•°è¿”å› ---"</span> &lt;&lt; endl;
    cout &lt;&lt; <span class="hljs-string">"åŸå¯¹è±¡: ("</span> &lt;&lt; p1.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p1.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;  <span class="hljs-comment">// ä»æ˜¯ (1,2)</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ„é€ : (1,2)</span>
--- è°ƒç”¨å‡½æ•° ---
<span class="hljs-section">æ‹·è´æ„é€ : (1,2)</span>
<span class="hljs-section">å‡½æ•°å†…: (100,2)</span>
<span class="hljs-section">ææ„: (100,2)</span>
--- å‡½æ•°è¿”å› ---
<span class="hljs-section">åŸå¯¹è±¡: (1,2)</span>
<span class="hljs-section">ææ„: (1,2)</span>
</code></pre>
<blockquote>
<p>âš ï¸ <strong>æ€§èƒ½é—®é¢˜</strong>ï¼šå¤§å¯¹è±¡ä¼šå‘ç”Ÿæ˜‚è´µçš„æ·±æ‹·è´</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">2. å¼•ç”¨ä¼ é€’ï¼ˆç±»ä¼¼å‰ç«¯å¼•ç”¨ç±»å‹ï¼‰</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âœ… å¼•ç”¨ä¼ é€’ï¼šä¸æ‹·è´ï¼Œç›´æ¥æ“ä½œåŸå¯¹è±¡ï¼ˆç±»ä¼¼å‰ç«¯çš„å¯¹è±¡å¼•ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byReference</span><span class="hljs-params">(Point&amp; p)</span> </span>{
    p.x = <span class="hljs-number">100</span>;  <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹åŸå¯¹è±¡ï¼</span>
    cout &lt;&lt; <span class="hljs-string">"å‡½æ•°å†…: ("</span> &lt;&lt; p.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
}

<span class="hljs-comment">// âœ… const å¼•ç”¨ï¼šåªè¯»è®¿é—®ï¼Œä¸æ‹·è´ä¹Ÿä¸èƒ½ä¿®æ”¹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byConstReference</span><span class="hljs-params">(<span class="hljs-type">const</span> Point&amp; p)</span> </span>{
    <span class="hljs-comment">// p.x = 100;  // âŒ ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹constå¼•ç”¨</span>
    cout &lt;&lt; <span class="hljs-string">"åªè¯»è®¿é—®: ("</span> &lt;&lt; p.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Point <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;
    
    cout &lt;&lt; <span class="hljs-string">"=== å¼•ç”¨ä¼ é€’ ==="</span> &lt;&lt; endl;
    <span class="hljs-built_in">byReference</span>(p1);
    cout &lt;&lt; <span class="hljs-string">"åŸå¯¹è±¡å·²è¢«ä¿®æ”¹: ("</span> &lt;&lt; p1.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p1.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;  <span class="hljs-comment">// (100,2)</span>
    
    cout &lt;&lt; <span class="hljs-string">"\n=== constå¼•ç”¨ ==="</span> &lt;&lt; endl;
    <span class="hljs-built_in">byConstReference</span>(p1);
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ä¸å‰ç«¯å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JavaScript - å¯¹è±¡å¤©ç„¶æ˜¯å¼•ç”¨ä¼ é€’</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">obj</span>) {
    obj.<span class="hljs-property">x</span> = <span class="hljs-number">100</span>;  <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹åŸå¯¹è±¡</span>
}
<span class="hljs-keyword">let</span> p = {<span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">2</span>};
<span class="hljs-title function_">modify</span>(p);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">x</span>);  <span class="hljs-comment">// 100 âœ…</span>

<span class="hljs-comment">// C++ å¿…é¡»æ˜¾å¼åŠ  &amp; æ‰èƒ½å®ç°åŒæ ·æ•ˆæœ</span>
</code></pre>
<hr/>
<h2 data-id="heading-3">3. æŒ‡é’ˆä¼ é€’ï¼ˆCé£æ ¼ï¼Œæ›´çµæ´»ä½†å±é™©ï¼‰</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æŒ‡é’ˆä¼ é€’ï¼šä¼ é€’å†…å­˜åœ°å€</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byPointer</span><span class="hljs-params">(Point* p)</span> </span>{
    <span class="hljs-keyword">if</span> (p != <span class="hljs-literal">nullptr</span>) {  <span class="hljs-comment">// å¿…é¡»æ£€æŸ¥ç©ºæŒ‡é’ˆï¼</span>
        p-&gt;x = <span class="hljs-number">200</span>;      <span class="hljs-comment">// ä½¿ç”¨ -&gt; è®¿é—®æˆå‘˜</span>
    }
}

<span class="hljs-comment">// æŒ‡é’ˆçš„constç‰ˆæœ¬</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byConstPointer</span><span class="hljs-params">(<span class="hljs-type">const</span> Point* p)</span> </span>{
    <span class="hljs-comment">// p-&gt;x = 200;  // âŒ ä¸èƒ½ä¿®æ”¹</span>
    cout &lt;&lt; p-&gt;x &lt;&lt; endl;  <span class="hljs-comment">// âœ… å¯ä»¥è¯»å–</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Point <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;
    
    <span class="hljs-built_in">byPointer</span>(&amp;p1);  <span class="hljs-comment">// å¿…é¡»å–åœ°å€</span>
    cout &lt;&lt; <span class="hljs-string">"ä¿®æ”¹å: ("</span> &lt;&lt; p1.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p1.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
    
    <span class="hljs-comment">// å¯ä»¥ä¼  nullptrï¼ˆè¿™æ˜¯ä¸å¼•ç”¨çš„é‡è¦åŒºåˆ«ï¼‰</span>
    <span class="hljs-built_in">byPointer</span>(<span class="hljs-literal">nullptr</span>);  <span class="hljs-comment">// âœ… åˆæ³•</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>å¼•ç”¨ vs æŒ‡é’ˆå¯¹æ¯”ï¼š</strong></p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>å¼•ç”¨ <code>&amp;</code></th><th>æŒ‡é’ˆ <code>*</code></th></tr></thead><tbody><tr><td>è¯­æ³•</td><td>æ›´ç®€æ´ï¼ŒåƒåŸå¯¹è±¡</td><td>éœ€è§£å¼•ç”¨ <code>-&gt;</code> æˆ– <code>*</code></td></tr><tr><td>ç©ºå€¼</td><td>ä¸èƒ½ä¸º null</td><td>å¯ä»¥ä¸º nullptr</td></tr><tr><td>é‡æ–°ç»‘å®š</td><td>ä¸èƒ½æ”¹æŒ‡å‘å…¶ä»–å¯¹è±¡</td><td>å¯ä»¥æŒ‡å‘ä¸åŒå¯¹è±¡</td></tr><tr><td>å®‰å…¨æ€§</td><td>æ›´é«˜ï¼ˆå¿…é¡»åˆå§‹åŒ–ï¼‰</td><td>éœ€æ£€æŸ¥ç©ºæŒ‡é’ˆ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">4. è¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰ä¸ç§»åŠ¨è¯­ä¹‰</h2>
<h3 data-id="heading-5">ä¼ ç»Ÿè¿”å›å€¼ï¼ˆæœ‰æ‹·è´ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âŒ C++11å‰ï¼šè¿”å›æ—¶ä¼šå‘ç”Ÿæ‹·è´ï¼ˆæˆ–ç¼–è¯‘å™¨RVOä¼˜åŒ–ï¼‰</span>
<span class="hljs-function">Point <span class="hljs-title">createPoint</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Point <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)</span></span>;
    <span class="hljs-keyword">return</span> p;  <span class="hljs-comment">// ç†è®ºä¸Šä¼šæ‹·è´ï¼Œä½†ç¼–è¯‘å™¨é€šå¸¸ä¼˜åŒ–æ‰</span>
}

<span class="hljs-comment">// æ¥æ”¶æ—¶å†æ¬¡æ‹·è´</span>
Point p2 = <span class="hljs-built_in">createPoint</span>();
</code></pre>
<h3 data-id="heading-6">ç°ä»£C++ï¼šç§»åŠ¨è¯­ä¹‰ï¼ˆC++11èµ·ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BigData</span> {
    <span class="hljs-type">int</span>* data;
    <span class="hljs-type">size_t</span> size;
    
    <span class="hljs-comment">// ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆè½¬ç§»èµ„æºæ‰€æœ‰æƒï¼Œä¸æ‹·è´æ•°æ®ï¼‰</span>
    <span class="hljs-built_in">BigData</span>(BigData&amp;&amp; other) <span class="hljs-keyword">noexcept</span> 
        : <span class="hljs-built_in">data</span>(other.data), <span class="hljs-built_in">size</span>(other.size) {
        cout &lt;&lt; <span class="hljs-string">"ç§»åŠ¨æ„é€ ï¼ˆå·èµ„æºï¼‰"</span> &lt;&lt; endl;
        other.data = <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// ç½®ç©ºæºå¯¹è±¡</span>
        other.size = <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼</span>
    BigData&amp; <span class="hljs-keyword">operator</span>=(BigData&amp;&amp; other) <span class="hljs-keyword">noexcept</span> {
        cout &lt;&lt; <span class="hljs-string">"ç§»åŠ¨èµ‹å€¼"</span> &lt;&lt; endl;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other) {
            <span class="hljs-keyword">delete</span>[] data;
            data = other.data;
            size = other.size;
            other.data = <span class="hljs-literal">nullptr</span>;
        }
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;
    }
};

<span class="hljs-function">BigData <span class="hljs-title">createBigData</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">BigData <span class="hljs-title">bd</span><span class="hljs-params">(<span class="hljs-number">1000000</span>)</span></span>;  <span class="hljs-comment">// åˆ†é…å¤§é‡å†…å­˜</span>
    <span class="hljs-keyword">return</span> bd;  <span class="hljs-comment">// è§¦å‘ç§»åŠ¨è¯­ä¹‰ï¼Œè€Œéæ·±æ‹·è´ï¼</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    BigData bd1 = <span class="hljs-built_in">createBigData</span>();  <span class="hljs-comment">// ç§»åŠ¨æ„é€ ï¼Œå‡ ä¹é›¶å¼€é”€</span>
    BigData bd2;
    bd2 = <span class="hljs-built_in">createBigData</span>();          <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-7">5. æœ€ä½³å®è·µæ€»ç»“</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âœ… æœ€ä½³å®è·µé€ŸæŸ¥è¡¨</span>

<span class="hljs-comment">// 1. å°å¯¹è±¡ï¼ˆint, double, å°ç»“æ„ä½“ï¼‰ï¼šç›´æ¥å€¼ä¼ é€’</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-type">int</span> x, Point p)</span></span>;  

<span class="hljs-comment">// 2. å¤§å¯¹è±¡åªè¯»è®¿é—®ï¼šconst å¼•ç”¨ï¼ˆæ€§èƒ½+å®‰å…¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(<span class="hljs-type">const</span> BigData&amp; data)</span></span>;

<span class="hljs-comment">// 3. éœ€è¦ä¿®æ”¹åŸå¯¹è±¡ï¼šéconstå¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">modify</span><span class="hljs-params">(Point&amp; p)</span></span>;

<span class="hljs-comment">// 4. å‚æ•°å¯é€‰ï¼ˆå¯èƒ½ä¸ºç©ºï¼‰ï¼šæŒ‡é’ˆ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">maybeProcess</span><span class="hljs-params">(BigData* data)</span></span>;  <span class="hljs-comment">// dataå¯ä»¥æ˜¯nullptr</span>

<span class="hljs-comment">// 5. è½¬ç§»æ‰€æœ‰æƒï¼ˆC++11ï¼‰ï¼šå³å€¼å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">takeOwnership</span><span class="hljs-params">(BigData&amp;&amp; data)</span></span>;

<span class="hljs-comment">// 6. è¿”å›å€¼ï¼šä¼˜å…ˆè¿”å›å€¼ï¼ˆä¾èµ–RVO/ç§»åŠ¨ï¼‰ï¼Œè€Œéè¾“å‡ºå‚æ•°</span>
<span class="hljs-function">BigData <span class="hljs-title">create</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">// âœ… ç°ä»£C++æ¨è</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">create</span><span class="hljs-params">(BigData&amp; out)</span></span>;  <span class="hljs-comment">// æ—§å¼é£æ ¼ï¼Œé¿å…</span>
</code></pre>
<hr/>
<h2 data-id="heading-8">ç±»æ¯”æ€»ç»“</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++ æ˜¾å¼æ§åˆ¶ä¼ é€’æ–¹å¼</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(Point p)</span></span>;      <span class="hljs-comment">// å€¼ä¼ é€’ï¼ˆæ‹·è´ï¼‰    â† åƒ JS çš„ structuredClone</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(Point&amp; p)</span></span>;     <span class="hljs-comment">// å¼•ç”¨ä¼ é€’ï¼ˆåˆ«åï¼‰   â† åƒ JS çš„å¯¹è±¡å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-type">const</span> Point&amp; p)</span></span>; <span class="hljs-comment">// constå¼•ç”¨       â† åƒ JS çš„åªè¯»å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(Point* p)</span></span>;     <span class="hljs-comment">// æŒ‡é’ˆä¼ é€’         â† åƒ JS çš„å¼±å¼•ç”¨/å¯ç©ºå¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(Point&amp;&amp; p)</span></span>;    <span class="hljs-comment">// å³å€¼å¼•ç”¨ï¼ˆç§»åŠ¨ï¼‰   â† åƒ JS çš„ å¯¹è±¡è½¬ç§»/è§£æ„èµ‹å€¼</span>
</code></pre>
<p><strong>å…³é”®åŒºåˆ«</strong>ï¼šC++ é»˜è®¤æ˜¯<strong>å€¼è¯­ä¹‰</strong>ï¼ˆæ‹·è´ï¼‰ï¼Œå¿…é¡»æ˜¾å¼ä½¿ç”¨ <code>&amp;</code> æ‰èƒ½è·å¾—<strong>å¼•ç”¨è¯­ä¹‰</strong>ï¼›è€Œå‰ç«¯ï¼ˆJSï¼‰å¯¹è±¡é»˜è®¤å°±æ˜¯<strong>å¼•ç”¨è¯­ä¹‰</strong>ã€‚</p>
<hr/>
<p>ä»¥ä¸‹æ·±å…¥å‰–æ C++ ä¸­å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’çš„æœ¬è´¨å·®å¼‚ã€‚</p>
<h2 data-id="heading-9">æ ¸å¿ƒå¯¹æ¯”è¡¨</h2>








































<table><thead><tr><th>ç»´åº¦</th><th>å¼•ç”¨ä¼ é€’ <code>T&amp;</code></th><th>æŒ‡é’ˆä¼ é€’ <code>T*</code></th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td>åˆ«åï¼ˆaliasï¼‰ï¼Œå¿…é¡»ç»‘å®šæœ‰æ•ˆå¯¹è±¡</td><td>å†…å­˜åœ°å€ï¼Œå¯ç‹¬ç«‹å­˜åœ¨</td></tr><tr><td><strong>ç©ºå€¼</strong></td><td>âŒ ä¸èƒ½ä¸º null</td><td>âœ… å¯ä»¥ä¸º <code>nullptr</code></td></tr><tr><td><strong>é‡æ–°ç»‘å®š</strong></td><td>âŒ ç»ˆèº«ç»‘å®šï¼Œä¸èƒ½æ”¹æŒ‡å‘</td><td>âœ… å¯éšæ—¶æŒ‡å‘å…¶ä»–å¯¹è±¡</td></tr><tr><td><strong>è¯­æ³•</strong></td><td>ä½¿ç”¨åŸå¯¹è±¡è¯­æ³• <code>.</code></td><td>éœ€è§£å¼•ç”¨ <code>-&gt;</code> æˆ– <code>*</code></td></tr><tr><td><strong>åˆå§‹åŒ–</strong></td><td>å¿…é¡»åˆå§‹åŒ–</td><td>å¯ä»¥å»¶è¿Ÿåˆå§‹åŒ–</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>é€šå¸¸ä¼˜åŒ–ä¸ºæ— å¼€é”€</td><td>å ç”¨æŒ‡é’ˆå¤§å°ï¼ˆ4/8å­—èŠ‚ï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">æœ¬è´¨å·®å¼‚å›¾è§£</h2>
<pre><code class="hljs language-scss" lang="scss">å¼•ç”¨ (&amp;)                    æŒ‡é’ˆ (*)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼•ç”¨å˜é‡  â”‚ â”€â”€â†’ å¯¹è±¡      â”‚ æŒ‡é’ˆå˜é‡  â”‚ â”€â”€â†’ å¯¹è±¡
â”‚  (åˆ«å)   â”‚   (å¿…é¡»å­˜åœ¨)   â”‚ (åœ°å€)   â”‚   æˆ– â”€â”€â†’ nullptr
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   è¯­æ³•ç³–ï¼Œç¼–è¯‘å™¨å¤„ç†           çœŸæ­£çš„å†…å­˜å®ä½“
</code></pre>
<hr/>
<h2 data-id="heading-11">ä»£ç å±‚é¢æ·±åº¦å¯¹æ¯”</h2>
<h3 data-id="heading-12">1. åŸºç¡€è¯­æ³•å·®å¼‚</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Config</span> {
    <span class="hljs-type">int</span> port;
    string host;
};

<span class="hljs-comment">// ========== å¼•ç”¨ç‰ˆæœ¬ ==========</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setupByRef</span><span class="hljs-params">(Config&amp; cfg)</span> </span>{
    <span class="hljs-comment">// è¯­æ³•ï¼šç›´æ¥ä½¿ç”¨å¯¹è±¡</span>
    cfg.port = <span class="hljs-number">8080</span>;
    cfg.host = <span class="hljs-string">"localhost"</span>;
    
    <span class="hljs-comment">// âŒ ä¸èƒ½æ£€æŸ¥æ˜¯å¦ä¸ºç©ºï¼ˆå‡è®¾ä¸€å®šå­˜åœ¨ï¼‰</span>
    <span class="hljs-comment">// if (&amp;cfg == nullptr) {}  // æ— æ„ä¹‰ï¼Œå¼•ç”¨ä¸èƒ½ä¸ºnull</span>
}

<span class="hljs-comment">// ========== æŒ‡é’ˆç‰ˆæœ¬ ==========</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setupByPtr</span><span class="hljs-params">(Config* cfg)</span> </span>{
    <span class="hljs-comment">// è¯­æ³•ï¼šå¿…é¡»å…ˆæ£€æŸ¥ç©ºæŒ‡é’ˆ</span>
    <span class="hljs-keyword">if</span> (cfg == <span class="hljs-literal">nullptr</span>) {
        cerr &lt;&lt; <span class="hljs-string">"é”™è¯¯ï¼šé…ç½®ä¸ºç©º"</span> &lt;&lt; endl;
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// è§£å¼•ç”¨æ–¹å¼1ï¼š-&gt;</span>
    cfg-&gt;port = <span class="hljs-number">8080</span>;
    
    <span class="hljs-comment">// è§£å¼•ç”¨æ–¹å¼2ï¼š*ï¼ˆè·å–å¼•ç”¨åå†ç”¨.ï¼‰</span>
    (*cfg).host = <span class="hljs-string">"localhost"</span>;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Config c{<span class="hljs-number">0</span>, <span class="hljs-string">""</span>};
    
    <span class="hljs-comment">// å¼•ç”¨è°ƒç”¨ï¼šç®€å•ç›´æ¥</span>
    <span class="hljs-built_in">setupByRef</span>(c);
    
    <span class="hljs-comment">// æŒ‡é’ˆè°ƒç”¨ï¼šå¿…é¡»å–åœ°å€</span>
    <span class="hljs-built_in">setupByPtr</span>(&amp;c);
    <span class="hljs-built_in">setupByPtr</span>(<span class="hljs-literal">nullptr</span>);  <span class="hljs-comment">// âœ… å¯ä»¥ä¼ ç©ºï¼Œå‡½æ•°å†…éƒ¨å¤„ç†</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-13">2. é‡æ–°ç»‘å®šèƒ½åŠ›ï¼ˆå…³é”®å·®å¼‚ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrateRebinding</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;
    
    <span class="hljs-comment">// ========== å¼•ç”¨ï¼šç»ˆèº«ç»‘å®š ==========</span>
    <span class="hljs-type">int</span>&amp; ref = a;
    ref = b;      <span class="hljs-comment">// âŒ è¿™ä¸æ˜¯è®©refæŒ‡å‘bï¼è€Œæ˜¯æŠŠbçš„å€¼èµ‹ç»™a</span>
                  <span class="hljs-comment">// ç»“æœï¼ša = 20, refä»æ˜¯açš„åˆ«å</span>
    
    <span class="hljs-comment">// æƒ³æ”¹æŒ‡å‘ï¼Ÿä¸å¯èƒ½ï¼</span>
    <span class="hljs-comment">// &amp;ref = b;   // ç¼–è¯‘é”™è¯¯ï¼</span>
    
    <span class="hljs-comment">// ========== æŒ‡é’ˆï¼šçµæ´»é‡å®šå‘ ==========</span>
    <span class="hljs-type">int</span>* ptr = &amp;a;
    cout &lt;&lt; *ptr;  <span class="hljs-comment">// 10</span>
    
    ptr = &amp;b;      <span class="hljs-comment">// âœ… éšæ—¶æ”¹æŒ‡å‘</span>
    cout &lt;&lt; *ptr;  <span class="hljs-comment">// 20</span>
    
    ptr = <span class="hljs-literal">nullptr</span>; <span class="hljs-comment">// âœ… å¯ä»¥æŒ‡å‘ç©º</span>
}
</code></pre>
<h3 data-id="heading-14">3. å¤šçº§é—´æ¥è®¿é—®</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æŒ‡é’ˆå¯ä»¥æŒ‡å‘æŒ‡é’ˆï¼Œå¼•ç”¨ä¸è¡Œ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pointerChain</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> x = <span class="hljs-number">42</span>;
    <span class="hljs-type">int</span>* p = &amp;x;
    <span class="hljs-type">int</span>** pp = &amp;p;      <span class="hljs-comment">// âœ… æŒ‡é’ˆçš„æŒ‡é’ˆ</span>
    <span class="hljs-type">int</span>*** ppp = &amp;pp;   <span class="hljs-comment">// âœ… å¯ä»¥æ— é™å¥—å¨ƒ</span>
    
    cout &lt;&lt; ***ppp;     <span class="hljs-comment">// 42</span>
    
    <span class="hljs-comment">// å¼•ç”¨åªæœ‰ä¸€çº§ï¼ˆå¼•ç”¨çš„å¼•ç”¨è¢«æŠ˜å ï¼‰</span>
    <span class="hljs-type">int</span>&amp; r = x;
    <span class="hljs-comment">// int&amp;&amp; rr = r;    // è¿™æ˜¯å³å€¼å¼•ç”¨ï¼Œä¸æ˜¯å¼•ç”¨çš„å¼•ç”¨ï¼</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-15">æœ¬è´¨å·®å¼‚ï¼šç¼–è¯‘å™¨è§†è§’</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byRef</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; r)</span> </span>{ r = <span class="hljs-number">10</span>; }
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byPtr</span><span class="hljs-params">(<span class="hljs-type">int</span>* p)</span> </span>{ *p = <span class="hljs-number">10</span>; }

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;
    <span class="hljs-built_in">byRef</span>(x);
    <span class="hljs-built_in">byPtr</span>(&amp;x);
}
</code></pre>
<p><strong>ç¼–è¯‘åçš„ä¼ªä»£ç ï¼š</strong></p>
<pre><code class="hljs language-asm" lang="asm">; å¼•ç”¨ç‰ˆæœ¬ï¼ˆç¼–è¯‘å™¨ä¼˜åŒ–åï¼Œä¸æŒ‡é’ˆç›¸åŒï¼‰
byRef:
    mov eax, [esp+4]    ; å–åœ°å€ï¼ˆä¸æŒ‡é’ˆä¸€æ ·ï¼ï¼‰
    mov dword [eax], 10 ; è§£å¼•ç”¨èµ‹å€¼
    
; æŒ‡é’ˆç‰ˆæœ¬
byPtr:
    mov eax, [esp+4]    ; å–åœ°å€
    test eax, eax       ; âœ… æ£€æŸ¥ç©ºæŒ‡é’ˆï¼ˆç¼–è¯‘å™¨å¯èƒ½ä¼˜åŒ–æ‰ï¼‰
    je .null_handler
    mov dword [eax], 10
    
; ç»“è®ºï¼šå¼•ç”¨æ˜¯æŒ‡é’ˆçš„è¯­æ³•ç³–ï¼Œä½†ç¼–è¯‘å™¨ä¿è¯éç©º
</code></pre>
<blockquote>
<p><strong>æœ¬è´¨çœŸç›¸</strong>ï¼šå¼•ç”¨åœ¨åº•å±‚<strong>å°±æ˜¯æŒ‡é’ˆ</strong>ï¼Œä½†ç¼–è¯‘å™¨æ·»åŠ äº†<strong>éç©ºçº¦æŸ</strong>å’Œ<strong>è‡ªåŠ¨è§£å¼•ç”¨</strong>çš„è¯­æ³•ç³–ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">é€‚ç”¨åœºæ™¯è¯¦è§£</h2>
<h3 data-id="heading-17">âœ… å¼•ç”¨ä¼ é€’é€‚ç”¨åœºæ™¯</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœºæ™¯1ï¼šå‚æ•°å¿…é¡»å­˜åœ¨ï¼ˆä¸šåŠ¡é€»è¾‘è¦æ±‚ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">connectDatabase</span><span class="hljs-params">(<span class="hljs-type">const</span> ConnectionConfig&amp; config)</span> </span>{
    <span class="hljs-comment">// é…ç½®å¿…é¡»æä¾›ï¼Œä¸å­˜åœ¨"æ— é…ç½®"çš„æƒ…å†µ</span>
    <span class="hljs-comment">// æ— éœ€æ£€æŸ¥ç©ºï¼Œç®€åŒ–ä»£ç </span>
}

<span class="hljs-comment">// åœºæ™¯2ï¼šæ“ä½œç¬¦é‡è½½ï¼ˆåªèƒ½ç”¨å¼•ç”¨ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å¿…é¡»è¿”å›å¼•ç”¨æ‰èƒ½é“¾å¼èµ‹å€¼ï¼šv1 = v2 = v3</span>
    Vector&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Vector&amp; other) {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;  <span class="hljs-comment">// è§£å¼•ç”¨è¿”å›å¼•ç”¨</span>
    }
    
    <span class="hljs-comment">// ä¸‹æ ‡è¿ç®—ç¬¦</span>
    <span class="hljs-type">int</span>&amp; <span class="hljs-keyword">operator</span>[](<span class="hljs-type">size_t</span> index) {
        <span class="hljs-keyword">return</span> data[index];  <span class="hljs-comment">// å¿…é¡»è¿”å›å¼•ç”¨æ‰èƒ½ï¼šv[0] = 10</span>
    }
};

<span class="hljs-comment">// åœºæ™¯3ï¼šå‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼ˆæ˜ç¡®æ‰€æœ‰æƒï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; data)</span></span>;           <span class="hljs-comment">// ä¿®æ”¹åŸæ•°æ®</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt;&amp; data)</span></span>;    <span class="hljs-comment">// åªè¯»è®¿é—®</span>
</code></pre>
<h3 data-id="heading-18">âœ… æŒ‡é’ˆä¼ é€’é€‚ç”¨åœºæ™¯</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœºæ™¯1ï¼šå‚æ•°å¯é€‰ï¼ˆå¯ä¸ºç©ºï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">logMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> string* prefix = <span class="hljs-literal">nullptr</span>)</span> </span>{
    <span class="hljs-keyword">if</span> (prefix) {
        cout &lt;&lt; <span class="hljs-string">"["</span> &lt;&lt; *prefix &lt;&lt; <span class="hljs-string">"] "</span>;
    }
    cout &lt;&lt; <span class="hljs-string">"æ—¥å¿—å†…å®¹"</span> &lt;&lt; endl;
}
<span class="hljs-comment">// è°ƒç”¨ï¼šlogMessage(); æˆ– logMessage(&amp;debugTag);</span>

<span class="hljs-comment">// åœºæ™¯2ï¼šåŠ¨æ€å†…å­˜ç®¡ç†ï¼ˆæ‰€æœ‰æƒè½¬ç§»ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processLargeFile</span><span class="hljs-params">(unique_ptr&lt;FileData&gt;* filePtr)</span> </span>{
    <span class="hljs-comment">// å¯èƒ½è½¬ç§»æ‰€æœ‰æƒï¼Œæˆ–é‡Šæ”¾å†…å­˜</span>
    <span class="hljs-keyword">if</span> (filePtr &amp;&amp; *filePtr) {
        <span class="hljs-keyword">auto</span> data = std::<span class="hljs-built_in">move</span>(*filePtr);  <span class="hljs-comment">// æ¥ç®¡æ‰€æœ‰æƒ</span>
        <span class="hljs-comment">// filePtr ç°åœ¨æŒ‡å‘ç©ºunique_ptr</span>
    }
}

<span class="hljs-comment">// åœºæ™¯3ï¼šCæ¥å£å…¼å®¹/å¤šæ€æ•°ç»„</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">drawShapes</span><span class="hljs-params">(Shape** shapes, <span class="hljs-type">size_t</span> count)</span> </span>{
    <span class="hljs-comment">// æŒ‡é’ˆæ•°ç»„ï¼Œæ”¯æŒè¿è¡Œæ—¶å¤šæ€</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; count; ++i) {
        shapes[i]-&gt;<span class="hljs-built_in">draw</span>();  <span class="hljs-comment">// è™šå‡½æ•°è°ƒç”¨</span>
    }
}

<span class="hljs-comment">// åœºæ™¯4ï¼šéœ€è¦é‡æ–°æŒ‡å‘ï¼ˆè¿­ä»£ã€éå†ï¼‰</span>
<span class="hljs-function">Node* <span class="hljs-title">findNode</span><span class="hljs-params">(Node* head, <span class="hljs-type">int</span> value)</span> </span>{
    Node* current = head;      <span class="hljs-comment">// ä»headå¼€å§‹</span>
    <span class="hljs-keyword">while</span> (current) {
        <span class="hljs-keyword">if</span> (current-&gt;val == value) <span class="hljs-keyword">return</span> current;
        current = current-&gt;next;  <span class="hljs-comment">// âœ… æŒ‡é’ˆå¯ä»¥éå†</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}
<span class="hljs-comment">// å¦‚æœç”¨å¼•ç”¨ï¼šNode&amp; current = head; current = ... ä¼šä¿®æ”¹åŸheadï¼</span>
</code></pre>
<hr/>
<h2 data-id="heading-19">ç°ä»£C++çš„æœ€ä½³å®è·µ</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ğŸ† å‚æ•°ä¼ é€’å†³ç­–æ ‘</span>

<span class="hljs-comment">// 1. å°å¯¹è±¡ï¼ˆ&lt;= 2ä¸ªæŒ‡é’ˆå¤§å°ï¼‰ï¼šå€¼ä¼ é€’</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-type">int</span> x, Point p)</span></span>;

<span class="hljs-comment">// 2. åªè¯»å¤§å¯¹è±¡ï¼šconst å¼•ç”¨ï¼ˆé¦–é€‰ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(<span class="hljs-type">const</span> BigData&amp; data)</span></span>;

<span class="hljs-comment">// 3. å¿…é¡»ä¿®æ”¹åŸå¯¹è±¡ï¼šéconst å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">modify</span><span class="hljs-params">(Config&amp; cfg)</span></span>;

<span class="hljs-comment">// 4. å‚æ•°å¯é€‰/å¯ä¸ºç©ºï¼šæŒ‡é’ˆ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">render</span><span class="hljs-params">(<span class="hljs-type">const</span> Camera* cam = <span class="hljs-literal">nullptr</span>)</span></span>;

<span class="hljs-comment">// 5. è½¬ç§»æ‰€æœ‰æƒï¼ˆC++11ï¼‰ï¼šå³å€¼å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">consume</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp;&amp; data)</span></span>;

<span class="hljs-comment">// 6. åŠ¨æ€æ•°ç»„/å¤šæ€ï¼šæ™ºèƒ½æŒ‡é’ˆ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loadModel</span><span class="hljs-params">(shared_ptr&lt;Mesh&gt; mesh)</span></span>;      <span class="hljs-comment">// å…±äº«æ‰€æœ‰æƒ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">takeData</span><span class="hljs-params">(unique_ptr&lt;Buffer&gt; buffer)</span></span>;   <span class="hljs-comment">// ç‹¬å æ‰€æœ‰æƒ</span>
</code></pre>
<hr/>
<h2 data-id="heading-20">ä¸€å¥è¯æ€»ç»“</h2>
<blockquote>
<p><strong>å¼•ç”¨æ˜¯"æ‰¿è¯ºå­˜åœ¨çš„åˆ«å"ï¼ŒæŒ‡é’ˆæ˜¯"å¯èƒ½ä¸ºç©ºçš„åœ°å€"ã€‚</strong></p>
<p>ç”¨å¼•ç”¨è¡¨è¾¾<strong>å¥‘çº¦</strong>ï¼ˆå¿…é¡»å­˜åœ¨ï¼‰ï¼Œç”¨æŒ‡é’ˆè¡¨è¾¾<strong>å¯é€‰æ€§</strong>ï¼ˆå¯èƒ½ä¸ºç©ºï¼‰ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¾¦æ¢ï¼šæˆ‘æ˜¯å¦‚ä½•æŒ–æ˜å‡ºç½‘ç«™é‡Œ 28 ä¸ª"éšè—å•†å“"çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7605816833191641088</link>    <guid>https://juejin.cn/post/7605816833191641088</guid>    <pubDate>2026-02-13T03:36:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605816833191641088" data-draft-id="7605772919224778786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä¾¦æ¢ï¼šæˆ‘æ˜¯å¦‚ä½•æŒ–æ˜å‡ºç½‘ç«™é‡Œ 28 ä¸ª&quot;éšè—å•†å“&quot;çš„ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-02-13T03:36:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å†°çƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2014722836669176"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä¾¦æ¢ï¼šæˆ‘æ˜¯å¦‚ä½•æŒ–æ˜å‡ºç½‘ç«™é‡Œ 28 ä¸ª"éšè—å•†å“"çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2014722836669176/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å†°çƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:36:08.000Z" title="Fri Feb 13 2026 03:36:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯ä¾¦æ¢ï¼šæˆ‘æ˜¯å¦‚ä½•æŒ–æ˜å‡ºç½‘ç«™é‡Œ 28 ä¸ª"éšè—å•†å“"çš„ï¼Ÿ</h2>
<blockquote>
<p><strong>å…è´£å£°æ˜</strong>ï¼šæœ¬æ–‡ä»…ä¾›æŠ€æœ¯äº¤æµä¸å­¦ä¹ ï¼Œè¯·å‹¿åˆ©ç”¨æ–‡ä¸­æŠ€æœ¯æ‰‹æ®µå¯¹ä»–äººçš„æœåŠ¡å™¨é€ æˆå‹åŠ›æˆ–è¿›è¡Œæ¶æ„çˆ¬å–ã€‚æ‰€æœ‰æµ‹è¯•æ•°æ®å‡æ¥è‡ªå…¬å¼€æ¥å£ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ•µï¸â€â™‚ï¸ ä»ä¸€ä¸ªå¥½å¥‡å¿ƒå¼€å§‹</h3>
<p>å‰å‡ å¤©é€›ä¸€ä¸ªæ•°å­—äº§å“åˆç§Ÿå¹³å°ï¼ˆnf.videoï¼‰æ—¶ï¼Œæˆ‘å‘ç°å®ƒé¦–é¡µåªå­¤é›¶é›¶åœ°æŒ‚ç€ 6 ä¸ªå•†å“ï¼šNetflixã€Disney+ã€Spotify ç­‰å¸¸è§çš„å…¨å®¶æ¡¶ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘çš„ç›´è§‰å‘Šè¯‰æˆ‘ï¼š<strong>äº‹æƒ…æ²¡è¿™ä¹ˆç®€å•</strong>ã€‚</p>
<p>é€šå¸¸è¿™ç±»å¹³å°ä¸ºäº† SEO æˆ–è€…åå°ç®¡ç†çš„ç»Ÿä¸€æ€§ï¼Œæ•°æ®åº“é‡Œå¾€å¾€èººç€æ›´å¤šå•†å“ï¼Œåªæ˜¯å› ä¸ºåº“å­˜ã€ç­–ç•¥åŸå› è¢«å‰ç«¯"éšè—"äº†ã€‚ä»Šå¤©å°±å¸¦å¤§å®¶é€šè¿‡<strong>æµè§ˆå™¨æ§åˆ¶å°ï¼ˆConsoleï¼‰</strong>ï¼Œç”¨å‡ æ‹›å‰ç«¯è°ƒè¯•æŠ€å·§ï¼Œæ‰’å‡ºé‚£äº›è—åœ¨ä»£ç èƒŒåçš„ç§˜å¯†ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ” ç¬¬ä¸€å±‚ï¼šæ‘†åœ¨æ˜é¢ä¸Šçš„æ•°æ®</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹çœ‹æ™®é€šç”¨æˆ·èƒ½çœ‹åˆ°ä»€ä¹ˆã€‚æ‰“å¼€æ§åˆ¶å°ï¼Œç®€å•æŸ¥ä¸€ä¸‹ DOMï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–é¦–é¡µæ‰€æœ‰å•†å“å¡ç‰‡</span>
<span class="hljs-keyword">const</span> cards = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.platFormItem'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é¦–é¡µå¯è§å•†å“æ•°: <span class="hljs-subst">${cards.length}</span>`</span>);
<span class="hljs-comment">// è¾“å‡º: 6</span>
</code></pre>
<p>ç¡®å®åªæœ‰ 6 ä¸ªã€‚è¿™å»ºç«‹äº†æˆ‘ä»¬çš„"åŸºå‡†çº¿"ã€‚å¦‚æœåé¢æˆ‘ä»¬æ‰¾åˆ°äº†å¤šäº 6 ä¸ªçš„æ•°æ®ï¼Œé‚£å°±è¯´æ˜æœ‰"éšè—æ¬¾"ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸ£ ç¬¬äºŒå±‚ï¼šVue Router æ‹¦æˆªæœ¯</h3>
<p>ç‚¹å‡»å•†å“å¡ç‰‡ä¼šè·³è½¬åˆ°è´­ä¹°é¡µã€‚é€šå¸¸æˆ‘ä»¬ä¼šçœ‹ Network é¢æ¿æ‰¾é“¾æ¥ï¼Œä½†è¿™ä¸ªç½‘ç«™æ˜¯ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰ï¼Œç‚¹å‡»æ˜¯è·¯ç”±è·³è½¬ã€‚</p>
<p>ä¸ºäº†ä¸çœŸçš„è·³èµ°ï¼ˆè·³èµ°å°±å¾—é€€å›æ¥ï¼Œéº»çƒ¦ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Vue Router çš„<strong>å…¨å±€å‰ç½®å®ˆå«</strong>æ¥åšä¸€ä¸ª"é’©å­"ã€‚æˆ‘ä»¬æƒ³çŸ¥é“ç‚¹å‡»å¡ç‰‡åï¼Œè·¯ç”±åˆ°åº•æƒ³å¸¦æˆ‘ä»¬å»å“ªï¼Ÿ</p>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°æ³¨å…¥è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡è®¾æŒ‚è½½åœ¨ app ä¸Šçš„ router å®ä¾‹ï¼ˆè§†å…·ä½“é¡¹ç›®è€Œå®šï¼Œé€šå¸¸åœ¨ vueApp.config æˆ– __vue_app__ ä¸­ï¼‰</span>
<span class="hljs-comment">// è¿™é‡Œæ¼”ç¤ºæ€è·¯</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#app'</span>).<span class="hljs-property">__vue_app__</span>.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$router</span>;

<span class="hljs-comment">// ğŸ‘®â€â™‚ï¸ æ³¨å†Œä¸€ä¸ªæ‹¦æˆªå®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ¯ æ•è·åˆ°ç›®æ ‡è·¯ç”±: <span class="hljs-subst">${to.fullPath}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“¦ å‚æ•° ID: <span class="hljs-subst">${to.params.id}</span>`</span>);
    
    <span class="hljs-comment">// âœ‹ next(false) é˜»æ­¢å®é™…è·³è½¬ï¼Œæˆ‘ä»¬å°±åœåœ¨å½“å‰é¡µ</span>
    <span class="hljs-title function_">next</span>(<span class="hljs-literal">false</span>); 
});
</code></pre>
<p>ç„¶ååœ¨é¡µé¢ä¸Šç‚¹å‡»ä¸€ä¸ª"è‹¹æœå•†åº—"çš„å¡ç‰‡ï¼š</p>
<blockquote>
<p>Console è¾“å‡º:
<code>ğŸ¯ æ•è·åˆ°ç›®æ ‡è·¯ç”±: /buy/31</code>
<code>ğŸ“¦ å‚æ•° ID: 31</code></p>
</blockquote>
<p>Bingoï¼æˆ‘ä»¬æ‘¸æ¸…äº†è·¯ç”±è§„åˆ™ï¼š<code>/buy/:id</code>ã€‚è¿™æ„å‘³ç€å•†å“æ˜¯ä»¥ ID ä¸ºç´¢å¼•çš„ã€‚</p>
<hr/>
<h3 data-id="heading-4">ğŸ•µï¸ ç¬¬ä¸‰å±‚ï¼šPerformance API é‡Œçš„è››ä¸é©¬è¿¹</h3>
<p>é¡µé¢åŠ è½½å®Œäº†ï¼ŒNetwork é¢æ¿é‡Œçš„è¯·æ±‚éƒ½è¢«å†²æ‰äº†æˆ–è€…å¾ˆéš¾æ‰¾ã€‚è¿™æ—¶ï¼Œæµè§ˆå™¨åŸç”Ÿçš„ <strong>Performance API</strong> å°±åƒä¸€ä¸ªé»‘åŒ£å­ï¼Œè®°å½•äº†æ‰€æœ‰å‘ç”Ÿè¿‡çš„èµ„æºè¯·æ±‚ã€‚</p>
<p>æˆ‘æƒ³çœ‹çœ‹å‰ç«¯åˆ°åº•è¯·æ±‚äº†å“ªäº› API æ¥å£ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç­›é€‰æ‰€æœ‰ XMLHttpRequest æˆ– Fetch è¯·æ±‚</span>
<span class="hljs-keyword">const</span> apiRequests = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'resource'</span>)
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.<span class="hljs-property">initiatorType</span> === <span class="hljs-string">'xmlhttprequest'</span> || e.<span class="hljs-property">initiatorType</span> === <span class="hljs-string">'fetch'</span>)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.<span class="hljs-property">name</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">table</span>(apiRequests);
</code></pre>
<p>åœ¨ä¸€å †æ—¥å¿—é‡Œï¼Œæˆ‘å‘ç°äº†è¿™å‡ ä¸ªæœ‰è¶£çš„æ¥å£ï¼š</p>
<ul>
<li><code>/api/applets/goods/get/homeManage</code> (é¦–é¡µæ•°æ®ï¼Œä¼°è®¡å°±é‚£ 6 ä¸ª)</li>
<li><code>/api/applets/goods/get/categoryGoods</code> (åˆ†ç±»å•†å“ï¼Ÿè¿™ä¸ªå¬èµ·æ¥æœ‰æˆï¼)</li>
</ul>
<p>æˆ‘å°è¯•æ‰‹åŠ¨è°ƒç”¨äº†ä¸€ä¸‹è¿™ä¸ª <code>categoryGoods</code> æ¥å£ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/applets/goods/get/categoryGoods'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¿åˆ°æ‰€æœ‰å•†å“æ•°: <span class="hljs-subst">${data.data.length}</span>`</span>));
<span class="hljs-comment">// è¾“å‡º: 27</span>
</code></pre>
<p><strong>27 ä¸ªï¼</strong> è¿œè¶…é¦–é¡µçš„ 6 ä¸ªã€‚</p>
<p>é€šè¿‡åˆ†æè¿”å›çš„ JSONï¼Œæˆ‘çœ‹åˆ°äº†å¤§é‡é¦–é¡µæ²¡å±•ç¤ºçš„å•†å“ï¼š</p>
<ul>
<li><code>ID 20</code>: MagSafe ä¸‰åˆä¸€æ— çº¿å……</li>
<li><code>ID 96</code>: é“¶æ²³æ¬¡æ—¶ä»£æ™ºèƒ½ NAS (è¿™å•¥é»‘ç§‘æŠ€ï¼Ÿ)</li>
<li><code>ID 111</code>: Typora æ­£ç‰ˆæˆæƒ</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œå¦‚æœæ˜¯æ™®é€šç”¨æˆ·å¯èƒ½å°±æ»¡è¶³äº†ã€‚ä½†ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘æ³¨æ„åˆ° ID å¹¶ä¸è¿ç»­ã€‚æœ€å¤§çš„ ID æ˜¯ 113ï¼Œä½†ä¸­é—´ç¼ºäº†å¾ˆå¤šæ•°å­—ã€‚</p>
<p><strong>é‚£äº›æ¶ˆå¤±çš„ ID å»å“ªäº†ï¼Ÿ</strong></p>
<hr/>
<h3 data-id="heading-5">ğŸš€ ç¬¬å››å±‚ï¼šID æš´åŠ›æšä¸¾ä¸æ·±åº¦æŒ–æ˜</h3>
<p>æ—¢ç„¶çŸ¥é“äº† API æ¨¡å¼æ˜¯ <code>/api/applets/goods/get/:id</code>ï¼Œä¸” ID æ˜¯æ•°å­—ã€‚é‚£æˆ‘èƒ½ä¸èƒ½å†™ä¸ªè„šæœ¬ï¼ŒæŠŠ 1 åˆ° 200 çš„ ID å…¨æ‰«ä¸€éï¼Ÿ</p>
<p>è¿™å°±åƒæ˜¯åœ¨ç©"æ‰«é›·"ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€å•çš„å¹¶å‘æ¢æµ‹è„šæœ¬</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">scanHiddenGoods</span>(<span class="hljs-params">maxId</span>) {
    <span class="hljs-keyword">const</span> hiddenGoods = [];
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸš€ å¼€å§‹æ‰«æ ID 1 - <span class="hljs-subst">${maxId}</span>...`</span>);
    
    <span class="hljs-keyword">const</span> promises = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> id = <span class="hljs-number">1</span>; id &lt;= maxId; id++) {
        <span class="hljs-keyword">const</span> p = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/8081/api/applets/goods/get/<span class="hljs-subst">${id}</span>`</span>)
            .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
            .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
                <span class="hljs-comment">// å¦‚æœæ¥å£è¿”å›æˆåŠŸä¸”æœ‰æ•°æ®</span>
                <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> === <span class="hljs-number">10000</span> &amp;&amp; res.<span class="hljs-property">data</span>) {
                    <span class="hljs-keyword">return</span> { id, <span class="hljs-attr">name</span>: res.<span class="hljs-property">data</span>.<span class="hljs-property">goodsName</span>, <span class="hljs-attr">price</span>: res.<span class="hljs-property">data</span>.<span class="hljs-property">price</span> };
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            })
            .<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>);
        promises.<span class="hljs-title function_">push</span>(p);
    }

    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
    <span class="hljs-keyword">return</span> results.<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>); <span class="hljs-comment">// è¿‡æ»¤æ‰ null</span>
}

<span class="hljs-comment">// è®©æˆ‘ä»¬è·‘ä¸€ä¸‹</span>
<span class="hljs-title function_">scanHiddenGoods</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">goods</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">table</span>(goods);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ‰ å…±å‘ç°å•†å“: <span class="hljs-subst">${goods.length}</span> ä¸ª`</span>);
});
</code></pre>
<p>å‡ ç§’é’Ÿåï¼Œæ§åˆ¶å°æ‰“å‡ºäº†ä¸€å¼ é•¿é•¿çš„è¡¨æ ¼ã€‚</p>
<p><strong>ç»“æœä»¤äººéœ‡æƒŠï¼š</strong></p>
<p>é™¤äº†åˆšæ‰åˆ†ç±»åˆ—è¡¨é‡Œçš„ 27 ä¸ªï¼Œæˆ‘åˆæŒ–å‡ºäº† <strong>8 ä¸ª"å¹½çµå•†å“"</strong>ã€‚è¿™äº›å•†å“è¿åˆ†ç±» API éƒ½ä¸è¿”å›ï¼Œå®Œå…¨æ˜¯"éšå½¢"çš„ï¼Œåªæœ‰é€šè¿‡ ID ç›´è¾¾æ‰èƒ½çœ‹åˆ°ï¼š</p>






























<table><thead><tr><th>ID</th><th>åç§°</th><th>è¿™å±…ç„¶ä¹Ÿæœ‰ï¼Ÿ</th></tr></thead><tbody><tr><td>18</td><td>GPT Plus</td><td>å¯èƒ½å› ä¸ºåˆè§„é—®é¢˜éšè—</td></tr><tr><td>26</td><td>Midjourney</td><td>åªèƒ½ç›´æ¥è®¿é—®è´­ä¹°</td></tr><tr><td>50</td><td>Runway</td><td>é‚£ä¸ªæ–‡ç”Ÿè§†é¢‘çš„ AI</td></tr><tr><td>105</td><td>Codex</td><td>ç¼–ç¨‹ç¥å™¨</td></tr></tbody></table>
<p>è¿™äº›å•†å“å¾ˆå¯èƒ½æ˜¯æµ‹è¯•ä¸‹æ¶çš„ã€æˆ–è€…æ˜¯ä»…é™å†…éƒ¨/è€å®¢æˆ·é€šè¿‡é“¾æ¥è´­ä¹°çš„ã€‚</p>
<hr/>
<h3 data-id="heading-6">ğŸ“ æ€»ç»“</h3>
<p>é€šè¿‡è¿™æ¬¡æ¢ç´¢ï¼Œæˆ‘ä»¬å‘ç°äº†ç½‘ç«™é‡Œå…±æœ‰ <strong>34</strong> ä¸ªæœ‰æ•ˆå•†å“ï¼Œè€Œé¦–é¡µåªå±•ç¤ºäº† <strong>17%</strong>ã€‚</p>
<p>å›é¡¾ä¸€ä¸‹æˆ‘ä»¬çš„"ä½œæ¡ˆå·¥å…·"ï¼š</p>
<ol>
<li><strong>DOM è§£æ</strong>ï¼šçœ‹æ¸…è¡¨è±¡ã€‚</li>
<li><strong>Vue Router å®ˆå«</strong>ï¼šæ‹¦æˆªè·¯ç”±ï¼Œæ¢çŸ¥è·¯å¾„è§„åˆ™ã€‚</li>
<li><strong>Performance API</strong>ï¼šå›æº¯å†å²è¯·æ±‚ï¼Œå®šä½å…³é”®åç«¯æ¥å£ã€‚</li>
<li><strong>Promise.all å¹¶å‘æ¢æµ‹</strong>ï¼šæš´åŠ›æšä¸¾ï¼Œå‘ç°ç¦»æ•£æ•°æ®ã€‚</li>
</ol>
<p>å‰ç«¯å¼€å‘ä¸ä»…ä»…æ˜¯ç”»é¡µé¢ï¼Œå–„ç”¨æµè§ˆå™¨æä¾›çš„è°ƒè¯•å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ­£åœ¨è¿è¡Œçš„åº”ç”¨æœ‰æ›´æ·±å±‚çš„ç†è§£ï¼ˆæˆ–è€…å•çº¯æ˜¯ä¸ºäº†æ»¡è¶³å¥½å¥‡å¿ƒ ğŸ˜‰ï¼‰ã€‚</p>
<hr/>
<p><em>å¦‚æœä½ è§‰å¾—è¿™ä¸ªåˆ†æè¿‡ç¨‹æœ‰è¶£ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼š10 ä¸ªå¿…çŸ¥çš„ Kotlin æ‰©å±•å‡½æ•°]]></title>    <link>https://juejin.cn/post/7605941424535994422</link>    <guid>https://juejin.cn/post/7605941424535994422</guid>    <pubDate>2026-02-13T03:32:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605941424535994422" data-draft-id="7605807405307396159" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼š10 ä¸ªå¿…çŸ¥çš„ Kotlin æ‰©å±•å‡½æ•°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-13T03:32:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ehtan_Zheng"/> <meta itemprop="url" content="https://juejin.cn/user/413072099642478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼š10 ä¸ªå¿…çŸ¥çš„ Kotlin æ‰©å±•å‡½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/413072099642478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ehtan_Zheng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:32:13.000Z" title="Fri Feb 13 2026 03:32:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‰©å±•å‡½æ•°æ˜¯ Kotlin æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œä½†è®¸å¤šå¼€å‘è€…å¹¶æœªå……åˆ†å‘æŒ¥å…¶æ½œåŠ›ã€‚åœ¨å®¡é˜…äº†æ•°ä¸‡è¡Œ Kotlin ä»£ç åï¼Œæˆ‘å‘ç°ï¼šæ°åˆ°å¥½å¤„åœ°ä½¿ç”¨æ‰©å±•å‡½æ•°ï¼Œèƒ½å°†å†—é•¿ã€é‡å¤çš„ä»£ç è½¬åŒ–ä¸ºä¼˜é›…ä¸”æ˜“è¯»çš„è¡¨è¾¾å¼ã€‚</p>
<p>åˆ«å†å†™é‚£äº›å·¥å…·ç±»ï¼ˆHelper classesï¼‰å’Œé™æ€æ–¹æ³•ï¼ˆUtility methodsï¼‰äº†ã€‚è¿™åä¸ªæ‰©å±•å‡½æ•°æ¨¡å¼å°†è®©ä½ çš„ Kotlin ä»£ç æ›´æ•´æ´ã€æ›´å…·è¡¨ç°åŠ›ï¼Œä¸”æ›´æ˜“äºç»´æŠ¤ã€‚</p>
<h3 data-id="heading-0">ä¸ºä»€ä¹ˆæ‰©å±•å‡½æ•°è‡³å…³é‡è¦</h3>
<p>æ‰©å±•å‡½æ•°å…è®¸ä½ ï¼š</p>
<ul>
<li><strong>æ— éœ€ç»§æ‰¿å³å¯æ‰©å±•åŠŸèƒ½</strong>ï¼šç›´æ¥ä¸ºç°æœ‰ç±»æ·»åŠ æ–°åŠŸèƒ½ã€‚</li>
<li><strong>æå‡å¯è¯»æ€§</strong>ï¼šé€šè¿‡é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰ä½¿ä»£ç æ›´æ˜“ç†è§£ã€‚</li>
<li><strong>å‡å°‘æ ·æ¿ä»£ç </strong>ï¼šå½»åº•æ¶ˆé™¤è‡ƒè‚¿çš„å·¥å…·ç±»ï¼ˆUtility classesï¼‰ã€‚</li>
<li><strong>å®ç°è‡ªç„¶é“¾å¼æ“ä½œ</strong>ï¼šè®©ä»£ç è°ƒç”¨é€»è¾‘æ›´é¡ºç•…ã€‚</li>
</ul>
<p>è®©æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹åä¸ªæ¨¡å¼ï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•é‡å¡‘ä½ çš„ä»£ç åº“çš„ã€‚</p>
<h3 data-id="heading-1">æ¨¡å¼ 1ï¼šå­—ç¬¦ä¸²æ ¡éªŒæ‰©å±• (String Validation Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> å­—ç¬¦ä¸²æ ¡éªŒé€»è¾‘æ•£è½åœ¨ä»£ç åº“çš„å„ä¸ªè§’è½ã€‚</p>
<h4 data-id="heading-2">åŸºç¡€æ ¡éªŒæ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ“ ç®€æ´çš„æ ¡éªŒæ‰©å±•å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> String?.<span class="hljs-title">isValidEmail</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">return</span> matches(Regex(<span class="hljs-string">"^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$"</span>))
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String?.<span class="hljs-title">isValidPhone</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">return</span> matches(Regex(<span class="hljs-string">"^\\+?[1-9]\\d{1,14}$"</span>))
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String?.<span class="hljs-title">isValidUrl</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
        java.net.URL(<span class="hljs-keyword">this</span>)
        <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-literal">false</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">isAlphanumeric</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> matches(Regex(<span class="hljs-string">"^[a-zA-Z0-9]+$"</span>))
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">containsDigit</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> any { it.isDigit() }
}
</code></pre>
<h3 data-id="heading-3">é«˜çº§å­—ç¬¦ä¸²æ‰©å±•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">truncate</span><span class="hljs-params">(maxLength: <span class="hljs-type">Int</span>, ellipsis: <span class="hljs-type">String</span> = <span class="hljs-string">"..."</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (length &lt;= maxLength) <span class="hljs-keyword">this</span>
    <span class="hljs-keyword">else</span> take(maxLength - ellipsis.length) + ellipsis
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">capitalizeWords</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> split(<span class="hljs-string">" "</span>).joinToString(<span class="hljs-string">" "</span>) { word -&gt;
        word.replaceFirstChar { <span class="hljs-keyword">if</span> (it.isLowerCase()) it.titlecase() <span class="hljs-keyword">else</span> it.toString() }
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">removeWhitespace</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> replace(<span class="hljs-string">"\s+"</span>.toRegex(), <span class="hljs-string">""</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">toSlug</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> lowercase()
        .replace(<span class="hljs-string">"\s+"</span>.toRegex(), <span class="hljs-string">"-"</span>)
        .replace(<span class="hljs-string">"[^a-z0-9-]"</span>.toRegex(), <span class="hljs-string">""</span>)
        .replace(<span class="hljs-string">"-+"</span>.toRegex(), <span class="hljs-string">"-"</span>)
        .trim(<span class="hljs-string">'-'</span>)
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> title = <span class="hljs-string">"This is a Long Article Title That Needs Truncation"</span>
<span class="hljs-keyword">val</span> short = title.truncate(<span class="hljs-number">20</span>) <span class="hljs-comment">// ç»“æœ: "This is a Long Ar..."</span>

<span class="hljs-keyword">val</span> name = <span class="hljs-string">"john doe"</span>
<span class="hljs-keyword">val</span> formatted = name.capitalizeWords() <span class="hljs-comment">// ç»“æœ: "John Doe"</span>

<span class="hljs-keyword">val</span> slug = <span class="hljs-string">"My Blog Post!"</span>.toSlug() <span class="hljs-comment">// ç»“æœ: "my-blog-post"</span>

</code></pre>
<hr/>
<h3 data-id="heading-4">æ¨¡å¼ 2ï¼šç©ºå®‰å…¨æ‰©å±• (Null Safety Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> ä»£ç ä¸­å……æ–¥ç€é‡å¤çš„åˆ¤ç©ºæ£€æŸ¥å’Œ Elvis æ“ä½œç¬¦ï¼ˆ<code>?:</code>ï¼‰ã€‚è¿™æ˜¯å¤„ç†ç©ºå€¼æ—¶æœ€å¹¿æ³›ä½¿ç”¨çš„æ¨¡å¼ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-5">ç©ºå®‰å…¨è¾…åŠ©å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T?.<span class="hljs-title">orDefault</span><span class="hljs-params">(default: <span class="hljs-type">T</span>)</span></span>: T {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> ?: default
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T?.<span class="hljs-title">orThrow</span><span class="hljs-params">(exception: () -&gt; <span class="hljs-type">Exception</span>)</span></span>: T {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> ?: <span class="hljs-keyword">throw</span> exception()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T?.<span class="hljs-title">ifNull</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span>: T? {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span>) action()
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T?.<span class="hljs-title">ifNotNull</span><span class="hljs-params">(action: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span>: T? {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != <span class="hljs-literal">null</span>) action(<span class="hljs-keyword">this</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> username: String? = <span class="hljs-literal">null</span>
<span class="hljs-keyword">val</span> display = username.orDefault(<span class="hljs-string">"Guest"</span>) <span class="hljs-comment">// ç»“æœ: "Guest"</span>

<span class="hljs-keyword">val</span> userId: String? = <span class="hljs-literal">null</span>
<span class="hljs-keyword">val</span> id = userId.orThrow { IllegalArgumentException(<span class="hljs-string">"éœ€è¦ç”¨æˆ· ID"</span>) }

<span class="hljs-keyword">var</span> errorShown = <span class="hljs-literal">false</span>
<span class="hljs-keyword">val</span> result: String? = <span class="hljs-literal">null</span>
result.ifNull { errorShown = <span class="hljs-literal">true</span> }

<span class="hljs-keyword">val</span> user: User? = getUser()
user.ifNotNull { println(<span class="hljs-string">"æ‰¾åˆ°ç”¨æˆ·: <span class="hljs-subst">${it.name}</span>"</span>) }
</code></pre>
<h4 data-id="heading-6">é›†åˆç©ºå®‰å…¨æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>?.<span class="hljs-title">orEmpty</span><span class="hljs-params">()</span></span>: List&lt;T&gt; = <span class="hljs-keyword">this</span> ?: emptyList()

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;K, V&gt;</span> Map<span class="hljs-type">&lt;K, V&gt;</span>?.<span class="hljs-title">orEmpty</span><span class="hljs-params">()</span></span>: Map&lt;K, V&gt; = <span class="hljs-keyword">this</span> ?: emptyMap()

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>?.<span class="hljs-title">isNullOrEmpty</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span> || isEmpty()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>?.<span class="hljs-title">isNotNullOrEmpty</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> !isNullOrEmpty()
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> items: List&lt;String&gt;? = <span class="hljs-literal">null</span>
items.orEmpty().forEach { println(it) } <span class="hljs-comment">// å®‰å…¨éå†</span>

<span class="hljs-keyword">val</span> map: Map&lt;String, <span class="hljs-built_in">Int</span>&gt;? = <span class="hljs-literal">null</span>
<span class="hljs-keyword">val</span> count = map.orEmpty().size <span class="hljs-comment">// ç»“æœ: 0</span>

<span class="hljs-keyword">if</span> (items.isNotNullOrEmpty()) {
    <span class="hljs-comment">// å¤„ç† items</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-7">æ¨¡å¼ 3ï¼šé›†åˆæ‰©å±• (Collection Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> å¸¸è§çš„é›†åˆæ“ä½œå¾€å¾€éœ€è¦ç¼–å†™å†—é•¿çš„ä»£ç ã€‚</p>
<h4 data-id="heading-8">å®ç”¨é›†åˆæ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">second</span><span class="hljs-params">()</span></span>: T {
    <span class="hljs-keyword">if</span> (size &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">throw</span> NoSuchElementException(<span class="hljs-string">"åˆ—è¡¨å…ƒç´ ä¸è¶³ 2 ä¸ª"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-number">1</span>]
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">secondOrNull</span><span class="hljs-params">()</span></span>: T? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (size &gt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">this</span>[<span class="hljs-number">1</span>] <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">takeIfNotEmpty</span><span class="hljs-params">()</span></span>: List&lt;T&gt;? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (isNotEmpty()) <span class="hljs-keyword">this</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">split</span><span class="hljs-params">(predicate: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Boolean</span>)</span></span>: Pair&lt;List&lt;T&gt;, List&lt;T&gt;&gt; {
    <span class="hljs-keyword">return</span> partition(predicate)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Iterable<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">sumByLong</span><span class="hljs-params">(selector: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Long</span>)</span></span>: <span class="hljs-built_in">Long</span> {
    <span class="hljs-keyword">return</span> fold(<span class="hljs-number">0L</span>) { sum, element -&gt; sum + selector(element) }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> numbers = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
<span class="hljs-keyword">val</span> secondNum = numbers.secondOrNull() <span class="hljs-comment">// ç»“æœ: 2</span>

<span class="hljs-keyword">val</span> empty = emptyList&lt;String&gt;()
empty.takeIfNotEmpty() <span class="hljs-comment">// ç»“æœ: null</span>

<span class="hljs-keyword">val</span> (evens, odds) = numbers.split { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> }
<span class="hljs-comment">// evens = [2, 4], odds = [1, 3, 5]</span>

<span class="hljs-keyword">val</span> files = listOf(
    File(<span class="hljs-string">"file1.txt"</span>, <span class="hljs-number">100L</span>),
    File(<span class="hljs-string">"file2.txt"</span>, <span class="hljs-number">200L</span>)
)
<span class="hljs-keyword">val</span> totalSize = files.sumByLong { it.size } <span class="hljs-comment">// ç»“æœ: 300L</span>
</code></pre>
<h4 data-id="heading-9">é«˜çº§é›†åˆæ“ä½œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">replaceAll</span><span class="hljs-params">(oldValue: <span class="hljs-type">T</span>, newValue: <span class="hljs-type">T</span>)</span></span>: List&lt;T&gt; {
    <span class="hljs-keyword">return</span> map { <span class="hljs-keyword">if</span> (it == oldValue) newValue <span class="hljs-keyword">else</span> it }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">chunkedBy</span><span class="hljs-params">(predicate: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Boolean</span>)</span></span>: List&lt;List&lt;T&gt;&gt; {
    <span class="hljs-keyword">val</span> result = mutableListOf&lt;List&lt;T&gt;&gt;()
    <span class="hljs-keyword">var</span> currentChunk = mutableListOf&lt;T&gt;()
    
    forEach { item -&gt;
        <span class="hljs-keyword">if</span> (predicate(item) &amp;&amp; currentChunk.isNotEmpty()) {
            result.add(currentChunk)
            currentChunk = mutableListOf()
        }
        currentChunk.add(item)
    }
    
    <span class="hljs-keyword">if</span> (currentChunk.isNotEmpty()) {
        result.add(currentChunk)
    }
    
    <span class="hljs-keyword">return</span> result
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">duplicates</span><span class="hljs-params">()</span></span>: List&lt;T&gt; {
    <span class="hljs-keyword">return</span> groupingBy { it }
        .eachCount()
        .filter { it.value &gt; <span class="hljs-number">1</span> }
        .keys
        .toList()
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> items = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>)
<span class="hljs-keyword">val</span> dups = items.duplicates() <span class="hljs-comment">// ç»“æœ: [1, 2]</span>

<span class="hljs-keyword">val</span> words = listOf(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-string">"kotlin"</span>)
<span class="hljs-keyword">val</span> unique = words.replaceAll(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"hi"</span>) <span class="hljs-comment">// ç»“æœ: ["hi", "world", "hi", "kotlin"]</span>
</code></pre>
<hr/>
<h3 data-id="heading-10">æ¨¡å¼ 4ï¼šContext æ‰©å±• (Context Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> Android ä¸­é‡å¤ç¹ççš„ Context ç›¸å…³æ“ä½œã€‚</p>
<h4 data-id="heading-11">Context æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">toast</span><span class="hljs-params">(message: <span class="hljs-type">String</span>, duration: <span class="hljs-type">Int</span> = Toast.LENGTH_SHORT)</span></span> {
    Toast.makeText(<span class="hljs-keyword">this</span>, message, duration).show()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">showAlertDialog</span><span class="hljs-params">(
    title: <span class="hljs-type">String</span>,
    message: <span class="hljs-type">String</span>,
    positiveButton: <span class="hljs-type">String</span> = <span class="hljs-string">"ç¡®å®š"</span>,
    onPositive: () -&gt; <span class="hljs-type">Unit</span> = {}
)</span></span> {
    AlertDialog.Builder(<span class="hljs-keyword">this</span>)
        .setTitle(title)
        .setMessage(message)
        .setPositiveButton(positiveButton) { _, _ -&gt; onPositive() }
        .show()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">hideKeyboard</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
    <span class="hljs-keyword">val</span> imm = getSystemService(Context.INPUT_METHOD_SERVICE) <span class="hljs-keyword">as</span> InputMethodManager
    imm.hideSoftInputFromWindow(view.windowToken, <span class="hljs-number">0</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">showKeyboard</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
    view.requestFocus()
    <span class="hljs-keyword">val</span> imm = getSystemService(Context.INPUT_METHOD_SERVICE) <span class="hljs-keyword">as</span> InputMethodManager
    imm.showSoftInput(view, InputMethodManager.SHOW_IMPLICIT)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">isNetworkAvailable</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">val</span> connectivityManager = getSystemService(Context.CONNECTIVITY_SERVICE) <span class="hljs-keyword">as</span> ConnectivityManager
    <span class="hljs-keyword">val</span> activeNetwork = connectivityManager.activeNetworkInfo
    <span class="hljs-keyword">return</span> activeNetwork?.isConnected == <span class="hljs-literal">true</span>
}

<span class="hljs-comment">// åœ¨ Activity/Fragment ä¸­çš„ç”¨æ³•ç¤ºä¾‹</span>
toast(<span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>)

showAlertDialog(
    title = <span class="hljs-string">"ç¡®è®¤"</span>,
    message = <span class="hljs-string">"åˆ é™¤è¯¥é¡¹ç›®ï¼Ÿ"</span>,
    positiveButton = <span class="hljs-string">"åˆ é™¤"</span>
) {
    deleteItem()
}

<span class="hljs-keyword">if</span> (isNetworkAvailable()) {
    loadData()
} <span class="hljs-keyword">else</span> {
    toast(<span class="hljs-string">"æ— ç½‘ç»œè¿æ¥"</span>)
}

hideKeyboard(editText)
</code></pre>
<hr/>
<h3 data-id="heading-12">æ¨¡å¼ 5ï¼šæ—¥æœŸä¸æ—¶é—´æ‰©å±• (Date and Time Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> å¤æ‚çš„æ—¥æœŸæ ¼å¼åŒ–ä¸æ—¶é—´è®¡ç®—é€»è¾‘ã€‚</p>
<h4 data-id="heading-13">æ—¥æœŸæ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">formatTo</span><span class="hljs-params">(pattern: <span class="hljs-type">String</span> = <span class="hljs-string">"yyyy-MM-dd"</span>)</span></span>: String {
    <span class="hljs-keyword">val</span> formatter = SimpleDateFormat(pattern, Locale.getDefault())
    <span class="hljs-keyword">return</span> formatter.format(<span class="hljs-keyword">this</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">toCalendar</span><span class="hljs-params">()</span></span>: Calendar {
    <span class="hljs-keyword">return</span> Calendar.getInstance().apply {
        time = <span class="hljs-keyword">this</span><span class="hljs-symbol">@toCalendar</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">addDays</span><span class="hljs-params">(days: <span class="hljs-type">Int</span>)</span></span>: Date {
    <span class="hljs-keyword">return</span> toCalendar().apply {
        add(Calendar.DAY_OF_MONTH, days)
    }.time
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">addHours</span><span class="hljs-params">(hours: <span class="hljs-type">Int</span>)</span></span>: Date {
    <span class="hljs-keyword">return</span> toCalendar().apply {
        add(Calendar.HOUR_OF_DAY, hours)
    }.time
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">isToday</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">val</span> today = Calendar.getInstance()
    <span class="hljs-keyword">val</span> dateCalendar = toCalendar()
    <span class="hljs-keyword">return</span> today.<span class="hljs-keyword">get</span>(Calendar.YEAR) == dateCalendar.<span class="hljs-keyword">get</span>(Calendar.YEAR) &amp;&amp;
           today.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_YEAR) == dateCalendar.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_YEAR)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">isFuture</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> time &gt; System.currentTimeMillis()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">isPast</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> time &lt; System.currentTimeMillis()
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> now = Date()
<span class="hljs-keyword">val</span> formatted = now.formatTo(<span class="hljs-string">"MMM dd, yyyy"</span>) <span class="hljs-comment">// ç»“æœ: "Jan 08, 2026"</span>

<span class="hljs-keyword">val</span> tomorrow = now.addDays(<span class="hljs-number">1</span>)
<span class="hljs-keyword">val</span> inThreeHours = now.addHours(<span class="hljs-number">3</span>)

<span class="hljs-keyword">if</span> (deadline.isFuture()) {
    println(<span class="hljs-string">"è¿˜æœ‰æ—¶é—´ï¼"</span>)
}
</code></pre>
<h4 data-id="heading-14">ç°ä»£æ—¥æœŸ API æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> LocalDateTime.<span class="hljs-title">formatTo</span><span class="hljs-params">(pattern: <span class="hljs-type">String</span> = <span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> format(DateTimeFormatter.ofPattern(pattern))
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> LocalDate.<span class="hljs-title">isWeekend</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> dayOfWeek == DayOfWeek.SATURDAY || dayOfWeek == DayOfWeek.SUNDAY
}
<span class="hljs-function"><span class="hljs-keyword">fun</span> LocalDate.<span class="hljs-title">isWeekday</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> !isWeekend()
}
<span class="hljs-function"><span class="hljs-keyword">fun</span> LocalDateTime.<span class="hljs-title">toEpochMillis</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Long</span> {
    <span class="hljs-keyword">return</span> atZone(ZoneId.systemDefault()).toInstant().toEpochMilli()
}
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Long</span>.<span class="hljs-title">toLocalDateTime</span><span class="hljs-params">()</span></span>: LocalDateTime {
    <span class="hljs-keyword">return</span> LocalDateTime.ofInstant(Instant.ofEpochMilli(<span class="hljs-keyword">this</span>), ZoneId.systemDefault())
}
<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">val</span> now = LocalDateTime.now()
<span class="hljs-keyword">val</span> display = now.formatTo(<span class="hljs-string">"MMM dd, yyyy HH:mm"</span>) <span class="hljs-comment">// "Jan 08, 2026 15:30"</span>
<span class="hljs-keyword">val</span> date = LocalDate.now()
<span class="hljs-keyword">if</span> (date.isWeekend()) {
    println(<span class="hljs-string">"It's the weekend!"</span>)
}
<span class="hljs-keyword">val</span> timestamp = System.currentTimeMillis()
<span class="hljs-keyword">val</span> dateTime = timestamp.toLocalDateTime()
</code></pre>
<hr/>
<h3 data-id="heading-15">æ¨¡å¼ 6ï¼šè§†å›¾æ‰©å±• (View Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> é‡å¤çš„ View æ“ä½œä»£ç ã€‚</p>
<h4 data-id="heading-16">è§†å›¾æ˜¾ç¤ºçŠ¶æ€æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">visible</span><span class="hljs-params">()</span></span> {
    visibility = View.VISIBLE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">invisible</span><span class="hljs-params">()</span></span> {
    visibility = View.INVISIBLE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">gone</span><span class="hljs-params">()</span></span> {
    visibility = View.GONE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">toggleVisibility</span><span class="hljs-params">()</span></span> {
    visibility = <span class="hljs-keyword">if</span> (visibility == View.VISIBLE) View.GONE <span class="hljs-keyword">else</span> View.VISIBLE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">isVisible</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = visibility == View.VISIBLE

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">isGone</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = visibility == View.GONE

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">visibleIf</span><span class="hljs-params">(condition: <span class="hljs-type">Boolean</span>)</span></span> {
    visibility = <span class="hljs-keyword">if</span> (condition) View.VISIBLE <span class="hljs-keyword">else</span> View.GONE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">goneIf</span><span class="hljs-params">(condition: <span class="hljs-type">Boolean</span>)</span></span> {
    visibility = <span class="hljs-keyword">if</span> (condition) View.GONE <span class="hljs-keyword">else</span> View.VISIBLE
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
loadingSpinner.visible()
errorMessage.gone()
submitButton.visibleIf(form.isValid())
errorView.goneIf(<span class="hljs-keyword">data</span> != <span class="hljs-literal">null</span>)
</code></pre>
<h4 data-id="heading-17">è§†å›¾äº¤äº’æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">onClick</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    setOnClickListener { action() }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">onLongClick</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Boolean</span>)</span></span> {
    setOnLongClickListener { action() }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">setMargin</span><span class="hljs-params">(left: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>, top: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>, right: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>, bottom: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>)</span></span> {
    <span class="hljs-keyword">val</span> params = layoutParams <span class="hljs-keyword">as</span>? ViewGroup.MarginLayoutParams
    params?.setMargins(left, top, right, bottom)
    layoutParams = params
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">setPadding</span><span class="hljs-params">(padding: <span class="hljs-type">Int</span>)</span></span> {
    setPadding(padding, padding, padding, padding)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">updatePadding</span><span class="hljs-params">(
    left: <span class="hljs-type">Int</span> = paddingLeft,
    top: <span class="hljs-type">Int</span> = paddingTop,
    right: <span class="hljs-type">Int</span> = paddingRight,
    bottom: <span class="hljs-type">Int</span> = paddingBottom
)</span></span> {
    setPadding(left, top, right, bottom)
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
button.onClick {
    performAction()
}

imageView.onLongClick {
    showContextMenu()
    <span class="hljs-literal">true</span>
}

<span class="hljs-comment">// ä»…è®¾ç½®å·¦å³è¾¹è·ï¼Œæ— éœ€å…³å¿ƒå…¶ä»–æ–¹å‘</span>
view.setMargin(left = <span class="hljs-number">16</span>, right = <span class="hljs-number">16</span>)

<span class="hljs-comment">// ä¸€é”®è®¾ç½®å…¨æ–¹å‘å†…è¾¹è·</span>
view.setPadding(<span class="hljs-number">24</span>)
</code></pre>
<hr/>
<h3 data-id="heading-18">æ¨¡å¼ 7ï¼šèµ„æºè®¿é—®æ‰©å±• (Resource Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> èµ„æºè®¿é—®ä»£ç è¿‡äºå†—é•¿ã€‚</p>
<h4 data-id="heading-19">èµ„æºè®¿é—®æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">drawable</span><span class="hljs-params">(<span class="hljs-meta">@DrawableRes</span> id: <span class="hljs-type">Int</span>)</span></span>: Drawable? {
    <span class="hljs-keyword">return</span> ContextCompat.getDrawable(<span class="hljs-keyword">this</span>, id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">color</span><span class="hljs-params">(<span class="hljs-meta">@ColorRes</span> id: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> ContextCompat.getColor(<span class="hljs-keyword">this</span>, id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">string</span><span class="hljs-params">(<span class="hljs-meta">@StringRes</span> id: <span class="hljs-type">Int</span>, <span class="hljs-keyword">vararg</span> args: <span class="hljs-type">Any</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> getString(id, *args)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">dimension</span><span class="hljs-params">(<span class="hljs-meta">@DimenRes</span> id: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Float</span> {
    <span class="hljs-keyword">return</span> resources.getDimension(id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">dimensionPixelSize</span><span class="hljs-params">(<span class="hljs-meta">@DimenRes</span> id: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> resources.getDimensionPixelSize(id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">drawable</span><span class="hljs-params">(<span class="hljs-meta">@DrawableRes</span> id: <span class="hljs-type">Int</span>)</span></span>: Drawable? {
    <span class="hljs-keyword">return</span> context.drawable(id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">color</span><span class="hljs-params">(<span class="hljs-meta">@ColorRes</span> id: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> context.color(id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">string</span><span class="hljs-params">(<span class="hljs-meta">@StringRes</span> id: <span class="hljs-type">Int</span>, <span class="hljs-keyword">vararg</span> args: <span class="hljs-type">Any</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> context.string(id, *args)
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> icon = drawable(R.drawable.ic_star)
<span class="hljs-keyword">val</span> primaryColor = color(R.color.primary)
<span class="hljs-keyword">val</span> message = string(R.string.welcome_message, userName)
<span class="hljs-keyword">val</span> spacing = dimensionPixelSize(R.dimen.spacing_medium)

<span class="hljs-comment">// åœ¨ View ä¸­ä½¿ç”¨</span>
imageView.setImageDrawable(drawable(R.drawable.ic_profile))
textView.setTextColor(color(R.color.text_primary))
</code></pre>
<hr/>
<h3 data-id="heading-20">æ¨¡å¼ 8ï¼šæ•°å€¼æ‰©å±• (Number Extensions)</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">formatWithCommas</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%,d"</span>, <span class="hljs-keyword">this</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Double</span>.<span class="hljs-title">formatAsPrice</span><span class="hljs-params">(currencySymbol: <span class="hljs-type">String</span> = <span class="hljs-string">"$"</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"<span class="hljs-variable">$currencySymbol</span>%.2f"</span>.format(<span class="hljs-keyword">this</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Float</span>.<span class="hljs-title">roundTo</span><span class="hljs-params">(decimals: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Float</span> {
    <span class="hljs-keyword">val</span> multiplier = <span class="hljs-number">10.0</span>.pow(decimals)
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span> * multiplier).roundToInt() / multiplier.toFloat()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">toBoolean</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = <span class="hljs-keyword">this</span> != <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Boolean</span>.<span class="hljs-title">toInt</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>) <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">isEven</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = <span class="hljs-keyword">this</span> % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">isOdd</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = !isEven()

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> number = <span class="hljs-number">1234567</span>
<span class="hljs-keyword">val</span> formatted = number.formatWithCommas() <span class="hljs-comment">// ç»“æœ: "1,234,567"</span>

<span class="hljs-keyword">val</span> price = <span class="hljs-number">49.99</span>
<span class="hljs-keyword">val</span> display = price.formatAsPrice() <span class="hljs-comment">// ç»“æœ: "$49.99"</span>

<span class="hljs-keyword">val</span> value = <span class="hljs-number">3.14159f</span>
<span class="hljs-keyword">val</span> rounded = value.roundTo(<span class="hljs-number">2</span>) <span class="hljs-comment">// ç»“æœ: 3.14f</span>

<span class="hljs-keyword">val</span> flag = <span class="hljs-number">1</span>
<span class="hljs-keyword">if</span> (flag.toBoolean()) {
    <span class="hljs-comment">// æ‰§è¡Œé€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-21">èŒƒå›´ä¸è¾¹ç•Œæ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">clamp</span><span class="hljs-params">(min: <span class="hljs-type">Int</span>, max: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
        <span class="hljs-keyword">this</span> &lt; min -&gt; min
        <span class="hljs-keyword">this</span> &gt; max -&gt; max
        <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">this</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Float</span>.<span class="hljs-title">clamp</span><span class="hljs-params">(min: <span class="hljs-type">Float</span>, max: <span class="hljs-type">Float</span>)</span></span>: <span class="hljs-built_in">Float</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
        <span class="hljs-keyword">this</span> &lt; min -&gt; min
        <span class="hljs-keyword">this</span> &gt; max -&gt; max
        <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">this</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">inRange</span><span class="hljs-params">(range: <span class="hljs-type">IntRange</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> <span class="hljs-keyword">in</span> range
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">toPercentage</span><span class="hljs-params">(total: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Float</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (total == <span class="hljs-number">0</span>) <span class="hljs-number">0f</span> <span class="hljs-keyword">else</span> (<span class="hljs-keyword">this</span>.toFloat() / total) * <span class="hljs-number">100</span>
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> value = <span class="hljs-number">150</span>
<span class="hljs-keyword">val</span> clamped = value.clamp(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>) <span class="hljs-comment">// ç»“æœ: 100</span>

<span class="hljs-keyword">val</span> progress = <span class="hljs-number">75</span>
<span class="hljs-keyword">if</span> (progress.inRange(<span class="hljs-number">50.</span><span class="hljs-number">.100</span>)) {
    println(<span class="hljs-string">"è¿›åº¦è¿‡åŠ"</span>)
}

<span class="hljs-keyword">val</span> completed = <span class="hljs-number">30</span>
<span class="hljs-keyword">val</span> total = <span class="hljs-number">100</span>
<span class="hljs-keyword">val</span> percentage = completed.toPercentage(total) <span class="hljs-comment">// ç»“æœ: 30.0</span>
</code></pre>
<hr/>
<h3 data-id="heading-22">æ¨¡å¼ 9ï¼šFlow ä¸ LiveData æ‰©å±• (Flow and LiveData Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> Flow å’Œ LiveData çš„æ“ä½œè¿‡äºç¹çã€‚</p>
<h4 data-id="heading-23">Flow æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Flow<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">throttleFirst</span><span class="hljs-params">(windowDuration: <span class="hljs-type">Long</span>)</span></span>: Flow&lt;T&gt; = flow {
    <span class="hljs-keyword">var</span> lastEmissionTime = <span class="hljs-number">0L</span>
    collect { value -&gt;
        <span class="hljs-keyword">val</span> currentTime = System.currentTimeMillis()
        <span class="hljs-keyword">if</span> (currentTime - lastEmissionTime &gt;= windowDuration) {
            lastEmissionTime = currentTime
            emit(value)
        }
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Flow<span class="hljs-type">&lt;List&lt;T&gt;</span>&gt;.<span class="hljs-title">filterNotEmpty</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;T&gt;&gt; {
    <span class="hljs-keyword">return</span> filter { it.isNotEmpty() }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Flow<span class="hljs-type">&lt;T?&gt;</span>.<span class="hljs-title">filterNotNull</span><span class="hljs-params">()</span></span>: Flow&lt;T&gt; {
    <span class="hljs-keyword">return</span> mapNotNull { it }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Flow<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">onEachDebounce</span><span class="hljs-params">(timeoutMillis: <span class="hljs-type">Long</span>, action: <span class="hljs-type">suspend</span> (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span>: Flow&lt;T&gt; {
    <span class="hljs-keyword">return</span> debounce(timeoutMillis).onEach { action(it) }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
searchQueryFlow
    .debounce(<span class="hljs-number">300</span>) <span class="hljs-comment">// é˜²æŠ–</span>
    .filterNotNull()
    .collect { query -&gt;
        performSearch(query)
    }

clickFlow
    .throttleFirst(<span class="hljs-number">1000</span>) <span class="hljs-comment">// èŠ‚æµï¼Œé˜²æ­¢è¿ç»­ç‚¹å‡»</span>
    .collect {
        handleClick()
    }

itemsFlow
    .filterNotEmpty()
    .collect { items -&gt;
        displayItems(items)
    }
</code></pre>
<h4 data-id="heading-24">LiveData æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> LiveData<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">observeOnce</span><span class="hljs-params">(owner: <span class="hljs-type">LifecycleOwner</span>, observer: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    observe(owner, <span class="hljs-keyword">object</span> : Observer&lt;T&gt; {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onChanged</span><span class="hljs-params">(value: <span class="hljs-type">T</span>)</span></span> {
            observer(value)
            removeObserver(<span class="hljs-keyword">this</span>)
        }
    })
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> LiveData<span class="hljs-type">&lt;T?&gt;</span>.<span class="hljs-title">filterNotNull</span><span class="hljs-params">()</span></span>: LiveData&lt;T&gt; {
    <span class="hljs-keyword">return</span> map { it }.filter { it != <span class="hljs-literal">null</span> } <span class="hljs-keyword">as</span> LiveData&lt;T&gt;
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;X, Y&gt;</span> LiveData<span class="hljs-type">&lt;X&gt;</span>.<span class="hljs-title">map</span><span class="hljs-params">(transform: (<span class="hljs-type">X</span>) -&gt; <span class="hljs-type">Y</span>)</span></span>: LiveData&lt;Y&gt; {
    <span class="hljs-keyword">return</span> Transformations.map(<span class="hljs-keyword">this</span>, transform)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;X, Y&gt;</span> LiveData<span class="hljs-type">&lt;X&gt;</span>.<span class="hljs-title">switchMap</span><span class="hljs-params">(transform: (<span class="hljs-type">X</span>) -&gt; <span class="hljs-type">LiveData</span>&lt;<span class="hljs-type">Y</span>&gt;)</span></span>: LiveData&lt;Y&gt; {
    <span class="hljs-keyword">return</span> Transformations.switchMap(<span class="hljs-keyword">this</span>, transform)
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
userLiveData.observeOnce(viewLifecycleOwner) { user -&gt;
    initializeUser(user) <span class="hljs-comment">// ä»…è§‚å¯Ÿä¸€æ¬¡</span>
}

<span class="hljs-keyword">val</span> userNameLiveData = userLiveData
    .filterNotNull()
    .map { it.name }
</code></pre>
<hr/>
<h3 data-id="heading-25">æ¨¡å¼ 10ï¼šIntent ä¸ Bundle æ‰©å±• (Intent and Bundle Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> Intent çš„åˆ›å»ºå’Œ Bundle çš„æ“ä½œä»£ç è¿‡äºç¹çã€‚</p>
<h4 data-id="heading-26">Intent æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Activity&gt;</span> Context.<span class="hljs-title">startActivity</span><span class="hljs-params">(
    options: <span class="hljs-type">Bundle</span>? = <span class="hljs-literal">null</span>,
    <span class="hljs-keyword">init</span>: <span class="hljs-type">Intent</span>.() -&gt; <span class="hljs-type">Unit</span> = {}
)</span></span> {
    <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, T::<span class="hljs-keyword">class</span>.java)
    intent.<span class="hljs-keyword">init</span>()
    startActivity(intent, options)
}

<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Activity&gt;</span> Context.<span class="hljs-title">startActivityWithExtras</span><span class="hljs-params">(
    <span class="hljs-keyword">vararg</span> params: <span class="hljs-type">Pair</span>&lt;<span class="hljs-type">String</span>, Any?&gt;
)</span></span> {
    <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, T::<span class="hljs-keyword">class</span>.java)
    params.forEach { (key, value) -&gt;
        <span class="hljs-keyword">when</span> (value) {
            <span class="hljs-keyword">is</span> String -&gt; intent.putExtra(key, value)
            <span class="hljs-keyword">is</span> <span class="hljs-built_in">Int</span> -&gt; intent.putExtra(key, value)
            <span class="hljs-keyword">is</span> <span class="hljs-built_in">Boolean</span> -&gt; intent.putExtra(key, value)
            <span class="hljs-keyword">is</span> Parcelable -&gt; intent.putExtra(key, value)
            <span class="hljs-keyword">is</span> Serializable -&gt; intent.putExtra(key, value)
        }
    }
    startActivity(intent)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Intent.<span class="hljs-title">clearStack</span><span class="hljs-params">()</span></span> {
    flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
startActivity&lt;ProfileActivity&gt; {
    putExtra(<span class="hljs-string">"userId"</span>, userId)
    putExtra(<span class="hljs-string">"userName"</span>, userName)
}

startActivityWithExtras&lt;DetailActivity&gt;(
    <span class="hljs-string">"itemId"</span> to itemId,
    <span class="hljs-string">"showComments"</span> to <span class="hljs-literal">true</span>
)

<span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, MainActivity::<span class="hljs-keyword">class</span>.java)
intent.clearStack()
startActivity(intent)
</code></pre>
<h4 data-id="heading-27">Bundle æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Parcelable&gt;</span> Bundle.<span class="hljs-title">getParcelableCompat</span><span class="hljs-params">(key: <span class="hljs-type">String</span>)</span></span>: T? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {
        getParcelable(key, T::<span class="hljs-keyword">class</span>.java)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-meta">@Suppress(<span class="hljs-string">"DEPRECATION"</span>)</span>
        getParcelable(key)
    }
}

<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Serializable&gt;</span> Bundle.<span class="hljs-title">getSerializableCompat</span><span class="hljs-params">(key: <span class="hljs-type">String</span>)</span></span>: T? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {
        getSerializable(key, T::<span class="hljs-keyword">class</span>.java)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-meta">@Suppress(<span class="hljs-string">"DEPRECATION"</span>)</span>
        getSerializable(key) <span class="hljs-keyword">as</span>? T
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bundleOf</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> pairs: <span class="hljs-type">Pair</span>&lt;<span class="hljs-type">String</span>, Any?&gt;)</span></span>: Bundle {
    <span class="hljs-keyword">return</span> Bundle().apply {
        pairs.forEach { (key, value) -&gt;
            <span class="hljs-keyword">when</span> (value) {
                <span class="hljs-keyword">is</span> String -&gt; putString(key, value)
                <span class="hljs-keyword">is</span> <span class="hljs-built_in">Int</span> -&gt; putInt(key, value)
                <span class="hljs-keyword">is</span> <span class="hljs-built_in">Boolean</span> -&gt; putBoolean(key, value)
                <span class="hljs-keyword">is</span> Parcelable -&gt; putParcelable(key, value)
                <span class="hljs-keyword">is</span> Serializable -&gt; putSerializable(key, value)
            }
        }
    }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> bundle = bundleOf(
    <span class="hljs-string">"userId"</span> to <span class="hljs-number">123</span>,
    <span class="hljs-string">"userName"</span> to <span class="hljs-string">"John"</span>,
    <span class="hljs-string">"isPremium"</span> to <span class="hljs-literal">true</span>
)

<span class="hljs-keyword">val</span> user: User? = arguments?.getParcelableCompat(<span class="hljs-string">"user"</span>)
<span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: MyData? = savedInstanceState?.getSerializableCompat(<span class="hljs-string">"data"</span>)
</code></pre>
<hr/>
<p>æ‰©å±•å‡½æ•°å°†é‡å¤çš„ä»£ç è½¬åŒ–ä¸ºç®€æ´ä¸”å…·è¡¨ç°åŠ›çš„ APIã€‚ä»è¿™åç§æ¨¡å¼å¼€å§‹å°è¯•ï¼Œä½ å°†è§è¯ä½ çš„ä»£ç åº“å˜å¾—æ›´åŠ æ˜“äºç»´æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentå¼€å‘åº”çŸ¥åº”ä¼š(Langfuse)ï¼šLangfuse Sessionæ¦‚å¿µè¯¦è§£å’Œå®æˆ˜åº”ç”¨]]></title>    <link>https://juejin.cn/post/7605807405307625535</link>    <guid>https://juejin.cn/post/7605807405307625535</guid>    <pubDate>2026-02-13T03:27:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605807405307625535" data-draft-id="7605941424535978038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentå¼€å‘åº”çŸ¥åº”ä¼š(Langfuse)ï¼šLangfuse Sessionæ¦‚å¿µè¯¦è§£å’Œå®æˆ˜åº”ç”¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Python,LLM"/> <meta itemprop="datePublished" content="2026-02-13T03:27:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zaizaizhao"/> <meta itemprop="url" content="https://juejin.cn/user/906425682113933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentå¼€å‘åº”çŸ¥åº”ä¼š(Langfuse)ï¼šLangfuse Sessionæ¦‚å¿µè¯¦è§£å’Œå®æˆ˜åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/906425682113933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zaizaizhao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:27:22.000Z" title="Fri Feb 13 2026 03:27:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ€è¿‘åœ¨åšä¸€ä¸ª Text-to-SQL çš„ Agent é¡¹ç›® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzaizaizhao%2Feasysql" target="_blank" title="https://github.com/zaizaizhao/easysql" ref="nofollow noopener noreferrer">EasySQL</a>ï¼Œè¿™ç¯‡æ–‡ç« å°±æŠŠæˆ‘langfuseçš„sessionä½¿ç”¨æ•´ç†ä¸€ä¸‹ï¼Œä»£ç éƒ½æ˜¯ä»é¡¹ç›®é‡Œç›´æ¥æ¬çš„ï¼Œæ¬¢è¿å¤§ä½¬ä»¬é«˜æŠ¬è´µæ‰‹ç‚¹ç‚¹starï¼Œå…±å»ºã€äº¤æµã€‚</p>
</blockquote>
<h3 data-id="heading-0">Langfuseå®˜æ–¹æ–‡æ¡£çš„åŸæ–‡å®šä¹‰</h3>
<blockquote>
<p>Many interactions with LLM applications span multiple traces and observations. Sessions in Langfuse are a special way to group these observations across traces together and see a simple session replay of the entire interaction.
Optionally, traces can be grouped into sessions. Sessions are used to group traces that are part of the same user interaction. A common example is a thread in a chat interface.</p>
</blockquote>
<p>ç¿»è¯‘ä¸€ä¸‹ï¼šä¸€æ¬¡ç”¨æˆ·ä¸ LLM åº”ç”¨çš„äº¤äº’å¾€å¾€ä¸åªä¸€ä¸ªè¯·æ±‚ã€‚æ¯”å¦‚ç”¨æˆ·åœ¨èŠå¤©ç•Œé¢ä¸­è¿ç»­é—®äº† 3 ä¸ªé—®é¢˜ï¼Œæ¯ä¸ªé—®é¢˜æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Traceï¼ˆä¸€æ¬¡å®Œæ•´çš„ LLMè°ƒç”¨é“¾è·¯ï¼‰ï¼Œä½†å®ƒä»¬å±äºåŒä¸€æ¬¡ä¼šè¯ã€‚Session å°±æ˜¯æŠŠè¿™äº›ç›¸å…³çš„ Trace å½’åˆ°ä¸€ç»„ã€‚</p>
<h5 data-id="heading-1">Session</h5>





















<table><thead><tr><th>session_id æ ¼å¼</th><th>ä»»æ„ US-ASCII å­—ç¬¦ä¸²ï¼Œå°äº 200 å­—ç¬¦</th></tr></thead><tbody><tr><td>å½’ç»„é€»è¾‘</td><td>æ‰€æœ‰æºå¸¦ç›¸åŒ session_id çš„ Trace è‡ªåŠ¨å½’å…¥åŒä¸€ä¸ª Session</td></tr><tr><td>åˆ›å»ºæ—¶æœº</td><td>æ— éœ€æ˜¾å¼åˆ›å»º Session å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªæºå¸¦è¯¥ session_id çš„ Trace å‡ºç°æ—¶è‡ªåŠ¨åˆ›å»º</td></tr><tr><td>Trace çš„å…³ç³»</td><td>ä¸€ä¸ª Session åŒ…å«å¤šä¸ª Traceï¼Œä¸€ä¸ª Trace åªå±äºä¸€ä¸ª Session</td></tr></tbody></table>
<h3 data-id="heading-2">é¡¹ç›®ä¸¾ä¾‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55cf9fda7f0e4c008d4e55c9059cbbba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=%2FxdHKHN1MMoZ5hOExF9FK8UQwCw%3D" alt="image.png" loading="lazy"/></p>
<p>æ²¡æœ‰Sessionæ—¶ï¼šè¿™ä¸¤ä¸ªTraceï¼ˆä¸€ä¸ªä¼šè¯ä¸­çš„ä¸¤ä¸ªé—®ç­”ï¼‰ åœ¨Langfuse Dashboardä¸­æ˜¯æ•£è½çš„ï¼Œä½ ä¸çŸ¥é“å®ƒä»¬ä¹‹é—´æœ‰å…³è”ã€‚æœ‰Sessionæ—¶ï¼šç‚¹è¿›æŸä¸ªSessionï¼Œèƒ½çœ‹åˆ°å®Œæ•´çš„å¤šæ¬¡å¯¹è¯å›æ”¾â€”â€”ç”¨æˆ·ä»ç¬¬1ä¸ªé—®é¢˜åˆ°ç¬¬3ä¸ªé—®é¢˜çš„å®Œæ•´é“¾è·¯ã€‚</p>
<h5 data-id="heading-3">æ— sessionçš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„traceéƒ½é›†ä¸­å±•ç¤ºæ— æ³•ç­›é€‰</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca5242ec11bb449285ce93e36d0543f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=uT22W6CeJDMHnJDVYAu5P%2FlAXJM%3D" alt="image.png" loading="lazy"/></p>
<p>æœ‰sessionçš„æƒ…å†µï¼Œå¯ä»¥æ ¹æ®sessionå±•ç¤ºï¼Œæˆ‘è¿™é‡Œå°±å¯ä»¥é€šè¿‡åŒä¸ªsessionæ¥è§‚å¯Ÿç¬¬äºŒä¸ªé—®é¢˜æœ‰æ²¡æœ‰å–å¾—ç¬¬ä¸€ä¸ªé—®é¢˜çš„å†å²å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œç”±æ­¤æ¥åˆ¤æ–­ä»£ç ä¸­çš„å¤„ç†æ˜¯å¦åˆç†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c964b022d921418ca5729b12c8fbbb9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=kGqmnZzZvjsOHWVthFLpIg5RaiY%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥åœ¨Dashboardsä¸­ç­›é€‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea47731103534a73ad8db86c288ad898~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=SfbNp6%2B4JCaWmxXav2h6kH060mk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">ä»£ç å®ç°</h4>
<p>æ ¸å¿ƒä»£ç åœ¨ query_service.pyã€‚ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªä¼šè¯session idçš„åœ°æ–¹ï¼Œç”±äºé¡¹ç›®ä¸­å·²ç»è®¾ç½®äº†session idæ¥åŒºåˆ†ä¸åŒçš„ä¼šè¯ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç›´æ¥å¤ç”¨ï¼Œä¿è¯langfuseä¸­çš„session idå’Œæ•°æ®åº“ä¸­çš„ä¼šè¯session idä¸€è‡´ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼šå½“åœ¨ Langfuse Dashboard ä¸­çœ‹åˆ°æŸä¸ªSession æœ‰é—®é¢˜æ—¶ï¼Œå¯ä»¥ç›´æ¥ç”¨è¿™ä¸ª ID å»ä¸šåŠ¡æ•°æ®åº“ä¸­æŸ¥å¯¹åº”çš„ä¼šè¯è®°å½•ï¼Œä¸¤è¾¹çš„ ID æ˜¯ä¸€è‡´çš„ã€‚ï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘è®¤ä¸ºæœ€é‡è¦çš„ä¸€ç‚¹ï¼‰</p>
<pre><code class="hljs language-python" lang="python">  <span class="hljs-keyword">def</span> <span class="hljs-title function_">_make_config</span>(<span class="hljs-params">self, session_id: <span class="hljs-built_in">str</span>, thread_id: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span></span>) -&gt; RunnableConfig:
      effective_thread_id = thread_id <span class="hljs-keyword">or</span> session_id
      config: RunnableConfig = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: effective_thread_id}}
      <span class="hljs-keyword">if</span> self.callbacks:
          config[<span class="hljs-string">"callbacks"</span>] = self.callbacks
          config[<span class="hljs-string">"metadata"</span>] = {                          <span class="hljs-comment"># â† å…³é”®</span>
              <span class="hljs-string">"langfuse_session_id"</span>: session_id,          <span class="hljs-comment"># â† Session éš”ç¦»</span>
              <span class="hljs-string">"langfuse_tags"</span>: [<span class="hljs-string">"text2sql"</span>],              <span class="hljs-comment"># â† æ ‡ç­¾</span>
          }
          logger.debug(<span class="hljs-string">f"LangFuse callbacks attached: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.callbacks)}</span> handler(s)"</span>)
      <span class="hljs-keyword">return</span> config
</code></pre>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> self.graph.astream(
        input_state,
        self._make_config(session.session_id, effective_thread_id),
        stream_mode=[<span class="hljs-string">"updates"</span>, <span class="hljs-string">"custom"</span>],
    ):
</code></pre>
<p>å·¥ä½œåŸç†</p>
<p>è¿™é‡Œç”¨çš„æ˜¯ Langfuse å®˜æ–¹æ¨èçš„ metadata ä¼ å‚æ–¹å¼ã€‚å®˜æ–¹æ–‡æ¡£åŸæ–‡ï¼š</p>
<blockquote>
<p>With the Python SDK, you can set trace attributes dynamically via metadata fields in chain invocation by passing a config dictionary.This is the simplest approach for adding trace context to your LangChain executions without additional setup.</p>
</blockquote>
<p>å®˜æ–¹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"> response = chain.invoke(
      {<span class="hljs-string">"topic"</span>: <span class="hljs-string">"cats"</span>},
      config={
          <span class="hljs-string">"callbacks"</span>: [langfuse_handler],
          <span class="hljs-string">"metadata"</span>: {
              <span class="hljs-string">"langfuse_user_id"</span>: <span class="hljs-string">"random-user"</span>,
              <span class="hljs-string">"langfuse_session_id"</span>: <span class="hljs-string">"random-session"</span>,     
              <span class="hljs-string">"langfuse_tags"</span>: [<span class="hljs-string">"random-tag-1"</span>, <span class="hljs-string">"random-tag-2"</span>] 
          }
      }
  )
</code></pre>
<h3 data-id="heading-5">Sessionå¸¦æ¥çš„ç›‘æ§æ„ä¹‰</h3>
<h5 data-id="heading-6">Session çº§åˆ«çš„èšåˆåˆ†æ</h5>

























<table><thead><tr><th>æ¯ä¸ª Session çš„ Trace æ•°é‡</th><th>ç”¨æˆ·å¹³å‡é—®å‡ è½®æ‰å®Œæˆä»»åŠ¡</th><th>** è½®æ¬¡å¤š = å¯èƒ½éœ€è¦ä¼˜åŒ–è¿½é—®ä½“éªŒ**</th></tr></thead><tbody><tr><td>æ¯ä¸ª Session çš„ æ€» Token</td><td>ä¸€æ¬¡å®Œæ•´äº¤äº’çš„æ€»æ¶ˆè€—</td><td>è¯„ä¼°å•æ¬¡ç”¨æˆ·äº¤äº’çš„æˆæœ¬</td></tr><tr><td>æ¯ä¸ª Session çš„ æ€»å»¶è¿Ÿ</td><td>ç”¨æˆ·å®Œæˆä»»åŠ¡çš„æ€»ç­‰å¾…æ—¶é—´</td><td>è¯„ä¼°ç«¯åˆ°ç«¯çš„ç”¨æˆ·ä½“éªŒ</td></tr><tr><td>æ¯ä¸ª Session çš„ å¤±è´¥ Trace æ¯”ä¾‹</td><td>å¤šè½®ä¸­æœ‰å‡ è½®å‡ºé”™</td><td>å®šä½å“ªäº›ç±»å‹çš„è¿½é—®å®¹æ˜“å¤±è´¥</td></tr></tbody></table>
<h5 data-id="heading-7">å¯¹æ¯”æ²¡æœ‰session</h5>






























<table><thead><tr><th>åœºæ™¯</th><th>æ²¡æœ‰ Session</th><th>æœ‰ Session</th></tr></thead><tbody><tr><td>æŸ¥çœ‹æŸç”¨æˆ·çš„å®Œæ•´äº¤äº’</td><td>éœ€è¦è‡ªå·±æŒ‰æ—¶é—´æ’åºã€æ‰‹åŠ¨å…³è”</td><td>ç›´æ¥ç‚¹è¿› Session çœ‹å›æ”¾</td></tr><tr><td>ç»Ÿè®¡"ç”¨æˆ·å¹³å‡å‡ è½®å®Œæˆä»»åŠ¡"</td><td>æ— æ³•ç»Ÿè®¡</td><td>Dashboard ç›´æ¥æä¾›</td></tr><tr><td>åˆ†æ"è¿½é—®æ—¶ SQL è´¨é‡æ˜¯å¦ä¸‹é™"</td><td>éœ€è¦å¯¼å‡ºæ•°æ®å†™è„šæœ¬</td><td>æŒ‰ Session å†…çš„ Trace é¡ºåºç›´æ¥å¯¹æ¯”</td></tr><tr><td>å®šä½"ç”¨æˆ·åé¦ˆä½“éªŒå·®"çš„é—®é¢˜</td><td>åªèƒ½é€æ¡ Trace æŸ¥çœ‹</td><td>æ‹¿åˆ° session_id ç›´æ¥çœ‹å…¨è¿‡ç¨‹</td></tr></tbody></table>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>sessionæ˜¯ä¸€ä¸ªå¾ˆå°çš„çŸ¥è¯†ç‚¹ï¼Œä½†æ˜¯ä½¿ç”¨çš„å¥½å¯¹æˆ‘ä»¬æ•´ä¸ªagentå¼€å‘å¸¦æ¥çš„å¢ç›Šæ˜¯å·¨å¤§ã€‚</p>
<p>ä»¥ä¸Šæ‰€æœ‰ä»£ç ç¤ºä¾‹å‡æ¥è‡ªæˆ‘çš„å¼€æºé¡¹ç›® <strong>EasySQL</strong> â€”â€” ä¸€ä¸ª Text-to-SQL æ™ºèƒ½ä½“åˆ†æåº”ç”¨ï¼Œé¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzaizaizhao%2Feasysql" target="_blank" title="https://github.com/zaizaizhao/easysql" ref="nofollow noopener noreferrer">github.com/zaizaizhao/â€¦</a>ã€‚é¡¹ç›®ä¸»è¦æŠ€æœ¯æ ˆåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>LangGraph</strong>ï¼šæ„å»ºå¤šæ­¥éª¤ Agent çŠ¶æ€æœºï¼Œæ”¯æŒæ¡ä»¶è·¯ç”±ã€Human-in-the-Loop æ¾„æ¸…ã€SQL ç”Ÿæˆâ†’éªŒè¯â†’ä¿®å¤çš„è¿­ä»£å¾ªç¯</li>
<li><strong>LangChain</strong>ï¼šLLM è°ƒç”¨æŠ½è±¡ä¸ RunnableConfig é…ç½®ä¼ é€’</li>
<li><strong>Langfuse</strong>ï¼šCallback + æ‰‹åŠ¨ Span åŒæ¨¡å¼å¯è§‚æµ‹æ€§ï¼Œå®ç°å…¨é“¾è·¯è¿½è¸ªä¸ä¸šåŠ¡æ±‡æ€»</li>
<li><strong>PostgreSQL + AsyncPostgresSaver</strong>ï¼šLangGraph Checkpointer çŠ¶æ€æŒä¹…åŒ–ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡</li>
<li><strong>FastAPI + Uvicorn</strong>ï¼šå¼‚æ­¥ API æœåŠ¡å±‚ï¼Œæä¾›æµå¼ SSE å“åº”</li>
<li><strong>Milvus</strong>ï¼šå‘é‡æ•°æ®åº“ï¼Œç”¨äº Schema è¯­ä¹‰æ£€ç´¢</li>
<li><strong>Neo4j</strong>ï¼š å›¾æ•°æ®åº“ï¼Œç”¨äºçŸ¥è¯†å›¾è°±æ„å»º</li>
<li><strong>Pydantic Settings</strong>ï¼šç±»å‹å®‰å…¨çš„é…ç½®ç®¡ç†ï¼Œæ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–</li>
</ul>
<p>é¡¹ç›®ç¤ºä¾‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64a13c7452a6489eb1a98457a9893b16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=Isad%2BABbvqYPIB2dxqX9EfW03uo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d40fae962104a7b83d9a475b45348d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=1IE3mWfiDse08V2zs2U0jjj8Oz0%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d89d860902c4a998c9793028a46a62b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=zYVTbT1aAn2LWsXZsyp6egZu3L4%3D" alt="image.png" loading="lazy"/></p>
<p>æ¬¢è¿ Star â­ å’Œäº¤æµã€å…±å»ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[KIE Drools 10.x è§„åˆ™å¼•æ“å¿«é€Ÿå…¥é—¨]]></title>    <link>https://juejin.cn/post/7605811866908753929</link>    <guid>https://juejin.cn/post/7605811866908753929</guid>    <pubDate>2026-02-13T03:47:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866908753929" data-draft-id="7605769126272188462" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="KIE Drools 10.x è§„åˆ™å¼•æ“å¿«é€Ÿå…¥é—¨"/> <meta itemprop="keywords" content="Java,åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T03:47:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaå°å·"/> <meta itemprop="url" content="https://juejin.cn/user/1614502546384749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            KIE Drools 10.x è§„åˆ™å¼•æ“å¿«é€Ÿå…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1614502546384749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaå°å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:47:17.000Z" title="Fri Feb 13 2026 03:47:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>è‡ªDroolsåŠ å…¥Apache KIEç»„ç»‡ä¸‹çš„é¡¹ç›®åï¼Œå…¶ç‰ˆæœ¬ç ”å‘å‘ç€APIæ ‡å‡†åŒ–ã€ç”Ÿæ€æ›´å®Œå–„çš„æ–¹å‘ä¸æ–­è¿­ä»£è¿ˆè¿›ã€‚ä»åŸå…ˆDroolså›¢é˜Ÿç»´æŠ¤çš„8.44.xç‰ˆæœ¬è¿‡æ¸¡åˆ°Apache KIEè‡ªåŠ¨åŒ–æ™ºèƒ½å†³ç­–é¡¹ç›®é›†åˆå¤§å®¶åº­äº§å“çš„ç ”å‘æ¡çº¿ä¸Šæ¥ï¼Œåœ¨é¡¹ç›®å¾®æœåŠ¡åŒ–ã€éƒ¨ç½²äº‘åŸç”ŸåŒ–çš„ä»Šå¤©ï¼Œå†ç»“åˆAIé¡¹ç›®èµ‹èƒ½çš„å¤§èƒŒæ™¯ï¼Œå¯ä»¥è¯´Droolsçš„å­¦ä¹ ä¸åº”ç”¨å°†è¿æ¥æ–°çš„çƒ­æ½®ã€‚é‰´äºå›½å†…è¿™æ–¹é¢çš„ä¹¦ç±ã€åšå®¢ç­‰æ•™ç¨‹ä¾ç„¶åœç•™åœ¨è€ç‰ˆæœ¬ï¼Œä¹Ÿå› è€ç‰ˆæœ¬çš„é™åˆ¶ï¼Œç”Ÿäº§å®è·µå¾—ä¸å¤Ÿå…¨é¢ã€å½»åº•ï¼Œæœ¬äººå¼€è®¾äº†è¯¥æŠ€æœ¯ä¸“æ ï¼Œä¸å¹¿å¤§æŠ€æœ¯å‘˜ä¸€èµ·å­¦ä¹ æ¢è®¨æ–°ç‰ˆDroolsçš„å…¨é¢å®è·µè®®é¢˜ï¼Œé€šè¿‡åˆ†äº«ä»0-1çš„å®è·µæ­¥éª¤ä¸å­¦ä¹ æ„Ÿæ‚Ÿï¼Œä¸€èµ·æ’‘èµ·å›½äººä½¿ç”¨DroolsæŠ€æœ¯æé«˜ITä¼ä¸šç”Ÿäº§åŠ›çš„ä¸€ç‰‡å¤©ã€‚ä¸€èµ·åŠ æ²¹ï¼</p>
<h2 data-id="heading-1">Droolsç‰ˆæœ¬è¯´æ˜</h2>
<p>Droolsåœ¨åŠ å…¥Apache KIEç»„ç»‡ä¹‹å‰ï¼Œæ–‡æ¡£æ˜¯ç”±Droolsç ”å‘å›¢é˜Ÿè‡ªå·±ç»´æŠ¤çš„ï¼Œåœ°å€ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.drools.org%2F" target="_blank" title="https://docs.drools.org/" ref="nofollow noopener noreferrer">docs.drools.org/</a>ï¼Œæ›´æ–°çš„æœ€åç‰ˆæœ¬ä¸º<code>8.44.0.Final</code>ã€‚<strong>ç›®å‰å¸‚é¢ä¸Šå¤§å¤šæ•™ç¨‹è¿˜æ˜¯åŸºäºdrools7çš„</strong>ï¼Œè€Œçº³å…¥åˆ°Apacheä¸‹çš„KIEé¡¶çº§é¡¹ç›®åï¼Œdroolsçš„ç”Ÿæ€å‘å±•å˜å¾—æ›´å…¨é¢æ›´å®Œå–„ï¼Œæ–‡æ¡£æ›´è§„èŒƒã€APIè®¾è®¡ä¹Ÿæ›´ä¼˜é›…å’Œå¥å£®ï¼Œå¾ˆå¥½çš„ä¸ç›®å‰æˆç†Ÿçš„äº‘åŸç”Ÿæ¶æ„ã€AIæŠ€æœ¯ä½“ç³»èåˆï¼ŒDroolsè¿æ¥äº†è„±èƒæ¢éª¨çš„æ–°å‘å±•ã€‚ç›¸åº”çš„Droolsæ–‡æ¡£åœ°å€ä¹Ÿæ¢äº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83587724703145059485259adb7c6cd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=Qq2TTr4GEzIRuAwK%2BoqrbtmQH0k%3D" alt="20260210120113.png" loading="lazy"/></p>
<h2 data-id="heading-2">ç¯å¢ƒå‡†å¤‡</h2>
<p>å¯å‚è€ƒdroolså®˜æ–¹æŠ€æœ¯æ–‡æ¡£çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fkie.apache.org%2Fdocs%2F10.1.x%2Fdrools%2Fdrools%2Fgetting-started%2Findex.html%23_prerequisites" target="_blank" title="https://kie.apache.org/docs/10.1.x/drools/drools/getting-started/index.html#_prerequisites" ref="nofollow noopener noreferrer">å…¥é—¨-å…ˆå†³æ¡ä»¶</a>å°èŠ‚ã€‚<strong>åªä¸è¿‡å’±ä»¬è¿™é‡Œçš„å®è·µä¸ä¾èµ–å®˜æ–¹æŒ‡å—çš„å‘½ä»¤è¡Œæ“ä½œæ–¹å¼ï¼Œè€Œæ˜¯é«˜æ•ˆçš„ä½¿ç”¨ideaçš„é›†æˆå¼€å‘ç¯å¢ƒæ¥æ„å»ºåº”ç”¨ã€‚</strong></p>
<ul>
<li>jdk17+</li>
<li>Apache Maven3.9.6+</li>
<li>å¼€å‘å·¥å…·ï¼šidea2025.3.2</li>
<li>è§„åˆ™ç¼–è¾‘å™¨ï¼švscodeæ’ä»¶ï¼ˆideaæ’ä»¶æ¯”è¾ƒæœ‰é™ï¼‰</li>
</ul>
<h3 data-id="heading-3">ideaä¸‹è½½å®‰è£…</h3>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jetbrains.com%2Fidea%2Fdownload" target="_blank" title="https://www.jetbrains.com/idea/download" ref="nofollow noopener noreferrer">ideaå®˜æ–¹ä¸‹è½½åœ°å€</a>ï¼Œé€‰æ‹©å¯¹åº”æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ç‚¹ä¸‹è½½ï¼Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3e61315d94e4c14be2e22d62cf04032~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=%2FxUAB1t7Mti49OmrafsiMRJuFjs%3D" alt="20260209204411.png" loading="lazy"/>
ä¸‹è½½çš„ç‰ˆæœ¬ï¼š<em>idea-2025.3.2.exe</em>ï¼ŒåŒå‡»å®‰è£…ï¼Œè‡ªè¡Œè®¾ç½®å®‰è£…è·¯å¾„ï¼Œä¸ªäººè®¾ç½®ä¸ºï¼š<code>d:\Programs\JetBrains\IntelliJ IDEA 2025.3.2</code>ï¼Œ<em>å®‰è£…é€‰é¡¹</em>ç•Œé¢ï¼Œå‹¾é€‰åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼ã€æ·»åŠ <em>bin</em>ç›®å½•åˆ°<em>path</em>ã€æ·»åŠ <em>å°†æ–‡ä»¶å¤¹æ‰“å¼€ä¸ºé¡¹ç›®</em>ï¼Œæ‰§è¡Œåç»­å®‰è£…ã€‚å®‰è£…æˆåŠŸï¼Œç‚¹<em>å®Œæˆ</em>å‰ï¼Œå‹¾é€‰<em>è¿è¡Œidea</em>ã€‚
ç¬¬ä¸€æ¬¡è¿è¡Œï¼Œé»˜è®¤ä¸­æ–‡ç¯å¢ƒï¼ˆå¦‚æœå¼¹å‡ºè¯¥ç•Œé¢çš„è¯ï¼‰ï¼Œç‚¹ä¸å‘é€æ•°æ®å…±äº«ï¼Œè·³è¿‡å¯¼å…¥è®¾ç½®ï¼ˆå¦‚æœå¼¹å‡ºè¯¥ç•Œé¢çš„è¯ï¼‰</p>
<h3 data-id="heading-4">åˆ›å»ºJavaé¡¹ç›®</h3>
<p>è¿›å…¥ideaç¯å¢ƒç•Œé¢ï¼Œå¦‚æœç•Œé¢ä¸ºè‹±æ–‡ï¼Œè¿™é‡Œå’±ä»¬ç»Ÿä¸€ä¸‹ï¼Œç‚¹å·¦ä¸‹è§’çš„<em>è®¾ç½®</em>ï¼Œè¿›å…¥<em>Language and Region</em>è®¾ç½®ï¼ˆå¯ç›´æ¥æœç´¢å®šä½è®¾ç½®ï¼‰ï¼Œè¯­è¨€è®¾ç½®ä¸ºç®€ä½“ä¸­æ–‡ï¼Œç‚¹<em>åº”ç”¨</em>è®¾ç½®ï¼Œé‡å¯ideaå³å¯ã€‚</p>
<p>åœ¨æ¬¢è¿ç•Œé¢ç‚¹<em>æ–°å»ºé¡¹ç›®</em>ï¼Œå·¦ä¾§é¡¹ç›®ç±»å‹é€‰<em>Java</em>ï¼Œå³ä¾§çš„è®¾ç½®</p>
<ul>
<li>åç§°ï¼š<em>rule-java-maven</em></li>
<li>ä½ç½®ï¼š<em>E:\code\drools-projects</em></li>
<li>æ„å»ºç³»ç»Ÿï¼š<em>Maven</em></li>
<li>JDK
ç‚¹<em>ä¸‹è½½JDK</em>ï¼Œå¼¹å‡ºæ¡†ä¸­é€‰æ‹©ä½ æƒ³è¦ä¸‹è½½çš„jdkç‰ˆæœ¬ï¼Œä¸ªäººè®¾ç½®ä¸ºï¼š</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a321ba4066546c98a3e3501590374fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=GyINhHGs3QM9VokmLIjLT9iR3DE%3D" alt="20260209212651.png" loading="lazy"/></p>
<ul>
<li>å–æ¶ˆ<em>æ·»åŠ ç¤ºä¾‹ä»£ç </em></li>
<li>é«˜çº§è®¾ç½®
ç»„åå¯è‡ªå·±å®šï¼Œä¸ªäººè®¾ç½®ä¸º<code>org.zm626</code></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9e9d50e82ae472da9ff99eef43021b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=8sJVGJYPhRjzpKhg%2Bnezc5PztHw%3D" alt="20260209213028.png" loading="lazy"/></p>
<p>æœ€åç‚¹<em>åˆ›å»º</em></p>
<p>é¡¹ç›®è‡ªåŠ¨æ„å»ºæˆåŠŸ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f96e779cfcb494f9d714e7915497cce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=yzhaJNTbrVQEWRiQVXey3d45j34%3D" alt="20260209213556.png" loading="lazy"/></p>
<h4 data-id="heading-5">å¼€å¯å…è´¹ä½¿ç”¨idea</h4>
<p>åœ¨å¼€å‘ä¸»ç•Œé¢å³ä¸Šè§’ç‚¹<em>å¼€å§‹å…è´¹è¯•ç”¨</em>ï¼Œä¼šæ‰“å¼€idea Ultimateç‰ˆæœ¬çš„è®¢é˜…é¡µé¢ï¼Œç‚¹<em>å¼€å§‹å…è´¹è¯•ç”¨</em>ï¼Œå³å¯æ¿€æ´»å„ç§æ’ä»¶ï¼Œé»˜è®¤æœ‰30å¤©çš„ä½¿ç”¨æœŸã€‚å¯¹äºä¸æƒ³ä»˜è´¹çš„åŒå­¦ï¼Œå¯ä»¥åœ¨åˆ°æœŸå‰å¯¼å‡ºideaè®¾ç½®ï¼Œåˆ°æœŸåå¸è½½é‡è£…å¹¶å¯¼å…¥è®¾ç½®ï¼Œå¯æ— é™å¾ªç¯ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-6">jdkè®¾ç½®</h4>
<p>å®‰è£…å’±ä»¬åˆ›å»ºå‘å¯¼æ‰€é€‰æ‹©çš„jdkç‰ˆæœ¬ï¼Œå®ç°äº†è‡ªåŠ¨ä¸‹è½½å®‰è£…ã€‚
ç‚¹ä¸»ç•Œé¢å³ä¸Šè§’çš„<em>é½¿è½®å›¾æ ‡ | é¡¹ç›®ç»“æ„ | é¡¹ç›®è®¾ç½®</em>ï¼ŒæŸ¥çœ‹é¡¹ç›®ä½¿ç”¨çš„jdkï¼Œ<em>è¯­è¨€çº§åˆ«</em>ä¿æŒé»˜è®¤çš„jdkã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d6bccc48f41486bb0eed78ead34ea6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=BiMjGZdm%2BgLVhxlC8pacLwqd%2BW4%3D" alt="20260209214942.png" loading="lazy"/>
å¦‚æœéœ€è¦å…¶ä»–ç‰ˆæœ¬çš„jdkï¼Œå¯åœ¨æœ¬ç•Œé¢ï¼Œç‚¹<em>å¹³å°è®¾ç½® | SDK</em>ï¼Œæ¥å…¨å±€ç»´æŠ¤jdkç‰ˆæœ¬ï¼Œå¹¶å›åˆ°<em>é¡¹ç›®è®¾ç½® | é¡¹ç›® | SDK</em>ï¼Œé€‰æ‹©åˆ‡æ¢jdkç‰ˆæœ¬ã€‚</p>
<h4 data-id="heading-7">mavenè®¾ç½®</h4>
<p>æ‰“å¼€ideaè®¾ç½®ï¼Œæœç´¢<em>Maven</em>ï¼ŒæŸ¥çœ‹<em>Mavenä¸»è·¯å¾„</em>è®¾ç½®ï¼Œé»˜è®¤ä¸ºideaæ†ç»‘çš„mavenç‰ˆæœ¬ï¼Œè¿™é‡Œå¯åˆ‡æ¢ä¸º<em>ä½¿ç”¨MavenåŒ…è£…å™¨</em>ï¼Œè€Œmavençš„æœ¬åœ°ä»“åº“è·¯å¾„å’Œè®¾ç½®é»˜è®¤åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œä¿æŒè¯¥è®¾ç½®ï¼Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75002a7b565940099958c5cc1f1a6c58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=KGoeiRHvzEqkGmfmbZ%2FMpzG0KQc%3D" alt="20260209223347.png" loading="lazy"/>
ç‚¹<em>ç¡®å®š</em>ï¼Œå›åˆ°ä¸»ç•Œé¢ï¼Œä¼šçœ‹åˆ°å³ä¸‹è§’çš„è­¦å‘Šï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5705f3270bb4f3082b31c045fba6ab3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=VacAVwTziEeC7ClaKFvJXcfD89I%3D" alt="20260209220021.png" loading="lazy"/>
åœ¨å·¥ç¨‹çš„ <em>.mvn</em> ç›®å½•ä¸‹æ–°å¢ç›®å½•å’Œæ–‡ä»¶ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10f09901e33247bcbac434cddad6067c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=7ndmvf%2FthrJ2YC5vJ%2B%2BJQGyfbO0%3D" alt="20260209220142.png" loading="lazy"/>
æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">wrapperVersion=3.3.4  
distributionType=only-script  
distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.9.6/apache-maven-3.9.6-bin.zip
</code></pre>
<p>å®Œæˆç¼–è¾‘åï¼Œç‚¹å³è¾¹æ‚¬æµ®çš„<em>åŒæ­¥Mavenæ›´æ”¹</em>çš„å°å›¾æ ‡ï¼Œè¿™åªæ˜¯å®ŒæˆMavené…ç½®åŒæ­¥ï¼Œè¦é‡æ–°åŠ è½½æ•´ä¸ªmavené¡¹ç›®ï¼Œç‚¹Mavenå·¥å…·æ ç¬¬ä¸€ä¸ªåˆ·æ–°å›¾æ ‡ï¼Œç‚¹ä¸‹æ‹‰çš„ç¬¬äºŒä¸ªé€‰é¡¹ï¼š<em>é‡æ–°åŠ è½½æ‰€æœ‰çš„Mavené¡¹ç›®</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6654158d2ff4cb2a8055be121288e49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=HZ8ee4IOIOcLaTopxVvLE8zH9HE%3D" alt="20260209220900.png" loading="lazy"/>
å®Œæˆæ„å»ºåï¼Œè¿™ç§MavenåŒ…è£…å™¨æ–¹å¼ä¼šåœ¨æœ¬åœ°ç”¨æˆ·è·¯å¾„ä¸‹è‡ªè¡Œå®‰è£…ä»¥ä¸Šé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„mavenç‰ˆæœ¬ï¼Œè¿™ç§wrapperéšåŒå·¥ç¨‹æºç åˆ†å‘çš„æ–¹å¼ï¼Œæœ‰åŠ©äºç ”å‘å›¢é˜Ÿæˆ–è€…å­¦ä¹ å°ç»„æˆå‘˜ä¹‹é—´ååŒã€‚çœ‹åˆ°æœ¬åœ°è§£å‹çš„mavenè½¯ä»¶åŒ…ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9698979d00f44904a8082527007b7771~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=g0QiolLG%2FOgETQlKN0WDZB0a7H4%3D" alt="20260210123609.png" loading="lazy"/></p>
<p>å¯ä»¥å°†å…¶<em>conf</em>ç›®å½•ä¸‹çš„settings.xmlé…ç½®æ‹·è´å‡ºæ¥ï¼Œæ”¾åˆ°ç”¨æˆ·è·¯å¾„çš„ <em>~/.m2</em> ä¸‹ï¼Œåœ¨å„ä¸ªæ“ä½œç³»ç»Ÿç”¨æˆ·çº§åˆ«ç»´æŠ¤mavené…ç½®ã€‚å‚ç…§<a href="https://link.juejin.cn?target=https%3A%2F%2Fmaven.aliyun.com%2Fmvn%2Fguide" target="_blank" title="https://maven.aliyun.com/mvn/guide" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘mavenä½¿ç”¨æŒ‡å—</a>ä¸­çš„mavené•œåƒè®¾ç½®ï¼Œä¿®æ”¹ä¸‹æ‹·è´å‡ºæ¥çš„<em>settings.xml</em>æ–‡ä»¶ä»¥åŠ é€Ÿmavenç›¸å…³å·¥å…·ã€ä¾èµ–çš„ä¸‹è½½ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span> <span class="hljs-attr">...</span>&gt;</span>
...
  <span class="hljs-tag">&lt;<span class="hljs-name">mirrors</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>aliyunmaven<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>é˜¿é‡Œäº‘å…¬å…±ä»“åº“<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">mirrors</span>&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<h3 data-id="heading-8">ideaè®¾ç½®</h3>
<h4 data-id="heading-9">å¿«æ·é”®è®¾ç½®</h4>
<p>ä¸ºäº†æ–¹ä¾¿å’Œç»Ÿä¸€åç»­çš„ä»£ç ç¼–è¾‘å’Œæ–‡ä»¶æ“ä½œï¼Œè®¾ç½®ideaå¿«æ·é”®ä¸ºeclipseé£æ ¼ï¼ŒåŒæ—¶å¯¹åŸºæœ¬çš„ä»£ç è¡¥å…¨æ“ä½œé‡è®¾å¿«æ·é”®ï¼Œç§»é™¤åŸå…ˆçš„<kbd>Ctrl</kbd>+<kbd>ç©ºæ ¼</kbd>ï¼ˆå’Œwindowsè¾“å…¥æ³•æœ‰å†²çªï¼‰ï¼Œè¿™é‡Œè®¾ä¸º<kbd>Alt</kbd> + <kbd>/</kbd>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21be077982294223a75bd3e435e5a15e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=j5j08tSU80S8fPHlkwNrADKNJMg%3D" alt="20260210072616.png" loading="lazy"/></p>
<h4 data-id="heading-10">ç±»å‹è‡ªåŠ¨å¯¼å…¥è®¾ç½®</h4>
<p>å› ä¸ºå®˜æ–¹ç¤ºä¾‹ä»£ç åŸºæœ¬æ— éœ€æˆ‘ä»¬æ‰‹å†™ï¼Œæ–¹ä¾¿å¤åˆ¶è¿‡æ¥å¯ä»¥è‡ªåŠ¨å¼•å…¥ç±»å‹ï¼Œåšå¦‚ä¸‹è®¾ç½®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6181a34034349308554242b1834bc24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=pw1rawLZBNtd3mPvPPk9w7avd7w%3D" alt="20260210075910.png" loading="lazy"/></p>
<h2 data-id="heading-11">æ„å»ºè´·æ¬¾ç”³è¯·ruleç¤ºä¾‹</h2>
<h3 data-id="heading-12">ä¸‹è½½å®˜æ–¹ç¤ºä¾‹æºä»£ç </h3>
<p>å› ä¸ºDroolså¹¶å…¥äº†Apacheçš„KIEç»„ç»‡ï¼Œè€Œè¿‘å¹´åœ¨KIEç»„ç»‡ä¸‹å­µåŒ–å‡ºä¸€ä¸ªå›¾æ ‡åƒè€çˆ¹çš„Kogitoé¡¹ç›®ï¼Œå®ƒæ˜¯ KIE ä¸‹çš„ä¸€ä¸ªäº‘åŸç”Ÿä¸šåŠ¡è‡ªåŠ¨åŒ–é¡¹ç›®ï¼Œå®šä½æ˜¯â€œ<strong>ä¸‹ä¸€ä»£ä¸šåŠ¡è‡ªåŠ¨åŒ–å¹³å°</strong>â€ï¼Œèšç„¦äº‘åŸç”Ÿå¼€å‘ã€éƒ¨ç½²å’Œæ‰§è¡Œï¼Œå½“ç„¶ä¹Ÿæä¾›äº†ç¤ºä¾‹ï¼Œgithubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fincubator-kie-kogito-examples" target="_blank" title="https://github.com/apache/incubator-kie-kogito-examples" ref="nofollow noopener noreferrer">github.com/apache/incuâ€¦</a>ã€‚è¿™é‡Œæˆ‘ä»¬æ‰¾åˆ°æœ€æ–°ç¨³å®šç‰ˆåˆ†æ”¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7553bfd29ae8418994f4e363c583d5ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=3RSTm7nYSls6L7OrlVez0Mr6F%2BI%3D" alt="20260210122224.png" loading="lazy"/></p>
<p>ä»åŸºäºæœ€æ–°<code>10.1.x</code>ç‰ˆæœ¬çš„ç¤ºä¾‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fincubator-kie-kogito-examples%2Ftree%2F10.1.x" target="_blank" title="https://github.com/apache/incubator-kie-kogito-examples/tree/10.1.x" ref="nofollow noopener noreferrer">incubator-kie-kogito-examples</a>åœ°å€ä¸‹è½½æºä»£ç åˆ°æœ¬åœ°ã€‚
è¿™é‡Œå’±ä»¬æ‰¾åˆ°<em>kogito-java-examples</em>çš„<em>rules-embedded-mode-example</em>é¡¹ç›®ï¼Œå‚è€ƒå®ƒç»™å’±ä»¬ä¹‹å‰åˆ›å»ºçš„åŸºäºmavenæ„å»ºçš„javaé¡¹ç›®é›†æˆè´·æ¬¾ç”³è¯·è§„åˆ™æ¡ˆä¾‹ã€‚
<strong>åç»­çš„ç»ƒä¹ ä»¥è¯¥å®˜æ–¹ç¤ºä¾‹ä»£ç ä»å¤´æ­å»ºï¼Œå¤§å®¶è‡ªå·±åŠ¨æ‰‹ï¼Œç›´æ¥å‚è€ƒå®˜æ–¹ç¤ºä¾‹å³å¯ã€‚</strong></p>
<h3 data-id="heading-13">ä»é›¶å¼€å‘è§„åˆ™</h3>
<h4 data-id="heading-14">ç”¨æ³•é™¢å®¡ç†æ¡ˆä»¶ç±»æ¯”</h4>
<h5 data-id="heading-15">å®è§‚ç†è§£è§„åˆ™</h5>
<p>æ³•é™¢ç³»ç»Ÿ = DroolsÂ è§„åˆ™å¼•æ“</p>
<ol>
<li>Factï¼ˆäº‹å®ï¼‰= è¯‰è®¼ææ–™/æ¡ˆä»¶äº‹å®
<ul>
<li>åŸå‘Šæäº¤çš„èµ·è¯‰ä¹¦ã€è¯æ®ææ–™</li>
<li>è¢«å‘Šæäº¤çš„ç­”è¾©ææ–™</li>
<li>è¿™äº›æ˜¯â€œäº‹å®â€ï¼Œæ˜¯æ³•å®˜éœ€è¦å®¡æŸ¥çš„å†…å®¹</li>
</ul>
</li>
<li>è§„åˆ™ï¼ˆRulesï¼‰= æ³•å¾‹æ³•è§„
<ul>
<li>ã€Šæ°‘æ³•å…¸ã€‹æ¡æ¬¾</li>
<li>ã€Šåˆ‘æ³•ã€‹æ¡æ–‡</li>
<li>è¿™äº›æ˜¯â€œè§„åˆ™â€ï¼Œæ³•å®˜ç”¨æ¥åˆ¤æ–­äº‹å®æ˜¯å¦ç¬¦åˆæ³•å¾‹</li>
</ul>
</li>
<li>è§„åˆ™å¼•æ“ = æ³•å®˜/æ³•é™¢
<ul>
<li>æ³•å®˜æ‹¿åˆ°è¯‰è®¼ææ–™ï¼ˆFactï¼‰</li>
<li>å¯¹ç…§æ³•å¾‹æ³•è§„ï¼ˆè§„åˆ™ï¼‰è¿›è¡Œåˆ¤æ–­</li>
<li>åšå‡ºåˆ¤å†³ï¼ˆæ‰§è¡Œè§„åˆ™çš„åŠ¨ä½œï¼‰</li>
</ul>
</li>
</ol>
<h5 data-id="heading-16">æ³•é™¢æµç¨‹ vsÂ è§„åˆ™å¼•æ“æµç¨‹</h5>
<p>æ³•é™¢æµç¨‹</p>
<ol>
<li>ç«‹æ¡ˆÂ â†’ æ³•é™¢å—ç†æ¡ˆä»¶ï¼Œå»ºç«‹æ¡ˆä»¶æ¡£æ¡ˆ</li>
<li>æäº¤ææ–™Â â†’ åŸå‘Š/è¢«å‘Šæäº¤è¯‰è®¼ææ–™</li>
<li>å¼€åº­å®¡ç† â†’ æ³•å®˜å®¡æŸ¥ææ–™ï¼Œå¯¹ç…§æ³•å¾‹æ¡æ–‡</li>
<li>åˆ¤å†³ â†’ åšå‡ºåˆ¤å†³ç»“æœ</li>
</ol>
<p>è§„åˆ™å¼•æ“æµç¨‹</p>
<ol>
<li>å¯åŠ¨è§„åˆ™å¼•æ“ï¼ˆåˆ›å»º KieSessionï¼‰â†’ ç›¸å½“äºç«‹æ¡ˆ
<ul>
<li>å»ºç«‹äº†ä¸€ä¸ª"æ¡ˆä»¶å¤„ç†æµç¨‹"</li>
<li>å‡†å¤‡å¼€å§‹å¤„ç†</li>
</ul>
</li>
<li>æ’å…¥ Fact â†’ ç›¸å½“äºæäº¤è¯‰è®¼ææ–™
<ul>
<li>æŠŠÂ Applicant(ç”³è¯·äºº)ã€LoanApplication(è´·æ¬¾ç”³è¯·)Â æ”¾å…¥å·¥ä½œå†…å­˜</li>
</ul>
</li>
<li>æ‰§è¡Œè§„åˆ™ï¼ˆfireAllRulesï¼‰â†’ ç›¸å½“äºå¼€åº­å®¡ç†
<ul>
<li>è§„åˆ™å¼•æ“æ£€æŸ¥ Factï¼ŒåŒ¹é…è§„åˆ™</li>
</ul>
</li>
<li>è·å–ç»“æœ â†’ ç›¸å½“äºåˆ¤å†³ç»“æœ
<ul>
<li>ä» Fact ä¸­è·å–å¤„ç†åçš„ç»“æœï¼Œå¦‚Â approved(å®¡æ ¸ç»“æœ)ã€explanation(å®¡æ ¸ç»“æœè¯´æ˜)</li>
</ul>
</li>
</ol>
<p>å¯¹åº”å…³ç³»</p>

























<table><thead><tr><th>æ³•é™¢</th><th>è§„åˆ™å¼•æ“</th></tr></thead><tbody><tr><td>ç«‹æ¡ˆ</td><td>å¯åŠ¨è§„åˆ™å¼•æ“ï¼ˆåˆ›å»º KieSessionï¼‰</td></tr><tr><td>æäº¤è¯‰è®¼ææ–™</td><td>æ’å…¥Â Fact</td></tr><tr><td>å¼€åº­å®¡ç†</td><td>æ‰§è¡Œè§„åˆ™ï¼ˆfireAllRulesï¼‰</td></tr><tr><td>åˆ¤å†³ç»“æœ</td><td>è·å–å¤„ç†åçš„ Fact</td></tr></tbody></table>
<h4 data-id="heading-17">å®šä¹‰äº‹å®(Fact)ç±»</h4>
<p>è¯¥æ¡ˆä¾‹ä¸­çš„äº‹å®ç±»æœ‰ä¸¤ä¸ªï¼š<code>Applicant</code>(ç”³è¯·äºº)å’Œ<code>LoanApplication</code>(è´·æ¬¾ç”³è¯·)ï¼Œå®ƒä»¬å°±æ˜¯ç®€å•çš„<code>POJO</code>ï¼Œå­˜å‚¨äº‹å®æ•°æ®ã€‚
<em>Applicant.java</em></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.zm626.rules;  
  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Applicant</span> {  
    <span class="hljs-comment">/** ç”³è¯·äººid */</span>
    <span class="hljs-keyword">private</span> String id;  
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;  
  
    <span class="hljs-comment">// çœç•¥æ— å‚æ„é€ ã€æœ‰å‚æ„é€ ã€getterå’Œsetter</span>
}
</code></pre>
<p><em>LoanApplication.java</em></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.zm626.rules;  
  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoanApplication</span> {
	<span class="hljs-comment">/** ç”³è¯·äººid */</span>  
    <span class="hljs-keyword">private</span> String applicantId;
    <span class="hljs-comment">/** å®¡æ ¸ç»“æœè¯´æ˜ */</span>  
    <span class="hljs-keyword">private</span> String explanation;  
    <span class="hljs-comment">/** å®¡æ ¸ç»“æœ true-é€šè¿‡ false-ä¸é€šè¿‡ */</span>  
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> approved;  
  
    <span class="hljs-comment">// çœç•¥æ— å‚æ„é€ ã€æœ‰å‚æ„é€ ã€getterã€setterå’ŒtoStringæ–¹æ³•</span>
  
}
</code></pre>
<h4 data-id="heading-18">å®šä¹‰è§„åˆ™drlæ–‡ä»¶</h4>
<p>è¯¥æ–‡ä»¶ç”¨äºå®šä¹‰è§„åˆ™é›†ï¼Œä¹ŸåŒ…æ‹¬è§„åˆ™ç»“æœæŸ¥è¯¢ç­‰ã€‚è¯¥<code>.drl</code>åç¼€çš„æ–‡ä»¶éœ€è¦é‡‡ç”¨ä¸“é—¨çš„ç¼–è¾‘å™¨æ‰“å¼€ï¼Œå¸¸è§çš„æœ‰ideaçš„droolsæ’ä»¶ä»¥åŠvscodeçš„ç›¸å…³æ’ä»¶</p>
<h5 data-id="heading-19">drlç¼–è¾‘å™¨æ’ä»¶</h5>
<p><em>ideaçš„droolsæ’ä»¶</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e4411ba68f64c6599178479090ac954~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=a%2BGiNV6HSeaySyCmwsXsDaP6mhY%3D" alt="20260210190127.png" loading="lazy"/>
ideaçš„droolsæ’ä»¶å¯¹ç±»å‹æ¯”è¾ƒæ•æ„Ÿï¼Œè¿™ç§åŒ…ä¸­å®šä¹‰çš„ç±»å‹æ— éœ€å¯¼å…¥ï¼Œä½†ideaçš„drlæ’ä»¶å°±ä¸è®¤è´¦</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1eeda86e71cf47609425e4bef57a80bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=8g17mYbpR2FMOQx0eqhiyjQRtsc%3D" alt="20260210192624.png" loading="lazy"/></p>
<p><em>vscodeçš„drlæ’ä»¶</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9392454ec3a64da3aa0079d38ad988b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=%2BdOrSF02P1nrnvTCv1fvPTlDhag%3D" alt="20260210191336.png" loading="lazy"/>
vscodeçš„drlç¼–è¾‘å™¨ï¼Œæœ‰ä»£ç é«˜äº®å’ŒåŸºæœ¬ç»“æ„çš„è¾“å…¥æç¤ºï¼Œä½†ä¸ä¼šç»†åŒ–åˆ°å¯¹ç±»å‹æ£€æŸ¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78e28cd1097f4c2dac6a522d12d3f8f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=ky%2F0gA%2FWqQq7kS8aSrRxA0z%2BGV8%3D" alt="20260210192036.png" loading="lazy"/></p>
<blockquote>
<p>[!tip] drlè¯­æ³•é—®é¢˜å®šä½æŠ€å·§
ä¸ªäººè§‰å¾—ç¼–è¾‘drlä¸è¦è¢«ç¼–è¾‘å™¨çš„æ ¡éªŒæŸç¼šï¼Œæ¨èç”¨è¯­æ³•æ£€æŸ¥å®¹å¿åº¦æ›´é«˜çš„vscodeæ’ä»¶ï¼Œè¯­æ³•é—®é¢˜åˆ™é€šè¿‡kieç›¸å…³ç¼–è¯‘æ’ä»¶æ¥æ£€æŸ¥ï¼Œçœ‹æ§åˆ¶å°çš„è¯¦ç»†æç¤ºã€‚å…·ä½“åç»­ä¼šå®è·µã€‚</p>
</blockquote>
<h5 data-id="heading-20">drlè§„åˆ™æ–‡ä»¶ç¤ºä¾‹</h5>
<p><em>resources/com/zm626/rules/loan-application-age-limit.drl</em></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.zm626.rules;  
<span class="hljs-comment">/* ä»¥ä¸ŠæŒ‡å®šè§„åˆ™æ–‡ä»¶çš„é€»è¾‘åŒ…è·¯å¾„ï¼Œå¯ä»¥ä¸å’Œæ‰€åœ¨çš„èµ„æºåŒ…çš„ç‰©ç†åŒ…è·¯å¾„ä¸€è‡´  
 ä½†åšæˆä¸€è‡´åï¼Œä¸”è§„åˆ™åŒ…è·¯å¾„å’ŒjavaåŒ…è·¯å¾„ä¸€è‡´ï¼Œåˆ™å¯ä»¥å…å»åŒä¸€ä¸ªåŒ…ä¸‹çš„Javaç±»å‹å¯¼å…¥  
 æ¯”å¦‚ä¸‹é¢çš„ç±»å‹å¯¼å…¥å¯ä»¥ä¸å†™ï¼Œä½†æ˜¯ideaçš„æ’ä»¶åˆä¸èƒ½æ™ºèƒ½è¯†åˆ«ï¼ˆè¦æ±‚æ˜¾ç¤ºå¯¼å…¥ï¼‰  
 */</span>  
<span class="hljs-keyword">import</span> com.zm626.rules.Applicant;  
<span class="hljs-keyword">import</span> com.zm626.rules.LoanApplication;  
  
<span class="hljs-comment">// æ¯ä¸ªè§„åˆ™éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œåå­—åœ¨åŒä¸€ä¸ªè§„åˆ™åº“(KieBase)ä¸­å”¯ä¸€  </span>
<span class="hljs-comment">// ä¸åŠ å¼•å·åˆ™ä¸èƒ½å‡ºç°ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå˜æˆå­—ç¬¦ä¸²åˆ™æ— é™åˆ¶  </span>
rule <span class="hljs-string">"Underage"</span>  
  <span class="hljs-comment">// è§„åˆ™æ‰§è¡Œçš„ä¼˜å…ˆçº§ï¼Œä¸åŠ æˆ–è€…æ•°å­—ä¸€æ ·å¤§åˆ™æŒ‰å®šä¹‰é¡ºåº  </span>
  <span class="hljs-comment">// å¯ä»¥æ˜¾ç¤ºæŒ‡å®šä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼Œæ•°å€¼è®¾ç½®åœ¨æ•´ä¸ªKieBaseä¸­ç”Ÿæ•ˆ  </span>
  salience <span class="hljs-number">15</span>  
  <span class="hljs-comment">// ç»™è§„åˆ™åˆ†ç»„ï¼Œä¾¿äºè§¦å‘ä¸€ä¸ªåˆ†ç»„å†…çš„æ‰€æœ‰è§„åˆ™  </span>
  ruleflow-group <span class="hljs-string">"applicationGroup"</span>  
  when  
    <span class="hljs-comment">// è§„åˆ™å·¦åŠè¾¹ï¼ˆæ¡ä»¶ï¼‰ç”¨æ¥åŒ¹é…äº‹å®å¯¹è±¡ï¼š$å˜é‡å: ç±»å‹( å±æ€§å£°æ˜ã€åŒ¹é…è¡¨è¾¾å¼ )    // è¿™é‡ŒåŒ¹é…æ¯ä¸ªè´·æ¬¾ç”³è¯·å¯¹è±¡ï¼ŒåŒ¹é…åˆ°å°äº21å²çš„ç”³è¯·äººï¼Œé‚£ä¹ˆå°±ä¸å…è®¸ç”³è¯·ï¼Œå¹¶è¯´æ˜ä¸‹æ˜¯æœªæˆå¹´äºº  </span>
    $application : LoanApplication( $applicantId: applicantId )  
    Applicant( id == $applicantId &amp;&amp; age &lt; <span class="hljs-number">21</span> )  
  then  
    <span class="hljs-comment">// è§„åˆ™å³åŠè¾¹ï¼ˆç»“è®ºï¼‰ï¼Œå¯¹åŒ¹é…çš„ç”³è¯·å¯¹è±¡æ›´æ–°å±æ€§  </span>
    $application.setApproved( <span class="hljs-literal">false</span> );  
    $application.setExplanation( <span class="hljs-string">"Underage"</span> );  
end <span class="hljs-comment">// è§„åˆ™å•å…ƒç»“æŸæ ‡è®°ï¼Œä¸ruleæˆå¯¹å‡ºç°</span>
</code></pre>
<h3 data-id="heading-21">è§„åˆ™å¼•æ“APIå®æˆ˜</h3>
<h4 data-id="heading-22">pomä¸­çš„è§„åˆ™ä¾èµ–</h4>
<p>droolsè§„åˆ™å¼•æ“ä¸javaé¡¹ç›®æ•´åˆï¼Œéœ€è¦å¼•å…¥ç›¸å…³çš„ä¾èµ–ï¼Œä¾èµ–çš„ç‰ˆæœ¬å¯ä»¥ç”±<code>drools-bom</code>æ¥ç®¡ç†ï¼Œå› æ­¤å¯ä»¥åœ¨<em>pom.xml</em>ä¸­é€šè¿‡<code>&lt;dependencyManagement&gt;</code>æ ‡ç­¾å®šä¹‰è¦å¯¼å…¥çš„<code>pom</code>ç±»å‹çš„<code>bom</code>ä¾èµ–ã€‚</p>
<p><em>pom.xml</em></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">...</span>&gt;</span>
...
	<span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>  
	    ...  
	    <span class="hljs-tag">&lt;<span class="hljs-name">version.org.drools</span>&gt;</span>10.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version.org.drools</span>&gt;</span>  
	<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>  
	  
	<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>  
	    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>        
		    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>            
			    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
	            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
	            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${version.org.drools}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  
	            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>  
	            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>  
	        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    
	    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<p>è¿è¡Œè¯¥ç¤ºä¾‹å¿…å¤‡çš„å‡ ä¸ªæœ€å°ä¾èµ–å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç¼–è¯‘.drlæ–‡ä»¶ï¼Œæä¾› KieContainerã€KieSession ç­‰ API --&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-compiler<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
  
<span class="hljs-comment">&lt;!-- é…åˆ drools-compiler è¿›è¡Œæ¨¡å‹ç¼–è¯‘ --&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-model-compiler<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
  
<span class="hljs-comment">&lt;!-- æ”¯æŒè§„åˆ™ä¸­çš„è¡¨è¾¾å¼ï¼šage &lt; 21ã€id == $applicantId --&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-mvel<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
  
<span class="hljs-comment">&lt;!--  
    åŸºäºkmodule.xmlæ„å»ºKieSessionéœ€è¦ï¼Œ  
    ä¸”è¿™é‡Œå¯ä»¥ä¼ é€’ä¾èµ–drools-commandsï¼Œå› ä¸ºç”¨åˆ°ç›¸å…³API  
 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-xml-support<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>è§„åˆ™å¼•èµ·å¯åŠ¨ã€æ‰§è¡Œåˆ°ç»“æœçš„è¾“å‡ºï¼Œè¿™é‡Œç”¨æ—¥å¿—æ¡†æ¶å‘æ§åˆ¶å°æ‰“å°ä¿¡æ¯ï¼Œéœ€è¦æ·»åŠ <code>slf4j</code>ä¸¤ä¸ªä¾èµ–ï¼š<code>API</code>ä¾èµ–å’Œä¸€ä¸ªç®€å•çš„å®ç°ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">...</span>&gt;</span>
...
  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>  
    ...
    <span class="hljs-tag">&lt;<span class="hljs-name">version.org.slf4j</span>&gt;</span>2.0.13<span class="hljs-tag">&lt;/<span class="hljs-name">version.org.slf4j</span>&gt;</span>  
  <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
  ...
  <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>  
    ... 
    <span class="hljs-comment">&lt;!-- Logging --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${version.org.slf4j}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-simple<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${version.org.slf4j}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-23">å¯åŠ¨è§„åˆ™å¼•æ“</h4>
<p>å…ˆå†™ä¸€ä¸ªä¸»ç±»çš„ç»“æ„æ¥å®è·µå¼•æ“ç›¸å…³çš„<code>API</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.zm626.rules;
<span class="hljs-keyword">import</span> ...
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleMain</span> {
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(RuleMain.class);
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
		...
	}
}
</code></pre>
<h5 data-id="heading-24">KieServices</h5>
<p>çœ‹ä¸‹<code>main</code>æ–¹æ³•ä¸­çš„å®ç°ï¼Œé¦–å…ˆè·å–è§„åˆ™æœåŠ¡çš„å®ä¾‹ï¼Œå®ƒæ˜¯APIçš„è°ƒç”¨å…¥å£ï¼Œç”¨æ¥å¼€å¯è§„åˆ™å¼•æ“ã€‚è®¾è®¡ä¸Šé‡‡ç”¨äº†æ‡’åŠ è½½çš„å•ä¾‹åˆ›å»ºå½¢å¼ã€‚æºç çš„è¿™ç§è®¾è®¡å€¼å¾—æˆ‘ä»¬å¥½å¥½å­¦ä¹ ï¼Œä½¿ç”¨å†…éƒ¨å·¥å‚æ¥æ‡’åŠ è½½å®ä¾‹ï¼Œåç»­æˆ‘ä»¬ä¼šå¯¹å…¶æºç çš„è®¾è®¡åšè¯¦ç»†çš„è§£è¯»ã€‚</p>
<p>ç°åœ¨ä½ åªéœ€çŸ¥é“è¯¥Servicesç»„ä»¶ï¼Œç±»ä¼¼äºæ³•é™¢çš„æ¥å¾…å¤§å…/æœåŠ¡å°ï¼Œé€šè¿‡æœåŠ¡å°ç»Ÿä¸€è®¿é—®å„ä¸ªéƒ¨é—¨ï¼Œè€Œä¸éœ€è¦ç›´æ¥æ‰¾æ¯ä¸ªéƒ¨é—¨ã€‚ä¹Ÿå°±æ˜¯åˆ©ç”¨é—¨é¢æ¨¡å¼æ¥è·å–Droolsè§„åˆ™å¼•æ“ä¸­çš„å„ç§ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è§„åˆ™æœåŠ¡å…¥å£ï¼Œç›¸å½“äºåˆ°äº†æ³•é™¢å¤§é—¨å£äº†ï¼Œå¤§å…æœåŠ¡äººå‘˜å°±ä½</span>
<span class="hljs-type">KieServices</span> <span class="hljs-variable">kieServices</span> <span class="hljs-operator">=</span> KieServices.Factory.get();
</code></pre>
<h5 data-id="heading-25">KieContainer</h5>
<p>å¦‚æœæŠŠDroolsæ•´ä¸ªè§„åˆ™å¼•æ“æ¯”ä½œæ³•é™¢ç³»ç»Ÿï¼ˆå…·æœ‰æ‰§è¡Œæ³•å¾‹çš„èƒ½åŠ›ï¼‰ï¼Œé‚£ä¹ˆ<code>KieContainer</code>åˆ™ç›¸å½“äºæ³•å¾‹åº“ç®¡ç†ç³»ç»Ÿ/æ¡£æ¡ˆç®¡ç†éƒ¨é—¨ï¼ˆç®¡ç†å¤šä¸ªæ³•å¾‹æ³•è§„åº“çš„å®¹å™¨ï¼‰ï¼Œè¿™æ˜¯å…¨å±€å…±äº«çš„ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯è§„åˆ™å¼•æ“çš„å…¨å±€è§„åˆ™å®¹å™¨ã€‚æ„å»ºè§„åˆ™å®¹å™¨æ˜¯ä¸€ä¸ªé‡é‡çº§çš„æ“ä½œï¼Œä¸€èˆ¬åœ¨åº”ç”¨å¯åŠ¨æ—¶æ„å»ºä¸€æ¬¡ï¼Œç„¶åå¯ä»¥è¢«å…¨å±€ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–è§„åˆ™å®¹å™¨</span>
<span class="hljs-type">KieContainer</span> <span class="hljs-variable">kieContainer</span> <span class="hljs-operator">=</span> kieServices.getKieClasspathContainer();
</code></pre>
<p><code>KieContainer</code>ä¹Ÿæ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œå†…éƒ¨é‡‡ç”¨<strong>DCL</strong>åŒé‡æ£€æŸ¥é”æ¥å®ç°çš„ã€‚
åœ¨å¯åŠ¨æ—¶ä¼šå°è¯•åŠ è½½ç”¨æˆ·å®šä¹‰çš„è§„åˆ™èµ„æºï¼Œå³ä¾¿æ²¡æœ‰åŠ è½½åˆ°ä¹Ÿä¸ä¼šæœ‰ä»»ä½•æŠ¥é”™ï¼Œè€Œå½“æˆ‘ä»¬å°è¯•ä»è§„åˆ™å®¹å™¨è·å–è§„åˆ™åº“ï¼ˆKieBaseï¼‰æ—¶æ‰ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
<h5 data-id="heading-26">KieBase</h5>
<p>æˆ‘ä»¬è¯´è§„åˆ™å¼•æ“è¿™ä¸ªå¤§çš„æ³•é™¢ç³»ç»Ÿå°†æ‰€æœ‰çš„è§„åˆ™äº¤ç»™kieå®¹å™¨æ¥ç®¡ç†ï¼Œè€Œå®é™…çš„å­˜å‚¨è§„åˆ™çš„å¯¹åº”<em>KieBase</em>ç±»å‹çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè§„åˆ™å®¹å™¨(KieContainer)å¯ä»¥åŒ…å«å¤šä¸ªè§„åˆ™å­˜å‚¨åº“(KieBase)ã€‚
ç”¨æˆ·å¯ä»¥å¯¹è§„åˆ™åˆ†ç»„ï¼Œåˆ†å¤šä¸ªåº“æ¥ç®¡ç†ï¼›ä¹Ÿå¯ä»¥å°†æ‰€æœ‰è§„åˆ™é»˜è®¤æ”¾åœ¨ä¸€ä¸ªåº“ä¸­ã€‚æ€»ä¹‹ï¼Œè¦æ„å»ºä¸€ä¸ª<em>KieBase</em>éœ€è¦æœ‰ä¸€ä¸ªè§„åˆ™æ¨¡å—é…ç½®æ–‡ä»¶ï¼Œè·¯å¾„ä¸º<code>META-INFO/kmodule.xml</code>ï¼Œå†…å®¹å¯ä»¥ä¸ºç©ºï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">kmodule</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>  
        <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.drools.org/xsd/kmodule"</span>&gt;</span>  
  
<span class="hljs-tag">&lt;/<span class="hljs-name">kmodule</span>&gt;</span>
</code></pre>
<p>è¿™æ ·ä¼šå¾—åˆ°é»˜è®¤çš„ä¸€ä¸ªè§„åˆ™åº“å¯¹è±¡ï¼Œå’±ä»¬å¯ä»¥è·å–å…¶ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java">...
<span class="hljs-comment">// è·å–é»˜è®¤çš„è§„åˆ™åº“  </span>
<span class="hljs-type">KieBase</span> <span class="hljs-variable">kieBase</span> <span class="hljs-operator">=</span> kieContainer.getKieBase();  
logger.info(<span class="hljs-string">"------ kieBase packages: {}"</span>, kieBase.getKiePackages());
</code></pre>
<p>è¿™é‡Œå¾—åˆ°çš„åŒ…åä¼šæ˜¯ä¸€ä¸ªé›†åˆï¼Œdroolsæ¨èå¯¹è§„åˆ™æ–‡ä»¶æŒ‰åŒ…æ¥ç»„ç»‡ç»“æ„ï¼Œè§„åˆ™æ–‡ä»¶ä¸­å¤´éƒ¨ç”¨<code>package</code>å…³é”®å­—æŒ‡å®šçš„é€»è¾‘åŒ…åå°½é‡å’Œåœ¨<code>resources</code>èµ„æºåŒ…ä¸‹å­˜å‚¨çš„ç‰©ç†åŒ…è·¯å¾„ä¿æŒä¸€è‡´ï¼Œä»¥ä¾¿äº¤ç»™kieBaseè¿›è¡Œå¾ˆå¥½çš„ç®¡ç†ã€‚</p>
<p>ä¹Ÿå¯ä»¥å¯¹è§„åˆ™æŒ‰ç…§åŒ…è·¯å¾„åˆ†ç»„åï¼Œåˆ’åˆ†ç»™ä¸åŒçš„è§„åˆ™åº“æ¥ç®¡ç†ï¼Œè¿™æ ·å½“åº”ç”¨ä¸­æœ‰å¤šä¸ªä¸šåŠ¡æ¨¡å—ï¼Œå¯ä»¥å„è‡ªå…³æ³¨è·Ÿè‡ªå·±æ¨¡å—ç›¸å…³çš„ä¸šåŠ¡è§„åˆ™ï¼Œæé«˜è§„åˆ™çš„åŠ è½½å’Œæ‰§è¡Œæ•ˆç‡ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">kmodule</span> <span class="hljs-attr">...</span>&gt;</span>  
  
    <span class="hljs-tag">&lt;<span class="hljs-name">kbase</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"loanRules"</span> <span class="hljs-attr">packages</span>=<span class="hljs-string">"com.zm626.rules.loan"</span>&gt;</span>  
        <span class="hljs-comment">&lt;!-- è´·æ¬¾ç›¸å…³è§„åˆ™ --&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">kbase</span>&gt;</span>  
  
    <span class="hljs-tag">&lt;<span class="hljs-name">kbase</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"creditRules"</span> <span class="hljs-attr">packages</span>=<span class="hljs-string">"com.zm626.rules.credit"</span>&gt;</span>  
        <span class="hljs-comment">&lt;!-- ä¿¡ç”¨ç›¸å…³è§„åˆ™ --&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">kbase</span>&gt;</span>  
  
<span class="hljs-tag">&lt;/<span class="hljs-name">kmodule</span>&gt;</span>
</code></pre>
<p>å¯¹åº”çš„è§„åˆ™æ–‡ä»¶æ‰€åœ¨ç›®å½•ç»“æ„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01491c695ecf4effa3530c54b8058cd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=jMl5FCw5tVL0cbPC9Ohb1uP49cQ%3D" alt="20260211184113.png" loading="lazy"/></p>
<p>ç»ƒä¹ ä¸‹è·å–æŸä¸ªè§„åˆ™åº“ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–è§„åˆ™åº“åç§°  </span>
<span class="hljs-comment">// è¾“å‡ºï¼š[loanRules, creditRules]  </span>
logger.info(<span class="hljs-string">"------ è§„åˆ™åº“åç§°ï¼š{}"</span>, kieContainer.getKieBaseNames());  
  
<span class="hljs-comment">// è·å–æŸä¸ªè§„åˆ™åº“  </span>
<span class="hljs-type">var</span> <span class="hljs-variable">kb</span> <span class="hljs-operator">=</span> kieContainer.getKieBase(<span class="hljs-string">"loanRules"</span>);  
<span class="hljs-comment">// è¾“å‡ºï¼š[[Package name=com.zm626.rules.loan]]  </span>
logger.info(<span class="hljs-string">"------ kieBase packages: {}"</span>, kb.getKiePackages());
</code></pre>
<h4 data-id="heading-27">æ‰§è¡Œè§„åˆ™</h4>
<h5 data-id="heading-28">è§„åˆ™ä¼šè¯</h5>
<h6 data-id="heading-29">åˆ›å»ºKieSession</h6>
<p>åˆ›å»ºå¥½äº†è§„åˆ™å¼•æ“çš„å®¹å™¨ã€æ„å»ºå¥½è§„åˆ™åº“ä¹‹åï¼Œå°±å¯ä»¥æ‰§è¡Œè§„åˆ™äº†ï¼Œæ‰§è¡Œè§„åˆ™éœ€è¦åˆ›å»ºä¼šè¯å¯¹è±¡ï¼Œå°±å¥½æ¯”æ³•åº­å®¡åˆ¤ä¼šä¾æ®ç›¸å…³æ³•å¾‹æ³•è§„æ¥å¼€å¯ä¸€æ¬¡åº­å®¡ä¸€æ ·ï¼Œä¼šè¯çš„åˆ›å»ºå¯ä»¥äº¤ç»™<code>KieBase</code>å®ä¾‹ï¼Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">KieBase</span> <span class="hljs-variable">kieBase</span> <span class="hljs-operator">=</span> kieContainer.getKieBase();  
<span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession</span> <span class="hljs-operator">=</span> kieBase.newKieSession();  
<span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession2</span> <span class="hljs-operator">=</span> kieBase.newKieSession();  
<span class="hljs-comment">// è¿”å›falseï¼Œè¯´æ˜æ¯æ¬¡éƒ½æ˜¯æ–°newçš„ä¸€ä¸ªä¼šè¯å®ä¾‹  </span>
System.out.println(kieSession == kieSession2);
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ä¸€èˆ¬æ›´æ¨èç›´æ¥ç”¨<code>kieContainer</code>æ¥å¼€å¯ä¼šè¯ï¼Œå› ä¸ºå®¹å™¨åˆ›å»ºçš„ä¼šè¯ï¼Œå…¶å®å†…éƒ¨ä¹Ÿæ˜¯å€ŸåŠ©<code>kieBase</code>æ¥åˆ›å»ºçš„ï¼Œä½†å®¹å™¨åˆ›å»ºä¼šå¼€å¯å¯¹ä¼šè¯çš„ç›‘æ§å’Œç®¡ç†ï¼Œè¿™æ˜¯åœ¨å®é™…åº”ç”¨ä¸­æ¨èçš„åšæ³•ã€‚
å¯¹äºé»˜è®¤çš„<code>kbase</code>ï¼Œä¹Ÿå°±æ˜¯<em>kmodule.xml</em>ä¸ºç©ºçš„æƒ…å†µï¼Œå¼€å¯ä¼šè¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession</span> <span class="hljs-operator">=</span> kieContainer.newKieSession();
</code></pre>
<p>å¯¹äºå¤š<code>kbase</code>å®šä¹‰çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š
<em>kmodule.xml</em></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">kmodule</span> <span class="hljs-attr">...</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è´·æ¬¾ç”³è¯·ç›¸å…³è§„åˆ™ --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">kbase</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"loanRules"</span> <span class="hljs-attr">packages</span>=<span class="hljs-string">"com.zm626.rules"</span>&gt;</span>  
        <span class="hljs-comment">&lt;!-- å®šä¹‰ä¼šè¯åç§° --&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">ksession</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"loanSession"</span> /&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">kbase</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">kmodule</span>&gt;</span>
</code></pre>
<p>æŒ‰ç…§ä¼šè¯åç§°æ¥å¼€å¯ä¼šè¯</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession</span> <span class="hljs-operator">=</span> kieContainer.newKieSession(<span class="hljs-string">"loanSession"</span>);  
</code></pre>
<p>è¿™æ„å‘³ç€åˆ›å»ºçš„ä¼šè¯å¯¹è±¡æ¯æ¬¡éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œè¦æ³¨æ„ï¼šè¿™é‡Œåˆ›å»ºçš„<code>KieSession</code>æ˜¯æœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œå…³äºæœ‰çŠ¶æ€è¿˜æ˜¯æ— çŠ¶æ€åç»­ä¼šè®¨è®ºã€‚è§„åˆ™åº”ç”¨ä¸­æ¯å‘ä¸€ä¸ªhttpè¯·æ±‚ï¼Œåå°æ‰§è¡Œè§„åˆ™å‰éƒ½å…ˆåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ä¼šè¯ï¼Œè§„åˆ™æ‰§è¡Œå®Œæˆåé”€æ¯ä¼šè¯ã€‚è¿™ä¸åŒäºServletå®¹å™¨ä¸­çš„sessionä¼šè¯çš„æ¦‚å¿µï¼Œsessionä¼šè¯å¯ä»¥åœ¨å¤šä¸ªhttpè¯·æ±‚é—´é€šè¿‡æäº¤çš„cookieä¸­çš„sessionidæ¥å®ç°ä¼šè¯å…±äº«ï¼Œ<strong>è€Œè¿™é‡Œçš„è§„åˆ™ä¼šè¯å¦‚æœåˆ›å»ºä¸ºå…¨å±€è¯·æ±‚é—´å…±äº«ï¼Œé‚£ä¹ˆå¹¶å‘æ‰§è¡Œè§„åˆ™ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜</strong>ï¼Œè€Œåšæˆæ¯ä¸ªè¯·æ±‚å¯¹åº”åˆ›å»ºä¸€ä¸ªè§„åˆ™ä¼šè¯ï¼Œç›¸æ¯”äºè§„åˆ™å®¹å™¨å’Œè§„åˆ™åº“çš„æ„å»ºï¼Œè§„åˆ™ä¼šè¯çš„åˆ›å»ºåˆ™ç›¸å¯¹ä¼šè½»é‡çº§å¾ˆå¤šã€‚</p>
<h6 data-id="heading-30">ç›‘å¬è¿è¡Œäº‹ä»¶</h6>
<p>ä¸€èˆ¬åœ¨è§„åˆ™çš„å¼€å‘è°ƒè¯•é˜¶æ®µï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•è§„åˆ™æ‰§è¡Œæµç¨‹ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³å¼„æ¸…æ¥šè§„åˆ™æ‰§è¡Œçš„ç»†èŠ‚ï¼ŒæŸ¥çœ‹å“ªäº›äº‹å®è¢«æ’å…¥ï¼ŒæŸ¥çœ‹å“ªäº›è§„åˆ™è¢«è§¦å‘ï¼ŒæœŸé—´å‘ç”Ÿäº†å“ªäº›äº‹ä»¶ï¼Œæ’æŸ¥è§„åˆ™æœªæŒ‰é¢„æœŸæ‰§è¡Œçš„åŸå› ï¼Œä»¥ä¾¿äºä¿®å¤ã€æ”¹è¿›å’Œä¼˜åŒ–è§„åˆ™å®šä¹‰ã€‚ä¸ºæ­¤å¯ä»¥ç»™ä¼šè¯æ·»åŠ å¦‚ä¸‹ç›‘å¬å™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java">kieSession.addEventListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DebugRuleRuntimeEventListener</span>());  
</code></pre>
<p><code>DebugRuleRuntimeEventListener</code>Â ä¼šç›‘å¬è§„åˆ™æ‰§è¡Œè¿‡ç¨‹ä¸­çš„è¿è¡Œæ—¶äº‹ä»¶ï¼Œå¹¶å°†è¿™äº›äº‹ä»¶è¾“å‡ºåˆ°æ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•ã€‚ç›‘å¬çš„äº‹ä»¶ç±»å‹åŒ…æ‹¬ï¼š</p>
<ol>
<li>äº‹å®å¯¹è±¡æ’å…¥ï¼ˆFactÂ Insertedï¼‰</li>
<li>äº‹å®å¯¹è±¡æ›´æ–°ï¼ˆFact Updatedï¼‰</li>
<li>äº‹å®å¯¹è±¡åˆ é™¤ï¼ˆFact Deletedï¼‰</li>
<li>è§„åˆ™åŒ¹é…ï¼ˆRule Matchedï¼‰</li>
<li>è§„åˆ™è§¦å‘ï¼ˆRule Firedï¼‰</li>
<li>è§„åˆ™å–æ¶ˆï¼ˆRule Cancelledï¼‰
ç­‰ç­‰â€¦â€¦
è¿™å°±åƒåœ¨æ³•åº­å®¡åˆ¤æ—¶å®‰è£…æ‘„åƒå¤´ï¼Œè®°å½•æ•´ä¸ªå®¡åˆ¤è¿‡ç¨‹ï¼Œæ–¹ä¾¿åç»­å›çœ‹å’Œåˆ†æã€‚</li>
</ol>
<blockquote>
<p><strong>æ³¨æ„</strong>
è¿™æ˜¯è°ƒè¯•å·¥å…·ï¼Œç”Ÿäº§ç¯å¢ƒé€šå¸¸ä¸éœ€è¦ï¼Œå› ä¸ºä¼šäº§ç”Ÿå¤§é‡æ—¥å¿—ã€‚</p>
</blockquote>
<h6 data-id="heading-31">æ— çŠ¶æ€ä¼šè¯ä¸æœ‰çŠ¶æ€ä¼šè¯</h6>
<p><code>kieContainer.newKieSession()</code>æ–¹å¼åˆ›å»ºçš„æ˜¯æœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œå¦‚æœè¦åˆ›å»ºæ— çŠ¶æ€çš„ä¼šè¯ï¼Œå¯ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¼€å¯æ— çŠ¶æ€ä¼šè¯</span>
<span class="hljs-type">StatelessKieSession</span> <span class="hljs-variable">statelessKieSession</span> <span class="hljs-operator">=</span> kieContainer.newStatelessKieSession();
</code></pre>
<p>è¿™é‡Œçš„â€œçŠ¶æ€â€æŒ‡çš„æ˜¯ä¼šè¯ä¸­ä¿å­˜çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å·¥ä½œå†…å­˜ï¼ˆWorking Memoryï¼‰ä¸­çš„Â <code>Fact</code> å¯¹è±¡ã€‚
ç±»æ¯”ï¼šé“¶è¡ŒæŸœå° vsÂ è‡ªåŠ¨å–æ¬¾æœº</p>
<ul>
<li>æœ‰çŠ¶æ€ä¼šè¯ = é“¶è¡ŒæŸœå°ï¼šæŸœå‘˜ä¼šè®°ä½ä½ ä¹‹å‰åŠè¿‡çš„ä¸šåŠ¡</li>
<li>æ— çŠ¶æ€ä¼šè¯ = è‡ªåŠ¨å–æ¬¾æœºï¼šæ¯æ¬¡æ“ä½œéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¿ç•™ä¹‹å‰çš„ä¿¡æ¯</li>
</ul>
<p>æœ‰çŠ¶æ€ä¼šè¯çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ•°æ®ä¼šç´¯ç§¯åœ¨å·¥ä½œå†…å­˜ä¸­</li>
<li>å¯ä»¥åˆ†å¤šæ¬¡æ¥æ’å…¥æ•°æ®å¹¶æ‰§è¡Œè§„åˆ™</li>
<li>é€‚åˆéœ€è¦å¤šæ­¥éª¤äº¤äº’çš„åœºæ™¯</li>
<li>å¿…é¡»æ‰‹åŠ¨è°ƒç”¨Â dispose()Â æ¸…ç†
å®é™…åœºæ™¯æ¯”å¦‚ï¼šæ·»åŠ è´­ç‰©è½¦è§„åˆ™ï¼ˆå¤šæ­¥éª¤ï¼‰ï¼Œæ¯æ¬¡æ·»åŠ è´­ç‰©è½¦é¡¹åéƒ½è¦é‡æ–°è§¦å‘å•†å“ä¿ƒé”€ä¼˜æƒ è§„åˆ™çš„è®¡ç®—ã€‚</li>
</ul>
<p>æ— çŠ¶æ€ä¼šè¯çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¯æ¬¡æ‰§è¡Œå®Œè‡ªåŠ¨æ¸…ç©ºå·¥ä½œå†…å­˜</li>
<li>æ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å½±å“</li>
<li>é€‚åˆä¸€æ¬¡æ€§è§„åˆ™æ‰§è¡Œ</li>
<li>ä¸éœ€è¦æ‰‹åŠ¨æ¸…ç†
å®é™…åœºæ™¯æ¯”å¦‚ï¼šè´·æ¬¾å®¡æ‰¹ï¼ˆä¸€æ¬¡æ€§ï¼‰ï¼Œç”¨æˆ·æäº¤ç”³è¯·ï¼Œä¸€æ¬¡æ€§å®Œæˆå®¡æ‰¹ï¼Œæ‰§è¡Œå®Œå°±ç»“æŸï¼Œä¸éœ€è¦ä¿ç•™çŠ¶æ€ã€‚
<strong>æ— çŠ¶æ€ä¼šè¯è™½ç„¶ä¸ç»´æŠ¤çŠ¶æ€ï¼Œä½†å¹¶å‘æ‰§è¡Œæ—¶ä¹Ÿå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ŒåŒæ ·ä¸èƒ½å…¨å±€å…±äº«ã€‚</strong></li>
</ul>
<h5 data-id="heading-32">ç”¨ä¼šè¯æ‰§è¡Œè§„åˆ™</h5>
<h6 data-id="heading-33">æœ‰çŠ¶æ€ä¼šè¯çš„æ‰§è¡Œ</h6>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆçœ‹æœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œæœ‰äº†è§„åˆ™ä¼šè¯ï¼Œå°±å¯ä»¥é€šè¿‡ä¼šè¯æ¥å‘è§„åˆ™å¼•æ“å‘é€å‘½ä»¤ï¼ŒåŒ…æ‹¬äº†ï¼š</p>
<ul>
<li>æ’å…¥äº‹å®å¯¹è±¡</li>
<li>æ¿€æ´»è§„åˆ™ç»„</li>
<li>è§¦å‘è§„åˆ™</li>
<li>â€¦â€¦
æœ‰çŠ¶æ€ä¼šè¯æ‰§è¡Œæ—¶è§¦å‘è§„åˆ™æ˜¯æ‰‹åŠ¨è§¦å‘çš„ï¼ˆè°ƒç”¨<code>fireAllRules</code>ï¼‰ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œçš„ï¼Œä¸­é—´å¯ä»¥ç»§ç»­æ’å…¥äº‹å®å¯¹è±¡æˆ–è€…æ›´æ–°å…¶çŠ¶æ€ï¼Œå†ç»§ç»­è§¦å‘è§„åˆ™ï¼Œä¹Ÿæ˜¯è¿™ç§åˆ†æ­¥éª¤æ‰§è¡Œè§„åˆ™ï¼Œæ‰éœ€è¦ä¿æŒè§„åˆ™æ‰§è¡Œä¸Šä¸‹æ–‡çš„çŠ¶æ€ã€‚</li>
</ul>
<h6 data-id="heading-34">å•æ¡å‘½ä»¤</h6>
<p>è¿™ç§æ–¹å¼é€šè¿‡ä¼šè¯å‘è§„åˆ™å¼•æ“åˆ†å¤šæ¬¡å‘é€å‘½ä»¤ï¼Œæ¯æ¬¡å‘é€ä¸€æ¡ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java">...
<span class="hljs-comment">// ç›´æ¥æ’å…¥äº‹å®å¯¹è±¡  </span>
kieSession.insert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Applicant</span>(<span class="hljs-string">"#0001"</span>, <span class="hljs-number">20</span>));  
<span class="hljs-type">LoanApplication</span> <span class="hljs-variable">application</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LoanApplication</span>(<span class="hljs-string">"#0001"</span>);  
kieSession.insert(application);  
<span class="hljs-comment">// æ¿€æ´»è§„åˆ™ç»„  </span>
kieSession.getAgenda().getAgendaGroup(<span class="hljs-string">"applicationGroup"</span>).setFocus();  
<span class="hljs-comment">// è§¦å‘è§„åˆ™  </span>
<span class="hljs-type">int</span> <span class="hljs-variable">firedRules</span> <span class="hljs-operator">=</span> kieSession.fireAllRules();  
<span class="hljs-comment">// ç›´æ¥ä»å¯¹è±¡è·å–ç»“æœ  </span>
logger.info(<span class="hljs-string">"application: "</span> + application);
</code></pre>
<p>æ’å…¥äº‹å®å¯¹è±¡å°±å¥½æ¯”å‘æ³•åº­æäº¤æ¡ˆä»¶ææ–™ï¼ˆè¯æ®ã€æ–‡ä»¶ç­‰ï¼‰ï¼Œè¿™äº›ææ–™ä¼šè¢«æ”¾å…¥å·¥ä½œå†…å­˜ä¾›è§„åˆ™å¼•æ“åŒ¹é…ã€‚ä½†è¦æ³¨æ„å·å®—æ˜¯é™æ€çš„æ¦‚å¿µï¼Œè€Œè§„åˆ™å¼•æ“åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥åŠ¨æ€åœ°æ’å…¥ç”šè‡³ä¿®æ”¹äº‹å®å¯¹è±¡ï¼Œä»¥ä¾¿é‡æ–°è§¦å‘ä¸€äº›è§„åˆ™æˆ–æŸ¥è¯¢å•å…ƒçš„æ‰§è¡Œã€‚
ä¹‹å‰åœ¨è§„åˆ™æ–‡ä»¶å®šä¹‰æ—¶ï¼Œå¯¹è§„åˆ™é€šè¿‡<code>ruleflow-group</code>è¿›è¡Œäº†åˆ†ç»„ï¼Œé‚£è¿™é‡Œå°±åªæ˜¯æ¿€æ´»äº†æŒ‡å®šçš„è§„åˆ™åˆ†ç»„ï¼Œè€Œåé€šè¿‡ä¼šè¯å‡ºå‘äº†è¯¥åˆ†ç»„ä¸­çš„æ‰€æœ‰è§„åˆ™ï¼ˆè¿™é‡Œåªæœ‰ä¸€æ¡ï¼‰ï¼Œè¿”å›çš„æ˜¯è§¦å‘çš„è§„åˆ™æ¡æ•°ï¼Œè¿™é‡Œçš„äº‹å®å¯¹è±¡çš„å¼•ç”¨ï¼Œå…¶å®åœ¨è§„åˆ™çš„<code>then</code>ä¸­æ“ä½œçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ‹¿å®ƒæ¥çœ‹ç»“æœã€‚</p>
<h6 data-id="heading-35">æ‰¹é‡å‘½ä»¤</h6>
<p>å…ˆçœ‹ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java">...
<span class="hljs-type">var</span> <span class="hljs-variable">application</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Applicant</span>(<span class="hljs-string">"#0001"</span>, <span class="hljs-number">20</span>);  
  
<span class="hljs-type">ExecutionResults</span> <span class="hljs-variable">executionResults</span> <span class="hljs-operator">=</span> kieSession.execute(  
        CommandFactory.newBatchExecution(Arrays.asList(  
                CommandFactory.newInsert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Applicant</span>(<span class="hljs-string">"#0001"</span>, <span class="hljs-number">20</span>), <span class="hljs-string">"applicant"</span>),  
                CommandFactory.newInsert(application, <span class="hljs-string">"application"</span>),  
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">SetActiveAgendaGroup</span>(<span class="hljs-string">"applicationGroup"</span>),  
                CommandFactory.newFireAllRules()  
        ))  
);  
  
logger.info(<span class="hljs-string">"application: "</span> + executionResults.getResults().get(<span class="hljs-string">"application"</span>));  
logger.info(<span class="hljs-string">"application: "</span> + application);
</code></pre>
<p>è¿™é‡Œé€šè¿‡å‘½ä»¤çš„é™æ€å·¥å‚çš„åˆ›å»ºæ–¹å¼æ¥æ„å»ºä¸€ä¸ªæ‰¹é‡æ‰§è¡Œå‘½ä»¤çš„å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°äº¤ç»™ä¼šè¯æ¥æ‰§è¡Œã€‚è€Œç”¨æˆ·ä¼ å…¥çš„åˆ™æ˜¯ç”¨å‘½ä»¤æ¨¡å¼åŒ…è£…æˆ‘ä»¬å‰é¢æåˆ°çš„ä¸€ç»„æ“ä½œï¼Œè¿™ä¸ªæ•ˆç‡ç›¸æ¯”å‘é€å•æ¡å‘½ä»¤å°±æé«˜å¾ˆå¤šã€‚äº‹å®å¯¹è±¡åœ¨æ’å…¥åˆ°è§„åˆ™å¼•æ“å,æˆ‘ä»¬å¯ä»¥åœ¨å¤–é¢ç»™å®ƒå®šä¹‰å¥½å¼•ç”¨å˜é‡ç”¨äºåç»­æŸ¥çœ‹å®ƒ,ä¹Ÿå¯ä»¥åœ¨ç”¨å‘½ä»¤å·¥å‚æ’å…¥æ—¶æŒ‡å®šfactå¯¹è±¡çš„nameä½œä¸ºæ ‡è¯†,å› ä¸ºè¿™ç§æ–¹å¼ä¼šè¿”å›æ‰§è¡Œç»“æœ,ä»¥ä¾¿ä»æ‰§è¡Œç»“æœä¸­è·å–åˆ°å®ƒ,ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ã€‚</p>
<h6 data-id="heading-36">æ— çŠ¶æ€ä¼šè¯çš„æ‰§è¡Œ</h6>
<p>æ— çŠ¶æ€ä¼šè¯çš„æ‰§è¡Œå› ä¸ºæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸å­˜åœ¨åˆ†æ­¥éª¤çš„æƒ…å†µï¼Œåªé€‚åˆæ‰¹é‡å‘½ä»¤çš„æ–¹å¼ï¼Œä¸ºä»€ä¹ˆåªé€‚åˆæ‰¹é‡å‘½ä»¤ï¼šå› ä¸ºæ¯æ¬¡Â execute()Â éƒ½æ˜¯ç‹¬ç«‹çš„æ‰§è¡Œå•å…ƒï¼Œéœ€è¦åœ¨ä¸€ä¸ªæ‰¹æ¬¡ä¸­å®Œæˆæ‰€æœ‰æ“ä½œã€‚</p>
<p>è¯¥å®ä¾‹ç›¸æ¯”äºæœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œåªæ˜¯æœ€åæ— éœ€æ‰‹åŠ¨è§¦å‘è§„åˆ™ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">StatelessKieSession</span> <span class="hljs-variable">statelessKieSession</span> <span class="hljs-operator">=</span> kieContainer.newStatelessKieSession();  
statelessKieSession.addEventListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DebugRuleRuntimeEventListener</span>());  
  
<span class="hljs-type">ExecutionResults</span> <span class="hljs-variable">statelessExecutionResults</span> <span class="hljs-operator">=</span> statelessKieSession.execute(  
        CommandFactory.newBatchExecution(Arrays.asList(  
                CommandFactory.newInsert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Applicant</span>(<span class="hljs-string">"#0001"</span>, <span class="hljs-number">20</span>), <span class="hljs-string">"applicant"</span>),  
                CommandFactory.newInsert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LoanApplication</span>(<span class="hljs-string">"#0001"</span>), <span class="hljs-string">"application"</span>),  
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">SetActiveAgendaGroup</span>(<span class="hljs-string">"applicationGroup"</span>)            ))  
);  
  
logger.info(<span class="hljs-string">"application: "</span> + statelessExecutionResults.getResults().get(<span class="hljs-string">"application"</span>));
</code></pre>
<h5 data-id="heading-37">é”€æ¯ä¼šè¯</h5>
<p>æ³¨æ„è¿™é‡Œåªé€‚ç”¨äºæœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œå®Œæˆè§„åˆ™æ‰§è¡Œåç¡®å®ä¸éœ€è¦å†ä½¿ç”¨æœ‰çŠ¶æ€çš„ä¼šè¯äº†ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨çš„è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java">kieSession.dispose();
</code></pre>
<p>ä»¥ä¾¿é‡Šæ”¾è§„åˆ™æ‰§è¡Œæ—¶å ç”¨çš„èµ„æºã€å·¥ä½œå†…å­˜ç©ºé—´ç­‰ã€‚<strong>ä½†è¦æ³¨æ„ï¼ŒçŠ¶æ€ä¼šè¯ä¸€æ—¦å…³é—­å°±ä¸èƒ½å†æ‰§è¡Œè§„åˆ™äº†</strong>ã€‚kieä¼šè¯æ¥å£åœ¨è®¾è®¡ä¸Šæ‰©å±•äº†<code>AutoCloseable</code>æ¥å£ï¼Œ<code>close</code>æ–¹æ³•å®ç°ä¸ºå¯¹<code>dispose</code>æ–¹æ³•çš„è°ƒç”¨ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨<code>try-with-resources</code>è¯­æ³•æ¥å£°æ˜ä¼šè¯çš„åˆ›å»ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> (  
	<span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession</span> <span class="hljs-operator">=</span> kieContainer.newKieSession();  
) {
    ...
}
</code></pre>
<p>è€Œå¯¹äºæ— çŠ¶æ€çš„ä¼šè¯ï¼Œæ¯æ¬¡æ‰§è¡Œå®Œè§„åˆ™åä¼šè‡ªåŠ¨é‡Šæ”¾èµ„æºï¼Œåç»­å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚</p>
<h3 data-id="heading-38">æ€»ç»“</h3>
<p>æœ¬æ–‡ä»‹ç»äº† Drools è§„åˆ™å¼•æ“çš„åŸºç¡€ä½¿ç”¨ï¼šä»ç¯å¢ƒæ­å»ºåˆ°è§„åˆ™å®šä¹‰ï¼Œå†åˆ°é€šè¿‡Â KieServicesã€KieContainerã€KieBaseã€KieSessionÂ æ‰§è¡Œè§„åˆ™ã€‚é‡ç‚¹åŒ…æ‹¬ Fact ç±»ã€DRL è§„åˆ™æ–‡ä»¶ã€æœ‰çŠ¶æ€/æ— çŠ¶æ€ä¼šè¯çš„åŒºåˆ«ï¼Œä»¥åŠå•æ¡å‘½ä»¤ä¸æ‰¹é‡å‘½ä»¤çš„æ‰§è¡Œæ–¹å¼ã€‚é€šè¿‡æ³•é™¢å®¡ç†æ¡ˆä»¶çš„ç±»æ¯”ï¼Œå¸®åŠ©ç†è§£è§„åˆ™å¼•æ“çš„æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<p>ä»¥ä¸Šå†…å®¹ä¸ºå…¥é—¨åŸºç¡€ã€‚åç»­å°†æ·±å…¥è§„åˆ™ä¼˜å…ˆçº§ã€è§„åˆ™åˆ†ç»„ã€å¤æ‚æ¡ä»¶åŒ¹é…ã€è§„åˆ™æµ‹è¯•ã€æ€§èƒ½ä¼˜åŒ–ç­‰è¿›é˜¶ä¸»é¢˜ï¼Œä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ‰‹å†™ callã€applyã€bindï¼šæ·±å…¥ç†è§£å‡½æ•°ä¸Šä¸‹æ–‡ç»‘å®š]]></title>    <link>https://juejin.cn/post/7605941424535470134</link>    <guid>https://juejin.cn/post/7605941424535470134</guid>    <pubDate>2026-02-12T22:57:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605941424535470134" data-draft-id="7605800124883435526" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ‰‹å†™ callã€applyã€bindï¼šæ·±å…¥ç†è§£å‡½æ•°ä¸Šä¸‹æ–‡ç»‘å®š"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-12T22:57:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ‰‹å†™ callã€applyã€bindï¼šæ·±å…¥ç†è§£å‡½æ•°ä¸Šä¸‹æ–‡ç»‘å®š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T22:57:30.000Z" title="Thu Feb 12 2026 22:57:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“é¢è¯•å®˜è®©æˆ‘ä»¬æ‰‹å†™ callã€applyã€bind æ—¶ï¼Œä»–ä»¬çœŸæ­£è€ƒå¯Ÿçš„æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸‰ä¸ªæ–¹æ³•çœ‹ä¼¼ç®€å•ï¼Œå´éšè—ç€ JavaScript å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ã€åŸå‹é“¾ã€å‚æ•°å¤„ç†ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚æœ¬æ–‡å°†ä»é›¶å®ç°ï¼Œå¹¶æ·±å…¥ç†è§£å®ƒä»¬çš„å·®å¼‚å’Œåº”ç”¨åœºæ™¯ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦ callã€applyã€bindï¼Ÿ</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
  <span class="hljs-title function_">sayHello</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  }
};

<span class="hljs-keyword">const</span> sayHelloFunc = obj.<span class="hljs-property">sayHello</span>;
obj.<span class="hljs-title function_">sayHello</span>();     <span class="hljs-comment">// "ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ä¸‰" - æ­£ç¡®</span>
<span class="hljs-title function_">sayHelloFunc</span>();     <span class="hljs-comment">// "ä½ å¥½ï¼Œæˆ‘æ˜¯undefined" - thisä¸¢å¤±äº†ï¼</span>
</code></pre>
<p>ä¸Šè¿°ä»£ç ï¼Œå‡ºç°é—®é¢˜æ ¹æºæ˜¯ï¼šå‡½æ•°çš„ this åœ¨è°ƒç”¨æ—¶æ‰ç¡®å®šï¼Œå–å†³äºè°ƒç”¨æ–¹å¼ã€‚é‚£å¦‚ä½•è§£å†³å‘¢ï¼Ÿä½¿ç”¨callã€applyã€bind æ˜¾å¼ç»‘å®š this ã€‚</p>
<h2 data-id="heading-1">call æ–¹æ³•çš„å®ç°</h2>
<h3 data-id="heading-2">call çš„åŸºæœ¬ä½¿ç”¨</h3>
<p>call æ–¹æ³•ç”¨äºè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æ˜¾å¼æŒ‡å®šå‡½æ•°çš„ this å€¼å’Œå‚æ•°åˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">message</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${message}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>!`</span>);
}

<span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">'zhangsan'</span> };

<span class="hljs-comment">// åŸç”Ÿ call çš„ä½¿ç”¨</span>
greet.<span class="hljs-title function_">call</span>(person, <span class="hljs-string">'ä½ å¥½'</span>); <span class="hljs-comment">// "ä½ å¥½, zhangsan!"</span>
</code></pre>
<h3 data-id="heading-3">call çš„å·¥ä½œåŸç†</h3>
<ol>
<li>å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§</li>
<li>ä½¿ç”¨è¯¥å¯¹è±¡è°ƒç”¨å‡½æ•°</li>
<li>åˆ é™¤è¯¥å±æ€§</li>
</ol>
<h3 data-id="heading-4">åŸºç¡€ç‰ˆæœ¬å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCall</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...args</span>) {
  <span class="hljs-comment">// å¦‚æœcontextæ˜¯nullæˆ–undefinedï¼Œåˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">null</span>) {
    context = globalThis;
  }
  <span class="hljs-comment">// ç»™contextå¯¹è±¡æ·»åŠ ä¸€ä¸ªä¸´æ—¶å±æ€§ï¼Œå€¼ä¸ºå½“å‰å‡½æ•°</span>
  <span class="hljs-keyword">const</span> fnKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'fn'</span>); <span class="hljs-comment">// ä½¿ç”¨Symbolé¿å…å±æ€§åå†²çª</span>
  context[fnKey] = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// thisæŒ‡å‘è°ƒç”¨myCallçš„å‡½æ•°</span>
  <span class="hljs-comment">// ä½¿ç”¨contextå¯¹è±¡è°ƒç”¨å‡½æ•°</span>
  <span class="hljs-keyword">const</span> result = context[fnKey](...args);
  <span class="hljs-comment">// åˆ é™¤ä¸´æ—¶å±æ€§</span>
  <span class="hljs-keyword">delete</span> context[fnKey];
  <span class="hljs-keyword">return</span> result;
};
</code></pre>
<h3 data-id="heading-5">å¤„ç†è¾¹ç•Œæƒ…å†µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCallEnhanced</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...args</span>) {
  <span class="hljs-comment">// å¤„ç†undefinedå’Œnull</span>
  <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">null</span>) {
    context = globalThis;
  }

  <span class="hljs-comment">// åŸå§‹å€¼éœ€è¦è½¬æ¢ä¸ºå¯¹è±¡ï¼Œå¦åˆ™ä¸èƒ½æ·»åŠ å±æ€§</span>
  <span class="hljs-keyword">const</span> contextType = <span class="hljs-keyword">typeof</span> context;
  <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'string'</span> ||
    contextType === <span class="hljs-string">'number'</span> ||
    contextType === <span class="hljs-string">'boolean'</span> ||
    contextType === <span class="hljs-string">'symbol'</span> ||
    contextType === <span class="hljs-string">'bigint'</span>) {
    context = <span class="hljs-title class_">Object</span>(context); <span class="hljs-comment">// è½¬æ¢ä¸ºåŒ…è£…å¯¹è±¡</span>
  }

  <span class="hljs-comment">// ä½¿ç”¨æ›´å®‰å…¨çš„Symbolä½œä¸ºkey</span>
  <span class="hljs-keyword">const</span> fnKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'fn'</span>);
  context[fnKey] = <span class="hljs-variable language_">this</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> result = context[fnKey](...args);
    <span class="hljs-keyword">return</span> result;
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// ç¡®ä¿æ€»æ˜¯åˆ é™¤ä¸´æ—¶å±æ€§</span>
    <span class="hljs-keyword">delete</span> context[fnKey];
  }
};

</code></pre>
<h3 data-id="heading-6">å®Œæ•´å®ç°ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCallFinal</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context = globalThis, ...args</span>) {
  <span class="hljs-comment">// 1. ç±»å‹æ£€æŸ¥ï¼šç¡®ä¿è°ƒç”¨è€…æ˜¯å‡½æ•°</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">this</span> !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Function.prototype.myCallFinal called on non-function'</span>);
  }

  <span class="hljs-comment">// 2. å¤„ç†Symbolå’ŒBigIntï¼ˆES6+ï¼‰</span>
  <span class="hljs-keyword">const</span> contextType = <span class="hljs-keyword">typeof</span> context;
  <span class="hljs-keyword">let</span> finalContext = context;

  <span class="hljs-comment">// 3. å¤„ç†åŸå§‹å€¼ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹çš„è‡ªåŠ¨è£…ç®±ï¼‰</span>
  <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'string'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'number'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'boolean'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boolean</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'symbol'</span>) {
    <span class="hljs-comment">// Symbolä¸èƒ½é€šè¿‡newåˆ›å»ºï¼Œä½¿ç”¨Object</span>
    finalContext = <span class="hljs-title class_">Object</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'bigint'</span>) {
    <span class="hljs-comment">// BigIntä¸èƒ½é€šè¿‡newåˆ›å»ºï¼Œä½¿ç”¨Object</span>
    finalContext = <span class="hljs-title class_">Object</span>(context);
  }
  <span class="hljs-comment">// nullå’Œundefinedå·²ç»é€šè¿‡é»˜è®¤å‚æ•°å¤„ç†</span>

  <span class="hljs-comment">// 4. ä½¿ç”¨Symbolåˆ›å»ºå”¯ä¸€keyï¼Œé¿å…å±æ€§å†²çª</span>
  <span class="hljs-keyword">const</span> fnSymbol = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'callFn'</span>);

  <span class="hljs-comment">// 5. å°†å‡½æ•°ç»‘å®šåˆ°ä¸Šä¸‹æ–‡å¯¹è±¡</span>
  <span class="hljs-comment">// ä½¿ç”¨Object.definePropertyç¡®ä¿å±æ€§å¯é…ç½®</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(finalContext, fnSymbol, {
    <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>,
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>
  });

  <span class="hljs-comment">// 6. æ‰§è¡Œå‡½æ•°å¹¶è·å–ç»“æœ</span>
  <span class="hljs-keyword">let</span> result;
  <span class="hljs-keyword">try</span> {
    result = finalContext[fnSymbol](...args);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 7. æ¸…ç†ä¸´æ—¶å±æ€§</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">delete</span> finalContext[fnSymbol];
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// å¦‚æœä¸Šä¸‹æ–‡ä¸å¯é…ç½®ï¼Œå¿½ç•¥é”™è¯¯</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æ— æ³•åˆ é™¤ä¸´æ—¶å±æ€§:'</span>, error.<span class="hljs-property">message</span>);
    }
  }

  <span class="hljs-keyword">return</span> result;
};
</code></pre>
<h2 data-id="heading-7">apply æ–¹æ³•çš„å®ç°</h2>
<h3 data-id="heading-8">apply çš„åŸºæœ¬ä½¿ç”¨</h3>
<p>apply å’Œ call çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºå‚æ•°çš„ä¼ é€’æ–¹å¼ï¼š</p>
<ul>
<li>call æ¥å—å‚æ•°åˆ—è¡¨</li>
<li>apply æ¥å—å‚æ•°æ•°ç»„</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">a, b, c</span>) {
  <span class="hljs-keyword">return</span> a + b + c;
}
<span class="hljs-comment">// applyï¼šå‚æ•°ä»¥æ•°ç»„å½¢å¼ä¼ é€’</span>
sum.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
</code></pre>
<h3 data-id="heading-9">åŸºç¡€ç‰ˆæœ¬å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCall</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, args</span>) {
  <span class="hljs-comment">// å¦‚æœcontextæ˜¯nullæˆ–undefinedï¼Œåˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">null</span>) {
    context = globalThis;
  }
  <span class="hljs-comment">// ç»™contextå¯¹è±¡æ·»åŠ ä¸€ä¸ªä¸´æ—¶å±æ€§ï¼Œå€¼ä¸ºå½“å‰å‡½æ•°</span>
  <span class="hljs-keyword">const</span> fnKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'fn'</span>); <span class="hljs-comment">// ä½¿ç”¨Symbolé¿å…å±æ€§åå†²çª</span>
  context[fnKey] = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// thisæŒ‡å‘è°ƒç”¨myCallçš„å‡½æ•°</span>
  <span class="hljs-comment">// ä½¿ç”¨contextå¯¹è±¡è°ƒç”¨å‡½æ•°</span>
  <span class="hljs-keyword">const</span> result = context[fnKey](...args);
  <span class="hljs-comment">// åˆ é™¤ä¸´æ—¶å±æ€§</span>
  <span class="hljs-keyword">delete</span> context[fnKey];
  <span class="hljs-keyword">return</span> result;
};
</code></pre>
<h3 data-id="heading-10">å®Œæ•´å®ç°ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myApply</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context = globalThis, argsArray</span>) {
  <span class="hljs-comment">// 1. ç±»å‹æ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">this</span> !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Function.prototype.myApply called on non-function'</span>);
  }

  <span class="hljs-comment">// 2. å‚æ•°å¤„ç†ï¼šç¡®ä¿argsArrayæ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„å¯¹è±¡</span>
  <span class="hljs-keyword">let</span> args = [];
  <span class="hljs-keyword">if</span> (argsArray != <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºæ•°ç»„æˆ–ç±»æ•°ç»„</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> argsArray !== <span class="hljs-string">'object'</span> ||
      (<span class="hljs-keyword">typeof</span> argsArray.<span class="hljs-property">length</span> !== <span class="hljs-string">'number'</span> &amp;&amp; argsArray.<span class="hljs-property">length</span> !== <span class="hljs-literal">undefined</span>)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„å¯¹è±¡'</span>);
    }

    <span class="hljs-comment">// å°†ç±»æ•°ç»„è½¬æ¢ä¸ºçœŸå®æ•°ç»„</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(argsArray)) {
      args = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(argsArray);
    } <span class="hljs-keyword">else</span> {
      args = argsArray;
    }
  }

  <span class="hljs-comment">// 3. ä½¿ç”¨Symbolä½œä¸ºå”¯ä¸€key</span>
  <span class="hljs-keyword">const</span> fnSymbol = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'applyFn'</span>);

  <span class="hljs-comment">// 4. å¤„ç†åŸå§‹å€¼ï¼ˆä¸callç›¸åŒï¼‰</span>
  <span class="hljs-keyword">const</span> contextType = <span class="hljs-keyword">typeof</span> context;
  <span class="hljs-keyword">let</span> finalContext = context;

  <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'string'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'number'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'boolean'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boolean</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'symbol'</span>) {
    finalContext = <span class="hljs-title class_">Object</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'bigint'</span>) {
    finalContext = <span class="hljs-title class_">Object</span>(context);
  }

  <span class="hljs-comment">// 5. ç»‘å®šå‡½æ•°åˆ°ä¸Šä¸‹æ–‡</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(finalContext, fnSymbol, {
    <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>,
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>
  });

  <span class="hljs-comment">// 6. æ‰§è¡Œå‡½æ•°</span>
  <span class="hljs-keyword">let</span> result;
  <span class="hljs-keyword">try</span> {
    result = finalContext[fnSymbol](...args);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 7. æ¸…ç†</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">delete</span> finalContext[fnSymbol];
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// å¿½ç•¥åˆ é™¤é”™è¯¯</span>
    }
  }

  <span class="hljs-keyword">return</span> result;
};
</code></pre>
<h2 data-id="heading-11">bind æ–¹æ³•çš„å®ç°</h2>
<h3 data-id="heading-12">bind çš„åŸºæœ¬ä½¿ç”¨</h3>
<p>bind æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒçš„ this å€¼ä¼šè¢«ç»‘å®šåˆ°æŒ‡å®šçš„å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥é¢„å…ˆä¼ å…¥éƒ¨åˆ†å‚æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">greeting, name</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${greeting}</span>, <span class="hljs-subst">${name}</span>! æˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.role}</span>`</span>);
}

<span class="hljs-keyword">const</span> context = { <span class="hljs-attr">role</span>: <span class="hljs-string">'ç®¡ç†å‘˜'</span> };

<span class="hljs-comment">// bindï¼šåˆ›å»ºæ–°å‡½æ•°ï¼Œç¨åæ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> boundGreet = greet.<span class="hljs-title function_">bind</span>(context, <span class="hljs-string">'ä½ å¥½'</span>);
<span class="hljs-title function_">boundGreet</span>(<span class="hljs-string">'æå››'</span>); 
</code></pre>
<h3 data-id="heading-13">bind çš„æ ¸å¿ƒç‰¹æ€§ï¼š</h3>
<ol>
<li>è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</li>
<li>å¯ä»¥é¢„è®¾å‚æ•°ï¼ˆæŸ¯é‡ŒåŒ–ï¼‰</li>
<li>ç»‘å®šthiså€¼</li>
<li>æ”¯æŒnewæ“ä½œç¬¦ï¼ˆç‰¹æ®Šæƒ…å†µï¼‰</li>
</ol>
<h3 data-id="heading-14">åŸºç¡€ç‰ˆæœ¬å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myBind</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...bindArgs</span>) {
  <span class="hljs-keyword">const</span> fn = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...newArgs</span>) {
        <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(context, [...args, ...newArgs]);
    };
};
</code></pre>
<h3 data-id="heading-15">å¤„ç† new æ“ä½œç¬¦çš„ç‰¹æ®Šæƒ…å†µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myBindEnhanced</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context = globalThis, ...bindArgs</span>) {
  <span class="hljs-keyword">const</span> originalFunc = <span class="hljs-variable language_">this</span>;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> originalFunc !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Function.prototype.myBindEnhanced called on non-function'</span>);
  }

  <span class="hljs-comment">// å†…éƒ¨å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦è¢«newè°ƒç”¨</span>
  <span class="hljs-keyword">const</span> boundFunc = <span class="hljs-keyword">function</span> (<span class="hljs-params">...callArgs</span>) {
    <span class="hljs-comment">// å…³é”®åˆ¤æ–­ï¼šthis instanceof boundFunc</span>
    <span class="hljs-comment">// å¦‚æœä½¿ç”¨newè°ƒç”¨ï¼Œthisä¼šæ˜¯boundFuncçš„å®ä¾‹</span>
    <span class="hljs-keyword">const</span> isConstructorCall = <span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> boundFunc;

    <span class="hljs-comment">// ç¡®å®šæœ€ç»ˆçš„ä¸Šä¸‹æ–‡</span>
    <span class="hljs-comment">// å¦‚æœæ˜¯æ„é€ å‡½æ•°è°ƒç”¨ï¼Œä½¿ç”¨æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºthis</span>
    <span class="hljs-comment">// å¦åˆ™ä½¿ç”¨ç»‘å®šçš„context</span>
    <span class="hljs-keyword">const</span> finalContext = isConstructorCall ? <span class="hljs-variable language_">this</span> : <span class="hljs-title class_">Object</span>(context);

    <span class="hljs-comment">// åˆå¹¶å‚æ•°</span>
    <span class="hljs-keyword">const</span> finalArgs = bindArgs.<span class="hljs-title function_">concat</span>(callArgs);

    <span class="hljs-comment">// æ‰§è¡ŒåŸå‡½æ•°</span>
    <span class="hljs-comment">// å¦‚æœåŸå‡½æ•°æœ‰è¿”å›å€¼ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†</span>
    <span class="hljs-keyword">const</span> result = originalFunc.<span class="hljs-title function_">apply</span>(finalContext, finalArgs);

    <span class="hljs-comment">// æ„é€ å‡½æ•°è°ƒç”¨çš„ç‰¹æ®Šå¤„ç†</span>
    <span class="hljs-comment">// å¦‚æœåŸå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ä½¿ç”¨è¯¥å¯¹è±¡</span>
    <span class="hljs-comment">// å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ï¼ˆthisï¼‰</span>
    <span class="hljs-keyword">if</span> (isConstructorCall) {
      <span class="hljs-keyword">if</span> (result &amp;&amp; (<span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'function'</span>)) {
        <span class="hljs-keyword">return</span> result;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    }

    <span class="hljs-keyword">return</span> result;
  };

  <span class="hljs-comment">// ç»´æŠ¤åŸå‹é“¾</span>
  <span class="hljs-comment">// æ–¹æ³•1ï¼šç›´æ¥è®¾ç½®prototypeï¼ˆæœ‰ç¼ºé™·ï¼‰</span>
  <span class="hljs-comment">// boundFunc.prototype = originalFunc.prototype;</span>

  <span class="hljs-comment">// æ–¹æ³•2ï¼šä½¿ç”¨ç©ºå‡½æ•°ä¸­è½¬ï¼ˆæ¨èï¼‰</span>
  <span class="hljs-keyword">const</span> F = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) { };
  F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = originalFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
  boundFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
  boundFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = boundFunc;

  <span class="hljs-comment">// æ·»åŠ ä¸€äº›å…ƒä¿¡æ¯ï¼ˆå¯é€‰ï¼‰</span>
  boundFunc.<span class="hljs-property">originalFunc</span> = originalFunc;
  boundFunc.<span class="hljs-property">bindContext</span> = context;
  boundFunc.<span class="hljs-property">bindArgs</span> = bindArgs;

  <span class="hljs-keyword">return</span> boundFunc;
};
</code></pre>
<h3 data-id="heading-16">å®Œæ•´å®ç°ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myBindFinal</span> = (<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä½¿ç”¨é—­åŒ…ä¿å­˜Sliceæ–¹æ³•ï¼Œæé«˜æ€§èƒ½</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">ArraySlice</span> = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>;

  <span class="hljs-comment">// ç©ºå‡½æ•°ï¼Œç”¨äºåŸå‹é“¾ç»´æŠ¤</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">EmptyFunction</span>(<span class="hljs-params"/>) { }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">myBindFinal</span>(<span class="hljs-params">context = globalThis, ...bindArgs</span>) {
    <span class="hljs-keyword">const</span> originalFunc = <span class="hljs-variable language_">this</span>;

    <span class="hljs-comment">// ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> originalFunc !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Function.prototype.bind called on non-function'</span>);
    }

    <span class="hljs-comment">// å¤„ç†åŸå§‹å€¼çš„ä¸Šä¸‹æ–‡ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰</span>
    <span class="hljs-keyword">let</span> boundContext = context;
    <span class="hljs-keyword">const</span> contextType = <span class="hljs-keyword">typeof</span> boundContext;

    <span class="hljs-comment">// åŸå§‹å€¼åŒ…è£…ï¼ˆä¸call/applyä¿æŒä¸€è‡´ï¼‰</span>
    <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'string'</span>) {
      boundContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(boundContext);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'number'</span>) {
      boundContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(boundContext);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'boolean'</span>) {
      boundContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boolean</span>(boundContext);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'symbol'</span>) {
      boundContext = <span class="hljs-title class_">Object</span>(boundContext);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'bigint'</span>) {
      boundContext = <span class="hljs-title class_">Object</span>(boundContext);
    }

    <span class="hljs-comment">// åˆ›å»ºç»‘å®šå‡½æ•°</span>
    <span class="hljs-keyword">const</span> boundFunction = <span class="hljs-keyword">function</span> (<span class="hljs-params">...callArgs</span>) {
      <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¢«newè°ƒç”¨</span>
      <span class="hljs-keyword">const</span> isConstructorCall = <span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> boundFunction;

      <span class="hljs-comment">// ç¡®å®šæœ€ç»ˆä¸Šä¸‹æ–‡</span>
      <span class="hljs-keyword">let</span> finalContext;
      <span class="hljs-keyword">if</span> (isConstructorCall) {
        <span class="hljs-comment">// newè°ƒç”¨ï¼šå¿½ç•¥ç»‘å®šçš„contextï¼Œä½¿ç”¨æ–°å®ä¾‹</span>
        finalContext = <span class="hljs-variable language_">this</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (boundContext == <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// éä¸¥æ ¼æ¨¡å¼ï¼šä½¿ç”¨å…¨å±€å¯¹è±¡</span>
        finalContext = globalThis;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ™®é€šè°ƒç”¨ï¼šä½¿ç”¨ç»‘å®šçš„context</span>
        finalContext = boundContext;
      }

      <span class="hljs-comment">// åˆå¹¶å‚æ•°</span>
      <span class="hljs-keyword">const</span> allArgs = bindArgs.<span class="hljs-title function_">concat</span>(callArgs);

      <span class="hljs-comment">// è°ƒç”¨åŸå‡½æ•°</span>
      <span class="hljs-keyword">const</span> result = originalFunc.<span class="hljs-title function_">apply</span>(finalContext, allArgs);

      <span class="hljs-comment">// å¤„ç†æ„é€ å‡½æ•°è°ƒç”¨çš„è¿”å›å€¼</span>
      <span class="hljs-keyword">if</span> (isConstructorCall) {
        <span class="hljs-comment">// å¦‚æœåŸå‡½æ•°è¿”å›å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨è¯¥å¯¹è±¡</span>
        <span class="hljs-keyword">if</span> (result &amp;&amp; (<span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'function'</span>)) {
          <span class="hljs-keyword">return</span> result;
        }
        <span class="hljs-comment">// å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å®ä¾‹</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
      }

      <span class="hljs-keyword">return</span> result;
    };

    <span class="hljs-comment">// ç»´æŠ¤åŸå‹é“¾ - é«˜æ€§èƒ½ç‰ˆæœ¬</span>
    <span class="hljs-comment">// é¿å…ç›´æ¥ä¿®æ”¹boundFunction.prototypeï¼Œä½¿ç”¨ä¸­é—´å‡½æ•°</span>
    <span class="hljs-keyword">if</span> (originalFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) {
      <span class="hljs-title class_">EmptyFunction</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = originalFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
      boundFunction.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmptyFunction</span>();
      <span class="hljs-comment">// æ¢å¤constructorå±æ€§</span>
      boundFunction.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = boundFunction;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¤„ç†æ²¡æœ‰prototypeçš„æƒ…å†µï¼ˆå¦‚ç®­å¤´å‡½æ•°ï¼‰</span>
      boundFunction.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-literal">undefined</span>;
    }

    <span class="hljs-comment">// æ·»åŠ ä¸å¯æšä¸¾çš„åŸå§‹å‡½æ•°å¼•ç”¨ï¼ˆç”¨äºè°ƒè¯•ï¼‰</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'__originalFunction__'</span>, {
      <span class="hljs-attr">value</span>: originalFunc,
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
    });

    <span class="hljs-comment">// æ·»åŠ ä¸å¯æšä¸¾çš„ç»‘å®šä¿¡æ¯</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'__bindContext__'</span>, {
      <span class="hljs-attr">value</span>: boundContext,
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
    });

    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'__bindArgs__'</span>, {
      <span class="hljs-attr">value</span>: bindArgs,
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
    });

    <span class="hljs-comment">// è®¾ç½®é€‚å½“çš„å‡½æ•°å±æ€§</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'length'</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, originalFunc.<span class="hljs-property">length</span> - bindArgs.<span class="hljs-property">length</span>),
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>
    });

    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'name'</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-string">`bound <span class="hljs-subst">${originalFunc.name || <span class="hljs-string">''</span>}</span>`</span>.<span class="hljs-title function_">trim</span>(),
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>
    });

    <span class="hljs-keyword">return</span> boundFunction;
  };
})();
</code></pre>
<h2 data-id="heading-17">é¢è¯•å¸¸è§é—®é¢˜ä¸è§£ç­”</h2>
<h3 data-id="heading-18">é—®é¢˜1ï¼šæ‰‹å†™callçš„æ ¸å¿ƒæ­¥éª¤æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<ol>
<li>æ­¥éª¤1:  å°†å‡½æ•°è®¾ä¸ºä¸Šä¸‹æ–‡å¯¹è±¡çš„å±æ€§</li>
<li>æ­¥éª¤2:  æ‰§è¡Œè¯¥å‡½æ•°</li>
<li>æ­¥éª¤3:  åˆ é™¤è¯¥å±æ€§</li>
<li>æ­¥éª¤4:  è¿”å›å‡½æ•°æ‰§è¡Œç»“æœ</li>
<li>å…³é”®ç‚¹ï¼š
<ul>
<li>ä½¿ç”¨Symbolé¿å…å±æ€§åå†²çª</li>
<li>å¤„ç†null/undefinedä¸Šä¸‹æ–‡</li>
<li>å¤„ç†åŸå§‹å€¼ä¸Šä¸‹æ–‡</li>
<li>ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦å¤„ç†å‚æ•°</li>
</ul>
</li>
</ol>
<h3 data-id="heading-19">é—®é¢˜2ï¼šbindå¦‚ä½•å¤„ç†newæ“ä½œç¬¦ï¼Ÿ</h3>
<ol>
<li>é€šè¿‡ this instanceof boundFunction åˆ¤æ–­æ˜¯å¦è¢«newè°ƒç”¨</li>
<li>å¦‚æœæ˜¯newè°ƒç”¨ï¼Œå¿½ç•¥ç»‘å®šçš„ä¸Šä¸‹æ–‡ï¼Œä½¿ç”¨æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºthis</li>
<li>éœ€è¦æ­£ç¡®è®¾ç½®boundFunctionçš„åŸå‹é“¾ï¼Œä»¥æ”¯æŒinstanceof</li>
<li>å¦‚æœåŸæ„é€ å‡½æ•°è¿”å›å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨è¯¥å¯¹è±¡ï¼Œå¦åˆ™è¿”å›æ–°å®ä¾‹</li>
</ol>
<h3 data-id="heading-20">é—®é¢˜3ï¼šcallã€applyã€bindçš„æ€§èƒ½å·®å¼‚ï¼Ÿ</h3>
<ol>
<li>callé€šå¸¸æ¯”applyå¿«ï¼Œå› ä¸ºapplyéœ€è¦å¤„ç†æ•°ç»„å‚æ•°</li>
<li>bindåˆ›å»ºæ–°å‡½æ•°æœ‰å¼€é”€ï¼Œä½†å¤šæ¬¡è°ƒç”¨æ—¶æ¯”é‡å¤call/applyé«˜æ•ˆ</li>
</ol>
<h2 data-id="heading-21">ç»“è¯­</h2>
<p>é€šè¿‡æ·±å…¥ç†è§£callã€applyã€bindçš„å®ç°åŸç†ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½æ›´å¥½åœ°å›ç­”é¢è¯•é—®é¢˜ï¼Œè¿˜èƒ½åœ¨å®é™…å¼€å‘ä¸­ç¼–å†™å‡ºæ›´ä¼˜é›…ã€æ›´é«˜æ•ˆçš„JavaScriptä»£ç ã€‚å¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ‰‹å†™ new æ“ä½œç¬¦ï¼šæ·±å…¥ç†è§£å¯¹è±¡åˆ›å»º]]></title>    <link>https://juejin.cn/post/7605792874173055039</link>    <guid>https://juejin.cn/post/7605792874173055039</guid>    <pubDate>2026-02-13T01:10:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605792874173055039" data-draft-id="7605807405306921023" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ‰‹å†™ new æ“ä½œç¬¦ï¼šæ·±å…¥ç†è§£å¯¹è±¡åˆ›å»º"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-13T01:10:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ‰‹å†™ new æ“ä½œç¬¦ï¼šæ·±å…¥ç†è§£å¯¹è±¡åˆ›å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T01:10:10.000Z" title="Fri Feb 13 2026 01:10:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“æˆ‘ä»¬ä½¿ç”¨ new å…³é”®å­—æ—¶ï¼ŒèƒŒååˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¿™ä¸ªçœ‹ä¼¼ç®€å•çš„æ“ä½œï¼Œå®é™…ä¸Šå®Œæˆäº†ä¸€ç³»åˆ—å¤æ‚çš„æ­¥éª¤ã€‚ç†è§£ new çš„å·¥ä½œåŸç†ï¼Œæ˜¯æŒæ¡ JavaScript é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å…³é”®ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€ï¼šä» new çš„ç¥ç§˜é¢çº±è¯´èµ·</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">greet</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼Œä»Šå¹´<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>å²`</span>;
};

<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">25</span>);
</code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­ new åˆ°åº•åˆ›å»ºäº†ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆ this æŒ‡å‘äº†æ–°å¯¹è±¡ï¼ŸåŸå‹é“¾æ˜¯æ€ä¹ˆå»ºç«‹çš„ï¼Ÿå¦‚æœæ„é€ å‡½æ•°æœ‰è¿”å›å€¼ä¼šæ€æ ·ï¼Ÿæˆ‘ä»¬å°†é€šè¿‡æœ¬ç¯‡æ–‡ç« æ­å¼€ new çš„ç¥ç§˜é¢çº±ï¼Œä»é›¶å®ç°ä¸€ä¸ªè‡ªå·±çš„ new æ“ä½œç¬¦ã€‚</p>
<h2 data-id="heading-1">ç†è§£ new</h2>
<p>new çš„å››ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</li>
<li>å°†å¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºæ„é€ å‡½æ•°çš„ prototype å±æ€§</li>
<li>å°†æ„é€ å‡½æ•°çš„ this ç»‘å®šåˆ°æ–°å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°</li>
<li>åˆ¤æ–­è¿”å›å€¼ç±»å‹ï¼šå¦‚æœæ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼›å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡</li>
</ol>
<h2 data-id="heading-2">æ‰‹å†™å®ç° new æ“ä½œç¬¦</h2>
<h3 data-id="heading-3">åŸºç¡€ç‰ˆæœ¬å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">myNew</span>(<span class="hljs-params">constructor, ...args</span>) {

  <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> obj = {};

  <span class="hljs-comment">// 2. å°†å¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºæ„é€ å‡½æ•°çš„ prototype å±æ€§</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(obj, constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);

  <span class="hljs-comment">// 3. å°†æ„é€ å‡½æ•°çš„ this ç»‘å®šåˆ°æ–°å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°</span>
  <span class="hljs-keyword">const</span> result = constructor.<span class="hljs-title function_">apply</span>(obj, args);

  <span class="hljs-comment">// 4. åˆ¤æ–­è¿”å›å€¼ç±»å‹</span>
  <span class="hljs-comment">// å¦‚æœæ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡</span>
  <span class="hljs-comment">// å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> isObject = result !== <span class="hljs-literal">null</span> &amp;&amp; (<span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'function'</span>);

  <span class="hljs-keyword">return</span> isObject ? result : obj;
}
</code></pre>
<h3 data-id="heading-4">å¤„ç†è¾¹ç•Œæƒ…å†µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">myNewEnhanced</span>(<span class="hljs-params">constructor, ...args</span>) {

  <span class="hljs-comment">// è¾¹ç•Œæƒ…å†µ1ï¼šconstructor ä¸æ˜¯å‡½æ•°</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> constructor !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">`<span class="hljs-subst">${constructor}</span> is not a constructor`</span>);
  }

  <span class="hljs-comment">// è¾¹ç•Œæƒ…å†µ2ï¼šç®­å¤´å‡½æ•°ï¼ˆæ²¡æœ‰ prototypeï¼‰</span>
  <span class="hljs-keyword">if</span> (!constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">`<span class="hljs-subst">${constructor.name || constructor}</span> is not a constructor`</span>);
  }

  <span class="hljs-comment">// 1. åˆ›å»ºæ–°å¯¹è±¡ï¼ˆæ”¹è¿›æ–¹æ³•ï¼‰ï¼šä½¿ç”¨ Object.create æ›´ä¼˜é›…åœ°è®¾ç½®åŸå‹</span>
  <span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);

  <span class="hljs-comment">// 2. è°ƒç”¨æ„é€ å‡½æ•°</span>
  <span class="hljs-keyword">let</span> result;
  <span class="hljs-keyword">try</span> {
    result = constructor.<span class="hljs-title function_">apply</span>(obj, args);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// å¦‚æœæ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œç›´æ¥ä¼ æ’­</span>
    <span class="hljs-keyword">throw</span> error;
  }

  <span class="hljs-comment">// 3. å¤„ç†è¿”å›å€¼</span>
  <span class="hljs-comment">// æ³¨æ„ï¼šnull ä¹Ÿæ˜¯ object ç±»å‹ï¼Œä½†éœ€è¦ç‰¹æ®Šå¤„ç†</span>
  <span class="hljs-keyword">const</span> resultType = <span class="hljs-keyword">typeof</span> result;
  <span class="hljs-keyword">const</span> isObject = result !== <span class="hljs-literal">null</span> &amp;&amp; (resultType === <span class="hljs-string">'object'</span> || resultType === <span class="hljs-string">'function'</span>);

  <span class="hljs-keyword">return</span> isObject ? result : obj;
}

</code></pre>
<h3 data-id="heading-5">å®Œæ•´å®ç°ä¸åŸå‹é“¾ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">myNewComplete</span>(<span class="hljs-params">constructor, ...args</span>) {
  <span class="hljs-comment">// 1. å‚æ•°éªŒè¯</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> constructor !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">`Constructor <span class="hljs-subst">${constructor}</span> is not a function`</span>);
  }

  <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦ä¸ºå¯æ„é€ çš„å‡½æ•°ï¼šç®­å¤´å‡½æ•°å’Œéƒ¨åˆ†å†…ç½®æ–¹æ³•æ²¡æœ‰ prototype</span>
  <span class="hljs-keyword">if</span> (!constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> &amp;&amp; !<span class="hljs-title function_">isNativeConstructor</span>(constructor)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">`<span class="hljs-subst">${getFunctionName(constructor)}</span> is not a constructor`</span>);
  }

  <span class="hljs-comment">// 3. åˆ›å»ºæ–°å¯¹è±¡å¹¶è®¾ç½®åŸå‹é“¾</span>
  <span class="hljs-keyword">const</span> proto = constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> || <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
  <span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(proto);

  <span class="hljs-comment">// 4. ç»‘å®š constructor å±æ€§</span>
  obj.<span class="hljs-property">constructor</span> = constructor; 

  <span class="hljs-comment">// 5. æ‰§è¡Œæ„é€ å‡½æ•°</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">construct</span>(constructor, args, constructor);

  <span class="hljs-comment">// 6. å¤„ç†è¿”å›å€¼</span>
  <span class="hljs-comment">// Reflect.construct å·²ç»å¤„ç†äº†è¿”å›å€¼é€»è¾‘</span>
  <span class="hljs-comment">// ä½†æˆ‘ä»¬è¿˜æ˜¯å®ç°è‡ªå·±çš„é€»è¾‘ä»¥ä¿æŒä¸€è‡´</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">processConstructorResult</span>(result, obj, constructor);
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºåŸç”Ÿæ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isNativeConstructor</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-comment">// ä¸€äº›å†…ç½®æ„é€ å‡½æ•°å¦‚ Symbolã€BigInt æ²¡æœ‰ prototype</span>
  <span class="hljs-keyword">const</span> nativeConstructors = [
    <span class="hljs-string">'Number'</span>, <span class="hljs-string">'String'</span>, <span class="hljs-string">'Boolean'</span>, <span class="hljs-string">'Symbol'</span>, <span class="hljs-string">'BigInt'</span>,
    <span class="hljs-string">'Date'</span>, <span class="hljs-string">'RegExp'</span>, <span class="hljs-string">'Error'</span>, <span class="hljs-string">'Array'</span>, <span class="hljs-string">'Object'</span>, <span class="hljs-string">'Function'</span>
  ];

  <span class="hljs-keyword">return</span> nativeConstructors.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span>
    fn.<span class="hljs-property">name</span> === name || fn === globalThis[name]
  );
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šè·å–å‡½æ•°å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getFunctionName</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-keyword">if</span> (fn.<span class="hljs-property">name</span>) <span class="hljs-keyword">return</span> fn.<span class="hljs-property">name</span>;
  <span class="hljs-keyword">const</span> match = fn.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^function\s*([^\s(]+)/</span>);
  <span class="hljs-keyword">return</span> match ? match[<span class="hljs-number">1</span>] : <span class="hljs-string">'anonymous'</span>;
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šå¤„ç†æ„é€ å‡½æ•°è¿”å›å€¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processConstructorResult</span>(<span class="hljs-params">result, defaultObj, constructor</span>) {
  <span class="hljs-comment">// å¦‚æœ result æ˜¯ undefined æˆ– nullï¼Œè¿”å› defaultObj</span>
  <span class="hljs-keyword">if</span> (result == <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> defaultObj;
  }

  <span class="hljs-comment">// æ£€æŸ¥ result çš„ç±»å‹</span>
  <span class="hljs-keyword">const</span> type = <span class="hljs-keyword">typeof</span> result;

  <span class="hljs-comment">// å¦‚æœæ˜¯å¯¹è±¡æˆ–å‡½æ•°ï¼Œè¿”å› result</span>
  <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'object'</span> || type === <span class="hljs-string">'function'</span>) {
    <span class="hljs-comment">// é¢å¤–æ£€æŸ¥ï¼šå¦‚æœ result æ˜¯æ„é€ å‡½æ•°æœ¬èº«çš„å®ä¾‹ï¼Œç¡®ä¿åŸå‹é“¾æ­£ç¡®</span>
    <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> constructor) {
      <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">// åŸå§‹å€¼ï¼Œè¿”å› defaultObj</span>
  <span class="hljs-keyword">return</span> defaultObj;
}
</code></pre>
<h2 data-id="heading-6">æ·±å…¥åŸå‹é“¾ä¸ç»§æ‰¿</h2>
<h3 data-id="heading-7">åŸå‹é“¾çš„å»ºç«‹è¿‡ç¨‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çˆ¶æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}
<span class="hljs-comment">// çˆ¶ç±»æ–¹æ³•</span>
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speak</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> å«äº†`</span>;
};
<span class="hljs-comment">// å­æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params">name, breed</span>) {
  <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
}
<span class="hljs-comment">// å»ºç«‹åŸå‹é“¾</span>
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Dog</span>;
<span class="hljs-comment">// å­ç±»æ–¹æ³•</span>
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">bark</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> æ±ªæ±ªå«`</span>;
};
<span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span>
<span class="hljs-keyword">const</span> myDog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'æ—ºè´¢'</span>, <span class="hljs-string">'é‡‘æ¯›'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myDog.<span class="hljs-title function_">speak</span>()); <span class="hljs-comment">// æ—ºè´¢ å«äº†</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myDog.<span class="hljs-title function_">bark</span>());  <span class="hljs-comment">// æ—ºè´¢ æ±ªæ±ªå«</span>
</code></pre>
<h3 data-id="heading-8">ES6 ç±»ä¸ new çš„å…³ç³»</h3>
<p>ES6 ç±»çš„æœ¬è´¨è¿˜æ˜¯åŸºäºåŸå‹çš„è¯­æ³•ç³–ï¼š</p>
<h4 data-id="heading-9">ES6 åŸºæœ¬å†™æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  }

  <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>;
  }
}
<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">30</span>);
</code></pre>
<h4 data-id="heading-10">å¯¹åº” ES5 çš„å†™æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">PersonES5</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-comment">// ç±»æ„é€ å™¨ä¸­çš„ä»£ç </span>
  <span class="hljs-keyword">if</span> (!(<span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">PersonES5</span>)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Class constructor Person cannot be invoked without 'new'"</span>);
  }

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-comment">// å®ä¾‹æ–¹æ³•ï¼ˆæ·»åŠ åˆ°åŸå‹ï¼‰</span>
<span class="hljs-title class_">PersonES5</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">greet</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>;
};
<span class="hljs-keyword">const</span> personES5 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PersonES5</span>(<span class="hljs-string">'æå››'</span>, <span class="hljs-number">25</span>);
</code></pre>
<h3 data-id="heading-11">ç±»çš„é‡è¦ç‰¹æ€§</h3>
<ol>
<li>ç±»å¿…é¡»ç”¨ new è°ƒç”¨</li>
<li>ç±»æ–¹æ³•ä¸å¯æšä¸¾</li>
<li>ç±»æ²¡æœ‰å˜é‡æå‡</li>
</ol>
<h3 data-id="heading-12">ES6 å®ç°ç»§æ‰¿çš„å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">speak</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">' å«äº†'</span>);
  }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">super</span>(name);
  }

  <span class="hljs-title function_">speak</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">' æ±ªæ±ªå«'</span>);
  }
}
</code></pre>
<h4 data-id="heading-13">ES6 ç»§æ‰¿çš„æœ¬è´¨</h4>
<p>ES6 é€šè¿‡ <code>extends</code> å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œå°±ç­‰ä»·äº ES5 çš„å¯„ç”Ÿç»„åˆç»§æ‰¿ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">AnimalES5</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">AnimalES5</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speak</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">' å«äº†'</span>);
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DogES5</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-title class_">AnimalES5</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
}

<span class="hljs-comment">// è®¾ç½®åŸå‹é“¾</span>
<span class="hljs-title class_">DogES5</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AnimalES5</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">DogES5</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">DogES5</span>;

<span class="hljs-title class_">DogES5</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speak</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">' æ±ªæ±ªå«'</span>);
};
</code></pre>
<h2 data-id="heading-14">ç‰¹æ®Šåœºæ™¯ä¸é«˜çº§åº”ç”¨</h2>
<h3 data-id="heading-15">å•ä¾‹æ¨¡å¼ä¸ new</h3>
<h4 data-id="heading-16">æ–¹æ³•1ï¼šä½¿ç”¨é™æ€å±æ€§</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonV1</span> {
  <span class="hljs-keyword">static</span> instance = <span class="hljs-literal">null</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">SingletonV1</span>.<span class="hljs-property">instance</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">SingletonV1</span>.<span class="hljs-property">instance</span>;
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-title class_">SingletonV1</span>.<span class="hljs-property">instance</span> = <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SingletonV1</span>(name);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>;
  }
}
</code></pre>
<h4 data-id="heading-17">æ–¹æ³•2ï¼šä½¿ç”¨é—­åŒ…</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">SingletonV2</span> = (<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> instance = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
      <span class="hljs-keyword">if</span> (instance) {
        <span class="hljs-keyword">return</span> instance;
      }

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
      instance = <span class="hljs-variable language_">this</span>;
    }
  };
})();
</code></pre>
<h4 data-id="heading-18">æ–¹æ³•3ï¼šä»£ç†æ¨¡å¼</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createSingletonProxy</span>(<span class="hljs-params">Class</span>) {
  <span class="hljs-keyword">let</span> instance = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(<span class="hljs-title class_">Class</span>, {
    <span class="hljs-title function_">construct</span>(<span class="hljs-params">target, args</span>) {
      <span class="hljs-keyword">if</span> (!instance) {
        instance = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">construct</span>(target, args);
      }
      <span class="hljs-keyword">return</span> instance;
    }
  });
}
</code></pre>
<h3 data-id="heading-19">å®ç° Object.create çš„ polyfill</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Object</span>.<span class="hljs-property">create</span> !== <span class="hljs-string">'function'</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-property">create</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">proto, propertiesObject</span>) {
    <span class="hljs-comment">// å‚æ•°éªŒè¯</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> proto !== <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> proto !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Object prototype may only be an Object or null'</span>);
    }

    <span class="hljs-comment">// æ ¸å¿ƒå®ç°ï¼šä½¿ç”¨ç©ºå‡½æ•°ä½œä¸ºä¸­é—´æ„é€ å‡½æ•°</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params"/>) { }
    F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = proto;

    <span class="hljs-comment">// åˆ›å»ºæ–°å¯¹è±¡ï¼ŒåŸå‹æŒ‡å‘proto</span>
    <span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();

    <span class="hljs-comment">// å¤„ç†ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå±æ€§æè¿°ç¬¦ï¼‰</span>
    <span class="hljs-keyword">if</span> (propertiesObject !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperties</span>(obj, propertiesObject);
    }

    <span class="hljs-comment">// å¤„ç† null åŸå‹</span>
    <span class="hljs-keyword">if</span> (proto === <span class="hljs-literal">null</span>) {
      obj.<span class="hljs-property">__proto__</span> = <span class="hljs-literal">null</span>;
    }
    <span class="hljs-comment">// è¿”å›æ–°å¯¹è±¡</span>
    <span class="hljs-keyword">return</span> obj;
  };
}
</code></pre>
<h2 data-id="heading-20">å¸¸è§é¢è¯•é—®é¢˜ä¸è§£ç­”</h2>
<h3 data-id="heading-21">é—®é¢˜1ï¼šnew æ“ä½œç¬¦åšäº†ä»€ä¹ˆï¼Ÿ</h3>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡',</li>
<li>å°†è¿™ä¸ªç©ºå¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºæ„é€ å‡½æ•°çš„ prototype å±æ€§',</li>
<li>å°†æ„é€ å‡½æ•°çš„ this ç»‘å®šåˆ°è¿™ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°',</li>
<li>å¦‚æœæ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼›å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡</li>
</ol>
<h3 data-id="heading-22">é—®é¢˜2ï¼šå¦‚æœæ„é€ å‡½æ•°æœ‰è¿”å›å€¼ä¼šæ€æ ·ï¼Ÿ</h3>
<ul>
<li>è¿”å›å¯¹è±¡ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰ï¼šå¿½ç•¥ this ç»‘å®šçš„å¯¹è±¡ï¼Œè¿”å›è¯¥å¯¹è±¡</li>
<li>è¿”å›åŸå§‹å€¼ï¼ˆnumber, string, booleanç­‰ï¼‰ï¼šå¿½ç•¥è¿”å›å€¼ï¼Œè¿”å› this ç»‘å®šçš„å¯¹è±¡</li>
<li>æ²¡æœ‰ return è¯­å¥ï¼šéšå¼è¿”å› undefinedï¼Œè¿”å› this ç»‘å®šçš„å¯¹è±¡</li>
</ul>
<h3 data-id="heading-23">é—®é¢˜3ï¼šå¦‚ä½•åˆ¤æ–­å‡½æ•°æ˜¯å¦è¢« new è°ƒç”¨ï¼Ÿ</h3>
<ul>
<li>ES5ï¼šæ£€æŸ¥ this instanceof Constructor'</li>
<li>ES6+ï¼šä½¿ç”¨ new.targetï¼ˆæ›´å‡†ç¡®ï¼‰</li>
<li>ç®­å¤´å‡½æ•°ï¼šä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼Œæ²¡æœ‰ new.target</li>
</ul>
<h2 data-id="heading-24">ç»“è¯­</h2>
<p>é€šè¿‡æ·±å…¥ç†è§£ new æ“ä½œç¬¦çš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½åœ¨é¢è¯•ä¸­è„±é¢–è€Œå‡ºï¼Œè¿˜èƒ½åœ¨å®é™…å¼€å‘ä¸­åšå‡ºæ›´æ˜æ™ºçš„è®¾è®¡å†³ç­–ã€‚å¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScript æ ¸å¿ƒåŸºç¡€çŸ¥è¯†]]></title>    <link>https://juejin.cn/post/7605539194690666496</link>    <guid>https://juejin.cn/post/7605539194690666496</guid>    <pubDate>2026-02-13T01:11:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605539194690666496" data-draft-id="7605772919224320034" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScript æ ¸å¿ƒåŸºç¡€çŸ¥è¯†"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-13T01:11:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2754702534251820"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScript æ ¸å¿ƒåŸºç¡€çŸ¥è¯†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2754702534251820/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T01:11:10.000Z" title="Fri Feb 13 2026 01:11:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>TypeScriptï¼ˆç®€ç§° TSï¼‰ä½œä¸º JavaScript çš„è¶…é›†ï¼Œå·²æˆä¸ºå‰ç«¯å·¥ç¨‹åŒ–çš„æ ‡é…ã€‚å®ƒé€šè¿‡é™æ€ç±»å‹æ£€æŸ¥ï¼Œæå‰è§„é¿å¤§é‡è¿è¡Œæ—¶é”™è¯¯ï¼Œè®©ä»£ç æ›´æ˜“ç»´æŠ¤ã€æ›´å…·å¯è¯»æ€§ã€‚æœ¬æ–‡æŠ›å¼€å¤æ‚æ¦‚å¿µï¼Œä»æ–°æ‰‹è§†è§’æ¢³ç† TS æ ¸å¿ƒåŸºç¡€çŸ¥è¯†ï¼Œçœ‹å®Œå°±èƒ½ä¸Šæ‰‹å†™ TS ä»£ç ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦ TypeScriptï¼Ÿ</h2>
<p>å…ˆæ˜ç¡®å­¦ä¹ çš„æ„ä¹‰ï¼Œé¿å…ç›²ç›®è·Ÿé£ï¼š</p>
<ol>
<li><strong>é™æ€ç±»å‹æ£€æŸ¥</strong>ï¼šç¼–ç é˜¶æ®µå‘ç°é”™è¯¯ï¼ˆå¦‚ç±»å‹ä¸åŒ¹é…ã€å±æ€§ä¸å­˜åœ¨ï¼‰ï¼Œè€Œéè¿è¡Œæ—¶å´©æºƒï¼›</li>
<li><strong>æ›´å¥½çš„ä»£ç æç¤º</strong>ï¼šVS Code ç­‰ç¼–è¾‘å™¨èƒ½ç²¾å‡†æç¤ºå˜é‡ / å‡½æ•°çš„å±æ€§å’Œæ–¹æ³•ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼›</li>
<li><strong>ä»£ç å¯è¯»æ€§æå‡</strong>ï¼šç±»å‹æ³¨è§£å°±æ˜¯ â€œè‡ªæ–‡æ¡£â€ï¼Œä¸€çœ¼çœ‹æ‡‚å˜é‡ / å‡½æ•°çš„ç”¨é€”ï¼›</li>
<li><strong>å·¥ç¨‹åŒ–å¿…å¤‡</strong>ï¼šVue3ã€Reactã€Node.js ä¸»æµæ¡†æ¶ / ç¯å¢ƒå‡æ¨è / æ”¯æŒ TSï¼Œå¤§å‚é¡¹ç›®æ ‡é…ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€TS ç¯å¢ƒæ­å»ºï¼ˆå¿«é€Ÿä¸Šæ‰‹ï¼‰</h2>
<h3 data-id="heading-2">1. å®‰è£… TypeScript</h3>
<pre><code class="hljs language-js" lang="js"># å…¨å±€å®‰è£… <span class="hljs-variable constant_">TS</span> ç¼–è¯‘å™¨
npm install -g typescript
# éªŒè¯å®‰è£…ï¼ˆæŸ¥çœ‹ç‰ˆæœ¬ï¼‰
tsc -v
</code></pre>
<h3 data-id="heading-3">2. ç¬¬ä¸€ä¸ª TS ç¨‹åº</h3>
<ul>
<li>
<p>åˆ›å»º <code>hello.ts</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ç±»å‹æ³¨è§£ï¼šæŒ‡å®šå˜é‡ç±»å‹ä¸ºå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Hello TypeScript!"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);
</code></pre>
</li>
<li>
<p>ç¼–è¯‘ TS ä¸º JSï¼š</p>
<pre><code class="hljs language-ts" lang="ts"># å°† hello.<span class="hljs-property">ts</span> ç¼–è¯‘ä¸º hello.<span class="hljs-property">js</span>
tsc hello.<span class="hljs-property">ts</span>
</code></pre>
</li>
<li>
<p>è¿è¡Œ JS æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">node hello.<span class="hljs-property">js</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-4">3. ç®€åŒ–å¼€å‘ï¼šè‡ªåŠ¨ç¼–è¯‘ + çƒ­æ›´æ–°ï¼ˆå¯é€‰ï¼‰</h3>
<pre><code class="hljs language-ts" lang="ts"># å®‰è£… ts-nodeï¼ˆç›´æ¥è¿è¡Œ <span class="hljs-variable constant_">TS</span>ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–è¯‘ï¼‰
npm install -g ts-node
# ç›´æ¥è¿è¡Œ <span class="hljs-variable constant_">TS</span> æ–‡ä»¶
ts-node hello.<span class="hljs-property">ts</span>
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒåŸºç¡€ï¼šç±»å‹æ³¨è§£ä¸ç±»å‹æ¨æ–­</h2>
<h3 data-id="heading-6">1. ç±»å‹æ³¨è§£ï¼ˆæ‰‹åŠ¨æŒ‡å®šç±»å‹ï¼‰</h3>
<p>è¯­æ³•ï¼š<code>å˜é‡å: ç±»å‹ = å€¼</code>ï¼Œå‘Šè¯‰ TS å˜é‡çš„å…·ä½“ç±»å‹ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŸºæœ¬ç±»å‹æ³¨è§£</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"å¼ ä¸‰"</span>; <span class="hljs-comment">// å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">25</span>; <span class="hljs-comment">// æ•°å­—ï¼ˆæ•´æ•°/æµ®ç‚¹æ•°/NaN/Infinityï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">isAdult</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å¸ƒå°”å€¼</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">empty</span>: <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// null</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">undef</span>: <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// undefined</span>

<span class="hljs-comment">// æ•°ç»„æ³¨è§£ï¼ˆä¸¤ç§å†™æ³•ï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">arr1</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>]; <span class="hljs-comment">// æ¨è</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">arr2</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// æ³›å‹å†™æ³•</span>

<span class="hljs-comment">// å¯¹è±¡æ³¨è§£</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">user</span>: { <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> } = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"æå››"</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,
};

<span class="hljs-comment">// å‡½æ•°æ³¨è§£ï¼ˆå‚æ•° + è¿”å›å€¼ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> a + b;
}
</code></pre>
<h3 data-id="heading-7">2. ç±»å‹æ¨æ–­ï¼ˆTS è‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼‰</h3>
<p>TS ä¼šæ ¹æ®å˜é‡çš„åˆå§‹å€¼è‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œæ— éœ€æ‰‹åŠ¨æ³¨è§£ï¼ˆæ—¥å¸¸å¼€å‘ä¸­ä¼˜å…ˆç”¨æ¨æ–­ï¼Œå‡å°‘å†—ä½™ï¼‰ã€‚</p>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">let</span> str = <span class="hljs-string">"hello"</span>; <span class="hljs-comment">// TS è‡ªåŠ¨æ¨æ–­ str ä¸º string ç±»å‹</span>
str = <span class="hljs-number">123</span>; <span class="hljs-comment">// æŠ¥é”™ï¼šä¸èƒ½å°†ç±»å‹â€œnumberâ€åˆ†é…ç»™ç±»å‹â€œstringâ€</span>

<span class="hljs-keyword">let</span> num = <span class="hljs-number">100</span>; <span class="hljs-comment">// æ¨æ–­ä¸º number ç±»å‹</span>
<span class="hljs-keyword">let</span> bool = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ¨æ–­ä¸º boolean ç±»å‹</span>
</code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šèƒ½é æ¨æ–­çš„å°±ä¸æ‰‹åŠ¨æ³¨è§£ï¼Œéœ€è¦æ˜ç¡®çº¦æŸæ—¶æ‰åŠ æ³¨è§£ã€‚</p>
<h2 data-id="heading-8">å››ã€å¸¸ç”¨åŸºç¡€ç±»å‹</h2>
<h3 data-id="heading-9">1. åŸå§‹ç±»å‹</h3>
<p>è¡¨æ ¼</p>













































<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>string</code></td><td>å­—ç¬¦ä¸²</td><td><code>let str: string = "TS"</code></td></tr><tr><td><code>number</code></td><td>æ•°å­—</td><td><code>let num: number = 666</code></td></tr><tr><td><code>boolean</code></td><td>å¸ƒå°”å€¼</td><td><code>let flag: boolean = false</code></td></tr><tr><td><code>null</code></td><td>ç©ºå€¼</td><td><code>let n: null = null</code></td></tr><tr><td><code>undefined</code></td><td>æœªå®šä¹‰</td><td><code>let u: undefined = undefined</code></td></tr><tr><td><code>symbol</code></td><td>å”¯ä¸€å€¼</td><td><code>let s: symbol = Symbol("id")</code></td></tr><tr><td><code>bigint</code></td><td>å¤§æ•´æ•°</td><td><code>let b: bigint = 100n</code></td></tr></tbody></table>
<h3 data-id="heading-10">2. æ•°ç»„</h3>
<p>ä¸¤ç§å†™æ³•ï¼Œæ¨èç¬¬ä¸€ç§ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å†™æ³•1ï¼šç±»å‹[]</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">numbers</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-comment">// å†™æ³•2ï¼šArray&lt;ç±»å‹&gt;</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">strings</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>];
<span class="hljs-comment">// ç¦æ­¢æ··åˆç±»å‹ï¼ˆé™¤éæŒ‡å®šè”åˆç±»å‹ï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">mix</span>: (<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>)[] = [<span class="hljs-number">1</span>, <span class="hljs-string">"a"</span>]; <span class="hljs-comment">// è”åˆç±»å‹ï¼šå­—ç¬¦ä¸²æˆ–æ•°å­—</span>
</code></pre>
<h3 data-id="heading-11">3. å…ƒç»„ï¼ˆTupleï¼‰</h3>
<p>å›ºå®šé•¿åº¦ã€å›ºå®šç±»å‹çš„æ•°ç»„ï¼ˆå¼ºçº¦æŸï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å…ƒç»„æ³¨è§£ï¼šç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯stringï¼Œç¬¬äºŒä¸ªæ˜¯number</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">tuple</span>: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>] = [<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>];
tuple[<span class="hljs-number">0</span>] = <span class="hljs-string">"æå››"</span>; <span class="hljs-comment">// åˆæ³•</span>
tuple[<span class="hljs-number">1</span>] = <span class="hljs-number">30</span>; <span class="hljs-comment">// åˆæ³•</span>
tuple.<span class="hljs-title function_">push</span>(<span class="hljs-number">3</span>); <span class="hljs-comment">// æ³¨æ„ï¼špush ä¸ä¼šæŠ¥é”™ï¼ˆTS è®¾è®¡ç¼ºé™·ï¼‰ï¼Œä½†è®¿é—® tuple[2] ä¼šæŠ¥é”™</span>
</code></pre>
<h3 data-id="heading-12">4. ä»»æ„ç±»å‹ï¼ˆanyï¼‰</h3>
<p>å…³é—­ TS ç±»å‹æ£€æŸ¥ï¼Œæ…ç”¨ï¼ˆå¤±å» TS æ ¸å¿ƒä»·å€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">let</span> <span class="hljs-attr">anyValue</span>: <span class="hljs-built_in">any</span> = <span class="hljs-string">"hello"</span>;
anyValue = <span class="hljs-number">123</span>; <span class="hljs-comment">// ä¸æŠ¥é”™</span>
anyValue = <span class="hljs-literal">true</span>; <span class="hljs-comment">// ä¸æŠ¥é”™</span>
anyValue.<span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// ä¸æŠ¥é”™ï¼ˆè¿è¡Œæ—¶å¯èƒ½å´©æºƒï¼‰</span>
</code></pre>
<h3 data-id="heading-13">5. æœªçŸ¥ç±»å‹ï¼ˆunknownï¼‰</h3>
<p>å®‰å…¨ç‰ˆ <code>any</code>ï¼Œå¿…é¡»å…ˆç±»å‹æ ¡éªŒæ‰èƒ½ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">let</span> <span class="hljs-attr">unknownValue</span>: <span class="hljs-built_in">unknown</span> = <span class="hljs-string">"hello"</span>;
<span class="hljs-comment">// unknownValue.toUpperCase(); // æŠ¥é”™ï¼šä¸èƒ½ç›´æ¥è°ƒç”¨æ–¹æ³•</span>

<span class="hljs-comment">// å…ˆæ ¡éªŒç±»å‹ï¼Œå†ä½¿ç”¨</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> unknownValue === <span class="hljs-string">"string"</span>) {
  unknownValue.<span class="hljs-title function_">toUpperCase</span>(); <span class="hljs-comment">// åˆæ³•</span>
}
</code></pre>
<h3 data-id="heading-14">6. ç©ºç±»å‹ï¼ˆvoidï¼‰</h3>
<p>è¡¨ç¤ºå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼ˆæˆ–è¿”å› <code>undefined</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logMsg</span>(<span class="hljs-params"/>): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªæ— è¿”å›å€¼çš„å‡½æ•°"</span>);
  <span class="hljs-comment">// çœç•¥ return æˆ– return undefined å‡åˆæ³•</span>
}
</code></pre>
<h3 data-id="heading-15">7. æ°¸ä¸ç±»å‹ï¼ˆneverï¼‰</h3>
<p>è¡¨ç¤ºæ°¸è¿œä¸ä¼šå‘ç”Ÿçš„å€¼ï¼ˆå¦‚æŠ›å‡ºé”™è¯¯ã€æ— é™å¾ªç¯ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æŠ›å‡ºé”™è¯¯çš„å‡½æ•°ï¼Œè¿”å›å€¼ä¸º never</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">throwError</span>(<span class="hljs-params"/>): <span class="hljs-built_in">never</span> {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"å‡ºé”™äº†ï¼"</span>);
}

<span class="hljs-comment">// æ— é™å¾ªç¯çš„å‡½æ•°ï¼Œè¿”å›å€¼ä¸º never</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">infiniteLoop</span>(<span class="hljs-params"/>): <span class="hljs-built_in">never</span> {
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {}
}
</code></pre>
<h2 data-id="heading-16">äº”ã€è¿›é˜¶åŸºç¡€ï¼šæ¥å£ä¸ç±»å‹åˆ«å</h2>
<h3 data-id="heading-17">1. æ¥å£ï¼ˆinterfaceï¼‰</h3>
<p>ç”¨äºçº¦æŸå¯¹è±¡çš„ç»“æ„ï¼Œå¯æ‰©å±•ã€å¯å®ç°ï¼Œæ˜¯ TS ä¸­å®šä¹‰å¯¹è±¡ç±»å‹çš„æ ¸å¿ƒæ–¹å¼ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å¿…é€‰å±æ€§</span>
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// å¿…é€‰å±æ€§</span>
  gender?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å¯é€‰å±æ€§ï¼ˆåŠ  ?ï¼‰</span>
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// åªè¯»å±æ€§ï¼ˆä¸å¯ä¿®æ”¹ï¼‰</span>
}

<span class="hljs-comment">// ä½¿ç”¨æ¥å£çº¦æŸå¯¹è±¡</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span> = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>,
  <span class="hljs-attr">id</span>: <span class="hljs-number">1001</span>,
  <span class="hljs-comment">// gender å¯é€‰ï¼Œå¯çœç•¥</span>
};

user.<span class="hljs-property">id</span> = <span class="hljs-number">1002</span>; <span class="hljs-comment">// æŠ¥é”™ï¼šåªè¯»å±æ€§ä¸èƒ½ä¿®æ”¹</span>
</code></pre>
<h3 data-id="heading-18">2. ç±»å‹åˆ«åï¼ˆtypeï¼‰</h3>
<p>ç»™ç±»å‹èµ·åˆ«åï¼Œé€‚ç”¨èŒƒå›´æ›´å¹¿ï¼ˆå¯çº¦æŸä»»æ„ç±»å‹ï¼Œä¸æ­¢å¯¹è±¡ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŸºæœ¬ç±»å‹åˆ«å</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Str</span> = <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">str</span>: <span class="hljs-title class_">Str</span> = <span class="hljs-string">"hello"</span>;

<span class="hljs-comment">// å¯¹è±¡ç±»å‹åˆ«å</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">User</span> = {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
};

<span class="hljs-comment">// è”åˆç±»å‹åˆ«å</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NumberOrString</span> = <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: <span class="hljs-title class_">NumberOrString</span> = <span class="hljs-number">100</span>;
value = <span class="hljs-string">"abc"</span>;
</code></pre>
<h3 data-id="heading-19">3. interface vs type æ ¸å¿ƒåŒºåˆ«</h3>
<p>è¡¨æ ¼</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>interface</th><th>type</th></tr></thead><tbody><tr><td>æ‰©å±•</td><td>å¯é€šè¿‡ <code>extends</code> æ‰©å±•</td><td>å¯é€šè¿‡ <code>&amp;</code> äº¤å‰æ‰©å±•</td></tr><tr><td>é‡å¤å®šä¹‰</td><td>æ”¯æŒï¼ˆè‡ªåŠ¨åˆå¹¶ï¼‰</td><td>ä¸æ”¯æŒï¼ˆä¼šæŠ¥é”™ï¼‰</td></tr><tr><td>é€‚ç”¨èŒƒå›´</td><td>ä¸»è¦çº¦æŸå¯¹è±¡ / ç±»</td><td>å¯çº¦æŸä»»æ„ç±»å‹ï¼ˆåŸºæœ¬ç±»å‹ã€è”åˆç±»å‹ç­‰ï¼‰</td></tr></tbody></table>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼šå®šä¹‰å¯¹è±¡ / ç±»çš„ç»“æ„ç”¨ <code>interface</code>ï¼Œå…¶ä»–åœºæ™¯ç”¨ <code>type</code>ã€‚</p>
<h2 data-id="heading-20">å…­ã€å‡½æ•°ç›¸å…³ç±»å‹</h2>
<h3 data-id="heading-21">1. å‡½æ•°å‚æ•°ä¸è¿”å›å€¼æ³¨è§£</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ™®é€šå‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-comment">// ç®­å¤´å‡½æ•°</span>
<span class="hljs-keyword">const</span> multiply = (<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> a * b;
};

<span class="hljs-comment">// æ— è¿”å›å€¼</span>
<span class="hljs-keyword">const</span> log = (<span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg);
};
</code></pre>
<h3 data-id="heading-22">2. å¯é€‰å‚æ•°ä¸é»˜è®¤å‚æ•°</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å¯é€‰å‚æ•°ï¼ˆåŠ  ?ï¼Œå¿…é¡»æ”¾åœ¨å¿…é€‰å‚æ•°åé¢ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age?: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å§“åï¼š<span class="hljs-subst">${name}</span>ï¼Œå¹´é¾„ï¼š<span class="hljs-subst">${age || <span class="hljs-string">"æœªçŸ¥"</span>}</span>`</span>);
}
<span class="hljs-title function_">greet</span>(<span class="hljs-string">"å¼ ä¸‰"</span>); <span class="hljs-comment">// åˆæ³•</span>
<span class="hljs-title function_">greet</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">30</span>); <span class="hljs-comment">// åˆæ³•</span>

<span class="hljs-comment">// é»˜è®¤å‚æ•°ï¼ˆè‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œæ— éœ€åŠ  ?ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHi</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span> = <span class="hljs-string">"æ¸¸å®¢"</span></span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œ<span class="hljs-subst">${name}</span>`</span>);
}
<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// è¾“å‡ºï¼šä½ å¥½ï¼Œæ¸¸å®¢</span>
</code></pre>
<h3 data-id="heading-23">3. å‡½æ•°ç±»å‹åˆ«å</h3>
<p>å®šä¹‰å‡½æ•°çš„ â€œå½¢çŠ¶â€ï¼ˆå‚æ•°ç±»å‹ + è¿”å›å€¼ç±»å‹ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰å‡½æ•°ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AddFn</span> = <span class="hljs-function">(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;

<span class="hljs-comment">// å®ç°å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">add</span>: <span class="hljs-title class_">AddFn</span> = <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> x + y;
};
</code></pre>
<h2 data-id="heading-24">ä¸ƒã€ç±»å‹å®ˆå«</h2>
<p>é€šè¿‡ä»£ç é€»è¾‘ç¼©å°ç±»å‹èŒƒå›´ï¼Œè®© TS æ›´ç²¾å‡†æ¨æ–­ç±»å‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// typeof ç±»å‹å®ˆå«ï¼ˆé€‚ç”¨äºåŸå§‹ç±»å‹ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">printValue</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// TS çŸ¥é“è¿™é‡Œ value æ˜¯ string</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>)); <span class="hljs-comment">// TS çŸ¥é“è¿™é‡Œ value æ˜¯ number</span>
  }
}

<span class="hljs-comment">// instanceof ç±»å‹å®ˆå«ï¼ˆé€‚ç”¨äºç±»å®ä¾‹ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ±ªæ±ªæ±ª"</span>);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">judgeAnimal</span>(<span class="hljs-params">animal: Animal</span>) {
  <span class="hljs-keyword">if</span> (animal <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Dog</span>) {
    animal.<span class="hljs-title function_">bark</span>(); <span class="hljs-comment">// TS çŸ¥é“è¿™é‡Œ animal æ˜¯ Dog å®ä¾‹</span>
  }
}
</code></pre>
<h2 data-id="heading-25">å…«ã€TS é…ç½®æ–‡ä»¶ï¼ˆtsconfig.jsonï¼‰</h2>
<p>é¡¹ç›®ä¸­é€šè¿‡ <code>tsconfig.json</code> é…ç½® TS ç¼–è¯‘è§„åˆ™ï¼Œæ‰§è¡Œ <code>tsc --init</code> ç”Ÿæˆé»˜è®¤é…ç½®ï¼Œæ ¸å¿ƒé…ç½®è¯´æ˜ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ES6"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¼–è¯‘ç›®æ ‡ JS ç‰ˆæœ¬ï¼ˆES5/ES6/ESNextï¼‰</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ¨¡å—ç³»ç»Ÿï¼ˆCommonJS/ESModuleï¼‰</span>
    <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¼–è¯‘åçš„ JS æ–‡ä»¶è¾“å‡ºç›®å½•</span>
    <span class="hljs-attr">"rootDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./src"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æºæ–‡ä»¶ç›®å½•</span>
    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼ˆæ¨èï¼Œå¼ºåˆ¶ç±»å‹æ£€æŸ¥ï¼‰</span>
    <span class="hljs-attr">"noImplicitAny"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¦æ­¢éšå¼ any ç±»å‹</span>
    <span class="hljs-attr">"esModuleInterop"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-comment">// å…¼å®¹ CommonJS å’Œ ESModule</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./src/**/*"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è¦ç¼–è¯‘çš„æ–‡ä»¶</span>
  <span class="hljs-attr">"exclude"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"node_modules"</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// æ’é™¤çš„æ–‡ä»¶</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-26">ä¹ã€æ–°æ‰‹é¿å‘æŒ‡å—</h2>
<ol>
<li><strong>ä¸è¦æ»¥ç”¨ any</strong>ï¼šç”¨ <code>unknown</code> æ›¿ä»£ anyï¼Œä¿ç•™ç±»å‹æ£€æŸ¥ï¼›</li>
<li><strong>å¯é€‰å‚æ•°æ”¾æœ€å</strong>ï¼šTS è¦æ±‚å¯é€‰å‚æ•°å¿…é¡»åœ¨å¿…é€‰å‚æ•°ä¹‹åï¼›</li>
<li><strong>å…ƒç»„ push ä¸æŠ¥é”™</strong>ï¼šå…ƒç»„è™½å›ºå®šé•¿åº¦ï¼Œä½† push ä¸ä¼šè§¦å‘ TS æŠ¥é”™ï¼Œéœ€æ‰‹åŠ¨è§„é¿ï¼›</li>
<li><strong>ä¸¥æ ¼æ¨¡å¼å¿…å¼€</strong>ï¼š<code>strict: true</code> èƒ½æš´éœ²æ›´å¤šæ½œåœ¨é—®é¢˜ï¼Œæ˜¯ TS æ ¸å¿ƒä»·å€¼æ‰€åœ¨ï¼›</li>
<li><strong>ç±»å‹æ–­è¨€è¦è°¨æ…</strong>ï¼š<code>as</code> è¯­æ³•æ˜¯ â€œå‘Šè¯‰ TS æˆ‘æ¯”ä½ æ›´æ¸…æ¥šç±»å‹â€ï¼Œæ»¥ç”¨ä¼šå¯¼è‡´ç±»å‹ä¸å®‰å…¨ã€‚</li>
</ol>
<h2 data-id="heading-27">æ€»ç»“</h2>
<ol>
<li>TS æ ¸å¿ƒæ˜¯<strong>é™æ€ç±»å‹ç³»ç»Ÿ</strong>ï¼Œé€šè¿‡ç±»å‹æ³¨è§£ / æ¨æ–­æå‰è§„é¿é”™è¯¯ï¼›</li>
<li>å¸¸ç”¨åŸºç¡€ç±»å‹ï¼šåŸå§‹ç±»å‹ã€æ•°ç»„ã€å…ƒç»„ã€any/unknownã€void/neverï¼Œéœ€æŒæ¡å„è‡ªä½¿ç”¨åœºæ™¯ï¼›</li>
<li>å®šä¹‰å¯¹è±¡ç»“æ„ä¼˜å…ˆç”¨ <code>interface</code>ï¼Œå…¶ä»–ç±»å‹çº¦æŸç”¨ <code>type</code>ï¼›</li>
<li>å‡½æ•°æ³¨è§£è¦å…³æ³¨å‚æ•°ã€è¿”å›å€¼ã€å¯é€‰å‚æ•°ï¼Œç±»å‹å®ˆå«èƒ½æå‡ç±»å‹æ¨æ–­ç²¾åº¦ï¼›</li>
<li>é¡¹ç›®ä¸­åŠ¡å¿…å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼ˆ<code>strict: true</code>ï¼‰ï¼Œå‘æŒ¥ TS æœ€å¤§ä»·å€¼ã€‚</li>
</ol>
<p>ä» JS è¿‡æ¸¡åˆ° TS æ— éœ€ä¸€æ­¥åˆ°ä½ï¼Œå¯å…ˆåœ¨é¡¹ç›®ä¸­å±€éƒ¨ä½¿ç”¨ï¼Œé€æ­¥è¦†ç›–ï¼Œé‡ç‚¹æ˜¯ç†è§£ â€œç±»å‹â€ çš„æ ¸å¿ƒæ€æƒ³ï¼Œè€Œéæ­»è®°è¯­æ³•ã€‚æŒæ¡æœ¬æ–‡çš„åŸºç¡€çŸ¥è¯†ï¼Œè¶³ä»¥åº”å¯¹æ—¥å¸¸å¼€å‘ä¸­ 80% çš„ TS åœºæ™¯ï¼Œåç»­å¯å†æ·±å…¥æ³›å‹ã€è£…é¥°å™¨ã€é«˜çº§ç±»å‹ç­‰å†…å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidäº‹ä»¶åˆ†å‘é€»è¾‘--é’ˆå¯¹äº‹ä»¶åˆ†å‘ç›¸å…³å‡½æ•°çš„è®²è§£]]></title>    <link>https://juejin.cn/post/7605542907118354484</link>    <guid>https://juejin.cn/post/7605542907118354484</guid>    <pubDate>2026-02-12T17:15:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605542907118354484" data-draft-id="7605537925150048308" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidäº‹ä»¶åˆ†å‘é€»è¾‘--é’ˆå¯¹äº‹ä»¶åˆ†å‘ç›¸å…³å‡½æ•°çš„è®²è§£"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-12T17:15:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Aurora419"/> <meta itemprop="url" content="https://juejin.cn/user/4114811667877977"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidäº‹ä»¶åˆ†å‘é€»è¾‘--é’ˆå¯¹äº‹ä»¶åˆ†å‘ç›¸å…³å‡½æ•°çš„è®²è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4114811667877977/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Aurora419
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T17:15:18.000Z" title="Thu Feb 12 2026 17:15:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="rainbow">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#474949;color:#d1d9e1}.hljs-comment,.hljs-quote{color:#969896;font-style:italic}.hljs-addition,.hljs-keyword,.hljs-literal,.hljs-selector-tag,.hljs-type{color:#c9c}.hljs-number,.hljs-selector-attr,.hljs-selector-pseudo{color:#f99157}.hljs-doctag,.hljs-regexp,.hljs-string{color:#8abeb7}.hljs-built_in,.hljs-name,.hljs-section,.hljs-title{color:#b5bd68}.hljs-class .hljs-title,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#fc6}.hljs-name,.hljs-section,.hljs-strong{font-weight:700}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-subst,.hljs-symbol{color:#f99157}.hljs-deletion{color:#dc322f}.hljs-formula{background:#eee8d5}.hljs-attr,.hljs-attribute{color:#81a2be}.hljs-emphasis{font-style:italic}</style><h2 data-id="heading-0">ä½•ä¸ºäº‹ä»¶åˆ†å‘ï¼Ÿ</h2>
<p>å£°æ˜:è¿™æ˜¯ä¸ªäººçš„å­¦ä¹ ç¬”è®°ï¼Œåˆšå­¦äº‹ä»¶åˆ†å‘å‡ å¤©å¯¹äº‹ä»¶åˆ†å‘çš„ç†è§£æ²¡æœ‰è¿™ä¹ˆæ·±è¯·è§è°…
ç”±äºè¿™ç¯‡æ–‡å­—æ˜¯åœ¨é£ä¹¦ä¸Šå†™çš„æ‰€ä»¥ä¸€äº›é¢œè‰²ä¸å¯¹åº”ï¼Œè¯·è§è°…</p>
<p><strong>äº‹ä»¶</strong>æŒ‡çš„æ˜¯<strong>å±å¹•è§¦å‘äº‹ä»¶</strong>â€”â€”å³Androidä¸­çš„<strong>TouchEvent/MotionEvent</strong>ã€‚æ¯ä¸€æ¬¡æˆ‘ä»¬è§¦æ‘¸å±å¹•ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€è¿ä¸²çš„è§¦æ‘¸äº‹ä»¶ï¼Œè¿™äº›ä¸€è¿ä¸²çš„è§¦æ‘¸äº‹ä»¶åˆèµ·æ¥å°±æ˜¯ä¸€ä¸ªè§¦æ‘¸äº‹ä»¶åºåˆ—ã€‚</p>
<p>è§¦æ‘¸äº‹ä»¶åœ¨Androidå®˜æ–¹APIä¸­ç”±ç±»MotionEventæ¥æè¿°ï¼Œä¸åŒçš„è§¦æ‘¸äº‹ä»¶å¯¹åº”ä¸åŒçš„äº‹ä»¶ç±»å‹ã€‚äº‹ä»¶ç±»å‹åˆ†åˆ«æœ‰ACTION_DOWNã€ACTION_UPã€ACTION_MOVEã€ACTION_CANCELã€‚(è¿™é‡Œæš‚æ—¶ä¸è®¨è®ºå¤šæŒ‡è§¦æ§)</p>
<p>é‚£ä»€ä¹ˆå«<strong>åˆ†å‘</strong>å‘¢ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“Androidæ˜¯ç”±Viewæ ‘è¿›è¡Œæ¸²æŸ“çš„ã€‚å‡è®¾å±å¹•åæ ‡ä¸ºï¼ˆ11ï¼Œ11ï¼‰çš„åŒºåŸŸæ—¢å±äºä¸€ä¸ªLinearLayoutï¼Œåˆå±äºLinearLayoutä¸‹çš„ä¸€ä¸ªButtonï¼Œé‚£æˆ‘è¿™æ¬¡è§¦ç¢°æ‰€äº§ç”Ÿçš„è§¦æ‘¸äº‹ä»¶ï¼Œæ˜¯è¯¥ç»™LinearLayoutè¿˜æ˜¯Buttonå‘¢ï¼Ÿå½“ç„¶ï¼Œæˆ‘ä»¬å¾ˆç¡®å®šè¿™æ¬¡è§¦æ‘¸äº‹ä»¶æœ€ç»ˆä¼šè¢«Buttonæ‰€å¤„ç†ã€‚<strong>é‚£è§¦æ‘¸äº‹ä»¶æ˜¯æ€ä¹ˆç»™åˆ°Buttonçš„å‘¢</strong>ï¼Ÿéœ€è¦ç»è¿‡LinearLayoutå—ï¼Ÿæ€æ ·èƒ½è®©Buttonä¸å¤„ç†å‘¢ï¼Ÿè¿™å°±éœ€è¦æˆ‘ä»¬äº†è§£è§¦æ‘¸äº‹ä»¶ï¼ˆåæ–‡ç»Ÿç§°ä¸ºäº‹ä»¶ï¼‰åœ¨Viewæ ‘ä¸Šä¼ é€’ä¸æ¶ˆè´¹çš„è¿‡ç¨‹ï¼Œè¿™å°±æ˜¯äº‹ä»¶çš„åˆ†å‘ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ Android ä¸­ <code>onTouchEvent</code> å¸¸è§çš„äº‹ä»¶ç±»å‹åŠå…¶ç‰¹æ€§çš„æ±‡æ€»è¡¨æ ¼ï¼Œä»¥åŠé’ˆå¯¹å„äº‹ä»¶çš„æ·±åº¦è§£æã€‚</p>
<h3 data-id="heading-1">Android è§¦æ‘¸äº‹ä»¶ï¼ˆMotionEventï¼‰æ ¸å¿ƒæ¦‚è§ˆè¡¨</h3>








































<table><thead><tr><th>äº‹ä»¶ç±»å‹ (Action)</th><th>è§¦å‘æ¡ä»¶ (Trigger Condition)</th><th>è§¦å‘é¢‘ç‡ (Frequency)</th><th>å¯¹äº‹ä»¶æµçš„å½±å“</th><th>æ ¸å¿ƒç”¨é€”</th></tr></thead><tbody><tr><td>ACTION_DOWN</td><td>æ‰‹æŒ‡åˆæ¬¡æ¥è§¦å±å¹•</td><td>ä»… 1 æ¬¡</td><td>ç”Ÿæ­»å…³å£ï¼šè‹¥è¿”å› falseï¼Œåç»­äº‹ä»¶ä¸å†ä¼ ç»™æ­¤ View</td><td>è®°å½•èµ·ç‚¹åæ ‡ã€é‡ç½®çŠ¶æ€ã€ç”³æ˜æ¶ˆè´¹æ„å‘</td></tr><tr><td>ACTION_MOVE</td><td>æ‰‹æŒ‡åœ¨å±å¹•ä¸Šæ»‘åŠ¨</td><td>å¤šæ¬¡ (é«˜é¢‘)</td><td>æŒç»­æ›´æ–°ï¼Œåæ˜ æ‰‹æŒ‡è½¨è¿¹</td><td>è®¡ç®—ä½ç§»ã€å®ç°æ‹–æ‹½ã€åˆ¤æ–­æ˜¯å¦è§¦å‘æ»‘åŠ¨é˜ˆå€¼</td></tr><tr><td>ACTION_UP</td><td>æ‰‹æŒ‡ç¦»å¼€å±å¹•</td><td>ä»… 1 æ¬¡</td><td>æ­£å¸¸ç»ˆç‚¹ï¼šæ ‡å¿—æ•´ä¸ªæ‰‹åŠ¿åºåˆ—åœ†æ»¡ç»“æŸ</td><td>è§¦å‘ç‚¹å‡»äº‹ä»¶ (onClick)ã€æ‰§è¡Œå›å¼¹åŠ¨ç”»</td></tr><tr><td>ACTION_CANCEL</td><td>äº‹ä»¶æµè¢«çˆ¶å¸ƒå±€æ‹¦æˆª</td><td>æœ€å¤š 1 æ¬¡</td><td>éæ­£å¸¸ç»ˆç‚¹ï¼šå¼ºåˆ¶ç»ˆæ­¢å½“å‰ View çš„äº‹ä»¶å¤„ç†</td><td>çŠ¶æ€é‡ç½®ï¼ˆå¦‚å–æ¶ˆæŒ‰é’®é«˜äº®ï¼‰ï¼Œé˜²æ­¢é€»è¾‘å‡ºé”™</td></tr></tbody></table>
<h4 data-id="heading-2">äº‹ä»¶è¯¦ç»†è§£æ</h4>
<p><strong>ACTION_DOWNï¼šäº‹ä»¶æµçš„â€œæ•²é—¨ç –â€</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šè¿™æ˜¯æ‰€æœ‰è§¦æ‘¸äº‹ä»¶çš„æºå¤´ã€‚æ¯å½“ä¸€æ ¹æ‰‹æŒ‡æ¥è§¦å±å¹•æ—¶è§¦å‘ã€‚</p>
</li>
<li>
<p><strong>æ¶ˆè´¹æœºåˆ¶</strong>ï¼šè¿™æ˜¯ View å”¯ä¸€ä¸€æ¬¡èƒ½å†³å®šâ€œè¦ä¸è¦å¤„ç†è¿™ä¸ªåºåˆ—â€çš„æœºä¼šã€‚</p>
<ul>
<li><strong>å¦‚æœä½ åœ¨</strong> <strong><code>ACTION_DOWN</code></strong> <strong>æ—¶è¿”å›äº†</strong> <strong><code>false</code></strong> <strong>ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºä½ å¯¹è¿™ä¸ªä»»åŠ¡ä¸æ„Ÿå…´è¶£ï¼Œæ¥ä¸‹æ¥çš„</strong> <strong><code>MOVE</code></strong> <strong>ã€</strong> <strong><code>UP</code></strong> <strong>ç»Ÿç»Ÿä¸ä¼šå†å‘ç»™ä½ </strong>ã€‚</li>
<li><strong>æ¯”å–»</strong>ï¼šå°±åƒå…¬å¸çš„æ´¾æ´»ï¼Œå¦‚æœä½ æ‹’ç»äº†å¼€å¤´ï¼Œé‚£åç»­æ‰€æœ‰çš„è¿›åº¦æ±‡æŠ¥å’Œç»“å°¾éƒ½æ²¡ä½ çš„äº‹äº†ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-3">ACTION_MOVEï¼šé«˜é¢‘çš„â€œè¿‡ç¨‹é‡â€</h4>
<ul>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šåªè¦æ‰‹æŒ‡æŒ‰ä¸‹ååœ¨å±å¹•ä¸Šç§»åŠ¨ï¼Œç”šè‡³æ˜¯å¾®å°çš„æŠ–åŠ¨ã€‚</p>
</li>
<li>
<p><strong>å¤šæ¬¡è§¦å‘</strong>ï¼šå®ƒçš„è§¦å‘é¢‘ç‡æé«˜ï¼ˆé€šå¸¸ 16ms æˆ– 8ms ä¸€æ¬¡ï¼Œå–å†³äºå±å¹•åˆ·æ–°ç‡ï¼‰[æ¯åˆ·æ–°ä¸€æ¬¡å±å¹•å°±éœ€è¦è®¡ç®—ä¸¤æ¬¡çš„ä½ç§»å·®]ã€‚</p>
</li>
<li>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li><strong>æ€§èƒ½</strong>ï¼šä¸è¦åœ¨ <code>MOVE</code> é‡Œé¢å†™å¤§é‡çš„è®¡ç®—é€»è¾‘ã€åˆ›å»ºå¤§é‡å¯¹è±¡æˆ–è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œå¦åˆ™ä¼šå¯¼è‡´ UI å¡é¡¿ã€‚</li>
<li><strong>é˜ˆå€¼ (TouchSlop)</strong> ï¼šé€šå¸¸æˆ‘ä»¬ä¼šåˆ¤æ–­æ»‘åŠ¨è·ç¦»æ˜¯å¦è¶…è¿‡ç³»ç»Ÿå®šä¹‰çš„ <code>mTouchSlop</code>ï¼ˆé€šå¸¸æ˜¯ 8dp å·¦å³ï¼‰ï¼Œæ¥å†³å®šè¿™æ˜¯ä¸æ˜¯ä¸€æ¬¡æœ‰æ•ˆçš„â€œæ»‘åŠ¨â€ï¼Œè¿˜æ˜¯åªæ˜¯æ‰‹æŒ‡çš„è½»å¾®éœ‡é¢¤ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-4">ACTION_UPï¼šå®Œç¾çš„â€œæ”¶å°¾â€</h4>
<ul>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šæœ€åä¸€æ ¹æ‰‹æŒ‡ç¦»å¼€å±å¹•ã€‚</p>
</li>
<li>
<p><strong>é€»è¾‘å¤„ç†</strong>ï¼š</p>
<ul>
<li>Android çš„ <code>onClick</code>ï¼ˆç‚¹å‡»ç›‘å¬ï¼‰å°±æ˜¯åœ¨ <code>UP</code> é‡Œé¢åˆ¤æ–­çš„ã€‚å¦‚æœæ‰‹æŒ‡æŒ‰ä¸‹åˆ°æŠ¬èµ·çš„ä½ç§»å¾ˆå°ï¼Œä¸”æ—¶é•¿ç¬¦åˆè¦æ±‚ï¼Œç³»ç»Ÿå°±ä¼šåœ¨å†…éƒ¨è°ƒç”¨ <code>performClick()</code>ã€‚</li>
<li>å®ƒæ˜¯é‡Šæ”¾èµ„æºã€ç»“æŸåŠ¨ç”»çš„æœ€ä½³æ—¶æœºã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-5">ACTION_CANCELï¼šæ— å¥ˆçš„â€œè¢«æˆªèƒ¡â€</h4>
<ul>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šè¿™ä¸ªäº‹ä»¶æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä¸æ˜¯ç”±ç”¨æˆ·ç›´æ¥è§¦å‘çš„ï¼Œè€Œæ˜¯ç”±<strong>çˆ¶å¸ƒå±€</strong>äº§ç”Ÿçš„ã€‚</p>
<ul>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šä½ åœ¨ä¸€ä¸ª <code>RecyclerView</code>ï¼ˆåˆ—è¡¨ï¼‰é‡ŒæŒ‰ä½äº†ä¸€ä¸ªæŒ‰é’®ï¼Œåˆšå¼€å§‹è§¦å‘äº† <code>DOWN</code>ã€‚ä½†æ¥ç€ä½ å‘ä¸Šæ»‘åŠ¨ï¼Œçˆ¶å®¹å™¨ <code>RecyclerView</code> è§‰å¾—ä½ è¦æ»šåŠ¨åˆ—è¡¨ï¼Œäºæ˜¯å®ƒå¼ºè¡Œæ‹¦æˆªäº†äº‹ä»¶ï¼ˆ<code>onInterceptTouchEvent</code> è¿”å› <code>true</code>ï¼‰ã€‚</li>
<li>æ­¤æ—¶ï¼ŒæŒ‰é’®ä¼šæ”¶åˆ°ä¸€ä¸ª <code>ACTION_CANCEL</code>ï¼Œå‘Šè¯‰å®ƒï¼šâ€œæ´»å„¿è¢«è€æ¿æ¥ç®¡äº†ï¼Œä½ æ´—æ´—ç¡å§ã€‚â€</li>
</ul>
</li>
<li>
<p><strong>é‡è¦æ€§</strong>ï¼šView æ”¶åˆ°æ­¤äº‹ä»¶æ—¶å¿…é¡»<strong>é‡ç½®çŠ¶æ€</strong>ã€‚æ¯”å¦‚æŒ‰é’®æœ¬æ¥æ˜¯æŒ‰å‹å˜è‰²çš„ï¼Œæ”¶åˆ° <code>CANCEL</code> åå¿…é¡»å˜å›åŸè‰²ï¼Œå¦åˆ™æŒ‰é’®ä¼šä¸€ç›´å¡åœ¨â€œæŒ‰ä¸‹â€çš„çŠ¶æ€ã€‚</p>
</li>
</ul>
<p><strong>ä¹Ÿå°±æ˜¯è¯´äº‹ä»¶ä»è§¦æ‘¸å¼€å§‹ï¼Œç»å†æ»‘åŠ¨ï¼Œæœ€åä»¥æ‰‹æŒ‡æŠ¬èµ·ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´DOWNäº‹ä»¶æ˜¯å…¶ä»–äº‹ä»¶çš„å¼€å§‹æ²¡æœ‰DOWNäº‹ä»¶å°±æ²¡æœ‰å…¶ä»–äº‹ä»¶çš„å‘ç”Ÿ</strong></p>
<h2 data-id="heading-6">äº‹ä»¶åˆ†å‘çš„å…³é”®å‡½æ•°</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">dispatchTouchEvent</span>()ã€<span class="hljs-built_in">onInterceptTouchEvent</span>()ã€<span class="hljs-built_in">onTouchEvent</span>()
</code></pre>
<h2 data-id="heading-7">dispatchTouchEvent</h2>
<p>è´Ÿè´£åˆ†å‘äº‹ä»¶ï¼ŒViewå’ŒViewGroupä¸Šæœ‰ä¸åŒçš„è¡¨ç°</p>
<p>ViewGroupçš„dispatchTouchEventä¼šå‘å­Viewåˆ†å‘äº‹ä»¶ï¼Œå¦‚æœå­Viewä¸å¤„ç†å†äº¤ç»™çˆ¶Viewå¤„ç†ï¼Œæ­¤æ—¶ä¹Ÿä¼šè°ƒç”¨ViewGroupçˆ¶Viewçš„disptachTouchEventæ–¹æ³•(ViewGroupç»§æ‰¿äºView,æ­¤æ—¶è°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„æ–¹æ³•ï¼‰</p>
<h3 data-id="heading-8">ViewGroupçš„dispatchTouchEvent</h3>
<p><strong>dispatchTouchEventæ˜¯ä¸€ä¸ªè¿”å›</strong> <strong>å¸ƒå°”å€¼</strong> <strong>çš„å‡½æ•°ï¼Œé€šè¿‡è¿”å›ä¸´æ—¶å˜é‡handledå€¼ï¼Œé»˜è®¤èµ‹å€¼ä¸ºfalse</strong></p>
<p><strong>å¯¹äºDOWN,MOVE,UPäº‹ä»¶çš„ä¼šè¿›å…¥ä¸åŒçš„åˆ†å‘é“¾</strong></p>
<p>äº†è§£åˆ†å‘é“¾å‰æˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨çš„å‡ ä¸ªå˜é‡</p>
<p>intercepted-&gt;åˆ¤æ–­æ˜¯å¦éœ€è¦æ‹¦æˆª</p>
<pre><code class="hljs language-ini" lang="ini">final boolean intercepted<span class="hljs-comment">;</span>
if (<span class="hljs-attr">actionMasked</span> == MotionEvent.ACTION_DOWN
        || mFirstTouchTarget != null) {
        //è¿™ä¸ªæ ‡é»„çš„æ ‡å¿—ä½ï¼Œæ˜¯åé¢å†…éƒ¨æ‹¦æˆªæ³•requestDisallowInterceptTouchEvent() çš„å…³é”®
    final boolean <span class="hljs-attr">disallowIntercept</span> = (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    if (!disallowIntercept) {
    //è¿™é‡Œè°ƒç”¨onInterceptTouchEventæ–¹æ³•
        <span class="hljs-attr">intercepted</span> = <span class="hljs-literal">on</span>InterceptTouchEvent(ev)<span class="hljs-comment">;</span>
        ev.setAction(action)<span class="hljs-comment">; // restore action in case it was changed</span>
    } else {
        <span class="hljs-attr">intercepted</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    }
} else {

    <span class="hljs-attr">intercepted</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
}
</code></pre>
<p>mFirstTouchTarget-&gt;æ¶ˆè´¹DOWNäº‹ä»¶å­Viewçš„ä½ç½®</p>
<p>newTouchTarget-&gt;æ–°æ‰‹æŒ‡çš„è§¦æ‘¸ä½ç½®</p>
<h4 data-id="heading-9"><strong>DOWNäº‹ä»¶åœ¨dispatchTouchEventä¸»è¦æµç¨‹</strong></h4>
<pre><code class="hljs language-ini" lang="ini">TouchTarget <span class="hljs-attr">newTouchTarget</span> = null<span class="hljs-comment">;//æ¯æ¬¡å¾ªç¯å‰æ¸…ç©º</span>
boolean <span class="hljs-attr">alreadyDispatchedToNewTouchTarget</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;//æ³¨æ„è¿™ä¸ªå‚æ•°</span>
final boolean <span class="hljs-attr">canceled</span> = resetCancelNextUpFlag(this)
        || <span class="hljs-attr">actionMasked</span> == MotionEvent.ACTION_CANCEL<span class="hljs-comment">;</span>
if (!canceled &amp;&amp; !intercepted) {

    View <span class="hljs-attr">childWithAccessibilityFocus</span> = ev.isTargetAccessibilityFocus()
            ? findChildWithAccessibilityFocus() : null<span class="hljs-comment">;</span>

    if (<span class="hljs-attr">actionMasked</span> == MotionEvent.ACTION_DOWN
|| (split &amp;&amp; <span class="hljs-attr">actionMasked</span> == MotionEvent.ACTION_POINTER_DOWN)
            || <span class="hljs-attr">actionMasked</span> == MotionEvent.ACTION_HOVER_MOVE) {
        final int <span class="hljs-attr">actionIndex</span> = ev.getActionIndex()<span class="hljs-comment">; // always 0 for down</span>
        final int <span class="hljs-attr">idBitsToAssign</span> = split ? <span class="hljs-number">1</span> &lt;&lt; ev.getPointerId(actionIndex)
                : TouchTarget.ALL_POINTER_IDS<span class="hljs-comment">;</span>

        removePointersFromTouchTargets(idBitsToAssign)<span class="hljs-comment">;</span>

        final int <span class="hljs-attr">childrenCount</span> = mChildrenCount<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">newTouchTarget</span> == null &amp;&amp; childrenCount != <span class="hljs-number">0</span>) {
            final float <span class="hljs-attr">x</span> = ev.getXDispatchLocation(actionIndex)<span class="hljs-comment">;</span>
            final float <span class="hljs-attr">y</span> = ev.getYDispatchLocation(actionIndex)<span class="hljs-comment">;</span>
         
            final ArrayList&lt;View&gt; <span class="hljs-attr">preorderedList</span> = buildTouchDispatchChildList()<span class="hljs-comment">;</span>
            final boolean <span class="hljs-attr">customOrder</span> = preorderedList == null
                    &amp;&amp; isChildrenDrawingOrderEnabled()<span class="hljs-comment">;</span>
            final View<span class="hljs-section">[]</span> <span class="hljs-attr">children</span> = mChildren<span class="hljs-comment">;</span>
            //ä»å³å¾€å·¦éå†
            for (int <span class="hljs-attr">i</span> = childrenCount - <span class="hljs-number">1</span><span class="hljs-comment">; i &gt;= 0; i--) {</span>
                final int <span class="hljs-attr">childIndex</span> = getAndVerifyPreorderedIndex(
                        childrenCount, i, customOrder)<span class="hljs-comment">;</span>
                final View <span class="hljs-attr">child</span> = getAndVerifyPreorderedView(
                        preorderedList, children, childIndex)<span class="hljs-comment">;</span>

              
                if (childWithAccessibilityFocus != null) {
                    if (childWithAccessibilityFocus != child) {
                        continue<span class="hljs-comment">;</span>
                    }
                    <span class="hljs-attr">childWithAccessibilityFocus</span> = null<span class="hljs-comment">;</span>
                    <span class="hljs-attr">i</span> = childrenCount<span class="hljs-comment">;</span>
                }

                if (!child.canReceivePointerEvents()
                        || !isTransformedTouchPointInView(x, y, child, null)) {
                    ev.setTargetAccessibilityFocus(false)<span class="hljs-comment">;</span>
                    continue<span class="hljs-comment">;</span>
                }
//å¦‚æœè¿™ä¸ªæ‰‹æŒ‡ä½ç½®å·²ç»å­˜åœ¨ä¼šç›´æ¥è·³å‡ºå¾ªç¯
                <span class="hljs-attr">newTouchTarget</span> = getTouchTarget(child)<span class="hljs-comment">;</span>
                if (newTouchTarget != null) {
                    newTouchTarget.pointerIdBits |= idBitsToAssign<span class="hljs-comment">;</span>
                    break<span class="hljs-comment">;</span>
                }

//æœ€å…³é”®ä»£ç 
                resetCancelNextUpFlag(child)<span class="hljs-comment">;</span>
                //è¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨å­Viewçš„dispatchToucheventæ¥åˆ¤æ–­æ˜¯å¦æ¶ˆè´¹äº‹ä»¶
                if (dispatchTransformedTouchEvent(ev, false, child, idBitsToAssign)) {
                    // Child wants to receive touch within its <span class="hljs-attr">bounds.
                    mLastTouchDownTime</span> = ev.getDownTime()<span class="hljs-comment">;</span>
                    if (preorderedList != null) {
                        for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; childrenCount; j++) {</span>
                            if (children<span class="hljs-section">[childIndex]</span> == mChildren<span class="hljs-section">[j]</span>) {
                                <span class="hljs-attr">mLastTouchDownIndex</span> = j<span class="hljs-comment">;</span>
                                break<span class="hljs-comment">;</span>
                            }
                        }
                    } else {
                        <span class="hljs-attr">mLastTouchDownIndex</span> = childIndex<span class="hljs-comment">;</span>
                    }
                    <span class="hljs-attr">mLastTouchDownX</span> = x<span class="hljs-comment">;</span>
                    <span class="hljs-attr">mLastTouchDownY</span> = y<span class="hljs-comment">;</span>
                    //å…³é”®è°ƒç”¨å‡½æ•°
                    <span class="hljs-attr">newTouchTarget</span> = addTouchTarget(child, idBitsToAssign)<span class="hljs-comment">;</span>
                    //å¼€å§‹æåˆ°çš„å‚æ•°
                    <span class="hljs-attr">alreadyDispatchedToNewTouchTarget</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
                    break<span class="hljs-comment">;</span>
                }
                
                ev.setTargetAccessibilityFocus(false)<span class="hljs-comment">;</span>
            }
            if (preorderedList != null) preorderedList.clear()<span class="hljs-comment">;</span>
        }
//å¤šæŒ‡è§¦æ§é€»è¾‘ :æ—¢ç„¶æ²¡æ‰¾åˆ°æ–°çš„ View æ¥æ”¶è¿™æ ¹æ‰‹æŒ‡ï¼Œå°±æŠŠè¿™æ ¹æ‰‹æŒ‡åˆ†é…ç»™â€œæœ€è€â€çš„é‚£ä¸ªè´Ÿè´£äºº
        if (<span class="hljs-attr">newTouchTarget</span> == null &amp;&amp; mFirstTouchTarget != null) {
            <span class="hljs-attr">newTouchTarget</span> = mFirstTouchTarget<span class="hljs-comment">;</span>
            while (newTouchTarget.next != null) {
                <span class="hljs-attr">newTouchTarget</span> = newTouchTarget.next<span class="hljs-comment">;</span>
            }
            newTouchTarget.pointerIdBits |= idBitsToAssign<span class="hljs-comment">;</span>
        }
    }
}
//å¦‚æœDOWNäº‹ä»¶æ²¡æœ‰è¢«å­Viewæ¶ˆè´¹mFirstTouchTargetå°±ä¸ºç©ºæ­¤æ—¶ç”±çˆ¶Viewæ¥å¤„ç†
    if (<span class="hljs-attr">mFirstTouchTarget</span> == null) {
        <span class="hljs-attr">handled</span> = dispatchTransformedTouchEvent(ev, canceled, null,
                TouchTarget.ALL_POINTER_IDS)<span class="hljs-comment">;</span>
    } else {
    //å¦‚æœDOWNäº‹ä»¶è¢«å­Viewæ¶ˆè´¹
        TouchTarget <span class="hljs-attr">predecessor</span> = null<span class="hljs-comment">;</span>
        TouchTarget <span class="hljs-attr">target</span> = mFirstTouchTarget<span class="hljs-comment">;</span>
        while (target != null) {
            final TouchTarget <span class="hljs-attr">next</span> = target.next<span class="hljs-comment">;</span>
            //DOWNäº‹ä»¶å¹¶ä¸”DOWNè¢«å­Viewæ¶ˆè´¹æƒ…å†µä¸‹è¿™é‡Œçš„alreadyDispatchedToNewTouchTargetå°±ä¸ºtrueï¼Œè¿”å›handledå€¼ï¼Œé˜²æ­¢é‡å¤åˆ†å‘
            if (alreadyDispatchedToNewTouchTarget &amp;&amp; <span class="hljs-attr">target</span> == newTouchTarget) {
                <span class="hljs-attr">handled</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
            } else {
               ......
    }

   
}
private TouchTarget addTouchTarget(@NonNull View child, int pointerIdBits) {
    final TouchTarget <span class="hljs-attr">target</span> = TouchTarget.obtain(child, pointerIdBits)<span class="hljs-comment">;</span>
    <span class="hljs-attr">target.next</span> = mFirstTouchTarget<span class="hljs-comment">;</span>
    //ç»™mFirstTouchTargetèµ‹å€¼ åé¢ä¼šå¯¹mFirstTouchTargetçš„å€¼è¿›è¡Œåˆ¤æ–­è¿™ä¸ªå‚æ•°å¾ˆé‡è¦
    <span class="hljs-attr">mFirstTouchTarget</span> = target<span class="hljs-comment">;</span>
    return target<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-10">MOVEäº‹ä»¶åœ¨dispatchTouchEventä¸»è¦æµç¨‹</h4>
<p>intercepted-&gt;åˆ¤æ–­æ˜¯å¦éœ€è¦æ‹¦æˆª</p>
<p>mFirstTouchTarget-&gt;æ¶ˆè´¹DOWNäº‹ä»¶å­Viewçš„ä½ç½®</p>
<p>newTouchTarget-&gt;æ–°æ‰‹æŒ‡çš„è§¦æ‘¸ä½ç½®</p>
<pre><code class="hljs language-ini" lang="ini">//å¦‚æœå‰é¢çš„DOWNäº‹ä»¶æ²¡æœ‰å­Viewæ¶ˆè´¹ï¼Œè¿™é‡Œä¼šç›´æ¥è¿›å…¥elseåˆ†æ”¯
//å³<span class="hljs-attr">intercepted</span> = <span class="hljs-literal">true</span> if (!canceled &amp;&amp; !intercepted) {},å·§å¦™çš„è·³è¿‡äº†è¿™é‡Œçš„éå†æµç¨‹

final boolean intercepted<span class="hljs-comment">;</span>
if (<span class="hljs-attr">actionMasked</span> == MotionEvent.ACTION_DOWN
        || mFirstTouchTarget != null) {
        //è¿™ä¸ªæ ‡é»„çš„æ ‡å¿—ä½ï¼Œæ˜¯åé¢å†…éƒ¨æ‹¦æˆªæ³•requestDisallowInterceptTouchEvent() çš„å…³é”®
    final boolean <span class="hljs-attr">disallowIntercept</span> = (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    if (!disallowIntercept) {
        <span class="hljs-attr">intercepted</span> = <span class="hljs-literal">on</span>InterceptTouchEvent(ev)<span class="hljs-comment">;</span>
        ev.setAction(action)<span class="hljs-comment">; </span>
    } else {
        <span class="hljs-attr">intercepted</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    }
} else {

    <span class="hljs-attr">intercepted</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
}
</code></pre>
<pre><code class="hljs language-ini" lang="ini">//------å‰ç½®å‚æ•°  è¿™æ˜¯ä¸€ä¸ª200è¡Œçš„å¤§æ–¹æ³•ï¼Œä¸è¦å¿˜äº†å¿…è¦çš„å‚æ•°
final boolean intercepted<span class="hljs-comment">;</span>
final boolean <span class="hljs-attr">canceled</span> = resetCancelNextUpFlag(this)
        || <span class="hljs-attr">actionMasked</span> == MotionEvent.ACTION_CANCEL<span class="hljs-comment">;</span>
 boolean <span class="hljs-attr">alreadyDispatchedToNewTouchTarget</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;//æ³¨æ„è¿™ä¸ªå‚æ•°</span>
//------æ­£å¼ä»£ç 
//MOVEåˆ†å‘ä¸‹ï¼šå¦‚æœå‰é¢çš„DOWNäº‹ä»¶æ²¡æœ‰å­Viewæ¶ˆè´¹ï¼Œè¿™é‡Œä¼šè°ƒç”¨ViewGroupçš„dispatchTouchEvent(ä¹Ÿå°±æ˜¯decorViewçš„onTouchEventæ–¹æ³•æœ€åè°ƒç”¨activityçš„onTouchEventæ–¹æ³•)
    if (<span class="hljs-attr">mFirstTouchTarget</span> == null) {
    //è¿™é‡Œä¸ä»…å¯ä»¥æ˜¯DOWNçš„ç»“æœä¹Ÿå¯ä»¥æ˜¯MOVEçš„ç»“æœ(ç»“åˆå‰æ–‡)
       <span class="hljs-attr">1. handled</span> = dispatchTransformedTouchEvent(ev, canceled, null,
                TouchTarget.ALL_POINTER_IDS)<span class="hljs-comment">;</span>
    } else {
//è¿™é‡ŒMOVEåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œæ­£å¸¸MOVEå’ŒMOVEäº‹ä»¶è¢«æ‹¦æˆªï¼Œè¿™é‡Œä½¿ç”¨ä¸¤ç§é¢œè‰²çš„å­—ä½“è¡¨ç¤º ç°è‰²æ­£å¸¸ ç»¿è‰²MOVEæ‹¦æˆª    ç”±äºè¿™ç¯‡æ–‡å­—æ˜¯åœ¨é£ä¹¦ä¸Šå†™çš„æ‰€ä»¥é¢œè‰²ä¸å¯¹ï¼Œè¯·è§è°….
        TouchTarget <span class="hljs-attr">predecessor</span> = null<span class="hljs-comment">;</span>
        TouchTarget <span class="hljs-attr">target</span> = mFirstTouchTarget<span class="hljs-comment">;</span>
        //è¿™é‡Œçš„å¾ªç¯æ˜¯ä¸ºäº†åšå¤šæŒ‡è§¦æ§ï¼Œæœ¬æ¥mFirstTouchTargetå°±æ˜¯ViewGruopæŒ‡å‘ä¸€ä¸ªViewçš„å•å‘é“¾è¡¨ï¼Œç”±äºæœ‰å¤šæŒ‡çš„æƒ…å†µï¼Œè¿™æ ·çš„é“¾è¡¨æœ‰å‡ å¯¹
        while (target != null) {
            final TouchTarget <span class="hljs-attr">next</span> = target.next<span class="hljs-comment">;</span>
            //åªæœ‰åœ¨DOWNäº‹ä»¶çš„æƒ…å†µä¸‹æ‰æœ‰å¯èƒ½ä¸ºtrueï¼Œæ‰€ä»¥MOVEäº‹ä»¶ä¸ä¼šåˆ°è¿™é‡Œé¢å»
            if (alreadyDispatchedToNewTouchTarget &amp;&amp; <span class="hljs-attr">target</span> == newTouchTarget) {
            <span class="hljs-attr">2.    handled</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
            } 
//DOWNäº‹ä»¶åˆ†å‘æ‰€æœ‰å¯èƒ½çš„ç»“æœåªèƒ½åˆ°è¿™é‡Œ è¦ä¹ˆæ˜¯1.  è¦ä¹ˆæ˜¯2.           
            else {
            //è¿™é‡Œæœ‰ä¸ªè¯¯åŒºï¼Œè¿™é‡Œæ˜¯ä¸éœ€è¦è€ƒè™‘å‰é¢DOWNäº‹ä»¶æ²¡æœ‰è¢«å­Viewæ¶ˆè´¹çš„æƒ…å†µçš„ï¼Œå› ä¸ºå·²ç»è¢«è¿™æ®µä»£ç å¼€å¤´çš„ifåˆ¤æ–­æ¸…é™¤äº†ï¼Œæ‰€ä»¥è¿™é‡Œçš„interceptedæ˜¯é€šè¿‡ <span class="hljs-attr">intercepted</span> = <span class="hljs-literal">on</span>InterceptTouchEvent(ev)<span class="hljs-comment">;è¿™é‡Œå¾—åˆ°çš„</span>
            
            //resetCancelNextUpFlagè¿™é‡Œç”¨æ¥é¿å…å­Viewå‡ºç°çš„æ„å¤–æƒ…å†µï¼Œä¸€æ—¦å­Viewå‘ç”Ÿæ„å¤–ï¼Œä¸è®©å­VieWæ¶ˆè´¹äº‹ä»¶ æ¯”å¦‚ä¸‹é¢è¿™äº›æƒ…å†µ
            //å½“ä¸€ä¸ª View æ­£åœ¨è¢«æŒ‰ä¸‹æ—¶ï¼Œå®ƒçªç„¶è¢«ä»çˆ¶å®¹å™¨ä¸­ç§»é™¤äº†ï¼ˆdetachï¼‰
            //æˆ–è€… View çš„çŠ¶æ€å‘ç”Ÿäº†å‰§çƒˆå˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿè®¤ä¸ºå®ƒä¸åº”è¯¥å†äº§ç”Ÿç‚¹å‡»æ•ˆæœ
                final boolean <span class="hljs-attr">cancelChild</span> = resetCancelNextUpFlag(target.child)
                        || intercepted<span class="hljs-comment">;</span>
                 //æ ¹æ®å‰é¢çš„targetå®šå‘å¯»æ‰¾å­View,åˆ¤æ–­æ˜¯å¦æ¶ˆè´¹äº‹ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ä¹‹å‰ä¸€ç›´è¯´çš„mFirstTouchTarget
                 //å¦‚æœè¿™é‡ŒcancelChildä¸ºtrue,ä¼šå­Viewåˆ†å‘CANCELç»ˆæ­¢åˆ†å‘
                if (dispatchTransformedTouchEvent(ev, cancelChild,
                        target.child, target.pointerIdBits)) {
                    <span class="hljs-attr">handled</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
                }
                //å¦‚æœcancelChildä¸ºtrueç½®ç©ºé“¾è¡¨
                if (cancelChild) {
                    if (<span class="hljs-attr">predecessor</span> == null) {
                        <span class="hljs-attr">mFirstTouchTarget</span> = next<span class="hljs-comment">;</span>
                    } else {
                        <span class="hljs-attr">predecessor.next</span> = next<span class="hljs-comment">;</span>
                    }
                    target.recycle()<span class="hljs-comment">;</span>
                    <span class="hljs-attr">target</span> = next<span class="hljs-comment">;</span>
                    continue<span class="hljs-comment">;</span>
                }
            }
            //å¾ªç¯éå†æ“ä½œ
            <span class="hljs-attr">predecessor</span> = target<span class="hljs-comment">;</span>
            <span class="hljs-attr">target</span> = next<span class="hljs-comment">;</span>
        }
    }

}
</code></pre>
<h4 data-id="heading-11">UPäº‹ä»¶åœ¨dispatchTouchEventä¸»è¦æµç¨‹</h4>
<p>MOVEäº‹ä»¶ä¸UPäº‹ä»¶çš„æµç¨‹é«˜åº¦é‡åˆå”¯ä¸€åŒºåˆ«å°±æ˜¯UPäº‹ä»¶éœ€è¦æ¸…ç©ºä¹‹å‰çš„çŠ¶æ€ä¾¿äºè¿æ¥ä¸‹ä¸€æ¬¡äº‹ä»¶çš„åˆ°æ¥</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// --- è¿™æ®µä»£ç å¤„ç† UPï¼Œä½†ä¸å¤„ç† MOVE ---</span>
if (canceled
        || actionMasked == MotionEvent.ACTION_UP // ã€UP èµ°è¿™é‡Œã€‘
        || actionMasked == MotionEvent.ACTION_HOVER_MOVE) {
    <span class="hljs-built_in">resetTouchState</span>(); <span class="hljs-comment">// é‡ç½®æ‰€æœ‰çŠ¶æ€ï¼Œæ¸…ç©ºé“¾è¡¨</span>
} 
<span class="hljs-comment">// --- è¿™æ®µå¤„ç†å¤šæŒ‡æŠ¬èµ· ---</span>
else if (split &amp;&amp; actionMasked == MotionEvent.ACTION_POINTER_UP) {
    <span class="hljs-built_in">removePointersFromTouchTargets</span>(idBitsToRemove);
}
</code></pre>
<h4 data-id="heading-12">CANCELäº‹ä»¶åœ¨dispatchTouchEventä¸»è¦æµç¨‹</h4>
<p>CANCELäº‹ä»¶çš„å¤„ç†æ¯”è¾ƒç®€å•äº†ï¼Œç†è§£äº†å‰é¢MOVEçš„æµç¨‹ï¼Œè¿™é‡Œå°±ä¸€ç›®äº†ç„¶äº†</p>
<pre><code class="hljs language-ini" lang="ini">if (<span class="hljs-attr">mFirstTouchTarget</span> == null) {
    <span class="hljs-attr">handled</span> = dispatchTransformedTouchEvent(ev, canceled, null,
            TouchTarget.ALL_POINTER_IDS)<span class="hljs-comment">;</span>
} else {

    TouchTarget <span class="hljs-attr">predecessor</span> = null<span class="hljs-comment">;</span>
    TouchTarget <span class="hljs-attr">target</span> = mFirstTouchTarget<span class="hljs-comment">;</span>
    while (target != null) {
        final TouchTarget <span class="hljs-attr">next</span> = target.next<span class="hljs-comment">;</span>
        if (alreadyDispatchedToNewTouchTarget &amp;&amp; <span class="hljs-attr">target</span> == newTouchTarget) {
            <span class="hljs-attr">handled</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
        } else {
//è¿™é‡Œ   cancelChildä¸ºtrue     
            final boolean <span class="hljs-attr">cancelChild</span> = resetCancelNextUpFlag(target.child)
                    || intercepted<span class="hljs-comment">;</span>
            if (dispatchTransformedTouchEvent(ev, cancelChild,
                    target.child, target.pointerIdBits)) {
                <span class="hljs-attr">handled</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
            }
            //é“¾è¡¨æ¸…é™¤
            if (cancelChild) {
                if (<span class="hljs-attr">predecessor</span> == null) {
                    <span class="hljs-attr">mFirstTouchTarget</span> = next<span class="hljs-comment">;</span>
                } else {
                    <span class="hljs-attr">predecessor.next</span> = next<span class="hljs-comment">;</span>
                }
                target.recycle()<span class="hljs-comment">;</span>
                <span class="hljs-attr">target</span> = next<span class="hljs-comment">;</span>
                continue<span class="hljs-comment">;</span>
            }
        }
        <span class="hljs-attr">predecessor</span> = target<span class="hljs-comment">;</span>
        <span class="hljs-attr">target</span> = next<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h4 data-id="heading-13">dispatchTransformedTouchEvent</h4>
<p>è¿™ä¸ªå‡½æ•°åœ¨dispatchTouchEventé‡Œé¢è¢«åå¤ä½¿ç”¨æˆ‘ä»¬æ¥çœ‹çœ‹é•¿ä»€ä¹ˆæ ·</p>
<pre><code class="hljs language-ini" lang="ini">private boolean dispatchTransformedTouchEvent(MotionEvent event, boolean cancel,
        View child, int desiredPointerIdBits) {
    final boolean handled<span class="hljs-comment">;</span>

//å¦‚æœcancelä¸ºtrueï¼Œåˆ†å‘CANCELäº‹ä»¶ï¼Œå¯¹åº”ä¹‹å‰MOVEåˆ†å‘ä»£ç çš„ç‰‡æ®µ
/*
 final boolean <span class="hljs-attr">cancelChild</span> = resetCancelNextUpFlag(target.child)
                       || intercepted<span class="hljs-comment">;</span>
if (dispatchTransformedTouchEvent(ev, cancelChild,target.child, target.pointerIdBits)) {
                    <span class="hljs-attr">handled</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;}</span>
*/                
    final int <span class="hljs-attr">oldAction</span> = event.getAction()<span class="hljs-comment">;</span>
    if (cancel || <span class="hljs-attr">oldAction</span> == MotionEvent.ACTION_CANCEL) {
        event.setAction(MotionEvent.ACTION_CANCEL)<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">child</span> == null) {
            <span class="hljs-attr">handled</span> = super.dispatchTouchEvent(event)<span class="hljs-comment">;</span>
        } else {
            <span class="hljs-attr">handled</span> = child.dispatchTouchEvent(event)<span class="hljs-comment">;</span>
        }
        //è¿™é‡Œè¿›è¡Œè¿˜åŸäº‹ä»¶å¤„ç†ï¼Œé˜²æ­¢ç»™åé¢çš„Viewåˆ†å‘CANCELäº‹ä»¶
        event.setAction(oldAction)<span class="hljs-comment">;</span>
        return handled<span class="hljs-comment">;</span>
    }
//-----------æ­£å¸¸æƒ…å†µ å¯ä»¥çœ‹åˆ°éƒ½æ˜¯è°ƒç”¨dispatchTouchEventæ–¹æ³•çš„é€»è¾‘-----------------
    // Calculate the number of pointers to deliver.
    final int <span class="hljs-attr">oldPointerIdBits</span> = event.getPointerIdBits()<span class="hljs-comment">;</span>
    final int <span class="hljs-attr">newPointerIdBits</span> = oldPointerIdBits &amp; desiredPointerIdBits<span class="hljs-comment">;</span>


    if (<span class="hljs-attr">newPointerIdBits</span> == <span class="hljs-number">0</span>) {
        return false<span class="hljs-comment">;</span>
    }

    final MotionEvent transformedEvent<span class="hljs-comment">;</span>
    if (<span class="hljs-attr">newPointerIdBits</span> == oldPointerIdBits) {
        if (<span class="hljs-attr">child</span> == null || child.hasIdentityMatrix()) {
            if (<span class="hljs-attr">child</span> == null) {
                <span class="hljs-attr">handled</span> = super.dispatchTouchEvent(event)<span class="hljs-comment">;</span>
            } else {
                final float <span class="hljs-attr">offsetX</span> = mScrollX - child.mLeft<span class="hljs-comment">;</span>
                final float <span class="hljs-attr">offsetY</span> = mScrollY - child.mTop<span class="hljs-comment">;</span>
                event.offsetLocation(offsetX, offsetY)<span class="hljs-comment">;</span>

                <span class="hljs-attr">handled</span> = child.dispatchTouchEvent(event)<span class="hljs-comment">;</span>

                event.offsetLocation(-offsetX, -offsetY)<span class="hljs-comment">;</span>
            }
            return handled<span class="hljs-comment">;</span>
        }
        <span class="hljs-attr">transformedEvent</span> = MotionEvent.obtain(event)<span class="hljs-comment">;</span>
    } else {
        <span class="hljs-attr">transformedEvent</span> = event.split(newPointerIdBits)<span class="hljs-comment">;</span>
    }

    // Perform any necessary transformations and dispatch.
    if (<span class="hljs-attr">child</span> == null) {
        <span class="hljs-attr">handled</span> = super.dispatchTouchEvent(transformedEvent)<span class="hljs-comment">;</span>
    } else {
        final float <span class="hljs-attr">offsetX</span> = mScrollX - child.mLeft<span class="hljs-comment">;</span>
        final float <span class="hljs-attr">offsetY</span> = mScrollY - child.mTop<span class="hljs-comment">;</span>
        transformedEvent.offsetLocation(offsetX, offsetY)<span class="hljs-comment">;</span>
        if (! child.hasIdentityMatrix()) {
            transformedEvent.transform(child.getInverseMatrix())<span class="hljs-comment">;</span>
        }

        <span class="hljs-attr">handled</span> = child.dispatchTouchEvent(transformedEvent)<span class="hljs-comment">;</span>
    }

    // Done.
    transformedEvent.recycle()<span class="hljs-comment">;</span>
    return handled<span class="hljs-comment">;</span>
}
</code></pre>
<p>æˆ‘ä»¬å‘ç°è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯é€šè¿‡handledå˜é‡è¿”å›å¸ƒå°”å€¼</p>
<h3 data-id="heading-14">Viewçš„dispatchTouchEvent</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> boolean <span class="hljs-title">dispatchTouchEvent</span>(<span class="hljs-params">MotionEvent <span class="hljs-keyword">event</span></span>)</span> {
    <span class="hljs-comment">// If the event should be handled by accessibility focus first.</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">event</span>.isTargetAccessibilityFocus()) {
        <span class="hljs-comment">// We don't have focus or no virtual descendant has it, do not handle the event.</span>
        <span class="hljs-keyword">if</span> (!isAccessibilityFocusedViewOrHost()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-comment">// We have focus and got the event, then use normal event dispatch.</span>
        <span class="hljs-keyword">event</span>.setTargetAccessibilityFocus(<span class="hljs-literal">false</span>);
    }
    boolean result = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">if</span> (mInputEventConsistencyVerifier != <span class="hljs-literal">null</span>) {
        mInputEventConsistencyVerifier.onTouchEvent(<span class="hljs-keyword">event</span>, <span class="hljs-number">0</span>);
    }

    final <span class="hljs-built_in">int</span> actionMasked = <span class="hljs-keyword">event</span>.getActionMasked();
    <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN) {
        <span class="hljs-comment">// æ–°æ‰‹åŠ¿å¼€å§‹ï¼Œåœæ­¢ä¹‹å‰çš„åµŒå¥—æ»šåŠ¨ï¼ˆå¦‚æ¸…ç†ä¹‹å‰çš„æ»‘åŠ¨æƒ¯æ€§ï¼‰</span>
        stopNestedScroll();
    }
 -----------------------------------å…³é”®ä»£ç ---------------------------------------------
<span class="hljs-comment">//onFilterTouchEventForSecurityï¼šè¿™æ˜¯ä¸€ä¸ªå®‰å…¨æœºåˆ¶ã€‚å¦‚æœç³»ç»Ÿæ£€æµ‹åˆ°å½“å‰ View ä¸Šæ–¹è¦†ç›–äº†ä¸å®‰å…¨çš„çª—å£ï¼ˆä¾‹å¦‚é€æ˜æ‚¬æµ®çª—ï¼‰ï¼Œä¸ºäº†ä¿æŠ¤éšç§ï¼Œå¯èƒ½ä¼šç›´æ¥ä¸¢å¼ƒè¯¥äº‹ä»¶ã€‚</span>
    <span class="hljs-keyword">if</span> (onFilterTouchEventForSecurity(<span class="hljs-keyword">event</span>)) {
       
<span class="hljs-comment">// å¦‚æœç”¨æˆ·ç‚¹åœ¨æ»šåŠ¨æ¡ä¸Šå¹¶å°è¯•æ‹–æ‹½ï¼Œæ»šåŠ¨æ¡é€»è¾‘ä¼šå…ˆâ€œæˆªæ´»â€ï¼Œresult å˜ä¸º trueã€‚       </span>
        <span class="hljs-keyword">if</span> ((mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; handleScrollBarDragging(<span class="hljs-keyword">event</span>)) {
            result = <span class="hljs-literal">true</span>;
        }
<span class="hljs-comment">/*ä¼˜å…ˆçº§æœ€é«˜ã€‚
åªè¦æ»¡è¶³ï¼š
è®¾ç½®äº† OnTouchListenerã€‚
View å¤„äº Enabled çŠ¶æ€ï¼ˆæ³¨æ„ï¼šç¦ç”¨çš„ View æ— æ³•è§¦å‘ onTouchï¼‰ã€‚
onTouch è¿”å›äº† trueã€‚
é‚£ä¹ˆ result ä¸º trueï¼Œåç»­çš„ onTouchEvent å°±ä¸ä¼šè¢«æ‰§è¡Œäº†
*/</span>            
        ListenerInfo li = mListenerInfo;
        <span class="hljs-keyword">if</span> (li != <span class="hljs-literal">null</span> &amp;&amp; li.mOnTouchListener != <span class="hljs-literal">null</span>
                &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED
&amp;&amp; li.mOnTouchListener.onTouch(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">event</span>)) {
            result = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">if</span> (!result &amp;&amp; onTouchEvent(<span class="hljs-keyword">event</span>)) {
            result = <span class="hljs-literal">true</span>;
        }
    }
---------------------------------------------------------------------------------------    
    
<span class="hljs-comment">// å¦‚æœæ²¡æœ‰ View æ¶ˆè´¹äº‹ä»¶ï¼Œè®°å½•åˆ°æ ¡éªŒå™¨</span>
    <span class="hljs-keyword">if</span> (!result &amp;&amp; mInputEventConsistencyVerifier != <span class="hljs-literal">null</span>) {
        mInputEventConsistencyVerifier.onUnhandledEvent(<span class="hljs-keyword">event</span>, <span class="hljs-number">0</span>);
    }

<span class="hljs-comment">// åˆ¤å®šæ‰‹åŠ¿æ˜¯å¦ç»“æŸ</span>
    <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_UP ||
            actionMasked == MotionEvent.ACTION_CANCEL ||
            (actionMasked == MotionEvent.ACTION_DOWN &amp;&amp; !result)) {
        stopNestedScroll();
    }

    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>æˆ‘ä»¬çœ‹åˆ°Viewçš„dispatchTouchEventæ–¹æ³•å¤šæ¬¡è°ƒç”¨äº†<strong>onTouchEvent</strong>æ–¹æ³•å†çœ‹çœ‹è¿™ä¸ªæ–¹æ³•</p>
<h2 data-id="heading-15">Viewçš„onTouchEvent</h2>
<p>å…³é”®ä»£ç éƒ¨åˆ†ï¼š</p>
<h4 data-id="heading-16"><strong>å¯ç‚¹å‡»çŠ¶æ€ä¸‹çš„å¤„ç†</strong></h4>
<p>åªè¦å¯ç‚¹å‡»ï¼Œå°±æ¶ˆè´¹äº‹ä»¶</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">final</span> boolean clickable <span class="hljs-operator">=</span> ((viewFlags <span class="hljs-operator">&amp;</span> <span class="hljs-type">CLICKABLE</span>) <span class="hljs-operator">==</span> <span class="hljs-type">CLICKABLE</span>
        <span class="hljs-operator">||</span> (viewFlags <span class="hljs-operator">&amp;</span> <span class="hljs-type">LONG_CLICKABLE</span>) <span class="hljs-operator">==</span> <span class="hljs-type">LONG_CLICKABLE</span>)
        <span class="hljs-operator">||</span> (viewFlags <span class="hljs-operator">&amp;</span> <span class="hljs-type">CONTEXT_CLICKABLE</span>) <span class="hljs-operator">==</span> <span class="hljs-type">CONTEXT_CLICKABLE</span>;

<span class="hljs-comment">// ... åœ¨æ–¹æ³•æœ«å°¾ ...</span>
<span class="hljs-keyword">if</span> (clickable <span class="hljs-operator">||</span> (viewFlags <span class="hljs-operator">&amp;</span> <span class="hljs-type">TOOLTIP</span>) <span class="hljs-operator">==</span> <span class="hljs-type">TOOLTIP</span>) {
    <span class="hljs-comment">// ... switch case ...</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// åªè¦ View æ˜¯å¯ç‚¹å‡»çš„ï¼ŒonTouchEvent å°±ä¼šè¿”å› true</span>
}
</code></pre>
<p>è¿™æ˜¯ Android äº‹ä»¶åˆ†å‘çš„ä¸€ä¸ªé‡è¦ç»“è®ºï¼š<strong>ä¸€ä¸ªå¯ç‚¹å‡»çš„ Viewï¼ˆå¦‚</strong> <strong>Button</strong> <strong>ï¼‰åœ¨</strong> <strong><code>onTouchEvent</code></strong> <strong>ä¸­é»˜è®¤ä¼šæ¶ˆè€—æ‰æ‰€æœ‰äº‹ä»¶</strong>ã€‚å³ä½¿å®ƒæ˜¯ <code>DISABLED</code>ï¼ˆç¦ç”¨ï¼‰çŠ¶æ€ï¼Œåªè¦å®ƒæ˜¯ <code>CLICKABLE</code> çš„ï¼Œå®ƒä¾ç„¶ä¼šè¿”å› <code>true</code>ï¼Œé˜²æ­¢äº‹ä»¶ç©¿é€åˆ°ä¸‹å±‚</p>
<h5 data-id="heading-17">ACTION_DOWNï¼š</h5>
<pre><code class="hljs language-scss" lang="scss">boolean isInScrollingContainer = <span class="hljs-built_in">isInScrollingContainer</span>();
if (isInScrollingContainer) {
    mPrivateFlags |= PFLAG_PREPRESSED;
    <span class="hljs-comment">// ... å‘é€ä¸€ä¸ªå»¶æ—¶ 100ms çš„ Tap ä»»åŠ¡ ...</span>
    <span class="hljs-built_in">postDelayed</span>(mPendingCheckForTap, ViewConfiguration.getTapTimeout());
} else {
    <span class="hljs-built_in">setPressed</span>(true, x, y); <span class="hljs-comment">// ä¸åœ¨æ»‘åŠ¨å®¹å™¨ï¼Œç«‹å³æ˜¾ç¤ºæŒ‰ä¸‹çŠ¶æ€</span>
    <span class="hljs-built_in">checkForLongClick</span>(...); <span class="hljs-comment">// å¼€å§‹é•¿æŒ‰è®¡æ—¶</span>
}
</code></pre>
<ul>
<li>å¦‚æœ View åœ¨ <code>ScrollView</code> ç­‰æ»‘åŠ¨å®¹å™¨ä¸­ï¼Œç³»ç»Ÿä¼š<strong>å»¶è¿Ÿæ˜¾ç¤º</strong>æŒ‰ä¸‹çŠ¶æ€ï¼ˆ100msï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ç”¨æˆ·åªæ˜¯æƒ³æ»‘åŠ¨ï¼Œç»“æœæ‰‹æŒ‡ä¸€ç¢°æŒ‰é’®å°±é—ªç°æŒ‰ä¸‹æ•ˆæœã€‚</li>
<li>å¦‚æœä¸åœ¨æ»‘åŠ¨å®¹å™¨ï¼Œç«‹å³è°ƒç”¨ <code>setPressed(true)</code> å˜è‰²ï¼Œå¹¶å¼€å¯é•¿æŒ‰å®šæ—¶å™¨ã€‚</li>
</ul>
<h5 data-id="heading-18">ACTION_MOVEï¼š</h5>
<pre><code class="hljs language-scss" lang="scss">if (!pointInView(x, y, touchSlop)) {
    <span class="hljs-comment">// åªè¦æ‰‹æŒ‡ç§»å‡ºäº† View çš„èŒƒå›´ï¼ˆåŠ ä¸Šç³»ç»Ÿå…è®¸çš„å¾®å°åå·® touchSlopï¼‰</span>
    <span class="hljs-built_in">removeTapCallback</span>();
    <span class="hljs-built_in">removeLongPressCallback</span>();
    if ((mPrivateFlags &amp; PFLAG_PRESSED) != <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">setPressed</span>(false); <span class="hljs-comment">// å–æ¶ˆæŒ‰ä¸‹çŠ¶æ€</span>
    }
}
</code></pre>
<p>ç³»ç»Ÿå…è®¸ç”¨æˆ·åœ¨ç‚¹å‡»æ—¶æœ‰è½»å¾®çš„æ™ƒåŠ¨ï¼ˆ<code>touchSlop</code>ï¼‰ã€‚ä½†ä¸€æ—¦æ‰‹æŒ‡ç§»å‡º View èŒƒå›´ï¼Œé•¿æŒ‰å’Œç‚¹å‡»é€»è¾‘éƒ½ä¼šè¢«å–æ¶ˆï¼ŒæŒ‰é’®ä¹Ÿä¼šå˜å›åŸæ¥çš„é¢œè‰²ã€‚</p>
<h5 data-id="heading-19">ACTION_UPï¼š</h5>
<pre><code class="hljs language-scss" lang="scss">if (!mHasPerformedLongPress &amp;&amp; !mIgnoreNextUpEvent) {
    <span class="hljs-built_in">removeLongPressCallback</span>(); <span class="hljs-comment">// ç§»é™¤é•¿æŒ‰è®¡æ—¶</span>
    <span class="hljs-comment">// ...</span>
    if (!post(mPerformClick)) {
        <span class="hljs-built_in">performClickInternal</span>(); <span class="hljs-comment">// çœŸæ­£è§¦å‘ OnClickListener.onClick() çš„åœ°æ–¹</span>
    }
}
</code></pre>
<ul>
<li><strong>ä¼˜å…ˆçº§åˆ¤å®š</strong>ï¼šå¦‚æœå·²ç»è§¦å‘äº†é•¿æŒ‰ï¼ˆ<code>mHasPerformedLongPress</code> ä¸º trueï¼‰ï¼Œé‚£ä¹ˆæŠ¬èµ·æ—¶å°±ä¸ä¼šå†è§¦å‘ç‚¹å‡»ã€‚</li>
<li><strong>å¼‚æ­¥æ‰§è¡Œ</strong>ï¼šä½¿ç”¨ <code>post(mPerformClick)</code> æ˜¯ä¸ºäº†è®© View å…ˆå®Œæˆè§†è§‰ä¸Šçš„çŠ¶æ€åˆ‡æ¢ï¼ˆå˜å›åŸè‰²ï¼‰ï¼Œç„¶åå†æ‰§è¡Œç‚¹å‡»é€»è¾‘ï¼Œé¿å…ç‚¹å‡»ä»»åŠ¡é˜»å¡äº† UI çš„çŠ¶æ€æ›´æ–°ã€‚</li>
</ul>
<h5 data-id="heading-20">ACTION_CANCEL</h5>
<pre><code class="hljs language-scss" lang="scss">case MotionEvent<span class="hljs-selector-class">.ACTION_CANCEL</span>:
    if (clickable) {
        <span class="hljs-built_in">setPressed</span>(false);
    }
    <span class="hljs-built_in">removeTapCallback</span>();
    <span class="hljs-built_in">removeLongPressCallback</span>();
    <span class="hljs-comment">// ... é‡ç½®æ‰€æœ‰æ ‡è®°ä½ ...</span>
    break;
</code></pre>
<p>å½“çˆ¶å®¹å™¨ï¼ˆå¦‚ <code>RecyclerView</code>ï¼‰æ‹¦æˆªäº†äº‹ä»¶æ—¶ï¼Œå­ View ä¼šæ”¶åˆ° <code>CANCEL</code>ã€‚æ­¤æ—¶å¿…é¡»æ¸…ç†æ‰æ‰€æœ‰çš„è®¡æ—¶å™¨å’ŒæŒ‰ä¸‹çŠ¶æ€ï¼Œå¦åˆ™ View ä¼šä¸€ç›´æ˜¾ç¤ºâ€œè¢«æŒ‰ä¸‹â€çš„é¢œè‰²ã€‚</p>
<p>æˆ‘ä»¬å‘ç°åªè¦å­Viewå¯ä»¥ç‚¹å‡»ï¼Œå°±ä¼šè¿”å›trueï¼Œè¿™ä¸ªåˆ¤æ–­ä¸‹çš„äº‹ä»¶çŠ¶æ€åªæ˜¯æ‰§è¡Œä¸åŒçš„æ“ä½œ</p>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·çš„åˆ¤å®šï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œäº‹ä»¶ä¼šä¸ä¼šçœ‹èµ·æ¥å¾ˆå®¹æ˜“æ¶ˆè´¹ï¼Ÿ</strong></p>
<p>å…¶å®ä¸ç„¶ï¼Œé¦–å…ˆæˆ‘ä»¬è¦äº†è§£Viewçš„éå†é€»è¾‘ï¼Œå­Viewæ˜¯æ ¹æ®æ ¹å³å·¦çš„é¡ºåºæ‰§è¡Œï¼Œå¹¶ä¸”æ˜¯ä¼˜å…ˆè°ƒç”¨å­Viewçš„onTouchEventæ–¹æ³•ï¼Œå¦‚æœéå†åˆ°çš„è¿™ä¸ªå­Viewåˆšå¥½æ˜¯å¯ç‚¹å‡»çš„ï¼Œå°±ä¼šæ¶ˆè´¹äº‹ä»¶ã€‚ä¹‹åå°±ä¸ä¼šéå†äº†ï¼Œè¿™ç¬¦åˆæˆ‘ä»¬å¯¹äº‹ä»¶æ¶ˆè´¹çš„æœŸæœ›ã€‚</p>
<p>å¹¶ä¸”åœ¨æ‹¦æˆªçš„æƒ…å†µä¸‹ä¹Ÿä¸çŸ›ç›¾</p>
<p>åœ¨DOWNæ—¶æ‹¦æˆª:æ ¹æœ¬ä¸ä¼šèµ°éå†çš„æ“ä½œï¼Œå°±ä¸ä¼šè°ƒç”¨å­ViewonTouchEventæ–¹æ³•.</p>
<p>åœ¨MOVEæ—¶æ‹¦æˆª:è™½ç„¶åœ¨DOWNæ—¶å½¢æˆäº†å•å‘é“¾è¡¨mFirstTouchTargetï¼Œåœ¨ä¸‹ä¸€æ¬¡åˆ†å‘MOVEäº‹ä»¶çš„æ—¶å€™ï¼Œé€šè¿‡</p>
<pre><code class="hljs language-ini" lang="ini">  final boolean <span class="hljs-attr">cancelChild</span> = resetCancelNextUpFlag(target.child)
                       || intercepted<span class="hljs-comment">;</span>
if (dispatchTransformedTouchEvent(ev, cancelChild,target.child, target.pointerIdBits)) {
                    <span class="hljs-attr">handled</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;}</span>
</code></pre>
<p>ç»™å­Viewåˆ†å‘CANCELäº‹ä»¶(å–æ¶ˆè¯¥Viewçš„æŒ‰ä¸‹çŠ¶æ€,è®¡æ—¶å™¨ç­‰ç­‰)ï¼Œå¹¶ä¸”æ¸…ç©ºé“¾è¡¨ï¼Œä¹‹åè¿™ä¸ªViewå°±ä¸ä¼šæ¥æ”¶äº‹ä»¶äº†</p>
<p>[<strong>å¯¹äºè¿™ä¸€å¸§â€œç‰©ç†ä¸Šçš„ MOVE äº‹ä»¶â€ï¼Œå®ƒçš„â€œç§»åŠ¨æ•°æ®â€ç¡®å®æ²¡æœ‰è¢«ä»»ä½• View æ¶ˆè´¹ï¼Œè¢«æ¶ˆè´¹çš„ä»…ä»…æ˜¯ç”±å®ƒè½¬åŒ–è€Œæ¥çš„â€œCANCEL ä¿¡å·â€ã€‚</strong> ]</p>
<h4 data-id="heading-21">ç¦ç”¨çŠ¶æ€ä¸‹çš„å¤„ç†</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> ((viewFlags &amp; ENABLED_MASK) == DISABLED ...) {
    <span class="hljs-comment">// ... æŠ¬èµ·æ—¶æ¸…é™¤æŒ‰ä¸‹çŠ¶æ€ ...</span>
    <span class="hljs-keyword">return</span> clickable; 
}
</code></pre>
<p>å¦‚æœ View æ˜¯ç¦ç”¨çš„ï¼ˆDisabledï¼‰ï¼Œå®ƒä¸ä¼šå“åº”ç‚¹å‡»é€»è¾‘ï¼Œä½†å¦‚æœå®ƒåŸæœ¬æ˜¯å¯ç‚¹å‡»çš„ï¼Œå®ƒä¾ç„¶è¿”å› <code>true</code>ã€‚<strong>è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆç‚¹å‡»ä¸€ä¸ªç¦ç”¨çš„æŒ‰é’®ï¼Œä¸‹æ–¹çš„å¸ƒå±€ä¸ä¼šæ”¶åˆ°ç‚¹å‡»äº‹ä»¶ã€‚</strong></p>
<h4 data-id="heading-22">OnTouchListenerå’ŒOnClickListener</h4>
<p>å®šä½åˆ°Viewçš„dispatchTouchEventæ–¹æ³•ä¸­çš„è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">if (li != null &amp;&amp; li.mOnTouchListener != null
        &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED
        &amp;&amp; li.mOnTouchListener.onTouch(this, event)) {
    <span class="hljs-attr">result</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
}

if (!result &amp;&amp; onTouchEvent(event)) {
    <span class="hljs-attr">result</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
}
</code></pre>
<p>åœ¨dispatchTouchEventä¸­ï¼Œä¼šåˆ¤æ–­Viewæ˜¯å¦è®¾ç½®äº†OnTouchListenerï¼Œå¦‚æœè®¾ç½®äº†OnTouchListenerï¼Œå°±ä¼šç›´æ¥æ‹¦æˆªäº‹ä»¶ï¼ŒdispatchTouchEventæ–¹æ³•è¿”å›trueï¼Œè°ƒç”¨OnTouchListenerçš„onTouchæ–¹æ³•ï¼Œè€Œä¸ä¼šå†è§¦å‘åç»­çš„onTouchEventæ–¹æ³•ã€‚</p>
<p>å†å®šä½åˆ°Viewçš„onTouchEventæ–¹æ³•ä¸­çš„è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">if (clickable || (viewFlags &amp; TOOLTIP) == TOOLTIP) {
    switch (action) {          
        case MotionEvent<span class="hljs-selector-class">.ACTION_UP</span>:
            if (!<span class="hljs-built_in">post</span>(mPerformClick)) {
                <span class="hljs-built_in">performClickInternal</span>();
            }
</code></pre>
<p>å¯ä»¥å‘ç°æ˜¯åœ¨onTouchEventæ–¹æ³•ä¸­ï¼Œåˆ¤æ–­äº†Viewæ˜¯å¦å¯ç‚¹å‡»ã€‚è‹¥å¯ç‚¹å‡»ä¸”è®¾ç½®äº†OnClickListenerï¼Œé‚£ä¹ˆå°±ä¼šè°ƒç”¨OnClickListenerçš„onClickæ–¹æ³•ã€‚</p>
<p><strong>æŒ‰ä¼˜å…ˆçº§æ’åºï¼ŒOnTouchListener&gt;OnTouchEvent&gt;OnClickListenerã€‚è‹¥è®¾ç½®äº†OnTouchListenerï¼Œåˆ™ä¸ä¼šè§¦å‘åé¢ä¸¤è€…ã€‚OnClickListeneråœ¨ACTION_UPåè§¦å‘ã€‚</strong></p>
<h2 data-id="heading-23">ViewGroupçš„onInterceptTouchEvent</h2>
<pre><code class="hljs language-scss" lang="scss">public boolean <span class="hljs-built_in">onInterceptTouchEvent</span>(MotionEvent ev) {
    <span class="hljs-comment">// æ¡ä»¶ 1: äº‹ä»¶æ¥æºå¿…é¡»æ˜¯é¼ æ ‡ (MOUSE)</span>
    if (ev.isFromSource(InputDevice.SOURCE_MOUSE)
            <span class="hljs-comment">// æ¡ä»¶ 2: åŠ¨ä½œå¿…é¡»æ˜¯æŒ‰ä¸‹ (ACTION_DOWN)</span>
            &amp;&amp; ev<span class="hljs-selector-class">.getAction</span>() == MotionEvent<span class="hljs-selector-class">.ACTION_DOWN</span>
            <span class="hljs-comment">// æ¡ä»¶ 3: å¿…é¡»æ˜¯é¼ æ ‡å·¦é”® (BUTTON_PRIMARY)</span>
            &amp;&amp; ev<span class="hljs-selector-class">.isButtonPressed</span>(MotionEvent.BUTTON_PRIMARY)
            <span class="hljs-comment">// æ¡ä»¶ 4: ç‚¹å‡»çš„ä½ç½®å¿…é¡»åœ¨æ»šåŠ¨æ¡çš„â€œæ»‘å—â€ä¸Š (Scrollbar Thumb)</span>
            &amp;&amp; <span class="hljs-built_in">isOnScrollbarThumb</span>(ev.getXDispatchLocation(<span class="hljs-number">0</span>), ev<span class="hljs-selector-class">.getYDispatchLocation</span>(<span class="hljs-number">0</span>))) {
        
        <span class="hljs-comment">// å¦‚æœä¸Šè¿° 4 ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³ï¼Œè¿”å› trueï¼Œè¡¨ç¤ºæ‹¦æˆªè¯¥äº‹ä»¶</span>
        return true;
    }
    
    <span class="hljs-comment">// é»˜è®¤æƒ…å†µï¼ˆæ¯”å¦‚æ‰‹æŒ‡è§¦æ‘¸ã€ç‚¹å‡»éæ»šåŠ¨æ¡åŒºåŸŸç­‰ï¼‰è¿”å› false</span>
    return false;
}
</code></pre>
<p>å¥½æ–‡ç« æ¨èå¯ä»¥å’Œè¿™ä¸ªåšè¡¥å……
<a href="https://juejin.cn/post/7168445102984003591" target="_blank" title="https://juejin.cn/post/7168445102984003591">Androidæ–©é¦–è¡ŒåŠ¨â€”æ»‘åŠ¨å†²çªä½œä¸ºç§»åŠ¨å¼€å‘ï¼Œæˆ‘ä»¬å¯¹æ»‘åŠ¨å†²çªå¯ä»¥è¯´æ˜¯å±¡è§ä¸é²œã€‚è¿™ç¯‡æ–‡ç« ç»“åˆäº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Œå¯¹å¸¸è§çš„æ»‘åŠ¨å†²çª - æ˜é‡‘</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openClawå®‰è£…é£ä¹¦æ’ä»¶ï½œæ ¸å¿ƒè¸©å‘ï¼šspawn EINVAL é”™è¯¯ç»ˆæè§£å†³æŒ‡å—]]></title>    <link>https://juejin.cn/post/7605529884824567871</link>    <guid>https://juejin.cn/post/7605529884824567871</guid>    <pubDate>2026-02-12T16:30:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605529884824567871" data-draft-id="7605807405306675263" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openClawå®‰è£…é£ä¹¦æ’ä»¶ï½œæ ¸å¿ƒè¸©å‘ï¼šspawn EINVAL é”™è¯¯ç»ˆæè§£å†³æŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-12T16:30:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MicRabbit"/> <meta itemprop="url" content="https://juejin.cn/user/4135726601221641"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openClawå®‰è£…é£ä¹¦æ’ä»¶ï½œæ ¸å¿ƒè¸©å‘ï¼šspawn EINVAL é”™è¯¯ç»ˆæè§£å†³æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4135726601221641/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MicRabbit
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T16:30:03.000Z" title="Thu Feb 12 2026 16:30:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºç»å¸¸æŠ˜è…¾æœ¬åœ°å·¥å…·çš„å¼€å‘è€…ï¼Œæœ€è¿‘åœ¨éƒ¨ç½²openClawé£ä¹¦æ’ä»¶æ—¶ï¼Œè¢« <code>spawn EINVAL</code> æŠ¥é”™å¡äº†ä¸€ä¸‹åˆï¼ç»“åˆè‡ªå·±çš„å®é™…æ“ä½œï¼Œæ•´ç†äº†è¿™ç¯‡<strong>é‡ç‚¹èšç„¦è¯¥é”™è¯¯</strong>çš„è¸©å‘åˆ†äº«ï¼Œä»é”™è¯¯åŸå› ã€æ— æ•ˆè¯¯åŒºã€è¯¦ç»†è§£å†³æ­¥éª¤ï¼Œåˆ°å…œåº•æ–¹æ¡ˆï¼Œå…¨ç¨‹å¹²è´§ï¼Œå¸®æ­£åœ¨è¸©å‘çš„å°ä¼™ä¼´ä¸€æ¬¡æ€§è§£å†³ï¼Œå°‘èµ°å¼¯è·¯ï¼</p>
<p>å…ˆè¯´æ˜æˆ‘çš„ç¯å¢ƒï¼šWindows å’Œ Mac ç¯å¢ƒéƒ½é‡åˆ°åŒæ ·é—®é¢˜ï¼Œä½œä¸ºåå‰ç«¯å¼€å‘ä¸¤ä¸ªç¯å¢ƒå‡å®‰è£…äº†nvmç®¡ç†Nodeç‰ˆæœ¬ï¼Œæ ¸å¿ƒéœ€æ±‚æ˜¯æœ¬åœ°éƒ¨ç½²openClawé£ä¹¦æ’ä»¶ï¼ˆè‡ªç”¨æœºå™¨äººè°ƒè¯•ï¼‰ï¼Œæ— å¤æ‚éƒ¨ç½²åœºæ™¯ï¼Œæ‰€æœ‰æ“ä½œå‡ä¸ºæœ¬åœ°è°ƒè¯•å¯ç”¨ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è·Ÿç€èµ°ã€‚</p>
<p>OpenClawçš„å®‰è£…æ­¥éª¤å°±ä¸é‡å¤äº†ï¼Œè·Ÿç€å®˜ç½‘èµ°å°±å¯ä»¥ã€‚</p>
<p>ç¿»é˜…èµ„æ–™å’Œçœ‹å…¶ä»–åšä¸»çš„è§†é¢‘æ—¶å‘ç°é£ä¹¦æ’ä»¶å®‰è£…æ—¶éƒ½æ²¡é‡åˆ°æˆ‘çš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨è§£å†³é—®é¢˜ä¹‹ååæ€äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚ç‡æ˜¯æˆ‘çš„Nodeç¯å¢ƒæ˜¯å®‰è£…åœ¨nvmå†…çš„ï¼ˆè¯¥è§‚ç‚¹å¹¶æœªé‡å¤éªŒè¯ï¼‰ï¼Œå…ˆè¿›å…¥æ­£æ–‡</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæŠ¥é”™ï¼šspawn EINVALï¼ˆå¿…è¸©å‘ï¼Œå…ˆè®¤æ¸…é”™è¯¯æœ¬è´¨ï¼‰</h2>
<p>è¿™æ˜¯openClawå®‰è£…é£ä¹¦æ’ä»¶æ—¶æœ€é«˜é¢‘ã€æœ€æ£˜æ‰‹çš„é”™è¯¯ï¼Œå¾ˆå¤šå°ä¼™ä¼´ä¼šè¢«ç½‘ä¸Šçš„è¿‡æ—¶æ–¹æ¡ˆè¯¯å¯¼ï¼Œç™½è´¹åŠŸå¤«ã€‚å…ˆæ˜ç¡®é”™è¯¯çš„å®Œæ•´ç°è±¡å’Œæ ¸å¿ƒåŸå› ï¼Œé¿å…èµ°åã€‚</p>
<h3 data-id="heading-1">âŒ å®Œæ•´é”™è¯¯ç°è±¡ï¼ˆå¯¹ç…§è‡ªæŸ¥ï¼Œç¡®è®¤ä½ è¸©çš„æ˜¯åŒä¸€ä¸ªå‘ï¼‰</h3>
<p>æ‰§è¡Œé£ä¹¦æ’ä»¶å®‰è£…å‘½ä»¤ <code>openclaw plugins install @openclaw/feishu</code> åï¼Œç»ˆç«¯ç«‹å³æŠ¥é”™ï¼Œæ— æ³•ç»§ç»­å®‰è£…ï¼Œå®Œæ•´æŠ¥é”™å †æ ˆå¦‚ä¸‹ï¼ˆé‡ç‚¹æ ‡æ³¨æ ¸å¿ƒé”™è¯¯ <code>spawn EINVAL</code>ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5a9fbc147234a2db8eea1d8e1632e72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWljUmFiYml0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771518602&amp;x-signature=hvl2FtEBBo9C9xpg5rXNE6AGjsI%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¸å¿ƒç‰¹å¾ï¼šæŠ¥é”™é¦–è¡Œæç¤º <code>Failed to start CLI: Error: spawn EINVAL</code>ï¼Œåç»­å…³è” <code>child_process.spawn</code> ç›¸å…³å †æ ˆï¼Œæ’ä»¶å®‰è£…ç›´æ¥ä¸­æ–­ï¼Œé‡å¤æ‰§è¡Œå‘½ä»¤ä¾ç„¶æŠ¥é”™ã€‚</p>
<h3 data-id="heading-2">ğŸ” é”™è¯¯æ ¸å¿ƒåŸå› ï¼ˆå…³é”®ï¼ææ‡‚åŸå› æ‰ä¸ä¼šè¢«è¯¯å¯¼ï¼‰</h3>
<p>å¾ˆå¤šæ•™ç¨‹è¯´â€œNodeç‰ˆæœ¬è¿‡é«˜å¯¼è‡´â€ï¼Œå…¶å®æ˜¯é”™è¯¯çš„ï¼ç»“åˆæˆ‘çš„æ’æŸ¥å’Œå®æ“éªŒè¯ï¼Œæ ¸å¿ƒåŸå› æ˜¯ï¼š</p>
<p><strong>openClawé£ä¹¦æ’ä»¶æœ¬åœ°æ‰©å±•åŒ…ï¼ˆfeishuæ–‡ä»¶å¤¹ï¼‰ä¸­çš„ package.json é…ç½®ä¸å…¼å®¹</strong> â€”â€” è¯¥é…ç½®æ–‡ä»¶ä¸­ï¼Œä¾èµ–ç‰ˆæœ¬ã€å…¥å£æ–‡ä»¶è·¯å¾„æˆ–è„šæœ¬å‘½ä»¤å­˜åœ¨å¼‚å¸¸ï¼Œå¯¼è‡´Node.jsçš„ <code>child_process.spawn</code> æ–¹æ³•æ— æ³•æ­£å¸¸åˆ›å»ºå­è¿›ç¨‹ï¼Œè¿›è€Œå¯åŠ¨CLIå¤±è´¥ï¼ŒæŠ¥å‡º <code>spawn EINVAL</code>ï¼ˆæ— æ•ˆå‚æ•°ï¼‰é”™è¯¯ã€‚</p>
<p>è¡¥å……ï¼šè¯¥é”™è¯¯ä¸Nodeç‰ˆæœ¬æ— å…³ï¼ˆæˆ‘ç”¨v22ï¼Œåªè¦ä¿®æ”¹é…ç½®ï¼Œå‡å¯è§£å†³ï¼‰ï¼Œæ— éœ€é™çº§Nodeï¼Œç™½è´¹åŠŸå¤«çš„æ“ä½œä¸€å®šè¦é¿å¼€ã€‚</p>
<h3 data-id="heading-3">âŒ ç½‘ä¸Šå¸¸è§æ— æ•ˆå°è¯•ï¼ˆåˆ«å†è¸©ï¼äº²æµ‹3æ¬¡å‡å¤±è´¥ï¼‰</h3>
<p>ä¸€å¼€å§‹çœ‹åˆ°æŠ¥é”™ï¼Œæˆ‘è·Ÿç€ç½‘ä¸Šçš„æ•™ç¨‹åšäº†3ç§å°è¯•ï¼Œå‡æ— æ•ˆï¼Œæ•´ç†å‡ºæ¥å¸®å¤§å®¶é¿å‘ï¼š</p>
<ol>
<li>Nodeç‰ˆæœ¬é™çº§ï¼šç”¨nvmé™çº§åˆ°v20ã€v18ï¼Œæ¸…ç†npmç¼“å­˜ã€é‡æ–°å®‰è£…openClawï¼ŒæŠ¥é”™ä¾ç„¶å­˜åœ¨ï¼›</li>
<li>ç›´æ¥é‡æ–°å®‰è£…æ’ä»¶ï¼šåå¤æ‰§è¡Œ <code>openclaw plugins install @openclaw/feishu</code>ï¼Œç”šè‡³å¸è½½é‡è£…openClawï¼Œæ— æ³•è§£å†³é…ç½®ä¸å…¼å®¹é—®é¢˜ï¼›</li>
<li>éç®¡ç†å‘˜ç»ˆç«¯å®‰è£…ï¼šæœªç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œç»ˆç«¯ï¼Œå¯¼è‡´æƒé™ä¸è¶³ï¼Œä½†å³ä½¿æå‡æƒé™ï¼Œä¸ä¿®æ”¹é…ç½®ä¾ç„¶æŠ¥é”™ï¼ˆæƒé™ä¸æ˜¯æ ¸å¿ƒåŸå› ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-4">âœ… ç»ˆæè§£å†³æ–¹æ¡ˆï¼ˆäº²æµ‹æœ‰æ•ˆï¼Œåˆ†æ­¥æ‹†è§£ï¼Œæ–°æ‰‹å¯è·Ÿï¼‰</h3>
<p>æ ¸å¿ƒé€»è¾‘ï¼šæ‰¾åˆ°å¼‚å¸¸çš„ package.json æ–‡ä»¶ â†’ å¤‡ä»½å¹¶ä¿®æ”¹é…ç½® â†’ æœ¬åœ°é‡è£…æ’ä»¶ â†’ é‡å¯éªŒè¯ï¼Œæ­¥éª¤æ¸…æ™°ï¼Œä¸€æ­¥åˆ°ä½ï¼Œå…¨ç¨‹æ— éœ€é™çº§Nodeã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šç²¾å‡†å®šä½ç›®æ ‡ package.json æ–‡ä»¶ï¼ˆå…³é”®ç¬¬ä¸€æ­¥ï¼Œåˆ«æ‰¾é”™è·¯å¾„ï¼‰</strong> è¯¥æ–‡ä»¶åœ¨openClawçš„é£ä¹¦æ’ä»¶æ‰©å±•åŒ…ä¸­ï¼Œè·¯å¾„æ ¹æ®ä½ çš„nvmå®‰è£…ä½ç½®è°ƒæ•´ï¼Œæˆ‘çš„è·¯å¾„å¦‚ä¸‹ï¼ˆå¯ç›´æ¥å¤åˆ¶ï¼Œæ›¿æ¢ç”¨æˆ·åå³å¯ï¼‰ï¼š<code>C:\nvm4w\nodejs\node_modules\openclaw\extensions\feishu</code>ï¼ˆMacOSæ‰¾åˆ°å¯¹åº”çš„nvmç›®å½•å†…çš„openClawçš„æ’ä»¶ç›®å½•ï¼‰æ“ä½œï¼šæ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨ï¼Œå°†ä¸Šè¿°è·¯å¾„ç²˜è´´åˆ°åœ°å€æ ï¼Œå›è½¦å³å¯å¿«é€Ÿå®šä½ï¼Œæ–‡ä»¶å¤¹ä¸­ä¼šçœ‹åˆ° <code>package.json</code> æ–‡ä»¶ï¼ˆæ ¸å¿ƒä¿®æ”¹æ–‡ä»¶ï¼‰ã€‚</p>
<p><strong>ç¬¬äºŒæ­¥ï¼šå¤‡ä»½æ–‡ä»¶+ä¿®æ”¹é…ç½®ï¼ˆé¿å…å‡ºé”™ï¼Œé‡ä¸­ä¹‹é‡ï¼‰</strong> â‘  å¤‡ä»½æ–‡ä»¶ï¼šå¤åˆ¶ä¸€ä»½ <code>package.json</code> æ–‡ä»¶ï¼Œé‡å‘½åä¸º <code>package.json.bak</code>ï¼ˆä¸‡ä¸€ä¿®æ”¹é”™è¯¯ï¼Œå¯ç›´æ¥æ¢å¤åŸæ–‡ä»¶ï¼Œé¿å…æ’ä»¶å½»åº•æŸåï¼‰ï¼›â‘¡ ä¿®æ”¹é…ç½®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c098bb4549ab40cf8ad09672c59fe1a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWljUmFiYml0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771518602&amp;x-signature=zjQCWGTQWgMT13w362DTGnlPtT8%3D" alt="image.png" loading="lazy"/></p>
<p>ä¿®æ”¹è¿™é‡Œ å°† workspace:* å»æ‰</p>
<pre><code class="hljs language-json" lang="json">  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
     <span class="hljs-attr">"openclaw"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span> 
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>ä»è¿™é‡Œçš„ä¿®æ”¹ä¸Šæˆ‘æ€€ç–‘å¯¼è‡´æŠ¥é”™çš„æ ¹æœ¬åŸå› æ˜¯ï¼šæˆ‘æœ¬æœºç¯å¢ƒå®‰è£…çš„nvm å¯¼è‡´ workspace:* çš„ç›®å½•æ£€æŸ¥å¤±è´¥äº†</p>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šå®‰è£…openclawå®˜æ–¹æ–‡æ¡£ä½¿ç”¨æœ¬åœ°ä»£ç å®‰è£…é£ä¹¦æ¸ é“</strong></p>
<p>openclawå®˜æ–¹æ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fzh-CN%2Fchannels%2Ffeishu" target="_blank" title="https://docs.openclaw.ai/zh-CN/channels/feishu" ref="nofollow noopener noreferrer">docs.openclaw.ai/zh-CN/channâ€¦</a></p>
<p>ä½¿ç”¨æœ¬åœ°å®‰è£…çš„æ–¹å¼ï¼š
â‘  æ‰“å¼€cmdæˆ–è€…powershell è¿›å…¥é£ä¹¦æ’ä»¶ç›®å½•
â‘¡ ä½¿ç”¨npm iæˆ–è€…pnpm iå®‰è£…ä¾èµ–</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5789321323894f08a6a479f0688b9361~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWljUmFiYml0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771518602&amp;x-signature=f2kbfOk9zVnMMiMxwnf8O5L8TCo%3D" alt="image.png" loading="lazy"/></p>
<p>è‡³æ­¤ é£ä¹¦æ’ä»¶å®‰è£…æˆåŠŸï¼</p>
<p><strong>ç¬¬å››æ­¥ï¼šé‡å¯openclawéªŒè¯é”™è¯¯æ˜¯å¦ä¿®å¤ï¼Œå¹¶é…ç½®é£ä¹¦</strong></p>
<p>â‘  é‡å¯openClawï¼š openclaw onboard åœ¨Select channelæ—¶é€‰æ‹©é£ä¹¦</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9327f484e24744ad87db6850d0beb423~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWljUmFiYml0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771518602&amp;x-signature=Qf%2FbMKa68nvDLJRhor67Z39ct9c%3D" alt="image.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b701b5925588407b97d19e2f77b6149a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWljUmFiYml0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771518602&amp;x-signature=eeu2f5ctaZfiYkwK9iwGldMyDZM%3D" alt="image.png" loading="lazy"/></p>
<p>é€‰æ‹©åä¸æŠ¥é”™ å¯ä»¥é…ç½®é£ä¹¦åº”ç”¨çš„ App ID å’Œ  App Secretï¼Œå³å¯åœ¨é£ä¹¦åˆ›å»ºåº”ç”¨å¹¶é“¾æ¥openclawè¿›è¡Œä¼šè¯äº†ï¼</p>
<h3 data-id="heading-5">ğŸ”§ å…œåº•æ–¹æ¡ˆï¼ˆè‹¥ä¿®æ”¹é…ç½®åä»æŠ¥é”™ï¼Œç›´æ¥ç”¨è¿™ä¸ªï¼‰</h3>
<p>è‹¥æŒ‰ä¸Šè¿°æ­¥éª¤æ“ä½œåï¼Œä¾ç„¶æŠ¥ <code>spawn EINVAL</code> é”™è¯¯ï¼Œå¤§æ¦‚ç‡æ˜¯ package.json ä¿®æ”¹ä¸åˆ°ä½ï¼Œå¯ç›´æ¥ç”¨ä»¥ä¸‹å…œåº•æ–¹æ¡ˆï¼Œç»•å¼€é…ç½®ä¿®æ”¹éš¾é¢˜ï¼š</p>
<ol>
<li>å¸è½½å½“å‰é£ä¹¦æ’ä»¶ï¼š<code>openclaw plugins uninstall @openclaw/feishu</code>ï¼›</li>
<li>åˆ é™¤feishuæ‰©å±•åŒ…ï¼šåˆ é™¤ <code>C:\nvm4w\nodejs\node_modules\openclaw\extensions\feishu</code> æ•´ä¸ªæ–‡ä»¶å¤¹ï¼›</li>
<li>æ‰‹åŠ¨å…‹éš†æ’ä»¶æºç ï¼šæ‰§è¡Œ <code>git clone https://github.com/openclaw/feishu.git</code>ï¼Œå°†å…‹éš†åçš„feishuæ–‡ä»¶å¤¹ï¼Œå¤åˆ¶åˆ°ä¸Šè¿°extensionsç›®å½•ä¸‹ï¼›</li>
<li>æœ¬åœ°å®‰è£…ï¼šè¿›å…¥feishuæ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ <code>npm install</code> å®‰è£…ä¾èµ–ï¼Œå†æ‰§è¡Œ <code>openclaw plugins install ./</code>ï¼Œé‡å¯openClawå³å¯ã€‚</li>
</ol>
<h2 data-id="heading-6">äºŒã€è¡¥å……ï¼šæŠ¥é”™è§£å†³åï¼Œç®€å•é…ç½®ï¼ˆå¿«é€Ÿé€‚é…æœ¬åœ°è‡ªç”¨ï¼‰</h2>
<p>é‡ç‚¹åˆ†äº«æŠ¥é”™å¤„ç†ï¼Œé…ç½®éƒ¨åˆ†ç²¾ç®€æ ¸å¿ƒè¦ç‚¹ï¼Œæ— éœ€æ·±å…¥ï¼Œå¿«é€Ÿå®Œæˆéƒ¨ç½²ï¼š</p>
<ul>
<li>Feishu DM policyï¼ˆç§ä¿¡ç­–ç•¥ï¼‰ï¼šé€‰<code>Pairing (recommended)</code>ï¼ˆé…å¯¹æ¨¡å¼ï¼‰ï¼Œç”¨æˆ·ä¸»åŠ¨æ‰“æ‹›å‘¼æ‰èƒ½å‘ç§ä¿¡ï¼Œå®‰å…¨ä¸éªšæ‰°ï¼›</li>
<li>Group chat policyï¼ˆç¾¤èŠç­–ç•¥ï¼‰ï¼šé€‰ <code>Allowlist</code>ï¼ˆç™½åå•æ¨¡å¼ï¼‰ï¼Œåªåœ¨è‡ªå·±çš„æµ‹è¯•ç¾¤å“åº”ï¼Œé¿å…æ»¥ç”¨ï¼›</li>
<li>Group chat allowlistï¼ˆç¾¤èŠç™½åå•ï¼‰ï¼šå¤åˆ¶é£ä¹¦ç¾¤IDï¼ˆç¾¤è®¾ç½®â†’æœ€åº•éƒ¨ï¼‰ï¼Œå¤šä¸ªç¾¤ç”¨è‹±æ–‡é€—å·éš”å¼€ï¼Œç•™ç©ºå³ç¦ç”¨ç¾¤èŠå“åº”ï¼›</li>
<li>feishu account name (default)ï¼šç›´æ¥æŒ‰å›è½¦ï¼Œç”¨é»˜è®¤è´¦å·å³å¯ï¼Œæœ¬åœ°è‡ªç”¨æ— éœ€ä¿®æ”¹ã€‚</li>
</ul>
<h2 data-id="heading-7">ä¸‰ã€æ ¸å¿ƒæ€»ç»“ï¼ˆé‡ç‚¹ç‰¢è®°ï¼Œä¸‹æ¬¡é‡åˆ°ç›´æ¥è§£å†³ï¼‰</h2>
<p>æ•´ç¯‡åˆ†äº«èšç„¦ <code>spawn EINVAL</code> é”™è¯¯ï¼Œè®°ä½3ä¸ªæ ¸å¿ƒè¦ç‚¹ï¼Œä¸‹æ¬¡é‡åˆ°æ— éœ€æŸ¥æ•™ç¨‹ï¼š</p>
<ol>
<li>é”™è¯¯æœ¬è´¨ï¼šé£ä¹¦æ’ä»¶çš„ package.json é…ç½®ä¸å…¼å®¹ï¼Œä¸Nodeç‰ˆæœ¬æ— å…³ï¼Œæ— éœ€é™çº§ï¼›</li>
<li>æ ¸å¿ƒè§£å†³ï¼šå®šä½ â†’ å¤‡ä»½ä¿®æ”¹ package.json â†’ ç®¡ç†å‘˜æœ¬åœ°é‡è£… â†’ é‡å¯éªŒè¯ï¼›</li>
<li>å…œåº•æ–¹æ¡ˆï¼šåˆ é™¤å¼‚å¸¸æ‰©å±•åŒ…ï¼Œæ‰‹åŠ¨å…‹éš†æºç å®‰è£…ï¼Œ100%è§£å†³é…ç½®é—®é¢˜ã€‚</li>
</ol>
<h2 data-id="heading-8">å››ã€æœ€åç¢ç¢å¿µ</h2>
<p>å…¶å® <code>spawn EINVAL</code> æŠ¥é”™å¹¶ä¸éš¾è§£å†³ï¼Œè¸©å‘ä¸»è¦æ˜¯å› ä¸ºç½‘ä¸Šéƒ¨åˆ†è§£å†³æ–¹æ¡ˆè¿‡æ—¶ï¼Œè¯¯å¯¼å¤§å®¶å»é™çº§Nodeã€‚å¸Œæœ›è¿™ç¯‡é‡ç‚¹èšç„¦è¯¥é”™è¯¯çš„åˆ†äº«ï¼Œèƒ½å¸®åˆ°æ­£åœ¨æŠ˜è…¾openClawé£ä¹¦æ’ä»¶çš„å°ä¼™ä¼´ï¼Œé¿å¼€æ— æ•ˆæ“ä½œï¼Œå¿«é€Ÿè§£å†³é—®é¢˜ã€‚</p>
<p>å¦‚æœå¤§å®¶é‡åˆ°äº†å…¶ä»–ç›¸å…³æŠ¥é”™ï¼Œæˆ–è€…æœ‰æ›´ç®€æ´çš„è§£å†³æ–¹æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè¡¥å……ï¼Œä¸€èµ·å°‘èµ°å¼¯è·¯ï½</p>
<p>#openClaw #é£ä¹¦æ’ä»¶ #é£ä¹¦æœºå™¨äºº #å¼€å‘è€…è¸©å‘ #spawn EINVAL #æœ¬åœ°éƒ¨ç½² #Node.js #å‰ç«¯å·¥å…·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ« LLM ä¾›åº”å•†é”å®š â€” SmartChat çš„å¤šæ¨¡å‹ Provider æŠ½è±¡å±‚è®¾è®¡å®è·µ]]></title>    <link>https://juejin.cn/post/7605811866908000265</link>    <guid>https://juejin.cn/post/7605811866908000265</guid>    <pubDate>2026-02-12T17:17:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866908000265" data-draft-id="7605711582430494771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ« LLM ä¾›åº”å•†é”å®š â€” SmartChat çš„å¤šæ¨¡å‹ Provider æŠ½è±¡å±‚è®¾è®¡å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-02-12T17:17:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¦é‡Œå¯»ç "/> <meta itemprop="url" content="https://juejin.cn/user/528241507974520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ« LLM ä¾›åº”å•†é”å®š â€” SmartChat çš„å¤šæ¨¡å‹ Provider æŠ½è±¡å±‚è®¾è®¡å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/528241507974520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¦é‡Œå¯»ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T17:17:13.000Z" title="Thu Feb 12 2026 17:17:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åš AI åº”ç”¨æœ€æ€•ä»€ä¹ˆï¼Ÿä¾›åº”å•†é”å®šã€‚ä»Šå¤© OpenAI æ¶¨ä»·ï¼Œæ˜å¤©æŸä¸ªå›½äº§æ¨¡å‹æ•ˆæœæ›´å¥½ï¼Œåå¤©å®¢æˆ·è¦æ±‚ç”¨ç§æœ‰åŒ–éƒ¨ç½²çš„æ¨¡å‹â€¦â€¦å¦‚æœä»£ç å’ŒæŸä¸ª LLM æä¾›å•†æ·±åº¦è€¦åˆï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½æ˜¯ä¸€æ¬¡é‡æ„ã€‚</p>
<p>SmartChat é€šè¿‡ä¸€ä¸ª Provider æŠ½è±¡å±‚ï¼Œå®ç°äº† 7+ ä¸ª LLM æä¾›å•†çš„æ— ç¼åˆ‡æ¢ã€‚æ¥çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚</p>
<blockquote>
<p>ğŸ”— <strong>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsmartchat.nofx.asia%2F" target="_blank" title="https://smartchat.nofx.asia/" ref="nofollow noopener noreferrer">smartchat.nofx.asia/</a></strong></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a046cdc202874e49b3cbaff7691166a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKm6YeM5a-756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771521604&amp;x-signature=4r%2FFuGWUK0PTxlfXi6pEB4AD7lQ%3D" alt="å¾®ä¿¡å›¾ç‰‡_20260212194717_45_236.png" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ã€é—®é¢˜ï¼šLLM æä¾›å•†çš„ç¢ç‰‡åŒ–</h2>
<p>ç›®å‰ä¸»æµçš„ LLM æä¾›å•†å„æœ‰å„çš„ SDK å’Œ API æ ¼å¼ï¼š</p>
<ul>
<li><strong>OpenAI</strong>ï¼š<code>openai</code> SDKï¼Œ<code>/v1/chat/completions</code></li>
<li><strong>Anthropic</strong>ï¼š<code>@anthropic-ai/sdk</code>ï¼Œ<code>/v1/messages</code>ï¼Œå®Œå…¨ä¸åŒçš„æ¶ˆæ¯æ ¼å¼</li>
<li><strong>å›½äº§æ¨¡å‹</strong>ï¼šå¤§å¤šå…¼å®¹ OpenAI æ ¼å¼ï¼Œä½† base URL å’Œæ¨¡å‹åä¸åŒ</li>
</ul>
<p>å¦‚æœæ¯ä¸ªæä¾›å•†å†™ä¸€å¥—è°ƒç”¨é€»è¾‘ï¼Œä»£ç ä¼šå˜æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åé¢æ•™æï¼šç¡¬ç¼–ç æ¯ä¸ªæä¾›å•†</span>
<span class="hljs-keyword">if</span> (provider === <span class="hljs-string">'openai'</span>) {
  <span class="hljs-comment">// OpenAI çš„è°ƒç”¨é€»è¾‘</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (provider === <span class="hljs-string">'anthropic'</span>) {
  <span class="hljs-comment">// Anthropic çš„è°ƒç”¨é€»è¾‘</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (provider === <span class="hljs-string">'deepseek'</span>) {
  <span class="hljs-comment">// DeepSeek çš„è°ƒç”¨é€»è¾‘</span>
} <span class="hljs-comment">// ... æ— é™ if-else</span>
</code></pre>
<h2 data-id="heading-2">äºŒã€SmartChat çš„ Provider æŠ½è±¡å±‚</h2>
<p>SmartChat çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š<strong>å°†æ‰€æœ‰æä¾›å•†å½’ä¸ºä¸¤ç±» SDKï¼ˆOpenAI å’Œ Anthropicï¼‰ï¼Œé€šè¿‡é¢„è®¾é…ç½® + ç»Ÿä¸€æ¥å£æ¶ˆé™¤å·®å¼‚</strong>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Provider é¢„è®¾é…ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PROVIDER_PRESETS</span> = {
  <span class="hljs-attr">openai</span>: {
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.openai.com/v1'</span>,
    <span class="hljs-attr">models</span>: [<span class="hljs-string">'gpt-4o'</span>, <span class="hljs-string">'gpt-4o-mini'</span>, <span class="hljs-string">'gpt-3.5-turbo'</span>],
    <span class="hljs-attr">sdk</span>: <span class="hljs-string">'openai'</span>
  },
  <span class="hljs-attr">deepseek</span>: {
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.deepseek.com/v1'</span>,
    <span class="hljs-attr">models</span>: [<span class="hljs-string">'deepseek-chat'</span>, <span class="hljs-string">'deepseek-reasoner'</span>],
    <span class="hljs-attr">sdk</span>: <span class="hljs-string">'openai'</span>  <span class="hljs-comment">// DeepSeek å…¼å®¹ OpenAI æ ¼å¼</span>
  },
  <span class="hljs-attr">qwen</span>: {
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://dashscope.aliyuncs.com/compatible-mode/v1'</span>,
    <span class="hljs-attr">models</span>: [<span class="hljs-string">'qwen-turbo'</span>, <span class="hljs-string">'qwen-plus'</span>, <span class="hljs-string">'qwen-max'</span>],
    <span class="hljs-attr">sdk</span>: <span class="hljs-string">'openai'</span>  <span class="hljs-comment">// é€šä¹‰åƒé—®ä¹Ÿå…¼å®¹ OpenAI æ ¼å¼</span>
  },
  <span class="hljs-attr">anthropic</span>: {
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.anthropic.com'</span>,
    <span class="hljs-attr">models</span>: [<span class="hljs-string">'claude-3-5-sonnet'</span>, <span class="hljs-string">'claude-3-haiku'</span>],
    <span class="hljs-attr">sdk</span>: <span class="hljs-string">'anthropic'</span>
  },
  <span class="hljs-attr">custom</span>: {
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// ç”¨æˆ·è‡ªå®šä¹‰</span>
    <span class="hljs-attr">models</span>: [],
    <span class="hljs-attr">sdk</span>: <span class="hljs-string">'openai'</span>  <span class="hljs-comment">// é»˜è®¤èµ° OpenAI å…¼å®¹åè®®</span>
  }
};
</code></pre>
<p>å…³é”®æ´å¯Ÿï¼š<strong>ç»å¤§å¤šæ•°å›½äº§æ¨¡å‹éƒ½å…¼å®¹ OpenAI API æ ¼å¼</strong>ï¼Œæ‰€ä»¥åªéœ€è¦ç»´æŠ¤ä¸¤å¥— SDK è°ƒç”¨é€»è¾‘ï¼ˆOpenAI å’Œ Anthropicï¼‰ï¼Œé€šè¿‡åˆ‡æ¢ <code>baseURL</code> å°±èƒ½æ¥å…¥ä¸åŒæä¾›å•†ã€‚</p>
<h2 data-id="heading-3">ä¸‰ã€ç»Ÿä¸€çš„æµå¼è¾“å‡ºæ¥å£</h2>
<p>ä¸åŒ SDK çš„æµå¼è¾“å‡ºæ ¼å¼å·®å¼‚å¾ˆå¤§ï¼ŒSmartChat å°†å…¶ç»Ÿä¸€ä¸ºä¸€ä¸ª <code>streamChat</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">streamChat</span>(<span class="hljs-params">params: {
  provider: <span class="hljs-built_in">string</span>;
  model: <span class="hljs-built_in">string</span>;
  messages: Message[];
  apiKey: <span class="hljs-built_in">string</span>;
  temperature?: <span class="hljs-built_in">number</span>;
}</span>) {
  <span class="hljs-keyword">const</span> preset = <span class="hljs-variable constant_">PROVIDER_PRESETS</span>[params.<span class="hljs-property">provider</span>];

  <span class="hljs-keyword">if</span> (preset.<span class="hljs-property">sdk</span> === <span class="hljs-string">'openai'</span>) {
    <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({
      <span class="hljs-attr">apiKey</span>: params.<span class="hljs-property">apiKey</span>,
      <span class="hljs-attr">baseURL</span>: preset.<span class="hljs-property">baseURL</span>
    });

    <span class="hljs-keyword">return</span> client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">model</span>: params.<span class="hljs-property">model</span>,
      <span class="hljs-attr">messages</span>: params.<span class="hljs-property">messages</span>,
      <span class="hljs-attr">temperature</span>: params.<span class="hljs-property">temperature</span>,
      <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>
    });
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (preset.<span class="hljs-property">sdk</span> === <span class="hljs-string">'anthropic'</span>) {
    <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Anthropic</span>({ <span class="hljs-attr">apiKey</span>: params.<span class="hljs-property">apiKey</span> });

    <span class="hljs-keyword">return</span> client.<span class="hljs-property">messages</span>.<span class="hljs-title function_">stream</span>({
      <span class="hljs-attr">model</span>: params.<span class="hljs-property">model</span>,
      <span class="hljs-attr">messages</span>: <span class="hljs-title function_">convertToAnthropicFormat</span>(params.<span class="hljs-property">messages</span>),
      <span class="hljs-attr">max_tokens</span>: <span class="hljs-number">4096</span>,
      <span class="hljs-attr">temperature</span>: params.<span class="hljs-property">temperature</span>
    });
  }
}
</code></pre>
<p>ä¸Šå±‚ä¸šåŠ¡ä»£ç åªéœ€è¦è°ƒç”¨ <code>streamChat()</code>ï¼Œå®Œå…¨ä¸å…³å¿ƒåº•å±‚ç”¨çš„æ˜¯å“ªä¸ªæä¾›å•†ã€‚</p>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20../docs/images/screenshot-04-bot-settings.png" alt="SmartChat æœºå™¨äººè®¾ç½®è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/></p>
<h2 data-id="heading-4">å››ã€è‡ªå®šä¹‰ç«¯ç‚¹ï¼šç»ˆæçµæ´»æ€§</h2>
<p>SmartChat è¿˜æ”¯æŒç”¨æˆ·é…ç½®è‡ªå®šä¹‰çš„ OpenAI å…¼å®¹ç«¯ç‚¹ï¼Œè¿™æ„å‘³ç€å¯ä»¥æ¥å…¥ï¼š</p>
<ul>
<li><strong>æœ¬åœ°éƒ¨ç½²çš„æ¨¡å‹</strong>ï¼šOllamaã€vLLMã€LocalAI</li>
<li><strong>ä¼ä¸šç§æœ‰åŒ–éƒ¨ç½²</strong>ï¼šAzure OpenAIã€AWS Bedrockï¼ˆé€šè¿‡å…¼å®¹å±‚ï¼‰</li>
<li><strong>ä»»ä½• OpenAI å…¼å®¹çš„ API</strong>ï¼šå„ç§ä»£ç†ã€ä¸­è½¬æœåŠ¡</li>
</ul>
<p>ç”¨æˆ·åªéœ€åœ¨è®¾ç½®é¡µé¢å¡«å…¥ base URLã€API Key å’Œæ¨¡å‹åç§°å³å¯ã€‚</p>
<h2 data-id="heading-5">äº”ã€æˆæœ¬ä¼˜åŒ–ç­–ç•¥</h2>
<p>å¤šæ¨¡å‹æ¶æ„å¸¦æ¥çš„ä¸€ä¸ªéšè—å¥½å¤„æ˜¯<strong>æˆæœ¬ä¼˜åŒ–</strong>ï¼š</p>
<pre><code class="hljs">ç®€å•é—®é¢˜ â†’ ä½¿ç”¨ä¾¿å®œçš„æ¨¡å‹ï¼ˆDeepSeekã€Qwen-Turboï¼‰
å¤æ‚é—®é¢˜ â†’ ä½¿ç”¨å¼ºåŠ›æ¨¡å‹ï¼ˆGPT-4oã€Claude Sonnetï¼‰
åµŒå…¥å‘é‡ â†’ ä½¿ç”¨æœ¬åœ°æ¨¡å‹ï¼ˆé›¶æˆæœ¬ï¼‰
</code></pre>
<p>æ¯ä¸ªæœºå™¨äººå¯ä»¥ç‹¬ç«‹é…ç½®æ¨¡å‹å’Œå‚æ•°ï¼Œè¿è¥è€…å¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯çµæ´»è°ƒæ•´ã€‚</p>
<h2 data-id="heading-6">å…­ã€è¿™ä¸ªè®¾è®¡æ¨¡å¼çš„å¯å¤ç”¨æ€§</h2>
<p>SmartChat çš„ Provider æŠ½è±¡å±‚è®¾è®¡æ¨¡å¼å¯ä»¥ç›´æ¥å¤ç”¨åˆ°å…¶ä»– AI åº”ç”¨ä¸­ã€‚æ ¸å¿ƒæ€è·¯æ€»ç»“ï¼š</p>
<ol>
<li><strong>è¯†åˆ« SDK å®¶æ—</strong>ï¼šå¤§å¤šæ•°æä¾›å•†å±äº OpenAI å…¼å®¹æˆ– Anthropic ä¸¤ä¸ªå®¶æ—</li>
<li><strong>é¢„è®¾é…ç½®é©±åŠ¨</strong>ï¼šç”¨é…ç½®è€Œéä»£ç æ¥åŒºåˆ†æä¾›å•†</li>
<li><strong>ç»Ÿä¸€æ¥å£</strong>ï¼šä¸Šå±‚ä¸šåŠ¡åªä¾èµ–æŠ½è±¡æ¥å£</li>
<li><strong>è‡ªå®šä¹‰ç«¯ç‚¹å…œåº•</strong>ï¼šè¦†ç›–æ‰€æœ‰é•¿å°¾åœºæ™¯</li>
</ol>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>LLM é¢†åŸŸå˜åŒ–å¤ªå¿«ï¼Œä»Šå¤©çš„æœ€ä¼˜é€‰æ‹©æ˜å¤©å¯èƒ½å°±ä¸æ˜¯äº†ã€‚SmartChat çš„å¤šæ¨¡å‹æ¶æ„ä¸æ˜¯è¿‡åº¦è®¾è®¡ï¼Œè€Œæ˜¯å¯¹ç°å®çš„åŠ¡å®åº”å¯¹ã€‚å¦‚æœä½ ä¹Ÿåœ¨åš AI åº”ç”¨ï¼Œå¼ºçƒˆå»ºè®®ä»ç¬¬ä¸€å¤©å°±åšå¥½ Provider æŠ½è±¡ã€‚</p>
<blockquote>
<p>ğŸ”— <strong>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsmartchat.nofx.asia%2F" target="_blank" title="https://smartchat.nofx.asia/" ref="nofollow noopener noreferrer">smartchat.nofx.asia/</a></strong>ï¼ŒMIT å¼€æºåè®®ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥è§£æ SmartChat çš„ RAG æ¶æ„è®¾è®¡ â€” å¦‚ä½•ç”¨ pgvector + æœ¬åœ°åµŒå…¥æ‰“é€ ä¼ä¸šçº§æ™ºèƒ½å®¢æœ]]></title>    <link>https://juejin.cn/post/7605848213602861102</link>    <guid>https://juejin.cn/post/7605848213602861102</guid>    <pubDate>2026-02-12T17:14:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605848213602861102" data-draft-id="7605769126271434798" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥è§£æ SmartChat çš„ RAG æ¶æ„è®¾è®¡ â€” å¦‚ä½•ç”¨ pgvector + æœ¬åœ°åµŒå…¥æ‰“é€ ä¼ä¸šçº§æ™ºèƒ½å®¢æœ"/> <meta itemprop="keywords" content="Agent,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-12T17:14:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¦é‡Œå¯»ç "/> <meta itemprop="url" content="https://juejin.cn/user/528241507974520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥è§£æ SmartChat çš„ RAG æ¶æ„è®¾è®¡ â€” å¦‚ä½•ç”¨ pgvector + æœ¬åœ°åµŒå…¥æ‰“é€ ä¼ä¸šçº§æ™ºèƒ½å®¢æœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/528241507974520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¦é‡Œå¯»ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T17:14:45.000Z" title="Thu Feb 12 2026 17:14:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ LLM åº”ç”¨è½åœ°çš„è¿‡ç¨‹ä¸­ï¼ŒRAGï¼ˆRetrieval-Augmented Generationï¼‰å·²ç»æˆä¸ºæœ€ä¸»æµçš„çŸ¥è¯†å¢å¼ºæ–¹æ¡ˆã€‚ä½†çœŸæ­£æŠŠ RAG åšå¥½å¹¶ä¸å®¹æ˜“â€”â€”åµŒå…¥æ¨¡å‹æ€ä¹ˆé€‰ï¼Ÿå‘é‡æ•°æ®åº“ç”¨å“ªä¸ªï¼Ÿæ–‡æ¡£æ€ä¹ˆåˆ‡åˆ†ï¼Ÿä¸­æ–‡åœºæ™¯æœ‰å“ªäº›å‘ï¼Ÿ</p>
<p>ä»Šå¤©é€šè¿‡å¼€æºé¡¹ç›® SmartChat çš„æºç ï¼Œæ·±å…¥æ‹†è§£ä¸€å¥—ç”Ÿäº§çº§ RAG æ¶æ„çš„è®¾è®¡æ€è·¯ã€‚</p>
<blockquote>
<p>ğŸ”— <strong>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsmartchat.nofx.asia%2F" target="_blank" title="https://smartchat.nofx.asia/" ref="nofollow noopener noreferrer">smartchat.nofx.asia/</a></strong></p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adb37d4883ab40f88cd31a69960fadfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKm6YeM5a-756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771521624&amp;x-signature=LzHmPRFdhHy7YhOubjJ2aQR3EbM%3D" alt="å¾®ä¿¡å›¾ç‰‡_20260212194717_45_236.png" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ã€RAG çš„æ ¸å¿ƒæµç¨‹</h2>
<p>RAG çš„æœ¬è´¨æ˜¯"å…ˆæ£€ç´¢ï¼Œå†ç”Ÿæˆ"ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·æé—® â†’ Embedding å‘é‡åŒ– â†’ å‘é‡æ•°æ®åº“æ£€ç´¢ â†’ å–å›ç›¸å…³æ–‡æ¡£ç‰‡æ®µ â†’ æ‹¼æ¥ Prompt â†’ LLM ç”Ÿæˆå›ç­”
</code></pre>
<p>SmartChat çš„å®ç°å®Œæ•´è¦†ç›–äº†è¿™æ¡é“¾è·¯ï¼Œå¹¶åœ¨æ¯ä¸ªç¯èŠ‚åšäº†å·¥ç¨‹åŒ–ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-2">äºŒã€åŒåµŒå…¥ç­–ç•¥ï¼šæœ¬åœ° vs è¿œç¨‹</h2>
<p>SmartChat æœ€æœ‰æ„æ€çš„è®¾è®¡ä¹‹ä¸€æ˜¯<strong>åŒåµŒå…¥ç­–ç•¥</strong>ï¼š</p>
<p><strong>æœ¬åœ°åµŒå…¥ï¼ˆé»˜è®¤ï¼‰ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ HuggingFace Transformers åœ¨æµè§ˆå™¨/Node ç«¯è¿è¡Œ</li>
<li>æ”¯æŒ <code>BGE-small-zh-v1.5</code>ï¼ˆä¸­æ–‡åœºæ™¯ï¼‰å’Œ <code>all-MiniLM-L6-v2</code>ï¼ˆè‹±æ–‡åœºæ™¯ï¼‰</li>
<li>é›¶æˆæœ¬ï¼Œæ— éœ€ API Keyï¼Œæ•°æ®ä¸å‡ºæœ¬åœ°</li>
</ul>
<p><strong>è¿œç¨‹åµŒå…¥ï¼ˆå¤‡é€‰ï¼‰ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨é€šä¹‰åƒé—® <code>text-embedding-v3</code>ï¼Œ512 ç»´å‘é‡</li>
<li>é€‚åˆéƒ¨ç½²åœ¨ Vercel ç­‰æ— æ³•è¿è¡Œæœ¬åœ°æ¨¡å‹çš„ç¯å¢ƒ</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åµŒå…¥æ¨¡å‹é€‰æ‹©é€»è¾‘</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateEmbedding</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span>, model: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">if</span> (model === <span class="hljs-string">'local-bge'</span> || model === <span class="hljs-string">'local-minilm'</span>) {
    <span class="hljs-comment">// HuggingFace Transformers æœ¬åœ°æ¨ç†</span>
    <span class="hljs-keyword">const</span> pipe = <span class="hljs-keyword">await</span> <span class="hljs-title function_">pipeline</span>(<span class="hljs-string">'feature-extraction'</span>, modelName);
    <span class="hljs-keyword">const</span> output = <span class="hljs-keyword">await</span> <span class="hljs-title function_">pipe</span>(text, { <span class="hljs-attr">pooling</span>: <span class="hljs-string">'mean'</span>, <span class="hljs-attr">normalize</span>: <span class="hljs-literal">true</span> });
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(output.<span class="hljs-property">data</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è¿œç¨‹ API è°ƒç”¨</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> openai.<span class="hljs-property">embeddings</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">model</span>: <span class="hljs-string">'text-embedding-v3'</span>,
      <span class="hljs-attr">input</span>: text,
      <span class="hljs-attr">dimensions</span>: <span class="hljs-number">512</span>
    });
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>].<span class="hljs-property">embedding</span>;
  }
}
</code></pre>
<p>è¿™ç§è®¾è®¡çš„å¥½å¤„æ˜¯ï¼šå¼€å‘é˜¶æ®µç”¨æœ¬åœ°æ¨¡å‹é›¶æˆæœ¬è°ƒè¯•ï¼Œç”Ÿäº§ç¯å¢ƒå¯ä»¥æŒ‰éœ€åˆ‡æ¢åˆ°è¿œç¨‹æ¨¡å‹ã€‚</p>
<h2 data-id="heading-3">ä¸‰ã€pgvectorï¼šä¸ºä»€ä¹ˆä¸ç”¨ Pinecone æˆ– Milvusï¼Ÿ</h2>
<p>SmartChat é€‰æ‹© Supabase + pgvector ä½œä¸ºå‘é‡å­˜å‚¨ï¼Œè€Œä¸æ˜¯ä¸“ç”¨å‘é‡æ•°æ®åº“ï¼ŒåŸå› å¾ˆåŠ¡å®ï¼š</p>









































<table><thead><tr><th>ç»´åº¦</th><th>pgvector</th><th>Pinecone</th><th>Milvus</th></tr></thead><tbody><tr><td>éƒ¨ç½²å¤æ‚åº¦</td><td>é›¶ï¼ˆSupabase è‡ªå¸¦ï¼‰</td><td>éœ€è¦é¢å¤–æœåŠ¡</td><td>éœ€è¦ç‹¬ç«‹éƒ¨ç½²</td></tr><tr><td>æˆæœ¬</td><td>Supabase å…è´¹é¢åº¦å†…</td><td>æŒ‰é‡ä»˜è´¹</td><td>è‡ªå»ºæœåŠ¡å™¨</td></tr><tr><td>å…³ç³»æŸ¥è¯¢</td><td>åŸç”Ÿ SQL JOIN</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>é€‚ç”¨è§„æ¨¡</td><td>ä¸­å°è§„æ¨¡ï¼ˆ&lt;100ä¸‡å‘é‡ï¼‰</td><td>å¤§è§„æ¨¡</td><td>å¤§è§„æ¨¡</td></tr><tr><td>ç”Ÿæ€æ•´åˆ</td><td>ä¸ä¸šåŠ¡æ•°æ®åŒåº“</td><td>ç‹¬ç«‹ç³»ç»Ÿ</td><td>ç‹¬ç«‹ç³»ç»Ÿ</td></tr></tbody></table>
<p>å¯¹äºæ™ºèƒ½å®¢æœåœºæ™¯ï¼ŒçŸ¥è¯†åº“é€šå¸¸åœ¨å‡ åƒåˆ°å‡ ä¸‡æ¡æ–‡æ¡£ç‰‡æ®µï¼Œpgvector å®Œå…¨å¤Ÿç”¨ï¼Œè€Œä¸”æœ€å¤§çš„ä¼˜åŠ¿æ˜¯<strong>å‘é‡æ•°æ®å’Œä¸šåŠ¡æ•°æ®åœ¨åŒä¸€ä¸ªæ•°æ®åº“é‡Œ</strong>ï¼Œä¸éœ€è¦ç»´æŠ¤é¢å¤–çš„åŸºç¡€è®¾æ–½ã€‚</p>
<p>SmartChat ä½¿ç”¨çš„å‘é‡æ£€ç´¢å‡½æ•°ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> match_documents(
  query_embedding vector(<span class="hljs-number">512</span>),
  match_count <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">5</span>,
  filter_bot_id uuid <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>
) <span class="hljs-keyword">RETURNS</span> <span class="hljs-keyword">TABLE</span> (
  id uuid,
  content text,
  metadata jsonb,
  similarity <span class="hljs-type">float</span>
)
<span class="hljs-keyword">LANGUAGE</span> plpgsql <span class="hljs-keyword">AS</span> $$
<span class="hljs-keyword">BEGIN</span>
  <span class="hljs-keyword">RETURN</span> QUERY
  <span class="hljs-keyword">SELECT</span>
    dc.id,
    dc.content,
    dc.metadata,
    <span class="hljs-number">1</span> <span class="hljs-operator">-</span> (dc.embedding <span class="hljs-operator">&lt;=&gt;</span> query_embedding) <span class="hljs-keyword">as</span> similarity
  <span class="hljs-keyword">FROM</span> document_chunks dc
  <span class="hljs-keyword">WHERE</span> dc.bot_id <span class="hljs-operator">=</span> filter_bot_id
  <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> dc.embedding <span class="hljs-operator">&lt;=&gt;</span> query_embedding
  LIMIT match_count;
<span class="hljs-keyword">END</span>;
$$;
</code></pre>
<p>ä½¿ç”¨ä½™å¼¦è·ç¦» <code>&lt;=&gt;</code> æ“ä½œç¬¦ï¼Œé…åˆ IVFFlat ç´¢å¼•åŠ é€Ÿæ£€ç´¢ã€‚</p>
<h2 data-id="heading-4">å››ã€CJK æ™ºèƒ½åˆ†å—ç­–ç•¥</h2>
<p>æ–‡æ¡£åˆ†å—æ˜¯ RAG ä¸­æœ€å®¹æ˜“è¢«å¿½è§†ä½†å½±å“å·¨å¤§çš„ç¯èŠ‚ã€‚SmartChat é’ˆå¯¹ä¸­æ—¥éŸ©æ–‡æœ¬åšäº†ä¸“é—¨ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">splitTextIntoChunks</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span>, chunkSize = <span class="hljs-number">500</span>, overlap = <span class="hljs-number">50</span></span>) {
  <span class="hljs-comment">// æ£€æµ‹æ˜¯å¦åŒ…å« CJK å­—ç¬¦</span>
  <span class="hljs-keyword">const</span> isCJK = <span class="hljs-regexp">/[\u4e00-\u9fff\u3040-\u309f\u30a0-\u30ff]/</span>.<span class="hljs-title function_">test</span>(text);

  <span class="hljs-keyword">if</span> (isCJK) {
    <span class="hljs-comment">// ä¸­æ–‡æŒ‰å­—ç¬¦æ•°åˆ†å—ï¼Œä¼˜å…ˆåœ¨å¥å·ã€é—®å·ã€æ„Ÿå¹å·å¤„æ–­å¼€</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">splitBySentenceBoundary</span>(text, chunkSize, overlap);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è‹±æ–‡æŒ‰ token æ•°åˆ†å—ï¼Œä¼˜å…ˆåœ¨æ®µè½å’Œå¥å­è¾¹ç•Œæ–­å¼€</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">splitByTokenBoundary</span>(text, chunkSize, overlap);
  }
}
</code></pre>
<p>å…³é”®è®¾è®¡ç‚¹ï¼š</p>
<ul>
<li><strong>CJK æ£€æµ‹</strong>ï¼šè‡ªåŠ¨è¯†åˆ«æ–‡æœ¬è¯­è¨€ï¼Œé€‰æ‹©ä¸åŒçš„åˆ†å—ç­–ç•¥</li>
<li><strong>å¥å­è¾¹ç•Œä¼˜å…ˆ</strong>ï¼šé¿å…åœ¨å¥å­ä¸­é—´æˆªæ–­ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´æ€§</li>
<li><strong>é‡å çª—å£</strong>ï¼šç›¸é‚»å—ä¹‹é—´æœ‰ 50 å­—ç¬¦é‡å ï¼Œé˜²æ­¢å…³é”®ä¿¡æ¯è¢«åˆ‡æ–­</li>
<li><strong>æ‰¹é‡æ’å…¥</strong>ï¼šæ¯ 10 ä¸ªå—ä¸€æ‰¹å†™å…¥æ•°æ®åº“ï¼Œé¿å… payload è¿‡å¤§</li>
</ul>
<h2 data-id="heading-5">äº”ã€æ£€ç´¢ä¸ç”Ÿæˆçš„è¡”æ¥</h2>
<p>æ£€ç´¢åˆ°ç›¸å…³æ–‡æ¡£ç‰‡æ®µåï¼ŒSmartChat å°†å…¶æ‹¼æ¥åˆ° Prompt ä¸­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> systemPrompt = <span class="hljs-string">`<span class="hljs-subst">${bot.systemPrompt}</span>

ä»¥ä¸‹æ˜¯ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢åˆ°çš„ç›¸å…³ä¿¡æ¯ï¼Œè¯·åŸºäºè¿™äº›ä¿¡æ¯å›ç­”ç”¨æˆ·é—®é¢˜ï¼š

<span class="hljs-subst">${relevantChunks.map(chunk =&gt; chunk.content).join(<span class="hljs-string">'\n\n'</span>)}</span>

å¦‚æœä»¥ä¸Šä¿¡æ¯ä¸è¶³ä»¥å›ç­”é—®é¢˜ï¼Œè¯·å¦‚å®å‘ŠçŸ¥ç”¨æˆ·ã€‚`</span>;
</code></pre>
<p>åŒæ—¶ï¼Œå¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†å–æœ€è¿‘ 10 æ¡æ¶ˆæ¯ï¼Œåœ¨ä¿æŒè¿è´¯æ€§å’Œæ§åˆ¶ token æ¶ˆè€—ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2aff8d6b1c8c4407abb79acad3490bd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKm6YeM5a-756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771521624&amp;x-signature=Sa0V1gRYoKtcgod3fg2eZTTyP2M%3D" alt="å¾®ä¿¡å›¾ç‰‡_20260212194801_50_236.png" loading="lazy"/></p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>SmartChat çš„ RAG æ¶æ„è™½ç„¶ä¸å¤æ‚ï¼Œä½†æ¯ä¸ªç¯èŠ‚éƒ½åšäº†åŠ¡å®çš„å·¥ç¨‹é€‰æ‹©ï¼šæœ¬åœ°åµŒå…¥é™ä½æˆæœ¬ã€pgvector ç®€åŒ–æ¶æ„ã€CJK åˆ†å—ä¿è¯ä¸­æ–‡è´¨é‡ã€æ‰¹é‡å†™å…¥ä¿è¯ç¨³å®šæ€§ã€‚è¿™å¥—æ–¹æ¡ˆç‰¹åˆ«é€‚åˆä¸­å°å›¢é˜Ÿå¿«é€Ÿè½åœ° AI å®¢æœåœºæ™¯ã€‚</p>
<blockquote>
<p>ğŸ”— <strong>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsmartchat.nofx.asia%2F" target="_blank" title="https://smartchat.nofx.asia/" ref="nofollow noopener noreferrer">smartchat.nofx.asia/</a></strong>ï¼ŒMIT å¼€æºåè®®ï¼Œæ¬¢è¿ Star å’Œè´¡çŒ®ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼š å¾ªç¯æ§åˆ¶ (Loop Control)]]></title>    <link>https://juejin.cn/post/7605769126271549486</link>    <guid>https://juejin.cn/post/7605769126271549486</guid>    <pubDate>2026-02-13T00:24:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605769126271549486" data-draft-id="7605817795627974706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€  Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼š å¾ªç¯æ§åˆ¶ (Loop Control) "/> <meta itemprop="keywords" content="Agent,åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T00:24:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ZaneAI"/> <meta itemprop="url" content="https://juejin.cn/user/186266444380203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€  Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼š å¾ªç¯æ§åˆ¶ (Loop Control) 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/186266444380203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ZaneAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T00:24:52.000Z" title="Fri Feb 13 2026 00:24:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€å‘å¤æ‚çš„ AI Agent æ—¶ï¼ŒAgent é€šå¸¸éœ€è¦ç»è¿‡â€œæ€è€ƒ -&gt; è°ƒç”¨å·¥å…· -&gt; è§‚å¯Ÿç»“æœ -&gt; å†æ€è€ƒâ€çš„å¤šæ¬¡å¾ªç¯æ‰èƒ½å®Œæˆä»»åŠ¡ã€‚å¦‚ä½•ä¼˜é›…åœ°æ§åˆ¶è¿™ä¸ªå¾ªç¯ï¼ˆä¾‹å¦‚ä½•æ—¶åœæ­¢ã€æ¯ä¸€æ­¥å¦‚ä½•åŠ¨æ€è°ƒæ•´å‚æ•°ï¼‰æ˜¯æ„å»ºå¥å£® Agent çš„å…³é”®ã€‚</p>
<p>æœ¬æ–‡å°†åŸºäº Vercel AI SDK çš„æœ€æ–°ç‰¹æ€§ï¼Œå¸¦ä½ æ·±å…¥ç©è½¬ Agent çš„<strong>å¾ªç¯æ§åˆ¶ (Loop Control)</strong> ã€‚ä¸ºäº†è´´åˆå›½å†…å¼€å‘è€…çš„å®é™…åœºæ™¯ï¼Œæœ¬æ–‡çš„æ‰€æœ‰æ ·ä¾‹ä»£ç å‡é‡‡ç”¨<strong>é˜¿é‡Œé€šä¹‰åƒé—®æœ€æ–°æ¨¡å‹ (<code>qwen-max</code>)</strong> è¿›è¡Œæ¼”ç¤ºï¼</p>
<h2 data-id="heading-0">ğŸ›  ç¯å¢ƒä¸æ¨¡å‹å‡†å¤‡</h2>
<p>é€šä¹‰åƒé—®æä¾›äº†å…¨é¢å…¼å®¹ OpenAI çš„ API ç«¯ç‚¹ï¼Œå› æ­¤åœ¨ Vercel AI SDK ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>@ai-sdk/openai</code> æ¥æ— ç¼æ¥å…¥ï¼š</p>
<p>Bash</p>
<pre><code class="hljs language-bash" lang="bash">npm install ai @ai-sdk/openai zod
</code></pre>
<p>åœ¨ä»£ç ä¸­åˆå§‹åŒ– Qwen æ¨¡å‹å®ä¾‹ï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-php" lang="php">import { createOpenAI } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ai-sdk/openai'</span>;

<span class="hljs-comment">// é…ç½®é˜¿é‡Œç™¾ç‚¼ (DashScope) çš„å…¼å®¹ç«¯ç‚¹</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">qwen</span> = <span class="hljs-title function_ invoke__">createOpenAI</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://dashscope.aliyuncs.com/compatible-mode/v1'</span>,
  <span class="hljs-attr">apiKey</span>: process.env.DASHSCOPE_API_KEY, 
});

<span class="hljs-comment">// åœ¨åç»­çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ç»Ÿä¸€ä½¿ç”¨ qwen('qwen-max')</span>
</code></pre>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ æ ¸å¿ƒæ¦‚å¿µï¼šä»€ä¹ˆæ˜¯ Loop Controlï¼Ÿ</h2>
<p>åœ¨ä½¿ç”¨ <code>ToolLoopAgent</code> ç¼–æ’ Agent æ—¶ï¼Œå¾ªç¯ä¼šæŒç»­è¿›è¡Œï¼Œç›´åˆ°æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶æ‰ä¼šåœæ­¢ï¼š</p>
<ol>
<li>æ¨¡å‹è¿”å›äº†é™¤ <code>tool-calls</code>ï¼ˆå·¥å…·è°ƒç”¨ï¼‰ä¹‹å¤–çš„å®ŒæˆåŸå› ã€‚</li>
<li>è°ƒç”¨çš„å·¥å…·<strong>æ²¡æœ‰</strong>é…å¤‡ <code>execute</code>ï¼ˆæ‰§è¡Œï¼‰å‡½æ•°ã€‚</li>
<li>å·¥å…·è°ƒç”¨è§¦å‘äº†éœ€è¦äººå·¥å®¡æ‰¹çš„æ‹¦æˆªã€‚</li>
<li><strong>æ»¡è¶³äº†å¼€å‘è€…å®šä¹‰çš„åœæ­¢æ¡ä»¶ (Stop Condition)</strong> ã€‚</li>
</ol>
<p>Vercel AI SDK æä¾›äº†ä¸¤ä¸ªæå…¶å¼ºå¤§çš„å‚æ•°æ¥æ§åˆ¶è¿™ä¸ªå†…éƒ¨å¾ªç¯ï¼š</p>
<ul>
<li><strong><code>stopWhen</code></strong>: å†³å®šä½•æ—¶ç»ˆæ­¢æ‰§è¡Œã€‚</li>
<li><strong><code>prepareStep</code></strong>: åœ¨æ¯ä¸€æ­¥æ‰§è¡Œ<strong>å‰</strong>ï¼ŒåŠ¨æ€ä¿®æ”¹è¿è¡Œè®¾ç½®ï¼ˆå¦‚åˆ‡æ¢æ¨¡å‹ã€æ§åˆ¶å·¥å…·ç™½åå•ã€ç²¾ç®€ä¸Šä¸‹æ–‡ç­‰ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">äºŒã€ åœæ­¢æ¡ä»¶ (Stop Conditions)</h2>
<p><code>stopWhen</code> å‚æ•°æ§åˆ¶ Agent åœ¨æ‹¿åˆ°å·¥å…·æ‰§è¡Œç»“æœåæ˜¯å¦ç»§ç»­ä¸‹ä¸€æ­¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒAgent æœ€å¤šæ‰§è¡Œ 20 æ­¥ï¼ˆå³å†…ç½®çš„ <code>stepCountIs(20)</code>ï¼‰ã€‚</p>
<h3 data-id="heading-3">1. ç»„åˆå†…ç½®æ¡ä»¶</h3>
<p>AI SDK æä¾›äº†ç°æˆçš„åœæ­¢æ¡ä»¶ï¼Œä½ å¯ä»¥å°†å®ƒä»¬ç»„åˆåœ¨æ•°ç»„ä¸­ï¼Œ<strong>æ»¡è¶³å…¶ä¸€å³åœæ­¢</strong>ï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ToolLoopAgent</span>, stepCountIs, hasToolCall } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;
<span class="hljs-comment">// å¼•å…¥ä¸Šé¢é…ç½®çš„ qwen</span>
<span class="hljs-comment">// import { qwen } from './qwen-setup'; </span>

<span class="hljs-keyword">const</span> agent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolLoopAgent</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-title function_">qwen</span>(<span class="hljs-string">'qwen-max'</span>),
  <span class="hljs-attr">tools</span>: {
    <span class="hljs-comment">// ä½ çš„å·¥å…·é›†ï¼Œä¾‹å¦‚ search ç­‰</span>
  },
  <span class="hljs-attr">stopWhen</span>: [
    <span class="hljs-title function_">stepCountIs</span>(<span class="hljs-number">20</span>),          <span class="hljs-comment">// å…œåº•ç­–ç•¥ï¼šæœ€å¤šæ‰§è¡Œ 20 æ­¥ï¼Œé˜²æ­¢æ­»å¾ªç¯</span>
    <span class="hljs-title function_">hasToolCall</span>(<span class="hljs-string">'someTool'</span>),  <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘ï¼šä¸€æ—¦è°ƒç”¨äº† 'someTool' å·¥å…·å°±ç«‹åˆ»åœæ­¢</span>
  ],
});

<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> agent.<span class="hljs-title function_">generate</span>({
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">'è¯·è°ƒç ”å¹¶åˆ†æ 2026 å¹´å‰ç«¯å¼€å‘è¶‹åŠ¿'</span>,
});
</code></pre>
<h3 data-id="heading-4">2. ç¼–å†™è‡ªå®šä¹‰æ¡ä»¶ (Custom Conditions)</h3>
<p>é¢å¯¹å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œä½ å¯ä»¥è·å–åˆ°å†å²æ‰€æœ‰æ­¥éª¤ <code>steps</code>ï¼Œç¼–å†™è‡ªå®šä¹‰çš„åœæ­¢é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®æ¶ˆè€—çš„ Token æˆæœ¬æ¥â€œç†”æ–­â€ Agentï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ToolLoopAgent</span>, <span class="hljs-title class_">StopCondition</span>, <span class="hljs-title class_">ToolSet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;

<span class="hljs-keyword">const</span> tools = { <span class="hljs-comment">/* ... */</span> } satisfies <span class="hljs-title class_">ToolSet</span>;

<span class="hljs-comment">// è‡ªå®šä¹‰æ¡ä»¶ï¼šå½“ Token ä¼°ç®—æˆæœ¬è¶…è¿‡ $0.50 æ—¶å¼ºåˆ¶åœæ­¢</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">budgetExceeded</span>: <span class="hljs-title class_">StopCondition</span>&lt;<span class="hljs-keyword">typeof</span> tools&gt; = <span class="hljs-function">(<span class="hljs-params">{ steps }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> totalUsage = steps.<span class="hljs-title function_">reduce</span>(
    <span class="hljs-function">(<span class="hljs-params">acc, step</span>) =&gt;</span> ({
      <span class="hljs-attr">inputTokens</span>: acc.<span class="hljs-property">inputTokens</span> + (step.<span class="hljs-property">usage</span>?.<span class="hljs-property">inputTokens</span> ?? <span class="hljs-number">0</span>),
      <span class="hljs-attr">outputTokens</span>: acc.<span class="hljs-property">outputTokens</span> + (step.<span class="hljs-property">usage</span>?.<span class="hljs-property">outputTokens</span> ?? <span class="hljs-number">0</span>),
    }),
    { <span class="hljs-attr">inputTokens</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">outputTokens</span>: <span class="hljs-number">0</span> },
  );
  
  <span class="hljs-comment">// æŒ‰ç…§è‡ªå®šä¹‰æ±‡ç‡æˆ– token ä»·æ ¼ä¼°ç®—</span>
  <span class="hljs-keyword">const</span> costEstimate = (totalUsage.<span class="hljs-property">inputTokens</span> * <span class="hljs-number">0.01</span> + totalUsage.<span class="hljs-property">outputTokens</span> * <span class="hljs-number">0.03</span>) / <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">return</span> costEstimate &gt; <span class="hljs-number">0.5</span>; 
};

<span class="hljs-keyword">const</span> agent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolLoopAgent</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-title function_">qwen</span>(<span class="hljs-string">'qwen-max'</span>),
  tools,
  <span class="hljs-attr">stopWhen</span>: budgetExceeded, 
});
</code></pre>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ åŠ¨æ€å‡†å¤‡æ­¥éª¤ (Prepare Step) ç¥å™¨</h2>
<p><code>prepareStep</code> å›è°ƒä¼šåœ¨å¾ªç¯çš„<strong>æ¯ä¸€æ­¥æ­£å¼å‘èµ·å¤§æ¨¡å‹è¯·æ±‚ä¹‹å‰</strong>è¿è¡Œã€‚åˆ©ç”¨å®ƒï¼Œä½ å¯ä»¥å®ç°é«˜åº¦æ™ºèƒ½çš„åŠ¨æ€è¡Œä¸ºã€‚</p>
<h3 data-id="heading-6">1. åŠ¨æ€æ¨¡å‹åˆ‡æ¢ (Dynamic Model Selection)</h3>
<p>å‰å‡ æ­¥ç®€å•çš„èµ„æ–™æ£€ç´¢æˆ‘ä»¬å¯ä»¥ç”¨è½»é‡çº§æ¨¡å‹çœé’±æé€Ÿï¼Œåé¢å¤æ‚çš„é€»è¾‘æ¨ç†å†æ— ç¼åˆ‡æ¢åˆ° <code>qwen-max</code>ï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> agent = <span class="hljs-keyword">new</span> ToolLoopAgent({
  model: qwen(<span class="hljs-string">'qwen-turbo'</span>), <span class="hljs-comment">// åˆå§‹é»˜è®¤ä½¿ç”¨è¾ƒå¿«/è¾ƒä¾¿å®œçš„æ¨¡å‹</span>
  tools: { <span class="hljs-comment">/* ... */</span> },
  prepareStep: <span class="hljs-keyword">async</span> ({ stepNumber, messages }) =&gt; {
    <span class="hljs-comment">// å¦‚æœå¾ªç¯è¶…è¿‡ 2 æ­¥ï¼Œä¸”ä¸Šä¸‹æ–‡æ¶ˆæ¯å˜é•¿ï¼Œè¯´æ˜ä»»åŠ¡å˜å¾—å¤æ‚</span>
    <span class="hljs-comment">// åŠ¨æ€è¿”å›æ–°çš„é…ç½®ï¼Œæ— ç¼åˆ‡æ¢åˆ°æœ€å¼ºçš„ qwen-max æ¨¡å‹</span>
    <span class="hljs-keyword">if</span> (stepNumber &gt; <span class="hljs-number">2</span> &amp;&amp; messages.length &gt; <span class="hljs-number">10</span>) {
      <span class="hljs-keyword">return</span> {
        model: qwen(<span class="hljs-string">'qwen-max'</span>),
      };
    }
    <span class="hljs-comment">// è¿”å›ç©ºå¯¹è±¡åˆ™ç»§ç»­ä½¿ç”¨å½“å‰é…ç½®</span>
    <span class="hljs-keyword">return</span> {};
  },
});
</code></pre>
<h3 data-id="heading-7">2. é˜¶æ®µæ€§å·¥å…·åˆ†é… (Tool Selection)</h3>
<p>åœ¨å¤æ‚ SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼‰ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶ Agent åœ¨ä¸åŒé˜¶æ®µèƒ½ä½¿ç”¨çš„å·¥å…·ï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin">  prepareStep: async ({ stepNumber }) =&gt; {
    <span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µï¼šæ£€ç´¢èµ„æ–™ (ç¬¬ 0-2 æ­¥)</span>
    <span class="hljs-keyword">if</span> (stepNumber &lt;= <span class="hljs-number">2</span>) {
      <span class="hljs-keyword">return</span> {
        activeTools: [<span class="hljs-string">'search'</span>],    <span class="hljs-comment">// åªå¼€æ”¾æœç´¢å·¥å…·</span>
        toolChoice: <span class="hljs-string">'required'</span>,     <span class="hljs-comment">// å¼ºåˆ¶è¦æ±‚å¤§æ¨¡å‹å¿…é¡»è°ƒç”¨å·¥å…·</span>
      };
    }
    
    <span class="hljs-comment">// ç¬¬äºŒé˜¶æ®µï¼šæ•°æ®åˆ†æ (ç¬¬ 3-5 æ­¥)</span>
    <span class="hljs-keyword">if</span> (stepNumber &lt;= <span class="hljs-number">5</span>) {
      <span class="hljs-keyword">return</span> { activeTools: [<span class="hljs-string">'analyze'</span>] };
    }
    
    <span class="hljs-comment">// ç¬¬ä¸‰é˜¶æ®µï¼šæ€»ç»“æ±‡æŠ¥ (ç¬¬ 6 æ­¥ä»¥ä¸Š)</span>
    <span class="hljs-keyword">return</span> {
      activeTools: [<span class="hljs-string">'summarize'</span>],
      toolChoice: { type: <span class="hljs-string">'tool'</span>, toolName: <span class="hljs-string">'summarize'</span> }, <span class="hljs-comment">// å¼ºåˆ¶å¤§æ¨¡å‹è°ƒç”¨ç‰¹å®šçš„æ€»ç»“å·¥å…·</span>
    };
  }
</code></pre>
<h3 data-id="heading-8">3. é˜²æ­¢ä¸Šä¸‹æ–‡æ’‘çˆ† (Context Management)</h3>
<p>é•¿æ—¶é—´è¿è¡Œçš„ Agent å®¹æ˜“è¶…å‡ºæ¨¡å‹æ”¯æŒçš„æœ€å¤§ Token é•¿åº¦ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡ŒåŠ¨æ€è£å‰ªä¼ é€’ç»™å¤§æ¨¡å‹çš„æ¶ˆæ¯ï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin">  prepareStep: async ({ messages }) =&gt; {
    <span class="hljs-comment">// å¦‚æœå¯¹è¯è¶…è¿‡ 20 æ¡ï¼Œè¿›è¡Œæ»‘åŠ¨çª—å£è£å‰ª</span>
    <span class="hljs-keyword">if</span> (messages.length &gt; <span class="hljs-number">20</span>) {
      <span class="hljs-keyword">return</span> {
        messages: [
          messages[<span class="hljs-number">0</span>], <span class="hljs-comment">// æ°¸è¿œä¿ç•™ç¬¬ä¸€æ¡ System Prompt/User Instruction</span>
          ...messages.slice(-<span class="hljs-number">10</span>), <span class="hljs-comment">// åªä¿ç•™æœ€è¿‘çš„ 10 æ¡äº¤äº’è®°å½•</span>
        ],
      };
    }
    <span class="hljs-keyword">return</span> {};
  }
</code></pre>
<hr/>
<h2 data-id="heading-9">å››ã€ å¼ºåˆ¶å·¥å…·è°ƒç”¨ (Forced Tool Calling) æ¨¡å¼</h2>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ› Agent ç”¨è‡ªç„¶è¯­è¨€â€œæ°´å­—æ•°â€ï¼Œè€Œæ˜¯<strong>å¿…é¡»</strong>é€šè¿‡å·¥å…·è¾“å‡ºæ ‡å‡†åŒ–çš„ JSON ç»“æ„ç»“æœã€‚</p>
<p><strong>è§£æ³•ï¼š</strong> ç»“åˆ <code>toolChoice: 'required'</code>ï¼Œå¹¶è®¾è®¡ä¸€ä¸ª<strong>ä¸åŒ…å«</strong> <code>execute</code> å‡½æ•°çš„ <code>done</code> è™šæ‹Ÿå·¥å…·ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>åŸç†ï¼š</strong> å› ä¸ºæ¨¡å‹è¢«å¼ºåˆ¶è¦æ±‚è°ƒç”¨å·¥å…·ï¼Œè€Œå½“å®ƒè°ƒç”¨äº†æ²¡æœ‰æ‰§è¡Œå‡½æ•°çš„ <code>done</code> å·¥å…·æ—¶ï¼ŒAI SDK å†…éƒ¨å› ä¸ºæ— ä»£ç å¯æ‰§è¡Œï¼Œä¼šè§¦å‘â€œå¾ªç¯ä¸­æ–­â€æ¡ä»¶ï¼Œä»è€Œå®Œç¾ç»ˆæ­¢ Agentï¼Œå¹¶å°†ç»“æ„åŒ–å‚æ•°åŸå°ä¸åŠ¨åœ°è¿”å›ç»™ä½ ï¼</p>
</blockquote>
<p>TypeScript</p>
<pre><code class="hljs language-php" lang="php">import { ToolLoopAgent, tool } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;
import { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">agent</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolLoopAgent</span>({
  model: <span class="hljs-title function_ invoke__">qwen</span>(<span class="hljs-string">'qwen-max'</span>),
  tools: {
    search: searchTool,
    analyze: analyzeTool,
    done: <span class="hljs-title function_ invoke__">tool</span>({
      <span class="hljs-attr">description</span>: <span class="hljs-string">'å½“ä½ å®Œæˆæ‰€æœ‰å·¥ä½œåï¼Œè°ƒç”¨æ­¤å·¥å…·è¾“å‡ºæœ€ç»ˆç»“æœ'</span>,
      <span class="hljs-attr">inputSchema</span>: z.<span class="hljs-keyword">object</span>({
        <span class="hljs-attr">answer</span>: z.<span class="hljs-keyword">string</span>().<span class="hljs-title function_ invoke__">describe</span>(<span class="hljs-string">'æœ€ç»ˆçš„åˆ†ææŠ¥å‘Š'</span>),
        confidence: z.<span class="hljs-title function_ invoke__">number</span>().<span class="hljs-title function_ invoke__">describe</span>(<span class="hljs-string">'å¯ä¿¡åº¦è¯„åˆ† 0-1'</span>),
      }),
      <span class="hljs-comment">// æ³¨æ„æ ¸å¿ƒæŠ€å·§ï¼šè¿™é‡Œç»å¯¹ä¸å†™ execute å‡½æ•°ï¼</span>
    }),
  },
  toolChoice: <span class="hljs-string">'required'</span>, <span class="hljs-comment">// å¼ºåˆ¶æ¯ä¸€æ­¥éƒ½ä¸èƒ½è¾“å‡ºåºŸè¯ï¼Œå¿…é¡»ç”¨å·¥å…·</span>
});

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">result</span> = await agent.<span class="hljs-title function_ invoke__">generate</span>({
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">'è¯·ç»¼åˆåˆ†æè¿™ä»½æ•°æ®ï¼Œå¹¶åœ¨å®Œæˆåä½¿ç”¨ done å·¥å…·æäº¤æœ€ç»ˆæŠ¥å‘Šã€‚'</span>,
});

<span class="hljs-comment">// ä» staticToolCalls (æœªè¢«æ‰§è¡Œçš„å·¥å…·è°ƒç”¨åˆ—è¡¨) ä¸­æå–å‡ºæœ€ç»ˆç­”æ¡ˆ</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">finalToolCall</span> = result.staticToolCalls[<span class="hljs-number">0</span>]; 
<span class="hljs-keyword">if</span> (finalToolCall?.toolName === <span class="hljs-string">'done'</span>) {
  console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"æœ€ç»ˆæŠ¥å‘Š:"</span>, finalToolCall.input.answer);
  console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"å¯ä¿¡åº¦:"</span>, finalToolCall.input.confidence);
}
</code></pre>
<hr/>
<h2 data-id="heading-10">äº”ã€ æ‰‹åŠ¨å¾ªç¯æ§åˆ¶ (Manual Loop Control)</h2>
<p>å¦‚æœä½ å‘ç° <code>ToolLoopAgent</code> çš„å£°æ˜å¼ API ä¾ç„¶æ— æ³•æ»¡è¶³æä¸ºå¤æ‚çš„å®šåˆ¶éœ€æ±‚ï¼Œä½ å¯ä»¥é€€å›åˆ° AI SDK çš„åº•å±‚ï¼Œä½¿ç”¨ <code>generateText</code> æ‰‹åŠ¨å†™ä¸€ä¸ª <code>while</code> å¾ªç¯ã€‚è¿™ä¸ºä½ æä¾›äº† 100% çš„åº•å±‚æ§åˆ¶æµæŒæ§åŠ›ï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> { generateText, ModelMessage } from <span class="hljs-string">'ai'</span>;

<span class="hljs-type">const</span> messages: ModelMessage[] = [{ role: <span class="hljs-string">'user'</span>, content: <span class="hljs-string">'åˆ†æå¹¶è§£å†³è¿™ä¸ªç³»ç»Ÿ Bug...'</span> }];
let step = <span class="hljs-number">0</span>;
<span class="hljs-type">const</span> maxSteps = <span class="hljs-number">10</span>;

<span class="hljs-keyword">while</span> (step &lt; maxSteps) {
  <span class="hljs-type">const</span> result = await <span class="hljs-built_in">generateText</span>({
    model: <span class="hljs-built_in">qwen</span>(<span class="hljs-string">'qwen-max'</span>),
    messages,
    tools: {
      <span class="hljs-comment">// åœ¨è¿™é‡ŒæŒ‚è½½ä½ çš„å·¥å…·</span>
    },
  });

  <span class="hljs-comment">// å°†å½“å‰è¿™ä¸€æ­¥çš„äº¤äº’ç»“æœï¼ˆåŒ…å« assistant å›å¤ã€å·¥å…·è°ƒç”¨ç»“æœç­‰ï¼‰è¿½åŠ åˆ°ä¸Šä¸‹æ–‡æ± </span>
  messages.<span class="hljs-built_in">push</span>(...result.response.messages);

  <span class="hljs-comment">// å¦‚æœæ¨¡å‹ç›´æ¥ç”Ÿæˆäº†æœ€ç»ˆç»“è®ºæ–‡æœ¬ï¼ˆå¹¶æ²¡æœ‰ç»§ç»­è°ƒç”¨å·¥å…·ï¼‰ï¼Œåˆ™è®¤ä¸ºæ•´ä¸ªæ€è€ƒé“¾æ¡å·²é—­ç¯</span>
  <span class="hljs-keyword">if</span> (result.text) {
    <span class="hljs-keyword">break</span>; 
  }

  step++;
}

console.<span class="hljs-built_in">log</span>(<span class="hljs-string">"ä»»åŠ¡å®Œæˆï¼Œæœ€ç»ˆè¾“å‡º:"</span>, messages[messages.length - <span class="hljs-number">1</span>].content);
</code></pre>
<hr/>
<h2 data-id="heading-11">ç»“è¯­</h2>
<p>Vercel AI SDK çš„ Loop Control ä¸ºæ„å»ºå¤æ‚çš„ Agent èµ‹äºˆäº†æå¤§çš„çµæ´»æ€§å’Œå·¥ç¨‹åŒ–èƒ½åŠ›ï¼š</p>
<ol>
<li><strong><code>stopWhen</code></strong> è®©ä½ å¯ä»¥ç²¾å‡†å®šä¹‰é€€å‡ºæ¡ä»¶ï¼Œé¿å…æ­»å¾ªç¯å’Œå¤©ä»· API è´¦å•ã€‚</li>
<li><strong><code>prepareStep</code></strong> æ˜¯å®ç° Agent â€œåŠ¨æ€è¿›åŒ–â€çš„å…³é”®ï¼Œå¯æŒ‰éœ€åˆ‡æ¢æ¨¡å‹é…ç½®å’Œåˆ†é…å·¥å…·ç™½åå•ã€‚</li>
<li>åˆ›æ–°çš„<strong>è™šæ‹Ÿ <code>done</code> å·¥å…·æ¨¡å¼</strong>ï¼Œæ˜¯ç¡®ä¿ä¸šåŠ¡ç³»ç»Ÿè·å¾—ç»“æ„åŒ–æ•°æ®çš„ç»ä½³å®è·µã€‚</li>
</ol>
<p>æ­é…å›½å†…é¡¶å°–çš„<strong>é€šä¹‰åƒé—® <code>qwen-max</code></strong> æ¨¡å‹å¼ºå¤§çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›ï¼Œæ— è®ºåœ¨è½åœ°æ•ˆæœè¿˜æ˜¯æ¥å£å…¼å®¹æ€§ä¸Šï¼Œéƒ½èƒ½ä¸ºå¼€å‘è€…æä¾›ä¸æ»‘çš„ä½“éªŒï¼</p>
<p>å¦‚æœåœ¨å¼€å‘ Agent çš„è·¯ä¸Šå¯¹æœ¬æ–‡æœ‰æ‰€å¯å‘ï¼Œæ¬¢è¿<strong>ç‚¹èµã€æ”¶è—</strong>å¹¶åœ¨è¯„è®ºåŒºäº¤æµä½ çš„æœ€ä½³å®è·µï¼ğŸ‘‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[æ‹†è§£LangChainæ‰§è¡Œå¼•æ“] PregelProtocolâ€”â€”å®šä¹‰äº†"LangChainæ‰§è¡Œä½“"æœ€å°åŠŸèƒ½é›†]]></title>    <link>https://juejin.cn/post/7605552034570879022</link>    <guid>https://juejin.cn/post/7605552034570879022</guid>    <pubDate>2026-02-12T23:40:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605552034570879022" data-draft-id="7605811866908082185" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" [æ‹†è§£LangChainæ‰§è¡Œå¼•æ“] PregelProtocolâ€”â€”å®šä¹‰äº†&quot;LangChainæ‰§è¡Œä½“&quot;æœ€å°åŠŸèƒ½é›†"/> <meta itemprop="keywords" content="LangChain,Python"/> <meta itemprop="datePublished" content="2026-02-12T23:40:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JaydenAI"/> <meta itemprop="url" content="https://juejin.cn/user/3001011641261209"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             [æ‹†è§£LangChainæ‰§è¡Œå¼•æ“] PregelProtocolâ€”â€”å®šä¹‰äº†"LangChainæ‰§è¡Œä½“"æœ€å°åŠŸèƒ½é›†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3001011641261209/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JaydenAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T23:40:18.000Z" title="Thu Feb 12 2026 23:40:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Pregelæ˜¯å¯¹<code>PregelProtocol</code>åè®®çš„å®ç°ï¼Œåè€…çš„å¼•å…¥æ ‡å¿—ç€ LangGraph ä»ä¸€ä¸ªå•ä¸€çš„åº“è¿›åŒ–ä¸ºäº†ä¸€ä¸ªå¯æ’æ‹”çš„å›¾è®¡ç®—æ¡†æ¶ã€‚å›¾å¯ä»¥è§†ä¸ºâ€œLangGraph æ‰§è¡Œä½“â€ï¼Œè€ŒPregelProtocolå®šä¹‰äº†å®ƒå¿…é¡»å…·å¤‡çš„æœ€å°åŠŸèƒ½é›†åˆã€‚æˆ‘ä»¬ä»è¿™åè®®çš„æˆå‘˜å®šä¹‰æ¥çœ‹çœ‹è¿™ä¸ªåŠŸèƒ½é›†åˆåŒ…å«å“ªäº›æ“ä½œã€‚</p>
<h2 data-id="heading-0">1. é…ç½®ç»‘å®š</h2>
<p>é€šè¿‡å‰é¢çš„å†…å®¹æˆ‘ä»¬ä¼šå‘ç°<code>RunnableConfig</code>è¿™ä¸ªå¯¹è±¡å‡ ä¹æ—¶æ— æ‰€ä¸åœ¨ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨Pregelå¯¹è±¡çš„æ—¶å€™å¯ä»¥å°†å®ƒä½œä¸ºå‚æ•°ï¼Œç”¨æ¥æä¾›ç”¨äºæ§åˆ¶å…¶æ‰§è¡Œè¡Œä¸ºï¼ˆæ¯”å¦‚è¿­ä»£é™åˆ¶ï¼Œå¹¶å‘æ§åˆ¶ç­‰ï¼‰çš„é…ç½®ã€‚æ‰§è¡Œå¼•æ“è¿˜å°†å®ƒä½œä¸ºå®¹å™¨ç”¨æ¥ä¸‹æµæµç¨‹ä¼ é€’ä¸€äº›ç»„ä»¶å’Œä¿¡å·ï¼Œæ‰€ä»¥å‰é¢çš„æ¼”ç¤ºå®ä¾‹æ‰å¯ä»¥åœ¨Nodeå¤„ç†å‡½æ•°ä¸­ä»æ³¨å…¥çš„RunnableConfigä¸­æå–åƒ<code>Runtime</code>ã€<code>PregelScratchpad</code>ã€<code>Checkpointå‘½åç©ºé—´</code>å’Œ<code>é™æ€ä¸Šä¸‹æ–‡</code>è¿™æ ·å¯¹è±¡å’Œä¿¡æ¯ã€‚å¯¹äºå•çº¯Pregelçš„Nodeï¼ˆä¸åŒ…æ‹¬StateGraphçš„Nodeï¼‰ï¼ŒRunnableConfigä½¿å”¯ä¸€å¯ä»¥æ³¨å…¥åˆ°å¤„ç†å‡½æ•°ä¸­çš„å‚æ•°ï¼Œæ‰€ä»¥é™¤äº†è¾“å…¥å‚æ•°ï¼Œå…¶ä»–æ‰€éœ€çš„ä¿¡æ¯åªèƒ½ä»å®ƒé‡Œé¢æå–ã€‚</p>
<p><code>with_config</code>æ–¹æ³•èµ‹äºˆäº†è¿™ä¸ª â€œæ‰§è¡Œä½“â€ä¸é…ç½®ç»‘å®šçš„èƒ½åŠ›ã€‚é™¤äº†æä¾›RunnableConfigå¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨å…³é”®è¯å‚æ•°æä¾›å¾…ç»‘å®šçš„é…ç½®ã€‚ç”±äºRunnableConfigæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªTypedDictå¯¹è±¡ï¼Œæä¾›çš„å…³é”®å­—å‚æ•°ç»„æˆçš„é”®å€¼å¯¹å¯ä»¥ç›´æ¥è½¬æ¢æˆRunnableConfigå¯¹è±¡ã€‚with_configæ–¹æ³•ä¼šå°†ä¸¤è€…åˆå¹¶ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„RunnableConfigå¯¹è±¡ç»‘å®šåˆ°æ‰§è¡Œä½“ä¸Šã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PregelProtocol</span>(Runnable[InputT, <span class="hljs-type">Any</span>], <span class="hljs-type">Generic</span>[StateT, ContextT, InputT, OutputT]):
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">with_config</span>(<span class="hljs-params">
        self, config: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>, **kwargs: <span class="hljs-type">Any</span>
    </span>) -&gt; Self: ...
</code></pre>
<h2 data-id="heading-1">2. å¯è§†åŒ–å‘ˆç°</h2>
<p>PregelProtocolæ˜¯LangGraphå¯¹ â€œå›¾â€ çš„æŠ½è±¡ï¼Œè¿™é‡Œçš„å›¾æ˜¯ â€œå›¾è®ºâ€ çš„æ¦‚å¿µï¼Œä½†æ˜¯è‹¥çœŸèƒ½å°†å®ƒçš„ç»“æ„å‘ˆç°åœ¨ä¸€å¼  â€œå›¾ç‰‡â€ ä¸­ï¼Œè¿™æ— ç–‘æ˜¯éå¸¸æœ‰æ„ä¹‰çš„ã€‚æ¯•ç«Ÿä»£ç ä»…ä»…æ˜¯é¢å‘ç¨‹åºå‘˜çš„è¯­è¨€ï¼Œæ¯”ä¸ä¸Šå›¾ç‰‡ï¼Œä¸ä½†ç›´è§‚ï¼Œè¿˜æ²¡æœ‰å—ä¼—é™åˆ¶ã€‚LangGraphä¸“é—¨å®šä¹‰äº†å¦‚ä¸‹è¿™ä¸ªGraphç±»å‹æ¥è¡¨ç¤ºé¢å‘ â€œå¯è§†åŒ–å‘ˆç°â€ çš„å›¾ã€‚</p>
<p>ä¸€ä¸ªGraphå¯¹è±¡æ ‡è¯†çš„å›¾ä¾ç„¶ç”±Nodeå’ŒEdgeæ„æˆã€‚å®ƒçš„æ¯ä¸ªNodeéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨<code>next_id</code>æ–¹æ³•ä¸ºä¸‹ä¸€ä¸ªå¾…æ·»åŠ çš„Nodeç”Ÿæˆæ­¤æ ‡è¯†ã€‚æˆ‘ä»¬ä¸ä»…å¯ä»¥è°ƒç”¨<code>add_node</code>ã€<code>remove_node</code>å’Œ<code>add_edge</code>è¿™æ ·çš„æ–¹æ³•ä»¥æ·»åŠ /ç§»é™¤Nodeå’ŒEdgeæ¥æ„å»ºå›¾ï¼Œè¿˜å¯ä»¥è°ƒç”¨<code>extend</code>æ–¹æ³•å°†å¦ä¸€ä¸ªGraphçš„æ‰€æœ‰Nodeå’ŒEdgeæ·»åŠ è¿›æ¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Graph</span>:
    nodes: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, Node] = field(default_factory=<span class="hljs-built_in">dict</span>)
    edges: <span class="hljs-built_in">list</span>[Edge] = field(default_factory=<span class="hljs-built_in">list</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">next_id</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_node</span>(<span class="hljs-params">
        self,
        data: <span class="hljs-built_in">type</span>[BaseModel] | RunnableType | <span class="hljs-literal">None</span>,
        <span class="hljs-built_in">id</span>: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        *,
        metadata: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; Node
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_node</span>(<span class="hljs-params">self, node: Node</span>) -&gt; <span class="hljs-literal">None</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_edge</span>(<span class="hljs-params">
        self,
        source: Node,
        target: Node,
        data: Stringifiable | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        conditional: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>,  <span class="hljs-comment"># noqa: FBT001,FBT002</span>
    </span>) -&gt; Edge
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extend</span>(<span class="hljs-params">
        self, graph: Graph, *, prefix: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>
    </span>) -&gt; <span class="hljs-built_in">tuple</span>[Node | <span class="hljs-literal">None</span>, Node | <span class="hljs-literal">None</span>]:

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">reid</span>(<span class="hljs-params">self</span>) -&gt; Graph:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">first_node</span>(<span class="hljs-params">self</span>) -&gt; Node | <span class="hljs-literal">None</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">last_node</span>(<span class="hljs-params">self</span>) -&gt; Node | <span class="hljs-literal">None</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">trim_first_node</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">trim_last_node</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">to_json</span>(<span class="hljs-params">self, *, with_schemas: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span></span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]]
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_ascii</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_ascii</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
<span class="hljs-meta">    @overload</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_png</span>(<span class="hljs-params">
        self,
        output_file_path: <span class="hljs-built_in">str</span>,
        fontname: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        labels: LabelsDict | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; <span class="hljs-literal">None</span>: ...
<span class="hljs-meta">    @overload</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_png</span>(<span class="hljs-params">
        self,
        output_file_path: <span class="hljs-literal">None</span>,
        fontname: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        labels: LabelsDict | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; <span class="hljs-built_in">bytes</span>: ...
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_png</span>(<span class="hljs-params">
        self,
        output_file_path: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        fontname: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        labels: LabelsDict | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; <span class="hljs-built_in">bytes</span> | <span class="hljs-literal">None</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_mermaid</span>(<span class="hljs-params">
        self,
        *,
        with_styles: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>,
        curve_style: CurveStyle = CurveStyle.LINEAR,
        node_colors: NodeStyles | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        wrap_label_n_words: <span class="hljs-built_in">int</span> = <span class="hljs-number">9</span>,
        frontmatter_config: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; <span class="hljs-built_in">str</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_mermaid_png</span>(<span class="hljs-params">
        self,
        *,
        curve_style: CurveStyle = CurveStyle.LINEAR,
        node_colors: NodeStyles | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        wrap_label_n_words: <span class="hljs-built_in">int</span> = <span class="hljs-number">9</span>,
        output_file_path: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        draw_method: MermaidDrawMethod = MermaidDrawMethod.API,
        background_color: <span class="hljs-built_in">str</span> = <span class="hljs-string">"white"</span>,
        padding: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span>,
        max_retries: <span class="hljs-built_in">int</span> = <span class="hljs-number">1</span>,
        retry_delay: <span class="hljs-built_in">float</span> = <span class="hljs-number">1.0</span>,
        frontmatter_config: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        base_url: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        proxies: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; <span class="hljs-built_in">bytes</span>
</code></pre>
<p>è°ƒç”¨<code>reid</code>æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªæ–°çš„Graphå¯¹è±¡ï¼Œå®ƒå°½é‡ä¿ç•™é€”ä¸­å¯è¯»æ€§çš„å…ƒç´ ï¼Œä½†æ˜¯Nodeçš„IDä¼šé‡æ–°ç”Ÿæˆã€‚Graphçš„<code>first_node</code>å’Œ<code>last_node</code>æ–¹æ³•è¿”å›ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªNodeã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›åˆ é™¤ç¬¬ä¸€ä¸ªåªæœ‰å•ä¸€è¾“å‡ºEdgeæˆ–è€…æœ€åä¸€ä¸ªåªæœ‰å•ä¸€è¾“å…¥Edgeçš„Nodeï¼Œå¯ä»¥è°ƒç”¨<code>trim_first_node</code>æˆ–è€…<code>trim_last_node</code>æ–¹æ³•ã€‚</p>
<p>æ„å»ºå¥½çš„Graphå¯ä»¥é‡‡ç”¨ä¸åŒçš„å‘ˆç°æ–¹å¼ã€‚Graphæä¾›äº†äº”ä¸ªâ€œç»˜å›¾â€æ–¹æ³•ï¼Œå…¶ä¸­<code>draw_ascii</code>å’Œ<code>print_ascii</code>é‡‡ç”¨asciiç å­—ç¬¦çš„å‘ˆç°æ–¹å¼ï¼Œå‰è€…è¿”å›å…·ä½“çš„asciiç å­—ç¬¦ä¸²ï¼Œåè€…åˆ™ç›´æ¥åœ¨ç»ˆç«¯å°†å›¾ç»˜åˆ¶å‡ºæ¥ï¼Œè¿™ç§æ–¹æ³•ä¸ä¾èµ–å…¶ä»–çš„ç»˜å›¾ç›¸å…³çš„åŒ…ã€‚<code>draw_mermaid</code>å’Œ<code>draw_mermaid_png</code>é‡‡ç”¨Mermaidå›¾è¡¨çš„å‘ˆç°æ–¹å¼ï¼ŒMermaid æ˜¯ä¸€ç§åŸºäºæ–‡æœ¬çš„æµç¨‹å›¾å®šä¹‰è¯­è¨€ï¼Œå¹¿æ³›æ”¯æŒäº GitHubã€Notion å’Œå„ç§ç¼–è¾‘å™¨ä¸­ã€‚draw_mermaidè¿”å›å›¾æ ‡æ–‡æœ¬ï¼Œè€Œ<code>draw_mermaid_png</code>åˆ™ç›´æ¥å°†å›¾è¡¨è¿›ä¸€æ­¥æ¸²æŸ“æˆPNGå›¾ç‰‡ã€‚Graphå¯¹è±¡ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨<code>draw_png</code>æ–¹æ³•æ¸²æŸ“æˆPNGå›¾ç‰‡ï¼Œè¯¥æ–¹æ³•æœ€ç»ˆä¼šGraphvizï¼ˆä¸€ä¸ªå¼€æºçš„å›¾å¯è§†åŒ–è½¯ä»¶ï¼‰æ¥å¸ƒå±€å’Œæ¸²æŸ“å›¾ç‰‡ã€‚</p>
<p>å†å›åˆ°PregelProtocolç±»å‹çš„å®šä¹‰ä¸Šï¼Œå®ƒå®šä¹‰äº†å¦‚ä¸‹æ‰€ç¤ºçš„<code>get_graph/aget_graph</code>æ–¹æ³•ï¼Œå®ƒä»¬çš„è¿”å›ç±»å‹DrawableGraphæ­£æ˜¯ä¸Šè¿°Graphç±»å‹çš„åˆ«åã€‚è¯¥æ–¹æ³•é™¤äº†å¯ä»¥ä¼ å…¥RunnableConfigå¯¹è±¡ä½œä¸ºå¯é€‰é…ç½®å¤–ï¼Œè¿˜å…·æœ‰ä¸€ä¸ªåä¸º<code>xray</code>çš„å‚æ•°ã€‚xrayï¼ˆXå…‰ï¼‰å‚æ•°å†³å®šäº†ä½ åœ¨æŸ¥çœ‹å›¾ç»“æ„æ—¶ï¼Œåˆ°åº•èƒ½çœ‹å¤šæ·±ã€‚å®ƒä¸“é—¨ç”¨äºå¤„ç†å­å›¾çš„å±•å¼€æ˜¾ç¤ºã€‚å¦‚æœè®¾ç½®ä¸ºFalseï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œå›¾å°†ä»¥ â€œé»‘ç›’â€ æ¨¡å¼æ˜¾å¼ï¼Œå¦‚æœä½ çš„å›¾ä¸­åŒ…å«å­å›¾ï¼Œå®ƒåªä¼šæ˜¾ç¤ºä¸ºä¸€ä¸ªå•ä¸€çš„èŠ‚ç‚¹ã€‚ä½ çœ‹ä¸è§å­å›¾å†…éƒ¨çš„ä»»ä½•èŠ‚ç‚¹ã€è¾¹æˆ–é€»è¾‘ã€‚åä¹‹å°†ä¼šé‡‡ç”¨ â€œå…¨å±•å¼€â€ æ¨¡å¼ï¼Œå®ƒä¼šåƒ X å…‰ä¸€æ ·ç©¿é€æ‰€æœ‰å±‚çº§ï¼Œå°†æ‰€æœ‰åµŒå¥—å­å›¾å†…éƒ¨çš„èŠ‚ç‚¹å’Œè¿çº¿å…¨éƒ¨å¹³é“ºå‡ºæ¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.runnables.graph <span class="hljs-keyword">import</span> Graph <span class="hljs-keyword">as</span> DrawableGraph
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PregelProtocol</span>(Runnable[InputT, <span class="hljs-type">Any</span>], <span class="hljs-type">Generic</span>[StateT, ContextT, InputT, OutputT]):
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_graph</span>(<span class="hljs-params">
        self,
        config: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        *,
        xray: <span class="hljs-built_in">int</span> | <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>,
    </span>) -&gt; DrawableGraph: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">aget_graph</span>(<span class="hljs-params">
        self,
        config: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        *,
        xray: <span class="hljs-built_in">int</span> | <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>,
    </span>) -&gt; DrawableGraph: ...
</code></pre>
<p>åœ¨ç¬¬ä¸€ä¸ªæ¼”ç¤ºå®ä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä½œä¸ºâ€œç¬‘è¯ç”Ÿæˆå™¨â€çš„Agentï¼Œç°åœ¨æˆ‘ä»¬å°†å®ƒç®€åŒ–ï¼Œçœ‹çœ‹ç”±å®ƒç”Ÿæˆçš„Graphå¦‚ä½•å°†å›¾çš„ç»“æ„ä»¥å¯è§†åŒ–çš„å½¢å¼å‘ˆç°å‡ºæ¥ã€‚å¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œæˆ‘ä»¬åˆ©ç”¨StateGraphä½œä¸ºBuilderï¼Œæ„å»ºäº†ä¸€å¼ ç”±ä¸¤ä¸ªNodeç»„æˆçš„å›¾ï¼Œå®ƒä»¬å’ŒStartå’ŒEndä¹‹é—´æœ‰å››æ¡è¾¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, START, END
<span class="hljs-keyword">from</span> langgraph.pregel.protocol <span class="hljs-keyword">import</span> PregelProtocol
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image <span class="hljs-keyword">as</span> PILImage
<span class="hljs-keyword">import</span> io
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> MemorySaver

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_joke</span>(<span class="hljs-params">state</span>):
    <span class="hljs-keyword">pass</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">regenerate_joke</span>(<span class="hljs-params">state</span>):
    <span class="hljs-keyword">pass</span>

builder = (
    StateGraph(<span class="hljs-built_in">dict</span>)
    .add_node(<span class="hljs-string">"generate_joke"</span>, generate_joke)
    .add_node(<span class="hljs-string">"regenerate_joke"</span>, regenerate_joke)
)

builder.add_edge(START, <span class="hljs-string">"generate_joke"</span>)
builder.add_edge(<span class="hljs-string">"regenerate_joke"</span>, END)
builder.add_conditional_edges(
    <span class="hljs-string">"generate_joke"</span>, <span class="hljs-keyword">lambda</span> _: <span class="hljs-string">"bad"</span>, {<span class="hljs-string">"good"</span>: END, <span class="hljs-string">"bad"</span>: <span class="hljs-string">"regenerate_joke"</span>}
)

app: PregelProtocol = builder.<span class="hljs-built_in">compile</span>(MemorySaver())
graph = app.get_graph()
graph.print_ascii()

<span class="hljs-built_in">bytes</span> = graph.draw_mermaid_png()
PILImage.<span class="hljs-built_in">open</span>(io.BytesIO(<span class="hljs-built_in">bytes</span>)).show()
</code></pre>
<p>åœ¨å°†StateGraphç¼–è¯‘æˆPregelå¯¹è±¡åï¼Œæˆ‘ä»¬è°ƒç”¨å…¶get_graphæ–¹æ³•å¾—åˆ°å¯¹åº”çš„Graphå¯¹è±¡ã€‚æˆ‘ä»¬ä»¥ä¸¤ç§å½¢å¼å‘ˆç°å…¶ç»“æ„ï¼Œå‰è€…é€šè¿‡è°ƒç”¨print_asciiæ–¹æ³•ä»¥ASCIIå­—ç¬¦çš„å½¢å¼è¾“å‡ºå›¾ç»“æ„ï¼Œåè€…è°ƒç”¨draw_mermaid_pngæ–¹æ³•ç”Ÿæˆä¸€å¼ PNGå›¾ç‰‡ã€‚ä¸‹å›¾å·¦å³ä¸¤éƒ¨åˆ†åˆ†åˆ«å±•ç°äº†ä¸¤ç§å‘ˆç°æ–¹å¼çš„æ•ˆæœã€‚</p>
<h2 data-id="heading-2">3. æŒä¹…åŒ–</h2>
<p>ä¸ºäº†æ”¯æŒâ€œä¸­æ–­/æ¢å¤â€çš„æ‰§è¡Œæ–¹å¼ï¼ŒåŒæ—¶ä¸ºâ€œæ—¶é—´æ—…è¡Œâ€æä¾›æ”¯æŒï¼Œå›¾å¿…é¡»åˆ©ç”¨æŒä¹…åŒ–çš„æ–¹å¼å°†æ‰§è¡Œè¿‡ç¨‹çš„é‡è¦æ—¶åˆ»çš„çŠ¶æ€ä¿å­˜ä¸‹æ¥ã€‚LangGraphé‡‡ç”¨åŸºäº<code>Checkpoint</code>çš„æŒä¹…åŒ–å½¢å¼ï¼Œå¯¹äºæŒ‡å®šçš„æ¯ä¸ªä»»åŠ¡ï¼Œä¸è®ºæ˜¯æ‰§è¡ŒæˆåŠŸé’ˆå¯¹Channelçš„å†™å…¥æ„å›¾ï¼Œè¿˜æ˜¯æŠ›å‡ºå¼‚å¸¸ã€äººä¸ºä¸­æ–­æˆ–è€…Resume Valueçš„æä¾›ï¼Œéƒ½ä¼šä»¥Pending Writeçš„å½¢å¼è¢«è®°å½•ä¸‹æ¥ï¼›å½“è¶…æ­¥æˆåŠŸå®Œæˆï¼Œé’ˆå¯¹Channelçš„å†™å…¥è¢«æˆåŠŸåº”ç”¨ï¼Œè¿™äº›Pending Writeè¢«ä¸¢å¼ƒï¼Œæ¢æ¥ä¸€ä¸ªCheckpointæ¥æè¿°å½“å‰çš„çŠ¶æ€ã€‚</p>
<p>ä½œä¸ºâ€œLangGraph æ‰§è¡Œä½“â€çš„æŠ½è±¡ï¼ŒPregelProtocolå®šä¹‰äº†<code>get_state/aget_state</code>æ–¹æ³•ç”¨äºè¯»å–åœ¨æŸä¸ªSuperstepç”±Checkpointï¼ˆå¯¹äºæœ€åä¸€ä¸ªæœªå®Œæˆçš„Superstepï¼Œè¿˜åŒ…æ‹¬Pending Writeï¼‰æ„å»ºçš„çŠ¶æ€å¿«ç…§ï¼Œè¯¥å¿«ç…§ä½“ç°ä¸ºä¸€ä¸ªStateSnapshotå¯¹è±¡ã€‚<code>get_state_history/aget_state_history</code>è¿”å›ç”±è¿™äº›å¿«ç…§è°±å†™çš„ä¸€æ®µå†å²ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PregelProtocol</span>(Runnable[InputT, <span class="hljs-type">Any</span>], <span class="hljs-type">Generic</span>[StateT, ContextT, InputT, OutputT]):
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_state</span>(<span class="hljs-params">
        self, config: RunnableConfig, *, subgraphs: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
    </span>) -&gt; StateSnapshot: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">aget_state</span>(<span class="hljs-params">
        self, config: RunnableConfig, *, subgraphs: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
    </span>) -&gt; StateSnapshot: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_state_history</span>(<span class="hljs-params">
        self,
        config: RunnableConfig,
        *,
        <span class="hljs-built_in">filter</span>: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        before: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        limit: <span class="hljs-built_in">int</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; Iterator[StateSnapshot]: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">aget_state_history</span>(<span class="hljs-params">
        self,
        config: RunnableConfig,
        *,
        <span class="hljs-built_in">filter</span>: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        before: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        limit: <span class="hljs-built_in">int</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; AsyncIterator[StateSnapshot]: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">bulk_update_state</span>(<span class="hljs-params">
        self,
        config: RunnableConfig,
        updates: <span class="hljs-type">Sequence</span>[<span class="hljs-type">Sequence</span>[StateUpdate]],
    </span>) -&gt; RunnableConfig: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">abulk_update_state</span>(<span class="hljs-params">
        self,
        config: RunnableConfig,
        updates: <span class="hljs-type">Sequence</span>[<span class="hljs-type">Sequence</span>[StateUpdate]],
    </span>) -&gt; RunnableConfig: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update_state</span>(<span class="hljs-params">
        self,
        config: RunnableConfig,
        values: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-type">Any</span> | <span class="hljs-literal">None</span>,
        as_node: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; RunnableConfig: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">aupdate_state</span>(<span class="hljs-params">
        self,
        config: RunnableConfig,
        values: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-type">Any</span> | <span class="hljs-literal">None</span>,
        as_node: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; RunnableConfig: ...
</code></pre>
<p>æŒä¹…åŒ–å­˜å‚¨çš„Checkpointä¸ä»…ä½¿æˆ‘ä»¬å¯ä»¥å›é¡¾å†å²ï¼Œè¿˜å¯ä»¥æä¾›â€œæ—¶é—´æ—…è¡Œâ€ï¼Œä½¿æˆ‘ä»¬å¯ä»¥ä»æŸä¸ªå†å²æ—¶åˆ»é‡æ–°æ‰§è¡Œåé¢çš„æµç¨‹ã€‚ä¸ä»…å¦‚æ­¤ï¼ŒPregelProtocolè¿˜æä¾›äº†<code>update_state /bulk_update_state/abulk_update_state</code>å¯ä»¥ç›´æ¥ä¿®æ”¹çŠ¶æ€ã€‚ä½†æ˜¯å®ƒä»¬å¹¶éâ€œç¯¡æ”¹å†å²â€ï¼Œåªæ˜¯åŸºäºæŸä¸ªåœ¨æŸä¸ªå†å²æ—¶åˆ»å¼€å¯äº†å¦ä¸€æ®µâ€œå¹³è¡Œå®‡å®™â€è€Œå·²ã€‚æŒä¹…åŒ–ä½¿LangGraph.Pregelä½œä¸ºæ ¸å¿ƒå’Œéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†åœ¨åç»­éƒ¨åˆ†å¯¹å®ƒè¿›è¡Œä¸“é—¨çš„ä»‹ç»ã€‚</p>
<h2 data-id="heading-3">4. ä¸¤ç§è°ƒç”¨æ–¹å¼</h2>
<p>PregelProtocolçš„<code>invoke/ainvoke</code>å’Œ<code>stream/astream</code>æ–¹æ³•ä½“ç°äº†é’ˆå¯¹ â€œLangGraph æ‰§è¡Œä½“â€ ä¸¤ç§è°ƒç”¨æ–¹å¼ã€‚å‰è€…é‡‡ç”¨ç®€å•çš„è¯·æ±‚/å›å¤æ¶ˆæ¯äº¤æ¢æ¨¡å¼ï¼Œå®¢æˆ·ç«¯éœ€è¦ç­‰æ•´ä¸ªæµç¨‹ç»“æŸä¹‹åé‡‡ç”¨å¾—åˆ°ç»“æœã€‚å¦‚æœæ•´ä¸ªå¤„ç†æµç¨‹æ¯”è¾ƒå¤æ‚ï¼Œæˆ–è€…æ¶‰åŠä¸€äº›è€—æ—¶çš„æ“ä½œï¼Œè¿‡é•¿çš„ç­‰å¾…ä¼šå¸¦æ¥ç³Ÿç³•çš„ä½“éªŒã€‚åè€…é‡‡ç”¨æµå¼å¤„ç†ä½¿å®¢æˆ·ç«¯å¯ä»¥å®æ–½å¾—åˆ°å¤„ç†çš„ä¸­é—´ç»“æœæˆ–è€…æ„ŸçŸ¥åˆ°å¤„ç†çš„è¿›åº¦ã€‚æˆ‘ä»¬å°†åœ¨åç»­éƒ¨åˆ†å¯¹æµå¼å¤„ç†è¿›è¡Œå•ç‹¬ä»‹ç»ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PregelProtocol</span>(Runnable[InputT, <span class="hljs-type">Any</span>], <span class="hljs-type">Generic</span>[StateT, ContextT, InputT, OutputT]):
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">stream</span>(<span class="hljs-params">
        self,
        <span class="hljs-built_in">input</span>: InputT | Command | <span class="hljs-literal">None</span>,
        config: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        *,
        context: ContextT | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        stream_mode: StreamMode | <span class="hljs-built_in">list</span>[StreamMode] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        interrupt_before: All | <span class="hljs-type">Sequence</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        interrupt_after: All | <span class="hljs-type">Sequence</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        subgraphs: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>,
    </span>) -&gt; Iterator[<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-type">Any</span>]: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">astream</span>(<span class="hljs-params">
        self,
        <span class="hljs-built_in">input</span>: InputT | Command | <span class="hljs-literal">None</span>,
        config: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        *,
        context: ContextT | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        stream_mode: StreamMode | <span class="hljs-built_in">list</span>[StreamMode] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        interrupt_before: All | <span class="hljs-type">Sequence</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        interrupt_after: All | <span class="hljs-type">Sequence</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        subgraphs: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>,
    </span>) -&gt; AsyncIterator[<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-type">Any</span>]: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">invoke</span>(<span class="hljs-params">
        self,
        <span class="hljs-built_in">input</span>: InputT | Command | <span class="hljs-literal">None</span>,
        config: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        *,
        context: ContextT | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        interrupt_before: All | <span class="hljs-type">Sequence</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        interrupt_after: All | <span class="hljs-type">Sequence</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-type">Any</span>: ...

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">ainvoke</span>(<span class="hljs-params">
        self,
        <span class="hljs-built_in">input</span>: InputT | Command | <span class="hljs-literal">None</span>,
        config: RunnableConfig | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        *,
        context: ContextT | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        interrupt_before: All | <span class="hljs-type">Sequence</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
        interrupt_after: All | <span class="hljs-type">Sequence</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    </span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-type">Any</span>: ...
</code></pre>
<p>æ‰§è¡Œä½“æ”¯æŒä¸­æ–­/æ¢å¤ï¼ˆinterrupt/resumeï¼‰çš„æ–¹å¼æ‰§è¡Œï¼Œæ‰€ä»¥åœ¨ä¸­æ–­æ—¶éœ€è¦å°†å½“æ—¶çš„çŠ¶æ€ä»¥ â€œCheckpointï¼ˆCheckpointï¼‰â€ çš„å½¢å¼ä¿å­˜ä¸‹æ¥ï¼Œæ¢å¤æ‰§è¡Œçš„æ—¶å€™åˆ©ç”¨å®ƒä»¬å°†å½“æ—¶çš„ â€œæ‰§è¡Œçº¿ç¨‹â€ å¤åŸã€‚Checkpointingçš„æœºåˆ¶ä¹Ÿä½¿ â€œæ—¶é—´æ—…è¡Œâ€ æˆä¸ºå¯èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»»ä¸€Checkpointå¼€å§‹æ‰§è¡Œã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºæ­¤æŒä¹…åŒ–æœºåˆ¶çš„å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æå–æŸä¸€ä¸ªSuperstepçš„çŠ¶æ€ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹æ•´ä¸ªæ‰§è¡Œå†å²ï¼Œè¿™ä¸¤ä¸ªåŠŸèƒ½åˆ†åˆ«å¯¹åº”PregelProtocolçš„<code>get_state/aget_state</code>å’Œ<code>get_state_history/aget_state_history</code>æ–¹æ³•ã€‚å…·ä½“çš„çŠ¶æ€ä»¥StateSnapshotå¯¹è±¡æè¿°çš„å¿«ç…§è¡¨ç¤ºã€‚</p>
<p>æ‰§è¡Œä½“åº”è¯¥å…·æœ‰å°†æ‰§è¡Œç»“æœä½œä¸ºæ–°çš„çŠ¶æ€è¿›è¡Œä¿å­˜çš„èƒ½åŠ›ï¼Œæ‰€ä»¥PregelProtocolå®šä¹‰äº†<code>update_state/aupdate_state</code>å’Œ<code>bulk_update_state/abulk_update_state</code>æ–¹æ³•ï¼Œå‰è€…ä¿å­˜å•ä¸€çŠ¶æ€æ›´æ–°ï¼Œåè€…å¯¹å¤šä¸ªçŠ¶æ€æ›´æ–°è¿›è¡Œæ‰¹é‡æ‰§è¡Œã€‚å•ä¸€çŠ¶æ€æ›´æ–°é€šè¿‡å¦‚ä¸‹è¿™ä¸ªåä¸ºStateUpdateçš„å‘½åå…ƒç»„è¡¨ç¤ºï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥åˆ©ç”¨valueså­—æ®µå¾—åˆ°ä»¥å­—å…¸å½¢å¼è¡¨ç¤ºçš„çŠ¶æ€å€¼ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>as_node</code>å’Œ<code>task_id</code>å­—æ®µçš„å¾—åˆ°å®æ–½æ›´æ–°çš„Nodeå’Œå…·ä½“ä»»åŠ¡æ ‡è¯†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StateUpdate</span>(<span class="hljs-title class_ inherited__">NamedTuple</span>):
    values: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-literal">None</span>
    as_node: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>
    task_id: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>
</code></pre>
<p>æ‰§è¡Œä½“æ”¯æŒä¸¤ç§åŸºæœ¬çš„æ“ä½œï¼Œä¸€ç§é‡‡ç”¨å•çº¯çš„è¯·æ±‚/å“åº”æ¶ˆæ¯äº¤æ¢æ¨¡å¼ï¼Œå¦ä¸€ç§ä»¥æµçš„å½¢å¼å®æ—¶è¿”å›æ•°æ®ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”<code>invoke/ainvoke</code>å’Œ<code>stream/astream</code>æ–¹æ³•ã€‚</p>
<h2 data-id="heading-4">5. åµŒå¥—ç»“æ„</h2>
<p>æˆ‘ä»¬ä¸€ç›´åœ¨å¼ºè°ƒå›¾çš„â€œåµŒå¥—â€ç»“æ„ï¼Œè¿™ç§ç»“æ„ä¹Ÿå¯ä»¥ä»Pregelã€PregelNodeå’ŒPregelProtocolåœ¨ä¸‰ä¸ªç±»å‹çš„å®šä¹‰ã€‚ä¸€ä¸ªPregelæ˜¯PregelProtocolçš„å®ç°ã€ä½œä¸ºå…¶èŠ‚ç‚¹çš„PregelNodeå¯¹è±¡å¯ä»¥ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªPregelProtocolç»„æˆï¼Œå¯¹äºè¡¨ç¤º â€œå­å›¾â€ çš„subgraphså­—æ®µï¼Œå¹¶ä¸”è¯¥å­—æ®µè¿”å›ä¸€ä¸ªPregelProtocolå¯¹è±¡çš„åºåˆ—ã€‚Pregelçš„subgraphsæ–¹æ³•è¿”å›çš„å­å›¾å°±æ¥æºäºç»„æˆå®ƒçš„Nodeã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PregelNode</span>:
    subgraphs	: <span class="hljs-type">Sequence</span>[PregelProtocol]

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Pregel</span>(
    PregelProtocol[StateT, ContextT, InputT, OutputT],
    <span class="hljs-type">Generic</span>[StateT, ContextT, InputT, OutputT]):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_subgraphs</span>(<span class="hljs-params">
        self, *, namespace: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>, recurse: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
    </span>) -&gt; Iterator[<span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">str</span>, PregelProtocol]]

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">aget_subgraphs</span>(<span class="hljs-params">
        self, *, namespace: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>, recurse: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
    </span>) -&gt; AsyncIterator[<span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">str</span>, PregelProtocol]]
</code></pre>
<p>PregelNodeçš„subgraphså­—æ®µæä¾›äº† â€œå­å›¾â€ çš„é™æ€æ³¨å†Œï¼Œå…¶å®ä»»ä½•ä¸€ä¸ªPregelå¯¹è±¡éƒ½å¯ä»¥åœ¨æ— éœ€æ³¨å†Œå‰æä¸‹è¢«å¦ä¸€ä¸ªPregelçš„Nodeè°ƒç”¨ï¼Œè€Œä¸”åæ˜ å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€äº›æ‰§è¡Œé…ç½®ä¼šé€šè¿‡ä¸Šä¸‹æ–‡å˜é‡ï¼ˆContenxtVarsï¼‰ â€œæµå‘â€ ä½œä¸ºå­å›¾çš„Pregelå¯¹è±¡ã€‚å‰é¢æˆ‘ä»¬æ¼”ç¤ºå­å›¾è°ƒç”¨æ¶‰åŠçš„Checkpointå‘½åç©ºé—´çš„ä¾‹å­å·²ç»å……åˆ†ä½“ç°äº†è¿™ä¸€ç‚¹ã€‚ä½†æ˜¯è¿™ç§æ˜¾å¼çš„é™æ€å£°æ˜å¯¹äºå›¾çš„é™æ€å›¾åˆ†æä¸å¯è§†åŒ–æœ‰ç€ç§¯æçš„ä½œç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªç ”ç¬¬ä¸€ä¸ªSKILL-openclawå…¥é—¨]]></title>    <link>https://juejin.cn/post/7605848213603074094</link>    <guid>https://juejin.cn/post/7605848213603074094</guid>    <pubDate>2026-02-13T00:29:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605848213603074094" data-draft-id="7605848213603041326" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªç ”ç¬¬ä¸€ä¸ªSKILL-openclawå…¥é—¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-13T00:29:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iqiu"/> <meta itemprop="url" content="https://juejin.cn/user/1053802635204378"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªç ”ç¬¬ä¸€ä¸ªSKILL-openclawå…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1053802635204378/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iqiu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T00:29:06.000Z" title="Fri Feb 13 2026 00:29:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è‡ªç ”ç¬¬ä¸€ä¸ªSKILL-openclawå…¥é—¨</h2>
<p>openclawä¸æ˜¯æ­å»ºå¥½äº†å°±ç»“æŸäº†ï¼Œç”¨èµ·æ¥æ‰èƒ½å‘æŒ¥ä½œç”¨ï¼Œè€ŒSKILLï¼Œå°±æ˜¯openclawçš„çµé­‚ï¼Œæ˜¯openclawçš„å†…åŠŸã€‚</p>
<p>æ‰€ä»¥å‡†å¤‡æ…¢æ…¢è®°å½•å­¦ä¹ openclawçš„skillä¹‹è·¯ã€‚</p>
<p>æ‰€è°“è¯»ä¸‡å·ä¹¦ä¸å¦‚è¡Œä¸‡é‡Œè·¯ï¼Œå®è·µå¯¹çŸ¥è¯†çš„ç†è§£éå¸¸é‡è¦ï¼Œä»Šå¤©å°±å‡†å¤‡è‡ªå·±å¼€å‘ä¸€ä¸ªç®€å•çš„SKILLï¼Œæ¥åŠ æ·±å¯¹SKILLçš„ç†è§£ã€‚</p>
<p>å¦‚æœè¿˜ä¸çŸ¥é“SKILLæ˜¯ä»€ä¹ˆï¼Œå»ºè®®å…ˆçœ‹ç¬¬ä¸€ç¯‡ï¼š</p>
<h3 data-id="heading-1">æŠ„ä¸€ä¸ªè¿˜æ˜¯æ”¹ä¸€ä¸ª</h3>
<p>å­¦å­—å…ˆæçº¢ï¼Œå¼€å‘å…ˆæŠ„ï¼Œcvç¨‹åºå‘˜çš„ç§°å·ä¸æ˜¯ç™½å¾—çš„ã€‚</p>
<p>å…ˆçœ‹çœ‹è¿™ä¸ªï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2746c421c8df4407a40c38f944779e62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaXFpdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771547346&amp;x-signature=uDVR%2FgzwV9nI27H4gu13Y5%2FzMys%3D" alt="2.png" loading="lazy"/></p>
<p>openclawæ¯•ç«Ÿæ˜¯å¤–å›½äººå¼€å‘çš„ï¼Œé»˜è®¤çš„skilléƒ½æ˜¯å›½å¤–çš„ï¼Œæ¯”å¦‚è¿™ä¸ªå¤©æ°”æŸ¥è¯¢ï¼Œå…ˆæ‰¾åˆ°è¿™ä¸ªç³»ç»Ÿè‡ªå¸¦çš„skillçœ‹çœ‹ï¼š</p>
<p>è¿™ä¸ªskillä½äºç³»ç»Ÿå†…ç½®skillçš„ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/app/skills/weather/SKILL.md
</code></pre>
<p>è¿™ä¸ªSKILLçš„å†…å®¹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/862bce102672405e9cbd4277ecc78d4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaXFpdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771547346&amp;x-signature=ZKGNoWjErPRbBrIK08t2EYsTxrw%3D" alt="3.png" loading="lazy"/>
ä¸€ä¸ªæŸ¥è¯¢å¤©æ°”çš„skillï¼Œè¿˜æŒºå¤æ‚ï¼Œæœ‰ä¸»è¦çš„æœåŠ¡ï¼Œè¿˜æœ‰å¤‡ä»½çš„ï¼Œå¯æƒœéƒ½æ˜¯å›½å¤–çš„æœåŠ¡ï¼Œå›½äººç”¨å°±æœ‰ç‚¹æ°´åœŸä¸æœäº†ï¼Œå°±ä»¥ä»–ä¸ºä¾‹ï¼Œæ”¹æˆç®€å•çš„å›½å†…çš„ï¼š</p>
<p>å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b8a512e9d3046f38c82db144065ad87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaXFpdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771547346&amp;x-signature=TD8Zri6pumtgB%2FOaZOuBQByaau0%3D" alt="4.png" loading="lazy"/></p>
<p>éœ€è¦é‡å¯gatewayç”Ÿæ•ˆï¼Œç„¶åé—®ä¸€ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8c45a0b4b674e599160b3e79654c1db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaXFpdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771547346&amp;x-signature=PjrYVY8KTfpj71%2BEw%2BqnlmuKew0%3D" alt="1.png" loading="lazy"/></p>
<p>ä¸‡äº‹å¤§å‰äº†ï¼</p>
<h3 data-id="heading-2">å°ç»“</h3>
<p>è¿™æ˜¯ç¬¬ä¸€ä¸ªè‡ªç ”çš„SKILLï¼ŒåŠŸèƒ½ä¸å¤§ï¼Œå´ä¹Ÿå®ç”¨ï¼Œå†æ‰¾ä¸€ä¸ªå…è´¹çš„å¤©æ°”æ¥å£ï¼Œä½œä¸ºå¤‡ä»½ï¼Œå®Œå–„ä¸€ä¸‹ï¼Œå°±å¯ä»¥æ›¿ä»£ç³»ç»Ÿè‡ªå¸¦çš„å¤©æ°”SKILLäº†ã€‚</p>
<p>ä»ç®€å•å¼€å§‹ï¼Œä»å¤åˆ¶å¼€å§‹ï¼Œæ…¢æ…¢å­¦ä¹ å¤æ‚ä¸€ç‚¹çš„SKILLï¼Œå¼€å‘openclawçš„åŠŸèƒ½ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uv Ã— pyseekdbï¼šæŠŠ RAG ç¯å¢ƒä¸æ£€ç´¢è½åœ°æˆæœ¬é™åˆ°æœ€ä½]]></title>    <link>https://juejin.cn/post/7605625595570421775</link>    <guid>https://juejin.cn/post/7605625595570421775</guid>    <pubDate>2026-02-13T02:03:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605625595570421775" data-draft-id="7605542907118698548" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uv Ã— pyseekdbï¼šæŠŠ RAG ç¯å¢ƒä¸æ£€ç´¢è½åœ°æˆæœ¬é™åˆ°æœ€ä½"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-13T02:03:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€çºªçš„æŠ€æœ¯å” å—‘å±€"/> <meta itemprop="url" content="https://juejin.cn/user/2394058441104739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uv Ã— pyseekdbï¼šæŠŠ RAG ç¯å¢ƒä¸æ£€ç´¢è½åœ°æˆæœ¬é™åˆ°æœ€ä½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2394058441104739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€çºªçš„æŠ€æœ¯å” å—‘å±€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:03:06.000Z" title="Fri Feb 13 2026 02:03:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">01 AI å¼€å‘è€…çš„åŸºå»º</h2>
<p>è¿‡å»å¾ˆå¤šå›¢é˜ŸæŠŠä¸»è¦ç²¾åŠ›æ”¾åœ¨ç®—æ³•æœ¬èº«ï¼›åœ¨å¤§æ¨¡å‹ç”Ÿæ€æˆç†Ÿåï¼Œå·¥ç¨‹ä¾§æ›´å¸¸è§çš„é˜»å¡å˜æˆä¸¤ç±»ï¼šä¸€æ˜¯ç¯å¢ƒä¸ä¾èµ–çš„å¯å¤ç°ï¼ŒäºŒæ˜¯æ•°æ®å¯¼å…¥ã€æ£€ç´¢ä¸å­˜å‚¨çš„è½åœ°æˆæœ¬ã€‚AI é¡¹ç›®å¾€å¾€å¸¦ç€è¾ƒé‡çš„ä¾èµ–ç»„åˆï¼ˆå¦‚ PyTorchã€Transformersã€å„ç±» RAG æ¡†æ¶ï¼‰ï¼Œå¦‚æœæ¯æ¬¡åä½œã€æ¢æœºå™¨ã€è¿› CI éƒ½è¦é‡æ–°å¤„ç† Python ç‰ˆæœ¬ã€è™šæ‹Ÿç¯å¢ƒã€é”æ–‡ä»¶ä¸ä¾èµ–å†²çªï¼Œæˆæœ¬ä¼šè¢«æ”¾å¤§ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä»‹ç»ä¸¤ä¸ªå·¥å…·ï¼Œç›®æ ‡æ˜¯æŠŠç¯å¢ƒæˆæœ¬å’Œæ£€ç´¢æ•°æ®è½åœ°æˆæœ¬æ›´ä½ï¼š</p>
<ul>
<li><code>uv</code>ï¼šç”± Astral å›¢é˜Ÿæ¨å‡ºçš„ Rust ç¼–å†™çš„ Python åŒ…ç®¡ç†å™¨ï¼Œä»¥é€Ÿåº¦ä¸ä¸€è‡´æ€§ä¼˜åŒ– Python å·¥ä½œæµã€‚</li>
<li><code>pyseekdb</code>ï¼šé¢å‘ seekdb ä¸ OceanBase AI search çš„ Python SDKï¼Œæ”¯æŒåµŒå…¥å¼ä¸è¿œç¨‹ä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼Œå¹¶è¦†ç›–å‘é‡ã€å…¨æ–‡ä¸æ··åˆæ£€ç´¢èƒ½åŠ›ã€‚</li>
</ul>
<h2 data-id="heading-1">02 ä»€ä¹ˆæ˜¯ uv</h2>
<p>åœ¨ Python ç”Ÿæ€é‡Œï¼Œè£…åŒ…æœ¬èº«å¹¶ä¸éš¾ï¼Œéš¾åœ¨å›¢é˜Ÿåä½œä¸‹çš„ä¸€è‡´æ€§ï¼šä¸åŒäººç”¨ä¸åŒå·¥å…·ï¼ˆ<code>pip+venv</code>/<code>poetry</code>ï¼‰ï¼Œå†å åŠ ä¸åŒ OSã€ä»£ç†ã€CPU æ¶æ„ï¼Œå¸¸è§ç»“æœæ˜¯ä»£ç æ²¡é—®é¢˜ï¼Œä½†åˆ«äººè·‘ä¸èµ·æ¥ã€‚</p>
<p>uv çš„é¡¹ç›®æ¨¡å¼å›´ç»• <code>pyproject.toml</code> ç®¡ä¾èµ–ã€ç”¨ <code>uv.lock</code> é”å®šè§£æç»“æœï¼Œå¹¶é€šè¿‡ <code>uv sync</code>/<code>uv run</code>è®©ç¯å¢ƒä¸é”æ–‡ä»¶ä¿æŒä¸€è‡´ã€‚å®ƒçš„å®šä½å¾ˆæ˜ç¡®ï¼š<strong>ç”¨ä¸€ä¸ªå‘½ä»¤è¡ŒæŠŠé¡¹ç›®ã€ä¾èµ–ã€é”ç‰ˆæœ¬ã€ç¯å¢ƒåŒæ­¥ä¸è¿è¡Œå‘½ä»¤è¿™ä¸€æ•´å¥—å·¥ä½œæµè¿èµ·æ¥ï¼Œå¹¶å¼ºè°ƒæ€§èƒ½ä¸å·¥ç¨‹åŒ–ä¸€è‡´æ€§ã€‚</strong></p>
<h2 data-id="heading-2">03 pyseekdb ç®€ä»‹</h2>
<p>RAG åœºæ™¯é‡Œï¼Œå¼€å‘è€…é€šå¸¸éœ€è¦æŠŠæ–‡æœ¬åˆ‡åˆ†ã€å‘é‡åŒ–ã€å…¥åº“ã€æ£€ç´¢ã€è¿‡æ»¤ã€æ’åºè¿™ä¸€å¥—é“¾è·¯è·‘é€šã€‚pyseekdb æä¾›çš„æ˜¯ååº”ç”¨ä¾§çš„ SDKï¼šä»¥ collection ä¸ºä¸­å¿ƒç»„ç»‡æ•°æ®ä¸æ£€ç´¢é€»è¾‘ï¼Œè¦†ç›–å‘é‡ã€å…¨æ–‡ä¸æ··åˆæ£€ç´¢ï¼Œå¹¶åŒæ—¶æ”¯æŒåµŒå…¥å¼ä¸è¿œç¨‹æ¨¡å¼ã€‚</p>
<h3 data-id="heading-3">3.1 ä¸¤ç§è¿æ¥å½¢æ€</h3>
<p>pyseekdb æ”¯æŒï¼š</p>
<ul>
<li>åµŒå…¥å¼ï¼šåœ¨ Python è¿›ç¨‹å†…ä½¿ç”¨æœ¬åœ°è·¯å¾„æŒä¹…åŒ–æ•°æ®ï¼Œé€‚åˆæœ¬åœ°å®éªŒã€æµ‹è¯•æˆ–è½»é‡åº”ç”¨ã€‚</li>
<li>è¿œç¨‹ï¼šè¿æ¥åˆ°è¿œç¨‹ seekdb æœåŠ¡æˆ– OceanBase é›†ç¾¤ã€‚</li>
</ul>
<h3 data-id="heading-4">3.2 æ··åˆæ£€ç´¢ï¼ˆHybrid Searchï¼‰</h3>
<p>åœ¨ pyseekdb ä¸­ï¼Œå¯ä»¥é€šè¿‡ query è°ƒç”¨æ‰§è¡Œå‘é‡æ£€ç´¢æˆ–æ··åˆæ£€ç´¢ï¼ˆç”±åç«¯èƒ½åŠ›ä¸é…ç½®å†³å®šï¼‰ï¼Œè¿”å›åŒ…å«ç›¸ä¼¼åº¦ä¸æ–‡æ¡£ç‰‡æ®µçš„ç»“æœé›†ã€‚ä¸ç›´æ¥æ“æ§åº•å±‚ç´¢å¼•ç›¸æ¯”ï¼Œè¿™ç§æ–¹å¼æ›´é€‚åˆåº”ç”¨ä¾§å¿«é€Ÿè½åœ°ã€‚</p>
<h3 data-id="heading-5">04 ä¸ºä»€ä¹ˆ pyseekdb éœ€è¦ uv</h3>
<p>pyseekdb æœ¬èº«ä¸ä¸€å®šé‡ï¼Œä½†å®ƒç»å¸¸ä¼šå’Œ LangChainã€LlamaIndexã€Dify ç­‰ç»„åˆä½¿ç”¨ã€‚ä¸€æ—¦ä¾èµ–å¼€å§‹å˜é‡ï¼Œç¯å¢ƒåˆå§‹åŒ–ä¸å¤ç°å°±æ›´å®¹æ˜“æ‹–æ…¢åä½œæ•ˆç‡ã€‚
<code>uv</code> åœ¨è¿™é‡Œçš„ä»·å€¼ä¸»è¦æ˜¯ä¸¤ç‚¹ï¼š</p>
<ul>
<li>ç”¨ <code>uv.lock</code> æ˜ç¡®é”å®šè§£æç»“æœï¼Œå¹¶ç”¨ <code>uv sync</code> / <code>uv run</code> æŠŠå®‰è£…/åŒæ­¥/è¿è¡Œæ”¶æ•›åˆ°æ›´å°‘çš„æ­¥éª¤ã€‚</li>
<li>åœ¨å…±äº« demo æ—¶ï¼Œç”¨ <code>uv sync</code> æˆ– <code>uv run</code> å°½é‡å¤ç°åŒä¸€å¥—ç¯å¢ƒã€‚</li>
</ul>
<p><strong>pyseekdb çš„åµŒå…¥å¼ç‰¹æ€§é…åˆ uv çš„è½»é‡ç¯å¢ƒï¼Œè®©å¼€å‘è€…åœ¨æ™®é€šç¬”è®°æœ¬ä¸Šå°±èƒ½å®Œæˆä»æ•°æ®å¯¼å…¥ã€ç´¢å¼•æ„å»ºåˆ° RAG é—®ç­”çš„å…¨æµç¨‹å¼€å‘ã€‚</strong></p>
<h3 data-id="heading-6">05 æ‰‹æŠŠæ‰‹æ•™ä½ è½»æ¾æ„å»º</h3>
<p>ä¸‹é¢ç”¨ pyseekdb GitHub å®˜æ–¹ demo/rag è·‘é€šä¸€æ¡å®Œæ•´é“¾è·¯ï¼Œç›®æ ‡æ˜¯è®©ä½ åœ¨ 5 åˆ†é’Ÿå†…ä»â€œç¯å¢ƒå‡†å¤‡â€åˆ°â€œå¯æŸ¥è¯¢çš„çŸ¥è¯†åº“ç•Œé¢â€ã€‚</p>
<p><strong>å‰ç½®æ¡ä»¶</strong>ï¼š</p>
<ul>
<li>Python 3.11+</li>
<li>å·²å®‰è£… uv</li>
<li>å·²å‡†å¤‡ LLM API Keyï¼ˆç”¨äºç”Ÿæˆå›ç­”ï¼‰</li>
<li>pyseekdb</li>
</ul>
<p><strong>æ­¥éª¤ 1ï¼šå‡†å¤‡ç¯å¢ƒ</strong></p>
<pre><code class="hljs language-plain" lang="plain">git clone https://github.com/oceanbase/pyseekdb.git
cd demo/rag
uv sync
</code></pre>
<p>å¦‚æœéœ€è¦æœ¬åœ°æ¨¡å‹ï¼ˆ<code>sentence-transformers</code>ï¼‰</p>
<pre><code class="hljs language-plain" lang="plain">uv sync --extra local
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šé…ç½® .env</strong></p>
<pre><code class="hljs language-plain" lang="plain">cp .env.example .env
</code></pre>
<p>æ¨èå…ˆç”¨é»˜è®¤ embeddingï¼ˆæ— éœ€é¢å¤– API Keyï¼‰ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">EMBEDDING_FUNCTION_TYPE=default
OPENAI_API_KEY=sk-your-key
OPENAI_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
OPENAI_MODEL_NAME=qwen-plus
SEEKDB_DIR=./data/seekdb_rag
SEEKDB_NAME=test
COLLECTION_NAME=embeddings
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>default ä¼šè‡ªåŠ¨ä¸‹è½½å†…ç½® ONNX æ¨¡å‹ï¼Œé€‚åˆå…ˆéªŒè¯æµç¨‹ã€‚</li>
<li>è‹¥æ”¹ä¸º apiï¼Œè¯·è¡¥é½<code>EMBEDDING_*</code>ç›¸å…³é…ç½®ã€‚</li>
<li>è‹¥æ”¹ä¸º localï¼Œè¯·é…ç½®<code>SENTENCE_TRANSFORMERS_*</code>å¹¶ç¡®ä¿å·²å®‰è£…<code>--extra local</code>ä¾èµ–ã€‚</li>
</ul>
<p><strong>æ­¥éª¤ 3ï¼šå¯¼å…¥æ•°æ®</strong></p>
<pre><code class="hljs language-plain" lang="plain">uv run python seekdb_insert.py ../../README.md
</code></pre>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2026/png/32756313/1770947523807-728fd488-e2eb-4540-b9bc-ce31d18e79ca.png" alt="" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥å¯¼å…¥ç›®å½•ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">uv run python seekdb_insert.py path/to/your_dir
</code></pre>
<p>ä½ ä¼šçœ‹åˆ°è„šæœ¬è¾“å‡ºå¯¼å…¥çš„åˆ†å—æ•°é‡ä¸è¿›åº¦ï¼ŒæˆåŠŸåæ•°æ®ä¼šè½åœ¨<code>SEEKDB_DIR</code>æŒ‡å®šç›®å½•ä¸­ã€‚</p>
<p><strong>æ­¥éª¤ 4ï¼šå¯åŠ¨ç•Œé¢</strong></p>
<pre><code class="hljs language-plain" lang="plain">uv run streamlit run seekdb_app.py
</code></pre>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2026/png/32756313/1770947523875-440befd2-c821-4b54-9790-c91d30f577f5.png" alt="" loading="lazy"/></p>
<p>å¯åŠ¨åæ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨è¾“å…¥æ¡†é‡Œæé—®å³å¯çœ‹åˆ°ï¼š</p>
<ul>
<li>æ£€ç´¢åˆ°çš„ç›¸å…³ç‰‡æ®µ</li>
<li>LLM çš„ç”Ÿæˆå›ç­”ï¼ˆä¾èµ–ä½ åœ¨<code>.env</code>é‡Œé…ç½®çš„ LLMï¼‰</li>
</ul>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2026/png/32756313/1770947523869-981b2e84-adab-4da0-b55d-6931acd31622.png" alt="" loading="lazy"/></p>
<p><strong>æ•ˆæœï¼š</strong></p>
<ul>
<li>æ–‡æ¡£è¢«åˆ‡åˆ†ã€å‘é‡åŒ–å¹¶å†™å…¥ seekdb</li>
<li>æŸ¥è¯¢æ—¶æ‰§è¡Œå‘é‡/æ··åˆæ£€ç´¢</li>
<li>UI ä¸­å±•ç¤ºæ£€ç´¢ç»“æœä¸ LLM ç”Ÿæˆç­”æ¡ˆ</li>
</ul>
<h2 data-id="heading-7">06 å›å½’å¼€å‘çš„æœ¬è´¨</h2>
<p>uv è§£å†³çš„æ˜¯é¡¹ç›®ç¯å¢ƒå¯å¤ç°ä¸æµç¨‹æ”¶æ•›ï¼Œpyseekdb è§£å†³çš„æ˜¯RAG åœºæ™¯ä¸‹çš„å­˜å‚¨ä¸æ£€ç´¢è½åœ°æˆæœ¬å’Œæ˜“ç”¨æ€§ã€‚æŠŠä¸¤è€…æ”¾åœ¨ä¸€èµ·ï¼Œæ˜¯æŠŠ demo äº¤ä»˜ä¸åä½œæ—¶çš„æ‘©æ“¦åšå°ï¼šé¡¹ç›®ç»“æ„ã€ä¾èµ–ã€è¿è¡Œæ–¹å¼æ›´ç»Ÿä¸€ï¼›æœ¬åœ° embedded èƒ½å¿«é€Ÿå¼€å§‹ï¼Œä¹‹åå†æŒ‰éœ€è¦åˆ‡åˆ°è¿œç¨‹æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAGçš„åŸºçŸ³-æ•°æ®åŠ è½½]]></title>    <link>https://juejin.cn/post/7605811866908246025</link>    <guid>https://juejin.cn/post/7605811866908246025</guid>    <pubDate>2026-02-13T01:07:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866908246025" data-draft-id="7605711582430674995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAGçš„åŸºçŸ³-æ•°æ®åŠ è½½"/> <meta itemprop="keywords" content="AIGC,LangChain"/> <meta itemprop="datePublished" content="2026-02-13T01:07:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¶æ¶æ¶æ„å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/860253654882618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAGçš„åŸºçŸ³-æ•°æ®åŠ è½½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/860253654882618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¶æ¶æ¶æ„å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T01:07:00.000Z" title="Fri Feb 13 2026 01:07:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RAG</h2>
<p>RAG æ˜¯ <strong>Retrieval-Augmented Generationï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong> çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§ç»“åˆã€Œå¤–éƒ¨çŸ¥è¯†æ£€ç´¢ã€å’Œã€Œå¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆã€çš„æŠ€æœ¯æ–¹æ¡ˆã€‚é€šä¿—çš„æ¥è¯´æ˜¯é€šè¿‡å¤§æ¨¡å‹æ¥å›ç­”é—®é¢˜çš„æ—¶å€™ï¼Œå»æ£€ç´¢å¤–éƒ¨çŸ¥è¯†åº“çš„ç›¸å…³ä¿¡æ¯ï¼Œåœ¨åŸºäºè¿™äº›ä¿¡æ¯ç”Ÿæˆå†…å®¹ã€‚</p>
<p>å¯èƒ½æœ‰çš„äº¦è²ã€å½¦ç¥–ä»¬è¦é—®äº†ï¼Œä¸ºå•¥éœ€è¦æ£€ç´¢å¤–éƒ¨çš„çŸ¥è¯†åº“ï¼Œæˆ‘ç›´æ¥é—®å¤§æ¨¡å‹ä¸è¡Œå—ã€‚å¦‚æœæ˜¯é—®ä¸€äº›åŸºæœ¬çŸ¥è¯†ï¼Œæ˜¯å¯ä»¥çš„ã€‚ä½†æ˜¯æƒ³è¦é—®ä¸€äº›æœ€æ–°èµ„æ–™ï¼Œæˆ–è€…æ˜¯ç§æœ‰èµ„æ–™çš„å†…å®¹ï¼Œæ˜¯ä¸è¡Œçš„ï¼å› ä¸ºå¤§æ¨¡å‹çš„çŸ¥è¯†æ˜¯â€œå›ºåŒ–â€åœ¨è®­ç»ƒæ•°æ®é‡Œçš„ï¼Œæ— æ³•å®æ—¶æ›´æ–°ï¼Œæ›´ä¸äº†è§£ç§æœ‰èµ„æ–™çš„å†…å®¹ã€‚æ‰€ä»¥é€šè¿‡RAGæ£€ç´¢åˆ°èµ„æ–™çš„æ•°æ®ï¼Œå°†æ•°æ®ä¼ é€’ç»™å¤§æ¨¡å‹ï¼Œè®©å…¶åŸºäºè¿™äº›æ•°æ®ç”Ÿæˆä½ æƒ³è¦çš„å›ç­”ã€‚</p>
<h2 data-id="heading-1">åº”ç”¨èƒŒæ™¯</h2>
<p>é‚£ä¹ˆRAGæŠ€æœ¯å¯ä»¥å¹²ä»€ä¹ˆï¼Ÿå¯ä»¥æ­å»ºä»¥ä¸‹ç³»ç»Ÿï¼š</p>
<ul>
<li>ä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“ï¼šå°†ä¼ä¸šæ–‡æ¡£å­˜å…¥RAGçŸ¥è¯†åº“ï¼Œç³»ç»Ÿå›ç­”å¯¹åº”çš„æ–‡æ¡£å†…å®¹ï¼Œé¿å…äººå·¥å¤§é‡çš„ç¿»é˜…æ–‡æ¡£</li>
<li>æ™ºèƒ½å®¢æœï¼šå°†æœ€æ–°çš„ä¸šåŠ¡è§„åˆ™å’Œäº§å“æ‰‹å†Œå­˜å…¥RAGçŸ¥è¯†åº“ï¼Œç³»ç»Ÿå›ç­”å®¢æˆ·äº§å“ç›¸å…³é—®é¢˜</li>
<li>é‡‘è/åŒ»ç–—ç­‰åˆè§„æ€§è¡Œä¸šï¼šå°†åˆè§„æ–‡æ¡£å’Œè¡Œä¸šæŒ‡å—å­˜å…¥RAGæ•°æ®åº“ï¼Œè®©ç³»ç»Ÿç»™å‡ºå»ºè®®å’Œæ€»ç»“</li>
</ul>
<h2 data-id="heading-2">æŠ€æœ¯å®ç°</h2>
<h3 data-id="heading-3">æ•°æ®åŠ è½½</h3>
<p>åšRAGç³»ç»Ÿçš„ç¬¬ä¸€æ­¥å°±æ˜¯æ•°æ®çš„å¯¼å…¥ï¼Œæ¥ä¸‹æ¥ç®€å•åˆ—ä¸‹æ•°æ®åŠ è½½çš„å„ç§æŠ€æœ¯ï¼Œä¾›å„ä½äº¦è²ã€å½¦ç¥–ä»¬å‚è€ƒ</p>
<h4 data-id="heading-4">æ‰€ç”¨æŠ€æœ¯</h4>
<h5 data-id="heading-5">Langchain</h5>
<p>LangChain æ˜¯ä»€ä¹ˆï¼Œæ˜¯ä¸€ä¸ªä¸“ä¸º<strong>æ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é©±åŠ¨çš„åº”ç”¨ç¨‹åºè®¾è®¡çš„å¼€æºæ¡†æ¶</strong>ã€‚ä¸»è¦æ˜¯è®©å¼€å‘è€…èƒ½å¿«é€Ÿçš„æ„å»ºå‡ºå¤æ‚çš„LLMåº”ç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬æ–‡ä¸­æ‰€æåˆ°çš„RAGç³»ç»Ÿã€‚æ¡†æ¶æä¾›äº†ä»¥ä¸‹çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç”¨æ¥æ„å»ºå¤æ‚çš„LLMåº”ç”¨ã€‚</p>
<ul>
<li>å·¥å…·é›†æˆï¼šè¿æ¥å„ç§APIå’Œå¤–éƒ¨å·¥å…·</li>
<li>è®°å¿†ï¼šç®¡ç†å¯¹è¯å†å²</li>
<li>é“¾å¼è°ƒç”¨ï¼šå°†å¤šä¸ªLLMè°ƒç”¨å’Œå·¥å…·ç»“åˆèµ·æ¥</li>
<li>ä»£ç†ï¼šè®©LLMè‡ªä¸»å†³ç­–å’Œä½¿ç”¨å·¥å…·</li>
</ul>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2F" target="_blank" title="https://docs.langchain.com/" ref="nofollow noopener noreferrer">docs.langchain.com/</a></p>
<h5 data-id="heading-6">LIamaIndex</h5>
<p>LIamaIndex æ˜¯ä¸€å¥— <strong>ä¸“æ³¨äºã€Œæ–‡æ¡£ç†è§£ä¸çŸ¥è¯†åº“é—®ç­”ã€çš„å¼€æºæ¡†æ¶</strong>ï¼Œå°¤å…¶é€‚ç”¨äºRAGç³»ç»Ÿï¼Œæ“…é•¿æ–‡æ¡£å¤„ç†ã€æ£€ç´¢ä¼˜åŒ–ã€‚å®˜æ–¹ç½‘ç«™: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.llamaindex.ai%2F" target="_blank" title="https://www.llamaindex.ai/" ref="nofollow noopener noreferrer">www.llamaindex.ai/</a></p>
<h5 data-id="heading-7">Unstructured</h5>
<p>Unstructured æ˜¯ä¸€æ¬¾ä¸“æ³¨äº<strong>éç»“æ„åŒ–æ–‡æ¡£æ•°æ®å¤„ç†çš„å¼€æºå·¥å…·åº“</strong>ï¼Œæ ¸å¿ƒèƒ½åŠ›å°†å¤æ‚çš„æ–‡æ¡£ï¼ˆPDFã€Wordã€ç½‘é¡µï¼‰å’Œéç»“æ„åŒ–æ–‡æ¡£è½¬æ¢æˆè§„æ•´ï¼Œå¯ç›´æ¥ä¾›ç»™å¤§æ¨¡å‹æˆ–RAGä½¿ç”¨çš„ç»“æ„åŒ–æ•°æ®ã€‚å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.unstructured.io%2F" target="_blank" title="https://docs.unstructured.io/" ref="nofollow noopener noreferrer">docs.unstructured.io/</a></p>
<p>çœ‹åˆ°è¿™å„¿ï¼Œæœ‰çš„å°ä¼™ä¼´å¯èƒ½ä¼šé—®ï¼Œä¸ºå•¥æˆ‘ä¼šé€‰æ‹© Pythonçš„æŠ€æœ¯æ¡†æ¶ï¼Œè€Œä¸ç”¨Javaçš„ <strong>Langchain4j</strong>ã€‚å› ä¸ºåœ¨ Python ç”Ÿæ€ä¸‹æ„å»º LLM/RAG åº”ç”¨ï¼ŒLangChain è¿œæ¯” langchain4j æ›´ä¸°å¯Œã€æ›´å¥½ç”¨ï¼</p>
<h4 data-id="heading-8">ç¯å¢ƒå‡†å¤‡</h4>
<ol>
<li>ä¸‹è½½å®‰è£… <strong>Miniconda</strong>, Minicondaæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ Python ç¯å¢ƒç®¡ç†å·¥å…·ï¼Œä»…åŒ…å« conda åŒ…ç®¡ç†å™¨å’Œ Python æ ¸å¿ƒï¼Œå¯ä¾¿æ·åˆ›å»ºã€ç®¡ç†ç‹¬ç«‹çš„ Python ç¯å¢ƒã€‚å›½å†…é•œåƒåœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmirrors.tuna.tsinghua.edu.cn%2Fanaconda%2Fminiconda%2F" target="_blank" title="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/" ref="nofollow noopener noreferrer">mirrors.tuna.tsinghua.edu.cn/anaconda/miâ€¦</a></li>
<li>åˆ›å»ºä¸€ä¸ªrequeriment.txtæ–‡ä»¶ï¼Œç®¡ç†å„ç§ä¾èµ–:</li>
</ol>

<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ ¸å¿ƒLLMæ¡†æ¶ä¾èµ–</span>
<span class="hljs-meta prompt_">llama-index&gt;</span><span class="bash">=0.10.0</span>
<span class="hljs-meta prompt_">python-dotenv&gt;</span><span class="bash">=1.0.0</span>
<span class="hljs-meta prompt_">openai&gt;</span><span class="bash">=1.0.0</span>
<span class="hljs-meta prompt_">langchain&gt;</span><span class="bash">=0.1.0</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">å…³é”®å‡çº§ï¼šlangchain-community éœ€ &gt;= 0.2.0 æ‰æ”¯æŒ headers å‚æ•°</span>
<span class="hljs-meta prompt_">langchain-community&gt;</span><span class="bash">=0.2.0</span>
<span class="hljs-meta prompt_">langchain-openai&gt;</span><span class="bash">=0.1.0</span>
<span class="hljs-meta prompt_">langchain-text-splitters&gt;</span><span class="bash">=0.0.1</span>
<span class="hljs-meta prompt_">langchain-core&gt;</span><span class="bash">=0.1.0</span>
<span class="hljs-meta prompt_">langchain-huggingface&gt;</span><span class="bash">=0.0.3</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">æ–‡æœ¬å¤„ç†/åµŒå…¥ä¾èµ–</span>
<span class="hljs-meta prompt_">sentence-transformers&gt;</span><span class="bash">=2.2.0</span>
<span class="hljs-meta prompt_">markdown&gt;</span><span class="bash">=3.4.0</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">æ–‡æ¡£è§£æä¾èµ–</span>
<span class="hljs-meta prompt_">unstructured&gt;</span><span class="bash">=0.10.30</span>
<span class="hljs-meta prompt_">unstructured[pdf]&gt;</span><span class="bash">=0.10.30</span>
<span class="hljs-meta prompt_">unstructured[ppt]&gt;</span><span class="bash">=0.10.30</span>
<span class="hljs-meta prompt_">langchain-unstructured&gt;</span><span class="bash">=0.1.0</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">Windows ç³»ç»Ÿä¾èµ–ï¼ˆè§£å†³æ–‡ä»¶è§£æ/è·¯å¾„é—®é¢˜ï¼‰</span>
<span class="hljs-meta prompt_">pywin32&gt;</span><span class="bash">=306</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">Unstructured è§£æ markdown å¿…éœ€çš„ä¾èµ–</span>
<span class="hljs-meta prompt_">markdown-it-py&gt;</span><span class="bash">=3.0.0</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">PDF/OCRç›¸å…³ä¾èµ–</span>
<span class="hljs-meta prompt_">pdf2image&gt;</span><span class="bash">=1.16.0</span>
<span class="hljs-meta prompt_">pytesseract&gt;</span><span class="bash">=0.3.10</span>
â€‹
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">å›¾ç‰‡è¯†åˆ«æ ¸å¿ƒä¾èµ–ï¼ˆPaddleOCR æ–¹æ¡ˆï¼‰</span>
<span class="hljs-meta prompt_">paddlepaddle&gt;</span><span class="bash">=2.6.0</span>
<span class="hljs-meta prompt_">paddleocr&gt;</span><span class="bash">=2.7.0</span>
<span class="hljs-meta prompt_">pillow&gt;</span><span class="bash">=10.0.0</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">llama-index æ ¸å¿ƒä¾èµ–ï¼ˆæ•°æ®åº“è¯»å–åŠŸèƒ½ï¼‰</span>
<span class="hljs-meta prompt_">llama-index-readers-database&gt;</span><span class="bash">=0.1.0</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">MySQL æ•°æ®åº“é©±åŠ¨ï¼ˆå¿…é¡»ï¼‰</span>
<span class="hljs-meta prompt_">mysql-connector-python&gt;</span><span class="bash">=8.0.0</span>
<span class="hljs-meta prompt_"># </span><span class="bash">æˆ–å¤‡é€‰é©±åŠ¨ï¼ˆäºŒé€‰ä¸€ï¼Œæ¨èä¸Šé¢çš„ï¼‰</span>
<span class="hljs-meta prompt_"># </span><span class="bash">pymysql&gt;=1.1.0</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">æ–°å¢ï¼šSQLAlchemy é€‚é… MySQL çš„ä¾èµ–</span>
<span class="hljs-meta prompt_">sqlalchemy&gt;</span><span class="bash">=2.0.0</span>
â€‹
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">æ ¸å¿ƒä¾èµ–</span>
<span class="hljs-meta prompt_">fastapi&gt;</span><span class="bash">=0.115.0</span>
<span class="hljs-meta prompt_">uvicorn[standard]&gt;</span><span class="bash">=0.32.0</span>
<span class="hljs-meta prompt_">pydantic&gt;</span><span class="bash">=2.0.0</span>
<span class="hljs-meta prompt_">pydantic-settings&gt;</span><span class="bash">=2.0.0</span>
â€‹
<span class="hljs-meta prompt_"># </span><span class="bash">æ‰©å±•ä¾èµ–ï¼ˆä½ çš„åœºæ™¯éœ€è¦ï¼‰</span>
<span class="hljs-meta prompt_">python-multipart&gt;</span><span class="bash">=0.0.17  <span class="hljs-comment"># æ–‡ä»¶ä¸Šä¼ </span></span>
<span class="hljs-meta prompt_">python-dotenv&gt;</span><span class="bash">=1.0.0  <span class="hljs-comment"># è¯»å–.envæ–‡ä»¶</span></span>
<span class="hljs-meta prompt_">requests&gt;</span><span class="bash">=2.32.0  <span class="hljs-comment"># è°ƒç”¨AIæ¥å£</span></span>
â€‹
<span class="hljs-meta prompt_">#</span><span class="bash">æ•°æ®åˆ†æ</span>
<span class="hljs-meta prompt_">pandas&gt;</span><span class="bash">=2.2.2</span>
</code></pre>
<h4 data-id="heading-9">å®ç°</h4>
<h5 data-id="heading-10">æ–‡æœ¬</h5>
<p>Unstructured åŠ è½½ txtã€mdæ ¼å¼æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> unstructured.partition.text <span class="hljs-keyword">import</span> partition_text
<span class="hljs-keyword">from</span> unstructured.partition.md <span class="hljs-keyword">import</span> partition_md
â€‹
text_file = <span class="hljs-string">"../../document/ä¼ä¸šæ¦‚å†µä¸åˆ†ææ¡†æ¶.txt"</span>
md_file = <span class="hljs-string">"../../document/ä¼ä¸šè´¢åŠ¡æŠ¥è¡¨åˆ†æ.md"</span>
â€‹
â€‹
<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_and_analyze_elements</span>(<span class="hljs-params">elements, file_type</span>):
â€‹
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n========== è§£æ <span class="hljs-subst">{file_type}</span> æ–‡ä»¶ =========="</span>)
â€‹
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nã€åŸå§‹å…ƒç´ è¾“å‡ºã€‘:"</span>)
 Â  Â <span class="hljs-keyword">for</span> element <span class="hljs-keyword">in</span> elements:
 Â  Â  Â  Â <span class="hljs-built_in">print</span>(element)
 Â  Â <span class="hljs-comment"># è¯¦ç»†åˆ†ææ¯ä¸ªå…ƒç´ çš„å…ƒæ•°æ®</span>
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nã€å…ƒç´ è¯¦ç»†å…ƒæ•°æ®ã€‘:"</span>)
 Â  Â <span class="hljs-keyword">for</span> i, element <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(elements):
 Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n--- ç¬¬ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span> ä¸ªå…ƒç´  ---"</span>)
 Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å…ƒç´ ç±»å‹: <span class="hljs-subst">{element.__class__.__name__}</span>"</span>)
 Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡æœ¬å†…å®¹: <span class="hljs-subst">{element.text.strip() <span class="hljs-keyword">or</span> <span class="hljs-string">'æ— æ–‡æœ¬å†…å®¹'</span>}</span>"</span>)
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(element, <span class="hljs-string">"metadata"</span>) <span class="hljs-keyword">and</span> element.metadata:
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"å…ƒæ•°æ®:"</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> element.metadata.__dict__.items():
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> key.startswith(<span class="hljs-string">"_"</span>) <span class="hljs-keyword">and</span> value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ <span class="hljs-subst">{key}</span>: <span class="hljs-subst">{value}</span>"</span>)
â€‹
â€‹
<span class="hljs-comment"># 1. è§£ææ–‡æœ¬æ–‡ä»¶</span>
text_elements = partition_text(text_file)
parse_and_analyze_elements(text_elements, <span class="hljs-string">"æ–‡æœ¬(TXT)"</span>)
â€‹
<span class="hljs-comment"># 2. è§£æMDæ–‡ä»¶</span>
md_elements = partition_md(md_file)
parse_and_analyze_elements(md_elements, <span class="hljs-string">"Markdown(MD)"</span>)
</code></pre>
<p>è¿”å›ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24ec838058f544b9931012ef3658b6cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=F1tlDHGRKi8zLhTUsxCTG3Y4XB4%3D" alt="txt_1.png" loading="lazy"/></p>
<p>Langchain åŠ è½½ txtã€mdã€jsonæ ¼å¼æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from langchain_community.document_loaders import (
 Â  Â TextLoader,
 Â  Â JSONLoader,
 Â  Â UnstructuredMarkdownLoader,
)
â€‹
<span class="hljs-comment"># åŠ è½½txt</span>
<span class="hljs-attr">loader</span> = TextLoader(<span class="hljs-string">"../../document/ä¼ä¸šæ¦‚å†µä¸åˆ†ææ¡†æ¶.txt"</span>, encoding=<span class="hljs-string">"utf-8"</span>)
<span class="hljs-attr">documents</span> = loader.load()
print(documents)
â€‹
<span class="hljs-comment"># åŠ è½½æ•´ä¸ªjson</span>
<span class="hljs-attr">loader2</span> = JSONLoader(
 Â  Â <span class="hljs-attr">file_path</span>=<span class="hljs-string">"../../document/ä¼ä¸šæ¦‚å†µä¸åˆ†ææ¡†æ¶.json"</span>,
 Â  Â <span class="hljs-attr">jq_schema</span>=<span class="hljs-string">"."</span>,
 Â  Â <span class="hljs-attr">text_content</span>=<span class="hljs-literal">False</span>,
)
<span class="hljs-attr">documents2</span> = loader2.load()
print(documents2)
â€‹
<span class="hljs-comment"># åŠ è½½md</span>
<span class="hljs-attr">markdown_path</span> = <span class="hljs-string">"../../document/ä¼ä¸šè´¢åŠ¡æŠ¥è¡¨åˆ†æ.md"</span>
<span class="hljs-attr">loader</span> = UnstructuredMarkdownLoader(markdown_path)
â€‹
<span class="hljs-attr">data</span> = loader.load()
print(data<span class="hljs-section">[0]</span>.page_content<span class="hljs-section">[:100]</span>)
â€‹
</code></pre>
<p>è¿”å›ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/441b8ce1d70b48fc909a597cf392ebf3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=yhFTpdNB7iRMxsLyWexxib7TTyM%3D" alt="txt_2.png" loading="lazy"/></p>
<p>ä¸¤è€…çš„ä¸åŒä¹‹å¤„ï¼šlangchainè¾“å‡ºçš„æ˜¯ æ ‡å‡†çš„<code>Document</code>å¯¹è±¡ï¼Œç»“æ„éå¸¸ç®€å•ï¼›Unstructured è¾“å‡ºçš„æ˜¯å…¶ä¸“å±çš„å…ƒç´ å¯¹è±¡ï¼Œä¼šæŒ‰ç…§è¯­ä¹‰è¿›è¡Œæ‹†åˆ†æ–‡ä»¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«æ–‡ä¸­çš„æ ‡é¢˜ã€æ®µè½ã€åˆ—è¡¨å’Œè¡¨æ ¼ç­‰ç»“æ„ï¼Œæ‹†åˆ†æˆä¸åŒç±»å‹çš„å…ƒç´ ï¼Œå…ƒæ•°æ®ä¹Ÿæ›´è¯¦ç»†ï¼ˆæ¯”å¦‚æŸæ®µæ–‡å­—åœ¨æ–‡ä»¶çš„ç¬¬å‡ è¡Œï¼‰ã€‚</p>
<h5 data-id="heading-11">PDF</h5>
<p>LangchainåŠ è½½PDFæ ¼å¼ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> langchain_community.document_loaders <span class="hljs-keyword">import</span> PyPDFLoader, PyMuPDFLoader, PDFPlumberLoader
â€‹
PDF_PATH = <span class="hljs-string">"../../document/ä¼ä¸šè´¢åŠ¡æŠ¥è¡¨åˆ†æ-å›¾è¡¨.pdf"</span>
LOADERS = {<span class="hljs-string">"PyPDFLoader"</span>: PyPDFLoader, <span class="hljs-string">"PyMuPDFLoader"</span>: PyMuPDFLoader, <span class="hljs-string">"PDFPlumberLoader"</span>: PDFPlumberLoader}
â€‹
<span class="hljs-comment"># 1. è€—æ—¶å¯¹æ¯”</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== è€—æ—¶å¯¹æ¯” ==="</span>)
results = {}
<span class="hljs-keyword">for</span> name, cls <span class="hljs-keyword">in</span> LOADERS.items():
 Â  Â t0 = time.perf_counter()
 Â  Â docs = cls(PDF_PATH).load()
 Â  Â results[name] = docs
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{name}</span>ï¼šé¡µæ•°=<span class="hljs-subst">{<span class="hljs-built_in">len</span>(docs)}</span>ï¼Œè€—æ—¶=<span class="hljs-subst">{time.perf_counter()-t0:<span class="hljs-number">.3</span>f}</span>s"</span>)
â€‹
<span class="hljs-comment"># 2. æ•ˆæœé¢„è§ˆ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æŠ½å–æ•ˆæœé¢„è§ˆ==="</span>)
<span class="hljs-keyword">for</span> name, docs <span class="hljs-keyword">in</span> results.items():
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"---------------------------------------------------------"</span>)
 Â  Â preview = docs[<span class="hljs-number">1</span>].page_content[:<span class="hljs-number">500</span>].strip() <span class="hljs-keyword">if</span> docs <span class="hljs-keyword">else</span> <span class="hljs-string">"æ— å†…å®¹"</span>
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{name}</span>: <span class="hljs-subst">{preview}</span>"</span>)
 Â  Â preview2 = docs[<span class="hljs-number">9</span>].page_content[:<span class="hljs-number">500</span>].strip() <span class="hljs-keyword">if</span> docs <span class="hljs-keyword">else</span> <span class="hljs-string">"æ— å†…å®¹"</span>
 Â  Â meta9 = docs[<span class="hljs-number">9</span>].metadata
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{name}</span>: <span class="hljs-subst">{preview2}</span> <span class="hljs-subst">{meta9}</span>"</span>)
</code></pre>
<p>è¿”å›ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f7378efd58f4220a179ce93b0f55536~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=31PYymHc0l3N%2Fzxc9ARklKk60is%3D" alt="pdf_1.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fdb6a53a5e945308174d1db40e09afc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=v9dUggrkxPrjNr0NLfAfNATJOgw%3D" alt="pdf_2.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70c01e8609dd409aaf905b6bb2b2fd95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=xB7l620pCHmgWY8bHhJBvQ1CfLE%3D" alt="pdf_3.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce6e7a9d2c1d4e49be828969dc3b3ce9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=AjGASV65OO98WKlXSLw7HJJm2qc%3D" alt="pdf_4.png" loading="lazy"/></p>
<p>ä»è¿”å›çš„ç»“æœæ¥çœ‹PyMuPDFLoaderæ˜¯æœ€å¿«çš„ï¼Œä½†æ˜¯PDFä¸­çš„è¡¨æ ¼ç»“æ„åŒ–æå–ä¸æ˜¯å¾ˆå¥½ï¼Œæ˜¾ç¤ºçš„å†…å®¹å¾ˆä¹±ã€‚å…¶æ¬¡æ˜¯PyPDFLoaderæå–é€Ÿåº¦æ¯”PyMuPDFLoaderæ…¢ç‚¹ï¼Œä½†æ˜¯å¯ä»¥å¯¹pdfè¡¨æ ¼ç»“æ„åŒ–æå–ã€‚æœ€åPDFPlumberLoaderæ˜¯æœ€æ…¢çš„ï¼Œä¸è¿‡ä¹Ÿæ˜¯å¯ä»¥å¯¹pdfè¡¨æ ¼ç»“æ„åŒ–æå–ï¼Œå¯¹è¡¨æ ¼åŒ–æå–æ”¯æŒæ¯”è¾ƒå¥½ã€‚è¿™ä¸‰ä¸ªçš„å¯¹æ¯”å¦‚ä¸‹ï¼š</p>



































<table><thead><tr><th>åœºæ™¯</th><th>é¦–é€‰åŠ è½½å™¨</th><th>åŸå› </th></tr></thead><tbody><tr><td>æ‰¹é‡è§£æå¤§é‡çº¯æ–‡æœ¬ PDF</td><td>PyMuPDFLoader</td><td>é€Ÿåº¦å¿«ã€å…¼å®¹æ€§å¼º</td></tr><tr><td>æå– PDF ä¸­çš„è¡¨æ ¼ï¼ˆå¦‚è´¢åŠ¡æŠ¥è¡¨ï¼‰</td><td>PDFPlumberLoader</td><td>è¡¨æ ¼ç»“æ„åŒ–æå–</td></tr><tr><td>è½»é‡éƒ¨ç½²ï¼ˆæ— å¤šä½™ä¾èµ–ï¼‰</td><td>PyPDFLoader</td><td>ä»…ä¾èµ– PyPDF2ï¼Œä½“ç§¯å°</td></tr><tr><td>éœ€æå–æ‰¹æ³¨ / å›¾ç‰‡</td><td>PyMuPDFLoader</td><td>å”¯ä¸€æ”¯æŒå›¾ç‰‡ / æ‰¹æ³¨è§£æ</td></tr><tr><td>å¤æ‚æ’ç‰ˆ PDFï¼ˆåˆ†æ  / åµŒå¥—åˆ—è¡¨ï¼‰</td><td>PDFPlumberLoader</td><td>è§£æç»“æœæœ€ç²¾å‡†</td></tr></tbody></table>
<p>Unstructured åŠ è½½PDFæ ¼å¼ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from unstructured.partition.auto import partition
<span class="hljs-attr">PDF_PATH</span> = <span class="hljs-string">"../../document/ä¼ä¸šè´¢åŠ¡æŠ¥è¡¨åˆ†æ.pdf"</span>
<span class="hljs-attr">elements</span> = partition(filename=PDF_PATH,content_type=<span class="hljs-string">"application/pdf"</span>)
print("\n\n".join(<span class="hljs-section">[str(e) for e in elements]</span>))
</code></pre>
<p>ç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae1962b514ce408d8209052fa6116634~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=h9qB2cIJPvm9w9qkzAItFCanWFY%3D" alt="pdf_4.1.png" loading="lazy"/></p>
<p>Unstructured çš„ç‰¹ç‚¹æ˜¯ï¼Œè¯­ä¹‰ç»“æ„åŒ–è§£æï¼Œä¼šè‡ªåŠ¨è¯†åˆ« PDF ä¸­çš„æ ‡é¢˜ï¼ˆ<code>Title</code>ï¼‰ã€æ®µè½ï¼ˆ<code>NarrativeText</code>ï¼‰ã€åˆ—è¡¨é¡¹ï¼ˆ<code>ListItem</code>ï¼‰ã€è¡¨æ ¼ï¼ˆ<code>Table</code>ï¼‰ç­‰å…ƒç´ ï¼Œæ‹†åˆ†åè¿”å›ä¸åŒç±»å‹çš„å¯¹è±¡</p>
<p>ä¸è¿‡ä»¥ä¸Šè¯´çš„éƒ½æ— æ³•æå–PDFä¸­çš„æŠ˜çº¿å›¾ç­‰å›¾è¡¨çš„æ•°æ®ã€‚å¦‚æœé‡åˆ°æœ‰å¾ˆå¤šå›¾è¡¨æ•°æ®éœ€è¦è§£æå’Œæå–ï¼Œæœ‰ä»¥ä¸‹è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡â€œ<strong>PDF è½¬å›¾ç‰‡ + OCR æ–‡å­—è¯†åˆ«</strong>â€çš„æ–¹æ³•ï¼Œæå–pdfä¸­çš„å›¾è¡¨æ•°æ®ã€‚</p>
<p>PDF è½¬å›¾ç‰‡ + OCR æ–‡å­—è¯†åˆ«æ–¹æ³•å®ç°ï¼š</p>
<p>é¦–å…ˆå®‰è£…ä¾èµ–ï¼š</p>
<p>PDF2image éœ€è¦æ‰‹åŠ¨å®‰è£… poppler</p>
<ul>
<li><strong>Windows</strong> ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foschwartz10612%2Fpoppler-windows%2Freleases" target="_blank" title="https://github.com/oschwartz10612/poppler-windows/releases" ref="nofollow noopener noreferrer">github.com/oschwartz10â€¦</a></li>
<li><strong>macOS</strong> é€šè¿‡ Homebrew å®‰è£…: brew install poppler</li>
<li><strong>Linux</strong> å‘½ä»¤ sudo apt install poppler-utilsã€sudo yum install poppler-utils</li>
</ul>
<p>Tesseract-OCR ä¸‹è½½åœ°å€ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftesseract-ocr%2Ftesseract%2Freleases" target="_blank" title="https://github.com/tesseract-ocr/tesseract/releases" ref="nofollow noopener noreferrer">github.com/tesseract-oâ€¦</a>ï¼‰ï¼Œéœ€å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…ï¼ˆå®‰è£…æ—¶å‹¾é€‰ â€œchi_simâ€ï¼Œæˆ–æ‰‹åŠ¨å¤åˆ¶è¯­è¨€åŒ…åˆ°<code>tessdata</code>ç›®å½•ï¼‰</p>
<ul>
<li><strong>Windows</strong> ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FUB-Mannheim%2Ftesseract%2Fwiki" target="_blank" title="https://github.com/UB-Mannheim/tesseract/wiki" ref="nofollow noopener noreferrer">github.com/UB-Mannheimâ€¦</a></li>
<li><strong>macOS</strong> é€šè¿‡ Homebrew å®‰è£…ï¼šbrew install tesseract tesseract-lang</li>
<li><strong>Linux</strong> å‘½ä»¤ sudo apt install tesseract-ocr tesseract-ocr-chi-simã€sudo yum install tesseract tesseract-langpack-chi_sim</li>
</ul>
<p>ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pdf2image
<span class="hljs-keyword">import</span> pytesseract
<span class="hljs-keyword">import</span> os
â€‹
<span class="hljs-comment"># åˆ›å»º output ç›®å½•</span>
PDF_PATH = <span class="hljs-string">'../../document/ä¼ä¸šè´¢åŠ¡æŠ¥è¡¨åˆ†æ-å›¾è¡¨.pdf'</span>
OUTPUT_DIR = <span class="hljs-string">'output'</span>
POPPLER_PATH = <span class="hljs-string">r'D:\Program Files\poppler-windows\poppler-25.12.0\Library\bin'</span> Â <span class="hljs-comment"># ä½ çš„poppler binè·¯å¾„</span>
TESSERACT_PATH = <span class="hljs-string">r'D:\Program Files\Tesseract-OCR\tesseract.exe'</span> 
â€‹
pytesseract.pytesseract.tesseract_cmd = TESSERACT_PATH
â€‹
<span class="hljs-comment"># åˆ›å»ºoutputç›®å½•ï¼Œå·²å­˜åœ¨åˆ™ä¸æŠ¥é”™</span>
os.makedirs(OUTPUT_DIR, exist_ok=<span class="hljs-literal">True</span>)
â€‹
<span class="hljs-comment"># PDFè½¬å›¾ç‰‡ï¼ˆå…³é”®ï¼šä¼ poppler_pathå‚æ•°ï¼Œè§£å†³popplerä¾èµ–ï¼‰</span>
<span class="hljs-comment"># dpi=300æé«˜å›¾ç‰‡æ¸…æ™°åº¦ï¼Œè®©OCRè¯†åˆ«æ›´å‡†ç¡®</span>
images = pdf2image.convert_from_path(
 Â  Â pdf_path=PDF_PATH,
 Â  Â poppler_path=POPPLER_PATH,
 Â  Â dpi=<span class="hljs-number">300</span>
)
â€‹
<span class="hljs-comment"># ä¿å­˜è½¬æ¢åçš„å›¾ç‰‡</span>
<span class="hljs-keyword">for</span> i, image <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(images):
 Â  Â img_save_path = <span class="hljs-string">f'<span class="hljs-subst">{OUTPUT_DIR}</span>/page_<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>.png'</span>
 Â  Â image.save(img_save_path)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²ä¿å­˜PDFç¬¬<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>é¡µä¸ºå›¾ç‰‡ï¼š<span class="hljs-subst">{img_save_path}</span>"</span>)
â€‹
<span class="hljs-comment"># ç”¨pytesseractæå–ç®€ä½“ä¸­æ–‡æ–‡æœ¬</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¼€å§‹æå–å„é¡µæ–‡æœ¬ï¼š\n"</span> + <span class="hljs-string">"-"</span>*<span class="hljs-number">60</span>)
<span class="hljs-keyword">for</span> i, image <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(images):
 Â  Â <span class="hljs-comment"># lang='chi_sim'æŒ‡å®šç®€ä½“ä¸­æ–‡ï¼Œä¾èµ–å®‰è£…æ—¶å‹¾é€‰çš„ä¸­æ–‡è¯­è¨€åŒ…</span>
 Â  Â text = pytesseract.image_to_string(image, lang=<span class="hljs-string">'chi_sim'</span>)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ã€PDFç¬¬<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>é¡µæå–çš„æ–‡æœ¬ã€‘"</span>)
 Â  Â <span class="hljs-comment"># å¤„ç†æ— æ–‡æœ¬çš„æƒ…å†µï¼Œé¿å…æ‰“å°ç©ºè¡Œ</span>
 Â  Â <span class="hljs-built_in">print</span>(text <span class="hljs-keyword">if</span> text.strip() <span class="hljs-keyword">else</span> <span class="hljs-string">"è¯¥é¡µæœªè¯†åˆ«åˆ°æœ‰æ•ˆæ–‡æœ¬"</span>)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>*<span class="hljs-number">60</span> + <span class="hljs-string">"\n"</span>)
</code></pre>
<p>è¿”å›ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94ac1caeb02e4e7ba19f93715b3a6961~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=%2FYUpCQeuK%2B7iJO0HYeyerA4P7l8%3D" alt="pdf_5.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48ca4f7693f84198b758c22d4a683f7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=A5oJ3l%2FIEY2SYZsY8IncKHrBfYA%3D" alt="pdf_6.png" loading="lazy"/>
ä»è¿”å›å¯ä»¥çœ‹å‡ºå°†pdè½¬æ¢æˆå›¾ç‰‡åï¼Œå¯¹å›¾ç‰‡è¿›è¡Œè¯†åˆ«ï¼Œå¯ä»¥è¯†åˆ«åˆ°å›¾è¡¨çš„æ•°æ®ï¼Œä¸è¿‡è¿™ç§æ–¹æ³•æ¯”è¾ƒè€—æ—¶ã€‚</p>
<h5 data-id="heading-12">æ•°æ®åº“</h5>
<p>sqlalchemyåŠ è½½æ•°æ®åº“æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> create_engine, text
â€‹
engine = create_engine(<span class="hljs-string">"mysql+mysqlconnector://root:root@localhost:3306/seckill"</span>)
df = pd.read_sql(text(<span class="hljs-string">"SELECT * FROM user"</span>), engine)
<span class="hljs-built_in">print</span>(df)
</code></pre>
<p>è¿”å›ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23e5ce94bc7a4f42a5130559d0a5bb87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=Zl7rJxGLq6kpc8KMNNANRppASgc%3D" alt="db_1.png" loading="lazy"/></p>
<p>llama_indexåŠ è½½æ•°æ®åº“æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from llama_index.readers.database import DatabaseReader
<span class="hljs-attr">db_uri</span> = <span class="hljs-string">"mysql+mysqlconnector://root:root@localhost:3306/seckill"</span>
<span class="hljs-attr">reader</span> = DatabaseReader(
 Â  Â <span class="hljs-attr">uri</span>=db_uri
)
<span class="hljs-attr">query</span> = <span class="hljs-string">"SELECT * FROM user"</span>
<span class="hljs-attr">documents</span> = reader.load_data(query=query)
print(f"ä»æ•°æ®åº“åŠ è½½çš„æ–‡æ¡£æ•°é‡: {len(documents)}")
print(documents)
</code></pre>
<p>ç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12daac79ad6e4c7695916f0afa28dd08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=Mi9DVmm2lvKPzzPyVUcNTIFz580%3D" alt="db_2.png" loading="lazy"/></p>
<h5 data-id="heading-13">ç½‘é¡µ</h5>
<p>LangchainåŠ è½½ç½‘é¡µæ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import requests
from langchain_community.document_loaders import WebBaseLoader
â€‹
<span class="hljs-attr">page_url</span> = <span class="hljs-string">"https://books.toscrape.com"</span>
â€‹
def custom_scrape(url):
 Â  Â <span class="hljs-attr">headers</span> = {
 Â  Â  Â  Â "User-Agent": "Mozilla/5.0 (Windows NT 10.0<span class="hljs-comment">; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36"</span>
 Â   }
 Â  Â <span class="hljs-attr">response</span> = requests.get(url, headers=headers, timeout=<span class="hljs-number">20</span>)
 Â  Â response.raise_for_status()
 Â  Â return response.text
â€‹
<span class="hljs-attr">loader</span> = WebBaseLoader(web_paths=[page_url])
<span class="hljs-attr">loader.scrape_all</span> = lambda urls: [custom_scrape(url) for url in urls]
<span class="hljs-attr">doc</span> = loader.load()[<span class="hljs-number">0</span>]
<span class="hljs-attr">clean_content</span> = <span class="hljs-string">" "</span>.join(doc.page_content.replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">"\r"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">"\t"</span>, <span class="hljs-string">""</span>).split())
â€‹
print("ç½‘é¡µæ ¸å¿ƒå†…å®¹ï¼ˆæ— æ¢è¡Œï¼‰ï¼š\n", clean_content<span class="hljs-section">[:2000]</span>)
</code></pre>
<p>ç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d939b7ab99964781836191e59b783c45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=zMw3NmA6YJskN7S%2F4lvCjr%2FB%2Bk0%3D" alt="web_1.png" loading="lazy"/></p>
<p>unstructuredåŠ è½½ç½‘é¡µæ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import requests
from unstructured.partition.html import partition_html
â€‹
<span class="hljs-attr">page_url</span> = <span class="hljs-string">"https://books.toscrape.com"</span>
â€‹
<span class="hljs-attr">headers</span> = {<span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36"</span>}
<span class="hljs-attr">html_content</span> = requests.get(page_url, headers=headers).text
â€‹
<span class="hljs-attr">elements</span> = partition_html(text=html_content)
â€‹
<span class="hljs-attr">all_text</span> = [elem.text.strip() for elem in elements if elem.text.strip()]
â€‹
<span class="hljs-attr">clean_content</span> = <span class="hljs-string">" "</span>.join(<span class="hljs-string">""</span>.join(all_text).replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">"\r"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">"\t"</span>, <span class="hljs-string">""</span>).split())
â€‹
print("Unstructuredç›´æ¥åŠ è½½ç½‘é¡µï¼ˆæ— æ¢è¡Œï¼‰ï¼š\n", clean_content<span class="hljs-section">[:2000]</span>)
</code></pre>
<p>ç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e179396282dd4bfab68c1abc1adc619e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=cVgBWfXs5RheqxzcK1rlmidl3E8%3D" alt="web_2.png" loading="lazy"/></p>
<p>ä½¿ç”¨å¯¹æ¯”ä¸‹æ¥WebBaseLoaderæ›´å¿«ç‚¹ï¼Œé€‚åˆå¿«é€Ÿæå–ç½‘é¡µå†…çš„æ–‡æœ¬ã€‚è€Œ<code>partition_html</code> é€‚åˆç»†ç²’åº¦ç»“æ„åŒ–è§£æç½‘é¡µå…ƒç´ </p>
<h4 data-id="heading-14">æ€ç»´å¯¼å›¾</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77b88048a7444b09ba14d768ca4969ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p625p625p6E5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771549620&amp;x-signature=ZMavh1AG8mHwXsOjVZAx%2FODQXPA%3D" alt="RAG-æ•°æ®åŠ è½½.png" loading="lazy"/></p>
<h4 data-id="heading-15">æ€»ç»“</h4>
<p>å¥½äº†ï¼ŒRAGç³»ç»Ÿçš„æ•°æ®åŠ è½½æŠ€æœ¯å°±å†™åˆ°è¿™ï¼Œä¸åŒæ ¼å¼çš„æ•°æ®åº”è¯¥é€‰æ‹©ä¸åŒçš„æŠ€æœ¯ç»„ä»¶è¿›è¡ŒåŠ è½½ï¼Œè¿™æ ·å¯ä»¥æé«˜RAGç³»ç»Ÿçš„å‡†ç¡®æ€§ã€‚å…¶å®å†™äº†é‚£ä¹ˆå¤šä¹Ÿåªæ˜¯ç»™å„ä½äº¦è²ã€å½¦ç¥–ä»¬ä¸€ä¸ªå‚è€ƒï¼Œæ›´å¤šçš„æ˜¯éœ€è¦è‡ªå·±ä¸Šæ‰‹ç»ƒä¹ å’Œä½“ä¼šã€‚è¿˜æœ‰å¾ˆå¤šæ–‡ä¸­æ²¡æœ‰åˆ—åˆ°çš„æ•°æ®åŠ è½½æŠ€æœ¯ï¼Œä¹Ÿæ¬¢è¿å„ä½äº¦è²ã€å½¦ç¥–ä»¬åœ¨è¯„è®ºåŒºè®¨è®ºå“¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day02ï¼šè®¤è¯† AI IDE å·¥å…·]]></title>    <link>https://juejin.cn/post/7605625595569995791</link>    <guid>https://juejin.cn/post/7605625595569995791</guid>    <pubDate>2026-02-12T18:55:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605625595569995791" data-draft-id="7605262897649041443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day02ï¼šè®¤è¯† AI IDE å·¥å…·"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-12T18:55:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´¾æ˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3556272969881436"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day02ï¼šè®¤è¯† AI IDE å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3556272969881436/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´¾æ˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T18:55:46.000Z" title="Thu Feb 12 2026 18:55:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å­¦ä¹ ç›®æ ‡</h2>
<p>ä¹‹å‰åœ¨ z.ai ä¸Šä½“éªŒ AI ç¼–ç¨‹æ—¶ï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿå‘ç°äº†ç½‘é¡µç‰ˆçš„è¯¸å¤šä¸ä¾¿ï¼Ÿæ¯”å¦‚æ²¡æ³•éšæ—¶ä¿å­˜å·¥ä½œæˆæœã€æ–‡ä»¶ç®¡ç†æ‚ä¹±æ— ç« ï¼Œç”šè‡³è¿ç¨å¤æ‚çš„é¡¹ç›®éƒ½éš¾ä»¥æ¨è¿›ã€‚åˆ«æ‹…å¿ƒï¼Œè¿™ä¸€ç« å°±æ¥è§£å†³è¿™äº›é—®é¢˜ â€”â€” æˆ‘ä»¬ä¼šåœ¨æœ¬åœ°ç‹¬ç«‹å®Œæˆå®Œæ•´çš„ç¼–ç¨‹é¡¹ç›®ï¼Œå½»åº•æ‘†è„±ç½‘é¡µç‰ˆçš„é™åˆ¶ã€‚</p>
<ul>
<li>IDEå’ŒAI IDEæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li>
<li>å¦‚ä½•ä½¿ç”¨AI IDE</li>
</ul>
<h2 data-id="heading-1">å†™ä»£ç éœ€è¦ä»€ä¹ˆå‡†å¤‡ï¼Ÿ</h2>
<p>ä»£ç å°±æ˜¯ä¸€å †æ–‡å­—ï¼Œé€šè¿‡ç¼–è¯‘å™¨å¤„ç†åï¼Œä¹‹åå˜ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚è™½è¯´ç”¨ç³»ç»Ÿè‡ªå¸¦çš„è®°äº‹æœ¬ä¹Ÿèƒ½å†™ä»£ç ï¼Œä½†å®é™…ç”¨èµ·æ¥å…¨æ˜¯å‘ï¼š</p>
<ul>
<li>æ‰€æœ‰ä»£ç éƒ½æ˜¯é»‘å­—ï¼Œå…³é”®å­—ã€æ–‡å­—ã€æ³¨é‡Šæ··åœ¨ä¸€èµ·ï¼Œæ ¹æœ¬çœ‹ä¸æ¸…ä»£ç ç»“æ„</li>
<li>æ²¡æœ‰ä»»ä½•æ™ºèƒ½æç¤ºï¼Œæ¯ä¸ªä»£ç å•è¯éƒ½å¾—æ‰‹åŠ¨å®Œæ•´æ•²å‡ºæ¥ï¼Œæ‹¼é”™ä¸€ä¸ªå­—æ¯å°±å¾—åå¤æ ¸å¯¹</li>
<li>æ–‡ä»¶å¤šäº†å°±ä¹±æˆä¸€å›¢ï¼Œåå‡ ä¸ªæ–‡ä»¶æ¥å›åˆ‡æ¢ï¼Œç»å¸¸æ‰¾ä¸åˆ°è¦ä¿®æ”¹çš„é‚£ä¸€è¡Œãƒ»ç¨‹åºå‡ºé”™åªèƒ½ççŒœï¼Œå´©äº†éƒ½ä¸çŸ¥é“é—®é¢˜åœ¨å“ªï¼Œåªèƒ½ä¸€è¡Œè¡Œæ‰“å°æ—¥å¿—æ’æŸ¥</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºå•¥ä½ éœ€è¦ IDEï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰ã€‚å®ƒä¼šç»™ä»£ç ä¸Šè‰²ã€è¾“å…¥æ—¶è‡ªåŠ¨æç¤ºã€æŒ‰é¡¹ç›®æ•´ç†æ–‡ä»¶ï¼Œè¿˜èƒ½ç²¾å‡†å®šä½é”™è¯¯ï¼Œè®©ä½ å†™ä»£ç æ•ˆç‡æ›´é«˜ã€å‡ºé”™æ›´å°‘ã€‚</p>
<h3 data-id="heading-2"><code>IDE</code> VS <code>AI IDE</code></h3>
<p>åœ¨AIæ—¶ä»£ï¼ŒAI IDEä¸å†æ˜¯ä¼ ç»ŸIDEçš„ç®€å•åŠŸèƒ½å åŠ ï¼Œè€Œæ˜¯ä»¥ç”Ÿæˆå¼AIé‡æ„å¼€å‘å·¥ä½œæµâ€”â€”ä¼ ç»ŸIDEèšç„¦â€œè¾…åŠ©æ‰‹åŠ¨ç¼–ç â€ï¼ŒAI IDEåˆ™åŒ–èº«â€œæ™ºèƒ½åä½œä¼™ä¼´â€ï¼Œå°†å¼€å‘è€…ä»é‡å¤ã€ä½ä»·å€¼çš„å·¥ä½œä¸­è§£æ”¾ï¼Œæ ¸å¿ƒèšç„¦éœ€æ±‚å®šä¹‰ä¸é€»è¾‘æŠŠæ§ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h4 data-id="heading-3">æ ¸å¿ƒå·®å¼‚å¯¹æ¯”è¡¨</h4>



































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>ä¼ ç»ŸIDEï¼ˆå¦‚VS Codeã€IntelliJ IDEAï¼ˆå½“ç„¶ç°åœ¨è¿™äº›IDEéƒ½å·²æ”¯æŒAIåŠŸèƒ½ï¼‰ï¼‰</th><th>AI IDEï¼ˆå¦‚Cursorã€GitHub Copilot Xï¼‰</th></tr></thead><tbody><tr><td>æ ¸å¿ƒå®šä½</td><td>æ ‡å‡†åŒ–ç¼–ç å·¥å…·é›†</td><td>æ™ºèƒ½åä½œå¼€å‘ä¼™ä¼´</td></tr><tr><td>æ ¸å¿ƒèƒ½åŠ›</td><td>è¯­æ³•é«˜äº®ã€åŸºç¡€è¡¥å…¨ã€è°ƒè¯•ç¼–è¯‘</td><td>ä»£ç ç”Ÿæˆã€å®æ—¶è§£é‡Šã€æ™ºèƒ½è°ƒè¯•ä¼˜åŒ–</td></tr><tr><td>èµ„æ–™æŸ¥é˜…æ–¹å¼</td><td>éœ€æ‰‹åŠ¨åˆ‡æ¢ç¯å¢ƒæŸ¥æ–‡æ¡£/æœèµ„æ–™</td><td>é€‰ä¸­ä»£ç å³å¯AIå®æ—¶è§£é‡Šï¼Œæ— éœ€è·³å‡ºç¯å¢ƒ</td></tr><tr><td>æ•ˆç‡æå‡æ–¹å‘</td><td>ä¼˜åŒ–æ‰‹åŠ¨ç¼–ç æµç¨‹</td><td>æ›¿ä»£é‡å¤ç¼–ç ã€é™ä½ç†è§£/è°ƒè¯•æˆæœ¬</td></tr><tr><td>å¼€å‘è€…è§’è‰²</td><td>ä»£ç çš„ç›´æ¥ç”Ÿäº§è€…</td><td>éœ€æ±‚å®šä¹‰è€…+é€»è¾‘æŠŠæ§è€…</td></tr></tbody></table>
<ol>
<li>ä¼ ç»ŸIDEä»…è¾…åŠ©æ‰‹åŠ¨ç¼–ç ï¼Œéœ€å¼€å‘è€…å®Œæˆå…¨æµç¨‹æ“ä½œï¼›</li>
<li>AI IDEæ ¸å¿ƒä¼˜åŠ¿æ˜¯AIé©±åŠ¨çš„ä»£ç ç”Ÿæˆã€å®æ—¶è§£é‡Šï¼Œå¤§å¹…èŠ‚çœæŸ¥èµ„æ–™/å†™é‡å¤ä»£ç çš„æ—¶é—´ï¼›</li>
<li>ä¸¤è€…æ ¸å¿ƒå·®å¼‚åœ¨äºï¼šAI IDEå°†å¼€å‘è€…ä»ä½ä»·å€¼å·¥ä½œä¸­è§£æ”¾ï¼Œèšç„¦æ ¸å¿ƒé€»è¾‘ä¸åˆ›æ–°ã€‚</li>
</ol>
<h3 data-id="heading-4">IDEçš„å‘å±•</h3>
<h4 data-id="heading-5">å…ˆææ‡‚ï¼šIDEåˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿ</h4>
<p>IDEï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰è¯´ç™½äº†å°±æ˜¯ç¨‹åºå‘˜çš„â€œä¸€ç«™å¼å·¥ä½œå°â€ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆï¼š</p>
<ul>
<li>æ™®é€šè®°äº‹æœ¬ï¼ˆçº¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼‰ + å„ç§å®ç”¨å·¥å…·ï¼ˆæ¯”å¦‚ä»£ç æ£€æŸ¥ã€è¿è¡ŒæŒ‰é’®ã€è°ƒè¯•å™¨ï¼‰ + ä¸“å±å·¥ä½œé—´ï¼ˆé€‚é…ä¸åŒç¼–ç¨‹è¯­è¨€çš„ç¯å¢ƒï¼‰</li>
<li>æ ¸å¿ƒæœºåˆ¶å°±æ˜¯<strong>ç¼–è¾‘å™¨ï¼ˆå†™ä»£ç çš„åœ°æ–¹ï¼‰+ æ’ä»¶ï¼ˆæ‰©å±•åŠŸèƒ½çš„â€œå°å·¥å…·â€ï¼‰+ ç¯å¢ƒï¼ˆè®©ä»£ç èƒ½è·‘èµ·æ¥çš„â€œåœ°åŸºâ€ï¼‰</strong> ï¼Œä¸‰è€…æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œä¸ç”¨ä½ ä¸œæ‹¼è¥¿å‡‘ã€‚</li>
</ul>
<h4 data-id="heading-6">IDEçš„å‘å±•ï¼šä»â€œçº¯æ‰‹åŠ¨â€åˆ°â€œå…¨è‡ªåŠ¨â€</h4>
<p>IDEä¸æ˜¯ä¸€ä¸‹å­å°±è¿™ä¹ˆå¥½ç”¨çš„ï¼Œå®ƒæ˜¯è·Ÿç€ç¨‹åºå‘˜çš„éœ€æ±‚ä¸€æ­¥æ­¥è¿›åŒ–çš„ï¼Œæ ¸å¿ƒå°±æ˜¯ä»â€œç»ˆç«¯çº¯å‘½ä»¤â€èµ°å‘â€œå›¾å½¢åŒ–ç•Œé¢â€ï¼š</p>
<h5 data-id="heading-7">æ—©æœŸï¼šæ²¡æœ‰IDEï¼Œå…¨é â€œç»ˆç«¯+çº¯ç¼–è¾‘å™¨â€ç¡¬æ‰›</h5>
<p>æœ€æ—©ç¨‹åºå‘˜å†™ä»£ç ï¼Œè¿ä¸ªå¯è§†åŒ–ç•Œé¢éƒ½æ²¡æœ‰ï¼Œå…¨åœ¨é»‘ä¹ä¹çš„â€œç»ˆç«¯/å‘½ä»¤è¡Œâ€é‡Œæ“ä½œï¼š</p>
<ul>
<li>ç”¨æœ€åŸºç¡€çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆæ¯”å¦‚Unixç³»ç»Ÿé‡Œçš„viï¼Œåæ¥å‡çº§æˆvimï¼‰å†™ä»£ç ï¼šæ²¡æœ‰è¯­æ³•é«˜äº®ã€æ²¡æœ‰è‡ªåŠ¨è¡¥å…¨ï¼Œä»£ç å…¨é æ‰‹æ•²ï¼Œå†™é”™äº†ä¹Ÿä¸ä¼šæé†’ï¼›</li>
<li>å†™å®Œä»£ç è¦è‡ªå·±æ•²å‘½ä»¤ç¼–è¯‘ã€è¿è¡Œï¼šæ¯”å¦‚æ•²<code>gcc æ–‡ä»¶å.c</code>ç¼–è¯‘Cè¯­è¨€ä»£ç ï¼Œæ•²<code>python æ–‡ä»¶å.py</code>è¿è¡ŒPythonä»£ç ï¼›</li>
<li>è¿™ä¸ªé˜¶æ®µæ²¡æœ‰â€œæ’ä»¶â€å’Œâ€œé›†æˆç¯å¢ƒâ€çš„æ¦‚å¿µï¼šç¼–è¾‘å™¨åªè´Ÿè´£â€œå†™æ–‡å­—â€ï¼Œè¦å•¥åŠŸèƒ½éƒ½å¾—è‡ªå·±ç”¨å‘½ä»¤å®ç°ï¼Œæ¯”å¦‚æƒ³æ ¼å¼åŒ–ä»£ç ï¼Œå¾—å•ç‹¬è£…å·¥å…·ã€æ•²å‘½ä»¤ï¼Œå¯¹æ–°æ‰‹ç‰¹åˆ«ä¸å‹å¥½ã€‚</li>
</ul>
<h5 data-id="heading-8">è¿‡æ¸¡ï¼šå›¾å½¢åŒ–ç¼–è¾‘å™¨å‡ºç°ï¼Œå¼€å§‹â€œåŠ æ’ä»¶â€</h5>
<p>éšç€ç”µè„‘å›¾å½¢ç•Œé¢æ™®åŠï¼Œå‡ºç°äº†å¸¦çª—å£ã€èƒ½ç‚¹é¼ æ ‡çš„ç¼–è¾‘å™¨ï¼ˆæ¯”å¦‚Notepad++ã€Sublime Textï¼‰ï¼š</p>
<ul>
<li>æ ¸å¿ƒè¿˜æ˜¯â€œç¼–è¾‘å™¨â€ï¼Œä½†æœ‰äº†å¯è§†åŒ–ç•Œé¢ï¼šèƒ½çœ‹åˆ°ä»£ç çš„è¯­æ³•é«˜äº®ï¼ˆä¸åŒä»£ç æ ‡ä¸åŒé¢œè‰²ï¼‰ã€èƒ½ç‚¹æŒ‰é’®ä¿å­˜/æ‰“å¼€æ–‡ä»¶ï¼Œä¸ç”¨è®°ä¸€å †å‘½ä»¤ï¼›</li>
<li>å¼€å§‹æ”¯æŒâ€œæ’ä»¶â€ï¼šæ¯”å¦‚è£…ä¸ªæ’ä»¶å°±èƒ½è‡ªåŠ¨è¡¥å…¨ä»£ç ã€è£…ä¸ªæ’ä»¶å°±èƒ½æ£€æŸ¥è¯­æ³•é”™è¯¯ã€è£…ä¸ªæ’ä»¶å°±èƒ½ç›´æ¥è¿è¡Œä»£ç ï¼Œç›¸å½“äºç»™åŸºç¡€ç¼–è¾‘å™¨â€œåŠ å¤–æŒ‚â€ï¼›</li>
<li>ä½†è¿˜ä¸ç®—å®Œæ•´çš„IDEï¼šç¯å¢ƒéœ€è¦è‡ªå·±é…ï¼ˆæ¯”å¦‚è¦æ‰‹åŠ¨è£…Pythonã€Javaçš„è¿è¡Œç¯å¢ƒï¼Œè¿˜è¦å‘Šè¯‰ç¼–è¾‘å™¨â€œç¯å¢ƒåœ¨å“ªâ€ï¼‰ï¼Œè°ƒè¯•ä»£ç è¿˜æ˜¯å¾—é å‘½ä»¤ï¼Œåªæ˜¯æ¯”çº¯ç»ˆç«¯æ–¹ä¾¿ä¸€ç‚¹ã€‚</li>
</ul>
<h5 data-id="heading-9">ç°åœ¨ï¼šæˆç†Ÿçš„IDEï¼Œâ€œç¼–è¾‘å™¨+æ’ä»¶+ç¯å¢ƒâ€å…¨é›†æˆ</h5>
<p>ç°åœ¨çš„ä¸»æµIDEï¼ˆæ¯”å¦‚VS Codeã€PyCharmã€Eclipseï¼‰æŠŠâ€œç¼–è¾‘å™¨ã€æ’ä»¶ã€ç¯å¢ƒâ€æ‰“åŒ…å¾—æ˜æ˜ç™½ç™½ï¼š</p>
<ul>
<li>ç¼–è¾‘å™¨ï¼šè‡ªå¸¦æ™ºèƒ½æç¤ºã€è¯­æ³•é«˜äº®ã€ä»£ç æ ¼å¼åŒ–ï¼Œç”šè‡³èƒ½å®æ—¶æé†’ä½ å“ªé‡Œå†™é”™äº†ï¼›</li>
<li>æ’ä»¶ï¼šå†…ç½®å¸¸ç”¨æ’ä»¶ï¼Œä¹Ÿèƒ½è‡ªå·±è£…ï¼ˆæ¯”å¦‚Pythonæ’ä»¶ã€å‰ç«¯æ’ä»¶ã€ç¿»è¯‘æ’ä»¶ï¼‰ï¼Œç‚¹å‡ ä¸‹å°±èƒ½è£…ï¼Œä¸ç”¨è®°å‘½ä»¤ï¼›</li>
<li>ç¯å¢ƒï¼šèƒ½è‡ªåŠ¨è¯†åˆ«æˆ–å¸®ä½ é…ç½®è¿è¡Œç¯å¢ƒï¼ˆæ¯”å¦‚PyCharmæ–°å»ºé¡¹ç›®æ—¶ï¼Œèƒ½ç›´æ¥å¸®ä½ è£…Pythonè™šæ‹Ÿç¯å¢ƒï¼›VS Codeèƒ½ä¸€é”®é…ç½®Node.jsç¯å¢ƒï¼‰ï¼Œå†™å®Œä»£ç ç‚¹ä¸ªâ€œè¿è¡Œâ€æŒ‰é’®å°±èƒ½è·‘ï¼Œè°ƒè¯•ä»£ç æ—¶èƒ½ç›´è§‚çœ‹åˆ°æ¯ä¸€æ­¥çš„å˜é‡å€¼ï¼Œä¸ç”¨å†æ•²å¤æ‚çš„è°ƒè¯•å‘½ä»¤ã€‚</li>
</ul>
<h3 data-id="heading-10">æ ¸å¿ƒæœºåˆ¶æ‹†è§£</h3>
<p>å†å›å¤´çœ‹IDEçš„æ ¸å¿ƒæœºåˆ¶ï¼Œå°±å¾ˆå¥½ç†è§£äº†ï¼š</p>

























<table><thead><tr><th>ç»„æˆéƒ¨åˆ†</th><th>é€šä¿—è§£é‡Š</th><th>ä¸¾ä¸ªä¾‹å­</th></tr></thead><tbody><tr><td>ç¼–è¾‘å™¨</td><td>å†™ä»£ç çš„â€œæœ¬å­â€</td><td>å°±åƒå¸¦é¢œè‰²æ ‡æ³¨çš„ç¬”è®°æœ¬ï¼Œèƒ½è‡ªåŠ¨æé†’ä½ å†™å­—é”™äº†</td></tr><tr><td>æ’ä»¶</td><td>æœ¬å­çš„â€œä¾¿åˆ©è´´/å°å·¥å…·â€</td><td>æ¯”å¦‚è´´ä¸ªâ€œè‡ªåŠ¨è¡¥å…¨â€ä¾¿åˆ©è´´ï¼Œå†™ä»£ç æ—¶ä¸ç”¨è®°å…¨å•è¯ï¼›è´´ä¸ªâ€œè¿è¡Œâ€å°å·¥å…·ï¼Œç‚¹ä¸€ä¸‹å°±èƒ½çœ‹ç»“æœ</td></tr><tr><td>ç¯å¢ƒ</td><td>å†™ä»£ç çš„â€œä¹¦æ¡Œ+å·¥å…·å°â€</td><td>æ¯”å¦‚å†™Pythonä»£ç éœ€è¦çš„Pythonè§£é‡Šå™¨ã€å†™Javaéœ€è¦çš„JDKï¼ŒIDEå¸®ä½ æ‘†å¥½ï¼Œä¸ç”¨è‡ªå·±æ‰¾åœ°æ–¹æ”¾</td></tr></tbody></table>
<p>æ€»ç»“</p>
<ol>
<li>IDEçš„æ ¸å¿ƒæ˜¯â€œç¼–è¾‘å™¨ï¼ˆå†™ä»£ç ï¼‰+ æ’ä»¶ï¼ˆæ‰©åŠŸèƒ½ï¼‰+ ç¯å¢ƒï¼ˆè·‘ä»£ç ï¼‰â€ï¼Œæœ¬è´¨æ˜¯æŠŠç¨‹åºå‘˜çš„å·¥ä½œæµç¨‹æ‰“åŒ…ç®€åŒ–ï¼›</li>
<li>å‘å±•å†ç¨‹æ˜¯ä»â€œç»ˆç«¯+vimçº¯æ‰‹åŠ¨æ“ä½œâ€ï¼Œåˆ°â€œå›¾å½¢åŒ–ç¼–è¾‘å™¨åŠ æ’ä»¶â€ï¼Œå†åˆ°â€œå…¨é›†æˆçš„å¯è§†åŒ–IDEâ€ï¼›</li>
<li>è¿›åŒ–çš„æ ¸å¿ƒç›®çš„ï¼šè®©ç¨‹åºå‘˜ä¸ç”¨èŠ±ç²¾åŠ›åœ¨â€œé…ç¯å¢ƒã€è®°å‘½ä»¤â€ä¸Šï¼Œä¸“å¿ƒå†™ä»£ç å°±è¡Œã€‚</li>
</ol>
<h3 data-id="heading-11">ç›®å‰å¸¸è§IDE</h3>
<p>ç°åœ¨ä¸»æµçš„ç¼–ç¨‹IDEéƒ½å†…ç½®äº†AIåŠŸèƒ½ï¼Œä¸ç”¨é¢å¤–æŠ˜è…¾å°±èƒ½ç›´æ¥ç”¨AIå¸®ä½ å†™ä»£ç ã€æ”¹bugã€è§£é‡Šä»£ç ï¼Œå¤§å¤§æå‡å†™ä»£ç çš„æ•ˆç‡ã€‚ä¸åŒIDEçš„AIä¾§é‡ä¸åŒï¼Œæœ‰çš„è½»é‡é€šç”¨ï¼Œæœ‰çš„ä¸“é—¨åšAIç¼–ç¨‹ï¼Œä½ å¯ä»¥æŒ‰éœ€é€‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.visualstudio.com%2F" target="_blank" title="https://code.visualstudio.com/" ref="nofollow noopener noreferrer">VS Code</a>ï¼šæœ€å¸¸ç”¨çš„è½»é‡çº§IDEï¼Œæœ¬èº«å…è´¹ä¸”æ”¯æŒæ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€ï¼Œè£…ä¸ªAIæ’ä»¶ï¼ˆæ¯”å¦‚GitHub Copilotï¼‰å°±èƒ½ç”¨AIè¾…åŠ©ç¼–ç¨‹ï¼Œæ–°æ‰‹å…¥é—¨é¦–é€‰ï¼›</li>
<li><a href="https://www.trae.ai/" target="_blank" title="https://www.trae.ai/" ref="nofollow noopener noreferrer">Trae</a>ï¼šä¸»æ‰“AIé©±åŠ¨çš„ç¼–ç¨‹å·¥å…·ï¼Œç•Œé¢ç®€æ´ï¼ŒAIä»£ç ç”Ÿæˆã€è°ƒè¯•ã€é‡æ„çš„åŠŸèƒ½åšå¾—æ¯”è¾ƒèšç„¦ï¼Œä¸ç”¨å¤æ‚é…ç½®ï¼›</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2F" target="_blank" title="https://cursor.com/" ref="nofollow noopener noreferrer">Cursor</a>ï¼šä¸“ä¸ºAIç¼–ç¨‹è®¾è®¡çš„IDEï¼Œå†…ç½®GPT-4ç­‰å¤§æ¨¡å‹ï¼Œæ”¯æŒç›´æ¥ç”¨è‡ªç„¶è¯­è¨€å†™ä»£ç ã€æ”¹ä»£ç ï¼Œç”šè‡³èƒ½å®æ—¶å¯¹è¯å¼ç¼–ç¨‹ï¼Œå¯¹æ–°æ‰‹ç‰¹åˆ«å‹å¥½ï¼›</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.qoder.com%2F" target="_blank" title="https://www.qoder.com/" ref="nofollow noopener noreferrer">Qoder</a>ï¼šè½»é‡çš„AIç¼–ç¨‹å·¥å…·ï¼Œä¾§é‡å¿«é€Ÿå†™ä»£ç ã€å®æ—¶çº é”™ï¼Œé€‚åˆå¿«é€Ÿå†™å°è„šæœ¬æˆ–è°ƒè¯•ä»£ç ç‰‡æ®µï¼›</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.codebuddy.com%2F" target="_blank" title="https://www.codebuddy.com/" ref="nofollow noopener noreferrer">CodeBuddy</a>ï¼šAIä»£ç åŠ©æ‰‹ç±»IDEï¼Œé™¤äº†å†™ä»£ç ï¼Œè¿˜èƒ½å¸®ä½ è§£é‡Šä»£ç é€»è¾‘ã€ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œé€‚åˆå­¦ä¹ ç¼–ç¨‹æ—¶ç”¨ï¼›</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.visualstudio.com%2F" target="_blank" title="https://code.visualstudio.com/" ref="nofollow noopener noreferrer">VS Code</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fcline.bot%2F" target="_blank" title="https://cline.bot/" ref="nofollow noopener noreferrer">Cline</a>ï¼šåœ¨ç»å…¸çš„VS Codeé‡ŒåŠ è£…Clineæ’ä»¶ï¼Œç›¸å½“äºç»™VS Codeå‡çº§æ›´å¼ºçš„AIåŠŸèƒ½ï¼Œå…¼é¡¾VS Codeçš„é€šç”¨æ€§å’ŒClineçš„AIèƒ½åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-12">è‡ªå·±é…ç½®API</h3>
<p>å¦‚æœè§‰å¾—IDEè‡ªå¸¦çš„AIåŠŸèƒ½ä¸å¤Ÿç”¨ï¼ˆæ¯”å¦‚é™åˆ¶æ¬¡æ•°ã€æ•ˆæœä¸€èˆ¬ï¼‰ï¼Œå¯ä»¥è‡ªå·±å¯¹æ¥å…è´¹/ä½æˆæœ¬çš„AIå¼€æ”¾å¹³å°APIï¼Œç›¸å½“äºç»™IDEæ¢â€œæ›´å¼ºå¤§çš„AIå¤§è„‘â€ï¼Œè¿™äº›å¹³å°éƒ½æ˜¯å›½å†…/ä¸»æµçš„ï¼Œä½¿ç”¨é—¨æ§›ä½ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.volcengine.com%2Factivity%2Fcodingplan" target="_blank" title="https://www.volcengine.com/activity/codingplan" ref="nofollow noopener noreferrer">æ–¹èˆŸCoding-Plan</a>ï¼šç«å±±å¼•æ“çš„AIç¼–ç¨‹å¹³å°ï¼Œæœ‰å…è´¹çš„APIé¢åº¦ï¼Œé€‚é…ä¸­æ–‡ç¼–ç¨‹åœºæ™¯ï¼Œé…ç½®ç®€å•ï¼Œé€‚åˆæ–°æ‰‹å°è¯•ï¼›</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbigmodel.cn%2Fglm-coding" target="_blank" title="https://bigmodel.cn/glm-coding" ref="nofollow noopener noreferrer">æ™ºè°±AIå¼€æ”¾å¹³å°</a>ï¼šä¸»æ‰“ä¸­æ–‡å¤§æ¨¡å‹ï¼ŒAIå†™ä»£ç ã€è§£é‡Šä»£ç çš„æ•ˆæœè´´åˆå›½å†…å¼€å‘è€…ä¹ æƒ¯ï¼Œèƒ½ç”³è¯·å…è´¹è¯•ç”¨é¢åº¦ï¼›</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2F" target="_blank" title="https://platform.deepseek.com/" ref="nofollow noopener noreferrer">DeepSeek å¼€æ”¾å¹³å°</a>ï¼šä¸“é—¨åšä»£ç å¤§æ¨¡å‹çš„å¹³å°ï¼Œä»£ç ç”Ÿæˆã€è°ƒè¯•çš„ç²¾å‡†åº¦é«˜ï¼Œæœ‰å…è´¹é¢åº¦ï¼Œé€‚åˆå¯¹ä»£ç è´¨é‡è¦æ±‚é«˜çš„åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-13">AI agentä»£ç†</h3>
<p>å¦‚æœæƒ³è®©AIä¸åªæ˜¯â€œå†™ä»£ç â€ï¼Œè¿˜èƒ½â€œå¸®ä½ å®Œæ•´è§£å†³ç¼–ç¨‹é—®é¢˜â€ï¼ˆæ¯”å¦‚è‡ªåŠ¨åˆ†æéœ€æ±‚ã€å†™å®Œæ•´é¡¹ç›®ã€è°ƒè¯•å…¨æµç¨‹ï¼‰ï¼Œå°±å¯ä»¥ç”¨AI Agentå·¥å…·ã€‚ä½ åªéœ€è¦è‡ªå·±ä¹°å°‘é‡APIé¢åº¦ï¼ŒæŠŠAPIå¯¼å…¥è¿™äº›å·¥å…·ï¼Œå°±èƒ½ç”¨ClaudeCodeè¿™ç±»å¼ºå¤§çš„AgentåŠŸèƒ½ï¼Œç›¸å½“äºé›‡äº†ä¸ªâ€œAIç¨‹åºå‘˜åŠ©ç†â€ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopencode.ai" target="_blank" title="https://opencode.ai" ref="nofollow noopener noreferrer">OpenCode</a>ï¼šå¼€æºçš„AI Agentå·¥å…·ï¼Œæ”¯æŒå¯¹æ¥å¤šç§APIï¼Œèƒ½è‡ªå®šä¹‰AIçš„ç¼–ç¨‹é€»è¾‘ï¼Œé€‚åˆæƒ³æŠ˜è…¾ã€å®šåˆ¶åŒ–éœ€æ±‚çš„ç”¨æˆ·ï¼›</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2F" target="_blank" title="https://claude.ai/" ref="nofollow noopener noreferrer">ClaudeCode</a>ï¼šAnthropicæ——ä¸‹çš„AI Agentï¼Œæ“…é•¿å¤„ç†å¤æ‚çš„ç¼–ç¨‹ä»»åŠ¡ï¼ˆæ¯”å¦‚å†™å®Œæ•´é¡¹ç›®ã€æ’æŸ¥å¤æ‚bugï¼‰ï¼Œéœ€è¦å…ˆè´­ä¹°APIå¯†é’¥å†å¯¼å…¥ä½¿ç”¨ï¼ŒåŠŸèƒ½å¼ºä½†æœ‰ä¸€å®šä½¿ç”¨æˆæœ¬ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-14">æ€»ç»“</h4>
<ol>
<li>å¸¸è§AI IDEåˆ†ä¸¤ç±»ï¼šé€šç”¨å‹ï¼ˆå¦‚VS Codeï¼‰éœ€è£…æ’ä»¶ï¼Œä¸“ç”¨å‹ï¼ˆå¦‚Cursorï¼‰å¼€ç®±å³ç”¨ï¼Œæ–°æ‰‹ä¼˜å…ˆé€‰Cursoræˆ–VS Codeï¼›</li>
<li>è‡ªå·±é…ç½®APIèƒ½æ›¿æ¢IDEçš„AIå¼•æ“ï¼Œæ¨èå…ˆè¯•å›½å†…å¹³å°ï¼ˆæ–¹èˆŸã€æ™ºè°±ï¼‰çš„å…è´¹é¢åº¦ï¼›</li>
<li>AI Agentæ˜¯æ›´è¿›é˜¶çš„ç”¨æ³•ï¼Œèƒ½å®ç°â€œå…¨æµç¨‹AIç¼–ç¨‹â€ï¼Œé€‚åˆå¤„ç†å¤æ‚ç¼–ç¨‹ä»»åŠ¡ï¼Œéœ€è‡ªè¡Œè´­ä¹°APIåä½¿ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-15">åœ¨æœ¬åœ°ç”¨Reactå†™ä¸ªèµ›è½¦æ¸¸æˆ</h2>
<p>é€‰æ‹©åˆé€‚çš„IDEå’ŒAIå·¥å…·åï¼ˆæˆ‘è¿™é‡Œä½¿ç”¨cursorï¼‰ï¼Œåœ¨æœ¬åœ°å¼€å‘ä¸€ä¸ªèµ›è½¦æ¸¸æˆï¼</p>
<p>step1ï¼šæ­å»ºAI skillsæ¡†æ¶å’Œé¡¹ç›®è½¯ä»¶æ¶æ„</p>
<pre><code class="hljs language-arduino" lang="arduino">æˆ‘æƒ³ç”¨å‰ç«¯æ¡†æ¶å¼€å‘ä¸€ä¸ªèµ›è½¦æ¸¸æˆï¼Œç»™æˆ‘ä¸€ä¸ªè½¯ä»¶æ¶æ„æ–¹æ¡ˆï¼Œè¿˜æœ‰cursorä¸­çš„ruleså’Œskillsæ–¹æ¡ˆ
</code></pre>
<p>step2ï¼šä¸æ–­å®ç°å°åŠŸèƒ½ï¼Œä¼˜åŒ–</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### å®Œæ•´å¼€å‘æç¤ºè¯ï¼ˆè½¦è¾†ç«é€Ÿç±»æ¸¸æˆ/ä»¿çœŸç³»ç»Ÿï¼‰</span>
åŸºäºæ¸¸æˆå¼•æ“ï¼ˆå¦‚Unity/Unrealï¼‰æˆ–åŸç”Ÿç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚C++/Python/TypeScriptï¼‰ï¼Œå¼€å‘ä¸€å¥—è½»é‡çº§è½¦è¾†ç«é€Ÿæ ¸å¿ƒç³»ç»Ÿï¼Œéœ€è¦†ç›–ä»¥ä¸‹æ¨¡å—çš„å®Œæ•´è®¾è®¡ä¸å®ç°ï¼Œè¦æ±‚åŠŸèƒ½é—­ç¯ã€é€»è¾‘è‡ªæ´½ï¼Œå…¼é¡¾ç‰©ç†çœŸå®æ€§ä¸äº¤äº’ä½“éªŒï¼š

<span class="hljs-section">#### 1. è½¦è¾†ç³»ç»Ÿï¼ˆæ–°å¢å¤šç±»å‹è½¦è¾†å®šåˆ¶ï¼‰</span>
<span class="hljs-strong">**æ ¸å¿ƒç›®æ ‡**</span>ï¼šæ„å»ºå¯å¤ç”¨ã€å·®å¼‚åŒ–çš„å¤šç±»å‹è½¦è¾†æ¨¡å‹ï¼Œæ”¯æŒå±æ€§å®šåˆ¶ä¸å¤šç»´åº¦æ§åˆ¶
<span class="hljs-bullet">-</span> åŸºç¡€æ¨¡å‹ï¼šå®šä¹‰é€šç”¨è½¦è¾†åŸºç±»ï¼Œæ´¾ç”Ÿ3ç±»æ ¸å¿ƒè½¦è¾†ï¼ˆå¯æ‰©å±•ï¼‰ï¼Œæ¯ç±»è½¦è¾†ç»‘å®šä¸“å±æ ‡è¯†ã€å¤–è§‚èµ„æºã€é˜µè¥å±æ€§ï¼š
<span class="hljs-bullet">  -</span> F1èµ›è½¦ï¼šè½»é‡åŒ–ç«é€Ÿè½¦å‹ï¼Œæ ¸å¿ƒç‰¹å¾ä¸ºã€Œè¶…é«˜æé€Ÿã€é«˜åŠ é€Ÿåº¦ã€ä½è½¬å‘åŠå¾„ã€å¼±ç¢°æ’æŠ—æ€§ã€ï¼›
<span class="hljs-bullet">  -</span> è­¦è½¦ï¼šå‡è¡¡å‹åŠŸèƒ½è½¦å‹ï¼Œæ ¸å¿ƒç‰¹å¾ä¸ºã€Œä¸­é«˜æé€Ÿã€ä¸­åŠ é€Ÿåº¦ã€ä¸­ç­‰è½¬å‘çµæ•åº¦ã€ä¸­ç­‰ç¢°æ’æŠ—æ€§ï¼Œé™„å¸¦è­¦ç¬›è§¦å‘é€»è¾‘ã€ï¼›
<span class="hljs-bullet">  -</span> æ•‘æŠ¤è½¦ï¼šé‡å‹åŠŸèƒ½è½¦å‹ï¼Œæ ¸å¿ƒç‰¹å¾ä¸ºã€Œä½æé€Ÿã€ä½åŠ é€Ÿåº¦ã€å¤§è½¬å‘åŠå¾„ã€é«˜ç¢°æ’æŠ—æ€§ï¼Œé™„å¸¦åº”æ€¥ä¼˜å…ˆé€šè¡Œé€»è¾‘ï¼ˆå¦‚AIè½¦è¾†ä¸»åŠ¨é¿è®©ï¼‰ã€ï¼›
<span class="hljs-bullet">-</span> ç‰©ç†å±æ€§ï¼šä¸ºæ¯ç±»è½¦è¾†å®šåˆ¶ä¸“å±å‚æ•°è¡¨ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œæ”¯æŒåŠ¨æ€è°ƒæ•´ï¼š
  | è½¦è¾†ç±»å‹ | é‡é‡(kg) | æœ€å¤§é€Ÿåº¦(km/h) | åŠ é€Ÿåº¦(m/sÂ²) | è½¬å‘çµæ•åº¦ | æ¼‚ç§»ç³»æ•° | ç¢°æ’æŠ—æ€§ |
  |----------|----------|----------------|--------------|------------|----------|----------|
  | F1èµ›è½¦   | 700      | 350            | 15           | é«˜         | ä½       | å¼±       |
  | è­¦è½¦     | 1500     | 220            | 8            | ä¸­         | ä¸­       | ä¸­       |
  | æ•‘æŠ¤è½¦   | 2000     | 180            | 5            | ä½         | æä½     | é«˜       |
<span class="hljs-bullet">-</span> æ§åˆ¶é€»è¾‘ï¼šé€šç”¨æ§åˆ¶æ˜ å°„ï¼ˆæ²¹é—¨/åˆ¹è½¦/è½¬å‘/æ¼‚ç§»ï¼‰é€‚é…æ‰€æœ‰è½¦å‹ï¼Œå·®å¼‚åŒ–å“åº”ï¼ˆå¦‚F1æ¼‚ç§»æ˜“è§¦å‘ä½†éš¾ç»´æŒï¼Œæ•‘æŠ¤è½¦å‡ ä¹æ— æ³•æ¼‚ç§»ï¼‰ï¼›æ”¯æŒè½¦è¾†çŠ¶æ€ç›‘å¬ï¼ˆæ€ é€Ÿ/è¡Œé©¶/æ¼‚ç§»/ç¢°æ’/ç‰¹æ®ŠçŠ¶æ€ï¼šå¦‚æ•‘æŠ¤è½¦åº”æ€¥æ¨¡å¼ã€è­¦è½¦è­¦ç¬›å¼€å¯ï¼‰ã€‚

<span class="hljs-section">#### 2. èµ›é“ç³»ç»Ÿï¼ˆæ–°å¢3ç±»å·®å¼‚åŒ–èµ›é“ï¼‰</span>
<span class="hljs-strong">**æ ¸å¿ƒç›®æ ‡**</span>ï¼šæ„å»º3ç±»ç‰¹å¾é²œæ˜çš„èµ›é“æ¨¡å‹ï¼Œæ”¯æ’‘ä¸åŒè½¦è¾†çš„ç«é€Ÿä½“éªŒï¼Œæ”¯æŒåŠ è½½ä¸åˆ‡æ¢
<span class="hljs-bullet">-</span> æ•°æ®ç»“æ„ï¼šé€šç”¨èµ›é“åŸºç±»åŒ…å«ã€Œè¾¹ç•Œã€åˆ†æ®µã€æ ‡è®°ç‚¹ã€åæ ‡ç³»ã€ï¼Œæ´¾ç”Ÿ3ç±»ä¸“å±èµ›é“ï¼Œæ¯ç±»èµ›é“å®šåˆ¶æ ¸å¿ƒå‚æ•°ï¼š
<span class="hljs-bullet">  -</span> åŸå¸‚è¡—é“èµ›é“ï¼š
<span class="hljs-code">    ç‰¹å¾ï¼šå¤šç›´è§’å¼¯é“ã€çª„è½¦é“ã€è·¯è¾¹éšœç¢ç‰©ï¼ˆè·¯ç¯/æŠ¤æ ï¼‰ã€éƒ¨åˆ†è·¯æ®µé™é€Ÿï¼›
    é€‚é…è½¦è¾†ï¼šè­¦è½¦ï¼ˆçµæ´»åº¦é€‚é…åŸå¸‚è·¯å†µï¼‰ï¼›
    ç‰¹æ®Šè§„åˆ™ï¼šåŒ…å«çº¢ç»¿ç¯å‡é€ŸåŒºã€äººè¡Œé“ç¦è¡ŒåŒºã€‚
  - ä¸“ä¸šç«é€Ÿèµ›é“ï¼š
    ç‰¹å¾ï¼šå¤§åŠå¾„é«˜é€Ÿå¼¯é“ã€ç›´é“å æ¯”60%ã€å®½è½¦é“ã€æ— éšœç¢ç‰©ï¼›
    é€‚é…è½¦è¾†ï¼šF1èµ›è½¦ï¼ˆæœ€å¤§åŒ–æé€Ÿä¼˜åŠ¿ï¼‰ï¼›
    ç‰¹æ®Šè§„åˆ™ï¼šåŒ…å«åŠ é€Ÿå¸¦ã€å¼¯é“åˆ¹è½¦æç¤ºçº¿ã€‚
  - éƒŠåŒºè¶Šé‡èµ›é“ï¼š
    ç‰¹å¾ï¼šå‡¹å‡¸è·¯é¢ã€æ³¥æ³è·¯æ®µï¼ˆæ‘©æ“¦ç³»æ•°ä½ï¼‰ã€è¿ç»­Så¼¯é“ã€å®½ç¼“å†²åŒºï¼›
    é€‚é…è½¦è¾†ï¼šæ•‘æŠ¤è½¦ï¼ˆé«˜ç¢°æ’æŠ—æ€§é€‚é…å¤æ‚è·¯å†µï¼‰ï¼›
    ç‰¹æ®Šè§„åˆ™ï¼šæ³¥æ³è·¯æ®µè½¦é€Ÿè¡°å‡ã€ç¼“å†²åŒºæ— ç¢°æ’æƒ©ç½šã€‚
- åŠ è½½é€»è¾‘ï¼šæ”¯æŒé™æ€åŠ è½½ï¼ˆé¢„è®¾3ç±»èµ›é“æ•°æ®ï¼‰ã€åŠ¨æ€åˆ‡æ¢ï¼ˆè¿è¡Œæ—¶æ›´æ¢èµ›é“ï¼Œä¿ç•™è½¦è¾†çŠ¶æ€ï¼‰ï¼›è¾“å‡ºæ¯ç±»èµ›é“çš„ã€Œå¯è¡Œé©¶åŒºã€ç¢°æ’ä½“ã€ä¸“å±è§„åˆ™è§¦å‘åŒºã€ï¼›
- è¾…åŠ©åŠŸèƒ½ï¼šèµ›é“èµ·ç‚¹é‡ç½®ã€åœˆæ•°ç»Ÿè®¡ï¼ˆé€‚é…ä¸åŒèµ›é“é•¿åº¦ï¼‰ã€èµ›é“è¾¹ç•Œå¯è§†åŒ–ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰ã€‚
</span>
<span class="hljs-section">#### 3. ç‰©ç†ç³»ç»Ÿ</span>
<span class="hljs-strong">**æ ¸å¿ƒç›®æ ‡**</span>ï¼šå®ç°ç®€åŒ–ä½†ç¬¦åˆç›´è§‰çš„è½¦è¾†ç‰©ç†ï¼Œé€‚é…ä¸åŒè½¦å‹/èµ›é“çš„å·®å¼‚åŒ–è¡¨ç°
<span class="hljs-bullet">-</span> åŸºç¡€è¿åŠ¨ï¼šåŸºäºç‰›é¡¿è¿åŠ¨å®šå¾‹ï¼Œç»“åˆè½¦è¾†é‡é‡/èµ›é“æ‘©æ“¦ç³»æ•°è®¡ç®—é€Ÿåº¦ã€è½¬å‘ï¼Œå¦‚F1åœ¨ä¸“ä¸šèµ›é“æé€Ÿæ‹‰æ»¡ï¼Œæ•‘æŠ¤è½¦åœ¨è¶Šé‡èµ›é“å‡é€Ÿè¡°å‡æ›´æ…¢ï¼›
<span class="hljs-bullet">-</span> æ¼‚ç§»é€»è¾‘ï¼šå·®å¼‚åŒ–æ¼‚ç§»è§„åˆ™ï¼ˆF1ä»…é«˜é€Ÿå¼¯é“å¯æ¼‚ç§»ï¼Œæ•‘æŠ¤è½¦ç¦ç”¨æ¼‚ç§»ï¼‰ï¼Œè®¡ç®—æ¼‚ç§»è§’åº¦ã€å‡é€Ÿç³»æ•°ï¼Œå…³è”è½¦è¾†æ¼‚ç§»ç³»æ•°ä¸èµ›é“æ‘©æ“¦ç³»æ•°ï¼›
<span class="hljs-bullet">-</span> ç‰©ç†çº¦æŸï¼šæ¯ç±»è½¦è¾†ç»‘å®šä¸“å±é€Ÿåº¦/è½¬å‘ä¸Šé™ï¼Œæ¯ç±»èµ›é“å®šåˆ¶åœ°é¢æ‘©æ“¦åŠ›ï¼ˆå¦‚è¶Šé‡èµ›é“æ³¥æ³åŒºæ‘©æ“¦ç³»æ•°0.3ï¼Œä¸“ä¸šèµ›é“0.9ï¼‰ã€‚

<span class="hljs-section">#### 4. ç¢°æ’æ£€æµ‹</span>
<span class="hljs-strong">**æ ¸å¿ƒç›®æ ‡**</span>ï¼šç²¾å‡†æ£€æµ‹è½¦è¾†ä¸èµ›é“è¾¹ç•Œ/éšœç¢ç‰©çš„ç¢°æ’ï¼Œè§¦å‘å·®å¼‚åŒ–åé¦ˆ
<span class="hljs-bullet">-</span> æ£€æµ‹é€»è¾‘ï¼šé‡‡ç”¨AABB/å°„çº¿æ£€æµ‹ï¼Œé€‚é…ä¸åŒèµ›é“çš„è¾¹ç•Œå½¢çŠ¶ï¼ˆåŸå¸‚èµ›é“ç›´è§’è¾¹ç•Œã€ä¸“ä¸šèµ›é“å¼§å½¢è¾¹ç•Œï¼‰ï¼›
<span class="hljs-bullet">-</span> ç¢°æ’åé¦ˆï¼šç¢°æ’åŠ›åº¦å…³è”è½¦è¾†é‡é‡ï¼ˆæ•‘æŠ¤è½¦ç¢°æ’åé€Ÿåº¦è¡°å‡å°‘ï¼ŒF1ç¢°æ’åæ˜“å¤±æ§ï¼‰ï¼Œèµ›é“éšœç¢ç‰©ç¢°æ’è§¦å‘ä¸åŒæƒ©ç½šï¼ˆåŸå¸‚èµ›é“æ’æŠ¤æ å‡é€Ÿ30%ï¼Œè¶Šé‡èµ›é“æ’ç¼“å†²åŒºæ— æƒ©ç½šï¼‰ï¼›
<span class="hljs-bullet">-</span> è¾¹ç•Œåˆ¤å®šï¼šåŒºåˆ†æ¯ç±»èµ›é“çš„â€œç¦è¡ŒåŒºâ€ï¼ˆå¦‚åŸå¸‚èµ›é“äººè¡Œé“ã€ä¸“ä¸šèµ›é“èµ›é“å¤–åŒºåŸŸï¼‰ï¼Œè§¦å‘å¯¹åº”å‡é€Ÿè§„åˆ™ã€‚

<span class="hljs-section">#### 5. AI å¯¹æ‰‹ç³»ç»Ÿ</span>
<span class="hljs-strong">**æ ¸å¿ƒç›®æ ‡**</span>ï¼šå®ç°é€‚é…ä¸åŒè½¦è¾†/èµ›é“çš„åŸºç¡€AIç«é€Ÿèƒ½åŠ›
<span class="hljs-bullet">-</span> è·¯å¾„è§„åˆ’ï¼šAIåŸºäºèµ›é“ç±»å‹ç”Ÿæˆä¸“å±è·¯å¾„ï¼ˆåŸå¸‚èµ›é“ä¼˜å…ˆé¿è®©ç¦è¡ŒåŒºï¼Œä¸“ä¸šèµ›é“ä¼˜å…ˆèµ°ç›´é“ï¼Œè¶Šé‡èµ›é“ä¼˜å…ˆèµ°å¹³æ•´è·¯æ®µï¼‰ï¼›
<span class="hljs-bullet">-</span> è¡Œä¸ºé€»è¾‘ï¼šAIè½¦è¾†åŒ¹é…å¯¹åº”è½¦å‹ç‰¹å¾ï¼ˆAI-F1åœ¨ä¸“ä¸šèµ›é“å…¨ç¨‹æ»¡é€Ÿï¼ŒAI-è­¦è½¦åœ¨åŸå¸‚èµ›é“è‡ªåŠ¨é¿è®©çº¢ç»¿ç¯ï¼ŒAI-æ•‘æŠ¤è½¦åœ¨è¶Šé‡èµ›é“å‡é€Ÿé€šè¿‡æ³¥æ³åŒºï¼‰ï¼›
<span class="hljs-bullet">-</span> éš¾åº¦åˆ†çº§ï¼šç®€å•/ä¸­ç­‰/å›°éš¾éš¾åº¦ä¸‹ï¼Œè°ƒæ•´AIçš„â€œååº”çµæ•åº¦+æé™æ“ä½œç‡â€ï¼ˆå¦‚å›°éš¾éš¾åº¦AI-F1å¯è´´å¼¯æ¼‚ç§»ï¼‰ï¼›
<span class="hljs-bullet">-</span> äº¤äº’è§„åˆ™ï¼šAIè½¦è¾†è¯†åˆ«æ•‘æŠ¤è½¦â€œåº”æ€¥æ¨¡å¼â€ï¼Œä¸»åŠ¨å‡é€Ÿ/å˜é“é¿è®©ï¼›AIè­¦è½¦å¯è§¦å‘â€œè¿½ç¼‰æ¨¡å¼â€ï¼Œä¼˜å…ˆè¿½å‡»ç©å®¶è½¦è¾†ã€‚

<span class="hljs-section">#### è¡¥å……è¦æ±‚</span>
<span class="hljs-bullet">-</span> æ€§èƒ½ï¼šç‰©ç†è®¡ç®—ä¸ç¢°æ’æ£€æµ‹é¢‘ç‡å¯é…ç½®ï¼ˆ60Hzï¼‰ï¼Œå¤šèµ›é“/å¤šè½¦è¾†åˆ‡æ¢æ— å¸§ç‡ä¸‹é™ï¼›
<span class="hljs-bullet">-</span> æ‰©å±•æ€§ï¼šè½¦è¾†/èµ›é“æ¨¡å—æ”¯æŒæ–°å¢ç±»å‹ï¼ˆå¦‚å¡è½¦ã€å±±åœ°èµ›é“ï¼‰ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒé€»è¾‘ï¼›
<span class="hljs-bullet">-</span> è°ƒè¯•ï¼šæä¾›è½¦è¾†å‚æ•°é¢æ¿ã€èµ›é“è§„åˆ™ç¼–è¾‘å™¨ã€AIå†³ç­–æ—¥å¿—æ‰“å°åŠŸèƒ½ã€‚

---

<span class="hljs-section">### æ€»ç»“</span>
<span class="hljs-bullet">1.</span> è½¦è¾†ç³»ç»Ÿï¼šæ˜ç¡®3ç±»æ ¸å¿ƒè½¦å‹çš„å·®å¼‚åŒ–å‚æ•°+ä¸“å±ç‰¹å¾ï¼Œé€‚é…ä¸åŒèµ›é“åœºæ™¯ï¼›
<span class="hljs-bullet">2.</span> èµ›é“ç³»ç»Ÿï¼šå®šä¹‰3ç±»èµ›é“çš„ã€Œç‰©ç†ç‰¹å¾+é€‚é…è½¦è¾†+ä¸“å±è§„åˆ™ã€ï¼Œå½¢æˆåœºæ™¯é—­ç¯ï¼›
<span class="hljs-bullet">3.</span> ç‰©ç†/AI/ç¢°æ’æ¨¡å—ï¼šåŒæ­¥é€‚é…è½¦å‹/èµ›é“çš„å·®å¼‚åŒ–ï¼Œä¿è¯é€»è¾‘ä¸€è‡´æ€§ï¼›
<span class="hljs-bullet">4.</span> æ‰€æœ‰è®¾è®¡å…¼é¡¾â€œçœŸå®æ€§â€ä¸â€œå¯ç©æ€§â€ï¼Œå‚æ•°è¡¨å¯ç›´æ¥è½åœ°å¼€å‘ã€‚

å¦‚æœéœ€è¦è¡¥å……æŸç±»è½¦è¾†/èµ›é“çš„ç»†èŠ‚ï¼ˆå¦‚æ•‘æŠ¤è½¦åº”æ€¥æ¨¡å¼å…·ä½“é€»è¾‘ã€åŸå¸‚èµ›é“çº¢ç»¿ç¯è§¦å‘è§„åˆ™ï¼‰ï¼Œæˆ–é€‚é…ç‰¹å®šå¼•æ“ï¼ˆå¦‚Unityï¼‰çš„å¼€å‘è§„èŒƒï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥ç»†åŒ–ã€‚
</code></pre>
<p>step3ï¼šè¿è¡Œ
æ‰§è¡Œ<code>npm run dev</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c247b2acec624471be6f5cc1b471986c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rS-5pif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771527346&amp;x-signature=uLCaJZd6Joi%2Fin0DMPbaAehULs4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-16">å‚è€ƒ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatawhalechina%2Feasy-vibe" target="_blank" title="https://github.com/datawhalechina/easy-vibe" ref="nofollow noopener noreferrer">datawhalechina/easy-vibe: Vibe coding from 0 to 1 ï½œæŠŠæƒ³æ³•åšæˆçœŸæ­£èƒ½ä¸Šçº¿çš„äº§å“ï½œé¦–ä¸ªäº¤äº’å¼æ•™ç¨‹ï½œé›¶åŸºç¡€ä¹Ÿèƒ½å­¦ä¼šçš„ AI ç¼–ç¨‹å®æˆ˜</a></p>
<p>éƒ¨åˆ†æ–‡å­—ç”¨è±†åŒ…æ¶¦è‰²</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonåˆ—è¡¨æ’åºï¼šç”¨keyå‚æ•°æŒæ§æ’åºè§„åˆ™]]></title>    <link>https://juejin.cn/post/7605848213603287086</link>    <guid>https://juejin.cn/post/7605848213603287086</guid>    <pubDate>2026-02-13T01:15:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605848213603287086" data-draft-id="7605848213603270702" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonåˆ—è¡¨æ’åºï¼šç”¨keyå‚æ•°æŒæ§æ’åºè§„åˆ™"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-02-13T01:15:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«™å¤§çˆ·IP"/> <meta itemprop="url" content="https://juejin.cn/user/2905353241759261"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonåˆ—è¡¨æ’åºï¼šç”¨keyå‚æ•°æŒæ§æ’åºè§„åˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2905353241759261/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«™å¤§çˆ·IP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T01:15:50.000Z" title="Fri Feb 13 2026 01:15:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å…è´¹ç¼–ç¨‹è½¯ä»¶ã€Œpython+pycharmã€
é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.quark.cn%2Fs%2F48a86be2fdc0" target="_blank" title="https://pan.quark.cn/s/48a86be2fdc0" ref="nofollow noopener noreferrer">pan.quark.cn/s/48a86be2fâ€¦</a></strong></p>
<p>åœ¨Pythonç¼–ç¨‹ä¸­ï¼Œåˆ—è¡¨æ’åºæ˜¯é«˜é¢‘æ“ä½œã€‚æ— è®ºæ˜¯å¤„ç†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€åˆ†ææ—¥å¿—æ–‡ä»¶ï¼Œè¿˜æ˜¯å®ç°ç®—æ³•é€»è¾‘ï¼Œæ’åºéƒ½èƒ½è®©æ•°æ®æ›´æœ‰åºã€æ›´æ˜“å¤„ç†ã€‚ä½†å½“åˆ—è¡¨åŒ…å«æ··åˆç±»å‹å…ƒç´ ï¼Œæˆ–éœ€è¦æŒ‰ç‰¹å®šè§„åˆ™æ’åºæ—¶ï¼Œç›´æ¥è°ƒç”¨<code>sort()</code>æˆ–<code>sorted()</code>å¯èƒ½ä¼šæŠ¥é”™æˆ–å¾—ä¸åˆ°é¢„æœŸç»“æœã€‚è¿™æ—¶ï¼Œ<code>key</code>å‚æ•°å°±æ˜¯è§£å†³é—®é¢˜çš„å…³é”®â€”â€”å®ƒèƒ½è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼Œè®©æ’åºé€»è¾‘æ›´çµæ´»ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€åŸºç¡€æ’åºï¼šé»˜è®¤è§„åˆ™çš„å±€é™æ€§</h2>
<h3 data-id="heading-1">1.1 é»˜è®¤æ’åºçš„â€œé™·é˜±â€</h3>
<p>Pythonçš„åˆ—è¡¨æ’åºé»˜è®¤æŒ‰å…ƒç´ è‡ªç„¶é¡ºåºæ’åˆ—ã€‚å¯¹æ•°å­—åˆ—è¡¨<code>[3, 1, 4, 2]</code>ï¼Œ<code>list.sort()</code>æˆ–<code>sorted()</code>ä¼šæŒ‰æ•°å€¼å¤§å°å‡åºæ’åˆ—ï¼›å¯¹å­—ç¬¦ä¸²åˆ—è¡¨<code>['banana', 'apple', 'cherry']</code>ï¼Œåˆ™æŒ‰å­—æ¯é¡ºåºæ’åˆ—ã€‚ä½†è‹¥åˆ—è¡¨åŒ…å«æ··åˆç±»å‹ï¼Œå¦‚<code>['oeasy', 123]</code>ï¼Œç›´æ¥æ’åºä¼šè§¦å‘<code>TypeError</code>ï¼Œå› ä¸ºPythonæ— æ³•æ¯”è¾ƒå­—ç¬¦ä¸²å’Œæ•´æ•°ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">lst = <span class="hljs-selector-attr">[<span class="hljs-string">'oeasy'</span>, 123]</span>
lst<span class="hljs-selector-class">.sort</span>()  # æŠ¥é”™ï¼šTypeError: <span class="hljs-string">'&lt;'</span> not supported between instances of <span class="hljs-string">'int'</span> and <span class="hljs-string">'str'</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-2">1.2 å¼ºåˆ¶ç±»å‹è½¬æ¢çš„â€œç¬¨åŠæ³•â€</h3>
<p>ä¸ºè§£å†³æ··åˆç±»å‹æ’åºé—®é¢˜ï¼Œå¯å…ˆå°†æ‰€æœ‰å…ƒç´ è½¬ä¸ºåŒä¸€ç±»å‹ï¼ˆå¦‚å­—ç¬¦ä¸²ï¼‰ï¼Œå†æ’åºã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">lst = <span class="hljs-selector-attr">[<span class="hljs-string">'oeasy'</span>, 123]</span>
lst<span class="hljs-selector-class">.sort</span>(key=str)  # å°†æ‰€æœ‰å…ƒç´ è½¬ä¸ºå­—ç¬¦ä¸²åæ¯”è¾ƒ
<span class="hljs-built_in">print</span>(lst)  # è¾“å‡ºï¼š<span class="hljs-selector-attr">[<span class="hljs-string">'123'</span>, <span class="hljs-string">'oeasy'</span>]</span>ï¼ˆå› ä¸º '<span class="hljs-number">123</span>' &lt; 'oeasy'ï¼‰
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä½†è¿™ç§æ–¹æ³•å¹¶éä¸‡èƒ½ã€‚è‹¥å°è¯•å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•´æ•°ï¼ˆå¦‚<code>['999', '123']</code>è½¬ä¸º<code>[999, 123]</code>åæ’åºï¼‰ï¼Œå¯¹æ— æ³•è½¬æ¢çš„å­—ç¬¦ä¸²ï¼ˆå¦‚<code>['oeasy', '123']</code>ï¼‰ä¼šæŠ¥é”™ã€‚å› æ­¤ï¼Œå¼ºåˆ¶ç±»å‹è½¬æ¢ä»…é€‚ç”¨äºèƒ½å®‰å…¨è½¬æ¢çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-3">äºŒã€keyå‚æ•°ï¼šè‡ªå®šä¹‰æ’åºçš„â€œé­”æ³•æ£’â€</h2>
<h3 data-id="heading-4">2.1 keyå‚æ•°çš„ä½œç”¨åŸç†</h3>
<p><code>key</code>å‚æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šå¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œè¿”å›ä¸€ä¸ªç”¨äºæ¯”è¾ƒçš„å€¼ã€‚æ’åºæ—¶ï¼ŒPythonä¼šæ ¹æ®<code>key</code>å‡½æ•°è¿”å›çš„å€¼è€Œéå…ƒç´ æœ¬èº«è¿›è¡Œæ¯”è¾ƒã€‚ä¾‹å¦‚ï¼ŒæŒ‰å­—ç¬¦ä¸²é•¿åº¦æ’åºæ—¶ï¼Œ<code>key=len</code>ä¼šè®©Pythonæ¯”è¾ƒå­—ç¬¦ä¸²é•¿åº¦è€Œéå­—æ¯é¡ºåºã€‚</p>
<pre><code class="hljs language-scss" lang="scss">words = <span class="hljs-selector-attr">[<span class="hljs-string">'apple'</span>, <span class="hljs-string">'banana'</span>, <span class="hljs-string">'cherry'</span>, <span class="hljs-string">'date'</span>]</span>
words<span class="hljs-selector-class">.sort</span>(key=len)
<span class="hljs-built_in">print</span>(words)  # è¾“å‡ºï¼š<span class="hljs-selector-attr">[<span class="hljs-string">'date'</span>, <span class="hljs-string">'apple'</span>, <span class="hljs-string">'banana'</span>, <span class="hljs-string">'cherry'</span>]</span>ï¼ˆé•¿åº¦<span class="hljs-number">3</span> &lt; <span class="hljs-number">5</span> &lt; <span class="hljs-number">6</span>ï¼‰
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-5">2.2 å¸¸è§åœºæ™¯ï¼šæŒ‰ç‰¹å®šè§„åˆ™æ’åº</h3>
<h4 data-id="heading-6">åœºæ™¯1ï¼šå¿½ç•¥å¤§å°å†™æ’åº</h4>
<p>é»˜è®¤å­—ç¬¦ä¸²æ’åºåŒºåˆ†å¤§å°å†™ï¼ˆå¤§å†™å­—æ¯æ’åœ¨å°å†™å­—æ¯å‰ï¼‰ã€‚è‹¥éœ€å¿½ç•¥å¤§å°å†™ï¼Œå¯ç”¨<code>str.lower</code>ä½œä¸º<code>key</code>å‡½æ•°ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">words = <span class="hljs-selector-attr">[<span class="hljs-string">'Banana'</span>, <span class="hljs-string">'apple'</span>, <span class="hljs-string">'Cherry'</span>, <span class="hljs-string">'date'</span>]</span>
words<span class="hljs-selector-class">.sort</span>(key=str.lower)
<span class="hljs-built_in">print</span>(words)  # è¾“å‡ºï¼š<span class="hljs-selector-attr">[<span class="hljs-string">'apple'</span>, <span class="hljs-string">'Banana'</span>, <span class="hljs-string">'Cherry'</span>, <span class="hljs-string">'date'</span>]</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-7">åœºæ™¯2ï¼šæŒ‰å­—å…¸çš„æŸä¸ªé”®æ’åº</h4>
<p>å¯¹åŒ…å«å­—å…¸çš„åˆ—è¡¨ï¼Œå¯é€šè¿‡<code>key</code>æŒ‡å®šæ’åºä¾æ®çš„é”®ã€‚ä¾‹å¦‚ï¼ŒæŒ‰å­—å…¸çš„<code>'age'</code>é”®å‡åºæ’åºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">data = <span class="hljs-selector-attr">[    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'age'</span>: 25},    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'age'</span>: 30},    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'age'</span>: 20}]</span>
sorted_data = <span class="hljs-built_in">sorted</span>(data, key=lambda x: x['age'])
<span class="hljs-built_in">print</span>(sorted_data)
# è¾“å‡ºï¼š<span class="hljs-selector-attr">[{<span class="hljs-string">'name'</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'age'</span>: 20}, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'age'</span>: 25}, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'age'</span>: 30}]</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-8">åœºæ™¯3ï¼šæŒ‰å¤šæ¡ä»¶æ’åº</h4>
<p>è‹¥éœ€å…ˆæŒ‰ä¸€ä¸ªæ¡ä»¶æ’åºï¼Œå†æŒ‰å¦ä¸€ä¸ªæ¡ä»¶æ’åºï¼Œå¯è®©<code>key</code>å‡½æ•°è¿”å›å…ƒç»„ã€‚ä¾‹å¦‚ï¼Œå…ˆæŒ‰å¹´é¾„å‡åºï¼Œå†æŒ‰å§“åå­—æ¯é¡ºåºæ’åºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">data = <span class="hljs-selector-attr">[    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'age'</span>: 25},    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'age'</span>: 30},    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'age'</span>: 25}]</span>
sorted_data = <span class="hljs-built_in">sorted</span>(data, key=lambda x: (x['age'], x['name']))
<span class="hljs-built_in">print</span>(sorted_data)
# è¾“å‡ºï¼š<span class="hljs-selector-attr">[{<span class="hljs-string">'name'</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'age'</span>: 25}, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'age'</span>: 25}, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'age'</span>: 30}]</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-9">åœºæ™¯4ï¼šæŒ‰å¯¹è±¡å±æ€§æ’åº</h4>
<p>å¯¹è‡ªå®šä¹‰ç±»çš„å¯¹è±¡åˆ—è¡¨ï¼Œå¯é€šè¿‡<code>key</code>æŒ‡å®šæ’åºä¾æ®çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):
        self.name = name
        self.age = age

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__repr__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{self.name}</span>(<span class="hljs-subst">{self.age}</span>)"</span>

people = [Person(<span class="hljs-string">'Alice'</span>, <span class="hljs-number">25</span>), Person(<span class="hljs-string">'Bob'</span>, <span class="hljs-number">22</span>), Person(<span class="hljs-string">'Charlie'</span>, <span class="hljs-number">24</span>)]
sorted_people = <span class="hljs-built_in">sorted</span>(people, key=<span class="hljs-keyword">lambda</span> p: p.age)
<span class="hljs-built_in">print</span>(sorted_people)  <span class="hljs-comment"># è¾“å‡ºï¼š[Bob(22), Charlie(24), Alice(25)]</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-10">2.3 é«˜çº§æŠ€å·§ï¼šè‡ªå®šä¹‰å‡½æ•°ä¸operatoræ¨¡å—</h3>
<h4 data-id="heading-11">è‡ªå®šä¹‰å‡½æ•°ä½œä¸ºkey</h4>
<p>è‹¥æ’åºé€»è¾‘å¤æ‚ï¼Œå¯å®šä¹‰ç‹¬ç«‹å‡½æ•°ä½œä¸º<code>key</code>ã€‚ä¾‹å¦‚ï¼ŒæŒ‰å­—å…¸çš„<code>'age'</code>é”®åŠ æƒæ’åºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">def <span class="hljs-built_in">custom_key</span>(item):
    return item[<span class="hljs-string">'age'</span>] * <span class="hljs-number">2</span> + <span class="hljs-built_in">len</span>(item[<span class="hljs-string">'name'</span>])  # å¹´é¾„ä¹˜<span class="hljs-number">2</span>åŠ å§“åé•¿åº¦

data = [
    {'name': <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">25</span>},
    {'name': <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">30</span>},
    {'name': <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">20</span>}
]
sorted_data = <span class="hljs-built_in">sorted</span>(data, key=custom_key)
<span class="hljs-built_in">print</span>(sorted_data)
# è¾“å‡ºï¼š<span class="hljs-selector-attr">[{<span class="hljs-string">'name'</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'age'</span>: 20}, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'age'</span>: 25}, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'age'</span>: 30}]</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-12">ä½¿ç”¨operatoræ¨¡å—</h4>
<p>Pythonçš„<code>operator</code>æ¨¡å—æä¾›äº†<code>itemgetter</code>å’Œ<code>attrgetter</code>å‡½æ•°ï¼Œå¯ç®€åŒ–<code>key</code>å‡½æ•°çš„ç¼–å†™ã€‚ä¾‹å¦‚ï¼ŒæŒ‰å­—å…¸çš„<code>'score'</code>é”®æ’åºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> <span class="hljs-keyword">operator</span>

<span class="hljs-keyword">data</span> = [
    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">88</span>},
    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">92</span>},
    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">85</span>}
]
sorted_data = sorted(<span class="hljs-keyword">data</span>, key=<span class="hljs-keyword">operator</span>.itemgetter(<span class="hljs-string">'score'</span>))
print(sorted_data)
# è¾“å‡ºï¼š[{<span class="hljs-string">'name'</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">85</span>}, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">88</span>}, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">92</span>}]
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å¯¹å¯¹è±¡åˆ—è¡¨ï¼Œå¯ç”¨<code>attrgetter</code>æŒ‰å±æ€§æ’åºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> operator

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):
        self.name = name
        self.age = age

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__repr__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{self.name}</span>(<span class="hljs-subst">{self.age}</span>)"</span>

people = [Person(<span class="hljs-string">'Alice'</span>, <span class="hljs-number">25</span>), Person(<span class="hljs-string">'Bob'</span>, <span class="hljs-number">22</span>), Person(<span class="hljs-string">'Charlie'</span>, <span class="hljs-number">24</span>)]
sorted_people = <span class="hljs-built_in">sorted</span>(people, key=operator.attrgetter(<span class="hljs-string">'age'</span>))
<span class="hljs-built_in">print</span>(sorted_people)  <span class="hljs-comment"># è¾“å‡ºï¼š[Bob(22), Charlie(24), Alice(25)]</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-13">ä¸‰ã€sort()ä¸sorted()ï¼šé€‰æ‹©åˆé€‚çš„æ’åºå·¥å…·</h2>
<h3 data-id="heading-14">3.1 åŸåœ°æ’åº vs åˆ›å»ºæ–°åˆ—è¡¨</h3>
<ul>
<li><code>list.sort()</code>æ˜¯åˆ—è¡¨æ–¹æ³•ï¼Œç›´æ¥ä¿®æ”¹åŸåˆ—è¡¨ï¼Œè¿”å›<code>None</code>ã€‚é€‚ç”¨äºæ— éœ€ä¿ç•™åŸå§‹é¡ºåºçš„åœºæ™¯ï¼Œå¦‚æ•°æ®é¢„å¤„ç†ã€‚</li>
<li><code>sorted()</code>æ˜¯å†…ç½®å‡½æ•°ï¼Œè¿”å›æ–°æ’åºåˆ—è¡¨ï¼ŒåŸåˆ—è¡¨ä¸å˜ã€‚é€‚ç”¨äºéœ€ä¿ç•™åŸå§‹æ•°æ®çš„åœºæ™¯ï¼Œå¦‚å±•ç¤ºæ’åºç»“æœåç»§ç»­åˆ†æåŸæ•°æ®ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss">numbers = <span class="hljs-selector-attr">[3, 1, 4, 2]</span>
sorted_numbers = <span class="hljs-built_in">sorted</span>(numbers)  # è¿”å›æ–°åˆ—è¡¨
<span class="hljs-built_in">print</span>(numbers)  # è¾“å‡ºï¼š<span class="hljs-selector-attr">[3, 1, 4, 2]</span>ï¼ˆåŸåˆ—è¡¨æœªå˜ï¼‰
<span class="hljs-built_in">print</span>(sorted_numbers)  # è¾“å‡ºï¼š<span class="hljs-selector-attr">[1, 2, 3, 4]</span>

numbers<span class="hljs-selector-class">.sort</span>()  # åŸåœ°æ’åº
<span class="hljs-built_in">print</span>(numbers)  # è¾“å‡ºï¼š<span class="hljs-selector-attr">[1, 2, 3, 4]</span>ï¼ˆåŸåˆ—è¡¨å·²å˜ï¼‰
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-15">3.2 æ€§èƒ½ä¸å†…å­˜è€ƒè™‘</h3>
<ul>
<li><code>list.sort()</code>å› åŸåœ°æ“ä½œï¼Œæ— éœ€åˆ›å»ºæ–°åˆ—è¡¨ï¼Œå†…å­˜æ•ˆç‡æ›´é«˜ï¼Œé€‚åˆå¤„ç†å¤§å‹åˆ—è¡¨ã€‚</li>
<li><code>sorted()</code>éœ€åˆ›å»ºæ–°åˆ—è¡¨ï¼Œå†…å­˜å¼€é”€ç•¥å¤§ï¼Œä½†ä»£ç æ›´å®‰å…¨ï¼ˆé¿å…æ„å¤–ä¿®æ”¹åŸæ•°æ®ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-16">å››ã€å®æˆ˜æ¡ˆä¾‹ï¼škeyå‚æ•°çš„çµæ´»åº”ç”¨</h2>
<h3 data-id="heading-17">æ¡ˆä¾‹1ï¼šæŒ‰æ–‡ä»¶æ‰©å±•åæ’åº</h3>
<p>å‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨ï¼Œéœ€æŒ‰æ‰©å±•åæ’åºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">files = <span class="hljs-selector-attr">[<span class="hljs-string">'document.pdf'</span>, <span class="hljs-string">'image.png'</span>, <span class="hljs-string">'spreadsheet.xlsx'</span>, <span class="hljs-string">'notes.txt'</span>]</span>

def <span class="hljs-built_in">get_extension</span>(filename):
    return filename.<span class="hljs-built_in">split</span>(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>]  # æå–æ‰©å±•å

sorted_files = <span class="hljs-built_in">sorted</span>(files, key=get_extension)
<span class="hljs-built_in">print</span>(sorted_files)
# è¾“å‡ºï¼š[<span class="hljs-string">'document.pdf'</span>, <span class="hljs-string">'image.png'</span>, <span class="hljs-string">'notes.txt'</span>, <span class="hljs-string">'spreadsheet.xlsx'</span>]ï¼ˆæŒ‰æ‰©å±•åå­—æ¯é¡ºåºï¼‰
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-18">æ¡ˆä¾‹2ï¼šæŒ‰å…ƒç»„ä¸­å…ƒç´ ä¼˜å…ˆçº§æ’åº</h3>
<p>å¯¹åŒ…å«å…ƒç»„çš„åˆ—è¡¨ï¼Œéœ€å…ˆæŒ‰ç¬¬äºŒä¸ªå…ƒç´ æ’åºï¼Œå†æŒ‰ç¬¬ä¸€ä¸ªå…ƒç´ æ’åºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">tuples = <span class="hljs-selector-attr">[(<span class="hljs-string">'a'</span>, 3), (<span class="hljs-string">'b'</span>, 1), (<span class="hljs-string">'c'</span>, 2), (<span class="hljs-string">'d'</span>, 1)]</span>
sorted_tuples = <span class="hljs-built_in">sorted</span>(tuples, key=lambda x: (x[<span class="hljs-number">1</span>], x[<span class="hljs-number">0</span>]))
<span class="hljs-built_in">print</span>(sorted_tuples)
# è¾“å‡ºï¼š<span class="hljs-selector-attr">[(<span class="hljs-string">'b'</span>, 1), (<span class="hljs-string">'d'</span>, 1), (<span class="hljs-string">'c'</span>, 2), (<span class="hljs-string">'a'</span>, 3)]</span>ï¼ˆå…ˆæŒ‰ç¬¬äºŒä¸ªå…ƒç´ å‡åºï¼Œå†æŒ‰ç¬¬ä¸€ä¸ªå…ƒç´ å­—æ¯é¡ºåºï¼‰
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-19">æ¡ˆä¾‹3ï¼šå¤æ‚é€»è¾‘æ’åº</h3>
<p>å‡è®¾éœ€æŒ‰ä»¥ä¸‹è§„åˆ™æ’åºï¼šå…ˆæŒ‰å­—ç¬¦ä¸²é•¿åº¦é™åºï¼Œé•¿åº¦ç›¸åŒåˆ™æŒ‰å­—æ¯é¡ºåºå‡åºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">words = <span class="hljs-selector-attr">[<span class="hljs-string">'apple'</span>, <span class="hljs-string">'banana'</span>, <span class="hljs-string">'cherry'</span>, <span class="hljs-string">'date'</span>, <span class="hljs-string">'fig'</span>]</span>
sorted_words = <span class="hljs-built_in">sorted</span>(words, key=lambda x: (-len(x), x))  # é•¿åº¦å–è´Ÿå®ç°é™åº
<span class="hljs-built_in">print</span>(sorted_words)
# è¾“å‡ºï¼š<span class="hljs-selector-attr">[<span class="hljs-string">'banana'</span>, <span class="hljs-string">'cherry'</span>, <span class="hljs-string">'apple'</span>, <span class="hljs-string">'date'</span>, <span class="hljs-string">'fig'</span>]</span>ï¼ˆé•¿åº¦<span class="hljs-number">6</span> &gt; <span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>ï¼Œé•¿åº¦<span class="hljs-number">5</span>çš„'apple' &lt; 'cherry'ï¼‰
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-20">äº”ã€æ€»ç»“ï¼škeyå‚æ•°çš„â€œæ ¸å¿ƒä»·å€¼â€</h2>
<ul>
<li><strong>çµæ´»æ€§</strong>ï¼šé€šè¿‡è‡ªå®šä¹‰<code>key</code>å‡½æ•°ï¼Œå¯å®ç°ä»»æ„å¤æ‚çš„æ’åºé€»è¾‘ï¼Œå¦‚æŒ‰å¯¹è±¡å±æ€§ã€å­—å…¸é”®ã€è®¡ç®—ç»“æœç­‰æ’åºã€‚</li>
<li><strong>é€šç”¨æ€§</strong>ï¼šé€‚ç”¨äº<code>list.sort()</code>å’Œ<code>sorted()</code>ï¼Œè¦†ç›–åŸåœ°æ’åºå’Œåˆ›å»ºæ–°åˆ—è¡¨çš„éœ€æ±‚ã€‚</li>
<li><strong>å¯è¯»æ€§</strong>ï¼šç»“åˆlambdaè¡¨è¾¾å¼æˆ–<code>operator</code>æ¨¡å—ï¼Œä»£ç ç®€æ´æ˜“è¯»ï¼Œé¿å…å†—é•¿çš„æ¯”è¾ƒå‡½æ•°ã€‚</li>
</ul>
<p>æŒæ¡<code>key</code>å‚æ•°åï¼ŒPythonåˆ—è¡¨æ’åºå°†ä¸å†å—é™äºé»˜è®¤è§„åˆ™ã€‚æ— è®ºæ˜¯å¤„ç†æ··åˆç±»å‹æ•°æ®ã€å¤šæ¡ä»¶æ’åºï¼Œè¿˜æ˜¯å¤æ‚é€»è¾‘æ’åºï¼Œ<code>key</code>éƒ½èƒ½è®©æ’åºå˜å¾—ç®€å•é«˜æ•ˆã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯­æ³•åˆ†æ(4)ï¼šä»¥å¬ä¼—ä¸ºä¸­å¿ƒçš„è‡ªåº•å‘ä¸Šè¯­æ³•åˆ†æ]]></title>    <link>https://juejin.cn/post/7605800124883615750</link>    <guid>https://juejin.cn/post/7605800124883615750</guid>    <pubDate>2026-02-13T01:27:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605800124883615750" data-draft-id="7605807405306986559" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯­æ³•åˆ†æ(4)ï¼šä»¥å¬ä¼—ä¸ºä¸­å¿ƒçš„è‡ªåº•å‘ä¸Šè¯­æ³•åˆ†æ"/> <meta itemprop="keywords" content="ç¼–è¯‘åŸç†"/> <meta itemprop="datePublished" content="2026-02-13T01:27:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æç¬‘åƒµå°¸æ€è€ƒæ—¶é—´"/> <meta itemprop="url" content="https://juejin.cn/user/168673917806618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯­æ³•åˆ†æ(4)ï¼šä»¥å¬ä¼—ä¸ºä¸­å¿ƒçš„è‡ªåº•å‘ä¸Šè¯­æ³•åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/168673917806618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æç¬‘åƒµå°¸æ€è€ƒæ—¶é—´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T01:27:32.000Z" title="Fri Feb 13 2026 01:27:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>æœ¬æ–‡æ˜¯æœ¬äººæ’°å†™çš„ç¼–è¯‘åŸç†è®²ä¹‰ã€‚</p>
<p>æœ¬ç³»åˆ—è®²ä¹‰é€‚ç”¨äºï¼šè¢«å¼ºè¿«å­¦ä¹ ç¼–è¯‘åŸç†å‰ç«¯ï¼Œæˆ–è€…å¸Œæœ›å¼„æ˜ç™½å¦‚ä½•åšç§‘ç ”çš„äººã€‚</p>
<h3 data-id="heading-0">1. å½’çº¦ï¼šäººç±»è¯­æ³•åˆ†æè¿‡ç¨‹æ ¸å¿ƒ</h3>
<p>ä¸ºç¼–ç¨‹è¯­è¨€è®¾è®¡å‡ºè¯­æ³•ï¼Œç»ˆç©¶æ˜¯è¦ç»™äººç”¨æ¥ç¼–ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯­æ³•ä¸€æ–¹é¢æ˜¯ç”¨æ¥ç»„ç»‡è¯­è¨€çš„ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯è¦ç”¨æ¥ç»™æœºå™¨å’Œäººæ¥ç†è§£è¿™ä¸ªè¢«ç»„ç»‡å‡ºæ¥çš„ç¬¦å·ä¸²çš„ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ—¢ç„¶å‰é¢å•çº¯åœ°ä»¥æœºå™¨ä¸ºä¸­å¿ƒçš„ç†è§£è¿‡ç¨‹è¢«è¯æ˜æš‚æ—¶ä¸å¤ªå¯è¡Œï¼Œé‚£ä¸å¦‚è¯•ä¸€ä¸‹åˆ†æäººç±»æ˜¯æ€ä¹ˆç†è§£ä¸€å¥è¯å§ï¼Œç„¶åæ¨¡ä»¿è¿™ä¸ªè¿‡ç¨‹å†™ä¸€ä¸ªåˆ†æç®—æ³•ï¼Ÿ</p>
<p>è¿˜æ˜¯éšä¾¿å…ˆæ‹¿ä¸ªç®€å•ä¾‹å­ï¼Œå°±â€œæˆ‘æ˜¯å¤§å­¦ç”Ÿâ€è¿™å¥è¯å§ã€‚</p>
<p>é¦–å…ˆäººè‚¯å®šæ˜¯ä¸€ä¸ªä¸€ä¸ªå­—å»å¬ï¼Œå¬çš„è¿‡ç¨‹ä¸­å¦‚æœå‘ç°äº†ä¸€ä¸ªè¯ï¼Œè‚¯å®šä¼šæ ¹æ®è¯æ€§æ¥è¿›è¡Œå½’çº³ï¼Œç„¶åå†æ ¹æ®å„ç§è¯­æ³•åˆå¹¶è¿™äº›è¯­æ³•æ¦‚å¿µï¼Œç›´åˆ°æœ€åå‘ç°è¿™æ˜¯ä¸€ä¸ªå¥å­ã€‚</p>
<p>ä¸‹é¢çš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿç†è§£è¿™å¥è¯çš„è¿‡ç¨‹ï¼Œå…¶ä¸­|æ¨¡æ‹Ÿäº†è¯»å…¥çš„è¿›åº¦ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">æˆ‘|æ˜¯å¤§å­¦ç”Ÿ â†’<span class="hljs-tag">&lt;<span class="hljs-name">ä¸»è¯­</span>&gt;</span>æ˜¯|å¤§å­¦ç”Ÿ â†’<span class="hljs-tag">&lt;<span class="hljs-name">ä¸»è¯­</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">åŠ¨è¯</span>&gt;</span>å¤§å­¦ç”Ÿ| â†’<span class="hljs-tag">&lt;<span class="hljs-name">ä¸»è¯­</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">åŠ¨è¯</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">åè¯</span>&gt;</span>| â†’ <span class="hljs-tag">&lt;<span class="hljs-name">ä¸»è¯­</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">è°“è¯­</span>&gt;</span>| â†’ <span class="hljs-tag">&lt;<span class="hljs-name">å¥å­</span>&gt;</span>|
</code></pre>
<p>å¦‚æœç”¨è¯­æ³•æ ‘çš„æ„å»ºæ¥è¡¨ç¤ºï¼Œé‚£å°±æ˜¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c67dcb58a534c8fbd5fb6eac1ae167a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pCe56yR5YO15bC45oCd6ICD5pe26Ze0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771550852&amp;x-signature=xu23e88Umt0SJzxifX6lTz6ZHHU%3D" alt="" loading="lazy"/>â€‹<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/588d9631d66047409dfc0422540ba1b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pCe56yR5YO15bC45oCd6ICD5pe26Ze0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771550852&amp;x-signature=GouGFWZ1wOdEjDFOPrsGNivdo%2Fw%3D" alt="" loading="lazy"/></p>
<p>çœ‹èµ·æ¥ï¼Œè¿™æ ·çš„ç†è§£æ–¹å¼ä¼¼ä¹æ˜¯ä¸ºäº†ç»™å¤§è„‘å‡è´Ÿï¼šä¸€æ–¹é¢æˆ‘ä»¬æœ‰ä»å·¦åˆ°å³çš„é˜…è¯»ä¹ æƒ¯ï¼Œå¦ä¸€æ–¹é¢ç”±äºäººç±»çš„çŸ­æ—¶è®°å¿†æå…¶æœ‰é™ï¼ˆé€šå¸¸åªèƒ½ç»´æŒ 7 ä¸ªå·¦å³çš„å•ä½ï¼‰ï¼Œæ‰€ä»¥æ€»ä¼šæƒ³åŠæ³•æŠŠå·²ç»è¯»è¿›å»çš„ç¬¦å·å°½å¯èƒ½æŠ½è±¡æˆä¸€ä¸ªè¯­æ³•ç¬¦å·ï¼Œä»è€ŒåŒ–ç®€è¿™æ®µä¸œè¥¿åœ¨è„‘æµ·é‡Œçš„å¤æ‚åº¦ï¼Œæ–¹ä¾¿ç†è§£ã€‚</p>
<p>é‚£å¦‚æœè¯´ç»„ç»‡è¯­è¨€æ˜¯ç†è§£è¯­è¨€çš„é€†è¿‡ç¨‹ï¼Œæ„å‘³ç€ç»„ç»‡è¯­è¨€å°±æ˜¯ç±»ä¼¼äºLL1ä¸€æ ·çš„ä¸æ–­åœ¨éç»ˆç»“ç¬¦ä¸­å¾€ä¸‹æŒ–å‡ºæ¥ä¸€æ£µæ ‘çš„è¿‡ç¨‹ï¼Œè€Œé¡ºåºå’Œæˆ‘ä»¬çš„é˜…è¯»é¡ºåºç›¸åï¼Œæ˜¯ä»å³å¾€å·¦æ·±åº¦ä¼˜å…ˆéå†ã€‚</p>
<p>ä¹‹æ‰€ä»¥æŒ‰ç…§è¿™ç§é¡ºåºï¼Œå› ä¸ºè¿™æ ·å­å·¦è¾¹ç›¸å¯¹å³è¾¹è¦æ›´è¿Ÿæ¨å¯¼å‡ºæ¥ï¼Œä¸ç†è§£è¿‡ç¨‹ä¸­æœ€å…ˆè¢«å¤„ç†ç›¸å¯¹åº”ã€‚</p>
<p>è¯è¯´å›æ¥ï¼Œç†è§£è¿™ä¸ªè¯ä¹Ÿå¤ªå®½æ³›äº†ï¼Œæ„Ÿè§‰ç¦»è¯­æ³•æ ‘è¿™ä¸ªè¯­å¢ƒå¤ªè¿œäº†ï¼Œæ¢ä¸ªä»€ä¹ˆè¯æ¯”è¾ƒå¥½å‘¢ã€‚ã€‚</p>
<p>è¿™äº›æ¸¸å…µæ•£å‹‡ä¸€æ ·çš„å•è¯ï¼Œä¸€ç°‡ä¸€ç°‡åœ°å½’çº³åˆ°äº†æŸä¸ªè¯­æ³•æ¦‚å¿µçš„æ——ä¸‹ï¼Œæœ‰ç‚¹åƒæ˜¯çº¦åˆ†ã€çº¦ç®€ä¸€æ ·ï¼ŒæŠŠå¤æ‚çš„é—®é¢˜ç»™ç®€åŒ–ã€‚ã€‚ã€‚å½’çº³ã€‚ã€‚çº¦ç®€ã€‚ã€‚å½’çº¦ï¼Ÿï¼Ÿï¼Ÿå¯è¿˜è¡Œã€‚</p>
<p>åœ¨ç”µè„‘æ•²ä¸‹å½’çº¦è¿™ä¸ªè¯çš„æ—¶å€™ï¼Œè¾“å…¥æ³•æ€»æ˜¯æƒ…ä¸è‡ªç¦æŠŠå¦ä¸€ä¸ªåŒéŸ³è¯è§„çº¦æ”¾åˆ°äº†é¦–ä½ã€‚è«éè¿™ä¸¤è¯å·®ä¸å¤šï¼Ÿï¼Ÿå¥½åƒä¸å¯¹ï¼Œè§„æ›´åƒæ˜¯è§„èŒƒï¼Œç”±äºæ˜¯åè¯ï¼Œæ‰€ä»¥åé¢çš„çº¦ä¹Ÿæ›´åƒæ˜¯çº¦å®šçš„çº¦ï¼Œè·Ÿå½’çº¦çš„æ„æ€å·®è¿œäº†ï¼</p>
<p>è¯´ç½¢ï¼Œä¾¿å°†å½’çº¦è®¾ä¸ºäº†å›ºå®šé¦–ä½ã€‚</p>
<h3 data-id="heading-1">2. æ‰¾å‡ºå¥æŸ„ï¼šåŸºäºå½’çº¦çš„è¯­æ³•åˆ†æé‡ç‚¹</h3>
<p>æ€»ç»“ä¸‹ç°åœ¨çš„æƒ…å†µï¼šä»å·¦å¾€å³æ‰«æå¾…è§£æçš„å‘½ä»¤ï¼Œç„¶åä¸€æ—¦å‘ç°å¯ä»¥å½’çº¦çš„ä¸œè¥¿å°±è¿›è¡Œå½’çº¦ã€‚</p>
<p>Emmï¼Œæ€ä¹ˆè¶Šæƒ³è¶Šåƒæ‹¼æ‹¼å›¾çš„è¿‡ç¨‹äº†ï¼šå…ˆæŠŠä¸€ä¸ªä¸€ä¸ªçš„æ‹¼å›¾ç¢ç‰‡æŒ‰ç›¸ä¼¼åº¦æ‹¼å‡ºä¸€ä¸ªä¸ªæ¨¡å—ï¼Œä¹‹åè¦æ˜¯æ¨¡å—ä¹‹é—´åˆæœ‰ç›¸ä¼¼æ€§ï¼Œå°±å†æ¬¡æ‹¼è£…åˆ°ä¸€èµ·ã€‚</p>
<p>é‚£ç°åœ¨é—®é¢˜æ¥äº†ï¼Œæ‹¼å›¾æ˜¯æœ‰å›¾åƒè®©æˆ‘å‘ç°ä»–ä»¬çš„ç›¸ä¼¼æ€§çš„ï¼›è¿™ç¬¦å·ä¸²ä¸­ï¼Œæ€ä¹ˆå»å‘ç°ç¬¦å·ä¹‹é—´çš„å…³è”æ€§å‘¢ï¼Ÿ</p>
<p>å•Šå¯¹ï¼Œè¿™äº›ç¬¦å·ä¸²æ˜¯é€šè¿‡ä¸€å®šçš„è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿå¼ï¼Œä»å·¦éƒ¨æ¨å¯¼å‡ºå³éƒ¨ä¼¸å±•æ¥çš„ã€‚</p>
<p>é‚£æˆ‘ç°åœ¨å°±åº”è¯¥åè¿‡æ¥ï¼Œåœ¨æ‰«æè¿‡ç¨‹ä¸­ä¸€æ—¦ä»æˆ‘æ‰‹ä¸Šå·²è¯»å…¥çš„å†…å®¹ä¸­è¯†åˆ«å‡ºäº†æŸæ¡äº§ç”Ÿå¼çš„å³éƒ¨ï¼Œé‚£å°±è¿›è¡Œå½’çº¦å‘—ï¼</p>
<p>äº§ç”Ÿå¼å³éƒ¨ï¼Œè¿™åå­—å¤ªé•¿äº†ï¼Œæ¢ä¸ªä»€ä¹ˆåå­—å¥½å‘¢ã€‚ã€‚å®ƒä»¬å°±åƒæ˜¯è¢«è¯†åˆ«å¥å­çš„æŠŠæŸ„ä¸€æ ·ï¼Œå¹²è„†å°±å«è¿™äº›ä¸œè¥¿åšå¥æŸ„å§ï¼</p>
<p>å¥½å¥½å¥½ï¼Œç°åœ¨é—®é¢˜å°±å˜æˆäº†ï¼Œæ€ä¹ˆåœ¨æ‰«æçš„è¿‡ç¨‹ä¸­è¯†åˆ«å¥æŸ„å‘¢ã€‚ã€‚ï¼Ÿ</p>
<p>ç­‰ä¸€ä¸‹ï¼Œè¯†åˆ«è¯†åˆ«ï¼Œä¹‹å‰è¯æ³•åˆ†æå™¨è¯†åˆ«çš„æ˜¯å•è¯ï¼Œé‚£èƒ½ä¸èƒ½é­”æ”¹ä¸€ä¸‹DFAï¼Œè®©å®ƒä»è¯†åˆ«ç¬¦å·ä¸²æ„æˆçš„å•è¯ï¼Œå˜æˆè¯†åˆ«ç”±å•è¯ä¸²ç»„æˆçš„å¥å­ï¼Ÿï¼Ÿ</p>
<p>â€œè¿˜çœŸåˆ«è¯´ï¼ŒåŸç†ä¸Šå®Œå…¨å¯è¡Œå•Šï¼ŒDFAæ ¸å¿ƒä¹Ÿå°±æ˜¯åªè¦èµ°åˆ°ç»ˆæ€å°±æˆåŠŸè¯†åˆ«ï¼Œç°åœ¨åªè¦æŠŠæ¿€åŠ±ä»å•çº¯çš„ç»ˆç»“ç¬¦å˜æˆå’Œéç»ˆç»“ç¬¦çš„å¹¶é›†ï¼Œå¥½åƒå°±èƒ½æå®šå•Šï¼â€åˆé¥­æ—¶é—´ï¼Œå¸ˆå‚…ç®€å•å¬äº†ä¸€ä¸‹æ–¹æ¡ˆæ±‡æŠ¥ï¼Œç«‹é©¬å°±ç»™äºˆäº†è‚¯å®šã€‚</p>
<p>â€œå°±æ˜¯æˆ‘æ„Ÿè§‰æœ‰å‡ ä¸ªå°é—®é¢˜ï¼Œä½ æƒ³æƒ³å’‹ä¸ªè§£å†³ã€‚</p>
<p>é¦–å…ˆï¼Œä½ åˆšåˆšä¸æ˜¯è¯´è¿™ä¸ªå¥æŸ„æ˜¯ç»„è£…ç€çªç„¶å‘ç°çš„ä¹ˆï¼Œé‚£æˆ‘å°±å½“ä½ æ˜¯ä¸æ–­åœ°æ‰«ææ–°ç¬¦å·ï¼Œè§„çº¦äº¤æ›¿è¿›è¡Œã€‚ä½†åœ¨é©¬ä¸Šå°±è¦ç»„è£…å‡ºæ¥çš„å¥æŸ„ä¹‹å‰ï¼Œæ„Ÿè§‰æœ‰å¾ˆå¤§å¯èƒ½ä¼šæœ‰ä¸€äº›å’Œè¿™ä¸ªå¥æŸ„æ¯«æ— å…³ç³»çš„ç¬¦å·å­˜åœ¨äºä½ çš„è¯†åˆ«ç¼“å­˜åŒºä¸­ã€‚</p>
<p>æŒ‰ç…§DFAçš„é€»è¾‘ï¼Œåªèƒ½æ˜¯ä»å¼€å§‹ç¬¦å·æ¥å—æ­£ç¡®çš„æ¿€åŠ±ï¼Œåªæœ‰èƒ½åˆ°è¾¾ç»ˆæ€æ‰å«åšè¯†åˆ«æˆåŠŸã€‚é‚£ç°åœ¨æœ‰ä¸€äº›æ— å…³çš„ç¬¦å·åœ¨ä½ è¦è¯†åˆ«çš„å¥æŸ„ä¹‹å‰ï¼Œä½ å°±éœ€è¦æƒ³å‡ºæ¥ä¸€ä¸ªæœºåˆ¶å»æ’é™¤è¿™äº›é¢å¤–ç¬¦å·çš„å¹²æ‰°ã€‚æˆ–è€…è¯´ï¼Œå³ä½¿æœ‰è¿™äº›ä¸ç›¸å¹²ç¬¦å·æå‰ç»™çŠ¶æ€æœºä¸€äº›æ— å…³çš„æ¿€åŠ±ï¼Œä¹Ÿèƒ½è®©ä»–æœ€åè¯†åˆ«æ­£ç¡®ã€‚</p>
<p>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä½ ä¹‹å‰ä¸æ˜¯è¯´è¿‡è¦æœ‰å±‚æ¬¡ç»“æ„å°±å¿…é¡»è¦æœ‰æ ˆä¹ˆï¼Œé‚£ç°åœ¨æ ˆåˆ°å“ªé‡Œå»äº†ï¼Ÿå…ˆè¿™ä¹ˆå¤šå§ï¼Œæˆ‘ç¨åè¿˜æœ‰ä¸ªä¼šï¼Œå…ˆæ’¤äº†ã€‚â€è¯´ç½¢ä¾¿åŒ†åŒ†ç¦»å»äº†ã€‚</p>
<p>å¯¹å•Šï¼Œæ ˆå»äº†å“ªé‡Œå‘¢ï¼Ÿç­‰ä¸€ä¸‹ï¼Œè¯†åˆ«ç¼“å†²åŒºï¼Ÿå¯¹å•Šï¼Œè¿™ä¸å°±æ˜¯é‚£ä¸ªæ ˆä¹ˆï¼ç¬¦å·ä¸€ä¸ªä¸€ä¸ªå‹å…¥ç¼“å†²åŒºé‡Œé¢ï¼Œç„¶åè¦æ˜¯æ»¡è¶³è§„çº¦æ¡ä»¶ï¼Œå°±æŠŠè¿™äº›ç¬¦å·ç»„è£…æˆï¼Œæˆ–è€…è¯´å½’çº¦æˆä¸€ä¸ªéç»ˆç»“ç¬¦ï¼Œç»„è£…å‡ºæ¥çš„ä¸œè¥¿å°±è¿˜æ˜¯å‡ºç°åœ¨ç¼“å†²åŒºæŒ‡ç¤ºå™¨çš„é¡¶ç«¯ï¼Œè¿™ä¸å°±æ˜¯æ ˆçš„åè¿›å…ˆå‡ºå˜›ï¼</p>
<p>è¿™ä¹ˆè¯´æ¥ï¼Œå’Œå•çº¯çš„DFAç›¸æ¯”ï¼Œç°åœ¨å°±æ˜¯å¤šäº†ä¸€ä¸ªæ ˆæ¥ä¿å­˜è¿‡å¾€çš„è·¯å¾„ä»¥åŠå½“å‰çš„çŠ¶æ€ï¼</p>
<p>é‚£åªå‰©ä¸‹å¸ˆå‚…è¯´çš„é‚£ä¸ªé—®é¢˜äº†ï¼šæ€ä¹ˆç¡®ä¿åœ¨åˆæ€ä¸ç¡®å®šçš„å‰æä¸‹è¿˜èƒ½åœ¨åˆé€‚çš„æ¿€åŠ±ä¸‹èµ°åˆ°ç»ˆæ€å‘¢ï¼Ÿ</p>
<p>ç­‰ä¸€ä¸‹ï¼Œåˆæ€çœŸçš„ä¸ç¡®å®šå—ï¼Ÿï¼Ÿ</p>
<p>å¦‚æœæŒ‰ç…§ä¹‹å‰LL(1)é‡Œé¢Firsté›†åˆçš„æ€è·¯ï¼ŒFirst(S)æ€»èƒ½æŠŠå¥å­å¤´éƒ¨å¯èƒ½å‡ºç°çš„å•è¯ç»™æ±‚å‡ºæ¥ï¼›è€ŒFollow(Î²)æ€»èƒ½æŠŠè¿™ä¸ªç¬¦å·åé¢å¯èƒ½æœ‰å“ªäº›ç¬¦å·ç»™ç®—å‡ºæ¥ï¼Œè€Œä¸”è¿˜å¾ˆå¤§å¯èƒ½ä¸æ˜¯ç¬¦å·è¡¨çš„å…¨é›†ã€‚</p>
<p>è¿™è¯´æ˜ï¼Œç¬¦å·ä¹‹é—´çš„å‰åé¡ºåºè‚¯å®šæœ‰å…³è”çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¥æŸ„å‰é¢çš„ç¬¦å·åº”è¯¥ä¹Ÿæ˜¯èƒ½è®¡ç®—å‡ºæ¥çš„ï¼</p>
<p>é‚£å¦‚æœï¼Œæˆ‘èƒ½æå‰è®¡ç®—å‡ºï¼Œä»å¥é¦–ä¸€ç›´åˆ°å¥æŸ„å¼€å§‹å‰ä¼šæœ‰å“ªäº›å…ˆå¯¼çš„ç¬¦å·ï¼Œç„¶åæŠŠè¿™ä¸ªçŠ¶æ€ä½œä¸ºè¯†åˆ«å¥æŸ„çš„å¼€å§‹çŠ¶æ€ï¼Œæ¥ç€æ‹¼æ¥é‚£ä¸ªè¯†åˆ«å…·ä½“å¥æŸ„çš„DFAï¼Œä¸å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜äº†ï¼Ÿï¼Ÿ</p>
<p>æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œå°±åº”è¯¥æŠŠæ‰€æœ‰çŠ¶æ€éƒ½åˆ—å‡ºæ¥ï¼Œå†æ‰¾å‡ºä»–ä»¬çš„ç›¸äº’å…³ç³»ã€‚</p>
<h3 data-id="heading-2">3. è¿›åº¦æ¡=äº§ç”Ÿå¼+æŒ‡ç¤ºå™¨=çŠ¶æ€</h3>
<p>æ—¢ç„¶çŸ¥é“å¤§æ–¹å‘æ˜¯è¦ç®—å‡ºæ¥ç‰¹å®šå¥æŸ„çš„å‰ç¼€ï¼Œé‚£ä¹ˆå°±è€æ–¹æ³•ï¼Œä»ç®€å•ä¾‹å­é‚£é‡Œæ€»ç»“å§ã€‚å‡ºæ¥å§éšæœºæ–‡æ³•ç”Ÿæˆå™¨ï¼</p>
<p>ä¹ é¢˜1ï¼šæ–‡æ³•G[E]</p>
<pre><code class="hljs language-css" lang="css">Eâ†’aAc 
<span class="hljs-selector-tag">A</span>â†’<span class="hljs-selector-tag">b</span>
</code></pre>
<p>æ¯«æ— å¤´ç»ªçš„æ—¶å€™ï¼Œäººå°±å–œæ¬¢ä¹±ç‚¹é¼ æ ‡ã€‚</p>
<p>é¼ æ ‡åœ¨açš„å·¦è¾¹ç‚¹å‡»ä¸€ä¸‹ï¼Œé—ªå‘€é—ªå‘€ã€‚æŒ‰ä¸€ä¸‹å³é”®ï¼ŒæŒ‰ä¸€ä¸‹å³é”®ã€‚ã€‚ã€‚</p>
<p>Emmï¼Œæ€ä¹ˆæ„Ÿè§‰ ï¼Œè¿™ä¸ªæ‰«æã€ç»„è£…çš„è¿‡ç¨‹ï¼Œå®Œå…¨å°±æ˜¯å…‰æ ‡æ‰«æçš„è¿‡ç¨‹ï¼š</p>
<p>å°±åƒæ˜¯ï¼Œä¸€å¼€å§‹æœ‰ä¸€ä¸ªå…‰æ ‡ä»açš„å·¦è¾¹å¼€å§‹é—ªçƒï¼Œç„¶åæ¥å—ä¸€ä¸ªaä¹‹åï¼Œå…‰æ ‡ç§»åŠ¨ä¸€ä¸‹ï¼›æ¥åˆ°Aä¹‹åï¼Œå…‰æ ‡åœ¨ç¬¬äºŒè¡Œå·¦è¾¹å¼€å§‹é—ªçƒã€‚è¿™ä¸ªæ—¶å€™ä¸Šä¸‹ä¸¤å±‚å¹³è¡Œä¸–ç•Œéƒ½åœ¨ç­‰å¾…å„è‡ªæƒ³è¦çš„ç¬¦å·ã€‚ç„¶åbè¯»å…¥ä¹‹åï¼ŒAçš„è¿™ä¸ªå¼å­çš„å…‰æ ‡ç§»åˆ°äº†æœ€å³è¾¹ï¼Œè¿™ä¸ªbå½’çº¦æˆAï¼Œç¬¬ä¸€æ¡å¼å­å¿ƒå¿ƒå¿µå¿µçš„Aè¿™ä¸å°±æ‹¿åˆ°äº†ï¼Œæœ€åå†åŠ ä¸Šcï¼Œç»“æŸã€‚</p>
<p>å¦‚æœæŠŠâ€œE-&gt;|aAcâ€çœ‹ä½œæ˜¯ä¸€ä¸ªæ—¶åˆ»ï¼Œæ¥æ”¶å®Œaä¹‹åçš„åœºåˆæ˜æ˜¾ä¸ä¸€æ ·äº†ï¼Œé‚£å°±å¯ä»¥çœ‹ä½œæ˜¯å‘ç”Ÿäº†çŠ¶æ€è½¬ç§»ï¼Œå˜æˆâ€œE-&gt;a|Acâ€ï¼ç„¶åè¿™ä¸ªæ—¶å€™ç”±äºè¦è¿›å…¥Aè¿™ä¸ªå­ç¨‹åºï¼Œè¿™ä¸ªæ—¶å€™çš„çŠ¶æ€ä¼¼ä¹å°±åº”è¯¥åŒ…æ‹¬è¿™ä¸ªå­å‡½æ•°çš„äº§ç”Ÿå¼ç»„è£…è¿›åº¦ã€‚</p>
<p>å¯¹å•Šï¼ŒæŒ‡ç¤ºç¬¦åœ¨ä¸²ä¸­æœ‰ä¸åŒä½ç½®ï¼Œè¿™å®Œå…¨å°±æ˜¯ä¸ªè¿›åº¦æ¡ï¼è€Œè¿›åº¦æ¡æœ¬èº«å°±å¯ä»¥ä»£è¡¨çŠ¶æ€ï¼Œé‚£ä¹ˆåªè¦æŠŠå¥æŸ„å‡ºæ¥ä¹‹å‰çš„çŠ¶æ€å…¨éƒ¨åˆ—å‡ºæ¥ï¼Œå°±å¯ä»¥æŠŠDFAæ‹¼å‡‘å®Œæ•´äº†ã€‚ä¸è¿‡è¿™ä¸ªç«–çº¿å…‰æ ‡ä¹Ÿå¤ªå®¹æ˜“å’Œå­—æ¯læˆ–è€…æˆ– | æ··æ·†äº†ã€‚è¿˜æ˜¯ç”¨ä¸ªé—´éš”å· â€œÂ·â€æ¥åšè¿›åº¦æŒ‡ç¤ºå™¨å§ï¼</p>
<p>æ‰€ä»¥ï¼Œå¯¹äºåŒä¸€ä¸ªäº§ç”Ÿå¼çš„ä¸¤ä¸ªä¸åŒè¿›åº¦æ¡</p>
<p>a. Xâ†’X_1 X_2â€¦X_(i-1) Â· X_i X_(i+1)â€¦X_n</p>
<p>b. Xâ†’X_1 X_2â€¦X_(i-1) X_i Â· X_(i+1)â€¦X_n</p>
<p>å¯ä»¥æŠŠå®ƒä»¬çœ‹ä½œæ˜¯ä¸åŒçš„çŠ¶æ€ã€‚</p>
<p>å¦‚æœX_iæ˜¯ç»ˆç»“ç¬¦, æ„å‘³ç€å½“å¤„äºçŠ¶æ€aæ—¶ï¼Œåˆ™åªéœ€è¯»å–X_iï¼Œå°±ä¼šè®©çŠ¶æ€aè·³è½¬åˆ°çŠ¶æ€bï¼›æ­¤å¤–ï¼Œä¸¤ä¸ªçŠ¶æ€ä¹‹é—´åº”è¿ä¸€æ¡æ ‡è®°ä¸ºX_içš„å¼§</p>
<p>å¦‚æœX_iæ˜¯éç»ˆç»“ç¬¦ï¼Œæ„å‘³ç€å½“å¤„äºaçŠ¶æ€æ—¶ï¼Œéœ€è¦è¿›å…¥åˆ°X_içš„å­ç¨‹åºä¸­ã€‚</p>
<p>å‡è®¾å­˜åœ¨å¦‚ä¸‹ä»¥X_iä¸ºå·¦éƒ¨çš„äº§ç”Ÿå¼ï¼š</p>
<p>c. X_iâ†’Â·ab</p>
<p>d. X_iâ†’Â·ac</p>
<p>e. X_iâ†’Â·bc</p>
<p>æ„å‘³ç€X_iå¯èƒ½å­˜åœ¨å¤šä¸ªåˆ†æ”¯ã€‚è€Œè¿™äº›äº§ç”Ÿå¼å®é™…ä¸Šä¸bä¸€æ ·éƒ½å¤„äºåŒæ ·çš„çŠ¶æ€ã€‚</p>
<p>å› æ­¤ä¸aäº§ç”Ÿå¼å¤„äºåŒä¸€ä¸ªçŠ¶æ€çš„è¿›åº¦æ¡æœ‰aã€cã€dã€eå››æ¡ã€‚</p>
<p>å‡è®¾è¯¥çŠ¶æ€ä¸ºAï¼Œä¸”ç³»ç»Ÿæ­£å¤„äºçŠ¶æ€Aã€‚</p>
<p>åˆ™å½“è¾“å…¥ç¬¦å·aæ—¶ï¼Œæ‰€æœ‰å¯ä»¥å¤„ç†ç¬¦å·açš„äº§ç”Ÿå¼è¿›åº¦éƒ½ä¼šæ›´æ–°ï¼Œè¿›å…¥åªåŒ…å«ä»¥ä¸‹ä¸¤æ¡è¿›åº¦æ¡çš„çŠ¶æ€Bï¼š</p>
<p>f. X_iâ†’aÂ·b</p>
<p>g. X_iâ†’aÂ·c</p>
<p>æ„å‘³ç€æ‰€æœ‰ä¸èƒ½å¤„ç†açš„äº§ç”Ÿå¼å…¨éƒ¨æ¶ˆå¤±ã€‚</p>
<p>å½“æŸä¸ªè¿›åº¦æ¡åˆ°è¾¾100%ï¼Œä¹Ÿå°±æ˜¯è¿›åº¦æ¡æŒ‡ç¤ºå™¨åˆ°è¾¾äº†æœ€å³è¾¹ï¼Œæ„å‘³ç€å‰é¢çš„é›¶ä»¶å·²ç»è¶³ä»¥ç»„è£…æˆäº§ç”Ÿå¼å·¦éƒ¨çš„éç»ˆç»“ç¬¦ï¼Œä¹‹åå°±å¯ä»¥æŠŠç¼“å†²åŒºä¸­æ‰€æœ‰ç¬¦å·ç”¨äºå½’çº¦ï¼Œå¹¶å¾—åˆ°æ–°çš„éç»ˆç»“ç¬¦X_iã€‚</p>
<p>ç”±äºæ­¤æ—¶ç›¸å½“äºä»å­ç¨‹åºä¸­è¿”å›ï¼Œåº”è¯¥å›åˆ°è°ƒç”¨å­ç¨‹åºçš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯çŠ¶æ€Aã€‚</p>
<p>æ„å‘³ç€ï¼šçŠ¶æ€Aè·å¾—äº†éç»ˆç»“ç¬¦X_iï¼ŒX_iè¿›å…¥ç¬¦å·æ ˆï¼›è€Œåªæœ‰aè¿›åº¦æ¡å¯ä»¥å¤„ç†X_iï¼Œå› æ­¤æ›´æ–°åå¾—åˆ°çŠ¶æ€bã€‚</p>
<p>å•Šï¼ï¼çˆ½ï¼ï¼ï¼åˆå¤šä¸€ä¸ªç¥å¥‡ç®—æ³•äº†ï¼Œå«ä»€ä¹ˆå¥½å‘¢ã€‚ã€‚</p>
<p>é¦–å…ˆå®ƒä¹Ÿæ˜¯ä»å·¦åˆ°å³(Left to right)æ‰«æï¼Œä¹Ÿç»™ä¸€ä¸ªLå¼€å¤´å§ï¼›ç„¶åæ¯æ¬¡éƒ½æ˜¯æŠŠå½“å‰è¾“å…¥ä¸²çš„æœ€å³ï¼ˆRightmostï¼‰å¥æŸ„è¿›è¡Œå½’çº¦ï¼›ç„¶åå®Œå…¨ä¸ç”¨åƒLL(1)é‚£æ ·å¾€å‰çœ‹å“ªæ€•1ä¸ªç¬¦å·ã€‚ã€‚é‚£å°±å«å®ƒLR(0)åˆ†ææ³•å§ï¼</p>
<h3 data-id="heading-3">4. ç›²ç›®çš„LR(0)åˆ†ææ³•</h3>
<h4 data-id="heading-4">4.1 æ‹“å¹¿æ–‡æ³•</h4>
<p>æ¥æ¥æ¥ï¼Œèµ¶ç´§æ‰“é“è¶çƒ­è¯•è¯•åˆ«çš„æ¡ˆä¾‹ã€‚</p>
<p>ä¹ é¢˜2ï¼šåˆ†æä¸²a#åœ¨æ–‡æ³•G[S]ä¸‹çš„è¯­æ³•æ ‘</p>
<pre><code class="hljs language-css" lang="css">Sâ†’<span class="hljs-selector-tag">A</span>|<span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">A</span>â†’S
</code></pre>
<p>é¦–å…ˆï¼Œè¿™æ˜¯ä¸ªä»¥Sä¸ºå¼€å§‹ç¬¦å·çš„æ–‡æ³•ï¼Œé‚£ä¹ˆå°±ä»Sçš„äº§ç”Ÿå¼ä¸ºå§‹ï¼Œå†™å‡ºæ¥ç›¸å…³çš„è¿›åº¦æ¡ã€‚è€Œç”±äºSâ†’Â·Aéœ€è¦è¿›å…¥Aè¿™ä¸ªå­ç¨‹åºï¼Œæ‰€ä»¥è¿˜è¦åŠ ä¸Šä¸€æ¡Aâ†’Â·Sã€‚å•Šç­‰ä¸€ä¸‹ï¼Œæ¥ä¸‹æ¥åˆç”±äºAè°ƒç”¨Sè¿™ä¸ªå­ç¨‹åºã€‚ã€‚è¿˜å†™å—ï¼Ÿç®—äº†å…ˆä¸å†™å§ï¼Œåæ­£å†™äº†è·Ÿä¸Šé¢ä¸¤æ¡ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>ç„¶åï¼Œå¯¹çŠ¶æ€0ä¸­çš„æ¯ä¸ªè¿›åº¦æ¡æŒ¨ä¸ªæ–½åŠ ä¸åŒçš„æ¿€åŠ±ï¼Œç”Ÿæˆæ–°çš„å­çŠ¶æ€ï¼Œå¾—åˆ°çŠ¶æ€1ã€2ã€3ã€‚</p>
<pre><code class="hljs language-css" lang="css">çŠ¶æ€<span class="hljs-number">0</span>ï¼š Sâ†’Â·<span class="hljs-selector-tag">A</span> Sâ†’Â·<span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">A</span>â†’Â·S 
çŠ¶æ€<span class="hljs-number">1</span>ï¼š Sâ†’<span class="hljs-selector-tag">A</span>Â· 
çŠ¶æ€<span class="hljs-number">2</span>ï¼š Sâ†’<span class="hljs-selector-tag">a</span>Â· 
çŠ¶æ€<span class="hljs-number">3</span>ï¼š <span class="hljs-selector-tag">A</span>â†’SÂ·
</code></pre>
<p>ä»çŠ¶æ€Aå¼€å§‹ï¼Œè¯»å…¥ä¸€ä¸ªç¬¦å·aï¼Œè·³è½¬åˆ°çŠ¶æ€Cï¼›æ—¢ç„¶Cçš„è¿›åº¦æ¡å·²ç»æ»¡äº†ï¼Œé‚£å°±ç›´æ¥å½’çº¦æˆSäº†å‘—ã€‚ã€‚ç­‰ä¸€ä¸‹ï¼Œé‚£æˆ‘ç°åœ¨åº”è¯¥åœ¨ã€‚ã€‚çŠ¶æ€0ï¼Œè·å¾—äº†Sã€‚ã€‚æ¥ä¸‹æ¥æˆ‘æ˜¯è¯¥è·³åˆ°çŠ¶æ€3ï¼Œè¿˜æ˜¯ç›´æ¥ç»“æŸï¼Ÿï¼Ÿå‡å¦‚è·³åˆ°çŠ¶æ€3ï¼Œå°±åˆä¼šç»å†å½’çº¦ï¼ŒçŠ¶æ€0é‡åˆ°Aã€‚ã€‚è¿™ä¸å¾ªç¯äº†å—ï¼Ÿï¼Ÿå•¥æ—¶å€™æ˜¯ä¸ªå¤´ï¼Ÿ</p>
<p>å“ï¼Œæ—¢ç„¶aåé¢éƒ½è·Ÿç€å¥å­ç»“æŸç¬¦#ï¼Œé‚£å°±åº”è¯¥ç›´æ¥ç»“æŸæ‰å¯¹ã€‚</p>
<p>ä¼°è®¡è¿™æ–‡æ³•å­˜åœ¨è‡ªç¯çš„è¿˜ä¸æ˜¯ä¸ªä¾‹ï¼Œå¾—æƒ³ä¸ªé€šç”¨æ–¹æ³•æ¥å¤„ç†ã€‚</p>
<p>è¦ä¸è¿™æ ·å§ï¼Œæ¯æ¬¡åˆ†æå‰ï¼Œä¸ºæ‰€æœ‰æ–‡æ³•åŠ ä¸Šä¸€å¥ï¼šS'â†’Â·S#ä½œä¸ºåˆå§‹è¿›åº¦æ¡ã€‚è¿™æ ·ä¸€æ—¦å½’çº¦å‡ºäº†Sï¼ŒçŠ¶æ€å°±ä¼šè·³è½¬æˆS'â†’SÂ·#ã€‚æ¥ä¸‹æ¥å¦‚æœçœ‹åˆ°è¾“å…¥ä¸²å·²ç»ç»“æŸï¼Œé‚£å°±è¡¨ç¤ºç®—æ³•ç»“æŸã€‚</p>
<p>è¿™ä¹ˆä¿®æ”¹ä¹‹åï¼Œå¼€å§‹ç¬¦å·Sâ€™åªå‡ºç°ä¸€æ¬¡ï¼Œè¿™æ ·å°±é¿å…å¾ªç¯å•¦ã€‚</p>
<p>ä¿®æ”¹ä¹‹åçš„æ–‡æ³•æ¯”åŸæ¥æ‹“å±•å¢å¹¿äº†ä¸€ä¸ªäº§ç”Ÿå¼ï¼Œå¹²è„†å°±å«ä»–æ‹“å¹¿æ–‡æ³•å§ï¼</p>
<h4 data-id="heading-5">4.2 LR(0)çš„å®Œæ•´è¿è¡Œæ¶æ„æ„å»º</h4>
<p>ä»åˆå§‹æ–‡æ³•G[S]å¼€å§‹ï¼Œå…ˆå¯¹å…¶è¿›è¡Œæ‹“å¹¿ï¼Œå¢åŠ æ–°äº§ç”Ÿå¼ï¼Œæ–‡æ³•å˜æˆG[S']ã€‚</p>
<p>ç„¶åé€šè¿‡å¯¹åˆå§‹äº§ç”Ÿå¼S'â†’Â·S#å¼€å§‹å¤„ç†ï¼š</p>
<ul>
<li>
<p>å¦‚æœç‚¹åœ¨éç»ˆç»“ç¬¦(å‡è®¾ä¸ºA)æ—è¾¹ï¼Œå°±æŠŠå­ç¨‹åºAçš„åˆå§‹è¿›åº¦æ¡åŠ å…¥åˆ°è¿™ä¸ªçŠ¶æ€ä¸­ï¼›</p>
</li>
<li>
<p>å¦‚æœç‚¹åœ¨ç»ˆç»“ç¬¦æ—è¾¹ï¼Œé‚£å°±æ˜¯åœ¨ç­‰å¾…å‘ç°ç¬¦å·aï¼›</p>
</li>
</ul>
<p>åœ¨ä¸Šè¿°æ“ä½œæ— æ³•åˆ›é€ æ–°äº§ç”Ÿå¼ä¹‹åï¼Œå°±å¯¹è¿™ä¸ªçŠ¶æ€ä¸­æ–½åŠ å¯ä»¥å¤„ç†çš„ç¬¦å·ä½œä¸ºæ¿€åŠ±ï¼Œä»è€Œå¾—åˆ°æ–°çš„çŠ¶æ€è¿›åº¦æ¡ï¼›åŸçŠ¶æ€ä¸­ä¸èƒ½å¤„ç†è¿™äº›æ¿€åŠ±çš„ï¼Œåœ¨æ–°çŠ¶æ€ä¸­æ¶ˆäº¡ã€‚</p>
<p>ç”±äºæ¯ä¸ªçŠ¶æ€éƒ½åŒ…å«äº†å¤šä¸ªè¿›åº¦æ¡ï¼Œå°±å«ä»–ä»¬åšè¿›åº¦æ¡é›†åˆï¼›è€Œé€šè¿‡è¿™æ ·ä¸æ–­æ–½åŠ æ¿€åŠ±ï¼Œç”Ÿæˆçš„éƒ½æ˜¯å®ƒçš„å…„å¼Ÿå§å¦¹ï¼Œæ‰€æœ‰çš„çŠ¶æ€æ„æˆçš„é›†åˆå°±å«ä»–ä»¬è¿›åº¦æ¡é›†åˆå¤§å®¶æ—å§ï¼</p>
<p>æœ‰äº†çŠ¶æ€ä¹‹é—´çš„è·³è½¬å…³ç³»ï¼Œä¸ºäº†æ–¹ä¾¿æŸ¥è¡¨ï¼Œè‚¯å®šè¦å¼„ä¸€ä¸ªç±»ä¼¼çŠ¶æ€è½¬ç§»è¡¨é‚£æ ·çš„ä¸œè¥¿å‡ºæ¥å•¦ã€‚ç®—äº†ï¼Œä¸ºäº†åšåŒºåˆ†ï¼Œè¿˜æ˜¯æŠŠè¿™ä¸ªè¡¨å«åšLR(0)åˆ†æè¡¨å§ã€‚</p>
<p>é¦–å…ˆæŠŠçŠ¶æ€å†™åˆ°ç¬¬ä¸€åˆ—ä¸Šï¼ŒæŠŠå¯¹åº”çš„ç»ˆç»“ç¬¦ã€ç»ˆç»“ç¬¦å’Œ#å†™åˆ°ç¬¬ä¸€è¡Œå»ã€‚æ¥ä¸‹æ¥ï¼Œå¦‚æœçŠ¶æ€Aé‡åˆ°ç¬¦å·aå®ç°äº†æ­£å¸¸çš„çŠ¶æ€è·³è½¬ï¼Œå°±åœ¨å¯¹åº”çš„æ ¼å­ä¸­ç›´æ¥å¡«å†™å¯¹åº”çš„æ•°å­—ï¼›å¦‚æœé‚£ä¸ªçŠ¶æ€å¯¹åº”çš„æ˜¯å½’çº¦æ“ä½œï¼Œé‚£å°±ç›´æ¥ä¸ºæ•´è¡Œéƒ½è¦†ç›–åŒä¸€ä¸ªæ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°çš„é¦–å­—æ¯æ˜¯å½’çº¦çš„é¦–å­—æ¯rï¼Œå…¶åè·Ÿç€å¯¹åº”äº§ç”Ÿå¼çš„åºå·ï¼Œè¿™æ ·å°±å¯ä»¥çŸ¥é“æ˜¯ç”¨ç¬¬å‡ æ¡å¼å­å½’çº¦ã€‚æœ€åï¼Œå¯¹äºS'-&gt;SÂ·#è¿™ä¸€æ¡ï¼Œåœ¨#ä¸‹é¢å¯¹åº”çš„æ ¼å­é‡Œå¡«ä¸Šacc(ept)ï¼Œè¡¨ç¤ºè¯­æ³•åˆ†æç»“æŸï¼Œå¥å­è¢«æ¥å—ã€‚</p>
<p>è¿è¡Œçš„æ—¶å€™æœ€é‡è¦çš„ä¸¤ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯å½“å‰çŠ¶æ€ä»å“ªä¸ªçŠ¶æ€æ¥çš„å†å²è®°å½•ï¼Œä¸€ä¸ªæ˜¯æˆ‘æ‰‹ä¸Šæœ‰ä»€ä¹ˆç¬¦å·ã€‚</p>
<p>é‚£å¹²è„†ï¼Œè¿™äº›ä¸œè¥¿å…¨éƒ½ç”¨æ ˆæ¥è®°å½•å§ï¼Emmï¼Œå¥½åƒæœ‰ç‚¹é—®é¢˜ã€‚çŠ¶æ€æˆ‘å¯ä»¥ç”¨æ•´å½¢æ¥å­˜ï¼Œç¬¦å·æ˜¯å­—ç¬¦å‹å˜é‡ï¼Œä¸¤è¾¹æåˆ°åŒä¸€ä¸ªæ•°æ®ç»“æ„å»å¤ªçƒ¦äº†ï¼Œå¹²è„†æ‹†æˆä¸¤ä¸ªä¸åŒæ•°æ®ç±»å‹çš„æ ˆå¥½äº†ã€‚</p>
<p>ç­‰ä¸€ä¸‹ï¼Œç³»ç»Ÿä¸€å¼€å§‹è¦å¤„äºåˆæ€0ï¼Œè¿™ä¸ªæ—¶å€™æ²¡æœ‰è¾“å…¥ç¬¦å·ï¼Œä¸¤è¾¹å¯¹ä¸ä¸Šäº†å‘€ï¼ç®—äº†ï¼Œåæ­£ä¹Ÿæ˜¯å ä½ç¬¦ï¼ŒåŠ ä¸€ä¸ª#åœ¨çŠ¶æ€0å¯¹åº”çš„ç¬¦å·æ ˆé‚£é‡Œã€‚è¿™æ ·ç»“æŸçš„æ—¶å€™ç¬¦å·æ ˆä¸Šæ­£å¥½æ˜¯#Sï¼ŒåŠ ä¸Šè¿˜æ²¡æœ‰è¾“å…¥çš„#ï¼Œæ­£å¥½æ„æˆäº†#S#ï¼Œå®Œç¾å¯¹ç§°ã€‚</p>
<p>å¥½å¥½å¥½ï¼Œå¯ä»¥è·Ÿè€æ¿æ±‡æŠ¥äº†ï¼</p>
<h4 data-id="heading-6">4.3 å‘½åæƒï¼šå½’è€æ¿æ‰€æœ‰</h4>
<p>è€æ¿å¬å®Œäº†æ±‡æŠ¥ï¼Œç‚¹ç‚¹å¤´è¡¨ç¤ºè®¤å¯ã€‚</p>
<p>ç„¶è€Œå¸ˆå‚…æ•é”æ³¨æ„åˆ°ï¼Œè€æ¿æ¯æ¯å¬åˆ°è¿›åº¦æ¡ã€è¿›åº¦æ¡é›†åˆã€è¿›åº¦æ¡é›†åˆå¤§å®¶æ—çš„æ—¶å€™ï¼Œéƒ½ä¼šä¸è‡ªç»åœ°çš±çœ‰ã€‚äºæ˜¯ä»–è¯•æ¢åˆ°ï¼Œâ€œè€æ¿ï¼Œæˆ‘æ„Ÿè§‰è¿›åº¦æ¡è¿™å‡ ä¸ªè¯çš„èµ·åå¥½åƒä¸å¤Ÿé«˜å¤§ä¸Šï¼Œè¦ä¸æ‚¨ç”¨æ‚¨è·¨å­¦ç§‘æ€ç»´ç»™å°å¹´è½»æ‰“ä¸ªæ ·ï¼Ÿâ€</p>
<p>è€æ¿ä¸å¥½æ„æ€ç¬‘ç¬‘â€œå€’ä¹Ÿæ²¡å•¥å¤ªå¥½çš„æƒ³æ³•ï¼Œæˆ‘å°±è§‰ç€è¿™è¿›åº¦æ¡è¿™åå­—å¤ªé•¿äº†ã€‚æˆ‘çœ‹å®ƒæœ¬èº«ä¹Ÿå°±åƒæ–‡ç« é‡Œé¢é‚£äº›itemä¸€æ ·ä¸€ç›´å¾€ååˆ—ï¼Œå¹²è„†å°±å«é¡¹å§ï¼Ÿâ€</p>
<p>å¥½å¥½çš„è¿›åº¦æ¡è¢«æ”¹å£å«ä¸ªä¸çŸ¥æ‰€è°“çš„é¡¹ï¼Œè¡¨æƒ…ä¸€ä¸ªä¸å°å¿ƒæ²¡æ§åˆ¶ä½ã€‚è¿˜å¥½å¸ˆå‚…çœ¼ç–¾æ‰‹å¿«ï¼Œèµ¶ç´§ç¢°äº†ç¢°æé†’äº†ä¸‹ï¼Œæ‰æ¢å¤äº†è¡¨æƒ…ç®¡ç†ã€‚</p>
<p>â€œç„¶åæ˜¯å¤§å®¶æ—è¿™ä¸ªè¯ç¡®å®å¤ªï¼Œæ¥åœ°æ°”äº†ã€‚æˆ‘å­¦å¤åˆ†æçš„æ—¶å€™è®°å¾—é‡Œé¢æœ‰ä¸ªå«è§„èŒƒæ—çš„æ¦‚å¿µã€‚æˆ‘çœ‹ä½ è¿™ä¸ªæ‰€è°“å®¶æ—ä¹Ÿæ˜¯æŒ‰ç…§ä¸€å®šè§„èŒƒæ„å»ºçš„ï¼Œå¹²è„†å°±å«é¡¹ç›®é›†è§„èŒƒæ—æ€ä¹ˆæ ·ï¼Ÿâ€</p>
<p>è¿™ä¸€ç‚¹å€’æ˜¯æ²¡æ„è§ã€‚å“ï¼Œåæ­£å‘½åå•¥çš„ä½ çˆ±å«å•¥å«å•¥å§ã€‚</p>
<p>â€œè¿™æ ·ï¼Œä½ äº¤ç»™æµ‹è¯•éƒ¨é—¨æµ‹ä¸€ä¸‹ï¼Œçœ‹çœ‹è¿™ç©æ„å„¿çš„é€šç”¨æ€§å¦‚ä½•ã€‚å¥½å¥½è¿‡ä¸ªå‘¨æœ«å§ï¼â€</p>
<h4 data-id="heading-7">4.4 é¡¹çš„åˆ†ç±»ä¸å†²çª</h4>
<p>å‘¨ä¸€ï¼Œåˆšåˆ°åŠå…¬å®¤ï¼Œå‘ç°æµ‹è¯•éƒ¨é—¨çš„æŠ¥å‘Šå·²ç»å‘ˆä¸Šæ¥äº†ã€‚</p>
<p>LR(0)çš„æµ‹è¯•æŠ¥å‘Š</p>
<p>æœ¬æŠ¥å‘Šä½¿ç”¨æäº¤çš„LR(0)æ–‡æ³•å¯¹å®šä¹‰å˜é‡çš„å·²æ‹“å¹¿æ–‡æ³•è¿›è¡Œäº†åˆ†æï¼š</p>
<p>(ä¹ é¢˜3)</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-number">0</span><span class="hljs-selector-class">.S</span>â€²â†’S 
<span class="hljs-number">1</span><span class="hljs-selector-class">.S</span>â†’<span class="hljs-selector-tag">tD</span> 
<span class="hljs-number">2</span><span class="hljs-selector-class">.D</span>â†’D,<span class="hljs-selector-tag">i</span> 
<span class="hljs-number">3</span><span class="hljs-selector-class">.D</span>â†’<span class="hljs-selector-tag">i</span>
</code></pre>
<p>åœ¨æ„å»ºé¡¹ç›®é›†è§„èŒƒæ—çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°å…¶ä¸­æœ‰ä¸€ä¸ªçŠ¶æ€ï¼ŒåŒæ—¶å­˜åœ¨ä¸¤ä¸ªå†²çªçš„æ“ä½œï¼š</p>
<pre><code class="hljs language-css" lang="css">Sâ†’rDÂ· Dâ†’DÂ·,<span class="hljs-selector-tag">i</span>
</code></pre>
<p>å¯ä»¥çœ‹å‡ºï¼Œè¯¥çŠ¶æ€æ—¢å¯ä»¥ç›´æ¥è¿›è¡Œå½’çº¦ï¼Œä¹Ÿå¯ä»¥ç­‰å¾…ä¸‹ä¸€ä¸ªé€—å·çš„ç§»å…¥ã€‚</p>
<p>å¦‚æœç›´æ¥å½’çº¦ï¼Œåˆ™æ°¸è¿œæ— æ³•è§£æå½¢å¦‚int a,bçš„ä¸²ï¼›</p>
<p>å¦‚æœå¿½ç•¥å½’çº¦ï¼Œç›´æ¥ç­‰å¾…ç§»å…¥ï¼Œåˆ™å…¶ä»–çŠ¶æ€éƒ½æ— æ³•å½’çº¦å‡ºSï¼Œå¯¼è‡´ç®—æ³•æ— æ³•ç»“æŸã€‚</p>
<p>é‰´äºLR(0)åˆ†ææ–¹æ³•æœªèƒ½è§£æå¸¸è§çš„å˜é‡å®šä¹‰è¯­æ³•ï¼Œå…¶åœ¨ä½¿ç”¨ä¸Šå­˜åœ¨è¾ƒå¤§é™åˆ¶ã€‚</p>
<p>æµ‹è¯•ç»“è®ºï¼šä¸é€šè¿‡ã€‚å¦‚éœ€è¦è¯¦ç»†æµ‹è¯•æ•°æ®å¯è”ç³»å·¥ä½œå·**********ã€‚</p>
<p>çœ‹å®ŒæŠ¥å‘Šï¼Œå¿ƒå‡‰äº†åŠæˆªï¼Œè„‘å­é‡Œåªæœ‰ä¸€ä¸ªæƒ³æ³•ï¼šä»€ä¹ˆé¬¼ï¼Œæ¨¡ç‰ˆä¸Šçš„æ˜Ÿæ˜Ÿéƒ½ä¸åˆ å¹²å‡€å°±äº¤å‡ºæ¥äº†ä¹ˆï¼Œå°±è¿™ç»†è‡´ç¨‹åº¦è¿˜å¥½æ„æ€è¯´LR(0)ä¸å¥½ç”¨ä¹ˆ ã€‚</p>
<p>å”‰ç®—äº†ï¼Œè¿™æ¬¡ç¡®å®æ˜¯æˆ‘è¿™è¾¹æ²¡æµ‹å¥½å°±äº¤å¯¼è‡´çš„ã€‚çŸ¥è€»è€Œåå‹‡ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½ä¸¾ä¸€åä¸‰æŠŠå…¶ä»–ç±»ä¼¼é—®é¢˜ä¸€èµ·æ‰¾å‡ºæ¥ã€‚ã€‚</p>
<p>ç°åœ¨çš„é—®é¢˜åº”è¯¥æ˜¯æˆ‘ä¹‹å‰åªè€ƒè™‘äº†çŠ¶æ€ä¸­åªä¼šæœ‰ä¸€ä¸ªè¿›åº¦æ¡æ»¡äº†å¯ä»¥å½’çº¦ï¼Œä½†å…¶å®è¿˜æœ‰å¯èƒ½å‡ºç°å…¶ä»–å¯èƒ½çš„æ“ä½œï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªç»ˆç»“ç¬¦ï¼Œéç»ˆç»“ç¬¦ã€‚ã€‚æ€ä¹ˆæ„Ÿè§‰æƒ…å†µå¾ˆæ‚çš„æ ·å­ã€‚ã€‚</p>
<p>ç®—äº†ï¼Œè¦ä¸æˆ‘å…ˆæ ¹æ®åœ†ç‚¹çš„ä½ç½®å’Œåç»­ç¬¦å·å¯¹é¡¹åˆ†ç±»çœ‹çœ‹ï¼š</p>
<p>1.ç§»è¿›é¡¹ç›®: å½¢å¦‚Aâ†’Î±Â·aÎ²,aâˆˆV_Tçš„é¡¹ã€‚</p>
<p>2.å¾…çº¦é¡¹ç›®: å½¢å¦‚Aâ†’Î±Â·BÎ²,BâˆˆV_Nçš„é¡¹ç›®,è¡¨æ˜è¦ç­‰å¾…åç»­ä¸²å½’çº¦æˆBä¹‹åæ‰èƒ½ç»§ç»­åˆ†æã€‚</p>
<p>3.å½’çº¦é¡¹ç›®: å½¢å¦‚Aâ†’Î±Â·çš„é¡¹ç›®ã€‚å®ƒè¡¨æ˜ä¸€ä¸ªäº§ç”Ÿå¼å³éƒ¨å³å¥æŸ„Î±å·²å½¢æˆ,å¯å½’çº¦æˆAã€‚</p>
<p>4.æ¥å—é¡¹ç›®: å½¢å¦‚Sâ€™â†’Î± Â· #çš„é¡¹ç›®,è¡¨æ˜è¯­æ³•åˆ†æå®Œæˆã€‚</p>
<p>å“¦å“¦ï¼Œä¸€å…±æ‰å››ç±»å˜›ï¼Œå¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¤æ‚ã€‚</p>
<p>é‚£å†è¯•ç€æ€»ç»“ä¸€æ¬¡ï¼š</p>
<p>LR(0)åªèƒ½å¤„ç†é¡¹ç›®é›†ä¸­å•å•åªæœ‰ä¸€ä¸ªå½’çº¦çš„æƒ…å†µã€‚</p>
<p>å‡å¦‚é™¤äº†å½’çº¦é¡¹ç›®ä»¥å¤–è¿˜æœ‰ç§»è¿›é¡¹ç›®ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ç§»è¿›-å½’çº¦å†²çªï¼›</p>
<p>å‡å¦‚é¡¹ç›®é›†ä¸­æœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šå½’çº¦é¡¹ç›®ï¼Œé‚£ä¹ˆå¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œè¿™äº›é¡¹ç›®çš„å·¦éƒ¨è‚¯å®šä¸ä¸€æ ·ï¼Œé‚£å¯¹äºè¦ç”¨é‚£æ¡å¼å­è¿›è¡Œå½’çº¦å°±åˆæˆé—®é¢˜äº†ã€‚å¯¹äºè¿™ç±»é—®é¢˜ï¼Œç§°ä¸ºå½’çº¦-å½’çº¦å†²çªå§ã€‚</p>
<p>å‡å¦‚é™¤äº†å½’çº¦é¡¹ç›®å¤–è¿˜æœ‰å¾…çº¦é¡¹ç›®ï¼Œé‚£è¿™ä¸ªå¾…çº¦é¡¹ç›®é¦–å…ˆä¼šè¢«å½“ä½œå­ç¨‹åºå¤„ç†ï¼Œç”Ÿæˆæ–°çš„ç§»è¿›é¡¹ç›®æˆ–è€…å¾…çº¦é¡¹ç›®ï¼›å¯¹å…¶ä¸­çš„å¾…çº¦é¡¹ç›®åˆä¼šé‡å¤å¾ªç¯ï¼Œç›´åˆ°å…¨éƒ¨ç”Ÿæˆäº†æ–°çš„ç§»è¿›é¡¹ç›®æˆ–ç±»ä¼¼A-&gt; Â·è¿™æ ·çš„ç©ºä¸²äº§ç”Ÿå¼å¯¹åº”çš„å½’çº¦é¡¹ç›®ï¼Œé‚£å°±åˆå¯¹åº”å›ä¸Šé¢ä¸¤ç±»å†²çªã€‚å› æ­¤ï¼Œä¸å­˜åœ¨å½’çº¦å¾…çº¦å†²çªã€‚</p>
<p>å‡å¦‚é¡¹ç›®é›†ä¸­é™¤äº†å½’çº¦é¡¹ç›®å¤–è¿˜æœ‰æ¥å—é¡¹ç›®ï¼Œè¿™ç§æƒ…å†µå˜›ï¼Œå½“ç„¶æ˜¯ç»“æŸä¼˜å…ˆï¼Œä¸å­˜åœ¨å†²çªï¼</p>
<p>ç­‰ä¸€ä¸‹ï¼Œä¼šä¸ä¼šæœ‰ç§»è¿›-ç§»è¿›å†²çªï¼Ÿï¼Ÿ</p>
<p>åº”è¯¥ä¸ä¼šå§ã€‚ã€‚ï¼Ÿç§»è¿›ç§»è¿›å†²çªä¸å°±æ˜¯è¯´æœ‰å¤šæ¡ç§»è¿›é¡¹ç›®ä¹ˆã€‚è¿™äº›é¡¹ç›®åœ¨é‡åˆ°å¤„ç†ä¸åŒçš„ç¬¦å·è‡ªå·±å°±ä¼šæŒ‚æ‰äº†ï¼Œè¿˜å†²çªä¸ªå•¥å•Šã€‚</p>
<p>å†æƒ³æ·±ä¸€å±‚ï¼Œè¿™äº›å†²çªçš„æ ¸å¿ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æˆ‘å€’æ˜¯çŸ¥é“æ”¿æ²»è€å¸ˆæ•™è¿‡ç°å®ä¸­å†²çªçš„æ ¸å¿ƒæ— éå°±æ˜¯èµ„æºçš„äº‰å¤ºâ•®(ï¿£â–½ï¿£)â•­ã€‚æ€»ä¸èƒ½è¿™å¥è¯ä¹Ÿèƒ½ç”¨åœ¨è¿™é‡Œå§ã€‚ã€‚å“ï¼Ÿè¿˜çœŸåˆ«è¯´ï¼Œå¦‚æœæŠŠå½’çº¦å¯¹åº”çš„åŠ¨ä½œåœ¨äºæŠŠç¬¦å·æ ˆçš„å…ƒç´ å‡ºæ ˆï¼Œå¦‚æœæŠŠè¿™äº›ç¬¦å·æ‹¼è£…æˆç»ˆç»“ç¬¦ï¼Œå°±å†ä¹Ÿå›ä¸å»äº†ã€‚æ— è®ºåé¢å†æ¥äº›ä»€ä¹ˆç¬¦å·ï¼Œä¹Ÿæ²¡æ³•æ‹¼è£…å‡ºæ­£ç¡®çš„éç»ˆç»“ç¬¦ï¼Œè¿™å°±è§£é‡Šäº†ä¸¤ç§å†²çªã€‚åŒæ—¶ï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥è§£é‡Šä¸ºå•¥ä¸å­˜åœ¨ç§»è¿›ç§»è¿›å†²çªäº†ï¼šé‚£äº›ç¬¦å·éƒ½åœ¨æ ˆä¸Šï¼Œä¸€åˆ‡éƒ½å¯é€†ï¼Œæ‰€ä»¥å°±æ²¡æœ‰å†²çªå•¦ï¼</p>
<p>æ€»ç»“èµ·æ¥å°±æ˜¯ä¸€å¥è¯ï¼šå½’çº¦å¯¼è‡´äº†æ ˆä¸Šé¢çš„ç¬¦å·å›ä¸å»ï¼Œæ‰€ä»¥ä¸€æ—¦åœ¨è¿™ä¸ªçŠ¶æ€ä¸­æ— æ³•åŒºåˆ†è‡ªå·±åˆ°åº•åº”è¯¥æ˜¯è¦ç§»å…¥ï¼Œè¿˜æ˜¯é€‰æ‹©å“ªäº›ç‰¹å®šçš„ç¬¦å·è¿›è¡Œå½’çº¦ï¼Œå°±ä¼šå‡ºç°ç›¸åº”çš„å†²çªã€‚</p>
<h3 data-id="heading-8">5. ç²—ç²’åº¦ä¸ç»†ç²’åº¦ï¼šSimple LR(1) ä¸ LR(1)ï¼Œ</h3>
<h4 data-id="heading-9">5.1 LR(0)çš„å‡çº§æ€è·¯</h4>
<p>æ—¢ç„¶ç°åœ¨çŸ¥é“äº†ä¸€åˆ‡çš„çŠ¹è±«éƒ½æ¥è‡ªäºä¿¡æ¯ä¸è¶³ï¼Œé‚£ä¹ˆæ”¹è¿›çš„æ–¹å‘å½“ç„¶æ˜¯è®©å®ƒè·å¾—æ›´å¤šä¿¡æ¯å•¦ã€‚è‡³äºä»€ä¹ˆä¿¡æ¯ï¼Œï¼ˆçœ‹çœ‹è¡¨ï¼‰åƒå®Œåˆé¥­å†æƒ³ã€‚</p>
<p>æ‚ å“‰æ‚ å“‰æ¥åˆ°å›­åŒºé—¨å£ï¼Œæ°å·§ç›®ç¹äº†ä¸€èµ·äº‰æ‰§ï¼šåªè§ä¸€è¾†ä¸°ç”°å‡¯ç¾ç‘åœåœ¨å‡ºåœºåŒºè¿™é‡Œï¼Œä¼°è®¡æ˜¯å¤–æ¥è½¦æ²¡ç™»è®°ï¼Œè¦ç­‰å¾…ä¿å®‰æ‰‹åŠ¨æŠ¬æ†ã€‚æ²¡æƒ³åˆ°é‚£ä¿å®‰çš„è„¸è‰²é»‘å¾—å“äººï¼Œè·Ÿé‚£è½¦å­å¼äº†å‡ å£°ï¼Œè¯´çš„â€œä¸è¦æŒ‰å–‡å­ï¼Œæˆ‘ä»¬ä¼šç»™ä½ å¼€çš„ã€‚â€å¸æœºä¼¼ä¹æ˜¯ä¸€è„¸æ‡µï¼Œå›å¤è¯´â€œæˆ‘ä¹Ÿå¦¹æŒ‰å–‡å­å‘€ï¼Ÿâ€ä¿å®‰æ²¡å¥½æ°”è¯´â€œæ˜¨å¤©æŒ‰å–‡å­çš„ä¸æ˜¯ä½ å—ï¼Ÿä¸°ç”°é“¶è‰²å‡¯ç¾ç‘ï¼Œæˆ‘éƒ½è®¤åˆ°ä½ äº†ã€‚â€å¸æœºä¸€è„¸æ— å¥ˆï¼šâ€œæˆ‘ä»Šå¤©ç¬¬ä¸€å¤©æ¥å•Šï¼Œä½ è¯´çš„ä»–çš„è½¦åº”è¯¥ä¸ä¼šä¹Ÿæ˜¯ç²¤Eçš„å§ï¼Ÿâ€è²Œä¼¼è¿™ä¸ªæ—¶å€™ä¿å®‰æ‰ç•™æ„åˆ°è½¦ç‰Œè¿™å›äº‹ï¼Œçœ‹äº†ä¸€çœ¼ï¼Œæ²¡æ­è¯ï¼Œè½¦ä¹Ÿå°±å¼€èµ°äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b42c820ba7049d2ad3dc1ba6530cb52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pCe56yR5YO15bC45oCd6ICD5pe26Ze0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771550852&amp;x-signature=1b6YClU0Tj6tG8sPnUS8NjeaqM0%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c967414f318e4cb18e2f5ac3a462e923~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pCe56yR5YO15bC45oCd6ICD5pe26Ze0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771550852&amp;x-signature=b6%2F7gZtBEAHwn74iwG8lUoxMB%2BU%3D" alt="" loading="lazy"/></p>
<p>åƒé¥­çš„æ—¶å€™è·Ÿå¸ˆå‚…èŠèµ·è¿™èŒ¬ï¼Œå¸ˆå‚…æ„Ÿæ…¨é“ï¼šâ€œè¯´å¥æ”¿æ²»ä¸æ­£ç¡®çš„è¯ï¼Œæœ‰æ—¶å€™çœŸä¸ç”±å¾—æ„Ÿæ…¨ï¼ŒæŸäº›äººçš„èŒä½çœŸçš„å¯¹å¾—èµ·ä»–çš„æ™ºå•†ã€‚ä½ è¯´ä»–è®°ä¸ä½è½¦ç‰Œä¹Ÿå°±ç®—äº†ï¼Œå±…ç„¶è¿ç²¤Eç²¤Séƒ½å®Œå…¨ä¸åˆ†ï¼Œè¿˜é‚£ä¹ˆæƒ…ç»ªåŒ–ï¼Œéš¾æ€ªå£ç¢‘ä¸€ç›´éƒ½é‚£ä¹ˆå·®ã€‚å‡å¦‚ä»–èƒ½ç¨ç¨èƒ½èªæ˜ä¸€ç‚¹ï¼Œåœ¨æ‘†è‡­è„¸ä¹‹å‰ç¨ç¨çœ‹ä¸€ä¸‹è¿™ä¸ªè½¦çš„æ¥æºï¼Œä¼°è®¡ä¹Ÿæ²¡è¿™ä¹ˆå°´å°¬ã€‚â€</p>
<p>è¯´è€…æ— å¿ƒå¬ç€æœ‰æ„ï¼šæ—¢ç„¶ç°åœ¨LR(0)éœ€è¦æ›´å¤šçš„ä¿¡æ¯ï¼Œå¾€å¾€å°±æ˜¯ä¸çŸ¥é“å½’çº¦çš„æ—¶æœºå¯¹ä¸å¯¹ï¼Œå°±åƒæ˜¯é‚£ä¸ªä¿å®‰ï¼Œçœ‰æ¯›èƒ¡å­ä¸€æŠŠæŠ“ï¼Œçœ‹åˆ°é“¶è‰²ä¸°ç”°å‡¯ç¾ç‘å°±æ‘†è‡­è„¸ï¼Œé‚£è‚¯å®šä¸è¡Œã€‚æ—¢ç„¶ç°åœ¨è¦å½’çº¦æˆç‰¹å®šéç»ˆç»“ç¬¦,æ¯”å¦‚Aï¼Œé‚£å¦‚æœå‘ç°åé¢çš„ç¬¦å·aç¡®å®å¥½åœ¨Follow(A)ä¹‹ä¸­ï¼Œåˆä¸ä¼šæœ‰å…¶ä»–ç§»è¿›ç¬¦å·ç­‰å¾…è¿™ä¸ªç¬¦å·aï¼Œé‚£å°±å¯ä»¥ç›´æ¥è¿›è¡Œå½’çº¦è€Œæ— éœ€çº ç»“å•¦ï¼›ç›¸åï¼Œå¦‚æœè¿™ä¸ªç¬¦å·aè¢«å…¶ä»–ç§»è¿›é¡¹ç›®è™è§†çœˆçœˆï¼Œä½†åˆä¸åœ¨Follow(A)ä¹‹ä¸­ï¼Œé‚£ä¹Ÿå¯ä»¥é©¬ä¸Šç¡®å®šå°±æ˜¯è¦å…ˆå¤„ç†ç§»è¿›é¡¹ç›®ã€‚è¿™æ ·å†²çªå°±è§£å†³å•¦ã€‚</p>
<p>å¸ˆå‚…å¬å®Œï¼Œç‚¹è¯„é“ï¼šâ€œæˆ‘æ˜¯çœ‹é‚£ä¿å®‰å¯èƒ½è®°å¿†åŠ›æœ‰é™æ‰è®©ä»–åªè®°ä½å‰ä¸¤ä½ï¼Œå‡å¦‚ä»–è®°å¿†åŠ›å¤Ÿä½•ä¸ç›´æ¥è®°è½¦ç‰Œï¼Ÿé‚£å¤šç²¾å‡†ã€‚</p>
<p>å›åˆ°ä½ çš„ç®—æ³•ä¸Šï¼Œç°åœ¨åˆæ²¡æœ‰æˆæœ¬é™åˆ¶ï¼Œä½ ä½•ä¸è®©è¿™ç®—æ³•ä¸€æ­¥åˆ°ä½ï¼Ÿ</p>
<p>å‡å¦‚æœ‰S=&gt;*Î±AÎ²_1ï¼ŒS=&gt;*Î±AÎ²_2ï¼Œé‚£ä½ çš„Follow(A)å®é™…ä¸Šå°±å¯¹åº”äºFirst(Î²_1)âˆªFirst(Î²_2)ã€‚å¦‚æœä½ ç›´æ¥ç»™Açš„æ¯ä¸€æ¡äº§ç”Ÿå¼æ±‚å®ƒä¹‹åå‡ºç°çš„Î²_1çš„Firsté›†åˆï¼Œé‚£å°±èƒ½åŒºåˆ†å¾—æ›´ç»†ï¼Œé‡ä¸Šå†²çªçš„æ¦‚ç‡è‚¯å®šè¦æ¯”ä½ Follow(A)è¦ä½ã€‚â€</p>
<p>ï¼ˆæƒ³äº†å¥½ä¸€é˜µï¼‰è¦ä¸ï¼Œæˆ‘è¿˜æ˜¯ä¸¤ä¸ªéƒ½å®ç°ä¸€ä¸‹ï¼Œå¼„ä¸¤ä¸ªä¸åŒç²¾åº¦çš„ç®—æ³•ã€‚è¿™æ ·å¤æ‚çš„æ–‡æ³•ç”¨å¤æ‚çš„ç®—æ³•åˆ†æï¼Œç®€å•çš„å°±ç”¨ç®€å•çš„åº”ä»˜ï¼Œè¿™æ ·æˆæœ¬å•¥çš„ä¹Ÿä¸è‡³äºå¤ªé«˜ã€‚å¸ˆå‚…ä½ è¯´çš„é‚£ç§é«˜ç²¾åº¦ç®—æ³•ï¼Œç”±äºæ€»è¦å¾€å‰çœ‹ä¸€ä¸ªç¬¦å·ï¼Œå¹²è„†å°±ç›´æ¥å«LR(1)ï¼›è€Œæ±‚Followçš„ç‰ˆæœ¬ï¼Œç®—æ˜¯LR(1)çš„ç®€åŒ–ç‰ˆï¼Œå¹²è„†å°±å«SLR(1)ã€‚</p>
<p>å¸ˆå‚…èµèµåœ°ç‚¹ç‚¹å¤´ï¼Œâ€œä½ è¿™è®©æˆ‘æˆ‘æƒ³èµ·é²è¿…çš„ä¸€å¥è¯ï¼šäººçš„æ™ºèƒ½ï¼Œå°±ä½“ç°åœ¨ä¼šæ ¹æ®ä¸åŒæˆæœ¬åˆ›é€ å’Œä½¿ç”¨åˆé€‚çš„å·¥å…·ï¼â€</p>
<p>æˆ‘ä¹Ÿæƒ³èµ·é²è¿…è¯´çš„å¦ä¸€å¥è¯ï¼Œâ€œæˆ‘æ²¡è¯´è¿‡â€ã€‚å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ</p>
<h4 data-id="heading-10">5.2 ç²—ç²’åº¦çš„SLR(1)</h4>
<p>æ€»ç»“ä¸‹æ¥ï¼ŒSLR(1)çš„æ ¸å¿ƒä¹Ÿå°±æ˜¯è¿™ä¹ˆä¸€æ®µè¯ï¼š</p>
<p>å¦‚æœæŸä¸ªé¡¹ç›®é›†I={Xâ†’Î±Â·bÎ², Xâ†’Î±Â·cÎ², Aâ†’Î³Â·, Bâ†’Î´Â·}, å¯¹äºè¾“å…¥ç¬¦å·xæœ‰ï¼š</p>
<ol>
<li>
<p>è‹¥xâˆˆ{b,c},ç§»è¿›ï¼›</p>
</li>
<li>
<p>è‹¥xâˆˆFOLLOW(A),åˆ™ç”¨äº§ç”Ÿå¼Aâ†’Î³è§„çº¦</p>
</li>
<li>
<p>è‹¥xâˆˆFOLLOW(B),åˆ™ç”¨äº§ç”Ÿå¼Bâ†’Î´è§„çº¦</p>
</li>
<li>
<p>è‹¥xä¸åœ¨è¿™ä¸‰ä¸ªé›†åˆä¸­ï¼Œåˆ™å¥å­æœ‰é”™</p>
</li>
</ol>
<p>å¦‚æœ3ä¸ªé›†åˆäº’æœ‰äº¤é›†ï¼Œåˆ™è¯´æ˜è¿™ç§æ€è·¯æ— æ³•å¤„ç†å†²çªï¼Œè¿™ä¸ªæ–‡æ³•å°±ä¸æ˜¯SLR(1)æ–‡æ³•ã€‚</p>
<p>ç›¸æ¯”äºLR(0)ï¼Œåªè¦åœ¨æœ‰å†²çªçš„é›†åˆä¸­ï¼Œå¤šè®¡ç®—ä¸€ä¸‹å½’çº¦é¡¹ç›®ä¸­ç­‰å¾…è¢«å½’çº¦çš„éç»ˆç»“ç¬¦çš„Followé›†åˆï¼Œåªè¦å’Œå…¶ä»–ç§»å…¥é¡¹ç›®å½’çº¦é¡¹ç›®ä¸å†²çªï¼Œé‚£å°±å®Œäº‹äº†ã€‚</p>
<p>ç”±äºSLR(1)æ²¡æœ‰æ”¹å˜æ„å»ºé¡¹ç›®é›†è§„èŒƒæ—çš„æ–¹å¼ï¼Œæ‰€ä»¥åŸæ¥çš„LR(0)é¡¹ç›®é›†è§„èŒƒæ—è¿™ä¸ªåå­—å€’è¿˜å¯ä»¥ç»§ç»­ç”¨ï¼Œå°±æ˜¯é‚£ä¸ªLR(0)åˆ†æè¡¨å¾—æ”¹åå«åšSLR(1)åˆ†æè¡¨äº†ã€‚</p>
<p>æ¯•ç«Ÿï¼ŒåŸæ¥çš„LR(0)åˆ†æè¡¨æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ä¸€æ—¦åˆ°äº†æŸä¸ªéœ€è¦å½’çº¦çš„çŠ¶æ€åï¼Œå°±ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€æ•´è¡Œéƒ½å¡«æ»¡rxã€‚ç°åœ¨ç›¸å½“äºæ›´ç»†åŒ–äº†ï¼Œåªæœ‰Follow(A)ä¸­çš„ç¬¦å·æ‰éœ€è¦å¡«rxï¼Œå…¶æ¬¡å°±æ˜¯æ ¹æ®ç§»è¿›é¡¹ç›®åœ¨å¯¹åº”çš„æ ¼å­ä¸­å¡«å†™è¦è·³è½¬çš„é¡¹ç›®ã€‚</p>
<h4 data-id="heading-11">5.3 ç»†ç²’åº¦çš„LR(1)</h4>
<p>æ¯”SLR(1)åªåœ¨å½’çº¦çš„æ—¶å€™åªè®¡ç®—å…¨å±€æ€§çš„Follow(A)æ›´è¿›ä¸€æ­¥çš„ï¼Œæ˜¯LR(1)éœ€è¦åœ¨æ¯æ¬¡å½’çº¦çš„æ—¶å€™éƒ½å¾—çŸ¥é“æ¥ä¸‹æ¥è·Ÿç€å½“å‰äº§ç”Ÿå¼çš„æ˜¯ä»€ä¹ˆç¬¦å·ï¼Œè€Œè¿™ä¸ªä¿¡æ¯æ˜¯å±€éƒ¨çš„ã€‚</p>
<p>æ¯”å¦‚ï¼Œå¯¹äºS'â†’S#, è°œåº•å°±åœ¨è°œé¢ä¸Šï¼Œåªæœ‰å½“çœ‹åˆ°#ï¼Œæ‰èƒ½è¿›è¡Œæ¥å—ï¼›</p>
<p>å†æ¯”å¦‚ï¼Œå‡å¦‚æœ‰ç¬¬äºŒæ¡äº§ç”Ÿå¼Sâ†’Abï¼Œé‚£ä¹ˆå‡å¦‚è¦å½’çº¦æˆSï¼Œå°±éœ€è¦çœ‹åˆ°ä¸Šä¸€æ¡è¡¨è¾¾å¼ä¸­Såé¢çš„ç¬¦å·ï¼Œä¹Ÿå°±æ˜¯#ï¼›</p>
<p>åˆæ¯”å¦‚ï¼Œå‡å¦‚æœ‰ç¬¬ä¸‰æ¡äº§ç”Ÿå¼Aâ†’aï¼Œé‚£ä¹ˆæ ¹æ®å‰é¢ä¸€æ¡äº§ç”Ÿå¼å¯çŸ¥ï¼Œè¿™æ¡Aèƒ½å½’çº¦çš„æ¡ä»¶å°±æ˜¯çœ‹åˆ°bã€‚</p>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡å½’çº¦æ¡ä»¶åªæœ‰åœ¨å½’çº¦çš„æ—¶å€™æ‰ä¼šçœŸæ­£è¢«ç”¨åˆ°ï¼Œä½†ç”±äºè¦è®¡ç®—çš„ä¿¡æ¯æ˜¯å±€éƒ¨æ€§çš„è€Œä¸æ˜¯åƒFollowé‚£æ ·çš„å…¨å±€æ€§ï¼Œå› æ­¤åªæœ‰åœ¨è®¡ç®—LR(1)é¡¹ç›®é›†è§„èŒƒæ—çš„æ—¶å€™æŠŠå½’çº¦æ‰€éœ€æ¡ä»¶å±‚å±‚ä¼ é€’ï¼Œæ‰èƒ½è®©è¿™äº›ä¿¡æ¯åˆ°è¾¾æœ‰éœ€è¦çš„é¡¹ä¸­ã€‚</p>
<p>å¦å¤–æ¯”è¾ƒå®¹æ˜“å‘ç°çš„æ˜¯ï¼Œå³ä½¿è¿™ä¸ªäº§ç”Ÿå¼å¸¦äº†è¿›åº¦æŒ‡ç¤ºå™¨ï¼Œå®ƒçš„å½’çº¦æ¡ä»¶ä¹Ÿä¸ä¼šå˜åŒ–ã€‚</p>
<p>åé¢ä¸ºäº†è§„èŒƒåŒ–ï¼Œå°†ä»¥ç±»ä¼¼â€œAâ†’Î±Â·BÎ²,aâ€çš„æ ¼å¼æ¥è¡¨ç¤ºæŸä¸ªé¡¹åŠå…¶å½’çº¦æ¡ä»¶ã€‚å…¶ä¸­é€—å·ä¸ºé—´éš”ç¬¦ã€‚</p>
<p>æˆ‘å·²æƒ³åˆ°ä¸€ç§ç±»ä¼¼äºDFAæ¢ç´¢åœ°å›¾ä¸€æ ·ç»å¦™è€Œç®€ä¾¿çš„æ–¹æ³•ï¼Œä»è€Œä¸æ··ä¹±åœ°è¿›è¡ŒLR(1)é¡¹ç›®æ—è§„èŒƒæ—çš„æ„å»ºã€‚æ‰€å¹¸è¿™é‡Œæœ‰å¤§æŠŠç©ºé—´ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å·²æ‹“å¹¿æ–‡æ³•ä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼š</p>
<p>(ä¹ é¢˜4)</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">0.</span> Sâ€²â†’S$ 
<span class="hljs-bullet">1.</span> Sâ†’BB 
<span class="hljs-bullet">2.</span> Bâ†’aB 
<span class="hljs-bullet">3.</span> Bâ†’b
</code></pre>
<p>é¦–å…ˆä¸ºå¼€å§‹ç¬¦å·S'äº§ç”Ÿå¼ç”Ÿæˆå¸¦å½’çº¦æ¡ä»¶çš„é¡¹ç›®ï¼šSâ€²â†’Â·S, $ã€‚ï¼ˆè¿™ä¹ˆè¯´æ¥Såé¢è¿˜çœŸåŠ ä¸åŠ #éƒ½æ²¡æ‰€è°“ï¼Œåæ­£çŸ¥é“S'å°±æ˜¯æ”¶åˆ°Sçœ‹åˆ°å¥å­ç»“æŸç¬¦å°±accå°±å¥½ã€‚ï¼‰</p>
<p>ç”Ÿæˆä¸€ä¸ªæœ‰å››åˆ—çš„è¡¨æ ¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å…¶ä¸­ï¼Œç¬¬ä¸€è¡Œæ•°æ®å¡«ä¸Šï¼šçŠ¶æ€åç§°ï¼š0ï¼›æ¥æºï¼šç©ºï¼›åˆå§‹é¡¹ï¼šS'â†’Â·S,<span class="math math-inline"><span class="katex-error" title="ParseError: KaTeX parse error: Expected '}', got 'EOF' at end of input: â€¦å­ç¨‹åºæ‰€å¢åŠ é¡¹ï¼š{Sâ†’Â·BB," style="color:#cc0000"><span class="cjk_fallback">ï¼Œä»¥åŠæ±‚å­ç¨‹åºæ‰€å¢åŠ é¡¹ï¼š{Sâ†’Â·BB,</span></span></span>ï¼›Bâ†’Â·aB, a/bï¼›Bâ†’Â·b, a/b}ã€‚</p>
<p>åœ¨åˆå§‹æ¡ä»¶å‡†å¤‡å¦¥å½“åï¼Œå°±å¼€å§‹å¾ªç¯ï¼š</p>
<p>æ¯ä¸€è½®ä¸­ï¼Œå¯¹å½“å‰è¡¨æ ¼ä¸­è¿˜æ²¡è¢«å®Œå…¨å¤„ç†å®Œæ¯•çš„çŠ¶æ€ï¼Œæ‰¾å‡ºå®ƒé‡Œé¢è¿˜æ²¡è¢«å¤„ç†çš„é¡¹ï¼Œç„¶åå¯¹è¿™ä¸ªé¡¹æ–½åŠ å¯ä»¥è®©å®ƒçš„è¿›åº¦å‘ç”Ÿå˜åŒ–çš„æ¿€åŠ±ï¼Œå¦‚Sã€Bç­‰ï¼Œä»è€Œäº§ç”Ÿæ–°ä¸´æ—¶çŠ¶æ€çš„åˆå§‹é¡¹ã€‚å¦‚æœè¿™ä¸ªåˆå§‹é¡¹ä»æœªå‡ºç°è¿‡ï¼Œåˆ™ç¡®è®¤ä¸ºå‘ç°äº†æ–°çŠ¶æ€ï¼Œè®°å½•åœ¨è¡¨æ ¼æ–°çš„ä¸€åˆ—ä¸­ã€‚åŒæ—¶è¿˜å¯ä»¥åœ¨è¿™ä¸ªå·²å¤„ç†çš„é¡¹åé¢æ ‡è®°æ¥ä¸‹æ¥ä¼šè¿›è¡Œçš„ç›¸åº”æ“ä½œæ ‡è®°ï¼Œä»è€Œé˜²æ­¢é‡å¤å¤„ç†è¯¥é¡¹ï¼Œå¹¶æ–¹ä¾¿åç»­LR(1)åˆ†æè¡¨çš„æ„å»ºã€‚</p>
<p>é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ²¡æœ‰æ–°çŠ¶æ€äº§ç”Ÿï¼Œæ‰€å¾—é¡¹ç›®é›†å³ä¸ºLR(1)é¡¹ç›®é›†è§„èŒƒæ—ã€‚</p>
<p>çŠ¶æ€åç§°</p>
<p>ä¸Šä¸€ä¸ªçŠ¶æ€(æ¥æº)</p>
<p>åˆå§‹é¡¹</p>
<p>æ±‚å­ç¨‹åºæ‰€å¢åŠ é¡¹</p>
<p>0</p>
<p>S'â†’Â·S,$ï¼Œ1</p>
<p>Sâ†’Â·BB,$ï¼Œ2<br/>
Bâ†’Â·aB, a/bï¼Œ3<br/>
Bâ†’Â·b, a/bï¼Œ4</p>
<p>1</p>
<p>0</p>
<p>I1: S'â†’SÂ·, $ï¼Œacc</p>
<p>2</p>
<p>0</p>
<p>Sâ†’BÂ·B,$ï¼Œ5</p>
<p>Bâ†’Â·aB, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ï¼Œ</mtext><mn>6</mn><mi>B</mi><mo>â†’</mo><mo separator="true">â‹…</mo><mi>b</mi><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">ï¼Œ6  
Bâ†’Â·b, </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ï¼Œ</span><span class="mord">6</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mpunct">,</span></span></span></span></span>ï¼Œ7</p>
<p>3</p>
<p>0, 3</p>
<p>Bâ†’aÂ·B, a/bï¼Œ8</p>
<p>Bâ†’Â·aB, a/bï¼Œ3<br/>
Bâ†’Â·b, a/bï¼Œ4</p>
<p>4</p>
<p>0, 3</p>
<p>Bâ†’bÂ·,a/bï¼Œr3</p>
<p>5</p>
<p>2</p>
<p>Sâ†’BBÂ·, $ï¼Œr1</p>
<p>6</p>
<p>2, 6</p>
<p>Bâ†’aÂ·B,$ï¼Œ8</p>
<p>Bâ†’Â·aB,<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ï¼Œ</mtext><mn>6</mn><mi>B</mi><mo>â†’</mo><mo separator="true">â‹…</mo><mi>b</mi><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">ï¼Œ6  
Bâ†’Â·b,</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ï¼Œ</span><span class="mord">6</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mpunct">,</span></span></span></span></span>ï¼Œ7</p>
<p>7</p>
<p>2, 6</p>
<p>Bâ†’bÂ·,$ï¼Œr3</p>
<p>8</p>
<p>3</p>
<p>Bâ†’aBÂ·,a/bï¼Œr2</p>
<p>9</p>
<p>6</p>
<p>Bâ†’aBÂ·,$ï¼Œr2</p>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥æ„å»ºç›¸åº”çš„LR(1)åˆ†æè¡¨äº†</p>
<p>a</p>
<p>b</p>
<p>$</p>
<p>S</p>
<p>B</p>
<p>0</p>
<p>3</p>
<p>4</p>
<p>1</p>
<p>2</p>
<p>1</p>
<p>acc</p>
<p>2</p>
<p>6</p>
<p>7</p>
<p>5</p>
<p>3</p>
<p>3</p>
<p>4</p>
<p>8</p>
<p>4</p>
<p>r3</p>
<p>r3</p>
<p>5</p>
<p>r1</p>
<p>6</p>
<p>6</p>
<p>7</p>
<p>8</p>
<p>7</p>
<p>r3</p>
<p>8</p>
<p>r2</p>
<p>r2</p>
<p>9</p>
<p>r2</p>
<h4 data-id="heading-12">5.4 LALR(1): LR(1)çš„æˆæœ¬ä¼˜åŒ–æ–¹æ¡ˆ</h4>
<p>æˆ‘å»ï¼Œç»ˆäºå†™å®Œè¿™10ä¸ªçŠ¶æ€äº†ï¼ŒLR(1)åˆ†æå®åœ¨æ˜¯å¤ªç¹çäº†ï¼Œè¿™å·¥ä½œæ˜¯ç»™äººç±»åšçš„å—ï¼Ÿï¼Ÿè¦ä¸æ˜¯éè¦å†™æ–‡æ¡£ï¼Œè¿™å·¥ä½œæœºå™¨åšç»å¯¹æ¯”äººå¼ºå•Šï¼</p>
<p>è€Œä¸”è¯è¯´å›æ¥ï¼Œä¸Šé¢è¿™ä¸ªæ–‡æ³•ä¸­çš„çŠ¶æ€4å’Œ7ï¼ŒçŠ¶æ€8å’Œ9ï¼Œä»¥åŠçŠ¶æ€3å’Œ6ï¼Œä»–ä»¬é™¤äº†å½’çº¦æ¡ä»¶ä¸åŒä»¥å¤–æ‰€æœ‰é¡¹éƒ½ä¸€æ ·çš„å‘€ã€‚è¿™ç›¸æ¯”äºLR(0)çš„é¡¹ç›®é›†è§„èŒƒæ—ï¼Œå®Œå…¨å°±æ˜¯è„±è£¤å­æ”¾å±å•Šã€‚</p>
<p>æ—¢ç„¶å‰é¢éƒ½è¯•è¿‡ç”¨å¥¥å¡å§†å‰ƒåˆ€æ¥åŒ–ç®€çŠ¶æ€ï¼Œé‚£LR(1)çš„çŠ¶æ€ä¼°è®¡ä¹Ÿæ˜¯å¯ä»¥è¢«ç¾å®¹ä¸€ä¸‹çš„ã€‚</p>
<p>çŠ¶æ€åç§°</p>
<p>ä¸Šä¸€ä¸ªçŠ¶æ€(æ¥æº)</p>
<p>åˆå§‹é¡¹</p>
<p>æ±‚å­ç¨‹åºæ‰€å¢åŠ é¡¹</p>
<p>0</p>
<p>S'â†’Â·S,$ï¼Œ1</p>
<p>Sâ†’Â·BB,<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ï¼Œ</mtext><mn>2</mn><mi>B</mi><mo>â†’</mo><mo separator="true">â‹…</mo><mi>a</mi><mi>B</mi><mo separator="true">,</mo><mi>a</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">ï¼Œ2  
Bâ†’Â·aB, a/b/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ï¼Œ</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mord">/</span><span class="mord mathnormal">b</span><span class="mord">/</span></span></span></span></span>ï¼Œ3,6<br/>
Bâ†’Â·b, a/b/$ï¼Œ4,7</p>
<p>1</p>
<p>0</p>
<p>I1: S'â†’SÂ·, $ï¼Œacc</p>
<p>2</p>
<p>0</p>
<p>Sâ†’BÂ·B,$ï¼Œ5</p>
<p>Bâ†’Â·aB, a/b/<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ï¼Œ</mtext><mn>3</mn><mo separator="true">,</mo><mn>6</mn><mi>B</mi><mo>â†’</mo><mo separator="true">â‹…</mo><mi>b</mi><mo separator="true">,</mo><mi>a</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">ï¼Œ3,6  
Bâ†’Â·b, a/b/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord cjk_fallback">ï¼Œ</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">6</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mord">/</span><span class="mord mathnormal">b</span><span class="mord">/</span></span></span></span></span>ï¼Œ4,7</p>
<p>3,6</p>
<p>0, 3</p>
<p>Bâ†’aÂ·B, a/b/$ï¼Œ8</p>
<p>Bâ†’Â·aB, a/b/<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ï¼Œ</mtext><mn>3</mn><mo separator="true">,</mo><mn>6</mn><mi>B</mi><mo>â†’</mo><mo separator="true">â‹…</mo><mi>b</mi><mo separator="true">,</mo><mi>a</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">ï¼Œ3,6  
Bâ†’Â·b, a/b/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord cjk_fallback">ï¼Œ</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">6</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mord">/</span><span class="mord mathnormal">b</span><span class="mord">/</span></span></span></span></span>ï¼Œ4,7</p>
<p>4,7</p>
<p>0, 3</p>
<p>Bâ†’bÂ·,a/b/$ï¼Œr3</p>
<p>5</p>
<p>2</p>
<p>Sâ†’BBÂ·, $ï¼Œr1</p>
<p>8,9</p>
<p>3</p>
<p>Bâ†’aBÂ·,a/b/$ï¼Œr2</p>
<p>å¯¹åº”çš„åˆ†æè¡¨ï¼š</p>
<p>a</p>
<p>b</p>
<p>$</p>
<p>S</p>
<p>B</p>
<p>0</p>
<p>3,6</p>
<p>4,7</p>
<p>1</p>
<p>2</p>
<p>1</p>
<p>acc</p>
<p>2</p>
<p>3,6</p>
<p>4,7</p>
<p>5</p>
<p>3,6</p>
<p>3,6</p>
<p>4,7</p>
<p>8,9</p>
<p>4,7</p>
<p>r3</p>
<p>r3</p>
<p>r3</p>
<p>5</p>
<p>r1</p>
<p>8,9</p>
<p>r2</p>
<p>r2</p>
<p>r2</p>
<p>åˆå¹¶åæ²¡æœ‰ä»»ä½•å†²çªå‘ç”Ÿï¼Œè¯´æ˜è¿™ä¸ªæ–¹æ³•æ˜¯workçš„ï¼ŒçŠ¶æ€å¾—åˆ°äº†å‰Šå‡ï¼</p>
<p>å‘½ä¸ªä»€ä¹ˆåå¥½å‘¢ã€‚ã€‚è¿™ä¸ªç®—æ³•åˆå¹¶äº†LR(1)ä¸­å†…æ ¸ç›¸åŒçš„çŠ¶æ€ï¼Œé‚£å¹²è„†å°±å«LAï¼ˆkerneL Aggregationï¼‰LR(1)å§ï¼</p>
<p>â€¦â€¦</p>
<p>å¸ˆå‚…çœ‹å®Œé€’äº¤ä¸Šæ¥çš„ä¸‰ä¸ªç®—æ³•æ–¹æ¡ˆï¼Œéšå£åæ§½é“ï¼šâ€œå‰é¢ä¸¤ä¸ªæš‚ä¸”ä¸è¯´ï¼Œå…‰çœ‹ä½ è¿™LALR(1)ï¼Œæˆ‘è¿˜ä»¥ä¸ºæ˜¯Look-Ahead LR(1)å‘¢ï¼Œä¸è¿‡æƒ³æƒ³é‚£ä¸ª1å·²ç»æ˜¯å‘å‰çœ‹ä¸€ä¸ªç¬¦å·çš„æ„æ€äº†ï¼Œæƒ³å¿…ä½ ä¹Ÿä¸ä¼šè„±è£¤å­æ”¾å±å¤šè®²ä¸€éã€‚</p>
<p>å¦å¤–æˆ‘æ„Ÿè§‰ä½ è¿™LALR(1)è™½è¯´æ˜¯å°‘äº†çŠ¶æ€äº†ï¼Œä½†æ˜¯å®ƒè§£å†³å†²çªçš„èƒ½åŠ›åº”è¯¥æ˜¯è¦å·®è¿‡LR(1)?â€</p>
<p>å—¯æ˜¯çš„ï¼Œåœ¨æç«¯æƒ…å†µä¸‹å¦‚æœLR(1)åŸæ¥çš„çŠ¶æ€ä¸­å¦‚æœæœ‰å¦‚ä¸‹ä¸¤ä¸ªçŠ¶æ€ï¼š</p>
<ul>
<li>
<p>çŠ¶æ€ 1ï¼š</p>
</li>
<li>
<p>A-&gt;Î±Â·ï¼Œ{a}</p>
</li>
<li>
<p>B-&gt;Î²Â·ï¼Œ{b}</p>
</li>
<li>
<p>çŠ¶æ€ 2ï¼š</p>
</li>
<li>
<p>A-&gt;Î±Â·ï¼Œ{b}</p>
</li>
<li>
<p>B-&gt;Î²Â·ï¼Œ{a//å…¶å®è¿™é‡Œæ˜¯å•¥å·²ç»ä¸é‡è¦äº†}</p>
</li>
</ul>
<p>è¿™æ ·åˆå¹¶ä¹‹åA-&gt;Î±Â·çš„å½’çº¦æ¡ä»¶é›†åˆå°±ä¸€å®šä¼šå’ŒB-&gt;Î²Â·çš„æœ‰éç©ºäº¤é›†ï¼Œå½’çº¦-å½’çº¦çš„çº·äº‰å°±å¼€å§‹äº†ã€‚</p>
<p>ç›¸åï¼Œåˆå¹¶å†…æ ¸æ˜¯ç»å¯¹ä¸ä¼šäº§ç”Ÿç§»è¿›-å½’çº¦å†²çªçš„ã€‚</p>
<p>åŸå› åœ¨äºï¼šè¦äº§ç”Ÿç§»è¿›å½’çº¦é¡¹ç›®ï¼Œè¯´æ˜è¿™ä¸ªçŠ¶æ€å†…éƒ¨æœ¬æ¥å°±è¦æœ‰ç§»è¿›é¡¹ç›®ã€‚åˆå¹¶çŠ¶æ€ä¹‹åï¼Œä¹Ÿåªæ˜¯æŠŠå®ƒä»¬çš„å½’çº¦æ¡ä»¶åˆå¹¶äº†ã€‚åªè¦åŸæ¥æ²¡æœ‰å†²çªï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªç§»è¿›é¡¹ç›®ç­‰å¾…ç§»è¿›çš„ç¬¦å·ä¸åŸå§‹çŠ¶æ€çš„å½’çº¦é¡¹ç›®çš„æ¡ä»¶ä¸ä¼šå†²çªï¼Œæ‰€ä»¥åˆå¹¶åä¹Ÿç»å¯¹ä¸ä¼šå†²çªã€‚</p>
<p>ä¸€æ—¦åˆå¹¶åæœ‰å†²çªäº§ç”Ÿçš„, å°±ä¸å«LALR(1)æ–‡æ³•ï¼›</p>
<p>åªæœ‰åˆå¹¶åæ²¡æœ‰å‡ºç°å†²çªçš„ï¼Œæ‰å«LALR(1)æ–‡æ³•ã€‚</p>
<p>ä»–ä»¬å››å…„å¼ŸæŒ‰èƒ½åŠ›æ’åºåº”ä¸ºï¼šLR(1)âŠ‡LALR(1) âŠ‡ SLR(1) âŠ‡ LR(0)</p>
<p>å¸ˆå‚…å¿ƒä¸­osï¼šâ€œä¸ºå•¥ç”¨åŒ…å«å·ä¸ç”¨å¤§äºå·æ¥ç€ï¼Ÿå•Šå¯¹ï¼Œè¿™æ˜¯å››å¤§ç±»æ–‡æ³•ï¼Œæ˜¯å››ä¸ªé›†åˆï¼Œæ¯”å¤§å°å¾—ç”¨åŒ…å«ç¬¦å·ã€‚â€</p>
<h3 data-id="heading-13">6. äºŒä¹‰æ€§åŠå…¶å¤„ç†</h3>
<p>æ—¢ç„¶è‡ªé¡¶å‘ä¸‹è¯­æ³•åˆ†æã€è‡ªåº•å‘ä¸Šè¯­æ³•åˆ†æéƒ½å¼€å‘å®Œæˆäº†ï¼Œä¸¤äººç›®å…‰ä¾¿åˆè½åœ¨é‚£ä¸ªä¸€åˆ‡çš„å¼€ç«¯ï¼Œif elseæ–‡æ³•ã€‚ä¼¼ä¹åªè¦è§£å†³è¿™ä¸€åˆ‡ï¼Œå®¢æˆ·çš„å…¶ä»–é—®é¢˜ä¾¿éƒ½èƒ½è¿åˆƒè€Œè§£ã€‚</p>
<p>(ä¹ é¢˜5)</p>
<p>Sâ†’if B S | if B S else S</p>
<p>ç»™å‡ºå¥å‹if B if B S else Sçš„è¯­æ³•æ ‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06f78d386df341198ada825741a18196~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pCe56yR5YO15bC45oCd6ICD5pe26Ze0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771550852&amp;x-signature=YNIeQ84n1NrTOXfE4oBYtIi%2B2Pk%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/933de6295f1b4584836baa524f06b24f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pCe56yR5YO15bC45oCd6ICD5pe26Ze0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771550852&amp;x-signature=8qcK6IRdT8lxHUZ2jWDkz%2Bs%2FvH0%3D" alt="" loading="lazy"/></p>
<p>å•Šï¼Œè¿™ï¼Œéƒ½ä¸æ˜¯LR(1)æ–‡æ³•ï¼Œåˆ†æä¸ªå±â•®(ï¿£â–½ï¿£)â•­ï¼Œè¿è¿™ä¹ˆç®€å•çš„æ–‡æ³•éƒ½æä¸å®šï¼Œæäº†è¿™ä¹ˆä¹…ç™½å¿™æ´»äº†ã€‚æœç„¶è¿™è¯­æ³•å†™å¾—å¤ªè¿‡ç®€å•å°±æ˜¯åœ¨ä¸ºéš¾æˆ‘èƒ–è™ç¼–è¯‘å™¨ã€‚è¦æ˜¯å†™æˆif endæˆ–è€…end ifè¿™æ ·çš„å½¢å¼å°±å®¹æ˜“åˆ†æå¤šäº†ã€‚</p>
<p>å¸ˆå‚…ï¼šâ€œå“ˆå“ˆæ¯•ç«Ÿç¼–è¯‘å™¨çš„å·¥ä½œå°±æ˜¯ä¸ºäººç±»æœåŠ¡å˜›ã€‚ç­‰ä¸€ä¸‹ï¼Œæˆ‘æ„Ÿè§‰å€’ä¹Ÿä¸ç”¨ç°å¿ƒï¼Œæˆ‘å‘ç°ä»–çš„LR(0)åˆ†æè¡¨è¿˜æŒºæœ‰æ„æ€çš„ã€‚ä½ çœ‹ï¼Œæ­§ä¹‰å°±åªå‡ºç°åœ¨(4,'else')è¿™ä¸ªæ ¼å­é‡Œã€‚</p>
<p>if</p>
<p>B</p>
<p>S</p>
<p>else</p>
<h2 data-id="heading-14"/>
<p>0</p>
<p>2</p>
<p>1</p>
<p>1</p>
<p>acc</p>
<p>2</p>
<p>3</p>
<p>3</p>
<p>2</p>
<p>4</p>
<p>4</p>
<p>5,r1</p>
<p>r1</p>
<p>5</p>
<p>2</p>
<p>6</p>
<p>6</p>
<p>r2</p>
<p>r2</p>
<p>ä½ ä¹‹å‰çš„LRç³»åˆ—æ–‡æ³•å‡ºç°å†²çªå…¶å®éƒ½æ˜¯åŒæ ·çš„é—®é¢˜å¯¹å§ï¼Ÿé‚£æ—¶å€™éƒ½è§‰å¾—æ— æ³•å¤„ç†æ˜¯å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥èµ°é‚£æ¡è·¯ï¼Œå› ä¸ºæ–‡æ³•å¤ªæŠ½è±¡äº†ã€‚ä½†å¯¹äºif elseï¼Œå’±ä»¬å¯ä»¥å¼•å…¥ä¸€äº›è§„åˆ™æ¥è¾…åŠ©åˆ¤æ–­å‘€ï¼</p>
<p>æ¯”å¦‚ï¼Œå¯ä»¥è¦æ±‚å†™ä»£ç çš„äººè®°ä½â€˜ifåªè·Ÿæœ€è¿‘çš„elseåŒ¹é…â€™ã€‚ä¸€æ—¦åŠ ä¸Šè¿™æ¡è§„åˆ™ï¼Œæ„å‘³ç€åªè¦ifçœ‹åˆ°åé¢æœ‰elseï¼Œå°±å†³ä¸ä¼šè‡ªç»äºä»£ç ä¸­ï¼Œè¿™æ ·å’±ä»¬ç›´æ¥å°±æŠŠè¿™ä¸ªæ ¼å­ä¸­çš„r1å»æ‰å°±å¥½å•¦ã€‚åˆ«æ„£ç€äº†ï¼Œè§„åˆ™æ˜¯äººå®šçš„ï¼Œæ ‘æŒªæ­»äººæŒªæ´»ã€‚â€œ</p>
<p>å¸ˆå‚…æˆ‘çªç„¶æƒ³èµ·ä¹å“èŠéº»å®˜ä¸­é‚£ä¸ªæ­§ä¹‰æ¢—ï¼šâ€å¹´ç§Ÿé“¶ä¸¤ä¸‰åä¸‡ä¸èƒ½è½¬ç§Ÿåˆ«äººâ€œä¸æ˜¯æœ‰ä¸¤ç§è§£è¯»æ–¹å¼å˜›ï¼Ÿç°åœ¨çœ‹åˆ°è¿™ä¸ªè¯­æ³•æ ‘æˆ‘æ‰æ˜ç™½ï¼Œè¿™æ‰€è°“æ–‡æ³•çš„æ­§ä¹‰å°±æ˜¯æŒ‡æ–‡æ³•æœ¬èº«æœ‰é—®é¢˜ï¼Œä¼šå¯¼è‡´ä¸€å¥è¯å¯ä»¥å¯¹åº”å¤šæ£µè¯­æ³•æ ‘ï¼</p>
<p>å¸ˆå‚…ç‚¹ç‚¹å¤´ï¼šâ€œä½ è¿™ä¹ˆä¸€è¯´ï¼Œä¹‹å‰æ­£åˆ™æ–‡æ³•è¯´æ˜¯å¯¹åº”æ­£åˆ™è¯­è¨€ã€‚é‚£æ–‡æ³•å¯¹åº”çš„ä¹Ÿåº”è¯¥æ˜¯è¯­è¨€ã€‚å¦‚æœæ–‡æ³•ä¼šå¯¼è‡´æ­§ä¹‰ï¼Œé‚£æˆ‘ä¼°è®¡æœ‰äº›è¯­è¨€å¤©ç”Ÿå°±æ˜¯å¸¦æœ‰æ­§ä¹‰çš„ï¼Œæ— è®ºä½ ç”¨ä»€ä¹ˆæ–‡æ³•å»æè¿°éƒ½æœ‰æ­§ä¹‰ã€‚</p>
<p>å…³é”®æ˜¯ï¼Œæˆ‘æ„Ÿè§‰è¿™æ­§ä¹‰æœ€éº»çƒ¦çš„æ˜¯æ²¡æœ‰é€šç”¨ç®—æ³•ç›´æ¥åˆ¤å®šï¼Œå”¯ä¸€èƒ½åšçš„å°±æ˜¯åè¯æ³•ï¼Œç›´æ¥ä¸¾ä¸ªåä¾‹ï¼Œè¯´è¿™é‡Œæœ‰ä¸ªå¥å­æœ‰å¤šä¸ªè¯­æ³•æ ‘ï¼Œç„¶åè¿™ä¸ªæ–‡æ³•å°±æ˜¯å¸¦æ­§ä¹‰äº†ã€‚</p>
<p>ä¸ç®¡æ€ä¹ˆè¯´ï¼Œå’±ä»¬ä¹Ÿç®—æ˜¯æŠŠif elseè¿™ä¸ªBossç»™è§£å†³äº†ï¼â€</p>
<h3 data-id="heading-15">7.å’ŒLLæ–‡æ³•çš„å¯¹æ¯”</h3>
<p>â€œæ‰€ä»¥ï¼Œä½ ä»¬æå‡ºæ¥çš„è¿™ä¸ªLRåˆ†æï¼Œåˆ°åº•æ¯”å‰é¢çš„LLå¼ºåœ¨äº†å“ªé‡Œï¼Ÿâ€è€æ¿è¿˜æ˜¯æœ‰ç‚¹æ²¡ææ‡‚ã€‚</p>
<p>ç®€å•æ¥è®²ï¼ŒLL(k)å³ä½¿kå¾ˆå¤§å¾ˆå¤§ï¼Œé‚£ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰é™å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒçš„ç›®å…‰æ˜¯æœ‰é™çš„ã€‚è€ŒLRåˆ†ææŠ€æœ¯ï¼Œå®ƒå°±åƒä¸ªé—·éªšæ€ªï¼Œå…ˆä¸å£°ä¸å“å¸æ”¶äº†ä¸€å¤§å †çŸ¥è¯†ï¼Œç­‰åˆ°ä»–è§‰å¾—å¯ä»¥åšå†³å®šçš„æ—¶å€™å†è¿›è¡Œæ¶ˆåŒ–ã€‚è¿™æ ·ä»–å°±å…·æœ‰äº†åæ‰‹ä¼˜åŠ¿ï¼Œæ€»æ˜¯ä¼šæ¯”å…ˆæ‰‹çš„LLç±»è¦å°‘å‡ºé”™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬çš„èƒ½åŠ›å¹¶ä¸ç­‰ä»·ã€‚</p>
<p>â€œä½†ä½ è¯´çš„è¿™ä¸ªå‡ºé”™æˆ‘è§‰å¾—æ ¸å¿ƒåœ¨äºä½ é™åˆ¶äº†å®ƒä¸èƒ½çŠ¯é”™å§ï¼Ÿåªè¦æˆ‘å…è®¸å®ƒçŠ¯é”™å¹¶å›æº¯ï¼Œè¿™æ ·çš„è¯ä¸¤è€…åº”è¯¥æ˜¯å®Œå…¨ç­‰ä»·çš„æ‰å¯¹ã€‚â€</p>
<p>æ‚¨è¯´å¾—æŒºæœ‰é“ç†ï¼Œå¦‚æœå…è®¸æ— é™å›æº¯ï¼Œé‚£ä¹ˆå®ƒä»¬å¯¹ä¸Šä¸‹æ–‡æ— å…³è¯­è¨€çš„è¯†åˆ«ä¸Šç¡®å®æ˜¯ç­‰ä»·çš„ã€‚ç»æ‚¨è¿™ä¸€æé†’ï¼Œæˆ‘æ„Ÿè§‰LRæœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯å…¨éƒ¨è½¬æˆçŠ¶æ€ä¹‹åï¼Œä»£ç å¤ªæŠ½è±¡å¤ªéš¾è°ƒè¯•äº†ã€‚å¦‚æœå¯ä»¥è®©LLåˆ†æçœŸçš„åƒDFSé‚£æ ·è‡ªé¡¶å‘ä¸‹ä¸€å±‚ä¸€å±‚é€’å½’è§£æï¼Œæ„Ÿè§‰å†™èµ·æ¥ä¹Ÿä¸å¤æ‚å‘ã€‚è™½ç„¶è¯´å¯èƒ½åˆè®©ä»£ç ä¸é€»è¾‘çµè‚‰çº ç¼ äº†ï¼Œä½†åªè¦è¯­è¨€æ²¡æœ‰å˜æ€æ€§çš„å‘è‚²ï¼Œè¿™ä¹ˆç‚¹å°ä¿®è¡¥åº”è¯¥è¿˜æ˜¯èƒ½æ¥å—çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025Â·xLLMå¼€æºé¡¹ç›®å¹´åº¦æ€»ç»“]]></title>    <link>https://juejin.cn/post/7605625595570487311</link>    <guid>https://juejin.cn/post/7605625595570487311</guid>    <pubDate>2026-02-13T02:29:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605625595570487311" data-draft-id="7605542907118878772" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025Â·xLLMå¼€æºé¡¹ç›®å¹´åº¦æ€»ç»“"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2026-02-13T02:29:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œé›¶å”®æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/4233576972293643"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025Â·xLLMå¼€æºé¡¹ç›®å¹´åº¦æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4233576972293643/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œé›¶å”®æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:29:03.000Z" title="Fri Feb 13 2026 02:29:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>xLLM å®ç° Day0 æ”¯æŒæ™ºè°± GLM-5 å¤§æ¨¡å‹ï¼Œæ·±åº¦ä¼˜åŒ–åä¸ºæ˜‡è…¾æ¨ç†æ€§èƒ½ã€‚ç”¨æˆ·å³æ—¥èµ·å¯åœ¨ xLLM ä¸­ç›´æ¥ä½“éªŒ GLM-5 çš„å“è¶Šæ€§èƒ½ï¼Œå°¤å…¶é’ˆå¯¹åä¸ºæ˜‡è…¾å¹³å°å®Œæˆäº†æ·±åº¦æ¨ç†ä¼˜åŒ–ï¼Œæ¨ç†æ•ˆç‡æ˜¾è‘—æå‡ã€‚è¿™æ˜¯ xLLM åœ¨å›½äº§èŠ¯ç‰‡é€‚é…é¢†åŸŸè¿ˆå‡ºçš„åˆä¸€å…³é”®æ­¥ä¼ã€‚</p>
<p>å›æœ›2025å¹´8æœˆå¼€æºä»¥æ¥ï¼ŒxLLM å·²å…¨é¢å®Œæˆå¯¹æ˜‡è…¾ã€å¯’æ­¦çºªã€æ‘©å°”çº¿ç¨‹ã€å¤©æ•°æ™ºèŠ¯ç­‰ä¸»æµå›½äº§èŠ¯ç‰‡çš„æ·±åº¦é€‚é…ä¸ä¼˜åŒ–ï¼Œè¦†ç›–å¤§è¯­è¨€æ¨¡å‹ã€å¤šæ¨¡æ€ã€æ–‡ç”Ÿå›¾åŠç”Ÿæˆå¼æ¨èç­‰æ ¸å¿ƒAIåœºæ™¯ï¼Œå¹¶åœ¨å…³é”®æ¨¡å‹ä¸Šå–å¾—é«˜ååã€ä½å»¶è¿Ÿçš„æ€§èƒ½çªç ´ã€‚é€šè¿‡ä¸å¤´éƒ¨æ¨¡å‹å‚å•†çš„æ·±åº¦ååŒï¼Œæˆ‘ä»¬å®ç°ä»é€šç”¨å¤§æ¨¡å‹åˆ°ä¸“ä¸šé¢†åŸŸæ¨¡å‹çš„å¿«é€Ÿæ”¯æŒï¼ŒæŒç»­é™ä½å›½äº§AIè½åœ°çš„é—¨æ§›ã€‚</p>
<p>è¿ˆå‘2026ï¼ŒxLLM æœŸå¾…ä¸å„ä½ç»§ç»­æºæ‰‹ï¼Œå…±åŒæ¨åŠ¨å¼€æº AI Infra ç”Ÿæ€çš„ç¹è£ä¸å‘å±•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/059c61309a9845b0b06466ec9d82e72d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554542&amp;x-signature=sAfEKZlG6mj6h1tDXTQJu7yX4LM%3D" alt="2.12.jpg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç™¾åº¦æ–‡å¿ƒå¿«ç å…¨é¢æ”¯æŒGLM-5]]></title>    <link>https://juejin.cn/post/7605542907118944308</link>    <guid>https://juejin.cn/post/7605542907118944308</guid>    <pubDate>2026-02-13T02:42:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605542907118944308" data-draft-id="7605772919224533026" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç™¾åº¦æ–‡å¿ƒå¿«ç å…¨é¢æ”¯æŒGLM-5"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-13T02:42:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–‡å¿ƒå¿«ç BaiduComate"/> <meta itemprop="url" content="https://juejin.cn/user/992209294070809"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç™¾åº¦æ–‡å¿ƒå¿«ç å…¨é¢æ”¯æŒGLM-5
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/992209294070809/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–‡å¿ƒå¿«ç BaiduComate
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:42:35.000Z" title="Fri Feb 13 2026 02:42:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç™¾åº¦æ–‡å¿ƒå¿«ç ä»Šå¤©å…¨é¢æ”¯æŒGLM-5ã€‚ä½œä¸ºé¢å‘å¤æ‚ç³»ç»Ÿå·¥ç¨‹ä¼˜åŒ–çš„æ–°ä¸€ä»£æ¨¡å‹ï¼ŒGLM-5è¿›ä¸€æ­¥å¼ºåŒ–äº†Coding Agentåœ¨çœŸå®ç ”å‘åœºæ™¯ä¸­çš„æŒç»­æ‰§è¡Œèƒ½åŠ›ã€‚</p>
<p>åŸºäºGLM-5åœ¨æ¨ç†èƒ½åŠ›ã€ä»£ç ç†è§£ä¸ä»»åŠ¡è§„åˆ’æ–¹é¢çš„æ˜¾è‘—æå‡ï¼Œæ–‡å¿ƒå¿«ç åœ¨è·¨æ–‡ä»¶åˆ†æã€é—®é¢˜ä¿®å¤ã€å¤šæ­¥éª¤å¼€å‘ç­‰å¤æ‚å·¥ç¨‹åœºæ™¯ä¸­å®ç°äº†æ›´é«˜è´¨é‡çš„ä»»åŠ¡æ‰§è¡Œï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­æ›´é«˜æ•ˆå®Œæˆä»éœ€æ±‚ç†è§£ã€ä»»åŠ¡æ‹†è§£åˆ°ç»“æœäº¤ä»˜çš„å·¥ç¨‹é—­ç¯ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å¤æ‚ä»»åŠ¡å¤„ç†æ•ˆç‡ä¸è´¨é‡ã€‚</p>
<p>ç›®å‰ï¼ŒComateå·²åœ¨IDEåŠæ’ä»¶ç«¯å…¨é¢é›†æˆGLM-5ï¼Œæ·±åº¦èµ‹èƒ½å¼€å‘å…¨æµç¨‹ã€‚</p>
<p>è¯šé‚€å¤§å®¶å³åˆ»ä½“éªŒï¼Œåé¦ˆä½¿ç”¨æ„Ÿå—ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a59d4d90c0fe41e7aafa0839bcacda54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771555355&amp;x-signature=0ScjlavsBqfZDoCtMS4%2BNKcHpE0%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue å®æˆ˜ï¼šä»é›¶å®ç°â€œåˆ’è¯æ ‡æ³¨â€ä¸â€œé«˜äº®ç¬”è®°â€åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7605817795628531762</link>    <guid>https://juejin.cn/post/7605817795628531762</guid>    <pubDate>2026-02-13T02:42:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605817795628531762" data-draft-id="7605769126272057390" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue å®æˆ˜ï¼šä»é›¶å®ç°â€œåˆ’è¯æ ‡æ³¨â€ä¸â€œé«˜äº®ç¬”è®°â€åŠŸèƒ½"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-13T02:42:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue å®æˆ˜ï¼šä»é›¶å®ç°â€œåˆ’è¯æ ‡æ³¨â€ä¸â€œé«˜äº®ç¬”è®°â€åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:42:35.000Z" title="Fri Feb 13 2026 02:42:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åœ¨çº¿æ•™è‚²ã€æ–‡æ¡£é˜…è¯»æˆ–åšå®¢ç³»ç»Ÿä¸­ï¼Œ<strong>åˆ’è¯æ ‡æ³¨ï¼ˆHighlight &amp; Noteï¼‰</strong> æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ã€‚å®ƒå…è®¸ç”¨æˆ·åƒåœ¨çº¸è´¨ä¹¦ä¸Šä¸€æ ·ï¼Œç”¨é¼ æ ‡é€‰ä¸­ä¸€æ®µæ–‡å­—ï¼Œè¿›è¡Œé«˜äº®æ ‡è®°æˆ–æ·»åŠ è¯»ä¹¦ç¬”è®°ã€‚</p>
<p>æœ¬æ–‡å°†æ‹†è§£å¦‚ä½•åœ¨ Vue é¡¹ç›®ä¸­å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œæ¶µç›–ä»åº•å±‚çš„ <code>Selection API</code> è°ƒç”¨åˆ° DOM æ“ä½œï¼Œå†åˆ°æ•°æ®çŠ¶æ€ç®¡ç†çš„å®Œæ•´æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">æ ¸å¿ƒåŸç†</h2>
<p>å®ç°åˆ’è¯æ ‡æ³¨çš„æ ¸å¿ƒåœ¨äºæµè§ˆå™¨æä¾›çš„ <strong>Selection API</strong> å’Œ <strong>Range API</strong>ã€‚</p>
<ol>
<li><strong>Selection</strong>: ä»£è¡¨ç”¨æˆ·å½“å‰é€‰ä¸­çš„æ–‡æœ¬èŒƒå›´ï¼ˆå¯èƒ½è·¨è¶Šå¤šä¸ªèŠ‚ç‚¹ï¼‰ã€‚</li>
<li><strong>Range</strong>: ä»£è¡¨æ–‡æ¡£ä¸­ä¸€ä¸ªè¿ç»­çš„åŒºåŸŸï¼ˆSelection é€šå¸¸åŒ…å«ä¸€ä¸ª Rangeï¼‰ã€‚</li>
<li><strong>DOM æ“ä½œ</strong>: å°†é€‰ä¸­çš„æ–‡æœ¬ç”¨ä¸€ä¸ªç‰¹å®šæ ·å¼çš„æ ‡ç­¾ï¼ˆå¦‚ <code>&lt;span&gt;</code>ï¼‰åŒ…è£¹èµ·æ¥ï¼Œä»è€Œå®ç°é«˜äº®æ•ˆæœã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">Step 1: ç›‘å¬é€‰åŒº (Capture Selection)</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç”¨æˆ·æ¾å¼€é¼ æ ‡ï¼ˆ<code>mouseup</code>ï¼‰æ—¶æ•è·é€‰åŒºã€‚</p>
<p><strong>HTML ç»“æ„</strong>ï¼š
åœ¨å†…å®¹å®¹å™¨ä¸Šç»‘å®š <code>mouseup</code> äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-container"</span> @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"handleTextSelection"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- æ–‡ç« å†…å®¹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€æ®µå¯ä»¥è¢«é€‰ä¸­çš„æ–‡æœ¬...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>JavaScript å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">handleTextSelection</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å»¶æ—¶ä¿è¯é€‰åŒºçŠ¶æ€å·²æ›´æ–°</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();

    <span class="hljs-comment">// 1. åŸºç¡€æ ¡éªŒï¼šå¿…é¡»æ˜¯ Range ç±»å‹ä¸”éç©º</span>
    <span class="hljs-keyword">if</span> (selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>() === <span class="hljs-string">''</span> || selection.<span class="hljs-property">type</span> !== <span class="hljs-string">'Range'</span> || selection.<span class="hljs-property">isCollapsed</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionMenuVisible</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// éšè—èœå•</span>
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 2. è·å–æ ¸å¿ƒ Range å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);

    <span class="hljs-comment">// 3. (å¯é€‰) è¿›é˜¶æ ¡éªŒï¼šç¦æ­¢è·¨ç‰¹å®šåŒºåŸŸé€‰æ‹©</span>
    <span class="hljs-comment">// æ¯”å¦‚ï¼šä¸èƒ½åŒæ—¶é€‰ä¸­ A é€‰é¡¹å’Œ B é€‰é¡¹</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCrossBlockSelection</span>(range)) {
      selection.<span class="hljs-title function_">removeAllRanges</span>();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 4. æ‰§è¡Œé«˜äº®åŒ…è£¹é€»è¾‘ï¼ˆè§ä¸‹æ–‡ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createTempHighlight</span>(range, selection);
  }, <span class="hljs-number">0</span>);
}
</code></pre>
<hr/>
<h2 data-id="heading-2">Step 2: åŒ…è£¹æ–‡æœ¬ (Wrap Text)</h2>
<p>è·å–åˆ° <code>Range</code> åï¼Œæˆ‘ä»¬éœ€è¦å°†é€‰ä¸­çš„æ–‡æœ¬ç”¨ä¸€ä¸ªä¸´æ—¶æ ‡ç­¾ï¼ˆTemp Spanï¼‰åŒ…è£¹èµ·æ¥ã€‚è¿™ä¸ªæ ‡ç­¾é€šå¸¸æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p>
<ol>
<li><strong>è§†è§‰åé¦ˆ</strong>ï¼šç»™ç”¨æˆ·ä¸€ä¸ªâ€œé¢„é€‰ä¸­â€çš„çŠ¶æ€ï¼ˆä¾‹å¦‚æµ…è“è‰²èƒŒæ™¯ï¼‰ã€‚</li>
<li><strong>å®šä½é”šç‚¹</strong>ï¼šç”¨äºè®¡ç®—åç»­â€œæ“ä½œèœå•â€çš„æ˜¾ç¤ºä½ç½®ã€‚</li>
</ol>
<p><strong>æ ¸å¿ƒä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">createTempHighlight</span>(<span class="hljs-params">range, selection</span>) {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåŒ…è£¹æ ‡ç­¾</span>
  <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'span'</span>);
  span.<span class="hljs-property">className</span> = <span class="hljs-string">'temp-selection-highlight'</span>; <span class="hljs-comment">// è‡ªå®šä¹‰æ ·å¼ç±»</span>

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ ¸å¿ƒæ“ä½œï¼šæå–å†…å®¹ -&gt; æ’å…¥èŠ‚ç‚¹</span>
    <span class="hljs-comment">// range.extractContents() ä¼šå°†é€‰åŒºå†…å®¹ä» DOM æ ‘ä¸­ç§»é™¤å¹¶è¿”å› DocumentFragment</span>
    span.<span class="hljs-title function_">appendChild</span>(range.<span class="hljs-title function_">extractContents</span>());
    <span class="hljs-comment">// å°†åŒ…è£¹åçš„ span æ’å…¥å›åŸå¤„</span>
    range.<span class="hljs-title function_">insertNode</span>(span);

    <span class="hljs-comment">// âš ï¸é‡è¦ï¼šé‡ç½®é€‰åŒº</span>
    <span class="hljs-comment">// å› ä¸º DOM ç»“æ„æ”¹å˜äº†ï¼ŒåŸæœ‰çš„ selection ä¼šå¤±æ•ˆæˆ–é”™ä½</span>
    <span class="hljs-comment">// æˆ‘ä»¬éœ€è¦é‡æ–°é€‰ä¸­è¿™ä¸ª span çš„å†…å®¹ï¼Œè®©ç”¨æˆ·æ„Ÿè§‰â€œé«˜äº®è¿˜åœ¨â€</span>
    <span class="hljs-keyword">const</span> newRange = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createRange</span>();
    newRange.<span class="hljs-title function_">selectNodeContents</span>(span);
    selection.<span class="hljs-title function_">removeAllRanges</span>();
    selection.<span class="hljs-title function_">addRange</span>(newRange);

    <span class="hljs-comment">// ä¿å­˜å½“å‰ Range å¼•ç”¨ï¼Œä¾›åç»­æ“ä½œä½¿ç”¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentRange</span> = newRange;

    <span class="hljs-comment">// 5. æ˜¾ç¤ºæ“ä½œèœå•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showActionMenu</span>(span);

  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Wrapping failed:'</span>, e);
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-3">Step 3: èœå•å®šä½ (Positioning Menu)</h2>
<p>æ“ä½œèœå•ï¼ˆâ€œé«˜äº®â€ã€â€œç¬”è®°â€ï¼‰é€šå¸¸æ‚¬æµ®åœ¨é€‰åŒºä¸Šæ–¹ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>getBoundingClientRect()</code> æˆ– <code>getClientRects()</code> æ¥è·å–ä½ç½®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">showActionMenu</span>(<span class="hljs-params">spanElement</span>) {
  <span class="hljs-comment">// è·å–å…ƒç´ çš„ä½ç½®ä¿¡æ¯</span>
  <span class="hljs-comment">// getClientRects() å¯¹äºè·¨è¡Œæ–‡æœ¬æ›´å‡†ç¡®ï¼Œå–æœ€åä¸€è¡Œ</span>
  <span class="hljs-keyword">const</span> rects = spanElement.<span class="hljs-title function_">getClientRects</span>();
  <span class="hljs-keyword">const</span> lastRect = rects.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? rects[rects.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] : spanElement.<span class="hljs-title function_">getBoundingClientRect</span>();

  <span class="hljs-comment">// è®¡ç®—èœå•åæ ‡ï¼ˆç›¸å¯¹äºè§†å£ï¼‰</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionMenuPosition</span> = {
    <span class="hljs-attr">top</span>: (lastRect.<span class="hljs-property">bottom</span> + <span class="hljs-number">5</span>) + <span class="hljs-string">'px'</span>, <span class="hljs-comment">// æ˜¾ç¤ºåœ¨ä¸‹æ–¹ 5px å¤„</span>
    <span class="hljs-attr">left</span>: (lastRect.<span class="hljs-property">right</span> + <span class="hljs-number">5</span>) + <span class="hljs-string">'px'</span>
  };

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionMenuVisible</span> = <span class="hljs-literal">true</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-4">Step 4: ç¡®è®¤ä¸çŠ¶æ€ç®¡ç† (Confirm &amp; State)</h2>
<p>ç”¨æˆ·ç‚¹å‡»èœå•ä¸­çš„â€œé«˜äº®â€æˆ–â€œç¬”è®°â€æŒ‰é’®åï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸´æ—¶çš„ <code>span</code> è½¬æ¢ä¸ºæŒä¹…åŒ–çš„çŠ¶æ€ã€‚</p>
<ol>
<li><strong>ä¿®æ”¹æ ·å¼</strong>ï¼šå°† <code>temp-selection-highlight</code> ç±»æ›¿æ¢ä¸º <code>permanent-highlight</code>ï¼ˆé»„è‰²ï¼‰æˆ– <code>note-highlight</code>ï¼ˆè“è‰²ï¼‰ã€‚</li>
<li><strong>ç”Ÿæˆ ID</strong>ï¼šç»™ span æ·»åŠ ä¸€ä¸ªå”¯ä¸€ IDï¼ˆå¦‚ <code>data-id="167..."</code>ï¼‰ã€‚</li>
<li><strong>ä¿å­˜æ•°æ®</strong>ï¼šå°†ç¬”è®°å†…å®¹æ¨å…¥ Vue çš„æ•°æ®æ•°ç»„ä¸­ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">applyHighlight</span>(<span class="hljs-params">type</span>) {
  <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.temp-selection-highlight'</span>);
  <span class="hljs-keyword">if</span> (!span) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// 1. ç”Ÿæˆå”¯ä¸€ ID</span>
  <span class="hljs-keyword">const</span> id = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>().<span class="hljs-title function_">toString</span>();

  <span class="hljs-comment">// 2. æ›´æ–° DOM ç±»åå’Œå±æ€§</span>
  span.<span class="hljs-property">className</span> = type === <span class="hljs-string">'note'</span> ? <span class="hljs-string">'note-highlight'</span> : <span class="hljs-string">'highlight-text'</span>;
  span.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-id'</span>, id);

  <span class="hljs-comment">// 3. å­˜å…¥æ•°æ®å±‚</span>
  <span class="hljs-keyword">const</span> newNote = {
    id,
    <span class="hljs-attr">text</span>: span.<span class="hljs-property">innerText</span>, <span class="hljs-comment">// é€‰ä¸­çš„åŸæ–‡</span>
    type, <span class="hljs-comment">// 'highlight' or 'note'</span>
    <span class="hljs-attr">color</span>: type === <span class="hljs-string">'note'</span> ? <span class="hljs-string">'#e6f7ff'</span> : <span class="hljs-string">'#ffeb3b'</span>,
    <span class="hljs-attr">createTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
  };

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">notesList</span>.<span class="hljs-title function_">push</span>(newNote);

  <span class="hljs-comment">// 4. æŒä¹…åŒ–ï¼ˆä¿å­˜åˆ°åç«¯æˆ– LocalStorageï¼‰</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveData</span>();

  <span class="hljs-comment">// 5.å¦‚æœæ˜¯ç¬”è®°ï¼Œæ‰“å¼€ä¾§è¾¹æ ä¾›ç”¨æˆ·è¾“å…¥</span>
  <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'note'</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">openNoteSidebar</span>(id);
  }

  <span class="hljs-comment">// æ¸…é™¤é€‰ä¸­çŠ¶æ€</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>().<span class="hljs-title function_">removeAllRanges</span>();
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionMenuVisible</span> = <span class="hljs-literal">false</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-5">Step 5: å–æ¶ˆé«˜äº® (Unwrap)</h2>
<p>å¦‚æœç”¨æˆ·æƒ³åˆ é™¤é«˜äº®ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œâ€œåå‘æ“ä½œâ€ï¼šå°† <code>span</code> å»æ‰ï¼Œä¿ç•™é‡Œé¢çš„æ–‡å­—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">removeHighlight</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">`span[data-id="<span class="hljs-subst">${id}</span>"]`</span>);
  <span class="hljs-keyword">if</span> (span) {
    <span class="hljs-keyword">const</span> parent = span.<span class="hljs-property">parentNode</span>;
    <span class="hljs-comment">// å°† span çš„å­èŠ‚ç‚¹ï¼ˆæ–‡æœ¬ï¼‰ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹ä¸­ span çš„å‰é¢</span>
    <span class="hljs-keyword">while</span> (span.<span class="hljs-property">firstChild</span>) {
      parent.<span class="hljs-title function_">insertBefore</span>(span.<span class="hljs-property">firstChild</span>, span);
    }
    <span class="hljs-comment">// ç§»é™¤ç©º span</span>
    parent.<span class="hljs-title function_">removeChild</span>(span);
    <span class="hljs-comment">// è§„èŒƒåŒ–èŠ‚ç‚¹ï¼Œåˆå¹¶ç›¸é‚»çš„æ–‡æœ¬èŠ‚ç‚¹</span>
    parent.<span class="hljs-title function_">normalize</span>();
  }

  <span class="hljs-comment">// åŒæ­¥åˆ é™¤æ•°æ®</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">notesList</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">notesList</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> n.<span class="hljs-property">id</span> !== id);
}
</code></pre>
<h2 data-id="heading-6">è¿›é˜¶æŠ€å·§ï¼šä»æ•°æ®è¿˜åŸ DOM</h2>
<p>æœ€å¤§çš„éš¾ç‚¹åœ¨äºï¼š<strong>é¡µé¢åˆ·æ–°åï¼Œå¦‚ä½•é‡æ–°æ¸²æŸ“è¿™äº›é«˜äº®ï¼Ÿ</strong></p>
<p>å¦‚æœä½ çš„å†…å®¹æ˜¯çº¯é™æ€çš„ï¼Œå¯ä»¥ç›´æ¥ä¿å­˜åŒ…å« <code>span</code> æ ‡ç­¾çš„ HTML å­—ç¬¦ä¸²ã€‚ä½†ç”±äº Vue çš„ <code>v-html</code> æˆ– React çš„ <code>dangerouslySetInnerHTML</code> ä¼šå¯¼è‡´ DOM é‡ç»˜ï¼Œç®€å•çš„ HTML æ›¿æ¢å¯èƒ½ä¼šä¸¢å¤±äº‹ä»¶ç»‘å®šã€‚</p>
<p>æ›´ç¨³å¥çš„åšæ³•æ˜¯ï¼š</p>
<ol>
<li>ä¿å­˜ <strong>é€‰åŒºè·¯å¾„</strong>ï¼ˆå¦‚ï¼šç¬¬ X ä¸ªæ®µè½ï¼Œç¬¬ Y ä¸ªå­—ç¬¦å¼€å§‹ï¼Œé•¿åº¦ Zï¼‰ã€‚</li>
<li>é¡µé¢åŠ è½½æ—¶ï¼Œéå†æ•°æ®ï¼Œåˆ©ç”¨ <code>createRange()</code> é‡æ–°å®šä½å¹¶åŒ…è£¹ DOMã€‚</li>
</ol>
<p>ç”±äºè¿™é€šå¸¸æ¶‰åŠåˆ°å¤æ‚çš„ DOM éå†ç®—æ³•ï¼Œç”Ÿäº§ç¯å¢ƒä¸­æ¨èç»“åˆæˆç†Ÿåº“ï¼ˆå¦‚ <code>Rangy</code> æˆ–è‡ªè¡Œå®ç°åŸºäº XPath çš„å®šä½ï¼‰æ¥å¤„ç†å¤æ‚åœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>å®ç°ä¸€ä¸ªåˆ’è¯ç¬”è®°åŠŸèƒ½ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹ DOM Range çš„çµæ´»è¿ç”¨ã€‚é€šè¿‡ <strong>ç›‘å¬(Listen) -&gt; åŒ…è£¹(Wrap) -&gt; å­˜å‚¨(Store) -&gt; è¿˜åŸ(Restore)</strong> è¿™å››ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å°±èƒ½ä¸ºç”¨æˆ·æä¾›æµç•…çš„æ²‰æµ¸å¼é˜…è¯»ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» ES2015 åˆ° ES2025ï¼šä½ è¿˜è·Ÿå¾—ä¸Šå—]]></title>    <link>https://juejin.cn/post/7605625595570552847</link>    <guid>https://juejin.cn/post/7605625595570552847</guid>    <pubDate>2026-02-13T02:52:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605625595570552847" data-draft-id="7531888107878006819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» ES2015 åˆ° ES2025ï¼šä½ è¿˜è·Ÿå¾—ä¸Šå—"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-13T02:52:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º"/> <meta itemprop="url" content="https://juejin.cn/user/976022056218471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» ES2015 åˆ° ES2025ï¼šä½ è¿˜è·Ÿå¾—ä¸Šå—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022056218471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:52:06.000Z" title="Fri Feb 13 2026 02:52:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ES6 æ˜¯ 2015 å¹´å‘å¸ƒçš„ã€‚<br/>
è·ç¦»ç°åœ¨ï¼Œå·²ç»è¿‡å»æ•´æ•´åå¹´ã€‚</p>
<p>è¿™åå¹´é‡Œï¼ŒJavaScript æ¯ä¸€å¹´éƒ½åœ¨è¿›åŒ–ã€‚<br/>
æ–°è¯­æ³•ã€æ–° APIã€æ–°å¹¶å‘æ¨¡å‹ã€æ–°æ•°æ®ç»“æ„â€¦â€¦</p>
<p>å¯å¤§å¤šæ•°äººï¼Œå¯¹ JavaScript çš„è®¤çŸ¥ï¼Œä»åœç•™åœ¨ï¼š</p>
<ul>
<li>ç®­å¤´å‡½æ•°</li>
<li>è§£æ„èµ‹å€¼</li>
<li>Promise</li>
<li>let / const</li>
</ul>
<p>ä» ES2016 åˆ° ES2025ï¼Œä½ çœŸçš„è·Ÿä¸Šäº†å—ï¼Ÿ</p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä¼šæŒ‰æ—¶é—´çº¿å¸¦ä½ ç³»ç»Ÿæ¢³ç† JavaScript åå¹´çš„æ¼”è¿›è½¨è¿¹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ES2016 â†’ ES2020</h2>
<p>è¿™5å¹´æ–°å‡ºçš„ç‰¹æ€§æˆ‘æƒ³å¤§å¤šæ•°äººéƒ½å·²ç»ç†Ÿç»ƒä½¿ç”¨äº†ï¼Œè¿™é‡Œå°±ç®€å•åˆ—ä¸‹ï¼Œä¸è¯¦ç»†ä»‹ç»apiç»†èŠ‚äº†</p>
<h3 data-id="heading-1">ES2016</h3>
<p>è¿™æ˜¯ä¸€ä¸ªå°ç‰ˆæœ¬,ä¸»è¦æœ‰ä»¥ä¸‹3ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li><strong><code>Array.prototype.includes()</code></strong></li>
<li><strong>æŒ‡æ•°è¿ç®—ç¬¦ (<code>**</code>)</strong>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">2</span> ** <span class="hljs-number">3</span>; <span class="hljs-comment">// 8</span>
</code></pre>
</li>
<li><strong>å¹‚èµ‹å€¼è¿ç®—ç¬¦<code>**=</code></strong>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> num = <span class="hljs-number">2</span>; 
num **= <span class="hljs-number">3</span>; <span class="hljs-comment">// num = num ** 3 </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 8</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-2">ES2017</h3>
<p>ES2017çš„é‡ç‚¹æ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼Œå¯¹è±¡æ“ä½œ</p>
<ul>
<li><strong>async/await</strong></li>
<li><strong>Object.values()/Object.entries()</strong></li>
<li><strong>Object.getOwnPropertyDescriptors()</strong>: è¿”å›å¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§çš„æè¿°ç¬¦å¯¹è±¡</li>
<li><strong>å­—ç¬¦ä¸²å¡«å……String Padding</strong></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'5'</span>.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">3</span>, <span class="hljs-string">'0'</span>)); <span class="hljs-comment">// '005' </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello'</span>.<span class="hljs-title function_">padEnd</span>(<span class="hljs-number">10</span>, <span class="hljs-string">'*'</span>)); <span class="hljs-comment">// 'hello*****'</span>
</code></pre>
<ul>
<li>
<p><strong>SharedArrayBuffer å’Œ Atomics</strong></p>
<p>è¿™ä¸¤ä¸ªç”¨åœ¨web workerä¸­ã€‚ä¸»çº¿ç¨‹å’Œworkerä½¿ç”¨postMessageé€šä¿¡å¾€å¾€è¦å°†æ•°æ®æ‹·è´ä¸€ä»½ï¼ŒSharedArrayBuffer åˆ™å…è®¸ Worker çº¿ç¨‹ä¸ä¸»çº¿ç¨‹å…±äº«åŒä¸€å—å†…å­˜ï¼Œé€šè¿‡Â <code>postMessage</code>Â å°†Â <code>SharedArrayBuffer</code>Â è½¬ç§»ç»™ Workerï¼Œä¸ä¼šå¤åˆ¶æ•°æ®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// main.js</span>
 <span class="hljs-keyword">const</span> sab = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedArrayBuffer</span>(<span class="hljs-number">1024</span>);
 <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'worker.js'</span>);
 worker.<span class="hljs-title function_">postMessage</span>(sab); <span class="hljs-comment">//ä¸å¤åˆ¶æ•°æ®</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// worker.js</span>
 self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
   <span class="hljs-keyword">const</span> sab = e.<span class="hljs-property">data</span>; <span class="hljs-comment">// åŒä¸€ä¸ªå†…å­˜å—</span>
 };
</code></pre>
</li>
</ul>
<p>è®¡ç®—æœºä¸­å†™æ“ä½œå¯èƒ½è¢«ç¼–è¯‘æˆå¤šæ¡æŒ‡ä»¤ï¼Œå¦‚æœå°šæœªå†™å®Œå°±æœ‰å…¶ä»–çº¿ç¨‹è¯»æ•°æ®ï¼Œä¾¿ä¼šäº§ç”Ÿé”™è¯¯ã€‚åœ¨å¤šçº¿ç¨‹æ“ä½œSharedArrayBufferæ—¶å°±å¯èƒ½ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚Atomicsæä¾›äº†åŸå­çº§æ“ä½œï¼Œå…¶ä»–çº¿ç¨‹è¯»å–åˆ°çš„æ•°æ®ï¼Œè¦ä¹ˆæ˜¯æ²¡å†™å…¥çš„ï¼Œè¦ä¹ˆæ˜¯å·²å†™å®Œçš„ã€‚å¦å¤–Atomicsè¿˜æä¾›äº†çº¿ç¨‹çš„é˜»å¡å’Œå”¤é†’ã€‚</p>
<h3 data-id="heading-3">ES2018</h3>
<p>ES2018æ–°å¢äº†å¤šä¸ªç‰¹æ€§ï¼Œç®—æ˜¯ä¸€æ¬¡ä¸­ç­‰è§„æ¨¡å‡çº§ï¼Œä¸»è¦æœ‰å¼‚æ­¥ç¼–ç¨‹çš„å¢å¼ºã€å¯¹è±¡å’Œæ•°ç»„æ“ä½œçš„æ”¹è¿›ã€æ­£åˆ™è¡¨è¾¾å¼çš„æ‰©å±•ï¼Œä»¥åŠæ¨¡æ¿å­—é¢é‡çš„ä¼˜åŒ–ã€‚</p>
<ul>
<li><strong>å¼‚æ­¥ç”Ÿæˆå™¨/å¼‚æ­¥è¿­ä»£å™¨</strong></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* <span class="hljs-title function_">fetchPages</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> page = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">while</span> (page &lt;= <span class="hljs-number">3</span>) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://api.example.com/page/<span class="hljs-subst">${page}</span>`</span>);
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
    page++;
  }
}

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> data <span class="hljs-keyword">of</span> <span class="hljs-title function_">fetchPages</span>()) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
  }
})();
</code></pre>
<ul>
<li><strong><code>Promise.prototype.finally()</code></strong></li>
<li><strong>rest/spreatæ“ä½œç¬¦<code>...</code></strong></li>
<li><strong>æ­£åˆ™è¡¨è¾¾å¼å¢å¼ºï¼ˆåè¡Œæ–­è¨€ï¼Œå‘½åæ•è·ç­‰ï¼‰</strong></li>
<li><strong>æ¨¡æ¿å­—ç¬¦ä¸²çš„æ ‡ç­¾æ¨¡æ¿æä¾›rawè®¿é—®åŸå§‹å­—ç¬¦ä¸²</strong></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">tag</span>(<span class="hljs-params">strings</span>) { 
    <span class="hljs-keyword">return</span> strings.<span class="hljs-property">raw</span>[<span class="hljs-number">0</span>]; <span class="hljs-comment">// è®¿é—®åŸå§‹å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬éæ³•è½¬ä¹‰ï¼Œæ¯”å¦‚LaTeXè¯­æ³•</span>
} 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(tag<span class="hljs-string">`\u{00000042}`</span>); <span class="hljs-comment">// strings[0]æ˜¯'B' strings.raw[0]ä¸º\u{00000042}</span>
</code></pre>
<h3 data-id="heading-4">ES2019</h3>
<p>è¯¥ç‰ˆæœ¬å†…å®¹ä¸å¤šä½†å¾ˆå®ç”¨</p>
<ul>
<li><strong>Array.prototype.flat() / flatMap()</strong></li>
<li><strong><code>Object.fromEntries()</code></strong></li>
<li><strong>String.trimStart() / trimEnd()</strong></li>
<li><strong>Optional catch binding</strong>: <code>catch</code> å¯çœç•¥é”™è¯¯å‚æ•°</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">try</span> {
  <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">'invalid json'</span>);
} <span class="hljs-keyword">catch</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Parsing failed'</span>); <span class="hljs-comment">// æ— éœ€æœªä½¿ç”¨çš„ error å˜é‡</span>
}
</code></pre>
<ul>
<li><strong>Symbol.description</strong></li>
<li><strong>Function.prototype.toString()èƒ½è¿”å›å‡½æ•°ç²¾ç¡®æºç ï¼ŒåŒ…æ‹¬æ³¨é‡Šå’Œç©ºæ ¼ï¼Œæ–¹ä¾¿è°ƒè¯•</strong></li>
<li><strong>ç¨³å®šçš„ Array.prototype.sort()</strong></li>
</ul>
<h3 data-id="heading-5">ES2020</h3>
<p>è¿™ä¸ªç‰ˆæœ¬ä¹Ÿæ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œæ›´æ–°äº†å¤§é‡å†…å®¹ï¼Œè€Œä¸”éƒ½å¾ˆå®ç”¨</p>
<ul>
<li><strong>BigInt</strong></li>
<li><strong>Dynamic Import <code>import()</code></strong></li>
<li><strong>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦<code>??</code></strong></li>
<li><strong>å¯é€‰é“¾è¿ç®—ç¬¦<code>?.</code></strong></li>
<li><strong>Promise.allSettled()</strong></li>
<li><strong>String.prototype.matchAll()</strong></li>
<li><strong>æ ‡å‡†å…¨å±€å¯¹è±¡globalThis</strong></li>
<li><strong>æ¨¡å—å‘½åç©ºé—´å¯¼å‡ºï¼ˆexport * as ns from 'mod'ï¼‰</strong></li>
<li><strong>for-in æšä¸¾é¡ºåºä¸å®šä¹‰é¡ºåºä¸€è‡´</strong></li>
</ul>
<hr/>
<p>ä»ES2021å¼€å§‹æ–°å¢çš„ç‰¹æ€§ï¼Œåœ¨æˆ‘æ—¥å¸¸code reviewä¸­çœ‹åˆ°çš„è¶Šæ¥è¶Šå°‘äº†ï¼Œä½†å¾ˆå¤šç‰¹æ€§è¿˜æ˜¯å¾ˆå®ç”¨çš„ã€‚</p>
<h2 data-id="heading-6">ES2021</h2>
<h3 data-id="heading-7">String.prototype.replaceAll()</h3>
<p>åœ¨æ­¤ä¹‹å‰å…¨å±€æ›¿æ¢éœ€è¦ç”¨æ­£åˆ™/gæ ‡å¿—</p>
<h3 data-id="heading-8">é€»è¾‘èµ‹å€¼è¿ç®—ç¬¦ (<code>&amp;&amp;=</code>, <code>||=</code>, <code>??=</code>)</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>;
x ||= <span class="hljs-number">10</span>; <span class="hljs-comment">// x = 10ï¼ˆå› ä¸º 0 æ˜¯ falsyï¼‰</span>

<span class="hljs-keyword">let</span> y = <span class="hljs-number">5</span>;
y &amp;&amp;= <span class="hljs-number">20</span>; <span class="hljs-comment">// y = 20ï¼ˆå› ä¸º 5 æ˜¯ truthyï¼‰</span>

<span class="hljs-keyword">let</span> z;
z ??= <span class="hljs-string">'default'</span>; <span class="hljs-comment">// z = 'default'ï¼ˆå› ä¸º undefined æ˜¯ nullishï¼‰</span>
</code></pre>
<h3 data-id="heading-9">æ•°å­—åˆ†éš”ç¬¦(<code>1_000_000</code>)</h3>
<p>å…è®¸åœ¨æ•°å­—å­—é¢é‡ä¸­ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ä½œä¸ºåˆ†éš”ç¬¦ï¼Œæé«˜å¤§æ•°å­—çš„å¯è¯»æ€§ã€‚</p>
<h3 data-id="heading-10">Promise.any()</h3>
<p>è¿”å›ä¸€ä¸ª Promiseï¼Œåœ¨ä»»æ„ä¸€ä¸ªè¾“å…¥ Promise resolved æ—¶è§£å†³ï¼›å¦‚æœæ‰€æœ‰ rejectedï¼Œåˆ™è¿”å› AggregateErrorã€‚</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼šPromise.any(iterable)</p>
<ul>
<li>iterableï¼šPromise æ•°ç»„æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> promises = [
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'Error 1'</span>),
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Success'</span>),
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'Error 2'</span>)
];
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">any</span>(promises)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)) <span class="hljs-comment">// 'Success'ï¼ˆç¬¬ä¸€ä¸ª resolvedï¼‰</span>
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error)); <span class="hljs-comment">// å¦‚æœå…¨ rejectï¼šAggregateError</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-11">WeakRefså’ŒFinalizersRegistry:</h3>
<ul>
<li>WeakRefs ç”¨äºå¼•ç”¨å¯¹è±¡è€Œä¸é˜»æ­¢åƒåœ¾å›æ”¶</li>
<li>FinalizersRegistry ç”¨äºç¼“å­˜æˆ–è§‚å¯Ÿå¯¹è±¡ï¼Œè€Œä¸å¹²æ‰°å†…å­˜ç®¡ç†ï¼›FinalizationRegistry æä¾›æ¸…ç†å›è°ƒï¼Œä½†ä¸ä¿è¯æ—¶åºã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> obj = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span> };
<span class="hljs-keyword">const</span> weak = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakRef</span>(obj);

<span class="hljs-keyword">const</span> registry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FinalizationRegistry</span>(<span class="hljs-function"><span class="hljs-params">heldValue</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Object with <span class="hljs-subst">${heldValue}</span> cleaned up`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(weak.<span class="hljs-title function_">deref</span>());<span class="hljs-comment">//undefined</span>
});
registry.<span class="hljs-title function_">register</span>(obj, <span class="hljs-string">'Alice'</span>);
obj = <span class="hljs-literal">null</span>; <span class="hljs-comment">// GC æ—¶è°ƒç”¨ callback</span>
</code></pre>
<hr/>
<h2 data-id="heading-12">ES2022</h2>
<h3 data-id="heading-13">Top-level awaitï¼š</h3>
<p>å¯ä»¥ç›´æ¥åœ¨æ¨¡å—æœ€å¤–å±‚ä½¿ç”¨ <code>await</code></p>
<h3 data-id="heading-14">Classçš„ç§æœ‰/é™æ€æˆå‘˜å’Œæ–¹æ³•</h3>
<p>å¢åŠ äº†<code>#</code>æ ‡è¯†ç§æœ‰ï¼Œ<code>static</code>æ ‡è¯†é™æ€ï¼ˆç°åœ¨éƒ½ç”¨tsäº†ï¼Œè¿™ä¸¤ä¸ªç‰¹æ€§å¾ˆå°‘ç”¨åˆ°ï¼‰</p>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> {
  #value = <span class="hljs-number">0</span>;

  #<span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.#value++;
  }

  get #<span class="hljs-title function_">count</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#value;
  }

  <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.#<span class="hljs-title function_">increment</span>();
  }

  <span class="hljs-title function_">getValue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#count;
  }
}

<span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Counter</span>();
c.<span class="hljs-title function_">add</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-title function_">getValue</span>()); <span class="hljs-comment">// 1</span>
<span class="hljs-comment">// c.#increment(); // SyntaxError,ä¸è¿‡æ§åˆ¶å°è®¿é—®ä¸ä¼šæŠ¥é”™</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MathUtils</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-number">3.14159</span>;
  <span class="hljs-keyword">static</span> #secret = <span class="hljs-number">42</span>;

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getPi</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">PI</span>;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getSecret</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#secret;
  }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">MathUtils</span>.<span class="hljs-property">PI</span>); <span class="hljs-comment">// 3.14159</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">MathUtils</span>.<span class="hljs-title function_">getSecret</span>()); <span class="hljs-comment">// 42</span>
</code></pre>
<h3 data-id="heading-15">Error.cause:</h3>
<p>åœ¨ Error å¯¹è±¡ä¸­æ·»åŠ  cause å±æ€§ï¼Œç”¨äºé“¾å¼è®°å½•é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</p>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Original issue'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Failed operation'</span>, { <span class="hljs-attr">cause</span>: err });
}
<span class="hljs-comment">// ç»“æœé”™è¯¯ï¼šFailed operation (cause: Original issue)</span>
</code></pre>
<h3 data-id="heading-16">atæ–¹æ³•:</h3>
<p>æ–°å¢è®¿é—®ç´¢å¼•æ–¹æ³•ï¼Œå¯ç”¨äºæ•°ç»„ã€å­—ç¬¦ä¸²å’Œ TypedArray</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">at</span>(<span class="hljs-number">1</span>)); <span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">at</span>(-<span class="hljs-number">1</span>)); <span class="hljs-comment">// 3ï¼ˆæœ€åä¸€ä¸ªå…ƒç´ ï¼ŒæåŠ›æ¨èè¿™ç§å†™æ³•ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello'</span>.<span class="hljs-title function_">at</span>(-<span class="hljs-number">2</span>)); <span class="hljs-comment">// 'l'</span>
</code></pre>
<h3 data-id="heading-17">Object.hasOwn()ï¼š</h3>
<p>ä»£æ›¿Object.prototype.hasOwnProperty.call()</p>
<h3 data-id="heading-18">æ­£åˆ™è¡¨è¾¾å¼çš„/dæ ‡å¿—ï¼š</h3>
<p>å¯ç”¨/dæ ‡å¿—è·å–åŒ¹é…èŒƒå›´</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-keyword">const</span> match = <span class="hljs-string">'hello world'</span>.<span class="hljs-title function_">matchAll</span>(<span class="hljs-regexp">/(hello)/</span>dg);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> m <span class="hljs-keyword">of</span> match) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(m.<span class="hljs-property">indices</span>[<span class="hljs-number">0</span>]); <span class="hljs-comment">// [0, 5] å¯¹äº 'hello'</span>
    }
</code></pre>
<hr/>
<h2 data-id="heading-19">ES2023</h2>
<h3 data-id="heading-20">Array å’Œ TypedArrayçš„æœ«å°¾æŸ¥æ‰¾</h3>
<p>æ–°å¢findLast() / findLastIndex()</p>
<h3 data-id="heading-21">é€šè¿‡æ‹·è´ä¿®æ”¹æ•°ç»„(ä¸æ”¹å˜åŸæ•°ç»„)</h3>
<p>æ–°å¢ toSorted() / toReversed() / toSpliced() / with()</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<ul>
<li>array.toReversed()ï¼šè¿”å›åè½¬æ‹·è´ã€‚</li>
<li>array.toSorted(compareFn)ï¼šè¿”å›æ’åºæ‹·è´ã€‚</li>
<li>array.toSpliced(start, deleteCount, ...items)ï¼šè¿”å›æ‹¼æ¥æ‹·è´ã€‚</li>
<li>array.with(index, value)ï¼šè¿”å›æ›¿æ¢æŒ‡å®šç´¢å¼•å€¼çš„æ‹·è´ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">toSorted</span>()); <span class="hljs-comment">// [1, 2, 3]ï¼ˆåŸ arr ä¸å˜ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">toReversed</span>()); <span class="hljs-comment">// [2, 3, 1]</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">toSpliced</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>)); <span class="hljs-comment">// [1, 4, 2]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">with</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// [5, 3, 2]</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-22">Hashbang è¯­æ³•</h3>
<p>å…è®¸åœ¨ ECMAScript æ–‡ä»¶å¼€å¤´ä½¿ç”¨ #!ï¼ˆshebangï¼‰æ³¨é‡Šï¼ŒæŒ‡ç¤ºè§£é‡Šå™¨æ‰§è¡Œè„šæœ¬ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-meta">#!/usr/bin/env node</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hello from Node.js'</span>);
</code></pre>
<h3 data-id="heading-23">å…è®¸ <strong>Symbols</strong> ç”¨ä½œ WeakMapã€WeakSet çš„é”®</h3>
<p>æ­¤å‰keyä»…æ”¯æŒå¯¹è±¡</p>
<hr/>
<h2 data-id="heading-24">ES2024</h2>
<h3 data-id="heading-25">Promise.withResolvers()</h3>
<p>åŒæ—¶åˆ›å»º Promise åŠå…¶ resolve å’Œ reject å‡½æ•°ï¼Œä¾¿äºæ‰‹åŠ¨æ§åˆ¶ Promise çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { promise, resolve, reject } = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">withResolvers</span>();

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Success'</span>), <span class="hljs-number">1000</span>);

promise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)); <span class="hljs-comment">// 'Success'</span>
</code></pre>
<h3 data-id="heading-26">Object.groupBy() å’Œ Map.groupBy()</h3>
<p>é™æ€æ–¹æ³•ï¼Œç”¨äºæ ¹æ®å›è°ƒå‡½æ•°è¿”å›çš„å€¼å¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œåˆ†ç»„ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆObject.groupByï¼‰æˆ– Mapï¼ˆMap.groupByï¼‰ã€‚</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<ul>
<li>Object.groupBy(iterable, callback)</li>
<li>Map.groupBy(iterable, callback)</li>
</ul>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> items = [
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'apple'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'fruit'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'carrot'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'vegetable'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'banana'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'fruit'</span> }
];

<span class="hljs-keyword">const</span> grouped = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">groupBy</span>(items, <span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">type</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(grouped); <span class="hljs-comment">// { fruit: [{...}, {...}], vegetable: [{...}] }</span>

<span class="hljs-keyword">const</span> groupedMap = <span class="hljs-title class_">Map</span>.<span class="hljs-title function_">groupBy</span>(items, <span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">type</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(groupedMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">'fruit'</span>)); <span class="hljs-comment">// [{...}, {...}]</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-27">æ­£åˆ™è¡¨è¾¾å¼/væ ‡å¿—</h3>
<p>æ–°æ ‡å¿— /v å¯ç”¨ Unicode é›†æ¨¡å¼ï¼Œæ”¯æŒå±æ€§çš„ç»„åˆã€èŒƒå›´ã€å¦å®šã€äº¤é›† / å¹¶é›†è¿ç®—</p>
<p>åœ¨ <code>/v</code> æ ‡å¿—å‡ºç°å‰ï¼ŒJS æ­£åˆ™æœ‰ <code>/u</code> æ ‡å¿—æ”¯æŒ<strong>åŸºç¡€ Unicode å±æ€§è½¬ä¹‰</strong>ï¼ˆå¦‚ <code>\p{Letter}</code> åŒ¹é…å­—æ¯ï¼‰ï¼Œä½†åªèƒ½åŒ¹é… â€œå•ä¸€å±æ€§â€ï¼Œæ— æ³•ç›´æ¥è¡¨è¾¾ â€œå±æ€§çš„ç»„åˆ / èŒƒå›´ / å¦å®šâ€ï¼Œè€Œ <code>/v</code> æ ‡å¿—æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæä¾›<strong>æ‰©å±• Unicode å±æ€§è½¬ä¹‰</strong>èƒ½åŠ›ã€‚</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼š/pattern/v</p>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/[\p{Emoji}&amp;&amp;\p{Emoji_Presentation}]/</span>v;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(regex.<span class="hljs-title function_">test</span>(<span class="hljs-string">'ğŸ˜€'</span>)); <span class="hljs-comment">// trueï¼ˆEmojiï¼‰</span>

<span class="hljs-comment">// é›†æ“ä½œç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> setDiff = <span class="hljs-regexp">/[a-z--[aeiou]]/</span>v; <span class="hljs-comment">// è¾…éŸ³</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(setDiff.<span class="hljs-title function_">test</span>(<span class="hljs-string">'b'</span>)); <span class="hljs-comment">// true</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-28">Atomics.waitAsync()</h3>
<p>å…±äº«å†…å­˜çš„å¼‚æ­¥ç­‰å¾…æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª Promiseï¼Œåœ¨å…±äº«å€¼å˜åŒ–æ—¶è§£å†³ã€‚</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼šAtomics.waitAsync(array, index, value, timeout)</p>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> sab = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedArrayBuffer</span>(<span class="hljs-number">16</span>);
<span class="hljs-keyword">const</span> int32 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Int32Array</span>(sab);

<span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Atomics</span>.<span class="hljs-title function_">waitAsync</span>(int32, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
result.<span class="hljs-property">value</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Woken up'</span>));
<span class="hljs-comment">// å…¶ä»–çº¿ç¨‹ï¼šAtomics.store(int32, 0, 1); Atomics.notify(int32, 0);</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-29">ArrayBuffer å’Œ SharedArrayBuffer çš„resizeå’Œtransfer</h3>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<ul>
<li>buffer.resize(newLength)</li>
<li>buffer.transfer(newLength)ï¼šè¿”å›æ–°ç¼“å†²åŒºï¼Œæ—§çš„è¢«åˆ†ç¦»ã€‚</li>
<li>ç±»ä¼¼æ–¹æ³•å¯ç”¨äº SharedArrayBufferã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>, { <span class="hljs-attr">maxByteLength</span>: <span class="hljs-number">16</span> });
buffer.<span class="hljs-title function_">resize</span>(<span class="hljs-number">16</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buffer.<span class="hljs-property">byteLength</span>); <span class="hljs-comment">// 16</span>

<span class="hljs-keyword">const</span> transferred = buffer.<span class="hljs-title function_">transfer</span>();
<span class="hljs-comment">// åŸ buffer è¢«åˆ†ç¦»ï¼Œæ— æ³•ä½¿ç”¨</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-30">String.prototype.isWellFormed() å’Œ toWellFormed()</h3>
<p>è¿™ä¸¤ä¸ªapiç”¨äº"<strong>æ ¼å¼ä¸è‰¯</strong>"å­—ç¬¦ä¸².</p>
<p>JavaScript å­—ç¬¦ä¸²åŸºäº UTF-16 ç¼–ç ï¼Œå…¶ä¸­<strong>å•ç‹¬çš„ä»£ç†å¯¹å­—ç¬¦ï¼ˆæœªé…å¯¹çš„é«˜ / ä½ä»£ç†é¡¹ï¼‰</strong> å±äº â€œæ ¼å¼ä¸è‰¯â€ çš„å­—ç¬¦ä¸²ï¼ˆä¹Ÿå« â€œç•¸å½¢ UTF-16 å­—ç¬¦ä¸²â€ï¼‰ã€‚</p>
<p>é«˜ä»£ç†é¡¹èŒƒå›´ï¼š<code>0xD800</code> - <code>0xDBFF</code></p>
<p>ä½ä»£ç†é¡¹èŒƒå›´ï¼š<code>0xDC00</code> - <code>0xDFFF</code>åªæœ‰é«˜ + ä½ä»£ç†é¡¹é…å¯¹æ‰æ˜¯åˆæ³•çš„ UTF-16 å­—ç¬¦ï¼Œå•ç‹¬å‡ºç°å…¶ä¸­ä¸€ä¸ªå°±æ˜¯ â€œæ ¼å¼ä¸è‰¯â€ã€‚</p>
<pre><code class="hljs language-js" lang="js">   <span class="hljs-comment">// 1. æ ¼å¼è‰¯å¥½çš„å­—ç¬¦ä¸²ï¼ˆæ­£å¸¸å­—ç¬¦ã€åˆæ³•ä»£ç†å¯¹ï¼‰</span>
   <span class="hljs-keyword">const</span> validStr1 = <span class="hljs-string">'Hello ä¸–ç•Œ'</span>;
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(validStr1.<span class="hljs-title function_">isWellFormed</span>()); <span class="hljs-comment">// true</span>

   <span class="hljs-keyword">const</span> validStr2 = <span class="hljs-string">'\uD83D\uDE00'</span>; <span class="hljs-comment">// ğŸ˜€ï¼ˆåˆæ³•çš„é«˜+ä½ä»£ç†å¯¹ï¼‰</span>
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(validStr2.<span class="hljs-title function_">isWellFormed</span>()); <span class="hljs-comment">// true</span>

   <span class="hljs-comment">// 2. æ ¼å¼ä¸è‰¯çš„å­—ç¬¦ä¸²ï¼ˆå•ç‹¬çš„é«˜ä»£ç†é¡¹/ä½ä»£ç†é¡¹ï¼‰</span>
   <span class="hljs-keyword">const</span> invalidStr1 = <span class="hljs-string">'\uD83D'</span>; <span class="hljs-comment">// å•ç‹¬çš„é«˜ä»£ç†é¡¹ï¼ˆæ— å¯¹åº”ä½ä»£ç†é¡¹ï¼‰</span>
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(invalidStr1.<span class="hljs-title function_">isWellFormed</span>()); <span class="hljs-comment">// false</span>

   <span class="hljs-keyword">const</span> invalidStr2 = <span class="hljs-string">'æµ‹è¯•\uDC00'</span>; <span class="hljs-comment">// å•ç‹¬çš„ä½ä»£ç†é¡¹ï¼ˆæ— å¯¹åº”é«˜ä»£ç†é¡¹ï¼‰</span>
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(invalidStr2.<span class="hljs-title function_">isWellFormed</span>()); <span class="hljs-comment">// false</span>

   <span class="hljs-comment">// 3. æ ¼å¼è‰¯å¥½çš„å­—ç¬¦ä¸²ï¼šè¿”å›åŸå­—ç¬¦ä¸²å‰¯æœ¬</span>
   <span class="hljs-keyword">const</span> validStr = <span class="hljs-string">'Hello ğŸ˜€'</span>;
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(validStr.<span class="hljs-title function_">toWellFormed</span>()); <span class="hljs-comment">// Hello ğŸ˜€</span>
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(validStr.<span class="hljs-title function_">toWellFormed</span>() === validStr); <span class="hljs-comment">// trueï¼ˆå†…å®¹ç›¸åŒï¼Œå¼•ç”¨ä¸åŒï¼‰</span>

   <span class="hljs-comment">// 4. æ ¼å¼ä¸è‰¯çš„å­—ç¬¦ä¸²ï¼šæ›¿æ¢æœªé…å¯¹ä»£ç†é¡¹ä¸º ï¿½</span>
   <span class="hljs-keyword">const</span> invalidStr1 = <span class="hljs-string">'\uD83D'</span>; <span class="hljs-comment">// å•ç‹¬é«˜ä»£ç†é¡¹</span>
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(invalidStr1.<span class="hljs-title function_">toWellFormed</span>()); <span class="hljs-comment">// ï¿½</span>
</code></pre>
<hr/>
<h2 data-id="heading-31">ES2025</h2>
<h3 data-id="heading-32">è¿­ä»£å™¨åŠ©æ‰‹æ–¹æ³•ï¼ˆIterator Helpersï¼‰</h3>
<p>å¼•å…¥ Iterator å…¨å±€å¯¹è±¡åŠå…¶åŸå‹æ–¹æ³•ï¼Œæ”¯æŒå¯¹ä»»ä½•å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚ Arrayã€Setã€Mapï¼‰è¿›è¡Œå‡½æ•°å¼æ“ä½œï¼Œå¦‚ mapã€filter ç­‰ã€‚è¿™äº›æ–¹æ³•è¿”å›æ–°çš„è¿­ä»£å™¨ï¼Œæ”¯æŒæƒ°æ€§æ±‚å€¼ã€‚</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼šIterator.from(iterable).method(callback)</p>
<ul>
<li>æ”¯æŒæ–¹æ³•ï¼šmap()ã€filter()ã€reduce()ã€take()ã€drop()ã€flatMap()ã€toArray()ã€forEach() ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];
<span class="hljs-keyword">const</span> evenSquares = <span class="hljs-title class_">Iterator</span>.<span class="hljs-title function_">from</span>(arr)
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x ** <span class="hljs-number">2</span>)
  .<span class="hljs-title function_">toArray</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(evenSquares); <span class="hljs-comment">// [4, 16]</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-33">Setæ–°å¢æ–¹æ³•</h3>
<p>ä¸º Set.prototype æ·»åŠ æ•°å­¦é›†åˆæ“ä½œæ–¹æ³•ï¼Œæ”¯æŒé›†åˆçš„å¹¶é›†ã€äº¤é›†ã€å·®é›†ç­‰ã€‚</p>
<ul>
<li>
<p><strong>æ–°å¢æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>set.union(other) å¹¶é›†</li>
<li>set.intersection(other) äº¤é›†</li>
<li>set.difference(other) å·®é›†</li>
<li>set.symmetricDifference(other) å¯¹ç§°å·®é›†ï¼ˆå¹¶é›†å‡äº¤é›†ï¼‰</li>
<li>set.isSubsetOf(other) å­é›†</li>
<li>set.isSupersetOf(other) è¶…é›†</li>
<li>set.isDisjointFrom(other) ä¸ç›¸äº¤</li>
</ul>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> setA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
<span class="hljs-keyword">const</span> setB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(setA.<span class="hljs-title function_">union</span>(setB)); <span class="hljs-comment">// Set {1, 2, 3, 4}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(setA.<span class="hljs-title function_">intersection</span>(setB)); <span class="hljs-comment">// Set {2, 3}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(setA.<span class="hljs-title function_">isSubsetOf</span>(setB)); <span class="hljs-comment">// false</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-34">ç›´æ¥å¯¼å…¥JSON æ¨¡å—</h3>
<p>å¼•å…¥å¯¼å…¥å±æ€§ï¼ˆwith å…³é”®å­—ï¼‰ï¼Œæ”¯æŒç›´æ¥å¯¼å…¥ JSON æ–‡ä»¶ä½œä¸ºæ¨¡å—ã€‚</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼šimport json from "./data.json" with { type: "json" };</p>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> data <span class="hljs-keyword">from</span> <span class="hljs-string">"./config.json"</span> <span class="hljs-keyword">with</span> { <span class="hljs-attr">type</span>: <span class="hljs-string">"json"</span> };
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data); <span class="hljs-comment">// { key: "value" }</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-35">Promise.try()</h3>
<p>ä¸€ä¸ªæ–°çš„é™æ€æ–¹æ³•ï¼Œç”¨äºåŒ…è£…å‡½æ•°è°ƒç”¨ï¼Œç¡®ä¿è¿”å› Promiseï¼Œæ— è®ºå‡½æ•°æ˜¯å¦å¼‚æ­¥æˆ–æŠ›å‡ºé”™è¯¯ã€‚</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼šPromise.try(callback)</p>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Fail'</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-string">'Success'</span>;
})
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result))
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error));
</code></pre>
</li>
</ul>
<h3 data-id="heading-36">æ–°å¢Float16Array</h3>
<p>å¼•å…¥ Float16Array ç±»å‹æ•°ç»„ï¼Œæ”¯æŒ 16 ä½æµ®ç‚¹æ•°ï¼Œä»¥åŠ DataView çš„ getFloat16/setFloat16 å’Œ Math.f16round()ã€‚</p>
<h3 data-id="heading-37"><strong>RegExp.escape() æ–¹æ³•</strong></h3>
<p>ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºè½¬ä¹‰å­—ç¬¦ä¸²ï¼Œä½¿å…¶å¯å®‰å…¨ç”¨äºæ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼šRegExp.escape(str)</p>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> userInput = <span class="hljs-string">'a.b*c?'</span>;
<span class="hljs-keyword">const</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-title class_">RegExp</span>.<span class="hljs-built_in">escape</span>(userInput), <span class="hljs-string">'g'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'a.b*c?'</span>.<span class="hljs-title function_">replace</span>(regex, <span class="hljs-string">'replaced'</span>)); <span class="hljs-comment">// 'replaced'</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-38">æ­£åˆ™è¡¨è¾¾å¼å†…è”æ ‡å¿—</h3>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼š/(?i:case-insensitive)/</p>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/(?i:hello)/</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(regex.<span class="hljs-title function_">test</span>(<span class="hljs-string">'HELLO'</span>)); <span class="hljs-comment">// trueï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-39">æ­£åˆ™è¡¨è¾¾å¼é‡å¤å‘½åæ•è·ç»„</h3>
<p>å…è®¸åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­é‡å¤ä½¿ç”¨ç›¸åŒçš„å‘½åæ•è·ç»„åç§°ã€‚</p>
<ul>
<li>
<p><strong>è¯­æ³•</strong>ï¼š/(?&lt;group&gt;a)|(?&lt;group&gt;b)/</p>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/(?&lt;year&gt;\d{4})-(?&lt;month&gt;\d{2})|(?&lt;year&gt;\d{4})/</span>(?&lt;month&gt;\d{<span class="hljs-number">2</span>})/;
<span class="hljs-keyword">const</span> match = <span class="hljs-string">'2025-07'</span>.<span class="hljs-title function_">match</span>(regex);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(match.<span class="hljs-property">groups</span>.<span class="hljs-property">year</span>); <span class="hljs-comment">// '2025'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(match.<span class="hljs-property">groups</span>.<span class="hljs-property">month</span>); <span class="hljs-comment">// '07'</span>
</code></pre>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œäº‘ EMR Serverless Spark TPC-DS 100T æ¦œé¦–èƒŒåçš„å†…æ ¸æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7605625595570569231</link>    <guid>https://juejin.cn/post/7605625595570569231</guid>    <pubDate>2026-02-13T02:58:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605625595570569231" data-draft-id="7605810996125040674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œäº‘ EMR Serverless Spark TPC-DS 100T æ¦œé¦–èƒŒåçš„å†…æ ¸æŠ€æœ¯"/> <meta itemprop="keywords" content="Spark"/> <meta itemprop="datePublished" content="2026-02-13T02:58:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œäº‘ EMR Serverless Spark TPC-DS 100T æ¦œé¦–èƒŒåçš„å†…æ ¸æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:58:56.000Z" title="Fri Feb 13 2026 02:58:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¼”è®²è€…ï¼šä¸€é”¤ï¼ˆå‘¨å…‹å‹‡ï¼‰|Â EMRÂ ServerlessÂ SparkÂ æŠ€æœ¯è´Ÿè´£äºº</strong></p>
<p>2025å¹´9æœˆï¼Œé˜¿é‡Œäº‘EMRÂ ServerlessÂ SparkÂ ä»¥QphDSè¶…6568ä¸‡åˆ†çš„æ€§èƒ½ç»“æœæˆåŠŸç™»é¡¶TPC-DSÂ 100Tæ¦œå•ï¼Œè¿™æ˜¯å…¨çƒå¤§æ•°æ®é¢†åŸŸæœ€å…·æƒå¨æ€§å’ŒæŒ‘æˆ˜æ€§çš„æ€§èƒ½æµ‹è¯•åŸºå‡†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3eb2cd73c7124e6a89fc9b0160f31bfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556335&amp;x-signature=HfRyscQ87tgbekZjyGJHbRlTa38%3D" alt="image (39).png" loading="lazy"/></p>
<p>é˜¿é‡Œäº‘EMRÂ ServerlessÂ SparkÂ TPC-DSÂ 100TÂ æ€§èƒ½æµ‹è¯•ç»“æœ</p>
<blockquote>
<p>TPC-DSÂ Benchmarkæ˜¯æ•°æ®ä»“åº“é¢†åŸŸæœ€æ–°å’Œæœ€å¤æ‚çš„æƒå¨æµ‹è¯•æ ‡å‡†ï¼Œè¢«å·¥ä¸šç•Œå’Œå­¦æœ¯ç•Œå¹¿æ³›è®¤å¯ï¼Œä¹Ÿæ˜¯æ•°æ®ä»“åº“é€‰å‹çš„é‡è¦å‚è€ƒæŒ‡æ ‡ã€‚TPC-DSåŒ…å«99ä¸ªæŸ¥è¯¢ï¼Œä»ç®€å•çš„å…¨å±€èšåˆåˆ°å¤æ‚çš„20ä»¥ä¸Šå¤šè¡¨è¿æ¥ï¼Œä½“ç°äº†çœŸå®åˆ†æåœºæ™¯æ—¥ç›Šå¢é•¿çš„å¤æ‚åº¦ã€‚å…¶ä¸­ï¼Œ100Tæ˜¯TPC-DSæä¾›çš„æœ€å¤§æµ‹è¯•æ•°æ®é›†ï¼Œæœ€å¤§è¡¨æœ‰288,017,344,252ï¼ˆ2880äº¿ï¼‰æ¡æ•°æ®ï¼Œè¿„ä»Šä¸ºæ­¢åªæœ‰é˜¿é‡Œäº‘EMRå’ŒDatabricksæˆåŠŸé€šè¿‡äº†è¯¥æ¦œå•çš„å®˜æ–¹è¯„å®¡ã€‚</p>
</blockquote>
<p>é˜¿é‡Œäº‘Â EMRÂ ServerlessÂ Sparkå®ç°äº†Â <strong>æ€§èƒ½æå‡100%</strong>ã€<strong>æ€§ä»·æ¯”æå‡500%</strong>Â çš„çªç ´ï¼Œè¯æ˜äº†EMRÂ ServerlessÂ SparkÂ åœ¨Â OpenLakeæ¹–ä»“åº•åº§æ¶æ„ä¸‹ï¼Œè¶…å¤§è§„æ¨¡ã€è¶…é«˜å¤æ‚åº¦çš„æ•°æ®åˆ†æã€æ•°æ®æ›´æ–°ã€æ•°æ®å¤„ç†çš„å¸‚åœºé¢†å…ˆèƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/756e5be154054086b51e6099ab1209cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556335&amp;x-signature=MNAR%2BIQHew0X9fCxwpoozlJQ%2FTs%3D" alt="image (40).png" loading="lazy"/></p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–ææ”¯æ’‘è¿™ä¸€æˆç»©èƒŒåçš„æŠ€æœ¯å†…æ ¸ï¼Œä»äº§å“å®šä½ã€æ¶æ„è®¾è®¡åˆ°æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥ï¼Œå…¨é¢è§£è¯»Â EMRÂ ServerlessÂ SparkÂ å¦‚ä½•å®ç°â€œé«˜æ€§èƒ½ã€ä½æˆæœ¬ã€é«˜å¼¹æ€§ã€å¼ºå…¼å®¹â€çš„ç»Ÿä¸€ã€‚</p>
<h2 data-id="heading-0">äº§å“å®šä½ä¸æ ¸å¿ƒåœºæ™¯</h2>
<p>EMRÂ ServerlessÂ SparkÂ å®šä½ä¸ºæ–°ä¸€ä»£Â <strong>Lakehouseï¼ˆæ¹–ä»“ä¸€ä½“ï¼‰å¹³å°</strong>ï¼Œæ—¨åœ¨èåˆä¼ ç»Ÿæ•°æ®ä»“åº“çš„æè‡´æŸ¥è¯¢æ€§èƒ½ä¸æ•°æ®æ¹–çš„ä½æˆæœ¬ã€å¼€æ”¾æ€§ä¼˜åŠ¿ã€‚</p>
<p>å…¶æ ¸å¿ƒèšç„¦ä¸‰å¤§åœºæ™¯ï¼š</p>
<ol>
<li>
<p><strong>æ¹–ä»“åˆ†æåœºæ™¯</strong>ï¼šä»¥é«˜åº¦ä¼˜åŒ–çš„Â SparkÂ æ›¿ä»£Â HiveÂ æ‰§è¡ŒÂ ETL/ELTÂ ä»»åŠ¡ï¼Œæ›¿ä»£Â Trino/PrestoÂ æä¾›é«˜æ€§ä»·æ¯”äº¤äº’å¼åˆ†æã€‚æ”¯æŒÂ SQLã€DataFrameã€Pandasã€RDDÂ ç­‰å¤šç§æ¥å£ï¼Œå¹¶å…¨é¢å…¼å®¹Â Paimonã€Icebergã€Deltaã€HudiÂ ç­‰ä¸»æµæ¹–è¡¨æ ¼å¼ã€‚</p>
</li>
<li>
<p><strong>æœºå™¨å­¦ä¹ åœºæ™¯</strong>ï¼šä½œä¸ºæˆç†Ÿçš„åˆ†å¸ƒå¼Â MLÂ æ¡†æ¶ï¼ŒSparkÂ æ”¯æŒä»æ•°æ®æ¸…æ´—ã€ç‰¹å¾å·¥ç¨‹åˆ°æ¨¡å‹è®­ç»ƒä¸æ‰¹é‡æ¨ç†çš„å…¨æµç¨‹ã€‚å†…ç½®Â MLlibï¼Œé›†æˆÂ XGBoostã€LightGBMã€scikit-learnÂ ç­‰ç”Ÿæ€å·¥å…·ï¼Œå¹¶æä¾›Â GPUÂ åŠ é€Ÿèƒ½åŠ›ï¼Œå®ç°Â DataÂ +Â AIÂ ä¸€ä½“åŒ–ã€‚</p>
</li>
<li>
<p><strong>å¤šæ¨¡æ€æ•°æ®å¤„ç†åœºæ™¯</strong>ï¼šéšç€å¤§æ¨¡å‹å…´èµ·ï¼ŒPySparkÂ æˆä¸ºå¤„ç†æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘ç­‰éç»“æ„åŒ–æ•°æ®çš„ç†æƒ³é€‰æ‹©ã€‚äº§å“æ¨å‡ºçš„Â <strong>AIÂ Function</strong>Â åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·åœ¨Â SparkÂ ä½œä¸šä¸­ç›´æ¥è°ƒç”¨å¤§æ¨¡å‹ã€‚é’ˆå¯¹åŸºæ¨¡è®­ç»ƒæ•°æ®é¢„å¤„ç†åšäº†ä¸“é—¨ä¼˜åŒ–ï¼Œåœ¨æ–‡æœ¬å»é‡ä»»åŠ¡ä¸­å®ç°Â <strong>5å€æ€§èƒ½æå‡</strong>ã€‚</p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8c52ca3ea5c45d882ab093d2fff3cbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556335&amp;x-signature=MnMc9ThpBU2ygyxe%2BjSLddjizDU%3D" alt="image (41).png" loading="lazy"/></p>
<h2 data-id="heading-1">äº§å“æ¶æ„ä¸æè‡´å¼¹æ€§</h2>
<p>EMRÂ ServerlessÂ SparkÂ é‡‡ç”¨æ ‡å‡†Â LakehouseÂ æ¶æ„ï¼š</p>
<ul>
<li>
<p><strong>å­˜å‚¨å±‚</strong>ï¼šåŸºäºé˜¿é‡Œäº‘Â OSSÂ å¯¹è±¡å­˜å‚¨ä¸Â OSS-HDFSÂ æ¥å£ï¼Œæä¾›é«˜ååã€ä½æˆæœ¬çš„æŒä¹…åŒ–èƒ½åŠ›ï¼›</p>
</li>
<li>
<p><strong>å…ƒæ•°æ®å±‚</strong>ï¼šå…¼å®¹Â HiveÂ Metastoreï¼ˆHMSï¼‰ä¸Â DataÂ LakeÂ Formationï¼ˆDLFï¼‰ï¼Œæ”¯æŒÂ ACIDÂ äº‹åŠ¡ï¼›</p>
</li>
<li>
<p><strong>èµ„æºå±‚</strong>ï¼šä¾æ‰˜é˜¿é‡Œäº‘å…¨Â RegionÂ çš„Â ECSÂ èµ„æºæ± ï¼Œå®ç°è¿‘ä¹æ— é™çš„å¼¹æ€§ä¾›ç»™ï¼›</p>
</li>
<li>
<p><strong>å¼•æ“å±‚</strong>ï¼šæ ¸å¿ƒåˆ›æ–°åŒ…æ‹¬Â <strong>FusionÂ å‘é‡åŒ–æ‰§è¡Œå¼•æ“</strong>Â ä¸Â <strong>CelebornÂ RemoteÂ ShuffleÂ Service</strong>ï¼›</p>
</li>
<li>
<p><strong>äº§å“å±‚</strong>ï¼šæä¾›è®¤è¯é‰´æƒã€å¼€å‘Â IDEã€èµ„æºç›‘æ§ã€æ™ºèƒ½è¯Šæ–­ç­‰ä¼ä¸šçº§åŠŸèƒ½ã€‚</p>
</li>
</ul>
<p><strong>æè‡´å¼¹æ€§</strong>Â æ˜¯å…¶å…³é”®ç«äº‰åŠ›ï¼š</p>
<ul>
<li>
<p>æ”¯æŒÂ <strong>è¿›ç¨‹çº§å¼¹æ€§</strong>ï¼Œæœ€å°èµ„æºå•ä½ä½è‡³Â 1Â Coreï¼›</p>
</li>
<li>
<p>å®¹å™¨å¯åŠ¨æ—¶é—´Â &lt;15Â ç§’ï¼Œä¼šè¯æ¨¡å¼ã€Standaloneæ¨¡å¼ä¸‹å®ç°â€œé›¶å†·å¯â€ï¼›</p>
</li>
<li>
<p>é‡‡ç”¨Â WorkspaceÂ +Â é˜Ÿåˆ—çš„åŒå±‚Â QuotaÂ æœºåˆ¶ï¼Œæ»¡è¶³å¤šç§Ÿæˆ·èµ„æºéš”ç¦»éœ€æ±‚ï¼›</p>
</li>
<li>
<p>å®é™…å®¢æˆ·æ¡ˆä¾‹æ˜¾ç¤ºï¼Œèµ„æºä½¿ç”¨æ³¢åŠ¨å¯ä»æ•°ä¸‡æ ¸éª¤é™è‡³é›¶ï¼ŒServerlessÂ æ¶æ„å¸®åŠ©å®¢æˆ·Â <strong>èŠ‚çœ40%èµ„æºæˆæœ¬</strong>ã€‚</p>
</li>
</ul>
<p>æ­¤å¤–ï¼Œç³»ç»Ÿé»˜è®¤æä¾›Â <strong>è·¨å¯ç”¨åŒºé«˜å¯ç”¨</strong>Â èƒ½åŠ›ï¼ŒSparkÂ æ§åˆ¶é¢ä¸Â CelebornÂ æœåŠ¡å‡å¤šÂ AZÂ éƒ¨ç½²ï¼Œä½œä¸šè‡ªåŠ¨æ•…éšœè¿ç§»ï¼ŒSLAÂ è¾¾Â 99.9%ï¼Œä¸”æ— é¢å¤–è´¹ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39f2773d1eb544b98c9de8cd882866d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556335&amp;x-signature=usLMeRPNtlKnAme5e4khinJ%2B8xE%3D" alt="image (42).png" loading="lazy"/>
EMRÂ ServerlessÂ SparkÂ äº§å“æ¶æ„</p>
<h2 data-id="heading-2">å…¨æ–¹ä½ç”Ÿæ€å…¼å®¹</h2>
<p>EMRÂ ServerlessÂ SparkÂ åšæŒÂ <strong>å¼€æ”¾ç”Ÿæ€ä¼˜å…ˆ</strong>Â çš„è®¾è®¡ç†å¿µï¼š</p>
<ul>
<li>
<p><strong>æ¥å£å…¼å®¹</strong>ï¼šå®Œæ•´æ”¯æŒÂ spark-submitã€spark-sqlã€beelineã€JDBCÂ ç­‰ç»å…¸æ–¹å¼ï¼Œä¹Ÿé›†æˆÂ Kyuubiï¼ˆå«Â HAï¼‰ã€LivyÂ ç­‰äº¤äº’å¼æŸ¥è¯¢æœåŠ¡ï¼›</p>
</li>
<li>
<p><strong>å·¥å…·é“¾é›†æˆ</strong>ï¼šæ— ç¼å¯¹æ¥Â Jupyterã€Zeppelinã€Supersetã€DBTÂ ç­‰ä¸»æµå¼€å‘åˆ†æå·¥å…·ï¼›</p>
</li>
<li>
<p><strong>è°ƒåº¦ç³»ç»Ÿ</strong>ï¼šæ·±åº¦é€‚é…Â Airflowã€DolphinSchedulerï¼Œå¹¶åœ¨é˜¿é‡Œäº‘ç”Ÿæ€å†…ä¸Â <strong>DataWorksÂ åŸç”Ÿé›†æˆ</strong>â€”â€”ä½œä¸ºDataWorksâ€œä¸€ç­‰å…¬æ°‘â€ï¼Œæ”¯æŒÂ SQLÂ èŠ‚ç‚¹ã€Notebookã€å·¥ä½œæµç¼–æ’ã€ç»Ÿä¸€æƒé™ä¸æ•°æ®è¡€ç¼˜ç­‰ï¼›</p>
</li>
<li>
<p><strong>å®‰å…¨ä¸å…ƒæ•°æ®</strong>ï¼šæ”¯æŒÂ Kerberosã€LDAPã€Rangerï¼›</p>
</li>
<li>
<p><strong>æ¹–æ ¼å¼</strong>ï¼šæ¹–æ ¼å¼è¦†ç›–Â Paimon/Delta/Hudi/Icebergï¼›</p>
</li>
<li>
<p><strong>å¤–éƒ¨æ•°æ®æº</strong>ï¼šè¿æ¥Â StarRocksã€Dorisã€Hologresã€HBaseã€Elasticsearchã€MongoDBã€MaxComputeã€MySQLÂ ã€Postgresç­‰æ•°åç§ç³»ç»Ÿã€‚</p>
</li>
</ul>
<p>è¿™ç§å¹¿æ³›çš„å…¼å®¹æ€§æå¤§é™ä½äº†ç”¨æˆ·è¿ç§»å’Œé›†æˆæˆæœ¬ï¼ŒçœŸæ­£å®ç°â€œå¼€ç®±å³ç”¨â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe380361dc7f44d0b724851716c1d60d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556335&amp;x-signature=7KlCA7ly36yuFaicU2KuYe3jDZY%3D" alt="image (43).png" loading="lazy"/></p>
<h2 data-id="heading-3">TPC-DSÂ 100TÂ èƒŒåçš„å››å¤§æ ¸å¿ƒæŠ€æœ¯</h2>
<p>å®˜æ–¹TPC-DSÂ 100TÂ æµ‹è¯•åŒ…å«æ•°æ®ç”Ÿæˆã€å¯¼å…¥ã€PowerÂ Testï¼ˆå•å¹¶å‘99æŸ¥è¯¢ï¼‰ã€ThroughputÂ Testï¼ˆ4å¹¶å‘396æŸ¥è¯¢ï¼‰ã€MaintenanceÂ Testï¼ˆUpsertÂ æ“ä½œï¼‰ç­‰ç¯èŠ‚ï¼Œæœ€ç»ˆé€šè¿‡Â QphDSÂ åˆ†æ•°è¡¡é‡ç»¼åˆæ€§èƒ½ã€‚</p>
<p>é˜¿é‡Œäº‘çš„çªç ´æºäºä»¥ä¸‹å››å¤§æŠ€æœ¯åˆ›æ–°ï¼š</p>
<h3 data-id="heading-4">1.Â FusionÂ å‘é‡åŒ–æ‰§è¡Œå¼•æ“</h3>
<p>è‡ª2019å¹´èµ·ç ”å‘ï¼ŒFusionÂ å°†Â SparkÂ ä»è¡Œå¼è®¡ç®—å‡çº§ä¸ºÂ <strong>åˆ—å¼å‘é‡åŒ–æ‰§è¡Œ</strong>ï¼š</p>
<ul>
<li>
<p>åˆ©ç”¨Â SIMDÂ æŒ‡ä»¤å¹¶è¡Œå¤„ç†å¤šåˆ—æ•°æ®ï¼›</p>
</li>
<li>
<p>è¿ç»­å†…å­˜å¸ƒå±€æ˜¾è‘—æå‡Â CPUÂ CacheÂ å‘½ä¸­ç‡ï¼›</p>
</li>
<li>
<p>å¼‚æ­¥Â IOÂ ä¸Â IOÂ åˆå¹¶ä¼˜åŒ–è¯»å–æ•ˆç‡ï¼›</p>
</li>
<li>
<p>å…³é”®ç®—å­ï¼ˆSort/Window/Joinï¼‰ä¼˜åŒ–ï¼Œæ€§èƒ½æå‡è¾¾Â <strong>300%</strong>ã€‚</p>
</li>
</ul>
<p>åœ¨Â TPC-DSÂ åœºæ™¯ä¸­ï¼ŒFusionÂ è¿˜å¼•å…¥Â SubplanÂ Reuseã€BroadcastÂ JoinÂ Reuseã€SemiÂ JoinÂ å“ˆå¸Œè¡¨å»é‡ç­‰ä¼˜åŒ–ï¼Œå¤§å¹…å‡å°‘é‡å¤è®¡ç®—ä¸å†…å­˜å ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd49b01f60be4d41883a36c4394313e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556335&amp;x-signature=kgq71K1AOatomFS765KcJbv8F7k%3D" alt="image (44).png" loading="lazy"/></p>
<h3 data-id="heading-5">2.Â ä¸Â PaimonÂ æ·±åº¦ååŒ</h3>
<p>FusionÂ ä¸é˜¿é‡Œè‡ªç ”æ¹–è¡¨æ ¼å¼Â PaimonÂ æ·±åº¦æ•´åˆï¼š</p>
<ul>
<li>
<p>å‘é‡åŒ–è¯»å†™ä½¿è¯»æ€§èƒ½æå‡Â <strong>70%</strong>ï¼Œå†™æ€§èƒ½æå‡Â <strong>30%</strong>ï¼›</p>
</li>
<li>
<p>VariantÂ ç±»å‹ç›¸æ¯”åŸå§‹Â JSONÂ æå‡Â <strong>178%</strong>ï¼›</p>
</li>
<li>
<p>ShreddingÂ æŠ€æœ¯è¿›ä¸€æ­¥åŠ é€ŸJSONè§£æï¼Œæ€§èƒ½å†æå‡Â <strong>364%</strong>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-6">3.Â CelebornÂ RemoteÂ ShuffleÂ Service</h3>
<p>ä½œä¸ºÂ ApacheÂ é¡¶çº§é¡¹ç›®ï¼ŒCelebornÂ é‡‡ç”¨Â <strong>æ¨é€å¼Â ShuffleÂ æ¶æ„</strong>ï¼š</p>
<ul>
<li>
<p>åœ¨å¤§è§„æ¨¡ä½œä¸šä¸­æä¾›æ›´é«˜ååä¸æ›´ä½å»¶è¿Ÿï¼›</p>
</li>
<li>
<p>æ”¯æŒå‰¯æœ¬å®¹é”™ä¸Stageé‡ç®—ï¼Œä¿éšœä½œä¸šç¨³å®šæ€§ï¼›</p>
</li>
<li>
<p>å¤§è§„æ¨¡ç”Ÿäº§éªŒè¯ï¼Œæˆä¸ºä¸šç•Œäº‹å®æ ‡å‡†ã€‚</p>
</li>
</ul>
<h3 data-id="heading-7">4.Â DLFÂ 3.0Â ä¸ä¼˜åŒ–å™¨å¢å¼º</h3>
<p>åŸºäºÂ PaimonÂ çš„Â DLFÂ 3.0Â æä¾›é«˜æ€§èƒ½Â ACIDÂ èƒ½åŠ›ï¼Œæ»¡è¶³Â TPC-DSÂ MaintenanceÂ æµ‹è¯•è¦æ±‚ï¼›åŒæ—¶ä¼˜åŒ–å™¨åœ¨Â JoinÂ é¡ºåºé€‰æ‹©ã€ä»£ä»·æ¨¡å‹ç­‰æ–¹é¢æŒç»­è¿­ä»£ï¼Œæå‡å¤æ‚æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<p><strong>æœ€ç»ˆæˆæœ</strong>ï¼šåœ¨ä»…ä½¿ç”¨ä¸€åŠå†…å­˜çš„æƒ…å†µä¸‹ï¼ŒQphDSÂ æ€§èƒ½ç¿»å€ï¼Œæ€§ä»·æ¯”æå‡5å€ï¼Œæ‰€æœ‰ç»“æœå‡é€šè¿‡Â TPCÂ å®˜æ–¹ä¸¥æ ¼å®¡è®¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/821ba933c3794057ac132607e75d4cec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556335&amp;x-signature=HWHB35XC60C%2FvVWBvFUFi4lu5Gk%3D" alt="image (45).png" loading="lazy"/></p>
<h2 data-id="heading-8">AIÂ æ—¶ä»£çš„æ–°åŠŸèƒ½ï¼šè®©Â SparkÂ æˆä¸ºÂ AIÂ åŸºç¡€è®¾æ–½</h2>
<p>é¢å¯¹Â AIÂ æµªæ½®ï¼ŒEMRÂ ServerlessÂ SparkÂ æ¨å‡ºå¤šé¡¹åˆ›æ–°åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p><strong>AIÂ Function</strong>ï¼šå†…ç½®Â <code>ai_query</code>ã€<code>ai_sentiment</code>ã€<code>ai_classify</code>ã€<code>ai_embedding</code>Â ç­‰å‡½æ•°ï¼Œç”¨æˆ·å¯åœ¨Â SQLÂ ä¸­ç›´æ¥è°ƒç”¨å¤§æ¨¡å‹ï¼Œå¦‚åŒä½¿ç”¨å†…ç½®Â UDFã€‚æ”¯æŒæ¥å…¥ç™¾ç‚¼ã€OpenAIã€PAIÂ EASÂ æˆ–æœ¬åœ°Â GPUÂ æ¨¡å‹ã€‚</p>
</li>
<li>
<p><strong>SparkÂ onÂ GPU</strong>ï¼šæä¾›å¼¹æ€§Â GPUÂ å®ä¾‹ï¼ŒæŒ‰éœ€é…ç½®Â CPU/GPUÂ æ··åˆæœºå‹ï¼Œé¿å…å›ºå®šé›†ç¾¤æˆæœ¬ã€‚æ”¯æŒï¼š</p>
<ul>
<li>
<p>AIÂ FunctionÂ æœ¬åœ°Â GPUÂ æ¨ç†ï¼›</p>
</li>
<li>
<p>SparkÂ MLï¼ˆXGBoost/LightGBMï¼‰GPUÂ åŠ é€Ÿï¼›</p>
</li>
<li>
<p>SparkÂ SQLÂ å‘é‡åŒ–Â GPUÂ è®¡ç®—ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebcbab7c50a0438d9b920d0c8ded278e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556335&amp;x-signature=%2Bx68PvNhZXNOGfPU3vQUOw2ZYNI%3D" alt="image (46).png" loading="lazy"/></p>
<ul>
<li>
<p><strong>å³å°†ä¸Šçº¿åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>
<p><strong>SparkÂ +Â RayÂ åŒå¼•æ“èåˆ</strong>ï¼šæ»¡è¶³Â PythonÂ åˆ†å¸ƒå¼ä¸å¼‚æ„è®¡ç®—éœ€æ±‚ï¼›</p>
</li>
<li>
<p><strong>DuckDBÂ é›†æˆ</strong>ï¼šé’ˆå¯¹ä¸­å°æ•°æ®åˆ†æï¼Œåœ¨Â NotebookÂ ä¸­å·²å†…ç½®ï¼Œæœªæ¥æ”¯æŒç›´è¿Â DLFÂ 3.0ï¼›</p>
</li>
<li>
<p><strong>æ–‡æœ¬å»é‡åŠ é€Ÿ</strong>ï¼šåœ¨Â FineWeb-eduï¼ˆ8TBã€30äº¿æ–‡æ¡£ï¼‰ä¸Šï¼Œ800Â æ ¸ä»…éœ€Â 72Â åˆ†é’Ÿï¼Œæé€ŸÂ 5Â å€ã€‚</p>
</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-9">æºæ‰‹å®¢æˆ·å…±åŒæˆé•¿</h2>
<p>EMRÂ ServerlessÂ SparkÂ å·²åœ¨å¤šå®¶é‡‘èã€äº’è”ç½‘ã€æ™ºèƒ½ç¡¬ä»¶åŠé›¶å”®ä¼ä¸šçš„ç”Ÿäº§ç¯å¢ƒä¸­ç¨³å®šè¿è¡Œï¼Œå¹¿æ³›åº”ç”¨äºæ•°æ®ä»“åº“åŠ é€Ÿã€å®æ—¶é£æ§ã€å‘é‡æ£€ç´¢ã€æœºå™¨å­¦ä¹ ç­‰æ ¸å¿ƒåœºæ™¯ã€‚</p>
<p>åŒæ—¶ï¼ŒCelebornÂ ç¤¾åŒºä¹Ÿåœ¨å¤šä¸ªå¤´éƒ¨äº’è”ç½‘å¹³å°å’Œç§‘æŠ€ä¼ä¸šä¸­è½åœ°ï¼Œæ”¯æ’‘é«˜å¹¶å‘ã€å¤§è§„æ¨¡çš„æ•°æ®è®¡ç®—éœ€æ±‚ã€‚</p>
<p>é˜¿é‡Œäº‘Â EMRÂ ServerlessÂ SparkÂ çš„Â TPC-DSÂ ç™»é¡¶ï¼Œä¸ä»…ä½“ç°äº†ä¼˜å¼‚æ€§èƒ½ï¼Œæ›´ä½“ç°äº†æ¶æ„ç†å¿µã€å·¥ç¨‹èƒ½åŠ›å’Œç”Ÿæ€æˆ˜ç•¥ã€‚åœ¨Â DataÂ +Â AIÂ èåˆçš„æ–°æ—¶ä»£ï¼Œå®ƒæ­£æˆä¸ºä¼ä¸šæ„å»ºä¸‹ä¸€ä»£æ™ºèƒ½æ•°æ®åŸºç¡€è®¾æ–½çš„æ ¸å¿ƒå¼•æ“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[6G ç‰©ç†å±‚å˜å¤©AFDMï¼šä¸å…¶åœ¨ OFDM çš„æ­»èƒ¡åŒé‡Œæ’å¢™ï¼Œä¸å¦‚æ¢ä¸ªåæ ‡ç³»â€œæŠ˜å â€ä¸–ç•Œ]]></title>    <link>https://juejin.cn/post/7605535884940492851</link>    <guid>https://juejin.cn/post/7605535884940492851</guid>    <pubDate>2026-02-12T13:07:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605535884940492851" data-draft-id="7605769126271074350" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="6G ç‰©ç†å±‚å˜å¤©AFDMï¼šä¸å…¶åœ¨ OFDM çš„æ­»èƒ¡åŒé‡Œæ’å¢™ï¼Œä¸å¦‚æ¢ä¸ªåæ ‡ç³»â€œæŠ˜å â€ä¸–ç•Œ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-12T13:07:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="3GPPä»¿çœŸå®éªŒå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/590875532999898"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            6G ç‰©ç†å±‚å˜å¤©AFDMï¼šä¸å…¶åœ¨ OFDM çš„æ­»èƒ¡åŒé‡Œæ’å¢™ï¼Œä¸å¦‚æ¢ä¸ªåæ ‡ç³»â€œæŠ˜å â€ä¸–ç•Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/590875532999898/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    3GPPä»¿çœŸå®éªŒå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T13:07:35.000Z" title="Thu Feb 12 2026 13:07:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬å…ˆæ‰¿è®¤ä¸€ä¸ªå°´å°¬çš„äº‹å®ï¼š</p>
<p>é¢å¯¹ 6G æå‡ºçš„ <strong>1000 km/hï¼ˆè¶…é«˜é“ï¼‰</strong> å’Œ <strong>28000 km/hï¼ˆä½è½¨å«æ˜Ÿï¼‰</strong> æ„¿æ™¯ï¼Œç»Ÿæ²»äº†é€šä¿¡ç•ŒäºŒåå¹´çš„ç‹è€…â€”â€”OFDMï¼Œå·²ç»å°½åŠ›äº†ã€‚</p>
<p>ä¾é ç¼©çŸ­ç¬¦å·æ—¶é—´ã€åŠ å¤§å­è½½æ³¢é—´éš”ï¼ˆSCSï¼‰ï¼Œè¿™åªæ˜¯åœ¨ç‰©ç†æé™çš„è¾¹ç¼˜ç–¯ç‹‚è¯•æ¢ã€‚æˆ‘ä»¬å°±åƒåœ¨æš´é£é›¨ä¸­ä¿®è¡¥ä¸€è‰˜æ¼æ°´çš„èˆ¹ï¼Œè¡¥ä¸æ‰“å¾—è¶Šå¤šï¼Œèˆ¹è¶Šé‡ï¼ˆCP å¼€é”€å¤§ã€é¢‘è°±æ•ˆç‡ä½ï¼‰ã€‚</p>
<p><strong>æ˜¯æ—¶å€™æ¢ä¸€è‰˜èˆ¹äº†ã€‚</strong></p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥èŠèŠç‰©ç†å±‚çš„ä¸€åœºâ€œé™ç»´æ‰“å‡»â€ï¼š â€‹<strong>AFDM ä»¿å°„é¢‘åˆ†å¤ç”¨</strong>â€‹ ã€‚</p>
<hr/>
<h3 data-id="heading-0">01. å®Œç¾çš„ä»£ä»·ï¼šOFDM çš„åŸºå› ç¼ºé™·</h3>
<p>ä¸€åˆ‡æ‚²å‰§çš„æ ¹æºï¼Œæ—©åœ¨æˆ‘ä»¬é€‰æ‹© OFDM çš„é‚£ä¸€åˆ»å°±æ³¨å®šäº†ã€‚</p>
<p>ä¸ºäº†è¿½æ±‚é¢‘è°±æ•ˆç‡çš„æè‡´ï¼Œæˆ‘ä»¬åœ¨é¢‘åŸŸé€‰æ‹©äº†â€‹<strong>Sinc å‡½æ•°</strong>â€‹ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">sin(x)/x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal">x</span></span></span></span></span>ï¼‰ä½œä¸ºå­è½½æ³¢ã€‚</p>
<p>å®ƒé•¿å¾—å¹¶ä¸åƒä¸€æ ¹å®Œç¾çš„é’ˆï¼Œè€Œæ˜¯ä¸€ä¸ªå¸¦ç€æ— æ•°â€œæ‹–æ²¹ç“¶â€çš„æ³¢å½¢ï¼š</p>
<ul>
<li><strong>ä¸»ç“£ï¼š</strong> é«˜è€¸å…¥äº‘ï¼Œæ‰¿è½½æœ‰ç”¨ä¿¡æ¯ã€‚</li>
<li><strong>æ—ç“£ (Side-lobes)ï¼š</strong> åƒæ³¢çº¹ä¸€æ ·å‘ä¸¤è¾¹æ‰©æ•£ï¼Œä¸”è¡°å‡æå…¶ç¼“æ…¢ã€‚</li>
</ul>
<p>OFDM åˆ©ç”¨æ•°å­¦ä¸Šçš„**â€œæ­£äº¤æ€§â€<strong>ï¼Œå·§å¦™åœ°è®©æ¯ä¸€ä¸ªå­è½½æ³¢çš„</strong>å³°å€¼**ï¼Œç²¾å‡†åœ°è¸©åœ¨å…¶ä»–æ‰€æœ‰å­è½½æ³¢çš„<strong>é›¶ç‚¹ (Zero Crossing)</strong> ä¸Šã€‚</p>
<p>è¿™æ˜¯ä¸€åœºâ€‹<strong>åˆ€å°–ä¸Šçš„èˆè¹ˆ</strong>â€‹ã€‚</p>
<p>è™½ç„¶æ—ç“£æ‹–å¾—å¾ˆé•¿ï¼Œä½†åœ¨é‡‡æ ·ç‚¹é‚£ä¸€ç¬é—´ï¼Œå¤§å®¶äº’ä¸å¹²æ‰°ã€‚åªè¦å¤§å®¶éƒ½ä¸åŠ¨ï¼Œè¿™ä¸ªå¹³è¡¡å°±æ˜¯å®Œç¾çš„ã€‚</p>
<blockquote>
<p><strong>ä½†åœ¨ 6G çš„ä¸–ç•Œé‡Œï¼Œâ€œä¸åŠ¨â€æˆäº†ä¸€ç§å¥¢æœ›ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-1">02. é€Ÿåº¦çš„è¯…å’’ï¼šä» 350km/h åˆ° 7.6km/s</h3>
<p>å½“ä½ åœ¨ 350km/h çš„é«˜é“ä¸Šï¼Œæˆ–è€…åœ¨ 7.6km/s çš„å«æ˜Ÿä¸‹ï¼Œç‰©ç†ä¸–ç•Œå¼€å§‹å¯¹è¿™ä¸ªè„†å¼±çš„æ•°å­¦å¹³è¡¡ä¸‹æ‰‹äº†ã€‚</p>
<p>å¤§å®¶é€šå¸¸è®¤ä¸ºå¤šæ™®å‹’åªæ˜¯â€‹<strong>é¢‘ç‡å¹³ç§»</strong>â€‹ã€‚ä½†åœ¨ OFDM çš„çœ¼é‡Œï¼Œè¿™ç®€ç›´å°±æ˜¯ä¸€åœº <strong>â€œæ—ç“£çš„å± æ€â€</strong> ã€‚</p>
<p>è®¾æƒ³ä¸€ä¸‹ï¼Œå½“æ•´ä¸ªé¢‘è°±å‘ç”Ÿå¾®å°çš„åç§»ï¼ˆå“ªæ€•åªæ˜¯å­è½½æ³¢é—´éš”çš„ â€‹<strong>3%</strong> â€‹ï¼‰ï¼š</p>
<ol>
<li><strong>é›¶ç‚¹é”™ä½ï¼š</strong> æ¥æ”¶æœºåš FFT é‡‡æ ·æ—¶ï¼ŒåŸæœ¬åº”è¯¥é‡‡åˆ°â€œ0â€çš„åœ°æ–¹ï¼Œç°åœ¨é‡‡åˆ°äº†éš”å£å­è½½æ³¢çš„â€‹<strong>æ—ç“£èƒ½é‡</strong>â€‹ã€‚</li>
<li><strong>èƒ½é‡æµ·å•¸ï¼š</strong> ç”±äº Sinc å‡½æ•°çš„æ—ç“£æ‹–å¾—å¾ˆé•¿ï¼Œ<strong>è¿œå¤„çš„å­è½½æ³¢</strong>ä¹Ÿä¼šæŠŠèƒ½é‡â€œæ³¼â€è¿‡æ¥ã€‚</li>
<li><strong>ICI çˆ†å‘ï¼š</strong> æˆåƒä¸Šä¸‡ä¸ªå­è½½æ³¢çš„å¹²æ‰°å åŠ åœ¨ä¸€èµ·ï¼Œå½¢æˆäº†ææ€–çš„ â€‹<strong>ICIï¼ˆè½½æ³¢é—´å¹²æ‰°ï¼‰</strong> â€‹ã€‚</li>
</ol>
<p><strong>(å»ºè®®é…å›¾ï¼šOFDM å­è½½æ³¢æ­£äº¤æ€§è¢«ç ´åçš„ç¤ºæ„å›¾ï¼Œå±•ç¤ºæ³¢å³°å¯¹ä¸å‡†é›¶ç‚¹)</strong></p>
<p>æ›´ç»æœ›çš„æ˜¯â€‹<strong>ä½è½¨å«æ˜Ÿï¼ˆLEOï¼‰åœºæ™¯</strong>â€‹ã€‚</p>
<p>å½“é€Ÿåº¦è¾¾åˆ° â€‹<strong>7.6 km/s</strong>â€‹ï¼Œå¤šæ™®å‹’é¢‘ç§»è½»æ¾çªç ´ â€‹<strong>500 kHz</strong>â€‹ã€‚</p>
<p>è¿™ç›´æ¥å¯¼è‡´â€‹<strong>ç›¸å¹²æ—¶é—´ï¼ˆCoherence Timeï¼‰å´©å¡Œ</strong>â€‹ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š<strong>ä½ çš„å¯¼é¢‘ï¼ˆPilotï¼‰åˆšæµ‹å®Œä¿¡é“ï¼Œè¿˜æ²¡æ¥å¾—åŠå‘æ•°æ®ï¼Œä¿¡é“å·²ç»å˜äº†ã€‚</strong></p>
<p>ä¼ ç»Ÿçš„ä¿¡é“ä¼°è®¡é€»è¾‘å½»åº•æ–­è£‚ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œæ— è®ºä½ æŠŠåŸºç«™åŠŸç‡å¼€å¤šå¤§ï¼Œéƒ½æ²¡ç”¨äº†ã€‚å› ä¸ºå¹²æ‰°æ¥è‡ªä¿¡å·å†…éƒ¨ï¼Œä¿¡å™ªæ¯”ï¼ˆSINRï¼‰è¢«é”æ­»åœ¨ä¸€ä¸ª <strong>â€œåœ°æ¿â€</strong> ä¸Šã€‚</p>
<p><strong>ç½‘é€Ÿç¬é—´ä»â€œåƒå…†çº§â€æ‰å›â€œ3G æ—¶ä»£â€ã€‚</strong></p>
<hr/>
<h3 data-id="heading-2">03. ç¬¬ä¸€æ€§åŸç†ï¼šæŠŠâ€œæ­£å¼¦æ³¢â€æ‰”è¿›åƒåœ¾æ¡¶</h3>
<p>OFDM ä¸ºä»€ä¹ˆæ€•å¤šæ™®å‹’ï¼Ÿ</p>
<p>å› ä¸ºå®ƒç”¨çš„åŸºåº•æ˜¯ â€‹<strong>æ­£å¼¦æ³¢</strong>â€‹â€”â€”<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mrow><mi>j</mi><mn>2</mn><mi>p</mi><mi>i</mi><mi>f</mi><mi>t</mi></mrow></msup></mrow><annotation encoding="application/x-tex">e^{j2pi ft}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span></span></span>ã€‚</p>
<p>æ­£å¼¦æ³¢æ˜¯é™æ€çš„ã€æ°¸æ’çš„ã€‚å®ƒå”¯ä¸€çš„å¼±ç‚¹å°±æ˜¯ <strong>â€œé¢‘ç‡å¿…é¡»ç²¾å‡†â€</strong> ã€‚</p>
<p>é¢å¯¹ 6G çš„è¶…é«˜åŠ¨æ€ï¼Œç‰©ç†å±‚å…ˆé”‹ä»¬åšäº†ä¸€ä¸ªè¿èƒŒç¥–å®—çš„å†³å®šï¼š</p>
<p><strong>æŠ›å¼ƒæ­£å¼¦æ³¢ï¼Œæ”¹ç”¨ Chirpï¼ˆçº¿æ€§è°ƒé¢‘ä¿¡å·ï¼‰ã€‚</strong>
<img src="http://openwrite.cn/uploads/20293/59390/a1004659-fb9b-4dc7-99db-514fd3eed83a.png" alt="demo_afdm_basics.png" loading="lazy"/></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li><strong>OFDM çš„å­è½½æ³¢</strong> åƒæ˜¯ä¸€æ’æ’<strong>å‚ç›´ç«–ç«‹</strong>çš„æ …æ ã€‚é£ï¼ˆå¤šæ™®å‹’ï¼‰ä¸€å¹ï¼Œæ …æ å°±æ­ªäº†ï¼Œäº’ç›¸ç¢°æ’ã€‚</li>
<li><strong>AFDM çš„å­è½½æ³¢</strong> åƒæ˜¯<strong>å€¾æ–œçš„</strong>å¤šç±³è¯ºéª¨ç‰Œã€‚
å®ƒçš„é¢‘ç‡æœ¬èº«å°±æ˜¯éšæ—¶é—´çº¿æ€§å˜åŒ–çš„ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mrow><mi>j</mi><mn>2</mn><mi>p</mi><mi>i</mi><mo stretchy="false">(</mo><mi>f</mi><mi>t</mi><mo>+</mo><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>c</mi><mn>2</mn><msup><mi>t</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">e^{j2pi (ft + frac{c}{2}t^2)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9869em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9869em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">i</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">c</span><span class="mord mtight"><span class="mord mathnormal mtight">c</span></span><span class="mord mtight"><span class="mord mtight">2</span></span><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span>ã€‚</li>
</ul>
<p>è¿™é‡Œçš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">c</span></span></span></span></span> (Chirp Rate)ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰‹ä¸­çš„â€‹<strong>é­”æ³•é’¥åŒ™</strong>â€‹ã€‚</p>
<hr/>
<h3 data-id="heading-3">04. DAFTï¼šä¸Šå¸çš„æ‰­æ›²åŠ›åœº</h3>
<p>æœ‰äº† Chirp ä¿¡å·ï¼Œæˆ‘ä»¬å¦‚ä½•è°ƒåˆ¶æ•°æ®ï¼Ÿ</p>
<p>æ¬¢è¿æ¥åˆ°æ•°å­¦çš„æ— äººåŒºâ€”â€” â€‹<strong>DAFT (ç¦»æ•£ä»¿å°„å‚…é‡Œå¶å˜æ¢)</strong> â€‹ã€‚</p>
<p>åˆ«è¢«åå­—å“åˆ°ã€‚å®ƒçš„ç‰©ç†æœ¬è´¨æå…¶æ€§æ„Ÿï¼š</p>
<p><strong>å®ƒåœ¨å¯¹æ—¶é¢‘å¹³é¢ï¼ˆTime-Frequency Planeï¼‰è¿›è¡Œâ€œå‰ªåˆ‡â€ (Shearing) å’Œâ€œæ—‹è½¬â€ã€‚</strong></p>
<ul>
<li><strong>ä¼ ç»Ÿ FFT</strong> æ˜¯æ­£æ­£æ–¹æ–¹çš„ç½‘æ ¼ã€‚</li>
<li><strong>DAFT</strong> é€šè¿‡è°ƒæ•´å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">c</span></span></span></span></span>ï¼ŒæŠŠç½‘æ ¼<strong>æ‰­æ›²</strong>æˆå¹³è¡Œå››è¾¹å½¢ï¼Œä½¿å…¶æ–œç‡ä¸ä¿¡é“çš„<strong>å¤šæ™®å‹’é¢‘ç§»æ–œç‡</strong>å®Œç¾å¯¹é½ã€‚</li>
</ul>
<p><strong>è§è¯å¥‡è¿¹çš„æ—¶åˆ»ï¼š</strong></p>
<p>å½“ä¿¡é“çš„æœ€å¤§å¤šæ™®å‹’é¢‘ç§»ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">f_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½® Chirp å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>=</mo><mn>2</mn><msub><mi>f</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">c = 2f_{max}/T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></span>ã€‚</p>
<p>æ­¤æ—¶ï¼ŒåŸæœ¬åœ¨è¿™ä¸ªæ˜Ÿçƒä¸Šç‹‚æš´å˜åŒ–çš„ä¿¡é“ï¼Œåœ¨ DAFT å˜æ¢åçš„åŸŸé‡Œï¼Œç«Ÿç„¶å¥‡è¿¹èˆ¬åœ°â€‹<strong>å˜æˆäº†ä¸€æ¡ç›´çº¿ï¼ˆæ—¶ä¸å˜ä¿¡é“ï¼‰</strong> â€‹ï¼</p>
<blockquote>
<p><strong>æˆ‘ä»¬æ²¡æœ‰æ¶ˆé™¤å¤šæ™®å‹’ï¼Œæˆ‘ä»¬åªæ˜¯é€šè¿‡æ‰­æ›²åæ ‡ç³»ï¼ŒæŠŠå®ƒâ€œéª—â€è¿‡å»äº†ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-4">05. é™ç»´æ‰“å‡»ï¼šå…¨åˆ†é›† (Full Diversity) çš„æš´åŠ›ç¾å­¦</h3>
<p>AFDM æœ€è®©é€šä¿¡äººä¸Šç˜¾çš„ï¼Œæ˜¯å®ƒçš„æŠ—è¡°è½èƒ½åŠ›ã€‚</p>
<p>åœ¨ OFDM ä¸­ï¼Œå¦‚æœä¸€ä¸ªå­è½½æ³¢æ‰è¿›æ·±è¡°è½ï¼ˆDeep Fadeï¼‰çš„å‘é‡Œï¼Œä¸Šé¢çš„æ•°æ®å°±æ­»å®šäº†ã€‚</p>
<p>ä½†åœ¨ AFDM ä¸­ï¼Œ<strong>æ¯ä¸€ä¸ªæ•°æ®ç¬¦å·éƒ½â€œå¼¥æ•£â€åœ¨æ•´ä¸ªå¸¦å®½å’Œæ—¶éš™ä¸Šã€‚</strong></p>
<p>è¿™å°±å¥½æ¯”ï¼š</p>
<ul>
<li><strong>OFDM</strong> æ˜¯æŠŠé¸¡è›‹æ”¾åœ¨ 1000 ä¸ªç¯®å­é‡Œã€‚æ‘”äº†ä¸€ä¸ªç¯®å­ï¼Œå°±ç¢ä¸€ä¸ªé¸¡è›‹ã€‚</li>
<li><strong>AFDM</strong> æ˜¯æŠŠé¸¡è›‹æ‰“æ•£ï¼Œå‡åŒ€åœ°æ¶‚åœ¨ 1000 ä¸ªç¯®å­ä¸Šã€‚æ‘”ç¢å‡ ä¸ªç¯®å­ï¼Ÿæ— æ‰€è°“ï¼ŒæŠŠå‰©ä¸‹çš„æ‹¼èµ·æ¥ï¼Œé¸¡è›‹è¿˜æ˜¯å®Œæ•´çš„ã€‚</li>
</ul>
<p><strong>ç»“è®ºç‚¸è£‚ï¼š</strong></p>
<p>å¤šæ™®å‹’è¶Šå¤§ï¼Œå¤šå¾„è¶Šå¤æ‚ï¼ŒAFDM çš„æ€§èƒ½åè€Œè¶Šå¥½ï¼ˆåˆ†é›†é˜¶æ•°è¶Šé«˜ï¼‰ã€‚</p>
<p><strong>è¿™æ˜¯ç‰©ç†å±‚å¯¹æ¶åŠ£ç¯å¢ƒçš„æœ€å¼ºå˜²è®½ã€‚</strong></p>
<hr/>
<h3 data-id="heading-5">06. ç»ˆææ€æ‰‹é”ï¼šå®ƒä¸å†åªæ˜¯é€šä¿¡</h3>
<p>å¦‚æœä½ ä»¥ä¸º AFDM åªæ˜¯ä¸ºäº†è®©ç½‘é€Ÿå¿«ä¸€ç‚¹ï¼Œé‚£ä½ å°±æŠŠæ ¼å±€æƒ³å°äº†ã€‚</p>
<p>AFDM çœŸæ­£è®© 6G é¢¤æŠ–çš„ï¼Œæ˜¯å®ƒçš„ <strong>â€œåŒé‡èº«ä»½â€</strong> ã€‚</p>
<p>è¯·å›æƒ³ä¸€ä¸‹ï¼ŒAFDM çš„æ ¸å¿ƒæ³¢å½¢æ˜¯ä»€ä¹ˆï¼Ÿ<strong>æ˜¯ Chirpã€‚</strong></p>
<p>åœ¨é€šä¿¡äººçœ¼é‡Œï¼Œè¿™æ˜¯æ–°æ³¢å½¢ï¼›ä½†åœ¨<strong>é›·è¾¾äºº</strong>çœ¼é‡Œï¼Œè¿™æ˜¯ <strong>â€œè€ç¥–å®—â€</strong> ï¼</p>
<p><strong>ä¸€ä¸ªæƒŠäººçš„å®¿å‘½å‡ºç°äº†ï¼š</strong></p>
<p>å½“æˆ‘ä»¬åœ¨ 6G åŸºç«™ä¸Šå‘å°„ AFDM æ³¢å½¢æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨å‘å°„â€‹<strong>é›·è¾¾æ³¢</strong>â€‹ã€‚</p>
<ul>
<li><strong>OFDM æ˜¯â€œç›²äººâ€ï¼š</strong> å®ƒåªèƒ½ä»¥æ­¤å²¸ä¼ åˆ°å½¼å²¸ï¼Œä¸çŸ¥é“ä¸­é—´ç»å†äº†ä»€ä¹ˆã€‚</li>
<li><strong>AFDM æ˜¯â€œççœ¼ç©å®¶â€ï¼š</strong> å®ƒçš„æ³¢å½¢å¤©ç„¶å…·å¤‡â€‹<strong>æ¢æµ‹èƒ½åŠ›</strong>â€‹ã€‚å®ƒåœ¨ä¼ è¾“æ•°æ®çš„åŒæ—¶ï¼Œé¡ºä¾¿æŠŠå‘¨å›´ç¯å¢ƒçš„ <strong>è·ç¦»ï¼ˆDelayï¼‰</strong> å’Œ <strong>é€Ÿåº¦ï¼ˆDopplerï¼‰</strong> æ‰«æäº†ä¸€éã€‚</li>
</ul>
<p><strong>è¿™å°±æ˜¯ 6G çš„åœ£æ¯â€”â€”é€šæ„Ÿä¸€ä½“åŒ– (ISAC)ã€‚</strong></p>
<p>æœªæ¥çš„åŸºç«™ï¼Œä¸éœ€è¦ä½ å‘å¯¼é¢‘å‘Šè¯‰å®ƒä½ åœ¨å“ªã€‚é€šè¿‡ AFDM çš„å›æ³¢ï¼ŒåŸºç«™ç›´æ¥ <strong>â€œçœ‹â€</strong> åˆ°äº†ä½ ã€‚</p>
<p>å®ƒçŸ¥é“è¿™è¾†è½¦åœ¨ä»¥ 120km/h å˜é“ï¼Œå®ƒçŸ¥é“é‚£é¢—å«æ˜Ÿåœ¨ä»¥ 7.6km/s é è¿‘ã€‚</p>
<p>å› ä¸ºæˆ‘çœ‹æ¸…äº†ä½ ï¼Œæ‰€ä»¥æˆ‘èƒ½å®Œç¾åœ°è°ƒèŠ‚åæ ‡ç³»æ¥é€‚åº”ä½ ã€‚</p>
<p><strong>é€šä¿¡ä¸æ„ŸçŸ¥ï¼Œåœ¨ AFDM çš„æ—¶å»¶-å¤šæ™®å‹’åŸŸé‡Œï¼Œå®Œæˆäº†ç‰©ç†å±‚ä¸Šçš„â€œçµè‚‰åˆä¸€â€ã€‚</strong></p>
<hr/>
<h3 data-id="heading-6">ç»“è¯­</h3>
<p>OFDM ç»Ÿæ²»äº†äºŒåå¹´ï¼Œå®ƒæŠŠâ€œé™æ€â€åšåˆ°äº†æè‡´ã€‚</p>
<p><strong>ä½† AFDM çš„å‡ºç°ï¼Œæ ‡å¿—ç€æˆ‘ä»¬ç»ˆäºæœ‰å‹‡æ°”å»æ‹¥æŠ±â€œåŠ¨æ€â€ã€‚</strong></p>
<p>åœ¨ 7.6km/s çš„æ˜Ÿé“¾ä¸Šï¼Œåœ¨ 1000km/h çš„çœŸç©ºç®¡é“é‡Œï¼Œæ­£å¼¦æ³¢çš„æ—¶ä»£æ­£åœ¨è½å¹•ã€‚</p>
<p>é‚£ä¸ªå±äº Chirpï¼Œå±äº DAFTï¼Œå±äº <strong>â€œå¾¡é£è€Œè¡Œâ€</strong> çš„æ—¶ä»£ï¼Œæ‰åˆšåˆšå¼€å§‹ã€‚</p>
<hr/>
<blockquote>
<p>â€œæ¬¢è¿å…³æ³¨å…¬ä¼—å· <strong>3GPPä»¿çœŸå®éªŒå®¤</strong>ï¼è¿™é‡Œæ˜¯é€šä¿¡ç®—æ³•å·¥ç¨‹å¸ˆçš„åŠ æ²¹ç«™ã€‚</p>
<p>æˆ‘ä»¬ä¸æ¬è¿æ–°é—»ï¼Œåªè¾“å‡º<strong>å¯è¿è¡Œçš„ä»£ç </strong>å’Œ<strong>æ·±åº¦æ ‡å‡†è§£è¯»</strong>ã€‚</p>
<p>ğŸ‘‡ <strong>æ–°äººè§é¢ç¤¼ï¼ˆåå°å›å¤å…³é”®è¯è·å–ï¼‰ï¼š</strong></p>
<p>å›å¤ã€LDPCã€‘ï¼šè·å– 5G NR LDPC ç¼–è§£ç  MATLAB ä»£ç ï¼ˆå«æ³¨é‡Šï¼‰ã€‚
å›å¤ã€å·¥å…·ã€‘ï¼šé€šä¿¡äººå‡è´Ÿç¥å™¨ï¼š5G NR å¸§ç»“æ„ä¸é¢‘ç‚¹ä¸€é”®ç”Ÿæˆå™¨ï¼ˆPython+Excel+Webä¸‰ç‰ˆï¼‰ã€‚
å›å¤ã€Pytorchã€‘ï¼šè·å– 5G NR OFDM é“¾è·¯ Pytorch æ•™å­¦ä»£ç ï¼ˆå«æ³¨é‡Šï¼‰ï¼ŒåŠ©åŠ›äººå·¥æ™ºèƒ½ + é€šä¿¡</p>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢ 6G çš„æ— é™å¯èƒ½ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[10åˆ†é’Ÿæ™ºèƒ½åˆçº¦ï¼šè¿›é˜¶å®æˆ˜-3.2.2 è·¨å‡½æ•°é‡å…¥]]></title>    <link>https://juejin.cn/post/7605848213602467886</link>    <guid>https://juejin.cn/post/7605848213602467886</guid>    <pubDate>2026-02-12T14:08:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605848213602467886" data-draft-id="7605711582430134323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="10åˆ†é’Ÿæ™ºèƒ½åˆçº¦ï¼šè¿›é˜¶å®æˆ˜-3.2.2 è·¨å‡½æ•°é‡å…¥"/> <meta itemprop="keywords" content="Solidity,web3,æ™ºèƒ½åˆçº¦"/> <meta itemprop="datePublished" content="2026-02-12T14:08:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Rockbean"/> <meta itemprop="url" content="https://juejin.cn/user/4054654615823560"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            10åˆ†é’Ÿæ™ºèƒ½åˆçº¦ï¼šè¿›é˜¶å®æˆ˜-3.2.2 è·¨å‡½æ•°é‡å…¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654615823560/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Rockbean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T14:08:11.000Z" title="Thu Feb 12 2026 14:08:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¬¢è¿è®¢é˜…ä¸“æ </strong>ï¼š<a href="https://juejin.cn/column/7602463463105642542" title="https://juejin.cn/column/7602463463105642542" target="_blank">10åˆ†é’Ÿæ™ºèƒ½åˆçº¦ï¼šè¿›é˜¶å®æˆ˜</a></p>
<h2 data-id="heading-0">è·¨å‡½æ•°é‡å…¥ï¼šå®šä¹‰ã€åŸç†ä¸ç»å…¸æ¡ˆä¾‹</h2>
<p><strong>è·¨å‡½æ•°é‡å…¥</strong>æ˜¯æŒ‡æ”»å‡»è€…é€šè¿‡ä¸€æ¬¡å¤–éƒ¨è°ƒç”¨ï¼Œ<strong>é€’å½’åœ°é‡æ–°è¿›å…¥åŒä¸€ä¸ªåˆçº¦çš„å¦ä¸€ä¸ªå‡½æ•°</strong>ï¼Œåˆ©ç”¨å¤šä¸ªå‡½æ•°é—´å…±äº«çš„çŠ¶æ€å°šæœªæ›´æ–°çš„çª—å£æœŸï¼Œæ‰§è¡Œéé¢„æœŸçš„æ“ä½œã€‚<br/>
è¿™ä¸€æ”»å‡»ç±»å‹çš„<strong>æ ‡å¿—æ€§äº‹ä»¶</strong>æ˜¯ 2016 å¹´çš„ <strong>The DAO æ”»å‡»</strong>ï¼Œå¯¼è‡´çº¦ 360 ä¸‡ ETH è¢«åˆ†å‰å›æ»šï¼Œç›´æ¥ä¿ƒæˆäº†ä»¥å¤ªåŠç»å…¸ï¼ˆETCï¼‰çš„è¯ç”Ÿã€‚</p>
<hr/>
<h3 data-id="heading-1">1. æ ¸å¿ƒåŸç†</h3>
<p>è·¨å‡½æ•°é‡å…¥çš„æ ¹æœ¬åŸå› ä¸å•å‡½æ•°é‡å…¥ç›¸åŒï¼š<strong>çŠ¶æ€æ›´æ–°æ»åäºå¤–éƒ¨è°ƒç”¨</strong>ã€‚<br/>
åŒºåˆ«åœ¨äºï¼Œé‡å…¥ç‚¹ä¸å†æ˜¯å½“å‰å‡½æ•°æœ¬èº«ï¼Œè€Œæ˜¯<strong>å¦ä¸€ä¸ªä¹Ÿä¾èµ–åŒä¸€çŠ¶æ€å˜é‡çš„å‡½æ•°</strong>ã€‚</p>
<p>å…¸å‹è„†å¼±æ¨¡å¼ï¼š</p>
<ul>
<li>åˆçº¦ä¸­æœ‰ <strong>ä¸¤ä¸ªæˆ–ä»¥ä¸Š</strong> çš„å‡½æ•°è¯»å–/ä¿®æ”¹åŒä¸€ä¸ªçŠ¶æ€å˜é‡ï¼ˆå¦‚ <code>balances[user]</code>ï¼‰ã€‚</li>
<li>å…¶ä¸­ä¸€ä¸ªå‡½æ•°åœ¨<strong>çŠ¶æ€æ›´æ–°å‰</strong>å‘èµ·å¤–éƒ¨è°ƒç”¨ã€‚</li>
<li>æ”»å‡»è€…åœ¨è¯¥å¤–éƒ¨è°ƒç”¨çš„å›è°ƒä¸­ï¼Œè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œåè€…è¯»å–<strong>å°šæœªæ›´æ–°</strong>çš„çŠ¶æ€ï¼Œæ‰§è¡Œæ“ä½œï¼ˆå¦‚å†æ¬¡ææ¬¾ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">2. ç»å…¸ç¤ºä¾‹ï¼šThe DAO æ”»å‡»ç®€åŒ–å¤ç°</h3>
<p>ä»¥ä¸‹ä»£ç <strong>é«˜åº¦ç®€åŒ–</strong>äº† DAO çš„æ ¸å¿ƒé€»è¾‘ï¼Œä»…ç”¨äºæ¼”ç¤ºè·¨å‡½æ•°é‡å…¥åŸç†ï¼Œå¹¶éå®Œæ•´å¤ç°ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">// æœ‰æ¼æ´çš„DAOç®€åŒ–ç‰ˆ
contract SimpleDAO {
    mapping(address =&gt; uint) public balances;

    // å­˜æ¬¾
    function deposit() public payable {
        balances[msg.sender] += msg.value;
    }

    // 1ï¸âƒ£ æ‹†åˆ†ææ¡ˆå¹¶æå–èµ„é‡‘ï¼ˆæ¼æ´å‡½æ•°ï¼‰
    function splitDAO(address _recipient, uint _amount) public {
        uint userBalance = balances[msg.sender];
        require(userBalance &gt;= _amount, "Insufficient balance");

        // âš ï¸ æ¼æ´ï¼šå…ˆè¿›è¡Œå¤–éƒ¨è°ƒç”¨ï¼Œåæ›´æ–°çŠ¶æ€
        // å‡è®¾è¿™é‡Œè°ƒç”¨äº†æŸç§å¥–åŠ±åˆ†å‘åˆçº¦ï¼Œè§¦å‘å¤–éƒ¨å›è°ƒ
        (bool success, ) = _recipient.call{value: _amount}("");
        require(success, "Transfer failed");

        // çŠ¶æ€æ›´æ–°æ»å
        balances[msg.sender] -= _amount;
    }

    // 2ï¸âƒ£ å¦ä¸€ä¸ªææ¬¾å‡½æ•°ï¼ˆè¢«é‡å…¥çš„ç›®æ ‡ï¼‰
    function withdraw(uint _amount) public {
        require(balances[msg.sender] &gt;= _amount, "Insufficient balance");
        balances[msg.sender] -= _amount;
        (bool success, ) = msg.sender.call{value: _amount}("");
        require(success, "Transfer failed");
    }
}
</code></pre>
<p><strong>æ”»å‡»è€…åˆçº¦</strong>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">contract Attacker {
    SimpleDAO public dao;

    constructor(address _dao) {
        dao = SimpleDAO(_dao);
    }

    // æ”»å‡»å…¥å£ï¼šå…ˆå­˜æ¬¾ï¼Œå†è§¦å‘æ¼æ´
    function attack() public payable {
        dao.deposit{value: 1 ether}();
        dao.splitDAO(address(this), 1 ether);  // å°†æ”¶æ¬¾åœ°å€è®¾ä¸ºè‡ªå·±
    }

    // æ”¶åˆ°ETHæ—¶çš„å›è°ƒ
    receive() external payable {
        if (address(dao).balance &gt;= 1 ether) {
            dao.withdraw(1 ether);  // âš ï¸ è·¨å‡½æ•°é‡å…¥ï¼šè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•° withdraw
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-3">3. æ”»å‡»è¿‡ç¨‹è¯¦è§£</h3>




























































<table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>çŠ¶æ€å˜åŒ– / å…³é”®ç‚¹</th></tr></thead><tbody><tr><td>1</td><td>æ”»å‡»è€… <code>attack()</code> è°ƒç”¨ <code>dao.deposit(1 ETH)</code></td><td><code>balances[attacker] = 1 ETH</code></td></tr><tr><td>2</td><td>è°ƒç”¨ <code>dao.splitDAO(attacker, 1 ETH)</code></td><td>è¿›å…¥æ¼æ´å‡½æ•°</td></tr><tr><td>3</td><td>æ£€æŸ¥ <code>balances[attacker] â‰¥ 1</code> â†’ é€šè¿‡</td><td>æ­¤æ—¶ä½™é¢ä»ä¸º 1</td></tr><tr><td>4</td><td>å‘æ”»å‡»è€…å‘é€ 1 ETH</td><td>è§¦å‘æ”»å‡»è€…çš„ <code>receive()</code></td></tr><tr><td>5</td><td><strong>æ”»å‡»è€… <code>receive()</code> å†…è°ƒç”¨ <code>dao.withdraw(1 ETH)</code></strong></td><td><strong>è·¨å‡½æ•°é‡å…¥å¼€å§‹</strong></td></tr><tr><td>6</td><td><code>withdraw</code> æ£€æŸ¥ <code>balances[attacker] â‰¥ 1</code></td><td><strong>ç”±äº splitDAO å°šæœªæ‰£æ¬¾ï¼Œä½™é¢ä»ä¸º 1 â†’ é€šè¿‡</strong></td></tr><tr><td>7</td><td><code>withdraw</code> æ‰£å‡ä½™é¢ (1 â†’ 0)ï¼Œå¹¶å‘æ”»å‡»è€…å‘é€ 1 ETH</td><td>æ”»å‡»è€…å†å¾— 1 ETH</td></tr><tr><td>8</td><td><code>withdraw</code> æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å› <code>splitDAO</code></td><td>ç»§ç»­æ‰§è¡ŒåŸ <code>splitDAO</code></td></tr><tr><td>9</td><td><code>splitDAO</code> æ‰§è¡Œ <code>balances[attacker] -= 1</code></td><td>æ­¤æ—¶ä½™é¢å·²æ˜¯ 0ï¼Œå†å‡ 1 â†’ ä¸‹æº¢ï¼Ÿåœ¨ Solidity 0.8+ ä¼šæŠ¥é”™ï¼Œæ—©æœŸç‰ˆæœ¬ä¼šå˜æˆ 2Â²âµâ¶-1</td></tr><tr><td>10</td><td>æ”»å‡»è€…å¯é‡å¤å¾ªç¯ï¼ˆè§†å›è°ƒæ§åˆ¶ï¼‰</td><td>ç›´è‡³åˆçº¦ ETH è€—å°½</td></tr></tbody></table>
<p><strong>æ”»å‡»æ•ˆæœ</strong>ï¼šæ”»å‡»è€…ä»æœ€åˆ 1 ETH ä½™é¢ï¼Œæœ€ç»ˆæå–å‡ºè¿œè¶…å…¶å®é™…ä»½é¢çš„èµ„é‡‘ã€‚</p>
<hr/>
<h3 data-id="heading-4">4. è·¨å‡½æ•°é‡å…¥ vs å…¶ä»–é‡å…¥ç±»å‹</h3>



































<table><thead><tr><th>ç±»å‹</th><th>é‡å…¥ç›®æ ‡å‡½æ•°</th><th>å…¸å‹ç‰¹å¾</th><th>ä»£è¡¨æ¡ˆä¾‹</th></tr></thead><tbody><tr><td><strong>å•å‡½æ•°é‡å…¥</strong></td><td><strong>åŒä¸€ä¸ªå‡½æ•°</strong></td><td>å‡½æ•°å†…éƒ¨é€’å½’è°ƒç”¨è‡ªèº«</td><td>ç»å…¸ææ¬¾æ¼æ´</td></tr><tr><td><strong>è·¨å‡½æ•°é‡å…¥</strong></td><td><strong>åŒä¸€åˆçº¦çš„ä¸åŒå‡½æ•°</strong></td><td>ä¸¤ä¸ªå‡½æ•°å…±äº«åŒä¸€çŠ¶æ€å˜é‡</td><td>The DAO æ”»å‡»</td></tr><tr><td><strong>è·¨åˆçº¦é‡å…¥</strong></td><td><strong>å¦ä¸€ä¸ªåˆçº¦çš„å‡½æ•°</strong></td><td>åˆçº¦ A è°ƒç”¨ Bï¼ŒB å›è°ƒ A çš„å‡½æ•°</td><td>å¤šæ¬¡å‘ç”Ÿäºè·¨åè®®äº¤äº’</td></tr><tr><td><strong>åªè¯»é‡å…¥</strong></td><td><strong><code>view</code> å‡½æ•°</strong></td><td>ä¸ä¿®æ”¹çŠ¶æ€ï¼Œä½†è¯»å–å°šæœªæ›´æ–°çš„æ•°æ®ï¼Œç”¨äºæ“çºµå…¶ä»–åè®®</td><td>Acala aUSD æ”»å‡»</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">5. é˜²å¾¡æªæ–½</h3>
<h4 data-id="heading-6">âœ… <strong>æ ¸å¿ƒé˜²å¾¡ï¼šæ£€æŸ¥-ç”Ÿæ•ˆ-äº¤äº’ï¼ˆChecks-Effects-Interactionsï¼‰</strong></h4>
<p>ä»»ä½•å¯èƒ½è¢«å¤–éƒ¨é‡å…¥çš„å‡½æ•°ï¼Œéƒ½å¿…é¡»åœ¨å¤–éƒ¨è°ƒç”¨<strong>ä¹‹å‰</strong>å®Œæˆæ‰€æœ‰å†…éƒ¨çŠ¶æ€æ›´æ–°ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">function splitDAO(address _recipient, uint _amount) public {
    uint userBalance = balances[msg.sender];
    require(userBalance &gt;= _amount, "Insufficient balance");

    // âœ… å…ˆæ›´æ–°çŠ¶æ€
    balances[msg.sender] -= _amount;

    // âœ… å†æ‰§è¡Œå¤–éƒ¨è°ƒç”¨
    (bool success, ) = _recipient.call{value: _amount}("");
    require(success, "Transfer failed");
}
</code></pre>
<h4 data-id="heading-7">âœ… <strong>é‡å…¥é”</strong></h4>
<p>ä½¿ç”¨ <code>ReentrancyGuard</code> ä¿®é¥°ç¬¦ï¼Œç¡®ä¿åœ¨å‡½æ•°æ‰§è¡ŒæœŸé—´æ•´ä¸ªåˆçº¦ä¸å¯é‡å…¥ã€‚<strong>æ³¨æ„</strong>ï¼šé‡å…¥é”æ˜¯å…¨å±€æ€§çš„ï¼Œå¯ä»¥åŒæ—¶é˜²å¾¡å•å‡½æ•°å’Œè·¨å‡½æ•°é‡å…¥ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">import "@openzeppelin/contracts/security/ReentrancyGuard.sol";

contract SimpleDAO is ReentrancyGuard {
    function splitDAO(address _recipient, uint _amount) public nonReentrant {
        // å®‰å…¨
    }
    function withdraw(uint _amount) public nonReentrant {
        // å®‰å…¨
    }
}
</code></pre>
<h4 data-id="heading-8">âœ… <strong>æœ€å°åŒ–å¤–éƒ¨è°ƒç”¨</strong></h4>
<p>ä»…åœ¨ç»å¯¹å¿…è¦æ—¶å‘èµ·å¤–éƒ¨è°ƒç”¨ï¼Œä¸”å°½å¯èƒ½åœ¨å‡½æ•°æœ«å°¾è¿›è¡Œã€‚è‹¥å¿…é¡»ä¸å¤–éƒ¨äº¤äº’ï¼Œä¼˜å…ˆä½¿ç”¨**â€œæ‹‰å–æ”¯ä»˜â€ï¼ˆPull Paymentï¼‰**æ¨¡å¼ï¼Œå°†å‘é€èµ„äº§çš„è´£ä»»è½¬ç§»ç»™ç”¨æˆ·ã€‚</p>
<hr/>
<h3 data-id="heading-9">6. ç°ä»£å¯ç¤ºä¸æ¼”å˜</h3>
<ul>
<li><strong>é‡å…¥é”å·²æˆä¸ºæ ‡å‡†</strong>ï¼šOpenZeppelin çš„ <code>ReentrancyGuard</code> è¢«ç»å¤§å¤šæ•° DeFi é¡¹ç›®é‡‡ç”¨ï¼Œæ˜¾è‘—é™ä½äº†è·¨å‡½æ•°é‡å…¥çš„é£é™©ã€‚</li>
<li><strong>åªè¯»é‡å…¥çš„æ–°æŒ‘æˆ˜</strong>ï¼šå³ä½¿ä¸ä¿®æ”¹çŠ¶æ€ï¼Œé‡å…¥æœŸé—´è¯»å–<strong>ä¸ä¸€è‡´çš„ç¬æ—¶çŠ¶æ€</strong>ä»å¯èƒ½è¢«ç”¨äºæ“çºµé¢„è¨€æœºã€ä»·æ ¼è®¡ç®—ç­‰ï¼Œéœ€è¦ç»“åˆå…¶ä»–çº¦æŸé˜²å¾¡ã€‚</li>
<li><strong>è·¨åˆçº¦é‡å…¥ä»éœ€è­¦æƒ•</strong>ï¼šå½“å¤šä¸ªåˆçº¦ååŒå·¥ä½œæ—¶ï¼Œå•ä¸€åˆçº¦çš„é‡å…¥é”æ— æ³•é˜»æ­¢å¦ä¸€åˆçº¦çš„å›è°ƒï¼Œéœ€è¦åè®®çº§åˆ«çš„åè°ƒè®¾è®¡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">æ€»ç»“</h3>
<p><strong>è·¨å‡½æ•°é‡å…¥æ˜¯é‡å…¥æ”»å‡»å®¶æ—ä¸­æå…·ç ´ååŠ›çš„æˆå‘˜</strong>ï¼Œå…¶æœ¬è´¨ä¾ç„¶æ˜¯<strong>çŠ¶æ€æ›´æ–°æ»åäºå¤–éƒ¨è°ƒç”¨</strong>ï¼Œåªæ˜¯é‡å…¥ç‚¹è¢«å¯¼å‘äº†å¦ä¸€ä¸ªå…±äº«çŠ¶æ€çš„å‡½æ•°ã€‚<br/>
é˜²å¾¡è·¨å‡½æ•°é‡å…¥å¹¶ä¸éœ€è¦ç‰¹æ®ŠæŠ€å·§â€”â€”<strong>éµå¾ª CEI æ¨¡å¼å¹¶é…åˆé‡å…¥é”</strong>å³å¯ä¸€åŠ³æ°¸é€¸åœ°è§£å†³é—®é¢˜ã€‚ç„¶è€Œï¼Œç†è§£å…¶ä¸å•å‡½æ•°é‡å…¥çš„åŒºåˆ«ï¼Œæœ‰åŠ©äºåœ¨å®¡è®¡ä¸­æ›´æ•é”åœ°è¯†åˆ«é‚£äº›**â€œçœ‹ä¼¼æ— å…³ï¼Œå®åˆ™å…±äº«çŠ¶æ€â€**çš„å‡½æ•°ç»„åˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[10åˆ†é’Ÿæ™ºèƒ½åˆçº¦ï¼šè¿›é˜¶å®æˆ˜-3.2.3 è·¨åˆçº¦é‡å…¥]]></title>    <link>https://juejin.cn/post/7605848213602500654</link>    <guid>https://juejin.cn/post/7605848213602500654</guid>    <pubDate>2026-02-12T14:09:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605848213602500654" data-draft-id="7605848213602271278" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="10åˆ†é’Ÿæ™ºèƒ½åˆçº¦ï¼šè¿›é˜¶å®æˆ˜-3.2.3 è·¨åˆçº¦é‡å…¥"/> <meta itemprop="keywords" content="Solidity,web3,æ™ºèƒ½åˆçº¦"/> <meta itemprop="datePublished" content="2026-02-12T14:09:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Rockbean"/> <meta itemprop="url" content="https://juejin.cn/user/4054654615823560"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            10åˆ†é’Ÿæ™ºèƒ½åˆçº¦ï¼šè¿›é˜¶å®æˆ˜-3.2.3 è·¨åˆçº¦é‡å…¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654615823560/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Rockbean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T14:09:05.000Z" title="Thu Feb 12 2026 14:09:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¬¢è¿è®¢é˜…ä¸“æ </strong>ï¼š<a href="https://juejin.cn/column/7602463463105642542" title="https://juejin.cn/column/7602463463105642542" target="_blank">10åˆ†é’Ÿæ™ºèƒ½åˆçº¦ï¼šè¿›é˜¶å®æˆ˜</a></p>
<h2 data-id="heading-0">è·¨åˆçº¦é‡å…¥ï¼šå®šä¹‰ã€åŸç†ä¸æ”»é˜²å®æˆ˜</h2>
<p><strong>è·¨åˆçº¦é‡å…¥</strong>æ˜¯æŒ‡æ”»å‡»è€…åˆ©ç”¨<strong>ä¸¤ä¸ªæˆ–ä»¥ä¸Šç‹¬ç«‹åˆçº¦ä¹‹é—´çš„ç›¸äº’è°ƒç”¨</strong>ï¼Œåœ¨å•ç¬”äº¤æ˜“ä¸­é€šè¿‡å›è°ƒæœºåˆ¶é‡æ–°è¿›å…¥<strong>åŸå§‹è°ƒç”¨è€…æˆ–å…¶ä»–ç›¸å…³åˆçº¦çš„å‡½æ•°</strong>ï¼Œä»è€Œåˆ©ç”¨å°šæœªæ›´æ–°çš„å…¨å±€çŠ¶æ€æˆ–è·¨åˆçº¦å…±äº«çŠ¶æ€æ‰§è¡Œéé¢„æœŸæ“ä½œã€‚</p>
<p>ä¸å•å‡½æ•°/è·¨å‡½æ•°é‡å…¥å±€é™äº<strong>åŒä¸€åˆçº¦å†…éƒ¨</strong>ä¸åŒï¼Œè·¨åˆçº¦é‡å…¥çš„æ”»å‡»é¢æ¨ªè·¨<strong>å¤šä¸ªåˆçº¦çš„è¾¹ç•Œ</strong>ï¼Œåœ¨ DeFi ç»„åˆå¼æ¶æ„ä¸­å°¤ä¸ºå¸¸è§ä¸”éšè”½ã€‚</p>
<hr/>
<h3 data-id="heading-1">1. æ ¸å¿ƒåŸç†</h3>
<p>è·¨åˆçº¦é‡å…¥çš„æ ¹æºä¾ç„¶æ˜¯<strong>çŠ¶æ€æ›´æ–°æ»åäºå¤–éƒ¨è°ƒç”¨</strong>ï¼Œä½†è„†å¼±ç‚¹å‡ºç°åœ¨<strong>åˆçº¦é—´çš„ä¿¡ä»»å‡è®¾</strong>ä¸Šï¼š</p>
<ul>
<li>åˆçº¦ A è°ƒç”¨åˆçº¦ B çš„æŸä¸ªå‡½æ•°ï¼Œå¹¶å‡è®¾åˆçº¦ B æ˜¯â€œè¯šå®çš„â€æˆ–â€œæ— å‰¯ä½œç”¨çš„â€ã€‚</li>
<li>åˆçº¦ B åœ¨è¢«è°ƒç”¨æœŸé—´ï¼Œ<strong>å›è°ƒåˆçº¦ A çš„å¦ä¸€ä¸ªå‡½æ•°</strong>ï¼Œè¯¥å‡½æ•°ä¸åˆçº¦ A æ­£åœ¨æ‰§è¡Œçš„é€»è¾‘<strong>å…±äº«åŒä¸€çŠ¶æ€å˜é‡</strong>ã€‚</li>
<li>ç”±äºåˆçº¦ A å°šæœªå®ŒæˆçŠ¶æ€æ›´æ–°ï¼Œå›è°ƒå‡½æ•°è¯»å–çš„æ˜¯æ—§çŠ¶æ€ï¼Œä»è€Œæ‰§è¡Œæœªæˆæƒçš„æ“ä½œã€‚</li>
</ul>
<p><strong>å…³é”®ç‰¹å¾</strong>ï¼šæ”»å‡»è€…ä¸ä¸€å®šç›´æ¥éƒ¨ç½²æ”»å‡»åˆçº¦ï¼Œè€Œæ˜¯<strong>åˆ©ç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„ã€çœ‹ä¼¼æ­£å¸¸çš„ç¬¬ä¸‰æ–¹åˆçº¦</strong>ä½œä¸ºé‡å…¥è·³æ¿ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. ç»å…¸ç¤ºä¾‹ï¼šERC-777 ä¸ Uniswap V1 æµåŠ¨æ€§æ± æ”»å‡»</h3>
<p>2019 å¹´ï¼ŒimBTCï¼ˆERC-777ï¼‰ä¸ Uniswap V1 æ± çš„ç»„åˆè¢«æ›å‡ºè·¨åˆçº¦é‡å…¥æ¼æ´ï¼Œæ”»å‡»è€…ä»…ç”¨ 0.000001 ETH å°±ç›—èµ°äº†æ± ä¸­æ‰€æœ‰ imBTCã€‚è¿™æ˜¯è·¨åˆçº¦é‡å…¥çš„æ•™ç§‘ä¹¦æ¡ˆä¾‹ã€‚</p>
<h4 data-id="heading-3">ğŸ“Œ èƒŒæ™¯è®¾å®š</h4>
<ul>
<li>
<p><strong>Uniswap V1 æ± </strong>ï¼šå…è®¸ç”¨æˆ·ç”¨ ETH å…‘æ¢ imBTCï¼Œæ ¸å¿ƒå‡½æ•° <code>ethToTokenSwap</code> æ‰§è¡Œï¼š</p>
<ol>
<li>è®¡ç®—åº”è¾“å‡ºçš„ imBTC æ•°é‡ã€‚</li>
<li><strong>å…ˆå‘ç”¨æˆ·å‘é€ imBTCï¼ˆè°ƒç”¨ imBTC çš„ <code>transfer</code>ï¼‰</strong>ã€‚</li>
<li>å†æ‰£é™¤ç”¨æˆ·çš„ ETHã€‚</li>
</ol>
</li>
<li>
<p><strong>imBTCï¼ˆERC-777ï¼‰</strong>ï¼šERC-777 åœ¨è½¬è´¦æ—¶ä¼š<strong>å›è°ƒæ¥æ”¶æ–¹åˆçº¦çš„ <code>tokensReceived()</code> é’©å­å‡½æ•°</strong>ã€‚å¦‚æœæ¥æ”¶æ–¹æ˜¯åˆçº¦ï¼Œ<code>tokensReceived()</code> ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚</p>
</li>
</ul>
<h4 data-id="heading-4">ğŸ”¥ æ”»å‡»è·¯å¾„</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Attacker
    participant UniswapV1
    participant imBTC(ERC777)
    participant AttackerContract

    Attacker-&gt;&gt;UniswapV1: ethToTokenSwap(æå°ETH)
    UniswapV1-&gt;&gt;imBTC(ERC777): transfer(imBTCç»™æ”»å‡»è€…)
    imBTC(ERC777)-&gt;&gt;AttackerContract: tokensReceived() å›è°ƒ
    AttackerContract-&gt;&gt;UniswapV1: ethToTokenSwap(å†æ¬¡å…‘æ¢) âš ï¸ é‡å…¥
    UniswapV1-&gt;&gt;imBTC(ERC777): transfer(imBTC)
    imBTC(ERC777)--&gt;&gt;AttackerContract: ...å¾ªç¯...
    UniswapV1--&gt;&gt;Attacker: å®Œæˆé¦–æ¬¡å…‘æ¢
</code></pre>
<ol>
<li><strong>æ”»å‡»è€…</strong>è°ƒç”¨ Uniswap V1 çš„ <code>ethToTokenSwap</code>ï¼Œ<strong>ä»…æ”¯ä»˜ 0.000001 ETH</strong>ã€‚</li>
<li>Uniswap è®¡ç®—åº”å¾— imBTCï¼Œè°ƒç”¨ imBTC çš„ <code>transfer</code> å‘æ”»å‡»è€…å‘é€ä»£å¸ã€‚</li>
<li>**imBTCï¼ˆERC-777ï¼‰**åœ¨æ‰§è¡Œè½¬è´¦æ—¶ï¼Œè°ƒç”¨æ”»å‡»è€…åˆçº¦çš„ <code>tokensReceived()</code> é’©å­ã€‚</li>
<li>åœ¨ <code>tokensReceived()</code> ä¸­ï¼Œæ”»å‡»è€…åˆçº¦<strong>å†æ¬¡è°ƒç”¨åŒä¸€ä¸ª Uniswap æ± çš„ <code>ethToTokenSwap</code></strong>ã€‚</li>
<li>ç”±äº<strong>ç¬¬ä¸€æ¬¡è°ƒç”¨çš„çŠ¶æ€ï¼ˆç”¨æˆ· ETH æ‰£æ¬¾ï¼‰å°šæœªæ‰§è¡Œ</strong>ï¼ŒUniswap è®¤ä¸ºæ”»å‡»è€…ä»ç„¶æ‹¥æœ‰æå°çš„ ETH ä½™é¢ï¼Œäºæ˜¯å†æ¬¡ä¸ºå…¶è®¡ç®—å¹¶å‘é€ imBTCã€‚</li>
<li>å¾ªç¯é‡å¤ï¼Œç›´è‡³æ± ä¸­ imBTC è¢«è€—å°½ã€‚</li>
</ol>
<p><strong>æ”»å‡»ç»“æœ</strong>ï¼šæ”»å‡»è€…é€šè¿‡é‡å…¥ï¼Œç”¨å‡ ä¹ä¸ºé›¶çš„æˆæœ¬åå¤æå– imBTCï¼Œæœ€ç»ˆå·èµ°æ± ä¸­æ‰€æœ‰æµåŠ¨æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-5">3. æ”»å‡»æˆåŠŸçš„å…³é”®æ¡ä»¶</h3>

























<table><thead><tr><th>æ¡ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è°ƒç”¨é¡ºåºé”™è¯¯</strong></td><td>åˆçº¦åœ¨<strong>å‘é€èµ„äº§ä¹‹å</strong>æ‰æ›´æ–°è‡ªèº«çŠ¶æ€ï¼ˆå¦‚æ‰£æ¬¾ï¼‰ã€‚</td></tr><tr><td><strong>ä»£å¸å…·æœ‰å›è°ƒæœºåˆ¶</strong></td><td>ERC-777ã€ERC-223ã€éƒ¨åˆ† ERC-721 å®ç°ï¼Œä»¥åŠæ”¯æŒ <code>safeTransfer</code> çš„ ERC-1155ï¼Œå‡å¯èƒ½è§¦å‘æ¥æ”¶æ–¹é’©å­ã€‚</td></tr><tr><td><strong>æ¥æ”¶æ–¹æ˜¯æ”»å‡»è€…å¯ç¼–ç¨‹åˆçº¦</strong></td><td>æ”»å‡»è€…å¯åœ¨é’©å­å‡½æ•°ä¸­å‘èµ·æ–°çš„äº¤æ˜“ã€‚</td></tr><tr><td><strong>çŠ¶æ€å…±äº«</strong></td><td>Uniswap çš„çŠ¶æ€å˜é‡ï¼ˆå¦‚ <code>balanceOf</code>ã€å‚¨å¤‡é‡ï¼‰åœ¨ä¸¤ä¸ªè°ƒç”¨é—´è¢«å…±äº«ï¼Œä¸”æœªå—é‡å…¥é”ä¿æŠ¤ã€‚</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-6">4. ä¸å…¶ä»–é‡å…¥ç±»å‹çš„å¯¹æ¯”</h3>



































<table><thead><tr><th>ç»´åº¦</th><th>å•å‡½æ•°é‡å…¥</th><th>è·¨å‡½æ•°é‡å…¥</th><th>è·¨åˆçº¦é‡å…¥</th></tr></thead><tbody><tr><td><strong>é‡å…¥ç›®æ ‡</strong></td><td>åŒä¸€ä¸ªå‡½æ•°</td><td>åŒä¸€åˆçº¦çš„ä¸åŒå‡½æ•°</td><td><strong>ä¸åŒåˆçº¦</strong>ï¼ˆæˆ–åŒä¸€åˆçº¦ä½†è§¦å‘è·¯å¾„è·¨åˆçº¦ï¼‰</td></tr><tr><td><strong>å›è°ƒå…¥å£</strong></td><td><code>receive()</code> / <code>fallback()</code></td><td>å¤–éƒ¨è°ƒç”¨çš„å›è°ƒ</td><td>ä»£å¸è½¬è´¦é’©å­ã€é¢„è¨€æœºå›è°ƒã€è·¨åˆçº¦äº¤äº’</td></tr><tr><td><strong>å…¸å‹åœºæ™¯</strong></td><td>ETH ææ¬¾</td><td>The DAO æ‹†åˆ†ææ¡ˆ</td><td>ERC-777 + å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€</td></tr><tr><td><strong>é˜²å¾¡éš¾åº¦</strong></td><td>ä½</td><td>ä¸­</td><td><strong>é«˜</strong>ï¼ˆéœ€è¦è·¨åˆçº¦åè°ƒï¼‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">5. é˜²å¾¡æªæ–½</h3>
<h4 data-id="heading-8">âœ… <strong>ä¸¥æ ¼éµå¾ª CEIï¼ˆæ£€æŸ¥-ç”Ÿæ•ˆ-äº¤äº’ï¼‰æ¨¡å¼</strong></h4>
<p>æ‰€æœ‰å¤–éƒ¨è°ƒç”¨ï¼ˆåŒ…æ‹¬å‘ç”¨æˆ·å‘é€ä»£å¸ï¼‰å¿…é¡»<strong>æ”¾åœ¨å‡½æ•°æœ€å</strong>ï¼Œä¸”åœ¨æ­¤ä¹‹å‰å®Œæˆæ‰€æœ‰çŠ¶æ€æ›´æ–°ã€‚</p>
<p><strong>Uniswap V1 çš„ä¿®å¤</strong>ï¼šå°† <code>transfer</code> ç§»åˆ°æ‰£æ¬¾ä¹‹åã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">// ä¿®å¤å‰ï¼ˆæ¼æ´ç‰ˆï¼‰
function ethToTokenSwap(uint256 minTokens) public payable {
    uint256 tokensOut = getTokenAmount(msg.value);
    token.transfer(msg.sender, tokensOut);  // âŒ å…ˆè½¬è´¦
    balances[msg.sender] += msg.value;      // åè®°è´¦
}

// ä¿®å¤åï¼ˆå®‰å…¨ç‰ˆï¼‰
function ethToTokenSwap(uint256 minTokens) public payable {
    uint256 tokensOut = getTokenAmount(msg.value);
    balances[msg.sender] += msg.value;      // âœ… å…ˆæ›´æ–°çŠ¶æ€
    token.transfer(msg.sender, tokensOut);  // âœ… åå¤–éƒ¨è°ƒç”¨
}
</code></pre>
<h4 data-id="heading-9">âœ… <strong>ä½¿ç”¨é‡å…¥é”</strong></h4>
<p>å³ä½¿éµå¾ª CEIï¼Œä»å»ºè®®å¯¹å…³é”®å‡½æ•°æ·»åŠ  <code>nonReentrant</code> ä¿®é¥°ç¬¦ï¼Œé˜²æ­¢æ„å¤–é‡å…¥ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">import "@openzeppelin/contracts/security/ReentrancyGuard.sol";

contract UniswapV1Pool is ReentrancyGuard {
    function ethToTokenSwap(...) public nonReentrant {
        // ...
    }
}
</code></pre>
<h4 data-id="heading-10">âœ… <strong>é€‰æ‹©æ— å›è°ƒçš„ä»£å¸æ ‡å‡†</strong></h4>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨ <strong>ERC-20</strong>ï¼ˆæ— è½¬è´¦é’©å­ï¼‰è€Œé ERC-777ã€‚</li>
<li>è‹¥å¿…é¡»ä½¿ç”¨æœ‰é’©å­çš„ä»£å¸ï¼Œåè®®åº”æ˜ç¡®å£°æ˜é£é™©ï¼Œæˆ–åœ¨äº¤äº’å‰æ£€æŸ¥æ¥æ”¶æ–¹æ˜¯å¦ä¸ºåˆçº¦å¹¶æ–½åŠ é™åˆ¶ã€‚</li>
</ul>
<h4 data-id="heading-11">âœ… <strong>è·¨åˆçº¦é‡å…¥çš„åè®®çº§é˜²å¾¡</strong></h4>
<p>å¯¹äºå¤šä¸ªåˆçº¦æ„æˆçš„ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€é‡å…¥é”</strong>ï¼šé€šè¿‡å…±äº«çš„å…¨å±€é”çŠ¶æ€ï¼Œç¡®ä¿æ•´ä¸ªåè®®åœ¨ä¸€ç¬”äº¤æ˜“ä¸­ä¸å¯é‡å…¥ã€‚</li>
<li><strong>å¿«ç…§æœºåˆ¶</strong>ï¼šåœ¨æ‰§è¡Œæ•æ„Ÿæ“ä½œå‰ï¼Œå¯¹ç›¸å…³çŠ¶æ€è¿›è¡Œå¿«ç…§ï¼Œæ“ä½œå®Œæˆåæ£€æŸ¥çŠ¶æ€æ˜¯å¦è¢«æ„å¤–ç¯¡æ”¹ã€‚</li>
</ul>
<h4 data-id="heading-12">âœ… <strong>å®¡è®¡é‡ç‚¹</strong></h4>
<p>å®¡è®¡æ—¶åº”ç‰¹åˆ«å…³æ³¨ï¼š</p>
<ul>
<li>ä»»ä½•<strong>å…ˆè½¬è´¦åæ›´æ–°çŠ¶æ€</strong>çš„ä»£ç æ¨¡å¼ã€‚</li>
<li>ä½¿ç”¨<strong>ERC-777/ERC-223/ERC-1155</strong>ç­‰å¸¦é’©å­ä»£å¸çš„äº¤äº’ã€‚</li>
<li>å¤šä¸ªåˆçº¦é—´ç›¸äº’è°ƒç”¨çš„é—­ç¯è·¯å¾„ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">6. ç°ä»£å˜ä½“ï¼šè·¨åˆçº¦åªè¯»é‡å…¥</h3>
<p>2022 å¹´ Acala aUSD æ”»å‡»æ˜¯è·¨åˆçº¦é‡å…¥çš„ç°ä»£å˜ä½“â€”â€”<strong>åªè¯»é‡å…¥</strong>ã€‚æ”»å‡»è€…é€šè¿‡é‡å…¥è°ƒç”¨ä¸€ä¸ª <code>view</code> å‡½æ•°ï¼Œè¯»å–<strong>å°šæœªæ›´æ–°çš„å‚¨å¤‡é‡</strong>ï¼Œä»è€Œæ“çºµä»·æ ¼é¢„è¨€æœºï¼Œæœ€ç»ˆ mint å‡ºå·¨é‡ aUSDã€‚</p>
<p>é˜²å¾¡è¿™ç§æ”»å‡»éœ€è¦æ›´ç»†ç²’åº¦çš„çŠ¶æ€ç®¡ç†ï¼Œä¾‹å¦‚åœ¨é‡å…¥é”ç”Ÿæ•ˆæ—¶<strong>ç¦æ­¢è¯»å–æŸäº›å…³é”®çŠ¶æ€</strong>ï¼Œæˆ–å¼•å…¥<strong>ç¬æ€å­˜å‚¨</strong>ï¼ˆEIP-1153ï¼‰æ¥éš”ç¦»æœªæäº¤çš„æ›´æ”¹ã€‚</p>
<hr/>
<h3 data-id="heading-14">æ€»ç»“</h3>
<p><strong>è·¨åˆçº¦é‡å…¥æ˜¯é‡å…¥æ”»å‡»çš„é«˜çº§å½¢æ€</strong>ï¼Œå®ƒçªç ´äº†å•ä¸€åˆçº¦çš„è¾¹ç•Œï¼Œå°†æ”»å‡»é¢å»¶ä¼¸è‡³ DeFi çš„å¯ç»„åˆæ€§ä¸­ã€‚å®ƒçš„æœ¬è´¨ä¾ç„¶æ˜¯<strong>çŠ¶æ€æ›´æ–°æ»åäºå¤–éƒ¨è°ƒç”¨</strong>ï¼Œä½†æ”»å‡»è½½ä½“ä»ç®€å•çš„ ETH è½¬è´¦å‡çº§ä¸ºä»£å¸æ ‡å‡†ä¸­éšå«çš„å›è°ƒæœºåˆ¶ã€‚é˜²å¾¡è·¨åˆçº¦é‡å…¥ä¸ä»…éœ€è¦å•ä¸ªåˆçº¦çš„ä¸¥è°¨ç¼–å†™ï¼Œæ›´éœ€è¦åœ¨<strong>åè®®æ¶æ„å±‚é¢</strong>å»ºç«‹ç»Ÿä¸€çš„é˜²é‡å…¥ç­–ç•¥ã€‚</p>
<p><strong>æ ¸å¿ƒæ•™è®­</strong>ï¼šä»»ä½•å¯¹å¤–éƒ¨åˆçº¦çš„è°ƒç”¨ï¼Œæ— è®ºè¯¥åˆçº¦çœ‹èµ·æ¥å¤šä¹ˆâ€œå®‰å…¨â€ï¼Œéƒ½å¿…é¡»å‡è®¾å®ƒå¯èƒ½åœ¨æ‰§è¡ŒæœŸé—´å›è°ƒä½ çš„åˆçº¦ã€‚<strong>å…ˆæ›´æ–°ï¼Œåäº¤äº’</strong>â€”â€”è¿™æ¡é“å¾‹ä»æœªè¿‡æ—¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡openrestyçš„ç½‘å…³æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…]]></title>    <link>https://juejin.cn/post/7605769126271336494</link>    <guid>https://juejin.cn/post/7605769126271336494</guid>    <pubDate>2026-02-12T15:11:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605769126271336494" data-draft-id="7605711582430167091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡openrestyçš„ç½‘å…³æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-12T15:11:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£çš„å½’å®¿55"/> <meta itemprop="url" content="https://juejin.cn/user/2840793779297303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡openrestyçš„ç½‘å…³æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793779297303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£çš„å½’å®¿55
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T15:11:07.000Z" title="Thu Feb 12 2026 15:11:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬å…¬å¸æ˜¯ä½¿ç”¨openrestyä½œä¸ºç½‘å…³ï¼Œç”¨äºè¿›è¡Œæƒé™è®¤è¯ï¼Œåå‘ä»£ç†ï¼Œä»¥åŠä¸€äº›è¯·æ±‚çš„å¤„ç†ã€‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Œå¤§éƒ¨åˆ†æ—¶å€™openrestyçš„æ€§èƒ½éƒ½å¾ˆå¥½ï¼Œcpuä½¿ç”¨ç‡éƒ½å¾ˆä½ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¼šçªç„¶cpué£™å‡ï¼Œnginxçš„cpuæ‰“æ»¡ï¼Œç„¶åè¯·æ±‚å¤„ç†å¼€å§‹å¤±è´¥ã€‚ä½†æ˜¯è¿™ç§æƒ…å†µå‡ºç°æ¬¡æ•°å°‘ï¼ŒæŒç»­æ—¶é—´ä¸é•¿ï¼Œæ²¡æ³•æŠŠcpuç«ç„°å›¾æŠ“å‡ºæ¥æŸ¥çœ‹åŸå› ã€‚</p>
<p>å› æ­¤è¿™é‡Œè¿›è¡Œä¸€æ¬¡ç½‘å…³æ€§èƒ½ä¼˜åŒ–çš„æ¢ç´¢ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªç›®çš„ï¼Œä¸€æ˜¯æé«˜openrestyçš„ç½‘å…³æ€§èƒ½ï¼Œå¤„ç†å¶ç°çš„è¿™ç§å¼‚å¸¸æƒ…å†µã€‚äºŒæ˜¯å¸Œæœ›èƒ½æœ‰ä¸€ç§é€šç”¨çš„æ™ºèƒ½çš„openrestyé™æµæ–¹æ¡ˆï¼Œèƒ½ç¡®ä¿åœ¨æé™è¯·æ±‚å‹åŠ›ä¸‹ï¼Œopenrestyèƒ½é€šè¿‡æ‹’ç»ä¸€éƒ¨åˆ†è¯·æ±‚çš„æ–¹å¼ä¿éšœå¤§éƒ¨åˆ†è¯·æ±‚æ­£å¸¸è¢«å¤„ç†ã€‚</p>
<h4 data-id="heading-0">ä¸€ã€openrestyç½‘å…³æ€§èƒ½ä¼˜åŒ–</h4>
<p>è¿™é‡Œé¦–å…ˆå°è¯•æ¢ç´¢openrestyç½‘å…³çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆã€‚ä¸»è¦çš„æ€è·¯å°±æ˜¯å…ˆæ¨¡æ‹Ÿå‡ºçº¿ä¸Šå‡ºç°é—®é¢˜çš„æƒ…å†µï¼Œå› ä¸ºçº¿ä¸Šæƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œä¸å¥½å®Œå…¨æ¨¡æ‹Ÿï¼Œè¿™é‡Œè®¾è®¡ä¸€ä¸ªæ¥å£ï¼Œå°†çº¿ä¸Šæœ€å¸¸è§çš„é‰´æƒä»£ç æ”¾è¿›å»ï¼Œç„¶åé™åˆ¶openrestyçš„cpuä¸Šé™ï¼Œæ¥ç€ç”¨é«˜å¹¶å‘å‹æµ‹è¿™ä¸ªæ¥å£ï¼ŒæŠŠopenrestyçš„cpuæ‰“æ»¡ï¼Œæ¨¡æ‹Ÿçº¿ä¸Šçš„æƒ…å†µã€‚</p>
<p>æ¨¡æ‹Ÿåé€šè¿‡ç›‘æ§æŸ¥çœ‹openrestyçš„qpsä»¥åŠæ¥å£æˆåŠŸç‡ï¼Œä»¥è¿™ä¸¤è€…çš„ä¹˜ç§¯ï¼Œå³æ¯ç§’çš„æˆåŠŸè¯·æ±‚æ•°ä½œä¸ºæœ€ç»ˆå‹æµ‹çš„ç»“æœã€‚ åé¢é€šè¿‡å‡ ç§æ–¹æ¡ˆä¿®æ”¹å¹¶é‡å¤å‹æµ‹ï¼Œé€šè¿‡æ¯ç§’æˆåŠŸæ•°æ¥åˆ¤æ–­æ–¹æ¡ˆæ˜¯å¦æœ‰æ•ˆæé«˜äº†openrestyçš„æ€§èƒ½ã€‚</p>
<h5 data-id="heading-1">1.1 å‹æµ‹ç¯å¢ƒä»‹ç»</h5>
<p>è¿™é‡Œé¦–å…ˆä»‹ç»ä¸‹å‹æµ‹ç¯å¢ƒï¼š</p>
<ol>
<li>openrestyä½¿ç”¨k8séƒ¨ç½²ï¼Œå°†å…¶cpu limitè®¾ç½®ä¸º0.3ï¼Œé€šè¿‡ä¸€ä¸ªè¾ƒä½çš„cpuä¸Šçº¿èƒ½æ›´åŠ å®¹æ˜“çš„æŠŠcpuæ‰“æ»¡ï¼Œæ–¹ä¾¿å‹æµ‹ã€‚</li>
<li>å‹æµ‹å·¥å…·ä½¿ç”¨heyï¼Œhey -t 5 -n 999999999 -c 3700 -q 1 '<a href="https://link.juejin.cn?target=http%3A%2F%2F172.16.1.97%3A8001%2Ftest%2Fnomal%2Frequest" target="_blank" title="http://172.16.1.97:8001/test/nomal/request" ref="nofollow noopener noreferrer">http://172.16.1.97:8001/test/nomal/request</a>' é€šè¿‡è¿™ç§å‘½ä»¤æŒç»­å‹æµ‹ï¼Œ-c ä»£è¡¨å¹¶å‘æ˜¯3700ï¼Œ-qä»£è¡¨æ¯ç§’æ¯ä¸ªå¹¶å‘æœ€å¤šè¯·æ±‚ä¸€æ¬¡ï¼Œè¿™æ ·é™åˆ¶äº†æ€»çš„qpsæœ€å¤šä¸º3700ã€‚</li>
<li>æ¥å£/test/nomal/requestçš„é€»è¾‘å¦‚ä¸‹ï¼Œç®€å•ç‚¹è¯´çš„è¯ï¼Œå°±æ˜¯å…ˆæŸ¥redisæŸ¥æ‰¾è®¤è¯ä¿¡æ¯ï¼Œæ²¡æŸ¥åˆ°å°±ä»mongoæ•°æ®åº“ä¸­æ‰¾ï¼Œå¹¶è®¾ç½®åˆ°redisä¸­ä¾›ä¸‹æ¬¡ä½¿ç”¨ï¼Œæ˜¯å¾ˆå¸¸è§çš„æˆæƒè®¤è¯æ–¹å¼ã€‚è¿™é‡Œç®€åŒ–äº†ä¸‹ï¼Œå¤§å®¶å¯ä»¥ç®€å•çœ‹ä¸‹ä»£ç ä½“ä¼šä¸‹ã€‚åé¢åšäº†ä¸ªå¤„ç†ï¼Œå¦‚æœredisæˆ–è€…mongoä¸­æŸ¥åˆ°äº†æ•°æ®ï¼Œåˆ™è¿”å›200çŠ¶æ€ç ï¼Œå¦åˆ™è¿”å›503çŠ¶æ€ç ï¼Œè¿™æ ·å¯ä»¥åœ¨nginxç›‘æ§æˆ–è€…å‹æµ‹ç»“æœä¸­æ¯”è¾ƒæ¸…æ¥šçš„çœ‹å‡ºæ¥æˆåŠŸç‡ã€‚</li>
</ol>

<pre><code class="hljs language-bash" lang="bash">       location /test/nomal/request {
             content_by_lua_block {
               <span class="hljs-keyword">function</span> getAuthInfo(<span class="hljs-built_in">id</span>)
                 <span class="hljs-built_in">local</span> authInfo = redis:get(<span class="hljs-string">"L-"</span> .. <span class="hljs-built_in">id</span>)
                 <span class="hljs-keyword">if</span> not authInfo <span class="hljs-keyword">then</span>
                  <span class="hljs-built_in">local</span> authInfo = get_from_mongo(<span class="hljs-built_in">id</span>)
                  <span class="hljs-keyword">if</span> authInfo and cjson.encode(authInfo) ~= <span class="hljs-string">""</span> <span class="hljs-keyword">then</span>
                    redis:<span class="hljs-built_in">set</span>(<span class="hljs-string">"L-"</span> .. <span class="hljs-built_in">id</span>, authInfo)
                  <span class="hljs-keyword">else</span>
                    <span class="hljs-built_in">return</span> nil
                  end
                end
                <span class="hljs-built_in">return</span> authInfo
              end

                <span class="hljs-built_in">local</span> <span class="hljs-built_in">id</span> = getAuthInfo(<span class="hljs-string">"testId"</span>)
                <span class="hljs-keyword">if</span> not <span class="hljs-built_in">id</span> or tostring(<span class="hljs-built_in">id</span>)==<span class="hljs-string">""</span> <span class="hljs-keyword">then</span>
                  <span class="hljs-built_in">return</span> ngx.exit(ngx.HTTP_SERVICE_UNAVAILABLE)
                end
                <span class="hljs-built_in">return</span> ngx.exit(ngx.HTTP_OK)
            }
       }
</code></pre>
<p>4.  rediså’Œmongoéƒ½åšäº†é™æµä¿æŠ¤ï¼Œé¿å…å› ä¸ºç½‘å…³å ç”¨äº†å¤ªå¤šè¿æ¥ï¼Œå¯¼è‡´å…¶ä»–æœåŠ¡è¿æ¥redisæˆ–è€…mongoå‡ºç°é—®é¢˜ï¼Œredisçš„è¿æ¥æ± æ•°é‡æ˜¯500ï¼Œè¶…è¿‡è¿™ä¸ªæ•°é‡çš„redisè¯·æ±‚ä¼šè¢«æ”¾åœ¨ä¸€ä¸ª400é•¿åº¦çš„é˜Ÿåˆ—ä¸­ï¼Œè¶…å‡ºè¿™ä¸ªé˜Ÿåˆ—çš„è¯·æ±‚ä¼šç›´æ¥å¤±è´¥ã€‚</p>
<h5 data-id="heading-2">1.2 çº¿ä¸Šç¯å¢ƒæ¨¡æ‹Ÿ</h5>
<p>è¿™é‡Œé¦–å…ˆæ¨¡æ‹Ÿçº¿ä¸Šç¯å¢ƒï¼ŒæŠŠopenrestyçš„cpuæ‰“æ»¡ï¼Œå¹¶ä¸”é€šè¿‡æŠ“å–ç«ç„°å›¾æ¥åˆ†æcpuä½¿ç”¨æƒ…å†µã€‚å‹æµ‹å‘½ä»¤éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™ä¸ªåç»­ä¸å†è¯´æ˜ï¼š
hey -t 5 -n 999999999 -c 3700 -q 1 '<a href="https://link.juejin.cn?target=http%3A%2F%2F172.16.1.97%3A8001%2Ftest%2Fnomal%2Frequest" target="_blank" title="http://172.16.1.97:8001/test/nomal/request" ref="nofollow noopener noreferrer">http://172.16.1.97:8001/test/nomal/request</a>'</p>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>
<p>qps: 2500</p>
<p>æˆåŠŸç‡ï¼š14%</p>
<p>æ¯ç§’æˆåŠŸè¯·æ±‚æ•°ï¼š2500*14%=350</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bfb76b850284bc99f8a44ae3830910e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=ftygHeYOYrxU7tu3QaZ8mfbJEwI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e00acb87b6a4ac39afb9e640d49dfef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=6CPRxBDVTI1nrjxxAEtOez88zFQ%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å¯¼å‡ºçš„luaç«ç„°å›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12edccf346224c4ea861c8e0f17c4657~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=Hjs%2Fdrlb3aOEw7DtbmWMOJ47UZg%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åˆ†æï¼š</strong></p>
<p>ä»å¯¼å‡ºçš„luaç«ç„°å›¾å¯ä»¥çœ‹å‡ºï¼Œluaçš„å¤§éƒ¨åˆ†cpuéƒ½è¢«ç”¨åœ¨äº†mongoåº“çš„å¤„ç†ä¸Šï¼Œå› æ­¤æˆ‘ä»¬ä¸‹ä¸€æ­¥çš„ä¼˜åŒ–æ–¹å‘å°±æ˜¯é€šè¿‡å‡å°‘mongoè¯·æ±‚æ¥æå‡å¤„ç†èƒ½åŠ›ã€‚è¿™é‡Œæ¨èä¸‹ï¼Œå¦‚æœæƒ³è¦é…ç½®åŒæ¬¾çš„nginxç›‘æ§å’Œluaå¯¼å‡ºç«ç„°å›¾ï¼Œå¯ä»¥æŸ¥çœ‹ç¬”è€…ä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7588080521445294126" target="_blank" title="https://juejin.cn/post/7588080521445294126">openrestyç›‘æ§</a> ä»¥åŠ <a href="https://juejin.cn/post/7577689171222708274" target="_blank" title="https://juejin.cn/post/7577689171222708274">openrestyå®¹å™¨å¯¼å‡ºç«ç„°å›¾</a></p>
<h5 data-id="heading-3">1.3 ä¼˜åŒ–mongoè¯·æ±‚</h5>
<p>ä»”ç»†æŸ¥çœ‹æ—¥å¿—åå‘ç°ï¼Œå› ä¸ºcpuæ‰“æ»¡äº†ï¼Œopenrestyçš„å¤„ç†é€Ÿåº¦å˜æ…¢ï¼Œå¾ˆå¤šredisçš„è¿æ¥å¯èƒ½ç­‰å¾…äº†ä¸€ç§’éƒ½æ²¡è¢«å¤„ç†ï¼Œè¿™å°±è¶…è¿‡äº†redisçš„è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå¯¼è‡´ç¼“å­˜ç©¿é€ï¼Œè¯·æ±‚éƒ½å»æŸ¥mongoäº†ï¼Œå³ä½¿mongoè¿æ¥ä¹Ÿæœ‰é™åˆ¶ï¼Œä½†æ˜¯æŸ¥è¯¢mongoçš„åº“ä¼°è®¡æ¯”è¾ƒå ç”¨cpuï¼Œå¯¼è‡´è¿™éƒ¨åˆ†cpuä½¿ç”¨ç‡è¾ƒé«˜ã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥è¿›è¡Œä»£ç ä¼˜åŒ–ï¼Œåªæœ‰åœ¨redisæŸ¥è¯¢æˆåŠŸï¼Œä½†æ˜¯æ²¡æŸ¥åˆ°æ•°æ®çš„æƒ…å†µä¸‹æ‰å»æŸ¥mongoï¼Œè¿™æ ·å°±èƒ½é¿å…rediså¤±è´¥æ—¶ç©¿é€åˆ°mongoã€‚</p>
<pre><code class="hljs language-bash" lang="bash">              <span class="hljs-keyword">function</span> getAuthInfo(<span class="hljs-built_in">id</span>)
                 <span class="hljs-built_in">local</span> authInfo,err = redis:get(<span class="hljs-string">"L-"</span> .. <span class="hljs-built_in">id</span>)
                 <span class="hljs-keyword">if</span> not authInfo and not err <span class="hljs-keyword">then</span>
                  <span class="hljs-built_in">local</span> authInfo = get_from_mongo(<span class="hljs-built_in">id</span>)
</code></pre>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>
<p>qps: 2816</p>
<p>æˆåŠŸç‡ï¼š27.4%</p>
<p>æ¯ç§’æˆåŠŸè¯·æ±‚æ•°ï¼š2816*27.4%=771</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f019e3bc9eb94a8e98478635de20b0f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=QcBEwLEjnb%2BWdSvo28E1WTCvZxk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34721ea2204b44db8a05fe897b1a3aab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=6DmbzqtleBFai406gFgg8z9iejQ%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å¯¼å‡ºçš„luaç«ç„°å›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c98a7eb2deb2433e9fef968cfb2bee44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=mPBI7nPB4C1r5JxlKUfoiJAIUeY%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åˆ†æï¼š</strong></p>
<p>ä»å‹æµ‹çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œqpsæé«˜äº†ï¼Œé”™è¯¯ç‡åè€Œä¸‹é™äº†ï¼Œæ¯ç§’æˆåŠŸè¯·æ±‚æ•°æ˜¯ä¹‹å‰çš„2å€ï¼Œè¯´æ˜ä¼˜åŒ–æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯é”™è¯¯ç‡è¿˜æ˜¯æœ‰ç‚¹é«˜ï¼Œè¿™ä¸ªæ˜¯å¦æœ‰åŠæ³•é™ä½ã€‚ç›®å‰æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„æ–¹å¼æ˜¯é™æµï¼Œåªè¦æˆ‘ä»¬æ ¹æ®ä¸€å®šæŒ‡æ ‡æŠŠå¤šä½™çš„è¯·æ±‚æ‹’ç»æ‰ï¼Œæ˜¯å¦å°±å¯ä»¥ç¡®ä¿openrestyå§‹ç»ˆèƒ½å¤„ç†ä¸€å®šé‡çš„è¯·æ±‚äº†å‘¢ã€‚</p>
<h5 data-id="heading-4">1.4 é™æµ</h5>
<p>æˆ‘ä»¬å¸Œæœ›æ‰¾ä¸€ç§é™æµæ–¹æ¡ˆï¼Œæœ€å¥½æ˜¯æ¯”è¾ƒæ™ºèƒ½çš„æ–¹æ¡ˆï¼Œå¯ä»¥æ ¹æ®ä¸€ä¸ªå›ºå®šçš„é˜ˆå€¼è§¦å‘ã€‚æ¯”å¦‚ä¸€ä¸ªopenrestyå®ä¾‹åœ¨å›ºå®šcpuä¸‹åªèƒ½å¤„ç†1000ä¸ªè¯·æ±‚ï¼Œé‚£æœ€å¥½æ˜¯èƒ½æ‰¾åˆ°ä¸ªæŒ‡æ ‡ï¼Œå½“è¶…å‡ºè¿™ä¸ªæŒ‡æ ‡æ—¶å°±è¿›è¡Œé™æµï¼ŒæŠŠè¶…è¿‡openrestyå¤„ç†èƒ½åŠ›çš„è¯·æ±‚æ‹’ç»æ‰ï¼Œä»è€Œæœ€å¤§åŒ–çš„ä¿éšœopenrestyå¤„ç†èƒ½åŠ›ï¼Œé¿å…å› ä¸ºé›ªå´©å¯¼è‡´å¤§éƒ¨åˆ†è¯·æ±‚æ— æ³•è¢«æ­£å¸¸å¤„ç†ã€‚</p>
<p>è¿™é‡Œé¢å¤–è¯´æ˜ä¸‹ä¸ºä»€ä¹ˆä¸ç”¨å¸¸è§çš„æ¼æ¡¶å’Œä»¤ç‰Œç­‰é™æµæ–¹å¼ï¼Œå› ä¸ºæˆ‘ä»¬è§‰å¾—è¿™ä¸ªæ–¹å¼çš„é˜ˆå€¼æ¯”è¾ƒå›ºå®šï¼Œä¸å¤Ÿæ™ºèƒ½ï¼Œå¾ˆå¤šæ—¶å€™å¯èƒ½é˜ˆå€¼è¾¾åˆ°äº†ï¼Œä½†æ˜¯nginxå®é™…ä¸Šè¿˜æ²¡è·‘æ»¡ï¼Œæˆ–è€…nginxå·²ç»è·‘æ»¡å‡ºé—®é¢˜äº†ï¼Œä½†æ˜¯qpsé˜ˆå€¼è¿˜æ²¡è¾¾åˆ°ã€‚æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªæ›´æ™ºèƒ½çš„é™æµæ–¹å¼ã€‚</p>
<p>è¿™ä¸ªæˆ‘ä»¬å°è¯•äº†å‡ ä¸ªæŒ‡æ ‡ï¼Œéƒ½ä¸å¤ªç†æƒ³ï¼Œè¿™é‡Œç›´æ¥è¯´ç»“è®ºï¼Œæœ€èƒ½ä½“ç°nginxåˆ°è¾¾å¤„ç†èƒ½åŠ›ç“¶é¢ˆçš„æŒ‡æ ‡å°±æ˜¯cpuä½¿ç”¨ç‡ï¼Œå½“å…¶è¾¾åˆ°é˜ˆå€¼æ—¶å°±æ˜¯openrestyå‡ºé—®é¢˜çš„æ—¶å€™ã€‚ è¿™é‡Œçš„æ¢ç´¢æˆ‘ä»¬åé¢å†è¯´æ˜ï¼Œå…ˆæ¥çœ‹ä¿®æ”¹æ–¹æ¡ˆå’Œæµ‹è¯•ç»“æœã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆç®€å•åšäº†ä¸ªé™æµï¼Œå½“æ£€æµ‹åˆ°openresty cpuè·‘æ»¡æ—¶å°±å¼€å§‹é™æµï¼ŒæŒ‰ç…§æ¯”ä¾‹é™åˆ¶æµé‡ï¼Œæ¯”å¦‚20%çš„è¯·æ±‚ç›´æ¥å¤±è´¥ï¼Œå¹¶ä¸”å¦‚æœcpuæ²¡æœ‰é™ä¸‹æ¥å°±ç»§ç»­æå‡é™æµæ¯”ä¾‹ï¼Œcpué™ä¸‹æ¥äº†å°±é™ä½é™æµæ¯”ä¾‹ã€‚ ä¸è¿‡ç›®å‰æ²¡æœ‰å®ç°å®Œæ•´çš„æ–¹æ¡ˆï¼Œè€Œæ˜¯å…ˆç®€å•åšäº†ä¸€ç‰ˆï¼Œæ‰‹åŠ¨æ§åˆ¶cpuæ˜¯å¦è·‘æ»¡çš„å¼€å…³ï¼Œé™æµä¹Ÿæ˜¯é»˜è®¤æ˜¯20%ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤é™åˆ¶20%çš„è¯·æ±‚ã€‚</p>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>
<p>qps: 3084</p>
<p>æˆåŠŸç‡ï¼š29.7%</p>
<p>æ¯ç§’æˆåŠŸè¯·æ±‚æ•°ï¼š3084*29.7%=915</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b43a6b6826d41158d29d16fc6632539~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=NRxD9aPGhFYZEacBJylcEGppRDk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68749d0a27a84a46944a43ff924002e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=1KP%2BPRowkKKGWEf6NduTa%2F4eTRA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å¯¼å‡ºçš„nginxç«ç„°å›¾å¯¹æ¯”ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72094c0f32894bafa71d9af848443854~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=kifmmGDN%2FVZSm31IW6%2F%2B6lnQnnY%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åˆ†æï¼š</strong></p>
<p>è¿™é‡Œçš„ç«ç„°å›¾æ˜¯é™æµä¹‹å‰å’Œä¹‹åçš„nginx cpuç«ç„°å›¾ï¼Œé»‘åœˆä¸­çš„unknownéƒ¨åˆ†å°±æ˜¯luaä»£ç ä½¿ç”¨çš„cpuï¼Œå¯ä»¥çœ‹å‡ºé™æµåç¡®å®lua cpuä½¿ç”¨ç‡é™ä½äº†ï¼ŒåŒæ—¶æ¯ç§’æˆåŠŸè¯·æ±‚æ•°ä¹Ÿæå‡äº†16%å·¦å³ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰è¾¾åˆ°æˆ‘ä»¬å¸Œæœ›çš„ç†æƒ³æ•ˆæœï¼Œå¼‚å¸¸ç‡è¿˜æ˜¯æœ‰ç‚¹é«˜ï¼Œè¿™éƒ¨åˆ†éœ€è¦åé¢ç»§ç»­ä¼˜åŒ–ä¸‹é™æµæ–¹æ¡ˆã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬é‡æ–°è€ƒè™‘ä¸‹redisï¼Œå› ä¸ºredisçš„è¿æ¥æ± å¯¼è‡´æœ‰éƒ¨åˆ†è¯·æ±‚å¤±è´¥ï¼Œä½†æ˜¯å®é™…ä¸Šredisæ”¯æŒçš„è¿æ¥æ•°ä¸Šé™æ˜¯å¾ˆé«˜çš„ï¼Œæ˜¯å¦å¯ä»¥é€šè¿‡è°ƒæ•´redisè¿æ¥æ± é…ç½®çš„æ–¹å¼è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Ÿ</p>
<h6 data-id="heading-5">1.4 redisè¿æ¥æ± é…ç½®è°ƒæ•´</h6>
<p>æˆ‘ä»¬è¿™é‡Œä¸ç›´æ¥ä¿®æ”¹redisçš„è¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°ï¼Œä¿®æ”¹è¿æ¥æ•°ç”¨æ»¡æ—¶çš„å­˜æ”¾redisè¯·æ±‚çš„é˜Ÿåˆ—çš„æœ€å¤§å€¼ï¼Œä¹‹å‰æ˜¯400ï¼Œæˆ‘ä»¬æ”¹æˆ2000æ¥è¿›è¡Œæµ‹è¯•ä¸‹ã€‚</p>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>
<p>qps: 2424</p>
<p>æˆåŠŸç‡ï¼š56.6%</p>
<p>æ¯ç§’æˆåŠŸè¯·æ±‚æ•°ï¼š2424*56.6%=1,371</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e3cc429a41b42029c16b5d69c671719~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=ASn%2BwQh%2FwDMz7ZwLAYzB2HWB5FQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a7ce91901c64547b4ce318641dc2087~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771513867&amp;x-signature=W5ZDhs3DFmYjlS7Os%2BYeeoVRwtc%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åˆ†æï¼š</strong></p>
<p>æˆ‘ä»¬å‘ç°qpsä¸‹é™äº†ï¼Œä½†æ˜¯è¯·æ±‚çš„æˆåŠŸç‡ä¸Šå‡äº†å¾ˆå¤šï¼Œä»è€Œæ¯ç§’æˆåŠŸè¯·æ±‚æ•°ä¹Ÿä¸Šå‡äº†å¾ˆå¤šã€‚è¿™é‡Œåˆ†æä¸‹åŸå› ï¼Œåº”è¯¥æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨heyçš„å‹æµ‹æ˜¯3700å¹¶å‘ï¼Œå¹¶ä¸”æ¯ä¸ªè¿æ¥æ¯ç§’æœ€å¤šè¯·æ±‚ä¸€æ¬¡ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ§åˆ¶æ€»qpsæœ€å¤šæ˜¯3700/ç§’ã€‚ è¿™é‡ŒæŠŠredisè¯·æ±‚æ”¾å…¥äº†é˜Ÿåˆ—ï¼Œå¯¼è‡´æ›´å¤šçš„è¯·æ±‚èƒ½å¤Ÿè¢«æˆåŠŸå¤„ç†ï¼Œåªæ˜¯è¯·æ±‚æœ¬èº«çš„å»¶è¿Ÿå˜é«˜äº†ï¼Œå› æ­¤åœ¨æ¯ä¸ªè¿æ¥ä¸Šçš„qpså°±é™ä½äº†ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæœ¬æ¥ä¸€ä¸ªè¿æ¥1ç§’ä¸€æ¬¡ï¼Œå› ä¸ºredisè¶…è¿‡é˜Ÿåˆ—ï¼Œå°±å¤±è´¥äº†ï¼Œè€Œé˜Ÿåˆ—åŠ é•¿åï¼Œå¯èƒ½å˜æˆæ¯ä¸ªè¿æ¥çš„è¯·æ±‚2ç§’æ‰å¤„ç†å®Œæˆï¼Œä½†æ˜¯redisè¯·æ±‚åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œè¯·æ±‚å¤„ç†æˆåŠŸäº†ï¼Œå› æ­¤qpsé™ä½äº†ï¼Œä½†æ˜¯è¯·æ±‚æˆåŠŸç‡ä¸Šå‡äº†ã€‚</p>
<h4 data-id="heading-6">äºŒã€openrestyç½‘å…³é™æµæ–¹æ¡ˆæ¢ç´¢</h4>
<p>è¿™é‡Œæ¢ç´¢ä¸‹openrestyç½‘å…³çš„é™æµæ–¹æ¡ˆï¼Œæˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°çš„æœ€ç†æƒ³çš„æ–¹æ¡ˆå°±æ˜¯èƒ½æœ‰ä¸€ä¸ªæŒ‡æ ‡å¯ä»¥æ˜ç¡®è¡¨ç¤ºå‡ºnginxçš„å¤„ç†èƒ½åŠ›ï¼Œè¿™ä¸ªæŒ‡æ ‡å‡ºé—®é¢˜å°±è¯´æ˜nginxè¶…è¿‡äº†å…¶æœ€å¤§å¤„ç†èƒ½åŠ›ï¼Œè¯·æ±‚ä¼šå‡ºé—®é¢˜ã€‚å› æ­¤æœ€ä¸»è¦çš„æ­¥éª¤å°±æ˜¯æ‰¾å‡ºè¿™ä¸ªèƒ½ä½“ç°nginxå¤„ç†èƒ½åŠ›æ˜¯å¦åˆ°è¾¾é˜ˆå€¼çš„æŒ‡æ ‡ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆå‚è€ƒäº†javaçš„webæœåŠ¡å™¨çš„æ¶æ„ï¼Œjavaçš„è¯·æ±‚æ˜¯åœ¨workerçº¿ç¨‹ä¸­ä¸€ä¸ªä¸€ä¸ªå¤„ç†çš„ï¼Œæœªè¢«å¤„ç†çš„è¯·æ±‚è¢«æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›‘æ§è¿™ä¸ªé˜Ÿåˆ—ï¼Œåªè¦é˜Ÿåˆ—é‡Œé¢å †ç§¯çš„è¯·æ±‚æ•°è¶…è¿‡ä¸€å®šæ•°é‡ï¼Œå°±ä»£è¡¨åˆ°è¾¾äº†webæœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›ä¸Šé™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä¸¢å¼ƒæ–°è¯·æ±‚è¿›è¡Œé™æµï¼Œé¿å…æœåŠ¡å™¨è¢«å†²å®ã€‚</p>
<h5 data-id="heading-7">2.1 æ¶æ„åŒºåˆ«</h5>
<p>ä½†æ˜¯åœ¨nginxä¸­æˆ‘ä»¬å‘ç°è¿™ç§æ–¹æ¡ˆå¹¶ä¸é€‚ç”¨ï¼Œå› ä¸ºnginxå’Œjavaçš„webæœåŠ¡å™¨å¤„ç†æ¨¡å‹ä¸ä¸€æ ·ã€‚javaçš„webæœåŠ¡å™¨è™½ç„¶ä¹Ÿæœ‰å¼‚æ­¥ï¼Œä½†æ˜¯å¼‚æ­¥æ¯”è¾ƒå°‘ï¼Œåƒæ˜¯rediså’Œmongè¿™ç§æ•°æ®åº“å¤„ç†åŸºæœ¬éƒ½æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤ä»–å¤„ç†è¯·æ±‚éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªå¤„ç†ï¼Œä¸Šä¸€ä¸ªå¤„ç†å®Œæˆäº†å†å¤„ç†ä¸‹ä¸€ä¸ªï¼Œå› ä¸ºæŸ¥è¯¢rediså’Œmongoçš„åŒæ­¥å¯¼è‡´è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹ä¹ŸåŸºæœ¬æ˜¯åŒæ­¥çš„ã€‚</p>
<p>è€Œnginxä¸ä¸€æ ·ï¼Œnginxæ˜¯å¼‚æ­¥æ¨¡å‹ï¼Œè¯·æ±‚è¢«nginxçš„workerè¿›ç¨‹acceptæ¥æ”¶åè¿›è¡Œå¤„ç†æ—¶ï¼Œæ•°æ®åˆ°äº†å°±ä¼šæ‰§è¡Œluaä»£ç è¿›è¡Œå¤„ç†ï¼Œç­‰luaæ‰§è¡Œåˆ°redisæŸ¥è¯¢æ—¶ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªioï¼Œnginxä¼šå¼‚æ­¥å¤„ç†ï¼Œç›´æ¥åˆ‡æ¢ä¸‹ä¸€ä¸ªè¯·æ±‚å¹¶å¤„ç†ï¼Œç­‰åˆ°redisçš„å›å¤æ•°æ®åˆ°äº†ä¹‹åå†å›æ¥å¤„ç†ä¹‹å‰çš„è¯·æ±‚ã€‚è¿™å°±å¯¼è‡´ç›‘æ§ä»–çš„é˜Ÿåˆ—æ²¡ä»€ä¹ˆæ•ˆæœï¼Œå› ä¸ºä»–æ¥æ”¶è¯·æ±‚çš„é€Ÿåº¦å¾ˆå¿«ï¼Œåªè¦æœ‰cpuå°±ä¼šæŠŠè¯·æ±‚æ¥è¿›æ¥ï¼Œç”¨é˜Ÿåˆ—ç›‘æ§çš„æ–¹å¼æ²¡æœ‰æ•ˆæœã€‚</p>
<p>é‚£ä¹ˆç›‘æ§æ­£åœ¨å¤„ç†ä¸­çš„è¯·æ±‚æ•°é‡æœ‰ç”¨ä¹ˆï¼Ÿ è¿™ä¸ªå¯ä»¥é€šè¿‡nginxçš„ngx.var.connections_writingå˜é‡æ¥æŸ¥è¯¢ï¼Œä»–ä»£è¡¨nginxæ­£åœ¨å¤„ç†çš„è¯·æ±‚æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°è¿™ä¸ªä¹Ÿä¸å¥½ä½¿ï¼Œå› ä¸ºä½ ä¸èƒ½åˆ¤æ–­åˆ°å¤šå°‘çš„æ—¶å€™nginxæ˜¯æœ‰é—®é¢˜çš„ã€‚é‚£ç”¨ä»€ä¹ˆæŒ‡æ ‡æ¯”è¾ƒåˆé€‚å‘¢ï¼Ÿä¸‹é¢åˆ—ä¸€ä¸‹æˆ‘ä»¬å°è¯•ä½¿ç”¨ä½œä¸ºé˜ˆå€¼çš„æŒ‡æ ‡ã€‚</p>
<h5 data-id="heading-8">2.2 å¯èƒ½çš„æŒ‡æ ‡</h5>
<ol>
<li>socketä¸­æœªè¯»çš„æ•°æ®ï¼Œepolloä¸­å¾…å¤„ç†çš„ioæ•°é‡ï¼šå¦‚æœnginxæ¥ä¸åŠå¤„ç†ï¼Œåˆ™å»ºç«‹çš„socketä¸­ä¼šæœ‰æ¥ä¸åŠå¤„ç†çš„æ•°æ®ï¼ŒEstablished çŠ¶æ€ä¸‹çš„ Recv-Qä¼šå˜å¤§ï¼ŒåŒæ—¶å› ä¸ºworkerå®ä¾‹å› ä¸ºcpuè·‘æ»¡ä¹Ÿæ²¡æ—¶é—´å»acceptè¿æ¥ï¼Œåˆ™LISTENçŠ¶æ€ä¸‹çš„Recv-Qä¹Ÿä¼šå˜å¤§ï¼Œä½†æ˜¯è¿™ä¸ªæŒ‡æ ‡å¹¶ä¸èƒ½å¾ˆå¥½çš„è·å–å¹¶ç”¨äºé™æµï¼Œå› ä¸ºnginxæ²¡åˆ°æé™æ—¶ï¼Œè¿™äº›å€¼ä¹Ÿä¼šæœ‰ï¼Œåªæ˜¯å¤šå’Œå°‘çš„åŒºåˆ«ã€‚</li>
<li>ngx.var.connections_writingæ•°é‡ï¼Œnginxæ­£åœ¨å¤„ç†çš„è¯·æ±‚æ•°ï¼šè¿™ä¸ªå€¼æ²¡æ³•å¾ˆå¥½çš„ä½“ç°æ˜¯å¦å †ç§¯ï¼Œå› ä¸ºä»–ä»£è¡¨å½“å‰æ­£åœ¨å¤„ç†çš„è¯·æ±‚ï¼Œç­‰äºqps ä¹˜ä»¥ å»¶è¿Ÿï¼Œæ¯”å¦‚æœ‰äº›è¯·æ±‚æ¯”è¾ƒæ…¢ï¼Œä½†æ˜¯qpsä¸é«˜ï¼Œä¹Ÿä¼šå¯¼è‡´è¿™ä¸ªå€¼æœ‰ä¸€å®šçš„æ•°é‡ï¼Œæ— æ³•ç”¨äºåˆ¤æ–­ç°åœ¨æ˜¯å¦è¿‡è½½ã€‚</li>
</ol>
<p>å› æ­¤ï¼Œæˆ‘æ„Ÿè§‰<strong>ç›®å‰æœ€åˆé€‚çš„æŒ‡æ ‡å°±æ˜¯nginxå®ä¾‹çš„cpuä½¿ç”¨ç‡ï¼Œè¿™ä¸ªæŒ‡æ ‡æ˜¾è€Œæ˜“è§ï¼Œä½†æ˜¯ä¹Ÿæ˜¯æœ€æœ‰æ•ˆçš„ã€‚</strong></p>
<h5 data-id="heading-9">2.3 cpuè¿‡è½½çš„åæœ</h5>
<p>å‡è®¾æ­¤æ—¶qpsè¶…è¿‡äº†nginxæœ¬èº«çš„å¤„ç†èƒ½åŠ›ï¼Œcpuæ‰“æ»¡æ˜¯å¿…ç„¶ç°è±¡ï¼Œå› ä¸ºnginxä¼šå¼‚æ­¥çš„ä¸æ–­çš„æ¥æ”¶æ–°è¯·æ±‚å¹¶è¿›è¡Œå¤„ç†ï¼Œåªè¦cpuæ²¡æ»¡ï¼Œå°±èƒ½æ¥æ”¶æ›´å¤šçš„è¯·æ±‚å¹¶å¤„ç†ã€‚</p>
<p>cpuæ‰“æ»¡åï¼Œè¯·æ±‚ä¼šå˜æ…¢ï¼Œæœ‰äº›ioå¦‚redisï¼Œmysqlå’Œmongoè¯·æ±‚å°±ä¼šè¶…æ—¶ï¼Œå¯¼è‡´è™½ç„¶è¯·æ±‚è¿”å›200ï¼Œä½†æ˜¯çŠ¶æ€ç æ˜¯å¤±è´¥çš„ã€‚åŒæ—¶è¾¾åˆ°æœ€å¤§å€¼åï¼Œnginxä»socketä¸­è·å–æ•°æ®å¤„ç†è¯·æ±‚çš„é€Ÿåº¦å˜æ…¢ï¼Œsocketä¸­çš„è¯·æ±‚ä¼šä¸€ç›´å¾—ä¸åˆ°å¤„ç†ï¼Œç”šè‡³nginxå»ºç«‹redisè¿æ¥éƒ½ä¼šå¤±è´¥ï¼Œä»è€Œè¿æ¥æ± ä¸­çš„redisè¿æ¥ä¸‹é™ï¼Œè¿›ä¸€æ­¥å¯¼è‡´é›ªå´©ï¼Œæœ¬æ¥èƒ½å¤„ç†çš„è¯·æ±‚ä¹Ÿå¤„ç†ä¸äº†äº†ã€‚</p>
<p><strong>ç»“è®ºï¼š</strong></p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œåªè¦nginxçš„cpuæ²¡è·‘æ»¡ï¼Œå°±ä»£è¡¨nginxæ²¡é—®é¢˜ï¼Œå¯ä»¥å¤„ç†æ›´å¤šè¯·æ±‚ã€‚ä½†æ˜¯ä¸€æ—¦nginxçš„cpuè·‘æ»¡ï¼Œå°±å®¹æ˜“å‡ºç°é›ªå´©çŠ¶æ€ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½æ­£åœ¨è¢«å¤„ç†ï¼Œä½†æ˜¯å› ä¸ºcpuä¸è¶³ï¼Œè¯·æ±‚ä¼šå› ä¸ºå„ç§åŸå› å¤±è´¥ï¼Œæ•´ä½“å¤±è´¥ç‡å¤§å¹…ä¸Šå‡ï¼Œé€ æˆé›ªå´©ã€‚</p>
<p><strong>å¦‚æœå‡ºç°nginx cpuè·‘æ»¡çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥é€šè¿‡åŠ¨æ€é™æµæˆ–è€…å¢åŠ nginxå®ä¾‹é¿å…é›ªå´©ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å¿…é—®HTTPçŠ¶æ€ç ï¼šä»â€œè¯·æ±‚çš„ä¸€ç”Ÿâ€å½»åº•ææ‡‚ï¼Œå‘Šåˆ«æ­»è®°ç¡¬èƒŒ]]></title>    <link>https://juejin.cn/post/7605848213602779182</link>    <guid>https://juejin.cn/post/7605848213602779182</guid>    <pubDate>2026-02-12T15:28:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605848213602779182" data-draft-id="7605769126271352878" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å¿…é—®HTTPçŠ¶æ€ç ï¼šä»â€œè¯·æ±‚çš„ä¸€ç”Ÿâ€å½»åº•ææ‡‚ï¼Œå‘Šåˆ«æ­»è®°ç¡¬èƒŒ"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-12T15:28:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="YouRock"/> <meta itemprop="url" content="https://juejin.cn/user/2331425496367565"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å¿…é—®HTTPçŠ¶æ€ç ï¼šä»â€œè¯·æ±‚çš„ä¸€ç”Ÿâ€å½»åº•ææ‡‚ï¼Œå‘Šåˆ«æ­»è®°ç¡¬èƒŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2331425496367565/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    YouRock
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T15:28:49.000Z" title="Thu Feb 12 2026 15:28:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">HTTPçŠ¶æ€ç ï¼šä»è¯·æ±‚çš„ä¸€ç”Ÿé‡æ–°ç†è§£</h2>
<blockquote>
<p>â€œæ‰€æœ‰æ•°å­—èƒŒåï¼Œéƒ½æ˜¯ä¸€ä¸ªè¯·æ±‚çš„é—è¨€ã€‚â€</p>
<p>â€”â€” æŸä½è¢«502é€¼ç–¯çš„å·¥ç¨‹å¸ˆ</p>
</blockquote>
<p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥è®°ä½è¿™ä¸€å¥ï¼š</p>
<blockquote>
<p>â€œçŠ¶æ€ç ä¸æ˜¯ç”¨æ¥èƒŒçš„ï¼Œæ˜¯ç”¨æ¥æ”¶å°¸çš„ã€‚â€</p>
<p>â€”â€” åŒä¸€ä½å·¥ç¨‹å¸ˆï¼Œåœ¨åˆä¸€æ¬¡å‡Œæ™¨ä¸‰ç‚¹è¢«å«èµ·æ¥ä¹‹å</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆå†™è¿™ç¯‡æ–‡ç« </h3>
<p>ç›¸ä¿¡å¾ˆå¤šæœ‹å‹é¢è¯•çš„æ—¶å€™éƒ½ä¼šè¢«é¢è¯•å®˜é—®åˆ°ï¼šâ€œä½ è®°å¾—å¤šå°‘HTTPçŠ¶æ€ç ï¼Ÿå…·ä½“æœ‰å“ªäº›å«ä¹‰ï¼Ÿâ€</p>
<p>ä¸€èˆ¬å¯¹äºè¿™ç±»é—®é¢˜ï¼Œæˆ‘ä»¬éƒ½ä¼šæå‰å¤ä¹ å’Œè®°å¿†ï¼Œæ‰èƒ½å›ç­”å¾—æ¯”è¾ƒå®Œæ•´ã€‚</p>
<p>ä½†åæ¥æˆ‘å‘ç°ä¸€ä»¶äº‹ï¼š</p>
<blockquote>
<p>â€œèƒŒçŠ¶æ€ç å°±åƒèƒŒå°¸æ£€æŠ¥å‘Šï¼Œä½ è®°ä½äº†æ­»å› ï¼Œå´æ²¡è§è¿‡ç°åœºã€‚â€</p>
<p>â€”â€” æŸä½é èƒŒç­”æ¡ˆè½¬è¡Œå†™ä»£ç çš„é¢è¯•è€…</p>
</blockquote>
<p>æœ¬æ–‡ä»ä¸€ä¸ªè¯·æ±‚ç¦»å¼€å®¢æˆ·ç«¯ä¹‹åçš„é“¾è·¯å‡ºå‘ï¼Œå¸¦ä½ å»<strong>çœ‹ç°åœº</strong>ã€‚</p>
<p>è¦å½»åº•ææ‡‚HTTPçŠ¶æ€ç ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ä¸€ç§æ€è·¯ï¼š<strong>è®¾è®¡è¿™ä¹ˆå¤šçŠ¶æ€ç ï¼Œå®ƒä»¬å…·ä½“æ˜¯åœ¨å“ªä¸€ç¯èŠ‚ã€å› ä¸ºä»€ä¹ˆåŸå› è¢«è¿”å›çš„ï¼Ÿ</strong></p>
<p>æˆ‘ä»¬çš„è¯·æ±‚ä¼ é€’åˆ°æ•´ä¸ªåç«¯ï¼Œå¹¶ä¸æ˜¯ç›´æ¥è®¿é—®åˆ°æœåŠ¡å™¨ã€‚å®ƒè¦ç»è¿‡ä¸€å¤§æ‰¹ç½‘ç»œç»„ä»¶çš„ç­›é€‰è¿‡æ»¤ï¼Œæ¯ä¸€å…³éƒ½æœ‰å¯èƒ½å€’ä¸‹ï¼Œæ¯ä¸€å…³éƒ½ä¼šæœ‰äººæ›¿å®ƒå†™ä¸‹é—è¨€ã€‚</p>
<p>ä¸‹é¢ï¼Œè®©æˆ‘ä»¬ä»ä¸€ä¸ªè¯·æ±‚å‘é€åˆ°åç«¯çš„é“¾è·¯ï¼Œé‡æ–°è®¤è¯†ä¸€ä¸‹HTTPçŠ¶æ€ç ã€‚</p>
<hr/>
<h3 data-id="heading-2">ç¬¬ä¸€ç«™ï¼šè¾¹ç¼˜èŠ‚ç‚¹ CDN</h3>
<blockquote>
<p>â€œæˆ‘ä»¥ä¸ºæˆ‘èƒ½æ´»åˆ°æºç«™ï¼Œç»“æœåœ¨é—¨å£å°±è¢«æ‹¦ä¸‹äº†ã€‚â€</p>
<p>â€”â€” ä¸€ä¸ªè¯•å›¾ç›´æ¥è®¿é—®æœåŠ¡å™¨çš„è¯·æ±‚</p>
</blockquote>
<p>å½“ä¸€ä¸ªè¯·æ±‚ç»è¿‡DNSè§£æç¦»å¼€è®¾å¤‡ï¼Œé‡åˆ°çš„ç¬¬ä¸€ä¸ªç½‘ç»œç»„ä»¶æ˜¯CDNã€‚</p>
<p>CDNæ˜¯ä¸€ç§ç¼“å­˜è®¾å¤‡ã€‚å®ƒæŠŠæºæœåŠ¡å™¨çš„èµ„æºæ‹‰å–åˆ°ç¦»ä½ æœ€è¿‘çš„åœ°æ–¹ï¼Œåƒä¸ªçƒ­æƒ…è¿‡åº¦çš„å‰å°ï¼šâ€œä½ è¦è¿™ä¸ªï¼Ÿæˆ‘è¿™æœ‰ï¼Œåˆ«å¾€é‡Œè·‘äº†ã€‚â€</p>
<p>é‡åˆ°çƒ­é—¨çš„èµ„æºæ–‡ä»¶ï¼ˆæ¯”å¦‚Bç«™ã€æŠ–éŸ³çš„çƒ­é—¨è§†é¢‘ï¼‰ï¼Œç›´æ¥ä»CDNè·å–ï¼Œé€Ÿåº¦è¿œè¿œå¿«äºè®¿é—®è¿œç«¯çš„æœåŠ¡å™¨ã€‚å¯¹äºè¿™äº›å ç”¨<strong>å¸¦å®½</strong>è¾ƒå¤§çš„é™æ€æ–‡ä»¶èµ„æºï¼Œç¼“å­˜åˆ°CDNä¸Šæ˜¯æ€§ä»·æ¯”æœ€é«˜çš„æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-3">CDNèŠ‚ç‚¹çŠ¶æ€ç </h4>



































<table><thead><tr><th>çŠ¶æ€ç </th><th>å«ä¹‰</th><th>æ­»å› æŠ¥å‘Š</th></tr></thead><tbody><tr><td><code>200</code></td><td>æˆåŠŸå‘½ä¸­</td><td>â€œæˆ‘è¿™æœ‰ï¼Œæ‹¿å»å§ã€‚â€</td></tr><tr><td><code>304</code></td><td>æœªä¿®æ”¹</td><td>â€œä½ æ‰‹é‡Œçš„è¿˜æ˜¯æ–°é²œçš„ï¼Œä¸ç”¨æ¢ã€‚â€</td></tr><tr><td><code>502</code></td><td>å›æºéæ³•å“åº”</td><td>â€œæˆ‘å»å¸®ä½ é—®ï¼Œç»“æœæºç«™è¯´æ–¹è¨€ï¼Œå¬ä¸æ‡‚ã€‚â€</td></tr><tr><td><code>503</code></td><td>å›æºè¿æ¥æ‹’ç»</td><td>â€œæºç«™æŠŠé—¨å…³ä¸Šäº†ï¼Œä¸è®©æˆ‘è¿›ã€‚â€</td></tr><tr><td><code>504</code></td><td>å›æºè¶…æ—¶</td><td>â€œæºç«™æ¥äº†ç”µè¯ï¼Œä½†ä¸€ç›´ä¸è¯´è¯ã€‚â€</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>304æ˜¯ä¸ªå¥½ä¸œè¥¿</strong></p>
<p>æ¯æ¬¡å‘CDNå‘èµ·è¯·æ±‚ï¼Œå¹¶ä¸ä¸€å®šéœ€è¦CDNæŠŠæ•´ä¸ªæ–‡ä»¶å†å‘ä¸€éã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æœ¬åœ°æœ‰ç¼“å­˜ï¼Œå¸¦ç€æ–‡ä»¶çš„æŒ‡çº¹ï¼ˆETagï¼‰æˆ–ä¿®æ”¹æ—¶é—´ï¼ˆLast-Modifiedï¼‰å»é—®CDNï¼šâ€œæˆ‘è¿™ä¸ªè¿˜æ–°é²œå—ï¼Ÿâ€</p>
<p>CDNçœ‹ä¸€çœ¼ï¼šâ€œæ²¡å˜ï¼Œæ¥ç€ç”¨å§ã€‚â€</p>
<p><strong>çœå¸¦å®½ï¼Œçœæ—¶é—´ï¼ŒåŒæ–¹éƒ½èˆ’æœã€‚</strong></p>
<p>â€”â€” è¿™æ˜¯å”¯ä¸€ä¸€ä¸ª**è¯·æ±‚å’ŒæœåŠ¡å™¨è¾¾æˆå…±è¯†â€œä½ ä¸ç”¨å¹²æ´»â€**çš„çŠ¶æ€ç ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">ç¬¬äºŒç«™ï¼šå®‰å…¨ç½‘å…³ WAF</h3>
<blockquote>
<p>â€œæˆ‘ä¸æ˜¯ä¸è®©ä½ è¿›ï¼Œæˆ‘æ˜¯æ€•ä½ è¿›æ¥æç ´åã€‚â€</p>
<p>â€”â€” WAFï¼Œä¸€ä¸ªæ²¡æœ‰æ„Ÿæƒ…çš„å®‰æ£€æœºå™¨</p>
</blockquote>
<p>è¯·æ±‚ç¦»å¼€CDNåï¼Œä»ç„¶ä¸èƒ½ç›´æ¥åˆ°è¾¾æºç«™ã€‚å®ƒå…ˆè¦ç»è¿‡<strong>WAF</strong>â€”â€”Webåº”ç”¨é˜²ç«å¢™ã€‚</p>
<p>è¿™ä¸ªç»„ä»¶çš„ä½œç”¨ï¼Œåå­—å·²ç»å†™å¾—å¾ˆæ¸…æ¥šï¼š<strong>ä¸ºäº†å®‰å…¨</strong>ã€‚</p>
<p>å®ƒåƒä¸ªçœ¼ç¥é”åˆ©çš„ä¿å®‰ï¼ŒæŠŠä½ ä»å¤´æ‰«åˆ°è„šï¼š</p>
<ol>
<li><strong>æ£€æŸ¥IPæ˜¯å¦åˆæ³•</strong> â†’ ä¸åˆæ³•è¿”å› <code>403 Forbidden</code></li>
<li><strong>æ£€æŸ¥è¯·æ±‚å¤´æ˜¯å¦åˆæ³•</strong> â†’ ä¸åˆæ³•è¿”å› <code>406 Not Acceptable</code></li>
<li><strong>æ£€æŸ¥è¯·æ±‚ä½“æ˜¯å¦åˆæ³•</strong> â†’ ä¸åˆæ³•è¿”å› <code>413 Payload Too Large</code></li>
<li><strong>åˆ¤æ–­è¯·æ±‚é¢‘ç‡æ˜¯å¦æ­£å¸¸</strong> â†’ ä¸åˆæ³•è¿”å› <code>429 Too Many Requests</code></li>
</ol>
<h4 data-id="heading-5">WAFçŠ¶æ€ç åœºæ™¯</h4>






























<table><thead><tr><th>æ”»å‡»/å¼‚å¸¸ç±»å‹</th><th>çŠ¶æ€ç </th><th>æ­»å› æŠ¥å‘Š</th></tr></thead><tbody><tr><td>é»‘åå•IP/SQLæ³¨å…¥/XSS</td><td><code>403</code></td><td>â€œä½ èº«ä¸Šæœ‰åˆ€ï¼Œä¸è®¸è¿›ã€‚â€</td></tr><tr><td>æ— æ•ˆAcceptå¤´</td><td><code>406</code></td><td>â€œä½ è¦çš„ä¸œè¥¿æˆ‘ç»™ä¸äº†ï¼Œåˆ«è¿›äº†ã€‚â€</td></tr><tr><td>è¶…å¤§è¯·æ±‚ä½“</td><td><code>413</code></td><td>â€œä½ æ‰›çš„ç®±å­å¤ªå¤§äº†ï¼Œè¿›ä¸æ¥ã€‚â€</td></tr><tr><td>CCæ”»å‡»/é«˜é¢‘è¯·æ±‚</td><td><code>429</code></td><td>â€œä½ æ¥å›è·‘å¤ªå¤šæ¬¡äº†ï¼Œæ­‡ä¼šå„¿ã€‚â€</td></tr></tbody></table>
<p>è¿™äº›â€œä¸æ­£ç»â€çš„è¯·æ±‚æ–¹å¼ï¼Œå…¶å®å°±æ˜¯ç½‘ç»œå®‰å…¨è¯¾é‡Œè®²çš„æ”»å‡»æ‰‹æ®µã€‚</p>
<blockquote>
<p>â€œæˆ‘åªæ˜¯æƒ³è¿›æ¥çœ‹çœ‹ï¼Œå®ƒè¯´æˆ‘æ˜¯é»‘å®¢ã€‚â€</p>
<p>â€”â€” ä¸€ä¸ªå¸¦ç€æ­£å¸¸User-Agentå´è¢«è¯¯æ€çš„å…¬å¸å†…ç½‘çˆ¬è™«</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">ç¬¬ä¸‰ç«™ï¼šè´Ÿè½½å‡è¡¡å™¨ Nginx</h3>
<blockquote>
<p>â€œä¸€ä¸‡ä¸ªç”¨æˆ·å°±è¦ä¸€ä¸‡ä¸ªè¿›ç¨‹ï¼Ÿå‡­ä»€ä¹ˆç­‰ç½‘é€Ÿè¿˜è¦å ç€ä½ç½®ï¼Ÿâ€</p>
<p>â€”â€” Igor Sysoevï¼ŒNginxä¹‹çˆ¶ï¼Œ2002å¹´</p>
</blockquote>
<p>å¯¹äºè¿™ä¸ªç»„ä»¶ï¼Œä¸€å¼€å§‹æˆ‘ä¹Ÿä¸æ˜ç™½å®ƒä¸ºä»€ä¹ˆæœ‰é‚£ä¹ˆå¤šåŠŸèƒ½ã€‚</p>
<p>è¦è®¤è¯†ä¸€ä»¶ä¸œè¥¿ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯<strong>äº†è§£å®ƒä¸ºä»€ä¹ˆè¢«åˆ›é€ å‡ºæ¥</strong>ã€‚</p>
<hr/>
<p><strong>2002å¹´ï¼Œè«æ–¯ç§‘ã€‚</strong></p>
<p>Apacheçš„è§„çŸ©ï¼šæ¥ä¸€ä¸ªäººå¼€ä¸€ä¸ªè¿›ç¨‹ï¼Œæ¥ä¸€ä¸‡ä¸ªäººå¼€ä¸€ä¸‡ä¸ªè¿›ç¨‹ã€‚</p>
<p>16Gå†…å­˜ï¼ŒApacheå¼ å˜´è¦50Gï¼Œç„¶åè·ªäº†ã€‚</p>
<p>Igor Sysoevæ¯å¤©çš„å·¥ä½œå°±æ˜¯é‡å¯æœåŠ¡å™¨â€”â€”åƒç»™åŒä¸€ä¸ªç—…äººåå¤åšå¿ƒè‚ºå¤è‹ã€‚</p>
<p>ç»ˆäºæœ‰ä¸€å¤©ä»–éª‚äº†å¥è„è¯ï¼š</p>
<blockquote>
<p>â€œä¸€ä¸‡ä¸ªç”¨æˆ·å°±è¦ä¸€ä¸‡ä¸ªè¿›ç¨‹ï¼Ÿå‡­ä»€ä¹ˆç­‰ç½‘é€Ÿçš„æ—¶å€™è¿˜è¦å ç€å†…å­˜ï¼Ÿâ€</p>
</blockquote>
<p>ä»–è§‰å¾—è¿™ä¸åˆç†â€”â€”åƒæ¯ä¸ªå®¢äººèº«åç«™ä¸€ä¸ªä¸“å±æœåŠ¡å‘˜ï¼Œå®¢äººä¸Šå•æ‰€ä»–éƒ½å¾—ç«™ç€ç­‰ã€‚</p>
<p>Igorå†³å®šå†™ä¸€ä¸ªâ€œä¸è®²æ­¦å¾·â€çš„æœåŠ¡å™¨ï¼š</p>
<p><strong>ä¸€ä¸ªæœåŠ¡å‘˜ç®¡äº”åæ¡Œï¼Œè°æ‹›æ‰‹è¿‡å»ï¼Œè°çœ‹èœå•å°±æ™¾ç€ã€‚ä¸ç­‰äººï¼Œä¸ç©ºè½¬ï¼Œä¸å èŒ…å‘ã€‚</strong></p>
<p>ä¸¤å¹´ï¼Œä¸€ä¸‡è¡ŒCã€‚</p>
<p>2004å¹´ï¼ŒNginxè¯ç”Ÿã€‚</p>
<p><strong>4ä¸ªè¿›ç¨‹æ‰›1ä¸‡è¿æ¥ï¼Œå†…å­˜500MBã€‚</strong></p>
<p>Apacheç”¨50Gå¹²çš„æ´»ï¼Œå®ƒç”¨1%çš„èµ„æºã€‚</p>
<p>åæ¥æœ‰äººé—®ä»–ä¸ºä»€ä¹ˆå†™Nginxã€‚</p>
<p>ä»–è¯´ï¼š</p>
<blockquote>
<p><strong>â€œç­‰çš„æ—¶å€™ï¼Œä¸åº”è¯¥å ç€ä½ç½®ã€‚â€</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-7">Nginxæ ¸å¿ƒçŠ¶æ€ç </h4>













































<table><thead><tr><th>åœºæ™¯</th><th>çŠ¶æ€ç </th><th>æ­»å› æŠ¥å‘Š</th></tr></thead><tbody><tr><td>é™æ€æ–‡ä»¶ä¸å­˜åœ¨</td><td><code>404</code></td><td>â€œä½ è¦çš„æ–‡ä»¶ï¼Œç¡¬ç›˜é‡Œæ²¡æœ‰ã€‚â€</td></tr><tr><td>é™æ€æ–‡ä»¶æ— æƒé™</td><td><code>403</code></td><td>â€œæ–‡ä»¶åœ¨é‚£ï¼Œä½†ä½ ä¸é…çœ‹ã€‚â€</td></tr><tr><td>åç«¯æ— å“åº”</td><td><code>502</code></td><td>â€œæˆ‘æŠŠè¯·æ±‚è½¬ç»™åé¢ï¼Œåé¢æ²¡äººæ¥ã€‚â€</td></tr><tr><td>åç«¯è¶…æ—¶</td><td><code>504</code></td><td>â€œåé¢æ¥äº†ç”µè¯ï¼Œä½†ä¸€ç›´â€˜å—¯â€™ä¸ªä¸åœï¼Œå°±æ˜¯ä¸è¯´è¯ã€‚â€</td></tr><tr><td>å®¢æˆ·ç«¯æå‰å…³é—­</td><td><code>499</code></td><td>â€œç”¨æˆ·ç­‰ä¸åŠï¼ŒæŠŠç½‘é¡µå…³äº†ã€‚â€</td></tr><tr><td>é™æµæ‹¦æˆª</td><td><code>429</code></td><td>â€œä½ åˆ·å¤ªå¿«äº†ï¼Œæˆ‘ä¼ºå€™ä¸åŠ¨ã€‚â€</td></tr><tr><td>ä¸»åŠ¨ç†”æ–­</td><td><code>503</code></td><td>â€œåé¢çš„å…„å¼Ÿéƒ½å¿«ç´¯æ­»äº†ï¼Œæˆ‘å…ˆæ›¿ä½ æŒ¡ä¸€ä¸‹ã€‚â€</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å…³äº499</strong></p>
<p><code>499</code>æ˜¯Nginxç‹¬æœ‰çš„çŠ¶æ€ç ã€‚</p>
<p>å®ƒä¸æ˜¯åç«¯è¿”å›çš„ï¼Œä¸æ˜¯WAFæ‹¦æˆªçš„ï¼Œæ˜¯Nginxè‡ªå·±è®°ä¸‹çš„é—è¨€ï¼š</p>
<p><strong>â€œä»–æ²¡ç­‰æˆ‘ï¼Œä»–èµ°äº†ã€‚â€</strong></p>
<p>å¾ˆå¤šæ—¶å€™ä½ ä»¥ä¸ºçš„è¶…æ—¶ï¼ˆ504ï¼‰ï¼Œå…¶å®æ˜¯ç”¨æˆ·ç­‰å¾—ä¸è€çƒ¦ï¼Œç›´æ¥å…³æ‰äº†é¡µé¢ã€‚</p>
<p>Nginxé»˜é»˜åœ¨æ—¥å¿—é‡Œå†™ä¸‹ä¸€è¡Œï¼š
<em>â€œè¯·æ±‚å·²è½¬å‘ï¼Œä½†å®¢æˆ·ç«¯å·²å¤±è”ã€‚â€</em></p>
</blockquote>
<hr/>
<h3 data-id="heading-8">ç¬¬å››ç«™ï¼šWeb åº”ç”¨</h3>
<blockquote>
<p>â€œç»ˆäºåˆ°æˆ‘äº†ã€‚â€</p>
<p>â€”â€” ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨ç©¿è¿‡CDNã€WAFã€Nginxä¹‹å</p>
</blockquote>
<p>ç»ˆäºï¼Œè¯·æ±‚åˆ°è¾¾äº†åç«¯åº”ç”¨ã€‚</p>
<p>è¿™é‡Œçš„HTTPçŠ¶æ€ç ï¼Œæ˜¯<strong>å¼€å‘è€…åœ¨ä»£ç é‡Œäº²æ‰‹å†™ä¸‹çš„</strong>ã€‚</p>
<p>å®ƒæ˜¯å”¯ä¸€ä¸€ä¸ª<strong>ç”±ä½ å†³å®šç”Ÿæ­»</strong>çš„ç¯èŠ‚ã€‚</p>
<hr/>
<h4 data-id="heading-9">4xxï¼šä½ çš„é—®é¢˜ï¼Œä¸æ˜¯æˆ‘çš„é—®é¢˜</h4>
<blockquote>
<p>â€œä½ å‘è¿‡æ¥çš„ä¸œè¥¿ï¼Œæˆ‘å°½åŠ›äº†ï¼ŒçœŸçš„çœ‹ä¸æ‡‚ã€‚â€</p>
<p>â€”â€” åº”ç”¨å¯¹400è¯´</p>
</blockquote>








































<table><thead><tr><th>çŠ¶æ€ç </th><th>å«ä¹‰</th><th>æ­»å› æŠ¥å‘Š</th></tr></thead><tbody><tr><td><code>400</code></td><td>æˆ‘çœ‹ä¸æ‡‚</td><td>JSONå°‘æ‹¬å·ã€ç±»å‹ä¼ é”™ã€å¿…å¡«å­—æ®µæ²¡å¸¦</td></tr><tr><td><code>401</code></td><td>ä½ æ²¡ç™»å½•</td><td>æ²¡å¸¦Tokenã€Tokenè¿‡æœŸã€Tokenè¢«ç¯¡æ”¹</td></tr><tr><td><code>403</code></td><td>ä½ ä¸èƒ½è¿›</td><td>æ™®é€šç”¨æˆ·ç‚¹ç®¡ç†å‘˜æ¥å£ã€IPä¸åœ¨ç™½åå•</td></tr><tr><td><code>404</code></td><td>æˆ‘æ²¡æœ‰</td><td>æŸ¥ä¸å­˜åœ¨çš„ç”¨æˆ·IDã€å·²ä¸‹æ¶çš„å•†å“</td></tr><tr><td><code>409</code></td><td>å·²ç»æœ‰äº†</td><td>ç”¨æˆ·åè¢«å ç”¨ã€é‡å¤æäº¤ã€<strong>ä¸¤äººåŒæ—¶ç¼–è¾‘åŒä¸€æ¡æ•°æ®</strong></td></tr><tr><td><code>422</code></td><td>å†…å®¹ä¸å¯¹</td><td>é‚®ç®±æ ¼å¼æ­£ç¡®ä½†æœªæ³¨å†Œã€å¹´é¾„ä¼ äº†200å²</td></tr></tbody></table>
<blockquote>
<p>â€œä½ è¯´ä½ å«adminï¼Œä½†æˆ‘è¿™å·²ç»æœ‰å«adminçš„äº†ã€‚â€</p>
<p>â€”â€” 409 Conflictï¼Œæ³¨å†Œæ¥å£çš„æ—¥å¸¸</p>
</blockquote>
<hr/>
<h4 data-id="heading-10">2xxï¼šä¸€åˆ‡é¡ºåˆ©</h4>
<blockquote>
<p>â€œä»Šå¤©æ˜¯ä¸ªå¥½æ—¥å­ã€‚â€</p>
<p>â€”â€” 200 OKï¼Œæœ€å¹¸ç¦çš„çŠ¶æ€ç </p>
</blockquote>






























<table><thead><tr><th>çŠ¶æ€ç </th><th>å«ä¹‰</th><th>é—è¨€ï¼ˆæ´»ç€çš„é—è¨€ï¼‰</th></tr></thead><tbody><tr><td><code>200</code></td><td>æˆåŠŸ</td><td>â€œæˆäº†ï¼Œæ•°æ®ç»™ä½ ã€‚â€</td></tr><tr><td><code>201</code></td><td>åˆ›å»ºæˆåŠŸ</td><td>â€œæˆäº†ï¼Œæ–°èµ„æºåœ¨è¿™ã€‚â€</td></tr><tr><td><code>202</code></td><td>å·²æ¥å—</td><td>â€œæ”¶ä¸‹äº†ï¼Œåé¢æ…¢æ…¢å¼„ã€‚â€</td></tr><tr><td><code>204</code></td><td>æˆåŠŸï¼Œæ— è¿”å›</td><td>â€œæˆäº†ï¼Œä½†æ²¡å•¥å¯è¯´çš„ã€‚â€</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-11">3xxï¼šåˆ«æ‰¾æˆ‘ï¼Œå»é‚£è¾¹</h4>
<blockquote>
<p>â€œæˆ‘å·²ç»æ¬å®¶äº†ï¼Œè¿™æ˜¯æ–°åœ°å€ã€‚â€</p>
<p>â€”â€” 301ï¼Œä¸€ä¸ªè´Ÿè´£ä»»çš„æ—§é—¨ç‰Œ</p>
</blockquote>

























<table><thead><tr><th>çŠ¶æ€ç </th><th>å«ä¹‰</th><th>æ­»å› æŠ¥å‘Š</th></tr></thead><tbody><tr><td><code>301</code></td><td>æ°¸ä¹…æ¬å®¶</td><td>â€œè¿™é‡Œä¸ä½äº†ï¼Œä»¥åå»é‚£è¾¹æ‰¾æˆ‘ã€‚â€</td></tr><tr><td><code>302</code></td><td>ä¸´æ—¶ç¦»å¼€</td><td>â€œç°åœ¨ä¸åœ¨ï¼Œä½ å…ˆå»éš”å£ã€‚â€</td></tr><tr><td><code>304</code></td><td>æ²¡å˜</td><td>â€œä½ æ‰‹é‡Œé‚£ä¸ªè¿˜èƒ½ç”¨ï¼Œåˆ«ä¸‹è½½äº†ã€‚â€</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-12">5xxï¼šæˆ‘ç‚¸äº†ï¼Œä¸æ˜¯ä½ çš„é”™</h4>
<blockquote>
<p>â€œå¯¹ä¸èµ·ï¼Œæ˜¯æˆ‘çš„é—®é¢˜ã€‚â€</p>
<p>â€”â€” 500 Internal Server Errorï¼Œä¸€ä¸ªæœ‰ç¤¼è²Œçš„å´©æºƒ</p>
</blockquote>






























<table><thead><tr><th>çŠ¶æ€ç </th><th>å«ä¹‰</th><th>æ­»å› æŠ¥å‘Š</th></tr></thead><tbody><tr><td><code>500</code></td><td>ä»£ç å´©æºƒ</td><td>ç©ºæŒ‡é’ˆã€æ•°æ®åº“è¿ä¸ä¸Šã€try-catchæ²¡æ¥ä½</td></tr><tr><td><code>502</code></td><td>ä¸Šæ¸¸ä¹±è¯´è¯</td><td>ç¬¬ä¸‰æ–¹APIè¿”å›ä¹±ç ã€Redisæ•°æ®ç»“æ„ä¸å¯¹</td></tr><tr><td><code>503</code></td><td>æˆ‘æ‹’ç»</td><td>è¿æ¥æ± æ»¡äº†ã€æœåŠ¡æ­£åœ¨é‡å¯</td></tr><tr><td><code>504</code></td><td>ä¸Šæ¸¸å¤ªæ…¢</td><td>ç¬¬ä¸‰æ–¹APIè¶…æ—¶ã€SQLæŸ¥äº†10ç§’</td></tr></tbody></table>
<blockquote>
<p>â€œæˆ‘è°ƒäº†åˆ«äººçš„æ¥å£ï¼Œåˆ«äººæ²¡å›æˆ‘ã€‚â€</p>
<p>â€”â€” 504ï¼Œä¸€ä¸ªè¢«ä¸Šæ¸¸å‘æ­»çš„è¯·æ±‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">é“¾è·¯ç®€å›¾ Â· è¯·æ±‚çš„ä¸€ç”Ÿ</h3>
<blockquote>
<p>â€œè¿™ä¸æ˜¯æ¶æ„å›¾ï¼Œè¿™æ˜¯äº‹æ•…å¤šå‘è·¯æ®µç¤ºæ„å›¾ã€‚â€</p>
</blockquote>
<h3 data-id="heading-14"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad14b362873c44bd80c07f74e336b0cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWW91Um9jaw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771514929&amp;x-signature=CuDQkpjMCvEH5WU37x14oPH4jAU%3D" alt="20260212-230754.jpeg" loading="lazy"/></h3>
<h3 data-id="heading-15">å†™åœ¨æœ€åï¼šçŠ¶æ€ç ä¸æ˜¯æ•°å­—ï¼Œæ˜¯è¯·æ±‚çš„â€œå°¸æ£€æŠ¥å‘Šâ€</h3>
<p>è¡Œæ–‡è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»é™ªç€ä¸€ä¸ªHTTPè¯·æ±‚èµ°å®Œäº†å®ƒçš„å®Œæ•´ä¸€ç”Ÿã€‚</p>
<p>å®ƒä»ä½ çš„æµè§ˆå™¨å‡ºå‘ï¼Œå©å¼€CDNçš„å¤§é—¨ï¼Œç©¿è¿‡WAFçš„å®‰æ£€ï¼Œç»è¿‡Nginxçš„è°ƒåº¦ï¼Œæœ€ç»ˆæŠµè¾¾åº”ç”¨æœåŠ¡å™¨çš„åå¨ã€‚</p>
<p>è€Œåœ¨æ¯ä¸€é“å…³å¡ï¼Œéƒ½æœ‰å¯èƒ½å€’ä¸‹â€”â€”ä¹Ÿå¯èƒ½å‡¯æ—‹ã€‚</p>
<p><strong>æ¯ä¸€ä¸ªçŠ¶æ€ç ï¼Œéƒ½ä¸æ˜¯éšæœºæ•°å­—ï¼Œè€Œæ˜¯è¯·æ±‚å€’ä¸‹çš„é‚£ä¸€åˆ»ï¼Œæœ€åä¸€ä¸ªæ´»ç€çš„äººæ›¿å®ƒå†™ä¸‹çš„æ­»å› æŠ¥å‘Šã€‚</strong></p>
<hr/>
<p>å½“ä½ å†çœ‹åˆ°<code>502</code>ï¼Œä½ è„‘æµ·é‡Œåº”è¯¥æµ®ç°çš„ä¸æ˜¯â€œBad Gatewayâ€è¿™è¡Œè‹±æ–‡ï¼Œè€Œæ˜¯ä¸€åœºäº‹æ•…ç°åœºï¼š</p>
<ul>
<li>ä¹Ÿè®¸æ˜¯CDNå›æºæ—¶ï¼Œæºç«™è¯´äº†å¥å®ƒå¬ä¸æ‡‚çš„æ–¹è¨€ï¼ˆéæ³•å“åº”ï¼‰</li>
<li>ä¹Ÿè®¸æ˜¯Nginxè½¬å‘æ—¶ï¼Œåç«¯çš„åº”ç”¨æ ¹æœ¬æ²¡åœ¨å¬ï¼ˆè¿æ¥å¤±è´¥ï¼‰</li>
<li>ä¹Ÿè®¸æ˜¯ä½ çš„ä»£ç è°ƒç”¨ç¬¬ä¸‰æ–¹APIï¼Œå¯¹æ–¹æ¥äº†ç”µè¯ä½†å¼€å§‹æ²‰é»˜ï¼ˆè¶…æ—¶ï¼‰</li>
<li>ä¹Ÿè®¸æ˜¯è´Ÿè½½å‡è¡¡å™¨å·¡è§†ä¸€åœˆï¼Œå‘ç°æ‰€æœ‰å°å¼Ÿéƒ½å·²é˜µäº¡ï¼ˆæ— å¯ç”¨åç«¯ï¼‰</li>
</ul>
<blockquote>
<p><strong>åŒä¸€ä¸ª502ï¼Œä¸ƒç§æ­»æ³•ã€‚ç—‡çŠ¶ç›¸åŒï¼Œç—…ç¶å„å¼‚ã€‚</strong></p>
</blockquote>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œå­¦ä¼šèƒŒçŠ¶æ€ç çš„äººåªèƒ½å›ç­”â€œå®ƒæ˜¯ä»€ä¹ˆæ„æ€â€ï¼Œè€Œç†è§£é“¾è·¯çš„äººèƒ½å›ç­”ï¼š</p>
<p><strong>â€œå®ƒæ­»åœ¨äº†å“ªä¸€ç¯ã€‚â€</strong></p>
<hr/>
<p>è¿™è¶Ÿæ—…ç¨‹ä¹Ÿå‘Šè¯‰æˆ‘ä»¬å¦ä¸€ä»¶äº‹ï¼š</p>
<p>CDNä¼šæ›¿ä½ èƒŒé”…ï¼ŒNginxä¼šæ›¿ä½ æ‰›å‹ï¼ŒWAFä¼šæ›¿ä½ æŒ¡åˆ€â€”â€”ä½†å®ƒä»¬éƒ½åªæ˜¯è¿‡å®¢ã€‚</p>
<p><strong>å”¯ä¸€ä»å¤´åˆ°å°¾ã€ä»ç”Ÿåˆ°æ­»éƒ½é™ªç€ä½ ä»£ç çš„ï¼Œæ˜¯ä½ è‡ªå·±å†™çš„ä¸šåŠ¡é€»è¾‘ã€‚</strong></p>
<p><code>200</code>æ˜¯ä½ å†™çš„ï¼Œ<code>404</code>æ˜¯ä½ å†™çš„ï¼Œ<code>500</code>ä¹Ÿæ˜¯ä½ å†™çš„ã€‚</p>
<blockquote>
<p><strong>çŠ¶æ€ç ä¸æ˜¯é¢è¯•å®˜æ‹·é—®ä½ çš„å·¥å…·ï¼Œè€Œæ˜¯ä½ çš„ä»£ç å’Œè¿™ä¸ªä¸–ç•Œå¯¹è¯çš„è¯­è¨€ã€‚</strong></p>
</blockquote>
<p>ä½ ç”¨<code>200</code>è¯´ï¼šâ€œä¸€åˆ‡æ­£å¸¸ã€‚â€<br/>
ä½ ç”¨<code>404</code>è¯´ï¼šâ€œä½ æ‰¾çš„ä¸œè¥¿ä¸åœ¨è¿™é‡Œã€‚â€<br/>
ä½ ç”¨<code>500</code>è¯´ï¼šâ€œæŠ±æ­‰ï¼Œæˆ‘å‡ºäº†ç‚¹é—®é¢˜ï¼Œå·²ç»åœ¨çœ‹æ—¥å¿—äº†ã€‚â€</p>
<hr/>
<p>æ‰€ä»¥ï¼Œåˆ«å†èƒŒçŠ¶æ€ç äº†ã€‚</p>
<p>å»ç†è§£ä½ è¯·æ±‚èµ°è¿‡çš„è·¯ï¼Œå»è¯»æ‡‚æ¯ä¸€è¡Œæ—¥å¿—ï¼Œå»äº²æ‰‹å†™ä¸‹æ¯ä¸€ä¸ªä½ è¿”å›çš„çŠ¶æ€ç ã€‚</p>
<p><strong>å½“ä½ ä¸å†é—®â€œ502æ˜¯ä»€ä¹ˆæ„æ€â€ï¼Œè€Œæ˜¯é—®â€”â€”</strong></p>
<blockquote>
<p>â€œè¿™ä¸ª502æ˜¯è°æŠ¥çš„ï¼Ÿâ€<br/>
â€œåœ¨å“ªä¸€ç¯æŠ¥çš„ï¼Ÿâ€<br/>
â€œæ—¥å¿—é‡Œç•™ä¸‹äº†ä»€ä¹ˆçº¿ç´¢ï¼Ÿâ€</p>
</blockquote>
<p><strong>é‚£ä¸€åˆ»ï¼Œä½ å°±ä¸å†æ˜¯èƒŒç­”æ¡ˆçš„äººï¼Œè€Œæ˜¯çœŸçš„æ‡‚äº†ã€‚</strong></p>
<hr/>
<blockquote>
<p>â€œæ„¿ä½ çš„200æ°¸è¿œä¸é¸½ï¼Œæ„¿ä½ çš„5xxæ°¸è¿œæœ‰æ—¥å¿—å¯æŸ¥ã€‚â€</p>
<p>â€”â€” åŒä¸€ä½è¢«502é€¼ç–¯çš„å·¥ç¨‹å¸ˆï¼Œåœ¨æœ€åä¸€æ¬¡ä¸Šçº¿åè¯´</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€React-9/Lesson93(2025-12-30)ã€‘React Hooks æ·±åº¦è§£æï¼šä»åŸºç¡€åˆ°å®æˆ˜ğŸ¯]]></title>    <link>https://juejin.cn/post/7605782093481689114</link>    <guid>https://juejin.cn/post/7605782093481689114</guid>    <pubDate>2026-02-12T11:28:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605782093481689114" data-draft-id="7605535884940361779" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€React-9/Lesson93(2025-12-30)ã€‘React Hooks æ·±åº¦è§£æï¼šä»åŸºç¡€åˆ°å®æˆ˜ğŸ¯"/> <meta itemprop="keywords" content="React.js,å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-12T11:28:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jing_Rainbow"/> <meta itemprop="url" content="https://juejin.cn/user/1285809519198256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€React-9/Lesson93(2025-12-30)ã€‘React Hooks æ·±åº¦è§£æï¼šä»åŸºç¡€åˆ°å®æˆ˜ğŸ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1285809519198256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jing_Rainbow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T11:28:35.000Z" title="Thu Feb 12 2026 11:28:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“š ä¸€ã€Hooks æ¦‚è¿°</h2>
<h3 data-id="heading-1">ğŸŒŸ ä»€ä¹ˆæ˜¯ Hooks</h3>
<p>Hooks æ˜¯ React 16.8 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒæ˜¯ä¸€ç§å‡½æ•°ç¼–ç¨‹æ€æƒ³çš„ä½“ç°ã€‚Hooks ä»¥ <code>use</code> å¼€å¤´ï¼Œç”¨äºå°è£… Vue/React ç»„ä»¶çš„çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸï¼Œè®©å¼€å‘è€…å¯ä»¥"å‘¼ä¹‹å³æ¥"ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚</p>
<p>Hooks çš„æ ¸å¿ƒç†å¿µæ˜¯å°†ç»„ä»¶çš„çŠ¶æ€é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œä½¿ç»„ä»¶æ›´åŠ ç®€æ´ã€å¯ç»´æŠ¤ã€‚é€šè¿‡ Hooksï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸ç¼–å†™ class ç»„ä»¶çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-2">ğŸ”§ Hooks çš„åˆ†ç±»</h3>
<p>Hooks å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<ol>
<li><strong>React å†…ç½® Hooks</strong>ï¼šReact å®˜æ–¹æä¾›çš„ä¸€ç³»åˆ—å¸¸ç”¨ Hooks</li>
<li><strong>è‡ªå®šä¹‰ Hooks</strong>ï¼šå¼€å‘è€…æ ¹æ®ä¸šåŠ¡éœ€æ±‚è‡ªå·±å°è£…çš„ Hooks</li>
</ol>
<h2 data-id="heading-3">ğŸ¨ äºŒã€React å†…ç½® Hooks è¯¦è§£</h2>
<h3 data-id="heading-4">1ï¸âƒ£ useState Hook</h3>
<p><code>useState</code> æ˜¯æœ€åŸºç¡€çš„ Hookï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ç®¡ç†èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-5">åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(initialValue)
</code></pre>
<h4 data-id="heading-6">å‚æ•°è¯´æ˜</h4>
<ul>
<li><code>initialValue</code>ï¼šçŠ¶æ€çš„åˆå§‹å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰</li>
<li>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæƒ°æ€§åˆå§‹åŒ–çŠ¶æ€</li>
</ul>
<h4 data-id="heading-7">è¿”å›å€¼</h4>
<p>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå…ƒç´ ï¼šå½“å‰çŠ¶æ€çš„å€¼</li>
<li>ç¬¬äºŒä¸ªå…ƒç´ ï¼šæ›´æ–°çŠ¶æ€çš„å‡½æ•°</li>
</ul>
<h4 data-id="heading-8">ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰è®¡æ•°ï¼š{count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;å¢åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count - 1)}&gt;å‡å°‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-9">æƒ°æ€§åˆå§‹åŒ–</h4>
<p>å½“åˆå§‹çŠ¶æ€éœ€è¦é€šè¿‡å¤æ‚è®¡ç®—å¾—å‡ºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°ä½œä¸ºåˆå§‹å€¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> storedTodos = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'todos'</span>)
  <span class="hljs-keyword">return</span> storedTodos ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedTodos) : []
})
</code></pre>
<p>è¿™ç§æ–¹å¼å¯ä»¥é¿å…æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œå¤æ‚çš„åˆå§‹åŒ–é€»è¾‘ã€‚</p>
<h4 data-id="heading-10">çŠ¶æ€æ›´æ–°æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong>ç›´æ¥æ›¿æ¢</strong>ï¼šçŠ¶æ€æ›´æ–°æ˜¯ç›´æ¥æ›¿æ¢ï¼Œè€Œä¸æ˜¯åˆå¹¶</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> })

<span class="hljs-comment">// é”™è¯¯æ–¹å¼</span>
<span class="hljs-title function_">setUser</span>({ <span class="hljs-attr">age</span>: <span class="hljs-number">19</span> }) <span class="hljs-comment">// ä¼šä¸¢å¤± name å±æ€§</span>

<span class="hljs-comment">// æ­£ç¡®æ–¹å¼</span>
<span class="hljs-title function_">setUser</span>({ ...user, <span class="hljs-attr">age</span>: <span class="hljs-number">19</span> })
</code></pre>
<ol start="2">
<li>
<p><strong>å¼‚æ­¥æ›´æ–°</strong>ï¼šçŠ¶æ€æ›´æ–°æ˜¯å¼‚æ­¥çš„ï¼Œä¸èƒ½ç«‹å³è·å–åˆ°æœ€æ–°å€¼</p>
</li>
<li>
<p><strong>å‡½æ•°å¼æ›´æ–°</strong>ï¼šå½“æ–°çŠ¶æ€ä¾èµ–äºæ—§çŠ¶æ€æ—¶ï¼Œä½¿ç”¨å‡½æ•°å¼æ›´æ–°</p>
</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prevCount</span> =&gt;</span> prevCount + <span class="hljs-number">1</span>)
</code></pre>
<h3 data-id="heading-11">2ï¸âƒ£ useEffect Hook</h3>
<p><code>useEffect</code> ç”¨äºå¤„ç†å‰¯ä½œç”¨æ“ä½œï¼Œå¦‚æ•°æ®è·å–ã€è®¢é˜…ã€æ‰‹åŠ¨ä¿®æ”¹ DOM ç­‰ã€‚</p>
<h4 data-id="heading-12">åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// å‰¯ä½œç”¨ä»£ç </span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼ˆå¯é€‰ï¼‰</span>
  }
}, [dependencies])
</code></pre>
<h4 data-id="heading-13">å‚æ•°è¯´æ˜</h4>
<ol>
<li><strong>ç¬¬ä¸€ä¸ªå‚æ•°</strong>ï¼šå‰¯ä½œç”¨å‡½æ•°ï¼Œåœ¨ç»„ä»¶æ¸²æŸ“åæ‰§è¡Œ</li>
<li><strong>ç¬¬äºŒä¸ªå‚æ•°</strong>ï¼šä¾èµ–æ•°ç»„ï¼Œæ§åˆ¶å‰¯ä½œç”¨ä½•æ—¶æ‰§è¡Œ</li>
</ol>
<h4 data-id="heading-14">æ‰§è¡Œæ—¶æœº</h4>





















<table><thead><tr><th>ä¾èµ–æ•°ç»„</th><th>æ‰§è¡Œæ—¶æœº</th></tr></thead><tbody><tr><td>ä¸æä¾›</td><td>æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œ</td></tr><tr><td><code>[]</code></td><td>åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡</td></tr><tr><td><code>[a, b]</code></td><td>å½“ a æˆ– b å˜åŒ–æ—¶æ‰§è¡Œ</td></tr></tbody></table>
<h4 data-id="heading-15">æ¸…ç†å‡½æ•°</h4>
<p>æ¸…ç†å‡½æ•°åœ¨ç»„ä»¶å¸è½½æˆ–ä¸‹ä¸€æ¬¡å‰¯ä½œç”¨æ‰§è¡Œå‰æ‰§è¡Œï¼Œä¸»è¦ç”¨äºï¼š</p>
<ul>
<li>æ¸…é™¤äº‹ä»¶ç›‘å¬å™¨</li>
<li>æ¸…é™¤å®šæ—¶å™¨</li>
<li>å–æ¶ˆç½‘ç»œè¯·æ±‚</li>
<li>æ¸…é™¤è®¢é˜…</li>
</ul>
<h4 data-id="heading-16">ä½¿ç”¨ç¤ºä¾‹ï¼šäº‹ä»¶ç›‘å¬</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMouse</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [x, setX] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> [y, setY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = (<span class="hljs-params">event</span>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¼ æ ‡ç§»åŠ¨'</span>)
      <span class="hljs-title function_">setX</span>(event.<span class="hljs-property">pageX</span>)
      <span class="hljs-title function_">setY</span>(event.<span class="hljs-property">pageY</span>)
    }
    
    <span class="hljs-comment">// ç»„ä»¶æŒ‚è½½æ—¶ï¼Œç›‘å¬ mousemove äº‹ä»¶</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äº‹ä»¶ç›‘å¬å·²æ·»åŠ '</span>)
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶ï¼Œç§»é™¤ mousemove äº‹ä»¶</span>
      <span class="hljs-comment">// é˜²æ­¢å†…å­˜æ³„æ¼</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¸…é™¤äº‹ä»¶ç›‘å¬'</span>)
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update)
    }
  }, []) <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„ï¼Œåªåœ¨æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      é¼ æ ‡ä½ç½®ï¼š{x} {y}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-17">ä½¿ç”¨ç¤ºä¾‹ï¼šæ•°æ®æŒä¹…åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STORAGE_KEY</span> = <span class="hljs-string">'todos'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadFromStorage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> storedTodos = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">STORAGE_KEY</span>)
  <span class="hljs-keyword">return</span> storedTodos ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedTodos) : []
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">saveToStorage</span>(<span class="hljs-params">todos</span>) {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">STORAGE_KEY</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos))
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useTodos</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">loadFromStorage</span>())

  <span class="hljs-comment">// ç›‘å¬ todos å˜åŒ–ï¼Œä¿å­˜åˆ° localStorage</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">saveToStorage</span>(todos)
  }, [todos])

  <span class="hljs-keyword">return</span> { todos, setTodos }
}
</code></pre>
<h3 data-id="heading-18">3ï¸âƒ£ useContext Hook</h3>
<p><code>useContext</code> ç”¨äºåœ¨ç»„ä»¶æ ‘ä¸­è·¨å±‚çº§ä¼ é€’æ•°æ®ï¼Œé¿å…é€šè¿‡ props ä¸€å±‚å±‚ä¼ é€’ã€‚</p>
<h4 data-id="heading-19">åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> value = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">MyContext</span>)
</code></pre>
<h4 data-id="heading-20">ä½¿ç”¨æ­¥éª¤</h4>
<ol>
<li>åˆ›å»º Context</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(defaultValue)
</code></pre>
<ol start="2">
<li>æä¾› Context</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">MyContext</span>.<span class="hljs-property">Provider</span> value={<span class="hljs-comment">/* æŸä¸ªå€¼ */</span>}&gt;
  &lt;å­ç»„ä»¶ /&gt;
&lt;/<span class="hljs-title class_">MyContext</span>.<span class="hljs-property">Provider</span>&gt;
</code></pre>
<ol start="3">
<li>æ¶ˆè´¹ Context</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ChildComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> value = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">MyContext</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-21">ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createContext, useContext, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// åˆ›å»º Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>()

<span class="hljs-comment">// çˆ¶ç»„ä»¶æä¾› Context</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme</span>, <span class="hljs-attr">setTheme</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Content</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// å­ç»„ä»¶æ¶ˆè´¹ Context</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme, setTheme } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{theme}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setTheme(theme === 'light' ? 'dark' : 'light')}&gt;
        åˆ‡æ¢ä¸»é¢˜
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-22">4ï¸âƒ£ useRef Hook</h3>
<p><code>useRef</code> ç”¨äºåˆ›å»ºä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ <code>.current</code> å±æ€§å¯ä»¥è¢«èµ‹å€¼å’Œè¯»å–ã€‚</p>
<h4 data-id="heading-23">åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> refContainer = <span class="hljs-title function_">useRef</span>(initialValue)
</code></pre>
<h4 data-id="heading-24">ä¸»è¦ç”¨é€”</h4>
<ol>
<li><strong>è®¿é—® DOM å…ƒç´ </strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRef, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">TextInput</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> inputRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    inputRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">focus</span>()
  }, [])
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{inputRef}</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span></span>
}
</code></pre>
<ol start="2">
<li><strong>ä¿å­˜å¯å˜å€¼ï¼ˆä¸è§¦å‘é‡æ–°æ¸²æŸ“ï¼‰</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Timer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> timerRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">start</span> = (<span class="hljs-params"/>) =&gt; {
    timerRef.<span class="hljs-property">current</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®šæ—¶å™¨è¿è¡Œä¸­'</span>)
    }, <span class="hljs-number">1000</span>)
  }
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">stop</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-built_in">clearInterval</span>(timerRef.<span class="hljs-property">current</span>)
  }
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{start}</span>&gt;</span>å¼€å§‹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{stop}</span>&gt;</span>åœæ­¢<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<ol start="3">
<li><strong>ä¿å­˜ä¸Šä¸€æ¬¡çš„å€¼</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">usePrevious</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>()
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    ref.<span class="hljs-property">current</span> = value
  }, [value])
  
  <span class="hljs-keyword">return</span> ref.<span class="hljs-property">current</span>
}
</code></pre>
<h2 data-id="heading-25">ğŸ“ ä¸‰ã€JavaScript å‡½æ•°å›é¡¾</h2>
<h3 data-id="heading-26">1ï¸âƒ£ æ™®é€šå‡½æ•°</h3>
<p>ä½¿ç”¨ <code>function</code> å…³é”®å­—å£°æ˜çš„å‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`ä½ å¥½ï¼Œ<span class="hljs-subst">${name}</span>ï¼`</span>
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">'å¼ ä¸‰'</span>)) <span class="hljs-comment">// ä½ å¥½ï¼Œå¼ ä¸‰ï¼</span>
</code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æœ‰å‡½æ•°æå‡</li>
<li>å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨</li>
<li><code>this</code> æŒ‡å‘è°ƒç”¨æ—¶çš„å¯¹è±¡</li>
</ul>
<h3 data-id="heading-27">2ï¸âƒ£ ç®­å¤´å‡½æ•°</h3>
<p>ES6 å¼•å…¥çš„å‡½æ•°è¯­æ³•ï¼Œæ›´ç®€æ´ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">greet</span> = (<span class="hljs-params">name</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`ä½ å¥½ï¼Œ<span class="hljs-subst">${name}</span>ï¼`</span>
}

<span class="hljs-comment">// ç®€å†™å½¢å¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">greet</span> = name =&gt; <span class="hljs-string">`ä½ å¥½ï¼Œ<span class="hljs-subst">${name}</span>ï¼`</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">'æå››'</span>)) <span class="hljs-comment">// ä½ å¥½ï¼Œæå››ï¼</span>
</code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ²¡æœ‰ <code>this</code> ç»‘å®šï¼Œ<code>this</code> ç»§æ‰¿è‡ªå¤–å±‚ä½œç”¨åŸŸ</li>
<li>æ²¡æœ‰ <code>arguments</code> å¯¹è±¡</li>
<li>ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨</li>
<li>æ²¡æœ‰ <code>prototype</code> å±æ€§</li>
<li>æ›´ç®€æ´çš„è¯­æ³•</li>
</ul>
<h3 data-id="heading-28">3ï¸âƒ£ åŒ¿åå‡½æ•°</h3>
<p>æ²¡æœ‰å‡½æ•°åçš„å‡½æ•°ï¼Œé€šå¸¸ä½œä¸ºå›è°ƒå‡½æ•°ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1ç§’åæ‰§è¡Œ'</span>)
}, <span class="hljs-number">1000</span>)

<span class="hljs-comment">// ç®­å¤´å‡½æ•°å½¢å¼çš„åŒ¿åå‡½æ•°</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1ç§’åæ‰§è¡Œ'</span>)
}, <span class="hljs-number">1000</span>)
</code></pre>
<h3 data-id="heading-29">4ï¸âƒ£ ç«‹å³æ‰§è¡Œå‡½æ•°</h3>
<p>å®šä¹‰åç«‹å³æ‰§è¡Œçš„å‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç«‹å³æ‰§è¡Œ'</span>)
})()

<span class="hljs-comment">// ç®­å¤´å‡½æ•°å½¢å¼</span>
(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç«‹å³æ‰§è¡Œ'</span>)
})()
</code></pre>
<p>ç”¨é€”ï¼š</p>
<ul>
<li>åˆ›å»ºç‹¬ç«‹ä½œç”¨åŸŸï¼Œé¿å…å˜é‡æ±¡æŸ“</li>
<li>æ¨¡å—åŒ–ä»£ç </li>
<li>åˆå§‹åŒ–é…ç½®</li>
</ul>
<h3 data-id="heading-30">5ï¸âƒ£ é€’å½’å‡½æ•°</h3>
<p>å‡½æ•°è°ƒç”¨è‡ªèº«ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">factorial</span>(<span class="hljs-params">n</span>) {
  <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">return</span> n * <span class="hljs-title function_">factorial</span>(n - <span class="hljs-number">1</span>)
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">factorial</span>(<span class="hljs-number">5</span>)) <span class="hljs-comment">// 120</span>
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>éå†æ ‘å½¢ç»“æ„</li>
<li>è®¡ç®—é˜¶ä¹˜ã€æ–æ³¢é‚£å¥‘æ•°åˆ—</li>
<li>æ·±åº¦ä¼˜å…ˆæœç´¢</li>
</ul>
<h3 data-id="heading-31">6ï¸âƒ£ å›è°ƒå‡½æ•°</h3>
<p>ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">data, callback</span>) {
  <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
  <span class="hljs-keyword">const</span> result = data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item * <span class="hljs-number">2</span>)
  <span class="hljs-comment">// è°ƒç”¨å›è°ƒå‡½æ•°</span>
  <span class="hljs-title function_">callback</span>(result)
}

<span class="hljs-title function_">processData</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">// [2, 4, 6]</span>
})
</code></pre>
<p>åœ¨ React ä¸­å¹¿æ³›åº”ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;button onClick={<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">handleClick</span>(id)}&gt;
  ç‚¹å‡»æˆ‘
&lt;/button&gt;
</code></pre>
<h3 data-id="heading-32">7ï¸âƒ£ æ„é€ å‡½æ•°</h3>
<p>ç”¨äºåˆ›å»ºå¯¹è±¡çš„å‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">greet</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼Œä»Šå¹´<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>å²`</span>)
}

<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-number">25</span>)
person.<span class="hljs-title function_">greet</span>() <span class="hljs-comment">// æˆ‘æ˜¯ç‹äº”ï¼Œä»Šå¹´25å²</span>
</code></pre>
<p>ES6 ç±»è¯­æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age
  }
  
  <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼Œä»Šå¹´<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>å²`</span>)
  }
}
</code></pre>
<h3 data-id="heading-33">8ï¸âƒ£ é—­åŒ…</h3>
<p>å‡½æ•°èƒ½å¤Ÿè®°ä½å¹¶è®¿é—®å…¶è¯æ³•ä½œç”¨åŸŸï¼Œå³ä½¿å‡½æ•°åœ¨å…¶è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> {
      count++
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count)
    },
    <span class="hljs-attr">decrement</span>: <span class="hljs-function">() =&gt;</span> {
      count--
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count)
    }
  }
}

<span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">createCounter</span>()
counter.<span class="hljs-title function_">increment</span>() <span class="hljs-comment">// 1</span>
counter.<span class="hljs-title function_">increment</span>() <span class="hljs-comment">// 2</span>
counter.<span class="hljs-title function_">decrement</span>() <span class="hljs-comment">// 1</span>
</code></pre>
<p>é—­åŒ…çš„åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>æ•°æ®ç§æœ‰åŒ–</li>
<li>æŸ¯é‡ŒåŒ–</li>
<li>æ¨¡å—æ¨¡å¼</li>
<li>äº‹ä»¶å¤„ç†ç¨‹åº</li>
</ul>
<p>åœ¨ React Hooks ä¸­çš„é—­åŒ…é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count) <span class="hljs-comment">// æ°¸è¿œæ‰“å° 0ï¼Œå› ä¸ºé—­åŒ…æ•è·äº†åˆå§‹å€¼</span>
    }, <span class="hljs-number">1000</span>)
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer)
  }, []) <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„</span>
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;{count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°æˆ–æ·»åŠ æ­£ç¡®çš„ä¾èµ–ã€‚</p>
<h2 data-id="heading-34">ğŸš€ å››ã€è‡ªå®šä¹‰ Hooks</h2>
<p>è‡ªå®šä¹‰ Hooks æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ <code>use</code> å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»– Hooksã€‚</p>
<h3 data-id="heading-35">ğŸ¯ è‡ªå®šä¹‰ Hooks çš„ä¼˜åŠ¿</h3>
<ol>
<li><strong>é€»è¾‘å¤ç”¨</strong>ï¼šå°†ç»„ä»¶é—´çš„å…±äº«é€»è¾‘æŠ½ç¦»åˆ°è‡ªå®šä¹‰ Hook ä¸­</li>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šUI ç»„ä»¶æ›´ç®€å•ï¼Œåªè´Ÿè´£ HTML + CSSï¼Œå¥½ç»´æŠ¤</li>
<li><strong>å¤ç”¨æ€§å¥½</strong>ï¼šå’Œç»„ä»¶ä¸€æ ·ï¼Œæ˜¯å‰ç«¯å›¢é˜Ÿçš„æ ¸å¿ƒèµ„äº§</li>
<li><strong>ä¸šåŠ¡é€»è¾‘æ›´ç®€å•</strong>ï¼šå¥½æµ‹è¯•</li>
</ol>
<h3 data-id="heading-36">ğŸ“¦ æ¡ˆä¾‹ 1ï¼šuseMouse Hook</h3>
<p>ç›‘å¬é¼ æ ‡ä½ç½®çš„è‡ªå®šä¹‰ Hookã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMouse</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [x, setX] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> [y, setY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = (<span class="hljs-params">event</span>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¼ æ ‡ç§»åŠ¨'</span>)
      <span class="hljs-title function_">setX</span>(event.<span class="hljs-property">pageX</span>)
      <span class="hljs-title function_">setY</span>(event.<span class="hljs-property">pageY</span>)
    }
    
    <span class="hljs-comment">// ç»„ä»¶æŒ‚è½½æ—¶ï¼Œç›‘å¬ mousemove äº‹ä»¶</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äº‹ä»¶ç›‘å¬å·²æ·»åŠ '</span>)
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶ï¼Œç§»é™¤ mousemove äº‹ä»¶</span>
      <span class="hljs-comment">// é˜²æ­¢å†…å­˜æ³„æ¼</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¸…é™¤äº‹ä»¶ç›‘å¬'</span>)
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update)
    }
  }, [])

  <span class="hljs-keyword">return</span> { x, y }
}
</code></pre>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> useMouse <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useMouse'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { x, y } = <span class="hljs-title function_">useMouse</span>()
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      é¼ æ ‡ä½ç½®ï¼š{x} {y}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-37">ğŸ“¦ æ¡ˆä¾‹ 2ï¼šuseTodos Hook</h3>
<p>å®Œæ•´çš„å¾…åŠäº‹é¡¹ç®¡ç† Hookã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STORAGE_KEY</span> = <span class="hljs-string">'todos'</span>

<span class="hljs-comment">// ä» localStorage åŠ è½½ todos</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadFromStorage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> storedTodos = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">STORAGE_KEY</span>)
  <span class="hljs-keyword">return</span> storedTodos ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedTodos) : []
}

<span class="hljs-comment">// ä¿å­˜ todos åˆ° localStorage</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">saveToStorage</span>(<span class="hljs-params">todos</span>) {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">STORAGE_KEY</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos))
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useTodos</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// useState æ¥æ”¶å‡½æ•°è®¡ç®—åŒæ­¥</span>
  <span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">loadFromStorage</span>())

  <span class="hljs-comment">// ç›‘å¬ todos å˜åŒ–ï¼Œä¿å­˜åˆ° localStorage</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">saveToStorage</span>(todos)
  }, [todos])
  
  <span class="hljs-comment">// æ·»åŠ  todo</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params">text</span>) =&gt; {
    text = text.<span class="hljs-title function_">trim</span>()
    <span class="hljs-keyword">if</span> (text === <span class="hljs-string">''</span>) {
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-title function_">setTodos</span>([
      ...todos,
      {
        <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
        <span class="hljs-attr">text</span>: text,
        <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>
      }
    ])
  }
  
  <span class="hljs-comment">// åˆ é™¤ todo</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> todo.<span class="hljs-property">id</span> !== id))
  }
  
  <span class="hljs-comment">// åˆ‡æ¢ todo å®ŒæˆçŠ¶æ€</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(
      todos.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (todo.<span class="hljs-property">id</span> === id) {
          <span class="hljs-keyword">return</span> {
            ...todo,
            <span class="hljs-attr">completed</span>: !todo.<span class="hljs-property">completed</span>
          }
        }
        <span class="hljs-keyword">return</span> todo
      })
    )
  }

  <span class="hljs-keyword">return</span> {
    todos,
    addTodo,
    deleteTodo,
    toggleTodo
  }
}
</code></pre>
<h3 data-id="heading-38">ğŸ¨ ç»„ä»¶å®ç°</h3>
<h4 data-id="heading-39">TodoInput ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoInput</span>(<span class="hljs-params">{ onAddTodo }</span>) {
  <span class="hljs-keyword">const</span> [text, setText] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>()
    <span class="hljs-keyword">if</span> (!text.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>
    <span class="hljs-title function_">onAddTodo</span>(text.<span class="hljs-title function_">trim</span>())
    <span class="hljs-title function_">setText</span>(<span class="hljs-string">''</span>)
  }
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-input"</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{text}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setText(e.target.value)}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æ·»åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-40">TodoItem ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoItem</span>(<span class="hljs-params">{ todo, onDeleteTodo, onToggleTodo }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'todo-item'</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
        <span class="hljs-attr">checked</span>=<span class="hljs-string">{todo.completed}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{()</span> =&gt;</span> onToggleTodo(todo.id)}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{todo.completed</span> ? '<span class="hljs-attr">completed</span>' <span class="hljs-attr">:</span> ''}&gt;</span>
        {todo.text}
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onDeleteTodo(todo.id)}&gt;åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-41">TodoList ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./TodoItem.jsx'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params">{ todos, onDeleteTodo, onToggleTodo }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'todo-list'</span>&gt;</span>
      {todos.map((todo) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> 
          <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>
          <span class="hljs-attr">todo</span>=<span class="hljs-string">{todo}</span>
          <span class="hljs-attr">onDeleteTodo</span>=<span class="hljs-string">{onDeleteTodo}</span>
          <span class="hljs-attr">onToggleTodo</span>=<span class="hljs-string">{onToggleTodo}</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-42">App ä¸»ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> useTodos <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useTodos.js'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoList.jsx'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoInput.jsx'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> {
    todos,
    addTodo,
    deleteTodo,
    toggleTodo,
  } = <span class="hljs-title function_">useTodos</span>()

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoInput</span> <span class="hljs-attr">onAddTodo</span>=<span class="hljs-string">{addTodo}</span> /&gt;</span>
      {todos.length &gt; 0 ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span>
          <span class="hljs-attr">todos</span>=<span class="hljs-string">{todos}</span>
          <span class="hljs-attr">onDeleteTodo</span>=<span class="hljs-string">{deleteTodo}</span>
          <span class="hljs-attr">onToggleTodo</span>=<span class="hljs-string">{toggleTodo}</span>
        /&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-43">âš ï¸ äº”ã€å†…å­˜æ³„æ¼ä¸æ¸…ç†</h2>
<h3 data-id="heading-44">ğŸ” ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼</h3>
<p>å†…å­˜æ³„æ¼æ˜¯æŒ‡ç¨‹åºä¸­å·²åŠ¨æ€åˆ†é…çš„å †å†…å­˜ç”±äºæŸç§åŸå› ç¨‹åºæœªé‡Šæ”¾æˆ–æ— æ³•é‡Šæ”¾ï¼Œé€ æˆç³»ç»Ÿå†…å­˜çš„æµªè´¹ï¼Œå¯¼è‡´ç¨‹åºè¿è¡Œé€Ÿåº¦å‡æ…¢ç”šè‡³ç³»ç»Ÿå´©æºƒç­‰ä¸¥é‡åæœã€‚</p>
<h3 data-id="heading-45">ğŸŒ åœ¨ React ä¸­çš„å¸¸è§åœºæ™¯</h3>
<ol>
<li><strong>æœªæ¸…é™¤çš„äº‹ä»¶ç›‘å¬å™¨</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update)
  <span class="hljs-comment">// ç¼ºå°‘æ¸…ç†å‡½æ•°</span>
}, [])
</code></pre>
<ol start="2">
<li><strong>æœªæ¸…é™¤çš„å®šæ—¶å™¨</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®šæ—¶å™¨'</span>)
  }, <span class="hljs-number">1000</span>)
  <span class="hljs-comment">// ç¼ºå°‘æ¸…ç†å‡½æ•°</span>
}, [])
</code></pre>
<ol start="3">
<li><strong>æœªå–æ¶ˆçš„ç½‘ç»œè¯·æ±‚</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-title function_">setData</span>(data))
  <span class="hljs-comment">// ç»„ä»¶å¸è½½åï¼Œè¯·æ±‚å¯èƒ½ä»åœ¨è¿›è¡Œ</span>
}, [])
</code></pre>
<h3 data-id="heading-46">âœ… æ­£ç¡®çš„æ¸…ç†æ–¹å¼</h3>
<h4 data-id="heading-47">äº‹ä»¶ç›‘å¬å™¨æ¸…ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = (<span class="hljs-params">event</span>) =&gt; {
    <span class="hljs-title function_">setX</span>(event.<span class="hljs-property">pageX</span>)
    <span class="hljs-title function_">setY</span>(event.<span class="hljs-property">pageY</span>)
  }
  
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update)
  
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update)
  }
}, [])
</code></pre>
<h4 data-id="heading-48">å®šæ—¶å™¨æ¸…ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®šæ—¶å™¨è¿è¡Œ'</span>)
  }, <span class="hljs-number">1000</span>)
  
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">clearInterval</span>(timer)
  }
}, [])
</code></pre>
<h4 data-id="heading-49">ç½‘ç»œè¯·æ±‚æ¸…ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>()
  
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>, { <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-title function_">setData</span>(data))
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> !== <span class="hljs-string">'AbortError'</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err)
      }
    })
  
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    controller.<span class="hljs-title function_">abort</span>()
  }
}, [])
</code></pre>
<h3 data-id="heading-50">ğŸ¯ useEffect æ¸…ç†å‡½æ•°æ‰§è¡Œæ—¶æœº</h3>
<p>æ¸…ç†å‡½æ•°åœ¨ä»¥ä¸‹æ—¶æœºæ‰§è¡Œï¼š</p>
<ol>
<li><strong>ç»„ä»¶å¸è½½æ—¶</strong>ï¼šç»„ä»¶ä» DOM ä¸­ç§»é™¤æ—¶</li>
<li><strong>ä¸‹ä¸€æ¬¡å‰¯ä½œç”¨æ‰§è¡Œå‰</strong>ï¼šå½“ä¾èµ–æ•°ç»„å˜åŒ–ï¼Œæ–°çš„å‰¯ä½œç”¨æ‰§è¡Œå‰</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‰¯ä½œç”¨æ‰§è¡Œ'</span>)
  
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¸…ç†å‡½æ•°æ‰§è¡Œ'</span>)
  }
}, [count])
</code></pre>
<p>æ‰§è¡Œé¡ºåºï¼š</p>
<ul>
<li>ç»„ä»¶æŒ‚è½½ï¼šå‰¯ä½œç”¨æ‰§è¡Œ</li>
<li>count å˜åŒ–ï¼šæ¸…ç†å‡½æ•°æ‰§è¡Œ â†’ å‰¯ä½œç”¨æ‰§è¡Œ</li>
<li>ç»„ä»¶å¸è½½ï¼šæ¸…ç†å‡½æ•°æ‰§è¡Œ</li>
</ul>
<h2 data-id="heading-51">ğŸ“ å…­ã€Hooks ä½¿ç”¨è§„åˆ™</h2>
<h3 data-id="heading-52">ğŸ“ ä¸¤æ¡é»„é‡‘è§„åˆ™</h3>
<ol>
<li><strong>åªåœ¨å‡½æ•°æœ€é¡¶å±‚è°ƒç”¨ Hooks</strong>
<ul>
<li>ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hooks</li>
<li>ç¡®ä¿ Hooks åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä»¥ç›¸åŒçš„é¡ºåºè¢«è°ƒç”¨</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ...</span>
  }, [])
}

<span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// ...</span>
  }
}, [count])
</code></pre>
<ol start="2">
<li><strong>åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hooks</strong>
<ul>
<li>åœ¨ React å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hooks</li>
<li>åœ¨è‡ªå®šä¹‰ Hooks ä¸­è°ƒç”¨ Hooks</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">regularFunction</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
}

<span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Component</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
}
</code></pre>
<h3 data-id="heading-53">ğŸ”§ ESLint æ’ä»¶</h3>
<p>ä½¿ç”¨ <code>eslint-plugin-react-hooks</code> æ¥å¼ºåˆ¶æ‰§è¡Œè¿™äº›è§„åˆ™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-string">"plugins"</span>: [
    <span class="hljs-string">"react-hooks"</span>
  ],
  <span class="hljs-string">"rules"</span>: {
    <span class="hljs-string">"react-hooks/rules-of-hooks"</span>: <span class="hljs-string">"error"</span>,
    <span class="hljs-string">"react-hooks/exhaustive-deps"</span>: <span class="hljs-string">"warn"</span>
  }
}
</code></pre>
<h2 data-id="heading-54">ğŸ“Š ä¸ƒã€å¸¸ç”¨å†…ç½® Hooks è¡¥å……</h2>
<h3 data-id="heading-55">useMemo Hook</h3>
<p>ç”¨äºç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…ä¸å¿…è¦çš„é‡å¤è®¡ç®—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ExpensiveComponent</span>(<span class="hljs-params">{ items }</span>) {
  <span class="hljs-keyword">const</span> sortedItems = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¡ç®—æ’åº'</span>)
    <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">value</span> - b.<span class="hljs-property">value</span>)
  }, [items])
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{sortedItems.map(...)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-56">useCallback Hook</h3>
<p>ç”¨äºç¼“å­˜å‡½æ•°ï¼Œé¿å…å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ParentComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> handleClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»'</span>)
  }, [])
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChildComponent</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span> /&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-57">useReducer Hook</h3>
<p>ç”¨äºå¤æ‚çš„çŠ¶æ€ç®¡ç†ï¼Œç±»ä¼¼ Reduxã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useReducer } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'increment'</span>:
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> }
    <span class="hljs-keyword">case</span> <span class="hljs-string">'decrement'</span>:
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> - <span class="hljs-number">1</span> }
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> state
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{state.count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch({ type: 'increment' })}&gt;å¢åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch({ type: 'decrement' })}&gt;å‡å°‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-58">ğŸ¯ å…«ã€é¡¹ç›®å®æˆ˜æ€»ç»“</h2>
<h3 data-id="heading-59">ğŸ“ é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-css" lang="css">hooks-demo/
â”œâ”€â”€ <span class="hljs-attribute">src</span>/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ TodoInput<span class="hljs-selector-class">.jsx</span>
â”‚   â”‚   â”œâ”€â”€ TodoItem<span class="hljs-selector-class">.jsx</span>
â”‚   â”‚   â””â”€â”€ TodoList<span class="hljs-selector-class">.jsx</span>
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useMouse<span class="hljs-selector-class">.js</span>
â”‚   â”‚   â””â”€â”€ useTodos<span class="hljs-selector-class">.js</span>
â”‚   â”œâ”€â”€ App<span class="hljs-selector-class">.jsx</span>
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.jsx</span>
â”‚   â””â”€â”€ index<span class="hljs-selector-class">.css</span>
â””â”€â”€ package<span class="hljs-selector-class">.json</span>
</code></pre>
<h3 data-id="heading-60">ğŸ”„ æ•°æ®æµ</h3>
<pre><code class="hljs language-scss" lang="scss">App (ä½¿ç”¨ useTodos)
  â”œâ”€â”€ TodoInput (æ¥æ”¶ onAddTodo)
  â””â”€â”€ TodoList (æ¥æ”¶ todos, onDeleteTodo, onToggleTodo)
      â””â”€â”€ TodoItem (æ¥æ”¶ todo, onDeleteTodo, onToggleTodo)
</code></pre>
<h3 data-id="heading-61">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li><strong>è‡ªå®šä¹‰ Hooks å°è£…ä¸šåŠ¡é€»è¾‘</strong>ï¼Œä½¿ç»„ä»¶æ›´ç®€æ´</li>
<li><strong>useEffect çš„æ¸…ç†å‡½æ•°</strong>é˜²æ­¢å†…å­˜æ³„æ¼</li>
<li><strong>useState çš„æƒ°æ€§åˆå§‹åŒ–</strong>æé«˜æ€§èƒ½</li>
<li><strong>localStorage æŒä¹…åŒ–</strong>æ•°æ®</li>
<li><strong>ç»„ä»¶åŒ–å¼€å‘</strong>ï¼Œå…³æ³¨ç‚¹åˆ†ç¦»</li>
</ol>
<h2 data-id="heading-62">ğŸš€ ä¹ã€æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-63">âœ¨ å‘½åè§„èŒƒ</h3>
<ul>
<li>è‡ªå®šä¹‰ Hooks å¿…é¡»ä»¥ <code>use</code> å¼€å¤´</li>
<li>ç»„ä»¶åä½¿ç”¨ PascalCase</li>
<li>å‡½æ•°åä½¿ç”¨ camelCase</li>
</ul>
<h3 data-id="heading-64">ğŸ¨ ç»„ä»¶è®¾è®¡</h3>
<ol>
<li><strong>å•ä¸€èŒè´£</strong>ï¼šæ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹</li>
<li><strong>Props æœ€å°åŒ–</strong>ï¼šåªä¼ é€’å¿…è¦çš„ props</li>
<li><strong>ç»„åˆä¼˜äºç»§æ‰¿</strong>ï¼šä½¿ç”¨ç»„åˆæ„å»ºå¤æ‚ç»„ä»¶</li>
</ol>
<h3 data-id="heading-65">ğŸ”§ Hooks è®¾è®¡</h3>
<ol>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šå°†ç›¸å…³é€»è¾‘æ”¾åœ¨ä¸€ä¸ª Hook ä¸­</li>
<li><strong>è¿”å›å¯¹è±¡</strong>ï¼šä¾¿äºè§£æ„ä½¿ç”¨</li>
<li><strong>æä¾›æ¸…ç†å‡½æ•°</strong>ï¼šé¿å…å‰¯ä½œç”¨å¯¼è‡´çš„å†…å­˜æ³„æ¼</li>
</ol>
<h3 data-id="heading-66">ğŸ“Š æ€§èƒ½ä¼˜åŒ–</h3>
<ol>
<li><strong>ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ</strong></li>
<li><strong>ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°</strong></li>
<li><strong>åˆç†ä½¿ç”¨ä¾èµ–æ•°ç»„</strong></li>
<li><strong>é¿å…ä¸å¿…è¦çš„æ¸²æŸ“</strong></li>
</ol>
<h2 data-id="heading-67">ğŸŠ åã€æ€»ç»“</h2>
<p>React Hooks æ˜¯ React å¼€å‘çš„æ ¸å¿ƒç‰¹æ€§ï¼Œå®ƒé€šè¿‡å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿæ›´ä¼˜é›…åœ°ç®¡ç†ç»„ä»¶çŠ¶æ€å’Œå‰¯ä½œç”¨ã€‚</p>
<p><strong>æ ¸å¿ƒè¦ç‚¹å›é¡¾ï¼š</strong></p>
<ul>
<li><strong>useState</strong>ï¼šç®¡ç†ç»„ä»¶çŠ¶æ€</li>
<li><strong>useEffect</strong>ï¼šå¤„ç†å‰¯ä½œç”¨ï¼ŒåŒ…æ‹¬æ¸…ç†å‡½æ•°é˜²æ­¢å†…å­˜æ³„æ¼</li>
<li><strong>useContext</strong>ï¼šè·¨å±‚çº§ä¼ é€’æ•°æ®</li>
<li><strong>useRef</strong>ï¼šè®¿é—® DOM å’Œä¿å­˜å¯å˜å€¼</li>
<li><strong>è‡ªå®šä¹‰ Hooks</strong>ï¼šé€»è¾‘å¤ç”¨ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§</li>
</ul>
<p>é€šè¿‡åˆç†ä½¿ç”¨ Hooksï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™å‡ºæ›´ç®€æ´ã€æ›´æ˜“ç»´æŠ¤ã€æ›´æ˜“æµ‹è¯•çš„ React ä»£ç ã€‚Hooks è®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰äº†ç±»ç»„ä»¶çš„æ‰€æœ‰èƒ½åŠ›ï¼ŒåŒæ—¶é¿å…äº†ç±»ç»„ä»¶çš„å¤æ‚æ€§å’Œ <code>this</code> ç»‘å®šé—®é¢˜ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œéµå¾ª Hooks çš„ä½¿ç”¨è§„åˆ™ï¼Œåˆç†è®¾è®¡è‡ªå®šä¹‰ Hooksï¼Œå……åˆ†åˆ©ç”¨ React ç”Ÿæ€ä¸­çš„å„ç§ Hooksï¼Œå°†å¤§å¤§æå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯/iOSå¼€å‘è€…å¿…å¤‡å·¥å…·è½¯ä»¶åˆé›†]]></title>    <link>https://juejin.cn/post/7605530057176743979</link>    <guid>https://juejin.cn/post/7605530057176743979</guid>    <pubDate>2026-02-12T12:00:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605530057176743979" data-draft-id="7605800124882911238" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯/iOSå¼€å‘è€…å¿…å¤‡å·¥å…·è½¯ä»¶åˆé›†"/> <meta itemprop="keywords" content="å‰ç«¯,iOS"/> <meta itemprop="datePublished" content="2026-02-12T12:00:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŠåŠ å“¥å…”å…”å…»æ®–åœº"/> <meta itemprop="url" content="https://juejin.cn/user/4001878055060264"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯/iOSå¼€å‘è€…å¿…å¤‡å·¥å…·è½¯ä»¶åˆé›†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878055060264/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŠåŠ å“¥å…”å…”å…»æ®–åœº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T12:00:33.000Z" title="Thu Feb 12 2026 12:00:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿‘æœŸæ–°è´­å…¥äº†ä¸€æ¬¾ Macï¼Œè¶æ­¤æœºä¼šé‡è£…äº†ä¸€éæ‰€æœ‰è½¯ä»¶ï¼Œè®°å½•ä¸€ä¸‹ç¨‹åºå‘˜å¿…å¤‡è½¯ä»¶åˆé›†ï¼Œæ–¹ä¾¿ä¸‹æ¬¡æ¢æœºæˆ–æ–°åŒäº‹å‚è€ƒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ç¯å¢ƒä¸åŒ…ç®¡ç†ï¼ˆå®‰è£…é¡ºåºå»ºè®®ï¼‰</h2>
<h3 data-id="heading-1">1. Homebrew</h3>
<p>Mac çš„åŒ…ç®¡ç†å™¨ï¼Œå»ºè®®æœ€å…ˆå®‰è£…ï¼Œåç»­å¾ˆå¤šè½¯ä»¶å¯é€šè¿‡å®ƒä¸€é”®å®‰è£…ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ï¼ˆå®˜æ–¹ä¸€é”®è„šæœ¬ï¼‰</span>
/bin/bash -c <span class="hljs-string">"<span class="hljs-subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>"</span>
<span class="hljs-comment"># å®‰è£…åæŒ‰æç¤ºæŠŠ brew åŠ å…¥ PATHï¼ˆApple Silicon å¸¸è§è·¯å¾„ï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'eval "$(/opt/homebrew/bin/brew shellenv)"'</span> &gt;&gt; ~/.zprofile &amp;&amp; <span class="hljs-built_in">eval</span> <span class="hljs-string">"<span class="hljs-subst">$(/opt/homebrew/bin/brew shellenv)</span>"</span>
</code></pre>
<p><strong>å¸¸ç”¨æŠ€å·§ï¼š</strong></p>
<ul>
<li><code>brew install &lt;åŒ…å&gt;</code>ï¼šå®‰è£…è½¯ä»¶</li>
<li><code>brew upgrade</code>ï¼šå‡çº§æ‰€æœ‰å·²å®‰è£…åŒ…</li>
<li><code>brew search &lt;å…³é”®è¯&gt;</code>ï¼šæœç´¢å¯ç”¨åŒ…</li>
<li><code>brew list</code>ï¼šæŸ¥çœ‹å·²å®‰è£…åˆ—è¡¨</li>
<li><code>brew cleanup</code>ï¼šæ¸…ç†æ—§ç‰ˆæœ¬ç¼“å­˜</li>
<li><code>brew cask install &lt;åº”ç”¨&gt;</code>ï¼šå®‰è£…å›¾å½¢ç•Œé¢åº”ç”¨ï¼ˆå¦‚ Chromeã€Cursorï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-2">2. nvmï¼ˆNode ç‰ˆæœ¬ç®¡ç†ï¼‰</h3>
<p>å¤šé¡¹ç›®å¯èƒ½ä¾èµ–ä¸åŒ Node ç‰ˆæœ¬ï¼Œç”¨ nvm åˆ‡æ¢å¾ˆæ–¹ä¾¿ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ Homebrew å®‰è£…</span>
brew install nvm
<span class="hljs-comment"># åœ¨ ~/.zshrc ä¸­åŠ å…¥ï¼ˆå¦‚ç”¨ Oh My Zsh åˆ™ç¼–è¾‘è¯¥æ–‡ä»¶ï¼‰</span>
<span class="hljs-built_in">export</span> NVM_DIR=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.nvm"</span>
[ -s <span class="hljs-string">"/opt/homebrew/opt/nvm/nvm.sh"</span> ] &amp;&amp; \. <span class="hljs-string">"/opt/homebrew/opt/nvm/nvm.sh"</span>
[ -s <span class="hljs-string">"/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm"</span> ] &amp;&amp; \. <span class="hljs-string">"/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm"</span>
<span class="hljs-comment"># ç„¶åæ‰§è¡Œ source ~/.zshrc</span>
</code></pre>
<p><strong>å¸¸ç”¨æŠ€å·§ï¼š</strong></p>
<ul>
<li>
<p><code>nvm install 20</code>ï¼šå®‰è£… Node 20 æœ€æ–°ç‰ˆ</p>
</li>
<li>
<p><code>nvm use 18</code>ï¼šå½“å‰ç»ˆç«¯åˆ‡æ¢åˆ° Node 18</p>
</li>
<li>
<p><code>nvm alias default 20</code>ï¼šé»˜è®¤ä½¿ç”¨ Node 20</p>
</li>
<li>
<p><code>nvm ls</code>ï¼šæŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬</p>
</li>
<li>
<p>é¡¹ç›®æ ¹ç›®å½•æ”¾ <code>.nvmrc</code> å†™ç‰ˆæœ¬å·ï¼ˆå¦‚ <code>20</code>ï¼‰ï¼Œåœ¨ç›®å½•ä¸‹æ‰§è¡Œ <code>nvm use</code> å³å¯è‡ªåŠ¨åˆ‡æ¢</p>
</li>
<li>
<p>æŠ€å·§2<br/>
åœ¨.nvmrc ä¸­å†™å…¥å½“å‰æ”¯æŒçš„nodeç‰ˆæœ¬å·<code>node -v &gt; .nvmrc</code></p>
</li>
</ul>
<pre><code class="hljs language-ruby" lang="ruby">autoload -U add-zsh-hook
load-nvmrc() {
  local nvmrc_path
  nvmrc_path=<span class="hljs-string">"$(nvm_find_nvmrc)"</span>

  <span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"$nvmrc_path"</span> ]; <span class="hljs-keyword">then</span>
    local nvmrc_node_version
    nvmrc_node_version=<span class="hljs-variable">$(</span>nvm version <span class="hljs-string">"$(cat "</span><span class="hljs-variable">${</span>nvmrc_path}<span class="hljs-string">")"</span>)

    <span class="hljs-keyword">if</span> [ <span class="hljs-string">"$nvmrc_node_version"</span> = <span class="hljs-string">"N/A"</span> ]; <span class="hljs-keyword">then</span>
      nvm install
    elif [ <span class="hljs-string">"$nvmrc_node_version"</span> != <span class="hljs-string">"$(nvm version)"</span> ]; <span class="hljs-keyword">then</span>
      nvm use
    fi
  elif [ <span class="hljs-string">"$(nvm version)"</span> != <span class="hljs-string">"$(nvm version default)"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># ç¦»å¼€æœ‰ .nvmrc çš„ç›®å½•ï¼Œåˆ‡å›é»˜è®¤ç‰ˆæœ¬</span>
    echo <span class="hljs-string">"Reverting to nvm default version"</span>
    nvm use default
  fi
}
add-zsh-hook chpwd load-nvmrc
load-nvmrc
</code></pre>
<p>å³å¯å®ç°åˆ‡æ¢åˆ°å½“å‰æ–‡ä»¶è‡ªåŠ¨åˆ‡æ¢åˆ°å¯¹åº”çš„nodeç‰ˆæœ¬</p>
<hr/>
<h3 data-id="heading-3">3. pnpm</h3>
<p>æ¯” npm æ›´å¿«ã€çœç£ç›˜ï¼Œé€‚åˆ Monorepo å’Œå‰ç«¯é¡¹ç›®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ï¼ˆå»ºè®®åœ¨é…ç½®å¥½ nvm åæ‰§è¡Œï¼Œå…¨å±€å®‰è£…åˆ°å½“å‰ Nodeï¼‰</span>
npm install -g pnpm
<span class="hljs-comment"># æˆ–ä½¿ç”¨ Homebrew</span>
brew install pnpm
</code></pre>
<p><strong>å¸¸ç”¨æŠ€å·§ï¼š</strong></p>
<ul>
<li><code>pnpm install</code>ï¼šå®‰è£…ä¾èµ–ï¼ˆä¼šä¸¥æ ¼æŒ‰ workspace å’Œ lockfileï¼‰</li>
<li><code>pnpm add &lt;åŒ…å&gt;</code> / <code>pnpm add -D &lt;åŒ…å&gt;</code>ï¼šæ·»åŠ ä¾èµ– / å¼€å‘ä¾èµ–</li>
<li><code>pnpm run &lt;script&gt;</code> æˆ– <code>pnpm &lt;script&gt;</code>ï¼šè¿è¡Œ package.json é‡Œè„šæœ¬</li>
<li><code>pnpm store path</code>ï¼šæŸ¥çœ‹å…¨å±€ store ç›®å½•ï¼›<code>pnpm store prune</code>ï¼šæ¸…ç†æœªå¼•ç”¨åŒ…</li>
<li>åœ¨é¡¹ç›®é‡Œç”¨ <code>pnpm</code> å‰å¯å…ˆ <code>corepack enable</code> å† <code>corepack prepare pnpm@latest --activate</code>ï¼Œä¾¿äºå›¢é˜Ÿç»Ÿä¸€ pnpm ç‰ˆæœ¬</li>
</ul>
<hr/>
<h3 data-id="heading-4">4. rvm + CocoaPods</h3>
<p>iOS/macOS å¼€å‘å¸¸ç”¨ Ruby ç¯å¢ƒç®¡ç† + ä¾èµ–ç®¡ç†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… rvm</span>
curl -sSL https://get.rvm.io | bash -s stable
<span class="hljs-built_in">source</span> ~/.rvm/scripts/rvm

<span class="hljs-comment"># å®‰è£… Rubyï¼ˆå»ºè®® 3.xï¼Œä¸ CocoaPods å…¼å®¹å¥½ï¼‰</span>
rvm install 3.2.0
rvm use 3.2.0 --default

<span class="hljs-comment"># å®‰è£… CocoaPods</span>
sudo gem install cocoapods -n /usr/local/bin
</code></pre>
<p><strong>å¸¸ç”¨æŠ€å·§ï¼š</strong></p>
<ul>
<li><strong>rvm</strong>
<ul>
<li><code>rvm list</code>ï¼šå·²å®‰è£… Ruby åˆ—è¡¨</li>
<li><code>rvm use 3.2.0</code>ï¼šåˆ‡æ¢ç‰ˆæœ¬</li>
<li>é¡¹ç›®ç›®å½•æ”¾ <code>.ruby-version</code> å¯è‡ªåŠ¨åˆ‡æ¢</li>
</ul>
</li>
<li><strong>CocoaPods</strong>
<ul>
<li><code>pod init</code>ï¼šåœ¨ Xcode å·¥ç¨‹ç›®å½•ä¸‹åˆå§‹åŒ– Podfile</li>
<li><code>pod install</code>ï¼šå®‰è£…/æ›´æ–°ä¾èµ–ï¼ˆä¹‹åç”¨ <code>.xcworkspace</code> æ‰“å¼€å·¥ç¨‹ï¼‰</li>
<li><code>pod update &lt;åº“å&gt;</code>ï¼šæ›´æ–°æŒ‡å®šåº“</li>
<li><code>pod repo update</code>ï¼šæ›´æ–° CocoaPods å®˜æ–¹ spec ä»“åº“ï¼ˆå¡ä½æ—¶å¸¸ç”¨ï¼‰</li>
<li>å›½å†…é•œåƒè‹¥æ…¢ï¼Œå¯åœ¨ Podfile é¡¶éƒ¨æŒ‡å®š sourceï¼Œæˆ–ä½¿ç”¨ CDN æº</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-5">äºŒã€å¿…å¤‡è½¯ä»¶åˆ—è¡¨</h2>




























































<table><thead><tr><th>ç±»å‹</th><th>è½¯ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æµè§ˆå™¨</td><td>Chrome</td><td>å¼€å‘ã€è°ƒè¯•ã€æ—¥å¸¸</td></tr><tr><td>ç»ˆç«¯</td><td>iTerm2 + Oh My Zsh</td><td>æ›´å¥½ç”¨çš„ç»ˆç«¯ä¸ shell é…ç½®</td></tr><tr><td>æŠ“åŒ…/è°ƒè¯•</td><td>Proxyman</td><td>macOS æŠ“åŒ…ã€è¯ä¹¦ã€ä»£ç†</td></tr><tr><td>å¼€å‘</td><td>Xcode</td><td>iOS/macOS å¼€å‘å¿…å¤‡</td></tr><tr><td>ç¼–è¾‘å™¨</td><td>Cursor</td><td>AI è¾…åŠ©ç¼–ç </td></tr><tr><td>ç³»ç»Ÿç›‘æ§</td><td>iStat Menus</td><td>èœå•æ  CPU/å†…å­˜/ç½‘é€Ÿç­‰</td></tr><tr><td>æ•°æ®åº“</td><td>TablePlus</td><td>å¤šæ•°æ®åº“å®¢æˆ·ç«¯</td></tr><tr><td>æˆªå›¾</td><td>iShot</td><td>æˆªå›¾ã€æ ‡æ³¨ã€å½•å±</td></tr><tr><td>è¿œç¨‹</td><td>Termius</td><td>SSH ç­‰è¿œç¨‹è¿æ¥</td></tr><tr><td>JSON</td><td>OK JSON</td><td>JSON æŸ¥çœ‹å·¥å…·</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€Cursor å·²å®‰è£…æ’ä»¶</h2>
<p>å½“å‰ Cursor ä¸­å·²å®‰è£…çš„æ‰©å±•ï¼ˆä¾¿äºæ¢æœºæˆ–é‡è£…æ—¶æ¢å¤ï¼‰ï¼š</p>













































































<table><thead><tr><th>æ‰©å±• ID</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>bradlc.vscode-tailwindcss</code></td><td>Tailwind CSS IntelliSenseï¼ˆç±»åè¡¥å…¨ã€é¢„è§ˆï¼‰</td></tr><tr><td><code>christian-kohler.npm-intellisense</code></td><td>npm åŒ…å/ç‰ˆæœ¬è¡¥å…¨</td></tr><tr><td><code>christian-kohler.path-intellisense</code></td><td>è·¯å¾„è¡¥å…¨ï¼ˆimportã€src ç­‰ï¼‰</td></tr><tr><td><code>dbaeumer.vscode-eslint</code></td><td>ESLint ä»£ç æ£€æŸ¥</td></tr><tr><td><code>dsznajder.es7-react-js-snippets</code></td><td>ES7+ React/Redux ä»£ç ç‰‡æ®µ</td></tr><tr><td><code>eamodio.gitlens</code></td><td>Git å¢å¼ºï¼ˆè¡Œå†å²ã€blameã€å¯¹æ¯”ç­‰ï¼‰</td></tr><tr><td><code>esbenp.prettier-vscode</code></td><td>Prettier æ ¼å¼åŒ–</td></tr><tr><td><code>formulahendry.auto-rename-tag</code></td><td>è‡ªåŠ¨é‡å‘½åé…å¯¹çš„ HTML/JSX æ ‡ç­¾</td></tr><tr><td><code>ms-ceintl.vscode-language-pack-zh-hans</code></td><td>ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰è¯­è¨€åŒ…</td></tr><tr><td><code>pkief.material-icon-theme</code></td><td>Material é£æ ¼æ–‡ä»¶/æ–‡ä»¶å¤¹å›¾æ ‡</td></tr><tr><td><code>ritwickdey.liveserver</code></td><td>æœ¬åœ° Live Server å‰ç«¯é¢„è§ˆ</td></tr><tr><td><code>steoates.autoimport</code></td><td>è‡ªåŠ¨è¡¥å…¨å¹¶æ’å…¥ import</td></tr><tr><td><code>stylelint.vscode-stylelint</code></td><td>CSS/SCSS/Less çš„ Stylelint æ£€æŸ¥</td></tr><tr><td><code>tomi.xasnippets</code></td><td>Xcode é£æ ¼ä»£ç ç‰‡æ®µï¼ˆiOS å¼€å‘ï¼‰</td></tr><tr><td><code>usernamehw.errorlens</code></td><td>è¡Œå†…æ˜¾ç¤ºé”™è¯¯/è­¦å‘Šï¼ˆError Lensï¼‰</td></tr><tr><td><code>wallabyjs.console-ninja</code></td><td>Console Ninjaï¼ˆæ§åˆ¶å°æ—¥å¿—å¢å¼ºï¼‰</td></tr><tr><td><code>yzhang.markdown-all-in-one</code></td><td>Markdown ç¼–è¾‘ä¸é¢„è§ˆå¢å¼º</td></tr></tbody></table>
<p><strong>ä¸€é”®å®‰è£…ï¼ˆåœ¨ Cursor ç»ˆç«¯æ‰§è¡Œï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">cursor --install-extension bradlc.vscode-tailwindcss
cursor --install-extension christian-kohler.npm-intellisense
cursor --install-extension christian-kohler.path-intellisense
cursor --install-extension dbaeumer.vscode-eslint
cursor --install-extension dsznajder.es7-react-js-snippets
cursor --install-extension eamodio.gitlens
cursor --install-extension esbenp.prettier-vscode
cursor --install-extension formulahendry.auto-rename-tag
cursor --install-extension ms-ceintl.vscode-language-pack-zh-hans
cursor --install-extension pkief.material-icon-theme
cursor --install-extension ritwickdey.liveserver
cursor --install-extension steoates.autoimport
cursor --install-extension stylelint.vscode-stylelint
cursor --install-extension tomi.xasnippets
cursor --install-extension usernamehw.errorlens
cursor --install-extension wallabyjs.console-ninja
cursor --install-extension yzhang.markdown-all-in-one
</code></pre>
<hr/>
<h2 data-id="heading-7">å››ã€åç»­å¯è¡¥å……</h2>
<ul>
<li>å„è½¯ä»¶çš„åå¥½è®¾ç½®æˆ–å¿«æ·é”®</li>
<li>å¸¸ç”¨ Xcode é…ç½®ï¼ˆè¯ä¹¦ã€æ¨¡æ‹Ÿå™¨ã€Build Settings ç­‰ï¼‰</li>
<li>å›¢é˜Ÿç»Ÿä¸€çš„ <code>.nvmrc</code>ã€<code>.ruby-version</code>ã€ç¼–è¾‘å™¨æ¨èæ’ä»¶é…ç½®ï¼ˆå¦‚æ”¾å…¥ä»“åº“ <code>.vscode/extensions.json</code>ï¼‰</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦æˆåœ¨çº¿ æ¡ˆä¾‹ç»ƒä¹ ]]></title>    <link>https://juejin.cn/post/7605769126270976046</link>    <guid>https://juejin.cn/post/7605769126270976046</guid>    <pubDate>2026-02-12T12:07:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605769126270976046" data-draft-id="7604793276907159615" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦æˆåœ¨çº¿ æ¡ˆä¾‹ç»ƒä¹ "/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-02-12T12:07:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç³–ç³–TANG"/> <meta itemprop="url" content="https://juejin.cn/user/1444125077668092"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦æˆåœ¨çº¿ æ¡ˆä¾‹ç»ƒä¹ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1444125077668092/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç³–ç³–TANG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T12:07:28.000Z" title="Thu Feb 12 2026 12:07:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç³–ç³–ï½æœ€è¿‘æˆ‘è·Ÿç€ b ç«™ pink è€å¸ˆåšäº†å­¦æˆåœ¨çº¿çš„æ¡ˆä¾‹ç»ƒä¹ ï¼Œæ”¶è·æ»¡æ»¡ï¼Œä»Šå¤©å°±æ¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘çš„å­¦ä¹ è¿‡ç¨‹ä¸å¿ƒå¾—ï¼Œä¸€èµ·å¼€å¯æŠ€æœ¯å­¦ä¹ æ–°æ—…ç¨‹ï¼</p>
<h2 data-id="heading-0">ä¸€.æ¡ˆä¾‹å‡†å¤‡å·¥ä½œ</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
A[åˆ›å»ºstudyç›®å½•æ–‡ä»¶å¤¹] --&gt; B[åœ¨vscodeæ‰“å¼€ç›®å½•æ–‡ä»¶å¤¹]
B --&gt; C[studyç›®å½•å†…æ–°å»ºimagesæ–‡ä»¶å¤¹]
C --&gt; D[æ–°å»ºé¦–é¡µæ–‡ä»¶index.html]
D --&gt; E[æ–°å»ºstyle.cssæ ·å¼æ–‡ä»¶é‡‡ç”¨å¤–é“¾æ ·å¼]
E --&gt; F[æ ·å¼è¡¨å†™å…¥æ¸…é™¤å†…å¤–è¾¹è·çš„æ ·å¼æ¥æ£€éªŒæ ·å¼è¡¨æ˜¯å¦å¼•å…¥æˆåŠŸ]
</code></pre>
<p>index.html:!ç¬¦å·+Tabé”®ç”Ÿæˆæ¨¡æ¿ï¼Œlink+Tabaé”®æ·»åŠ å¤–é“¾æ ·å¼ï¼›</p>
<p>bodyé‡Œéšæœºå†™å…¥å†…å®¹ç”¨äºæµ‹è¯•å¼•å…¥æ˜¯å¦æˆåŠŸ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å­¦æˆåœ¨çº¿é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    123
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14f910e9ae88449982b90995bfaece9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=wiaIpr%2FOafO1gxL2Q0xSVFlnUXE%3D" alt="image.png" loading="lazy"/>
æ ·å¼æ–‡ä»¶å»é™¤å†…å¤–è¾¹è·ï¼Œä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-css" lang="css">* {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99a91c5fb66b464d8226c067f701c060~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=730LjsQnzJqNuJZ7sTTTP1KyOuI%3D" alt="image.png" loading="lazy"/>
é€šè¿‡æµè§ˆå™¨é¢„è§ˆç½‘é¡µå†F12æŒ‰é”®ï¼Œè‹¥çœ‹åˆ°ä»¥ä¸‹æ¸…é™¤å†…å¤–è¾¹è·çš„å†…å®¹ï¼Œè¯´æ˜å¼•å…¥æˆåŠŸ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84a3dd50aa134ed1aad0948ac88e8d3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=WV2tDYF2doZ8wII6WryVEQVIKPI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒ.ç¡®å®šç‰ˆå¿ƒï¼ˆé¡µé¢å®½åº¦ï¼‰</h2>
<p>æ¯ä¸ªç‰ˆå¿ƒéƒ½è¦æ°´å¹³å±…ä¸­ï¼Œå¯ä»¥å®šä¹‰ç‰ˆå¿ƒå…¬å…±ç±»ï¼›</p>
<p>æ ·å¼æ–‡ä»¶æ·»åŠ ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.w</span>{
    <span class="hljs-attribute">width</span>: <span class="hljs-number">1200px</span>;
    <span class="hljs-attribute">margin</span>: auto;
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84c8857fd1e042eba74996ab10011008~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=Q%2FpBoOz%2Bsc2I2wTlDNdAydZmjJg%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰.åˆ†å—å®ç°</h2>
<p>æ¥ä¸‹æ¥ä¸€è¡Œä¸€è¡Œçš„å®ç°ï¼Œå…ˆå†™ç¬¬ä¸€è¡Œçš„æ¯ä¸€åˆ—ï¼Œåšå®Œä»¥åä»¥æ­¤ç±»æ¨ï¼Œåœ¨åšç¬¬äºŒè¡Œã€ç¬¬ä¸‰è¡Œï¼›</p>
<h3 data-id="heading-3">3.1å¤´éƒ¨åˆ¶ä½œ</h3>
<h4 data-id="heading-4">3.1.1ç¬¬ä¸€è¡Œç›’å­</h4>
<p>1.é‡å¤´éƒ¨å†…å®¹é«˜åº¦å’Œä¸Šä¸‹å¤–è¾¹æ¡†é«˜åº¦ï¼›<br/>
2.åœ¨index.htmlæ–‡ä»¶çš„bodyé‡ŒåŠ å…¥å¤´éƒ¨ç›’å­ä»£ç ï¼Œå¹¶å¼•å…¥ä¹‹å‰çš„å…¬å…±ç±».wï¼›</p>
<pre><code class="hljs language-css" lang="css">  &lt;<span class="hljs-selector-tag">div</span> class="<span class="hljs-selector-tag">header</span> w"&gt;

  &lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<p>3.åœ¨style.cssæ–‡ä»¶åŠ å…¥é«˜åº¦å’Œå¤–è¾¹è·å±æ€§ï¼›</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.header</span>{
    <span class="hljs-attribute">height</span>: <span class="hljs-number">42px</span>;
    <span class="hljs-attribute">background-color</span>: pink;
    <span class="hljs-comment">/* æ³¨æ„æ­¤åœ°æ–¹ä¼šå±‚å .w é‡Œé¢çš„marginï¼Œæ•…è¦å†™å·¦å³çš„auto */</span>
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">30px</span> auto;
}
</code></pre>
<h4 data-id="heading-5">3.1.2ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ï¼ˆlogoéƒ¨åˆ†ï¼‰</h4>
<p>index.htmlçš„logoéƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">         <span class="hljs-comment">&lt;!-- logoéƒ¨åˆ† --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"logo"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/logo.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/442b361b5af0408890024503f46c0d54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=ePH6ecBt9V6why8RU%2FJBS%2FQSLac%3D" alt="image.png" loading="lazy"/>
style.cssçš„logoæ ·å¼éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.logo</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">198px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">42px</span>;
    <span class="hljs-attribute">background-color</span>: purple;
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81a293ff61eb4968ba706e2b13454396~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=FbxYt1Z75sHbcNn92VLfr0lTt%2Bs%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">3.1.3ç¬¬ä¸€è¡Œç¬¬äºŒåˆ—ï¼ˆå¯¼èˆªæ éƒ¨åˆ†ï¼‰</h4>
<p>å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥ç”¨é“¾æ¥aè€Œæ˜¯ç”¨liåŒ…å«é“¾æ¥ï¼ˆli+a)çš„åšæ³•ã€‚<br/>
åŸå› ï¼š<br/>
1.li+aè¯­ä¹‰æ›´æ¸…æ™°ï¼Œä¸€çœ‹è¿™å°±æ˜¯æœ‰æ¡ç†çš„åˆ—è¡¨å‹å†…å®¹ã€‚<br/>
2.å¦‚æœç›´æ¥ç”¨aï¼Œæœç´¢å¼•æ“å®¹æ˜“è¾¨åˆ«ä¸ºæœ‰å †ç Œå…³é”®è¯å«Œç–‘ä»è€Œå½±å“ç½‘ç«™æ’å</p>
<h5 data-id="heading-7">å¯¼èˆªæ ä»£ç ï¼š</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>è¯¾ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>èŒä¸šè§„åˆ’<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<h5 data-id="heading-8">æ ·å¼ä»£ç ï¼š</h5>
<p>1.å»æ‰liçš„å°åœ†ç‚¹</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">li</span>{
   <span class="hljs-attribute">list-style</span>: none;
}
</code></pre>
<p>2.æ³¨æ„å½“å¯¼èˆªæ åŠ æµ®åŠ¨æ—¶ï¼Œlogoä¹Ÿè¦åŠ ä¸Šæµ®åŠ¨</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.nav</span>{
    <span class="hljs-attribute">float</span>: left;
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">60px</span>;
}
</code></pre>
<p>3.é“¾æ¥å»æ‰ä¸‹åˆ’çº¿</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">a</span> {
    <span class="hljs-attribute">text-decoration</span>: none;
}
</code></pre>
<p>4.è®©å¯¼èˆªæ é‡Œçš„å†…å®¹æ¨ªå‘æ’åˆ—ï¼Œå› ä¸ºliæ˜¯å—çŠ¶å…ƒç´ éœ€è¦ä¸€è¡Œæ˜¾ç¤ºï¼ŒåŠ æµ®åŠ¨</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.nav</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> {
    <span class="hljs-attribute">float</span>: left;
}
</code></pre>
<p>5.é“¾æ¥æ ·å¼ï¼šè½¬ä¸ºè¡Œå†…å—å…ƒç´ æ‰èƒ½è°ƒæ•´é«˜åº¦ï¼Œè®¾ç½®å†…è¾¹è·ã€è¡Œé«˜ã€å­—ç¬¦å¤§å°ã€é¢œè‰²</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.nav</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">a</span> {
    <span class="hljs-attribute">display</span>: block;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">42px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">42px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#050505</span>;

}
</code></pre>
<p>æ³¨æ„ï¼š</p>
<p>è¿™ä¸ªnavå¯¼èˆªæ å¯ä»¥ä¸åŠ å®½åº¦ï¼Œå°†æ¥å¯ä»¥åŠ å…¶ä½™æ–‡å­—ï¼›<br/>
å› ä¸ºå¯¼èˆªæ é‡Œé¢æ–‡å­—ä¸å¤Ÿå¤šï¼Œæ‰€ä»¥æœ€å¥½ç»™é“¾æ¥aå·¦å³å†…è¾¹è·paddingæ’‘å¼€ç›’å­ï¼Œè€Œä¸æ˜¯æŒ‡å®šå®½åº¦ã€‚<br/></p>
<p>6.é¼ æ ‡ç»è¿‡é“¾æ¥çš„æ ·å¼ä»£ç </p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.nav</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">a</span> {
    <span class="hljs-attribute">display</span>: block;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">42px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">42px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#050505</span>;

}
</code></pre>
<h5 data-id="heading-9">æ•ˆæœå›¾</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f51138e5bcea401a911be2def9eb09da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=YaHEGQLJ6rxjcjcWzA%2BGGMNOywk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">3.1.4ç¬¬ä¸€è¡Œç¬¬ä¸‰åˆ—ï¼ˆsearchæœç´¢æ¨¡å—ï¼‰</h3>
<h4 data-id="heading-11">1.ç»“æ„åˆ†æ</h4>
<p>ä¸€ä¸ªsearchå¤§ç›’å­é‡Œé¢åŒ…æ‹¬ä¸¤ä¸ªè¡¨å•=inputæ–‡æœ¬æ¡†+buttonæŒ‰é’®</p>
<pre><code class="hljs language-xml" lang="xml">   <span class="hljs-comment">&lt;!-- æœç´¢æ¨¡å— --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"search"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"è¾“å…¥å…³é”®è¯"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-12">2.æ ·å¼ä»£ç å®ç°</h4>
<h5 data-id="heading-13">æœç´¢æ¡†éƒ¨åˆ†</h5>
<p>style.css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* searchæœç´¢æ¨¡å— */</span>
<span class="hljs-selector-class">.search</span> {
    <span class="hljs-attribute">float</span>: left;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">412px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">42px</span>;
    <span class="hljs-attribute">background-color</span>: skyblue;
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">70px</span>;
}

<span class="hljs-selector-class">.search</span> <span class="hljs-selector-tag">input</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">345px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#00a4ff</span>;
    <span class="hljs-attribute">border-right</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#bfbfbf</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">15px</span>;
}
</code></pre>
<p>æ³¨æ„ï¼š
åŠ ä¸Šå·¦å†…è¾¹è·åï¼Œç›’å­ä¼šè¢«æ’‘å¤§ï¼Œåœ¨å®½åº¦å‡å»å·¦å†…è¾¹è·360-15=345</p>
<h5 data-id="heading-14">æŒ‰é’®éƒ¨åˆ†</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.search</span> <span class="hljs-selector-tag">button</span> {
    <span class="hljs-attribute">float</span>: left;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">42px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">images/btn.png</span>);
    <span class="hljs-comment">/* æŒ‰é’®buttoné»˜è®¤æœ‰ä¸ªè¾¹æ¡†éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»æ‰ */</span>
    <span class="hljs-attribute">border</span>: <span class="hljs-number">0</span>;
}
</code></pre>
<p>æ³¨æ„ï¼š
å»æ‰æŒ‰é’®é»˜è®¤è¾¹æ¡†ï¼›
ä½¿æŒ‰é’®åœ¨æœç´¢æ¡†å³è¾¹åˆ™åŠ ä¸Šæµ®åŠ¨ï¼Œæ­¤æ—¶æœç´¢æ¡†ä¹Ÿè¦åŠ ä¸Šæµ®åŠ¨ã€‚</p>
<h4 data-id="heading-15">æ•ˆæœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/414759b22eab47c38896a5c3d35b9801~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=TL1fejAKWX283BYbn59drXPZSas%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-16">3.1.5ç¬¬ä¸€è¡Œç¬¬å››åˆ—ï¼ˆç”¨æˆ·useræ¨¡å—åˆ¶ä½œï¼‰</h3>
<p>1.ç”¨ä¸€ä¸ªç›’å­è£…ç”¨æˆ·å¤´åƒå’Œç”¨æˆ·å</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç”¨æˆ·æ¨¡å— --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/user.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
            qq-lilei
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>2.æ ·å¼ï¼šå³æµ®åŠ¨ã€è¡Œé«˜ã€å³å¤–è¾¹è·ã€å­—ä½“å¤§å°ã€é¢œè‰²</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç”¨æˆ·æ¨¡å— */</span>
<span class="hljs-selector-class">.user</span> {
    <span class="hljs-attribute">float</span>: right;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">42px</span>;
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">font-style</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
}
</code></pre>
<p>##èƒŒæ™¯è‰²
1.è®¾ç½®æ•´ä¸ªé¡µé¢èƒŒæ™¯è‰²</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f3f5f7</span>;
}
</code></pre>
<p>2.å»æ‰å¤´éƒ¨è¾…åŠ©çš„èƒŒæ™¯è‰²</p>
<h5 data-id="heading-17">å¤´éƒ¨æ¨¡å—æ•ˆæœå›¾</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ddcbe7655fd48de90d525d02610a70b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=NszG22ul6WmKidbRGB2fVupXaPI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-18">3.2 banneråˆ¶ä½œ</h3>
<h4 data-id="heading-19">æ€è·¯</h4>
<p>å¤§ç›’å­banneré‡ŒåŒ…å«ç‰ˆå¿ƒ.wï¼Œç‰ˆå¿ƒé‡Œæœ‰å·¦å³ä¸¤ä¸ªå­ç›’å­ã€‚<br/>
å·¦è¾¹ç›’å­ç”¨ul&gt;li&gt;a span,å¤§äºç¬¦å·ç”¨&gt;<br/>
å³è¾¹ç›’å­ç”¨ä¸€ä¸ªæ ‡é¢˜h4+ul&gt;li*3+ä¸€ä¸ªaé“¾æ¥<br/>
å…¶ä¸­lié‡Œé¢æœ‰h4å’Œp<br/></p>
<h4 data-id="heading-20">ä»£ç å®ç°</h4>
<pre><code class="hljs language-xml" lang="xml">  <span class="hljs-comment">&lt;!-- banneréƒ¨åˆ†start --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"banner"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ç‰ˆå¿ƒ å·¦å­ç›’å­--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subnav"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å‰ç«¯å¼€å‘<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>åç«¯å¼€å‘<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ç§»åŠ¨å¼€å‘<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>äººå·¥æ™ºèƒ½<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å•†ä¸šé¢„æµ‹<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>äº‘è®¡ç®—&amp;å¤§æ•°æ®<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>è¿ç»´&amp;ä»æµ‹è¯•<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>UIè®¾è®¡<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>äº§å“<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            
            <span class="hljs-comment">&lt;!--æˆ‘çš„è¯¾ç¨‹è¡¨  å³å­ç›’å­ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"course"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æˆ‘çš„è¯¾ç¨‹è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bd"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>ç»§ç»­å­¦ä¹  ç¨‹åºè¯­è¨€è®¾è®¡<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ­£åœ¨å­¦ä¹ -ä½¿ç”¨å¯¹è±¡<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>ç»§ç»­å­¦ä¹  ç¨‹åºè¯­è¨€è®¾è®¡<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ­£åœ¨å­¦ä¹ -ä½¿ç”¨å¯¹è±¡<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>ç»§ç»­å­¦ä¹  ç¨‹åºè¯­è¨€è®¾è®¡<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ­£åœ¨å­¦ä¹ -ä½¿ç”¨å¯¹è±¡<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"more"</span>&gt;</span>å…¨éƒ¨è¯¾ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- banneréƒ¨åˆ†end --&gt;</span>
</code></pre>
<h4 data-id="heading-21">æ ·å¼ä»£ç </h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* banneråŒºåŸŸ */</span>
<span class="hljs-selector-class">.banner</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">421px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#1c036c</span>;
}

<span class="hljs-selector-class">.banner</span> <span class="hljs-selector-class">.w</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">421px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">images/banner2.png</span>) no-repeat top center;
}

<span class="hljs-selector-class">.subnav</span> {
    <span class="hljs-attribute">float</span>: left;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">190px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">421px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);
}

<span class="hljs-selector-class">.subnav</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">45px</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">45px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span> <span class="hljs-number">20px</span>;


}

<span class="hljs-selector-class">.subnav</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">a</span> {
    <span class="hljs-attribute">font-style</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;

}

<span class="hljs-selector-class">.subnav</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">span</span> {
    <span class="hljs-attribute">float</span>: right;
    <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.subnav</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#00a4ff</span>;
}

<span class="hljs-selector-class">.course</span> {
    <span class="hljs-attribute">float</span>: right;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">230px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-comment">/* æµ®åŠ¨çš„ç›’å­ä¸ä¼šæœ‰å¤–è¾¹è·åˆå¹¶çš„é—®é¢˜ */</span>
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">50px</span>;
}

<span class="hljs-selector-class">.course</span> <span class="hljs-selector-tag">h2</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">48px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#9bceea</span>;
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">48px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
}

<span class="hljs-selector-class">.bd</span>{
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.bd</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span>{
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span> <span class="hljs-number">0</span>;
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
}
<span class="hljs-selector-class">.bd</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">h4</span>{
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#4e4e4e</span>;
}

<span class="hljs-selector-class">.bd</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">p</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#a5a5a5</span>;
}
<span class="hljs-selector-class">.bd</span> <span class="hljs-selector-class">.more</span>{
    <span class="hljs-attribute">display</span>:block;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">38px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#00a4ff</span>;
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">38px</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#00a4ff</span>;
    <span class="hljs-attribute">font</span>: size <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">700</span>;
}
</code></pre>
<h4 data-id="heading-22">banneræ¨¡å—æ•ˆæœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/250bcd0313654f80a67b4e48c205586a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=k7r%2BolRnLcjw1rMncXsVFlqgyqU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-23">3.3ç²¾å“æ¨èå°æ¨¡å—</h3>
<h4 data-id="heading-24">æ€è·¯</h4>
<p>å¤§ç›’å­æ°´å¹³å±…ä¸­goodsç²¾å“ï¼Œæ³¨æ„æ­¤å¤„æœ‰ä¸ªç›’å­é˜´å½±ã€‚<br/>
å¤§ç›’å­é‡Œé¢æœ‰ä¸‰ä¸ªå°ç›’å­ï¼Œä¸€å·ç›’å­æ˜¯æ ‡é¢˜h3å·¦ä¾§æµ®åŠ¨ï¼ŒäºŒå·ç›’å­é‡Œé¢æ”¾é“¾æ¥å·¦ä¾§æµ®åŠ¨ï¼Œgoods-itemè·ç¦»å¯ä»¥æ§åˆ¶è¿æ¥çš„å·¦å³è¾¹è·ï¼ˆæ³¨æ„è¡Œå†…å…ƒç´ åªç»™å·¦å³å†…å¤–è¾¹è·ï¼‰ï¼Œä¸‰å·ç›’å­å³æµ®åŠ¨modä¿®æ”¹</p>
<h4 data-id="heading-25">ä»£ç å®ç°</h4>
<pre><code class="hljs language-xml" lang="xml">  <span class="hljs-comment">&lt;!--3. ç²¾å“æ¨èæ¨¡å—å¼€å§‹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"goods w"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç²¾å“æ¨è<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
         
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>jQuery<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>Spark<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>MySQL<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>JavaWeb<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>MyAQL<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>JavaWeb<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span><span class="hljs-attr">class</span>=<span class="hljs-string">"mod"</span>&gt;</span>ä¿®æ”¹å…´è¶£<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!--3. ç²¾å“æ¨èæ¨¡å—ç»“æŸ--&gt;</span>
</code></pre>
<h4 data-id="heading-26">æ ·å¼ä»£ç </h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç²¾å“æ¨èæ¨¡å— */</span>
<span class="hljs-selector-class">.goods</span>{
<span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;
<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
<span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">3px</span> <span class="hljs-number">3px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
<span class="hljs-comment">/* è¡Œé«˜ä¼šç»§æ‰¿ */</span>
<span class="hljs-attribute">line-height</span>: <span class="hljs-number">60px</span>;
}

<span class="hljs-selector-class">.goods</span> <span class="hljs-selector-tag">h3</span>{
    <span class="hljs-attribute">float</span>: left;
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#00a4ff</span>;
}

<span class="hljs-selector-class">.goods</span> <span class="hljs-selector-tag">ul</span>{
    <span class="hljs-attribute">float</span>: left;
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">30px</span>;
}

<span class="hljs-selector-class">.goods</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span>{
<span class="hljs-attribute">float</span>: left;
   
}

<span class="hljs-selector-class">.goods</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">a</span>{

        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">30px</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#050505</span>;
        <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
}

<span class="hljs-selector-class">.mod</span>{
    <span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:right</span>;
    <span class="hljs-attribute">margin-right</span>:<span class="hljs-number">30px</span> ;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#00a4ff</span>;
}
</code></pre>
<h4 data-id="heading-27">ç²¾å“æ¨èå°æ¨¡å—æ•ˆæœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a41531d743d4ea1ae3511e84904eaaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=CcnT14YwgPf2jEkmDO0jzO7ew2w%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-28">3.4ç²¾å“æ¨èå¤§æ¨¡å—</h3>
<h4 data-id="heading-29">æ€è·¯</h4>
<p>1å·ç›’å­ä¸ºæœ€å¤§ç›’å­ï¼Œboxç‰ˆå¿ƒæ°´å¹³å±…ä¸­ï¼›<br/>
2å·ç›’å­ä¸ºä¸Šé¢éƒ¨åˆ†ï¼Œbox-hd--é‡Œé¢å·¦ä¾§æ ‡é¢˜h3å·¦æµ®åŠ¨ï¼Œå³ä¾§é“¾æ¥aå³æµ®åŠ¨ï¼›<br/>
3å·ç›’å­ä¸ºåº•ä¸‹éƒ¨åˆ†ï¼Œbox-bd--é‡Œé¢æ˜¯æ— åºåˆ—è¡¨ï¼Œæœ‰10å°liç»„æˆï¼›<br/>
å°liå¤–è¾¹è·çš„é—®é¢˜ï¼Œè¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼šç»™box-hdå®½åº¦ä¸º1215å°±å¯ä»¥ä¸€è¡Œè£…å¼€5ä¸ªli<br/>
å¦å¤–ï¼ŒCtrl+g è¾“å…¥1ï¼Œåˆ°ç¬¬ä¸€è¡Œï¼Œç»™bodyåŠ ä¸€ä¸ªé«˜åº¦ï¼Œä¾¿äºæ»‘åŠ¨ï¼Œåé¢å†åˆ æ‰</p>
<h5 data-id="heading-30">å…·ä½“æ³¨æ„äº‹é¡¹ï¼š</h5>
<p>æŠŠliçš„çˆ¶äº²ulä¿®æ”¹çš„è¶³å¤Ÿå®½ï¼Œä¸€è¡Œèƒ½è£…å¼€5ä¸ªç›’å­å°±ä¸ä¼šæ¢è¡Œäº†
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d69f5a5999d4ebb93c945044a3b9631~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=apOoGbwFAU1UJYkn0%2FAX6U%2BTMG4%3D" alt="image.png" loading="lazy"/></p>
<p>è®¾ç½®å¥½ä¸€ä¸ªç›’å­ä»¥åï¼Œå†åˆ æ‰å…¶ä»–liï¼Œå¤åˆ¶ç²˜è´´ç¬¬ä¸€ä¸ªliï¼Œå†ä¿®æ”¹å†…å®¹å’Œå›¾ç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e37505f3c734e0aa14dada491ef47d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=fnn2QNhiRwG9O6%2B758yBMkIaNMA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-31">ä»£ç å®ç°</h4>
<h5 data-id="heading-32">ç»“æ„ä»£ç </h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- 4.boxæ ¸å¿ƒå†…å®¹å…¶ä½™å¼€å§‹ --&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box w"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box-hd"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç²¾å“æ¨è<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>æŸ¥çœ‹å…¨éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box-bd"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>  Â·  1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> Â· 1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> Â· 1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> Â· 1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> Â· 1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> Â· 1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> Â· 1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> Â· 1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> Â· 1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/pic.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é«˜çº§<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> Â· 1125äººåœ¨å­¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 4.boxæ ¸å¿ƒå†…å®¹å…¶ä½™ç»“æŸ--&gt;</span>
   
</code></pre>
<h5 data-id="heading-33">æ ·å¼ä»£ç </h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç²¾å“æ¨èå¤§æ¨¡å— */</span>
<span class="hljs-comment">/* box-hdéƒ¨åˆ† */</span>
<span class="hljs-selector-class">.box</span>{
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
}

<span class="hljs-selector-class">.box-hd</span>{
    <span class="hljs-attribute">height</span>: <span class="hljs-number">45px</span>;
}

<span class="hljs-selector-class">.box-hd</span> <span class="hljs-selector-tag">h3</span>{
<span class="hljs-attribute">float</span>: left;
<span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
<span class="hljs-attribute">color</span>:<span class="hljs-number">#494949</span>
}

<span class="hljs-selector-class">.box-hd</span> <span class="hljs-selector-tag">a</span>{
    <span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:right</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#a5a5a5</span>;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">30px</span>;
}

<span class="hljs-comment">/* box-bd */</span>
<span class="hljs-selector-class">.box-bd</span> <span class="hljs-selector-tag">a</span>{
    <span class="hljs-attribute">float</span>: right;
    <span class="hljs-attribute">font-size</span>:<span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#a5a5a5</span>;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">30px</span>;
}
<span class="hljs-comment">/* æŠŠliçš„çˆ¶äº²ulä¿®æ”¹çš„è¶³å¤Ÿå®½ï¼Œä¸€è¡Œèƒ½è£…å¼€5ä¸ªç›’å­å°±ä¸ä¼šæ¢è¡Œäº† */</span>
<span class="hljs-selector-class">.box-bd</span>{
    <span class="hljs-attribute">width</span>: <span class="hljs-number">1215px</span>;
}

<span class="hljs-selector-class">.box-bd</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span>{
    <span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:left</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">228px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">270px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">15px</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-selector-class">.box-bd</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">img</span>{
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.box-bd</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">h4</span>{
<span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">25px</span>;
<span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
<span class="hljs-attribute">color</span>: <span class="hljs-number">#050505</span>;
<span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
}

<span class="hljs-selector-class">.box-bd</span> <span class="hljs-selector-class">.info</span>{
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-number">0</span> <span class="hljs-number">25px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#999</span>
}

<span class="hljs-selector-class">.box-bd</span> <span class="hljs-selector-class">.info</span> <span class="hljs-selector-tag">span</span>{
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#ff7c2d</span>;
}
</code></pre>
<h4 data-id="heading-34">æ•ˆæœå›¾ï¼ˆæœªä¿®æ”¹æˆä¸åŒå†…å®¹ç‰ˆï¼‰</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc113ae1f80f4847a2b2316c3fe2c8cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=TJ0gppYPugsItuwniAHA6ba25tQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-35">3.5åº•éƒ¨æ¨¡å—</h3>
<h4 data-id="heading-36">æ€è·¯</h4>
<p>1å·ç›’å­æ˜¯é€šæ å¤§ç›’å­ï¼Œåº•éƒ¨footerç»™é«˜åº¦ï¼Œåº•è‰²æ˜¯ç™½è‰²<br/>
2å·ç›’å­ç‰ˆå¿ƒæ°´å¹³å±…ä¸­<br/>
3å·ç›’å­ç‰ˆæƒcopyrightå·¦å¯¹é½<br/>
4å·ç›’å­é“¾æ¥linkså³å¯¹é½</p>
<h4 data-id="heading-37">æ‰€é‡é—®é¢˜</h4>
<p>ä¸ºä¾¿äºè§‚å¯Ÿï¼Œå…ˆç”¨ç²‰è‰²èƒŒæ™¯ï¼Œç”±äºæµ®åŠ¨ä¸å ç©ºé—´ï¼Œç²‰è‰²å¤§ç›’å­ä¸åœ¨é¢„æƒ³ä½ç½®ï¼Œå¦‚ä¸‹å›¾ï¼Œæ­¤æ—¶éœ€åœ¨liçš„çˆ¶äº²ulå»æµ®åŠ¨
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e52bca5009bd44beba34876a39bfc998~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=a3M3%2FYcoybrG9PXZBUuLnZypzyY%3D" alt="image.png" loading="lazy"/>
å»æµ®åŠ¨ä»£ç ï¼ˆæ¸…é™¤æµ®åŠ¨ä¹‹åŒä¼ªå…ƒç´ æ¸…é™¤ï¼‰</p>
<p>æ ·å¼ä»£ç æ·»åŠ </p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:before</span>,
 <span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:after</span> {
     <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
     <span class="hljs-attribute">display</span>: table;
 }

 <span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:after</span> {
     <span class="hljs-attribute">clear</span>: both;
 }

 <span class="hljs-selector-class">.clearfix</span> {
     zoom: <span class="hljs-number">1</span>;
 } 
</code></pre>
<p>åœ¨ç»“æ„ä»£ç çš„ulåŠ ä¸Šclearfixçš„ç±»å</p>
<pre><code class="hljs language-ini" lang="ini">  &lt;ul <span class="hljs-attr">class</span>=<span class="hljs-string">"clearfix "</span>&gt;
</code></pre>
<p>å»æµ®åŠ¨ä»¥åï¼Œæ•ˆæœå›¾å¦‚ä¸‹
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed14ee8882004f84b3aa636f8d6dac1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=6gvEMZKmV4oXiq2mX7u5CH6jlis%3D" alt="image.png" loading="lazy"/></p>
<p>ç”¨å¤–ä¸Šè¾¹è·ä¼šå‡ºç°å¡Œé™·ï¼Œå¦‚å›¾æ‰€ç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f01149705cd647e9b61001976191beb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=0YClHas2Oli1wm4TCTLavgV2VGg%3D" alt="image.png" loading="lazy"/>
è¦ç”¨å†…è¾¹è·</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.footer</span> <span class="hljs-selector-class">.w</span>{
    <span class="hljs-comment">/* ä¸è¦ç”¨å¤–è¾¹è· */</span>
    <span class="hljs-comment">/* margin-top: 35px; */</span>
    <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">35px</span>;
}

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4912df0e1283428eb74d1197fab1f7f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=wRWkEQXPKFBmtmxVO%2BOyQZbUrqM%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-38">ä»£ç å®ç°</h4>
<h5 data-id="heading-39">ç»“æ„ä»£ç </h5>
<pre><code class="hljs language-xml" lang="xml"> <span class="hljs-comment">&lt;!-- 5.footeråº•éƒ¨æ¨¡å—å¼€å§‹ --&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"footer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"copyright"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"images/logo.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­¦æˆåœ¨çº¿è‡´åŠ›äºæ™®åŠä¸­å›½æœ€å¥½çš„æ•™è‚²å®ƒä¸ä¸­å›½ä¸€æµå¤§å­¦å’Œæœºæ„åˆä½œæä¾›åœ¨çº¿è¯¾ç¨‹ã€‚<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
               Â© 2017å¹´XTCG Inc.ä¿ç•™æ‰€æœ‰æƒåŠ›ã€‚-æ²ªICPå¤‡15025210å·<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

               <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app"</span>&gt;</span>ä¸‹è½½APP<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"links"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>å…³äºå­¦æˆç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ç®¡ç†å›¢é˜Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å·¥ä½œæœºä¼š<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å®¢æˆ·æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å¸®åŠ©<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
               
                <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>æ–°æ‰‹æŒ‡å—<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å¦‚ä½•æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å¦‚ä½•é€‰è¯¾<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å¦‚ä½•æ‹¿åˆ°æ¯•ä¸šè¯<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>å­¦åˆ†æ˜¯ä»€ä¹ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>è€ƒè¯•æœªé€šè¿‡æ€ä¹ˆåŠ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                
                <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>åˆä½œä¼™ä¼´<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>åˆä½œæœºæ„<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>åˆä½œå¯¼å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                  
                
                <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 5.footeråº•éƒ¨æ¨¡å—ç»“æŸ --&gt;</span>
</code></pre>
<h5 data-id="heading-40">æ ·å¼ä»£ç </h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* .footeræ¨¡å— */</span>
<span class="hljs-selector-class">.footer</span>{
<span class="hljs-attribute">height</span>: <span class="hljs-number">415px</span>;
<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
}

<span class="hljs-selector-class">.footer</span> <span class="hljs-selector-class">.w</span>{
    <span class="hljs-comment">/* ä¸è¦ç”¨å¤–è¾¹è· */</span>
    <span class="hljs-comment">/* margin-top: 35px; */</span>
    <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">35px</span>;
}

<span class="hljs-selector-class">.copyright</span>{
    <span class="hljs-attribute">float</span>: left;
}

<span class="hljs-selector-class">.copyright</span> <span class="hljs-selector-tag">p</span>{
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#666</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span> ;
}
<span class="hljs-selector-class">.copyright</span> <span class="hljs-selector-class">.app</span>{
    <span class="hljs-attribute">display</span>:block;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">118px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">33px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#00a4ff</span>;
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">33px</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#00a4ff</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
}

<span class="hljs-selector-class">.links</span>{
    <span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:right</span>;
}

<span class="hljs-selector-class">.links</span> <span class="hljs-selector-tag">dl</span>{
    <span class="hljs-attribute">float</span>: left;
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">100px</span>;
}

<span class="hljs-selector-class">.links</span> <span class="hljs-selector-tag">dl</span> <span class="hljs-selector-tag">dt</span>{
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#333</span>;
}

<span class="hljs-selector-class">.links</span> <span class="hljs-selector-tag">dl</span> <span class="hljs-selector-tag">dd</span> <span class="hljs-selector-tag">a</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
}
</code></pre>
<h4 data-id="heading-41">åº•éƒ¨æ•ˆæœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96f5f33276e844698475e7c43e26e653~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57OW57OWVEFORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771502848&amp;x-signature=L0T1SxtpU4bmbLHoaYK%2BqrkydEI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-42">4.æ€»ç»“</h2>
<p>ä¸ºæ–¹ä¾¿å¤§å®¶æŸ¥çœ‹ç›¸å…³ä»£ç ï¼Œæˆ‘å·²å°†æœ¬æ¬¡å­¦æˆåœ¨çº¿æ¡ˆä¾‹ç»ƒä¹ çš„ä»£ç ä¸Šä¼ è‡³ GitHub ä»“åº“ï¼Œé“¾æ¥ï¼š[<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTANG1110%2Ffrontend-learning-journey%2Ftree%2Fmain%2Fstudy" target="_blank" title="https://github.com/TANG1110/frontend-learning-journey/tree/main/study" ref="nofollow noopener noreferrer">github.com/TANG1110/frâ€¦</a>] ã€‚<br/>ä»æ‘¸ç´¢ä»£ç åˆ°çœ‹åˆ°æ¨¡å—æ•ˆæœï¼Œæ¯ä¸€æ­¥éƒ½å……æ»¡æŒ‘æˆ˜ä¸æƒŠå–œã€‚å°ä¼™ä¼´ä»¬ï¼Œå­¦ä¹ ä¹‹è·¯è™½æœ‰åå·ï¼Œä½†åšæŒå°±æœ‰æ”¶è· ï¼å¸Œæœ›å¤§å®¶å¤šå¤šå…³æ³¨æˆ‘ï¼Œå¹¶ç‚¹èµæ”¶è—è¿™ç¯‡æ–‡ç« ï¼Œç»™äºˆæˆ‘æ›´å¤šæ”¯æŒä¸é¼“åŠ±ï¼Œæˆ‘ä»¬ä¸€èµ·åœ¨æŠ€æœ¯æµ·æ´‹é‡Œå¹¶è‚©å‰è¡Œï¼Œå…±åŒæˆé•¿ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶æ­å»ºå¤š Agent æ™ºèƒ½ç¼–æ’å¹³å°ï¼šNestJS + LangGraph å…¨æ ˆå®æˆ˜]]></title>    <link>https://juejin.cn/post/7605780454579929139</link>    <guid>https://juejin.cn/post/7605780454579929139</guid>    <pubDate>2026-02-12T12:29:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605780454579929139" data-draft-id="7605552034570436654" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶æ­å»ºå¤š Agent æ™ºèƒ½ç¼–æ’å¹³å°ï¼šNestJS + LangGraph å…¨æ ˆå®æˆ˜"/> <meta itemprop="keywords" content="LangChain"/> <meta itemprop="datePublished" content="2026-02-12T12:29:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Amberä¸¶King"/> <meta itemprop="url" content="https://juejin.cn/user/2453765682107768"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶æ­å»ºå¤š Agent æ™ºèƒ½ç¼–æ’å¹³å°ï¼šNestJS + LangGraph å…¨æ ˆå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2453765682107768/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Amberä¸¶King
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T12:29:12.000Z" title="Thu Feb 12 2026 12:29:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»é›¶æ­å»ºå¤š Agent æ™ºèƒ½ç¼–æ’å¹³å°ï¼šNestJS + LangGraph å…¨æ ˆå®æˆ˜</h2>
<blockquote>
<p>æœ¬æ–‡åˆ†äº«ä¸€ä¸ªå¼€æºé¡¹ç›® <strong>Nest-Agent</strong>â€”â€”åŸºäº NestJS + LangGraph æ„å»ºçš„å¤š Agent ç¼–æ’å¹³å°ï¼Œæ”¯æŒ Supervisor è‡ªåŠ¨è·¯ç”±ã€DAG è‡ªå®šä¹‰å·¥ä½œæµã€RAG çŸ¥è¯†åº“æ£€ç´¢ï¼Œéµå¾ª AG-UI æ ‡å‡†åè®®å®ç° token çº§æµå¼è¾“å‡ºã€‚å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpeng-yin%2Fnest-agent" target="_blank" title="https://github.com/peng-yin/nest-agent" ref="nofollow noopener noreferrer">GitHub Star</a> æ”¯æŒ â­</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆåšè¿™ä¸ªé¡¹ç›®ï¼Ÿ</h3>
<p>å½“å‰ AI Agent æ¡†æ¶å±‚å‡ºä¸ç©·ï¼ŒPython ç”Ÿæ€çš„ LangChainã€CrewAI å·²ç»å¾ˆæˆç†Ÿã€‚ä½†åœ¨ Node.js / TypeScript ç”Ÿæ€ï¼Œ<strong>ä¼ä¸šçº§çš„ Agent ç¼–æ’åç«¯æ–¹æ¡ˆ</strong>ç›¸å¯¹åŒ®ä¹ã€‚ä½œä¸ºä¸€ä¸ª NestJS çˆ±å¥½è€…ï¼Œæˆ‘å¸Œæœ›ç”¨æœ€ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆæ‰“é€ ä¸€ä¸ªï¼š</p>
<ul>
<li><strong>ç”Ÿäº§çº§</strong>çš„å¤š Agent ååŒå¹³å°ï¼Œä¸æ˜¯ demo</li>
<li>æ”¯æŒ <strong>Supervisor è‡ªåŠ¨è·¯ç”±</strong> å’Œ <strong>DAG è‡ªå®šä¹‰å·¥ä½œæµ</strong> ä¸¤ç§ç¼–æ’æ¨¡å¼</li>
<li>éµå¾ª <strong>AG-UI æ ‡å‡†åè®®</strong>ï¼Œå‰åç«¯è§£è€¦ï¼Œå¯å¯¹æ¥ CopilotKit ç­‰ä¸»æµå‰ç«¯ SDK</li>
<li>å†…ç½® <strong>RAG çŸ¥è¯†åº“</strong>ã€<strong>å¤š LLM ä¾›åº”å•†</strong>ã€<strong>å¤šç§Ÿæˆ·éš”ç¦»</strong>ï¼Œå¼€ç®±å³ç”¨</li>
</ul>
<p>äºæ˜¯æœ‰äº† <strong>Nest-Agent</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-2">æŠ€æœ¯æ ˆä¸€è§ˆ</h3>













































<table><thead><tr><th>å±‚æ¬¡</th><th>æŠ€æœ¯</th></tr></thead><tbody><tr><td>åç«¯æ¡†æ¶</td><td>NestJS 11</td></tr><tr><td>Agent ç¼–æ’</td><td>LangChain + LangGraph</td></tr><tr><td>æ•°æ®åº“</td><td>MySQL 8.0 (TypeORM)</td></tr><tr><td>ç¼“å­˜</td><td>Redis 7 (ioredis)</td></tr><tr><td>å‘é‡åº“</td><td>Milvus 2.3</td></tr><tr><td>è®¤è¯</td><td>Passport JWT</td></tr><tr><td>å‰ç«¯</td><td>React 18 + shadcn/ui + Vite</td></tr><tr><td>åŒ…ç®¡ç†</td><td>pnpm workspace (monorepo)</td></tr><tr><td>éƒ¨ç½²</td><td>Docker Compose ä¸€é”®å¯åŠ¨</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">æ ¸å¿ƒåŠŸèƒ½å±•ç¤º</h3>
<h4 data-id="heading-4">1. AI å¯¹è¯ â€” æµå¼è¾“å‡º + å·¥å…·è°ƒç”¨å¯è§†åŒ–</h4>
<p>å¯¹è¯æ˜¯æ•´ä¸ªå¹³å°çš„æ ¸å¿ƒã€‚è¾“å…¥ä¸€ä¸ªé—®é¢˜ï¼ŒSupervisor è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦æœç´¢ã€æ£€ç´¢çŸ¥è¯†åº“è¿˜æ˜¯ç›´æ¥å›ç­”ï¼Œæ•´ä¸ªè¿‡ç¨‹å®æ—¶æµå¼å±•ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6ae6d04159847e48d01384bb3e8ccf5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW1iZXLkuLZLaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771504152&amp;x-signature=rHBQORNq9S9PxApaAaBHKTonAZM%3D" alt="å¯¹è¯é¦–é¡µ" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baa2d13e227542d99502766e45d2a1a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW1iZXLkuLZLaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771504152&amp;x-signature=GJMnGRgYkylMe5BAhWACC%2BZWDPI%3D" alt="æµå¼è¾“å‡º" loading="lazy"/></p>
<p><strong>äº®ç‚¹ï¼š</strong></p>
<ul>
<li>Token çº§åˆ«çš„æµå¼è¾“å‡ºï¼Œé€å­—æ˜¾ç¤º AI å›å¤</li>
<li>å®æ—¶å±•ç¤º Agent æ‰§è¡Œæ­¥éª¤ï¼ˆresearcher â†’ æœç´¢ â†’ ç”Ÿæˆå›ç­”ï¼‰</li>
<li>å·¥å…·è°ƒç”¨å…¨ç¨‹å¯è§†åŒ–â€”â€”å·¥å…·åã€å‚æ•°ã€è¿”å›ç»“æœä¸€ç›®äº†ç„¶</li>
<li>Markdown å¯Œæ–‡æœ¬æ¸²æŸ“ï¼ˆä»£ç å—ã€è¡¨æ ¼ã€åˆ—è¡¨ã€é“¾æ¥ç­‰ï¼‰</li>
<li>å¯¹è¯æ ‡é¢˜è‡ªåŠ¨ç”Ÿæˆï¼Œä¸å†æ˜¯åƒç¯‡ä¸€å¾‹çš„ "New Conversation"</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cf8cf45a0a142de8e5b9bb23a5a2dc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW1iZXLkuLZLaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771504152&amp;x-signature=MVJojRffmEpBtN5czPimuKTN53M%3D" alt="å¯¹è¯è¯¦æƒ…" loading="lazy"/></p>
<h4 data-id="heading-5">2. å·¥ä½œæµç¼–æ’ â€” å¯è§†åŒ– DAG å·¥ä½œæµ</h4>
<p>é™¤äº† Supervisor è‡ªåŠ¨æ¨¡å¼ï¼Œä½ è¿˜å¯ä»¥è‡ªå®šä¹‰ DAG å·¥ä½œæµï¼Œç²¾ç¡®æ§åˆ¶ Agent çš„æ‰§è¡Œæµç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/117f3ce733ae4238878ae13ad6622a5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW1iZXLkuLZLaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771504152&amp;x-signature=WCLigg4qXy3oEjD1aZCM2KY2W6Y%3D" alt="å·¥ä½œæµåˆ—è¡¨" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b63dd9714044be793d2b61a5a96ffe5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW1iZXLkuLZLaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771504152&amp;x-signature=bvUM1EPQl6xjr%2BcgE8MbdnqzDKY%3D" alt="åˆ›å»ºå·¥ä½œæµ" loading="lazy"/></p>
<p><strong>æ”¯æŒçš„èŠ‚ç‚¹ç±»å‹ï¼š</strong></p>
<ul>
<li><code>agent</code> â€” å¯è°ƒç”¨å·¥å…·çš„ AI Agentï¼Œæ”¯æŒè‡ªå®šä¹‰ system prompt</li>
<li><code>tool</code> â€” ç›´æ¥è°ƒç”¨å·¥å…·èŠ‚ç‚¹</li>
<li><code>condition</code> â€” æ¡ä»¶åˆ†æ”¯ï¼Œæ ¹æ®å…³é”®è¯è·¯ç”±åˆ°ä¸åŒåˆ†æ”¯</li>
<li><code>start</code> / <code>end</code> â€” èµ·æ­¢æ ‡è®°</li>
</ul>
<h4 data-id="heading-6">3. RAG çŸ¥è¯†åº“ â€” è¯­ä¹‰æ£€ç´¢</h4>
<p>ä¸Šä¼ æ–‡æ¡£åˆ°çŸ¥è¯†åº“ï¼ŒAgent å¯¹è¯æ—¶è‡ªåŠ¨æ£€ç´¢ç›¸å…³çŸ¥è¯†ç‰‡æ®µï¼Œå®ç°åŸºäºç§æœ‰æ•°æ®çš„é—®ç­”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c4ac04f6fd641d881256a5755c9ccf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW1iZXLkuLZLaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771504152&amp;x-signature=%2B1Np5K%2BV2oJyu6Wyyh%2B%2B6b%2BXxCU%3D" alt="çŸ¥è¯†åº“åˆ—è¡¨" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cb4345da79b42cba3609ea1ff28c186~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW1iZXLkuLZLaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771504152&amp;x-signature=RUnhNbEkNAqfuhvSbm3X3EtGBVw%3D" alt="è¯­ä¹‰æ£€ç´¢" loading="lazy"/></p>
<p><strong>RAG Pipelineï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">æ–‡æ¡£ â†’ åˆ†å—(<span class="hljs-number">1000</span>/<span class="hljs-number">200</span>) â†’ BAAI/bge-m3 Embedding â†’ Milvus å‘é‡å­˜å‚¨
æŸ¥è¯¢ â†’ Embedding â†’ Milvus ANN æ£€ç´¢ â†’ <span class="hljs-attribute">Top</span>-K ç»“æœ
</code></pre>
<h4 data-id="heading-7">4. è®¤è¯ç³»ç»Ÿ â€” å¤šç§Ÿæˆ·éš”ç¦»</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a7ca2b6c247449d88c0c48899a020fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW1iZXLkuLZLaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771504152&amp;x-signature=jDNK%2Bo1BFnDSpyD1a07xHrvKs7k%3D" alt="ç™»å½•" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97d20be969e64f7987d177f787f1aca2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW1iZXLkuLZLaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771504152&amp;x-signature=w9yVGtgmVWIFYOlsSp%2BeFWlCDNo%3D" alt="æ³¨å†Œ" loading="lazy"/></p>
<p>JWT è®¤è¯ + TenantGuardï¼Œæ‰€æœ‰æ•°æ®æŒ‰ <code>tenantId</code> éš”ç¦»ï¼Œå¤©ç„¶æ”¯æŒå¤šå›¢é˜Ÿä½¿ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-8">æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-9">æ•´ä½“åˆ†å±‚</h4>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     React + shadcn/ui                         â”‚
â”‚                (SSE å®¢æˆ·ç«¯ + AG-UI äº‹ä»¶è§£æ)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP POST + SSE æµ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     NestJS åº”ç”¨å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ Auth â”‚ â”‚ Chat â”‚ â”‚ Agent â”‚ â”‚ RAG  â”‚  Controller å±‚          â”‚
â”‚  â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜                       â”‚
â”‚     â”‚        â”‚         â”‚        â”‚                             â”‚
â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”                       â”‚
â”‚  â”‚ Auth â”‚ â”‚ Chat â”‚ â”‚Agent  â”‚ â”‚ RAG  â”‚  Service å±‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                        â”‚                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚ Supervisor â”‚ â”‚   DAG   â”‚ â”‚  Tool   â”‚  æ ¸å¿ƒç¼–æ’å±‚        â”‚
â”‚     â”‚  Factory   â”‚ â”‚ Engine  â”‚ â”‚Registry â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚     â”‚   LLM   â”‚ â”‚ Milvus â”‚ â”‚ Redis  â”‚  åŸºç¡€è®¾æ–½å±‚            â”‚
â”‚     â”‚ Service  â”‚ â”‚Service â”‚ â”‚Service â”‚                       â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             â”‚           â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”
    â”‚OpenAI/  â”‚  â”‚ Milvus   â”‚ â”‚Redis â”‚  å­˜å‚¨å±‚
    â”‚Anthropicâ”‚  â”‚ 2.3      â”‚ â”‚  7   â”‚
    â”‚/Qwen    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-10">ä¸¤ç§ç¼–æ’æ¨¡å¼å¯¹æ¯”</h4>
<h5 data-id="heading-11">Supervisor æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</h5>
<p>é€‚åˆé€šç”¨å¯¹è¯åœºæ™¯ã€‚LLM å……å½“"ä¸»ç®¡"ï¼Œæ ¹æ®ç”¨æˆ·æ„å›¾åŠ¨æ€è·¯ç”±åˆ°åˆé€‚çš„ Agentï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ç”¨æˆ·: <span class="hljs-string">"æœç´¢ä¸€ä¸‹ NestJS 11 æ–°åŠŸèƒ½"</span>
  â†’ Supervisor åˆ¤æ–­: éœ€è¦æœç´¢ï¼Œè·¯ç”±åˆ° researcher
  â†’ researcher è°ƒç”¨ web_search å·¥å…·
  â†’ researcher æ ¹æ®æœç´¢ç»“æœç”Ÿæˆå›ç­”
  â†’ Supervisor åˆ¤æ–­: ä»»åŠ¡å®Œæˆï¼Œè·¯ç”±åˆ° __end__
</code></pre>
<p>æ ¸å¿ƒå®ç°ï¼šSupervisor ä½¿ç”¨ LLM + <code>withStructuredOutput(zod schema)</code> åšç»“æ„åŒ–è¾“å‡ºï¼Œè¿”å› <code>{ next: "researcher" | "responder" | "__end__" }</code>ã€‚</p>
<h5 data-id="heading-12">DAG æ¨¡å¼ï¼ˆè‡ªå®šä¹‰å·¥ä½œæµï¼‰</h5>
<p>é€‚åˆå¤æ‚ä¸šåŠ¡æµç¨‹ã€‚ç”¨æˆ·é¢„å®šä¹‰æœ‰å‘æ— ç¯å›¾ï¼Œç²¾ç¡®æ§åˆ¶æ‰§è¡Œé“¾è·¯ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Start â†’ ç ”ç©¶å‘˜<span class="hljs-built_in">Agent</span>(è°ƒç”¨æœç´¢) â†’ æ¡ä»¶åˆ¤æ–­ â†’ å†™æ‰‹<span class="hljs-built_in">Agent</span>(ç”ŸæˆæŠ¥å‘Š) â†’ End
                                    â†˜ å·¥å…·èŠ‚ç‚¹(ç›´æ¥æ£€ç´¢) â†—
</code></pre>
<p>æ ¸å¿ƒå®ç°ï¼šå°† JSON æ ¼å¼çš„ <code>nodes[]</code> + <code>edges[]</code> ç¼–è¯‘ä¸º LangGraph çš„ <code>StateGraph</code>ï¼Œé€šè¿‡ <code>Command({ goto, update })</code> æ§åˆ¶çŠ¶æ€è½¬ç§»ã€‚</p>
<hr/>
<h3 data-id="heading-13">å…³é”®æŠ€æœ¯å®ç°ç»†èŠ‚</h3>
<h4 data-id="heading-14">1. AG-UI æµå¼äº‹ä»¶åè®®</h4>
<p>è¿™æ˜¯é¡¹ç›®ä¸­æœ€å¤æ‚ä¹Ÿæœ€æœ‰ä»·å€¼çš„éƒ¨åˆ†ã€‚ç³»ç»Ÿéµå¾ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.ag-ui.com" target="_blank" title="https://docs.ag-ui.com" ref="nofollow noopener noreferrer">AG-UI</a> æ ‡å‡†åè®®ï¼Œé€šè¿‡ SSE æ¨é€ç»†ç²’åº¦äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">event:</span> RUN_STARTED
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"type"</span>:<span class="hljs-string">"RUN_STARTED"</span>,<span class="hljs-string">"threadId"</span>:<span class="hljs-string">"xxx"</span>,<span class="hljs-string">"runId"</span>:<span class="hljs-string">"xxx"</span>}

<span class="hljs-symbol">event:</span> STEP_STARTED
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"type"</span>:<span class="hljs-string">"STEP_STARTED"</span>,<span class="hljs-string">"stepName"</span>:<span class="hljs-string">"researcher"</span>}

<span class="hljs-symbol">event:</span> TOOL_CALL_START
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"type"</span>:<span class="hljs-string">"TOOL_CALL_START"</span>,<span class="hljs-string">"toolCallId"</span>:<span class="hljs-string">"xxx"</span>,<span class="hljs-string">"toolCallName"</span>:<span class="hljs-string">"web_search"</span>}

<span class="hljs-symbol">event:</span> TEXT_MESSAGE_CONTENT
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"type"</span>:<span class="hljs-string">"TEXT_MESSAGE_CONTENT"</span>,<span class="hljs-string">"messageId"</span>:<span class="hljs-string">"xxx"</span>,<span class="hljs-string">"delta"</span>:<span class="hljs-string">"é€å­—è¾“å‡º..."</span>}

<span class="hljs-symbol">event:</span> RUN_FINISHED
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"type"</span>:<span class="hljs-string">"RUN_FINISHED"</span>,<span class="hljs-string">"threadId"</span>:<span class="hljs-string">"xxx"</span>,<span class="hljs-string">"runId"</span>:<span class="hljs-string">"xxx"</span>}
</code></pre>
<p><strong>ä¸‰æ®µå¼æ–‡æœ¬æ¶ˆæ¯</strong>ï¼š<code>TEXT_MESSAGE_START â†’ TEXT_MESSAGE_CONTENT(å¢é‡) â†’ TEXT_MESSAGE_END</code></p>
<p><strong>å››æ®µå¼å·¥å…·è°ƒç”¨</strong>ï¼š<code>TOOL_CALL_START â†’ TOOL_CALL_ARGS â†’ TOOL_CALL_END â†’ TOOL_CALL_RESULT</code></p>
<p>éµå¾ªæ ‡å‡†åè®®æ„å‘³ç€å¯ä»¥ç›´æ¥å¯¹æ¥ CopilotKit ç­‰å‰ç«¯ SDKï¼Œæ— éœ€è‡ªå®šä¹‰è§£æã€‚</p>
<h4 data-id="heading-15">2. LangGraph streamEvents â†’ AG-UI çš„ç²¾ç»†è½¬æ¢</h4>
<p><code>AgentService.processStreamEvents()</code> æ–¹æ³•å®ç°äº† LangGraph åº•å±‚äº‹ä»¶åˆ° AG-UI åè®®çš„æ˜ å°„ï¼Œéœ€è¦å¤„ç†å‡ ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼š</p>
<p><strong>é—®é¢˜ 1ï¼šSupervisor è·¯ç”±èŠ‚ç‚¹çš„è¾“å‡ºä¸åº”æš´éœ²ç»™ç”¨æˆ·</strong></p>
<p>Supervisor çš„ç»“æ„åŒ–è¾“å‡ºï¼ˆ<code>{ next: "researcher" }</code>ï¼‰æ˜¯å†…éƒ¨è·¯ç”±å†³ç­–ï¼Œä¸åº”è¯¥æ¨é€ç»™å‰ç«¯ã€‚é€šè¿‡èŠ‚ç‚¹åè¿‡æ»¤è§£å†³ã€‚</p>
<p><strong>é—®é¢˜ 2ï¼šåµŒå¥—å­ Agent çš„"æ€è€ƒ"æ–‡æœ¬</strong></p>
<p><code>createReactAgent</code> å†…éƒ¨çš„ LLM åœ¨è°ƒç”¨å·¥å…·å‰ä¼šè¾“å‡ºä¸€äº›"æ€è€ƒ"æ–‡æœ¬ï¼ˆé€šå¸¸æ˜¯å¤è¿° promptï¼‰ï¼Œè¿™äº›ä¸åº”æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡ <code>langgraph_checkpoint_ns</code> åŒºåˆ†åµŒå¥—å±‚çº§ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> isNestedAgent = parentNode &amp;&amp; langgraphNode !== parentNode;
<span class="hljs-keyword">if</span> (isNestedAgent &amp;&amp; !nodeToolsDone.<span class="hljs-title function_">get</span>(nodeKey)) {
  <span class="hljs-comment">// æš‚å­˜åˆ° pendingTextPerNodeï¼Œå·¥å…·å®Œæˆåæ‰é‡Šæ”¾</span>
}
</code></pre>
<p><strong>é—®é¢˜ 3ï¼šXML å·¥å…·è°ƒç”¨æ ¼å¼å…¼å®¹</strong></p>
<p>æŸäº›æ¨¡å‹ï¼ˆå¦‚ qwenï¼‰ä¼šä»¥ <code>&lt;tool_call&gt;</code> XML æ ‡ç­¾è¾“å‡ºå·¥å…·è°ƒç”¨ã€‚ä»£ç ä½¿ç”¨æ­£åˆ™æ£€æµ‹å¹¶è¿‡æ»¤ï¼Œé¿å… XML æ ‡ç­¾æ³„éœ²åˆ°å‰ç«¯ã€‚</p>
<h4 data-id="heading-16">3. æ™ºèƒ½è®°å¿†ç®¡ç†</h4>
<p>å¯¹è¯è®°å¿†é‡‡ç”¨ <strong>æ»‘åŠ¨çª—å£ + LLM è‡ªåŠ¨æ‘˜è¦</strong> çš„æ··åˆç­–ç•¥ï¼š</p>
<pre><code class="hljs">æ¶ˆæ¯æ•° â‰¤ 10        â†’ å…¨é‡è¿”å›ï¼Œæ— å‹ç¼©
10 &lt; æ¶ˆæ¯æ•° â‰¤ 20   â†’ æ»‘åŠ¨çª—å£ï¼Œå–æœ€è¿‘ 10 æ¡
æ¶ˆæ¯æ•° &gt; 20        â†’ LLM å¯¹æ—©æœŸæ¶ˆæ¯ç”Ÿæˆæ‘˜è¦ï¼Œæ‘˜è¦ + æœ€è¿‘ 10 æ¡
</code></pre>
<p>æ‘˜è¦å­˜å‚¨åœ¨ <code>Conversation.summary</code> å­—æ®µï¼Œæ”¯æŒå¢é‡æ‘˜è¦ï¼ˆæ–°å¯¹è¯å†…å®¹è¿½åŠ åˆ°ç°æœ‰æ‘˜è¦ä¸Šï¼‰ã€‚ä¼šè¯æ¶ˆæ¯ç¼“å­˜åœ¨ Redisï¼ŒTTL 3600 ç§’ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-17">4. å¤š LLM ä¾›åº”å•†æŠ½è±¡</h4>
<p>ç»Ÿä¸€çš„æ¨¡å‹å·¥å‚ï¼Œåˆ‡æ¢ä¾›åº”å•†åªéœ€ä¸€ä¸ªå‚æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·è¯·æ±‚æ—¶æŒ‡å®š</span>
{ <span class="hljs-attr">llmOptions</span>: { <span class="hljs-attr">provider</span>: <span class="hljs-string">"openai"</span>, <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> } }
{ <span class="hljs-attr">llmOptions</span>: { <span class="hljs-attr">provider</span>: <span class="hljs-string">"dashscope"</span>, <span class="hljs-attr">model</span>: <span class="hljs-string">"qwen-max"</span> } }
{ <span class="hljs-attr">llmOptions</span>: { <span class="hljs-attr">provider</span>: <span class="hljs-string">"anthropic"</span>, <span class="hljs-attr">model</span>: <span class="hljs-string">"claude-sonnet-4-20250514"</span> } }
</code></pre>
<p>DashScopeï¼ˆé€šä¹‰åƒé—®ï¼‰é€šè¿‡ OpenAI å…¼å®¹åè®®æ¥å…¥ï¼Œè‡ªå®šä¹‰ <code>baseURL</code> å³å¯ã€‚åŒæ ·çš„æ–¹å¼å¯ä»¥æ¥å…¥ SiliconFlowã€Deepseekã€vLLM ç­‰ä»»ä½•å…¼å®¹ OpenAI API çš„æœåŠ¡ã€‚</p>
<h4 data-id="heading-18">5. åŠ¨æ€å·¥å…· + å¤šç§Ÿæˆ·éš”ç¦»</h4>
<p>å·¥å…·ç³»ç»Ÿé‡‡ç”¨æ³¨å†Œè¡¨æ¨¡å¼ã€‚<code>web_search</code> æ˜¯å…¨å±€é™æ€å·¥å…·ï¼Œè€Œ <code>rag_retrieval</code> å› ä¸ºéœ€è¦ <code>tenantId</code> ä¸Šä¸‹æ–‡ï¼Œé‡‡ç”¨<strong>å·¥å‚å‡½æ•°åŠ¨æ€åˆ›å»º</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¯æ¬¡è¯·æ±‚åŠ¨æ€åˆ›å»ºï¼Œç¡®ä¿ tenantId éš”ç¦»</span>
<span class="hljs-keyword">const</span> ragTool = <span class="hljs-title function_">createRagRetrievalTool</span>(ragService, tenantId);
</code></pre>
<p>è¿™æ ·ä¸åŒç§Ÿæˆ·åªèƒ½æ£€ç´¢åˆ°è‡ªå·±çš„çŸ¥è¯†åº“æ•°æ®ã€‚</p>
<hr/>
<h3 data-id="heading-19">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">nest-agent/
â”œâ”€â”€ src/                       <span class="hljs-comment"># åç«¯ï¼ˆNestJSï¼‰</span>
â”‚   â”œâ”€â”€ auth/                  <span class="hljs-comment"># JWT è®¤è¯ + å¤šç§Ÿæˆ·å®ˆå«</span>
â”‚   â”œâ”€â”€ chat/                  <span class="hljs-comment"># å¯¹è¯ç®¡ç† + SSE æµå¼æ¥å£ + è®°å¿†ç­–ç•¥</span>
â”‚   â”œâ”€â”€ agent/                 <span class="hljs-comment"># æ ¸å¿ƒï¼šSupervisor è·¯ç”± + DAG å¼•æ“</span>
â”‚   â”‚   â”œâ”€â”€ agent.service.ts   <span class="hljs-comment"># ç¼–æ’å…¥å£ + AG-UI äº‹ä»¶è½¬æ¢</span>
â”‚   â”‚   â”œâ”€â”€ supervisor.factory.ts  <span class="hljs-comment"># Supervisor æœ‰å‘å›¾æ„å»º</span>
â”‚   â”‚   â””â”€â”€ dag-engine.ts      <span class="hljs-comment"># DAG ç¼–è¯‘æ‰§è¡Œå¼•æ“</span>
â”‚   â”œâ”€â”€ rag/                   <span class="hljs-comment"># RAG çŸ¥è¯†åº“ï¼ˆMilvus å‘é‡æ£€ç´¢ï¼‰</span>
â”‚   â”œâ”€â”€ llm/                   <span class="hljs-comment"># å¤š LLM ä¾›åº”å•†æŠ½è±¡</span>
â”‚   â”œâ”€â”€ tools/                 <span class="hljs-comment"># å·¥å…·æ³¨å†Œä¸­å¿ƒ</span>
â”‚   â”œâ”€â”€ redis/                 <span class="hljs-comment"># Redis ç¼“å­˜</span>
â”‚   â”œâ”€â”€ entities/              <span class="hljs-comment"># TypeORM å®ä½“</span>
â”‚   â””â”€â”€ common/                <span class="hljs-comment"># AG-UI åè®®å®šä¹‰ã€é…ç½®ã€å¼‚å¸¸è¿‡æ»¤å™¨</span>
â”œâ”€â”€ web/                       <span class="hljs-comment"># å‰ç«¯ï¼ˆReact + shadcn/ui + Viteï¼‰</span>
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ pages/             <span class="hljs-comment"># å¯¹è¯ã€å·¥ä½œæµã€çŸ¥è¯†åº“ã€ç™»å½•</span>
â”‚       â”œâ”€â”€ components/        <span class="hljs-comment"># å¸ƒå±€ + shadcn/ui ç»„ä»¶</span>
â”‚       â””â”€â”€ lib/               <span class="hljs-comment"># API å°è£…ã€è®¤è¯ä¸Šä¸‹æ–‡</span>
â”œâ”€â”€ Dockerfile                 <span class="hljs-comment"># å¤šé˜¶æ®µæ„å»º</span>
â”œâ”€â”€ docker-compose.yml         <span class="hljs-comment"># MySQL + Redis + Milvus ä¸€é”®å¯åŠ¨</span>
â””â”€â”€ pnpm-workspace.yaml        <span class="hljs-comment"># monorepo é…ç½®</span>
</code></pre>
<hr/>
<h3 data-id="heading-20">å¿«é€Ÿå¯åŠ¨</h3>
<h4 data-id="heading-21">Docker ä¸€é”®éƒ¨ç½²</h4>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/peng-yin/nest-agent.git
<span class="hljs-built_in">cd</span> nest-agent
<span class="hljs-built_in">cp</span> .env.example .<span class="hljs-built_in">env</span>
<span class="hljs-comment"># ç¼–è¾‘ .envï¼Œå¡«å…¥ OPENAI_API_KEY ç­‰é…ç½®</span>
docker-compose up -d
<span class="hljs-comment"># è®¿é—® http://localhost:3000</span>
</code></pre>
<h4 data-id="heading-22">æœ¬åœ°å¼€å‘</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¯åŠ¨åŸºç¡€è®¾æ–½</span>
docker-compose up -d mysql redis etcd minio milvus-standalone

<span class="hljs-comment"># 2. å®‰è£…ä¾èµ–</span>
pnpm install

<span class="hljs-comment"># 3. å¯åŠ¨åç«¯ï¼ˆçƒ­é‡è½½ï¼‰</span>
pnpm dev            <span class="hljs-comment"># http://localhost:3000</span>

<span class="hljs-comment"># 4. å¯åŠ¨å‰ç«¯ï¼ˆå¦å¼€ç»ˆç«¯ï¼‰</span>
pnpm dev:web        <span class="hljs-comment"># http://localhost:5173</span>
</code></pre>
<h4 data-id="heading-23">ç¯å¢ƒå˜é‡</h4>






























<table><thead><tr><th>å˜é‡</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>OPENAI_API_KEY</code></td><td>æ˜¯</td><td>OpenAI API Key</td></tr><tr><td><code>OPENAI_BASE_URL</code></td><td>å¦</td><td>è‡ªå®šä¹‰ API åœ°å€ï¼ˆå…¼å®¹ SiliconFlow/Deepseekï¼‰</td></tr><tr><td><code>TAVILY_API_KEY</code></td><td>å¦</td><td>ç½‘é¡µæœç´¢åŠŸèƒ½éœ€è¦</td></tr><tr><td><code>JWT_SECRET</code></td><td>ç”Ÿäº§å¿…å¡«</td><td>JWT ç­¾åå¯†é’¥</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-24">è¸©è¿‡çš„å‘</h3>
<p>åˆ†äº«å‡ ä¸ªå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„å…¸å‹é—®é¢˜ï¼š</p>
<h4 data-id="heading-25">1. createReactAgent å­å›¾çš„"æ€è€ƒ"æ–‡æœ¬æ³„éœ²</h4>
<p>ä½¿ç”¨ LangGraph çš„ <code>createReactAgent</code> æ—¶ï¼Œå†…éƒ¨ LLM åœ¨å†³å®šè°ƒç”¨å·¥å…·å‰ä¼šè¾“å‡ºä¸€æ®µ"æ€è€ƒ"æ–‡æœ¬ã€‚è¿™äº›æ–‡æœ¬é€šè¿‡ <code>streamEvents</code> è¢«æ•è·å¹¶å‘é€åˆ°å‰ç«¯ï¼Œç”¨æˆ·çœ‹åˆ°çš„æ˜¯ä¸€å † prompt æ¨¡æ¿æ–‡å­—è€Œéå®é™…å›ç­”ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šé€šè¿‡ <code>langgraph_checkpoint_ns</code> ä¸­çš„ <code>langgraphNode</code> å’Œ <code>parentNode</code> åŒºåˆ†é¡¶å±‚èŠ‚ç‚¹å’Œå­å›¾å†…éƒ¨è°ƒç”¨ã€‚å­å›¾å†…éƒ¨ LLM çš„ <code>langgraphNode</code> æ˜¯ <code>"agent"</code>ï¼Œè€Œ <code>parentNode</code> æ˜¯ <code>"researcher"</code>ï¼Œä¸¤è€…ä¸åŒï¼›æ™®é€šé¡¶å±‚èŠ‚ç‚¹ä¸¤è€…ç›¸åŒã€‚åˆ©ç”¨ <code>langgraphNode !== parentNode</code> è¯†åˆ«åµŒå¥—è°ƒç”¨ï¼Œå°†å·¥å…·è°ƒç”¨å‰çš„æ–‡æœ¬æš‚å­˜ä¸¢å¼ƒã€‚</p>
<h4 data-id="heading-26">2. StateGraph èŠ‚ç‚¹çš„ checkpointNs ç†è§£åå·®</h4>
<p>æœ€åˆä»¥ä¸ºåªæœ‰ <code>createReactAgent</code> æ„å»ºçš„å­å›¾æ‰æœ‰ <code>checkpointNs</code>ï¼Œä½†å®é™…ä¸Š StateGraph ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰ã€‚å¯¼è‡´ <code>responder</code>ï¼ˆç›´æ¥å›ç­”ï¼‰çš„æ­£å¸¸æ–‡æœ¬ä¹Ÿè¢«é”™è¯¯æš‚å­˜ã€‚debug æ—¥å¿—å¤§æ³•å¥½ã€‚</p>
<h4 data-id="heading-27">3. é˜¿é‡Œäº‘ DashScope çš„ XML å·¥å…·è°ƒç”¨</h4>
<p>é€šè¿‡ OpenAI å…¼å®¹ API è°ƒç”¨ qwen æ¨¡å‹æ—¶ï¼Œéƒ¨åˆ†åœºæ™¯ä¸‹å·¥å…·è°ƒç”¨ä¸èµ°æ ‡å‡†çš„ <code>tool_calls</code> å­—æ®µï¼Œè€Œæ˜¯åœ¨æ–‡æœ¬ä¸­è¾“å‡º <code>&lt;tool_call&gt;</code> XML æ ‡ç­¾ã€‚éœ€è¦æ­£åˆ™æ£€æµ‹å¹¶è¿‡æ»¤ï¼Œå¦åˆ™å‰ç«¯ä¼šæ˜¾ç¤ºä¸€å † XMLã€‚</p>
<hr/>
<h3 data-id="heading-28">åç»­è®¡åˆ’</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ”¯æŒæ›´å¤šå·¥å…·ï¼ˆä»£ç æ‰§è¡Œã€æ–‡ä»¶ä¸Šä¼ ã€å›¾ç‰‡ç”Ÿæˆç­‰ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å·¥ä½œæµå¯è§†åŒ–ç¼–è¾‘å™¨ï¼ˆæ‹–æ‹½å¼ DAG ç¼–è¾‘ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Agent æ‰§è¡Œè¿‡ç¨‹çš„å¯è§†åŒ– Trace</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ”¯æŒæ›´å¤šå‘é‡æ•°æ®åº“ï¼ˆPineconeã€Qdrantï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼ˆPDFã€Word ç­‰æ–‡æ¡£ç›´æ¥å…¥åº“ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-29">å†™åœ¨æœ€å</h3>
<p>è¿™ä¸ªé¡¹ç›®ä»æ¶æ„è®¾è®¡åˆ°ç¼–ç å®ç°ï¼Œå…¨éƒ¨ç”±ä¸€ä¸ªäººå®Œæˆã€‚æ¶µç›–äº† Agent ç¼–æ’ã€æµå¼é€šä¿¡ã€RAG æ£€ç´¢ã€å¤šç§Ÿæˆ·éš”ç¦»ç­‰å¤šä¸ªæŠ€æœ¯é¢†åŸŸï¼Œå¸Œæœ›èƒ½ä¸º Node.js/TypeScript ç”Ÿæ€çš„ AI Agent å¼€å‘æä¾›ä¸€ä¸ªå¯å‚è€ƒçš„å®è·µæ¡ˆä¾‹ã€‚</p>
<p>ä»£ç å®Œå…¨å¼€æºï¼Œå¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæˆ–è€…ä½ å¯¹ NestJS + AI Agent æ„Ÿå…´è¶£ï¼Œæ¬¢è¿ï¼š</p>
<ul>
<li>â­ <strong>Star</strong> è¿™ä¸ªé¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpeng-yin%2Fnest-agent" target="_blank" title="https://github.com/peng-yin/nest-agent" ref="nofollow noopener noreferrer">GitHub - nest-agent</a></li>
<li>ğŸ› æ Issue æˆ– PRï¼Œä¸€èµ·å®Œå–„</li>
<li>ğŸ’¬ ç•™è¨€äº¤æµï¼Œåˆ†äº«ä½ çš„æƒ³æ³•</li>
</ul>
<p>æ„Ÿè°¢é˜…è¯»ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­Œæµè§ˆå™¨å–è‰²å™¨æ’ä»¶æºç å­¦ä¹ åˆ†äº«]]></title>    <link>https://juejin.cn/post/7605537925149884468</link>    <guid>https://juejin.cn/post/7605537925149884468</guid>    <pubDate>2026-02-12T13:24:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605537925149884468" data-draft-id="7605542907118125108" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­Œæµè§ˆå™¨å–è‰²å™¨æ’ä»¶æºç å­¦ä¹ åˆ†äº«"/> <meta itemprop="keywords" content="å‰ç«¯,Google,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2026-02-12T13:24:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Json_"/> <meta itemprop="url" content="https://juejin.cn/user/1511154281613834"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­Œæµè§ˆå™¨å–è‰²å™¨æ’ä»¶æºç å­¦ä¹ åˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1511154281613834/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Json_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T13:24:20.000Z" title="Thu Feb 12 2026 13:24:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä½¿ç”¨è°·æ­Œæµè§ˆå™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨åˆ°æµè§ˆå™¨æ’ä»¶ï¼Œä½œä¸ºæŠ€æœ¯è‚¯å®šä¹Ÿè¦å­¦ä¹ ä¸€ä¸‹æµè§ˆå™¨æ’ä»¶çš„å¼€å‘å’¯ï¼Œè¿™ç¯‡æ–‡ç« ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ª æˆ‘æœ€è¿‘å¼€å‘çš„ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶-å–è‰²å™¨ï¼Œå› ä¸ºæ˜¯å­¦ä¹ é˜¶æ®µï¼Œæ‰€ä»¥åŠŸèƒ½åšçš„è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚</p>
<p>æ’ä»¶æ ·å­</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6735fc19e17a4cdf87ec9519cab9b023~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnNvbl8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771507460&amp;x-signature=hl%2BdfTnn4aH9I1x7pR8gTL0q4yE%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨æŠ€æœ¯ï¼šhtmlÂ csså’Œjs</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5adc84c4a52448992b618a46f42f0ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnNvbl8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771507460&amp;x-signature=wjTTS%2BRniCK7GWjqvL%2BAscamwUM%3D" alt="image.png" loading="lazy"/></p>
<p>æ’ä»¶éƒ¨åˆ†ä»£ç ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å–è‰²å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    }
    <span class="hljs-selector-tag">h3</span> {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">15px</span> <span class="hljs-number">0</span>;
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    }
    <span class="hljs-selector-id">#startBtn</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>);
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">border</span>: none;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">font-weight</span>: bold;
      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.2s</span>, box-shadow <span class="hljs-number">0.2s</span>;
    }
    <span class="hljs-selector-id">#startBtn</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">102</span>, <span class="hljs-number">126</span>, <span class="hljs-number">234</span>, <span class="hljs-number">0.4</span>);
    }
    <span class="hljs-selector-id">#startBtn</span><span class="hljs-selector-pseudo">:active</span> {
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>);
    }
    <span class="hljs-selector-class">.tip</span> {
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;
    }
    <span class="hljs-selector-class">.ad</span> {
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">11px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
    }
    <span class="hljs-selector-class">.ad</span> <span class="hljs-selector-tag">a</span> {
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#667eea</span>;
      <span class="hljs-attribute">text-decoration</span>: none;
    }
    <span class="hljs-selector-class">.ad</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">text-decoration</span>: underline;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ğŸ¨ å–è‰²å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"startBtn"</span>&gt;</span>å¼€å§‹å–è‰²<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tip"</span>&gt;</span>
    ç‚¹å‡»æŒ‰é’®åï¼Œåœ¨ç½‘é¡µä¸Šä»»æ„ä½ç½®<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    å·¦é”®ç‚¹å‡»å³å¯è·å–é¢œè‰²å€¼
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ad"</span>&gt;</span>
    ä¸‡ç‰©OOPå‡ºå“<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.wwwoop.com"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span>&gt;</span>www.wwwoop.com<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"popup.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–å¼€å§‹å–è‰²æŒ‰é’®</span>
<span class="hljs-keyword">const</span> startBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'startBtn'</span>);

<span class="hljs-comment">// ç‚¹å‡»å¼€å§‹å–è‰²æŒ‰é’®</span>
startBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-comment">// å‘å½“å‰æ´»åŠ¨æ ‡ç­¾é¡µå‘é€æ¶ˆæ¯ï¼Œå¼€å§‹å–è‰²æ¨¡å¼</span>
  <span class="hljs-keyword">const</span> [tab] = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">query</span>({ <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">currentWindow</span>: <span class="hljs-literal">true</span> });
  
  <span class="hljs-keyword">if</span> (tab &amp;&amp; tab.<span class="hljs-property">id</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å…ˆå°è¯•å‘é€æ¶ˆæ¯</span>
      <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">sendMessage</span>(tab.<span class="hljs-property">id</span>, { <span class="hljs-attr">action</span>: <span class="hljs-string">'startPickColor'</span> });
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">close</span>();
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// å¦‚æœæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œè¯´æ˜content scriptæœªåŠ è½½ï¼Œå…ˆæ³¨å…¥</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Content scriptæœªåŠ è½½ï¼Œæ­£åœ¨æ³¨å…¥...'</span>);
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">scripting</span>.<span class="hljs-title function_">executeScript</span>({
          <span class="hljs-attr">target</span>: { <span class="hljs-attr">tabId</span>: tab.<span class="hljs-property">id</span> },
          <span class="hljs-attr">files</span>: [<span class="hljs-string">'content.js'</span>]
        });
        <span class="hljs-comment">// æ³¨å…¥CSS</span>
        <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">scripting</span>.<span class="hljs-title function_">insertCSS</span>({
          <span class="hljs-attr">target</span>: { <span class="hljs-attr">tabId</span>: tab.<span class="hljs-property">id</span> },
          <span class="hljs-attr">files</span>: [<span class="hljs-string">'content.css'</span>]
        });
        <span class="hljs-comment">// é‡æ–°å‘é€æ¶ˆæ¯</span>
        <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">sendMessage</span>(tab.<span class="hljs-property">id</span>, { <span class="hljs-attr">action</span>: <span class="hljs-string">'startPickColor'</span> });
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">close</span>();
      } <span class="hljs-keyword">catch</span> (injectError) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ³¨å…¥è„šæœ¬å¤±è´¥:'</span>, injectError);
        <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æ— æ³•åœ¨æ­¤é¡µé¢ä½¿ç”¨å–è‰²å™¨ï¼Œè¯·åˆ·æ–°é¡µé¢åé‡è¯•'</span>);
      }
    }
  }
});
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[macOS PHP å¼€å‘ç¯å¢ƒå®Œæ•´é…ç½®æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7605535884940542003</link>    <guid>https://juejin.cn/post/7605535884940542003</guid>    <pubDate>2026-02-12T13:38:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605535884940542003" data-draft-id="7605711582430068787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="macOS PHP å¼€å‘ç¯å¢ƒå®Œæ•´é…ç½®æ•™ç¨‹"/> <meta itemprop="keywords" content="PHP"/> <meta itemprop="datePublished" content="2026-02-12T13:38:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç†æƒ³å°é’å¹´"/> <meta itemprop="url" content="https://juejin.cn/user/3153826762218552"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            macOS PHP å¼€å‘ç¯å¢ƒå®Œæ•´é…ç½®æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3153826762218552/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç†æƒ³å°é’å¹´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T13:38:28.000Z" title="Thu Feb 12 2026 13:38:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ•™ç¨‹è¯¦ç»†è®°å½•äº†åœ¨macOSä¸Šé…ç½®å®Œæ•´çš„PHP 7.4å¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬MySQLã€Redisã€Nginxç­‰ç»„ä»¶ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ç›®å½•</h2>
<ul>
<li><a href="#%E7%8E%AF%E5%A2%83%E6%A6%82%E8%A7%88" title="#%E7%8E%AF%E5%A2%83%E6%A6%82%E8%A7%88">ç¯å¢ƒæ¦‚è§ˆ</a></li>
<li><a href="#%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87" title="#%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87">å‰ç½®å‡†å¤‡</a></li>
<li><a href="#%E9%98%B6%E6%AE%B51%E5%AE%89%E8%A3%85homebrew%E5%92%8C%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6" title="#%E9%98%B6%E6%AE%B51%E5%AE%89%E8%A3%85homebrew%E5%92%8C%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6">é˜¶æ®µ1ï¼šå®‰è£…Homebrewå’ŒåŸºç¡€ç»„ä»¶</a></li>
<li><a href="#%E9%98%B6%E6%AE%B52%E5%AE%89%E8%A3%85php-74" title="#%E9%98%B6%E6%AE%B52%E5%AE%89%E8%A3%85php-74">é˜¶æ®µ2ï¼šå®‰è£…PHP 7.4</a></li>
<li><a href="#%E9%98%B6%E6%AE%B53%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEmysql" title="#%E9%98%B6%E6%AE%B53%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEmysql">é˜¶æ®µ3ï¼šå®‰è£…å’Œé…ç½®MySQL</a></li>
<li><a href="#%E9%98%B6%E6%AE%B54%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEnginx" title="#%E9%98%B6%E6%AE%B54%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEnginx">é˜¶æ®µ4ï¼šå®‰è£…å’Œé…ç½®Nginx</a></li>
<li><a href="#%E9%98%B6%E6%AE%B55%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEredis%E6%9C%8D%E5%8A%A1%E5%99%A8" title="#%E9%98%B6%E6%AE%B55%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEredis%E6%9C%8D%E5%8A%A1%E5%99%A8">é˜¶æ®µ5ï¼šå®‰è£…å’Œé…ç½®RedisæœåŠ¡å™¨</a></li>
<li><a href="#%E9%98%B6%E6%AE%B56php%E6%89%A9%E5%B1%95%E9%85%8D%E7%BD%AEredis%E7%9B%B8%E5%85%B3" title="#%E9%98%B6%E6%AE%B56php%E6%89%A9%E5%B1%95%E9%85%8D%E7%BD%AEredis%E7%9B%B8%E5%85%B3">é˜¶æ®µ6ï¼šPHPæ‰©å±•é…ç½®ï¼ˆRedisç›¸å…³ï¼‰</a></li>
<li><a href="#%E9%98%B6%E6%AE%B57%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE" title="#%E9%98%B6%E6%AE%B57%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE">é˜¶æ®µ7ï¼šåŸŸåé…ç½®</a></li>
<li><a href="#%E9%98%B6%E6%AE%B58%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E5%92%8C%E9%AA%8C%E8%AF%81" title="#%E9%98%B6%E6%AE%B58%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E5%92%8C%E9%AA%8C%E8%AF%81">é˜¶æ®µ8ï¼šæœåŠ¡ç®¡ç†å’ŒéªŒè¯</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5" title="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5">å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥</a></li>
<li><a href="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4" title="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">æ•…éšœæ’é™¤</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li>
</ul>
<hr/>
<h2 data-id="heading-1">ç¯å¢ƒæ¦‚è§ˆ</h2>
<h3 data-id="heading-2">æŠ€æœ¯æ ˆç‰ˆæœ¬</h3>






























<table><thead><tr><th>ç»„ä»¶</th><th>ç‰ˆæœ¬</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>PHP</strong></td><td>7.4.33</td><td>ä½¿ç”¨shivammathur/php tapå®‰è£…</td></tr><tr><td><strong>MySQL</strong></td><td>8.4.x</td><td>Homebrewå®˜æ–¹ç‰ˆæœ¬</td></tr><tr><td><strong>Redis</strong></td><td>8.4.x</td><td>ç¼“å­˜æœåŠ¡å™¨</td></tr><tr><td><strong>Nginx</strong></td><td>1.29.x</td><td>WebæœåŠ¡å™¨</td></tr></tbody></table>
<h3 data-id="heading-3">ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-perl" lang="perl">~<span class="hljs-regexp">/Sites/</span>                          <span class="hljs-comment"># é¡¹ç›®æ ¹ç›®å½•</span>
â”œâ”€â”€ localhost/                    <span class="hljs-comment"># ä¸»å¼€å‘ç¯å¢ƒ</span>
â”‚   â”œâ”€â”€ index.php
â”‚   â”œâ”€â”€ phpinfo.php
â”‚   â”œâ”€â”€ db_test.php
â”‚   â”œâ”€â”€ redis_test.php
â”‚   â””â”€â”€ final_verification.php
â”œâ”€â”€ projects/                    <span class="hljs-comment"># å¤šé¡¹ç›®ç›®å½•</span>
â”‚   â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ shop/
â”‚   â”œâ”€â”€ admin/
â”‚   â””â”€â”€ api/
â”œâ”€â”€ logs/                        <span class="hljs-comment"># æ—¥å¿—ç›®å½•</span>
â”‚   â”œâ”€â”€ php/
â”‚   â””â”€â”€ nginx/
â””â”€â”€ ssl/                         <span class="hljs-comment"># SSLè¯ä¹¦ç›®å½•</span>

/opt/homebrew/                   <span class="hljs-comment"># Homebrewå®‰è£…ç›®å½•</span>
â”œâ”€â”€ etc/                         <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ php/<span class="hljs-number">7.4</span>/
â”‚   â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ mysql@8.<span class="hljs-number">4</span>/
â””â”€â”€ var/                        <span class="hljs-comment"># æ•°æ®ç›®å½•</span>
    â”œâ”€â”€ mysql@8.<span class="hljs-number">4</span>/
    â””â”€â”€ <span class="hljs-keyword">log</span>/
</code></pre>
<hr/>
<h2 data-id="heading-4">å‰ç½®å‡†å¤‡</h2>
<h3 data-id="heading-5">æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥Homebrewæ˜¯å¦å·²å®‰è£…</span>
<span class="hljs-built_in">which</span> brew

<span class="hljs-comment"># æ£€æŸ¥Homebrewç‰ˆæœ¬</span>
brew --version

<span class="hljs-comment"># æ£€æŸ¥ç³»ç»Ÿæ¶æ„</span>
<span class="hljs-built_in">uname</span> -m  <span class="hljs-comment"># åº”è¯¥æ˜¯arm64ï¼ˆM1/M2/M3ï¼‰æˆ–x86_64ï¼ˆIntelï¼‰</span>
</code></pre>
<h3 data-id="heading-6">æ›´æ–°Homebrew</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›´æ–°Homebrew</span>
brew update

<span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰å¾…å‡çº§çš„åŒ…</span>
brew upgrade
</code></pre>
<hr/>
<h2 data-id="heading-7">é˜¶æ®µ1ï¼šå®‰è£…Homebrewå’ŒåŸºç¡€ç»„ä»¶</h2>
<h3 data-id="heading-8">1.1 å®‰è£…Homebrewï¼ˆå¦‚æœªå®‰è£…ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…Homebrewï¼ˆå®˜æ–¹å‘½ä»¤ï¼‰</span>
/bin/bash -c <span class="hljs-string">"<span class="hljs-subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>"</span>

<span class="hljs-comment"># æ·»åŠ Homebrewåˆ°PATHï¼ˆApple Silicon Macï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'eval "$(/opt/homebrew/bin/brew shellenv)"'</span> &gt;&gt; ~/.zprofile
<span class="hljs-built_in">eval</span> <span class="hljs-string">"<span class="hljs-subst">$(/opt/homebrew/bin/brew shellenv)</span>"</span>
</code></pre>
<h3 data-id="heading-9">1.2 å®‰è£…åŸºç¡€ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…å¸¸ç”¨å·¥å…·</span>
brew install curl
brew install wget
brew install git
</code></pre>
<hr/>
<h2 data-id="heading-10">é˜¶æ®µ2ï¼šå®‰è£…PHP 7.4</h2>
<h3 data-id="heading-11">2.1 æ·»åŠ PHPæ‰©å±•ä»“åº“</h3>
<p>macOSçš„Homebrewå®˜æ–¹ä»“åº“ä¸å†æä¾›PHP 7.4ï¼Œéœ€è¦ä½¿ç”¨shivammathur/php tapï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ PHPç‰ˆæœ¬ç®¡ç†ä»“åº“</span>
brew tap shivammathur/php

<span class="hljs-comment"># æ›´æ–°brew</span>
brew update
</code></pre>
<h3 data-id="heading-12">2.2 å®‰è£…PHP 7.4</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…PHP 7.4ï¼ˆåŒ…å«å¸¸ç”¨æ‰©å±•ï¼‰</span>
brew install shivammathur/php/php@7.4

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
/opt/homebrew/opt/php@7.4/bin/php --version
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">PHP <span class="hljs-number">7.4</span><span class="hljs-selector-class">.33</span> (cli) (built: Dec <span class="hljs-number">19</span> <span class="hljs-number">2025</span> <span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">57</span>) ( NTS )
Copyright (c) The PHP Group
Zend Engine v3<span class="hljs-selector-class">.4</span><span class="hljs-selector-class">.0</span>, Copyright (c) Zend Technologies
    with Zend OPcache v7<span class="hljs-selector-class">.4</span><span class="hljs-selector-class">.33</span>, Copyright (c), by Zend Technologies
</code></pre>
<h3 data-id="heading-13">2.3 é…ç½®ç¯å¢ƒå˜é‡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘shellé…ç½®æ–‡ä»¶</span>
vi ~/.zshrc

<span class="hljs-comment"># æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"/opt/homebrew/opt/php@7.4/bin:<span class="hljs-variable">$PATH</span>"</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"/opt/homebrew/opt/php@7.4/sbin:<span class="hljs-variable">$PATH</span>"</span>

<span class="hljs-comment"># ä½¿é…ç½®ç”Ÿæ•ˆ</span>
<span class="hljs-built_in">source</span> ~/.zshrc
</code></pre>
<h3 data-id="heading-14">2.4 éªŒè¯PHPå®‰è£…</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥PHPç‰ˆæœ¬</span>
php --version

<span class="hljs-comment"># æ£€æŸ¥å·²åŠ è½½çš„æ‰©å±•</span>
php -m

<span class="hljs-comment"># æŸ¥çœ‹PHPé…ç½®ä¿¡æ¯</span>
php -i
</code></pre>
<hr/>
<h2 data-id="heading-15">é˜¶æ®µ3ï¼šå®‰è£…å’Œé…ç½®MySQL</h2>
<h3 data-id="heading-16">3.1 å®‰è£…MySQL 8.4</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…MySQL 8.4</span>
brew install mysql@8.4

<span class="hljs-comment"># å¯åŠ¨MySQLæœåŠ¡</span>
brew services start mysql@8.4

<span class="hljs-comment"># éªŒè¯MySQLè¿è¡Œ</span>
brew services list | grep mysql
</code></pre>
<h3 data-id="heading-17">3.2 MySQLå®‰å…¨é…ç½®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œå®‰å…¨é…ç½®è„šæœ¬</span>
/opt/homebrew/opt/mysql@8.4/bin/mysql_secure_installation

<span class="hljs-comment"># æŒ‰ç…§æç¤ºå®Œæˆé…ç½®ï¼š</span>
<span class="hljs-comment"># 1. è®¾ç½®VALIDATE PASSWORD componentï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-comment"># 2. è®¾ç½®rootå¯†ç </span>
<span class="hljs-comment"># 3. ç§»é™¤åŒ¿åç”¨æˆ·</span>
<span class="hljs-comment"># 4. ç¦æ­¢rootè¿œç¨‹ç™»å½•</span>
<span class="hljs-comment"># 5. ç§»é™¤testæ•°æ®åº“</span>
<span class="hljs-comment"># 6. é‡æ–°åŠ è½½æƒé™è¡¨</span>
</code></pre>
<h3 data-id="heading-18">3.3 åˆ›å»ºå¼€å‘æ•°æ®åº“å’Œç”¨æˆ·</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿æ¥MySQL</span>
mysql -u root -p

<span class="hljs-comment"># åœ¨MySQLå‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š</span>
CREATE DATABASE IF NOT EXISTS dev_database CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

CREATE USER IF NOT EXISTS <span class="hljs-string">'dev_user'</span>@<span class="hljs-string">'localhost'</span> IDENTIFIED BY <span class="hljs-string">'ä½ çš„å¯†ç '</span>;

GRANT ALL PRIVILEGES ON dev_database.* TO <span class="hljs-string">'dev_user'</span>@<span class="hljs-string">'localhost'</span>;

FLUSH PRIVILEGES;

EXIT;
</code></pre>
<h3 data-id="heading-19">3.4 éªŒè¯MySQLè¿æ¥</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨rootç”¨æˆ·è¿æ¥</span>
mysql -u root -p -e <span class="hljs-string">"SELECT VERSION();"</span>

<span class="hljs-comment"># ä½¿ç”¨å¼€å‘ç”¨æˆ·è¿æ¥</span>
mysql -u dev_user -p -e <span class="hljs-string">"USE dev_database; SHOW TABLES;"</span>
</code></pre>
<h3 data-id="heading-20">3.5 MySQLé…ç½®ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘MySQLé…ç½®æ–‡ä»¶</span>
vi /opt/homebrew/etc/mysql/my.cnf

<span class="hljs-comment"># æ·»åŠ ä¼˜åŒ–é…ç½®ï¼š</span>
[mysqld]
<span class="hljs-comment"># å­—ç¬¦é›†é…ç½®</span>
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

<span class="hljs-comment"># InnoDBé…ç½®</span>
innodb_buffer_pool_size = 256M
innodb_log_file_size = 64M

<span class="hljs-comment"># è¿æ¥é…ç½®</span>
max_connections = 100
wait_timeout = 28800

<span class="hljs-comment"># æ—¥å¿—é…ç½®</span>
slow_query_log = 1
slow_query_log_file = /opt/homebrew/var/log/mysql/slow.log
long_query_time = 2
</code></pre>
<h2 data-id="heading-21">é˜¶æ®µ4ï¼šå®‰è£…å’Œé…ç½®Nginx</h2>
<h3 data-id="heading-22">4.1 å®‰è£…Nginx</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…Nginx</span>
brew install nginx

<span class="hljs-comment"># å¯åŠ¨NginxæœåŠ¡</span>
brew services start nginx

<span class="hljs-comment"># éªŒè¯Nginxè¿è¡Œ</span>
brew services list | grep nginx

<span class="hljs-comment"># æµ‹è¯•é…ç½®è¯­æ³•</span>
nginx -t
</code></pre>
<h3 data-id="heading-23">4.2 é…ç½®Nginxè™šæ‹Ÿä¸»æœº</h3>
<h4 data-id="heading-24">4.2.1 åˆ›å»ºä¸»å¼€å‘ç¯å¢ƒé…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºä¸»é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p ~/Sites/localhost
<span class="hljs-built_in">mkdir</span> -p ~/Sites/logs/{php,nginx}

<span class="hljs-comment"># è®¾ç½®æƒé™</span>
<span class="hljs-built_in">chmod</span> 755 ~/Sites
</code></pre>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé…ç½®æ–‡ä»¶</span>
vi /opt/homebrew/etc/nginx/servers/local.dev.conf
</code></pre>
<p><strong>å®Œæ•´é…ç½®å†…å®¹</strong>ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen 80;
    server_name local.test;
    
    # ç½‘ç«™æ ¹ç›®å½•
    root /Users/ä½ çš„ç”¨æˆ·å/Sites/localhost;
    index index.php index.html index.htm;
    
    # æ—¥å¿—é…ç½®
    access_log /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/nginx/local.test.access.log;
    error_log /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/nginx/local.test.error.log;
    
    # PHPå¤„ç†
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
        fastcgi_read_timeout 300;
    }
    
    # URLé‡å†™ï¼ˆæ”¯æŒLaravelç­‰æ¡†æ¶ï¼‰
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }
    
    # éšè—æ–‡ä»¶ä¿æŠ¤
    location ~ /\. {
        deny all;
    }
    
    # é™æ€æ–‡ä»¶ç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|woff|woff2)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
</code></pre>
<h4 data-id="heading-25">4.2.2 åˆ›å»ºå¤šé¡¹ç›®é…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå¤šé¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p ~/Sites/projects/{blog,shop,admin,api}

<span class="hljs-comment"># è®¾ç½®æƒé™</span>
<span class="hljs-built_in">chmod</span> 755 ~/Sites

<span class="hljs-comment"># åˆ›å»ºå¤šé¡¹ç›®é…ç½®</span>
vi /opt/homebrew/etc/nginx/servers/multi_test.conf
</code></pre>
<pre><code class="hljs language-nginx" lang="nginx"># åšå®¢é¡¹ç›®
server {
    listen 80;
    server_name blog.test;
    root /Users/ä½ çš„ç”¨æˆ·å/Sites/projects/blog;
    index index.php index.html;
    
    access_log /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/nginx/blog.test.access.log;
    error_log /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/nginx/blog.test.error.log;
    
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
}

# å•†åŸé¡¹ç›®
server {
    listen 80;
    server_name shop.test;
    root /Users/ä½ çš„ç”¨æˆ·å/Sites/projects/shop;
    index index.php index.html;
    
    access_log /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/nginx/shop.test.access.log;
    error_log /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/nginx/shop.test.error.log;
    
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
}

# ç®¡ç†åå°
server {
    listen 80;
    server_name admin.test;
    root /Users/ä½ çš„ç”¨æˆ·å/Sites/projects/admin;
    index index.php index.html;
    
    access_log /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/nginx/admin.test.access.log;
    error_log /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/nginx/admin.test.error.log;
    
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
}
</code></pre>
<h3 data-id="heading-26">4.3 é‡å¯Nginx</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•é…ç½®è¯­æ³•</span>
nginx -t

<span class="hljs-comment"># é‡å¯æœåŠ¡</span>
brew services restart nginx

<span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
brew services list
</code></pre>
<hr/>
<h2 data-id="heading-27">é˜¶æ®µ5ï¼šå®‰è£…å’Œé…ç½®RedisæœåŠ¡å™¨</h2>
<h3 data-id="heading-28">5.1 å®‰è£…RedisæœåŠ¡å™¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…Redis</span>
brew install redis

<span class="hljs-comment"># å¯åŠ¨RedisæœåŠ¡</span>
brew services start redis

<span class="hljs-comment"># éªŒè¯Redisè¿è¡Œ</span>
brew services list | grep redis

<span class="hljs-comment"># æµ‹è¯•Redisè¿æ¥</span>
redis-cli ping
</code></pre>
<h3 data-id="heading-29">5.2 RedisåŸºæœ¬é…ç½®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘Redisé…ç½®æ–‡ä»¶</span>
vi /opt/homebrew/etc/redis.conf

<span class="hljs-comment"># å¸¸ç”¨é…ç½®ï¼š</span>
<span class="hljs-built_in">bind</span> 127.0.0.1
port 6379
daemonize no

<span class="hljs-comment"># å†…å­˜é™åˆ¶</span>
maxmemory 256mb
maxmemory-policy allkeys-lru

<span class="hljs-comment"># æ—¥å¿—é…ç½®</span>
loglevel notice
logfile /opt/homebrew/var/log/redis.log

<span class="hljs-comment"># RDBæŒä¹…åŒ–é…ç½®</span>
save 900 1
save 300 10
save 60 10000
</code></pre>
<hr/>
<h2 data-id="heading-30">é˜¶æ®µ6ï¼šPHPæ‰©å±•é…ç½®ï¼ˆRedisç›¸å…³ï¼‰</h2>
<p>æœ¬é˜¶æ®µå°†å®‰è£…å’Œé…ç½®ä¸Redisç›¸å…³çš„PHPæ‰©å±•ï¼ŒåŒ…æ‹¬igbinaryåºåˆ—åŒ–åŠ é€Ÿå’ŒLZFå‹ç¼©æ‰©å±•ã€‚</p>
<h3 data-id="heading-31">6.1 å®‰è£…å‰çš„ç³»ç»Ÿä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿Homebrewå·²æ›´æ–°</span>
brew update

<span class="hljs-comment"># å®‰è£…ç¼–è¯‘å·¥å…·ï¼ˆå¦‚æœªå®‰è£…ï¼‰</span>
brew install autoconf automake libtool
</code></pre>
<h3 data-id="heading-32">6.2 å®‰è£…igbinaryæ‰©å±•</h3>
<p><strong>igbinary</strong>æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶åºåˆ—åŒ–æ‰©å±•ï¼Œæ¯”PHPæ ‡å‡†åºåˆ—åŒ–å¿«30-50%ï¼Œç”¨äºæå‡Redisæ•°æ®åºåˆ—åŒ–çš„æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…igbinaryæ‰©å±•</span>
/opt/homebrew/opt/php@7.4/bin/pecl install igbinary
</code></pre>
<p><strong>å®‰è£…è¯´æ˜</strong>ï¼š</p>
<ul>
<li>PECLä¼šä»pecl.php.netä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆæœ¬</li>
<li>ç¼–è¯‘è¿‡ç¨‹ä¼šè‡ªåŠ¨å®Œæˆï¼Œæ— éœ€é¢å¤–é…ç½®</li>
<li>å®‰è£…å®Œæˆåæ‰©å±•ä¼šè‡ªåŠ¨æ·»åŠ åˆ°php.ini</li>
</ul>
<h3 data-id="heading-33">6.3 å®‰è£…LZFå‹ç¼©æ‰©å±•</h3>
<p><strong>LZF</strong>æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å‹ç¼©ç®—æ³•ï¼Œç”¨äºRedisæ•°æ®å‹ç¼©ï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘å†…å­˜å ç”¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…LZFæ‰©å±•</span>
/opt/homebrew/opt/php@7.4/bin/pecl install lzf
</code></pre>
<p><strong>å®‰è£…è¯´æ˜</strong>ï¼š</p>
<ul>
<li>LZFå‹ç¼©è§£å‹é€Ÿåº¦æå¿«</li>
<li>é€‚åˆå®æ—¶æ•°æ®å‹ç¼©åœºæ™¯</li>
<li>ä¸igbinaryé…åˆä½¿ç”¨æ•ˆæœæœ€ä½³</li>
</ul>
<h3 data-id="heading-34">6.4 å®‰è£…Redisæ‰©å±•ï¼ˆæ•´åˆç‰ˆï¼‰</h3>
<p><strong>Redisæ‰©å±•</strong>æ˜¯PHPè¿æ¥RedisæœåŠ¡å™¨çš„å®¢æˆ·ç«¯åº“ï¼Œæ”¯æŒæ‰€æœ‰Rediså‘½ä»¤ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…Redisæ‰©å±•</span>
/opt/homebrew/opt/php@7.4/bin/pecl install redis
</code></pre>
<p><strong>å®‰è£…è¿‡ç¨‹ä¸­çš„é…ç½®é€‰æ‹©</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">enable</span> <span class="hljs-string">igbinary</span> <span class="hljs-string">serializer</span> <span class="hljs-string">support?</span> [<span class="hljs-literal">yes</span>] <span class="hljs-string">:</span> <span class="hljs-literal">yes</span>
<span class="hljs-string">enable</span> <span class="hljs-string">lzf</span> <span class="hljs-string">compression</span> <span class="hljs-string">support?</span> [<span class="hljs-literal">yes</span>] <span class="hljs-string">:</span> <span class="hljs-literal">yes</span>
<span class="hljs-string">enable</span> <span class="hljs-string">zstd</span> <span class="hljs-string">compression</span> <span class="hljs-string">support?</span> [<span class="hljs-literal">no</span>] <span class="hljs-string">:</span> <span class="hljs-literal">no</span>
<span class="hljs-string">enable</span> <span class="hljs-string">msgpack</span> <span class="hljs-string">serializer</span> <span class="hljs-string">support?</span> [<span class="hljs-literal">no</span>] <span class="hljs-string">:</span> <span class="hljs-literal">no</span>
<span class="hljs-string">enable</span> <span class="hljs-string">lz4</span> <span class="hljs-string">compression</span> <span class="hljs-string">support?</span> [<span class="hljs-literal">no</span>] <span class="hljs-string">:</span> <span class="hljs-literal">no</span>
</code></pre>
<p><strong>é…ç½®é€‰é¡¹è¯´æ˜</strong>ï¼š</p>



































<table><thead><tr><th>é€‰é¡¹</th><th>æ¨è</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>igbinary</strong></td><td>yes</td><td>äºŒè¿›åˆ¶åºåˆ—åŒ–ï¼Œæ¯”æ ‡å‡†åºåˆ—åŒ–å¿«30-50%</td></tr><tr><td><strong>LZF</strong></td><td>yes</td><td>è½»é‡çº§å‹ç¼©ï¼ŒCPUå¼€é”€å°ï¼Œé€‚åˆç¼“å­˜æ•°æ®</td></tr><tr><td><strong>Zstd</strong></td><td>no</td><td>é«˜å‹ç¼©ç‡ç®—æ³•ï¼Œä½†å¢åŠ å¤æ‚åº¦ï¼Œå¼€å‘ç¯å¢ƒä¸éœ€è¦</td></tr><tr><td><strong>MessagePack</strong></td><td>no</td><td>è·¨è¯­è¨€åºåˆ—åŒ–ï¼Œçº¯PHPé¡¹ç›®ä¸éœ€è¦</td></tr><tr><td><strong>LZ4</strong></td><td>no</td><td>æé€Ÿå‹ç¼©ï¼Œå·²æœ‰LZFè¶³å¤Ÿ</td></tr></tbody></table>
<h3 data-id="heading-35">6.5 éªŒè¯æ‰©å±•å®‰è£…</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥æ‰©å±•æ˜¯å¦æ­£ç¡®åŠ è½½</span>
php -m | grep -E <span class="hljs-string">"(redis|igbinary|lzf)"</span>

<span class="hljs-comment"># åº”è¯¥æ˜¾ç¤ºï¼š</span>
<span class="hljs-comment"># igbinary</span>
<span class="hljs-comment"># lzf</span>
<span class="hljs-comment"># redis</span>
</code></pre>
<h3 data-id="heading-36">6.6 PHP.iniåŸºç¡€é…ç½®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘PHPé…ç½®æ–‡ä»¶</span>
vi /opt/homebrew/etc/php/7.4/php.ini

<span class="hljs-comment"># å…³é”®é…ç½®ï¼š</span>
display_errors = On
error_reporting = E_ALL
log_errors = On
error_log = /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/php/php_errors.log

memory_limit = 256M
max_execution_time = 300
upload_max_filesize = 64M
post_max_size = 64M
</code></pre>
<p><strong>æ‰©å±•é…ç½®ï¼ˆé€šå¸¸è‡ªåŠ¨æ·»åŠ ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">extension</span>=igbinary.so
<span class="hljs-attr">extension</span>=lzf.so
<span class="hljs-attr">extension</span>=redis.so
</code></pre>
<h3 data-id="heading-37">6.7 PHP-FPMé…ç½®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘PHP-FPMé…ç½®</span>
vi /opt/homebrew/etc/php/7.4/php-fpm.d/www.conf

<span class="hljs-comment"># é…ç½®å†…å®¹ï¼š</span>
[www]
user = ä½ çš„ç”¨æˆ·å
group = staff

listen = 127.0.0.1:9000

pm = dynamic
pm.max_children = 50
pm.start_servers = 5
pm.min_spare_servers = 2
pm.max_spare_servers = 8

php_admin_value[error_log] = /Users/ä½ çš„ç”¨æˆ·å/Sites/logs/php/php-fpm.error.log
php_admin_flag[log_errors] = on
</code></pre>
<h3 data-id="heading-38">6.8 é‡å¯PHP-FPMæœåŠ¡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡å¯PHP-FPMæœåŠ¡</span>
brew services restart shivammathur/php/php@7.4
</code></pre>
<hr/>
<h2 data-id="heading-39">é˜¶æ®µ7ï¼šåŸŸåé…ç½®</h2>
<h3 data-id="heading-40">7.1 ä¸ºä»€ä¹ˆä½¿ç”¨.teståŸŸå</h3>
<p><strong>é‡è¦æé†’</strong>ï¼šä¸è¦ä½¿ç”¨.devåŸŸåï¼</p>
<p>Chromeæµè§ˆå™¨ä»2021å¹´å¼€å§‹å¯¹æ‰€æœ‰.devåŸŸåå®æ–½HSTSï¼ˆHTTPä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼‰ç­–ç•¥ï¼š</p>
<ul>
<li>âŒ .devåŸŸåä¼šå¼ºåˆ¶é‡å®šå‘åˆ°HTTPS</li>
<li>âŒ æœ¬åœ°å¼€å‘ç¯å¢ƒæ— æ³•æä¾›HTTPSè¯ä¹¦</li>
<li>âŒ å³ä½¿ä¿®æ”¹hostsæ–‡ä»¶ä¹Ÿæ— æ³•è®¿é—®</li>
</ul>
<p><strong>æ¨èä½¿ç”¨.teståŸŸå</strong>ï¼š</p>
<ul>
<li>âœ… ä¸“ä¸ºæœ¬åœ°å¼€å‘è®¾è®¡</li>
<li>âœ… æ— HSTSé™åˆ¶</li>
<li>âœ… æ‰€æœ‰æµè§ˆå™¨å…¼å®¹</li>
<li>âœ… RFCè§„èŒƒæ¨è</li>
</ul>
<h3 data-id="heading-41">7.2 é…ç½®hostsæ–‡ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘hostsæ–‡ä»¶</span>
sudo vi /etc/hosts

<span class="hljs-comment"># æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</span>
127.0.0.1       local.test
127.0.0.1       blog.test
127.0.0.1       shop.test
127.0.0.1       admin.test
127.0.0.1       api.test
</code></pre>
<h3 data-id="heading-42">7.3 éªŒè¯åŸŸåè§£æ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•åŸŸåè§£æ</span>
ping local.test
<span class="hljs-comment"># åº”è¯¥è¿”å›ï¼šPING local.test (127.0.0.1)</span>

<span class="hljs-comment"># æµ‹è¯•HTTPè®¿é—®</span>
curl -I http://local.test
<span class="hljs-comment"># åº”è¯¥è¿”å›ï¼šHTTP/1.1 200 OK</span>
</code></pre>
<hr/>
<h2 data-id="heading-43">é˜¶æ®µ8ï¼šæœåŠ¡ç®¡ç†å’ŒéªŒè¯</h2>
<h3 data-id="heading-44">8.1 æœåŠ¡ç®¡ç†å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
brew services list

<span class="hljs-comment"># æ£€æŸ¥ç«¯å£å ç”¨</span>
lsof -i :80,9000,3306,6379
</code></pre>
<h3 data-id="heading-45">8.2 åˆ›å»ºæµ‹è¯•é¡µé¢</h3>
<h4 data-id="heading-46">8.2.1 PHPä¿¡æ¯é¡µé¢</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// ~/Sites/localhost/phpinfo.php</span>
<span class="hljs-title function_ invoke__">phpinfo</span>();
</code></pre>
<h4 data-id="heading-47">8.2.2 æ•°æ®åº“è¿æ¥æµ‹è¯•</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// ~/Sites/localhost/db_test.php</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;h1&gt;æ•°æ®åº“è¿æ¥æµ‹è¯•&lt;/h1&gt;"</span>;

<span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$pdo</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(
        <span class="hljs-string">"mysql:host=localhost;dbname=dev_database"</span>,
        <span class="hljs-string">"dev_user"</span>,
        <span class="hljs-string">"ä½ çš„å¯†ç "</span>
    );
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"âœ… MySQLè¿æ¥æˆåŠŸ&lt;br&gt;"</span>;
    
    <span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$pdo</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">"SELECT VERSION() as version"</span>);
    <span class="hljs-variable">$row</span> = <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">fetch</span>(PDO::<span class="hljs-variable constant_">FETCH_ASSOC</span>);
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"MySQLç‰ˆæœ¬: "</span> . <span class="hljs-variable">$row</span>[<span class="hljs-string">'version'</span>] . <span class="hljs-string">"&lt;br&gt;"</span>;
} <span class="hljs-keyword">catch</span>(PDOException <span class="hljs-variable">$e</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"âŒ MySQLè¿æ¥å¤±è´¥: "</span> . <span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>() . <span class="hljs-string">"&lt;br&gt;"</span>;
}
</code></pre>
<h4 data-id="heading-48">8.2.3 Redisè¿æ¥æµ‹è¯•</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// ~/Sites/localhost/redis_test.php</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;h1&gt;Redisè¿æ¥æµ‹è¯•&lt;/h1&gt;"</span>;

<span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$redis</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Redis</span>();
    <span class="hljs-variable">$redis</span>-&gt;<span class="hljs-title function_ invoke__">connect</span>(<span class="hljs-string">'127.0.0.1'</span>, <span class="hljs-number">6379</span>);
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"âœ… Redisè¿æ¥æˆåŠŸ&lt;br&gt;"</span>;
    
    <span class="hljs-variable">$redis</span>-&gt;<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">'test_key'</span>, <span class="hljs-string">'Hello Redis!'</span>);
    <span class="hljs-variable">$value</span> = <span class="hljs-variable">$redis</span>-&gt;<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">'test_key'</span>);
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"Redisè¯»å†™æµ‹è¯•: <span class="hljs-subst">$value</span>&lt;br&gt;"</span>;
    
    <span class="hljs-comment">// æµ‹è¯•igbinaryåºåˆ—åŒ–</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">extension_loaded</span>(<span class="hljs-string">'igbinary'</span>)) {
        <span class="hljs-variable">$data</span> = [<span class="hljs-string">'test'</span> =&gt; <span class="hljs-string">'data'</span>];
        <span class="hljs-variable">$serialized</span> = <span class="hljs-title function_ invoke__">igbinary_serialize</span>(<span class="hljs-variable">$data</span>);
        <span class="hljs-variable">$redis</span>-&gt;<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">'igbinary_test'</span>, <span class="hljs-variable">$serialized</span>);
        <span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">igbinary_unserialize</span>(<span class="hljs-variable">$redis</span>-&gt;<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">'igbinary_test'</span>));
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"igbinaryåºåˆ—åŒ–: "</span> . (<span class="hljs-variable">$data</span> === <span class="hljs-variable">$result</span> ? <span class="hljs-string">"âœ… æˆåŠŸ"</span> : <span class="hljs-string">"âŒ å¤±è´¥"</span>) . <span class="hljs-string">"&lt;br&gt;"</span>;
    }
} <span class="hljs-keyword">catch</span>(<span class="hljs-built_in">Exception</span> <span class="hljs-variable">$e</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"âŒ Redisè¿æ¥å¤±è´¥: "</span> . <span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>() . <span class="hljs-string">"&lt;br&gt;"</span>;
}
</code></pre>
<h4 data-id="heading-49">8.2.4 å®Œæ•´ç¯å¢ƒéªŒè¯</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// ~/Sites/localhost/final_verification.php</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;h1&gt;ğŸ‰ PHP 7.4å¼€å‘ç¯å¢ƒå®Œæ•´éªŒè¯&lt;/h1&gt;"</span>;

<span class="hljs-comment">// PHPç‰ˆæœ¬</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;h2&gt;PHPç‰ˆæœ¬: "</span> . <span class="hljs-title function_ invoke__">phpversion</span>() . <span class="hljs-string">"&lt;/h2&gt;"</span>;

<span class="hljs-comment">// æ‰©å±•æ£€æŸ¥</span>
<span class="hljs-variable">$extensions</span> = [
    <span class="hljs-string">'pdo_mysql'</span>, <span class="hljs-string">'mysqli'</span>, <span class="hljs-string">'redis'</span>, <span class="hljs-string">'curl'</span>,
    <span class="hljs-string">'gd'</span>, <span class="hljs-string">'mbstring'</span>, <span class="hljs-string">'openssl'</span>, <span class="hljs-string">'igbinary'</span>, <span class="hljs-string">'lzf'</span>
];
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;h3&gt;æ‰©å±•çŠ¶æ€ï¼š&lt;/h3&gt;"</span>;
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$extensions</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$ext</span>) {
    <span class="hljs-variable">$status</span> = <span class="hljs-title function_ invoke__">extension_loaded</span>(<span class="hljs-variable">$ext</span>) ? <span class="hljs-string">"âœ…"</span> : <span class="hljs-string">"âŒ"</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"<span class="hljs-subst">$status</span> <span class="hljs-subst">$ext</span>&lt;br&gt;"</span>;
}

<span class="hljs-comment">// æœåŠ¡ç«¯å£æ£€æŸ¥</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;h3&gt;æœåŠ¡çŠ¶æ€ï¼š&lt;/h3&gt;"</span>;
<span class="hljs-variable">$ports</span> = [<span class="hljs-number">80</span> =&gt; <span class="hljs-string">'Nginx'</span>, <span class="hljs-number">9000</span> =&gt; <span class="hljs-string">'PHP-FPM'</span>, <span class="hljs-number">3306</span> =&gt; <span class="hljs-string">'MySQL'</span>, <span class="hljs-number">6379</span> =&gt; <span class="hljs-string">'Redis'</span>];
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$ports</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$port</span> =&gt; <span class="hljs-variable">$service</span>) {
    <span class="hljs-variable">$fp</span> = @<span class="hljs-title function_ invoke__">fsockopen</span>(<span class="hljs-string">'127.0.0.1'</span>, <span class="hljs-variable">$port</span>, <span class="hljs-variable">$errno</span>, <span class="hljs-variable">$errstr</span>, <span class="hljs-number">1</span>);
    <span class="hljs-variable">$status</span> = <span class="hljs-variable">$fp</span> ? <span class="hljs-string">"âœ…"</span> : <span class="hljs-string">"âŒ"</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"<span class="hljs-subst">$status</span> <span class="hljs-subst">$service</span> (ç«¯å£ <span class="hljs-subst">$port</span>)&lt;br&gt;"</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$fp</span>) <span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$fp</span>);
}

<span class="hljs-comment">// æ•°æ®åº“è¿æ¥</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;h3&gt;æ•°æ®åº“è¿æ¥ï¼š&lt;/h3&gt;"</span>;
<span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$pdo</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(
        <span class="hljs-string">"mysql:host=localhost;dbname=dev_database"</span>,
        <span class="hljs-string">"dev_user"</span>,
        <span class="hljs-string">"ä½ çš„å¯†ç "</span>
    );
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"âœ… MySQLè¿æ¥æˆåŠŸ&lt;br&gt;"</span>;
} <span class="hljs-keyword">catch</span>(PDOException <span class="hljs-variable">$e</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"âŒ MySQLè¿æ¥å¤±è´¥&lt;br&gt;"</span>;
}

<span class="hljs-comment">// Redisè¿æ¥</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;h3&gt;Redisè¿æ¥ï¼š&lt;/h3&gt;"</span>;
<span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$redis</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Redis</span>();
    <span class="hljs-variable">$redis</span>-&gt;<span class="hljs-title function_ invoke__">connect</span>(<span class="hljs-string">'127.0.0.1'</span>, <span class="hljs-number">6379</span>);
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"âœ… Redisè¿æ¥æˆåŠŸ&lt;br&gt;"</span>;
} <span class="hljs-keyword">catch</span>(<span class="hljs-built_in">Exception</span> <span class="hljs-variable">$e</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"âŒ Redisè¿æ¥å¤±è´¥&lt;br&gt;"</span>;
}
</code></pre>
<h3 data-id="heading-50">8.3 æµè§ˆå™¨è®¿é—®æµ‹è¯•</h3>
<p>é…ç½®å®Œæˆåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸»ç¯å¢ƒéªŒè¯</span>
http://local.test/final_verification.php

<span class="hljs-comment"># PHPä¿¡æ¯</span>
http://local.test/phpinfo.php

<span class="hljs-comment"># æ•°æ®åº“æµ‹è¯•</span>
http://local.test/db_test.php

<span class="hljs-comment"># Redisæµ‹è¯•</span>
http://local.test/redis_test.php

<span class="hljs-comment"># å¤šé¡¹ç›®</span>
http://blog.test
http://shop.test
http://admin.test
</code></pre>
<hr/>
<h2 data-id="heading-51">å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥</h2>
<h3 data-id="heading-52">æœåŠ¡ç®¡ç†</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
brew services start nginx
brew services start php@7.4
brew services start mysql@8.4
brew services start redis

<span class="hljs-comment"># åœæ­¢æœåŠ¡</span>
brew services stop nginx
brew services stop php@7.4
brew services stop mysql@8.4
brew services stop redis

<span class="hljs-comment"># é‡å¯æœåŠ¡</span>
brew services restart nginx
brew services restart php@7.4
brew services restart mysql@8.4
brew services restart redis

<span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€</span>
brew services list

<span class="hljs-comment"># æ£€æŸ¥ç‰¹å®šç«¯å£</span>
lsof -i :80      <span class="hljs-comment"># Nginx</span>
lsof -i :9000    <span class="hljs-comment"># PHP-FPM</span>
lsof -i :3306    <span class="hljs-comment"># MySQL</span>
lsof -i :6379    <span class="hljs-comment"># Redis</span>
</code></pre>
<h3 data-id="heading-53">PHPç›¸å…³</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># PHPç‰ˆæœ¬</span>
php --version

<span class="hljs-comment"># å·²åŠ è½½çš„æ‰©å±•</span>
php -m

<span class="hljs-comment"># PHPé…ç½®ä¿¡æ¯</span>
php -i

<span class="hljs-comment"># æŸ¥æ‰¾php.iniä½ç½®</span>
php --ini

<span class="hljs-comment"># ç‰¹å®šæ‰©å±•ç‰ˆæœ¬</span>
php -r <span class="hljs-string">"echo phpversion('redis');"</span>
</code></pre>
<h3 data-id="heading-54">MySQLç›¸å…³</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿æ¥MySQL</span>
mysql -u root -p
mysql -u dev_user -p

<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®åº“</span>
SHOW DATABASES;

<span class="hljs-comment"># é€‰æ‹©æ•°æ®åº“</span>
USE dev_database;

<span class="hljs-comment"># æŸ¥çœ‹è¡¨</span>
SHOW TABLES;

<span class="hljs-comment"># MySQLç‰ˆæœ¬</span>
mysql -V

<span class="hljs-comment"># é‡å¯MySQL</span>
brew services restart mysql@8.4
</code></pre>
<h3 data-id="heading-55">Redisç›¸å…³</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•è¿æ¥</span>
redis-cli ping

<span class="hljs-comment"># Rediså‘½ä»¤è¡Œ</span>
redis-cli

<span class="hljs-comment"># åŸºæœ¬æ“ä½œ</span>
redis-cli SET key value
redis-cli GET key
redis-cli KEYS *
redis-cli DEL key

<span class="hljs-comment"># æŸ¥çœ‹Redisä¿¡æ¯</span>
redis-cli INFO

<span class="hljs-comment"># æ¸…ç©ºæ‰€æœ‰æ•°æ®</span>
redis-cli FLUSHALL
</code></pre>
<h3 data-id="heading-56">Nginxç›¸å…³</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•é…ç½®è¯­æ³•</span>
nginx -t

<span class="hljs-comment"># é‡è½½é…ç½®</span>
nginx -s reload

<span class="hljs-comment"># åœæ­¢Nginx</span>
nginx -s stop

<span class="hljs-comment"># æŸ¥çœ‹Nginxç‰ˆæœ¬</span>
nginx -v

<span class="hljs-comment"># æ£€æŸ¥é…ç½®</span>
nginx -T
</code></pre>
<h3 data-id="heading-57">æ—¥å¿—æŸ¥çœ‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®æ—¶æŸ¥çœ‹æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f ~/Sites/logs/php/php_errors.log
<span class="hljs-built_in">tail</span> -f ~/Sites/logs/nginx/local.test.error.log

<span class="hljs-comment"># æŸ¥çœ‹é”™è¯¯æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -50 ~/Sites/logs/php/php-fpm.error.log
<span class="hljs-built_in">tail</span> -50 ~/Sites/logs/nginx/local.test.error.log

<span class="hljs-comment"># Nginxè®¿é—®æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -50 ~/Sites/logs/nginx/local.test.access.log
</code></pre>
<hr/>
<h2 data-id="heading-58">æ•…éšœæ’é™¤</h2>
<h3 data-id="heading-59">é—®é¢˜1ï¼šNginxå¯åŠ¨å¤±è´¥</h3>
<p><strong>é”™è¯¯ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">nginx: [emerg] <span class="hljs-literal">unknown</span> "user" variable
</code></pre>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å¹¶ä¿®å¤Nginxé…ç½®</span>
nginx -t

<span class="hljs-comment"># æŸ¥çœ‹è¯¦ç»†é”™è¯¯</span>
<span class="hljs-built_in">tail</span> -f /opt/homebrew/var/log/nginx/error.log

<span class="hljs-comment"># ç¡®ä¿ä½¿ç”¨å®é™…ç”¨æˆ·åè€Œéå˜é‡</span>
<span class="hljs-comment"># é”™è¯¯ç¤ºä¾‹ï¼šroot /Users/$USER/Sites/localhost;</span>
<span class="hljs-comment"># æ­£ç¡®ç¤ºä¾‹ï¼šroot /Users/ä½ çš„ç”¨æˆ·å/Sites/localhost;</span>
</code></pre>
<h3 data-id="heading-60">é—®é¢˜2ï¼šPHPæ‰©å±•æœªåŠ è½½</h3>
<p><strong>é”™è¯¯ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">PHP Fatal <span class="hljs-keyword">error</span>:  Uncaught <span class="hljs-keyword">Error</span>: <span class="hljs-keyword">Class</span> <span class="hljs-comment">'Redis' not found</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥æ‰©å±•æ˜¯å¦å®‰è£…</span>
php -m | grep redis

<span class="hljs-comment"># æ£€æŸ¥php.inié…ç½®</span>
php -i | grep extension_dir

<span class="hljs-comment"># ç¡®è®¤æ‰©å±•æ–‡ä»¶å­˜åœ¨</span>
<span class="hljs-built_in">ls</span> /opt/homebrew/Cellar/php@7.4/*/pecl/*/redis.so

<span class="hljs-comment"># é‡å¯PHP-FPM</span>
brew services restart shivammathur/php/php@7.4
</code></pre>
<h3 data-id="heading-61">é—®é¢˜3ï¼šMySQLè¿æ¥å¤±è´¥</h3>
<p><strong>é”™è¯¯ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">SQLSTATE<span class="hljs-selector-attr">[HY000]</span> <span class="hljs-selector-attr">[1045]</span> Access denied for user
</code></pre>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€</span>
brew services list | grep mysql

<span class="hljs-comment"># é‡å¯MySQL</span>
brew services restart mysql@8.4

<span class="hljs-comment"># æ£€æŸ¥MySQLé”™è¯¯æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f /opt/homebrew/var/mysql/*.err

<span class="hljs-comment"># éªŒè¯ç”¨æˆ·åå¯†ç </span>
mysql -u dev_user -p
</code></pre>
<h3 data-id="heading-62">é—®é¢˜4ï¼š.devåŸŸåæ— æ³•è®¿é—®</h3>
<p><strong>é—®é¢˜åŸå› </strong>ï¼š
Chromeå¯¹.devåŸŸåå®æ–½äº†HSTSç­–ç•¥</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š
ä½¿ç”¨.teståŸŸåæ›¿ä»£ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># hostsæ–‡ä»¶ä¸­ä½¿ç”¨.teståç¼€</span>
127.0.0.1       local.test
127.0.0.1       blog.test
</code></pre>
<h3 data-id="heading-63">é—®é¢˜5ï¼šç«¯å£è¢«å ç”¨</h3>
<p><strong>é”™è¯¯ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">nginx: [emerg] <span class="hljs-keyword">bind</span>() to <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>:<span class="hljs-number">80</span> failed (<span class="hljs-number">48</span>: Address already in <span class="hljs-keyword">use</span>)
</code></pre>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹</span>
lsof -i :80

<span class="hljs-comment"># ç»ˆæ­¢å ç”¨è¿›ç¨‹</span>
<span class="hljs-built_in">kill</span> -9 PID

<span class="hljs-comment"># æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£</span>
<span class="hljs-comment"># ä¿®æ”¹Nginxé…ç½®ï¼šlisten 8080;</span>
</code></pre>
<h3 data-id="heading-64">é—®é¢˜6ï¼šPHP-FPMæœªè¿è¡Œ</h3>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥PHP-FPMæœåŠ¡</span>
brew services list | grep php

<span class="hljs-comment"># æ‰‹åŠ¨å¯åŠ¨</span>
brew services start shivammathur/php/php@7.4

<span class="hljs-comment"># æ£€æŸ¥é”™è¯¯æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f ~/Sites/logs/php/php-fpm.error.log

<span class="hljs-comment"># æµ‹è¯•PHP-FPMé…ç½®</span>
/opt/homebrew/opt/php@7.4/sbin/php-fpm -t
</code></pre>
<h3 data-id="heading-65">é—®é¢˜7ï¼šRedisè¿æ¥å¤±è´¥</h3>
<p><strong>é”™è¯¯ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">RedisException: Redis server went away</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥RedisæœåŠ¡çŠ¶æ€</span>
brew services list | grep redis

<span class="hljs-comment"># å¯åŠ¨Redis</span>
brew services start redis

<span class="hljs-comment"># æµ‹è¯•è¿æ¥</span>
redis-cli ping

<span class="hljs-comment"># æ£€æŸ¥Redisæ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f /opt/homebrew/var/log/redis.log
</code></pre>
<hr/>
<h2 data-id="heading-66">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-67">1. å®šæœŸç»´æŠ¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¯å‘¨æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
brew services list

<span class="hljs-comment"># å®šæœŸæŸ¥çœ‹æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f ~/Sites/logs/php/*.<span class="hljs-built_in">log</span>
<span class="hljs-built_in">tail</span> -f ~/Sites/logs/nginx/*.<span class="hljs-built_in">log</span>

<span class="hljs-comment"># å®šæœŸæ¸…ç†è¿‡æœŸæ—¥å¿—</span>
find ~/Sites/logs -name <span class="hljs-string">"*.log"</span> -mtime +7 -delete
</code></pre>
<h3 data-id="heading-68">2. æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-69">PHPä¼˜åŒ–</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># php.ini</span>
<span class="hljs-attr">opcache.enable</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">opcache.memory_consumption</span> = <span class="hljs-number">256</span>
<span class="hljs-attr">opcache.interned_strings_buffer</span> = <span class="hljs-number">16</span>
<span class="hljs-attr">opcache.max_accelerated_files</span> = <span class="hljs-number">10000</span>
<span class="hljs-attr">opcache.validate_timestamps</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">opcache.revalidate_freq</span> = <span class="hljs-number">2</span>
</code></pre>
<h4 data-id="heading-70">MySQLä¼˜åŒ–</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># my.cnf</span>
<span class="hljs-attr">innodb_buffer_pool_size</span> = <span class="hljs-number">512</span>M
<span class="hljs-attr">innodb_log_file_size</span> = <span class="hljs-number">128</span>M
<span class="hljs-attr">max_connections</span> = <span class="hljs-number">200</span>
<span class="hljs-attr">query_cache_size</span> = <span class="hljs-number">64</span>M
</code></pre>
<h4 data-id="heading-71">Redisä¼˜åŒ–</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># redis.conf</span>
maxmemory 512mb
maxmemory-policy allkeys-lru
appendonly yes
appendfsync everysec
</code></pre>
<h3 data-id="heading-72">3. å®‰å…¨ç®¡ç†</h3>
<h4 data-id="heading-73">MySQLå®‰å…¨</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨å¼ºå¯†ç </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'user'</span>@<span class="hljs-string">'localhost'</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">'StrongP@ssw0rd!'</span>;

<span class="hljs-comment">-- å®šæœŸå¤‡ä»½æ•°æ®åº“</span>
mysqldump <span class="hljs-operator">-</span>u root <span class="hljs-operator">-</span>p dev_database <span class="hljs-operator">&gt;</span> backup_$(<span class="hljs-type">date</span> <span class="hljs-operator">+</span><span class="hljs-operator">%</span>Y<span class="hljs-operator">%</span>m<span class="hljs-operator">%</span>d).<span class="hljs-keyword">sql</span>
</code></pre>
<h4 data-id="heading-74">æ–‡ä»¶æƒé™</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é¡¹ç›®ç›®å½•æƒé™</span>
<span class="hljs-built_in">chmod</span> 755 ~/Sites/localhost
<span class="hljs-built_in">chmod</span> 644 ~/Sites/localhost/*.php

<span class="hljs-comment"># æ—¥å¿—ç›®å½•æƒé™</span>
<span class="hljs-built_in">chmod</span> 755 ~/Sites/logs
<span class="hljs-built_in">chmod</span> 644 ~/Sites/logs/**/*.<span class="hljs-built_in">log</span>

<span class="hljs-comment"># ç¦æ­¢Webè®¿é—®æ•æ„Ÿæ–‡ä»¶</span>
<span class="hljs-comment"># åœ¨nginxé…ç½®ä¸­æ·»åŠ ï¼š</span>
location ~ /\. {
    deny all;
}
</code></pre>
<h3 data-id="heading-75">4. å¼€å‘å·¥ä½œæµ</h3>
<h4 data-id="heading-76">æœ¬åœ°å¼€å‘</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
brew services start nginx php@7.4 mysql@8.4 redis

<span class="hljs-comment"># 2. éªŒè¯æœåŠ¡çŠ¶æ€</span>
brew services list

<span class="hljs-comment"># 3. æµ‹è¯•å¼€å‘ç¯å¢ƒ</span>
curl http://local.test/final_verification.php

<span class="hljs-comment"># 4. å¼€å§‹å¼€å‘...</span>
</code></pre>
<h4 data-id="heading-77">éƒ¨ç½²å‰æµ‹è¯•</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ£€æŸ¥é…ç½®è¯­æ³•</span>
nginx -t
/opt/homebrew/opt/php@7.4/sbin/php-fpm -t

<span class="hljs-comment"># 2. é‡å¯æ‰€æœ‰æœåŠ¡</span>
brew services restart nginx php@7.4 mysql@8.4 redis

<span class="hljs-comment"># 3. å…¨é¢æµ‹è¯•</span>
curl -I http://local.test
curl http://local.test/db_test.php
curl http://local.test/redis_test.php
</code></pre>
<h3 data-id="heading-78">5. å¤‡ä»½å’Œæ¢å¤</h3>
<h4 data-id="heading-79">æ•°æ®åº“å¤‡ä»½</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®Œæ•´å¤‡ä»½</span>
mysqldump -u root -p --all-databases &gt; full_backup_$(<span class="hljs-built_in">date</span> +%Y%m%d).sql

<span class="hljs-comment"># å•ä¸ªæ•°æ®åº“å¤‡ä»½</span>
mysqldump -u root -p dev_database &gt; dev_database_backup_$(<span class="hljs-built_in">date</span> +%Y%m%d).sql

<span class="hljs-comment"># æ¢å¤æ•°æ®åº“</span>
mysql -u root -p &lt; backup_file.sql
</code></pre>
<h4 data-id="heading-80">é…ç½®å¤‡ä»½</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤‡ä»½æ‰€æœ‰é…ç½®</span>
<span class="hljs-built_in">cp</span> -r /opt/homebrew/etc/nginx ~/backup/nginx_config_$(<span class="hljs-built_in">date</span> +%Y%m%d)
<span class="hljs-built_in">cp</span> -r /opt/homebrew/etc/php/7.4 ~/backup/php_config_$(<span class="hljs-built_in">date</span> +%Y%m%d)
<span class="hljs-built_in">cp</span> -r /opt/homebrew/etc/mysql ~/backup/mysql_config_$(<span class="hljs-built_in">date</span> +%Y%m%d)
</code></pre>
<hr/>
<h2 data-id="heading-81">é™„å½•</h2>
<h3 data-id="heading-82">A. Homebrewå¸¸ç”¨å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…åŒ…</span>
brew install &lt;package_name&gt;

<span class="hljs-comment"># å¸è½½åŒ…</span>
brew uninstall &lt;package_name&gt;

<span class="hljs-comment"># æœç´¢åŒ…</span>
brew search &lt;package_name&gt;

<span class="hljs-comment"># æŸ¥çœ‹å·²å®‰è£…çš„åŒ…</span>
brew list

<span class="hljs-comment"># æ›´æ–°åŒ…</span>
brew upgrade &lt;package_name&gt;

<span class="hljs-comment"># æ¸…ç†æ—§ç‰ˆæœ¬</span>
brew cleanup

<span class="hljs-comment"># æŸ¥çœ‹ä¿¡æ¯</span>
brew info &lt;package_name&gt;
</code></pre>
<h3 data-id="heading-83">B. å¸¸ç”¨æ–‡ä»¶ä½ç½®</h3>













































<table><thead><tr><th>ç”¨é€”</th><th>è·¯å¾„</th></tr></thead><tbody><tr><td>PHPé…ç½®</td><td><code>/opt/homebrew/etc/php/7.4/php.ini</code></td></tr><tr><td>PHP-FPMé…ç½®</td><td><code>/opt/homebrew/etc/php/7.4/php-fpm.d/www.conf</code></td></tr><tr><td>Nginxé…ç½®</td><td><code>/opt/homebrew/etc/nginx/nginx.conf</code></td></tr><tr><td>Nginxè™šæ‹Ÿä¸»æœº</td><td><code>/opt/homebrew/etc/nginx/servers/</code></td></tr><tr><td>MySQLé…ç½®</td><td><code>/opt/homebrew/etc/mysql/my.cnf</code></td></tr><tr><td>Redisé…ç½®</td><td><code>/opt/homebrew/etc/redis.conf</code></td></tr><tr><td>PHPé”™è¯¯æ—¥å¿—</td><td><code>~/Sites/logs/php/php_errors.log</code></td></tr><tr><td>Nginxè®¿é—®æ—¥å¿—</td><td><code>~/Sites/logs/nginx/*.access.log</code></td></tr><tr><td>é¡¹ç›®æ ¹ç›®å½•</td><td><code>~/Sites/</code></td></tr></tbody></table>
<h3 data-id="heading-84">C. å‚è€ƒèµ„æº</h3>
<ul>
<li><strong>Homebrewå®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fbrew.sh" target="_blank" title="https://brew.sh" ref="nofollow noopener noreferrer">brew.sh</a></li>
<li><strong>PHPå®˜æ–¹æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.php.net%2Fmanual%2F" target="_blank" title="https://www.php.net/manual/" ref="nofollow noopener noreferrer">www.php.net/manual/</a></li>
<li><strong>MySQLå®˜æ–¹æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2F" target="_blank" title="https://dev.mysql.com/doc/" ref="nofollow noopener noreferrer">dev.mysql.com/doc/</a></li>
<li><strong>Rediså®˜æ–¹æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fredis.io%2Fdocumentation" target="_blank" title="https://redis.io/documentation" ref="nofollow noopener noreferrer">redis.io/documentatiâ€¦</a></li>
<li><strong>Nginxå®˜æ–¹æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2F" target="_blank" title="https://nginx.org/en/docs/" ref="nofollow noopener noreferrer">nginx.org/en/docs/</a></li>
</ul>
<hr/>
<h2 data-id="heading-85">æ€»ç»“</h2>
<p>æ­å–œï¼ä½ å·²ç»æˆåŠŸåœ¨macOSä¸Šé…ç½®äº†å®Œæ•´çš„PHP 7.4å¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬ï¼š</p>
<p>âœ… <strong>PHP 7.4.33</strong> - å®Œæ•´çš„PHPå¼€å‘ç¯å¢ƒ<br/>
âœ… <strong>MySQL 8.4.x</strong> - å…³ç³»å‹æ•°æ®åº“<br/>
âœ… <strong>Redis 8.4.x</strong> - é«˜æ€§èƒ½ç¼“å­˜ç³»ç»Ÿ<br/>
âœ… <strong>Nginx 1.29.x</strong> - WebæœåŠ¡å™¨<br/>
âœ… <strong>igbinary</strong> - äºŒè¿›åˆ¶åºåˆ—åŒ–åŠ é€Ÿ<br/>
âœ… <strong>LZF</strong> - è½»é‡çº§å‹ç¼©<br/>
âœ… <strong>.teståŸŸå</strong> - ä¸“ä¸šçš„æœ¬åœ°å¼€å‘åŸŸå</p>
<h3 data-id="heading-86">ä¸‹ä¸€æ­¥å»ºè®®</h3>
<ol>
<li><strong>ç†Ÿæ‚‰ç¯å¢ƒ</strong>ï¼šè®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocal.test%2Ffinal_verification.php" target="_blank" title="http://local.test/final_verification.php" ref="nofollow noopener noreferrer">local.test/final_verifâ€¦</a> éªŒè¯æ‰€æœ‰åŠŸèƒ½</li>
<li><strong>åˆ›å»ºé¡¹ç›®</strong>ï¼šåœ¨ ~/Sites/projects/ ç›®å½•ä¸‹åˆ›å»ºä½ çš„é¡¹ç›®</li>
<li><strong>æ·»åŠ åŸŸå</strong>ï¼šä½¿ç”¨åŸŸåç®¡ç†å·¥å…·æ·»åŠ æ–°é¡¹ç›®åŸŸå</li>
<li><strong>å­¦ä¹ ä¼˜åŒ–</strong>ï¼šæ ¹æ®é¡¹ç›®éœ€æ±‚è°ƒæ•´é…ç½®ä¼˜åŒ–æ€§èƒ½</li>
</ol>
<p>ç¥ä½ å¼€å‘æ„‰å¿«ï¼ğŸš€</p>
<hr/>
<blockquote>
<p>æœ¬æ•™ç¨‹æœ€åæ›´æ–°æ—¶é—´ï¼š2026å¹´2æœˆ<br/>
é€‚ç”¨ç³»ç»Ÿï¼šmacOS (Apple Silicon / Intel)<br/>
é€‚ç”¨Homebrewç‰ˆæœ¬ï¼š4.0+</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[BakedGIèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7605807405307134015</link>    <guid>https://juejin.cn/post/7605807405307134015</guid>    <pubDate>2026-02-13T02:01:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605807405307134015" data-draft-id="7605792874173186111" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[BakedGIèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2026-02-13T02:01:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[BakedGIèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:01:04.000Z" title="Fri Feb 13 2026 02:01:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>Baked GI èŠ‚ç‚¹æ˜¯ Unity URP Shader Graph ä¸­ä¸€ä¸ªé‡è¦çš„å…‰ç…§è®¡ç®—èŠ‚ç‚¹ï¼Œå®ƒå…è®¸ç€è‰²å™¨è®¿é—®é¢„è®¡ç®—çš„å…‰ç…§ä¿¡æ¯ï¼Œä¸ºåœºæ™¯ä¸­çš„é™æ€ç‰©ä½“æä¾›é«˜è´¨é‡çš„é—´æ¥å…‰ç…§æ•ˆæœã€‚åœ¨å®æ—¶æ¸²æŸ“ä¸­ï¼Œå…¨å±€å…‰ç…§ï¼ˆGlobal Illuminationï¼‰çš„è®¡ç®—é€šå¸¸éå¸¸è€—è´¹æ€§èƒ½ï¼Œå› æ­¤ Unity æä¾›äº†çƒ˜ç„™å…‰ç…§çš„è§£å†³æ–¹æ¡ˆï¼Œå°†å¤æ‚çš„å…‰ç…§è®¡ç®—é¢„å…ˆå¤„ç†å¹¶å­˜å‚¨åœ¨å…‰ç…§è´´å›¾æˆ–å…‰ç…§æ¢é’ˆä¸­ï¼Œè¿è¡Œæ—¶ç›´æ¥é‡‡æ ·è¿™äº›é¢„è®¡ç®—æ•°æ®ï¼Œæ—¢èƒ½ä¿è¯è§†è§‰æ•ˆæœåˆèƒ½ä¿æŒé«˜æ€§èƒ½ã€‚</p>
<p>è¯¥èŠ‚ç‚¹çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯æ ¹æ®ç‰©ä½“çš„ä½ç½®å’Œæœå‘ï¼Œä»é¢„å…ˆçƒ˜ç„™çš„å…‰ç…§æ•°æ®ä¸­è·å–ç›¸åº”çš„å…‰ç…§é¢œè‰²å€¼ã€‚è¿™äº›æ•°æ®å¯ä»¥æ¥è‡ªä¸¤ç§ä¸»è¦æ¥æºï¼šå…‰ç…§è´´å›¾ç”¨äºé™æ€å‡ ä½•ä½“ï¼Œä»¥åŠå…‰ç…§æ¢é’ˆç”¨äºåŠ¨æ€ç‰©ä½“æˆ–éœ€è¦åŠ¨æ€å…‰ç…§çš„é™æ€ç‰©ä½“ã€‚é€šè¿‡åˆç†ä½¿ç”¨ Baked GI èŠ‚ç‚¹ï¼Œå¼€å‘è€…å¯ä»¥åˆ›å»ºå‡ºå…·æœ‰ä¸°å¯Œé—´æ¥å…‰ç…§å’ŒçœŸå®æ„Ÿå…‰ç…§äº¤äº’çš„ç€è‰²å™¨ï¼Œè€Œæ— éœ€æ‰¿æ‹…å®æ—¶å…¨å±€å…‰ç…§è®¡ç®—çš„æ€§èƒ½å¼€é”€ã€‚</p>
<p>åœ¨ URP ç®¡çº¿ä¸­ï¼ŒBaked GI èŠ‚ç‚¹çš„å®ç°ç»è¿‡äº†ä¼˜åŒ–ï¼Œä¸“é—¨é’ˆå¯¹ç§»åŠ¨å¹³å°å’Œæ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ã€‚ä¸å†…ç½®æ¸²æŸ“ç®¡çº¿æˆ– HDRP ç›¸æ¯”ï¼ŒURP ä¸­çš„ Baked GI èŠ‚ç‚¹å¯èƒ½æœ‰ä¸€äº›ç‰¹å®šçš„é™åˆ¶å’Œè¡Œä¸ºå·®å¼‚ï¼Œä½†è¿™äº›å·®å¼‚ä¸»è¦æ˜¯ä¸ºäº†ç¡®ä¿åœ¨ç›®æ ‡å¹³å°ä¸Šçš„æœ€ä½³æ€§èƒ½è¡¨ç°ã€‚ç†è§£è¿™äº›å·®å¼‚å¯¹äºåˆ›å»ºè·¨ç®¡çº¿å…¼å®¹çš„ç€è‰²å™¨è‡³å…³é‡è¦ã€‚</p>
<h2 data-id="heading-0">æè¿°</h2>
<p>Baked GI èŠ‚ç‚¹ä¸ºç€è‰²å™¨æä¾›äº†è®¿é—®çƒ˜ç„™å…¨å±€å…‰ç…§å€¼çš„èƒ½åŠ›ï¼Œè¿™äº›å€¼å¯ä»¥åœ¨é¡¶ç‚¹ç€è‰²å™¨æˆ–ç‰‡å…ƒç€è‰²å™¨é˜¶æ®µä½¿ç”¨ã€‚èŠ‚ç‚¹éœ€è¦å‡ ä¸ªå…³é”®çš„è¾“å…¥å‚æ•°æ¥ç¡®å®šå¦‚ä½•é‡‡æ ·å…‰ç…§æ•°æ®ï¼ŒåŒ…æ‹¬ä¸–ç•Œç©ºé—´ä¸­çš„ä½ç½®å’Œæ³•çº¿å‘é‡ï¼Œä»¥åŠç”¨äºå…‰ç…§è´´å›¾é‡‡æ ·çš„ UV åæ ‡ã€‚</p>
<h3 data-id="heading-1">çƒ˜ç„™å…¨å±€å…‰ç…§åŸºç¡€</h3>
<p>çƒ˜ç„™å…¨å±€å…‰ç…§æ˜¯ Unity å…‰ç…§ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒé€šè¿‡é¢„è®¡ç®—åœºæ™¯ä¸­å…‰çº¿å¦‚ä½•åœ¨ä¸åŒè¡¨é¢ä¹‹é—´åå°„å’Œä¼ æ’­ï¼Œç”Ÿæˆé™æ€çš„å…‰ç…§ä¿¡æ¯ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ç›´æ¥å…‰ç…§å’Œé—´æ¥å…‰ç…§çš„è®¡ç®—ï¼Œä½†åªé’ˆå¯¹æ ‡è®°ä¸ºé™æ€çš„ç‰©ä½“è¿›è¡Œã€‚çƒ˜ç„™å®Œæˆåï¼Œå…‰ç…§ä¿¡æ¯ä¼šè¢«å­˜å‚¨åˆ°å…‰ç…§è´´å›¾æˆ–å…‰ç…§æ¢é’ˆä¸­ï¼š</p>
<ul>
<li>å…‰ç…§è´´å›¾æ˜¯åº”ç”¨äºé™æ€å‡ ä½•ä½“çš„çº¹ç†ï¼ŒåŒ…å«é¢„å…ˆè®¡ç®—çš„å…‰ç…§ä¿¡æ¯</li>
<li>å…‰ç…§æ¢é’ˆæ˜¯åœ¨åœºæ™¯ç©ºé—´ä¸­æ”¾ç½®çš„é‡‡æ ·ç‚¹ï¼Œå­˜å‚¨äº†è¯¥ä½ç½®çš„å…‰ç…§ä¿¡æ¯ï¼Œå¯ç”¨äºåŠ¨æ€ç‰©ä½“æˆ–éœ€è¦åŠ¨æ€å…‰ç…§çš„é™æ€ç‰©ä½“</li>
</ul>
<p>Baked GI èŠ‚ç‚¹çš„ä½œç”¨å°±æ˜¯åœ¨ç€è‰²å™¨æ‰§è¡Œæ—¶ï¼Œæ ¹æ®æä¾›çš„è¾“å…¥å‚æ•°ï¼Œä»è¿™äº›é¢„è®¡ç®—çš„å…‰ç…§æ•°æ®ä¸­è·å–ç›¸åº”çš„é¢œè‰²å€¼ã€‚</p>
<h3 data-id="heading-2">ä½ç½®å’Œæ³•çº¿è¾“å…¥çš„é‡è¦æ€§</h3>
<p>ä½ç½®å’Œæ³•çº¿è¾“å…¥å¯¹äºæ­£ç¡®é‡‡æ ·å…‰ç…§æ¢é’ˆæ•°æ®è‡³å…³é‡è¦ã€‚å…‰ç…§æ¢é’ˆæ•°æ®æ˜¯åŸºäºçƒè°å‡½æ•°ç¼–ç çš„ï¼Œè¿™ç§ç¼–ç æ–¹å¼èƒ½å¤Ÿé«˜æ•ˆåœ°å­˜å‚¨å…¨æ–¹å‘çš„å…‰ç…§ä¿¡æ¯ã€‚å½“ç€è‰²å™¨éœ€è¦è·å–æŸç‚¹çš„å…‰ç…§ä¿¡æ¯æ—¶ï¼Œç³»ç»Ÿä¼šæ ¹æ®è¯¥ç‚¹çš„ä½ç½®æ‰¾åˆ°æœ€è¿‘çš„å…‰ç…§æ¢é’ˆç»„ï¼Œç„¶åä½¿ç”¨æ³•çº¿æ–¹å‘æ¥è¯„ä¼°çƒè°å‡½æ•°ï¼Œå¾—åˆ°è¯¥æ–¹å‘ä¸Šçš„å…‰ç…§é¢œè‰²ã€‚</p>
<p>å¦‚æœæä¾›çš„ä½ç½®æˆ–æ³•çº¿ä¸æ­£ç¡®ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…‰ç…§é‡‡æ ·é”™è¯¯ï¼Œè¡¨ç°ä¸ºä¸è‡ªç„¶çš„å…‰ç…§è¿‡æ¸¡æˆ–é”™è¯¯çš„å…‰ç…§æ–¹å‘ã€‚å› æ­¤ï¼Œç¡®ä¿è¿™äº›è¾“å…¥å‚æ•°çš„å‡†ç¡®æ€§æ˜¯ä½¿ç”¨ Baked GI èŠ‚ç‚¹çš„å…³é”®ã€‚</p>
<h3 data-id="heading-3">å…‰ç…§è´´å›¾åæ ‡çš„ä½œç”¨</h3>
<p>Static UV å’Œ Dynamic UV è¾“å…¥ç”¨äºé‡‡æ ·ä¸åŒç±»å‹çš„å…‰ç…§è´´å›¾ï¼š</p>
<ul>
<li>Static UV é€šå¸¸å¯¹åº”ç½‘æ ¼çš„ UV1 é€šé“ï¼Œç”¨äºé‡‡æ ·é™æ€å…‰ç…§è´´å›¾</li>
<li>Dynamic UV é€šå¸¸å¯¹åº”ç½‘æ ¼çš„ UV2 é€šé“ï¼Œç”¨äºé‡‡æ ·åŠ¨æ€å…¨å±€å…‰ç…§çš„å…‰ç…§è´´å›¾</li>
</ul>
<p>åœ¨ Unity çš„å…‰ç…§è®¾ç½®ä¸­ï¼Œå¼€å‘è€…å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸åŒçš„å…‰ç…§æ¨¡å¼ï¼Œå¦‚ Bakedã€Mixed æˆ– Realtimeã€‚å¯¹äº Mixed å…‰ç…§æ¨¡å¼çš„é™æ€ç‰©ä½“ï¼ŒUnity ä¼šç”Ÿæˆä¸¤å¥—å…‰ç…§è´´å›¾ï¼šä¸€å¥—ç”¨äºå®Œå…¨çƒ˜ç„™çš„å…‰ç…§ï¼Œå¦ä¸€å¥—ç”¨äºä¸å®æ—¶å…‰ç…§ç»“åˆçš„æ•ˆæœã€‚Baked GI èŠ‚ç‚¹é€šè¿‡ä¸åŒçš„ UV è¾“å…¥æ¥è®¿é—®è¿™äº›ä¸åŒçš„å…‰ç…§è´´å›¾ã€‚</p>
<h3 data-id="heading-4">èŠ‚ç‚¹è¡Œä¸ºçš„ç®¡çº¿ä¾èµ–æ€§</h3>
<p>ä¸€ä¸ªé‡è¦çš„æ³¨æ„äº‹é¡¹æ˜¯ï¼ŒBaked GI èŠ‚ç‚¹çš„å…·ä½“è¡Œä¸ºå¹¶æœªåœ¨å…¨å±€èŒƒå›´å†…ç»Ÿä¸€å®šä¹‰ã€‚Shader Graph æœ¬èº«å¹¶ä¸å®šä¹‰è¿™ä¸ªèŠ‚ç‚¹çš„åŠŸèƒ½å®ç°ï¼Œè€Œæ˜¯ç”±æ¯ä¸ªæ¸²æŸ“ç®¡çº¿å†³å®šä¸ºæ­¤èŠ‚ç‚¹ç”Ÿæˆä»€ä¹ˆæ ·çš„ HLSL ä»£ç ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>åœ¨é«˜æ¸…æ¸²æŸ“ç®¡çº¿ä¸­ï¼ŒBaked GI èŠ‚ç‚¹å¯èƒ½æœ‰ç‰¹å®šçš„ä¼˜åŒ–å’ŒåŠŸèƒ½</li>
<li>åœ¨é€šç”¨æ¸²æŸ“ç®¡çº¿ä¸­ï¼ŒèŠ‚ç‚¹çš„å®ç°å¯èƒ½æ›´æ³¨é‡æ€§èƒ½å’Œè·¨å¹³å°å…¼å®¹æ€§</li>
<li>åœ¨å†…ç½®æ¸²æŸ“ç®¡çº¿ä¸­ï¼ŒèŠ‚ç‚¹çš„è¡Œä¸ºå¯èƒ½åˆæœ‰æ‰€ä¸åŒ</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½¿å¾—æ¯ä¸ªæ¸²æŸ“ç®¡çº¿å¯ä»¥æ ¹æ®è‡ªèº«çš„æ¶æ„å’Œéœ€æ±‚ï¼Œä¼˜åŒ– Baked GI èŠ‚ç‚¹çš„å®ç°æ–¹å¼ã€‚å¯¹äºç€è‰²å™¨å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ„å‘³ç€å¦‚æœè®¡åˆ’åˆ›å»ºåœ¨å¤šç§æ¸²æŸ“ç®¡çº¿ä¸­ä½¿ç”¨çš„ç€è‰²å™¨ï¼Œéœ€è¦åœ¨æ¯ä¸ªç›®æ ‡ç®¡çº¿ä¸­æµ‹è¯• Baked GI èŠ‚ç‚¹çš„è¡Œä¸ºï¼Œç¡®ä¿å®ƒæŒ‰é¢„æœŸå·¥ä½œã€‚</p>
<h3 data-id="heading-5">æ— å…‰ç…§ç€è‰²å™¨ä¸­çš„é™åˆ¶</h3>
<p>åœ¨ URP å’Œ HDRP ä¸­ï¼ŒBaked GI èŠ‚ç‚¹ä¸èƒ½åœ¨æ— å…‰ç…§ç€è‰²å™¨ä¸­ä½¿ç”¨ã€‚æ— å…‰ç…§ç€è‰²å™¨é€šå¸¸ç”¨äºä¸éœ€è¦å¤æ‚å…‰ç…§è®¡ç®—çš„ç‰©ä½“ï¼Œå¦‚UIå…ƒç´ ã€ç²’å­æ•ˆæœæˆ–ç‰¹æ®Šæ•ˆæœã€‚è¿™äº›ç€è‰²å™¨é€šå¸¸ä¼šç»•è¿‡ç®¡çº¿çš„æ ‡å‡†å…‰ç…§æµç¨‹ï¼Œå› æ­¤æ— æ³•è®¿é—®çƒ˜ç„™å…¨å±€å…‰ç…§æ•°æ®ã€‚</p>
<p>å¦‚æœå°è¯•åœ¨æ— å…‰ç…§ç€è‰²å™¨ä¸­ä½¿ç”¨ Baked GI èŠ‚ç‚¹ï¼Œå¯èƒ½ä¼šé‡åˆ°ç¼–è¯‘é”™è¯¯æˆ–è¿è¡Œæ—¶é”™è¯¯ã€‚å¯¹äºéœ€è¦ç®€å•å…‰ç…§çš„æ— å…‰ç…§ç‰©ä½“ï¼Œè€ƒè™‘ä½¿ç”¨å…¶ä»–å…‰ç…§æŠ€æœ¯ï¼Œå¦‚é¡¶ç‚¹å…‰ç…§æˆ–ç®€å•çš„æ¼«åå°„è®¡ç®—ã€‚</p>
<h2 data-id="heading-6">ç«¯å£</h2>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/BakedGINodeThumb.png" alt="" loading="lazy"/></p>
<p>Baked GI èŠ‚ç‚¹åŒ…å«å¤šä¸ªè¾“å…¥ç«¯å£å’Œä¸€ä¸ªè¾“å‡ºç«¯å£ï¼Œæ¯ä¸ªç«¯å£éƒ½æœ‰ç‰¹å®šçš„åŠŸèƒ½å’Œæ•°æ®è¦æ±‚ã€‚ç†è§£è¿™äº›ç«¯å£çš„ä½œç”¨å¯¹äºæ­£ç¡®ä½¿ç”¨èŠ‚ç‚¹è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-7">Position è¾“å…¥ç«¯å£</h3>
<p>Position è¾“å…¥ç«¯å£æ¥æ”¶ä¸–ç•Œç©ºé—´ä¸­çš„ä½ç½®åæ ‡ï¼Œç”¨äºç¡®å®šå…‰ç…§é‡‡æ ·çš„ç©ºé—´ä½ç½®ã€‚è¿™ä¸ªä½ç½®ä¿¡æ¯ä¸»è¦ç”¨äºï¼š</p>
<ul>
<li>å…‰ç…§æ¢é’ˆé‡‡æ ·ï¼šç¡®å®šä½¿ç”¨å“ªäº›å…‰ç…§æ¢é’ˆçš„æ•°æ®</li>
<li>å…‰ç…§è´´å›¾ç´¢å¼•ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¸®åŠ©ç¡®å®šä½¿ç”¨å“ªå¼ å…‰ç…§è´´å›¾</li>
</ul>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”è¯¥å°†ç‰©ä½“çš„ä¸–ç•Œç©ºé—´ä½ç½®è¿æ¥åˆ°è¿™ä¸ªç«¯å£ã€‚åœ¨é¡¶ç‚¹ç€è‰²å™¨é˜¶æ®µä½¿ç”¨ Baked GI èŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Position èŠ‚ç‚¹è·å–é¡¶ç‚¹åœ¨ä¸–ç•Œç©ºé—´ä¸­çš„ä½ç½®ï¼›åœ¨ç‰‡å…ƒç€è‰²å™¨é˜¶æ®µä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å±å¹•ä½ç½®æˆ–é€šè¿‡å…¶ä»–æ–¹å¼è®¡ç®—å¾—åˆ°çš„ä¸–ç•Œä½ç½®ã€‚</p>
<p>å½“ä½¿ç”¨å…‰ç…§æ¢é’ˆæ—¶ï¼Œä½ç½®è¾“å…¥çš„å‡†ç¡®æ€§å°¤ä¸ºé‡è¦ã€‚å¦‚æœä½ç½®åå·®è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç‰©ä½“é‡‡æ ·åˆ°é”™è¯¯ä½ç½®çš„å…‰ç…§æ¢é’ˆæ•°æ®ï¼Œé€ æˆå…‰ç…§ä¸åŒ¹é…çš„ç°è±¡ã€‚</p>
<h3 data-id="heading-8">Normal è¾“å…¥ç«¯å£</h3>
<p>Normal è¾“å…¥ç«¯å£æ¥æ”¶ä¸–ç•Œç©ºé—´ä¸­çš„æ³•çº¿å‘é‡ï¼Œç”¨äºç¡®å®šè¡¨é¢æœå‘ï¼Œä»è€Œå½±å“å…‰ç…§é‡‡æ ·çš„æ–¹å‘ã€‚æ³•çº¿è¾“å…¥çš„ä¸»è¦ä½œç”¨åŒ…æ‹¬ï¼š</p>
<ul>
<li>å…‰ç…§æ¢é’ˆè¯„ä¼°ï¼šçƒè°å…‰ç…§åŸºäºæ³•çº¿æ–¹å‘è¯„ä¼°å…‰ç…§é¢œè‰²</li>
<li>å…‰ç…§è´´å›¾é‡‡æ ·ï¼šåœ¨æŸäº›é«˜çº§ç”¨æ³•ä¸­ï¼Œæ³•çº¿å¯èƒ½å½±å“å…‰ç…§è´´å›¾çš„é‡‡æ ·æ–¹å¼</li>
</ul>
<p>æ³•çº¿å‘é‡åº”å½“æ˜¯ä¸–ç•Œç©ºé—´ä¸­çš„å•ä½å‘é‡ã€‚å¦‚æœæä¾›çš„æ³•çº¿æ²¡æœ‰å½’ä¸€åŒ–ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…‰ç…§è®¡ç®—é”™è¯¯ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ Transform èŠ‚ç‚¹å°†ç‰©ä½“ç©ºé—´æ³•çº¿è½¬æ¢åˆ°ä¸–ç•Œç©ºé—´ï¼Œå¹¶ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å˜æ¢çŸ©é˜µï¼ˆé€šå¸¸æ˜¯è½¬ç½®é€†çŸ©é˜µï¼‰ã€‚</p>
<p>å¯¹äºåŠ¨æ€æ³•çº¿æ•ˆæœï¼ˆå¦‚æ³•çº¿è´´å›¾ï¼‰ï¼Œéœ€è¦å°†ä¿®æ”¹åçš„æ³•çº¿å‘é‡è¿æ¥åˆ° Normal ç«¯å£ï¼Œè¿™æ · Baked GI èŠ‚ç‚¹å°±ä¼šåŸºäºä¿®æ”¹åçš„è¡¨é¢æœå‘è®¡ç®—å…‰ç…§ï¼Œåˆ›é€ å‡ºæ›´åŠ ä¸°å¯Œçš„è§†è§‰æ•ˆæœã€‚</p>
<h3 data-id="heading-9">Static UV è¾“å…¥ç«¯å£</h3>
<p>Static UV è¾“å…¥ç«¯å£ç”¨äºæŒ‡å®šé™æ€å…‰ç…§è´´å›¾çš„çº¹ç†åæ ‡ã€‚è¿™äº›åæ ‡é€šå¸¸å¯¹åº”äºç½‘æ ¼çš„ UV1 é€šé“ï¼Œä¹Ÿå°±æ˜¯åœ¨å»ºæ¨¡è½¯ä»¶ä¸­ä¸ºå…‰ç…§è´´å›¾å‡†å¤‡çš„ UV é›†ã€‚Static UV çš„ä½œç”¨åŒ…æ‹¬ï¼š</p>
<ul>
<li>é‡‡æ ·å®Œå…¨çƒ˜ç„™çš„å…‰ç…§è´´å›¾</li>
<li>è®¿é—®é™æ€ç‰©ä½“çš„é—´æ¥å…‰ç…§ä¿¡æ¯</li>
<li>åœ¨ Mixed å…‰ç…§æ¨¡å¼ä¸‹ï¼Œé‡‡æ ·çƒ˜ç„™çš„é—´æ¥å…‰ç…§éƒ¨åˆ†</li>
</ul>
<p>å½“åœºæ™¯ä¸­ä½¿ç”¨ Baked æˆ– Mixed å…‰ç…§æ¨¡å¼æ—¶ï¼ŒUnity ä¼šä¸ºé™æ€ç‰©ä½“ç”Ÿæˆå…‰ç…§è´´å›¾ã€‚è¿™äº›å…‰ç…§è´´å›¾åŒ…å«äº†é¢„è®¡ç®—çš„ç›´æ¥å’Œé—´æ¥å…‰ç…§ä¿¡æ¯ã€‚Static UV è¾“å…¥ç¡®ä¿ç€è‰²å™¨èƒ½å¤Ÿæ­£ç¡®è®¿é—®è¿™äº›å…‰ç…§æ•°æ®ã€‚</p>
<p>å¦‚æœç½‘æ ¼æ²¡æœ‰æ­£ç¡®è®¾ç½®å…‰ç…§è´´å›¾ UVï¼Œæˆ–è€… Static UV è¾“å…¥ä¸æ­£ç¡®ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…‰ç…§è´´å›¾é‡‡æ ·é”™è¯¯ï¼Œè¡¨ç°ä¸ºæ‹‰ä¼¸ã€æ‰­æ›²æˆ–é‡å¤çš„å…‰ç…§å›¾æ¡ˆã€‚</p>
<h3 data-id="heading-10">Dynamic UV è¾“å…¥ç«¯å£</h3>
<p>Dynamic UV è¾“å…¥ç«¯å£ç”¨äºæŒ‡å®šåŠ¨æ€å…‰ç…§è´´å›¾çš„çº¹ç†åæ ‡ï¼Œé€šå¸¸å¯¹åº”äºç½‘æ ¼çš„ UV2 é€šé“ã€‚Dynamic UV çš„ä¸»è¦åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>åœ¨ Mixed å…‰ç…§æ¨¡å¼ä¸‹ï¼Œé‡‡æ ·ç”¨äºå®æ—¶å…‰ç…§äº¤äº’çš„å…‰ç…§è´´å›¾</li>
<li>è®¿é—®åŠ¨æ€å…¨å±€å…‰ç…§ç³»ç»Ÿç”Ÿæˆçš„å…‰ç…§ä¿¡æ¯</li>
<li>å¤„ç†éœ€è¦ä¸å®æ—¶å…‰æºäº¤äº’çš„é™æ€ç‰©ä½“çš„å…‰ç…§</li>
</ul>
<p>åœ¨ Mixed å…‰ç…§æ¨¡å¼ä¸‹ï¼ŒUnity ä¼šä¸ºé™æ€ç‰©ä½“ç”Ÿæˆä¸¤å¥—å…‰ç…§è´´å›¾ï¼šä¸€å¥—ç”¨äºå®Œå…¨çƒ˜ç„™çš„å…‰ç…§ï¼ˆé€šè¿‡ Static UV è®¿é—®ï¼‰ï¼Œå¦ä¸€å¥—ç”¨äºä¸å®æ—¶å…‰æºç»“åˆçš„æ•ˆæœï¼ˆé€šè¿‡ Dynamic UV è®¿é—®ï¼‰ã€‚è¿™ç§è®¾è®¡å…è®¸é™æ€ç‰©ä½“æ—¢å—ç›Šäºé«˜è´¨é‡çš„çƒ˜ç„™å…‰ç…§ï¼Œåˆèƒ½ä¸åœºæ™¯ä¸­çš„å®æ—¶å…‰æºæ­£ç¡®äº¤äº’ã€‚</p>
<h3 data-id="heading-11">Out è¾“å‡ºç«¯å£</h3>
<p>Out è¾“å‡ºç«¯å£æä¾›ä»çƒ˜ç„™å…¨å±€å…‰ç…§ç³»ç»Ÿé‡‡æ ·çš„é¢œè‰²å€¼ã€‚è¿™ä¸ªè¾“å‡ºæ˜¯ä¸‰ç»´å‘é‡ï¼Œè¡¨ç¤º RGB é¢œè‰²ç©ºé—´ä¸­çš„å…‰ç…§é¢œè‰²ã€‚è¾“å‡ºçš„å…‰ç…§å€¼å·²ç»è€ƒè™‘äº†ï¼š</p>
<ul>
<li>ç›´æ¥å…‰ç…§å’Œé—´æ¥å…‰ç…§çš„è´¡çŒ®</li>
<li>é¢œè‰²åå°„å’Œå…‰èƒ½ä¼ é€’æ•ˆæœ</li>
<li>åœºæ™¯çš„ç¯å¢ƒå…‰é®è”½</li>
</ul>
<p>è¾“å‡ºçš„é¢œè‰²å€¼é€šå¸¸éœ€è¦ä¸æè´¨çš„åç…§ç‡é¢œè‰²ç›¸ä¹˜ï¼Œä»¥å®ç°æ­£ç¡®çš„å…‰ç…§ç€è‰²ã€‚åœ¨åŸºäºç‰©ç†çš„ç€è‰²æ¨¡å‹ä¸­ï¼ŒBaked GI çš„è¾“å‡ºä»£è¡¨å…¥å°„å…‰å¼ºåº¦ï¼Œåº”å½“ä¸è¡¨é¢åç…§ç‡ç›¸ä¹˜æ¥è®¡ç®—å‡ºå°„å…‰å¼ºåº¦ã€‚</p>
<p>åœ¨æŸäº›é«˜çº§ç”¨æ³•ä¸­ï¼ŒBaked GI çš„è¾“å‡ºå¯ä»¥ç”¨äºæ›´å¤æ‚çš„å…‰ç…§è®¡ç®—ï¼Œå¦‚ä¸å®æ—¶å…‰ç…§ç»“åˆï¼Œæˆ–ä½œä¸ºå…¶ä»–ç€è‰²æ•ˆæœçš„è¾“å…¥ã€‚</p>
<h2 data-id="heading-12">æ§ä»¶</h2>
<p>Baked GI èŠ‚ç‚¹æä¾›äº†ä¸€ä¸ªé‡è¦çš„æ§ä»¶é€‰é¡¹ï¼Œç”¨äºè°ƒæ•´å…‰ç…§è´´å›¾çš„å¤„ç†æ–¹å¼ã€‚</p>
<h3 data-id="heading-13">Apply Lightmap Scaling åˆ‡æ¢</h3>
<p>Apply Lightmap Scaling æ˜¯ä¸€ä¸ªå¸ƒå°”åˆ‡æ¢æ§ä»¶ï¼Œå†³å®šæ˜¯å¦å¯¹å…‰ç…§è´´å›¾åæ ‡è‡ªåŠ¨åº”ç”¨ç¼©æ”¾å’Œåç§»ã€‚è¿™ä¸ªé€‰é¡¹é»˜è®¤ä¸ºå¯ç”¨çŠ¶æ€ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹åº”è¯¥ä¿æŒå¯ç”¨ã€‚</p>
<p>å½“å¯ç”¨ Apply Lightmap Scaling æ—¶ï¼ŒèŠ‚ç‚¹ä¼šè‡ªåŠ¨åº”ç”¨ Unity å…‰ç…§ç³»ç»Ÿä¸­å®šä¹‰çš„å…‰ç…§è´´å›¾ç¼©æ”¾å’Œåç§»å˜æ¢ã€‚è¿™äº›å˜æ¢ç¡®ä¿å…‰ç…§è´´å›¾æ­£ç¡®æ˜ å°„åˆ°ç½‘æ ¼è¡¨é¢ï¼Œè€ƒè™‘åˆ°äº†å…‰ç…§è´´å›¾çš„åˆ†åŒ…ã€æ’åˆ—å’Œå‹ç¼©è®¾ç½®ã€‚</p>
<p>ç¦ç”¨ Apply Lightmap Scaling çš„æƒ…å†µè¾ƒä¸ºå°‘è§ï¼Œé€šå¸¸åªåœ¨ä»¥ä¸‹ç‰¹å®šåœºæ™¯ä¸­è€ƒè™‘ï¼š</p>
<ul>
<li>å½“æ‰‹åŠ¨å¤„ç†å…‰ç…§è´´å›¾åæ ‡æ—¶</li>
<li>å½“ä½¿ç”¨è‡ªå®šä¹‰çš„å…‰ç…§è´´å›¾å¸ƒå±€æ—¶</li>
<li>åœ¨æŸäº›ç‰¹æ®Šæ•ˆæœç€è‰²å™¨ä¸­ï¼Œéœ€è¦ç›´æ¥è®¿é—®åŸå§‹å…‰ç…§è´´å›¾åæ ‡</li>
</ul>
<p>åœ¨å¤§å¤šæ•°æ ‡å‡†ç”¨æ³•ä¸­ï¼Œå»ºè®®ä¿æŒæ­¤é€‰é¡¹å¯ç”¨ï¼Œä»¥ç¡®ä¿å…‰ç…§è´´å›¾æ­£ç¡®æ˜ å°„ã€‚å¦‚æœç¦ç”¨æ­¤é€‰é¡¹ï¼Œéœ€è¦æ‰‹åŠ¨ç¡®ä¿å…‰ç…§è´´å›¾åæ ‡çš„æ­£ç¡®æ€§ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å…‰ç…§è´´å›¾é‡‡æ ·é”™è¯¯ã€‚</p>
<h2 data-id="heading-14">ç”Ÿæˆä»£ç ç¤ºä¾‹</h2>
<p>Baked GI èŠ‚ç‚¹åœ¨ç”Ÿæˆç€è‰²å™¨ä»£ç æ—¶ï¼Œä¼šæ ¹æ®æ‰€åœ¨çš„æ¸²æŸ“ç®¡çº¿äº§ç”Ÿç›¸åº”çš„ HLSL ä»£ç ã€‚ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº† URP ä¸­ Baked GI èŠ‚ç‚¹å¯èƒ½ç”Ÿæˆçš„ä»£ç ç»“æ„ã€‚</p>
<h3 data-id="heading-15">åŸºæœ¬å‡½æ•°å®šä¹‰</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">HLSL

<span class="hljs-keyword">void</span> <span class="hljs-title">Unity_BakedGI_float</span>(<span class="hljs-params">float3 Position, float3 Normal, float2 StaticUV, float2 DynamicUV, <span class="hljs-keyword">out</span> float3 Out</span>)</span>
{
    Out = SHADERGRAPH_BAKED_GI(Position, Normal, StaticUV, DynamicUV, <span class="hljs-literal">false</span>);
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°å®šä¹‰å±•ç¤ºäº† Baked GI èŠ‚ç‚¹çš„åŸºæœ¬ä»£ç ç»“æ„ã€‚å‡½æ•°æ¥æ”¶ä½ç½®ã€æ³•çº¿å’Œå…‰ç…§è´´å›¾åæ ‡ä½œä¸ºè¾“å…¥ï¼Œé€šè¿‡ SHADERGRAPH_BAKED_GI å®è®¡ç®—çƒ˜ç„™å…¨å±€å…‰ç…§å€¼ï¼Œå¹¶å°†ç»“æœè¾“å‡ºåˆ° Out å‚æ•°ã€‚</p>
<p>SHADERGRAPH_BAKED_GI æ˜¯ä¸€ä¸ªç”± Shader Graph ç³»ç»Ÿå®šä¹‰çš„å®ï¼Œå®ƒçš„å…·ä½“å®ç°å–å†³äºç›®æ ‡æ¸²æŸ“ç®¡çº¿ã€‚åœ¨ URP ä¸­ï¼Œè¿™ä¸ªå®ä¼šå±•å¼€ä¸ºè®¿é—® URP çƒ˜ç„™å…‰ç…§ç³»ç»Ÿçš„ä»£ç ã€‚</p>
<h3 data-id="heading-16">å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<p>åœ¨å®é™…çš„ç€è‰²å™¨ä¸­ï¼ŒBaked GI èŠ‚ç‚¹é€šå¸¸ä¸å…¶ä»–å…‰ç…§è®¡ç®—ç»“åˆä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„è¡¨é¢ç€è‰²å™¨ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•å°† Baked GI ä¸å®æ—¶ç›´æ¥å…‰ç…§ç»“åˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">HLSL

void surf(Input IN, inout SurfaceOutputStandard o)
{
    // é‡‡æ ·åç…§ç‡è´´å›¾
    fixed4 <span class="hljs-attr">albedo</span> = tex2D(_MainTex, IN.uv_MainTex) * _Color<span class="hljs-comment">;</span>

    // è·å–çƒ˜ç„™å…¨å±€å…‰ç…§
    float3 bakedGI<span class="hljs-comment">;</span>
    Unity_BakedGI_float(IN.worldPos, IN.worldNormal, IN.uv1, IN.uv2, bakedGI)<span class="hljs-comment">;</span>

    // è®¡ç®—å®æ—¶ç›´æ¥å…‰ç…§ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰
    float3 <span class="hljs-attr">directLight</span> = _LightColor0 * max(<span class="hljs-number">0</span>, dot(IN.worldNormal, _WorldSpaceLightPos0.xyz))<span class="hljs-comment">;</span>

    // ç»“åˆå…‰ç…§
    <span class="hljs-attr">o.Albedo</span> = albedo.rgb<span class="hljs-comment">;</span>
    <span class="hljs-attr">o.Emission</span> = bakedGI * albedo.rgb<span class="hljs-comment">;</span>
    // ç›´æ¥å…‰ç…§å·²ç»åœ¨å…‰ç…§æ¨¡å‹ä¸­å¤„ç†
}
</code></pre>
<p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†çƒ˜ç„™é—´æ¥å…‰ç…§ä¸å®æ—¶ç›´æ¥å…‰ç…§çš„åŸºæœ¬ç»“åˆæ–¹å¼ã€‚åœ¨å®é™…çš„ URP ç€è‰²å™¨ä¸­ï¼Œå…‰ç…§è®¡ç®—å¯èƒ½æ›´åŠ å¤æ‚ï¼Œæ¶‰åŠæ›´å¤šå…‰ç…§æ¨¡å‹å’Œæ¸²æŸ“ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-17">é¡¶ç‚¹ä¸ç‰‡å…ƒç€è‰²å™¨ä¸­çš„ä½¿ç”¨</h3>
<p>Baked GI èŠ‚ç‚¹æ—¢å¯ä»¥åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ä½¿ç”¨ï¼Œå–å†³äºæ€§èƒ½å’Œè´¨é‡çš„éœ€æ±‚ï¼š</p>
<p><strong>é¡¶ç‚¹ç€è‰²å™¨ä¸­ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">HLSL

v2f vert (appdata v)
{
    v2f o;
    <span class="hljs-comment">// ... å…¶ä»–é¡¶ç‚¹å˜æ¢</span>

    <span class="hljs-comment">// åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­è®¡ç®—çƒ˜ç„™GI</span>
    <span class="hljs-built_in">Unity_BakedGI_float</span>(mul(unity_ObjectToWorld, v.vertex)<span class="hljs-selector-class">.xyz</span>,
                        <span class="hljs-built_in">normalize</span>(mul(v.normal, (float3x3)unity_WorldToObject)),
                        v<span class="hljs-selector-class">.uv1</span>, v<span class="hljs-selector-class">.uv2</span>, o<span class="hljs-selector-class">.bakedGI</span>);

    return o;
}
</code></pre>
<p><strong>ç‰‡å…ƒç€è‰²å™¨ä¸­ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">HLSL

fixed4 frag (v2f <span class="hljs-selector-tag">i</span>) : SV_Target
{
    // åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­è®¡ç®—çƒ˜ç„™GIï¼ˆæ›´é«˜è´¨é‡ï¼‰
    float3 bakedGI;
    Unity_BakedGI_float(<span class="hljs-selector-tag">i</span><span class="hljs-selector-class">.worldPos</span>, normalize(<span class="hljs-selector-tag">i</span><span class="hljs-selector-class">.worldNormal</span>), <span class="hljs-selector-tag">i</span><span class="hljs-selector-class">.uv1</span>, <span class="hljs-selector-tag">i</span><span class="hljs-selector-class">.uv2</span>, bakedGI);

    // ... å…¶ä»–ç€è‰²è®¡ç®—
}
</code></pre>
<p>åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ä½¿ç”¨ Baked GI æ€§èƒ½æ›´å¥½ï¼Œä½†å…‰ç…§ç»†èŠ‚è¾ƒå°‘ï¼›åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ä½¿ç”¨è´¨é‡æ›´é«˜ï¼Œä½†æ€§èƒ½å¼€é”€æ›´å¤§ã€‚æ ¹æ®ç›®æ ‡å¹³å°å’Œæ€§èƒ½è¦æ±‚é€‰æ‹©åˆé€‚çš„é˜¶æ®µã€‚</p>
<h2 data-id="heading-18">æœ€ä½³å®è·µå’Œæ€§èƒ½è€ƒè™‘</h2>
<p>ä½¿ç”¨ Baked GI èŠ‚ç‚¹æ—¶ï¼Œéµå¾ªä¸€äº›æœ€ä½³å®è·µå¯ä»¥ç¡®ä¿æœ€ä½³çš„æ€§èƒ½å’Œè§†è§‰æ•ˆæœã€‚</p>
<h3 data-id="heading-19">å…‰ç…§è´´å›¾è®¾ç½®ä¼˜åŒ–</h3>
<p>ç¡®ä¿åœºæ™¯çš„å…‰ç…§è´´å›¾è®¾ç½®æ­£ç¡®ä¼˜åŒ–ï¼š</p>
<ul>
<li>ä½¿ç”¨é€‚å½“çš„å…‰ç…§è´´å›¾åˆ†è¾¨ç‡ï¼Œå¹³è¡¡è´¨é‡å’Œå†…å­˜ä½¿ç”¨</li>
<li>åˆç†è®¾ç½®å…‰ç…§è´´å›¾å‹ç¼©ï¼Œåœ¨ç§»åŠ¨å¹³å°ä¸Šä½¿ç”¨å‹ç¼©æ ¼å¼</li>
<li>å¯¹ä¸éœ€è¦é«˜è´¨é‡å…‰ç…§çš„ç‰©ä½“ä½¿ç”¨è¾ƒä½çš„å…‰ç…§è´´å›¾åˆ†è¾¨ç‡</li>
</ul>
<h3 data-id="heading-20">å…‰ç…§æ¢é’ˆå¸ƒå±€ä¼˜åŒ–</h3>
<p>å…‰ç…§æ¢é’ˆçš„å¸ƒå±€å½±å“åŠ¨æ€ç‰©ä½“çš„å…‰ç…§è´¨é‡ï¼š</p>
<ul>
<li>åœ¨å…‰ç…§å˜åŒ–æ˜æ˜¾çš„åŒºåŸŸæ”¾ç½®æ›´å¤šå…‰ç…§æ¢é’ˆ</li>
<li>ç¡®ä¿åŠ¨æ€ç‰©ä½“çš„ç§»åŠ¨è·¯å¾„ä¸Šæœ‰è¶³å¤Ÿçš„å…‰ç…§æ¢é’ˆè¦†ç›–</li>
<li>ä½¿ç”¨å…‰ç…§æ¢é’ˆä»£ç†å·æé«˜å¤§èŒƒå›´åŒºåŸŸçš„å…‰ç…§æ¢é’ˆæ•ˆç‡</li>
</ul>
<h3 data-id="heading-21">ç€è‰²å™¨æ€§èƒ½ä¼˜åŒ–</h3>
<p>åœ¨ç€è‰²å™¨ä¸­ä½¿ç”¨ Baked GI èŠ‚ç‚¹æ—¶è€ƒè™‘æ€§èƒ½ï¼š</p>
<ul>
<li>åœ¨ç§»åŠ¨å¹³å°ä¸Šï¼Œè€ƒè™‘åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ä½¿ç”¨ Baked GI</li>
<li>å¯¹äºè¿œå¤„ç‰©ä½“ï¼Œä½¿ç”¨ç®€åŒ–çš„å…‰ç…§è®¡ç®—</li>
<li>é¿å…åœ¨é€æ˜ç‰©ä½“çš„ç€è‰²å™¨ä¸­è¿‡åº¦ä½¿ç”¨å¤æ‚çš„å…‰ç…§è®¡ç®—</li>
</ul>
<h3 data-id="heading-22">è·¨ç®¡çº¿å…¼å®¹æ€§</h3>
<p>å¦‚æœè®¡åˆ’åˆ›å»ºè·¨æ¸²æŸ“ç®¡çº¿ä½¿ç”¨çš„ç€è‰²å™¨ï¼š</p>
<ul>
<li>åœ¨ç›®æ ‡ç®¡çº¿ä¸­æµ‹è¯• Baked GI èŠ‚ç‚¹çš„è¡Œä¸º</li>
<li>ä½¿ç”¨ç€è‰²å™¨å˜ä½“æˆ–è‡ªå®šä¹‰å‡½æ•°å¤„ç†ç®¡çº¿ç‰¹å®šçš„å·®å¼‚</li>
<li>æä¾›å›é€€æ–¹æ¡ˆï¼Œå½“ Baked GI èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ä½¿ç”¨æ›¿ä»£å…‰ç…§è®¡ç®—</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»åŸç†åˆ°å®è·µï¼šJavaScriptä¸­çš„thisæŒ‡å‘ï¼Œä¸€ç¯‡å°±å¤Ÿäº†]]></title>    <link>https://juejin.cn/post/7605848213602402350</link>    <guid>https://juejin.cn/post/7605848213602402350</guid>    <pubDate>2026-02-12T13:54:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605848213602402350" data-draft-id="7605782093482065946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»åŸç†åˆ°å®è·µï¼šJavaScriptä¸­çš„thisæŒ‡å‘ï¼Œä¸€ç¯‡å°±å¤Ÿäº†"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-02-12T13:54:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¼šæ•²ä»£ç 1"/> <meta itemprop="url" content="https://juejin.cn/user/1927884034804425"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»åŸç†åˆ°å®è·µï¼šJavaScriptä¸­çš„thisæŒ‡å‘ï¼Œä¸€ç¯‡å°±å¤Ÿäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927884034804425/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¼šæ•²ä»£ç 1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T13:54:14.000Z" title="Thu Feb 12 2026 13:54:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»åŸç†åˆ°å®è·µï¼šJavaScriptä¸­çš„thisæŒ‡å‘ï¼Œä¸€ç¯‡å°±å¤Ÿäº†</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>æœ€è¿‘åœ¨å¤ä¹ JavaScriptçš„thisæŒ‡å‘é—®é¢˜ï¼Œå†™äº†å‡ ä¸ªå°ä¾‹å­æ¥åŠ æ·±ç†è§£ã€‚å¾ˆå¤šåŒå­¦è§‰å¾—thiséš¾ï¼Œå…¶å®æ˜¯å› ä¸º<strong>thisæ˜¯åœ¨å‡½æ•°æ‰§è¡Œæ—¶ç¡®å®šçš„ï¼Œè€Œä¸æ˜¯å®šä¹‰æ—¶</strong>ã€‚è¿™ä¸ªç‰¹æ€§å¯¼è‡´äº†thisæŒ‡å‘çš„â€œå–„å˜â€ã€‚</p>
<p>ä»Šå¤©ï¼Œå°±è®©æˆ‘é€šè¿‡è¿™å‡ ä¸ªä»£ç ä¾‹å­ï¼Œå¸¦ä½ ç”±æµ…å…¥æ·±æŒæ¡JavaScriptä¸­çš„thisæŒ‡å‘ã€‚</p>
<hr/>
<h3 data-id="heading-2">ç¬¬ä¸€ç« ï¼šåŸºç¡€æ¦‚å¿µ - thisçš„é»˜è®¤ç»‘å®š</h3>
<h4 data-id="heading-3">1.1 å…¨å±€ç¯å¢ƒä¸‹çš„this</h4>
<p>åœ¨æµè§ˆå™¨å…¨å±€ç¯å¢ƒä¸­ï¼Œ<code>this</code>æŒ‡å‘<code>window</code>å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">"windowName"</span>; <span class="hljs-comment">// å…¨å±€å˜é‡</span>
<span class="hljs-keyword">var</span> func1 = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'func1'</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// "windowName"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// "windowName"</span>
</code></pre>
<p><strong>æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š</strong></p>
<ul>
<li>å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œ<code>this === window</code></li>
<li>ç”¨<code>var</code>å£°æ˜çš„å…¨å±€å˜é‡ä¼šè‡ªåŠ¨æŒ‚è½½åˆ°<code>window</code>å¯¹è±¡ä¸Š</li>
</ul>
<hr/>
<h3 data-id="heading-4">ç¬¬äºŒç« ï¼šè°è°ƒç”¨æˆ‘ï¼Œæˆ‘å°±æŒ‡å‘è°</h3>
<h4 data-id="heading-5">2.1 å¯¹è±¡æ–¹æ³•è°ƒç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> a = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Cherry"</span>,
  <span class="hljs-attr">func1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  }
}

a.<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// "Cherry"</span>
</code></pre>
<p><strong>å…³é”®ç†è§£ï¼š</strong> è¿™é‡Œçš„<code>this</code>æŒ‡å‘äº†å¯¹è±¡<code>a</code>ã€‚å› ä¸º<code>func1</code>æ˜¯ç”±<code>a</code>è°ƒç”¨çš„ã€‚</p>
<h4 data-id="heading-6">2.2 ç»å…¸é¢è¯•é¢˜ - å®šæ—¶å™¨ä¸­çš„this</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 2.html ä¸­çš„ä¾‹å­</span>
<span class="hljs-keyword">var</span> a = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Cherry"</span>,
  <span class="hljs-attr">func1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  },
  <span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// è¿™é‡Œä¼šæŠ¥é”™ï¼</span>
    }, <span class="hljs-number">3000</span>)
  }
}

a.<span class="hljs-title function_">func2</span>(); <span class="hljs-comment">// TypeError: this.func1 is not a function</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Ÿ</strong></p>
<p>å®šæ—¶å™¨çš„å›è°ƒå‡½æ•°æ˜¯ç”±<strong>å®šæ—¶å™¨å†…éƒ¨</strong>è°ƒç”¨çš„ï¼Œæ­¤æ—¶<code>this</code>æŒ‡å‘äº†<code>window</code>å¯¹è±¡ã€‚è€Œ<code>window</code>å¯¹è±¡ä¸Šå¹¶æ²¡æœ‰<code>func1</code>æ–¹æ³•ï¼ˆè™½ç„¶æœ‰å…¨å±€å˜é‡<code>func1</code>ï¼Œä½†è¿™é‡Œè°ƒç”¨çš„æ˜¯å¯¹è±¡æ–¹æ³•ï¼‰ã€‚</p>
<p><strong>éªŒè¯ä¸€ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> a = {
  <span class="hljs-comment">// ... åŒä¸Š</span>
  <span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// window</span>
    }, <span class="hljs-number">3000</span>)
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-7">ç¬¬ä¸‰ç« ï¼šè§£å†³thisä¸¢å¤±çš„ä¸‰ç§æ–¹æ¡ˆ</h3>
<h4 data-id="heading-8">3.1 æ–¹æ¡ˆä¸€ï¼šä¿å­˜thisï¼ˆthat = thisï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 3.html ä¸­çš„ä¾‹å­</span>
<span class="hljs-keyword">var</span> a = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Cherry"</span>,
  <span class="hljs-attr">func1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  },
  <span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// ä¿å­˜å¤–å±‚çš„this</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      that.<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// "Cherry" âœ…</span>
    }, <span class="hljs-number">3000</span>)
  }
}

a.<span class="hljs-title function_">func2</span>(); <span class="hljs-comment">// 3ç§’åè¾“å‡º "Cherry"</span>
</code></pre>
<p><strong>åŸç†ï¼š</strong> åˆ©ç”¨é—­åŒ…çš„ç‰¹æ€§ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ã€‚<code>that</code>ä¿å­˜äº†æ­£ç¡®çš„<code>this</code>å¼•ç”¨ã€‚</p>
<h4 data-id="heading-9">3.2 æ–¹æ¡ˆäºŒï¼šbindç»‘å®š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 2.html ä¸­çš„ä¾‹å­</span>
<span class="hljs-keyword">var</span> a = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Cherry"</span>,
  <span class="hljs-attr">func1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  },
  <span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>(); 
    }.<span class="hljs-title function_">bind</span>(a), <span class="hljs-number">3000</span>) <span class="hljs-comment">// bindæ°¸ä¹…ç»‘å®šthisä¸ºa</span>
  }
}

a.<span class="hljs-title function_">func2</span>(); <span class="hljs-comment">// 3ç§’åè¾“å‡º "Cherry" âœ…</span>
</code></pre>
<p><strong>é‡è¦åŒºåˆ«ï¼š</strong></p>
<ul>
<li><code>bind()</code>ï¼š<strong>ä¸ä¼šç«‹å³æ‰§è¡Œ</strong>ï¼Œè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œæ°¸ä¹…ç»‘å®šthis</li>
<li><code>call()</code>/<code>apply()</code>ï¼š<strong>ç«‹å³æ‰§è¡Œ</strong>å‡½æ•°ï¼Œä¸´æ—¶ç»‘å®šthis</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¹æ¯”æ¼”ç¤º</span>
a.<span class="hljs-property">func1</span>.<span class="hljs-title function_">call</span>(a); <span class="hljs-comment">// ç«‹å³æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> boundFunc = a.<span class="hljs-property">func1</span>.<span class="hljs-title function_">bind</span>(a); <span class="hljs-comment">// è¿”å›ç»‘å®šåçš„å‡½æ•°ï¼Œä¸æ‰§è¡Œ</span>
<span class="hljs-title function_">boundFunc</span>(); <span class="hljs-comment">// æ‰§è¡Œæ—¶thiså·²ç»ç»‘å®šä¸ºa</span>
</code></pre>
<h4 data-id="heading-10">3.3 æ–¹æ¡ˆä¸‰ï¼šç®­å¤´å‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 4.html ä¸­çš„ä¾‹å­</span>
<span class="hljs-keyword">var</span> a = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Cherry"</span>,
  <span class="hljs-attr">func1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  },
  <span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// aå¯¹è±¡ âœ…</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// "Cherry" âœ…</span>
    }, <span class="hljs-number">3000</span>)
  }
}

a.<span class="hljs-title function_">func2</span>(); <span class="hljs-comment">// 3ç§’åè¾“å‡º "Cherry"</span>
</code></pre>
<p><strong>ç®­å¤´å‡½æ•°çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ²¡æœ‰è‡ªå·±çš„<code>this</code></li>
<li>ç»§æ‰¿<strong>å®šä¹‰æ—¶</strong>æ‰€åœ¨ä½œç”¨åŸŸçš„<code>this</code></li>
<li><code>this</code>æ˜¯é™æ€çš„ï¼Œä¸ä¼šæ”¹å˜</li>
</ul>
<hr/>
<h3 data-id="heading-11">ç¬¬å››ç« ï¼šæ·±å…¥ç†è§£ç®­å¤´å‡½æ•°</h3>
<h4 data-id="heading-12">4.1 ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„this</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 5.html ä¸­çš„ä¾‹å­</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">func</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// windowï¼ˆåœ¨æµè§ˆå™¨ç¯å¢ƒï¼‰</span>
}

<span class="hljs-title function_">func</span>(); <span class="hljs-comment">// window</span>
</code></pre>
<h4 data-id="heading-13">4.2 ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">func</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
}

<span class="hljs-keyword">new</span> <span class="hljs-title function_">func</span>(); <span class="hljs-comment">// TypeError: func is not a constructor âŒ</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong>
ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„<code>this</code>ï¼Œä¹Ÿæ²¡æœ‰<code>prototype</code>å±æ€§ï¼Œæ— æ³•è¿›è¡Œå®ä¾‹åŒ–ã€‚</p>
<h4 data-id="heading-14">4.3 å…³äºargumentså¯¹è±¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">func</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// ReferenceError âŒ</span>
}

<span class="hljs-comment">// ç®­å¤´å‡½æ•°ä¹Ÿæ²¡æœ‰è‡ªå·±çš„argumentså¯¹è±¡</span>
<span class="hljs-comment">// ä½†å¯ä»¥è¿™æ ·è·å–å‚æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">func2</span> = (<span class="hljs-params">...args</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(args); <span class="hljs-comment">// [1, 2, 3] âœ…</span>
}

<span class="hljs-title function_">func2</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
</code></pre>
<hr/>
<h3 data-id="heading-15">ç¬¬äº”ç« ï¼šç»¼åˆå®è·µ - åˆ†æä¸€æ®µå¤æ‚ä»£ç </h3>
<p>è®©æˆ‘ä»¬æ¥åˆ†æ1.htmlä¸­çš„ä»£ç ï¼Œå®ƒåŒ…å«äº†å¤šä¸ªçŸ¥è¯†ç‚¹çš„ç»¼åˆè¿ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">"windowName"</span>;
<span class="hljs-keyword">var</span> func1 = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'func1'</span>);
}
<span class="hljs-keyword">var</span> a = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Cherry"</span>,
  <span class="hljs-attr">func1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  },
  <span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// è¿™é‡ŒåŸæœ¬æœ‰é—®é¢˜</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hahaha'</span>);
      }
    }.<span class="hljs-title function_">call</span>(a), <span class="hljs-number">3000</span>) <span class="hljs-comment">// âš ï¸ æ³¨æ„ï¼šè¿™é‡Œç”¨äº†call</span>
  }
}
</code></pre>
<p><strong>è¿™é‡Œæœ‰ä¸ªå‘ï¼š</strong></p>
<p><code>setTimeout</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ˜¯<strong>å‡½æ•°</strong>ï¼Œä½†<code>.call(a)</code>ä¼š<strong>ç«‹å³æ‰§è¡Œ</strong>è¿™ä¸ªå‡½æ•°ï¼Œå¹¶æŠŠè¿”å›å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™<code>setTimeout</code>ã€‚è¿™é‡Œè¿”å›çš„æ˜¯<code>undefined</code>ï¼Œç›¸å½“äºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®é™…æ‰§è¡Œæ•ˆæœ</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-literal">undefined</span>, <span class="hljs-number">3000</span>)
</code></pre>
<p><strong>æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨bindï¼ˆä¸ä¼šç«‹å³æ‰§è¡Œï¼‰</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>();
}.<span class="hljs-title function_">bind</span>(a), <span class="hljs-number">3000</span>)

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ç®­å¤´å‡½æ•°</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// è¿™é‡Œçš„thisç»§æ‰¿è‡ªfunc2</span>
}, <span class="hljs-number">3000</span>)
</code></pre>
<hr/>
<h3 data-id="heading-16">ç¬¬å…­ç« ï¼šé¢è¯•é¢˜ç²¾é€‰</h3>
<h4 data-id="heading-17">6.1 ç»å…¸ç»„åˆé¢˜</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">'window'</span>;

<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'obj'</span>,
  <span class="hljs-attr">fn1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  },
  <span class="hljs-attr">fn2</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  },
  <span class="hljs-attr">fn3</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    }
  },
  <span class="hljs-attr">fn4</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    }
  }
}

obj.<span class="hljs-title function_">fn1</span>();      <span class="hljs-comment">// 'obj' - å¯¹è±¡æ–¹æ³•è°ƒç”¨</span>
obj.<span class="hljs-title function_">fn2</span>();      <span class="hljs-comment">// 'window' - ç®­å¤´å‡½æ•°ï¼ŒthisæŒ‡å‘å¤–å±‚window</span>
obj.<span class="hljs-title function_">fn3</span>()();    <span class="hljs-comment">// 'window' - ç‹¬ç«‹å‡½æ•°è°ƒç”¨</span>
obj.<span class="hljs-title function_">fn4</span>()();    <span class="hljs-comment">// 'obj' - ç®­å¤´å‡½æ•°ï¼Œthisç»§æ‰¿è‡ªfn4çš„this</span>
</code></pre>
<h4 data-id="heading-18">6.2 ä¼˜å…ˆçº§é—®é¢˜</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
}

<span class="hljs-keyword">const</span> obj1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">'obj1'</span>, foo };
<span class="hljs-keyword">const</span> obj2 = { <span class="hljs-attr">name</span>: <span class="hljs-string">'obj2'</span> };

obj1.<span class="hljs-title function_">foo</span>();                 <span class="hljs-comment">// 'obj1'</span>
obj1.<span class="hljs-property">foo</span>.<span class="hljs-title function_">call</span>(obj2);       <span class="hljs-comment">// 'obj2' - callä¼˜å…ˆäºéšå¼ç»‘å®š</span>
<span class="hljs-keyword">const</span> bound = foo.<span class="hljs-title function_">bind</span>(obj1);
bound.<span class="hljs-title function_">call</span>(obj2);          <span class="hljs-comment">// 'obj1' - bindç»‘å®šåï¼Œcallæ— æ³•æ”¹å˜</span>
</code></pre>
<p><strong>thisç»‘å®šä¼˜å…ˆçº§ï¼š</strong></p>
<ol>
<li><code>new</code>ç»‘å®šï¼ˆæœ€é«˜ï¼‰</li>
<li><code>call</code>/<code>apply</code>/<code>bind</code>æ˜¾å¼ç»‘å®š</li>
<li>å¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼ˆéšå¼ç»‘å®šï¼‰</li>
<li>é»˜è®¤ç»‘å®šï¼ˆç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼Œæœ€ä½ï¼‰</li>
</ol>
<hr/>
<h3 data-id="heading-19">æ€»ç»“</h3>
<p>thisçš„æŒ‡å‘è§„å¾‹å…¶å®å¾ˆç®€å•ï¼Œè®°ä½è¿™å‡ ç‚¹ï¼š</p>
<ol>
<li><strong>å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰èƒ½ç¡®å®šthisæŒ‡å‘</strong></li>
<li><strong>æ™®é€šå‡½æ•°ï¼šè°è°ƒç”¨æˆ‘ï¼Œæˆ‘æŒ‡å‘è°</strong></li>
<li><strong>ç®­å¤´å‡½æ•°ï¼šæˆ‘åœ¨å“ªé‡Œå®šä¹‰ï¼Œthiså°±è·Ÿè°ä¸€æ ·</strong></li>
<li><strong>å¯ä»¥é€šè¿‡<code>bind</code>æ°¸ä¹…ç»‘å®šthisï¼Œ<code>call</code>/<code>apply</code>ä¸´æ—¶ç»‘å®šthis</strong></li>
</ol>
<p>ç†è§£äº†è¿™äº›ï¼ŒJavaScriptçš„thisé—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚</p>
<hr/>
<h3 data-id="heading-20">ç»ƒä¹ é¢˜</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°è¯•åˆ†æä¸‹é¢çš„è¾“å‡º</span>
<span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'obj'</span>,
  <span class="hljs-attr">say</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    }, <span class="hljs-number">100</span>);
  }
}

obj.<span class="hljs-title function_">say</span>(); <span class="hljs-comment">// è¾“å‡ºä»€ä¹ˆï¼Ÿ</span>

<span class="hljs-keyword">const</span> say = obj.<span class="hljs-property">say</span>;
<span class="hljs-title function_">say</span>(); <span class="hljs-comment">// è¾“å‡ºä»€ä¹ˆï¼Ÿ</span>
</code></pre>
<p>ç­”æ¡ˆå’Œè§£ææ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµğŸ‘æ”¶è—â­ï¼Œè®©æ›´å¤šçš„å°ä¼™ä¼´çœ‹åˆ°ï¼æˆ‘ä»¬ä¸‹æœŸå†è§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Anthony Fu çš„ Vue3 å¼€å‘è§„èŒƒå®Œæ•´è§£è¯»]]></title>    <link>https://juejin.cn/post/7605848213602418734</link>    <guid>https://juejin.cn/post/7605848213602418734</guid>    <pubDate>2026-02-12T13:59:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605848213602418734" data-draft-id="7605711582430216243" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Anthony Fu çš„ Vue3 å¼€å‘è§„èŒƒå®Œæ•´è§£è¯»"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-12T13:59:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‰‰å·å·"/> <meta itemprop="url" content="https://juejin.cn/user/464465970359547"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Anthony Fu çš„ Vue3 å¼€å‘è§„èŒƒå®Œæ•´è§£è¯»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/464465970359547/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‰‰å·å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T13:59:38.000Z" title="Thu Feb 12 2026 13:59:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Anthony Fu çš„ Vue3 å¼€å‘è§„èŒƒå®Œæ•´è§£è¯»</h2>
<p>æœ¬æ–‡åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantfu%2Fskills" target="_blank" title="https://github.com/antfu/skills" ref="nofollow noopener noreferrer">antfu/skills</a> ä»“åº“æ•´ç†ç¿»è¯‘ï¼Œå…¨é¢è§£æ Anthony Fu åœ¨ Vue 3 ç”Ÿæ€ä¸­çš„ç¼–ç è§„èŒƒã€æœ€ä½³å®è·µå’Œå·¥å…·é“¾æ¨èã€‚ä½œä¸º Vue æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜ã€Vite å›¢é˜Ÿæˆå‘˜ä»¥åŠä¼—å¤šå¼€æºé¡¹ç›®çš„ä½œè€…ï¼ˆVueUseã€UnoCSSã€Vitestã€Slidev ç­‰ï¼‰ï¼ŒAnthony çš„å¼€å‘ç†å¿µæ·±åˆ»å½±å“äº†ç°ä»£ Vue å¼€å‘ç”Ÿæ€ã€‚</p>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼–ç å®è·µä¸å·¥å…·é“¾</h3>
<h4 data-id="heading-2">ä»£ç ç»„ç»‡åŸåˆ™</h4>
<p><strong>å•ä¸€èŒè´£åŸåˆ™</strong></p>
<p>ä¿æŒæ–‡ä»¶å’Œå‡½æ•°ä¸“æ³¨äºå•ä¸€èŒè´£ã€‚å½“æ–‡ä»¶è¶…è¿‡ 200-300 è¡Œæ—¶ï¼Œè€ƒè™‘æ‹†åˆ†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âŒ é¿å…ï¼šä¸€ä¸ªæ–‡ä»¶åŒ…å«æ‰€æœ‰é€»è¾‘</span>
<span class="hljs-comment">// UserManager.ts (800 lines)</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManager</span> {
  <span class="hljs-title function_">validateUser</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* 50 lines */</span> }
  <span class="hljs-title function_">fetchUserData</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* 100 lines */</span> }
  <span class="hljs-title function_">updateUserProfile</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* 150 lines */</span> }
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// âœ… æ¨èï¼šæŒ‰èŒè´£æ‹†åˆ†</span>
<span class="hljs-comment">// validation.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateUser</span>(<span class="hljs-params">user: User</span>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// api.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUserData</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// profile.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateUserProfile</span>(<span class="hljs-params">data: ProfileData</span>) { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p><strong>ç±»å‹ä¸å¸¸é‡åˆ†ç¦»</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// types.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">role</span>: <span class="hljs-title class_">UserRole</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">UserRole</span> = <span class="hljs-string">'admin'</span> | <span class="hljs-string">'user'</span> | <span class="hljs-string">'guest'</span>

<span class="hljs-comment">// constants.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DEFAULT_PAGE_SIZE</span> = <span class="hljs-number">20</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_RETRIES</span> = <span class="hljs-number">3</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">API_ENDPOINTS</span> = {
  <span class="hljs-attr">users</span>: <span class="hljs-string">'/api/users'</span>,
  <span class="hljs-attr">posts</span>: <span class="hljs-string">'/api/posts'</span>,
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>

<span class="hljs-comment">// user-service.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">User</span>, <span class="hljs-title class_">UserRole</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./types'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">API_ENDPOINTS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./constants'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUsers</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span>[]&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-variable constant_">API_ENDPOINTS</span>.<span class="hljs-property">users</span>)
  <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>()
}
</code></pre>
<h4 data-id="heading-3">è¿è¡Œæ—¶ç¯å¢ƒæ ‡æ³¨</h4>
<p>ç¼–å†™åŒæ„ä»£ç æ—¶ï¼Œä¸ºç¯å¢ƒç‰¹å®šçš„ä»£ç æ·»åŠ æ˜ç¡®çš„æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âœ… æ˜ç¡®æ ‡æ³¨ç¯å¢ƒä¾èµ–</span>
<span class="hljs-comment">// @env browser</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getWindowSize</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">width</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>,
  }
}

<span class="hljs-comment">// @env node</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readConfigFile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'./config.json'</span>, <span class="hljs-string">'utf-8'</span>)
}

<span class="hljs-comment">// âœ… åŒæ„ä»£ç æ— éœ€æ ‡æ³¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">formatDate</span>(<span class="hljs-params">date: <span class="hljs-built_in">Date</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">return</span> date.<span class="hljs-title function_">toISOString</span>()
}
</code></pre>
<h4 data-id="heading-4">TypeScript æœ€ä½³å®è·µ</h4>
<p><strong>æ˜¾å¼è¿”å›ç±»å‹</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âŒ é¿å…ï¼šéšå¼è¿”å›ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateTotal</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>)
}

<span class="hljs-comment">// âœ… æ¨èï¼šæ˜¾å¼è¿”å›ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateTotal</span>(<span class="hljs-params">items: Item[]</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>)
}

<span class="hljs-comment">// âœ… å¤æ‚ç±»å‹æå–ä¸ºç±»å‹åˆ«å</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AsyncResult</span>&lt;T&gt; = <span class="hljs-title class_">Promise</span>&lt;{ <span class="hljs-attr">data</span>: T; <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> } | { <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>; <span class="hljs-attr">error</span>: <span class="hljs-title class_">Error</span> }&gt;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> fetchData&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">AsyncResult</span>&lt;T&gt; {
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>é¿å…å¤æ‚å†…è”ç±»å‹</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âŒ é¿å…ï¼šå¤æ‚å†…è”ç±»å‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processUsers</span>(<span class="hljs-params">
  users: <span class="hljs-built_in">Array</span>&lt;{
    id: <span class="hljs-built_in">string</span>
    profile: {
      name: <span class="hljs-built_in">string</span>
      email: <span class="hljs-built_in">string</span>
      settings: {
        theme: <span class="hljs-string">'light'</span> | <span class="hljs-string">'dark'</span>
        notifications: <span class="hljs-built_in">boolean</span>
      }
    }
  }&gt;
</span>) {
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// âœ… æ¨èï¼šæå–ç±»å‹å®šä¹‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserSettings</span> {
  <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span> | <span class="hljs-string">'dark'</span>
  <span class="hljs-attr">notifications</span>: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserProfile</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">settings</span>: <span class="hljs-title class_">UserSettings</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">profile</span>: <span class="hljs-title class_">UserProfile</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processUsers</span>(<span class="hljs-params">users: User[]</span>) {
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-5">æ³¨é‡Šå“²å­¦</h4>
<p><strong>è§£é‡Š"ä¸ºä»€ä¹ˆ"è€Œé"æ€ä¹ˆåš"</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âŒ é¿å…ï¼šæ— æ„ä¹‰çš„æ³¨é‡Š</span>
<span class="hljs-comment">// å¾ªç¯éå†ç”¨æˆ·æ•°ç»„</span>
users.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> {
  <span class="hljs-comment">// æ‰“å°ç”¨æˆ·å</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">name</span>)
})

<span class="hljs-comment">// âœ… æ¨èï¼šè§£é‡Šä¸ºä»€ä¹ˆè¿™æ ·åš</span>
<span class="hljs-comment">// ä½¿ç”¨ setTimeout 0 å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿ DOM æ›´æ–°å®Œæˆåå†è®¡ç®—é«˜åº¦</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> height = element.<span class="hljs-property">offsetHeight</span>
}, <span class="hljs-number">0</span>)

<span class="hljs-comment">// âœ… è§£é‡Šéç›´è§‚çš„ä¸šåŠ¡é€»è¾‘</span>
<span class="hljs-comment">// ä»·æ ¼è®¡ç®—éœ€è¦å…ˆæ‰£é™¤æŠ˜æ‰£ï¼Œå†åŠ ç¨è´¹ï¼Œé¡ºåºä¸èƒ½é¢ å€’</span>
<span class="hljs-comment">// å› ä¸ºç¨è´¹åŸºäºæŠ˜åä»·è®¡ç®—ï¼ˆç¬¦åˆå½“åœ°ç¨æ³•è¦æ±‚ï¼‰</span>
<span class="hljs-keyword">const</span> finalPrice = (price - discount) * (<span class="hljs-number">1</span> + taxRate)
</code></pre>
<h4 data-id="heading-6">æµ‹è¯•è§„èŒƒï¼ˆVitestï¼‰</h4>
<p><strong>æ–‡ä»¶ç»„ç»‡</strong></p>
<pre><code class="hljs language-bash" lang="bash">src/
  utils/
    format.ts          <span class="hljs-comment"># æºä»£ç </span>
    format.test.ts     <span class="hljs-comment"># æµ‹è¯•æ–‡ä»¶</span>
  components/
    Button.vue
    Button.test.ts
</code></pre>
<p><strong>æµ‹è¯•ç»“æ„</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// format.test.ts</span>
<span class="hljs-keyword">import</span> { describe, it, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest'</span>
<span class="hljs-keyword">import</span> { formatCurrency, formatDate } <span class="hljs-keyword">from</span> <span class="hljs-string">'./format'</span>

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'formatCurrency'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'should format USD correctly'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">formatCurrency</span>(<span class="hljs-number">1234.56</span>, <span class="hljs-string">'USD'</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'$1,234.56'</span>)
  })

  <span class="hljs-title function_">it</span>(<span class="hljs-string">'should handle zero'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">formatCurrency</span>(<span class="hljs-number">0</span>, <span class="hljs-string">'USD'</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'$0.00'</span>)
  })

  <span class="hljs-title function_">it</span>(<span class="hljs-string">'should round to 2 decimal places'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">formatCurrency</span>(<span class="hljs-number">1.234</span>, <span class="hljs-string">'USD'</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'$1.23'</span>)
  })
})

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'formatDate'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'should match snapshot'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-string">'2024-01-15T10:30:00Z'</span>)
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">formatDate</span>(date)).<span class="hljs-title function_">toMatchSnapshot</span>()
  })
})
</code></pre>
<h4 data-id="heading-7">å·¥å…·é“¾é€ŸæŸ¥</h4>
<h5 data-id="heading-8">@antfu/ni - é€šç”¨åŒ…ç®¡ç†å™¨å‘½ä»¤</h5>






















































<table><thead><tr><th>å‘½ä»¤</th><th>npm</th><th>yarn</th><th>pnpm</th><th>bun</th></tr></thead><tbody><tr><td><code>ni</code></td><td><code>npm install</code></td><td><code>yarn install</code></td><td><code>pnpm install</code></td><td><code>bun install</code></td></tr><tr><td><code>nr dev</code></td><td><code>npm run dev</code></td><td><code>yarn run dev</code></td><td><code>pnpm run dev</code></td><td><code>bun run dev</code></td></tr><tr><td><code>nu</code></td><td><code>npm update</code></td><td><code>yarn upgrade</code></td><td><code>pnpm update</code></td><td><code>bun update</code></td></tr><tr><td><code>nun lodash</code></td><td><code>npm uninstall lodash</code></td><td><code>yarn remove lodash</code></td><td><code>pnpm remove lodash</code></td><td><code>bun remove lodash</code></td></tr><tr><td><code>nci</code></td><td><code>npm ci</code></td><td><code>yarn install --frozen-lockfile</code></td><td><code>pnpm install --frozen-lockfile</code></td><td><code>bun install --frozen-lockfile</code></td></tr><tr><td><code>nlx vitest</code></td><td><code>npx vitest</code></td><td><code>yarn dlx vitest</code></td><td><code>pnpm dlx vitest</code></td><td><code>bunx vitest</code></td></tr></tbody></table>
<h5 data-id="heading-9">TypeScript é…ç½®æ ‡å‡†</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bundler"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lib"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"DOM"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"DOM.Iterable"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"jsx"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"preserve"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"skipLibCheck"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"resolveJsonModule"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"esModuleInterop"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"isolatedModules"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"noUncheckedIndexedAccess"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"~/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./src/*"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®é…ç½®è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>moduleResolution: "bundler"</code> - é€‚é… Vite/Rollup ç­‰ç°ä»£æ‰“åŒ…å·¥å…·</li>
<li><code>noUncheckedIndexedAccess: true</code> - ç´¢å¼•è®¿é—®è¿”å› <code>T | undefined</code>ï¼Œæ›´å®‰å…¨</li>
<li><code>strict: true</code> - å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥</li>
</ul>
<h5 data-id="heading-10">ESLint é…ç½®</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…</span>
pnpm add -D @antfu/eslint-config eslint

<span class="hljs-comment"># è¿è¡Œ</span>
pnpm run lint --fix
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// eslint.config.js</span>
<span class="hljs-keyword">import</span> antfu <span class="hljs-keyword">from</span> <span class="hljs-string">'@antfu/eslint-config'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">antfu</span>({
  <span class="hljs-attr">vue</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">typescript</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">formatters</span>: {
    <span class="hljs-attr">css</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">html</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">markdown</span>: <span class="hljs-literal">true</span>,
  },
})
</code></pre>
<h5 data-id="heading-11">Git Hooks é…ç½®</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…</span>
pnpm add -D simple-git-hooks lint-staged
</code></pre>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"simple-git-hooks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"pre-commit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm lint-staged"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"lint-staged"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"*.{js,ts,vue}"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint --fix"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-12">pnpm Catalogs æœ€ä½³å®è·µ</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># pnpm-workspace.yaml</span>
<span class="hljs-attr">catalogs:</span>
  <span class="hljs-comment"># ç”Ÿäº§ä¾èµ–</span>
  <span class="hljs-attr">prod:</span>
    <span class="hljs-attr">vue:</span> <span class="hljs-string">^3.5.0</span>
    <span class="hljs-attr">pinia:</span> <span class="hljs-string">^2.2.0</span>
  
  <span class="hljs-comment"># å†…è”ä¾èµ–ï¼ˆä¼šè¢«æ‰“åŒ…ï¼‰</span>
  <span class="hljs-attr">inlined:</span>
    <span class="hljs-attr">lodash-es:</span> <span class="hljs-string">^4.17.21</span>
  
  <span class="hljs-comment"># å¼€å‘ä¾èµ–</span>
  <span class="hljs-attr">dev:</span>
    <span class="hljs-attr">vitest:</span> <span class="hljs-string">^2.0.0</span>
    <span class="hljs-attr">typescript:</span> <span class="hljs-string">^5.6.0</span>
  
  <span class="hljs-comment"># å‰ç«¯ç‰¹å®šä¾èµ–</span>
  <span class="hljs-attr">frontend:</span>
    <span class="hljs-attr">unocss:</span> <span class="hljs-string">^0.63.0</span>
</code></pre>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"catalog:prod"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lodash-es"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"catalog:inlined"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vitest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"catalog:dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"unocss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"catalog:frontend"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-13">ç¬¬äºŒéƒ¨åˆ†ï¼šVue 3 æ ¸å¿ƒè§„èŒƒ</h3>
<blockquote>
<p>åŸºäº Vue 3.5ï¼Œä¼˜å…ˆä½¿ç”¨ TypeScript å’Œ <code>&lt;script setup&gt;</code></p>
</blockquote>
<h4 data-id="heading-14">åå¥½è®¾å®š</h4>



































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>è¯­è¨€é€‰æ‹©</td><td>TypeScript</td><td>ç±»å‹å®‰å…¨ã€æ›´å¥½çš„ IDE æ”¯æŒ</td></tr><tr><td>è„šæœ¬æ ¼å¼</td><td><code>&lt;script setup lang="ts"&gt;</code></td><td>æ›´ç®€æ´çš„è¯­æ³•ã€æ›´å¥½çš„æ€§èƒ½</td></tr><tr><td>å“åº”å¼é€‰æ‹©</td><td><code>shallowRef</code> &gt; <code>ref</code></td><td>å¤§å¤šæ•°åœºæ™¯è¶³å¤Ÿç”¨ï¼Œæ€§èƒ½æ›´å¥½</td></tr><tr><td>API é£æ ¼</td><td>Composition API</td><td>æ›´å¥½çš„é€»è¾‘å¤ç”¨å’Œç±»å‹æ¨å¯¼</td></tr><tr><td>Props è§£æ„</td><td>âŒ ä¸æ¨è</td><td>ä¼šä¸¢å¤±å“åº”å¼</td></tr></tbody></table>
<h4 data-id="heading-15">æ ‡å‡†ç»„ä»¶æ¨¡æ¿</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { computed, ref, watch, onMounted } from 'vue'
import type { ComponentPublicInstance } from 'vue'

// Props å®šä¹‰
interface Props {
  title: string
  count?: number
  disabled?: boolean
}

const props = withDefaults(defineProps&lt;Props&gt;(), {
  count: 0,
  disabled: false,
})

// Emits å®šä¹‰
interface Emits {
  update: [value: number]
  submit: [data: { name: string }]
}

const emit = defineEmits&lt;Emits&gt;()

// Model åŒå‘ç»‘å®š
const modelValue = defineModel&lt;string&gt;({ required: true })

// å“åº”å¼çŠ¶æ€
const isLoading = ref(false)
const items = ref&lt;Item[]&gt;([])

// è®¡ç®—å±æ€§
const displayTitle = computed(() =&gt; {
  return props.disabled ? `${props.title} (å·²ç¦ç”¨)` : props.title
})

// ä¾¦å¬å™¨
watch(() =&gt; props.count, (newVal, oldVal) =&gt; {
  console.log(`Count changed from ${oldVal} to ${newVal}`)
})

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() =&gt; {
  console.log('Component mounted')
})

// æ–¹æ³•
function handleClick() {
  emit('update', props.count + 1)
}

// æš´éœ²ç»™çˆ¶ç»„ä»¶ï¼ˆdefineExposeï¼‰
defineExpose({
  focus: () =&gt; {
    // æš´éœ²çš„æ–¹æ³•
  },
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;{{ displayTitle }}&lt;/h1&gt;
    &lt;button @click="handleClick" :disabled="disabled"&gt;
      Count: {{ count }}
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
/* scoped æ ·å¼ */
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-16">å…³é”®å¯¼å…¥é€ŸæŸ¥</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ ¸å¿ƒå“åº”å¼ API</span>
<span class="hljs-keyword">import</span> {
  ref,           <span class="hljs-comment">// æ·±å±‚å“åº”å¼</span>
  shallowRef,    <span class="hljs-comment">// æµ…å±‚å“åº”å¼ï¼ˆæ¨èï¼‰</span>
  reactive,      <span class="hljs-comment">// æ·±å±‚å“åº”å¼å¯¹è±¡</span>
  shallowReactive, <span class="hljs-comment">// æµ…å±‚å“åº”å¼å¯¹è±¡</span>
  <span class="hljs-keyword">readonly</span>,      <span class="hljs-comment">// åªè¯»ä»£ç†</span>
  computed,      <span class="hljs-comment">// è®¡ç®—å±æ€§</span>
  watch,         <span class="hljs-comment">// ä¾¦å¬å™¨</span>
  watchEffect,   <span class="hljs-comment">// å‰¯ä½œç”¨ä¾¦å¬å™¨</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸé’©å­</span>
<span class="hljs-keyword">import</span> {
  onMounted,
  onUpdated,
  onUnmounted,
  onBeforeMount,
  onBeforeUpdate,
  onBeforeUnmount,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// ç»„ä»¶é€šä¿¡</span>
<span class="hljs-keyword">import</span> {
  defineProps,
  defineEmits,
  defineModel,
  defineExpose,
  defineSlots,
  provide,
  inject,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">import</span> {
  nextTick,      <span class="hljs-comment">// ç­‰å¾… DOM æ›´æ–°</span>
  toRef,         <span class="hljs-comment">// è½¬æ¢ä¸º ref</span>
  toRefs,        <span class="hljs-comment">// è§£æ„ä¿æŒå“åº”å¼</span>
  unref,         <span class="hljs-comment">// è§£åŒ… ref</span>
  isRef,         <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ ref</span>
  markRaw,       <span class="hljs-comment">// æ ‡è®°ä¸ºéå“åº”å¼</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// ç±»å‹å·¥å…·</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">Ref</span>,
  <span class="hljs-title class_">ComputedRef</span>,
  <span class="hljs-title class_">ComponentPublicInstance</span>,
  <span class="hljs-title class_">PropType</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
</code></pre>
<h4 data-id="heading-17">ref vs shallowRef æ€§èƒ½å¯¹æ¯”</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ref - æ·±å±‚å“åº”å¼ï¼ˆé€’å½’ä»£ç†æ‰€æœ‰å±‚çº§ï¼‰</span>
<span class="hljs-keyword">const</span> deepState = <span class="hljs-title function_">ref</span>({
  <span class="hljs-attr">user</span>: {
    <span class="hljs-attr">profile</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span>,
      <span class="hljs-attr">settings</span>: {
        <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span>,
      },
    },
  },
})

<span class="hljs-comment">// ä»»ä½•å±‚çº§çš„ä¿®æ”¹éƒ½ä¼šè§¦å‘å“åº”</span>
deepState.<span class="hljs-property">value</span>.<span class="hljs-property">user</span>.<span class="hljs-property">profile</span>.<span class="hljs-property">settings</span>.<span class="hljs-property">theme</span> = <span class="hljs-string">'light'</span> <span class="hljs-comment">// âœ… å“åº”å¼</span>

<span class="hljs-comment">// shallowRef - æµ…å±‚å“åº”å¼ï¼ˆåªä»£ç†ç¬¬ä¸€å±‚ï¼‰</span>
<span class="hljs-keyword">const</span> shallowState = <span class="hljs-title function_">shallowRef</span>({
  <span class="hljs-attr">user</span>: {
    <span class="hljs-attr">profile</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span>,
      <span class="hljs-attr">settings</span>: {
        <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span>,
      },
    },
  },
})

<span class="hljs-comment">// åªæœ‰æ•´ä½“æ›¿æ¢æ‰ä¼šè§¦å‘å“åº”</span>
shallowState.<span class="hljs-property">value</span>.<span class="hljs-property">user</span>.<span class="hljs-property">profile</span>.<span class="hljs-property">settings</span>.<span class="hljs-property">theme</span> = <span class="hljs-string">'light'</span> <span class="hljs-comment">// âŒ ä¸ä¼šè§¦å‘</span>
shallowState.<span class="hljs-property">value</span> = { ...shallowState.<span class="hljs-property">value</span> } <span class="hljs-comment">// âœ… è§¦å‘å“åº”</span>

<span class="hljs-comment">// æ€§èƒ½å»ºè®®ï¼šå¤§éƒ¨åˆ†åœºæ™¯ä½¿ç”¨ shallowRef è¶³å¤Ÿ</span>
</code></pre>
<hr/>
<h3 data-id="heading-18">ç¬¬ä¸‰éƒ¨åˆ†ï¼šVue 3 æœ€ä½³å®è·µä¸å¸¸è§é™·é˜±</h3>
<h4 data-id="heading-19">å“åº”å¼ç³»ç»Ÿ</h4>

































<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>ref vs reactive å¦‚ä½•é€‰æ‹©ï¼Ÿ</td><td>ä¼˜å…ˆä½¿ç”¨ <code>ref</code>ã€‚<code>ref</code> å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹ï¼Œè€Œ <code>reactive</code> åªèƒ½ç”¨äºå¯¹è±¡ã€‚<code>ref</code> åœ¨é‡æ–°èµ‹å€¼æ—¶ä¿æŒå“åº”æ€§ï¼Œ<code>reactive</code> ä¸è¡Œã€‚</td></tr><tr><td>ä»€ä¹ˆæ—¶å€™ç”¨ shallowRefï¼Ÿ</td><td>å­˜å‚¨å¤§å‹æ•°æ®ç»“æ„ï¼ˆå¦‚é•¿åˆ—è¡¨ã€å¤æ‚åµŒå¥—å¯¹è±¡ï¼‰æ—¶ï¼Œç”¨ <code>shallowRef</code> é¿å…æ·±å±‚ä»£ç†çš„æ€§èƒ½å¼€é”€ã€‚æ›´æ–°æ—¶éœ€è¦æ•´ä½“æ›¿æ¢å¯¹è±¡ã€‚</td></tr><tr><td>å¦‚ä½•é˜»æ­¢å¯¹è±¡å˜æˆå“åº”å¼ï¼Ÿ</td><td>ä½¿ç”¨ <code>markRaw()</code>ã€‚ä¾‹å¦‚å­˜å‚¨ç¬¬ä¸‰æ–¹åº“å®ä¾‹ï¼ˆChart.jsã€Monaco Editorï¼‰æ—¶ï¼Œé¿å…ä¸å¿…è¦çš„ä»£ç†ã€‚</td></tr><tr><td>å¤šæ¬¡ä¿®æ”¹ ref ä¼šè§¦å‘å¤šæ¬¡æ¸²æŸ“å—ï¼Ÿ</td><td>ä¸ä¼šã€‚Vue ä¼šå°†åŒä¸€ tick å†…çš„æ›´æ–°æ‰¹é‡å¤„ç†ã€‚å¦‚éœ€ç«‹å³çœ‹åˆ° DOM å˜åŒ–ï¼Œä½¿ç”¨ <code>await nextTick()</code>ã€‚</td></tr><tr><td>ref è§£åŒ…è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>åœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…ï¼ˆ<code>{{ count }}</code>ï¼‰ã€‚åœ¨ <code>reactive</code> å¯¹è±¡ä¸­è‡ªåŠ¨è§£åŒ…ï¼ˆ<code>state.count</code>ï¼‰ã€‚åœ¨æ•°ç»„å’Œ Map/Set ä¸­ä¸è§£åŒ…ï¼ˆéœ€è¦ <code>.value</code>ï¼‰ã€‚</td></tr><tr><td>è§£æ„ props ä¼šä¸¢å¤±å“åº”æ€§å—ï¼Ÿ</td><td>æ˜¯çš„ã€‚ä½¿ç”¨ <code>toRefs(props)</code> æˆ– <code>toRef(props, 'key')</code> ä¿æŒå“åº”æ€§ï¼Œæˆ–åœ¨ computed/watch ä¸­è®¿é—® <code>props.xxx</code>ã€‚</td></tr></tbody></table>
<h4 data-id="heading-20">è®¡ç®—å±æ€§</h4>





























<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>è®¡ç®—å±æ€§å¯ä»¥æœ‰å‰¯ä½œç”¨å—ï¼Ÿ</td><td>ä¸åº”è¯¥ã€‚è®¡ç®—å±æ€§åº”è¯¥æ˜¯çº¯å‡½æ•°ï¼Œåªåšè®¡ç®—å’Œè¿”å›å€¼ã€‚å‰¯ä½œç”¨åº”è¯¥æ”¾åœ¨ <code>watch</code> æˆ– <code>watchEffect</code> ä¸­ã€‚</td></tr><tr><td>ä¸ºä»€ä¹ˆè®¡ç®—å±æ€§æ˜¯åªè¯»çš„ï¼Ÿ</td><td>é»˜è®¤åªè¯»ï¼Œä½†å¯ä»¥æä¾› setterã€‚æ¨èåªè¯»è®¾è®¡ï¼Œä¿®æ”¹åº”é€šè¿‡æºæ•°æ®ã€‚</td></tr><tr><td>è®¡ç®—å±æ€§ä»€ä¹ˆæ—¶å€™é‡æ–°è®¡ç®—ï¼Ÿ</td><td>åªæœ‰å½“ä¾èµ–çš„å“åº”å¼æ•°æ®å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—ï¼ˆæ‡’æ‰§è¡Œ + ç¼“å­˜ï¼‰ã€‚è¿™æ˜¯ç›¸æ¯” <code>method</code> çš„ä¸»è¦ä¼˜åŠ¿ã€‚</td></tr><tr><td>è®¡ç®—å±æ€§çš„æ¡ä»¶ä¾èµ–å¦‚ä½•å·¥ä½œï¼Ÿ</td><td>åªè¿½è¸ªå½“å‰æ‰§è¡Œåˆ†æ”¯çš„ä¾èµ–ã€‚<code>if (flag) return a</code> æ—¶åªè¿½è¸ª <code>flag</code> å’Œ <code>a</code>ï¼Œä¸è¿½è¸ª <code>else</code> åˆ†æ”¯ã€‚</td></tr><tr><td>è®¡ç®—å±æ€§å†…ä½¿ç”¨ array.map æœ‰æ€§èƒ½é—®é¢˜å—ï¼Ÿ</td><td>æœ‰ã€‚æ¯æ¬¡é‡æ–°è®¡ç®—éƒ½ä¼šåˆ›å»ºæ–°æ•°ç»„ã€‚è€ƒè™‘ä½¿ç”¨ <code>shallowRef</code> å­˜å‚¨æ˜ å°„ç»“æœï¼Œæˆ–åœ¨ <code>watch</code> ä¸­æ‰‹åŠ¨æ›´æ–°ã€‚</td></tr></tbody></table>
<h4 data-id="heading-21">ä¾¦å¬å™¨</h4>

































<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>watch çš„ getter å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ</td><td><code>watch(() =&gt; obj.count, ...)</code> ä¸­çš„ç®­å¤´å‡½æ•°ã€‚æ¨èç”¨ getter è€Œéç›´æ¥ä¼ å¯¹è±¡ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶ä¾èµ–ã€‚</td></tr><tr><td>deep: true æœ‰æ€§èƒ½é—®é¢˜å—ï¼Ÿ</td><td>æœ‰ã€‚æ·±åº¦ä¾¦å¬éœ€è¦éå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚åªåœ¨å¿…è¦æ—¶ä½¿ç”¨ï¼Œæˆ–ç”¨ getter å‡½æ•°ç²¾ç¡®æŒ‡å®šä¾èµ–ã€‚</td></tr><tr><td>immediate: true çš„æ‰§è¡Œæ—¶æœºæ˜¯ä»€ä¹ˆï¼Ÿ</td><td>ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œæ­¤æ—¶ DOM å¯èƒ½æœªæŒ‚è½½ã€‚éœ€è¦è®¿é—® DOM æ—¶æ³¨æ„åˆ¤æ–­ã€‚</td></tr><tr><td>flush é€‰é¡¹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</td><td><code>pre</code>ï¼ˆé»˜è®¤ï¼‰ï¼šDOM æ›´æ–°å‰æ‰§è¡Œã€‚<code>post</code>ï¼šDOM æ›´æ–°åæ‰§è¡Œã€‚<code>sync</code>ï¼šåŒæ­¥æ‰§è¡Œï¼ˆé¿å…ä½¿ç”¨ï¼‰ã€‚</td></tr><tr><td>å¦‚ä½•åœ¨ä¾¦å¬å™¨ä¸­è®¿é—®æ—§å€¼ï¼Ÿ</td><td><code>watch(source, (newVal, oldVal) =&gt; {})</code>ã€‚æ³¨æ„å¯¹è±¡ç±»å‹çš„ <code>oldVal</code> å’Œ <code>newVal</code> å¯èƒ½æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨ã€‚</td></tr><tr><td>watch vs watchEffect å¦‚ä½•é€‰æ‹©ï¼Ÿ</td><td><code>watchEffect</code>ï¼šè‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼Œç®€æ´ã€‚<code>watch</code>ï¼šæ˜¾å¼æŒ‡å®šä¾¦å¬æºï¼Œå¯è®¿é—®æ—§å€¼ï¼Œæ›´ç²¾ç¡®ã€‚</td></tr></tbody></table>
<h4 data-id="heading-22">ç»„ä»¶é€šä¿¡</h4>





























<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>å¯ä»¥ä¿®æ”¹ props å—ï¼Ÿ</td><td>ä¸å¯ä»¥ã€‚Props æ˜¯å•å‘æ•°æ®æµï¼Œåªè¯»ã€‚éœ€è¦ä¿®æ”¹æ—¶ï¼Œemit äº‹ä»¶æˆ–ä½¿ç”¨ <code>defineModel</code>ã€‚</td></tr><tr><td>è‡ªå®šä¹‰äº‹ä»¶ä¼šå†’æ³¡å—ï¼Ÿ</td><td>ä¸ä¼šã€‚Vue çš„è‡ªå®šä¹‰äº‹ä»¶ä¸åƒåŸç”Ÿ DOM äº‹ä»¶é‚£æ ·å†’æ³¡ï¼Œåªè§¦å‘ç›´æ¥çˆ¶ç»„ä»¶çš„ç›‘å¬å™¨ã€‚</td></tr><tr><td>ç»„ä»¶ååº”è¯¥ç”¨ä»€ä¹ˆæ ¼å¼ï¼Ÿ</td><td>PascalCaseï¼ˆ<code>MyComponent.vue</code>ï¼‰ã€‚åœ¨æ¨¡æ¿ä¸­å¯ä»¥ç”¨ <code>&lt;MyComponent&gt;</code> æˆ– <code>&lt;my-component&gt;</code>ï¼Œæ¨èå‰è€…ã€‚</td></tr><tr><td>defineExpose ä½•æ—¶ä½¿ç”¨ï¼Ÿ</td><td>å½“éœ€è¦çˆ¶ç»„ä»¶é€šè¿‡ ref è°ƒç”¨å­ç»„ä»¶æ–¹æ³•æ—¶ã€‚é»˜è®¤ <code>&lt;script setup&gt;</code> ä¸æš´éœ²ä»»ä½•å†…å®¹ã€‚</td></tr><tr><td>å¦‚ä½•è·å–ç»„ä»¶å®ä¾‹çš„ç±»å‹ï¼Ÿ</td><td><code>InstanceType&lt;typeof MyComponent&gt;</code>ï¼Œé…åˆ <code>ref&lt;InstanceType&lt;typeof MyComponent&gt;&gt;()</code>ã€‚</td></tr></tbody></table>
<h4 data-id="heading-23">Props ä¸ Emits</h4>





























<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>Boolean props çš„è½¬æ¢è§„åˆ™ï¼Ÿ</td><td><code>&lt;MyComp disabled&gt;</code> ç­‰ä»·äº <code>:disabled="true"</code>ã€‚<code>&lt;MyComp&gt;</code> åˆ™æ˜¯ <code>undefined</code>ï¼ˆé™¤éæœ‰é»˜è®¤å€¼ï¼‰ã€‚</td></tr><tr><td>è§£æ„ props ä¼šä¸¢å¤±å“åº”æ€§å—ï¼Ÿ</td><td>æ˜¯çš„ã€‚<code>const { title } = defineProps()</code> ä¼šä¸¢å¤±å“åº”æ€§ã€‚ä½¿ç”¨ <code>toRefs</code> æˆ–ç›´æ¥è®¿é—® <code>props.title</code>ã€‚</td></tr><tr><td>props å‘½åçº¦å®šæ˜¯ä»€ä¹ˆï¼Ÿ</td><td>JS ä¸­ç”¨ camelCaseï¼ŒHTML ä¸­ç”¨ kebab-caseã€‚<code>defineProps&lt;{ userName: string }&gt;()</code> â†’ <code>&lt;Comp user-name="John"&gt;</code>ã€‚</td></tr><tr><td>emit äº‹ä»¶å‘½åçº¦å®šï¼Ÿ</td><td>JS ä¸­ç”¨ camelCaseï¼ŒHTML ä¸­ç”¨ kebab-caseã€‚<code>emit('updateValue')</code> â†’ <code>@update-value="handler"</code>ã€‚</td></tr><tr><td>defineModel çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>ç®€åŒ– <code>v-model</code> å®ç°ï¼Œè‡ªåŠ¨ç”Ÿæˆ prop å’Œ emitã€‚æ”¯æŒä¿®é¥°ç¬¦ï¼ˆ<code>.trim</code>ã€<code>.number</code> ç­‰ï¼‰ã€‚</td></tr></tbody></table>
<h4 data-id="heading-24">æ¨¡æ¿è¯­æ³•</h4>





























<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>v-html å®‰å…¨å—ï¼Ÿ</td><td>ä¸å®‰å…¨ã€‚å¯èƒ½å¯¼è‡´ XSS æ”»å‡»ã€‚åªç”¨äºå¯ä¿¡å†…å®¹ï¼Œæˆ–ä½¿ç”¨ DOMPurify ç­‰åº“æ¸…ç†ã€‚</td></tr><tr><td>v-if å’Œ v-for èƒ½åŒæ—¶ç”¨å—ï¼Ÿ</td><td>Vue 3 ä¸­ <code>v-if</code> ä¼˜å…ˆçº§é«˜äº <code>v-for</code>ï¼Œä½†ä¸æ¨èåŒæ—¶ä½¿ç”¨ã€‚åº”è¯¥ç”¨ computed è¿‡æ»¤æˆ–åµŒå¥— templateã€‚</td></tr><tr><td>v-if vs v-show å¦‚ä½•é€‰æ‹©ï¼Ÿ</td><td><code>v-if</code>ï¼šæ¡ä»¶æ¸²æŸ“ï¼Œåˆ‡æ¢å¼€é”€é«˜ã€‚<code>v-show</code>ï¼šCSS åˆ‡æ¢ï¼Œåˆå§‹æ¸²æŸ“å¼€é”€é«˜ã€‚é¢‘ç¹åˆ‡æ¢ç”¨ <code>v-show</code>ã€‚</td></tr><tr><td>key çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>å¸®åŠ© Vue è¯†åˆ«èŠ‚ç‚¹ï¼Œä¼˜åŒ– diff ç®—æ³•ã€‚åˆ—è¡¨æ¸²æŸ“å¿…é¡»æä¾›å”¯ä¸€ keyï¼Œé¿å…ç”¨ indexã€‚</td></tr><tr><td>å¦‚ä½•ç»‘å®šå¤šä¸ªå±æ€§ï¼Ÿ</td><td><code>v-bind="attrs"</code> å¯ä»¥ä¸€æ¬¡æ€§ç»‘å®šå¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚ä¾‹å¦‚ <code>v-bind="{ id: 'foo', class: 'bar' }"</code>ã€‚</td></tr></tbody></table>
<h4 data-id="heading-25">è¡¨å•ä¸ v-model</h4>

























<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>defineModel çš„ä¿®é¥°ç¬¦å¦‚ä½•ä½¿ç”¨ï¼Ÿ</td><td>å†…ç½® <code>.trim</code>ã€<code>.number</code>ã€<code>.lazy</code>ã€‚è‡ªå®šä¹‰ä¿®é¥°ç¬¦é€šè¿‡ <code>defineModel</code> çš„ç¬¬äºŒä¸ªå‚æ•°å¤„ç†ã€‚</td></tr><tr><td>v-model åœ¨ç»„ä»¶ä¸Šçš„åŸç†ï¼Ÿ</td><td>è¯­æ³•ç³–ï¼š<code>:modelValue="value" @update:modelValue="value = $event"</code>ã€‚å¤šä¸ª v-modelï¼š<code>v-model:title</code>ã€‚</td></tr><tr><td>å¦‚ä½•åœ¨ v-model æ›´æ–°åè®¿é—® DOMï¼Ÿ</td><td>ä½¿ç”¨ <code>await nextTick()</code>ï¼Œå› ä¸º Vue å¼‚æ­¥æ›´æ–° DOMã€‚</td></tr><tr><td>textarea çš„ v-model å’Œæ’å€¼çš„åŒºåˆ«ï¼Ÿ</td><td><code>&lt;textarea v-model="text"&gt;</code> æ­£ç¡®ã€‚<code>&lt;textarea&gt;{{ text }}&lt;/textarea&gt;</code> ä¸ç”Ÿæ•ˆï¼Œtextarea ä¸æ”¯æŒæ’å€¼ã€‚</td></tr></tbody></table>
<h4 data-id="heading-26">äº‹ä»¶å¤„ç†ä¸ä¿®é¥°ç¬¦</h4>

























<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>.once ä¿®é¥°ç¬¦å¦‚ä½•å·¥ä½œï¼Ÿ</td><td>äº‹ä»¶åªè§¦å‘ä¸€æ¬¡åè‡ªåŠ¨ç§»é™¤ç›‘å¬å™¨ã€‚<code>@click.once="handler"</code>ã€‚</td></tr><tr><td>.exact ä¿®é¥°ç¬¦çš„ä½œç”¨ï¼Ÿ</td><td>ç²¾ç¡®åŒ¹é…ä¿®é¥°é”®ã€‚<code>@click.ctrl.exact</code> åªåœ¨æŒ‰ä¸‹ Ctrlï¼ˆæ— å…¶ä»–é”®ï¼‰æ—¶è§¦å‘ã€‚</td></tr><tr><td>.passive å’Œ .prevent å†²çªå—ï¼Ÿ</td><td>å†²çªã€‚<code>.passive</code> å‘Šè¯‰æµè§ˆå™¨ä¸è°ƒç”¨ <code>preventDefault()</code>ï¼Œä¸¤è€…ä¸èƒ½åŒæ—¶ä½¿ç”¨ã€‚</td></tr><tr><td>è‡ªå®šä¹‰äº‹ä»¶å¯ä»¥ç”¨ä¿®é¥°ç¬¦å—ï¼Ÿ</td><td>å¯ä»¥ï¼Œä½†éœ€è¦åœ¨å­ç»„ä»¶ä¸­é€šè¿‡ <code>defineEmits</code> çš„ç¬¬äºŒä¸ªå‚æ•°æ‰‹åŠ¨å®ç°éªŒè¯é€»è¾‘ã€‚</td></tr></tbody></table>
<h4 data-id="heading-27">ç”Ÿå‘½å‘¨æœŸ</h4>





















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>ç”Ÿå‘½å‘¨æœŸé’©å­å¿…é¡»åŒæ­¥æ³¨å†Œå—ï¼Ÿ</td><td>æ˜¯çš„ã€‚å¿…é¡»åœ¨ <code>setup</code> æˆ– <code>&lt;script setup&gt;</code> çš„åŒæ­¥ä»£ç ä¸­è°ƒç”¨ï¼Œä¸èƒ½åœ¨ <code>setTimeout</code> æˆ– <code>async</code> å‡½æ•°ä¸­ã€‚</td></tr><tr><td>onUpdated é’©å­æ€§èƒ½å¦‚ä½•ï¼Ÿ</td><td>ä¼šåœ¨ä»»ä½•å“åº”å¼æ•°æ®å˜åŒ–å¯¼è‡´çš„é‡æ–°æ¸²æŸ“åè°ƒç”¨ï¼Œå¯èƒ½é¢‘ç¹è§¦å‘ã€‚è°¨æ…ä½¿ç”¨ï¼Œè€ƒè™‘ç”¨ <code>watch</code> æ›¿ä»£ã€‚</td></tr><tr><td>å¦‚ä½•åœ¨ç»„ä»¶å¤–éƒ¨æ³¨å†Œç”Ÿå‘½å‘¨æœŸï¼Ÿ</td><td>ä½¿ç”¨ <code>effectScope</code> åˆ›å»ºä½œç”¨åŸŸï¼Œåœ¨å…¶ä¸­æ³¨å†Œé’©å­ã€‚</td></tr></tbody></table>
<h4 data-id="heading-28">æ’æ§½</h4>

























<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>æ’æ§½çš„ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ</td><td>é»˜è®¤æ’æ§½åªèƒ½è®¿é—®çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚ä½œç”¨åŸŸæ’æ§½é€šè¿‡ <code>v-slot="slotProps"</code> æ¥æ”¶å­ç»„ä»¶ä¼ é€’çš„æ•°æ®ã€‚</td></tr><tr><td>defineSlots çš„ä½œç”¨ï¼Ÿ</td><td>ä»…ç”¨äºç±»å‹å®šä¹‰ï¼Œå¸®åŠ© TypeScript æ¨å¯¼æ’æ§½çš„ props ç±»å‹ã€‚ä¸å½±å“è¿è¡Œæ—¶ã€‚</td></tr><tr><td>æ’æ§½çš„ fallback content æ˜¯ä»€ä¹ˆï¼Ÿ</td><td><code>&lt;slot&gt;é»˜è®¤å†…å®¹&lt;/slot&gt;</code> ä¸­çš„é»˜è®¤å†…å®¹ï¼Œå½“çˆ¶ç»„ä»¶ä¸æä¾›æ’æ§½å†…å®¹æ—¶æ˜¾ç¤ºã€‚</td></tr><tr><td>åŠ¨æ€æ’æ§½åå¦‚ä½•ä½¿ç”¨ï¼Ÿ</td><td><code>v-slot:[dynamicSlotName]</code> æˆ– <code>#[dynamicSlotName]</code>ã€‚</td></tr></tbody></table>
<h4 data-id="heading-29">Provide / Inject</h4>





















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>åº”è¯¥ç”¨ä»€ä¹ˆä½œä¸º injection keyï¼Ÿ</td><td>ä½¿ç”¨ Symbol è€Œéå­—ç¬¦ä¸²ï¼Œé¿å…å‘½åå†²çªã€‚<code>export const userKey = Symbol('user')</code>ã€‚</td></tr><tr><td>æ³¨å…¥çš„æ•°æ®å¯ä»¥ä¿®æ”¹å—ï¼Ÿ</td><td>å¯ä»¥ï¼Œä½†å»ºè®® mutations é›†ä¸­åœ¨ provider ç»„ä»¶ï¼Œé€šè¿‡æä¾›ä¿®æ”¹æ–¹æ³•è€Œéç›´æ¥æš´éœ²å“åº”å¼çŠ¶æ€ã€‚</td></tr><tr><td>å¦‚ä½•ä¸º inject æä¾›ç±»å‹ï¼Ÿ</td><td><code>const user = inject&lt;User&gt;(userKey)</code> æˆ–åœ¨å®šä¹‰ key æ—¶æŒ‡å®š <code>InjectionKey&lt;User&gt;</code>ã€‚</td></tr></tbody></table>
<h4 data-id="heading-30">ç»„åˆå¼å‡½æ•°</h4>

























<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>å‘½åçº¦å®šæ˜¯ä»€ä¹ˆï¼Ÿ</td><td>ä»¥ <code>use</code> å¼€å¤´ï¼ŒcamelCaseã€‚ä¾‹å¦‚ <code>useMouse</code>ã€<code>useFetch</code>ã€‚</td></tr><tr><td>è¿”å›å€¼åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>è¿”å›åŒ…å«å“åº”å¼çŠ¶æ€å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚ä½¿ç”¨ <code>readonly()</code> ä¿æŠ¤å†…éƒ¨çŠ¶æ€ã€‚</td></tr><tr><td>ä½•æ—¶ä½¿ç”¨ options å¯¹è±¡æ¨¡å¼ï¼Ÿ</td><td>å‚æ•°è¶…è¿‡ 2 ä¸ªæ—¶æ¨èã€‚<code>useFetch(url, { method, headers, onSuccess })</code>ã€‚</td></tr><tr><td>ç»„åˆå¼å‡½æ•°å¯ä»¥åµŒå¥—è°ƒç”¨å—ï¼Ÿ</td><td>å¯ä»¥ã€‚ä¸€ä¸ªç»„åˆå¼å‡½æ•°å¯ä»¥è°ƒç”¨å…¶ä»–ç»„åˆå¼å‡½æ•°ã€‚</td></tr></tbody></table>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ç¤ºä¾‹ï¼šæ ‡å‡†ç»„åˆå¼å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMouse</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> y = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">event: MouseEvent</span>) {
    x.<span class="hljs-property">value</span> = event.<span class="hljs-property">clientX</span>
    y.<span class="hljs-property">value</span> = event.<span class="hljs-property">clientY</span>
  }

  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update))
  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update))

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">x</span>: <span class="hljs-title function_">readonly</span>(x),
    <span class="hljs-attr">y</span>: <span class="hljs-title function_">readonly</span>(y),
  }
}
</code></pre>
<h4 data-id="heading-31">Composition API</h4>





















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>ä¸ºä»€ä¹ˆç”¨ Composition API æ›¿ä»£ mixinï¼Ÿ</td><td>Mixin æœ‰å‘½åå†²çªã€æ¥æºä¸æ¸…æ™°ã€éš¾ä»¥é‡ç”¨ç­‰é—®é¢˜ã€‚Composition API é€šè¿‡å‡½æ•°ç»„åˆè§£å†³è¿™äº›é—®é¢˜ã€‚</td></tr><tr><td>Composition API å’Œ React Hooks æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</td><td>Vue çš„ setup åªæ‰§è¡Œä¸€æ¬¡ï¼Œä¸å—é—­åŒ…é™·é˜±å½±å“ã€‚React Hooks æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œï¼Œéœ€è¦ä¾èµ–æ•°ç»„ã€‚</td></tr><tr><td>ä½•æ—¶ä»ç„¶ä½¿ç”¨ Options APIï¼Ÿ</td><td>ç®€å•ç»„ä»¶ã€å›¢é˜Ÿä¸ç†Ÿæ‚‰ Composition APIã€ç»´æŠ¤è€ä»£ç æ—¶å¯ä»¥ä½¿ç”¨ Options APIã€‚</td></tr></tbody></table>
<h4 data-id="heading-32">è‡ªå®šä¹‰æŒ‡ä»¤</h4>





















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>å¿…é¡»æ¸…ç†å‰¯ä½œç”¨å—ï¼Ÿ</td><td>æ˜¯çš„ã€‚åœ¨ <code>unmounted</code> é’©å­ä¸­æ¸…ç†äº‹ä»¶ç›‘å¬å™¨ã€å®šæ—¶å™¨ç­‰ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</td></tr><tr><td>æŒ‡ä»¤å‘½åçº¦å®šï¼Ÿ</td><td>ä»¥ <code>v</code> å¼€å¤´ã€‚æ³¨å†Œæ—¶ç”¨ camelCaseï¼ˆ<code>vFocus</code>ï¼‰ï¼Œä½¿ç”¨æ—¶ç”¨ kebab-caseï¼ˆ<code>v-focus</code>ï¼‰ã€‚</td></tr><tr><td>å¯ä»¥åœ¨ç»„ä»¶ä¸Šä½¿ç”¨æŒ‡ä»¤å—ï¼Ÿ</td><td>å¯ä»¥ï¼Œä½†ä¸æ¨èã€‚æŒ‡ä»¤ä¼šåº”ç”¨åˆ°ç»„ä»¶çš„æ ¹å…ƒç´ ï¼Œå¤šæ ¹å…ƒç´ ç»„ä»¶ä¼šæŠ¥è­¦å‘Šã€‚</td></tr></tbody></table>
<h4 data-id="heading-33">è¿‡æ¸¡ä¸åŠ¨ç”»</h4>

























<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>Transition åªèƒ½åŒ…å«å•ä¸ªå­å…ƒç´ å—ï¼Ÿ</td><td>æ˜¯çš„ã€‚å¤šä¸ªå…ƒç´ éœ€è¦ç”¨ <code>v-if</code> / <code>v-else</code> æˆ– <code>TransitionGroup</code>ã€‚</td></tr><tr><td>ä¸ºä»€ä¹ˆåˆ—è¡¨é¡¹éœ€è¦ keyï¼Ÿ</td><td><code>TransitionGroup</code> ä½¿ç”¨ key è¿½è¸ªå…ƒç´ ç§»åŠ¨ï¼Œå®ç°å¹³æ»‘çš„ç§»åŠ¨åŠ¨ç”»ã€‚</td></tr><tr><td>mode å±æ€§çš„ä½œç”¨ï¼Ÿ</td><td><code>out-in</code>ï¼šæ—§å…ƒç´ å…ˆç¦»å¼€ï¼Œæ–°å…ƒç´ å†è¿›å…¥ã€‚<code>in-out</code>ï¼šæ–°å…ƒç´ å…ˆè¿›å…¥ï¼Œæ—§å…ƒç´ å†ç¦»å¼€ã€‚</td></tr><tr><td>å¦‚ä½•è‡ªå®šä¹‰åŠ¨ç”»æ—¶é•¿ï¼Ÿ</td><td>é€šè¿‡ <code>duration</code> propï¼š<code>&lt;Transition :duration="500"&gt;</code> æˆ– <code>{ enter: 500, leave: 800 }</code>ã€‚</td></tr></tbody></table>
<h4 data-id="heading-34">KeepAlive</h4>





















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>max å±æ€§çš„ä½œç”¨ï¼Ÿ</td><td>é™åˆ¶ç¼“å­˜ç»„ä»¶æ•°é‡ï¼Œè¶…å‡ºæ—¶ç§»é™¤æœ€ä¹…æœªè®¿é—®çš„ã€‚<code>&lt;KeepAlive :max="10"&gt;</code>ã€‚</td></tr><tr><td>ç»„ä»¶å¿…é¡»æœ‰ name å±æ€§å—ï¼Ÿ</td><td>ä½¿ç”¨ <code>include</code> / <code>exclude</code> æ—¶éœ€è¦ã€‚<code>&lt;script setup&gt;</code> ç»„ä»¶åé»˜è®¤æ˜¯æ–‡ä»¶åã€‚</td></tr><tr><td>ç‰¹æ®Šç”Ÿå‘½å‘¨æœŸé’©å­ï¼Ÿ</td><td><code>onActivated</code>ï¼ˆæ¿€æ´»æ—¶ï¼‰ã€<code>onDeactivated</code>ï¼ˆåœç”¨æ—¶ï¼‰ã€‚ç”¨äºå¤„ç†ç¼“å­˜ç»„ä»¶çš„çŠ¶æ€æ¢å¤ã€‚</td></tr></tbody></table>
<h4 data-id="heading-35">å¼‚æ­¥ç»„ä»¶</h4>

















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>delay é€‰é¡¹çš„ä½œç”¨ï¼Ÿ</td><td>å»¶è¿Ÿæ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œé¿å…åŠ è½½å¾ˆå¿«æ—¶å‡ºç°é—ªçƒã€‚é»˜è®¤ 200msã€‚</td></tr><tr><td>hydration ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>Vue 3.5+ æ”¯æŒå»¶è¿Ÿ hydrationï¼š<code>defineAsyncComponent({ loader, hydrate: 'visible' })</code>ã€‚</td></tr></tbody></table>
<h4 data-id="heading-36">TypeScript é›†æˆ</h4>





















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>å¦‚ä½•ä¸º defineProps æä¾›ç±»å‹ï¼Ÿ</td><td>åŸºäºç±»å‹ï¼š<code>defineProps&lt;{ title: string }&gt;()</code>ã€‚åŸºäºè¿è¡Œæ—¶ï¼š<code>defineProps({ title: String })</code>ã€‚æ¨èå‰è€…ã€‚</td></tr><tr><td>withDefaults å¦‚ä½•ä½¿ç”¨ï¼Ÿ</td><td><code>withDefaults(defineProps&lt;Props&gt;(), { count: 0 })</code>ï¼Œä¸ºç±»å‹å®šä¹‰çš„ props æä¾›é»˜è®¤å€¼ã€‚</td></tr><tr><td>å¦‚ä½•è·å–ç»„ä»¶å®ä¾‹ç±»å‹ï¼Ÿ</td><td><code>InstanceType&lt;typeof MyComponent&gt;</code>ï¼Œç”¨äº ref çš„ç±»å‹æ ‡æ³¨ã€‚</td></tr></tbody></table>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®Œæ•´ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./MyComponent.vue'</span>

<span class="hljs-keyword">const</span> compRef = ref&lt;<span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MyComponent</span>&gt;&gt;()

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  compRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">focus</span>() <span class="hljs-comment">// ç±»å‹å®‰å…¨çš„æ–¹æ³•è°ƒç”¨</span>
})
</code></pre>
<h4 data-id="heading-37">SSR æ³¨æ„äº‹é¡¹</h4>





















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>å¦‚ä½•é¿å…è·¨è¯·æ±‚çŠ¶æ€æ±¡æŸ“ï¼Ÿ</td><td>æ¯ä¸ªè¯·æ±‚åˆ›å»ºæ–°çš„åº”ç”¨å®ä¾‹ã€‚é¿å…åœ¨æ¨¡å—é¡¶å±‚åˆ›å»ºå“åº”å¼çŠ¶æ€ã€‚</td></tr><tr><td>æœåŠ¡ç«¯å¯ä»¥ä½¿ç”¨å“ªäº› APIï¼Ÿ</td><td>ä¸èƒ½ç”¨ <code>window</code>ã€<code>document</code> ç­‰æµè§ˆå™¨ APIã€‚ç”Ÿå‘½å‘¨æœŸåªæœ‰ <code>setup</code>ã€<code>onServerPrefetch</code>ã€‚</td></tr><tr><td>getSSRProps çš„ä½œç”¨ï¼Ÿ</td><td>åœ¨ SSR æ—¶ä¿®æ”¹ç»„ä»¶ propsï¼Œå¸¸ç”¨äºæ³¨å…¥æœåŠ¡ç«¯æ•°æ®ã€‚</td></tr></tbody></table>
<h4 data-id="heading-38">æ€§èƒ½ä¼˜åŒ–</h4>





















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>props ç¨³å®šæ€§ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</td><td>å­ç»„ä»¶ä½¿ç”¨ <code>shallowRef</code> æ—¶ï¼Œprops å¼•ç”¨å˜åŒ–ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚å°½é‡ä¿æŒ props å¼•ç”¨ç¨³å®šã€‚</td></tr><tr><td>ä½•æ—¶ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼Ÿ</td><td>æ¸²æŸ“è¶…è¿‡ 1000 é¡¹çš„åˆ—è¡¨æ—¶ã€‚ä½¿ç”¨ <code>vue-virtual-scroller</code> ç­‰åº“ã€‚</td></tr><tr><td>v-once å’Œ v-memo çš„åŒºåˆ«ï¼Ÿ</td><td><code>v-once</code>ï¼šåªæ¸²æŸ“ä¸€æ¬¡ï¼Œæ°¸ä¸æ›´æ–°ã€‚<code>v-memo</code>ï¼šæ¡ä»¶æ€§è·³è¿‡æ›´æ–°ï¼Œä¾èµ–æ•°ç»„æœªå˜æ—¶å¤ç”¨ã€‚</td></tr></tbody></table>
<h4 data-id="heading-39">SFC ç‰¹æ€§</h4>

















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>å¦‚ä½•åœ¨ scoped æ ·å¼ä¸­ä¿®æ”¹å­ç»„ä»¶ï¼Ÿ</td><td>ä½¿ç”¨ <code>:deep()</code> ä¼ªç±»ï¼š<code>.parent :deep(.child) { }</code>ã€‚</td></tr><tr><td>scoped CSS çš„é™åˆ¶ï¼Ÿ</td><td>ä¸å½±å“å­ç»„ä»¶çš„æ ¹å…ƒç´ ï¼ˆä¼šè‡ªåŠ¨æ·»åŠ  scoped å±æ€§ï¼‰ã€‚æ·±å±‚å…ƒç´ éœ€è¦ <code>:deep()</code>ã€‚</td></tr></tbody></table>
<h4 data-id="heading-40">æ’ä»¶å¼€å‘</h4>





















<table><thead><tr><th>é—®é¢˜</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>æ’ä»¶åº”è¯¥ç”¨ provide/inject å—ï¼Ÿ</td><td>æ˜¯çš„ã€‚æ’ä»¶é€šè¿‡ provide æä¾›åŠŸèƒ½ï¼Œç»„ä»¶é€šè¿‡ inject ä½¿ç”¨ï¼Œæ¯”å…¨å±€å±æ€§æ›´çµæ´»ã€‚</td></tr><tr><td>æ³¨å…¥ key å‘½åçº¦å®šï¼Ÿ</td><td>ä½¿ç”¨ Symbol é¿å…å†²çªï¼š<code>export const myPluginKey = Symbol()</code>ã€‚</td></tr><tr><td>å¦‚ä½•ä¸ºæ’ä»¶æ·»åŠ ç±»å‹æ”¯æŒï¼Ÿ</td><td>é€šè¿‡æ¨¡å—æ‰©å±•ï¼š<code>declare module 'vue' { interface ComponentCustomProperties { $myPlugin: MyPlugin } }</code>ã€‚</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-41">ç¬¬å››éƒ¨åˆ†ï¼šä¸ºä»€ä¹ˆé€‰æ‹© UnoCSS è€Œä¸æ˜¯ Tailwind CSSï¼Ÿ</h3>
<h4 data-id="heading-42">æ ¸å¿ƒè®ºç‚¹ï¼šUnoCSS æ˜¯ Tailwind çš„è¶…é›†</h4>
<p>UnoCSS ä¸æ˜¯ Tailwind çš„ç«äº‰è€…ï¼Œè€Œæ˜¯å¢å¼ºç‰ˆã€‚é€šè¿‡é¢„è®¾ç³»ç»Ÿï¼ŒUnoCSS å¯ä»¥ <strong>100% å…¼å®¹ Tailwind è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// uno.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig, presetWind } <span class="hljs-keyword">from</span> <span class="hljs-string">'unocss'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">presets</span>: [
    <span class="hljs-title function_">presetWind</span>(), <span class="hljs-comment">// Tailwind CSS v3 å…¼å®¹</span>
    <span class="hljs-comment">// æˆ– presetWind({ version: 4 }) // Tailwind CSS v4 å…¼å®¹</span>
  ],
})
</code></pre>
<p>ä½¿ç”¨ <code>presetWind</code> åï¼Œæ‰€æœ‰ Tailwind ç±»åéƒ½èƒ½æ­£å¸¸å·¥ä½œï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- Tailwind è¯­æ³•å®Œå…¨å…¼å®¹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex items-center justify-between p-4 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600 transition"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-xl font-bold"</span>&gt;</span>å®Œå…¨å…¼å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-43">UnoCSS çš„ç‹¬å®¶èƒ½åŠ›</h4>
<h5 data-id="heading-44">1. çº¯ CSS å›¾æ ‡ï¼ˆé›¶ JS è¿è¡Œæ—¶ï¼‰</h5>
<p>UnoCSS é€šè¿‡ <code>presetIcons</code> æ”¯æŒ <strong>10 ä¸‡+ Iconify å›¾æ ‡</strong>ï¼Œç¼–è¯‘ä¸ºçº¯ CSSï¼Œé›¶ JavaScript è¿è¡Œæ—¶å¼€é”€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D @iconify-json/carbon @iconify-json/mdi
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ç›´æ¥ç”¨ class å¼•ç”¨å›¾æ ‡ï¼Œæ— éœ€å¯¼å…¥ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"i-carbon-logo-github text-2xl"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"i-mdi-home text-red-500"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"i-carbon-arrow-right hover:i-carbon-arrow-right-filled"</span> /&gt;</span>
</code></pre>
<p><strong>ç¼–è¯‘ç»“æœï¼ˆçº¯ CSSï¼‰ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.i-carbon-logo-github</span> {
  <span class="hljs-attribute">display</span>: inline-block;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">1em</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">1em</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">"data:image/svg+xml;utf8,..."</span>) no-repeat;
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">100%</span> <span class="hljs-number">100%</span>;
}
</code></pre>
<p><strong>å¯¹æ¯” Tailwind + React Iconsï¼š</strong></p>
<ul>
<li>Tailwindï¼šéœ€è¦å¯¼å…¥ React/Vue ç»„ä»¶ï¼Œå¢åŠ  bundle ä½“ç§¯</li>
<li>UnoCSSï¼šçº¯ CSSï¼Œé›¶ JSï¼Œå›¾æ ‡æŒ‰éœ€ç¼–è¯‘</li>
</ul>
<h5 data-id="heading-45">2. å±æ€§åŒ–æ¨¡å¼ï¼ˆAttributifyï¼‰</h5>
<p>é¿å… class å­—ç¬¦ä¸²çˆ†ç‚¸ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- Tailwindï¼šclass å­—ç¬¦ä¸²è¿‡é•¿ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 flex items-center gap-2"</span>&gt;</span>
  æäº¤
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-comment">&lt;!-- UnoCSSï¼šå±æ€§åŒ–æ¨¡å¼ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
  <span class="hljs-attr">bg</span>=<span class="hljs-string">"blue-500 hover:blue-600"</span>
  <span class="hljs-attr">text</span>=<span class="hljs-string">"white"</span>
  <span class="hljs-attr">font</span>=<span class="hljs-string">"bold"</span>
  <span class="hljs-attr">p</span>=<span class="hljs-string">"y-2 x-4"</span>
  <span class="hljs-attr">rounded</span>=<span class="hljs-string">"lg"</span>
  <span class="hljs-attr">shadow</span>=<span class="hljs-string">"md"</span>
  <span class="hljs-attr">transition</span>
  <span class="hljs-attr">duration</span>=<span class="hljs-string">"300"</span>
  <span class="hljs-attr">flex</span>
  <span class="hljs-attr">items</span>=<span class="hljs-string">"center"</span>
  <span class="hljs-attr">gap</span>=<span class="hljs-string">"2"</span>
&gt;</span>
  æäº¤
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h5 data-id="heading-46">3. Variant Groupï¼ˆå˜ä½“ç»„ç®€å†™ï¼‰</h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- Tailwindï¼šé‡å¤å†™ hover --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hover:bg-red-500 hover:text-white hover:scale-105"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- UnoCSSï¼šVariant Group --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hover:(bg-red-500 text-white scale-105)"</span>&gt;</span>
</code></pre>
<h5 data-id="heading-47">4. è‡ªå®šä¹‰è§„åˆ™å¼•æ“</h5>
<p>Tailwind éœ€è¦é…ç½®å¤æ‚çš„æ’ä»¶ç³»ç»Ÿï¼ŒUnoCSS æ”¯æŒæ­£åˆ™å’Œå‡½æ•°å®šä¹‰åŸå­ç±»ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// uno.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'unocss'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">rules</span>: [
    <span class="hljs-comment">// æ­£åˆ™åŒ¹é…ï¼šè‡ªå®šä¹‰é—´è·</span>
    [<span class="hljs-regexp">/^m-(\d+)$/</span>, <span class="hljs-function">(<span class="hljs-params">[, d]</span>) =&gt;</span> ({ <span class="hljs-attr">margin</span>: <span class="hljs-string">`<span class="hljs-subst">${d}</span>px`</span> })],
    
    <span class="hljs-comment">// å‡½æ•°å®šä¹‰ï¼šè‡ªå®šä¹‰é¢œè‰²</span>
    [<span class="hljs-string">'text-brand'</span>, { <span class="hljs-attr">color</span>: <span class="hljs-string">'#3b82f6'</span> }],
    
    <span class="hljs-comment">// åŠ¨æ€å€¼ï¼šä»»æ„å•ä½</span>
    [<span class="hljs-regexp">/^gap-(\d+)(px|rem|em)$/</span>, <span class="hljs-function">(<span class="hljs-params">[, num, unit]</span>) =&gt;</span> ({ <span class="hljs-attr">gap</span>: <span class="hljs-string">`<span class="hljs-subst">${num}</span><span class="hljs-subst">${unit}</span>`</span> })],
  ],
  <span class="hljs-attr">shortcuts</span>: {
    <span class="hljs-comment">// å¿«æ·ç»„åˆç±»</span>
    <span class="hljs-string">'btn-primary'</span>: <span class="hljs-string">'bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600'</span>,
  },
})
</code></pre>
<h5 data-id="heading-48">5. ç¼–è¯‘æ¨¡å¼ï¼ˆCompile Classï¼‰</h5>
<p>å°†å¤šä¸ªåŸå­ç±»ç¼–è¯‘ä¸ºä¸€ä¸ªå“ˆå¸Œç±»ï¼Œå‡å°‘ HTML ä½“ç§¯ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å¼€å‘æ¨¡å¼ï¼šåŸå­ç±» --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex items-center gap-4 bg-blue-500 p-4"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç”Ÿäº§æ¨¡å¼ï¼šç¼–è¯‘ä¸ºå•ä¸ªç±» --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"uno-abc123"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.uno-abc123</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3b82f6</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h4 data-id="heading-49">å¯¹æ¯”æ€»ç»“</h4>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>Tailwind CSS</th><th>UnoCSS</th></tr></thead><tbody><tr><td>åŸºç¡€åŸå­ç±»</td><td>âœ… å®Œæ•´æ”¯æŒ</td><td>âœ… å®Œå…¨å…¼å®¹ï¼ˆpresetWindï¼‰</td></tr><tr><td>å›¾æ ‡æ–¹æ¡ˆ</td><td>éœ€è¦é¢å¤–åº“ï¼ˆReact Icons ç­‰ï¼‰</td><td>âœ… å†…ç½® 10 ä¸‡+ å›¾æ ‡ï¼ˆçº¯ CSSï¼‰</td></tr><tr><td>å±æ€§åŒ–æ¨¡å¼</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… presetAttributify</td></tr><tr><td>Variant Group</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… <code>hover:(bg-red text-white)</code></td></tr><tr><td>è‡ªå®šä¹‰è§„åˆ™</td><td>å¤æ‚æ’ä»¶ç³»ç»Ÿ</td><td>âœ… æ­£åˆ™/å‡½æ•°ç›´æ¥å®šä¹‰</td></tr><tr><td>ç¼–è¯‘æ¨¡å¼</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… ç¼–è¯‘ä¸ºå“ˆå¸Œç±»</td></tr><tr><td>æ€§èƒ½</td><td>JIT ç¼–è¯‘å¿«</td><td>âœ… æ›´å¿«ï¼ˆVite åŸç”Ÿï¼‰</td></tr><tr><td>ç”Ÿæ€æ•´åˆ</td><td>Standalone</td><td>âœ… Vite/Nuxt æ·±åº¦é›†æˆ</td></tr></tbody></table>
<h4 data-id="heading-50">ä¸ Anthony Fu æŠ€æœ¯æ ˆçš„ååŒ</h4>
<ol>
<li><strong>Vite åŸç”Ÿè®¾è®¡</strong>ï¼šUnoCSS ä¸º Vite è®¾è®¡ï¼ŒHMR æå¿«</li>
<li><strong>Nuxt ä¸€ç­‰å…¬æ°‘</strong>ï¼š<code>@nuxt/unocss</code> å¼€ç®±å³ç”¨</li>
<li><strong>ä½œè€…ç”Ÿæ€</strong>ï¼šAnthony Fu åŒæ—¶æ˜¯ UnoCSS å’Œ Iconify çš„ä½œè€…ï¼Œå·¥å…·é“¾æ·±åº¦æ•´åˆ</li>
</ol>
<h4 data-id="heading-51">å®Œæ•´é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// uno.config.ts</span>
<span class="hljs-keyword">import</span> {
  defineConfig,
  presetAttributify,
  presetIcons,
  presetTypography,
  presetUno,
  presetWebFonts,
  transformerDirectives,
  transformerVariantGroup,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'unocss'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-comment">// é¢„è®¾</span>
  <span class="hljs-attr">presets</span>: [
    <span class="hljs-title function_">presetUno</span>(), <span class="hljs-comment">// é»˜è®¤é¢„è®¾ï¼ˆç±»ä¼¼ Tailwindï¼‰</span>
    <span class="hljs-title function_">presetAttributify</span>(), <span class="hljs-comment">// å±æ€§åŒ–æ¨¡å¼</span>
    <span class="hljs-title function_">presetIcons</span>({
      <span class="hljs-attr">scale</span>: <span class="hljs-number">1.2</span>,
      <span class="hljs-attr">cdn</span>: <span class="hljs-string">'https://esm.sh/'</span>,
    }),
    <span class="hljs-title function_">presetTypography</span>(), <span class="hljs-comment">// æ’ç‰ˆé¢„è®¾</span>
    <span class="hljs-title function_">presetWebFonts</span>({
      <span class="hljs-attr">fonts</span>: {
        <span class="hljs-attr">sans</span>: <span class="hljs-string">'Inter'</span>,
        <span class="hljs-attr">mono</span>: <span class="hljs-string">'Fira Code'</span>,
      },
    }),
  ],

  <span class="hljs-comment">// è½¬æ¢å™¨</span>
  <span class="hljs-attr">transformers</span>: [
    <span class="hljs-title function_">transformerDirectives</span>(), <span class="hljs-comment">// @apply æŒ‡ä»¤</span>
    <span class="hljs-title function_">transformerVariantGroup</span>(), <span class="hljs-comment">// Variant Group</span>
  ],

  <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™</span>
  <span class="hljs-attr">rules</span>: [
    [<span class="hljs-string">'text-brand'</span>, { <span class="hljs-attr">color</span>: <span class="hljs-string">'#3b82f6'</span> }],
  ],

  <span class="hljs-comment">// å¿«æ·æ–¹å¼</span>
  <span class="hljs-attr">shortcuts</span>: {
    <span class="hljs-string">'btn'</span>: <span class="hljs-string">'px-4 py-2 rounded inline-block cursor-pointer'</span>,
    <span class="hljs-string">'btn-primary'</span>: <span class="hljs-string">'btn bg-blue-500 text-white hover:bg-blue-600'</span>,
  },

  <span class="hljs-comment">// ä¸»é¢˜æ‰©å±•</span>
  <span class="hljs-attr">theme</span>: {
    <span class="hljs-attr">colors</span>: {
      <span class="hljs-attr">brand</span>: {
        <span class="hljs-attr">primary</span>: <span class="hljs-string">'#3b82f6'</span>,
        <span class="hljs-attr">secondary</span>: <span class="hljs-string">'#8b5cf6'</span>,
      },
    },
  },
})
</code></pre>
<p><strong>å®‰è£…å‘½ä»¤ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D unocss
pnpm add -D @iconify-json/carbon @iconify-json/mdi
</code></pre>
<hr/>
<h3 data-id="heading-52">ç¬¬äº”éƒ¨åˆ†ï¼šé…å¥—å·¥å…·é“¾ä¸€è§ˆ</h3>






































































<table><thead><tr><th>å·¥å…·</th><th>ç”¨é€”</th><th>æ¨èç†ç”±</th></tr></thead><tbody><tr><td><strong>Vue 3.5+</strong></td><td>æ¸è¿›å¼ JavaScript æ¡†æ¶</td><td>Composition APIã€æ€§èƒ½ä¼˜åŒ–ã€TypeScript æ”¯æŒ</td></tr><tr><td><strong>Nuxt 3</strong></td><td>Vue å…ƒæ¡†æ¶</td><td>SSR/SSGã€æ–‡ä»¶è·¯ç”±ã€æœåŠ¡ç«¯ APIã€SEO ä¼˜åŒ–</td></tr><tr><td><strong>Pinia</strong></td><td>çŠ¶æ€ç®¡ç†</td><td>ç›´è§‚çš„ APIã€å®Œæ•´çš„ TypeScript æ”¯æŒã€Vue DevTools é›†æˆ</td></tr><tr><td><strong>Vite</strong></td><td>æ„å»ºå·¥å…·</td><td>æé€Ÿ HMRã€åŸç”Ÿ ESMã€Rollup ç”Ÿäº§æ„å»º</td></tr><tr><td><strong>VitePress</strong></td><td>é™æ€ç«™ç‚¹ç”Ÿæˆå™¨</td><td>Vue é©±åŠ¨ã€Markdown æ‰©å±•ã€ä¸»é¢˜å®šåˆ¶</td></tr><tr><td><strong>Vitest</strong></td><td>å•å…ƒæµ‹è¯•</td><td>Vite åŸç”Ÿã€ä¸ Jest å…¼å®¹çš„ APIã€å¿«é€Ÿæ‰§è¡Œ</td></tr><tr><td><strong>UnoCSS</strong></td><td>åŸå­åŒ– CSS å¼•æ“</td><td>Tailwind è¶…é›†ã€çº¯ CSS å›¾æ ‡ã€Vite æ·±åº¦é›†æˆ</td></tr><tr><td><strong>pnpm</strong></td><td>åŒ…ç®¡ç†å™¨</td><td>ç£ç›˜é«˜æ•ˆã€ä¸¥æ ¼ä¾èµ–ç®¡ç†ã€monorepo æ”¯æŒ</td></tr><tr><td><strong>VueUse</strong></td><td>ç»„åˆå¼å‡½æ•°é›†åˆ</td><td>200+ å®ç”¨å·¥å…·ã€SSR å‹å¥½ã€Tree-shakable</td></tr><tr><td><strong>Slidev</strong></td><td>å¼€å‘è€…å¹»ç¯ç‰‡</td><td>Markdown ç¼–å†™ã€Vue ç»„ä»¶ã€å½•åˆ¶åŠŸèƒ½</td></tr><tr><td><strong>tsdown</strong></td><td>TypeScript æ‰“åŒ…å·¥å…·</td><td>é›¶é…ç½®ã€ç±»å‹å£°æ˜ç”Ÿæˆã€ESM/CJS åŒè¾“å‡º</td></tr><tr><td><strong>Vue Router</strong></td><td>å®˜æ–¹è·¯ç”±</td><td>åµŒå¥—è·¯ç”±ã€å¯¼èˆªå®ˆå«ã€åŠ¨æ€è·¯ç”±åŒ¹é…</td></tr></tbody></table>
<h4 data-id="heading-53">å¿«é€Ÿå¼€å§‹å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º Vue 3 é¡¹ç›®ï¼ˆViteï¼‰</span>
pnpm create vite my-vue-app --template vue-ts

<span class="hljs-comment"># åˆ›å»º Nuxt 3 é¡¹ç›®</span>
pnpm dlx nuxi@latest init my-nuxt-app

<span class="hljs-comment"># æ·»åŠ  UnoCSS</span>
pnpm add -D unocss

<span class="hljs-comment"># æ·»åŠ  VueUse</span>
pnpm add @vueuse/core

<span class="hljs-comment"># æ·»åŠ  Pinia</span>
pnpm add pinia

<span class="hljs-comment"># æ·»åŠ  Vitest</span>
pnpm add -D vitest
</code></pre>
<hr/>
<h3 data-id="heading-54">æ€»ç»“</h3>
<p>Anthony Fu çš„å¼€å‘è§„èŒƒå¼ºè°ƒï¼š</p>
<ol>
<li><strong>ç±»å‹å®‰å…¨ä¼˜å…ˆ</strong>ï¼šTypeScript + æ˜¾å¼ç±»å‹å®šä¹‰</li>
<li><strong>æ€§èƒ½æ„è¯†</strong>ï¼š<code>shallowRef</code> &gt; <code>ref</code>ã€é¿å…æ·±åº¦ä¾¦å¬ã€è™šæ‹Ÿæ»šåŠ¨</li>
<li><strong>å·¥å…·é“¾ååŒ</strong>ï¼šVite + UnoCSS + Vitest æ·±åº¦æ•´åˆ</li>
<li><strong>ä»£ç è´¨é‡</strong>ï¼šå•ä¸€èŒè´£ã€ESLint è‡ªåŠ¨åŒ–ã€Git Hooks</li>
<li><strong>ç°ä»£åŒ–å®è·µ</strong>ï¼šComposition APIã€<code>&lt;script setup&gt;</code>ã€ç»„åˆå¼å‡½æ•°</li>
</ol>
<p>é€šè¿‡éµå¾ªè¿™äº›è§„èŒƒï¼Œå¯ä»¥æ„å»ºæ›´å¿«ã€æ›´å¯ç»´æŠ¤ã€æ›´å…·æ‰©å±•æ€§çš„ Vue 3 åº”ç”¨ã€‚</p>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantfu%2Fskills" target="_blank" title="https://github.com/antfu/skills" ref="nofollow noopener noreferrer">antfu/skills</a> - Anthony Fu çš„æŠ€èƒ½æ ‡å‡†æ–‡æ¡£</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2F" target="_blank" title="https://vuejs.org/" ref="nofollow noopener noreferrer">Vue 3 å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Funocss.dev%2F" target="_blank" title="https://unocss.dev/" ref="nofollow noopener noreferrer">UnoCSS æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvueuse.org%2F" target="_blank" title="https://vueuse.org/" ref="nofollow noopener noreferrer">VueUse æ–‡æ¡£</a></li>
</ul>
<p><strong>è¯‘è€…æ³¨ï¼š</strong> æœ¬æ–‡åŸºäº antfu/skills ä»“åº“äº 2026 å¹´ 2 æœˆçš„å†…å®¹æ•´ç†ç¿»è¯‘ï¼Œéšç€ç”Ÿæ€æ¼”è¿›ï¼Œéƒ¨åˆ†å®è·µå¯èƒ½æ›´æ–°ï¼Œè¯·ä»¥å®˜æ–¹æ–‡æ¡£ä¸ºå‡†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vben Adminç®¡ç†ç³»ç»Ÿé›†æˆå¾®å‰ç«¯wujie-(ä¸‰ï¼‰ç»ˆ]]></title>    <link>https://juejin.cn/post/7605529884824485951</link>    <guid>https://juejin.cn/post/7605529884824485951</guid>    <pubDate>2026-02-12T14:56:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605529884824485951" data-draft-id="7605530057175908395" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vben Adminç®¡ç†ç³»ç»Ÿé›†æˆå¾®å‰ç«¯wujie-(ä¸‰ï¼‰ç»ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-02-12T14:56:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="go_caipu"/> <meta itemprop="url" content="https://juejin.cn/user/4353721778049864"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vben Adminç®¡ç†ç³»ç»Ÿé›†æˆå¾®å‰ç«¯wujie-(ä¸‰ï¼‰ç»ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721778049864/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    go_caipu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T14:56:37.000Z" title="Thu Feb 12 2026 14:56:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ol>
<li><a href="https://juejin.cn/post/7584719268043391010" target="_blank" title="https://juejin.cn/post/7584719268043391010"># Vben Adminç®¡ç†ç³»ç»Ÿé›†æˆqiankunå¾®æœåŠ¡ï¼ˆä¸€ï¼‰</a></li>
<li><a href="https://juejin.cn/post/7593342203822669830" target="_blank" title="https://juejin.cn/post/7593342203822669830"># Vben Adminç®¡ç†ç³»ç»Ÿé›†æˆqiankunå¾®æœåŠ¡ï¼ˆäºŒï¼‰</a></li>
</ol>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>æœ¬ç¯‡æ˜¯vbenå‰ç«¯æ¡†æ¶é›†æˆå¾®æœåŠ¡çš„ç¬¬3ç¯‡ï¼Œå‰æ®µæ—¶é—´å†™äº†vue-vben-adminé›†æˆqiankunçš„ä¸¤ç¯‡æ–‡ç« ï¼Œæ”¶åˆ°äº†å¤§å®¶ä¸å°‘å»ºè®®ï¼Œæ–‡ç« è¿˜é—ç•™äº†ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¤štabæ ‡ç­¾ä¸æ”¯æŒçŠ¶æ€ä¿æŒï¼Œå€ŸåŠ©AIè™½ç„¶ä¹Ÿå®ç°çš„ç›¸åº”æ–¹æ¡ˆï¼Œä½†æ˜¯å¯¹vbençš„packageåŒ…ä¿®æ”¹å†…å®¹è¾ƒå¤šï¼ˆåç»­åŒæ­¥ä¸»æ¡†æ¶è¾ƒä¸ºç¹çï¼‰ï¼Œå¹¶ä¸”ä¿®æ”¹ä»£ç å¥çŠ¶æ€§ä¸å¥½è¯„ä¼°ã€‚æŠ±æ­‰æš‚åœäº†è¿›ä¸€æ­¥å®Œå–„å®ç°æ–¹æ¡ˆï¼Œç›®å‰å…ˆä¿æŒåŸºæœ¬åŠŸèƒ½æ˜¯okã€‚</p>
<p>è¿‘æœŸä¹Ÿå°è¯•<code>wujieå¾®å‰ç«¯æ¡†æ¶</code>å‘ç°èƒ½æ»¡è¶³æˆ‘å½“å‰çš„æ‰€æœ‰è¯‰æ±‚ï¼Œæ‰€ä»¥æœ‰äº†æœ¬ç¯‡çš„æ–‡ç« å†…å®¹ï¼Œ<code>å‰ä¸¤ç¯‡æ–‡ç« çš„åŠŸèƒ½å’Œé—®é¢˜åœ¨æœ¬æ–‡ä¸­éƒ½å·²æ”¯æŒ</code>ï¼Œé€‰æ‹©wujieåŸå› æ˜¯æ”¯æŒä»¥ä¸‹ä¸¤ä¸ªåŠŸèƒ½:</p>
<ul>
<li>å¤©ç„¶æ”¯æŒä¿æ´»æ¨¡å¼alive=trueï¼Œä¸vbenä¸­routeä¸­Keepliveå‚æ•°ç»‘å®šï¼Œèƒ½æ”¯æŒçŠ¶æ€ä¿æŒçš„é…ç½®ã€‚</li>
<li>wujieå®ç°é€»è¾‘æ˜¯iframeæ¡†æ¶æ¨¡å¼,å¯¹å­åº”æ”¹é€ è¾ƒå°ï¼Œå¦‚æœä¸è¦æ”¯æŒä¸»åº”ç”¨ä¼ å‚å­åº”ç”¨å¯ä»¥ä¸ç”¨æ”¹é€ æˆ–å°‘é‡æ”¹é€ ã€‚</li>
</ul>
<p>ä¸‹é¢åˆ†æ­¥å®æ–½é›†æˆåŠŸèƒ½ï¼š</p>
<h2 data-id="heading-1">äºŒã€ä¸»åº”ç”¨è°ƒæ•´</h2>
<h3 data-id="heading-2">1.å®‰è£…wujieå’Œwujie-vue3</h3>
<pre><code class="hljs language-js" lang="js"># å®‰è£…wujie
pnpm i wujie
# å®‰è£…wujie-vue3
pnpm i wujie-vue3
</code></pre>
<h3 data-id="heading-3">2. æ¸…é™¤æ²™ç®±æ•°æ®å®ç°</h3>
<p>ä¸»åº”ç”¨<code>src</code>ä¸‹æ·»åŠ wujieæ–‡ä»¶å¤¹å¹¶æ·»åŠ index.tsæ–‡ä»¶ï¼Œä¸¤ä¸ªå‡½æ•°å®ç°åŠŸèƒ½æ˜¯æ¸…ç†æ²™ç®±ç¼“å­˜æ•°æ®ï¼Œä¿è¯åœ¨â€é€€å‡ºç™»å½•é‡æ–°æ‰“å¼€â€œæ ·å¼ä¸ä¼šå¼‚å¸¸ï¼ŒrefreshAppå‡½æ•°ä¸ºåç»­å•ä¸ªé¡µç­¾å…³é—­æä¾›å¤‡ç”¨æ”¯æŒã€‚
index.ts,æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">interface <span class="hljs-title class_">HTMLIframeElementWithContentWindow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HTMLIFrameElement</span> {
  <span class="hljs-attr">contentWindow</span>: <span class="hljs-title class_">Window</span>;
}

<span class="hljs-comment">// refreshApp ä¸»åº”ç”¨å¯ä»¥é€šè¿‡ä¸‹è¿°æ–¹æ³•ï¼Œä¸»åŠ¨æ¸…é™¤æŒ‡å®šå­åº”ç”¨çš„æ²™ç®±ç¼“å­˜</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">refreshApp</span> = (<span class="hljs-params">name = <span class="hljs-string">''</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (!name) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'refreshAppæ–¹æ³•å¿…é¡»ä¼ å…¥å­åº”ç”¨çš„nameå±æ€§'</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// è¿™é‡Œçš„windowåº”è¯¥æ˜¯é¡¶çº§çª—å£ï¼Œä¹Ÿå°±æ˜¯ä¸»åº”ç”¨çš„window</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SUB_FRAME</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-title function_">querySelector</span>(
    <span class="hljs-string">`iframe[name=<span class="hljs-subst">${name}</span>]`</span>,
  ) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLIframeElementWithContentWindow</span>;

  <span class="hljs-keyword">if</span> (!<span class="hljs-variable constant_">SUB_FRAME</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`æœªæ‰¾åˆ°<span class="hljs-subst">${name}</span>å­åº”ç”¨ï¼Œè·³è¿‡åˆ·æ–°`</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SUB_WINDOW</span> = <span class="hljs-variable constant_">SUB_FRAME</span>.<span class="hljs-property">contentWindow</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SUB_IDMAP</span> = <span class="hljs-variable constant_">SUB_WINDOW</span>.<span class="hljs-property">__WUJIE</span>?.<span class="hljs-property">inject</span>?.<span class="hljs-property">idToSandboxMap</span>; <span class="hljs-comment">// æ²™ç®±Mapå¯¹è±¡</span>
  <span class="hljs-variable constant_">SUB_IDMAP</span>.<span class="hljs-title function_">clear</span>();
};

<span class="hljs-comment">// ä¸»åº”ç”¨ä¸­æ¸…é™¤æ‰€æœ‰å·²æ¿€æ´»çš„å­åº”ç”¨æ²™ç®±ç¼“å­˜</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">refreshAllApp</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// æ‰¾åˆ°æ‰€æœ‰æ— ç•Œå­åº”ç”¨çš„iframe</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ALL_SUB_IFRAME</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-title function_">querySelectorAll</span>(
    <span class="hljs-string">'iframe[data-wujie-flag]'</span>,
  );

  <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">ALL_SUB_IFRAME</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æœªæ‰¾åˆ°ä»»ä½•å­åº”ç”¨ï¼Œè·³è¿‡åˆ·æ–°'</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// æ‹¿åˆ°è¿™äº›iframeé‡Œé¢çš„contentWindow</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ALL_SUB_WINDOW</span> = [...<span class="hljs-variable constant_">ALL_SUB_IFRAME</span>].<span class="hljs-title function_">map</span>(
    <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> (v <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLIframeElementWithContentWindow</span>).<span class="hljs-property">contentWindow</span>,
  );

  <span class="hljs-comment">// ä¾æ¬¡æ‰§è¡Œæ¸…é™¤</span>
  <span class="hljs-variable constant_">ALL_SUB_WINDOW</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> v.<span class="hljs-property">__WUJIE</span>?.<span class="hljs-property">inject</span>?.<span class="hljs-property">idToSandboxMap</span>?.<span class="hljs-title function_">clear</span>());
};

<span class="hljs-keyword">export</span> { refreshAllApp, refreshApp };

</code></pre>
<p>ä¸»åº”ç”¨/src/layouts/basic.vue ç¨‹åºä¸»ç•Œé¢ï¼Œåœ¨å¤´éƒ¨å¼•å…¥ä¸Šè¿°æ–‡ä»¶å¹¶åœ¨ç›¸åº”ä½ç½®è°ƒç”¨æ¸…é™¤æ²™ç®±æ–¹æ³•</p>
<pre><code class="hljs language-js" lang="js"># å¼•ç”¨
<span class="hljs-keyword">import</span> { refreshAllApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'#/wujie/index'</span>;

# é€€å‡ºæ—¶æ¸…ç†
<span class="hljs-comment">// logout</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLogout</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> authStore.<span class="hljs-title function_">logout</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-title function_">refreshAllApp</span>();
}
</code></pre>
<h3 data-id="heading-4">3. æ·»åŠ å¾®æœåŠ¡é€šç”¨é¡µé¢wujie.vue</h3>
<p>åœ¨ä¸»åº”ç”¨ /apps/web-caipu/src/views/_coreä¸‹æ·»åŠ wujie.vueé¡µé¢ï¼Œé¡µé¢å†…å®¹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">import</span> { preferences } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vben/preferences'</span>;
<span class="hljs-keyword">import</span> { useAccessStore, useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vben/stores'</span>;

<span class="hljs-keyword">import</span> <span class="hljs-title class_">WujieVue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'wujie-vue3'</span>;

<span class="hljs-keyword">const</span> useStore = <span class="hljs-title function_">useUserStore</span>();
<span class="hljs-keyword">const</span> accessStore = <span class="hljs-title function_">useAccessStore</span>();
<span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();

<span class="hljs-comment">// propsé€šä¿¡</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">ref</span>({
  <span class="hljs-attr">userinfo</span>: useStore.<span class="hljs-property">userInfo</span>,
  <span class="hljs-attr">token</span>: accessStore.<span class="hljs-property">accessToken</span>,
  preferences,
});
<span class="hljs-comment">// åŠ æ—¶ç¼€æ˜¯å¼ºåˆ¶åˆ·æ–°</span>
<span class="hljs-keyword">const</span> appUrl = <span class="hljs-title function_">ref</span>(<span class="hljs-string">`http://localhost:5667/app<span class="hljs-subst">${route.path}</span>?t=<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>);
<span class="hljs-keyword">const</span> keepLive = route.<span class="hljs-property">meta</span>?.<span class="hljs-property">keepAlive</span>;
&lt;/script&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sub-app-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">WujieVue</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">"100%"</span>
      <span class="hljs-attr">:name</span>=<span class="hljs-string">"appUrl"</span>
      <span class="hljs-attr">:url</span>=<span class="hljs-string">"appUrl"</span>
      <span class="hljs-attr">:alive</span>=<span class="hljs-string">"keepLive"</span>
      <span class="hljs-attr">:props</span>=<span class="hljs-string">"props"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.sub-app-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: white;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.sub-app-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<p>èªæ˜çš„ä½ ï¼Œä¸€å®šçŸ¥é“å®ç°çš„é€»è¾‘ã€‚å…¶ä¸­å­åº”ç”¨çš„åœ°å€æµ‹è¯•å†™localhost:5667,åé¢ä¼šé›†æˆé…ç½®æ–‡ä»¶ä¸­ï¼Œè‡³æ­¤ä¸»åº”ç”¨æ”¹é€ å®Œæˆã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€å­åº”ç”¨æ”¹é€ </h2>
<p>å­åº”ç”¨åŸºæœ¬ä¸ç”¨æ”¹ï¼Œåªè¦æ”¹/Users/wgh/code/caipu-vben-admin/apps-micro/web-antd/src/bootstrap.tsæ–‡ä»¶å³å¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03697f6285fc45818c1289b3a6a7045f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29fY2FpcHU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771548044&amp;x-signature=ysEtLWVw5xm%2BxQ0PembDHufccFY%3D" alt="image.png" loading="lazy"/>
åœ¨49è¡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œä»£ç ä¸ç”¨è§£é‡Šï¼Œä¹‹å‰ä¸€æ ·çš„å®ç°é€»è¾‘ã€‚</p>
<pre><code class="hljs language-js" lang="js">
 <span class="hljs-comment">// åˆä½¿åŒ–å­˜å‚¨ä¹‹åèµ‹å€¼ï¼Œé¿å…è·¯ç”±åˆ¤æ–­è·³è½¬åˆ°ç™»å½•é¡µ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">__POWERED_BY_WUJIE__</span>) {
    <span class="hljs-comment">// props æ¥æ”¶</span>
    <span class="hljs-keyword">const</span> props = <span class="hljs-variable language_">window</span>.<span class="hljs-property">$wujie</span>?.<span class="hljs-property">props</span>; <span class="hljs-comment">// {data: xxx, methods: xxx}</span>
    <span class="hljs-keyword">const</span> useStore = <span class="hljs-title function_">useUserStore</span>();
    <span class="hljs-keyword">const</span> accessStore = <span class="hljs-title function_">useAccessStore</span>();
    useStore.<span class="hljs-title function_">setUserInfo</span>(props.<span class="hljs-property">userInfo</span>);
    accessStore.<span class="hljs-title function_">setAccessToken</span>(props.<span class="hljs-property">token</span>);
    <span class="hljs-title function_">updatePreferences</span>(props.<span class="hljs-property">preferences</span>);
    <span class="hljs-comment">// window.$wujie?.bus.$on('wujie-theme-update', (theme: any) =&gt; {</span>
    <span class="hljs-comment">//   alert('wujie-theme-update');</span>
    <span class="hljs-comment">//   updatePreferences(theme);</span>
    <span class="hljs-comment">// });</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'wujie-theme-update'</span>, <span class="hljs-function">(<span class="hljs-params">theme: any</span>) =&gt;</span> {
      <span class="hljs-title function_">updatePreferences</span>(theme.<span class="hljs-property">detail</span>);
    });
  }

</code></pre>
<h2 data-id="heading-6">å››ã€‚æ–°å¢è·¯ç”±é…ç½®</h2>
<p>åœ¨ä¸»åº”ç”¨è·¯ç”±ä¸­é…ç½®å­åº”ç”¨ä¸€ä¸ªæµ‹è¯•è·¯ç”± /app/basic/testï¼Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f23aa3d893c04e9480f97392fa8f4dd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29fY2FpcHU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771548044&amp;x-signature=vk13dc1JQ7KDY%2FeXCc0NXgBS8Tg%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºæµ‹è¯•åœ¨å­åº”ç”¨çŠ¶æ€ä¿æŒï¼Œæˆ‘åœ¨é¡µé¢ä¸­æ·»åŠ ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬æ¡† ï¼Œæµ‹è¯•å†…å®¹ä¸ä¼šéšç€åˆ‡tabé¡µç­¾è€Œé‡æ–°åŠ è½½ï¼Œæµè§ˆå™¨çš„å‰è¿›åé€€ä¹Ÿä¸ä¼šå‡ºé”™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5060195186484313b79fe03fdf1d0d72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29fY2FpcHU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771548044&amp;x-signature=wCjfOlQNOGSf%2BHFp9Y28EKT6AHQ%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸Šè¿°åŠŸèƒ½å·²é›†æˆåœ¨å‰ç«¯ç¨‹åºé‡Œï¼Œå¦‚æœæˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ„Ÿè°¢ç»™æˆ‘ç‚¹ä¸ªğŸŒŸ</p>
<ul>
<li>å‰ç«¯åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fgo-caipu-team%2Fcaipu-vben-admin" target="_blank" title="https://gitee.com/go-caipu-team/caipu-vben-admin" ref="nofollow noopener noreferrer">caipu-vue-admin</a></li>
<li>åç«¯åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fgo-caipu-team%2Fgo-caipu" target="_blank" title="https://gitee.com/go-caipu-team/go-caipu" ref="nofollow noopener noreferrer">go-caipu</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>